# StackOverflow 问答 11110000-11110999

# jquery - jQuery - 如何重新排序表单元素和表格行

> ID：11110002
> 
> 赞同：1
> 
> 时间：2012-06-19T21:50:30.373
> 
> 标签：jquery, asp-classic

抱歉，关于 jQuery 有这么多问题。这是我写 jQuery 的最初几天，但我对它还是很陌生。感谢社区迄今为止的帮助。

这是我的表格的屏幕截图。

![动态表格](../Images/020d24c0ee216114549090148c38d3d9.png)

可以使用“添加课程”按钮添加上表的行。单击添加课程时，将生成另一行，并且表单输入名称也将具有数字轨道。以下是代码。

```
var counterforappending = 1;
var counterforajax = 1;

function addARNBSCourseRow()        
   tablerow = "<tr>";
   tablerow += "<td><select name='NBSCourse" + counterforappending + "'></select></td>";
   tablerow += "<td><select name='NBSCourseType" + counterforappending + "'><option value='Core' selected='selected'>Core</option>";
  //Other codes...
  </select></td>";
   tablerow += "<td><select name='NBSIndexNo" + counterforappending + "' class='IndexNo'></select></td>";

//--Other Codes--
counterforappending++; 
```

}

“counterforappending”是跟踪当前行号的计数器，当输入“添加课程”按钮时将创建该计数器：第二行的选择名称将称为“NBScourse2。该数字将是递增的（NBSCourse3、NBSCourse4...）

我还有一个脚本可以在选择“删除课程”时删除该行。问题：如果我删除中间的一行（例如，第 3 行，共 5​​ 行），行的顺序将不再遵循（剩余 1、2、4、5）。当我稍后使用表单处理程序收集数据时，这将是一个问题，因为我将有一个隐藏字段告诉我预期有多少行，但不再引用表单元素（NBSCourse3 将消失。）

有没有一种好方法可以刷新行的顺序，并重命名单个元素以反映正确的数字顺序。

我将无法使用 [] 方法，因为那是在 PHP 中，而我正在使用 Classic ASP 进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:23:10.047

如您所描述的，下面的代码重新排序，请参阅this [fiddle](http://jsfiddle.net/Nicholas_Murray/ppd5D/)以获取工作示例。

Javascript：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript">     
$(document).ready(function () {     
$('.button_remove').click(function() {
    var index = 0;
    var currentName = $(this).attr('name');
    var currentId = getCurrentIdFromName(currentName);

    $('#' + currentId).remove();

    $('#courseTable').find('tr').each(function() {
        $(this).each(function() {
            var currentTRId = $(this).attr('id');
            $('#' + currentTRId + ' :input').each(function() {
                var name = $(this).attr('name');
                var id = getCurrentIdFromName(name);
                var text = name.replace(id,'');
                $(this).attr('name', text + index);             
            });
        });

        $(this).attr('id',index);
        index++;
    });
});
}); 

function getCurrentIdFromName(name) {
var id = name.match(/\d/g);
return id[0];
}
</script> 
```

当然，您的 HTML 必须是这样的：

```
<table id="courseTable" border="1" cellpadding="0" cellspacing="0">
<tr id="0" class="header">
    <td>Course Code</td>
    <td>Course Type</td>
    <td>Index No</td>
    <td>Class Details</td>
    <td></td>
</tr>
<tr id="1">
    <td>
        <select name="NBSCourse1">
            <option selected='selected'>Select Course ID</option>           
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </td>
    <td>
        <select name="NBSCourseType1">
            <option selected='selected'>Core</option>           
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </td>
    <td>
        <select name="'NBSIndexNo1">
            <option selected='selected'></option>           
            <option value="First">1</option>
            <option value="Second">2</option>
            <option value="Third">3</option>
        </select>
    </td>
    <td></td>
    <td>
        <input type="submit" value="Remove Course" name="btnRemove1" class="button_remove" />
    </td>
</tr>
<tr id="2">
    <td>
        <select name="NBSCourse2">
            <option selected="selected">Select Course ID</option>           
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </td>
    <td>
        <select name="NBSCourseType2">
            <option selected="selected">Core</option>           
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </td>
    <td>
        <select name="NBSIndexNo2">
            <option selected="selected"></option>           
            <option value="First">1</option>
            <option value="Second">2</option>
            <option value="Third">3</option>
        </select>
    </td>
    <td></td>
    <td>
        <input type="submit" value="Remove Course" name="btnRemove2" class="button_remove" />
    </td>
</tr>
<tr id="3">
    <td>
        <select name="NBSCourse3">
            <option selected='selected'>Select Course ID</option>           
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </td>
    <td>
        <select name="NBSCourseType3">
            <option selected='selected'>Core</option>           
            <option value="First">First</option>
            <option value="Second">Second</option>
            <option value="Third">Third</option>
        </select>
    </td>
    <td>
        <select name="NBSIndexNo3">
            <option selected='selected'></option>           
            <option value="First">1</option>
            <option value="Second">2</option>
            <option value="Third">3</option>
        </select>
    </td>
    <td></td>
    <td>
        <input type="submit" value="Remove Course" name="btnRemove3" class="button_remove" />
    </td>
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:01:03.193

你可以使用这样的东西：

```
var el = "<tr><td>td1</td><td>td2</td></td>"
$(table).appendChild(el); 
```

这将创建一个包含几个元素的表格行，并将其作为子项附加到表格中。

# java - 从配置注释的类中注册 bean

> ID：11110003
> 
> 赞同：2
> 
> 时间：2012-06-19T21:50:31.197
> 
> 标签：java, spring, javabeans, spring-annotations

我有一个用`@Configuration`（我们称之为`StubConfiguration`）注释的类，它有一个用`@Bean`. 此方法返回一个`BeanFactoryPostProcessor`负责注册一些 bean 的实现。但是，Spring 无法解析该工厂在运行时注册的 bean。

我的假设是`StubConfiguration`由 Spring 的组件扫描获取，`BeanFactoryPostProcessor`注册然后`postProcessBeanFactory()`调用它的方法，随后注册我需要的 bean。

我想错了吗？`ApplicationContext`如何使用此后期处理注册我需要的 bean ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:14:15.713

如果您还使用 XML 应用程序上下文来声明 bean，则可以告诉 Spring 进行组件扫描并将`@Stub`其视为 Spring 组件注释。

```
<context:component-scan base-package="your.base.package">
    <context:include-filter type="annotation" expression="your.stub.package.Stub"/>
</context:component-scan> 
```

如果您仅使用注释配置应用程序上下文，请查看[此答案](https://stackoverflow.com/questions/5575470/doing-contextcomponent-scan-programatic-way)以了解无需 XML 的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:49:02.513

如何让您的`@Stub`注释扩展`@Component`注释？像`@Service`or `@Repository`。

您将使用常规的 Spring 上下文扫描扫描您的 bean，您可以保留您的自定义注释，并且您不需要手动注册您的 bean。

示例来自`@Service`：

```
{@Target({ElementType.TYPE})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Component
public @interface Service {

    /**
     * The value may indicate a suggestion for a logical component name,
     * to be turned into a Spring bean in case of an autodetected component.
     * @return the suggested component name, if any
     */
    String value() default "";

}} 
```

# python - 使用python从post body请求中提取json数据

> ID：11110004
> 
> 赞同：1
> 
> 时间：2012-06-19T21:50:43.657
> 
> 标签：python, json, google-app-engine, extract, http-post

有没有办法轻松提取 POST 请求正文中的 json 数据部分？例如，如果有人使用带有 json 数据的表单正文发布到 www.example.com/post，我的 GAE 服务器将通过调用以下方式接收请求：

```
jsonstr = self.request.body 
```

但是，当我查看 jsonstr 时，我得到如下信息：

```
str: \r\n----------------------------8cf1c255b3bd7f2\r\nContent-Disposition: form-data;
name="Actigraphy"\r\n Content-Type: application/octet-
stream\r\n\r\n{"Data":"AfgCIwHGAkAB4wFYAZkBKgHwAebQBaAD..... 
```

我只想能够调用一个函数来提取从 {"Data":...... 部分开始的主体的 json 部分。

我可以调用一个简单的函数来执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T01:17:31.503

这取决于它在提交之前在浏览器端是如何编码的，但通常你会得到这样的 POST 数据：

```
jsonstr = self.request.POST["Data"] 
```

如果这不起作用，您可能想向我们提供一些有关“数据”如何编码到客户端的 POST 数据中的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:08:59.637

有个误区，你给我们看的字符串不是json数据，看起来像是POST体。您必须使用[cgi.parse_multipart](http://docs.python.org/library/cgi.html#cgi.parse_multipart)之类的东西来解析正文。然后你可以像 schmid00 回答的那样解析 json。但是，您只解析数据而不是正文。

在这里您可以找到[显示如何使用 cgi.FieldStorage 解析 POST 正文的工作代码](https://stackoverflow.com/a/9810738/1284193)。这个问题也在[这里得到回答。](https://stackoverflow.com/questions/3236597/parsing-python-html-post-data-from-basehttpserver).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:15:48.370

你可以试试：

```
import json
values = 'random stuff .... \r\n {"data":{"values":[1,2,3]}} more rnandom things'
json_value = json.loads(values[values.index('{'):values.rindex('}') + 1])
print json_value['data'] # {u'values': [1, 2, 3]}
print json_value['data']['values'] # [1, 2, 3] 
```

但这很**危险**并且需要相当多的假设，我不确定您使用的是哪个框架，瓶子，烧瓶，有很多，请使用适当的调用来`POST` 检索基于框架的值，如果您确实在使用一个.

我认为你的意思是`self.request.get("Data")`如果你自己使用 GAE。

[https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_get](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_get) [https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_get_all](https://developers.google.com/appengine/docs/python/tools/webapp/requestclass#Request_get_all)

# xml - xsd 模式中递归元素的问题

> ID：11110005
> 
> 赞同：1
> 
> 时间：2012-06-19T21:50:44.527
> 
> 标签：xml, recursion, xsd, schema

我正在尝试创建一个 xsd 模式，该模式将验证具有未知节点深度的地图。

（在下面的模式中，我希望 mapnode 在其他元素中包含更多的 mapnode。）

这需要从根节点以下开始的递归。

这里描述的两种方法似乎都不适合我： http: [//publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp ?topic=%2Fcom.ibm.db2.luw.xml.doc% 2Fdoc%2Fc0051286.html](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=%2Fcom.ibm.db2.luw.xml.doc%2Fdoc%2Fc0051286.html)

使用下面的架构，我收到此错误：src-resolve：无法将名称“mapnode”解析为（n）“元素声明”组件。

```
<?xml version="1.0" encoding="utf-16"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" version="1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="knowledgemap">
    <xs:complexType>
  <xs:sequence>
    <xs:element name="mapdata">
      <xs:complexType>
    <xs:all>
        <xs:element name="title" type="xs:string"/>
        <xs:element name="version" type="xs:string"/>
        <xs:element name="author" type="xs:string"/>
        <xs:element name="authorid" type="xs:string"/>
        <xs:element name="width" type="xs:positiveInteger"/>
        <xs:element name="height" type="xs:positiveInteger"/>
        <xs:element name="xpos" type="xs:positiveInteger"/>
        <xs:element name="ypos" type="xs:positiveInteger"/>
        <xs:element name="scalefactor" type="xs:float"/>
        <xs:element name="mapid" type="xs:string"/>
        <xs:element name="beehivedata">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="maxresults" type="xs:positiveInteger"/>
                    <xs:element name="upiproduct" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element name="upiproduct" type="xs:string"/>
                                <xs:element name="upiversion" type="xs:string"/>
                                <xs:element name="upilanguage" type="xs:string"/>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
        <xs:element name="styledata">
            <xs:complexType>
                <xs:sequence>
                    <xs:element name="nodelevel" maxOccurs="unbounded">
                        <xs:complexType>
                            <xs:sequence>
                                <xs:element name="level"/>
                                <xs:element name="width"/>
                                <xs:element name="height"/>
                                <xs:element name="fontsize"/>
                                <xs:element name="fontcolor"/>
                                <xs:element name="fontweight"/>
                                <xs:element name="strokecolor"/>
                                <xs:element name="strokewidth"/>
                                <xs:element name="linkcolor"/>
                                <xs:element name="linkhighlight"/>
                                <xs:element name="colorunexplored"/>
                                <xs:element name="colorexplored"/>
                                <xs:element name="colorshadow"/>
                                <xs:element name="iconsize"/>
                            </xs:sequence>
                        </xs:complexType>
                    </xs:element>
                </xs:sequence>
            </xs:complexType>
        </xs:element>
    </xs:all>
          </xs:complexType>
        </xs:element>
        <xs:element name="map">
            <xs:complexType>
        <xs:sequence>
            <xs:element name="mapnode">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="nodedata">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="title" type="xs:string"/>
                                    <xs:element name="description" type="xs:string"/>
                                    <xs:element name="xpos" type="xs:integer"/>
                                    <xs:element name="ypos" type="xs:integer"/>
                                    <xs:element name="nodeid" type="xs:string"/>
                                    <xs:element name="level" type="xs:positiveInteger"/>
                                    <xs:element name="parent" type="xs:string"/>
                                    <xs:element name="localconnection" type="xs:string"/>
                                    <xs:element name="parentconnection" type="xs:string"/>
                                    <xs:element name="covericon" type="xs:string"/>
                                    <xs:element name="activesocket"  type="xs:string" maxOccurs="unbounded"/>                               
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                        <xs:element name="contentitem" maxOccurs="unbounded">
                            <xs:complexType>
                                <xs:all>
                                    <xs:element name="title" type="xs:string"/>
                                    <xs:element name="contentid" type="xs:string"/>                                 
                                    <xs:element name="description" type="xs:string"/>
                                    <xs:element name="type" type="xs:string"/>
                                    <xs:element name="size" type="xs:string"/>  
                                    <xs:element name="col" type="xs:positiveInteger"/>
                                    <xs:element name="row" type="xs:positiveInteger"/>                              
                                    <xs:element name="contenturl" type="xs:string"/>
                                    <xs:element name="contenticon" type="xs:string"/>
                                    <xs:element name="contentdata"  type="xs:string" minOccurs="0"/>
                                </xs:all>
                            </xs:complexType>                       
                        </xs:element>
                        <xs:element  ref="mapnode" minOccurs="0" maxOccurs="unbounded"/>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>
        </xs:sequence>
            </xs:complexType>
        </xs:element>
     </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T07:50:38.713

要定义递归结构，您需要将引用自身的节点（或者如果存在循环，则为循环中的节点之一）生成全局元素声明。当您使用 ref="name" 时，它必须引用一个全局元素 - 一个声明为 xs:schema 元素的子元素的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:18:07.917

对于需要避免全局元素声明的场景，@Michael 的替代方法是将类型设为全局；将元素声明保持在本地，并改为引用全局类型（使用**type**属性）。

# c# - dapper .net 方法中使用什么 Interlocked.CompareExchange？

> ID：11110012
> 
> 赞同：3
> 
> 时间：2012-06-19T21:51:29.733
> 
> 标签：c#, .net, thread-safety, dapper

在`Link.TryAdd`方法中的 dapper 代码中，有以下代码：

```
var snapshot = Interlocked.CompareExchange(ref head, null, null); 
```

为什么这是必需的而不是简单的：

```
var snapshot = head; 
```

两行都没有更改 的值`head`，两行都将 的值分配`head`给`snapshot`。为什么选择第一个而不是第二个？

**编辑：**我指的代码在这里：[https ://github.com/SamSaffron/dapper-dot-net/blob/77227781c562e65c167bf7a933d69291d5bdc6f3/Dapper/SqlMapper.cs](https://github.com/SamSaffron/dapper-dot-net/blob/77227781c562e65c167bf7a933d69291d5bdc6f3/Dapper/SqlMapper.cs)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T22:04:10.400

他们想要进行 volatile 读取，但是没有`Thread.VolatileRead`采用泛型类型参数的重载。使用`Interlocked.CompareExchange`这种方式可以获得相同的结果。

他们试图解决的问题是，JIT 编译器可以在认为合适的情况下优化对 temp 的赋值。如果另一个线程在当前线程在一系列操作中使用它时改变了头引用，这可能会导致线程问题。

编辑：

问题不在于在`TryAdd`. 问题是在第 105 行，他们需要将当前头与前一个头（保存在 中`snapshot`）进行比较。如果有优化，则没有`snapshot`变量保存先前的值，并`head`在该点再次读取。`CompareExchange`即使 head 在第 103 行和第 105 行之间发生了变化，也很有可能成功。结果是如果两个线程`TryAdd`同时调用，则列表中的一个节点会丢失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:23:27.393

mike z 是对的：这是防止（合法）JIT 优化会破坏代码。

不过，他们本可以使用**volatile struct 技巧**：读取`head`并将其分配给某个结构的 volatile 字段。接下来，从该字段读取它，它保证是一个易失性读取！

结构本身根本不重要。重要的是使用了一个 volatile 字段来复制变量。

像那样：

```
struct VolatileHelper<T> { public volatile T Value; }
...
var volatileHelper = new VolatileHelper<Field>();
volatileHelper.Value = head;
var snapshot = volatileHelper.Value; 
```

希望它没有运行时成本。在任何情况下，成本都低于导致 CPU 内存一致性流量的互锁操作。

Actually, the fact that every cache access (even a reading one) requires memory coherency traffic makes this a **slow cache**! Interlocked operations are a system global resource that does not scale with more CPUs. An Interlocked access uses a global hardware lock (per memory address, but there is only one address here).

# syntax-highlighting - Silverstripe 的 Coda 语法高亮显示

> ID：11110014
> 
> 赞同：2
> 
> 时间：2012-06-19T21:51:37.993
> 
> 标签：syntax-highlighting, silverstripe, coda

我刚搬到一台新机器上。在我的旧工作马上，我有 Silverstripe 模板 (.ss) 文件，遵循 Coda 中的 HTML 语法突出显示。我这辈子都不记得我是如何打开它的（我记得这是我自己做的）。谷歌没有出现任何结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:06:33.887

**更新：真正的方式**

在 Coda 中，打开 Preferences，转到 Editor，在底部，添加 Custom Syntax Mode。

* * *

根据[本](http://www.djchoi.com/code/more-syntax-highlighting-for-coda)指南：

1.  右键单击`Coda.app`并`/Applications`选择`Show Package Contents`
2.  导航`Contents/Resources/Modes/HTML.mode/Contents/Resources`
3.  打开 ModeSettings.xml
4.  添加`<extension>ss</extension>`到扩展列表。

或者，创建您的模式（例如 SilverStripe.mode）并将其放入`~/Library/Application Support/Coda/Modes`

或者，将 HTML.mode 复制到`~/Library/Application Support/Coda/Modes`然后对其进行修改，以保留原始文件。

（对于系统范围的更改而不修改应用程序包，请创建目录`/Library/Application Support/Coda/Modes`并将 .mode 目录放在那里。）

# scala - 斯卡拉返回类型

> ID：11110017
> 
> 赞同：5
> 
> 时间：2012-06-19T21:52:15.293
> 
> 标签：scala

我在 Scala 中有这个作为返回类型

```
 Map[String, Seq[Map[String, Seq[MyClass]]]] 
```

我必须在代码中的多个位置使用它，有没有办法将它分配给某种常量并使用常量而不是明确说明它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T21:57:10.470

是的，您可以使用 定义类型别名`type Foo = Map[...]`。

# iphone - 是否可以代表客户签署/分发应用程序以便他们进行 beta 测试？

> ID：11110019
> 
> 赞同：1
> 
> 时间：2012-06-19T21:52:26.743
> 
> 标签：iphone, sign

我正在编写一个应用程序，我希望一些客户进行 Beta 测试（可能拥有 100 多个用户的企业）。如果客户愿意给我他们的临时或内部分发证书/资料 - 我可以用他们的证书签署我的应用程序，以便他们可以将应用程序分发给他们的员工吗？B2B 本来可以工作，但它花费太多钱，我还没有准备好去应用商店。

提前致谢。

# asp.net - 具有多个项目的 ASP.NET Gridview 模板字段

> ID：11110022
> 
> 赞同：2
> 
> 时间：2012-06-19T21:52:30.020
> 
> 标签：asp.net, vb.net, gridview

我正在 ASP.net/VB.NET 中创建一个 Web 应用程序，但 GridView 控件存在问题。目前，我使用数据库中的数据填充了 GridView，并且我还编写了更新按钮，以允许用户通过弹出的表单编辑任何必要的信息。

![带有更新按钮的 GridView](../Images/bc7999635e8ef9dfce1bc1407f7a3f64.png)

如果可能的话，我想做的是在右侧两列中添加一个按钮（我已经在停靠时间列中添加了一个），如果设置了该列或将当前时间设置为该列，则该按钮将不可见. 为这两列设置时间已经通过更新表单处理，但我的主管要求我尝试看看这是否可能。

这两个时间列是模板字段（因为我根据数据库中的实际时间格式化显示时间），并且我在 ItemTemplate 中为图片中的设置按钮添加了一个 asp 按钮。

这甚至可能吗？如果可以，我将如何在后面的代码中访问此按钮，以便我可以添加功能（设置时间并在列不为空时隐藏它）如果真的不可能有两个这样的项目在 TemplateField 中，我可以为这些按钮制作 2 个额外的列，但我认为这看起来会更干净。

任何投入将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:00:01.300

是的，这是可能的，检查这个答案：

[https://stackoverflow.com/a/11077709/1268570](https://stackoverflow.com/a/11077709/1268570)

基本上，您需要处理`RowCommand`来自网格的事件并使用命令识别每个按钮，或者您可以在绑定时为每个按钮添加参数，例如：

```
<asp:GridView runat="server" OnRowCommand="grdProducts_RowCommand" 
    ID="grdProducts">
    <Columns>
        <asp:TemplateField ShowHeader="False">
            <ItemTemplate>
                <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="false" 
                    CommandName="myLink" CommandArgument='<%# DataBinder.Eval(Container, "RowIndex") %>' Text="Button"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:CommandField ShowEditButton="True" />
    </Columns>
</asp:GridView> 
```

在后面的代码中：

```
 protected void grdProducts_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        switch (e.CommandName)
        {
            case "myLink":
                this.lblMessage.Text = e.CommandName + " " + e.CommandArgument + " " + DateTime.Now.ToString();

                // referenece to the current row
                var row = this.grdProducts.Rows[int.Parse(e.CommandArgument.ToString())];
                break;
            default:
                break;
        }
    } 
```

在`RowCommand`事件中更新网格后，您应该重新填充网格数据以呈现更改

# facebook - Facebook 在带有 url 掩码和 wordpress 的域上打开图表

> ID：11110025
> 
> 赞同：0
> 
> 时间：2012-06-19T21:52:45.163
> 
> 标签：facebook, wordpress, facebook-opengraph, cloaking

我在我的网站上使用 wordpress，在 facebook 上发布文章时遇到问题。对于我发布的每篇文章，我总是得到相同的 og 标题和 og url。这显然是一个 url 屏蔽问题，因为即使我将它们设置在 wordpress header.php 上，我的元标记也无法更改。

这是网站。

[http://carnagenews.com/](http://carnagenews.com/)

任何人都可以帮助我吗？

基本上我想要动态 og 标题/url/描述/图像避免 url 伪装总是输出相同的元标记

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:39:46.317

您的网站有几个问题：

*   您的网站`http://carnagenews.com/`只是一个顶级框架包装`http://carnageweb.altervista.org/`，Facebook 不会跟随 linter，并且不会使用正确的详细信息填充您的 OpenGraph 数据，直到 OpenGraph 元数据存在于`og:url`元标记指定的 URL 中。
*   您的真实页面会导致 Facebook Linter 的 404 响应代码（[使用调试工具自行检查](https://developers.facebook.com/tools/debug/og/object?q=http://carnageweb.altervista.org/true-blood-stagione-5-il-ritorno-dei-sexy-vampiri/)）。

# ios - 在没有证书的 Xcode 4.3+ 中部署 iOS 应用程序

> ID：11110029
> 
> 赞同：1
> 
> 时间：2012-06-19T21:53:12.560
> 
> 标签：ios, xcode, app-store, ipod, cordova

**大家好！**

我想测试我的 Cordova 移植应用程序如何在真实设备上运行，如果我喜欢性能，我会购买 Apple Developer Certificate。但现在我不想浪费数百美元只是为了看到我的 web 应用程序运行缓慢且丑陋得像狗屎。我浏览了所有论坛以及stackoverflow，所有解决方案似乎都与iOS SDK 4.2及更早版本有关。

那么**Xcode 4.3+**呢？

我已经编辑了 /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/SDKSettings.plist 并在项目设置中进行了代码签名。

我有两个**MyProject.app**来自“Build for Running”和“Build for Archiving”，并试图通过 iTunes 将它们同步到我的 iPod touch 4，但在这两种情况下，应用程序在启动后立即**崩溃。**

我还从 iTunes 中提取了**.ipa**并尝试通过 Installous 安装它，但遇到了同样的问题。东西崩溃了。

我还通过**Product-** >Archive 获得了 .xcarchive，但不知道接下来要做什么。

那么，问题来了：如何将自己的应用程序部署到自己越狱的 iPod touch 上？

**谢谢你。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:56:41.763

我建议你看看 JailCoder。

它允许您在没有开发人员帐户的情况下在真实设备上调试使用 XCode 制作的应用程序。

请记住，这种解决方案应该只是暂时的。如果它运行良好并且您想进行进一步的开发/部署，请考虑购买开发人员帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:43:21.273

在越狱的 iDevices 上，Cydia（和其他 dpkg 安装程序）将应用程序安装到 /private/Applications/

那么为什么不尝试：/Applications/MyProject.app

然后在设备上打开一个终端并导航到 /Applications: chmod -777 MyProject.app chown root MyProject.app

# c# - 如何优化二进制文件的数据加载

> ID：11110032
> 
> 赞同：1
> 
> 时间：2012-06-19T21:53:29.030
> 
> 标签：c#, .net, binary-data, endianness

我有一个二进制文件，用小端编码并包含 ~250.000 个 var1 值，然后是另一个相同数量的 var2 值。我应该创建一个方法来读取文件并返回一个 DataSet，其中包含 var1 和 var2 列中的这些值。

我正在使用该库：在 SO 中多次提到[miscutil ，有关详细信息，请参见此处：](http://www.yoda.arachsys.com/csharp/miscutil/) [MiscUtil 是否会更新 .Net 4？](https://stackoverflow.com/questions/4374791/will-there-be-an-update-on-miscutil-for-net-4)

非常感谢[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)提供它。:)

我有以下代码工作，我对如何最小化从文件中读取的 for 循环和填充 DataTable 的更好想法感兴趣。有什么建议吗？

```
private static DataSet parseBinaryFile(string filePath)
{
    var result = new DataSet();

    var table = result.Tables.Add("Data");

    table.Columns.Add("Index", typeof(int));
    table.Columns.Add("rain", typeof(float));
    table.Columns.Add("gnum", typeof(float));

    const int samplesCount = 259200; // 720 * 360

    float[] vRain = new float[samplesCount];
    float[] vStations = new float[samplesCount];

    try
    {
        if (string.IsNullOrWhiteSpace(filePath) || !File.Exists(filePath))
        {
            throw new ArgumentException(string.Format("Unable to open the file: '{0}'", filePath));
        }

        // at this point FilePath is valid and exists...
        using (FileStream fs = new FileStream(filePath, FileMode.Open))
        {
            // We are using the library found here: http://www.yoda.arachsys.com/csharp/miscutil/
            var reader = new MiscUtil.IO.EndianBinaryReader(MiscUtil.Conversion.LittleEndianBitConverter.Little, fs);

            int i = 0;

            while (reader.BaseStream.Position < reader.BaseStream.Length) //while (pos < length)
            {
                // Read Data

                float buffer = reader.ReadSingle();

                if (i < samplesCount)
                {
                    vRain[i] = buffer;
                }
                else
                {
                    vStations[i-samplesCount] = buffer;
                }

                ++i;
            }

            Console.WriteLine("number of reads was: {0}", (i/2).ToString("N0"));
        }

        for (int j = 0; j < samplesCount; ++j)
        {
            table.Rows.Add(new object[] { j + 1, vRain[j], vStations[j] });
        }
    }
    catch (Exception exc)
    {
        Debug.WriteLine(exc.Message);
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:37:19.130

选项1

将整个文件读入内存（或内存映射）并循环一次。

选项 #2

在您读取 var1 部分时添加所有数据表行，其中包含 var2 的占位符值。然后在阅读 var2 部分时修复数据表。

# android - 在 android/kindle 应用中打开 pdf

> ID：11110035
> 
> 赞同：0
> 
> 时间：2012-06-19T21:53:38.583
> 
> 标签：android, pdf, kindle

我想将网站上的 pdf 打开到我为 kindle 和 android 制作的应用程序上。

我认为我的代码是正确的，但它找不到我的文件，我不确定是否有人知道我是否应该将文件格式化为不同的格式，因为它在技术上是一个网站....

任何投入将不胜感激。这是我到目前为止所拥有的：

```
 Button OpenPDF = (Button) findViewById(R.id.button1);
    OpenPDF.setOnClickListener(new View.OnClickListener()
    { 
        public void onClick(View v) 
        {
            File pdfFile = new File("http://thisisthewebsitewithpdf.pdf"); 
            if(pdfFile.exists()) //EXCEPTION HERE. pdfFile doesn't exist!
            {
                Uri path = Uri.fromFile(pdfFile); 
                Intent pdfIntent = new Intent(Intent.ACTION_VIEW);
                pdfIntent.setDataAndType(path, "application/pdf");
                pdfIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                try
                {
                    startActivity(pdfIntent);
                }
                catch(ActivityNotFoundException e)
                {
                    Toast.makeText(PDFActivity.this, "No Application available to view pdf", Toast.LENGTH_LONG).show(); 
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:37:39.047

您可以将 pdf 下载到您的 SD 卡，然后使用此活动打开它：

```
public class OpenPdf extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Button button = (Button) findViewById(R.id.OpenPdfButton);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                File file = new File("/sdcard/example.pdf");

                if (file.exists()) {
                    Uri path = Uri.fromFile(file);
                    Intent intent = new Intent(Intent.ACTION_VIEW);
                    intent.setDataAndType(path, "application/pdf");
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

                    try {
                        startActivity(intent);
                    } 
                    catch (ActivityNotFoundException e) {
                        Toast.makeText(OpenPdf.this, 
                            "No Application Available to View PDF", 
                            Toast.LENGTH_SHORT).show();
                    }
                }
            }
        });
    }
} 
```

# http - SWI-Prolog http_post 和 http_delete 莫名挂起

> ID：11110036
> 
> 赞同：1
> 
> 时间：2012-06-19T21:53:41.873
> 
> 标签：http, prolog, swi-prolog

当我尝试使用 SWI-Prolog`http_post/4`时，如下所示：

```
:- use_module(library(http/http_client).

update(URL, Arg) :-
    http_post(URL, form([update = Arg), _, [status_code(204)]). 
```

当我查询此规则并观察 TCP 流量时，我看到 HTTP POST 请求和回复预期的 204 状态代码都立即发生。但是，Prolog 在返回“真”之前会挂起最多 30 秒。发生了什么阻止规则立即返回？

我也试过这个变种，但它也挂起：

```
:- use_module(library(http/http_client).

update(URL, Arg) :-
    http_post(URL, form([update = Arg), Reply, [status_code(204)]),
    close(Reply). 
```

我有类似的问题，`http_delete/3`但*没有*。`http_get/3`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T07:23:06.550

[图书馆文档](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%272.2%27,swi%28%27/doc/packages/http.html%27%29%29)指出 http_post

> 它相当于 http_get/3，除了提供一个输入文档，它使用 http_post_data/3 发布。

http_get 的选项中有 timeout(+Timeout)。这可能有助于降低延迟，但由于默认设置为 +infinite，我担心不会解决问题。似乎您正在调用的服务使连接保持活动状态直到超时。

就我个人而言，在 https 上调用 Google API 服务时，我不得不使用 http_open 而不是 http_post...

# android - 如何解决 ActivityThread.performLaunchActivity 中的 java.lang.ClassNotFoundException？

> ID：11110042
> 
> 赞同：3
> 
> 时间：2012-06-19T21:54:17.170
> 
> 标签：android, exception, classnotfoundexception

对于我的 Android 应用程序，我在 Google Play 的开发者控制台中收到以下错误：

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{PACKAGE_NAME/PACKAGE_NAME.MainActivity}: java.lang.ClassNotFoundException: PACKAGE_NAME.MainActivity in loader dalvik.system.PathClassLoader[/mnt/asec/PACKAGE_NAME-1/pkg.apk]
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1573)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3693)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: PACKAGE_NAME.MainActivity in loader dalvik.system.PathClassLoader[/mnt/asec/PACKAGE_NAME-1/pkg.apk]
at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565) 
```

尽管此错误很少出现（并且可能会被忽略），但我发现拥有一个无错误的开发人员控制台会更干净 :) 而且，我只想知道此错误的原因。

*是的，好像有一个类找不到。但为什么？我怎样才能防止这种情况？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T02:33:47.857

## 更新（4/26/15）：

经过进一步研究，我相信您是对的，这绝对是用户错误。最`[/mnt/asec/PACKAGE_NAME-1/pkg.apk]`有可能意味着他们正在尝试将您的应用程序移至 SD 卡。请在此处阅读：

[Android 间歇性类未找到运行时异常](https://stackoverflow.com/questions/5483947/android-intermittent-class-not-found-run-time-exception)

[“无法实例化活动”错误](https://stackoverflow.com/questions/5025582/unable-to-instantiate-activity-error)

[Android：无法实例化活动/ClassNotFoundException](https://stackoverflow.com/questions/4820554/android-unable-to-instantiate-activity-classnotfoundexception)

## 原来的：

这是 Logcat 看到的 Java RuntimeException。当我没有添加活动以正确显示时，我已经多次看到这种情况发生。

```
java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{PACKAGE_NAME/PACKAGE_NAME.MainActivity}: java.lang.ClassNotFoundException: PACKAGE_NAME.MainActivity in loader dalvik.system.PathClassLoader[/mnt/asec/PACKAGE_NAME-1/pkg.apk] 
```

# regex - Postgresql 列包含要匹配的正则表达式

> ID：11110044
> 
> 赞同：2
> 
> 时间：2012-06-19T21:54:25.807
> 
> 标签：regex, postgresql

我只是想知道是否有用于正则表达式模式的特定 postgres 列类型。也就是说，我想将模式存储在一列中，然后查询与输入字符串文字匹配的模式。有没有比只制作 TEXT 列更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T22:05:55.203

不，没有用于存储正则表达式的特定列类型。

不幸的是，您必须在字符串文字上实际运行每个正则表达式才能确定它是否匹配。

**编辑** 我认为 varchar 列可以节省空间，但是在阅读了@muistooshort 的评论并进行了一些研究之后，似乎 varchar 列对 postgresql 中的文本列没有太大的好处。我觉得这很有趣，也有点奇怪。

# python - wxPython 和 wxJoystick

> ID：11110047
> 
> 赞同：2
> 
> 时间：2012-06-19T21:54:42.243
> 
> 标签：python, ubuntu, wxpython, wxwidgets

我有一个想在 wxPython 中连接的操纵杆。我可以很好地连接到它并从 6 个不同的轴上获取读数。问题是我的操纵杆（[罗技 F310 游戏手柄](http://www.logitech.com/en-us/gaming/controllers/7360)）有 8 个不同的轴，而不是 6 个。

我的问题是，如何从操纵杆中获取其他两个轴值？我通过一个快速的 Python 脚本运行它，以了解 wxPython 对操纵杆的看法：所有这些功能都可以在 wxPython [wxJoystick 文档页面上](http://wxpython.org/docs/api/wx.Joystick-class.html)找到。

```
print joy.GetPosition().x
print joy.GetPosition().y
print joy.GetZPosition()
print joy.GetRudderPosition()
print joy.GetUPosition()
print joy.GetVPosition()
print joy.GetPOVPosition()
print joy.GetPOVCTSPosition()
print joy.HasPOV()
print joy.HadPOV4Dir()
print joy.HasPOVCTS() 
```

这会在前 6 行产生正常值（我期望的值），但在 POVPosition 函数上给出 -1，在后三行给出 False。

我正在寻找一种方法来找到最后两个轴值，而这些上述功能似乎无法做到......感谢您的帮助！

# javascript - 如何遍历直接传递给dust.js的数组？

> ID：11110049
> 
> 赞同：4
> 
> 时间：2012-06-19T21:54:48.567
> 
> 标签：javascript, dust.js

使用dust.js javascript模板引擎，我想直接传递一个数组：

```
var templateContents; //loaded by require.js
var compiled = dust.compile(templateContents, "viewElements");
dust.loadSource(compiled);
dust.render("viewElements", ["bob", "joe", "sue"], function(err, out){
    $('#view').html(out);
}); 
```

如何创建模板文件来直接处理数组？我尝试了很多事情，包括：

```
{.}<br> 
```

和

```
{#.}
 {.}
{/.} 
```

但似乎无法正确引用数组或其中的元素。第一个示例打印：[object Object]

我可以命名我传入的每个数组，但我试图避免这样做，因为数组实际上来自主干集合，这样做似乎需要额外的工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T21:11:09.190

我不确定我在原始问题中尝试的其中一件事到底出了什么问题，但感谢 Trevor 指出了这一点。

```
dust.render("viewElements", ["bob", "joe", "sue"], function(err, out){
    $('#view').html(out);
}); 
```

这将适用于：

```
{#.}{.}<br>{/.} 
```

如果你有一个对象数组：

```
dust.render("viewElements", [{name:"bob"}, {name:"joe"}, {name:"sue"}],
    function(err, out){
        $('#view').html(out);
    }); 
```

您可以通过引用上的 name 属性来呈现它们。元素：

```
{#.}{.name}<br>{/.} 
```

或直接：

```
{#.}{name}<br>{/.} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T01:25:04.847

这个答案可能为时已晚:)

这段代码似乎对我有用（在渲染时将数组作为数据对象传递给模板）：

```
var compiled = dust.compile("{#data}{.}<br>{/data}", "viewElements");
        dust.loadSource(compiled);
        var arr = ["bob", "joe", "sue"];
        dust.render("viewElements", {"data" : arr}, function(err, out){
            $('#content').html(out);
        }); 
```

# c# - 保持 Form.BackgroundImage 在高对比度模式下可见

> ID：11110050
> 
> 赞同：3
> 
> 时间：2012-06-19T21:54:49.920
> 
> 标签：c#, winforms, high-contrast

我有一个带有背景图像的 .NET Winform，并且测试刚刚报告当 Win7 中的显示设置设置为高对比度模式时 BackgroundImage 被隐藏。我理解为什么 MS 默认会这样做，但我希望有一种方法可以在不改变表单布局的情况下覆盖这种行为？我宁愿不将我的点击事件等移动到我在表单顶部添加以模拟背景的另一个图像控件（然后还必须移动我的透明 PNG 以包含在其中）......我们是在测试的后期，所以变化越少越好。

“背景”真的不是典型的背景，它上面有文字和重要的内容，不应该被隐藏。当然，你可以 -1 我因为糟糕的设计，但是，嘿，它似乎在这个小问题之前起作用；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:16:58.007

这只是一个猜测：如果您使用单色图像，它会隐藏图像吗？然后，您可以在运行时检查（[System.Windows.Forms.SystemInformation.HighContrast](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.highcontrast)用于 WinForms 或[System.Windows.SystemParameters.HighContrast](http://msdn.microsoft.com/en-us/library/system.windows.systemparameters.highcontrast.aspx)用于 WPF）并将其设置为适当的图像。

# batch-file - 将单个 zip 文件与 FORFILES 一起使用

> ID：11110055
> 
> 赞同：0
> 
> 时间：2012-06-19T21:55:03.560
> 
> 标签：batch-file

我正在尝试使用以下命令：

```
forfiles.exe -p. -m*.log -d-1 -c"zip -u -m @FILE.zip @FILE" 
```

它确实接近我正在寻找的东西。

我想要 zip 工具或 7z 将所有内容放在一个 zip 文件中，然后用今天的日期标记它（名称）。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T03:21:45.560

我相信您在使用 FORFILES 时需要通过 CMD 运行 ZIP。每个 FORFILES 选项和它的值之间也应该有一个空格。

您需要为 zip 文件选择一个名称。我选择了“myzip.zip”。

我认为这会起作用，但我没有 ZIP，所以我无法测试。

```
forfiles -p . -m *.log -d -1 -c "cmd /c zip -u -m myzip.zip @FILE" 
```

# .net - .Net 盒式磁带路径在生产中返回 404

> ID：11110057
> 
> 赞同：0
> 
> 时间：2012-06-19T21:55:12.410
> 
> 标签：.net, cassette

我有当前的包参考在本地工作：

```
Bundles.Reference("/Content/global.css"); 
```

在开发站点上，这（以某种方式）通过以下方式解决：

```
href="/_cassette/asset/Content/global.css?d8036040d7bdf16f597402da22aebe89fb415a42" 
```

问题是这是在生产中返回 404 但不确定原因。我虽然这可能是处理程序的配置问题，但我没有在配置（web.config）中设置一个，所以必须在内部发生一些事情才能导致问题。

这两个应用程序似乎都在运行.net 4+，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T17:47:27.740

我之前的回答错了（但很接近）。修复实际上是添加我自己的 UrlModifier - 这不会将虚拟目录附加到路径，一切都很好。

# php - PHP - 文件上传失败

> ID：11110061
> 
> 赞同：0
> 
> 时间：2012-06-19T21:55:20.050
> 
> 标签：php, file, upload, permissions

我不明白为什么这不起作用。这应该很容易。

上传.php：

```
$uploaddir = '/usr/share/nginx/www/pitfax/upload/'; 
$uploadfile = $uploaddir . basename($_FILES['userfile']['name']);

echo "<p>";

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {   
    echo "File is valid, and was successfully uploaded.\n"; 
} 
else {
    echo "Upload failed"; 
}

echo "</p>"; 
echo '<pre>'; 
echo 'Here is some more debugging info:'; 
print_r($_FILES); print "</pre>"; 
```

表单页面：

```
<form enctype="multipart/form-data" action="upload.php" method="POST">
    <input type="hidden" name="MAX_FILE_SIZE" value="10000000" />
    Send this file: <input name="userfile" type="file" />
    <input type="submit" value="Send File" />
</form> 
```

**错误**输出是：

```
Upload failed

Here is some more debugging info:Array (
    [userfile] => Array
        (
            [name] => test.pdf
            [type] => application/pdf
            [tmp_name] => /tmp/phptM0p4w
            [error] => 0
            [size] => 1287464
        )

) 
```

*   网络服务器：NginX
*   权限`upload.php`：644
*   目录权限`upload`：755
*   使用 root 用户在 SSH 中工作。
*   **编辑：** upload_max_filesize = 2M
*   **编辑：** post_max_size = 8M

另一件事！上传完成后，我想获取上传文件的绝对路径。（例如`/usr/share/nginx/www/pitfax/upload/test.pdf`：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:20:01.843

如果 $uploadfile 的值是**upload/test.pdf**但您希望它是**/usr/share/nginx/www/pitfax/upload/test.pdf**，那么我怀疑这将是您的问题。

试试这个代码：

```
$uploadfile = '/usr/share/nginx/www/pitfax/upload/' . $_FILES['userfile']['name'];

if (move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)) {
  echo "File is valid, and was successfully uploaded.\n";
} else {
  print_r ($_FILES);
} 
```

**编辑：**代码格式。

# java - JSP 页面中的 javax.el.PropertyNotFoundException

> ID：11110065
> 
> 赞同：8
> 
> 时间：2012-06-19T21:55:32.483
> 
> 标签：java, jsp, netbeans, jstl, el

我在 JSP 中遇到错误，我无法弄清楚是什么原因造成的。我已经包含了所有适当的库，并且我确保遵循大写/小写的 bean 约定。这是JSP中的相关代码：

```
<c:forEach items="${relevantData}" var="entry">
     <p>${entry.price}</p>
</c:forEach> 
```

是`relevantData`一个`List<MyData>`. 对于这个问题，只要说`MyData`一个包含`Double`命名价格的类就足够了（具有遵循 bean 约定的 Getter 和 Setter）。当我尝试加载此页面时，我在服务器日志（Tomcat 7.0.22）中收到以下错误：

```
javax.el.PropertyNotFoundException: 
Property 'price' not readable on type java.lang.Double 
```

为什么我会收到此错误，我该如何解决？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T21:55:33.123

这个问题实际上是由`MyData`类的可见性引起的。我已经在 Netbeans 中自动生成了这个`MyData`类，但我没有注意到`public`类名前面没有关键字。这意味着当它到达 JSP 时，它无法读取`MyData`.

我把类型改成了`public`，问题就解决了。

# mysql - 存储本体模型的数据库/灵活的层次结构

> ID：11110069
> 
> 赞同：3
> 
> 时间：2012-06-19T21:55:35.367
> 
> 标签：mysql, database, oracle, nosql, relational-database

我正在为一个科学合作网站设计一个系统。基本上，对于不同的研究主题，有许多不同的数据模型。列、字段类型、列数、映射和结构不同。每个现有的数据模型也可以被其他人重用。

场景示例：一位科学家进来设计了一个实验类型A，然后创建了数据模型并开始填写数据。然后保存实验类型A的数据模型，可以重复使用，其他人可以选择这个模型A 并在不重新设计的情况下填写数据。同样，科学家可以设计他们喜欢的任何数据模型。

例如：

实验类型 A 我们有结构：

```
-Hypothesis(String target1,String target2, int number1,int number2)
  -existingwork(String target1,string target2) //(maps to Hypothesis table) 
-Cohorts (int number1,int number2)
  -male //(maps to Cohorts table) 
  -female //(maps to Cohorts table) 
-Results (String result1,String result2) 
```

实验类型 B 我们有结构：

```
-Hypothesis(BigInt bigint,String name,String target)
  -feedback(String feedback) //(maps to Hypothesis table) 
  -comments(String comment,Date date) //(maps to Hypothesis table) 
-ExperimentTarget (int number1,int number2,int number3)
  -Healthy //(maps to Cohorts table) 
  -Unhealthy //(maps to Cohorts table) 
-Impact (int impackFactor)
-Conclusion(String conclusion,Date date) 
```

实现这一点的最佳方法是什么？如果我们为每种实验类型创建一个模式，我认为它会太重，不是吗？

我曾考虑过 Nosql 方法，但看起来映射部分很难（例如，将“现有工作”映射到 A 类中的“假设”）。

诸如[http://neo4j.org/](http://neo4j.org/)之类的图形数据库怎么样，这可以完成这项工作吗？

各位大侠请指教！谢谢

# mysql - 如何从无法访问的虚拟机访问 mysql 数据库

> ID：11110074
> 
> 赞同：0
> 
> 时间：2012-06-19T21:55:46.053
> 
> 标签：mysql, ubuntu, virtual-machine

我曾经登录到服务器，然后从那里进入虚拟机来处理我的日常事务。然而，虚拟机现在变得无响应，我无法访问我的数据库。

有没有办法从 VM 中找到并复制我的 mysql 数据库表？仅供参考，我正在运行 Ubuntu linux。而且我在这台机器上只有一个访客帐户，没有root权限，系统管理员正在休息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:31:38.867

你根本无法访问虚拟机？甚至通过 SSH？

虚拟机的磁盘是什么格式的？（vmdk等）

# macos - 如何在 Mac 上输入 Outlook 2011 时禁用自动大写？

> ID：11110077
> 
> 赞同：7
> 
> 时间：2012-06-19T21:56:03.563
> 
> 标签：macos, outlook, case, capitalization

当我在电子邮件中输入单词“IDs”（不带引号）时，它会自动更改为“Ids”。

如何禁用自动大写？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T02:17:04.650

在自动更正首选项中，尝试：

![在此处输入图像描述](../Images/13597e8a51a212de820c467a0604d2e4.png)

# ruby-on-rails - Capistrano 部署问题

> ID：11110079
> 
> 赞同：0
> 
> 时间：2012-06-19T21:56:09.930
> 
> 标签：ruby-on-rails, ubuntu, deployment, rvm, capistrano

我一直在与 Capistrano 搏斗，尝试部署一个测试 Rails 应用程序几天，我*想*我快到了，但是当我运行时出现这个错误`cap deploy`：

```
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'default' -c 'cd var/rails/test_app/current/releases/20120619215252 && bundle install --gemfile var/rails/test_app/current/releases/20120619215252/Gemfile --path var/rails/test_app/current/shared/bundle --deployment --quiet --without development test'" on my.vps.ip.address 
```

这是什么意思，我该如何解决这个问题？

谢谢！

这是我的 deploy.rb 文件，如果有帮助的话：

```
# RVM

$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require "rvm/capistrano"
set :rvm_ruby_string, 'default'
set :rvm_type, :system

# Bundler

require "bundler/capistrano"

# General

set :application, "test_app"
set :user, "rails"

set :deploy_to, "var/rails/test_app/current"
set :deploy_via, :copy

set :use_sudo, false

# Git

set :scm, :git
set :repository,  "~/Projects/test_app/.git"
set :branch, "master"

# VPS

role :web, "my.vps.ip.address"
role :app, "my.vps.ip.address"
role :db,  "my.vps.ip.address", :primary => true
role :db,  "my.vps.ip.address"

# Passenger

namespace :deploy do
 task :start do ; end
 task :stop do ; end
 task :restart, :roles => :app, :except => { :no_release => true } do
  run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
 end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:13:41.250

Capistrano 正在尝试进入最新的部署文件夹并运行“捆绑安装”。问题似乎是 capistrano 尝试执行此操作的文件夹：您正在执行`cd var/rails/test_app/current/releases/20120619215252 && bundle install ...` A / 在路径的开头丢失，应该是 /var/rails ...您应该在覆盖路径中的某个位置时犯了一个错误食谱。

看到你应该有的食谱（注意/）

```
set :deploy_to, "/var/rails/test_app/" 
```

不要指定“当前”文件夹，这是 capistrano 的默认行为。确保 /var/rails/test_app/ 归用于部署的用户所有。其他：`chown -R rails:rails /var/rails/test_app/` rails:rails，因为你`set :user, "rails"`在你的食谱中。

也不要忘记`cap deploy:setup`建立目录结构......

# ruby-on-rails - 在 Heroku 运行顶部看到的 Heroku 实例上的负载

> ID：11110088
> 
> 赞同：1
> 
> 时间：2012-06-19T21:56:57.733
> 
> 标签：ruby-on-rails, heroku, cedar

当我`heroku run top`在我的服务器上运行时，我看到负载非常高，目前为 36.37

我意识到这可能不是运行应用程序的测功机，但在我看来确实很高，这是否解释了 heroku 不时表现不佳？

此外，heroku 在架构中的哪个位置运行我的命令？

任何见解将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:07:42.857

运行`heroku run top`不会在您的应用程序运行时在同一个测功机上运行它。这将在一次性测功机中运行 - 包含您相同的代码和环境的东西。有关更多信息，请参阅：

*   [https://devcenter.heroku.com/articles/process-model](https://devcenter.heroku.com/articles/process-model)
*   [https://devcenter.heroku.com/articles/oneoff-admin-ps](https://devcenter.heroku.com/articles/oneoff-admin-ps)

# math - 如何将此概念表述为等式

> ID：11110093
> 
> 赞同：0
> 
> 时间：2012-06-19T21:57:22.843
> 
> 标签：math, random, equation

我有这个（伪代码）：

```
var a = Math.random(); // returns random number from 0 to 1 
```

![在此处输入图像描述](../Images/e84494d5ca50d0af67a0cb959be94992.png)

我希望有更大的可能性选择较低的数字，就像图片描述的那样。方程（代码）应该如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:09:08.117

这里最简单的是继续进行拒绝采样。

基本上你模拟一个二维变量 (x,y) = (Math.random(), Math.random())。它是正方形 [0,1][0,1] 中的一个点。如果变量 (x,y) 在您绘制的三角形中，则取 x。

x 将具有您正在寻找的分布。

伪代码：

```
x = Math.random();
y = Math.random();

if x+y < 1:
   return x; 
```

您实际上可以通过仅绘制一个随机变量（通过计算和反转累积分布函数）来摆脱它，但在这种情况下要复杂得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T09:08:44.820

倒置累积分布函数给出

```
1 - Math.sqrt(1 - Math.random()), 
```

所以

```
 1 - Math.sqrt(Math.random()) 
```

会给你你想要的分布。

请注意，0 处的概率密度必须为 2，因此曲线下的面积给出的总概率为 1。

# sharepoint - 使用 Sharepoint 2010 客户端 OM 指定要加载的项目字段

> ID：11110094
> 
> 赞同：4
> 
> 时间：2012-06-19T21:57:23.043
> 
> 标签：sharepoint, object, model, client

如何在使用客户端 OM 查询列表时动态生成/指定要加载的项目字段列表？

这可以使用 CAML 查询上的标签来完成，但这会加载额外的不需要的字段，从而使有效负载更大。见这里：http: [//blogs.technet.com/b/speschka/archive/2009/11/01/using-the-sharepoint-2010-client-object-model-part-3.aspx](http://blogs.technet.com/b/speschka/archive/2009/11/01/using-the-sharepoint-2010-client-object-model-part-3.aspx)

这是我正在使用的测试代码：

```
 ClientContext clientContext = new ClientContext("http://myserver/sites/mysite");
Web site = clientContext.Web;

List list = clientContext.Web.Lists.GetByTitle("MyList");
CamlQuery camlQuery = new CamlQuery();
camlQuery.ViewXml = "<View Scope='RecursiveAll'><RowLimit>100</RowLimit></View>";
ListItemCollection listItems = list.GetItems(camlQuery);

clientContext.Load(listItems,
      items => items.ListItemCollectionPosition,
      items => items.Include(
              item => item["ID"],
              item => item["Title"]
              ));

clientContext.ExecuteQuery(); 
```

我想要做的是在运行时为 Include 方法生成 lambda 表达式。仍然没有运气。我尝试的每个解决方案都会给我错误“不支持查询表达式”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T16:13:26.093

您可以使用稍后要查询的列创建特定视图，并在调用 GetItems 方法时使用该视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T06:59:48.963

我会向您推荐免费的 CAMLDesigner ( [http://sharepoint.biwug.be/SitePages/Caml_Designer.aspx](http://sharepoint.biwug.be/SitePages/Caml_Designer.aspx) ) - 您可以在那里创建您的 caml 并在一个不错的 GUI 中检查结果。

[https://sharepoint.stackexchange.com/a/69172/5170](https://sharepoint.stackexchange.com/a/69172/5170)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-29T09:54:41.443

如果要通过 CamlQuery 动态指定要加载的字段，可以循环加载每个字段：

```
var array = new string[] { "ID", "Title" }; // define dynamically, this is just an example
foreach (var field in array)
{
    clientContext.Load(listItems, includes => includes.Include(i => i[field]));
} 
```

生成的查询与一个 Load 方法中的多个 lambda 表达式完全相同。

```
clientContext.Load(listItems, includes => includes.Include(i => i["ID"], i => i["Title"])); 
```

两者都生成查询：

```
<Query Id="#" ObjectPathId="#">
    <Query SelectAllProperties="false">
        <Properties />
    </Query>
    <ChildItemQuery SelectAllProperties="false">
        <Properties>
            <Property Name="ID" ScalarProperty="true" />
            <Property Name="Title" ScalarProperty="true" />
        </Properties>
    </ChildItemQuery>
</Query> 
```

# ckeditor - CKEDITOR - 默认打开粘贴为纯文本窗口

> ID：11110096
> 
> 赞同：3
> 
> 时间：2012-06-19T21:57:24.730
> 
> 标签：ckeditor

如果用户使用 ctrl+v 粘贴文本，我正在寻找一种方法来确保我总是得到纯文本。

我试过添加 config.forcePasteAsPlainText = true; 到我的 CKEDITOR.editorConfig 函数，我仍然得到大量的 nbsp；等。我似乎能够获得真正的纯文本的唯一方法是使用工具栏上的“粘贴为纯文本”按钮。如果用户使用 ctrl+v 粘贴并让他们粘贴到那里，有没有办法打开该窗口。我知道它可以用 fckeditor 完成，但还没有弄清楚如何让它在 ckeditor 中工作。

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T13:11:41.773

我检查了最新的 SVN 版本（应该与 3.6.3 有很大不同）以及当我设置时`forcePasteAsPlainText : true`（注意 - 你必须在初始化编辑器之前执行此操作或在`editor.replace( el, config )`- 稍后再执行此操作将不起作用。

我正在粘贴（通过 ctrl+v）复制的网站的一部分，并且文本被正确粘贴。没有样式，没有多余的和非纯文本元素。

但是，`&nbsp;`实体在纯文本中是完全正确的 - 它们替换了多个空格，并且对于 pastetext 对话框粘贴的内容，您将获得相同的结果。

如果您仍想在 ctrl+v 上打开 pastetext 对话框，您可以使用`CKEDITOR.config.keystrokes`. 此数组中有几个默认值，因此您不应覆盖它们，但您可以添加自己的击键（在初始化编辑器之前）：

```
CKEDITOR.config.keystrokes.push(
    [ CKEDITOR.CTRL + 86, 'pastetext' ]
); 
```

如果您只想为一个编辑器添加此击键（因为编辑全局配置会影响所有），那么您必须使用自定义配置文件（请参阅[http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Setting_Configurations#Using_the_config .js_File](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Setting_Configurations#Using_the_config.js_File)）并以这种方式添加您的击键：

```
CKEDITOR.editorConfig = function( config )
{
    config.keystrokes = [
        // copy here all keystrokes from _source/plugins/keystrokes/plugin.js
        [ CKEDITOR.CTRL + 86, 'pastetext' ]
    ];
}; 
```

这种方式 OFC 并不方便，但这将在 CKEditor 的下一个主要版本中修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-28T10:27:23.437

这甚至可以从 MS Word 粘贴为纯文本

```
var editor = CKEDITOR.instances.YourInputControlName;
editor.on('paste', function(evt) {
    evt.editor.setData($('<div/>').html(evt.data.dataValue).text());
}, editor.element.$); 
```

# php - wp_enqueue_script 没有加载到我的模板中

> ID：11110099
> 
> 赞同：0
> 
> 时间：2012-06-19T21:57:43.583
> 
> 标签：php, wordpress

我想以安全的方式添加和加载我的脚本。但是，将代码添加到functions.php 时，特定模板上没有任何反应。

```
<?php
function theme_scripts() {
wp_deregister_script( 'jquery' );
wp_register_script( 'jquery',     'http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js');
wp_enqueue_script( 'jquery' );
wp_enqueue_script( 'jquery2', 'http://code.jquery.com/jquery-latest.js' );
wp_enqueue_script( 'easing', get_template_directory_uri() . '/jquery.easing.1.3.js',     'jquery' );
}    

add_action('init', 'theme_scripts');
?> 
```

[http://sandbox.jinoh.dk/charlotte/wordpress/wordpress/](http://sandbox.jinoh.dk/charlotte/wordpress/wordpress/)

我已经读过它应该被加载到模板中 - 例如 index.php ，就像一个正常的等，但是什么都没有。我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:10:31.580

确保调用`wp_head()`您的主题，通常是在您的`header.php`文件中。

这个清单非常好：[WordPress 主题开发清单](http://www.wplover.com/lab/theme-development-checklist/)

# php - 尝试打开 MySQL 连接时出现 MySQL 错误

> ID：11110103
> 
> 赞同：0
> 
> 时间：2012-06-19T21:57:59.520
> 
> 标签：php, mysql, localhost

当我尝试打开与我的 MACBOOK 上运行的 MySQL 的连接时，出现以下错误：

警告：mysql_connect(): [2002] 第 15 行 /Users/Eugene/Sites/website/includes/database.php 中没有这样的文件或目录（试图通过 unix:///var/mysql/mysql.sock 连接）警告：mysql_connect()：第 15 行 /Users/Eugene/Sites/website/includes/database.php 中没有此类文件或目录 注意：未定义变量：/Users/Evgeny/Sites/website/includes/database.php 中的连接在第 16 行数据库连接失败：没有这样的文件或目录

我的常数是：

```
defined('DB_SERVER') ? null : define("DB_SERVER", "localhost");
defined('DB_USER') ? null : define("DB_USER", "eugene");
defined('DB_PASS') ? null : define("DB_PASS", "password"); // no comments please :)
defined('DB_NAME') ? null : define("DB_NAME", "maindb"); 
```

我尝试连接的方式是：

```
$connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
if(!$connection) // if no connection - die
{
    die("Database connection failed: " . mysql_error());
}
else // if there is a connection, then go and select a database
{
    $db_select = mysql_select_db(DB_NAME, $connection);
    if(!$db_select) // if no database selected - die
    {
        die("Database selection failed: " . mysql_error());
    }
} 
```

请帮忙，

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:01:54.277

> $this->connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);

第一个问题是 mysqld 没有使用与客户端相同的套接字路径。尝试通过 127.0.0.1 访问，然后运行“显示变量”以找到它放置套接字的位置 - 适当地更新您的 PHP 配置。

> 如果（！$连接）

但是你把连接放在 '$this->connection' 而不是 '$connection'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:00:11.117

您正在通过`$this`但测试局部变量来设置实例变量。假设没有其他更改，您的代码应如下所示：

```
$connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
if (!$connection) // if no connection - die
{
    die("Database connection failed: " . mysql_error());
} 
```

试试看！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:00:20.627

您正在混合类变量和局部变量。`$this->connection`不一样`$connection`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:04:15.847

如果你从一个类中调用 $connection 只需输入 if(!$this->connection){.....} 或者如果不只输入这一行 if (!$connection){.....}

# google-chrome - 在 Chrome 中播放 MP4 H.264 -- 音频听起来很奇怪

> ID：11110104
> 
> 赞同：2
> 
> 时间：2012-06-19T21:58:00.370
> 
> 标签：google-chrome, video, html5-video, mp4, video-encoding

在 Chrome 中加载此视频时，音频播放超级延迟，视频听起来很奇怪！

[http://creative.zebra.com/video/zebra-corporate-video.mp4](http://creative.zebra.com/video/zebra-corporate-video.mp4)

这是编码问题吗？我不确定是什么规范导致了错误，也找不到关于这个问题的任何具体内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:18:28.313

你们是对的，这是Chrome的一个错误。已在 21.0.1.x 中修复。

[http://code.google.com/p/chromium/issues/detail?id=109978](http://code.google.com/p/chromium/issues/detail?id=109978)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:16:43.843

+1 是一个错误。向[http://www.crbug.com](http://www.crbug.com)报告。确保保留原始文件以供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T13:09:15.187

视频在 vlc 等其他视频播放器中播放正常吗？实际上，这种“音效”听起来就像您的音频文件是以 96kHz 录制并导入到 48kHz 项目中而无需转换为新的采样率。

编辑： ...我刚刚下载了视频并在普通播放器中检查了它，它看起来/听起来不错。实际上我意识到，您的视频播放速度太慢。而不是 1:10 分钟，它大约是两倍时间，所以我猜视频标签在视频中的编码信息有一些问题......

我的猜测：高清视频以 50fps（每秒帧数）录制，而 NTSC/PAL 以（或多或少）25fps 录制。似乎编码有问题，所以您的视频包含错误的信息，使视频元素认为，它有一些 25fps 的视频，而原始文件有 50fps。

# ios - AutoResizingMaskFlexibleWidth 最大宽度？

> ID：11110107
> 
> 赞同：0
> 
> 时间：2012-06-19T21:58:21.450
> 
> 标签：ios, resize, uitextfield, mask

在我的应用程序中，我在 UITableViewCell 中有一个 UITextField，目前我让它占据了单元格的整个宽度，因为显然这将是它可以达到的最大值。

无论如何，我知道有使用 autoresizingMask 的选项，例如： AutoReszingMaskFlexibleWidth

无论如何，*第一个问题*，所以即使我在 Interface Builder 中将宽度设置为 1，UITextField 也会将宽度调整为文本的宽度是否正确？

*第二个问题*，有没有办法为自动调整掩码的宽度设置一个最大值，这样宽度就不会达到 5000？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:07:18.483

第一个问题：没有。如果将宽度设置为 1，则文本字段最初的宽度为 1。如果在将文本字段添加为表格视图单元格的子视图后，表格视图单元格的宽度发生了变化，文本字段的宽度也会发生变化. 阅读[*iOS 视图编程指南*](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)[中的“使用自动调整大小规则自动处理布局更改”](http://developer.apple.com/library/ios/documentation/windowsviews/conceptual/viewpg_iphoneos/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)*。*

 *第二个问题：自动调整大小不支持设置最大宽度。如果您需要强制执行最大宽度，请创建一个 的子类，在您的子类中`UITableViewCell`覆盖`layoutSubviews`，并在代码中强制执行最大宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:06:52.417

自动调整大小意味着视图将随着超级视图调整大小而改变大小（在您的情况下为宽度）。如果您将视图设置为与边缘的固定距离和灵活的宽度，那么随着超级视图变得宽 100 像素，它将变得宽 100 像素。这并不意味着它会自动覆盖整个宽度。

此外，自动调整大小的蒙版仅表示视图的大小应该灵活，而不是它应该有多大/多小。如果你想做这些配置，你应该（也许等待 iOS 6 和）看看 Auto Layout。（不，它不在 NDA 之下，因为它在 WWDC 主题幻灯片上）

如果您不想自定义控制文本字段大小，那么您应该覆盖`layoutSubviews`自定义 UITableViewCell。*

# ruby-on-rails - 哪个更有效 - 访问我的数据库或进行额外的网络爬网并访问数组？

> ID：11110109
> 
> 赞同：0
> 
> 时间：2012-06-19T21:58:26.930
> 
> 标签：ruby-on-rails, ruby, nokogiri

我有一个网络爬虫，可以查找我想要的特定信息并将其返回。这是每天运行的。

问题是我的爬虫必须做两件事。

1.  获取它必须抓取的链接。
2.  爬行说链接并将东西推送到数据库。

#1 的问题是，总共有 700 多个链接。这些链接不会经常更改 - 也许每月一次？

因此，一种选择是每月对“链接列表”进行一次单独的爬网，然后将链接转储到数据库中。

然后，让爬虫每天对这 700 个链接中的每一个进行 db hit。

或者，我可以在我的爬虫中进行嵌套爬取 - 每次爬虫运行时（每天），它都会更新这个 700 个 URL 的列表并将其存储在一个数组中，然后从这个数组中提取它来抓取每个链接。

哪个更高效，对 Heroku 或任何主机的征税更少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:55:57.757

这取决于您如何衡量“效率”和“征税”，但本地数据库命中几乎肯定比 HTTP 请求 + 解析链接的 HTML（？）响应更快和“更好”。

此外，这可能并不重要，但是（假设您的数据库和适配器支持它）您可以开始遍历数据库请求结果并处理它们，而无需等待或将整个集合提取到内存中。

网络延迟和资源将比戳已经坐在那里、正在运行并设计为高效快速查询的数据库要糟糕得多。

但是：每天一次？是否有充分的理由花费精力优化这项任务？

# java - PropertyPlaceholderConfigurer 值没有在导入的上下文中为 bean 解析

> ID：11110110
> 
> 赞同：3
> 
> 时间：2012-06-19T21:58:33.060
> 
> 标签：java, spring, properties

我在我的 Web 应用程序的 Spring 上下文中配置了 PropertyPlaceholderConfigurer，该上下文又导入了 JAR 中期望配置某些属性的其他一些上下文。但是由于某种原因，他们无法使用 PropertyPlaceholderConfigurer 值，并且在启动时出现错误：

> java.net.URISyntaxException：索引 1 处路径中的非法字符：${dax.svc1.endpoint}

这是我的应用程序上下文的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:context="http://www.springframework.org/schema/context" 
     xmlns:util="http://www.springframework.org/schema/util" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation=" 
     http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd    
     http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.5.xsd    
     http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">
    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer" name="mhpVariables">
        <property name="locations">
            <list>
                <value>classpath:appconfig.properties</value>
            </list>
        </property>
    </bean>
    <import resource="classpath:com.test.svc1/childContext.xml"/>
    <import resource="classpath:com.test.svc2/child2Context.xml"/>
</beans> 
```

子上下文是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
     xmlns:util="http://www.springframework.org/schema/util" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
    <!-- connection info -->
    <bean class="com.test.java.framework.dataaccess.ServiceConnectionInfo" id="ConnectionInfo">
        <property name="defaultUri" value="${dax.svc1.endpoint}"/>
        <property name="maxTotalConnections" value="500"/>
        <property name="maxConnectionsPerHost" value="50"/>
        <property name="readTimeout" value="3000"/>
        <property name="ConnectionTimeout" value="1000"/>
    </bean>
</beans> 
```

我验证了属性文件在类路径上并且具有属性`dax.svc1.endpoint`. 我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T00:13:01.663

您必须在每个导入中放置一个占位符 bean；这是我可以让它工作的唯一方法，因为我的设置与您描述的类似。我还从 bean 中删除了 id 以防止容器中的任何 id 冲突。

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location" value="WEB-INF/myconfig.properties" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:25:30.730

我会假设你有所有的 xml 指令......检查你的属性文件的编码（也是你的 XML）

# java - 获取 Swing 组件的适当尺寸

> ID：11110116
> 
> 赞同：2
> 
> 时间：2012-06-19T21:58:56.627
> 
> 标签：java, swing, jlayeredpane

我正在尝试 JLayeredPane。所以，在下面的代码中，我创建了 a`JLayeredPane`和 a `JLabel`。我将标签添加到分层窗格中，然后将其添加到`JPanel`. 然后将该面板添加到 JFrame。

```
public static void main(String[] args) {
        frame = new JFrame("LayeredPane Example");
        frame.setPreferredSize(new Dimension(500,500));
        layeredPane = new JLayeredPane();
        layeredPane.setPreferredSize(new Dimension(400, 400));
        JLabel label = new JLabel("Label on LayeredPane");
        label.setLocation(200, 200);
        System.out.println("Width " + label.getWidth() );
        label.setBounds(20, 20, 400, 40);
        layeredPane.add(label);
        layeredPane.setLayer(label, 10, 1);
        frame.setLayout(new BorderLayout());        
        JPanel panel = new JPanel();
        panel.add(layeredPane);
        frame.add(panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    } 
```

现在的问题是，如果我没有声明`label.setBounds(20, 20, 400, 40);`，那么标签不会出现在分层窗格上。这提出了两个问题：

1.  为什么`setBounds`如此重要？
2.  可能是我之前的问题回答的一部分，标签在设置边界之前的初始高度和宽度为**0**，这可能`setBounds`是重要的原因。在这种情况下，我想知道在将 Swing 组件添加到`JLayeredPane`. （如果我的 bounds 小于组件的适当大小，组件会出现隐藏）

[编辑：第一个问题在这里](https://stackoverflow.com/questions/1764115/adding-jlayeredpane-to-jpanel)得到了更详细的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:02:56.300

关于：

1.  为什么`setBounds`如此重要：JLayeredPane 本质上使用空布局，并且无论何时您使用空布局，编码人员都对您添加的组件的大小和位置完全负责。这就是这种布局的规则。
2.  如何确定适当的界限：我所做的一件事就是让组件告诉我它的preferredSize 是什么，然后将它用于它的大小：

`myJLabel.setSize(myJLabel.getPreferredSize());`

我所做的另一件事是为我的 JLayeredPane 的每一层使用非透明 JPanel，为这些 JPanel 提供适当的布局，然后将我的组件添加到适当的 JPanel 层。然后我使用一个侦听器来确保图层 JPanel 的大小与其 JLayeredPane 容器的大小相匹配。

# highcharts - 如何为 highcharts 中的特定条形图或饼图添加负区域或背景？

> ID：11110117
> 
> 赞同：0
> 
> 时间：2012-06-19T21:58:58.253
> 
> 标签：highcharts

使用 highcharts，我如何在我的柱形图下放置一个默认的灰色条，例如，像[这样](http://daytum.com/)？

以及我将如何为饼图做类似的事情（如果我的数据占图表的 30%，则将剩余的 70% 显示为浅灰色或类似的东西以表示饼图的未使用空间）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T00:51:58.950

对于饼图，highcharts 论坛中有些来回。我要做的是获取您需要绘制的所有数据，并找出所有这些数据占总数的百分比。然后，用剩余的百分比创建另一个数据点并将其颜色设置为灰色。但是您确实必须考虑总百分比的含义-没有更多详细信息，我无法开始猜测。

至于关于“我的柱形图下的默认灰色条”的第一个问题，从该链接不清楚你的意思。我真的不明白你对我看过的图表的意思。

# javascript - 当页面上有 2 个地图时更改 JvectorMap 的颜色

> ID：11110118
> 
> 赞同：0
> 
> 时间：2012-06-19T21:59:04.900
> 
> 标签：javascript, jquery, html, jvectormap

我正在使用 Jvectormap 在我的页面上放置 2 个地图。地图放置正常，一切都很好。它们被放置在 2 个不同的 div 中：

```
<div id="map1">
    </div>

<div id="map2">
    </div> 
```

和jQuery：

```
$(function () {
    $('#map1').vectorMap({
        color: '#aaaaaa',
        backgroundColor: '#ffffff',
        hoverOpacity: 1,
        hoverColor: true
    });
});

$(function () {
    $('#map2').vectorMap({
        color: '#aaaaaa',
        backgroundColor: '#ffffff',
        hoverOpacity: 1,
    });
}); 
```

现在，当我尝试使用以下方法动态更改 map2 的颜色时：

```
$("#map2").vectorMap("set", "colors", colorsDictionnary); 
```

仅更改了第一个的颜色。

这仅在更改颜色时发生。即使我正在使用，第一个总是改变它的颜色`$("#map2")`

如何在不触摸 map1 的情况下更改 map2 的颜色？

非常感谢您的帮助，我真的需要它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:33:12.113

这是否完成了您正在尝试做的事情？

[http://jsfiddle.net/qFHyF/](http://jsfiddle.net/qFHyF/)

这个答案建立在我在这里发布的一个问题的答案之上： [jvectormap region colors](https://stackoverflow.com/questions/12867615/jvectormap-region-colors/12868989#12868989)

**JavaScript**

```
(function() {
    var myCustomColorsOne = {
        'AU-SA': '#4E7387',
        'AU-WA': '#333333',
        'AU-VIC': '#89AFBF',
        'AU-TAS': '#817F8E',
        'AU-QLD': '#344B5E',
        'AU-NSW': '#344B5E',
        'AU-ACT': '#344B5E',
        'AU-NT': '#344B5E'
    };
    var myCustomColorsTwo = {
        'AU-SA': '#803300',
        'AU-WA': '#993D00',
        'AU-VIC': '#B24700',
        'AU-TAS': '#CC5200',
        'AU-QLD': '#E65C00',
        'AU-NSW': '#FF7519',
        'AU-ACT': '#FF8533',
        'AU-NT': '#FFB280'
    };
    var myCustomColorsThree = {
        'AU-SA': '#B8E186',
        'AU-WA': '#B8E186',
        'AU-VIC': '#B8E186',
        'AU-TAS': '#B8E186',
        'AU-QLD': '#B8E186',
        'AU-NSW': '#B8E186',
        'AU-ACT': '#B8E186',
        'AU-NT': '#B8E186'
    };

    mapOne = new jvm.WorldMap({
        map: 'au_merc_en',
        container: $('#ausieOne'),
        backgroundColor: '#EFF7FF',
        series: {
            regions: [{
                attribute: 'fill'}]
        }
    });

    mapTwo = new jvm.WorldMap({
        map: 'au_merc_en',
        container: $('#ausieTwo'),
        backgroundColor: '#EFF7FF',
        colors: '#3377CC',
        regionStyle: {
            initial: {
                fill: '#B8E186'
            }
        },
        series: {
            regions: [{
                attribute: 'fill'}]
        }
    });

    mapOne.series.regions[0].setValues(myCustomColorsOne);

    $("#color-changer").click(function() {
        var $that = $(this);
        if ($that.hasClass("green")) {
            $that.removeClass("green");
            mapTwo.series.regions[0].setValues(myCustomColorsTwo);
        } else {
            $that.addClass("green");
            mapTwo.series.regions[0].setValues(myCustomColorsThree);
        }
        return false;
    });

})();​ 
```

**HTML**

```
<a href="#" id="color-changer" class="green">Change colors of Map Two</a>
<p>Map One</p>
<div style="width: 354px; height: 300px" id="ausieOne" data-projection="mill" data-name="au_mill_en"></div>
<p>Map Two</p>
<div style="width: 354px; height: 300px" id="ausieTwo" data-projection="mill" data-name="au_mill_en"></div> 
```

# heroku - 部署到 Heroku 期间/部署后的简短应用程序错误

> ID：11110119
> 
> 赞同：1
> 
> 时间：2012-06-19T21:59:12.167
> 
> 标签：heroku

当我们将新代码部署到 Heroku 时，我们通常会发现第一个请求（或几个请求）来获取应用程序错误。之后一切正常。

它们似乎是请求超时：

```
2012-06-19T21:54:42+00:00 heroku[router]: Error H12 (Request timeout) -> GET www.mydomain.com/ dyno=web.2 queue= wait= service=30000ms status=503 bytes=0 
```

如果有任何可能的联系，我们将使用带有 3 个进程的“独角兽”（是的，我可能应该自己运行一个测试，但由于它是间歇性的并且难以确定，我希望其他人已经看到了这一点。）。也许增加独角兽超时值将有助于避免这种情况，但我想知道是否有一种部署方法不会在前几个客户端部署后导致如此大的延迟响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T01:48:39.827

确实有这样一种方法可以避免这个问题。您可以使用 Heroku[预引导实验室功能](https://devcenter.heroku.com/articles/labs-preboot/)。

另请查看[有关处理 H12 请求超时的 Dev Center 文章](https://devcenter.heroku.com/articles/request-timeout)。

# c# - 旋转后移动 3D 对象

> ID：11110120
> 
> 赞同：0
> 
> 时间：2012-06-19T21:59:13.747
> 
> 标签：c#, wpf, 3d

我在应用旋转后移动 3D 对象时遇到问题。移动和旋转功能都可以完美地独立工作。但问题是当我在旋转后移动一个对象时，该对象不会跟随鼠标并且会朝着奇怪的方向移动。如果有人能看到我的缺陷，我会很感激。谢谢！这是我的代码：

```
private void Rotate()
{
    double angle;
    bool willangle = Double.TryParse(AngleRot.Text.ToString(), out angle);
    RectangleVisual3D rect = (RectangleVisual3D)LastSelectedObject;
    AxisAngleRotation3D r = new AxisAngleRotation3D(new Vector3D(0, 0, 1), angle);
    RotateTransform3D rot = new RotateTransform3D(r, rect.Origin);
    rect.Transform = Transform3DHelper.CombineTransform(rect.Transform, rot);
    LastSelectedObject = rect as ModelVisual3D;
}
private void MoveObject(MouseEventArgs e)
{
    if (LastSelectedObject is RectangleVisual3D)
    {
        RectangleVisual3D rect = (RectangleVisual3D)LastSelectedObject;
        Point3D? origin = GetPoints(e);
        if (origin == null)
            return;
        rect.Origin = (Point3D)origin;
        LastSelectedObject = rect as ModelVisual3D;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:05:25.103

我希望这会有所帮助：旋转和移动的顺序非常重要。如果你移动，然后旋转，那么它会根据 x,y,z 坐标移动。如果你旋转，然后移动，那么它将根据旋转坐标移动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:27:42.983

通过设置它的原点来移动你的对象通常是一个糟糕的举动。如果您的助手库（我不认为 Transform3DHelper 是 .Net？）以基本方式进行矩阵数学运算，那么您通过设置 rect.Origin 将其搞砸了。

相反，尝试找到移动的距离向量并应用该平移矩阵。

我假设

> Vector2D dist=new Vector2D((oldPosition - newPosition).x, (oldPosition - newPosition).y);
> 
> TranslateTransform3D trans = new TranslateTransform3D(dist.x,dist.y,0);
> 
> rect.Transform = Transform3DHelper.CombineTransform(rect.Transform, trans);

另一个可能的错误是 CombineTransform 应该反转 rect.Transform 和 rot，但我不确定 API 是否正在为您处理。查看该方法的重载版本是否允许您反转这两者。

# java - shell 脚本中 wget 的任何 Java 对应项

> ID：11110124
> 
> 赞同：-1
> 
> 时间：2012-06-19T21:59:28.677
> 
> 标签：java, html, url, webpage, wget

是否有任何 Java 库允许我在给定 url 的情况下递归下载网页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:02:40.623

jSpider 可能适合您的需求

[http://j-spider.sourceforge.net/](http://j-spider.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T06:41:21.957

您可以使用Google[的 wget-java](http://code.google.com/p/wget-java/)。

# c++ - 双精度

> ID：11110130
> 
> 赞同：1
> 
> 时间：2012-06-19T22:00:25.793
> 
> 标签：c++, math, double

使用`long double`I get `18/19 = 0.947368421052631578...`, and`947368421052631578`是重复的小数。使用`double`I get`0.947368421052631526...`但是，前者是正确的。为什么会有这样不正确的结果？

感谢帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T22:08:32.843

A`double`通常提供 16(±1) 个十进制数字。您的示例显示了这一点：

```
 4   8  12  16
     v   v   v   v
0.947368421052631578 long double
0.947368421052631526 double 
```

答案同意 16 位数字。这是应该预料到的。另请注意，C 标准中不能保证 a`long double`比 a 具有更高的精度`double`。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T22:06:22.433

您试图用有限的位数来表示每个十进制数。有些东西不能准确地用浮点数表达。期待浮点数的准确答案是您的第一个问题。看看[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

[以下是一些讲义](http://www.cs.mtu.edu/~shene/COURSES/cs3621/NOTES/overview/reals.html)的摘要：

> 如前所述，计算机不能精确地表示实数，因为存储实数的位数是有限的。因此，任何具有无限位数的数字，例如 1/3、2 的平方根和 PI，都不能完全表示。此外，由于实数的编码方式，即使是有限位数也不能精确表示。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-19T22:07:58.897

`double`通常使用[IEEE 754](http://en.wikipedia.org/wiki/IEEE_floating_point)实现的A将精确到 15 到 17 位十进制数字。任何过去都不能被信任的东西，即使你可以让编译器显示它。

# ruby-on-rails - 有没有一种优雅的方法可以将在其他 php 站点上执行身份验证的代码集成到设计中？

> ID：11110131
> 
> 赞同：0
> 
> 时间：2012-06-19T22:00:29.443
> 
> 标签：ruby-on-rails, devise, authorization

我正在开发 Rails 应用程序，我需要在其中授权使用 PHP 编写的其他站点的用户。

其开发人员编写的 PHP 站点的 API 是自定义的，即它们不是 OmniAuth 或类似的。

我想知道，是否有一种优雅的方式可以以某种方式将我的代码向/从 PHP 站点发送/接收 JSON 响应集成到 Devise 中，这样它就可以像我从我的应用程序以通常的 Devise 方式对用户进行身份验证一样工作。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T12:31:45.467

这是官方答案的链接，我从 Devise 维护者那里得到：[https](https://groups.google.com/d/msg/plataformatec-devise/lB4e0nYiM_U/RPDReqjO67QJ) ://groups.google.com/d/msg/plataformatec-devise/lB4e0nYiM_U/RPDReqjO67QJ 。这意味着，简短的回答是否定的。

# html - 简单 HTML 文档中的 CSS DIV 问题

> ID：11110132
> 
> 赞同：0
> 
> 时间：2012-06-19T22:00:36.897
> 
> 标签：html, css

我有一个 2 列的 HTML/CSS 布局，我遇到了一个问题，`<div>sidebar</div>`即 div 没有一直扩展到内容的一侧（换句话说，“侧边栏”的底部之间有很大的间隙div 和“页脚” div，它会导致我想摆脱的丑陋的空白。

沙盒.php：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>My Title</title>
<link href="twoColLiqLtHdr.css" rel="stylesheet" type="text/css" />
<!--[if lte IE 7]>
    <style>
        .content { margin-right: -1px; } /* this 1px negative margin can be placed on any of the columns in this layout with the same corrective effect. */
        ul.nav a { zoom: 1; }  /* the zoom property gives IE the hasLayout trigger it needs to correct extra whiltespace between the links */
    </style>
<![endif]-->
</head>

<body>

<div class="container">
  <div class="header">
  My Header
  </div>
  <div class="sidebar1">
    <ul class="nav">
      <li><a href="#">Link 1</a></li>
      <li><a href="#">Link 2</a></li>
      <li><a href="#">Link 3</a></li>
      <li><a href="#">Link 4</a></li>
    </ul>
    <p>&nbsp;</p>
    </div>
  <div class="content">
Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent luctus dolor nec ante imperdiet malesuada. Phasellus nec ipsum ipsum. Pellentesque lacus elit, tempor vitae laoreet nec, condimentum vel magna. Mauris imperdiet consectetur egestas. Praesent pellentesque, turpis ultricies elementum pellentesque, felis arcu consequat diam, quis viverra libero nibh a massa. Proin nec lectus at lorem semper hendrerit. Curabitur sed diam ut nisi ultrices vestibulum vel eget leo. Donec dapibus sem vel ipsum vestibulum suscipit. Donec faucibus ipsum eu neque facilisis blandit. Vivamus rhoncus odio in nibh pretium elementum.

Morbi adipiscing odio eu nibh gravida eu cursus risus luctus. Cras malesuada fermentum fermentum. Aliquam neque magna, pellentesque nec lobortis eget, scelerisque eu elit. Curabitur commodo leo porttitor eros commodo a venenatis odio vehicula. Aenean sodales diam ac orci interdum aliquam. Nulla sodales enim ut leo porttitor in mollis est consequat. Morbi lobortis nunc nec mi varius varius. Mauris ac velit eget augue cursus viverra. Mauris ut felis vehicula urna aliquet sodales ut vel purus. Pellentesque sed mi felis. In leo urna, dignissim et vestibulum tristique, lobortis quis est. Nulla tincidunt consequat mi a volutpat. Aenean ut arcu nibh, ut placerat augue. Etiam sollicitudin orci id neque ornare a euismod metus imperdiet.
  </div>
  <div class="footer">
    My Footer
    </div>
</body>
</html> 
```

twoColLiqLtHdr.css：

```
@charset "UTF-8";
body {
    font: 100%/1.4 Verdana, Arial, Helvetica, sans-serif;
    background: #699643;
    margin: 0;
    padding: 0;
    color: #000;
}

/* ~~ Element/tag selectors ~~ */
ul, ol, dl { /* Due to variations between browsers, it's best practices to zero padding and margin on lists. For consistency, you can either specify the amounts you want here, or on the list items (LI, DT, DD) they contain. Remember that what you do here will cascade to the .nav list unless you write a more specific selector. */
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   /* removing the top margin gets around an issue where margins can escape from their containing div. The remaining bottom margin will hold it away from any elements that follow. */
    padding-right: 15px;
    padding-left: 15px; /* adding the padding to the sides of the elements within the divs, instead of the divs themselves, gets rid of any box model math. A nested div with side padding can also be used as an alternate method. */
}
a img { /* this selector removes the default blue border displayed in some browsers around an image when it is surrounded by a link */
    border: none;
}

/* ~~ Styling for your site's links must remain in this order - including the group of selectors that create the hover effect. ~~ */
a:link {
    color:#414958;
    text-decoration: none; /* unless you style your links to look extremely unique, it's best to provide underlines for quick visual identification */
}
a:hover {
    color:#414958;
    text-decoration: underline;
}

a:visited {
    color: #4E5869;
    text-decoration: underline;
}
a:hover, a:active, a:focus { /* this group of selectors will give a keyboard navigator the same hover experience as the person using a mouse. */
}

/* ~~ this container surrounds all other divs giving them their percentage-based width ~~ */
.container {
    width: 80%;
    max-width: 1260px;/* a max-width may be desirable to keep this layout from getting too wide on a large monitor. This keeps line length more readable. IE6 does not respect this declaration. */
    min-width: 1260px;/* a min-width may be desirable to keep this layout from getting too narrow. This keeps line length more readable in the side columns. IE6 does not respect this declaration. */
    background: #FFF;
    margin: 0 auto; /* the auto value on the sides, coupled with the width, centers the layout. It is not needed if you set the .container's width to 100%. */
    overflow: hidden;
}

/* ~~ the header is not given a width. It will extend the full width of your layout. It contains an image placeholder that should be replaced with your own linked logo ~~ */
.header {
    background: #A9B92E;
}

.sidebar1 {
    float: left;
    width: 20%;
    background: #94c493;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 80%;
    float: left;
}

/* ~~ This grouped selector gives the lists in the .content area space ~~ */
.content ul, .content ol { 
    padding: 0 15px 15px 40px; /* this padding mirrors the right padding in the headings and paragraph rule above. Padding was placed on the bottom for space between other elements on the lists and on the left to create the indention. These may be adjusted as you wish. */
}

/* ~~ The navigation list styles (can be removed if you choose to use a premade flyout menu like Spry) ~~ */
ul.nav {
    list-style: none; /* this removes the list marker */
    border-top: 1px solid #666; /* this creates the top border for the links - all others are placed using a bottom border on the LI */
    margin-bottom: 15px; /* this creates the space between the navigation on the content below */
}
ul.nav li {
    border-bottom: 1px solid #666; /* this creates the button separation */
}
ul.nav a, ul.nav a:visited { /* grouping these selectors makes sure that your links retain their button look even after being visited */
    padding: 5px 5px 5px 15px;
    display: block; /* this gives the link block properties causing it to fill the whole LI containing it. This causes the entire area to react to a mouse click. */
    text-decoration: none;
    background: #E8EEC7;
    color: #000;
}
ul.nav a:hover, ul.nav a:active, ul.nav a:focus { /* this changes the background and text color for both mouse and keyboard navigators */
    background: #FDEAA6;
    color: #000;
}

/* ~~ The footer ~~ */
.footer {
    padding: 10px 0;
    background: #A9B92E;
    position: relative;/* this gives IE6 hasLayout to properly clear */
    clear: both; /* this clear property forces the .container to understand where the columns end and contain them */
}

/* ~~ miscellaneous float/clear classes ~~ */
.fltrt {  /* this class can be used to float an element right in your page. The floated element must precede the element it should be next to on the page. */
    float: right;
    margin-left: 8px;
}
.fltlft { /* this class can be used to float an element left in your page. The floated element must precede the element it should be next to on the page. */
    float: left;
    margin-right: 8px;
}
.clearfloat { /* this class can be placed on a <br /> or empty div as the final element following the last floated div (within the #container) if the #footer is removed or taken out of the #container */
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
}

/* style the results tables */
#stylized p {
    font-size:11px;
    color:#666666;
    margin-bottom:20px;
    border-bottom:solid 1px #b7ddf2;
    padding-bottom:10px;
}
table.decorated {
  margin: 1em 1em 1em 2em;
  background: whitesmoke;
  border-collapse: collapse;
}
table.decorated th, table.decorated td {
  border: 1px silver solid;
  padding: 0.2em;
}
table.decorated th {
  background: gainsboro;
  text-align: left;
}
table.decorated caption {
  margin-left: inherit;
  margin-right: inherit;
}
table.decorated tr:hover {
   background: lightsteelblue !important;
}

/* Create the scrollable "boxes" */
.scrollArea {
width: 200px; 
height: 300px;
padding-left: 5px;
padding-right: 5px; 
border-color: #6699CC;
border-width: 1px; 
border-style: solid;
float: left; 
overflow: auto;
}
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:05:57.417

啊，让列垂直排列。CSS 的阴暗面。你有两个选择：

1.  使用一些稍微复杂但有据可查的 CSS。[这里的这个家伙](http://matthewjamestaylor.com/blog/perfect-2-column-left-menu.htm)有一个很好的模板，你可以使用我以前用过的，而且效果很好。
2.  JavaScript。使用 jQuery，您可以在所有内容呈现后将较小 div 的高度设置为较大 div 的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:11:24.980

除非您需要支持 IE7 或更低版本，否则停止使用浮点数进行布局：

```
.sidebar1 {
    display:table-cell;
    width: 20%;
    background: #94c493;
    padding-bottom: 10px;
}
.content {
    padding: 10px 0;
    width: 80%;
    display: table-cell;
} 
```

[例子](http://jsfiddle.net/robertc/r3Thx/)。您可能想为`.content`元素添加一些额外的填充，因为边距在内部不起作用`display: table-cell;`，[就像这样](http://jsfiddle.net/robertc/r3Thx/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:13:06.733

如果你不关心 IE7，你可以这样做：

```
<style>
    div.sidebar_ {
        display:        table-cell;
        width:          20%;
        background:     red;
    }

    div.content_ {
        display:        table-cell;
        width:          80%;
        background:     blue;
    }
</style>

<div class="sidebar_">
    Sidebar
</div>
<div class="content_">
    Content<br>
    Content<br>
    Content<br>
    Content<br>
</div> 
```

适用于 IE8 和更好的浏览器以及任何其他浏览器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:15:56.743

在某些情况下，可以通过将 bg 图像添加到父容器来伪造等高列，或者通过将列拆分为 header-content-footer 部分并将每个部分的页脚放在单独的容器中（并对如果需要，标题部分）。如果列具有固定宽度，您将有更多可用选项。

```
<div class="container-with-bg-image-for-all-columns">
    <div class="col1"></div>
    <div class="col2"></div>
    <div class="col3"></div>
</div> 
```

或者...

```
<div class="content-container">
    <div class="col1-content"></div>
    <div class="col2-content"></div>
    <div class="col3-content"></div>
</div>
<div class="footer-container">
    <div class="col1-footer"></div>
    <div class="col2-footer"></div>
    <div class="col3-footer"></div>
</div> 
```

如果需求足够大，请不要忘记为列使用 HTML 表格的选项。这是完全控制列的大小和对齐方式的唯一简单方法。我没有测试 display:table 和其他与表格相关的显示值，但这可能是获得 HTML 表格提供的垂直优势的另一种方式。

# java - 在鼠标点击事件处理程序中重新使用 getX() getY()

> ID：11110145
> 
> 赞同：1
> 
> 时间：2012-06-19T22:01:08.033
> 
> 标签：java, event-handling, mouseclick-event

这是一个很长的问题。我试图让它更简洁，但我认为你需要所有信息来提供帮助。

这是一个摘要：我正在尝试将连续点击捕获为端点。我将在这些点之间绘制 line2D 对象。我有一个侦听器，它将单击事件中的 x 和 y 值发送​​到辅助类。我永远不会有两个以上的点，所以助手类只有 firstPoint 和 secondPoint 成员。我得到点击并使用 evt.getX() 和 evt.getY() 将坐标发送到帮助程序类。助手创建点，但 firstPoint 最终得到与 secondPoint 相同的坐标。我可以在代码块下方找到关于正在发生的事情的详细信息。

这是我的鼠标单击处理程序中的代码：

```
public class Dashboard extends javax.swing.JFrame {

    public static ClickMaster myClicks = new ClickMaster();
    public static boolean drawing = false;
    private MyPoint firstPoint = new MyPoint();
    private MyPoint secondPoint = new MyPoint(); 
```

. . .

```
private void MyDrawingPanelMouseClicked(java.awt.event.MouseEvent evt) {
        if (firstPoint.getPointType().equals(MyPoint.PointType.NULL)) {
            drawing = !drawing;
            firstPoint = myClicks.parseClick(evt.getX(), evt.getY(), drawing);
        } else if (drawing){
            drawing = !drawing;
            secondPoint = myClicks.parseClick(evt.getX(), evt.getY(), drawing);
            myClicks.parsePoints(firstPoint, secondPoint);
        }
} 
```

这是返回点的辅助类：

```
public class ClickMaster {

    MyPoint anyPoint = new MyPoint();

    public ClickMaster() {
        anyPoint.setPointType(MyPoint.PointType.NULL);
    }

    public MyPoint parseClick(double x, double y, boolean firstClick) {
            if (firstClick) {
                anyPoint.setPointType(MyPoint.PointType.ANCHOR);
            } else {
                anyPoint.setPointType(MyPoint.PointType.END);
            }

        anyPoint.setX(x);
        anyPoint.setY(y);

        return anyPoint;
    } 
```

这是我对 Point2D 对象的实现，以防相关：

```
public class MyPoint extends Point2D {

    public enum PointType {

        ANCHOR, END, SOLO, NULL
    };

    double x;
    double y;
    PointType pointType;

    public MyPoint(PointType pType, double x, double y) {

        this.x = x;
        this.y = y;
        this.pointType = pType;
    }

    public MyPoint() {
        this.x = 0.0;
        this.y = 0.0;
        this.pointType = PointType.NULL;
    } 
```

+ 正如您所期望的那样，标准的 getter/setter。

调试表明

```
firstPoint = myClicks.parseClick(firstX, firstY, drawing); 
```

产生一个带有鼠标事件的 x 和 y 值的点。这是意料之中的。

同样地，

```
secondPoint = myClicks.parseClick(evt.getX(), evt.getY(), drawing); 
```

产生具有第二次单击的 x 和 y 值的点。也是意料之中。

但是，当我打电话时

```
myClicks.parsePoints(firstPoint, secondPoint); 
```

我看到 firstPoint 和 secondPoint 具有相同的 x,y 值。

我不确定，但我相信这是因为 firstPoint 和 secondPoint 都从鼠标 evt 获取它们的 x 和 y 值。我认为我需要将 x 和 y 的 double 类型的值放入 firstPoint 和 secondPoint，而不是引用 getX() 和 getY() 从鼠标事件返回的 double 值。

我只是不知道如何实现它。

此外，如果有更好的方法来捕获连续点击并将它们转换为形状的端点，我会欢迎反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:08:35.187

实际上，您的问题是任何点。由于您只有一个 ClickMaster 实例，并且 anyPoint 仅初始化一次，因此无论您调用 parseClick 多少次，您都将返回对同一对象的引用。ParseClick 需要在每次调用时创建一个新的 MyPoint 并返回它。

# c++ - 如何“猜测”缺少哪些库？

> ID：11110146
> 
> 赞同：0
> 
> 时间：2012-06-19T22:01:10.863
> 
> 标签：c++, visual-studio-2010, visual-c++, linker

这个问题纯属学术性的，所以下面只是一个例子；如果我在这一行前面添加两个斜杠

```
#pragma comment(lib, "../node-src/Release/node") 
```

我会得到十几个链接器错误。好吧，不是很打，但至少有 2-3 行看起来像这样

```
1>test.obj : error LNK2001: unresolved external symbol "public: static class 
v8::Local<class v8::String> __cdecl v8::String::New(char const *,int)" 
(?New@String@v8@@SA? 
```

现在我知道大多数要求都在规范中，但是有没有办法知道链接器真正缺少哪些文件？我的意思是，如果我`#pragma`要用常规包含替换该指令，我应该采取哪些步骤？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:05:36.760

很简单，答案是没有简单的方法来判断链接器丢失了哪些文件。它所知道的只是它正在搜索的符号，而不是您需要包含的库文件。毕竟，只要您告诉链接器在哪里搜索它，您就可以在您喜欢的任何位置的任何库中定义这些符号。

如果你有一堆潜在的库，你可以使用类似[Lib.exe 之](https://stackoverflow.com/questions/488809/tools-for-inspecting-lib-files)类的东西来搜索匹配的符号，然后尝试将链接器指向这些文件，但同样，没有办法让链接器找到这个给你的信息..

# ruby - 机架/Sinatra LoadError：无法加载此类文件

> ID：11110148
> 
> 赞同：7
> 
> 时间：2012-06-19T22:01:23.633
> 
> 标签：ruby, heroku, sinatra, bundler, pony

我正在尝试使用 Sinatra、Ruby、rack、haml、pony 和 SendGrid 构建一个应用程序，并使用 git 和 RVM 在 Heroku 上进行部署。该应用程序是一个博客变体，它应该发送一封电子邮件，其中包含在表单上提交的评论。在我的本地服务器上，当表单提交时，我收到以下错误：

```
LoadError at /
cannot load such file -- pony
file: tools.rb location: require line: 314
BACKTRACE
(expand)
/Users/Kevin/prog/ruby/Sinatra/Noobs/noobs.rb in block in <top (required)>
  require 'pony' 
```

在 Heroku 上运行时，表单提交会导致内部服务器错误。“无法加载此类文件”错误表明该文件不在 gem 路径上，但如果我理解正确，操作系统不同意：

```
➜  noobs git:(master) ✗ bundle show pony
/Users/Kevin/.rvm/gems/ruby-1.9.3-p194@noobs/gems/pony-1.4

➜  noobs git:(master) echo $GEM_PATH
/Users/Kevin/.rvm/gems/ruby-1.9.3-p194@noobs:/Users/Kevin/.rvm/gems/ruby-1.9.3-p194@global 
```

这是需要小马的代码（noobs.rb）：

```
require 'rubygems'
require 'sinatra'
require 'haml'
require "sinatra/reloader" if development?  

# ...

post '/' do
  require 'pony'
  Pony.mail(:from => params[:name] + "<" + params[:contact] + ">", 
```

我需要做什么才能让小马工作？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-20T18:52:15.470

```
require "bundler/setup" 
```

可能会解决您的错误。

由于您将 Bundler 与 Sinatra 一起使用，因此您需要 Bundler 才能使捆绑的 gem 工作。您可能在 Bundler 和 gemset 之间拆分了 gem。如果您的 gemset 中有 Sinatra 和 Haml，但 Gemfile 中有 Pony，您将看到 LoadError。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-15T14:59:32.400

我在 Gemfile 中写下 gem（小马 - 在我的例子中）的名称 - 它开始工作。只需打开 Jemfile - 并在新行中写下单词**jem "pony"**我得到以下 [paste2.org/6hVxHXKH](https://paste2.org/6hVxHXKH)

# android - 如何在 ContentProvider 中正确匹配 Uri？

> ID：11110149
> 
> 赞同：0
> 
> 时间：2012-06-19T22:01:24.230
> 
> 标签：android, uri

这就是我所拥有的，但它没有说该表不存在。我很肯定它确实可以防止有人问这个问题。但这是执行此操作的一些代码：

什么叫

* * *

```
/*Constants*/
public static final String AUTHORITY = "content://com.smartcal.eventprovider";
private static final int EVENTS_INFO = 1;
baseUri = Uri.withAppendedPath(baseUri, "events_info");
    return new CursorLoader(this, baseUri, args.getStringArray("projection"), 
            args.getString("selection"), args.getStringArray("selectionArgs"), args.getBoolean("sortOrder") ? args.getString("sortOrder") : null ); 
```

* * *

匹配的是什么

* * *

```
private String getTable(Uri uri) {
    String table = "";
    switch(sUriMatcher.match(uri)){
    case EVENTS_INFO: table = "events_info";
    }
    return table;
}

private static final UriMatcher sUriMatcher = new UriMatcher(UriMatcher.NO_MATCH);

static
{
    sUriMatcher.addURI(AUTHORITY, "events_info", 1);

} 
```

* * *

还有我`query()`的自定义方法`ContentProvider`

* * *

```
@Override
public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    database = openHelper.getWritableDatabase();

    return database.query(getTable(uri), projection, selection, selectionArgs, null, null, null);
} 
```

错误：

* * *

```
06-19 17:34:14.366: E/AndroidRuntime(686): Caused by: 
java.lang.IllegalStateException: Invalid tables 
```

编辑：

使用 Alex's`IllegalArgumentException`时，这是我从错误中得到的结果：

```
06-19 19:17:42.277: E/AndroidRuntime(1134): Caused by: 
java.lang.IllegalArgumentException: Unknown URI
content://com.smartcal.eventprovider/events_info 
```

如您所知，假设该`sUriMatcher.addURI()`方法正常工作，它应该匹配。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:32:44.180

您的问题可能源于您的代码组织得不是很好......

第一件事，

```
private String getTable(Uri uri) {
    switch(sUriMatcher.match(uri)) {
        case EVENTS_INFO: 
            return "events_info"; // return

        /** PROVIDE A DEFAULT CASE HERE **/
        default:
           // If the URI doesn't match any of the known patterns, throw an exception.
           throw new IllegalArgumentException("Unknown URI " + uri);
    }
} 
```

第二件事，

```
/** Use constants, not raw ints **/
sUriMatcher.addURI(AUTHORITY, "events_info", EVENT_INFO); 
```

除此之外，您可能还想提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:09:06.573

您是否已经安装了该应用程序并且该表是新的？如果是这样，并且您没有更新 sql 帮助程序类中的架构，则需要先卸载该应用程序。然后在您的模拟器设备中安装该应用程序。db 只创建一次，并且在第一次之后不会调用 sql helper 中的 create 方法，即使您正在安装或运行新的 build/apk。

# asp.net - 建立离线网站 - 将其刻录在 CD 上

> ID：11110150
> 
> 赞同：-1
> 
> 时间：2012-06-19T22:01:29.630
> 
> 标签：asp.net, wordpress, kentico

我需要建立一个可以下载到 CD 的网站。我想使用一些 CMS（wordpress、Kentico、MojoPortal）来设置我的网站，然后将其下载到 cd 上。有很多程序知道如何将网站下载到本地驱动器，但如何使搜索工作超出了我的理解。

任何想法？？？

该项目应该是当地社区服务的索引，适用于没有适当互联网连接的社区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:18:58.947

如果您需要制作可以从 CD 中查看的内容，最好的方法是仅使用 HTML。例如，WordPress 需要 Apache 和 MySQL 才能运行。如果您通过 CD 提供内容，尽管有人可以在他自己的计算机上“安装”该网站，但您的大多数用户将没有足够的知识来完成这项任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:20:07.680

假设您只是关注站点的内容.. 一般而言，您应该能够找到一个工具来“抓取”或镜像大多数站点并创建可以刻录在 CD 上的离线版本（例如，[使用 wget](http://fosswire.com/post/2008/04/create-a-mirror-of-a-website-with-wget/)）。

这不会产生离线版本的应用程序功能，如搜索或登录，因此您需要在设计网站时考虑到这些限制。

例如：

*   确保您的网站可以在没有 JavaScript 的情况下完全导航（大多数“抓取”工具将通过跟踪 html 中的链接来发现页面，并且对 JavaScript 的支持有限或不支持）。

*   包括一些页面，这些页面是网站上资源的目录列表（而不是依赖于搜索）。

*   可能使用也可以离线工作的客户端技术（如 JavaScript）来实现您的搜索。

*   对图像/javascript 和页面之间使用相对 html 链接。理想情况下，您用于创建站点的离线版本的工具应该能够重写/更正站点的内部链接，但最好尽量减少这样做的需要。

您可以考虑的另一种方法是使用客户端 wiki 格式进行分发，例如[TiddlyWiki](http://www.tiddlywiki.com/)。

来自 TiddlyWiki 网站的简介：

```
TiddlyWiki allows anyone to create personal SelfContained hypertext
documents that can be published to a WebServer, sent by email,
stored in a DropBox or kept on a USB thumb drive to make a WikiOnAStick. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:15:56.687

我认为您需要澄清您希望将什么下载到 CD 上。正如 Stennie 所说，您可以使用“爬虫”或 TiddlyWiki 下载创建站点所需的内容和任何其他内容，但否则我认为您想要开发的实际上是一个应用程序，在这种情况下您需要做比标准 CMS 包提供的更多的开发。我不乐意，但建议您研究一下像 SalesForce 平台这样的东西。它是一个基于云的平台，可以促进您真正致力于实现的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T04:23:22.430

您可以使用 VirtualBox 在小型 web/db 服务器映像上创建工作 CMS，并将虚拟磁盘放在可下载的位置。最终用户将需要 VirtualBox 客户端（免费！）和下载的虚拟磁盘，但您可以将其配置为在创建、部署和运行阶段以最小的努力运行。

# asp.net - 何时填充已排序的 asp:GridView？

> ID：11110151
> 
> 赞同：5
> 
> 时间：2012-06-19T22:01:35.183
> 
> 标签：asp.net, gridview, columnsorting

我尝试过多种方式来问这个问题。这是一个很难回答的问题，因为您必须了解正在发生的事情。

*什么时候填充 GridView？*

* * *

*nieve*的答案是在 PostBack 期间`Page_Load`，如果**不是***PostBack*的话：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
       DataSet ds = GetStuffToShow();
       GridView1.DataSource = ds;
       GridView1.DataBind();
    }
} 
```

这样做的问题是，如果*是*回发，则不会填充网格。网格未填充的原因是因为我们关闭了网格的视图状态。

## 所以不要看 IsPostBack

我们需要*始终*填充网格，无论是否回发：

```
protected void Page_Load(object sender, EventArgs e)
{
    DataSet ds = GetStuffToShow();
    GridView1.DataSource = ds;
    GridView1.DataBind();
} 
```

这样做的问题是，如果用户对列进行排序，则在和**之后**`OnSorting`调用事件：**`Page_Init``Page_Load`**

 **```
protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    DataSet ds = GetStuffToShow(e.SortExpression, e.SortDirection);
    GridView1.DataSource = ds;
    GridView1.DataBind();
} 
```

我们已经运行了两个数据库查询，而只需要一个。

## 缓存适用于列排序

如果我愿意在列排序期间接受无效缓存，我**可以**将其存储`DataSet`在会话变量中，只要我对任何其他操作使其无效。

问题是在我需要它***之后***`OnSorting`调用事件（ ）：*`Page_Load`*

 *```
protected void Page_Load(object sender, EventArgs e)
{
    if (AGridViewOnSortingEventIsntBeingRaised)
    {
       DataSet ds = GetStuffToShow();

       StoreTheDatasetInTheSessionSomehowInCaseTheyCallSortInTheFuture(ds);

       GridView1.DataSource = ds;
       GridView1.DataBind();
    }
}

protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
{
    DataSet ds = GetDataSetOutOfSessionSomehowThatDamnWellBetterBeThere();

    SomehowSortAReadOnlyDisconnectedDataSet(ds, e.SortExpression, e.SortDirection);

    GridView1.DataSource = ds;
    GridView1.DataBind();
} 
```

* * *

## 对未知的恐惧

然后我仍然感到恐惧，因为我关闭了 GridView 的视图状态。`asp:GridView`当我可以从服务器（或内存）重建它时，我认为只读不需要数十千字节的 base64 编码。

但我相信我有义务将页面返回`GridView`到上次呈现页面时的状态。我必须在*之前* `Page_Load`（即期间`Page_Init`）这样做。[我有这种恐惧，因为有人这么说。](http://forums.asp.net/t/1709559.aspx/1)所以我把它变成

```
protected void Page_Init(object sender, EventArgs e)
{
    if (AGridViewOnSortingEventIsntBeingRaised)
    {
       DataSet ds = GetStuffToShow();

       StoreTheDatasetInTheSessionSomehowInCaseTheyCallSortInTheFuture(ds);

       GridView1.DataSource = ds;
       GridView1.DataBind();
    }
} 
```

问题在于，这`GetStuffToShow`取决于用户在文本框中键入的内容，而这些内容在`Page_Init`

反正我是在闲逛。这里太热了。希望这个问题能得到解答，不像我[最近](https://stackoverflow.com/questions/11037806/wrapping-a-datalists-table-table-into-multiple-columns)对​​asp.net的[其他](https://stackoverflow.com/questions/11057352/what-does-it-mean-for-a-one-to-many-link-relation-to-be-unique) [挫败感](https://stackoverflow.com/questions/11088887/how-to-enable-in-place-editing-in-an-aspgridview)

## 奖金阅读

*   [对数据集形成的 GridView 进行排序](https://stackoverflow.com/questions/2627234/sorting-gridview-formed-with-data-set)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T14:08:26.530

一个简单的解决方案是调用`Gridview.DataBind()`事件`Page.Pre_Render`，这使得它在处理任何按钮/排序事件后被调用。这是确保每个请求只调用一次的好方法。

为了使事情更清楚，通过属性访问数据集也是一件好事，该属性基本上会`"Store-The-Dataset-In-The-Session-Somehow-In-Case-They-Call-Sort-In-The-Future"`在其 Set 部分调用您的方法，`"Get-Data-Set-Out-Of-Session-That-Had-Better-Be-There"`在 Get 部分调用您的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T06:24:11.623

您可以尝试在 Gridview Needdatasource 事件上填充网格，当您执行回发并获得适当的功能时，该事件将被调用，无论您在事件中编写什么代码。另外，如果您想再次绑定它，您可以只使用 data databind 方法，这将再次调用 needdatasource 事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T01:17:14.243

通过添加几个隐藏字段，一个用于排序表达式，另一个用于排序方向，您可以使用这些值在页面加载时填充 GridView，然后在 Sorting 事件中更新排序（排序代码从 All -In-One 代码框架 GridView 示例）：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataSet ds = GetStuffToShow();
        GridView1.DataSource = ds;
        GridView1.DataBind();
    }

    protected void GridView1_Sorting(object sender, GridViewSortEventArgs e)
    {
        // If the sorting column is the same as the previous one, 
        // then change the sort order.
        if (SortExpression.Value.Equals(e.SortExpression))
        {
            SortDirection.Value = SortDirection.Value.Equals("ASC") ? "DESC" : "ASC";
        }
        // If sorting column is another column, 
        // then specify the sort order to "Ascending".
        else
        {
            SortExpression.Value = e.SortExpression;
            SortDirection.Value = "ASC";
        }

        var sortedView = new DataView(<convert your DataSet to a DataTable>)
            { Sort = string.Format("{0} {1}", this.SortExpression.Value, this.SortDirection.Value) };
        GridView1.DataSource = sortedView;

        GridView1.DataBind();
    } 
```

请注意，SortDirection 和 SortExpression 是隐藏字段。这也很适合缓存 DataSet。

另外，我不会担心您提出的 Page_Init 问题。这仅适用于动态创建控件的情况。***

# java - 逐块读取文件

> ID：11110153
> 
> 赞同：5
> 
> 时间：2012-06-19T22:01:52.573
> 
> 标签：java, io, fileinputstream, http-chunked

我想逐个读取文件。该文件被分成几部分，存储在不同类型的媒体上。我目前所做的是调用文件的每个单独部分，然后将其合并回原始文件。

问题是我需要等到所有块都到达之后才能播放/打开文件。是否可以在块到达时读取它们，而不是等待它们全部到达。

我正在处理媒体文件（电影文件）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T22:05:05.097

请参阅[InputStram.read(byte[])](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#read%28byte%5B%5D%29)一次读取字节。

示例代码：

```
try {
    File file = new File("myFile");
    FileInputStream is = new FileInputStream(file);
    byte[] chunk = new byte[1024];
    int chunkLen = 0;
    while ((chunkLen = is.read(chunk)) != -1) {
        // your code..
    }
} catch (FileNotFoundException fnfE) {
    // file not found, handle case
} catch (IOException ioE) {
    // problem reading, handle case
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:10:42.353

你想要的是[源数据线](http://docs.oracle.com/javase/1.4.2/docs/api/javax/sound/sampled/SourceDataLine.html)。当您的数据太大而无法一次将其保存在内存中时，这非常适合，因此您可以在收到整个文件之前开始播放它。或者如果文件永远不会结束。

[在此处查看源数据行](http://docs.oracle.com/javase/tutorial/sound/playing.html)的教程

[http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read](http://docs.oracle.com/javase/6/docs/api/java/io/FileInputStream.html#read)

我会使用这个 FileInputSteam

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-20T11:13:32.633

您可以尝试使用 nio 在内存中逐块读取文件而不是完整文件，而不是较旧的 io。您可以使用 Channel 从多个来源获取数据

```
RandomAccessFile aFile = new RandomAccessFile(
                        "test.txt","r");
        FileChannel inChannel = aFile.getChannel();
        long fileSize = inChannel.size();
        ByteBuffer buffer = ByteBuffer.allocate((int) fileSize);
        inChannel.read(buffer);
        //buffer.rewind();
        buffer.flip();
        for (int i = 0; i < fileSize; i++)
        {
            System.out.print((char) buffer.get());
        }
        inChannel.close();
        aFile.close(); 
```

# html - 将 Ruby 计数结果显示为 html

> ID：11110156
> 
> 赞同：0
> 
> 时间：2012-06-19T22:02:05.073
> 
> 标签：html, ruby-on-rails, arrays

我创建了一个自定义方法，该方法将返回唯一项目以及表中的出现次数。我有以下代码：

```
@answers = Answer.all.count(:group => 'answer') 
```

将其渲染为 JSON 时结果很好，显示：

```
{"0,0":1,"1,2":1,"2,2":1,"3,3":1} 
```

...但我无法将结果呈现为 html。我无法显示键值：

```
<% @answers.each do |answer| %>
  <tr>
    <td>key: <%= @answer.??? %></td>
    <td>value: <%= @answer.??? %></td>
  </tr>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:08:28.357

如果 answers 是一个散列（看起来是这样），您可以使用两个参数而不是一个参数将键和值传递到渲染块。

像这样：

```
<% @answers.each do |key, val| %>
  <tr>
    <td>key: <%= key %></td>
    <td>value: <%= val %></td>
  </tr>
<% end %> 
```

# java - 在登录页面访问请求数据

> ID：11110159
> 
> 赞同：0
> 
> 时间：2012-06-19T22:02:15.587
> 
> 标签：java, security, jsp, servlets

下面的链接是一个安全的URL，我需要在登录后保留“resource”参数，因为它是用来在成功登录后重定向用户的。

```
http://wwwtest.mycompany.com/mwa/ssologin?resource=/content/en/home.html 
```

web.xml

```
 <security-constraint>
    <web-resource-collection>
        <web-resource-name>Secured</web-resource-name>
        <description></description>
        <url-pattern>/home</url-pattern>
        <url-pattern>/jsp/apps/*</url-pattern>
        <url-pattern>/ssologin</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>

    <auth-constraint>
        <description>protectedlinks</description>
        <role-name>protected</role-name>
    </auth-constraint>
</security-constraint>

<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>mycompany.com</realm-name>
    <form-login-config>
        <form-login-page>/login.jsp</form-login-page>
        <form-error-page>/error.jsp</form-error-page>
    </form-login-config>
</login-config>

<security-role>
    <description>
    Protected portion of site</description>
    <role-name>protected</role-name>
</security-role> 
```

login.jsp - 用户似乎被重定向到 login.jsp 并且请求属性（包括“资源”URL 参数）不再存在

```
<form name="loginForm" method="post" action="login?resource=<c:out value='${param.resource}'/>">
Username: 
<br/>
<input type="text" size="15" name="user">
<br/>
Password: 
<br/>
<input type="password" size="15" name="password">
<br/>
<input type="Submit" value="Login"> 
```

当我尝试通过 TagLib 或过滤器访问请求时，Web 容器 (WebSphere) 似乎正在执行重定向我的 login.jsp。由于重定向， ${param.resource} 也不起作用。

最简单的解决方案是让浏览器执行转发而不是重定向，但到目前为止，我找不到在安全约束（或其他任何地方）中强制执行转发的方法。我想到了其他一些令人费解的会话流程，但我都不喜欢它们。

唯一可以接受的解决方案是包含一些 JavaScript 来更新操作以包含 URL 参数，但这并不总是有效，因为有些浏览器会保留原始 URL，有些会更新为重定向 URL (wwwtest.mycompany. com/mwa/login.jsp）。

为了安全起见，我如何强制转发而不是重定向请求，或者以完全不同的方式解决这个问题？

**更新**

*   资源参数是动态的，由第 3 方设置
*   如果我删除 url-pattern "/ssologin"，我的 JSTL/EL 语法绝对可以正常工作
*   隐藏参数将不起作用，因为“资源”参数不再在请求中

谢谢，肖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:03:45.743

在您的表单中选择一个隐藏字段（登录），然后

```
<input type="hidden" name="someParam" value="${param.resource}"/> 
```

您将在下一个表单 POST 中收到此信息（提交 loginForm 后）

同样正如 BalusC 所提到的，您需要通过以下方式转义 XML

```
<input type="hidden" name="resource" value="${fn:escapeXml(param.resource)}"/> 
```

# google-bigquery - 获取后端错误。请再试一次。从 bq 将 SELECT 运行到表中时

> ID：11110160
> 
> 赞同：0
> 
> 时间：2012-06-19T22:02:20.310
> 
> 标签：google-bigquery

我似乎间歇性地收到以下错误：

查询操作中的 BigQuery 错误：后端错误。请再试一次。

当我运行如下所示的查询时：

从 myproject.mytable 中选择campaign_id、cookie、point_type WHERE campaign_id IN ([CSV list of ids]) GROUP BY cookie、point_type、campaign_id

使用以下 bq 命令：

bq --format=none 查询 --destination_table=myproject.mytable_unique [查询]

虽然错误似乎是随机发生的，但完全相同的查询将在几分钟后工作。知道是什么原因造成的吗？

最近失败的作业的作业 ID 是 job_3c05e162605342acb64fce6f71bb8b71

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:29:46.367

所以这项工作实际上成功了——你看到的是，当 bq 试图获取工作的状态时，调用失败了。我们正在调查这个问题。如果您运行`bq show -j job_3c05e162605342acb64fce6f71bb8b71`，您应该会看到作业已成功完成。

# svn - 在 SVN 中及时跳转

> ID：11110164
> 
> 赞同：4
> 
> 时间：2012-06-19T22:02:46.283
> 
> 标签：svn, version-control, tortoisesvn, branch

我是 SVN 的新手，我对一个问题感到很困惑。我正在使用乌龟 SVN。

我有一个项目的第 8 版和更高版本的 11 版。在 11 之前，这是一个简单的过程，但现在我必须跳回到第 8 版，顺便说一下，从那开始。我已经制作了 rev8 的工作副本，并进行了一些更改。

我如何将主干的磁带“倒带”到 rev8，并创建最近主干的一个分支，并在 rev8 上提交我的更改，以便结果将成为主干？

遇到的所有文档都写了关于分支和标记的无穷无尽的页面 - 存储库中的实际顶级版本 - 但不是关于过去修订中的这些操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:09:26.710

```
svn merge -r11:8 path/ 
```

将“还原”从 8 到 11 所做的所有更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T02:00:33.023

首先，让我们对最近的更改进行分支。我喜欢使用完整的 URL 进行分支：

```
$ svn cp svn://localhost/trunk svn://localhost/branches/foo  #Creating branch foo 
```

现在，我们可以从 9 开始删除更改：

```
$ svn merge -rHEAD:8 . 
```

请注意，我不必指定您用于修订版 8 的标签。那是因为修订版号非常适合充当标签。我通常只标记有趣的修订——超出开发范围的修订，或者我认为以后出于某种原因可能很重要的修订。

顺便一提。我也可以按相反的顺序做事：

```
$ svn merge -r11:8 .   #Remove changes 9 through 11
$ svn commit -m "Removing yucky stuff"   #Creates revision #12 
```

哎呀！我应该分支修订版 11！让我们现在就开始做吧：

```
$ svn copy -r11 . svn://localhost/branches/foo   #Revision #11 is now branch "foo" 
```

如果您更喜欢完整的 URL：

```
$ svn copy -r11 svn://localhost/trunk@11 svn://localhost/branches/foo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T12:47:35.283

1.  检查头部修订
2.  打开日志
3.  右键单击要成为新负责人的修订版
4.  点击“恢复到这个版本”
5.  犯罪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:06:52.720

1.  结帐后备箱。

2.  在不同的目录中导出 r8（svn 导出）。这样就避免了“.svn”元目录。

3.  将所有 r8 文件复制到主干。

4.  犯罪。

（5\. 如果 trunk 有其他文件不在 r8 中，您需要手动“svn remove”这些文件）。

正如您可能推测的那样，这并不是真正的“倒带”。相反，磁带继续前进，但如果你这样做，r12 会巧合地看起来与 r8 完全一样。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T22:17:05.013

要从给定的修订创建分支，只需选择“合并/分支...”，然后选中单选按钮“存储库中的特定修订”并输入修订号 (11)

要将主干恢复到修订版 8 中的状态，请选择“显示日志...”，然后选择要回滚到的修订版 (8)，右键单击，然后选择“恢复到此修订版”。然后提交。这将创建一个与版本 8 相同的附加版本 (13)。

确保不要将修订版 13 合并到您从修订版 11 创建的分支中，因为它也会回滚分支中的更改。为确保它不会发生，请将修订版 13 从主干合并到分支中，但选中“仅记录合并”复选框（IIRC）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-01T11:38:12.247

这里有不同的信息，因此有答案（但@David_W、@maxim1000 和@Wrikken 的答案有助于完成这项工作）。

很多人偶然发现的是，Subversion 只允许在每个分支的头部工作。这不是一个但是，而是一个特征。因此，不可能改写历史，并且您可以放心，没有人会改变历史。

这就是为什么您必须执行（抽象）步骤的原因：

1.  在本地签出当前版本。
2.  在您的本地副本上执行反向补丁（这意味着 r8 到 r11 以相反的顺序）。
3.  提交这些更改，以便工作副本的新内容（与修订版 8 完全相同）将进入 HEAD。

# c# - 在尝试向数据库添加价值时，使用 .net 框架中的 C# 代码；出现错误：当前上下文中不存在名称“名称”

> ID：11110167
> 
> 赞同：0
> 
> 时间：2012-06-19T22:03:03.013
> 
> 标签：c#, visual-studio, webforms

我有一个 asp.net 页面，客户可以在其中在文本字段中插入输入：

```
<table>
    <tr>
        <td style="width: 56px"><asp:Label ID="Label1" runat="server" Text="Name"></asp:Label></td>
        <td style="width: 148px"><asp:TextBox ID="name" runat="server" Width="272px"></asp:TextBox></td>
    </tr>

    <tr>
        <td style="width: 56px"><asp:Label ID="Label2" runat="server" Text="Email"></asp:Label></td>
        <td style="width: 148px"><asp:TextBox ID="email" runat="server" Width="272px"></asp:TextBox></td>
    </tr>

    <tr>
        <td style="width: 56px"><asp:Label ID="Label3" runat="server" Text="Subject"></asp:Label></td>
        <td style="width: 148px"><asp:TextBox ID="sub" runat="server" Width="272px"></asp:TextBox></td>
    </tr>

    <tr>
        <td style="width: 56px"><asp:Label ID="Label4" runat="server" Text="Message"></asp:Label></td>
        <td style="width: 148px">
            <asp:TextBox ID="message" runat="server" Width="272px"></asp:TextBox>
            <!--<textarea id="message"; cols="1"; rows="1"; style="width: 272px; height: 152px;"></textarea>-->
        </td>
    </tr>
    <tr></tr>
    <tr>
        <td style="width: 56px; height: 36px;"></td>
        <td style="width: 148px; height: 36px;"><asp:Button ID="Button1" runat="server" Text="Submit" Style="float:left" OnClick="Button1_Click" />
            <asp:Button ID="Button2" runat="server" Text="Reset" />
            <asp:button id="btnTest" runat="server" onclick="btnTest_Click" text="Test Database Connection" />
        </td>
    </tr>
</table>      " 
```

我有一个方法试图将我的值添加到数据库中：

```
protected void Button1_Click(object sender, EventArgs e)
{
    using (SqlConnection conn1 = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
    {
        //Check if the same request is already submitted.

        SqlCommand cmd1 = new SqlCommand();
        cmd1.CommandType = System.Data.CommandType.StoredProcedure;
        cmd1.CommandText = "dbo.Procedure";

        cmd1.Parameters.Add("@name", System.Data.SqlDbType.VarChar).Value = name.Text;
        cmd1.Parameters.Add("@email", System.Data.SqlDbType.VarChar).Value = email.Text;
        cmd1.Parameters.Add("@sub", System.Data.SqlDbType.VarChar).Value = sub.Text;
        cmd1.Parameters.Add("@message", System.Data.SqlDbType.VarChar).Value = message.Text;

        cmd1.Connection = conn1;
        conn1.Open();
        cmd1.ExecuteNonQuery();
        conn1.Close();
    }                 
    Response.Redirect("~/Default.aspx");     
} 
```

但现在我收到类似“名称'name'/'email'/'sub'/'message'在当前上下文中不存在”的错误。我是 .net 框架和 C# 的新手。请帮忙。

我的起始页是 Default.aspx，提交按钮在 Contact.aspx 页面上。但是当我在设计模式下按下提交按钮时，在 Default.aspx.cs 后面的代码中创建的方法。会不会是个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:29:36.333

对我来说，后面的代码似乎无法找到带有 ID（电子邮件、姓名...）的文本框。如果您正在使用 Web 应用程序项目，请检查您的 .aspx.designer.cs 文件以确保它已正确初始化。此外，部分类名和命名空间后面的代码必须与您的 aspx 页面中 <%@ Page ... %> 指令中的 Inherits="xxx" 属性匹配。但是，您也可能遇到此问题，因为您的表位于某些数据绑定或动态控件中，在这种情况下，您必须在代码中查找控件引用。

# javascript - 带有图像工具提示的幻灯片库，图像突破无限宽度块

> ID：11110169
> 
> 赞同：1
> 
> 时间：2012-06-19T22:03:40.813
> 
> 标签：javascript, jquery, html, css

我正在尝试根据此设计开发带有图像工具提示的幻灯片库：

![我要实施的设计](../Images/097d3b55b8de6aeae846b8e1fe8df058.png)

我需要开发的是一个由两个按钮控制的滑块，每次按下一个按钮时，滑块的内容必须移动一个滑块的宽度或该侧左侧内容的宽度，以较小者为准。鼠标在滑块内输入图像后，必须将全尺寸版本显示为工具提示。

[到目前为止](http://jsfiddle.net/kotekzot/nE85N/)，这是我的解决方案的一个小提琴，我遇到的问题是不完全适合视图的图像加上左侧的隐藏区域被移动到新行。您可以通过单击“显示内容大小”按钮看到问题，内容元素的宽度将等于容器元素的宽度+内容元素的margin-left。

如果您可以建议一种将内容向右移动的算法，则可以加分，我已经想出了一个 T （或者我认为，无论如何），但是向右需要更多的工作（它不会检查是否已到达内容的末尾）。**更新：**在解决另一个问题之前，我似乎无法实现正确的向右移动，这是我想出的算法，如果我无法测量“左侧显示”的实际宽度，我将无法测量内容元素。

![在此处输入图像描述](../Images/50bcee23a9683c1786f1c8a44947ca6d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T21:50:52.573

我创造了一些你可能喜欢的东西：

## *[画廊演示](http://jsbin.com/ozepod/6/)*

*   默认情况下，画廊**不会**滚动*整个画廊宽度*（您可以更改它）导致右侧的一些最初截断的图像，在“完整”幻灯片之后会再次导致截断，就在我们画廊的另一侧. 你有这个原因的`beKind`变量。随心所欲地调整它。
*   如果没有足够的内容使画廊可用，它会隐藏按钮。
*   图库计算要滚动的剩余空间。
*   一旦滑块到达终点 - 左/右按钮使画廊跳到开始/结束，因此始终可用。（有一个按钮似乎有点奇怪......但这什么都不对？;））
*   **工具提示**内置了一个*悬停意图*，如果我们的用户无意中悬停在我们的画廊上，他们不会惹恼他们：（如果悬停注册超过 120 毫秒，工具提示会淡入。公平的时机。我喜欢它。）
*   **正如您在评论中指出的那样，**工具提示现在不会离开屏幕。

## 问：

```
// Slide Kind Gallery - by roXon // non plugin v. // CC 2012.
$(window).load(function(){  
    var galW = $('#gallery').outerWidth(true),
        beKind = 120, // px substracted to the full animation to allow some images to be fully visible - if initially partly visible.
        sumW = 0;       
    $('#slider img').each(function(){
        sumW += $(this).outerWidth(true);
    }); 
    $('#slider').width(sumW);
    if(sumW <= galW){ $('.gal_btn').remove(); } 
    function anim(dir){
        var sliderPos = Math.abs($('#slider').position().left),
            rem = dir ==='-=' ? rem = sumW-(sliderPos+galW) : rem = sliderPos,
            movePx = rem<=galW ? movePx = rem : movePx = galW-beKind;
        if( movePx <= 10){
            movePx = dir==='-=' ? movePx=rem : movePx = galW-sumW;
            dir = '';
        }
        $('#slider').stop(1).animate({left: dir+''+movePx },1000);
    }   
    $('.gal_btn').on('click', function(){
        var doit = $(this).hasClass('gal_left') ? anim('+=') : anim('-=');
    }); 
}); 
```

和**工具提示**脚本：

```
// Addon // Tooltip script
var $tt = $('#tooltip');
var ttW2 = $tt.outerWidth(true)/2;
var winW = 0;
function getWW(){ winW = $(window).width(); }
getWW();
$(window).on('resize', getWW);
$('#slider img').on('mousemove',function(e){
    var m = {x: e.pageX, y: e.pageY};
    if( m.x <= ttW2 ){
       m.x = ttW2;
    }else if( m.x >= (winW-ttW2) ){
       m.x = winW-ttW2;
    }
    $tt.css({left: m.x-ttW2, top: m.y+10});
}).hover(function(){
    $clon = $(this).clone();
    var t = setTimeout(function() {
        $tt.empty().append( $clon ).stop().fadeTo(300,1);
    },120);
    $(this).data('timeout', t); 
},function(){
    $tt.stop().fadeTo(300,0,function(){
        $(this).hide();  
    });
    clearTimeout($(this).data('timeout'));
}); 
```

## HTML

（将`#tooltip`div 放在`body`标签之后）

```
<div id="tooltip"></div>

<div id="gallery_container">
    <div id="gallery"> 
        <div id="slider">
            <img src="" alt="" />
            <img src="" alt="" />
        </div> 
    </div>
    <div class="gal_left gal_btn">&#9664;</div>
    <div class="gal_right gal_btn">&#9654;</div>
</div> 
```

CSS：

```
/*GALLERY*/
#gallery_container{
    position:relative;
    margin:0 auto;
    width:600px;
    padding:0 30px; /*for the buttons */
    background:#eee;
    border-radius:5px;
    box-shadow: 0 2px 3px #888;
}
#gallery{
    position:relative;
    height:100px;
    width:600px;
    overflow:hidden;
}
#slider{
    position:absolute;
    left:0px;
    height:100px;
}
#slider img{
    height:100.999%; /* fixes some MOZ image resize inconsistencies */
    float:left;
    cursor:pointer;
    border-right:3px solid transparent; /* instead of margin that could leat to some wrong widths calculations. */
}
.gal_btn{
    position:absolute;
    top:0px;
    width:30px; /*the container padding */
    height:40px;
    padding:30px 0;
    text-align:center;
    font-size:30px;
    cursor:pointer;
}
.gal_left{left:0px;}
.gal_right{right:0px;}
/* end GALLERY */

/* TOOLTIP ADDON */
#tooltip{
    position:absolute;
    z-index:100;
    width:300px;
    padding:10px;
    background:#fff;
    background: rgba(255,255,255,0.3);
    box-shadow:0px 3px 6px -2px #111;
    display:none;
}
#tooltip *{
    width:100%;
    vertical-align:middle;
}
/* end TOOLTIP ADDON */ 
```

[希望你会喜欢它](http://jsbin.com/ozepod/6/edit/)，并且你学到了一些有用的*UI 设计*技巧。

顺便说一句，如果您想填充您的`ALT`属性（搜索引擎喜欢它！），您还可以获取该文本并使其显示在工具提示中，如下所示！：

## *[工具提示内带有文本的演示](http://jsbin.com/ozepod/9/)*

快乐编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:01:31.953

我不知道我是否正确理解你的问题。如果您将宽度设置为 .scroll-content div 足够宽，则图像不会转到“下一行”。所以一个解决方案是用css设置一个宽度。如果没有，您可以使用 jquery 确定所有图像的总宽度并将其提供给 .scroll-content div。[使用 jQuery 计算子元素的总宽度](https://stackoverflow.com/questions/1015669/calculate-total-width-of-children-with-jquery)

# php - 获取水晶报表中参数字段的字段值

> ID：11110172
> 
> 赞同：0
> 
> 时间：2012-06-19T22:04:08.870
> 
> 标签：php, object, com, crystal-reports, report

我正在用 PHP 构建一个通过 COM 对象访问 Crystal Reports 的应用程序。我的问题是，在我用 PHP 打开的报告中创建参数字段后，我不知道如何获取“值字段”。这是您设置连接参数字段的数据库字段的地方。我可以获取该字段的当前值或其名称，例如： $field->CurrentValue(); $field->名称(); 但我在任何地方都找不到获取“值字段”的选项。

![在此处输入图像描述](../Images/a90dc68072a711df78891bfa27ed63d8.png)

# java - Java：获取列表的所有连接 >

> ID：11110174
> 
> 赞同：1
> 
> 时间：2012-06-19T22:04:15.670
> 
> 标签：java, algorithm

我有一个`List<List<String>>` 我需要在第一个维度上获取所有可能连接的列表

```
[ [1,2 ], [1] , [3,4] ] 
```

应该给：

```
[ 113, 114, 213, 214 ] 
```

我正在尝试 2 个循环，就像它应该可能的那样。

这是我尝试过的：

```
private static List<String> constructIndexes(List<List<String>> indexList){
    List<String> index = new ArrayList<String>();

    String v="";

    for (int i=0; i< indexList.size(); i++){
        List<String> l =  indexList.get(i);
        for (int j=0; j<l.size(); j++){
            if (index.size()>0){
                for (int k=0; k<index.size(); k++){
                    index.set(k, index.get(k)+l.get(j));
                    // System.out.println(">");
                }
            } else {
                index.add(l.get(j));
            }

        }
    }

    return index;
} 
```

一些初始化代码：

```
List<List<String>> indexList = new ArrayList<List<String>>();

    List<String> l = new ArrayList<String>();
    l.add("1");
    l.add("2");
    indexList.add(l);
    l = new ArrayList<String>();
    l.add("1");
    indexList.add(l);
    l = new ArrayList<String>();
    l.add("3");
    l.add("4");
    indexList.add(l);

    System.out.println( constructIndexes(indexList)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:55:42.420

如何保留一些跟踪每个元素的索引的索引计数器，然后进行传统的向左进位，就像添加时一样，例如 9 + 1 = 10（向左进位，并设置 0）。

```
private static List<String> constructIndexes(List<List<String>> indexList) {
    List<String> index = new ArrayList<String>();
    int n = indexList.size();
    int[] counter = new int[n];
    int[] max = new int[n];
    int combinations = 1;
    for (int i = 0; i < n; i++) {
        max[i] = indexList.get(i).size();
        combinations *= max[i];
    }
    int nMinus1 = n - 1;
    for (int j = combinations; j > 0; j--) {
        StringBuilder builder = new StringBuilder();
        for (int i = 0; i < n; i++) {
            builder.append(indexList.get(i).get(counter[i]));
        }
        index.add(builder.toString());

        counter[nMinus1]++;
        for (int i = nMinus1; i >= 0; i--) {
            // overflow check
            if (counter[i] == max[i]) {
                if (i > 0) {
                    // carry to the left
                    counter[i] = 0;
                    counter[i - 1]++;
                }
            }
        }
    }
    return index; 
```

测试

```
List<List<String>> test = Arrays.asList(Arrays.asList("1", "2"),
        Arrays.asList("1"), Arrays.asList("3", "4"));
System.out.println(constructIndexes(test)); 
```

输出

```
[113, 114, 213, 214] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:21:49.957

由于外部列表（即列表列表）中的列表数量直到运行时才知道，因此您无法预先知道循环的数量。在这种情况下，您需要一个递归解决方案：

```
public static void combine(List<List<String>> data, int[] pos, int n, List<String> res) {
    if (n == pos.length) {
        StringBuilder b = new StringBuilder();
        for (int i = 0 ; i != pos.length ; i++) {
            b.append(data.get(i).get(pos[i]));
        }
        res.add(b.toString());
    } else {
        for (pos[n] = 0 ; pos[n] != data.get(n).size() ; pos[n]++) {
            combine(data, pos, n+1, res);
        }
    }
} 
```

以下是如何调用它：

```
List<List<String>> indexList = new ArrayList<List<String>>();
List<String> a = new ArrayList<String>();
a.add("1");
a.add("2");
List<String> b = new ArrayList<String>();
b.add("1");
List<String> c = new ArrayList<String>();
c.add("3");
c.add("4");
indexList.add(a);
indexList.add(b);
indexList.add(c);
List<String> res = new ArrayList<String>();
combine(indexList, new int[indexList.size()], 0, res);
for (String s : res) {
    System.out.println(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T07:08:51.783

这对你有用吗

```
 private <T> List<T> getNthCombination(List<List<T>> lists, int n) {

    List<T> nthCombination = new ArrayList<T>(lists.size());

    int nCarry = n;
    for (List<? extends T> list: lists) {
         int lSize = list.size();
         nthCombination.add(list.get(nCarry % lSize));
         nCarry /= lSize;
    }

    return nthCombination;
} 
```

当然，这是一个基本的组合问题，并且有一些库可以处理这类问题。

# google-app-engine - 仅针对会话的 GqlQuery 结果？

> ID：11110176
> 
> 赞同：1
> 
> 时间：2012-06-19T22:04:22.817
> 
> 标签：google-app-engine, gql, gqlquery

我的应用程序、Datastore、webapp2 和特定于表单的“响应”都在工作:) 但我需要加载页面而不显示以前访问者的查询结果。在他们提交表单后，我只需要当前表单提交者的查询结果。这是一个会话或标题解决方案，还是我可以编辑 GqlQuery 来完成这个？

```
messages = db.GqlQuery("SELECT * "
                                "FROM Visitor " 
                                "ORDER BY date DESC LIMIT 1") #obviously shows previous form submit
        for message in messages:
            if message.name == "" or message.mood == "":
                self.response.out.write("<div class='textright'>Type name and select.</div>")
                self.response.out.write("</body></html>")
            elif message.mood == "bad" and message.name != "":
                self.response.out.write("<body><html>")
                self.response.out.write("<div class='textright'>Stay the course 
```

^ ^ 最后一部分是我的“回复”，**只有在当前访问者提交表单后才会出现。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:40:31.887

我强烈建议您阅读[入门](https://developers.google.com/appengine/docs/python/gettingstartedpython27/)，尤其是[模板](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)部分，直到您了解它是如何工作的。

但是如果你只是想看看你的例子，试试这个（[阅读更多](https://developers.google.com/appengine/docs/python/tools/webapp/responseclass#Introduction)）：

```
class Process(webapp.RequestHandler):
  def post(self):
    name = self.request.get("name")
    mood = self.request.get("mood")

    if mood == "bad" and name != "": 
      self.response.out.write("<html><body>")
      self.response.out.write("<h1>Welcome to the Internet!</h1>")
      self.response.out.write("<p>My mood is %s and my name is %s</p>" % (mood, name))
      self.response.out.write("</body></html>")
    else:
      self.response.out.write("<html><body>")
      self.response.out.write("<h1>Welcome to the Internet anyway!</h1>")
      self.response.out.write("</body></html>") 
```

也永远不要`print`在您的 GAE 应用程序中使用，而是使用[记录器](https://developers.google.com/appengine/articles/logging)进行调试等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:40:25.410

如果您想为调试目的发出值，特别是如果您希望在`<html>`编写标签之前发出值，请尝试

```
self.response.out.write("<!-- name: %s -->" % self.request.get("name")) 
```

否则，浏览器可能会感到困惑。

`print`从处理程序永远不会达到您的期望。

在您的代码段中，您没有显示来自哪里`var7`和`var9`来自哪里。

> 我确实意识到 post/.put 表单值到 Datastore 会自动将用户重定向到新页面

我想你误会了。您还没有向我们展示您的代码在哪里执行`put()`或重定向。一个`post()`也不会自动执行。

你在看哪个教程？也许我们需要收紧模糊的措辞。

# jquery - 用于开发的 jQuery 重复（克隆？）HTML

> ID：11110179
> 
> 赞同：2
> 
> 时间：2012-06-19T22:04:46.513
> 
> 标签：jquery

我正在为具有大约 100 行或相同 HTML 的开发站点使用虚拟内容 - 即

```
<div class="container">
   <div class="row">
    Content
   </div>
   <div class="row">
    Content
   </div>
  <div class="row">
    Content
   </div>
   ... up to 100
</div> 
```

有没有一种方法可以使用 jQuery 克隆该 .row div 并将其添加到容器 x 次以用于开发目的，而不是手动粘贴到多行中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T22:07:46.327

您是否尝试过使用 jQuery 的[克隆方法？](http://api.jquery.com/clone/)

```
var row = $('.row');
for(var i = 0; i < 100; i++ )
   $('.container').append(row.clone()) 
```

# delphi - ATI ADL - AdapterInfo_Get

> ID：11110191
> 
> 赞同：0
> 
> 时间：2012-06-19T22:06:29.513
> 
> 标签：delphi, delphi-xe2, ati

晚上好，伙计们！

我目前正在尝试`Delphi pascal`翻译`ATI ADL`结构。简而言之，这允许我从系统中的 ATI/AMD GPU 检索信息，并可能控制它的各个方面（例如时钟和风扇速度）。

翻译取自[Delphi-Praxis（谷歌翻译）](http://translate.google.co.uk/translate?hl=en&sl=de&u=http://www.delphipraxis.net/151628-amd-ati-display-library-adl-sdk-3-0-fuer-pascal.html)或[Delphi-Praxis（未翻译）](http://www.delphipraxis.net/151628-amd-ati-display-library-adl-sdk-3-0-fuer-pascal.html)，并且提供的示例应用程序有效。我成功地将它转移到一个可视化/GUI 应用程序，但我无法从示例中扩展我的头脑。我希望通过支持 ATI GPU 来更新我现有的应用程序之一，但我遇到了麻烦。

我的主要目的是`strAdapterName`从`AdapterInfo`内部检索`adl_structures`。以前没有从头开始使用过这样的单元，我不确定如何在我的应用程序中定义类型本身。的记录结构`AdapterInfo`如下；

```
type
 AdapterInfo = record
  /// Size of the structure.
  iSize : integer;
  /// The ADL index handle. One GPU may be associated with one or two index handles
  iAdapterIndex : integer;
  /// The unique device ID associated with this adapter.
  strUDID : array [0..ADL_MAX_PATH] of char;
  /// The BUS number associated with this adapter.
  iBusNumber : integer;
  /// The driver number associated with this adapter.
  iDeviceNumber : integer;
  /// The function number.
  iFunctionNumber : integer;
  /// The vendor ID associated with this adapter.
  iVendorID : integer;
  /// Adapter name.
  strAdapterName : array [0..ADL_MAX_PATH] of char;
  /// Display name. For example, "\\Display0" for Windows or ":0:0" for Linux.
  strDisplayName : array [0..ADL_MAX_PATH] of char;
  /// Present or not; 1 if present and 0 if not present.
  iPresent : integer;
 // @}
end; 
```

老实说，我很难弄清楚我需要在`type`我的应用程序部分中定义什么，而且，要真正得到一些可行的东西。

关于 ADL 库的特定于 delphi 的信息很少（唯一的信息是上面的 Delphi-praxis 链接），虽然它的 SDK 格式有很好的记录，但不幸的是，我缺乏能够在语言之间进行翻译的知识（例如，我可以' t 读取`C`或`C++`编码并翻译什么数据类型变量）。

有任何想法吗？

# android - 未从 Eclipse 安装 apk 时，Android Map 不起作用

> ID：11110192
> 
> 赞同：2
> 
> 时间：2012-06-19T22:06:33.553
> 
> 标签：android, eclipse, map, android-mapview

在一个项目中，当我直接通过 Eclipse IDE 在手机上安装应用程序时，我可以看到 Map 运行良好。

但是，如果我通过电子邮件将 apk 发送给某人并将其安装在设备上，尽管该应用程序可以正常工作，但他们无法看到地图，而只能看到一个空白网格！

我们在项目中已经有了 MapKey。对于非市场应用程序，如果该应用程序不是通过我的系统上的 Eclipse IDE 安装的，我如何显示地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:37:13.503

每个 api 密钥都与该证书相关联。当您在 Eclipse 中运行项目时，它会使用您的调试密钥库。当您导出它时，您很可能正在使用不同的密钥库，因此您的地图 API 密钥不再有效。获取您用于签署导出的 apk 的密钥库并获取新的 api 密钥。在开发和发布应用程序时，您需要来回交换地图 API 密钥。希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T09:16:24.870

“当您导出它时，您很可能正在使用不同的密钥库，因此您的地图 API 密钥不再有效。”

不完全正确，您可以从 Eclipse 导出，然后用您的密钥签署地图。

所以完整的算法是：

```
1\. Export with Eclipse

2\. Create key - remember path (say mypath/myawesomeapp.key) 
```

然后打开终端并使用密钥转到文件夹并输入终端

```
keytool -list -keystore myawesomeappkey.key 
```

[然后您在页面https://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)中获得证书指纹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T00:55:46.220

您的 Google Maps API 密钥可能与您用于签署应用程序的证书不匹配，因为如果您使用不同的密钥来签署开发版本和发布版本，您将需要为每个证书获取单独的 Maps API 密钥。

请查看此页面以了解如何为 Google Maps API 生成正确的 API 密钥：[https ://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

# regex - jmeter 从响应数据中获取值

> ID：11110194
> 
> 赞同：2
> 
> 时间：2012-06-19T22:06:51.083
> 
> 标签：regex, xpath, jmeter, beanshell, extractor

我有一个关于从 Jmeter 中的 html 响应数据中获取某个值的问题。我一直在尝试正则表达式和 xpath 提取器（见下文），但没有运气。

这是我收到的响应数据的一部分：

```
<table border="0" cellpadding="2" cellspacing="1" style="border-collapse: collapse" id="AutoNumber2" bordercolorlight="#999999" bordercolordark="#999999" width="100%">
   <tr> 
      <td class="head" align="center" colspan="2">Routing Sheet</td>
   </tr>

   <tr class="altrow"> 
      <td align="right" width="50%" class="formtext">Today's Date:</td>
      <td valign="top" width="50%" class="formtext">06/19/2012</td>
   </tr>

   <tr class="altrow"> 
      <td align="right" width="50%" class="formtext"> HCSC Received Date:</td>
      <td valign="top" width="50%" class="formtext">06/19/2012</td>
   </tr>

   <tr class="tablerow"> 
      <td align="right" width="50%" class="formtext"> Package Log Date:</td>
      <td valign="top" width="50%" class="formtext">06/19/2012 04:21PM</td>
   </tr>

   <tr class="altrow"> 
      <td align="right" width="50%" class="formtext"> Group Specialist:</td>   
      <td valign="top" width="50%" class="formtext">WATTS, JOHN</td>            
   </tr>

   <tr class="tablerow"> 
      <td align="right" width="50%" class="formtext"> Case Underwriter:</td>
      <td valign="top" width="50%" class="formtext">N/A</td>           
   </tr>    

   <tr class="altrow"> 
       <td align="right" width="50%" class="formtext"> Medical Underwriter:</td>  
       <td valign="top" width="50%" class="formtext">N/A</td>    
   </tr>

   <tr class="tablerow"> 
       <td align="right" width="50%" class="formtext">Case Number:</td>                           
       <td valign="top" width="50%" class="formtext">7402628</td>
   </tr> 
```

我正在尝试获取案件编号。我一直在尝试正则表达式提取器：

```
Case Number:</td><td valign="top" width="50%" class="formtext">(.+?)</td> 
```

但是得到了一个空值。

对于 xpath 提取器，我尝试了这个：

```
//table[@id='AutoNumber2']/tbody/tr[8]/td[2] 
```

但它也不起作用。我一直在考虑使用 Beanshell 将源代码作为字符串抓取并解析数字。有没有更好的方法来获取这个数字？以及如何使用 beanshell 来抓取响应数据的源代码？我尝试使用 /html 的 xpath，但没有运气。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T13:30:55.223

试试这个，我在你的样本上测试了它，它可以工作：

![在此处输入图像描述](../Images/097ce33f9b096556efe9844052373bb6.png)

让我知道这是否适合你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-30T20:45:56.657

试试这个 xpath：

```
//table[@id='AutoNumber2']/tr[8]/td[2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T17:01:39.213

1.  如果您使用[XPath Extractor](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)解析 HTML（不是 XML！..）响应，请确保选中**Use Tidy（容错解析器）**选项。

2.  您的 xpath 查询应该返回您要提取的值。
    优化您的 xpath 查询，例如

    `//table[@id='AutoNumber2']/tbody/tr[td/text()='Case Number:']/td[2]/text()`

3.  要使用 Beanshell 进行解析，请查看：[Using jmeter variables in xpath extractor](https://stackoverflow.com/questions/9192884/using-jmeter-variables-in-xpath-extractor)。

4.  您可以首先使用任何其他工具测试您的 xpath 查询 - 至少是 Firefox 插件：

    *   [XPath 检查器](https://addons.mozilla.org/en-US/firefox/addon/xpath-checker/)
    *   [XPather](https://addons.mozilla.org/en-US/firefox/addon/xpather/)
    *   [XPath 查找器](https://addons.mozilla.org/en-US/firefox/addon/xpath-finder/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:46:18.793

您可以使用 ViewResultsTree 侦听器组件在实际响应数据上测试和调整正则表达式。

要了解运行时发生的情况，请使用 Debug 组件。

乍一看，我发现它不匹配，因为您的正则表达式中缺少新行（以下`Case Number:</td>`）。

有关模拟新行的特殊字符，请参见[此处](http://www.regular-expressions.info/reference.html)。

# javascript - jasmine.Clock VS sinon.clock 我的 jasmin.Clock.useMock() 用法有什么问题？

> ID：11110195
> 
> 赞同：2
> 
> 时间：2012-06-19T22:06:51.167
> 
> 标签：javascript, tdd, coffeescript, jasmine, sinon

我只是尝试用茉莉花在 javascript/coffeescript 中进行单元测试，非常好。

我一直在尝试使用 jasmine.Clock.Mock() 及时推进并触发 setTimeout 回调。

唉 jasmine.Clock.tick(1001) 似乎没有任何效果！然后我发现 sinon.js 有自己的时间模拟，使用这个就可以了。我想了解为什么。

这是一个要测试的虚拟 jquery 插件：

```
dummy_method = function(callback) {
  fire_callback = function() {
    callback();
  }
  setTimeout("fire_callback()", 1000);
} 
```

这是规格的两个版本：

```
# Working test (spy was called as expected), using sinon FakeTimers
 describe "jQuery.fn.countdown", ->
   beforeEach () ->
     this.clock = sinon.useFakeTimers();
   afterEach () ->
     this.clock.restore()
   it 'should fireup the callback', ->
     countdown_callback = jasmine.createSpy('countdown_callback');

     dummy_method(countdown_callback)
     this.clock.tick(1001)
     expect(countdown_callback).toHaveBeenCalled()

# Non-working test (spy is never called), using jasmine Clock Mock
describe "jQuery.fn.countdown", ->
  beforeEach () ->
    jasmine.Clock.useMock()
  it 'should fireup the callback', ->
    countdown_callback = jasmine.createSpy('countdown_callback');

    dummy_method(countdown_callback)
    jasmine.Clock.tick(1001)
    expect(countdown_callback).toHaveBeenCalled() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T20:07:49.893

Jasmine 只是尝试调用一个函数，其中 sinon 测试传递的参数是函数还是字符串。如果它是一个字符串，它会调用`eval`.

**茉莉花：**

```
jasmine.getGlobal().setTimeout = function(funcToCall, millis) {
  if (jasmine.Clock.installed.setTimeout.apply) {
    return jasmine.Clock.installed.setTimeout.apply(this, arguments);
  } else {
    return jasmine.Clock.installed.setTimeout(funcToCall, millis);
  }
}; 
```

**诗乃：**

```
if (typeof timer.func == "function") {
    timer.func.apply(null, timer.invokeArgs);
} else {
    eval(timer.func);
} 
```

所以这将通过 Jasmin 测试

```
setTimeout(fire_callback, 1000); 
```

虽然这会失败

```
setTimeout("fire_callback()", 1000); 
```

# java - Joda-Time DateTimeFormatter：获得正确的输出

> ID：11110199
> 
> 赞同：0
> 
> 时间：2012-06-19T22:07:12.800
> 
> 标签：java, jodatime

我需要将[Joda-Time](http://www.joda.org/joda-time/) [DateTime](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)转换为字符串，格式如下：

> 2011 年 1 月 1 日星期六 00:00:00

我正在使用这段代码：

```
DateTimeFormatter f = DateTimeFormat.forPattern("E, d MMM yyyy HH:mm:ss");
f.withLocale(Locale.US);
System.out.println(DateTime.now().toString(f)); 
```

然而，我的输出是：

> 哇，6 月 20 日。2012 00:03:31

所以问题是：

*   输出是荷兰语而不是英语（'wo' 代表 'wed'）
*   这个月有一个时期

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:10:43.250

[DateTimeFormatter.withLocale](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormatter.html#withLocale%28java.util.Locale%29)返回一个新的 DateTimeFormatter。所以你需要这样做：

```
f = f.withLocale(Locale.US); 
```

或者（等效地）：

```
DateTimeFormatter f = DateTimeFormat.forPattern("E, d MMM yyyy HH:mm:ss").withLocale(Locale.US); 
```

# css - 容器或内容项上的 CSS3 边框半径？

> ID：11110200
> 
> 赞同：1
> 
> 时间：2012-06-19T22:07:13.313
> 
> 标签：css

在这个小提琴[http://jsfiddle.net/dAHqe/2/](http://jsfiddle.net/dAHqe/2/)中，我为列表的 2 个主要用途（我已经看到）创建了示例`border-radius`。

1.  将`border-radius`（因此`background-color`）应用于容器（a`div`或 a `ul`）。
2.  通过and伪类应用`border-radius`（因此`background-color`）到第一个和最后一个内容项（`li`s 或嵌套`div`s） 。`:first-child``:last-child`

乍一看，第一种方式（将其应用于容器）看起来要简洁得多，但我一直看到第二种方式。

使用第二种方式有什么好的理由（即可扩展性）吗？

**更新：**这是一个移动应用程序，所以我不需要`:hover`伪类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:26:20.067

就个人而言，在您给出的示例中，我总是选择简单的选项并将其放在容器上。

但是，以其他方式执行此操作的原因：

*   可能你没有容器，也无法更改代码来添加容器。

*   您有一些理由希望能够灵活地更改单个列表项，而使用单个容器是行不通的。例如，也许您想让它们在悬停时半透明？

*   您必须解决一个尴尬的 HTML 结构。不久前我遇到过这样的情况，我必须在复杂表格中的单元格中添加圆角。有问题的单元格是更大表格中的副标题行和列，但它们全部组合在一起的方式意味着我必须将圆角单独放入单独的单元格中。这既繁琐又尴尬，但最终看起来他们想要它。

*   编码人员不太了解 CSS，只是从其他地方以这种方式编写它。

这些是我能想到的唯一原因。但我怀疑大多数情况都属于其中一种。

希望有帮助。

# php - 将发布的数据插入 XML

> ID：11110202
> 
> 赞同：-1
> 
> 时间：2012-06-19T22:07:21.610
> 
> 标签：php, xml

我希望将 PHP 表单中的数据插入 XML 文档并在浏览器中打印。有人可以指出我正确的方向吗？

类似于：

形式：

```
<form name="createDoc" action="createDocument.php" method="post">
  <input name="name" type="text" id="name"> 
</form> 
```

XML:

```
<?xml version="1.0" encoding="UTF-8"?>
<doc>
    <article id="0001">
        <title>My book</title>
    <para>Lorem ipsum dolor sit amet, **[name here]** consectetur adipiscing elit. Phasellus consequat purus ac tellus imperdiet ullamcorper.</para>
    </article>
</doc> 
```

结果：

Lorem ipsum dolor sit amet，**Joh Doe** consectetur adipiscing elit。Phasellus consequat purus ac tellus imperdiet ullamcorper。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:09:53.973

最快的方法是将 XML 放入一个字符串中，然后使用

```
str_replace("**[name here]**",$_POST[name],$xmlstr); 
```

将来，您可能想发布您已经尝试过的内容。我们在这里**帮助**您找出问题，而不是为您解决问题。

# android - Android NFC（从 ISO-14443 Type B 标签到手机的 ATQB）

> ID：11110211
> 
> 赞同：1
> 
> 时间：2012-06-19T22:08:15.527
> 
> 标签：android, tags, protocols, nfc, iso

我的目标是让 Android 手机（三星 Galaxy Nexus）通过 NFC 在仿真模式（模拟 ISO-14443 B 型标签）下与 TI TRF7970A 卡通信。
我知道 PCD（Android 手机）发送一个带有给定 AFI 的“REQB”，然后哪个 PICC（在我的情况下只有 PICC 是 TI TRF7970 卡）具有匹配的 AFI 将发送一个“ATQB”回聚碳酸酯。

在某些 TRF7970A 固件中，“ATQB”响应设置如下：

```
0x50;   // 
//PUPI   
0x80;   //  PUPI_0  
0x12;   //  PUPI_1  
0x34;   //  PUPI_2  
0x56;   //  PUPI_3  
    //Application DATA  
0x40;   //  APP_0   AFI Telecommunication (Telephone,GSM) All Sub families 1-F    
0xE2;   //  APP_1   CRC_B of the AID (multibyte application identifier code which identifies an application provider or issuer and indicates if the application provider is registered with ISO)  
0xAF;   //  APP_2   CRC_B of the AID  
0x11;   //  APP_3   # of applications (1)  
    //Protocol DATA  
0x80;   //  Data rate capabilities (Same bit rate from PCD to PICC and from PICC to PCD compulsory)  
0x71;   //  Max Frames (128 bytes) / Protocol Type (supports PICC ISO 14443-4)  
0x85;   //  FWI (0b1000 - 8192 ETUs or 77328.6 us) / ADC (0b01 - determines what APP_0-3 are if 0b00 then App data can be anything) / FO (0b01 - CID Supported - used for identification of multiple cards in the Active state) 
```

此“ATQB”具有 PCD（Android 电话）自动启动带有 URL“http://www.Cisco Auth Complete”的 Web 浏览器。

问题：
（1）哪个字段告诉手机自动启动网络浏览器？如何更改该字段以便我可以手动选择哪个应用程序对意图起作用？

我曾尝试在网上查找以了解如何操作这些字段，但没有运气。
我用我的 Android 手机读取了 3 个 B 型 14443-4 智能卡 (MAXIM-MAX66020k-00AA+)，“ATQB”如下：

```
Card 1      Card 2      Card 3

0x50        0x50        0x50  
                    //PUPI  
0xd8        0x99        0x1a  
0x60        0x5c        0x61  
0x02        0x02        0x02  
0x00        0x00        0x00  
                    //Application Data 
0x10        0x20        0x10  
0x10        0x00        0x10  
0x11        0x2b        0x11  
0x11        0xe0        0x11  
                    //Protocol Data  
0x00        0x00        0x00    106Kbits/sec  
0x00        0x00        0x00    16 bytes / Not type B -4 complient)  
0x00        0x00        0x00    32 ETUs / Application is proprietary / Nad "nor" CID are supported 
```

我尝试使用 TI TRF7970A 卡发送这些确切的 ATQB 消息，但 Android 手机仍然没有对“ATQB”响应采取行动。

问题：
（2）你能指出为什么最后三个“ATQB”中的任何一个都不会被排除在外的原因吗？
(3) 哪些合法的“ATQB”在发送到我的 Android 手机时会创建一个意图？
(4) 是否有我可以遵循的规则，以便我的 android 手机始终在我从 TI TRF7970A 响应的“ATQB”上创建意图？

如果您能指导我找到可以解释任何这些的来源，将不胜感激。

提前致谢！
-德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:17:20.213

我想你找错地方了。TRF7970A 可能正在模拟[NFC Forum Type 4 标签](http://www.nfc-forum.org/specs/spec_list/#tagtypes)，其中包含 NDEF 消息。[在http://developer.android.com/guide/topics/nfc/nfc.html](http://developer.android.com/guide/topics/nfc/nfc.html)中解释了这如何导致意图

# java - 考虑到我已经知道预期的 Java 类型，我该如何转换对象？

> ID：11110217
> 
> 赞同：1
> 
> 时间：2012-06-19T22:08:35.317
> 
> 标签：java, casting

考虑到 Java 类的这一部分，

```
private List<Object> components = new ArrayList<Object>();

private A a;
private B b;
private C c;

add(a, b, c);

public void add(Object... component){
    for(Object o : component) {
        components.add((CAST)o);
    }

} 
```

我想将我的 Object o 按好类型投到列表中。

这里的预期结果将是`A a, B b, C c`在我的列表中。

我尝试使用 getClass()，但没有编译。考虑到我已经知道预期的 Java 类型，我如何向上转换对象？

**编辑：**

我需要添加 A 类型的第一个对象，B 类型的第二个对象，C 类型的第二个对象，...（我不知道要添加的项目数）如果是一个列表，以便我能够获取包含正确键入的 N 个对象的列表。（gtt(0) 将输入为 A，get(1) 输入为 B，get(2) 输入为 C）

因为我不知道对象的数量，而且我最初也不知道对象的类型，所以我将我的列表声明为 Object。

我创建了一个方法（`add`在这种情况下）。它 varargs 将帮助我在集合中循环，因为我不知道 args 的数量。

我只想在我的可变参数中获取第一个对象、第二个对象和第三个对象（依此类推），并将其简单地推送到我的列表中，但不是作为对象类型，如 A、B 或 C，取决于我收到了什么！

我不知道它是否更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:10:12.797

您的列表已经接受对象

```
private List<Object> components = new ArrayList<Object>(); 
```

为什么你需要向上转型？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:11:42.567

首先，在这种情况下，你永远不能上当。您真正需要向上转换的唯一地方是当您访问特定于 C 的方法时，而不是在 B 或 A 中；或特定于不在 A 中的 B。（或不在 Object 中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:30:22.453

您似乎误解了对象的运行时类型是如何工作的。当您将“A”放入列表时，它不会停止成为“A”并成为对象。如果您稍后将其取出并将其转换回“A”，它仍然是原始运行时类型。在将其放入列表之前对其进行投射没有任何好处。

考虑这个

```
Object str = "FOO";
List<Object> list = new LinkedList<Object>();
list.add(str);
String str1 = (String) list.get(0);
System.out.println(str1.length()); 
```

打印“3”。“FOO”从未停止成为字符串，因为指向它的指针的引用类型是对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T22:30:45.460

老实说，我同意以上所有人的观点，在您给出的示例中向上转换没有多大意义。由于您声明列表将包含对象，因此在从列表中检索对象时必须再次进行强制转换。但是，总有可以使用的类型比较运算符**instanceof 。**

```
public void add(Object... component){
    for(Object o : component) {
        if(o instanceof CAST)
            components.add((CAST)o);
    }
} 
```

# r - 提取数据框中每个元素的前 n 个值的索引

> ID：11110218
> 
> 赞同：3
> 
> 时间：2012-06-19T22:08:42.953
> 
> 标签：r, sorting, dataframe, plyr

我有 4 名学生在数据框中回答在线问卷的时间戳条目。第一列是时间，第二列是学生的 id (id: 1,2,3,4)。下面是一个模拟的数据框：

```
DF <- data.frame(cbind(Time=1:60, ID=sample(1:4, 60, replace=T))) 
```

我正在尝试为每个学生提取前 5 个条目的索引以提取条目的时间戳。这应该返回一个包含 20 个值的数组（4 个学生 X 前 5 个条目）。

我尝试使用 rank()、order() 和 ddply() 的组合，但没有成功。有什么好的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:42:43.240

The answer mplourde gave in the comment is great, but you can do this with `plyr` too:

```
library(plyr)
ddply(DF, .(ID), function(x) data.frame(Time_sorted=tail(sort(x$Time)))) 
```

and the `by` version:

```
do.call(rbind, by(DF, DF$ID, function(x) tail(x[order(x$Time),]))) 
```

# php - 用户确认数据库更新 - php + Ajax

> ID：11110228
> 
> 赞同：0
> 
> 时间：2012-06-19T22:09:43.787
> 
> 标签：php, javascript, ajax

我有一个`AJAX`POST 运行一个更新的 php 脚本`MySQL`。该页面是 Joomla 网站的一部分。它是返回 HTML 到页面中 div 的一系列 POSTS 的一部分。这一切都很好，但我目前使用一个简单的回声语句说“记录更新！” 等等但是我几乎无法控制这条消息的去向——当用户移动到另一条记录时，我不知道如何删除它——我希望这条消息消失。我刚刚意识到由 Ajax 创建的 HTML 是“动态的”——也就是说，当您查看源代码时看不到它。所以不可能使用 Javascript 和 DOM 来改变它。我想我想做的是在 php 中运行一个 Javascript 函数——但这也不起作用！

这里的任何帮助表示赞赏 - 或者提供数据库更新确认消息的替代方法，然后当用户移动以处理另一条记录时可以将其删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:16:37.710

`echo`当您使用 ajax 时，php 中的语句不会显示给用户，除非您自己在 ajax 成功函数中使用 php 输出。

因此，您只需要删除将 ajax 返回数据添加到 dom / 屏幕的 javascript 部分（以防出现警报）。

至于另一种解决方案，您可以使用静态固定的状态栏，该状态栏显示在更新中并在几秒钟后滑开。我不知道您是否使用了 javascript 库，但使用 jQuery 会很容易实现。

# mysql - MySQL中将多个字段组合成一个清晰的标签

> ID：11110229
> 
> 赞同：0
> 
> 时间：2012-06-19T22:09:45.277
> 
> 标签：mysql, sql, case

我正在尝试将多个列值组合为 1，然后使用汇总表的新列清楚地标记它们。请参阅下面的示例。

例子：

```
(select
  id, size, size2
from
  table1
where
  date = curdate()
)a

union all

(select
  id, size, size2
from
  table2
where
  date = curdate()
)b 
```

输出：

身份证尺寸 size2

1 23 47
2 25 33

我如何将 size 和 size2 合并到一个列中，并有另一个字段来标记它们？

输出如下所示：

ID 值类型

1 23 尺寸

2 47 尺寸2

3 25 尺寸

4 33 尺寸2

我在想这应该是某种类型的案例陈述，但我似乎无法完全理解它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:28:08.873

你可以写一个 4 部分的联合。新的 id 从 table1/2.ids 交错：

```
(SELECT id*2+0, size,  'size'  FROM table1 WHERE date = curdate())
UNION ALL
(SELECT id*2+0, size2, 'size2' FROM table1 WHERE date = curdate())
UNION ALL
(SELECT id*2+1, size,  'size'  FROM table2 WHERE date = curdate())
UNION ALL
(SELECT id*2+1, size2, 'size2' FROM table2 WHERE date = curdate()) 
```

# sql - sql查询的问题

> ID：11110230
> 
> 赞同：0
> 
> 时间：2012-06-19T22:09:46.843
> 
> 标签：sql, debugging, query-optimization, aggregate-functions

我有一张供应商表和产品表。我需要删除一个供应商，然后将所有产品及其数量添加到另一个供应商。例如

表供应商。我删除供应商 1

```
sup1 idsup1
sup2 idsup2
sup3 idsup3 
```

表产品。（idpr - 外键）

```
idpr1 amount1 idsup1
idpr1 amount2 idsup3
idpr1 amount3 idsup2
idpr2 amount4 idsup2 
```

我需要将所有供应商 1 的产品添加到供应商 2，所以这张表会是这样的

```
idpr1 amount2 idsup3
idpr1 amount3+amount1 idsup2 
idpr2 amount4 idsup2 
```

但是怎么做呢？我不明白如何对具有相同 idpr 的所有产品求和。我为所有带有 idsup1 的记录设置了 idsup2。但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T01:18:59.663

> 我不明白如何对具有相同 idpr 的所有产品求和。

在`WHERE`子句中使用带有函数中的列名的子查询`SUM`，如下例所示：

```
SELECT 'site://tags/' + TargetTagName + '/synonyms|' + TargetTagName AS [VOTE4ME], Count(SourceTagName) AS [SYNONYMS]
FROM TagSynonyms TS
WHERE
ApprovalDate IS NULL
AND
(SELECT SUM(
 CASE V.VoteTypeId 
 WHEN 2 THEN 1 
 WHEN 3 THEN -1 
 END) 
 FROM TAGS T, PostTags Pt, Posts P, Votes V, VoteTypes Vt
 WHERE T.Id = Pt.TagId
 AND P.Id = V.PostId
 AND Pt.PostId = P.ParentId
 AND Vt.Id = V.VoteTypeId
 AND T.TagName = TargetTagName
 AND P.OwnerUserId = ##userid##
 AND P.CommunityOwnedDate IS NULL
) > 4
GROUP BY TargetTagName 
```

**参考**

*   [我的允许投票的标签同义词列表](https://data.stackexchange.com/stackoverflow/query/159698/my-list-of-tag-synonyms-which-permit-voting)

# iphone - 带有按钮的自定义 UINavigationController

> ID：11110238
> 
> 赞同：0
> 
> 时间：2012-06-19T22:10:33.397
> 
> 标签：iphone, ios, uinavigationcontroller

我希望 NavigationBar 的行为相同，但想改变它的外观。我在网上找到了很多方法，但我不确定哪一种是 iOS 5.0 的最佳结果。导航栏将如下所示：

![在此处输入图像描述](../Images/e53efa06c56c53906dfe8e7193115049.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:13:24.487

由于您的目标是 iOS 5，我*肯定*会使用[Appearance 代理](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIAppearance)[自定义 UINavigationBar](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationBar_Class/Reference/UINavigationBar.html#//apple_ref/doc/uid/TP40006887-CH3-SW16)。然后，您可以轻松设置自己的图像，它们将应用于您应用程序中的所有导航栏，而无需子类化。

您还可以通过[自定义 UIBarButtonItem](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40007519-CH3-SW52)来自定义导航栏中的按钮。有类似`backButtonBackgroundImageForState:barMetrics:`后退按钮和`backgroundImageForState:barMetrics:`其他按钮的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T05:09:42.707

我也一直在寻找这个东西，也没有找到一个简单的解决方案！感谢我的一个朋友和示例代码，我们使用自定义导航栏类​​制作了它，该类可以导入到任何视图控制器类中。

`.h`文件：

```
#import <UIKit/UIKit.h>

@interface NATitleBar : UIView {
    NSInteger tag;
}
@property ( nonatomic) IBOutlet UIImageView *imageView;
@property ( nonatomic) IBOutlet UILabel *label;
@property ( nonatomic) IBOutlet UIButton *back;
@property ( nonatomic) IBOutlet UIButton *home;

/**
 * Supports UIButton-style adding targets
 */

@end 
```

`.m`文件：

```
#import "NATitleBar.h"

@implementation NATitleBar
@synthesize imageView;
@synthesize label;
@synthesize back;
@synthesize home;

- (id)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];

if (self) {
    NSArray *views = [[NSBundle mainBundle] loadNibNamed:@"NATitleBar" owner:self options:nil];
    [self addSubview:[views objectAtIndex:0]];

    // customize the view a bit
    //self.imageView.layer.borderWidth = 1.0;
    //self.imageView.layer.borderColor = [UIColor colorWithWhite:0.4 alpha:0.4].CGColor;
    //self.imageView.clipsToBounds = YES;
    //self.imageView.layer.cornerRadius = 5.0;
}

return self;
}

#pragma mark - Overriden Setters / Getters

- (void)setTag:(NSInteger)aTag {
self.back.tag = aTag;
}

- (NSInteger)tag {
return self.back.tag;
}

@end 
```

然后对于 Nib 文件，我们有以下内容：

![在此处输入图像描述](../Images/f7e427c09a7caacb64073be12f84785b.png)

您可以在 Nib 文件中添加或删除图像，以根据需要制作 GUI。

现在您必须将该类导入您希望使用自定义导航控制器拥有的任何视图控制器，并定义两种方法（或者一种，如果您不想要“主页”按钮。在`.h`：

```
- (void) back; 
```

在`.m`：

```
- (void)back {
    [self.navigationController popViewControllerAnimated:YES];
} 
```

# html - WordPress页脚不在底部

> ID：11110240
> 
> 赞同：0
> 
> 时间：2012-06-19T22:10:41.837
> 
> 标签：html, css, wordpress, wordpress-theming

我第一次编辑 WordPress 网站，现在我遇到了主要内容 div 溢出页脚的问题，我不知道如何处理这个问题。这是网站：

www.twazzle.co.uk/twazzle/wordpress/

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:33:36.213

您的 #content 和 #primary 元素都具有绝对位置，因此它们的尺寸不会影响页面上其他任何内容的布局，当它们增长/收缩时，其他元素不会增长/收缩以适应。首先将它们都更改为位置：相对或静态，这会由于 css 的编写方式而导致其他一些事情中断，但是您必须以此为起点来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:32:56.913

你这里有几个问题。一，您在没有浮动或清除的块内浮动元素。两个（这是你的主要问题）你的`#content`div 是`position:absolute`但没有别的。使用绝对定位，您的 div 将忽略其他导致重叠和其他混乱。要修复，在制作元素之前使其`position:absolute`包含块元素`position:relative`。您还需要解决浮动问题。

```
#main { 
    overflow: hidden; //this tells it to contain floated elements inside it
    }
#primary {
    float: left;
    margin: 10px;
    position: relative; //this will contain nested absolutely positioned elements
    width: 999px;
    } 
```

# mysql - 在 ActiveRecord 中连接列：在 rails 中调用

> ID：11110243
> 
> 赞同：1
> 
> 时间：2012-06-19T22:10:46.987
> 
> 标签：mysql, ruby-on-rails, activerecord

我正在尝试查询数据库，因为[Rails gem rails3-jquery-autocomplete: How do I query multiple fields](https://stackoverflow.com/questions/3866391/rails-gem-rails3-jquery-autocomplete-how-do-i-query-multiple-fields/11109088#11109088)

```
User.select("first_name, last_name, login, id").where(["CONCAT_WS(' ', first_name, last_name, login) LIKE ?", "%#{parameters[:term]}%"]) 
```

这对于我需要它做的事情很好，但我觉得在我的 rails 应用程序中有明确的 MYSQL 代码很脏，我想知道是否有一种与数据库无关的方式来制定上述查询？如果没有，是否存在不支持某种连接功能的数据库？

我不能使用虚拟属性，因为 gem 需要查询数据库。

或者，我打算向 User 模型本身添加一个名为 full_name 的额外列，并使用虚拟属性将其分隔为 first_name 和 last_name，但我更喜欢另一种解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:00:31.980

我会按照你的方式去做。在我看来，虚拟属性是一个很好的解决方案。因此，您可以将数据库与应用程序逻辑分离。考虑改变你的数据库后端。

恕我直言

否则 - 选择字段中的连接是否具有别名工作？

像 concate( firstname, ' ', ... ) as virtualfieldname ...？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T20:32:33.167

感谢 wkaha 提供建议。事实证明这是一个非常愚蠢的问题。在阅读了一些 ActiveRecord 之后，我了解到我无法使用它来使用 LIKE 修饰符进行查询，这对我来说至关重要，所以我保持原样。如果我最终切换到 Postgres，我会将其更改为管道连接。

# wordpress - WP 高亮显示 .current_page_item

> ID：11110244
> 
> 赞同：0
> 
> 时间：2012-06-19T22:11:05.893
> 
> 标签：wordpress

所以我有一个客户要求我在他们建立的网站上突出显示 current_page_item。我通常对此没有任何问题，但我只在构建网站和菜单结构时使用过它——不知道为什么它在这个网站上不起作用。

[http://scratchbranding.jordanq.ca/capabilities/design/brand-identity](http://scratchbranding.jordanq.ca/capabilities/design/brand-identity)

在设计下的侧边栏菜单中，页面定义如下： `#rightcol li a { text-align:left; color:#fff; font-family: 'Lato', sans-serif; font-size:13px; padding-left:20px; margin:0; text-transform:uppercase; line-height:2em;}`

所以我想我只需要添加这样的一行：

`#rightcol li.current_page_item a { font-weight:bold; }`

但这不起作用。

非常感谢任何见解！干杯，

# linux - inotify FD - 为什么限制每个用户 id 而不是每个进程？

> ID：11110245
> 
> 赞同：7
> 
> 时间：2012-06-19T22:11:06.563
> 
> 标签：linux, linux-kernel, inotify

在 Linux 中，进程可以打开的 inotify 实例数的限制受**/proc/sys/fs/inotify/max_user_instances中指定的每个用户 ID 最大数的限制**

自然的事情是限制每个进程，例如文件 FD。由于 inotify FD 受用户 ID 的限制，因此它更有可能达到服务器上的限制，许多进程可能以相同的用户 ID 运行。但我想这一定是有原因的？

这是一个编程问题，因为我必须在我的代码中使用 inotify 并希望为系统设置正确的限制。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-03T16:13:54.280

原因是为了防止非 root 用户通过查看大量使用`inotify`. `inotify`结构需要不可忽略的内存量来维护（并且不能交换到磁盘），因此需要对非特权可以提交的数量进行一些限制。

`epoll`曾经有类似的限制（`max_user_instances`和`max_user_watches`），尽管最后`max_user_instances`被删除了，`max_user_watches`只是设置为内存的 4%。

可能应该为 inotify 提交一个类似的补丁，但到目前为止还没有。

由于完全不同的原因，文件描述符在每个进程的基础上受到限制：当进程启动时，分配了一个文件描述符表，其大小与允许的最大文件描述符数成正比。保持这个尽可能小可以减少每个进程的内存开销。

# json - 对 MailChimp API 的 json 调用不起作用

> ID：11110252
> 
> 赞同：0
> 
> 时间：2012-06-19T22:12:09.863
> 
> 标签：json, mailchimp

我用这个 json 数据调用 API 的 ListSubscribe 部分：

{"apikey":"XXX-us2","id":"XXXXX","email_address":"joe@gmail.com","double_optin":false,"merge_vars":{"GROUPINGS":{"name" :"Lectures","groups":"Lecture"}}}

我回来了：

```
{"error":"\"L\" is not a valid Interest Grouping id for the list: members-announ
ce","code":270} 
```

但是，当我使用 id 而不是 name 时，我得到几乎相同的响应（文档说两者都是可用的）。如果我省略 GROUPINGS 调用，我可以让事情正常进行。

以下是分组的枚举： 结果：

```
[{"id":11941,"name":"Lectures","form_field":"hidden","display_order":"0","groups
":[{"bit":"1","name":"Transit of Venus Wellington 12 June 2012","display_order":
"1","subscribers":1},{"bit":"2","name":"Transit of Venus Auckland 14 June 2012",
"display_order":"2","subscribers":1},{"bit":"4","name":"Lecture","display_order"
:"3","subscribers":0}]}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:26:17.147

只是为您做的快速测试。我昨天用c#遇到了这个问题。我的错误在于分组结构。

你试过这个吗？

```
"merge_vars":{"GROUPINGS": [{"name":"Lectures","groups":"Lecture"}]} 
```

我没有测试，因为我的项目不需要：这是我的 c# 经验的一个简单推理。

希望有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T07:44:56.397

这是我为 listUpdateMember 测试过的示例 json 编码，并且可以正常工作。

与@Sandrous 相同的布局，但我想我会演示在一个组中命名多个兴趣的方法，以及完整的 json 编码。

`{"apikey":"xxxx","id":"xxx","email_address":"xxx","merge_vars":{"GROUPINGS":[{"name":"Title","groups":"group1,group2,group3"}]}}`

# python - difflib python 格式化

> ID：11110253
> 
> 赞同：2
> 
> 时间：2012-06-19T22:12:13.223
> 
> 标签：python, csv

我正在使用此代码来查找两个 csv 列表之间的差异并提出一些格式问题。这可能是一个简单的解决方法，但我是新手，正在努力学习并遇到很多问题。

```
 import difflib

 diff=difflib.ndiff(open('test1.csv',"rb").readlines(), open('test2.csv',"rb").readlines()) 

 try:
  while 1:
    print diff.next(),
except:
 pass 
```

代码工作正常，我得到我正在寻找的输出：

```
 Group,Symbol,Total

 - Adam,apple,3850

 ?           ^
 + Adam,apple,2850

 ?           ^
 bob,orange,-45

 bob,lemon,66

 bob,appl,-56

 bob,,88 
```

我的问题是如何清理格式，我可以将 Group、Symbol、Total 分成单独的列，并将下面的文本排列起来吗？

我也可以改变吗？代表我确定的文本？比如 test 1 和 test 2 代表它来自哪个表？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:45:14.997

使用[`difflib.unified_diff`](http://docs.python.org/library/difflib.html#difflib.unified_diff)提供了更清晰的输出，见下文。

此外，两者都`difflib.ndiff`返回`difflib.unified_diff`一个[Differ](http://docs.python.org/library/difflib.html#difflib.Differ)对象，它是一个[生成器](http://docs.python.org/glossary.html#term-generator)对象，您可以直接在for 循环中使用它，并且知道何时退出，因此您不必自己处理异常。注意；后面的逗号`line`是为了防止`print`添加另一个换行符。

```
import difflib
s1 = ['Adam,apple,3850\n', 'bob,orange,-45\n', 'bob,lemon,66\n', 
      'bob,appl,-56\n', 'bob,,88\n']
s2 = ['Adam,apple,2850\n', 'bob,orange,-45\n', 'bob,lemon,66\n', 
      'bob,appl,-56\n', 'bob,,88\n']

for line in difflib.unified_diff(s1, s2, fromfile='test1.csv',
                 tofile='test2.csv'): 
    print line, 
```

这给出了：

```
--- test1.csv
+++ test2.csv
@@ -1,4 +1,4 @@
-Adam,apple,3850
+Adam,apple,2850
 bob,orange,-45
 bob,lemon,66
 bob,appl,-56 
```

因此，您可以清楚地看到在`test1.csv`和之间更改了哪些行`test1.csv`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T22:07:04.037

要排列列，您必须使用字符串格式。

例如`print "%-20s %-20s %-20s" % (row[0],row[1],row[2])`。

要将 更改`?`为您喜欢的任何文本测试，您可以使用`s.replace('any text i like')`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T19:54:46.417

您的问题与 CSV 格式有关，因为`difflib`不知道它正在查看柱状字段。您需要弄清楚指南指向哪个字段，以便在打印列时可以调整它。

如果您的 CSV 文件很*简单*，即它们不包含任何带有嵌入式逗号或（不寒而栗）换行符的引用字段，您可以使用`split(',')`将它们分隔为字段，并找出指南指向的位置，如下所示：

```
def align(line, guideline):
    """
    Figure out which field the guide (^) points to, and the offset within it.
    E.g., if the guide points 3 chars into field 2, return (2, 3)
    """
    fields = line.split(',')
    guide = guideline.index('^')
    f = p = 0
    while p + len(fields[f]) < guide:
        p += len(fields[f]) + 1     # +1 for the comma
        f += 1
    offset = guide - p
    return f, offset 
```

现在很容易正确地显示指南。假设您想通过打印 12 个空格宽的所有内容来对齐列：

```
diff=difflib.ndiff(...)
for line in diff:
    code = line[0]  # The diff prefix
    print code,
    if code == '?':
        fld, offset = align(lastline, line[2:])
        for f in range(fld):
            print "%-12s" % '',
        print ' '*offset + '^'
    else:
        fields = line[2:].rstrip('\r\n').split(',')
        for f in fields:
            print "%-12s" % f,
        print
        lastline = line[2:] 
```

请注意，解析 CSV 文件的唯一可靠方法是使用该`csv`模块（或可靠的替代方法）；但是让它与 diff 格式（*完全*通用）一起玩会有点头疼。如果您主要对可读性感兴趣并且您的 CSV 不是太粗糙，那么您可能会遇到偶尔的混淆。

# spring - 在春季测试 Spring @Aspect？

> ID：11110254
> 
> 赞同：1
> 
> 时间：2012-06-19T22:12:26.400
> 
> 标签：spring, unit-testing, spring-aop

我是 Java 中的 Spring 和 AOP 的新手（尽管我过去在功能上做过一些相关的事情），所以我希望有人能帮助弥补我的无知——有没有好的指南来对 @Aspect 进行单元测试？在相关说明中，希望在我的方面建议中设置断点会暂停调试器并让我查看那里范围内的变量，这是否揭示了对 spring 执行模型的一些深刻误解？任何旧文档都会有所帮助，但请具体说明......我已经阅读了 spring 文档，但也许我错过了特定的部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:15:26.197

我假设您正在使用 Spring AOP - 使用 Spring[测试支持](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/testing.html#testing-introduction)您可以测试 AOP 相关代码。Spring AOP 的工作原理是为您的 bean 创建与运行时通知的切入点相匹配的动态代理，因此只要您使用 Spring 测试支持（`@RunWith(SpringJUnit4ClassRunner.class)`等），您的 @Aspect 代码应该被调用 - 您可以在 IDE 中放置断点并期望达到与方面相关的断点时要暂停的调试器。

# iphone - 自动释放不是很清楚

> ID：11110260
> 
> 赞同：0
> 
> 时间：2012-06-19T22:12:59.257
> 
> 标签：iphone, ios

我对自动释放消息不太清楚......
当自动释放被发送到一个对象时，“直到事件循环结束”对象才被释放是什么意思？
为什么事件循环的结束不能发生在 autorelease 和预期的 retain 之间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:21:19.657

框架调用您的代码作为事件循环处理的一部分，用于处理您表示感兴趣的事件（单击按钮、加载视图、传递通知等）。该事件循环的结束发生在您从该处理返回并让框架执行下一步所需的任何操作之后。因此，在您的代码交还控制权之前，它不会耗尽池。

（这一系列事件也大致解释了为什么如果用户代码卡在处理循环中，物理屏幕更新不会发生。）

# powershell - 在 powershell 脚本中强制立即评估（按值复制变量，而不是引用）

> ID：11110264
> 
> 赞同：2
> 
> 时间：2012-06-19T22:13:12.457
> 
> 标签：powershell, powershell-2.0

我对以下代码有问题

```
foreach ($ex in ("foo", "bar", "baz")) {
$timer = New-Object Timers.timer
$taction =  {
    Write-Host "Timer fired for: $ex"
}
$timer.Interval = 1000 
$timer.AutoReset = $false
$timer.Start()

Register-ObjectEvent -InputObject $timer -EventName elapsed -SourceIdentifier "$ex" -Action $taction 
```

}

此代码给出以下输出

```
Timer fired for: baz
Timer fired for: baz
Timer fired for: baz 
```

但我想要它 foo、bar 和 baz。问题似乎是 $ex 变量最终被所有计时器读取，所以无论它有什么值，他们都得到它。如何在 $taction 中复制 $ex 的值以使其唯一？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:30:48.263

尝试使用`[scriptblock]::Create()`，这会在创建时评估参数：

```
foreach ($ex in ("foo", "bar", "baz"))
{

$timer = New-Object Timers.timer
$taction =  [scriptblock]::create("Write-Host Timer fired for: $ex")

$timer.Interval = 1000 
$timer.AutoReset = $false
$timer.Start()

Register-ObjectEvent -InputObject $timer -EventName elapsed -SourceIdentifier $ex  -Action $taction
} 
```

# ms-access - IIF 功能（访问）

> ID：11110265
> 
> 赞同：2
> 
> 时间：2012-06-19T22:13:15.620
> 
> 标签：ms-access, iif

有任何访问大师可以帮助我吗？试图弄清楚如何实现以下目标：我想要一个查询来遍历个人表中的每个人，并返回那些在圣诞节列表字段中具有真实值的人。这个数据库是旧的，是用 CompanyName 作为公司表的主键创建的（我知道 - 糟糕的设计）。为了解决拥有多个地点的公司的问题，他们创建了一个地址栏字段。这样，如果“Y 公司”在圣地亚哥开设新位置，他们会添加“Y 公司 - 圣地亚哥”条目并在地址行中输入“Y 公司”。然后对于没有公司的个人，将他们输入到“Home”的虚拟公司条目中。所以理想情况下，我希望这个查询做的是循环，抓住所有应该在圣诞节名单上的人，如果地址栏字段 ISN'T NULL 我希望 CompanyName 等于 AddressLine，但如果 CompanyName = "Home" 我希望 CompanyName 等于 ""（空字符串）。还有一些人有隔夜地址，因为他们的正常地址是邮政信箱。以下查询我主要为我工作，但是如果 CompanyName="Home"，我不清楚如何在返回的结果中将公司名称设为空白。

```
SELECT tblIndividuals.FirstName, tblIndividuals.LastName, IIf([tblcompanies].[addressline] Is Not Null,[tblcompanies].[addressline],[tblcompanies].[companyname]) AS CompanyName, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[MailingAddress1],[tblIndividuals].[MailingAddress1]) AS MailingAddress1, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[MailingAddress2],[tblIndividuals].[MailingAddress2]) AS MailingAddress2, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[MailingAddress3],[tblIndividuals].[MailingAddress3]) AS MailingAddress3, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[MailingAddress4],[tblIndividuals].[MailingAddress4]) AS MailingAddress4, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[City],[tblIndividuals].[City]) AS City, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[State],[tblIndividuals].[State]) AS State, IIf([tblIndividuals].[MailingAddress1] Is Null,[tblCompanies].[Zip],[tblIndividuals].[Zip]) AS Zip
FROM tblIndividuals INNER JOIN tblCompanies ON tblIndividuals.CompanyName = tblCompanies.CompanyName
WHERE (((tblIndividuals.ChristmasList)=True))
Order by [tblIndividuals].[companyname]; 
```

如果可能的话，我希望它按公司名称值 (AZ) 排序，然后按个人的姓氏 (AZ) 排序。我不会假装精通 SQL，所以您能给我的任何帮助将不胜感激。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:37:38.433

考虑一个 UNION 查询，例如：

```
SELECT i.FirstName, i.LastName, 
       IIf(c.[addressline] Is Not Null,
           c.[addressline],c.[companyname]) AS CompanyName, 
       c.[MailingAddress1] AS MailingAddress1, 
       c.[MailingAddress2] AS MailingAddress2, 
       c.[MailingAddress3] AS MailingAddress3, 
       c.[MailingAddress4] AS MailingAddress4, 
       c.[City] AS City, 
       c.[State] AS State,
       c.[Zip] AS Zip
FROM tblIndividuals i
INNER JOIN tblCompanies c ON i.CompanyName = c.CompanyName
WHERE i.ChristmasList=True
AND i.[MailingAddress1] Is Null
UNION
SELECT i.FirstName, i.LastName, 
       IIf(c.[addressline] Is Not Null,c.[addressline],
           c.[companyname]) AS CompanyName, 
       i.[MailingAddress1] AS MailingAddress1, 
       i.[MailingAddress2] AS MailingAddress2, 
       i.[MailingAddress3] AS MailingAddress3, 
       i.[MailingAddress4] AS MailingAddress4, 
       i.[City] AS City, 
       i.[State] AS State,
       i.[Zip] AS Zip
FROM tblIndividuals i
INNER JOIN tblCompanies c ON i.CompanyName = c.CompanyName
WHERE i.ChristmasList=True
AND i.[MailingAddress1] Is Not Null 
```

您可以将查询括在括号中以创建可以使用查询设计窗口排序的派生表。

```
SELECT FirstName, LastName, etc 
FROM ( <union query> ) As q
Order by q.[companyname] 
```

# regex - 在 wiki 中替换 chemform - regexp

> ID：11110269
> 
> 赞同：1
> 
> 时间：2012-06-19T22:13:35.173
> 
> 标签：regex

你能给我一些建议吗，我正在替换`<chemform>`我的wiki中不再使用的代码......字符串通常很简单，如下所示：

```
<chemform>CH3COO-</chemform>
<chemform>Ba2+</chemform>
<chemform>H2CO3</chemform> 
```

我需要将它们替换为：

```
CH<sub>3</sub>COO<sup>-</sup>
Ba<sub>2</sub><sup>+</sup>
H<sub>2</sub>CO<sub>3</sub> 
```

到目前为止，我为[RegExr 工具](http://gskinner.com/RegExr/)提出了这个正则表达式：

*匹配*：`<chemform\b[^>]*>(\D*?)([0-9]*)(\D*?)(\D*?)([0-9]*)(\D*?)([-+]*?)</chemform>`

*替换*：`$1<sub>$2</sub>$3$4<sub>$5</sub>$6<sup>$7</sup>`

我知道代码很糟糕，但到目前为止，它一直在为我工作，除了它让我得到空字符串，例如`<sub></sub>`：

```
<sub></sub>CH<sub>3</sub>COO<sup>-</sup>
<sub></sub>Ba<sub>2</sub><sup>+</sup>
H<sub>2</sub>CO<sub>3</sub><sup></sup> 
```

如何在不进行第二次替换搜索的情况下摆脱这些？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-15T07:18:03.767

您可以使用 Notepad++，它能够进行条件替换（您可以在Wiktor [Stribiżew](https://stackoverflow.com/users/3832970/wiktor-stribi%C5%BCew)[的上一篇文章](https://stackoverflow.com/a/37161309/8767753)中获得详细信息）。

使用以下模式：

*   匹配：`([A-Za-z]+(?=[-+\d]))(?<sub>\d+)?(?<sup>[-+])?(?=[-+\w]*</chemform>)`
*   代替：`$1(?{sub}<sub>$+{sub}</sub>)(?{sup}<sup>$+{sup}</sup>)`

鉴于您的输入样本，我得到：

```
<chemform>CH<sub>3</sub>COO<sup>-</sup></chemform>  
<chemform>Ba<sub>2</sub><sup>+</sup></chemform>  
<chemform>H<sub>2</sub>CO<sub>3</sub></chemform> 
```

# php - 查询字符串通过 $_GET 方法传递

> ID：11110272
> 
> 赞同：-1
> 
> 时间：2012-06-19T22:14:01.830
> 
> 标签：php, javascript, string

我想传递包含非英语字符串的 sValue

```
 ....
 $.post("ajax.php?module=test&action=updates&id="+id+"&field="+field+"&val="+sValue;                                    
... 
```

然后

```
$valUpdate = $_GET['val'];
$sQuery = " UPDATE $sTable SET  $colUpdate = '$valUpdate' WHERE  id = $id";
    $req = $pdo->prepare($sQuery);
    $req->execute();
    $req->closeCursor(); 
```

任何人都可以告诉我，我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:22:12.863

您应该使用 encodeURIComponent(sValue)。

还可以考虑使用某种无 SQL 注入的语法，例如准备好的语句。

# iphone - CIFaceFeature 仅适用于 LandscapeLeft

> ID：11110276
> 
> 赞同：0
> 
> 时间：2012-06-19T22:14:19.073
> 
> 标签：iphone, ios, orientation, face-detection

遵循[iTunes U](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/)关于如何进行人脸检测的教程（该教程仅在视频中，并非在线编写，因此我无法发布直接链接）。基本上，我已经让面部检测工作了，但前提是手机处于 LandscapeLeft 模式。

关于它为什么会这样工作的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:21:18.700

没有看到你的代码很难说，但我猜你没有设置`CIDetectorImageOrientation`？当图像方向与检测器方向设置不匹配时，我的检测失败。

下面的一些代码 - 不是剪切'n粘贴，而是更多的粗略示例。

```
- (void)detectFacialFeatures:(UIImage *)image withHighAccuracy:(BOOL) highAccuracy
{

CIImage* ciImage = [CIImage imageWithCGImage:sourceImage.CGImage];

if (ciImage == nil){
    printf("ugh \n");
    // bail
}

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSString *accuracy = highAccuracy ? CIDetectorAccuracyHigh : CIDetectorAccuracyLow;

    NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:
                             CIDetectorAccuracyHigh, CIDetectorAccuracy,
                             orientation, CIDetectorImageOrientation,
                             nil];

    CIDetector* detector = [CIDetector detectorOfType:CIDetectorTypeFace 
                                              context:nil options:options];

    NSArray *features = [detector featuresInImage:ciImage];

    NSLog(@"features %@", features);

});
} 
```

# c# - 具有自定义登录的登录视图控件

> ID：11110278
> 
> 赞同：1
> 
> 时间：2012-06-19T22:14:36.670
> 
> 标签：c#, asp.net

我有一个包含自定义登录控件的 asp.net 网页，如下所示：

```
 <div id="login-box-name" style="margin-top: 20px;">
                    User Name:</div>
                <div id="login-box-field" style="margin-top: 20px;">
                    <asp:TextBox ID="username" runat="server" CssClass="form-login"></asp:TextBox>
                </div>
                <div id="login-box-name">
                    Password:</div>
                <div id="login-box-field">
                    <asp:TextBox ID="password" runat="server" CssClass="form-login" TextMode="Password"></asp:TextBox>
                </div>
                <br />
                <span class="login-box-options">
                    <input type="checkbox" name="1" value="1">
                    Remember Me</span>
                <br />
                <br />
                <asp:ImageButton ID="loginbtn" runat="server" ImageUrl="images/login-btn.png" 
                    onclick="loginbtn_Click" /> 
```

它看起来像这样：

![在此处输入图像描述](../Images/d40bf0ed8fcb938900c4f17a0241bbc3.png)

并在“loginbtn_Click”上：

```
if(Membership.ValidateUser(username.Text,password.Text))
   {
       var user = Membership.GetUser(username.Text);
       var userid = user.ProviderUserKey;
       Session["UserID"] = userid;
       Response.Redirect("~/Default.aspx");
   } 
```

和“登录视图控件”是这样的：

```
<li>
                        <asp:LoginView ID="LoginView1" runat="server">
                            <RoleGroups>
                                <asp:RoleGroup Roles="Admins">
                                    <ContentTemplate>
                                        <a href="ControlPanel.aspx">Control Panel</a>
                                    </ContentTemplate>
                                </asp:RoleGroup>
                                <asp:RoleGroup Roles="Users">
                                </asp:RoleGroup>
                            </RoleGroups>
                        </asp:LoginView>
                    </li> 
```

但我的问题是在“登录视图”控件中的管理员登录后没有显示名为“控制面板”的链接，是因为我为登录制作的自定义控件还是我错过了 e.Authenticated = true;。 。或者是其他东西？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:18:47.930

您需要设置授权cookie

```
FormsAuthentication.SetAuthCookie(username.Text, true); 
```

同样在注销时确保清除它：

```
FormsAuthentication.SignOut();
Session.Clear();
Session.Abandon();
Response.Redirect("~/Default.aspx"); 
```

# powershell - 在 Microsoft Azure 中复制虚拟机数据驱动器

> ID：11110279
> 
> 赞同：0
> 
> 时间：2012-06-19T22:14:36.977
> 
> 标签：powershell, azure

在问题底部添加了更多详细信息。

我们正在 Azure VM 预览版中测试部署方案并遇到了问题。

这是我们的场景。我们有一个在所有服务器中使用的软件堆栈。我们已经创建了一个映像，其中所有堆栈都安装在附加的数据驱动器上。我们已经创建了一个可以用作模板的 VM 映像。现在我们要做的是基于该模板创建一个 VM，并创建数据驱动器的副本，并以自动方式将其附加到新创建的 VM。

我们的问题是，虽然我们找到了大量有关创建驱动器的信息，但我们找不到任何有关如何使用 Azure for Powershell 复制数据驱动器的指导。

任何想法、代码或 RTFM 都会欣然接受。

干杯，

特伦斯

我们已经成功创建了一个操作系统镜像，我们可以使用它来创建虚拟机。但是有一个数据磁盘保存我们的标准软件堆栈，我们希望通过在 VM 之间复制它来重用它。我们试图实现的场景是：

1.  从标准 VM 映像创建 VM - PBIMaster

2.  将磁盘作为 F 附加到名为 PBIMasterDisk 的映像

3.  在 F 上安装我们的应用程序所需的所有软件：（对于 OS 磁盘来说很大，而且除了粘贴在 OS 磁盘上看起来很乱）

4.  从 PBIMaster 构建一个图像，调用它 PBIMasterImage 保存它。

5.  从 PBIMaster 创建一个新图像，称之为 Node1

6.  将 PBIMasterDisk 复制到一个名为 Node1Software 的新 Azure 磁盘

7.  将 Node1Softwaredisk 作为 F 附加到 Node1：

由于映像具有先前安装的正确注册表设置，因此我们的堆栈已准备就绪。

9 添加适当的端点。

冲洗并重复每个附加节点。

希望这能让我们的场景更清晰。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:21:33.857

如果我正确理解您的目标，您已经在订阅中上传了两个 VHD，并且您还创建了基于您的 OS 磁盘 VHD1 的 VM：

1.  操作系统磁盘 (VHD1)
2.  数据盘 (VHD2)

现在您想将 VHD2 复制到 VHD3，然后通过 Powershell 将 VHD3 附加到您的 VM（基于 OS 磁盘）。

截至目前，没有 powershell 命令可以让您将 DataDisk（VHD2）复制到另一个数据磁盘（即 VHD3）。

我没有尝试过，但您可以使用以下代码尝试复制 DataDisk：

[http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-asynchronous-cross-account-copy-blob.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-asynchronous-cross-account-copy-blob.aspx)

此方法会直接在云存储级别复制 blob，因此如果您在同一个 DC 中，则不会对内部部署使用带宽，并且可能为零成本。尝试使用相同的订阅，看看是否能解决您的问题。

# css - border-radius 不影响内部 div 的背景（Chrome、Opera）

> ID：11110282
> 
> 赞同：2
> 
> 时间：2012-06-19T22:15:10.017
> 
> 标签：css

是否可以在 div 上（在 Chrome 和 Opera 中）使用border-radius，以便内部 div 背景也会受到影响？**如果不是，那还有什么方法可以达到这种效果？**

示例：http: [//jsfiddle.net/fE58b/1/](http://jsfiddle.net/fE58b/1/)

它在 IE9 和 FF7 中运行良好。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:20:21.297

如果您只是将背景图像从移动`#content`到`.box`：

```
.box {
     background:url(...so_70s_background.jpg) top left repeat;
} 
```

此外，如果您确实需要将边框放在单独的 div 中，您可以随时在框外添加新的 div：

```
<div class="box-outer">
    <div class="box">
        <div id="content"></div>
    </div>
</div> 
```

只需确保申请：

```
.box-outer {
    width:500px;
    height:500px;
    position:absolute;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:22:36.737

所以，正如 Cristi 上面所说的，一些浏览器似乎在沿着父母的弯曲边界剪裁溢出的孩子方面有点麻烦。看来，为了（至少对于 Webkit）呈现受父边框半径影响的子溢出，父子和子都必须**静态定位**。

此外，即使使用这种静态定位，似乎为子元素设置不透明度值会导致它打破其父元素的溢出边界（如果我不得不猜测，我想这与不透明度值有关触发硬件加速图形，在这种情况下 3D 变换将产生相同的故障）。

幸运的是，您可以使用绝对定位的祖父控件来控制其静态子元素的尺寸和位置，并`rgba`在背景和文本上模拟元素的不透明度。我碰巧有一个[jsfiddle 片段](http://jsfiddle.net/GjvEE/)演示了其中一些您可能会发现有用的变通方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T10:36:52.407

用户关注解决边界问题

```
 border-radius: 20%;        /* FOR ALL NEW BROWSER OF HIGHER VERSION*/
    -webkit-border-radius: 20%;      *FOR ALL OHTER OLD BROWSER*/
    -moz-border-radius: 20%;     /* FOR MOZILLA FF*/ 
```

# django - Django 管理界面显示计数但没有数据

> ID：11110284
> 
> 赞同：4
> 
> 时间：2012-06-19T22:15:25.063
> 
> 标签：django, django-models, django-admin, django-1.4

我正在使用 Django 1.4，并且在我的管理站点中遇到了隐藏行的异常问题。

我可以在我的应用程序中查看单个模型，当我单击每个模型时，它们似乎正在正确查询数据库；我可以在左上角看到匹配的数量（例如，我的操作栏下方的“3 个位置”）。但是，条目不会出现在该计数之下。

![在此处输入图像描述](../Images/c8190f9866b60315efe3e007d11259b8.png)

如果我尝试直接使用 URL 打开条目，我也会得到一个空白页面。

我还没有自定义模板或 CSS。有没有人遇到过这类问题？

**更新**：如果模型中的外键被删除，条目会重新出现在计数下方。但是，需要该 FK 字段，因此仍在尝试确定根本原因。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-20T17:38:17.327

固定的。当模型使用 ForeignKey 字段并且它指向的表没有加载其数据时，这似乎会发生。这说明模型看到了行数，但无法提取各个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T09:49:57.540

我有同样的问题（即我可以在管理员中看到模型计数，但看不到实际记录）。

我有一个模型（类别）与另一个模型（竞争）的 ForeignKey。在对模型和迁移进行一些代码重构时，我查看了数据库和沿线某处，我最终发现类别上的 FK 指向不存在的竞赛。

当我在数据库中更新这些 FK 时，记录重新出现在管理员中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2022-01-21T12:21:21.080

在使用外键的 admin.py 中，您必须在最后一个 _id 添加，例如我的外键是 iClientId，所以在 admin.py 中我们必须在 list_display iClientId_id 中写入。

# jmeter - 如何在jmeter http请求中同时发布和获取参数

> ID：11110290
> 
> 赞同：0
> 
> 时间：2012-06-19T22:16:25.510
> 
> 标签：jmeter

我在 Jmeter 中设置了几个具有 get 或 post 参数的 http 请求采样器，它们都工作正常。但是，我在设置发布到具有获取参数的 URL 的 http 请求采样器时遇到了一些麻烦（即[http://www.mydomain.com/myApp.cfm?id1=1&id2=2](http://www.mydomain.com/myApp.cfm?id1=1&id2=2)）。我遇到的问题是，在我的查看结果侦听器的响应数据选项卡中，它显示 myApp.cfm 抱怨 id1 不存在。

我对http请求采样器的配置如下，
1）服务器名称或IP：www.mydomain.com
2）路径：/myApp.cfm?id1= 1&id2=
2 3）方法：Post
4）参数：
名称：id3
值: 3
包括等于：真

我的问题是，如何使用 http 请求采样器发布到具有获取参数的 URL？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:29:54.350

我不太熟悉 ColdFusion 脚本，也不知道如何欺骗 jMeter 在 POST 请求中获取 url 参数（因为 POST 的参数在请求正文中）。
请参阅有关混合 POST 和 GET 的讨论[。](https://stackoverflow.com/questions/611906/http-post-with-url-query-parameters-good-idea-or-not)

您是否尝试过使用[BadBoy](http://www.badboy.com.au/)或[JMeter Proxy](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)保存测试以查看您的应用程序实际发送的内容？`FireBug`如果您使用的是 FireFox 或使用`Ctrl+Shift+i`的是 Chrome，您也可以查看引擎盖下发生的情况。

# windows-8 - Windows 应用商店应用 QUnit 测试

> ID：11110291
> 
> 赞同：1
> 
> 时间：2012-06-19T22:16:26.790
> 
> 标签：windows-8, windows-store-apps, qunit

有人用 QUnit 测试过 Windows Store App 吗？关于如何顺利运行测试的任何建议？我似乎在引用一些内部 Windows 的存根方法时遇到问题。参考。有没有办法在 Metro 应用程序实际运行时运行 QUnit，而不是以独立的方式编写测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:56:30.373

有两个 QunitMetro 库可用 Codeplex [http://qunitmetro.github.com/QUnitMetro/](http://qunitmetro.github.com/QUnitMetro/) MSDN 代码库[http://visualstudiogallery.msdn.microsoft.com/9a49206d-8b60-4324-a23f-eb01264ece3d](http://visualstudiogallery.msdn.microsoft.com/9a49206d-8b60-4324-a23f-eb01264ece3d)

我推荐 CodePlex 版本，因为我没有尝试过 MSDN 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T03:59:20.470

看看这个最近开始的项目，它可以帮助你在 Metro 应用程序中使用 QUnit

[QUnit-Metro](http://qunitmetro.github.com/QUnitMetro/)

# python - Python - 如何将可迭代对象传递给 product()？

> ID：11110292
> 
> 赞同：2
> 
> 时间：2012-06-19T22:16:31.163
> 
> 标签：python, product

我试图在 Python 中使用 product() 函数。我知道 product() 需要一堆 iterables 并做所有这些的笛卡尔积。

现在我将所有可迭代项放在一个列表中。我想知道如何一次传递该列表中的所有迭代？我不能将列表直接传递给产品，因为产品（）会将其视为一个可迭代的。例如，我有一个列表列表：

```
[[1,2,3],['a','b']] 
```

如何将 [1,2,3] 和 ['a','b'] 传递给产品，使其等效于 product([1,2,3],['a','b'])？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T22:19:12.657

```
 l = [[1, 2, 3], ('a', 'b')]
 product(*l) 
```

这称为[拆包参数列表](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T22:19:14.673

使用[参数扩展](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)（解包）：

```
vals = [[1,2,3],['a','b']]
product(*vals) 
```

它的工作原理类似于：

```
>>> x, y = [[1,2,3],['a','b']]
>>> x
[1, 2, 3]
>>> y
['a', 'b'] 
```

# c++ - 如何捕获 printf 的输出？

> ID：11110300
> 
> 赞同：7
> 
> 时间：2012-06-19T22:17:16.743
> 
> 标签：c++, printf

我正在调用一个函数 `funcB`。使用多个语句来输出数据。有没有办法让我通过 捕获这些数据？我不能修改。`funcA``funcB``printf``funcA``funcB`

```
funcB(){
     printf( "%s", "My Name is" );
     printf( "%s", "I like ice cream" );
}

funcA(){
    funcB();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T22:33:41.997

（此答案是基于[此](https://stackoverflow.com/a/4832902/315052)答案的更正版本。）

这个答案是以 POSIX 为中心的。用于`open`为要重定向到的文件创建文件描述符。然后，使用`dup2`to`STDOUT_FILENO`改为`stdout`写入文件。`dup`但是，在`STDOUT_FILENO`你这样做之前你会想要，所以你可以`stdout`用另一个`dup2`.

```
fflush(stdout);
int stdout_fd = dup(STDOUT_FILENO);
int redir_fd = open(redirected_filename, O_WRONLY);
dup2(redir_fd, STDOUT_FILENO);
close(redir_fd);
funcB();
fflush(stdout);
dup2(stdout_fd, STDOUT_FILENO);
close(stdout_fd); 
```

如果`funcB`正在使用`std::cout`，请使用`std::cout.flush()`代替`fflush(stdout)`。

如果您想更直接地操作 C++ 流，可以使用[Johnathan Wakely 的答案](https://stackoverflow.com/questions/10940765/redirecting-stdout-from-another-program-in-c/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:28:53.370

如果您的程序中没有其他内容使用`printf`，您可以编写自己的版本并显式链接它。如果函数已经定义，链接器将不会在标准库中查找。您可能可以[`vsprintf`](http://www.cplusplus.com/reference/clibrary/cstdio/vsprintf/)用于实现，或者一些更安全的版本，如果它是由您的编译器提供的，则会检查溢出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:34:38.370

如果你愿意玩一个肮脏的游戏，`printf`你可以“窃取”它的输出，比如：

```
#include <stdio.h>
#include <stdarg.h>

static char buffer[1024];
static char *next = buffer;

static void funcB(){
     printf( "%s", "My Name is" );
     printf( "%s", "I like ice cream" );
}

static void funcA(){
    funcB();
    // Do stuff iwth buffer here
    fprintf(stderr, "stole: %s\n", buffer);
    next=buffer; // reset for later.
}

int main() {
  funcA();
}

int printf(const char *fmt, ...) {
   va_list argp;
   va_start(argp, fmt);
   const int ret = vsnprintf(next, sizeof buffer-(next-buffer), fmt, argp);
   next += ret;
   va_end(argp);
   return ret;
} 
```

您可以使用标志来指示如何处理您希望 printf 正常工作的实例。（例如，将其映射到`fprintf`或使用`dlsym()`/similar 来查找真正的呼叫）。

您还可以使用它`realloc`来更明智地管理缓冲区的大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:22:21.470

放入`funcB`一个单独的程序。然后，您可以捕获其标准输出，例如通过管道或将其重定向到文件。如何做到这一点通常取决于操作系统，并且超出了 C++ 的范围。

或者，也许您可​​以将`funcA`进程的标准输出重定向到文件，然后调用`FuncB`并从文件中检索输出。

同样，如何做到这一点超出了 C++ 的范围，并且取决于操作系统。

# javascript - 在闭包中自动绑定范围变量

> ID：11110304
> 
> 赞同：3
> 
> 时间：2012-06-19T22:17:48.507
> 
> 标签：javascript, python, closures

考虑这个（相当无意义的）javascript代码：

```
function make_closure() {
    var x = 123, y = 456;
    return function(varname) { return eval(varname) }
}

closure = make_closure()
closure("x") // 123
closure("y") // 456 
```

从返回的函数`make_closure`不包含对范围变量的任何引用，但在调用时仍然能够返回它们的值。

有没有办法在 python 中做同样的事情？

```
def make_closure():
    x = 123
    return lambda varname: ...no "x" here...

closure = make_closure()
print closure("x") # 123 
```

换句话说，如何编写一个闭包来“知道”定义范围中的变量而不明确提及它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:29:13.537

这可能是最接近精确等价物的东西：

```
def make_closure():
  x = 123
  l = locals()
  return lambda(varname): eval(varname, None, l)

closure = make_closure()
print closure("x") # 123 
```

最终，您的问题不在于您的本地闭包没有捕获 x，而是您的本地范围没有传递给 eval。

有关 eval 函数的详细信息，请参阅[http://docs.python.org/library/functions.html#eval](http://docs.python.org/library/functions.html#eval)。

不言而喻，这不是一件非常 Pythonic 的事情。你几乎从不想在 Python 中调用 eval ；如果你认为你这样做了，退后一步，重新考虑你更大的设计。但是当你确实需要使用它时，你需要了解它与 Javascript eval 的不同之处。它最终更强大——它可以用来模拟动态范围，或者作为 exec 的简化版本，或者在任意构建的环境中评估代码——但这也意味着它更棘手。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:35:25.710

人们已经提到使用`locals()`. 另一种公认的不太灵活的方法是`nonlocal`在 Python 3 中使用 new 关键字：

```
>>> def make_closure():
...     x = 123
...     def return_var(varname):
...         nonlocal x
...         return eval(varname)
...     return return_var
... 
>>> closure = make_closure()
>>> closure("x")
123 
```

这有一个明显的缺点，即要求您从外部范围中显式标记您希望关闭和引用的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:27:08.890

您可以在 Python 中关闭变量，大致类似于在 Javascript 中的操作方式：

```
def foo():
  x = 123
  return lambda y: x+y

q = foo()

print q(5) 
```

[http://ideone.com/Q8iBg](http://ideone.com/Q8iBg)

但是，存在一些差异 - 例如，您不能写入父范围内的变量（尝试写入只是创建一个局部范围的变量）。此外，Python`eval()`不包括父范围。

您可以`eval()`通过从父范围显式获取本地变量并将它们作为其本地参数传递给子变量来绕过此`eval()`问题，但这里真正的问题是为什么需要这样做？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:34:00.660

在 Python 2.x 中，这需要大量的组合。但是，在 Python 3.x 中，引入了“nonlocal”关键字以允许访问直接封闭范围内的变量。

可能值得在这里查看更多信息：[Python 2.x 中的 nonlocal 关键字](https://stackoverflow.com/questions/3190706/nonlocal-keyword-in-python-2-x)

# xml - XML 字符串 - 仅选择某些节点

> ID：11110308
> 
> 赞同：0
> 
> 时间：2012-06-19T22:18:01.780
> 
> 标签：xml, xmlreader, xpathnavigator

我尝试在此处查找此内容，但找不到正确的答案。我有一个包含一堆节点的 XML 字符串。
我想从这个字符串中只提取几个节点并将其附加一个新的根元素并返回它。

我知道如何通过将其加载到 XMLDocument 并选择节点来做到这一点。使用 XpathNavigator 或 XmlReader 是否有更好的方法？

**这是我的字符串**

```
<root>
  <node1/>
  <node2/>
  <node3/>
  <node4/>
  <node5>
</root> 
```

我希望我的输出字符串是

```
<root>
   <node3/>
   <node4/>
 </root> 
```

必须以有效的方式完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T04:21:23.730

为了简单起见，我会使用`XDocument.Parse()`. 并通过提供的函数操作 DOM。由于 XML 是作为字符串提供的，可能很小，我敢打赌您不会看到复杂性问题。

如果要删除很多节点，我建议您使用 XPath 字符串列表。然后对于每个字符串，您可以使用它`doc.XPathSelectElements()`来查找所有元素并调用`remove()`每个元素。生成的 XDocument 将只有剩余的节点。

# c# - 什么可能导致实体框架抛出异常并显示消息“（某种类型）既不是（某种其他类型）的超类型也不是（某种其他类型）的子类型”？

> ID：11110309
> 
> 赞同：2
> 
> 时间：2012-06-19T22:18:02.827
> 
> 标签：c#, entity-framework, entity-framework-4

我正在处理一个我发现很难调试的 EF 问题...以前，有一个按类型继承的设置来管理我系统中的不同用户类型——一种对所有用户通用的根类型，还有几个不同的子类型大致基于使用该帐户的人的类型。现在，我遇到了一些问题，需要我删除继承，而是在每个子类上放置一个 UserId 属性，该属性是用户 Id 属性的外键。因此，现在其他用户类型将拥有用户导航属性，而不是用户。

我使用 EDMX 设计器删除了所有继承关联，添加了所有 UserId 属性及其关联，确保所有其他用户类型现在都有自己的实体键，并获得了用户集的关联和导航属性在每个具体。但是，当我实际运行我的应用程序时，我收到一个 TargetInvocationException 消息，告诉我“用户既不是（其他类型）的超类型也不是子类型”。

我一直在寻找有关此错误消息的其他引用，但找不到任何东西，而且我无法确定是什么原因造成的。在我的 EDMX 中，似乎不再引用 User 和其他类型之间的任何类型的继承，但消息仍然存在。我认识的人从来没有见过它。

我真的没有任何代码可以提供参考；这似乎是一个映射问题。以前有没有人看到过这个特定消息的异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:57:30.340

事实证明，问题实际上并不在我所怀疑的 EDMX 内部。通常，当映射出现问题时，代码总是会在同一行发生故障，此时我尝试反射性地实例化实体存储库。由于这是引发异常的地方，我认为这是一个映射问题，但关闭项目的自定义错误表明，在特定存储库的构造函数中，另一个开发人员插入了对`ObjectContext.CreateObjectSet<User>().OfType<(user sub-category type)>()`. 这就是造成问题的原因。我怀疑异常在调试时没有向我显示这一行，因为存储库的构造函数被反射调用。更改此调用后，一切正常。

# java - Java - 并行读取二进制文件

> ID：11110310
> 
> 赞同：2
> 
> 时间：2012-06-19T22:18:15.680
> 
> 标签：java, multithreading, file-io, random-access

我有一个包含信息块的二进制文件（*以后我将它们称为数据包*）。每个数据包由一个固定长度的标头和一个可变长度的主体组成。我必须从数据包标头本身确定正文的长度。我的任务是从文件中读取这些数据包并对它们执行一些操作。目前我正在执行以下任务：

*   将文件作为随机访问文件打开并转到特定的起始位置（用户指定的起始位置）。从这个位置读取第一个数据包。执行具体操作
*   然后在一个循环中
    *   读取下一个数据包
    *   执行我的操作这一直持续到我到达文件标记的末尾。

如您所料，当文件很大时，串行读取每个数据包并进行处理是一件耗时的事情。我想以某种方式并行化此操作，即数据包生成操作并将其放入某个阻塞队列中，然后从队列中并行检索每个数据包并执行我的操作。

有人可以建议我如何并行生成这些数据包吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:30:18.840

您应该只在文件中顺序读取一个线程，因为我假设文件位于单个驱动器中。读取文件受到 IO 速度的限制，因此在 CPU 中并行化它没有意义。事实上，非顺序读取实际上会显着降低您的性能，因为常规硬盘驱动器是为顺序 IO 设计的。对于它读取的每个数据包，它应该将该对象放入线程安全队列中。

现在您可以开始并行处理数据包。创建多个线程并让它们分别从队列中读取数据包。每个线程都应该进行处理并将其放入某个“完成”队列中。

一旦 IO 线程读完文件，就应该设置一个标志，这样一旦队列为空，工作线程就会停止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T22:35:14.183

如果您使用的是带有盘片的磁盘（即不是 SSD），那么让多个线程读取文件是没有意义的，因为您所要做的就是破坏磁盘，从而导致磁盘臂引入毫秒延迟。如果您有 SSD，那就另当别论了，您可以并行读取。

相反，您应该让一个线程从文件中读取数据并创建数据包，然后执行以下操作：

*   等待共享信号量“A”（已初始化为某个数字，该数字将成为您的“最大缓冲数据包”计数）
*   锁定共享对象
*   将数据包附加到 LinkedList
*   向另一个共享信号量“B”发出信号（这个信号量正在跟踪缓冲区中数据包的计数）

然后您可以让许多其他线程执行以下操作：

*   等待“B”信号量（以确保有要处理的数据包）
*   锁定共享对象
*   在 LinkedList 上执行 getFirst() 并将数据包存储在局部变量中
*   信号量“A”以允许另一个数据包进入缓冲数据包列表

这将确保您通过以一个连续的顺序对数据包进行条带化，从而尽可能快地（从盘片磁盘）读取数据包，并确保您一次处理多个数据包而无需任何轮询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:24:28.970

我猜已知的快速方法是使用 java.nio.MappedByteBuffer

# haskell - 当我将模块上传到 HackageDB 时，此警告消息是什么意思？

> ID：11110315
> 
> 赞同：10
> 
> 时间：2012-06-19T22:18:52.157
> 
> 标签：haskell, hackage

当我将模块上传到 Hackage 时，我收到以下错误消息：

“暴露的模块使用未分配的顶级名称”

我将模块声明为 .cabal 文件中的公开模块。还有什么我应该做的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-20T02:59:07.580

[似乎 hackage 强制您在模块的层次结构](http://www.haskell.org/haskellwiki/Hierarchical_module_names)中使用常见的顶级名称之一，例如`Data`, `Control`, `System`。

所以你不能命名你的香蕉弹射器库`Banana.Catapult`，而是`System.Banana.Catapult`你认为你的库适合的任何地方。

# vim - vim插入模式下跳出引号？

> ID：11110322
> 
> 赞同：2
> 
> 时间：2012-06-19T22:19:32.903
> 
> 标签：vim

我正在使用 delimitMate 插件来获取自动换行引号。在插入模式下如何跳出这些引号？不反对键映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:01:03.460

在插入模式下，`Ctrl-o`立即按（小写），然后按`A`（大写）。您将被带到当前行的末尾并继续处于插入模式。

希望有帮助。

编辑：如果您希望跳出引号并立即降落在结束引号的右侧：在插入模式下，按`Ctrl-o`（小写）紧跟`f"`（f 后跟引号），然后按`right`箭头键。您可以为该组合分配一个键映射。

# javascript - History.js 替换了错误的内容

> ID：11110335
> 
> 赞同：4
> 
> 时间：2012-06-19T22:21:44.480
> 
> 标签：javascript, jquery, ajax, browser-history, history.js

我的 JavaScript 中有以下启动；顺便说一句，我总是使用 github 中显示的代码。完整的代码可以在[这里看到](https://raw.github.com/gist/854622/ajaxify-html5.js)

```
var
        /* Application Specific Variables */
        contentSelector = '.tab-content,.page-content,article:first,.article:first,.post:first',
        $content = $(contentSelector).filter(':first'),
        contentNode = $content.get(0),
        $menu = $('#menu,#nav-sub,.nav,.nav-sub:first').filter(':first'),
        activeClass = 'active selected current youarehere open',
        activeSelector = '.active,.selected,.current,.youarehere, .open',
        menuChildrenSelector = '> li,> ul > li',
        /* Application Generic Variables */
        $body = $(document.body),
        rootUrl = History.getRootUrl(),
        scrollOptions = {
            duration: 800,
            easing:'swing'
        }; 
```

问题在于：

```
contentSelector = '.tab-content,.page-content,article:first,.article:first,.post:first', 
```

并在：

```
$menu = $('#menu,#nav-sub,.nav,.nav-sub:first').filter(':first'), 
```

当菜单点击进去时`.nav`，不得不改变`.page-content`。

单击菜单时`.nav-sub`，必须将内容替换为`.tab-content`

问题是，两个菜单都发生了变化`.page-content`，而不仅仅是选项卡内容或页面内容。

知道如何改变这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:23:59.510

修复您的内容选择

从改变

```
contentSelector = '.tab-content,.page-content,article:first,.article:first,.post:first' 
```

至

```
contentSelector = '.tab-content, .page-content, .article:first, .post:first' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T04:27:09.493

History.js 没有替换错误的内容；ajaxify-html5.js（您正在使用的脚本）完全按照它的设计：

*   如果用户单击内部链接（并且该链接没有`no-ajaxy`类），则脚本会拦截单击，停止浏览器加载页面，并为页面发起 Ajax 请求。

    请注意，这包括页面上的所有内部链接，而不仅仅是菜单中的链接。

*   当 Ajax 请求完成时，脚本将当前页面上的内容替换为响应中的内容（并执行一些其他巧妙的操作，例如`activeClass`在右侧菜单项上设置 ，更新页面标题并从响应中运行脚本）。

    该脚本使用找到的第一个元素`contentSelector`作为“内容”节点。这不取决于用户点击了哪个链接。

* * *

如果您只想“ajaxify”菜单链接，您可以更改（第 95 行）：

```
$body.ajaxify(); 
```

改为调用`.ajaxify()`您的菜单元素。

如果您想用新内容更新不同的元素，您可以更改（第 145 行）：

```
$content.html(contentHtml).ajaxify().css('opacity',100).show(); /* you could fade in here if you'd like */ 
```

改为更新另一个元素。

# windows - 解码没有流的 H.264

> ID：11110346
> 
> 赞同：0
> 
> 时间：2012-06-19T22:22:32.793
> 
> 标签：windows, h.264

我有一个应用程序，其中我有来自存储在专有数据库中的 RTSP 流的 H.264 帧。我需要能够向 H.264 解码器呈现一个帧（当然是按顺序排列的帧）并取回解码后的帧（位图等）输出。我不能使用传统的 DirectShow 流，因为我没有流。有没有可以以这种方式使用的编解码器？稍后我也需要采用其他方式（给定位图或其他格式的图像，创建一个 H.264 流）。您可以提供的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T13:49:05.413

As Isso mentioned already, you can push the H.264 data into DirectShow pipeline and have the frame decoded. Additionally to this, there is [H.264 Video Decoder](http://msdn.microsoft.com/en-us/library/windows/desktop/dd797815%28v=vs.85%29.aspx) MFT (Windows 7 and more recent only) which might be an easier way to use the decoder and to apply it to an individual "frame". You can use other decoders as well, such as `FFmpeg`/`libavcodec` however you would still need to interface to the decoders typically designed for stream processing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T02:17:48.983

创建一个 DirectShow Source Filter，它从数据库中组装 h264 流，然后您可以将其传递给标准 DirectShow H264 解码器。查看 DirectShow 示例以获取示例源代码。

# objective-c - 在 iPhone 屏幕上绘制指南针方位

> ID：11110348
> 
> 赞同：0
> 
> 时间：2012-06-19T22:22:37.943
> 
> 标签：objective-c, ios, gps, coordinates

好的，这是我的问题，

假设您的方位角为 80 度。我想用一个简单的 10x10 正方形在 iPhone 屏幕上绘制出来。让我们计算一下纵向模式下 iPhone 的顶部是北。

关于我将如何做到这一点的任何想法？

顺便说一句 - 我不想使用以下方法：

```
CGAffineTransform where  = CGAffineTransformMakeRotation(degreesToRadians(x_rounded));
[self.compassContainer2 setTransform:where]; 
```

我想通过在 iPhone 屏幕上设置 X -Y 线手动在屏幕上绘图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:11:54.460

```
- (void)drawRect:(CGRect)rect
{
    float compass_bearing = 80.0;  // 0 = North, 90 = East, etc.

    CGContextRef theContext = UIGraphicsGetCurrentContext();
    CGMutablePathRef path = CGPathCreateMutable();

    CGPathMoveToPoint(path, NULL, 5.0, 5.0);
    CGPathAddLineToPoint(path, NULL,
        5.0 + 5.0 * cos((compass_bearing - 90.0) * M_PI / 180.0),
        5.0 + 5.0 * sin((compass_bearing - 90.0) * M_PI / 180.0));

    CGContextSetLineWidth(theContext, 2.0);
    CGContextSetStrokeColorWithColor(theContext, [UIColor blackColor].CGColor);
    CGContextAddPath(theContext, path);
    CGContextStrokePath(theContext);

    CGPathRelease(path);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:12:48.077

所以在我看来，你想要完成的事情应该存在于`drawRect`自定义视图的方法中，然后这个视图将通过你想要的任何方法（即故事板或以编程方式）添加到你的屏幕上。这是一个可能的实现，您可以使用它根据某个“角度”从视图中心绘制一条直线：

```
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    // Drawing code
    CGFloat angle = 0.0 /180.0 * M_PI ;

    //Set this to be the length from the center
    CGFloat lineDist = 320.0;
    CGContextSetLineWidth(context,  5.0);
    //Set Color
    [[UIColor redColor] setStroke];

    //Draw the line
    CGContextBeginPath(context);
    //Move to center
    CGContextMoveToPoint(context, self.frame.size.width/2, self.frame.size.height/2);

    //Draw line based on unit circle
    //Calculate point based on center starting point, and some movement from there based on the angle.
    CGFloat xEndPoint = lineDist * sin(angle) + self.frame.size.width/2;
    //Calculate point based on center starting point, and some movement from there based on the angle. (0 is the top of the view, so want to move up when your answer is negative)    
    CGFloat yEndPoint = -lineDist * cos(angle) + self.frame.size.height/2;

    CGContextAddLineToPoint(context, xEndPoint, yEndPoint);

    CGContextStrokePath(context);
} 
```

# php - 将 php get 变量重写为另一个 get 变量

> ID：11110351
> 
> 赞同：0
> 
> 时间：2012-06-19T22:23:06.633
> 
> 标签：php, apache, mod-rewrite

我最近更改了我的站点源代码，所有内容都经过测试并按预期工作，但我有许多来自其他地方的旧链接，我想重定向。

我的旧网站使用了类似的链接

mypage.php?id=abc123

我需要这个重定向到

mypage.php?user=abc123

感谢任何可以帮助我尝试不同的东西但无法弄清楚的人

我本来只是更改了 php 文件中的 $_GET 变量，但它是加密的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:32:37.547

你会在你的 .htaccess 文件中使用这样的东西

```
RewriteEngine On
RewriteBase /
RewriteRule  ^mypage\.php\?id=(.*)$ mypage.php?user=$1 [L,R=301] 
```

# solr - Solr 拼写检查器不返回任何结果

> ID：11110352
> 
> 赞同：5
> 
> 时间：2012-06-19T22:23:13.357
> 
> 标签：solr, lucene, spell-checking

我正在开发一个需要我第一次使用 Solr 的应用程序。我进行了设置，索引了正确的数据，并根据需要进行了查询，但我似乎*无法*让拼写检查组件正常工作。无论我查询什么，拼写检查器都不会返回任何建议。我已经包含了我的 solrconfig 和 schema.xml 的相关部分。

**架构.xml**

```
<fieldType name="textSpell" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
  <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.StandardFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true"  expand="true"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.StandardFilterFactory"/>
  </analyzer>
</fieldType>

<!-- CUT -->

<field name="spell" type="textSpell" indexed="true" stored="true" /> 
```

**solrconfig.xml**

```
<requestHandler name="/select" class="solr.SearchHandler">
   <lst name="defaults">
     <str name="defType">edismax</str>
     <str name="spellcheck.dictionary">default</str>
     <str name="spellcheck.onlyMorePopular">false</str>
     <!-- <str name="spellcheck.extendedResults">false</str> -->
     <str name="spellcheck.count">3</str>

    <str name="qf">
      frontlist_flapcopy^0.5 title^2.0  subtitle^1.0 series^1.5 author^3.0 frontlist_ean^6.0
    </str>
    <str name="pf">
      frontlist_flapcopy^0.5 title^2.0  subtitle^1.0 series^1.5 author^3.0 frontlist_ean^6.0
    </str>
    <str name="fl">
      title,subtitle,series,author,eans,formats,prices,frontlist_ean,onsaledate,imprint,frontlist_flapcopy
    </str>
    <str name="mm">
      2&lt;-1 5&lt;-2 6&lt;90%
    </str>
    <int name="ps">100</int>
    <bool name="hl">true</bool>
    <str name="q.alt">*:*</str>
    <str name="hl.fl">title,subtitle,series,author,frontlist_flapcopy</str>
    <str name="f.title.hl.fragsize">0</str>
    <str name="f.title.hl.alternateField">title</str>
    <str name="f.subtitle.hl.fragsize">0</str>
    <str name="f.subtitle.hl.alternateField">url</str>
    <str name="f.series.hl.fragsize">0</str>
    <str name="f.series.hl.alternateField">url</str>
    <str name="f.author.hl.fragsize">0</str>
    <str name="f.author.hl.alternateField">url</str>
    <str name="f.frontlist_flapcopy.hl.fragsize">0</str>
    <str name="f.frontlist_flapcopy.hl.alternateField">url</str>

    <str name="echoParams">explicit</str>
    <float name="accuracy">0.7</float>
   </lst>

   <lst name="appends">
       <str name="fq">forsaleinusa:true</str>
   </lst>
   <arr name="last-components">
      <str>spellcheck</str>
   </arr>
</requestHandler>

<!-- CUT -->

<searchComponent name="spellcheck" class="solr.SpellCheckComponent">
  <lst name="spellchecker">
    <str name="name">default</str>
    <str name="classname">solr.IndexBasedSpellChecker</str>
    <str name="field">spell</str>
    <str name="spellcheckIndexDir">/path/to/my/spell/index</str>
    <str name="accuracy">0.7</str>
    <float name="thresholdTokenFrequency">.0001</float>
  </lst>

  <lst name="spellchecker">
    <str name="name">jarowinkler</str>
    <str name="classname">solr.IndexBasedSpellChecker</str>
    <str name="field">spell</str>
    <str name="distanceMeasure">org.apache.lucene.search.spell.JaroWinklerDistance</str>
    <str name="spellcheckIndexDir">/path/to/my/spell/index</str>
  </lst>

  <str name="queryAnalyzerFieldType">textSpell</str>
</searchComponent> 
```

当我去`http://localhost:8983/solr/select/?q=query&spellcheck.build=true`查看/path/to/my/spell/index 中生成的文件时，有一个segments.gen 和一个segments_1，它们都只包含几个字节的二进制数据。然后，当我输入查询并附`&spellcheck=true`加到查询字符串时，无论我的查询如何，我都没有收到*任何建议：*

```
<lst name="spellcheck">
  <lst name="suggestions"/>
</lst> 
```

知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T02:44:08.693

我有一个非常相似的问题，我永远无法解决。有人在我的问题上发布了详细的答案，也许可以帮助您：

[solr 建议程序不返回任何结果](https://stackoverflow.com/questions/6653186/solr-suggester-not-returning-any-results/6859478#6859478)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:38:42.767

我不久前解决了这个问题，但回想起来，问题是我使用多个`<copyField/>`指令将数据复制到“spell”字段，但我没有`multiValued="true"`在该字段上设置。当我将拼写检查字段设置为多值时，它就像一个魅力！

# php - PHP连接到FTP服务器

> ID：11110358
> 
> 赞同：1
> 
> 时间：2012-06-19T22:24:28.443
> 
> 标签：php, mysql

你好我有我的代码连接到我的 ftp 服务器

```
$conn_id = ftp_connect($ftp_server);

// login with username and password
$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

// check connection
if ((!$conn_id) || (!$login_result)) {
echo "FTP connection has failed!";
echo "Attempted to connect to $ftp_server for user $ftp_user_name";
exit;
} else {
echo "Connected to $ftp_server, for user $ftp_user_name";
//ftp_mkdir($conn_id, $dir);
$contents = ftp_nlist($conn_id, $dir);
//var_dump($contents);
echo "<select name=\"file\">\n";
// Now loop through the files, echoing out a new select option for each one
if (($contents != '.')  && ($contents != '..') ) 
{

foreach( $contents as $fname )

{
   echo "<option>{$fname}</option>\n";
}
echo "</select>\n";

}
} 
```

但该页面仍将目录回显为 . & .. 尽管 $contents != 位; 缺什么？

改成这个->

```
if (($fname != '.')  && ($fname != '..') ) 
{

foreach( $contents as $fname )

{
   echo "<option>{$fname}</option>\n";
}
echo "</select>\n";

}
} 
```

但结果还是一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:26:01.590

您可能想`$fname`在循环内部与 being`.`或进行比较`..`。这可能是你想要的更多。

# php - 为什么我会收到错误消息：“不在对象上下文中使用 $this ......”

> ID：11110362
> 
> 赞同：0
> 
> 时间：2012-06-19T22:24:48.800
> 
> 标签：php, oop, this

$title = 'question' ;) 在此先感谢，我似乎无法弄清楚。

```
class myClass {

    public $myVar = 'hello';

    public function myMethod() {
        echo $this->myVar;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:27:54.723

你在做什么：

```
myClass::myMethod(); 
```

或者：

```
$foo = new myClass();
$foo->myMethod(); 
```

# php - 如何编写一个将返回嵌套在父母下的孩子的MYSQL查询？

> ID：11110363
> 
> 赞同：6
> 
> 时间：2012-06-19T22:24:52.150
> 
> 标签：php, mysql, database

我不知道我所问的是否可能，但这是我的情况。我有一个结构有点像这样的表：

```
+--------------------------------------------------+
|   id   |   parent_id   |   name   |   category   | ....
+--------------------------------------------------+
|    0   |       -1      |   item0  |      1       |
|    1   |        0      |   item1  |      1       |
|    2   |        0      |   item2  |      1       |
|    3   |        2      |   item3  |      1       | 
|    4   |        2      |   item4  |      1       | 
|    5   |       -1      |   item5  |      1       | 
+--------------------------------------------------+ 
```

parent_id 为 -1 表示它是没有父项的“基础”项。每个项目将有更多的信息列。我需要以某种方式输出嵌套类别中的所有项目，如下所示：

```
item0 => item1    
      => item2
            => item3
            => item4  
item5 
```

我不知道这是否有意义，但希望它有意义！

我能想到的唯一方法是进行查询以获取所有“基本”项目（查询 parent_id = -1 的行）然后遍历每个结果行，查询其 parent_id 等于当前的行行的 id，然后重复这个过程越来越深，直到没有更多的子项作为基本项。

有没有更好的办法？

谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T22:34:27.830

这在纯 SQL 中是不可能的。

SQL 旨在处理关系数据而不是树（分层数据）。

您可以在 SQL 模式中表示树，但是您无法按照您的意图生成树。

唯一的方法是通过尽可能多地加入您存储的级别来获得可用的结果。

您当前的模式可能支持多个级别，但是，管理超过一或两个级别将非常困难。

您可能对[嵌套集模型](http://en.wikipedia.org/wiki/Nested_set_model)或[在 mysql 中管理分层数据感兴趣](http://www.vbmysql.com/articles/database-design/managing-hierarchical-data-in-mysql)

有一些像[这样](http://gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2)的嵌套集的实现可以与 Doctrine 2 一起使用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:38:57.107

这在纯 SQL 中是不可能的，它是关系模型中引起最多批评的方面之一。

我建议您阅读这篇文章中的链接：[SQL "tree-like" query - most parent group](https://stackoverflow.com/questions/1136041/sql-tree-like-query-most-parent-group)

而且，如果您的应用程序过于依赖于此，我建议您查看一些可以更好地表示此类数据的非关系型数据库，例如 MongoDB (www.mongodb.org)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:53:19.127

我希望我能很好地理解你的问题（这里已经很晚了，我刚从酒吧来），如果我没有，请纠正我，我会重写我的答案。

从给出的场景来看，我猜还有另一个父表，不是吗？

让我们想象它的属性是 id 和 name。Children 表是您给定的（没有不必要的属性）。

```
mysql> insert into parent(name) values ('petr'),('tomas'),('richard');

mysql> insert into children(name,parent_id) values('michal',1),('tomas',1),('michal');

mysql> select parent.id,parent.name,children.name from parent left join children on parent.id = children.parent_id;

+----+---------+--------+
| id | name    | name   |
+----+---------+--------+
|  1 | petr    | michal |
|  1 | petr    | tomas  |
|  2 | tomas   | NULL   |
|  3 | richard | michal |
+----+---------+--------+ 
```

为了多次执行此操作（父母得到孩子得到孩子得到孩子等等。）您可以通过使用多个连接来完成此操作。

```
mysql> select parent.id,parent.name as Parent,children.name as Child,children2.name as Child2 from parent left join children on parent.id = children.parent_id left join children2 on children.id = children2.parent_id;
+----+---------+--------+--------+
| id | Parent  | Child  | Child2 |
+----+---------+--------+--------+
|  1 | petr    | michal | NULL   |
|  1 | petr    | tomas  | dan    |
|  1 | petr    | tomas  | pavel  |
|  2 | tomas   | NULL   | NULL   |
|  3 | richard | michal | michal |
+----+---------+--------+--------+ 
```

如果我没有回答您的问题或者您需要进一步解释，请告诉我；]

问候，

雷莱斯

# cakephp - 在 cakephp 中从 webroot 重定向用户

> ID：11110368
> 
> 赞同：1
> 
> 时间：2012-06-19T22:25:07.447
> 
> 标签：cakephp, deployment

我正在尝试使用 cakePHP 应用程序完成部署过程。我正在努力弄清楚如何禁用对我的 webroot 文件夹的访问。

例如，我在 webroot/images 中有网站的所有图像

如果用户尝试以 URL 的形式访问此页面，则允许他们查看整个站点中使用的所有图像的列表。与 webroot/js、webroot/css 等相同。

如何禁用通过 URL 访问这些文件夹？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:40:07.470

您想禁用目录列表吗？或者拒绝访问图像本身？

阿帕奇：[http ://www.htaccess-guide.com/disable-directory-listings/](http://www.htaccess-guide.com/disable-directory-listings/)

Nginx： http: [//nginxlibrary.com/enable-directory-listing/](http://nginxlibrary.com/enable-directory-listing/)

nginx 的链接是关于如何启用它，但是唯一的区别是开/关设置。

如果您想避免用户可以直接访问图像，您必须通过脚本传递它们（检查 CakePHP MediaView 类），而不是将它们放入 webroot。

# v8 - V8：将对象从 JavaScript 传递给 uv_work 函数

> ID：11110369
> 
> 赞同：4
> 
> 时间：2012-06-19T22:25:13.703
> 
> 标签：v8

好的，我有一个需要从 JavaScript 调用的 C++ 函数，其中一个参数是 JavaScript 对象。JavaScript 看起来像这样：

```
var message = {
    fieldA: 42,
    fieldB: "moo"
};

myObj.send(message, function (err) { console.log("Result: " + err); }); 
```

在 send() 例程中，我需要调用另一个可能阻塞的 C 库中的本机函数。这个库中的所有函数都可能阻塞，所以我一直在广泛使用 uv_queue_work。

这个例程是我第一次遇到问题，这是因为 JavaScript 对象。C++ 代码如下所示：

```
struct SendMessageRequest
{
    Persistent<Object> message;
    Persistent<Function> callback;
    int result;
};

Handle<Value> MyObj::Send(const Arguments& args)
{
    HandleScope scope;

    // Parameter checking done but not included here
    Local<Object> message = Local<Object>::Cast(args[0]);
    Local<Function> callback = Local<Function>::Cast(args[1]);

    // Send data to worker thread
    SendMessageRequest* request = new SendMessageRequest;
    request->message = Persistent<Object>::New(message);
    request->callback = Persistent<Function>::New(callback);

    uv_work_t* req = new uv_work_t();
    req->data = request;

    uv_queue_work(uv_default_loop(), req, SendMessageWorker, SendMessageWorkerComplete);

    return scope.Close(Undefined());
} 
```

这一切都很好，当我尝试在 SendMessageWorker 函数中访问 request->message 时，问题就来了。

```
void SendMessageWorker(uv_work_t* req)
{
    SendMessageRequest* request = (SendMessageRequest*)req->data;
    Local<Array> names = request->message->GetPropertyNames();
    // CRASH 
```

似乎从 request->message 调用方法会导致在一个非常小的地址上发生访问冲突（可能是 V8/node 中某处的 NULL 指针引用）。所以直接使用request->message肯定是错的。我知道要访问我需要这样做的回调函数：

```
request->callback->Call(Context::GetCurrent()->Global(), 1, argv); 
```

我是否需要使用 Context::GetCurrent()->Global() 来访问由 Persistent 模板包装的 Object 类的方法？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:33:13.147

中的代码`SendMessageWorker`不在 JavaScript 上执行 -`uv_queue_work`所做的是在单独的线程中执行您`SendMessageWorker`的代码，因此它可以让 node.js 代码也运行，并且当它准备好时，`SendMessageWorkerComplete`在 JavaScript 线程上执行。

所以你不能在 SendMessageWorker 中使用 JavaScript 变量——如果你真的需要，你必须在调用之前将它们转换为例如 C++ 字符串`uv_queue_work`。

# json - Sencha Touch JSON 格式

> ID：11110380
> 
> 赞同：0
> 
> 时间：2012-06-19T22:26:06.540
> 
> 标签：json, sencha-touch, extjs, sencha-touch-2

我正在尝试输入具有以下格式的 JSON 文件：

> [{ “目标”： “stats.server14”， “数据点”：[[0.0，1340034660]，[0.016666666666666666，1340034720]，[0.11666666666666667，1340034780]，[0.18333333333333332，1340034840]，[0.05，1340034900]，[0.0， 1340034960], [0.05, 1340035020],[null, 1340121000]]}]

我无法弄清楚如何解析它，因为它包含元标记和嵌套数据点。

这是我到目前为止所拥有的：

```
 Ext.regModel('DataModel', {
        fields: [
            {name: 'target', type: 'string'},
            {name: 'datapoints', type: 'string'}
        ] 
```

它只是返回一个大字符串中的数据点。我想让它们分成xValue，yValue。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T09:03:37.853

无论您传递给数据点字段的任何值都会自动转换为字符串，因为您给它输入了“字符串”类型。删除这部分（即，将整个`type: "string"`数据点排除在数据点行之外）。

这应该为您提供更接近您想要的数据点。如果它不完全是您想要的，您可以使用该`convert`函数调整数据点，请参阅[Ext.data.Field](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.data.Field)。

# tsql - TSQL - 与当前行处于不同状态的 COUNT 行数

> ID：11110381
> 
> 赞同：2
> 
> 时间：2012-06-19T22:26:10.123
> 
> 标签：tsql, select, count

这有点难以解释，但从这个例子中应该很清楚。

表表：

```
 Name  State Time
 --------------------
 A     1     1/4/2012
 B     0     1/3/2012
 C     0     1/2/2012
 D     1     1/1/2012 
```

想

```
 select * from TABLE where state=1 order by Time desc 
```

加上一个附加列“已跳过”，其中包含状态 0 中状态 = 1 之后的行数，换句话说，输出应如下所示：

```
Name State Time      Skipped
A    1     1/4/2012  2        -- 2 rows after A where State != 1
D    1     1/1/2012  0        -- 0 rows after D where State != 1 
```

如果有 2 个连续的行处于状态 = 1，也应该报告 0，即这些行之间除了 1 之外没有任何东西。

似乎 CTE 必须在这里，但无法弄清楚如何计算 state != 1 的行。任何帮助将不胜感激。

(MS Sql 服务器 2008)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:12:44.990

我使用 CTE 来建立 RowNo，这样您就不会依赖连续的日期：

```
WITH CTE_Rows as 
(
    select name,state,time,
    rowno = ROW_NUMBER() over (order by [time])
    from MyTable
)
select name,state,time,
    gap = isnull(r.rowno - x.rowno - 1,0)
from
    CTE_Rows r
    outer apply (
        select top 1 rowno 
        from CTE_Rows sub 
        where sub.rowno < r.rowno and sub.state = 1
        order by sub.rowno desc) x
where r.state = 1 
```

如果您只想按日期进行操作，那么它更简单 - 只需要一个`outer apply`：

```
select name,state,r.time,
    gap = convert(int,isnull(r.time - x.time - 1,0))
from
    MyTable r
    outer apply (
        select top 1 time 
        from MyTable sub 
        where sub.time < r.time and sub.state = 1
        order by sub.time desc) x
where r.state = 1 
```

仅供参考，使用的测试数据创建如下：

```
create table MyTable
(Name char(1), [state] tinyint, [Time] datetime)

insert MyTable 
values
('E',1,'2012-01-05'),
('A',1,'2012-01-04'),
('B',0,'2012-01-03'),
('C',0,'2012-01-02'),
('D',1,'2012-01-01') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:00:59.793

好的，给你（有点乱）：

```
SELECT U.CurrentTime, 
       (SELECT COUNT(*) 
        FROM StateTable AS T3 
        WHERE T3.State=0 
        AND T3.Time BETWEEN U.LastTime AND U.CurrentTime) AS Skipped       
FROM (SELECT T1.Time AS CurrentTime, 
             (SELECT TOP 1 T2.Time 
              FROM StateTable AS T2 
              WHERE T2.Time < T1.Time AND T2.State=1 
              ORDER BY T2.Time DESC) AS LastTime 
      FROM StateTable AS T1 WHERE T1.State = 1) AS U 
```

# c# - FileAttributes 和位掩码问题

> ID：11110383
> 
> 赞同：0
> 
> 时间：2012-06-19T22:26:17.413
> 
> 标签：c#, .net, file-io, bit-manipulation, bitmask

出于某种原因，当我尝试根据 FileAttributes.Normal 检查文件时，似乎我的文件几乎都没有出现在我的搜索中。根据 API，这是因为设置了一些其他属性。没关系，我只需要搜索我*不*想要的东西。这就是问题所在。

我对我的位运算符数学非常生疏，尤其是在一次检查多个事物时。我试图弄清楚如果存在一定数量的文件属性中的任何一个（即如果要通过我的搜索，则找不到指定的属性），如何让 if 语句返回 false。这是我到目前为止所写的：

```
if ((File.GetAttributes(stringFileName) &
   (FileAttributes.System | FileAttributes.Hidden | FileAttributes.Archive |
    FileAttributes.Encrypted | FileAttributes.Temporary)) == 0) 
```

我认为它应该综合所有不同的属性并将它们与文件的原始属性进行比较。如果找到任何匹配项，则将整个事物呈现为零。但是，这似乎没有按预期工作。我应该使用与按位和 (&) 不同的运算符吗？

谢谢！

**更新：**

看来问题不是位掩码逻辑，而是 FileAttributes.Archive。由于某种原因，我的文件几乎都标有这个标志（也许表明它们注定要备份？）。至少现在我知道了，知道是成功的一半。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:52:09.080

If you want the files with only the Normal attribute set then

```
if (File.GetAttributes(stringFileName) == FileAttributes.Normal)
    // True, file with only Normal attribute
else
    // False, file with some attributes but not the Normal one 
```

[According to MSDN](http://msdn.microsoft.com/en-us/library/system.io.fileattributes%28v=VS.85%29.aspx) FileAttributes.Normal means `The file is normal and has no other attributes set. This attribute is valid only if used alone.`

After some research I think that the problem lies in the Archive attribute. Would you like to test with this simple code?

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            if (args.Length != 1)
            {
                Console.WriteLine("Usage: CheckAllAtt <directoryName>");
                return;
            }
            var files = Directory.GetFiles(args[0]);
            foreach (string fileName in files)
            {
                FileAttributes att = File.GetAttributes(fileName);
                DumpAttr(fileName, att);
            }
        }
        private static void DumpAttr(string fileName, FileAttributes att)
        {
            StringBuilder sb = new StringBuilder("File: " + fileName);
            if ((att & FileAttributes.Archive) == FileAttributes.Archive)
                sb.Append(" Archive,");
            if ((att & FileAttributes.Compressed) == FileAttributes.Compressed)
                sb.Append(" Compressed,");
            if ((att & FileAttributes.Device) == FileAttributes.Device)
                sb.Append(" Device,");
            if ((att & FileAttributes.Directory) == FileAttributes.Directory)
                sb.Append(" Directory,");
            if ((att & FileAttributes.Encrypted) == FileAttributes.Encrypted)
                sb.Append(" Encrypted,");
            if ((att & FileAttributes.Hidden) == FileAttributes.Hidden)
                sb.Append(" Hidden,");
            if ((att & FileAttributes.Normal) == FileAttributes.Normal)
                sb.Append(" Normal,");
            if ((att & FileAttributes.NotContentIndexed) == FileAttributes.NotContentIndexed)
                sb.Append(" Normal,");
            if ((att & FileAttributes.Offline) == FileAttributes.Offline)
                sb.Append(" Offline,");
            if ((att & FileAttributes.ReadOnly) == FileAttributes.ReadOnly)
                sb.Append(" ReadOnly,");
            if ((att & FileAttributes.ReparsePoint) == FileAttributes.ReparsePoint)
                sb.Append(" ReparsePoint,");
            if ((att & FileAttributes.SparseFile) == FileAttributes.SparseFile)
                sb.Append(" SparseFile,");
            if ((att & FileAttributes.System) == FileAttributes.System)
                sb.Append(" System,");
            if ((att & FileAttributes.Temporary) == FileAttributes.Temporary)
                sb.Append(" Temporary,");

            sb.Length -= 1;
            Console.WriteLine(sb.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:33:02.980

这样做只是为您提供您选择的那些属性。

```
if ((File.GetAttributes(stringFileName) &
    (FileAttributes.System | FileAttributes.Hidden | FileAttributes.Archive |
    FileAttributes.Encrypted | FileAttributes.Temporary)) != 0) 
```

在那里，只需将等式换成不等式。这样，如果存在任何这些属性，则最终结果将非零。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:30:23.323

你的逻辑是倒退的。如果找到任何匹配项，则按位和 (&) 的结果非零。

**例子：**

*匹配：* 0101000 & 0100000 = 0100000 != 0

*不匹配：* 0101000 & 0010000 = 0000000

# php - 用十进制数分割字符串 PHP

> ID：11110387
> 
> 赞同：1
> 
> 时间：2012-06-19T22:26:32.577
> 
> 标签：php

**我有一个这样的字符串：**

> 1.1 Apoyar en la planeación y realización de procedimientos para el mantenimiento de la instrumentación yequipo automatizados。（JEFE DE MANTENIMIENO ELECTRÓNICO，ELÉCTRICO E INSTRUMENTACIÓN。）
> 
> 2.1 Supervisar que losequipos electroncos e instrumentación estén trabajando Correctamente (JEFE DE MANTENIMIENO ELECTRÓNICO, ELÉCTRICO E INSTRUMENTACIÓN.)

**如何在 php 中拆分它以获取数组或元组，例如：**

> [0] => 1.1
> 
> [1]=> Apoyar en la planeación y realización de procedimientos para el mantenimiento de la instrumentación yequipo automatizados。（JEFE DE MANTENIMIENO ELECTRÓNICO，ELÉCTRICO E INSTRUMENTACIÓN。）
> 
> [0]=>2.1
> 
> [1]=>Supervisar que losequipos electroncos e instrumentación estén trabajando Correctamente (JEFE DE MANTENIMIENO ELECTRÓNICO, ELÉCTRICO E INSTRUMENTACIÓN.)

**或类似的东西：**

> [0]=>1.1
> 
> [1]=>Apoyar en la planeación y realización de procedimientos para el mantenimiento de la instrumentación yequipo automatizados。（JEFE DE MANTENIMIENO ELECTRÓNICO，ELÉCTRICO E INSTRUMENTACIÓN。）
> 
> [2]=>2.1
> 
> [3]=>Supervisar que losequipos electroncos e instrumentación estén trabajando Correctamente (JEFE DE MANTENIMIENO ELECTRÓNICO, ELÉCTRICO E INSTRUMENTACIÓN.)

**我一直在尝试使用 preg_split 的正则表达式，例如 [[0-9].]+ 但我不知道它是否可能。谢谢您的帮助。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:32:27.113

认识[preg_split](http://php.net/manual/en/function.preg-split.php)：

```
$testString = '1.1 That big array of 2.1 data which is separated by 2.3 some text';
$testChunks = preg_split('/\s*(\d+\.\d+)\s*/', $testString, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);
print_r($testChunks); 
```

这是一个可以使用的[键盘示例](http://codepad.org/GKMxdMbT)。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:32:17.040

您可以使用[`preg_split`](http://php.net/preg_split)几乎任何模式来拆分字符串。

```
// not tested
preg_split( '/[0-9]{1-99}\.[0-9]{1-99}/', $input ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:34:05.757

正如 wrikken 评论[`preg_split`](http://php.net/manual/en/function.preg-split.php)的那样，`PREG_DELIM_CAPTURE`应该这样做：

```
preg_split('/\s*(\d+\.\d+)\s*/', $subject, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); 
```

我还添加了，`PREG_SPLIT_NO_EMPTY`因为您可能会得到空字符串（例如开头的空字符串），而这个标志可以防止这种情况。

[演示](http://codepad.viper-7.com/ZZ9CjK)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T22:41:35.810

快速而肮脏的 preg_split：

```
$result = preg_split('/([0-9]+.[0-9]+)/',$text,-1,PREG_SPLIT_NO_EMPTY|PREG_SPLIT_DELIM_CAPTURE);

$items = array();
for($i=0;$i<count($result);$i++) {
    if ($i%2===0) {
        $items[$result[$i]] = $result[$i+1];
        $i++;
    }
}

print_R($items); 
```

# css - 绝对定位一个 CSS3 关键帧动画

> ID：11110389
> 
> 赞同：0
> 
> 时间：2012-06-19T22:27:01.063
> 
> 标签：css, css-animations

[http://jsfiddle.net/Wdrgv/](http://jsfiddle.net/Wdrgv/)

所以我想把这个糟糕的动画放在屏幕的底部。很简单，对吧？

没有。当我戴上`position: absolute`时`marquee-container`，动画似乎从屏幕上消失了。

我想我在这里做了一些非常愚蠢的事情，但我看不出是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:42:01.920

The problem is that when you apply the absolute positioning to the container, `'display: block;` no longer stretches it to 100% of its container's width, and since it has no relatively-positioned contents to define its dimensions, it relies solely on explicitly defined values (`height: 24px`) or zero if none exist. I've fixed the problem for you by defining `width: 100%` for your containing element. I've also added a few tweaks to make the size and behavior of your marquee a little more robust given varying text lengths:

[http://jsfiddle.net/Wdrgv/2/](http://jsfiddle.net/Wdrgv/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:31:45.340

我能够通过从`absolute`to更改`fixed`并应用`bottom:0px;`到它来使其工作。

见这里：http: [//jsfiddle.net/Wdrgv/1/](http://jsfiddle.net/Wdrgv/1/)

# c# - 当一个事件是 ASP.NET 中第三个部分文件的一部分时，为什么它可能不会注册？

> ID：11110393
> 
> 赞同：6
> 
> 时间：2012-06-19T22:27:35.270
> 
> 标签：c#, asp.net, events

除了 MyPage.aspx 和 MyPage.aspx.cs 和 MyPage.aspx.designer.cs 之外，我还试图通过创建第三部分文件来添加一些非生产测试代码。我将第三个文件称为 MyPage.aspx.TEST.cs

在部分文件 MyPage.aspx.TEST.cs 中，我写了以下内容：

```
protected override void OnInit(EventArgs e)
{
    Page.LoadComplete += RunTest;
    base.OnInit(e);
}
//Assert.

public void RunTest(object sender, EventArgs e)
{
    //Clever assertions
} 
```

代码编译，然后我反编译代码，就在那里，我可以看到 OnInit 覆盖和 RunTest 方法。

但是当我执行页面时，事件没有注册，也没有运行，也不能设置断点。

我将该代码从 MyPage.aspx.TEST.cs 部分类移到 MyPage.aspx.cs 部分文件中，事件注册并执行。陌生人，当我反编译程序集并进行比较时，该类似乎反编译为相同的代码。

可能无关的线索：

*   该页面使用 autoeventwireup="true"（如果我尝试将我的事件注册到我的 Page_LoadComplete，我仍然会得到相同的行为）
*   该应用程序是一个 Web 应用程序（即使用 proj 文件）
*   部分文件确实编译（如果我在部分文件中引入错误，它将阻止编译，所以我确定部分文件确实被编译）
*   我使用不同的事件（PreRender 等）得到相同的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:41:39.733

这很奇怪，我只是做了同样的实验，所有的事件都被触发了，我有同样的条件，web application，autoeventwireup = true

您是否从另一个基本页面继承？

这是我的部分课程：

```
public partial class _Default
{
    protected override void OnInit(EventArgs e)
    {
        this.LoadComplete += RunTest;
        this.Load += new EventHandler(_Default_Load);
        base.OnInit(e);
    }

    void _Default_Load(object sender, EventArgs e)
    {
        //throw new NotImplementedException();
    }

    void RunTest(object sender, EventArgs e)
    {
        //throw new NotImplementedException();
    }

    protected override void OnPreRender(EventArgs e)
    {
        this.Response.Write("omfgggg");
        this.lblMyMessageTest.Text = "omfg2";
        base.OnPreRender(e);
    }
} 
```

所有事件都有效，如果我取消注释，`//throw new NotImplementedException();`我会按预期得到异常。

尝试以下操作：

*   确保部分页面类的名称相同
*   尝试更改`Page.LoadComplete += RunTest;`为`this.LoadComplete += RunTest;`
*   确保发生异常时不会终止页面的响应
*   如果您有自定义 HTTP 模块，请尝试禁用它，它可能会以某种方式干扰事件

# php - 在php中更新查询不识别变量

> ID：11110396
> 
> 赞同：0
> 
> 时间：2012-06-19T22:28:00.563
> 
> 标签：php, mysql

我正在尝试使用 mysql 查询更新客户信息。变量已在此处定义：

```
$member_id = $_POST['member_id'];
$username = $_POST['username'];
$password = $_POST['password'];
$bizname = $_POST['bizname'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$url = $_POST['url'];
$contact = $_POST['contact'];
$notes = $_POST['notes'];
$sales_rep = $_POST['sales_rep'];
$member_type = $_POST['member_type'];

$password = md5($password); 
```

当我运行以下查询时，数据库中没有任何更新

```
$qry = "update members set username='".$username."',password='".$password."',bizname='".$bizname."',phone='".$phone."',email='".$email."',url='".$url."',contact='".$contact."',notes='".$notes."',sales_rep='".$sales_rep."',member_type='".$member_type."' where member_id='".$member_id."'"; 
```

我回应了`$qry`，结果如下：

```
update members set 
username='',password='d41d8cd98f00b204e9800998ecf8427e',bizname='',phone='',
email='',url='',contact='',notes='',sales_rep='',member_type='' 
where member_id='' 
```

有谁知道为什么只有`$password`变量有值？我曾尝试对其他变量使用 md5 加密，只是为了看看这是否可行并且它们会有值，但显然我只想对密码执行此操作。

编辑：这是 edit-client.php 表单

```
 <?php
require_once('auth.php');
require_once('config.php');
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; />
<title>Untitled Document</title>
</head>

<body>
<?php

//Function to sanitize values received from the form. Prevents SQL injection
function clean($str) {
    $str = @trim($str);
    if(get_magic_quotes_gpc()) {
        $str = stripslashes($str);
    }
    return mysql_real_escape_string($str);
}

//define username variable and sanitize
$username = clean($_POST['username']);

//Run query for selected user and store in an array
$result = mysql_query("select * from members where username='".$username."'");
$row = mysql_fetch_array($result);

//display all clients information in a form to edit
echo '<h1>'.$username.'</h1>';
echo '<form name="update-client" action="update-client.php" />';
echo '<table>';
echo '<tr><td>';
echo '<input type="hidden" name="member_id" value="'.$row['member_id'].'"';
echo '</td></tr>';
echo '<tr><td>';
echo 'Username: <input name="username" type="text" value="'.$username.'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Password: <input name="password" type="text" value="'.$row['password'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Business Name: <input name="bizname" type="text" value="'.$row['bizname'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Phone: <input name="phone" type="text" value="'.$row['phone'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Email: <input name="email" type="text" value="'.$row['email'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Website Address: <input name="url" type="text" value="'.$row['url'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Contact: <input name="contact" type="text" value="'.$row['contact'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Notes: <input name="notes" type="text" value="'.$row['notes'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo 'Sales Representative: <input name="sales_rep" type="text" value="'.$row['sales_rep'].'" />';
echo '</td></tr>';
echo '<tr><td>';
echo '<input name="submit" type="submit" value="Edit" />';
echo '</td></tr>';
echo '</table>';
echo '</form>';

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:42:23.493

当你去限制你必须花费调试的时间时，你总是想检查值/错误。

例如，做这样的事情会更好：

```
if (isset ($_POST['member_id']) && !empty ($_POST['member_id'])) {
  $member_id = $_POST['member_id'];
} else {
  echo 'Error: member_id not provided!';
} 
```

你会想在每个领域都这样做。此外，您希望在代码中构建一些验证（仅检查数字、有效格式、sql 注入等），并且仅在输入完整、有效且安全的情况下继续执行实际 SQL。

这只是最基本的，但从你的脚本开始，你会很快找出问题所在。

但更具体地说，您需要发布 HTML 表单的内容，以便我们能够为您提供适当的帮助。

**编辑：**另外 - 以一种更易于阅读/调试的方式开始格式化 SQL 查询将是一个好主意。以你的为例，我会这样写：

```
$qry = "UPDATE `members`
        SET    `username`    = '$username',
               `password`    = '$password',
               `bizname`     = '$bizname',
               `phone`       = '$phone',
               `email`       = '$email',
               `url`         = '$url',
               `contact`     = '$contact',
               `notes`       = '$notes',
               `sales_rep`   = '$sales_rep',
               `member_type` = '$member_type' 
         WHERE `member_id`   = '$member_id'"; 
```

您还会看到我没有使用“.$var”。因为在 PHP 字符串中使用双引号可以直接引用变量，而如果使用单引号，则必须结束字符串并插入变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:21:28.350

改变：

```
echo '<form name="update-client" action="update-client.php" />'; 
```

到：

```
echo '<form name="update-client" action="update-client.php" method="post"/>'; 
```

你忘了`method="post"`

# mysql - mysql 无法删除损坏的 innodb 表

> ID：11110400
> 
> 赞同：2
> 
> 时间：2012-06-19T22:28:30.447
> 
> 标签：mysql, innodb, disaster-recovery

所以我正在处理一个磁盘空间不足的 MySQL 服务器，并且大部分 InnoDB 表当然已经损坏。我正在尝试删除并重新创建损坏的表，但 MySQL 不会让我对它们做任何事情，包括修复。如您所见，这不是乐趣的尽头。应该注意的是，似乎只有这一个表会导致这些错误中的任何一个。

```
mysql> drop table myschema.mytable;
ERROR 2013 (HY000): Lost connection to MySQL server during query

mysql> repair table myschema.mytable;
#results in the following
| myschema.mytable | repair | Error    | Out of memory; restart server and try again (needed 2 bytes)               |
| myschema.mytable | repair | Error    | Incorrect information in file: './myschema/mytable.frm' |
| myschema.mytable | repair | error    | Corrupt 

mysql> describe myschema.mytable; 
ERROR 1037 (HY001): Out of memory; restart server and try again (needed 2 bytes) 
```

如果我停止服务器并将表的 .frm 和 ibd 文件移开，然后重新启动，我无法重新创建它，因为服务器说它已经存在（即使在 INFORMATION_SCHEMA 中看不到它）。在这种状态下，我也不能放弃它，因为服务器说它不存在。

我一直在寻找答案，但在这一点上，但我不是 DBA，所以我迷路了。我不知道如何修复这张桌子，我也不知道如何摆脱它。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-14T13:19:15.083

我不确定我此时的回答是否对您有用，但我想它会对其他人有所帮助。

这不是很常见的问题。这种损坏的原因可能多种多样，但修复很简单。

`You have to dump your table and recreate it again.`

我们可以通过`innodb_force_recovery=1`在my.cnf文件中设置参数然后重启mysql来实现。

请阅读此链接以获取有关此参数的更多信息。[http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html](http://dev.mysql.com/doc/refman/5.7/en/forcing-innodb-recovery.html)

解决问题后，您可以删除该参数。

干杯!

# apache-pig - 如何在 Pig 中强制 STORE（覆盖）到 HDFS？

> ID：11110403
> 
> 赞同：17
> 
> 时间：2012-06-19T22:28:47.810
> 
> 标签：apache-pig, hdfs

在开发使用*STORE*命令的 Pig 脚本时，我必须为每次运行删除输出目录，否则脚本会停止并提供：

```
2012-06-19 19:22:49,680 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 6000: Output Location Validation Failed for: 'hdfs://[server]/user/[user]/foo/bar More info to follow:
Output directory hdfs://[server]/user/[user]/foo/bar already exists 
```

所以我正在**寻找一种自动删除目录的 in-Pig 解决方案，**如果目录在调用时不存在，也不会阻塞。

在 Pig Latin Reference 中，我找到了 shell 命令调用程序*fs*。不幸的是，只要任何事情产生错误，Pig 脚本就会中断。所以我不能使用

```
fs -rmr foo/bar 
```

（即递归删除）因为如果目录不存在它会中断。有那么一刻我想我可以用

```
fs -test -e foo/bar 
```

这是一个测试，不应该打破，或者我想。但是，Pig 再次将`test`不存在目录上的返回代码解释为失败代码并中断。

Pig 项目有一个[JIRA 票](https://issues.apache.org/jira/browse/PIG-259)，它解决了我的问题，并为*STORE*命令建议了一个可选参数*OVERWRITE*或*FORCE_WRITE 。*无论如何，我出于必要使用 Pig 0.8.1，并且没有这样的参数。

 ** * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-20T09:32:59.293

最后我在[grokbase](http://grokbase.com/p/pig/user/122fadn464/fs-rmr-without-error)上找到了解决方案。由于找到解决方案花费了太长时间，我将在这里复制并添加它。

假设您想使用语句存储输出

```
STORE Relation INTO 'foo/bar'; 
```

然后，为了删除目录，您可以在脚本的开头调用

```
rmf foo/bar 
```

不 ”;” 或需要引号，因为它是一个 shell 命令。

我现在无法重现它，但在某个时间点我收到一条错误消息（关于丢失文件的消息），我只能假设*rmf*干扰了 map/reduce。所以我建议把调用放在任何关系声明之前。在 SET 之后，REGISTER 和默认值应该没问题。

例子：

```
SET mapred.fairscheduler.pool 'inhouse';
REGISTER /usr/lib/pig/contrib/piggybank/java/piggybank.jar;
%default name 'foobar'
rmf foo/bar
Rel = LOAD 'something.tsv';
STORE Rel INTO 'foo/bar'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-23T20:29:14.247

使用 fs 命令后，有很多方法可以做到这一点。对于单个文件，我最终将其添加到脚本的开头：

```
-- Delete file (won't work for output, which will be a directory
-- but will work for a file that gets copied or moved during the
-- the script.)
fs -touchz top_100
rm top_100 
```

对于目录

```
-- Delete dir
fs -rm -r out 
```*

# java - android后台服务中的位置监听器

> ID：11110408
> 
> 赞同：1
> 
> 时间：2012-06-19T22:29:40.110
> 
> 标签：java, android

我进行了很多搜索以找到如何在 Android 后台服务中实现位置侦听器，但没有找到任何正确的答案。我想在后台服务中运行一个线程来一起查找吞​​吐量和位置。任何人都可以通过编写可以找到这些值的一小段代码来向我展示。（经过测试的）。首先十分感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:43:02.497

I've used "little-Fluffy-location" and it's great!

I can hardly feel the battery consumption, and it was easy to use.

[http://code.google.com/p/little-fluffy-location-library/](http://code.google.com/p/little-fluffy-location-library/)

# scala - Scala 路径相关的参数返回类型

> ID：11110409
> 
> 赞同：6
> 
> 时间：2012-06-19T22:29:41.453
> 
> 标签：scala, parameters, path-dependent-type

在以下代码中使用 Eclipse 插件 2.1.0 中的 2.10.0M3 为 2.10M3。我正在使用针对 JVM 1.5 的默认设置

```
class GeomBase[T <: DTypes] {          
  abstract class NewObjs {
    def newHex(gridR: GridBase, coodI: Cood): gridR.HexRT          
  }

  class GridBase {
    selfGrid =>
      type HexRT = HexG with T#HexTr

    def uniformRect (init: NewObjs) {
      val hexCood = Cood(2 ,2)
      val hex: HexRT = init.newHex(selfGrid, hexCood)//  won't compile
    }
  }
} 
```

错误信息：

```
Description Resource Path Location Type type mismatch;
  found: GeomBase.this.GridBase#HexG with T#HexTr
  required: GridBase.this.HexRT (which expands to) GridBase.this.HexG with T#HexTr GeomBase.scala 
```

为什么编译器认为该方法返回类型投影 GridBase#HexG 而它应该是 GridBase 的这个特定实例？

编辑转移到更简单的代码类以响应现在收到不同错误消息的注释。

```
package rStrat
class TestClass {
  abstract class NewObjs {
    def newHex(gridR: GridBase): gridR.HexG
  }     
  class GridBase {
    selfGrid =>         

    def uniformRect (init: NewObjs) {
      val hex: HexG = init.newHex(this) //error here                        
    }       

    class HexG {
      val test12 = 5                 
    }
  }
} 
```

.

```
Error line 11:Description   Resource    Path    Location    Type
type mismatch;  found   : gridR.HexG  required: GridBase.this.HexG
possible cause: missing arguments for method or constructor TestClass.scala /SStrat/src/rStrat  line 11 Scala Problem 
```

更新我已经切换到 2.10.0M4 并将插件更新到新版本的 Eclipse 上的 M4 版本并切换到 JVM 1.6（和 1.7），但问题没有改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T07:50:26.913

记录为[SI-5958](https://issues.scala-lang.org/browse/SI-5958) - 在相关方法类型中替换它

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T07:37:14.157

这现在从 2.10.0M7 开始工作。该错误已得到修复。

```
val hex: HexRT = init.newHex(selfGrid, hexCood) //now compiles and runs correctly 
```

# python - 使用 ctypes 的联合操作不起作用

> ID：11110418
> 
> 赞同：2
> 
> 时间：2012-06-19T22:30:25.667
> 
> 标签：python, ctypes

我有一个这样的 C 结构：

```
typedef struct {
    my_domain_type_t type; 
    my_domain_union_t u;
    my_domain_int32_list_t list;
} my_domain_value_t;

typedef struct {
    int32_t min;
    int32_t max;
} my_domain_int32_range_t; 
```

我想从 ctypes 调用的 C 函数：

```
int64_t myData::get_min(const my_domain_value_t &value)
{
    int min_value = 0;
    my_domain_type_t dt = value.type;

    if (dt == 0)
    {
        my_domain_int32_range_t range = value.u.range;
        min_value = range.min;
        printf("min_value=%d\n", min_value);
    }

    return min_value;
} 
```

ctypes 定义：

```
class myDomainInt32RangeT(Structure):
    _fields_ = [ ('min', c_long),
                 ('max', c_long) ]

class myDomainUnionT(Union):
    _fields_ = [ ('range', myDomainInt32RangeT ) ]

class myDomainValueT(Structure):
    _fields_ = [ ('type', c_int ),
                 ('u', myDomainUnionT ),
                 ('list', myDomainInt32ListT ) ]

class myData(object):
    def __init__(self):
        self.object = myDataX.myData_new()

    def get_min(self, arg1):
        myDataX.myData_get_min.argtypes = [ c_void_p, POINTER(myDomainValueT) ]
        myDataX.myData_get_min.restype = c_longlong
        return myDataX.mydata_get_min(self.object, arg1) 
```

Python代码：

```
mydataY = myData()
domainRange = myDomainInt32RangeT()
domainRange.min = c_long(3)
domainRange.max = c_long(5)
domainUnion = myDomainUnionT()
domainUnion.range = domainRange
domainValue = myDomainValueT()
domainValue.type = 0
domainValue.u = domainUnion
domainValue.list = myDomainInt32ListT()
b = mydataY.get_min( byref(domainValue) )
print(b) 
```

我期望 min_value 的值为 3，但我一直得到 0。C 代码也打印 0。看起来联合没有正确设置/传输。

我做错什么了 ？。

TIA,

约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:43:31.333

如果您希望 myDomainInt32RangeT 结构与 my_domain_int32_range_t 结构互换使用，它们必须定义兼容的类型。但他们不会：

```
typedef struct {
    int32_t min;
    int32_t max;
} my_domain_int32_range_t; 
```

这定义了一对 int32_t 值。

```
class myDomainInt32RangeT(Structure):
    _fields_ = [ ('min', c_long),
                 ('max', c_long) ] 
```

这定义了一对任意长的值。

问题是 int32_t 和 long 不是同一类型。修复很简单：更改一个以匹配另一个（例如，使用 c_int32 而不是 c_long）。

如果你想了解为什么你会得到 0，那就有点牵强了。

int32_t 的规则说它必须是 32 位。长期的规则说它必须至少是 32 位。在大多数 32 位平台和 64 位 Windows 上，它正好是 32 位。然而，在大多数其他 64 位平台上，它是 64 位的。[（有关详细信息，请参阅http://en.wikipedia.org/wiki/64-bit](http://en.wikipedia.org/wiki/64-bit)上有关 LLP64 与 LP64 的讨论。）

您可能在 64 位 Intel Mac 或 Linux 系统上，并使用默认 Python。因此，您的 long 以及 ctypes.c_long 是 64 位整数。所以，看看 myDomainInt32RangeT 的布局：

```
1st 32 bits: low half of the 64-bit "min" value
2nd 32 bits: high half of the 64-bit "min" value
3rd 32 bits: low half of the 64-bit "max" value
4th 32 bits: high half of the 64-bit "max" value 
```

相比之下，my_domain_int32_range_t 的布局是这样的：

```
1st 32 bits: 32-bit "min" value
2nd 32 bits: 32-bit "max" value 
```

所以，如果你构造一个 myDomainInt32RangeT(3, 5)，你正在创建的是：

```
1st 32 bits: 3 (low half of 64-bit 3)
2nd 32 bits: 0 (high half of 64-bit 3)
3rd 32 bits: 5 (low half of 64-bit 5)
4th 32 bits: 0 (high half of 64-bit 5) 
```

当您尝试将其解释为 my_domain_int32_range_t 时，它会看到：

```
1st 32 bits: 3
2nd 32 bits: 0 
```

因此，您的“最小值”值为 3，而您的“最大值”值为 0。

您还可能通过传递一些代码认为是 128 位而其他代码认为它是 64 位的东西来最终分割对象和/或覆盖内存。例如，如果您创建一个 my_domain_int32_range_t，将其通过引用传递给 Python，然后尝试设置其“最大值”值，那么您将设置一个只有 2 个对象的第 3 位和第 4 位 32 位，这意味着您re 实际上覆盖了内存中的下一个对象。

上面的详细信息假设您使用的是小端系统（如 x86_64），而不是大端系统或不同的系统（是否有任何 VAX 端 LP64 平台？使用 Python？）。在具有 Python 的 64 位 big-endian PowerPC 构建的 PowerMac G5 上，您将得到 (0, 3) 而不是 (3, 0)。但基本思想是一样的。

# python - 在 scikit-learn 中为 KNN 使用除 p-norm 之外的其他成对距离度量

> ID：11110419
> 
> 赞同：1
> 
> 时间：2012-06-19T22:30:32.273
> 
> 标签：python, machine-learning, scikit-learn, distance, knn

对于[scikit-learn 的 KNN 包](http://scikit-learn.org/dev/modules/neighbors.html#unsupervised-nearest-neighbors)，可以指定`sklearn.metrics.pairwise`不是 p 范数或 Minkowski 距离的成对距离度量（来自包）吗？例如，我可以使用[RBF 内核](http://scikit-learn.org/dev/modules/generated/sklearn.metrics.pairwise.rbf_kernel.html#sklearn.metrics.pairwise.rbf_kernel)吗？甚至是[余弦距离](http://scikit-learn.org/dev/modules/generated/sklearn.metrics.pairwise.pairwise_distances.html#sklearn.metrics.pairwise.pairwise_distances)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:28:54.483

不幸的是，用于在中低维数上计算快速精确 NN 搜索的 BallTree 算法不能与任意指标一起使用。

# xcode - 在 Xcode 4 中使用断点时，有没有办法跳过机器调用？

> ID：11110421
> 
> 赞同：3
> 
> 时间：2012-06-19T22:30:44.077
> 
> 标签：xcode, breakpoints

问题在标题中，有没有办法跳过机器调用，例如：

```
0x294509e:  pushl  %esi 
```

使用断点单步执行 Xcode 代码时？

换句话说，当断点被捕获时，有没有办法在使用单步按钮时查看我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:55:41.230

看起来这是不可能的。如果我错了，请有人纠正我。

# android - NoSuchMethodError Bundle.getString()

> ID：11110423
> 
> 赞同：3
> 
> 时间：2012-06-19T22:30:50.347
> 
> 标签：android

我得到了一些奇怪的日志，这显然只发生在版本低于 3 的 Android 设备上（用模拟器检查）。当您更改方向并使用不为空的 Bundle 调用 onCreate() 或 onRestoreInstanceState() 时，它会崩溃

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_menu);}
    if (savedInstanceState != null) {
        mSlug = savedInstanceState.getString(KEY_SLUG, null);
    }
}@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString(KEY_SLUG, mSlug);
}@Override
protected void onRestoreInstanceState(Bundle outState) {
    super.onRestoreInstanceState(outState);
    if (outState != null) {
        mSlug = outState.getString(KEY_SLUG, mSlug);
    }
} 
```

LogCat-Log 看起来像：http: [//i.stack.imgur.com/WbivQ.png](http://i.stack.imgur.com/WbivQ.png) 有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T22:34:12.210

[带有 2 个参数的Bundle.getString](http://developer.android.com/reference/android/os/Bundle.html)仅在 API 级别 12 及更高版本中可用。您必须自己指定默认值，而不是将其作为参数传递。

[您以后可以通过单击“按 API 级别过滤”下拉菜单并在文档](http://developer.android.com)的右上角选择适当的 API 级别来自行检查

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-14T23:25:04.780

制作简单

```
mSlug = savedInstanceState.getString(KEY_SLUG, null); 
```

与较旧的 API 兼容，只需将其替换为

```
mSlug = getIntent().hasExtra(KEY_SLUG) ? savedInstanceState.getString(KEY_SLUG) : null; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T09:47:14.563

Just use this function:

```
public static String getStringFromBundle(Bundle bundle, String key, String defaultValue){
if (Build.VERSION.SDK_INT < 12){
    String returns = bundle.getString(key);
    if(returns==null) returns = defaultValue;

    return returns;
} else
    return bundle.getString(key, defaultValue);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T13:32:04.007

**编辑：已修复，请参阅下面的评论。**

对于任何使用 MvvmCross 的人来说，从 4.2.3 开始就有一个错误，这是由于这个原因。只需创建您自己的 FragmentCacheConfiguration 并在此线程中实现其中一种解决方法。 [https://github.com/MvvmCross/MvvmCross/issues/1431](https://github.com/MvvmCross/MvvmCross/issues/1431)

# c# - 如何获取 CollectionViewSource 的第一个元素？

> ID：11110425
> 
> 赞同：3
> 
> 时间：2012-06-19T22:31:02.880
> 
> 标签：c#, wpf, silverlight, xaml, microsoft-metro

我记得看过一些代码 xaml，其中可以从集合中获取第一个元素（如索引 x[0]）。

这是我来自资源的 CollectionViewSource。

```
<CollectionViewSource
            x:Name="groupedItemsViewSource2"
            Source="{Binding Posters}"
            ItemsPath="Posters" /> 
```

如果我在列表框中显示它，它会加载它！

```
<ListBox ItemsSource="{Binding Source={StaticResource groupedItemsViewSource2}}" /> 
```

但是现在，我只想通过 xaml 获取第一个元素。有可能这样做吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T15:20:30.173

我遇到了类似的问题，我所做的是调用[`MoveCurrentToFirst`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.movecurrenttofirst%28v=vs.110%29.aspx)（在 ViewModel 中）

[`SelectedIndex=0`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selectedindex%28v=vs.110%29.aspx) （在 XAML 中的 ListBox 上）是另一种方式，但是当 Collection 视图源不包含任何数据时它会失败。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-13T09:39:22.327

到目前为止我发现的最简单的方法是通过枚举器：

```
ICollectionView view = CollectionViewSource.GetDefaultView(observable);
var enumerator = view.GetEnumerator();
enumerator.MoveNext(); // sets it to the first element
var firstElement = enumerator.Current; 
```

或者你可以对一个扩展做同样的事情并直接在 observable 集合上调用它：

```
public static class Extensions
{
    public static T First<T>(this ObservableCollection<T> observableCollection)
    {
        ICollectionView view = CollectionViewSource.GetDefaultView(observableCollection);
        var enumerator = view.GetEnumerator();
        enumerator.MoveNext();
        T firstElement = (T)enumerator.Current;
        return firstElement;
    }
} 
```

然后从 observable 集合中调用它：

```
var firstItem = observable.First(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:41:13.057

据我所知，有几种方法可以做到这一点。我可能会使用一个单独的属性来返回集合的第一个，或者创建一个 Converter 来返回它绑定到的任何集合或列表中的第一个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-11T10:40:31.500

如上一课所述，您应该使用`ICollectionView`实例。您可以拨打电话获取一份

```
ICollectionView view = CollectionViewSource.GetDefaultView(observable); 
```

并创建扩展方法（使用 c# langversion 9.0）：

```
using System.Diagnostics.CodeAnalysis;

namespace System.ComponentModel
{
    public static class ICollectionViewExtensions
    {
        public static bool TryGetFirstInView<T>(this ICollectionView self, [NotNullWhen(true)] out T? item)
        {
            var enumerator = self.GetEnumerator();
            if (enumerator.MoveNext() && enumerator.Current is T current)
            {
                item = current;
                return true;
            }

            item = default;
            return false;
        }
    }
} 
```

# smalltalk - 是否有任何适用于 Smalltalk 方言的 ETL 工具？

> ID：11110427
> 
> 赞同：4
> 
> 时间：2012-06-19T22:31:30.950
> 
> 标签：smalltalk, etl

...例如，例如 Talend for Java，但它允许以编程方式实现流程。

多个数据源、编排、计算字段、数据透视表是我想要的一些功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-14T12:15:03.810

我们在 Moose 之上构建了一个 ERP 数据转换项目。适用于少量数据（适合 32 位图像）。在具有多个源的 ETL 中，只需为每个输入流/步骤使用一个图像，通过文件或套接字将它们连接在一起。可视化对我们很重要。它允许领域专家指导这个过程。短反馈循环是必不可少的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-08T13:55:00.803

将近 5 年后，是时候重新审视这个答案了。Pharo 和 Moose 支持 64 位。垃圾收集器还不能处理非常大的堆，避免大停顿的增量收集器现在正在积极开发中。如果工作是可分区的，请使用[ImageWorker 之](https://github.com/pharo-contributions/ImageWorker)类的解决方案来使用多个内核将所有数据放在一个图像中，或者[使用 TelePharo](https://github.com/pharo-ide/TelePharo)来远程控制多个图像。也许使用[MQTT](https://github.com/LabWare/MQTT-broker)来集成。对于可视化，有 Roassal2 和 3 或整个[GToolkit](https://github.com/feenkcom/gtoolkit)

# c++ - 在 Windows 7 下使用 VC++ 进行 LPT 错误：“外部组件已引发异常。”

> ID：11110430
> 
> 赞同：0
> 
> 时间：2012-06-19T22:31:47.477
> 
> 标签：c++, windows-7, lpt

我正在尝试在 Windows 7 和 Visual Studio 2010 下将 LPT 端口与 c++ 一起使用

```
#include <conio.h>
int main()
{
    _outp(0x378,00000000);
    int input=_inp(0x278);
} 
```

但我收到了这个错误

```
"External component has thrown an exception." 
```

那么如何处理呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T05:14:46.863

据我所知，出于所有实际目的，Windows 7 不再支持 LPT1，除非**可能**存在系统 BIOS 已知的物理 LPT1 设备。

但是，您仍然可以使用 8 个逻辑打印机端口，编号为 LPT2 到 LPT9。

# objective-c - 填充 UITableView 的核心数据：无法获取 NSString

> ID：11110431
> 
> 赞同：1
> 
> 时间：2012-06-19T22:31:50.547
> 
> 标签：objective-c, uitableview, core-data

我的应用程序存储了玩家的数据，我想用它填充 UITableView，但恐怕我有点迷路了。

这是我的代码：

```
ShowResults.h
#import <UIKit/UIKit.h>

@interface ShowResults : UITableViewController<UITableViewDelegate,UITableViewDataSource, NSFetchedResultsControllerDelegate>

{
    NSManagedObjectContext *managedObjectContext;
    NSFetchedResultsController *fetchedResulstController;
    NSArray *fetchedObjects;
}

@property (nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (nonatomic) NSManagedObjectContext *managedObjectContext;
@property (nonatomic,strong)  NSArray *fetchedObjects;
@end

ShowResults.m
#import "ShowResults.h"
#import "F1AppDelegate.h"
@interface ShowResults ()
@end

@implementation ShowResults
@synthesize managedObjectContext;
@synthesize fetchedResultsController;
@synthesize fetchedObjects;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

F1AppDelegate *appDelegate =[[UIApplication sharedApplication]delegate];
NSManagedObjectContext *context =[appDelegate managedObjectContext];
NSError *error;

if (managedObjectContext != nil) {
    if ([managedObjectContext hasChanges] &&[managedObjectContext save:&error]) {
        NSLog(@"Unresolved error %@,%@",error, [error userInfo]);  
        abort();
    }
}

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription 
                               entityForName:@"Players" inManagedObjectContext:context];

[fetchRequest setEntity:entity];
fetchedObjects = [context executeFetchRequest:fetchRequest error:&error];
// Test reading core data

for (NSManagedObject *player in fetchedObjects) {

    NSLog(@"Name: %@", [player valueForKey:@"name"]);
    NSLog(@"Surname: %@", [player valueForKey:@"surname"]);
    NSLog(@"Address: %@", [player valueForKey:@"address"]);
    NSLog(@"Email: %@", [player valueForKey:@"email"]);
    NSLog(@"Phone: %@", [player valueForKey:@"phone"]);
    NSLog(@"City: %@", [player valueForKey:@"city"]);
    NSLog(@"Country: %@", [player valueForKey:@"country"]);
    NSLog(@"Store: %@", [player valueForKey:@"store"]);
    NSLog(@"Age: %@", [player valueForKey:@"age"]);
    NSLog(@"Gender: %@", [player valueForKey:@"gender"]);
    NSLog(@"Time: %@", [player valueForKey:@"time"]);

   }        
// End test
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
     return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSInteger rows = [fetchedObjects count];
    return rows;
 }

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *MyIdentifier = @"MyIdentifier";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier];
   }

 NSString *pieceOfData  =[NSString stringWithFormat:@"%@", [fetchedObjects objectAtIndex:indexPath.row]];
cell.textLabel.font = [UIFont fontWithName:@"Helvetica" size:14];   
cell.textLabel.text = pieceOfData;
NSLog(@"cellContent: %@",pieceOfData);
return cell;
}
@end 
```

我在控制台输出上得到的是

```
Name: Otto
Surname: Von Bismarck
Address: Schuhe, 3
Email: otto@munchen.de
Phone: +34988556633
City: MÜNCHEN
Country: GERMANY
Store: MÜNCHEN
Age: 44
Gender: Male
Time: 03:01:00

cellContent: <Players: 0x6b8f3c0> (entity: Players; id: 0x6b8b450 <x-coredata://C61C85CA-EB53-4B88-87AF-CC45EABFF8ED/Players/p1> ; data: {
address = "Schuhe, 3";
age = 44;
city = "M\U00dcNCHEN";
country = GERMANY;
email = "otto@munchen.de";
gender = Male;
name = Otto;
phone = "+34988556633";
store = "M\U00dcNCHEN";
surname = "Von Bismarck";
time = "03:01:00";
}) 
```

你能帮我将这些值写入 tableView 单元格吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:12:33.453

看起来你只需要做这样的事情：

```
// in your cellForRowAtIndexPath:
Players *player = [fetchedObjects objectAtIndex:indexPath.row];
// switch email for whatever other property you want to display
cell.textLabel.text = player.email; 
```

看起来您可能需要导入`Players.h`您的课程。

# ios - Core Data + keychain 用于为应用程序创建 ios 帐户

> ID：11110434
> 
> 赞同：0
> 
> 时间：2012-06-19T22:32:07.520
> 
> 标签：ios, xcode, core-data, keychain

我正在尝试实现代码来为我的应用程序创建一个帐户。到目前为止，我认为我已经很好地理解了从文本字段中获取数据并将其存储在 Core Data 数据库中，但我不确定如何将用户创建的 pin 存储在应用程序的钥匙串中。我按照[本教程](http://josebolanos.wordpress.com/2012/03/16/core-data-passwords-in-keychain/)创建了一个名为*Account*的类，我认为它是*AccountBase*的子类。Account.m 文件有一个方法声明：

`- (void)setPassword:(NSString*)aPassword`

现在我很确定这是我想用来为我的应用程序设置“pin”的方法。我不确定如何应用到我的*ViewControllerCreate.m*文件。整个方法如下所示：

```
- (void)setPassword:(NSString*)aPassword 
{
 if (self.username) [KeychainHelper setPassword:aPassword forKey:self.username];

} 
```

到目前为止，我的*ViewControllerCreate.m*文件中有这段代码：

```
- (IBAction)createAccount:(id)sender {

// hide keyboard when login button is pressed
[_createUserTextField resignFirstResponder];

// check if create textfields are empty - WRONG

[self checkTextFieldCharLength];

// check if boolean is true / false
if([self checkTextFieldEmpty] == TRUE ) // empty text fields
{
    NSLog(@"Please fill in text fields");
}

else {
    NSLog(@"Thanks for filling out the text fields.");
    // Core Data - retrieve values from text fields and store in database.
    NSManagedObject *newAccount;
    newAccount = [NSEntityDescription insertNewObjectForEntityForName:@"Account" inManagedObjectContext:_managedObjectContext];
    [newAccount setValue:_createUserTextField forKey:@"username"];
    [newAccount setValue:_createEmailTextField forKey:@"email"];
    [newAccount setValue:_createPhoneNumber forKey:@"phoneNumber"];

    // TODO store pin in keychain

    _createUserTextField.text = @"";
    _createEmailTextField.text = @"";
    _createPhoneNumber.text = @"";
    NSError *error;
    [_managedObjectContext save:&error];
    [_createAccountSuccess setHidden:NO];
    NSLog(@"Succefully created account.");
}
} 
```

任何人都知道当按下“创建”按钮时我将如何将输入的引脚存储到钥匙串中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T02:11:10.270

好吧，感谢@Faded in chat.stackoverflow.com 的帮助，我想出了一个解决方案。修改后的代码如下：

```
// method to pull text from text fields and store in keychain and account database

- (IBAction)createAccount:(id)sender {

[self checkTextFieldCharLength];

// check if create textfields are empty, check if boolean is true / false
if([self checkTextFieldEmpty] == TRUE ) // empty text fields
{
    NSLog(@"Please fill in text fields");
}

else {
    NSLog(@"Thanks for filling out the text fields.");
    // Core Data - retrieve values from text fields and store in database.
    Account *newAccount;
    newAccount = [NSEntityDescription insertNewObjectForEntityForName:@"Account" inManagedObjectContext:_managedObjectContext];
    [newAccount setValue:_createUserTextField.text forKey:@"username"];
    [newAccount setValue:_createEmailTextField.text forKey:@"email"];
    [newAccount setValue:_createPhoneNumber.text forKey:@"phoneNumber"];

    // TODO store pin in keychain
    [newAccount setPassword:_createPinTextField.text];
    NSLog(@"Pin saved is %@", [newAccount password]);

    _createUserTextField.text = @"";
    _createEmailTextField.text = @"";
    _createPhoneNumber.text = @"";
    _createPinTextField.text = @"";
    NSError *error;
    [_managedObjectContext save:&error];
    [_createAccountSuccess setHidden:NO];
    NSLog(@"Succefully created account.");
} 
```

}

# image - Hotmail - HTML 电子邮件表格图像间隙

> ID：11110438
> 
> 赞同：0
> 
> 时间：2012-06-19T22:32:43.637
> 
> 标签：image, html-email, html-table, hotmail

**Hotmail**似乎是唯一在两个承载图像的表格之间产生不必要间隙的客户端。它们应该直接相互嵌套。'显示：块;' （在 img 标签内）不是解决方案，因为我有多个单元格和图像彼此相邻（在带有徽标的标题部分中）。

额外的垂直空间似乎出现在标题部分的 tr、td 或 table 标记中。在 Hotmail 中它创建一个 92px 的高度，在所有其他浏览器中它是 89px（与图像的高度相同）。

*（我还不能发布图片 - 没有足够的代表。）*

**通过** [jsFiddle](http://jsfiddle.net/achimmer/t4Ck4/1/)的代码。

我试过玩线高和边距。我似乎无法在 Hotmail 中做出任何调整来回复。有什么线索吗？（我已经阅读了所有其他 html 电子邮件差距问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T14:49:55.617

尝试将单元格间距和单元格填充设置为“0”。

由于它是 Hotmail，您可能能够通过浏览器的代码检查器（Chrome Inspector 和/或 Firebug）对电子邮件进行故障排除。尝试找出造成差距的因素。

在电子邮件中使用边距并不是一个好主意，因为这会导致很多兼容性问题。此电子邮件在 Outlook 2007/2010/2013 中的行为如何？

# primefaces - Primefaces数据表columnGroup标题用sortBy和filterBy在标题方面踩踏

> ID：11110440
> 
> 赞同：0
> 
> 时间：2012-06-19T22:32:51.400
> 
> 标签：primefaces

我的目标是生成一个包含两个标题行的表格。第一个包含几个跨列单元格，第二个包含所有 1 个单元格标题，但启用了 sortBy 和 filterBy。

```
<p:dataTable ....  >
  <p:columnGroup type="header">
    <p:row>
      <p:column colspan="3" headerText="my header 1" />
      <p:column colspan="3" headerText="my header 2" />
    </p:row>
  </p:columnGroup>
  <p:column sortBy="#{myBean.var1}" filterBy="#{myBean.var1}" headerText="var1">
    <h:outputText value="#{...var1}" />
  </p:column>
  .
  .
</p:dataTable> 
```

我可以使用 sortBy 和 filterBy 来显示 columnGroup 或每列 headerText，但不能同时显示两者。当我混合它们时，每列标题行中的标题组件会消失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T14:29:32.340

事实证明，可以通过 subTable 组件嵌套 dataTables。这个展示示例演示[了在更大的 dataTable 中嵌套子表](http://www.primefaces.org/showcase-labs/ui/datatableSubTable.jsf)，从而实现与标题中的 columnGroups 相结合的过滤和排序。

# visual-studio - 将 tinyxml2 与 Visual Studio、Visual C++ MFC 应用程序一起使用

> ID：11110444
> 
> 赞同：1
> 
> 时间：2012-06-19T22:33:02.577
> 
> 标签：visual-studio, visual-c++

我正在尝试习惯 MFC 开发和 Visual Studio，因此我安装了 Visual Studio 2012 RC 并创建了一个简单的 MFC 应用程序。目前，该应用程序只不过是为我生成的 MFC 向导。

我决定要合并一个 XML 库，所以我[在 github 上找到了这个](https://github.com/leethomason/tinyxml2)。我下载了带有源代码的 ZIP 文件，解压缩，然后在 Visual Studio 中我转到解决方案资源管理器，选择我的解决方案，右键单击并选择“添加”>“现有项目”。我为源代码选择项目文件，它出现在我的解决方案资源管理器树中。

我测试代码编译，它确实如此。但是我不太确定如何从我当前的解决方案中使用它。

我尝试在我的文档中使用此代码：

```
#include "../../TinyXML2/leethomason-tinyxml2-a3efec0/tinyxml2.h"

<...snip...>

BOOL LoadDocumentFromXML(const CString& filename) {

    CT2CA pszConvertedAnsiString (filename);
    std::string s(pszConvertedAnsiString);

    tinyxml2::XMLDocument doc(true);
    if (tinyxml2::XML_NO_ERROR != doc.LoadFile(s.c_str())) {
        return FALSE;
    }

    return TRUE;
} 
```

但是，当我尝试构建项目时出现此链接器错误：

```
------ Build started: Project: GraphApp, Configuration: Debug Win32 ------
  GraphAppDoc.cpp
GraphAppDoc.obj : error LNK2019: unresolved external symbol "public: __thiscall tinyxml2::XMLDocument::XMLDocument(bool)" (??0XMLDocument@tinyxml2@@QAE@_N@Z) referenced in function "int __cdecl LoadDocumentFromXML(class ATL::CStringT<wchar_t,class StrTraitMFC_DLL<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const &)" (?LoadDocumentFromXML@@YAHABV?$CStringT@_WV?$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z)
GraphAppDoc.obj : error LNK2019: unresolved external symbol "public: virtual __thiscall tinyxml2::XMLDocument::~XMLDocument(void)" (??1XMLDocument@tinyxml2@@UAE@XZ) referenced in function "int __cdecl LoadDocumentFromXML(class ATL::CStringT<wchar_t,class StrTraitMFC_DLL<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const &)" (?LoadDocumentFromXML@@YAHABV?$CStringT@_WV?$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z)
GraphAppDoc.obj : error LNK2019: unresolved external symbol "public: int __thiscall tinyxml2::XMLDocument::LoadFile(char const *)" (?LoadFile@XMLDocument@tinyxml2@@QAEHPBD@Z) referenced in function "int __cdecl LoadDocumentFromXML(class ATL::CStringT<wchar_t,class StrTraitMFC_DLL<wchar_t,class ATL::ChTraitsCRT<wchar_t> > > const &)" (?LoadDocumentFromXML@@YAHABV?$CStringT@_WV?$StrTraitMFC_DLL@_WV?$ChTraitsCRT@_W@ATL@@@@@ATL@@@Z)
C:\Users\Phill\Documents\Visual Studio 2012\Projects\GraphApp\Debug\GraphApp.exe : fatal error LNK1120: 3 unresolved externals
========== Build: 0 succeeded, 1 failed, 1 up-to-date, 0 skipped ========== 
```

在解决方案资源管理器中，我选择我的 MFC 应用程序项目，右键单击并选择“依赖项”。我确保将 MFC 应用程序设置为依赖于 tinyxml 项目，并确保“构建顺序”正确（首先是tinyxml）。我也进入“参考...”并在那里添加 tinyxml。我什至还将 tinyxml 的调试目录添加到我的 MFC 应用程序的项目属性中的包含路径中。请问我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T21:59:50.487

好的，事实证明我没有完全阅读文档。[阅读此处](https://github.com/leethomason/tinyxml2)附有项目的 XML状态：

> 它是一个头文件和一个cpp文件。只需将这些添加到您的项目中即可。

所以我做了这个。然后我得到了一些编译器警告：

```
------ Build started: Project: GraphApp, Configuration: Debug Win32 ------
  tinyxml2.cpp
c:\users\phill\documents\visual studio 2012\projects\graphapp\graphapp\tinyxml2.cpp(24): warning C4627: '#include "tinyxml2.h"': skipped when looking for precompiled header use
          Add directive to 'stdafx.h' or rebuild precompiled header
c:\users\phill\documents\visual studio 2012\projects\graphapp\graphapp\tinyxml2.cpp(26): warning C4627: '#include <cstdio>': skipped when looking for precompiled header use
          Add directive to 'stdafx.h' or rebuild precompiled header
c:\users\phill\documents\visual studio 2012\projects\graphapp\graphapp\tinyxml2.cpp(27): warning C4627: '#include <cstdlib>': skipped when looking for precompiled header use
          Add directive to 'stdafx.h' or rebuild precompiled header
c:\users\phill\documents\visual studio 2012\projects\graphapp\graphapp\tinyxml2.cpp(28): warning C4627: '#include <new>': skipped when looking for precompiled header use
          Add directive to 'stdafx.h' or rebuild precompiled header
c:\users\phill\documents\visual studio 2012\projects\graphapp\graphapp\tinyxml2.cpp(29): warning C4627: '#include <cstddef>': skipped when looking for precompiled header use
          Add directive to 'stdafx.h' or rebuild precompiled header
c:\users\phill\documents\visual studio 2012\projects\graphapp\graphapp\tinyxml2.cpp(1834): fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source?
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

然后我在解决方案资源管理器中选择了“tinyxml2.cpp”，右键单击，转到属性。在“C++”下的属性中，我转到“预编译头文件”并更改了如下选项：

```
Precompiled Header: Use 
```

到

```
Precompiled Header: Not using precompiled headers 
```

然后它神奇地起作用了！

# java - 使用杰克逊创建简单的 JSON 结构

> ID：11110446
> 
> 赞同：5
> 
> 时间：2012-06-19T22:33:12.800
> 
> 标签：java, json, jackson

我只想创建相当于以下内容的杰克逊映射：

```
{\"isDone\": true} 
```

我想我需要创建一个这样的类：

```
public class Status {

    private boolean isDone;

    public boolean isDone{
        return this.isDone;
    }

    public void setDone(boolean isDone){
        this.isDone = isDone;
    }
} 
```

但是我如何将它实例化，然后将 JSON 写入字符串？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T22:39:32.000

您的示例和 Jackson 的问题是 JSON 属性名称的默认选择：Jackson 将看到`isDone`并`setDone`选择`done`JSON 属性名称。`JsonProperty`您可以使用注释覆盖此默认选择：

```
public class Status
{
    private boolean isDone;

    @JsonProperty("isDone")
    public boolean isDone()
    {
        return this.isDone;
    }

    @JsonProperty("isDone")
    public void setDone(boolean isDone)
    {
        this.isDone = isDone;
    }
} 
```

然后：

```
Status instance = new Status();
String jsonString = null;

instance.setDone(true);
ObjectMapper mapper = new ObjectMapper();

jsonString = mapper.writeValueAsString(instance); 
```

现在`jsonString`包含`{ "isDone" : true }`. 请注意，您还可以将字符串写入`OutputStream`using [ObjectMapper.writeValue(OutputStream, Object)](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/ObjectMapper.html#writeValue%28java.io.OutputStream,%20java.lang.Object%29)或`Writer`using [ObjectMapper.writeValue(Writer, Object)](http://jackson.codehaus.org/1.9.4/javadoc/org/codehaus/jackson/map/ObjectMapper.html#writeValue%28java.io.Writer,%20java.lang.Object%29)。

在这种情况下，您实际上只需要`JsonProperty`任一访问器上的注释，而不是两者。只需注释即可`isDone`获得所需的 JSON 属性名称。

使用`JsonProperty`注释的另一种方法是重命名您的访问器`setIsDone/getIsDone`。那么注释是不必要的。

请参阅快速而肮脏的杰克逊教程：[杰克逊在 5 分钟内](http://wiki.fasterxml.com/JacksonInFiveMinutes)。对特定属性的理解来自于查看 Jackson 注释的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:07:25.627

对。需要的代码：

```
ObjectMapper mapper = new ObjectMapper();
System.out.println(mapper.writeValueAsString(new Status())); 
```

# jquery - 使用 jQuery 在解析函数中解析第二个 XML

> ID：11110448
> 
> 赞同：0
> 
> 时间：2012-06-19T22:33:32.327
> 
> 标签：jquery

我需要解析一个“first.xml”，在这个解析函数中，我必须为“first.xml”中的每个元素解析一个“second.xml”。看起来 jQuery 在解析“first.xml”之前不会解析“second.xml”。

我的 HTML 文件有一个 div，其中附加了内容：

```
<div id="Content"></div> 
```

整个代码嵌入在 $(document).ready(function({});

```
function parseXML(xmlFilePath, callback){
    $.ajax({
        type: "GET",
        url: xmlFilePath,
        dataType: "xml",
        success: function(xml) {
            callback(xml);
        }
    });
}

parseXML("first.xml", function(returnedXML){
    $(returnedXML).find("ElementA").each(function(counter) {

        name_of_Attribute_of_Element_A = $(this).attr("name");
        $("#Content").append(counter  + ". " + name_of_Attribute_of_Element_A);

        $("#Content").append("------ before parsing second.xml ------");

        parseXML("second.xml", function(returnedXML){
            $(returnedXML).find("ElementB").each(function() {
                name_of_Attribute_of_Element_B = $(this).attr("name");
                $("#Content").append(name_of_Attribute_of_Element_B);
            });
        });

    });

}); 
```

我的输出看起来像这样：

```
1\. name_of_Attribute_of_Element_A
------ before parsing second.xml ------
2\. name_of_Attribute_of_Element_A
----- before parsing second.xml ------
3\. name_of_Attribute_of_Element_A
----- before parsing second.xml ------
name_of_Attribute_of_Element_B
name_of_Attribute_of_Element_B
name_of_Attribute_of_Element_B 
```

代替：

```
1\. name_of_Attribute_of_Element_A
------ before parsing second.xml ------
name_of_Attribute_of_Element_B
2\. name_of_Attribute_of_Element_A
----- before parsing second.xml ------
name_of_Attribute_of_Element_B
3\. name_of_Attribute_of_Element_A
----- before parsing second.xml ------    
name_of_Attribute_of_Element_B 
```

我还尝试连接我的输出，最后只附加一次。这意味着而不是

```
$("#Content").append(result); 
```

我用过

```
myHTMLOutput = myHTMLOutput + result; 
```

在我使用的文件的末尾

```
$("#Content").append(myHTMLOutput); 
```

一次，但结果相同。

是不是 jQquery 不允许使用 Ajax 多次解析 XML 文件？如果是这样，是否可以选择中断第一个文件的解析，完成第二个文件的解析并恢复第一个文件的解析？

奇怪的细节：如果我使用 JetBrains Webstorm 调试我的代码，则逐步输出是正确的。只有当我正常运行它时，才会在“first.xml”之后附加“second.xml”的输出。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:44:09.763

我认为问题出在`each()`and中`find()`。您循环遍历所有“ElementA”（这很快，因为 xml 1 号已经完成），而第二个 ajax 调用需要时间来完成。因此显示了第一个 xml 的元素，并触发了 second.xml 的 ajax，但要花时间进行 ajax 往返，因此您会得到它们。

一个可能的解决方案是不同的逻辑：

```
parseXML("first.xml", firstCallback);

var counter = 0;
var max;

function firstCallback(xml)
{
    var a = $(xml).find("ElementA");
    max = a.length;
    // do something with elements of first.xml
    readSecond();
}

function readSecond(xml)
{
    // do something with elements of second.xml
    if (counter==max) return;
    parseXML("second.xml",readSecond);
    counter++;
} 
```

不过，我还没有测试过这段代码，希望我没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:49:04.007

您遇到的基本问题是 ajax 中的“A”......“异步”。第一个 xml lopp 在从辅助调用接收到所有数据之前完成。

这是一个使用存储在数组中的 jQuery 延迟的解决方案。内容在到达时存储在对象中。每个 A 项目中的某些 B 项目仍有可能出现故障，但 B 将始终与正确的 A 在一起。

概念嵌套`$.when( B ).done()`在`$.when( A ).done()`其中，此时它将内容对象解析为 DOM。

**由于小提琴要求，使用 $.post**

演示：http: [//jsfiddle.net/Dt75U/](http://jsfiddle.net/Dt75U/)

```
/* store all ajax content in object*/
var content = {};

function parseContent(content) {
    $.each(content, function() {
        $('body').append('<br><br>' + this.a + '<br>' + this.b.join('<br>'));
    })
}
/* array to store nested ajax promises */
var deferreds_b = [];
/* A promise and ajax*/    
var xml_A = $.post("/echo/xml/", {
    xml: a
}, function(returnedXML) {

    var $el_A = $(returnedXML).find("ElementA");
    var total_A = $el_A.length;
    $el_A.each(function(counter) {
        var countA = counter;
        var name_of_Attribute_of_Element_A = $(this).attr("name");
        /* create EL A object , store EL A content, create array to push B content to */
        content[countA] = {
            a: countA + ". " + name_of_Attribute_of_Element_A,
            b: []
        }

        var xml_B = $.post("/echo/xml/", {
            xml: b
        }, function(returnedXML) {

            var $el_B = $(returnedXML).find("ElementB");
            var total_B = $el_B.length;
            $el_B.each(function(idx) {
                var name_of_Attribute_of_Element_B = $(this).attr("name");
                content[countA].b.push(countA + ". " + name_of_Attribute_of_Element_B);
            });
        });
    /* push B promise to array*/
        deferreds_b.push(xml_B);

    });
});

$.when(xml_A).done(function() {
    /* when A is done , wait for B to be done*/
    $.when.apply(null, deferreds_b).done(function() {
        parseContent(content);
        $("body").append("<p>All done!</p>");
    });

}) 
```

# html - 浮动 DIV 在 Firefox 中正常工作，但在 IE9 和 Chrome 中不正确

> ID：11110453
> 
> 赞同：0
> 
> 时间：2012-06-19T22:33:54.430
> 
> 标签：html, css, css-float, css-tables

假设我有这样的下[表](http://jsfiddle.net/7u6ye/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <link href="Theme.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="Calendar" style="float:right;">
        <div id="calHeader">
            <div class="header">
                <div></div>
                <div class="title">awr awrawra</div>
                <div></div>
            </div>
        </div>

        <div id="calDays">
            <div id="calDaysWeek">
                <div>Monday</div>
                <div>Tuesday</div>
                <div>Wednesday</div>
                <div>Thursday</div>
                <div>Friday</div>
                <div>Saturday</div>
                <div>Sunday</div>
            </div>
        </div>
    </div>
</body>
</html> 
```

CSS

```
<style type="text/css">
    #Calendar
    {
        border-collapse:collapse;
    }
    #Calendar div
    {
        border: solid 1px black;
        vertical-align:middle;
        text-align:center;
    }

    #calHeader,
    #calDays
    {
        display:table;
        width:100%;
    }
    #calHeader > div, #calDays > div
    {
        display:table-row;
    }
    #calHeader > div > div,
    #calDays > div > div
    {
        display:table-cell;
    }
    #calHeader > div > div
    {
        width: 50%;
    }

    #calHeader .header .title
    {
        width:inherit;
        white-space:nowrap;
    }

    #calDaysWeek div
    {
        width: 100px;
    }

    #calDays .day div
    {
        height:50px;
        text-align:right;
        vertical-align:text-top;
    }
</style> 
```

我希望第一行的中心单元格的内容宽度固定，第二行的每个单元格宽度为 100px。

如果我做错了什么或遗漏了一些需要为 IE 和 Chrome 添加的内容，请现在告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:43:15.240

既然您希望每天都有 100 像素的固定宽度，那么整个日历应该一直是 700 像素吗？

如果我的假设是正确的，那么改变

```
#calHeader,
#calDays
{
    display:table;
    width:700px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:48:33.017

如果您希望天的宽度始终为 100 像素，则必须添加：

```
#Calendar
{
     border-collapse:collapse;
     width:700px;
} 
```

因此，当您调整窗口大小时，日历不会拉伸。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:50:15.437

我认为帕特里克说得对。我清理了.header。 [http://jsfiddle.net/M7Apt/](http://jsfiddle.net/M7Apt/)

# plot - 使用 -nodisplay -nodesktop -nosplash 打印 Matlab 图形

> ID：11110454
> 
> 赞同：3
> 
> 时间：2012-06-19T22:33:56.287
> 
> 标签：plot, maps, matlab, matlab-figure

我正在使用 Matlab 的 Mapping Toolbox 创建和打印北美的圆锥投影图。当我在 IDE 中运行代码时，绘图被正确打印和保存，但是当使用 -nodisplay -nodesktop -nosplash 在命令行上运行相同的脚本时，我遇到了一个非常奇怪的问题。

在 print() 函数调用期间，Matlab 停止运行脚本，没有任何错误、警告或崩溃日志。Matlab 实际上并没有崩溃……它只是停止执行我的代码。[据此](http://www.mathworks.com/support/solutions/en/data/1-1KY74I/index.html?product=ML&solution=1-1KY74I)假设可以打印不带显示器的图形。

[其他人也遇到过类似的问题，并在MathWorks 网站](http://www.mathworks.com.au/matlabcentral/newsreader/view_thread/310157)上进行了询问。

[这是一些重现此问题的代码。](https://dl.dropbox.com/u/8058705/plot_test.zip)

到目前为止，还没有人提出解决方案。有没有人有什么建议？提前致谢！

编辑1：

这是一些重现问题的自包含代码。我已经在 R2011b 和 R2012a 上进行了测试。

```
figure(1)
axesm eckert4; framem; gridm; axis off; tightmap

load geoid
contourfm(geoid, geoidrefvec, -120:20:100, 'LineStyle', 'none');

coast = load('coast');
geoshow(coast.lat, coast.long, 'Color', 'black')

contourcbar

print('-f1','-dpng','-r200','-painters', 'example'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T22:15:44.747

如果您使用以下脚本从脚本运行 MATLAB，则会出现以下警告，例如，

```
#!/bin/sh
nohup matlab -nodisplay -nodesktop -r myCode > myLog.log &
exit 
```

.

```
[Warning: Objects of graph2d.lineseries class exist - not clearing this class or
any of its superclasses] 
[Warning: Objects of scribe.legend class exist - not clearing this class or any
of its superclasses] 
[Warning: Objects of graphics.panbehavior class exist - not clearing this class
or any of its superclasses] 
[Warning: Objects of graphics.zoombehavior class exist - not clearing this class
or any of its superclasses] 
[Warning: Objects of graphics.rotate3dbehavior class exist - not clearing this
class or any of its superclasses] 
[Warning: Objects of graphics.datacursorbehavior class exist - not clearing this
class or any of its superclasses] 
[Warning: Objects of graphics.ploteditbehavior class exist - not clearing this
class or any of its superclasses] 
```

问题是 matlab 代码想要显示图形、绘图或其他内容，但该选项`-nodisplay`禁止它。我通过简单地将以下几行添加到我的代码`set(gcf, 'visible','off');`并在最后解决了这个问题`close gcf; clear gcf;`。现在情节图例与第一个情节一样，没有变化，我没有收到任何警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T16:39:15.780

我得出的结论是这个问题无法解决，并且是一个错误。

我最接近解决问题的是使用 shell 中的以下代码：

```
$ matlab -nosplash -nodisplay < makefigure.m 
```

makefigure.m:

```
plot(randn(100,1)); 
set(gca,'Units','normalized','Position',[0.13 0.11 0.775 0.815]);
set(gcf,'Units','pixels','Position',[4 4 1200 900]);  %# Modify figure size
hgexport(gcf,'myfig.png',...
    hgexport('factorystyle'),'Format','png'); 
```

这将输出一个 1200x900 像素的 png 文件“myfig.png”。不幸的是，虽然图像是我想要的大小，但图形本身仍然是小尺寸。我不确定这是什么原因，但我相信这与 Matlab 是面向对象的并且轴*应该*与图形大小相关联（这就是 gca 的“位置”变量归一化为）。无论出于何种原因，这不会在显示器关闭时发生。我怀疑 Mathwoks 很快就会解决这个问题，我不能责怪他们，因为绝大多数 Matlab 用户都使用 GUI。

可以帮助任何人解决此问题的一个潜在线索是，它在命令行上运行时会出错：

```
Warning: Objects of graph2d.lineseries class exist - not clearing this class
or any of its super-classes 
```

我搜索了一个解决方案，但发现了更多问题。我的怀疑是，如果有人能弄清楚这意味着什么，你就可以解决这个问题。现在，我将再次回到 python，因为使用 Matlab 我只是花几个小时处理不便，而不是提高生产力。

编辑：如果有帮助，这是 Linux 上的 Matlab 2012a ... 2.6.35.6-45.fc14.x86_64 #1 SMP ... x86_64 x86_64 x86_64 GNU/Linux

# arrays - 从codeigniter中的数组中提取值

> ID：11110461
> 
> 赞同：0
> 
> 时间：2012-06-19T22:34:17.577
> 
> 标签：arrays, codeigniter

当我转储我的变量时

```
var_dump($search_results_returned['post_q_2_full']); 
```

打印以下内容：

```
 array(1) { 
          [0]=> array(7) {
                     ["user_id"]=> string(2) "15" 
                     ["user_name"]=> string(12) "Steve Smith" 
                     ["user_username"]=> string(8) "sjcallan" 
                     ["user_image_filename"]=> string(16) "xhewimg_15.jpeg"     
                     ["user_first_name"]=> string(5) "Steve"
                     ["user_last_name"]=> string(6) "Smith" 
                     ["user_email"]=> string(18) "ssmith@gmail.com" 
          }
    } 
```

当我尝试

```
foreach ($post_q_2_full as $post2) { // line 48

echo $post2['user_first_name'];
} 
```

# 我收到以下错误：

消息：未定义变量：post_q_2_full

文件名：_account/search.php

# 行号：48

我的脸上也出现了以下错误消息：

消息：为 foreach() 提供的参数无效

文件名：_account/search.php

行号：48

我将不胜感激任何最终的帮助。

问候，佐兰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:54:35.120

您正在尝试对不存在的变量执行 foreach 循环。post_q_2_full 是 $search_results_returned 变量中的键，而不是它自己的变量。

所以你要找的是这个：

```
 <?php
 foreach ($search_results_returned['post_q_2_full'] as $post2) { // line 48
    echo $post2['user_first_name'];
 } 
```

注意：恕我直言，变量名称太长，所以我会尝试在实际生产代码中缩短它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:42:28.673

> 我收到以下错误：消息：未定义变量：post_q_2_full

您编辑的内容`var_dump`：$search_results_returned['post_q_2_full']

您编辑的内容`foreach`：$post_q_2_full

得到区别？

> 我的脸上也出现了以下错误消息：
> 
> 消息：为 foreach() 提供的参数无效

`foreach`就是上面的效果

# c++ - c++ 宏重定义的范围是什么？

> ID：11110463
> 
> 赞同：3
> 
> 时间：2012-06-19T22:34:35.690
> 
> 标签：c++, visual-c++

我有一个 c++ 实现文件 (my.cpp)，它间接包含一个定义 _MAX_DRIVE 的头文件 (bh)：

```
// b.h
#define _MAX_DRIVE  64 
```

然后 my.cpp 包含 stdlib.h ，它还定义了 _MAX_DRIVE

```
// stdlib.h
#define _MAX_DRIVE  3   /* max. length of drive component */ 
```

显然这会产生一个宏重新定义警告：

```
stdlib.h(185) : warning C4005: '_MAX_DRIVE' : macro redefinition 
```

我的问题是：

1.  这个重定义影响了多少代码，难道只是my.cpp的编译单元？
2.  如果 my.cpp 是静态库的一部分，重新​​定义的值能否进入其他代码？
3.  如果我什至从未在 my.cpp 中引用 _MAX_DRIVE，是否可以安全地告诉编译器忽略此宏重定义警告？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T22:37:13.293

1.  直到当前编译单元结束，或者直到下一个`#undef`.
2.  不; 宏名称只能由预处理器看到，它甚至在编译开始之前就完成了运行。
3.  这听起来不是一个非常明智的想法。最好避免使用两个具有相同名称的宏（尤其是一个以单个下划线后跟一个大写字母开头的宏，因为它们是为实现而保留的）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T22:39:40.470

> 这个重定义影响了多少代码，难道只是my.cpp的编译单元？

它会影响所有包含 bh 和 stdlib.h 的文件，如果它从未`#undef`-ed

> 如果 my.cpp 是静态库的一部分，重新​​定义的值能否进入其他代码？

不，预处理器符号只存在于编译时。编译的模块与它无关。

> 如果我什至从未在 my.cpp 中引用 _MAX_DRIVE，是否可以安全地告诉编译器忽略此宏重定义警告？

是的，直到有一天您或您的任何代码用户使用它并忘记或不知道这种危险。

# iphone - 从 Web URL 读取图像元数据

> ID：11110467
> 
> 赞同：0
> 
> 时间：2012-06-19T22:34:58.820
> 
> 标签：iphone, ios, image-processing, metadata

环顾四周，找不到明确的方法来做到这一点......我需要从在某个 URL 找到的图像中读取元数据。有没有办法在iphone上做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:49:33.727

重新回答：

试试这个：[http ://code.google.com/p/iphone-exif/](http://code.google.com/p/iphone-exif/)

您应该能够获取图像属性（元数据）。希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T18:23:27.443

我尝试使用 iphone-exif，但它在我的项目中不起作用。看到很多人遇到和我一样的错误。

好消息是我找到了另一个解决方案......

```
 NSDictionary *IPTCDict;

    NSString *urlString = @"http://SOMEIMAGEURL.jpg";
    NSMutableData *photoData = [NSMutableData dataWithContentsOfURL:[NSURL URLWithString:urlString]];
    CGImageSourceRef source = CGImageSourceCreateWithData((__bridge CFDataRef)photoData, NULL);
    NSDictionary *metadata = (__bridge NSDictionary *)CGImageSourceCopyPropertiesAtIndex(source, 0, NULL);
    NSLog(@"Meta: %@", metadata);  //Will print out all the metadata

    // Pulls out the IPTC data
    IPTCDict = [metadata objectForKey:(NSString *)kCGImagePropertyIPTCDictionary];

    NSLog(@"Caption: %@\nCopyright: %@", [IPTCDict objectForKey:@"Caption/Abstract"],      [IPTCDict objectForKey:@"CopyrightNotice"]); 
```

# javascript - JavaScript functionality to browser window resize

> ID：11110473
> 
> 赞同：0
> 
> 时间：2012-06-19T22:35:27.690
> 
> 标签：javascript, media-queries, responsive-design

I have been writting HTML and CSS for a while but am new to the javascript domain. I am using the below code to control the attributes of a jQuery slider. The code works fine, but what I need to do is change some of the elements within it as the browser screen resizes (or loaded on mobile device) to enable the functionality to work correctly on smaller screens.

```
 $(document).ready(
        function() {
            $(".container").wtListRotator({
                screen_width:534,
                screen_height:300,
                item_width:210,
                item_height:75,
                item_display:4,
                list_align:"left",
                scroll_type:"mouse_move",
                auto_start:true,
                delay:5000,
                transition:"v.slide",
                transition_speed:800,
                easing:"",
                auto_center:true,
                display_playbutton:false,
                display_number:false,
                display_timer: false,
                display_arrow:true,
                display_thumbs:true,
                display_scrollbar:true,
                mouseover_select:false,
                pause_mouseover: true,
                cpanel_mouseover:false,                 
                text_mouseover:false,
                text_effect:"fade",
                text_sync:true,
                cpanel_align:"TR",
                timer_align:"bottom",
                move_one:false,
                auto_adjust:true,
                shuffle:false,
                play_once:false,
                mousewheel_scroll:true,                 
                block_size:75,
                vert_size:50,
                horz_size:50,
                block_delay:35,
                vstripe_delay:90,
                hstripe_delay:180                   
            });
        }
    ); 
```

I have already implemented media queries on the elements in the CSS so they resize and also across the rest of my site, however I am struggling to change the attributes below when the screen size/re-size event occurs and define this in the above javascript.

```
screen_width:534,
                screen_height:300,
                item_width:210,
                item_height:75,
                item_display:4, 
```

Thanks

Rich

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:18:32.913

有两件事可能对您有所帮助：

1）您始终可以使用`window.innerWidth`和获取浏览器窗口的当前可用宽度/高度`window.innerHeight`。

2）您可以“注册”一个在窗口大小发生变化时调用的函数。例子：

`window.addEventListener("resize",nameOfFunction);`

`window.onresize = function() { //do stuff };`

如果您还有其他问题，我很乐意为您提供帮助...

# c++ - 写入控制台的最有效方法是什么？

> ID：11110476
> 
> 赞同：4
> 
> 时间：2012-06-19T22:35:51.420
> 
> 标签：c++, windows, console

我想做一个 iostream 类型的类。我想找到将一组字符写入屏幕的最有效方法。想法：

printf-我不想要我自己需要的类型格式化。
WriteConsole-Read 是否比 printf 慢？真假？
*组装-不知道
其他怎么样？

*我主要关心的是我是否能找到方法。就时间而言，我没有任何着急。

编辑：由于某种原因，WriteConsole 速度较慢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T19:43:06.173

使用“fwrite”：

```
fwrite( buffer, size, 1, stderr ); 
```

这将比您需要的要快得多。而且你有一个好处，你可以让你的 iostream 类不仅可以写入控制台，还可以写入文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:45:52.340

我建议尝试一些方法（你已经提到了几个）并对结果进行基准测试。你可能会对你的结果感到惊讶，但即使结果如你所愿，你至少可以确定你正在尽你所能。不过，作为记录，如果您发现比 printf 快得多，我会感到惊讶。

最实用的编码方式（根据我的经验）遵循以下原则：

1.  得到功能上执行的东西。
2.  设置一个基准来测试您的解决方案是否足够快。
3.  如果不够快，请尝试其他方法，然后返回 2。
4.  如果它足够快，你就完成了！

听起来您甚至还没有从您的问题开始设计/编码。小心过早的优化...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-12T08:08:48.217

我发现对于 Windows，使用的平均值与for`WriteConsoleOutputCharacter()`大致相同，并且如果您不使用. 两者都非常快。我没有测试。我可能也没有使用那么好的基准。至于过早的优化，当为控制台窗口创建一个很酷的小库时，我必须首先解决这个问题，它或多或少地将它变成了一个基于 Windows 的环境，并由一个总体系统管理它。我将此系统用于大学和个人基于文本的游戏。对于日志记录和类似行为，使用和朋友也可以完成这项工作，尽管速度很慢（呃）。`fwrite()``stdout``<stdio.h>``FillConsoleOutputCharacter()``cout`

# git - git clone --bare 不包括分支 master

> ID：11110477
> 
> 赞同：2
> 
> 时间：2012-06-19T22:35:52.020
> 
> 标签：git

我正在尝试建立用于创建新项目和将旧项目设置为通过 Git 进行版本控制的工作流程。最后一切都说得通了，除了一步。当我创建一个新项目时，在其中初始化 Git 并执行初始提交，然后执行`git clone --bare ./myproject //myserver/myshare/myproject.git`. 然后我设置了一个遥控器，`git remote add origin //myserver/myshare/myproject.git`. 这些似乎工作正常。但是，当我这样做时`git branch -a`，它并没有显示遥控器上有一个主分支。

我现在解决这个问题的方法是，我只是`git clone //myserver/myshare/myproject.git`到另一个位置并且已经设置了遥控器，并且主分支存在于遥控器上。我不知道可能出了什么问题，特别是因为唯一的区别似乎是遥控器的设置方式。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T03:18:20.853

没有错误。从`git clone`手册页：

```
 --bare
       Make a bare GIT repository. That is, instead of creating <directory> and placing the administrative files in <directory>/.git, make the <directory>
       itself the $GIT_DIR. This obviously implies the -n because there is nowhere to check out the working tree. Also the branch heads at the remote are
       copied directly to corresponding local branch heads, without mapping them to refs/remotes/origin/. When this option is used, neither remote-tracking
       branches nor the related configuration variables are created. 
```

裸存储库不会将`master`提交指针映射到`refs/remotes/origin/master`，但它们不是必须的。[在设置其他人可能`push`使用或`pull`](http://sitaramc.github.com/concepts/bare.html)使用的遥控器时，裸存储库至关重要[，](http://sitaramc.github.com/concepts/bare.html)但[它们不是您进行日常开发工作的地方。](https://stackoverflow.com/a/7985045/877115)听起来你有一个`origin`. 除非您要设置另一个遥控器，否则请坚持使用`git clone //myserver/myshare/myproject.git`您的本地存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-13T14:49:18.153

从`git branch`帮助：

> -a, --all : 列出远程跟踪和本地分支
> 
> -l, --list : 列出分支名称
> 
> -r, --remotes : 作用于远程跟踪分支

似乎没有列出**远程存储库上的分支**的选项。但是，如果它在裸克隆期间位于您的本地存储库中，那么该分支就在那里。诀窍是注意这里的措辞。*远程跟踪*。所做`git branch -a`的是向您展示您的本地分支以及您可能设置的任何分支以**跟踪远程分支**- 顺便说一句，这不是`git remote add <name> <url>`命令所做的。这只是设置了一个*遥控器*。没有*分支跟踪*。

所以，为了真正做你真正尝试的事情，你需要这样的东西：

`(somehow)cd //myserver/myshare/myproject.git && git branch --list`

或者您可以检查 //myserver/myshare/myproject.git/refs/heads 或 //myserver/myshare/myproject.git/packed-refs 以确认分支存在。

最后，要建立一个共享存储库，而不是一个要处理的存储库，这`git clone --bare`是正确的方法。如果没有该`--bare`选项，在克隆 git 后会检查克隆存储库的 HEAD 分支的工作树，这通常是不需要的，在服务器上也没有意义。

# c# - 修剪一个字符数组

> ID：11110478
> 
> 赞同：5
> 
> 时间：2012-06-19T22:35:55.540
> 
> 标签：c#, arrays

背景：我被邀请参加一家知名公司的面试，并在被告知我未能通过该职位的面试之前被问到以下问题（C#，mvc3，razor）。**我真的对如何解决这个问题很感兴趣。**

问题：`"Write a method that takes a char array, trims whitespace, and returns the same array."`经过一番思考，我被告知用“\o”替换空格。

我开始：

```
public static char[] Trim(char[] c)
    {
        for (int i = 0; i < c.Length; i++)
        {
            if (c[i] == '\r' || c[i] == '\n' || c[i] == '\t')
            {
                c[i] = '\o';
            }     
        }
    } 
```

有人告诉我必须使用相同的数组，不能将其放入列表并调用`ToArray()`. 但是我认为如果数组保持相同的大小，就不可能“修剪它”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:38:49.940

他们可能意味着 \0 （NUL 字符），而不是 dash-0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:42:34.757

假设他们打算用空字符替换空白字符，那么解决方案很简单：

步骤 1：从字符串的开头（表示为字符数组）替换空白字符，直到遇到非 WS 字符。

第 2 步：从字符串的末尾开始，向后工作，做同样的事情。

```
public static void Trim(Char[] str) {

    int maxI = 0; // an optimisaiton so it doesn't iterate through chars already encountered
    for(int i=0;i<str.Length;i++) {
        if( Char.IsWhitespace( str[i] ) ) str[i] = '\0';
        else { maxI = i; break };
    }

    for(int i=str.Length-1;i>maxI;i--) {
        if( Char.IsWhitespace( str[i] ) ) str[i] = '\0';
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T22:49:36.260

```
public static char[] Trim(char[] str)
{
  return str.Where(x => !Char.IsWhiteSpace(x)).ToArray();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T23:28:02.950

这是丑陋且未经测试的，但它一次完成整个事情而无需创建新数组：

```
public static void Trim(Char[] str) {

    int nonNullIndex = 0;
    int lastNonNullIndex = 0;

    for(int i=0;i<str.Length;i++) {
        str[nonNullIndex] = str[i];
        if( !Char.IsWhitespace( str[i] ) || nonNullIndex > 0) nonNullIndex++;
        if( !Char.IsWhitespace( str[i] )) lastNonNullIndex = i;
    }
    nonNullIndex++
    str[lastNonNullIndex] = '\0';

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-17T05:29:37.777

我猜你可能被问到的是从字符串之间删除空格，然后用 '\0' 填充数组剩余元素的 char 数组

例如 "Convert this string" 为 "Convertthisstring" 并用 2 '\0' 填充剩余的数组

解决方案：

```
 char[] TrimWhiteSpace(char[] source)
    {
        int i, j = 0;

        for (i = 0; i < source.Length; i++)
        {
            if (!char.IsWhiteSpace(source[i]))
            {
                source[j] = source[i];
                j++;
            }
        }

        for (int x = 0; x < (i - j); x++)
        {
            source[j + x] = '\0';
        }

        return source;
    } 
```

# java - Logging XML request in Java-WS invoke method

> ID：11110479
> 
> 赞同：1
> 
> 时间：2012-06-19T22:35:57.957
> 
> 标签：java-ws, log4j, java, xml, web-services, logging

I'm using the Provider implementation of [java-ws](/questions/tagged/java-ws "show questions tagged 'java-ws'") and wish to log the XML request prior to attempting to work with it, preferably using [log4j](/questions/tagged/log4j "show questions tagged 'log4j'").

I've tried using `TransformerFactory` and `stdout` to log the incoming raw XML (below), which works, but when I do, the Source object can then no longer be used and generates NULL errors beyond the logging.

I'm assuming this is because it's a stream object and can only be used once.

```
private void printSource(Source source) {
    try {
        System.out.println("==========RESPONSE============");
        TransformerFactory factory = TransformerFactory.newInstance();
        Transformer transformer = factory.newTransformer();

        transformer.transform(source, new StreamResult(System.out));
        System.out.println("\n==============================");
    }
    catch(Exception e) {
        System.out.println(e.getMessage());
    }       
} 
```

# javascript - HTML grid/table options (virtual rendering/scrolling)

> ID：11110480
> 
> 赞同：3
> 
> 时间：2012-06-19T22:36:11.127
> 
> 标签：javascript, html-table

I'm looking for a solid, high-performance HTML grid/table with *virtual rendering/scrolling*. So far I've compiled the following possible options:

*   dhtmlxGrid
*   datatables
*   tablesorter
*   www.jtable
*   SlickGrid
*   trirand.com
*   flexigrid

First, I would appreciate if anyone can add more options to this list for consideration.

Second, can anyone offer any "real world" experience using a HTML grid/table for a high-performance web site ... 10-100k concurrent users, and issues such as with browser compatibility, etc.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:11:52.887

我的网站是一个高流量、高数据（超过 100 万条记录）的 SAAS 营销自动化系统，它专门 使用[Datatables 。](http://www.datatables.net)

很有可能，如果它是我在去年尝试过的 Datatables 的一个有信誉的替代品，并且网站流量不是我找到的任何解决方案的问题......所有似乎都做得很好并且是（相对）低开销。

诀窍是处理大量数据。许多选项希望您将 HTML 表格发送到 javascript，它会通过抓取 dom 来构建您的网格。这听起来很棒，直到你开始处理超过几千条记录，然后它开始打磨。Datatables 通过允许您在服务器端构建数据来克服这一点，一次 X 条记录或 X+定义的超量（称为流水线）允许您在每个查询中缓冲比用户需要更多的结果，以实现更快的分页。如果您的查询优化得很好，这就是它看起来运行得如此之快的原因，用户几乎不会注意到它。有一个完整的 API 允许您动态修改数据（例如使用可编辑的表格）。

Datatables 也是唯一一个（至少在我搜索时）与 jQuery ThemeRoller 完全集成的。在我的应用程序中，这意味着通过一个简单的 CSS 文件切换（在 jqueryui.com 自动生成）我可以完全重新命名我的整个应用程序，包括数据表。它允许我以附加费的形式出售联合品牌，实际上我需要 5 分钟才能完成。

最后，Datatables 拥有一个蓬勃发展的社区、下载和导出到 CSV 或 PDF 之类的插件，以及一个看似 24/7 全天候回答问题的作者。我怀疑他的许多概念将被纳入未来的 jQuery UI Grid 中，这将在不远的将来发布......因为他正在为该项目做出贡献。

# feed - 在 atom feed 中显示图像

> ID：11110481
> 
> 赞同：7
> 
> 时间：2012-06-19T22:36:27.503
> 
> 标签：feed, atom-feed

我在 atom 文件中显示图像时遇到问题。它不包括谷歌阅读器、歌剧或火狐的提要中的图像。

作为起点，我在 [Atom 1.0 Syndication Format 概述] 中做了清单 6 中的所有操作，但它不起作用。

**更新** 受热链接保护的图像没有问题。此处描述：[如何在原子提要中显示项目照片？](https://stackoverflow.com/questions/8757542/how-to-display-item-photo-in-atom-feed)

后来我根据[此处发布](http://www.tomstocky.com/blog/adding-mediarss-to-atom)的描述更改了提要。

我补充说：

```
<media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="path_to_image.jpg" /> 
```

但它仍然不起作用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-20T02:37:48.090

在尝试将图像包含为附件时，我遇到了同样的问题，但对我来说，最简单的方法似乎是将带有正常 img 标签的图像包含到 html 内容中。

（它也包含在 CDATA 中，这可能会影响 Google Reader 处理内容的方式。我没有尝试过。）

下面的例子对我有用，可以让 atom feed 图像在 Google Reader 中可见：

```
<content type="html">
  <![CDATA[
    <a href="http://test.lvh.me:3000/listings/341-test-pics?locale=en">
      <img alt="test_pic" src="http://test.lvh.me:3000/system/images/20/medium/test_pic.jpg?1343246102" />
    </a>
  ]]>
</content> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-26T14:05:44.000

Wordpress 使用元字段**附件**来设置媒体。这是根据 RSS 规范的正确标签。我看到人们建议使用**media:content**但如果使用它，请确保为其设置 XML 命名空间。

不幸的是，由于一些狡猾的 Wordpress 代码，您无法动态设置它。（Wordpress 获取所有元字段，然后循环通过它们而不是直接调用附件）

您可以在保存后设置附件。它应该是一个包含表单条目的数组`"$url\n$length\n$type"`

如果您想自己添加附件标签，您可以执行以下操作：

RSS

```
add_action( 'rss2_item', 'hughie_rss2_item_enclosure' );
function hughie_rss2_item_enclosure():void
{
    $id = get_post_thumbnail_id();
    $url = wp_get_attachment_url($id);
    $length = filesize(get_attached_file($id));
    $type = get_post_mime_type($id);

    echo apply_filters( 'rss_enclosure', '<enclosure url="' . esc_url( $url ) . '" length="' . absint( $length ) . '" type="' . esc_attr( $type ) . '" />' . "\n" );
} 
```

原子：

```
add_action( 'atom_entry', 'hughie_atom_entry_enclosure' );
function hughie_atom_entry_enclosure():void
{
    $id = get_post_thumbnail_id();
    $url = wp_get_attachment_url($id);
    $length = filesize(get_attached_file($id));
    $type = get_post_mime_type($id);

    echo apply_filters( 'atom_enclosure', '<link rel="enclosure" href="' . esc_url( $url ) . '" length="' . absint( $length ) . '" type="' . esc_attr( $type ) . '" />' . "\n" );
} 
```

**我发现动态设置机箱**的唯一方法是短路 get_metadata 调用。您可以添加检查以确保您在提要中，甚至可以检查堆栈跟踪以确保。

```
add_filter('get_post_metadata', 'hughie_get_post_metadata', 10, 5 );
function hughie_get_post_metadata($value, int $object_id, string $meta_key, bool $single, string $meta_type)
{
    if (is_feed() && $meta_key === '') {

        $backtrace = debug_backtrace();
        if (isset($backtrace[7]['function']) && ( $backtrace[7]['function'] === 'rss_enclosure' || $backtrace[7]['function'] === 'atom_enclosure' ) ) {

            if (!isset($value['enclosure'])) {
                $value['enclosure'] = [];
            }

            $id = get_post_thumbnail_id();
            $url = wp_get_attachment_url($id);
            $length = filesize(get_attached_file($id));
            $type = get_post_mime_type($id);

            $value['enclosure'][] = "$url\n$length\n$type";
        }
    }

    return $value;
} 
```

# php - md5 encrypted password with phpMailer issue

> ID：11110482
> 
> 赞同：0
> 
> 时间：2012-06-19T22:36:37.837
> 
> 标签：php

> **Possible Duplicate:**
> [md5 password with phpMailer](https://stackoverflow.com/questions/11118711/md5-password-with-phpmailer)

Hello everybody and thanks in advance for reading this. I have stored in my database in md5 format the password of an email account. Then when i send a notification email to the webmaster through phpMailer using the following code i get an stmp connection failed error. The same code without md5 encryption works perfectly.

```
 $mail = new PHPMailer(); 
  $mail->IsSMTP(); // send via SMTP
  $mail->SMTPAuth = true; // turn on SMTP authentication
  $mail->Username = $USR_EMAIL; // SMTP username
  $mail->Password = md5($MAIL_PWD); // SMTP password
  .
  .
  . 
```

Anyone has any idea why wont send emails with an md5 password? Should i change something to class.phpMailer? Thank you for reading this

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:42:34.557

It would appear that you're double-hashing the password. As you say, it's stored in the database in md5 format, and then you md5 it again, so you're in effect doing:

```
$passwd = 'hello';
$mail->Password = md5(md5($passwd)); 
```

Maybe

```
$mail->Password = $MAIL_PWD; 
```

will work.

However, note that you mostly CAN'T send the md5 hash to the mail server and have it work. The server will then do its own hashing/crypting of the pasword text you send, and the md5 of a password is very much different from the actual password. You need to send over the REAL raw text of the password, not a hashed version.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:45:38.143

您说数据库中的密码以MD5格式存储。如果我再看看你现在做的流程是：

数据库（MD5 中的密码）-> PHP 代码（密码***转换为 MD5***）（访问 SMTP）

在你这样做的地方：转换为 MD5 你实际上是这样做的：md5(md5("password"))。如果我在终端中这样做，我会得到：

```
localhost:~ user$ md5 -s password
MD5 ("password") = 5f4dcc3b5aa765d61d8327deb882cf99
localhost:~ user$ md5 -s 696d29e0940a4957748fe3fc9efd22a3
MD5 ("5f4dcc3b5aa765d61d8327deb882cf99") = 696d29e0940a4957748fe3fc9efd22a3 
```

如果这不是您的情况，那么如果它已经转换为 MD5，则可以尝试查看 PHPMailer 源中的密码方法。也许它也在 Class/Object 中设置以选择使用哪种散列方法？

# javascript - Can not deliver image files through phantomjs webserver

> ID：11110483
> 
> 赞同：6
> 
> 时间：2012-06-19T22:36:51.440
> 
> 标签：javascript, node.js, phantomjs

i am trying tp get phantomjs webserver works for me

I want to serve 2 files, html file , and a png image file, the html file is served well and rendered correctly in the browser, but the png file is not

here is the code for the server

```
var fs = require('fs');
function loadFile(name){
if(fs.exists(name)){
    console.log(name+ " File  exist");
    return fs.open(name,"r");
}else {
    console.log("File do not exist");
}
}
var server, service;

server = require('webserver').create();

service = server.listen(8080, function (request, response) {    

if(request.url.split(".")[1] === "html" ){
    var fi = loadFile("./test.html");
    response.statusCode = 200;
    response.write(fi.read());
    fi.close();
    response.close();
}else if (request.url.split(".")[1] === "png"){
    var fi = loadFile("./output_87.png");
    response.headers = {"Content-Type":"image/png"};
    response.statusCode = 200;
    response.write(fi.read());
    fi.close();
    response.close();
}
}); 
```

and this is the html file markup

```
<html>
<head><title>title</title></head>
<body><h1> Hello world </h1>
    <img src="output_87.png" alt="image">
</body>
</html> 
```

when viewing this file in the browser, the png file is not rendered, and even if i tried to point the browser to the png file, it does not render it

i checked with the chrome developer tools the network status and it confirm that the file is fully downloaded by the browser

what is wrong?

by the way, i have to use phantomjs, please d not tell me to use another server

thanks

Joe

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-04-13T08:05:11.693

这对我有用（假设你有响应对象）：

```
 var fs = require("fs");
  var image = fs.open("image.png", "rb");
  var data = image.read();
  image.close();
  response.setHeader("Content-Type", "image/png");
  response.setEncoding("binary");
  response.write(data);
  response.close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T05:55:00.230

如果您正在读取 PNG 文件，我相信您的 fs.open() 调用应该将“rb”用于二进制读取模式。模式“r”适用于您的 html，因为它是文本，但是虽然它仍会读取 PNG 文件并将其提供给浏览器，但图像数据是不可渲染的。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-20T14:13:07.753

您正在尝试使用异步函数，就好像它们是同步的一样。您使用的所有文件系统函数（`exists()`、`open()`和`read()`）都是异步的，并尝试调用具有所需结果的回调（您没有提供）；他们不这样做`return`。要么使用这些函数的同步版本，要么（更好）学习如何使用异步 I/O。

# perl - 从 Mojolicious 用户代理响应中提取 cookie

> ID：11110484
> 
> 赞同：3
> 
> 时间：2012-06-19T22:36:57.983
> 
> 标签：perl, user-agent, lwp-useragent, mojolicious

我开始使用 Mojolicious 库进行测试，一切正常，直到我尝试从响应中提取 cookie。

我尝试了以下几种变体：

```
$ua = Mojo::UserAgent->new();
$ua->on( error => sub { my ($ua, $error) = @_; say "This looks bad: $error"; } );
$ua->max_redirects(1)->connect_timeout(10)->request_timeout(20);
$ua->cookie_jar(Mojo::CookieJar->new);

# ... later ...

my $tx  = $ua->get($url);
my $jar = $ua->cookie_jar->extract($tx); # This is undef 
```

但是，我可以通过 LWP::UserAgent 提取 cookie。但是，LWP 有几个不同的问题，使该选项目前不可行。只是为了比较，这里是提取 cookie 的 LWP 代码。

```
my $lwp = LWP::UserAgent->new(cookie_jar => {}, timeout => 20, max_redirect => 1);
push @{ $lwp->requests_redirectable }, 'POST';
my $response = $lwp->get($url);
die $response->status_line unless $response->is_success;
$lwp->cookie_jar->scan(\&ScanCookies);

sub ScanCookies {
   my ($version, $key, $value) = @_;
   say "$key = $value";
} 
```

所以我知道我的 $url 等是正确的。

编辑：我应该提到我正在使用草莓 5.14

Edit2：我还应该提到，cookie 肯定会进入用户代理，因为会话 ID 得到了正确处理。不幸的是，我需要访问另一个 cookie（用于测试站点），我似乎无法获得正确的咒语来访问它们......说我相信这是一个程序员问题，仅此而已.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:12:14.390

用这个：

```
$tx->res->cookies 
```

# iphone - 使用 CAAnimation 启用用户交互？

> ID：11110485
> 
> 赞同：2
> 
> 时间：2012-06-19T22:37:06.483
> 
> 标签：iphone, objective-c, ios, core-animation

在使用基于块的动画的选项字段进行动画制作时，允许用户与视图交互非常容易。但是在我的程序中，我使用的是 CAKeyframeAnimation 并且我没有看到任何属性来设置用户交互启用。有没有办法做到这一点？

谢谢，

编辑：这是实际代码：

```
- (void)move
{
    CGMutablePathRef path = CGPathCreateMutable();
    CGPathMoveToPoint(path, NULL, 50, 120);
    for (int i = 0; i < 5; i ++)
        CGPathAddLineToPoint(path, NULL, arc4random() % 320, arc4random() % 480);
    CAKeyframeAnimation *animation = [CAKeyframeAnimation animationWithKeyPath:@"position"];
    [animation setPath:path];
    [animation setDuration:10];
    CFRelease(path);
    [self.layer addAnimation:animation forKey:@"move"];
}

- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [self setAlpha:0];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:14:27.147

你很可能碰错了地方。当图层在屏幕上动画时，该值永远不会改变，因此视图实际上定位在它从一开始的位置，而不是它出现在屏幕上的位置。

几个月前我写了一篇关于[如何点击测试动画层](http://ronnqvi.st/hit-testing-animating-layers/)的博文。它描述了您正在尝试做的确切事情。

您需要将触摸处理（或手势识别器）添加到超级视图并自己进行命中测试`presentationLayer`以确定用户是否点击了视图出现在屏幕上的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-08T18:13:28.443

显然，预览解决方案不再适用于 Swift 3.x 和 Swift 4.x

我解决了设置计时器以在动画期间更新帧的问题。

```
//Timer: To update the UI frame
    Timer.scheduledTimer(timeInterval: 0.15, target: self, selector: #selector(updateFrame), userInfo: nil, repeats: true)

//Timer Selector
@objc func updateFrame(){
   //getting the layer presentation bounds
    let layer = "button, label...".layer.presentation()!

    let point = CGPoint(x: layer.frame.origin.x, y: layer.frame.origin.y)
    let size = CGSize(width: layer.frame.width, height: layer.frame.height)
    // Update the UI element frame location
    "ui element".frame = CGRect(origin: point, size: size)
} 
```

# c++ - 允许访问 C++ 中的容器对象

> ID：11110486
> 
> 赞同：6
> 
> 时间：2012-06-19T22:37:12.710
> 
> 标签：c++

我有一个像下面这样的课程：

```
class Foo {
private:
    std::map<std::string, Bar*> bars_by_name;
    std::map<std::string, Baz*> bazs_by_name;
}; 
```

现在我想允许用户访问这两个集合，但隐藏我将对象存储到 std::maps 的实现细节。相反，我希望有成员函数返回例如集合的 const 迭代器，甚至可能还有一个自定义迭代器，它从两个集合返回对象，因为 Bar 和 Baz 属于同一个类层次结构。考虑到风格，在 C++ 中执行此操作的正确方法是什么？在 Java 中，我可能会将方法的返回类型设置为 Iterable 或将集合包装到不可修改的集合中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:11:20.620

创建一个隐藏细节的界面：

```
class Foo {
    public:
        void AddBar(std::string name, Bar*);
        void RemoveBar(std::string name);

        Bar* GetBar(std::string name);
        Bar* GetBar(std::string name) const;

        void AddBaz(std::string name, Baz*);
        void RemoveBaz(std::string name);

        Baz* GetBaz(std::string name);
        Baz* GetBaz(std::string name) const;

    private:
        std::map<std::string, Bar*> bars_by_name;
        std::map<std::string, Baz*> bazs_by_name;
}; 
```

就用户所知，您可以将它们存储在 std::pair 中的列表内、向量内，甚至使用并行数组......真的。

编辑：

您将其存储在地图中但希望*用户*迭代底层容器的事实让人感觉设计不好/不正确。要么只允许他们如上所述进行个人访问，要么创建为他们执行此操作的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:40:25.237

您可以将集合的迭代器作为您自己的迭代器传递。

```
class Foo {
  private:
    typedef std::map<std::string, Bar*> BarContainer;
    typedef std::map<std::string, Baz*> BazContainer;
  public:
    typedef BarContainer::const_iterator ConstBarIterator;
    ConstBarIterator beginBars() { return bars_by_name.cbegin(); }
    ConstBarIterator endBars()   { return bars_by_name.cend(); }
    typedef BazContainer::const_iterator ConstBazIterator;
    ConstBazIterator beginBazs() { return bazs_by_name.cbegin(); }
    ConstBazIterator endBazs()   { return bazs_by_name.cend(); }

  private:
    BarContainer bars_by_name;
    BazContainer bazs_by_name;
}; 
```

这为您节省了实现自己的迭代器的工作，但让您可以灵活地稍后更改容器类型并且只需要调用者重新编译。

它不能解决将它们一起迭代的问题。

# php-5.3 - max_execution_time 始终为 300

> ID：11110489
> 
> 赞同：1
> 
> 时间：2012-06-19T22:37:31.283
> 
> 标签：php-5.3, php

我无法更改我的最大执行时间。我已经在我的 php.ini 文件中更改了它，当我运行 phpinfo() 时它仍然显示为 300，即使我将它设置为 0 甚至是荒谬的数量 (9000000000) 是否有我缺少的设置？我已经重新启动了 apache 服务器并重新启动了实际的服务器，但我仍然遇到这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:02:56.993

我最终使用了这篇文章[https://stackoverflow.com/a/7700253/815437](https://stackoverflow.com/a/7700253/815437)上的脚本以及内存限制和最大执行时间的标准 ini_set。这不是解决根本问题的方法，但它确实让我现在滚动。

不过，我仍然接受有关此问题的答案，因为我确信将来我必须导入一些大型数据库，这将是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:20:30.140

尝试添加这行代码：

```
set_time_limit(5); 
```

此代码将最大执行时间设置为 5 秒，您不能将最大执行时间设置为 0，因为这意味着脚本将永远运行。您必须尝试一个正数，零将使脚本永远运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-09T16:00:11.487

处理执行时间问题的最佳方法是临时为该特定脚本强制执行最大执行时间。这是有争议的，但作为平衡解决方案效果很好。

请阅读更多相关信息

[http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

# android - 将 Flash 游戏移植到原生 android

> ID：11110495
> 
> 赞同：1
> 
> 时间：2012-06-19T22:38:24.793
> 
> 标签：android, game-engine

好吧，问题来了：一个非常流行的基于 Flash 的游戏的创建者要求我将他们的游戏移植到 Android。他们对任何其他平台都不感兴趣，所以我们不必担心 iOS 或 PC。他们希望仅在 Android 上获得最佳性能（我想这就是移植基于 Flash 的游戏的目的。他们本可以接受）

他们发现 Unity 很“慢”。其他引擎的性能（在 android 上）如何比较？他们是否期望太多，即发现 Unity 很慢？我支持 Unity，因为更多的东西是可视化的（我没有你可能猜到的经验），所以开发更容易一些。

[这将是我要移植的游戏类型的一个例子](https://apps.facebook.com/master-blaster/index.php/?fb_source=canvasbookmark_recommended&count=0&code=AQBosHGoJl0iqEejJZl8n6QCe_5tHSa83SuA_59K8ueClqhGQ-a0WZs8G3C0e8hI01uXijUBb_bJBHql_6wHIjj4LCw_M9iFi4WqO6yPZCvJo-sOtGdmFrI3eIb5NSk4_tiO9tyvQ2a7iNSS9xQyn9NEmCFMWLhycp_NtwioCqmKWQlytGWbATm9TyvNhuWGQIE#_=_)

谢谢！

编辑：一些细节和链接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:42:22.313

If it runs in flash, it should run in Unity. Unity is written in C++, and should be much more efficient than Flash, IIRC. Flex your developer muscles if possible and try to get them to listen to you.

Failing that, expand your question with a description of the game you're trying to port and I will edit my answer accordingly.

# php - Parse value to a mysql Query

> ID：11110500
> 
> 赞同：0
> 
> 时间：2012-06-19T22:39:02.013
> 
> 标签：php, mysql

I have this quick question, i have got the username variable from a form and i need to insert it in a query, can you please tell me where i'm going wrong, it says: Unknown column '$username' in 'field list'

Here is the code:

```
echo $HTTP_POST_VARS['username'];

   echo $username;
   $query = sprintf( 'SELECT $username FROM hostess' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T22:48:41.623

1.  In the code supplied you never set `$username`.
2.  You're wide open for [Sql injection](http://www.securiteam.com/securityreviews/5DP0N1P76E.html).
3.  You're using [sprintf](http://php.net/manual/en/function.sprintf.php) without any reason - it formats a string but you're not supplying any formatting, my example below does
4.  You're trying to `'SELECT $username FROM hostess'` but that's not a valid Sql statement at all.

You'd be wanting something more like:

```
$query = sprintf( "SELECT * FROM hostess WHERE username='%s'", $username); 
```

AFTER making sure you clean $username.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:40:41.263

```
$query = sprintf( 'SELECT %s FROM hostess', $username); 
```

-or, if that's a string value, I suspect you may want to include that in single quotes in the query text -

```
$query = sprintf( "SELECT '%s' FROM hostess", $username); 
```

NOTE: The generated SQL statement looks a bit odd, in that its going to return the same literal value for every row in the hostess table. If there's a hundred rows in the hostess table, you are going to return 100 rows with the same literal value. This may be what you want, but it strikes me as VERY odd.

NOTE: The sprintf function looks for %s, %d, etc. placeholders in the first argument, and replaces them with values from the remaining arguments.)

NOTE: If `$username` contains a value coming in from a form, and has not been validated, to thwart SQL injection attacks, I would use the (admittedly old school) `mysql_real_escape_string` function. (Others will offer suggestions for better, more modern techniques to accomplish the same result.)

```
$query = sprintf("SELECT '%s' FROM hostess",mysql_real_escape_string($username)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:42:06.177

in PHP, using the single quote for strings will not parse the string for variables. Use either concatenation or double quotes:

```
$query = sprintf( 'SELECT ' . $username . ' FROM hostess' );
$query = sprintf( "SELECT $username FROM hostess"); 
```

Of course, this is to say nothing about the terrible risks using a POST var this way implies.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T22:43:31.890

Uhmm about everything seems wrong..

First of all, you never defined the variable $username. What you are doing would only be valid in a version of PHP that still supports suberglobals.

Second, why are you using sprintf for a query?

By the way, HTTP_POST_VARS is deprecated. Use POST

Correct code would be something like this;

```
 $username = $_POST['username'];
echo $username;

$query = mysql_query("SELECT ".$username." FROM hostess"); 
```

# ruby-on-rails - Rails 3.2.3 之前从公用文件夹加载 javascript

> ID：11110501
> 
> 赞同：3
> 
> 时间：2012-06-19T22:39:12.930
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

有没有办法`public`在 JavaScript-files from 之前从文件夹加载 JavaScript `assets/javascript`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T23:08:30.480

您仍然可以`javascript_include_tag`在布局中使用经典。

鉴于我的`in_public.js`公共文件夹中有一个文件。

```
<%= javascript_include_tag "/in_public" %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T22:45:38.623

当然。只需添加

```
//= require_tree public 
```

在文件顶部之前

```
//= require_tree . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T09:49:44.607

**它会自动包含公共目录中的所有 .js 文件。** 只要确保你有 //= require_tree 。在 application.js 中（rails 自己做）

# sencha-touch-2 - Sencha Touch 2 带有许多选项卡的选项卡面板

> ID：11110502
> 
> 赞同：2
> 
> 时间：2012-06-19T22:39:20.537
> 
> 标签：sencha-touch-2, uitabbar

在 Sencha Touch 2 中，当您有 5 个或更少的选项卡时，TabPanel 真的很棒。除此之外，它不适合纵向模式的手机（请参阅[this fiddle](http://www.senchafiddle.com/#8SNhb)）。

我有哪些选择？有没有办法让最后一个按钮弹出一个子TabBar？或者我可以在 TabBar 的右端放一个箭头，使该栏滑过新的吗？或者我可以让 TabBar 可滚动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:39:25.940

您可以使用以下配置使标签栏可滚动：

```
 tabBar: {
        scrollable: {
            direction: 'horizontal'
        }
    }, 
```

这是[更新的小提琴](http://www.senchafiddle.com/#8SNhb#bAUl3)。

# c++ - 回调设计模式

> ID：11110503
> 
> 赞同：0
> 
> 时间：2012-06-19T22:39:20.843
> 
> 标签：c++, design-patterns, callback

现在我有一个客户端，它向我的服务器发送一个它想要数据的命令列表。我的服务器使用 getProcAddress 通过 DLL 加载这些命令，例如：

```
InitializeDLL initializeDLL = (InitializeDLL)GetProcAddress(hInstanceLibrary, "InitializeDLL"); 
```

其中 initializeDLL 定义为：

```
typedef int (CALLBACK* InitializeDLL)(int,int); 
```

客户端现在将命令名称作为它想要数据的字符串发送。我有很多我希望能够使用的命令列表，但我不知道如何以有效的方式实现它。我正在考虑创建一个 Map 并将名称的字符串用作键，然后将 CALLBACK* 用于适当的函数作为指针。但后来我也必须在之后施放它。我主要是一名 Java 程序员，而不是最好的 C++ 程序员，所以我不确定这个 Map 想法是否会奏效，或者最后如何处理演员表。另外，我查看了 Wikipedia 上的命令模式，但不知道在这种情况下如何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T19:26:23.530

地图应该可以做到这一点。将每个字符串映射到函数指针的映射，该函数指针将在收到特定消息时执行。如果你想使用命令模式，那么你可以有类似的东西：Disclamer，我很久没有写过 C++ 代码了，这段代码可能无法编译）：

```
abstract class Command{
  private:
     string commandName;
     CALLBACK* callBackFunction
  public:
     Command(string name, CALLBACK* function){
        commandName = name;
        callBackFunction = function;
     }
     // Here, you can check your current environment
     // to see if you can execute this command in the current
     // configuration and system state
     bool CanExecute() = 0;

     // This method does the call to the callback
     void Execute(){
          // call the callback function here
     }
} 
```

这种模式是命令模式和工厂方法模式的混合。`Command`为每个可能的条目定义从抽象类继承的命令。现在，您可以使用带有命令的字符串映射，而不是使用带有函数指针的字符串映射。当你得到一个字符串时，`CanExecute`首先调用你的命令，看看命令是否可以在当前状态下执行。调用`Execute`以运行调用回调函数的命令。这是我能想到的封装命令、它们的执行前提条件和它们要执行的实际代码的最佳方式。

附带说明一下，这种模式现在广泛用于 .NET (WPF)

# jquery - jQuery 复选框 onChange

> ID：11110506
> 
> 赞同：34
> 
> 时间：2012-06-19T22:39:37.320
> 
> 标签：jquery

我有一个 id 为 activelist 的复选框

我尝试了以下但似乎没有工作（我在下面）：

```
$(document).ready(function () {
  $('#activelist :checkbox').change(function () {
    alert('changed');
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<input type="checkbox" id='inactivelist' value="inactivelist" />
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-19T22:40:39.233

不需要使用`:checkbox`，也可以替换`#activelist`为`#inactivelist`：

```
$('#inactivelist').change(function () {
    alert('changed');
 }); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T22:44:33.397

有一个错字错误：

```
$('#activelist :checkbox')... 
```

应该 ：

```
$('#inactivelist:checkbox')... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-02-20T10:53:00.643

```
$('input[type=checkbox]').change(function () {
    alert('changed');
}); 
```

# javascript - 嵌套表单中每个 link_to_add 的唯一 div id

> ID：11110509
> 
> 赞同：0
> 
> 时间：2012-06-19T22:39:45.773
> 
> 标签：javascript, jquery, ruby-on-rails, nested-forms

```
## NO-AJAX, No filtering
# Since there is no filtering, it lists all the orders.
##
# partial:
<%= f.collection_select(:customer, @customers,
  :customer_id, :customer_name, {:prompt=>'Select a Customer'})
%>
<%= f.collection_select(:order_id, @orders,
  :order_id, :order_name, {:prompt=>'Select an Order'} )
%>

# view:
<%= nested_form_for @service do |f| %>
  <%= f.link_to_add "Add Order", :orders %>
  <%= f.submit "Submit" %>
<% end %>

#controller:
def new
  @service = Service.new
  @service.orders.build
  @customers = Customer.find(:all)
  @orders = Order.find(:all)
end

## Q: BUT I WANT TO DO filtering based on the customer select, with AJAX and update the  div accordingly.  
# partial:
<%= f.collection_select(:customer, @customers,
  :customer_id, :customer_name, {:prompt=>'Select a Customer'})%>
<div id='display'></div> 
```

这是我的问题：对于每个link_to_add，我想创建一个唯一的“显示” div，因为我有一个javascript，它使用该collection_select 的onchange 事件填充该“显示” div。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:13:17.230

如果我正确理解您的问题，则每次单击链接时，以下代码都会创建唯一的 div。

**HTML**：​</p>

```
<a href="#" id="link_to_add">Link to Add</a>

​&lt;div id="parent_div">
</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**jQuery** :

```
var divCnt = 1;
$(document).ready(function() {
    $('#link_to_add').click(function(){
        $('#parent_div').html($('#parent_div').html()+'<div id="display_'+divCnt+'">Display div '+divCnt+'</div>');
        divCnt++;
    });
}); 
```

希望这可以帮助！​</p>

# java - Java中的时间函数

> ID：11110511
> 
> 赞同：-2
> 
> 时间：2012-06-19T22:39:54.963
> 
> 标签：java, datetime

我即将实施一个小程序，我需要从 1970 年 1 月 1 日 00:00:00 UTC 到 2009 年 6 月 22 日 00:00:00 UTC 所经过的秒数。谁能指出我正确的方向，至于如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:49:39.587

```
public static void main(String[] args) {
    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
    calendar.set(2009, 5, 22, 0, 0, 0);
    System.out.println("ms: " + calendar.getTimeInMillis());
} 
```

If you want to parse String representation of Date, take a look at SimpleDateFormat. Although it was suggested in one answer, you should avoid using static instances as they are not thread safe.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:41:00.060

Sure: It's easy to get milliseconds since the epoch:

```
long ms = System.currentTimeMillis(); 
```

Here's how you get milliseconds from a specific time:

```
private static final String DEFAULT_PATTERN = "yyyy-MMM-dd hh:mm:ss";
private static final DateFormat FORMATTER;

static {
    FORMATTER = new SimpleDateFormat(DEFAULT_PATTERN);
    FORMATTER.setLenient(false);
}

public static long getDateMilliseconds(String dateStr) throws ParseException {
    return FORMATTER.parse(dateStr).getTime();
} 
```

# php - 将元素添加到数组的所有空键

> ID：11110512
> 
> 赞同：0
> 
> 时间：2012-06-19T22:40:00.140
> 
> 标签：php, arrays, multidimensional-array

我使用以下代码来填充子数组中的所有空键````：

```
$array = array(
        'note' => array('test', 'test1'),
        'year' => array('2011','2010', '2012'),
        'type' => array('conference', 'journal', 'conference'),
    );

foreach ($array['type'] as $k => $v) {
  foreach($array as $element => $a) {
    $iterator = $array[$element];
    if(!isset($iterator[$k])){       
       $iterator[$key] = '';
    }
  }
} 
```

print_r($array);

问题是它实际上并没有改变`$array`临时变量中的元素`$iterator`。

我知道这是一个简单的问题，但我想找出最好和最快的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:42:49.173

Looks like you have some typos. `$key` in the middle of the loops is never defined. `$a` should be the same value as `$iterator[$k]`, so no need to set it.

Try this.

```
$array = array(
        'note' => array('test', 'test1'),
        'year' => array('2011','2010', '2012'),
        'type' => array('conference', 'journal', 'conference'),
    );

foreach ($array as $k => $v) {
  foreach($k as $element => $a) {
    if(!isset($a)){       
       $array[$element] = '';
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T22:46:59.707

你不需要 $iterator 变量，你可以这样做：

```
foreach ($array['type'] as $k => $v) {
  foreach($array as $element => $a) {
    if(!isset($array[$element][$k])){       
       $array[$element][$key] = '';
    }
  }
} 
```

我还建议切换内部和外部循环，这样它更具可读性和效率。

```
foreach($array as $element => $a) {
       foreach ($array['type'] as $k => $v) {
        if(!isset($array[$element][$k])){       
           $array[$element][$key] = '';
        }
      }
    } 
```

# opengl - 如何从片段着色器中向浮点纹理添加值？

> ID：11110513
> 
> 赞同：0
> 
> 时间：2012-06-19T22:40:12.310
> 
> 标签：opengl, floating-point, glsl, textures, fragment-shader

在 GLSL 中是否可以从片段着色器中添加到浮点纹理？

例如，如果我只想知道为一个像素调用片段着色器的频率，我可以编写一个片段着色器，只将 1 加到相应的浮点纹理像素上吗？

因为我只找到了如何设置输出值，然后只是覆盖旧值或以某种方式混合，我认为这是加权乘法，不能用于加法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:05:52.507

> 我认为这是加权乘法，不能用于加法。

不，[混合](http://www.opengl.org/wiki/Blending)可以做的不仅仅是加权乘法。它完全能够进行添加剂混合；只需将源和目标因素设置为`GL_ONE`. 这会将方程简化为 Src + Dst。

# r - 以矢量格式从 R 导出图形

> ID：11110514
> 
> 赞同：1
> 
> 时间：2012-06-19T22:40:29.430
> 
> 标签：r, vector-graphics

我想以矢量格式从 R 中导出图形（例如，直方图和 ROC 曲线），以便在 Intaglio 等图形设计程序中进行布局编辑。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T22:43:45.377

```
pdf("myfile.pdf")

# graph goes here

dev.off() 
```

其他设备（除了 PDF）也存在。（@Justin 指出评论中可能最有用的内容）。

# javascript - Internet Explorer 9 外观冲突

> ID：11110520
> 
> 赞同：1
> 
> 时间：2012-06-19T22:40:48.800
> 
> 标签：javascript, jquery, html, internet-explorer-9

我一直在互联网上对此进行研究，不幸的是无法找出为什么会发生这种情况。它似乎只发生在 Internet Explorer 9 的某些计算机上。

仅在 IE 9（某些计算机）中，整个页面看起来像一团糟：

![在此处输入图像描述](../Images/db109e23025aa681711e320572fdda6f.png)

该网站的网址在[这里](http://www.go-optic.com)

谁能告诉我为什么在 IE9 中会发生这种情况？

（注意：兼容性视图会清除它，但是 Js/jQuery 不能正常工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:10:58.623

由于某种原因，IE认为该站点在我的Intranet中，并将其呈现为兼容模式（IE中有一个设置可以在CM中自动呈现Intranet站点）。当我取消选中“自动检测 Intranet 网络”框时，该站点正确呈现。
所以您真正的问题是 IE 如何确定 Intranet 网络，以及如何强制您的页面不在兼容模式下呈现……类似[这样](https://stackoverflow.com/questions/6546775/how-to-forcefully-set-ies-compatibility-mode-off-from-the-server-side)的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:58:33.120

在这里一时兴起，但我认为这是内联块的用法。我没有将 IE9 安装到可以使用它的开发者控制台进行进一步检查的程度，但众所周知，IE 在显示内联块元素方面非常糟糕。

在谷歌浏览器的控制台中，我可以使用`float:left`而不是复制相同的外观`display:inline-block`，因此应该可以解决该问题。

**编辑：**我在 HTML 中看到的唯一语法问题是`</head>`标签的位置，它与标签不相邻`<body>`。

**编辑 2：**就概述问题而言，请尝试[将此答案用于另一个问题。](https://stackoverflow.com/a/1142866/877983)

再次编辑以修复标签的显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:14:38.007

我注意到您的`doctype`. IE 讨厌这个。`doctype`需要是文件中的第一件事。

您还有超过[2300 个 HTML 验证错误](http://validator.w3.org/check?uri=http://www.go-optic.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)需要调查和纠正。同样，IE 对无效的 HTML 非常敏感。

# c# - 建议在 App.config re: .NET 运行时版本中明确说明多少？

> ID：11110522
> 
> 赞同：0
> 
> 时间：2012-06-19T22:41:08.643
> 
> 标签：c#, .net, winforms, app-config

一点知识可能是一件危险的事情。

既然我已经根据安装在用户计算机上的各种 .NET 运行时进行了“运行”，我希望尽可能“安全”并尽可能防御性地编写代码。

但是，如果我将此添加到我的 App.config 文件中：

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v1.0.3705"/>
    <supportedRuntime version="v1.1.4322"/>
    <supportedRuntime version="v2.0.50727"/>
    <supportedRuntime version="v3.0"/>
    <supportedRuntime version="v3.5"/>
    <supportedRuntime version="v4.0"/>
    <supportedRuntime version="v4.0.30319"/>
  </startup> 
```

……就等于穿吊带裤、腰带和猫套装吗？

（我的目标是 .NET 4“标准”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T22:47:46.420

不，但是您真的在使用 .NET 2.0+ 的零特性吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T23:42:44.943

嗯......没有3.0或3.5。只是 2.0.xxx 然后是 v4.0

看看这个 msdn 链接。特别是第一个图形

[.NET Framework 版本和依赖项](http://msdn.microsoft.com/en-us/library/bb822049%28v=vs.110%29)

# sql-server-2008 - Powershell将字符转换为ASCII

> ID：11110526
> 
> 赞同：2
> 
> 时间：2012-06-19T22:41:27.310
> 
> 标签：sql-server-2008, powershell, extended-ascii

目前我有一个正在扫描 SQL Server 表并正在读取包含文本的列的 powershell 进程。目前，我们的字符位于扩展的 ASCII 域中，​​导致我们的下游流程中断。我最初在 SQL Server 中识别出这些差异，但在文本解析方面很糟糕，所以我决定编写一个结合正则表达式的 powershell 脚本来执行此操作。我也会为此发布代码，以帮助其他迷失的灵魂寻找这样的正则表达式。

```
$x = [regex]::Escape("\``~!@#$%^&*()_|{}=+:;`"'<,>.?/-")
$y = "([^A-z0-9 \0x005D\0x005B\t\n"+$x+"])"
$a =  [regex]::match( $($Row[1]), $y) 
```

当我想在一封电子邮件中显示一些 ascii 值说我正在清理数据时，问题就出现了。这些数字与 SQL Server 不同。小心我不确定您的结果是否与从浏览器复制的结果相同，因为这些是扩展的 ascii。

在PowerShell中

```
[int]"–"[-0]; #result 8211 that appears to be wrong
[int]" "[-0]; #result 160 this appears to be right 
```

在 SQL Server 中

```
select ASCII('–') --result 150
select ASCII(' ') --result 160 
```

如果有的话，powershell 中的内容将帮助您在 ASCII 查找中获得与 SQL Server 相同的结果。

TLDR；所以我的问题是，上面是否是在 powershell 中查找 ASCII 值的正确方法，因为它适用于大多数值，但不适用于 ASCII 值 150（这是来自 word 的长破折号）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:26:05.930

在 SQL Server 中，

```
select UNICODE('–') 
```

将返回 8211。

我不认为 PowerShell 支持 ANSI，除了 I/O；它在内部使用 Unicode。

# javascript - How should run a function 5 times in jQuery?

> ID：11110540
> 
> 赞同：-1
> 
> 时间：2012-06-19T22:43:00.847
> 
> 标签：javascript, jquery

Basically, I'm trying to create 5 rows of tables, using a loop function. I've already have the codes for creating one row. How do I run the script 5 times in jQuery ?

I don't quite understand how .each(); works to do a loop. Can somebody please explain to me? Thanks.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T22:45:37.203

```
for (var i=0; i<5; ++i ){
  doSomething();
} 
```

# android - Getting value of ListView TextView

> ID：11110547
> 
> 赞同：1
> 
> 时间：2012-06-19T22:43:39.143
> 
> 标签：android, mysql, listview, android-arrayadapter

I have this ListView setup:

```
 ListView listView = getListView();
        listView.setTextFilterEnabled(true);

        listView.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1,
                    int arg2, long id) {

                //

                Intent i = new Intent(getApplicationContext(), Rate.class);
                startActivity(i);

            }
        });

        setListAdapter(new ArrayAdapter<String>(Items.this, R.layout.list,
                items)); 
```

It is a standard ListView as you see. Each row has a single TextView populated with the List "items". I am pulling that in from a MySQL Database and outputting through a JSON loop.

I simply want to be able to click on the row, with its single name, and take that name and pass it into the Rate.class activity as a String. How can I do this in code?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:51:16.943

Add putExtra to your intent (see below). I am assuming you have the list 'items' as the member of the activity, the arg2 argument is basically the index of the item clicked in the list, which you can use to get the name from the 'items' list.

```
 public void onItemClick(AdapterView<?> arg0, View arg1,
                int arg2, long id) {

            //

            Intent i = new Intent(getApplicationContext(), Rate.class);
            i.putExtra("name", items.get(arg2));
            startActivity(i);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:52:56.090

传递给 onItemClick 的其中一件事是被点击的视图：

将视图转换为适当的类型并调用`getText()`它；例如：

```
final String text = ((TextView)view).getText(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:47:08.470

您可以创建一个特定的数组适配器实例，而不仅仅是创建一个传递给函数。然后在`OnItemClick()`函数中，int arg2 是用户选择的数组适配器中的索引。您可以从数组适配器获取视图，并从文本视图获取 getText()。

# delphi - 是否有任何用于 Delphi 的工具或插件可用于帮助重构非面向对象的代码？

> ID：11110555
> 
> 赞同：10
> 
> 时间：2012-06-19T22:44:44.287
> 
> 标签：delphi, oop, refactoring, encapsulation

我有一个大型代码库，我正在使用它有这样的单元：

```
unit myformunit;

interface
type
  TMyForm = class(Form)
  end;

  procedure not_a_method1;

  procedure not_a_method2;

  var
     global1,global2,global3:Integer;
  ... 
```

简而言之，代码的作者没有编写方法，而是编写了全局过程。有数以万计。在这些过程中，它们引用了`MyForm:TMyForm`.

我正在考虑编写一个解析器/重写器实用程序，它将把这段代码变成“至少最低限度的面向对象的代码”。策略是将接口和实现部分全局变量移动到表单中，作为开始。我意识到这不是优雅的 OOP。但这是从全球迈出的一步。

如果我一次可以在一个单元上执行此操作，那么我可能能够修复项目其余部分中的破损，如果我一次只在一个表单上执行此操作。但我想减少重写单元所需的时间，而不是手工完成。有些表单有 500 多个过程和 500 多个接口和实现全局变量，这些变量实际上是特定于它们在同一单元中的表单的单个实例的状态。

基本上，如果不存在这样的东西，我会做的是编写一个基于 Castalia Delphi 解析器的解析器。我希望 ModelMakerCodeExplorer、castalia 或其他一些类似的工具至少可以满足我的部分需求，因此我不必自己构建这个实用程序。即使我必须自己构建它，我估计它可能会自动为我完成大约一千到两千小时的繁重工作。我至少可以运行它，然后看看有多少中断，然后在我决定重构这段代码的努力程度之后恢复或提交。

实现相同目标的替代策略（从零封装和零 OOP，到更多的封装，以及略大于零的 OOP，以增量方式，在大型非结构化 delphi 代码库上，仅在不可避免时使用对象，并且从不对真正的 OOP 有任何想法）欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:27:21.740

将全局变量更改为表单字段似乎只是剪切和粘贴它们。您可能会考虑将它们移动到一个虚拟过程中，并首先使用 MMX 来规范化声明。

然后使用 ModelMaker Code Explorer 将程序和函数移动到表单中，这只是在 Member View 中剪切和粘贴。

不是必需的，但作为下一步从方法主体中删除对表单实例的引用。这可以通过查找和替换来实现。

还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T09:35:26.883

[Delphi Sonar 插件](http://docs.codehaus.org/display/SONAR/Delphi+Plugin)（开源）不修复代码，但可以使用和配置来搜索“坏代码”：

> Delphi Sonar 插件可以分析使用 Delphi 或 Pascal 编写的项目。它使用 Delphi 6、7、2006 和 XE 编写的项目进行了测试。这个插件是 Sabre Airline Solutions 的捐赠。它的测试包括：代码行数、语句、文件数、类、包、方法、访问器、公共 API（方法、类和字段）、注释率、CPD（代码重复、多少行、块以及如何许多文件）、代码复杂性（每个方法、类、文件；复杂性分布在方法、类和文件上）、LCOM4 和 RFC、单元测试报告、规则、代码覆盖率报告、单元测试的源代码高亮显示、“死”代码识别, 未使用文件识别。

# c# - 将 CustomControl DependencyProperty 绑定到 ViewModel 枚举

> ID：11110557
> 
> 赞同：2
> 
> 时间：2012-06-19T22:44:52.100
> 
> 标签：c#, wpf, mvvm, enums, custom-controls

我正在尝试创建一个 CustomControl，它将具有受 ViewModel 中的枚举影响的**各种属性。**创建的 CustomControl 将在视图中调用。

我希望枚举绑定能够更改控件中的一些内容，其中包括：

*   更改图像源（图像更改为在 CustomControl 库中创建的文件夹中的静态图像），
*   再次更改 TextBlocks Text 属性，文本选项将在 X 数量的情况之一之间是静态的（X 是可能的枚举状态的数量（也不会改变））。

请记住，这两个 DP 将被链接，例如，如果绑定的枚举是 case x，则图像源将更改**并且**显示的文本。基本上，这里暴露的两个 DP 将绑定到**同一个 enum**，但使用方式不同。

* * *

所以，我的**问题**是，携带上述物品的最佳方式是什么？

我已经考虑了两种可能的方法：

1.  公开有用的 DP 类型并将这些属性绑定到同一个枚举（例如 Property1="{Binding someEnum}" Property2="{Binding someEnum}"），并提供一个 ValueConvertor 将这些枚举转换为 CustomControl 可以使用的有用类型，
2.  或者，公开一个接受枚举的 DP，然后根据绑定枚举的值在 CustomControl 代码中的其他位置更改属性？

我对使用 Views 代码隐藏文件中的值转换器执行选项 1 相当满意。但是，我想避免这样做，因为它会使控件的独立性降低。

关于选项二，我不完全确定如何以这种方式进行操作，因此如果您认为这是可行的方法，那么文章或简短的解释会有所帮助-可能在 DP 上实现 INoitifyPropertyChanged 以便控件知道它的值已更改时绑定枚举更改？

另外，我不限于描述的两种方法，如果您觉得有更好的方法，请提出建议！

我将 WPF (C#) 与 MVVM 架构 (MVVM Light Toolkit) 结合使用。

快速说明：我想避免更改 ViewModel - 除非绝对必要，否则暴露的枚举和那里的所有逻辑都应该保持原样！

提前感谢您的回复，我将尝试尽可能多地更新此问题，并提供有关该问题的个人进展的回复和更新以及已要求的可能的额外信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:21:13.403

您的两个解决方案都应该可以正常工作。

对于第二种解决方案，您只需要使用[PropertyChangedCallback](http://msdn.microsoft.com/en-us/library/system.windows.propertychangedcallback.aspx)注册依赖属性：

```
public static readonly DependencyProperty MyPropertyProperty =
        DependencyProperty.Register("MyProperty", typeof(EnumType), typeof(MyClass), new PropertyMetadata(new PropertyChangedCallback(MyPropertyChangedHandler)));

static void MyPropertyChangedHandler(DependencyObject obj, DependencyPropertyChangedEventArgs args) 
```

检查此线程的使用情况`FrameworkPropertyMetadata`，`UIPropertyMetadata`以及`PropertyMetadata` [何时应在普通 PropertyMetadata 上使用 FrameworkPropertyMetadata 或 UIPropertyMetadata？](https://stackoverflow.com/questions/2486999/when-should-i-use-frameworkpropertymetadata-or-uipropertymetadata-over-plain-pro)

您的第一个解决方案的优点是它很轻，您只需要 2 `ValueConvertors`，不需要依赖属性，因此另一个开发人员只需查看您的`xaml`. 缺点是如果您计划在多个地方使用具有相同逻辑的自定义控件，则复制粘贴这些转换器不是很整洁。

第二种解决方案是第一种解决方案的镜像，您具有更高水平的可重用性的优势，但您的逻辑会深深嵌入您的控制中。

# rewrite - PowerBuilder 改写建议？

> ID：11110558
> 
> 赞同：0
> 
> 时间：2012-06-19T22:45:18.290
> 
> 标签：rewrite, powerbuilder, powerbuilder-conversion

我正在寻找有关在 PowerBuilder 中重写某些内容以使其与 Web 兼容的最佳方法的建议。我已经查看了有关该主题的其他帖子，但其中大多数是 3 年前的，所以我希望得到一些更新的答案。我想重写这个，因为我们正在合并两个数据库，并且想将合并后的版本放到网上，其中一个在 PowerBuilder 中。PowerBuilder 12.5 是一个选项吗？非常感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:50:04.177

I understand that you have an existing Powerbuilder application that you want to migrate to the web. There is a third party product to do that : [Appeon for PowerBuilder](http://www.appeon.com/products/default-0eb65c9107fbc8fb-24.html) (never tested myself).

# c# - 如何使用 DataAnnotations 属性验证模型而不将其映射到 EF 上下文？

> ID：11110559
> 
> 赞同：3
> 
> 时间：2012-06-19T22:45:18.420
> 
> 标签：c#, entity-framework, validation, data-annotations

您可以使用 EF 5 Code-First 验证模型对象，如下所示：

```
var validationResult = db.Entry(someModel).GetValidationResult(); 
```

但是，如果您的模型类没有映射到您的`DbContext`实现中，并且您打算通过`db.Database.ExecuteSqlCommand`. 在这种情况下，您如何在将模型传递给 sproc 之前对其进行验证？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:18:07.863

```
var validationContext = new ValidationContext(model);
var validationResult = new List<ValidationResult>();
Validator.TryValidateObject(model, validationContext , validationResult); 
```

# ios - ios开发中的某个布尔值是否有performSelector

> ID：11110566
> 
> 赞同：0
> 
> 时间：2012-06-19T22:45:49.683
> 
> 标签：ios, xcode, core-location, performselector

我正在使用 CoreLocation，并且我想调用一个方法来在它们被分配有效值或更新这些值之后对纬度和经度进行一些计算。

你如何实现这一点？我正在考虑使用 performSelector，但这些方法需要时间延迟——我不想要时间延迟，我想知道纬度和经度首先有有效值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:48:34.963

为什么不在 Core Locations 委托方法中调用您想要的任何方法：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation; 
```

经验法则是忽略第一组 CLLocation 坐标。

# jquery - 将 -100px 添加到 jquery (body).height();

> ID：11110571
> 
> 赞同：0
> 
> 时间：2012-06-19T22:46:18.187
> 
> 标签：jquery

如果我`(body).height();`用来计算窗户高度，有没有办法计算高度-100px。

有没有办法将其作为`(body).height();`查询的一部分而不是稍后计算？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:50:02.253

```
($(body).height() - 100) 
```

只是……减去？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:49:45.867

如果您不想每次都计算并减去 100，则可以定义一个自定义函数来为您完成：

```
function bodyHeight() {
    return $("body").height()-100;
} 
```

然后只需调用`bodyHeight()`而不是`$("body").height()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T22:50:17.823

最快的方法是：

```
var H = $(body).height() - 100 + 'px';
console.log(H); 
```

# c++ - -Dfoobar 是为所有 C++ 编译器添加定义的标准吗？

> ID：11110574
> 
> 赞同：0
> 
> 时间：2012-06-19T22:46:38.677
> 
> 标签：c++, visual-c++, gcc

我想知道 -Dfoobar 是否是为所有 C++ 编译器添加定义的标准方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:09:20.507

`-Dfoobar`适用于曾经用于编译 Firefox 的所有编译器，这对我来说已经足够好了。当然，Microsoft 编译器也接受`/Dfoobar`.

# java - 在 Java 中获得最合适的实例方法

> ID：11110579
> 
> 赞同：2
> 
> 时间：2012-06-19T22:47:28.100
> 
> 标签：java, reflection, methods

如果我运行以下程序：

```
class Runit{
    public static void main(String[] argsWut) throws Exception {
        String arg = "what?";
        Class[] parameters = { new Object().getClass() };
        Object[] args = { arg };
        System.out.println("".getClass().getMethod("equals",parameters).invoke("what?",args));
    }
}; 
```

我在命令行上得到以下信息：

```
true 
```

另一方面，如果我稍微修改一下参数行：

```
class Runit{
    public static void main(String[] argsWut) throws Exception {
        String arg = "what?";
        Class[] parameters = { arg.getClass() }; // changed a little here so it's a bit more dynamic --
        Object[] args = { arg };
        System.out.println("".getClass().getMethod("equals",parameters).invoke("what?",args));
    }
}; 
```

我得到：

```
Exception in thread "main" java.lang.NoSuchMethodException: java.lang.String.equals(java.lang.String)
    at java.lang.Class.getMethod(Class.java:1605)
    at test.Runit.main(Runit.java:7) 
```

从这个例子来看，在我看来，该`getMethod`方法似乎只适用于精确的参数。有没有办法获得某种形式的“最合适”的方法？例如，如果存在完全匹配，它将返回该方法，但如果不存在完全匹配，它可以返回任何可以接受我给定参数的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:09:13.690

您可能对 Apache Commons Lang MethodUtils 类有更好的运气，该类有一个方法“invokeMethod”，该方法使用方法的目标参数来缩小适当的类型（即，您不必告诉它参数类型）。

这似乎有效：

```
 System.out.println(MethodUtils.invokeMethod("what?", "equals", new Object[] {"what?"})); 
```

有关更多详细信息，请参阅 javadocs：[http ://commons.apache.org/lang/api/org/apache/commons/lang3/reflect/MethodUtils.html#invokeMethod(java.lang.Object,%20java.lang.String,% 20java.lang.Object](http://commons.apache.org/lang/api/org/apache/commons/lang3/reflect/MethodUtils.html#invokeMethod(java.lang.Object,%20java.lang.String,%20java.lang.Object) ...)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-19T23:09:18.860

您可能对`Commons BeanUtils`Apache 库感兴趣，特别是这种方法： [http://commons.apache.org/beanutils/v1.8.0/apidocs/org/apache/commons/beanutils/MethodUtils.html#getMatchingAccessibleMethod%28java.lang.Class， %20java.lang.String,%20java.lang.Class%5b%5d%29](http://commons.apache.org/beanutils/v1.8.0/apidocs/org/apache/commons/beanutils/MethodUtils.html#getMatchingAccessibleMethod%28java.lang.Class,%20java.lang.String,%20java.lang.Class%5b%5d%29)

希望这可以帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T23:05:13.353

从[文档中`getMethod()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)：

> 在 C 类中找到匹配的方法：如果 C 声明了一个具有指定名称和**完全相同的形参类型的**公共方法，则该方法被反映。如果在 C 中发现了多个这样的方法，并且其中一个方法的返回类型比其他任何方法都更具体，则反映该方法；否则任意选择其中一种方法。

（**强调**我的。）

您要求的是让反射为您执行*重载解决*方案。显然它不会。如果您确实需要此功能，您可以 1) 放弃使用反射并直接调用该方法，或者 2) 如果无法实现，请在 Java 中查找重载解析规则（您可以从[此处](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12.2)开始），用于[`getMethods()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethods%28%29)确定可用的方法，然后手动执行重载决议。欢乐时光，我知道。

**编辑**：正如[其他](https://stackoverflow.com/a/11110742/675502) [回答者](https://stackoverflow.com/a/11110744/675502)指出的那样，有人已经花时间为你做这件事。凉爽的！

# opengl - 在单个纹理中存储多个纹理

> ID：11110587
> 
> 赞同：3
> 
> 时间：2012-06-19T22:48:25.173
> 
> 标签：opengl, graphics, sprite, textures

我试图在单个纹理中存储几个 2D 精灵，因为我发现它比每次需要绘制不同的精灵时都绑定不同的纹理要快得多。

大纹理的大小是 2 的幂。问题是关于较小“子纹理”的大小。从技术上讲，它们可以是任何大小，但是将它们的大小设为 2 的幂也会带来更好的性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:07:26.733

> 但是将它们的大小也设为 2 的幂会带来更好的性能吗？

不，您只是在绘制带纹理的四边形。使用纹理坐标并没有什么特别之处，它恰好映射到以 2 为幂的纹素上。

# c# - 使用动态绑定到对象列表的 ASP.NET 中继器创建 HtmlTable

> ID：11110594
> 
> 赞同：2
> 
> 时间：2012-06-19T22:48:45.490
> 
> 标签：c#, asp.net, webforms

我正在以编程方式在转发器内创建一个表。我的问题是项目模板部分中的单元格无法正确呈现。它们在表格标记之后显示为文本节点。有人对如何正确渲染表格单元格有任何建议吗？

```
using System;
using System.Collections.Generic;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class WebForm2 : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            if (!IsPostBack)
            {
                var dogs = new List<Dog>
                {
                    new Dog { Name = "Rex", Breed = "Russell Terrier" },
                    new Dog { Name = "Fido", Breed = "Poodle" },
                    new Dog { Name = "Fetcher", Breed = "Golden Retriever" },
                };

                var repeater = new Repeater { ID = "Repeater1" };
                repeater.DataSource = dogs;
                repeater.DataBind();

                AddHeader(repeater);
                AddItems(repeater, dogs);

                PlaceHolder1.Controls.Add(repeater);
            }
        }

        private void AddHeader(Repeater repeater)
        {
            var repeaterItem = new RepeaterItem(0, ListItemType.Header);
            var table = new HtmlTable();
            var row = new HtmlTableRow();
            var cell1 = new HtmlTableCell("th") { InnerText = "Name" };
            var cell2 = new HtmlTableCell("th") { InnerText = "Breed" };
            row.Cells.Add(cell1);
            row.Cells.Add(cell2);
            table.Rows.Add(row);
            repeaterItem.Controls.Add(table);
            repeater.Controls.Add(repeaterItem);
        }

        private void AddItems(Repeater repeater, List<Dog> dogs)
        {
            for (var i = 0; i < repeater.Items.Count; i++)
            {
                var repeaterItem = new RepeaterItem(i + 1, ListItemType.Item);
                var row = new HtmlTableRow();
                var cell1 = new HtmlTableCell() { InnerText = dogs[i].Name };
                var cell2 = new HtmlTableCell() { InnerText = dogs[i].Breed };
                row.Cells.Add(cell1);
                row.Cells.Add(cell2);
                repeaterItem.Controls.Add(row);
                repeater.Controls.Add(repeaterItem);
            }
        }

        private sealed class Dog
        {
            public string Breed { get; set; }
            public string Name { get; set; }
        }
    }
} 
```

更新：感谢 Rob 的帮助，我能够让代码正常工作。现在我有一个功能齐全的Repeater，它通过数据绑定完全加载到代码隐藏中。好的！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web.UI;
using System.Web.UI.HtmlControls;
using System.Web.UI.WebControls;
using ExtensionMethods.WebControls;

namespace WebApplication1
{
    public partial class WebForm1 : Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            var dogs = new List<Dog>
            {
                new Dog { Name = "Rex", Breed = "Russell Terrier" },
                new Dog { Name = "Fido", Breed = "Poodle" },
                new Dog { Name = "Fetcher", Breed = "Golden Retriever" },
            };

            var repeater = new Repeater
            {
                ID             = "Repeater1",
                HeaderTemplate = new CustomTemplate(ListItemType.Header),
                ItemTemplate   = new CustomTemplate(ListItemType.Item),
                FooterTemplate = new CustomTemplate(ListItemType.Footer),
                DataSource     = dogs
            };

            repeater.DataBind();
            PlaceHolder1.Controls.Add(repeater);
        }

        // Custom template class to add controls to the repeater's header, item and footer sections.
        private sealed class CustomTemplate : ITemplate
        {
            private ListItemType ListItemType { get; set; }

            public CustomTemplate(ListItemType type)
            {
                ListItemType = type;
            }

            public void InstantiateIn(Control container)
            {
                if (ListItemType == ListItemType.Header)
                {
                    var table = new LiteralControl();
                    var head = new HtmlGenericControl("thead");
                    var row = new HtmlTableRow();
                    row.Cells.Add(new HtmlTableCell("th") { InnerText = "Breed" });
                    row.Cells.Add(new HtmlTableCell("th") { InnerText = "Name" });
                    head.Controls.Add(row);
                    table.Text = string.Format("<table>{0}<tbody>", head.RenderHtml());
                    container.Controls.Add(table);
                }
                else if (ListItemType == ListItemType.Item)
                {
                    var row = new HtmlTableRow();

                    var cell1 = new HtmlTableCell();
                    cell1.Controls.Add(new Literal { ID = "LiteralBreed" });
                    row.Cells.Add(cell1);

                    var cell2 = new HtmlTableCell();
                    cell2.Controls.Add(new Literal { ID = "LiteralName" });
                    row.Cells.Add(cell2);

                    container.Controls.Add(row);
                    container.DataBinding += new EventHandler(Container_DataBinding);
                }
                else if (ListItemType == ListItemType.Footer)
                {
                    var footer = new LiteralControl("</tbody></table>");
                    container.Controls.Add(footer);
                }
            }

            // Event handler to populate the dog's breed and name in the table when data-binding occurs.
            private void Container_DataBinding(object sender, EventArgs e)
            {
                var item = sender as RepeaterItem;
                if (item != null)
                {
                    var dog = ((Dog)item.DataItem);

                    var breed = item.FindDescendantsByType<Literal>().Single(x => x.ID == "LiteralBreed");
                    breed.Text = dog.Breed;

                    var name = item.FindDescendantsByType<Literal>().Single(x => x.ID == "LiteralName");
                    name.Text = dog.Name;
                }
            }
        }

        private sealed class Dog
        {
            public string Breed { get; set; }
            public string Name { get; set; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:37:50.577

这是因为在您的逻辑中，您在 AddHeader 方法中创建一个带有标题的表并将其添加到转发器，这将创建：

```
<table>
<tbody><tr>
    <th>Name</th>
    <th>Breed</th>
</tr></tbody>
</table> 
```

然后将列表项添加到转发器，是的转发器，而不是第一个表。您在表格之后将表格行添加到转发器，浏览器会将这些行和单元格呈现为文本节点，因为它们没有父 tbody 表格元素。

中继器编写 HTML，因此您需要找到一种方法来拥有打开和关闭表标签

```
<table>
    <tbody>
        <asp:Repeater ID="fooRepeater" runat="server" ></asp:Repeater>
    </tbody>       
</table> 
```

所以中继器渲染将类似于： RexRussell Terrier For each item

我相信你的逻辑是错误的，如果你希望转发器中的每个项目作为一个表，你需要像这样更改你的代码：

```
 private void AddItems(Repeater repeater, List<Dog> dogs)
    {
        var repeaterItem = new RepeaterItem(0, ListItemType.Header);
        var table = new HtmlTable();
        var row = new HtmlTableRow();
        var cell1 = new HtmlTableCell("th") { InnerText = "Name" };
        var cell2 = new HtmlTableCell("th") { InnerText = "Breed" };
        row.Cells.Add(cell1);
        row.Cells.Add(cell2);
        table.Rows.Add(row);

        for (var i = 0; i < repeater.Items.Count; i++)
        {
            repeaterItem = new RepeaterItem(i + 1, ListItemType.Item);
            row = new HtmlTableRow();
            cell1 = new HtmlTableCell() { InnerText = dogs[i].Name };
            cell2 = new HtmlTableCell() { InnerText = dogs[i].Breed };
            row.Cells.Add(cell1);
            row.Cells.Add(cell2);

            table.Rows.Add(row);
        }

        repeaterItem.Controls.Add(table);
        repeater.Controls.Add(repeaterItem);

    } 
```

一切都将在 AddItems 方法中发生，您不再需要 AddHeader。如果您希望每个转发器项目是表的行，则逻辑必须不同。

# python - 是否有用于处理复杂数学集的 Python 库（使用数学集构建器符号构建）？

> ID：11110595
> 
> 赞同：0
> 
> 时间：2012-06-19T22:48:52.590
> 
> 标签：python, data-structures, set, generator, lazy-sequences

我经常使用多维数组，其数组索引是从复杂的用户指定的集合中生成的。

我正在寻找一个库，其中包含用于表示具有任意数量索引和任意复杂谓词的复杂集合的类。给定一个集合描述，期望的输出将是一个生成器。该生成器将依次生成对应于多维数组索引的`dict`s 或s。`tuple`

有这样的图书馆吗？

* * *

**例子**

假设我们有以下用户指定的集合（在[set-builder notation 中](http://en.wikipedia.org/wiki/Set-builder_notation)），它表示某个数组变量的索引`x[i][j]`：

{i 在 1..100, j 在 1..50: i >= 20, j >= 21, 2*(i + j) <= 100}

我想将它放入某种惰性类（可能是生成器表达式）中，这将允许我惰性地评估集合的元素以生成我的数组的索引。假设这个类被调用`lazyset`；这将是期望的行为：

```
>>> S = lazyset("{i in 1..100, j in 1..50: i >= 20, j >= 21, 2*(i+j) <= 100}")
>>> S
<generator object <genexpr> at 0x1f3e7d0>
>>> next(S)
{'i': 20, 'j': 21}
>>> next(S)
{'i': 20, 'j': 22} 
```

我想我可以使用生成器表达式自己动手，但这似乎是一个已解决的问题。所以我想我会问是否有人遇到过处理这个问题的成熟图书馆（至少在某种程度上）。有这样的图书馆吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:21:51.413

这对我来说更像是一个约束求解器问题：

```
import constraint as c

p = c.Problem()
p.addVariable(0, range(1,101))
p.addVariable(1, range(1,51))
p.addConstraint(lambda i: i >= 20, [0])
p.addConstraint(lambda j: j >= 21, [1])
p.addConstraint(c.MaxSumConstraint(50))

indices = ((s[0], s[1]) for s in p.getSolutionIter())  # convert to tuple generator 
```

那么如果你这样做

```
for ij in indices:
    print ij 
```

你得到

```
(29, 21)
(28, 22)
(28, 21)
(27, 23)
(27, 22)
(27, 21)

...

(20, 25)
(20, 24)
(20, 23)
(20, 22)
(20, 21) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:00:29.653

虽然我不确定 scipy 是否特别支持这一点（set-builder 表示法）。无论如何，我认为 scipy 是你最好的选择。

scipy 支持稀疏数组/集合，因此您可以轻松地让它处理那些分配，而无需实际分配空间:)

# shell - using wget to log redirected URLs shell script

> ID：11110601
> 
> 赞同：4
> 
> 时间：2012-06-19T22:49:45.103
> 
> 标签：shell, url, redirect, wget, ping

I was trying to find a way of using wget to log a the list of redirected website URLs into one file. For example:

`www.website.com/1234` now redirects to `www.newsite.com/a2as4sdf6nonsense`

and

`www.website.com/1235` now redirects to `www.newsite.com/ab6haq7ah8nonsense`

Wget does output the redirect, but doesn't log the new location. I get this in the terminal:

```
HTTP request sent, awaiting response...301 moved permanently
Location: http.www.newsite.com/a2as4sdf6 
```

...

I would just like to capture that new URL to a file.

I was using something like this:

```
 for i in `seq 1 9999`; do
        wget http://www.website.com/$i -O output.txt
    done 
```

But this outputs the sourcecode of each webpage to that file. I am trying to just retrieve only the redirect info. Also, I would like to add a new line to the same output file each time it retrieves a new URL.

I would like the output to look something like:

```
 www.website.com/1234 www.newsite.com/a2as4sdf6nonsense
    www.website.com/1235 www.newsite.com/ab6haq7ah8nonsense 
```

...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T08:00:59.987

这不是一个完美的解决方案，但它有效：

```
wget http://tinyurl.com/2tx --server-response -O /dev/null 2>&1 |\
   awk '(NR==1){SRC=$3;} /^  Location: /{DEST=$2} END{ print SRC, DEST}' 
```

`wget`不是一个完美的工具。`curl`会好一点。

它是这样工作的：我们得到 url，但我们将所有输出（页面内容）重定向到 /dev/null。我们要求服务器响应 http 标头（以获取 Loaction 标头），然后将其传递给 awk。请注意，可能有多个重定向。我以为你想要最后一个。awk 从第一行 (NR==1) 获取您要求的 URL，并从每个 Location 标头获取目标 URL。最后，我们根据您的需要打印 SRC 和 DESC。

# c++ - 为什么 boosts 矩阵乘法比我的慢？

> ID：11110604
> 
> 赞同：47
> 
> 时间：2012-06-19T22:50:09.820
> 
> 标签：c++, performance, boost, ublas, boost-ublas

我已经实现了一个矩阵乘法`boost::numeric::ublas::matrix`（请参阅[我的完整工作增强代码](https://github.com/MartinThoma/matrix-multiplication/blob/master/C%2B%2B/library-boost.cpp)）

```
Result result = read ();

boost::numeric::ublas::matrix<int> C;
C = boost::numeric::ublas::prod(result.A, result.B); 
```

另一个使用标准算法（参见[完整的标准代码](https://github.com/MartinThoma/matrix-multiplication/blob/master/C%2B%2B/ikj-algorithm.cpp)）：

```
vector< vector<int> > ijkalgorithm(vector< vector<int> > A, 
                                    vector< vector<int> > B) {
    int n = A.size();

    // initialise C with 0s
    vector<int> tmp(n, 0);
    vector< vector<int> > C(n, tmp);

    for (int i = 0; i < n; i++) {
        for (int k = 0; k < n; k++) {
            for (int j = 0; j < n; j++) {
                C[i][j] += A[i][k] * B[k][j];
            }
        }
    }
    return C;
} 
```

这就是我测试速度的方式：

```
time boostImplementation.out > boostResult.txt
diff boostResult.txt correctResult.txt

time simpleImplementation.out > simpleResult.txt
diff simpleResult.txt correctResult.txt 
```

两个程序都读取包含两个 2000 x 2000 矩阵的硬编码文本文件。这两个程序都是用这些标志编译的：

```
g++ -std=c++98 -Wall -O3 -g $(PROBLEM).cpp -o $(PROBLEM).out -pedantic 
```

我的实现用了**15 秒**，而提升实现用了**4 多分钟！**

编辑：编译后

```
g++ -std=c++98 -Wall -pedantic -O3 -D NDEBUG -DBOOST_UBLAS_NDEBUG library-boost.cpp -o library-boost.out 
```

ikj 算法得到**28.19 秒，Boost 得到****60.99 秒**。所以Boost仍然相当慢。

为什么 boost 比我的实现慢得多？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-19T23:36:57.100

正如 TJD 所指出的，uBLAS 版本的性能较慢可以部分解释为后者的调试功能。

这是 uBLAS 版本在调试时所花费的时间：

```
real    0m19.966s
user    0m19.809s
sys     0m0.112s 
```

这是关闭调试的 uBLAS 版本所花费的时间（`-DNDEBUG -DBOOST_UBLAS_NDEBUG`添加了编译器标志）：

```
real    0m7.061s
user    0m6.936s
sys     0m0.096s 
```

所以在关闭调试的情况下，uBLAS 版本几乎快了 3 倍。

剩余的性能差异可以通过引用[uBLAS 常见问题解答](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)“为什么 uBLAS 比（atlas-）BLAS 慢得多”的以下部分来解释：

> ublas 的一个重要设计目标是尽可能通用。

这种普遍性几乎总是要付出代价。特别是`prod`函数模板可以处理不同类型的矩阵，例如稀疏矩阵或三角形矩阵。幸运的是，uBLAS 提供了针对密集矩阵乘法优化的替代方案，特别是[axpy_prod](http://www.boost.org/doc/libs/1_41_0/libs/numeric/ublas/doc/products.htm)和`block_prod`. 以下是比较不同方法的结果：

```
ijkalgorithm   prod   axpy_prod  block_prod
   1.335       7.061    1.330       1.278 
```

如您所见，两者`axpy_prod`都比`block_prod`您的实现要快一些。仅测量没有 I/O 的计算时间，消除不必要的复制和仔细选择块大小`block_prod`（我使用 64）可以使差异更加深刻。

另请参阅[uBLAS 常见问题解答](http://www.boost.org/doc/libs/1_49_0/libs/numeric/ublas/doc/index.htm)和[有效 uBlas 和一般代码优化](http://image.diku.dk/shark/sphinx_pages/build/html/rest_sources/tutorials/for_developers/effective_ublas.html)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-21T11:23:50.883

我相信，您的编译器没有足够优化。uBLAS 代码大量使用模板，而模板需要大量使用优化。我在发布模式下通过 MS VC 7.1 编译器为 1000x1000 矩阵运行了您的代码，它给了我

`10.064`s 为 uBLAS

`7.851`s 代表向量

差异仍然存在，但绝不是压倒性的。uBLAS 的核心概念是惰性求值，因此`prod(A, B)`仅在需要时才对结果求值，例如，`prod(A, B)(10,100)`将立即执行，因为实际上只会计算一个元素。因此，实际上~~没有可以优化的整个矩阵乘法的专用算法~~（见下文）。但是你可以帮助图书馆一点，声明

```
matrix<int, column_major> B; 
```

将运行时间减少到`4.426`s，这会在一只手被绑住的情况下击败您的功能。此声明使矩阵相乘时对内存的访问更加有序，从而优化了缓存的使用。

PS 阅读了 uBLAS 文档到最后 ;)，您应该已经发现实际上有一个专用函数可以一次将*整个*矩阵相乘。2 个功能 -`axpy_prod`和`opb_prod`. 所以

```
opb_prod(A, B, C, true); 
```

即使在未优化的 row_major B 矩阵上，也可以在`8.091`sec 内执行，并且与您的向量算法相当

PPS 还有更多优化：

```
C = block_prod<matrix<int>, 1024>(A, B); 
```

在 s 中执行`4.4`，无论 B 是 column_ 还是 row_ 专业。考虑一下描述：“函数 block_prod 是为**大型密集**矩阵设计的。” 为特定任务选择特定工具！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-22T22:45:32.113

我用 uBLAS 创建了一个小网站[Matrix-Matrix Product Experiments](http://www.mathematik.uni-ulm.de/~lehn/test_ublas/index.html)。这是关于将矩阵矩阵产品的新实现集成到 uBLAS 中。如果您已经拥有 boost 库，则它仅包含额外的 4 个文件。所以它几乎是独立的。

如果其他人可以在不同的机器上运行简单的基准测试，我会很感兴趣。

# ruby - Append a a hash to a CSV in Ruby 1.8

> ID：11110608
> 
> 赞同：1
> 
> 时间：2012-06-19T22:50:53.917
> 
> 标签：ruby, csv

How to append to a array of hashes into CSV in Ruby 1.8\. There is FasterCSV for Ruby 1.9 but how do I do in 1.8?

This is what I have tried. `hasharray` is an array which contains elements which are hashes.

```
CSV.open("data.csv", "wb") { |csv|
  hasharray.each{ |oput|
    oput.to_a.each {|elem| csv << elem}
  }
} 
```

This way puts all the data in the CSV but it puts them one below another instead of side-by-side.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:11:53.773

迭代哈希时，您希望在块中使用两个参数，一个用于键，另一个用于值。考虑：

```
hasharray.each { |k,v| puts "#{k},#{v}" } 
```

# c# - C# Console App executable (.exe) does not save updated file to disk

> ID：11110609
> 
> 赞同：1
> 
> 时间：2012-06-19T22:50:59.210
> 
> 标签：c#, debugging, console-application, exe

I have a very simple C# console application that copies a specific node from an existing XML file located on my computer to another XML file, also located on my computer. I've hardcoded the paths in an app.config file within the solution.

When I debug my solution (F5) the files get updated appropriately. However, if I run without debugging (Control+F5) or if I build (or publish) to bin/Release or bin/Debug and run the my-console-app.exe the application fails to save any file to disk.

Strangely this app used to work without issue (it was used in conjunction with a .bat file which called it and deployed the updated configuration file to a server). But over the last few weeks I've noticed this console app has seemingly worked less and less over time to the point where to get my update script to run successfully I have to open this console application's solution, press F5, then run my .bat script.

I've used ProcessMonitor by sysinternals to verify that files are being read/written and it says that files are being written to the file paths that I'm specifying, however when I browse to the directory the file doesn't not exist or is not updated.

I'm using VS2010 on a Mac Mini running Windows 7 Ultimate via Bootcamp.

TL;DR; Console app works and updates files appropriately when debugging but not when run without debugging or as a standalone or published .exe from bin/Release, etc.

```
var devConfig = XDocument.Load(DevConfigPath, LoadOptions.None);
var prodConfig = XDocument.Load(ProductionConfigPath, LoadOptions.None);

var devMethods = devConfig.Descendants("deliveryMethods");
prodConfig.Root.Element("Heg.EA.Delivery").Element("deliveryMethods").ReplaceWith(devMethods);
try
{
Console.WriteLine(String.Format("Dev First Node:{0}", devConfig.Root.Element("ClientDeliveryTest").Element("deliveryMethods").FirstNode.ToString())); // Test Node to ensure file is being read correctly (it is).
Console.WriteLine(String.Format("Production First Node:{0}", prodConfig.Root.Element("Heg.EA.Delivery").Element("deliveryMethods").FirstNode.ToString())); // Test Node to ensure production configuration is updated correctly (it is).

Console.WriteLine("Saving...");
prodConfig.Save(@"C:\ProductionConfig.config"); // FAIL.
prodConfig.Save(@"ProductionConfig.config"); // FAIL.
prodConfig.Save(ProductionConfigPath); // FAIL.
Console.Write("File Saved.");
}
catch (Exception ex) // No exception is ever thrown.
{
Console.Write(String.Format("Error Saving: {0}", ex));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T00:05:01.200

找到了解决方案。我将我的解决方案上传到我的工作存储库并让我的老板检查它。他能够打开它、构建它、调试它，并从 bin/Release 运行 exe。然而，当他运行 exe 时，Avast 弹出一条友好的消息，拒绝他访问，他对此进行了补救，程序继续执行。

我也有 Avast。它从未提示我允许/禁止我的应用程序执行或写入磁盘。但是我去了 avast 选项并禁用了 AutoSandbox 功能，一切正常。

TL;博士; 防病毒设置阻止我的控制台应用程序写入磁盘并且没有提示我。

# ruby-on-rails - How can I consume a RABL API from within the application?

> ID：11110613
> 
> 赞同：0
> 
> 时间：2012-06-19T22:51:33.713
> 
> 标签：ruby-on-rails, api, rest, rabl

I'm working on exposing an API using [RABL](https://github.com/nesquena/rabl). Exposing the views is easy enough, but I've run into trouble having my own application consume those views.

For example, assume I have an endpoint at `http://example.com/api/articles`, which produces a JSON representation of the articles.

In my `ArticlesController#index` action, I wish to render a (HAML) view that shows a list of the articles. Rather than duplicate the logic from `ArticlesApiController#index`, I want to simply use that data—i.e., I want to say "go get this data from the `/articles` API endpoint," and then pass that data to the HAML view.

How can I do that? Or, is this the wrong way to go about doing this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:51:03.207

在 RABL 上观看此[截屏视频。](http://railscasts.com/episodes/322-rabl)

在您看来，您可以按如下方式添加来自 RABL 的数据（取自 railscast 示例）：

```
<div id="articles" 
   data-articles="<%= render(template: "articles/index.json.rabl") %>"> 
```

**笔记**

[您可以使用gon](https://github.com/gazay/gon) gem使数据访问更加简单。

在您的控制器中

```
def index
  @articles = Article.all 

  # initialize the JS variable upon HTML request
  gon.rabl if request.format == Mime::HTML

end 
```

现在您可以访问 javascript 中的数据，如下所示：

```
alert(gon.articles) 
```

# python - 如何在 Python 中设置属性预先检查其值？

> ID：11110616
> 
> 赞同：1
> 
> 时间：2012-06-19T22:51:38.533
> 
> 标签：python, properties

我有一个变量，我需要从远程服务器获取其内容，所以我宁愿等到真正需要它的内容。我想过如果使用属性，但似乎我做错了什么。根据例子。

```
def download():
    return 'content from remote server'

class Foo:
    def __init__(self):
        self.downloaded_bar = False
        self.bar = None

    @property
    def bar():
        if not self.downloaded:
            self.bar = download()
            self.downloaded = True
        return self.bar

f = Foo()
print f.bar #prints None, I expected 'content from remote server' 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T22:55:55.010

您需要`Foo`为描述符创建一个新的样式类才能工作。您也不能拥有与属性同名的属性，因此我更改`.bar`为`._bar` 您还需要修复错字（downloaded_bar）

```
def download():
    return 'content from remote server'

class Foo(object):                    # Inherit from object for new style class!
    def __init__(self):
        self.downloaded = False
        self._bar = None

    @property
    def bar(self):
        if not self.downloaded:
            self._bar = download()
            self.downloaded = True
        return self._bar

f = Foo()
print f.bar     def download():
    return 'content from remote server' 
```

实际上，您可能根本不需要该`downloaded`属性

```
class Foo(object):
    def __init__(self):
        self._bar = None

    @property
    def bar(self):
        if self._bar is None:
            self._bar = download()
        return self._bar

f = Foo()
print f.bar 
```

# python - 生成 UV 球体的搅拌机性能问题

> ID：11110621
> 
> 赞同：2
> 
> 时间：2012-06-19T22:52:22.153
> 
> 标签：python, python-3.x, blender, blender-2.61

当我运行这个脚本时：

```
import bpy, time
t0 = time.time()

for i in range(1000):
    bpy.ops.mesh.primitive_uv_sphere_add()

    if i % 100 == 0:
        print(time.time()-t0)
        t0 = time.time() 
```

这是输出（指数增长与时间）：

```
1.1920928955078125e-05
0.44658803939819336
0.46373510360717773
0.5661759376525879
0.7258329391479492
0.9994637966156006
1.381392002105713
1.8257861137390137
2.4634311199188232
3.2817111015319824 
```

为什么会这样？有更好的方法吗？

我在具有充足内存的服务器上运行它，并且我知道 Blender 可以扩展以使用它的大部分（它在渲染中）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T19:54:49.717

快速回答：

```
bpy.ops.object.select_all(action='DESELECT')
bpy.ops.mesh.primitive_uv_sphere_add()
sphere = bpy.context.object

for i in range(1000):
    ob = sphere.copy()
    ob.data = sphere.data.copy()
    bpy.context.scene.objects.link(ob)
bpy.context.scene.update() 
```

解释：

`bpy.ops.*`每次调用都会导致场景重绘。你想避免在循环中调用这些。`copy()`上面的脚本调用了不重绘的低级方法。如果您想要链接的重复项，您可以删除该`sphere.data.copy()`行。

这个解决方案不是我自己的。[感谢您在BlenderArtists](http://blenderartists.org/forum/showthread.php?273149-Generating-a-large-number-of-mesh-primitives)的CoDEmanX获得这个答案！

# envdte - DTE：检测自动生成代码

> ID：11110628
> 
> 赞同：0
> 
> 时间：2012-06-19T22:53:39.113
> 
> 标签：envdte

我有一个小型 Visual Studio 插件，它可以遍历活动项目并向每个方法插入代码。我的目标项目有 Web 服务参考，它创建了一堆我不关心的自动生成的参考文件。有没有办法检测项目是否是自动生成文件？

项目文件下有标签，但 ProjectItem.Properties 没有标签。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T13:17:24.890

有没有办法100%可靠地做到这一点？我不这么认为。我能够判断文件是否自动生成的唯一方法是通过其内容或文件名。

通常，在较新版本的（我所知道的）C# 中生成的代码文件有一个“.g”。在他们的名字中。这不是一成不变的或保证的（我认为 Windows 窗体和其他较旧的生成器使用“.Designer.”），但它可以用作指示。

如果您查看不同的自动生成代码，您会发现有许多不同的标记方式。没有通用的特定方法。例如，WPF 代码隐藏文件中的自动生成的连线代码（隐藏的 InitializeComponent() 方法驻留在其中）包含一个用[System.CodeDom.Compiler.GeneratedCodeAttribute](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.generatedcodeattribute.aspx)标记的部分类定义，并且这些方法都用[System.Diagnostics.DebuggerNonUserCodeAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.debuggernonusercodeattribute.aspx)标记.

第一个属性驻留在类中，因此在通过 EnvDTE 方法检查代码时可能会出现。您可能不得不求助于读取原始文件并查找该属性。

即使这也不是足够的信息，因为不同的代码生成器会以不同的方式标记它们的代码。类型安全的数据集和 EF 生成的代码在文件顶部用注释标记它们生成的代码

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.551
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------ 
```

### 现在怎么办？

除非您探索标记自动生成代码的所有不同方式并处理它们，否则没有任何方式（除非我遗漏了什么！）您可以保证跳过这些文件。您必须问自己是否值得付出努力。

# java - Java重载和继承规则

> ID：11110631
> 
> 赞同：33
> 
> 时间：2012-06-19T22:54:37.553
> 
> 标签：java, inheritance, overloading

我一直在学习，因为我有一个考试，我对大多数 Java 没有太多问题，但我偶然发现了一个我无法解释的规则。这是一个代码片段：

```
public class A {

    public int method(Object o) {
        return 1;
    }

    public int method(A a) {
        return 2;
    }
}

public class AX extends A {

    public int method(A a) {
        return 3;
    }

    public int method(AX ax) {
        return 4;
    }
}

public static void main(String[] args) {
    Object o = new A();
    A a1 = new A();
    A a2 = new AX();
    AX ax = new AX();

    System.out.println(a1.method(o));
    System.out.println(a2.method(a1));
    System.out.println(a2.method(o));
    System.out.println(a2.method(ax));
} 
```

这将返回：

1 3 1 3

虽然我希望它会返回：

1 3 1 4

为什么 a2 的类型决定了 AX 中调用哪个方法？

我一直在阅读有关重载规则和继承的内容，但这似乎很模糊，以至于我无法找到确切的规则。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-19T23:18:59.663

这些方法调用的行为由[Java 语言规范](https://docs.oracle.com/javase/specs/jls/se10/html/jls-8.html#jls-8.4.9)（参考第 8.4.9 节）规定和描述。

> 调用方法时（第 15.12 节），在编译时使用实际参数（和任何显式类型参数）的数量和参数的编译时类型来确定将被调用的方法的签名（ §15.12.2)。如果要调用的方法是实例方法，则要调用的实际方法将在运行时使用动态方法查找（第 15.12.4 节）确定。

在您的示例中，Java 编译器确定您正在调用方法的实例的编译类型最接近的匹配项。在这种情况下：

```
A.method(AX) 
```

最接近的方法来自类型 A，带有签名`A.method(A)`。在运行时，动态调度是在 A 的*实际*类型（它是 AX 的一个实例）上执行的，因此这是实际调用的方法：

```
AX.method(A) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-15T08:07:10.157

我将以更简单的方式澄清它。看看你何时使用超类引用制作子类对象，就像你在这里所做的那样。

始终记住一件事，当您使用超类引用调用时，无论对象是否属于子类，它都会转到超类，检查具有此名称的方法以及正确的签名是否存在。

现在如果它会找到它，它会检查它是否被覆盖？如果是的话，它将像这里那样转到子类方法。另一个明智的做法是执行相同的超类方法。

我可以给你举个例子……只是隐藏

```
public int method(A a) {
        return 3;
    } 
```

方法并检查您的答案，您将得到 1 2 1 2，为什么是因为它优先考虑参考。因为你覆盖了它而不是调用它，所以它给了 3..!! 希望它很大但很容易理解。快乐学习

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:19:40.557

a2 被引用为 A 并且 JVM 首先使用引用（而不是您期望的实际对象）。

# javascript - Javascript (jQuery) - Codecademy 课程

> ID：11110634
> 
> 赞同：2
> 
> 时间：2012-06-19T22:55:03.953
> 
> 标签：javascript, jquery, mouseevent, keyboard-events

这些是针对两个单独的 codecademy 练习的。他们都通过了我，但我没有得到我应该得到的结果。

**3.2 - 鼠标事件**- 问题

编写一个悬停处理程序并将其附加到所有 div。在第一个函数中，将类“hover”添加到我们正在悬停的当前对象，并在第二个函数中删除类“hover”。我们已经学会了如何通过传递事件对象来做到这一点，但这次让我们尝试另一种方式，使用`$(this).addClass()`. 不过，如果您愿意，您可以尝试活动！

完成后，当用户将鼠标悬停在绿色框上时，它们应该会弹出并变为蓝色。

**3.2 - 鼠标事件**- 答案

```
$(document).ready(function(){
    $('div').hover(function() {
        (this).addClass('hover');
    },
    function() {
        (this).removeClass('hover');
    });
}); 
```

* * *

**3.3 键盘事件**- 问题

keypress 的格式与点击处理程序完全相同。

编写一个按键处理程序，将类“box”的 div 附加到 id =“boxDiv”的 div。将按键处理程序附加到文档的正文。

**3.3 键盘事件**- 答案

```
$(document).ready(function(){
    $("body").keypress(function(event){
        $('#boxDiv').append($("<div/>").addClass('box'));
    });
 }); 
```

* * *

如果您想进一步澄清，这里是该课程的直接链接。 [http://www.codecademy.com/courses/jquery-events/2#!/exercises/1](http://www.codecademy.com/courses/jquery-events/2#!/exercises/1)

提前致谢！

问候，

马特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:05:03.943

关于鼠标事件，有一个小的语法错误：

```
(this).addClass('hover'); and (this).removeClass('hover'); 
```

缺少领先的美元符号。他们应该是：

```
$(this).addClass('hover'); and $(this).removeClass('hover'); 
```

至于键盘测试，它应该可以工作。运行它时，请尝试在按下某个键之前单击结果区域。

# javascript - 如何在 raphael 中删除我可能想在两秒钟后重绘的路径

> ID：11110635
> 
> 赞同：1
> 
> 时间：2012-06-19T22:55:04.650
> 
> 标签：javascript, svg, raphael, vml

我在下面粘贴的代码可以很好地使用定义的时间间隔逐步绘制一条线。（它使用了一些此处未显示的变量）。我遇到的问题是，如果我在 raphael 中使用 remove() 函数删除路径对象 myPath1 或 2，它不想绘制下一个或重绘自身。它似乎打破了路径方法。

我该怎么做？我希望能够重新绘制/重新激活路径，但这需要它从零点重新开始，所以我想我也可以删除它。

```
var strokes1 = [ { stroke: "M "+second_start_circle+" 20", time: 0},
            { stroke: "l-70 70", time: 200},
            { stroke: "l800 0", time: 400}];

var drawnPath1 = strokes1[0].stroke;
var myPath1 = paper.path(drawnPath1);
myPath1.toBack();
var section1 = 1;
myPath1.attr({
    "stroke-width": 8,
    "stroke": color_services,
    "stroke-opacity": 1
});

function animatePath1() {
    if (section1 < strokes1.length) {
        drawnPath1 += strokes1[section1].stroke;
        myPath1.animate({
            path: drawnPath1
        }, strokes1[section1].time, animatePath1);
        section1++;
    }
}

var strokes2 = [ { stroke: "M "+third_start_circle+" 20", time: 0},
            { stroke: "l-70 70", time: 200},
            { stroke: "l500 0", time: 400}];

var drawnPath2 = strokes2[0].stroke;
var myPath2 = paper.path(drawnPath2);
myPath2.toBack();
var section2 = 1;
myPath2.attr({
    "stroke-width": 8,
    "stroke": color_about,
    "stroke-opacity": 1
});

function animatePath2() {
    if (section2 < strokes2.length) {
        drawnPath2 += strokes2[section2].stroke;
        myPath2.animate({
            path: drawnPath2
        }, strokes2[section2].time, animatePath2);
        section2++;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:33:27.580

我将其更改为具有删除功能。将不得不稍微优化这段代码（我相信你可以看到自学的编码器）。但现在它按预期工作。

```
var strokes1 = [ { stroke: "M "+second_start_circle+" 20", time: 0},
                { stroke: "l-70 70", time: 200},
                { stroke: "l800 0", time: 400}];

    var drawnPath1 = strokes1[0].stroke;
    var myPath1 = paper.path(drawnPath1);
    myPath1.toBack();
    var section1 = 1;       

    function animatePath1() {
        if (section1 < strokes1.length) {
            drawnPath1 += strokes1[section1].stroke;
            myPath1.attr({
                "stroke-width": 8,
                "stroke": color_services,
                "stroke-opacity": 1
            });
            myPath1.animate({
                path: drawnPath1
            }, strokes1[section1].time, animatePath1);
            section1++;
        }
    }
    function removePath1(){
        if (section1 == strokes1.length) {
            myPath1.remove();

        }
        section1 = 1;
        drawnPath1 = strokes1[0].stroke;
        myPath1 = paper.path(drawnPath1);
        myPath1.toBack();
    } 
```

# django - webfaction 托管 django 应用，shopify 模块不会导入

> ID：11110637
> 
> 赞同：1
> 
> 时间：2012-06-19T22:55:27.460
> 
> 标签：django, shopify, webfaction

我最近创建了一个网站，其中包含一个由 webfaction 托管的 django 应用程序。一般来说，一切都按预期运行，但我也在尝试使用 ShopifyAPI，并将“导入错误，没有名为 shopify 的模块”跟踪到我的 view.py 之一。在 localhost 上开发时一切正常。

我通过 SSH 连接到主机服务器并尝试使用 easy_install 安装 ShopifyAPI。它似乎已报告已成功安装，但我不确定这是否真的在外部服务器上做了任何事情？

有人有建议吗？我可能没有考虑到 ShopifyAPI 的任何限制？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:32:48.377

easy_install 命令将为 Python2.4 安装模块。您可能正在使用 Python2.6 或 Python2.7。如果您使用的是**Python2.6**，请输入：

`easy_install-2.6 ShopifyAPI`而不是`easy_install ShopifyAPI`.

如果您使用的是**Python2.7**，请输入：

`easy_install-2.7 ShopifyAPI`在`easy_install ShopifyAPI`.

[您可以在此处](http://docs.webfaction.com/software/python.html#installing-packages-with-easy-install)阅读有关在 Webfaction 上使用 easy_install 的更多信息

安装 API 后，重新启动 Apache 实例，它应该会看到预期的模块。

# jquery - 使用 jQuery 检查元素在 DOM 中是高于还是低于

> ID：11110638
> 
> 赞同：0
> 
> 时间：2012-06-19T22:55:34.123
> 
> 标签：jquery, dom, dom-manipulation

我有以下感兴趣的 DOM 结构：

```
<div id="portfolioItems">

    <div class="portfolioItemsLine">
        <div class="portfolioItem selected">1</div>
        <div class="portfolioItem">2</div>
    </div>
    <div class="portfolioItemsLine">
        <div class="portfolioItem">3</div>
        <div class="portfolioItem">4</div>
    </div>

</div> 
```

每个 .porfolioItem 都附加了一个点击处理程序。在单击处理程序函数中，我需要确定 $('.portfolioItem.selected') 是位于当前单击的投资组合项上方还是下方。

确定的问题是由于每两个portfolioItems 被“打包”到项目行div 中的事实而引入的。

如何检查 .selected 项目的上方/下方定位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:01:22.073

我建议：

```
$('.portfolioItem').click(
    function(){
        var selectedAt = $('.portfolioItem.selected').index('.portfolioItem'),
            curIndex = $(this).index('.portfolioItem');
        if (curIndex > selectedAt){
            // the clicked item is 'later' than the .selected item in the DOM
            console.log('"later"');
        }
        else if (curIndex < selectedAt){
            // the clicked item is 'earlier' than the .selected item in the DOM
            console.log('"earlier"');
        }
        else if (curIndex == selectedAt){
            // the clicked item is the .selected item
            console.log('"equal"');
        }
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/nAyr8/)。

参考：

*   [`index()`](http://api.jquery.com/index/).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:09:57.917

使用该`index()`函数，它会在集合中找到一个元素。如果选择正确，集合的元素是一个“平面”列表（您不必担心“div/line”类）:)

```
$(".portfolioItem").click(
    function()
    {
        var items = $("#portfolioItems .portfolioItem");
        var selected = $("#portfolioItems .selected");
        var i = $(items).index(selected);
        var j = $(items).index(this);
        console.log(i,j);
        // compare i and j to understand if above or below
    }
);​ 
```

# android - 我可以为 BufferReader 设置超时吗？

> ID：11110640
> 
> 赞同：0
> 
> 时间：2012-06-19T22:55:40.017
> 
> 标签：android

我第一次创建一种从聊天服务器读取数据的方法时，它冻结了。我发现我的端口号错误，并且在 new BufferedReader(new InputStreamReader(conn.getInputStream()));

有没有办法让我的程序不会因网络错误而冻结？我假设必须有完整的方法

```
void SendMessage()
        {
            try {

            URL url = new URL("http://50.63.66.138:1044/update");
               System.out.println("make connection");
               URLConnection conn = url.openConnection();
               conn.setDoOutput(true);
               BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));

            //   String line;
               String f=new String("");
               String line=new String();
               while ((line= rd.readLine()  ) != null) {
                 f=f+line;
                 f+="\n";
               }
               mUsers.setText(f);

        } catch (Exception e) {

               System.out.println("exception");
               System.out.println(e.getMessage());
           }

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:46:39.903

首先，我希望您在单独的线程中执行此代码，以使您的 UI 线程即使在建立连接时也能对触摸做出响应。二、URLConnection 类有两种超时方法： [http://developer.android.com/reference/java/net/URLConnection.html#setReadTimeout(int](http://developer.android.com/reference/java/net/URLConnection.html#setReadTimeout(int) ) [http://developer.android.com/reference/java/网络/URLConnection.html#setConnectTimeout(int](http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout(int) )

试着和这些人一起玩，也许会有所帮助。如果没有，你总是可以做你自己的方式：用一个尝试建立连接和 InputReader 的 runnable 启动线程。然后等待一段时间，如果线程仍在运行，请尝试中断线程。

# c# - 几个静态类问题

> ID：11110642
> 
> 赞同：3
> 
> 时间：2012-06-19T22:55:44.633
> 
> 标签：c#, static

有几个问题是关于静态类的。其中一些来自我不久前读过的东西，所以我想消除任何神话。

我知道如果我需要一个类的实例，例如代表一家公司（即公司详细信息），该类可以是静态的。为什么我需要多个相同的实例？

然而：

1) 类的方法中参数的选择（即类型或它是否是实例类/接口等），实例或其他，是否会影响使类成为静态的决定？因此，如果我提供一个实例对象作为参数（例如 myMethod(new Car()) ）或其他任何东西，这会对是否使类变为静态有任何影响吗？不久前我读到这可以，所以我试图消除一个神话。

2）如果静态类不使用另一个类的状态，这对使类成为静态有什么关系吗？

IE 包含一个字段的静态类，并且该字段在类的 ownn 方法中使用。

我还在这里阅读了一篇关于静态的帖子，一位成员说，如果该类不包含“可重复”功能，则可以将其设为静态。在这种情况下，可重复意味着什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T22:58:55.333

1.  不，参数的类型与静态类完全无关。
2.  不，方法使用状态（或不使用）与方法是否应该是静态的无关。
3.  我怀疑“可重复”意味着具有子类和方法覆盖的潜在多态性。

总之，如果方法（或类）永远不会消耗或修改其自身实例的状态，则将其设为静态。换句话说，如果它不使用`this`（无论是明确的还是暗示的），那么它可能应该是静态的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T00:08:00.080

使对象不是静态的三个原因：

您的对象需要多次设置为新初始化的状态。您可以编写一个方法来进行重新初始化，但请注意，虽然静态类可以有一个构造函数（我相信直到第一次引用静态类的成员触发要加载的类时才会调用它），但您不能称之为运行时。

当用户取消编辑“工作”副本时，您可能希望拥有对象的“纪念品”副本以撤消。

可以同时从多个实例化对象访问静态对象。我从 ASP.NET Web 应用程序中看到了问题，其中静态对象用于在页面加载处理期间存储用户和状态数据，这些数据将在来自不同用户的同时页面请求之间共享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T22:59:05.323

1) It cannot. Static methods and instance methods can have the very same signatures, concerning argument types.

2) It does not.

*Repeatable*: This probably refers to the state stored in instances of the class. If you need a storage for a given program state (say, a score) only once, you can use a static class with static fields. If you need that state several times (say, another score for each player), you use instance fields because you can then create as many instances of your class as you need (in this case, as many instances as there are players).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T23:05:35.487

我认为简单的总结：如果类的所有成员都是静态的有意义，那么您应该将该类标记为静态。这里没有什么复杂的事情，就是这么简单。

# javascript - 如何启用和禁用 setTimeout onclick

> ID：11110647
> 
> 赞同：-2
> 
> 时间：2012-06-19T22:56:00.533
> 
> 标签：javascript, onclick, settimeout

我有一个在页面加载时执行的函数。该函数使用 setTimeout 每 30 秒执行一次。我希望能够启用和禁用 setTimeout onclick 我在下面有以下代码...

```
 <input id="vw" value="" type="hidden">
  <a href="#" onclick="document.getElementById('vw').value='0';>click here</a>

    <script>
    /* JAVASCRIPT BELOW */
    function mPb(){

    var vw = escape(document.getElementById('vw').value);

    if(vw == ''){//DO NOT SWITCH VIEW IF EMPTY

    var sTo = setTimeout("mPb()", 30000);

    } else {

    clearTimeout(sTo);  

    }

}//END VIEW MY FEED 

   //ON SERVICE LOAD DISPLAY SHITE INSTEAD OF ONLOAD  
   window.addEventListener ? 
   window.addEventListener("load",mPb,false) : 
   window.attachEvent && window.attachEvent("onload",mPb);
   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:01:24.337

如果您`onclick`用双引号正确关闭属性，您的代码将起作用：

```
<a href="#" onclick="document.getElementById('vw').value='0';">click here</a> 
```

此外，这里有两个小建议来改进您的代码：

*   如果您在函数中检查空字符串，为什么要`0`在单击链接时将输入值设置为？它有效，但如果您将值设置为`''`.

*   使用`setTimeout`(and `setInterval`) 时，不要传递包含函数调用的字符串。它也有效，但很[危险](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/eval#Don.27t_use_eval.21)。改用这个：

    ```
    var sTo = setTimeout(mPb, 30000); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:59:20.967

sTo needs to go outside of the mPb function, that way you can reference it from you onclick.

# android - Yuri Kanivets 的 WheelView 造型

> ID：11110651
> 
> 赞同：1
> 
> 时间：2012-06-19T22:56:41.153
> 
> 标签：android, android-layout

我一直在玩 Yuri Kanivet 的 WheelView ( [http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/) )，这是一款不错的 iPhone，就像滚轮控制一样，我必须说我喜欢它。但是，我想设置轮子项目的样式 - 较小的文本，并在项目之间添加行，但控件上没有任何样式方法。

我正在用代码实例化控件。我尝试调用 setTheme() 并在活动的 onCreate() 方法中传递自定义主题，但它对轮子项目没有任何影响。关于如何以编程方式设置控件样式的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:20:10.083

为了改变车轮视图的文本大小，您可以改变 AbstractWheelTextAdapter.java 的 DEFAULT_TEXT_SIZE 值，该值在 configureTextView 方法中使用。至于字里行间的空隙，可以设置单个view的paddding，比如convertView.setPadding(0, 10, 0, 10); 在“getItem”方法中，也在 AbstractWheelTextAdapter.java 中

希望可以帮助你。

# javascript - Three.js 首先渲染一个给定的对象

> ID：11110652
> 
> 赞同：2
> 
> 时间：2012-06-19T22:57:02.203
> 
> 标签：javascript, three.js

如果我使用 Three.js 画布渲染器，那么有什么方法可以在其他 3D 对象之前渲染给定对象？那么我可以在我的场景中以某种方式修改对象的渲染顺序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-20T03:55:05.013

嗯，您可以禁用渲染器的自动清除并分两次渲染。

```
// on init
renderer.autoClear = false;

// on update
renderer.clear();
renderer.render( scene1, camera );
renderer.render( scene2, camera ); 
```

# parsing - MaltParser 是 Parsing to Stanford Dependencies 中提到的“Nivre”解析器吗？速度和准确性之间的权衡？

> ID：11110653
> 
> 赞同：1
> 
> 时间：2012-06-19T22:57:15.013
> 
> 标签：parsing, nlp

很难找到关于 Nivre 解析器的丰富信息，谷歌导致 Maltparser，是一样的吗？

它是在 Parsing to Stanford Dependencies 论文中提到的速度和准确性之间的权衡吗？

它在论文中的表现相当不错，为什么这么不受欢迎？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T03:55:24.167

MaltParser 是 Nivre 等人发布的所有算法的实现。因此，每当报告 Nivre 算法的实验数据时，它可能是运行 MaltParser 的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T08:36:37.043

嗯，我想是的。可以从[这里实现](http://nlp.stanford.edu/software/stanford-dependencies.shtml)

# sql - SQL - 从子查询中选择主键

> ID：11110654
> 
> 赞同：2
> 
> 时间：2012-06-19T22:57:15.717
> 
> 标签：sql, oracle

大约一周前刚开始使用 SQL，我想知道为什么这会给我一个错误。如果我在顶部选择 *，我可以看到 ITEM_NUMBER 以及如果我使用任何其他列名但我看不到这个。

我正在使用 Oracle 并且 ORDER_DELIVERABLES 有 ITEM_NUMBER 作为主键，而 DIGITALPRODUCT_ORDER.ITEM_NUMBER 有它作为它的 PF，我假设它是主外键？

如果有人可以帮助我并解释一下，那就太好了。谢谢！

```
SELECT ITEM_NUMBER
FROM
(
  SELECT *
  FROM ORDER_DELIVERABLES
  INNER JOIN DIGITALPRODUCT_ORDER 
          ON DIGITALPRODUCT_ORDER.ITEM_NUMBER = ORDER_DELIVERABLES.ITEM_NUMBER
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:00:41.887

what error does it return?

I suspect this is an ambiguous field error, because using `*` in the `select` part selects the item_number from the 2 tables, so the engine doesn't know which one to take. Try this:

```
SELECT t.it
FROM
(
  SELECT o.ITEM_NUMBER it
  FROM ORDER_DELIVERABLES o
      INNER JOIN DIGITALPRODUCT_ORDER d ON d.ITEM_NUMBER = o.ITEM_NUMBER
) t 
```

As commented, your query could actually be done this way:

```
SELECT o.ITEM_NUMBER
FROM ORDER_DELIVERABLES o
      INNER JOIN DIGITALPRODUCT_ORDER d ON d.ITEM_NUMBER = o.ITEM_NUMBER 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:07:21.667

你必须从两个层面思考：

1.) 让我们从 ORDER_DELIVERABLES 中获取主键：

```
SHOW INDEX FROM ORDER_DELIVERABLES 
```

2.) 让我们将它构建到主查询中

```
SELECT ITEM_NUMBER
FROM SOME_MAIN_TABLE
WHERE ID = (
    SHOW INDEX FROM ORDER_DELIVERABLES
) 
```

这个逻辑是基于 MySQL 的，但我敢肯定，如果您查找 Oracle 手册，您可以找到如何在没有疯狂连接的情况下从表中访问主键 :)。

# android - 为什么绑定/启动服务不起作用（lvl）

> ID：11110656
> 
> 赞同：1
> 
> 时间：2012-06-19T22:57:36.117
> 
> 标签：android, android-service, android-lvl

我正在尝试修改 android lvl 库，作为其中的一部分，我将代码作为我的项目源（diff 包）的一部分包含在内，而不是将其用作库。但是这段代码失败了

```
boolean bindResult = mContext.bindService(
    new Intent(ILicensingService.class.getName()),
    this,  // ServiceConnection.
    Context.BIND_AUTO_CREATE);

if (bindResult) {
  mPendingChecks.offer(validator);
} else {
  Log.e(TAG, "Could not bind to service.");
  validator.getCallback().stop("Could not bind to service.");   
} 
```

它在说：

```
Unable to start service Intent { act=com.myApp.com.android.vending.licensing.ILicensingService }: not found 
```

这是为什么？我该如何解决？它作为库工作，但是当代码合并时它没有

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:01:28.313

你创造`Intent`我认为不正确。尝试用这个替换你的：

```
new Intent(YourActivity.this, ILicensingService.class) //YourActivity is activity from its you want to start service. 
```

**注意：**不要忘记添加`Service`到`Manifest.xml`

# actionscript-3 - Google Maps for Flash 中的 OSM 层

> ID：11110658
> 
> 赞同：0
> 
> 时间：2012-06-19T22:57:44.260
> 
> 标签：actionscript-3, flash, apache-flex, flex4, flex4.5

我想知道是否可以在 Google Maps for Flash API 上显示 OSM（开放街道地图）图块而不是 Google 图块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:55:40.160

是的，

[http://developer.mapquest.com/web/products/open/flash-mobile](http://developer.mapquest.com/web/products/open/flash-mobile)

[http://developer.mapquest.com/web/products/open/flash](http://developer.mapquest.com/web/products/open/flash)

# facebook - 如何在相同的帐户和属性名称下跟踪 2 个不同的谷歌分析配置文件（主要和测试）？

> ID：11110660
> 
> 赞同：3
> 
> 时间：2012-06-19T22:57:52.870
> 
> 标签：facebook, google-analytics, google-analytics-api, facebook-canvas

我正在使用谷歌分析事件跟踪来跟踪 2 Facebook 画布应用程序。（它们相似，只是一个用于生产，另一个用于开发）。由于它们是 2 个独立的画布应用程序，因此它们都有不同的画布 URL。

以下是我设置谷歌分析的方法：

物业名称：样品

1.  主要型材（生产）
2.  测试配置文件（开发）

两个配置文件具有相同的跟踪 ID。如何单独跟踪它们？我需要创建过滤器吗？我不确定，但我可能设置错误。我需要创建一个单独的属性名称吗？

感谢任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T23:59:12.740

是的，您需要创建两个单独的过滤器。一个包含来自您的生产域或 url 的页面，另一个包含您的开发域或 url。

去

管理员 > [所有帐户，如果您有多个帐户链接到您的 GA 帐户] > 帐户 > [单击指定帐户] > 过滤器 > 新过滤器

过滤器 1：（开发）

将您的过滤器命名为具有描述性的名称，例如“生产”。

如果您的开发与产品的（子）域不同，请从单选按钮/下拉菜单中选择

预定义 > 仅包含 > 等于 > "dev.yoursite.com" 或任何您的开发（子）域。

如果 dev 与 prod 的（子）域相同（但目录路径不同，请选择

预定义 > 仅包含 > 到子目录的流量 > 以 > "path/to/dev/" 开头

突出显示开发配置文件并单击添加按钮将其带到选定的配置文件中。单击“保存”，您就完成了“开发”过滤器。现在清洗冲洗并重复，但对于您的生产配置文件。

使用此设置，只有特定于（子）域或目录路径的数据才会进入您的配置文件。注意：这不是追溯性的，在您创建过滤器之前 GA 收到的任何数据（即使数据仍在队列中并且尚未实际显示在报告中）仍将显示在您的配置文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T20:14:55.283

您最好创建一个新的 Google Analytics（分析）跟踪 ID 来分隔现场制作和您的开发。

只需进入 GAnalytics Admin，在您现有的帐户下创建一个新属性。现在您将拥有一个新的跟踪 ID，它应该与您的原始跟踪 ID 类似，除了最后一个 -X 数字增加了。

现在，您可以在单独的属性中跟踪 Dev Vs Production。当成千上万的生产用户涌入数据时，我们发现这非常有用。在 Dev 上与数千名用户一起运行负载测试时也很好，因此它不会扭曲您的生产指标。

干杯！z

# javascript - 在 d3 力有向图中使用曲线

> ID：11110662
> 
> 赞同：3
> 
> 时间：2012-06-19T22:57:55.337
> 
> 标签：javascript, svg, d3.js, force-layout

我想通过 d3 force layout 可视化一些数据。

但是，连接节点的链接是直线。但是数据可能有多个连接两个节点的边。所以力布局中的直线无法正确显示所有这些。我试图将路径附加到链接而不是行。但它没有用。我不知道那是因为我以错误的方式使用它还是强制布局不接受路径作为链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T06:41:42.633

使用 svg : 插入行的路径

```
var viz = d3.select("body")
    .insert("svg:svg", "h2")
    .attr("width", "100%")
    .attr("height", "100%") 
```

. . . . . . . .

```
 .append("svg:path")
    .attr("d", "M0,-5L10,0L0,5");

var path = svg.selectAll("path").data(force.links()).enter()
                .append("svg:path").attr("source", function(d) {
                    return d.source.id;
                }).attr("target", function(d) {
                    return d.target.id;
                }).attr("class", "link").attr('marker-end', 'url(#head)'); 
```

这里**source**和**target**是**节点，在'** **svg:path '的'** **d** '属性中指定的曲线和**marker-end**属性用于箭头

# configuration - nginx reverse proxy: How to implement?

> ID：11110669
> 
> 赞同：3
> 
> 时间：2012-06-19T22:59:01.313
> 
> 标签：configuration, nginx, reverse-proxy

I'm trying to do a reverse proxy with Nginx based on the URL. I want `http://mydomain.example.com/client1/...` to be redirected to `http://127.0.0.1:8193/...`. I have tried many ways, and none of them worked. Please note that the application can make redirections. These are the configuration files of my last solution :

## default

```
server {
    listen                  80;
    server_name             mydomain.example.com;

    location / {
            set $instance none;
            if ($request_uri ~ ^/(.*)/$) {
                    set $instance $1;
            }

            set $no_cookie true;
            if ($http_cookie ~ "instance=([^;] +)(?:;|$)") {
                    set $instance $1;
                    set $no_cookie false;
            }

            if ($no_cookie = true) {
                    add_header Set-Cookie "instance=$instance;Domain=$host;Path=/";
                    rewrite ^ / break;
            }

            include instances.conf;
    } 
```

## instances.conf

```
proxy_redirect                 off;
proxy_set_header               Host $host;
proxy_set_header               X-Real-IP $remote_addr;
proxy_set_header               X-Forwarded-For $proxy_add_x_forwarded_for;

proxy_connect_timeout          90;
proxy_send_timeout             60;

# Installation of language packs, etc. can take a long time
proxy_read_timeout             10800;

if ($instance = client1) {
    proxy_pass http://127.0.0.1:8193;
}

if ($instance = client2) {
    proxy_pass http://127.0.0.1:8194
}

... 
```

When the browser requests `http://mydomain.example.com/client1/`, Nginx should set a cookie named `instance` with the value `client1` then redirect the traffic to the appropriate proxy. For subsequent queries, it should use this cookie to make redirection. The problem I have is it never sets the `$instance` variable to `client1`. Don't forget that the application has no idea of the prefix `/client1`.

Do you have an idea? Do you know of a better solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:40:37.207

用于获取 cookie 的正则表达式是错误的。我已将其更改为

```
"instance=([^;][^ ]+)(?:;|$)" 
```

现在可以了。

编辑：这只是最终解决方案的一部分。对不起。还有一个问题。请参阅下面的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-03T15:21:21.893

它与您的问题无关，而是“proxy_connect_timeout”

“该指令为与上游服务器的连接分配了一个超时时间。有必要记住，这个超时时间不能超过 75 秒。”

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T06:22:02.803

查看 Nginx 的[地图模块](http://wiki.nginx.org/HttpMapModule)

```
map $uri $proxy {
    /client1     http://127.0.0.1:8193/client1;
    /client2     http://127.0.0.1:8194/client2;
}

server {
    server_name my.domain.com;
    proxy_pass $proxy;
} 
```

请注意，将 /clientX 附加到 proxy_pass URI 的末尾会从请求中删除 URI 的那部分（这对我来说似乎很合理，但可能不是您想要的）。

# python - How do I grab a NAPTR record from an IP address in Python?

> ID：11110670
> 
> 赞同：3
> 
> 时间：2012-06-19T22:59:01.993
> 
> 标签：python, dns

I'm looking to do something like this in python using dnspython:

```
 dig @XXX.YYY.ZZZ.AAA -p 99 +short '1.1.1.1.1.1.1.1.1.1.1.e164.arpa' naptr 
```

I thought dns.resolver.query would be the way to go, but it seems to choke on the IP address.

My code:

```
for rdata in dns.resolver.query('XXX.YYY.ZZZ.AAA', 'NAPTR') :
print rdata.target 
```

Output from running the code:

```
 Traceback (most recent call last):
  File "...\src\dnslookup.py", line 12, in <module>
    for rdata in dns.resolver.query('XXX.YYY.ZZZ.AAA', 'NAPTR') :
  File "build\bdist.win-amd64\egg\dns\resolver.py", line 920, in query
  File "build\bdist.win-amd64\egg\dns\resolver.py", line 856, in query
dns.resolver.NXDOMAIN 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T04:49:31.640

正如 OXC 指出的那样，您的代码正在查询 XXX.YYY.ZZZ.AAA 的 NAPTR 记录，这与您的 dig 命令不等效。

这是与您的 dig 命令更匹配的代码：

```
resolver = dns.resolver.Resolver()
resolver.nameservers = ['XXX.YYY.ZZZ.AAA']
resolver.port = 99

resolver.query('1.1.1.1.1.1.1.1.1.1.1.e164.arpa', 'NAPTR')
# Need to confirm syntax for NAPTR query 
```

# objective-c - ARC - 重新分配图片库选择器？

> ID：11110672
> 
> 赞同：1
> 
> 时间：2012-06-19T22:59:09.830
> 
> 标签：objective-c, ios, xcode, uiimagepickercontroller, uipopovercontroller

我正在为 iPad 构建一个应用程序，但对于 ARC 为何要释放这样声明的强大属性有点困惑：

```
@property (nonatomic, strong) UIPopoverController *imagePickerPopover; 
```

我正在使用这个 UIPopoverController 来显示用户图像库，因为如果你的 iPad 构建，你必须这样做。有人经历过吗？它只给我这个错误：

```
*** Terminating app due to uncaught exception 'NSGenericException', reason: '-[UIPopoverController dealloc] reached while popover is still visible.' 
```

当我打开它时随机。（例如，我可能可以毫无例外地打开画廊一次，但不能两次或三次，但第四次它会抛出异常）这真的很奇怪。

这是我创建选择器的代码：

```
self.imagePickerPopover = [[UIPopoverController alloc] initWithContentViewController:picker];
[self.imagePickerPopover presentPopoverFromRect:aUIButton.frame inView:aUIButton.superview permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:32:27.907

所以事实证明，我实际上是想让那个选择器在打开时弹出不止一次。所以我只是使用 isPopoverVisible 属性来检查，如果不是，那么我创建并显示了弹出框。问题已解决。

# sencha-touch - Proper use of the rootProperty in Sencha Touch 2

> ID：11110673
> 
> 赞同：1
> 
> 时间：2012-06-19T22:59:16.227
> 
> 标签：sencha-touch, extjs, sencha-touch-2, foursquare

I am trying to use the rootProperty value in a Sencha Touch 2 store to load some JSON I retrieved from the Foursquare Venues API and for the life of me I cannot get it to work.

According to the docs I should setup my rootProperty in dot notation to equal "response.venues" but it does not populate the list. I put the json in a separate file and removed the "response" and "venues" headers and it worked fine. There must be something blatantly obvious I'm missing here as I can't find a straight answer anywhere.

My model:

```
Ext.define('App.model.4SqVenue', {
extend: 'Ext.data.Model',

config: {
    fields: [
        {name: 'name', id: 'id'}
    ]
}
}); 
```

My store:

```
Ext.define('App.store.4SqVenues', {
extend: 'Ext.data.Store',
requires: [
    'App.model.4SqVenue'
],

config: {
    model: 'App.model.4SqVenue',
    storeId: '4SqVenuesStore',

    proxy: {
        type: 'jsonp',
        url: 'foursquare venue request',
        reader: {
            type: 'json',
            rootProperty: 'response.venues'
        }
    }
}
}); 
```

My view:

```
Ext.define('App.view.4SqVenues', {
extend: 'Ext.List',
xtype: '4SqVenuesCard',
requires: [
    'App.store.4SqVenues'
],

config: {
    fullscreen: true,
    itemTpl: '{name}',
    store: '4SqVenuesStore'
}
}); 
```

The response from the 4sq API:

```
{
"meta": {
    "code": 200
},
"response": {
    "venues": [
        {
            "id": "4a3ad368f964a52052a01fe3",
            "name": "Four Peaks Brewing Company",
            "contact": {
                "phone": "4803039967",
                "formattedPhone": "(480) 303-9967",
                "twitter": "4PeaksBrewery"
            },
            "location": {
                "address": "1340 E 8th St",
                "crossStreet": "at Dorsey Ln.",
                "lat": 33.4195052281187,
                "lng": -111.91593825817108,
                "distance": 1827,
                "postalCode": "85281",
                "city": "Tempe",
                "state": "AZ",
                "country": "United States"
            },
            "categories": [
                {
                    "id": "4bf58dd8d48988d1d7941735",
                    "name": "Brewery",
                    "pluralName": "Breweries",
                    "shortName": "Brewery",
                    "icon": {
                        "prefix": "https://foursquare.com/img/categories/nightlife/brewery_",
                        "sizes": [
                            32,
                            44,
                            64,
                            88,
                            256
                        ],
                        "name": ".png"
                    },
                    "primary": true
                }
            ],
            "verified": true,
            "stats": {
                "checkinsCount": 24513,
                "usersCount": 8534,
                "tipCount": 235
            },
            "url": "http://www.fourpeaks.com",
            "likes": {
                "count": 0,
                "groups": []
            },
            "menu": {
                "type": "foodAndBeverage",
                "url": "https://foursquare.com/v/four-peaks-brewing-company/4a3ad368f964a52052a01fe3/menu",
                "mobileUrl": "https://foursquare.com/v/4a3ad368f964a52052a01fe3/device_menu"
            },
            "specials": {
                "count": 0,
                "items": []
            },
            "hereNow": {
                "count": 1,
                "groups": [
                    {
                        "type": "others",
                        "name": "Other people here",
                        "count": 1,
                        "items": []
                    }
                ]
            }
        }
    ]
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-01T05:08:17.030

我有一个非常相似的问题。如果我在没有定义 rootProperty 的情况下加载 json，基本上一切都很好。但是一旦我定义它，事情就会停止工作（在 Architect 中报告了错误的配置错误）。

所以 belwo 工作 opnlu 直到我将 rootProperty 定义为“记录”

```
{ "records" : [ { "artist" : "Champion",
        "index" : 1,
        "recordid" : "r00899659",
        "trackname" : "1 To 2"
      },
      { "artist" : "Champion",
        "index" : 2,
        "recordid" : "r00899668",
        "trackname" : "Is Anybody There?"
      }
      .......
    ],
  "rowcount" : 10,
  "timestamp" : "1/07/2012 5:05:19 AM"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T03:06:26.387

首先，您必须将其包装在函数调用中，作为响应的 Per 文档。然后您可能必须在模型中使用转换函数。比如设置root属性为response，然后使用convert从场地属性中引入所有其他数据。

# rspec - Rails Tutorial 7.2.2 UsersController issue

> ID：11110675
> 
> 赞同：0
> 
> 时间：2012-06-19T22:59:32.233
> 
> 标签：rspec, ruby-on-rails-3.2, railstutorial.org

I'm in section 7.2.2 (Chapter 7) of Michael Hartl's Rails Tutorial, and when I add an @user variable to `app/controllers/users_controller.rb` things get strange. The tests that are supposed to now pass don't - they instead fail for a different reason:

```
$ rspec spec/requests/user_pages_spec.rb -e "signup page"

Failures:

1) User pages signup page 
 Failure/Error: before { visit signup_path }
 ActionView::Template::Error:
   undefined method `users_path' for #<#<Class:0x007fdec372a8e0>:0x007fdec375d010>
 # ./app/views/users/new.html.erb:6:in `_app_views_users_new_html_erb___2884421820517152565_70297369620580'
 # ./spec/requests/user_pages_spec.rb:8:in `block (3 levels) in <top (required)>'

2) User pages signup page 
 Failure/Error: before { visit signup_path }
 ActionView::Template::Error:
   undefined method `users_path' for #<#<Class:0x007fdec372a8e0>:0x007fdec45caee0>
 # ./app/views/users/new.html.erb:6:in `_app_views_users_new_html_erb___2884421820517152565_70297369620580'
 # ./spec/requests/user_pages_spec.rb:8:in `block (3 levels) in <top (required)>' 
```

Initially, these tests fail b/c @user is nil. Now they're failing due to an undefined method.

The book suggests that they should pass once I've defined @user, so I'm confused. I've pushed ahead a bit thinking perhaps this would work itself out, but it hasn't, so I'd like to figure this out before proceeding.

Here are the tests in question (copied from the book):

```
require 'spec_helper'

describe "User pages" do
  subject { page }

  describe "signup page" do
   let(:user) { FactoryGirl.create(:user) }
   before { visit signup_path }
   it { should have_selector('h1', text: 'Sign up') }
   it { should have_selector('title', text: full_title('Sign up')) }
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T03:00:30.043

从头开始重新打开项目，我遇到了一个不同的错误，导致我发现了这个错字`config/environments/test.rb`：

```
# Speed up tests by lowering BCrypt's cost function. require 'bcrypt'
silence_warnings do
  BCrypt::Engine::DEFAULT_COST = BCrypt::Engine::MIN_COST
end 
```

通过移动`require 'bcrypt'`到它自己的线路，一切都恢复正常 - 包括我原来问题中的测试。

```
# Speed up tests by lowering BCrypt's cost function. 
require 'bcrypt'
silence_warnings do
  BCrypt::Engine::DEFAULT_COST = BCrypt::Engine::MIN_COST
end 
```

# c# - Add Category Dynamically ASP.Net 4 MVC3 C#

> ID：11110677
> 
> 赞同：1
> 
> 时间：2012-06-19T22:59:43.747
> 
> 标签：c#, jquery, asp.net, asp.net-mvc-3, razor

I am working on creating a blog with ASP.Net 4, MVC 3, Razor and C#. There are 2 seperate tables. 1 for the actual blog post and a relationship table for categories. The categories displays as a dropdown. I want to add the ability to add a new category using Ajax so the user does not lose what they have already entered into the form. What would be the best way to accomplish this? Here is what I have right now.

Controller Code

```
public ActionResult Create()
    {
        ViewBag.category_id = new SelectList(_db.Categories, "id", "category_name");
        return View();
    } 
```

Razor View

```
@model NPP.Models.News

@{
    ViewBag.Title = "Create News Item";
}

<h2>Create News Item</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>News</legend>

    <div class="editor-label">
        @Html.LabelFor(model => model.news_title, "Title")
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.news_title)
        @Html.ValidationMessageFor(model => model.news_title)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.news_content, "Content")
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.news_content)
        @Html.ValidationMessageFor(model => model.news_content)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.news_teaser, "Teaser (optional)")
    </div>
    <div class="editor-field">
        @Html.TextAreaFor(model => model.news_teaser)
        @Html.ValidationMessageFor(model => model.news_teaser)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.category_id, "Category")
    </div>
    <div class="editor-field">
        @Html.DropDownList("category_id", String.Empty)
        @Html.ValidationMessageFor(model => model.category_id)
    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
}

<div>
    @Html.ActionLink("Back to List", "Index")
</div> 
```

Thanks for any help in advance. My layout page includes jquery which I would prefer to use.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:16:31.377

添加另一个控制器方法以返回类别列表，例如：

```
public JsonResult Categories()
{
  return Json(DB.GetCategorys(), JsonRequestBehavior.AllowGet);
} 
```

然后在客户端，使用 ajax 获取您的类别并将它们绑定到您的下拉列表，例如：

```
$.ajax({
  url: 'http://myserver/myapp/mycontroller/Categories',
  success: function(data) {
       $('#dropCategorys').html('');
       $.each(data, function(i, e) {
           $('#dropCategorys').append('<option value="' + 
              e.category_id + '">' + e.category_name + '</option>');
       }
  }
}); 
```

这不会保存您当前选择的项目，但您始终可以在清除列表之前检查它，然后再将其重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:20:02.490

通过 AJAX 单独创建类别并不是您唯一的选择。然后你可以有一个像这样的视图模型：

```
public class CategoryViewModel
{
    public string name { get; set; }
    public int id { get; set; }
}

public class CreateNewsViewModel
{
    public string news_title { get; set; }
    public string news_content { get; set; }
    public string news_teaser { get; set; }
    public string CategoryViewModel category { get; set; }
} 
```

在类别字段中更改您的视图：

```
<div class="editor-label">
    @Html.LabelFor(model => model.category, "Category")
</div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.category.id, ViewBag.category_id)
    @Html.EditorFor(model => model.category.name) <!-- only show when creating a new category -->
    @Html.ValidationMessageFor(model => model.category)
</div> 
```

然后您的操作将如下所示：

```
[HttpPost, ActionName("Create")]
public ActionResult DoCreate(CreateNewsViewModel model)
{
    if (ModelState.IsValid)
    {
        if (model.category.id == 0)
        {
            // create your new category using model.category.name
        }

        // create an entity from the model and save to your database

        return RedirectToAction("Index", "News"); // do whatever you wish when you're done
    }

    return View("Create", model); // show Create view again if validation failed
} 
```

这或多或少在我脑海中浮现，所以让我知道我是否把任何部分都搞砸了。

# android - background service makes app crash after unlocking the real device

> ID：11110678
> 
> 赞同：0
> 
> 时间：2012-06-19T22:59:45.537
> 
> 标签：android, service, crash

I am running a background service which checks for some updates from the server every 2 hours in my android app and it works fine so long as the device is the not in the locked state. But once I lock my phone and unlock again I see my device displaying the message that my app has crashed. What could be the real reason behind it. Does it need some permissions to be declared. Could anyone suggest me as to why this is happening.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:06:44.147

它可能是由多种原因引起的。但我会猜测：**您是否考虑到您的应用无法到达服务器的情况？**我的意思是，我猜测当您锁定手机或以某种方式关闭手机时，它可能会关闭您的连接，并且您的应用程序可能会崩溃，因为它会在没有连接的情况下获取服务器。它只是一个非常广泛的猜测......

# php - 在 __desstruct() 函数时写入文件

> ID：11110690
> 
> 赞同：1
> 
> 时间：2012-06-19T23:01:25.990
> 
> 标签：php, fwrite, magic-methods

我发现在 PHP 类中编写（`file_put_contents`或简单`fwrite`）是不可能`__destruct()`的，如何调用它？全功能：

```
 function __destruct()
    {
        foreach($this->data as $name=>$value) $$name=$value;    

        if(count($this->modules)>0)
        {   foreach($this->modules as $name=>$value) 
            {   
                ob_start();
                include $value;
                $content=ob_get_contents();
                ob_end_clean();
                $$name = $content;
            }
        }                   
        ob_start();

        include $this->way;

        $content = ob_get_contents();

        ob_end_clean();

        $fp = fopen('cache.txt', 'w+');
        fputs($fp, $content);
        fclose($fp);

        echo $content; 

    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T23:14:38.250

您遇到的问题可能是您仍在 destruct() 中引用该对象。

写入 __destruct 中的文件应该没有问题。下面的例子证明了这一点：

```
<?php
    class TestDestruct{
       function __construct(){
          $this->f = 'test';
       }

       function __destruct(){
          print 'firing';
          $fp = fopen('test.txt', 'w+');
          fputs($fp, 'test');
          fclose($fp);
      }
    }

$n = new TestDestruct();
empty($n); 
```

请记住，只有在没有对该对象的引用时才会触发 destruct。所以如果你要做类似的事情 `fputs($fp, $this->f)`

那么它就行不通了。

# tfs - 与 TFS 2010 中的许多分支相关的可扩展性和性能限制是什么？

> ID：11110693
> 
> 赞同：2
> 
> 时间：2012-06-19T23:01:34.263
> 
> 标签：tfs, branch

我的团队正在考虑在 TFS 2010 中进行每个任务的分支开发。我们正在考虑将搁置集用于小任务（1-3 天）并为任何更大的任务（4 天到 2 个月）创建新分支。一旦在分支上完成开发，它将被合并到 main 并删除（而不是销毁）。通常只有一个开发人员在特定分支上工作。

有没有人有使用 TFS 2010 和许多分支的项目工作经验。它是如何工作的？随着分支机构数量的增加，是否存在任何服务器性能问题？它会影响 VS IDE 的性能吗？

已经有很多与诸如“TFS 在合并方面很烂，正在压垮我的灵魂，我能做些什么？”等问题的答案。和“当 x、y 和 z 可用时，为什么有人会使用 TFS？” 在存在大量分支机构的情况下，请尽量保留与服务器性能和系统可用性相关的答案。

这是我的分支历史的一些背景。我之前参与的项目在 ClearCase 中使用了每个任务的分支策略，并且效果非常好。分支创建与缺陷跟踪和构建系统相关联。开发人员在自己的分支中完成了每个工作单元。每个分支的生命周期从一天到几个月不等。在每个任务结束时，代码被合并到主集成分支中。这是一个大型项目，经过大约 10 年的开发，该系统拥有超过 10,000 个分支。ClearCase 能够很好地处理这种分支量（除了在版本树浏览器中查看流行文件时，加载时间可能很慢）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:29:25.963

基本上，您描述的模型是按功能划分的模型，这是 Microsoft 的 Dev Div 用于开发 Visual Studio 产品系列的模型，因此您可以看出它可以很好地与 TFS 一起扩展。

我建议您阅读这篇[博](http://blogs.msdn.com/b/teams_wit_tools/archive/2008/04/03/how-microsoft-devdiv-uses-tfs-chapter-2-feature-crews.aspx)文，您可以阅读[Branching Guide V2](http://tfsbranchingguideii.codeplex.com/)以获取更多信息。

至于合并，这里和网络上都很好地涵盖了这个主题，在我看来，当你正确使用它（并且没有默认的合并工具）时它并不糟糕。

# c# - Azure ACS - 我应该加密 ClaimTypes.NameIdentifier 信息吗？

> ID：11110694
> 
> 赞同：1
> 
> 时间：2012-06-19T23:01:50.317
> 
> 标签：c#, azure, acs, servicebus

我目前正在开发一个实现 Azure ACS 的项目。我掌握了基础知识，我注意到 Azure ACS 向我发送了 SAML 信息，其中包括 identityProvider 和 NameIdentifier。使用 2 我可以为所有用户建立唯一性。

目前，这两个数据以纯文本格式存储在中央数据库中。对于 identityProvider 来说没什么大不了的，但我认为 Nameidentifier 是不同的。出于安全原因，我应该在数据库/日志中加密 NameIdentifier 吗，还是太过分了？我可以黑客使用 NameIdentifier 信息来冒充合法用户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:31:39.910

不，仅 NameIdentifier 不足以模拟用户；攻击者还需要使用身份提供者的私钥伪造数字签名。

NameIdentifier 有时确实构成私人的个人身份信息，这意味着攻击者可能能够追踪 NameIdentifier 以识别特定用户。这就是为什么一些（但不是全部）身份提供者基于每个 RP 对 NameIdentifier 进行哈希处理。但我认为除非您有极其严格的隐私政策，否则您不需要对其进行加密。也就是说，如果您出于隐私原因要加密其他私人信息（例如姓名和电子邮件），那么您还将加密 NameIdentifier。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:30:49.993

根据我的个人经验，我没有看到有人出于各种原因在存储时加密 IP 和/或 Nameidentifier。Nameidentifier 已经是每个由 IP 发出的唯一 ACS 请求的哈希令牌值。

# c# - mkbundle 组合 DLL 在其他项目中引用时导致 Invalid Metadata 异常

> ID：11110696
> 
> 赞同：2
> 
> 时间：2012-06-19T23:02:38.707
> 
> 标签：c#, mono, ubuntu-12.04, mkbundle

我有一个 .NET 4.0 解决方案，其中包含大约 10 个项目，我在 Ubuntu Desktop 12.04 上的 mono 2.10.8.1 上成功编译了这些项目，该解决方案在 VM 中运行。

我正在尝试运行 mkbundle 以将所有 10 个 DLL 组合成一个 DLL，然后我可以在其他解决方案中引用该 DLL（即一些将在更高级别的应用程序中大量重用的核心库）。

这就是我正在运行以构建解决方案：

```
xbuild /nologo CoreApp.sln 
```

然后我运行以下命令来组合 DLL：

```
mkbundle -c --nomain -o Build/CoreApp.dll Build/FirstLibrary.dll Build/SecondLibrary.dll Build/ThirdLibrary.dll 
```

这成功完成，我得到了 CoreApp.dll。

但是，当我尝试构建依赖解决方案时，出现以下异常：

```
Error CS0009: Metadata file `/home/user/project/Build/CoreApp.dll' does not contain valid metadata (CS0009) (HigherLevelApp.Impl) 
```

如有必要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:21:54.670

mkbundle 用于创建独立的二进制文件，而不是将多个库合并为一个。

你想要像[il-merge](https://github.com/gluck/il-repack)这样的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:23:12.920

`mkbundle`不是 IL 合并。该工具的输出是一个独立的应用程序（有或没有单声道本身）。因此，其他 .NET 项目不再可以使用它。

允许您`mkbundle`分发包含执行单个 .NET 应用程序所需的所有内容的单个文件。

您正在寻找的是一种将多个程序集合并为一个新程序集的方法。微软有这样的工具，而其他一些产品（许多基于 Mono.Cecil）也有类似的功能。

# java - 安卓遥控相机

> ID：11110699
> 
> 赞同：0
> 
> 时间：2012-06-19T23:03:21.573
> 
> 标签：java, android, zigbee

是否有一个开源的 Android 应用程序可以让您在“间谍”相机上查看图像？我有一个具有 IOIO 板和 ZigBee 网络连接的机器人，我想通过添加摄像头使其成为间谍机器人。我想在机器人四处行驶时查看此相机上的图像。它需要是开源的，以便我可以将检索相机图片的代码合并到我现有的控制机器人的应用程序中。请评论相机和开源应用程序。最佳答案可能会得到一些特别的东西:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T13:33:57.137

Zigbee 并没有真正的带宽来传输视频。根据维基百科页面：`The 2.4 GHz band provides up to 250 kbit/s, 915 MHz provides up to 40 kbit/s and 868 MHz provides a data rate up to 20 kbit/s. The actual data throughput will be less than the maximum specified bit rate due to the packet overhead and processing delays.`

[http://en.wikipedia.org/wiki/ZigBee#Radio_hardware](http://en.wikipedia.org/wiki/ZigBee#Radio_hardware)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-14T00:55:12.680

如果需要，请使用 Zigbee。用作时间间隔，例如每秒一次。

为此相机需要一个帧缓冲区，然后您需要将该数据发送到接收器，然后重建帧。

使用 Zigbee 可以按照以前的答案率实现。

我看到的唯一一件事是 STM 开发 2 板解决方案，但它不再出售。

# javascript - 通过其 src 获取图像的 naturalWidth

> ID：11110701
> 
> 赞同：1
> 
> 时间：2012-06-19T23:03:35.690
> 
> 标签：javascript, jquery, image

如果我有一个带有 url 的图像，例如`img/160x180.jpg`如何在 jquery/javascript 中单独使用它，我可以获得它的宽度和高度。我试过了

```
alert($('<img src="img/160x180.jpg"/>').naturalWidth) 
```

在下面的示例中，它返回未定义。

## [http://jsfiddle.net/D7dx6/](http://jsfiddle.net/D7dx6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:07:11.997

[更新：](http://jsfiddle.net/D7dx6/1/)

```
alert($('<img src="http://static.jquery.com/files/rocker/images/logo_jquery_215x53.gif"/>')[0].width); 
```

*编辑*——这真的没有意义；它需要在事件处理程序中：

```
$('<img/>', {
  'load': function() { alert(this.width); },
  'src': 'http://static.jquery.com/files/rocker/images/logo_jquery_215x53.gif'
}); 
```

应该注意的是，该代码在 IE 上*可能会*出现问题，因为如果设置了“src”并且在“加载”处理程序建立*之前在缓存中找到了图像，它有时会掉球。*在这种情况下，您可以这样做：

```
$('<img/>', { 'load': function() { alert(this.width); } }).prop('src', 'http://...'); 
```

没有“naturalWidth”属性。

虽然在这种情况下它几乎是无关紧要的开销，但你可以在没有 jQuery 的情况下这样做：

```
var img = new Image();
img.onload = function() {
  alert(img.width);
};
img.src = "http://placekitten.com/300/400"; 
```

现在要注意的一件事是，如果您正在查看实际的*页面*元素（即`<img>`页面上的标签），它们可能具有覆盖真实大小的“宽度”属性。再次获取图像通常会将其从缓存中拉出，尽管对于移动设备上的巨大图像存在一些潜在的痛苦。

（*编辑*——Graham指出有*一个*“naturalWidth”，但目前还没有得到很好的支持。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:19:31.993

`naturalWidth`并且`naturalHeight`尚未得到很好的支持：请参阅[https://developer.mozilla.org/en/DOM/HTMLImageElement](https://developer.mozilla.org/en/DOM/HTMLImageElement)。

确定图像原始尺寸的纯 JavaScript 方法（无论它当前是否存在于 DOM 中）是使用`Image`对象。

```
var img = new Image();
img.src = 'path/to/img.jpg';
// you'll probably want to use setTimeout to wait until the imh.complete is true
console.log(img.width); 
```

# actionscript-3 - 有人可以将此 C++ 翻译成 AS3 吗？

> ID：11110703
> 
> 赞同：0
> 
> 时间：2012-06-19T23:03:59.347
> 
> 标签：actionscript-3, actionscript, square-root

这段代码将 0 到 4095 的数字的 sqrt() 存储在一个表中，我想将它翻译成 Actionscript 3。

```
unsigned short int_sqrt_x1024[4096];

for (int i=0; i<sizeof(int_sqrt_x1024)/sizeof(int_sqrt_x1024[0]); i++)
int_sqrt_x1024[i] = (int)(sqrtf((float)i + 0.5f) * 1024.0f); 
```

我已经完成了一半，但是“sizeof”部分让我感到困惑，我不知道如何处理这些！

所以根据你的建议，我想出了这个，你怎么看？？？：

```
var int_sqrt_x1024:Vector.<uint> =  new Vector.<uint>(4096,true)
for (var i:int = 0; i < int_sqrt_x1024.length; i++)
int_sqrt_x1024[i] = Math.sqrt( i + 0.5) * 1024; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:11:01.897

您可以找到`sizeof` [HERE](http://msdn.microsoft.com/en-us/library/4s7x1k91%28v=vs.71%29.aspx)的定义。据我所知，AS3 中没有类似的运算符。我从来没有在文档中遇到过类似的东西，搜索也没有发现任何东西。

事实上，我能找到的最接近它的是完全不相关的[ByteArray](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html)，我可以保证*不会*达到同样的目的，因为一个是高级数据类型，另一个是运算符。它们的用法甚至都不相似。

我很好奇，这段代码的目标是什么？也许还有另一种方法可以达到同样的目的。（显然从阅读评论来看，实际上有更好的方法。）

编辑：见下面基本的评论......可能有类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:16:50.170

抱歉，由于我不了解 Actionscript，因此无法提供翻译，但我认为这也会对您有所帮助：

C`sizeof`运算符返回其参数的大小（以字节为单位）。在像 Actionscript 这样的“托管”语言中，这不是您需要关心的事情。您发布的 C 代码（我并没有真正看到其中的任何内容必然会使其成为 C++）所做的是迭代循环（`size_of_the_array_in_bytes`/ `size_of_one_array_element_in_bytes`）次。在您的情况下，那个复杂的表达式只会计算为 4096。

在其他世界中，创建一个执行平方根存储 4096 次的循环。

* * *

您用作基础的 C 代码似乎写得很糟糕。我似乎找不到使用如此复杂、冗长和不可读的方式来填充简单查找表的原因。IMO，它应该是这样的：

```
#define LOOKUPTABLE_LENGTH 4096
unsigned short int_sqrt_x1024[LOOKUPTABLE_LENGTH];

for (int i=0; i<LOOKUPTABLE_LENGTH; i++)
    int_sqrt_x1024[i] = (int)(sqrtf((float)i + 0.5f) * 1024.0f); 
```

更具可读性，不是吗？

# arrays - 在 delphi 中传递不同枚举类型的混合

> ID：11110704
> 
> 赞同：5
> 
> 时间：2012-06-19T23:04:23.743
> 
> 标签：arrays, delphi, enums

我需要编写一个可以传递不同枚举选择的过程。

```
type
  TEnumOne = (eOneFlagOne, eOneFlagTwo);
  TEnumTwo = (eTwoFlagOne, eTwoFlagTwo); 
```

该方法应采用不同的枚举：

```
Process([eOneFlagOne, eTwoFlagTwo]); 
```

我正在尝试像这样实现它：

```
// does not work!
procedure Process(const Enums: array of Variant);
var aValue; Variant
begin
  for aValue in Enums do
  begin
    // of course, can't work...
    if aValue is TEnumOne then
  end; 
end; 
```

那么，我可以选择一种类型而不是 Variant 吗？或者是一种不同的方法，我不明白？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T23:58:04.147

遇见帕斯卡之美。

这是您可能正在尝试做的工作示例：

```
program Project34; {$APPTYPE CONSOLE}

type
  TEnum=(eOneFlagOne,eOneFlagTwo,eTwoFlagOne,eTwoFlagTwo);
  TEnumSet=set of TEnum;

const
  cEnumOne=[eOneFlagOne,eOneFlagTwo];
  cEnumTwo=[eTwoFlagOne,eTwoFlagTwo];

procedure Process(const Enums: TEnumSEt);
var e:TEnum;
begin
  for e in Enums do
    WriteLn(ord(e));
end;

begin
  Process([eOneFlagOne, eTwoFlagTwo]);
  Process(cEnumOne);
  Process(cEnumTwo);
end. 
```

请注意，您也可以像这样声明常量。也许这更清楚：

```
const
  cEnumOne:TEnumSet=[eOneFlagOne,eOneFlagTwo];
  cEnumTwo:TEnumSet=[eTwoFlagOne,eTwoFlagTwo]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T23:56:13.300

坦率地说，当您开始尝试像这样弯曲您的语言时，通常意味着您的方法可能是错误的。（并非总是如此，但通常）我很想听听您要解决什么问题，因为也许有更好的设计选择。

由于我们对您的问题知之甚少，我建议您创建两个具有不同签名的函数。
或者
，如果所需的逻辑分支彼此足够相似，那么您可以使用枚举类型作为通用参数创建一个通用方法（假设 Delphi 2009 或更高版本）。

```
...
procedure Process<T>(const enumParam : T) // Add a generic constraint here as well
begin
...
end; 
```

然而，在我看来，这两种不同的方法可能是最好的选择（或者完全是别的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T14:22:19.223

RRUZ 删除了他的答案，这是一个具有类型安全性的重做版本。RTTI 用于识别不同的枚举常量。

```
function EnumToString(const TypeInfo : pTypeInfo; Ix : Integer) : string;
begin
  Result := GetEnumName(TypeInfo, ix); 
end;

procedure Process( const Args : array of string);
var
  LIndex,ix : integer;
  EnumOne : TEnumOne;
  EnumTwo : TEnumTwo;
begin
  for LIndex := 0 to High(Args) do begin
    ix := GetEnumValue( TypeInfo(TEnumOne), Args[LIndex]);
    if (ix <> -1) then
    begin
      EnumOne := TEnumOne( ix); 
      // do something with EnumOne
      ...
      continue;
    end;

    ix := GetEnumValue( TypeInfo(TEnumTwo), Args[LIndex]);
    if (ix <> -1) then
    begin
      EnumTwo := TEnumTwo( ix); 
      // do something with EnumTwo
      ...
      continue;
    end; 
    ... 
    etc

  end;        
end;

Process( [EnumToString(TypeInfo(TEnumOne),Ord(TEnumOne.eOneFlagOne)),
          EnumToString(TypeInfo(TEnumTwo),Ord(TEnumTwo.eTwoFlagTwo))]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T06:31:09.627

另一种方法是将其保留为一个枚举：

```
TEnum = (eOneFlagOne, eOneFlagTwo, eTwoFlagOne, eTwoFlagTwo); 
```

Process 函数将如下所示：

```
procedure Process(Enums: Array of TEnum);
var 
  aValue: TEnum;
begin
  for aValue in Enums do
  begin
    if aValue in [eOneFlagOne, eOneFlagTwo] then
      // Handle the eOne enums
    else if aValue in [eTwoFlagOne, eTwoFlagTwo] then
      // Handle the eTwo enums
  end; 
end; 
```

# django - 尝试解压 Django 时遇到问题

> ID：11110710
> 
> 赞同：0
> 
> 时间：2012-06-19T23:04:51.010
> 
> 标签：django, macos, installation

我是 Django 新手，安装时遇到问题。我在一个相当更新的 Mac 上，我已经有了 Python 2.7.2。我下载了 Django 的最新版本，即 1.4。Django 网站告诉我，我需要通过运行以下命令来解压 Django：

tar xzvf Django-1.4.tar.gz

但是，终端只是给我回了tar：打开存档时出错：无法打开'Django-1.4.tar.gz'

为什么会这样？我尝试运行命令 python setup.py install ，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:15:04.553

只需通过 pip（包管理器）安装 django。一旦你有了 pip，你可以很容易地从以下位置安装包：http: [//pypi.python.org/pypi](http://pypi.python.org/pypi)

**通过 pip 安装**

```
$ pip install django 
```

**安装 pip（如果尚未安装）**

```
easy_install pip 
```

**如果您还没有 easy_install**

下载： http:
[//peak.telecommunity.com/dist/ez_setup.py](http://peak.telecommunity.com/dist/ez_setup.py)

并做：

```
python ez_setup.py
easy_install pip 
```

# java - 如何使用 java Jersey 在资源中发出 HTTP 请求？

> ID：11110713
> 
> 赞同：1
> 
> 时间：2012-06-19T23:05:09.470
> 
> 标签：java, jersey

使用 Jersey，我希望能够有一个 GET 请求，这将导致服务器代码在另一个返回 json 对象的资源上对自身发出 HTTP 请求。我知道泽西岛有独立的客户端和服务器 api，有什么方法可以将两者结合起来吗？

```
@Path("/helloworld")
public class GetData {
    @GET
    public String getResource() throws IOException {
        String result;

        //Insert code to make an http request to localhost/someobject.json and store it in a variable
        return result;       

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:14:05.133

没有理由不能在相同的代码中使用客户端和服务器 Jersey，就像使用任何其他代码一样。但是，链接 HTTP 请求听起来可能不是最好的主意。你确定这是你想做的吗？

# javascript - javascript 函数中是否允许使用相同的变量和参数名称？

> ID：11110716
> 
> 赞同：15
> 
> 时间：2012-06-19T23:05:46.407
> 
> 标签：javascript

例如，我可以使用相同的变量和参数吗？我会遇到什么问题？

示例代码

```
function mytask(name,title){
            var name = name;
            var title = title;
            var showalert = ("Hi " + name + " your job title is " + title);
            console.log(showalert);
            return showalert;
        }

document.write(mytask("dan", "administrator")); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:32:56.790

好吧，在 javascript 中，您可以认为，作用域是由我的大括号定义的：`{`和`}`，并且在作用域内可以重新定义变量，因此请看：

```
function x(){
  var name=3;
  var name=4;
  console.log(name); // output is: 4
}
x(); 
```

但这只是对了一半，实际上发生的事情是解释器检查代码，并将所有`var`语句移到开头，同时为它们分配一个`undefined`（并且所有参数都被定义并从堆栈中获取），然后是你的代码写的会运行。因此`var`，第一个之后的任何内容都将被忽略。你写的代码等于：

```
function mytask(name,title){
   var name = arguments[0];
   var title = arguments[1];
   name = name;
   title = title;
   var showalert = ("Hi " + name + " your job title is " + title);
   console.log(showalert);
   return showalert;
}

document.write(mytask("dan", "administrator")); 
```

所以你的重新减速，分配是多余的。无论如何 - 范围没有改变，其他没有什么不同。

# ****编辑****

**解释器会检查您的代码，执行任何操作，任何`var x = y;`语句都会拆分为`var x = undefined;`and `x=y;`。并且`var x = undefined;`将被移动到代码的顶部。并且`x=y;`将与原始声明位于同一位置。如果您不了解有关堆栈的内容，请不要打扰，这就是编译器将函数调用转换为汇编的方式 - 如果您有时间，值得了解；但不是这里重要的事情。**

 **无论如何 - 就在这些更改之后，也许进行了一些优化，结果代码被执行。这不是您编写的代码，而是相同的代码。您在重新定义参数时指出的是这种转换变得可见的极端情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:16:05.830

这样想：

```
var name = name; 
```

唯一`name`可以设置为值的方法*是*`name`如果`name`已经定义。如果已经具有您想要的值，则无需执行两次。*`name`*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T23:18:41.490

好吧，我想一些解释不会有伤害。)

首先，该函数的所有参数都已声明为该函数的本地参数。（它有点复杂，但假设这个解释涵盖了大部分内容）。所以再次定义它们真的没有用：之后它们不会变得“更本地化”。))

其次，可以在 中写入，原因与可以写入`var name = name`的`function(name)`原因相同`var name = 123; var name = 345;`。第二个`var`将被默默地忽略。

如果你写`var name = 123; var name = name;`，你只会浪费一些击键——同样，这和你`name = name;`在代码中的某个地方写是一样的。)

顺便说一句，这解释了弄乱`arguments`. 看，`name`实际上是它的元素的别名。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T23:10:25.597

当然，您可能会遇到问题。看看这个。

```
function mytask(name,title){
            console.log(name);
            console.log(title)
            var name = "oops";
            var title = "rawr";
            console.log(name);
            console.log(title)
}

mytask("dan", "administrator"); 
```

除了非常令人困惑之外，调用`console.log(name);`给我们带来了两种不同的结果（因为我们重新定义了它）。这是允许的，但这不是一个好主意。

**编辑**：有趣的是（我不知道这一点），执行上述`arguments[]`操作也搞砸了隐式数组。例如，做：

```
for( var i = 0; i < arguments.length; ++i ) {
    console.log(arguments[i]);
} 
```

我们函数内部的某个地方（重新分配后）仍然输出`oops`和`rawr`. 显然，这是一个坏主意。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T23:10:30.947

您可以使用与参数同名的变量，因为值将是相同的，除非同名变量的值与参数不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T23:10:57.620

实际上没有理由这样做。一旦将它们传递给函数，它们就会被初始化，您可以使用它们而无需将它们重新分配给其他变量。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-03T11:50:31.990

```
 <script>

    //this function returns what you give as argument
    function func1(name1) {
        let name1 = "mess shahadat"; //can't declare name, cause already getting name as parameter. thus this gives error if you define a variable same name as parameter with let. cause you can't redeclare let variable in javascript
    }

    document.write(func1("mike"))

</script> 
```

在 javascript 中，函数参数的作用类似于局部变量。在函数内部，如果使用 var 关键字声明变量并使用与参数相同的名称，那么它将返回 undefined。如果你用 let 关键字声明变量，你会得到一个错误。因为 let 变量不可重新声明。

因此，当您需要具有相同名称的变量具有与参数不同的值时，请不要使用相同的变量名称作为参数，因为它可能会成为您项目中的一个错误。

例子：

```
<script>

    //constructor function
    let mobile = function (modelNo, ram, price) {
        this.model = modelNo;
        this.ram = ram;
        let price = price + 1000; //can't declare price, cause already getting price as parameter. and let variables are not redeclarable
        this.price2 = function () { return price };
        this.totalPrice = function () { return "total price is: " + this.price2 }
    }

    let samsung = new mobile("samsung dous", "2gb", 3000);

    document.write(samsung.price2());

</script> 
```***

# wpf - 为什么我的引用文件无法从我的 WPF 用户控件加载？

> ID：11110720
> 
> 赞同：0
> 
> 时间：2012-06-19T23:06:16.797
> 
> 标签：wpf, xaml, reference

基本上，我的项目遵循[这个问题](https://stackoverflow.com/questions/6036631/why-does-the-wpf-designer-fail-to-load-libraries-that-call-into-unmanaged-dlls)的设置，除了我的 C# WPF 项目使用 .NET 4.0，但我遇到了不同的问题。我的视图模型可以很好地使用托管项目，但是，当我从用户控件引用托管项目时，无论是在 xaml 代码中还是在后面的代码中，由于“找不到文件”，该控件不会在我的视图上呈现例外。（我的 WPF 项目构建成功）

我对此原因的最佳猜测是我的托管类使用的是 .NET 3.5，而我的 wpf 项目使用的是 .NET 4.0。但这没有意义，我不知道如何解决这个问题。

编辑：我发现当我尝试在构造函数中使用托管类时会出现问题。但是，每当我在用户控件的加载和初始化事件中使用它们时，也会发生这种情况。有没有办法解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:56:07.470

找不到文件异常应该告诉您缺少哪个文件。我敢打赌，您在一个 DLL 中的托管类引用了 WPF 项目未引用的某个 DLL - 这意味着它没有被复制到输出目录中。总结一下：确保所有引用的程序集在实际可执行文件所在的任何地方都可用。

# mysql - 我是否应该知道数据库表行的“成正比增长”和日志文件中 SQL 查询的长度？

> ID：11110722
> 
> 赞同：1
> 
> 时间：2012-06-19T23:06:35.437
> 
> 标签：mysql, sql, ruby-on-rails, ruby, logging

我正在使用 Ruby on Rails 3.2.2 和 MySQL。从*记录器*我知道我的系统正在运行如下 SQL 查询：

```
SELECT `articles`.* FROM `articles` WHERE (articles IN (1,2,...,<A_LOT_OF_ID_VALUES>)) 
```

从*源代码*中我知道该`<A_LOT_OF_ID_VALUES>`值随着相关`articles`数据库表中存在的行数/记录数而增长......**我应该知道“成正比增长”吗？**

*奖励*`1,2,...,100,101,...,<A_LOT_OF_ID_VALUES>`：“实际上”说，我是否应该知道日志文件中的文本输出太“长”（例如，文本输出与前面提到的“ ”字符串一样）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T03:21:27.100

是的，您应该注意不断增长的 id 列表.....暂时还可以，但是一旦达到数百或数千，查询就会变得非常缓慢。另一种方法是使用子查询来选择您需要的 id。

# javascript - 单击时更改未选择元素的背景图像

> ID：11110726
> 
> 赞同：-1
> 
> 时间：2012-06-19T23:07:14.380
> 
> 标签：javascript, jquery, css

我正在做一个 HTML 格式的软件界面原型，在菜单上我有一堆按钮，这些按钮是带有背景图像的列表项。当我单击然后背景图像更改以显示该按钮已被选中时，我通过 .replace() url 文件夹的名称来做到这一点：

```
#menu ul.icons li {
background-image:url(images/edit-menu/icons/hand.png);
background-size:contain;
display:block; 
```

}

```
ul class="icons"> 
    <li class="um"></li>
    <li class="dois">
        <ul class="submenu">
            <li></li>            
        </ul>
    </li>
    <li class="tres"></li>
    <li class="quatro"></li>
    <li class="cinco"></li>
    <li class="seis"></li>
    <li class="sete"></li>
    <li class="oito"></li>
    <li class="nove"></li>
    <li class="dez"></li>
</ul>

$("#menu ul.icons li").click(function() {
var urlIcon = $(this).css('background-image').replace('icons', 'selected');
$(this).css('background-image', urlIcon);
}); 
```

但是现在我需要在单击按钮时将处于“已选择”状态的任何其他按钮更改回未选择状态，因此我需要将背景图像的 url 文件夹从“已选择”更改回“图标” . 我尝试使用替换（）和兄弟姐妹（），但没有奏效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:21:39.420

您可以在 css 中定义图标，并通过在 javascript 中切换活动类来操作它们。

CSS：

```
#menu ul.icons li {
  background-image:url(images/edit-menu/icons/hand.png);
} 

#menu ul.icons li.active {
  background-image:url(images/edit-menu/icons/active.png);
} 
```

查询：

```
$("#menu ul.icons li").click(function(){
  $(this).siblings(".active").removeClass("active");
  $(this).addClass("active");
}); 
```

如果您需要特定于每个列表项的图标，您可以在需要的地方更新 css，但 Jquery 可以保持不变。

# iphone - 2 个类似的 iOS 应用程序 - 管理它们的最佳方式是什么？

> ID：11110732
> 
> 赞同：5
> 
> 时间：2012-06-19T23:07:30.170
> 
> 标签：iphone, ios, xcode, ipad

我目前有一个 iPad 应用程序，但现在需要变成两个。第二个将或多或少与第一个相同，只是添加了登录屏幕并删除了主屏幕上的一些信息（以及其他小的调整）。这两个应用程序中的绝大多数将保持不变。该应用程序通常非常庞大且复杂。

所以......我的问题是管理这个的最佳方法是什么？我们是在谈论项目中的多个目标吗？git中的跟踪分支？也许是一个包含多个项目的 Xcode 工作区？

当然，目的是尽量减少将来我必须在两个应用程序中更改/添加相同代码的情况，同时让任何开发人员都可以轻松构建应用程序的任一版本。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:38:33.827

这是一个[与常见问题非常相似的问题](https://stackoverflow.com/questions/549462/how-do-i-manage-building-a-lite-vs-paid-version-of-an-iphone-app)，您拥有共享大部分代码的完整版和精简版应用程序版本。

我还将发布一个指向[本教程](http://blog.just2us.com/2009/07/tutorial-creating-multiple-targets-for-xcode-iphone-projects/)的链接，在我引用的其他堆栈溢出问题中我没有看到该链接。本教程适用于 Xcode 3，但在 Xcode 4 中使用相同的概念并不难。

**是的，我会在一个 Xcode 项目中使用两个目标。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:15:08.767

我不是这方面的专家，但我可能会复制该项目，然后像你说的那样，拥有一个包含两个项目的工作区。您可以使用项目中的每个头文件打开 2 个选项卡，然后比较它们并进行相应的编辑。同样，在这方面没有专家，但祝你好运！

# java - JOptionPane 光标

> ID：11110734
> 
> 赞同：2
> 
> 时间：2012-06-19T23:07:48.640
> 
> 标签：java, swing, cursor, joptionpane

使用 JOprionPane 时光标出现问题。我将光标设置为 pharent 框架，然后使用以下命令显示一个对话框：

```
Object[] possibilities = {"ham", "spam", "yam"};
String s = (String) JOptionPane.showInputDialog(MagicCollectorClient.getMainFrame(),"Complete the sentence:\n\"Green eggs and...\"",
            "Customized Dialog",JOptionPane.PLAIN_MESSAGE,null,possibilities,"ham"); 
```

它显示对话框，但将光标更改为默认系统光标，直到我关闭对话框。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:36:54.943

[SSCCE](http://sscce.org/)怎么样？是的，有可能，您必须将 JOptionPane 从静态方法助手中“解绑”，因为您希望对它做一些特别的事情。不幸的是，这意味着您还有更多工作要做，但没什么太可怕的。

```
public static void main(String[] args) {
    JFrame parent = new JFrame();
    parent.setSize(400, 400);
    parent.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
    parent.setVisible(true);

    Object[] possibilities = { "ham", "spam", "yam" };

    // raw pane
    JOptionPane optionPane = new JOptionPane(
            "Complete the sentence:\n\"Green eggs and...\"",
            JOptionPane.PLAIN_MESSAGE, JOptionPane.DEFAULT_OPTION, null,
            possibilities, possibilities[0]);

    // create a dialog for it with the title
    JDialog dialog = optionPane.createDialog("Customized Dialog");

    // special code - in this case make the cursors match
    dialog.setCursor(parent.getCursor());

    // show it
    dialog.setVisible(true);

    // blocking call, gets the selection
    String s = (String) optionPane.getValue();

    System.out.println("Selected " + s);
} 
```

# java - 用括号中的代码解释 Java 表示法“新”

> ID：11110735
> 
> 赞同：4
> 
> 时间：2012-06-19T23:07:58.590
> 
> 标签：java, android

我看到这种表示法，一个带有类名的新运算符，然后是括号中的代码，偶尔出现在 Android 示例中。有人可以解释一下吗？在下面的示例中，*PanChangeListener*是一个类（或者可能是一个接口），并且“new”创建了一个实例，但是括号中的代码相对于*PanChangeListener 起*什么作用？

```
fType pcListener = new PanChangeListener() {

      @Override
      public void onPan(GeoPoint old, GeoPoint current) {
                         //TODO
      }
}); 
```

甚至这种语法的名称也会很有用，因为我可以谷歌它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T23:09:45.067

那是一个[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)。

该语法允许您创建一个新类，为某些方法提供实现，然后实例化它。

> 当本地类只使用一次时，考虑使用匿名类语法，将类的定义和使用放在完全相同的位置。

它的工作方式与以下不使用匿名类的代码类似：

```
class MyPanChangeListener implements PanChangeListener()
{
    @Override
    public void onPan(GeoPoint old, GeoPoint current) {
        //TODO
    }
}

// ...

fType pcListener = new MyPanChangeListener(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:09:52.940

你在这里看到了一个*匿名类*的创建。它正在创建（a）名为接口的实现`PanChangeListener`或（b）该名称的抽象类的子类。

# android - 我应该在哪里关闭光标？

> ID：11110739
> 
> 赞同：0
> 
> 时间：2012-06-19T23:08:46.280
> 
> 标签：android

我有一个带有微调器的活动，它加载了一个 simpleCursorAdaptor。我调用另一个类来返回 simpleCursorAdaptor 使用的光标。我不保留游标或适配器的类级别变量。

当此活动关闭时，我想关闭光标。我是不是该：

a) 在活动的 onDestroy() 事件中，通过适配器从微调器获取光标并将其关闭或

b）在首先生成光标的数据处理程序类中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:19:07.760

如果您使用 loaderManager 或 supportedLoaderManager 创建游标，则无需担心关闭游标。还建议使用加载程序打开游标，以便在 UI 线程之外执行此操作。

但是由于某种原因，如果您必须使用 UI 线程上的 contentresolver 查询游标，最好在 onPause 中关闭游标并在 onResume 中重新查询游标，最坏的情况是在 onDestroy 中关闭它，可能会有在调用 onDestory 之前可能会收集活动垃圾的实例。

但是如上所述，请尝试使用带有 Loadermanager 和 LoaderCallbacks 的 CursorLoader 创建光标

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:19:15.143

您是否考虑过 startManagingCursor(Cursor c) 方法？

[http://developer.android.com/reference/android/app/Activity.html#startManagingCursor(android.database.Cursor)](http://developer.android.com/reference/android/app/Activity.html#startManagingCursor(android.database.Cursor))

尽管如此，我认为您应该将 CursorLoader 与 LoaderManager 一起使用（如文档中所述）。这些类在 android-support 库中可用。但请记住，CursorLoader 仅适用于 ContentProvider。如果您想要一个带有简单光标的 CursorLoader，请参阅[没有 ContentProvider 的 CursorLoader 用法](https://stackoverflow.com/questions/7182485/usage-cursorloader-without-contentprovider)

**编辑：**

这现在已被 Loaders 弃用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-19T23:24:30.473

您必须在`onStop()`或中关闭光标`onDestroy()`。或者，您可以`startManagingCursor()`在从查询中获取光标后调用，Android 将自行关闭光标。

# php - 如何使用 PHP 下载电子邮件

> ID：11110740
> 
> 赞同：5
> 
> 时间：2012-06-19T23:08:47.980
> 
> 标签：php, email, imap

我正在尝试使用 PHP 的标准库从头开始编写一个非常简单的基于 Web 的电子邮件客户端。我会诚实的；我不完全确定我在做什么，所以这是我为了试错学习而拼凑起来的东西。但是，无论我尝试什么，我都会超时。有什么建议吗？我知道预期的输出看起来并不漂亮，但就像我说的，这只是为了反复试验。

```
<?php

$stream = imap_open('{imap.gmail.com:993/imap/ssl}INBOX', '<email_removed>', '<password_removed>') or
    die('Cannot connect to server: ' . imap_last_error());

$date = date('d M Y', strtotime('-1 month'));
if ($emails = imap_search($stream, "SINCE \"$date\"")) {
    rsort($emails);

    foreach ($emails as $email_number) {
        echo imap_fetchbody($stream, $email_number, 2);
    }
}

imap_close($stream);

?> 
```

我得到的输出如下。

**警告**：imap_open() [function.imap-open]：无法在第 3 行打开流 {imap.gmail.com:993/imap/ssl}INBOX 无法连接到服务器：无法连接到 gmail-imap。 l.google.com,993：网络不可达

**注意**：未知：无法连接到 gmail-imap.l.google.com，993：第 0 行未知中的连接超时（errflg=1）

**注意**：未知：无法连接到 gmail-imap.l.google.com，993：第 0 行未知中的连接超时（errflg=1）

**注意**：未知：无法连接到 gmail-imap.l.google.com，993：第 0 行未知中的网络无法访问（errflg=2）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:54:49.470

经过进一步研究，我的主人 (HostMonster)[不允许这样做](http://osticket.com/forums/showthread.php?t=4640)，所以我将不得不将我的业务转移到其他地方。：/

# mysql - python manage.py runserver _mysql_exceptions.OperationalError: (2002, "Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)")

> ID：11110743
> 
> 赞同：4
> 
> 时间：2012-06-19T23:09:14.873
> 
> 标签：mysql, django

我试图运行“python manage.py runserver”，我已经安装了 mysql、django 和适当的工具来一起使用它们：Mysql-django。尝试运行时出现此错误：

```
$ python manage.py runserver
Validating models...

Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x110251450>>
Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
    self.validate(display_num_errors=True)
  File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 103, in get_validation_errors
    connection.validation.validate_field(e, opts, f)
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/validation.py", line 14, in validate_field
    db_version = self.connection.get_server_version()
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 411, in get_server_version
    self.cursor()
  File "/Library/Python/2.7/site-packages/django/db/backends/__init__.py", line 306, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "/Library/Python/2.7/site-packages/django/db/backends/mysql/base.py", line 387, in _cursor
    self.connection = Database.connect(**kwargs)
  File "build/bdist.macosx-10.7-intel/egg/MySQLdb/__init__.py", line 81, in Connect
  File "build/bdist.macosx-10.7-intel/egg/MySQLdb/connections.py", line 187, in __init__
_mysql_exceptions.OperationalError: **(2002, "Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)")** 
```

这是我的 settings.py 文件的内容

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'django',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': 'localhost',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T11:32:31.660

我也有这个问题。您只需将数据库主机从 更改为 即可解决此`localhost`问题`127.0.0.1`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-05T19:22:24.843

要查找您的 mysql 套接字在哪里，为了配置它，请键入

```
mysql_config --socket 
```

得到结果并应用它：

```
'HOST': '/Applications/MAMP/tmp/mysql/mysql.sock', 
```

即使我使用的是 MAMP，但这应该适用于其他场景

# python - 使用 Python 将图表从 Excel 导出为图像

> ID：11110752
> 
> 赞同：4
> 
> 时间：2012-06-19T23:10:09.250
> 
> 标签：python, windows, excel, winapi, win32com

我一直在尝试将 Excel 中的图表导出为 Python 中的图像文件（JPG 或 ING）。我在看WIN32com。这是我到目前为止所拥有的。

```
import win32com.client as win32
excel = win32.gencache.EnsureDispatch("Excel.Application")
wb = excel.Workbooks.Open("<WORKSHEET NAME>")
r = wb.Sheets("<SHEET NAME>").Range("A1:J50") 
# Here A1:J50 is the area over which cart is
r.CopyPicture() 
```

这就是我卡住的地方。我现在需要将所选范围复制到文件中。对文档的任何帮助或指示都会对我有很大帮助。

我根据以下 VBA 脚本对上述代码进行了建模：

```
Sub Export_Range_Images()
    ' =========================================
    ' Code to save selected Excel Range as Image
    ' =========================================
    Dim oRange As Range
    Dim oCht As Chart
    Dim oImg As Picture

    Set oRange = Range("A1:B2")
    Set oCht = Charts.Add
    oRange.CopyPicture xlScreen, xlPicture
    oCht.Paste
    oCht.Export FileName:="C:\temp\SavedRange.jpg", Filtername:="JPG"
End Sub 
```

代码片段来自：http: [//vbadud.blogspot.com/2010/06/how-to-save-excel-range-as-image-using.html](http://vbadud.blogspot.com/2010/06/how-to-save-excel-range-as-image-using.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T20:04:48.563

我必须查看一些 VBA 示例才能使其正常工作。尽管我讨厌回答自己的问题，但我将把它留给可能需要它的人。

```
 import win32com.client as win32
    wb = excel.Workbooks.Open(excel_file)
    selection = "A1:J30" 
    xl_range = wb.Sheets(<sheet_name>).Range(selection)
    excel.ActiveWorkbook.Sheets.Add(                  After=excel.ActiveWorkbook.Sheets(3)).Name="image_sheet"
    cht = excel.ActiveSheet.ChartObjects().Add(0,0,
                                            xl_range.Width, xl_range.Height)
    xl_range.CopyPicture()
    # add the chart to new sheet
    cht.Chart.Paste()
    # Export the sheet with the chart to a new file
    cht.Chart.Export(<image_filename>)
    # Delete the sheet
    cht.Delete()
    excel.ActiveSheet.Delete()
    # Close the book
    excel.ActiveWorkbook.Close() 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-08-12T10:20:04.810

我知道这是一个老问题，但它帮助我走上了正确的轨道，所以我回来分享我完成的脚本，该脚本在工作表中找到所有图表并将它们导出为 .png。上面的脚本可以工作，但由于它只是复制工作表中的一个范围，因此您取决于该位置的图表。

```
 import win32com.client as win32
    from win32com.client import Dispatch
    import os

    xlApp = Dispatch('Excel.Application')

    workbook = xlApp.Workbooks.Open("Book1.xls")
    xlApp.Sheets("Sheet1").Select()

    xlSheet1 = xlApp.Sheets(1)

    #WARNING: The following line will cause the script to discard any unsaved changes in your workbook
    #Ensure to save any work before running script
    xlApp.DisplayAlerts = False

    i = 0
    for chart in xlSheet1.ChartObjects():
        print chart.Name

        chart.CopyPicture()
        #Create new temporary sheet
        xlApp.ActiveWorkbook.Sheets.Add(After=xlApp.ActiveWorkbook.Sheets(3)).Name="temp_sheet" + str(i)
        temp_sheet = xlApp.ActiveSheet

        #Add chart object to new sheet.
        cht = xlApp.ActiveSheet.ChartObjects().Add(0,0,800, 600)
        #Paste copied chart into new object
        cht.Chart.Paste()
        #Export image
        cht.Chart.Export("chart" + str(i) + ".png")

        #This line is not entirely neccessary since script currently exits without saving
        temp_sheet.Delete()
        i = i+1

    xlApp.ActiveWorkbook.Close()
    #Restore default behaviour
    xlApp.DisplayAlerts = True 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-22T07:08:05.573

对我来说，这很好用：

```
from win32com.client import Dispatch

app = Dispatch("Excel.Application")
workbook_file_name = 'Programmes.xlsx'
workbook = app.Workbooks.Open(Filename=workbook_file_name)

# WARNING: The following line will cause the script to discard any unsaved changes in your workbook
app.DisplayAlerts = False

i = 1
for sheet in workbook.Worksheets:
    for chartObject in sheet.ChartObjects():
        # print(sheet.Name + ':' + chartObject.Name)
        chartObject.Chart.Export("chart" + str(i) + ".png")
        i += 1

workbook.Close(SaveChanges=False, Filename=workbook_file_name) 
```

或这个：

```
from win32com.client import Dispatch

app = Dispatch("Excel.Application")
workbook_file_name = 'Programmes.xlsx'
workbook = app.Workbooks.Open(Filename=workbook_file_name)
app.DisplayAlerts = False
try:
    workbook.SaveAs(Filename="ExcelCharts.htm", FileFormat=44)  # 44 = html file format
except Exception as ex:
    print(ex)
finally:
    workbook.Close(SaveChanges=False, Filename=workbook_file_name) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-31T13:09:52.130

现在我会推荐 excel2img 库，对我很有帮助。确保已安装（pip install excel2img）

```
import excel2img

excel2img.export_img("test.xlsx", "test.gif", "Sheet1", "MyNamedRange") 
```

如果您不需要网格线 - 只需将其隐藏在 Excel 中。

git rep：[excel2img](https://github.com/glexey/excel2img)以了解更多信息。

# mysql - SQL：数据操作和索引

> ID：11110758
> 
> 赞同：0
> 
> 时间：2012-06-19T23:10:39.133
> 
> 标签：mysql, database-design, indexing

最近我一直在尝试优化我的表，主要是因为我通过学校的一些课程学到了更多关于数据库设计的知识。我也选择这样做，因为我在某些查询上遇到了很多超时，最近发现这确实是我的数据库设计错误。

所以基本上，我将在这张表上执行 SELECT、UPDATE、INSERT 和 DELETE。

这是我当前的数据库架构：

```
-- ----------------------------
-- Table structure for `characters_items`
-- ----------------------------
DROP TABLE IF EXISTS `characters_items`;
CREATE TABLE `characters_items` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `master_id` int(10) unsigned NOT NULL DEFAULT '0',
  `item_id` smallint(6) NOT NULL,
  `amount` int(11) NOT NULL,
  `slot_id` smallint(9) NOT NULL DEFAULT '0',
  `type` tinyint(4) NOT NULL DEFAULT '0',
  `extra_data` text,
  PRIMARY KEY (`id`),
  KEY `master_id` (`master_id`),
  CONSTRAINT `characters_items_ibfk_1` FOREIGN KEY (`master_id`) REFERENCES `characters` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=904 DEFAULT CHARSET=latin1; 
```

在我的程序中，我将处理大量数据（一次最多 500 行，如您所见，这是一个包含所有字符项的表）。

我还了解到，如果您正在进行数据操作，索引值会减慢您的查询速度。

以下是我将使用的一些查询：

```
 StringBuilder query = new StringBuilder();

            client.ClearParameters();
            client.AddParameter("master_id", this.owner.MasterId);
            client.AddParameter("type", (byte)CharacterItemType.Bank);
            client.AddParameter("capacity", this.Capacity);

            // Grab the original items.
            DataRow[] data = client.ReadDataTable("SELECT item_id,amount,slot_id FROM characters_items WHERE master_id=@master_id AND type=@type LIMIT @capacity").Select();
            Item[] originalItems = new Item[this.Capacity];
            if (data != null && data.Length > 0)
            {
                for (short i = 0; i < data.Length; i++)
                {
                    DataRow row = data[i];

                    short id = (short)row[0];
                    int count = (int)row[1];
                    short slotId = (short)row[2];

                    originalItems[slotId] = new Item(id, count);
                }
            }

            // Now we compare the items to see if anything has been changed.
            Item[] items = this.ToArray();
            for (short i = 0; i < items.Length; i++)
            {
                Item item = items[i];
                Item original = originalItems[i];

                // item was added.
                if (item != null && original == null)
                {
                    query.Append("INSERT INTO characters_items (master_id,item_id,amount,slot_id,type,extra_data) ");
                    query.Append("VALUES (");
                    query.Append(this.owner.MasterId);
                    query.Append(",");
                    query.Append(item.Id);
                    query.Append(",");
                    query.Append(item.Count);
                    query.Append(",");
                    query.Append(i);
                    query.Append(",");
                    query.Append((byte)CharacterItemType.Bank);

                    string extraData = item.SerializeExtraData();
                    if (extraData != null)
                    {
                        query.Append(",'");
                        query.Append(extraData);
                        query.Append("'");
                    }
                    else
                    {
                        query.Append(",null");
                    }

                    query.Append(");");
                }
                // item was deleted.
                else if (item == null && original != null)
                {
                    query.Append("DELETE FROM characters_items WHERE slot_id=");
                    query.Append(i);
                    query.Append(" AND master_id=");
                    query.Append(this.owner.MasterId);
                    query.Append(" AND type=");
                    query.Append((byte)CharacterItemType.Inventory);
                    query.Append(" LIMIT 1;");
                }
                // item was modified.
                else if (item != null && original != null)
                {
                    if (item.Id != original.Id || item.Count != original.Count)
                    {
                        query.Append("UPDATE characters_items SET item_id=");
                        query.Append(item.Id);
                        query.Append(",amount=");
                        query.Append(item.Count);

                        string extraData = item.SerializeExtraData();
                        if (extraData != null)
                        {
                            query.Append(",extra_data='");
                            query.Append(extraData);
                            query.Append("'");
                        }
                        else
                        {
                            query.Append(",extra_data=null");
                        }

                        query.Append(" WHERE master_id=@master_id AND type=@type AND slot_id=");
                        query.Append(i);
                        query.Append(";");
                    }
                }
            }

            // If a query was actually built, we will execute it.
            if (query.Length > 0)
            {
                client.SetConnectionTimeout(60);
                client.ExecuteUpdate(query.ToString());
                return true;
            }
        }
        catch (Exception ex)
        {
            Program.Logger.PrintException(ex);
        }
        return false; 
```

如您所见，我几乎总是引用 slot_id、type 和 master_id 字段。我想知道如果我将 slot_id 和 type 字段设置为索引字段，它将如何影响我的整体数据操作性能？会受到正面的影响，还是负面的影响？

请给我一些建议（C#代码除外，我稍后会修复它！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T01:32:05.890

首先，当您可以使用绑定参数时，**切勿动态构造 SQL 文本。**绑定参数可以保护您免受[SQL 注入](http://en.wikipedia.org/wiki/Sql_injection)，并且可以通过允许 DBMS[准备](http://en.wikipedia.org/wiki/Prepared_statement)一次 SQL 语句并多次重用它来提高性能。

至于索引……它们通常是查找和修改数据之间的权衡——它们加快了前者的速度，^而减慢了后者的速度。**但是**，如果以一种也包含搜索²的方式修改数据，则索引实际上最终也可以加快修改速度。

索引应始终根据您的应用程序正在执行的实际查询量身定制，在您的情况下包括以下内容：

*   `SELECT ... WHERE master_id=... AND type=...`
*   `INSERT ...`
*   `DELETE ... WHERE slot_id=... AND master_id=... AND type=...`
*   `UPDATE ... WHERE master_id=... AND type=... AND slot_id=...`

所有 3 个 WHERE 子句都可以由`{master_id, type, slot_id}`. 只有 INSERT 语句（其本质上没有 WHERE）会受到这个附加索引的影响。

注意事项：

*   如果复合索引的某些字段的选择性较低，您可能会考虑将它们从索引中删除，以使其更小且对缓存更友好。例如，如果`master_id`预计共享相同的行数会很低，则*仅*在其上建立索引`master_id`不会显着影响搜索性能，但会使索引更小，更容易/更快地维护。
*   另一方面，您也可以考虑在索引中包含 WHERE 子句不直接使用但在查询中其他地方列出的字段。例如，为了[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)，`SELECT item_id, amount, slot_id`我们可以将`item_id`and添加`amount`到索引的“后沿”（`slot_id`已经在索引中）。
*   MySQL/InnoDB*总是*对表进行集群，因此二级索引的价格相对较高（参见本文“集群的缺点” [）](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)。

正如你所看到的，所有这些都是一个非常复杂的平衡行为，即使专家也不能总是预测最佳平衡。因此，如果有疑问，请在决定之前进行**测量**！

对于索引主题和一般数据库性能的出色介绍，我强烈推荐：[使用索引。卢克！](http://use-the-index-luke.com/)

* * *

¹假设它们被正确使用。

²通常：`DELETE ... WHERE ...`和`UPDATE ... WHERE ...`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:19:31.713

为了给定 UPDATE 和 DELETE 语句的最佳性能，我建议：

```
ALTER TABLE characters_items
ADD KEY characters_items_IX1 (master_id, item_id, slot_id); 
```

为了 SELECT 语句以及 DML 语句的最佳性能，可以修改索引以包含两个附加列：

```
ALTER TABLE characters_items
ADD KEY characters_items_IX1 (master_id, item_id, slot_id, type, amount); 
```

（注意：您只需添加其中一个索引，不需要两者。）

* * *

我们观察到您的 UPDATE 和 DELETE 语句在所有三列上都指定了等于谓词。在这种情况下，您可能希望索引中的列从最高基数到最低基数排序。（也就是说，具有最多不同值的列，首先是最高选择性，然后是其他列。）

对于表中的大量行，这样的索引很可能会提高您的 UPDATE 和 DELETE 操作的性能。

（您不可能看到任何性能差异，因为您的表上的 auto_increment 值只有 904，这意味着您的表中可能只有不到一千行。）

如果 master_id 已经“几乎唯一”，那么该列上的现有索引就足够了。

如果添加我推荐的索引，则现有索引是多余的，可以删除。（任何使用现有索引的查询都可能使用新索引，以 master_id 作为前导列。）

是的，索引设计需要权衡取舍。执行 DML 操作时，还需要执行额外的工作来维护索引。

如果它们不是选择性的，或者如果您没有任何可以使用它们的查询，您不会只想在 slot_id 或 item_id 上添加索引。没有使用的索引是没有意义的。

至于其他索引，这实际上取决于您正在执行的其他语句，特别是 SELECT 语句。我们真的很想看看谓词（WHERE 子句和 JOIN 条件），看看额外的索引是否有帮助。

* * *

附录：

问：单独添加密钥和成组添加密钥有什么区别？（就像你给出的例子）

在这种情况下，三个单独的索引（在 master_id、item_id 和 slot_id 上）将没有用，因为执行计划很可能只使用其中一个，理想情况下，具有最高选择性的索引。“组合索引”的执行计划可能比全表扫描更快，但它们很少能胜过已经包含所有列的单个索引。

最大的区别是索引中的“前导”列。如果您在索引的前导列上没有谓词（WHERE 子句）或 ORDER BY，则不太可能使用该索引。

* * *

SELECT 语句的最佳索引是“覆盖”索引，即包含查询中引用的所有列的索引，这样可以从索引中满足查询，而无需引用数据中的页面桌子。

```
ADD KEY characters_items_IX1 (master_id, item_id, slot_id, type, amount); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:17:34.240

如果索引对 select 语句的 where 子句具有高选择性，则它们将加速您的选择。

检查您最常运行哪些选择语句，然后对您在 where 子句中使用的字段编制索引。如果您使用通配符（尤其是像 '%something%' 这样的东西），索引将不太有用。

我不记得 MySQL 是否可以为索引包含列，但如果是这样，您可能会从将 select 语句中但不在 where 子句中的列添加为索引中的包含列中获得额外的好处。

否则，将执行的实际操作是索引查找，然后是键查找。索引始终将关联数据行的主键作为包含列，因此一旦找到索引键，就会通过其主键查找该行。如果可以避免键查找，则可以显着降低查询的 IO 成本。当然，这会略微增加插入和更新的成本，并且会大大增加数据库占用的空间。

# .net - 在 Oracle Merge 语句的 Using 子句中指定参数

> ID：11110772
> 
> 赞同：4
> 
> 时间：2012-06-19T23:11:55.253
> 
> 标签：.net, oracle, c#-4.0, plsql, odp.net

Oracle 的 PL/SQL 对我来说相当新，所以我需要一些帮助来了解我尝试在 Merge 的 Using 子句中使用参数的方式是否可行。

我正在使用 ODP.NET 使用 Oracle 11g 与现有的 C# .NET 4.0 代码库进行通信，该代码库使用 SQL 连接来检索/修改数据。现有的 SQL 语句如下所示：

```
MERGE INTO Worker Target
USING
(
  SELECT
        :Id0            Id
       ,:Options0       Options
  FROM dual
  UNION ALL
  SELECT
        :Id1            Id
       ,:Options1       Options
  FROM dual
) Source
ON (Target.Id = Source.Id)
WHEN MATCHED THEN
  UPDATE SET
        Target.StateId = :StateId
       ,Target.Options = Source.Options 
```

Using 子句在 C# StringBuilder 中生成，以适应不同数量的工作人员 Id/Option 对，同时创建匹配的参数。

```
StringBuilder usingClause = new StringBuilder();
List<OracleParameter> parameters = new List<OracleParameter>();
for (int i = 0; i < workers.Count; ++i)
{
  if (i > 0)
    usingClause.Append("UNION ALL\n");
  usingClause.AppendFormat("SELECT\n   :Id{0}  Id\n  ,:Options{0}  Options\n FROM dual\n", i);

  parameters.Add(new OracleParameter("Id" + i, workers[i].Id));
  parameters.Add(new OracleParameter("Options" + i, workers[i].Options))
}
parameters.Add(new OracleParameter("StateId", pendingStateId)); 
```

usingClause StringBuilder 与 Merge 命令的其余部分组合成一个名为“sql”的字符串，然后在 OracleCommand 对象中使用该字符串。执行 SQL Merge 语句的 C# 如下所示：

```
OracleConnection cn = new OracleConnection(
  ConfigurationManager.ConnectionStrings["OracleSystemConnection"].ConnectionString
);

using (OracleCommand cmd = new OracleCommand(sql, cn))
{
  cmd.BindByName = true;
  cn.Open();
  foreach (OracleParameter prm in parameters)
    cmd.Parameters.Add(prm);

  cmd.ExecuteNonQuery();
  cn.Close();
} 
```

我已经尝试过按名称绑定参数和不按名称绑定参数，并确保在没有按名称绑定参数的情况下顺序正确。我不断得到的是“ORA-01008：并非所有变量都绑定”错误。

我还尝试在 SQL Developer 中运行 Merge 命令，并得到“未声明绑定变量 'Id0'”的响应。通常，当我在 SQL Developer 中使用未声明的绑定变量运行命令时，它会打开一个对话框来输入值，但不是使用此 SQL 命令，因此在 SQL Developer 中未声明它是可以理解的，但我不明白为什么会这样ODP.NET/C# 实现的情况，因为我将参数添加到 OracleCommand 对象。

如果有人能指出我做错了什么，或者告诉我如何达到同样的效果，将不胜感激。此外，如果有人知道将值列表传递到 Merge 的 Using 子句中的更好方法，而不是在它们之间执行一堆 SELECTs FROM dual 和 UNION ALL，那么也将不胜感激。

## 使用 Long Raw 作为选项列的答案

经过一番努力，这是最终的解决方案。感谢 tomi44g 为我指明了正确的方向。

```
DECLARE
  TYPE id_array IS TABLE OF NUMBER INDEX BY PLS_INTEGER;
  TYPE option_array IS TABLE OF LONG RAW INDEX BY PLS_INTEGER;

  t_ids    id_array := :ids;
  t_options    option_array := :options;
BEGIN
  FORALL i IN 1..t.ids.count
    EXECUTE IMMEDIATE '
      MERGE INTO Worker Target
      USING (SELECT :1 Id, :2 Options FROM dual) Source
      ON (Source.Id = Target.Id)
      WHEN MATCHED THEN
      UPDATE SET
         Target.StateId = :3
        ,Target.Options = Source.Options' USING t_ids(i), t_options(i), :state_id;
END; 
```

这就是 C# 更改的内容，以适应解决方案。

```
// Gather the values into arrays for binding.
int[] workerIds = new int[workers.Count];
byte[][] workerOptions = new byte[workers.Count][];
BinaryFormatter binaryFormatter = new BinaryFormatter();
for (int i = 0; i < workers.Count; ++i)
{
    workerIds[i] = workers[i].Id;

    // There's an assumed limit of 4096 bytes here; this is just for testing
    MemoryStream memoryStream = new MemoryStream(4096);
    binaryFormatter.Serialize(memoryStream, workers[i].Options);
    workerOptions[i] = memoryStream.ToArray();
}

// Excute the command.
OracleConnection cn = new OracleConnection(
    ConfigurationManager.ConnectionStrings["OracleSystemConnection"].ConnectionString
);
using (OracleCommand cmd = new OracleCommand(sql, cn))
{
    cmd.BindByName = true;
    cn.Open();

    OracleParameter ids = new OracleParameter();
    ids.OracleDbType = OracleDbType.Int32;
    ids.CollectionType = OracleCollectionType.PLSQLAssociativeArray;
    ids.Value = workerIds;
    ids.ParameterName = "ids";

    OracleParameter options = new OracleParameter();
    options.OracleDbType = OracleDbType.LongRaw;
    options.CollectionType = OracleCollectionType.PLSQLAssociativeArray;
    options.Value = workerOptions;
    options.ParameterName = "options";

    cmd.Parameters.Add(ids);
    cmd.Parameters.Add(options);
    cmd.Parameters.Add(new OracleParameter("state_id", pendingStateId));

    try
    {
        cmd.ExecuteNonQuery();
    }
    catch (OracleException e)
    {
        foreach (OracleError err in e.Errors)
        {
            Console.WriteLine("Message:\n{0}\nSource:\n{1}\n", err.Message, err.Source);
            System.Diagnostics.Debug.WriteLine("Message:\n{0}\nSource:\n{1}\n", err.Message, err.Source);
        }
    }
    cn.Close();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T15:20:19.480

您最好将 id 和选项列表绑定到数组，然后在 PL/SQL 块中使用 FORALL 执行 MERGE：

```
DECLARE
  TYPE id_array_type IS TABLE OF NUMBER INDEX BY PLS_INTEGER;
  TYPE options_array_type IS TABLE OF VARCHAR2 (100) INDEX BY PLS_INTEGER;

  t_ids        id_array_type := :ids;
  t_options    options_array_type  := :options;
  v_state_id   NUMBER := :stateId;
BEGIN
  FORALL i IN 1 .. t_ids.count
    EXECUTE IMMEDIATE '
      MERGE INTO worker target
      USING (SELECT :id id, :options options FROM dual) source
      ON (source.id = target.id)
      WHEN MATCHED THEN UPDATE SET target.stateId = :state_id, target.options = source.options'
      USING t_ids (i), t_options (i), v_state_id;
END; 
```

然后您可以将参数绑定为[PL/SQL 关联数组](http://docs.oracle.com/html/B14164_01/featOraCommand.htm#BABBDHBB) 这样做，您将在 SGA 中始终拥有一条 SQL 语句，而不是针对所有可能数量的参数的许多语句，并且（这可能更重要）您将能够合并 1000 多个元素一气呵成。

实际上，我注意到您没有使用 WHEN NOT MATCHED 子句。如果您真的对插入新记录不感兴趣，那么根本不需要使用 MERGE，只需使用 UPDATE 即可。[您可以使用Array Binding](http://docs.oracle.com/html/B14164_01/featOraCommand.htm#i1007888)在一次往返中有效地多次执行 UPDATE 语句。

# android - Phonegap、JQM 和 Android 性能缓慢

> ID：11110773
> 
> 赞同：4
> 
> 时间：2012-06-19T23:12:00.733
> 
> 标签：android, jquery-mobile, cordova

您对 Android 上带有 jquery mobile 的 Phonegap (cordova) 有什么感受和印象？我正在该环境中开发 Phonegap 应用程序，但是我看到页面转换中的显示闪烁并且总体上性能缓慢。你认为我能做些什么来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:15:37.700

我有时会注意到这一点，但通常是由于我做错了事情（即没有优化我的代码）。如果您没有任何具体的代码，我会推荐以下提示。

1.  保持你的“屏幕”简单。您使用的是移动设备，因此请尽量减少单个屏幕上的元素数量。

2.  您是否尝试过在手机浏览器中运行您的“站点/应用程序”？我知道这很简单，但它本质上就是 PhoneGap 的工作方式。看看你是否遇到同样的问题。

3.  你在屏幕的启动上做了哪些操作？同样，将元素和效果保持在最低限度将有助于加快速度。

我希望我能提供更多帮助，不要因此而生气，因为它不是针对您的，但是 PhoneGap 和使用 Web Techs 并不是编码和优化不佳的借口。我已经构建并使用了本机编码的应用程序，但它们仍然存在性能问题。

所以，是的，为了具体回答你的问题，我经历过，但这不是PhoneGap的事情（无论如何，恕我直言）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T12:39:06.847

你也可以尝试使用这个优化工具，看看它是否能帮助你追踪减速发生的地方，并帮助你理解为什么[http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312](http://developer.att.com/developer/legalAgreementPage.jsp?passedItemId=9700312) 一旦你得到结果，您可能可以发布更多信息，并且这里的人们可能能够提供更多帮助。

# php - 错误阻止我构建值数组

> ID：11110774
> 
> 赞同：-1
> 
> 时间：2012-06-19T23:12:26.223
> 
> 标签：php, mysqli

我收到一个解析错误，它是：

解析错误：语法错误，意外的 T_VARIABLE in ... 第 91 行，即这一行：

```
$stmt->execute($parameters); 
```

但是我想知道是什么导致了下面代码中的这个错误，我需要改变什么？

```
$parameters = array();

    $stmt=$mysqli->prepare($questionquery);      
    $parameters[] = ($each)   
    $stmt->execute($parameters);   
    $stmt->bind_result($dbQuestionId,$dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks); 
    $questionnum = $stmt->num_rows(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:17:27.503

你错过了一个 ; 在此之前的行中。

```
 $parameters[] = ($each) 
```

应该

```
$parameters[] = ($each); 
```

# sql - 如何按日期时间生成表名？

> ID：11110775
> 
> 赞同：1
> 
> 时间：2012-06-19T23:12:33.337
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我意识到这在语法上很糟糕，但我认为它在某种程度上解释了我正在尝试做的事情。本质上，我有一个批处理作业，每天早上在一张小桌子上运行，作为规范的一部分，我需要在每次加载之前创建一个备份，以便报告可以访问。

到目前为止，我所拥有的是：

```
select  *
into    report_temp.MSK_Traffic_Backup_ + getdate()
from    property.door_traffic 
```

我怎样才能使这个功能或我应该考虑这样做更好的方式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T00:27:12.877

```
DECLARE @d CHAR(10) = CONVERT(CHAR(8), GETDATE(), 112);

DECLARE @sql NVARCHAR(MAX) = N'select  *
into    report_temp.MSK_Traffic_Backup_' + @d + '
from    property.door_traffic;';

PRINT @sql;
--EXEC sys.sp_executesql @sql; 
```

现在，您可能还想添加一些逻辑，以使脚本在一天内运行多次时不会出错，例如

```
DECLARE @d CHAR(10) = CONVERT(CHAR(8), GETDATE(), 112);

IF OBJECT_ID('report_temp.MSK_Traffic_Backup_' + @d) IS NULL
BEGIN
  DECLARE @sql NVARCHAR(MAX) = N'select  *
  into    report_temp.MSK_Traffic_Backup_' + @d + '
  from    property.door_traffic;';

  PRINT @sql;
  --EXEC sys.sp_executesql @sql;
END 
```

当您对逻辑感到满意并想要执行命令时，只需在`PRINT`和之间交换注释即可`EXEC`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T15:50:02.260

我不确定你是否正在寻找这个。

```
DECLARE @date datetime, @CMD varchar(1000);
SET @date = CONVERT(VARCHAR(10), GETDATE(), 105)
SET @cmd = 'SELECT * INTO [dbo.T_TABLE_Backup_' + replace(cast(@date as varchar(11)),' ','_')+'] FROM dbo.T_TABLE'
print @cmd; 
```

# java - Android CountDownTimer 并在画布上绘图

> ID：11110777
> 
> 赞同：0
> 
> 时间：2012-06-19T23:12:35.707
> 
> 标签：java, android, android-canvas, countdown, countdowntimer

我正在创建圣诞节倒计时，我需要每秒倒计时，并且需要在画布上画出距离圣诞节还有多少天、多少小时、多少分钟和多少秒。

我可以获得工作输出，但我觉得有比我现在做的更好的方法来实现这一点。

这是代码，我删除了一些不必要的代码，如导入、未实现的方法等。

```
 public class SnowFall extends Activity {

SampleView textDraw;
Paint paint;
Rect bounds;
int durationMilli;
Duration duration;

static String days;
static String hours;
static String minutes;
static String seconds;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Duration duration = new Duration();
    int futureTime = duration.cal_duration();
    MyTime tm = new MyTime(futureTime, 1000);
    tm.start();

    textDraw = new SampleView(this);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    LinearLayout linearLayout = new LinearLayout(this);
    linearLayout.setOrientation(LinearLayout.VERTICAL);
    linearLayout.setBackgroundColor(Color.TRANSPARENT);
    textDraw.setBackgroundDrawable(getResources().getDrawable(
            R.drawable.background_image_1));
    linearLayout.addView(textDraw);
    setContentView(linearLayout);

}

public class MyTime extends CountDownTimer {

    public MyTime(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);

    }

    @Override
    public void onTick(long millisUntilFinished) {

        SampleView view = new SampleView(getApplicationContext());
        int durationInMilliSec = (int) millisUntilFinished;
        Log.d("Joda Time", String.valueOf(durationInMilliSec));

        try {
            int x = durationInMilliSec / 1000;
            seconds = String.valueOf(x % 60);
            x /= 60;
            minutes = String.valueOf(x % 60);
            x /= 60;
            hours = String.valueOf(x % 24);
            x /= 24;
            days = String.valueOf(x);

            view.invalidate();
        } catch (Exception e) {

        }

    }

}

private static class SampleView extends View {
    private Paint mPaint;
    private float mX;
    private float[] mPos;

    private Path mPath;
    private Paint mPathPaint;

    private static final int DY = 45;
    private static final String POSTEXT = "Positioned";

    private static void makePath(Path p) {
        p.moveTo(10, 0);
        p.cubicTo(100, -50, 200, 50, 300, 0);
    }

    private float[] buildTextPositions(String text, float y, Paint paint) {
        float[] widths = new float[text.length()];
        // initially get the widths for each char
        int n = paint.getTextWidths(text, widths);
        // now popuplate the array, interleaving spaces for the Y values
        float[] pos = new float[n * 2];
        float accumulatedX = 0;
        for (int i = 0; i < n; i++) {
            pos[i * 2 + 0] = accumulatedX;
            pos[i * 2 + 1] = y;
            accumulatedX += widths[i];
        }
        return pos;
    }

    public SampleView(Context context) {
        super(context);
        setFocusable(true);

        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setTextSize(40);
        Typeface typeface = Typeface.createFromAsset(context.getAssets(),
                "font.ttf");
        mPaint.setTypeface(typeface);

        mPos = buildTextPositions(POSTEXT, 0, mPaint);

        mPath = new Path();
        makePath(mPath);

        mPathPaint = new Paint();
        mPathPaint.setAntiAlias(true);
        mPathPaint.setColor(0x800000FF);
        mPathPaint.setStyle(Paint.Style.STROKE);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        Paint p = mPaint;
        float x = mX;
        float y = 0;

        if (days != null && hours != null && minutes != null
                && seconds != null) {
            canvas.translate(0, DY);
            p.setTextAlign(Paint.Align.CENTER);
            canvas.drawText("There is", x, y, p);

            canvas.translate(0, DY);
            p.setTextAlign(Paint.Align.CENTER);
            canvas.drawText(days + " Days, " + hours + " Hours", x, y, p);

            canvas.translate(0, DY);
            p.setTextAlign(Paint.Align.CENTER);
            canvas.drawText(minutes + " Minutes and " + seconds
                    + " seconds", x, y, p);

            canvas.translate(0, DY);
            p.setTextAlign(Paint.Align.CENTER);
            canvas.drawText("until christmas.", x, y, p);

            invalidate();

        } else {

            // draw the normal strings
            canvas.translate(0, DY);
            p.setTextAlign(Paint.Align.CENTER);
            canvas.drawText("Something Wrong", x, y, p);

            canvas.translate(0, DY);
            p.setTextAlign(Paint.Align.CENTER);
            canvas.drawText("Check your device time.", x, y, p);

        }
    }

    @Override
    protected void onSizeChanged(int w, int h, int ow, int oh) {
        super.onSizeChanged(w, h, ow, oh);
        mX = w * 0.5f; // remember the center of the screen
    }

}

} 
```

计算多少天有一个小问题，因为它表明圣诞节只有10天。我对android上的图形一无所知，为此努力。

```
package in.isuru.animation;

import org.joda.time.DateTime;
import org.joda.time.Seconds;

public class Duration {

public int cal_duration(){
    DateTime start = new DateTime(DateTime.now());
    DateTime end = new DateTime(2012, 12, 25, 0, 0, 0 ,0);
    int differenceSeconds = Seconds.secondsBetween(end, start).getSeconds();

    return differenceSeconds * 1000;
}

} 
```

问题在于它计算天、小时、分钟和秒的每个 Tick。请给我反馈这是好还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T08:28:42.790

只需使用这个简单的代码

```
countDownTimer = new CountDownTimer(240000, 1000) {

    public void onTick(long millisUntilFinished) {
        int seconds = (int) ((millisUntilFinished/1000)%60);
        int minutes = (int) ((millisUntilFinished/1000)/60);
        int hours = (int) ((millisUntilFinished/1000)/3600);
        String startTime ="Time " + String.format("%02d:%02d:%02d",hours,minutes,seconds);
        txtShowTimer.setText(startTime);
    }

    public void onFinish() {
        txtShowTimer.setText("done!");
    }   
}.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:23:14.667

您的数字将是错误的，因为您`int`以毫秒为单位溢出数据类型。an 的最大值`int`为 2^31 ~ 2 x 10^9。距离圣诞节还有大约 155 x 10^9 毫秒。

只需计算秒数就可以了。或者您可以使用 64 位`long`而不是`int`. 但是你乘以 1000 得到毫秒，然后立即除以 1000！这没有多大意义。

最好还是按照乔达时间来！

既然已经在用了，何不建个句号呢？

```
DateTime start = DateTime.now();  // Note your code makes an unneeded copy here
DateTime end = new DateTime(2012, 12, 25, 0, 0, 0);
Period p = new Period(start, end); 
```

该期间的吸气剂为年、月、日、小时、分钟、秒。这将完全避免容易出错的计算。

# c# - ListBox.SelectedItem

> ID：11110778
> 
> 赞同：3
> 
> 时间：2012-06-19T23:12:37.627
> 
> 标签：c#, xaml

我有一个`ListBox`填充`TextBox`es 的项目。当从`ListBox`. 这是我的 XAML 代码`ListBox`：

```
<StackPanel x:Name="InputPanel" Orientation="Horizontal" HorizontalAlignment="Left">
    <StackPanel>
        <TextBlock Text="Input" Style="{StaticResource H2Style}"/>
        <TextBlock Text="Select Scenario:" Style="{StaticResource H3Style}"/>
        <ListBox x:Name="ScenarioList" Margin="0,0,20,0" HorizontalAlignment="Left" SelectionChanged="ScenarioList_SelectionChanged">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Name}"/>
                </DataTemplate>
            </ListBox.ItemTemplate>
            <ListBoxItem x:Name="Scenario1">
                <TextBlock Style="{StaticResource ListBoxTextStyle}" Text="1) Pick a single photo" />
            </ListBoxItem>
            <ListBoxItem x:Name="Scenario2">
                <TextBlock Style="{StaticResource ListBoxTextStyle}" Text="2) Pick multiple files" />
            </ListBoxItem>
            <ListBoxItem x:Name="Scenario3">
                <TextBlock Style="{StaticResource ListBoxTextStyle}" Text="3) Pick a folder" />
            </ListBoxItem>
            <ListBoxItem x:Name="Scenario4">
                <TextBlock Style="{StaticResource ListBoxTextStyle}" Text="4) Save a file" />
            </ListBoxItem>
        </ListBox>
    </StackPanel> 
```

`selection_changed`我在我的方法中尝试了各种各样的东西。这是最新的：

```
object selectedItem = ScenarioList.SelectedItem;
ListBoxItem selected = this.ScenarioList.ItemContainerGenerator.ContainerFromItem(this.ScenarioList.SelectedItem) as ListBoxItem;
string tempStr = selected.Content.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:20:46.393

```
ListBoxItem listBox_Item = listBox.SelectedItem as ListBoxItem;
MessageBox.Show("You have selected " + listBox_Item.Content.ToString()); 
```

或者您可以在选择更改事件中尝试这个

```
 private void ScenarioList_SelectionChanged(object sender, SelectionChangedEventArgs e) 
  {
        if (((ListBox)sender).SelectedItem != null)
        MessageBox.Show("You have selected " + (ListBox)sender).SelectedItem);
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:31:15.823

你*可以*这样做：

```
var selectedText = ((TextBlock)((ListBoxItem)ScenarioList.SelectedItem).Content).Text 
```

您还可以从 SelectionChangedEventArgs 中获得它，例如：

```
public void ScenarioList_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var item = e.AddedItems[0] as ListBoxItem;
    var selectedText = ((TextBlock)item.Content).Text;
} 
```

# matlab - 将 xy 坐标写入 .shp 文件 Matlab

> ID：11110783
> 
> 赞同：0
> 
> 时间：2012-06-19T23:13:13.197
> 
> 标签：matlab, file-io, arcgis

我在 Matlab 中使用将 xy 坐标和关联的 z 值写入 .txt 文件的代码。但是，我一直在将这些 .txt 文件转换为 .shp 点文件并在 ArcMap 10 中匹配 .shp 多边形文件。如何更新附加的代码段以输出 .shp 文件而不是 .txt 文件，以便我可以跳过处理步？提前致谢。

```
[flout] = strread(fileName, '%s', 'delimiter','.')
outfilename = [outputdir 'Coords_' char(flout(1)) '.txt'];
fid2 = fopen(outfilename, 'wt');
fprintf(fid2, 'x,y,z,\n');     % Adds x,y,z, as a header
fclose(fid2);
dlmwrite(outfilename,Listpos4,'-append','delimiter',',', 'precision', '%.5f'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T05:28:06.967

您实际上需要创建三个文件，而不仅仅是 .shp。还有索引 (.shx) 和属性 (.dbf) 文件。这些格式并不难（[维基百科](http://en.wikipedia.org/wiki/Shapefile)有 .shp/.shx 的基本格式），但它们都是二进制格式。

使用 ArcPy 编写 python 脚本来导入 .txt 文件并将其导出为 .shp 可能比尝试编写自己的 shapefile 更容易。

# objective-c - 在 Objective-C 中搜索 Blogger

> ID：11110786
> 
> 赞同：0
> 
> 时间：2012-06-19T23:14:03.830
> 
> 标签：objective-c, gdata, blogger

我想实现一个控制器来搜索基于 Blogger 的博客上的帖子。

我一直在将 GData API 用于其他项目（通常用于 Youtube 搜索），但 GData API（尤其是 Objective-C 的 API）严重缺乏解释如何执行此操作的详细信息。（请注意，我只希望从单个博客返回结果！）

任何意见，将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T05:32:19.470

Blogger 支持现在位于[Objective-C 的 Google API 客户端库中](http://code.google.com/p/google-api-objectivec-client/)。这取代了旧的 GData API。

GTLQueryBlogger类包含方法 blogger.posts.search (+queryForPostsSearchWithBlogId [:)](http://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Source/Services/Blogger/Generated/GTLQueryBlogger.h)

# cmake - 以下 cmake 片段是做什么的？

> ID：11110791
> 
> 赞同：1
> 
> 时间：2012-06-19T23:14:34.220
> 
> 标签：cmake

```
set(TestProject_additional_libs
        optimized  foobar.lib   
        debug   foobard.lib    
} 
```

特别是这里的优化/调试是什么意思？这是使用 cmake 添加库的标准方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:26:07.100

对我来说，这似乎是一种“滥用”。这些都只是分配给一个变量`TestProject_additional_libs`。[当它在诸如target_link_libraries](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3atarget_link_libraries)之类的东西中扩展时，魔法可能会在稍后发生。我不知道有人可以做这样的事情。但实际上，当它以这种方式编写时，实际上并不清楚到底发生了什么。

从上述链接中引用手册：

> “debug”、“optimized”或“general”关键字表示紧随其后的库仅用于相应的构建配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:27:30.327

这会将变量的值设置`TestProject_additional_libs`为一个以分号分隔的列表，其中包含`optimized;foobar.lib;debug;foobard.lib`.

通常，`${TestProject_additional_libs}`然后将在[`target_link_libraries`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command%3atarget_link_libraries)命令中使用以指示`foobar.lib`应该用于优化构建（如发布）并`foobard.lib`应该在调试构建中使用：

```
target_link_libraries(<target> <files> ${TestProject_additional_libs}) 
```

为避免创建临时变量，您还可以在`target_link_libraries`调用本身中使用类似的语法：

```
target_link_libraries(<target> <files> optimized foobar.lib debug foobard.lib) 
```

# xcode - 如何在 XCode 中设置 NSMutableURLRequest 的超时值？

> ID：11110792
> 
> 赞同：0
> 
> 时间：2012-06-19T23:14:36.090
> 
> 标签：xcode

我在代码中设置 NSMutableURLRequest 的超时值，如下所示：

```
request.timeoutInterval = 30.0; 
```

我希望能够在调试时在运行时更改此值，因此在控制台中尝试了此操作（适用于 lldb）：

```
expr request.timeoutInterval = 0.1 
```

但这给出了：

```
error: property 'timeoutInterval' not found on object of type 'NSMutableURLRequest *'
error: 1 errors parsing expression 
```

所以我尝试了这个：

expr [请求 setTimeoutInterval: 30.0]

但这产生了：

错误：没有已知方法'-setTimeoutInterval：'；将消息发送到方法的返回类型 error: 1 errors parsing expression

有人知道如何改变它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:23:47.540

试试这个：

```
expr (NSMutableURLRequest)[request setTimeoutInterval:0.1] 
```

应该工作得更好:)

# emacs - 为什么是 Ctrl+. 当我将它绑定到 Emacs 中的命令时不起作用？

> ID：11110801
> 
> 赞同：16
> 
> 时间：2012-06-19T23:15:47.407
> 
> 标签：emacs, terminal, key-bindings

`C-.`当我将它绑定到 Emacs 中的命令时，它在终端中不起作用。`gnome-terminal`我在真正的终端 tty1上尝试了这个程序。`-nw`我用标志启动 Emacs ，然后按`C-h k`（命令`describe-key`），然后按`C-.`。Emacs 只接收`.`，没有`Ctrl`. 我如何让它在 Emacs 中工作？

我正在用这个过程绑定密钥：

```
(define-key c-mode-base-map (kbd "C-.") 'semantic-ia-fast-jump) 
```

或者

```
(define-key c-mode-base-map [(control .)] 'semantic-ia-fast-jump) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-20T11:28:04.937

简而言之，大多数终端仿真器在它们可以产生的控制字符方面受到限制（原因很简单，它们所仿真的原始终端同样受到限制）。

`.`因此，除了按下时，您的终端很可能不会产生任何东西`C-.`（如果是这种情况，这基本上就是您的答案，除非有某种方法可以配置终端以其他方式执行）。

（任何时候你认为 Emacs 在终端中运行时没有对某些输入进行操作，你应该尝试验证 Emacs 是否确实接收了你认为的输入。）

如果您的终端*生成*的不是`.`.，请参阅以下问答以获取有关如何让 Emacs 识别序列的详细信息：

*   [在 Emacs 23.1.1 中绑定 M-<up> / M-<down>](https://stackoverflow.com/questions/4351044/binding-m-up-m-down-in-emacs-23-1-1)
*   [Shift-Tab 在 Emacs 中产生神秘错误](https://stackoverflow.com/questions/3518846/shift-tab-produces-cryptic-error-in-emacs)
*   [http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/elisp/Translation-Keymaps.html](http://www.gnu.org/savannah-checkouts/gnu/emacs/manual/html_node/elisp/Translation-Keymaps.html)

如果您可以运行 xterm，那么您可能很幸运，因为有一些特定于 xterm 的增强功能。看看以下内容：

*   [在 VT100/xterm 终端（Mac OS X 的终端）中向 Emacs 发送“C-(”？](https://stackoverflow.com/questions/4337837/send-c-to-emacs-in-vt100-xterm-terminal-mac-os-xs-terminal)
*   [http://www.dur.ac.uk/pjheslin/Software/Emacs/Download/xterm-extras.el](http://www.dur.ac.uk/p.j.heslin/Software/Emacs/Download/xterm-extras.el)
    （我不确定第二个链接在这个特定实例中是否相关，但似乎值得包括在内）。

其他一些相关问答：

*   [如何在终端中将 S-RET 发送到 Emacs？](https://stackoverflow.com/questions/3528713/how-does-one-send-s-ret-to-emacs-in-a-terminal)
*   [为什么 emacs 将 PageDown (<next>) 键与 M-[ 混淆？](https://stackoverflow.com/questions/6650074/why-emacs-confuse-pagedown-next-key-with-m)

# c# - 外键与独立关系 - Entity Framework 5 有改进吗？

> ID：11110802
> 
> 赞同：6
> 
> 时间：2012-06-19T23:15:49.147
> 
> 标签：c#, entity-framework, ef-code-first

在使用实体框架时，我已经阅读[了几篇](http://www.ladislavmrnka.com/2011/05/foreign-key-vs-independent-associations-in-ef-4/)关于外键与独立关系概念的文章和[问题](https://stackoverflow.com/questions/9253234/what-is-the-point-of-creating-foreign-key-properties-when-using-entity-framework)。而且我仍然不能 100% 确定要走哪条路……我不希望通过拥有一个将在 FK 关系中使用的属性来“污染”我的域 POCO，因为我已经有一个属性引用“有一个”目的。

我的问题是（看着你@EFTeam，@Ladislav Mrnka）

1.  在即将发布的 Entity Framework v5 中对此主题是否有任何改进？
2.  如果我使用 FK 而不是独立关联（尤其是代码优先），是否有更多优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T09:14:35.160

如果您有一个大型模型，那么无论如何您都必然会“污染”您的域对象（或一般的概念模型）。对于具有 FK 映射关联的模型，“视图生成”的成本 - EF 处理管道中执行查询或保存更改所必需的阶段，可以移动到构建时（“预生成视图”）的成本是与具有独立关联的模型相比较低。这一点很重要，因为对于小型模型来说执行它的时间可能并不明显，但它会变得非常快，尤其是当关联映射到可空外键时（to-0..1 或 to-1 与派生实体在 TPH 映射的层次结构中）。在官方[EF5 性能注意事项文档中](http://blogs.msdn.com/b/adonet/archive/2012/04/05/ef5-performance-considerations.aspx)一个非常大的模型的视图生成时间的示例差异在“超过一个月然后我们放弃”（使用独立关联）和 104 分钟（使用 FK 映射关联）之间给出。在我的情况下（数百个高度连接的实体），它在 25 分钟到 40 秒之间。EF5 中的情况与以前版本中的情况相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T08:41:33.550

没有任何改进。这两种选择仍然存在。使用 FK 关联的优点是在使用断开连接的对象图时简化了一对多关系更改的处理。如果您使用它，它还应该简化数据绑定。

# java - （使用 -source 7 或更高版本在开关中启用字符串）错误；Netbeans 7.1.2

> ID：11110808
> 
> 赞同：8
> 
> 时间：2012-06-19T23:17:23.140
> 
> 标签：java, netbeans-7, java-7

我正在使用 JDK 7 和 Netbeans IDE 7.1.2。在switch[中使用字符串](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

试图在我的 IDE 中编译该示例示例，但出现此错误。

> switch (month.toLowerCase()) { (使用 -source 7 或更高版本来启用 switch 中的字符串) 1 错误

需要你的帮助。
谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-19T23:18:29.403

您需要为您的项目设置源，

右键单击>属性>源>在此处设置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T18:42:24.080

# 通常在“-source 7”上：使用 JDK7

*（例如，如果您通常使用 JDK 6 并且只想将 JDK 7 用于特殊项目等）*

如果在 Netbeans 中使用不同的 JDK 仍有问题，以下步骤可能会有所帮助。

首先，将JDK安装到任何目录，它不必是你的主JDK或进入任何PATHS左右。

### 所有这些步骤都必须考虑

在 Netbeans 中，右键单击项目 -> 属性

1.  -> 库 -> 管理平台... -> 添加平台... 并添加您的 JDK 目录
2.  -> 库 -> Java 平台：选择 JDK 7
3.  -> 源 -> 源/二进制格式：选择 JDK 7

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-10-19T20:46:19.377

intellij IDE 自行处理，只需单击红色灯泡并选择添加 JDK 7

# ruby - 将一串文本（用户输入）转换为二进制

> ID：11110813
> 
> 赞同：0
> 
> 时间：2012-06-19T23:17:38.907
> 
> 标签：ruby, text, binary

我基本上需要获得用户输入：

```
gets.chomp("input?") 
```

然后将给定的输入转换为二进制。

那是我不明白的部分。:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:14:27.703

试试这个。

```
a = gets.chomp
puts a.each_byte.map {|y| sprintf "%08b", y}.join " " 
```

# ruby - 为什么我得到一个未定义的方法“xpath”用于#？

> ID：11110822
> 
> 赞同：2
> 
> 时间：2012-06-19T23:18:41.493
> 
> 标签：ruby, ruby-on-rails-3, nokogiri

我有以下 XML 结构：

```
<agencies>
  <city>
    <name>New York</name>
    <address>Street A, 101</address>
    <phone>111-222-333</phone>
  </city>
  <city>
    <name>Chicago</name>
    <address>Street B, 201</address>
    <phone>111-222-333</phone>
  </city>
</agencies> 
```

我正在尝试创建一个 Ruby 类来使用它。

我创建了类文件：

```
require 'nokogiri'

class Agency

  def initialize(arg)
    @file = arg.gsub(/-/,'_')
    @doc = Nokogiri::XML(open("db/agencies/#{@file}.xml"))
  end

  def find_offices
    @doc.xpath('//agencies/city').map do |i|
      { 'name' => xpath('name') }
    end
    #@entries = @doc.xpath('//agencies/city').map do |i|
    #  { 'name' => xpath('name').inner_text, 'address' => xpath('address').inner_text, 'phone' => xpath('phone').inner_text }
    #end
  end
end 
```

对于我的控制器，我有：

```
class AgenciesController < ApplicationController

  def index
    @prefectures = Prefecture.all
  end

  def list
    @prefecture = Agency.new(params[:prefecture_name])
    @offices = @prefecture.find_offices
  end
end 
```

该`list`方法返回以下错误：

```
NoMethodError in AgenciesController#list

undefined method `xpath' for #<Agency:0x9e7f280>
Rails.root: /home/kleber/projects/rails_apps/job_board2

Application Trace | Framework Trace | Full Trace
app/models/agency.rb:13:in `block in find_offices'
app/models/agency.rb:12:in `map'
app/models/agency.rb:12:in `find_offices'
app/controllers/agencies_controller.rb:9:in `list' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:30:20.700

这部分看起来很有趣：

```
def find_offices
    @doc.xpath('//agencies/city').map do |i|
      { 'name' => xpath('name') }
    end 
```

`i`您为查询返回的每个元素创建一个局部变量，`xpath()`但不使用它。您正在调用`xpath('name')`，但我没有看到可以调用`xpath()`的类（或全局范围内）的定义。

你的意思是写更像这样的东西吗？（未经测试）：

```
 { 'name' => i.xpath('name') } 
```

# php - 获取表中最后一行的 SQL 语句

> ID：11110824
> 
> 赞同：0
> 
> 时间：2012-06-19T23:18:44.923
> 
> 标签：php, sql

我有一个表 - xxxx_nb_lo_update_date - 有许多按变量 id 排序的列和行。我需要获取表中的最后一个条目，但我一直遇到问题。运行时代码没有产生任何东西..要显示的内容是时间戳..

```
<?php
   $link = mysql_connect('www.xxxxxxx.co.uk', 'xxxxx', 'axxxxxx');
   if (!$link) {
       die('Could not connect: ' . mysql_error());
   }
   mysql_select_db("xxxxxxx", $link);

   $numrow122 = mysql_query("SELECT TOP 1 last_lo_update_date FROM xxxx_nb_lo_update_date  ORDER BY id DESC "); 

   echo "<font color='blue'>$numrow122</font>";
   mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:20:18.997

```
$numrow122 = mysql_query("SELECT last_lo_update_date FROM xxxx_nb_lo_update_date ORDER BY id DESC LIMIT 1"); 

echo "<font color='blue'>" . mysql_result($numrow122, 0, 0) . "</font>"; 
```

那应该可以为您提供所需的确切字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:21:35.833

您不应该依赖自动递增的主键来建立年表

除此之外，您需要获取该行

```
$ds = mysql_query("SELECT last_lo_update_date FROM xxxx_nb_lo_update_date ORDER BY id DESC limit 1"); 
$rs = mysql_fetch_array ($rs);

print $rs[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:32:07.260

如果您的 id 是 AUTO_INCREMENT 列，则可以使用该函数：

```
LAST_INSERT_ID()

SELECT last_lo_update_date FROM xxxx_nb_lo_update_date WHERE yourId = LAST_INSERT_ID() 
```

# java - Google App Engine - id为“”的对象由不同的JPA管理

> ID：11110826
> 
> 赞同：2
> 
> 时间：2012-06-19T23:18:56.957
> 
> 标签：java, google-app-engine, jpa

当我尝试提交事务时，我得到：

```
javax.persistence.RollbackException: Transaction failed to commit
javax.persistence.PersistenceException: Object with id "" is managed by a different 
org.datanucleus.exceptions.NucleusUserException: Object with id "" is managed by a different Object ManagerObject Manager 
```

我的代码是：

```
@Entity
public class Profile implements Serializable
{
    private static final long serialVersionUID = 1L;
    @Id     
    @GeneratedValue(strategy = GenerationType.IDENTITY) 
    private Long profileId;

    private String m_Name;    
    private String m_Email;
    private String m_Password;  

    @ManyToOne()
    private List<MyPoint> m_points = null;
    .
    .
}

@Entity
public class MyPoint  implements Serializable 
{
    private static final long serialVersionUID = 1L;    
    @Id
    private int pointId;

    private int m_LatitudeE6;
    private int m_LongitudeE6;
    .
    .
} 
```

*   如果我用他的注释删除 m_points 一切正常。
*   我将 JPA 1.0 与 Google App Engine 一起使用
    我做错了什么？
    谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:38:33.307

不是 GAE 专家，但您的实体映射有一些明显的问题需要修复。

首先，将 a 应用于列表是没有意义`@ManyToOne`的（想想看，当您使用该注释时，您表示*该*实体中的许多都与*映射*实体之一相关）。

其次，您没有为嵌入的点集合指定实际的映射列。您必须在点类上定义从点到轮廓的映射，或者使用连接表。下面是一个例子（非常粗略的伪代码）：

```
@Entity
public class Profile implements Serializable { 

    @OneToMany(mappedBy = "profile")
    private List<MyPoint> m_points = null;
}

@Entity
public class MyPoint implements Serializable {

    @ManyToOne
    @JoinColumn(name = "profileId")
    private Profile profile;
} 
```

很明显，上面的示例假定`profileId`MyPoint 表中有一个外键，它引用了 Profile 表上的主键。

# c# - Visual Studio 将无法识别新的设置文件

> ID：11110839
> 
> 赞同：2
> 
> 时间：2012-06-19T23:20:11.573
> 
> 标签：c#, visual-studio-2010, settings

我正在尝试在我的 Windows 窗体应用程序中使用 C# 中的新设置文件。

在我删除了旧的设置文件（Settings1.settings）并创建了新的（Settings.settings）之后。

当我开始编辑使用设置文件的代码时，我意识到无法识别新的设置文件。例子：

![在此处输入图像描述](../Images/93007ae4183a83b72713e0ace83a3e8e.png)

我们公司创建的命名空间中使用了一个自定义设置类，这导致了一些冲突。如何将代码指向正确的设置文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:40:53.087

在尝试复制您所做的事情时，我注意到 Settings.Designer.cs 文件的命名空间来自此（我正在使用控制台应用程序进行测试）。

```
namespace ConsoleApplication1.Properties {

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "10.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default {
            get {
                return defaultInstance;
            }
        }

        [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.Configuration.DefaultSettingValueAttribute("False")]
        public bool Test {
            get {
                return ((bool)(this["Test"]));
            }
            set {
                this["Test"] = value;
            }
        }
    }
} 
```

到

```
namespace ConsoleApplication1 {

    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "10.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default {
            get {
                return defaultInstance;
            }
        }

        [global::System.Configuration.UserScopedSettingAttribute()]
        [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
        [global::System.Configuration.DefaultSettingValueAttribute("False")]
        public bool Temp {
            get {
                return ((bool)(this["Temp"]));
            }
            set {
                this["Temp"] = value;
            }
        }
    }
} 
```

如果您会注意到命名空间从 ConsoleApplication1.Properties 转到 ConsoleApplication1，那么如果您将 .Properties 添加到新设置文件的命名空间，它应该会解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:39:35.970

检查设置文件的命名空间，然后您有 2 个选项：

1.  在 .cs 文件的开头添加 using 到此命名空间。

2.  每次尝试使用设置文件之前，请编写它的整个命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-28T20:49:19.447

我认识的派对迟到了。无论如何，我的解决方案是删除下面存储的设置

`C:\Users\[username]\AppData\Local\[your program name]\`

# python - 在 python (WX python) 中制作一个滚动面板

> ID：11110842
> 
> 赞同：2
> 
> 时间：2012-06-19T23:20:19.940
> 
> 标签：python, wxpython

所以我已经构建了一个不错的 wx.Frame。它功能齐全。我希望使它成为一个可滚动的区域。我查看了 wx python API，它说下面的代码应该这样做：

```
 self.panel = wx.lib.scrolledpanel.ScrolledPanel(parent = self, id = -1)
    self.panel.SetupScrolling()

    self.panel = wx.Panel(self, -1)
    self.panel.SetBackgroundColour(wx.Colour(self.Red, self.Blue, self.Green))
    self.box = wx.FlexGridSizer(fileList.__len__(), 5, 5,5)
    self.FileObjects = []
    self.BatchProblemFileObjects = [] 
```

这会创建滚动条，但仅在我调整窗口大小之后并且仅在需要它时才会创建。有没有办法让我不必调整窗口大小来使滚动条出现？

谢谢你的帮助。

（在 python 2.7 上运行）

# wpf - Datagrid复制同时保留字符串结构

> ID：11110843
> 
> 赞同：4
> 
> 时间：2012-06-19T23:20:26.570
> 
> 标签：wpf, string, copy, format

我有一个数据网格，其中有一些列，我已经修改了它们的字符串格式，比如这个，它接受一个 UINT32 数字并输出它的十六进制格式。

```
<WpfToolkit:DataGridTextColumn Binding="{Binding Path=getStart, Mode=OneWay, StringFormat='{}{0:x4}'}" Header="Starting Address"  Width="13*"/> 
```

但是，当我复制一行时，我会再次获得 UINT 编号而不是十六进制，这正是我所希望的。有没有办法保留字符串格式？我已经查看了 CopyingRowClipboardContent，但我不太确定如何正确使用此事件处理程序。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T17:51:10.320

你可以尝试做这样的事情：

1）将属性getStartS类型的字符串添加到您的类中，在getter中您可以格式化您的字符串。

```
 public class Foo
    {
        public int getStart { get; set; }

        public string getStartS { get { return string.Format("{0:x4}", getStart); } }
    } 
```

2）在 DataGrid 列中，您可以绑定到 getStartS 属性，它会正常工作！

```
<DataGridTextColumn Binding="{Binding Path=getStartS}" 
                                    Header="Starting Address"                                    
                                    /> 
```

**或者您可以尝试第二种解决方案：**

数据网格列：

```
<DataGridTextColumn Binding="{Binding Path=getStart, Mode=OneWay, StringFormat='{}{0:x4}'}" 
                                    Header="Starting Address"
                                    CopyingCellClipboardContent="DataGridTextColumn_CopyingCellClipboardContent"
                                    /> 
```

事件处理程序：

```
 private void DataGridTextColumn_CopyingCellClipboardContent(object sender, DataGridCellClipboardEventArgs e)
        {
            if (e.Column.ClipboardContentBinding != null && !string.IsNullOrEmpty(e.Column.ClipboardContentBinding.StringFormat))
            {
                e.Content = string.Format(e.Column.ClipboardContentBinding.StringFormat, e.Content);
            }
        } 
```

# php - 如何将“全选”添加到 facebook 请求对话框？

> ID：11110846
> 
> 赞同：0
> 
> 时间：2012-06-19T23:20:45.823
> 
> 标签：php, facebook, dialog, request, multi-friend-selector

我在我的 Facebook 游戏中使用请求对话框让我的用户邀请其他人加入。到目前为止，它运行良好，但我错过了一次选择所有朋友的可能性。

过去几天我读到facebook-dialog根本没有提供这个功能，但我在很多游戏中看到有解决方案，但我不知道他们是怎么做到的。如果我看一下 cityville 或 castleville ，那么他们似乎已经创建了自己的邀请对话框。我知道有一种方法可以阅读好友列表，这样我就可以自己创建一个选择对话框，但是我如何在不使用请求对话框的情况下发送邀请呢？或者这个问题还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:17:58.883

您可以使用图形 api 创建自己的“选择朋友”对话框来获取用户的所有朋友。当他们提交此表单时，您将获得用户选择的 id 并将它们传递给请求对话框。[（请参阅本页](https://developers.facebook.com/docs/reference/dialogs/requests/)上的“向一个或多个用户发送请求” 。）

# r - 如何优化 R 中的整数参数（和其他不连续参数空间）？

> ID：11110848
> 
> 赞同：36
> 
> 时间：2012-06-19T23:20:58.493
> 
> 标签：r, optimization, integer

如果参数空间只有整数（或者不连续），如何优化？

在 optim() 中使用整数检查似乎不起作用，而且无论如何效率都非常低。

```
fr <- function(x) {   ## Rosenbrock Banana function
  x1 <- x[1]
  x2 <- x[2]
  value<-100 * (x2 - x1 * x1)^2 + (1 - x1)^2

  check.integer <- function(N){
    !length(grep("[^[:digit:]]", as.character(N)))
  }

  if(!all(check.integer(abs(x1)), check.integer(abs(x2)))){
   value<-NA 
  }
  return(value)

}
optim(c(-2,1), fr) 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-06-19T23:50:16.850

这里有一些想法。

**1\. 惩罚优化。** 您可以对目标函数的参数进行四舍五入，并对非整数添加惩罚。但这会产生很多局部极值，因此您可能更喜欢更稳健的优化程序，例如微分进化或粒子群优化。

```
fr <- function(x) {
  x1 <- round( x[1] )
  x2 <- round( x[2] )
  value <- 100 * (x2 - x1 * x1)^2 + (1 - x1)^2
  penalty <- (x1 - x[1])^2 + (x2 - x[2])^2
  value + 1e3 * penalty
}

# Plot the function
x <- seq(-3,3,length=200)
z <- outer(x,x, Vectorize( function(u,v) fr(c(u,v)) ))
persp(x,x,z,
  theta = 30, phi = 30, expand = 0.5, col = "lightblue", border=NA,
  ltheta = 120, shade = 0.75, ticktype = "detailed") 
```

![透视图](../Images/9973501d1b37c4df22bb6599b4e8bdf7.png)

```
library(RColorBrewer)
image(x,x,z, 
  las=1, useRaster=TRUE,
  col=brewer.pal(11,"RdYlBu"),
  xlab="x", ylab="y"
) 
```

![图像图](../Images/c618da8a206c614a26a8c62dd5baf3ca.png)

```
# Minimize
library(DEoptim)
library(NMOF)
library(pso)
DEoptim(fr, c(-3,-3), c(3,3))$optim$bestmem
psoptim(c(-2,1), fr, lower=c(-3,-3), upper=c(3,3))
DEopt(fr, list(min=c(-3,-3), max=c(3,3)))$xbest
PSopt(fr, list(min=c(-3,-3), max=c(3,3)))$xbest 
```

**2\. 详尽的搜索。** 如果搜索空间很小，也可以使用网格搜索。

```
library(NMOF)
gridSearch(fr, list(seq(-3,3), seq(-3,3)))$minlevels 
```

**3\. 本地搜索，具有用户指定的社区。** 在不调整目标函数的情况下，您可以使用某种形式的局部搜索，您可以在其中指定要检查的点。这应该快得多，但对邻域函数的选择极为敏感。

```
# Unmodified function
f <- function(x) 
  100 * (x[2] - x[1] * x[1])^2 + (1 - x[1])^2

# Neighbour function
# Beware: in this example, with a smaller neighbourhood, it does not converge.
neighbour <- function(x,...)
  x + sample(seq(-3,3), length(x), replace=TRUE)

# Local search (will get stuck in local extrema)
library(NMOF)
LSopt(f, list(x0=c(-2,1), neighbour=neighbour))$xbest
# Threshold Accepting
TAopt(f, list(x0=c(-2,1), neighbour=neighbour))$xbest 
```

**4.禁忌搜索。** 为了避免一次又一次地探索相同的点，您可以使用 [禁忌搜索](http://en.wikipedia.org/wiki/Tabu_search)，即记住最后的k点以避免再次访问它们。

```
get_neighbour_function <- function(memory_size = 100, df=4, scale=1){
  # Static variables
  already_visited <- NULL
  i <- 1
  # Define the neighbourhood
  values <- seq(-10,10)
  probabilities <- dt(values/scale, df=df)
  probabilities <- probabilities / sum(probabilities)
  # The function itself
  function(x,...) {
    if( is.null(already_visited) ) {
      already_visited <<- matrix( x, nr=length(x), nc=memory_size )
    }
    # Do not reuse the function for problems of a different size
    stopifnot( nrow(already_visited) == length(x) )
    candidate <- x
    for(k in seq_len(memory_size)) {
      candidate <- x + sample( values, p=probabilities, length(x), replace=TRUE )
      if( ! any(apply(already_visited == candidate, 2, all)) )
        break
    }
    if( k == memory_size ) {
      cat("Are you sure the neighbourhood is large enough?\n")
    } 
    if( k > 1 ) {
      cat("Rejected", k - 1, "candidates\n")
    }
    if( k != memory_size ) {
      already_visited[,i] <<- candidate
      i <<- (i %% memory_size) + 1
    }
    candidate
  }
} 
```

在下面的例子中，它并没有真正起作用：我们只移动到最近的局部最小值。而在更高维度上，情况会变得更糟：邻域如此之大，以至于我们从未访问过已访问点的缓存。

```
f <- function(x) {
  result <- prod( 2 + ((x-10)/1000)^2 - cos( (x-10) / 2 ) )  
  cat(result, " (", paste(x,collapse=","), ")\n", sep="")
  result
}
plot( seq(0,1e3), Vectorize(f)( seq(0,1e3) ) )

LSopt(f, list(x0=c(0,0), neighbour=get_neighbour_function()))$xbest
TAopt(f, list(x0=c(0,0), neighbour=get_neighbour_function()))$xbest
optim(c(0,0), f, gr=get_neighbour_function(), method="SANN")$par 
```

差分进化效果更好：我们只得到一个局部最小值，但它比最近的要好。

```
g <- function(x) 
  f(x) + 1000 * sum( (x-round(x))^2 )
DEoptim(g, c(0,0), c(1000,1000))$optim$bestmem 
```

禁忌搜索通常用于纯粹的组合问题（例如，当搜索空间是一组树或图时），对于整数问题似乎不是一个好主意。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-20T07:30:08.837

整数规划 (IP) 有自己的规则和算法。使用连续求解器没有多大意义。R 没有专门的整数规划求解器，但您可以尝试：

*   如果您的函数是线性的，请使用混合整数规划求解器之一，例如将[lp_solve](http://lpsolve.sourceforge.net/)作为 R 中的“lpSolve”或将[GLPK](http://www.gnu.org/software/glpk/)作为 R 中的“Rglpk”。

*   否则，您可以尝试使用“SANN”方法进行优化，这是一种模拟退火方法，文档中说：

`"It uses only function values but is relatively slow... If a function to generate a new candidate point is given, method 'SANN' can also be used to solve combinatorial optimization problems... Note that the 'SANN' method depends critically on the settings of the control parameters."`

这是一个带有平移球体函数的示例`[-10,10]x[-10,10]`：

```
fun <- function(x) sum((x-c(3.2, 6.7))^2)
nextfun <- function(x) sample(-10:10, 2, replace=TRUE)

optim(fn=fun, par=c(-10,-10), gr=nextfun, method="SANN", 
      control=list(maxit=1000,fnscale=1,trace=10))

# sann objective function values
# initial       value 458.000000
# iter      999 value 0.000000
# final         value 0.000000
# sann stopped after 999 iterations
# $par
# [1] 3 7
# $value
# [1] 0.13 
```

但是，如果没有其他帮助，您应该应用更智能的“梯度”，即随机采样，或者在您的整数域中进行完整搜索。当然，在更高的维度上，将需要一种专门的方法。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-18T09:38:09.443

R 中提供了新的包，允许在优化程序中使用不连续的输入参数（例如整数）。其中之一是[rgenoud](http://cran.r-project.org/web/packages/rgenoud/index.html)

使用选项“data.type.int=TRUE”并通过设置正确的边界，该函数将仅使用整数来最小化或最大化给定函数。

在 rgenoud 下面使用 stats::optim() 进行优化。因此，用户能够将任何选项传递给 rgenoud，它通常会传递给 optim()

# android - 跨多行显示两个 TextViews

> ID：11110849
> 
> 赞同：4
> 
> 时间：2012-06-19T23:21:10.813
> 
> 标签：android, textview

我遇到了一些问题，因为我希望两个 TextView 并排布局，即使第一个 TextView 有几行文本。理想情况下，下一个 TextView 应该紧随其后。这有点难以解释，所以我制作了这张图片来说明它：

![](../Images/0bc8720791bf23e3eaeb0dd102924e79.png)

*（第一个TextView包含标题，第二个TextView包含年份）*

我现在一直在尝试一些不同的东西，包括布局技巧和使用 Html.fromHtml()，但到目前为止没有任何效果。这可能是不可能的，但我只是想确定一下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T23:40:15.243

这听起来像是一份工作`Spannable`。正如您已经注意到做两个视图的问题是，`TextView`在您的两行示例中的边界仍然是一个矩形，因此在文本末尾布置第二个视图变得很棘手。HTML 可以用于简单的标签（粗体、下划线、标题），但不太灵活。

解决方案是使用`Spannable`应用于每个“跨度”的特定格式来创建内容片段的文本。事实证明，那么您可以将整个结果直接粘贴到单个`TextView`. 就像是：

```
TextView tv; //Defined somewhere else

SpannableStringBuilder resultBuilder = new SpannableStringBuilder();
SpannableString item = new SpannableString("Long and Fancy Movie Title Here");
item.setSpan(new AbsoluteSizeSpan(18, true), 0, item.length(), 0);
resultBuilder.append(item);

SpannableString item = new SpannableString("(2011)");
item.setSpan(new AbsoluteSizeSpan(12, true), 0, item.length(), 0);
resultBuilder.append(item);

tv.setText(resultBuilder, TextView.BufferType.SPANNABLE); 
```

中存在大量不同的跨度定义`android.text.style`，以上只是在同一字符串中创建两种不同文本大小的示例。`TextAppearanceSpan`你应该能够从这个、`TypefaceSpan`、 或其他组合中得到你想要的东西。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:24:21.863

RelativeLayout 中的两个并排 TextView 可能会起作用，我不明白为什么如果添加正确的 html 格式，Html.fromHtml 将不起作用

# templates - 如何使 html 属性的值取决于 Ember.js 视图呈现的项目？

> ID：11110856
> 
> 赞同：1
> 
> 时间：2012-06-19T23:21:36.887
> 
> 标签：templates, attributes, ember.js, attr

假设我有这样的观点：

```
App.AnchorView = Ember.View.extend({
  tagName: 'a',
  attributeBindings: ['href']
}); 
```

和一个类定义：

```
App.Item = Ember.Object.extend({
  name: "Unknown Entry",
  location: ""
}); 
```

和类的一个实例：

```
App.Item.create({
   name: "Google",
   location: "http://www.google.com" 
}); 
```

我的模板是：

```
{{#view App.AnchorView}}{{name}}{{/view}} 
```

我希望它呈现为：

```
<a href="http://www.google.com">Google</a> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T00:57:12.973

这是使用 bindAttr href 和 ItemsController 的超级快速方法：http: [//jsfiddle.net/nLa8Z/1/](http://jsfiddle.net/nLa8Z/1/)有关更详细的文档，请查看[http://emberjs.com/documentation/#toc_binding-element-attributes- with-bindattr](http://emberjs.com/documentation/#toc_binding-element-attributes-with-bindattr)

```
{{#each App.ItemsController}}
     <a {{bindAttr href="location"}}>{{name}}</a>
{{/each}}

App.ItemsController = Ember.ArrayController.create({
     content: [
         App.Item.create({ name: "Google", location: "http://www.google.com"})
     ]}); 
```

# javascript - Jquery在点击中关闭

> ID：11110858
> 
> 赞同：0
> 
> 时间：2012-06-19T23:21:41.430
> 
> 标签：javascript, jquery

我在网络上下载的脚本有问题，基本上我需要的是折叠面板交互的常见问题解答问题，但在这种情况下，当我点击一个问题时，我想要的另一个问题不同，它打开，当我点击另一个问题时，之前的问题关闭并打开我点击的问题。

我找到了这个[折叠面板脚本](http://feloliveira.com.br/blog/faq-de-perguntas-e-respostas-com-jquery/)

它运作良好，但缺少一个细节，如果我点击同一个链接（问题），问题不会崩溃回到正常的正常模式，它只能关闭他选择另一个链接。当我选择另一个问题并且再次单击相同的问题时，我希望能够关闭该问题。

主页中的javascript代码：

```
<script type="text/javascript">
<!–
  $(function() {
    var $h2;
    var $answer;
    $(‘.answer’).hide();
    $(‘#faq h2′).bind(
        ‘click’,
        function()
        {
            if ($h2 && $h2[0] != this) {
                $answer.slideUp();
                $h2.removeClass(‘open’);
            }
            $h2 = $(this);
            $answer = $h2.next();
            $answer.slideDown();
            $h2.addClass(‘open’);
        }
    )
 });
 –&gt;
</script> 
```

希望得到一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:08:16.867

首先，我重新修改了脚本的变量名称，稍微重构了它，并添加了注释以尝试更清楚地说明发生了什么：

```
<script type="text/javascript">
  $(function() { // onReady
    var $lastClickedH2;
    var $currentOpenAnswer;
    $('.answer').hide(); // All answers start hidden
    $(‘#faq h2′).click(function() // When an H2 is clicked
        {
            if ($lastClickedH2 && $lastClickedH2[0] != this) {
                // If there was an answer already open, close it
                $currentOpenAnswer.slideUp();
                $lastClickedH2.removeClass(‘open’);
            }
            // Set the last clicked H2/current open answer variables
            $lastClickedH2 = $(this);
            $currentOpenAnswer = $lastClickedH2.next();
            // Show the answer
            $currentOpenAnswer.slideDown();
            // Add an "open" class to the H2 (not sure why ...)
            $lastClickedH2.addClass(‘open’);
        }
    );
 });
</script> 
```

如您所见（希望现在），当您单击已单击的 H2 时，它确实会关闭（通过 中的代码部分`if`），但之后的代码只是重新打开它。你想要做的是调整一些东西，使它不会重新打开；这是一种方法：

```
 ...
            if ($lastClickedH2 && $lastClickedH2[0] != this) {
                // If there was an answer already open, close it
                $currentOpenAnswer.slideUp();
                $lastClickedH2.removeClass(‘open’);
            }
            if ($lastClickedH2[0] == this) { // If we clicked on the same H2 twice
                // Unset the last clicked H2/current open answer variables
                $lastClickedH2 = undefined;
                $currentOpenAnswer = undefined;
                // Stop here
                // (Don't go on to the rest of the code, which would re-open it)
                return;
            }
            // Set the last clicked H2/current open answer variables
            $lastClickedH2 = $(this);
            ... 
```

该代码应该可以工作，但它未经测试（因此，如果它有错误，请不要感到惊讶）；希望它有所帮助。

# css - 对影响 CSS 的块感到困惑，它不应该出现在 DNN 皮肤中

> ID：11110859
> 
> 赞同：1
> 
> 时间：2012-06-19T23:21:47.340
> 
> 标签：css, dotnetnuke

我一直在调整一些 CSS，我正在更改锚标签的样式。这很好用。让我感到困惑的是，为什么在一个完全不同的 div 中具有不同类/ID 的东西会受到这种样式的影响？（例如，我的小风格将样式添加到页面底部的一个小 div 块，但出于某种奇怪的原因，它开始影响顶部的管理导航栏）顺便说一句，我正在开发 DotNetNuke 皮肤。

浏览 Chrome 中的 Inspect 选项，它就像是继承了这些样式，即使我创建的这个样式类应该没有链接！

我检查了我的 DIV，它们正确配对。

所以我只是想知道我还能检查什么来阻止这种情况的发生。我可能会遗漏一些非常简单/明显的东西。

谢谢！

编辑：嗯，是的，显然我应该包含代码；）愚蠢的我！

好的，这是影响皮肤的 CSS 代码：

```
#ehcbreadcrumbs {
    background-color: #BCBCBC;
    color: White;
    font-size: 1.1em;
    padding-top: 4px;
    padding-right: 0px;
    padding-bottom: 4px;
    padding-left: 10px;
    margin-top: 5px;
}
#ehcbreadcrumbs a, a:link {
    text-decoration: none;
    color: White;
    font-size: 1.1em;
}

#bottomnavbar {
    padding-top: 4px;
    padding-bottom: 4px;
    display: table;
}
#bottomnavbar ul {
    margin: 0 auto;
}
#bottomnavbar ul li {
    display: inline;
}
#bottomnavbar a, a:link {
    text-decoration: none;
}
#bottomnav a, a:link {
    font-size: 14px;
} 
```

这是皮肤文件：

```
<%@ Control language="vb" AutoEventWireup="false" Explicit="True" Inherits="DotNetNuke.UI.Skins.Skin" %>
<%@ Register TagPrefix="dnn" TagName="LANGUAGE" Src="~/Admin/Skins/Language.ascx" %>
<%@ Register TagPrefix="dnn" TagName="LOGO" Src="~/Admin/Skins/Logo.ascx" %>
<%@ Register TagPrefix="dnn" TagName="SEARCH" Src="~/Admin/Skins/Search.ascx" %>
<%@ Register TagPrefix="dnn" TagName="NAV" Src="~/Admin/Skins/Nav.ascx" %>
<%@ Register TagPrefix="dnn" TagName="TEXT" Src="~/Admin/Skins/Text.ascx" %>
<%@ Register TagPrefix="dnn" TagName="BREADCRUMB" Src="~/Admin/Skins/BreadCrumb.ascx" %>
<%@ Register TagPrefix="dnn" TagName="USER" Src="~/Admin/Skins/User.ascx" %>
<%@ Register TagPrefix="dnn" TagName="LOGIN" Src="~/Admin/Skins/Login.ascx" %>
<%@ Register TagPrefix="dnn" TagName="LINKS" Src="~/Admin/Skins/Links.ascx" %>
<%@ Register TagPrefix="dnn" TagName="PRIVACY" Src="~/Admin/Skins/Privacy.ascx" %>
<%@ Register TagPrefix="dnn" TagName="TERMS" Src="~/Admin/Skins/Terms.ascx" %>
<%@ Register TagPrefix="dnn" TagName="COPYRIGHT" Src="~/Admin/Skins/Copyright.ascx" %>
<%@ Register TagPrefix="dnn" TagName="STYLES" Src="~/Admin/Skins/Styles.ascx" %>
<%@ Register TagPrefix="dnn" TagName="MENU" Src="~/DesktopModules/Infinity.Menu/ViewMenu.ascx" %>

<%@ Register TagPrefix="snapsis" Namespace="Snapsis.DNN.Skins" Assembly="Snapsis.DNN.NavMenu" %>
<%@ Register TagPrefix="ddr" TagName="DDRMENU" src="~/DesktopModules/DDRMenu/Menu.ascx" %>
<%@ Register TagPrefix="ddr" Namespace="DotNetNuke.Web.DDRMenu.TemplateEngine" Assembly="DotNetNuke.Web.DDRMenu" %>

<%@ Register TagPrefix="google" TagName="FOOTER" Src="Footer.ascx" %>

<script src="<%= Page.ResolveUrl("Portals/_default/Skins/ehc2011/js/common.js") %>" type="text/javascript"></script>

<div class="cpanel_right">
    <div class="cpanel_left">
         <div runat="server" id="ControlPanel"></div>
    </div>
</div>
<div class="clear"></div>

<div class="wrapper">
    <div class="layout">
        <!--Head Start-->
        <div class="BCKhead">
            <div class="logo"><dnn:LOGO runat="server" id="LOGO1"  />
                <h1 class="hideFromView">XXXXXX</h1>
                <h2 class="hideFromView">XXXXXXX</h2>
            </div>
            <div class="top">
                <div class="topmenu">
                    <ul>
                    <li class="last"><a href="/TheXXXXpilot/Deliveringtheproject/Theprojectteam/tabid/66/language/en-AU/Default.aspx" title="Contact Us">Contact Us</a></li>
                    <li><a href="/TheXXXXpilotprogram/FrequentlyAskedQuestions/tabid/137/language/en-US/Default.aspx" title="View the FAQ">FAQ</a></li>   
                    <li><a href="/UsetheXXXX/tabid/155/language/en-US/Default.aspx" title="Use the XXXX">Use the XXXX</a></li>
                    </ul>
                    <div class="clear"></div>
                </div>

                <div class="accessibility">
                <a href="javascript:changeFontSize(-1)" title="Decrease font size"><img src="<%= Page.ResolveUrl("Portals/_default/Skins/ehc2011/images/resizesmall.gif") %>"  alt="Decrease font size"/></a>&nbsp;<a href="javascript:changeFontSize(1)" title="Increase font size"><img src="<%= Page.ResolveUrl("Portals/_default/Skins/ehc2011/images/resizelarge.gif") %>"  alt="Increase font size"/></a>
                </div>

                <div class="searchbox">
                    <div style="display:none"></div>
                    <div id="dnn_dnnSEARCH_DropDownSearch">
                        <dnn:SEARCH ShowWeb="false" ShowSite="false" UseDropDownList="false"  Submit="Search" runat="server" ID="dnnSearch2"  CssClass="searchbox"/>
                    </div>
                </div>                
            </div>
            <div class="clear"></div>
        </div>
        <!--Head End-->
        <!--Container Start-->
        <div class="container_inner" id="container_inner">
            <div class="leftcontent">
                <div class="mainmenu innerHeight">

                     <Snapsis:NavMenu id="LeftNav"  CacheTabs="false" Level="0-2" Type="Hover" 
                     OnlyExpandActive="false" ShowType="Always"
                      EnableViewState="true" 
                      runat="server" ExcludeTabs="Admin,Host" /> 
                    <div class="clear"></div>
                </div>
                <div style="height:5px; overflow:hidden; background:#fff;" id="WhiteDiv"></div>
                <div id="LeftPane" runat="server" class="LeftPane"></div>
            </div>
            <div class="rightcontent">
               <div class="banner"><a href="/UsetheXXXX/tabid/155/language/en-US/Default.aspx" ><img src="<%= Page.ResolveUrl("Portals/_default/Skins/BCKGraphic/images/inner_banner.jpg") %>" /></a></div>
               <div class="RightDiv">
               <div id="ehcbreadcrumbs">
                <dnn:TEXT runat="server" id="dnnTEXT" Text="You are here >" ResourceKey="Breadcrumb" /> <dnn:BREADCRUMB ID="dnnBREADCRUMB" RootLevel="0" Separator="&nbsp;>&nbsp;" runat="server" />
               </div>
               <div id="RightPane" runat="server" class="RightPane"></div>
               </div>
            </div>
            <div class="clear"></div>
            <div id="ContentPane" runat="server" class="ContentPane"></div>
            <div class="clear"></div>
        </div>
        <div class="clear"></div>

        <div class="clear"></div>                
        <!--Container End-->
        <div class="bottomcontent"></div>
        <div id="bottomnavbar">
            <ddr:DDRMENU MenuStyle="sitemap" NodeSelector="RootOnly" runat="server" ></ddr:DDRMENU>
         </div> 
    </div>
</div>

<!--Foot Start-->
<div class="footer">
    <div class="footer_con">
        <div>footer text</div>
        <div class="clear"></div>
    </div>
</div>

<% If DotNetNuke.Security.PortalSecurity.IsInRoles("Administrators") Then%>
<div class="copyright"> 
Logged in as <dnn:USER runat="server" id="dnnUSER"  CssClass="user" /> | 
<dnn:LOGIN runat="server" id="dnnLOGIN2" CssClass="copyright" Text="Login" />
</div>                      
<%End If%>

<!--Foot End-->

<dnn:STYLES runat="server" id="StylesIE6"  Name="IE6Minus" StyleSheet="css/ie6skin.css" Condition="LT IE 7" UseSkinPath="true" />

<script type="text/javascript" >
if(dnn_LeftPane.className.indexOf("DNNEmptyPane") != -1)
{
    if(dnn_ContentPane.className.indexOf("DNNEmptyPane") == -1)
    {
        document.getElementById("WhiteDiv").style.display = "none";
        document.getElementById("container_inner").className = "container_inner_setting";
    }
}
else
{
      document.getElementById("WhiteDiv").style.display = "";
      document.getElementById("container_inner").className = "container_inner";
}
</script>

<google:FOOTER id="footer1" runat="Server"></google:FOOTER> 
```

所以底部导航栏/底部内容中的样式似乎会影响 DNN 管理栏（ControlPanel）的某些方面。如果我在底部导航栏中更改字体大小，它也会影响登录的用户部分，“版权”块锚位中的字体大小也会改变大小。这让我很困惑为什么，因为 DIV 块（对我来说）看起来正确配对。
是的，我知道它不是很漂亮；）（皮肤最初是由其他人创建的，我已经接手对其进行了更改）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T23:12:04.820

你的问题是逗号

```
#ehcbreadcrumbs a, a:link { 
```

真的应该

```
#ehcbreadcrumbs a, #ehcbreadcrumbs a:link { 
```

同样的事情

```
#bottomnavbar a, a:link { 
```

应该

```
#bottomnavbar a, #bottomnavbar a:link { 
```

ETC

# jquery - 尝试使用 jQuery 显示定位的 DIV

> ID：11110860
> 
> 赞同：0
> 
> 时间：2012-06-19T23:21:49.463
> 
> 标签：jquery

我需要显示一个相对于用户点击链接位置的 div。

用户点击的链接实际上也是动态生成的，看起来像这样。

```
<td><a href='' onClick="showDiv(14)">Show the div</a></td> 
```

（14 是 DIV 所需的行中记录的 ID）

这是我的 showDiv() 函数

```
function showDiv(id){

// get the mouse coordinates of the link
var mouseX;
var mouseY;

$(document).mousemove( function(e) {
   mouseX = e.pageX; 
   mouseY = e.pageY;
   $('#myDiv').show().css({'top':mouseY,'left':mouseX});
});  
} 
```

这在执行时显示了我的 DIV，但不是相对的。我觉得我这里有点跑题了，JS不是我的强项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:25:15.130

您的代码存在一些问题：

```
<a href="showDiv(14)"> 
```

不要那样做。如果有的话，应该是`javascript:showDiv(14)`。您应该使用该`onclick`属性或使用 jQuery 的[`.click()`](http://api.jquery.com/click/)事件来执行此操作。你也没有结束`<a>`标签。

```
<td><a href='' onClick="showDiv(14)">Show the div</td> 
```

应该

```
<td><a href="#" onClick="showDiv(14)">Show the div</a></td> 
```

另一个问题：`$('##myDiv')`应该是`$('#myDiv')`.

**解决方案：**

首先，div 必须绝对定位。

```
#myDiv {
    position: absolute;
}​ 
```

这是您可以为其指定位置的特定 X 和 Y 坐标的唯一方法。

我还将您的链接更改为

```
<a href='#' class="showTooltip">Show the div</a> 
```

所以我可以简单地使用 jQuery 绑定到`showTooltip`该类的所有链接的单击事件。

最后是jQuery：

```
$(".showTooltip").click(function() {
    var left = $(this).position().left;
    var top = $(this).position().top;
    $('#myDiv').css({
        top: top + 5 + "px",
        left: left + 5 + "px"
    }).show();

}); 
```

`$(this)`指的是被点击的元素。我能够得到它的位置，然后`myDiv`像你一样设置 's 的位置。我还在`5px`顶部和左侧添加了额外的内容，只是为了向您展示如何抵消它。

[演示](http://jsfiddle.net/gUy3h/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T23:44:23.410

我已经着手制作[了一个 jsFiddle](http://jsfiddle.net/6XN8D/)来解决您的问题。

关键是将你的函数绑定到点击处理程序：

**Javascript**

```
$("selector to your element").click(function(e) {
   mouseX = e.pageX;
   mouseY = e.pageY;

  $("#myDiv").show().css({'top':mouseY,'left':mouseX});
}); 
```

同样如小提琴中所述，div 应隐藏`display:none;`

我继续自己扩展了一点，因为也许您想通过再次单击链接来隐藏 div？你可以在这个[fiddle](http://jsfiddle.net/hXm37/1/)中找到它。

# mysql - 解读mysql查询日志

> ID：11110866
> 
> 赞同：3
> 
> 时间：2012-06-19T23:22:16.987
> 
> 标签：mysql

具有以下内容：

`select * from mysql.general_log order by event_time desc`

为什么它会如此频繁地显示“拒绝访问”？似乎它每隔两秒左右就会尝试这样做。这是一个错误还是为什么会发生这种情况？这是什么意思？

```
| user_host                 | thread_id | server_id | command_type | argument                                                          |
+---------------------------+-----------+-----------+--------------+-------------------------------------------------------------------+
| root[root] @ localhost [] |       122 |         0 | Query        | select * from mysql.general_log order by event_time desc          |
| [] @ localhost []         |       223 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       223 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       222 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       222 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       221 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       221 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       220 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       220 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       219 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       219 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       218 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       218 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       217 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       217 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       216 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) |
| [dave] @ localhost []  |       216 |         0 | Connect      | dave@localhost as  on                                          |
| [] @ localhost []         |       215 |         0 | Connect      | Access denied for user 'dave'@'localhost' (using password: NO) | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:46:35.547

正如错误消息所显示的那样，有些东西正在尝试以 dave 身份从您的本地计算机连接到您的服务器，而无需使用密码。我假设 dave 帐户不存在，存在但仅限于 IP 或存在密码。

如果是复制，你不会看到`'dave'@'localhost'`被拒绝访问，它会是`'dave'@'someotherserver'`（除非你有两个 mysql 进程在同一台服务器上运行）。

如果这是常规的事情，那么我会先看看`cron`；查看是否有任何东西定期尝试连接到 MySQL。

# gwt - IMenuButton (SmartGWT) 中的图标未正确呈现

> ID：11110869
> 
> 赞同：0
> 
> 时间：2012-06-19T23:22:31.657
> 
> 标签：gwt, button, smartgwt

请帮我看看我的简单测试用例：

```
import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.RootPanel;
import com.smartgwt.client.widgets.menu.IMenuButton;
import com.smartgwt.client.widgets.menu.Menu;
import com.smartgwt.client.widgets.menu.MenuItem;

public class Test1 implements EntryPoint {

    private static final int MENU_ICON_SIZE = 50;

    public void onModuleLoad() {

        // HLayout buttonLayout = new HLayout();
        //
        // IconButton printButton = new IconButton("");
        // printButton.setIcon("icons/16/print.png");
        // printButton.setIconSize(MENU_ICON_SIZE);

        Menu menu = new Menu();
        menu.setShowShadow(true);
        menu.setShadowDepth(10);

        MenuItem csvExport = new MenuItem("Export as CSV",
                "icons/16/csv_file.png");
        MenuItem pdfExport = new MenuItem("Export as PDF",
                "icons/16/pdf_file.png");
        MenuItem xmlExport = new MenuItem("Export as XML",
                "icons/16/xml_file.png");
        MenuItem jsonExport = new MenuItem("Export as JSON",
                "icons/16/json_file.png");

        csvExport.setIconWidth(MENU_ICON_SIZE);
        pdfExport.setIconWidth(MENU_ICON_SIZE);
        xmlExport.setIconWidth(MENU_ICON_SIZE);
        jsonExport.setIconWidth(MENU_ICON_SIZE);

        csvExport.setIconHeight(MENU_ICON_SIZE);
        pdfExport.setIconHeight(MENU_ICON_SIZE);
        xmlExport.setIconHeight(MENU_ICON_SIZE);
        jsonExport.setIconHeight(MENU_ICON_SIZE);

        menu.setItems(csvExport, pdfExport, xmlExport, jsonExport);

        IMenuButton exportButton = new IMenuButton("", menu);
        exportButton.setIcon("icons/16/download.png");
        exportButton.setIconSize(MENU_ICON_SIZE);

        // buttonLayout.setMembers(printButton, exportButton);
        //
        // RootPanel.get().add(buttonLayout);

        RootPanel.get().add(exportButton);
    }
} 
```

该图标未显示，我只能看到菜单下拉菜单的小三角形。同样的问题也适用`MenuButton`。

但是，如果我从 切换`IMenuButton`到`IconMenuButton`，图标可以正确显示，但问题是用户必须单击小三角形才能查看菜单，而不是整个按钮，这对我来说不太友好。

有人对此有想法吗？

任何意见或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T13:49:23.640

此问题已在[智能客户端论坛](http://forums.smartclient.com/showthread.php?p=88089&posted=1#post88089)中得到解答。

# android - Opengl es旋转导致矩形拉伸

> ID：11110872
> 
> 赞同：0
> 
> 时间：2012-06-19T23:22:54.750
> 
> 标签：android, opengl-es, transformation

我正在做一个使用缩放/平移/旋转的项目。我知道我需要先旋转（转换列表的底部）我目前正在推动每个对象绘制和弹出矩阵之后。这是在我创建的 draw() 方法中完成的。我已经测试了系统地删除对象的绘图，并且不使用除了旋转相关对象之外的变换。

这是我的问题。当我将对象旋转 0/360 度时，它是一个完美的正方形，当它旋转时，它会在 270 度（直接向下 x 轴）沿 x 轴延伸更长的时间（如果你跟着我，仍然保持矩形的属性）拉伸达到它的最高点......它将直接拉伸到它所面对的角度。在重新旋转之前，我将原点设置为 0,0。

我想知道这个问题是否是一个常见的新手错误，按预期工作并且我需要补偿，或者我的代码存在我在几个小时的研究和挖掘中找不到的缺陷。如果需要，我会发布代码，但我认为由于性质和我已经完成的检查，它可能需要相当多的空间。

任何投入将不胜感激。

提前致谢！

我更改了图像，以便我可以看到更多正在发生的事情。它似乎没有按照我的意图旋转，所以这可能是所有这一切的原因。

固定角度后，我注意到斜率是从/到的地方是关闭的。我假设我的观点有问题。

# ruby-on-rails - rspec 测试中的奇怪行为

> ID：11110874
> 
> 赞同：1
> 
> 时间：2012-06-19T23:23:06.310
> 
> 标签：ruby-on-rails, rspec

我正在用我的 RoR 应用程序编写测试。我的 static_pages_spec.rb

```
 # encoding: utf-8

require 'spec_helper'

describe "Static pages" do

  subject { page }

  describe "Home page" do
    before { visit root_path }

    it { should have_selector('h1',    text: 'Giripedia') }
    it { should have_selector('title', text: full_title('')) }
    it { should_not have_selector 'title', text: '| Home' }
  end

  describe "Help page" do
    before { visit help_path }

    it { should have_selector('h1',    text: 'Yardım') }
    it { should have_selector('title', text: full_title('Help')) }
  end

  describe "About page" do
    before { visit about_path }

    it { should have_selector('h1',    text: 'Hakkımızda') }
    it { should have_selector('title', text: full_title('About Us')) }
  end

  describe "Contact page" do
    before { visit contact_path }

    it { should have_selector('h1',    text: 'İletişim') }
    it { should have_selector('title', text: full_title('Contact')) }
  end
end 
```

在我的 spec/support/utilites.rb 文件中

```
def full_title(page_title)
  base_title = "Ruby on Rails Tutorial Sample App"
  if page_title.empty?
    base_title
  else
    "#{base_title} | #{page_title}"
  end
end 
```

如果我更改 base_title = "Giripedia forum"。测试失败并给我错误：

```
1) Static pages Home page 
     Failure/Error: it { should have_selector('title', text: full_title('')) }
       expected css "title" with text "Giripedia forum" to return something
     # ./spec/requests/static_pages_spec.rb:13:in `block (3 levels) in <top (required)>'

  2) Static pages Help page 
     Failure/Error: it { should have_selector('title', text: full_title('Help')) }
       expected css "title" with text "Giripedia forum | Help" to return something
     # ./spec/requests/static_pages_spec.rb:21:in `block (3 levels) in <top (required)>'

  3) Static pages About page 
     Failure/Error: it { should have_selector('title', text: full_title('About Us')) }
       expected css "title" with text "Giripedia forum | About Us" to return something
     # ./spec/requests/static_pages_spec.rb:28:in `block (3 levels) in <top (required)>'

  4) Static pages Contact page 
     Failure/Error: it { should have_selector('title', text: full_title('Contact')) }
       expected css "title" with text "Giripedia forum | Contact" to return something
     # ./spec/requests/static_pages_spec.rb:35:in `block (3 levels) in <top (required)>' 
```

为什么 base_title 的更改在测试中开始失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:41:22.263

我可以设法在这里找到我的错误。可能这会帮助其他人。

我只更改了规范文件中的 base_title。但是我应该更改属于经过测试的应用程序/帮助程序的 base_title。

我知道，我应该好好阅读测试日志。

# asp.net - ASP.NET outputCache、varyByParam、varyByHeader 和 AJAX

> ID：11110875
> 
> 赞同：3
> 
> 时间：2012-06-19T23:23:08.457
> 
> 标签：asp.net, ajax, outputcache

我正在为我的所有 Umbraco v4 页面使用输出缓存，但希望避免对任何 Ajax 调用进行此类缓存...

我在 default.aspx 中添加了这一行：

```
<%@OutputCache CacheProfile="umbProfil" %> 
```

然后，在 web.config 中：

```
<caching>
  <outputCacheSettings>
    <outputCacheProfiles>
      <add name="umbProfil" duration="120" enabled="true" varyByHeader="???"
           varyByParam="umbPage" location="ServerAndClient" />
    </outputCacheProfiles>
  </outputCacheSettings>
</caching> 
```

现在的问题是所有内容都被缓存了，包括我的 Ajax 调用，这实际上不应该是：它们主要是表单，并且在缓存过期之前使用初始值维护字段条目......

让您知道，这些 Ajax 是“部分视图”，即仅呈现某些表单的 Umbraco 常规页面......

我应该如何设置 varyByHeader 参数，以便实际缓存与 umbPage 相关的所有内容，除了 Ajax GET/POST 调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:28:04.527

由于我在每个表单上都使用了防伪隐藏文本字段，因此我最终将此表单参数用作可变参数。

```
<add name="umbProfil" duration="120" enabled="true"
               varyByParam="umbPage;__RequestVerificationToken" location="ServerAndClient" /> 
```

它似乎运行良好，我的 umbPage 被缓存，而我的表单 POST 没有（或者至少是为每个 POST 和 120 秒创建一个缓存实例）。

如果你们有更好的主意（任何 POST 都没有缓存），请指教。

# jquery - 使用 jQuery.ajax() 保存匿名 github 要点

> ID：11110880
> 
> 赞同：5
> 
> 时间：2012-06-19T23:23:49.073
> 
> 标签：jquery, github, github-api, gist

我无法将`jQuery.ajax()`要点发布到 Github。要点已创建，响应为`201 Created`，但 Firebug 中的响应选项卡为空，并命中错误回调。

```
 var data = {
    "description": "posting gist test",
    "public": true,
    "files": {
      "test.txt": {
        "content": "hello gist!"
      }
    }
  }
  $.ajax({
    url: 'https://api.github.com/gists',
    type: 'POST',
    dataType: 'json',
    data: JSON.stringify(data)
  })
  .success( function(e) {
    console.log(e);
  })
  .error( function(e) {
    console.warn("gist save error", e);
  }); 
```

令人沮丧的是，它在 jsfiddle 中运行良好：http: [//jsfiddle.net/vXpCV/](http://jsfiddle.net/vXpCV/)

* * *

也许这就是问题所在。jsFiddle 得到不同的响应头：

```
Access-Control-Allow-Cred...    true
Access-Control-Allow-Orig...    http://fiddle.jshell.net
Access-Control-Expose-Hea...    Link, X-RateLimit-Limit, X-RateLimit-Remaining, X-OAuth-Scopes, X-Accepted-OAuth-Scopes
Connection  keep-alive
Content-Length  1093
Content-Type    application/json; charset=utf-8
... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-15T19:44:43.880

Forresto 自己的回答是完全有效的：

> 将我的[http://local.dev/](http://local.dev/)添加到[https://github.com/settings/applications](https://github.com/settings/applications)似乎可以解决它。

...但是只要在搜索 Gist+jQuery 时出现这个答案，它就应该对正在发生的事情进行解释。

浏览器有一个名为[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)的安全问题。它禁止网页与加载该页面的服务器以外的服务器进行通信，因此这基本上不应该工作。有一种称为[JSONP](http://en.wikipedia.org/wiki/JSONP)的解决方法，但它仅适用于 GET 请求，而此示例具有 POST。

然后是这种称为[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)(CORS) 的新技术。它允许在现代浏览器中打开的页面使用良好的旧 AJAX 与其他服务器通信。

GitHub API[仅接受](http://developer.github.com/v3/#cross-origin-resource-sharing)来自在 GitHub 上注册为 OAuth 应用程序的域的 CORS 请求。当 jQuery 发送一个 POST 请求时，它会将`Origin`HTTP 标头设置为与其启动站点相同的域。

`Origin`但我应该说，对我来说，即使有一个乱七八糟的标题，剪断也能解决问题。它起作用了，我不知道为什么。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:27:38.307

将我添加`http://local.dev/`到[https://github.com/settings/applications](https://github.com/settings/applications)似乎可以解决它。

# php - 如何从 PHP 数组中检索值？

> ID：11110885
> 
> 赞同：1
> 
> 时间：2012-06-19T23:24:27.080
> 
> 标签：php, javascript

我有一个存储在 PHP 文件中的数组，其中存储了所有值。

我正在尝试在 JavaScript 中遍历整个数组。我该怎么做？

以下不起作用：

```
var index = 0;
var info = 1;

while(index<4) {
    info = <?php echo $a[?>index<?php];?>
    index++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T23:29:06.410

您可以将数组从 php 复制到 JavaScript，然后对其进行处理。

```
var array = <?php echo json_encode($a); ?>
var index = 0;
var info = 1;

while(index<4) {
    info = array[index];
    index++;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:29:48.967

我不知道您使用的是什么版本的 php，但请尝试以下操作：

```
var info = null;
var a = <?php echo json_encode($a); ?>;

for(var index=0;index<a.length;index++) {
    info = a[index];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:29:26.743

您需要先将 PHP 处理成 Javascript。您可以使用 json_encode 来执行此操作。

```
var index = 0;
var info = 1;
var a = <?php echo json_encode($a); ?>;

while(index < 4) {
    info = a[index];
    index++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T23:30:52.633

PHP 在将最终页面提供给客户端之前在服务器端运行。Javascript 在客户端（在浏览器上）运行。因此，你想要达到的目标是行不通的。您可以做的是使用 PHP 动态打印 javascript 代码。

# python - 我应该将 setup.py 生成的 MANIFEST 文件置于版本控制之下吗？

> ID：11110889
> 
> 赞同：6
> 
> 时间：2012-06-19T23:25:23.833
> 
> 标签：python, pypi

当我维护和分发 Python 包时，我应该保留命令的 MANIFEST 文件吗？

```
python setup.py sdist 
```

在版本控制下生成，还是应该将其添加到 .gitignore？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T01:51:18.437

该文件是根据一些常用的想法生成的，这些想法包括哪些文件要包含在源代码分发中。如果它不存在，它可以很容易地重新生成。通常，如果您想进行更改（例如，添加默认情况下生成不包含的文件），您实际上是对[MANIFEST.in 文件](http://docs.python.org/distutils/sourcedist.html?#manifest-template)进行更改。您应该对 Manifest.in 文件进行版本控制。

当然，在某些情况下，您可能希望自己创建 MANIFEST 文件，而根本不依赖自动生成。在这些情况下，您需要对清单文件进行版本控制。

我没有遇到任何需要对其进行版本控制的情况，但您可能希望将问题留待其他评论，因为我也没有太多关于更精细的包构建的经验。

# facebook-graph-api - 如何以编程方式获取 FB 令牌，以便我可以通过脚本运行 Graph API 请求？

> ID：11110893
> 
> 赞同：0
> 
> 时间：2012-06-19T23:25:51.243
> 
> 标签：facebook-graph-api, cron, server-side, access-token

**事实：**

我正在举办一场 FB 比赛，用户只需点赞一个特定的帖子即可参与绘画。

我可以`$postid/likes`在使用 Graph API Explorer 生成的令牌时调用 Graph API Explorer 并接收正确的信息。这是一个简单的结果，包含用户 ID/姓名对，这就是我生成随机获胜者所需的全部内容。

我正在运行一个每日 cron 来收集帖子的所有新点赞并将它们放入数据库中，以便我可以跟踪参赛者的数量并轻松地从池中选出获胜者。*如果我从上面的 Graph API Explorer 调用中复制出令牌并将其插入到脚本中，该脚本就可以工作，并且我会得到预期的数据。*

**问题：**

由于上面的脚本在我从 Graph API Explorer 复制活动临时令牌时有效，我不应该能够以编程方式执行此操作吗？当我的日常 cron 运行（无用户交互）以获得新的、有效的、未过期的令牌时，我无法弄清楚我应该如何进行身份验证。由于这是从服务器运行的 cron，我显然无法通过用户对话框进行身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:48:59.757

您可以创建一个应用程序，然后[作为该应用程序进行身份验证](https://developers.facebook.com/docs/authentication/applications/)。授予应用程序的访问令牌不会过期，因此您可以将其编码到您的 cron 作业中。

小心行事。您的比赛似乎违反了 Facebook[促销准则](https://www.facebook.com/page_guidelines.php#promotionsguidelines)：

> 您不得以用户喜欢墙帖为条件注册或进入。

# python - csv文件比较差异

> ID：11110898
> 
> 赞同：-1
> 
> 时间：2012-06-19T23:26:37.230
> 
> 标签：python, csv

我有两个 csv 文件 ( ) 我可以让它打印出列表，其中包含从 csv 文件中汇总的总数。我使用这个代码：

```
 import csv 
 import difflib

 file  = open('test1.csv',"rb") #Open CSV File in Read Mode 
 reader = csv.reader(file)      #Create reader object which iterates over lines 

 class Object:                   #Object to store unique data 
  def __init__(self, name, produce, amount): 
    self.name = name 
    self.produce = produce 
    self.amount = amount 

 rownum = 0 #Row Number currently iterating over 
 list = []  #List to store objects 

 def checkList(name, produce, amount): 

 for object in list:  #Iterate through list         
    if object.name == name and object.produce == produce:  #Check if name and produce        combination exists 
        object.amount += int(amount) #If it does add to amount variable and break out 
        return 

newObject = Object(name, produce, int(amount)) #Create a new object with new name, produce, and amount 
list.append(newObject)  #Add to list and break out 

 for row in reader:  #Iterate through all the rows 
  if rownum == 0:  #Store header row seperately to not get confused 
    header = row 
else: 
    name = row[0]  #Store name 
    produce = row[1]  #Store produce 
    amount = row[2]  #Store amount 

    if len(list) == 0:  #Default case if list = 0 
        newObject = Object(name, produce, int(amount)) 
        list.append(newObject) 
    else:  #If not... 
        checkList(name, produce, amount) 

rownum += 1 

 for each in list: 
  file1 =  each.name, each.produce, each.amount #END OF FILE 1

 file  = open('test2.csv',"rb") #Open CSV File in Read Mode 
 reader = csv.reader(file)      #Create reader object which iterates over lines 

 class Object:                   #Object to store unique data 
  def __init__(self, name, produce, amount): 
    self.name = name 
    self.produce = produce 
    self.amount = amount 

 rownum = 0 #Row Number currently iterating over 
 list = []  #List to store objects 

 def checkList(name, produce, amount): 

  for object in list:  #Iterate through list         
    if object.name == name and object.produce == produce:  #Check if name and produce    combination exists 
        object.amount += int(amount) #If it does add to amount variable and break out 
        return 

newObject = Object(name, produce, int(amount)) #Create a new object with new name, produce, and amount 
list.append(newObject)  #Add to list and break out 

 for row in reader:  #Iterate through all the rows 
  if rownum == 0:  #Store header row seperately to not get confused 
    header = row 
else: 
    name = row[0]  #Store name 
    produce = row[1]  #Store produce 
    amount = row[2]  #Store amount 

    if len(list) == 0:  #Default case if list = 0 
        newObject = Object(name, produce, int(amount)) 
        list.append(newObject) 
    else:  #If not... 
        checkList(name, produce, amount) 

rownum += 1 

 for each in list: 
   file2 = each.name, each.produce, each.amount #END OF FILE 2 
```

所有这一切都很好，我提供它只是为了让你可以看到我在做什么。

所以现在我需要了解我创建的两个新文件之间的区别。这就是我卡住的地方；我试过这个但没有运气

```
 diff=difflib.ndiff('file1',"rb"), ('file2',"rb")
 try:
    while 1:
        print diff.next(),

 except:
     pass 
```

我需要生成两个新文件之间的差异，以便我可以看到任何建议的差异？当我运行它时，我没有收到任何错误，但没有输出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:05:17.513

编辑：鉴于您[之前的问题](https://stackoverflow.com/questions/11110253/difflib-python-formating)，您似乎应该已经知道出了什么问题。

首先，您需要使用正确数量的括号。

```
diff = difflib.ndiff(('file1', 'rb'), ('file2', 'rb')) 
```

但这仍然是不正确的，因为[difflib.ndiff](http://docs.python.org/library/difflib.html#difflib.ndiff)需要两个字符串列表，而不是未打开文件的名称和模式。您需要将文件的内容读入行列表。

```
a = open('file1', 'rb').read().splitlines()
b = open('file2', 'rb').read().splitlines()

for diff in difflib.ndiff(a, b):
    print diff 
```

# php - mysql更新使用来自post数组的每个循环

> ID：11110899
> 
> 赞同：0
> 
> 时间：2012-06-19T23:26:39.327
> 
> 标签：php, arrays, post

对不起我令人困惑的问题。让我重新表述一下细节：

```
$query = "SELECT * FROM table";

sample data:

Item Name:     Quantity:
Coke           2
Pepsi          3
Gatorade       4     

<form action="exec.php" method="POST">
<input type="hidden" name="item_name" value="<?php for each loop goes here?/>"
<input type="hidden" name="quantity" value="<?php for each loop goes here?/>"
<input type="submit" name="submit"/>
</form> 
```

现在，在我的 exec.php 页面中。

if(isset($_POST['submit'])){

$item_code =$_POST['item_code'];
$数量 =$_POST['数量'];

$test=explode('\n',$item_code);
$test2 = explode('\t',$quantity);

这部分是我的问题所在。这是我的更新查询：

foreach($item as $test){
$update = "UPDATE table SET quantity='$quantity' WHERE item_code='$item_code'"
}
}

如您所见，$quantity 将被忽略，因为它还需要循环以匹配 $item_code。

还是有更好的方法来做到这一点？

我对php很陌生，所以如果我做错了，请原谅我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:51:07.787

我不明白，您在读取数据时遇到问题`MySQL`吗？您在更新数据时遇到问题`MySQL`吗？无论如何，您似乎是在引用一个`SQL`问题而不是`HTML`or `PHP`，您可以发布您的`SQL`脚本吗？

# c# - C# - 带有 if 语句的 Foreach 循环

> ID：11110900
> 
> 赞同：5
> 
> 时间：2012-06-19T23:26:43.587
> 
> 标签：c#, if-statement, foreach

如果“if”语句为真，我该怎么做才能跳过foreach循环下面的代码并继续执行程序的其余部分

```
void()
{
    foreach()
    {
        if()
        {

        }
    }

    //code I want to skip if "if" statement is true

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T23:33:51.963

没有办法直接做你想做的事（没有“goto”标签——别想了！），但你可以使用“break”关键字，并设置一个稍后可以参考的变量。

```
void()
{
    var testWasTrue = false;
    foreach()
    {
        if()
        {
            testWasTrue = true;
            break;  // break out of the "foreach"
        }
    }

    if( !testWasTrue ) {
        //code I want to skip if "if" statement is true
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T01:40:40.343

我知道这已经得到解答，但我想我会投入 2 美分，因为没有人考虑将支票抽象为单独的方法：

```
void()
{
    if (ShouldDoStuff(myCollection))
        DoStuff(myCollection);
    else
        DoOtherStuff(myCollection);
}

private bool ShouldDoStuff(collection)
{
    foreach()
    {
        if ()
            return true;
    }
    return false;
} 
```

这在更高级别提供了更清晰的代码来处理您的算法，并消除了讨论的所有混乱。它将检查和执行动作的任务清晰地分开`void()`，读者可以立即确切地知道程序流程是什么，而无需通过潜伏的布尔或中断逻辑来辨别他们在做什么。没有一种方法具有超过一项职责或任务。

是的，发帖人可能想在他们的 foreach 中做其他工作，但这是一个完全不同的讨论，而不是他们问题中描述的内容。如果您只是想检查给定的集合（或对象）是否满足某个条件，则可以将该检查移至单独的方法。甚至为所有三个组件的自动化单元测试敞开大门。

即使`DoStuff`并`DoOtherStuff`没有抽象为它们自己的方法，它也提供了更好的可读性和逻辑流程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:33:04.490

'break' 关键字将跳出循环。

```
foreach (someClass a in someArray) 
{
  if(a.someProperty) // bool property 
  {
    //Stuff to do if that condition is true
    doSomethingElse();
    //Calling the break keyword will stop the loop and jump immediately outside of it
    break;
  }
  //Other code to run for each iteration of the loop
}

//Here is where execution will pick up either after break is called or after the loop finishes 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T23:36:13.507

```
void()
{
     bool process = true;
     foreach()
     {
          if()
          {
              process = false;
              break;
          }
     }

     if (process)
     {
       //code I want to skip if "if" statement is true
     }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T23:38:20.293

正如我在评论中提到的，您可以通过额外的 bool 变量来做到这一点。

```
void()
    {
        bool positiveResult; // by default it gets false value
        foreach()
        {
            if()
            {
                positiveResult = true;
                // you may use "break" to skip the loop
                break;
            }
        }

        if( !positiveResult  ) 
         {
            //code I want to skip if "if" statement is true
         }

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T23:31:33.357

```
void() 
{ 
    bool skip = false;
    foreach() 
    { 
        if() 
        { 
           skip = true;
        } 
    } 

    if(!skip)
    {
        //code I want to skip if "if" statement is true 
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T23:34:04.163

只有我知道布尔标志是怎样的。

```
void()
{
  bool x = false;
  foreach()
  {
    if()
    {
      x = true;
      break;
    }
  }
  if(!x)
  {
    //Code to skip if "if" statement is true.
  }
} 
```

不是超级优雅，但很容易。编辑：节拍 12 秒 :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-30T15:58:04.843

如果您正在迭代的集合包含 IEnumerable 接口，您可以将 Any() 与 Lambda 一起使用！

```
int[] myArray = { 1, 2, 3 };

                if( myArray.Any((a) => a == 1) )
                {
                    return;
                } 
```

读取：如果我的数组包含任何值 a ，其中 a 等于 1，则从该函数返回。

另外，如果你想让它更难阅读，你可以省略花括号/方括号。

```
if( myArray.Any((a) => a == 1) )
     return; 
```

# asp.net - ASP.NET 按钮不呈现 ID - Sharepoint Web 部件

> ID：11110901
> 
> 赞同：1
> 
> 时间：2012-06-19T23:26:59.243
> 
> 标签：asp.net, .net, sharepoint, button, web-parts

我有一个共享点 Web 部件，我在其中以编程方式向页面添加一个按钮。当按钮呈现时，它没有名称或 ID。我在 Web 部件后面的代码中执行以下操作：

```
public class ChartControl : WebPart
{
    protected Button BubbleChartApplyButton;

    protected override void CreateChildControls()
    {
        BubbleChartApplyButton = new Button {Text = "Apply This"};
    }

    protected override void RenderWebPart(HtmlTextWriter output)
    {
        BubbleChartApplyButton.RenderControl(output);
    }
} 
```

这就是渲染的内容：

```
 <div WebPartID="4844c2e5-2dd5-437b-a879-90c2e1e21f69" HasPers="false" id="WebPartWPQ2" width="100%" class="ms-WPBody ms-wpContentDivSpace" allowDelete="false" style="" >
         <input type="submit" value="Apply This" />

...more output here...
</div> 
```

请注意输入标签是如何以没有名称和没有 ID 的方式呈现的......我希望看到类似 ID="ctl00$m$g_2d506746_d91e_4508_8cc4_649e463e1537$ctl13" 之类的东西。

关于为什么按钮控件不使用 .NET 通常生成的名称和 ID 呈现的任何想法？

谢谢，

瑞安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:48:56.817

呃，这是我忽略的一件简单的事情。因此，我正在创建控件并将其呈现到输出中，以便在呈现页面时显示出来。但是，为了将其拨入控制树以便 ASP.NET 分配 ID，并且我可以将其连接到事件处理程序，我必须专门将其添加到控制树。

所以我还需要这样做：

```
protected override void CreateChildControls()
{
    BubbleChartApplyButton = new Button {Text = "Apply This"};

    Controls.Add(BubbleChartApplyButton) //<== ADD TO THE CONTROL TREE BEAVIS!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:32:16.297

您是否尝试过类似的方法：

```
BubbleChartApplyButton = new Button {Text = "Apply This", ID = "myButtonID"}; 
```

# java - 游戏开发：通过网站“立即玩”与下载和安装

> ID：11110902
> 
> 赞同：0
> 
> 时间：2012-06-19T23:27:02.040
> 
> 标签：java, python, flash

我花了一些时间查看 stackoverflow 上的各种线程，虽然我看到了很多关于可用于游戏开发的各种引擎的帖子和线程，但我还没有看到很多关于它们可以使用的各种平台的讨论上使用。

特别是，我在谈论浏览器游戏与桌面游戏。

我想开发一个简单的 3D 网络多人游戏 - 大致在纸片马里奥的图形级别和游戏玩法上，与黑客和斜线动作/冒险游戏的交互水平大致相同 - 我很难决定我在哪个平台上想以它为目标。我有一些使用 C++/Ogre3D 和 Python/Panda3D 的经验，但我想知道是否值得花额外的时间学习另一种语言和另一种引擎/工具包，以便可以在浏览器窗口中玩游戏（我现在正在看 jMonkeyEngine）。

对于简单和简短的游戏，newgrounds 方法（去网站，点击“立即玩”，即时满足）似乎运作良好。对于更复杂的游戏呢？游戏的复杂性是否足以让人们说“好的，我要下载并玩”？是否值得使用不成熟、文档较少、功能较少和社区较小的引擎*，以便可以接触到（可能？）更多的受众？有没有人有过这样的决定的经验？

谢谢！

(* 除了基于 Flash 的引擎之外，与基于桌面的环境相比，大多数其他方法似乎都有这些缺点。我会使用 Flash，但我担心 Flash 的 3D 功能'现在还不够成熟，无法轻松地做我想做的事）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T05:05:56.067

下载和安装更难卖。人们更不愿意这样做，一旦他们这样做了，你就有了平台兼容性的问题，并且你已经安装了代码来更新或避免随着游戏的发展。

Java 小程序消除了所有这些混乱。想必也是flash或者html5。

# mysql - MySQL中的`COUNT(*)`和`COUNT(date_created)`之间有区别吗

> ID：11110903
> 
> 赞同：0
> 
> 时间：2012-06-19T23:27:04.557
> 
> 标签：mysql, performance

`COUNT(*)`我想知道使用和之间是否存在性能差异`COUNT(date_created)`。我读过唯一的语义差异是`COUNT(*)`它还包括`NULL`值，但是`date_created`在这种特定情况下该字段不可为空。

我查看了各种帖子，但没有一个真正回答 MySQL 的这个问题。我发现的最好的是@tsilb 在[这个线程](https://stackoverflow.com/questions/59294/in-sql-whats-the-difference-between-countcolumn-and-count)上的评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:29:26.830

Count(*) 更快，因为它不需要检查字段。

Count(column_name) 需要表扫描，除非该列已被索引。

Count(*) 可以只看主键索引。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T23:31:32.453

如果您在 上有一个索引`date_created`，则不会有任何区别。如果它是未索引的列，您最终将进行全表扫描。当您有这样的问题时，您可以通过`EXPLAIN SELECT COUNT(*) FROM my_table`将其与`EXPLAIN SELECT COUNT(date_created) FROM my_table`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:29:04.150

尝试使用`COUNT(*)`，因为 dbms 确定使用哪个索引以获得最佳性能。

# 3d - 在后期处理中模糊某个点周围所有内容的最快方法

> ID：11110905
> 
> 赞同：0
> 
> 时间：2012-06-19T23:27:26.747
> 
> 标签：3d, shader, blur, render-to-texture

我正在使用 Ogre3D 和它的合成器。

基本上，我想知道在视口中模糊动态点周围的一切的最快方法是什么。该点由 2D 屏幕坐标给出。像素离该点越远，它应该越模糊。为了让您了解它应该有多少模糊，如果模糊点正好在屏幕的中间，则边缘应该最大程度地模糊。所以像素的模糊系数可以认为是

MIN ( (normalizedDistanceBetween(pixel, blurringPoint)/0.5), 1.0 )

所以我假设正确的方法是首先使用着色器制作完全模糊的场景版本。那部分我已经有了。

现在，如何将这个模糊的图像与原始场景混合？我看到两种方法：

1.  将原始版本和模糊版本输入到合成着色器中，让它计算距离和上面公式的结果，使用结果进行混合。
2.  设置一个额外的渲染到纹理通道，它将使用上面的公式来渲染“混合纹理”。关键是混合纹理可以比屏幕小很多，甚至可能是16x16，结果不会有太大差异。然后，将原始场景、模糊版本和混合纹理输入到最终的合成着色器，它会简单地从混合纹理中为每个像素采样一个值，并使用该值将 2 个场景版本混合在一起。

第二种方法有意义吗？它会比第一个有明显的性能提升吗？（甚至几 fps？）或者创建一个额外的 RTT 通道和纹理是否会通过不为每个输出像素计算（相当简单的）距离函数来降低所有性能？我假设屏幕尺寸是正常的，例如 1024x768，即比 16x16 混合纹理大得多。或者还有其他更简单的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:22:42.547

任何一个版本都可能具有性能优势。除非你做的事情特别低效，否则这两种方式都应该相当快。

如果你真的很关心它，你应该同时实现它们，并对它们进行基准测试。

* * *

如果您还没有这样做，您可以通过以半分辨率生成模糊缓冲区来加快效果。这需要一个良好的重采样滤波器以避免在读取原始场景时出现混叠（我建议至少使用 [1,3,3,1] 高斯，并且可能更宽，例如 [1,5,10,10,5,1]） .

事实上，如果你想要一个特别宽的最大模糊，你可以重复这个过程，生成一个多分辨率图像金字塔。（一旦你对原始文件进行了下采样，一切都会变得更便宜，因为半分辨率意味着 1/4 像素）

* * *

另一个可能的加速（同样，如果您还没有尝试过）：由于您的合成器正在与您的原始图像进行直接的 alpha 混合，因此它实际上不需要对其进行采样。相反，您可以输出一个 Alpha 通道，渲染到原始缓冲区，然后使用光栅化器功能进行最终合成。

# ruby - 为什么我在 IRB 和脚本中得到不同的结果？

> ID：11110909
> 
> 赞同：2
> 
> 时间：2012-06-19T23:27:43.357
> 
> 标签：ruby

IRB 和 Ruby 执行某些表达式的方式有区别吗？

这些表达式在 IRB 和从命令行运行时给出不同的结果。问题是，哪一个是正确的？

内部审查委员会：

```
>> s = 'hello'
=> "hello"
>> s.size
>> s[s.length] = '!'
IndexError: index 5 out of string
    from (irb):31:in `[]='
    from (irb):31
>> 
```

在普通脚本中：

```
s = 'hello'
s[s.length] = '!'
puts s

laptop user$ ./prgruby.rb 
hello! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:42:25.343

[这](http://apidock.com/ruby/v1_8_7_72/String/%5B%5D%3D)是`String#[]`for的文档`1.8.7`：

```
str[fixnum] = fixnum 
```

> 如果值超出范围，采用 Fixnum 的表单将引发 IndexError

[这](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D-3D)是相同的文档`1.9.3`：存在相同的定义

经过测试，Ruby 1.9.3 中发生的事情`s.length`并没有超出分配范围。这在字符串的末尾是有意义的：您不必随意填充缺失的索引，但我猜它可能或应该记录在某处？

# android - 从已安装的驱动器播放电影 (Revue/GoogleTV)

> ID：11110910
> 
> 赞同：0
> 
> 时间：2012-06-19T23:27:57.220
> 
> 标签：android, media, google-tv, television

所以我对 Google TV 的编程感兴趣已经有一段时间了，并且刚刚开始涉足它。

我的第一个个人项目是创建一个简单的媒体播放器和文件浏览器，因为默认的媒体播放器太糟糕了。它在 Android 模拟器（版本 12）上完美运行，但是当我将它安装到我的 Google Revue 中时，我发现自己面临两个主要问题。

1) 播放器将始终按字母顺序播放第一部电影，无论选择哪个电影文件（所有格式和路径都正确。URI 加载到 setDataSource/setVideoPath 中）

2）每当我尝试快进一部电影时，它会按字母顺序跳到下一部电影

我在这里使用了来自 android 开发网站的 mediaplayer 和 videoview 示例：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/index.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/index.html) 以及默认的 action_view 意图，但每一个都有完全相同的问题。这部电影将在模拟器上 100% 正常播放，但在 Google Revue 上具有完全不同的默认设置。

有没有人遇到过这个问题或者知道我能做什么/我可以去哪里解决它？

*编辑*

这是我调用活动的代码：

```
Intent intent = new Intent(getBaseContext(), myMediaPlayer.class);
intent.putExtra("PATH_ID", path);
startActivity(intent); 
```

这是我运行 mediaPlayer 的代码。（几乎是网站代码的精确副本）

```
public class myMediaPlayer extends Activity implements
    OnBufferingUpdateListener, OnCompletionListener,
    OnPreparedListener, OnVideoSizeChangedListener, SurfaceHolder.Callback {

private static final String TAG = "MediaPlayerDemo";
private int mVideoWidth;
private int mVideoHeight;
private MediaPlayer mMediaPlayer;
private SurfaceView mPreview;
private SurfaceHolder holder;
private String path;
private String extras;

private boolean mIsVideoSizeKnown = false;
private boolean mIsVideoReadyToBePlayed = false;

/**
 * 
 * Called when the activity is first created.
 */
@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.mediaplayer);
    mPreview = (SurfaceView) findViewById(R.id.surface);
    holder = mPreview.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    extras = getIntent().getExtras().getString("PATH_ID");;

}

private void playVideo(String filePath) {
    doCleanUp();
    try {

        path = filePath;
        // Create a new media player and set the listeners
        mMediaPlayer = new MediaPlayer();
        mMediaPlayer.setDataSource(path);
        mMediaPlayer.setDisplay(holder);
        mMediaPlayer.prepare();
        mMediaPlayer.setOnBufferingUpdateListener(this);
        mMediaPlayer.setOnCompletionListener(this);
        mMediaPlayer.setOnPreparedListener(this);
        mMediaPlayer.setOnVideoSizeChangedListener(this);
        mMediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);

    } catch (Exception e) {
        Log.e(TAG, "error: " + e.getMessage(), e);
    }
}

public void onBufferingUpdate(MediaPlayer arg0, int percent) {
    Log.d(TAG, "onBufferingUpdate percent:" + percent);

}

public void onCompletion(MediaPlayer arg0) {
    Log.d(TAG, "onCompletion called");
}

public void onVideoSizeChanged(MediaPlayer mp, int width, int height) {
    Log.v(TAG, "onVideoSizeChanged called");
    if (width == 0 || height == 0) {
        Log.e(TAG, "invalid video width(" + width + ") or height(" + height + ")");
        return;
    }
    mIsVideoSizeKnown = true;
    mVideoWidth = width;
    mVideoHeight = height;
    if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
        startVideoPlayback();
    }
}

public void onPrepared(MediaPlayer mediaplayer) {
    Log.d(TAG, "onPrepared called");
    mIsVideoReadyToBePlayed = true;
    if (mIsVideoReadyToBePlayed && mIsVideoSizeKnown) {
        startVideoPlayback();
    }
}

public void surfaceChanged(SurfaceHolder surfaceholder, int i, int j, int k) {
    Log.d(TAG, "surfaceChanged called");

}

public void surfaceDestroyed(SurfaceHolder surfaceholder) {
    Log.d(TAG, "surfaceDestroyed called");
}

public void surfaceCreated(SurfaceHolder holder) {
    Log.d(TAG, "surfaceCreated called");
    playVideo(extras);

}

@Override
protected void onPause() {
    super.onPause();
    releaseMediaPlayer();
    doCleanUp();
}

@Override
protected void onDestroy() {
    super.onDestroy();
    releaseMediaPlayer();
    doCleanUp();
}

private void releaseMediaPlayer() {
    if (mMediaPlayer != null) {
        mMediaPlayer.release();
        mMediaPlayer = null;
    }
}

private void doCleanUp() {
    mVideoWidth = 0;
    mVideoHeight = 0;
    mIsVideoReadyToBePlayed = false;
    mIsVideoSizeKnown = false;
}

private void startVideoPlayback() {
    Log.v(TAG, "startVideoPlayback");
    holder.setFixedSize(mVideoWidth, mVideoHeight);
    mMediaPlayer.start();
} 
```

}

作为替代方案，我尝试像这样使用默认播放器：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(aDirectory.getAbsolutePath())), "video/*");
startActivity(intent); 
```

但它总是按字母顺序播放文件夹中的第一个视频，而不是选定的视频

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:26:07.553

关于快速转发，请查看：[https ://developers.google.com/tv/android/docs/gtv_media_keys](https://developers.google.com/tv/android/docs/gtv_media_keys)

对于第一个问题，您可能会发现[https://developers.google.com/tv/android/docs/gtv_displayguide#NavigationFocus](https://developers.google.com/tv/android/docs/gtv_displayguide#NavigationFocus)很有帮助。

# c - C 而非 C++ 中的间接变量访问

> ID：11110912
> 
> 赞同：0
> 
> 时间：2012-06-19T23:28:04.467
> 
> 标签：c

是否可以通过其他变量访问变量值，如下所示

```
char var[30];
char buffer[30];

strcpy(buffer, "ABC");

/*variable var is holding the "buffer" variable name as string*/ 
strcpy(var,"buffer") 
```

有没有办法通过变量 var 访问缓冲区变量值“ABC”。?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:32:42.150

在 C 中没有任何实际的方式，而且你也不想这样做。将程序逻辑与变量名称联系起来是一个可怕的想法。通常我看到人们在他们真正需要的是某种集合类型（以及数组、地图等）时尝试这样做。

如何让我们了解您试图解决的问题？

根据您的评论：

> 我需要动态调试消息，我有一个文件，其中包含我要打印的每个函数变量。

在宏中使用字符串化：

```
#define str(s) #s

int main() {
    int bar;
    str(bar) /* replaced by "bar" */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:32:59.083

并非没有重要的样板代码。变量名在编译时被消除。

理论上，您*可以*存储从变量名到指向变量的指针的映射。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T23:33:31.997

不，你不能。如果您想要间接访问，则声明一个指针并分配`var`给它。

```
char *forVar = var;

// Now you can access/modify via [] operator. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-20T02:14:50.107

所以基本上你想在写入/读取/传递给函数等时记录一些变量？

如前所述，使用已编译的 C 执行此操作很困难，特别是如果您正在优化可执行文件（编译语句上的 -0n），在这种情况下，某些变量可能会完全消失，或者被其他变量重用。

**使用 GDB**

话虽如此，我知道 gdb 可以记录变量访问和类似的东西。如果您要编写 Python 脚本（请参阅[http://sourceware.org/gdb/onlinedocs/gdb/Python.html](http://sourceware.org/gdb/onlinedocs/gdb/Python.html)），您应该能够编写脚本来记录变量内容。

有关更多信息，请参阅此问题：[Do specific action when certain breakpoint hits in gdb](https://stackoverflow.com/questions/6517423/do-specific-action-when-certain-breakpoint-hits-in-gdb)

**仅按需使用，使用预编译器脚本**

或者，如果您只是想按需执行，最好使用预处理脚本添加自定义宏或类似内容，使用 csv 文件作为输入：

```
for each line in CSV:
  read variable_name, file_name, variable_type
  find all occurrences of variable_name in file_name
  for each occurrence
    insert printf(....) 
```

**仅按需使用，使用宏**

祝你好运。没有一个很好的方法可以做到这一点，因为您通常需要某种查找，并且您需要一种有选择地将变量输出到您的打印函数的方法。在某些情况下，您可以执行以下操作：

```
static char _LOGGED_VAR_001 = 'z';
static char _LOGGED_VAR_002 = 'z';

#define cMyVar           _LOGGED_VAR_001
#define LOG_ALL_VARS()   printf("Vals: %c, %c", _LOGGED_VAR_001, _LOGGED_VAR_002)

void myFunc()
{
   char cMyVar; // Gets macro'd to _LOGGED_VAR_001 with LOCAL scope
   cMyVar = 'a'; // LOCAL scope _LOGGED_VAR_001 becomes 'a'
   LOG_ALL_VARS(); // At this point you print out the LOCAL _LOGGED_VAR_001 
                   // and the global _LOGGED_VAR_002
} 
```

你会得到`Vals: a, z`

这非常丑陋，仅适用于具有局部范围的变量，内存消耗混乱，可能容易出错并且通常是一个*坏主意*。

**按需，堆/堆栈转储**

如果您有足够的存储空间，您可以按需将所有内存转储到文件中。这可能不是很便携，这取决于它是如何完成的。我不确定如何以可靠的方式做到这一点。

**推荐**

使用 GDB 进行设计时诊断。这就是它的设计目的:)

对于（例如）分析已发布的代码（自动错误报告），完整转储然后随意分析可能是相关的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T23:32:27.943

您可以尝试使用[工会](http://www.cplusplus.com/doc/tutorial/other_data_types/)

例如：

```
union example {
    char var[40];
    char buffer[40];
} e1;

strcpy(e1.var, "ABC");

printf("%s is same as %s", e1.var, e1.buffer); 
```

# mysql - 如何在 100 行范围内进行 100 万次 Max 计算，结果写入新列？

> ID：11110914
> 
> 赞同：0
> 
> 时间：2012-06-19T23:28:11.293
> 
> 标签：mysql, max

所以我有 1 列和 100 万行数据。我需要计算第 1-100 行的最大值，然后是 2-101、3-102，一直到一百万行。结果会写在该列旁边的空列中。因此，第 1-100 行的最大数量将在第 1 行第 2 列中。第 2-101 行的最大数量写入第 2 行第 2 列。依此类推。

我来自excel，做这种事情非常容易。然而，我需要做的事情对于excel来说太多了。有人告诉我 mysql 将是这类东西的不错选择。很抱歉，如果我似乎根本没有做任何研究，我现在就埋头苦干，但我仍然无法将多个概念放在一起来弄清楚我的东西，所以欢迎指点。不幸的是，这只是我需要/想要做的一小部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:36:26.080

MySQL**不是**电子表格，您不应该像使用它一样尝试使用它。您需要完全重新考虑您的算法并将其调整为在数据库中工作。

对于这种情况，您需要添加一列来定义行的顺序。更改数据模型后，您的查询可能会像这样（不幸的是，它在 MySQL 中不起作用，因为它不支持分析函数）：

```
SELECT MAX(col) OVER (
    ORDER BY id
    ROWS BETWEEN CURRENT ROW AND 99 FOLLOWING
) AS running_maximum
FROM table1 
```

但首先您需要在表格中添加一`id`列。没有它，您的行没有明确定义的顺序，并且谈论行“1-100”没有意义，因为（与 Excel 不同）MySQL 行中没有与之关联的任何行号，除非您为此添加列目的。

# objective-c - 空数组的NSRangeException，除了有一个数组？

> ID：11110915
> 
> 赞同：0
> 
> 时间：2012-06-19T23:28:18.767
> 
> 标签：objective-c, ios, xml, xml-parsing, touchxml

我遇到了这个问题，我在控制台中不断收到此错误：

> *** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSArrayI objectAtIndex:]: index 0 beyond bounds for empty array”

这是我从 XML 文档中检索数据的代码：

> CXMLDocument *worldweather = [[CXMLDocument alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://free.worldweatheronline.com/feed/weather.ashx?q=%@&format=xml&num_of_days=4&key=0ded69e02b171832121504",查询]]选项：0错误：无]；
> 
> weathercondition = [[[worldweather nodesForXPath:@"/data/current_condition/weatherIconUrl" error:nil] objectAtIndex:0] stringValue];

Xcode 使用的位置是 Williams, CA，发送的查询是

> 威廉姆斯+CA

当我将它插入我的 URL 时，它可以工作并且我得到了我的 XML 文件，但是为什么我在我的控制台中收到这条消息？？？

这真让我抓狂。非常感谢所有帮助！提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:34:35.163

似乎您认为数组`[worldweather nodesForXPath:@"/data/current_condition/weatherIconUrl" error:nil]`中`NSArray`至少有一个对象。显然情况并非如此，并且您会收到一条错误消息，指出索引 0 处没有对象，这意味着数组为空。

如果您不确定一个对象中至少有一个对象，`NSArray`请不要直接调用`objectAtIndex:0`.

您可以首先检查数组中有多少元素，然后执行以下工作：

```
NSArray *weatherArray = [worldweather nodesForXPath:@"/data/current_condition/weatherIconUrl" error:nil];

if ([weatherArray count] > 0){
  weathercondition = [[weatherArray objectAtIndex:0] stringValue];
} 
```

如果您不确定从服务器返回什么，请查看阵列中的内容：

```
NSLog(@"%@", weatherArray); 
```

或检查有多少元素：

```
NSLog(@"elements in Array: %i", [weatherArray count]); 
```

您可以使用的另一件有用的事情是，例如`[weatherArray lastObject]`，这将始终返回数组的最后一个元素，并且即使数组为空也将返回 nil（它不会像崩溃一样`objectAtIndex:0`）

# android - 无法使用 android sdk 在 facebook 上标记照片

> ID：11110920
> 
> 赞同：1
> 
> 时间：2012-06-19T23:29:03.400
> 
> 标签：android, facebook, facebook-android-sdk, photo-tagging

我正在使用以下代码（来自 sdk 示例“Hackbook”）在上传照片后为其添加标签。

```
json = Util.parseJson(response);
photo_id = json.getString("id");
String relativePath = photo_id + "/tags/" + Utility.userUID;
Bundle params = new Bundle();
params.putString("x", "25");
params.putString("y", "25");
Utility.mAsyncRunner.request(relativePath, params, "POST", new TagPhotoRequestListener(),                                null); 
```

但是，我有时（并非总是）收到来自 facebook 的响应为“false”而不是“true”。这有什么具体原因吗？

此外，有没有办法在上传照片时标记照片，而不是拨打额外的电话？

# css - CSS样式不是'级联'？

> ID：11110931
> 
> 赞同：5
> 
> 时间：2012-06-19T23:30:29.797
> 
> 标签：css, hyperlink

我正在更新某人的网站。他们的标记选择`<a>`标签是这样的：

```
#wrapper a{color: red;} 
```

这很好。但是，如果我创建一个`<div>`内部包装器并将其`<a>`标记为我自己的样式，例如：

```
.mydiv a{color: white;} 
```

它根本不起作用 -`color:white`我的 in`<div>`被包装器中的 color:red 覆盖，即使 .mydiv css 位于`#wrapper`我的外部样式表上 css 的下方。更重要的是所有其他样式 - 背景颜色，边框等 - 工作正常！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T23:33:29.793

这称为[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)。

带有`id`属性的选择器比带有属性的选择器更具体`class`（前者指向单个元素，而后者指向多个元素），因此`id`无论顺序如何，带有 的选择器都优先于您的选择器。

您的选择器需要更具体才能覆盖其他选择器：

```
#wrapper .mydiv a{color: white;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:36:13.023

您的 CSS 规则被覆盖的原因是样式规则的优先级在很大程度上取决于定义它们的特殊性。

`.myClass a`没有那么具体`#myID a`，因为与 ID 相比，类选择意味着受规则影响的元素范围更广。为确保您的规则优先于旧规则，只需将`#wrapper .mydiv a`其用作选择器，从而增强规则的特异性以超越旧规则。

# ruby-on-rails-3 - 如何存根没有返回值的方法

> ID：11110932
> 
> 赞同：0
> 
> 时间：2012-06-19T23:30:31.310
> 
> 标签：ruby-on-rails-3, mocha.js

我正在使用 Mocha，我想存根一个没有返回值的方法。它看起来像这样

```
def some_method
 增量计数器+=1
 database_model.update_attributes(:column => "something")
结尾

```

如何测试此方法的功能，并查看数据库模型是否更新？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T00:48:05.390

```
def some_method
  increment_counter+=1
  database_model.update_attributes(:column => "something")
  updated_database_model = Model.find(database_model.id)
  updated_database_model.column.should == "something"
end 
```

# android - 如何在 Android 日志中不显示 Dalvik 调试消息

> ID：11110933
> 
> 赞同：0
> 
> 时间：2012-06-19T23:30:39.643
> 
> 标签：android, adb, logcat

我看到很多这样的：

```
06-19 17:29:11.911: DEBUG/dalvikvm(10028): GC_FOR_MALLOC freed 729K, 54% free 3490K/7431K, external 0K/512K, paused 39ms
06-19 17:29:11.941: DEBUG/dalvikvm(10028): GC_FOR_MALLOC freed <1K, 49% free 3855K/7431K, external 0K/512K, paused 29ms 
```

在日志中反复出现。有没有办法不显示 Dalvik 调试消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:45:46.847

只需设置一个[logcat 过滤器](http://developer.android.com/guide/developing/tools/adb.html#logcat)。您也可以在 Eclipse 中以图形方式执行此操作。

# google-apps-script - 对画廊的批准稍慢，不删除现有脚本

> ID：11110934
> 
> 赞同：0
> 
> 时间：2012-06-19T23:30:41.017
> 
> 标签：google-apps-script

所以，我必须对我的所有脚本进行一个小错误修复：我没有意识到你可以推送到缓存中的数量是有限的（顺便说一句谷歌，我很确定这在任何地方都没有记录） .

无论如何，所以我的三行修复导致我不得不重新提交一堆脚本。通常这没什么大不了的，谷歌通常非常棒地批准它们（通常是下一个工作日）。然而，不幸的是，他们这次似乎花费了更多时间。这成了一个问题，因为我今天必须做一个演示，我只是假设他们现在会被批准（我捏造了它，只是展示了一个已经安装了脚本的电子表格）。

所以，我想我的主要问题是可能会有一个更优雅的升级过程？有时在等待批准时将脚本从库中删除是没有意义的。

谢谢！

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T11:26:25.797

我不久前就这个问题提出了[一个问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=177)（现在将近 2 年）。您可能想给它加*星*标以跟踪更新。关于批准过程，它并不像您所看到的那样“可靠”。我的脚本花了 3 个月的时间重新批准，然后下一次升级，只用了几天。

# neural-network - matlab中的神经网络：如何指定输入权重

> ID：11110942
> 
> 赞同：2
> 
> 时间：2012-06-19T23:31:36.740
> 
> 标签：neural-network, matlab

我需要帮助纠正此代码以在 matlab 中使用神经网络实现 XOR。但是，我无法设置从输入层到第一层的输入权重。该网络分别有2,2和1个神经元的输入层、隐藏层和输出层。有人可以帮我吗？

```
net=network;
net.numInputs = 1;
net.inputs{1}.size = 2;
net.numLayers = 2;
net.layers{1}.size = 2;
net.layers{2}.size = 1;
net.inputConnect(1) = 1;
net.layerConnect(2, 1) = 1;
net.outputConnect(2) = 1;
net.targetConnect(2) = 1;
net.layers{1}.transferFcn = 'logsig';%>> net.layers{2}.transferFcn = 'purelin';
net.layers{2}.transferFcn = 'logsig';
net.biasConnect = [ 1 ; 1];
net.layers{1}.initFcn = 'initwb';
net.layers{2}.initFcn = 'initwb';
net.inputWeights={1 1;1 1};%ask this. error is not explanatory. probably syntax.
net.biases{1}={-1.5 -0.5};
net.biases{2}=-0.5;
net.layerWeights{2,1}={-2 1};
P=[0 1 0 1;0 0 1 1];
T=[0 1 1 0];
net.initFcn = 'initlay';
net = init(net);
net.adaptFcn = 'adaptwb';
net.inputWeights{1,1}.learnFcn = 'learnp';
net.biases{1}.learnFcn = 'learnp';
net.adaptParam.passes =3;
net.performFcn = 'mse';
y = sim(net,P) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:40:10.700

`doc network`告诉我：

> 如果 net.inputConnect(i,j) 为 1，则 net.inputWeights{i,j} 是定义从输入 j 到层 i 的权重的结构。

`net.inputWeights`因此，您应该为输入和第一层节点的每个组合设置*元素*，而不是为 设置元胞数组，如下所示：`net.inputWeights`

```
net.inputWeights{1,1} = weight11; % input1 node 1
net.inputWeigtts{1,2} = weight12; % input1 node 2
... 
```

# php - 如何重写 URL，使用户看起来好像不在某个地方？

> ID：11110946
> 
> 赞同：1
> 
> 时间：2012-06-19T23:31:51.807
> 
> 标签：php, javascript, url, rewrite

我有一个网址 www.mysite.com/register，但是当人们访问此页面时，我希望它看起来像他们正在访问 www.mysite.com/shop/account/register，即使该页面没有不存在。

我在 PHP 和 JS 工作

谢谢

编辑：

www.mysite.com/register 已经存在，当用户访问 www.mysite.com/shop/account/register 时，我希望它重定向到第一个 url 但看起来他们仍在访问 /account/shop /登记。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:38:17.843

好的，首先你需要在你的 Apache 配置中启用 mod_rewrite 模块。这是一个很长的教程，所以我建议初学者阅读本教程

[http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/](http://www.addedbytes.com/for-beginners/url-rewriting-for-beginners/)

# java - Galaxy Android 3.2 上的按钮变暗

> ID：11110953
> 
> 赞同：1
> 
> 时间：2012-06-19T23:32:37.563
> 
> 标签：java, android, button, mobile, galaxy

我有一个三星 Galaxy Tab，Android 版本 3.2，它显示的默认按钮控件要暗得多。Android 3.2 不会在模拟器中执行此操作，它不会在较新的 ICS 平板电脑上执行此操作，它不会在我们的任何手机或任何版本的 Android 模拟器中执行此操作。有没有人遇到过这个？我们没有对按钮控件的显示做*任何事情。*它们完全是开箱即用的控件。是否有不需要自定义着色我们所有按钮控件的修复程序？我们有点卡住了，因为我们无法在任何地方复制它，但它正在发生的平板电脑是我们最终的 QA 批准者，她是这类事情的坚持者（这是我们正在努力开发的企业应用程序）。

编辑：看起来肯定是在按钮上设置了其他设备都没有的透明度，而不是使用不同的颜色。

编辑：这是一个屏幕截图。具体来说，提交运输选择。

![在此处输入图像描述](../Images/cf10680271416212f587cb357f079f57.png)

# c# - 获取关键字出现的块

> ID：11110960
> 
> 赞同：1
> 
> 时间：2012-06-19T23:32:59.513
> 
> 标签：c#, .net, regex

我需要获取有关变量的信息，而我唯一拥有的是变量名。在这种情况下，假设我需要获取属于的块`SOME_LARGE_VARIABLE`（每个块都以 开头`<0>`和结尾`<0>`）

**换句话说** ，我怎样才能得到块`<0>....SOME_LARGE_VARIABLE.....<0>`

注意我不想拥有`<0> ...... <0> ..... SOME_LARGE_VARIABLE .... <0>`

```
<0>
    temp
<0>
    fo0
<0>
    BLA BLA BLA
    kjfsd
    foodskjdsf
    kj
<0>
    someVariable
<0>
    SOME_LARGE_VARIABLE
<0> 
```

到目前为止，我已经尝试过：

```
<0>[\s\S]*?SOME_LARGE_VARIABLE[\s\S]*?<0> 
```

找到 <0> 然后继续直到找到 SOME_LARGE_VARIABLE 并停止直到 <0>

请注意，将选择所有内容

我的临时解决方案是：

<0>[\s\S]{1,25}SOME_LARGE_VARIABLE[\s\S]*?<0>

这将选择限制为少于 25 个字符。我认为这是有风险的，因为可能有两个小于 25 个字符的块

* * *

## 编辑

换句话说，我想结束：

```
<0>
   SOME_LARGE_VARIABLE
<0> 
```

我唯一拥有的就是`SOME_LARGE_VARIABLE`知道每个块的开头和结尾都是`<0>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T23:36:59.857

而不是使用`.*?`你可以使用`(?:(?!<0>).)*`，像这样：

```
<0>(?:(?!<0>).)*SOME_LARGE_VARIABLE(?:(?!<0>).)*<0> 
```

但是您最好将字符串拆分`<0>`并检查哪些部分匹配`SOME_LARGE_VARIABLE`。

* * *

请注意，表达式永远不会匹配第二个“块”：

```
<0> SOME_LARGE_VARIABLE   will match
<0> SOME_LARGE_VARIABLE   will not match
<0> 
```

因为第二个`<0>`被表达式消耗，不允许它匹配。（拆分方式没有这个问题。）

您可以通过使用前瞻来解决这个问题：

```
<0>(?:(?!<0>).)*SOME_LARGE_VARIABLE(?:(?!<0>).)*(?=<0>) 
```

* * *

如果您还想`.`匹配换行符，`(?s)`请在表达式的开头添加，如下所示：

```
(?s)<0>(?:(?!<0>).)*SOME_LARGE_VARIABLE(?:(?!<0>).)*(?=<0>) 
```

# xaml - 是否有与 XAML 的 * 单元等效的 CSS？

> ID：11110966
> 
> 赞同：2
> 
> 时间：2012-06-19T23:33:48.500
> 
> 标签：xaml, css

在 XAML 中，您可以以“*”为单位定义大小属性（例如长度或宽度），其中 * 表示剩余空间的一部分。

所以，如果我有一个 1000px 宽的父元素，并且它有 2 个子元素，它们都被定义为 1* 宽，那么它们每个都是 500px。如果一个定义为 3*，另一个定义为 1*，那么一个是 750px，另一个是 250px。如果有第三个元素，并且3的宽度分别定义为“100px”、“ *”“2* ”，那么3的宽度分别为100px、300px、600px。

是否有与此等效的 CSS，或者我应该使用 calc() 来模拟它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T05:42:36.893

[灵活的盒子布局模型](http://www.html5rocks.com/en/tutorials/flexbox/quick/)使用[OK 支持矩阵](http://caniuse.com/#feat=flexbox)（无 IE）

它完全符合您的要求，例如对于您的方案 3：

```
<div class="box">
  <div>un</div><div>deux</div><div>trois</div>
</div>

.box {
  width: 1000px;
  display: box;
  box-orient: horizontal;
}

.box > div:nth-child(1){ width:100px; }
.box > div:nth-child(2){ box-flex: 1; }
.box > div:nth-child(3){ box-flex: 2; } 
```

[来自html5rocks](http://jsfiddle.net/ovfiddle/pEAea/1/)示例的 Fiddle'd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T23:45:08.687

尽管 CSS 不支持比率，但百分比是支持的。这意味着您不能真正指定“宽度的其余部分”，但您通常可以得到您想要的。

例如，您的第一个 1000px 示例可以通过分配“宽度：50%”来实现。你的第二个例子是 75% 和 25%。

你的第三个例子有点复杂，混合固定的 px 值和百分比值是行不通的。您可以做的是使用一些巧妙的边距来获得整体结果。

我创建了一个[JS Fiddle 来说明第三个示例](http://jsfiddle.net/9AUNx/1/)。

# html - CSS transform:translate() 属性最终是为了什么？

> ID：11110972
> 
> 赞同：9
> 
> 时间：2012-06-19T23:34:12.370
> 
> 标签：html, css, transitions

在 CSS3 中，动画是在各种供应商前缀下引入的，带有过渡属性。现在，至少在纯 CSS 中，有两种方法可以让元素改变位置。

1.  将元素的位置设置为绝对位置并使用`left:` `right:` `top:`and`bottom:`
2.  使用`-vendor-transform:translate(X,Y,Z)`

现在，严格来说`transform:translate()`，除了一个人的使用能力之外`translateZ()`，它们之间的唯一区别是后者不是报告值；除了解析属性本身之外，翻译不是计算样式。但是，如果这不是必需的，那么对于配置**中的动画和定位元素来说，后者实际上是更好的选择`position:fixed`吗？**

我对制作一个需要在移动设备和浏览器上运行的非常重的 web 应用程序特别感兴趣，因此向后兼容性并不是什么大问题。如今，移动浏览器往往至少是“现代的”。

所以最终，我的问题是**，根据 CSS3 规范的制定者，****究竟是为了什么？`transform:translate()`**它是在哪里构建的以用于 LRTB 变换，并且在使用硬件加速`-webkit-transform: translateZ(0);`( 对于那些不知道的人，有时在 webkit 中的元素会在硬件加速环境中闪烁。

无论如何，我只是在为我的 web 应用程序寻找最好和最新的布局解决方案，它们可以最有效地利用 CPU 和 GPU，以便它们可以以非常优化的 FPS 运行（就过渡而言，在某些情况下，涉及滚动）最理想的平滑类型的一个很好的例子是[http://www.webkit.org/blog-files/leaves/](http://www.webkit.org/blog-files/leaves/)（是的，我确实阅读了它的源代码。）

有输入吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T15:06:14.023

我知道这是一篇较旧的帖子，但是当我想知道同样的问题时，我发现这篇文章非常有帮助：

[http://css-tricks.com/tale-of-animation-performance/](http://css-tricks.com/tale-of-animation-performance/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T03:06:49.783

> 根据 CSS3 规范的制定者，translate:translate() 到底是什么？

[它说](http://dev.w3.org/csswg/css3-transforms/#svg-transform-functions)：

> 为了向后兼容现有的 SVG 内容，本规范支持 [ [SVG11](http://www.w3.org/TR/2011/REC-SVG11-20110816/) ] 中的 'transform' 属性定义的所有转换函数。

至于您问题的其他部分，不确定是否可以给出一般性答案。

我认为最好针对您的特定情况进行一些性能测试。如果您的应用程序设计良好，那应该不难做到。此外，这样的设计可以允许对每个设备进行优化，其中分别使用平移*和偏移。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-15T09:23:59.383

不知道为什么这还没有得到回答，但该`translate`属性不会导致 CLS（内容布局移位）。换句话说，当页面加载或视口发生变化时，使用 CLS 的内容会有些静态。如今，一个 web 应用程序将因谷歌灯塔的性能而受到惩罚。

# android - 从 SD 过滤中选择照片的大小或分辨率？

> ID：11110976
> 
> 赞同：2
> 
> 时间：2012-06-19T23:34:51.043
> 
> 标签：android, android-intent, action, photo, picker

我从 sd 获得了一张照片，开始了一个新的意图：

```
Intent photoPickerIntent = new Intent(Intent.ACTION_PICK);
photoPickerIntent.setType("image/*");
startActivityForResult(photoPickerIntent, SELECT_PHOTO); 
```

这项工作很棒！但在某些情况下，图像尺寸太大，移动设备崩溃。如果是正常尺寸的图像没问题，但我想要一种过滤或避免较大尺寸图像的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:51:58.607

尝试使用这个

```
Intent intent = new Intent();
            intent.setType("image/*");
            intent.setAction(Intent.ACTION_GET_CONTENT);
            intent.addCategory(Intent.CATEGORY_OPENABLE);
            startActivityForResult(
                    Intent.createChooser(intent, "Select Picture"), 0); 
```

希望它会有所帮助，它对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-20T11:07:17.463

我找到了解决这个问题的方法，我使用下一个方法来使用位图选项调整位图的大小。您可以设置最大尺寸（实际上是 1.2MP），但那里的效果很好。

```
private Bitmap getBitmap(String path) {

Uri uri = getImageUri(path);
InputStream in = null;
try {
    final int IMAGE_MAX_SIZE = 1200000; // 1.2MP
    in = mContentResolver.openInputStream(uri);

    // Decode image size
    BitmapFactory.Options o = new BitmapFactory.Options();
    o.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(in, null, o);
    in.close();

    int scale = 1;
    while ((o.outWidth * o.outHeight) * (1 / Math.pow(scale, 2)) > IMAGE_MAX_SIZE) {
        scale++;
    }
    Log.d(TAG, "scale = " + scale + ", orig-width: " + o.outWidth       + ", orig-height: " + o.outHeight);

    Bitmap b = null;
    in = mContentResolver.openInputStream(uri);
    if (scale > 1) {
        scale--;
        // scale to max possible inSampleSize that still yields an image
        // larger than target
        o = new BitmapFactory.Options();
        o.inSampleSize = scale;
        b = BitmapFactory.decodeStream(in, null, o);

        // resize to desired dimensions
        int height = b.getHeight();
        int width = b.getWidth();
        Log.d(TAG, "1th scale operation dimenions - width: " + width    + ", height: " + height);

        double y = Math.sqrt(IMAGE_MAX_SIZE
                / (((double) width) / height));
        double x = (y / height) * width;

        Bitmap scaledBitmap = Bitmap.createScaledBitmap(b, (int) x,     (int) y, true);
        b.recycle();
        b = scaledBitmap;

        System.gc();
    } else {
        b = BitmapFactory.decodeStream(in);
    }
    in.close();

    Log.d(TAG, "bitmap size - width: " +b.getWidth() + ", height: " + b.getHeight());
    return b;
} catch (IOException e) {
    Log.e(TAG, e.getMessage(),e);
    return null;
} 
```

}

# php - 如何将html输入转换为php数组

> ID：11110977
> 
> 赞同：3
> 
> 时间：2012-06-19T23:34:53.117
> 
> 标签：php, html, arrays, input

我正在开发一个应用程序，该应用程序最终将生成一个 .CSV 文件。我已经找到了如何将一个或多个数组转换为 .CSV 文件的方法，但是我无法弄清楚前面的步骤。

我有一堆将发送到 PHP 的表单中的 html 输入，我希望有一个包含所有输入名称的数组（输入名称 =“example”）和另一个包含放入这些字段的值的数组由最终用户。

最后，我是 CSV 成为两个数组的产物。第一行是高度、宽度、深度，第二行是 10 毫米、20 毫米、9 毫米等。

我想知道是否可以使用 html 类和 foreach 的混合，但我真的不确定。任何帮助都会很棒！谢谢！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T23:36:19.847

使用方括号表示法将这些命名字段转换为数组，这里有几个例子

```
<input name="array[]">
<input name="array[]">
<input name="array[]">

<input name="array[foo]">
<input name="array[bar]">

<input name="array[0][foo]">
<input name="array[0][bar]">
<input name="array[1][foo]">
<input name="array[1][bar]"> 
```

然后使用 var_dump() 或 print_r() 快速预览您的数据

```
var_dump($_REQUEST['array']); 
```

# c# - 与网络摄像头连接

> ID：11110985
> 
> 赞同：5
> 
> 时间：2012-06-19T23:36:32.510
> 
> 标签：c#, focus, zooming, webcam, emgucv

所以我正在尝试开发一个 WPF 应用程序，它可以让我关闭网络摄像头的自动缩放和自动对焦功能。我正在为 opencv 使用 Emgu c# 包装器，并且希望能够在没有我的相机自动对焦的情况下在物体进入屏幕时进行帧差分。

我曾尝试寻找一个 sdk 来允许我开发类似的东西，但显然罗技几年前放弃了他们的。我正在使用高清专业网络摄像头 c920。我听说也许你可以使用它附带的 dll 来调整选项，但我不知道该怎么做。

任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-31T19:27:37.510

罗技 HD Pro 网络摄像头 C920 的缩放、曝光、对焦可以使用 DirectShow API 进行控制。Emgu CV 使用 DirectShow 捕获（始终或作为选项）的可能性很高，或者至少您可以使用 DirectShow 设置相机，并且设置将在流会话重新启动后继续存在。

C920 的属性可通过`IAMCameraControl`接口获得。它[记录在 MSDN 上用于本地开发](https://msdn.microsoft.com/en-us/library/windows/desktop/dd389145)，并且[DirectShow.NET](http://directshownet.sourceforge.net/)为 .NET 提供了相应的定义。

# asp.net - ASP.NET 通过用户名访问目录

> ID：11110986
> 
> 赞同：3
> 
> 时间：2012-06-19T23:36:43.823
> 
> 标签：asp.net, authorization, security, httphandler

这可以通过创建一个新的 HTTP 处理程序来完成，但是有没有一种简单的方法来配置以下内容？：

1.  站点是基于用户名的用户帐户设置的，例如 A001、A002....等。
2.  一旦用户登录，他们就可以访问其目录（/A001）等中的资源......其中可能包含文件和图像

我在 ASP.NET 中使用角色和授权时遇到的问题是角色要么是通用的（由角色定义，例如任何登录的人都可以访问资源），要么是硬编码在 web.config 文件中，这显然不是在创建用户帐户的动态环境中可行：

```
<authorization>

<allow users="John"/> // allow John only 
<deny users="*"/>  // deny others

</authorization> 
```

有没有一种简单的方法可以确保只有特定用户才能访问他们的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:47:10.650

那么使用 HTTP 模块就足够简单了。

首先这是请求生命周期：

*   应用程序_开始请求。
*   Application_AuthenticateRequest。
*   Application_PostAuthenticateRequest。
*   应用程序_默认身份验证。
*   应用程序_授权请求。
*   Application_PostAuthorizeRequest。
*   Application_ResolveRequestCache。
*   Application_PostResolveRequestCache。
*   Application_MapRequestHandler。仅当服务器以集成模式运行 IIS 7 且至少 >Net Framework 3.0 时触发
*   Application_PostMapRequestHandler。
*   Application_AcquireRequestState。
*   Application_PostAcquireRequestState。
*   Application_PreRequestHandler 执行。
*   页面事件处理程序被执行。（参考页面生命周期）
*   Application_PostRequestHandler 执行。
*   Application_ReleaseRequestState。
*   Application_PostReleaseRequestState
*   Application_UpdateRequestCache。
*   Application_PostUpdateRequestCache
*   Application_LogRequest。仅在服务器为 IIS 7 集成模式且至少为 .Net Framework 3.0 时触发
*   Application_PostLogRequest。仅在服务器为 IIS 7 集成模式且至少为 .Net Framework 3.0 时触发
*   应用程序_结束请求。

欲了解更多信息：http: [//msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.aspx)

我认为最适合您需求的活动是`Application_AuthorizeRequest`

在这里，您可以获得正在访问的路径，并且您可以在数据库中拥有一张*地图*，将您的用途与其允许的路径相关联，例如：

```
UserID         Path
userID1        ~/UserFiles/User1
userID2        ~/UserFiles/User2
userID3        ~/UserFiles/User3 
```

然后在事件中阅读此地图并决定是否应该授权用户

# php - 如何在mysqli中删除以下警告

> ID：11110993
> 
> 赞同：2
> 
> 时间：2012-06-19T23:37:33.490
> 
> 标签：php, mysqli

我遇到的问题是它在 mysqli 中给我一个警告，说明这一点：

```
Warning: mysqli_stmt::bind_param() [mysqli-stmt.bind-param]: Number of variables doesn't match number of parameters in prepared statement in ...on line 89 
```

我怎样才能摆脱警告？

```
$questionquery = "
SELECT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, 
       q.QuestionMarks 
  FROM Answer an 
  INNER JOIN Question q ON q.AnswerId = an.AnswerId
  JOIN Reply r ON q.ReplyId = r.ReplyId 
  JOIN Option_Table o ON q.OptionId = o.OptionId 

                 WHERE ";

$i=0;
foreach ($terms as $each) {     
    $i++;         

    if ($i == 1){         
        $questionquery .= "q.QuestionContent LIKE ? ";     
        } else {         
            $questionquery .= "OR q.QuestionContent LIKE ? ";    
             } 
             }  

             $questionquery .= "GROUP BY q.QuestionId, q.SessionId ORDER BY "; $i = 0; foreach ($terms as $each) {     
                 $i++;      

    if ($i != 1)         
    $questionquery .= "+";     
    $questionquery .= "IF(q.QuestionContent LIKE ? ,1,0)"; 
    } 

    $questionquery .= " DESC "; 

    $stmt=$mysqli->prepare($questionquery);      
    $stmt->bind_param('s', $each = '%' . $each . '%');
    $stmt->execute(); 
    $stmt->bind_result($dbQuestionId,$dbQuestionContent,$dbOptionType,$dbNoofAnswers,$dbAnswer,$dbReplyType,$dbQuestionMarks); 
    $questionnum = $stmt->num_rows(); 
```

SQL的输出：

```
SELECT q.QuestionId, q.QuestionContent, o.OptionType, q.NoofAnswers, GROUP_CONCAT(an.Answer ORDER BY an.Answer SEPARATOR ' ') AS Answer, r.ReplyType, q.QuestionMarks 

FROM Answer an INNER JOIN Question q ON q.AnswerId = an.AnswerId JOIN Reply r ON q.ReplyId = r.ReplyId JOIN Option_Table o ON q.OptionId = o.OptionId 

WHERE q.QuestionContent LIKE ? 

GROUP BY q.QuestionId, q.SessionId 

ORDER BY IF(q.QuestionContent LIKE ? ,1,0) DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T23:41:04.083

您似乎将 MySQLi 的参数绑定方法与 PDO 混淆了（它接受一个数组到.`execute()`调用并且不将参数传递给.[`bind_param()`](http://php.net/manual/en/mysqli-stmt.bind-param.php)`$each``execute()`

```
$stmt->bind_param('s', $each);
$stmt->execute(); 
```

请注意，如果您打算使用`LIKE`带有`%`通配符的查询，这些通配符必须是绑定变量的一部分，例如：

```
$each = '%' . $each . '%'; 
```

# jquery - 使用 jQuery 清除 div 和子元素

> ID：11110997
> 
> 赞同：0
> 
> 时间：2012-06-19T23:37:56.127
> 
> 标签：jquery, dom

想知道在 jQuery 中最好/好的方法是什么。我有一个`<div>`包含使用代码填充的无序列表。我想在页面上放置一个重置按钮，这样事情就开始了：

```
<div id="testdiv">   
   <ul id="a_list">
     <li>value 1</li>
     <li>value 2</li>   
  </ul> 
</div> 
```

对此：

```
<div id = "testdiv">
  <ul id = "a_list">
  </ul>
</div> 
```

创造性地使用 .empty() 或 .html('') ，也许是这样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T23:40:22.123

[`.empty()`](http://api.jquery.com/empty/)是要走的路：

```
$('#a_list').empty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T23:40:37.403

```
$("#resetButtonId").click(function(){ $("#a_list").empty() }); 
```

单击重置按钮时，清空无序列表