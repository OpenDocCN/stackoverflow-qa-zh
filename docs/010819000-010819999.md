# StackOverflow 问答 10819000-10819999

# elasticsearch - ElasticSearch 和不等式

> ID：10819002
> 
> 赞同：2
> 
> 时间：2012-05-30T15:05:21.460
> 
> 标签：elasticsearch

有谁知道如何使用 ElasticSearch JSON API 在任何搜索结果上设置大于、小于或介于过滤器之间的过滤器来执行过滤器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T18:47:21.893

想出了如何去做。您需要使用范围值：

```
curl -X GET "http://0.0.0.0:9200/users/_search?pretty=true" -d '{"filter":{"range" : { "age" : { "from":20, "to": 21 } } }}' 
```

# iphone - iOS 奇怪的标签栏行为 - viewWillAppear、viewDidAppear

> ID：10819004
> 
> 赞同：1
> 
> 时间：2012-05-30T15:05:23.237
> 
> 标签：iphone, objective-c, ios, uitabbar

我隐藏了默认的苹果标签栏，因为我们已经创建了自己的标签栏。它工作正常，但在切换几次标签栏项目后，苹果默认标签栏重新出现并且不再隐藏。这有点随机。经过调查，我们意识到在一个视图中，在 viewWillAppear 和 viewDidAppear 之间，标签栏的属性发生了变化。

例如 viewWillAppear 结尾：tab bar frame (0 431, 320 49), hidden = YES, opaque = NO viewDidAppear 开头：tab bar frame (320 431, 320 49), opaque = NO

框架的值已更改，隐藏属性丢失。任何人都知道 viewWillAppear 和 viewDidAppear 之间会发生什么？

# ruby-on-rails - 为 rails 3 使用自定义 JSON 格式

> ID：10819012
> 
> 赞同：0
> 
> 时间：2012-05-30T15:05:52.333
> 
> 标签：ruby-on-rails, json

在 Rails 应用程序中，我有一个返回 json 字符串的操作。它看起来像这样：

```
if exist_user
    format.json { render json: {:msg => 'has this user'}}
else 
```

但是rails显示错误：参数太少

如何呈现自定义 json 字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:17:16.877

你需要有`respond_to`块，否则它不知道发回的格式。

```
respond_to do |format|
  if exist_user
    format.json { render json: {:msg => 'has this user'} }
  else
  end
end 
```

查看更多详细信息，[http://api.rubyonrails.org/classes/ActionController/Responder.html](http://api.rubyonrails.org/classes/ActionController/Responder.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:18:39.597

```
if exist_user
    format.json { render :json => {:msg => 'has this user'} }
else 
```

# javascript - 如何从跨度标签上的点击事件中获取选定的列表项值？

> ID：10819025
> 
> 赞同：1
> 
> 时间：2012-05-30T15:06:27.797
> 
> 标签：javascript, jquery, twitter-bootstrap

我有一个项目列表，我附加了一个删除图标，如下所示：

```
$.each(data.files, function() {
    $('#listReports').append('<li><a href="#">'+ this + '</a><span class="del" style="float:right;"><i class="icon-remove"></i></span></li>');
}); 
```

CSS 文件：

```
li span.del {
  display: none;
}
li:hover span.del {
  display: inline-block;
} 
```

jQuery代码：

```
$('li').hover(
    function() {
        $(this).find('span.del').show();
    },
    function() {
        $(this).find('span.del').hide();
    }
); 
```

如果用户单击 del 图标，我如何选择列表项值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:09:00.313

假设您动态添加列表项，并且还假设*列表项值*是`<a>`标记包含的文本。如果是这样，那么下面的代码应该可以完成这项工作。

```
$("#listReports").on("click", ".del", function() {
    var value = $(this).siblings("a").text();
}); 
```

# javascript - 调整浏览器屏幕的大小弄乱了我的 div 的偏移量

> ID：10819029
> 
> 赞同：0
> 
> 时间：2012-05-30T15:06:36.920
> 
> 标签：javascript, jquery, css, offset

我目前正在创建一个麻将游戏。游戏和完整一样好。一切正常，直到我决定将游戏放在 div ( `div id="holder"`) 中以确保它在浏览器窗口中居中。

发生什么了？

**第 1 步：** 调整浏览器窗口的大小，使其与游戏大小相匹配（因此左侧或右侧没有白色边框。**注意：**在顶部添加更多空间时也会出现此问题，但在此演示中无法调整这。

**第二步：** 点击：`Click to Start`，游戏开始，然后点击任意提示按钮。您将看到一个 nr 出现在您刚刚单击的按钮上方，它向上移动，然后消失。这个 nr 的位置是正确的，并且应该总是出现在你点击的 HINT 按钮上方的中间。

**第 3 步：** 现在调整浏览器窗口的大小，在游戏（假设）左右各留出 2 厘米的空白区域。

**第 4 步：** 现在单击另一个提示按钮。注意 nr 出现了，但不再出现在 HINT 按钮的中间和上方，而是在右侧 2cm 处。

那么发生了什么？我的猜测是，`div class="score"`包含 nr 的 div ( ) 的偏移量包括其偏移量的空白（或类似的东西）。

这显然是我不想要的！但我不知道如何解决这个问题......

一些代码片段：

DIV的CSS：

```
#holder {
    width: 940px; 
    margin: auto auto;
}
.score {
    display: none;
    pointer-events: none;
    position: absolute;
    font-size: 1em;
    text-align: center;
    color:#FFF;
    z-index: 1;
} 
```

JS 部分（使用 jQuery）：

```
var offset = $(this).hide(500).offset();
var penalty = Math.round(score * -0.10);  //calculates a score penalty
score += penalty; //this is the result
$('.sc').text(score); //this is needed elsewhere in the script
$('.score') //start of showing the div and it's animation
      .show()
      .text(penalty)
      .css({
          top: offset.top - $('.score').height() - 90,
          left: offset.left,
          width:'3.5em'
      })
      .stop()
      .delay(100)  
      .animate({top: offset.top - $('.score').height() - 140},700)
      .hide(0); 
 ...some more code here, not relevant to this 
```

如果需要更多代码，请告诉我，但我认为这就足够了。希望这个问题可以解决！

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:09:16.327

在您的持有人 css 添加位置：相对；

```
#holder {
    width: 940px; 
    margin: auto auto;
    position: relative;
} 
```

看看是否可以解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:08:52.260

什么时候计算偏移变量？它应该在单击提示时存储。

如果您从隐藏之前获取偏移量，会发生什么？

var offset = $(this).offset().hide(500);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:58:34.233

我想我已经找到了。在我的 CSS 中，我有另一个 div：

```
#s0 {
    position: relative;
    float: left; 
    height: 570px;
    width: 760px;
    background: #222 url('images/bg.png');
} 
```

删除：`position: relative;`似乎修复它。会做更多的测试。谢谢大家的建议！

# html - Magento 对源代码中的所有链接使用 https://

> ID：10819035
> 
> 赞同：0
> 
> 时间：2012-05-30T15:06:57.263
> 
> 标签：html, .htaccess, magento, mod-rewrite

所以今天我试图在我的运行 nginx 的 vps 上安装一个新的 Magento v1.7.0 实例。将全新安装上传到 public_html 后，我将其解压缩并输入我的 ip 以运行安装，即 xx.x.xxx.xxx:8086。最初我在 chrome 中遇到“SSL 连接错误”，所以我尝试了[http://xx.x.xxx.xxx:8086](http://xx.x.xxx.xxx:8086)这然后工作并将我重定向到 magento 安装页面但我注意到样式被破坏了所以我去了查看源码发现每个链接前面都有https://。例子：

```
<link rel="stylesheet" href="https://xx.x.xxx.xxx:8086/skin/install/default/default/css/reset.css" type="text/css"   media="all" />
<link rel="stylesheet" href="https://xx.x.xxx.xxx:8086/skin/install/default/default/css/boxes.css" type="text/css" media="all" />
<link rel="stylesheet" href="https://xx.x.xxx.xxx:8086/skin/install/default/default/css/clears.css" type="text/css" media="all" /> 
```

然后，我查看了默认的 .htaccess 文件，看看是否有任何重写但没有注意到。

v1.7.0 的默认 .htaccess 文件：

[http://pastebin.com/natxdEUW](http://pastebin.com/natxdEUW)

任何想法可能导致此问题？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:55:16.547

在您的管理仪表板中，在左侧菜单中的 System > Configuration 下选择 GENERAL > WEB，您可以看到 Secure 和 Unsecure 选项卡并检查/更改此设置。

# extjs - ExtJS4：具有 hasMany 的模型仅加载第一个嵌套属性

> ID：10819037
> 
> 赞同：1
> 
> 时间：2012-05-30T15:07:00.897
> 
> 标签：extjs, sencha-touch, extjs4, sencha-touch-2

我尝试通过模型的加载函数从具有嵌套属性的服务器加载 JSON 回复。但不知何故，只有我的嵌套属性集的第一个条目被解析。

我正在尝试加载如下 JSON 文件：

```
{
   "id" : "2",
   "name" : "John",
   "logins" : [
      {
         "id" : "4",
         "person_id" : "2",
         "date" : "2012-01-18 01:00:06"
      },{
         "id" : "9",
         "person_id" : "2",
         "date" : "2012-01-18 19:36:13"
      },{
         "id" : "12",
         "person_id" : "2",
         "date" : "2012-01-19 00:12:32"
      }]
} 
```

我有两个模型，如下所示：

```
Ext.define('MyAppName.model.Person', {
    extend : 'Ext.data.Model',
    config : {
        idProperty : 'id',
        fields : [{
                    name : 'id',
                    type : 'int'
                }, {
                    name : 'name',
                    type : 'string'
                }],
        hasMany : [{
                model: 'MyAppName.model.Login',
                name: 'logins',
                associationKey: 'logins'
        }],
        proxy : {
            type : 'ajax',
            url : '../index.php?format=json',
            reader : {
                type : 'json'
            }
        }
    }
}); 
```

和

```
Ext.define('MyAppName.model.Login', {
    extend : 'Ext.data.Model',
    config : {
        fields : [{
                    name : 'id',
                    type : 'int'
                }, {
                    name : 'person_id',
                    type : 'int'
                }, {
                    name : 'date',
                    type : 'date'
                }],
        belongsTo: [{
            model: 'MyAppName.model.Person', 
            associationKey: 'logins'
        }]  
    }
}); 
```

我尝试通过以下方式加载一个新人的数据

```
MyAppName.model.Person.load(personId, {scope: ..., ..., success: function(record, operation) { -someFancyCode-} }) 
```

但是我在成功函数中检索到的记录现在只包含一个登录数据集。我做错了什么吗？

谢谢！网卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T20:50:45.810

好吧，首先，模型本身不会加载嵌套数据，至少不是很好，它有一些已知的问题，所以，更好的选择是创建一个存储并通过该存储加载你的模型，其中这些行：

```
Ext.define('MyAppName.model.Person', {
    extend: 'Ext.data.Model',
    idProperty: 'id',
    fields: [{
        name: 'id',
        type: 'int'
    }, {
        name: 'name',
        type: 'string'
    }],
    hasMany: [{
        model: 'MyAppName.model.Login',
        name: 'logins'
    }],
    proxy: {
        type: 'memory',
        reader: {
            type: 'json'
        }
    }
});

Ext.define('MyAppName.model.Login', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'id',
        type: 'int'
    }, {
        name: 'person_id',
        type: 'int'
    }, {
        name: 'date',
        type: 'date'
    }],
    belongsTo: [{
        model: 'MyAppName.model.Person'
    }]
});
var data = {
    "id": "2",
    "name": "John",
    "logins": [{
        "id": "4",
        "person_id": "2",
        "date": "2012-01-18 01:00:06"
    }, {
        "id": "9",
        "person_id": "2",
        "date": "2012-01-18 19:36:13"
    }, {
        "id": "12",
        "person_id": "2",
        "date": "2012-01-19 00:12:32"
    }]
};
var store = Ext.create('Ext.data.Store', {
    model: 'MyAppName.model.Person',
    data: data
});
var instanceModel = store.getAt(0);
//Show 'Person' model contents.
console.info(instanceModel);

//Show 'logins' for that person
console.info(instanceModel.logins()); 
```

在这里查看对应的[JsFiddle](http://jsfiddle.net/voidmain/ktWpQ/)

希望这能让你走上正轨。

# vbscript - CopyFolder 方法报告有效路径的“找不到路径”

> ID：10819042
> 
> 赞同：1
> 
> 时间：2012-05-30T15:07:11.727
> 
> 标签：vbscript, copy

我正在尝试设置一个脚本来检查一堆用户的旧配置文件并复制收藏夹文件夹（如果存在），但是该`CopyFolder`方法告诉我“找不到路径”，尽管它没有说明这是目的地还是来源。

引起我麻烦的代码部分是这样的 -

```
objFSO.CopyFolder old_favourites_unc, new_favourites_unc, true 
```

完整的代码在这个 PasteBin - [http://pastebin.com/w9yXuAQ1](http://pastebin.com/w9yXuAQ1)

我在复制之前检查了目标和源的存在，这没关系，所以我对自己做错了什么有点迷茫。有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:12:21.903

这是源文件夹的错误。

如果源不包含通配符，则如果不存在，则会自动创建目标文件夹。

# ios - 使用自定义 UIMenuController 项从 UIPasteboard 中复制和检索值

> ID：10819043
> 
> 赞同：2
> 
> 时间：2012-05-30T15:07:12.647
> 
> 标签：ios, uimenucontroller, uipasteboard

我有一个显示 pdf 文件的 web 视图。作为网络视图的标准，用户可以选择文本并执行标准操作，如复制、剪切。我需要添加一个自定义 UIMenuController 来显示自定义操作。我不明白如何在标准 UIPasteboard 中复制所选文本并传递给我的自定义选择器。我试过用

```
[[UIApplication sharedApplication] sendAction:@selector(copy:) to:nil from:self forEvent:nil]; 
```

在方法中，我可以复制选定的文本，但我不明白如何将此值返回到我的方法中。

这是我的代码（简化） 在视图中确实加载了我为 UIPasteboardChangedNotification 添加了一个观察者来执行我的选择器 myCopy：

```
- (void)viewDidLoad
{
[super viewDidLoad];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myCopy:) name:UIPasteboardChangedNotification object:nil];

UIMenuItem *schedaMenuItem = [[UIMenuItem alloc] initWithTitle:NSLocalizedString(@"POPSCHEDA",nil) action:@selector(copyScheda:)];
UIMenuItem *istruzionetMenuItem = [[UIMenuItem alloc] initWithTitle:NSLocalizedString(@"POPISTR",nil) action:@selector(copyIstruzione:)];
[[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObjects:MenuItem1,MenuItem2,nil]];

}

-(void)myCopy:(id)sender {
  UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
  NSString* copyCode = pasteboard.string;
  //perform the necessary action
 }

 -(void)copyScheda:(id)sender {
   UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
   NSString* copyCode = pasteboard.string;
   //perform the necessary action
 }

 -(void)copyIstruzione:(id)sender {
   UIPasteboard *pasteboard = [UIPasteboard generalPasteboard];
   NSString* copyCode = pasteboard.string;
   //perform the necessary action
 } 
```

感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-12T00:41:58.973

如果我正确理解了您的问题，那么您正在尝试获取当前选择的文本，当用户点击您的自定义项目时将其复制到粘贴板，然后对所选/复制的文本执行某些操作？

如果是这样，我认为这应该对你有用，至少它在 Swift 4 中对我有用。

首先，在 中`viewDidLoad`，设置您的自定义菜单项

```
let customMenuItem = UIMenuItem(title: "Foo Bar", action: #selector(ViewController.customMenuTapped))
UIMenuController.shared.menuItems = [customMenuItem]
UIMenuController.shared.update() 
```

然后，仍然`viewDidLoad`将自己设置为观察者`UIPasteboardChanged`

```
NotificationCenter.default.addObserver(self, selector: #selector(displaySelectecText), name: NSNotification.Name.UIPasteboardChanged, object: nil) 
```

然后创建响应 的函数`customMenuItem`，在我的示例中它是`customMenuTapped()`，并且您基本上将复制操作发送到响应者链来处理它。

```
@objc func customMenuTapped() {
    UIApplication.shared.sendAction(#selector(copy(_:)), to: nil, from: self, for: nil)
} 
```

由于您已将自己注册为侦听器，因此当复制操作完成后，您的其他函数将被调用，我的是`displaySelectecText()`

```
@objc func displaySelectedText() {
    let copiedText = UIPasteboard.general.string ?? ""
    let alertView = UIAlertController(title: "Selected Text", message: copiedText, preferredStyle: .alert)
    alertView.addAction(UIAlertAction(title: "OK", style: .default, handler: nil))
    present(alertView, animated: true, completion: nil)
} 
```

在此示例中，为简单起见，我只是在警报视图中显示文本。

这是完整的代码：

```
import UIKit
import WebKit

class ViewController: UIViewController {

    @IBOutlet weak var webView: WKWebView!

    override func viewDidLoad() {
        super.viewDidLoad()

        loadWebView()
        setupCustomMenu()
        setupListener()
    }

    func loadWebView() {
        let url = URL(string: "http://www.google.com")
        let request = URLRequest(url: url!)
        webView.load(request)
    }

    func setupCustomMenu() {
        let customMenuItem = UIMenuItem(title: "Foo Bar", action:
            #selector(ViewController.customMenuTapped))
        UIMenuController.shared.menuItems = [customMenuItem]
        UIMenuController.shared.update()
    }

    func setupListener() {
        NotificationCenter.default.addObserver(self, selector: #selector(displaySelectedText), name: NSNotification.Name.UIPasteboardChanged, object: nil)
    }

    @objc func customMenuTapped() {
        UIApplication.shared.sendAction(#selector(copy(_:)), to: nil, from: self, for: nil)
    }

    @objc func displaySelectedText() {
        let copiedText = UIPasteboard.general.string ?? ""
        let alertView = UIAlertController(title: "Selected Text", message: copiedText, preferredStyle: .alert)
        alertView.addAction(UIAlertAction(title: "OK", style: .default, handler: nil))
        present(alertView, animated: true, completion: nil)
    }

} 
```

这是一个演示

[![在此处输入图像描述](../Images/f936b6c0eb67483bc2f7afdcadd5947b.png)](https://i.stack.imgur.com/FqzqY.gif)

# javascript - 为什么要创建一个值为 this 的变量

> ID：10819047
> 
> 赞同：7
> 
> 时间：2012-05-30T15:07:27.740
> 
> 标签：javascript, this

我在 JavaScript 中看到过很多这样的事情，我记得找出原因，但我不记得答案了。

我猜这与范围和在“类”之外调用的函数有关，但为什么要这样做（最好概述一个示例）：

```
function myClass ()
{
    var self = this;

    //...

    this.myArray = [];

    this.myFunc = function () { alert(self.myArray.length); };
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:08:48.650

为了将变量锁定为[*闭包*](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)的一部分。

例如：

```
MyClass.prototype.doStuff = function(){
  this.foundItems = [];
  var self = this;
  this.myString.replace(/.../,function(){
    // `this` is actually the `window` inside this callback
    // so we need to use `self` to invoke another method on our instance object
    self.foundItems.push( self.doOtherStuff() );
  });
}; 
```

如果您以预期的方式调用该方法，则您编写的特定示例不需要闭包：

```
function Foo(){
  this.array = [];
  this.myFunc = function(){
    return this.array;
  }
}
var foo = new Foo;
foo.myFunc(); // [] 
```

但是，可以像这样“破坏”它：

```
var f2 = foo.myFunc;
f2(); // undefined, since `this` was the window 
```

另一方面，使用闭包的代码对这种愚蠢行为是安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:10:17.147

“this”指的是当前的“对象”。在谈论 javascript 时，权力在于“this”表达式是根据上下文评估的，例如，如果一个方法在另一个对象上下文中执行，“this”值将分别改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:12:56.060

如果您在另一个函数中创建一个函数，`this`则内部函数将设置为全局窗口对象。如果您创建一个保存 的值的变量`this`，例如

```
var that = this; 
```

然后您可以使用`that`在内部函数中引用外部函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:19:36.037

除了其他用户发布的一些答案之外，创建变量集允许您在不访问对象的情况下重用变量。

类似于做类似的事情：

```
var myElement = document.getElementById('someElement'); 
```

然后在需要时访问 myElement 而不是 document.getElementById 多次。

设置 that = this 或 self = this 使您可以在任何地方访问“that”或“self”，并防止重新加载某些对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:53:40.003

我不认为一个人真的想这样做：

*   每当创建实例时，您也会创建函数的“副本”。所以 5 个实例，将创建函数的 5 个“副本”。
*   函数的“副本”绑定到仅与该特定实例相关的环境，因此不能通用。这意味着扩展类将获得一个仅与父类的某些实例相关的方法，该实例可能甚至未使用。
*   你的缩进会失控，特别是如果你开始嵌套那些内联函数
*   您必须在其他函数中寻找函数，而不仅仅是在原型定义中查找它

替代：

```
function MyClass() {
    this.myArray = [];
    this.myFunc = this.myFunc.bind(this); //The "blueprint" in the prototype is not affected, the instance gets its own bound version.
                                           //This means the one in prototype can be inherited or used generically anywhere else as well
}

MyClass.prototype = {

    myFunc: function() { //My func is neatly listed in the prototype and can use `this` normally
        alert(this.myArray.length);
    },

    constructor: MyClass
};

var myObj = new MyClass();

document.addEventListener( "click", myObj.myFunc ); //Will now work as you "expect" it to work 
```

一些缺点：

*   每个绑定函数都是一个新函数，因此每个实例，每次仍然创建 1 个新函数。
*   写出`.bind`构造函数中的所有调用的样板文件，尽管可以通过像这样的助手来缓解`_.bindAll`

# java - 将徽标定位在android中心

> ID：10819048
> 
> 赞同：0
> 
> 时间：2012-05-30T15:07:30.547
> 
> 标签：java, android, xml

我正在将此代码用于图像：

```
<ImageView android:src="@drawable/logo"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:layout_marginLeft="50dip"/> 
```

我希望徽标居中，可以通过改变布局边距左值并检查和定位它来完成，但是有什么命令可以让它居中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:11:02.270

尝试使用`RelativeLayout`：

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView 
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/app_logo"
        android:contentDescription="application_logo"
        android:layout_centerVertical="true"
        android:layout_centerHorizontal="true"
        />

</RelativeLayout> 
```

如果您只想使用，请仅从`horizonal alignment`中删除。`android:layout_centerVertical="true"``XML resource`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:16:51.907

根据布局的其他部分，您可以使用将其父级的重力设置为 center_vertical|center_horizo​​ntal。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:18:12.213

您还可以使用该元素`android:layout_centerInParent`将图像在父级（容器）中居中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:46:06.450

更好：使用屏幕大小的图像文件（即使它周围有黑色空间）

# c# - WPF 组合框和数据绑定到其他类

> ID：10819050
> 
> 赞同：1
> 
> 时间：2012-05-30T15:07:47.403
> 
> 标签：c#, wpf, data-binding, mvvm

全部，

我真的被一个非常基本的概念困住了——我只是找不到我真正理解的答案。

我有一个视图 - viewContacts。它的datacontext是一个viewmodel——viewmodelContacts。

在视图中，我有一个“标题”组合框（你知道......先生，夫人，小姐等）。我想绑定 itemssource 以便它显示选项列表，并绑定 SelectedValue 以便它将键存储在 viewmodelContacts TitleId 属性中。

如果标题（我想将 ItemsSource 绑定到）实际上位于单独的静态类中，则“源”列表 - 注意不是视图模型！

```
internal static class Titles
{
    static IList<Title> _colTitles = null;
    static Titles()
    {
        _colTitles = new List<Title>();
        _colTitles.Add(new Title() { TitleId = 1, Description = "Mr." });
        _colTitles.Add(new Title() { TitleId = 2, Description = "Mrs." });
        _colTitles.Add(new Title() { TitleId = 3, Description = "Miss." });
        _colTitles.Add(new Title() { TitleId = 4, Description = "Ms." });
    }

    internal static IList<Title> GetTitles()
    {
        return _colTitles;
    }
} 
```

（当然，稍后这些东西将从数据库中获取）。

这个简单的任务超出了我作为 WPF 开发人员的才能。

如何将 ItemsSource 设置为这个静态类？如何进一步将 DisplayMemberPath 设置为基础 Title 对象的 Description 属性？

我应该将 SelectedValue 和 SelectedValuePath 设置为什么？

真的希望有人可以帮助我解决一个我无法解决的简单问题。

谢谢，格雷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:41:05.013

在您的 viewModel 中创建一个属性，如下所示：

```
public IList<Title> VmTitles
{
    get
    {
        return Titles.GetTitles();
    }
}

private Title _selectedTitle;
public Title SelectedTitle
{
    get
    {
        return _selectedTitle;
    }
    set
    {
        if (value != _selectedTitle)
        {
            _selectedTitle = value;
            OnPropertyChanged("SelectedTitle");
        }
    }
} 
```

然后在您的 .xaml 中执行以下操作：

```
<ComboBox x:Name="cboTitle" ItemsSource="{Binding Path=VmTitles}" DisplayMemberPath="Description" SelectedItem="{Binding Path=SelectedTitle}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:16:12.093

```
<ComboBox x:Name="cboTitle" SelectedValuePath="TitleId" DisplayValuePath="Description" SelectedValue="{Binding PropertyToBeUpdatedHere}"/> 
```

然后在您的代码中设置组合框的项目源..

```
cboTitle.ItemsSource = Titles.GetTitles(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:39:52.970

只需使用 ObjectDataProvider。

```
<UserControl.Resources>
    <ObjectDataProvider x:Key="cboSource" ObjectType="local:Titles" MethodName="GetTitles"/>
</UserControl.Resources>

    <ComboBox ItemsSource="{Binding Source={StaticResource cboSource}}">
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding Description}"/>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

ps：您必须将内部静态更改为公共静态。

# ruby-on-rails - heroku 上的多线程 ruby 工作者

> ID：10819053
> 
> 赞同：5
> 
> 时间：2012-05-30T15:07:49.363
> 
> 标签：ruby-on-rails, heroku, delayed-job, resque, foreman

我在 Heroku 上有一个 ruby​​ 应用程序，需要使用工作线程进行一些后台处理。我尚未在 Delayed Job 和 Resque 之间做出决定，但这个问题的答案可能会影响我。后台作业将主要等待外部 API（facebook、twitter 等），因此它们的 CPU 利用率将非常低。

有没有办法让heroku上的每个工人测功机获得多个线程？这个标准或可用于`DJ`or的插件`Resque`？还是`foreman`预分叉的配置或其他什么？否则，我将在 95% 处于空闲状态等待外部 API 的工人测功机上浪费大量资金。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T16:17:58.270

你可以试试[sidekiq](https://github.com/mperham/sidekiq)，它的工作方式与 resque 类似，但使用线程同时处理任务。你也可以同时使用 resque 和 sidekiq。

# c# - JQuery 将 html 添加到 div 无法始终如一地工作

> ID：10819056
> 
> 赞同：0
> 
> 时间：2012-05-30T15:07:59.777
> 
> 标签：c#, jquery, asp.net

我在对 asmx 页面进行 ajax 调用时遇到问题，该页面返回添加到 div 的值。问题是即使我总是从 asmx 页面取回数据。该值不会写入 div。这很令人沮丧，因为我知道它在起作用。但数据不会写入 div。可能给这个问题增加一些复杂性是我正在使用谷歌地图 api。

我会发布代码，但它非常大，我怀疑它是否适合。但这是我的 ajax 调用。

```
function loadPropertyInfo(propertyid) {
    $.ajax({
        type: "POST",
        url: "PropertyViewPropertyInfo.asmx/getPropertyInfo",
        contentType: "application/json; charset=utf-8",
        data: "{'pid': '" + propertyid + "'}",
        dataType: "json",
        success: function (msg) {
            $("#bodyContent" + propertyid).html(msg.d);
            //alert(msg.d);
            unescape
        },
        error: AjaxFailed
    });
} 
```

这是问题所在。.html 部分并不总是写入 div。

```
$("#bodyContent" + propertyid).html(msg.d); 
```

但是，如果我取消注释警报，警报弹出时总会有数据。但是没有写入div。

还有其他人遇到这个问题吗？

我可以尝试一下以查看信息是否写入 div 吗？如果不重新运行ajax调用？

这是很长的代码。

* * *

```
 <script type="text/javascript">
            $(document).ready(function () {
            });
            function loadPropertyInfo(propertyid) {
                $.ajax({
                    type: "POST",
                    url: "PropertyViewPropertyInfo.asmx/getPropertyInfo",
                    contentType: "application/json; charset=utf-8",
                    data: "{'pid': '" + propertyid + "'}",
                    dataType: "json",
                    success: function (msg) {
                        $("#bodyContent" + propertyid).html(msg.d);
                        //alert(msg.d);
                        unescape
                    },
                    error: AjaxFailed
                });
            }
            function loadEntityInfo(propertyid) {
                $.ajax({
                    type: "POST",
                    url: "PropertyViewEntityInfo.asmx/getEntityInfo",
                    contentType: "application/json; charset=utf-8",
                    data: "{'pid': '" + propertyid + "'}",
                    dataType: "json",
                    success: function (msg) {
                        $("#propertyentityinfo" + propertyid).html(msg.d);
                        unescape
                    },
                    error: AjaxFailed
                });
            }
            function AjaxSucceeded(result, propertyid) {
                //alert(result.d);
                var divid = "#propertyentityinfo" + propertyid;
                $(divid).text(result);
            }
            function AjaxFailed(result) {
                alert(result.status + ' ' + result.statusText);
            }
        </script>
        <script type="text/javascript">
            var map;
            var mgr;
            var batch = [];
            function initialize() {
                // get the lat lon for the property
                var latlng = new google.maps.LatLng(25.7367330, -80.3158520);
                // map options
                var myOptions = {
                    zoom: 13,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    scaleControl: true,
                    overviewMapControl: true,
                    overviewMapControlOptions: {
                        opened: true
                    }
                };
                // map manager options
                var mgrOptions = {
                    borderPadding: 50,
                    maxZoom: 15,
                    trackMarkers: true
                };
                // setup the map
                map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
                // start the marker manager
                mgr = new MarkerManager(map, mgrOptions);
                // drop the marker for the property
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    title: "Property",
                    zIndex: 5,
                    animation: google.maps.Animation.DROP
                });
                var contentString = "<img id=\"image\" width=\"150\" height=\"100\" style=\"margin: 5px 0;\" src=\"http://maps.google.com/cbk?output=thumbnail&w=150&h=100&ll=25.7367330,-80.3158520\" onclick=\"streetview(25.7367330,-80.3158520)\" onerror=\"imgLoadErr(this)\" alt=\"image\" />";
                var infowindow = new google.maps.InfoWindow({ content: contentString });
                google.maps.event.addListener(marker, 'click', function () {
                    infowindow.open(map, marker);
                });
                // wait for loaded and add markers
                google.maps.event.addListener(mgr, 'loaded', function () {
                    createMarkers(map, mgr)
                });
            }
            // create the markers for entities
            function createMarkers(map, mgr) {
                // find map bounds
                var bounds = new google.maps.LatLngBounds();
                // get the points for the properties and entities from code behind
                var latlng1 = new google.maps.LatLng(25.8955829, -80.2951000);
                var marker1;
                batch.push(marker1 = new google.maps.Marker({ position: latlng1, map: map, icon: '/images/condominium.png', title: "Los Palacios by Miami Lakes Condo Assoc.", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString1 = '<div id="content"><div id="siteNotice"></div><div id="bodyContent"><p>Los Palacios by Miami Lakes Condo Assoc.<br />8001 L W 6th Avenue<br />Hialeah, FL 33014<br /></p><p>Neighborhood Property Management<br />Mayra Ruiz <br />Phone: 3058192361<br /> </p><a href="PropertyView.aspx?id=6542&entitytoadd=19">Add to Property</a> </div></div>';
                var infowindow1 = new google.maps.InfoWindow({ content: contentString1 });
                google.maps.event.addListener(marker1, 'click', function () { infowindow1.open(map, marker1); });
                var latlng2 = new google.maps.LatLng(25.6903715, -80.3174782);
                var marker2;
                batch.push(marker2 = new google.maps.Marker({ position: latlng2, map: map, icon: '/images/condominium.png', title: "Kings Creek West", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString2 = '<div id="content"><div id="siteNotice"></div><div id="bodyContent"><p>Kings Creek West<br />7695 SW 86th <br />Miami, FL 33143<br /></p><p>KW Property Management<br /><br />Phone: 3055989447<br /> </p><a href="PropertyView.aspx?id=6542&entitytoadd=20">Add to Property</a> </div></div>';
                var infowindow2 = new google.maps.InfoWindow({ content: contentString2 });
                google.maps.event.addListener(marker2, 'click', function () { infowindow2.open(map, marker2); });
                var latlng3 = new google.maps.LatLng(25.8955829, -80.2951000);
                var marker3;
                batch.push(marker3 = new google.maps.Marker({ position: latlng3, map: map, icon: '/images/condominium.png', title: "Los Palacios by Miami Lakes Condo Assoc.", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString3 = '<div id="content"><div id="siteNotice"></div><div id="bodyContent"><p>Los Palacios by Miami Lakes Condo Assoc.<br />8001 L W 6TH Avenue<br />Hialeah, FL 33014<br /></p><p>Neighborhood Property<br />Mayra Ruiz <br />Phone: 3058192361<br /> </p><a href="PropertyView.aspx?id=6542&entitytoadd=40">Add to Property</a> </div></div>';
                var infowindow3 = new google.maps.InfoWindow({ content: contentString3 });
                google.maps.event.addListener(marker3, 'click', function () { infowindow3.open(map, marker3); });
                var latlng4 = new google.maps.LatLng(25.6903715, -80.3174782);
                var marker4;
                batch.push(marker4 = new google.maps.Marker({ position: latlng4, map: map, icon: '/images/condominium.png', title: "Kings Creek West Condominiums Association", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString4 = '<div id="content"><div id="siteNotice"></div><div id="bodyContent"><p>Kings Creek West Condominiums Association<br />7695 SW 86TH <br />Miami, FL 33143<br /></p><p>c/o KW Property Management<br />Frank Diaz <br />fduaz@kwpropertymanagement.com<br /> Phone: 3055989447<br /> </p><a href="PropertyView.aspx?id=6542&entitytoadd=44">Add to Property</a> </div></div>';
                var infowindow4 = new google.maps.InfoWindow({ content: contentString4 });
                google.maps.event.addListener(marker4, 'click', function () { infowindow4.open(map, marker4); });
                var latlng5 = new google.maps.LatLng(25.6856640, -80.3569920);
                var marker5;
                batch.push(marker5 = new google.maps.Marker({ position: latlng5, map: map, icon: '/images/condominium.png', title: "Puerta del Sol Condominiums Association", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString5 = '<div id="content"><div id="siteNotice"></div><div id="bodyContent"><p>Puerta del Sol Condominiums Association<br />9972 SW 88h Street<br />Miami, FL 33176<br /></p><p>Crest Management Group<br />Nancy Messinger <br />Phone: 5619942334<br /> </p><a href="PropertyView.aspx?id=6542&entitytoadd=45">Add to Property</a> </div></div>';
                var infowindow5 = new google.maps.InfoWindow({ content: contentString5 });
                google.maps.event.addListener(marker5, 'click', function () { infowindow5.open(map, marker5); });
                var latlng101 = new google.maps.LatLng(25.9319210, -80.2566680);
                var marker101;
                batch.push(marker101 = new google.maps.Marker({ position: latlng101, map: map, icon: '/images/home.png', title: "092-710510 17310 NW 33 CT", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString101 = '<div id="content" style="margin: 0; padding: 0;"><h1 id="firstHeading" class="firstHeading" style="margin: 0; padding: 0;">Property</h1><div id="bodyContent6545"><br /><img src="/images/ajax-loader.gif" alt="wait" /><br /><br /><br /><br /><br /></div><div id="propertyentityinfo6545"><img src="/images/ajax-loader.gif" alt="wait" /></div></div>';
                var infowindow101 = new google.maps.InfoWindow({ content: contentString101 });
                google.maps.event.addListener(marker101, 'click', function () { infowindow101.open(map, marker101); loadPropertyInfo(6545); loadEntityInfo(6545); });
                var latlng102 = new google.maps.LatLng(25.8342470, -80.2393530);
                var marker102;
                batch.push(marker102 = new google.maps.Marker({ position: latlng102, map: map, icon: '/images/home.png', title: "092-712924 6540 NW 25 AVE", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString102 = '<div id="content" style="margin: 0; padding: 0;"><h1 id="firstHeading" class="firstHeading" style="margin: 0; padding: 0;">Property</h1><div id="bodyContent6546"><br /><img src="/images/ajax-loader.gif" alt="wait" /><br /><br /><br /><br /><br /></div><div id="propertyentityinfo6546"><img src="/images/ajax-loader.gif" alt="wait" /></div></div>';
                var infowindow102 = new google.maps.InfoWindow({ content: contentString102 });
                google.maps.event.addListener(marker102, 'click', function () { infowindow102.open(map, marker102); loadPropertyInfo(6546); loadEntityInfo(6546); });
                var latlng103 = new google.maps.LatLng(25.8736080, -80.3347040);
                var marker103;
                batch.push(marker103 = new google.maps.Marker({ position: latlng103, map: map, icon: '/images/home.png', title: "092-930413 2565 W 56TH ST 202", zIndex: 1, animation: google.maps.Animation.DROP }));
                var contentString103 = '<div id="content" style="margin: 0; padding: 0;"><h1 id="firstHeading" class="firstHeading" style="margin: 0; padding: 0;">Property</h1><div id="bodyContent6560"><br /><img src="/images/ajax-loader.gif" alt="wait" /><br /><br /><br /><br /><br /></div><div id="propertyentityinfo6560"><img src="/images/ajax-loader.gif" alt="wait" /></div></div>';
                var infowindow103 = new google.maps.InfoWindow({ content: contentString103 });
                google.maps.event.addListener(marker103, 'click', function () { infowindow103.open(map, marker103); loadPropertyInfo(6560); loadEntityInfo(6560); });
                // add the array to the map manager
                mgr.addMarkers(batch, 16);
                // dump markers off the map screen
                dropSuperfluousMarkers()
                // refresh
                mgr.refresh();
            }
            // remove markers that aren't currently visible
            function dropSuperfluousMarkers() {
                var alertme;
                // get the map bounds cords
                mapBounds = map.getBounds();
                // loop through the array
                for (var i = 0, ii = batch.length; i < ii; i++) {
                    if (!batch[i]) { continue };
                    if (!mapBounds.contains(batch[i].getPosition())) {
                        // remove from the map
                        batch[i].setMap(null);
                        // remove from the markers array
                        batch.splice(i, 1);
                    }
                }
            }
            // return if image doesn't exist
            function imgLoadErr(obj) {
                obj.alt = "Error Loading Image.\n";
                obj.alt = obj.alt + "Image does not exist in Google Maps.";
            }
            // show streetview
            function streetview(lat, lon) {
                var point1 = new google.maps.LatLng(lat, lon);
                var panoramaOptions = {
                    position: point1,
                    zoom: 0,
                    streetViewControl: true,
                    enableCloseButton: true
                };
                var myPano = new google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);
                map.setStreetView(myPano);
                google.maps.event.addListener(myPano, 'closeclick', closeme);
                //GEvent.addListener(myPano, "error", handleNoFlash);
                document.getElementById("outerpano").style.display = "";
                document.getElementById("outerpano").height = "250px";
                document.getElementById("pano").style.display = "";
                document.getElementById("pano").height = "250px";
            }
            // close the streetview
            function closeme() {
                document.getElementById("outerpano").style.display = "none";
            }
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:14:23.593

如果它没有写入 div 但 msg 中的数据存在，那么您的选择器`$("#bodyContent" + propertyid)`一定是错误的！对此提出警告：

```
alert($("#bodyContent" + propertyid).html()); 
```

或使用 Firebug 等查询它。确保您的选择器是正确的，因为在我看来，它不是

**编辑** 正确地浏览了您上面的代码。我相信问题出在

```
infowindow100.open(map, marker100); loadPropertyInfo(6); loadEntityInfo(6); 
```

这是在点击事件上触发的。我认为问题在于，当调用 infowindow.open 时，在渲染之前会有延迟。因此，当您调用`loadPropertyInfo(6);`它时，它会因为找不到 infor 窗口而失败，因为实际上它不存在。

两种解决方案，

1.  infowindow.open 有回电吗？快速浏览但不确定？
2.  等一段时间再打电话`loadPropertyInfo(6);`

试试这个：

```
infowindow100.open(map, marker100); setTimeout(function() {loadPropertyInfo(6); loadEntityInfo(6);}, 500); 
```

**这不漂亮**，但如果这解决了你的问题，它证明了我的上述陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:18:36.130

一些事情，

1.  检查文档准备好后是否调用该函数？
2.  ajax调用设置IF条件，propertyid不为null时才进行ajax调用
3.  确保`msg.d`正确
4.  试试这行代码：
    `$('#bodyContent'+propertyid).empty().html(msg.d);`

# html - JScript 框架获取加载的 HTML

> ID：10819058
> 
> 赞同：0
> 
> 时间：2012-05-30T15:08:06.640
> 
> 标签：html, url, load, jscript

我正在创建一个 JScript 框架，我需要从中获取加载的 HTML 代码。

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:09:21.853

如果框架中加载的页面位于另一个域中（您无法控制），那就忘记它；你不能。如果它在同一个域上 - 或者它来自的域正在使用[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)- 那么它是可能的：

var frame = document.getElementById("container"); var frameDoc = frame.contentDocument || 框架.iFrame.contentWindow.document；

这将为您提供框架的文档对象；然后，您可以调用该对象上的`getElementsByTagName`或之类的函数`getElementById`，以从 iframe 中返回内容。如果您只想要所有的 HTML，那么您可以使用`frameDoc.documentElement.innerHTML`.

（如果页面在另一个域上，但您确实可以控制该域，那么您需要在该域上设置跨域资源共享以使其工作 - 但即使那样，它也不会完全工作浏览器。）

# iphone - 应用程序在第 4 代 iPod 上崩溃，但在 iPhone 3gs、iPad 1 或 iPad 3 上没有？

> ID：10819059
> 
> 赞同：0
> 
> 时间：2012-05-30T15:08:07.717
> 
> 标签：iphone, ios, facebook, ipod

我继承了一个 iOS 应用程序，它使用 Irrlicht 引擎来实现其大部分功能，并且遇到了一个相当烦人的问题。

我们正在使用 Facebook Connect 登录和注册，因为我只能假设是其他内存问题，我在 iPhone 上使用 FB 应用程序和 iPad 上的对话窗口。

然而，在 iPod Touch 4th gen 上，一旦出现登录对话框，应用程序就会崩溃。它适用于其他设备 - 有一个陷阱。如果 iPad 1 插入 Mac，那么当 Facebook Dialog 出现时它也会崩溃，无论我是否真的通过 xcode 运行它。无论如何，3GS 似乎都能正常工作，而且我相信 iPad 3 也能可靠地工作。iPad 3 和有问题的 iPod 不在现场，所以我无法彻底测试它们。

鉴于3GS版本没有问题，iPod版本有什么理由这么容易崩溃。他们目前都在使用同一组资产，所以如果这是我希望他们都崩溃的问题。

有什么建议么？

编辑：这是受影响设备上的控制台输出。

```
May 30 23:16:23 unknown kernel[0] <Debug>: launchd[1298] Builtin profile: container (sandbox)

May 30 23:16:23 unknown kernel[0] <Debug>: launchd[1298] Container: /private/var/mobile/Applications/87B7926A-AA91-48BA-B7EE-73BCDBACCC17 [69] (sandbox)

May 30 23:16:23 unknown Golman[1298] <Warning>: Unknown class AdMobView in Interface Builder file.

May 30 23:16:37 unknown MobileMail[1245] <Warning>: Received memory warning.

May 30 23:16:38 unknown Golman[1298] <Warning>: Received memory warning.

May 30 23:16:38 unknown Golman[1298] <Warning>: Warning: Libinfo call to mDNSResponder on main thread

May 30 23:16:38 unknown SpringBoard[51] <Warning>: Received memory warning.

May 30 23:16:42 unknown Golman[1298] <Warning>: enter login page

May 30 23:16:53 unknown Golman[1298] <Warning>: leave login page

May 30 23:16:53 unknown Golman[1298] <Warning>: enter login page

May 30 23:17:00 unknown Golman[1298] <Warning>: leave login page

May 30 23:17:00 unknown Golman[1298] <Warning>: enter login page

May 30 23:17:18 unknown Golman[1298] <Warning>: leave login page

May 30 23:17:18 unknown Golman[1298] <Warning>: enter login page

May 30 23:17:21 unknown Golman[1298] <Warning>: leave login page

May 30 23:17:21 unknown Golman[1298] <Warning>: enter login page

May 30 23:17:24 unknown Golman[1298] <Warning>: leave login page

May 30 23:17:24 unknown Golman[1298] <Warning>: enter login page

May 30 23:17:38 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.plantpot.golman[0xaf95]) Exited: Killed: 9

May 30 23:17:38 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created

May 30 23:17:39 unknown SpringBoard[51] <Warning>: Unable to send deactivation event to <SBApplication: 0xfda12e0> com.plantpot.golman userLaunch statusBarWindowContextId = 1325144038 statusBarOrientation = 3  activate:  deactivate: animate animationStart = 36566.94129066667 animationScale = 0.001 animationDuration = 0.4 : (ipc/send) invalid destination port

May 30 23:17:39 unknown SpringBoard[51] <Warning>: Application 'Golman' exited abnormally with signal 9: Killed: 9

May 30 23:17:40 unknown kernel[0] <Debug>: launchd[1304] Builtin profile: container (sandbox)

May 30 23:17:40 unknown kernel[0] <Debug>: launchd[1304] Container: /private/var/mobile/Applications/8FF2FEC5-D24D-4DBB-BC6B-782F89051CFC [69] (sandbox)

May 30 23:17:41 unknown ReportCrash[1303] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-05-30-231741.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0

May 30 23:17:46 unknown UIKitApplication:com.facebook.Facebook[0x4c2b][1304] <Notice>: wait_fences: failed to receive reply: 10004003

May 30 23:17:50 unknown Golman[1308] <Warning>: Unknown class AdMobView in Interface Builder file.

May 30 23:17:50 unknown kernel[0] <Debug>: launchd[1308] Builtin profile: container (sandbox)

May 30 23:17:50 unknown kernel[0] <Debug>: launchd[1308] Container: /private/var/mobile/Applications/87B7926A-AA91-48BA-B7EE-73BCDBACCC17 [69] (sandbox)

May 30 23:17:51 unknown Golman[1308] <Warning>: Logged into facebook

May 30 23:18:01 unknown MobileMail[1245] <Warning>: Received memory warning.

May 30 23:18:02 unknown SpringBoard[51] <Warning>: Received memory warning.

May 30 23:18:03 unknown Golman[1308] <Warning>: void SendDelegateMessage(NSInvocation*): delegate (webView:didCommitLoadForFrame:) failed to return after waiting 10 seconds. main run loop mode: kCFRunLoopDefaultMode

May 30 23:18:05 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.apple.mobilemail[0x6fdf]) Exited: Killed: 9

May 30 23:18:05 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created

May 30 23:18:05 unknown SpringBoard[51] <Warning>: pid_suspend failed for [1304]: Unknown error: -1, Unknown error: -1

May 30 23:18:05 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.facebook.Facebook[0x4c2b]) Exited: Killed: 9

May 30 23:18:05 unknown SpringBoard[51] <Warning>: Application 'Mail' exited abnormally with signal 9: Killed: 9

May 30 23:18:06 unknown SpringBoard[51] <Warning>: Application 'Facebook' exited abnormally with signal 9: Killed: 9

May 30 23:18:06 unknown Golman[1308] <Warning>: Received memory warning.

May 30 23:18:07 unknown Golman[1308] <Warning>: Warning: Libinfo call to mDNSResponder on main thread

May 30 23:18:08 unknown ReportCrash[1310] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-05-30-231808.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0

May 30 23:18:09 unknown Golman[1308] <Warning>: (friends list received)

May 30 23:18:11 unknown com.apple.launchd[1] <Notice>: (UIKitApplication:com.plantpot.golman[0x8c4]) Exited: Killed: 9

May 30 23:18:11 unknown UserEventAgent[12] <Notice>: jetsam: kernel termination snapshot being created

May 30 23:18:11 unknown SpringBoard[51] <Warning>: Application 'Golman' exited abnormally with signal 9: Killed: 9

May 30 23:18:12 unknown SpringBoard[51] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=0

May 30 23:18:12 unknown SpringBoard[51] <Notice>: MultitouchHID: detection mode: 0->255

May 30 23:18:12 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 1

May 30 23:18:12 unknown UserEventAgent[12] <Warning>: DEBUG: We could backup; waking backupd to decide

May 30 23:18:12 unknown UserEventAgent[12] <Warning>: TRACE: <MBManagerClient: 0x1402d0> establishing connection with daemon...

May 30 23:18:13 unknown UserEventAgent[12] <Warning>: TRACE: <MBConnection: 0x155340> sending {
    command = kMBMessageWakeUp;
}

May 30 23:18:14 unknown backupd[1313] <Warning>: INFO: Scheduling next backup at 5/31/12 11:01:35 PM

May 30 23:18:17 unknown ReportCrash[1314] <Notice>: Saved crashreport to /Library/Logs/CrashReporter/LowMemory-2012-05-30-231817.plist using uid: 0 gid: 0, synthetic_euid: 0 egid: 0 
```

编辑 2：我刚刚在发生这种情况的屏幕上使用了分配工具。此时，“所有分配”字段中的活动字节最多只能达到 34 / 35 MB。这似乎不足以导致内存问题。此外，在将纹理加载到游戏中时，内存警告开始出现在该点之前。该应用程序使用 Irrlicht 库，如果这对此事有任何启发。几乎所有的图像、动画、声音等都是在一开始就加载的，但是当这种情况发生时应用程序永远不会崩溃。几乎总是在打开某种 web 视图时，例如 FB 对话框。如评论中所述，该项目最初属于其他人。不幸的是，当他们完成它时，它并不完全稳定。

编辑 3：现在已尝试使用内存监视器。它第一次在加载纹理时崩溃，并向我展示了它正在使用 ~80MB 真实内存和 ~200MB 虚拟内存。之后我停止它加载任何纹理，这次它仍然崩溃，显示 69MB 和 179MB。删除了音频和动画“虚拟”，它在开始时初始化并在 38MB/147MB 时崩溃。

不知道它怎么会在不加载纹理的情况下这么快就用完这么多内存。

# sockets - GNAT.Sockets 获取 MAC 地址

> ID：10819064
> 
> 赞同：3
> 
> 时间：2012-05-30T15:08:27.623
> 
> 标签：sockets, ada, mac-address, gnat

有没有办法通过 GNAT.Sockets 获取 MAC 地址？

我已经多次阅读 .ads 文件，但没有看到任何看起来会产生 MAC 地址的内容。

[广告在这里](http://en.wikibooks.org/wiki/Ada_Programming/Libraries/GNAT.Sockets)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:11:23.933

在搜索您的问题时，我在[这里](http://www.len.ro/work/programmatically-get-the-mac-address-in-c/)找到了一个 C 解决方案，您可以使用该解决方案。与调用系统命令相比，这样做的一个优点是您不依赖于解析命令的输出，因此不依赖于它的格式。一个缺点是您必须使用 Ada 的接口附件，但由于它是标准的，因此很容易。

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:45:30.443

获取您的本地套接字地址`Get_Socket_Name`并将其与您的网络接口之一的地址匹配。

# excel - DATEADD 和缺少的日期

> ID：10819065
> 
> 赞同：1
> 
> 时间：2012-05-30T15:08:29.393
> 
> 标签：excel, dateadd, powerpivot, dax

如何可靠地将 10 个月添加到 PowerPivot 计算列的 DAX 公式中的日期？

我的第一次尝试仅适用于 EventDate 列中已经存在的日期。

```
=DATEADD(Dates[EventDate], 10, month) 
```

正如 Chris Webb 在他的博客中所写的那样，[DATEADD 是不可靠](http://cwebbbi.wordpress.com/2012/01/06/the-dax-dateadd-function-and-missing-dates/)的，因为只要在 EventDate 列中找不到结果日期，它就会返回空白。

我的第二次尝试总是返回数据，但月份的日期不正确。

```
=[EventDate] + 10 * 31 
```

注意：EventDate 中的所有日期都是当月的第一天。我正在使用 Excel 2010 的 PowerPivot。该公式适用于日期维度中的财政年度层次结构。

有没有更好的方法在 DAX 中添加月份？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T01:57:55.180

这是一个旧的，但可能仍然有用......

```
=IF(
    DAY([Eventdate])>DAY(EOMONTH([Eventdate],10)),
             DATE(year(eomonth([Eventdate],10)),month(eomonth([Eventdate],10)),day(EOMONTH([Eventdate],10))),
             DATE(year(eomonth([Eventdate],10)),month(eomonth([Eventdate],10)),day([Eventdate]))
    ) 
```

这假设“合作伙伴”10 个月的天数较少，它将默认为该月的最后一天。

HTH 雅各布

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-05T20:06:27.013

Another way to add time to a date using DAX is using [EDATE()](https://msdn.microsoft.com/en-us/library/ee634544.aspx), this function add months and it will return the right day of the month. For example:

```
Foo = EDATE(Dates[EventDate], 10) 
```

# c# - 更新在 SQL Server CE C# 中不起作用

> ID：10819071
> 
> 赞同：-1
> 
> 时间：2012-05-30T15:08:47.793
> 
> 标签：c#, winforms, sql-server-ce

我正在尝试创建更新 WINFORM，背景故事是当用户双击特定 GUID 时表单将从 dataGridView 获取信息。

我的问题是，当用户输入信息并单击提交按钮时，我收到错误消息：

> 解析查询时出错。[令牌行号 = 1，令牌行偏移量 = 66，错误令牌 = Desc]。

这可能是一个简单的错误，我只是在看，但感谢任何帮助。按钮单击的代码是：

```
private void sbmtChng_Click(object sender, EventArgs e)
{
        string conString = Properties.Settings.Default.CurricularChangeTrackerConnectionString;

        using (SqlCeConnection conn = new SqlCeConnection(conString))
        {
            try
            {
                conn.Open();

                string cmdString = "UPDATE Changes SET "
                     + "ProgramCode=@ProgramCode,CourseNum=@CourseNum,Desc=@Desc,ScreenCom=@ScreenCom,PECAprv=@PECAprv,SenAprv=@SenAprv,EffDte=@EffDte,APG=@APG,Analysis=@Analysis,Matrix=@Matrix,DESE=@DESE"
                     + " WHERE Code_ID=@Code_ID";

                using (SqlCeCommand cmd = new SqlCeCommand(cmdString, conn))
                {
                    cmd.Parameters.AddWithValue("@Code_ID", SqlDbType.UniqueIdentifier).Value = Code_ID;
                    cmd.Parameters.AddWithValue("@ProgramCode", SqlDbType.NVarChar).Value = PrgmCode;
                    cmd.Parameters.AddWithValue("@CourseNum", SqlDbType.NVarChar).Value = CrseLbl.Text;
                    cmd.Parameters.AddWithValue("@Desc", SqlDbType.NVarChar).Value = ChngDes.Text;
                    cmd.Parameters.AddWithValue("@ScreenCom", SqlDbType.NVarChar).Value = scrnCmtDte.Text;
                    cmd.Parameters.AddWithValue("@PECAprv", SqlDbType.NVarChar).Value = pecAprDte.Text;
                    cmd.Parameters.AddWithValue("@SenAprv", SqlDbType.NVarChar).Value = senAprvDateTimePicker.Text;
                    cmd.Parameters.AddWithValue("@EffDte", SqlDbType.NVarChar).Value = effDte.Text;
                    cmd.Parameters.AddWithValue("@APG", SqlDbType.NChar).Value = checkBox5.Text;
                    cmd.Parameters.AddWithValue("@Analysis", SqlDbType.NChar).Value = checkBox6.Text;
                    cmd.Parameters.AddWithValue("@Matrix", SqlDbType.NChar).Value = checkBox7.Text;
                    cmd.Parameters.AddWithValue("@DESE", SqlDbType.NChar).Value = checkBox8.Text;
                    cmd.ExecuteNonQuery();
                    conn.Close();

                    /*this.Controls.Clear();
                    this.InitializeComponent();
                    this.Close();
                    */
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:14:32.057

`DESC`是保留关键字。重命名列（首选）或更改代码以将列名括在方括号中：

```
+ "ProgramCode=@ProgramCode,CourseNum=@CourseNum,[Desc]=@Desc,..."
// ----------------------------------------------^----^ 
```

# knockout.js - 新行未使用映射插件正确映射

> ID：10819077
> 
> 赞同：0
> 
> 时间：2012-05-30T15:09:05.767
> 
> 标签：knockout.js

我将映射插件与我自己的原型类型一起使用

来自 JSON

```
var mapping = {
    Children: {
        create: function(options) {
            return ko.mapping.fromJS(options.data, {}, new ChildViewModel());
        }
    }
};

$.getJSON(url, null, function (data) {
    var model = ko.mapping.fromJS(data, mapping, new RootViewModel());
    ko.applyBindings(model);
}); 
```

转 JSON

```
var data = ko.mapping.toJSON(this); 
```

json 数据具有原始子项，新添加的项只是空的 json 对象`{}`

我从根模型中添加这样的子项

```
addChild: function () {
    this.Children.push(new ChildViewModel());
} 
```

怎么了？

**更新：** 重现我的问题的小提琴

[http://jsfiddle.net/pDnnM/](http://jsfiddle.net/pDnnM/)

**Update2** 在一些谷歌发现仍然没有骰子后测试了另一种方法：/

[http://jsfiddle.net/5UDhB/](http://jsfiddle.net/5UDhB/)

**回答后更新**

我有需要映射然后序列化为 JSON 的主模型和子模型的数据

[http://jsfiddle.net/699YH/](http://jsfiddle.net/699YH/)

所以我需要它来映射主模型和子模型，也许这是不可能的？

**更新 CRUD 操作如何？** 感谢 Stackoverflow 的 google 和 Madcapnmckay。我有最后一个问题，在此之后，我认为我可以使用我们目前正在使用手动映射器执行的映射插件来完成所有事情（我们很快就会达到 100 多个视图模型，因此手动映射器开始让我们感到沮丧）。

我还没有找到映射器处理 CRUD 场景的方法，假设加载视图时有 5 个项目，这些项目有 id，然后添加 2 个项目，这些项目 id：0。然后我们保存将整个 VM 发送到后端这些新行获得新的 ID。我在更新时调用了映射器插件，但它失败了`When calling ko.update*, the key '0' was not unique!`

[http://jsfiddle.net/3bWcF/2/](http://jsfiddle.net/3bWcF/2/)

你可以做

```
this.items.remove(function(item) { return item.id() == 0;}); 
```

就在调用映射器之前，但是映射器可以为你做吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:32:07.357

问题是您动态添加的孩子不是由映射插件创建的。您可以通过像这样移动对象内部的映射来解决此问题并清理代码。

[http://jsfiddle.net/madcapnmckay/3bWcF/1/](http://jsfiddle.net/madcapnmckay/3bWcF/1/)

```
var mappings = {
    items: {
        key: function(data) {
            return data.id;
        },
        create: function(options) {
            return new ChildViewModel(options.data)
        }
    }
};    

var counter = 5;

ViewModel = function(config) {
    ko.mapping.fromJS(config, mappings, this);   

    this.json = ko.computed(function() {
        return ko.mapping.toJSON(this, { ignore: [ "json" ] });
    }, this);
};

ViewModel.prototype = {
    add: function() {
        this.items.push(new ChildViewModel({ 
            id: counter++, 
            name: "new row" + counter 
        }));
    }
};

ChildViewModel = function(config) {
    ko.mapping.fromJS(config, {}, this);
};

ko.applyBindings(new ViewModel(data)); 
```

希望这可以帮助。

# c# - 将 Gridview 数据另存为模板

> ID：10819081
> 
> 赞同：0
> 
> 时间：2012-05-30T15:09:14.907
> 
> 标签：c#, asp.net

我有一个在 Gridview 中生成的报告，我想将该报告保存为模板以供以后检索。我不想导出到excel。该模板应该可供用户在登录时检索和查看。我使用的是 VS 2008 和 C#/ASP.NET

在将它绑定到 gridview 之前，我会根据一些业务逻辑和表示目的格式化 gridview 数据源，因此我不能只将检索 SQL 保留在数据库中。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:47:04.890

如果目的是创建数据的“快照”，即用于历史目的且永远不会更改的数据，我建议创建您的导出（无论是 excel、word、pdf 等），然后保存文件到文件系统或数据库。

另一种选择是创建一组与您的“实时”表基本相同的“快照”表，您可以使用原始 sql 语句从这些表中查询。您可能包含一些 UI，允许用户根据某个日期范围过滤此数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T04:31:55.837

我只是将检索数据过滤器控件的值作为模板保存到数据库中，稍后用户可以选择并生成报告。

# linux-kernel - 设备驱动程序 proc 条目所有权

> ID：10819086
> 
> 赞同：0
> 
> 时间：2012-05-30T15:09:22.913
> 
> 标签：linux-kernel, device-driver

我是设备驱动程序的新手，我正在努力解决 /sys/class/net/atm0/statistics/* 问题，我现在想知道哪个模块是该条目的所有者，有办法做到这一点吗？

在此先感谢，pedr0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:21:03.463

您实际上是在查看 sysfs，而不是 procfs。

无论如何，在我的系统上使用类似的示例：

```
# cd /sys/class/net/wlan0
# cd ../
# ls -lah
lrwxrwxrwx  1 root root 0 May 24 19:19 wlan0 -> ../../devices/pci0000:00/0000:00:1c.1/0000:03:00.0/net/wlan0
# cd ../../devices/pci0000:00/0000:00:1c.1/0000:03:00.0/
# ls -lah 
lrwxrwxrwx 1 root root    0 May 24 19:19 driver -> ../../../../bus/pci/drivers/iwlwifi
# cd driver
# ls -lah
lrwxrwxrwx  1 root root    0 May 30 19:17 module -> ../../../../module/iwlwifi 
```

在我的系统上 wlan0 由 iwlwifi 模块管理。

# javascript - 向最终用户公开 javascript 模板

> ID：10819087
> 
> 赞同：0
> 
> 时间：2012-05-30T15:09:27.870
> 
> 标签：javascript, template-engine

我想允许最终用户通过允许他们指定一个模板字符串来进行一些自定义，该模板字符串在填充了用户可访问变量的对象的上下文中进行评估。但是，我看到有人对此表示[担忧](https://stackoverflow.com/questions/9946416/how-safe-is-to-allow-customer-edit-handlebar-js-template)。我只需要让用户访问定义值的打印。允许他们调用代码是不必要的，只会给一个小功能增加太多的复杂性。

我需要的唯一功能的伪代码：

```
var userTemplate = "{{Persons.Total}} persons including {{Persons.First}}";
var variables = { Persons { Total: 10, First: "Bob" } };
return template(userTemplate, variables); // = "10 persons including Bob" 
```

是否有任何“用户安全”的模板库？还是我应该自己用一堆正则表达式来做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:11:27.333

[OWASP XSS 预防备忘单](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet#RULE_.230_-_Never_Insert_Untrusted_Data_Except_in_Allowed_Locations)包含许多用于清理用户输入的规则，以防止跨站点脚本（也称为 javascript 注入）。

Rule6 特别有趣，因为它讨论了使用 HTML 策略引擎以出站方式验证或清理用户驱动的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:04:49.187

你真的需要一堆正则表达式吗？在您的简单情况下，只需检查是否没有标签就足够了：

```
regex=/<[\s\S]+>/ 
```

# jquery - 基于类的jquery获取上一个类号

> ID：10819088
> 
> 赞同：1
> 
> 时间：2012-05-30T15:09:39.757
> 
> 标签：jquery

我有这个

```
<li class="sub_nivel nivel_3"> level 3 </li> 
```

在这种情况下，我需要知道这个“nivel_”的数量 3，以便我可以操纵以前的 nivel_2 z-index 属性。

我怎样才能做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:16:58.583

在这里查看[http://jsfiddle.net/8hrZw/1/](http://jsfiddle.net/8hrZw/1/)

示例 HTML 是

```
<ul>
 <li class="sub_nivel nivel_3"> level 3 </li>
 <li class="sub_nivel nivel_4"> level 4 </li>
 <li class="sub_nivel nivel_5"> level 5 </li>
</ul> 
```

jQuery代码是

```
$(document).ready(function(){
    $("li[class*='nivel_']").each(function(){
       var niv_num= $(this).attr("class").split("nivel_")[1];// get the number
        // You can do your z-index below instead of my code
        $(this).text("The number is "+niv_num);
    });
}); 
```

我正在根据数字更改文本。您可以编写代码而不是更改文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:18:10.177

您可以从类值中获取当前数字：

```
$("li.sub_nivel").on("click", function(){
    var nivel = $(this).attr("class").match(/nivel_([\d]+)/),
        antes = parseInt(nivel[1],10)-1 ;
    alert( antes );
});​ 
```

小提琴：http: [//jsfiddle.net/tHXyq/2/](http://jsfiddle.net/tHXyq/2/)

# php - 在 PHP 中发送 javascript 函数以格式化为 JSON (highcharts)

> ID：10819090
> 
> 赞同：1
> 
> 时间：2012-05-30T15:09:53.537
> 
> 标签：php, json, zend-framework, highcharts

嗨，我正在 Zend Report 控制器脚本中为 highcharts 设置一些变量，如下所示：

```
 $chartOptions = array(
        "chart"=> array(
            //chart type
            "type" => "bar",
                    "spacingBottom" => 25
        ),
        "height"=>1,
        "title" => array(
            "text" => $spm->getFullName()
        ), 
```

等等

我想要结束的json也有这个：

```
exporting: {
    buttons: {
        exportButton: {
            menuItems: [{
                text: 'Export to PNG (with text)',
                onclick: function() {
                    this.exportChart({},{
                        labels: {
                            items:[{
                                html: "System: x.x.x, Date/Time: 30:05:2012 14:32:00",
                                style: {
                                    left: '50%',
                                    top: '250px'
                                }                                            
                            }]
                        }
                    });
                }
            }, {
                text: 'Export to PNG (default)',
                onclick: function() {
                    this.exportChart();
                }
            },
            null,
            null
            ]
        }
    }
} 
```

所以我需要像这样设置PHP数组：

```
$chartOptions = array(
    "chart"=> array(
        //chart type
        "type" => "bar",
        "spacingBottom" => 25
     ),
    "height"=>1,
    "title" => array(
        "text" => $spm->getFullName()
    ),
    "exporting" => "buttons" => 
```

等等。但是由于javascript函数，我不确定该怎么做。Zend 报表控制器将所有变量复制到视图脚本中，我不知道它是如何将 php 转换为 json 的，但它确实可以工作：/ 抱歉，我无法提供更多帮助。

我想要的只是输出的 json 包含上面的 javascript，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T19:42:54.577

这是一个可以帮助您的解决方案：http: [//solutoire.com/2008/06/12/sending-javascript-functions-over-json/](http://solutoire.com/2008/06/12/sending-javascript-functions-over-json/)

实际上，这个想法是将函数编码为字符串，然后在将其传递给 javascript 并将其传递到 highcharts 之前对其进行解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:25:56.143

似乎可以使用 Zend 将 javascript 回调编码为 json 数据。更多信息在这里： http: [//framework.zend.com/manual/en/zend.json.advanced.html](http://framework.zend.com/manual/en/zend.json.advanced.html)

# java - 如何管理重复的 UI 元素

> ID：10819091
> 
> 赞同：3
> 
> 时间：2012-05-30T15:09:58.253
> 
> 标签：java, android, user-interface

如何避免为完全相同的 UI 元素重复代码？在 android 中，要以编程方式访问元素，您需要使用唯一的 id 命名每个元素。

例如，我有一个后退按钮，无论在何处使用，它都执行完全相同的功能，但由于必须对它们进行标识，我最终拥有 BackButton1、BackButton2、BackButton3 等。因此，我必须为每个按钮重写相同的 OnClickListener。

是否有类似于 html 'class' 属性或类似方式在 android 中对元素进行分组？如果不是，那么命名重复元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:14:50.107

如果您在布局 xml 中定义按钮，那么您可以使用该`onclick`属性来引用您的活动中的常用方法，该方法将在单击按钮时调用。

如果您`onclick="doBack"`在 xml 中使用，那么您的活动中有一个名为

```
public void doBack(View v) {
   // perform back
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:34:38.857

当然，您可以重用您的 UI 组件，有关更多详细信息，请参阅[Android 开发者网站](http://developer.android.com/resources/articles/layout-tricks-reuse.html)：

你也`ViewStub`可以做你想做的事，以防你不希望整个`Layout`都被包含在内，而只是一些组件，再次学习这个的最佳来源将是[Android 开发者网站](http://developer.android.com/resources/articles/layout-tricks-stubs.html)

就重用`ID`而言，我的看法是你可以重用 ID，只要它们不在同一个`Activity`

来自开发文档：

> ID 不必在整个树中是唯一的，但它应该在您正在搜索的树的一部分中是唯一的（这通常可能是整棵树，因此最好尽可能完全唯一）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:26:12.490

您是否考虑过这样一个事实，即在一个用户界面上拥有多个执行相同操作的元素是一个坏主意？如果您有一个按钮，单击该按钮会将您带到上一个活动，您可能应该将它放在屏幕的一个易于访问的部分中。

# version-control - 带有远程开发服务器的 SCM 工作流

> ID：10819093
> 
> 赞同：0
> 
> 时间：2012-05-30T15:10:03.667
> 
> 标签：version-control, editor, workflow

我在为我们的小型开发团队组织新的工作流程时遇到了一些麻烦。我们的团队由位于不同地点的五名开发人员和两名设计师组成。目前我们正在使用 Zend Studio 5.5，因为它可以在 Mac、Linux 和 Windows 上运行，让我们可以通过 FTP/SFTP 直接在远程机器上工作。通常是开发服务器，但有时在实时服务器上。我认为每个人每天都在从事 2-5 个不同的项目。有时几个星期主要在一个项目上，但这种情况并不经常发生。我认为在一年内可以减少 +/- 30 个项目。

我想让每个人都使用（某种形式的）SCM。我正在研究适合我们团队的 IDE 和工作流程。在我的研究中，我注意到很多 IDE 和 scm 工作流程都假设您在本地开发（本地 Apache、Mysql、PHP 和其他组件）。我的同事宁愿不必在本地安装堆栈，而是在远程编辑并在他们在浏览器中按 F5 时立即看到更改。

有没有人有这种设置的经验？什么是具有良好远程编辑支持的良好工作流程和跨平台编辑器？支持“打开时下载”和“保存时上传”的编辑器也足够了。我考虑过创建一些排序服务，当文件更改时会触发 rsync，但我认为这对他们来说会很麻烦。

或者这是行不通的，并且是在本地开发并在完成后检查更改的唯一解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:33:57.587

也许您不应该让 IDE 转到代码，而是将代码带到 IDE，蚱蜢。

在 Windows 中，可以直接在远程网络文件夹上工作。在 Linux 中，您可以使用[sshfs 之](http://fuse.sourceforge.net/sshfs.html)类的东西使远程目录看起来像本地目录。

您仍然应该为每个开发人员拥有单独的工作副本，否则您将首先失去使用版本控制软件的许多好处。

在我们的工作环境中，我们都同意使用 Subversion，但我们没有具体说明各个开发人员是在本地工作还是远程工作，也没有具体说明他们使用的是哪个编辑器，甚至是哪个操作系统。

到目前为止，它工作得很好。

# iphone - 在 iphone 中获取联系人信息的问题

> ID：10819095
> 
> 赞同：1
> 
> 时间：2012-05-30T15:10:04.463
> 
> 标签：iphone, objective-c, ios, addressbook

嗨，我在我的应用程序中使用地址簿。我在模拟器中获得联系人。但在 iPhone 4S 中，它不显示设备中的任何联系人。而在 iPhone 4 中，我只有 1 个联系人。我不明白为什么它不显示所有联系人。我正在使用以下代码。请帮我。

```
ABAddressBookRef ab=ABAddressBookCreate();
NSArray *arrTemp=(NSArray *)ABAddressBookCopyArrayOfAllPeople(ab); 
UIImage* image;
ContactArray=[[NSMutableArray alloc] init];
for (int i=0;i<[arrTemp count];i++) 
{
    NSMutableDictionary *dicContact=[[NSMutableDictionary alloc] init];
    NSString *str=(NSString *) ABRecordCopyValue([arrTemp objectAtIndex:i], kABPersonFirstNameProperty);
    UIImage *imgContactImage=(UIImage *)ABPersonCopyImageDataWithFormat([arrTemp objectAtIndex:i],kABPersonImageFormatOriginalSize);

    if(ABPersonHasImageData([arrTemp objectAtIndex:i])){
        image = [UIImage imageWithData:(NSData *)ABPersonCopyImageData([arrTemp objectAtIndex:i])]; 
    } else {
        image = [UIImage imageNamed:@""];  
    }
    NSString* phoneNumber=@"";

    NSString *mobileLabel=@"";

    //Get mobile phone number
    ABMultiValueRef phoneNumbers = (ABMultiValueRef)ABRecordCopyValue([arrTemp objectAtIndex:i], kABPersonPhoneProperty);
    CFRelease(phoneNumbers);

    if(ABMultiValueGetCount(phoneNumbers)>0) {
        for(CFIndex j = 0; j < ABMultiValueGetCount(phoneNumbers); j++) {
           mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phoneNumbers, j);
            if([mobileLabel isEqualToString:@"_$!<Mobile>!$_"]) {

         phoneNumber = (NSString*)ABMultiValueCopyValueAtIndex(phoneNumbers, j);
            }
        }
    }
    else
    {
        phoneNumber=@"";
    }

    NSLog(@"%@",phoneNumber);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T11:41:03.270

您是否要求访问 iPhone 上的联系人？

我体验过，在模拟器上，不需要询问（所有联系人都已加载），但在设备上，要使这些功能正常工作，您必须要求用户授予您访问他的联系人的权限。

你可以试试 ：

```
ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {
    ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
        // First time access has been granted, do what you want
    });
}
else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {
    // The user has previously given access, do what you want
}
else {
    // The user denied access, ask him to reactive them on the settings
} 
```

然后，您的代码应该可以工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:58:42.773

试试这个：

```
ABAddressBookRef addressBook = ABAddressBookCreate();
CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressBook);
CFIndex nPeople = ABAddressBookGetPersonCount(addressBook);

for (int i = 0; i < nPeople; i++) {
     // Get Contact info
     ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);
     ABRecordID recordID = ABRecordGetRecordID(person);

    NSString *firstName = (NSString*)ABRecordCopyValue(person, kABPersonFirstNameProperty);
    NSString *lastName =  (NSString*)ABRecordCopyValue(person, kABPersonLastNameProperty);
} 
```

不要忘记 CFRelease 您复制的对象。

# html - 全屏背景不允许滚动

> ID：10819096
> 
> 赞同：0
> 
> 时间：2012-05-30T15:10:05.903
> 
> 标签：html, css, background, background-image

我有一个全屏背景，当窗口调整大小时它正在工作，但是当页面比窗口长时它停止滚动的能力。它只是切断它。

如何保持全屏背景但允许用户在较大页面上滚动？

这是我正在开发的网站 - [http://www.uktinplate.com/v1/sales/](http://www.uktinplate.com/v1/sales/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:15:57.767

将图像设置为背景而不是实际图像。

然后使用背景附件属性

[W3C 背景附件指南](http://www.w3schools.com/cssref/pr_background-attachment.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:26:39.057

您需要添加`position: fixed`到背景图像元素。

然后你需要`position: fixed`取下`mainContent`并替换它`position: absolute`

然后去掉元素的`overflow: hidden`样式`wrapper`

# ruby-on-rails-3 - 在我重定向到 sign_in 后，设计重定向到 root

> ID：10819097
> 
> 赞同：0
> 
> 时间：2012-05-30T15:10:12.270
> 
> 标签：ruby-on-rails-3, redirect, devise, flash-message

我正在尝试向使用 Devise 的应用程序添加新的登录条件。

如果请求来自不在我的白名单上的 IP，我想阻止登录并重定向回 sign_in 页面，并显示一条闪烁消息，说明登录来自外部 IP。

重定向有效，但我设置的 Flash 消息不会使其返回登录页面。我认为这是因为 Devise 在重定向链中神秘地添加了另一个重定向（这会杀死 flash 消息，因为 flash 消息只对一个请求有用）。

这就是我正在做的事情：我检查请求 ip 是否在我的白名单中。如果不是，我会重定向到`/users/sign_in`并设置 Flash 通知以显示用户无法登录的原因。

**这就是我迷路的地方**......重定向到`/users/sign_in`发生后，用户神秘地被重定向到`/`，然后又重定向回`/users/sign_in`.

如果用户未登录，最后一个重定向回登录页面是我们自己定义的。但是重定向回根 URL 让我感到困惑。我没有覆盖 session_controller 中的`new`动作（这是发生这个神秘重定向的地方......），所以据我所知，这就是所有设计逻辑。

有没有人猜测发生了什么，是否存在会导致重定向的设计配置，或者是否有另一种方法我应该处理这整个事情？

在我的 session_controller

```
class SessionsController < Devise::SessionsController

  def create

    unless ip_whitelist.include?(request.remote_ip)
      redirect_to '/users/sign_in', :notice => "Cannot log in from this IP address."
      return
    end

    ...

  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:00:22.560

`active_for_authentication`根据 Devise wiki，您可以通过向用户模型添加方法来为用户添加额外的“验证” 。否则，`devise_for`路由方法确实接受一个`:constraints`选项，就像常规 Rails 路由约束一样。将您的白名单逻辑打包到一个响应的类中`matches?`，您应该会很好。

# ios - iOS Camera Usage Policy 隐形摄像头监控

> ID：10819102
> 
> 赞同：-3
> 
> 时间：2012-05-30T15:10:36.293
> 
> 标签：ios, avfoundation

我知道 iOS 4 发布了对相机的更多控制，但我似乎找不到任何有关使用政策的信息。

具体来说，我想通过前置摄像头使用计算机视觉算法监控视频流，而无需用户在每次应用运行时都授予我们对摄像头的访问权限。

这是否可能/可接受在 App Store 中使用？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T21:08:16.807

这是违法的。在某些国家 - 当然。[连维基都知道。](http://en.wikipedia.org/wiki/Photography_and_the_law)未经许可，您不能拍摄视频或照片。当前的iOS框架有可能吗？也许。进Appstore可以吗？一定不。但是，如果您要为 itunesconnect 编写额外的用户协议，并且类似于“我们将使用我们的应用程序拍摄您坐在厕所里的视频，请不要害羞！” 或其他足以被Apple批准的合法的东西，它可能会起作用。

# wpf - 将 wpf 验证规则应用于自定义用户控件内的文本框

> ID：10819103
> 
> 赞同：4
> 
> 时间：2012-05-30T15:10:38.300
> 
> 标签：wpf, validation, xaml

我有一个自定义控件，里面有一个文本框。我想应用一些包含传递参数的自定义验证规则（例如，实现范围检查）。

我想像这样将验证规则应用于顶级自定义控件。我已尽我所能删除多余的代码以使我的示例更通用，但如果我没有完全成功，请多多包涵。我对在论坛上发布代码的想法有些陌生。

```
<ns_control:CustomControl PropertyName="Value from embedded textBox:"  
    Style="{StaticResource errorInTextBox}">
        <ns_control:CustomControl.PropertyValue>
            <Binding Path="PathX"
                     Mode="TwoWay">
                                    <Binding.ValidationRules>
                                        <validation:IntegerInputRule Max="100" />
                                    </Binding.ValidationRules>
            </Binding>
        </ns_control:CustomControl.PropertyValue>
</ns_control:CustomControl> 
```

好的，这就是控件的调用。我的实际代码中有一些东西，Validation.ErrorTemplate 也被设置为做某事，但这对这个例子来说似乎是多余的。样式 errorInTextBox 是问题的核心，因为它设置了我希望自定义控件中的 texbox 在验证规则失败时如何操作。到目前为止，我能够弄清楚如何做到这一点的最好方法是使用 Style.Resources 将我想要的样式应用于驻留在我的自定义控件中的任何文本框。

```
 <Style x:Key="errorInTextBox"
           TargetType="Control">
        <Style.Resources>
            <Style TargetType="{x:Type TextBox}">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError"
                             Value="true">
                        <Setter Property="ToolTip"
                                Value="{Binding RelativeSource={RelativeSource Self},
                                Path=(Validation.Errors)[0].ErrorContent}" />
                        <Setter Property="BorderBrush"
                                Value="Green" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Style.Resources>
    </Style> 
```

如果发现错误，上面会显示工具提示并更改文本框的边框，或者至少这是我想要的。我的主要问题是 Style.Trigger——这是我的失败点。我希望当 Validation.HasError 为真时触发。问题是，由于验证规则是针对自定义控件而不是其中的文本框设置的，因此文本框似乎不知道 HasError 值实际上是什么。我尝试使用Validation.ErrorTemplate 来修改borderbrush 属性等，但模板似乎无法像我上面使用的Style.Resource 那样访问文本框的属性，因此它无法修改文本框周围的边框，等等

有没有办法解决这个问题，或者我应该简单地放弃封装的想法，而只是从头开始定义文本框，无论我以这种方式使用我的自定义控件并且我需要验证？在那里定义它们可以让我访问文本框属性，但它会导致大量冗余的 XAML，并且看起来比我可以让它按照我想要的方式工作要优雅得多。

感谢大家的关注和建议。

问候，维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:31:30.057

从问题中我不确定您是否可以容忍在控件而不是文本框上设置验证规则。

如果您可以在控件上设置规则，则在其`ControlTemplate`中，为文本框命名（我假设`x:Name="TextHolder"`）。补充`ControlTemplate.Triggers`：

```
<Trigger Property="Validation.HasError"
         Value="True">
    <Setter TargetName="TextHolder"
            Property="ToolTip"
            Value="{Binding RelativeSource={RelativeSource Self},
            Path=(Validation.Errors)[0].ErrorContent}" />
    <Setter TargetName="TextHolder"
            Property="BorderBrush"
            Value="Green" />
</Trigger> 
```

这将检查控件的验证，如果验证失败，setter 将访问文本框的属性。

* * *

如果您必须在文本框中设置规则 -

*   `ValidationRule`向控件添加类型的依赖属性。
*   从模板中获取文本框（`Template.FindName`从`OnApplyTemplate`覆盖中）。
*   获取`Text`文本框的属性绑定（有点棘手，现在不记得语法了）。
*   将上述属性中的验证规则添加到绑定中。

# java - 使用 hibernate 和 c3p0 连接池从 Java App 调用 Oracle 存储过程

> ID：10819104
> 
> 赞同：0
> 
> 时间：2012-05-30T15:10:42.667
> 
> 标签：java, oracle, hibernate

我无法找到一种方法来做一些在我看来是常见任务的事情。

我有

```
CREATE TYPE MyType AS OBJECT (field1 int, field2 int);
CREATE PROCEDURE SP_TEST (obj IN MyType) AS .... 
```

如何从 Java 应用程序调用此过程？我正在使用隐藏本机 jdbc 连接的休眠和 c3p0 连接池，因此我无法将其代理连接强制转换为 OracleConnection。我发现 c3p0 有 rawConnectionOperation，但我不明白如何使用它来完成我的任务。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:40:38.713

如果您可以在 SQL 提示符中执行此操作，则可以在 Hibernate 中执行此操作

```
session.createSQLQuery("exec SP_TEST([yourargs]"); 
```

我不熟悉 Oracle 中的自定义类型，但使用与查询中相同的语法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:38:38.730

如果有人有类似的问题，可以这样解决：

```
public class CallSPTest
{
   public static STRUCT createSTRUCT(oracle.sql.StructDescriptor structDescriptor, 
    java.sql.Connection connection, java.lang.Object[] objects) 
    throws java.sql.SQLException
    {
       return new STRUCT(structDescriptor,connection,objects);
    }
    public void testSP(Session s)
    {
       t = s.beginTransaction();
       s.doWork(new Work()
        {

            @Override
            public void execute(Connection connection) throws SQLException
            {
                try
                {
                    CallableStatement cs = connection.prepareCall("call SP_TEST(?)");                       
                    final Object[] values = new Object[]{1,2};

                    java.sql.Connection connect = 
  org.hibernate.jdbc.BorrowedConnectionProxy.getWrappedConnection(connection);
                    C3P0ProxyConnection castCon = (C3P0ProxyConnection) connect;
                    Method m = StructDescriptor.class.getMethod("createDescriptor", new Class[]{ String.class,Connection.class});
                    Object[] args = new Object[]{"MyType",C3P0ProxyConnection.RAW_CONNECTION};
                    StructDescriptor desc1 =(StructDescriptor) castCon.rawConnectionOperation(m, null, args);

                    Method m2 = CallSPTest.class.getMethod("createSTRUCT",
                            new Class[]{StructDescriptor.class, Connection.class,Object[].class});

                    args = new Object[] {desc1,C3P0ProxyConnection.RAW_CONNECTION,values};
                    final STRUCT struct1 = (STRUCT)castCon.rawConnectionOperation(m2,null,args);
                    cs.setObject(1, struct1, Types.STRUCT);
                    int aff_rows = cs.executeUpdate();
                }
                catch (Exception e)
                {
                    System.out.print(e.getMessage());
                }
            }
        });
    } 
    catch (Exception e)
    {
        System.out.print(e.getMessage());
    }
    finally
    {
        if (null != t)
        {
            t.rollback();                
        }
    }

} 
```

# java - 使用 hsqldb 和 Ibatis 测试生产中依赖 Postgres 的配置

> ID：10819105
> 
> 赞同：2
> 
> 时间：2012-05-30T15:10:45.343
> 
> 标签：java, hibernate, postgresql, hsqldb, dbunit

目前在测试环境中有一个迁移依赖 DBunit + HSQLDB。我遇到了这个`Nextval`问题。我的 ibatis 配置文件是这样的：

```
<select id="selectTestKey" resultMap="integerResult">
        select nextval('test_seq') as integer
    </select> 
```

我的 Spring 映射文件如下所示：

```
<bean id="testDS" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
        <property name="url" value="jdbc:hsqldb:mem:test;sql.syntax_pgs=true" />
        <property name="username" value="SA" />
        <property name="password" value="" />
    </bean> 
```

相关休眠错误：

```
org.mybatis.spring.MyBatisSystemException: nested exception is org.apache.ibatis.executor.ExecutorException: Error preparing statement.  Cause: org.hibernate.exception.SQLGrammarException: user lacks privilege or object not found: NEXTVAL 
```

这对 Postgres 数据库有效，但对 HSQLDB 失败。该网站上的其他答案没有为我提供解决方案。

使用以下 maven 配置获取 hsqldb：

```
<dependency>
    <groupId>org.hsqldb</groupId>
    <artifactId>hsqldb</artifactId>
    <version>2.2.8</version>
</dependency> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:30:32.057

NEXTVAL 等都在 Posgres 兼容模式下工作。您可以通过双击 hsqldb.jar 并使用您的 URL、CREATE SEQUENCE 语句和 NEXTVAL 语句检查 GUI DatabaseManager 来验证。

有可能实际使用的HSQLDB版本早于2.2.8，不支持NEXTVAL特性。您可以向 URL 添加检查，如果数据库不支持给定的语法属性，则会导致连接失败。

```
jdbc:hsqldb:mem:test;sql.syntax_pgs=true;check_props=true 
```

也有可能没有将完整的 URL 发送到 HSQLDB，如果上面的 URL 连接，就会出现这种情况，但 NEXTVAL 不起作用。

# javascript - extjs 改变超类

> ID：10819106
> 
> 赞同：1
> 
> 时间：2012-05-30T15:10:47.183
> 
> 标签：javascript, extjs, overriding, superclass, sencha-architect

是否可以更改 Extjs 类的超类？

我想做这样的事情：

```
Ext.define('MyApp.view.override.MyPanel', {
    requires: 'MyApp.view.MyPanel'
}, function() {
    MyApp.view.MyPanel.override({
        extend: 'MyApp.view.MySuperPanel'
    });
}); 
```

`Ext.define();`因为我使用的是 Sencha Architect，所以我不能直接这样做。

# objective-c - -fno-objc-arc 无法禁用 ARC

> ID：10819108
> 
> 赞同：10
> 
> 时间：2012-05-30T15:10:52.143
> 
> 标签：objective-c, xcode, memory-management, automatic-ref-counting, afnetworking

我已经尝试过[在这篇文章中找到的解决方案](https://stackoverflow.com/a/6658549/385559)来禁用 AFNetworking 文件中的 ARC，但无济于事：

![在此处输入图像描述](../Images/21fdc947f56f0deb54ada8ea1e262a6c.png)

有什么想法我失败了吗？显然，答案越简单越好。我还读过创建静态库可能会有所帮助，但这似乎很复杂。

**编辑**

我尝试删除派生数据*并*清理和构建*并*重新启动 Xcode。没有优惠:(。

此外，我的工作区中没有其他项目。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-30T15:56:32.840

奇怪的事情。我尝试将`-fno-objc-arc`标志添加到一些 Facebook 文件中，最终构建了该项目。我想这里的教训是，当 Xcode 生成这些类型的错误时，问题的根源可能在另一个文件中。如果 Xcode 抱怨您已经标记的文件，则尤其如此！

![在此处输入图像描述](../Images/6cb389dd0fa8e4d5fc7ee1e50155aea1.png)

希望这会对某人有所帮助:)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-11T19:52:30.203

只是一点额外的提示：

如果您的项目中有多个目标，请检查是否`-fno-objc-arc`向所有目标添加了编译器标志。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-22T17:15:36.587

"Convert to Objective-C ARC" 是一个代码重写工具，另一方面 -fno-objc-arc 是一个编译时间标志。它与重构的目的无关。

在单击“检查”之前，展开目标并取消选择要保持 ARC-free 的文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-13T17:52:35.660

其实问题很简单。`-fno-objc-arc`确保在编译器标志对话框中输入的标志后没有回车。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T01:43:54.167

我设法通过一个不符合 ARC的`.m`文件进入这种状态。编译器抱怨包含的文件，它很可能被标记为. 我不得不标记正在做包括的事情。`#imported``.m``-fno-objc-arc``.m`

我通过在失败时扩展构建输出并查看显示无法编译的文件的原始日志来发现这一点（与警告中的文件不同）。

我还需要删除派生的数据文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-23T23:54:04.780

有同样的问题，但无法找到有问题的文件（如在 Brotto 的解决方案中）。因此，只需将非弧投诉代码片段包装在以下 #if 语句块中：

```
#if !(__has_feature(objc_arc))

//...non-arc code

#endif 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-12T17:49:18.747

通过取消选中 Refactor -> Convert to Objective-C ARC 模式中的非 ARC 文件，我能够解决我的问题。即使由于“fno-objc-arc”标志，文件已经被删除。一旦我取消选中这些文件，Xcode 开始吐出更好的错误，使我能够找到需要修复的文件。进行这些更改后，我很高兴。

# android - 如何为可变大小的内容使用点/虚线轮廓？

> ID：10819112
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:02.763
> 
> 标签：android

通常当我需要改变背景以匹配内容的大小时，我会使用九个补丁图像。

我尝试了一个透明的图形，除了带有圆角的虚线轮廓。然而，它最终拉伸了破折号，而不是重复破折号的图案。图像显示三行： 1\. 基本的小图像 2\. 拉伸后图像的外观 3\. 图像的外观 ![在此处输入图像描述](../Images/54929211659be59277b71146afacd33d.png)

有没有办法用九个补丁图像来做到这一点？

如果不是，推荐的替代方案是什么？我认为可以使用形状和 XML 文件来模拟它，但我不完全确定如何做到这一点或如何使角落变圆。

再说一次，我不使用基本图像的原因是因为这个虚线轮廓会围绕一个可能包含少量内容或很多内容的框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:52:53.107

您可以创建一个画布，然后将图像加载到画布上。要解决抗锯齿问题，请绘制一个圆角矩形并将其蒙版到您的图像上。绘制图像时，使用绘制的 porter-duff Xfer 模式。您也可以通过绘画控制笔触，按照您的喜好控制线条的间距和长度。

# xml - 我有蚂蚁错误如何进行？

> ID：10819115
> 
> 赞同：-1
> 
> 时间：2012-05-30T15:11:08.877
> 
> 标签：xml, ant, liferay, java, build.xml

我是 Liferay 门户的初学者，当我尝试编译我的文件：build.xml 时，会出现这些错误：

```
BUILD FAILED
D:\PFA\liferay-plugins-sdk-6.1.0-ce-ga1-20120106155615760\build-common-plugin.xml:407: The following error occurred while executing this line:
D:\PFA\liferay-plugins-sdk-6.1.0-ce-ga1-20120106155615760\build-common.xml:94: java.lang.UnsupportedClassVersionError: com/sun/tools/javac/Main : Unsupported major.minor version 51.0 
```

当前版本：

*   JDK：1.6

*   蚂蚁：1.8.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:41:09.907

我创建了一个新的环境变量 ANT_HOME 并将其路径设置为 C:....\ant_apache1.8.3 并通过 %ANT_HOME%\bin 在我的 PATH 中调用它
现在可以工作了。
更多细节：
[蚂蚁阿帕奇](http://ant.apache.org/manual/install.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T20:56:56.057

您很可能不仅安装了 Java 6，而且还混合了不同的 Java 版本。将它们配置为仅使用一个（JRE/JDK）或卸载您不需要的所有版本。

您还可以在这个问题中找到更多信息：[Why is Ant give me a Unsupported major.minor version error](https://stackoverflow.com/questions/7073485)

# c# - 写入文件时如何从 HTML 编码转换为 UTF 8？

> ID：10819116
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:12.660
> 
> 标签：c#, .net, string, encoding, character-encoding

> **可能重复：**
> [如何在 C# 中解码 HTML 字符？](https://stackoverflow.com/questions/122641/how-can-i-decode-html-characters-in-c)

我在将 strToCheck 下面的字符串从 html 编码版本转换为其实际的 UTF-8 表示时遇到问题。

```
// Code sample:    
string result = null;

// HTML-encoded Input String (From Google Translate API) , renders "भारत महान देश है." in Hindi language.
string strTocheck = "&#2349;&#2366;&#2352;&#2340; &#2350;&#2361;&#2366;&#2344; &#2342;&#2375;&#2358; &#2361;&#2376;.";

using (var sw = new StreamWriter(File.Open(@"c:\myfile.txt", FileMode.OpenOrCreate), Encoding.UTF8)) // UTF-8 encoding
{
    sw.WriteLine(strTocheck);
}

System.IO.StreamReader reader = new System.IO.StreamReader(@"c:\myfile.txt", Encoding.UTF8); // UTF-8 encoding
result = reader.ReadToEnd();
MessageBox.Show(result);

// I expected "भारत महान देश है."
// But got output : &#2349;&#2366;&#2352;&#2340; &#2350;&#2361;&#2366;&#2344; &#2342;&#2375;&#2358; &#2361;&#2376;. 
```

任何帮助将不胜感激。谢谢你。

图片在这里（请在新标签中打开）>> [http://i.stack.imgur.com/xcctU.png](https://i.stack.imgur.com/xcctU.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:22:14.133

它按预期工作，您只是没有按预期使用它：p

请参阅[UTF8 在 Excel 中不起作用](https://stackoverflow.com/questions/7965202/utf8-not-working-in-excel)

和[http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/433ecab8-f800-4376-b351-4bbce93679d9](http://social.msdn.microsoft.com/Forums/en/csharpgeneral/thread/433ecab8-f800-4376-b351-4bbce93679d9)链接到[MySQL C# Text Encoding Problems](https://stackoverflow.com/questions/942277/mysql-c-sharp-text-encoding-problems)

# matlab - gcc 中的自动共享库导出

> ID：10819121
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:23.040
> 
> 标签：matlab, g++, shared

当我有以下代码时：

```
extern "C"
void depp(){} 
```

编译并与 g++.exe 链接，然后我将导出“depp”符号。

如果我添加以下代码：

```
extern "C"
__declspec(dllexport) void depp2(){} 
```

只有第二个符号将被导出。

有没有办法打开所有符号的自动导出，即使存在 dllexport？

背景：我正在为 matlab simulink 构建一个 s-function。matlab 使用的导出符号似乎在头文件中。所以，我没有办法添加 dllexport。当我添加包含 dllexport 的对象时，整个 mex 文件变得不可用。

# asp.net - EF Code First：将 dbset 链接到单独数据库中的现有 SQL 视图

> ID：10819122
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:24.573
> 
> 标签：asp.net, asp.net-mvc, entity-framework-4.1

假设我创建了一个这样的新实体框架代码优先实体（保持简单问题）：

```
public class Product
{
    public int ProductId { get; set; }
    public string ProductName { get; set; }
    public int? ProductManager { get; set; }
} 
```

`ProjectManager`表示可选的员工 ID

有没有办法从单独的数据库表或视图中提取员工的姓名（可能还有其他补充的、不可修改的信息）（您可以在其他地方推断出一个简单的表`employeeID`）`employeeName`？

我该如何处理？我必须先使用数据库吗？

如果匹配，目标是在 MVC 的索引或详细信息视图中简单地显示此信息 - 而不是编辑员工信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:36:06.533

根据您的评论，我的猜测是您的表中已经有一些数据，您希望从中提取这些数据以及您将创建的新表中的一些数据。如果是这种情况，这里有一个很好的教程，称为[将 EF “代码优先”与现有数据库一起使用](http://weblogs.asp.net/scottgu/archive/2010/08/03/using-ef-code-first-with-an-existing-database.aspx)（特别是第 5 步）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:17:21.147

我会假设你想要的是实际上有一种方法可以从这个类导航到 productmanager / projectmanager。在这种情况下，您可以考虑将导航属性添加到此类的模型图中，该属性将指向表示项目/产品经理的基础模型。

# jquery - 将所有 wordpress 图片链接更改为新主机

> ID：10819123
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:25.373
> 
> 标签：jquery, regex, wordpress

我正在运行 wordpress，我只是将所有图像都指向我的 cloudfront cdn。但我意识到这不是一项合理的投资，所以我回到只是将我的图像指向我的 amazon s3 链接。

但是那些指向我的cdn的以前的帖子呢？有没有办法改变它们？

我认为的解决方案是在准备好文档时使用 JQuery。我不确定这是否会解决它。我们知道 js 脚本有一种延迟，因此图像会在脚本更改之前加载。

我知道的最好的解决方案是使用正则表达式，但我不熟悉格式化的工作原理。

总结一下，我想要：

从

```
<img src="http://previous.link.com/image.jpg"/> 
```

至

```
<img src="http://new.link.com/image.jpg" /> 
```

使用 Jquery 就足够了吗？如果没有，任何人都可以提供如何做到这一点的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:16:30.630

使用 jQuery（或一般的 Javascript）来解决这个问题只是一个肮脏的 hack。

我假设您可以访问服务器？如果是这样，请直接更改数据库。

这不是很难，有一个免费工具：[phpMyAdmin](http://www.phpmyadmin.net/home_page/index.php)，然后你可以运行你的 MySQL 查询

只要确保在任何工作之前备份数据库即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:17:55.307

您必须在 Wordpress 数据库中搜索和替换这些字符串。

假设您的图片是您的帖子内容的一部分，您可以尝试 Frank Bueltge 的[搜索和替换插件](http://wordpress.org/extend/plugins/search-and-replace/)。

此插件允许您搜索和替换下表中的任何字符串：

*   ID
*   后内容
*   图形用户界面
*   标题
*   摘抄
*   元数据
*   注释
*   评论作者
*   评论电子邮件
*   评论网址
*   标签/类别
*   类别描述

或者您可以尝试使用 phpMyAdmin 之类的工具来解决您的问题。

根据图像的数量，jQuery 并不是一个真正的选择！

# c# - 具有继承更改的 DataContract

> ID：10819132
> 
> 赞同：1
> 
> 时间：2012-05-30T15:11:50.900
> 
> 标签：c#, .net, wcf, datacontract

我正在使用 DataContracts 来序列化对象。假设我以这种方式序列化了一个数据结构：

```
[DataContract]
public class Dog : IExtensibleDataObject
{
    [DataMember]
    public int age;

    [DataMember]
    public string name;

    ExtensionDataObject IExtensibleDataObject.ExtensionData { get; set; }
} 
```

现在我正在改变我的架构，我想用这些类读取以前序列化的数据：

```
[DataContract]
[KnownType(typeof(Dog))]
public class Animal : IExtensibleDataObject
{
    [DataMember]
    public string name;

    ExtensionDataObject IExtensibleDataObject.ExtensionData { get; set; }
}

[DataContract]
public class Dog : Animal
{
    [DataMember]
    public int age;
} 
```

但我得到 name = null。我知道这取决于顺序：文件先用年龄保存，然后从名称开始读取，因为它在基类上。
有没有办法处理这个问题，也许通过改变顺序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:23:59.480

我不认为这是可能的。

**过去的 xml 本来是**

```
<dog>
    <name>Bob</name>
    <age>10</age>
</dog> 
```

**它现在期待**

```
<animal>
    <name>Bob</name>
    <dog>
        <age>10</age>
    </dog>
</animal> 
```

在新 DataContract 上序列化的任何内容中，该属性都更高。更改继承层次结构是该`IExtensibleDataObject`方法的重大更改。

> 允许将继承与数据合同一起使用，前提是继承不用作版本控制机制并且遵循某些规则。如果某个类型派生自某个基类型，则不要让它在未来版本中派生自不同的基类型（除非它具有相同的数据协定）。对此有一个例外：您可以将类型插入到数据协定类型与其基类型之间的层次结构中，但前提是它不包含与其他类型的任何可能版本中的其他成员同名的数据成员。层次结构。通常，在同一继承层次结构的不同级别使用具有相同名称的数据成员会导致严重的版本控制问题，应该避免。

最佳实践中的更多内容[：数据合同版本控制](http://msdn.microsoft.com/en-us/library/ms733832.aspx)

**编辑1：**

您也许可以尝试在 Animal 中将 Name 设为虚拟并在 Dog 中覆盖它？或者一些疯狂的方法来强制序列化的新版本在狗下命名。即类似的东西，

```
[DataContract] 
[KnownType(typeof(Dog))] 
public class Animal : IExtensibleDataObject 
{
    public virtual string name; 

    ExtensionDataObject IExtensibleDataObject.ExtensionData { get; set; } 
} 

[DataContract] 
public class Dog : Animal 
{ 
    [DataMember] 
    public override string name; 

    [DataMember] 
    public int age; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:27:11.630

您应该查看[此 SO 帖子中讨论的 WCF 合同版本控制](https://stackoverflow.com/a/10797193/175679)。

[`Namespace`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicecontractattribute.namespace.aspx)本质上，如果您希望随着合同的发展而向后兼容，则需要在您的设备上分配 a[`ServiceContract`](http://msdn.microsoft.com/en-us/library/system.servicemodel.servicecontractattribute.aspx)并保留新旧版本。

# asp.net - 错误：从页面上的控件中获取按钮单击事件的值

> ID：10819134
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:54.773
> 
> 标签：asp.net

下面的代码只是从数据库中获取数据并将数据填充到 asp.net 页面上的 TextBoxes 中，当我单击按钮 btnSave 时，TextBoxes 上的任何更改都会反映到数据库中。但是当我单击 btnSave 按钮时，我从文本框获得的值是 Page_Load 事件的初始值，而不是在我更改文本框上的值之后的值

```
public partial class Settings : System.Web.UI.Page
{
    string conString = System.Configuration.ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;    

    protected void Page_Load(object sender, EventArgs e)
    {
        SqlConnection con = new SqlConnection(conString);
        con.Open();
        SqlCommand cmd = new SqlCommand("SELECT CompanyAUserName, CompanyAPassword, CompanyAEmail, CompanyBUserName, CompanyBPassword, AgentAName, AgentBName, ItemShortageNotification FROM COMPANY_SETTINGS", con);
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            txtHostName.Text =  dr["CompanyAUserName"].ToString();
            txtHostPassword.Text = dr["CompanyAPassword"].ToString();
            txtHostEmail.Text = dr["CompanyAEmail"].ToString();
            txtClientName.Text = dr["CompanyBUserName"].ToString();
            txtClientPassword.Text = dr["CompanyBPassword"].ToString();
            txtAgentAName.Text = dr["AgentAName"].ToString();
            txtAgentBName.Text = dr["AgentBName"].ToString();
            txtItemQty.Text = dr["ItemShortageNotification"].ToString();            
        }
        con.Close();
    }
    protected void btnSave_Click(object sender, EventArgs e)
    {        
        SqlConnection con = new SqlConnection(conString);
        con.Open();                
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = con;        
        try
        {
            cmd.CommandText =
            "UPDATE COMPANY_SETTINGS SET CompanyAUserName = @CompanyAUserName, CompanyAPassword = @CompanyAPassword, CompanyAEmail = @CompanyAEmail, CompanyBUserName = @CompanyBUserName, CompanyBPassword = @CompanyBPassword, AgentAName = @AgentAName, AgentBName = @AgentBName, ItemShortageNotification = @ItemShortageNotification";
            cmd.Parameters.AddWithValue("@CompanyAUserName", txtHostName.Text);
            cmd.Parameters.AddWithValue("@CompanyAPassword", txtHostPassword.Text);
            cmd.Parameters.AddWithValue("@CompanyAEmail", txtHostEmail.Text);
            cmd.Parameters.AddWithValue("@CompanyBUserName", txtClientName.Text);
            cmd.Parameters.AddWithValue("@CompanyBPassword", txtClientPassword.Text);
            cmd.Parameters.AddWithValue("@AgentAName", txtAgentAName.Text);
            cmd.Parameters.AddWithValue("@AgentBName", txtAgentBName.Text);
            cmd.Parameters.AddWithValue("@ItemShortageNotification", txtItemQty.Text.Trim());
            cmd.ExecuteNonQuery();
            Response.Redirect("~/Settings.aspx");
        }
        catch (Exception ex)
        {
            Response.Write("<script>alert('Error: " + ex.Message + "')</script>");            
        }        
        con.Close();        
    }
} 
```

这是来自 .aspx 页面的部分代码

```
<asp:Content ID="Content3" ContentPlaceHolderID="ContentPlaceHolderBody" Runat="Server">
    <div style="height:100%;" runat="server" id="divSettings">        
        <h3 style="padding:0; margin:0">Settings</h3>
        <h5 style="padding: 5px">(This page is only visible to the host)</h5>
        <table class="SignUpTable" runat="server">
            <tr runat="server">
                <td align="center" colspan="2" runat="server">
                    <h1>Company A Information</h1>
                    <p>This is host account infromation. </p>
                </td>
            </tr>
            <tr runat="server">
                <td class="label" runat="server" >
                    <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserNameLabel">User Name: </asp:Label><br />
                    <div class="small"> Minimun of 4 characters </div>
                </td>
                <td runat="server">
                    <asp:TextBox ID="txtHostName" runat="server" CssClass="textBox"></asp:TextBox><br />
                    <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                        ControlToValidate="txtHostName" Text="Host name is required." 
                        ToolTip="Enter Host Name" Display="Dynamic" 
                        ValidationGroup="ValidationSettings" SetFocusOnError="True"/>
                    <asp:RegularExpressionValidator ID="RegularExpressionValidator1" SetFocusOnError="True"
                            runat="server" ControlToValidate="txtHostName" Display="Dynamic" 
                        ValidationExpression="[0-9a-zA-Z]{4,}" ValidationGroup="ValidationSettings">Host name must be more than 4 characters.</asp:RegularExpressionValidator>
                </td>
            </tr> 
```

我尝试使用 FindControl() 并且仍然获得相同的值。请告诉我知道我错过了什么。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:15:13.647

更改您的代码以将检查添加到`IsPostBack`. 发生的事情是您在 btn_Save 事件触发之前加载数据。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
       loadData();
}

private void loadData()
{

    SqlConnection con = new SqlConnection(conString);
    con.Open();
    SqlCommand cmd = new SqlCommand("SELECT CompanyAUserName, CompanyAPassword, CompanyAEmail, CompanyBUserName, CompanyBPassword, AgentAName, AgentBName, ItemShortageNotification FROM COMPANY_SETTINGS", con);
    SqlDataReader dr = cmd.ExecuteReader();
    while (dr.Read())
    {
        txtHostName.Text =  dr["CompanyAUserName"].ToString();
        txtHostPassword.Text = dr["CompanyAPassword"].ToString();
        txtHostEmail.Text = dr["CompanyAEmail"].ToString();
        txtClientName.Text = dr["CompanyBUserName"].ToString();
        txtClientPassword.Text = dr["CompanyBPassword"].ToString();
        txtAgentAName.Text = dr["AgentAName"].ToString();
        txtAgentBName.Text = dr["AgentBName"].ToString();
        txtItemQty.Text = dr["ItemShortageNotification"].ToString();            
    }
    con.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:14:55.253

您不应该在每次回发时从数据库加载，但前提是`!Page.IsPostback`：

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        // do the databinding ....
    }
} 
```

旁注：您应该将[`using-statement`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)用于任何实现`IDisposable`，尤其是`Connections`. 您不需要关闭它，即使在`dispose`那时出现异常也会关闭它。

```
using(SqlConnection con = new SqlConnection(conString))
{
    con.Open();
    using(SqlCommand cmd = new SqlCommand("SELECT CompanyAUserName, CompanyAPassword, CompanyAEmail, CompanyBUserName, CompanyBPassword, AgentAName, AgentBName, ItemShortageNotification FROM COMPANY_SETTINGS", con))
    {
        // ...
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:15:53.697

您需要添加回发检查：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        SqlConnection con = new SqlConnection(conString);
        con.Open();
        SqlCommand cmd = new SqlCommand("SELECT CompanyAUserName, CompanyAPassword,         CompanyAEmail, CompanyBUserName, CompanyBPassword, AgentAName, AgentBName,         ItemShortageNotification FROM COMPANY_SETTINGS", con);
        SqlDataReader dr = cmd.ExecuteReader();
        while (dr.Read())
        {
            txtHostName.Text =  dr["CompanyAUserName"].ToString();
            txtHostPassword.Text = dr["CompanyAPassword"].ToString();
            txtHostEmail.Text = dr["CompanyAEmail"].ToString();
            txtClientName.Text = dr["CompanyBUserName"].ToString();
            txtClientPassword.Text = dr["CompanyBPassword"].ToString();
            txtAgentAName.Text = dr["AgentAName"].ToString();
            txtAgentBName.Text = dr["AgentBName"].ToString();
            txtItemQty.Text = dr["ItemShortageNotification"].ToString();            
        }
        con.Close();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T15:18:39.127

您的错误是 !Page.IspostBack 的遗漏。

因此，无论何时您尝试保存它都会重新填充文本框并获取值。

# java - 提交时 Solr 云分片更新错误

> ID：10819135
> 
> 赞同：0
> 
> 时间：2012-05-30T15:11:55.070
> 
> 标签：java, solr, full-text-search, replication

根据本指南，我已经在一台机器上部署了具有 2 个阴影和 2 个切片的 solr 云设置：http: [//outerthought.org/blog/491-ot.html](http://outerthought.org/blog/491-ot.html)

当同时从 2 个客户端提交 500 多个文档时，solr 云会抛出此异常。任何形式的帮助表示赞赏。谢谢。

```
SEVERE: shard update error StdNode:     
http://newscheduler:8900/solr/core_collection1_slice1_shard2/:org.apache.solr.common.SolrException:  
Server at http://newscheduler:8900/solr/core_collection1_slice1_shard2 returned non ok status:500,  
message:Server Error
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:403)
at org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:209)
at org.apache.solr.update.SolrCmdDistributor$1.call(SolrCmdDistributor.java:320)
at org.apache.solr.update.SolrCmdDistributor$1.call(SolrCmdDistributor.java:301)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
at java.util.concurrent.FutureTask.run(FutureTask.java:138)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:27:38.217

当我没有为 solrj 客户端放置足够的内存时，我会遇到同样的错误。我需要在我的环境中放置类似的东西：

```
JVM_OPTS="${JVM_OPTS} -XX:NewSize=512m -XX:MaxNewSize=1G -XX:PermSize=512m -XX:MaxPermSize=1G -XX:+DisableExplicitGC -Xms4G -Xmx6G" 
```

# c++ - c++ 从配置文件构建类属性

> ID：10819139
> 
> 赞同：1
> 
> 时间：2012-05-30T15:12:02.497
> 
> 标签：c++

我已经使用具有硬编码属性的类实现了一种算法。

但是现在，我想给它增加一些灵活性。

假设我只使用了四个可用于`class Voice`. 可用，我的意思是我有他们的数据，存储在数据库中。

```
class Voice
{
    double price;                  // used this one.
    unsigned int duration;         // and this one.
    string destination;
    string operatorid;
} 
```

我创建了一个向量，使得向量[0][0] = 第一个元素的价格，向量[0][1] = 第一个元素的持续时间，依此类推。

我希望用户编辑配置文件（我一直在使用[SimpleIni.h](http://code.jellycan.com/simpleini-doc/html/index.html)），并添加他想要的属性，最好按照他想要的顺序，例如：

```
[Voice]
attribute1 = operatorid
attribute2 = price
attribute3 = duration 
```

`Voice`应该仅使用这三个属性构建，以便 vector[n] 将具有=元素`vector[n][0]`的 operatorid值， = 元素的价格值，= 元素的持续时间值。`nth``vector[n][1]``nth``vector[n][2]``nth`

这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:42:08.307

这让我想起了 Python（只是一点点）：

```
#include <string>
#include <map>
#include <iostream>

#include <boost/variant.hpp>
#include <boost/variant/get.hpp>
#include <boost/format.hpp>

class Foo
{
  typedef boost::variant<double, int, std::string> var;

  struct NoSuchAttributeError {
    NoSuchAttributeError(const std::string &key) {
      std::cout << boost::format("Attribute %s not found!\n") % key; 
    }
  };

  std::map<std::string, var> attributes;

  var& getattr(const std::string& key) {
    std::map<std::string, var>::iterator it = attributes.find(key);
    if (it == attributes.end()) {
      throw NoSuchAttributeError(key);
    }
    else {
      return (*it).second;
    }
  }

  template<typename T> 
  T& get(var& v) {
    return boost::get<T, double, int, std::string>(v);
  }

public:
  Foo() {
    // TODO: add attributes according to configuration file
    attributes["foo"] = 42;
    attributes["bar"] = "baz";
  }

  // TODO: add appropriate getters/setters for attributes
  int& foo() { return get<int>(attributes["foo"]); }
  std::string& bar() { return get<std::string>(attributes["bar"]); }
};

int main() {
  Foo f;
  std::cout << f.foo() << " " << f.bar() << std::endl;
  f.foo() = 13;
  f.bar() = "Hello World!";
  std::cout << f.foo() << " " << f.bar() << std::endl;
  return 0;
} 
```

# ms-access - 如何将来自不同查询的值插入 Access 中的报表中

> ID：10819140
> 
> 赞同：1
> 
> 时间：2012-05-30T15:12:10.000
> 
> 标签：ms-access

我有一个基于交叉表查询的报告

天 | 来电| 付款 | 差异 | 平衡

05 | 50 | 00

05 | 00 | 10

05 | 00 | 20

我每天都有一个总结：

05 | 50 | 30 | 20 | ***_***

其中*balance*是我想从同一天的不同查询中获取的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:25:50.867

您可以在报告中使用域聚合函数，将控件设置为：

```
=DlookUp("Balance","MyQuery","Day=#" & ADate & "#") 
```

[http://support.microsoft.com/kb/208786](http://support.microsoft.com/kb/208786)

也可以根据报表所需的两个查询来创建查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:32:05.510

您始终可以拥有具有特定记录源的主报表。然后使用不同的记录源向其中添加子报表。

# haskell - 使用 Hdirect 和 idl 进行 win32 com/ole 自动化

> ID：10819143
> 
> 赞同：1
> 
> 时间：2012-05-30T15:12:20.893
> 
> 标签：haskell, com, automation

我正在尝试将 hdirect 中的 [hdirect.exe](http://hackage.haskell.org/package/hdirect)与提供的示例“Connection.idl”（在 C:\hdirect-0.21.0\comlib 内）一起使用，但我收到以下错误：hdirect.exe: ./Connection.hs: commitBuffer：无效参数（字符不在代码页中）

你知道如何从 IDL 生成 Haskell 文件吗？

# unicode - Unicode 转换

> ID：10819150
> 
> 赞同：1
> 
> 时间：2012-05-30T15:12:49.170
> 
> 标签：unicode, d, phobos, druntime

**配置：**

*   操作系统：Windows 7（32 位）
*   使用 Phobos 标准库的 DMD 2.58

* * *

**我的意图：**

我开始移植 2007 年编写的旧包（10 个模块）。它具有完整的 unicode 支持，我想保留这种能力。

`class UnicodeBom(T)`它的作者为此目的编写了一个特定的模块（

我清理了`Tango`所有模块中的任何代码片段，并成功地在我的盒子上工作（肯定是在单元/模块级别）到目前为止，只有 10 个模块中的 4 个。

* * *

**代码片段：**

```
this(Stream st) {
  void[] buf;
  buf.length = cast(uint) st.size;
  st.readBlock(buf.ptr, cast(uint) st.size);

  auto unicode = new UnicodeBom!(wchar)(Encoding.Unknown); // <<< to refactor
  mSourceBuffer = unicode.decode(buf); // <<< to refactor
} 
```

在哪里

*   st（参数）是`std.stream.Stream`
*   mSourceBuffer（私有字段）是一个`wchar[]`

* * *

**引用：**

摘自与`final T[] decode (void[] content)`方法相关的代码文档：

> 转换提供的内容。检查内容是否有 BOM 签名，该签名已被剥离。如果根据编码类型不应该存在签名，则如果存在签名，则会引发异常。相反，如果当前编码期望存在的签名不存在已知签名，则会引发异常

* * *

**我的问题：**

是否有使用开箱即用`Druntime`和/或`Phobos`资源导致相同结果的最新和更惯用的方法（即加载 UTF8/16/32 文件并将它们转换为 wchar[] 而没有 BOM）？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T09:39:44.630

通过一一解决所有提出的问题，我最终成功地将所有模块移植到 DMD 2.59。

# firefox - 如何制作 cookie 以在 Firefox 会话中使用？

> ID：10819152
> 
> 赞同：4
> 
> 时间：2012-05-30T15:12:57.097
> 
> 标签：firefox, cookies, session-cookies

我知道 cookie 存储在`cookies.sqlite`数据库中，但显然 Firefox 在会话中不使用它。

我想做的是在我的 PC 上（手动）创建一个 cookie，并让 Firefox 在导航到我的网站（托管在我的 PC 上）时使用它。那么，如何制作 Firefox 在打开时可以使用的 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:16:10.457

可能最容易使用附加组件，例如[Cookies Manager+](https://addons.mozilla.org/en-US/firefox/addon/cookies-manager-plus/)或[Advanced Cookie Manager](https://addons.mozilla.org/en-US/firefox/addon/cookie-manager/)。

# jquery - 使用带有文件上传表单字段的 jquery

> ID：10819153
> 
> 赞同：0
> 
> 时间：2012-05-30T15:13:03.667
> 
> 标签：jquery, html, forms

如果没有某种服务器交互，我不确定这是可能的，但我希望它是用于原型设计的。我有一个文件上传表单字段。我希望用户能够从硬盘驱动器中选择图像，并且 jquery 会将该图像放入 DOM 中的 div 中。

这是我的代码

```
<div class="label">Upload Your Own Logo</div>
  <input name="upload" type="file" id="logo-upload"> 
```

图像应该去的div

```
<div class="user-logo">logo.png</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:43:07.530

如果用户的浏览器有 HTML5 FileReader API，那么这是可能的：

```
var file = document.getElementById('logo-upload').files[0],
    reader = new FileReader();
reader.readAsDataURL(file);

reader.onloadend = function(e) {
    var image = $('<img>').attr('src',e.target.result);
    $(image).appendTo.('.user-logo');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:34:56.527

你不需要 AJAX。事实上，你甚至不需要 jquery。

```
<input type="file" name="ss" id="fileUpload" onchange="dothis()"/>
<div id="picDiv"></div> 
```

使用函数 dothis() 将您上传的图像附加到 #picDiv

```
function dothis()
{
    var oImg=document.createElement("img");
    oImg.setAttribute('src', document.getElementById("fileUpload").value);
    oImg.setAttribute('alt', 'na');
    document.getElementById("picDiv").appendChild(oImg);
} 
```

不要忘记检查文件是否为有效图像，这由您决定。

# android - Android 地图：如何停止和启动 animateTo()

> ID：10819155
> 
> 赞同：0
> 
> 时间：2012-05-30T15:13:08.350
> 
> 标签：android, android-mapview, android-maps

我正在尝试控制android地图的动画，但我不知道该怎么做。在我的 locationlistener 中，我在我的位置点设置了 animateTo() 并且效果很好。我想要做的是仅在您第一次打开地图时为我的位置点设置动画。现在动画可以工作，但我无法平移地图，因为当您尝试平移地图时会自动平移回我的位置，这很烦人！我该如何处理？我想在第一次启动地图和恢复活动时看到我的位置，但在此之后我想平移地图，看看我想要什么！

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:26:02.153

我不确定这是否适合您的使用，但您可以利用现有的[MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)类来显示当前位置。此类有一个*runOnFirstFix*方法，您可以使用该方法移动到 GPS 锁定时获得的初始坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:18:36.177

您是否设置了 setBuiltInZoomControls(true)？

在 onCreate() 方法的末尾执行此操作：

`MapView mapView = (MapView) findViewById(R.id.mapview);` `mapView.setBuiltInZoomControls(true);`

我不确定您是否只想在地图显示后平移/缩放地图，但如果是这样，这应该可以解决您的问题。

# javascript - 从 requestHeader 读取数据

> ID：10819158
> 
> 赞同：0
> 
> 时间：2012-05-30T15:13:15.543
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

在我的应用程序中，我正在向服务器发出 Ajax 请求

```
 $.ajax({
            type: "get",
            beforeSend: function (jqXHR) {
                jqXHR.setRequestHeader(ZO_KEY1, _key1);
                jqXHR.setRequestHeader(ZO_KEY2, _key2);
            },
            url: "http://192.168.1.4:3000/api/getNotes",
            success: function(data, textStatus, jqXHR) {
                  alert("aaaaa"+data);
            },
            error: function(jqXHR, textStatus, errorThrown) {
                  alert("bbbbb" + errorThrown);
            }
        }); 
```

如何使用 Ruby on Rails 从 RequestHeader 获取值

```
def get_notes

    @notes = Note.find:all
    render :json => @notes

  end 
```

我想从 setRequestHeader 中获取 key1 和 key2。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:22:44.893

当然，它有。您可以访问请求标头`request.headers['ZO_KEY1']`。

检查此以获取更多详细信息，[http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-headers](http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-headers)

# java - 下载适用于 oracle 11 的 Adfm.jar

> ID：10819159
> 
> 赞同：1
> 
> 时间：2012-05-30T15:13:16.033
> 
> 标签：java, oracle, jdbc, jar

我正在寻找适用于 Java oracle 11 的 adfm.jar Oracle 容器？我在哪里可以下载它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:05:08.010

Oracle Containers For Java (or `OC4J`) is a proprietary framework, and part of Oracle Application Development Framework (or `Oracle ADF`).

You need to buy `Oracle ADF`. You can do it separately, or you can get it packed with Weblogic Server (Standard Edition will do).

Edit: If you need it *just for development*, then it is packed with JDeveloper 11g, too. However if you want to sell your software, you (your client) must buy a license from Oracle.

# c++ - 对 recvfrom 检索到的 sockaddr* 进行 sendto-call 时出现“错误地址”

> ID：10819160
> 
> 赞同：0
> 
> 时间：2012-05-30T15:13:18.133
> 
> 标签：c++, sockets

```
 struct sockaddr_in  addrSenderOfVideo
    struct sockaddr_in   client_addr;     // Client Internet address
    char* buffer = new char[2];
    int sizeOfBuffer=1050;
    int clientfd;
    char* bufferWithPacketData = new char[sizeOfBuffer];
    extern int                  client_s;        // Client socket 

    if (client_s < 0)
          {
            printf("*** ERROR - socket() failed \n");
          }

           //Client address.
      client_addr.sin_family = AF_INET;
      client_addr.sin_addr.s_addr = htonl(INADDR_ANY); // IP address to use
      client_addr.sin_port = htons(portNumClient); 

    clientfd = bind(client_s,(const sockaddr*) &client_addr, sizeof(client_addr));
    fprintf (stderr, "inside of listen for new packet<; clientfd is %d",clientfd);

      if (clientfd < 0) 
        {
        fprintf (stderr, "WARNING -1 doing BIND!");

        }

    int n = recvfrom (client_s, bufferWithPacketData, sizeOfBuffer, 0,(struct sockaddr*)&addrSenderOfVideo, &fromlen);

   retcode = sendto(client_s, buffer,  symbol_size, 0,
          (struct sockaddr *)&addrSenderOfVideo, sizeof(addrSenderOfVideo) ); 
```

调用 sendto 时，会打印出错误“9errno is Bad address”。这是什么原因，我该如何解决？

数据在函数 recvfrom 中从发送方接收，并`addrSenderOfVideo`包含端口和 ip 号。发件人的 ip 为“127.0.0.1”，这也是包含在`addrSenderOfVideo`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:02:02.947

其中有两个参数`sendto`是指向用户空间缓冲区的指针，因此可以触发`EFAULT`：数据缓冲区和地址。该地址指向一个固定大小的局部变量，所以它似乎不是罪魁祸首。所以它必须是数据缓冲区。数据缓冲区指向一个大小为 2 的数组。您没有向我们展示您是如何初始化`symbol_size`的。概率是否`symbol_size`大于 2？

# c++ - C++ stringstream >> int 返回零

> ID：10819161
> 
> 赞同：4
> 
> 时间：2012-05-30T15:13:23.323
> 
> 标签：c++, integer, stringstream

我正在编写一个函数来返回一个数字的反转，即它转换`int(1234)`为`int(4321)`. 这是我目前拥有的：

```
#include <iostream>
#include <cstdlib>
#include <string>
#include <sstream>

using namespace std;

int reverse(int num) {
  stringstream ss (stringstream::in | stringstream::out);
  string initial; 
  int reversed;

  // read the number in to a string stream
  ss << num;
  initial = ss.str();

  // flush the stringstream
  ss.str("");
  for(unsigned int i(0); i <= initial.size(); i++) {
    ss << initial[initial.size() - i];
  }
  ss >> reversed;

  return reversed;
}

int main(int argc, const char *argv[])
{
  int test = 9871;
  cout << "test = " << test << endl;
  cout << "reverse = " << reverse(test) << endl;

  return 0;
} 
```

然而，这只是输出：

```
test = 9871
reverse = 0 
```

而且我很确定问题出在该行`ss >> reversed`中，问题在于它`reversed`被设置为`0`而不是值`ss`，但我无法弄清楚这段代码有什么问题，而且它看起来应该是令人愤怒的简单的。任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:17:43.780

`i`从 0 开始，然后`initial.size() - i`超出字符串范围。

更改为并从 1`ss << initial[initial.size() - i - 1];`迭代到`i``initiali.size() - 1`

```
for(unsigned i = 0; i != initial.size(); ++i) {
  ss << initial[initial.size() - i -1];
} 
```

或者从 1 迭代`i`到 initial.size()

```
for(unsigned i = 1; i <= initial.size(); ++i) {
  ss << initial[initial.size() - i];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:21:46.290

执行您想要的最快的 C++11 方法是：

```
string s = std::to_string(my_int);
std::reverse(begin(s), end(s));
return std::stoi(s); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T15:21:15.570

该`for`循环导致对 的越界访问`initial`。除了[Alessandro Pezzato](https://stackoverflow.com/users/786186/alessandro-pezzato)指出的问题外，循环中的终止条件`for`需要更改为，`i < initial.size()`否则仍然会发生越界：

```
for(unsigned int i(0); i < initial.size(); i++) {
    ss << initial[initial.size() - i - 1];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-30T15:33:46.610

您的问题源于您索引数组的方式，您总是需要在脑后知道 C/C++ 和许多类似语言中的索引数组是从零开始的，因为它允许一些计数问题在以下情况下消失。从一开始。

如果您的字符串的大小是 16 个字符，这意味着该特定字符串的索引在 16-1=15 处最大，给出范围 [0,15]。一般来说，它是`size() - 1`. 如果`initial[initial.size() - 1 - i]`对您来说看起来很脏，您可以随时将其设置为临时变量，例如`maxIndex`.

```
int maxIndex = initial.size() - 1;
for(unsigned int i = 0; i <= maxIndex; i++) 
{
    ss << initial[maxIndex - i]; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:39:51.750

在我看来，字符串转换使这更加复杂。我想我会直接从`int`to转换`int`：

```
int reverse(int input) {
    static const int base = 10;
    int ret = 0;

    while (input) { 
        ret = ret * base + input % base;
        input /= base;
    }
    return ret;
} 
```

请注意，您必须（稍微）更加精细才能正确处理负数。我用作`int`输入和输出类型是因为原始类型确实如此 - 但与原始类型一样，这只会真正为非负输入产生合理的结果。

# java - 为什么要用 DataOutputStream 包装 FileOutputStream？

> ID：10819164
> 
> 赞同：3
> 
> 时间：2012-05-30T15:13:46.943
> 
> 标签：java

一个DataOutputStream 可以包装一个FileOutputStream，但我不明白为什么在这里使用它。

```
FileOutputStream fos = new FileOutputStream(args[0]);
DataOutputStream dos = new DataOutputStream(fos);
dos.writeByte('j'); 
```

最后一行与`fos.write('j');`DataOutputStream 在这种情况下添加了什么？即为什么会有？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T15:21:23.660

Java 中的流是根据[装饰器设计模式](http://en.wikipedia.org/wiki/Decorator_pattern)定义的。

这意味着您可以将特定功能（在特定流类中实现）与另一个流组合在一起。这允许您自定义可以对流执行的操作。在您的具体示例中

*   a`FileOutputStream`是一个*具体组件*，它提供写入映射到文件的流的功能
*   a`DataOutputStream`是一个*具体的装饰器*，它附加到另一个装饰器或组件，能够通过为您提供一种将原语写入流的方法来扩展功能，而无需关心底层装饰链中的内容

# android - nullpointer 因为切换按钮？

> ID：10819165
> 
> 赞同：0
> 
> 时间：2012-05-30T15:13:50.627
> 
> 标签：android

我使用此代码来设置视图

```
 setContentView(R.layout.main_activity); 
```

然后我有这段代码可以在屏幕上显示信息

```
 Cursor MainPageCursor = databaseHelper.fetchAllReminders();
     startManagingCursor(MainPageCursor);

     String[] empty = new String[] { DatabaseStore.MUTE_TITLE,  DatabaseStore.START_KEY_TIME, DatabaseStore.END_KEY_TIME, DatabaseStore.COVERT_DAYS }; 

        int[] notempty = new int[]{R.id.text1,R.id.text2, R.id.text4,  R.id.text5};
        SimpleCursorAdapter mainPageList = new SimpleCursorAdapter(this, R.layout.editinfo_row,MainPageCursor, empty, notempty);
       setListAdapter(mainPageList); 
```

但我遇到的问题是我需要在 simplecursoraapter 中的每个项目行中添加一个切换按钮，但是如果我将它放入 simplecursoradapter 布局 R.layout.editinfo_row 我得到一个空指针异常，我该如何解决？

更新 - editinfo_row.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/widget38"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_marginLeft="10dip"
        android:layout_marginRight="10dip"
        android:orientation="vertical" >

        <TextView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/text1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:textSize="25sp" />

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

            <TextView
                android:id="@+id/text2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="30sp" />
    <TextView
                android:id="@+id/text3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text=" - "
                android:textSize="30sp" />
            <TextView
                android:id="@+id/text4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="30sp" />

        <ToggleButton
        android:id="@+id/toggleButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
          android:textOn="main"
        android:textOff="off"
        android:text="ToggleButton" />

</LinearLayout>

  <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
            <TextView
                android:id="@+id/text5"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="15sp" />

        </LinearLayout>

    </LinearLayout> 
```

日志猫：

```
05-30 16:31:14.249: E/AndroidRuntime(21484): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.seanoneill.android.SilentPhone/com.seanoneill.android.SilentPhone.MainActivity}: java.lang.NullPointerException
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.os.Looper.loop(Looper.java:123)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.ActivityThread.main(ActivityThread.java:3729)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at java.lang.reflect.Method.invokeNative(Native Method)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at java.lang.reflect.Method.invoke(Method.java:507)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at dalvik.system.NativeStart.main(Native Method)
05-30 16:31:14.249: E/AndroidRuntime(21484): Caused by: java.lang.NullPointerException
05-30 16:31:14.249: E/AndroidRuntime(21484):    at com.seanoneill.android.SilentPhone.MainActivity.addListenerOnButton(MainActivity.java:190)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at com.seanoneill.android.SilentPhone.MainActivity.onCreate(MainActivity.java:47)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-30 16:31:14.249: E/AndroidRuntime(21484):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
05-30 16:31:14.249: E/AndroidRuntime(21484):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:30:04.320

听起来你应该实现自己的适配器，覆盖`SimpleCursorAdapter.getView()`以获得你想要的东西。[这](http://www.higherpass.com/Android/Tutorials/Creating-Lists-Using-The-Android-Listactivity/3/)是我发现的一个例子

# lucene - “提升”对文档和查询意味着什么？

> ID：10819174
> 
> 赞同：1
> 
> 时间：2012-05-30T15:14:13.827
> 
> 标签：lucene, elasticsearch

我对 Lucene 还很陌生，我正在尝试更多地了解有关提升文档和查询的信息。我找到了很多关于如何配置文档提升的文档，但这意味着什么？

我现在真正能找到的只是它会影响评分，但我什至不清楚在进行搜索时更高或更低的值是否会导致更好的“分数”。我搜索了 Google 和 Lucene wiki，并没有找到任何关于这实际上是什么的通用解释......

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:17:00.943

在 Lucene 中，您可以提升文档或字段。在文档案例中，它的所有字段都将使用您用于提升文档的值来提升。

默认情况下，所有文档都没有提升，或者更确切地说，它们都具有相同的提升因子 1.0。通过更改它，Lucene 会或多或少地认为它很重要。例如：Boost 1.5 更大，这意味着更重要。

您可以在索引文档或创建查询时进行增强。

# android - 将 android 应用程序连接到活动的 mysql 数据库

> ID：10819182
> 
> 赞同：2
> 
> 时间：2012-05-30T15:14:48.030
> 
> 标签：android, mysql

所以，我对 android 编程非常陌生，我只是想知道，如果我想创建一个可以连接到我当前数据库的本机应用程序，那么用户仍然可以拥有他们的个人资料和一切。我该怎么办？

我尝试了很多资源，但一无所获。
也许有办法连接sqllite和mysql？我完全不知道。
请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:20:43.697

要连接到 sqlite 数据库，您需要使用 android 中的[sqliteopenhelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)类。

您不能将 MySql 数据库用于本地存储。但是您可以连接到远程数据库，但将数据发布到远程 URL。该 URL 上的一个简单 php 脚本可以查询或更新 MySQL 数据库，并以 JSON 格式给出响应，该响应可以在 android 中轻松解析。本[教程](http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/)对此非常有帮助。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:41:28.903

我相信没有直接的方法可以做到这一点（如果您的意思是要将**`MySQL`**网站数据库连接到**`SQLite`**移动数据库），但您可能需要搜索并考虑使用 Web 服务来访问您的 mysql 数据库，如[ksoap2](http://ksoap2.sourceforge.net)或任何其他类型的网络服务。

另一种方法是使用 http，如本[例](http://www.helloandroid.com/tutorials/connecting-mysql-database)所示。

祝你好运！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-30T15:23:34.527

Android 与 sqllite 配合得很好。这是一个带有示例的小文档：http: [//developer.android.com/guide/topics/data/data-storage.html#db](http://developer.android.com/guide/topics/data/data-storage.html#db)

# ruby-on-rails - local_assigns 如何在 Rails 中工作？

> ID：10819189
> 
> 赞同：67
> 
> 时间：2012-05-30T15:14:59.270
> 
> 标签：ruby-on-rails, views

我一直在谷歌上搜索这个，找不到正确的路径。我正在开发一个使用名为 local_assigns 的方法的 Rails 应用程序。这似乎是 Rails 或 gem 中的东西，而不是特定于我的应用程序，但它用于在不同的上下文中呈现部分，例如：

```
<% if local_assigns[:custom_name] %>
  <li><%= custom_name %></li>
<% else %> 
```

或者这个：

```
<%= render "discussions/complementary/#{local_assigns[:action] || params[:action]}" %> 
```

这是Rails方法吗？我在哪里可以找到更多关于此的文档？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-05-30T15:30:42.003

`local_assigns`是一个 Rails 视图辅助方法，您可以检查此部分是否已提供局部变量。

在这里，您使用一些值渲染部分，`headline`并且`person`将可以使用预定义的值访问。

```
<%= render "shared/header", { :headline => "Welcome", :person => person } %> 
```

鉴于`shared/header`：

```
Headline: <%= headline %>
First name: <%= person.first_name %> 
```

以下是检查这些变量是否传入的方法：

```
<% if local_assigns.has_key? :headline %>
  Headline: <%= headline %>
<% end %> 
```

查看此文档以获取有关将[**局部变量传递给子模板**](http://api.rubyonrails.org/v3.2/classes/ActionView/Base.html#label-Passing+local+variables+to+sub+templates)部分的更多详细信息。

# model-view-controller - 尝试将 IIS Express 与 MVC2 Webform 混合应用程序一起使用

> ID：10819191
> 
> 赞同：0
> 
> 时间：2012-05-30T15:15:01.263
> 
> 标签：model-view-controller, asp.net-mvc-2, webforms, iis-express, hybrid

我正在开发一个混合了 Webforms 和 MVC2 的 Web 应用程序。（使用.Net 3.5）

到目前为止，我一直在使用 Visual Studio Web 服务器进行开发，但我正在尝试切换到使用 Visual Studio 2010 中提供的 IIS Express 服务器。

当我在 IIS Express 中运行应用程序时，Webforms 很好，但是当我尝试导航到 MVC 页面时，出现 404 错误。

这适用于 Visual Studio Webserver。

关于如何配置 IIS Express 的任何想法 - 到目前为止有很多谷歌搜索，但什么都没有......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:01:56.143

对此进行了进一步搜索，并在以下博客中找到了答案： [MvcRouting](http://www.beletsky.net/2011/10/integrating-aspnet-mvc-into-legacy-web.html%20MVCRouting)

在这个博客的中间，有一个关于添加 URL 路由模块和处理程序的部分。这解决了问题。我还必须在帖子底部添加会话位。

解决了！:-))

# python - UTF-8 列的 SQLAlchemy 结果是“str”类型，为什么？

> ID：10819192
> 
> 赞同：23
> 
> 时间：2012-05-30T15:15:06.707
> 
> 标签：python, mysql, string, encoding, sqlalchemy

我有一个使用 SQLAlchemy 引擎执行的 SQL 查询：

```
result = engine.execute('SELECT utf_8_field FROM table') 
```

数据库是 MySQL，列类型是 UTF-8 编码的 TEXT。返回的 utf_8_field 的类型是“str”，即使我在创建引擎时设置了选项 convert_unicode=True。现在发生的情况是，如果我的字符串中有一个像“é”这样的字符（它不是 7 位 ASCII，而是在扩展的 ASCII 集中），我在尝试执行此操作时会收到 UnicodeDecodeError：

```
utf_8_field.encode("utf-8") 
```

确切的错误是：

```
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe9 in position 1: ordinal not in range(128) 
```

在研究这个时，我发现 str.encode 不支持扩展的 ASCII 字符集！我觉得这很奇怪，但这是另一个问题。

我不明白为什么 SQLAlchemy 没有给我一个 unicode 字符串。我以前使用 DB-API，效果很好。我的表还没有 SQLAlchemy 表对象，这就是我使用执行命令的原因。

任何的想法？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-30T15:24:24.707

如果要自动转换数据，则应在创建引擎时[指定字符集：](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#unicode)

```
create_engine('mysql+mysqldb:///mydb?charset=utf8') 
```

单独设置`use_unicode`不会告诉 sqlalchemy 使用哪个字符集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:18:55.400

要将 UTF-8 字节串转换为 unicode 对象，您需要*解码*：

```
utf_8_field.decode('utf8') 
```

此外，在执行 raw `SELECT`through时`.execute`，SQLAlchemy 没有元数据可以确定您的查询正在返回 utf-8 数据，因此它不会为您将此信息转换为 unicode。

换句话说，`convert_unicode`仅当您使用 SQLAlchemy SQL 表达式 API 或 ORM 功能时才有效。

编辑：正如所指出的，您的数据甚至不是 UTF-8 编码的；`0xe9`在 UTF-8 中表示介于`\u9000`和之间的字符`\u9fff`，它们是 CJK 统一表意文字，而您说它是 latin-1 字符，其 UTF-8 代码将以 . 开头`0xc3`。这可能是`ISO-8859-1`(latin-1) 或类似的：

```
>>> u'é'.encode('ISO-8859-1')
'\xe9' 
```

然后结论是告诉 SQLAlchemy 使用`charset=utf8`参数连接到不同的字符集，正如@mata 所指出的那样。

# php - 这个 PHP 有什么问题？什么都没有出现

> ID：10819194
> 
> 赞同：2
> 
> 时间：2012-05-30T15:15:13.743
> 
> 标签：php

我正在尝试学习 PHP，所以我很可能会犯一个非常初级的错误。

基本上，我有一个 page.php 文件，它是我要创建的页面的类文件，我想将它包含在我的 home.php 页面中（我使用 require 函数来执行此操作）。然而，什么也没有出现。我是根据我正在阅读的一本书来做这件事的，它似乎在那里工作得很好。

页面.php：

```
<?php

class Page {
    // attributes
    public $content;
    public $title = "TLA Consulting Pty Ltd";
    public $keywords = "TLA Consulting, Three Letter Abbreviation, some of my best friends are search engines";
    public $buttons = array("Home" => "home.php", "Contact" => "contact.php", "Services" => "services.php", "Site Map" => "map.php");

    public function __set($name, $value) {
        $this->$name = $value;
    }

    public function display() {
        echo "<html>\n<head>\n";
        $this->displayTitle();
        $this->displayKeywords();
        $this->displayStyle();
        echo "</head>\n<body>\n";
        $this->displayHeader();
        $this->displayMenu($this->buttons); // try this line without giving it the parameter
        echo $this->content;
        $this->displayFooter();
        echo "</body>\n</html>";
    }

    public function displayTitle() {
        echo "<title>$this->title</title>";
    }

    public function displayKeywords() {
        echo "<meta name=\"keywords\" content=\"$this->keywords\" />";
    }

    public function displayStyle() {
?>
        <style>
            h1 {
                color: white;
                font-size: 24px;
                text-align: center;
                font-family: helvetica, arial, sans-serif;
            }

            .menu {
                color: white;
                font-size: 12px;
                text-align: center;
                font-family: helvetica, arial, sans-serif;
                font-weight: bold;
            }

            td {
                background-color: black;
            }

            p {
                color: black;
                font-size: 12px;
                text-align: justify;
                font-family: helvetica, arial, sans-serif;
            }
        </style>
<?php
    }

    public function displayHeader() {
?>
        <table width="100%" cellpadding="12" cellspacing="0" border="0">
            <tr bgcolor="black">
                <td aling="left"><img src="http://i.imgur.com/xBrUZ.png" alt="Iron Man's finger" /></td>
                <td><h1>TLA Consulting Pty Ltd</h1></td>
            </tr>
        </table>
<?php
    }

    public function displayMenu($buttons) {
        echo "<table width=\"100%\" bgcolor=\"white\">\n";
        echo "<tr>\n";

        // calculate button size
        $width = 100 / count($buttons);

        while (list($name, $url) = each($buttons)) {
            $this -> displayButton($width, $name, $url, !this->IsURLCurrentPage($url));
        }
        echo "</tr>\n</table>\n";
    }

    public function IsURLCurrentPage($url) {
        if (!strpos($_SERVER['PHP_SELF'], $url)) {
            return false;
        }
        else {
            return true;
        }
    }

    public function displayButton($width, $name, $url, $active = true) {
        if ($active) {
            echo "<td width=\"".$width."%\">
            <a href=\"$url\"><img src=\"http://i.imgur.com/xBrUZ.png\" alt=\"$name\" /></a>
            <a href=\"$url\"><span class=\"menu\">$name</span></a>
            </td>";
        }
        else {
            echo "<td width=\"".$width."%\">
            <img src=\"http://i.imgur.com/xBrUZ.png\" />
            <span class=\"menu\">$name</span>
            </td>";
        }
    }

    public function displayFooter() {
        echo "<p>I am a footer ololz</p>";
    }
}

?> 
```

主页.php：

```
<?php

    require("page.php");

    $homepage = new Page();

    $homepage->content = "<p>Hi there, I like blueberries greatlly.</p>
                          <p>I hope you'll join me in loving blueberries!</p>"

    $homepage->display();

?> 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:20:07.390

两个问题：

*   `this`应该`$this`在第 86 行`page.php`。
*   你需要一个分号在末尾`...blueberries!</p>"`

如果未打开[错误报告](http://php.net/manual/en/function.error-reporting.php)，您可能看不到错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:30:58.033

您不一致地使用 php 的开头和结尾。

例如这里：

```
 public function displayStyle() {
?>
    <style>
        h1 {
            color: white;
            font-size: 24px;
            text-align: center;
            font-family: helvetica, arial, sans-serif;
        }

        .menu {
            color: white;
            font-size: 12px;
            text-align: center;
            font-family: helvetica, arial, sans-serif;
            font-weight: bold;
        }

        td {
            background-color: black;
        }

        p {
            color: black;
            font-size: 12px;
            text-align: justify;
            font-family: helvetica, arial, sans-serif;
        }
    </style>
  <?php  
  } 
```

您正在启动一个函数，然后通过关闭 php 块“？>”来打破它并粘贴一个样式表部分，该部分将在页面加载时回显。如果要使用此功能显示样式，则必须将其设置为：

```
<?php
 public function displayStyle() {

 echo   "<style>".
        "h1 {".
            "color: white;";   
  }
 ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:22:37.640

在 home.php 文件中，ine 10 中缺少分号

在 page.php 文件中，您在第 86 行缺少字符“$”

```
$this -> displayButton($width, $name, $url, !$this->IsURLCurrentPage($url)); 
```

# jquery - jquery 字体选择器不显示非标准字体

> ID：10819195
> 
> 赞同：1
> 
> 时间：2012-05-30T15:15:14.450
> 
> 标签：jquery, css, fonts

我在这里使用这个 jquery 插件：[github 上的 jQuery 字体选择器，](https://github.com/CD1212/jQuery-Font-Chooser)但它似乎正在使用标准网络字体。我认为如果我在 css 中加载字体系列，它会起作用，因为它只是更改 css 字体系列。知道为什么它不起作用吗？

这是小提琴：

[http://jsfiddle.net/thindery/YqrXt/2/](http://jsfiddle.net/thindery/YqrXt/2/)

我在列表末尾添加了三种独特的字体，但它们没有显示出来。我做了一个测试 div 以确保字体正常工作，而且它们似乎是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:03:22.593

添加后备字体，例如`sans-serif`. 该插件似乎无法处理没有后备的字体条目。这是您的 jsFiddle[的更新版本](http://jsfiddle.net/RustyTheBoyRobot/YqrXt/11/)。请注意，Arial（一种标准的网络字体）不会在没有列出后备的情况下显示。

# cocoa - 带有 kCGDesktopWindowLevel 的 NSWindow 的 NSViewAnimation 闪烁

> ID：10819199
> 
> 赞同：1
> 
> 时间：2012-05-30T15:15:36.443
> 
> 标签：cocoa, nswindow, nsviewanimation

我有一个`NSWindow`设置，`kCGDesktopWindowLevel`所以它位于桌面图标后面的桌面上（如墙纸）。

我正在尝试使用`NSViewAnimation`.

问题是动画闪烁很多。我追踪到了窗台。

```
self.window.level = kCGDesktopWindowLevel; 
```

如果我使用默认窗口级别，动画会按预期顺利运行。

任何建议可能是什么原因？在那个级别绘制窗口有什么不同吗？

**编辑：**

这可能是一个 RunLoop 问题吗？背景窗口不接收用户输入。但是，我的应用程序还有另一个可以接收输入的普通窗口。

# c# - Asp.net MVC 路由与某些文件扩展名不匹配

> ID：10819200
> 
> 赞同：9
> 
> 时间：2012-05-30T15:15:36.743
> 
> 标签：c#, asp.net-mvc, routing

当其中包含某些文件扩展名时，我遇到路由不匹配的问题。我怀疑这可能是 IIS 问题，但我似乎无法找到它。

首先，我关闭了 RouteExistingFiles：

```
routes.RouteExistingFiles = false; 
```

然后我有以下路线：

```
routes.MapRoute("", "category/{category}.aspx", new { controller = "Category", action = "View" }); 
```

并且以下 url 与此路由不匹配：

```
http://mysite/category/test.aspx 
```

但是，如果我删除文件扩展名并将路由更改为：

```
routes.MapRoute("", "category/{category}", new { controller = "Category", action = "View" }); 
```

然后上面的 url 匹配 {category} 设置为“test.aspx”

这条路线我也有同样的问题：

```
routes.MapRoute("sitemap", "sitemap.xml", new { controller = "Resource", action = "Sitemap" }); 
```

奇怪的是，我对所有带有文件扩展名的路由都没有这个问题。以下路线似乎对我来说很好：

```
routes.MapRoute("", "favicon.ico", new { controller = "Resource", action = "Favicon" });
routes.MapRoute("", "min.css", new { controller = "Resource", action = "Css" });
routes.MapRoute("", "min.js", new { controller = "Resource", action = "JavaScript" });
routes.MapRoute("", "rsd.xml", new { controller = "MetaWeblog", action = "Rsd" }); 
```

.aspx 和 .xml 扩展名有什么我应该注意的吗？这可能是 IIS 问题吗？有没有比仅使用[RouteDebugger](http://nuget.org/packages/routedebugger)更好的调试方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:56:26.267

如果 url 包含 .xml 或 .aspx，您的问题是不是将请求定向到这些操作？

那么我想这应该是真的，

```
routes.RouteExistingFiles = true; 
```

**更新：**

对于在 IIS 7 中运行的站点，我使用以下路由在两种情况下进行了测试。

```
routes.MapRoute("sitemap", "{sitemap}.xml", 
                   new { controller = "Resource", action = "Sitemap" }); 
```

用`RouteExistingFiles`是假的，

在这种情况下，当 sitemap.xml 文件存在时，请求被定向到该文件，否则请求被定向到操作。

与`RouteExistingFiles`是真的，

当 sitemap.xml 文件存在或不存在时，请求被定向到操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T13:55:14.870

我刚遇到这个问题。对我来说，没有为没有托管处理程序的文件调用路由。以下配置对我有用：

```
<system.webServer>
  <modules>
    <remove name="UrlRoutingModule-4.0" />
    <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
  </modules>
</system.webServer> 
```

# objective-c - 将 Hashtag 添加到 Twitter 帖子

> ID：10819207
> 
> 赞同：0
> 
> 时间：2012-05-30T15:15:57.290
> 
> 标签：objective-c, ios, twitter

我正在使用 TWTweetComposeViewController 允许用户从我的应用程序发送推文。由于目标是促进使用该应用程序的人之间的交流，因此所有推文都应在每条推文上附加一个特定的主题标签。我已经阅读了 Twitter TOS，所以显然这不能“在桌子下面”完成。但是，如果您先询问，TOS 确实允许您向推文添加内容。

我只想让它明显地将标签连接到用户在推文窗口中写入的任何内容，并使其不可移除 - 这样用户就知道它正在发送，并且它正确计入字符计数器。

最好的方法是什么？继承 TWTweetComposeViewController？自己滚？有没有更好的方法来“标记”这个应用程序中的所有推文，它比主题标签更不突兀？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:45:13.560

You could do this with [DETweetComposeViewController](https://github.com/doubleencore/DETweetComposeViewController). It's an open source replacement for Apple's routines, so it works with iOS 4, and you can completely customize it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:10:05.200

为什么不通过主题标签长度减少您输入的最大字符并制作一个 UI 标签或其他东西来显示它，以获得视觉提示，您将在他们的推文中附加一些东西？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:40:56.167

正如您所意识到的，您可以使用文本、附加图像和附加 URL 预先填充 TWTweetController，这样您就可以使用您的主题标签预先填充文本，但是一旦显示它，您就无法控制用户最终对文本内容所做的事情，包括删除你的标签。

实现你想要的唯一方法；“不可移除​​的标签”是滚动您自己的控制器。

TWTweetController 似乎使用了相当多的 Apple 私有魔法，所以我不想尝试子类化，特别是因为它似乎随着每个操作系统版本而改变。注意当你开始输入@references 时会发生什么。这在 5.0 版本中从未发生过。换句话说，如果你对它进行子类化，当它因操作系统版本而中断时，我不会感到惊讶。

因此，请权衡开发和 QA 自己的 Twitter 引擎与使用免费且可靠的模块并让您的用户删除他们可能不想使用的主题标签的成本。

# extjs - ext.js 4中图表完全绘制并动画完成后的事件是什么

> ID：10819209
> 
> 赞同：3
> 
> 时间：2012-05-30T15:15:59.880
> 
> 标签：extjs

我有一个标签面板。每个选项卡中都有一个图表。我正在尝试在每个选项卡开关之间创建一个加载掩码。我曾尝试在渲染图表之前屏蔽正文并取消屏蔽后渲染，但似乎在图表完全绘制之前图表已被取消屏蔽。发生的事情是我什至没有看到加载栏，只是一个白屏，而不是绘制的图表。（如果我在取消屏蔽之前发出警报，我会看到加载屏蔽）

我最接近的是将遮罩放在选项卡面板`s before change event and unmasking on chart`的 afterrender 事件上。仍然没有运气...需要帮助，谢谢

```
listeners:{
        beforetabchange:function(){
            Ext.getBody().mask("Loading");
        },
        tabchange:function(){
            //Ext.getBody().unmask();
        }
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-16T20:51:22.353

您应该通过收听图表（或其商店）上的特定事件来移除掩码，而不是在选项卡面板上。例如 `render`图表的`load`事件或来自其商店的事件。

# java - 如何在我的 Web 项目中使用 jstl 调用 oracle 存储过程？

> ID：10819210
> 
> 赞同：1
> 
> 时间：2012-05-30T15:16:09.187
> 
> 标签：java, oracle, web, jstl, procedure

所有插入、更新和删除都需要在我的数据库中实现，我需要知道一种使用 jstl 从我的 Web 应用程序调用它们的形式。我会感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-01T16:18:59.893

有可能参见[http://dev-answers.blogspot.com/2008/04/call-stored-procedure-from-jsp-with.html](http://dev-answers.blogspot.com/2008/04/call-stored-procedure-from-jsp-with.html)但用**调用** 更改**exec**

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:20:17.083

你不能那样做。提出一个 DAO 层来处理数据库内容并在您的控制器/servlet 中使用您的 DAO。永远不要直接从 JSP 调用数据库代码！**

# android - 在 SQL 数据库中存储图像路径

> ID：10819213
> 
> 赞同：2
> 
> 时间：2012-05-30T15:16:13.977
> 
> 标签：android, sql, image

我有一个应用程序可以让用户单击图像按钮。单击后，用户可以从图库中选择图像。有人可以给我一个存储我在下面的 onActivityResult 方法中收到的图像路径的 SQL 数据库示例吗？

```
public void onActivityResult(int requestCode, int resultCode, Intent data) {
       if(requestCode == PICK_FROM_FILE && data != null && data.getData() != null) {
           Uri uri = data.getData();
           if(uri != null) {
              Cursor cursor = getContentResolver().query(uri, new String[] {   
                                       android.provider.MediaStore.Images.ImageColumns.DATA}, 
                                       null, null, null);
                    cursor.moveToFirst();
                    String imageFilePath = cursor.getString(0);             
                    cursor.close();

                    if(imageFilePath != null) {
                            // HERE I WANT TO STORE IT IN THE SQL DATABASE 
                        }
           }
       }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:25:27.443

本[教程](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)将为您提供所需的任何东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:57:43.137

您可以使用[简单的方法](http://pastebin.com/3pfzXMgv)测试我的示例[SQLite 数据库项目](http://www.mediafire.com/?569on9rvb4qoa7w)。

* * *

如果要插入数据，请使用：

```
 db.execSQL("INSERT INTO TABLE_NAME VALUES('"+imageFilePath+"');"); 
```

其中**db**是 SQLiteDatabase 类型的对象，您可以在示例中找到所有详细信息。

* * *

您还可以将图像存储在数据库中。这里有一些关于将**图像**保存到数据库的好教程：

* * *

[教程 1](http://android-codes-examples.blogspot.com/2011/09/image-and-content-is-populated-from.html)

* * *

[教程 2](http://www.tutorialforandroid.com/2009/10/how-to-insert-image-data-to-sqlite.html)

* * *

# java - Windows 中 javax.comm.properties 的备用位置

> ID：10819215
> 
> 赞同：0
> 
> 时间：2012-05-30T15:16:26.727
> 
> 标签：java, windows, serial-port, javax.comm

我正在构建一个程序，该程序需要安装在我没有对 %JAVA_HOME%/lib 的写入权限的 Windows 机器上。

除了 %JAVA_HOME%/lib 之外，还有什么地方可以将 javax.comm.properties 移动到其他地方吗？

根据 Java COM API 常见问题解答：

> 问：我的应用程序在枚举可用端口时没有找到任何端口。
> 答：为了让 Java 通信 API 找到端口，文件 javax.comm.properties 必须位于正确的位置。首选位置在 /lib 中。有关备用位置和更多信息，请参阅安装说明。

在哪里可以找到包含这些备用位置的 Sun 安装说明？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:53:56.680

基于一个人在这里说的话： [https ://forums.oracle.com/forums/thread.jspa?threadID=1316406](https://forums.oracle.com/forums/thread.jspa?threadID=1316406)

您可以将文件*javax.comm.properties*放在放置**comm.jar**的位置。但是要运行该程序，您应该指定指向 comm.jar 的路径，如下所示：

```
java -cp <your.class.path>;<path.to>/comm.jar YourProgramThatUsesComm.jar 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-09T18:12:02.753

我找到了一种适合我的方法。以下是要求：

*   `comm.jar`必须完全命名`comm.jar`（不是`comm-2.0.jar`示例），并且必须位于类路径中名为完全命名的目录中`"lib"`。
*   `javax.comm.properties`还必须具有该确切名称，并且与 . 位于同一目录中`comm.jar`。
*   `win32com.dll`必须在`java.library.path`.

因此，如果您有这样的目录设置：

```
- lib\
   |- comm.jar
   |- javax.comm.properties
- ext\
   |- win32com.dll 
```

`java`然后您可以在这些目录的根目录中使用以下命令（假设您的项目`jar`文件`YourMainClass`也位于该`lib`目录中：

```
java -Djava.library.path=.\ext -cp .\lib\* YourMainClass 
```

有了这个，您应该不再需要在JRE的`\bin`或目录下放置任何东西。`\lib`

# objective-c - 后台线程和主线程同时访问核心数据时应用程序崩溃

> ID：10819217
> 
> 赞同：1
> 
> 时间：2012-05-30T15:16:35.807
> 
> 标签：objective-c, ios, core-data, grand-central-dispatch

我的情况是我的应用程序使用核心数据，并且需要从该核心数据加载图像以显示在表格视图中。由于这样做需要时间，它需要在后台线程中运行。所以我有这样的代码：

```
dispatch_async(queue, ^{

    if (self.cellInfo.numberOfMediaItems > 0) {

        int i = 0;

        int numberOfThumbnails = MIN(self.cellInfo.numberOfMediaItems, 3);

        while (i < numberOfThumbnails) {
            Media *media = [self.entry.media objectAtIndex:i];

            UIImage *image = [media getThumbnail];
            [self.mediaArray addObject:image];
            i++;
        }
    }

    dispatch_async(dispatch_get_main_queue(), ^{
        self.isFinishedProcessing = YES;

        [self setNeedsDisplay];
    });

}); 
```

这大大加快了该过程，并且图像在准备就绪时出现在背景中。

问题是，有时它会让前台线程与后台线程同时尝试访问核心数据。它不喜欢这样，所以它崩溃了。这一定是很多开发人员都会遇到的情况，因此有一个解决方案。我想知道如何处理这种情况，以便我的应用程序在它们同时开始访问核心数据时停止崩溃？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T15:21:39.077

[在这里查看我之前的答案](https://stackoverflow.com/a/4264793/49658)。

> 对于核心数据，有一条黄金法则——每个线程一个托管对象上下文。托管对象上下文不是线程安全的，因此如果您在后台任务中工作，您可以使用主线程来避免与 UI 操作的线程冲突，或者创建一个新上下文来完成工作。如果工作需要几秒钟后，您应该执行后者以阻止您的 UI 锁定。

简而言之，您需要创建一个单独的托管对象上下文以在后台线程中使用。然后，您必须在适当的地方将更改合并回原始上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:22:30.277

你需要阅读 Apple 的 Core Data 编程指南。

基本上，NSManagedObjects 和 NSManagedObjectContexts 不是线程安全的。您需要在后台上下文中创建一个新的 NSManagedObjectContext 来完成这项工作。您不能跨线程传递 NSManagedObjects。相反，您可以存储一个 NSManagedObjectID 数组，并使用它从新上下文中“重新加载”对象。

# javascript - 按所有列标题排序

> ID：10819220
> 
> 赞同：0
> 
> 时间：2012-05-30T15:16:46.650
> 
> 标签：javascript, jquery, jquery-plugins

我有一个在单击搜索按钮时动态生成的表格，如下所示：

```
puts "<table class=\"resultsTable\">"
        puts "<tr><th colspan=\"10\" class=\"head\">Search Results</th></tr>"
        puts "<tr>"
        puts    "<th></th>"
        puts    "<th>App</th>"
        puts    "<th>Name</th>"
        puts    "<th>Region</th>"
        puts    "<th>Market</th>"
        puts    "<th>Language</th>"
        puts    "<th>Function</th>"
        puts    "<th>LOB</th>"
        puts    "<th>Term</th>"
        puts    "<th>Call</th>"
        puts "</tr>"
        puts "<tr>"
        puts    "<td id=\"$cellID\">"
        puts    "<img src=\"images/magnifier.gif\" style=\"cursor:pointer\" onclick=\"showRouting({'spec':'${specific}', 'id':'${mkt_id}', 'name':'${mkt_name}', 'xfer':'${xfertype}', 'cell':'${cellID}'})\"</img>"
        puts    "</td>"
        puts    "<td>$level</td>"
        puts    "<td>$name</td>"
        puts    "<td>$reg_name</td>"
        puts    "<td>$link</td>"
        puts    "<td>$lang</td>"
        puts    "<td>$func</td>"
        puts    "<td>$lob</td>"
        puts    "<td>$term</td>"
        puts    "<td>$call</td>"
        puts "</tr>" 
```

我可以启用某种排序，以便我可以按每一列（按应用程序、名称等）排序吗？我见过某种 jquery 表排序器和其他东西，但我无法用我的代码做到这一点。有人可以告诉我我将如何去做吗？

[0,0][1,0] 是什么意思？我将如何相应地修改我的代码？：

```
$(document).ready(function() 
    { 
        $("#myTable").tablesorter( {sortList: [[0,0], [1,0]]} ); 
    } 
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:20:31.313

您可以使用此处列出的插件-> [http://datatables.net/release-datatables/examples/basic_init/table_sorting.html](http://datatables.net/release-datatables/examples/basic_init/table_sorting.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:20:43.667

您可以使用[http://datatables.net/](http://datatables.net/) 或[http://tablesorter.com/docs/#Demo](http://tablesorter.com/docs/#Demo)

对于像这样设置的表排序器

```
// call the tablesorter plugin 
    $("table").tablesorter({ 
        // sort on the first column and third column, order asc 
        sortList: [[0,0],[2,0]] 
    }); 
```

其中 sortList：`[[0,0],[2,0]]`包含列索引（基于 0）和排序顺序。

所以`[[0,0],[2,0]]`意味着第一列和第三列将是可排序的，最初它们将按升序排序。

检查这个[工作小提琴](http://jsfiddle.net/joycse06/3G5b2/)，其中选项已正确注释。

这里有一个非常基本的版本，所有表格列都是可排序的，但没有图形，例如箭头或背景[。](http://jsfiddle.net/joycse06/3G5b2/1/)

# iphone - 是否可以按国家/地区控制 iPhone 应用程序图标和价格？

> ID：10819223
> 
> 赞同：2
> 
> 时间：2012-05-30T15:16:56.083
> 
> 标签：iphone, ios, app-store, app-store-connect

我希望在全球范围内推出我的游戏，但希望能够根据地区更改图标。（特别是东西方）我们的游戏去年在日本卖得很好，但是这个图标（非常日本动漫风格）影响了我们在美国的销售，尽管核心玩法不同。

是否可以按地区更改图标或价格？我无法在 iTunesConnnect 中看到如何找到任何信息。

此外，如果不可能，如果区域不重叠，Apple 是否会拒绝具有给定更改的应用程序的 2 版本？

在此先感谢，如果在网站上的某个地方回答了这个问题，我们深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:22:27.083

您可以使用不同的图标和捆绑标识符重建应用程序，并在 itunesconnect 中为您要更改图标/价格的每个区域创建一个新的应用程序条目。

# c++ - 图像像素总和

> ID：10819226
> 
> 赞同：3
> 
> 时间：2012-05-30T15:17:10.187
> 
> 标签：c++, image-processing, opencv

我试图通过将图像划分为块网格并获取每个块的像素总和来对黑白区域的像素值求和。

当我打印每个值时，值都相同 = 255。我的问题是：为什么会发生这种情况？有些块只有黑色像素，有些块有黑色和白色？

```
double* divide (Mat I)
         {
             //double* pointer;
         static double*  sums= new double [9];
        //pointer= sums[0];
          //double sums2[10];

          Mat block;
              //Mat block2;

    int numberblocks=9; 
    int bh;
    int bw;
    //int bh2;
    //int bw2;

    bh=I.cols/numberblocks;
    bw=I.rows/numberblocks; 
    //bh2=u.cols/numberblocks;
    //bw2=u.rows/numberblocks; 
    //
    double blockarea=bh*bw;
    //double num=0;
    //double blockarea2=bh2*bw2;

    //int r=0;
    //int c=0;
    //int err=0;

    for(int a=0;a<9;a++)
    {
       for (int r = 0; r < I.rows; r += bw)
       {
             for (int c = 0; c < I.cols; c += bh)
                 {

                 block  = I(cv::Range(r, min(r + bw, I.rows)),cv::Range(c, min(c + bh, I.cols)));

                  }
       }
       double sum=0;

         for(int i=0;i<block.rows;i++)
         {
             for(int j=0;j<block.cols;j++)
                 {
                sums[a] = sum + block.at<uchar>(i,j); //sums[k-1] + block.at<uchar>(i,j);
             }
         }
         cout<<"sum of"<<a<<"is"<<sums[a]<<endl;

    }

return sums;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T17:24:12.700

我认为这会做

```
 for(int i=0;i<block.rows;i++)
     {
         for(int j=0;j<block.cols;j++)
             {

              sum = sum + block.at<uchar>(i,j); //sums[k-1] + block.at<uchar>(i,j);
         }
     }
     sums[a]=sum; 
```

调试它以确定。如果不使用 sum 它将是：

```
 for(int i=0;i<block.rows;i++)
     {
         for(int j=0;j<block.cols;j++)
             {

               sums[a] =  sums[a] + block.at<uchar>(i,j); //sums[k-1] + block.at<uchar>(i,j);
         }
     } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:24:11.367

该行

sums[a] = sum + block.at(i,j);

看起来很奇怪。sums[a] 始终具有块的最后一个元素的值。如果这偶然总是 255，你有你的解释。

# c# - Twitter OAuth Flow - 对 oob/3-legged auth 和一般流程感到困惑，不需要 PIN？

> ID：10819229
> 
> 赞同：3
> 
> 时间：2012-05-30T15:17:17.830
> 
> 标签：c#, oauth, twitter, twitter-oauth

继续：[在没有 3rd 方库的情况下设置 Twitter OAuth](https://stackoverflow.com/questions/10687841/setting-up-twitter-oauth-without-3rd-party-libraries/10691466#10691466)

感谢 Nylander 先生的帮助，我设法让我的 oAuth 课程正常工作（尽管只是在很长一段时间后）！但是，我对 oAuth 流程的一些方面感到困惑。

以下是我制作的程序中发生的情况的细分：

==编辑，我想我会发布部分代码，对我来说很难用文字来解释==

```
//1st code segment
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("https://api.twitter.com/oauth/request_token");
string response = "";
HttpWebResponse resp = (HttpWebResponse)request.GetResponse();
using (StreamReader reader = new StreamReader(resp.GetResponseStream()))
{
response = reader.ReadToEnd();
} 
```

至此，我可以成功得到响应。

响应 --> **oauth_token=asjndiqufh9uf&oauth_token_secret=oinroiqurhwunwer&oauth_callback_confirmed=true**

```
//2nd code segment
Process proc = new Process();
proc.StartInfo.UseShellExecute = true;
proc.StartInfo.FileName = "https://api.twitter.com/oauth/authenticate?" + response;
proc.Start(); 
```

这将用户（我）带到一个页面，我必须选择是否要授权它。如果我同意，我将被带到一个包含 PIN 码的页面。

```
//3rd code segment
Console.WriteLine("Enter the PIN");
string pin = Console.ReadLine();
baseString = generateBaseString("POST", "https://api.twitter.com/oauth/access_token", oauth_token);
oauth_signature = generateSignature(baseString, oauth_token_secret);

HttpWebRequest request2 = (HttpWebRequest)WebRequest.Create("https://api.twitter.com/oauth/access_token");
request2.Method = "POST";
request2.Headers["Authorization"] = generateAuthorizationHeader(oauth_token);
string response2 = "";
HttpWebResponse resp2 = (HttpWebResponse)request2.GetResponse();
using (StreamReader reader = new StreamReader(resp2.GetResponseStream()))
{
response2 = reader.ReadToEnd();
}
        Console.WriteLine(response2);

    } 
```

此处的代码只是请求将 PIN 输入到应用程序中，然后在**response2**中返回最终的 oauth_token 和 oauth_token_secret，以获得一个完全正常工作的 oAuth 应用程序。**（tl;dr - 此时，应用程序已经拥有它需要的所有令牌）**

- 如果我在第二个代码段期间没有登录，无论我是否输入 PIN，我都会收到 401 Unauthorized 错误，我猜这是预期的。

- 如果我在第二个代码段期间登录并被定向到 PIN 页面，但随后选择不输入 PIN/在我的应用程序中输入错误的 PIN，我仍然可以成功通过身份验证，并且可以在没有任何信息的情况下获得最终令牌问题。为什么？

**- 我是在做 3-legged oAuth 还是 OOB oAuth？**

**- 那我为什么需要 PIN 码？**

**- 我应该如何正确使用 PIN 码（如果需要）？**

**- 我应该如何在没有 PIN 的情况下进行身份验证（如果我不需要它）？**

**-如何让用户在认证一次后不会总是看到 PIN 页面？我可以在第一个请求中放置一个回调，但是如果我不希望用户被重定向到任何页面怎么办？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:01:49.990

> 我是在做 3-legged oAuth 还是 OOB oAuth？

你正在做这两件事。3-legged 意味着您涉及用户，2-legged 是企业对企业或服务对服务。OOB（带外）意味着您自动触发基于 PIN 的身份验证方案。基本上，这意味着您说如果没有用户手动将其作为 PIN 输入，您将无法接收正常的 oauth_verifier 参数。

> 那我为什么需要 PIN 码？

您收到 PIN 码是因为您将回叫声明为 OOB。如果您设置了真正的回调，您可以改为直接将 oauth_verifier 接收到您的应用程序。

> 我应该如何正确使用 PIN 码（如果需要）？

您在下一步中使用它，在将请求令牌交换为访问令牌时，您在请求中将其作为 oauth_verifier 传递。

> 我应该如何在没有 PIN 的情况下进行身份验证（如果我不需要它）？

您需要 PIN，或者如果您使用真正的回调，则需要 oauth_verifier。它们是相同的，唯一的区别是 PIN 打印在屏幕上，因此用户可以将其复制粘贴到您的应用程序中，而 oauth_verifier 由您的应用程序自动获取。

> 如何使用户在验证一次后不会总是看到 PIN 页面？我可以在第一个请求中放置一个回调，但是如果我不希望用户被重定向到任何页面怎么办？

您使用一个真正的回调来拦截并使用 oauth_verifier。

> - 如果我在第二个代码段期间登录并被定向到 PIN 页面，但随后选择不输入 PIN/在我的应用程序中输入错误的 PIN，我仍然可以成功通过身份验证，并且可以在没有任何信息的情况下获得最终令牌问题。为什么？

这根本不可能是真的。这一定有充分的理由，也许您的应用程序已经有一个访问令牌并且只是使用它？

# javascript - 元素没有方法hasAttribute，为什么？

> ID：10819230
> 
> 赞同：3
> 
> 时间：2012-05-30T15:17:18.983
> 
> 标签：javascript

我正在尝试通过给定元素的 DOM 节点“向上”迭代，以获取第一个具有“动画”属性的父元素。

```
var el = evt.target;
    console.log(el);
while (!el.hasAttribute('animated'))
   { el = el.parentNode; }
return el;
    console.log(el); 
```

抛出错误：

`>>>Uncaught TypeError: Object #<HTMLDocument> has no method 'hasAttribute'`

这怎么可能？我已经清楚地声明了变量`el`并且第一个日志是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:18:07.197

`document`对象：

*   是一个节点
*   是`parentNode`根元素的 （如果您使用的是 HTML`<html>`元素）
*   不是一个元素。

只有元素才有属性，所以只有元素对象才有`hasAttribute`方法。

当您到达文档对象时（或者当您不再测试元素时），您需要停止测试。

```
while (
    el.nodeType === 1 && 
    (!el.hasAttribute('animated'))
) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:20:35.837

`var el = evt.target` 是一个`document`对象，因此没有`hasAttribute`属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:42:06.133

您还可以将其制成一个函数，该函数返回`null`具有该属性的任何一个或祖先节点：

```
function findNodeWithAttribute(el, attr) {
    while (true) {
        if (!el || !el.hasAttribute) {
            return null;
        } else if (el.hasAttribute(attr)) {
            return el;
        }
        el = el.parentNode;
    }
} 
```

# git - Git快进（严格按指针）实际上是快退？Git新手的术语消歧

> ID：10819234
> 
> 赞同：1
> 
> 时间：2012-05-30T15:17:44.230
> 
> 标签：git, terminology, reverse, fast-forward, disambiguation

就时间而言，Git 快进合并是 FORWARD。指针从旧提交到新提交。

示例（通过 ffwd 合并主指针从提交 D 移动到提交 G）：

在快进合并之前：

```
 master
                    |
        A<--B<--B<--D<--E<--F<--G
                                |
                           new_branch 
```

快进合并后：

```
 master
                                |
        A<--B<--B<--D<--E<--F<--G
                                |
                           new_branch 
```

但是，由于提交指针从较新指向较旧，因此严格按照这些指针，分支指针**向后**移动......提交指针上游。所以从这个意义上说，它可以被标记为快速反向合并。上游（ProGit 书中关于合并的章节中的术语）指的是逆流，上游，因此将上游流解释为快进可能会使新手感到困惑。所以是：

提交指针的上游。

在提交时间方面前进。

这种推理有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:33:40.520

仅当提交遵循箭头的路径时，这才是正确的。

我认为这让你感到困惑。记住，箭头指向你来自哪里，而不是你要去哪里。

主指针及时向前移动，沿着分支向前移动。请记住，HEAD 位于分支的顶端。任何时候你向 HEAD 移动（假设它没有被向后移动），你都会及时向前并提交。

现在，如果你想把它想象成一个链表，那么是的，通常 A 是头部，G 是尾部，除了......我们知道在 Git 中我们的 HEAD 指向 G。除此之外，我认为新手通常不会在这么低的层次上看待它并尝试将数据结构概念应用于它。

你想多了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:33:19.227

不，它不会移动`master`到“G”。它只是从“G”开始，从“D”开始。`master`只是一个名称/标签的东西（称为`ref`）。它在合并后更新，而不是分步“移动”。

要理解这一点，您可以尝试合并冲突。当合并等待手动解析时，分支仍然指向它们的旧提交。只是结帐树和索引处于不确定状态。

**更新：** 也许你可以这样想：

1.  找到合并基`git merge-base D G`，这是 G
2.  在 G 处创建一个假的临时分支（不是真正的分支，但让我们暂时假设一下）。
3.  ff 假分支到 D。
4.  将假分支重命名为`master`，覆盖旧分支。

# sql-server - 用于提取多列条件的 T-SQL 查询

> ID：10819241
> 
> 赞同：0
> 
> 时间：2012-05-30T15:18:00.810
> 
> 标签：sql-server

当且仅当它们对 sql server 中的所有以下列具有值“Y”时，我才需要选择所有行。

```
Bike_Racks_Lockers  SHELTERS    Telephone   Lighting    FENCES

        N              N            Y           Y          Y                    
        N              N            N           N          Y                
        N              N            N           N          N                
        Y              Y            Y           Y          Y                
        ?              ?            ?           ?          ?                 
        N              N            N           N          N 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:20:50.120

```
select * from yourtable where Bike_Racks_Lockers = 'Y' and  SHELTERS = 'Y' and 
Telephone = 'Y' and Lighting = 'Y' and FENCES = 'Y' 
```

**编辑：**

在这种情况下，请单独进行检查并插入到其他表中。例子：

```
insert into othertable selct * from yourtable where Bike_Racks_Lockers = 'Y' 

insert into someothertable selct * from yourtable where SHELTER = 'Y' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:21:31.813

用于子句`ColumnName='Y'`中的每一列：`WHERE`

```
SELECT Bike_Racks_Lockers, SHELTERS, Telephone, Lighting, FENCES
FROM [TableName]
WHERE Bike_Racks_Lockers='Y'
AND SHELTERS='Y'
AND Telephone='Y'
AND Lighting='Y'
AND FENCES='Y' 
```

但是，老实说，我不确定这个结果集的意义是什么？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T15:21:36.860

```
SELECT * 
FROM   mytable 
WHERE  Bike_Racks_Lockers = SHELTERS 
       AND Telephone  = Bike_Racks_Lockers
       AND Lighting = Bike_Racks_Lockers 
       AND FENCES = Bike_Racks_Lockers 
       AND Bike_Racks_Lockers = 'Y' 
```

# c# - MVC 中的共享点

> ID：10819243
> 
> 赞同：2
> 
> 时间：2012-05-30T15:18:04.607
> 
> 标签：c#, asp.net-mvc, sharepoint, spsite

我一直在尝试让我的 MVC C# 代码连接到我的共享点服务器。我已经尝试了一切，无论我尝试什么，我都会不断收到这个错误。

> 找不到位于 [http://myserver/] 的 Web 应用程序。验证您是否正确键入了 URL。如果 URL 应该服务于现有内容，系统管理员可能需要将新的请求 URL 映射添加到预期的应用程序。

这是我的代码：

```
string strUrl = "http://myserver/";
using (SPSite site = new SPSite(strUrl))
{
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T18:19:14.390

请注意，SPSite/SPWeb**仅**适用于安装了 SharePoint 并且是 Farm 一部分的服务器。它可能适用于非 Sharepoint 机器，但官方不支持此功能，某些操作可能会引发异常。

通常，与 SharePoint 的外部连接是通过[Web 服务](http://msdn.microsoft.com/en-us/library/ee705814.aspx)或（自 2010 年以来）通过[客户端对象模型](http://msdn.microsoft.com/en-us/library/ee537247.aspx)完成的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:19:59.707

使用[客户端对象模型](http://msdn.microsoft.com/en-us/library/ee857094.aspx)进行连接（假设您使用的是 SharePoint 2010）。如果要使用服务器对象模型（您在代码示例中使用），则 MVC 应用程序需要在运行 SharePoint 的同一台服务器上运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:17:18.553

确保使用 .Net 框架 3.5 将二进制文件定位为 64 位，否则会引发此错误。正如其他答案所述；要使用这样的对象模型，需要在场中的服务器上执行代码。

# asp.net - Kentico CMS：基于 HTML 块在 Kentico CMS 站点内自动生成页面

> ID：10819259
> 
> 赞同：1
> 
> 时间：2012-05-30T15:18:41.667
> 
> 标签：asp.net, content-management-system, treeview, automation, kentico

我正在 Kentico CMS 中创建一个知识库 esq 站点。

该站点将定期更新，其中包括内容编辑以及删除和添加的页面/部分。

HTML 标记是从 InDesign 文件（即导出为 ePub 的 InDesign Book 文件，然后解压缩 ePub 以获取 HTML 标记）生成的。

目前，我可以在 Kentico 中手动创建页面结构，并将必要的标记块粘贴到每个页面中。然而，最终我将处理一个相当复杂的站点结构，因此每次对原始 InDesign 文档进行更新时手动创建站点结构将非常耗时。事实上，我必须从 Kentico 站点中删除所有页面并从头开始重新创建它们，以确保没有留下不应该存在的页面。

有没有办法根据预定义的 HTML 标记块在 Kentico 中自动生成站点结构？例如，我可以在每个 h1 或 h2 标记的开头创建一个新页面。

除了这个自动页面生成之外，我还需要它在站点结构中正确嵌套页面，即如果页面是在 h2 标记处的中断处创建的，那么这个新页面应该是最近页面的子页面，以一个h1标签。

例如

```
page beginning with H1 tag
    page beginning with H2 tag
    page beginning with H2 tag
    page beginning with H2 tag
page beginning with H1 tag
    page beginning with H2 tag
    page beginning with H2 tag 
```

除此之外，任何 H3 标签都应该在 CMS 树视图中有一个条目，但实际上不应该有自己的页面。H3 标签将与其最近的父 H2 标签存在于同一页面上。

例如

```
page beginning with H1 tag
    page beginning with H2 tag
    page beginning with H2 tag
        page beginning with H3 tag (not a new page - just an entry in the tree view)
        page beginning with H3 tag (not a new page - just an entry in the tree view)
        page beginning with H3 tag (not a new page - just an entry in the tree view)
    page beginning with H2 tag
page beginning with H1 tag
    page beginning with H2 tag
    page beginning with H2 tag 
```

有人对从哪里开始有任何指示吗？Kentico 是基于 asp.net 的，因此可以使用 asp.net 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:24:06.137

我认为[HTML2Kentico 实用程序](http://devnet.kentico.com/Marketplace/Utilities/HTML2Kentico.aspx)可以解决您的问题。

# iphone - WebServices 在 iPhone 应用程序和 WebApplication 中的行为不同？

> ID：10819260
> 
> 赞同：0
> 
> 时间：2012-05-30T15:18:52.073
> 
> 标签：iphone, xml, web-services

我正在开发一个 iPhone 应用程序，我需要在其中使用 Web 服务获取数据。不幸的是，令人惊讶的是，我的 web 服务在 WebApplication 和 iPhone 中使用相同的 url 链接似乎表现不同。我正在使用下面提到的方法从 web 服务获取响应。urlLink 是我传递给下面提到的方法的链接。

```
NSURL *url = [NSURL URLWithString:urlLink];
NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:60];
NSData *returnData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:nil error:nil];
//responseData = [[NSURLConnection alloc] initWithRequest:request delegate:self];
NSLog(@"The data contains..%@",returnData);
responseString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding]; 
```

在 responseString 我应该得到所有的 xml 数据。我的 XML 中有一些节点没有被访问，而在 responseString 中我没有得到一些节点。但是当我使用相同的 url 并尝试在 Web 中检查相同的内容时，我得到了所有节点。我的 XML 看起来像

```
<Response>
    <Switchflag>Y</Switchflag>
    <Assignflag>Y</Assignflag>
    <Notesflag>N</Notesflag>
    <Examflag>Y</Examflag>
    <Bookmarkflag>N</Bookmarkflag>
    <Chatflag>N</Chatflag>
    <Discussflag>Y</Discussflag>
    <Lessoncompletestatus>N</Lessoncompletestatus>
    <Coursedesc>Customer Service Skills Introduction</Coursedesc>
    <Switchvariablefield1>0</Switchvariablefield1>
    <Cmailflag>N</Cmailflag>
    <IMailflag>N</IMailflag>
    <Imsflag>Y</Imsflag>
    <Alternatecourse/>
    <Collaborativetoolflag>0</Collaborativetoolflag>
    <Chatlink/>
    <Calendarlink/>
    <VideoDuration>6:51</VideoDuration>
    <Difficulty>Easy</Difficulty>
    <PassingScore>80</PassingScore>
    <MaxAttempts>100</MaxAttempts>
</Response> 
```

后来我更改了我的 xml，然后`<TotalQuestions>28</TotalQuestions> <VideoID>8</VideoID>` 在我的 xml 中添加了两个节点。现在在我的 responseString 中，我没有得到上面提到的两个节点。我无法找到任何替代方案。我试图清除我的浏览器缓存并清理我的构建，但我得到了相同的旧 xml，但缺少两个节点。此外，我试图更改字符串编码类型，但它没有用。对此有什么建议或替代方案会有很大帮助吗？

# c# - 如何用类型的属性填充文本框

> ID：10819262
> 
> 赞同：0
> 
> 时间：2012-05-30T15:18:59.630
> 
> 标签：c#, wpf

我已经创建了带有文本框的窗口，我正在使用 MVVM 模式，为了填充它，我有包含对象的视图模型类，现在我需要将它与 Text 属性绑定

```
public log Event
{
  get { return mEvent; }
  set { mEvent = value; }
} 
```

弹出一个窗口来显示数据现在我想在窗口中填充数据

```
<TextBlock x:Name="xCategyTextBox" Grid.Column="1"  Grid.Row="0" TextAlignment="Center" Margin="5" Text="{Binding Path=Event.Category}"/> 

<TextBlock x:Name="xLevTextBox" Grid.Column="1"  Grid.Row="1" TextAlignment="Center" Margin="5" Text="{Binding Path=Event.Type}"/> 
```

在 Xaml.cs 中

```
WindowsEventsAutoMountViewModel windows = new WindowsEventsAutoMountViewModel(logEntry);
this.DataContext = windows.Event; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:25:04.570

你设置

```
this.DataContext = windows.Event; 
```

并具有此绑定：

```
{Binding Path=Event.Category} 
```

似乎一个`Event`太多了；从两行之一中删除它。

# c# - 使用隔离存储和 ProtectedData 保存用户凭据

> ID：10819265
> 
> 赞同：3
> 
> 时间：2012-05-30T15:19:11.093
> 
> 标签：c#, serialization, stream, isolatedstorage

我想以安全的方式保存用户详细信息，因此我的意图是获取一个包含凭据的类，对其进行序列化，使用 protectedData 对其进行加密，然后将这些新的加密数据保存在隔离存储中。我有以下保存方法

```
 public bool SaveCredentials(ILoginCredentials credentials)
    {
        try
        {
            //CredentialStorage implements ILoginCredentials 
            CredentialStorage storage = new CredentialStorage(credentials);
            byte[] lastEncryptedData = ToByteArray(storage);
            lastEncryptedData = ProtectedData.Protect(lastEncryptedData, AditionalEntropy, DataProtectionScope.CurrentUser);

            IsolatedStorageFile isoStore = IsolatedStorageFile.GetStore(IsolatedStorageScope.User | IsolatedStorageScope.Assembly, null, null);
            IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("ExternalSSOProvider", FileMode.Create,
                                                                                 FileAccess.Write, isoStore);
            isoStream.Write(lastEncryptedData, 0, lastEncryptedData.Length);
            isoStream.Close();
            return true;
        }
        catch (Exception)
        {
            return false;
        }
    }

    private static byte[] ToByteArray(object source)
    {
        var formatter = new BinaryFormatter();
        using (var stream = new MemoryStream())
        {
            formatter.Serialize(stream, source);
            return stream.ToArray();
        }
    } 
```

这段代码似乎没有问题

然后我有恢复到对象的代码

```
 private CredentialStorage GetCredentials()
    {
        try
        {
            IsolatedStorageFile isoStore = IsolatedStorageFile.GetStore(IsolatedStorageScope.User | IsolatedStorageScope.Assembly, null, null);
            if (isoStore.FileExists("ExternalSSOProvider"))
            {
                using (IsolatedStorageFileStream stream = new IsolatedStorageFileStream("ExternalSSOProvider", FileMode.Open, isoStore))
                {
                    using (StreamReader reader = new StreamReader(stream))
                    {
                       using(MemoryStream ms = new MemoryStream())
                       {
                           reader.BaseStream.CopyTo(ms);
                           byte[] protectedMemory = ms.ToArray();
                           ms.Close();
                           ProtectedData.Unprotect(protectedMemory, AditionalEntropy, DataProtectionScope.CurrentUser);
                           return ToCredentials(protectedMemory);
                       }
                    }
                }
            }
        }
        catch (Exception)
        {
            return null;
        }
        return null;
    }

    private static CredentialStorage ToCredentials(byte[] source)
    {
        var formatter = new BinaryFormatter();
        using (var stream = new MemoryStream(source))
        {
            var x = formatter.Deserialize(stream); //My exception occurs here
            return x as CredentialStorage;
        }
    } 
```

当我尝试在 ToCredentials 方法中反序列化对象时，出现以下错误

二进制流“n”不包含有效的 BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。

任何帮助将不胜感激！

仅供参考，这是 ILoginCredentials 接口

```
 public interface ILoginCredentials
 {
     string Username { get; }
     string Password { get; }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:59:37.487

好的，我发现了问题。在 GetCredentials 方法中，我有这条线

```
 ProtectedData.Unprotect(protectedMemory, AditionalEntropy, DataProtectionScope.CurrentUser); 
```

我已将其更改为

```
 protectedMemory = ProtectedData.Unprotect(protectedMemory, AditionalEntropy, DataProtectionScope.CurrentUser); 
```

因为我从来没有用我试图从仍然加密的数据反序列化的返回值更新 protectedMemory 变量

# visual-c++ - VC++ 中的 Directshow GMFBridge

> ID：10819269
> 
> 赞同：1
> 
> 时间：2012-05-30T15:19:21.310
> 
> 标签：visual-c++, directshow, video-capture

我有一个 mp4 Capture 应用程序，它连续捕获图形 30 分钟（或一些动态值），我需要非常高的捕获精度，这样就不会丢失频率。数据的。

为此，我们决定制作 2 个捕获图，首先运行第一个图，然后在 30 分钟后制作第二个图，运行它然后停止第一个图，这样我们就不会丢失任何数据。

以简单的方式，我们无法创建第二个图，因为第一个图正在运行并且资源正在使用中（我猜这几乎是我们的逻辑不起作用的原因）

我正在寻找它并找到了 GMFBridge ，我想这在我们的案例中可能很有用，我正在考虑进行如下处理

**源图**

```
Video Source --> XCodec Filter --> Infinite tee --> GMF Bridge Sink Filter (multile as per tee)-->

Audio Source --> ACM Wrapper --> MonoGraph AAC Encodec --> Infinite Tee (multile as per tee)--> GMF Bridge Sink Filter --> 
```

**第一张图**

```
 --> GMF Source Filter -->  GDCL Mux --> Filter Writer 
```

**第二张图**

```
 --> GMF Source Filter -->  GDCL Mux --> Filter Writer 
```

现在使用 GMFBridge，我们将让源代码只使用一次，并使用 复制它`Infinite Pin Tee Filter`，并制作连接`Source Graph to First Graph`和`Source Graph to Second Graph`.

第一次运行组合`Source Graph to First Graph`并在 30 分钟后运行组合`Source Graph to First Graph`然后停止该图表。

我想知道我的理解是否正确？我可以使用 GMFbridge 实现这一点吗？除了在他们的示例应用程序中提供之外，我还需要简单的 GMFBridge 代码。

请帮助解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:55:48.707

您只需将一个 GMF Bridge Sink Filter 添加到源图中。如果需要多个流，可以将桥配置为具有多个流。但是仅仅因为您需要两次就将 Infinite tee 放入其中是没有意义的。

你要做的是：

*   启动源图。
*   开始第一张图
*   将源与第一张图连接起来
*   开始第二张图
*   （30 分钟后）将源图与第二个图连接起来
*   停止第一张图
*   ...

这样您就不会丢失任何样本，前 30 分钟所有样本都会转到第一个图表。从您切换的那一刻起，所有样本都会转到第二张图。

# wpf - 带有动画的 WPF ControlTemplate 触发器

> ID：10819271
> 
> 赞同：1
> 
> 时间：2012-05-30T15:19:31.983
> 
> 标签：wpf, animation, triggers, controltemplate

我有下面的代码给我一个错误：在'System.Windows.Controls.ControlTemplate'的名称范围内找不到'meBorder'名称。

```
 <Border Height="20" x:Name="meBorder" Margin="0,200,0,0" Grid.Row="0" Background="Red">
        <Button x:Name="btn1" Height="125" Width="30" Content="Dipsa" VerticalAlignment="Top">
            <Button.Style>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid>
                                    <Border>
                                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                          Margin="{TemplateBinding Padding}" VerticalAlignment="Top" RecognizesAccessKey="True"/>
                                    </Border>
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver"  Value="True">
                                        <Trigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetName="meBorder" Storyboard.TargetProperty="Height" To="125" Duration="0:0:.3" />
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </Trigger.EnterActions>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Button.Style>
        </Button>
   </Border> 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:46:22.470

它基本上是说它无法通过控制模板看到正在模板化的对象：试试这个

```
 <Border Height="20" x:Name="meBorder" Margin="0,200,0,0" Grid.Row="0" Background="Red">
        <Border.Style>
            <Style TargetType="{x:Type Border}">
                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <DoubleAnimation Storyboard.TargetProperty="Height" To="125" Duration="0:0:.3" />
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </Border.Style>
        <Button x:Name="btn1" Height="125" Width="30" Content="Dipsa" VerticalAlignment="Top">
            <Button.Style>
                <Style TargetType="{x:Type Button}">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="{x:Type Button}">
                                <Grid>
                                    <Border>
                                        <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" 
                                                      Margin="{TemplateBinding Padding}" VerticalAlignment="Top" RecognizesAccessKey="True"/>
                                    </Border>
                                </Grid>                                  
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Button.Style>
        </Button>
    </Border> 
```

# jquery - jQuery标签：自动高度

> ID：10819273
> 
> 赞同：2
> 
> 时间：2012-05-30T15:19:39.953
> 
> 标签：jquery, css, tabs

我正在使用 jQuery 选项卡作为界面。我希望我的主 div（选项卡覆盖）采用页面的尺寸。目前，它适用于覆盖，但选项卡的长度是自动的，并且与内容允许的一样小（没有异常或意外）。

所以简而言之，我的问题是：我如何使标签具有正确的尺寸？
我试过让它们变大，但它们似乎迫使叠加层变大，即使它们没有到达页面底部。

编辑：代码示例：

```
 <div id="a-tab-panel" class="ui-tabs-hide"> </div>
            <div id="tabs">
            <ul>
                    <li><a href="#tabs-1" class="tabStyle">Conférences</a></li>
                    <li><a href="#tabs-2" class="tabStyle">Annuaire</a></li>
                    <li><a href="#tabs-3" class="tabStyle">Statistiques</a></li>
            </ul>
                <div id="tabs-1">
                Content...
            </div>
            <div id="tabs-2" class="tabContentStyle">

                Content...

            </div>
            <div id="tabs-3" class="tabContentStyle">

                Content...

            </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:24:03.027

假设您的选项卡水平排列：

**更新示例：**

```
<div id="tabs">
   <ul>
       <li><a href="#fragment-1"><span>One</span></a></li>
       <li><a href="#fragment-2"><span>Two</span></a></li>
       <li><a href="#fragment-3"><span>Three</span></a></li>
   </ul>
   <div id="fragment-1">
       <p>First tab is active by default:</p>
       <pre><code>$('#example').tabs();</code></pre>
   </div>
   ...
</div> 
```

然后我们将所有标签的高度设置为最高标签的高度，在我的例子中是#fragment-1。

```
$("#tabs div.ui-tabs-panel").css('height', $("#fragment-1").height()); 
```

**方法#2：**

或者您可以使用`[EqualHeights](http://www.cssnewbie.com/equalheights-jquery-plugin/)`jQuery 插件根据内容自动设置选项卡的高度。

# r - 使用 R 中的 ascii 库删除 data.frame 的 ascii 输出中的多余字符

> ID：10819275
> 
> 赞同：0
> 
> 时间：2012-05-30T15:19:45.630
> 
> 标签：r, formatting

我喜欢使用我的结果的 ascii 输出。

我的表格标题中总是有一个额外的“h”，我手动删除。

我无法弄清楚如何在我的代码中修复它。查看代码和结果。例如，多少辆汽车有多少个汽缸。

```
data(mtcars)
library(ascii)
ascii(as.data.frame(table(mtcars$cyl)),include.rownames=F,format='nice')

|================ 
h| Var1 h| Freq 
| 4    | 11   
| 6    | 7    
| 8    | 14   
|================ 
```

我想从标题中删除多余的 h 字符。使输出看起来像这样：

```
|================ 
| Var1 | Freq 
| 4    | 11   
| 6    | 7    
| 8    | 14   
|================ 
```

它是 ascii 库还是我的代码中的错误？我想通过正确的 ascii 调用参数来完成它，而不是对输出进行后处理，但如果无法找到正确的解决方案，我会考虑任何“修复”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:58:01.497

这并不完全明显，但该`ascii.data.frame`函数接受一个`header`参数，当设置为 FALSE 时将消除不需要的“h”。还有一个`include.colnames`论点，如果有人想摆脱我所谓的“标题”。

```
> ascii(as.data.frame(table(mtcars$cyl)),include.rownames=F,header=FALSE,format='nice')
|============== 
| Var1 | Freq 
| 4    | 11   
| 6    | 7    
| 8    | 14   
|============== 
```

# android - 使用 DDMS + Android Mob 进行调试

> ID：10819276
> 
> 赞同：1
> 
> 时间：2012-05-30T15:19:49.737
> 
> 标签：android, debugging

我试图在我的手机上安装我的新应用程序后运行它，但我却读到了这个——

```
The Application MyApp has stopped unexpectedly.Plz try again. 
```

谷歌搜索了一段时间后，我知道我可以使用 DDMS 调试我的应用程序，所以我将运行 os 2.2.2 的 Android Mobile 与我的 windows lappy 中的 ddms 连接起来，但我能走多远。

现在我想知道如何检查我的应用程序代码中的哪个步骤导致了这个问题
，所以请提供有关如何做到这一点的分步指南。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:48:45.323

首先选择**Debug**透视图为：

![在此处输入图像描述](../Images/66475dbe20c11afdee58ccea9b9c516a.png)

然后在你想要的地方设置**断点：**

![在此处输入图像描述](../Images/bc6add546581ec13343137baff7b6146.png)

之后通过**Debug As->Debug Configurations...**创建一个 Debug 配置，然后 Debug as **Android Application**如下所示： ![在此处输入图像描述](../Images/73cb7769d7e09ce83714183c71f3b954.png)

**然后在 Debug 透视图中，您可以通过按F8**来跟踪/观察所需变量的值： ![在此处输入图像描述](../Images/97549558d18c4d98bbd468f9faaf6133.png) 就是这样，您还可以通过**Expressions**视图评估表达式。如果未启用，请从以下位置选择它： **Window->Show View->Other->Debug->Expressions**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:28:21.733

我不完全确定如何使用 DDMS 进行调试。但是，我发现的最简单的方法是将日志加载到您的代码中，然后您可以将其分解并准确指出您的项目正在中断的位置。您可以使用与以下类似的代码：

```
Log.d("ID","VALUE TO PASS"); 
```

如果您想传递不是字符串的内容，例如 int 或 ceratin 函数的结果，您可以使用：

```
Log.d("ID", String.valueOf(int)); 
```

然后，您可以在 LogCat 中查看所有这些日志，这些日志可以在“窗口 - 显示视图 - LogCat”中找到。希望这对您的调试问题有所帮助。

# android - Android - 如果路径包含空格，则无法在 Web 视图中从 SD 卡打开文本文件？

> ID：10819279
> 
> 赞同：0
> 
> 时间：2012-05-30T15:19:54.583
> 
> 标签：android, android-intent

我有一个基本的文件浏览器，可让您单击并打开各种文件，但我发现

a) 如果目录包含空格，但文件名不存在，则 Web 视图应用程序无法找到该文件，例如。/mnt/sdcard/elocker/A 子文件夹/TextDocument.txt

b）如果没有空格，一切都很好，网络视图打开并显示 .txt 文件内容:) 例如。/mnt/sdcard/elocker/ASubFolder/TextDocument.txt

要获取 mime 类型并开始针对给定文件扩展名的意图，我使用以下内容 -

```
 Uri myFileUri = Uri.fromFile(aFile);

    try
    {
        Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW);
        String extension = android.webkit.MimeTypeMap.getFileExtensionFromUrl(myFileUri.toString().toLowerCase());
        String mimetype = android.webkit.MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
        myIntent.setDataAndType(myFileUri,mimetype);
        startActivityForResult(myIntent, 0);
    } 
```

我敢肯定人们以前也遇到过这个问题，这可能只是一个根本问题，因为空间无法使用（在网络视图中），但这似乎有点过时，我对 Android 有更多期望，所以我猜这是我做错了;)

=====

# 编辑

Web 视图显示以下错误，如您所见，%20 是系统添加的 - “网页位于 content://com.android.htmlfileprovider/sdcard/elocker/A%20Sub%20Folder/TextDocument.txt？ text/plain 可能暂时关闭，或者它可能已永久移动到新网址。”

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T10:56:48.743

这似乎只发生在某些 Android 虚拟设备上，在真实设备上测试时没有此类问题（尚未），并且文件都按预期打开。

# javascript - 遍历特定元素的 JSON 数据 - 类似于 XPath

> ID：10819283
> 
> 赞同：0
> 
> 时间：2012-05-30T15:20:08.047
> 
> 标签：javascript, jquery, arrays, json, xpath

我正在研究一个嵌入式系统，我对整个过程的理论遵循以下方法： 1\. 向后端发送一条命令，要求提供 JSON 格式的帐户信息。2\. 后端写入一个包含所有账户和相关信息的 JSON 文件（可能有 0 到 16 个账户）。3\. 这是我卡住的地方 - 使用 JavaScript（我们正在使用 JQuery 库）遍历返回的特定元素的信息（类似于 XPath），并根据找到的填充下拉列表的元素数量构建一个数组框以选择您要查看的帐户，然后对帐户信息进行处理。所以我的代码如下所示：

```
loadAccounts = function() 
{
   $.getJSON('/info?q=voip.accounts[]', function(result) 
   {
            var sipAcnts = $("#sipacnts");
            $(sipAcnts).empty(); // empty the dropdown (if necessarry)
            // Get the 'label' element and stick it in an array
// build the array and append it to the sipAcnts dropdown
// use array index to ref the accounts info and do stuff with it
} 
```

所以我需要的是 JSON 版本的 XPath 来构建 voip.accounts.label 的数组。第一个帐户信息如下所示：

```
{
    "result_set": {
          "voip.accounts[0]": {
                     "label": "Dispatch1",
                     "enabled": true,
                     "user": "1234",
                     "name": "Jane Doe",
                     "type": "sip",
                     "sip": {
                            "lots and lots of stuff":
                            },
                     }
                  }
} 
```

我是不是把问题复杂化了？任何人都可以抛弃的任何智慧将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:38:40.053

有几种选择。一种是使用[这家伙](http://goessner.net/articles/JsonPath/)创建的[JsonPath](http://code.google.com/p/jsonpath/)。它打算成为 JSON 的 XPath。我不知道它的效果如何。它当然不是标准化的。虽然它不是很多代码，所以它应该很容易理解和适应。另一种是使用[JPath](http://bluelinecity.com/software/jpath/)。这两个都是从[json.org](http://json.org)链接的。我不怀疑还有更多这样的实现。

另一种选择是将 JSON 转换为 javascript 对象，并内省地搜索对象属性，直到找到所需的内容。您可以使用例如 Douglas Crockford 的[JSON parser](https://github.com/douglascrockford/JSON-js)。

# windows-phone-7 - 从流中获取文件名（文件下载）

> ID：10819284
> 
> 赞同：0
> 
> 时间：2012-05-30T15:20:13.100
> 
> 标签：windows-phone-7, stream, onedrive

我正在从 skydrive 文件夹下载图像。下载图像后，我需要将其保存在名为“图片”的文件夹中

但是我怎样才能得到下载文件的名称呢？我尝试了下一个代码，但**fs**返回**null**

```
private void download()
        {
            if (ControlBackup_ID != null)
            {               
                foreach (string it in contenidoSkyPic)
                {
                    //MessageBox.Show (it);
                    infoTextBlock3.Text = "Downloading backup pictures..wait...";

                    client.DownloadAsync(it + "/content");
                    client.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(client_DownloadCompleted);
                }               
            }
            else
                MessageBox.Show("Backup file of pictures doesn't exist!", "Error", MessageBoxButton.OK);
        }

void client_DownloadCompleted(object sender, LiveDownloadCompletedEventArgs e)
    {
        if (e.Error == null)
        {
             Stream stream = e.Result; //Need to write this into IS
             FileStream fs = stream as FileStream;

             if (fs != null)
             {
                 try
                 {
                     using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                     {
                         using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("pictures\\" + fs.Name, FileMode.Create))
                         {
                             stream.CopyTo(fileStream);
                             cantImatges_progreso_down += 1;
                         }
                     }
                 }
                 catch { }

                 if (cantImatges_progreso_down == contenidoSkyPic.Count())
                 {
                     infoTextBlock3.Text = "Restore pictures completed!";
                 }
             }

        }
        else
        {
            // process error  
            MessageBox.Show("Restore pictures failed.", "Failure", MessageBoxButton.OK);
        }

        client.DownloadCompleted -= client_DownloadCompleted;            

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T09:40:30.073

最后，我找到了这个解决方案。我已经看到我可以使用“ **userstate** ”来传递文件名

解决方案：

当我扫描 skydrive 文件夹时，现在我存储 ID 和文件名：

```
List<KeyValuePair<string, string>> contenidoSkyPic ;

 void getFilesImatges_GetCompleted(object sender, LiveOperationCompletedEventArgs e)
 {
     List<object> data = (List<object>)e.Result["data"];

            contenidoSkyPic = new List<KeyValuePair<string, string>>();
            contenidoSkyPic.Clear();

            foreach (IDictionary<string, object> content in data)
            {
                contenidoSkyPic.Add(new KeyValuePair<string, string>((string)content["id"], (string)content["name"]));   
            }

} 
```

然后，“下载”将是：

```
private void download()
        {
            if (ControlBackup_ID != null)
            {               
                foreach (string it in contenidoSkyPic)
                {
                    //MessageBox.Show (it);
                    infoTextBlock3.Text = "Downloading backup pictures..wait...";

LiveConnectClient client = new LiveConnectClient(session);
client.DownloadCompleted += new EventHandler<LiveDownloadCompletedEventArgs>(client_DownloadImatgesCompleted);
client.DownloadAsync(it.Key + "/content", it.Value );

                }               
            }
            else
                MessageBox.Show("Backup file of pictures doesn't exist!", "Error", MessageBoxButton.OK);
        } 
```

当下载完成时调用 client_DownloadCompleted 并且我可以获得每个文件的名称：

```
void client_DownloadCompleted(object sender, LiveDownloadCompletedEventArgs e)
    {
        if (e.Error == null)
        {
             Stream stream = e.Result; //Need to write this into IS
            string _namePicture = e.UserState.ToString();

                 try
                 {
                     using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                     {
                         using (IsolatedStorageFileStream fileStream = myIsolatedStorage.OpenFile("pictures\\" + _namePicture , FileMode.Create))
                         {
                             stream.CopyTo(fileStream);
                             cantImatges_progreso_down += 1;
                         }
                     }
                 }
                 catch { }

                 if (cantImatges_progreso_down == contenidoSkyPic.Count())
                 {
                     infoTextBlock3.Text = "Restore pictures completed!";
                 }
             }

        client.DownloadCompleted -= client_DownloadCompleted;            

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:41:01.897

实现这一点的最佳方法是使用后台进程

可以在此处找到示例实现：

[http://msdn.microsoft.com/en-us/library/hh202959(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202959(v=vs.92).aspx)

但更适合您需求的解决方案是这个 Skydrive 浏览器示例：

[http://code.msdn.microsoft.com/MetroSky-A-Complete-4250b80f](http://code.msdn.microsoft.com/MetroSky-A-Complete-4250b80f) 或 [https://stackoverflow.com/questions/7346450/download-file-from-skydrive](https://stackoverflow.com/questions/7346450/download-file-from-skydrive)

# android - appcelerator 钛中的 Android apk 大小

> ID：10819288
> 
> 赞同：0
> 
> 时间：2012-05-30T15:20:24.667
> 
> 标签：android, titanium-mobile, appcelerator-mobile

开发一个简单的应用程序。在窗口内使用 webview，加载 url。这个简单的应用程序构建后的 apk 大小为 4.7MB。当安装在安卓设备上时，这个应用程序需要大约 11MB 的空间。我可以通过提供

```
<manifest android:installLocation="auto">
    <uses-sdk android:minSdkVersion="7"/>
</manifest> 
```

但这也让我在 HTC-Wildfire S 中留有 1.10 MB 的大小，在 HTC-Desire HD 中留有 1.25MB 的大小。对于这样一个简单的应用程序，考虑到我的作品大约 200KB，我不希望应用程序超过 500KB。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T03:05:50.057

当您将应用程序构建为 apk 时，它包含 Titanium 解释您的 javascript 代码的框架。会有一些与此相关的开销。

对于您的用例，听起来使用[PhoneGap](http://phonegap.com/)会好得多。对于您的目的，它应该更轻量级。

# javascript - 有没有办法让 Fiddler JS 格式化程序扩展有条件地工作？

> ID：10819292
> 
> 赞同：1
> 
> 时间：2012-05-30T15:20:35.863
> 
> 标签：javascript, fiddler

作为一名 JS 开发者，我经常使用 Fiddler 工具。我还使用它的[插件](http://fiddler2.com/fiddler2/extensions.asp)JavaScript Formatter 来很好地格式化缩小文件以进行调试。

但是，问题在于 JS 格式化程序似乎根本不可配置，并且在“全有或全无”基础上工作。

**问题：**

在我的公司，我们有时将很多（不是 JS，而是可编译为 JS）文件捆绑在一起，将其作为 JS 提供，然后依靠该文件格式来解析它们并正确加载。这可能听起来很奇怪，但它是为了避免拥有数十个微文件，并与所有这些文件捆绑在一起。

所以基本上，文件看起来像：

```
//MAGICCOMMENT
//FILEID
markup
markup
...
markup
//FILEID
markup
markup
...
markup 
```

等等。

**问题：**

有没有办法告诉 Fiddler**不要美化**这些文件？我们`//MAGICCOMMENT`在第一行有一个，对于所有的多部分文件都是一样的，它也许可以用来检测它，但我不知道是否以及如何使用它。

PS：我想我们不能改变所服务文件的 MIME 类型。

**编辑：**

我知道菜单中的“Make JavaScript Pretty”选项`Rules`，它是在安装 JS Formatter 插件后添加的。我想让这个选项有条件地工作（但是：*在向浏览器发送数据时*，所以我可以在浏览器中的美化 JS 源上放置断点，用于我想要美化的所有文件，即其他文件比多部分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:30:20.573

现在，您只需禁用 Fiddler Rules 菜单上的“Make JavaScript Pretty”项即可。当您想要美化单个 JavaScript 文件时，您可以通过右键单击 Web 会话列表中的会话并直接在会话上选择 Make JavaScript Pretty 来实现。

或者，您可以禁用全局选项并让 FiddlerScript 有条件地格式化 JS 文件。例如，在规则里面 > 自定义规则 > OnPeekAtResponseHeaders()

```
if (oSession.oResponse["Content-Type"].ToLower().Contains("script")) {
  if (!oSession.uriContains("Combinedfilenameorwhatnot")) { 
     // Note this flag name is soon changing to X-Format-JS
     oSession["X-FIDDLER-JS-FORMAT"] = "yes"; 
  }
} 
```

# javascript - JavaScript ajax 帖子在 IE 上不起作用？

> ID：10819299
> 
> 赞同：0
> 
> 时间：2012-05-30T15:20:53.807
> 
> 标签：javascript, jquery, internet-explorer

你好朋友：D

`<div>`使用 jQuery/JavaScript ajax POST 在 Internet Explorer 6,7 和 8 中隐藏 a 时遇到问题。以下代码在其他浏览器（例如 FF、Chrome、Safar 和 Opera）上运行良好，但在 IE 中无法运行。

**以下是我在登录页面上的脚本：**

```
 $(document).ready(function(){
    $("#even tr:even").addClass("even");
     $('#login_loader').hide();

        $("#login_form_submit").click(function() {

            $('#login_form_submit').attr('disabled', true);
            $('#login_loader').fadeIn(200);
            $('#login_group').slideUp(500);
            $('#logout_hint').slideUp(500);
            $('#login_contact_form').slideUp(500);

            $.post("action/login.php?act=login", {
                username: $('#login_username').val(),
                password: $('#login_password').val(),
                captcha: $('#login_captcha').val(),

            }, function(response){

                setTimeout("finishAjax('login_group', '"+escape(response)+"')", 1000);

            });

            return false;

        });

    }); 
```

任何人都可以看到问题是什么？谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:48:14.787

删除此行中的逗号：

```
captcha: $('#login_captcha').val(), 
```

# sql - SQL查询优化

> ID：10819301
> 
> 赞同：1
> 
> 时间：2012-05-30T15:21:02.960
> 
> 标签：sql, sql-server

我有一个执行时间过长的查询。我需要知道是否有任何最佳的执行方式来减少执行时间。

我的查询是

```
SELECT     TOP (2) ID,
                   (
                    SELECT     SUM(CurrentStock) AS SimilarItemQuantity
                    FROM          Inventory AS T1
                    WHERE      (Inventory.ProductName = ProductName)
                   ) 
                   AS Expr1
FROM         Inventory 
```

考虑到 20 条记录，它需要 15 秒。有没有更快的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:42:50.693

相关子查询是一种 SQl 反模式，它们几乎总是可以被连接替换并加快进程。您应该在选择 top X 时添加 order by 子句，否则结果将不一致。

```
SELECT TOP 2 I1.ID, SUM(I2.CurrentStock) AS SimilarItemQuantity  
FROM   Inventory I1
join   Inventory I2 on I1.ProductName = I2.ProductName
GROUP BY I1.ID
ORDER BY I1.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:44:24.633

`Inventory.ProductName`在（**键列**）上添加索引并包含`CurrentStock`和`ID`（**包含列**）列。

```
CREATE NONCLUSTERED INDEX [Inventory_IDX_ProductName] ON [dbo].[Inventory]
(
  [ProductName] ASC
)
INCLUDE ( [CurrentStock],[ID]) 
WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T19:02:26.317

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:47:57.197

您可以考虑通过以下方式将其重写为一个组：

```
select top 2 id, sum(CurrentStock)
from Inventory i
group by id, ProductName
order by 2 desc 
```

这是假设您想要当前库存最大的两个 id。

通常，您将 TOP 与 order by 一起使用。

而且，正如其他人所提到的，在 (id, ProductName) 上有一个索引会有所帮助：

```
create index idx_inventory_id_ProductName on inventory(id, ProductName) 
```

# c# - 如何将表达式从类型接口转换为特定类型

> ID：10819306
> 
> 赞同：1
> 
> 时间：2012-05-30T15:21:23.327
> 
> 标签：c#, interface, lambda, type-conversion, expression

在我的界面中，我定义了以下内容

```
List<IFoo> GetListOfFoo<T>(Expression<Func<T, bool>> predicate) where T : IFoo; 
```

在我的实现中，我会将表达式转换为特定类型：

```
if (typeof(T) == typeof(Foo))
{
    Expression converted = Expression.Convert(predicate.Body, typeof(Foo));
    Expression<Func<Foo, bool>> newPredicate = 
        Expression.Lambda<Func<Foo, bool>>(converted, predicate.Parameters);
} 
```

我尝试像这样使用我的实现：

```
Expression<Func<Foo, bool>> predicate = c => c.Name == "Myname";
_repository.GetListOfFoo<Foo>(predicate); 
```

我没有得到任何编译错误，但是如果我使用它，我会得到一个异常，在 ExpressionBody 中是定义的 bool 参数。

我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:26:31.793

你的代码没有任何意义。

您正在创建一个`Expression.Convert`返回 a`Foo`的函数，然后尝试将其用作返回 a 的函数`bool`。

`Expression.Convert`也没有意义；你不能将 a 转换`bool`为 a `Foo`。

你可能正在尝试写

```
var converted = (Expression<Func<Foo, bool>>) predicate; 
```

只要`T`是`Foo`，这将正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:42:17.950

参数的类型需要改变，而不是表达式的主体。

从您的实现调用后，您必须进行转换。

也没有道理为什么你需要这个作为`Foo : IFoo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T06:18:04.400

我找到了更好的解决方案。我不需要自己投射谓词。

```
public List<IFoo> GetFoos<T>(Expression<Func<T, bool>> predicate) where T : class, IModel 
{
    var result = new List<IFoo>();
    var repository = new Repository<T>();
    result.AddRange(repository.GetEntities(predicate).ToList().ConvertAll(c => (IFoo)c));
    return result;
} 
```

# jakarta-ee - Java-EE 1.6 如何读取同一子网内的 MAC 地址

> ID：10819308
> 
> 赞同：2
> 
> 时间：2012-05-30T15:21:23.947
> 
> 标签：jakarta-ee, mac-address

我正在尝试读取子网内客户端的 Mac 地址（但不在运行我的 testServer 应用程序的同一台机器上）

```
@ManagedBean
public class ManagedBeanController implements Serializable {

private static final long serialVersionUID = -3244711761400747261L;

private String hostMac;
private InetAddress hostIp;
private String tmpIp;

// snippet taken from a BalusC post , works great. just pointing out that 
// in case of a request from a client running on the same machine of the server, 
// it return 127.0.0.1 (lookpback) instead of the actual localhost IP
public ManagedBeanController() {    
    HttpServletRequest request = (HttpServletRequest) FacesContext.getCurrentInstance().getExternalContext().getRequest();
    tmpIp = request.getRemoteAddr();                            
}

public void ReadHostMac() 
{
    try {

        // InetAddress address = InetAddress.getLocalHost(); **COMMENTED**
        InetAddress address = InetAddress.getByName(tmpIp); 
        System.out.println("Current IP address : " + address.getHostAddress() );
        System.out.println("Host NAME : " + address.getHostName() );

        NetworkInterface network = NetworkInterface.getByInetAddress(address);

        if ( network!=null ) 
        {
            byte[] mac = network.getHardwareAddress();

            if ( mac != null ) 
            {
                StringBuilder sb = new StringBuilder();
                for (int i = 0; i < mac.length; i++) {
                    sb.append(String.format("%02X%s", mac[i], (i < mac.length - 1) ? "-" : ""));        
                }

                System.out.println("Current MAC address : " + sb.toString());
                setHostMac(sb.toString());

            } 
            else
            {               
                System.out.println("MAC address NULL");
                setHostMac("MAC address NULL");
            }

        }

    } catch (UnknownHostException e) {

        e.printStackTrace();

    } catch (SocketException e){

        e.printStackTrace();

    }
}

// getters and setters

} 
```

这个 Bean 返回的是什么：
如果在代码中使用 address = InetAddress.getLocalHost();
它只返回 localhost Mac 地址，无论哪个客户端正在连接。
InetAddress 地址 = InetAddress.getByName(tmpIp);
在这种情况下，网络属性在本地调用的情况下正确返回，但不是 MAC 属性，更糟糕的是“远程”（仍然在子网内）调用，在这种情况下，即使 NETWORK 属性也返回为 NULL。
任何提示表示赞赏，谢谢

# excel - 将数据复制到另一个工作簿中用户选择的单元格？

> ID：10819317
> 
> 赞同：0
> 
> 时间：2012-05-30T15:21:56.007
> 
> 标签：excel, vba

我对 VBA 相当陌生，我想出了如何将单元格值从一个工作簿复制到另一个工作簿，假设目标单元格的位置是已知的。

我需要的是用户在工作表中选择一个单元格，当单击附加到宏的命令按钮时，来自固定位置的数据被复制到该单元格。

我真的很感激任何建议......

我需要打开一个新工作簿并复制单元格/命名范围，然后返回到原始工作簿并粘贴到用户选择的位置。在范围的情况下，将所选单元格作为起始单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T05:30:57.710

我使用以下方法来解决我的问题..

我将行和列索引传递给处理复制的函数以获取单元格索引

```
Activecell.row
Activecell.column 
```

然后粘贴到该位置如下...

```
ThisWorkbook.Worksheets(<worksheetname>).Cells(row,column).pastespecial 
```

# javascript - javascript从字符串中删除一个字符串

> ID：10819327
> 
> 赞同：-2
> 
> 时间：2012-05-30T15:22:43.007
> 
> 标签：javascript

到目前为止我有以下代码

```
var dbasedata = document.forms[0]._dbase_name.value;
        dbasedata = dbasedata.toUpperCase();
        dbasedata = dbasedata.replace(/\s/g, ""); 
```

接下来我要做的是从已经修剪的字符串中进一步删除文本“UK_CONTACTS”。笔记; 有时字符串中可能不存在“UK_CONTACTS”（请注意这是否重要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:25:13.103

```
dbasedata = dbasedata.replace(/UK_CONTACTS/g, ""); 
```

就像你对空格所做的那样。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T15:26:15.133

```
dbasedata = dbasedata.replace(/UK_CONTACTS/g, ""); 
```

# oracle - Oracle：处理不同的日期格式

> ID：10819329
> 
> 赞同：1
> 
> 时间：2012-05-30T15:22:45.960
> 
> 标签：oracle, date

假设我们有一个名为`MyDate` Assume 的 VARCHAR2 列，它包含以下值：

13/02/2001

13-gen-2001

我必须将此字段转换为 DATE 值。但是 TO_DATE 在某些值或其他值上失败。

```
TO_DATE(MyDate, 'DD/MM/YYYY') 
```

我怎样才能转换它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:30:23.617

```
SELECT  CASE
        WHEN REGEXP_LIKE(mydate, '\d{2}/\d{2}/\d{4}') THEN
                TO_DATE(mydate, 'DD/MM/YYYY')
        WHEN REGEXP_LIKE(mydate, '\d{2}-[a-z]{3}-\d{4}') THEN
                TO_DATE(mydate, 'DD-MON-YYYY')
        END
FROM    mytable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:36:14.317

你可以这样写

```
CASE WHEN instr(labour_contract_expiry, '-') > 0 THEN
      to_date(LABOUR_CONTRACT_EXPIRY,'DD-MON-RRRR')
ELSE
      to_date(LABOUR_CONTRACT_EXPIRY,'DD/MM/RRRR')
END, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:31:09.697

至少你可以做类似的事情

```
CASE WHEN REGEXP_LIKE(YOUR_COLUMN,'\d{2}/\d{2}/\d{4}' THEN TO_DATE(MyDate, 'DD/MM/YYYY')
     WHEN REGEXP_LIKE(YOUR_COLUMN,'\d{2}-\D{,3}-\d{4}' THEN TO_DATE(MyDate, 'DD-MON-YYYY')        
     WHEN ... 
```

等等

# python - Numpy genfromtxt 列名

> ID：10819330
> 
> 赞同：13
> 
> 时间：2012-05-30T15:22:47.287
> 
> 标签：python, numpy

我如何才能将其自动检索的列名`genfromtxt`返回给我？当我做：`list``names=True`

```
data = np.genfromtxt("test.csv",names=True,delimiter=",",dtype=None)
print data['col1'] 
```

它打印整个列的值`col1`。

**但是，我需要遍历所有列名。我怎样才能做到这一点？**

我尝试`data.keys()`了各种其他方法，但是返回的任何东西`genfromtxt`似乎都不是字典兼容的对象。我想我可以`list`自己传递列名，但从长远来看，这对我来说是不可维护的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-30T15:39:50.460

`genfromtxt`返回一个[numpy.ndarray](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html)。

您可以通过以下方式获取数据类型

```
data.dtype 
```

或者只是名字

```
data.dtype.names 
```

这是一个您可以迭代并根据需要访问列的元组。

# php - 并行运行 Cron 作业 (PHP)

> ID：10819339
> 
> 赞同：0
> 
> 时间：2012-05-30T15:23:18.130
> 
> 标签：php, parallel-processing, cron, fork

过去，我运行了一堆脚本，每个脚本都作为一个单独的 cron 作业。现在我想用一个 cron 作业运行一个控制器脚本，然后分别调用脚本（并且并行地，同时），所以我不必每次添加时都创建一个新的 cron 作业另一个脚本。

我查了一下，`pcntl_fork()`但我们没有安装。这个也可以`fsockopen()`吗？

几个问题：

1.  我看到了这个例子[http://phplens.com/phpeverywhere/?q=node/view/254](http://phplens.com/phpeverywhere/?q=node/view/254)，它使用`fsockopen()`. 这将允许我并行运行 PHP 脚本吗？请注意，脚本不交互，但我仍然想知道它们中的任何一个是否因错误而过早退出。

2.  其次，我正在运行的脚本不能从外部访问，它们只能在内部访问。该脚本以前是这样运行的：**php -f /path/to/my/script1.php**。这不是网络可访问的路径。#1 中的示例是否适用于此，还是仅适用于 Web 可访问的路径？

感谢您提供的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-12T04:43:49.293

如果我错了，请纠正我，但如果我理解正确，Tiberiu-Ionut Stan 提出的解决方案意味着使用 proc_open 启动进程并等待它们完成不会作为 cron 脚本运行，而是作为运行程序/服务，对吗？

据我了解 cron 作业，控制器脚本 user920050 正在考虑使用将由 cron 按计划启动，每个新实例将重新启动进程，等待它们完成并可能与并行运行控制器脚本的其他 cron 启动实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:32:58.430

您可以使用 proc_open 运行多个进程，而无需等待每个进程完成。您将拥有一个进程句柄，您可以随时终止每个进程，并且可以读取每个进程的标准输出。

您还可以通过管道进行通信，这是可选的。

传递第一个参数`php /your/path/to/script.php param1 "param2 x"`意味着启动一个单独的 PHP 进程。

[proc_open（参见示例 #1）](http://php.net/manual/en/function.proc-open.php)

最终，您将希望使用无限的 while 循环 + usleep（或睡眠）来避免 CPU 用尽。当所有进程完成时中断，或者在你杀死它们之后中断。

编辑：您可以知道进程是否过早退出。

Edit2：执行上述操作的更简单方法是[弹出](http://www.php.net/manual/en/function.popen.php)

# ms-access - 如何设置文本框以启用事件

> ID：10819340
> 
> 赞同：1
> 
> 时间：2012-05-30T15:23:27.500
> 
> 标签：ms-access, vba

我在访问表单上有一个文本框，如果文本框为空白，我想启用该文本​​框进行编辑。我是 VBA 新手，不确定最好的方法。使用双击事件对我来说很好，但我更愿意在加载时进行。

我已经尝试了以下代码，但似乎无法使其正常工作。任何帮助，将不胜感激。

```
Private Sub EmpID_DblClick(Cancel As Integer)
If EmpID.Text = "" Then
    Me.EmpID.Enabled = True
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:30:37.853

对于应该在每条记录的基础上发生的事情，您最好使用当前事件。不要将 .Text 属性用于控件。如果必须使用属性，请使用 .Value。.Text 属性仅在控件具有焦点时可用，并且通常仅用于特殊情况，例如 Change 事件。

```
Private Sub Form_Current()
  If IsNull(EmpID) Then
    Me.EmpID.Enabled = True
  End If
End Sub 
```

在正常设置中，控件不可能等于零长度字符串 ("")

您可以通过以下方式涵盖所有基础：

```
Trim(EmpID & "") = "" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:35:47.163

您遇到了 Null 问题

`Null`不一样`""`

试试这个

```
If EmpID.Text Is Null Then
    Me.EmpID.Enabled = True
End If 
```

# c# - 将dataTable导出到dataGridView，不起作用

> ID：10819342
> 
> 赞同：1
> 
> 时间：2012-05-30T15:23:39.017
> 
> 标签：c#, linq, datagridview, datatable, full-outer-join

我一直在做一个项目，该项目需要两个 csv 文件作为输入，并在 dataTable 中导入。现在我想加入这两个，最后将加入的一个显示给 dataGridView。

该程序运行良好，直到导入部分。

到目前为止，我创建的代码没有显示任何错误，但它不起作用，我的意思是，我的目标数据网格视图仍然是空白的。

请遵守以下代码并提供一些可行的解决方案。此致。

PS：我正在尝试在这里进行完全外部连接。

```
var tbl1 = tb1;
var tbl2 = tb2;
var res1 = from t2 in tbl2.AsEnumerable()
           join t1 in tbl1.AsEnumerable() on t2["BBL"] equals t1["BBL"] into g
           from t1 in g.DefaultIfEmpty()
           where t1 == null
           select t2;

dataGridView3.DataSource = res1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:41:29.447

您必须创建列或复制 res1 的架构。

例子：

```
res1.columns.Add("RowError",typeof(string)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:59:02.310

这里的问题是，它的非索引[属性](http://msdn.microsoft.com/en-us/library/system.data.datarow.aspx)`res1`的集合被呈现为列。`DataRow`

# 解决方案 1

您可以选择以行内容作为其属性的[匿名](http://msdn.microsoft.com/en-us/library/bb397696.aspx)对象类型。

例如，

```
var tbl1 = tb1;
var tbl2 = tb2;
var res1 = from t2 in tbl2.AsEnumerable()
           join t1 in tbl1.AsEnumerable() on t2["BBL"] equals t1["BBL"] into g
           from t1 in g.DefaultIfEmpty()
           where t1 == null
           select new { Amount = t2["amount"], Payee = t2["payee"] }; 
```

其中`amount`和`payee`是 中的两列`tb2`。

如果设置`AutoGenerateColumns`为`dataGridView3`，`true`则此匿名类的属性名称（即`Amount`和`Payee`）将用作列名。

# 解决方案 2

正如您在评论中所说，您想显示所有列，所以这是另一个不太优雅的解决方案（请保持您的 Linq 表达式不变）：

```
foreach (DataColumn dCol in tbl1.Columns)
{
    dataGridView1.Columns.Add(dCol.ColumnName, dCol.Caption);
}

foreach (var s in res1)
{
    foreach (var item in res1)
    {
        dataGridView1.Rows.Add(item.ItemArray);
    }
} 
```

`dataGridView3.DataSource = res1;`如果你继续使用这种方法，你应该删除。

# scala - 如何在 spray-json 中表示可选字段？

> ID：10819344
> 
> 赞同：17
> 
> 时间：2012-05-30T15:23:54.630
> 
> 标签：scala, spray-json

我的请求中有一个可选字段：

```
case class SearchRequest(url: String, nextAt: Option[Date]) 
```

我的协议是：

```
object SearchRequestJsonProtocol extends DefaultJsonProtocol {
    implicit val searchRequestFormat = jsonFormat(SearchRequest, "url", "nextAt")
} 
```

如何将 nextAt 字段标记为可选，以便正确读取和接受以下 JSON 对象：

```
{"url":"..."}
{"url":"...", "nextAt":null}
{"url":"...", "nextAt":"2012-05-30T15:23Z"} 
```

我实际上并不真正关心 null 案例，但是如果您有详细信息，那就太好了。我正在使用 spray-json，并且认为如果原始 JSON 对象上不存在该字段，则使用 Option 会跳过该字段。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-30T18:06:36.367

为我工作（spray-json 1.1.1 scala 2.9.1 build）

```
import cc.spray.json._
import cc.spray.json.DefaultJsonProtocol._

// string instead of date for simplicity
case class SearchRequest(url: String, nextAt: Option[String])

// btw, you could use jsonFormat2 method here
implicit val searchRequestFormat = jsonFormat(SearchRequest, "url", "nextAt")

assert {
  List(
    """{"url":"..."}""",
    """{"url":"...", "nextAt":null}""",
    """{"url":"...", "nextAt":"2012-05-30T15:23Z"}""")
  .map(_.asJson.convertTo[SearchRequest]) == List(
    SearchRequest("...", None),
    SearchRequest("...", None),
    SearchRequest("...", Some("2012-05-30T15:23Z")))
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-30T16:22:52.780

您可能必须创建一个明确的格式（警告：psuedocodish）：

```
object SearchRequestJsonProtocol extends DefaultJsonProtocol {
    implicit object SearchRequestJsonFormat extends JsonFormat[SearchRequest] {
        def read(value: JsValue) = value match {
            case JsObject(List(
                    JsField("url", JsString(url)),
                    JsField("nextAt", JsString(nextAt)))) =>
                SearchRequest(url, Some(new Instant(nextAt)))

            case JsObject(List(JsField("url", JsString(url)))) =>
                SearchRequest(url, None)

            case _ =>
                throw new DeserializationException("SearchRequest expected")
        }

        def write(obj: SearchRequest) = obj.nextAt match {
            case Some(nextAt) => 
                JsObject(JsField("url", JsString(obj.url)),
                         JsField("nextAt", JsString(nextAt.toString)))
            case None => JsObject(JsField("url", JsString(obj.url)))
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-22T15:44:32.540

使用`NullOptions`trait 禁用跳过`null`s： [https](https://github.com/spray/spray-json#nulloptions) ://github.com/spray/spray-json#nulloptions 示例： [https ://github.com/spray/spray-json/blob/master/src/test/scala/spray/ json/ProductFormatsSpec.scala](https://github.com/spray/spray-json/blob/master/src/test/scala/spray/json/ProductFormatsSpec.scala)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T11:30:50.190

不知道这是否对您有帮助，但您可以在案例类定义中为该字段指定默认值，因此如果该字段不在 json 中，它将为其分配默认值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-08T08:07:45.827

简单的。

```
import cc.spray.json._
trait MyJsonProtocol extends DefaultJsonProtocol {
  implicit val searchFormat = new JsonWriter[SearchRequest] {
    def write(r: SearchRequest): JsValue = {
      JsObject(
        "url" -> JsString(r.url),
        "next_at" -> r.nextAt.toJson,
      )
    }
  }
}

class JsonTest extends FunSuite with MyJsonProtocol {
test("JSON") {
    val search = new SearchRequest("www.site.ru", None)
    val marshalled = search.toJson
    println(marshalled)
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-22T22:39:56.547

对于碰巧看到这篇文章并希望更新 François Beausoleil 对新版本 Spray（大约 2015 年+？）的答案的任何人，JsField 已被弃用为 JsValue 的公共成员；你应该简单地提供一个元组列表而不是 JsFields。不过，他们的答案是准确的。

# javascript - 解析嵌套 JSON 并插入带有值的列表项

> ID：10819352
> 
> 赞同：0
> 
> 时间：2012-05-30T15:24:04.690
> 
> 标签：javascript, jquery, ajax, json

```
<ul>
<li><a href="" class="edit">a list item</a></li>  
<li><a href="" class="edit">a list item</a></li>    
<li><a href="" class="edit">a list item</a></li>  
<li><a href="" class="edit">a list item</a></li>  
<li><a href="" class="edit">a list item</a></li>  
<li><a href="" class="edit">a list item</a></li>
</ul> 
```

JSON：

```
{
    "status": "ok",
    "collection": [
        {
            "snapshot_id": 5110,
            "keyframe_id": 601
        },
        {
            "snapshot_id": 5100,
            "keyframe_id": 610
        },
        {
            "snapshot_id": 5130,
            "keyframe_id": 614
        },
        {
            "snapshot_id": 5142,
            "keyframe_id": 616
        },
        {
            "snapshot_id": 5156,
            "keyframe_id": 617
        },
        {
            "snapshot_id": 5178,
            "keyframe_id": 619
        }
    ]
} 
```

鉴于此处的列表项和 JSON 响应，如何访问嵌套元素的每个 keyframe_id 并插入 href 中：

```
<ul>
<li><a href="601" class="edit">a list item</a></li>    
<li><a href="610" class="edit">a list item</a></li>  
<li><a href="614" class="edit">a list item</a></li>  
<li><a href="616" class="edit">a list item</a></li>  
<li><a href="617" class="edit">a list item</a></li>
<li><a href="619" class="edit">a list item</a></li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:26:53.020

非常简单的方法：

```
var collection = json.collection;
for (var i = 0; i < collection.length; i++) {
    $("ul > li:eq(" + i + ") > a").attr("href", collection[i].keyframe_id);
} 
```

或相反亦然：

```
$("ul > li").each(function(i) {
    $(this).children("a").attr("href", json.collection[i].keyframe_id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:40:47.027

这可能是最简单的方法：

```
$('ul a').attr('href', function(i) {
   return json.collection[i].keyframe_id;
}); 
```

[在http://jsfiddle.net/alnitak/46QDg/](http://jsfiddle.net/alnitak/46QDg/)工作演示

如果需要，请使用更具体的选择器！

# common-lisp - 为什么联合不返回唯一列表？

> ID：10819355
> 
> 赞同：2
> 
> 时间：2012-05-30T15:24:15.970
> 
> 标签：common-lisp

Hyperspec 中的以下声明是这样的，这是否有逻辑上的原因？“如果 list-1 和 list-2 之间存在重复，则结果中只会出现一个重复的实例。如果 list-1 或 list-2 中有重复条目，则冗余条目可能会出现，也可能不会出现结果。”

在我读到这篇文章之前，我一直假设 union 应该返回一个唯一的列表，并且对我的代码没有这样做的原因感到沮丧。删除列表之间但不在列表中的重复项似乎也很奇怪。为什么还要指定这个？

似乎人们应该能够假设 union 将产生集合元素的唯一列表，或者我错过了什么？

有关 Hyperspec 的完整页面，请参见[http://clhs.lisp.se/Body/f_unionc.htm](http://clhs.lisp.se/Body/f_unionc.htm)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T19:25:10.670

如果您的代码仅包含具有唯一元素（如`1 2 3`）的集合，`UNION`则将保留此属性。

如果您的代码具有包含非唯一元素（如`1 2 2 3`）的集合，则`UNION`无需努力在结果集中强制执行唯一性。

删除重复项是通过一个单独的函数完成的：`REMOVE-DUPLICATES`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T15:48:01.637

假设作为 UNION 参数的两个列表的元素都是唯一的，则意味着算法在最坏情况下（不可排序、不可散列的元素）的复杂度为 O(n*m)。另一方面，在这种情况下删除列表中的重复项是 O(n^2)。即使在没有重复项的情况下，使 UNION 删除重复项也会使运行时间大约增加三倍，因为大部分时间都花在了比较上。

# mysql - 截断不正确的日期时间值 30.05.2012

> ID：10819356
> 
> 赞同：0
> 
> 时间：2012-05-30T15:24:16.817
> 
> 标签：mysql, sql

我的日期查询有问题。我有字段值 30.05.2012 的日期格式。我想将此格式更改为 30/05/2012 但我的查询不起作用。我可以知道我的查询有什么问题吗？

这是我的查询：-

```
select DATE_FORMAT(P2, '%d/%m/%Y') from view_parameter a
where a.stateCode = 02 and a.schoolCode='SMSA' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:25:49.650

`%`你在你的d之前忘记了a

```
select DATE_FORMAT(P2, '%d/%m/%Y') from view_parameter a where a.stateCode = 02 and a.schoolCode='SMSA' 
```

**编辑**：哦，这是 mysql 无法作为日期获取的字符串：所以

```
select DATE_FORMAT(STR_TO_DATE(P2, '%d.%m.%Y'), '%d/%m/%Y') ... 
```

**编辑 2：**

或者简单地说（不检查由 STR_TO_DATE 生成的有效日期）

```
select replace(P2, '.', '/') 
```

# c# - 将异常或消息从线程/任务传递到主线程

> ID：10819358
> 
> 赞同：1
> 
> 时间：2012-05-30T15:24:30.820
> 
> 标签：c#, multithreading, task-parallel-library, task

我们正在处理 Windows 服务 (.net 4.0) 中大文件的处理和上传。处理和上传步骤可能需要几分钟才能完成。管理员可以直接在数据库中将作业标记为已取消，但要在内存队列中清除它需要重新启动服务。目标是放弃该作业并在队列中选择下一个作业，而无需重新启动服务。这是我想要做的：

在主入口点，启动两个任务：

```
Task processTask = Task.Factory.StartNew(ProcessJob);

Task monitorTask = Task.Factory.StartNew(MonitorDB); 
```

ProcessJob 会调用多个长时间运行的步骤，例如 ProcessFile、UploadFile。我们正在检查步骤之间的作业状态，但作业可能会卡在这些长时间运行的步骤之一中。

如果 monitorTask 检测到 DB 中的作业状态发生变化，它应该将其传达给主线程（通过异常或消息），以便主线程可以退出，将自己从处理队列中移除并允许队列中的下一个作业开始。没有等待不能得到异常但不能等待，因为需要并行运行这些任务。目前，我们并不关心 ProcessJob 中的某些同步步骤可能仍在进行并最终可能完成的事实。我们将在代码中处理它。

到目前为止，在我的所有应用程序中，我都使用 Task.ContinueWith 来判断成功和失败，但从来不需要与主线程进行通信。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:46:07.083

您可以通过`BlockingCollection<T>`.

这是我写的一个简单的例子。

```
BlockingCollection<string> queue =
    new BlockingCollection<string>();

// monitor thread.
Task.Factory.StartNew(() =>
{
    while (true)
    {
        Thread.Sleep(1000);
        queue.Add("event occured.");
    }
});

// main thread.
while (true)
{
    // blocks when no messages are in queue.
    string message = queue.Take();

    // kill process thread here.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:42:55.513

您可以[`CancellationToken`](http://msdn.microsoft.com/en-us/library/system.threading.cancellationtoken.aspx)为此使用 a 。如果你看一下这个[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx)类，有一个重载，你可以传入一个`CancellationToken`. 在您的服务中存储对此令牌的引用，并让您的上传/处理例程定期检查令牌是否已被取消，如下所示：

```
if (yourToken.IsCancellationRequested)
    break; 
```

# objective-c - replaceObjectAtIndex 似乎不起作用

> ID：10819359
> 
> 赞同：2
> 
> 时间：2012-05-30T15:24:37.747
> 
> 标签：objective-c, nsarray

在这里使用一个基本的目标 c 示例，尝试将 replaceObjectAtIndex 用于数组，但它似乎不起作用。

我的代码：

```
 NSMutableArray *myArray=[NSMutableArray array];
    [myArray addObject:@"First string"];
    [myArray addObject:@"Second string"];
    [myArray addObject:@"Third string"];

    NSString *newElement=[myArray objectAtIndex:1];
    NSLog(@"New object at index 1 BEFORE is %@", newElement);
    [myArray replaceObjectAtIndex:1 withObject:@"Hello"];
    NSLog(@"New object at index 1 AFTER is %@", newElement); 
```

理论上，newElement 的输出现在应该显示“Hello”，但它仍然显示“Second String”

输出：

```
2012-05-30 11:21:16.638 cocoa lab[753:403] New object at index 1 BEFORE is Second string
2012-05-30 11:21:16.641 cocoa lab[753:403] New object at index 1 AFTER is Second string 
```

请指教

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:26:25.407

替换后需要从数组中获取新值

```
// ...
[myArray replaceObjectAtIndex:1 withObject:@"Hello"];

/* ADD THIS */
newElement=[myArray objectAtIndex:1];

NSLog(@"New object at index 1 AFTER is %@", newElement); 
```

在您获取原始字符串的那一刻，替换数组的对象，然后再次打印出原始字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:26:52.083

您需要`newElement`在调用后重置 的值`replaceObjectAtIndex:`，因此在第二次记录该值之前添加另一行：

```
newElement=[myArray objectAtIndex:1]; 
```

**更新 1**

不要感到难过——我们都曾在某个时候对自己做过这件事。:-)

**更新 2**

顺便说一句，通常避免此类问题的一个好方法是养成在这种情况下使用单独的局部变量的习惯，例如，您可以重写您发布的代码如下：

```
NSString *initialValue = [myArray objectAtIndex:1];
NSLog(@"New object at index 1 BEFORE is %@", initialValue);

[myArray replaceObjectAtIndex:1 withObject:@"Hello"];

NSString *newValue = [myArray objectAtIndex:1];
NSLog(@"New object at index 1 AFTER is %@", newValue); 
```

# java - 等待 Swing 界面关闭后再继续

> ID：10819360
> 
> 赞同：0
> 
> 时间：2012-05-30T15:24:45.290
> 
> 标签：java, swing, countdownlatch

我一直在寻找解决问题的方法，但我什至很难定义我的搜索词。

我有一个方法可以使用 invokeLater 创建一个 Swing GUI，用户可以在其中完成一些任务。一旦任务完成，窗口关闭并且初始调用线程（例如方法）应该恢复执行。更具体地说，这里是该方法的摘要：

```
public class dfTestCase extends JFrame{
    public dfTestCase{
          ... //GUI code here
    }

    public String run()
    {
        CountDownLatch c = new CountDownLatch(1);
        Runnable r = new Runnable()
        {
            public void run()
            {
                setVisible(true);  //make GUI visible
            }
        };

        javax.swing.SwingUtilities.invokeLater(r);

        //now wait for the GUI to finish
        try
        {
                testFinished.await();
        } catch (InterruptedException e)
        {
               e.printStackTrace();
        }

        return "method finished";
    }

    public static void main(String args[]){
          dfTestCase test = new dfTestCase();
          System.out.println(test.run());
    }
 } 
```

在 GUI 中，我有用于关闭按钮的 actionListeners 并对 CountDownLatch 进行倒计时。

虽然 CountDownLatch 有效，但它不适合我的目的，因为我需要多次运行此 GUI，并且无法增加锁存器。我正在寻找一个更优雅的解决方案 - 我最好的猜测是我需要使用线程，但我不确定如何去做。

任何帮助将非常感激！

**更新** 一些澄清：正在发生的事情是一个外部类正在调用 dfTestCase.run() 函数并期望返回一个字符串。本质上，流程与调用 dfTestCase.run() 的外部类是线性的--> 被调用的 GUI--> 用户做出决定并单击按钮--> 返回初始调用线程的控制并 run()完成了。

现在我的肮脏解决方案是放一个带有标志的while循环来连续轮询GUI的状态。我希望其他人最终可以提出一个更优雅的解决方案。

```
public class dfTestCase extends JFrame{
    public dfTestCase{
          ... //GUI code here
          JButton button = new JButton();
          button.addActionListener{
          public void actionPerformed(ActionEvent e){
              flag = true;
          }
          }
    }

    public String run()
    {
           Runnable r = new Runnable()
           {
                public void run(){
                      setVisible(true);  //make GUI visible
           };

           javax.swing.SwingUtilities.invokeLater(r);

           //now wait for the GUI to finish
          while (!flag){
              sleep(1000);
          }
          return "method finished";
     }

     public static void main(String args[]){
           dfTestCase test = new dfTestCase();
           System.out.println(test.run());
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:10:03.453

模态对话框和`SwingUtilities#invokeAndWait`iso`invokeLater`应该允许您捕获用户输入，并且仅在释放 UI 时继续调用线程

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:31:02.167

有关使用模型对话框的示例，您可以查看我编写的 ParamDialog 类。特别是，检查 ParamDialog.getProperties(Properties);

[http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/ui/dialogs/](http://tus.svn.sourceforge.net/viewvc/tus/tjacobs/ui/dialogs/)

# forms - Zend 框架：如何从 zend auth 获取用户 id 到 zend 表单

> ID：10819362
> 
> 赞同：1
> 
> 时间：2012-05-30T15:24:48.840
> 
> 标签：forms, zend-framework, authentication, zend-form, zend-auth

我有一个表单评论。我想从中获取用户 ID`Zend_Auth`以插入我的数据库。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:32:23.880

如果`Zend_Auth`已实例化，则：

1.  获取它的一个实例：
    `$auth = Zend_Auth::getInstance();`

2.  获取身份验证成功时必须存储的身份：
    `$identity = $auth->getIdentity();`

3.  根据您存储的模型使用身份。

# matplotlib - 如何“清白”？

> ID：10819363
> 
> 赞同：3
> 
> 时间：2012-05-30T15:24:58.703
> 
> 标签：matplotlib

我想制作一系列图，并将每个图保存到文件中。但我不知道如何抹去以前的情节。也许我每次都需要创建一些新对象，但我不知道会是哪个对象。这是我的代码，请注意注释。这是我的代码：

```
import matplotlib.pyplot as plt
ind = (1,2,3,4)
groups=(
  (1, (1.1,1.2,1.3,1.4)),
  (2, (2.2,2.2,1.2,2.4)),
)

for group in reversed(groups):
  #clean the slate ?
  plt.bar(ind   ,group[1])
  plt.xticks([i+0.5 for i in ind],ind)
  plt.savefig('%d.png' % group[0]) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:28:40.090

**不要**每次都创建一个新图形`plt.figure()`，你会很快耗尽内存。而是使用（分别用于图形和轴）：

```
plt.clf()
plt.cla() 
```

您可以运行`plt.close()`以释放分配，但是过去曾有人讨论过这种方法会导致内存泄漏。快速测试表明，在版本中`1.1.1rc`这可以正常工作，因此请随意使用它作为替代方案。一个有用的[相关问题讨论](https://stackoverflow.com/questions/8213522/matplotlib-clearing-a-plot-when-to-use-cla-clf-or-close)了这些方法之间的差异。

# php - Symfony2 yaml 数组选项

> ID：10819365
> 
> 赞同：1
> 
> 时间：2012-05-30T15:25:00.390
> 
> 标签：php, dependency-injection, symfony, yaml

在`app/config/config.yml`我为我的包添加了一些自定义设置

```
acme:
    acme_services:    
      service_a:
        options: { name: I, id: X, type: F, error: E }
      service_b:
        options: { name: J, id: Z, type: F, error: E } 
```

现在`src/ACME/Bundle/ACMEBundle/DependencyInjection/Configuration.php`如何设置默认值和`/`或检查`service_a`/ `service_b`？

```
public function getConfigTreeBuilder()
{
    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('acme');

    $rootNode
        ->children()
            // also removed the ->end() for each arrayNode but then I get a Fatal Error 
            ->arrayNode('acme_services')->end()
            ->arrayNode('another')->end()
            ->arrayNode('more')->end()
            ->arrayNode('blah')->end()
        ->end();

    return $treeBuilder;
} 
```

所以我需要拉取`service_a`and`service_b`数组，但我得到and的`Unrecognized options`错误。`service_a``service_b`

期望的结果是我想同时拥有`service_a`和`service_b`在`acme_services`数组中，这就是为什么我可以针对使用`acme_services`的任何服务验证数组，无论是`service_a`还是`service_b`。

注意：在 PHP 中我会这样写：（不确定这是否正确，但这是一个示例）

```
$acme_services = array(
    'acme_services' =>
        'service_a' => array(
            'options' => array(
                'name' => 'I',
                'id'   => 'X',
                'type' => 'F',
                'error'=> 'E',
            )
        ),
        'service_b' => array(
            'options' => array(
                'name' => 'J',
                'id'   => 'Z',
                'type' => 'F',
                'error'=> 'E',
            )
        )
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T18:35:12.243

您要使用的是*Prototypes*，例如：

```
$rootNode
    ->children()
       ->prototype('array')
          ->children()
              ->arrayNode('options')
                  ->children()
                  ->scalarNode('name')->end()
                  ->scalarNode('id')->end()
                  ->scalarNode('type')->end()
                  ->scalarNode('error')->end()
              ->end()
           ->end()
     ->end()
->end() 
```

这样，只要遵循此模式，您就可以定义任意数量的服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:09:18.320

你可以试试 ：

```
public function getConfigTreeBuilder()
{
    $treeBuilder = new TreeBuilder();
    $rootNode = $treeBuilder->root('acme');

    $rootNode
        ->children()
            // also removed the ->end() for each arrayNode but then I get a Fatal Error 
            ->arrayNode('acme_services')
                 ->children()
                      ->arrayNode('service_a')
                          ->children()
                              ->arrayNode('options')->end()
                      ->arrayNode('service_b')
                          ->children()
                              ->arrayNode('options')->end()
           ->end();

    return $treeBuilder;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-20T00:28:34.217

试试这个：

```
$rootNode
   ->children()
        ->arrayNode('acme_services')
            ->prototype('array')
                ->children()
                    ->arrayNode('options')
                        ->children()
                            ->scalarNode('name')->end()
                            ->scalarNode('id')->end()
                            ->scalarNode('type')->end()
                            ->scalarNode('error')->end()
                        ->end()
                    ->end()
                ->end()
            ->end()
        ->end()
    ->end()
->end(); 
```

# sql - 基于时间戳的历史表中的 SQL 更新语句

> ID：10819368
> 
> 赞同：0
> 
> 时间：2012-05-30T15:25:08.940
> 
> 标签：sql, oracle10g

我正在尝试`update`在 Oracle 中编写一个语句，它将根据时间戳从历史表中找到一个属性。因此，例如，数据如下所示：

```
TABLE A
A_ID  TIMESTAMP              ATTR
---------------------------------
1     5/27/2012 10:30:00 AM  ?

TABLE B
B_ID  A_ID  TIMESTAMP              ATTR
---------------------------------------
1     1     5/26/2012 9:01:08 AM   W
2     1     5/27/2012 8:38:21 AM   X
3     1     5/28/2012 9:01:01 AM   Y
4     1     5/29/2012 11:37:54 PM  Z 
```

下限 >= B.TIMESTAMP，但我不确定如何将上限写为 < B."the next TIMESTAMP"。因此，在上面的示例中，表 A 上的属性应更新为“X”。

这似乎是一个相当常见的用例。我看过[这篇文章](https://stackoverflow.com/questions/3803758/sql-update-with-value-from-other-table-depending-on-timestamp)，但似乎从未得到令人满意的答案，所以我想我会再发一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:49:04.633

```
UPDATE A SET attr = (
    SELECT b1.attr 
    FROM B b1
        INNER JOIN (
            SELECT MAX(b3.timestamp) mx FROM B b3
            WHERE b3.timestamp < A.timestamp
        ) b2 ON b1.timestamp = b2.mx
) 
```

我不记得 Oracle 是否允许我在内部连接子查询中使用表 A……你介意试试吗？

# asp.net-mvc-3 - MVC 3 Razor - 表单未发回控制器

> ID：10819370
> 
> 赞同：2
> 
> 时间：2012-05-30T15:25:13.837
> 
> 标签：asp.net-mvc-3, jquery, razor

我正在使用 MVC 3 和 Razor，试图从加载部分视图的 Telerik 窗口 (telerik.window.create) 将表单发布回控制器。我不知道如何发布这个所以我只是按执行顺序发布代码并在我去的时候解释它。

首先单击一个锚点，然后 onClick 调用：

```
 function showScheduleWindow(action, configId) {
    var onCloseAjaxWindow = function () { var grid = $("#SubscriptionGrid").data("tGrid"); if (grid) { grid.rebind(); } };
    CreateAjaxWindow("Create Schedule", true, false, 420, 305, "/FiscalSchedule/" + action + "/" + configId, onCloseAjaxWindow);
} 
```

和 CrateAjaxWindow 方法：

```
function CreateAjaxWindow(title, modal, rezible, width, height, url, fOnClose) {
    var lookupWindow = $.telerik.window.create({
        title: title,
        modal: modal,
        rezible: rezible,
        width: width,
        height: height,
        onClose: function (e) {
            e.preventDefault();
            lookupWindow.data('tWindow').destroy();
            fOnClose();
        }
    });

    lookupWindow.data('tWindow').ajaxRequest(url);
    lookupWindow.data('tWindow').center().open();
} 
```

这是正在加载的部分视图：

```
@model WTC.StatementAutomation.Web.Models.FiscalScheduleViewModel
@using WTC.StatementAutomation.Model
@using WTC.StatementAutomation.Web.Extensions           

@using (Html.BeginForm("Create", "FiscalSchedule", FormMethod.Post, new { id = "FiscalScheduleConfigForm" }))
{
    <div id="FiscalScheduleConfigForm" class="stylized">
        <div class="top">
            <div class="padding">
                Using fiscal year end: @Model.FiscalYearEnd.ToString("MM/dd")
            </div>
            <div class="padding Period">
                <table border="0">
                    <tr>
                        <th style="width: 120px;"></th>                   
                        <th>Effective Date</th>
                        <th>Next Run</th>
                        <th>Start From Previous</th>
                    </tr>
                    <tr>
                        <td>
                            @Html.CheckBoxFor(m => m.HasMonthly)
                            <label>Monthly</label>
                        </td>
                        <td>
                            @{ var month = Model.GetForFiscalPeriod(FiscalPeriodStatementSchedule.FiscalPeriod.Monthly);}
                            @month.BaseSchedule.StartDate.ToString("MM/01/yyyy")
                        </td>
                        <td>
                            @month.BaseSchedule.NextScheduleRun.ToString("MM/dd/yyyy")
                        </td>
                        <td class="previous">
                            @(month.HasRun ? Html.CheckBoxFor(m => month.BaseSchedule.StartFromPreviousCycle, new { @disabled = "disabled", @readonly = "readonly" }) : Html.CheckBoxFor(m => month.BaseSchedule.StartFromPreviousCycle))    
                        </td>
                    </tr>
                     <tr>
                        <td>
                             @Html.CheckBoxFor(m => m.HasQuarterly)  Quarterly
                        </td>
                        <td>
                            @{ var quarter = Model.GetForFiscalPeriod(FiscalPeriodStatementSchedule.FiscalPeriod.Quarterly);}
                            @quarter.BaseSchedule.StartDate.ToString("MM/01/yyyy")
                        </td>
                        <td>
                            @quarter.BaseSchedule.NextScheduleRun.ToString("MM/dd/yyyy")
                        </td>
                        <td class="previous">
                            @(quarter.HasRun ? Html.CheckBoxFor(m => quarter.BaseSchedule.StartFromPreviousCycle, new { @disabled = "disabled", @readonly = "readonly" }) : Html.CheckBoxFor(m => quarter.BaseSchedule.StartFromPreviousCycle))    
                        </td >
                    </tr>   
                    <tr>
                        <td>
                             @Html.CheckBoxFor(m => m.HasAnnual) Annual
                        </td>
                        <td>
                            @{ var annual = Model.GetForFiscalPeriod(FiscalPeriodStatementSchedule.FiscalPeriod.Annual);}
                            @annual.BaseSchedule.StartDate.ToString("MM/01/yyyy")
                        </td>
                        <td>
                            @annual.BaseSchedule.NextScheduleRun.ToString("MM/dd/yyyy")
                        </td>
                        <td class="previous">

                            @(annual.HasRun ? Html.CheckBoxFor(m => annual.BaseSchedule.StartFromPreviousCycle, new { @disabled = "disabled", @readonly = "readonly" }) : Html.CheckBoxFor(m => annual.BaseSchedule.StartFromPreviousCycle))    
                        </td>
                    </tr>   
                    <tr>
                        <td>
                             @Html.CheckBoxFor(m => m.HasSemiAnnual) Semi-annual
                        </td>
                        <td>
                            @{ var semi = Model.GetForFiscalPeriod(FiscalPeriodStatementSchedule.FiscalPeriod.SemiAnnual);}
                            @semi.BaseSchedule.StartDate.ToString("MM/01/yyyy")
                        </td>
                        <td>
                            @semi.BaseSchedule.NextScheduleRun.ToString("MM/dd/yyyy")
                        </td>
                        <td class="previous">

                            @(semi.HasRun ? Html.CheckBoxFor(m => semi.BaseSchedule.StartFromPreviousCycle, new { @disabled = "disabled", @readonly = "readonly" }) : Html.CheckBoxFor(m => semi.BaseSchedule.StartFromPreviousCycle))    

                        </td>
                    </tr>     
                </table>
            </div>
            <div class="padding StartDay">
                <span>Run on day:</span>
                @Html.TextBoxFor(model => model.StartDay)
                <span>of every period.</span>
            </div>
        </div>
        <div class="bottom">
            <div class="padding">
                <div style="float: left;">
                    @if (Model.ShowSuccessSave)
                    {
                        <div id="successSave" class="label">Changes saved succesfully</div>
                    }
                    @Html.ValidationSummary(true)
                    @Html.HiddenFor(x => x.SubscriptionId)
                    @Html.HiddenFor(x => x.DeliveryConfigurationId)
                    @Html.HiddenFor(x => x.FiscalYearEnd)   
                </div>
                <a id="saveSchedule" class="btn" href="">Save</a>
            </div>
        </div>
    </div>
}

<script type="text/javascript">
    $(function () {
        $('a#saveSchedule').click(function () {
            $(this).closest("form").submit();
            return false;
        });
    });
</script> 
```

最后是控制器方法：

```
[HttpPost]
public ActionResult Create(FormCollection formValues, int subscriptionId, int deliveryConfigurationId, int startDay, DateTime fiscalYearEnd)
{

    if (ModelState.IsValid)
    {

        var selectedSchedules = GetCheckedSchedulesFromForm(formValues);
        var startFromPrevious = GetFromPreviouSelections(formValues);
        this.AddModelErrors(_fiscalScheduleService.AddUpdateSchedules(selectedSchedules, subscriptionId, deliveryConfigurationId, startDay, startFromPrevious));            
    }

    return new RenderJsonResult { Result = new { success = true, action = ModelState.IsValid ? "success" : "showErrors", 
                                  message = this.RenderPartialViewToString("_FiscalScheduleConfigForm", 
                                  BuildResultViewModel(deliveryConfigurationId, subscriptionId, fiscalYearEnd, ModelState.IsValid)) } };                        

} 
```

正如您所看到的，我正在使用 jQuery 回发到控制器，这在应用程序中已经多次完成，这似乎可以正常工作。但是对于这种形式，由于某种原因，它根本不会回发或进入 Create 方法。我推测它与控制器方法上的参数有关。但我对 MVC（来自 ASP.NET 世界）相当陌生，所以我不确定我在这里做错了什么。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:47:26.403

我能够通过修改 startDay 的 textboxfor 将其发布到控制器：

更改自：

```
@Html.TextBoxFor(model => model.StartDay) 
```

至：

```
@Html.TextBoxFor(model => model.StartDay, new { id = "startDay" }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:56:46.277

我的猜测是您在 IIS 中的虚拟目录上运行？您生成的那个网址可能是罪魁祸首。

按 F12，查看网络选项卡（并启用跟踪），看看它试图请求什么。

与其通过文本建立链接，不如使用`@Url.Action()`? 您可以将其存储在`a`标签的属性中（例如，在名为 的属性`data-url`中），然后使用该信息进行调用。使用 jQuery 提取属性非常容易，如下所示：

```
$('.your-link-class').click(function(){
   var url = $(this).attr('data-url');
   // proceed with awesomesauce
}); 
```

这样的东西对你有用吗？

[无耻的自我插件] 就控制器动作签名而言，如果可以的话，您可能希望查看模型绑定。一个简单的课程和你的许多头痛都会消失。你可以[在这里](http://jameschambers.com/articles)阅读更多内容，阅读模型绑定部分。有不同方法的可下载示例。

干杯。

# c++ - strcmp 混乱

> ID：10819376
> 
> 赞同：0
> 
> 时间：2012-05-30T15:25:31.007
> 
> 标签：c++, string, char, strcmp

据我所知，标准 strcmp 函数如下所示：

```
int strcmp(const char* string1, const char* string2)
{
    while(*pString1++ == *pString2++)
    {
        if(*pString1 == 0) return 0;
    }
    return *pString1 - pString2;
} 
```

我的问题是，这不会增加传递给 strcmp 的指针吗？在下面的示例中，它似乎会丢弃指针并导致发生无效的事情。

```
const char* string1 = "blah";
const char* string2 = "blah";
const char* string3 = "blah";
if(strcmp(string1, string2) {doSomething();} 
// Won't this make string1 = "" because it incremented the pointer to the end?
else if (strcmp(string1, string3) {doSomethingElse();} 
```

抱歉，我只是感到困惑，因为似乎如果我将一个指针传递给 strcmp，我不应该期望该指针突然包含一个空字符串。似乎 strcmp 应该采用 const char* const。我完全误解了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T15:29:27.563

您的误解是这样的：参数是通过值（副本）传递的，但您似乎认为它们是通过引用传递的。

您可以通过将参数声明`strcmp`为引用来获得预期的行为，如下所示：

```
int strcmp(const char*& string1, const char*& string2) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T15:27:58.783

不，指针`string1`和`string2`是函数的本地（按值传递）。调用者看不到对它们所做的任何更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:28:11.707

指针本身是按值传递的，因此尽管它是指向某物的指针，但更改它只会更改本地声明。

为了能够从函数的内部范围修改指针本身，您需要有一个指向 char 指针的指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T15:28:13.737

指针是按值传递的，strcmp 使用的是您发送的指针的副本，因此不会触及原始指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:43:36.973

试试这个，你会发现它们是完全不同的指针。导致您误解的原因是它们指向同一个区域

```
#include <iostream>

using namespace std;

int strcmp2(char const *s1, char const *s2)
{
    cout << "In strcmp" << endl;
    cout << &s1 << " " << &s2 << endl;
    cout << endl;
}

int main()
{
    char a[100];
    char b[100];

    cout << "In main function" << endl;
    cout << &a << " " << &b << endl;
    cout << endl;

    strcmp2(a, b);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T15:32:59.050

首先，经典的混淆实现`strcmp`更加简单：

```
int
strcmp(char const* s1, char const* s2)
{
    while ( *s1 ++ == *s2 ++ )
        ;
    return *s1 - *s2;
} 
```

（我希望没有人会在实践中真正编写这样的代码。）

至于您的实际问题：C++（和 C，因为这实际上是一个 C 问题）按值传递参数，因此任何`strcmp`获取的指针都是副本；它不可能修改调用代码中的任何指针。所有制作参数`char const* const`都意味着 `strcmp`无法修改其指针的本地副本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T15:33:31.533

C++ 将参数“按值”传递给函数。考虑这段代码：

```
void f(int i) { i = 7; }
...
    int j = 0;
    f(j);
    assert(j == 0); 
```

变量与变量`j`无关`i`。确实，`i`函数的本地`f`。它使用 的副本进行初始化`j`。更改`i`永远不会传达给`j`.

现在考虑这段代码：

```
void f(char *i) { i = i + 1; }
...
    char *j = "Hello";
    f(j);
    assert(*j == 'H'); 
```

同样，`i`用 的副本初始化`j`。更改`i`永远不会传回给`j`.

* * *

注意：因此可以强制“通过引用”初始化参数：

```
void f(int& i) { i = 7; }
...
   int j = 3;
   f(j);
   assert(j==7); 
```

在这种情况下，不是用 的副本初始化，`j`而是`i`绑定*到*一个`j`. 但这仅适用于您`&`在声明中的情况。

# xml - 使用 XSD 架构文件验证 XML 文件。（XML 结构）

> ID：10819377
> 
> 赞同：1
> 
> 时间：2012-05-30T15:25:33.927
> 
> 标签：xml, parsing, xsd, schema

对于一个看起来像这样的 XML 文档，

```
<Products>
    <productTypes>
        <productType name="BigOranges">
            <product>
                <name>BigOrange1</name>
                <quatity>25</quatity>
            </product>
            <product>
                <name>BigOrange2</name>
                <quatity>55</quatity>
            </product>
        </productType>
        <productType name="BigApples">
            <product>
                <name>BigApples1</name>
                <quatity>25</quatity>
            </product>
            <product>
                <name>BigApples2</name>
                <quatity>55</quatity>
            </product>
        </productType>
    </productTypes>
</Products> 
```

我尝试自动生成 XSD 文件以查看示例，这就是生成的内容。

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:simpleType name="T_quatity">
        <xs:restriction base="xs:byte">
            <xs:enumeration value="25"/>
            <xs:enumeration value="55"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="T_name">
        <xs:restriction base="xs:string">
            <xs:enumeration value="BigApples1"/>
            <xs:enumeration value="BigApples2"/>
            <xs:enumeration value="BigOrange1"/>
            <xs:enumeration value="BigOrange2"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:simpleType name="AT_1">
        <xs:restriction base="xs:string">
            <xs:enumeration value="BigApples"/>
            <xs:enumeration value="BigOranges"/>
        </xs:restriction>
    </xs:simpleType>
    <xs:complexType name="T_productTypes">
        <xs:sequence>
            <xs:element ref="productType" maxOccurs="unbounded"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="T_productType">
        <xs:sequence>
            <xs:element ref="product" maxOccurs="unbounded"/>
        </xs:sequence>
        <xs:attribute ref="name" use="required"/>
    </xs:complexType>
    <xs:complexType name="T_product">
        <xs:sequence>
            <xs:element ref="name"/>
            <xs:element ref="quatity"/>
        </xs:sequence>
    </xs:complexType>
    <xs:complexType name="T_Products">
        <xs:sequence>
            <xs:element ref="productTypes"/>
        </xs:sequence>
    </xs:complexType>
    <xs:attribute name="name" type="AT_1"/>
    <xs:element name="quatity" type="T_quatity"/>
    <xs:element name="productTypes" type="T_productTypes"/>
    <xs:element name="productType" type="T_productType"/>
    <xs:element name="product" type="T_product"/>
    <xs:element name="name" type="T_name"/>
    <xs:element name="Products" type="T_Products"/>
</xs:schema> 
```

查看上面的内容，我可以看到正在发生的事情是它们的类型已定义，然后在定义元素时使用这些类型。我不明白的是，元素是一个接一个地定义的，并且不遵循 XML 消息的结构。

如果此模式将用于验证 XML 文档，那么如何验证 XML 文件的结构？例如使用上述模式，它如何知道 productTypes 元素是 productType 标签的内部标签？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:51:41.440

您对问题的说明有点错误...应该是*它如何知道 productTypes 元素是~~productType~~ **Products**标签的内部标签*

我认为让你感到困惑的是全局元素在 XSD 文件中的显示顺序，它与生成的 XSD 的创作风格有关，这种风格通常被称为“伊甸园”。

应该注意的是，这些全局定义在 XSD 中的显示方式与兼容的 XML 实例之间没有任何关系。

例如，如果您熟悉 UML 类图，那么类在可视化 UML 类图中的位置与该类在现实世界中的实际使用无关。

作为补充，我现在可以从您的困惑中看出，如果尝试遵循 XML 结构，在伊甸园中学习 XSD ;) 可能证明是一个糟糕的起点。

下面是另一个生成的 XSD，它适用于相同的 XML；我认为您可能会发现这更直观（顺便说一句，由于其深层嵌套的结构，这种创作风格被称为“俄罗斯娃娃”）。

```
<?xml version="1.0" encoding="utf-8"?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <xsd:element name="Products">
    <xsd:complexType>
      <xsd:sequence>
        <xsd:element name="productTypes">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element maxOccurs="unbounded" name="productType">
                <xsd:complexType>
                  <xsd:sequence>
                    <xsd:element maxOccurs="unbounded" name="product">
                      <xsd:complexType>
                        <xsd:sequence>
                          <xsd:element name="name" type="xsd:string" />
                          <xsd:element name="quatity" type="xsd:unsignedByte" />
                        </xsd:sequence>
                      </xsd:complexType>
                    </xsd:element>
                  </xsd:sequence>
                  <xsd:attribute name="name" type="xsd:string" use="required" />
                </xsd:complexType>
              </xsd:element>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
      </xsd:sequence>
    </xsd:complexType>
  </xsd:element>
</xsd:schema> 
```

我认为以上内容也强调并澄清了@Romil 在您的情况下的回答（他指的是 T_Products）。

至于验证是如何工作的，解释起来并不容易。您可以将其视为一个状态机，其中状态之间的转换由您在 XSD 中放置的约束控制（最小/最大出现，顺序与选择与全部）。XML 阅读器遍历 XML，并尝试从一个状态移动到另一个状态；当它到达一个没有出路的地方时，它可能是一个错误，或者成功的验证，取决于......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:30:13.470

xs:complexType 用于显示哪个对象将嵌套在这个父对象中。xs:sequence 显示父对象中子对象的顺序。

xs:simpleType 表示这是原子对象。

# javascript - 将 d3.js 代码与未显示的随机数据和在定义之前显示的多个 SVG 混淆

> ID：10819380
> 
> 赞同：1
> 
> 时间：2012-05-30T15:25:46.210
> 
> 标签：javascript, svg, data-visualization, d3.js

我正在使用[本教程](http://christopheviau.com/d3_tutorial/)来学习一些基本的[d3](http://d3js.org/)。

我在“绑定数据”部分，到目前为止证明相当混乱。

```
var dataset = [],
    i = 0;

for(i=0; i<5; i++){
    dataset.push(Math.round(Math.random()*100));
}        

alert("Data: " + dataset)

var sampleSVG = d3.select("#viz")
    .append("svg:svg")
    .attr("width", 400)
    .attr("height", 75);    

sampleSVG.selectAll("rect")
    .data(dataset)
    .enter().append("svg:rect")
    .style("stroke", "gray")
    .style("fill", "white")
    .attr("height", 40)
    .attr("width", 75)
    .attr("x", function(d, i){return i*80})
    .attr("y", 20); 
```

我的问题是：

1.  我们创建了一个包含 5 个随机数的数据集。为什么这些没有反映在矩形的宽度上？
2.  `.append("svg:svg")`没有引用任何矩形，那么`selectAll("rect")`如果它们甚至不存在我们怎么能做到呢？
3.  在匿名函数中，`d`指的是什么？
4.  在匿名函数中，`i`指的是什么？它乘以80是多少？
5.  它会自动循环遍历数据集中的所有点吗？在最终的代码块中，似乎没有任何迭代，所以我猜它只是对每个数据元素都这样做？

如此迷茫！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:49:28.490

1.  因为矩形的宽度固定为 75，并且没有使用随机数。
2.  append("svg:rect") 创建矩形
3.  d 指的是数据集，这些将是随机数。
4.  i 是数据集项目的索引，因此第一个项目为 0，第二个项目为 1，依此类推，最多为 4，因为数据集中有 5 个项目
5.  是的，你猜对了。

# c# - Win7中的自定义控件绘画问题

> ID：10819385
> 
> 赞同：0
> 
> 时间：2012-05-30T15:26:00.080
> 
> 标签：c#, .net, custom-controls

我们有一个仅在 Win7 中出现的绘画问题。它在 Win Xp 中完美运行。当用户点击自定义控件的某个项目或任何部分（用户控件在下图中以红色矩形标记）时，树形视图和屏幕中的所有控件开始闪烁。仅当鼠标指针移出用户控件时，闪烁才会停止。

如何解决问题？

用户控制代码如下

```
namespace NeST.ICE.Screens.ICEJobHistory
{
    public partial class CustomControlPropertGrid : System.Windows.Forms.PropertyGrid    
    {
        public CustomControlPropertGrid()
        {
            InitializeComponent();
            this.DoubleBuffered = true;
        }

        protected override void OnPaint(PaintEventArgs pe)
        {
            // TODO: Add custom paint code here

            // Calling the base class OnPaint
            base.OnPaintBackground(pe);
            base.OnPaint(pe);

        }
        protected override void OnPaintBackground(PaintEventArgs e)
        {

        }

    }
} 
```

数据填充代码如下。this._waferGrid 是 CustomControlPropertGrid 的对象

```
 if (dataReader != null && dataReader.Read())
            {
                //FIX_OCT_08: BUG2891 
                WaferProperty wafer = new WaferProperty();

                //FIX_JUN_09:Changed Name to SubstrateID
                wafer.SubstrateID   = dataReader[Constants.NAME_PARAMETER_INDEX].ToString();
                wafer.InCarrier     = dataReader[Constants.SOURCE_INCARRIER_PARAMETER_INDEX].ToString();
                wafer.OutCarrier    = dataReader[Constants.DESTINATION_OUTCARRIER_PARAMETER_INDEX].ToString();
                wafer.InLoadPort    = dataReader[Constants.DESTINATIONSLOT_INLP_PARAMETER_INDEX].ToString();
                wafer.OutLoadPort   = dataReader[Constants.STARTTIME_OUTLP_PARAMETER_INDEX].ToString();
                wafer.StartTime     = dataReader[Constants.WAFER_TIME_PARAMETER_INDEX].ToString();
                wafer.EndTime       = dataReader[Constants.ENDTIME_OPERATION_PARAMETER_INDEX].ToString();
                //<<EHN_AUG_11_WaferLotId 
                //Added the waferLotId parameter to the grid
                wafer.LotID = dataReader[Constants.LOT_ID_PARAMETER_INDEX].ToString();
                //EHN_AUG_11_WaferLotId >>
                //FIX_JUN_09:Changed WaferID to ActualWaferID
                wafer.ActualWaferID = dataReader[Constants.WAFER_STATUS_PARAMETER_INDEX].ToString();
                wafer.RouteRecipe = dataReader[Constants.WAFER_ROUTE_RECIPE_PARAMETER_INDEX].ToString();

                this._waferGrid.SelectedObject =wafer;

            } 
```

![在此处输入图像描述](../Images/a38ccf8b4996e88c91e7c2af37b74ce2.png)

# c++ - 我如何静态链接到两个版本的 xerces-c（或任何库）？

> ID：10819388
> 
> 赞同：2
> 
> 时间：2012-05-30T15:26:04.720
> 
> 标签：c++, gcc, static-linking, xerces-c

我知道这不是一件很干净的事情，但是我该怎么做呢？

基本上，我正在静态链接使用 xerces-c 2.7 的第三方库，并且我想使用 xerces-c 3.1（对于 2.x 中没有的一些最新和最强大的功能）

使用 2.7 的模块（由第三方库在内部使用并且从未暴露给我的代码）与使用 3.1 的模块（在我的代码中）没有任何共同之处。

有什么办法可以做到这一点？我知道这不是一件好事，但想到从提交图书馆升级请求到实际完成它之间的准备时间，我不寒而栗。可能至少几个月，我不想走那条邪恶的道路。

一个通用的编译器独立解决方案会好得多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:52:42.947

[除了“链接具有不兼容依赖项的库](https://stackoverflow.com/questions/8535330/linking-libraries-with-incompatible-dependecies)”中提到的解决方案之外，另一个解决方案是通过将不同版本构建到不同的动态库中来隔离它们。最简单的方法可能是将使用 xerces 3.1 的代码移动到一个新的动态库中，并为其创建一个接口。由于您是针对 Xerces 进行静态链接，因此这会将引用保留在动态库的内部。您可能需要更改[gcc 可见性](http://gcc.gnu.org/wiki/Visibility)设置以确保仅从动态库中导出选定的函数名称。

# java - 访问 Wicket 表单验证器中的任意数量的字段

> ID：10819389
> 
> 赞同：3
> 
> 时间：2012-05-30T15:26:12.370
> 
> 标签：java, validation, wicket

我需要验证几个 Wicket 类型的输入字段`TextField<BigDecimal>`（即百分比总和为 100）。有一对多这样的输入字段；问题是，我事先不知道有多少。

（简化示例）

```
private class PercentageValidator extends AbstractFormValidator {
    @Override
    public FormComponent<?>[] getDependentFormComponents() {
        // ...
    }

    @Override
    public void validate(Form<?> form) {
        List<TextField<BigDecimal>> fields = // TODO

        // the actual validation where the value of every field is needed
    }
} 
```

ListView 的 Java 代码：

```
ListView<?> listView = new ListView<PropertyShare>("shares", shares) {
    @Override
    protected void populateItem(ListItem<PropertyShare> item) {
    // ... 
        item.add(new TextField<BigDecimal>("share", ... model ...));
    }
}; 
```

HTML：

```
<tr wicket:id="shares">
   <td> ... </td>
   <td>
     <input wicket:id="share" type="text" size="4"> %
   </td>

</tr> 
```

我尝试将每个 TextField 保存在 Page 上的集合中，但是这种方法失败了，因为不仅首先创建了 Page，而且调用`populateItem()`了封闭的方法，因此将重复的字段添加到了集合中。`ListView`（我想不出一个简单的方法来保持它没有重复。）

使用 ListView 的事实似乎也使从`validate()`方法中的表单对象中查找字段变得有些复杂。我想我需要获取 ListView`form.get("shares")`并遍历其子项？

访问中继器所包含的任意数量的字段的“正确方法”是`ListView`什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T20:51:02.380

另一种方法是子类化`TextField`，然后使用 a`Visitor`来挑选子类的所有后代组件。

通过这种方式，您可以避免未经检查的强制转换，并且您不必依赖 id，这不是一种非常可靠的方法。

**编辑**：在实践中，它看起来像这样：

子类：

```
private static class ShareField extends TextField<BigDecimal> {
   // ...
} 
```

从表单中查找所有 ShareField 的辅助方法：

```
private List<ShareField> findShareFields(Form form) {
    final List<ShareField> fields = Lists.newArrayList();
    form.visitChildren(ShareField.class, new IVisitor<ShareField>() {
        @Override
        public Object component(ShareField component) {
            fields.add(component);
            return CONTINUE_TRAVERSAL;
        }
    });
    return fields;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:40:50.693

是的，在写这个问题时，我突然想到，简单地循环遍历`form.get("shares")`id 为“share”的字段并获取字段可能会起作用。

确实如此。这是一个查找“共享”字段的辅助方法：

```
@SuppressWarnings("unchecked")
private List<TextField<BigDecimal>> findFields(Form form) {
    List<TextField<BigDecimal>> fields = Lists.newArrayList();
    MarkupContainer container = (MarkupContainer) form.get("shares");
    for (Iterator<? extends Component> it = container.iterator(); it.hasNext();) {
        MarkupContainer c = (MarkupContainer) it.next();
        fields.add((TextField<BigDecimal>) c.get("share"));
    }
    return fields;
} 
```

但是，在上述方法中有三个有点难看的强制转换，其中之一 ( `Component`-> `TextField<BigDecimal>`) 会产生“未经检查的强制转换”警告。

如果您可以清理此解决方案，或知道更好的方法，**请随时发表评论或发布其他答案**！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T16:59:41.337

据我所知，您没有在列表视图上设置[重用项目属性；](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/markup/html/list/ListView.html#setReuseItems%28boolean%29)来自java文档：

> 如果窗口根本没有改变或者它被滚动（与分页相比），则重新渲染列表视图更有效。但是，如果您修改 listView 模型对象，则必须手动调用 listView.removeAll() 以重建 ListItems。如果您将 ListView 嵌套在 Form 中，请始终将此属性设置为 true，否则验证将无法正常工作。

[但是，您也可以使用Visitor](http://wicket.apache.org/apidocs/1.5/org/apache/wicket/MarkupContainer.html#visitChildren%28java.lang.Class,%20org.apache.wicket.util.visit.IVisitor%29)遍历列表视图的子项。Wicket 始终跟踪您添加的视图组件。

# ruby - 当资源不属于用户时，如何让用户编辑他们创建的资源而不是其他人？

> ID：10819390
> 
> 赞同：0
> 
> 时间：2012-05-30T15:26:12.910
> 
> 标签：ruby, ruby-on-rails-3, ruby-on-rails-3.1, cancan

在我使用[CanCan](https://github.com/ryanb/cancan)的应用程序中，我拥有用户可以查看和创建商店的权限，但我也希望他们只能编辑他们创建的商店。用户可以创建任意数量的商店，所有商店都应该由他们编辑。商店没有用户，所以当他们没有桌子时我怎么能这样`user_id`做`Store`？

可以可以：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new 
    if user.role == "default"
      can :read, Store
      can :create, Store
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-03T03:30:24.403

由于用户将能够创建任意数量的商店，因此商店将属于用户。

您必须创建这种关系。

所以，在`User`模型中。

```
class User < ActiveRecord::Base
  has_many :stores
end 
```

并在`Store`模型中。

```
class Store < ActiveRecord::Base
   belongs_to :user
end 
```

在`ability.rb`文件中，只需输入以下内容：

```
class Ability
  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)
    if user.role == 'default'
      can :manage, Store , :user_id => user.id
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T22:44:21.243

`User`我同意以前的海报，即您必须在和之间建立关系`Store`。如果商店可以有多个用户，这种关系可以是一对多（如 Kleber S. 所示）或多对多。

然后，处理访问控制的最佳方式是在控制器中，通过使用关联。对于`show`, `edit`, `update`,`destroy`方法，您需要在给定登录用户的情况下找到商店，因此请执行以下操作：

```
class StoresController < ApplicationController
  before_filter :find_store, only: [:show, :edit, :update, :destroy]

  def show
  end

  def edit
  end

  def update
    if @store.update_attributes(params[:store])
      # redirect to show
    else
      # re-render edit, now with errors
    end
  end

  # ...

  private

  def find_store
    @store = current_user.stores.find(params[:id])
  end
end 
```

这样，关联会负责将查找限制为仅连接到`current_user`外键的那些商店。这是 RESTful Rails 资源执行关联资源访问控制的标准方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T20:01:34.287

我会将以下内容添加到商店模型中：

```
has_one :created_by, :class => User 
```

然后添加迁移以将 created_by_id 添加到您的 Store 类。

然后，您应该能够添加 CanCan::Ability：

```
can :edit, Store, :created_by => user 
```

# c# - 具有用户可配置属性“可见性”的对象

> ID：10819395
> 
> 赞同：5
> 
> 时间：2012-05-30T15:26:36.817
> 
> 标签：c#, oop, properties

我有一个带有一堆属性的用户对象。我有一个要求，即当用户设置他们的信息时，他们需要能够说明他们的个人资料的哪些属性对其他人可见。

我设想的方式是添加一个额外的属性 - 一个字符串列表，其中包含公开可见的属性名称。然后我可以实现一个名为 ToPublicView() 的方法或类似的方法，使用反射将非公共属性设置为 null 或默认值。

这是一种合理的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:46:53.947

我认为这是最简单的选项。如果反射开始影响你的表现，你可能需要一个属性委托字典来访问这些值。

而且由于要求不是具有动态属性，而只是标记现有属性，因此以动态方式拥有所有属性（如属性对象列表）是没有意义的。此外，当您必须将它们用于应用程序的其余部分时，将它们作为实际属性将使代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:31:37.037

在这种情况下，如果可能的话，我建议您简单地列出您的属性，例如：

```
public Class Property<T>
{
    public Property(string name, bool visible, T value)
    {
        Name = name;
        Visible = visible;
        Value = value;
    }

    string Name { get; set; }
    bool Visible { get; set; }
    T Value { get; set; }
} 
```

然后你可以像这样创建一个属性列表：

```
List<Property> properties = new List<Property>();
properties.Add(new Property<string>("FirstName", true, "Steve")); 
```

如果您今天需要能够设置可见性，那么明天您可能还需要设置其他元属性。颜色？必需/可选？尺寸？等等。拥有自己的属性类型可以让您在未来轻松扩展它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:41:22.943

可以使用，可能是自定义[DynamicObject](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.aspx)实现的某种组合

**编辑**

```
 //custom property class
  public class MyProperty
  {
      public bool IsVisible { get; set; }
      public string PropertyName { get; set; }
  }

  public class Dymo: DynamicObject
  {

      Dictionary<MyProperty, object> dictionary
          = new Dictionary<MyProperty, object>();

      public override bool TryGetMember(
          GetMemberBinder binder, out object result)
      {
          result = false;
          var prop = PropertyFromName(binder.Name);
          if (prop != null && prop.IsVisible)
              return dictionary.TryGetValue(prop, out result);

          return false;

      }

      public override bool TrySetMember(
          SetMemberBinder binder, object value)
      {

          var prop = PropertyFromName(binder.Name);
          if (prop != null && prop.IsVisible)
              dictionary[prop] = value;
          else
              dictionary[new MyProperty { IsVisible = true, PropertyName = binder.Name}] = value;
          return true;
      }

      private MyProperty PropertyFromName(string name)
      {
          return (from key in dictionary.Keys where key.PropertyName.Equals(name) select key).SingleOrDefault<MyProperty>();
      }

      public void SetPropertyVisibility(string propertyName, bool visibility)
      {
          var prop = PropertyFromName(propertyName);
          if (prop != null)
              prop.IsVisible = visibility;         
      }
  } 
```

并在这样之后使用它。

```
dynamic dynObj = new Dymo();
dynObj.Cartoon= "Mickey" ;
dynObj.SetPropertyVisibility("Mickey", false); //MAKE A PROPERTY "INVISIBLE" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:31:40.643

什么？不。如果这是需求，那么用户属性*不*应该用实际属性来实现，而是使用某种 IEnumerable 和 Property 对象，其中每个 Property 都有其可见性等。

# c++ - C++ 的自动代码风格指南测试

> ID：10819398
> 
> 赞同：12
> 
> 时间：2012-05-30T15:26:40.430
> 
> 标签：c++, code-formatting

> **可能重复：**
> [根据一组编码标准检查 C/C++ 源代码的免费工具？](https://stackoverflow.com/questions/93260/a-free-tool-to-check-c-c-source-code-against-a-set-of-coding-standards)

我正在启动一个 c++ 项目，其中涉及我无法直接访问的几个人。我们就编码风格指南达成一致，例如根据可访问性定义类成员的大小写（即，pascal 情况下的 privates，camel 情况下的 publics 和 protected。请不要开始讨论风格指南。我受够了。谢谢。）。

我现在要做的是生成一些违反样式指南的报告。我不想强制执行样式指南，例如在提交时，但我想提供一个工具，每个开发人员都可以使用它来查看他/她的代码在哪里违反了样式指南（如果他/她想检查它）。

你知道可以完成这项工作的工具吗？

（它需要能够理解一些 C++，例如检测类成员的可访问性。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T18:12:04.763

风格指南往往是特定于公司的，并且必须编写特定于公司的检查才能实现它们。

我的公司提供[可定制的 C++ 样式检查器](http://www.semanticdesigns.com/Products/StyleChecker/CppStyleChecker.html)，其中可以通过语法检查已弃用的惯用语，检查变量和类型是否具有某些属性，或验证某些命令是否在本地以某些顺序出现。这些检查器在源代码上使用 C++ 方言精确解析器。定制并不容易；你需要底层引擎和一些解析 C++ 程序的知识。

可以编写检查布局的规则，但这是很多没有回报的工作，解决此类投诉并不是对程序员资源恕我直言的有效使用。如果你不打算强制执行你的风格，你为什么要抱怨程序员来惹恼程序员呢？IT 似乎更容易（正如另一张海报指出的那样）简单地运行一个布局格式化程序，它可以免费产生正确的结果给程序员。

通用格式化程序的问题之一是语言不精确，它们可能会误解源代码，有时会在格式化时破坏源代码，从而导致编译错误、调试和浪费时间。我们还提供[C++ 格式化程序](http://www.semanticdesigns.com/Products/Formatters/CppFormatter.html)，以使用与样式检查器相同的语言精确解析器来完成格式化；他们无法在重新格式化期间破坏您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:37:30.030

好吧，您可以在提交时通过[AStyle](http://astyle.sourceforge.net/)或[Uncrustify](http://uncrustify.sourceforge.net/)运行您的代码，这至少会将错误代码重新格式化为某种标准。我发现这是代码提交和标准的主要问题 - 如果您在提交后重新格式化，它会显示为许多完全微不足道的增量更改。

否则，请检查其他[SO 答案](https://stackoverflow.com/questions/93260/a-free-tool-to-check-c-c-source-code-against-a-set-of-coding-standards)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T16:08:15.893

我已经成功地使用[vera++](http://www.inspirel.com/vera/)工具为我们的项目执行此操作。我已经编写了许多规则（在 TCL 中）以采用我们的公司风格指南。这有点痛苦，直到我发现了我的检查报告的所有误报。至少它现在运行良好，并且我已将报告集成到 Jenkins 构建分析中。

这些报告也可以很容易地用于 Eclipse IDE 中的自定义错误分析。

# ssh - 我可以通过 ssh 交互式运行程序吗？

> ID：10819399
> 
> 赞同：1
> 
> 时间：2012-05-30T15:26:40.463
> 
> 标签：ssh, interactive

当我 ssh 到一个没有命令的盒子时，它给了我一个交互式 shell。如果我明确地说要运行 bash，它就不能交互地工作。我必须发送中断才能停止。如果我想运行一个像 mysql 这样的交互式程序，我可以在不启动交互式 shell 的情况下执行它吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T15:49:58.273

您需要提供 to`-t`选项`ssh`，该选项分配一个终端，您可以通过该终端与远程命令进行交互。

```
ssh -t host mysql 
```

# ios - 在基于页面的 ios 应用程序中使用按钮翻页？

> ID：10819400
> 
> 赞同：2
> 
> 时间：2012-05-30T15:26:46.507
> 
> 标签：ios, xcode4

在 IOS 开发人员库中，说明说：

> 直接控制显示什么内容，调用`setViewControllers:direction:animated:completion:`方法

这就是我想要做的，但没有成功。

这是我在我的尝试过的`RootViewController.m`：

```
NSLog(@"%s", __FUNCTION__ );
[self.pageViewController setViewControllers:
     [NSArray arrayWithObjects:
        [self.storyboard instantiateViewControllerWithIdentifier:
            @"AlbumPageViewController4"],nil]
            direction:UIPageViewControllerNavigationDirectionForward 
            animated:YES completion:nil]; 
```

我知道 AlbumPageViewController.m 按钮正在调用它，因为它显示在 NSLog 中。但是什么也没发生，没有崩溃，没有错误，没有页面卷曲。我的脊椎位置是 UIPageViewControllerSpineLocationMin 所以我想我只需要传递 1 个视图控制器。

我已经尝试了2，但这也不起作用。

就像文档说的那样，我怎样才能有一个按钮让我“让用户跳转到内容中的特定位置”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T19:23:32.300

直接从不同的类调用 RootViewController 中的函数是行不通的。所有的 self.anything 都是零。
在设置了一些委托并让 RootViewController 监听并响应另一个类之后，代码就可以正常工作了。

# .net - 关于如何将字符串从 Excel 工作表传递到命令行工具的建议

> ID：10819401
> 
> 赞同：0
> 
> 时间：2012-05-30T15:26:47.583
> 
> 标签：.net, excel, batch-file

所以我有一个疯狂的想法，将字符串从 excel 表传递到命令行工具，以进行数据完整性测试。

假设我有一张这样设置的表格：

```
 A        B        C        D         E
1 ID       First    Last     Position  IP

2 312      George   Foreman  CEO       999.22.3.1

3 443      Billy    Mays     Mailroom  999.12.5.2

4 243      Sugar    Ray      CFO       999.55.2.1
...
n 999      Betty    Crocker  Boss      999.21.0.1 
```

我想传递给我的命令行工具的参数是 E (IP)。

我想以这种形式传递我的参数：

```
C:\User> Program.cmd IP 
```

例如

```
C:\User> Program.cmd 999.55.2.1 
```

解决这个问题的最佳方法是什么？我一直在尝试编写批处理脚本，但无法提取我想要的字符串。我应该把它吸起来并用 C# 或 Java 来做，还是有不同的方法（我很好奇，因为我似乎找不到一个范例，我真的很想了解更多关于批处理）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:32:41.493

我看不出为什么你不能编写一个使用 shell 调用 exe 的宏。见[http://dmcritchie.mvps.org/excel/shell.htm](http://dmcritchie.mvps.org/excel/shell.htm)

# java - 使用 TestNG 调用 JUnit 测试

> ID：10819406
> 
> 赞同：4
> 
> 时间：2012-05-30T15:27:02.167
> 
> 标签：java, junit, testng

有没有使用 TestNG 调用 JUnit 测试？我尝试使用

```
<test name="JunitTest" preserve-order="true" junit="true">
    <classes>
      <class name="com.*****.testautomation.AllTests"/>
    </classes>
</test> 
```

其中 AllTests 是 JUnit 测试套件。

它给了我以下错误

```
org.testng.TestNGException: 
Failure in JUnit mode for class com.*****.testautomation.AllTests: could not create/run JUnit test suite: 
Cannot find JUnit method class junit.framework.TestSuite$1.warning
    at org.testng.junit.JUnitTestRunner.runFailed(JUnitTestRunner.java:237)
    at org.testng.junit.JUnitTestRunner.start(JUnitTestRunner.java:230)
    at org.testng.junit.JUnitTestRunner.run(JUnitTestRunner.java:211)
    at org.testng.TestRunner$1.run(TestRunner.java:672)
    at org.testng.TestRunner.runWorkers(TestRunner.java:1003)
    at org.testng.TestRunner.privateRunJUnit(TestRunner.java:703)
    at org.testng.TestRunner.run(TestRunner.java:610)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:87)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1137)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1062)
    at org.testng.TestNG.run(TestNG.java:974)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:109)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:202)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:173) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T19:58:20.233

我有这个问题。我将 junit='true' 更改为 false 并且 testng 没有尝试在 junit 兼容模式下运行。

```
 <test name="Junit tests" junit="false"> 
```

# android - 检查后复选框错误不会消失

> ID：10819409
> 
> 赞同：4
> 
> 时间：2012-05-30T15:27:10.163
> 
> 标签：android, forms, validation, android-layout, checkbox

在我的表单中，我有一个 CeckBox 并且需要检查它才能提交。如果未选中，我调用 setError() 来警告用户。但是，一旦显示错误，无论是否选中复选框，它都不会消失。另一个错误是，如果错误文本很长，它会显得不完整。在横向模式下，它看起来很完整。

复选框 xml：

```
<CheckBox 
        android:id="@+id/reg_terms"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Li e concordo com os Termos de Uso."
        android:focusableInTouchMode="true"
        android:focusable="true"
        android:textColor="#000000"
        android:checked="false"
        /> 
```

验证（在 submitButtons 的 onClick 内）：

```
if(!reg_terms.isChecked()){
  reg_terms.setError("É preciso aceitar os Termos de Uso");
  validation = false;
  } 
```

如果用户选中该框，我可以使用任何“addOnFocusChangedListener”方法来“消除”错误吗？我怎样才能避免错误文本显得不完整？

Viele danke für alle Hilfe。:D

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:50:27.663

至于清除错误，您可以像这样添加 OnCheckedChangeListener：

```
reg_terms.setOnCheckedChangeListener(new OnCheckedChangeListener() {
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        if ( isChecked ) {
            reg_terms.setError(null);
        } else {
            reg_terms.setError("É preciso aceitar os Termos de Uso");
        }
    }
}); 
```

就个人而言，我也会将字符串提取到您的 R.strings 中，并在 XML 和代码中引用它。

对于文本换行，请尝试添加`reg_terms.setMaxLines(2)`到您的代码以允许文本最多填充 2 行。我不确定这是否可行，但值得一试。

# java - HDFS 保证从文件读/写数据

> ID：10819411
> 
> 赞同：0
> 
> 时间：2012-05-30T15:27:19.823
> 
> 标签：java, file-io, hadoop, hdfs

一旦生产者完成对 HDFS 中文件的写入，我们希望保证消费者进程读取生产者创建的数据。以下是我们正在努力改进的应用程序中使用的一种方法。

制片人：

```
private void produce(String file, int sleepSeconds) throws Exception {
        Configuration conf = new Configuration();
        conf.addResource(new Path(
                "C:\\dev\\software\\hadoop-0.22.0-src\\conf\\core-site.xml"));
        conf.set("fs.defaultFS", "hdfs://XXX:9000");
        FileSystem fileSystem = FileSystem.get(conf);

        Path path = new Path(file);
        if (fileSystem.exists(path)) {
            fileSystem.delete(path, false);
        }
        System.out.println("Creating file");
        FSDataOutputStream out = fileSystem.create(path);
        System.out.println("Writing data");
        out.writeUTF("--data--");
        System.out.println("Sleeping");
        Thread.sleep(sleepSeconds * 1000L);
        System.out.println("Writing data");
        out.writeUTF("--data--");
        System.out.println("Flushing");
        out.flush();
        out.close();
        fileSystem.close();
        System.out.println("Releasing lock on file");
    } 
```

消费者：

```
private void consume(String file) throws Exception {
        Configuration conf = new Configuration();
        conf.addResource(new Path(
                "C:\\dev\\software\\hadoop-0.22.0-src\\conf\\core-site.xml"));
        conf.set("fs.defaultFS", "hdfs://XXX:9000");
        FileSystem fileSystem = FileSystem.get(conf);

        Path path = new Path(file);
        if (fileSystem.exists(path)) {
            System.out.println("File exists");
        } else {
            System.out.println("File doesn't exist");
            return;
        }
        FSDataOutputStream fsOut = null;
        while (fsOut == null) {
            try {
                fsOut = fileSystem.append(path);
            } catch (IOException e) {
                Thread.sleep(1000);
            }
        }
        FSDataInputStream in = fileSystem.open(path);
        OutputStream out = new BufferedOutputStream(System.out);
        byte[] b = new byte[1024];
        int numBytes = 0;
        while ((numBytes = in.read(b)) > 0) {
            out.write(b, 0, numBytes);
        }
        in.close();
        out.close();
        if (fsOut != null)
            fsOut.close();
        fileSystem.close();
        System.out.println("Releasing lock on file");
    } 
```

流程应如何运行的要求如下：

1.  生产者进程（不是线程）已启动。thread.sleep 模拟了一堆数据库调用和业务逻辑

2.  消费者进程（不是线程）在另一台机器上启动，该机器会阻塞直到生产者释放它的锁。消费者读取时，其他进程不应修改数据文件

关于我们如何改进此代码/设计的任何建议，同时使用 HDFS java API 保证阅读器不会丢失数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:27:40.307

一种解决方案是使用临时后缀 / 前缀写入文件，并在写入完成后重命名文件：

例如输出到文件 file1.txt：

*   写入名为`.file1.txt`或的文件`file1.txt.tmp`
*   完成后关闭文件
*   `file1.txt.tmp`重命名 .file1.txt 或`file1.txt`
*   与此同时，消费者正在等待`file1.txt`可用

# php - 网站中使用的 PHP 代码返回用户的网络 IP，而不是公共 IP

> ID：10819412
> 
> 赞同：1
> 
> 时间：2012-05-30T15:27:33.567
> 
> 标签：php, ip-address

我有应该检测用户 IP 地址的 PHP 代码。下面的代码返回一个 IP 地址，但该 IP 地址有时是本地网络 IP（例如 10.0.0.1）而不是公共 IP。如何确保始终获得公共 IP？谢谢。顺便说一句，这段代码来自另一个 StackOverflow 帖子。此外，此代码用于通过 Internet 从完全独立的网络访问的网站，而不是我的 Apache Web 服务器。

```
if (isset($_SERVER["HTTP_CLIENT_IP"])){  
  $ip = $_SERVER["HTTP_CLIENT_IP"];  
} elseif (isset($_SERVER["HTTP_X_FORWARDED_FOR"])){  
  $ip = $_SERVER["HTTP_X_FORWARDED_FOR"];  
} elseif (isset($_SERVER["HTTP_X_FORWARDED"])){  
  $ip = $_SERVER["HTTP_X_FORWARDED"];  
} elseif (isset($_SERVER["HTTP_FORWARDED_FOR"])){  
  $ip = $_SERVER["HTTP_FORWARDED_FOR"];  
} elseif (isset($_SERVER["HTTP_FORWARDED"])){  
  $ip = $_SERVER["HTTP_FORWARDED"];  
} else {   
  $ip = $_SERVER["REMOTE_ADDR"];  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:57:19.713

消除所有`if(){} else{}`代码，只需请求`REMOTE_ADDR`：

```
 $ip =  $_SERVER["REMOTE_ADDR"]; 
```

它是用户远程 IP 地址的唯一可靠来源，因为`_SERVER`客户端可以屏蔽所有其他密钥。

如果 IP 地址仍然是本地的（并且您确定您正在与不在网络中或在本地 VPN 上的客户端打交道），那么您可能正在与服务器缓存系统（例如 Squid 代理）打交道。看看[http://www.nineteenlabs.com/2007/08/24/high-anonymous-proxy-squid-25/](http://www.nineteenlabs.com/2007/08/24/high-anonymous-proxy-squid-25/)

# c# - 使用 ScintillaNET 自定义高亮

> ID：10819414
> 
> 赞同：1
> 
> 时间：2012-05-30T15:27:41.120
> 
> 标签：c#, xml, winforms, syntax-highlighting, scintilla

在我的 winforms 应用程序中，我将创建一个自定义语法突出显示，所以我制作了这个 xml：

```
<ScintillaNET>
  <Language Name="default">
    <Styles>
      <Style Name="Default" FontName="Consolas"/>
    </Styles>
  </Language>

  <Language Name="customSql">
    <Lexer LineCommentPrefix="--" StreamCommentPrefix="/* " StreamCommentSuffix=" /*" LexerName="customSql" >
      <Keywords List="0">
        Data Source Initial Catalog User Id Password Database Server Trusted_Connection
        Integrated Security Network Library User Instance AttachDbFilename Failover Partner
        Asynchronous Processing Uid Pwd Provider SSPI
      </Keywords>
    </Lexer>

    <Styles>
      <Sytle Name="CHARACTER" ForeColor="Black"/>
      <Sytle Name="NUMBER" ForeColor="Red" />
    </Styles>
  </Language>
</ScintillaNET> 
```

对我来说看起来不错。在我的应用程序中，我将语言和其他属性设置为：

```
myC.ConfigurationManager.Language = "customSql";
myC.ConfigurationManager.CustomLocation = Global.Path + @"Resources\ScintillaNET.xml";
myC.ConfigurationManager.Configure(); 
```

我不明白为什么这仍然不起作用。我也不例外，只是文字保持黑色。有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T17:39:14.843

也许是因为您将 ForeColor 设置为 Black，但从未将 BackColor 设置为黑色以外的其他颜色？

# wcf - 如果调用 Get() 方法，WCF TestClient 会出错

> ID：10819416
> 
> 赞同：0
> 
> 时间：2012-05-30T15:27:58.063
> 
> 标签：wcf

我正在处理 WCF 测试的问题。我有一个**CategorieService** WCF 服务.. 查看图片[http://i.stack.imgur.com/1Wbg1.jpg通过](http://i.stack.imgur.com/1Wbg1.jpg)*netTcpBinding* 共享它一切正常（所有方法都被正确调用）除了 GetAll() GetById() 方法. 它引发异常...查看详细信息[http://i.stack.imgur.com/I60vt.jpg](http://i.stack.imgur.com/I60vt.jpg)

这是*App.config*文件

```
<system.serviceModel>
    <diagnostics>
      <messageLogging logEntireMessage="true" logMalformedMessages="true"
        logMessagesAtTransportLevel="true" />
      <endToEndTracing activityTracing="true" />
    </diagnostics>
    <services>
      <service name="Services.CategorieService">
        <clear />
        <endpoint binding="mexHttpBinding" contract="IMetadataExchange"
          listenUriMode="Explicit">
          <identity>
            <dns value="localhost" />
            <certificateReference storeName="My" storeLocation="LocalMachine"
              x509FindType="FindBySubjectDistinguishedName" />
          </identity>
        </endpoint>
        <endpoint address="net.tcp://localhost:8888/myservice" binding="netTcpBinding"
          bindingConfiguration="" contract="Services.ICategorieService" />
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8732/Service1/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True"/>
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:47:30.353

我正在使用带有 DbContext 连接的 POCO 实体。ProxyCreation 选项必须设置为`this.Configuration.ProxyCreationEnabled = false;`

# xaml - SemanticZoom 不优雅

> ID：10819422
> 
> 赞同：0
> 
> 时间：2012-05-30T15:28:11.897
> 
> 标签：xaml, microsoft-metro

我在我的项目中使用 SemanticZoom。它工作正常，但处理不当。我该怎么做才能使其工作更顺畅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:09:03.253

由于您的问题非常模糊，我可以给您的一般建议是使放大和缩小的视图在结构上相似。例如，如果您的放大视图显示一个大部分水平的 GridView，那么您的缩小视图应该显示一个类似结构的水平布局。考虑 Windows 8 中的“开始”菜单。如果缩小的视图显示垂直堆叠的分组图标，则会出现失败 - 这在视觉上会很刺眼。最佳实践是在视图之间保持一致，只是改变上下文。

如果您的意思是动画的性能，那么您的两个视图的复杂性可能超出您在硬件上合理显示的程度。很高兴您在硬件上发现了这一点，而不是您的用户在他们的硬件上发现了它。除了分解您的两个视图并重新考虑整体设计的复杂性之外，没有真正的解决方案。在执行此操作之前，请测试一组简单的视图并查看。

语义缩放应该易于用户理解。更重要的是，您应该使用它，因为它是 Metro 应用程序的常规部分，用户期望它是正确的。动画的执行是基于硬件的，所以你应该有一个流畅的过渡。然而，并不是所有的硬件都是平等的，所以不要挑战极限——只要做一个优秀的应用程序。

# python - 将列表拆分为字符串

> ID：10819429
> 
> 赞同：1
> 
> 时间：2012-05-30T15:28:18.830
> 
> 标签：python, list

这是我的清单：

```
animals = ['dog', 'cat', 'mouse'] 
```

我想拆分它，所以我最终得到一个包含列表中三个字符串的字符串，如下所示：

```
dog/cat/mouse 
```

我尝试使用以下代码，但它只打印原始列表：

```
print [e.split('/')[0] for e in animals] 
```

哪里不对了？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T15:29:38.587

你不想`split`你想`join`，莫名其妙地逆向操作。

```
animals = ['dog', 'cat', 'mouse']
"/".join(animals) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:53:53.840

加入效果很好。

如果你有一个固定的字符串，你想用固定数量的列表元素填充，你也可以这样做：

```
>>> '{}+{}-{}'.format(*(t for t in animals))
'dog+cat-mouse' 
```

# jasper-reports - 在一份报告中使用所有输入控件

> ID：10819430
> 
> 赞同：0
> 
> 时间：2012-05-30T15:28:21.537
> 
> 标签：jasper-reports, ireport, jasperserver

我有一个使用输入控件查询的报告。它是特定 ID 的下拉菜单（即 28、13、30...）我想知道是否可以让我的报告通过每个参数并一次填充一页报告他们每个人。

这是我希望报告循环遍历的不同参数的示例： ![这是我希望报告循环的不同参数的示例](../Images/f5d74de0a564bdbc7a726aa67daef592.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T23:33:01.243

您想为所有合作伙伴 ID 创建一个页面吗？还是仅针对用户选择的合作伙伴 ID？任何一个都是可能的。

使用所有合作伙伴 ID 可能更容易。修改您的报告查询，它可能具有类似`WHERE partner_id = $P{partnerID}`. 删除 where 子句。向查询中添加分组和排序以根据合作伙伴 ID 分组。每个组都可以在新页面上开始。现在你根本不需要参数。

如果您希望用户选择合作伙伴 ID，那么您需要使用多选输入控件，而不是您现在使用的单选输入控件。更新您的查询以使用如下内容：`WHERE $X{IN, partner_id, partnerID}`. 如上所述添加分组和排序。

# javascript - JS .replace 将 b 标记放在字符串中，其中 == 字符串

> ID：10819435
> 
> 赞同：-4
> 
> 时间：2012-05-30T15:28:51.147
> 
> 标签：javascript, regex, replace

> **可能重复：**
> [JavaScript 中不区分大小写的字符串替换？](https://stackoverflow.com/questions/280793/case-insensitive-string-replacement-in-javascript)

我试图突出显示字符串中等于另一个变量值的部分。

例如

```
var string = 'This Is A Test String';
var findWord = 'test'; 
```

结果应该是

```
'This Is A <b>Test</b> String' 
```

请注意不区分大小写，我需要使用变量来传递“查找/替换单词”

我需要这样做的原因是为了将找到的字符串的确切形式/大小写保留在 == 到搜索词中。

在 PHP 中，这是可行的，所以基本上我在 JS 之后

```
preg_replace('/('.$search.')/i','<b>$1</b>',$val['name']) 
```

我对正则表达式不好，这对某人来说应该很简单。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:33:00.933

我建议：

```
var string = "This is a test string.",
needle = "test",
re = new RegExp(needle, "gi"),
newString = string.replace(re, "<strong>" + needle + "</strong>");
console.log(newString); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FVz2D/)。

请注意，我使用`<strong></strong>`而不是`<b></b>`（故意），当然，您可以使用您喜欢的任何元素类型。此外，`gi`标志：

*   `g`用于全局搜索，而不是简单地在第一次匹配时停止，并且
*   `i`是不区分大小写的，所以`'test'`会匹配`Test`，`tESt`依此类推...

* * *

**编辑**以保留匹配字符串/子字符串的大写：

```
var string = "This is a Test string.",
    needle = "test",
    re = new RegExp(needle, "gi"),
    newString = string.replace(re, function(a,b){
        return "<strong>" + a + "</strong>";
    });

document.getElementById('input').appendChild(document.createTextNode(string));
document.getElementById('result').innerHTML = newString; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FVz2D/1/)。

* * *

**编辑**以创建更实用/可重用的方法：

```
function formatMatches(el, needle, wrapper) {
    if (!el || !needle) {
        return false;
    }
    else {
        var re = new RegExp(needle, "gi"),
            haystack = el.textContent,
            o = '<' + wrapper + '>',
            c = '</' + wrapper + '>';
        return haystack.replace(re, function(a) {
            return o + a + c;
        });
    }
}

var needle = "test",
    el = document.getElementById('input'),
    wrapper = 'strong';

document.getElementById('result').innerHTML = formatMatches(el, needle, wrapper); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FVz2D/2/)。

参考：

*   [`node.appendChild()`](https://developer.mozilla.org/en/DOM/element.appendChild).
*   [`document.createTextNode()`](https://developer.mozilla.org/en/DOM%3adocument.createTextNode).
*   [`RegExp()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp).
*   [`string.replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:36:24.783

```
var str = 'This Is A Test String';
var w = 'test';

var result = str.replace(new RegExp(w, 'gi'), function(match) {
  return "<b>" + match + "</b>";
}); 
```

编辑：或者，正如评论所建议的，最后一行可以替换为：

```
var result = str.replace(new RegExp(w, 'gi'), "<b>$&</b>"); 
```

# c - C中浮点数的定点运算的位移位

> ID：10819436
> 
> 赞同：1
> 
> 时间：2012-05-30T15:28:53.170
> 
> 标签：c, floating-point, bit-shift, fixed-point

我编写了以下测试代码来检查定点算术和位移。

```
void main(){
    float x = 2;
    float y = 3;
    float z = 1;
    unsigned int * px = (unsigned int *) (& x);
    unsigned int * py = (unsigned int *) (& y);
    unsigned int * pz = (unsigned int *) (& z);
    *px <<= 1;
    *py <<= 1;
    *pz <<= 1;
    *pz =*px + *py;
    *px >>= 1;
    *py >>= 1;
    *pz >>= 1;
    printf("%f %f %f\n",x,y,z);
  } 
```

结果是 2.000000 3.000000 0.000000

为什么最后一个数字是 0？我期待看到 5.000000 我想使用某种定点算法来绕过在图像处理应用程序上使用浮点数。将浮点数组转换为整数的最佳/最简单/最有效的方法是什么？上面的“欺骗编译器”是一种强大的解决方法吗？有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:36:19.620

如果你想使用定点，不要使用类型' `float`'或' `double`'，因为它们有内部结构。浮点数和双精度数具有特定的符号位；一些位代表指数，一些位代表尾数（看看[这里](http://en.wikipedia.org/wiki/Single-precision_floating-point_format)的彩色图像）；所以它们本质上是浮点数。

您应该手动编程定点以整数类型存储数据，或者使用一些定点库（或语言扩展）。

有在 GCC 中实现的浮点扩展的描述：http: [//gcc.gnu.org/onlinedocs/gcc/Fixed_002dPoint.html](http://gcc.gnu.org/onlinedocs/gcc/Fixed_002dPoint.html)

有一些基于 MACRO 的 C 定点手动实现：[http ://www.eetimes.com/discussion/other/4024639/Fixed-point-math-in-C](http://www.eetimes.com/discussion/other/4024639/Fixed-point-math-in-C)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:58:51.290

你所做的是对数字的残酷对待。

首先，将值分配给浮点变量。它们的存储方式取决于系统，但通常使用[IEEE 754 格式](http://en.wikipedia.org/wiki/IEEE_754-2008)。所以你的变量内部看起来像

```
x = 2.0 = 1 * 2^1   : sign = 0, mantissa = 1,   exponent = 1 -> 0 10000000 00000000000000000000000 = 0x40000000
y = 3.0 = 1.5 * 2^1 : sign = 0, mantissa = 1.5, exponent = 1 -> 0 10000000 10000000000000000000000 = 0x40400000
z = 1.0 = 1 * 2^0   : sign = 0, mantissa = 1,   exponent = 0 -> 0 01111111 00000000000000000000000 = 0x3F800000 
```

如果对这些数字进行一些位移操作，就会混淆符号、指数和尾数之间的边界，因此任何事情都可能发生、可能发生并且将会发生。

在你的情况下：

*   你的 2.0 变成 0x80000000，导致 -0.0，
*   你的 3.0 变成 0x80800000，导致 -1.1754943508222875e-38，
*   你的 1.0 变成 0x7F000000，导致 1.7014118346046923e+38。

后者你通过添加 -0.0 和 -1.1754943508222875e-38 来丢失，它变成了后者，即 0x80800000，这应该是，在再次将其 >> 1, 3.0 之后。我不知道为什么不是，可能是因为我在这里犯了一个错误。

剩下的就是你不能对浮点数进行位移以期望得到可靠的结果。

我会考虑将它们转换为 ARM 上的整数或其他定点，然后按原样通过线路发送它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T16:06:19.273

您的编译器很可能对`float`s 使用 IEEE 754 格式，按位计算，如下所示：

```
SEEEEEEEEFFFFFFFFFFFFFFFFFFFFFFF
^ bit 31                       ^ bit 0 
```

`S`是符号位 s = 1 意味着数字是负数。

`E`位是指数。有 8 个指数位给出 0 - 255 的范围，**但**指数是有偏差的 - 您需要减去 127 才能获得真正的指数。

`F`位是小数部分，但是，您需要在前面想象一个不可见的 1，因此小数始终为 1.something，您所看到的只是二进制小数位。

数字 2 是 1 x 2 ¹ = 1 x 2 ^(128 - 127)所以编码为

```
01000000000000000000000000000000 
```

因此，如果您使用位移位将其向右移动，您会得到

```
10000000000000000000000000000000 
```

按照惯例，在 IEEE754 中是 -0，所以不是将您的数字乘以 2，而是您的班次将其设为零。

数字 3 是 [1 + 0.5] x 2 ^(128 - 127)

这表示为

```
01000000010000000000000000000000 
```

向左移动会给你

```
10000000100000000000000000000000 
```

这是 -1 x 2 ^(-126)或一些非常小的数字。

你可以对 z 做同样​​的事情，但你可能会认为移位只会搞砸浮点数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T15:44:19.097

固定点不是这样工作的。你想要做的是这样的：

```
void main(){
    // initing 8bit fixed point numbers
    unsigned int x = 2 << 8;
    unsigned int y = 3 << 8;
    unsigned int z = 1 << 8;

    // adding two numbers
    unsigned int a = x + y;

    // multiplying two numbers with fixed point adjustment
    unsigned int b = (x * y) >> 8;

    // use numbers
    printf("%d %d\n", a >> 8, b >> 8);
  } 
```

# asp.net-mvc-3 - 使用 mvc 3 瞥见对象空引用错误

> ID：10819440
> 
> 赞同：1
> 
> 时间：2012-05-30T15:29:17.713
> 
> 标签：asp.net-mvc-3, glimpse

在打开“异常中断”的 Visual Studio 中，我看到引发了以下异常（对象引用为空） - 请参阅下面的调用堆栈。

这发生在我的控制器方法被命中之前。任何想法为什么会发生这种情况？

我正在使用 Asp.net mvc3 和 glimpse.mvc3 的 0.87.0.0 版本。

> Glimpse.Core.DLL!Glimpse.Core.Extensions.HttpContextBaseExtensions.GetGlimpseRequestId(System.Web.HttpContextBase context = {System.Web.HttpContextWrapper}) + 0x55 字节
> Glimpse.Core.DLL!Glimpse.Core.Module.BeginRequest(System. Web.HttpContextBase 上下文 = {System.Web.HttpContextWrapper}) + 0xad 字节
> Glimpse.Core.DLL!Glimpse.Core.Module.OnBeginRequest(object sender = {ASP.global_asax}, System.EventArgs e = {System.EventArgs}) + 0x7e 字节
> System.Web.dll!System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() + 0x95 字节
> System.Web.dll!System.Web.HttpApplication.ExecuteStep(System.Web.HttpApplication.IExecutionStep step = {System.Web.HttpApplication.SyncEventExecutionStep}, ref bool completedSynchronously = false) + 0x4c 字节
> System.Web.dll!System. Web.HttpApplication.PipelineStepManager.ResumeSteps(System.Exception 错误) + 0x39f 字节 System.Web.dll!System.Web.HttpApplication.BeginProcessRequestNotification(System.Web.HttpContext 上下文，System.AsyncCallback cb) + 0x5a 字节 System.Web.dll !System.Web.HttpRuntime.ProcessRequestNotificationPrivate(System.Web.Hosting.IIS7WorkerRequest wr = {System.Web.Hosting.IIS7WorkerRequest}, System.Web.HttpContext context = {System.Web.HttpContext}) + 0xbe 字节
> System.Web.dll!System.Web.Hosting.PipelineRuntime.ProcessRequestNotificationHelper(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext = 543781828, System.IntPtr moduleData, int flags) + 0x247 bytes System.Web.dll!System.Web.Hosting .PipelineRuntime.ProcessRequestNotification(System.IntPtr managedHttpContext, System.IntPtr nativeRequestContext, System.IntPtr moduleData, int flags) + 0x29 字节

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:04:08.630

是的，我在 vs2011 beta 的 Intellitrace 中也看到了它；我不担心 :o) 我认为您可以通过访问 http://localhost/glimpse.axd 并打开 glimpse 来阻止它。这会设置 cookie 并找到 id。没有例外...

反正这是我的猜测..

干杯，哦

# build - 使用 T4ToolBox 在构建上应用 .tt

> ID：10819443
> 
> 赞同：4
> 
> 时间：2012-05-30T15:29:32.253
> 
> 标签：build, transform, t4-toolbox

很长一段时间以来，我的解决方案中都有一些 .tt 文件。我最近决定在构建时通过添加到我的 csproj 来启动转换：

```
<PropertyGroup>
    <TransformOnBuild>true</TransformOnBuild>
    <TransformOutOfDateOnly>false</TransformOutOfDateOnly>  
</PropertyGroup> 
```

我有一个第一个 .tt 文件（First.tt），其中包括来自同一解决方案的另一个项目的第二个 .tt 文件（Second.tt）：

```
<#@ include file="..\SecondProject\Second.tt" #> 
```

在 Second.tt 中，我包括 T4Toolbox.tt ：

```
<#@ include file="T4Toolbox.tt" #> 
```

当我使用右键单击启动 First.tt -> 运行自定义工具时，一切正常。但是当我重建解决方案时，我收到此错误： **Failed to resolve include text for file:E:\Dev\MySolution\FirstProject..\SecondProject\T4Toolbox.tt**

所以我尝试使用 T4ToolBox.tt 的安装路径：

```
 <#@ include file="C:\Program Files\T4 Toolbox\T4Toolbox.tt" #> 
```

但是我遇到了另一个错误：**找不到名为“dte”的指令的名为“T4Toolbox.DteProcessor”的处理器**

如果有人可以提供帮助，那就太好了！

编辑：我没有成功，但它更好。我删除了 Second.tt 中的根路径，并将以下几行添加到 FirstProject 的 csproj 中：

```
<PropertyGroup>    
    <IncludeFolders>C:\Program Files\T4 Toolbox</IncludeFolders>
</PropertyGroup>
<DirectiveProcessor Include="T4Toolbox.DteProcessor" >
    <Class>T4Toolbox.DteProcessor</Class>
    <CodeBase>C:\Program Files\T4 Toolbox\Bin\T4Toolbox.10.0.dll</CodeBase>
</DirectiveProcessor>
<DirectiveProcessor Include="T4Toolbox.TransformationContextProcessor" >
    <Class>T4Toolbox.TransformationContextProcessor</Class>
    <CodeBase>C:\Program Files\T4 Toolbox\Bin\T4Toolbox.10.0.dll</CodeBase>
</DirectiveProcessor> 
```

当我尝试构建时，找到了 dte 处理器，但仍然出现错误：运行转换代码时抛出异常。该过程无法继续。引发了以下异常：

```
System.NullReferenceException: Object reference not set to an instance of an object.
   at T4Toolbox.DteProcessor.UpdateFiles(ICollection`1 outputFiles)
   at T4Toolbox.OutputManager.UpdateFiles()
   at System.AppDomain.DoCallBack(CrossAppDomainDelegate callBackDelegate)
   at System.AppDomain.DoCallBack(CrossAppDomainDelegate callBackDelegate)
   at T4Toolbox.TransformationContext.OnTransformationEnded(TextTransformation transformation)
   at Microsoft.VisualStudio.TextTemplating7C4960D0E15B020F44790E9542C211BF.GeneratedTextTransformation.Dispose(Boolean disposing) in E:\Dev\MySolution\FirstProject\First.tt:line 18
   at Microsoft.VisualStudio.TextTemplating.TextTransformation.Dispose()
   at Microsoft.VisualStudio.TextTemplating.TransformationRunner.RunTransformation(TemplateProcessingSession session, String source, ITextTemplatingEngineHost host, String& result). Line=0, Column=0  E:\Dev\Tools\Microsoft\Microsoft.TextTemplating.targets 397 5   FirstProject 
```

# php - Winbinder not working with PHP 5.4?

> ID：10819444
> 
> 赞同：3
> 
> 时间：2012-05-30T15:29:38.447
> 
> 标签：php, winbinder

I've been making a lot of console apps in PHP, but now I'm wanting to try making an actual Windows program.

Since WinBinder is pretty much *the* extension to do this, I went ahead and downloaded it. I put the DLL in the extension folder and added its entry to the php.ini file.

But when I try to run a simple test (`php -r "echo 'Test';"`) I get the following error:

```
Warning: PHP Startup: winbinder: Unable to initialize module
Module compiled with module API=20090626
PHP    compiled with module API=20100525
These options need to match
 in Unknown on line 0 
```

I really have no idea what this means, nor what to do about it. Any help resolving this error, or advice for a different extension, would be much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:28:34.890

You can find Winbinder for PHP 5.4 here: [https://github.com/stefan-loewe/WinBinder](https://github.com/stefan-loewe/WinBinder)

There is no thing prevent you from developing desktop application using PHP.

# python - Django 模板标签导入错误

> ID：10819446
> 
> 赞同：0
> 
> 时间：2012-05-30T15:29:44.517
> 
> 标签：python, django, django-templates

我一直在努力解决这个问题，但似乎无法弄清楚。我有一个带有一组自定义模板标签的应用程序：

```
from django import template
from crowd.models import Payment, Project, ProjectCategory

register = template.Library()

@register.filter
def is_customer(user, project):
   try:
      return Payment.objects.filter(user=user, project=project).count() > 0
   except:
      return False 
```

抛出：

```
'project_tags' is not a valid tag library: ImportError raised loading crowd.templatetags.project_tags: No module named models 
```

应用程序树如下所示：

```
crowd/
   -- __init__.py
   -- models.py
   templatetags/
      -- __init__.py
      -- project_tags.py 
```

从模型和 crowd.models 导入都给了我同样的错误。

追溯：[这里](http://pastebin.com/6JYPT5qF)

## 更新

当我注意到它被破坏时，我正在做一些不相关的事情，所以我恢复到该项目的早期已知工作版本。仍然是同样的问题，所以我认为 Daniels 关于 PYTHONPATH 的回答是正确的，但是，我该如何修复呢？

```
>>> import sys
>>> sys.path
['/Users/****/Documents/dev/product/src/Product', ...] 
```

__init__.py 一直都在那里，并且人群在 Product 中，所以它不应该在路上吗？

## 更新 2

我在shell中做了一些调查：

```
>>> from crowd.models import *
>>> from crowd.managers import *
>>> from crowd.constants import *
>>> from crowd.templatetags import *
>>> from crowd.templatetags import project_tags
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Users/Murph/Documents/dev/product/src/Product/crowd/templatetags/project_tags.py", line 4, in <module>
    from crowd.forms import SearchForm
  File "/Users/Murph/Documents/dev/product/src/Product/crowd/forms.py", line 5, in <module>
    from crowd.models import Payment, Project, ProjectUpdate, GalleryPhoto
ImportError: No module named models
>>> 
```

仍然不知道*为什么*具体会失败，特别是因为一揽子导入有效。

## 更新 3

我花了一段时间才发现 shell 命令提供了比 django 更有用的消息，这导致了这一点：

事实证明它甚至与 project_tags 没有直接关系，它只是不是一个非常有用的错误消息。project_tags.py 中的导入：

```
 from crowd.forms import SearchForm 
```

正在打电话：

```
from crowd.models import Payment, Project, RewardLevel, ProjectUpdate, GalleryPhoto 
```

在 forms.py 中，应该是：

```
from models import Payment, Project, RewardLevel, ProjectUpdate, GalleryPhoto 
```

我会尽可能将其添加为答案，显然要等到 8 小时后才能添加。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:48:44.110

您的`crowd`应用程序本身可能不在您的 Pythonpath 上。要么添加它，要么从项目中导入：`from myproject.crowd.models import Foo, Bar`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:37:56.253

我花了一段时间才发现 shell 命令提供了比 django 更有用的消息，这导致了这一点：

事实证明它甚至与 project_tags 没有直接关系，它只是不是一个非常有用的错误消息。project_tags.py 中的导入：

```
 from crowd.forms import SearchForm 
```

正在打电话：

```
from crowdfunder.models import Payment, Project, RewardLevel, ProjectUpdate, GalleryPhoto 
```

在 forms.py 中，应该是：

```
from models import Payment, Project, RewardLevel, ProjectUpdate, GalleryPhoto 
```

# python - 在 python 多处理中查找异常

> ID：10819447
> 
> 赞同：6
> 
> 时间：2012-05-30T15:29:46.807
> 
> 标签：python, multithreading, multiprocessing, stack-trace

我有一些看起来像这样的python代码：

```
procs = cpu_count()-1
if serial or procs == 1:
    results = map(do_experiment, experiments)
else:
    pool = Pool(processes=procs)     
    results = pool.map(do_experiment, experiments) 
```

当我设置`serial`标志时它运行良好，但在使用时它会给出以下错误`Pool`。当我尝试`do_experiment`从无到有打印某些东西时，我无法尝试/捕捉那里并打印堆栈跟踪。

```
Exception in thread Thread-2:
Traceback (most recent call last):
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 530, in __bootstrap_inner
    self.run()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 483, in run
    self.__target(*self.__args, **self.__kwargs)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/multiprocessing/pool.py", line 285, in _handle_tasks
    put(task)
TypeError: 'NoneType' object is not callable 
```

什么是进行调试的好方法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T09:47:54.900

我回到了我的 git 历史，直到我找到了一个仍然有效的提交。

我在我的代码中添加了一个扩展类，`dict`以便可以使用 a `.`(所以`dict.foo`而不是`dict["foo"]`. Multiprocessing 对此不友好，使用普通 dict 解决了问题。

# internet-explorer - 无法解释的混合内容警告 - 非安全 cookie 会导致这种情况吗？

> ID：10819450
> 
> 赞同：1
> 
> 时间：2012-05-30T15:30:03.857
> 
> 标签：internet-explorer, cookies, https

我有一个页面[https://uat03.i-grasp.com/fe/tpl_uat03_01_external.asp](https://uat03.i-grasp.com/fe/tpl_uat03_01_external.asp)，它在 IE 上出现了混合内容警告。我无法在 Windows 7 上重现它，但它适用于 XP 中的所有版本。当 cookie 栏被禁用时，添加它的代码不再存在并且警告停止。

绝对我所有的资源都是安全的——我唯一能想到的可能是不安全的 cookie，但如果你不将它们指定为安全的，那么它们可以被拾取并设置网站是否安全，他们不能吗？

有人可以看看他们是否可以对此有所了解吗？我已经为此花费了 2 个小时，使用 Firebug、HTTPWatch、检查源和所有与 cookie 栏相关的文件。绝对没有什么是不安全的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T19:44:10.350

我找到了答案——出于某种原因，IE 认为 CSS 文件的相对链接是不安全的。更改这些以包括协议、服务器等似乎已经解决了这个问题。为什么会发生这种情况 - 可能是 IE 中的错误？不会让我吃惊...

# php - 如何将来自多个下拉菜单的结果插入到 MySQL 中，这些下拉菜单中有多个表单的答案？

> ID：10819466
> 
> 赞同：-1
> 
> 时间：2012-05-30T15:31:03.703
> 
> 标签：php, mysql, insert, drop-down-menu

我正在 MySQL 中创建一个庞大的关系数据库，并使用 PHP 来处理表单。MySQL 表具有以下字段：

*   服务器名称
*   Location_id
*   位置_联系方式
*   app_contact_O
*   app_contact_Contact
*   OS_id
*   数据库_id
*   供应商 ID
*   最后更新
*   更新人

对于每个服务器名称，可以有多个位置联系人、app_contact_O、app_contact_Contacts 和 Database_id。

多个字段通过下拉菜单输入，您可以在其中选择多个选项。

如何将多个字段输入数据库。我尝试了许多不同的解决方案，但没有找到任何可行的方法。

我可以使用 foreach() 循环从单个下拉菜单将结果输入 MySQL，但我需要多个帮助。

我的这个页面的代码有 438 行长……我认为发布它对社区没有用处。

==========================
好的，让我用一个简短的形式来澄清一下：

我有以下表格：

```
 <form action="" method="post">
    Server Name: <input type="text" name="Server_Name" size="40" /><br />

    Location: <select name="servLocation">
    <option value="none" selected="selected">Select Location</option>
    <?php
    $getLocation=mysql_query("SELECT * FROM locationTable ORDER BY Location");
    while($r=mysql_fetch_array($getLocation)){
    extract($r);
    echo "<option value='" . $Location_id . "'>" . $Location . ": " . $City . ", " . $Country . ", " . $GSL_id . "</option>";
    }
    ?>
    </select>
    <br />

    Location Contact: 
    <select name="servLocCon[]" multiple='multiple' size="3">
    <option value="none" selected="selected">Select Contact</option>
    <?php
    $getContacts=mysql_query("SELECT * FROM hpatt.contacts ORDER BY Last_Name");
    while($r=mysql_fetch_array($getContacts)){
    extract($r);
    echo "<option value='" . $Contact_id . "'>" . $Last_Name . ", " . $First_Name . "</option>";
    }
    ?>
    </select><br />

    Application Contact:
    <select name="servAppCon[]" multiple='multiple' size="3">
    <option value="none" selected="selected">Select Contact</option>
    <?php
    $getContactsB=mysql_query("SELECT * FROM hpatt.contacts ORDER BY Last_Name");
    while($r=mysql_fetch_array($getContactsB)){
    extract($r);
    echo "<option value='" . $Contact_id . "'>" . $Last_Name . ", " . $First_Name . "</option>";
    }
    ?>
    </select><br />

    <input type="submit" name="submit" value="Submit" />
    </form> 
```

好的，所以我想做的是让用户可以选择为 1 个服务器选择多个位置联系人和应用程序联系人。这是使用大小和多个属性来完成的。然后我想在 MySQL 表中插入一条单独的记录，如下所示：

记录 1：ServerA、Wendel Holmes、John Smith

记录 2：ServerA、Wendy Martin、John Smith

记录 3：ServerA、Wendel Holmes、Juanita Gomez

记录 4：ServerA、Wendy Martin、John Smith

这样每一种可能性都得到处理，然后可以被提取出来。我可以通过单独创建记录来手动执行此操作，但 PHP 应该能够执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:41:14.573

我不确定我是否完全跟随你，但说我有一张桌子：

```
SID  Server Name
1    S1
2    S2
3    S3 
```

我会制作一个外部参照表，例如：

```
SID   Prop1   Prop2 ...  PropX
1      1        2          11
1      2        5          12
2      1        1          33
3      4        2          4 
```

在这种情况下，SID 在外部参照表中被多次使用。

每个道具实际上是其他表的 ID。

然后我在外部参照表上创建一个多列键以防止重复行。

您可以通过与单选类似的方式获取多选的所有 POST/GET 结果。

例如，使用您的`serverLocCon[]`：

```
$sLocCon = $_POST['servLocCon'];

foreach ($sLocCon as $item) 
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:55:27.717

例如对于具有多个值的**位置**字段，您可以创建一个具有相同名称的表**（位置：id，名称）**和另一个名为**location_server(id_location,id_server) 的表**

# java - 隐藏命令行输入

> ID：10819469
> 
> 赞同：64
> 
> 时间：2012-05-30T15:31:11.927
> 
> 标签：java, command-line, input, user-input, command-prompt

我知道像 Git 和其他命令行界面能够隐藏用户的输入（对密码很有用）。有没有办法在Java中以编程方式做到这一点？我正在从用户那里获取密码输入，我希望他们的输入被“隐藏”在该特定行上（但不是在所有行上）。这是我的代码（尽管我怀疑它会有所帮助......）

```
try (Scanner input = new Scanner(System.in)) {
  //I'm guessing it'd probably be some property you set on the scanner or System.in right here...
  System.out.print("Please input the password for " + name + ": ");
  password = input.nextLine();
} 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-30T15:33:48.590

试试[`java.io.Console.readPassword`](http://docs.oracle.com/javase/7/docs/api/java/io/Console.html#readPassword%28%29)。不过，您必须至少运行 Java 6。

```
 /**
    * Reads a password or passphrase from the console with echoing disabled
    *
    * @throws IOError
    *         If an I/O error occurs.
    *
    * @return  A character array containing the password or passphrase read
    *          from the console, not including any line-termination characters,
    *          or <tt>null</tt> if an end of stream has been reached.
    */
    public char[] readPassword() {
        return readPassword("");
    } 
```

但请注意，这[不适](https://bugs.eclipse.org/bugs/show_bug.cgi?id=122429)用于 Eclipse 控制台。您必须从*真正*的控制台/shell/终端/提示符运行程序才能对其进行测试。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-30T15:35:52.140

是的可以做到。这称为命令行输入屏蔽。您可以轻松实现这一点。

您可以使用单独的线程在输入时删除回显的字符，并用星号替换它们。这是使用如下所示的 EraserThread 类完成的

```
import java.io.*;

class EraserThread implements Runnable {
   private boolean stop;

   /**
    *@param The prompt displayed to the user
    */
   public EraserThread(String prompt) {
       System.out.print(prompt);
   }

   /**
    * Begin masking...display asterisks (*)
    */
   public void run () {
      stop = true;
      while (stop) {
         System.out.print("\010*");
     try {
        Thread.currentThread().sleep(1);
         } catch(InterruptedException ie) {
            ie.printStackTrace();
         }
      }
   }

   /**
    * Instruct the thread to stop masking
    */
   public void stopMasking() {
      this.stop = false;
   }
} 
```

使用这个线程

```
public class PasswordField {

   /**
    *@param prompt The prompt to display to the user
    *@return The password as entered by the user
    */
   public static String readPassword (String prompt) {
      EraserThread et = new EraserThread(prompt);
      Thread mask = new Thread(et);
      mask.start();

      BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
      String password = "";

      try {
         password = in.readLine();
      } catch (IOException ioe) {
        ioe.printStackTrace();
      }
      // stop masking
      et.stopMasking();
      // return the password entered by the user
      return password;
   }
} 
```

[此链接](http://www.cse.chalmers.se/edu/course/TDA602/Eraserlab/pwdmasking.html)详细讨论。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-30T15:35:52.590

[JLine 2](http://jline.github.com/jline2/)可能很有趣。除了字符掩码，它还将提供命令行补全、编辑和历史功能。因此，它对于基于 CLI 的 Java 工具非常有用。

要屏蔽您的输入：

```
String password = new jline.ConsoleReader().readLine(new Character('*')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-30T15:35:47.427

有 ：

```
Console cons;
char[] passwd;
if ((cons = System.console()) != null &&
    (passwd = cons.readPassword("[%s]", "Password:")) != null) {
    ...
    java.util.Arrays.fill(passwd, ' ');
} 
```

[来源](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html#readPassword%28%29)

但我认为这不适用于像 Eclipse 这样的 IDE，因为该程序是作为后台进程运行的，而不是作为带有控制台窗口的顶级进程运行的。

另一种方法是将`JPasswordField`in swing 与随附的`actionPerformed`方法一起使用：

```
public void actionPerformed(ActionEvent e) {
    ...
    char [] p = pwdField.getPassword();
} 
```

[来源](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/JPasswordField.html#getPassword%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:39:34.737

类[Console](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)有一个方法`readPassword()`可以解决你的问题。

# mysql - 查找不匹配的记录

> ID：10819471
> 
> 赞同：2
> 
> 时间：2012-05-30T15:31:30.537
> 
> 标签：mysql, sql

这是一个mysql问题。我有两张表，一张称为表格，另一张称为记录。记录是每个表格的记录。我可以将多个记录与表单 ID 关联。但是，并非所有表单都有与之关联的记录。我想找到所有没有记录的表格。

我能做的最好的就是这个

```
SELECT * 
FROM forms
JOIN records WHERE forms.form_id != records.form_id 
```

但是我最终得到了一百万多条记录，我知道这是不正确的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-30T15:34:16.750

尝试`LEFT OUTER JOIN`：

```
SELECT * FROM forms 
LEFT OUTER JOIN records
ON forms.form_id = records.form_id
WHERE records.form_id IS null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:36:37.217

```
SELECT  *
FROM    forms
WHERE   form_id NOT IN
        (
        SELECT  form_id
        FROM    records
        ) 
```

# mysql - 生成时间值

> ID：10819473
> 
> 赞同：-2
> 
> 时间：2012-05-30T15:31:38.360
> 
> 标签：mysql

我必须生成 5 到 30 之间的时间值（分钟）。代码应该可以工作并生成 5-30 分钟，但我得到的是 5-30 秒：

> 更新 table1 设置 column1 = 5+FLOOR(RAND()*26);
> 
> column1 是 TIME 列

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:34:21.243

如果您只是存储数秒或数分钟，那么您没有存储“时间”，因此 column1 不应该是时间类型......

如果你想要整分钟（以秒为单位）

```
update table1 set column1 = (5+FLOOR(RAND()*26)) * 60; 
```

如果你想要部分分钟（以秒为单位）

```
update table1 set column1 = (5*60)+FLOOR(RAND()*26*60); 
```

如果您只想要整数分钟（5 到 30），那么一旦您将列类型更改为 int，您的原始查询应该没问题

# php - Lithium PHP、MongoDB 和数组的表单助手

> ID：10819474
> 
> 赞同：0
> 
> 时间：2012-05-30T15:31:38.713
> 
> 标签：php, mongodb, lithium

我正在尝试使用 Lithium 创建一个编辑表单来编辑一些 MongoDB 数据。我的数据（由另一个工具生成）如下所示：

```
{
  "thing_a" : "value_a",
  "thing_b" : "value_b",
  "settings" : 
  {
    "sub_thing_a" : ["sub_value_a", "sub_value_b"]
  }
} 
```

我遇到的问题是“设置”中的数组“sub_thing_a”。我需要为每个值显示一个文本框，以便我可以编辑它们并将它们保存回来。这里的最终目标是使用一些 jQuery 在表单中添加/删除文本框，然后从数组中添加值 - 但现在我试图获得一个简单的版本，它可以让我编辑值并保存他们离开。

我的模型非常简单：

```
<?php
namespace app\models;

class Test extends \lithium\data\Model {
    protected $_meta = array('source' => 'test');
}
?> 
```

和控制器同样：

```
<?php
namespace app\controllers;

use app\models\Test;

class TestsController extends \lithium\action\Controller {
  public function index() {
    $tests = Test::all();
    return compact('tests');
  }

  public function edit($id=null) {  
    if(isset($id)) {
      $test = Test::find($id);
    } else {
      $test = Test::create();
    }

    if ($this->request->data) {
      if ($test->save($this->request->data)) {
        $this->redirect('/tests/index');
      }
    }

    return compact('test');              
  } 
}
?> 
```

问题从编辑表单开始 - 正如我现在拥有的那样，它将显示我的数组的值，但数据没有正确写入。关于我应该如何处理这个问题的任何线索？（注意：正如我之前提到的，我需要生成一个动态版本，允许我在表单中添加/删除文本框，所以我确实需要能够对助手进行某种控制 -如果有一些非常简单的“约定”方式可以做到这一点。）

编辑.html.php：

```
<?=$this->form->create($test); ?>
<?=$this->form->field('thing_a'); ?>

<?php foreach ($test->settings->sub_thing_a as $i=>$elem): ?>

<?=$this->form->field('settings.sub_thing_a',array('label'=>'thing', 'value'=>$test->settings->sub_thing_a[$i]));?>

<?php endforeach; ?>

<?=$this->form->submit('save'); ?>
<?=$this->form->end(); ?> 
```

和 index.html.php（为了完整性）

```
<?php foreach($tests as $test): ?>

<h2><?=$this->html->link($test->thing_a,'/tests/edit/'.$test->_id); ?></h2>

    <?php foreach($test->settings->sub_thing_a as $item): ?>

<h4><?=$item ?></h4>

<?php endforeach; ?>

<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:12:17.197

好的，所以最后，它（当然）非常简单。在 edit.html.php 文件中，我们可以简单地写：

```
<?=$this->form->field('settings[sub_thing_a][]',array('value'=>$test->settings->sub_thing_a[$i]));?> 
```

settings[sub_thing_a][] 创建一个数组，其中包含来自表单的字符串值数组。

# linq - 转换为值类型“十进制”失败，因为具体化值为 null

> ID：10819475
> 
> 赞同：20
> 
> 时间：2012-05-30T15:31:40.543
> 
> 标签：linq

我遇到了这个查询的问题，它抛出了一个错误。

```
var TotalToDatePayable = (  from ori in db.GetAll<WMPORI>()
                           where ori.CTMSysID == ctmSysId
                          select ori.ExB4Taxes).Sum(); 
```

我尝试了[另一个类似问题](https://stackoverflow.com/questions/6864311/the-cast-to-value-type-int32-failed-because-the-materialized-value-is-null)的以下代码，但这并没有解决我的问题：

```
 var TotalToDatePayable = (Decimal?)(  from ori in db.GetAll<WMPORI>()
                                      where ori.CTMSysID == ctmSysId
                                     select ori.ExB4Taxes).Sum()) ?? 0; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-30T15:36:12.193

您需要转换`ori.ExB4Taxes`到`decimal?`查询内部。

```
var TotalToDatePayable = (from ori in db.GetAll<WMPORI>()
                          where ori.CTMSysID == ctmSysId
                          select (Decimal?) ori.ExB4Taxes).Sum() ?? 0; 
```

# ipython - IPython 中缺少后台魔法命令 (%bg)

> ID：10819479
> 
> 赞同：1
> 
> 时间：2012-05-30T15:32:24.007
> 
> 标签：ipython

IPython 文档引用了一个 %bg 魔术函数。但是，当我尝试在 0.12.1 中使用它时，找不到它。我错过了一些明显的东西吗？

```
In [38]: %bg
ERROR: Magic function `bg` not found. 
```

%lsmagic 给出：

```
In [46]: %lsmagic
Available magic functions:
%alias  %autocall  %automagic  %bookmark  %cd  %clear  %cls  %colors  %config %connect_info  %debug  %dhist  %dirs  %doctest_mode  %ed  %edit  %env  %gui  %guiref  %hist  %history  %install_default_config  %install_profiles  %less  %load_ext  %loadpy  %logoff  %logon  %logstart  %logstate  %logstop  %lsmagic  %macro  %magic  %more  %notebook  %page  %pastebin  %pdb  %pdef  %pdoc  %pfile  %pinfo  %pinfo2  %popd  %pprint  %precision  %profile  %prun  %psearch  %psource  %pushd  %pwd  %pycat  %pylab  %qtconsole  %quickref  %recall  %rehashx  %reload_ext  %rep  %rerun  %reset  %reset_selective  %run  %save  %sc  %store  %sx  %tb  %time  %timeit  %unalias  %unload_ext  %who  %who_ls  %whos  %xdel  %xmode 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T22:53:07.590

自从`%bg`0.11 的大 IPython 重构以来，魔法还没有恢复，但是重新实现它的库代码[已经更新](https://github.com/ipython/ipython/pull/856)。

这是一个[开放的问题](https://github.com/ipython/ipython/issues/844)，并且总是欢迎请求请求。

# css - 兼容模式导致css问题

> ID：10819481
> 
> 赞同：-3
> 
> 时间：2012-05-30T15:32:25.073
> 
> 标签：css, compatibility-mode

大家好，

恐怕我无法共享此 URL 或示例代码；我正在为客户开发一个专有网站。我也无法在我从头开始构建示例代码的环境中进行复制。相反，我被迫使用我的客户提供的代码，并且必须对其进行调整以使其工作。把它全部扔掉并重新开始不是一种选择，而且由于我没有构建它，最初，我不知道为什么某些事情会按照它们的方式编码。

相信我：我想从头开始……这是真正的意大利面条代码。

我想知道的是这里是否有人听说过这个一般问题，以及是否有任何方法可以用来查找修复和解决方法。

问题：该站点在 Firefox、Safari、Chrome、IE8 和 IE9 中显示得很好。在 IE8 或 IE9 中，如果我进入“兼容模式”，布局会发生变化，并且会略微倾斜和损坏。Z 索引似乎无法正常工作，背景图像定位似乎不正确，并且某些高度似乎损坏了。

问题：有没有人听说过这个或找到了解决/定位仅出现在“兼容模式”中的 CSS 解释错误的方法？

你的，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:42:09.803

也许您在 msdn 上看到过这个 - 可能会有所帮助： [定义文档兼容性](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)

# bada - MakePackage.exe 不显示任何输出

> ID：10819482
> 
> 赞同：0
> 
> 时间：2012-05-30T15:32:29.680
> 
> 标签：bada

我有一个用动作脚本编写的项目。因为我有多个客户需要基本相同的应用程序但具有不同的资产，所以我想自动化构建过程。

我发现有一个`MakePackage.jar`and`MakePackage.exe`可以用来重新打包我的项目，可以通过命令行调用。但是，只有当我输入错误的参数时才会得到输出。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:04:37.667

[看这里。](http://developer.bada.com/help/index.jsp?topic=/com.osp.documentation.help/html/app_dev_process/packaging_app.htm)阅读“使用命令行打包应用程序”下的内容

> 通过命令行构建和打包您的应用程序：
> 
> 运行以下命令：
> 
> cd \Tools\MakePackage MakePackage.exe TYPE_OPTION PROJECT_PATH
> 
> 其中 PROJECT_PATH 是要打包的项目的绝对路径，TYPE_OPTION 是要使用的构建配置：
> 
> -td = Target-Debug -tr = Target-Release 例如，MakePackage.exe -tr C:\MyWorkspace\MyProject 命令使用 Target-Release 配置构建和打包存储在 C:\MyWorkspace\MyProject 下的 bada 应用程序项目。

# windows-shell - SHBrowseForFolder 文本编辑

> ID：10819488
> 
> 赞同：2
> 
> 时间：2012-05-30T15:32:54.480
> 
> 标签：windows-shell, folderbrowserdialog

我有一些关于`SHBrowseForFolder()`. 我将它与`BIF_USENEWUI`,`BIF_RETURNONLYFSDIRS`和一起使用`BIF_VALIDATE`。我主要是编辑框有问题。我希望它的功能有点不同。

1.  让我们假设，我在一个有效的目录`"C:\path"`中。如果我在文本框中输入一个不存在的文件夹（让我们称之为`"Folder1"`），然后按 OK，那么我收到的路径是`"C:\path"`. 有没有办法让它在我按下 OK 时创建`"Folder1"`并`"C:\path"`给我路径`"C:\path\Folder1"`？（无需使用“新建文件夹”按钮）

2.  目前，我可以单击`"Make New Folder"`，它会创建一个可以重命名的新文件夹。在文本编辑中，它显示为新文件夹（其默认名称）。重命名文件夹后，它仍然在文本编辑中显示为新文件夹，除非我单击另一个文件夹，然后单击新命名的文件夹。有没有办法在我重命名文件夹后立即更新文本编辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:42:53.273

1 安装应用程序定义的回调函数并指定 BIF_VALIDATE 标志，然后处理 BFFM_VALIDATEFAILED 并尝试在那里创建文件夹。

2 您可以在BFFM_INITIALIZED 中子类化对话框和文本编辑，并从树控件中查找TVN_BEGINLABELEDIT 和TVN_ENDLABELEDIT，然后在用户完成编辑时根据对树节点文本的更改来更改编辑控件中的文本。浏览文件夹对话框中控件的对话框 ID 未记录，因此您需要考虑兼容性风险。如果您的代码在 Windows 更新/升级后中断，我不会感到惊讶，但作为用户，我无论如何都不会错过这个功能。

# python - Python setuptools 是如何工作的？

> ID：10819492
> 
> 赞同：0
> 
> 时间：2012-05-30T15:33:01.483
> 
> 标签：python, setuptools

*   当我用这个工具安装新的东西时，我的文件系统有什么变化？
*   是不是 apt-get 之类的东西？
*   我是否必须设置任何配置文件，如makefile？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:39:51.710

从[`EasyInstall`文档](http://peak.telecommunity.com/DevCenter/EasyInstall#downloading-and-installing-a-package)中：

> 默认情况下，包被安装到正在运行的 Python 安装的 site-packages 目录，除非您提供 -d 或 --install-dir 选项来指定备用目录，或者使用 distutils 配置文件指定备用位置。（请参阅下面的配置文件。）
> 
> 默认情况下，包中包含的任何脚本都安装到正在运行的 Python 安装的标准脚本安装位置。但是，如果您通过命令行或配置文件指定安装目录，则安装脚本的默认目录将与包安装目录相同，以确保脚本可以访问已安装的包。您可以使用 -s 或 --script-dir 选项覆盖它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:39:24.107

Setuptools 不仅仅是用于构建 python 应用程序包。您也可以使用它来安装和上传它们。我建议你应该深入阅读[文档](http://packages.python.org/an_example_pypi_project/setuptools.html)。

# javascript - ASP.NET App 如何清除 Javascript 缓存

> ID：10819493
> 
> 赞同：0
> 
> 时间：2012-05-30T15:33:04.513
> 
> 标签：javascript, jquery, .net, caching

所以我在我的应用程序的一个页面上更改了一些 jquery，它工作正常等。

但我只是注意到，当我将代码推送到另一台服务器并在该服务器上运行页面时，我需要按 ctrl + f5 才能看到反映的更改。在进行代码推送以清除该页面/javascript上的缓存时，是否有办法加载最新版本而不是缓存版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:36:31.633

在您引用的 javascript 文件中，您可以添加一个查询字符串，例如：

```
<script src="/scripts/myfile.js?v=1" type="text/javascript"></script> 
```

每当您更改文件中的文本时，都会更新查询字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:37:07.317

您需要查看您的 js 文件内容过期时间。

解决此问题的一种方法是将虚拟查询字符串参数附加到所有 *.js url，并将其设置为应用程序的内部版本号或文件修改时间。

`/Scripts/file.js?v=1.0.12345.0`

这将确保每个构建都将使用新的 url，并且您可以将其内容过期设置为永不。

# tcl - return -code error 和 error 有什么区别

> ID：10819495
> 
> 赞同：6
> 
> 时间：2012-05-30T15:33:27.433
> 
> 标签：tcl

`return -code error ...`在 TCL 中通过和引发异常实际上有什么区别`error ...`？什么时候用一个代替另一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T10:24:03.620

该`error`命令在当前点产生错误；这对于由于过程的内部状态而引发问题的情况非常有用。该`return -code error`命令使它所在的过程产生错误（就好像*该过程*是`error`）；这对于传递给过程的参数有问题（即调用者做错了什么）的情况非常有用。当您查看堆栈跟踪时，差异确实出现了。

这是一个（人为的！）示例：

```
proc getNumberFromFile {filename} {
    if {![file readable $filename]} {
        return -code error "could not read $filename"
    }
    set f [open $filename]
    set content [read $f]
    close $f
    if {![regexp -- {-?\d+} $content number]} {
        error "no number present in $filename"
    }
    return $number
}

catch {getNumberFromFile no.such.file}
puts $::errorInfo
#could not read no.such.file
#    while executing
#"getNumberFromFile no.such.file"

catch {getNumberFromFile /dev/null}
puts $::errorInfo
#no number present in /dev/null
#    while executing
#"error "no number present in $filename""
#    (procedure "getNumberFromFile" line 9)
#    invoked from within
#"getNumberFromFile /dev/null" 
```

# javascript - 我制作了一个可以更改大小的谷歌地图，但它在 Firefox 中不起作用

> ID：10819498
> 
> 赞同：2
> 
> 时间：2012-05-30T15:33:35.167
> 
> 标签：javascript, jquery, firefox, google-maps-api-3, scaling

我的代码在 Google Chrome 和 IE 中有效，但在 Firefox 12 中无效。有人知道我如何使它在 Firefox 12 中有效吗？

代码：

```
...
/* START FULLSCREEN BUTTON */
// Globals
var map_size    = 'small';
var map_position= 'inherit';
var map_top     = 0;
var map_left    = 0;
var map_width   = 0;
var map_height  = 0;
var map_zIndex  = 0;
...
// when button clicked
        if(map_size == 'small') {
            map_size = 'large';
            map_position= $('div.map').css('position');
            map_top     = $('div.map').css('top');
            map_left    = $('div.map').css('left');
            map_width   = $('div.map').css('width');
            map_height  = $('div.map').css('height');
            map_zIndex  = $('div.map').css('z-index');
            $('#fullscreen').attr('src','/assets/images/restore.png');
            $('#enlarge').html('Shrink Map');
            controlUI.title = 'Click to make map smaller';
            $('div.map').css('position',    "fixed");
            $('div.map').css('top',     "10%");
            $('div.map').css('left',        "10%");
            $('div.map').css('width',       "80%");
            $('div.map').css('height',      "80%");
            $('div.map').css('z-index', 10000);
            google.maps.event.trigger(map,'resize');
            map.panToBounds(bounds);
            map.fitBounds(bounds);
        } else {
            map_size = 'small';
            $('div.map').css('position',    map_position);
            $('div.map').css('top',     map_top);
            $('div.map').css('left',        map_left);
            $('div.map').css('width',       map_width);
            $('div.map').css('height',      map_height);
            $('div.map').css('z-index', map_zIndex);
            $('#fullscreen').attr('src','/assets/images/fullscreen.png');
            $('#enlarge').html('Enlarge Map');
            controlUI.title = 'Click to make map bigger';
            google.maps.event.trigger(map,'resize');
            map.panToBounds(bounds);
            map.fitBounds(bounds);
        }
    }
... 
```

这是一个现场示例[http://www.helloflight.com/flight/dlh410.cfm](http://www.helloflight.com/flight/dlh410.cfm)

**更新**- 请注意，现场示例使用下面的 setTimeout 解决方案，因此在 Firefox 12 中有效，但没有 setTimeout 解决方案在 Firefox 12 中不起作用

如您所见，它在最新版本的 Safari、Google Chrome 和 IE 中都可以使用，但是在 Firefox 中，当地图 div 放大时，地图瓦片仍然是原始 div 尺寸的大小，并且不会扩展到填充新的 div 尺寸。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-30T18:12:14.637

最好我能说的是，Firefox 的 Javascript 引擎有一个欺骗，它试图在函数中并行执行行，它认为代码不需要按顺序运行，当它正确猜测时，它会加快速度，但是在这里，因为 $('div.map').css('width', "80%"); 和 $('div.map').css('height',"80%"); 在 Firefox 上没有阻塞（与其他浏览器不同），google.maps.event.trigger(map,'resize'); 在 $('div.map').css('width',"80%"); 之前完成 和 $('div.map').css('height',"80%"); 因此，Google Maps 对象使用旧尺寸调整大小，修复：替换：

```
 google.maps.event.trigger(map,'resize');
 map.panToBounds(bounds);
 map.fitBounds(bounds); 
```

和：

```
 setTimeout(resizeMap,250); 
```

并创建功能：

```
function resizeMap() {
    google.maps.event.trigger(map,'resize');
    map.panToBounds(bounds);
    map.fitBounds(bounds);
} 
```

250 毫秒的延迟应该足以让 Google Maps v3 对象知道调整大小的 div 的正确尺寸。为了让一切渲染更流畅、更快，你可以检测浏览器，如果浏览器是 Firefox，则通过 setTimeout 调用函数，如果不是 Firefox，则调用函数。

# c# - 只允许执行我的应用程序的最新实例？

> ID：10819500
> 
> 赞同：0
> 
> 时间：2012-05-30T15:33:38.670
> 
> 标签：c#, .net, mutex

我目前在我的应用程序中有互斥锁，它只允许运行 1 个实例。我的问题是，我现在如何获取此代码，并将其转换为关闭当前正在运行的实例并允许打开一个新实例？

我要解决的问题：我的应用程序接受 args 并且需要经常使用新参数重新打开。目前，如果没有互斥锁，它可以打开无限次。我只想运行 1 个具有最新参数集的实例。

谢谢，凯文

### 一些代码

```
bool createdMutex = true;

            Mutex mutex = new Mutex(true, "VideoViewerApp", out createdMutex);

            if (createdMutex && mutex.WaitOne())

            {

                Application.EnableVisualStyles();
                Application.SetCompatibleTextRenderingDefault(false);
                Application.Run(new frmVideo(args[0], args[1], args[2], args[4], args[5]));
                mutex.ReleaseMutex();

            }

mutex.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:43:47.587

互斥体不适用于进程间事件通知，因此无法使用互斥体关闭另一个进程。我会建议做一些类似于[这个问题中推荐的事情。](https://stackoverflow.com/questions/1001433/net-inter-process-events)

我将把这两个答案组合成我用过的东西：

```
Process[] processes = Process.GetProcesses();
string thisProcess = Process.GetCurrentProcess().MainModule.FileName;
string thisProcessName = Process.GetCurrentProcess().ProcessName;
foreach (var process in processes)
{
    // Compare process name, this will weed out most processes
    if (thisProcessName.CompareTo(process.ProcessName) != 0) continue;
    // Check the file name of the processes main module
    if (thisProcess.CompareTo(process.MainModule.FileName) != 0) continue;
    if (Process.GetCurrentProcess().Id == process.Id) 
    {
        // We don't want to commit suicide
        continue;
    }

    // Tell the other instance to die
    process.CloseMainWindow();
} 
```

# c++ - 写入指定的内存位置

> ID：10819507
> 
> 赞同：2
> 
> 时间：2012-05-30T15:34:14.177
> 
> 标签：c++, memory, pointers

我刚刚开始学习 C++，所以我可能对这个不太满意，但对我来说放轻松。

我想要做的是写入我指定的内存地址 - 如果可能的话？

我正在使用的代码是：

```
#include <iostream>

int main()
{
    using namespace std;

    int i = 100;
    int* p = &i;
    cout << p << "\n";
    cout << "Writing" << "\n";
    int* w = (int*)0x28ff18;
    *w = 101;
    cout << *p << "\n" << "Done";
    return 0;
} 
```

我得到的地址`i`是`0x28ff18`，那么是否可以通过指定此地址来写入该位置？而不是使用`*p = 101`. 显然我正在使用的东西并没有改变它，我不知道它在哪里或是否在写`101`。

非常感谢任何简单的解释或帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:48:16.697

在大多数计算机和大多数编译器上，这样的事情可能会起作用。但是 C++ 标准对此没有任何保证。

例如，当我在 Windows 机器上使用 MSVC++ 编译和运行您的代码时，每次地址都不同。您不能期望它在同一程序的不同运行之间是相同的。

另请注意，您存储指针值的整数应该足够大（例如，当您有 64 位指针时是 64 位整数）。如果您想这样做，请使用 uintptr_t（感谢 larsmans 指出这一点）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:38:27.070

的地址`i`可能与程序的一次运行到下一次不同。这是非常不安全的。请不要这样做；内存地址隐藏在 C++ 中的指针抽象背后是有原因的。

您会看到内存地址文字的唯一地方是非常小的嵌入式系统和操作系统内核/驱动程序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T15:39:05.540

尽管可以写入特定的内存位置，但这并不一定意味着这样做是安全的。

在您拥有整个内存空间的环境（特别是嵌入式系统）中，写入特定内存地址以执行内存映射 I/O 操作是很常见的。在操作环境控制您的内存空间的情况下，写入任何尚未分配给您的程序的内存是不安全的。

# jquery - 从谷歌地图信息窗口中的链接加载/刷新 div

> ID：10819514
> 
> 赞同：-1
> 
> 时间：2012-05-30T15:34:50.440
> 
> 标签：jquery, google-maps, html

我有一个带有多个标记的谷歌地图 v3 地图，每个标记都有一个信息窗口，里面有一个链接。链接本身是通过从 xml 文件读取的 map init 函数动态创建的。

我可以使链接毫无问题地打开一个新页面，将标记的参数作为 php 页面的查询字符串传递。我还可以使页面上的外部链接刷新 div 的内容，但不将查询字符串参数从谷歌地图中传递出去。

我想要做的是单击信息窗口中的链接，该链接将在同一页面上加载另一个 div，其中包含从外部 php 文件调用的内容，并将查询字符串作为参数传递。

这将在信息窗口中创建链接：

```
if (markers[i].getAttribute("mtype")=='Malware'){
              if (markers[i].getAttribute("amount")<10){var cimg = new google.maps.MarkerImage("msmall.png");}
              if (markers[i].getAttribute("amount")>20){var cimg = new google.maps.MarkerImage("mmed.png");}                          if (markers[i].getAttribute("amount")>50){var cimg = new google.maps.MarkerImage("mlarge.png");}
              var links = '<a href="#" id="ipdetail">IP Details</a>';  
          } 
```

这是更新 div 的代码：（目前带有硬编码参数）

```
<script> $(function() {
    $('a[href=#]').click(function() {
        $('#udt').load('whois.php?208.73.210.29');
        return false;
    }); }); </script> 
```

感谢您的帮助，我进行了搜索和搜索，但实际上还没有找到任何关于从谷歌地图信息窗口中动态更新外部 div 的信息。我最好的猜测是我必须以某种方式通过 DOM 处理程序传递链接单击事件，但对于 jscript 和 jquery 来说相对较新，我不知道如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:29:04.017

如果其他人需要这个，我已经设法找到解决方案。

将脚本放在函数内调用外部，并将点击事件附加到链接以调用函数。它工作正常。

```
var links = '<a href="javascript:void();" onclick="markup();">IP Details</a>';

function markup(){
$(function() {
        $('#udt').load('whois.php?208.73.210.29');
        return false;
});
} 
```

其中#udt 是您的 div 的名称。

# java - 使用 FileInputStream/ObjectOutputStream 发送大文件

> ID：10819516
> 
> 赞同：1
> 
> 时间：2012-05-30T15:34:57.583
> 
> 标签：java, bytearray, inputstream, outputstream

我的作业需要帮助，任何帮助将不胜感激。我可以毫无问题地发送小文件。但是当我尝试发送时，假设一个 1GB 文件字节数组发送 OutOfMemoryError 所以我需要一个更好的解决方案来将文件从服务器发送到客户端。我该如何改进此代码并发送大文件，请帮助我。

服务器代码：

```
 FileInputStream fis = new FileInputStream(file);
    byte[] fileByte = new byte[fis.available()]; //This causes the problem.
    bytesRead = fis.read(fileByte);
    oos = new ObjectOutputStream(sock.getOutputStream());
    oos.writeObject(fileByte); 
```

客户代码：

```
 ois = new ObjectInputStream(sock.getInputStream());
    byte[] file = (byte[]) ois.readObject();
    fos = new FileOutputStream(file);
    fos.write(file); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:38:37.680

只需将数组拆分为更小的块，这样您就不需要分配任何大数组。

例如，您可以将数组拆分为 16Kb 的块，例如`new byte[16384]`，将它们一一发送。在接收端，您必须等到一个块可以被完全读取，然后将它们存储在某个地方并从下一个块开始。

但是，如果您无法在服务器端分配所需大小的整个数组，您将无法存储您将要接收的所有数据。

您还可以在发送数据之前对其进行压缩以节省带宽（和时间），看看[`ZipOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)and [`ZipInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipInputStream.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:40:52.727

不要将整个文件读入内存，使用小缓冲区并在读取文件时写入：

```
BufferedOutputStream bos = new BufferedOutputStream(sock.getOutputStream())

File file = new File("asd");
FileInputStream fis = new FileInputStream(file);
BufferedInputStream bis = new BufferedInputStream(fis);
byte[] buffer = new byte[1024*1024*10];
int n = -1;
while((n = bis.read(buffer))!=-1) {
  bos.write(buffer,0,n):
} 
```

使用 Buffered* 优化 Streams 的写入和读取

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T00:04:20.157

这是我解决它的方法：

客户代码：

```
 bis=new BufferedInputStream(sock.getInputStream());
 fos = new FileOutputStream(file);
 int n;
 byte[] buffer = new byte[8192];
 while ((n = bis.read(buffer)) > 0){
 fos.write(buffer, 0, n);} 
```

服务器代码：

```
 bos= new BufferedOutputStream(sock.getOutputStream());
 FileInputStream fis = new FileInputStream(file);
 BufferedInputStream bis = new BufferedInputStream(fis);
 int n=-1;
 byte[] buffer = new byte[8192];
 while((n = bis.read(buffer))>-1) 
 bos.write(buffer,0,n); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:43:20.583

根据您是否必须自己编写代码，现有的库可以解决这个问题，例如[rmiio](http://openhms.sourceforge.net/rmiio/)。如果你不使用 RMI，只是简单的 java 序列化，你可以使用[DirectRemoteInputStream](http://openhms.sourceforge.net/rmiio/apidocs/com/healthmarketscience/rmiio/DirectRemoteInputStream.html)，它有点像 Serializable InputStream。（这个库还支持自动压缩数据等功能）。

实际上，如果您*只*发送文件数据，最好放弃 Object 流并使用 DataInput/DataOutput 流。首先写入一个指示文件长度的整数，然后将字节直接复制到流中。在接收端，读取整数文件长度，然后准确读取那么多字节。

当您在流之间复制数据时，使用一个小的、固定大小的 byte[] 在循环中在输入和输出流之间移动数据块。网上有很多关于如何正确执行此操作的示例（例如@ErikFWinter 的答案）。

# javascript - 如何在javascript中检查多个函数

> ID：10819519
> 
> 赞同：0
> 
> 时间：2012-05-30T15:35:02.193
> 
> 标签：javascript, forms, javascript-events

`userName()`我有很多用 Javascript 编写的函数，例如`password()`等。但是在表单上提交时，我只有一个函数`return formValidator();`。

我希望函数调用所有其他函数并检查它们是否返回错误。如果它们都为真，则应返回真，否则应返回假。

```
function userName(){
      var x=document.forms["signupform"]["firstname"].value;
            if(x=="" ||x==null){
           document.getElementById("firstname").style.border="1px solid #F50A0A";
           document.getElementById("firstname").style.boxShadow="2px 2px 5px #F50A0A";
           return false;
      }else {return true;}
}

function password(){
 var z=document.forms["signupform"]["password"].value;
      if(z=="" ||z==null){
            document.getElementById("password").style.border="1px solid #F50A0A";
           document.getElementById("password").style.boxShadow="2px 2px 5px #F50A0A";
            return false;
      }else {return true;}
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-30T15:36:31.563

您可以调用每个函数，使用`&&`运算符指示每个函数必须返回计算结果为 的内容`true`。如果其中任何一个返回的结果为`false`，则整个语句将评估为`false`：

```
function formValidator() {
    return userName() && password() && somethingElse() && etc();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:37:58.323

```
var validators = [userName, password, ...];
function formValidator() {
    return validators.every(function(fn){return fn();});
} 
```

或者只使用[AND 运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)：

```
function formValidator() {
    return userName() && password() && ...;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:37:20.580

它应该很简单：

```
function formValidator()
{
    var username = userName();
    var password = password();

    return username && password; // or just return userName() && password();
} 
```

# c# - 渲染局部而不必一遍又一遍地复制东西

> ID：10819521
> 
> 赞同：0
> 
> 时间：2012-05-30T15:35:09.777
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-4

这是我的界面

```
 interface IBase
{
    string MvrId { get; set; }
    string IndividualFullName { get; set; }
    string FirstHospitalCaseNumber { get; set; }
} 
```

我有一堂课

```
public class AddMedicineModel:IBase
{
    private MedicalVarianceEntities DbCtx = new MedicalVarianceEntities();
    public AddMedicineModel(int MvrId)
    {

        Mvr Mvr = DbCtx.Mvrs.Find(MvrId);
        this.MvrId = Mvr.PKMvrId.ToString();//for display purposes
        IndividualFullName = Mvr.IndividualLastName 
                             + ", " 
                             + Mvr.IndividualFirstName;
        FirstHospitalCaseNumber = Mvr.CaseNumber.ToString();

    }

    //IBASE INTERFACE IMPLEMENTATION 
    public string MvrId { get; set; }
    public string IndividualFullName { get; set; }
    public string FirstHospitalCaseNumber { get; set; }
} 
```

这是我的部分观点！注意我的部分视图未附加到我的 AddMedicineModel

因此，我不能将它与从 IBase 继承的其他模型重用。如何为许多模型制作可重用的局部视图。

```
@model MedicalVariance.Models.ViewModels.AddMedicineModel
     @Html.DisplayFor(model => model.MvrId)
     @Html.DisplayFor(model => model.IndividualFullName) 
     @Html.DisplayFor(model => model.FirstHospitalCaseNumber) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:39:30.803

只需将其声明为采用接口即可：

```
@model IBase 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:44:38.673

你也可以两全其美：

*部分-AddMecicineModel.cshtml*

```
@model MedicalVariance.Models.ViewModels.AddMedicineModel

@Html.DisplayFor(model => model.PropertyInAddMedicineModelNotInInterface)
@Html.Partial("Partial-IBase", Model) 
```

*部分 IBase.cshtml*

```
@model IBase

@Html.DisplayFor(model => model.MvrId)
@Html.DisplayFor(model => model.IndividualFullName) 
@Html.DisplayFor(model => model.FirstHospitalCaseNumber) 
```

# windows-installer - inno setup 会绕过 Windows 安装程序吗？

> ID：10819524
> 
> 赞同：0
> 
> 时间：2012-05-30T15:35:16.087
> 
> 标签：windows-installer, inno-setup

我的印象是 Inno Setup 完全绕过了 Windows Installer。任何人都可以证实或反驳这个概念吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:37:24.217

确认。Inno Setup 是一种自定义过程脚本语言，根本没有利用 Windows Installer 的优势。

它在常见问题解答中：

[将来会支持 Windows Installer 吗？](http://www.jrsoftware.org/isfaq.php#msi)

> 目前，我没有 Inno Setup 的 Windows Installer 版本的计划。“支持”Windows Installer 可能需要对程序进行近乎完全的重写——我没有时间或兴趣去做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:49:38.273

Inno Setup 和 NSIS 都是与 Windows Installer 完全无关的自定义安装程序编译器。

他们使用标准的 Windows 注册表项，例如`HKEY_LOCAL_MACHINE\Software\Microsoft\Windows \CurrentVersion\Uninstall\`为了使已安装的程序在“添加/删除程序”对话框中可见（最近重命名为“程序和功能”）。

Inno Setup / NSIS 和基于 Windows 安装程序的编译器（如 Wix 工具集）之间的主要区别在于前者是完全自主的，而后者取决于在运行安装程序的机器上安装 Windows Installer 运行时。

这主要对非常旧的系统产生影响，因为自 XP 以来 Windows Installer 已集成到 Windows。

InnoSetup 包含其完整的运行时，基于 Pascal 解释器（RemObjects Pascal 脚本）这一事实意味着生成的安装程序的大小存在一些开销，大约为 200 KB，因此理论上，MSI 安装程序可能更小. 有趣的是，NSIS 有一个非常优化的自定义运行时，它使安装程序比 Inno 的更小。

# batch-file - 批处理文件中的 FTP 发送命令

> ID：10819525
> 
> 赞同：0
> 
> 时间：2012-05-30T15:35:26.577
> 
> 标签：batch-file, ftp, ftplib

我有一个每天晚上运行的批处理文件，它在其中对文件进行 ftps。在该批次中，我有这一行 echo send C:\send*.txt>> ftpcmd.dat。当发送文件夹中只有一个文件并且我只想发送一个文件最新的文件时，这非常有效，但是当有很多文件时，有时它会发送最新的文件，有时它不会发送。当我使用“*”作为文件名时，我不确定是什么决定了发送什么文件。

```
@echo off
echo user > ftpcmd.dat
echo psswd> ftpcmd.dat
echo ascii>> ftpcmd.dat
echo send C:\newgdrive\boldata\send\*.txt>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat ftp.thinktbl.com
del ftpcmd.dat 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T21:26:07.977

该`send`命令正确地将单个文件传输到服务器。

为了传输多个文件，您可以`mput`使用`send`.

此外，作用于多个文件的命令，例如`mput`原因提示 (y/n) - 您可能希望`prompt`在使用`mput`.

您的 ftpcmd.dat 应如下所示：

```
user vigftp
mypwd
ascii
prompt
mput C:\newgdrive\boldata\send\*.txt
quit 
```

# playframework-1.x - Play Framework - 无限递归

> ID：10819529
> 
> 赞同：0
> 
> 时间：2012-05-30T15:35:43.030
> 
> 标签：playframework-1.x

我收到了类似[https://bugs.launchpad.net/play/+bug/549439](https://bugs.launchpad.net/play/+bug/549439)上的错误。将对象转换为基元似乎是一个问题。那是对的吗？

尝试显示带有答案列表的问题时出现错误： `<ul> #{list question.answers, as:'answer'} <li>&{answer.content}</li> #{/list} </u1>`

我从 answer 更改为 answer.content ，认为问题是由于投射引起的，但我得到了同样的错误。

这是堆栈跟踪：

请求 GET /showQuestion?qid=1 的内部服务器错误 (500)

执行异常（在 /app/controllers/Application.java 第 43 行附近）发生 RuntimeException：java.lang.OutOfMemoryError: Java heap space

play.exceptions.JavaExecutionException: java.lang.OutOfMemoryError: Java heap space at play.mvc.ActionInvoker.invoke(ActionInvoker.java:231) at Invocation.HTTP Request(Play!) 原因：java.lang.RuntimeException: java. lang.OutOfMemoryError：play.templates.BaseTemplate.throwException(BaseTemplate.java:93) 处 play.templates.GroovyTemplate.internalRender(GroovyTemplate.java:257) 处的 Java 堆空间 play.templates.Template.render(Template.java: 26) 在 play.templates.GroovyTemplate.render(GroovyTemplate.java:187) 在 play.mvc.results.RenderTemplate.(RenderTemplate.java:24) 在 play.mvc.Controller.renderTemplate(Controller.java:660) 在玩.mvc.Controller.renderTemplate(Controller.java:640) 在 play.mvc.Controller.render(Controller.java:695) 在 controllers.Application.showQuestion(Application.java:43) 在 play.mvc.ActionInvoker.invokeWithContinuation(ActionInvoker.java:548) 在 play.mvc.ActionInvoker.invoke(ActionInvoker.java:502) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478) 在玩。 mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473) at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) ... 1 更多原因：java.lang.OutOfMemoryError: Java heap space at java.util.Arrays .copyOf(Arrays.java:2882) 在 java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder. java:119) 在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在 play.data.binding.Unbinder.unBind(Unbinder.java:110)在 play.mvc.ActionInvoker.invoke(ActionInvoker.java:502) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java) 调用WithContinuation(ActionInvoker.java:548) :473) at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) ... 1 更多原因：java.lang.OutOfMemoryError：java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间在 java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 play.data。 binding.Unbinder.unBind(Unbinder.java:106) 在 play.data.binding.Unbinder.unBind(Unbinder.java:110)在 play.mvc.ActionInvoker.invoke(ActionInvoker.java:502) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java) 调用WithContinuation(ActionInvoker.java:548) :473) at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) ... 1 更多原因：java.lang.OutOfMemoryError：java.util.Arrays.copyOf(Arrays.java:2882) 处的 Java 堆空间在 java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 play.data。 binding.Unbinder.unBind(Unbinder.java:106) 在 play.data.binding.Unbinder.unBind(Unbinder.java:110)在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473) 在 play.mvc.ActionInvoker.invoke(ActionInvoker.java) 调用(ActionInvoker.java:502) :161) ... 1 更多原因：java.lang.OutOfMemoryError: java.util.Arrays.copyOf(Arrays.java:2882) at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 处的 Java 堆空间在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在玩。 data.binding.Unbinder.unBind(Unbinder.java:110)在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:478) 在 play.mvc.ActionInvoker.invokeControllerMethod(ActionInvoker.java:473) 在 play.mvc.ActionInvoker.invoke(ActionInvoker.java) 调用(ActionInvoker.java:502) :161) ... 1 更多原因：java.lang.OutOfMemoryError: java.util.Arrays.copyOf(Arrays.java:2882) at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 处的 Java 堆空间在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在玩。 data.binding.Unbinder.unBind(Unbinder.java:110)invokeControllerMethod(ActionInvoker.java:473) at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) ... 1 更多原因：java.lang.OutOfMemoryError: Java 堆空间在 java.util.Arrays.copyOf(Arrays .java:2882) 在 java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119)在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在 play.data.binding.Unbinder.unBind(Unbinder.java:110)invokeControllerMethod(ActionInvoker.java:473) at play.mvc.ActionInvoker.invoke(ActionInvoker.java:161) ... 1 更多原因：java.lang.OutOfMemoryError: Java 堆空间在 java.util.Arrays.copyOf(Arrays .java:2882) 在 java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119)在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在 play.data.binding.Unbinder.unBind(Unbinder.java:110)100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在play.data.binding.Unbinder.unBind(Unbinder.java:110)100) 在 java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:390) 在 java.lang.StringBuilder.append(StringBuilder.java:119) 在 play.data.binding.Unbinder.unBind(Unbinder.java:106) 在play.data.binding.Unbinder.unBind(Unbinder.java:110)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:51:11.497

不，它与链接的错误无关，您的代码中有错字。将您的代码修复为：

```
... <li>${answer.content}</li> ... 
```

该`&{…}`语法用于从`messages`文件中获取翻译标签

**顺便说一句**，之前问过你：尝试对所有问题使用类似`playframework-1.x`或的标签`playframework-2.0`，这对想要帮助你的人有很大帮助。

# java - 方向改变声音

> ID：10819539
> 
> 赞同：0
> 
> 时间：2012-05-30T15:36:20.987
> 
> 标签：java, android

早上好，

我们开发了一个 android 应用程序，我负责找出如何在每次屏幕方向改变时消除通知声音的不良行为。显然，这种行为只存在于运行 OS 版本 3.2.3 或更高版本的设备上。

我已经阅读了几篇文章，表明可以通过取消选中“设置”->“开发人员选项”中的 USB 调试来关闭此功能，但是未选中此选项，并且我们的任何 Android 设备上的其他应用程序都不会发出此通知声音在方向改变时。

该应用程序确实需要在“收到消息”时发出通知（该应用程序连接到 Web 服务并每隔一段时间从该服务获取新消息）。因此，这将排除任何禁用通知的解决方案。

到目前为止，我已经尝试了几种可能的解决方案： 1）收到消息时，实例化一个新的NotificationManager，并在通知响起后，销毁NotificationManager。

```
if(MessageReceived == true) {
    String ns = Context.NOTIFICATION_SERVICE;
    messageNotifyManager = (NotificationManager) getSystemService(ns);
}
showNotification();
messageNotifyManager = null; 
```

2）我意识到方向变化本质上是视图被破坏和重新创建。我在初始 onCreate 方法中设置了一个标志，并在重新创建通知管理器之前检查了该标志是否具有值。

```
public static int Flag = 0; 
public void onCreate(Bundle savedInstanceState) { 
    super.onCreate(savedInstanceState); 
    if(Flag == 0) {
        String ns = Context.NOTIFICATION_SERVICE;
  messageNotifyManager = (NotificationManager) getSystemService(ns);
        Flag = 1;
    } 
} 
```

3) 在应用程序的主类中，我创建了一个公共 OrientationEventListener 属性，然后在 onCreate 方法中设置它的值，立即禁用它。当那没有禁用声音时，我尝试禁用引用应用程序主类的每个类中的属性。

```
public OrientationEventListender listener;
@Override
public void onCreate() {
    super.onCreate();
    appContext = getApplicationContext();
    GetPreferences();
    //...
    listener = new OrientationEventListener(appContext){
        public void onOrientationChanged(int Orientation){
        }
    };
    listener.disable();
} 
```

现在，您可能会说，我对 Android 开发非常陌生。我认为这个解决方案非常简单，每个人都知道，这就是为什么在网络上任何方便的地方都没有答案。但是对于这个简单问题的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:58:46.793

此问题已通过修改 AndroidManifest 解决，将以下标记添加到每个活动：android:configChanges="orientation"

# iphone - 在 super 上调用协议方法

> ID：10819540
> 
> 赞同：3
> 
> 时间：2012-05-30T15:36:22.520
> 
> 标签：iphone, objective-c, ios, xcode, protocols

即使超类私下支持协议，我是否可以从子类的超类调用协议方法？

假设我有一个 A 类，它私下符合 UIGestureRecognizerDelegate 协议。B 类继承自 A 类，但是当我尝试调用 [supergestureRecognizerShouldBegin:gestureRecognizer]; 我得到一个错误。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:39:02.130

[UIScrollViewDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)没有声明`gestureRecognizerShouldBegin:gestureRecognizer:`名为.

但一般来说，是的，它可以调用超类实现的协议中声明的方法，但请记住，`@optional`协议中标记的方法不能保证实现（您可以通过`respondsToSelector:`方法检查）

# c++ - 函数在退出范围时会清除动态内存吗？

> ID：10819543
> 
> 赞同：2
> 
> 时间：2012-05-30T15:36:29.723
> 
> 标签：c++, function, scope, dynamic-memory-allocation

在 C++ 中，函数如何处理退出函数范围时动态分配的内存？这块内存是被清除了，还是可以传回主块？

在上下文中：我有一个函数，我将一个指向 double 的指针传递给它作为一个数组。我在函数内动态分配内存，初始化元素并退出函数。

```
 void my_func(double* ptr){
            ptr = new double[2];
            ptr[0] = 15; ptr[1] = 10;
            } 
```

在主块中，我然后使用新分配的数组。

```
 int main(){
            double* ptr;
            my_func(ptr);
            cout << ptr[0] + ptr[1] << endl;
            delete[] ptr;
            return 0; 
```

这行得通吗？这种方法是否存在危险/陷阱？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T15:39:26.493

> 在 C++ 中，函数如何处理退出函数范围时动态分配的内存？这块内存是被清除了，还是可以传回主块？

在 C++ 中，手动（动态）分配的内存必须手动释放。

> 在上下文中：我有一个函数，我将一个指向 double 的指针传递给它作为一个数组。我在函数内动态分配内存，初始化元素并退出函数。

您正在按值获取指针，因此虽然您可以更改指针指向的内容，但您不能更改指针本身。这样做只会更改指针的本地副本。如果您通过引用获取指针，那么它将起作用：

```
void my_func(double*& ptr)
{
    ptr = new double[2];
    ptr[0] = 15; ptr[1] = 10;
} 
```

> 这行得通吗？这种方法是否存在危险/陷阱？

它大部分都可以工作，但由于相关的陷阱，它不是 C++ 的方式。最好使用`vector`：

```
std::vector<int> my_func()
{
    std::vector<int> buffer;
    buffer.push_back(15);
    buffer.push_back(10);
    return buffer;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:28:36.937

> 这行得通吗？这种方法是否存在危险/陷阱？

只要没有出错，它就可以工作。如果抛出异常，它通常会泄漏内存。为避免这种情况，您通常希望释放某个类的析构函数中的内存，然后创建具有自动存储持续时间的该类的实例。这意味着它会在超出范围时被销毁，并且会（反过来）释放它所控制的内存。

标准库已经有各种容器可以做到这一点。你所拥有的最接近 a `std::vector`，但也有`std::deque`，`std::list`等等。

# c++ - 调试断言失败：_CrtIsValidHeapPointer(pUserData)

> ID：10819550
> 
> 赞同：5
> 
> 时间：2012-05-30T15:36:42.407
> 
> 标签：c++, qt, debugging, assertion

*有时*我在调试模式下运行我的 Qt 项目时遇到“调试断言失败”错误（[图像](https://docs.google.com/open?id=0B2Yd07bQCHDGd2xmQWo3dEx5c1k)）。我不知道我错在哪里，因为编译器什么也没说，我不知道该怎么做才能找到我的错误。

我在 Windows Vista 下编程，使用 Qt Creator 2.4.1、Qt 4.8.1。

我的程序必须从激光设备中读取一些信息并将它们保存到一个文件中，其代码类似于：

```
void runFunction()
{
    configure_Scanning(...);

    while(...)
    {
        // do something
        scanFunction();
        // do something
    }
} 
```

这是我的“有罪”功能（我认为问题出在哪里）

```
void scanFunction()
{
    file.open();

    data = getDataFromDevice();

    if(flag)
    {
        if(QString::compare(lineB,"")!=0)
        {
            QTextStream out(&file);
            out << lineB << endl;
            lineB = "";
        }
        lineA.append(data+"\t");
    }
    else
    {
        if(QString::compare(lineA,"")!=0)
        {
            QTextStream out(&file);
            out << lineA << endl;
            lineA = "";
        }
        lineB.prepend(data+"\t");
    }

    file.close();
} 
```

其中*lineA*和*lineB*最初是两个 void QString：想法是我进行双向扫描以将信息保存在 2D 矩阵中（从 -X 到 +X，反之亦然，而 Y 转到指定的目标）。*lineA*记住 (-) 到 (+) 的读数；*lineB*记住 (+) 到 (-) 的读数。当扫描方向改变时，我将*lineA*（或*lineB*）写入文件并继续扫描。

你明白我说的话吗？你能给我一个解决方案吗？

谢谢和对不起我的英语：P

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T19:37:09.140

_CrtIsValidHeapPointerUserData 意味着，你有一个堆损坏，这是由调试堆检查器注意到的。怀疑每个可以将任何信息写入任何已删除动态对象的人。是的，您不会在重写发生时立即收到堆损坏，而是在下一次堆检查时收到堆损坏，这将在任何下一次内存分配/释放时执行。然而，应该由单线程应用程序中的调用堆栈简单地跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-30T18:09:04.930

在我们的例子中，该程序在 DEBUG 模式下完美运行，并在 RELEASE 模式下因类似的错误跟踪而崩溃。

就我而言，RELEASE 模式在链接器定义中有 msvscrtd.dll。我们删除了它并解决了问题。

或者，将 /NODEFAULTLIB 添加到链接器命令行参数也解决了该问题。

# asp.net - asp.net 一个 GridView 可以有两个数据源吗？

> ID：10819552
> 
> 赞同：2
> 
> 时间：2012-05-30T15:36:55.367
> 
> 标签：asp.net, visual-studio-2010, gridview

下午所有，

我有一个网格视图，用于显示数据库中的“操作”列表。

我有一个连接到此网格视图的下拉列表，这使用户能够通过下拉列表中的“操作状态”（“已分配”、“进行中”和“已完成”）过滤数据。这工作得很好....

我想要做的是为用户提供另一个过滤器选项，他们也想按用户名过滤。我为此设置了数据源和下拉列表，但我只能将一个数据源连接到我的gridview？

有没有人建议如何让用户也可以按用户名和“操作状态”进行过滤？

如果您需要看一下，这是我的代码....

```
 <asp:SqlDataSource ID="dsActions" runat="server" 
                ConnectionString="<%$ ConnectionStrings:SMCConnectionString %>" 
                SelectCommand="Populate_grdAllActions_Filter" 
                SelectCommandType="StoredProcedure">
            <SelectParameters>
                <asp:ControlParameter ControlID="ddFilterStatus" Name="ActionStatusID" 
                    PropertyName="SelectedValue" Type="Int32" />
            </SelectParameters>
         </asp:SqlDataSource>

         <asp:SqlDataSource ID="dsActionsByUser" runat="server" 
               ConnectionString="<%$ ConnectionStrings:SMCConnectionString %>" 
               SelectCommand="Populate_grdAllActions_Filter_By_User" 
               SelectCommandType="StoredProcedure">
             <SelectParameters>
                 <asp:ControlParameter ControlID="ddFilterUsers" Name="UserID" 
                     PropertyName="SelectedValue" Type="Int32" />
             </SelectParameters>
         </asp:SqlDataSource>

    <asp:SqlDataSource ID="dsFilterList" runat="server" 
            ConnectionString="<%$ ConnectionStrings:SMCConnectionString %>" 
            SelectCommand="SELECT * FROM [ActionStatus]"></asp:SqlDataSource>

    <asp:SqlDataSource ID="dsFilterUsers" runat="server" 
            ConnectionString="<%$ ConnectionStrings:SMCConnectionString %>" 
            SelectCommand="SELECT * FROM [UserSimpleList]"></asp:SqlDataSource>

    <table style="width: 400px">
        <tr>
            <td colspan="2" style="height: 25px"><b>Filter Options:</b></td>
        </tr>
        <tr>
            <td style="width: 158px">
                Select Action Status:</td>
            <td>
                <asp:DropDownList ID="ddFilterStatus" runat="server"  
                    DataTextField="ActionStatus" DataValueField="ActionStatusID" 
                 AutoPostBack="True" DataSourceID="dsFilterList"></asp:DropDownList>
            </td>
        </tr>
         <tr>
            <td style="width: 158px">
                Select Actions by User:</td>
            <td>
                   <asp:DropDownList ID="ddFilterUsers" runat="server"  
                    DataTextField="UserFullName" DataValueField="UserID" 
                 AutoPostBack="True" DataSourceID="dsFilterUsers"></asp:DropDownList></td>
        </tr>
     </table>

     <br/>

      <asp:GridView ID="grdActions" runat="server" AutoGenerateColumns="False" 
            DataSourceID="dsActions" CssClass="mGrid" 
            PagerStyle-CssClass="pgr" AlternatingRowStyle-CssClass="alt" 
           AllowPaging="True" PageSize="6" DataKeyNames="ActionID" Width="68%" >
      <AlternatingRowStyle CssClass="alt" />
    <Columns>
          <asp:HyperLinkField DataNavigateUrlFields="ActionID" DataNavigateUrlFormatString="~/UpdateAction.aspx?Edit={0}"
                DataTextField="ActionID" HeaderText="Action ID" >
                <HeaderStyle HorizontalAlign="Center" Wrap="True" />
                <ItemStyle HorizontalAlign="Center" />
            </asp:HyperLinkField>
        <asp:BoundField DataField="Action" HeaderText="Action" 
            SortExpression="Action" >
          <HeaderStyle HorizontalAlign="Center" />
          </asp:BoundField>
        <asp:BoundField DataField="Owner" HeaderText="Owner" 
            SortExpression="Owner">
          <HeaderStyle HorizontalAlign="Center" />
          <ItemStyle Wrap="False" />
          </asp:BoundField>
        <asp:BoundField DataField="TargetDate" HeaderText="Target Date" 
            SortExpression="TargetDate"  DataFormatString="{0:dd-MM-yyyy} " >
          <HeaderStyle HorizontalAlign="Center" Wrap="True" />
          <ItemStyle Wrap="False" />
          </asp:BoundField>
        <asp:BoundField DataField="Action Status" HeaderText="Action Status" 
            SortExpression="Action Status" >
          <HeaderStyle HorizontalAlign="Center" Wrap="True" />
          <ItemStyle Wrap="False" />
          </asp:BoundField>
     </Columns>
       <PagerStyle CssClass="pgr" />
    </asp:GridView> 
```

任何帮助都是提前得到的。

问候贝蒂

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:43:36.860

您可以确定用户选择了哪个选项，然后在代码隐藏中设置数据源，而不是在 aspx 中将它们连接起来。

伪代码假定如果选择了 FilterUsers 下拉列表，则绑定到 Action By User 数据源：

```
if(IsPostBack){
    if(ddlFilterUsers.SelectedValue <> ""){
        grdActions.DataSource = dsActionsByUser;
        dsFilterUsers.DataBind();
        //etc
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:48:55.047

在后面的代码中，在**ddFilterStatus_SelectIndexChanged()**事件中，检查适当的“操作状态”并选择数据源，如下所示，

```
 if(ddFilterStatus.SelectedValue == someid1)
 {

     grdActions.DataSource =  appropriate datasource

 }
 else
 {
      grdActions.DataSource =  appropriate datasource
  }
  grdActions.DataBind() 
```

希望这可以帮助...

# c# - C#：读取巨大的 CSV 文件

> ID：10819555
> 
> 赞同：-4
> 
> 时间：2012-05-30T15:37:01.193
> 
> 标签：c#, csv

我正在解析一个 40MB 的 CSV 文件。

它现在工作得很好，而且很容易解析，我唯一的问题是性能，这当然很慢。

我想知道是否有一种方法可以改进这一点，因为我只需要通过我找到的键找到然后停止循环，所以如果条目位于文件的开头，它会很快完成，但如果它在结束需要一段时间。

我可以通过给它一个随机的起始线来平衡它，但算法仍然是 O(n) ......所以我不确定它是否真的值得。

有没有办法改进我的顺序解析算法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:44:17.713

首先：“阅读巨大的 CSV 文件”和“所以我正在解析一个 40MB 的 CSV 文件。”。我这里有 10+ 千兆字节的空间分隔文件 - 你会怎么称呼它们？

另外：文件的大小无关紧要，您通常会逐行处理它们。

> 我唯一的问题是性能，这当然很慢

定义。你觉得什么是慢？正确完成后解析它们非常快。

> 我想知道是否有办法改进这一点，因为我只需要通过我找到的键找到然后停止循环，所以如果条目位于文件的开头，它会很快完成，但如果它在结束需要一段时间。

不要使用 CSV 文件？60 多年前，人们为此发明了数据库。

> 有没有办法改进我的安全解析算法？

你的意思是除了将解析拉到一个单独的线程中，并使用高效的代码（你可能没有 - 没人知道）。

理论上你可以：

*   在一个线程上读取，具有不错的缓冲区（更少的 IO = 更快）

*   将字段拆分为线程 2（可选）

*   使用任务来解析字段（每行每个字段一个），以便您使用所有处理器）。

我目前正在处理一些（大约 10.000 个）文件（遗憾的是，大小为两位数 gigabte）并且......我采用这种方式（必须以特定顺序处理它们）以充分使用我的计算机。

这应该会给你很多 - 说真的，一个 40mb 的文件应该在 0.x 秒 (0.5 - 0.6) 内加载。

仍然是非常低效的。您没有像所有人一样将文件加载到数据库中的任何原因吗？CSV 作为某种传输格式很好，但它作为数据库很糟糕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:40:27.507

当然。

假设您按字母顺序排列。
然后，从中间开始。
每次迭代，移动到顶部或底部的中间；哪个有相应的密钥。

这个算法有 O(log *n* )。

这被称为“二分搜索”，是“Mike Christianson”在他的评论中所建议的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-30T15:39:32.130

为什么不将 csv 转换为普通数据库。即使是 sqlexpress 也可以。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T15:43:16.123

建议您将一个 40Mb 文件分成较小的几个文件。并且使用 [Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd460720.aspx)可以提高文件处理性能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T16:13:07.147

我相信，这是顺序读取 CSV 文件的最快方法。可能还有其他方法可以从 CSV 中提取数据，但如果您仅限于这种方法，那么此解决方案可能适合您。

```
const int BUFFER_SIZE = 0x8000;  //represents 32768 bytes
public unsafe void parseCSV(string filePath)
{
     byte[] buffer = new byte[BUFFER_SIZE];
     int workingSize = 0; //store how many bytes left in buffer
     int bufferSize = 0; //how many bytes were read by the file stream
     StringBuilder builder = new StringBuilder();
     char cByte; //character representation of byte
     using (FileStream fs = new FileStream(filePath, FileMode.Open, FileAccess.Read))
     {
         do
         {
              bufferSize = fs.Read(buffer, 0, BUFFER_SIZE);
              workingSize = bufferSize;
              fixed (byte* bufferPtr = buffer)
              {
                   byte* workingBufferPtr = bufferptr;
                   while (workingSize-- > 0)
                   {
                        switch (cByte = (char)*workingBufferPtr++)
                        {
                            case '\n':
                                break;
                            case '\r':
                            case ',':
                                builder.ToString();
                                builder.Clear();
                                break;
                            default:
                                builder.Append(cByte);
                                break;
                        }
                   }
              }
         } while (bufferSize != 0);
     }
} 
```

解释：

*   将文件读入字节缓冲区。这将使用基本`Filestream`类来完成，它可以访问总是快速的`Read()`
*   不安全的代码。虽然我通常建议不要使用不安全的代码，但在遍历任何类型的缓冲区时，使用指针可以带来加速。
*   `StringBuilder`因为我们会将字节连接成可用的字符串来测试密钥。StringBuilder 是迄今为止将字节附加在一起并获得可用字符串的最快方法。

请注意，此方法与[RFC 4180](https://www.rfc-editor.org/rfc/rfc4180)相当抱怨，但如果您处理引号，您可以轻松修改我发布的代码以处理修剪。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T15:50:55.697

您可以将 CSV 加载到 DataTable 并使用比循环更快的可用操作

将其加载到数据库并对其执行操作是另一种选择

# api - Magento 1.7 REST API 网址是什么？

> ID：10819559
> 
> 赞同：3
> 
> 时间：2012-05-30T15:37:12.920
> 
> 标签：api, magento, rest, magento-1.7

在 magento 上发出 REST 请求的 URL 是什么？

我的 Magento 安装在服务器根目录上运行`http://myserver.com/`，没有 magento 目录。

我怎么知道网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T07:37:32.047

REST API 中的所有 URL 都具有以下基本 URL。

```
 http://myserver.com/api/rest/ 
```

例如，如果您想要 Magento 中的客户列表，请使用 GET HTTP 方法：

```
 http://myserver.com/api/rest/customers 
```

在哪里

```
http://myserver.com/api/rest/ - endpoint
/customers - action URL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T08:21:21.880

[http://myserver.com/index.php/api](http://myserver.com/index.php/api)用于 Soap [http://myserver.com/index.php/api/rest](http://myserver.com/index.php/api/rest)用于 REST

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T17:03:21.137

REST [wiki 页面](http://www.magentocommerce.com/wiki/doc/webservices-api/introduction_to_rest_api)包含您需要的信息。

```
https://magentohost.example.com/api/rest/ 
```

# html - 用户选择：无导致 Safari 上无法访问输入字段

> ID：10819565
> 
> 赞同：17
> 
> 时间：2012-05-30T15:37:30.400
> 
> 标签：html, css

使用这些 css 样式，我可以防止页面上突出显示的文本选择。但这会导致输入字段被 Safari 上的用户输入锁定。

```
* {
-webkit-touch-callout: none;
-webkit-user-select: none; // locks fields on Safari
-khtml-user-select: none; // locks fields on Safari
-moz-user-select: none;
-ms-user-select: none;
user-select: none;      
} 
```

Safari 有没有办法在不干扰输入字段的情况下防止用户选择？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-30T15:42:28.290

为什么不将样式应用于除输入之外的所有内容？

css3方式： `*:not(input){...}`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-02-05T13:31:01.993

没什么新鲜的 ：）

```
*:not(input, textarea){
    -webkit-touch-callout: none;
    -webkit-user-select: none; // locks fields on Safari
    -khtml-user-select: none; // locks fields on Safari
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-14T10:02:12.583

对于 css 中的每种情况：

```
*:not(input), *:focus:not(input) {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  outline-style:none;/*IE*/
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-18T14:07:52.583

我需要一些更精确的东西。

```
input[type=text] 
{
  -webkit-user-select: text;
}

input[type=password]
{
  -webkit-user-select: all;
} 
```

# c# - 如何正确更新与瞬态对象的 NHibernate 多对多关系？瞬态对象异常

> ID：10819567
> 
> 赞同：2
> 
> 时间：2012-05-30T15:37:39.177
> 
> 标签：c#, nhibernate, many-to-many, transient

尝试保存属于多对多关联的对象时，我收到了 TransientObjectException。我有点理解为什么会发生这种情况，但想了解如何正确完成我正在尝试做的事情。

**简而言之，我想做的是：**

我的应用程序有一个用户列表和一个角色列表。用户可以分配多个角色，角色可以分配给多个用户。有一个网页，管理员可以在其中执行这些分配，并且可以双向完成分配（例如，管理员可以选择一个用户，然后向其添加角色；或者，选择一个角色并向其添加用户）。

例如，假设管理员在用户“Alice”上单击“编辑”。管理员会看到可用角色列表和已分配给 Alice 的角色列表。然后管理员为 Alice 分配一个新角色并单击“保存”。

在服务器上，从客户端接收临时用户和分配的角色对象。如果我只是将临时角色列表分配给用户对象（例如，`user.Roles = roles`），我可以很好地更新。但是，如果我在进行此分配之前碰巧从数据库中读取了用户，我会在关联的角色对象上得到一个 TransientObjectException。

**类定义：**

```
public class Role
{
    public Guid ID { get; set; }
    public virtual IList<User> Users { get; set; }
}

public class User
{
    public Guid ID { get; set; }
    public virtual IList<Role> Roles { get; set; }
} 
```

**映射：**

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="Role">
    <id name="ID">
      <generator class="guid"/>
    </id>

    <bag name="Users" table="Role_User" lazy="false" cascade="none">
      <key column="RoleID" />
      <many-to-many column="UserID" class="User" />
    </bag>
  </class>
</hibernate-mapping>

<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="User">
    <id name="ID">
      <generator class="guid"/>
    </id>

    <bag name="Roles" table="Role_User" lazy="false" cascade="none">
      <key column="UserID" />
      <many-to-many column="RoleID" class="Role" />
    </bag>
  </class>
</hibernate-mapping> 
```

**要保存的代码（工作）**

```
public void UpdateUser(User user, IList<Role> associatedRoles)
{
    using (var session = _sessionFactory.OpenSession())
    {
        user.Roles = associatedRoles;
        session.Merge<User>(user);
    }
} 
```

**要保存的代码（失败）**

```
public void UpdateUser(User user, IList<Role> associatedRoles)
{
    using (var session = _sessionFactory.OpenSession())
    {
        User originalUser = session.Get<User>(user.ID);
        // Code that does some audit reporting/logging
        LogDifferences(originalUser, user);
        user.Roles = associatedRoles;
        session.Merge<User>(user);
    }
} 
```

对象是一个未保存的瞬态实例 - 在合并之前保存瞬态实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T02:00:54.650

Jouni Aro 是对的……您的会话中不能有两个具有相同 ID 的实体实例。

问题是以下之一：

1.  您正在尝试`originalUser`从数据库加载，但`user`已附加到同一会话
2.  你已经加载了`originalUser`，然后尝试合并`user`到同一个会话 - 首先驱逐 originalUser，正如 Jouni 建议的那样

无论如何，您真的需要加载原始用户来了解更改内容吗？NHibernate 还有其他方法可以做到这一点。你试过[拦截器](http://www.nhforge.org/doc/nh/en/index.html#objectstate-interceptors)吗？

这是一种潜在的用法： http: [//nhforge.org/wikis/howtonh/finding-dirty-properties-in-nhibernate.aspx](http://nhforge.org/wikis/howtonh/finding-dirty-properties-in-nhibernate.aspx)。[谷歌](https://www.google.com/search?q=nhibernate%20interceptors)更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T19:17:35.793

Miroslav Popovic 的观点非常相关；但是，就我而言，由于数据库中的实体将版本设置为空 guid，因此我遇到了问题。这些记录是在 NHibernate 之外创建的。在保存它们之间的关联时，NHibernate 失败了，因为它检测到其中一个关联条目是由于其版本为 0 的瞬态对象，即使它引用了现有项目。

# c# - 在 C# 中全局定义一个函数

> ID：10819570
> 
> 赞同：1
> 
> 时间：2012-05-30T15:37:47.197
> 
> 标签：c#, function, global, definition

我有两个函数，我似乎在软件中包含了很多用于在类型之间转换字符串和字节数组。用法是这样的：

```
string str = "Hello world";
byte[] b = strToByteArray(str); 
```

首先，有没有办法可以将它包含在 System 命名空间中，这样我就不必再在代码中定义它了？

其次，有没有办法将它定义为字符串类的一部分，所以用法更像：

```
string str = "Hello world";
byte[] b = str.ToByteArray(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:39:46.230

您所要求的由[Extension Methods](http://msdn.microsoft.com/en-us/library/bb383977.aspx)在 C# 中提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-30T15:40:52.207

**你为什么不使用`System.Text.Encoding.Unicode.GetBytes`？**

> 首先，有没有办法可以将它包含在 System 命名空间中，这样我就不必再在代码中定义它了？

我不知道您所说的“不再在代码中定义它”是什么意思。你可以添加任何你想要的东西`System`，但这通常是不受欢迎的。说啊

```
namespace System {
    // add classes here
} 
```

C# 没有您想要的顶级方法。[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2009/06/22/why-doesn-t-c-implement-top-level-methods.aspx)之前已经讨论过这个问题。

> 其次，有没有办法将它定义为字符串类的一部分，所以用法更像：

我想你可以定义一个扩展方法`string`：

```
public static class StringExtensions {
    public static byte[] GetBytes(this string s) {
        // do something and return byte[]
    }
} 
```

如果需要，请将其放在命名空间中`System`。同样，这通常是不受欢迎的，您仍然必须引用包含定义的程序集。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T15:40:32.757

不要重新发明轮子，而是使用**[Encoding](http://msdn.microsoft.com/en-us/library/ds4kkd55.aspx)**类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:41:11.210

您所需要的只是namespace中的自定义[扩展方法](http://msdn.microsoft.com/en-us/library/bb383977.aspx)`System`。

```
namespace System
{
    public static class StringExtensions
    {
        public static byte[] ToByteArray(this string source)
        {
            // return result
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T15:41:12.847

请参阅[为什么在 C# 中使用 global 关键字？](https://stackoverflow.com/questions/3552763/why-use-global-keyword-in-net)有关其他信息...您可以添加 using 语句来实现您正在寻找的语义，或者您可以使用 global 关键字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-30T15:40:17.590

1.  不; C# 不支持顶级函数

2.  您正在寻找扩展方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-30T15:40:52.400

您可以为字符串编写一个扩展方法来满足您的需要： [http ://csharp.net-tutorials.com/csharp-3.0/extension-methods/](http://csharp.net-tutorials.com/csharp-3.0/extension-methods/)

然后你可以用每个字符串调用它：

```
byte[] b = "Hello world".ToByteArray(); 
```

对于实现，您可以顺便使用 Encoding.GetBytes

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T15:46:39.507

> 首先，有没有办法可以将它包含在 System 命名空间中，这样我就不必再在代码中定义它了？

？？？你想要什么？

系统命名空间？将它们放入系统命名空间中的（静态）类中。命名空间与程序集、dll 等无关——你可以使用任何你喜欢的东西。

另外，做大多数人都会做的事——用工具类开始一个项目。我周围有一些用于通用代码。

# jquery-mobile - jquery mobile 和安装了 splitview 脚本的对话框

> ID：10819571
> 
> 赞同：0
> 
> 时间：2012-05-30T15:37:47.530
> 
> 标签：jquery-mobile, dialog

我在网上找到了这个脚本......我想在右上角的星号上添加一个简单的对话框，但我无法让它工作。

已经尝试使用下面的代码（第 118 行 main.html）

```
<td rowspan="2"><div><a href="foo.html" data-rel="dialog"><img src="img/star.png" /></a></div></td> 
```

显然我已经创建了 foo.html 页面......但直到现在没有运气！

在这里你可以找到代码...

[http://espediasap.espedia.it:8080/PrototipoDDP/main.html](http://espediasap.espedia.it:8080/PrototipoDDP/main.html)

我希望有人能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:03:44.987

考虑这个例子：

**页 A**

```
<div data-role="page">

    <div data-role="content">
        <a href="B.html" data-icon="star" data-iconpos="right" data-role="button" data-rel="dialog">Goto B page</a>
    </div>

</div> 
```

**页 B**

```
<div data-role="page">

    <div data-role="content">
        <h3>Page B</h3>
    </div>

</div> 
```

# iphone - iPhone 相机亮度...它是如何物理测量的？

> ID：10819572
> 
> 赞同：3
> 
> 时间：2012-05-30T15:37:52.180
> 
> 标签：iphone, camera, exif, brightness, luminance

我希望有人能回答这个问题，它已经困扰我一段时间了，我似乎无法得到一个可靠的答案。

iPhone 如何通过其摄像头准确测量场景亮度（或亮度，如果您愿意的话）？它是从传感器上的像素测量它，还是专门用于镜头亮度传感器？

除了通过 EXIF 数据之外，还有其他方法可以读取这些原始亮度信息吗？

提前致谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:20:11.277

我通过实验确定亮度是通过相机传感器测量的，而不是通过镜头的离散传感器测量的。感谢所有阅读和/或回答此问题的人！

亲切的问候，

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:38:19.067

我不知道公共 API，但这显示了一种获取它的方法

[http://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera](http://b2cloud.com.au/tutorial/obtaining-luminosity-from-an-ios-camera)

最后的建议是使用这个API

[https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html)

捕获原始未压缩图像帧并对其使用亮度函数。要获取 EXIF，您需要调出相机并让用户拍照。

如果你这样做，你将通过测量传感器上的像素来做到这一点。我不知道 Apple 是如何做到的，但我没有看到任何地方提到亮度传感器。接近传感器中使用了一种环境光，但这并不相同。

# objective-c - 如何获取 NSDictionary 存储的 NSArray 的计数？

> ID：10819573
> 
> 赞同：1
> 
> 时间：2012-05-30T15:37:56.780
> 
> 标签：objective-c, foundation

我有一个`NSDictionary`（使用 JSON 解析`JSONObjectWithData`，如果相关的话），看起来像：

```
{
ids =     (
    49939999,
    44754859,
    14424892,
    16311801,
    16045487,
    31247745,
    5982852
);
"next_cursor" = 0;
"next_cursor_str" = 0;
"previous_cursor" = 0;
"previous_cursor_str" = 0;
} 
```

当使用`NSLog(@"%@", jsonResult);`.

我正在使用 访问 id `friends = [jsonResult objectForKey:@"ids"];`，并且希望`friends`是 type `NSArray`，但显然它是 type `__NSCFArray`。为什么？

然后我尝试使用来获取朋友的大小，`[friends count]`但这会在运行时产生异常。

如何获取 NSDictionary 存储的“NSArray”的计数？

**更新：代码**

```
 NSError *jsonError = nil;
        id jsonResult = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonError];
        if (jsonResult != nil) {

            self.friends = [jsonResult objectForKey:@"ids"];

            NSLog(@"%@", self.friends);

            NSLog(@"%@", [self.friends class]);

            NSLog(@"%@", [self.friends count]);

            dispatch_sync(dispatch_get_main_queue(), ^{
                [self.tableView reloadData];
            });                
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:43:20.873

NSCFArray 是 NSArray 的子类。大多数情况下，当您处理 NSArray 时，这就是您正在处理的具体类。这就是文档中说 NSArray 是类集群时的含义。

您的崩溃是因为当您尝试打印时`[friends count]`，您使用了格式字符串`@"%@"`。`%@`告诉 NSLog 期待一个对象，但这是一个 NSUInteger。相反，你应该这样做`NSLog(@"%lu", (unsigned long)[friends count])`。（如果您对格式说明符的概念不完全清楚，Apple 有一个[方便的指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:43:18.383

`__NSCFArray`只是用于支持所谓的免费桥接`NSArray`的基础结构。`CFArray`使用这个：

```
NSArray *friends = (NSArray*)[jsonResult objectForKey:@"ids"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:20:31.517

哇，那是我自己的愚蠢。我刚刚发现`NSLog(@"%@")`只需要一个对象。您必须专门用于`NSLog(@"%d")`输入整数。

不过，我不确定为什么在编译时没有检测到这一点。

来源：[http ://cocoadev.com/wiki/NSLog](http://cocoadev.com/wiki/NSLog)

# c# - 如何使用 C# 列出活动的应用程序窗口

> ID：10819575
> 
> 赞同：1
> 
> 时间：2012-05-30T15:38:00.487
> 
> 标签：c#, windows

我需要能够列出 Windows 机器上的所有活动应用程序。我一直在使用这个代码...

```
 Process[] procs = Process.GetProcesses(".");
  foreach (Process proc in procs)
  {
      if (proc.MainWindowTitle.Length > 0)
      {
          toolStripComboBox_StartSharingProcessWindow.Items.Add(proc.MainWindowTitle);
      }
  } 
```

直到我意识到当在各自的窗口中打开多个文件时，这并没有列出像 WORD 或 ACROREAD 这样的情况。在这种情况下，使用上述技术仅列出最顶层的窗口。我认为这是因为即使打开了两个（或更多）文件，也只有一个进程。所以，我想我的问题是：如何列出所有窗口而不是它们的底层进程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-30T15:41:15.780

在 user32.dll 中使用 EnumWindows 进行 pinvoke。像这样的东西会做你想做的事。

```
public delegate bool WindowEnumCallback(int hwnd, int lparam);

[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool EnumWindows(WindowEnumCallback lpEnumFunc, int lParam);

[DllImport("user32.dll")]
public static extern void GetWindowText(int h, StringBuilder s, int nMaxCount);

[DllImport("user32.dll")]
public static extern bool IsWindowVisible(int h);

private List<string> Windows = new List<string>();
private bool AddWnd(int hwnd, int lparam)
{
    if (IsWindowVisible(hwnd))
    {
      StringBuilder sb = new StringBuilder(255);
      GetWindowText(hwnd, sb, sb.Capacity);
      Windows.Add(sb.ToString());          
    }
    return true
}

private void Form1_Load(object sender, EventArgs e)
{
    EnumWindows(new WindowEnumCallback(this.AddWnd), 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-21T18:58:23.657

我做了一个类似的方法，但它也过滤窗口样式 ToolWindow 和隐藏窗口存储应用程序，这些应用程序通过被隐藏来绕过隐藏标志。

```
public static class WindowFilter
{
    public static bool NormalWindow(IWindow window)
    {
        if (IsHiddenWindowStoreApp(window,  window.ClassName)) return false;

        return !window.Styles.IsToolWindow && window.IsVisible;
    }

    private static bool IsHiddenWindowStoreApp(IWindow window, string className) 
        => (className == "ApplicationFrameWindow" || className == "Windows.UI.Core.CoreWindow") && window.IsCloaked;
} 
```

上面的例子是 github 的一个项目的一部分，你可以看到其余的代码。 [https://github.com/mortenbrudvik/WindowExplorer](https://github.com/mortenbrudvik/WindowExplorer)

# ios - 显示 EPS 图像

> ID：10819578
> 
> 赞同：2
> 
> 时间：2012-05-30T15:38:07.717
> 
> 标签：ios, eps

我想在 IOS 应用程序中显示 EPS 图像，但我们不想将这些图像转换为任何其他格式。这些是矢量图像，不能转换为光栅图像。我想展示缩放图像而不失真的能力。

那么有什么办法可以做到这一点，我正在使用 HTML 和 Phonegap 来开发应用程序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-30T15:44:19.720

将它们转换为 SVG。矢量图形并受 HTML5/Webkit 支持...

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-05T06:53:59.957

我会使用 InkScape。它是一个开源应用程序，基本上是 Adob​​e Illustrator light。具有许多与 AI 相同的功能，但没有强大的工具集。

# jquery - 在删除按钮之前捕获按钮？

> ID：10819587
> 
> 赞同：0
> 
> 时间：2012-05-30T15:38:48.773
> 
> 标签：jquery, jquery-ui, jquery-selectors

我创建了一个 jsfiddle，因为我认为这将是显示问题的最佳方式。基本上，脚本可以改变按钮，但是按钮改变后，标题不会改变。我假设这是因为原始按钮已被替换：

[http://jsfiddle.net/cEu8f/5/](http://jsfiddle.net/cEu8f/5/)

是否有可能以某种方式捕获原始按钮，以便即使在删除按钮后也可以使用它来删除替换标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:45:06.280

您可以[缓存](http://www.stoimen.com/blog/2010/06/19/speed-up-the-jquery-code-selectors-cache/)`outer_div`元素（示例[）](http://jsfiddle.net/karalamalar/cEu8f/8/)；

```
$('#some_button').live('click', function() {
    some_function( $(this) );
});

function some_function( that ) {
    var $outer_div = that.closest('.outer_div');

    $outer_div
        .find('.main')
        .empty()
        .append( '<input type="button" id="some_other_button" value="click me 2" />' )
        .end()
        .find('.header')
        .empty()
        .append( "new header data" );
} 
```

还要注意[`.end()`](http://api.jquery.com/end)功能。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:43:17.480

尝试更改您的功能，如下所示，

```
function some_function( that ) {
    var $outerDiv = that.closest('.outer_div');
    $outerDiv.find('.main').empty().append( '<input type="button" id="some_other_button" value="click me 2" />' );    
    $outerDiv.find('.header').empty().append( "new header data" );
} 
```

[**演示**](http://jsfiddle.net/cEu8f/6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:44:09.143

发生这种情况是因为`that`当您从 DOM 中删除它时元素不再存在。但是，您可以“缓存”父`div`元素。

```
function some_function( that ) {
    var div = that.closest('.outer_div');
    div.find('.main').empty().append( '<input type="button" id="some_other_button" value="click me 2" />' );     
    div.find('.header').empty().append( "new header data" );
}​ 
```

**演示：http:** [//jsfiddle.net/cEu8f/7/](http://jsfiddle.net/cEu8f/7/)

# syntax - clojure 需要语法原理

> ID：10819591
> 
> 赞同：18
> 
> 时间：2012-05-30T15:39:11.040
> 
> 标签：syntax, clojure, include, quoting

我很难理解（因此记住）这里描述的 clojure require 语法：http: [//clojuredocs.org/clojure_core/1.3.0/clojure.core/require](http://clojuredocs.org/clojure_core/1.3.0/clojure.core/require)。这似乎既违反直觉又不统一。

例如，在下面为什么需要引用这个向量：

```
(require '[clj-json.core :as json]) 
```

反直觉，因为通常在 clojure 中不引用向量（引用列表并将向量视为数据）。

并且不统一，因为在这种情况下，向量没有被引用：

```
(ns xxx 
    (:require [clj-json.core :as json])) 
```

我意识到 require 函数和`:require`ns 宏内部的用法只是在光学上相似，但仍然如此。

还有其他一些奇怪的东西，例如我可以这样做：

```
(require '(clj-json.core)) 
```

但我不能这样做：

```
(require '(clj-json.core :as json)) 
```

有人可以回答这些问题：

1.  在第一个示例中，为什么需要引用向量？
2.  为什么不需要在ns宏中引用？
3.  为什么列表符号不允许`:as`？

我想知道为什么事情是这样的，或者是否在设计时没有注意到不一致。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T16:00:08.627

1.  在第一个示例中，为什么需要引用向量？

`require`是一个函数，所以你必须引用它们以防止评估。否则，将在当前上下文中查找这些符号，可能会导致错误或可能出现意外行为。顺便说一句，我认为这不太正确：“反直觉，因为通常在 clojure 中不引用向量（引用列表并且将向量视为数据）。”

这对您来说可能与直觉相反，但是引用向量（或地图或集合）并没有错。我经常在 REPL 上快速测试某些东西，并且不想`:`为 map 或 vector 中的每个关键字键入 a，例如：

```
user=> '{a 1 b 2 c 3} 
```

而不是：

```
user=> {:a 1 :b 2 :c 3} 
```

如果我只是想快速获取一些数据来测试某些东西，第一个输入速度会非常快。

1.  为什么不需要在ns宏中引用？

宏不评估它们的参数，它们比普通函数调用更懒惰，因此不需要引用符号 (`clj-json.core`和) 来防止评估。`json`

1.  为什么列表符号不允许：as？

~~对不起，我不知道这个问题的答案。~~

啊，我看了一下文档`require`，发现了。支持另一种形式：

“以下将加载库 clojure.zip 和 clojure.set 缩写为 's'。”

```
(require '(clojure zip [set :as s])) 
```

# java - 如何在 Play JPA 中保存对象列表

> ID：10819593
> 
> 赞同：1
> 
> 时间：2012-05-30T15:39:20.150
> 
> 标签：java, mysql, jpa, orm, playframework

我有一个 LinkedBlockingQueue，我想将所有元素保存到数据库中。我知道我可以一一保存：

```
ObjectModel om = new ObjectModel();
om.save(); 
```

但是，这意味着我必须遍历所有元素并为每个元素建立新的连接。我可以一次插入整个列表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T20:11:37.533

在 play 1.x 中，当服务器收到请求时，play/jpa 将向您的数据库打开一个事务。如果出现任何问题，该事务将自动回滚，否则在向客户端发送响应时自动提交。

因此，即使您遍历您的 JPA 实体并在它们上一个接一个地调用 save()，它们都将在同一个事务中使用相同的连接执行。

我认为它在 Play 2 中的工作方式相同，但老实说，我不知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:47:48.673

简单的答案不会。一些人将不得不对所有单个对象执行插入查询。

您不必为每个插入创建新连接。您应该在每次迭代中创建一个连接并在同一连接上触发插入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T20:26:07.787

也许[这个问题](https://stackoverflow.com/questions/448181/batch-inserts-with-jpa-ejb3)能让你走得更远。如果你知道如何在底层数据库上做你想做的事，你也可以使用本机查询（你可以通过 EntityManager 创建），我想。

# installation - Red5 演示不起作用

> ID：10819597
> 
> 赞同：0
> 
> 时间：2012-05-30T15:39:28.873
> 
> 标签：installation, centos, red5

我刚刚在我的服务器上安装了 red5，安装似乎工作正常。正如你在这里看到的：http: [//onelifemedia.com :5080](http://onelifemedia.com:5080)

我通过使用这个演练走了这么远：[http ://www.webhostingtalk.com/showthread.php?t=1046590](http://www.webhostingtalk.com/showthread.php?t=1046590)

/demos 页面给了我一个 404 错误。所以我登录到服务器，检查“demo”目录是否已经存在。不是。

我安装的应用程序是从根目录开始的目录。我不确定这是否正确。

无论哪种方式，我的最终目标都是让主页之外的东西真正起作用。如果我可以让演示工作，那么希望我能顺利进行。

我想我的问题可以这样分解：有谁知道如何让演示工作？我应该忘记演示，并尝试开始编写自己的代码吗？如果我应该编写自己的代码，我应该如何安装它？由于安装程序没有正确安装演示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:55:30.153

该教程很好，但您不需要管理应用程序。使用教程中的安装程序链接并安装您要使用的演示。“演示”目录的内容只是用于访问您使用安装程序应用程序安装的服务器演示的 swf 文件。例如，选择“oflaDemo”，然后从主页导航到 demos/oflaDemo 等等。

我知道我偏向于成为核心开发人员，但我们已尝试使服务器尽可能易于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T06:34:25.460

我可以从最新的 svn 主干安装演示，检查源代码，使用 ant&ivy 构建和运行服务器，您可以安装两个示例应用程序（oflaDemo 和 SOSample）。您可能需要使用 ivy 命令解决安装过程中的一些常见问题。

E:\dev\red5\java\server\trunk>ant ivyclear dist

( *)Red5 用户邮件列表可能会对您有所帮助，因为这并不是 Red5 源的问题。(* )http://stackoverflow.com/questions/11156222/red5-demos-not-working/11935532#11935532

我可以根据 Red5 用户邮件列表中的信息和 Mr.Mondain 在 Stackoverflow 中的一篇帖子中的评论来解决问题

# java - 如何将位图从服务器发送到客户端？

> ID：10819611
> 
> 赞同：1
> 
> 时间：2012-05-30T15:40:00.937
> 
> 标签：java, android, google-app-engine, servlets

在我的应用程序中，我使用 MultiPartEntity 将位图上传到服务器。

**编码：**

```
public static boolean UploadFile(String stringUrl, byte[] bitmapArray) throws Exception { 
  String uploadUrl = stringUrl;
  HttpPost postRequest = new HttpPost(uploadUrl);
  MultipartEntity entity = new MultipartEntity();
  entity.addPart("image", new ByteArrayBody(bitmapArray, "image/png", "image"));
  postRequest.setEntity(entity);
  HttpResponse httpResponse;
  HttpClient httpClient = getHttpClient();
  httpClient.getParams().setBooleanParameter("http.protocol.handle-redirects",false);
  httpResponse = httpClient.execute(postRequest);
    .
    .
} 
```

并从请求中获取位图并将其存储在 blob 中。

**编码：**

```
private void handleFileUpload(HttpServletRequest request, HttpServletResponse response) {
  try {
    ServletFileUpload upload = new ServletFileUpload();
    FileItemIterator iter = upload.getItemIterator(request);
    FileItemStream imageItem = iter.next();
    InputStream imgStream = imageItem.openStream();
    Blob imageBlob = new Blob(IOUtils.toByteArray(imgStream));
    MyImage myImage = new MyImage(imageItem.getName(), imageBlob);
      .
      .
    } catch (FileUploadException e) {       
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
} 
```

我的问题是：如何使用响应将其发送回客户端？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:49:19.753

发回一个链接作为响应，并从收到的链接开始下载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:51:52.850

```
response.setContentType("image/png"); // fill proper image type
response.getOutputStream().write(IOUtils.toByteArray(imgStream)); 
```

[使用 Google App Engine (Java) 提供动态图像的](https://developers.google.com/appengine/articles/java/serving_dynamic_images)更多信息

# delphi - 拉撒路随机范围函数

> ID：10819612
> 
> 赞同：0
> 
> 时间：2012-05-30T15:40:04.713
> 
> 标签：delphi, pascal, lazarus

我对 RandomRange 有疑问，这是代码：

```
procedure TForm1.FormCreate(Sender: TObject);
var
i : Integer;

  function RandomRange(const AFrom, ATo: Integer): Integer;
  begin
  Result := RandomRange(15,20);
  Case Result of
  15 : ShowMessage('message1');
  16 : ShowMessage('message2');
  17 : ShowMessage('message3');
  18 : ShowMessage('message4');
  19 : ShowMessage('message5');
  20 : ShowMessage('message6');
  end;
end. 
```

当我尝试编译时，出现以下错误：

```
unit1.pas(46,30) Hint: Parameter "AFrom" not used
unit1.pas(46,37) Hint: Parameter "ATo" not used
unit1.pas(57,4) Fatal: Syntax error, ";" expected but "." found 
```

会是什么呢？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:48:33.307

您的代码中有几个错误。

主要的是你的final`end`后面是a`.`而不是a `;`。`end.`表示单元的结束，但您尚未终止方法块`function RandomRange`或事件处理程序`TForm1.FormCreate`。

这两个警告是因为您没有使用参数。:-) 您将`AFrom`and`ATwo`参数声明给外部`RandomRange`函数，但从不在代码中使用它们。它被对 的内部调用弄糊涂了`RandomRange`，这使编译器对范围感到困惑。

我会将其更改为：

```
function MyRandomRange: Integer;
begin
  Result := RandomRange(15, 20);
  case Result of
    15 : ShowMessage('message1');
    16 : ShowMessage('message2');
    17 : ShowMessage('message3');
    18 : ShowMessage('message4');
    19 : ShowMessage('message5');
    20 : ShowMessage('message6');
  end;
end; 
```

如果编译器抱怨无法找到`RandomRange`，您的`uses`子句中可能缺少一个单元。在Delphi中，`RandomRange`是在单元中定义的`math`；它可能在 Free Pascal 中的同一单元中。

如果您想像原始代码一样将其作为本地函数嵌入，它会是这样的：

```
procedure TForm1.FormCreate(Sender: TObject);

  function MyRandomRange: Integer;
  begin
    Result := RandomRange(15, 20);
    case Result of
      15 : ShowMessage('message1');
      16 : ShowMessage('message2');
      17 : ShowMessage('message3');
      18 : ShowMessage('message4');
      19 : ShowMessage('message5');
      20 : ShowMessage('message6');
    end;
  end;
begin
  MyRandomRange;
end; 
```

# ios - 如何避免在方向更改后调整 UITableView（旋转）单元格的大小？

> ID：10819631
> 
> 赞同：3
> 
> 时间：2012-05-30T15:40:57.017
> 
> 标签：ios, ipad, uitableview, rotation

我正在通过将其旋转 90 度来实现水平 UITableView

```
horizontalShopsTableViewController.view.transform = CGAffineTransformMakeRotation(-M_PI/2); 
```

然后将其单元格向后旋转 90 度：

```
cell.contentView.transform = CGAffineTransformMakeRotation(M_PI/2); 
```

我希望桌子具有灵活的宽度。如果我不将其设置为灵活，则方向更改后一切正常。但是，如果我这样做，单元格的内容就会错位并消失。表格视图的标志“自动调整子视图”为假。

![在此处输入图像描述](../Images/297f8363952545dd9a683665cc4ac25a.png)

任何想法可能是导致问题的原因或可以使用哪些替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:28:10.277

好的，问题是由于 tableview 的宽度是灵活的，因此在旋转后单元格的宽度（实际上是高度）也增加了。我通过继承 UITableView 并覆盖 layoutSubviews 方法克服了这个问题，所以它现在看起来像这样：

```
- (void)layoutSubviews {

    [super layoutSubviews];

    for (UIView* child in [self subviews]) {

        CGRect frame1 = child.frame;
        if ([child isKindOfClass:[UITableViewCell class]]) {
            frame1.size.width = 120;
            child.frame = frame1;        
        } 
    }

} 
```

无论如何，如果我将 Autoresize Subviews 显式设置为 false，我仍然不明白为什么 uitableview 会调整其单元格的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:55:49.213

uuuuh ...你想达到什么目的？自动调整大小系统当然不尊重视图的任何转换。可能您必须手动调整它的大小。

但是你不能用标准的滚动视图做你想做的事吗！？使用转换来旋转 UI 组件并不是最好的主意，因为您会遇到其他问题。

# android - Android 4 中声音的不同行为

> ID：10819633
> 
> 赞同：4
> 
> 时间：2012-05-30T15:41:03.547
> 
> 标签：android, ogg

我有一个游戏，游戏中每得分都会发出“叮”的声音。有时你可以很快连续得分。在这种情况下，我不允许重叠的声音，所以我`isPlaying()`在播放下一个声音之前等待媒体播放器的功能变为假。

到目前为止，在我尝试过的每部手机上（诚然，都是 2.2 或 2.3），结果是令人愉悦的快速连续的声音。

但刚才我用 4.0.3 试用了三星 Galaxy S II。在这台机器上，每个“叮”都被一个很长的间隙隔开。状态的`isPlaying()`持续时间似乎是声音本身的两倍。根据[Audacity](http://audacity.sourceforge.net/)的说法，声音应该持续大约 0.1 秒，但 isPlaying() 会保持 0.28 秒。

声音从 Audacity 保存为 Ogg Vorbis 格式。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:51:35.410

最好[`SoundPool`](http://developer.android.com/reference/android/media/SoundPool.html)用于在游戏中播放快速采样，因为它们不会压缩一次并保存在内存中。`MediaPlayer`可能正在动态解码，导致准备就绪时出现延迟。不知道为什么设备之间存在如此大的差异，但我会尝试使用 SoundPool 看看它是否可以改进。

# object-graph - 在 C# 中构建嵌套或分层对象图

> ID：10819640
> 
> 赞同：2
> 
> 时间：2012-05-30T15:41:14.700
> 
> 标签：object-graph, builder-pattern

我有一个对象层次结构，可以简单地表示为：

```
public class ChannelEntity
{
    ... public properties ....
    public FramesetEntity Frameset { get; set; }
}
public class FramesetEntity
{
    ... public properties ....
    public List<FrameEntity> Frames { get; set; }
}
public class FrameEntity
{
    ... public properties ....
    public List<TimeslotEntity> TimeSlots { get; set; }
}
public class TimeslotEntity
{
    ... public properties ....
    public PlaylistEntity Playlist { get; set; }
} 
```

依此类推，某些对象包含多个嵌套对象。现在我试图找出一种通用且优雅的方法来构建具有可用单个对象的完整对象层次结构。在背景下，我从 Web 服务获取单个对象，其中返回对象包含嵌套子对象的标识符，随后我再次调用该服务以获取嵌套对象数据。一旦我解决了所有必要的数据，我就试图找出一种方法来创建完整的对象层次结构，使用各自的构建器为负责创建自身和必要的子对象（通过它们的构建器）的单个对象，以便调用者可以不必手动创建整个对象图。

# python - Mongodb聚合框架错误

> ID：10819645
> 
> 赞同：0
> 
> 时间：2012-05-30T15:41:46.683
> 
> 标签：python, mongodb, aggregation-framework

我正在尝试使用 pymongo 和 mongo 的聚合框架，这是我从 Python 中得到的：

```
OperationFailure: command SON([('aggregate', 'call_log'), ('pipeline', [{'$match': {u'user': 1}}, {'$project': {'date': 1, 'status': 1, 'number': 1, 'description': 1}}, {'$group': {u'first_number': {u'$first': u'$number'}, '_id': SON([(u'number', u'$number')]), u'avg_number': {u'$avg': u'$number'}}}])]) failed: exception: can't convert from BSON type 2 to double 
```

Python的代码剪切：

```
 #Process grouping
    groups_list = []
    if "fields" in group_json:
        for  k, v in group_json["fields"].items():
            groups_list.append((k,'$' + k))
        if len(groups_list) > 0:
            obj_group_json.update({'_id': SON(groups_list)})
            if "aggregate" in group_json:
                for field in group_json["aggregate"]:
                    if field['func'] == "count":
                        obj_group_json.update({"count_" + field['name']: {'$sum': 1}})
                    else:
                        obj_group_json.update({field['func'] + "_" + field['name']:
                                                       {'$' + field['func']: '$' + field['name']}}) 
```

你有什么想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:17:47.277

[BSON 类型 2](http://bsonspec.org/#/specification)是一个字符串，因此将其转换为整数似乎会引发错误。

你能输出：obj_group_json 吗？另外，检查您的数据 - 您是否有任何不是数字的数字数据？

# php - MySQL选择9个随机和1个定义的记录

> ID：10819647
> 
> 赞同：0
> 
> 时间：2012-05-30T15:41:58.640
> 
> 标签：php, mysql, sql

我的问题很简单，如何在同一个 SQL 语句中选择 9 条随机记录和 1 条已定义记录？到目前为止我能想到的就是这个，它只返回一个合作伙伴记录（定义的一个），而不是其他 9 个随机记录。

```
$sql2 = "SELECT * FROM table WHERE filename = '$partn' AND filename != '$x' ORDER BY RAND() LIMIT 10"; 
```

详细地说，我需要返回 10 条记录，其中一条不应该是 '$x'，其中一条应该是 '$partn'，然后是其他 9 条随机记录，它们都需要以随机顺序显示。

任何帮助，将不胜感激！：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:44:25.000

使用联合： [http ://dev.mysql.com/doc/refman/5.0/en/union.html](http://dev.mysql.com/doc/refman/5.0/en/union.html)

```
(select the one you want)
union
(select 9 randoms that arent the one you want) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T15:45:11.177

```
(SELECT * FROM table WHERE file='$x')
UNION ALL
(SELECT * FROM table WHERE file<>'$x' ORDER BY RAND() LIMIT 9) 
```

# objective-c - 在 NSArray 计数上的目标 c for 循环

> ID：10819649
> 
> 赞同：1
> 
> 时间：2012-05-30T15:42:08.973
> 
> 标签：objective-c, for-loop, nsarray

有谁知道为什么...

Items 是一个分配和初始化的 NSArray*，里面有零个项目

```
for (int i = 0;i < [Items count];i++){

   // WORK FINE DOES NOT ENTER

}

for (int i = 0;i <= [Items count]-1;i++){

   // ENTERS INCORRECTLY!!!

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:45:00.473

Count 被声明为`- (NSUInteger)count`，因此它返回一个无符号整数（或 64 位长整数），并在 32 位上`0 - 1`变为`NSUIntegerMax`40 亿位（在 64 位上是一个更大的数字）。

# c# - Linq 到 NHibernate OrderBy 枚举值

> ID：10819653
> 
> 赞同：3
> 
> 时间：2012-05-30T15:42:26.647
> 
> 标签：c#, nhibernate, fluent-nhibernate, sql-order-by, linq-to-nhibernate

我有以下枚举，它描述了一个项目的状态和一个代表该项目的对象。

```
public Enum Status
{
    Sent,
    Received,
    UnderWork,
    Returned
}

public Class Item
{
    public virtual int Id {get;set;}
    public virtual Status CurrentStatus {get;set;}
    public virtual string ItemDescription {get;set;}
    public virtual int ItemNumber {get;set;}
    public virtual DateTime DueDate {get;set;}
} 
```

我需要创建一个查询，我可以在其中选择多个项目并首先按 CurrentStatus 属性排序，然后按 DueDate 属性排序。困难是我想按 CurrentStatus 排序，方法是将所有具有返回状态的项目放在最后，同时按 DueDate 排序，然后仅按 DueDate 排序所有其他项目并忽略 CurrentStatus。

所以下面的数据列表：

```
ID | CurrentStatus | ItemDescription | ItemNumber | DueDate
-------------------------------------------------------------
1  | Returned      |  Description1   |  123456    | 16/01/2012
2  | Sent          |  Description2   |  234567    | 13/01/2012
3  | Returned      |  Description3   |  345678    | 22/01/2012
4  | Received      |  Description4   |  456789    | 03/01/2012
5  | UnderWork     |  Description5   |  567891    | 10/01/2012
6  | UnderWork     |  Description6   |  678901    | 17/01/2012
7  | Sent          |  Description7   |  789012    | 09/01/2012
8  | Sent          |  Description8   |  890123    | 28/01/2012
9  | Returned      |  Description9   |  901234    | 30/01/2012
10 | Received      |  Description10  |  012345    | 15/01/2012 
```

将使用以下 Linq to NHibernate 进行查询（这给了我一个 QuerySyntaxException：抛出了“Antlr.Runtime.NoViableAltException”类型的异常。）请注意在 LINQPad 中使用此表达式，我可以获得所需的结果。

```
var workList = session.Query<Item>()
                .OrderBy(item => item.Status == Status.Returned)
                .ThenBy(item  => item.DueDate)
                .ToList(); 
```

我希望按以下顺序获取数据列表：

```
ID | CurrentStatus | ItemDescription | ItemNumber | DueDate
-------------------------------------------------------------
4  | Received      |  Description4   |  456789    | 03/01/2012
7  | Sent          |  Description7   |  789012    | 09/01/2012
5  | UnderWork     |  Description5   |  567891    | 10/01/2012
2  | Sent          |  Description2   |  234567    | 13/01/2012
10 | Received      |  Description10  |  012345    | 15/01/2012
6  | UnderWork     |  Description6   |  678901    | 17/01/2012
8  | Sent          |  Description8   |  890123    | 28/01/2012
1  | Returned      |  Description1   |  123456    | 16/01/2012
3  | Returned      |  Description3   |  345678    | 22/01/2012
9  | Returned      |  Description9   |  901234    | 30/01/2012 
```

这可以使用 Linq to NHibernate 来完成吗？如果是这样，我需要对查询进行哪些更改？我也期待 SKip() 和 Take() 所以我不能只从数据库中提取所有内容。我正在使用 SQL Server 2008 Express、NHibernate 3.3.0.4000 和 Fluent Nhibernate 1.3.0.727。

**编辑**

只是为了详细说明我希望如何进行排序。我希望将具有返回状态的项目推到列表的底部，并按截止日期对其进行排序。我希望所有其他项目不按状态排序，仅按截止日期排序，因此它们将始终排在退回的项目之前。这是因为任何返回的东西都不再在工作过程中，我希望它被推到列表的末尾。所以在这种情况下，除了返回的状态值是无关紧要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:53:38.313

这对我有用。NHibernate 应该如何处理状态和生成 SQL`case`语句更加明确

```
var workList = session.Query<Item>()
    .OrderBy(item => item.CurrentStatus == Status.Returned ? 1 : 0)
    .ThenBy(item => item.DueDate)
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T01:46:12.130

您的 LINQ 查询似乎有问题。不确定您是否有意使用它，但您不应该使用它`.OrderBy(item => item.Status)`吗`.OrderBy(item => item.Status == Status.Returned)`？这可能会让 NHibernate 的表达式解析器感到困惑。

你是如何将你的枚举映射到数据库的？到一`int`列（默认）？还是作为字符串？

你能解释一下预期的清单吗？考虑到您是按状态订购的，您不应该先有`Sent`物品，然后`Received`再`UnderWork`有物品吗？`Returned`您预期的列表看起来排序不正确。

# asp.net - ASP.NET WebForms 中 Html.Raw 的替代方案

> ID：10819655
> 
> 赞同：15
> 
> 时间：2012-05-30T15:42:45.727
> 
> 标签：asp.net, webforms

我收到错误“一个潜在的危险请求”..在 Web 表单应用程序中我尝试使用“validatepage=false”和“”然后我尝试了 Server.HtmlEncode，因此它将编码的 html 保存在数据库中。现在，当我在Repeater控件中显示数据时，`Server.HtmlDecode(DataContent.FieldValue("Contents", Container))`它显示带有html标签的文本，如`<p>asfd</p>`..

我该如何解决这个问题？在 razor 视图中 Html.Raw 工作正常，但在 webform 视图/ASP.NET 中有什么替代方法？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-06T13:06:51.490

您可以使用*不会*对值进行编码的 <%= value %> 。

或者您可以实现自己的 HTML.Raw 版本

Html.Raw 返回一个与字符串几乎相同的 IHtmlString 实例，但 ASP.net 不编码 IHtmlString。

复制 HTML.Raw() 的简单函数

```
 /// <summary>
    /// Stops asp.net from encoding the source HTML string.
    /// </summary>
    /// <param name="source"></param>
    /// <returns></returns>
    public static IHtmlString HTMLRaw(string source)
    {
        return new HtmlString(source);
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-30T15:50:42.250

您可以使用 asp:Literal 和 Mode=PassThrough

# selenium - MSBuild 脚本中的 Selenium 测试

> ID：10819660
> 
> 赞同：0
> 
> 时间：2012-05-30T15:42:57.603
> 
> 标签：selenium, msbuild

是否可以在 MSBuild 文件中将 Selenium 脚本作为部署过程的一部分运行？如果人们有它们，我正在寻找示例 MSBuild 片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T20:50:23.893

你的测试框架包装器是什么？如果它是其中一种[支持](http://www.gallio.org/wiki/doku.php?id=gallio)，请查看[http://www.gallio.org/api/html/T_Gallio_MSBuildTasks_Gallio.htm](http://www.gallio.org/api/html/T_Gallio_MSBuildTasks_Gallio.htm)

```
<UsingTask TaskName="Gallio" AssemblyFile="$(ProgramW6432)\Gallio\bin\Gallio.MsBuildTasks.dll" />

<Files Include="*Test*.dll" />

<Gallio
    Files="@(Files)"
    ReportTypes="xml"
    ReportDirectory="$(Directory)"
/> 
```

# methods - 为什么“等于”方法是第三人称单数？

> ID：10819664
> 
> 赞同：2
> 
> 时间：2012-05-30T15:43:13.510
> 
> 标签：methods, naming

为什么“等于”方法是第三人称单数...？

我认为.. 这意味着我会将对象视为第三人称。

是的..我也同意。

那么..为什么修剪，添加方法不是第三人称单数？

这让我很困惑:'(

实际上，我有时认为对于使用第一人称、第二人称和第三人称之间有语法差异的语言的人来说可能是很自然的，因为我的语言韩语在它们之间没有语法差异。

所以..请给我答案：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:47:20.833

我认为因为`Equals`它是布尔值并且将另一个对象作为参数，所以它具有很好的语义。一个常见的用法是：

```
if(a.Equals(b)) {} 
```

它很漂亮。

`Trim()`是你给对象的一种命令。这就像“做那件事”。按照这种方式，`Equals`应该是这样的`TellMeIfYouAreEqualTo`：P

# jquery - 在 jQuery/Coffeescript 中延迟 ajax 调用

> ID：10819668
> 
> 赞同：0
> 
> 时间：2012-05-30T15:43:17.853
> 
> 标签：jquery, ajax, ruby-on-rails-3, coffeescript

这是一些粗略的 javascript/jquery/coffeescript，延迟后会在页面下部的 DIV 中滑动。我在导轨上工作，所以我还遇到了一个端点，该端点为特定幻灯片增加了数据库中的视图计数器。

```
jQuery ->
    $("div[data-slide='true']").delay(20000).animate({opacity: 1,right:'+=350'},1350, 'swing');
    id = $("div[data-slide='true']").data("slide-id")
    $.ajax({url: "http://localhost:3000/firefly/slides/" + id + "/increment", type: "post"});
    $("div[data-close='true']").click ->
        $("div[data-slide='true']").clearQueue().animate({opacity: 0,right:'-=350'},500, 'easeOutBounce'); 
```

我知道这不是最好的 javascript，我真的是 JS 的新手——但我现在的问题是我不知道如何延迟 ajax 调用，所以它只会在幻灯片播放时到达端点动画。现在，当 DOM 完成加载时，它到达终点并增加计数器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:46:18.977

我不知道或使用`coffeescript`（感谢上帝），但您可以使用动画的回调。

使用[这个重载](http://api.jquery.com/animate/)：

```
.animate( properties [, duration] [, easing] [, complete] 
```

将ajax放在`complete`函数回调中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T19:26:48.443

另一个答案：在 jQuery 1.6+ 中，有一个直接传递回调的替代方法：获取一个 Promise，并将回调附加到它。这将使您的代码更清晰地编写，如下所示：

```
var swinging = $("div[data-slide='true']")
               .delay(20000)
               .animate({opacity: 1,right:'+=350'},1350, 'swing')
               .promise();
$("div[data-close='true']").click ->
    $("div[data-slide='true']").clearQueue()
                               .animate({opacity: 0,right:'-=350'},500, 'easeOutBounce');
swinging.done ->
    id = $("div[data-slide='true']").data("slide-id")
    $.ajax({url: "http://localhost:3000/firefly/slides/" + id + "/increment", type: "post"}); 
```

更多关于 Promises 及其优势的信息可以在我的书*[Async JavaScript](http://leanpub.com/asyncjs)*中找到。

# java - 使用 htmlcleaner 解析

> ID：10819672
> 
> 赞同：0
> 
> 时间：2012-05-30T15:43:21.530
> 
> 标签：java, htmlcleaner

我开发了一种方法，允许您使用 htmlcleaner 从特定类中提取项目，现在我想知道......

如何使用 htmlcleaner 提取 html 中的正文及其所有元素？

```
public String htmlParser(String html){

    TagNode rootNode;
    HtmlCleaner html_cleaner = new HtmlCleaner();
    rootNode = html_cleaner.clean(html);
    TagNode[] items = rootNode.getElementsByName("body", true);
    ParseBody(items[0]);
    html = item_found;
    return html;
}

String item_found;
public void ParseBody(TagNode root){
    if(root.getAllElements(true).length > 0){
        for(TagNode node: root.getAllElements(true)){
            ParseBody(node);
        }           
    }else{
        item_found = item_found + root.toString();// root.toString() only brings out the first name inside TagNode 
```

> ```
> - In here I wanted just the text of all items in the body but it would still be beneficial for everyone if the question is complete- 
> ```

```
 //if(root.getText().toString() != null || !(root.getText().toString().equals("null"))){
            //item_found = item_found + root.getText().toString();
        //}
    }
} 
```

# security - 存储从网站上传的服务器端路径

> ID：10819678
> 
> 赞同：1
> 
> 时间：2012-05-30T15:43:44.283
> 
> 标签：security, server-side

为了安全起见，我想将员工合同上传到隐藏的服务器端路径。上传工作正常。

但是，当我登录网站前端时，我还希望能够下载或查看该文件，并带有一个秘密链接。这可能吗？

还有其他想法吗？

Joomla 网站，托管在 Rack Space Cloud Sites 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T02:54:23.537

当然，将文件上传到 webroot 之外的目录，或带有包含“deny from all”的 .htaccess 文件的目录。有一个 sql 表，将主键映射到文件名、文件的内容类型和访问控制信息以及有关此文件的其他元数据。然后将文件保存为主键，所以`/uploads/1`.

然后下载文件，烧一个 sql 查询以确定他们是否应该能够下载文件。

```
<?
//...
$q=mysql_fetch_array($q);
header("content-type: ".$q['content_type']);
print file_get_contents("./uplaods/".intval($q['id']));
?> 
```

# hibernate - 在 Spring MVC 中使用泛型对命令对象进行类型擦除

> ID：10819682
> 
> 赞同：0
> 
> 时间：2012-05-30T15:44:09.103
> 
> 标签：hibernate, generics, spring-mvc

在带有 Hibernate 4.1 的 Spring 3.1 MVC 应用程序中，场景是：

*   网页显示记录列表，用户可以在其中使用复选框选择记录
*   在 POST 时，选定的记录将被删除

由于此功能也出现在其他地方，我想使用泛型以避免复制类似的代码。

逻辑是：

*   在 GET 上，我使用包含休眠对象和布尔值的泛型填充一个列表，并将该列表添加到模型中
*   在 POST 上，我从模型中获取该列表并将其传递给服务以删除选定的记录

代码是：

```
/* list item */
public class SelectionListItem<T> {

    /* holds the hibernate object */
    private T item;
    /* whether the record is selected */
    private boolean selected;

    public SelectionListItem() {

    }

    public SelectionListItem(T item, boolean selected) {
        this.item = item;
        this.selected = selected;
    }

    public T getItem() {
        return item;
    }

    public void setItem(T item) {
        this.item = item;
    }

    public boolean isSelected() {
        return selected;
    }

    public void setSelected(boolean selected) {
        this.selected = selected;
    }
}

/* list that holds the records */
public class SelectionList<T> {

    private List<SelectionListItem<T>> list = new ArrayList<SelectionListItem<T>>();

    public SelectionList() {

    }

    public List<SelectionListItem<T>> getList() {
        return list;
    }

    public void setList(List<SelectionListItem<T>> list) {
        this.list = list;
    }
}

/* Controller for GET */
@RequestMapping(value = "/xxx", method = RequestMethod.GET)
public String functionGET(Model model) {
    // Retrieve data from database and prepare the list
    SelectionList<MyDomainObject> selectionList = someService.getRecordsAndPrepareList();

    // Add command object to model
    model.addAttribute("selectionListCommand", selectionList);

    return "xxx";
}

/* Service that retrieves the records and prepares the list */
public SelectionList<MyDomainObject> getRecordsAndPrepareList() {
    List<MyDomainObject> result = sessionFactory.getCurrentSession().createCriteria(MyDomainObject.class).list();

    SelectionList<MyDomainObject> selectionList = new SelectionList<MyDomainObject>();
    for (MyDomainObject item : result) {
        SelectionListItem<MyDomainObject> e = new SelectionListItem<MyDomainObject>(item, false);
        selectionList.getList().add(e);
    }

    return selectionList;
}

/* Controller for POST */
@RequestMapping(value = "/xxx", method = RequestMethod.POST)
public String functionPOST(
    @ModelAttribute("selectionListCommand") SelectionList<MyDomainObject> selectionListCommand,
    BindingResult result, Model model) {

    // Delete record
    someService.deleteSelectedRecords(selectionListCommand);

    return "xxx;
}

/* Service that deletes the selected records*/
public void deleteSelectedRecords(SelectionList<MyDomainObject> selectionList) {
    for (SelectionListItem<MyDomainObject> item : selectionList.getList()) {
        if (item.isSelected()) {
            sessionFactory.getCurrentSession().delete(item.getItem());
        }
    }
} 
```

在 GET 请求中，SelectionList 被正确填充，并且“T 项”的类型为“MyDomainObject”。

在 POST 时，“T 项目”的类型为“java.lang.Object”，当执行“sessionFactory.getCurrentSession().delete(item.getItem())”时，我得到“org.hibernate.MappingException: Unknown实体：java.lang.Object"

有人可以解释一下是什么原因造成的以及如何解决吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:25:03.693

Hibernate 做了“一些神奇的事情”，并且经常使用反射来访问变量并确定类型。这些类型对于 Hibernate 决定使用哪个映射很重要。

在获取请求中，您提供`MyDomainObject.class`了正确的类。这似乎足以让 Hibernate 找到映射。

发布请求不是这种情况。语句中的 Hibernate`delete(item.getItem())`只获取信息`getItem()`返回一个对象（类型`T`由于类型擦除而被删除并且不适用于 Hibernate）。信息“对象”不允许 Hibernate 找到`item`.

您可以尝试将项目转换为喜欢`delete((MyDomainObject)item.getItem())`或先将其放入类型良好的变量中

```
 MyDomainObject mdoItem = item.getItem();
   sessionFactory.getCurrentSession().delete(mdoItem); 
```

（我不确定这两种可能性中的哪一种会起作用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T15:45:57.787

正如我所提到的，问题出在 POST 时返回 @ModelAttribute("selectionListCommand") 时。

解决方案是：

*   添加到控制器 -> **@SessionAttributes("selectionListCommand")**
*   修改类 SelectionList 为 ->**公共类 SelectionList 实现 java.io.Serializable**

我希望这将在未来节省别人的时间。

# css - 无法让 css sprite 与 background-repeat 一起工作

> ID：10819684
> 
> 赞同：0
> 
> 时间：2012-05-30T15:44:10.320
> 
> 标签：css, sprite, css-sprites

我尝试让 css sprite 在我的页面上工作。但如果我添加背景重复：不重复。然后 css sprite 停止工作。如果我从我的样式表中删除它，将再次工作。

我不知道为什么我不能使用后台重复。

这是我的代码。我也将它上传到 jsfiddle，你可以在那里测试它。

[http://jsfiddle.net/F49b5/2/](http://jsfiddle.net/F49b5/2/)

```
 <html>
        <head>
            <style type="text/css">
                #logo a, .vote-up-off, .vote-up-on, .vote-down-off, .vote-down-on, .star-on
                {
                    background-image: url("http://i14.photobucket.com/albums/a332/007bond-jb/food/burger2.jpg");
                    overflow: hidden;
                    background-repeat: no-repeat;  /*this is the problem, remove it, it will work */
                }
                #logo a, .vote-up-off, .vote-up-on, .vote-down-off, .vote-down-on, .star-on, .star-off, .flag-off, .vote-accepted-off, .vote-accepted-on
                {
                    font-size: 1px;
                    text-indent: -9999em;
                }

                #logo a
                {
                    background-position: 0 194px;
                    width: 309px;
                    height: 133px;
                    display: block;
                }
            </style>
        </head>
        <body>
            <div id="logo">
                <a href="/" title="test">test</a>
            </div>
        </body>
        </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:49:33.687

尝试将背景位置切换为 -194px 而不是 194px：

```
#logo a
{
    background-position: 0 -194px;
    width: 309px;
    height: 133px;
    display: block;
} 
```

通过将 y 轴设置为 194 像素，它会将背景图像向下推 194 像素，这超出了您的 #logo 高度的视图。相反，您需要通过将 y 轴设置为负数来“拉起”图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:50:31.147

您已将背景位置设置在框的高度之外。

重复从元素的 0:0 重复整个图像，这就是您看到它的原因。

删除您的背景位置，它将起作用。

# android - 安卓定位模拟器

> ID：10819690
> 
> 赞同：0
> 
> 时间：2012-05-30T15:44:23.610
> 
> 标签：android, android-emulator, location

我正在尝试使用 android 模拟器进行 Eclipse。我已经使用 telnet 和模拟器 ddms 设置了我的模拟器地理点。

出于某种原因，当我试图从模拟器中获取我的位置时，它总是返回 0,0 给我。我想也许我不是从正确的位置提供的。应该在模拟器中使用哪些提供程序？

这是我的代码：

```
locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        location = locationManager
                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
        if (location == null) {
            location = locationManager
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);

            if (location == null) {
                Toast.makeText(
                        this,
                        "Couldn't get your location, map will be unavailable",
                        8000).show();
            }
            else
            {
                app.setLatitude((int) (location.getLatitude() * 1E6));
                app.setLongitude((int) (location.getLongitude() * 1E6));
            }
        } else {
            app.setLatitude((int) (location.getLatitude() * 1E6));
            app.setLongitude((int) (location.getLongitude() * 1E6));
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:00:11.103

使用这些 telnet 命令在模拟器中设置 GPS 定位和位置：

[http://developer.android.com/guide/developing/devices/emulator.html#geo](http://developer.android.com/guide/developing/devices/emulator.html#geo)

```
geo <fix|nmea> 
```

# api - Youtube 订阅 api [错误]

> ID：10819692
> 
> 赞同：1
> 
> 时间：2012-05-30T15:44:25.023
> 
> 标签：api, youtube, subscriber

我正在尝试通过 api 订阅 youtube 频道。因为我不擅长 xml 所以需要你的帮助。文档的原始链接：[https](https://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions) ://developers.google.com/youtube/2.0/developers_guide_protocol_subscriptions 或

简而言之，这是 youtube 文档中写的内容：

添加订阅

要创建订阅，您发送一个 POST 请求，该请求为创建订阅的经过身份验证的用户标识 YouTube 用户名。请求的主体是一个 XML 条目，其中包含以下元素：

该`<category>`标签标识用户正在创建的订阅类型。将标签的 term 属性值设置为 user 表示该用户正在订阅其他用户的活动（上传视频、评分、标记视频为收藏等），或者将 term 属性值设置为 channel 表示用户正在订阅一个频道。

该`<yt:username>`标签标识正在订阅其活动的频道或用户。

订阅频道

```
POST /feeds/api/users/default/subscriptions HTTP/1.1
Host: gdata.youtube.com
Content-Type: application/atom+xml
Content-Length: CONTENT_LENGTH
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=DEVELOPER_KEY

<?xml version="1.0" encoding="UTF-8"?>
<entry xmlns="http://www.w3.org/2005/Atom"
  xmlns:yt="http://gdata.youtube.com/schemas/2007">
    <category scheme="http://gdata.youtube.com/schemas/2007/subscriptiontypes.cat"
      term="channel"/>
    <yt:username>GoogleDevelopers</yt:username>
</entry> 
```

**我的问题**

我如何编码发布请求？我尝试使用简单的 html 表单方法发布。但它没有奏效。我收到以下错误。

```
Content-Type application/x-www-form-urlencoded is not a valid input type. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-29T17:03:13.140

由于您使用的是 HTML 表单帖子，因此它将内容类型设置为，`application/x-www-form-urlencoded`但所需的内容类型是`application/atom+xml`

为了做你想做的事，你需要使用 javascript 来发布（为了简单起见，我推荐 jQuery）。

```
 var data = //XML Data for post

 $.ajax({
  url://Youtube Subscribe Post URL,
  type:"POST",
  data:data,
  Authorization: //ACCESS_TOKEN,
  GData-Version: '2',
  X-GData-Key: 'key=' //DEVELOPER_KEY,
  contentType:"application/atom+xml",
  dataType:"xml",
  success: function(){
    alert('subscribd');
  }
}); 
```

我没有测试过，但你应该明白。确保将注释替换为应用的实际值。

请注意，这可能会遇到跨域问题。

# php - 在 JQuery 中独立切换两行

> ID：10819695
> 
> 赞同：3
> 
> 时间：2012-05-30T15:44:31.077
> 
> 标签：php, jquery

如何独立切换同一表中的两行。目前我有两个主行，当我单击任何行时，每个主行都包含其他一些行，两个主行都被切换如何独立切换它们？

我的 HTML 和 javascript 是

```
<table id="sort">
    <tr class="nodrag nodrop">
       <td colspan=3><strong><a style="cursor:pointer;" class="toggle">Group 1</a></strong></td>
       <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
   </tr>
        <tr id="1" class="tr_group" style='display:none;'>
            <td style="width:10px;" class="dragHandle">&nbsp;</td>
            <td><a href=# style="margin-left: 20px;">Umair Iqbal</a></td>
            <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Student at TUM</span></td>
            <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
        </tr>
        <tr id="2" class="tr_group" style='display:none;'>
            <td style="width:10px;" class="dragHandle">&nbsp;</td>
            <td><a href=# style="margin-left: 20px;">Faryal Khan</a></td>
            <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Doctor at KMC</span></td>
            <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
        </tr> 

  <tr class="nodrag nodrop">
     <td colspan=3><strong><a style="cursor:pointer;" class="toggle">Group 2</a></strong></td>
     <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
  </tr>
        <tr id="1" class="tr_group" style='display:none;'>
            <td style="width:10px;" class="dragHandle">&nbsp;</td>
            <td><a href=# style="margin-left: 20px;">Umair Iqbal</a></td>
            <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Student at TUM</span></td>
            <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
        </tr>
        <tr id="2" class="tr_group" style='display:none;'>
            <td style="width:10px;" class="dragHandle">&nbsp;</td>
            <td><a href=# style="margin-left: 20px;">Faryal Khan</a></td>
            <td><span style="font-size: 12px; color: #999; line-height: 100%;">A Doctor at KMC</span></td>
            <td style="text-align: right;"><a class="button3" href="#" ><span> Edit </span></a> <a class="button3" href="#" ><span> Delete </span></a></td>
        </tr> 
</table> 
```

jQuery是

```
<script>
$(".toggle").click(function () {
$(".tr_group").slideToggle('slow');
});    
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:47:36.973

根据单击的元素选择下一组 tr 元素。

```
$(".toggle").click(function(){
    $(this).closest('tr').nextUntil(":not(.tr_group)").slideToggle('slow');
}); 
```

# php - PHP：在 SOAP 中返回一个对象数组

> ID：10819698
> 
> 赞同：1
> 
> 时间：2012-05-30T15:44:40.973
> 
> 标签：php, web-services, soap, wsdl, nusoap

我已经检查并尝试了 StackOverflow 上的其他解决方案，但是它对我没有帮助，所以我决定再问一次。

我正在尝试创建一个 SOAP 服务器，打印生成的 WSDL。但是，除了`array`. 无论我做了什么，我都无法让服务器返回给我一个`products`. 可能的原因是什么？

这是我的函数代码：

```
function getProducts() {
    $productList = array();
for($i=0;$i<5;$i++) {
        array_push($productList, array(
            "pName" => "Hello",
            "pBrand" =>"World"
        ));
    }
    return $productList;           
} 
```

这是**复杂类型**定义和**功能**寄存器；

```
$server->wsdl->addComplexType(
    'product',
    'complexType',
    'struct',
    'all',
    '',
    array(
        'pName' => array('name' => 'pName', 'type' => 'xsd:string'),
        'pBrand' => array('name' => 'pBrand', 'type' => 'xsd:string'))
);

$server->wsdl->addComplexType(
    'productList',
    'complexType',
    'array',
    '',
    'SOAP-ENC:Array',
    array(),
    array(
        array('ref' => 'SOAP-ENC:arrayType', 
              'wsdl:arrayType' => 'tns:product[]')
    ),
    'tns:product'
);
$server->register('getProducts',
                      array(),
                      array('productListResult' => 'tns:productList'),
                      'urn:QRWebService',
                      'urn:QRWebService#getProducts',
                      'rpc',
                      'encoded'
                      ); 
```

# javascript - 只需单击标签即可双击

> ID：10819699
> 
> 赞同：12
> 
> 时间：2012-05-30T15:44:41.840
> 
> 标签：javascript, jquery, click, label

我有一个标签和一些在点击它时运行的功能。

但是当点击事件发生时，双击事件就完成了，然后我的函数运行了 2 次......

[你可以在这里](http://jsfiddle.net/vgWGT/2/)看到一个简单的例子

HTML：

```
<label>
<input type="checkbox" id="checkbox"> Click here
</label>
<input type="text" id="test" value="0"/> clicks​​​ 
```

JavaScript：

```
$(document).ready(function(){
    $('label').click(function(event) {
         $('#test').val(parseInt($('#test').val())+1);
         event.preventdefault();
    });
});​ 
```

*   当我们点击复选框时，点击计数器为 +1 >> Ok
*   当我们点击标签时，点击计数器为 +2 >> Nok

如何解决这个问题呢 ？

**编辑**

`preventdefault()`修复`preventDefault()`了双击，但现在不再选中复选框...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T15:50:59.613

嗯，这很有趣。您会看到两个`click`事件，其中一个来自 checkbox `input`，另一个（当然）来自`label`. 这是有道理的：按设计，单击 a`label`就像单击`label`标签的复选框。[这是一个更新的小提琴](http://jsfiddle.net/vgWGT/15/)，显示正在发生的事情。

所以只需勾`click`上复选框，不要勾在标签上：

```
$(document).ready(function(){
    $('#checkbox').click(function(event) {
        $('#test').val(parseInt($('#test').val())+1);
    });
});​ 
```

[更新的小提琴](http://jsfiddle.net/vgWGT/16/)

* * *

And as Rocket said in the question's comments: `preventDefault` has a capital `D` in it, so your code was throwing an exception. But you didn't want `preventDefault` anyway, because you want the checkbox to be checked.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:55:34.073

A simple workaround is to ignore one of the call.. See below,

```
$(document).ready(function(){   
    $('label').click(function(event) {
        if (event.target.nodeName == 'LABEL') return;
        $('#test').val(parseInt($('#test').val())+1);         
    });
}); 
```

[**DEMO**](http://jsfiddle.net/vgWGT/24/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:47:30.287

Uncaught TypeError: Object # has no method 'preventdefault'

`d`in`preventdefault`应该大写。

编辑：嵌套在标签中的复选框的浏览器行为是在单击标签时触发单击复选框。要解决原始问题，只需将递增单击处理程序绑定到复选框。

```
$(document).ready(function(){
    $('#checkbox').click(function(event) {
         $('#test').val(parseInt($('#test').val())+1);
    });
});​ 
```

[http://jsfiddle.net/vgWGT/28/](http://jsfiddle.net/vgWGT/28/)

相关：[http ://www.webmonkey.com/2010/02/javascript_debugging_for_beginners/](http://www.webmonkey.com/2010/02/javascript_debugging_for_beginners/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T16:06:09.997

The preventDefault() will disable the original function. Try this:

```
$(document).ready(function(){
    $('input:#checkbox').click(function() {
         $('#test').val(parseInt($('#test').val())+1);
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-20T19:37:31.860

HTML

```
<input type="checkbox" id="checkbox">
<label for ="checkbox">Click here</label>
<input type="text" id="test" value="0"/> clicks 
```

JS

```
 $(document).ready(function(){
    $('label').click(function(event) {
    var valor = parseInt($('#test').val());
         $('#test').val(valor+1);
         event.preventdefault();
    });
}); 
```

It works

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-30T15:54:51.360

Do it like this:

```
<div class="click">
<input type="checkbox" id="checkbox">
<label>Click here</label>
</div>

<input type="text" id="test" value="0"/> clicks​

$(document).ready(function(){
    $('.click').click(function(event) {
         $('#test').val(parseInt($('#test').val())+1);
         event.preventdefault();
    });
}); 
```

# ios - IOS UILabel 阴影生成奇怪的上阴影

> ID：10819701
> 
> 赞同：0
> 
> 时间：2012-05-30T15:44:48.617
> 
> 标签：ios, fonts, uilabel, shadow

我正在尝试对 UILabel 应用阴影，但我在字体上得到了一个难看的上阴影。

正如你所看到的，阴影已经离字体很远了，但是我得到了这个有阴影的上部东西……字体应该是纯白色的。

任何想法？我可以在上面放另一个 UILabel，但我认为这不是最干净的解决方案......

```
float width = 500.0f;
    UIShadowLabel *label = [[UIShadowLabel alloc] initWithFrame:CGRectMake((self.view.bounds.size.width * 0.5) - (width * 0.5), 150.0, width, 100.0) ];
    label.backgroundColor = [UIColor clearColor]; 
    label.shadowColor = UIColorFromRGB(0xb1b0b0);
    label.shadowRadius = 3.0f;
    label.shadowOffset = CGSizeMake(15.0f, 15.0f);
    label.textAlignment =  UITextAlignmentCenter;
    label.textColor = [UIColor whiteColor];
    label.font = [UIFont fontWithName:@"Arial" size:(100.0)];
    [self.view addSubview:label];
    label.text = @"am"; 
```

![在此处输入图像描述](../Images/fdd56b398b60261855aaaca9afa5a2c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-06T10:30:52.033

根据您的需要使用以下代码

```
[self.yourView.layer setShadowColor:[UIColor blackColor].CGColor];
[self.yourView.layer setShadowOpacity:0.8];
[self.yourView.layer setShadowRadius:3.0];
[self.yourView.layer setShadowOffset:CGSizeMake(2.0, 2.0)]; 
```

# ios - 如何显示 UIView 的键盘

> ID：10819707
> 
> 赞同：10
> 
> 时间：2012-05-30T15:45:12.283
> 
> 标签：ios, uiview, keyboard, becomefirstresponder

我有一个 UIView，我想在其中接收键盘输入。我试过了：

```
[self becomeFirstResponder]; 
```

但它不起作用。

我可以通过隐藏 UITextField 并将按键转发到我的 UIView 来实现“肮脏”的解决方法 - 但是我的 UIView 如何直接接收键盘输入？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-30T16:28:00.557

要成为第一响应者并显示键盘，它必须采用并实现该`UIKeyInput`协议。它还必须覆盖该`canBecomeFirstResponder`方法以返回 YES。

请参阅[*iOS 文本编程指南*](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/LowerLevelText-HandlingTechnologies/LowerLevelText-HandlingTechnologies.html#//apple_ref/doc/uid/TP40009542-CH15-SW13)[中的“简单文本输入”](https://developer.apple.com/library/ios/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/LowerLevelText-HandlingTechnologies/LowerLevelText-HandlingTechnologies.html#//apple_ref/doc/uid/TP40009542-CH15-SW13)*。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:01:39.467

只有当该对象用于键盘输入（如文本字段）时，成为第一响应者才会显示键盘。隐藏文本字段的想法很好，但它也取决于您需要键盘输入的内容，关于您的视图。从隐藏的文本字段中获取文本是微不足道的，这样文本或您需要的任何内容都可以由您的视图使用。*

# java - 调用另一个类时Android无法启动活动组件信息错误

> ID：10819709
> 
> 赞同：0
> 
> 时间：2012-05-30T15:45:19.440
> 
> 标签：java, android

我正在编写一个调用另一个类的应用程序，但每次我这样做时，我都会收到“无法启动活动组件信息”错误。

代码如下：

```
 package android.Maps;

public class HomeScreen extends MapActivity {
    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    MapController mapController;
    MyPositionOverlay positionOverlay;

    GeneticAlgorithm2 GA2;
    //private MyPositionOverlay popListHome;
    //public static int populationSizeHome;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //popListHome = new MyPositionOverlay(null, null);

        //populationSizeHome = popListHome.overlayItemList();

        //positionOverlay.overlayItemList

        MapView myMapView = (MapView)findViewById(R.id.myMapView);
        //myMapView.setBuiltInZoomControls(true);
        mapController = myMapView.getController();

        myMapView.setSatellite(true);
        myMapView.setStreetView(true);
        myMapView.displayZoomControls(false);

        mapController.setZoom(17);

        Drawable marker=getResources().getDrawable(android.R.drawable.star_big_on);
        int markerWidth = marker.getIntrinsicWidth();
        int markerHeight = marker.getIntrinsicHeight();
        marker.setBounds(0, markerHeight, markerWidth, 0);

        //Call Genetic Algorithm
        GA2 = new GeneticAlgorithm2();

        // Add the MyPositionOverlay
        positionOverlay = new MyPositionOverlay(marker, HomeScreen.this);
        List<Overlay> overlays = myMapView.getOverlays();
        overlays.add(positionOverlay);

        LocationManager locationManager;
        String context = Context.LOCATION_SERVICE;
        locationManager = (LocationManager)getSystemService(context);

        Criteria criteria = new Criteria();
        criteria.setAccuracy(Criteria.ACCURACY_FINE);
        criteria.setAltitudeRequired(false);
        criteria.setBearingRequired(false);
        criteria.setCostAllowed(true);
        criteria.setPowerRequirement(Criteria.POWER_LOW);
        String provider = locationManager.getBestProvider(criteria, true);

        Location location = locationManager.getLastKnownLocation(provider);

        updateWithNewLocation(location);

        locationManager.requestLocationUpdates(provider, 2000, 10,   
                locationListener);

        //GeneticAlgorithm2 GA2 = new GeneticAlgorithm2();

        final Button buttonRun = (Button) findViewById(R.id.btnRun);
        buttonRun.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                Context context = getApplicationContext();
                CharSequence text = "Running";
                int duration = Toast.LENGTH_SHORT;

                Toast toast = Toast.makeText(context, text, duration);
                toast.show();

                //This statement works
                System.out.println(positionOverlay.overlayItemList.size());

                Iterator<OverlayItem> iter = positionOverlay.overlayItemList.iterator();
                System.out.println(positionOverlay.overlayItemList);
                while (iter.hasNext()){
                    Object element = iter.next();
                    System.out.println(element + "");
                }

                //GeneticAlgorithm2 GA2;
                //GA2.start();
                GA2.test();

            }// End of onClick
        });

    }// End of onCreate

    /*public HomeScreen (){
        popListHome = new MyPositionOverlay(null, null);

        populationSizeHome = popListHome.overlayItemList();

    }*/

    private final LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            updateWithNewLocation(location);
        }

        public void onProviderDisabled(String provider){
            updateWithNewLocation(null);
        }

        public void onProviderEnabled(String provider){ }
        public void onStatusChanged(String provider, int status, 
                Bundle extras){ }
    };

    private void updateWithNewLocation(Location location) {
        String latLongString;
        TextView myLocationText;
        myLocationText = (TextView)findViewById(R.id.myLocationText);
        String addressString = "No address found";

        if (location != null) {
            // Update my location marker
            positionOverlay.setLocation(location);

            // Update the map location.
            Double geoLat = location.getLatitude()*1E6;
            Double geoLng = location.getLongitude()*1E6;
            GeoPoint point = new GeoPoint(geoLat.intValue(), 
                    geoLng.intValue());

            mapController.animateTo(point);

            double lat = location.getLatitude();
            double lng = location.getLongitude();
            latLongString = "Lat:" + lat + "\nLong:" + lng;

            double latitude = location.getLatitude();
            double longitude = location.getLongitude();

            Geocoder gc = new Geocoder(this, Locale.getDefault());
            try {
                List<Address> addresses = gc.getFromLocation(latitude, 
                        longitude, 1);
                StringBuilder sb = new StringBuilder();
                if (addresses.size() > 0) {
                    Address address = addresses.get(0);

                    for (int i = 0; i < address.getMaxAddressLineIndex(); i++)
                        sb.append(address.getAddressLine(i)).append("\n");

                    sb.append(address.getLocality()).append("\n");
                    sb.append(address.getPostalCode()).append("\n");
                    sb.append(address.getCountryName());
                }
                addressString = sb.toString();
            } catch (IOException e) {}
        } else {
            latLongString = "No location found";
        }
        myLocationText.setText("Your Current Position is:\n" + 
                latLongString + "\n" + addressString);
    }

} 
```

从这个类我试图调用这个类：

```
 package android.Maps;

public class GeneticAlgorithm2  {

    public static int populationSize;
    private MyPositionOverlay popList;

    public int route[] = new int[populationSize +1];
    int pointLimit;
    int iterations;
    double mutationRate = 0.10;

    //Canvas C = null;
    //Dimension CD;
    //Label L;
    //Graphics GC;
    //int Initial_population = 800;
    int matingPopulation = populationSize/2;
    int favPopulation = matingPopulation/2;
    int numOfCities = 30;
    int cutLength = numOfCities/5;
    //double Mutation_probability = 0.10;

    double loops=1.5;
    int Epoch;
    double xlow = 0.0;
    double ylow = 0.0;
    double xhigh = 100.0;
    double yhigh = 100.0;
    double xrange, yrange;
    double minCost = 5.0;
    double timeStart,timeEnd;
    Thread T = null;
    double costPerfect = 0.;

    boolean started = false;

    City [] cities;
    Chromosome [] chromosomes;

    public GeneticAlgorithm2() {

        // Calling My Position Overlay class
        popList = new MyPositionOverlay(null, null);

        //Sets the population size to the number of markers
        populationSize = popList.overlayItemList.size();
        //start();
        test();

    }

    public void test(){
        System.out.println("test");
    }

}//End of Genetic Algorithm 2 class 
```

请帮忙

更新*

05-30 15:33:33.161: E/AndroidRuntime(916): 致命异常: main 05-30 15:33:33.161: E/AndroidRuntime(916): java.lang.RuntimeException: 无法启动活动 ComponentInfo{android. Maps.Google2/android.Maps.HomeScreen}：java.lang.NullPointerException 05-30 15:33:33.161：E/AndroidRuntime(916)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.ActivityThread .access$2300(ActivityThread.java:125) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033) 05-30 15:33: 33.161: E/AndroidRuntime(916): 在 android.os.Handler.dispatchMessage(Handler.java:99) 05-30 15:33:33.161:E/AndroidRuntime(916): 在 android.os.Looper.loop(Looper.java:123) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.ActivityThread.main(ActivityThread.java :4627) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 java.lang.reflect.Method.invokeNative(Native Method) 05-30 15:33:33.161: E/AndroidRuntime(916): 在java.lang.reflect.Method.invoke(Method.java:521) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java :868) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 05-30 15:33:33.161: E/AndroidRuntime (916): 在 dalvik.system.NativeStart.main(Native Method) 05-30 15:33:33.161: E/AndroidRuntime(916): 由: java.lang.NullPointerException 05-30 15:33:33.161: E /AndroidRuntime(916)：在 com.google.android.maps。ItemizedOverlay.boundCenterBottom(ItemizedOverlay.java:158) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.Maps.MyPositionOverlay.(MyPositionOverlay.java:28) 05-30 15:33:33.161: E /AndroidRuntime(916): 在 android.Maps.GeneticAlgorithm2.(GeneticAlgorithm2.java:51) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.Maps.HomeScreen.onCreate(HomeScreen.java:76 ) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android .app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-30 15:33:33.161: E/AndroidRuntime(916): ... 11 更多E/AndroidRuntime(916): 在 android.Maps.GeneticAlgorithm2.(GeneticAlgorithm2.java:51) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.Maps.HomeScreen.onCreate(HomeScreen.java: 76) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-30 15:33:33.161: E/AndroidRuntime(916): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-30 15:33:33.161: E/AndroidRuntime(916): ... 11 更多E/AndroidRuntime(916): 在 android.Maps.GeneticAlgorithm2.(GeneticAlgorithm2.java:51) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.Maps.HomeScreen.onCreate(HomeScreen.java: 76) 05-30 15:33:33.161: E/AndroidRuntime(916): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047) 05-30 15:33:33.161: E/AndroidRuntime(916): 在android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-30 15:33:33.161: E/AndroidRuntime(916): ... 11 更多ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-30 15:33:33.161: E/AndroidRuntime(916): ... 11 更多ActivityThread.performLaunchActivity(ActivityThread.java:2627) 05-30 15:33:33.161: E/AndroidRuntime(916): ... 11 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:30:42.120

在我看来`NullPointerException`，您的某些代码中的 a 不是代码段的一部分。

> 05-30 15:33:33.161：E/AndroidRuntime(916)：由：java.lang.NullPointerException 引起
> 
> 05-30 15:33:33.161: E/AndroidRuntime(916): 在 com.google.android.maps.ItemizedOverlay.boundCenterBottom(ItemizedOverlay.java:158)

# java - 无法使用 JavaCompiler 编译其他类中引用的默认包类

> ID：10819713
> 
> 赞同：-5
> 
> 时间：2012-05-30T15:45:39.487
> 
> 标签：java, compilation, java-compiler-api

我有一种情况，我需要动态编译类。

以下是我的 java 类的组织结构。

```
// no package 
public class A{
}

package test ;

public class B{
      A obj;
     //other java code
} 
```

其中 A 是具有默认包的类，B 是具有包名 test 的类。B 具有 A 作为属性。

文件保存在各自的文件夹中（根据包）

我无法使用 JAVA Compiler API 编译它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T22:17:20.540

您不能从其他包中的类引用默认包中的类。自 2001 年以来就是这种情况。请参阅 Java 1.4 的发行说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:03:50.867

您应该能够将类路径变量设置为选项。

```
List<String> optionList = new ArrayList<String>();
JavaCompiler compiler = ToolProvider.getSystemJavaCompiler();
String path =....
optionList.addAll(Arrays.asList("-classpath",path ));
JavaCompiler.CompilationTask task = compiler.getTask(null, null, null,optionList,null,fileObjects); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T05:47:01.813

您可以在与此场景相关的 oracle 站点中找到一些已打开的错误

[http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=9f121e41b450bfffffffffcc19db46db9bbc2?bug_id=4361575](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=9f121e41b450bfffffffffcc19db46db9bbc2?bug_id=4361575)

[http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4114502](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4114502)

# python - 比较 NumPy 数组以便 NaN 比较相等

> ID：10819715
> 
> 赞同：21
> 
> 时间：2012-05-30T15:46:03.917
> 
> 标签：python, numpy, comparison, nan

是否有一种惯用的方法来比较两个将 NaN 视为彼此相等的 NumPy 数组（但不等于 NaN 以外的任何东西*）*。

例如，我希望以下两个数组比较相等：

```
np.array([1.0, np.NAN, 2.0])
np.array([1.0, np.NAN, 2.0]) 
```

和以下两个数组比较不相等：

```
np.array([1.0, np.NAN, 2.0])
np.array([1.0, 0.0, 2.0]) 
```

我正在寻找一种可以产生标量布尔结果的方法。

以下将做到这一点：

```
np.all((a == b) | (np.isnan(a) & np.isnan(b))) 
```

但它很笨重并且会创建所有这些中间数组。

有没有一种方法可以让眼睛更轻松并更好地利用内存？

PS如果有帮助，已知数组具有相同的形状和dtype。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T17:29:18.967

如果您真的关心内存使用（例如，有非常大的数组），那么您应该使用 numexpr 并且以下表达式将适用于您：

```
np.all(numexpr.evaluate('(a==b)|((a!=a)&(b!=b))')) 
```

我已经在长度为 3e8 的非常大的数组上对其进行了测试，并且代码在我的机器上的性能与

```
np.all(a==b) 
```

并使用相同数量的内存

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-02T16:37:25.933

Numpy 1.10 将`equal_nan`关键字添加到`np.allclose`( [https://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html](https://docs.scipy.org/doc/numpy/reference/generated/numpy.allclose.html) )。

所以你现在可以这样做：

```
In [24]: np.allclose(np.array([1.0, np.NAN, 2.0]), 
                     np.array([1.0, np.NAN, 2.0]), equal_nan=True)
Out[24]: True 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-30T17:18:02.927

*免责声明：我不建议经常使用它，我自己也不会使用它，但我可以想象在极少数情况下它可能有用。*

如果数组具有相同的形状和 dtype，您可以考虑使用低级`memoryview`：

```
>>> import numpy as np
>>> 
>>> a0 = np.array([1.0, np.NAN, 2.0])
>>> ac = a0 * (1+0j)
>>> b0 = np.array([1.0, np.NAN, 2.0])
>>> b1 = np.array([1.0, np.NAN, 2.0, np.NAN])
>>> c0 = np.array([1.0, 0.0, 2.0])
>>> 
>>> memoryview(a0)
<memory at 0x85ba1bc>
>>> memoryview(a0) == memoryview(a0)
True
>>> memoryview(a0) == memoryview(ac) # equal but different dtype
False
>>> memoryview(a0) == memoryview(b0) # hooray!
True
>>> memoryview(a0) == memoryview(b1)
False
>>> memoryview(a0) == memoryview(c0)
False 
```

但要小心像这样的微妙问题：

```
>>> zp = np.array([0.0])
>>> zm = -1*zp
>>> zp
array([ 0.])
>>> zm
array([-0.])
>>> zp == zm
array([ True], dtype=bool)
>>> memoryview(zp) == memoryview(zm)
False 
```

发生这种情况是因为即使它们比较相等，二进制表示也不同（当然，它们必须：这就是它知道打印负号的方式）

```
>>> memoryview(zp)[0]
'\x00\x00\x00\x00\x00\x00\x00\x00'
>>> memoryview(zm)[0]
'\x00\x00\x00\x00\x00\x00\x00\x80' 
```

从好的方面来说，它会以您希望的方式短路：

```
In [47]: a0 = np.arange(10**7)*1.0
In [48]: a0[-1] = np.NAN    
In [49]: b0 = np.arange(10**7)*1.0    
In [50]: b0[-1] = np.NAN     
In [51]: timeit memoryview(a0) == memoryview(b0)
10 loops, best of 3: 31.7 ms per loop
In [52]: c0 = np.arange(10**7)*1.0    
In [53]: c0[0] = np.NAN   
In [54]: d0 = np.arange(10**7)*1.0    
In [55]: d0[0] = 0.0    
In [56]: timeit memoryview(c0) == memoryview(d0)
100000 loops, best of 3: 2.51 us per loop 
```

为了比较：

```
In [57]: timeit np.all((a0 == b0) | (np.isnan(a0) & np.isnan(b0)))
1 loops, best of 3: 296 ms per loop
In [58]: timeit np.all((c0 == d0) | (np.isnan(c0) & np.isnan(d0)))
1 loops, best of 3: 284 ms per loop 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T16:42:44.097

不确定这是否更好，但一个想法......

```
import numpy
class FloatOrNaN(numpy.float_):
    def __eq__(self, other):
        return (numpy.isnan(self) and numpy.isnan(other)) or super(FloatOrNaN,self).__eq__(other)

a = [1., np.nan, 2.]
one = numpy.array([FloatOrNaN(val) for val in a], dtype=object)
two = numpy.array([FloatOrNaN(val) for val in a], dtype=object)
print one == two   # yields  array([ True,  True,  True], dtype=bool) 
```

这将丑陋推入 dtype，以牺牲内部工作 python 而不是 c 为代价（Cython/etc 将解决此问题）。但是，它确实大大降低了内存成本。

不过还是有点丑:(

# java - Eclipselink 获取递归实体给出不完整的结果

> ID：10819718
> 
> 赞同：1
> 
> 时间：2012-05-30T15:46:08.127
> 
> 标签：java, jpa, eclipselink, jpql

我有以下问题，我认为这与缓存有关，但我无法让它工作。

配置：Glassfish 3.1、JPA 2、EJB3.1、Eclipselink 2.2。

在一个过程中，我生成了一个包含多个 UpdatePackageFile 的 UpdatePackage。这些文件链接到父 UpdatePackage，但也与其自身有递归关系。例如，我有一个包，它是一个包含多个文件的 ZIP 包。该过程在数据库中创建 UpdatePackage 和文件。到现在为止还挺好。

之后，第二个进程开始（不同的进程、新事务等）。然后我得到包含所有文件的 UpdatePackage，但问题是：文件之间的内部层次结构不完整。所以，如果我得到 TOP UpdatePackageFile 那个文件有一个孩子，但那个孩子不包含任何孩子，虽然应该有 2 个。注意，数据库是正确的。

如果我重新启动应用程序服务器并再次运行第二个进程，那么层次结构就完成了。

我运行以下查询

```
Query query = em.createQuery("SELECT pck FROM UpdatePackageSubscription pck "
  + " LEFT JOIN FETCH pck.updatePackage"
  + " JOIN pck.updatePackage g LEFT JOIN FETCH g.updatePackageFiles "
  + " JOIN g.updatePackageFiles q LEFT JOIN FETCH q.updatePackageFiles"
  + " JOIN q.updatePackageFiles z LEFT JOIN FETCH z.updatePackageFiles"
  + " WHERE pck.subscription.eps.id = :id "
  + " AND pck.subscription.applicationSubcategory.shortName = :shortName"
  + " AND pck.status != :done AND pck.status != :obsolete "
  + " ORDER BY pck.updatePackage.id");

query.setParameter("id", id);
query.setParameter("shortName", shortName);
query.setParameter("done", UpdatePackageSubscriptionStatusType.DONE);
query.setParameter("obsolete", UpdatePackageSubscriptionStatusType.OBSOLETE);
query.setHint("javax.persistence.cache.storeMode", "REFRESH"); 
```

你可以看到我显式地运行了一个较低级别的层次结构连接来强制获取。而且我还将缓存设置为REFRESH。我还将以下内容添加到我的 persistence.xml

```
<property name="eclipselink.query-results-cache" value="false" /> 
```

我有以下实体，全部设置为 EAGER fetching。

```
@Entity
@Table(name = "UPDATE_PACKAGE_SUBSCRIPTION")
public class UpdatePackageSubscription implements Serializable {
  private UpdatePackage updatePackage;

  // bi-directional many-to-one association to UpdatePackage
  @ManyToOne(fetch = FetchType.LAZY, cascade = { CascadeType.ALL })
  @JoinColumn(name = "UPP_ID", nullable = false)
  public UpdatePackage getUpdatePackage() {
    return this.updatePackage;
  }

  public void setUpdatePackage(UpdatePackage updatePackage) {
    this.updatePackage = updatePackage;
  }
}

@Entity
@Table(name = "UPDATE_PACKAGE")
public class UpdatePackage implements Serializable {
  private List<UpdatePackageFile> updatePackageFiles = new ArrayList<UpdatePackageFile>();
  private List<UpdatePackageSubscription> updatePackageSubscriptions = new ArrayList<UpdatePackageSubscription>();

  @OneToMany(mappedBy = "updatePackage", fetch = FetchType.EAGER)
  @OrderBy
  public List<UpdatePackageFile> getUpdatePackageFiles() {
    return this.updatePackageFiles;
  }

  public void setUpdatePackageFiles(List<UpdatePackageFile> updatePackageFiles) {
    this.updatePackageFiles = updatePackageFiles;
  }

  // bi-directional many-to-one association to UpdatePackageSubscription
  @OneToMany(mappedBy = "updatePackage", cascade = { CascadeType.ALL })
  @PrivateOwned
  public List<UpdatePackageSubscription> getUpdatePackageSubscriptions() {
    return this.updatePackageSubscriptions;
  }

  public void setUpdatePackageSubscriptions(List<UpdatePackageSubscription> updatePackageSubscriptions) {
    this.updatePackageSubscriptions = updatePackageSubscriptions;
  }
}

@Entity
@Table(name = "UPDATE_PACKAGE_FILE")
public class UpdatePackageFile implements Serializable {    
  private UpdatePackage updatePackage;
  private UpdatePackageFile updatePackageFile;
  private List<UpdatePackageFile> updatePackageFiles;

  // bi-directional many-to-one association to UpdatePackage
  @ManyToOne(fetch = FetchType.EAGER)
  @JoinColumn(name = "UPP_ID", nullable = false)
  public UpdatePackage getUpdatePackage() {
    return this.updatePackage;
  }

  public void setUpdatePackage(UpdatePackage updatePackage) {
    this.updatePackage = updatePackage;
  }

  // bi-directional many-to-one association to UpdatePackageFile
  @ManyToOne(fetch = FetchType.EAGER)
  @JoinColumn(name = "PARENT_FILE_ID")
  public UpdatePackageFile getUpdatePackageFile() {
    return this.updatePackageFile;
  }

  public void setUpdatePackageFile(UpdatePackageFile updatePackageFile) {
    this.updatePackageFile = updatePackageFile;
  }

  // bi-directional many-to-one association to UpdatePackageFile
  @OneToMany(mappedBy = "updatePackageFile", fetch = FetchType.EAGER)
  @PrivateOwned
  @OrderBy
  public List<UpdatePackageFile> getUpdatePackageFiles() {
    return this.updatePackageFiles;
  }

  public void setUpdatePackageFiles(List<UpdatePackageFile> updatePackageFiles) {
    this.updatePackageFiles = updatePackageFiles;
  }
} 
```

所以，我的查询显然是正确的，但仍然没有完全获取层次结构。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:33:36.777

你必须维护双方的关系。您很可能设置了多对一但未添加到单对多。

见， [http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Object_corruption.2C_one_side_of_the_relationship_is_not_updated_after_updating_the_other_side)

您也可以禁用共享缓存，但您的代码仍然是错误的，并且您仍然会破坏持久性上下文中的对象。

见， [http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F](http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F)

# javascript - JavaScript onSubmit 表单处理

> ID：10819719
> 
> 赞同：0
> 
> 时间：2012-05-30T15:46:08.563
> 
> 标签：javascript, forms, google-chrome, google-chrome-extension

所以我正在尝试制作一个 Chrome 扩展程序，它以查询的形式接收用户输入，从 Flickr 的 API 中获取与该查询相关的图像（有效地搜索查询），然后放置它们，以及指向他们的位置，在页面上。我从一个教程网站上偷了它，它的示例扩展在没有用户输入和链接的情况下完成了上述操作。我试图自己做链接，但我失败了，所以不得不在这里寻求帮助。现在，我在设置用户输入方面失败了。我首先尝试了 PHP，它使我的 chrome 崩溃了，因为它显然在扩展中不起作用，所以现在我正在尝试一直使用 JS。我尝试为我的搜索表单做一个 onsubmit 事件，然后我意识到我必须将**所有代码**都放在`{}`我的 onsubmit 函数。不幸的是，由于在 JavaScript 中声明变量的方式，它不起作用，因为如果一切都在一个函数中，那么所有声明的变量都呈现为*private*。因此， main 中的其他功能无法使用它们，从而使脚本无用。理想的解决方案是在函数中声明公共变量，不幸的是，在搜索了半个小时后，我找不到任何可行的方法/我理解的方法。有人可以帮帮我吗？我会对任何其他方法感到非常满意，如果你告诉我我的所有预测都是错误的以及为什么 - 我会很高兴。

到目前为止我的代码：

```
var req = new XMLHttpRequest();
req.open(
"GET",
"http://api.flickr.com/services/rest/?" +
    "method=flickr.photos.search&" +
    "api_key=90485e931f687a9b9c2a66bf58a3861a&" +
    "text=cake&" +
    "safe_search=1&" +  
    "content_type=1&" +  
    "sort=relevance&" +  
    "per_page=24",
true);
req.onload = showPhotos;
req.send(null);

function showPhotos() {
  var photos = req.responseXML.getElementsByTagName("photo");

  for (var i = 0, photo; photo = photos[i]; i++) {
    var photos = req.responseXML.getElementsByTagName("photo");
    var a = document.createElement("a");
    a.setAttribute("href",constructImageURL(photo));
    a.setAttribute("target","_blank");

    var img = document.createElement("img");
    img.setAttribute("src",constructImageURL(photo));

    a.appendChild(img);
    document.getElementById("images").appendChild(a);
  }
}

function constructImageURL(photo) {
  return "http://farm" + photo.getAttribute("farm") +
  ".static.flickr.com/" + photo.getAttribute("server") +
  "/" + photo.getAttribute("id") +
  "_" + photo.getAttribute("secret") +
  "_s.jpg";
} 
```

这没有我失败的 onsubmit 代码。HTML 页面本身只包含一个导入上述脚本的标签、一个用于图像的 div 和一个表单：

```
<div id="images">
</div>
<form name="queryForm" onsubmit="javascript: querySubmit()">
Search: <input type='text' name='query'>
<input type="submit" />
</form> 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:49:16.790

这就是我讨厌 jQuery 的原因。请参阅我的 HTML 5 表单示例...

[http://netjs.codeplex.com/SourceControl/changeset/view/91818#1775033](http://netjs.codeplex.com/SourceControl/changeset/view/91818#1775033)

[http://netjs.codeplex.com/SourceControl/changeset/view/91818#1775035](http://netjs.codeplex.com/SourceControl/changeset/view/91818#1775035)

您需要在表单中添加一个事件，例如

`myform.addEvent('submit', myFunction);`

然后从那里处理你需要做的事情......

诚然 jQuery 与此几乎没有什么关系，而且它更可能是因为您不了解 jQuery 所促进的 javascript，因为它将一切都像狗屎一样变成了 DOM。您只是在使用不良实践，并且需要将逻辑解耦为各种功能以实现可维护性。

# python - 将大fasta拆分成多个文件，不能用GI号命名

> ID：10819723
> 
> 赞同：0
> 
> 时间：2012-05-30T15:46:33.470
> 
> 标签：python, biopython, fasta

我应该首先说我对 Python 和 Biopython 都是新手。我正在尝试将一个大的 .fasta 文件（包含多个条目）拆分为单个文件，每个文件都有一个条目。我在 Biopython wiki/Cookbook 网站上找到了以下大部分代码，并对其进行了一些调整。我的问题是这个生成器将它们命名为“1.fasta”、“2.fasta”等，我需要用一些标识符来命名它们，例如 GI 编号。

```
 def batch_iterator(iterator, batch_size) :
    """Returns lists of length batch_size.

    This can be used on any iterator, for example to batch up
    SeqRecord objects from Bio.SeqIO.parse(...), or to batch
    Alignment objects from Bio.AlignIO.parse(...), or simply
    lines from a file handle.

    This is a generator function, and it returns lists of the
    entries from the supplied iterator.  Each list will have
    batch_size entries, although the final list may be shorter.
    """
    entry = True #Make sure we loop once
    while entry :
        batch = []
        while len(batch) < batch_size :
            try :
                entry = next(iterator)
            except StopIteration :
                entry = None
            if entry is None :
                #End of file
                break
            batch.append(entry)
        if batch :
            yield batch

from Bio import SeqIO
infile = input('Which .fasta file would you like to open? ')
record_iter = SeqIO.parse(open(infile), "fasta")
for i, batch in enumerate(batch_iterator(record_iter, 1)) :
    outfile = "c:\python32\myfiles\%i.fasta" % (i+1)
    handle = open(outfile, "w")
    count = SeqIO.write(batch, handle, "fasta")
    handle.close() 
```

如果我尝试更换：

```
outfile = "c:\python32\myfiles\%i.fasta" % (i+1) 
```

和：

```
outfile = "c:\python32\myfiles\%s.fasta" % (record_iter.id) 
```

所以它会在 SeqIO 中命名类似于 seq_record.id 的东西，它会给出以下错误：

```
 Traceback (most recent call last):
  File "C:\Python32\myscripts\generator.py", line 33, in [HTML]
    outfile = "c:\python32\myfiles\%s.fasta" % (record_iter.id)
AttributeError: 'generator' object has no attribute 'id' 
```

虽然生成器函数没有属性“id”，但我能以某种方式解决这个问题吗？这个脚本对于我想要做的事情来说太复杂了吗？！？谢谢，查尔斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:18:56.223

因为您一次只需要一条记录，您可以放弃 batch_iterator 包装器和枚举：

```
for seq_record in record_iter: 
```

然后你想要的是每条记录的 id 属性，而不是整个迭代器：

```
for seq_record in record_iter:
    outfile = "c:\python32\myfiles\{0}.fasta".format(seq_record.id)
    handle = open(outfile, "w")
    count = SeqIO.write(seq_record, handle, "fasta")
    handle.close() 
```

供您参考，生成器错误是您尝试`id`从 object获取属性的结果`record_iter`。`record_iter`不是一条记录，而是一组记录，它们作为 Python 生成器保存，有点像一个正在处理的列表，因此您不必一次读取整个文件和内存使用效率更高。有关生成器的更多信息：[您可以使用 Python 生成器函数做什么？](https://stackoverflow.com/questions/102535/what-can-you-use-python-generator-functions-for), [http://docs.python.org/tutorial/classes.html#generators](http://docs.python.org/tutorial/classes.html#generators) ,

# xamarin.android - 在 Monodroid 上添加 onclick 事件以查看没有 delta 函数？

> ID：10819735
> 
> 赞同：0
> 
> 时间：2012-05-30T15:47:19.967
> 
> 标签：xamarin.android

我知道我可以将 onclick 处理程序添加到按钮：

```
button.Click += (sender, e) => 
{
}; 
```

但是有可能做类似的事情吗？：

```
EventHandler eh=new EventHandler(OnSaveButtonClick);
v.Click += OnSaveButtonClick; 
```

对我来说，第二个选项总是在 v.Click 分配上引发 SystemNullException。

有没有办法做到这一点？我想这样做只是为了有一个更清晰的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:53:09.683

好吧，很抱歉，但它现在有效。我认为设备出了点问题，重新启动后，这两个选项都有效。

# java - Tomcat 上的 Spring 3 JMS

> ID：10819742
> 
> 赞同：2
> 
> 时间：2012-05-30T15:47:36.830
> 
> 标签：java, spring, spring-mvc, jms

是否可以在 tomcat 中实现 JMS 消息传递？我有一个 spring mvc 应用程序，我需要实现 JMS 消息传递。

我不能用玻璃鱼。我知道在应用服务器上使用消息驱动 bean 进行 JMS 消息传递非常容易。

因此，如果有可能，有人可以提供一些示例如何为 Spring 应用程序创建 JMS 连接工厂和队列吗？

我有一个 JMS 队列发送者类：

```
public class JmsQueueSender {

    private JmsTemplate jmsTemplate;
    private Queue queue;

    public void setConnectionFactory(ConnectionFactory cf) { //?????????????????????
        this.jmsTemplate = new JmsTemplate(cf);
    }

    public void setQueue(Queue queue) { //?????????????????????
        this.queue = queue;
    }

    public void sendMessage(final Serializable object) {
        jmsTemplate.send(this.queue, new MessageCreator() {
            public Message createMessage(Session session) throws JMSException {
                return session.createObjectMessage(object);
            }
        });
    }

} 
```

主要问题是如何创建连接工厂和队列，使用什么对象。在 glassfish 中，我一直在通过应用程序服务器管理控制台创建 JMS 资源。如何在运行在 tomcat 中的 spring 应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:38:50.460

是的，这是可能的。你看过Spring 手册[的 JMS 章节吗？](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jms.html#jms-connections)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:43:34.030

您还可以查看[Apache TomEE Plus](http://tomee.apache.org/apache-tomee.html)，它是 Tomcat + JMS 等等。您可以通过战争发行版将其放入 Tomcat 中，也可以获取预捆绑的版本。

# jquery - .on 函数没有被触发

> ID：10819744
> 
> 赞同：1
> 
> 时间：2012-05-30T15:47:37.993
> 
> 标签：jquery

单击某些文本时，我正在尝试使用 .on 事件。这是我的小提琴：

[http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/73/](http://jsfiddle.net/adrianjsfiddlenetuser/zyUkd/73/)

但是当我点击“链接”时没有任何东西被触发，我不知道为什么？从阅读[http://api.jquery.com/on/](http://api.jquery.com/on/)我不认为我应该传递的数据是 .connected ？

这需要适用于动态添加的元素。这是小提琴的代码：

```
<div id="myID">
    <a class="connected" >link</a>
</div>

​$(function() {

$(".connected").on('click', '.connected', function() {
    alert('fired)'
        $(".connected").append("<a>hello</a>");
});

});

​.connected {
    float: left;
    margin: 6px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:48:58.960

摆脱第二个`.connected`。你的警报也写错了。

```
$(function(){
        $(".connected").on('click', function() {
            alert('fired');
            $(".connected").append("<a>hello</a>");
        });
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:49:52.400

你可以使用这个：

```
$(".connected").on('click', function() {
    alert('fired')
    $(".connected").append("<a>hello</a>");
});​ 
```

或这个：

```
$("#myID").on('click', '.connected', function() {
    alert('fired')
    $(".connected").append("<a>hello</a>");
});​ 
```

请注意，第二个变体适用于动态添加的元素。

**演示：http:** [//jsfiddle.net/zyUkd/74/](http://jsfiddle.net/zyUkd/74/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:52:27.060

将其放入就绪函数中，并修复警报时的语法错误。

[http://jsfiddle.net/zyUkd/75/](http://jsfiddle.net/zyUkd/75/)

```
 $(document).ready(function() {

        $(".connected").on('click', function() {
            alert('fired');
                $(".connected").append("<a>hello</a>");
        });    

 }); 
```

​</p>

# javascript - 没有全局标志的Javascript正则表达式奇怪的匹配

> ID：10819745
> 
> 赞同：1
> 
> 时间：2012-05-30T15:47:43.260
> 
> 标签：javascript, regex

我想匹配一个首字母序列，整个序列，以下示例中的**第二个正则表达式正确地为我做。**为什么我需要“全球”标志？第一个也应该只匹配整个字符串，对吧？（因为`^`和`$`）

```
abc = "A.B.C."
abc.match(/^([A-Z]\.)+$/) // result: ["A.B.C.", "C."]
abc.match(/^([A-Z]\.)+$/g) // result: ["A.B.C."] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:51:21.043

因为括号不包括`+`. 因此，当您这样做时`abc.match(/^([A-Z]\.)+$/)`，括号仅匹配第一个`[A-Z]\.`。

要获得您想要的比赛，您不需要`g`旗帜。只需`match[0]`用作您的结果。

```
var result = abc.match(/^([A-Z]\.)+$/)
if (result) {
    var fullMatch = result[0];
} 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/PXF6U/](http://jsfiddle.net/jfriend00/PXF6U/)

`g`有关为什么标志会像您观察到的那样更改响应的详细信息，请参阅 Bergi 的回答。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:57:41.717

请参阅该[`.match()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match)的文档：

> 如果正则表达式不包含 g 标志，则返回与 相同的结果[`regexp.exec(string)`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)。

这是您的“意外结果”。查看它的[描述](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec#Description)：它将返回一个包含捕获组、匹配字符串、匹配索引等的数组。`"C."`作为第二个数组项，您得到的是`([A-Z]\.)`表达式的最后一次捕获。然而，它*确实*只匹配了整个字符串一次。

> 如果正则表达式包含 g 标志，则该方法返回一个包含所有匹配项的 Array。如果没有匹配项，则该方法返回 null。

“所有匹配项”数组将只有一项，因为您 match `^...$`。

因此，无论您将使用哪个正则表达式，代码都应该是：

```
var result = abc.match(regex);
if (result) // != null
    return result[0];
else
    // no match found 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T15:59:46.827

If you apply a quantifier (in this case `+`) to a capturing subpattern (`([A-Z]\.)`) then only the last instance of that repeated subpattern is captured (because it is index 1 of the result array, and it is overwritten every time a new ones is found).

If you want to get the individual matches, try:

```
abc.match(/[A-Z]\./g); 
```

This will give you:

```
["A.","B.","C."] 
```

# c# - 如何在 response.redirect 中将列表作为参数传递

> ID：10819751
> 
> 赞同：0
> 
> 时间：2012-05-30T15:48:03.697
> 
> 标签：c#, jquery, asp.net

Prob1：我有 2 个列表，我想在下一页中访问它们，我将重定向它们。当前结果，当我传递我的结果时，它会在 url 中显示 List 数据类型。

`ex:System.Collections.Generic.List1[IDataEntities.ISearchResultsEntity]`

问题 2：我在 ajax 帖子中有一个方法调用，我能够导航到该方法，但在里面我已经完成了 response.redirect，但失败说“Threadabort 异常”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:57:20.903

使用 Session 保存您的列表，如下所示

```
Session["mylist"] = list; 
```

您可以从下一页访问它，还有很多其他方式。请检查此[链接](http://code.msdn.microsoft.com/How-to-Pass-Data-Between-935838e4)。

当你打电话`Response.Redirect`给它时，如下所示

```
Response.Redirect(url, false);
Context.ApplicationInstance.CompleteRequest(); 
```

但不要对来自服务器端的 ajax 调用进行重定向，完成的 ajax 调用可以从客户端调用重定向。

关于成功的ajax回调方法

```
window.location = '[url to redirect]'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:11:16.993

问题 1：您需要用逗号分隔列表值。需要更多信息才能为您提供确切的代码，因为我不知道这是 asp.net 还是 asp.net mvc 或其他东西。例如，如果这是重定向到 asp.net mvc 中的另一个操作，您的接收器操作参数需要是一个列表，并且您重定向到 /Receiver?param1=value1,value2,value3 ...

希望这能回答你的问题

问题 2：无法从 ajax 请求重定向。需要返回一些特殊的东西并在前端处理它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T15:58:27.783

问题 1。向当前页面添加一个公共属性，类型为`List<Class>`。在下一页（redirect() 的目标页面）上，在 ASPX 文件中添加 prevoiusPageType 标签。现在您可以访问 Page.PreviousPage.ListToAccess。

问题2。添加 false 作为重定向的参数，例如`Response.Redirect("<URL-of-target-page", false);`

# iphone - 文件扩展名、核心数据、iphone的含义

> ID：10819752
> 
> 赞同：0
> 
> 时间：2012-05-30T15:48:12.993
> 
> 标签：iphone, core-data

我的问题：我想知道核心数据中 2 个文件扩展名的语义，每个文件的内容是什么，什么时候应该使用它们

```
1.myFileName.momd ( or myFileName.mom )
2.myFileName.sqlite 
```

我是核心数据编程的初学者。请就这个问题给我建议。欢迎所有评论在这里谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:54:10.357

扩展名`.mom`or`.momd`是一个[Apple 模型文件](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmModelFormat.html)。

扩展名`.sqlite`表示一个[SQLite 数据库](http://www.filefacts.net/sqlite-file-extension)。

当您的文件是该扩展名的适当类型时，请使用其中任何一个。（IOW，`.mom`当您的文件是 Apple 模型文件时使用扩展名。）

# java - 使用 JPA 的 SQL 中的类似函数

> ID：10819753
> 
> 赞同：0
> 
> 时间：2012-05-30T15:48:14.267
> 
> 标签：java, sql, jpa

我的代码是从参数 :title 中选择文本。但我得到了不正确的结果。就我而言，书类扩展了媒体。

这是我的查询。

```
String queryStr = "SELECT DISTINCT(b) FROM Book b, Media m  WHERE lower(m.title) LIKE :title"
TypedQuery<Book> query = em.createQuery(queryStr, Book.class);
if (book.getTitle() != null && book.getTitle() != "")
            query.setParameter("title", "%" + book.getTitle().toLowerCase() + "%"); 
```

我的参数是“哈利”。我想只得到 1 个结果，但我得到了我拥有的所有数据。我的代码有什么错误？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:27:55.377

您应该将 Media 排除在查询之外。JPA 还知道 Book 扩展了 Media，因此它知道从哪里获取书籍的 Media 部分。

# html - 为什么顶部按钮仍然链接到页面顶部？

> ID：10819762
> 
> 赞同：0
> 
> 时间：2012-05-30T15:48:53.627
> 
> 标签：html, document-body

我有一个`<a href="#top">Top</a>`链接到页面顶部的按钮，`<body id="top"></body>` 但是在删除正文的 id 时，该按钮仍然有效。我无法解决这个问题，我把它归结为浏览器缓存数据，尽管我已经清空了缓存并重新尝试了它仍然有效。这纯粹是提供信息，它不会给我带来任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:51:25.417

无法识别的片段标识符被视为位于文档的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:53:08.263

我相信如果 id 不存在，浏览器会像 '#' 一样处理它。链接到页面的开头。

# python - 将 FORTRAN 变量传递给 Python

> ID：10819766
> 
> 赞同：3
> 
> 时间：2012-05-30T13:09:24.360
> 
> 标签：python, fortran

我有一个从 Python 脚本（作为 ArcGIS 工具）调用的 FORTRAN 程序。我需要将一个数组 Raster_Z(i,j) 从 FORTRAN 传递给 python。

我已阅读有关 Python[子进程模块](http://docs.python.org/library/subprocess.html#module-subprocess)的信息；但是，我在理解如何使用 FORTRAN 做到这一点方面运气不佳。我发现的所有示例都涉及简单的 unix 命令行调用，而不是实际的程序。

有没有人通过内存管道将变量从 FORTRAN 传递到 Python 的经验？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T14:07:29.947

要通过`subprocess`模块中的管道将数组传递给 FORTRAN，您需要弄清楚如何将此数组作为命令行参数传递给 FORTRAN。这是因为 PIPE 使用类似 shell 的接口（或实际的 shell，如果您愿意）来调用程序。要使用您的方法，我将制作一个如下所示的 python 列表：

```
arguments = [rows, columns] + [x for x in Raster_Z.flatten()] 
```

我假设您使用的是 numpy. 该列表可以通过管道传输到 STDIN。通过这种方式，您可以告诉 FORTRAN 数组的行数和列数，以便它可以分配内存，然后它将读入扁平数组，您可以按照您认为合适的方式对其进行整形。扁平化数组还有一个额外的好处，那就是消除了数组从行顺序到列顺序存储的烦人转换。

实际上，我已经使用 PIPE 完成了您想要做的事情，只是我没有通过 STDIN 将数组传递到 FORTRAN 例程，而是将其写入一个临时文件，然后通过该文件从 FORTRAN 读取它。我最初试图做我上面建议的事情，但是我遇到了 FORTRAN 从 STDIN 读取大量数据的问题......我将此归因于缓冲。您的里程可能会有所不同，STDIN 可能适合您。

**或者：**

您可以使用 f2py 包装您的 FORTRAN 例程，然后将数组直接发送到 FORTRAN，就好像它是一个 python 函数一样，不需要管道！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:47:51.900

您是否也在传递数据 /into/fortran，或者只是传递数据？如果可能的话，我建议不要使用管道，绝对是输入到 fortran 中，如果您使用的是 intel 编译器。查看我对这个问题的回答：[https ://stackoverflow.com/a/10103339/1024514](https://stackoverflow.com/a/10103339/1024514)

临时文件可能会更好地工作 - 如果在写入数据后立即读取它，无论如何都可能来自操作系统缓冲区。或者编写一个包装器来从 python 调用一个 fortran 函数来使用该数组——虽然我没有在 python 中这样做过。

# django - Django 移动和全站重定向

> ID：10819768
> 
> 赞同：1
> 
> 时间：2012-05-30T15:48:57.510
> 
> 标签：django, mobile, jquery-mobile, django-middleware

我已经在 Google 上搜索了一段时间，但无法准确找到我要查找的内容，因此决定在这里向大家询问。

我有一个完整的网站和网站的移动版本（一页 jQuery Mobile 文件）。

理论上，我想要检查可能的移动设备的传入请求（我已经可以这样做）并重定向到移动站点。在移动站点上，用户可以单击指向设置 cookie 的完整站点的链接，并且不会将该用户重定向回移动站点（即使他们的设备每次请求都会满足该条件）。

我所能找到的只是关于如何检查移动/桌面设备的每个请求并相应地更改模板。在这种情况下，这不是我需要做的。对于移动版和桌面版来说，这是一个完全不同的模板。

在这种情况下有什么想法或解决方案可能会有所帮助？

更新 1：

所以我已经尝试实现这一点，但我遇到了一些奇怪的问题/问题。这是我的中间件（在设置中的中间件列表中最后列出）

```
class mobile_check(object):

def process_request(self,request):
    if mobileBrowser(request) and not request.session.get('view_full'):
        return HttpResponseRedirect(reverse('posts.views.mobile_django')) 
```

这是当他们在 jQuery Mobile 中单击完整站点链接时要处理的视图。

```
def mobile_fullsite(request):
#import pdb; pdb.set_trace()

request.session['view_full'] = True
return HttpResponseRedirect(reverse('posts.views.index')) 
```

在我看来，这应该可以正常工作，但事实并非如此。它从链接中访问 mobile_fullsite 视图，并且 url 从 .../mobile/ 更改为 .../fullsite/ 但它仍然看起来像 jQuery mobile，其中包含来自重定向页面的一些内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:20:12.447

`django-mobile`具有您正在寻找的许多功能。它们在几个不同的部分中实现。第一个检测移动用户代理。第二个呈现与该模板相对应的模板（完整站点或移动站点）。此外，它允许用户选择他们想要查看的版本（使用 GET 请求）。 [https://github.com/gregmuellegger/django-mobile](https://github.com/gregmuellegger/django-mobile)

请检查一下，即使它没有你需要的一切，它也有广泛的追随者，我相信它能够为你提供一些代码。

如果您的用例略有不同，您可以轻松地使用 django 的会话框架（https://docs.djangoproject.com/en/dev/topics/http/sessions/）来相应地保持直接用户。

```
# user asks to view full site
request.session['view_full'] = True 
```

然后在检查移动用户代理时在您的中间件中，伪下面

```
if is_mobile and not request.session.get('view_full'):
  # they have mobile device and haven't request to see full site!~
  # Just check that they don't have a preference for viewing full site^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:10:10.187

您可能需要完全重定向，而不仅仅是更改模板。看看[django.http.HttpResponseRedirect](https://docs.djangoproject.com/en/dev/ref/request-response/#httpresponse-objects)

```
from django.http import HttpResponseRedirect

# test for mobile device here
# test for full site session variable here
fullSiteRequest = request.session.get('User_Wants_Full_Site', False)

if mobileDevice and not fullSiteRequest:
    return HttpReponseRedirect('mobile.mysite.com')

# continue onto your regular site 
```

编。在下面反映我的评论。

# delphi - Delphi Assembler/RTTI-gurus：我可以获取函数中隐含 Result 变量的内存地址和类型信息吗？

> ID：10819770
> 
> 赞同：4
> 
> 时间：2012-05-30T15:49:03.503
> 
> 标签：delphi, rtti, basm

考虑这个用于方法跟踪的典型代码（为说明而简化）：

```
type
  IMethodTracer = interface
  end;

  TMethodTracer = class(TInterfacedObject, IMethodTracer)
  private
    FName: String;
    FResultAddr: Pointer;
    FResultType: PTypeInfo;
  public
    constructor Create(
      const AName: String;
      const AResultAddr: Pointer = nil;
      const AResultType: PTypeInfo = nil);
    destructor Destroy; override;
  end;

constructor TMethodTracer.Create(
  const AName: String;
  const AResultAddr: Pointer;
  const AResultType: PTypeInfo);
begin
  inherited Create();
  FName := AName;
  FResultAddr := AResultAddr;
  FResultType := AResultType;
  Writeln('Entering ' + FName);
end;

destructor TMethodTracer.Destroy;
var
  lSuffix: String;
  lResVal: TValue;
begin
  lSuffix := '';
  if FResultAddr <> nil then
    begin
      //there's probably a more straight-forward to doing this, without involving TValue:
      TValue.Make(FResultAddr, FResultType, lResVal);
      lSuffix := ' - Result = ' + lResVal.AsString;
    end;
  Writeln('Leaving ' + FName + lSuffix);

  inherited Destroy;
end;

function TraceMethod(
  const AName: String;
  const AResultAddr: Pointer;
  const AResultType: PTypeInfo): IMethodTracer;
begin
  Result := TMethodTracer.Create(AName, AResultAddr, AResultType);
end;

//////

function F1: String;
begin
  TraceMethod('F1', @Result, TypeInfo(String));
  Writeln('Doing some stuff...');
  Result := 'Booyah!';
end;

F1(); 
```

这是按预期工作的。输出是：

> 进入 F1
> 做一些事情...
> 离开 F1 - 结果 = Booyah！

我现在正在寻找一种方法来最小化调用所需参数的数量`TraceMethod()`，理想情况下允许我完全跳过 -`Result`相关的参数。我自己没有汇编程序或堆栈布局的经验，但如果我没记错的话，从我看到其他人所做的“魔法”来看，至少隐含的魔法`Result`变量的内存地址应该可以通过某种方式获得，不是吗？ ? 也可能有人可以从那里获得它的类型信息？

当然，如果甚至可以确定“周围”函数本身的名称，这将消除将参数传递给`TraceMethod`完全...

我正在使用 Delphi XE2，因此可以使用所有最近引入的语言/框架功能。

在任何人提到它之前：我的实际代码已经使用`CodeSite.EnterMethod`/`ExitMethod`而不是`Writeln`-calls。我也知道这个简化的例子不能处理复杂的类型并且不执行任何错误处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T17:15:16.053

你最好的选择是真的只是通过`@Result`。如果你不这样做，那么就不能保证它`Result`甚至*有*一个地址。返回简单类型的函数，例如`Integer`并将`Boolean`结果放入 EAX 寄存器。如果结果没有理由有地址，那么编译器将不会为它分配任何内存。使用表达式`@Result` *强制*编译器给它一个地址。

但是，仅仅知道地址不会为您提供返回类型。可能有一种方法可以通过 RTTI 发现它。这将涉及三个步骤：

1.  从方法名中提取类名。然后您[可以获得该类型的 RTTI](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiContext.GetType)。这将要求方法名称包含类的明确名称（包括单元名称）。

2.  Using the [list of methods](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Rtti.TRttiType.GetMethods) from that type, find the RTTI for the method. This will be complicated by the fact that the name doesn't necessarily uniquely identify a method. Overloads will all show the same name. (Rruz showed [how to deal with RTTI of overloaded methods](https://stackoverflow.com/a/10083676/33732) in the context of the [`Invoke`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiMethod.Invoke) method.) Also, the method name you get from the debug info won't necessarily match the RTTI name.

    Instead of trying to match the name, you could instead loop over all the class's methods, searching for the one whose [`CodeAddress`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiMethod.CodeAddress) property matches the address of the caller. Determining how to get the address of the *start* of the caller (instead of the return address) is proving more difficult to find than I expected, though.

3.  获取[方法的返回类型](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiMethod.ReturnType)，使用[`Handle`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Rtti.TRttiType.Handle)属性最终得到`PTypeInfo`你想要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T17:14:58.117

这个特性中的一些已经包含在我们的[`TSynLog`类](http://blog.synopse.info/post/2011/04/14/Enhanced-logging-in-SynCommons)中，它适用于从 Delphi 5 到 XE2。

它是完全开源的，并且与 Delphi XE2 一起使用，因此您手头有所有需要的源代码。它具有异常拦截和堆栈跟踪功能。

它允许像这样编码跟踪：

```
procedure TestPeopleProc;
var People: TSQLRecordPeople;
    Log: ISynLog;
begin
  Log := TSQLLog.Enter;
  People := TSQLRecordPeople.Create;
  try
    People.ID := 16;
    People.FirstName := 'Louis';
    People.LastName := 'Croivébaton';
    People.YearOfBirth := 1754;
    People.YearOfDeath := 1793;
    Log.Log(sllInfo,People);
  finally
    People.Free;
  end;
end; 
```

它将被记录为：

```
20120520 13172261  +    000E9F67 SynSelfTests.TestPeopleProc (784)
20120520 13172261 info      {"TSQLRecordPeople(00AB92E0)":{"ID":16,"FirstName":"Louis","LastName":"Croivébaton","Data":"","YearOfBirth":1754,"YearOfDeath":1793}}
20120520 13172261   -    000EA005 SynSelfTests.TestPeopleProc (794) 00.002.229 
```

那是：

*   你有行号和方法名；
*   您有方法内消耗的确切时间 (00.002.229)；
*   显示任何结果都非常容易（这里，该类甚至直接序列化为 JSON，您可以对任何类型的数据，甚至记录进行同样的操作）；
*   方法可以嵌套，我们的日志查看器中还有一个[分析工具可用](http://blog.synopse.info/post/2011/08/20/Enhanced-Log-viewer)- 也就是说，您可以从日志文件中检索在客户端花费最多时间的方法；
*   您可以非常轻松地添加堆栈跟踪或任何您想要的信息；
*   我们的代码对速度进行了非常优化：例如，它使用`interface`“自动离开”功能，就像您一样，但它不会进行任何内存分配，因为它使用“假引用计数”技巧；
*   当然，`Log`在栈上定义一个变量是可选的：如果只需要跟踪方法的 Enter/Leave ，写`TSQLLog.Enter`就够了。局部变量用于在方法 ( )`Log`中轻松嵌套附加信息。`Log.Log(sllInfo,People)`

请注意，调试信息（即方法名称和行号）是从`.map`编译时生成的文件的专有的非常优化的二进制转换中检索的。它将*比*它本身小很多`.map`（例如 900 KB `.map`-> 70 KB .mab，可以很容易地嵌入到 exe 中），因此小于 JCL 或 MadExcept 使用的格式，也小于编译时嵌入的信息德尔福。

我认为在“Enter”方法中硬编码“结果”是不值得的。它将添加大量编码（例如，转换为`TValue`耗时），而收益微不足道 - 大多数情况下，您需要了解的不仅仅是结果内容。

# mysql - 慢 MySQL 左连接查询

> ID：10819772
> 
> 赞同：1
> 
> 时间：2012-05-30T15:49:07.027
> 
> 标签：mysql

我有以下 3 个 MySQL 表（显示为 table_name:column_list）：

```
tbl_product: id, name
tbl_sales: productid, date
tbl_impressions: productid, date 
```

*tbl_products*存储可用产品，*tbl_sales*存储产品的每次销售，tbl_impressions 存储产品的*每次*印象。我想查找已**售出、已展示或两者兼有的**产品。我对此的尝试查询是：

```
SELECT prod.name
FROM tbl_product prod
LEFT JOIN tbl_sales sales ON sales.productid=prod.id
LEFT JOIN tbl_impressions imp ON imp.productid=prod.id
WHERE (sales.productid IS NOT NULL) OR (imp.productid IS NOT NULL) 
```

但是，在我的测试中，这个查询非常慢。我有哪些改进方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:55:13.020

在所有这些表中使用索引`productid`和`id`字段。如果我们对连接字段有索引，则 JOIN 将提供性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:53:32.213

```
SELECT name FROM tbl_product INNER JOIN tbl_sales ON id = productid
UNION
SELECT name FROM tbl_product INNER JOIN tbl_impressions ON id = productid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:54:47.723

使用`EXISTS`而不是你`LEFT JOIN`的 s 应该会有所帮助。

```
SELECT prod.name
FROM tbl_product prod
WHERE EXISTS ( SELECT 1 FROM tbl_sales sales WHERE sales.productid = prod.id )
   OR EXISTS ( SELECT 1 FROM tbl_impressions imp WHERE imp.productid = prod.id ) 
```

确保在`tbl_sales.productid`和上添加索引`tbl_impressions.productid`。[（正如其他人所说）]

# sql-server - 复制/粘贴汉字到SQL2005，显示为框

> ID：10819774
> 
> 赞同：0
> 
> 时间：2012-05-30T15:49:10.770
> 
> 标签：sql-server, localization

如果我从 google 上找到的一个 unicode 字符映射中提取一个字符并将其复制/粘贴到 SQL2005 中，它只会显示为一个白框。数据在那里，因为当我将字符串加载到我的应用程序中时，它再次显示为中文字符，除非在某些情况下我仍然在我的应用程序中看到框，所以这就是为什么我需要深入了解我在其中看到它们的原因SQL2005。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:33:12.200

SSMS 对 SQL 编辑器和结果集窗格使用不同的字体。

如果您编写 TSQL，例如

```
DECLARE @d nvarchar(10)  = N'' ;
SELECT @d; 
```

字符（不在 BMP 中的 U+2317F）在编辑器中显示为白框，但结果选项卡正确显示（使用 SSMS 2008 测试）。

这同样适用于您的应用程序：并非所有汉字都包含在每种字体中。

如果是

```
DECLARE @d nvarchar(10)  = N'漢字' ;
SELECT @d; 
```

字符 (BMP) 始终正确显示。

# javascript - 动态单元格宽度

> ID：10819775
> 
> 赞同：0
> 
> 时间：2012-05-30T15:49:13.953
> 
> 标签：javascript, css, html, html-table

我有两张桌子，一张放在另一张上面。顶部用于作为标题，因此我可以向下滚动而不会丢失表列名称。第二个是动态生成的表格，具有各种单元格长度。第二个表格也有改变单元格宽度的动态输入。我试图找出一种方法来设置顶部表格（标题）的宽度以使用底部表格动态更改其单元格长度。我搜索了谷歌，只找到了这样做的静态方法。任何帮助将不胜感激。我不希望完整的代码只是一个开始的方向。这是我的表格 HTML5 代码。

```
<table style="width: 42EM" cellpadding="0" cellspacing="0" class ='FeatureHEAD'border = '1'id ='tableHEAD'>
    <tr>

                                        <th >Date</th>
                                        <th >Time(s)</th>
                                        <th >Expected Act</th>
                                        <th >Video Name</th>
                                        <th >Status</th>
                                </tr> 
```

```
 <div style="overflow: auto;height: 22EM; width: 43EM;" class ='FeatureTable'>
  <table style="width: 42EM;" id='tableBody' border='1'>  </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:58:53.270

您可以使用一个`thead`元素作为标题，然后将 a`tbody`作为动态生成内容的容器。然后，您可以使用 css 来滚动`tbody`滚动 - 您需要将固定高度设置为会出现。您可能需要设置，因为这是您唯一需要的。`<tbody>``height: 200px``<tr>``<tbody>``oveflow-y: auto`

这不需要任何额外的 javascript，并且单元格将保持相同的宽度，因为它们嵌套在同一个表中。

它在语义和可访问性方面也很有意义，正如他们的名字所说的那样，`thead`并且`tbody`不必有两个不同的表。

```
<table style="width: 42EM" cellpadding="0" cellspacing="0" class ='FeatureHEAD'border = '1'id ='tableHEAD'>
<thead>
    <tr>

                                        <th >Date</th>
                                        <th >Time(s)</th>
                                        <th >Expected Act</th>
                                        <th >Video Name</th>
                                        <th >Status</th>
                                </tr>
</thead>

<tbody id='tableBody'>
</tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:52:08.700

我会使用 jQuery，在窗口滚动和调整大小事件时，我会遍历数据表标题 td，并将​​其宽度复制到标题表。

# ios - NSMutablearray 崩溃删除对象

> ID：10819781
> 
> 赞同：0
> 
> 时间：2012-05-30T15:49:30.193
> 
> 标签：ios, crash, nsmutablearray, nsarray

我运行一个 for 来选择要删除的对象。在我删除一个应用程序崩溃后。我读到由于索引的原因，我无法删除 for 中的对象，所以我将它们删除到外面，但它仍然崩溃。当它在运行时崩溃时，它说它是一个 NSArray 而不是，它是一个 NSMutablearray。任何人都知道为什么会这样？

这是代码：

```
NSMutableArray *discardedItems = [NSMutableArray array];
NSInteger catalogo = [[tmpDic objectForKey:@"catalogo"] intValue];
NSInteger documento = [[tmpDic objectForKey:@"documento"] intValue];

for (i=0; i<[self.deletedDocuments count] ; i++) 
{
    if ([[[self.deletedDocuments objectAtIndex:i] objectForKey:@"documento"] intValue] == documento &&
        [[[self.deletedDocuments objectAtIndex:i] objectForKey:@"catalogo"] intValue] == catalogo) 
        [discardedItems addObject:[self.deletedDocuments objectAtIndex:i]];
}

NSLog(@"Dictionary\n%@", self.deletedDocuments);
if (discardedItems != nil)
    [self.deletedDocuments removeObjectsInArray:discardedItems]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:58:55.860

您是否将数组存储在用户默认值中？取自用户默认值的对象将是不可变的，即使存储了可变的子类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:52:01.640

> 当它在运行时崩溃时，它说它是一个 NSArray 而不是，它是一个 NSMutablearray。

不，如果运行时说它是一个`NSArray`，它是一个`NSArray`。确保您没有将 NSArray 分配给`NSMutableArray * deletedDocuments`变量。请注意，`deletedDocuments`那是`NSArray`，不是`discardedItems`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:21:00.650

尝试：

```
for (int i=[self.deletedDocuments count]-1; i>=0 ; i--) 
{
    if ([[[self.deletedDocuments objectAtIndex:i] objectForKey:@"documento"] intValue] == documento &&
    [[[self.deletedDocuments objectAtIndex:i] objectForKey:@"catalogo"] intValue] == catalogo) {
        [self.deletedDocuments removeObjectAtIndex:i];
}
} 
```

# iphone - iOS 记录器库

> ID：10819785
> 
> 赞同：6
> 
> 时间：2012-05-30T15:49:39.117
> 
> 标签：iphone, ios, xcode, ios5

有没有像 Java 中的 log4J 这样的 iOS 开发好的记录器库？

我找到了 log4cocoa。但它现在几年没有更新了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T16:05:00.147

我还没有全部检查过，但这可能会有所帮助：

[灵活的 iOS 日志记录](http://brenwill.com/2010/flexible-ios-logging/)

[NSLogger](https://github.com/fpillet/NSLogger)

[SOSmax](http://labs.grupow.com/index.php/2010/12/objective-c-logging-with-sosmax/)

[GTMLogger (google-toolbox-for-mac)](http://code.google.com/p/google-toolbox-for-mac/source/browse/trunk/Foundation/GTMLogger.h)

[ASLogger](https://github.com/AlanQuatermain/aqtoolkit/tree/master/ASLogger/)

[可乐框架](http://code.google.com/p/cola-framework/)

[可可伐木](https://github.com/CocoaLumberjack/CocoaLumberjack)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-30T16:59:00.987

我使用[https://github.com/robbiehanson/CocoaLumberjack](https://github.com/robbiehanson/CocoaLumberjack)取得了很大的成功。它是 NSLog 的简单替代品，并允许您更改日志级别。我确实在设置全局日志级别（而不是每个文件）和在运行时更改日志级别方面遇到了困难，因为没有很好的记录。不过，它已经有一段时间了，所以也许这已经得到了改进。尽管如此，它还是生成了出色的日志文件，我可以在野外使用这些文件进行故障排除。

# spring - 用于集成测试的不同日志文件

> ID：10819791
> 
> 赞同：4
> 
> 时间：2012-05-30T15:50:09.537
> 
> 标签：spring, maven, logback, janino

我正在将[SL4j](http://www.slf4j.org/)和[Logback](http://logback.qos.ch/)用于托管在 Tomcat 中的 Web 应用程序。我使用 Spring 和 Maven（没有配置文件）。使用 Surefire 插件完成集成测试：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-failsafe-plugin</artifactId>
    <version>2.12</version>
    <executions>
        <execution>
            <id>integration-test</id>
            <goals>
                <goal>integration-test</goal>
            </goals>
            <configuration>...</configuration>
        </execution>
        <execution>
            <id>verify</id>
            <goals>
                <goal>verify</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

在 logback 配置中，我有一个基于文件的附加程序：

```
<appender name="A2" class="ch.qos.logback.core.FileAppender">
    <file>myapp.log</file>
    ... 
```

集成测试和 webapp 的日志文件是巧合分开的：对于集成测试，它是我项目的根目录，对于 webapp，它是 Eclipse 目录。所以我在 logback 配置中引入了一个日志文件位置：

```
<insertFromJNDI env-entry-name="java:comp/bla/logDir" as="logDir" />
<if condition='!isDefined("logDir")'>
    <then>
        <property name="logDir" value="${catalina.home}/logs/" />
    </then>
</if> 
```

`if`结合现在的作品`isDefined`，我在类路径上忘记了 Janino（感谢 Ceki）。集成测试日志输出和 Web 应用程序日志输出都在同一个日志文件中。所以我的问题：

如何分离集成测试 Web 应用程序的日志文件？我找到了这个[链接](http://www.nullin.com/2010/07/28/logging-tests-to-separate-files/)，但我更喜欢只有配置的解决方案。我真的很想插入 Maven 属性。

**更新** 我的问题解决了。首先是logback配置：

```
<configuration scan="true" debug="true">
    <!-- used for the production webapp -->
    <insertFromJNDI env-entry-name="java:comp/bla/logDir" as="logDir" />
    <if condition='!isDefined("logDir")'>
        <then>
            <if condition='isDefined("catalina.home")'>
                <then>
                    <!-- used for the development webapp -->
                    <property name="logDir" value="${catalina.home}/logs/" />
                </then>
                <else>
                    <!-- used for the integration test -->
                    <property name="logDir" value="./" />
                </else>
            </if>
        </then>
    </if> 
```

appender 文件属性如下所示：

```
 <file>${logDir}/myapp.log</file> 
```

此解决方案中有两件事很奇怪：

1.  logback 认为属性为空时未定义。所以我不得不使用`"./"`而不是`""`（空字符串）。
2.  `isDefined("catalina.home")``true`仅在 Tomcat（操作系统是 Windows）中启动时才会产生结果。不知道为什么要定义“catalina.home”，我有一个名为“CATALINA_HOME”的环境变量，但它似乎表明 TomCat 在启动时设置了“catalina.home”。

我仍然想在 logback 配置（项目根目录）中插入一个 Maven var，但恐怕我必须接受上面的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:46:38.087

条件配置（if 语句）需要 Janino。Janino 在您的课程路径上可用吗？您是否将调试属性设置为 true，如下所示？

```
<configuration debug="true">...</configuration> 
```

将 debug 属性设置为 true 将在控制台上打印 logback 的内部状态消息，这对于跟踪 logback 配置问题非常有用。

至于分离问题，你考虑过按主机名分离吗？Logback 自动将 HOSTNAME 定义为变量。因此，以下将根据 productionHost 和其他主机定义两个单独的日志记录设置。

```
<if condition='property("HOSTNAME").contains("productionHost")'>
    <then>...</then>
    <else>config for test</else>
</if> 
```

实际上，我不明白为什么根据“logDir”定义的分离不足以实现分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T21:50:45.287

我建议为集成测试设置单独的模块，您可以在其中放置不同的日志文件配置（src/test/resources），并且单元测试的配置将来自您放置单元测试的模块。

# security - LogiXML 安全 - 基本身份验证

> ID：10819795
> 
> 赞同：0
> 
> 时间：2012-05-30T15:50:24.060
> 
> 标签：security, authentication, iis

我对论坛很陌生，对一般的编程也很陌生。我关于 LogiXML 的问题如下：

我有一个 LogiXML 网站，需要基本身份验证 (IIS) 才能登录。我希望 LogiXML 使用此用户名和密码组合来验证用户身份，以便他们可以保存仪表板、图表等（他们自己的 @Username.xml 文件一切都保存了）。我已将安全组件添加到 LogiXML 的设置选项卡中，将身份验证源设置为“AuthSession”并将启用安全性设置为“True”，但出现以下错误：

"当 AuthenticationSource="AuthSession" 时必须设置 Session 变量 "rdUserName""

感谢您对此事的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:04:58.027

如果您在 IIS 中使用基本身份验证将用户凭据传递给应用程序，那么您需要使用“AuthNT”的安全选项而不是“AuthSession”。“AuthNT”使用操作系统的安全性来获取用户名——在这种情况下，是您的基本身份验证设置。您还需要确保禁用 IIS 中网站的匿名访问。

有关在 LogiXML 中设置各种类型安全性的更多详细信息，您可能需要查看 Logi DevNet 上关于安全性场景的这篇文章： [http ://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=1186](http://devnet.logixml.com/rdPage.aspx?rdReport=Article&dnDocID=1186)

# c++ - 在 C++ 中提取具有给定后缀的文件名部分

> ID：10819800
> 
> 赞同：0
> 
> 时间：2012-05-30T15:50:44.283
> 
> 标签：c++

我知道这相对微不足道，但我是 C++ 新手，在所有库函数之间迷路了。

在我正在运行的程序的目录中，我有一些名称为 SUFFIX_ordinal.xml 的文件。（FE：SUFFIX_34.xml、SUFFIX_75.xml..）

我需要遍历目录中的所有文件，找到这些文件并提取它们的序数。（FE：34、75）。

你能帮我吗？我什至不知道从哪里开始。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:55:38.780

通常[`boost.filesystem`](http://www.boost.org/doc/libs/1_49_0/libs/filesystem/v3/doc/index.htm)遍历文件名。

尽管很多人不赞成，但使用 提取序数可能是最简单的`sscanf`，例如：`sscanf(filename, "SUFFIX_%d.xml", &ordinal);`

如果你喜欢避免`sscanf`（很难怪你），使用类似的东西仍然相当容易`stringstream`：

```
std::stringstream buffer(filename);

buffer.ignore(100, '_');
buffer >> ordinal; 
```

# xml - 如何从xml结构中制作字符串？

> ID：10819804
> 
> 赞同：0
> 
> 时间：2012-05-30T15:51:02.437
> 
> 标签：xml, xml-parsing

有什么方法可以制作：

```
 <content>
    <headline>Big headline</headline>
    <headline>Small headline</headline>
  </content> 
```

XML结构中的字符串？就像是：

```
<xml>
<root>
  <pageContent>
    "<content><headline>Big headline</headline><headline>Small headline</headline</content>"
  </pageContent>
</root> 
```

其中“”中的所有内容都类似于字符串。我的意思是解析器的字符串。谢谢回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T15:58:41.717

我假设您希望将第一个 xml 视为第二个 xml 中的文本，这种情况下您必须转义特殊字符

```
<xml>
  <root>
    <pageContent>
      $lt;content$gt;$lt;headline$gt;Big headline$lt;/headline$gt;$lt;headline$gt;Small headline$lt;/headline$lt;/content$gt;
    </pageContent>
  </root>
</xml> 
```

另一种方法是使用 CDATA 它将忽略两者之间的任何 xml 标记

```
<xml>
<root>
  <pageContent>
    <![CDATA[
    <content><headline>Big headline</headline><headline>Small headline</headline</content>
    ]]>
  </pageContent>
</root> 
```

# c++ - 我在哪里可以找到 C++ 有状态虚拟基础的一个很好的解释？

> ID：10819808
> 
> 赞同：0
> 
> 时间：2012-05-30T15:51:12.657
> 
> 标签：c++

我在哪里可以找到 C++ 有状态虚拟基础的一个很好的解释？

我查看了[JSF](http://www.jsf.mil/) [C++ 编码标准](http://www.jsf.mil/downloads/down_documentation.htm)并阅读了他们的解释，但正在寻找一些额外的信息。

感谢您提供的任何其他详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:56:04.207

Stanley Lippman 的书[“Inside the C++ Object Model”](https://rads.stackoverflow.com/amzn/click/com/0201834545)很好地贯穿了这个主题（虽然过时了，但仍然有效）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T17:20:09.290

虚拟性是关于间接性的。让我们从简单的开始：

```
struct Foo { void bar(int, bool) {} } x;
x.bar(12, false); 
```

这里对`Foo::bar()`实例的调用`x`在编译时是完全已知的并静态解析：一个固定函数，它被赋予实例引用和函数参数。函数名，调用，完成。到目前为止没有问题。

继续：

```
struct Boo { virtual void bar(char, float) = 0; };
extern Boo * foreign_function();

Boo * p = foreign_function();
p->bar('a', -1.5); 
```

这一次，在编译时无法知道`bar()`调用应该去哪里。解决此问题的唯一方法是添加一个间接级别，允许您查找此成员函数的所有可能覆盖并在运行时选择正确的覆盖，具体取决于`*p`. 这次我们从函数名开始，在运行时执行查找，然后进行调用。这种模式应该仍然相当熟悉。

这里的要点是，知道动态类型`*p`是（非虚拟）基础的子类型就足够了，`Boo`这样我们只需一次查找就可以实现这一点（例如，指向与表兼容的表的 vtable 指针）`Boo`）。

现在说大鱼：

```
struct Voo { virtual void doo(double, void *) = 0; };
struct Left  : virtual Voo { virtual void doo(double, void *); } };
struct Right : virtual Voo { virtual void doo(double, void *); } };
struct Most : Left, Right  { virtual void doo(double, void *); } };

Left * p = /* address of a Most object, say */;
p->doo(0.1, nullptr); 
```

我们已经知道我们不知道`doo()`应该去哪里，我们必须在运行时查找它。但是，不再可能进行简单的一步间接寻址。即使`Left`是 的子类，`Voo`也是`Right`的子类`Voo`，但实际的`Voo`基本子对象`*p`实际上并不是`Left`- 或 -子对象的子对象`Right`- （唯一！）虚拟子对象直接属于`Most`（或任何最派生的对象是）。在实现方面，单个 vtable 指针是不好的，因为我们不需要`Left`' 的 vpointer，也不需要`Right`' 的 vptr。相反，我们想要实际对象具有的任何 vpointer。

所以现在我们发现自己处于一个熟悉的情况：我们需要查找一些我们只能在运行时知道的东西。而这次我们需要查找的是实际的虚拟基地。所以过程是这样的：函数名，在运行时查找虚基，在虚基中查找虚函数，然后进行调用。（在虚拟的典型 vtable 实现中，这通常通过“thunk”或“指向指针的指针”进行额外的查找来完成。）

简而言之，“虚拟”意味着“在运行时确定”。

（这并不*强制*您的编译器生成运行时代码。如果在编译时可以证明调度的目标是已知的，则调用可能会被去虚拟化。但是您的程序的*行为*是“好像”。）

# custom-controls - Silverlight，自定义控件中的动画

> ID：10819811
> 
> 赞同：1
> 
> 时间：2012-05-30T15:51:26.307
> 
> 标签：custom-controls, silverlight-5.0, resourcedictionary

我在 Silverlight 中创建了一个自定义控件，我已将模板添加到 generic.xaml 文件资源字典中。除了模板之外，我还把 StoryBoard 对象放到了这个字典中

```
<ResourceDictionary
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
xmlns:WidgetBase="clr-namespace:WidgetBase">

<Style TargetType="WidgetBase:WidgetBase">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="WidgetBase:WidgetBase">
                <Border BorderBrush="Black" BorderThickness="0" CornerRadius="10">
                    <StackPanel x:Name="FrameContainer">
                        <Border BorderBrush="Black" BorderThickness=".6"  HorizontalAlignment="Right" CornerRadius="10" Padding="3" MaxWidth="70" MaxHeight="30" Margin="5">
                            <Border.Effect>
                                <DropShadowEffect Color="Gray"></DropShadowEffect>
                            </Border.Effect>
                            <StackPanel Orientation="Horizontal">
                                <StackPanel.Resources>
                                    <Style TargetType="Image">
                                        <Setter Property="Width" Value="16"></Setter>
                                        <Setter Property="Height" Value="16"></Setter>
                                        <Setter Property="Margin" Value="3,0,3,0"></Setter>
                                        <Setter Property="Cursor" Value="Hand"></Setter>
                                    </Style>
                                </StackPanel.Resources>

                                <Image x:Name="MinimizeButton" Source="../Icons/Deep_Fav.png" />
                                <Image x:Name="RestoreButton" Source="../Icons/Deep_Faq.png" />
                                <Image x:Name="CloseButton" Source="../Icons/Deep_Close.png"/>

                            </StackPanel>
                        </Border>

                        <Border BorderBrush="Gray" x:Name="DragBorder" BorderThickness=".8"  HorizontalAlignment="Right" CornerRadius="10" Background="Black" Cursor="SizeNWSE">

                            <ContentPresenter Content="{TemplateBinding Content}"
                                                  ContentTemplate="{TemplateBinding ContentTemplate}" Margin="10"/>
                        </Border>
                    </StackPanel>
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

**<Storyboard x:Key="CloseAnimation">
    <DoubleAnimation     Storyboard.TargetProperty="UIElement.Opacity"
                         Duration="00:00:02" From="1.0" To="0.0" 
                         AutoReverse="False">
    </DoubleAnimation>
</Storyboard>** 
```

如何使用来自 Code Behind 的 Resource Dictionary 中的 Storyboard？我将点击事件连接到模板中的按钮：

```
 (this.GetTemplateChild("CloseButton") as Image).MouseLeftButtonDown += Close; 
```

然后在事件处理程序中，我想在用户控件上播放动画。

请问有人可以帮忙吗？

谢谢。

# java - 将休眠配置文件导入Spring applicationContext

> ID：10819813
> 
> 赞同：0
> 
> 时间：2012-05-30T15:51:32.703
> 
> 标签：java, spring, hibernate

我正在尝试将 Hibernate 3 与 Spring 3.1.0 集成。问题是应用程序无法找到在 hibernate.cfg.xml 文件中声明的映射文件。最初的 hibernate 配置有数据源配置、hibernate 属性和映射 hbm.xml 文件。主 hibernate.cfg.xml 文件存在于 src 文件夹中。这是主文件的外观：

```
<hibernate-configuration>
    <session-factory>
        <!-- Mappings -->
        <mapping resource="com/test/class1.hbm.xml"/>
        <mapping resource="/class2.hbm.xml"/>
        <mapping resource="com/test/class3.hbm.xml"/>
        <mapping resource="com/test/class4.hbm.xml"/>
        <mapping resource="com/test/class5.hbm.xml"/> 
```

弹簧配置是：

```
<bean id="sessionFactoryEditSolution" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="data1"/>
        <property name="mappingResources">
            <list>
                <value>/master.hibernate.cfg.xml</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.SQLServerDialect</prop>
                <prop key="hibernate.cache.use_second_level_cache">true</prop>

            </props>
        </property>
    </bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:11:33.330

您在路径的开头有一个正斜杠，因此您正在根目录中查找它。这几乎肯定是不正确的。

```
<value>/master.hibernate.cfg.xml</value> 
```

我通常这样指定我的配置：

```
<value>classpath:master.hibernate.cfg.xml</value> 
```

如果您`master.hibernate.cfg.xml`在您的资源中，这将有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:13:41.750

您可以尝试使用以下代码将 spring 指向**hibernate.cfg.xml**的正确位置。

```
<bean
    id="mySessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">

    <property name="configLocation">    
        <value>
            classpath:location_of_config_file/hibernate.cfg.xml
        </value>
    </property>
...........
</bean> 
```

# jquery-mobile - 无法让 JQuery-Mobile 可折叠展开/折叠事件执行

> ID：10819817
> 
> 赞同：3
> 
> 时间：2012-05-30T15:51:46.383
> 
> 标签：jquery-mobile

我有以下演示 HTML 文件，我想使用 JQuery-Mobile 可折叠展开/折叠事件，但无法触发 JavaScript 事件。我基于这里的 JSFiddle 示例：http: [//jsfiddle.net/6txWy/](http://jsfiddle.net/6txWy/)

我觉得我只是忽略了一些简单的东西，但这是我的 HTML 文件：

```
<html> 
<head> 
  <title>References</title>

  <meta name="viewport" content="width=device-width, initial-scale=1"> 
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
  <link rel="stylesheet" href="css/main.css" />

  <script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
  <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>  

  <script type="text/javascript">
  $('#my-collaspible').bind('expand', function()
  {
    alert('Expanded');
  }).bind('collapse', function () {
    alert('Collapsed');
  });
  </script>
</head> 

<body>
  <div data-role="page">
      <div data-role="content">
          <div data-role="collapsible" id="my-collaspible">
              <h3>My Title</h3>
              <p>My Body</p>
          </div>
      </div>
  </div>
</body>
</html> 
```

折叠和展开工作，但从未触发警报。

谢谢！跳蚤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T17:14:47.980

添加[PageInit](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)调用以确保在绑定事件之前加载页面

例子：

*   [http://jsfiddle.net/UT7kQ/](http://jsfiddle.net/UT7kQ/)

代码：

```
$('#home').live('pageinit', function(event) {
    $('#my-collaspible').bind('expand', function() {
        alert('Expanded');
    }).bind('collapse', function() {
        alert('Collapsed');
    });
}); 
```

# emacs - Emacs：启动时不加载模式

> ID：10819824
> 
> 赞同：1
> 
> 时间：2012-05-30T15:51:56.987
> 
> 标签：emacs, ide, lisp, elisp, dot-emacs

我在 Win64 下使用 Emacs。我想加载一个`gas-mode.el`在启动时调用的模式。

**我写的：**

```
C-x C-f c:/Program Files (x86)/emacs-23.1/.emacs

(autoload 'gas-mode "c:/Program Files (x86)/emacs-23.1/lips/gas-mode.el")
(setq auto-mode-alist 
     (append '(("\\.asm\\'" . gas-mode) ("\\.inc\\'" . gas-mode))
             auto-mode-alist))

C-x C-s
C-x C-c

<Restarting...>

M-x gas-mode 
```

**Emacs 的回答：**

我从来没有得到不同的回应：

```
[No match] 
```

**我的问题：**

如何让 Emacs`gas-mode.el`在启动时自动加载？任何的想法？谢谢。

**我的`.emacs`用户初始化文件所在的位置：**

Emacs 告诉我可以在程序目录的 emacs 文件夹中找到它：

```
user-init-file

C-j

"c:/Program Files (x86)/emacs-23.1/.emacs" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:01:40.027

我对 lisp 或 emacs lisp 不太了解，但您可以转到它所在的 .emacs 文件。然后在该文件中添加此代码

```
(load "c:/Program Files (x86)/emacs-23.1/lips/gas-mode.el") 
```

同样在您的加载路径中，您有“嘴唇”，我相信它应该是“lisp”，因此这可能是问题之一。

还有一件事，您不必每次都重新启动 emacs 可以转到最后一个括号并执行`C-x C-e`将评估表单的操作。要评估臭虫，你会做 MX load-file /.emacs

# php - 锂表单助手未在字段中显示值零 (0)

> ID：10819825
> 
> 赞同：2
> 
> 时间：2012-05-30T15:51:58.883
> 
> 标签：php, lithium, formhelper

在使用 Lithium 框架开发 PHP 应用程序时，我注意到零值没有显示在表单的文本字段中。目前，我正在从 MySQL 数据库中获取数据、显示并更新它。我能够将值零保存到数据库，并且从数据库返回的信息是正确的，因为我可以在将值直接回显到页面时查看它，并且零以外的任何值都可以正确显示。有谁知道如何启用以锂形式呈现零值，或者可能在以锂形式呈现之前禁用值检查？

我在`<?=$this->form->field...`绑定到对象的表单中使用锂提供的默认值`<?=$this->form->create($object); ?>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T21:57:44.607

哈。我以前从未注意到这一点。好像应该修好了。

同时，您可以在您的应用程序中编辑`lithium\template\helper\Form`或创建（如果您将其从默认值更改为应用程序的命名空间，则`app\extensions\helper\Form`替换为应用程序的命名空间）。`app``app`

需要改变的方法是`_defaults()`。以下是将显示零值的内容：

```
protected function _defaults($method, $name, $options) {
    $methodConfig = isset($this->_config[$method]) ? $this->_config[$method] : array();
    $options += $methodConfig + $this->_config['base'];
    $options = $this->_generators($method, $name, $options);

    $hasValue = (
        (!isset($options['value']) || $options['value'] === null) &&
        $name && $value = $this->binding($name)->data
    );
    $isZero = (isset($value) && ($value === 0 || $value === "0"));
    if ($hasValue || $isZero) {
        $options['value'] = $value;
    }
    if (isset($options['value']) && !$isZero) {
        $isZero = ($options['value'] === 0 || $options['value'] === "0");
    }
    if (isset($options['default']) && empty($options['value']) && !$isZero) {
        $options['value'] = $options['default'];
    }
    unset($options['default']);

    $generator = $this->_config['attributes']['name'];
    $name = $generator($method, $name, $options);

    $tplKey = isset($options['template']) ? $options['template'] : $method;
    $template = isset($this->_templateMap[$tplKey]) ? $this->_templateMap[$tplKey] : $tplKey;
    return array($name, $options, $template);
} 
```

当前版本有一些条件失败，实际为零整数或字符串`"0"`。

# jquery - slideToggle：通过单击子链接隐藏父级

> ID：10819828
> 
> 赞同：3
> 
> 时间：2012-05-30T15:52:03.903
> 
> 标签：jquery, slidetoggle

我有一个`<nav>`我想通过单击句柄链接来打开和关闭来显示的内容。`<nav>`当我单击其中一个子链接时，我还想关闭。在手柄链接和孩子上使用`slideToggle`都不起作用。句柄链接工作得很好，但是`<nav>`当您单击子链接时，它会折叠并重新打开。

jsFiddle 发生了什么：http: [//jsfiddle.net/qHZe8/](http://jsfiddle.net/qHZe8/)

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:56:04.550

您的`<ul>`元素也有 class `pull`，因此单击其中的一个链接也会触发`click`事件处理程序以再次切换元素。

您需要停止从内部链接传播的事件，`<ul>`以免发生这种情况。

```
jQuery("ul.pull li a").click(function(e) {
    e.stopPropagation();
    $("nav.mobile-navigation").slideUp("fast");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:55:34.193

问题是您有两个带有 class 的元素`pull`。

一种可能的解决方案是使用不同的选择器：

```
jQuery("a.pull").click(function() {
    $("nav.mobile-navigation").slideToggle("fast");
}); 
```

**演示：http:** [//jsfiddle.net/qHZe8/1/](http://jsfiddle.net/qHZe8/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T15:56:20.090

问题是您在 ul 和链接中使用相同的类来打开它，因此每当您单击子链接时，它都会执行这两个操作。

如果您从 ul 标签中删除该类，它应该可以工作

[http://jsfiddle.net/slfede/qHZe8/2/](http://jsfiddle.net/slfede/qHZe8/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T15:57:47.847

您已经为 the和句柄赋予了相同的 CSS 类 ( `.pull`) 。`<ul>`因此，单击项目也会注册为`.pull`处理程序的单击。正确的一个：http: [//jsfiddle.net/X2A3C/](http://jsfiddle.net/X2A3C/)

# c++ - 包含文件中的前导点

> ID：10819832
> 
> 赞同：2
> 
> 时间：2012-05-30T15:52:16.397
> 
> 标签：c++, c, windows

我熟悉使用 include 指令包含文件的概念，但以下语句是什么意思，特别是两个前导点和反斜杠？

```
#include "..\CmnHdr.h" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T15:53:03.553

前面的两个点表示当前目录的父目录。这是一个旧约定，其中`.`表示当前目录并`..`表示父目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T15:54:46.820

这是一种指定要包含与当前文件所在位置相关的文件的方法。在上面的例子中，它告诉编译器在当前文件的父目录中包含文件 CmnHder.h。您也可能只看到一个点，表示当前目录。

# javascript - 是否可以用鼠标在 d3.js 中的条形图上选择多个条形

> ID：10819833
> 
> 赞同：0
> 
> 时间：2012-05-30T15:52:20.550
> 
> 标签：javascript, svg, d3.js, bar-chart, brush

我试图为此谷歌，但没有运气。

我想要的是在 d3.js 中采用标准条形图，例如像这样

[http://bl.ocks.org/1218567](http://bl.ocks.org/1218567)

并用我的鼠标中间 4 条进行选择，并以某种方式仅获取所选值的值。

d3可以做到这一点吗？

* * *

编辑：我认为我的问题可能有点误导，我不想多次单击来选择对象，我想单击并拖动一次并选择基础对象，请参阅我评论中的 sencha 示例。

解决了：

d3.brush 是答案，您可以在此处查看工作演示 [http://mbostock.github.com/d3/ex/splom.html](http://mbostock.github.com/d3/ex/splom.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:33:45.500

您可以使用`.on()`函数和`click`事件来实现这一点。请参阅[文档](https://github.com/mbostock/d3/wiki/Selections#wiki-on)。为了能够选择多个条形图，您需要在全局变量中跟踪当前选择，例如当您单击未选择/选定的条形图时添加和删除的数组。代码可能看起来像

```
var selection = [];
...
var bars = vis.selectAll("g.bar")
    .data(data)
    .enter()
    .append("svg:g")
    ...
    .on("click", function(d) {
        if(selection.indexOf(d) == -1) { selection.push(d); }
        else { selection.splice(selection.indexOf(d), 1); }
        updateSelectionDisplay();
    }); 
```

# android - 什么时间间隔应该告诉我是否应该使用轮询或推送通知？

> ID：10819841
> 
> 赞同：0
> 
> 时间：2012-05-30T15:53:00.897
> 
> 标签：android, service, push-notification, android-c2dm

一般规则是如果应用程序没有定期更新（在一天中的特定时间）或不经常更新，则使用推送通知。

但这用简单的话来说意味着什么？这个时间间隔是多少小时/天/周/...？

换句话说，根据某个应用程序更新其内容的频率，我如何决定是否要实现拉取或推送通知服务？

PS。当我说拉时，我指的是一个常规的移动服务，它联系一些通常将数据发送到该特定应用程序的网络服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:18:31.980

好吧，这取决于您和您的应用程序的规范。如果您不知道何时发送消息，或者您的应用程序在创建后立即向用户提供内容是否很重要，您应该使用推送而不是拉取。一般来说，推送的使用不仅仅取决于请求频率。当然，您可以根据您想要交付给最终用户的内容混合这两种方法，例如使用推送通知来通知用户有新内容或他们刚刚收到新电子邮件或其他。

希望它有用...

# linux - 如何使用 sudo 验证用户是否对特定命令没有密码权限？

> ID：10819845
> 
> 赞同：0
> 
> 时间：2012-05-30T15:53:05.530
> 
> 标签：linux, bash, sudo

我正在编写一个 bash 脚本，它使用`sudo`LINUX 上的命令来自动化从 ISO 映像安装和提取媒体的过程。作为要求之一，脚本不应要求用户输入密码。因此，我编辑了该`sudoers`文件，使指定的用户对 Linux 上的`mount`and命令没有密码访问权限。`umount`

但是，我想知道我的 bash 脚本是否有办法检测用户是否对`mount`and命令没有密码 sudo 权限，以便在文件尚未配置`umount`的情况下它可以正常退出。`sudoers`

我考虑过使用`sudo -l`来查看用户的 sudo 权限；但是，此命令需要密码。此外，`sudo -n true`似乎也没有工作。结果，我想知道是否存在另一种无需解析`sudoers`文件即可检查用户 sudo 权限的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T15:58:34.957

`sudo -n true`似乎像我宣传的那样工作；它显示一条错误消息并以非零退出代码退出。不过，我想`sudo -n mount`这将是您真正想要的命令。

# gnuplot - 将 gnuplot 用于堆叠直方图

> ID：10819846
> 
> 赞同：10
> 
> 时间：2012-05-30T15:53:05.320
> 
> 标签：gnuplot, histogram

我正在尝试使用以下数据创建堆叠直方图：

```
8.01    1   5   1   
8.02    3   5   1
8.03    4   4   1
8.04    3   4   1
8.05    1   2   1 
```

我试图从第 4 个示例中调整脚本，目前我正在使用它：

```
set title "Test"
set key invert reverse Left outside
set key autotitle columnheader
set style data histogram
set style histogram rowstacked
set style fill solid border -1
set boxwidth 0.75

plot 'test.dat' using 2:xtic(1),  '' using 2 title 'Col1', '' using 3 title 'Col2', '' using 4 title 'Col3' 
```

我复制的部分我不确定是`using 2:xtic(1)`. 我知道这使它使用`xtic`值作为第一列，这就是我想要的。但我不知道这`using 2`部分代表什么。这是脚本生成的屏幕截图：

![在此处输入图像描述](../Images/549b44edfa11e6f9ee3bb72c67003794.png)

图像上的一切都很好，除了不应该存在的红色条。有人可以向我解释它为什么会出现以及如何摆脱它吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-30T16:22:20.003

`using 2`意味着 gnuplot 将使用文件中的第二列作为它正在绘制的数据。如果要绘制 x 数据与 y 数据，命令是`plot data using 1:2`如果 x 数据在第 1 列，y 数据在第 2 列。 `plot using 2`将在 y 轴上绘制第 2 列的数据，并且对于每个数据点，x 坐标将增加 1。

您会注意到绿色和红色条的大小相同：它们都使用第 2 列。如果您不希望出现第一个（红色）条，可以将 plot 命令更改为

```
plot 'test.dat' using 2:xtic(1) title 'Col1', '' using 3 title 'Col2', '' using 4 title 'Col3' 
```

使用此命令，xtic 标签将保持不变，第一个条将不再存在。请注意，数据的颜色将随此命令而改变，因为绘制的第一件事是红色，第二个是绿色，第三个是蓝色。

# qt - 用于 tableWidget 的 Qt setHorizo ntalHeaderLabels

> ID：10819848
> 
> 赞同：7
> 
> 时间：2012-05-30T15:53:09.420
> 
> 标签：qt, user-interface, qtablewidget, qlist

我将如何使用 tableWidget 的**setHorizo** **​​ntalHeaderLabels**属性来指定列的名称而不是数字？我想将我的行保留为数字，但将我的列更改为我收集到**QList**中的名称。

 ****现在，我将**行**和**列**的值设置为整数。当我尝试使用**setHorizo​​ntalHeaderLabels**时，列的整数值似乎覆盖了我试图指定的列名，我不知道如何修复它。

这就是我当前设置值的方式，它只涉及我的行和列的整数值：

```
 QList< QStringList > columnHeaderList; 

    //--- create the horizontal (column) headers
    QStringList horzHeaders;
    ui->tableWidget_inputPreview->setHorizontalHeaderLabels( horzHeaders );
    horzHeaders << "test1" << "test2" << "test3"; 

    ui->tableWidget_inputPreview->setRowCount( rowList.size() - 1 );
    ui->tableWidget_inputPreview->setColumnCount( columnHeaderList[0].size() );

for ( int row = 0; row < rowList.size(); ++row ) {
    for ( int column = 0; column < rowList[row].size(); ++column ) {
        ui->tableWidget_inputPreview->setItem(row, column, new QTableWidgetItem(rowList[row][column]));
    }
} 
```

我需要一些关于如何正确获取**QList**中的值并将列设置为我的**tableWidget**的值的指导。我的 tableWidget 中出现的列是 1, 2, 3, 4, 5, 6, 7，它们来自**setColumnCount**而不是**test1, test2, test3**中传递给它的项目数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-30T18:31:06.990

在您的示例中，您将 setHorizo​​ntalHeaderLabels 设置为一个空列表。请务必在设置标题之前填写它。此外，在设置列数后设置标题。

这是您想要的顺序：

```
//--- create the horizontal (column) headers
QStringList horzHeaders;
horzHeaders << "test1" << "test2" << "test3";
ui->tableWidget_inputPreview->setRowCount( rowList.size() - 1 );
ui->tableWidget_inputPreview->setColumnCount( columnHeaderList[0].size() );
ui->tableWidget_inputPreview->setHorizontalHeaderLabels( horzHeaders ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-20T15:02:23.800

还要意识到调用`ui->tableWidget_inputPreview->clear()`将删除标签。

考虑`ui->tableWidget_inputPreview->clearContents()`保留标签。****

# java - 单击 ListFragment 中未调用的侦听器

> ID：10819850
> 
> 赞同：0
> 
> 时间：2012-05-30T15:53:22.653
> 
> 标签：java, android, android-fragments, actionbarsherlock

我正在扩展一个 SherlockListFragment，但这并不重要，因为我的问题似乎与 Fragments 相关。

现在，我为我的列表实现了一个简单的单击侦听器，但它没有被调用。

```
public class MyListFragment extends SherlockListFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.list, container, false);
        v.setOnClickListener(new OnClickListener() {
                 public void onClick(View view) {
                    Log.i("debug", "single click");
             }
          });

          return v;
    }
} 
```

这有什么问题吗？

//解决方案：

```
listView.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {
        Log.i("debug", "single click");
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:19:45.367

是的，您在该代码中有问题。如果您希望在列表行上获取点击事件，那么您应该使用 setOnItemClickListener() 然后将新的 onItemClickListener() 对象传递给它，就像您在代码中使用其他方法一样。希望这对您有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:56:36.880

我认为您的问题可能就像返回您创建的视图一样简单，假设您没有简单地将其留在这里发布。你看到你正在测试点击的列表了吗？

# .net - 这是保存按“键”属性排序的配置文件的合适方法吗？

> ID：10819856
> 
> 赞同：1
> 
> 时间：2012-05-30T15:53:33.170
> 
> 标签：.net, xml, vb.net, linq, linq-to-xml

我有一个 XML 配置文件，我偶尔会向其中添加新元素，并且为了便于在应用程序之外阅读，我希望通过“add”元素的“key”属性保持它按字母顺序排序。

经过大量的试验和错误——使用我从这里、那里和任何地方收集的代码——我想出了下面的代码。它似乎工作正常，但我才刚刚开始学习 Linq to XML，所以我想知道这是否是一种合适的方法，或者是否有更好/更有效的方法我错过了。感觉就像我可能在重新创建整个文件元素时采取了不必要的步骤。

任何指导、想法或见解将不胜感激。

```
 Dim newEx = cfgEx.<appSettings>(0)
    newEx.Add(<add key=<%= sNewKey %> value=<%= sValue %>/>)
    Dim sortEx = <configuration>
                     <appSettings>
                         <%= From c In cfgEx.<appSettings>.<add> Order By c.@key Select c %>
                     </appSettings>
                 </configuration>
    cfgEx.ReplaceAll(sortEx.Nodes)
    cfgEx.Save(sXmlConfigFile) 
```

* * *

**编辑**

好的，所以我想我已经找到了一种更好的方法来做到这一点——无需在`sortEx`变量中显式地重新创建所有父标签：

```
 Dim newEx = cfgEx.<appSettings>(0)
    newEx.Add(<add key=<%= sNewKey %> value=<%= sValue %>/>)
    Dim sortEx = From c In newEx.<add> Order By c.@key Select c
    newEx.ReplaceAll(sortEx)
    cfgEx.Save(sXmlConfigFile) 
```

所以我想现在唯一的问题是，*这种*方法有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T08:33:19.680

好吧，在没有任何其他回复的情况下，我将发布我的编辑作为答案——因为它可能对任何寻找将新元素添加到组的方法的其他人有用，按属性按字母顺序对该组进行排序，然后将整个分支保存回原始文件。出于某种原因，我发现很难获得最后一部分的信息。

```
Dim newEx = cfgEx.<appSettings>(0)
newEx.Add(<add key=<%= sNewKey %> value=<%= sValue %>/>)
Dim sortEx = From c In newEx.<add> Order By c.@key Select c
newEx.ReplaceAll(sortEx)
cfgEx.Save(sXmlConfigFile) 
```

我显然不能肯定这是否是理想的方法，但我*可以*说它对我来说似乎工作得很好——尽管文件相对较小（~15k）。

当然，仍然欢迎任何意见和/或建议。

# java - 如何在 Oracle 中使用 JPA 存储日期和时间？

> ID：10819862
> 
> 赞同：20
> 
> 时间：2012-05-30T15:53:54.843
> 
> 标签：java, oracle, date, jpa

我正在使用 WebSphere 7 (Java EE 5) 和 OpenJPA 1.2.1。

我有一个带有“ `modifiedTimestamp`”属性的 JPA 对象，如下所示：

```
@Entity
public class Widget {
  /* ... */
  private java.sql.Date modifiedTimestamp;
  /* ... */
} 
```

Oracle 数据库中的相关字段类型为`DATE`。

我这样设置日期...

```
myWidget.setModifiedTimestamp(new java.sql.Data(System.currentTimeMillis()); 
```

...它被存储了，但是当我读回它时，一天中的时间还没有被存储，它允许返回为 24:00。

这是 JPA 的事情，还是 Oracle 的事情？任何建议都非常感谢！

谢谢

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-30T16:02:19.757

注释您的字段并更改类型应该会有所帮助：

```
@Temporal(TemporalType.TIMESTAMP)
private java.util.Date modifiedTimestamp; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-30T16:03:19.297

使用`@Temporal(TemporalType.TIMESTAMP)`( [Javadocs](http://docs.oracle.com/javaee/6/api/javax/persistence/TemporalType.html) )。结合[java.util.Date](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)。

```
@Temporal(TemporalType.TIMESTAMP)
@Column(name = "DATE_FIELD")
private java.util.Date modifiedTimestamp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-26T12:53:31.153

我看到这个问题已经被问过一段时间了，所以我建议阅读[这篇](https://www.baeldung.com/jpa-java-time#after-java-8)文章。引入 java 8 日期类型后有一些变化。我知道这不是这个问题的答案，我遇到的问题不同，但我发布这个是因为`@Temporal()`我在答案中看到的注释破坏了我的 CI 管道：

这有效：

```
@NotNull
@Column(nullable = false, columnDefinition = "TIME") // this bit is different
@JsonFormat(pattern="HH:mm")
private LocalTime startTime; 
```

这不会：

```
@NotNull
@Column(nullable = false)
@Temporal(TemporalType.TIME)
@JsonFormat(pattern="HH:mm")
private LocalTime startTime; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T08:47:02.577

如果您将类型更改为`java.sql.Timestamp`then 它也应该可以工作，而无需添加`@Temporal`注释。

```
private java.sql.Timestamp modifiedTimestamp; 
```

当然在 Oracle 中将字段更改为 TIMESTAMP。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T11:57:24.063

这就是我在 Java、MySQL db 和 OpenJPA2 中处理日期时间字段的方式。我希望字段是 java.util.Calendar 类型，dbfield datetime 和 dbvalue 作为 UTC 值。Mysql 对时区一无所知，因此使用自定义转换器可以设置和读取“yyyy-MM-dd HH:mm:ss”字符串。仍然是实体 bean 中的有效日期时间 sql 列和 java.util.Calendar。

```
@Entity @Table(name="user") @Access(AccessType.FIELD)
public class User {
    @Id @GeneratedValue(strategy=GenerationType.IDENTITY)
    private long id;    // primary key (autogen surrogate)

    private String name;

    @Column(name="updated_utc") // use custom serializer so that UTC-stringified
    @Temporal(TemporalType.TIMESTAMP) // db datetime is properly set to calendar instance
    @Factory("JPAUtil.db2calendar") @Externalizer("JPAUtil.calendar2db")
    private Calendar updated;

    public long getId() { return id; }
    public void setId(long id) { this.id = id; }

    public String getName() { return name; }
    public void setName(String name) { this.name=name; }

    public Calendar getUpdated() { return updated; }
    public void setUpdated(Calendar cal) { updated=cal; }

}

- - - 

public class JPAUtil {
    public static final TimeZone TIMEZONE_UTC = TimeZone.getTimeZone("UTC");

    public static String calendar2db(Calendar val, StoreContext ctx) {
        SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        df.setTimeZone(TIMEZONE_UTC);
        return df.format(cal.getTime()); // return date as UTC string value
    }

    public static Calendar db2calendar(String val, StoreContext ctx) {
        try {
            // returned calendar is using a default timezone, val was set as utc string
            return DateUtil.parseDateTimeFromUTC(val);
        } catch (Exception ex) { 
            return null;
        }
    }

}

- - - 

CREATE TABLE user (
  id bigint NOT NULL auto_increment,
  name varchar(64) NOT NULL default '',
  updated_utc datetime NOT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY USERNAME (name)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 ; 
```

ps：DateUtil 是我的随机工具类，提供一些基本的转换。

# javascript - 重命名属性名称并更改多个对象的值

> ID：10819863
> 
> 赞同：9
> 
> 时间：2012-05-30T15:54:00.140
> 
> 标签：javascript, for-loop

在下面的对象中，我想将属性名称 、 更改`thumb`为`thumbnail`。我还想更改`title`包含`<span>`标签的值。

这是我的对象：

```
var data = [{
    thumb: '/images/01.png',
    title: 'My title',
},{
    thumb: '/images/02.png',
    title: 'My title',
},{
    thumb: '/images/03.png',
    title: 'My title',
}]; 
```

这是我希望它看起来的样子：

```
var data = [{
    thumbnail: '/images/01.png',
    title: '<span class="red">title 1</span>',
},{
    thumbnail: '/images/02.png',
    title: '<span class="red">title 2</span>',
},{
    thumbnail: '/images/03.png',
    title: '<span class="red">title 3</span>',
}]; 
```

这是我尝试过的不起作用的方法：

```
 var i=0, count=data.length;
   for (i=0;i<=count;i++){
    data[i].thumbnail=data[i].thumb;
    data[i].title="<span class='red'>"+data[i].title+"<span>";
   } 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-30T15:57:26.390

这似乎可以解决问题：

```
function changeData(data){
    var title;
    for(var i = 0; i < data.length; i++){
        if(data[i].hasOwnProperty("thumb")){
            data[i]["thumbnail"] = data[i]["thumb"];
            delete data[i]["thumb"];
        }

        if(data[i].hasOwnProperty("title")){ //added missing closing parenthesis
            title = data[i].title;
            data[i].title = '<span class="red">' + title + '</span>';
        }
    }
}

changeData(data); 
```

**编辑：**

我试图使函数通用，但是由于您更新了答案以做非常具体的事情，所以我已将业务逻辑添加到函数中。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-30T15:57:36.640

您可以[遍历数组](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)，在每个对象中设置一个新属性，以及[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)旧属性：

```
data.forEach(function(e) {
   e.thumbnail = e.thumb;
   delete e.thumb;    
}); 
```

这是一个[工作示例](http://jsfiddle.net/pDAB7/)（检查控制台中的输出）。

`Array.prototype.forEach`显然，如果您想支持旧版浏览器，您将需要使用 polyfill （我在上面链接到的 MDN 文章中有一个，或者您可以只使用普通`for`循环）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-10T18:59:56.727

我创建了一个很好的函数来重命名属性名称：[https ://github.com/meni181818/simpleCloneJS/blob/master/renameProperties.js](https://github.com/meni181818/simpleCloneJS/blob/master/renameProperties.js)

**例子：**

```
var sourceObj = {
    foo: 'this is foo',
    bar: {baz: 'this is baz',
          qux: 'this is qux'}
};
//                                the source, rename list
var replacedObj = renameProperties(sourceObj, {foo: 'foooo', qux: 'quxxxx'});
// replacedObj output => {
        foooo: 'this is foo',
        bar: {baz: 'this is baz',
              quxxxx: 'this is qux'}
    }; 
```

由于您使用的是 Jquery，因此您可以`$.each`在此函数中使用函数：

```
function renameProperties(sourceObj, replaceList, destObj) {
    destObj = destObj || {};
    $.each(sourceObj, function(key) {
        if(sourceObj.hasOwnProperty(key)) {
            if(sourceObj[key] instanceof Array) {
                if(replaceList[key]) {
                    var newName = replaceList[key];
                    destObj[newName] = [];
                    renameProperties(sourceObj[key], replaceList, destObj[newName]);
                } else if(!replaceList[key]) {
                    destObj[key] = [];
                    renameProperties(sourceObj[key], replaceList, destObj[key]);
                }
            } else if(typeof sourceObj[key] === 'object') {
                if(replaceList[key]) {
                    var newName = replaceList[key];
                    destObj[newName] = {};
                    renameProperties(sourceObj[key], replaceList, destObj[newName]);
                } else if(!replaceList[key]) {
                    destObj[key] = {};
                    renameProperties(sourceObj[key], replaceList, destObj[key]);
                }
            } else {
                if(replaceList[key]) {
                    var newName = replaceList[key];
                    destObj[newName] = sourceObj[key];
                } else if(!replaceList[key]) {
                    destObj[key] = sourceObj[key];
                }
            }
        }
    });
    return destObj;
} 
```

**演示：http: [//jsfiddle.net/g2jzse5k/](http://jsfiddle.net/g2jzse5k/)**

# c - printf中的两个动态参数

> ID：10819873
> 
> 赞同：1
> 
> 时间：2012-05-30T15:54:52.343
> 
> 标签：c

```
#ifndef UNICODE 
#define UNICODE
#endif

#include <stdlib.h>
#include <stdio.h>
#include <time.h>
#include <Windows.h>

int main()
{
    char buffer[30];
    int counter=0;

    for(int i=0; i<22 ; i++)
    {       
        Sleep(1000);
        printf("%d %d\n",counter++,time(0));
    }

    system("pause");
    return 0;
} 
```

这个版本工作正常，它输出计数器和最后 22 秒的时间戳。不幸的是，当我做了看似无关的事情 - 替换 counter 和 time(0) 时`printf("%d %d\n",time(0),counter++);`，函数总是打印 0 代替 counter！对这个奇怪的事实有什么解释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T15:58:08.480

`time()`返回 type `time_t`，在许多平台上是 64 位的，而`"%d"`指的`int`是大多数是 32 位的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T15:58:32.510

格式说明`%d`符意味着需要`printf`一个`int`类型。但`time()`返回一个`time_t`; 如果它大于 a `int`，那么将比预期更多的东西放在堆栈上`printf`，基本上抵消了所有后续参数的位置（因此在你的情况下，时间值的高字节被解释为第二个参数）。

（要确认，您应该比较`sizeof(int)`和`sizeof(time_t)`。）

有关潜在的解决方案，请参阅以下问题的答案：[time_t 是什么原始数据类型？](https://stackoverflow.com/questions/2792551/what-primitive-data-type-is-time-t).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T16:01:25.893

`time()`（至少在 Windows 上）的结果是一个 64 位整数。您必须使用除`%d`打印之外的格式。试试`%lld`。

它在最后一次工作时工作，因为你得到了较低的 32 位，因为英特尔是一个小端处理器。

# joomla - joomla1.5登录后实现自定义逻辑

> ID：10819874
> 
> 赞同：0
> 
> 时间：2012-05-30T15:54:53.800
> 
> 标签：joomla, joomla1.5

一旦用户成功登录，我正在尝试完成一些特定的操作，我想知道在哪里可以完成这项工作。

我应该创建或编辑用户插件并在 onLoginUser() 函数中编写逻辑吗？如果是这样，我在哪里导入插件并触发适当的事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T20:16:05.730

最好的地方当然是将逻辑写入插件。这样，您就不会受到 Joomla 或 VM 升级会覆盖的任何代码更改的影响，并让您完全控制正在发生的事情。

我很确定 Joomla 在 plugins\user 文件夹中安装了一个 example.php 和 xml 文件，您可以克隆和修改它。只需确保在 joomla 插件表中有一个条目，以便 Joomla 知道它存在，并允许您通过管理员页面进行配置。

# c++ - 使用 Z3 的 C++ api 创建长析取？

> ID：10819875
> 
> 赞同：3
> 
> 时间：2012-05-30T15:55:04.883
> 
> 标签：c++, z3

用可变数量的析取创建长析取的首选方法是什么？

我的猜测是这样的事情应该可以使用`expr_vector`to 首先动态地`push_back`所有的析取，然后以某种方式使用`Z3_mk_or`来构建我的析取。

但是我怎样才能得到`Z3_ast`'s的数组`expr_vector`作为第三个参数传递给`Z3_mk_or`？

顺便说一句，如果创建一个长序列的二元析取而不是一个长的 n 元析取，是否会降低效率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T20:35:03.290

Z3 C++ API 不支持从`expr_vector`对象创建 n 元析取。我同意这是一个有用的功能，我将在下一个 Z3 版本中添加它。您可以使用以下代码来模拟此功能。以下代码并不完美，因为它创建了 expr_vector 的“副本”，但它可以用作临时解决方法。正如我上面所说，下一个版本将内置对这种操作的支持，并且将避免复制。

```
#include<vector>
#include<z3++.h>
using namespace z3;

expr mk_or(expr_vector args) {
    std::vector<Z3_ast> array;
    for (unsigned i = 0; i < args.size(); i++) 
        array.push_back(args[i]);
    return to_expr(args.ctx(), Z3_mk_or(args.ctx(), array.size(), &(array[0])));
}

int main() {
    context      c;
    expr_vector  args(c);

    args.push_back(c.bool_const("p"));
    args.push_back(c.bool_const("q"));
    args.push_back(c.bool_const("r"));

    std::cout << mk_or(args) << std::endl;
    return 0;
} 
```

关于您的第二个问题，如果创建一长串二进制析取而不是单个 n 元析取，则*不会显着降低性能。*在内部，Z3 可以非常有效地在二进制和 n 元格式之间进行转换。

# objective-c - 将 UIPrintInteractionController 推送到 UINavigationController 堆栈

> ID：10819880
> 
> 赞同：2
> 
> 时间：2012-05-30T15:55:23.893
> 
> 标签：objective-c, ios, airprint

的文档`UIPrintInteractionControllerDelegate`似乎表明您可以使用`printInteractionControllerParentViewController:`返回一个可`UIViewController`用于将我设法做的是将一个空对象推入堆栈，仅此而已。`UIPrintInteractionController``UINavigationController``UIViewController`

有没有人对如何做到这一点有任何想法，或者是否可以做到？

（为了清楚起见，我对任何使用私有 API 等的方法都不感兴趣。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T21:38:48.153

我在尝试让打印机选项出现在类似于 Pages 的 NavigationController 中时遇到了同样的问题。
重要的一点是实现 UIPrintInteractionControllerDelegate 的 printInteractionControllerParentViewController 以返回 NavigationController。
该方法只会从 UIPrintInteractionController 的当前方法调用。
[Apple docs on UIPrintInteractionControllerDelegate](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPrintInteractionControllerDelegate_Protocol/UIPrintInteractionControllerDelegate_Protocol.pdf)

一些示例代码：

```
// Just some code to return a UIPrintInteractionController
// Important to set delegate to self
- (UIPrintInteractionController *)printContent {
UIPrintInteractionController *pic = [UIPrintInteractionController sharedPrintController];
if  (pic && [UIPrintInteractionController canPrintURL:[self fileToPrint]]) {
    pic.delegate = self;
    UIPrintInfo *printInfo = [UIPrintInfo printInfo];
    printInfo.outputType = UIPrintInfoOutputGeneral;
    printInfo.jobName = @"OutputFile";
    printInfo.duplex = UIPrintInfoDuplexLongEdge;
    pic.printInfo = printInfo;
    pic.showsPageRange = YES;
    pic.printingItem = self.fileToPrint;
}
return pic;
} 
```

实现委托的 printInteractionControllerParentViewController 方法。

```
// Implement the delegate method simply to return navigationController
- (UIViewController *)printInteractionControllerParentViewController:(UIPrintInteractionController *)printInteractionController{
return self.navigationController;
} 
```

仅当您运行 UIPrintInterfaceController 的 Present 方法时才会调用委托，例如 presentFromRect：

```
// Need to call a present method to invoke the delegate method
[[self printContent] presentFromRect:[self.view frame] inView:self.view animated:NO completionHandler:completionHandler]; 
```

# c# - 查找调用方法和类的安全方法

> ID：10819883
> 
> 赞同：1
> 
> 时间：2012-05-30T15:55:30.110
> 
> 标签：c#, .net, reflection

> **可能重复：**
> [如何在 C# 中获取调用方法](https://stackoverflow.com/questions/394850/how-i-can-get-the-calling-methods-in-c-sharp)

我有一个`Log`类应该将其客户端的类和方法添加到记录的消息中，如下所示：

```
[ClientClass.ClientMethod] This is the logged message. 
```

我正在寻找一种**从`Log`类**中获取这些值的安全方法，而无需将其作为参数从客户端传递。到目前为止，我已经尝试过：

```
var stackFrame = new StackFrame(StackFramesToSkip);
var method = stackFrame.GetMethod();
return string.Format("[{0}.{1}] {2}", method.DeclaringType.Name, method.Name, message); 
```

但是，此方法并不总是产生调用方法。尤其是在使用多个线程时。

有没有一种安全的方法来做到这一点？我没主意了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:59:12.603

您可以使用`System.Reflection.MethodBase.GetCurrentMethod()`获取当前方法的名称并将名称传递给参数，但您说您不想要这些。好吧，我知道其他几种方法。

1.  对于 .NET 4.5 beta，您可以使用此[Caller Information](http://msdn.microsoft.com/en-us/library/hh534540%28v=vs.110%29.aspx)。
2.  您可以使用动态代理。日志记录方法仍然需要一个参数，但动态代理允许您只进行一次调用，并将其动态添加到您的方法中。您可以使用[ContextBoundObject](http://www.codeproject.com/Articles/8414/The-simplest-AOP-scenario-in-C)或[Castle Dynamic Proxy](http://www.castleproject.org/dynamicproxy/index.html)
3.  您可以使用 AOP 框架。这允许您执行类似于 (2) 的操作，但它更简洁。基本上，根据框架，可以在构建时静态而不是动态地添加调用。这是一个很好的 AOP 框架：[PostSharp](http://www.sharpcrafters.com/)。

有一次我必须这样做，我手动添加了调用。起初我认为这会令人生畏，但就我而言，它并没有那么糟糕。我有非常有限的各种记录方法（那些与 COM 通信的方法）。

# java - if 和 else 语句同时出现，虽然它不应该是可能的

> ID：10819890
> 
> 赞同：5
> 
> 时间：2012-05-30T15:55:48.043
> 
> 标签：java, eclipse, if-statement

我在eclipse中遇到了一个非常奇怪的问题。看下面的代码：

```
public void addItem(ArrayList<Object> objectLists)  {

        SHorizontalLayout hLayout = Cf.hLayout();
        hLayout.setSizeFull();
        hLayout.setHeight(rowHeight, UNITS_PIXELS);
        if(rowCount % 2 != 0 && rowCount != 0)  {
            hLayout.addStyleName("row-even");
        } else  {
            hLayout.addStyleName("row-odd");            
        }

        for(Object object : objectLists)    {

            if(object instanceof String || object instanceof Integer)   {
                hLayout.addComponent(Cf.h1(object.toString()), Alignment.MIDDLE_CENTER);
                columnList.get(0).addComponent(hLayout);                
            } else if(object instanceof ChipSlotGrid)   {
                hLayout.addComponent((ChipSlotGrid)object, Alignment.MIDDLE_CENTER);
                columnList.get(1).addComponent(hLayout);            
            }
        }

        rowCount++;
    } 
```

在 for 循环中，检查对象的实例类型并相应地添加到布局中。

我遇到的问题是，当对象是 type 时，`Integer`它​​进入*if 语句*，执行语句内的两行，然后不是在循环中离开一个新的循环，而是跳转到 else 语句，执行 row `columnList.get(1).addComponent(hLayout)`（跳过 else 语句中的第一行）。

即使它已经进入了 if 语句，它也在执行 else 语句的一部分。我知道这一点是因为我在我正在开发的应用程序中看到了它的产品，并且在我调试代码时我已经以编程方式看到了它。

如果我要将问题分解为最小的组件：

```
i = 0;    
if(true)   {
   i++;
} else   {
   i++;
}

System.out.println(i); 
```

对于我的问题，打印输出将是：2

我在这里不知所措。我的 IDE 有问题吗？有没有人遇到过这种情况并且知道可能出了什么问题？

**编辑：** 我尝试过切换语句并且可以得出结论该模式重复自身。

```
for(Object object : objectLists)    {

        if(object instanceof ChipSlotGrid)  {
            hLayout.addComponent((ChipSlotGrid)object, Alignment.MIDDLE_CENTER);
            columnList.get(1).addComponent(hLayout);                
        } else if(object instanceof String || object instanceof Integer)    {
                hLayout.addComponent(Cf.h1(object.toString()), Alignment.MIDDLE_CENTER);
                columnList.get(0).addComponent(hLayout);
        }
    } 
```

**编辑 2：**根据 Jon 的请求，我在语句中添加了日志记录。

```
for(Object object : objectLists)    {

            if(object instanceof ChipSlotGrid)  {
                log.info("Inside if");
                hLayout.addComponent((ChipSlotGrid)object, Alignment.MIDDLE_CENTER);
                columnList.get(1).addComponent(hLayout);
            } else if(object instanceof String || object instanceof Integer)    {
                    log.info("Inside else");
                    hLayout.addComponent(Cf.h1(object.toString()), Alignment.MIDDLE_CENTER);
                    columnList.get(0).addComponent(hLayout);
            }
        } 
```

当它从 if 语句跳转到 else 语句时，else 语句中的日志也会被跳过。（我希望这是你要求的测试）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:07:31.970

我已经在 Eclipse Indigo 中看到了这种行为。Eclipse 与您的源代码不同步似乎是一个问题。“干净”并没有为我解决问题。为了修复它，我只是更改了 if 语句的条件，重新构建、调试，然后将我的 if 语句更改回原来的方式，**而不使用 undo**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:00:25.423

如果您的代码如下所示：

```
if(object instanceof String || object instanceof Integer)   {
    hLayout.addComponent(Cf.h1(object.toString()), Alignment.MIDDLE_CENTER);
    columnList.get(0).addComponent(hLayout);                
} else if(object instanceof ChipSlotGrid)   
    hLayout.addComponent((ChipSlotGrid)object, Alignment.MIDDLE_CENTER);
    columnList.get(1).addComponent(hLayout); 
```

（注意 上没有大括号`else if`）那么只有第一行将被视为受条件约束，而第二行将始终被评估。

这是我能想到的唯一会导致你解释的事情。您确定您在 IDE 中查看的代码正是正在执行的代码吗？例如，如果您在多个 JAR 中有一个具有相同包和名称的类，那么它可能使用的是该类的过时版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:24:42.227

该函数`addItem()`本身很可能被调用了两次。我注意到`rowCount`它本身是在`addItem`. 如果您在 for 循环之外增加一个变量，请在 for 循环之前调用它`int callCount`或执行其他操作`callCount++`。

我打赌它会增加到 2，因为`addItem`被调用了 2 次

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T16:15:58.050

`addItem`创建一个，`SHorizontalLayout`然后循环将组件添加到它，并将相同的布局对象添加到`columnList`. 你确定那是你想要的吗？

例如，使用上面编写的代码，如果`objectLists`参数按顺序包含 an`Integer`和 a `ChipSlotGrid`，该方法将创建一个`SHorizontalLayout`，将`Integer`' 组件添加到其中，将布局对象添加到第 0 列，将`ChipSlotGrid`' 组件添加到布局，然后将相同的布局对象添加到第 1 列。

如果这与我使用的其他布局框架类似，那么当您将布局对象添加到第 1 列容器时，它将从第 0 列容器中删除，但仍将包含之前添加的`Integer`组件和`ChipSlotGrid`组件，这可能看起来`if`语句的两个分支都已执行。

没有提供足够的代码让我看到这是否真的导致了您遇到的问题，但我怀疑这可能是一个问题。

# mysql - SQL 查询：计算总计矩阵

> ID：10819893
> 
> 赞同：0
> 
> 时间：2012-05-30T15:55:50.577
> 
> 标签：mysql, sql

我的查询有效，如下所示：

```
 SELECT 
     SUM(`WTE`) / 1000 AS WTE
   FROM  `orthoptists` AS o
   LEFT JOIN `instances` AS i
   ON o.instance_FK = i.id
   WHERE i.region = 14 AND o.band = "D" AND o.age = "A"  ; 
```

对于 o.band 和 o.age，我各有 10 个可能的值，对于这两个值的每个排列，我都需要此查询的结果。

我对 SQL 很陌生：有没有办法使用子查询为 o.band 中的一个值生成所有结果（比如说）？或者甚至一口气完成所有工作？

性能在这方面并不重要：方便才是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T15:59:37.887

试试这个

```
 SELECT 
     SUM(`WTE`) / 1000 AS WTE, o.band, o.age
   FROM  `orthoptists` AS o
   LEFT JOIN `instances` AS i
   ON o.instance_FK = i.id
   WHERE i.region = 14
   group by o.band, o.age 
```

# asp.net-mvc-3 - MVC 找出当前的 Web 请求是针对控制器/动作还是静态资源

> ID：10819895
> 
> 赞同：3
> 
> 时间：2012-05-30T15:56:01.543
> 
> 标签：asp.net-mvc-3

我已经开发了一个 MVC Web 应用程序，对于每个进来的请求，我都需要改变文化。我有以下内容：

```
/// <summary>
/// Called from every HTTP request
/// </summary>
/// <param name="sender">Sender object</param>
/// <param name="e">Event args</param>
protected void Application_BeginRequest(object sender, EventArgs e)
{
    this.SetCulture();
} 
```

现在文化的设置完美运行，但是它通过这段代码运行每个请求，包括对 javascript 文件、css 文件、图像、字体等的调用。我只希望这个方法运行以执行操作。

**无论如何在请求的这个阶段（即Application_BeginRequest）来确定它是控制器/操作请求还是静态资源请求？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:15:58.840

从 BaseController（它本身从 Controller 派生）派生所有控制器，并将代码放入基本控制器的 OnActionExecuting 函数中。

```
public BaseController : Controller
{
        protected override void OnActionExecuting(ActionExecutingContext filterContext)
        {
                SetCulture();
        }
} 
```

# c# - 更新可观察集合中不同元素的数据绑定

> ID：10819898
> 
> 赞同：0
> 
> 时间：2012-05-30T15:56:06.437
> 
> 标签：c#, wpf, data-binding, collections

到目前为止，我有一个可观察的集合，其中只有一种类型的对象，但现在我有第二种类型的对象。我已经将一些 wpf 元素绑定到这个集合的元素，我现在想要的是输入表单根据它绑定到集合中的哪种对象而改变。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T16:03:21.057

使用`DataTemplate`不带`x:Key`，但带`DataType={x:Type typename}`。为集合中的每种类型编写一个数据模板。然后，WPF 会自动选择与集合中项的类型相匹配的数据模板。

例子：

```
<DataTemplate DataType="{x:Type local:StringType}">
  <TextBox Text="{Binding Text}" />
</DataTemplate>
<DataTemplate DataType="{x:Type local:BooleanType}">
  <CheckBox IsChecked="{Binding Value}" />
</DataTemplate> 
```

# android - 在 Android 搜索对话框中返回多列

> ID：10819910
> 
> 赞同：0
> 
> 时间：2012-05-30T15:56:54.947
> 
> 标签：android, sqlite

我现在正在弄清楚如何在我的 Android 应用程序中实现搜索对话框。我已经让它工作了，但它只输出一列。我想我知道如何让它搜索多列（在我的例子中是三列），但 Eclipse 说我错了。这是我在 DBAdapter 类中获取记录的方法：

```
 //--- GET RECORDS FOR SEARCH
public Cursor searchDB(String query) {
String[] allColumns = new String[]{ KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 };
return db.query(true, DB_TABLE, new String[] { KEY_ROWID,
KEY_COLUMN1, KEY_COLUMN2, KEY_COLUMN3 }, KEY_COLUMN1 + " LIKE" + "'%" + query +             "%'", null, null, null, null, null);
}
//--- END Get Records for Search 
```

这是活动中显示返回结果的方法：

```
 //--- Show Results method
private void showResults(String query) {        
Cursor cursor = DBHelper.searchDB(query);
startManagingCursor(cursor);
String[] from = new String[] { DBAdapter.KEY_COLUMN1 }; //--- change this?
int[] to = new int[] { R.id.text1 };
SimpleCursorAdapter records = new SimpleCursorAdapter(this,
        R.layout.record, cursor, from, to);     
    setListAdapter(records);
}
//--- END Show Results method 
```

现在，未使用 string[] allcolumns。我假设我会通过这样做来使用它

```
allcolumns + " LIKE" 
```

在 DBAdapter 类的 SearchDB() 方法和`DBAdapter.allcolumns`showResults 方法中。但是 allColumns 不作为 showResults() 方法中的选项提供。这是怎么回事？如何使用搜索对话框返回多个数据库列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:05:53.630

我在 Android SDK 的 SearchableDictionary 示例中找到了答案。您必须修改您的 records.xml 文件，以便它具有与您想要返回的列一样多的文本视图。此外，在 showResults() 方法中，在您的 from 字符串中，添加：`DBAdapter.KEY_COLUMN1, DBAdapter.KEY_COLUMN2, DBAdapter.KEY_COLUMN3`当然，使用您自己的数据库调用和列名。

# python - 从巨大的 CSV 文件中读取随机行

> ID：10819911
> 
> 赞同：39
> 
> 时间：2012-05-30T15:56:58.293
> 
> 标签：python, file, csv, random

我有这个相当大的 CSV 文件（15 Gb），我需要从中读取大约 100 万行随机行。据我所见 - 并实现 - Python 中的 CSV 实用程序只允许在文件中按顺序迭代。

将所有文件读入内存以使用一些随机选择非常耗时，并且遍历所有文件并丢弃一些值并选择其他值非常耗时，所以**有什么方法可以从 CSV 文件中选择一些随机行和只读那一行？**

我试过没有成功：

```
import csv

with open('linear_e_LAN2A_F_0_435keV.csv') as file:
    reader = csv.reader(file)
    print reader[someRandomInteger] 
```

CSV 文件示例：

```
331.093,329.735
251.188,249.994
374.468,373.782
295.643,295.159
83.9058,0
380.709,116.221
352.238,351.891
183.809,182.615
257.277,201.302
61.4598,40.7106 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-30T16:03:29.243

```
import random

filesize = 1500                 #size of the really big file
offset = random.randrange(filesize)

f = open('really_big_file')
f.seek(offset)                  #go to random position
f.readline()                    # discard - bound to be partial line
random_line = f.readline()      # bingo!

# extra to handle last/first line edge cases
if len(random_line) == 0:       # we have hit the end
    f.seek(0)
    random_line = f.readline()  # so we'll grab the first line instead 
```

正如@AndreBoos 指出的那样，这种方法将导致有偏见的选择。如果您知道线的最小和最大长度，则可以通过执行以下操作来消除此偏差：

假设（在这种情况下）我们有 min=3 和 max=15

1）求上一行的长度（Lp）。

那么如果 Lp = 3，则这条线的偏差最大。因此，如果 Lp = 15，我们应该在 100% 的情况下采用它，这条线最偏向。我们应该只选择 20% 的时间，因为它被选中的可能性要高 5 倍。

我们通过随机保持 X% 的时间来实现这一点，其中：

X = 最小值 / Lp

如果我们不遵守这条线，我们会再随机选择一次，直到我们的骰子掷好为止。:-)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-30T16:17:13.537

> 我有这个非常大的 CSV 文件（15 Gb），我需要从中读取大约 100 万行随机行

假设您不需要**正好**100 万行并且事先知道 CSV 文件中的行数，您可以使用[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)来检索您的随机子集。只需遍历您的数据，并为每一行确定该行被选中的机会。这样，您只需要一次数据传递。

如果您需要经常提取随机样本但实际数据集不经常更改（因为您只需要在每次数据集更改时跟踪条目数），则此方法效果很好。

```
chances_selected = desired_num_results / total_entries
for line in csv.reader(file):
   if random() < chances_selected:
        result.append(line) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-30T17:43:31.403

您可以使用[概率方法](https://stackoverflow.com/a/232248/624900)的变体来选择文件中的随机行。

您可以保留一个 size 的缓冲区，而不是只保留一个被选中的数字`C`。`n`对于带有行的文件中的每个行号 ，`N`您希望以概率`C/n`（而不是原始的 ）选择该行`1/n`。如果选择了该行，则从 C 长度缓冲区中选择一个随机位置以逐出。

以下是它的工作原理：

```
import random

C = 2
fpath = 'somelines.txt'
buffer = []

f = open(fpath, 'r')
for line_num, line in enumerate(f):
    n = line_num + 1.0
    r = random.random()
    if n <= C:
        buffer.append(line.strip())
    elif r < C/n:
        loc = random.randint(0, C-1)
        buffer[loc] = line.strip() 
```

这需要一次**通过**文件（因此它是线性时间）并从文件中**准确返回行。** `C`每条线都有`C/N`被选中的概率。

为了验证上述方法是否有效，我创建了一个包含 a、b、c、d、e 的 5 行文件。我用 C=2 运行代码 10,000 次。这应该会产生大约 5 个选择 2（所以 10）个可能的选择的均匀分布。结果：

```
a,b: 1046
b,c: 1018
b,e: 1014
a,c: 1003
c,d: 1002
d,e: 1000
c,e: 993
a,e: 992
a,d: 985
b,d: 947 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-03-03T23:36:26.113

如果您想多次抓取随机行（例如，用于机器学习的小批量），并且您不介意扫描一次巨大的文件（不将其加载到内存中），那么您可以创建一个行索引列表和使用 seek 快速抓住线（基于 Maria Zverina 的回答）。

```
# Overhead:
# Read the line locations into memory once.  (If the lines are long,
# this should take substantially less memory than the file itself.)
fname = 'big_file'
s = [0]
linelocs = [s.append(s[0]+len(n)) or s.pop(0) for n in open(fname)]
f = open(fname) # Reopen the file.

# Each subsequent iteration uses only the code below:
# Grab a 1,000,000 line sample
# I sorted these because I assume the seeks are faster that way.
chosen = sorted(random.sample(linelocs, 1000000))
sampleLines = []
for offset in chosen:
  f.seek(offset)
  sampleLines.append(f.readline())
# Now we can randomize if need be.
random.shuffle(sampleLines) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-30T16:05:44.733

如果这些行是真正的 .csv 格式而不是固定字段，那么不，没有。您可以浏览文件一次，为每行索引字节偏移量，然后在以后需要时仅使用索引集，但是无法先验地预测任意 csv 文件的行终止 \n 字符的确切位置。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-30T16:41:02.393

如果您知道总行数，则可以使用另一种解决方案 - 生成 100 万个随机数 ( `random.sample(xrange(n), 1000000)`)，直到作为一组总行数，然后使用：

```
for i, line in enumerate(csvfile):
    if i in lines_to_grab:
        yield line 
```

这将以不偏不倚的方式为您提供恰好 100 万行，但您需要事先获得行数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-30T22:18:00.733

如果您可以将此数据放在 sqlite3 数据库中，则选择一些随机行是微不足道的。您无需预先读取或填充文件中的行。由于 sqlite 数据文件是二进制的，因此您的数据文件将比 CSV 文本小 1/3 到 1/2。

您可以使用[THIS](https://gist.github.com/2838964)之类的脚本来导入 CSV 文件，或者更好的是，首先将数据写入数据库表。[SQLITE3](http://docs.python.org/library/sqlite3.html)是 Python 发行版的一部分。

然后使用这些语句获取 1,000,000 个随机行：

```
mydb='csv.db'
con=sqlite3.connect(mydb)

with con:
    cur=con.cursor()
    cur.execute("SELECT * FROM csv ORDER BY RANDOM() LIMIT 1000000;")

    for row in cur.fetchall():
        # now you have random rows... 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-30T16:45:52.643

你可以用固定长度的记录重写文件，然后对中间文件进行随机访问：

```
ifile = file.open("inputfile.csv")
ofile = file.open("intermediatefile.csv",'w')
for line in ifile:
    ofile.write(line.rstrip('\n').ljust(15)+'\n') 
```

然后，你可以这样做：

```
import random
ifile = file.open("intermediatefile.csv")
lines = []
samples = random.sample(range(nlines))
for sample in samples:
    ifile.seek(sample)
    lines.append(ifile.readline()) 
```

需要更多的磁盘空间，并且第一个程序可能需要一些时间才能运行，但它允许以后无限制地随机访问第二个程序的记录。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-30T17:38:30.367

```
# pass 1, count the number of rows in the file
rowcount = sum(1 for line in file)
# pass 2, select random lines
file.seek(0)
remaining = 1000000
for row in csv.reader(file):
    if random.randrange(rowcount) < remaining:
        print row
        remaining -= 1
    rowcount -= 1 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-09-14T12:05:58.283

在这种方法中，我们生成一个随机数集，其元素数等于要读取的行数，其范围是数据中存在的行数。然后从最小到最大排序并存储。

然后逐行读取 csv 文件，并用 a`line_counter`表示行号。然后`line_counter`使用排序的随机数列表的第一个元素进行检查，如果它们相同，则将该特定行写入新的 csv 文件，并从列表中删除第一个元素，之前的第二个元素代替第一个元素并且循环继续。

```
import random
k=random.sample(xrange(No_of_rows_in_data),No_of_lines_to_be_read)
Num=sorted(k)    
line_counter = 0

with open(input_file,'rb') as file_handle:
    reader = csv.reader(file_handle)
    with open(output_file,'wb') as outfile:
            a=csv.writer(outfile)
            for line in reader:
                line_counter += 1
                if line_counter == Num[0]:
                a.writerow(line)
                Num.remove(Num[0])
                if len(Num)==0:
                break 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-05-06T09:49:18.203

如果您可以使用[`pandas`](https://pandas.pydata.org/pandas-docs/stable/index.html)and [`numpy`](https://numpy.org/doc/stable/index.html)，我[在另一个](https://stackoverflow.com/a/61631765/1273938)`pandas`具体但非常有效的问题中发布了一个解决方案：

```
import pandas as pd
import numpy as np

filename = "data.csv"
sample_size = 1000000
batch_size = 5000

rng = np.random.default_rng()

sample_reader = pd.read_csv(filename, dtype=str, chunksize=batch_size)

sample = sample_reader.get_chunk(sample_size)

for chunk in sample_reader:
    chunk.index = rng.integers(sample_size, size=len(chunk))
    sample.loc[chunk.index] = chunk 
```

更多详情，[请查看其他答案](https://stackoverflow.com/a/61631765/1273938)。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-22T04:01:33.477

```
def random_line(path, hint=1):
    with open(path, mode='rb') as file:
        import random
        while file.seek(random.randrange(file.seek(-2, 2))) and not file.readline(hint).endswith(b'\n'):
            pass
        return file.readline().decode().strip() 
```

这是我为从一个非常大的文件中读取随机行而写的。

时间复杂度为 O(k) ，k 是文本文件中行的平均长度。

提示参数是文本文件中行的最小长度，如果您事先知道，使用它来加速函数。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-07-16T20:30:25.167

总是为我工作

```
import csv
import random
randomINT = random.sample(range(1, 72655), 40000)
with open(file.csv,"rU") as fp:
    reader = csv.reader(fp, delimiter=",", quotechar='"', dialect=csv.excel_tab)
    data_read = [row for idx, row in enumerate(reader) if idx in randomINT]
    for idx, line in enumerate(data_read):
        pass 
```

# php - 为什么 preg_replace 用 /(.*)/ 重复部分字符串？

> ID：10819912
> 
> 赞同：14
> 
> 时间：2012-05-30T15:56:59.627
> 
> 标签：php, regex, preg-replace

为什么下面的代码：

```
<?php echo preg_replace("/(.*)/", "$1.def", "abc"); 
```

输出`abc.def.def`而不是`abc.def`？

我有兴趣了解为什么会发生重复。

使用`/(.+)/`或`/^(.*)$/`按预期工作，但我不是在寻找解决方案，只是问一个问题（尽管这些模式可能与答案有关）。

[在这里](http://codepad.org/DbVBGgx9)修补一个现场版本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T16:07:27.077

因为`.*`匹配字符串末尾的空子字符串。这意味着字符串有两个匹配项`abc`：

1.  整个字符串`abc`→`abc.def`
2.  空字符串 →`.def`

这给出了`abc.def.def`.

* * *

**编辑：**它发生的细节在*[String.replaceAll() 异常中用 regex 中的贪婪量词进行了](https://stackoverflow.com/questions/8604286/java-regex-anomaly)*解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-30T16:09:34.003

这是预期的行为：[https ://bugs.php.net/bug.php?id=53855](https://bugs.php.net/bug.php?id=53855)

> 这是预期的行为，并不是 PHP 特有的。* 量词允许在主题字符串的末尾出现“空”匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T16:14:20.640

如果你让你的正则表达式不贪婪，`/(.*?)/`你可以看到整个重复过程在更大/明显的范围内工作：

```
.defa.defb.defc.def 
```

您得到四个匹配项：a、b、c `empty`、. 然而，正如其他人提到的那样，使用贪婪的正则表达式，您会得到 2 个匹配项、完整字符串和一个空字符串。

# asp.net - ASP.NET 母版页 CSS 背景图像边框

> ID：10819913
> 
> 赞同：0
> 
> 时间：2012-05-30T15:57:15.237
> 
> 标签：asp.net, vb.net, visual-studio, master-pages

对于我的母版页，我在 HTML DIV 上嵌入了一个图像。背景图像确实出现了，但我的图像周围有 4 个类似白色的边框，我没有应用任何东西。

```
<head runat="server">
    <title>Untitled Page</title>
    <asp:ContentPlaceHolder id="head" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="form1" runat="server" >

    <div style="border-width: thin; border-style: inset; padding: 0px; margin: 0px; top: 89px; left: 169px; position: absolute; height: 570px; width: 777px; background-color: #FFFFFF; z-index: auto;">
        <asp:ContentPlaceHolder id="ContentPlaceHolder1" runat="server">

        </asp:ContentPlaceHolder>
    </div>
    <div style="height: 757px; background-image: url('<%= imgPath %>'); background-repeat: repeat-x; background-attachment: fixed; position: static;">
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:26:38.740

尝试这个：

```
<body style="border: 0px none; margin: 0px 0px 0px 0px; padding: 0px 0px 0px 0px;"> 
```

# jquery - jquery在Firefox中使用缓动功能为背景位置设置动画

> ID：10819924
> 
> 赞同：0
> 
> 时间：2012-05-30T15:57:54.677
> 
> 标签：jquery, firefox, jquery-animate, background-position

我有 Firefox 的动画问题。问题的第二个答案[jquery animate background-position firefox](https://stackoverflow.com/questions/5518834/jquery-animate-background-position-firefox/6280048)正在解决它，但仅适用于狭窄的动画。我想像这样在每个轴上应用缓动（在 IE 和 Chrome 中工作）：

```
$j("#labyrinth").animate({
    'background-position-x': [position.x - 350, 'sin'],
    'background-position-y': [position.y + 350, 'cos']
}, speed); 
```

sin 和 cos 在这里定义：

```
$j.easing.sin = function(p, n, firstNum, diff) {
    return Math.sin(p * Math.PI / 2) * diff + firstNum;
};
$j.easing.cos = function(p, n, firstNum, diff) {
    return firstNum + diff - Math.cos(p * Math.PI / 2) * diff;
}; 
```

对于 Firefox，我需要致电

```
 $j("#labyrinth").animate({
    backgroundPosition: (position.x + 350) + ' ' + (position.y + 350)
}, speed); 
```

但后来我失去了缓动功能。所以，我的问题是，我怎样才能让它在 FF 中工作，每个轴都有缓动功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:48:12.370

我已经破解了它。它适用于 sin 和 cos 函数，但您也可以添加自己的函数。动画是这样调用的：

```
if ($.browser;.mozilla) {
    $("#labyrinth").animate({
        backgroundPosition: (position.x + 350) + ' ' + (position.y + 350) + ' sin cos'
    }, 3000);
} 
```

并且也将考虑缓动的动画代码是：

```
(function($) {
var oldAnim = $.fn.animate;
$.fn.animate = function(prop){
    if('background-position' in prop){
        prop.backgroundPosition = prop['background-position'];
        delete prop['background-position'];
    }
    if('backgroundPosition' in prop){
        prop.backgroundPosition = '('+ prop.backgroundPosition + ')';
    }
    return oldAnim.apply(this, arguments);
};

function toArray(strg){
    var easingX = strg.split(' ')[2];
    var easingY = strg.split(' ')[3];

    strg = strg.replace(/left|top/g,'0px');
    strg = strg.replace(/right|bottom/g,'100%');
    strg = strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");
    var res = strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);

    var result = [];
    if (easingX === undefined && easingY === undefined) {
        result = [parseFloat(res[1],10), res[2], parseFloat(res[3],10), res[4]];
        return result;
    }

    result = [parseFloat(res[1],10), res[2], parseFloat(res[3],10), res[4], easingX, easingY.replace(')', '')];
    return result;
}

// easing functions I need
function sin(p) {
    return Math.sin(p * Math.PI / 2);
}
function cos(p) {
    return 1 - Math.cos(p * Math.PI / 2);
}

$.fx.step.backgroundPosition = function(fx) {
    if (!fx.bgPosReady) {
        var start = $.curCSS(fx.elem,'backgroundPosition');

        start = toArray(start);
        fx.start = [start[0],start[2]];

        var end = toArray(fx.end);
        fx.end = [end[0],end[2]];

        // those easings are in fx.end
        fx.easingX = end[4];
        fx.easingY = end[5];

        fx.unit = [end[1],end[3]];
        fx.bgPosReady = true;
    }

    var posX = fx.pos;
    var posY = fx.pos;

    if (fx.easingX !== undefined && fx.easingY !== undefined) {
        if (fx.easingX === 'sin') {
            posX = sin(fx.pos);
        } else if (fx.easingX === 'cos') {
            posX = cos(fx.pos);
        }
        if (fx.easingY === 'sin') {
            posY = sin(fx.pos);
        } else if (fx.easingY === 'cos') {
            posY = cos(fx.pos);
        }
    }

    var x = ((fx.end[0] - fx.start[0]) * posX) + fx.start[0] + fx.unit[0];
    var y = ((fx.end[1] - fx.start[1]) * posY) + fx.start[1] + fx.unit[1];

    fx.elem.style.backgroundPosition = x +' '+ y;
};
})(jQuery); 
```

我刚刚破解了一点，感谢用户[h​​ttps://stackoverflow.com/users/244749/magiconair](https://stackoverflow.com/users/244749/magiconair)

# asp.net - 更改 (Web)ConfigurationManager 使用的当前配置

> ID：10819926
> 
> 赞同：0
> 
> 时间：2012-05-30T15:58:03.270
> 
> 标签：asp.net, configurationmanager

我正在使用`WebConfigurationManager.OpenMappedWebConfiguration`加载自定义配置文件并将其与 main `web.config`. 我可以使用结果`Configuration`来配置我自己的框架，并受益于拥有一个干净的自定义配置文件和一个标准`web.config`，并在运行时使用合并的视图。

问题是现在我想告诉 ASP.NET 使用该`Configuration`实例作为默认值，以便`WebConfigurationManager.GetSection("mySection")`返回在我加载的配置文件中定义的部分。

有没有办法通过“标准”实践来做到这一点？（任何涉及`X(ml)Document`或反射来获取私有方法的事情都是不可接受的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:35:52.883

GetSection () 方法的[这种](http://msdn.microsoft.com/en-us/library/ms151435.aspx)重载会满足您的需求吗？它允许您指定要从中加载数据的 web.config 文件的路径，如下所示：

```
WebConfigurationManager.GetSection("connectionStrings", "/configTest") 
```

# css - 在 DIV 内垂直和水平居中图像，浮动：左？

> ID：10819931
> 
> 赞同：5
> 
> 时间：2012-05-30T15:58:22.290
> 
> 标签：css, html, center

我需要一个可行的解决方案来完成将具有不同尺寸的图像居中的琐碎任务，当 float:left 用于将图像放置在行中时，将其置于方形 div 中。我在 div 内使用 div 来做到这一点：

```
 .outer-element{ //wrap tile div
     display:table-cell;
     width:300px;height:300px;
     text-align:center ;
     vertical-align:middle ;
     float:left;
     margin-bottom:15px;
 }
 .inner-element{ //div with image inside
     display:inline-block;
 } 
```

但是我必须使用使用 float:left 来将图像放入行中，当我这样做时，图像没有垂直居中（它们与 div 的顶部边框对齐）我尝试了一些其他 CSS 代码，但*float:left*总是制作图像不垂直居中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-30T17:56:52.383

`float:left;`从您的删除，`.outer-element`因为它与表格单元格显示内容的方式冲突。如果您需要将容器向左浮动，请将其放置`.outer-element`在另一个向左浮动的容器中。

**HTML**

```
<div class="fl">
    <div class="outer-element">
        <div class="inner-element">
            <img src="http://thecybershadow.net/misc/stackoverflow.png" />
        </div>
    </div>
</div> 
```

**CSS**

```
.fl {float:left;}
.outer-element{
    display:table-cell;
    width:300px;
    height:300px;
    vertical-align:middle;
    background:#666;
    text-align:center;
    margin-bottom:15px;
}
.inner-element{
    display:inline-block;
} 
```

**示例：http :** [//jsfiddle.net/xQEBH/17/](http://jsfiddle.net/xQEBH/17/)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T17:42:48.843

试试这样[http://jsfiddle.net/aEfwC/](http://jsfiddle.net/aEfwC/)

```
<div align="center">
    <div class="outer-element">
    <div class="image"></div>
</div>   
</div>

.outer-element
{
     width:300px;height:300px;
     float:left;
     background-color:#2a2a2a;
    position:relative;
 }
.image
{
width:128px;
height:128px;
background:url(http://thecybershadow.net/misc/stackoverflow.png);
vertical-align:middle; 
background-repeat:no-repeat;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-10T04:56:33.617

你的CSS...

```
.outer-element{ //wrap tile div
     display:table-cell;
     width:300px;height:300px;
     text-align:center ;
     vertical-align:middle ;
     float:left;
     margin-bottom:15px;
 }
.inner-element{ //div with image inside
     display:inline-block;
 } 
```

只需添加以下内容，您希望您的元素向左浮动...

```
.outer-element:before{content: "."; height: 0; overflow: hidden; visibility: hidden; float: left;} 
```

希望这可以帮助....

# objective-c - UIText 在开始时是打开键盘吗？

> ID：10819932
> 
> 赞同：0
> 
> 时间：2012-05-30T15:58:27.237
> 
> 标签：objective-c

我正在使用文本字段的代码，它工作正常（也可以使用 cocos2d），但我不明白为什么我启动应用程序时键盘是打开的？我希望它是这样的：

*   当您打开应用程序时，您会看到一个矩形 - 这是文本字段（我不知道如何放置该矩形？？）并且只有当您触摸它时，它才会打开键盘并且您可以输入。

这样做的任何帮助都会很棒。

我的代码：（ `setText`被调用`init`）

```
-(void)setText
{

    myText = [[UITextField alloc] initWithFrame:CGRectMake(100, 120, 200, 90)];
    myText.transform = CGAffineTransformMakeRotation( M_PI / 2.0 );
    [myText setDelegate:self];
    [myText setText:@"yes"];
    [myText setTextColor: [UIColor colorWithRed:0 green:0 blue:0 alpha:1.0]];
    [[[[CCDirector sharedDirector] openGLView] window] addSubview:myText];
    [myText becomeFirstResponder];
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [myText resignFirstResponder];
    return YES;
}

-(void)textFieldDidEndEditing: (UITextField *)textField {
    if(textField == myText) 
    {
        [myText endEditing:YES];
        [myText removeFromSuperview];
        NSString *result = myText.text;
        NSLog(@"%@",result);
    } 
    else
    {
        NSLog(@"textField did not match myText");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:18:15.793

因为你把这个：

```
 [myText becomeFirstResponder] 
```

把它拿出来，当你的应用程序加载时它不应该带键盘。

# linq - LINQ 查询以根据计算值的范围进行分组

> ID：10819934
> 
> 赞同：0
> 
> 时间：2012-05-30T15:58:32.210
> 
> 标签：linq, grouping, range

我有一个 sql 查询，用于将测量值分布到多个 Bins 中：

```
SELECT FLOOR(Value / @Step) * @Step AS Bin,        
       COUNT(*) AS Cnt FROM Measurements WHERE (StepId = @StepId) 
       GROUP BY Bin ORDER BY Bin 
```

其中 Value = 基于 StepId（测量表中的主键）返回的测量值 Step = 实际上是组数（分布中的 Bins）。

如何`LINQ`根据动态创建的值范围使用和创建分组。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:25:48.330

我想这就是你所追求的：

```
double step = 100;
var stepId = 1;

from m in context.Measurements 
where m.StepId == stepId;
let bin = (Math.Floor(c.Value / step)) * step
orderby bin
group m by bin into x
select new { x.Key, Count = x.Count() } 
```

您甚至可以省略 Floor 函数，因为整数上的“/”运算符在 SQL 中具有相同的功能。

# iphone - 一款 iPhone 应用程序，根据下载的 URL 使用不同的模板

> ID：10819943
> 
> 赞同：1
> 
> 时间：2012-05-30T15:59:07.207
> 
> 标签：iphone, distribution, tracking

我想将我的 iPhone 应用程序提供给不同的分销商进行分发。

当用户从其中一个分销商处下载应用程序并打开它时，该应用程序应连接到我们的服务器并询问该分销商的独特设置。

问题是，每个应用程序如何“分辨”它是从哪个发行商下载的？

我不想为每个客户端编译不同的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T16:30:28.327

你想要一个应用程序还是 iOS WebApp？如果你想要 iOS 应用，我不认为你可以分发给其他分销商，因为苹果是 iOS 应用的唯一分销商，所以所有的下载都来自那里。

如果您想要一个 WebApp，您可以创建一个重定向到您的 WebApp 的下载链接，以读取指向服务器的链接，它会提取您需要的所有内容、布局、信息等......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:23:20.707

我对此进行了一些研究，我发现这样做的唯一方法就是为每个应用程序创建不同的目标，然后在两个应用程序之间共享源代码，但这仍然意味着您仍然需要进行两次提交。

# google-chrome - 在 Chrome 19 中将 HTML5 Canvas 保存为 PNG

> ID：10819945
> 
> 赞同：1
> 
> 时间：2012-05-30T15:59:10.087
> 
> 标签：google-chrome, html5-canvas

我正在尝试实现将 HTML5 画布的内容保存为 PNG 的功能，但它在 Chrome 19 上失败了。我正在使用类似于此的解决方案：http: [//www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

如果您在 Chrome 19 上进行测试，则会出现以下错误：资源解释为文档但使用 MIME 类型图像/八位字节流传输：“数据：图像/八位字节-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:43:34.890

Chrome 19 似乎不允许通过 DATA URI 提供的图像“另存为”。在 Canary 上测试，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T23:14:05.273

如果没有其他人回答，请将八位字节流发送到服务器端 PHP 处理并`<iframe>`使用这些标头附加一个不可见的

```
 header("Content-Disposition: attachment; filename=image".time().".png");
 header("Content-Type: image/png");
 header("Content-Transfer-Encoding: binary"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T20:38:30.640

它只是在 Chrome 19 上无法在客户端运行，我已经尝试了所有方法。我用 PHP 编写了一个简单的服务器端解决方案，您可以看到它是如何完成的：[https ://github.com/coolboke1324/FontSheetGenerator/blob/master/saver/savePng.php](https://github.com/coolbloke1324/FontSheetGenerator/blob/master/saver/savePng.php)

该文件期望从表单中发布数据，并且将有两个变量：

**imageFileName** - 包含扩展名的文件名，例如“hello.png”。文件名转换为小写，所有空格都转换为下划线 - 如果您愿意，可以在脚本中轻松更改此行为。

**formImageData** - 调用 canvas.toDataURL("image/png") 的结果；

所以你的 HTML 表单可能看起来像这样：

```
<form action="saver/savePng.php" method="post">
    <input type="hidden" id="formImageFileName" name="imageFileName">
    <input type="hidden" id="formImageData" name="imageData" value="" />
    <input type="submit" class="btn btn-primary" id="saveImageButton" value="Save Image..." />
</form> 
```

您可能希望在提交表单之前将元素“formImageData”的值更新为来自 toDataUrl() 调用的数据。

# delphi - 如何在 Delphi 中使用 DropBox REST API 复制文件

> ID：10819948
> 
> 赞同：22
> 
> 时间：2012-05-30T15:59:14.500
> 
> 标签：delphi, oauth, indy, dropbox-api

我似乎没有管理使用 dropbox api 操作的文件复制。我可以成功授权我的客户端，下载和上传文件。复制操作需要使用 POST 方法，我认为这是我产生错误请求的地方。我正在为 OAuth 身份验证定义 POST 方法并使用 Indy TIdHTTP 发布请求，但我总是收到错误代码 403 - Permission denied。

这是保管箱 api 描述：[https ://www.dropbox.com/developers/reference/api#fileops-copy](https://www.dropbox.com/developers/reference/api#fileops-copy)

这是我的代码的一部分：

```
 ParamStr := Format('root=%s&from_path=%s&to_path=%s', [Root, EncodeFileName(FromPath), EncodeFileName(ToPath)]);
 URL := 'https://api.dropbox.com/1/fileops/copy' + '?' + ParamStr;

 Consumer := TOAuthConsumer.Create(Key, Secret);
 AToken := TOAuthToken.Create(fToken, fTokenSecret);
 HMAC := TOAuthSignatureMethod_HMAC_SHA1.Create;
 ARequest := TOAuthRequest.Create('');
 try
  ARequest.HTTPURL := URL;
  ARequest.Method := 'POST';
  ARequest := ARequest.FromConsumerAndToken(Consumer, AToken, '');
  ARequest.Sign_Request(HMAC, Consumer, AToken);

  Params := TStringList.Create;
  try
   Params.Text := ParamStr + '&' + ARequest.GetString;
   HTTP.Post(URL, Params);
  finally
   Params.Free;
  end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-20T12:49:39.360

我想我可能会发现这里出了什么问题。我不知道 TOAuthRequest 类，但我猜 GetString 方法提供了标准 OAuth 标头“授权承载 {KEY}”。看到那是标头，将它添加到 http 请求的正确方法是

```
HTTP.Request.CustomHeaders.AddValue('Authorization', <the rest of the string here>) 
```

另一方面，您将该字符串添加到可能适用于 Get 请求的正文中，因为正文（授权字符串）被误认为是标头，但是使用 POST 方法，您在授权字符串之前有实际正文，因此 OAuth 字符串被忽略.

最后，我认为您也不需要正文中的参数字符串。一个空的身体应该工作得很好。查询字符串似乎没问题。

示例代码：

```
 ParamStr := Format('root=%s&from_path=%s&to_path=%s', [Root, EncodeFileName(FromPath), EncodeFileName(ToPath)]);
 URL := 'https://api.dropbox.com/1/fileops/copy' + '?' + ParamStr;

 Consumer := TOAuthConsumer.Create(Key, Secret);
 AToken := TOAuthToken.Create(fToken, fTokenSecret);
 HMAC := TOAuthSignatureMethod_HMAC_SHA1.Create;
 ARequest := TOAuthRequest.Create('');
 try
  ARequest.HTTPURL := URL;
  ARequest.Method := 'POST';
  ARequest := ARequest.FromConsumerAndToken(Consumer, AToken, '');
  ARequest.Sign_Request(HMAC, Consumer, AToken);

  HTTP.Request.CustomHeaders.AddValue('Authorization', <parsed ARequest.GetString>)
  HTTP.Post(URL); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T03:22:49.820

据我所知，在使用 indy 时，参数被复制到消息正文中，而不是在 url 中尝试使用类似的东西：

```
http:Post(URL+encodeparams(params)); 
```

我不确定这是正确的语法，但这就是想法。

# c# - 函数返回类型 A，使其成为 B 类型（从 A 继承）

> ID：10819949
> 
> 赞同：1
> 
> 时间：2012-05-30T15:59:16.530
> 
> 标签：c#, inheritance, exchangewebservices

我正在使用 Microsoft Exchange Web 服务 (EWS) 托管 API 1.2 使用 C3 从 Exchange 邮箱访问数据。返回的对象的某些属性很难访问，因为它们是自定义属性。

为了简化对这些属性的访问，我（作为一个例子）编写了一个名为 Contact2 的类，它扩展了 EWS 提供给我的 Contact 类。

调用返回 Contact 对象的函数时，如何将其“升级”为 Contact2？

这是我写的 Contact2 类：

```
namespace ExchangeContacts
{
    class Contact2 : Microsoft.Exchange.WebServices.Data.Contact
    {

        public ExchangeService ex = new ExchangeService();
        public Dictionary<string, ExtendedPropertyDefinition> propDefs = new Dictionary<string, ExtendedPropertyDefinition>();
        public PropertySet myPropSet = new PropertySet();

        public Contact2(ExchangeService service)
            : base(service)
        {
            propDefs.Add("MarketingGuid", new ExtendedPropertyDefinition(new Guid("3694fe54-daf0-49bf-9e37-734cfb8521e1"), "MarketingGuid", MapiPropertyType.String));
            myPropSet = new PropertySet(BasePropertySet.FirstClassProperties) { propDefs["MarketingGuid"] };
            ex = service;
        }

        new public void Load()
        {
            base.Load(myPropSet);
        }

        new public void Load(PropertySet propertySet)
        {
            propertySet.Add(propDefs["MarketingGuid"]);
            base.Load(propertySet);
        }

        public string MarketingGuid
        {
            get
            {
                string g;
                if (TryGetProperty(propDefs["MarketingGuid"], out g))
                    return g;
                else
                    return "";
            }
            set
            {
                SetExtendedProperty(propDefs["MarketingGuid"], value);
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T16:02:29.667

您需要在接受 Contact 对象的 Contact2 中定义显式静态方法或构造函数。IE

```
public static Contact2 FromContact(Contact cnt)
{
    return new Contact2(cnt.x, cnt.y, ...)
} 
```

如果你真的想要，你可以定义一个隐式或显式转换。通常不鼓励这样做，因为它会引起混淆，因此在执行此操作之前请阅读显式和隐式转换。我不会告诉你它是如何完成的：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T16:02:52.493

您不能神奇地将现有`Contact`实例转换为另一个类，即使该其他类继承了`Contact`.

您需要修改创建 的代码`Contact`来创建 a `Contact2`，或者编写自己的函数来创建`Contact2`包装现有`Contact`实例的 a 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:04:41.587

您可以为 Contact 添加运算符重载，然后您将不需要静态方法或至少必须将它们公开..

这有点难以完全正确...请参阅[我如何覆盖基类的 == 运算符，因此调用了覆盖](https://stackoverflow.com/questions/3121652/how-can-i-override-a-base-classs-operator-so-the-override-gets-called)

# c++ - 如何将frontBuffer数据复制到纹理DirectX 9

> ID：10819951
> 
> 赞同：2
> 
> 时间：2012-05-30T15:59:34.070
> 
> 标签：c++, windows, video, directx, textures

我似乎找不到从通过应用程序的前端缓冲区数据获取的表面数据创建纹理的方法

这是我很确定正在工作的代码（Direct X 9，C++）

```
// capture screen
IDirect3DSurface9* pSurface;
g_pd3dDevice->CreateOffscreenPlainSurface(640, 480,
    D3DFMT_A8R8G8B8, D3DPOOL_SCRATCH, &pSurface, NULL);
g_pd3dDevice->GetFrontBufferData(0, pSurface); 
```

现在我有了我的frontBufferData，我想用它创建一个IDirect3DTexture9 对象。

这个函数 / D3DXCreateTextureFromFileInMemory / 似乎是最合乎逻辑的，但似乎没有奏效。

我很确定有办法做到这一点，很难我不确定如何。非常欢迎任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T17:06:48.517

最好使用`GetRenderTargetData()`而不是`GetFrontBufferData()`，因为前者更快。话虽如此，这并不是真正的问题。您希望将从前端缓冲区获得的数据或您当前在屏幕上观察的内容存储到纹理中。

首先，`IDirect3DTexture9`实际上`IDirect3DSurface9`是兄弟姐妹，但它们**并不**相同，即使在他们的班级层次结构中的某个时刻它们会收敛`IDirect3DResource9`（这是合乎逻辑的，因为它们是资源）。它们的优点在于它们实现了通用功能，特别是**LockRect()**和手动将数据从表面（粗略地说，只是一个 mipmap 级别表面（一堆像素）复制到纹理（其中可能由多个mipmap级别组成）。因此，您的目标是纹理对象的level0表面。

考虑到这一点，由于所有这些`CreateOffscreenPlainSurface()`都被认为是独立的，因此我们无法找到该表面可能是其子级的父纹理（作为纹理的特定 mipmap）。长话短说，如果我们不对它们都进行 LockRect 并手动复制数据，我们可以使用`StretchRect()`.

虽然它的名字可能不会泄露它的一个目的，但它会在这里帮助我们。记住我们在纹理和表面之间的比较谈话，表面有点像他们的小兄弟。好吧，如果您正确定义纹理（与表面相同），您实际上会获得自动 miplevel，您可以手动定义其中有多少。但本质上，这些层次中的每一个都是一个表面。而从 IDirect3DSurface9 到 IDirect3DTexture9 的“转换”只是填充适当的 miplevel 表面（在这种情况下应该是 level0，因为它基本上是一个屏幕截图）。

因此，将其放入粗略代码中会给我们：

```
IDirect3DTexture9* texture; // needs to be created, of course
IDirect3DSurface9* dest = NULL; // to be our level0 surface of the texture
texture->GetSurfaceLevel(0, &dest);
g_pD3DDevice->StretchRect(pSurface, NULL, dest, NULL, D3DTEXF_LINEAR); 
```

你去，一个 IDirect3DTexture9 去。先生，您要薯条吗？请注意，我在这里工作内存不足，我已经有一段时间没有接触过 DX9（放弃了 DX10）。希望能帮助到你。

# javascript - JQuery 验证代码将不允许删除输入的文本

> ID：10819954
> 
> 赞同：0
> 
> 时间：2012-05-30T15:59:41.303
> 
> 标签：javascript, jquery, validation

我从这个问题中借用了一些代码（见回复 4）：

[如何使用 jquery 阻止或限制输入字段中的特殊字符？](https://stackoverflow.com/questions/895659/how-do-i-block-or-restrict-special-characters-from-input-fields-with-jquery)

但是，在使用该代码时，尽管它会在您整齐地键入时进行验证，但它不允许您编辑您输入的任何内容。

```
$('input').bind('keypress', function (event) {
var regex = new RegExp("^[a-zA-Z0-9]+$");
var key = String.fromCharCode(!event.charCode ? event.which : event.charCode);
if (!regex.test(key)) {
   event.preventDefault();
   return false;
}}); 
```

我有点困惑，我试图通过将按键更改为 keyup 来调整它，但这只会阻止验证工作。任何指针都会被亲切地接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:25:57.600

这似乎是特定于浏览器的问题。在 Firefox 中，按键包括退格键和箭头键等元键，而 Chrome 则没有。如果你稍微调整你的逻辑以更喜欢哪个而不是 charCode （我认为无论如何都得到更好的支持）你最终会得到这个

```
$('input').bind('keypress', function(event) {
    var regex = new RegExp("^[a-zA-Z0-9]+$");
    var code = event.charCode === 0 ? event.which : event.charCode;
    var key = String.fromCharCode(code);
    if (!regex.test(key) && code !== 8) {
         // 8 is ascii code for backspace
         event.preventDefault();
         return false;
    }
}); 
```

这个小提琴还写入控制台键入时在事件中传递的键和代码。 [http://jsfiddle.net/Q2MWS/5/](http://jsfiddle.net/Q2MWS/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:07:57.937

我认为 event.preventDefault() 如果输入的字符与正则表达式不匹配，则会阻止编辑它们。检查 event.which/event.charCode 以获取其他值，例如退格、空格、小数点键等

# ruby-on-rails - 如何在 Rails 3 中使用 ajax/jquery 渲染另一个控制器的新动作

> ID：10819956
> 
> 赞同：1
> 
> 时间：2012-05-30T15:59:48.097
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, ruby-on-rails-3.1

我想知道如何在 rails 3 中使用 ajax/jquery 渲染另一个控制器的新动作。

假设我有一个客户和一个销售控制器、模型和视图，我想做的是能够使用 ajax/jquery 从客户索引视图进行新的销售。

为此，我在每个名为“新销售”的客户旁边都有一个按钮，当单击它时，它应该呈现表单以为该客户进行新销售。

我在想的是，它可以通过从销售控制器渲染 new_sale 表单或渲染在客户视图文件夹中创建的新销售表单并在客户控制器内创建一个新操作来创建一个新销售来完成，尽管我不确定如果可以的话。

无论如何，我想知道如何呈现新的销售表格，有什么想法吗？

先感谢您。

****编辑**** 这是我的代码：**

 **```
#clients index.html.erb
#I couldnt make work the link like you suggested so i did it like this
<%= link_to "Venta", { :controller => "sales", remote: true, :action => "new", :cliente_id => cliente.id, :class => 'btn btn-small btn-primary', :id => 'btn-venta-clientes-index'} %>

#Div where i want to render the new sale form
<div id="test" class="modal-body"></div>

#new.js.erb inside sales views folder, i tried with the 3 of them one at a time but none work
#$("div#test").html("<%= escape_javascript(j render :partial => "form") %>"); 
#$('div#test').html('<%= escape_javascript(render("form")) %>');
$('div#test').html('<%= j render :partial => "form" %>');

#Sales controller
#I tried removing all formats from the new action but didnt work
def new
  @sale = Sale.new
  @cliente = Cliente.find(params[:cliente_id])

  respond_to do |format|
    #format.html # new.html.erb
    #format.json { render json: @sale }
format.js
  end
end

#I tried removing all formats from the create action but didnt work
def create 
  @sale = Sale.new(params[:sale])

  respond_to do |format|
    if @sale.save
     #format.html { redirect_to @sale, notice: 'Sale was successfully created.' }
     #format.json { render json: @sale, status: :created, location: @sale }
 format.js  { render action: "create" }
    else
     #format.html { render action: "new" }
     #format.json { render json: @sale.errors, status: :unprocessable_entity }
 format.js  { render action: "new" }
    end
  end
end 
```

你知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:25:59.410

我用我制定的解决方案大致勾勒了您的情况​​。也许有些事情不是最佳的，有些事情是错误的，但我希望您能比文字更好地理解总体思路：

```
#clients/index.haml
= render @clients

#clients/_client.haml
.client-container
  %p= client.name 
  ...
  .form-container{ :id => "client-#{client.id}" }
    = link_to "New sale", new_sale_path(:client_id => client.id), :remote => true

#SalesController
def new
  @sale = Sale.new
  @client = Client.find(params[:client_id])
end

#sales/new.js.erb
$("#client-<%= @client.id %>").html("<%= j render :partial => "form" %>");

#sales/_form.haml
#your form code

#SalesController
def create
  @sale = Sale.new(params[:sale])
  if @sale.save
    format.js { render action: "create"}
  else
    format.js { render action: "new" }
  end
end

#sales/create.js.erb
#Here you hide a form and write something like "success".
#You can return "new sale" button (if you decide to remove it.) 
```

此外，ajax 回调在这种情况下非常有用。例如：

```
$('.your-remote-button').bind 'ajax:success', ->
  $(this).closest('div').fadeOut() 
```**

# r - 诊断 R 包构建警告：“创建 PDF 版本时出现 LaTeX 错误”

> ID：10819959
> 
> 赞同：65
> 
> 时间：2012-05-30T16:00:09.540
> 
> 标签：r, error-handling, package

在构建包时，我收到以下警告：

```
* checking PDF version of manual ... WARNING
LaTeX errors when creating PDF version.
This typically indicates Rd problems. 
```

我什至不知道如何开始诊断。是否有工具可以告诉我问题出在哪个 .Rd 文件中？

在检查文档步骤中，我没有收到任何关于我的任何 Rd 文件的警告......

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-05-30T16:13:24.510

尝试`R CMD Rd2pdf mypackage`创建手册，并可能还设置`--no-clean`保留临时文件的选项。这应该允许您调试触发错误的 LaTeX 代码。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-03-26T11:19:48.920

尽管@Dirk 的回答也帮助我解决了这个问题，但我想补充一点，这可能对最近的更新者特别有帮助。也就是更新到 3.1.3 之后还没有遇到过其他 LaTeX/R 麻烦的人。这个问题比建筑更普遍。`R CMD Rd2pdf`对我来说，在 OS X 上，问题在于`R CMD CHECK`它在. 符号链接有助于解决问题。在终端类型上：`texi2dvi``/usr/local/bin``/usr/bin`

```
# to check whether the same issue exists for you
which texi2dvi
# if so
cd /usr/local/bin
ln -s /usr/bin/texi2dvi 
```

当然，如果第一行返回其他内容，则需要在此处调整符号链接。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-06-11T19:03:49.357

从评论和我自己的经验中得出结论，问题通常似乎是缺少一些 TeX 字体，最常见的是

*   `inconsolata.sty`和
*   `upquote.sty`

首先，您必须找到存储 TeX 字体的正确目录 - 在我的例子中是：

```
C:\Program Files\R\R-3.3.0\share\texmf\tex\latex 
```

然后你可以在这里下载它们：

*   [https://www.ctan.org/tex-archive/fonts/inconsolata/?lang=en](https://www.ctan.org/tex-archive/fonts/inconsolata/?lang=en)
*   [https://www.ctan.org/tex-archive/macros/latex/contrib/upquote?lang=en](https://www.ctan.org/tex-archive/macros/latex/contrib/upquote?lang=en)

只需将它们复制到相应的文件夹中，在许多情况下问题就会得到解决（在我的情况下也是如此）。这应该适用于所有操作系统。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-23T22:07:40.133

...另一个原因是你**还没有安装**MikTex。

1.  [从这里](https://miktex.org/download)下载 MikTex并按照对话框提示进行安装。我发现默认设置是合理的，并且对我来说效果很好。

2.  尝试再次构建您的 R 包。现在应该可以了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-08T16:30:42.520

如果您在 Ubuntu 上，只需通过以下命令安装 Tex Live： `apt-get install texlive`如果使用它，请重新启动 Rstudo。

# ubuntu-12.04 - /usr/bin/ld：从 ubuntu 11.10 升级到 12.04 后找不到 -lGL

> ID：10819960
> 
> 赞同：3
> 
> 时间：2012-05-30T16:00:10.043
> 
> 标签：ubuntu-12.04

我已经从 ubuntu 11.10 升级到 ubuntu 12.04。之后，我尝试编译android源代码。

但这是我得到的错误：

```
/usr/bin/ld: cannot find -lGL
collect2: ld returned 1 exit status
make: *** [out/host/linux-x86/obj/EXECUTABLES/triangleCM_intermediates/triangleCM] Error 1
make: *** Waiting for unfinished jobs....
host Executable: triangleV2 (out/host/linux-x86/obj/EXECUTABLES/triangleV2_intermediates/triangleV2)
/usr/bin/ld: cannot find -lGL
collect2: ld returned 1 exit status
make: *** [out/host/linux-x86/obj/EXECUTABLES/triangleV2_intermediates/triangleV2] Error 1
true 
```

你能告诉我我需要安装哪个库来解析'-lGL'吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:12:55.857

在[packages.ubuntu.com 上搜索“libGL.so”](http://packages.ubuntu.com/search?searchon=contents&keywords=libGL.so&mode=exactfilename&suite=precise&arch=any)会显示您可能需要安装哪些包。你用的是nvidia驱动吗？如果是这样，您可能需要安装受限的 nvidia 驱动程序才能取回库。

# mysql - 需要 mySQL 特殊查询

> ID：10819962
> 
> 赞同：1
> 
> 时间：2012-05-30T16:00:13.230
> 
> 标签：mysql, unique

在以下情况下，我需要一些帮助：

非常简化的表格`users_log`

```
+-----------------+-------------------+
| id | account_nr |    email          |
+-----------------+-------------------+
| 1  | 0000001    |  cust1_@mail.com  |
| 2  | 0000001    |  cust1_@mail.com  |
| 3  | 0000002    |  cust2_@mail.com  |
| 4  | 0000003    |  cust3_@mail.com  |
| 5  | 0000002    |  cust2_@mail.com  |
| 6  | 0000001    |cust1_new@mail.com |
+-----------------+-------------------+ 
```

1.  允许客户在此表中出现多次。
2.  客户可以随着时间的推移更改他们的电子邮件地址，旧条目不会更新。

如您所见，帐户“0000001”出现了 3 次，并且在某个时候更改了他的电子邮件地址。

**我需要一个只返回从未更改过电子邮件地址的客户的结果的查询。此外，我需要所有单个条目，所以没有分组。**

因此，客户“0000002”和“0000003”的所有条目都将是上述示例中查询的预期结果。

我想出了一种在脚本语言中使用多重循环的方法，但想知道是否有更有效的查询可以使用，从而减少数据库负载？这是一个非常大的数据库，我需要尽可能快的查询 - 提前谢谢您！

PS：数据库结构是这样的，我没有办法改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:05:05.190

```
CREATE TABLE users_log (ID INT, account_nr VARCHAR(1000), email VARCHAR(1000))

INSERT INTO users_log VALUES (1,'0000001','cust1_@mail.com');
INSERT INTO users_log VALUES (2,'0000001','cust1_@mail.com');
INSERT INTO users_log VALUES (3,'0000002','cust2_@mail.com');
INSERT INTO users_log VALUES (4,'0000003','cust3_@mail.com');
INSERT INTO users_log VALUES (5,'0000002','cust2_@mail.com');
INSERT INTO users_log VALUES (6,'0000001','cust1_new@mail.com');

SELECT account_nr
     , email
  FROM users_log a
 WHERE NOT EXISTS
       (SELECT *
          FROM users_log b
         WHERE a.email      != b.email
           AND a.account_nr = b.account_nr) 
```

结果：

```
 ACCOUNT_NR  EMAIL
1   0000002     cust2_@mail.com
2   0000002     cust2_@mail.com
3   0000003     cust3_@mail.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T16:29:42.333

这是一个使用 JOIN 而不是子查询的解决方案，它通常执行得更好，因为 JOIN 可以利用索引，而派生的临时表不能。

```
SELECT ul1.account_nr, ul1.email
FROM users_log ul1
LEFT JOIN users_log ul2
  ON ul2.account_nr = ul1.account_nr
  AND ul2.email <> ul1.email
WHERE ul2.account_nr IS NULL 
```

# javascript - TinyMCE 工具栏位置

> ID：10819966
> 
> 赞同：3
> 
> 时间：2012-05-30T16:00:36.847
> 
> 标签：javascript, tinymce, toolbar

工具栏如何显示在定义的地方（具有特定 id 的 div）上？

我尝试了 theme_advanced_toolbar_location : "external" 并设置了 "mceExternalToolbar" 的位置（就像这里建议的那样：[TinyMCE - external toolbar position](https://stackoverflow.com/questions/723410/tinymce-external-toolbar-position)）但不太喜欢这个解决方案，因为它使用固定定位......在哪里放置div。

该文档为 theme_advanced_toolbar_location 说：

> .. 将工具栏添加到 DIV 元素并将此 DIV 的类设置为“mceExternalToolbar”。...但如果您可以更改 div，则不会。是否有可能更改此代码？

BR，斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:04:26.507

几个月前，这对我来说一直是个问题。您需要做的就是将外部工具栏移动到您想要的位置。我在我的一个插件中编写了一个函数。在我的页面上，我创建了一个带有“externalToolbarWrapper”类的 div，我在其中插入了工具栏。这是那个功能。您可能需要稍微调整一下，但认为它会对您有所帮助。

```
 showExternalToolbar: function(){

        if (this.editor.getParam('theme_advanced_toolbar_location') != 'external') return;

        if (!document.getElementById('externalToolbarWrapper')) $(document.body).prepend('<div id="externalToolbarWrapper"></div>');

        var $toolbar = $('#'+this.editor.id + '_external');

        // inserts the external toolbar in the external wrapper
        $('#externalToolbarWrapper').append('<div id="replacementDiv"></div>');

        $('#replacementDiv').replaceWith($toolbar.show());
        $toolbar.css('top','0px');
        $toolbar.css('display','block');

        $('#' + this.editor.id + '_external_close').remove();
        $('#' + this.editor.id +'_toolbargroup').css('width', innerWidth || 800); // innerwidth is an integer value
    }, 
```

**更新：**

您应该调用它 onInit（在此处使用[setup 配置参数](http://www.tinymce.com/wiki.php/Configuration%3asetup)）

```
 setup : function(ed) {
      ed.onInit.add(function(ed) {
          // place your code here
      });
   }, 
```

# java - Java - Swing 中的 mouseMoved() 事件处理

> ID：10819967
> 
> 赞同：5
> 
> 时间：2012-05-30T16:00:50.933
> 
> 标签：java, swing, event-handling, mouseevent, mouse-listeners

我想在我的 JFrame 中监听鼠标移动和点击。为此，我添加了一个像这样实现的 MouseListener：（View 类的整个代码位于[https://gist.github.com/2837224，Board](https://gist.github.com/2837224)类位于[https://gist.github.com/2837231](https://gist.github.com/2837231)）

```
class BattleshipsFrame extends JFrame {
  private final Board playerBoard, opponentBoard;
  private View view;

/** Main window constructor. */
BattleshipsFrame() {
  ...
  ...   
  ...
  //creating and displaying boards
  playerBoard = new Board();
  opponentBoard = new Board();
  PlayerBoardListener mouseListener = new PlayerBoardListener();
  this.addMouseListener(mouseListener);
  playerBoard.addMouseListener(mouseListener);
  opponentBoard.addMouseListener(new OpponentBoardListener());
  boards.add(playerBoard);
  boards.add(opponentBoard);
  ...
  ...
  ...
}

/** Listener responsible for handling mouse events on player board */
private class PlayerBoardListener extends MouseAdapter {
  @Override public void mousePressed(MouseEvent event) {
    try {
      if(event.getButton() == MouseEvent.BUTTON1 && controllerConnection != null)
        controllerConnection.sendShipPlacedEvent(event.getX()/40, event.getY()/40, ShipType.EMPTY);
    } catch(Exception e) {
      e.printStackTrace();
    }
  }   
  @Override public void mouseMoved(MouseEvent event) {
    //TODO
    System.out.println("Mouse movement detected! Actual mouse position is: " + event.getX()+ "," + event.getY() + ".");
  }   
  @Override public void mouseDragged(MouseEvent event) {
    //TODO
    System.out.println("Mouse movement detected! Actual mouse position is: " + event.getX()+ "," + event.getY() + ".");
  }   

} 
```

有趣的是 mousePressed() 运行良好，但其他两个则没有（移动鼠标时控制台上没有显示）。谁能告诉我我做错了什么？提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-30T16:04:39.430

如果要接收`mouseMoved`和`mouseDragged`事件，还需要将侦听器注册为[`MouseMotionListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseMotionListener.html).

```
MouseAdapter adapter = ...
JFrame frame = ...
frame.addMouseListener(adapter);
frame.addMouseMotionListener(adapter); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T16:06:04.717

也许您也应该尝试实施`MouseMotionListener`and with `MouseListener`？

# silverlight - 如何使用导航服务在 Silverlight 中实现 MVVM？

> ID：10819970
> 
> 赞同：0
> 
> 时间：2012-05-30T16:00:59.213
> 
> 标签：silverlight

我即将开始我的第一个 Silverlight 项目（Silverlight 4.0），并花了一些时间研究最佳方法等。我将使用 MVVM 并花了几天时间研究导航。

首先，我注意到很多 MVVM 示例没有将 MainPage 实现为视图/视图模型。MainPage 包含导航框架和 Uri 映射，然后导航到遵循视图/视图模型的页面。使用 MVVM 和导航服务时，主页未实现为视图/视图模型是否标准？例如，Silverlight 4 培训工具包包含事件管理器示例，而主页背后有很多代码，即处理导航事件，如 Navigated 和 NavigatedFailed。但所有其他页面都是视图/视图模型。

其次，使用导航服务，更改导航的逻辑现在由视图完成，而不是由视图模型控制（这与 MVVM 背后的一些想法背道而驰）。网络上的一些方法使用从 ViewModel 到 View 的消息传递，或者将 Navigation 服务传递给 ViewModel 并在那里控制导航。这些方法中的任何一种都比另一种更好吗？

理想情况下，我想找到一个示例，其中主页遵循 View/ViewModel 并且 ViewModel 控制导航并且视图没有后面的代码。我要求太多了吗？？！

仅供参考，我没有使用 PRISM 或 MVVM Light。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:21:04.527

在我的项目中，我们在 MainPage 中创建了一个容器，每个视图都在那里加载。这样我们就不需要在代码隐藏中放置任何代码。当主页面在 App 上作为 RootVisual 启动时，MainPage 接收作为 DataContext 的类，我们在其中创建了一个 shell。容器从此类接收 DP，我们使用来自 shell 的事件来加载视图。

这是容器的代码：

```
<ContentControl Name="region1ContentControl" Content="{Binding Path=MainContent}" Style="{StaticResource ContentControlStyle}" Grid.Row="1" Margin="0,30" /> 
```

MainContent 属性：

```
public static readonly DependencyProperty MainContentProperty =
        DependencyProperty.Register("MainContent", typeof(System.Windows.Controls.Control),
        typeof(MainPagePresenter), null);
    public System.Windows.Controls.Control MainContent
    {
        get { return (System.Windows.Controls.Control)GetValue(MainContentProperty); }
        set { SetValue(MainContentProperty, value); }
    } 
```

加载视图的外壳 +

```
var presenter = (Bxf.IPresenter)Bxf.Shell.Instance;

        presenter.OnShowView += (view, region) =>
        {
            if (region.Equals("MainContent", StringComparison.InvariantCultureIgnoreCase))
                MainContent = view.ViewInstance;
            else if (region.Equals("DetailContent", StringComparison.InvariantCultureIgnoreCase))
                DetailContent = view.ViewInstance;
            else
                throw new ArgumentException(string.Format(AppStrings.InvalidRegionName, region));
        }; 
```

MainPage 代码隐藏：

```
 public partial class MainPage : UserControl
{
    public MainPage()
    {
        InitializeComponent();
    }
} 
```

你有没有看到？注意：我也没有使用 Prism 或 MVVM 灯。

# javascript - GetElementsByTagName(tag).length

> ID：10819972
> 
> 赞同：2
> 
> 时间：2012-05-30T16:01:06.517
> 
> 标签：javascript, html, dom

我试图计算`<li>`-Listing 中的`<ul>`-Elements。我希望它像这样工作：

（JavaScript）：

```
var ul = document.getElementById('listing');
function countLi(){
    alert("There are "+ul.getElementsByTagName('li').length+" Li-Elements in this Documnet!");
} 
```

（HTML）：

```
<input type="button" onclick="countLi()" value="Count the Li's!"/>
<ul id="listing">
    <li>one</li>
    <li>two</li>
    <li>three</li>
</ul>​ 
```

它告诉我，“ul 为空”。那么我的错在哪里？

亲切的问候，vogti

编辑：啊，是的。[我为你做了一个小提琴](http://jsfiddle.net/vogti/jNc25/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-30T16:03:42.633

你的问题是这一行：

```
var ul = document.getElementById('listing'); 
```

在你`ul`存在之前执行。将整个脚本移到您的下方`</ul>`，将代码放在`window.onload`/`$(document).ready`回调中，或者只是将该行移到您的函数中（这也将使您的`ul`变量在本地范围内限定为该函数）：

```
function countLi(){
    var ul = document.getElementById('listing');
    alert("There are "+ul.getElementsByTagName('li').length+" Li-Elements in this Documnet!");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T16:03:28.150

像这样尝试。当您的代码块呈现时，Listing 元素尚未准备好。

```
function countLi(){
    var ul = document.getElementById('listing');
    alert("There are "+ul.getElementsByTagName('li').length+" Li-Elements in this Documnet!");
    } 
```

# grails - Maven正试图下跌

> ID：10819973
> 
> 赞同：0
> 
> 时间：2012-05-30T16:01:15.170
> 
> 标签：grails, maven, build, jersey

构建失败并显示消息：

“无法在项目 primeplace 上执行目标 org.grails:grails-maven-plugin:2.0.3:maven-clean（默认）：无法为 Grails 执行创建类路径。解决可执行文件的依赖项以准备执行时遇到问题。 http://myrepro/nexus/content/groups/public 中找不到 com.sun.jersey:jersey-client:bundle:1.11 失败缓存在本地仓库，直到places-nexus的更新间隔才会重新尝试解析-public 已过或强制更新”

我的 pom.xml 包含有关泽西岛的以下内容：

```
 <dependency>
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-client</artifactId>
      <version>1.11</version>
    </dependency>
    <dependency>
      <groupId>com.sun.jersey.contribs</groupId>
      <artifactId>jersey-apache-client4</artifactId>
      <version>1.11</version>
    </dependency>
    <dependency>
      <groupId>com.sun.jersey.contribs</groupId>
      <artifactId>jersey-multipart</artifactId>
      <version>1.11</version>
    </dependency>
    <dependency>
      <groupId>com.sun.jersey.contribs.jersey-oauth</groupId>
      <artifactId>oauth-signature</artifactId>
      <version>1.11</version>
    </dependency>
    <dependency>
      <groupId>com.sun.jersey.contribs.jersey-oauth</groupId>
      <artifactId>oauth-client</artifactId>
      <version>1.11</version>
    </dependency> 
```

对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T17:28:15.013

只需删除 ${HOME}/.m2/repository 下的本地存储库，然后重试构建。如果它再次失败，您可能需要更改[您给定的依赖项](http://search.maven.org/#artifactdetails|com.sun.jersey|jersey-client|1.11|bundle)。可能需要将依赖项更改为以下内容（对于第一个依赖项）

```
 <dependency>
      <groupId>com.sun.jersey</groupId>
      <artifactId>jersey-client</artifactId>
      <version>1.11</version>
      <type>bundle</type>
    </dependency> 
```

# css - 如何将浮动的孩子扩展到父母的高度？

> ID：10819974
> 
> 赞同：1
> 
> 时间：2012-05-30T16:01:16.887
> 
> 标签：css, css-float

我有一个`<ul>`我用作导航。当屏幕变得足够小时，一些导航项的文本会变成 2 行——这很好。但是，我想让仍然在一行上的导航项目扩展到`<ul>`.

[以http://jsfiddle.net/quasipickle/msTDe/](http://jsfiddle.net/quasipickle/msTDe/)为例 - 当右侧 (CSS/Result) 列变得足够小时，您会看到“AB BC”文本分成 2 行，但第一个到项目不要成长。

此问题发生在特定断点处，因此如果必须，我可以显式设置高度，但如果可能的话，我宁愿让它自动发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:02:37.433

我知道的唯一方法是你可以`height:100%`在你的`<li>`元素上拥有，但你需要在你的元素上有一个固定的高度，`<ul>`否则它将无法工作。

不幸的是，当您尝试拉伸元素以填充父宽度时，您想要实现的是一种简单的行为，但它与高度的工作方式不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T16:14:01.670

以固定高度进行。

```
ul{ width:100%; height:40px;background:red; overflow:auto;position:relative;}
ul li{ position:relative; float:left; background:green; padding:0 3px;height:100%;}
ul li:nth-child(3){ width:10%; }​ 
```

# java - 通过使用 el-get 安装 ensime 失败

> ID：10819980
> 
> 赞同：3
> 
> 时间：2012-05-30T16:01:44.210
> 
> 标签：java, macos, scala, emacs, elisp

我使用 emacs 和 el-get 包管理系统。我尝试通过 el-get 安装 ensime，但失败了。

警告缓冲区显示以下消息。

> 警告（emacs）：包“ensime”中的构建命令“sbt update stage”将被 shell 插值。要绕过 shell 插值，“ensime”的配方应该将构建命令指定为字符串列表。

这是我的环境。

*   Max OS X Lion (10.7.4)
*   可可 Emacs(XEmacs) 23.4.1 (x86_64-apple-darwin11.4.0, NS apple-appkit-1138.47)
*   el-get.el 版本 4.0
*   el-get ensime 食谱（[https://github.com/dimitri/el-get/blob/112a6c2e388ac47f878cff9933af5b931b0d318e/recipes/ensime.rcp](https://github.com/dimitri/el-get/blob/112a6c2e388ac47f878cff9933af5b931b0d318e/recipes/ensime.rcp)）
*   斯卡拉版本 2.9.2
*   Java版本“1.6.0_31”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:58:12.847

好的，我认为我发现了问题 - 包本身已正确安装，但`load-path`在收据中设置不正确。将字符串`:load-path`从`./dist/elisp`to更改为`./src/main/elisp`，它应该可以工作。如果它可以工作，那么我将提交更改到存储库

# ruby-on-rails-3 - NameError：未初始化的常量 CarrierWave::Backgrounder::Delay

> ID：10819981
> 
> 赞同：1
> 
> 时间：2012-05-30T16:02:01.213
> 
> 标签：ruby-on-rails-3, carrierwave

我正在使用 Rails 3.2.3 和 Carrierwave 1.8.21

尝试根据[https://github.com/lardawge/carrierwave_backgrounder](https://github.com/lardawge/carrierwave_backgrounder)中的说明安装 Carrierwave_backgrounder导致

```
NameError: uninitialized constant CarrierWave::Backgrounder::Delay 
```

因为添加到上传器的以下行

```
include ::CarrierWave::Backgrounder::Delay 
```

我尝试不包括这一行，结果是图像的重复处理（延迟和不延迟）

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T19:14:04.423

看起来您可能需要捆绑并重新启动您的 Rails 服务器。

```
➜  ~  bundle install 
```

# objective-c - 未在 RSS 提要阅读器应用程序中调用 cellForRowAtIndexPath

> ID：10819991
> 
> 赞同：0
> 
> 时间：2012-05-30T16:03:02.807
> 
> 标签：objective-c, uitableview

我在 tableViewController 中有以下代码。未调用 cellForRowAtIndexPath。我不知道为什么。你能帮我吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    NSURL *rssURL =[[NSURL alloc] initWithString:@"http://www.myfeedsite.com/feed"];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:rssURL];
    [parser setDelegate:self];

    [parser parse];

}
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if(elementName)
    {
        self.currentElement = elementName;
    }

}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    self.currentElement=nil;

}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (!self.currentElement) return;

    if([self.currentElement isEqualToString:@"title"])
    {
        //NSLog(@"%@",string);

        [self.feeds addObject:string];
    }

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.feeds count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    NSLog(@"%@",[self.feeds objectAtIndex:indexPath.row]);

    cell.textLabel.text = [self.feeds objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:15:54.983

一旦解析器完成，您很可能只需要告诉 tableView 重新加载数据：

```
- (void)parserDidEndDocument:(NSXMLParser *)parser {
    [tableView reloadData];
} 
```

然而，这个故事还有更多内容。您的解析代码可能并不总能获得`title`XML 元素的全部内容。您应该创建一个名为 NSMutableString 的类属性`currentTitle`，然后修改您的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    self.currentElement = elementName;
    if([self.currentElement isEqualToString:@"title"])
    {
        self.currentTitle = [NSMutableString string];
    }

}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([self.currentElement isEqualToString:@"title"])
    {
        //NSLog(@"%@",string);

        [self.feeds addObject:currentTitle];
    }

        self.currentTitle=nil;
    self.currentElement=nil;
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if (!self.currentElement) return;

    if([self.currentElement isEqualToString:@"title"])
    {
        //NSLog(@"%@",string);

        [currentTitle appendString:string];
    }

} 
```

关于您刚刚发布的评论：如果您的数组没有得到您正在添加的对象，您可能还没有初始化它。在您的`viewDidLoad`方法中，添加：

```
self.feeds = [NSMutableArray array]; 
```

# python - 使用 python 打开其他应用程序

> ID：10819993
> 
> 赞同：3
> 
> 时间：2012-05-30T16:03:13.333
> 
> 标签：python

我在 64 位笔记本电脑上使用 Ubuntu 12.04。我正在尝试使用 python 代码打开一个应用程序。

```
import os
os.system("open /home/utsav/ab.txt") 
```

它给出了以下错误：

“无法获得引用控制台 256 的文件描述符”

我想使用什么命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:06:46.510

您正在使用的命令 -`open`实际上是手册页中称为 的另一个命令`openvt`，它会打开一个虚拟终端。

我不认为那是你想要做的，所以你会想要使用另一个命令（例如 gnome-open、xdg-open、geany、gedit、vim 或 nano）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-22T15:40:25.070

我试过这个。这个对我有用。

```
import os
os.system("command of your preferred app") 
```

可以从首选应用程序*属性的**桌面条目*选项卡中找到应用程序的命令。

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T16:05:37.307

`open`在 OS-X 上工作，在 ubuntu 下我最终使用`gnome-open`（如果您使用的是 k-desktop，我不知道相应的命令是什么）。

**编辑**

根据 Niklas B. 的评论，您也可以尝试`xdg-open`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T01:37:53.587

对于它的价值，Python 2.7.3 文档说该`os`模块已弃用，`subprocess`应该使用该模块。要以这种方式执行命令，您可以使用`subprocess.call(args, ...)`（[“使用子进程模块”](http://docs.python.org/library/subprocess.html#using-the-subprocess-module)）。

根据之前的答案，您可以将`open`其用于 Mac OS X 和`gnome-open`运行 Gnome 桌面环境的 Linux 发行版。（我检查过`gnome-open`，`xdg-open`并且两者都在 Fedora 16 上工作。）Windows 有点棘手。

对于 Windows，您需要使用`start`，但如果文件路径或文件名中有空格，则无法正常工作。引用文件名也不能完全解决它，因为`start`期望一个带有引号的未标记参数是一个标题（例如，对于一个新的`cmd`界面窗口）。这是一个问题，因为标题和要打开的文件都不是标记参数，因此要使调用正常工作，您必须执行类似`start "DummyTitle" "Filename with spaces.ext"`.

所以我们得到的是：

*   Mac OS X：`subprocess.call(['open','/path/to/file'])`

*   运行 Gnome DE 的 Linux：`subprocess.call(['gnome-open','/path/to/file'])`

*   视窗：`subprocess.call(['start','"DummyTitle"','"C:\\Path\\to\\File.ext"'])`

或类似的东西。

* * *

对于 2.7.3 之前的 Python 版本，您可以`os`按照您在问题中的建议使用带有这些 args 作为字符串的模块（只需更改系统调用的命令部分）。另请注意`os.startfile('/path/to/file')`，如果您采用已弃用的`os`路线，Windows 将使用该文件类型的任何关联默认值打开文件。

* * *

请注意，我们仍然没有确定的方法可以在使用其他桌面环境的操作系统上打开文件。请建议对此答案的改进！*

# jquery - jQuery 工具选项卡插件：使活动选项卡始终放在首位

> ID：10819995
> 
> 赞同：1
> 
> 时间：2012-05-30T16:03:19.700
> 
> 标签：jquery, css, jquery-tools

我正在使用 jQuery Tools 的选项卡插件来做一个垂直选项卡系统（选项卡垂直堆叠在左侧，相关内容在右侧）。

当您单击选项卡时，右侧的内容会发生变化。工作正常。

有没有办法让当前/活动选项卡始终成为列表中的第一个（或顶部）选项卡？

```
<div class="corpRespPod" id="notes">
        <ul class="tabs">
            <li><a href="#notes" title="Tab 1">Tab 1</a></li>
            <li><a href="#notes" title="Tab 2">Tab 2</a></li>
            <li><a href="#notes" title="Tab 3">Tab 3</a></li>
        </ul>
        <div class="panes">
            <div>
               Tab 1 content Here
            </div>
            ...
        </div>
</div> 
```

简单的 JS 来触发它：

```
 $("#notes .tabs").tabs("#notes .panes div"); 
```

所以换句话说，如果“Tab 2”被点击，它显然添加了当前的类，但也使它成为`<li>`列表中的第一个。关于 CSS 或 JS 解决方案的任何想法？似乎不在本机 jQuery 工具功能中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:15:35.773

对 jQuery 工具不太确定，但使用 jQuery UI 似乎非常简单

使用 jQuery UI 检查这个演示，它可能会有所帮助。

[垂直标签 jQuery](http://jquery-ui.googlecode.com/svn/trunk/demos/tabs/vertical.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T20:23:47.787

我将[使用 jQuery](http://api.jquery.com/category/manipulation/)删除 DOM 节点并再次将其插入选项卡列表的前面。[您可以通过调用 jQuery 的 slideUp 和/或 slideDown 方法（或其他动画方法](http://api.jquery.com/category/effects/)）并依靠回调来对动画进行排序，使其看起来不错。jQuery 的效果内置于回调中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-30T16:19:02.870

```
<div class="corpRespPod" id="notes">
   <ul >
    <li class="tabs" id="firstTab"></li>
    <li class="tabs">Tab 1</li>
    <li class="tabs">Tab 2</li>
    <li class="tabs">Tab 3</li>
  </ul>
</div>

jQuery(document).ready(function (){
    $("#notes .tabs").tabs("#notes");
});

$(".tabs").click(function(){
    $("#firstTab").text($(this).text());
    $(this).hide();
    $(".tabs").not(this).show();
});​ 
```

这就是您选择的选项卡始终是第一个选项卡的方式。并且您的 DOM 中总会有 3 个选项卡。

**编辑：**我已经用我的小提琴（http://jsfiddle.net/8pkXW/28/）同步了上面的代码。现在插入并检查它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T18:20:20.877

你在 li.current 上的 CSS 是什么？当我不小心在 li.current 上放置了一个 position:absolute 时，我也发生了同样的事情。

# javascript - oop js + $.ajax 将变量传递给父类

> ID：10819998
> 
> 赞同：-3
> 
> 时间：2012-05-30T16:03:21.510
> 
> 标签：javascript, ajax, oop

我正在尝试将 xml 文件中的变量传递给 js 中的父类：代码基本上是 OOP js。类是示例，方法是 getData()。

问题是 ajax 调用不返回整个值，只返回 int 值.. 很奇怪，我知道。

（由于 TJ 克劳德而改变：）

```
function example(){
    this.b;
    this.str;
}
example.prototype ={
    getData:function(){
        $.ajax({
                type: "GET",
                url: "Bar.xml",
                dataType: "xml",
                            context: this,
                success: function(xml) {
                    this.b = parseInt($(xml).find('current_madad').text()); //int_from_xml- works!
                           this.str = $(xml).find('graph_title').text(); //string_from_xml - doesnt work!!
            }
        })//end ajax    
    }
};

var c = new example();
c.getData(); 
```

xml文件在这里。发布以便您也可以查看该代码..

```
<?xml version="1.0" encoding="utf-8"?>
<root>
  <Bars>
    <Bar>
      <bar_start>1010</bar_start>
      <lower_danger_zone>1030</lower_danger_zone>
      <mid_safe_zone>1050</mid_safe_zone>
      <upper_danger_zone>1150</upper_danger_zone>
      <upper_fbdn_zone>1200</upper_fbdn_zone>
      <bar_range>200</bar_range>
      <ideal_range>5</ideal_range>
      <current_madad>1115</current_madad>
    </Bar>
  </Bars>
  <Bars_Desc>
    <Bar>
      <graph_title>פוזיצית אפריל</graph_title>
      <lower_fbdn_zone_Desc>תחום אסור תחתון תיאור</lower_fbdn_zone_Desc>
      <lower_danger_zone_Desc>תחום מסוכן תחתון תיאור</lower_danger_zone_Desc>
      <mid_safe_zone_Desc>תחום בטוח אמצעי תיאור</mid_safe_zone_Desc>
      <mid_safe_ideal_zone_Desc>תחום בטוח פקיעה אידיאלית תיאור</mid_safe_ideal_zone_Desc>
      <upper_danger_zone_Desc>תחום מסוכן עליון תיאור</upper_danger_zone_Desc>
      <upper_fbdn_zone_Desc>תחום אסור עליון תיאור</upper_fbdn_zone_Desc>
    </Bar>
  </Bars_Desc>
</root> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T16:07:55.063

[`ajax`](http://api.jquery.com/jquery.ajax/)调用是*异步*的。`getData` *开始*调用，但它稍后完成，在`getData`返回之后，所以当你分配给时`this.b`，`a`成功回调尚未设置。你需要改变你的`getData`电话：

```
getData:function(){
    var self = this;           // <=== Set up a reference to `this`
    alert("functionlasdkfj");
    $.ajax({
            type: "GET",
            url: "Bar.xml",
            dataType: "xml",
            success: function(xml) {
                self.b = 1;    // <=== Use it to set `b` directly
        }
    })//end ajax
} 
```

或者，您可以使用`context`选项`ajax`来更改`this`回调中的内容：

```
getData:function(){
    alert("functionlasdkfj");
    $.ajax({
            type: "GET",
            url: "Bar.xml",
            dataType: "xml",
            context: this,     // <=== Set `context`
            success: function(xml) {
                this.b = 1;    // <=== Now you can set `b` directly
        }
    })//end ajax
} 
```

* * *

给你的两个旁注：

1.  关于：

    ```
    function example(){
        this.b;
    } 
    ```

    那里的`this.b`东西没有任何作用。这实际上是一个评论。特别是，它不会创建在对象上调用`b`的属性。

2.  在您的原始代码中，除非您在某处声明，否则您[*将成为隐式全局恐怖的*](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)`a`牺牲品。[](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T06:22:37.300

知道了！我正在使用我需要的数据并将其传递给**ajax**的成功函数！获取数据：函数（）{

```
$.ajax({
        type: "GET",
        url: "Bar.xml",
        dataType: "xml",
        context: this,     // <=== Set `context` - this helped me BTW
        success: function(xml) {
           arr.f1 = 1;    // 
           arr.f2 = 876;
           pass_data_to_data_handler_function(arr); //<= so I am waiting for response

})//end ajax 
```

}*