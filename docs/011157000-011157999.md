# StackOverflow 问答 11157000-11157999

# c# - 在 C# 中获取 Excel xlGeneralFormatName

> ID：11157001
> 
> 赞同：0
> 
> 时间：2012-06-22T13:20:26.703
> 
> 标签：c#, excel, vba

我正在尝试获取

```
xlGeneralFormatName 
```

从 Excel 中，像这样：

```
 Excel.Application _excelApp;
        Excel.Workbook _excelWB;

        _excelApp = new Excel.Application();
        _excelWB = _excelApp.Workbooks.Add();

        object o  = _excelWB.Application.International(Excel.XlApplicationInternational.xlGeneralFormatName); 
```

但是我在最后一行代码中遇到了**无法调用非委托类型错误。**

我究竟做错了什么？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:35:26.713

`International`是属性，不是方法。请参阅[**_Application.International 属性**](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel._application.international.aspx)。

也许您是 C# 新手？您使用方括号而不是括号获得索引属性的成员：

```
object o = _excelWB.Application.International[Excel.XlApplicationInternational.xlGeneralFormatName]; 
```

# c++ - C++ Builder 的 .NET 等效功能

> ID：11157002
> 
> 赞同：0
> 
> 时间：2012-06-22T13:20:29.523
> 
> 标签：c++, webbrowser-control, c++builder

我正在使用 C++ Builder 开发本机应用程序。我已经向应用程序添加了一个内部浏览器控件（使用提供的 TCppWebBrowser 类）（对我来说是第一个:-)）。此控件当前使用外部 HTML 文件来启动。到目前为止，一切都很好...

我见过一个用 VB.NET 编写的类似应用程序，在那里我看到您可以命令浏览器控件 (System.Windows.Forms.WebBrowser) 加载内部内容（我的意思是 HTML 页面）。是这样的：

```
theWebBrowser.DocumentText = theStringThatHoldsTheContent 
```

有人知道 TCppWebBrowser 类或任何通过它查询的接口具有此功能吗？任何 URL、InterfaceName、片段都可以...

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:31:52.570

将浏览器导航到“about:blank” URL，等待导航完成，然后您可以查询接口的`Document`属性`IPersistStreamInit`并调用其`Load()`方法。它需要一个`IStream`接口作为输入。您可以使用 VCL 的`TStreamAdapter`类来包装任何 VCL`TStream`对象，例如`TMemoryStream`(`TStreamAdapter`实现`IStream`接口)。然后，您可以`TStream`根据需要将 HTML 存储在 .

# javascript - Javascript：document.getElementbyID(..) 为空或不是对象

> ID：11157005
> 
> 赞同：0
> 
> 时间：2012-06-22T13:20:43.393
> 
> 标签：javascript, html, dom

我似乎无法理解为什么下面的 javascript 代码给了我 document.getelementbyid 为 null 或不是此行上的对象：行：111。据我所知，所有内容都应该像我声明的所有内容一样工作

```
var rows = document.getElementById("mstrTable").getElementsByTagName("tr"); 
```

这是完整的代码：

```
 <html>
<head>
    <title>Scrolling Data Grid</title>
<style>
/* ==================================================================== */
/* SCROLLING DATA GRID - IE ONLY!                                       */
/* ==================================================================== */
/* 
Tables inside a scrollingdatagrid should have:
 1\. border-collapse:separate
 2\. No border or margin
 3\. Background colors on all cells to avoid bleed-thru on scroll
 4\. cellspacing="0" on the <table> tag itself
*/
DIV.scrollingdatagrid {
    overflow-x:auto;
    overflow-y:auto;
    position:relative;
    padding:0px;
}
DIV.scrollingdatagrid TABLE {
    width : 98.7%; /* Make room for scroll bar! */
    margin:0px;
    border:0px;
    border-collapse:separate;
}
DIV.scrollingdatagrid TABLE TR .locked, DIV.scrollingdatagrid TABLE THEAD TR, DIV.scrollingdatagrid TABLE TFOOT TR {
    position:relative;
}
/* OffsetParent of the TR is the DIV because it is position:relative */
DIV.scrollingdatagrid TABLE THEAD TR {
    top:expression(this.offsetParent.scrollTop);
}

/* Make the z-index values very clear so overlaps happen as expected! */
DIV.scrollingdatagrid TD, DIV.scrollingdatagrid TH { z-index:1; }
DIV.scrollingdatagrid TD.locked, DIV.scrollingdatagrid TH.locked { z-index:2; }
DIV.scrollingdatagrid THEAD TR, DIV.scrollingdatagrid TFOOT TR { z-index:3; }
DIV.scrollingdatagrid THEAD TR TH.locked { z-index:4; }
</style>

<script type="text/javascript">
window.onload = function(){ write_it() }

function write_it() {

var cn      =   new ActiveXObject("ADODB.Connection")
var rs      =   new ActiveXObject("ADODB.Recordset")
var dbFile  =   "imts.mdb"
var dbPath  =   "G:\\AS\\Asf\\ASF\\IMTS\\V8\\database\\"

var mySQL   = "SELECT * FROM tbl_imts WHERE [FILE NUMBER] LIKE '%99%'"
var html    = ""

cn.Open("Provider=Microsoft.Jet.OLEDB.4.0;Data Source = " + dbPath + dbFile + "");
rs.Open(mySQL, cn, 1, 3)

html += '<table id="mstrTable" style="table-layout: fixed; font-family: arial; font-size: 9pt;" cellpadding="0" cellspacing="0">\n'
html += '<thead>\n'
html += '<tr>\n'
html += '<th class="locked" style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; height: 30px; width: 20px; color: rgb(102,102,102); background-color: rgb(212,208,200);">#</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(0).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(1).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(2).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(3).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(4).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(5).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(6).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(7).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(8).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(9).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(10).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(11).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(12).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(13).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: 1px solid rgb(128,128,128); padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(14).name + '</th>\n'
html += '<th style="border-bottom: 1px solid rgb(128,128,128); border-top: 1px solid #ffffff; border-left: 1px solid #ffffff; border-right: none; padding-left: 5px; width: 100px; color: rgb(102,102,102); background-color: rgb(212,208,200);">' + rs.fields(15).name + '</th>\n'
html += '</tr>\n'
html += '</thead>\n'

rs.MoveFirst
var i = 0
html += '<tbody>\n'
while (!rs.eof) {
++i
    html    +=  '<tr style="color: rgb(102,102,102)">\n'
    html    +=  '<td class="locked" style="height: 20px; border-right: 1px solid rgb(128,128,128); border-bottom: 1px solid rgb(128,128,128);">'+i+'.</td>\n'
    for (var r = 0; r < rs.fields.count; ++r) {
    if (!rs.fields(r).value) { rs.fields(r).value = "&nbsp;" }
    html    +=  '<td style="border-right: 1px solid rgb(128,128,128); border-bottom: 1px solid rgb(128,128,128); padding-left: 5px; white-space: nowrap; overflow: hidden;">'+rs.fields(r).value+'</td>\n'
    }//end of for
    html    +=  '</tr>\n'
    rs.MoveNext 
    }//end of while
html += '</tbody>\n'
html += '</table>\n'
document.getElementById("p1").innerHTML = html
}
</script>
</head>

<body>

<div id="p1" class="scrollingdatagrid" style="width:800px;height:200px;border:1px solid rgb(128,128,128);"></div>

<script type="text/javascript">
(function() {
var color = "#E1E0D7"
var rows = document.getElementById("mstrTable").getElementsByTagName("tr");
var n = rows.length;
var bgcs = [];
for(var i=0; i<n; ++i) bgcs[i] = rows[i].style.backgroundColor;
//rows[0].style.backgroundColor = color;
function changeColor(e) {
if(!e) e = window.event;
var o = e.target? e.target: e.srcElement;
if (o.tagName == "TH") { return }
while(o.tagName && o.tagName.toLowerCase()!="tr") o = o.parentNode;
for(var i=0; i<n; ++i) {
rows[i].style.backgroundColor = bgcs[i];
if(rows[i]==o) {
                rows[i].style.backgroundColor = color
                }
}
}
if(document.addEventListener) for(var i=0; i<n; ++i) rows[i].addEventListener("click", changeColor, false);
else for(var i=0; i<n; ++i) rows[i].attachEvent("onclick", changeColor);
})();
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:25:10.323

它没有找到您的元素，因为它是在`onload`加载整个文档时触发的事件中创建的。这意味着它是在执行错误的代码行**之后**创建的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:27:20.870

You are calling `write_it()` in response to the page's `load`, which fires after the DOM has been fully built and all images and subframes have fully loaded. See the MDN [`window.onload`](https://developer.mozilla.org/en/DOM/window.onload) doc page for more on when `onload` fires.

However, your `getElementById` call is firing *immediately*, as soon as your JavaScript execution evironment is set up, before the DOM is built. Since the `write_it` function creates the table you're trying to select `onload`, and it runs after your `getElementById` call, the table doesn't yet exist when you try to select it.

You should move all of your code into the `write_it` function so that none of it runs until after the DOM is built.

# c++ - 如何找到涉及内存泄漏的数据？

> ID：11157009
> 
> 赞同：1
> 
> 时间：2012-06-22T13:20:59.100
> 
> 标签：c++, variables, memory-leaks

我有一个 C++ 程序，它用数据填充我的多维数据集（数据库），但是 C++ 中的服务器有一些内存泄漏，从 37.5GB 到 34.9GB。我没有服务器的源代码。有没有办法找出内存泄漏发生在哪里或内存泄漏涉及哪些数据？

**我正在尝试使用 valgrind，但它太慢了，我估计运行该程序所需的时间大约为 1 年，所以这不是一个可行的方法。**

# ruby-on-rails - Rails/Apache/Passenger 部署问题....只看到文件索引

> ID：11157012
> 
> 赞同：0
> 
> 时间：2012-06-22T13:21:05.793
> 
> 标签：ruby-on-rails, apache, deployment, passenger

我知道还有其他问题有类似的问题，但我已经阅读了所有这些问题，但没有得到任何解决方案。

我有一个使用 WEBrick 服务器在 SQLlite 开发中运行良好的 rails 应用程序（jetway）。我为生产安装了 apache2 和 mysql2。当我启动 apache 时，我可以毫无问题地看到索引页面。MySql 也工作正常，当我 rake 时，数据库会设置好，我可以毫无问题地播种它。

乘客也已安装，当我重新启动 apache 时，日志状态

```
[Fri Jun 22 09:07:53 2012] [notice] Apache/2.2.20 (Ubuntu) Phusion_Passenger/3.0.13 configured -- resuming normal operations 
```

这是我的jetway apache配置文件

```
<VirtualHost :*80>
   ServerName jetway
   RailsEnv production
   DocumentRoot /home/jason/jetway/public
</VirtualHost> 
```

使用此设置，当我启动 Apache 时，我确实收到一条关于没有虚拟主机的消息。

```
 * Restarting web server apache2
[Fri Jun 22 09:17:56 2012] [error] (EAI 2)Name or service not known: Could not resolve host name :*80 -- ignoring!
[Fri Jun 22 09:17:56 2012] [warn] NameVirtualHost 99.44.242.76:80 has no VirtualHosts
[Fri Jun 22 09:17:56 2012] [warn] NameVirtualHost *:80 has no VirtualHosts 
```

我在 Rails 应用程序中将环境设置为生产环境。通过这个设置，当我转到 /jetway 时，我看到的只是 jetway 目录中的文件列表。我在我的公共文件中放了一个 index.html 以查看会发生什么，如果我转到公共目录，它会显示索引页面，而不是目录列表。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:35:52.077

尝试添加类似

```
<Directory /home/jason/jetway/public>
    Allow from all
    Options -MultiViews
</Directory> 
```

看看是否有帮助。

您可能还需要查看 apache 已读取/执行写入 public/

# c# - 哈克按钮禁用

> ID：11157017
> 
> 赞同：0
> 
> 时间：2012-06-22T13:21:20.250
> 
> 标签：c#, wpf, xaml

所以我有一个允许用户选择三个按钮之一的应用程序。我不希望按钮在他们单击后可以按下，但我也不希望按钮看起来`isenabled=false`很丑。据我所知，没有办法禁用外观更改，`isenabled=false`所以我想我会使用放置在它上面的透明控件来防止用户点击它。我的问题是，我应该使用什么控件？正在尝试`Label`但无法填充网格单元格。像这样的东西会`Canvas`起作用，还是可以点击？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:37:05.153

如果您想阻止单击按钮，请使用`IsHitTestVisible`，将其绑定到一个（通知）属性。它会做你想做的事：如果`IsHitTestVisible`是假的，鼠标点击不会影响它，它看起来一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:34:34.107

使用`ToggleButton`和处理`Unchecked`事件。像这样：

```
private void MyToggleButton_Unchecked(object sender, RoutedEventArgs e) {
            MyToggleButton.IsChecked = true;
        } 
```

这样，用户一旦被选中就无法取消选中它。

# jquery - 使用 Web 服务而不是回发在 asp.net 中创建 Html

> ID：11157023
> 
> 赞同：0
> 
> 时间：2012-06-22T13:21:53.340
> 
> 标签：jquery, asp.net, web-services

我正在尝试做的事情：

一旦页面加载了一些设置，就创建一个“网格”，而不是使用回发来重新生成这个网格，我想使用很好的快速服务方法，即页面更改，过滤结果

我通常会根据服务传回的 DTO 重新创建 html。现在我遇到的问题是，我实际上是在两个地方（在 asp.net 页面中）以及在 JavaScript 中创建 Html。

现在我知道这可以通过在同一个应用程序中使用 MVC 来完成，创建一个部分，在服务器上渲染它并发送回 Html（在将模型添加到它之后）..但这似乎有点 hacky

或者，我可以在后面的代码中创建 html，但这似乎有点废话，将它放在像编辑器这样的 html 中会很棒..再次像部分..

我错过了一些非常明显的东西，有没有更清洁的方法？（仍在使用 ASP.net）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:30:10.730

我建议查看 Allan Jardine 出色的 jQuery 插件[DataTables](http://datatables.net/)提供的可能性。我已经使用它几年了，它已经多次证明自己速度快、跨浏览器友好，并且与从 ASMX Web 服务或我的首选方法 List<MyObject 返回的 2D 数组相当好地集成>，ASMX 将其序列化为 JSON 对象数组。

很多时候我们甚至不需要担心分页服务器端。如果您要处理的数据少于几千行，那么即使在较旧的浏览器中，dataTables 也可以非常快速地在客户端上处理所有数据的分页和过滤。IE6/7 有时开始有点生涩，但仍然是我认为可用的。

# android - android中的谷歌地图仅显示网格

> ID：11157029
> 
> 赞同：0
> 
> 时间：2012-06-22T13:22:17.077
> 
> 标签：android, google-maps

我正在尝试实施谷歌地图，但我遇到了一些问题。问题是当我加载我的应用程序时，它只显示地图的网格（而不是地图的图像）。

这是我的代码...任何人都可以看到问题吗？

**Xml 主要**

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

    <com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/map_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:apiKey=" api key"
        android:clickable="true"
        android:enabled="true" />

    </LinearLayout> 
```

**清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="info.org.NewMap"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".NewMapActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <uses-library android:name="com.google.android.maps" />
    </application>

</manifest> 
```

**Java 类**

```
package info.org.NewMap;

import android.os.Bundle;
import com.google.android.maps.MapActivity;
import com.google.android.maps.MapView;
public class NewMapActivity extends MapActivity {
    /** Called when the activity is first created. */

    private MapView mapView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.map_view);      
        mapView.setBuiltInZoomControls(true);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

**第二个 Java 文件**

```
package info.org.NewMap;
import java.util.ArrayList;
import android.app.AlertDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;
import com.google.android.maps.ItemizedOverlay;
import com.google.android.maps.OverlayItem;

public class CustomItemizedOverlay extends ItemizedOverlay<OverlayItem> {

    private ArrayList<OverlayItem> mapOverlays = new ArrayList<OverlayItem>();

    private Context context;

    public CustomItemizedOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public CustomItemizedOverlay(Drawable defaultMarker, Context context) {
        this(defaultMarker);
        this.context = context;
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mapOverlays.get(i);
    }

    @Override
    public int size() {
        return mapOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        OverlayItem item = mapOverlays.get(index);
        AlertDialog.Builder dialog = new AlertDialog.Builder(context);
        dialog.setTitle(item.getTitle());
        dialog.setMessage(item.getSnippet());
        dialog.show();
        return true;
    }

    public void addOverlay(OverlayItem overlay) {
        mapOverlays.add(overlay);
        this.populate();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:02:58.690

如果您已使用 debug.keystore 获取地图的 api 密钥，那么当您使用自己的私钥库启动签名应用程序时，它将不会显示地图图块。你签署了你的应用程序吗？

要在已签名的应用程序中使用地图，您必须使用您用于签署应用程序的相同密钥库（不是 debug.keystore）从谷歌获取 api 密钥。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:28:05.803

您是否在 AndroidManifest.xml 文件中为您的应用程序添加了以下权限

1.  互联网
2.  ACCESS_FINE_LOCATION
3.  ACCESS_COARSE_LOCATION

问候， 阿基夫·哈米德

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-22T07:00:32.780

禁用代理服务器..如果启用代理服务器，地图将不起作用..

# javascript - 加快 json 加载速度

> ID：11157030
> 
> 赞同：1
> 
> 时间：2012-06-22T13:22:26.043
> 
> 标签：javascript, json, variables, delay

我正在使用一些本地 json 文件，但我在加载速度方面遇到了一些问题。我的服务器只是一个用 python 制作的小型网络服务器，我通常用它来尝试我的 javascript 代码。我的脚本仅适用于 Firefox，我必须延迟 60000 毫秒（或使用 firebug）。脚本是：

```
function geisson()
{
var iabile = new XMLHttpRequest();

iabile.open("GET", "longanocard.json", true);
iabile.send(null);

PerdiTempo(60000);

var objectjson = {};
var arrayCards= []; //creazione dell'array che conterrà le cards

objectson = JSON.parse(iabile.responseText);

arrayCards = objectson.cards;
//alert(arrayCards[0].__guid__.toSource());

var qwerty = arrayCards[0].__guid__;

var mela = "http://www.airpim.com/png/public/card/" + qwerty + "?width=292";    

document.location = mela;
//windows.location.href= mela;
} 
```

PerdiTempo 是我用于延迟的函数：

```
function PerdiTempo(ms)
{
ms += new Date().getTime();
while (new Date() < ms){}
} 
```

如何加快文件 longanocard.json 的加载速度？为什么延迟不适用于其他浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:28:56.063

你真的应该避免以这种方式等待异步响应（你怎么知道 JSON 解析延迟了多少秒？），而是使用`onreadystatechange`你的请求的事件

```
function geisson() {

    var iabile = new XMLHttpRequest();

    iabile.onreadystatechange = function(){
        if(iabile.readyState === 4 && iabile.status === 200) {
            var objectjson = {};
            var arrayCards= []; //creazione dell'array che conterrà le cards
            objectson = JSON.parse(iabile.responseText);

            ...
            /* codice restante qui */

        }
    }
    iabile.open("GET", "longanocard.json", true);
    iabile.send(null);

} 
```

# jquery - Jquery：如何在 jsp 中添加一个 jquery datepicker

> ID：11157031
> 
> 赞同：1
> 
> 时间：2012-06-22T13:22:27.717
> 
> 标签：jquery, jsp

我有一个 jsp 文件，其中包含：

```
<tr>
  <td> End date </td>
  <td>  <div> <s:textfield name="endDate" label="End Date" value=""/> &nbsp; (dd/mm/yyyy - For Bid) </div> </td>
</tr> 
```

有人可以告诉我如何添加一个 jquery datepicker，它会在选择文本字段时弹出当前月份并选择今天的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:29:10.753

检查这个[jQuery UI DatePicker 以显示月份年份](https://stackoverflow.com/questions/2208480/jquery-ui-datepicker-to-show-month-year-only)，它可能会有所帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:30:21.863

使用以下

```
 jQuery("id").datepicker({ 
    dateFormat:'MM YY',
     onClose: function (dateText, inst) {
    var month = jQuery("#ui-datepicker-div .ui-datepicker-month :selected").val();
    var year =jQuery("#ui-datepicker-div .ui-datepicker-year :selected").val();
    $(this).val(jQuery.datepicker.formatDate('yy-mm', new Date(year, month, 1)));
  }
  });
var myDate = new Date();
var prettyDate =(myDate.getMonth()+1) + ' ' +
        myDate.getFullYear();
jQuery("id").val(prettyDate); 
```

希望它可以帮助你

# jsf - JSF 2 复选框和布尔 getter

> ID：11157037
> 
> 赞同：2
> 
> 时间：2012-06-22T13:22:49.070
> 
> 标签：jsf, jaxb, jax-ws

我正在生成一个基于 web 服务的 jaxws 客户端。Jaxb 将使用 java.lang.Boolean 而不是原始类型生成布尔值。除此之外，它还会为 bean 生成 is() 命名约定。

但是，如果我尝试将布尔值（例如 isOptional()）链接到复选框，它将引发以下异常：

```
value="#{property.optional}": Property 'optional' not readable on type java.lang.Boolean 
```

我的谷歌技能告诉我 jsf 适用于：

```
 boolean isOptional()
 boolean getOptional()
 Boolean getOptional() 
```

但不与

```
Boolean isOptional() 
```

但是，由于 web 服务的大小和数量，手动更新 bean 是不可行的，那么有什么方法可以让 jsf 正确使用 java.lang.Boolean isOptional() 吗？或者我可以在生成时以某种方式在 jaxb 绑定文件中定义一个属性，该属性会神奇地生成“getOptional()”吗？

在旁注中，以下确实有效：

```
<h:selectBooleanCheckbox value="#{property.isOptional()}"/> 
```

但是我可能实际上无法更新该值，因为它找不到设置器。

**编辑**：我正在运行最新的 jdk 7，“java -version”的输出：

```
java version "1.7.0_05"
Java(TM) SE Runtime Environment (build 1.7.0_05-b05)
Java HotSpot(TM) Client VM (build 23.1-b03, mixed mode, sharing) 
```

“wsimport -version”的输出：

```
JAX-WS RI 2.2.4-b01 
```

生成的代码：

```
public Boolean isOptional() {
    return optional;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:32:31.680

> *Jaxb 将使用 java.lang.Boolean 而不是原始类型生成布尔值。除此之外，它还会为 bean 生成 is() 命名约定。*

使用`is`getter 前缀`java.lang.Boolean`是 JAXB 的一个已知重大错误。[它已在](http://java.net/jira/browse/JAXB-131)2010 年 4 月发布的版本 2.1.13 中得到修复。使您的库保持最新。

另请参阅[此博客文章](http://www.mojavelinux.com/blog/archives/2006/09/the_great_jaxb_api_blunder/)了解一些背景信息。

> # 伟大的 JAXB API 错误
> 
> [2006 年 9 月 15 日]
> 
> 你必须把它交给 Sun 来解决这个问题。当文档像教科书一样厚时，编写不符合规范的软件是一回事。举个例子，W3C 创建的任何东西。但是，当它是您自己的规范而您无法遵循时，这真的很糟糕，尤其是当它是其中最知名的部分时。没错，Sun 在创建 JAXB 2.0 API 时在他们自己的规范上差了一英里。在为 java.lang.Boolean 属性生成 getter 方法时，JAXB 2.0 编译器 (XJC) 错误地使用了前缀“is”而不是“get”。虽然 JavaBean 规范声明原始布尔值的读取方法可以使用替代的“is”前缀，但这种灵活性并未扩展到其布尔包装器对应物。
> 
> > > > 8.3.2 布尔属性
> > > > 
> > > > 此外，对于布尔属性，我们允许使用 getter 方法来匹配模式：
> > > > 
> > > > ```
> > > > public boolean is(); 
> > > > ```
> > > > 
> > > > 可以提供该“is”方法来代替“get”方法，或者可以在“get”方法之外提供它。在任何一种情况下，如果布尔属性存在“is”方法，那么我们将使用“is”方法来读取属性值。
> > > > 
> > > > 一个示例布尔属性可能是：
> > > > 
> > > > ```
> > > > public boolean isMarsupial();
> > > > public void setMarsupial(boolean m); 
> > > > ```
> 
> 鉴于 JAXB 是一个代码生成框架，并且代码生成框架背后的想法是代码将“按原样”使用，此后不得修改，这是一个相当大的“糟糕”。虽然已报告此问题，但 Sun 的回应是“抱歉，为时已晚”。
> 
> 这种行为受规范控制，不幸的是，现在改变规范为时已晚。
> 
> 在用户体验方面，多亏了自动装箱，我不认为这对人们来说是一个真正的问题。您使用 Introspector 的问题是它缺少该属性吗？太晚了？不是真正的问题吗？它坏了。修理它！我也不喜欢它可能不会影响框架的天真说法。嗯，是的，考虑到其他项目确实符合规范（hibernate、spring、myfaces 等）
> 
> 更新： Stevo Slavic 告诉我，这已在 JAXB 2.1.13 中修复。有关详细信息，请参阅[JAXB-131](http://java.net/jira/browse/JAXB-131)。是的！

JSF/EL 在这里没有错。它的工作符合[JavaBeans 规范](http://www.oracle.com/technetwork/java/javase/documentation/spec-136004.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-25T05:36:56.870

我不确定为什么最新最好的 JAXB 版本仍然会生成错误的方法，但我最终通过添加“-B-enableIntrospection”（根据[http://jaxb.java.net/2.2.4/docs/xjc .html](http://jaxb.java.net/2.2.4/docs/xjc.html) ) 到 wsimport 调用。这导致：

```
public Boolean getOptional() {
    return optional;
} 
```

# linux - 添加 GDB 符号后应用程序运行缓慢 - 副作用？

> ID：11157038
> 
> 赞同：0
> 
> 时间：2012-06-22T13:22:56.377
> 
> 标签：linux, gdb, mips, gdbserver

在发布模式下，我们有一个大小约为 20MB 的应用程序。此应用程序旨在在运行 Linux 2.6.12 的 MIPS 上运行。相同的调试版本约为 42 MB，优化关闭并添加了 -g 标志。额外的 22 MB 增加仅仅是因为 gdb 调试符号嵌入到应用程序中（没有添加日志或打印语句）。

与发布模式相比，现在调试构建的运行速度会比映像慢，如果是，为什么？

AFAIK`strip debug_image`也应该给我`release_image`，但就我而言，我观察到以下情况。

```
debug_image = 42MB
strip debug_image = 24MB
release_image = 20MB 
```

为什么剥离的 debug_image 和 release_image 之间有区别？

将 gdb 符号嵌入到应用程序中是否还有其他副作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:55:23.350

> 与发布模式相比，现在调试构建的运行速度会比映像慢，如果是，为什么？

是的，如果优化关闭，它会，这在你的情况下是正确的。

> 为什么剥离的 debug_image 和 release_image 之间有区别？

由于发布时进行了优化，因此优化了整个图像大小，减少了它。这导致发布中的图像大小比调试中的小。

> 将 gdb 符号嵌入到应用程序中是否还有其他副作用？

gdb 加载符号需要更长的时间，并且需要更多的内存。

# java - ESB 与服务

> ID：11157041
> 
> 赞同：4
> 
> 时间：2012-06-22T13:23:10.367
> 
> 标签：java, ejb-3.0, soa, apache-camel, middleware

我是 Java EE 的新手，几天来一直在为一些基本的中间件概念苦苦挣扎，我*相信*我可能刚刚对“tings 如何工作”的理解有了突破；这个问题的一部分是要求确认我的发现，另一部分是一个合法的问题;-)。

**请确认/澄清：**我对服务总线/MOM（面向消息的中间件）的理解是，它们本质上旨在异步处理客户端请求。这与正常的请求-响应周期相反，后者是同步的，通常由某种服务实现。在 Java 中，这样的总线/MOM 可能类似于 Apache Camel，而同步服务可能类似于 EJB(3)。因此，如果客户端需要立即处理请求，`HttpRequest`可以转到 Web 服务，然后将请求转发到正确的 EJB；EJB 处理消息并将结果返回给服务，然后服务返回`HttpResponse`给客户端。因此，如果客户端有一个不会阻止它们并且只需要处理的请求，则 Web 服务会转发它们的`HttpRequest`到服务总线上的某个端点，请求被视为消息，并由各种处理器（过滤器、转换器等）处理。

所以首先，如果我错误地指出 ESB/MOM 解决方案最适合处理异步请求，并且 EJB（同样，3.x）最适合实时响应同步请求，请纠正我；或确认我是正确的。

在这种情况下，在我看来，大型应用程序需要*两种*类型的后端来处理同步（阻塞）和异步（非阻塞）客户端请求。所以我的理论是让我的后端实现如下：

*   使用成熟的应用服务器，如 JBoss 或 GlassFish
*   在应用服务器的 Web 容器中有两个 WAR：`WebServices.war`和`ESB.war`; 分别代表后端“网关”和服务总线
*   在应用服务器的业务容器中有我所有的 EJB
*   现在，`WebService.war`（网关）可以检测是否将请求中继到 ESB 或 EJB

我的第二个问题是：**我是否在这里偏离了基础，我是否错过了中间件 101 的基本概念，或者这是一个半途而废的方法？**

**编辑：**从最初的回复中，我已经看到我在两个方面错了：（1）ESB 和 EJB 实际上可以*是*同步的或异步的，（2）当使用 MDB 时，EJB 可以像连接ESB。

所以这些更正给我带来了一些新的心理障碍：

*   何时使用 ESB，何时使用 MDB/EJB 解决方案；和
*   我*真的很*喜欢 Apache Camel 的处理器 API（EIP 的实现）；我可以使用 MDB/EJB，但在每个 EJB 中只使用 Camel 处理器（`Filter`、`WireTap`等）吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:40:54.050

这是一个大问题，值得一个大答案。

ESB 可以处理同步或异步请求，并且消息通常以异步方式使用。

但是，您的后端实现理论是非常错误的。

JAX WS Web 服务可以直接运行 EJB jar 或 EAR，并且可以在任何应用程序服务器中以这种方式运行。EJB 可以将消息放入队列甚至是异步的。

您不应该将请求中继到 ESB，而是反过来。

ESB 应该在客户端和后端之间中继和转换请求和响应。ESB 的一个重要想法是，如果后端发生更改，客户不知道也不关心，因为他们的合同是与 ESB 而不是后端。

综上所述，如果您的应用程序已经公开了 Web 服务，那么您可能不需要 ESB，并且记住没有一种正确或错误的方式来做某事。

我确实建议你写一个更明确的问题来涵盖你的具体问题，你可能会得到很多关于如何解决它的建议。

**更新**

您还将获得消息驱动的 EJB，这确实可以让 EJB 像总线一样以总线方式链接在一起。

**进一步更新**

因此，我将使用 ESB 的一种情况是，如果我需要在遗留系统中将基于非标准的服务公开为 SOAP 服务。然而，还有更多需要考虑的事情，您还应该为您的组织实现一个数据字典，这将使 ESB 公开的服务更有可能保持不变，即使您的旧系统被替换。

因此，作为一个具体示例，组织应该在其数据字典中定义客户实体的外观，ESB 可以公开服务以检索客户。ESB 将对基于遗留系统的系统执行一些调用，然后转换结果。如果将来存储客户的后端系统发生变化，ESB 暴露的服务可能保持不变，只需要更新后端调用和转换。

现在希望考虑到这一点，下一点将是有意义的。所有这些都可以通过“传统”ESB（例如 JBoss ESB 或 Mule ESB）实现，但也可以使用 EJB + Camel（或其他东西）。

开箱即用 ESB 的优势在于提供的连接器、侦听器和转换器。但是，如果没有任何开箱即用的功能可以帮助您，那么您选择的方向几乎没有什么区别。

在家发展 ESB 的一个优势是可维护性，与找到专门的 ESB 资源或培训资源相比，找到一个非常了解 EJB 并且可以在需要时快速学习 Camel 的资源要容易得多。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:25:10.207

正如您所注意到的，中间件/集成的世界在定义和术语上有点混乱。让我澄清一下。

服务只是提供功能的“某物”的概念。有多种方法可以公开服务。

在下面提到 EJB 时，我指的是 EJB，除了 MDB（消息驱动 Bean），它实现了异步消息传递。

*   同步请求/回复 - 在请求之后“很快”会收到回复。通常通过 Web 服务和 EJB（RMI 等）实现。
*   作为向使用数据的多个订阅者发布的消息（通常价格表从价格主系统推送到需要信息的各种系统，例如订单系统）。
*   作为从一个应用程序到另一个应用程序的即发即弃消息。通常，订单系统需要向调用系统发送订单，然后调用系统公开一个服务来创建发票。

从概念上讲，ESB 是一个软的东西。这是关于如何公开公司业务服务的概念/协议，以便整个公司的应用程序可以使用/使用这些服务。这实际上可能只是一组约束“仅允许使用 SOAP/WebServices 的请求/回复服务，并且所有消息都应符合 OAGIS XML 标准”。然而，在大多数情况下，大多数公司的应用程序/服务器/系统环境并不是同质的。有 COTS 产品、带有 COBOL 应用程序的大型机、.NET 应用程序以及 Java EE 应用程序。因此，一种常见的方法是使用 ESB 软件套件在技术上实现服务总线，或者构建面向总线的适配器。Apache Camel 可以作为 ESB 实现的一部分来设置路由、转换、转换等。

与 ESB 紧密集成的一件事是面向消息的中间件，你说得对。它通常只是一个实现消息队列的服务器。与直接调用 EJB/Web 服务相比，MOM 的好处很少。

*   如果是异步模式（发布/订阅、触发和忘记以及异步请求/回复，那么具有高正常运行时间且非常稳定的中继服务器将总体上减少业务消息的失败传输。
*   MOM 通常使实现适配器和 ESB 变得相当容易，该 ESB 对负载峰值、网络干扰和硬件/软件故障具有很强的弹性。消息通常是持久的，并在中继之前存储到磁盘中。事务也经常可用，特别是在 JMS 兼容的实现中。这保证了数据不会在途中丢失。

我希望我没有比以前更糟。至少这是我对此的看法。

# java - Java - 合约测试

> ID：11157042
> 
> 赞同：2
> 
> 时间：2012-06-22T13:23:11.773
> 
> 标签：java, unit-testing, interface, junit

我正在尝试为一些广泛使用的接口编写合约测试：

沿着：

```
public abstract class MyInterfaceContractTest extends TestCase {

  private MyInterface _toTest;

  public void setUp(){
    _toTest = getTestableImplementation();
  }

  protected abstract MyInterface getTestableImplementation();

  public void testContract(){

  }
} 
```

...和...

```
public class MyInterfaceImplementationTest extends MyInterfaceContractTest {

  protected MyInterface getTestableImplementation(){
    return new MyInterfaceImplementation(...);
  }
} 
```

但是，我希望能够测试`MyInterfaceImplementation`. 在我的用例中，这是一个包含数据集合的不可变对象（根据 interface 指定访问器`MyInterface`），它可能是空的，或者有少量数据，甚至是大量数据。

所以问题是，我如何测试我的实现的多个实例？

目前，我必须初始化实现以将其传递给抽象合约测试。一种方法是为每个实现设置多个测试类，其中每个测试类测试该实现的特定实例——但这似乎有点庞大且难以跟踪。

FWIW，我正在使用 JUnit 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:01:17.173

通常，该方法是使用抽象类的“可测试”子类在一次测试中测试抽象类的所有功能。然后为每个具体实现编写单独的测试，仅测试具体类中定义/实现的方法（不要重新测试具体类中的功能）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T22:54:33.293

如果我正确理解了您的需求，您希望运行相同的测试方法或具有相同接口的多个实现的方法。

我不知道如何在 JUnit 3 中很好地做到这一点。

如果您愿意升级到 JUnit 4，这可以通过使用参数化测试来完成。

对于在接口的两个实现上运行单个测试方法的简单示例，您的测试代码可能如下所示：

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;

import java.util.Arrays;
import java.util.Collection;

import static junit.framework.Assert.assertEquals;

// Tell JUnit4 to run it as a parametrized test.
@RunWith(Parameterized.class)
public class MyInterfaceContractTest {

    private MyInterface _toTest;

    // Load the test data into your test instance via constructor
    public MyInterfaceContractTest(MyInterface impl) {
        this._toTest = impl;
    }

    // Supply the test data, in this example just the two implementations you want to test.
    @Parameterized.Parameters
    public static Collection<Object[]> generateData() {
        return Arrays.asList(new Object[]{new MyInterfaceImpl1()}, new Object[]{new MyInterfaceImpl2()});
    }

    @Test
    public void testContract(){
        // assert whatever, using your _toTest field
    }
} 
```

在运行这个测试时，JUnit 将运行测试两次，调用带有参数列表中连续条目的构造函数。

如果您有更复杂的事情，例如对不同实现的不同期望，数据生成可能会返回包含多个元素的 Object 数组列表，然后构造函数将采用相应的多个参数。

如果您需要在测试方法之间重新初始化被测对象，您可能还想使用我在[这个相关问题](https://stackoverflow.com/questions/11080168/testing-multiple-interface-implementations-with-same-tests-junit4/11080466#11080466)中描述的技巧。

[我相信在TestNG](http://testng.org/doc/index.html)中可能会发生类似的事情，这可能是您升级路径的另一种选择。

# python - Python 是否具有用于取消缩进多行字符串的内置函数？

> ID：11157043
> 
> 赞同：58
> 
> 时间：2012-06-22T13:23:13.927
> 
> 标签：python, string, indentation

说我有字符串

```
s = """
    Controller = require 'controller'

    class foo
        view: 'baz'
        class: 'bar'

        constructor: ->
            Controller.mix @
""" 
```

字符串中的每一行现在都有一个全局 4 空格缩进。如果这个字符串是在一个函数中声明的，它将有一个 8 个空格的全局缩进，等等。

Python是否具有删除字符串全局左缩进的功能？

我希望该函数输出为：

```
Controller = require 'controller'

class foo
    view: 'baz'
    class: 'bar'

    constructor: ->
        Controller.mix @" 
```

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-22T13:24:35.153

不是内置函数，而是标准库中的函数： [`textwrap.dedent()`](http://docs.python.org/library/textwrap.html#textwrap.dedent)

```
>>> print(textwrap.dedent(s))

Controller = require 'controller'

class foo
    view: 'baz'
    class: 'bar'

    constructor: ->
        Controller.mix @ 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2019-03-06T13:21:41.950

我知道这个问题已经得到解答，但也有这种方式：

```
import inspect

def test():
    t = """
    some text
    """

    return inspect.cleandoc(t)

print(test()) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-03-17T12:55:09.593

`textwrap.dedent()`接近你想要的，但它没有实现你所要求的，因为它有一个领先的换行符。您可以包装`dedent`在一个函数中，该函数将前导换行符从`s`：

```
def my_dedent(string):
    if string and string[0] == '\n':
        string = string[1:]
    return textwrap.dedent(string) 
```

但是`textwrap.dedent()`，如果您从缩进多行语句生成 Python 源代码，则可以以特殊方式处理仅包含空格的行，其中尾随空格无关紧要。

但一般来说，`textwrap.dedent()`从空格比“最大缩进”更多的行中删除额外的空格、从所有空格行中删除空格以及在关闭之前删除任何空格是不合适的`"""`，特别是因为这种行为是[未记录的并且是通过不透明完成的正则表达式](http://hg.python.org/cpython/file/2.7/Lib/textwrap.py#l374)。

由于我还生成空格通常很重要的非 Python 源代码，因此我使用以下例程。它不处理 TAB 缩进，但它确实为您提供了您在不带换行符的情况下询问的输出，其中`textwrap.dedent()`失败。

```
def remove_leading_spaces(s, strict=False):
    '''Remove the maximum common spaces from all non-empty lines in string

Typically used to remove leading spaces from all non-empty lines in a
multiline string, preserving all extra spaces.
A leading newline (when not useing '"""\') is removed unless the strict
argument is True.

Note that if you want two spaces on the last line of the return value 
without a newline, you have to use the max indentation + 2 spaces before 
the closing """. If you just input 2 spaces that is likely to be the 
maximum indent.
    '''
    if s and not strict and s[0] == '\n':
        s = s[1:]
    lines = s.splitlines(True) # keep ends
    max_spaces = -1
    for line in lines:
        if line != '\n':
            for idx, c in enumerate(line[:max_spaces]):
                if not c == ' ':
                    break
            max_spaces = idx + 1
    return ''.join([l if l == '\n' else l[max_spaces-1:] for l in lines]) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-06-04T17:48:13.553

我可以通过回车来做到这一点：

```
s = """
    \r Controller = require 'controller'
    \r
    \rclass foo
    \r    view: 'baz'
    \r    class: 'bar'
    \r
    \r    constructor: ->
    \r        Controller.mix @
    \r""" 
```

# android - 获取 SQLiteCantOpenDatabaseException

> ID：11157049
> 
> 赞同：4
> 
> 时间：2012-06-22T13:23:38.150
> 
> 标签：android, sqlite, android-sqlite

在我的应用程序中，我的资产文件夹中有一个 SQLite 数据库的副本。据我所知，它工作正常。当我的应用程序第一次在我的模拟器中安装时，我收到如下错误：

> ```
> Failed to open the database. Closing it.
> 
> android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
> E/SQLiteDatabase(7516): at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
> E/SQLiteDatabase(29308):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1013)
> E/SQLiteDatabase(29308):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
> E/SQLiteDatabase(29308):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:962) 
> E/SQLiteDatabase(29308):  at com.guayama.database.URLDatabaseHelper.checkDBExists(URLDatabaseHelper.java:86) 
> E/SQLiteDatabase(29308):  at com.guayama.database.URLDatabaseHelper.createURLDB(URLDatabaseHelper.java:54)
> E/SQLiteDatabase(29308):  at com.guayama.database.URLDatabaseHelper.<init>(URLDatabaseHelper.java:38) 
> ```

这是我打开数据库的初始代码：

```
 SQLiteDatabase.openDatabase(mPath, null,SQLiteDatabase.CREATE_IF_NECESSARY); 
```

这是我尝试的另一种方法：

```
checkDB = SQLiteDatabase.openDatabase(mPath, null,
                SQLiteDatabase.OPEN_READONLY); 
```

我也试过用这个：

```
 SQLiteDatabase.openDatabase(mPath, null,SQLiteDatabase.NO_LOCALIZED_COLLATORS); 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:12:15.703

I always follow below step to copy my database from assets folder:

```
 private void copyDatabase() throws IOException{

        InputStream inputStream = context.getAssets().open(DB_NAME);
        String dbCreatePath = DB_PATH+DB_NAME;
        OutputStream outputStream = new FileOutputStream(dbCreatePath);
        byte[] buffer = new byte[1024];
        int length;
        while((length = inputStream.read(buffer))>0){
            outputStream.write(buffer,0,length);
        }
        outputStream.flush();
        outputStream.close();
        inputStream.close();
} 
```

Once it is copied i will check like below :

```
 private boolean checkDatabase(){
    SQLiteDatabase checkDB = null;
    try {
        String dbPath = DB_PATH+DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(dbPath, null,     
            SQLiteDatabase.OPEN_READWRITE);
    } catch (SQLiteException e) {
        // TODO: handle exception
    }
    if(checkDB!=null){
        checkDB.close();}
    return checkDB != null ? true:false;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T17:06:57.023

我遇到了类似的问题，不同之处在于数据库在我的 Eclipse Nexus 7 模拟器中工作，而不是在 Nexus 7 本身上工作。我下载了 Questoid，以便在我从 assets 文件夹中复制它之后查看我的数据库中的内容，但有一段时间该数据库甚至没有出现在文件资源管理器中。我继续做副本，最后它出现了。多次经历相同的过程后，我还没有弄清楚共同点是什么，但重复似乎是我的关键。现在我仍然需要弄清楚为什么当我在设备上安装应用程序时我的 Nexus 7 本身无法打开数据库。我遇到了同样的异常，但仅在设备本身上。

# ruby-on-rails - 如何在rails中选择分页？

> ID：11157052
> 
> 赞同：0
> 
> 时间：2012-06-22T13:23:49.043
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, pagination, kaminari

我有这样的代码

```
@pre_articles = Article.find(:all, :conditions => { :ART_ID => @linkla.map(&:LA_ART_ID)})
@articles = Kaminari.paginate_array(@pre_articles).page(params[:page]).per(15) 
```

它正在为我选择数据数组，但它很大，所以我决定添加分页。它选择了 15 个条目以供查看，而且对于我看到的每一页（在日志中），sql 如何像第一个 @pre_articles 一样选择所有数组。为了提高速度：如何在每一页上选择例如 0-15、15-30、30-45 等条目并将其发送以供查看？现在它正在选择所有数据，但根据我的需要进行支付

哦，对不起，重要！：

```
@linkla = LinkArt.where(:LA_ID => @la_typs.map(&:LAT_LA_ID), :LA_GA_ID => @genart.map(&:GA_ID)) 
@articles = Article.where(:ART_ID => @linkla.map(&:LA_ART_ID)).page(params[:page]).per(15) 
```

所以看起来我的查询。正如您所看到的，根据@linkla 结果，我选择了文章，并且链接 la 像以前一样选择了很多...如何做到这一点，他只为我的页面选择

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:26:19.773

使用 where 子句而不是条件 find 怎么样？

```
@articles = Article.where(:ART_ID: @linkla.map(&:LA_ART_ID)).page(params[:page]).per(15) 
```

生成的 SQL 查询将包含一个 LIMIT 子句以避免加载不必要的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:09:26.187

所述问题的解决方案：

```
LinkType
  has_many :links
  # let us assume there is a column called name 

# I wasn't sure about this model from your description
GenArt
  has_many :links
  # let us assume there is a column called name 

Link
  belongs_to :article
  belongs_to :link_type  
  belongs_to :gen_art
  # columns: id, article_id, link_type_id, gen_art_id

Article
  has_many :links 
```

假设您的 params 哈希包含`link_type_names`和`gen_art_names`

```
Article.joins(:links => [:link_type, :gen_art]).where(
  :links => {
    :link_type => {:name => params[:link_type_names]},
    :link_type => {:name => params[:gen_art_names]}
  }
).page(7).per(50) 
```

# c# - 如何在 C# 运行时查找控件的默认属性值

> ID：11157058
> 
> 赞同：5
> 
> 时间：2012-06-22T13:24:17.010
> 
> 标签：c#, .net

我有一个控件...任何**System.Windows.Forms.Control**。比如说。标签。

我希望为其名为“Enabled”的属性找到默认值（可以是任何属性）。我该怎么做？

1）看，在这种情况下，我们有一个标签。属性“已启用”的标签默认值为 true。

2）现在在运行时，假设我想知道属性“启用”的默认值是什么......我该如何找到？

3）首先我有一个我可以控制的对象。从该对象中，我只能获取属性“已启用”的当前值，但不能获取默认值。

解决这个问题的一种可能方法是：

1）在运行时识别控件的类型。2）使用其默认构造函数对其进行初始化。3）找到我们感兴趣的属性的值（这显然是默认值）并且那里..我们有默认值。

但是，在这种情况下..我事先不知道我的控制权。我所知道的是，它可以是来自**System.Windows.Forms.Control**的任何控件。那么我如何初始化它并获取它的对象呢？是否可以？

您有任何替代解决方案/更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:37:36.937

这是使用反射的好机会！这是一个方法，它应该为具有默认构造函数（公共，无参数）的任何类型获取任何属性的默认值：

```
public static object GetDefaultPropertyValue(Type type, string propertyName)
{
        if (type.GetConstructor(new Type[] { }) == null)
            throw new Exception(type + " doesn't have a default constructor, so there is no default instance to get a default property value from.");
        var obj = Activator.CreateInstance(type);
        return type.GetProperty(propertyName).GetValue(obj, new object[] { });
} 
```

请注意，如果您使用大量控件执行此操作，其中可能有多个单一类型，您可能希望缓存每种类型的结果，因为反射有点慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:30:02.843

您可以使用泛型实例化（在设计时）未知对象。

```
public class DefaultValueChecker<T> where T : System.Windows.Forms.Control, new()
{
    public bool DetermineDefaultValue() {
        var control = new T();
        return control.Enabled;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:30:05.170

这个一般是查不出来的。默认值可以是以下之一：

*   硬编码
*   依赖（可交换的）资源
*   取决于系统设置

使用您建议的方法，您最多可以找到硬编码的值。但是，您无法判断它们是否真的是硬编码的。

至于问题的第二部分，这可以通过反射来解决：看看[`Type`](http://msdn.microsoft.com/en-us/library/system.type.aspx)类（运行时类型信息）和[`Activator`](http://msdn.microsoft.com/en-us/library/system.activator.aspx)类（运行时类型实例化）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:46:31.903

您可以尝试使用反射并检查 DefaultValue 属性：

```
Type labelType = typeof(Label);
DefaultValueAttribute attr = (DefaultValueAttribute)labelType
    .GetProperty("AutoEllipsis")
    .GetCustomAttributes(typeof(Defaul tValueAttribute),true)
    .FirstOrDefault();
Console.WriteLine(attr.Value); 
```

但是，并不是所有的属性都标注了这个属性，所以并不是所有的默认值都可以通过这种方式获取。

# html - 如何打包 HTML/Metro 应用程序以在 Visual Studio 2012 之外部署

> ID：11157059
> 
> 赞同：0
> 
> 时间：2012-06-22T13:24:26.380
> 
> 标签：html, microsoft-metro, visual-studio-2012, winjs

有谁知道如何打包应用程序以在 Visual Studio 之外部署 HTML/JS Metro 应用程序。我一直听到对“商店”菜单项的引用，但我使用的是 Visual Studio 2012 RC 终极版，并且没有这样的顶级菜单项。

我还尝试使用带有给定清单文件（在构建中自动构建的文件）的命令行工具来创建 appx 文件，但在打包结束时会收到一些深奥的错误消息。

更新：命令行错误消息

```
MakeAppx pack /d  .\Release\AppX /p generic.AppX
The package path (/p) parameter is: "generic.AppX"
The content directory (/d) parameter is: ".\Release\AppX"
Enumerating files from directory ".\Release\AppX"
Packing 52 file(s) in ".\Release\AppX" (content directory) to "generic.AppX" (p    ackage name).
Using ".\Release\AppX\AppxManifest.xml" as the manifest for the package.
Adding ".\Release\AppX\images\splashscreen.png" to the package as a payload file.  Its path in the package is "images\splashscreen.png".
Adding ".\Release\AppX\images\logo.png" to the package as a payload file.  Its path in the package is "images\logo.png".
Adding ".\Release\AppX\images\smalllogo.png" to the package as a payload file.  Its path in the package is "images\smalllogo.png".
Adding ".\Release\AppX\images\storelogo.png" to the package as a payload file.  Its path in the package is "images\storelogo.png".
.........{Cut for brevity's sake}.........
MakeAppx : error: Package creation failed.
MakeAppx : error: 0x8007007b - The filename, directory name, or volume label syntax is incorrect. 
```

**更新：想通了（有点）！**

我不知道发生了什么，但我创建了一个空白的 XAML/C# Metro App。当您右键单击该项目时，您将获得一个 Store 选项。它仍然没有出现在我的 HTML/JS Metro 应用程序项目中，所以我创建了一个干净的 HTML/JS Metro 项目……它就是一个“商店”选项。

所以我再次打开我当前的非工作项目，右键单击该项目，它就是“存储”选项。我不知道这是否是 2012 年 RC 错误，但我将把这个问题留在这里，以防其他人遇到这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T08:19:29.847

它位于“项目”菜单下。

正如你所说，这可能是一个错误。VS2012 目前仍然有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T08:24:21.020

我也遇到了这个问题，不知道原因，但是文件映射对我有用，请尝试调用：

```
makeappx pack /v /o /f mappingfile.txt /p yourapp.appx 
```

mappingfile.txt 的内容：

```
[Files]
"App.xaml"                                                  "App.xaml"
"AppxManifest.xml"                                          "AppxManifest.xml"
"folder\file.ext"                                           "folder\file.ext"
"***.***"                                                   "***.***" 
```

# git - GitHub：我可以提供对已编译文件的访问而不对它们进行版本控制吗？

> ID：11157060
> 
> 赞同：8
> 
> 时间：2012-06-22T13:24:28.243
> 
> 标签：git, github, compiled

我使用 git 和 GitHub 维护文档。源文件是 Pdftex 的 TEX 文件以及用于编译的一些其他文件（如图形）。这些文件是版本化的。编译后，他们生成一个 PDF 文件（解释了我项目的所有细节）。

无需对生成的 PDF 文件进行版本控制，因为它是从源代码构建的。对编译后的 PDF 进行版本控制将是一大堆资源。

但是，我希望查看我的 GitHub 存储库的人可以立即阅读最后编译的 PDF，这样他们就不需要自己编译了。这种可能性会被那些只想快速浏览的人所欣赏，不是吗？

GitHub如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T13:29:11.283

~~您有一个下载页面，位于`http://github.com/user/project/downloads`。[如果需要，您可以使用他们的API](http://developer.github.com/v3/repos/downloads/)自动处理此问题。~~

**编辑：**正如[Thomas](https://stackoverflow.com/users/2338862/thomas "托马斯")所指出的，下载 API 已被[弃用](https://github.com/blog/1302-goodbye-uploads)，并已被另一个名为“[发布](https://github.com/blog/1547-release-your-software)”的工作流程所取代。然后，您可以将二进制文件附加到特定版本。

![拖放二进制](../Images/b7f5dd2abc3e3af7015e2610ba553fb5.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T13:28:50.200

是的，你可以这样做。转到“下载”选项卡并上传您的 PDF 文件。其他用户将能够看到它。

![就是那里的标签](../Images/945ba5286bc41be4a23f38668eff2069.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:32:14.107

据我所知，这不是可以按照您想要的方式完成的事情。想象一下有人将分支反转为旧版本。如果 PDF 没有版本化，它会发生什么？

git 在如何进行版本控制方面非常有效，除非您的 PDF 非常大，否则如果您在用户拉动时真的想要它，那么将它留在里面应该没问题。

个人建议不要在分支中包含 PDF，直接使用 GitHub 的下载页面即可。它允许您放置与您的项目相关的文件，这些文件不一定与源一起使用。开发人员通常使用它来放置他们的发布版本等的 tarball。

# c# - 如果属性为空，则抛出哪个/何时异常？

> ID：11157064
> 
> 赞同：3
> 
> 时间：2012-06-22T13:24:53.487
> 
> 标签：c#, exception, exception-handling

我有以下课程：

```
class Foo
{
    public Foo()
        : this(new List<Bar>())
    {
    }

    public Foo(IEnumerable<Bar> bars)
    {
        Bars = bars;
    }

    public IEnumerable<Bar> Bars { get; set; }

    public Bar GetSingleBar(Data data)
    {
        // this method returns a single Bar from the Bars property above
        // this method returns the Bar which matches the data parameter
        // this method should not return null
        // this method throws a NoBarsFoundException if
        //   (a) Bars is empty or
        //   (b) no bar in Bars matches the data
    }
} 
```

`Bars`如果是我该怎么办`null`？我应该在 setter 中`Bars`抛出异常还是应该在 中抛出异常`GetSingleBar`？（该方法`GetSingleBar`是唯一使用该`Bars`属性的方法。）

我应该扔一个`ArgumentException`, `ArgumentNullException`, `InvalidOperationException`, 还是`NoBarsFoundException`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:26:17.307

大概：`System.[ArgumentNullException](http://msdn.microsoft.com/en-us/library/system.argumentnullexception.aspx)`

> `Nothing`将空引用（在 Visual Basic 中）传递给不接受它作为有效参数的方法时引发的异常。

```
throw new ArgumentNullException("bars"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:28:12.593

I'd say when `Bars` is `null` and it should never be `null`, then you should throw an `InvalidOperationException`, since the operation `GetSingleBar` is invalid in the object's current state, and `Bars` is a property of your class.

`ArgumentNullException`, as the name says, should be thrown only when an argument is `null`.

I would consider making `Bars` `readonly` though (if possible).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:28:08.880

This is probably a good reason for not using a property setter, but instead a method, based on an answer from this question:

[Best practices: throwing exceptions from properties](https://stackoverflow.com/questions/1488472/best-practices-throwing-exceptions-from-properties)

This is because the property will become potentially unsafe in the form of the exception.

in lieu of bothering with that, `ArgumentNullException` is the standard when the supplied argument is null (for methods at least).

If you then try to use `Bars` before it is set or something, then I would throw an `InvalidOperationException` to signify that the object isn't in a valid state to cater for the action.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:29:10.790

我会在 GetSingleBar 方法中抛出 NoBarsFoundException。这样，您可以有另一个方法允许 GetSingleBar 为空。

如果您总是想防止 Bars 为 Null，也许您应该在构造函数中设置它并使其私有？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T13:31:41.707

如果一个空集合导致一个对象不一致，我会抛出 setter。

`Bars`您永远不知道将来会使用哪些其他新方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T13:31:50.357

您应该在设置值时抛出错误，因为那是发生“错误”的地方。

ArgumentNullException 也是正确的错误消息。

我遇到的一个问题是你应该有一个 set 方法和一个只读属性，因为大多数程序员不希望抛出异常。这是完全可以接受的——[属性和异常](https://stackoverflow.com/questions/1488472/best-practices-throwing-exceptions-from-properties)

# apache-flex - IntelliJ：重构导致整个文件重新格式化

> ID：11157073
> 
> 赞同：1
> 
> 时间：2012-06-22T13:25:39.073
> 
> 标签：apache-flex, intellij-idea, code-formatting

当我在 .mxml 文件中执行重构（例如提取变量）时，IntelliJ 会重新格式化整个`<mx:Script>`元素的内容。我们不希望它这样做，因为它使提交比它需要的更嘈杂。这反过来又使合并变得复杂。

部分问题是我们正在从 Eclipse 过渡到 IntelliJ——这通常是一个很大的改进——而且我们仍在整理我们的代码样式。因此，特定文件中实际存在的格式存在一些不一致。一个问题，在某种程度上早于我们的迁移。我们正在努力发布标准格式，这将有所帮助。但是我们不需要合并冲突。这对于 IntelliJ 来说是不合时宜的。我们如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:44:51.297

这是一个已知的错误，您可以在[http://youtrack.jetbrains.com/issue/IDEA-64985](http://youtrack.jetbrains.com/issue/IDEA-64985)跟踪它。

如果您将代码样式更改为在 Eclipse 和 IDEA 之间相似，这可能会有所帮助，这样重新格式化就不会改变它。

# java - 实现接口的困惑

> ID：11157081
> 
> 赞同：1
> 
> 时间：2012-06-22T13:26:20.523
> 
> 标签：java

我正在读一本书，其中作者使用了这样的代码

```
public class Pool<T> {

    public interface PoolObjectFactory<T> {     
        public T createObject();        
     } 

    private final List<T> freeObjects;
    private final PoolObjectFactory<T> factory;
    private final int maxSize;

    public Pool(PoolObjectFactory<T> factory, int maxSize) {

        this.factory = factory;
        this.maxSize = maxSize;
        this.freeObjects = new ArrayList<T>(maxSize);

    } //end of constructor

} //end of class Pool<T> 
```

然后他使用了类似这样的代码

```
PoolObjectFactory<KeyEvent> factory = new PoolObjectFactory<KeyEvent>() {

    @Override
    public KeyEvent createObject() {                
        return new KeyEvent();                          
    } //end of createObject()

};

keyEventPool = new Pool<KeyEvent>(factory, 100); 
```

我想在`PoolObjectFactory<KeyEvent> factory = new PoolObjectFactory<KeyEvent>() {..};`他没说的那条线上问`implements PoolObjectFactory`。为什么？当您使用界面时，您使用`implements`关键字？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:32:20.183

作者使用了一种称为[**匿名类**](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)的特殊构造，它使用以下语法定义：

```
new interface-name () { class-body } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:32:00.600

`implements`只有在定义命名类时才需要。
在这种情况下，作者使用了一个实现接口的匿名（未命名）内部类。

编辑：对于背景，很多人没有意识到/欣赏的是编译器将为匿名内部类生成一个 .class 文件。例如，下面会生成一个 Fred.class 文件和一个 Fred$1.class 文件：

```
public class Fred {
    public void sayHelloFred() {
        Object o = new MouseAdapter() {
        };
    }
} 
```

所有这些 .class 文件仍然需要在运行时传送和加载，就像它们被命名为类一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:32:58.217

您正在这里创建一个匿名类。不需要 implements 关键字。请注意，在这种情况下，您使用新的 PoolObjectFactory，这清楚地表明了您正在实现的类 - 无需使用工具再次表明它。

另一方面，如果您要创建子类，则需要说明它是父接口，然后您需要 implements 关键字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:33:28.530

作者使用了一个匿名类。在这种情况下，创建一个没有标识符的类，并且只创建一个实例并将其分配给`factory`变量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T13:34:13.217

*在定义*一个类时使用implements关键字来表示该类将满足接口的要求。在有问题的行中，作者*实例化*了一个匿名类。

# c - Why should I include an header file? And how #include actually works?

> ID：11157082
> 
> 赞同：4
> 
> 时间：2012-06-22T13:26:28.433
> 
> 标签：c, header-files

At first, I was writing my function in an .h file and then include it with `#include "myheader.h"`. Then, someone said me that it's better to add to these files only functions prototypes and to put the real code in a separate .c file. Now, I'm able to compile more .c files to generate only an executable, but at this point I can't understand why I should add the header files if the code is in another file.

Moreover, I had a look to standard C libraries (like `stdlib.h`) in the system and it seemed to me to store only structure definitions, constants and similar... I'm not so good with C (and to be honest, stdlib.h was almost Chinese to me, no offense for Chinese of course :) ), but I didn't spot any single line of 'operative' code. However, I always just include it without adding anything else and I compile my files as if the 'code' was actually there.

Can someone please explain me how do these things work? Or, at least, point me to a good guide? I searched on Google and SO, also, but didn't find anything that explains it clearly.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-22T13:50:26.730

当您编译 C 代码时，编译器必须实际知道存在具有定义名称、参数列表、返回类型和可选修饰符的特定函数。所有这些东西都称为函数签名，并且在头文件中*声明*了特定函数的存在。有了这些信息，当编译器找到对该函数的调用时，它就会知道要查找哪种类型的参数，可以控制它们是否具有适当的类型，并准备好一个结构，该结构将在代码实际执行之前被压入堆栈跳转到你的函数实现。但是编译器不必知道函数的实际实现，它只是在目标文件中为所有函数调用放置一个“占位符”。（注意：每个 c 文件都编译为一个目标文件）。`#include`simple 获取头文件并将该`#include`行替换为文件的内容。

编译后，构建脚本将所有目标文件传递给*链接器*。链接器将解析所有函数“占位符”，找到函数实现的物理位置，让它们位于您的目标文件、框架库或 dll 中。它简单地将信息放在所有函数调用中可以找到函数实现的位置，因此您的程序将知道当它到达您的函数调用时在哪里继续执行。

说了这么多，应该清楚为什么不能将函数*定义*放在头文件中。如果稍后您`#include`将此标头放入多个 c 文件中，它们都会将函数实现编译为两个单独的目标文件。编译器可以很好地工作，但是当链接器想要将所有内容链接在一起时，它会找到该函数的*两个*实现并给你一个错误。

`stdlib.h`和朋友的工作方式相同。可以在框架库中找到其中声明的函数的实现，即使您不知道，编译器也会“自动”链接到您的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:32:53.920

C 语言（与 C++ 一起）使用一种相当过时的策略来使编译器知道在别处定义的函数。

这个策略是这样的：函数的签名等（这些东西在 C 中称为*声明*）进入一个名为 header 的特殊文件，并且*每个*想要使用它们的其他文件几乎都应该将该 header 包含在文件中（实际上，`#include`指令只是告诉编译器包含标题的文字），以便编译器再次看到函数声明。

其他语言以不同的方式解决这个问题：编译器查看所有源代码，并记住已编译类本身的元数据。

C 中使用的策略将查找所有依赖项的任务从编译器转移到了开发人员；这是旧时代计算机又小又笨又慢的遗留问题，因此开发人员的这种帮助非常有价值。

尽管这种策略有很多缺点，而且除了理论上现在可以更改之外，标准不会更改，因为已经以这种风格编写了千兆字节的代码。

tl; dr：这是 70 年代的遗产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:43:42.723

在 C 中，需要在调用函数之前声明函数。需要这样做的原因是，在 70 年代，首先解析一个文件的所有符号然后再解析它以实际编译代码会花费太多时间。如果在调用所有函数之前声明所有函数，一次解析就足够了。然而，在现代系统中，我们不再面临这些限制，这就是现代语言没有这个要求的原因。

Imagine you have 2 files `a.c` `b.c` in your project. You implement a function `foo` which you want to use in both files. You can't just define the function in `a.c` and use it in `b.c` since you have to declare a function before you call it. So you would add a line `void foo();` to `b.c`. But everytime you change the signature of your function in `a.c` you would have to change the declaration in `b.c`. To circumvent this issue it is standard strategy in C to declare all functions your file implements in a seperate header file (in this case `a.h`. The header file is then included by all other files who want to use that code (so `b.c` would use this: `#include "a.h"`).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:03:03.200

An`#include`是一个预处理器指令，它使文件以文本方式插入到`#include`发生的位置。

链接多个包含相同头文件的 .c 文件时，必须注意避免包含多个头文件（以文本形式多次插入头文件）。、`#ifndef`和预处理器指令`#define`可`#endif`用于防止多重包含。

```
#ifndef MY_FILE_H
#define MY_FILE_H

/* This code will not be included more than once. */

#endif /* !MY_FILE_H */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:36:06.457

> 如果代码在另一个文件中，我不明白为什么要添加头文件。

头文件包含在另一个文件中定义的函数的*声明*，这是*调用*函数的代码正确编译所必需的。

例如，假设我编写以下代码：

```
int main(void)
{
  double *foo = malloc(sizeof *foo * 10);
  if (foo)
  {
    // do something with foo
    free (foo);
  }
  return 0;
} 
```

`malloc`是一个标准库函数，它动态分配内存并返回一个指向它的指针。的返回类型`malloc`是`void *`，它的任何值都可以分配给任何其他指针类型。 `free`是另一个释放通过 分配的内存的标准库函数，`malloc`它的返回类型是`void`（IOW，无返回值）。

但是，编译器不会自动知道什么`malloc`或`free`返回（或不返回）；它需要在当前范围内查看两个函数的*声明*，然后才能正确转换函数调用。在 C89 和更早的标准下，如果调用函数时没有在范围内声明，编译器会假定函数返回`int`; 因为`int`不兼容`double *`（你不能在没有演员表的情况下直接将一个分配给另一个），你会得到一个“不兼容的分配”诊断。在 C99 及更高版本下，根本不允许隐式声明。无论哪种方式，编译器都不会翻译代码。

我需要添加行

```
#include <stdlib.h> 
```

其中包括文件开头的和（以及一堆其他东西）的声明 *。*`malloc``free`

您不想将函数*定义*（或变量定义）放在头文件中的原因有很多。假设您`foo`在标题中定义函数 ah 您包含`a.h`在文件`a.c`和`b.c`. 每个文件都可以单独编译，但是当您尝试将它们链接在一起以构建库或可执行文件时，您将从链接器收到“多重定义”错误——您最终创建了两个单独的函数实例同名，这是一个禁忌。*变量*定义 也是如此。

它也不能很好地扩展。如果您将一堆函数放在它们自己的头文件中并将它们包含在一个源文件中，那么您将所有这些函数都翻译在一个大文件中。此外，如果您只更改源文件或一个头文件中的代码，则每次重新编译 .c 文件时仍会重新编译*所有内容。**通过将每个函数放在它自己的 .c 文件中，您可以通过仅重新编译需要*重新编译的文件来减少总体构建时间。

# makefile - Makefile: How to assign a command's output and exit code to a variable?

> ID：11157083
> 
> 赞同：2
> 
> 时间：2012-06-22T13:26:35.187
> 
> 标签：makefile

I am searching for a way to get the output and the exit code of a command to variables in a makefile.

Basicly I want this: (bash)

```
output=$(whoami)
returnval=$?
echo "OUT:"
echo $output
echo "RET:"
echo $returnval 
```

to be in a makefile

note: should work in a rule section

Thanks

EDIT: SOLVED

```
$(eval OUTPUT_RC="$(shell whoami;echo $$?)")
$(eval OUTPUT="$(shell echo $(OUTPUT_RC) | sed -e "s/^\(.*\)\(.\{2\}\)$$/\1/")")
$(eval RC="$(shell echo $(OUTPUT_RC) | sed -e "s/^.*\(.\)$$/\1/")")
echo $(OUTPUT)
echo $(RC) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-12T08:49:03.567

如果你无论如何都要使用`eval`，让它打印你可以`eval`直接打印的东西。

```
$(eval $(shell echo OUTPUT_RC=`whoami`; echo $$?))
OUTPUT=$(word 1,$(OUTPUT_RC))
RC=$(word 2,$(OUTPUT_RC)) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T13:42:53.877

GNU make 提供了这个`shell`功能，如：

```
OUTPUT=$(shell whoami)
OUTPUT_RC=$(shell whoami; echo $$?) 
```

# windows - Waiting for vertical blank in kernel mode?

> ID：11157086
> 
> 赞同：2
> 
> 时间：2012-06-22T13:26:43.813
> 
> 标签：windows, kernel, interrupt, wdf, kmdf

I'm writing a driver that needs synchronization with vertical blank interrupt to send some data down the USB pipe.

In user-mode there are Direct X functions available for this like [IDXGIOutput::WaitForVBlank](http://msdn.microsoft.com/en-us/library/windows/desktop/bb174559%28v=vs.85%29.aspx "IDXGIOutput::WaitForVBlank") and few older ones. I am not able to use them from kernel. I found another interface in Windows 8 SDK: [D3DKMTWaitForVerticalBlankEvent](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547265%28v=vs.85%29.aspx) which even has a kernel header (the header is in /km/ folder of the SDK), but it requires `gdi32.lib` which a user-mode library and linking with it cripples the driver.

**Is there any way I can wait or get a notification about vertical blank occurence (without polling)?**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T21:36:02.683

您可以使用命名事件。

*   在您的驱动程序中创建一个命名事件和一个内核线程以在执行实际工作之前等待该事件。
*   在用户模式助手应用程序/服务中打开命名事件并创建一个线程来调用 IDXGIOutput::WaitForVBlank 然后立即设置命名事件。

当然，我想你很久以前就解决了这个问题并继续前进......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T14:06:14.990

是否可以接受驱动程序的用户模式部分？您可以在用户模式下拥有一个等待 VBI 的辅助进程，并让该进程以某种方式触发您的 KM 驱动程序。

# javascript - jQuery not working but Javascript will

> ID：11157088
> 
> 赞同：0
> 
> 时间：2012-06-22T13:26:44.390
> 
> 标签：javascript, jquery

I feel really silly asking this, but it is completely blowing my mind why my link to the Google jQuery api isn't working. I know my code isn't broken because it works here: [http://jsfiddle.net/jefffabiny/8p46d/](http://jsfiddle.net/jefffabiny/8p46d/)

Here are my script tags in my index file:

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="js/functions.js"></script> 
```

Other than that, the doctype is HTML5, and I'm working on an local xampp install. I bet I over looked something small; does anyone see the problem here? Thanks.

**EDIT** Actually, after I submitted this post I got an alert at the top of my browser saying stack overflow requires javascript from an external domain to run properly, but it was being blocked. I guess that's my problem, but does anyone know how to fix that?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:28:08.527

Are you executing your code after DOM is ready? jsFiddle does!

Try this:

```
$(function() {
    $('.test').on("click", function(){
        $(this).css('color', 'blue');
    });​
}); 
```

# linux - Linux Script - Extension retained

> ID：11157090
> 
> 赞同：2
> 
> 时间：2012-06-22T13:26:52.500
> 
> 标签：linux, bash

I'm a newbie to linux scripting and am having an issue with a script that I got from the web and am trying to modify.

Here is the script

```
#!/bin/bash
if (($# ==0))
then
    echo "Usage: flvto3gp [flv files] ..."
    exit
fi

while (($# !=0 ))
do 
    ffmpeg -ss 00:00:10 -t 1 -s 400x300 -i $1 -f mjpeg   /home/zavids/rawvids/thumbs/$1.jpg
    shift
done
echo "Finished"
echo "\"fakap all those nonsense!\""
echo "" 
```

So I'm grabbing a screenshot from a video and saving it as a jpeg. The problem is the extension of the video file is retained so finished file is video.flv.jpg (for example). How can I get rid of that video extension?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:38:20.163

更改此行

```
ffmpeg -ss 00:00:10 -t 1 -s 400x300 -i $1 -f mjpeg   /home/zavids/rawvids/thumbs/$1.jpg 
```

对此

```
ffmpeg -ss 00:00:10 -t 1 -s 400x300 -i $1 -f mjpeg /home/zavids/rawvids/thumbs/${1%.*}.jpg 
```

这会在使用`bash`参数扩展创建输出文件的名称之前从输入文件中删除扩展名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:39:10.270

你可以尝试使用这个：

```
${string%substring} 
```

它从 $string 后面删除 $substring 的最短匹配。

对于您的情况：

```
${1%.flv} 
```

此代码将从您的第一个参数的末尾替换 .flv。

您也可以在这里获得很多详细信息：http: [//tldp.org/LDP/abs/html/string-manipulation.html](http://tldp.org/LDP/abs/html/string-manipulation.html)

# java - 我如何在 android 中启动应用程序信息屏幕？

> ID：11157102
> 
> 赞同：5
> 
> 时间：2012-06-22T13:27:39.370
> 
> 标签：java, android

我想以`Settings -> Application -> manage application -> Application info`编程方式开始管理应用程序 ( ) 屏幕。我做不到。谁能帮帮我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:30:22.377

按照这个[链接](https://stackoverflow.com/questions/4421527/start-android-application-info-screen)

在 Android 2.3 中，您可以在 ACTION_APPLICATION_DETAILS_SETTINGS Intent 上使用 startActivity() 和适当的 Uri，以调出应用的“管理”屏幕

或者

```
private static final String SCHEME = "package";

private static final String APP_PKG_NAME_21 = "com.android.settings.ApplicationPkgName";

private static final String APP_PKG_NAME_22 = "pkg";

private static final String APP_DETAILS_PACKAGE_NAME = "com.android.settings";

private static final String APP_DETAILS_CLASS_NAME = "com.android.settings.InstalledAppDetails";

public static void showInstalledAppDetails(Context context, String packageName) {
    Intent intent = new Intent();
    final int apiLevel = Build.VERSION.SDK_INT;
    if (apiLevel >= 9) { // above 2.3
        intent.setAction(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
        Uri uri = Uri.fromParts(SCHEME, packageName, null);
        intent.setData(uri);
    } else { // below 2.3
        final String appPkgName = (apiLevel == 8 ? APP_PKG_NAME_22
                : APP_PKG_NAME_21);
        intent.setAction(Intent.ACTION_VIEW);
        intent.setClassName(APP_DETAILS_PACKAGE_NAME,
                APP_DETAILS_CLASS_NAME);
        intent.putExtra(appPkgName, packageName);
    }
    context.startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-18T13:47:46.867

从**API 级别 9** (Android 2.3) 开始，您可以使用[android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS](http://developer.android.com/reference/android/provider/Settings.html#ACTION_APPLICATION_DETAILS_SETTINGS)启动 Intent 。因此：

```
packageName = "your.package.name.here"

try {
    //Open the specific App Info page:
    Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
    intent.setData(Uri.parse("package:" + packageName));
    startActivity(intent);

} catch ( ActivityNotFoundException e ) {
    //e.printStackTrace();

    //Open the generic Apps page:
    Intent intent = new Intent(android.provider.Settings.ACTION_MANAGE_APPLICATIONS_SETTINGS);
    startActivity(intent);

} 
```

# ruby-on-rails - CodeRay 样式表

> ID：11157105
> 
> 赞同：4
> 
> 时间：2012-06-22T13:27:42.740
> 
> 标签：ruby-on-rails, ruby, coderay

```
require 'coderay'
puts CodeRay.scan('puts "Hello, world!"', :ruby).page 
```

此代码将使用 CSS（类）打印完整的 HTML 页面。

`CodeRay.scan('puts "Hello, world!"', :ruby).div`
我可以使用How can I print only CSS part? 仅打印彩色代码？

中有`stylesheet`方法`CodeRay::Encoders::HTML::Output`，但我该如何调用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T23:34:40.383

与 CodeRay gem 一起安装的`coderay`命令可以为您打印出样式表。

```
$ coderay stylesheet > coderay.css 
```

或者你可以在代码中用它做点什么。

```
require 'coderay'

style = CodeRay::Encoders[:html]::CSS.new(:default).stylesheet
puts style 
```

# jquery - jquery bgcolor 与 tbody 匹配

> ID：11157107
> 
> 赞同：0
> 
> 时间：2012-06-22T13:27:50.960
> 
> 标签：jquery

我有下表。我正在尝试让 tbody 列 bgcolors 与 theader bg 颜色匹配。

你能帮忙吗，因为我无法做到这一点？

谢谢并恭祝安康，

> ```
> <table id="one" border="1">  <thead>  <tr>
>  <th style="background-color:Lime">Header 1</th>
>  <th>Header 2</th>  </tr>  </thead>  <tbody>  <tr>
>  <td>row 1, cell 1</td>
>  <td>row 1, cell 2</td>  </tr>  <tr>
>  <td>row 2, cell 1</td>
>  <td>row 2, cell 2</td>  </tr>  </tbody>  </table>   
>  <script language="javascript" type="text/javascript">
>      $(document).ready(function () {
> 
>          $('#one thead tr th').each(function () {
> 
>              var col1 = $(this).css("background-color");
>              var index = $(this).closest("th").prevAll("th").length;
> 
>              assigncolr(col1, index);
>          });
>      });
> 
>     function assigncolr(col,index){   $('#one tbody tr').each(function () {
>     $(this).find('td :nth-child(' + index + ')').css("background-color", col);
> 
>         }
>           )
>               };
> 
>  </script> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:44:05.230

根据[jQuery API](http://api.jquery.com/nth-child-selector/)：“*因为 jQuery 的 :nth-child(n) 实现严格源自 CSS 规范，所以 n 的值是“1-indexed”，这意味着计数从 1 开始。* ”

第二个问题是选择器之间的空格 ( `) 。你需要消除它。`td``nth-child``

 `改变：

```
$(this).find('td :nth-child(' + index + ')').css("background-color", col); 
```

到：

```
$(this).find('td:nth-child(' + (index + 1) + ')').css("background-color", col); 
```

这应该可以解决问题。

工作小提琴：http: [//jsfiddle.net/WNscb/](http://jsfiddle.net/WNscb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:52:21.567

更短更简单一点 - [http://jsfiddle.net/9X4FP/1/](http://jsfiddle.net/9X4FP/1/)

```
var cols = $("th").length;

$("tbody td").each(function() {
    var order = $("td").index(this) % cols;
    var color = $("th:eq(" + order + ")").css("background-color");

    $(this).css("background-color", color);
}); 
````

# python - OpenCL 从 RAM 中删除数据

> ID：11157108
> 
> 赞同：0
> 
> 时间：2012-06-22T13:27:55.657
> 
> 标签：python, memory-management, opencl

我正在使用 OpenCL 将 python 中的数据处理到我的图形卡上。我有一个内核用 n 个线程处理数据。在这一步之后，我将结果复制回 python 和一个新的内核。（数据非常大 900MB，结果是 100MB） 结果我需要计算大约 200MB 的三角形。所有数据都超出了我显卡上的内存。

在第一个内核完成它的工作后，我不再需要前 900MB。

我的问题是，如何从显卡中删除第一个数据集（存储在一个数组中）？

这里有一些代码：

```
#Write
self.gridBuf = cl.Buffer(self.context, cl.mem_flags.READ_ONLY | cl.mem_flags.COPY_HOST_PTR, hostbuf=self.grid)
#DO PART 1
...
#Read result
cl.enqueue_read_buffer(self.queue, self.indexBuf,index).wait() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:36:24.007

您将需要使用您通过调用 clCreateBuffer 创建的 mem 对象调用[clReleaseMemObject 。](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clReleaseMemObject.html)如果在此调用中引用计数变为零，则底层设备/共享内存将由实现释放。

# java - Web service returns an empty array for string array members

> ID：11157110
> 
> 赞同：2
> 
> 时间：2012-06-22T13:27:56.187
> 
> 标签：java, web-services, jax-ws

I have a Java web service with code below:

```
@WebService
public class MyService {

    @WebMethod
    public String[] method1() {
        String[] strArray = new String[2];
        strArray[0] = "method1 array item 1";
        strArray[1] = "method1 array item 2";
        return strArray;
    }

    @WebMethod
    public MyComplexType method2() {
        return new MyComplexType();
    }
} 
```

method2() returns a complex type which contains a string array as class member (code is below):

```
public class MyComplexType {

    public String[] InternalArray;

    public MyComplexType() {
        InternalArray = new String[2];
        InternalArray[0] = "complex type array item 1";
        InternalArray[1] = "complex type array item 2";
    }
} 
```

and the result wsdl contains array_of_xsd_string for this member like.

> element name="InternalArray " nillable="true" type="impl:ArrayOf_xsd_string"

when i create client code with wsdl2java, service returns an empty ArrayOf_xsd_string object.

also i have created C# client, webreference returns an empty string array.

briefly, i must return a string array inside a complex type, but service returns an empty array.

# ios - How to get .ipa file with PhoneGap for iOS?

> ID：11157111
> 
> 赞同：6
> 
> 时间：2012-06-22T13:27:56.213
> 
> 标签：ios, cordova, sencha-touch, sencha-touch-2

I have developed an PhoneGap application using Sencha Touch 2 in Android. Now I want to develop the same in iOS without changing the code. I tried using PhoneGap Build but it was asking for Apple developer registration or developing Xcode using MacBook. Is there any other way that I can generate an .ipa file using Windows XP, PhoneGap?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T18:13:35.583

如果你的应用程序真的只是一个纯粹的 PhoneGap 应用程序——所有的 HTML、JavaScript 等并且没有自定义的 Objective-C 东西，[phonegap.com 提供了一个构建服务](https://build.phonegap.com/)，它将为他们支持的所有平台构建你的应用程序。当然，您仍然需要注册为 iOS 开发人员并支付 99 美元才能获得分发证书。根据[iOS 构建说明](https://build.phonegap.com/docs/ios-builds)，您需要一台 Mac 来设置您的证书等。因此，实际上，您至少需要不时*访问Mac，但是一旦您完成了所有设置，您应该能够使用该服务进行构建。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T22:24:43.160

*SenchaTouch 2 将使用 Windows、Mac 或 Linux PC 的*[SenchaTouch SDK 工具](http://www.sencha.com/products/sdk-tools/download) （仍处于测试阶段）直接构建原生 Android 和 iPhone 应用程序。我在 Windows XP 和 7 上执行此操作。

 *在您使用 Apple 设置（付费）开发人员帐户、创建开发人员证书并在您的 PC 上设置 PKCS#12 密钥库^((*))之后，您设置了一个针对 iOS 的 packager.json 并使用：

```
> sencha app build native

[INFO] Deploying your application to <your-app-path-here>\build\package
[INFO] Copied sdk/sencha-touch.js
[INFO] Copied app.js
[INFO] Copied resources/css/app.css
[INFO] Copied resources/images
[INFO] Copied resources/icons
[INFO] Copied resources/startup
[INFO] Resolving your application dependencies (file:///<your-app-path-here>/index.html)
[INFO] Found 236 dependencies. Concatenating all into '<your-app-path-here>\build\package\app.js'
[INFO] Processed sdk/sencha-touch.js
[INFO] Minifying sdk/sencha-touch.js
[INFO] Processed app.js
[INFO] Minifying app.js
[INFO] Minifying resources/css/app.css
[INFO] Minified sdk/sencha-touch.js
[INFO] Minified app.js
[INFO] Minified resources/css/app.css
[INFO] Generated app.json
[INFO] Embedded microloader into index.html
[INFO] Packaging your application as a native app...
[INFO] The application was successfully packaged
The application was successfully signed
To run iOS simulator you need to use Mac OS X 
```

制作 iOS 应用程序（将输出为名为的*文件夹**`build\MyApp.app`*）。

(*) 使用[Portecle](http://portecle.sourceforge.net/)维护您的密钥库。*

# excel - VBA - 运行时错误 1004 - 无法保存文档

> ID：11157127
> 
> 赞同：2
> 
> 时间：2012-06-22T13:29:08.177
> 
> 标签：excel, vba, runtime-error, save

我得到的实际错误是

“运行时错误‘1004’：

文档未保存。”

然后当我点击调试时，它会把我带到这条线上

```
ActiveWorkbook.Save 
```

我有一个巨大的 VBA 宏，但我遇到了一些问题。宏从一个巨大的工作簿开始，其中包含大约 75 个数据表。它从第一页开始，读取工作表的名称以确定要在数据上运行的模型，创建一个新工作簿，进行计算并创建图形，然后在继续下一个输入工作表之前保存工作簿。除了保存新工作簿之外，所有这些都可以正常工作。我正在运行 4 种不同的模型，其中 2 种正确保存。但是，对于另外两个，我在尝试保存它们时都会遇到此错误。

```
OutputFolder = "location of output file" 
If Dir(OutputFolder, vbDirectory) = "" Then
MkDir OutputFolder
End If

Workbooks.Open Filename:="location of input file"    '(this is a path to the file)

Workbooks.Open Filename:="location of lookup table" '(another path)
number_of_reports = Workbooks(InputFile).Sheets.Count
Workbooks(InputFile).Activate 

For i = 1 To number_of_reports

ReportID = ActiveSheet.Name 'get 3 part ID
ID_Lookup = Split(ActiveSheet.Name, "-") 'seperate into individual parts

Workbooks("LookupTable").Activate

'use lookup table
Sheets("CompanyLookup").Select
CompanyID = Range("A" & (ID_Lookup(0) + 1))
CompanyName = Range("B" & (ID_Lookup(0) + 1))

Sheets("CategoryLookup").Select
CategoryID = Range("A" & (ID_Lookup(1) + 1))
CategoryName = Range("B" & (ID_Lookup(1) + 1))

Sheets("ModelLookup").Select
ModelID = Range("A" & (ID_Lookup(2) + 1))
ModelName = Range("B" & (ID_Lookup(2) + 1))

Workbooks(InputFile).Activate
y = Range("B1").End(xlToRight).Column
Workbooks(InputFile).Sheets(ReportID).Select

'name of the workbook
SaveID = CategoryName & "_" & ModelName & "_" & FileID

'create company folder if not there already
Output = "location of output" & CompanyName
If Dir(Output, vbDirectory) = "" Then
MkDir Output
End If

'create model folder if not there already
Output = "location of put" & CompanyName & "\" & ModelName
If Dir(Output, vbDirectory) = "" Then
MkDir Output
End If

'where to save workbook
Dim SaveLocation As String
SaveLocation = Output & "\" & SaveID & ".xlsx"

'save workbook
Dim NewBook As Workbook
'create WB for output
Set NewBook = Workbooks.Add
With NewBook
    .Title = ReportID
    .Subject = ReportID
    .SaveAs Filename:=SaveLocation
End With

'decide which model to run
If ModelID = 1 Then
Call Regression

ElseIf ModelID = 2 Then
Call VolMix

ElseIf ModelID = 3 Then
Call ProdMix

ElseIf ModelID = 4 Then
Call AvgPrice

End If

Workbooks(SaveID).Activate
Range("A1").Select

deletecheck = Workbooks(SaveID).Sheets.Count

'delete extra sheets
If deletecheck > 3 Then

Call DeleteSheet("Sheet1")
Call DeleteSheet("Sheet2")
Call DeleteSheet("Sheet3")

End If

ActiveWorkbook.Save   'THIS IS WHERE I'M GETTING THE ERROR
ActiveWorkbook.Close

Workbooks(InputFile).Sheets(ReportID).Activate

If i <> number_of_reports Then
ActiveSheet.Next.Select
End If
Next i 
```

所以模型 2 和 4 是在他们试图被拯救时给我带来问题的那些。，其他的则不是。我查看了每个模型的代码，我找不到导致这种情况的 4 个模型之间的任何区别，但显然有问题。有什么想法或建议吗？

# cygwin - Aptana：cygwin 窗口中的安全 FTP

> ID：11157133
> 
> 赞同：0
> 
> 时间：2012-06-22T13:29:14.357
> 
> 标签：cygwin, aptana

我正在运行 Aptana 3 来开发 Web 应用程序。在 IDE 的底部有一个带有 Cygwin 文件系统接口的面板，包括在 Windows 顶部运行的 Unix 命令。这很有用，因为这意味着我可以使用 ftp 将我的 Web 文件上传到远程服务器。

但是 sftp 客户端 (FTP + TLS) 不包含在此发行版中。任何人都知道将其添加到此 aptana cygwin 插件环境的简单方法？

谢谢您的帮助，

约翰·戈切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:24:28.037

SFTP 是 openssh 包的一部分。有关更多详细信息，请参阅[超级用户](https://superuser.com/questions/376819/sftp-client-with-cygwin-is-it-possible "在超级用户上")的此答案。

# php - 指定的控制器无效（） - Zend 框架

> ID：11157134
> 
> 赞同：1
> 
> 时间：2012-06-22T13:29:18.710
> 
> 标签：php, apache, zend-framework, centos, httpd.conf

我已遵循以下[文档](http://framework.zend.com/manual/en/learning.quickstart.create-model.html)，但遇到了问题。*我以localhost/epos*的身份访问 url，并且索引页面工作正常。但如果我做*localhost/epos/pgeline2d*我会得到错误

```
An error occurred
Page not found
Exception information:

Message: Invalid controller specified (epos)
Stack trace:

#0 /opt/eposdatatransfer/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http))
#1 /opt/eposdatatransfer/library/Zend/Application/Bootstrap/Bootstrap.php(97): Zend_Controller_Front->dispatch()
#2 /opt/eposdatatransfer/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#3 /opt/eposdatatransfer/public/index.php(26): Zend_Application->run()
#4 {main}  

Request Parameters:

array (
  'controller' => 'epos',
  'action' => 'guestbook',
  'module' => 'default',
) 
```

我的 SQLLite 数据库中的表名称为“PGE_Line2D”。以下是我的文件：

httpd.conf

```
Alias /epos "/opt/eposdatatransfer/public"

<Directory "/opt/eposdatatransfer/public">
       Options Indexes MultiViews FollowSymLinks
       AllowOverride All
       Order allow,deny
       Allow from all
</Directory> 
```

应用程序/配置/application.ini

```
[production]
phpSettings.display_startup_errors = 0
phpSettings.display_errors = 0
includePaths.library = APPLICATION_PATH "/../library"
bootstrap.path = APPLICATION_PATH "/Bootstrap.php"
bootstrap.class = "Bootstrap"
appnamespace = "Application"
resources.frontController.controllerDirectory = APPLICATION_PATH "/controllers"
resources.frontController.params.displayExceptions = 0
phpSettings.date.timezone = "Europe/London"
resources.db.adapter = "PDO_SQLITE"
resources.db.params.dbname = APPLICATION_PATH "/../data/db/h3111142.db"

[staging : production]

[testing : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1

[development : production]
phpSettings.display_startup_errors = 1
phpSettings.display_errors = 1
resources.frontController.params.displayExceptions = 1 
```

应用程序/bootstrap.php

```
class Bootstrap extends Zend_Application_Bootstrap_Bootstrap  {} 
```

应用程序/视图/脚本/index/index.phtml

```
hello 
```

应用程序/视图/脚本/pge-line-2d/index.phtml

```
<br /><br />
<div id="view-content">
    <p>View script for controller <b>PgeLine2D</b> and script/action name <b>index</b></p>
    <?php foreach ($this->entries as $entry): ?>
    <dt><?php echo $this->escape($entry->pga_id) ?></dt>
    <?php endforeach ?>
</div> 
```

应用程序/模型/PGLine2D.php

```
class Application_Model_PgeLine2D
{
    protected $_PGA_Id ;
    protected $_PGA_Name ;

    public function __construct(array $options = null)
    {
        if (is_array($options)) {
            $this->setOptions($options);
        }
    }

    public function __set($name, $value){
        $method = 'set' . $name;
        if (('mapper' == $name) || !method_exists($this, $method)) {
            throw new Exception('Invalid set PgeLine2D property');
        }
        $this->$method($value);
    }

    public function __get($name){
        $method = 'get' . $name;
        if (('mapper' == $name) || !method_exists($this, $method)) {
            throw new Exception('Invalid get PgeLine2D property');
        }
        return $this->$method();
    }

    public function setOptions(array $options)
    {
        $methods = get_class_methods($this);
        foreach ($options as $key => $value) {
            $method = 'set' . ucfirst($key);
            if (in_array($method, $methods)) {
                $this->$method($value);
            }
        }
        return $this;
    }

    public function setPGA_Id($id){
        $this->PGA_Id = $id;
        return $this;
    }

    public function getPGA_Id(){
        return $this->PGA_Id;
    }

    public function setPGA_Name($name){
        $this->PGA_Name = $name;
        return $this;
    }

    public function getPGA_Name(){
        return $this->PGA_Name;
    }

} 
```

应用程序/模型/PGLine2DMapper.php

```
class Application_Model_PgeLine2DMapper
{
    protected $_dbTable;

    public function setDbTable($dbTable)
    {
        if (is_string($dbTable)) {
            $dbTable = new $dbTable();
        }
        if (!$dbTable instanceof Zend_Db_Table_Abstract) {
            throw new Exception('Invalid table data gateway provided');
        }
        $this->_dbTable = $dbTable;
        return $this;
    }

    public function getDbTable()
    {
        if (null === $this->_dbTable) {
            $this->setDbTable('Application_Model_DbTable_PgeLine2D');
        }
        return $this->_dbTable;
    }

    public function save(Application_Model_PgeLine2D $pgeLine2D)
    {
        $data = array(
                'PGA_Name'   => $pgeLine2D->getPGA_Name()
        );

        if( null === ($id = $pgeLine2D->getPGA_Id()) ) {
            unset($data['id']);
            $this->getDbTable()->insert($data);
        } else {
            $this->getDbTable()->update($data, array('PGA_Id = ?' => $id));
        }
    }

    public function find($id, Application_Model_PgeLine2D $pgeLine2D)
    {
        $result = $this->getDbTable()->find($id);
        if (0 == count($result)) {
            return;
        }
        $row = $result->current();
        $pgeLine2D->setPGA_Id($row->PGA_Id)
            ->setPGA_Name($row->PGA_Name);
    }

    public function fetchAll()
    {
        $resultSet = $this->getDbTable()->fetchAll();
        $entries   = array();
        foreach ($resultSet as $row) {
            $entry = new Application_Model_PgeLine2D();
            $entry->setPGA_Id($row->PGA_Id)
                ->setPGA_Name($row->PGA_Name);
            $entries[] = $entry;
        }
        return $entries;
    }

} 
```

应用程序/模型/DbTable/PGLine2D.php

```
class Application_Model_DbTable_PgeLine2D extends Zend_Db_Table_Abstract
{

    protected $_name = 'PGE_Line2D';

} 
```

应用程序/控制器/PgeLine2DController.php

```
class PgeLine2DController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        // action body
        $pgeLine2D = new Application_Model_PgeLine2DMapper();
        $this->view->entries = $pgeLine2D->fetchAll();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:51:15.293

当您使用别名而不是新域时，您必须添加

```
resources.frontController.baseUrl = "/epos" 
```

到你的 config.ini 文件。

# c# - 如果包含某个类名，则从文本文件中删除 DIV

> ID：11157136
> 
> 赞同：1
> 
> 时间：2012-06-22T13:29:36.667
> 
> 标签：c#, html, wpf, xml, tags

我目前正在处理一个内部包含 RSS 提要的 XML 文档。我想解析它，以便如果找到一个类名为“feedflare”的 div 标签，代码将删除整个 DIV。

我找不到这样做的示例，因为对它的搜索被“HTML 编辑器错误”和其他不相关的数据污染了。

这里有人愿意分享实现我目标的方法吗？

我必须声明，如果可以避免的话，我**不想使用 HtmlAgilityPack 。**

这是我的过程：

加载 XML，解析元素并挑选出标题、描述、链接。然后将所有这些保存为 HTML（以编程方式添加标签以构建网页），然后当添加所有标签时，我想解析生成的“HTML 文本”并删除烦人的 DIV 标签。

让我们假设“字符串 HTML = textBox1.text”，其中 textBox1 是在解析主 XML 文档之后粘贴结果 HTML 的位置。

然后我将如何遍历 textBox1.text 的内容并仅删除名为“feedflare”的 div 标签（见下文）。

```
<div class="feedflare">
<a href="http://feeds.gawker.com/~ff/kotaku/full?a=lB-zYAGjzDU:1zqeSgzxt90:yIl2AUoC8zA">
<img src="http://feeds.feedburner.com/~ff/kotaku/full?d=yIl2AUoC8zA" border="0"></img></a> 
<a href="http://feeds.gawker.com/~ff/kotaku/full?a=lB-zYAGjzDU:1zqeSgzxt90:H0mrP-F8Qgo">
<img src="http://feeds.feedburner.com/~ff/kotaku/full?d=H0mrP-F8Qgo" border="0"></img></a> 
<a href="http://feeds.gawker.com/~ff/kotaku/full?a=lB-zYAGjzDU:1zqeSgzxt90:D7DqB2pKExk">
<img src="http://feeds.feedburner.com/~ff/kotaku/full?i=lB-zYAGjzDU:1zqeSgzxt90:D7DqB2pKExk" border="0"></img></a> 
<a href="http://feeds.gawker.com/~ff/kotaku/full?a=lB-zYAGjzDU:1zqeSgzxt90:V_sGLiPBpWU">
<img src="http://feeds.feedburner.com/~ff/kotaku/full?i=lB-zYAGjzDU:1zqeSgzxt90:V_sGLiPBpWU" border="0"></img></a>
</div> 
```

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:35:29.427

使用[这个 xml 库](https://github.com/ChuckSavage/XmlLib/)，执行：

```
XElement root = XElement.Load(file); // or .Parse(string);
XElement div = root.XPathElement("//div[@class={0}]", "feedflare");
div.Remove();
root.Save(file); // or string = root.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T00:42:41.093

试试这个

```
 System.Xml.XmlDocument d = new System.Xml.XmlDocument();
   d.LoadXml(Your_XML_as_String);
    foreach(System.Xml.XmlNode n in d.GetElementsByTagName("div"))
   d.RemoveChild(n); 
```

并用于`d.OuterXml`检索新的 xml。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-05T15:36:15.677

我在 Javascript 中的解决方案是：

```
function unrichText(texto) {
  var n = texto.indexOf("\">"); //Finding end of "<div&nbsp;class="ExternalClass...">
  var sub = texto.substring(0, n+2); //Adding first char and last two (">)
  var tmp = texto.replace(sub, ""); //Removing it
  tmp = replaceAll(tmp, "</div>", ""); //Removing last "div"
  tmp = replaceAll(tmp, "<p>", ""); //Removing other stuff
  tmp = replaceAll(tmp, "</p>", "");
  tmp = replaceAll(tmp, "&#160;", "");
  return (tmp);
}

function replaceAll(str, find, replace) {
    return str.replace(new RegExp(find, 'g'), replace);
} 
```

# java - 简单的 XML 框架松散映射不起作用

> ID：11157138
> 
> 赞同：1
> 
> 时间：2012-06-22T13:29:45.740
> 
> 标签：java, xml, xml-parsing, xml-serialization, simple-framework

我正在尝试使用设置了松散映射标志的 Simple Xml Framework 解析部分 xml 文档，但出现异常。

XML:

```
<Body>
    <TopGoalScorersResponse>
        <TopGoalScorersResult>
            <tTopGoalScorer>
                <sName>Alan Dzagoev</sName>
                <iGoals>3</iGoals>
                <sCountry>Y</sCountry>
                <sFlag>http://footballpool.dataaccess.eu/images/flags/ru.gif</sFlag>
                <sFlagLarge>http://footballpool.dataaccess.eu/images/flags/ru.png</sFlagLarge>
            </tTopGoalScorer>
        </TopGoalScorersResult>
    </TopGoalScorersResponse>
</Body> 
```

爪哇：

```
TopGoalScorer topGoalScorer = serializer.read(TopGoalScorer.class, xml);

@Root(name="tTopGoalScorer", strict=false)
public class TopGoalScorer {
    @Element(name="sName")
    private String name;

    @Element(name="iGoals")
    private int numGoals;

    @Element(name="sCountry")
    private String country;

    @Element(name="sFlag")
    private String flagImageUrl;
} 
```

例外：

```
06-22 14:11:46.530: E/Soap(2057): Unable to satisfy @org.simpleframework.xml.Element(data=false, name=sCountry,     required=true, type=void) on field 'country' private java.lang.String uk.co.carr.david.TopGoalScorer.country for class uk.co.carr.david.TopGoalScorer at line 1
06-22 14:11:46.530: E/Soap(2057): org.simpleframework.xml.core.ValueRequiredException: Unable to satisfy @org.simpleframework.xml.Element(data=false, name=sCountry, required=true, type=void) on field 'country' private java.lang.String uk.co.carr.david.TopGoalScorer.country for class uk.co.carr.david.TopGoalScorer at line 1 
```

有任何想法吗？任何帮助将不胜感激。

谢谢大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:14:59.063

发生这种情况是因为您没有明确元素的路径，只需尝试使用下一个构造，一切都会好的

```
 @Root(name="tTopGoalScorer", strict=false)
    public class TopGoalScorer {
        @Path("Body/TopGoalScorersResponse/TopGoalScorersResult/tTopGoalScorer/sName")
        @Element
        private String name;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T14:03:17.210

更好的方法是 Persister.read(MyClass.class, inputXml, false)。这告诉它忽略注释类中不匹配的任何内容。它比在 @Root 注释中使用 strict=false 更好，因为它适用于整个文档。

# php - php向后台进程发送命令

> ID：11157139
> 
> 赞同：0
> 
> 时间：2012-06-22T13:29:52.157
> 
> 标签：php, exec, pipe

我正在写一个网络服务。PHP 处理器应将处理移交给位于服务器上的可执行文件。

在请求到达时，PHP 应该运行可执行文件并从可执行文件中获取输出并在 PHP 中进一步处理它，而可执行文件继续在后台运行。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:36:40.130

我做了一个网络服务，它可以在后台运行计算并使用文件进行通信。

*   来自客户的请求
*   创建作业文件
*   启动运行作业文件的后台 php cli
*   如果作业过程完成，它将结果写入结果文件
*   当客户端从作业中请求结果时，服务器进程从结果文件中读取它

# sql - oracle中的SQL查询展平表

> ID：11157148
> 
> 赞同：1
> 
> 时间：2012-06-22T13:30:19.133
> 
> 标签：sql, oracle, oracle11g

所以我在 sql 中有一个表，它看起来像这样

```
controlnum  taxyear        payrollg                 alaska
12334        2012           16                      25
12334        2012           16                      25
12334        2012           16                      NULL
12334        2012           16                      NULL
12334        2012           16                      25
12334        2012           16                      25
12332        2012           14                      23
12332        2012           14                      NULL
12333        2012           14                      23
12333        2012           14                      NULL 
```

我想把它弄平

```
controlnum  taxyear        payroll                 alaska
12334        2012           16                      25
12333        2012           14                      23
12332        2012           14                      23 
```

这是我尝试过的查询，它给了我语法错误，有人可以帮忙吗？

```
SELECT 
Controlnum "controlNumber",
taxyear "taxYear",
payrollg "payRollGroup"

FROM 
states

MAX (CASE WHEN alaska IS NOT NULL THEN alaska ELSE NULL END) AS 'Alaska' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:33:01.970

```
 SELECT 
    Controlnum "controlNumber",
    taxyear "taxYear",
    payrollg "payRollGroup"
    MAX(NVL(alaska, 0)) 'Alaska'--NVL if you want a zero value when only null values exist...
    -- or NVL(MAX(alaska), 0)
    FROM 
    states
    GROUP BY Controlnum, taxyear, payrollg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:32:51.460

我想你想要

```
SELECT controlNum,
       taxYear,
       payrollG,
       MAX( alaska )
  FROM states
 GROUP BY controlNum,
          taxYear,
          payrollG; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:35:41.947

不知道oracle，但这应该可以。

```
SELECT Distinct
    Controlnum "controlNumber",
    taxyear "taxYear",
    payrollg "payRollGroup",
    alaska "Alaska"
FROM states
WHERE alaska IS NOT NULL; 
```

**编辑**- 添加了阿拉斯加专栏

# c++ - Int 被视为 bool 和 & 运算符

> ID：11157156
> 
> 赞同：3
> 
> 时间：2012-06-22T13:30:40.327
> 
> 标签：c++, operators, boolean, int

我一直在为我的部分代码苦苦挣扎，我终于发现问题出在一个简单的测试上，它没有给我预期的结果。

```
if (2) //=> true
if (2 & true) //=> false
if (bool(2) & true) //=> true 
```

我不明白为什么第二行会导致错误。我的理解是，每个非零整数在测试中都被认为是真的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T13:32:08.990

因为和之间的**位**`2`和`true`是假的。

`&`（按位运算符）不同于`&&`（逻辑运算符）。

`true`转换`int`为`1`.

哪个是假`2 & true`的也是如此- 因为. （位可能会有所不同）`2 & 1``0000000000000010 & 0000000000000001 == 0`

而`bool(2) == 1`和`1 & 1`是`true`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T13:43:23.013

```
if (2) //=> true 
```

到现在为止还挺好。

```
if (2 & true) //=> false 
```

这里的条件计算为`2 & 1 == 0`，因为`&`是按位运算符，并且 2 和 1 分别是二进制的 00000010 和 00000001。

```
if (bool(2) & true) //=> true 
```

有趣的是，在我的编译器上，我似乎回忆起在某些情况下的不稳定行为；并且，如果教派。C++11 标准的 4.12 解决了这个问题，它以我不理解的方式这样做。我似乎记得看到我的编译器 let `bool(2) == 2`，这是没有预料到的。这是否代表我的编译器中的错误或记忆中的错误，我不知道。

但是，我怀疑您想要逻辑运算符`&&`而不是按位运算符`&`。

**测验**

要检查您的理解，请尝试

```
if (3 & true) //=> true 
```

你明白为什么吗？（提示：3 的二进制表示为 00000011。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T13:32:22.257

你需要`&&`而不是`&`.

`&&`是布尔`and`运算符，而`&`是二进制 'and' 所以与while`2 & true`相同。`0010 & 0001 = 0000 -> false``2 && true = true`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T13:34:35.267

`&`在所有位之间进行AND（调用按位AND），您需要的是`&&`运算符（布尔AND）。

二进制中的 2 是 '10' 并且 true 是二进制中的 1 (01)，因此结果`10 & 01`是 0 。

bool(2) 将 2 转换为 true ，二进制为 01，`01 & 01`为 01。

# perl - 使用 SWIG 在 Perl 中映射 STL

> ID：11157157
> 
> 赞同：32
> 
> 时间：2012-06-22T13:30:43.583
> 
> 标签：perl, swig

这是我[在 SWIG 邮件列表上的问题](http://sourceforge.net/mailarchive/forum.php?thread_name=102641339869909@webcorp7.yandex-team.ru&forum_name=swig-user)的副本。

我正在尝试在我的 SWIG 绑定中使用 stl 容器。除了 Perl 中的 stl 映射处理之外，一切都运行良好。在 C++ 方面，我有

```
std::map<std::string, std::string> TryMap(const std::map<std::string, std::string> &map) {
  std::map<std::string, std::string> modified(map);
  modified["7"] = "!";
  return modified;
} 
```

SWIG 配置看起来像这样

```
%module stl

%include "std_string.i"

%include "std_map.i"
%template(StringStringMap) std::map<std::string, std::string>;

%{
  #include "stl.h"
%}

%include "stl.h" 
```

在我的 Python 脚本中，我可以通过这种方式调用 TryMap

```
print dict(stl.TryMap({'a': '4'})) 
```

并获得漂亮的输出

```
{'a': '4', '7': '!'} 
```

但在 Perl 我打电话

```
print Dumper stl::TryMap({'a' => '4'}); 
```

并得到一个错误

```
TypeError in method 'TryMap', argument 1 of type 'std::map< std::string,std::string > const &' at perl.pl line 7. 
```

我实际上可以做类似的事情

```
my $map = stl::TryMap(stl::StringStringMap->new());
print $map->get('7'); 
```

并得到'！'，但这不是一个选项，因为有很多使用“TryMap”的遗留代码期望正常的Perl哈希作为其输出。

我相信有办法解决这个问题，因为如果我使用 stl 向量和字符串但不使用映射，SWIG 可以在 Python 甚至 Perl 中很好地解决这个特殊问题。

有没有办法在 SWIG 中使用 Perl 处理 stl 映射？我正在使用最新的 SWIG 2.0.7

**更新**也许有什么问题`perl5/std_map.i`。太短了=）

```
$ wc -l perl5/std_map.i python/std_map.i 
   74 perl5/std_map.i
  305 python/std_map.i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T11:32:10.693

我将您的 C++ 函数作为内联函数放入头文件中进行测试。

然后，我能够构建一个 SWIG 界面来满足您的需求。它有两个关键部分。`std::map`首先，我编写了一个类型映射，它允许将 a*或*perl 哈希作为输入提供给期望 a 的 C++ 函数`std::map`。在后者的情况下，它从 perl 哈希构建一个临时映射以用作参数。（这很方便但可能很慢）。类型图通过检查实际传入的内容来选择正确的行为。

解决方案的第二部分是将一些 C++ map 的成员函数映射到 perl 用于重载哈希操作的特殊函数。其中大多数是简单地实现的`%rename`，但是 C++ 函数和 perl 函数兼容`FIRSTKEY`，并且`NEXTKEY`不能很好地映射到 C++ 的迭代器上，所以这些是使用`%extend`和（内部）另一个`std::map`来实现的，用于存储我们正在包装的映射的迭代状态。

这里没有实现用于返回映射的特殊类型映射，但是通过现在实现的特殊操作有额外的行为。

SWIG 界面如下所示：

```
%module stl

%include <std_string.i>
%include <exception.i>

%rename(FETCH) std::map<std::string, std::string>::get;
%rename(STORE) std::map<std::string, std::string>::set;
%rename(EXISTS) std::map<std::string, std::string>::has_key;
%rename(DELETE) std::map<std::string, std::string>::del;
%rename(SCALAR) std::map<std::string, std::string>::size;
%rename(CLEAR) std::map<std::string, std::string>::clear;

%{
#include <map>
#include <string>
// For iteration support, will leak if iteration stops before the end ever.
static std::map<void*, std::map<std::string, std::string>::const_iterator> iterstate;

const char *current(std::map<std::string, std::string>& map) {
  std::map<void*, std::map<std::string, std::string>::const_iterator>::iterator it = iterstate.find(&map);
  if (it != iterstate.end() && map.end() == it->second) {
    // clean up entry in the global map
    iterstate.erase(it);
    it = iterstate.end();
  }
  if (it == iterstate.end())
    return NULL;
  else
    return it->second->first.c_str();
}
%}

%extend std::map<std::string, std::string> {
  std::map<std::string, std::string> *TIEHASH() {
    return $self;
  }
  const char *FIRSTKEY() {
    iterstate[$self] = $self->begin();
    return current(*$self);
  }
  const char *NEXTKEY(const std::string&) {
    ++iterstate[$self];
    return current(*$self);
  }
}

%include <std_map.i>

%typemap(in,noblock=1) const std::map<std::string, std::string>& (void *argp=0, int res=0, $1_ltype tempmap=0) {
  res = SWIG_ConvertPtr($input, &argp, $descriptor, %convertptr_flags);
  if (!SWIG_IsOK(res)) {
    if (SvROK($input) && SvTYPE(SvRV($input)) == SVt_PVHV) {
      fprintf(stderr, "Convert HV to map\n");
      tempmap = new $1_basetype;
      HV *hv = (HV*)SvRV($input);
      HE *hentry;
      hv_iterinit(hv);
      while ((hentry = hv_iternext(hv))) {
        std::string *val=0;
        // TODO: handle errors here
        SWIG_AsPtr_std_string SWIG_PERL_CALL_ARGS_2(HeVAL(hentry), &val);
        fprintf(stderr, "%s => %s\n", HeKEY(hentry), val->c_str());
        (*tempmap)[HeKEY(hentry)] = *val;
        delete val;
      }
      argp = tempmap;
    }
    else {
      %argument_fail(res, "$type", $symname, $argnum); 
    }
  }
  if (!argp) { %argument_nullref("$type", $symname, $argnum); }
  $1 = %reinterpret_cast(argp, $ltype);
}

%typemap(freearg,noblock=1) const std::map<std::string, std::string>& {
  delete tempmap$argnum;
}

%template(StringStringMap) std::map<std::string, std::string>;

%{
#include "stl.h"
%}

%include "stl.h" 
```

然后我调整了您的示例 perl 以进行测试：

```
use Data::Dumper;
use stl;

my $v = stl::TryMap(stl::StringStringMap->new());
$v->{'a'} = '1';
print Dumper $v;
print Dumper stl::TryMap({'a' => '4'});
print Dumper stl::TryMap($v);

foreach my $key (keys %{$v}) {
  print "$key => $v->{$key}\n";
}

print $v->{'7'}."\n"; 
```

我能够成功运行：

```
Got map: 0x22bfb80
$VAR1 = bless( {
                 '7' => '!',
                 'a' => '1'
               }, 'stl::StringStringMap' );
Convert HV to map
a => 4
Got map: 0x22af710
In C++ map: a => 4
$VAR1 = bless( {
                 '7' => '!',
                 'a' => '4'
               }, 'stl::StringStringMap' );
Got map: 0x22bfb20
In C++ map: 7 => !
In C++ map: a => 1
$VAR1 = bless( {
                 '7' => '!',
                 'a' => '1'
               }, 'stl::StringStringMap' );
7 => !
a => 1
! 
```

您还可以将此对象绑定到哈希，例如：

```
use stl;

my $v = stl::TryMap(stl::StringStringMap->new());
print "$v\n";

tie %foo, "stl::StringStringMap", $v;

print $foo{'a'}."\n";
print tied(%foo)."\n"; 
```

从理论上讲，您可以编写一个输出类型映射来在每个函数调用返回时自动设置此 tie，但到目前为止，我还没有成功编写一个适用于 tying 和 SWIG 运行时类型系统的类型映射。

应该注意的是，这不是生产就绪代码。据我所知，内部映射存在线程安全问题，并且也缺少一些错误处理。除了您在上面看到的之外，我还没有完全测试 perl 方面的所有哈希操作工作。`swig_map_common`通过与宏交互，使其更通用也很好。最后，无论如何我都不是 perl 专家，而且我没有过多地使用 C API，所以在这方面需要谨慎一些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-19T19:16:17.827

你有没有尝试过：

```
print Dumper stl::TryMap(('a' => '4')); 
```

# objective-c - 如何在 iOS 中创建 json 文件？

> ID：11157162
> 
> 赞同：2
> 
> 时间：2012-06-22T13:30:52.607
> 
> 标签：objective-c, ios, json, cocoa-touch

我有一些数据，需要用这个结构创建一个 json 文件：

```
{"eventData":{"eventDate":"Jun 13, 2012 12:00:00 AM","eventLocation":{"latitude":43.93838383,"longitude":-3.46},"text":"hjhj","imageData":"raw data","imageFormat":"JPEG","expirationTime":1339538400000},"type":"ELDIARIOMONTANES","title":"accIDENTE"} 
```

请有人给我一些代码如何将我的数据放入具有这种结构的 json 文件中，或者至少是一个关于你如何制作 json 结构的示例？

编辑

好的，所以我写了一些代码：

```
NSString *jsonString = @"[{\"eventData\":{\"eventDate\":\"Jun 13, 2012 12:00:00 AM\",\"eventLocation\":{\"latitude\":43.93838383,\"longitude\":-3.46},\"text\":\"hjhj\",\"imageData\":\"raw data\",\"imageFormat\":\"JPEG\",\"expirationTime\":1339538400000},\"type\":\"ELDIARIOMONTANES\",\"title\":\"accIDENTE\"}]";

    NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
    NSError *e;
    NSMutableArray *jsonList = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&e];
    NSLog(@"jsonList: %@", jsonList); 
```

jsonList 现在是一个 json 文件？？？它的格式是否正确？因为当我打印它时，输出是：

```
jsonList: (
        {
        eventData =         {
            eventDate = "Jun 13, 2012 12:00:00 AM";
            eventLocation =             {
                latitude = "43.93838383";
                longitude = "-3.46";
            };
            expirationTime = 1339538400000;
            imageData = "raw data";
            imageFormat = JPEG;
            text = hjhj;
        };
        title = accIDENTE;
        type = ELDIARIOMONTANES;
    }
) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T13:32:32.153

你看过[苹果的“ `NSJSONSerialization`”类](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)了吗？它从 iOS 5.0 开始可用。

您可以使用它将 Objective C 对象转换为 JSON 数据流，您可以将其发送到您的 Web 服务。

如果您想支持 5.0 之前的操作系统，还有其他可用的可能性（[看看这个相关问题](https://stackoverflow.com/questions/5813077/iphone-ios-json-parsing-tutorial)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:35:48.370

如果只需要支持 iOS5 及更高版本，可以使用 Apple 的 NSJSONSerialization，如 Michael 所说。对于早期的 iO​​S 版本，您将需要使用第三方 json 解析库（我推荐 JSONKit，它是最快的）。

最终，您要做的是创建一个 NSDictionary，其中包含您希望 JSON 数据具有的键/值结构，并使用其中一种方法进行转换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:34:52.973

编辑了答案：

请使用 NSJSONSerialization 创建 JSON 对象。要创建 JSON 对象，请不要使用字符串。使用类似的东西`dictionaryWithObjectsAndKeys:`并将其转换为 JSON 对象

```
NSDictionary *PostParams = [NSDictionary dictionaryWithObjectsAndKeys:
                             [value], [key], nil]; 
```

如果您使用的是 iOS 6 和 Xcode 4.3，那么

```
NSDictionary *PostParams = @{value, key}; 
```

# python - Python：日期操作代码

> ID：11157164
> 
> 赞同：0
> 
> 时间：2012-06-22T13:31:08.057
> 
> 标签：python, datetime, time

使用 python，我想计算 day_of_a_year 天及其相应月份的增量天数，以及月份 + 1 的增量天数。

*对不起，我忘了提到年份是一个已知变量，例如。

```
def a(day_of_year):
    <...>
    return [(days_from_start_of_month),(days_untill_end_of_month)] 
```

因此，如果

```
day_of_year = 32 
a(32) = (2,28) #assuming the month which the day_of_year corresponds to starts from day 30 and ends to day 60. 
```

到目前为止，我正在研究 datetime 、 timeutils 和 calendar 模块，我真的无法弄清楚代码的逻辑！我希望我能展示一些可靠的东西，但我在 timedelta 函数的某个地方迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:51:57.943

每月的第一天很容易构建，下个月的第一天也是如此。一旦你有了这些，剩下的就更容易了。正如 OP 所指出的，该[`calendar.monthrange`函数](http://docs.python.org/library/calendar.html#calendar.monthrange)为我们提供了最易读的方法来获取一个月的最后一天。

```
>>> from datetime import date, year
>>> import calendar
>>> def first_day(dt):
...      # Simply copy year and month into new date instance
...      return date(dt.year, dt.month, 1)
...
>>> def last_day(dt):
...      days_in_month = calendar.monthrange(dt.year, dt.month)[1]
...      return date(dt.year, dt.month, days_in_month)
...
>>> nth_day = 32
>>> day_of_year = date(2012, 1, 1) + timedelta(days=nth_day - 1)
>>> day_of_year
datetime.date(2012, 2, 1)
>>> first_day(day_of_year), last_day(day_of_year)
(datetime.date(2012, 2, 1), datetime.date(2012, 2, 29))
>>> day_of_year - first_day(day_of_year), last_day(day_of_year) - day_of_year
(datetime.timedelta(0), datetime.timedelta(28)) 
```

要将这些技术组合成一个功能：

```
def delta_to_start_and_end(year, day_of_year):
    dt = date(year, 1, 1) + timedelta(days=(day_of_year - 1))

    def first_day(dt):
         return date(dt.year, dt.month, 1)
    def last_day(dt):
         days_in_month = calendar.monthrange(dt.year, dt.month)[1]
         return date(dt.year, dt.month, days_in_month)

    return (dt - first_day(dt)).days, (last_day(dt) - dt).days 
```

输出：

```
>>> delta_to_start_and_end(2012, 32)
(0, 28)
>>> delta_to_start_and_end(2011, 32)
(0, 27)
>>> delta_to_start_and_end(2012, 34)
(2, 26)
>>> delta_to_start_and_end(2012, 364)
(28, 2) 
```

我不确定您是否要添加`1`到这两个值中的每一个；目前，当月的第一天（第一个示例）将您`0`作为第一个值，将 (days-in-the-month - 1) 作为第二个值，因为这是与这些点的天数差。如果您需要这些，在函数的最后一行添加`+ 1`两次是微不足道的。`delta_to_start_and_end`

作为历史记录，此答案的先前版本使用不同的方法来计算没有日历模块的一个月的最后一天：

```
def last_day(dt):
     rest, month = divmod(dt.month, 12)
     return date(dt.year + rest, month + 1, 1) - timedelta(days=1) 
```

这个函数使用[`divmod`内置函数](http://docs.python.org/library/functions.html#divmod)来处理“当前月份是十二月”的边缘情况；在这种情况下，下个月不是`13`，但是`1`我们也需要将年份增加一。将数字滚动回“开始”是数字的模数，但该`divmod`函数也为我们提供了除数，`1`如果当前月份是`12`. 这为我们提供了一个方便的指标，何时增加年份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:50:30.783

我不认为有一个现有的图书馆可以解决这个问题。您必须自己制作一些东西，如下所示：

```
monthdays = (31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)

day = 32

total = 0
for i in monthdays:
    if day - total - i < 0:
        before = day - total
        after = total + i - day
        break
    total += i

print before, after 
```

（只是一个快速开始，可能有更优雅的方式）

# xpages - xpages：java.lang.ClassNotFoundException：在 NSF 中找不到类 org.apache.commons.httpclient.HttpMethod

> ID：11157168
> 
> 赞同：0
> 
> 时间：2012-06-22T13:31:26.873
> 
> 标签：xpages

我编写了一个利用 org.apache.commons.httpclient 的 java 类。

最初，我将 java 文件连同编解码器依赖项一起导入到我的 nsf 中；该应用程序运行良好。然后我发现这些在 eclipse 插件目录中可用；所以我然后将它们添加为plugin.xml中的依赖项

现在，当我尝试运行应用程序时，我收到错误 500，并且 xpages_exc 技术支持文件中记录了以下内容：

```
22/06/12 14:33: Exception Thrown
javax.servlet.ServletException: java.lang.NoClassDefFoundError: org.apache.commons.httpclient.HttpMethod
    at com.ibm.xsp.webapp.FacesServlet.handleError(FacesServlet.java:619)
    at com.ibm.xsp.webapp.FacesServlet.renderErrorPage(FacesServlet.java:453)
    at com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:183)
    at com.ibm.xsp.webapp.FacesServletEx.service(FacesServletEx.java:137)
    at com.ibm.xsp.webapp.DesignerFacesServlet.service(DesignerFacesServlet.java:103)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule.invokeServlet(ComponentModule.java:576)
    at com.ibm.domino.xsp.module.nsf.NSFComponentModule.invokeServlet(NSFComponentModule.java:1267)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule$AdapterInvoker.invokeServlet(ComponentModule.java:847)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule$ServletInvoker.doService(ComponentModule.java:796)
    at com.ibm.designer.runtime.domino.adapter.ComponentModule.doService(ComponentModule.java:565)
    at com.ibm.domino.xsp.module.nsf.NSFComponentModule.doService(NSFComponentModule.java:1251)
    at com.ibm.domino.xsp.module.nsf.NSFService.doServiceInternal(NSFService.java:598)
    at com.ibm.domino.xsp.module.nsf.NSFService.doService(NSFService.java:421)
    at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.doService(LCDEnvironment.java:341)
    at com.ibm.designer.runtime.domino.adapter.LCDEnvironment.service(LCDEnvironment.java:297)
    at com.ibm.domino.xsp.bridge.http.engine.XspCmdManager.service(XspCmdManager.java:272)
Caused by: java.lang.NoClassDefFoundError: org.apache.commons.httpclient.HttpMethod
    at java.lang.J9VMInternals.verifyImpl(Native Method)
    at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:56)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:39)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:527)
    at com.ibm.jscript.types.JavaAccessObject.construct(JavaAccessObject.java:260)
    at com.ibm.jscript.types.JavaWrapperObject.construct(JavaWrapperObject.java:1)
    at com.ibm.jscript.ASTTree.ASTNew.interpret(ASTNew.java:109)
    at com.ibm.jscript.ASTTree.ASTVariableDecl.interpret(ASTVariableDecl.java:82)
    at com.ibm.jscript.ASTTree.ASTBlock.interpret(ASTBlock.java:100)
    at com.ibm.jscript.ASTTree.ASTIf.interpret(ASTIf.java:85)
    at com.ibm.jscript.ASTTree.ASTBlock.interpret(ASTBlock.java:100)
    at com.ibm.jscript.ASTTree.ASTTry.interpret(ASTTry.java:109)
    at com.ibm.jscript.ASTTree.ASTProgram.interpret(ASTProgram.java:119)
    at com.ibm.jscript.ASTTree.ASTProgram.interpretEx(ASTProgram.java:139)
    at com.ibm.jscript.JSExpression._interpretExpression(JSExpression.java:435)
    at com.ibm.jscript.JSExpression.access$1(JSExpression.java:424)
    at com.ibm.jscript.JSExpression$2.run(JSExpression.java:414)
    at java.security.AccessController.doPrivileged(AccessController.java:284)
    at com.ibm.jscript.JSExpression.interpretExpression(JSExpression.java:410)
    at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:251)
    at com.ibm.jscript.JSExpression.evaluateValue(JSExpression.java:234)
    at com.ibm.xsp.javascript.JavaScriptInterpreter.interpret(JavaScriptInterpreter.java:221)
    at com.ibm.xsp.binding.javascript.JavaScriptMethodBinding.invoke(JavaScriptMethodBinding.java:111)
    at com.ibm.xsp.component.UIIncludeComposite.initBeforePageContents(UIIncludeComposite.java:672)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:339)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.addComponent(AbstractCompiledPage.java:389)
    at com.ibm.xsp.component.UIIncludeComposite.buildContents(UIIncludeComposite.java:453)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildChildren(CompiledComponentBuilder.java:123)
    at com.ibm.xsp.page.compiled.CompiledComponentBuilder.buildAll(CompiledComponentBuilder.java:84)
    at com.ibm.xsp.component.UIViewRootEx.buildContents(UIViewRootEx.java:1649)
    at com.ibm.xsp.component.UIViewRootEx2.buildContents(UIViewRootEx2.java:246)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.initComponent(AbstractCompiledPage.java:334)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createTree(AbstractCompiledPage.java:256)
    at com.ibm.xsp.page.compiled.AbstractCompiledPage.createViewRoot(AbstractCompiledPage.java:167)
    at com.ibm.xsp.application.ViewHandlerExImpl._createViewRoot(ViewHandlerExImpl.java:511)
    at com.ibm.xsp.application.ViewHandlerExImpl.createViewRoot(ViewHandlerExImpl.java:557)
    at com.ibm.xsp.application.ViewHandlerExImpl.doCreateView(ViewHandlerExImpl.java:141)
    at com.ibm.xsp.application.ViewHandlerEx.createView(ViewHandlerEx.java:90)
    at com.ibm.xsp.webapp.FacesServlet.serviceView(FacesServlet.java:238)
    at com.ibm.xsp.webapp.FacesServletEx.serviceView(FacesServletEx.java:200)
    at com.ibm.xsp.webapp.FacesServlet.service(FacesServlet.java:160)
    ... 13 more
Caused by: java.lang.ClassNotFoundException: Cannot find class org.apache.commons.httpclient.HttpMethod in NSF
    at com.ibm.domino.xsp.module.nsf.ModuleClassLoader$DynamicClassLoader.findClass(ModuleClassLoader.java:432)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:653)
    at com.ibm.domino.xsp.module.nsf.ModuleClassLoader$DynamicClassLoader.loadClass(ModuleClassLoader.java:341)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:619)
    ... 59 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:09:54.960

在 WebContent\WEB-INF 下创建一个名为 lib 的文件夹。您无需将其添加到构建路径中。将 apache commons jar 作为 jar 导入其中。然后它对我有用，但正如我所说，我没有在一台服务器上测试过一种以上的方法。

这个问题也涵盖了[Imported plugin into XPages Project not working](https://stackoverflow.com/questions/9374792/imported-plugin-into-xpages-project-not-working)

# java - NoClassDefFoundError 或如何合并两个 JAR 库？

> ID：11157169
> 
> 赞同：0
> 
> 时间：2012-06-22T13:31:27.547
> 
> 标签：java, android

我已经构建了一个库，它本身包含另一个库（其 libs 文件夹中的一个 jar 文件），但是当我将我的库导出为 jar 文件并尝试在另一个项目中使用它时，它会抛出一个 NoClassDefFoundError 错误。

显然，在导出我的 jar 文件时，它不包括已经存在的其他 jar 文件。您认为解决该问题的最佳方法是什么？

我看到了[http://code.google.com/p/jarjar/wiki/GettingStarted](http://code.google.com/p/jarjar/wiki/GettingStarted)，但无法真正理解如何在我的情况下使用它？

谢谢！

# c# - 将datagrid列复制到数组中？

> ID：11157170
> 
> 赞同：1
> 
> 时间：2012-06-22T13:31:31.163
> 
> 标签：c#, sql, datagrid

我正在从数据集中填充数据网格，其中包含从数据库中检索到的信息。我想做的是从特定列中获取所有值并将它们放入一个数组中。

例如，一个名为 Ages 的表，存储在数据网格中：

```
Ages
16
18
20
24 
```

我想要的是从数据网格中取出值，而不必从数据网格中选择它们。这可能吗，任何人都可以发送链接或帮助解决我的问题，非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:13:21.983

另一种解决方案是从用于填充网格的数据集中获取所有值：

```
 DataSet ds = new DataSet();
    List<object> myListArray = new List<object>();

    foreach (DataRow dr in ds.Tables[0].Rows)
    {
        myListArray.Add(dr["MyColumnName"]);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:36:32.757

您可以从 datagrids 数据源中的所有项目中选择命名属性到带有链接的枚举中，并将结果放入数组中。像这样的东西：

```
(from DataRow row in datagrid.datasource as DataTable select row[columnName]).ToArray() 
```

# r - 使用 data.table 包或其他解决方案 [R] 对数据帧进行子集和重组

> ID：11157172
> 
> 赞同：3
> 
> 时间：2012-06-22T13:31:34.377
> 
> 标签：r, data.table

我对 R 很陌生，并且对使用变量之一的范围值在两个数据帧之间进行子集和重组有疑问。所以我有两个这样的数据框：

```
 x         y                         
 [1,] 79.00     19.63
 [2,] 79.01     19.58
 [3,] 79.02     19.57
 [4,] 79.03     19.58
 [5,] 79.04     19.60
 [6,] 79.05     19.65
 [7,] 79.06     19.67
 [8,] 79.07     19.70
 [9,] 79.08     19.67
[10,] 79.09     19.72 
```

和

```
 id        min_x  max_x
[1,] 7G005-1010-10  79.01  79.06  
[2,] 7G100-0001-10  79.02  79.09
[3,] 8S010-1201-10  79.06  79.09 
```

我的目的是将它们两者结合起来，如下所示：

```
 id           x       y
7G005-1010-10   79,01   19,58
7G005-1010-10   79,02   19,57
7G005-1010-10   79,03   19,58
7G005-1010-10   79,04   19,6
7G005-1010-10   79,05   19,65
7G005-1010-10   79,06   19,7
7G100-0001-10   79,02   19,57
     ...         ...     ... 
```

正如您在我的数据帧的输出中看到的那样，我尝试使用该`data.table`包来找到解决我的问题的方法。

好吧，如果有人能告诉我如何处理它（有或没有`data.table`）！

先感谢您。

对不起英语不好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T17:07:24.263

这是不可能的`data.table`。实施是[FR#203](https://r-forge.r-project.org/tracker/index.php?func=detail&aid=203&group_id=240&atid=978)。你可以试试 package`xts`因为我认为它有这个操作。

一种漫长而笨重的方式（未经测试）`data.table`如下。假设您的第一个表是`P`，包含范围的第二个表是`R`。

```
setkey(P,x)
# sort by x and mark as sorted so future queries can use binary search on P

from = P[J(R$min_x),which=TRUE]
# Lookup each min_x in the key of P, returning the location. J stands for Join.

to = P[J(R$max_x),which=TRUE]
# Lookup each max_x in the key of P, returning the location.

len = to-from+1
# vectorized for each item the length to[i]-from[i]+1

i = unlist(mapply("seq.int",from,to,SIMPLIFY=FALSE))
# for each item the sequence from[i]:to[i], then concat them all into one vector

cbind(rep(R$id,len), P[i])
# use len to expand the items of R to match what they match to in P 
```

# c# - 如何在 Windows Phone 7/C# 中动态地将项目添加到 ListBox

> ID：11157178
> 
> 赞同：2
> 
> 时间：2012-06-22T13:31:46.190
> 
> 标签：c#, windows-phone-7, listbox

我在我的应用程序中定义了一个 ListBox，我在 XAML 代码中填充了一些静态数据。如果我要在我的 C# 代码中引用这个 ListBox，例如

```
searchList.....; 
```

然后使用什么方法在代码中动态地将项目添加到该 ListBox 中？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:34:25.800

查看[listBox.Add](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.add.aspx)。

例子：

```
listBox1.Items.Add("Your item"); 
```

希望能帮助到你

# sql - 在 SSIS 中动态更改服务器名称

> ID：11157180
> 
> 赞同：1
> 
> 时间：2012-06-22T13:31:53.390
> 
> 标签：sql, deployment, ssis

我有几个环境，我的 SSIS 包在开发周期（开发、质量保证、暂存和生产）中移动，因此我想使用 SSIS 中的配置在我的连接管理器中设置服务器名称，这样我就不会'不需要手动执行此操作。

我已经阅读了有关使用 xml 配置文件、SQL 配置表和环境变量的信息。但是我遇到的问题是我的 QA 和 Staging 环境在同一台服务器上，但使用两个单独的 SQL 实例。在这种情况下，如何动态配置服务器名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:33:35.620

好的，这就是我们的处理方式。我们使用环境变量来确定要从中读取其余配置的数据库。环境变量与用户相关联，因此我们将 QA 作业设置给一个用户，将作业设置给另一个用户。我们的用户被称为 SQLQA 和 SQLstaging 之类的东西，仅用于运行作业。然后环境变量指向我们在 SSIS config 中存储其余配置的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:43:38.427

您仍然可以将一个配置文件用于 QA 和 Staging。在文件中包含两台服务器。

然后，当您构建执行包的 QA 流程时，包括一个可选的运行时参数，该参数采用您希望包在其中执行的特定环境，并在包的开头使用一个小脚本任务来设置适当的变量（甚至只是动态变量）。

它并不完美，但它至少应该让您在不同的环境中执行，而无需更改包本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T15:04:39.230

我对这个问题的解决方案是设计时值总是指向开发环境。任何开发人员打开包，它都会针对该环境进行验证，一切都很好。

在 dev 之外运行包意味着它们是通过 SQL 代理运行的。如果您可以精确控制该级别，那么创建作业以指向正确的配置存储库是一件简单的事情。

在物理实现上，我使用了每个环境的自定义 ssis 目录 (SYSDB)，其中包含我们的配置、日志框架 + 标准日志表 (sysdtslog90/sysssislog)。每个包都需要有一个变量`User::Default_ConfigurationServer`，并且该变量用作配置连接管理器的 ConnectionString 属性的表达式。听起来很复杂，但事实并非如此——

1.  创建一个字符串类型的变量
2.  复制配置连接管理器的连接字符串的值并将其粘贴为值
3.  将表达式分配回配置连接管理器的 ConnectionString 属性

dev 中的净效应是它什么都不做，但现在你可以让它在其他环境中工作。我的经纪人看起来都像

```
DECLARE @serverName sysname
,    @jobstep_command nvarchar(4000)
-- Lots of other stuff removed
SET @serverName = @@servername

SET @jobstep_command = N'/SQL "\MyPackage"' + '" /SERVER "' + @serverName + '" /CHECKPOINTING OFF /REPORTING E /SET "\Package.Variables[User::Default_ConfigurationServer].Properties[Value]";"\"Provider=SQLNCLI10;Data Source=' + @serverName + ';Initial Catalog=SYSDB;Integrated Security=SSPI;\""'

-- create the job, also removed
-- Create the job step
EXECUTE @return_code = msdb.dbo.sp_add_job 
    @job_name = @job_name
,   @enabled = @job_enabled
,   @description = @job_description
,   @start_step_id = @job_start_step
,   @category_name = @category_name
--, @category_id = @category
,   @owner_login_name = @job_owner_login_name
,   @notify_level_eventlog = @job_notify_level_eventlog
,   @notify_level_email = @job_notify_level_email
,   @notify_level_netsend = @job_notify_level_netsend
,   @notify_level_page = @job_notify_level_page
,   @notify_email_operator_name = @job_notify_email_operator_name
,   @notify_netsend_operator_name = @job_notify_netsend_operator_name
,   @notify_page_operator_name = @job_notify_page_operator_name
,   @delete_level = @job_delete_level
,   @job_id = @job_id OUTPUT 
```

现在，无论我的工作是在哪里创建的，它都会将该变量指向正确的位置，这反过来又会导致包发现正确的存储库，而我要做的工作就更少了。

# jakarta-ee - ActiveMQ 独立服务器部署或嵌入 Spring Webapp

> ID：11157190
> 
> 赞同：8
> 
> 时间：2012-06-22T13:32:16.623
> 
> 标签：jakarta-ee, jms, activemq, setup-deployment

我需要设计一个通知/发布的应用程序，它的子系统发送电子邮件。我计划使用 jms 发布/订阅（主题）消息来做到这一点

目前的可见性，将有 20 到 30 个订阅者，并且将发布的消息数量将在每天 30000 到 50000 条消息的范围内。

我已经计划使用ActiveMQ JMS+Spring 3+Tomcat 6 实现 **问题**

> 1.  我对 JMS 还很陌生，我想知道上述负载是否很高？
>     
>     
> 2.  我们真的需要在服务器上部署一个单独的 ActiveMQ，还是在 Web 应用程序中使用嵌入式 ActiveMQ 就足够了？
>     
>     
> 3.  单独的 ActiveMQ 服务器/嵌入式服务器的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T19:35:15.840

首先请注意，随着事情的发展，您的消息量非常小。您可以真正使用其中任何一种，并且最容易维护的东西可能会决定您的选择。

扩展 Petter 关于重启的评论需要考虑的一件事是将连接到代理的其他机器的数量。

## 客户

如果您有 100 台机器连接到代理，那么每次重新启动带有嵌入式 ActiveMQ 的 Tomcat 都会中断 100 个需要重新连接的连接。ActiveMQ 支持重新连接，因此可以正常工作，但是当每个人都重新连接时，它会给消息流增加一些不必要的延迟，有时几个客户端将无法重新连接，您必须手动将它们启动。

使用独立代理和 100 个客户端，您可以根据需要随时重启 Tomcat 服务器，并且只断开从代理到 Tomcat 的一个连接。这可能非常好。

如果您只有一个客户端（Tomcat 服务器本身），那么请直接嵌入并使用 in-vm 传输。

## 记忆

另一个因素是内存。我们在 t1.micro 上使用 Amazon EC2 中的 ActiveMQ，它只有 613MB 的内存，非常小。运行两个 t1.micros（一个用于 ActiveMQ，一个用于 Tomcat）比一个同时具有两者的 m1.small 便宜。

但同样，客户数量也是一个因素。如果除了 Tomcat 之外没有其他客户端，运行一个 m1.small 并将所有内容保存在同一个 vm 中可能会更好。

## 供参考

如果 Tomcat 和 ActiveMQ 是您的主要目标，您应该考虑[Apache TomEE Plus](http://tomee.apache.org/)，它是已经集成了 ActiveMQ 的 Tomcat。

所有的罐子都在那里，默认情况下，一切都是使用 Petter 谈到的本地传输使用嵌入式 ActiveMQ 代理设置的。您也可以轻松地将其配置为使用[独立的 ActiveMQ 代理](http://openejb.apache.org/jms-resources-and-mdb-container.html)。它还内置了[JavaMail](http://openejb.apache.org/configuring-javamail.html)，听起来它可能对您有用。

因此，您可以跳过设置部分，直接开始编写您的应用程序。例如，如果您要创建这个单一的 Servlet 并将其置于没有其他 jar 或类的战争中，它会起作用：

```
@WebServlet("/hello-world")
public class MyServet extends HttpServlet {

    @Resource(name = "foo")
    private Topic fooTopic;

    @Resource(name = "bar")
    private Queue barQueue;

    @Resource
    private ConnectionFactory connectionFactory;

    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //...

        Connection connection = connectionFactory.createConnection();
        connection.start();

        // Create a Session
        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

        // Create a MessageProducer from the Session to the Topic or Queue
        MessageProducer producer = session.createProducer(fooTopic);
        producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

        // Create a message
        TextMessage message = session.createTextMessage("Hello World!");

        // Tell the producer to send the message
        producer.send(message);

        //...
    }

} 
```

这里还有一个[入门视频](http://www.youtube.com/watch?v=Lr8pxEACVRI)，展示了通过 Tomcat 适配器在 Eclipse 中进行设置。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T14:35:44.573

负载是否高很难说。这实际上取决于消息的大小以及您是否使用持久消息和事务。假设它们只有大约 10KB，你应该在一台服务器上做得很好。

嵌入与独立的问题是一个很好的问题。让我提出一些我正在考虑的优点/缺点。

独立： Pro 独立：

*   如果您的 spring 应用程序以外的其他应用程序将使用 ActiveMQ，那么重新启动您的应用程序也会影响 ActiveMQ。不过，这里似乎并非如此。

*   反过来，如果正常运行时间很关键，您可以升级 ActiveMQ 安装而无需打开 spring 应用程序。

缺点独立：

*   更多需要考虑（另一个安装）来监控、操作等。

我喜欢嵌入式解决方案，如果这是一个内部应用程序的话。ActiveMQ 非常适合嵌入。如果您的应用程序需要扩展，您可以轻松地使用您的 spring 应用程序启动另一台服务器。并使用一行 XML 对 ActiveMQ 实例进行集群，然后就可以了。

嵌入式解决方案的另一个优点是 Spring 和 ActiveMQ 之间的传输可以是 JVM 内部的，因此消息不会通过 TCP/IP 堆栈而是内存副本。这将加快您的应用程序。

# android - 在类中实例化变量而不是 onCreate() 错误？

> ID：11157198
> 
> 赞同：4
> 
> 时间：2012-06-22T13:32:41.510
> 
> 标签：android

Android中的这个构造有问题吗？

```
class A extends Activity {

private Object myObject = new Object();

@Override
protected void onCreate(Bundle savedInstanceState) {
    //myObject = new Object();
} 
```

}

因为在稍后的某个时间点我得到（有时，还不能重现）异常，因为 myObject 为空。不知道是不是因为要在onCreate中初始化。

**编辑**：附加细节：

*   myObject 的实际类是`List<Object>`（其中 Object 是特定于域的类型）

*   在活动的稍后时间，**我将 myObject 存储为“参数传递器”类的静态字段并启动其他活动**（因为我避免实现 Parcelable。如果这是好的或坏的做法，不应该在这里讨论，除非那导致我的错误）。在另一个活动中，我选择了 myObject。那里（有时）为空。

**编辑 2**：如果我将对该对象的引用存储为我的参数传递器类（一个独立的专用类）的静态字段，我不明白为什么该对象变为空。这就是垃圾收集的工作原理，对，它只是在不再引用对象时删除。因此，由于我有一个静态引用，因此不应删除此对象。根据这个想法，如果他们是正确的，问题应该在其他地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:11:59.770

当您开始一项新活动时，您的旧活动将进入可能的垃圾收集块（包括其中实例化的任何类，包括您的参数传递器类），因此您的对象不一定可用（这就是为什么您会看到间歇性失败。）。

我看到两个选项：

1) 将它与您启动新活动的意图一起传递到捆绑包中。当您试图避免这种情况时，可能不是您的最佳选择。

2）扩展Application类并将对象存储在其中。

**编辑**

我认为这个[SO Question](https://stackoverflow.com/q/9929654/1105376)的公认答案可能会解决您的问题（并解释实际发生的情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:41:27.963

不，那个代码很好。您可以在构造函数中创建对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:27:39.253

您可能想查看关于它的上一个问题[Instance variable initialization in java](https://stackoverflow.com/questions/1994218/instance-variable-initialization-in-java)和第[3.2.4 节。Field Defaults and Initializers](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_02.htm#)基本上说明了第一种情况：

> 私有对象 myObject = new Object();

与类构造函数中的初始化相同。（注意 onCreate 不是构造函数）。

因此，**myObject**永远不应为**null**，除非“new Object()”指令失败并生成异常。

这难道不是您的代码稍后会在代码中更改 myObject 的内容吗？

# html - 首先尝试 Firebug 和 CSS

> ID：11157204
> 
> 赞同：-1
> 
> 时间：2012-06-22T13:32:57.493
> 
> 标签：html, css, firebug

我是萤火虫的新手，我正试图用它来找出在 CSS 中控制颜色的位置。

网站链接：[http ://www.transformaison.com/index.php](http://www.transformaison.com/index.php)

我想改变颜色的文本是所有标题，最显着的是在主页上：

“Lorem Ipsum” - 主要文章标题

所有模块标题，例如“联系信息”和“专业名称”

我以为我可以在 template.css 中的某处设置“标题”颜色，但我还没有找到任何可以在 css 中的任何位置解决此问题的颜色设置。

我哪里错了？？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:38:17.343

在您`template.css`只需添加这样的样式：-

```
.title {
    color: #FF0000 !important; /* Desired color code you want*/
} 
```

**编辑：**

如果你`!important`在 CSS 中使用，那么这个颜色就会生效

您还需要做的另一件事是，评论`.title`页面中提供的嵌入样式。嵌入式样式表是指文档页面中存在的样式，这里是 index.php

[这里有一些关于`!important`](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:37:30.027

你的内部有一个 CSS`index.php (line 45)`

```
.box8, .box8 .title, .box8 a:hover, .box11, .box11 .title, .box11 a:hover, .title3 .module-title .title {
    color: #000000 !important;
} 
```

它受`.box8 .title`. 如果你想改变标题的颜色而不影响其他，去掉上面规则中的选择器并创建一个单独的规则

```
.box8 .title {
   color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:41:45.557

我在源代码中看到您有以下行：

```
<h1 class="title">Lorum Ipsum</h1> 
```

您现在需要在 CSS 中做的就是创建类标题并设置字体颜色

如：

```
.title{
color: #000000; /* change this to change the color*/
} 
```

颜色会相应地改变你设置的。

# c# - IEnumerable 和 Take(x) 问题？

> ID：11157206
> 
> 赞同：4
> 
> 时间：2012-06-22T13:32:58.647
> 
> 标签：c#, .net, linq, entity-framework, .net-4.0

*（使用实体框架）*

当我写：

```
IEnumerable<string> q = customers /*EF entity*/
.Select (c => c.Name.ToUpper())
.OrderBy (n => n) 
```

c# 编译器知道如何生成表达式树，然后 sql 执行：

```
SELECT UPPER (Name) FROM Customer ORDER BY UPPER (Name) 
```

*还要注意该`order by`条款*

但

我看到了***[这个链接](http://dotnet.dzone.com/news/iqueryable-vs-ienumerable)*** ：

他写了 ：

```
IEnumerable<employee> emp = 
         dc.Employees.Where(x => x.Desc.StartsWith("soft"));
emp = emp.Take(1); 
```

在调查了他看到的最终查询后：

```
SELECT [t0].[Id], [t0].[Name], [t0].[Address], [t0].[Desc] AS [Desc]
FROM [dbo].[Employee] AS [t0]
WHERE [t0].[Desc] LIKE @p0 
```

注意**没有** `top`条款

这是为什么 ？

不`Take(x)`应该添加到查询中？

会这样写：

```
IEnumerable<employee> emp = 
         (dc.Employees.Where(x => x.Desc.StartsWith("soft"))).Take(1); 
```

将 TOP 子句添加到发送到 SQL 的查询中？

这是怎么回事？

*（我已经知道这`take`不是延期执行）*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T13:36:30.350

如果您添加`Take(1)`到第一个表达式，它将是 on `IQueryable<T>`，因此添加到 SQL。但是由于您转换`IQueryable<T>`为`IEnumerable<T>`,`Take(1)`是在内存中完成的：`IEnumerable<T>`有一个同名的[`Take()`扩展方法](http://msdn.microsoft.com/en-us/library/bb503062.aspx)，并且据编译器所知，`emp`is `IEnumerable<T>`， not `IQueryable<T>`，所以内存版本被调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T13:45:09.240

扩展方法，例如`Take()`静态方法，因此它们在编译时被解析。

emp 的编译时类型是`IEnumerable<employee>`（因为它被显式声明为 one），所以编译器选择`Enumerable.Take`而不是`Queryable.Take`，它不执行任何查询翻译。

如果您很懒惰并且只是使用**`var`**而不是类型名称：

```
var emp = dc.Employees.Where(x => x.Desc.StartsWith("soft"));
emp = emp.Take(1); 
```

it would have worked, because the compiler would have picked `IQueryable<employee>` for emp (because the expression you initialize it with is of that type), and thus `Queryable.Take` for the second call.

# vb.net - 从 MEF 中的容器获取导出（Lambda 表达式）

> ID：11157212
> 
> 赞同：0
> 
> 时间：2012-06-22T13:33:07.653
> 
> 标签：vb.net, asp.net-mvc-3, lambda, mef

我正在尝试查看控制器类名称是否是传入的控制器名称的名称。我认为我的 lambda 表达式是错误的，这就是它无法正常工作的原因。我传入了正确的控制器名称，但导出变量始终为空。

```
 Public Function CreateController(requestContext As System.Web.Routing.RequestContext,    
       controllerName As String) 
       As System.Web.Mvc.IController Implements 
       System.Web.Mvc.IControllerFactory.CreateController

    Dim controller As IController = Nothing

    If controllerName IsNot Nothing Then

        Dim controllerClassName As String = controllerName & "Controller"

        Dim export As Lazy(Of IController) = Me.container.GetExports(Of IController)().Where(
        Function(c)
            Return c.Value.GetType.Name = controllerClassName
        End Function
        ).FirstOrDefault() 
```

如果您需要我澄清任何事情，请告诉我！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:45:19.610

是的，你的 lambda 表达式是错误的，这应该可以解决问题

```
Dim export As Lazy(Of IController) = Me.container.GetExports(Of IController)() _
                                              .Where(Function(c) c.Value.GetType.Name = controllerClassName) _
                                              .FirstOrDefault() 
```

# c++ - 在嵌入式系统上从 DOS 切换到 Linux

> ID：11157214
> 
> 赞同：1
> 
> 时间：2012-06-22T13:33:19.900
> 
> 标签：c++, c, linux, gcc, ubuntu

我最近的任务是执行一项可行性研究，该研究基于从使用 DOS 切换到 Linux 以用作操作系统来运行我们的工业控制软件（内部开发）。简而言之，我被限制使用 Ubuntu 8.04（供应商提供的内核升级为板上的硬件提供驱动程序）。由于不再支持此功能，我无法更新或安装软件，这意味着我无法使用 gcc 4.2 版。我希望能够使用 C++ 并且最好使用 boost 库，但目前这似乎我无法这样做。

基本上我在问公司/专业人士如何使用 Linux 作为开发环境？我上面描述的情况是常见的吗？您是否只是简单地选择一个版本和一个编译器并在整个产品生命周期中坚持使用它，以确保开发环境不会发生太大变化，还是您可以随心所欲地升级内核、编译器等？受限于特定供应商可以提供的内容是否很常见。有人愿意就 ubuntu 8.04 是否适合开发工业控制软件的操作系统选择发表意见吗？

我根本不是 linux 专家，但到目前为止，我的研究和实验使我得出结论，我应该放弃 linux 方法并使用 DOS。我们公司没有 linux 知识，而且很小，出于个人职业原因，我对学习 DOS 之类的冗余技术没有兴趣。

我意识到这不完全是一个是/否类型的问题，但我们将不胜感激地收到任何答复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:36:31.080

GCC 4.2 没有对 C++11 的支持，但对 C++03 的支持应该很好，您应该能够找到一个可以轻松处理该问题的 Boost 版本。

归根结底，Linux 有许多你在 DOS 中找不到的优点——例如，没有分段、虚拟内存，以及使开发软件变得更容易和更快的东西，更不用说你可能需要的额外库，因为绝对没有人今天将支持DOS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:43:52.987

对于基于 linux 的系统，没有太多理由坚持使用固定的 OS+工具链版本，因为向后兼容性在 Unix 世界中是一个非常严重的问题。有时以某些固定系统为目标是好的，但坦率地说，这些是相当罕见的，即使这样，只要在目标机器/平台上进行测试，就可以在最新系统上进行开发。

基本上你可以升级到例如 Ubuntu 12.04 LTS（长期支持）进行开发并坚持下去，目标平台/机器上不太可能出现任何类型的不兼容问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:50:36.457

库等往往会在 Linux 发行版、新版本的 linux 发行版和其他 *nix 操作系统之间发生变化。

我曾经开发过一个必须在 Windows 和 RHEL 上运行的 C++ 应用程序。我是团队中的“Linux 人”，所以我必须处理哄骗我们用来在 Windows 上构建和工作的所有开源 linux 库（使用 cygwin），并获得开发人员所做的最新更改Windows 在 Linux 上工作。

在开发过程中，我们升级到了更新版本的 RHEL。这不是一次有趣的经历。库版本发生了变化，一些已被删除以支持其他“等效”库等。消除由更改 gcc 版本引起的所有问题也需要一段时间（当然，较新的 gcc 版本不那么宽容和暴露我们代码中的一些东西可能无论如何都不太正确）。

在大型演示前几天，管理层通知我们该应用程序也需要在 Solaris 上运行。这不是一项简单的任务——Solaris 不是 Linux。他们暗示希望它在某一时刻在 IRIX 上运行。很高兴那没有发生。

我建议您选择特定版本的 Linux 发行版、gcc 等，并在整个开发过程中坚持使用它。当软件处于维护状态时，可以稍后升级这些东西。RHEL 提供长期支持，但需要付费。您还可以考虑新发布的 Ubuntu 12.04 LTS

# java - 每当请求是映射的 servlet 时，如何知道过滤器内部？

> ID：11157216
> 
> 赞同：1
> 
> 时间：2012-06-22T13:33:21.590
> 
> 标签：java, jakarta-ee, servlets, servlet-filters

我想知道，在 Filter doFilter 方法中，每当请求针对我的 web.xml 中的映射 servlet 时。反正有这样做吗？

提前致谢，

费尔南多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:46:57.463

那是做不到的。更好地将过滤器直接映射到这些 servlet。这可以通过使用`<servlet-name>`代替来完成`<url-pattern>`。它必须`<servlet-name>`与`<servlet>`条目中定义的完全一致。如果需要，您可以指定多个。

```
<filter-mapping>
    <filter-name>myFilter</filter-name>
    <servlet-name>myOneServlet</servlet-name>
    <servlet-name>myOtherServlet</servlet-name>
    <servlet-name>myLastServlet</servlet-name>
</filter-mapping> 
```

或者当您已经使用 Java EE 6 /Servlet 3.0 并因此可能[`@WebFilter`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebFilter.html)在该类上使用时。

```
@WebFilter(servletNames={"myOneServlet", "myOtherServlet", "myLastServlet"}) 
```

# c# - 禁止访问 C# WinForms 游戏中的图像

> ID：11157219
> 
> 赞同：1
> 
> 时间：2012-06-22T13:33:30.613
> 
> 标签：c#, winforms

我正在用 winforms C# 创建一个游戏。

游戏包含一些在游戏过程中显示的图像。

我想禁止玩家打开游戏目录和打开图像文件，因为看到它们会破坏游戏玩法。

例如，在C&C中，玩家不能只是进入游戏库观看猛犸坦克精灵，或者观看电影。

有没有办法禁止玩家看到这些图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:38:59.057

您可以相当容易地将它们嵌入到资源中，并在需要时提取它们。有关更多信息，请参阅[此链接](http://www.codeproject.com/Articles/13573/Extracting-Embedded-Images-From-An-Assembly)

或者您可以在需要时对它们进行加密和解密

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:51:33.437

链接的资源在项目中存储为文件；在编译期间，从文件中获取资源数据并放入应用程序的清单中。应用程序的资源文件 (.resx) 仅存储磁盘上文件的相对路径或链接。

对于嵌入式资源，资源数据以二进制数据的文本表示形式直接存储在 .resx 文件中。在任何一种情况下，资源数据都被编译成可执行文件。

将资源从链接更改为嵌入

1.  在解决方案资源管理器中选择项目后，在项目菜单上单击属性。
2.  单击资源选项卡。
3.  在资源设计器工具栏上，指向资源视图下拉菜单，单击箭头，然后选择要编辑的资源类型。
4.  选择要更改的资源。
5.  在“属性”窗口中，选择 Persistence 属性并将其更改为 Embedded in .resx。

# java - Java 实体类：如何在具有连接列的实体中添加/编辑项目？

> ID：11157224
> 
> 赞同：3
> 
> 时间：2012-06-22T13:33:45.933
> 
> 标签：java, entity, jointable

我已经阅读了几个关于这个以及 API 的主题，我觉得我在正确的轨道上；但是，我必须仍然没有足够的理解来让它工作，因为..它不起作用！

我有以下 2 个表：TODO 和 JOBTYPE

TODO 表有 TDTDKEY (PK) 和 TDJTKEY(FK?) JOBTYPE 表有 JTJTKEY (PK) 和 JTCODE

![在此处输入图像描述](../Images/5dd714b34bd18ea560a818eadbd0ed28.png)

如您所见，Todo.tdjtkey 对应于 jobtype.jtjtkey，我的目标是检索 jtcode 而不是密钥。

实体类部分看起来像这样：

**Todo.java**

```
@Id
@Basic(optional = false)
@Column(name = "TDTDKEY")
private String primaryKey;
@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER)
@JoinColumn(name = "TDJTKEY", insertable = true, updatable = true)
private JobType jobType;

public Todo() {
}

public Todo(String primaryKey) {
    this.primaryKey = primaryKey;
}

public String getPrimaryKey() {
    return primaryKey;
}

public void setPrimaryKey(String primaryKey) {
    this.primaryKey = primaryKey;
}

public JobType getJobType() {
    return jobType;
}

public void setJobType(JobType jobType) {
    this.jobType = jobType;
} 
```

**JobType.java**

```
@Id
@Basic(optional = false)
@Column(name = "JTJTKEY")
private String primaryKey;
@OneToOne(cascade = CascadeType.ALL, fetch = FetchType.EAGER, mappedBy = "jobType")
private Todo todo;
@Column(name = "JTCODE")
private String jobCode;

public JobType() {
}

public JobType(String primaryKey) {
    this.primaryKey = primaryKey;
}

public String getPrimaryKey() {
    return primaryKey;
}

public void setPrimaryKey(String primaryKey) {
    this.primaryKey = primaryKey;
}

public String getJobCode() {
    return jobCode;
}

public void setJobCode(String jobCode) {
    this.jobCode = jobCode;
} 
```

因此，当我对其进行命名查询时，`Todo.findAll`它会给我 TDTDKEY（即 TD00000001）和相关的 TDJTKEY CODE（即 PICS PGM）。

现在，既然我终于让我的选择工作了，我正在尝试看看如何添加/编辑。

例如，如果我在 TD00000001 上并且我想将 PROG 更改为 SUPPORT。

如果我尝试它的正常方式`sv.setJobType(txtJobType.getText());`不起作用并给我：

```
method setJobType in class entity.Todo cannot be applied to given types;
  required: entity.JobType
  found: java.lang.String
  reason: actual argument java.lang.String cannot be converted to entity.JobType by method invocation conversion 
```

所以这对我来说或多或少是可以理解的，但我对如何对 Todo 表执行更新一无所知？不知何故，我需要它在 JobType.java 中找到 SUPPORT，然后获取它的 JTJTKEY 并将其作为新的 TDJTKEY 放在 Todo.java 中？

任何帮助/提示表示赞赏！

**编辑：**以下代码按答案工作！谢谢！

```
String jpql = "select jobType from JobType jobType where jobType.jobCode = :code";
JobType otherJobType = WWEntityManager.entityManager.createQuery(jpql, JobType.class).setParameter("code", txtJobType.getText()).getSingleResult();

todoEntity.getJobType().removeTodo(todoEntity);
todoEntity.setJobType(otherJobType);
otherJobType.addTodo(todoEntity); 
```

我的实体类现在看起来像这样

Todo.java

```
@ManyToOne
@JoinColumn(name = "TDJTKEY", insertable = true, updatable = true)
private JobType jobType; 
```

JobType.java

```
@OneToMany(targetEntity=Todo.class, mappedBy="jobType")
private Collection jobTypes; 
```

当然，我必须添加适当的删除和添加方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:31:02.743

首先，您有 2 个 TODO 行具有相同的作业键。因此，数据要么错误，要么正确，但您的关联应该是 ManyToOne/OneToMany 而不是 OneToOne/OneToOne。

现在，关于你的问题。如果你想改变一个待办事项的代码，答案很简单：

```
todo.getJobType().setJobCode("newCode"); 
```

实际上，如果您希望 TODO 引用另一个现有的 JobType（假设关联是 ManyToOne）：

```
todo.getJobType().removeTodo(todo); // remove the todo from its current job type
todo.setJobType(otherJobType); // set the new job type in todo
otherJobType.addTodo(todo); // add the todo to its new job type 
```

现在的问题是：如何获得对 this 的引用`otherJobType`。如果你有它的 ID，答案很简单：

```
JobType otherJobType = em.find(JobType.class, otherJobTypeId); 
```

如果您只有它的代码，则需要执行查询才能找到它。假设代码是唯一的：

```
String jpql = "select jobType from JobType jobType where jobType.jobCode = :code";
JobType otherJobType = em.createQuery(jpql, JobType.class)
                         .setParameter("code", otherJobTypeCode)
                         .getSingleResult(); 
```

# static-analysis - 静态代码分析——Cobol.Net程序的依赖图

> ID：11157225
> 
> 赞同：2
> 
> 时间：2012-06-22T13:33:49.490
> 
> 标签：static-analysis, microfocus, cobol.net

我们有一些 Microfocus Cobol.Net 应用程序。

我们想创建一个类似于 NDepend 中可用的依赖映射。

有谁知道能够做到这一点的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T12:39:07.933

我对 Cobol .NET 不了解，但我是 NDepend 的程序员。如果 Cobol .NET 发出有效的 .NET 程序集，则 NDepend 可以分析它们，因为 NDepend 可以分析任何 .NET 程序集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:02:13.890

现成的，我猜你最接近的是 MicroFocus 的 Revolve 工具。

它旨在让您以交互方式探索您的应用程序，我认为它可以衡量指标。我不知道它是否构建了您可以离线探索的“静态地图”。我也不相信它具有 NDepend 的可编程性水平。

# java - mule 是先获取它的依赖项还是项目的依赖项？

> ID：11157230
> 
> 赞同：0
> 
> 时间：2012-06-22T13:34:21.833
> 
> 标签：java, web-services

我在 Mule 中部署了一个 Web 服务。我的网络服务有一个杰克逊 jar 版本 1.9.7。但是，我正在使用的 mule 3.1.1 在其库中有一个 jackson 1.3.0。因此，将在运行时采用哪个杰克逊 jar。是 1.9.7（即 project/lib）还是 1.3.0（即 mule/lib）

# trello - 如何使用 Trello API 将列表添加到看板

> ID：11157232
> 
> 赞同：1
> 
> 时间：2012-06-22T13:34:27.480
> 
> 标签：trello

我想以编程方式添加列表。似乎有一个 GET 板 - createList 但我似乎无法让它工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T01:37:09.743

我发现走另一条路更容易。将 POST 用于列表：

```
POST /1/lists/ 
```

在此调用中，您可以选择添加 boardId。使用要添加列表的板的 ID 可以让您发挥自己的作用。

# windows - 在同一行的窗口中输出重定向

> ID：11157233
> 
> 赞同：1
> 
> 时间：2012-06-22T13:34:32.097
> 
> 标签：windows, windows-7

是否可以在同一行的 Windows 批处理文件中重定向两个不同命令的输出？例如，第一个命令的输出进入我的文件的第 1 行，以及我何时执行命令 2 以将其自身附加到与前一个输出相同的行上。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:06:01.473

您可以将输出重定向到文件或将输出附加到文件：

```
echo LINE1, > file.txt
echo LINE2 >> file.txt 
```

但是即使命令不输出CRLF也总会有换行符（echo命令就是这种情况，你不能抑制它）

要在同一行输出，您需要使用以下方法：

```
set content=

ECHO LINE1 > temp.txt
for /f "delims=" %%i in (temp.txt) do set content=%%i

ECHO LINE2 > temp.txt
for /f "delims=" %%i in (temp.txt) do set content=%content% %%i

ECHO %content%> result.txt
del temp.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:43:55.933

除非第一个程序输出换行符，否则您可以执行 shell 重定向连接：

```
prog1 > out.txt
prog2 >> out.txt 
```

# ruby-on-rails - 如何判断控制器已决定呈现哪种格式

> ID：11157234
> 
> 赞同：53
> 
> 时间：2012-06-22T13:34:32.223
> 
> 标签：ruby-on-rails, ruby-on-rails-3, controller, respond-to

在具有以下代码的 rails 控制器操作中：

```
respond_to do |format|
  format.json{ render :json=>  {:status => 200, :response=>@some_resource} }
  format.html { redirect_to(some_resource_path)}
end 
```

如何记录控制器将解析的格式，即“HTML”或“json”？`format`是[Collector](https://github.com/rails/rails/blob/d42d97d2e3f0bdef2163cc14daa181903e0b198d/actionpack/lib/abstract_controller/collector.rb)类型。有没有办法获取表示格式的字符串？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-06-22T14:18:57.067

访问格式的方法是：

```
controller.request.format 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-04-18T23:02:25.487

在您的控制器中，您可以执行以下操作：

```
request.format
request.format.html?
request.format.js?
request.format.json?
# etc. 
```

# apache-flex - flex 发布版本和浏览器缓存问题

> ID：11157244
> 
> 赞同：0
> 
> 时间：2012-06-22T13:35:12.570
> 
> 标签：apache-flex, browser-cache

我有一个flex项目。每当客户端在其浏览器中访问应用程序时，它都会从浏览器的缓存中显示应用程序。有时新完成的更改在浏览器中不起作用。然后我们要告诉客户端清空浏览器的缓存，之后应用就可以正常工作了。可以从代码中控制这个东西，以便每当发布新版本时，客户端的浏览器不会从缓存重新加载而是从服务器加载它？

# java - 如何在java中测量肩膀，手臂的长度？

> ID：11157251
> 
> 赞同：0
> 
> 时间：2012-06-22T13:35:48.293
> 
> 标签：java, bluej

这是我的图片链接：

[http://compsci.ca/v3/download.php?id=9165&sid=8b1ef1788c32286c495e956bc6cd2df3](http://compsci.ca/v3/download.php?id=9165&sid=8b1ef1788c32286c495e956bc6cd2df3)

我已经检测到身体上的白线，并得到长度。我的问题是如何检测肩膀，然后测量肩膀和长度或手臂..请帮帮我:(

这是我的工作。如果有任何更正，请这样做并建议我如何改进我的程序..

```
import java.io.*;

import java.awt.*;

import javax.imageio.ImageIO;

import java.awt.image.BufferedImage;

import javax.swing.*;

import javax.swing.JOptionPane;

public class GetPixelColor
{
    private static int maxCnt;

    public static void main(String args[]) throws IOException
    {

        File file= new File("image.jpg");
        BufferedImage image = ImageIO.read(file);
        int array[][] = new int [300][400];

           for(int i=0; i<300; i++)
           {
               for(int j=0; j<400; j++)
               {
                   // Getting pixel color by position x=j and y=j
                   int clr=  image.getRGB(j,i); 
                   int  red   = (clr & 0x00ff0000) >> 16;
                   int  green = (clr & 0x0000ff00) >> 8;
                   int  blue  =  clr & 0x000000ff;

                  //System.out.println("..................................");
                  //System.out.println("Red Color value = "+ red);
                  //System.out.println("Green Color value = "+ green);
                  //System.out.println("Blue Color value = "+ blue);
                  //System.out.println("..................................");

                  if((red >= 160 && red <= 200) && (green >= 160 && green <= 190) && (blue >= 160 && blue <= 180))//cari kaler
                  {
                      //if(red > 160 && green > 160 && blue > 180)
                      // System.out.print("{"+j+"||"+i+"[0]}");
                          array[i][j] = 0;
                          System.out.print("0");
                        }
                        else
                        {
                            array[i][j] = 1;
                            System.out.print("-");
                        }
               }
               System.out.println();
            }

            System.out.println(array[0].length);
            System.out.println(array.length);
            int x2 = 0;
            int y2 = 0;
            for (int i = (400-1); i >= 0; i--)//
            {
                for(int j = (300-1); j >= 0; j--)
                {
                    System.out.print(array[j][i]);
                    if(array[j][i] == 0)
                    {
                        //System.out.print("position2 : x="+i+" y="+j);
                        x2 = i;
                        y2 = j;
                        i = -1;
                        break;

                    }
                }
                System.out.println();
            }
            JOptionPane.showMessageDialog(null,"coordinate : \n" + "x : " + x2 +"\n y : "+ y2);
            int x = 0;
            int y = 0;
            for (int i = 0; i <400; i++)
            {
                for(int j = 0; j < 300; j++)
                {
                    System.out.print(array[j][i]);
                    if(array[j][i] == 0)
                    {
                        //System.out.print("position1 : x="+i+" y="+j);
                        x = i;
                        y = j;
                        i = 400;
                        break;
                    }
                }
                System.out.println();
            }
            JOptionPane.showMessageDialog(null,"coordinate : \n" + "x : " +x+"\n y : "+y);

            double m = 0.0;

            m = Math.sqrt(Math.pow(y-y2,2) + Math.pow(x-x2,2));
            JOptionPane.showMessageDialog(null,"length of the string : "+m);
            double ratio = 0;
            ratio = m/10;
            JOptionPane.showMessageDialog(null,"ratio per inch : " + ratio);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:54:26.930

您可以在肩部使用与前面的白线类似的标记。可能是不同的颜色——这样更容易与前面的白色标记区分开来。一旦你检测到肩标，计算长度应该很容易（类似于你为白色字符串所做的）。

# ruby-on-rails-3 - 在 Rails3 中通过关联名称（作为字符串）分配关联对象

> ID：11157254
> 
> 赞同：0
> 
> 时间：2012-06-22T13:35:49.010
> 
> 标签：ruby-on-rails-3, associations

```
class Item < ActiveRecord::Base
    has_many :subitems
end

Class SubItem < ActiveRecord::Base
    belongs_to :item
end 
```

我有一个 Item 实例和一个子项数组，但我只有关联的名称（作为字符串）。如何将子项目分配给项目？

```
item = Item.new
subitems = [] << SubItem.new << SubItem.new << SubItem.new

item.("subitems".do_some_magic) = subitems
item.save 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:17:03.987

你可以这样做：

```
item.send("subitems") = subitems
item.save! 
```

# objective-c - TransitionStylePartialCurl 不适用于 ios 4.3

> ID：11157256
> 
> 赞同：0
> 
> 时间：2012-06-22T13:36:09.613
> 
> 标签：objective-c, uiviewanimation, uimodaltransitionstyle

UIModalTransitionStylePartialCurl 不适用于 ios 4.3，但是当我有完全相同的代码时，它适用于 ios5。

```
ViewController *infoView = [[[ViewController alloc] init] autorelease];

[infoView setModalPresentationStyle:UIModalPresentationFormSheet];
[infoView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
[self presentModalViewController:infoView.view animated:YES];
[UIView commitAnimations]; 
```

我不明白，这是 ios 4.3 转换的错误，有人有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:05:21.267

从[文档中](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/c_ref/UIModalTransitionStylePartialCurl)：

> 仅当父视图控制器呈现全屏视图并且您使用 UIModalPresentationFullScreen 模态呈现样式时，才支持此转换样式。尝试为父视图使用不同的外形尺寸或不同的演示风格会触发异常。

您正在使用`UIModalPresentationFormSheet`而不是，`UIModalPresentationFullScreen`因此**它不受支持。**

# php - 在 Mozilla 中禁用 iframe 上的键和鼠标单击

> ID：11157257
> 
> 赞同：1
> 
> 时间：2012-06-22T13:36:10.510
> 
> 标签：php, javascript, firefox, iframe

我已将此代码应用于 iframe id。

```
 <iframe id='<?php echo 'fraDisabled'.$i.$post->ID; ?>' src='<?php echo $file['url']; ?>'  ></iframe >

function disableContextMenu()
{

  var text="you dont have proper privelages to do this !!";
  window.frames['<?php echo 'fraDisabled'.$i.$post->ID; ?>'].document.oncontextmenu = function(){alert(text); return false;};
  window.frames['<?php echo 'fraDisabled'.$i.$post->ID; ?>'].document.onkeypress = function(){alert(text); return false;}; 
  window.frames['<?php echo 'fraDisabled'.$i.$post->ID; ?>'].document.onmousedown = function(){alert(text); return false;}; 
} 
```

PHP：

```
<iframe id='<?php echo 'fraDisabled'.$i.$post->ID; ?>' src='<?php echo $file['url']; ?>'>
</iframe> 
```

它适用于 Chrome，但不适用于 Mozilla Firefox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:42:03.387

可能不会帮助您`'`在文本变量中使用撇号。

改变...

```
var text='sorry you don't have permission to do this !!'; 
```

到...

```
var text='sorry you don\'t have permission to do this !!'; 
```

或者...

```
var text="sorry you don't have permission to do this !!"; 
```

**额外的**

您还需要将`''id''`最后两行中的`'id'`

**更新**

看起来像 Firefox 的问题，并且`windows.frames['id']`当框架只有一个 id 时使用。

尝试将您生成的动态id**添加**`id`到`name`.`<iframe>`

**另一条信息已经曝光**

我刚刚发现有`<iframe>`问题的将包含一个 PDF 文档。

看起来 Chrome 会像 OP 所期望的那样触发点击和上下文菜单事件......但 IE 和 Firefox 不会，这更像是我所期望的行为。

不幸的是，我认为您对此无能为力。从可用性的角度来看，您还无法使用滚动条在 PDF 上滚动（鼠标滚轮仍然可以使用）。

我仍然相信`name`FireFox 中需要该属性以供`window.frames`参考。

# python - 遍历迭代器

> ID：11157261
> 
> 赞同：2
> 
> 时间：2012-06-22T13:36:26.680
> 
> 标签：python, python-3.x, iterator

抱歉，如果这是一个愚蠢的问题，但我无法确定它是如何工作的。

我定义了一个具有类似结构的迭代器（它有点复杂，但模型会完成这项工作）：

```
class MyIterator ():

    def __init__(self):
        print ('nothing happening here')

    def __iter__ (self):
        self.a_list=[x for x in range (10)]
        for y in a_list:
            print(y)

    def __next__ (self):
        self.a_list = [x+1 for x in self.a_list]
        for y in a_list:
            print (y) 
```

但是我怎样才能遍历它呢？我总是必须手动调用这些方法吗？还是我只是使用了错误的工具？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T13:41:37.290

问题之一是您混合了两个概念： *iterable*定义了一个`__iter__()`返回*iterator*的方法，但没有`__next__()`方法。*迭代器*又定义了一个 方法`__next__()`和一个`__iter__()`返回的简单实现`self`。像这样的东西：

```
class Iterable(object):
    def __iter__(self):
        return Iterator()

class Iterator(object):
    def __init__(self):
        self.i = 0
    def __iter__(self):
        return self
    def __next__(self):
        result = self.i
        self.i += 1
        return result 
```

`__iter__()`另一种方法是将可迭代的方法定义为*生成器函数*：

```
class Iterable(object):
    def __iter__(self):
        i = 0
        while True:
            yield i
            i += 1 
```

# java - JRuby PermGen 空间不足甚至在 ruby 代码中使用 java 对象

> ID：11157262
> 
> 赞同：0
> 
> 时间：2012-06-22T13:36:28.103
> 
> 标签：java, ruby, spring, jruby, applicationcontext

描述：

如果我们使用 java 对象 jruby 也得到 permgen：

```
System.out.println("Initialazing..");
//Spring applicaton context
WebApplicationContext wac = (WebApplicationContext) AppContext.getApplicationContext();
// prepare path to internal ruby 
String scriptsPath = wac.getServletContext().getRealPath(RUBY_PATH);
String jrubyHome = wac.getServletContext().getRealPath("WEB-INF" + File.separator +     "jruby");
// Initializing Scripting container
ScriptingContainer container = new ScriptingContainer(isShared ?     LocalContextScope.SINGLETHREAD
            : LocalContextScope.THREADSAFE, LocalVariableBehavior.PERSISTENT);
// Configuring scriptingcontainer to avoid memory leaks
container.setCompileMode(RubyInstanceConfig.CompileMode.OFF);
System.setProperty("org.jruby.embed.compilemode", "OFF");
System.setProperty("jruby.compile.mode", "OFF");
// Setup ruby version
container.setCompatVersion(CompatVersion.RUBY1_9);
// Set jruby home
container.getProvider().getRubyInstanceConfig().setJRubyHome(jrubyHome);
List<String> loadPaths = new ArrayList<String>();
// load path
loadPaths.add(scriptsPath);
container.getProvider().setLoadPaths(loadPaths);
// ruby dispatcher initializing and run in simple mood
String fileName = scriptsPath + File.separator + "dispatcher_fake.rb";
// run scriplet
container.runScriptlet(PathType.ABSOLUTE, fileName);
// terminate container to cleanup memory without any effects
container.terminate();
container=null; 
```

小脚本：

```
ENV['GEM_PATH'] = File.expand_path('../../jruby/1.9', __FILE__)
ENV['GEM_HOME'] = File.expand_path('../../jruby/1.9', __FILE__)
ENV['BUNDLE_BIN_PATH'] = File.expand_path('../../jruby/1.9/gems/bundler-1.0.18/bin/bundle', __FILE__)

require 'java'

ROOT_DIR = File.dirname(__FILE__)
require File.join(ROOT_DIR, "base", "xsi.rb")

# require java classes
import org.jsoup.Jsoup
import org.jsoup.nodes.Document
import org.jsoup.nodes.Element

module JavaListing
  include_package "com.util.listing"
end

class A
  include JavaListing
  def run
    1000.times do |index|
      puts "iterating #{index}"
      # java class property
      prop = JavaListing::Property.new
      prop.proNo = 111
      prop.remoteID = "1111"
      prop.ownerID = "1111"
      prop.advertiserID = "1111"
      prop.title = "Atite"
      prop.summary = "Asummury"
      prop.description = "Adescription"
      # prop.images << JavaListing::Image.new("111", "Acaption")
      prop.lat = 12.23
      prop.lng = 13.21
      #prop.address = JavaListing::Address.new("Acity", "Acountry")
      prop.location = "Alocation"
      prop.policy = JavaListing::Policy.new("AcheckinAt", "AcheckoutAt")
      prop.surfaceArea = "Asurfscearea"
      # prop.notes[index] = JavaListing::Note.new("Atitle", "Atext")
      prop.order = "Aorder"
      prop.map = JavaListing::Map.new(true, 14)
      # 
      doc = Jsoup.parse("<root><elements><element>Application Error  #{index}  </element></elements></root>")
  end
end 
```

如您所见，我们正在使用所有 java 对象，但 Perm 仍然会发生内存泄漏

如果我们在 Spring 应用程序中创建对象并将 Application Context 传递给 ruby​​ 以便将来获取 bean，这并不能解决这个问题

> 在脚本容器中设置 ApplicationContext context = Spring application context

```
container.put("$context", context); 
```

> 红宝石代码

```
bean = $context.getBean("some_name")
bean.myMethod() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T17:17:34.413

解决方案是使用从当前 JVM 启动的单独 JVM：

[启动新的JVM](http://thilosdevblog.wordpress.com/2010/02/20/starting_a_new_jvm_in_java/)

# ios - 使用 GPS 的 iOS 在图像上显示蓝点？

> ID：11157263
> 
> 赞同：0
> 
> 时间：2012-06-22T13:36:28.950
> 
> 标签：ios, geolocation, gps

如何制作图像，对其进行地理参考并使其使用 GPS，在我的 iOS 应用程序中我站立的位置（假设图像在那里）出现一个蓝点。我如何处理这个来地理参考我的图像并完成这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:42:54.873

这样做的唯一方法是使用 MKMapView。您可以设置一个属性 -showsUserLocation，它将显示您需要的蓝点。

如果您需要在特定图像的顶部显示它......您将不得不发挥创意。也许为注释加载自定义图像。可以做到，这取决于您计划显示的地图有多大以及您的用例是什么。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:27:59.830

我将采取的步骤如下：

1.  使用位置管理器获取用户的位置
2.  捕捉图像
3.  不要将其保存到磁盘，而是将图像复制到一个名为“imageprefix_（*用户位置的纬度值*）_（*用户位置的经度值*）.png”之类的新文件中
4.  放入`MKMapView`你的`UIViewController`和设置 `[viewController.mapView showsUserLocation:YES]`
5.  显示下方或上方的图像。将来，如果您不在该位置，请使用图像标题中的纬度和经度值在您的`mapView`

祝你好运！

# android - 如何在选项卡下添加可扩展列表视图？

> ID：11157269
> 
> 赞同：0
> 
> 时间：2012-06-22T13:36:36.307
> 
> 标签：android, android-widget

如何在选项卡下添加可扩展列表视图？有没有办法将可扩展列表视图添加到选项卡？我的意思是单击选项卡然后只显示一个可扩展的列表视图，而不是更改活动。请帮我！多谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:57:04.263

可以做到。基本情况如下。

**tablayout.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="5dp" >
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="30dp"
            android:gravity="bottom" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" >
            <!-- General Info Tab -->
            <LinearLayout
                android:id="@+id/general_tab"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >
            </LinearLayout>
            <!-- Tool Tab -->
            <LinearLayout
                android:id="@+id/list_tab"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical" >
                <ExpandableListView
                    android:id="@+id/list1"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:drawSelectorOnTop="false" />
            </LinearLayout>
        </FrameLayout>
    </LinearLayout
</TabHost> 
```

**TabDemo.java**

```
public class TabDemo extends TabActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tablayout);

        tabHost = getTabHost();
        TabHost.TabSpec spec;
        spec = tabHost.newTabSpec("General").setIndicator("General")
                .setContent(R.id.general_tab);
        tabHost.addTab(spec);
        spec = tabHost.newTabSpec("List").setIndicator("List")
                .setContent(R.id.list_tab);
        tabHost.addTab(spec);
        populateTabs();  // your method to populate the tabs
    } 
```

# gradle - gradle task build 已经存在问题

> ID：11157271
> 
> 赞同：20
> 
> 时间：2012-06-22T13:36:44.153
> 
> 标签：gradle

我收到错误

```
Cannot add task ':webserver:build' as a task with that name already exists. 
```

奇怪的是我的`hello`任务很好，但我的`build`任务不是，是的，我正在尝试覆盖 Java 插件的构建任务。

主`build.gradle`文件：

```
allprojects {
   apply plugin: 'java'
   apply plugin: 'eclipse'

   task hello << { task -> println "I'm $task.project.name" }
   task build << { task -> println "I'm building now" }
}

subprojects {

    hello << {println "- I depend on stserver"}

    build << { println "source sets=$sourceSets.main.java.srcDirs" }
} 
```

我的孩子网络服务器`build.gradle`文件：

```
sourceSets.main{
  java.srcDirs = ['app']
}

build << { println "source sets=$sourceSets.main.java.srcDirs" }

hello << {println "- Do something specific xxxx"} 
```

这里的交易是什么，是压倒一切的`build`特殊还是什么？覆盖我自己的`hello`任务效果很好，我认为覆盖`build`也一样简单？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T14:32:42.120

您没有覆盖`hello`任务，您只是添加更多任务操作。您可以使用 覆盖任务`task foo(overwrite: true)`。我还没有找到重写`build`任务的充分理由；可能有更好的方法来实现你想要的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T15:14:36.297

> 这里的交易是什么，压倒一切的构建是特殊的或什么的。覆盖我自己的 hello 任务效果很好，我认为覆盖构建会一样简单吗？

行为*看起来*不同的原因是因为`build`任务已经存在并且`hello`不存在（而不是因为`build`是特殊的）。

在 gradle 中你不能这样做：

```
task hello << { print "hello" }
task hello << { print "hello again" } 
```

这将失败并出现熟悉的错误：`"Cannot add task ':hello' as a task with that name already exists."`.

由于`build`task 已经存在，因此拥有 second 是非法的`task build << { ... }`。但是，它适用于`hello`任务，因为它不存在，因此`task hello << { ... }`是合法的，因为它是`hello`任务的第一个声明。

如果您替换您的`task build << { ... }`with ，这只是为*现有*`build << { ... }`任务添加更多行为，它将“编译”得很好。

# c# - sql server 2005 中的存储过程

> ID：11157272
> 
> 赞同：-8
> 
> 时间：2012-06-22T13:36:44.623
> 
> 标签：c#, sql-server-2005, stored-procedures

我使用以下函数通过存储过程在数据库中插入值。但我有例外`sqlConnection.Open()`；如何解决这个问题？

```
 try
        {
            string dbConnectionString = "something";
            SqlConnection sqlConnection = new SqlConnection(dbConnectionString);
            SqlCommand command = new SqlCommand("sp_Test", sqlConnection);
            command.CommandType = CommandType.StoredProcedure;
            command.Parameters.AddWithValue("@id ", SqlDbType.Int).Value = TextBox1.Text;
            command.Parameters.AddWithValue("@FullName", SqlDbType.VarChar).Value = TextBox2.Text;
            sqlConnection.Open();
            command.ExecuteNonQuery();
            sqlConnection.Close();
        }
        catch (SqlException ex)
        {
            Console.WriteLine("SQL Error" + ex.Message.ToString());

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:49:05.847

好吧，你得到的错误与存储过程没有任何关系，但我可以回答“如何解决这个问题？”的问题。在您遇到的异常情况下。

首先，我希望您没有使用“某物”作为您的 sql 服务器的实际连接字符串。您应该使用真正的连接字符串。以下是一些可用于连接 SQLServer 的各种示例 - [http://www.connectionstrings.com/sql-server-2005](http://www.connectionstrings.com/sql-server-2005)

使用上述网址中的第一个示例

```
Data Source=myServerAddress;Initial Catalog=myDataBase;User Id=myUsername;Password=myPassword; 
```

您需要将“myServerAddress”更改为服务器的 IP 地址或主机名。这可能是“localhost”，也可能是您在网络上的另一台计算机。将“myDataBase”更改为您创建的数据库的名称，并确保该名称与可能配置为区分大小写的数据库完全匹配。最后将“myUsername”和“myPassword”更改为您在Sql Server Management Studio下访问服务器时使用的用户名和密码。

现在，假设您实际上已经完成了上述操作，您可以采取以下步骤来调试连接问题。

1.  Ping 计算机 - 从命令提示符键入“ping servername”，其中 servername 是运行 SQL Server 的服务器的名称或 IP 地址。如果您没有得到服务器的响应，那么您需要调试本地网络。

2.  如果服务器在本地运行，请尝试使用“。” 对于“myServerAddress”值。如果是 sqlserver express 版本，请使用 express 格式 - ".\SQLExpress" 或 "myServerAddress\SQLExpress"

3.  如果 SQL Server 在另一台计算机上运行，​​请尝试此 kb 文章中“更多信息”部分下的三个链接中的每一个 - [http://support.microsoft.com/kb/914277](http://support.microsoft.com/kb/914277) 这将确保支持远程连接。

但真正的问题是您无法连接到数据库。我建议首先搜索该问题的解决方案。或者也许在另一个问题中在 SO 上提供有关您的设置的更多信息。

希望有帮助，-马库斯

# java - GWT 中会话超时的鼠标移动

> ID：11157273
> 
> 赞同：2
> 
> 时间：2012-06-22T13:36:50.270
> 
> 标签：java, gwt, mouseevent

我正在研究 GWT。在我的应用程序中，我想在没有执行任何操作（包括鼠标事件）的 2 分钟后添加会话超时。

我编写了一个使用 GWT 会话对象的类。

```
public static boolean ValidSession(HttpSession session) {

        boolean aResult = true;

        logger.debug("Start of ValidSession");
        try
        {
            if(session!=null )
            {
                String strUserInf="";
                strUserInf=(String)session.getAttribute("userInf");
                logger.debug("User Inf in session is: " + strUserInf);
                if(strUserInf==null || strUserInf.trim().equals(""))
                {
                    logger.debug("User Info blank");
                    aResult =false;
                }

            }
            else
            {
                logger.debug("SessionNull");
                aResult=false;
            }
        }
        catch (Exception e) 
        {
            logger.error("Exception in ValidSession: ", e);
            aResult = false;                        
        }
        logger.debug("End of isSessionValid");
        return aResult;
    }

    public static void TimeUpdate(HttpSession session){
        session.setAttribute("lastAccessed", String.valueOf(session.getLastAccessed()));
        System.out.println("lastAccessed "+ session.getAttribute("lastAccessed"));
       } 
```

但它仅在 RPC 调用时重置计时器。我也想检测鼠标移动。

任何人都可以提出解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:47:34.963

您可以在模块加载时执行类似的代码。

创建一个每 2 分钟运行一次的计时器并设置会话过期标志：

```
 private static Timer SESSION_TIMER = new Timer() {
            public void run() {
                SessionFactory.putValue(SesisonKey.SESSION_EXPIRED,
                        true);
            }
        }; 
```

使用此方法在模块加载中调用此方法以更新计时器会话，如下所示：

```
 public static void renewTimer() {
            if (CLIENT_SIDE_TIMER != null) {
                CLIENT_SIDE_TIMER.cancel();
                SessionFactory.getClientInstance().put(
                        SesisonKey.SESSION_EXPIRED, false);
                //CLIENT_SIDE_TIMER.schedule(250 * 60 * 20);
                //1 Minute = 60000 Milliseconds
                CLIENT_SIDE_TIMER.schedule(60000 * 2);
            }
        } 
```

NativePreviewHandler 处理程序捕获鼠标事件并检查会话是否已过期或未标记。

```
 final NativePreviewHandler nativeHandler = new NativePreviewHandler() {
                    @Override
                    public void onPreviewNativeEvent(NativePreviewEvent event) {

                    preventBack();

                        if (SessionFactory
                                .getValue(SesisonKey.CLIENT_SESSION_EXPIRED) != null) {
                            boolean expire = (Boolean) SessionFactory
                                    .getValue(SesisonKey.CLIENT_SESSION_EXPIRED);
                            if (expire) {
                                boolean show= false;
                                //logout session code
                                ClientSideTimers.renewSessionTimer();
                            }
                        }
                    }
                };
                Event.addNativePreviewHandler(nativeHandler); 
```

如果您的屏幕稳定了 2 分钟，它将通过计时器将过期会话变量值设置为 false，如果值为 false，则执行注销。

SESSION_EXPIRED 是会话过期检查的常量变量，而不是 SessionFactory 是我的自定义工厂代码。你只是忽略我的项目模式中使用的变量。你只需要设置一个常数就可以了。让我知道是否还有任何疑问。

# macos - -bash: otool: command not found，你能教 bash 一个默认位置来查找命令吗？

> ID：11157277
> 
> 赞同：2
> 
> 时间：2012-06-22T13:37:11.220
> 
> 标签：macos, bash, shell, otool

我可以在我的文件系统中找到该工具命令：

```
/Applications/Xcode.app/Contents/Developer/usr/bin/otool 
```

如果我指定整个路径， otool 将起作用。

```
/Applications/Xcode.app/Contents/Developer/usr/bin/otool -tV hello -p _main 
```

但是，由于我必须在我引用的 hello.c 文件的文件夹中，如果我只是键入，bash 将不会自动找到 otool

```
otool -tV hello -p _main 
```

我在许多命令中遇到了同样的问题。**有什么方法可以设置 bash 以便它自动找到 otool （和类似的命令），而无需我每次都写出整个路径名？**谢谢！

注意：如果重要的话，我使用的是 Mac。

注意 2：我已经阅读了大量的“找不到命令”线程，但似乎没有一个回答教 bash 默认在哪里查找命令的问题。我觉得这个问题应该已经在某个地方得到了回答，但还没有遇到过。由于我将很快使用的唯一程序将与 iOS/Xcode 相关，因此这是值得的捷径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:42:35.110

```
PATH=$PATH:/Applications/Xcode.app/Contents/Developer/usr/bin 
```

把它放在你`~/.bashrc`的里面让它坚持下去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T20:51:35.093

您也可以尝试使用别名来执行此操作。例如

$ alias otool='/Applications/Xcode.app/Contents/Developer/usr/bin/otool'

您也可以在 bashrc/profile 文件中添加它。

# tridion - 如何使用 Tridion Anguilla 框架获取本地化项目？

> ID：11157278
> 
> 赞同：4
> 
> 时间：2012-06-22T13:37:11.313
> 
> 标签：tridion

我想在 Anguilla 框架中使用 GetLocalizedItems 方法。

我不知道如何创建新过滤器并设置条件或用于成功和失败的内容。

在图形用户界面中：

```
tridion.Web.UI.ContentManager.WhereUsed.GetListUsedItems(id, filter.conditions, 
    filter.columns, success, failure); 
```

这个命名空间中的方法是否打算由我们的扩展使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T01:14:09.440

## 构建过滤器

这是一个如何构建过滤器的示例

```
var filter = new Tridion.ContentManager.ListFilter();
filter.conditions.ItemTypes = 16 | 2; // folders and components
filter.conditions.Recursive = true;
filter.conditions.BasedOnSchema = "tcm:1-23-8,tcm:1-32-8".split(",");
filter.columns = Tridion.Constants.ColumnFilter.DEFAULT; 
```

或者来自 General.js 的这个极其简单的案例：

```
var templateFilter = new Tridion.ContentManager.ListFilter({ 
    conditions: { ItemTypes: [ itemType ] } 
}); 
```

* * *

## 调用 WCF 方法

您问题的第二部分确实已经在[https://stackoverflow.com/a/9385975/209103](https://stackoverflow.com/a/9385975/209103)中涵盖，尽管我会在这里更具体一点。

诸如此类的 WCF/AJAX 调用是异步执行的，因为它们可能需要一些时间才能完成。虽然您通常会在右括号后的行上简单地处理调用的结果，但您不能在 AJAX 调用中执行此操作，因为该行将在函数完成之前执行。相反，您必须传入一个或多个回调函数，一旦函数完成就会被调用。

当我第一次开始研究这样的方法时，我通常只传入两个函数，它们会进入我的浏览器的 JavaScript 调试器：

```
Tridion.Web.UI.ContentManager.WhereUsed.GetListUsedItems(
    "tcm:1-23", 
    filter.conditions, 
    filter.columns, 
    new function() { console.log(arguments); debugger; }, 
    new function() { console.log(arguments); debugger; }
); 
```

因此，当对 TCM 服务器的（异步）HTTP 调用成功时调用第一个（匿名）函数，而当调用失败时调用第二个函数。在我上面链接的答案中，我们称它们为`onSuccess`并使`onFailure`它们的性质更加明确。

Both functions in this case simply write the implicit `arguments` parameter that is always passed in JavaScript. They then break into the JavaScript debugger of your browser, so you can inspect the arguments further.

# php - 如何在 404 页面中获取用户输入作为参数？

> ID：11157286
> 
> 赞同：0
> 
> 时间：2012-06-22T13:37:40.867
> 
> 标签：php, apache, iis

假设我有一个网站`http://site.com`。当用户浏览一个不存在的页面`http://site.com/whatever.html`时，会显示一个默认的 404 页面`http://site.com/default.php`。

如何获取用户尝试浏览的内容？（`whateve.html`在这种情况下得到）。

这是一个共同的特点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:47:56.037

它在 Apache/Nginx 错误日志中。

您可以将文件grep为404

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:41:55.133

使用**$_SERVER['REQUEST_URI']**，您应该获得用户请求的文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:45:46.523

答案可能因您使用的服务器而异。对于像 Apache 和 Nginx 这样的普通服务器 - 如果你输入`http://site.com/whatever.html`& 如果whatever.html 不存在，那么将显示 404 页面的**内容**（在服务器配置中设置），但 URL 位置将是相同的`whatever.html`。

如果您想将参数传递给 404 页面，您可以尝试使用 Regex 之类的方法来获取捕获/匹配的值并将其传递给 404 页面，但我无法给您确切的答案，因为这取决于您使用的服务器. 请让我们知道这是否有效，或者这是您正在寻找的，我们会尽力提供更多帮助。

# google-maps - 如何离线运行谷歌地图请求？

> ID：11157287
> 
> 赞同：0
> 
> 时间：2012-06-22T13:37:40.847
> 
> 标签：google-maps

我正在使用谷歌地图进行可视化。但是，我必须向谷歌地图提出许多方向请求。

有没有办法“下载”地图的一部分，以及它的所有公共汽车/汽车/自行车路线信息，所以方向请求可以在本地完成？

如果可能的话，你能举一个粗略的例子来让我朝着正确的方向前进吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:47:52.290

不，没有对 Maps API 的离线访问，用于查看相关服务（如路由/方向）的磁贴。

此外，您必须始终确保这些类型的请求的结果显示在 Google 地图上（根据服务条款，地图必须免费公开）。

如果您正在寻找使用自己的数据集进行离线路由的能力，可以使用许多开源路由引擎。

# delphi - 文件\目录安全权限

> ID：11157288
> 
> 赞同：0
> 
> 时间：2012-06-22T13:37:43.973
> 
> 标签：delphi, file, permissions, directory

有一个烦人的问题，我基本上不知道它来自哪里:( 所以，主题是：当尝试从 localhost（来自实际文件系统）检查文件夹权限时，它（下面附加的代码）工作正常，但是当应用程序从网络（例如：\*machinename*）它没有。**当我请求任何权限时，我总是通过网络获得批准，但无法创建文件，例如，因为我没有足够的权限！**

```
iccFile_Security =
    class
        const
            FILE_READ_DATA        = $0001;
            FILE_WRITE_DATA       = $0002;
            FILE_APPEND_DATA      = $0004;
            FILE_READ_EA          = $0008;
            FILE_WRITE_EA         = $0010;
            FILE_EXECUTE          = $0020;
            FILE_READ_ATTRIBUTES  = $0080;
            FILE_WRITE_ATTRIBUTES = $0100;
            FILE_GENERIC_READ     = (    STANDARD_RIGHTS_READ
                                      or FILE_READ_DATA
                                      or FILE_READ_ATTRIBUTES
                                      or FILE_READ_EA
                                      or SYNCHRONIZE
                                    );
            FILE_GENERIC_WRITE    = (    STANDARD_RIGHTS_WRITE
                                      or FILE_WRITE_DATA
                                      or FILE_WRITE_ATTRIBUTES
                                      or FILE_WRITE_EA
                                      or FILE_APPEND_DATA
                                      or SYNCHRONIZE
                                    );
            FILE_GENERIC_EXECUTE  = (    STANDARD_RIGHTS_EXECUTE
                                      or FILE_READ_ATTRIBUTES
                                      or FILE_EXECUTE
                                      or SYNCHRONIZE
                                    );
            FILE_ALL_ACCESS       = (    STANDARD_RIGHTS_REQUIRED
                                      or SYNCHRONIZE
                                      or $1FF
                                    );
        strict private
        public
            class function check( _filename : String; _desiredAccess : DWORD                       ) : Boolean; overload;
            class function check( _filename : String; _desiredAccess : DWORD; out _failed : Boolean) : Boolean; overload;
    end;

implementation

{ iccFile_Security }

class function iccFile_Security.check( _filename: String; _desiredAccess: DWORD) :    Boolean;
var _failed : Boolean;
begin
    result := check( _filename, _desiredAccess, _failed) and not _failed;
end;

class function iccFile_Security.check( _filename : String; _desiredAccess : DWORD; out _failed : Boolean) : Boolean;
var Token       : DWORD;
    Status      : LongBool;
    Access      : DWORD;
    SecDescSize : DWORD;
    PrivSetSize : DWORD;
    PrivSet     : PRIVILEGE_SET;
    Mapping     : GENERIC_MAPPING;
    SecDesc     : PSECURITY_DESCRIPTOR;
begin
    Result := False;

    SecDesc     := nil;
    SecDescSize := 0;

    try
       GetFileSecurity( pchar( _filename),
                            OWNER_SECURITY_INFORMATION
                         or GROUP_SECURITY_INFORMATION
                         or DACL_SECURITY_INFORMATION,
                         nil,
                         0,
                         SecDescSize
                       );

        SecDesc := GetMemory( SecDescSize);

        if not GetFileSecurity( pchar( _filename),
                                   OWNER_SECURITY_INFORMATION
                                or GROUP_SECURITY_INFORMATION
                                or DACL_SECURITY_INFORMATION,
                                SecDesc,
                                SecDescSize,
                                SecDescSize
                              )
            then begin
                     _failed := true;
                     exit;
                 end;

        ImpersonateSelf( SecurityImpersonation);
        OpenThreadToken( GetCurrentThread, TOKEN_QUERY, False, Token);

        if Token = 0
            then begin
                     _failed := true;
                     exit;
                 end;

        Mapping.GenericRead    := FILE_GENERIC_READ;
        Mapping.GenericWrite   := FILE_GENERIC_WRITE;
        Mapping.GenericExecute := FILE_GENERIC_EXECUTE;
        Mapping.GenericAll     := FILE_ALL_ACCESS;

        MapGenericMask( Access, Mapping);
        PrivSetSize := SizeOf( PrivSet);
        AccessCheck( SecDesc, Token, _desiredAccess, Mapping, PrivSet, PrivSetSize,         Access, Status);
        CloseHandle( Token);

        if _desiredAccess = Access
            then result := Status;
    finally
        FreeMem( SecDesc, SecDescSize);
    end;
end; 
```

* * *

正确工作：

```
if not iccFile_Security.check( 'C:\temp\',     iccFile_Security.FILE_ALL_ACCESS)
        then ... 
```

不工作：

```
if not iccFile_Security.check( '\\testmachine\temp\',         iccFile_Security.FILE_ALL_ACCESS)
        then ... 
```

任何意见\建议？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:47:38.450

啊。我之前已经回答过这个问题——网络文件安全是一个不可靠的废话。（我为此倾倒了所有代码，而只是检查是否可以在目录中写入文件。）

参见，[http: //www.ureader.com/msg/16591730.aspx](http://www.ureader.com/msg/16591730.aspx)

阅读有关 AccessCheck() 的讨论；具体来说：

> 即使在执行 AccessCheck() 时，您也正在对“本地”生成的访问令牌进行访问检查，并使用与对象关联的安全描述符。当您直接访问远程系统上的对象时，会在远程系统上生成网络访问令牌。此网络访问令牌用于对对象执行访问检查以确定是否应授予或拒绝访问。该对象可以是文件或命名管道或 AD 对象。
> 
> 例如，如果用户是远程系统上管理员组的成员，当您直接访问远程系统上的对象时，在远程系统上生成的网络访问令牌将具有管理员组并允许访问。然而，当您使用本地访问令牌调用 AccessCheck() 时，您会得到不同的结果。

# java - 在 Java 中，如何记录发送到扬声器的声音输出？

> ID：11157289
> 
> 赞同：6
> 
> 时间：2012-06-22T13:37:44.700
> 
> 标签：java, audio, javasound, mixer

我有一个 Java 应用程序，它从多个来源接收声音，用户的能力之一是将应用程序中发生的事情记录到 AVI 文件中，我想在该视频捕获中包含声音。如何录制用户会听到的声音（例如，所有声音输入混合在一起的结果）？我可以弄清楚如何将实际的声音流输入到视频中，但我不确定从哪里获得该声源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:43:51.377

你读过这方面的java教程吗？[Accessing Audio System Resources](http://docs.oracle.com/javase/tutorial/sound/accessing.html)中有很多与您的问题相关的信息。

它详细介绍了一些推荐使用的类，并提供了它们的实现示例。

# javascript - 调用 $ajax() 时如何启动函数？

> ID：11157290
> 
> 赞同：0
> 
> 时间：2012-06-22T13:37:44.940
> 
> 标签：javascript, jquery

在jquery中就是这样。

我想要一些作为成功参数的东西，但它是在调用函数时运行的，而不是在我得到响应后运行。

示例（oajax 是开放身份验证的 ajax 扩展）

```
$.oajax({
            url: url,
            jso_provider: "facebook", // Will match the config identifier
            jso_scopes: false, // List of scopes (OPTIONAL)
            dataType: 'json',
            success: function(data) {
                fbposts=data.data

                //a bunch of code irellevant for the question

            },//success done
            error: function() {
                console.log("ERROR Custom callback()");
            }
        })
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:40:26.343

你在找[`.ajaxSend()`](http://api.jquery.com/ajaxSend/)吗？

> 在发送 Ajax 请求之前附加要执行的函数。

此函数（以及其他）允许您注册为*每个*AJAX 请求`.ajaxComplete`的不同阶段调用的回调函数。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:45:15.653

在普通的 ajax 函数中，您将其作为[beforeSend](http://api.jquery.com/jQuery.ajax/)传递：

```
$.ajax({
            url: url,
            dataType: 'json',
            beforeSend: function(jqXHR, status){
                // CODE HERE
            },
            success: function(data) {
                fbposts=data.data
            },
            error: function() {
                console.log("ERROR Custom callback()");
            }
        })
}; 
```

你必须检查 oajax 是否也有这个事件，但它可能有*

# jquery - 通过单击按钮使两个输入字段可编辑

> ID：11157293
> 
> 赞同：0
> 
> 时间：2012-06-22T13:37:55.743
> 
> 标签：jquery, html, ajax

我有两个输入字段，我想通过单击按钮进行编辑。

这两个字段的数据将在两个单独的列中写入数据库，这可以通过ajax实现。

但我想知道第一部分。尝试谷歌很多，但没有找到可行的解决方案:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:43:40.117

更改文本框上的 disabled 属性。

HTML：

```
<input id="i1" type="textbox" class="myInput" disabled="true" />
<input id="i2" type="textbox" class="myInput" disabled="true" />
<button id="i3"></button>
​ 
```

Javascript：

```
$("#i3").click(function(){
    $(".myInput").prop("disabled",false);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:53:13.950

## *[jsBin 演示](http://jsbin.com/urixoh/edit#javascript,html,live)*

html:

```
<input type="text" disabled="disabled"/>
<button class="toggle_input_state">enable / disable</button> 
```

**这允许您切换您的状态：**

```
$('button.toggle_input_state').on('click',function(){
   var $el = $(this).prev('input');
   $el.prop("disabled",!$el.prop("disabled"));
}); 
```

你可以`.prop()`从 jQuery 1.6 开始使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:49:00.753

尝试这个。

```
 $('#inputid').attr("disabled","disabled");
   $("#inputid").removeAttr('disabled'); 
```

喜欢

```
$("#buttonid").click(function(){
    $("#inputid").removeAttr('disabled');
});​ 
```

# java - 如何隐藏 SWT 浏览器或以无头模式运行？

> ID：11157301
> 
> 赞同：0
> 
> 时间：2012-06-22T13:38:27.507
> 
> 标签：java, swt, headless-browser

我从 SWT 浏览器获取渲染页面并将其导出为图像。我的问题是，当外壳不可见时，我无法正确导出它。如何隐藏浏览器并正确导出图像？

我尝试设置`shell.Visible()`为 false 但这会破坏图像导出。

这就是我导出图像的方式（不确定问题是否有必要）：

```
GC source = new GC (shell);  
Image image = new Image(display, browser.getClientArea()); 
source.copyArea(image, 0, 0);
ImageLoader io = new ImageLoader ();
io.data = new ImageData[] { image.getImageData() };
File f = new File (currentDir+"/workpng.png");
io.save (f.getAbsolutePath(), SWT.IMAGE_PNG); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:07:01.790

这可能是不可能的，因为当窗口不可见时，X 服务器/Windows 将丢弃所有渲染命令（渲染你看不到的东西没有意义）。

在这种情况下，浏览器的客户区是什么？

为了使这个工作，您需要让打开的外壳可见（即不被其他窗口隐藏）。像 Jenkins 这样的工具使用一个插件来启动一个带有[Xvfb](https://wiki.jenkins-ci.org/display/JENKINS/Xvfb+Plugin)或[Xvnc](https://wiki.jenkins-ci.org/display/JENKINS/Xvnc+Plugin)的 X 会话。设置 env 变量后`DISPLAY`，所有 UI 渲染都转到这些会话。

# wpf - 使用 SortDescription 时将字符串日期转换为日期

> ID：11157306
> 
> 赞同：4
> 
> 时间：2012-06-22T13:38:42.860
> 
> 标签：wpf, date, sorting

我的 WPF 应用程序使用`XMLDataProvider`它的数据。XML 文件有一个

```
<RELEASEDATE>dd/mm/yyyy</RELEASEDATE> 
```

对于列出的每个项目。我正在使用 a 对应用程序中的数据进行排序

```
Listbox1.Items.SortDescriptions.Add(new SortDescription("RELEASEDATE", ListSortDirection.Descending)); 
```

结果不是预期的，因为日期被视为字符串。

最优雅的方法是什么？我可以以某种方式转换为内联日期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:18:05.517

您必须实现自己的 IComparer：

```
class DateTimeComparer : IComparer
    {
        public int Compare(object x, object y)
        {
            //To Do : Implement DataTime Comparering
        }
    } 
```

现在将 IComparer 实现分配给集合的 ListCollectionView.CustomSort：

```
 ListCollectionView view = new ListCollectionView(ListBox.Items);

 view.CustomSort = new DateTimeComparer(); 
```

[查看类似问题](http://social.msdn.microsoft.com/Forums/en/wpf/thread/44efe318-0246-4021-a193-8a20b95ae55e)

# magento - 在安装脚本中更改类别属性

> ID：11157307
> 
> 赞同：2
> 
> 时间：2012-06-22T13:38:46.733
> 
> 标签：magento, installation

我有我的模块。此模块具有安装脚本，应在其中将自定义图像字段添加到类别。

```
$setup->addAttribute('catalog_category', 'additional_image', array(
    'type'              => 'varchar',
    'backend'           => 'catalog/category_attribute_backend_image',
    'label'             => 'Additional Image',
    'input'             => 'image',
    'global'            => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'visible'           => 1,
    'required'          => 0,
    'user_defined'      => 0,
    'default'           => '',
    'position'          => 6,
)); 
```

之后，它必须更改其他图像字段（图像、缩略图）的标题。我怎样才能得到这个系统的字段并改变它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:49:52.093

您可以使用`Mage_Eav_Model_Entity_Setup::updateAttribute()`方法来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T20:15:14.733

这是一个很长的路要走，但其他人可能需要这些信息。

```
Mage_Eav_Model_Entity_Setup::updateAttribute() 
```

有 5 个参数，其中 3 个是必需的。

我将使用自定义客户属性的示例：

```
$entityTypeId = 'customer'
$id = 'my_custom_attribute_code'
$field = 'is_used_for_customer_segment'
$value = '1'
$sortOrder = Not Needed 
```

如您所见，我正在使用客户实体来更新属性。我正在使用属性 id（代码）my_custom_attribute_code 更新我的自定义属性。我正在更新的此属性中的字段是 is_used_for_customer_segment 并将值设置为 yes(1)。

以下是如何将其作为更新执行的示例。

```
$installer->startSetup();

$installer->updateAttribute('customer', 'my_custom_attribute_code', 'is_used_for_customer_segment', '1');

$installer->endSetup(); 
```

# performance - 实体框架启动时间

> ID：11157318
> 
> 赞同：11
> 
> 时间：2012-06-22T13:39:30.133
> 
> 标签：performance, entity-framework, code-first, startup, precompiled

我想知道是否可以先加速使用 EF 代码进行的第一个查询。

我制作了一个包含 2 个字段的实体的小型测试程序，第一个查询需要 2.2 秒，第二个查询（完全相同）需要 0.006 秒。

我已经在预编译视图，所以在这里没有帮助。我认为问题在于在内存中构建模型需要一些时间，但是需要那么长时间吗？有没有办法像视图一样预编译这个模型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-28T12:26:24.173

当您进行第一次查询时，EF 会自行初始化，这需要一些时间。我认为加快 EF 的基础架构初始化没有太多工作要做，但是，如果您真正想要的是加快您所做的第一个查询而不是 EF 的初始化本身，那么您可以尝试强制 EF 进行初始化**在**运行您的第一个查询之前。

```
 using (var db = new MyContext())
        {
            db.Database.Initialize(force: true);
        } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T13:47:52.963

这篇文章：[Squash Entity Framework startup time with pre-compiled views](http://neverindoubtnet.blogspot.com.au/2012/03/squash-entity-framework-startup-time.html)详细描述了一个解决方案。

它涉及使用 Entity Framework Power Tools 中的**优化实体数据模型**选项来生成预编译的*.Views*类文件。

# java - Javac - 编译不同目录中的 .java 文件

> ID：11157327
> 
> 赞同：2
> 
> 时间：2012-06-22T13:40:21.680
> 
> 标签：java, javac

我正在创建一个提交系统，我希望将框架文件放在服务器上的固定位置——用户将把他们的文件上传到不同的目录中。

如果我只是使用 .class 文件，则执行以下命令时有效：

> java -cp /SubmissionSystem/Java/Assessment/Framework:/SubmissionSystem/Java/Assessment/Test Assessment4

我想知道是否可以调用类似的命令来编译不同目录中的 .java 文件而不是 .class 文件！

我会很感激任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:47:20.020

是的，只需替换`java`和`javac`而不是将带有源的文件夹传递给`-classpath`选项，将其传递给`-sourcepath`：

```
javac -cp /SubmissionSystem/Java/Assessment/Framework -sourcepath "/SubmissionSystem/Java/Assessment/Test Assessment4" 
```

当路径包含空格时，不要忘记正确引用。这将在适当的位置编译文件（因此它们将与 .java 源文件混合）。您可以`javac`使用该选项将它们写入新位置`-d`

# c# - 在点击的那一项下选择Row

> ID：11157328
> 
> 赞同：0
> 
> 时间：2012-06-22T13:40:21.877
> 
> 标签：c#, asp.net, repeater

有人可以告诉我如何选择我单击按钮所在的行下的行吗？

```
<asp:Button ID="btnmoveup" runat="server" Text="/\" OnCommand="MoveButton_Clicked"
                                    CommandName="UP" CommandArgument='<%# Eval("ProjectID") + ";"+Eval("Priority")%>'/>
                            </td>
                            <td>
                                <asp:Button ID="btnmovedown" runat="server" Text="\/" OnCommand="MoveButton_Clicked"
                                    CommandName="DOWN" CommandArgument='<%# Eval("ProjectID") + ";"+Eval("Priority")%>' /> 
```

后面的代码：

```
protected void MoveButton_Clicked(object sender, CommandEventArgs e)
{
string[] arguments = e.CommandArgument.ToString().Split(new char[] {';'});
string pid1;
int prior;
pid1 = arguments[0];
prior = int.Parse(arguments[1]); 
```

这给了我单击按钮所在行的优先级和 ProjectID。

我怎样才能得到下面这个行的优先级和项目？行在转发器控件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:50:21.463

将您的更改`CommandArgument`为`<%# Container.ItemIndex %>`.

然后在您的`Clicked`活动中，您可以执行以下操作：

```
int clickedIndex = int.Parse(e.CommandArgument);
int selectIndex = clickedIndex + 1; // or -1 depending on the button clicked.
var dataItem = (YourDataType)(yourRepeater.Items[selectIndex].DataItem);
var priority = dataItem.Priority;
var projectID = dataItem.ProjectID; 
```

或者，您可以将优先级和项目 ID 绑定到转发器中的隐藏字段，并使用`yourRepeater.Items[selectIndex].FindControl('yourHiddenFieldId').Text`或类似。

# plugins - Internet Explorer 9 不显示 svg 图形并且不提示安装查看器

> ID：11157330
> 
> 赞同：0
> 
> 时间：2012-06-22T13:40:37.197
> 
> 标签：plugins, svg, internet-explorer-9

我有两台机器。一个带有“锁定”的 ie9 ... 而另一个没有被我们的团体政策锁定。我试图弄清楚什么 ie 9 设置阻止我的锁定机器提示我安装 svg 插件。在“打开”框中，当我尝试加载具有 svg 图形的网页时，它会询问如果我想安装插件，我已经尝试过使用以下 IE 设置：

*   在隐私选项卡中弹出阻止程序设置。
*   activeX 过滤器
*   当 inPrivate 浏览开始时禁用工具栏和扩展。

如果有人有建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:45:01.830

IE9 可能内置了 SVG...http://blogs.msdn.com/b/ie/archive/2010/03/18/svg-in-ie9-roadmap.aspx

# html - CSS 3 过滤器带背景剪辑

> ID：11157331
> 
> 赞同：0
> 
> 时间：2012-06-22T13:40:38.413
> 
> 标签：html, css, internet-explorer-9, gradient

我有这个 CSS。属性 FILTER 在类 .crumb 中制作我的背景，这和 Chrome、Firefox、safari、iPad、iPhone、Android 完美运行......但原因不明。它只是不适用于ie9。我看到有半径的黑色边框，但背景完全是方形的。

```
.left-crumb {
margin-left:15px;
-webkit-border-top-left-radius:5px;
-webkit-border-bottom-left-radius:5px;
-moz-border-radius-topleft:5px;
-moz-border-radius-bottomleft:5px;
border-top-left-radius:5px;
border-bottom-left-radius:5px;
}

.crumb {
margin-top:20px;
margin-bottom:10px;
background-image:0 color-stop(0.3,#798aad), color-stop(0.51,#6276a0), color-stop(0.51,#556a97), color-stop(0.75,#566c98), to(#546993));
background:linear-gradient(top,#4c4c4c0%,#59595912%,#66666625%,#47474739%,#2c2c2c50%,#00000051%,#11111160%,#2b2b2b76%,#1c1c1c91%,#131313100%);
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#4c4c4c',endColorstr='#131313',GradientType=0);
font-weight:bolder;
border:solid 1px #54617D;
height:30px;
padding-left:10px;
padding-right:10px;
display:inline-block;
color:#FFF;
line-height:28px;
border-color:#484E59 #aaa #4C5C7A #54617D;
}

.right-crumb {
position:relative;
margin-right:10px;
padding-right:25px;
-webkit-border-top-right-radius:15px;
-webkit-border-bottom-right-radius:15px;
-moz-border-radius-topright:15px;
-moz-border-radius-bottomright:15px;
border-top-right-radius:15px;
border-bottom-right-radius:15px;
} 
```

这是一个快速的 HTML，您可以进行测试。

```
<div id="adminPanel"><a class="left-crumb crumb right-crumb" href="admin.php">Admin panel</a></div> 
```

# adminPanel 只是一个包含所有内容的 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:54:14.417

IE9 还不支持，但是你可以使用 SVG 来实现，请下载源代码并在此处查看演示

[http://css3wizardry.com/2010/10/29/css-gradients-for-ie9/](http://css3wizardry.com/2010/10/29/css-gradients-for-ie9/)

# google-maps-api-3 - 使用 Google Maps API v3 编辑形状时隐藏撤消按钮

> ID：11157332
> 
> 赞同：10
> 
> 时间：2012-06-22T13:40:44.530
> 
> 标签：google-maps-api-3

在 v3 Google Map 上编辑形状时，有没有办法隐藏（即：不显示，因为它很烦人）撤消按钮？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-21T12:37:09.680

尝试未记录的`suppressUndo`参数。

google.maps.Circle 似乎可以正常工作

```
var c = new google.maps.Circle({
    map: myMap,
    ...
    suppressUndo: true
}); 
```

问题跟踪器中的相关问题：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=4013](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4013)

# php - 调整图像大小 - imagemagick 使用 - quality 和 jpeg:extent 在一个命令中

> ID：11157338
> 
> 赞同：1
> 
> 时间：2012-06-22T13:41:13.513
> 
> 标签：php, imagemagick

我正在使用 imagemagick 调整图像大小......但是我想调整图像大小，以便它同时使用 jpeg:extent 和质量......

即，如果我有一个要调整大小的大图像，并且我使用以下命令： -resize 720 -quality 80 如果结果图像大于 250kb，那么我希望使用该命令`jpeg:extent=250kB`而不是`-quality 80`

这可以在一个命令中完成吗？..还是我必须执行多个程序才能实现这一目标？...关于J

顺便说一句，我不想​​只使用`jpeg:extent=250kB`以 80% 质量保存的图像比 250kb 小很多，我正在创建比他们需要的更大的图像......干杯 J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:59:11.687

您可以同时使用这两个选项。根据文档：

> 限制最大 JPEG 文件大小，例如 -define jpeg:extent=400kb。

此命令不定义实际大小，它只定义大小限制。这意味着如果未达到大小限制，质量将为 80

# javascript - 使用“精灵”插件将鼠标悬停在精灵上

> ID：11157340
> 
> 赞同：0
> 
> 时间：2012-06-22T13:41:28.147
> 
> 标签：javascript, jquery

我希望当鼠标悬停在精灵上时动画开始，当鼠标离开时动画消失。

我找到了一些最好的解决方案：[为什么 jQuery spritely 动画在第二个 mouseenter 上播放额外的帧？](https://stackoverflow.com/questions/6433720/why-does-jquery-spritely-animation-plays-an-extra-frame-on-second-mouseenter)，但是如果您在动画结束之前鼠标移出，它们都会完全出现故障。

那是因为“倒带”功能会独立于我离开鼠标时获得 9 帧

我对下面的解决方案提出了质疑，但它不起作用，我不知道为什么：

```
$(document).ready(function(e) {

    var frame_width = $('#sprite').width();

    var play_frames = 10;
    $('#sprite').hover(function(){
            $('#sprite').sprite({fps: 10, no_of_frames: 10, play_frames: play_frames});
            play_frames = 9;
        },

    function(){
            var bg_image = $('#sprite').css('background-position');
            bg_image = bg_image.split("px"); 
            bg_image = bg_image[0]; //Gets the sprite width

            remaining_frames = ((bg_image*(-1))/frame_width); //Gets the exact frame the image has stopped at 
            console.log(remaining_frames );
            $('#sprite').sprite({fps: 10, no_of_frames: 10, play_frames: remaining_frames , rewind: true});
        }       
    );
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:37:22.063

我放弃了让它工作并开发了我自己的插件，称为“spriteOnHover jQuery Plugin”，它非常适合在悬停和鼠标事件上为精灵设置动画，并且具有几乎可以完成所有技巧的很棒的参数。当然它是开源的。 [jQuery spriteOnHover](http://apolinariopassos.com.br/dev/sprite-on-hover-jquery-plugin/) 默认用法是`$('#yourSprite').spriteOnHover();`which 指向`$('#yourSprite').spriteOnHover({fps:30, orientation:"horizontal", rewind: true, loop: false, autostart:false;repeat:true})`，我们可以做很多变通方法来处理鼠标事件，这是值得的，访问页面了解更多详细信息，希望对您有所帮助！

# matlab - 网格上癌细胞的模型划分

> ID：11157349
> 
> 赞同：8
> 
> 时间：2012-06-22T13:42:01.303
> 
> 标签：matlab, loops, recursion, while-loop, simulation

我有一个 5000x5000 的网格，我正在尝试在 MATLAB 中实现一个简单的癌症划分模型。最初，它选择一个随机点 (x,y) 并使该细胞成为癌细胞。在第一次迭代中，它分裂 - 父细胞留在原地，子细胞被随机分配给任何相邻细胞。
到目前为止很容易。

我的问题是这样的：在连续的迭代中，一个子细胞通常会被分配给一个*已经*有癌细胞的细胞。在这种情况下，我希望子单元格取代它的位置并将已经存在的单元格“撞击”到相邻的单元格。如果该相邻单元格为空，则将其填充并且该过程停止。如果没有，则已经在该位置的单元格被碰撞，依此类推，直到最后一个单元格找到一个空白空间并且该过程停止。

这应该很简单，但我不知道如何编写代码以及使用什么样的循环。
我是物理科学家而不是程序员，所以请把我当傻子一样对待！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:38:33.710

这是我一起破解的一个功能，大致符合您提供的规格。

随着癌细胞的数量变大，我确实放慢了速度。

基本上我有几个变量，表示单元格位置网格的 NxN 矩阵（我称之为 a `plate`，因为网格是现有 matlab 函数的名称）

我可以快速迭代的点向量。我选择一个种子位置，然后运行一个 while 循环，直到网格已满。

在每次循环迭代中，我对每个单元格执行以下操作：

*   生成一个随机数以确定该单元格是否应该分裂
*   生成随机方向进行划分
*   找到该方向的第一个开盘位置
*   填充该位置

我没有对它进行广泛的测试，但它似乎有效。

```
function simulateCancer(plateSize, pDivide)

plate = zeros(plateSize, plateSize);
nCells = 1;
cellLocations = zeros(plateSize*plateSize,2);

initX = randi(plateSize);
initY = randi(plateSize);

cellLocations(nCells,:) = [initX, initY];

plate(initX, initY) = 1;

f = figure;
a = axes('Parent', f);
im = imagesc(plate, 'Parent', a);

while(nCells < (plateSize * plateSize))
    currentGeneration = currentGeneration+1;
    for i = 1:nCells
        divide = rand();
        if divide <= pDivide
            divideLocation = cellLocations(i,:);
            divideDir = randi(4);
            [x, y, v] = findNewLocation(divideLocation(1), divideLocation(2), plate, divideDir);
            if (v==1)
                nCells = nCells+1;
                plate(x,y) = 1;
                cellLocations(nCells,:) = [x,y];
            end
        end
    end
    set(im,'CData', plate);
    pause(.1);
end

end

function [x,y, valid] = findNewLocation(xin, yin, plate, direction)   
    x = xin;
    y = yin;
    valid = 1;
    % keep looking for new spot if current spot is occupied
    while( plate(x, y) == 1)
       switch direction
            case 1 % divide up
                y = y-1;
            case 2 % divide down
                y = y+1;
            case 3 % divide left
                x = x-1;
            case 4 % divide down
                x = x+1;
            otherwise
            warning('Invalid direction')
            x = xin;
            y = yin;
        return;
       end

       %if there has been a collision with a wall then just quit
       if y==0 || y==size(plate,2)+1 || x==0 || x==size(plate,1)+1 % hit the top
           x = xin; %return original values to say no division happend
           y = yin;
           valid = 0;
           return;
       end

    end

end 
```

*注意：*我没有考虑推送单元格，而是以一种将单元格留在当前位置并在行/列末尾创建新单元格的方式对其进行了编码。只要您不关心世代，它在语义上不同但在逻辑上具有相同的最终结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T01:09:44.917

受[另一个问题](https://stackoverflow.com/q/7963459/97160)的启发，我想使用图像处理技术来实现这个模拟。具体来说，我们可以使用[形态扩张](http://www.mathworks.com/help/toolbox/images/ref/imdilate.html)来扩散癌细胞。

这个想法是使用如下结构元素来扩展每个像素：

```
1 0 0
0 1 0
0 0 0 
```

其中中心是固定的，另一个`1`随机放置在其余八个位置之一。这将有效地沿该方向扩展像素。

执行膨胀的方式是创建一个空白图像，只有一个像素集，然后使用简单的 OR 运算累积所有结果。

为了加快速度，我们不需要考虑每个像素，只需要考虑由癌细胞簇形成的当前块周边的像素。里面的像素点已经被癌细胞包围了，再放大就没有效果了。

为了进一步加快速度，我们在一次调用中对所有被选择沿相同方向扩展的像素执行膨胀。因此，每次迭代，我们最多执行 8 次扩张操作。

这使得代码相对较快（我测试了高达 1000x1000 的网格）。此外，它在所有迭代中保持相同的时间（不会随着网格开始填满而减慢）。

这是我的实现：

```
%# initial grid
img = false(500,500);

%# pick 10 random cells, and set them as cancerous
img(randi(numel(img),[10 1])) = true;

%# show initial image
hImg = imshow(img, 'Border','tight', 'InitialMag',100);

%# build all possible structing elements
%# each one dilates in one of the 8 possible directions
SE = repmat([0 0 0; 0 1 0; 0 0 0],[1 1 8]);
SE([1:4 6:9] + 9*(0:7)) = 1;

%# run simulation until all cells have cancer
BW = false(size(img));
while ~all(img(:)) && ishandle(hImg)
    %# find pixels on the perimeter of all "blocks"
    on = find(bwperim(img,8));

    %# percentage chance of division
    on = on( rand(size(on)) > 0.5 );    %# 50% probability of cell division
    if isempty(on), continue; end

    %# decide on a direction for each pixel
    d = randi(size(SE,3),[numel(on) 1]);

    %# group pixels according to direction chosen
    dd = accumarray(d, on, [8 1], @(x){x});

    %# dilate each group of pixels in the chosen directions
    %# to speed up, we perform one dilation for all pixels with same direction
    for i=1:8
        %# start with an image with only those pixels set
        BW(:) = false;
        BW(dd{i}) = true;

        %# dilate in the specified direction
        BW = imdilate(BW, SE(:,:,i));

        %# add results to final image
        img = img | BW;
    end

    %# show new image
    set(hImg, 'CData',img)
    drawnow
end 
```

我还在 500x500 网格上创建了​​一个模拟动画，其中包含 10 个随机初始癌细胞（警告：.gif 图像大小约为 1MB，因此根据您的连接可能需要一些时间来加载）

![模拟动画](../Images/a68f0a9c3171c4e28ed3d71f8aa95f05.png)

# linux - 自动ftp crc长度错误后的gunzip

> ID：11157355
> 
> 赞同：0
> 
> 时间：2012-06-22T13:42:19.627
> 
> 标签：linux, unix, ftp, gunzip

我在到服务器的文件的 .gz 文件上面临 crc 错误/长度错误。

在手动检索文件时，我得到了 1932 字节的大小，并且 gunzip 没有任何问题。

但是当我通过 shell 脚本检索它时，到达的文件是 1931 字节。

有趣的是我正在 ftping 3 个文件，其中 2 个正确到达。

这就是我自动化它的方式：

```
echo "user $username $password" > $BATCH

echo "get reston.txt.gz reston.txt.gz" >> $BATCH
echo "get tuffnel.txt.gz tuffnel.txt.gz" >> $BATCH
echo "get atlanta.txt.gz atlanta.txt.gz" >> $BATCH

echo "exit" >> $BATCH

ftp -n -v $ipaddress < $BATCH > $LOG 
```

然后

```
gunzip *.txt.gz 
```

tuffnel，atlanta 工作正常，除非手动下载，否则 reston 不会使用 gunzip。

提前致谢，乐布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:47:57.007

也许 FTP 默认为 ASCII/文本模式？尝试“BIN”作为第一个命令：

```
echo "user $username $password" > $BATCH
echo "BIN" >> $BATCH

echo "get reston.txt.gz reston.txt.gz" >> $BATCH
echo "get tuffnel.txt.gz tuffnel.txt.gz" >> $BATCH
echo "get atlanta.txt.gz atlanta.txt.gz" >> $BATCH

echo "exit" >> $BATCH

ftp -n -v $ipaddress < $BATCH > $LOG 
```

# f# - 在 F# 中不可变

> ID：11157358
> 
> 赞同：8
> 
> 时间：2012-06-22T13:42:34.547
> 
> 标签：f#, immutability, shadowing

我知道 F# 中的变量默认是不可变的。但是，例如在 F# 交互中：

```
 > let x = 4;;

val x : int = 4

> let x = 5;;

val x : int = 5

> x;;
val it : int = 5
> 
```

因此，我将 4 分配给 x，然后将 5 分配给 x，它正在发生变化。这是正确的吗？它应该给出一些错误或警告吗？或者我只是不明白它是如何工作的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-22T13:54:19.277

编写时`let x = 3`，您将标识符绑定`x`到值`3`。如果您在同一范围内再次执行此操作，则您声明了一个新标识符，该标识符隐藏了前一个标识符，因为它具有相同的名称。

在 F# 中改变值是通过破坏性更新运算符`<-`. 对于不可变的值，这将失败，即：

```
> let x = 3;;

val x : int = 3

> x <- 5;;

  x <- 5;;
  ^^^^^^

stdin(2,1): error FS0027: This value is not mutable 
```

要声明可变变量，请在`mutable`后面添加`let`：

```
let mutable x = 5;;

val mutable x : int = 5

> x <- 6;;
val it : unit = ()
> x;;
val it : int = 6 
```

但你可能会问，这两者有什么区别？一个例子可能就足够了：

```
let i = 0;
while i < 10 do
    let i = i + 1
    () 
```

尽管看起来，这是一个无限循环。`i`循环内部的声明是隐藏外部的不同的`i`。外层是不可变的，所以它总是保持它的值`0`并且循环永远不会结束。正确的写法是使用可变变量：

```
let mutable i = 0;
while i < 10 do
    i <- i + 1
    () 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T13:47:10.157

`x`没有改变，只是被下一个声明隐藏了。例如：

```
> let x = 4;;
val x : int = 4
> let x = "abc";;
val x : string = "abc"
> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T14:13:14.377

您没有将 5 分配给`x`，而是定义了一个新变量。

以下示例显示有两个不同的变量。（它还表明你可以“访问”旧的 x 如果它在一个闭包中，由另一个函数使用）：

```
let x = 5;;
let f y = y+x;;
f 10;;
let x = 0;;
f 10;; 
```

产量

```
>
val x : int = 5

>
val f : int -> int
> val it : int = 15
>
val x : int = 0

> val it : int = 15 
```

如您所见，对 f 的两个调用都使用第一个变量`x`。定义`let x = 0;;`定义了一个新变量`x`，但没有重新定义`f`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T15:30:41.983

这是一个说明 F# 中标识符“阴影”（即隐藏）的最小示例：

```
let x = 0
do //introduce a new lexical scope
    let x = 1 //"shadow" (i.e. hide) the previous definition of x
    printfn "%i" x //prints 1
//return to outer lexical scope
printfn "%i" x //prints 0, proving that our outer definition of x was not mutated by our inner definition of x 
```

您的示例实际上有点复杂，因为您在 F# Interactive (FSI) 中工作。FSI 在您的示例中动态发出类似于以下内容的代码：

```
module FSI_0001 =
    let x = 4;;

open FSI_0001 //x = 4 is now available in the top level scope
module FSI_0002 =
    let x = 5;;

open FSI_0002 //x = 5 is now available in the top level scope, hiding x = 4
module FSI_0003 =
    let it = x;;

open FSI_0003
//... subsequent interactions 
```

# python - Python 2.4 的 Websocket 客户端库？

> ID：11157368
> 
> 赞同：2
> 
> 时间：2012-06-22T13:43:07.573
> 
> 标签：python, websocket

是否有任何兼容 Python 2.4 的 websocket 客户端库？

[Websocket For Python](https://github.com/Lawouach/WebSocket-for-Python)需要 python 2.7

[Autobahn](http://pypi.python.org/pypi/autobahn/0.4.10)需要 python 2.5（通过 twisted）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:54:32.540

当 Python 2.4 流行时，WebSockets 还不存在。

您的选择是向后移植您提到的库之一，编写您自己的最小版本以用于测试目的（不推荐）或 - 最佳解决方案 -**更新您的 Python 的古老版本！已经8岁了！**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T16:01:58.143

我认为支持 Python 2.4 的最后一个 Twisted 版本是 11.1。

如果这适用于 Autobahn .. 可以，你可以试试。我没有尝试。

话虽这么说，真的.. 升级你的 Py.

# c# - 动态创建文本框数组和标签 winforms

> ID：11157369
> 
> 赞同：0
> 
> 时间：2012-06-22T13:43:09.087
> 
> 标签：c#, winforms

我需要动态创建一组标签和文本框。

我有一个 groupBox，我需要将上面的内容添加到其中。那么正确对齐的最佳方法是什么？你如何获得位置？

下面不起作用

```
 public void TestCreateInputLabelAndTextBox()
    {

        foreach (Parameter parameter in Params)
        {
            var lbl = new Label();
            lbl.Name = "lbl" + parameter.Name;
            lbl.Text = parameter.Name;
            lbl.AutoSize = true;
            lbl.Location = new Point(7, 30);
            lbl.Name = "label1";
            lbl.Size = new Size(35, 13);

            var txtBox = new TextBox();
            txtBox.Name = "txt" + parameter.Name;
            txtBox.Text = parameter.Name;
            txtBox.Location = new Point(20, 20);
            txtBox.Location = new Point(49, 22);
            txtBox.Size = new Size(100, 20);

            groupBox1.Controls.Add(lbl);
            groupBox1.Controls.Add(txtBox);
        }

    } 
```

你怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:57:34.873

您必须制作一个文本框和标签数组，例如：

```
TextBox[] txt= new TextBox[10];
for (int i = 0; i <=10; i++) {
    txt(i) = new TextBox();
    txt(i).Text = i.Tostring();
    if (i > 0) {
        txt(i).Left = txt(i - 1).Right;
    }

    this.Controls.Add(txt(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T04:51:22.073

除了上面的评论，我还使用了 tablePanelLayout。

很抱歉，我的问题似乎还不清楚。我试图尽可能简洁，因为我相信你说的越多，你就越能迷惑可能会帮助你的人。

我所需要的只是一些指针。通过使用 tablePanellayout 解决了我的问题。感谢您的意见

# android - Android：活动开始时明确关注edittext

> ID：11157370
> 
> 赞同：8
> 
> 时间：2012-06-22T13:43:11.310
> 
> 标签：android, android-edittext

我的应用中有一些设置页面。一旦活动直接开始，它就会专注于编辑文本，我使用以下代码来清除焦点。

```
<RelativeLayout 
     android:id="@+id/RequestFocusLayout"
     android:focusable="true"
     android:focusableInTouchMode="true"
     android:layout_width="0px"
     android:layout_height="0px"/> 
```

在java代码中

```
 RelativeLayout focuslayout = (RelativeLayout) findViewById(R.id.RequestFocusLayout);
 focuslayout.requestFocus(); 
```

上面的代码在活动第一次开始时工作正常，如果相同的活动再次开始，自动编辑文本获得焦点。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-18T19:53:19.157

实际上，**活动中的第一个可聚焦视图接收初始焦点**。如果那恰好是您的`EditText`，它将最初集中。

如果你不想这样，这里是你的选择：

### 聚焦*另一个*视图

以编程方式确定您希望最初关注的视图。

```
@Override
protected void onStart() {

    super.onStart();
    findViewById( R.id.yourOtherViewId ).requestFocus();
} 
```

### 使布局中的*早期视图**可聚焦*

如果您宁愿它看起来好像“没有视图具有初始焦点”，您可以使父视图组成为焦点。在以下示例中，我`LinearLayout`通过设置使我的焦点`android:focusableInTouchMode="true"`：

```
<LinearLayout
    android:focusableInTouchMode="true"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <EditText
        ... 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-22T14:12:39.753

```
If Come back from other activity edittext get focused. 
```

将这些行放在 onStart() 或 onReusme()

```
 RelativeLayout focuslayout = (RelativeLayout) findViewById(R.id.RequestFocusLayout);
 focuslayout.requestFocus(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-22T11:16:09.837

我使用了此页面中显示的解决方案，但它不起作用。将此属性添加到您的活动标记到 AndroidManifest 中：

```
android:windowSoftInputMode="stateHidden" 
```

它完美地工作。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-22T15:43:54.943

如果您的 EditText 是您的 RelativeLayout 的子级，您可以使用它`android:descendantFocusability`来请求焦点：

```
<RelativeLayout 
     android:id="@+id/RequestFocusLayout"
     android:focusable="true"
     android:layout_width="0px"
     android:layout_height="0px" 
     android:descendantFocusability="beforeDescendants" 
     android:focusableInTouchMode="true" /> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-10-14T08:06:47.787

我真的只`android:focusableInTouchMode="true"`在我的**父母视图组**中提供帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-22T15:22:18.560

在布局 XML 文件中，在 EditText 上指定一个 imeOption：

```
android:imeOptions="actionGo" 
```

接下来，在 Activity 的 java 文件中为 EditText 添加一个动作监听器

```
mYourEditText.setOnEditorActionListener(new TextView.OnEditorActionListener() {
    public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
        if (actionId == EditorInfo.IME_ACTION_GO) {
            // hide virtual keyboard
            InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(mYourEditText.getWindowToken(), 0);
            return true;
        }
        return false;
    }
}); 
```

其中 mYourEditText 是一个 EditText 对象

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-22T13:45:10.367

将代码删除焦点放在 onStart() 方法中，它应该可以正常工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-18T22:14:08.663

如果在启动 Activity 时，它会专注于屏幕上的 EditText。利用

```
android:focusableInTouchMode="true" 
```

在包含该 EditText 的父级中。就像 EditText 在 RelativeLayout 中一样，在 RelativeLayout 中使用这一行。

# mysql - 学习 PDO 查询

> ID：11157373
> 
> 赞同：1
> 
> 时间：2012-06-22T13:43:18.727
> 
> 标签：mysql, pdo

固定的！问题是我不知道您必须初始化与 PDO 的连接，与正常连接分开：

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass); 
```

我正在尝试出于安全目的学习 PDO + 只是好的做法。这对我如何将插入查询转换为 PDO 是否正确？它似乎不起作用。$dbh 必须是我与服务器的连接正确吗？

```
 $stmt = $dbh->prepare("INSERT INTO users (social_id, name, email, social_network, profile_pic) VALUES (:social_id, :name, :email, :social_network, :profile_pic)");
                        $stmt->bindParam(':social_id', $social_id);
                        $stmt->bindParam(':name', $name);
                        $stmt->bindParam(':email', $email);
                        $stmt->bindParam(':social_network', $social_network);
                        $stmt->bindParam(':profile_pic', $profile_pic);

                        // insert one row
                        $stmt->execute(); 

                        $user_id = $dbh->lastInsertId(); 
```

由此：

```
 mysql_query("INSERT INTO users (social_id, name, email, social_network, profile_pic)
                                            VALUES ('$social_id', '$name','$email', '$social_network','$profile_pic')");                

                            $user_id = mysql_insert_id(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:30:09.437

问题是我不知道您必须初始化与 PDO 的连接，与正常连接分开：

```
$dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass); 
```

# iphone - CoreImage CIColorCube 的格式化数据

> ID：11157379
> 
> 赞同：0
> 
> 时间：2012-06-22T13:43:27.167
> 
> 标签：iphone, core-image

我正在尝试将任意 3D Luts 应用于 iOS 上的图像，但我被卡住了。

我一生都无法弄清楚如何正确格式化 CIColorCube 的立方体数据。

根据我从 WWDC 视频中截取的简短屏幕截图，我已经完成了我所能做的，但我真正需要的是某种工作模板。是否有任何文档包含硬编码多维数据集的示例，而不是 ImageApp 示例代码中显示的程序 ICC 生成的文档？

现在我的立方体数据看起来像你在下面看到的（为了简洁起见，中间被切掉了）。它抛出错误：

```
"Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<CIColorCube 0xb46a850> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key inputCubedata.'" 
```

任何帮助都将不胜感激，我正在为此而努力。我找不到任何 CIColorCube 所期望的已售示例（如在工作示例中，而不仅仅是解释）。

```
uint8_t color_cube_data[4096*4] = {
    0, 0, 0, 1,
    17, 0, 0, 1,
    33, 0, 0, 1,
    51, 0, 0, 1,
    68, 0, 0, 1,
    84, 0, 0, 1,
    102, 0, 0, 1,
    119, 0, 0, 1,
-----etc etc etc
    153, 255, 255, 1,
    170, 255, 255, 1,
    186, 255, 255, 1,
    204, 255, 255, 1,
    221, 255, 255, 1,
    237, 255, 255, 1,
    255, 255, 255, 1
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T08:08:20.373

如果没有更多信息，我无法帮助您解决所有问题，但我认为您当前的错误可能是由此造成的。确保设置多维数据集数据的代码行如下所示...

[_colorCube setValue:color_cube_data forKey:@" **inputCubeData** "];

不是这个...

[_colorCube setValue:color_cube_data forKey:@" **inputCubedata** "];

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T10:57:14.833

在将 3D LUT 作为参数传递给 CIFilter 之前，必须将其包装到 NSData 中。立方体值在 [0.0 : 1.0] 范围内

```
NSData * cube_data = [NSData dataWithBytes:color_cube_data length:4096*sizeof(float)*4];

[filter setValue:input_image forKey:@"inputImage"];
[filter setValue:cube_data forKey:@"inputCubeData"];
[filter setValue:[NSNumber numberWithFloat:16] forKey:@"inputCubeDimension"]; 
```

inputCubeDimension 的值是严格的二的幂。

# java - 可以用 Java 创建 Internet 过滤器吗？

> ID：11157380
> 
> 赞同：0
> 
> 时间：2012-06-22T13:43:29.503
> 
> 标签：java, security, browser, filter

我已经使用 Java 大约一年了，并且对开始网络基础知识很感兴趣。无论如何，可以在 Java 中创建一个 Web 过滤器，比如在传入的网页中搜索某些关键字吗？这样您就可以过滤掉亵渎和恶意软件。

如果是这样，这种应用程序的基础是什么？（这是在客户端，而不是服务器上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:23:33.373

解决此问题的一种方法是编写 Java 代理服务器，然后将有问题的浏览器定向到服务器，然后一旦连接通过代理，您就可以检查内容。

[https://stackoverflow.com/questions/860362/write-http-proxy-in-java](https://stackoverflow.com/questions/860362/write-http-proxy-in-java)

^ 这篇 StackOverFlow 文章提供了一些很好的链接，指向有关如何执行此操作的文章。我希望这在某种程度上有所帮助，恐怕你的问题有点含糊。

祝你好运。

# scala - 构造函数中带有可变参数的函数

> ID：11157385
> 
> 赞同：1
> 
> 时间：2012-06-22T13:43:47.603
> 
> 标签：scala, variadic-functions, first-class-functions

我试图让它在 Scala 中工作：

```
class MyClass(some: Int, func: AnyRef* => Int) {
} 
```

上面的代码不会编译（为什么？），但下面的代码：

```
class MyClass(some: Int, func: Seq[AnyRef] => Int) {
} 
```

没关系，但两者是等价的吗？如果是这样，那么我该如何使用`func`inside `MyClass`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:08:02.323

如果您使用括号，第一个（使用可变参数）有效：

```
class MyClass(some: Int, func: (AnyRef*) => Int) 
```

然而的两种形式`func`并不相同。第一个版本采用可变参数输入，因此您可以将其称为`func(a,b,c,d)`，但第二个版本采用 a`Seq`作为输入，因此您可以将其称为`func(Seq(a,b,c,d))`。

比较一下：

```
class MyClass(some: Int, func: (AnyRef*) => Int) {
  def something() = {
    func("this","and","that") + 2
  }
} 
```

对此：

```
class MyClass(some: Int, func: Seq[AnyRef] => Int) {
  def something() = {
    func(Seq("this","and","that")) + 2
  }
} 
```

# asp.net - Linq 查询返回同一行 12 次

> ID：11157386
> 
> 赞同：4
> 
> 时间：2012-06-22T13:43:48.057
> 
> 标签：asp.net, linq, entity-framework, linq-to-entities

您好我已经编写了一个 linq 查询来从实体模型中获取记录。我得到了完美数量的记录，但都是一样的。这是我的查询

```
Entities.TEST.Where(a => a.ID.ToUpper().Equals(ID.ToUpper())).OrderBy(s => s.NAME).ToList(); 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T17:06:15.670

您需要确保实体数据模型中的实体键是唯一的。

因此，在您的示例中， ID 应该是您的 Test 实体的实体键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T16:47:43.540

您的查询应该有效，我有一个适用于北风 DB 的类似示例：

```
 var ctx = new NorthwindEntities();
        var emp = ctx.Employees.Where(e => e.TitleOfCourtesy.Equals("ms.", StringComparison.OrdinalIgnoreCase)).OrderBy(n => n.FirstName).ToList(); 
```

请在[LinqPad](http://www.linqpad.net/ "LinqPad")中检查您的查询。您将看到结果和生成的 SQL。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-22T13:46:55.640

用 == 替换 Equals 就可以了

# java - Java中的系统类

> ID：11157387
> 
> 赞同：2
> 
> 时间：2012-06-22T13:43:48.083
> 
> 标签：java

我正在学习`Java`，据我所知，只能`abstract classes and interfaces`实例化。然而，文档`java.lang.System`说它不可能`instantiated`既不是抽象也不是接口。

我对此没有任何解释。有人可以解释一下吗？

此外，有人可以创建这样的课程吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T13:46:38.947

很简单：它没有公共构造函数。

你可以自己做：

```
final public class Abc {
   private Abc() {}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:57:50.733

java.lang.System 是 java 版本的“静态”类，意思是只有静态方法的类，并且不需要或允许在使用之前创建实例。

由于 java 不允许在类定义中使用关键字“static”（如 C#），因此实现此类静态类的最佳方法是将其构造函数设为私有。例如：

```
public final class System {
    private System() { throw new UnsupportedOperationException(); }

    public static void method1() { ... }

    ...other public static methods
} 
```

这不是万无一失的，即。由编译器检查，但会限制类只能从它自己的方法之一中创建，程序员应该知道不要这样做（如果他们忘记了，异常会提醒他们这样做）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:46:08.290

要实例化一个类，您需要一个可见的构造函数。不过，java.lang.System 没有提供。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-22T13:46:26.653

简单：创建一个 class `final`，所以它不能被扩展并让它有一个`private`构造函数，所以 a`new System()`不起作用。

就是这样`System`工作的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T13:48:17.960

您不能实例化一个没有**公共构造函数**的类，只需创建一个具有私有构造函数的类并使其成为最终类，因此没有其他类可以扩展它：

```
public final class MyClass {
    private MyClass() {
    }
} 
```

请注意，您要么需要一个公共静态成员来为您实例化类的对象（参见单例模式），要么只需要静态成员。

# c# - 创建只有一个班级成员的列表

> ID：11157388
> 
> 赞同：12
> 
> 时间：2012-06-22T13:43:48.527
> 
> 标签：c#, list

我有这个类的列表：

```
public class Data
{
   public string name {get; set;}
   public int width {get; set;}
} 
```

我想创建一个只返回 name 属性列表的方法。像这样：

```
public List<string> GetAllNames()
{ return MyDataList<name>.ToList(); } 
```

所以，如果我有这个列表：

1.  `name`= 乔恩 - `width`= 10
2.  `name`= 杰克 - `width`= 25

我想要以下列表：

1.  `name`=乔恩
2.  `name`= 杰克

可能吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-22T13:45:23.807

使用 LINQ：

```
public List<string> GetAllNames()
{
    return MyDataList.Select(i => i.name).ToList();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:46:34.420

如果您使用的是 .NET 3.5 (VS2008) 或更高版本，请使用扩展方法：

```
public class Data { String Name; Int32 Width; }
public List<Data> MyData = new List<Data>();

public static IEnumerable<String> GetNames(this List<Data> data) {
    foreach(Data d in data) yield return d.Name;
}
// or use Linq to return a concrete List<String> implementation rather than IEnumerable. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:46:36.213

```
public List<string> GetAllNames()
{ 
    return myDataList.Select(item => item.name).ToList();
} 
```

# bash - 查找并替换为 sed

> ID：11157389
> 
> 赞同：3
> 
> 时间：2012-06-22T13:43:51.503
> 
> 标签：bash, replace, sed, find

我有以下问题。

我有一个包含很多单词的文件，我要做的就是在另一个文件中找到这些单词，然后用一个字母替换它们。

我不知道我必须删除的单词（太多了！）所以我不知道如何使用以下 sed 命令

```
$ sed -i 's/words_old/word_new/g' /home/user/test.txt 
```

但是我认为我还必须使用 cat 命令：

```
$ cat filewithwordstobedeleted.txt 
```

但我不知道如何将它们结合起来。

感谢你们对我的帮助！:)

法比奥

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:54:37.983

假设您每行有一个要删除的单词，那么一个简单的 shell 循环可以帮助您：

```
cat filewithwordstobedeleted.txt | while read word; do
    sed -i "s/$word/null/g" /home/user/test.txt
done 
```

请注意，使用`cat`并不是绝对必要的，但可以使此示例更易于阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:58:39.670

如果您的单词列表是每行一个并且不是很长：

```
sed -ri "s/$(tr "\n" "|" < filewithwordstobedeleted.txt | head -c-1)/null/g" /home/user/test.txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:42:10.440

这可能对您有用（GNU sed）：

```
# cat <<\! >/tmp/a
> this
> that
> those
> !
cat <<\! >/tmp/b
> a
> those
> b
> this
> c
> that
> d
> !
sed 's|.*|s/&/null/g|' /tmp/a
s/this/null/g
s/that/null/g
s/those/null/g
sed 's|.*|s/&/null/g|' /tmp/a | sed -f - /tmp/b
a
null
b
null
c
null
d
cat <<\! >/tmp/c
> a
> this and that and those
> b
> this and that
> c
> those
> !
sed 's|.*|s/&/null/g|' /tmp/a | sed -f - /tmp/c
a
null and null and null
b
null and null
c
null 
```

# javascript - 添加文本框 gmail - 浏览器扩展

> ID：11157396
> 
> 赞同：0
> 
> 时间：2012-06-22T13:44:10.070
> 
> 标签：javascript, ajax, gmail, greasemonkey, gmail-contextual-gadgets

是否有 JS 框架或库可以将文本/复选框添加到 gmail UI？

请注意，其中包含的数据将通过 AJAX - JSON 对象发送到特定服务器。

想法是制作具有此功能的 Chrome 扩展程序。

类似于：

![邮件界面](../Images/314116e83df3b1e0f14d3f5b28b24ded.png)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:45:32.330

您可以为此编写[Greasemonkey](http://en.wikipedia.org/wiki/Greasemonkey)脚本。谷歌浏览器默认支持它。

# ms-access - vba中的DSum函数

> ID：11157398
> 
> 赞同：0
> 
> 时间：2012-06-22T13:44:19.570
> 
> 标签：ms-access, vba

当我点击一个按钮时，我想在文本框中显示一列的总和。但它给了我一个编译错误：“错误数量的争论或无效的属性分配”

下面的代码是在 vba 中实现的。

这是我使用的代码：

```
Text19 = Nz(DSum("Total_Units", "6_Provincial_SUB", , "[BudgetYear] =" & [Combo5] & " And [Program_Name] ='" & Replace([Combo7], "'", "''") & "'"), 0) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:50:20.863

`DSum`有三个参数。你有四个。去掉多余的逗号

```
Text19 = Nz(
    DSum(
        "Total_Units",
        "6_Provincial_SUB", <==== Here I dropped a comma (,)
        "[BudgetYear] =" & [Combo5] & " And [Program_Name] ='" &
            Replace([Combo7], "'", "''") & "'"
    ),
    0
) 
```

当这样的事情发生时，我尝试通过缩进上面的表达式来找到问题，以便找到匹配的大括号等。没有行继续符“_”这将不起作用，但它让您了解结构表达方式。

* * *

我的库中有这些功能。他们帮助我创建 SQL 字符串

```
Public Function SqlStr(ByVal s As String) As String
'Input: s=""      Returns: NULL
'Input: s="abc"   Returns: 'abc'
'Input: s="x'y"   Returns: 'x''y'

    If s = "" Then
        SqlStr = "NULL"
    Else
        SqlStr = "'" & Replace(s, "'", "''") & "'"
    End If
End Function

Function Build(ByVal s As String, ParamArray args()) As String
'Build("FirstName = {0}, LastName = {1}","John","Doe") --> 
'"FirstName = John, LastName = Doe".
'"\n" is expanded with vbCrLf.

    Dim i As Long

    s = Replace(s, "\n", vbCrLf)
    For i = 0 To UBound(args)
        s = Replace(s, "{" & i & "}", Nz(args(i)))
    Next i
    Build = s
End Function 
```

通过使用它们，您的 SQL 将像这样构造

```
sql = Build("[BudgetYear] = {0} AND [Program_Name] = {1}", _
            Combo5, SqlStr(Combo7)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:50:05.787

域参数后的逗号太多：

```
 "6_Provincial_SUB", , 
```

这将使空间成为标准参数，而实际标准成为未知的第四个参数。

# sql - 对从先前连接中检索到的表进行连接

> ID：11157400
> 
> 赞同：1
> 
> 时间：2012-06-22T13:44:31.397
> 
> 标签：sql, sql-server-2008, join

有什么想法可以在从以前连接的表中的数据中检索到的表上创建连接吗？例如，我有一个包含现有表名称、这些表的显示字段以及这些表的主 ID 字段的对象表。我想加入对象表以及对象表中指定的表。

```
 select T.field1,T.field2,T.field3,O.DisplayName
 from tableT as T
 inner join objects as O on T.SystemObjectID = O.SystemObjectID
 inner join O.TableName as X on X.O.ID = T.SystemObjectRecordID 
```

我知道上面的脚本不正确。但是完成这项任务的最简单最有效的方法是什么？我希望我清楚我在问什么...

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:46:51.730

你不能那样做。

您可以做的是获取结果并创建一个作为 SQL 查询的字符串。

您甚至可以将该查询参数化并使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)执行它。
- 该链接有一些很好的示例可以帮助您入门。

这是因为 SQL 在执行之前被编译成执行计划。此时它需要知道表，决定要使用的索引等。

这意味着数据就是数据，sql就是sql。您不能使用后期绑定脚本技巧来修改已经运行的查询。

恐怕 你被编写 SQL *（动态 SQL）的 SQL 卡住了。*

# assembly - (a*b)/256 和 MMX

> ID：11157404
> 
> 赞同：2
> 
> 时间：2012-06-22T13:44:40.407
> 
> 标签：assembly, sse, mmx

我想知道是否可以使用 MMX 寄存器中的四个并行值进行以下计算：

```
(a*b)/256 
```

其中**a**是有符号字，**b**是 0-256 范围内的无符号值（混合因子）

I think my problem is that I'm not sure about how (or if) *pmullw* and *pmulhw* will help me with this task.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T19:19:26.187

如果您知道 a*b 不会溢出有符号的 16 位字段，那么您可以使用 pmullw（intrinsic`_mm_mullo_pi16`或 SSE intrinsic `_mm_mullo_epi16`）然后右移 8 以除以 256。

在哪里

MMX：

```
__m64 a, b;
...
a = _mm_mullo_pi16 (a, b);
a = _mm_srli_pi16 (a, 8); 
```

上交所2：

```
__m128i a, b;
...
a = _mm_mullo_epi16 (a, b);
a = _mm_srli_epi16 (a, 8); 
```

# javascript - 使用 Ext.DIrect 提交 extjs 表单

> ID：11157406
> 
> 赞同：1
> 
> 时间：2012-06-22T13:44:46.057
> 
> 标签：javascript, extjs4

我想使用 Ext.Direct 提交表单，并且我遵循文档中存在的所有指南仍然收到这个奇怪的错误

```
Error: Ext.data.Connection.setOptions(): No URL specified 
```

这是我的表单的 javascript 代码

```
Ext.define('LOGIN.view.SignIn', {
    extend: 'Ext.form.Panel',
    alias: 'widget.signin',
    title: 'Sign-In',
    items: [{
        xtype: 'textfield',
        name: 'UserName',
        fieldLabel: 'UserName',
        allowBlank: 'false'
    }, {
        xtype: 'textfield',
        name: 'Password',
        fieldLabel: 'Password',
        allowBlank: 'false',
        inputType: 'password'
    }],
    buttons: [{
        text: 'Sign-In',
        handler: function () {
            this.up('form').getForm().submit({});
        }
    }, {
        text: 'Sign-Up -->',
        disabled: true,
        handler: function () {
            this.up('#LoginPanel').getLayout().setActiveItem(1);
        }
    }],
    api: {
        submit: LogIn.SignIn
    }
}) 
```

我应该改变什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:53:21.257

我找到了深入框架的答案。
我需要使用以下代码并在构造函数中定义 api，因为我猜这个特定的 intialConfig 不会自动采用

这是代码

```
Ext.define('LOGIN.view.SignIn', {
    extend: 'Ext.form.Panel',
    alias: 'widget.signin',
    title: 'Sign-In',
    constructor: function (config) {
        Ext.applyIf(config, {
            // defaults for configs that should be passed along to the Basic form constructor go here
            api: {
                submit:LogIn.SignIn
            }
        });
        this.callParent(arguments);
    },
    items: [{
        xtype: 'textfield',
        name: 'UserName',
        fieldLabel: 'UserName',
        allowBlank: 'false'
    }, {
        xtype: 'textfield',
        name: 'Password',
        fieldLabel: 'Password',
        allowBlank: 'false',
        inputType: 'password'
    }],
    buttons: [{
        text: 'Sign-In',
        handler: function () {
            this.up('form').getForm().submit();
        }
    },
        {
            text: 'Sign-Up -->',
            disabled: true,
            handler: function () {
                this.up('#LoginPanel').getLayout().setActiveItem(1);
            }
        }]
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-11T11:26:12.147

在这里要注意的一件事。

如果您使用的是 extdirectspring，您将需要使用以下命令注释您的服务器端方法：

```
@ExtDirectMethod(ExtDirectMethodType.FORM_POST)
public ExtDirectFormPostResult doStuff(AddAttachmentRequest request)
{
    return null;
} 
```

也必须使用 ExtDirectFormPostResult。如果你不这样做，它就行不通。

如果您使用普通的 extdirect 方法，则不会发送任何文件数据。

它看起来像您在另一端需要的类型，`MultipartFile`例如：

```
public class AddAttachmentRequest {

    private long id;
    private MultipartFile file;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public MultipartFile getFile() {
        return file;
    }

    public void setFile(MultipartFile file) {
        this.file = file;
    }
} 
```

# windows-7 - 加载时间不同于本地主机和远程

> ID：11157420
> 
> 赞同：0
> 
> 时间：2012-06-22T13:45:24.330
> 
> 标签：windows-7, time, loading

我正在运行一个网站（使用燃料 MVC 制作），该网站存储在我家的计算机中，所以我运行它

```
http://localhost 
```

它在 200 毫秒内加载，或多或少。这个时间只是php脚本需要执行的时间，所以不考虑跨网传输的时间。这只是脚本的执行时间。

但是，当我从网络访问相同的脚本（例如，我的电脑在工作）时，同一页面的时间测量值比一秒要高，我不知道为什么它需要将近 10 倍的时间来执行从外部计算机运行 php 脚本时。

我运行网站的计算机是具有 3GB RAM 内存的 Windows 7 Ultimate。

任何想法？

# javascript - 使用 hitch / deferred 和 xhrGet 请求

> ID：11157432
> 
> 赞同：0
> 
> 时间：2012-06-22T13:46:19.833
> 
> 标签：javascript, ajax, dojo

我试图使用`deferred`并`hitch`为我的 AJAX 请求提供回调。我正在使用以下代码：

```
//Code is executed from this function
function getContent(){
    var def = new dojo.Deferred();
    def.then(function(res){
    console.lod("DONE");
    console.log(res);
    },
    function(err){
        console.log("There was a problem...");
    });
    this.GET("path", def);
}

//Then GET is called to perform the AJAX request...
function GET(path, def){
dojo.xhrGet({
    url : path,
    load : dojo.hitch(def,function(res){
        this.resolve(res);  
    }),
    error : dojo.hitch(def, function(err){
        this.reject(err)
    })
}) 
```

}

但是，当我运行此代码时，我`undefined method`在`this.resolve(res)`. 我已经打印了两者`this`（解析为延迟对象）`res`并且两者都不是未定义的。为什么我会收到此错误以及如何实现我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:56:00.573

ajax 方法（xhrGet 和 xhrPost）在执行时返回延迟对象。使用这个延迟对象，您可以在 ajax 请求完成时注册回调和错误回调处理程序

```
var deferred = dojo.xhrGet({url:'someUrl'});
deferred.then(dojo.hitch(this,this.someCallbackFunction),dojo.hitch(this,this.someErrorFunction)); 
```

使用此代码，`someCallbackFunction`将在您的 ajax 请求成功返回时调用，如果 ajax 请求返回错误，`someErrorFunction`将被调用。

对于您的特定代码片段，您的代码更新如下：

```
function getContent(){
    var resultFunction = function(res){
      console.lod("DONE");
      console.log(res);
    };
    var errorFunction = function(err){
      console.log("There was a problem...");
    };
    this.GET("path").then(dojo.hitch(this,resultFunction),dojo.hitch(this,errorFunction);
}

//Then GET is called to perform the AJAX request...
function GET(path){
  return dojo.xhrGet({
    url : path
  });
} 
```

# .net - WPF 堆栈面板居中对齐

> ID：11157440
> 
> 赞同：13
> 
> 时间：2012-06-22T13:46:39.587
> 
> 标签：.net, wpf, silverlight

我希望能够集中对齐堆栈面板中的按钮。按钮的数量是动态的，并在加载控件时生成。例如，如果生成了 1 个按钮，则该按钮应放置在控件的中心。如果显示 5 个按钮，则所有 5 个按钮应水平对齐，彼此相邻 2 个，但位于控件的中心。

另一种方法是让控件根据其内容动态调整大小，以便使用更多按钮使其更宽，然后水平对齐页面上的用户控件，但我不确定如何处理这两种解决方案？

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-22T14:00:09.667

这应该有效。在堆栈面板中设置水平对齐，并确保在动态添加按钮时，为它们各自赋予一个边距属性值，以使它们彼此之间留出一些空间。彼此水平，控制中心。

```
 <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="20">
        <Button Margin="10">one</Button>
        <Button Margin="10">two</Button>
        <Button Margin="10">three</Button>
        <Button Margin="10">four</Button>
        <Button Margin="10">five</Button>            
    </StackPanel> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-22T14:06:42.710

您可以简单地在 XAML 中设置以下内容

`StackPanel.HorizontalAlignment = HorizontalAlignment.Center;`

或者

`HorizontalAlignment="Center"`（如 GrayFox374 所述）

这是一个 MSDN 示例，解释了各种对齐操作，完全符合我的想法 - [How to: Horizo​​ntally or Vertically Align Content in a StackPanel](http://msdn.microsoft.com/en-us/library/ms752328.aspx)

# ruby-on-rails - HAML - 如何显示变量的值？

> ID：11157441
> 
> 赞同：5
> 
> 时间：2012-06-22T13:46:40.903
> 
> 标签：ruby-on-rails, ruby, haml

我有一个变量 var。如果我尝试像 =val 一样在 HAML 中输出它的值，那么我只会得到对象的字符串值，如下所示`#<ShortenedUrl:0x118c50fa`：

但是我如何获得其中的价值呢？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T13:50:32.330

使用 Haml

```
%h2
  #{@project.name} 
```

或者

```
%h2
  #{org.id} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-22T13:50:30.037

我想你可能想要这个`.inspect`方法。

```
= val.inspect 
```

这将向您显示以下内容：

```
#<ShortenedURL @url="the url", @count=0, @etc="etc"> 
```

当然，如果您想深入了解细节（例如，您只想向某人显示`url`属性（或您可能拥有的任何属性），请使用该方法：

```
= val.url 
```

这将显示：

```
the url 
```

# ipython - 你如何强制一个图形重绘 ipython 笔记本内联？

> ID：11157450
> 
> 赞同：3
> 
> 时间：2012-06-22T13:47:00.067
> 
> 标签：ipython, pandas

我正在使用 pandas 和 ipython notebook 内联。我用熊猫数据框画了一个图

```
figure()
subplot = df['likes'].hist()
subplot.set_title("Likes")
display(fig)
draw() 
```

例如，我正在尝试向直方图添加标题，我想重绘它，但 ipython notebook 不会重绘。

有人有建议吗？在 ipython 中，当我使用 draw() 时，它会重绘并添加标题。我想格式化我的熊猫图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:55:47.227

在我执行单元格的代码后，ipython notebook 似乎关闭了该图。要格式化轴，我必须在单个单元格中执行所有代码。

# c++ - int 比 long 快吗？

> ID：11157453
> 
> 赞同：0
> 
> 时间：2012-06-22T13:47:04.990
> 
> 标签：c++, types

值`a`和`b`具有相同的输出：

```
int a = 0xEFEFEFEF;
long b = 0xEFEFEFEF;
cout << a << endl << b << endl; 
```

我听说一个`long`类型有更多的计算处理时间，因为`long`应该转换`int`为计算。真的是`int`更快`long`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T13:50:17.697

这个问题不可能在某种意义上普遍回答是否`long`比 快`int`。

该代码可以在具有 32 位`long`和 16 位的 16 位平台上运行，在该平台`int`上`int`可能会更快 - 但不一定。另一方面，在具有 32-bit`int`和 64-bit的本机 32-bit 平台上`long`，`long`可能会更快 - 但不一定。

所以它依赖于平台，依赖于编译器。最重要的是，**通常**对目标 CPU 的*本机*字长类型的操作并不比*可能*需要将宽度转换为本机大小的操作慢（通常更快）。

# c# - LinkedIn Oauth - 从 C# 撤消访问权限

> ID：11157462
> 
> 赞同：7
> 
> 时间：2012-06-22T13:47:42.293
> 
> 标签：c#, linkedin, http-delete

我的用户已经通过我的 LinkedIn 应用程序进行了身份验证，但我还想让他们可以在任何给定时间从我的应用程序中取消身份验证。

我想我只是错过了 http delete url 来做这件事，但我不确定。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T01:42:08.633

OAuth 协议专门设计为不允许您尝试完成的操作。OAuth 安全模型在传统的客户端-服务器身份验证模型中引入了第三个概念，称为资源所有者。资源所有者（您的最终用户）是唯一可以授予和撤销访问权限的一方。也许您可以向您的用户提供一条消息，告知他们应该访问 LinkedIn 以撤销访问权限以帮助他们完成该过程（我想您也可以将他们重定向到 LinkedIn 的网站）。但最终，如果我是最终用户，我想亲自访问 LinkedIn 以撤销访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T09:11:31.280

在开发者论坛上查看[此条目。](https://developer.linkedin.com/forum/how-do-end-users-revoke-oauth-tokens)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-30T09:36:08.110

我不是 C# 程序员，但我建议你给他们一个撤销访问按钮。单击该按钮时，您的软件将删除存储在那里的访问密钥。如果访问令牌不再存储在任何地方，他们将无法访问您的应用程序，这与取消身份验证相同。

我希望这有帮助。

# jquery - 视差双向滚动

> ID：11157464
> 
> 赞同：3
> 
> 时间：2012-06-22T13:47:48.033
> 
> 标签：jquery, scroll, jquery-animate, parallax, smooth-scrolling

我正在尝试在[Scrollorama](http://johnpolacek.github.com/scrollorama/)的帮助下创建视差滚动站点，但我想使用非典型动画。此动画应该从上到下，然后在页面中间停止并返回（从中间到顶部）。Scrollorama作者说scrollorama不支持这种动画，他的新插件SuperScrollorama也不支持。也许有人可以向我推荐另一个具有此功能的插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T23:23:13.713

我以前从未见过 Scrollorama，它让我很感兴趣，所以[我做了一些东西来做你所要求的](http://jsfiddle.net/RustyTheBoyRobot/deZVc/3/)。它不是插件；我希望滚动代码简单，而不是与插件类型的代码杂乱无章。我认为把它变成一个插件会很简单，所以我会把它留给你（除非你需要一些帮助）。

**代码说明**

jQuery 有一个[`scrollTop()`](http://api.jquery.com/scrollTop/)函数来确定容器从顶部滚动的距离。使用滚动区域内元素的高度及其容器的高度，我们可以确定容器已滚动的百分比：

```
scrollAmount / (totalSize - visibleSize) 
```

*（我们必须减去容器的高度`visibleSize`才能得到正确的结果。由于`scrollTop()`返回隐藏元素顶部的像素数，一直滚动到底部会给我们`totalSize - visibleSize`，而不仅仅是`totalSize`）*

我们可以使用该百分比来确定何时向上、向下或保持在同一位置。该`repositionBanner()`函数采用滚动百分比并决定如何处理动画元素。在我的代码中，我选择让元素从 0-30% 移动到位置，从 30-70% 保持其位置并从 70-100% 飞回其原始位置。

*（我所有的代码都假设您正在处理垂直滚动。相同的概念可以通过使用`left`and`width`而不是`top`and应用于水平滚动`height`）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T20:53:41.277

这甚至不如 RustyTheBoyRobot 的回答那么优雅，但您可以通过将元素包装在另一个透明的容器元素中来实现这一点。然后，您可以将容器动画化，然后将原始元素动画化。

例子：

```
//animate in
scrollorama.animate('#elementToAnimateContainer',{
   delay: 0,
   duration: 100,
   property:'left',
   start:-3000,
   end: 0,
   pin: true
});

//animate out
scrollorama.animate('#elementToAnimate',{
   delay: 500,
   duration: 100,
   property:'left',
   start:0,
   end: 3000,
   pin: true
}); 
```

唯一的问题是容器仍然会出现在屏幕上，但如果设置为透明，您将看不到它。您以后可以随时`$('#elementToAnimateContainer').remove()`使用，或设置`pointer-events:none;`等。

正如我所说，它并不漂亮，但它会按照你的要求做。

# php - PHP函数array_replace()，为什么参数是通过引用传递的？

> ID：11157465
> 
> 赞同：5
> 
> 时间：2012-06-22T13:47:51.437
> 
> 标签：php, arrays, php-5.3

PHP.net 上的 array_replace() 函数签名表示数组将通过引用传递。这样做的原因/好处是什么，而不是按值这样做，因为要获得预期的结果，您必须将完成的数组返回给变量。为了清楚起见，我能够重现手册中的结果，所以这不是关于如何使用此功能的问题。

这是来自 php.net 的函数签名和示例。

来源：[http ://ca3.php.net/manual/en/function.array-replace.php](http://ca3.php.net/manual/en/function.array-replace.php)

函数签名：

```
array array_replace ( array &$array , array &$array1 [, array &$... ] ) 
```

示例代码：

```
$base = array("orange", "banana", "apple", "raspberry");
$replacements = array(0 => "pineapple", 4 => "cherry");
$replacements2 = array(0 => "grape");

$basket = array_replace($base, $replacements, $replacements2);
print_r($basket); 
```

上面的示例将输出：

```
Array
(
    [0] => grape
    [1] => banana
    [2] => apple
    [3] => raspberry
    [4] => cherry
) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:22:34.273

这个调用[php_array_merge_or_replace_wrapper的](http://lxr.php.net/xref/PHP_5_3/ext/standard/array.c#2358)[函数](http://lxr.php.net/xref/PHP_5_3/ext/standard/array.c#2400)调用[zend_hash_merge](http://lxr.php.net/xref/PHP_5_3/Zend/zend_hash.h#221)进而调用[_zend_hash_merge](http://lxr.php.net/xref/PHP_5_3/Zend/zend_hash.c#803)等等等等，导致底层的[memcmp()](http://www.gnu.org/software/libc/manual/html_node/String_002fArray-Comparison.html)调用，这可能最终导致数组`array_replace()`通过引用传递到 PHP 中（因为`memcmp()`需要它们）。

数组是 PHP 的一个方面，它似乎只是工作并且很少受到质疑，经过一番挖掘，我可以明白为什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:38:25.403

好吧，关键是[_zend_hash_merge](http://lxr.php.net/xref/PHP_5_4/Zend/zend_hash.c#845)函数不仅由[array_merge](http://lxr.php.net/xref/PHP_5_4/ext/standard/array.c#2400)使用，而且还由`+` [运算符](http://lxr.php.net/xref/PHP_5_4/Zend/zend_operators.c#788)使用（当它的两个操作数都是数组时）。

虽然在处理上存在一些差异，但实际上没有一个可以归因于需求的差异：据我所知，没有人写成`+`，`&$arr + &$arr`它只是没有意义。

所以我想这只是文档中的一个错误。

但是如果不分析 PHP 内部代码的深渊，就可以得出这个结论。`&$array`) 请记住，当我们传递一个可以（并且很可能会）改变的数组时，我们使用符号 - 例如，请参见[array_splice()](http://www.php.net/manual/en/function.array-splice.php)签名。而且（这可以很容易地检查）`array_replace`不会改变它的论点——至少目前是这样。)

**更新：**好吧，现在我很生气。如果某个 PHP 开发人员（上帝保佑他的灵魂）实际上认为这不是文档中的错误，请让他/她解释为什么会这样：

```
array_pop(array('a' => 1)); 
```

...触发致命错误（**`Only variables can be passed by reference`**），这...

```
array_replace(array('a' => 1), array('b' => 2)); 
```

...会正常工作，因为什么也没发生。

还是我们现在在 PHP 中有两种类型的引用？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T15:39:27.207

## 假设：

由于按值传递涉及复制数组，我想通过引用传递它们会更快。

## 测试它：

```
<?php 

function ref(array &$array) {
    for($i = 0; $i < count($array); $i++) {
        $array[$i] == 'foo'; //just accessing
    }
}

function val(array $array) {
    for($i = 0; $i < count($array); $i++) {
        $array[$i] == 'foo'; //just accessing
    }
}

//create large array
$array = array();
for($i = 0; $i < 100; $i++) {
    $array[] = $i;
}

echo "Pass by reference\n";
$t1 = microtime(true);
for($i = 0; $i < 10000; $i++) {
    ref($array);
}
$t2 = microtime(true);
echo $t2 - $t1 . "s\n\n";

echo "Pass by value\n";
$t1 = microtime(true);
for($i = 0; $i < 10000; $i++) {
    val($array);
}
$t2 = microtime(true);
echo $t2 - $t1 . "s\n\n"; 
```

输出：

```
Pass by reference
8.3282010555267s

Pass by value
1.4845979213715s 
```

## 结论：

显然这不是出于性能原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T17:49:09.413

这是一个文档错误，现已修复。

[https://bugs.php.net/bug.php?id=62383](https://bugs.php.net/bug.php?id=62383)

# php - 如何获取特定日期的所有时间戳？PHP

> ID：11157469
> 
> 赞同：1
> 
> 时间：2012-06-22T13:48:10.097
> 
> 标签：php, mysql, sql, datetime, timestamp

我在 MySQL 数据库中有行，每行都有一个时间戳值。（即1340296188）

我正在尝试查找过去 7 天的所有条目。我知道如何进行查询以查找过去 7 天内的所有内容，例如：

```
$lastweek = time() - 604800;
$results = mysql_query("SELECT * FROM table WHERE timestamp > $lastweek"); 
```

但是，我需要能够分别获得每一天。我将如何进行此查询？我不知道如何从上面的结果中找到哪些是针对哪个特定日期的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:49:07.853

我相信有不止一种方法可以做到这一点。这是一个：

```
SELECT * 
FROM table 
WHERE timestamp > CURRENT_DATE - INTERVAL 1 WEEK
GROUP BY DAY(timestamp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:54:43.200

你已经差不多了；您只需要解析`$results`.

一天是 (60 * 60 * 24) 秒，所以可以将每一行的时间戳字段除以 86400，将其转化为整数，结果为该条目出现的天数。

对于数据集中的每一行：

```
$daysAgo = int($row["timestamp"] / 86400); 
```

# iphone - ImageView.layer 对象从一个类到另一个类的引用

> ID：11157470
> 
> 赞同：1
> 
> 时间：2012-06-22T13:48:14.513
> 
> 标签：iphone, animation, calayer

ImageView 在名为 Third 的类中定义

```
- (void)viewDidLoad
{
// Displays UIImageView
UIImageView* ImageView = [[UIImageView alloc] initWithFrame:CGRectMake(10, 5, 300, 235)];
self.view.backgroundColor = [UIColor brownColor];
// load all the frames of our animation
ImageView.animationImages = [NSArray arrayWithObjects:    
                         [UIImage imageNamed:@"3a.png"],
                         [UIImage imageNamed:@"3b.png"],
                         nil];
// all frames will execute in 24 seconds
ImageView.animationDuration = 24;
// start animating
[ImageView startAnimating];
 ImageView.layer.borderWidth = 2;
 ImageView.layer.borderColor = [[UIColor whiteColor]CGColor];    
 [ImageView.layer setMasksToBounds:YES];
 [ImageView.layer setCornerRadius:15.0f];
 [self.view addSubview:ImageView]; } 
```

我怎样才能从这个第三类到另一个类中获取这个图像 view.layer 的引用。

基本上我想为图像视图动画使用暂停层和恢复层。

使用

```
 [self pauseLayer:myImageView.layer]; // Pause the CALayer of the UIImageView 
```

我应该参考这样的东西，但不知道如何在第三类的 viewdidload 中实现它，或者在第三类或另一个类中在哪里实现它。

```
 UIImageView *myImageView = [OtherClass getTheImageView]; 
```

所以寻求一些帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:07:31.137

我解决了。在另一个类中，我正在加载第三类，代码如下

```
-(void)Third {
Third *thirdController = [[Third alloc] init];
thirdController.view.frame = CGRectMake(0, 0, 320, 480);
CATransition *transitionAnimation = [CATransition animation];
[transitionAnimation setDuration:1];
[transitionAnimation setType:kCATransitionReveal]; 
[transitionAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseIn]];
[self.view.layer addAnimation:transitionAnimation forKey:kCATransitionReveal];
[self.view addSubview:thirdController.view]; 
[self.view addSubview:toolbar];
[thirdController release];
self.timer = [NSTimer scheduledTimerWithTimeInterval:23 target:self selector:@selector(Fourth) userInfo:nil repeats:NO];
} 
```

我在这个加载代码中使用了同一层。所以我用它作为参考。

我用了

```
[self pauseLayer:self.view.layer]; 
```

用于暂停图像视图动画和恢复

```
[self resumeLayer:self.view.layer]; 
```

所以基本上在 playpauseAction 当我暂停和恢复计时器时，我正在暂停和恢复图像 view.layer 动画

```
 -(void)playpauseAction:(id)sender {

if([audioPlayer isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"Play Icon.png"] forState:UIControlStateSelected];
    [audioPlayer pause];
    [self pauseTimer];
    [self pauseLayer:self.view.layer]; 
}else{
    [sender setImage:[UIImage imageNamed:@"pause.png"] forState:UIControlStateNormal];
    [audioPlayer play];
    [self resumeTimer];
    [self resumeLayer:self.view.layer];
 if(isFirstTime == YES)
    {
        self.timer = [NSTimer scheduledTimerWithTimeInterval:11.0
                                                      target:self
                                                    selector:@selector(displayviewsAction:)
                                                    userInfo:nil
                                                     repeats:NO];
        isFirstTime  = NO;
    }
    } 
    } 
```

就这么简单，我浪费了两天时间来解决这个问题，但最后很高兴它像魅力一样工作没有问题。

# linux - 递归 Mogrify 脚本

> ID：11157471
> 
> 赞同：7
> 
> 时间：2012-06-22T13:48:15.493
> 
> 标签：linux, mogrify

来自新手 linux 脚本编写者的另一个问题。我正在尝试使用此命令批量修改文件夹中的所有文件

```
find -name "*.jpg" -exec mogrify -resize 320 -quality 75 {} \; 
```

该命令运行，但似乎没有任何反应。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T19:27:34.317

尝试

```
find -name "*.jpg" -print 
```

查看哪些文件匹配；这可能有助于诊断问题出在 mogrify 还是 find 上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:51:15.697

对不起，但这只是用户错误。测试时我不在正确的文件夹中。该命令确实有效。

# matlab - 旋转像素化图片

> ID：11157472
> 
> 赞同：-2
> 
> 时间：2012-06-22T13:48:16.053
> 
> 标签：matlab, matrix, rotation, image

您是否有公式或函数可以在 Matlab 中旋转像素化图片，表示为矩阵？

我不想使用任何照片编辑器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:33:21.570

我还没有阅读您在自己的答案中链接到的整个线程，但是如果您有图像处理工具箱，那么您可以使用`imrotate`.

[http://www.mathworks.se/help/toolbox/images/ref/imrotate.html](http://www.mathworks.se/help/toolbox/images/ref/imrotate.html)。

# java - 将一组对象从一个线程传递到另一个线程的最快数据存储是什么？

> ID：11157478
> 
> 赞同：3
> 
> 时间：2012-06-22T13:48:39.210
> 
> 标签：java, performance, storage

我有两个线程，一个读取流并从其内容中生成数据对象。

然后我必须将它们传递给第二个线程，将它们写入数据库。

我想将这两个任务分开（这就是我采用两个线程的原因），因为流和数据库上的 I/O 性能各不相同。在某些情况下，流很快，有时，数据库有一些滞后。

所以我想在它们之间放置一些（非常简单！）数据存储。

我的第一个想法是 FILO 解决方案，它必须是线程安全的并且应该是快速的（没有花哨的东西，只需放置和拉动）。顺序无关紧要。有时，存储中可能有大约 100,000 个条目（在与数据库 ping 大约一秒钟后就会出现这种情况）。

每个对象的占用空间很小，<1kb。

你会向我推荐什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T13:51:28.553

这正是生产者-消费者模式。看看[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)及其实现。

这是我[博客](http://petar-minchev.blogspot.com/)中的示例代码：

```
public class Producer implements Runnable {
    private BlockingQueue queue;

    public Producer(BlockingQueue queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        //Produce 1000 products
        for (int i = 0; i < 1000; i++) {
            queue.put(new Product());
            System.out.println("PRODUCED PRODUCT");
        }
    }
}
public class Consumer implements Runnable {
    private BlockingQueue queue;

    public Consumer(BlockingQueue queue) {
        this.queue = queue;
    }

    @Override
    public void run() {
        while (true) {
            Product product = queue.take();
            System.out.println("CONSUMED PRODUCT");
        }
    }
}

And here is the calling code:
BlockingQueue queue = new ArrayBlockingQueue(50);

Producer producer = new Producer(queue);
new Thread(producer).start();

Consumer consumer = new Consumer(queue);
new Thread(consumer).start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T18:57:05.333

不要在线程之间复制对象。在线程之间传递指向对象的指针。并尝试使对象在内存中保持顺序。这样，当您在线程之间传递一批对象时，CPU 只需在 CPU 之间重新映射几个内存页面。

在大于 OS 内存页面大小的线程之间批量传递对象。

因此，为了获得理想的性能，您希望生产者使用一组内存页面，而消费者使用另一组页面。CPU 将确保一个内核使用的页面映射到该内核上的本地存储，以及另一个内核上的其他页面。

如果你不这样做，那么内存页面就会在内核之间来回切换。

如果你复制，那么它是一样的。当写入器线程写入一页，而读取器线程在同一页上读取时，CPU 会花时间确保两个内核看到相同的数据。

所以我会让读者阅读一堆价值 16k 的物品，而不是让它们可供消费者线程使用。填满这些页面后，将它们释放到处理器线程，并分配另一个 16k 数据块以开始填充更多对象。

# git - 如何从 master 中拆分分支

> ID：11157479
> 
> 赞同：2
> 
> 时间：2012-06-22T13:48:41.810
> 
> 标签：git, version-control

问候大家，

我的回购有一个有点奇怪的问题。最初我只有*master*分支要提交，但是在我完成应用程序的功能版本后，我决定创建一个*开发*分支以继续开发，但在*master*中保持工作版本不变，直到我想合并它。

目前（使用`gitk --all`）我的 git 日志图如下所示：

```
                             标签
                              |
*----*-----*-----*-----*------*------*------* 掌握和发展
                                     \ \
                                      --------*----* 开发（HEAD）

```

我不确定我做了什么导致这个，下面是我创建*开发*分支的步骤：

```
$ git checkout develop
$ vim example.txt
$ git add .
$ git commit -m "first file in develop"
$ git push origin develop 
```

在此之后，我在开发分支上计数，直到我看了一下*gitk*。

我想要的（并认为是使用 git 分支的正确/健康方式）是：

```
                            标签
                             |      
* -  - * -  - -* -  - -* -  - -* -  - -* -  - -* 掌握
                                    \
                                     *-----*-----* 开发（HEAD）

```

我需要做什么才能让我的仓库看起来类似于上图？

**编辑＃1：**

来自`git reflog`开发的*输出*：

```
54d8daf HEAD@{0}: reset: moving to HEAD@{15}
45dcaa7 HEAD@{1}: rebase finished: returning to refs/heads/develop
45dcaa7 HEAD@{2}: rebase: added another sanity check for cli parameters
f3b0f8b HEAD@{3}: rebase: I am working on getting the console improved, this including better color, and more cammand options
8c48bab HEAD@{4}: checkout: moving from develop to 8c48babb10ec2f8f28f364ce57b5095cb080c133^0
54d8daf HEAD@{5}: checkout: moving from master to develop
8c48bab HEAD@{6}: checkout: moving from develop to master
54d8daf HEAD@{7}: rebase: aborting
3bf3f64 HEAD@{8}: commit: rebase
6aa82d8 HEAD@{9}: rebase: added another sanity check for cli parameters
a9be651 HEAD@{10}: rebase: I am working on getting the console improved, this including better color, and more cammand options
8c48bab HEAD@{11}: checkout: moving from develop to 8c48babb10ec2f8f28f364ce57b5095cb080c133^0
54d8daf HEAD@{12}: rebase: aborting
7890b76 HEAD@{13}: rebase: added another sanity check for cli parameters
46847d7 HEAD@{14}: rebase: I am working on getting the console improved, this including better color, and more cammand options
8c48bab HEAD@{15}: checkout: moving from develop to 8c48babb10ec2f8f28f364ce57b5095cb080c133^0
54d8daf HEAD@{16}: commit: changed the how function, it seems I was right, wc counts all lines regardless of readable symbols or not.
13d35ed HEAD@{17}: commit: am working on the how function (should be trivial, but I have a bad feeling)
852fb68 HEAD@{18}: commit: I have added some more commands (thought not fully implemented), but more specifically I have changed the pattern matching
33dfc9f HEAD@{19}: commit (merge): change some output settings, asthetics and such. I am working on getting more command options for list previous lin
a248465 HEAD@{20}: commit (amend): added another sanity check for cli parameters
f0ca508 HEAD@{21}: commit (amend): added another sanity check for cli parameters
9e24e91 HEAD@{22}: commit: added another sanity check for cli parameters
0194cab HEAD@{23}: commit: I am working on getting the console improved, this including better color, and more cammand options
8c48bab HEAD@{24}: checkout: moving from master to testing
8c48bab HEAD@{25}: commit: I think I have wroked out all of the import bugs, the rest is really just esthetics, welcome version 1
b306d9f HEAD@{26}: commit: as it turns out it was easier then I thought, plus I fixed an incorrect append method
8445a25 HEAD@{27}: commit: seems I miss understood how bash case statments handles regex, or should I say pathname expansion matching
9fc5132 HEAD@{28}: commit: lol, totally forgot to use the function 'run' to get things going
ee2a2c7 HEAD@{29}: commit: seems I haven't yet figured out how to correctly parse cli args...
bb0fd28 HEAD@{30}: commit: fixed incorrect sanity check
eb3db1d HEAD@{31}: commit: have reached a stage I could refer to a working test system, which is what I am going to do.
4bfd53b HEAD@{32}: commit: added a lot more colours (am using a list from arch-wikis), incorporated much better error handling
2d9b598 HEAD@{33}: commit: getting there part 1
0edfcae HEAD@{34}: commit: output functions so far
06130a7 HEAD@{35}: commit: modularized two printing function into a seperate script
e0033b8 HEAD@{36}: commit (initial): used some functions from previous bash script, maybe I should create a generic script for text output...? 
```

错误地，我试图做一个 rebase，但每次合并尝试都失败了。使用`git diff`不同的文件签出（`--theirs`和`--ours`）显示远程和本地之间没有区别。所以我将 head 重新设置为 commit `HEAD@{15}`。

**编辑#2：** 对于我可能造成的混乱，我深表歉意，但是在图 1 中，'master & develop' 表明两个分支（*master*和*develop*）都合并为一个“流”。我希望这更有意义。

**编辑#3：**

输出自`git log master --pretty=oneline`

```
8c48babb10ec2f8f28f364ce57b5095cb080c133 I think I have wroked out all of the import bugs, the rest is really just esthetics, welcome version 1
b306d9f58c3ebab03364c4381754bc87db9e7f2d as it turns out it was easier then I thought, plus I fixed an incorrect append method
8445a258fc388eba5b920de57b1f390623da87a0 seems I miss understood how bash case statments handles regex, or should I say pathname expansion matching
9fc5132c30bdf2ab143ad046493326ba63e4300d lol, totally forgot to use the function 'run' to get things going
ee2a2c7ff69498a80e9fc5f36cc340f6e1b95bcb seems I haven't yet figured out how to correctly parse cli args...
bb0fd28c89a0c16c379774b7fc5768a4160d6852 fixed incorrect sanity check
eb3db1d055b45793fb9a3fd5f884926687f7b8dd have reached a stage I could refer to a working test system, which is what I am going to do.
4bfd53b3af85d82aea11871a0ddb7f9d583cfb73 added a lot more colours (am using a list from arch-wikis), incorporated much better error handling
2d9b598d77e2b62611dfd2e42b183d0262880014 getting there part 1
0edfcae88e6eae66de4fae1788433d83b90a1c37 output functions so far
06130a7288ce26b4a2235864f7cd5b48a35dcea6 modularized two printing function into a seperate script
e0033b8f440f2ffb7b9a120f5a9be9ea167e1e30 used some functions from previous bash script, maybe I should create a generic script for text output...? 
```

输出为`git log develop --pretty=oneline`

```
54d8daf475a5e1108cd6345850245db2d0e6fd80 changed the how function, it seems I was right, wc counts all lines regardless of readable symbols or not.
13d35ed979de3518eca26961f3be4bb0b7d8de03 am working on the how function (should be trivial, but I have a bad feeling)
852fb68b8ca929e1156e38e2a58a12f07bd9aaa5 I have added some more commands (thought not fully implemented), but more specifically I have changed the pat
33dfc9f187a54dc7234c9ca31bee91eef7c89a98 change some output settings, asthetics and such. I am working on getting more command options for list previo
a2484654eff741f4c625f8cb097fbb92f6ac8b9b added another sanity check for cli parameters
9e24e9157157f128f75b3d7859875d06d33137bd added another sanity check for cli parameters
0194cab8af66656bb9fe83c919409354f6d12edc I am working on getting the console improved, this including better color, and more cammand options
8c48babb10ec2f8f28f364ce57b5095cb080c133 I think I have wroked out all of the import bugs, the rest is really just esthetics, welcome version 1
b306d9f58c3ebab03364c4381754bc87db9e7f2d as it turns out it was easier then I thought, plus I fixed an incorrect append method
8445a258fc388eba5b920de57b1f390623da87a0 seems I miss understood how bash case statments handles regex, or should I say pathname expansion matching
9fc5132c30bdf2ab143ad046493326ba63e4300d lol, totally forgot to use the function 'run' to get things going
ee2a2c7ff69498a80e9fc5f36cc340f6e1b95bcb seems I haven't yet figured out how to correctly parse cli args...
bb0fd28c89a0c16c379774b7fc5768a4160d6852 fixed incorrect sanity check
eb3db1d055b45793fb9a3fd5f884926687f7b8dd have reached a stage I could refer to a working test system, which is what I am going to do.
4bfd53b3af85d82aea11871a0ddb7f9d583cfb73 added a lot more colours (am using a list from arch-wikis), incorporated much better error handling
2d9b598d77e2b62611dfd2e42b183d0262880014 getting there part 1
0edfcae88e6eae66de4fae1788433d83b90a1c37 output functions so far
06130a7288ce26b4a2235864f7cd5b48a35dcea6 modularized two printing function into a seperate script
e0033b8f440f2ffb7b9a120f5a9be9ea167e1e30 used some functions from previous bash script, maybe I should create a generic script for text output...? 
```

输出为`git log master...develop`

```
提交 54d8daf475a5e1108cd6345850245db2d0e6fd80
作者：汉斯
日期：2012 年 6 月 21 日星期四 21:27:14 +0200

    改变了how函数，看来我是对的，wc计算所有行，不管可读符号与否。

提交 13d35ed979de3518eca26961f3be4bb0b7d8de03
作者：汉斯
日期：2012 年 6 月 21 日星期四 21:09:44 +0200

    正在研究如何功能（应该是微不足道的，但我有一种不好的感觉）

提交 852fb68b8ca929e1156e38e2a58a12f07bd9aaa5
作者：汉斯
日期：2012 年 6 月 21 日星期四 20:58:16 +0200

    我添加了更多命令（认为没有完全实现），但更具体地说，我稍微改变了模式匹配，现在是 ar

提交 33dfc9f187a54dc7234c9ca31bee91eef7c89a98
合并：a248465 9e24e91
作者：汉斯
日期：2012 年 6 月 21 日星期四 20:42:56 +0200

    更改一些输出设置、美学等。我正在努力为列出前几行等获取更多命令选项

提交 a2484654eff741f4c625f8cb097fbb92f6ac8b9b
作者：汉斯
日期：2012 年 6 月 21 日星期四 20:23:52 +0200

    为 cli 参数添加了另一个健全性检查

提交 9e24e9157157f128f75b3d7859875d06d33137bd
作者：汉斯
日期：2012 年 6 月 21 日星期四 20:23:52 +0200

    为 cli 参数添加了另一个健全性检查

提交 0194cab8af66656bb9fe83c919409354f6d12edc
作者：汉斯
日期：2012 年 6 月 21 日星期四 20:06:02 +0200

    我正在努力改进控制台，包括更好的颜色和更多的 cammand 选项

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:07:36.473

您可以使用 reflog:`git reflog`对于任何分支来查看该 ref 的历史记录，然后只需`git reset --hard HEAD@{INDEX_HERE}`还原该分支的更改。

第一张图显示了您在主分支中提交然后在`git pull`内部开发分支中提交的情况。`git pull`将跟踪分支（主）合并到当前分支（开发）中。

如果您可以为分支 master 发布您的 reflog 并进行开发，那么我们可以检查它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:23:48.657

> > 我需要做什么才能让我的仓库看起来类似于上图？

要从“master”创建分支“develop”，我将按照[git 手册](http://git-scm.com/book/en/Git-Branching-Basic-Branching-and-Merging)中的说明进行操作：“要创建分支并同时切换到它，您可以使用 -b 开关运行 git checkout 命令” .

在你的情况下，汉斯，你可以执行以下操作（假设'master'在远程'origin'）：

```
# checkout and pull latest from master
git checkout master
git fetch origin
git pull origin master

# create the develop branch
git checkout -b develop 
```

现在“master”和“develop”分支是不同的，未来的提交应该让你的提交历史看起来像你想要实现的正确/健康的图表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T18:15:46.967

事实证明，我误解了分支在 git 中的工作方式。这是**根本**问题。***我的 repo 的设置方式完全没有问题***。

然而，正如 Alexander 向我指出的那样，存在 的异常合并`a248465 9e24e91`，从而创建了图 1 所示的“双重提交”。这些提交实际上是相同的提交，但具有不同的 SHA1 哈希值。我相信这是由于我错误地应用了`git commit --amend`.

删除它们的解决方案是重新设置*开发*分支并`9e24e91`从历史记录中删除提交。

感谢大家的帮助！

# javascript - Coffeescript、类和函数

> ID：11157482
> 
> 赞同：1
> 
> 时间：2012-06-22T13:48:49.083
> 
> 标签：javascript, coffeescript

在 JavaScript 中，我设置了一个类，如：

```
var SomeClass = (function()
{
    var _this   = { };
    var privateVar = 'foo'

    _this.publicVar = 'bar'

    function privateFunction()
    {
        return privateVar;
    }

    _this.publicFunction = function()
    {
        return _this.publicVar;
    }

    return _this;
})(); 
```

这很好，因为`privateFunction`我可以`publicFunction`通过调用`SomeClass.publicFunction()`或`_this.publicFunction()`

现在在 Coffeescript 我正在尝试设置我的类以便我可以调用类函数，我该怎么做呢？如何在名为 coffeescript 的类中创建一个类`Foo`并在该类中获取一个函数以引用该类中的另一个函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:09:20.613

我认为这会有所帮助：

```
 class Foo
  a: ->
    alert 'a invoked'
  b: ->
    @a()
    alert 'b invoked'
new Foo().b() 

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:59:17.870

你的问题令人困惑。

如果你想创建一个**类方法**，你可以这样做

```
class Foo
  constructor: ->        

  m1: ->
    Foo.classMethod()

  m2: ->
    @privateMethod()
    @m1()

Foo.classMethod = -> 
```

注意最后一行。类方法是一种存在于定义类的函数上的方法。

如果你想从另一个方法调用一个方法，这没什么大不了的。 `m1`并`m2`在此示例中演示了这一点。请注意，每个调用的范围`this`都是 Foo 类的当前**实例**。所以你可以做

```
f = new Foo()
f.m2() 
```

这将创建一个新的 Foo**实例**，然后`m2`在该实例上调用。 `m2`依次调用**类方法** `classMethod`。

[检查一下](http://coffeescript.org/#try%3a%0Aclass%20Foo%0A%20%20%20%20%20%20constructor%3A%20-%3E%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20%20%20m1%3A%20-%3E%0A%20%20%20%20%20%20%20%20Foo.classMethod%28%29%0A%20%20%20%20%0A%20%20%20%20%20%20m2%3A%20-%3E%0A%20%20%20%20%20%20%20%20%40privateMethod%28%29%0A%20%20%20%20%20%20%20%20%40m1%28%29%0A%0A%20%20%20%20Foo.classMethod%20%3D%20-%3E)以查看上述咖啡脚本编译到的 javascript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:58:31.493

在私有方法中调用公共方法

方法 a 是私有的，方法 b 是公共的

```
Foo 类
  call_a：->
    a.call(这个)
  乙：->
    警报“b 调用”
  一个=->
    警报“被调用”
    @b()

obj = 新的 Foo
obj.call_a()

```

# android - 如何在 Java 代码中更改 ListView 的字体？

> ID：11157485
> 
> 赞同：0
> 
> 时间：2012-06-22T13:49:01.720
> 
> 标签：android, android-listview

我的活动中有一个选项卡作为视图。每个选项卡代表一个`ListView`. 为了进一步澄清，`ListView`s 没有任何`TextView`s 膨胀。由于`ListView`在 xml 模式中没有文本属性，我想知道是否可以在我的活动中执行此操作。如果没有，那么你会建议什么？

布局文件：tabworkentry.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"

android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<LinearLayout
    android:id="@+id/tablayout"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <!-- Include action bar -->
<include layout="@layout/actionbar_layout"/>

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"

        android:background="@drawable/innerdashboard_bg"
        android:layout_weight="1">

        <!-- Top 10 starts -->

            <ListView 
            android:id="@+id/Top_10"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:paddingRight="5dp" 
            android:text="this is a tab" />

        <!-- Top 10 ends -->

        <!-- Billable starts -->
        <ListView 
            android:id="@+id/Billable"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:paddingRight="5dp" 
            android:text="this is another tab" />

        <!-- Billable ends -->

        <!-- Product starts -->
        <ListView
            android:id="@+id/Product"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" 
            android:paddingRight="5dp"
            android:textSize="14sp"
            android:text="this is a third tab" />

        <!-- Product ends -->

     </LinearLayout>
</TabHost> 
```

和java代码：

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    try {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabworkentry);

TabHost  mTabHost = getTabHost();

 mTabHost.addTab(mTabHost.newTabSpec("top10").setIndicator("Top  10").setContent(R.id.Top_10));
          mTabHost.addTab(mTabHost.newTabSpec("billable").setIndicator("Billable").setContent(R.id.Billable));
     mTabHost.addTab(mTabHost.newTabSpec("product").setIndicator("Product").setContent(R.id.Product));

  mListView = (ListView)findViewById(R.id.Top_10);
  mListView.setAdapter(new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1,Top_10));   

  mListView = (ListView)findViewById(R.id.Billable);
  mListView.setAdapter(new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1,Billable));

 mListView = (ListView)findViewById(R.id.Product);
 mListView.setAdapter(new ArrayAdapter<String>(this,
 android.R.layout.simple_list_item_1,Product));

    } catch (Exception e) {
        System.out.println("Exception" + e.getStackTrace());
        Log.d(TAG, "Exception" + e.getStackTrace());
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:53:19.490

您必须创建自己的行布局并添加 TextView 然后您可以设置文本字体...

使用自定义布局，您可以做到...

所以膨胀 `R.layout.row`

**行.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp" android:typeface="serif"
    android:textSize="15dp" >
</TextView> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:54:19.477

在您的方法中，您不能，这是不可能的。但是，当您创建自己的类时，例如`BaseAdapter`从那时起您无法更改文本外观，`getView()`但您仍然需要拥有`TextView`.

**笔记：**

1.  `row.xml`只需使用 contains创建您自己的`TextView`。

2.  在通话中使用`BaseAdapter`和修改您的字体（颜色、大小...）`getView()`。

你的`row.xml`罐头看起来像：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/> 
```

**注意 2：**
您也可以在此处设置字体，但只有三个可能的选项（等宽、衬线、无字体）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T13:55:02.850

```
new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1,Billable){

@Override
        public View getView(int position, View convertView, ViewGroup parent) {

               convertView= super.getView();

                TextView text = (TextView) convertView.findViewById(android.R.id.text1);

                return convertView;
        }

} 
```

# mysql - mysql - 锁定选择查询的行？

> ID：11157488
> 
> 赞同：3
> 
> 时间：2012-06-22T13:49:09.923
> 
> 标签：mysql

我有一个包含唯一产品 ID 列表的 mysql 表（表-A）。使用该表的应用程序使用多个线程，每个线程选择一个表行（最顶部），使用 API 获取产品数据并将其更新到不同的表（表 B）。完成后，线程删除表 A 中相应的产品 ID 行并选择另一行进行处理（循环直到表 A 中的所有行都已删除而表 B 已更新）。

如何防止我的应用程序线程意外处理表 A 的同一行？有没有办法锁定一行不被选中？

示例：应用程序的线程 1 从表 A 中选择行 1。从 API 抓取所有相关数据并将其更新到表 B 中大约需要 10 到 15 秒。发生这种情况时，线程 2 将启动并检查表 A 以选择要处理的行。在这种情况下，我只想锁定第 1 行，这样线程 2 就不会看到/读取它，而是选择第 2 行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T14:32:46.483

本机 MySQL 锁定不提供此功能。您可以使用列来执行“锁定”。

假设每个线程都有一个唯一的 ID，您可以创建一个名为 的列`thread_owner`，默认值为 0。

一个线程会像这样抓取一行：

```
UPDATE mytable
SET thread_owner = :my_threadID
WHERE thread_owner = 0
LIMIT 1 
```

然后像这样选择行（如果没有要处理的行，它可能会返回 none）：

```
SELECT *
FROM mytable
WHERE thread_owner = :my_threadID 
```

然后处理，最后删除。

此解决方案适用于 MyISAM 和 InnoDB。

但是，对于 InnoDB，它可能会很慢，因为每个 UPDATE 语句都试图锁定 thread_owner = 0 的所有行，除非您确定每次都以相同的顺序锁定所有行，否则它甚至可能导致死锁。因此，您可以尝试在 UPDATE 语句中显式锁定整个表：

```
LOCK TABLES mytable WRITE;
UPDATE mytable
SET thread_owner = :my_threadID
WHERE thread_owner = 0
LIMIT 1;
UNLOCK TABLES; 
```

这样，MyISAM 和 InnoDB 将以相同的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:06:41.977

尝试使用“锁定表”命令，我使用 2 个窗口向您展示：

```
jcho_1> lock table t1 write;
Query OK, 0 rows affected (0.00 sec)

jcho_2> select * from t1; 
```

jcho_2 等待释放表以便能够读取，当 jcho_1 执行此操作时：

```
jcho_1> unlock tables;
Query OK, 0 rows affected (0.00 sec) 
```

jcho_2 能够处理他的查询。

```
jcho_2> select * from t1;
+----------+-------------+--------------+---------------------+
| actor_id | first_name  | last_name    | last_update         |
+----------+-------------+--------------+---------------------+
|      206 | a           | b            | 0000-00-00 00:00:00 |
|       71 | ADAM        | GRANT        | 2006-02-15 04:34:33 |
|      132 | ADAM        | HOPPER       | 2006-02-15 04:34:33 |
...
|        0 | 0           | 0            | 0000-00-00 00:00:00 |
+----------+-------------+--------------+---------------------+
202 rows in set (1 min 27.67 sec) 
```

![在此处输入图像描述](../Images/35a19fb1c7c4bffb31441c852343e35b.png)

![在此处输入图像描述](../Images/36790b45e4623a64bd89355815780e6b.png)

# scala - 如何将带有星号的参数传递给下一个方法？

> ID：11157491
> 
> 赞同：5
> 
> 时间：2012-06-22T13:49:27.383
> 
> 标签：scala

```
scala> class A (s: String*) { val l: ListBuffer[String] = ListBuffer[String](s) }
<console>:8: error: type mismatch;
  found   : String*
  required: String
    class A(s: String*)  {val l: ListBuffer[String] = ListBuffer[String](s)} 
```

为什么不能将参数传递`s`给 ListBuffer[String] 的 apply 方法，它是

```
def apply[A](elems: A*): CC[A] = { ... } 
```

（方法`apply`来自`GenericCompanion.scala`）

该代码`ListBuffer[String]("foo", "bar")`确实有效。但似乎我无法通过`s`其中 is also的字符串的参数列表`String*`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T14:00:54.797

您需要告诉 Scala 解包`s`：

```
ListBuffer[String](s: _*) 
```

您也不需要显式类型：

```
scala> class A (s: String*) { val l = ListBuffer(s: _*) }
defined class A 
```

# php - 如何从提供的 URL 获取图标文件

> ID：11157493
> 
> 赞同：-2
> 
> 时间：2012-06-22T13:49:29.570
> 
> 标签：php, fetch, favicon

通过提供一些简单的步骤来帮助我。

**网址如：** www.facebook.com 我如何获取 facebook 图标。

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:57:23.160

首先，尝试`favicon.ico`在根目录中检索，在本例中为[http://www.facebook.com/favicon.ico](http://www.facebook.com/favicon.ico)。

如果这不起作用，请检索主页并在内容中查找以下 HTML 标记之一：

```
<link rel="shortcut icon" type="image/x-icon" href="someurl" />
<link rel="icon" type="image/x-icon" href="someurl" /> 
```

有时，favicon.ico 确实存在，但`<link>`缺少标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:57:34.170

您可以使用以下

```
<?php 
$url = 'http://example.com/';
$doc = new DOMDocument();
$doc->strictErrorChecking = FALSE;
$doc->loadHTML(file_get_contents($url));
$xml = simplexml_import_dom($doc);
$arr = $xml->xpath('//link[@rel="shortcut icon"]');
echo $arr[0]['href']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T13:58:01.220

您可以通过[http://php.net/manual/en/class.domdocument.php](http://php.net/manual/en/class.domdocument.php)之类的方式对 FB 的主页进行 dl 解析，然后搜索具有图标 rel 属性的链接标签。有了这个，您可以将文件卷曲并将其用于显示链接等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T13:58:03.527

1.  获取页面内容（我建议的最佳方法是通过 cURL）
2.  解析 HTML 或执行正则表达式匹配。查找带有属性或的`link`标签。从此标签中提取值。这是来自 FB 的示例链接标签：`rel="shortcut icon"``rel="icon"``href``<link rel="shortcut icon" href="http://static.ak.fbcdn.net/rsrc.php/yi/r/q9U99v3_saj.ico" />`

# java - Java 对象的生命周期

> ID：11157494
> 
> 赞同：4
> 
> 时间：2012-06-22T13:49:44.683
> 
> 标签：java, object, object-lifetime

传递方法参数的 Java 对象的生命周期是什么？

例如我有一个对象测试

```
class Test{

    public string testType(){
       .....
    }
} 
```

我有两个班级 A 和 B

```
class classA{

   classB b = new classB();

   void nextQuestion{
      b.start(new Test());
   }
}

class classB{
   void start(Test test){
      doSomething(test.testType());
   }
} 
```

那么现在 Test 对象的寿命是多少？是只到 start 方法结束还是会一直存活到 classB 结束，或者它会一直存活到 classA 结束，或者是别的什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-22T13:50:54.740

它将*至少*保留到`start()`方法结束，因为它已在那里声明，这就是它的范围。除此之外，它的存在掌握在垃圾收集器的手中。

* * *

编辑：

最后`start()`我的意思是，直到该方法结束它的执行。即使您进行了显示的更改，`Object`该方法仍然需要`start()`它，因此它至少在`start()`方法执行结束之前仍然存在，除此之外它取决于垃圾收集器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:54:21.417

它的生命从`new Test()`被调用时开始，并且在方法完成后的任何时候都可能被垃圾收集器释放`start`，因为在编译时可以证明，在那之后它永远不会被使用。

如果该`start`方法（例如）设置一个静态字段来引用该对象，则垃圾收集器在该引用被释放之前无法收集它：

```
private static Test lastTested;
...

void start(Test test){
   lastTested = test;
   doSomething(test.testType());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:54:51.407

确切的生命周期由垃圾收集器确定：一旦不再有对该对象的引用，它就可以被 GC 回收。在您的情况下，它至少会持续到结束，`ClassB.start()`因为一旦该方法完成，就没有更多的引用

# css - css：为 IE 转换文本（旋转）和位置对齐

> ID：11157496
> 
> 赞同：1
> 
> 时间：2012-06-22T13:49:53.727
> 
> 标签：css, css-transforms

IE 像往常一样让我发疯；）

任何想法我做错了什么？我只是希望它在 IE 7、8、9 中看起来与在 chrome/safari/ff 中看起来一样

有这方面经验的请帮忙！

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>WSM</title>

<style>
#video-self-made-label-1 {
    background: url("label_1.png") no-repeat scroll 0 0 transparent;
    bottom: 0;
    display: block;
    height: 34px;
    position: fixed;
    text-decoration: none;
    width: 200px;
}
#video-self-made-label-1 span {
    border-radius: 0 6px 0 0;
    display: block;
    font: bold 14px/34px Arial;
    margin: 0 0 0 37px;
    text-align: center;
}
#video-self-made-label-2 {
    background: url("label_2.png") no-repeat scroll 0 0 transparent;
    top: 0;
    display: block;
    height: 34px;
    position: fixed;
    text-decoration: none;
    width: 200px;
}
#video-self-made-label-2 span {
    border-radius: 0 0 6px 0;
    display: block;
    font: bold 14px/34px Arial;
    margin: 0 0 0 37px;
    text-align: center;
}
#video-self-made-label-3 {
    background: url("label_3.png") no-repeat scroll 0 bottom transparent;
    right: 0;
    display: block;
    width: 34px;
    position: fixed;
    text-decoration: none;
    height: 200px;
    top: 120px;
}
#video-self-made-label-3 span {
    -moz-transform: rotate(-90deg);
    -moz-transform-origin: 0 0;
    -webkit-transform: rotate(-90deg);
    -webkit-transform-origin: 0 0;
    -ms-transform: rotate(-90deg);
    -ms-transform-origin: 0 0;
    -o-transform: rotate(-90deg);
    -o-transform-origin: 0 0;
    transform: rotate(-90deg);
    transform-origin: 0 0;
    border-radius: 0 6px 0 0;
    bottom: 3px;
    display: block;
    font: bold 14px/34px Arial;
    position: absolute;
    text-align: center;
    width: 150px;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
}
#video-self-made-label-4 {
    background: url("label_4.png") no-repeat scroll 0 0 transparent;
    left: 0;
    display: block;
    width: 34px;
    position: fixed;
    text-decoration: none;
    height: 200px;
    top: 120px;
}
#video-self-made-label-4 span {
    -moz-transform: rotate(90deg);
    -moz-transform-origin: 0 0;
    -webkit-transform: rotate(90deg);
    -webkit-transform-origin: 0 0;
    -ms-transform: rotate(90deg);
    -ms-transform-origin: 0 0;
    -o-transform: rotate(90deg);
    -o-transform-origin: 0 0;
    transform: rotate(90deg);
    transform-origin: 0 0;
    border-radius: 0 6px 0 0;
    display: block;
    font: bold 14px/34px Arial;
    left: 34px;
    position: absolute;
    text-align: center;
    top: 37px;
    width: 150px;
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
}
</style>

</head>
<body>

<a id="video-self-made-label-1" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>
<a id="video-self-made-label-2" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>
<a id="video-self-made-label-3" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>
<a id="video-self-made-label-4" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:02:51.953

我从您的原始样式中删除了此代码

```
#video-self-made-label-3 span {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
}

#video-self-made-label-4 span {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
} 
```

并将其放在仅支持 IE8 或 LOWER 的标签之间

```
<!--[if lt IE 9]>
    <style>

    #video-self-made-label-3 span {
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
    }

    #video-self-made-label-4 span {
        filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
        left: 0px !important;
    }

    </style>
<![endif]--> 
```

这是完整的代码，希望对您有所帮助！

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>WSM</title>

<style>
#video-self-made-label-1 {
    background: url("label_1.png") no-repeat scroll 0 0 transparent;
    bottom: 0;
    display: block;
    height: 34px;
    position: fixed;
    text-decoration: none;
    width: 200px;
}
#video-self-made-label-1 span {
    border-radius: 0 6px 0 0;
    display: block;
    font: bold 14px/34px Arial;
    margin: 0 0 0 37px;
    text-align: center;
}
#video-self-made-label-2 {
    background: url("label_2.png") no-repeat scroll 0 0 transparent;
    top: 0;
    display: block;
    height: 34px;
    position: fixed;
    text-decoration: none;
    width: 200px;
}
#video-self-made-label-2 span {
    border-radius: 0 0 6px 0;
    display: block;
    font: bold 14px/34px Arial;
    margin: 0 0 0 37px;
    text-align: center;
}
#video-self-made-label-3 {
    background: url("label_3.png") no-repeat scroll 0 bottom transparent;
    right: 0;
    display: block;
    width: 34px;
    position: fixed;
    text-decoration: none;
    height: 200px;
    top: 120px;
}
#video-self-made-label-3 span {
    -moz-transform: rotate(-90deg);
    -moz-transform-origin: 0 0;
    -webkit-transform: rotate(-90deg);
    -webkit-transform-origin: 0 0;
    -ms-transform: rotate(-90deg);
    -ms-transform-origin: 0 0;
    -o-transform: rotate(-90deg);
    -o-transform-origin: 0 0;
    transform: rotate(-90deg);
    transform-origin: 0 0;
    border-radius: 0 6px 0 0;
    bottom: 3px;
    display: block;
    font: bold 14px/34px Arial;
    position: absolute;
    text-align: center;
    width: 150px;
}
#video-self-made-label-4 {
    background: url("label_4.png") no-repeat scroll 0 0 transparent;
    left: 0;
    display: block;
    width: 34px;
    position: fixed;
    text-decoration: none;
    height: 200px;
    top: 120px;
}
#video-self-made-label-4 span {
    -moz-transform: rotate(90deg);
    -moz-transform-origin: 0 0;
    -webkit-transform: rotate(90deg);
    -webkit-transform-origin: 0 0;
    -ms-transform: rotate(90deg);
    -ms-transform-origin: 0 0;
    -o-transform: rotate(90deg);
    -o-transform-origin: 0 0;
    transform: rotate(90deg);
    transform-origin: 0 0;
    border-radius: 0 6px 0 0;
    display: block;
    font: bold 14px/34px Arial;
    left: 34px;
    position: absolute;
    text-align: center;
    top: 37px;
    width: 150px;
}
</style>

<!--[if lt IE 9]>
<style>

#video-self-made-label-3 span {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
}

#video-self-made-label-4 span {
    filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=1);
    left: 0px !important;
}

</style>
<![endif]-->

</head>
<body>

<a id="video-self-made-label-1" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>
<a id="video-self-made-label-2" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>
<a id="video-self-made-label-3" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>
<a id="video-self-made-label-4" href="#"><span style="background-color: #CCCCCC; color: #FFFFFF;">Video Self Made</span></a>

</body>
</html> 
```

# javascript - JavaScript for..in 和枚举奇怪的行为

> ID：11157498
> 
> 赞同：0
> 
> 时间：2012-06-22T13:49:59.033
> 
> 标签：javascript, jquery

我对 JavaScript 中 for..in 循环的奇怪行为有疑问。我有以下 HTML：

```
<div id="quarter_circle_top_left">...</div>
<div id="quarter_circle_top_right">...</div>
<div id="quarter_circle_bottom_right">...</div>
<div id="quarter_circle_bottom_left">...</div>    

<div id="author_dimension"></div>
<div id="similar_dimension"></div>
<div id="citation_dimension"></div>
<div id="concept_dimension"></div> 
```

我想要的是，当我将鼠标悬停在一个“维度”（后 4 个 div）上时，四分之一圆（前 4 个 div）将被突出显示。我在 JS 中有以下枚举：

```
var DIMENSIONS = {
    DIM_AUTHORS: {value: 1, dimCode: "author_dimension", areaCode: "quarter_circle_top_left"},
    DIM_SIMILAR: {value: 2, dimCode: "similar_dimension", areaCode: "quarter_circle_top_right"},
    DIM_CITATIONS: {value: 3, dimCode: "citation_dimension", areaCode: "quarter_circle_bottom_right"},
    DIM_CONCEPTS: {value: 4, dimCode: "concept_dimension", areaCode: "quarter_circle_bottom_left"}
}; 
```

而这个 for..in 循环应该突出显示：

```
for (var key in DIMENSIONS) {
    $("#" + DIMENSIONS[key]['dimCode']).hover(
        function() {
            $("#" + DIMENSIONS[key]['areaCode']).addClass("hover");
        }, 
        function() {
            $("#" + DIMENSIONS[key]['areaCode']).removeClass("hover");
        }
    );
} 
```

这种作品，但发生的是“尺寸”不会突出显示相应的四分之一圆，而是将鼠标悬停在其中任何一个上只会突出显示最后一个（左下角）四分之一圆。因此，当我将鼠标悬停在作者“维度”上时，我希望左上角的四分之一圆被突出显示，但只有最后一个（左下角）被突出显示。

我试图打印 and 的值，`DIMENSIONS[key]['dimCode']`它们`DIMENSIONS[key]['areaCode']`是正确的。任何想法为什么我的代码不能按预期工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:55:32.437

正如@Cranio 所说，这是循环/关闭问题。

由于您使用的是 jQuery，因此您可以使用`$.each`：

```
$.each(DIMENSIONS, function(key, value) {
    // use value['dimCode'] instead of DIMENSIONS[key]['dimcode']
    ...
}); 
```

附加函数作用域的引入避免了循环/闭包问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:53:41.057

因为`key`作为循环变量不能在你的闭包中被引用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T13:56:53.100

不完全适合您当前的情况，但我建议您使用 key 和 dimCode 作为键值对，而不是创建二维数组。

这应该可以正常工作：

```
var DIMENSIONS = {
    'author_dimension' : $('#quarter_circle_top_left'),
    // ... so on
}; 
```

因此您可以通过以下方式访问它：

```
$('div[id*="_dimension"]').hover(function () {
    DIMENSIONS[this.id].addClass('hover');  
}, function () {
    DIMENSIONS[this.id].removeClass('hover');
}); 
```

看起来不那么复杂，而且您不必在每次执行悬停时都进行 jQuery 选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:03:52.690

[http://jsfiddle.net/iambriansreed/YfhYk/](http://jsfiddle.net/iambriansreed/YfhYk/)

```
for (key in DIMENSIONS) {
    if(!DIMENSIONS.hasOwnProperty(key)) continue;  

    $("#" + DIMENSIONS[key].dimCode)
    .data('areaCode', DIMENSIONS[key].areaCode)
    .hover(function() {
        $("#" + $(this).data('areaCode')).addClass("hover");
    },function() {       
        $("#" + $(this).data('areaCode')).removeClass("hover");
    });
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T13:55:33.460

因为`key`是在循环运行时定义的。当实际的 Hover 事件发生时，它不会设置为相同的值。

# vb.net - 用组合文本替换 linq where 子句中的字段名称

> ID：11157499
> 
> 赞同：0
> 
> 时间：2012-06-22T13:50:05.713
> 
> 标签：vb.net, linq, linq-to-sql

我有一个包含 6 个文本的组合，`NA,PO,FA,GO,VG,EX`我想对此组合中的选定值进行 Linq 查询，该组合用作 where 子句中的字段。例如：

```
'if "NA" is selected :
Dim query = from t in db.table where t.NA > 0 Select t
'If "PO" is selected :
Dim query = from t in db.table where t.PO > 0 select t 
```

ETC...

如何在不编写 6 if 语句或使用“Select case”的情况下以优雅的方式做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:58:35.273

您必须使用反射来获得`PropertyInfo`基于所选字符串的值。然后在您的 LINQ 查询中使用它。不过，访问数据库可能会让人感到难过……如果不尝试的话，我不确定。您可以`PropertyInfo`像这样在 LINQ 查询中使用：

```
Dim selectedPropertyInfo = db.table.GetType().GetProperties().FirstOrDefault(p => p.Name == "NA")

Dim query = from t in db.table
            where selectedPropertyInfo.GetValue(t, null) > 0
            select t; 
```

# xcode - 有没有办法将 Xcode 键绑定导入 AppCode

> ID：11157514
> 
> 赞同：3
> 
> 时间：2012-06-22T13:50:32.120
> 
> 标签：xcode, appcode

我需要开始使用 AppCode，因为 Xcode 不支持 red-green-refactor 工作流程。但是 IntelliJ 键绑定真的很烦人 - 有没有办法批量导入 Xcode 键绑定？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:14:46.367

AppCode 已经捆绑了**Xcode**键盘映射，您只需在`Preferences`|中选择它即可。`Keymap`：

![Xcode 键盘映射](../Images/2e383b359ef5a353c85966b9b739ddac.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:19:34.500

如果你去 Preferences->Keymap 在左上角有一个 keymaps 翻转菜单。它包含很多默认的键盘映射，一个是 Xcode。

# excel - 如果 Excel 中没有活动，请关闭工作簿

> ID：11157518
> 
> 赞同：0
> 
> 时间：2012-06-22T13:50:39.460
> 
> 标签：excel, vba

这是我的代码，理论上可以。我遇到的问题是，当我键入或编辑工作表时，工作表会保存并关闭我。

所以它可以工作，只是在我在工作簿中工作时它不会重置计时器。

```
Option Explicit
Private Sub Workbook_Open()
    EndTime = Now + TimeValue("00:05:00")
    RunTime
End Sub

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
    If EndTime Then
        Application.OnTime _
                EarliestTime:=EndTime, _
                Procedure:="CloseWB", _
                Schedule:=False
        EndTime = Empty
    End If
    EndTime = Now + TimeValue("00:10:00")
    RunTime
End Sub 
```

现在这是在 ThisWorkbook 中，认为它应该包含所有内容。我错过了什么吗？计时器显然没有在应该重置的时候重置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T13:58:40.080

据我所知，取消计划的调用不起作用的唯一原因可能是：

*   过程名称不同 (CloseWB) 或
*   EndTime 自最初计划任务以来已更改或
*   RunTime 做了一些使工作簿关闭的事情......

# ios - 在更新 iOS 应用程序时，强制覆盖/删除文档中的 plist？

> ID：11157522
> 
> 赞同：0
> 
> 时间：2012-06-22T13:51:09.717
> 
> 标签：ios, plist

我想我在谷歌上搜索的一般问题没有运气：是否有一种方法可以在应用程序更新后立即调用？

更多细节：我的情况是我在捆绑包中有一个 plist。当用户第一次尝试访问 plist 时，我会检查 Documents 目录，如果它不存在，则从包中复制它。这允许用户在必要时用他们的数据覆盖。但是，每当我更新应用程序时，我都需要在包中有一个新的 plist，它将**覆盖**用户在 Documents 目录中的现有 plist。显然，我只希望在应用程序更新后发生这种情况，而不仅仅是每次应用程序运行时。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:53:46.117

您可以将捆绑版本 (CFBundleVersion) 附加到要更新的 plist 中，并根据存储在应用程序 info.plist 中的捆绑版本动态加载。

因此对于 1.3 版，您将加载 your_plist.1.3.plist

```
NSString *plistString = [NSString stringWithFormat:@"your_plist_%@", [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleVersion"]];

[[NSBundle mainBundle] pathForResource:plistString ofType:@"plist"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T13:55:04.340

您可以做的是在 NSUserDefaults 中设置一个键，其中包含当前正在运行的应用程序修订版（您在每次发布时递增的某个常量，或者只是来自 CFBundleVersion 的值）。当您打开您的应用程序时，请快速检查版本是否低于当前版本，然后覆盖 plist 并更新存储的版本，以便后续启动相同版本不会导致覆盖 plist。对于后续启动，如果修订值相同，请继续执行应用程序的其余部分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T02:34:18.943

您还可以在代码中更改 plist 的名称。这样一个新的 plist 将被复制到文档文件夹中。您还可以添加代码来删除旧的:)

# asp.net - 如何从 Oracle 创建 OracleMembershipProvider 用户？

> ID：11157527
> 
> 赞同：0
> 
> 时间：2012-06-22T13:51:23.293
> 
> 标签：asp.net, oracle, plsql, asp.net-membership

我将[OracleMembershipProvider](http://docs.oracle.com/html/E10928_01/OracleMembershipProviderClass.htm#BABEDCAI)与 Oracle11g 和 ASP.NET 4.0 一起使用。从 ASP.NET 端创建用户很容易，但我不太确定如何从 Oracle 存储过程中创建用户。

我找到了这个`ora_aspnet_Mem_CreateUser`功能。但是，它已包装好，我找不到任何文档，所以我不确定所有参数都采用什么。此外，当您从 ASP.NET 调用[CreateUser](http://docs.oracle.com/html/E10928_01/OracleMembershipProviderClass.htm#CHDFBJJE)时，有一个带有“MembershipCreateStatus 枚举值指示用户是否已成功创建”的参数。的唯一输出参数`ora_aspnet_Mem_CreateUser`是`userid`，所以我什至可以访问状态值吗？

我确实找到[了这个答案](https://stackoverflow.com/a/2958984/178225)，这主要是我想要做的，但是在 T-SQL 中。我需要在 PL-SQL 中执行此操作，如果可能，我需要确定用户是否已成功创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:28:12.263

使用[Reflector](http://www.reflector.net/)我发现 MembershipCreateStatus out 参数是 ASP.NET 函数的一部分，所以如果你想在 Oracle 函数中使用类似的东西，你必须自己编写。

除了散列之外，我得到了 PL-SQL 中的所有内容，因此一位同事用 Java 编写了散列函数：

```
create or replace and compile java source named javasha1
as
import sun.misc.BASE64Decoder;
import sun.misc.BASE64Encoder;
import java.security.*;
import java.io.IOException;
import java.io.UnsupportedEncodingException;
public class javasha1 { 
    public static java.lang.String EncodePassword(java.lang.String passPlain, java.lang.String saltBase64) 
        throws NoSuchAlgorithmException, UnsupportedEncodingException, IOException
    {
        BASE64Decoder decoder = new BASE64Decoder();
        BASE64Encoder encoder = new BASE64Encoder();

        byte[] pass = passPlain.getBytes("UTF-16LE");
        byte[] salt = decoder.decodeBuffer(saltBase64);
        byte[] joined = new byte[salt.length + pass.length];
        System.arraycopy(salt, 0, joined, 0, salt.length);
        System.arraycopy(pass, 0, joined, salt.length, pass.length);

        MessageDigest sha = MessageDigest.getInstance("SHA-1");
        return encoder.encodeBuffer(sha.digest(joined)).replaceAll("\r|\n", "");
    }
} 

FUNCTION EncodePassword
(
  p_Password VARCHAR2,
  p_Salt     VARCHAR2
)
RETURN VARCHAR2 
AS LANGUAGE java Name 'javasha1.EncodePassword(java.lang.String, java.lang.String) return java.lang.String';

PROCEDURE CreateUser
(
  p_UserName          VARCHAR2,
  p_ClearTextPassword VARCHAR2,
  p_Email             VARCHAR2
)
AS
  v_ApplicationName VARCHAR2(256);
  v_EncodedPassword NVARCHAR2(128);
  v_Now             DATE;
  v_ReturnValue     NUMBER;
  v_Salt            NVARCHAR2(128);
  v_UserID          RAW(16);

  FUNCTION Base64Encode
  (
    p_Raw RAW
  ) RETURN VARCHAR2
  AS
  BEGIN
    RETURN utl_raw.cast_to_varchar2(utl_encode.base64_encode(p_Raw));
  END Base64Encode;

BEGIN  
  v_ApplicationName := 'YOUR_APPLICATION_NAME';
  v_Now             := sys_extract_utc(Systimestamp);
  v_Salt            := Base64Encode(sys_guid());
  v_EncodedPassword := EncodePassword(p_Password => p_ClearTextPassword, p_Salt => v_Salt);

  v_ReturnValue := ora_aspnet.ora_aspnet_mem_createuser(
    applicationname_  => v_ApplicationName,
    username_         => p_UserName,
    password_         => v_EncodedPassword,
    passwordsalt_     => v_Salt,
    email_            => p_Email,
    passwordquestion_ => null,
    passwordanswer_   => null,
    isapproved_       => 1, -- true
    currenttimeutc    => v_Now,
    createdate_       => v_Now,
    uniqueemail       => 1, -- true
    passwordformat_   => 1, -- 0 = 'Clear', 1 = 'Hashed', 2 = 'Encrypted'
    userid_           => v_UserID -- out parameter
  );

END CreateUser; 
```

# wpf - 通过 WPF 自主机连接时使用 net.tcp 服务的 WCF 超时

> ID：11157532
> 
> 赞同：0
> 
> 时间：2012-06-22T13:51:41.637
> 
> 标签：wpf, wcf

我希望从托管它的同一个 .exe 中连接到 WCF 服务。我将服务托管在 WPF 应用程序中：

```
 ServiceHost svc = new ServiceHost(typeof("Namespace.Service"));
        svc.Open(); 
```

和配置文件

```
 <service name="Namespace.Service" >
    <endpoint address="Contract/tcp"
              binding="netTcpBinding"
              contract="Namespace.IContract"/>
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:9002"/>
      </baseAddresses>
    </host>
  </service> 
```

这允许我启动一个单独的 VS 实例，创建一个控制台应用程序并成功执行以下操作：

```
 IChannelFactory<IContract> facContract = new ChannelFactory<IContract>(new NetTcpBinding());
        IContract contract = facContract.CreateChannel(new EndpointAddress("net.tcp://localhost:9002/Contract/tcp"));

        string x = contract.GetProperty; //returns value I would expect 
```

但是，如果我将原始 WPF ServiceHost 代码修改为以下内容，则会在我访问服务时引发超时异常（注意：如果我在控制台应用服务主机中执行相同操作，我不会得到超时...） ：

```
 ServiceHost svc = new ServiceHost(typeof("Namespace.Service"));
        svc.Open();

        IChannelFactory<IContract> facContract = new ChannelFactory<IContract>(new NetTcpBinding());
        IContract contract = facContract.CreateChannel(new EndpointAddress("net.tcp://localhost:9002/Contract/tcp"));

        string x = contract.GetProperty; //<-!!WCF Timeout exception thrown.. 
```

WCF 跟踪不提供附加详细信息（只是确认引发了超时异常）。有什么想法吗？{这不是关于 WCF 异常管理最佳实践的问题；我正在寻找从服务主机中访问服务并被这个奇怪的超时异常阻止}

编辑：当服务主机是 WPF 应用程序（可能是其他应用程序）时，会发生此超时；但是作为服务主机的控制台应用程序的行为与我预期的一样（例如，可以访问自托管服务）。我已经更新了标题和标签以反映这个新信息......

在此先感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T19:45:45.237

这是因为 WPF 服务主机将服务托管在与使用服务相同的线程上。问题在这里定义：http: [//social.msdn.microsoft.com/Forums/en/wcf/thread/74bc9d15-c458-4f1f-81a0-ebded46b68c4](http://social.msdn.microsoft.com/Forums/en/wcf/thread/74bc9d15-c458-4f1f-81a0-ebded46b68c4)。此处详细介绍了分辨率：http: [//msdn.microsoft.com/en-us/library/ms752260.aspx](http://msdn.microsoft.com/en-us/library/ms752260.aspx)

解决方案是在单独的线程 ala 上启动服务主机**端点：**

```
 private void StartHostThread()
    {
        // Before opening host, add endpoints...
        host.AddServiceEndpoint(typeof(IContract)),
                                new NetTcpBinding(), 
                                "Contract/tcp"); //Assumes base address of net.tcp://localhost:9002/

        //For hosting on its own thread, be sure to mark service attribute 
        //  as UseSyncContext == false
        ServiceBehaviorAttribute behavior = host.Description.Behaviors.Find<ServiceBehaviorAttribute>();
        behavior.UseSynchronizationContext = false; 

        host.Open();
    } 
```

一旦在线程上打开主机，就可以在主 UI 线程上使用服务 ala：

```
 EndpointAddress epoint = new EndpointAddress("net.tcp://localhost:9002/Contract/tcp");
        IContract proxy = ChannelFactory<IContract>.CreateChannel(new NetTcpBinding(), epoint);
        string xyz;
        using (proxy as IDisposable)
        {
            xyz = proxy.GetProperty;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:55:44.473

我不确定你的 contract.GepProperty 做了什么（但它首先不应该是一个属性）

这按预期工作

- - 主持人 - -

```
 static void Main(string[] args)
        {
            var svc = new ServiceHost(typeof(Service1));
            svc.Open();

            IChannelFactory<IService1> facContract = new ChannelFactory<IService1>(new NetTcpBinding());
            var contract = facContract.CreateChannel(new EndpointAddress("net.tcp://localhost:9002/Contract/tcp"));

            var x = contract.DoWork(); 
        } 
```

- - 服务 - -

```
[ServiceContract]
public interface IService1
{
    [OperationContract]
    string DoWork();
}

// NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in both code and config file together.
public class Service1 : IService1
{
    public string DoWork()
    {
        return "Hello Work.";
    }
} 
```

--- 配置 ---

```
<configuration>
    <system.serviceModel>
        <services>
            <service name="HostAndClient.Service1">
                <endpoint address="Contract/tcp" binding="netTcpBinding" contract="HostAndClient.IService1">
                    <identity>
                        <dns value="localhost" />
                    </identity>
                </endpoint>
                <host>
                    <baseAddresses>
                        <add baseAddress="net.tcp://localhost:9002" />
                    </baseAddresses>
                </host>
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

# objective-c - 如何在 NSOutlineView 中制作一个连续的 Cell？

> ID：11157533
> 
> 赞同：1
> 
> 时间：2012-06-22T13:51:47.273
> 
> 标签：objective-c, macos, cocoa, nsoutlineview

我想要一个连续的单元格，它不会被裁剪到相应表格列的宽度。返回`YES`委托`- (BOOL)outlineView:(NSOutlineView *)outlineView isGroupItem:(id)item`方法无效。

此屏幕截图可视化了我的问题：

![截屏](../Images/7c6cf531a0bccde8f553dfd6905f517f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:22:55.690

根据[文档](http://developer.apple.com/library/mac/#documentation/cocoa/reference/NSOutlineViewDelegate_Protocol/Reference/Reference.html)，`outlineView:dataCellForTableColumn:item:`将在第一次调用时将表列参数设置为`nil`。如果在这种情况下返回一个单元格（而不是返回`nil`），它将用于绘制组行。

# liferay - 如何将查询字符串参数传递给登录页面？

> ID：11157535
> 
> 赞同：0
> 
> 时间：2012-06-22T13:51:47.727
> 
> 标签：liferay, liferay-6

我们正在使用 Liferay 的自动登录，我需要将查询字符串参数传递给登录页面。例如，我需要能够访问 foo 的值：

```
http://mysite.com/guest/group?foo=bar 
```

知道我该怎么做，因为显然默认情况下它会在重定向到登录页面的过程中丢失查询字符串:(

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:33:13.070

您将从 originalHttpRequest 中得到相同的结果。

请使用`com.liferay.portal.util.PortalUtil`类。里面有2个方法。因此，首先，通过传递获取 httpRequest，然后通过传递您从中获得的 httpRequest`getHttpServletRequest()`获取`portletRequest`原始 http`getOriginalServletRequest()`请求`getHttpServletRequest()`。

根据该请求，尝试搜索 parameter `foo`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T21:30:03.280

您可以使用以下代码：

```
Object outcome = null;
Map<String, Object> map = FacesContext.getCurrentInstance().getExternalContext().getRequestMap();
if (map != null) {
  for (String key : map.keySet()) {
    if (map.get(key) instanceof HttpServletRequestWrapper) {
      HttpServletRequest request = (HttpServletRequest) ((HttpServletRequestWrapper) map.get(key)).getRequest();
      outcome = request.getParameter("foo");
      break;
    }
  }
} 
```

我在我的 bean 构造函数中有它。

# c# - 如何与 USB 3G 调制解调器通信？

> ID：11157536
> 
> 赞同：11
> 
> 时间：2012-06-22T13:51:54.560
> 
> 标签：c#, windows, usb, serial-port, modem

我有一个 D-Link DWM-156 3G USB 调制解调器，我想从我的应用程序（在 Windows XP SP3 上运行的 C# .NET 4.0）发送 AT 命令。

插入并安装驱动程序后，调制解调器显示如下：

在*设备管理器*中，添加了两个串口：

*   **D-Link HSPADataCard 诊断接口 (COM4)**
*   **D-Link HSPADataCard NMEA 设备 (COM5)**

在*控制面板、电话和调制解调器选项*中，添加了一个新调制解调器：

*   **D-Link HSPADataCard 专有 USB 调制解调器**（连接到 COM19）

* * *

**问题：我应该使用哪个 com 端口来发送 AT 命令，以及以什么速度？**

* * *

我已经以不同的速度尝试了所有三个端口，但没有任何运气。

为了学习，我安装了*“Free Serial Port Monitor”*嗅探器应用程序，希望能够在打开和关闭互联网连接时监控与 D-Link 实用程序的通信（工作正常）。

开始时，嗅探器应用程序会询问我要监控哪个端口，并提供以下端口名称供我选择：

*   “杰尔系统 HDA 调制解调器”，
*   "D-Link HSPADataCard 专有 USB 调制解调器",
*   "COM3",
*   "COM4",
*   “COM5”
*   ...还有更多，包括“COM19”。

选择*“D-Link ...”*名称可以正常工作，现在我可以看到正在使用的所有 AT 命令，但我无法确定端口使用的波特率。此外，COM4、COM5 或 COM19 都不能以这种方式进行嗅探（这些端口上似乎没有发生任何事情）。

现在我想使用.NET中的*SerialPort*类打开*“D-Link...”*端口并与USB调制解调器通信，但是*SerialPort*类要求端口名称以“COM”开头，否则异常是抛出。但是普通的 COM 端口都不起作用。而且我仍然不知道使用哪个波特率。我很困惑并被关在这里——我该怎么做才能弄清楚这件事呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T19:18:38.397

好的，谢谢您的所有想法和意见。我做了一些更多的研究，最后我意识到，为了做我想做的事，我根本不必为串行端口和 AT 命令而烦恼。所需要的只是执行一些 Windows RAS 调用。

如果我在关于我想用我的 AT 命令做什么的问题中更具体一点，你肯定会在很久以前告诉我关于 RAS 的！

我找到了一个不错的 .Net DLL ( [DotRas](http://dotras.codeplex.com/) )，它封装了本地 Windows RAS 以供托管代码使用，它似乎可以满足我的需要（从代码拨打 3G 调制解调器连接，我连接的任何类型的 3G 调制解调器）。

再次感谢您的宝贵时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:01:08.273

通过与目标 COM 端口`GetCommState()`获取句柄后，您可以使用,：`CreateFile()`

[http://msdn.microsoft.com/en-us/library/aa915369.aspx](http://msdn.microsoft.com/en-us/library/aa915369.aspx)

# iphone - 使用适用于 iPhone 的 Facebook API 将图像发布到喜欢页面墙

> ID：11157541
> 
> 赞同：1
> 
> 时间：2012-06-22T13:52:08.063
> 
> 标签：iphone

我想在 iPhone 中使用 facebook api 发布图像以喜欢页面墙。我尝试使用图形 api 发布，但只有消息出现在页面墙上，但没有图像。任何人都可以帮助我解决这个问题..我不想发布到我拥有的类似页面，但我喜欢的页面..

提前致谢

奥古斯丁 PA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:14:03.043

将此与您自己的图像一起使用

```
NSMutableDictionary *args = [[[NSMutableDictionary alloc] init] autorelease];
[args setObject:@"message" forKey:@"caption"];
[args setObject:@"message" forKey:@"message"];
[args setObject:UIImageJPEGRepresentation(screenshotIMG1, 0.7) forKey:@"picture"];
[facebook requestWithMethodName:@"photos.upload"   // or use page ID instead of 'me'
               andParams:args
           andHttpMethod:@"POST"
             andDelegate:self]; 
```

# javascript - 快递部分必须是一个单独的文件吗？

> ID：11157544
> 
> 赞同：0
> 
> 时间：2012-06-22T13:52:18.243
> 
> 标签：javascript, web-services, node.js, express, ejs

我试图让我的网络服务器以 1 秒的间隔将更改的值传递给客户端。

我设置它的方式是客户端检查服务器存储值的变量。到目前为止它不起作用。

部分是要走的路吗？如果我使用它们，那么我是否必须创建一个单独的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T21:12:51.047

对于部分，您必须使用单独的文件，正确。

但在您的情况下，我会考虑使用预编译的[Handlebars](http://handlebarsjs.com/)（或类似的视图引擎）模板，并且只为整个应用程序或特定路线加载一次。这样可以最小化 IO，如果它们是预编译的，你可以更快地渲染和服务它们。

# applescript - 错误号 -1708 拆分字符串时

> ID：11157547
> 
> 赞同：2
> 
> 时间：2012-06-22T13:52:33.077
> 
> 标签：applescript

我有以下进行字符串拆分的函数：

```
on splitText(aString, delimiter)
    set retVal to {}
    set prevDelimiter to AppleScript's text item delimiters
    set AppleScript's text item delimiters to {delimiter}
    set retVal to every text item of aString
    set AppleScript's text item delimiters to prevDelimiter
    return retVal
end splitText 
```

单独使用时可以正常使用

记录 splitText("http://google.com|/Users/pistacchio/Desktop/google.jpg", "|")

但是当我在我需要的上下文中使用它时，我得到一个`-1708`错误

```
tell application "Safari"
    activate
    repeat with row in linesToPrint
        log splitText("http://google.com|/Users/pistacchio/Desktop/google.jpg", "|")
    end repeat
end tell 
```

`linesToPrint`是一个字符串数组

有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T14:23:00.903

从应用程序的tell语句中使用处理程序时，您需要使用[我](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_about_handlers.html#//apple_ref/doc/uid/TP40000983-CH206-SW1)或[我](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptLangGuide/conceptual/ASLR_about_handlers.html#//apple_ref/doc/uid/TP40000983-CH206-SW1)的术语来表明该术语来自您的脚本，而不是应用程序需要做的事情。

# java - 如何从 JTree 获取所有文件/目录的列表

> ID：11157550
> 
> 赞同：-1
> 
> 时间：2012-06-22T13:52:50.177
> 
> 标签：java, swing, listview, jtree

我有一个包含文件/目录的 JTree，我想获取一个包含此 JTree 的当前列表的列表。

**我该怎么做？**

```
menuItemZip.addActionListener(new AbstractAction() {
        public void actionPerformed(ActionEvent e) {
            boolean exist=false;
            File[] files = (File[]) tree.getModel().getRoot();
            for (File file : files) {
                if (file.getName().equals(selectedFile.getName()+".zip"))
                    exist = true;
                break;
            }
            if(exist ==true)
            new ZipWorkers(selectedFile,WORKING,status).execute();
            btnRefresh.doClick();
        }
    }); 
```

**编辑为新解决方案：**只是我不知道这是否是一个好的解决方案？

```
menuItemZip.addActionListener(new AbstractAction() {
        public void actionPerformed(ActionEvent e) {     
           Enumeration enumeration =  ((TreeNode) tree.getModel().getRoot()).children();
            String filename = selectedFile.getName()+".zip";
            boolean exist=false;
            while (enumeration.hasMoreElements()){
                String file = ((File) enumeration.nextElement()).getName();
                   if(file.equals(filename)){
                       exist=true;
                       break;
                   }
            }
         if(exist ==true)
            new ZipWorkers(selectedFile,WORKING,status).execute();
            btnRefresh.doClick();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T13:58:11.750

您将需要递归地进入目录（查看`File.isDirectory()`以确定是否是）。递归可以通过编写一个遍历文件数组的函数来实现，并使用目录的子级调用自身

```
boolean doesExist(File[] files, String searchFileName) {
  boolean exists = false;
  for (File f : files) {
    if (f.getName().equals(searchFileName)) {
      exist = true;
    } else if (f.isDirectory()) {
      exist = doesExist(f.listFiles(), searchFileName);
    }
    if (exist) {
      break; // no need to proceed further
    }
  }
  return exist;
} 
```

然后调用它

```
doesExist((File[]) tree.getModel().getRoot(), selectedFile.getName()+".zip"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:03:41.917

[最简单的方法是，这里](http://www.java2s.com/Code/Java/Swing-JFC/VisitingAlltheNodesinaJTreeComponent.htm)和[这里](http://www.exampledepot.com/egs/javax.swing.tree/pkg.html)的很好的例子

```
import java.util.Enumeration;   
import javax.swing.JTree;
import javax.swing.tree.TreeNode;

public class Main {
  public static void main(String[] argv) throws Exception {
    JTree tree = new JTree();
    visitAllNodes(tree);
  }
  public static void visitAllNodes(JTree tree) {
    TreeNode root = (TreeNode) tree.getModel().getRoot();
    visitAllNodes(root);
  }

  public static void visitAllNodes(TreeNode node) {
    System.out.println(node);
    if (node.getChildCount() >= 0) {
      for (Enumeration e = node.children(); e.hasMoreElements();) {
        TreeNode n = (TreeNode) e.nextElement();
        visitAllNodes(n);
      }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T15:23:10.640

还要考虑一个变体，在[这里](https://codereview.stackexchange.com/a/4447/6692)[`FileTreeModel`](https://dzone.com/articles/taking-new-swing-tree-table-a-)讨论。优点是在需要之前您无需检查节点。

# scala - 如何在不使用 zip() 的情况下将不同类型的 Future 组合成一个 Future

> ID：11157552
> 
> 赞同：32
> 
> 时间：2012-06-22T13:52:52.000
> 
> 标签：scala, akka, future, applicative

我想`Future[(Class1,Class2,Class3)]`从下面的代码中创建一个 Future 类型。然而，我发现这样做的唯一方法是使用 zip()。我发现解决方案很丑陋，而且不是最佳的。任何人都可以启发我。

```
val v = for (
    a <- {
        val f0:Future[Class1] = process1
        val f1:Future[Class2] = process2
        val f2:Future[Class3] = process3
        f0.zip(f1).zip(f2).map(x => (x._1._1,x._1._2,x._2))
    } yield a  // Future[(Class1,Class2,Class3)] 
```

我也尝试过使用`Future.sequence(List(f0, f1, f2))`，但这不起作用，因为新的 Future 将具有`Future[List[U]]`where `U`is the lub 的类型，`Class1/2/3`而我想要一个保留原始类型的 3 元组

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-22T14:47:18.737

```
val result: Future[(Class1, Class2, Class3)] = for {
  _ <- Future.unit
  val f1 = process1
  val f2 = process2
  val f3 = process3
  v1 <- f1
  v2 <- f2
  v3 <- f3
} yield (v1, v2, v3) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-06-22T14:11:47.710

## Applicative Functors

What you are asking for is an applicative functor for a future. See scalaz **[Applicative](https://github.com/scalaz/scalaz/blob/master/core/src/main/scala/scalaz/Applicative.scala) Builder** pattern. It should be rather trivial to roll your own on the back of `zip`

```
(f0 |@| f1 |@| f2)(g) //g is function (Class1, Class2, Class3) => Z 
```

This is equivalent to the direct applicative:

```
(f0 <***> (f1, f2))(g) 
```

Scalaz ships with a *banana braces* method which forms a tuple from the target and the arguments (i.e. what you asked for). So your solution will be:

```
f0 <|**|> (f1, f2) //that. is. all. 
```

You get all this simply by defining a typeclass instance for the following typeclass:

```
trait Apply[Z[_]] {
  def apply[A, B](f: Z[A => B], a: Z[A]): Z[B]
} 
```

So for future this looks like:

```
implicit val FutureApply = new Apply[Future] {
  def apply[A, B](f: Future[A => B], a: Future[A]): Future[B] = 
    (f zip a) map { case (fn, a1) => fn(a1) }
  }
} 
```

(Actually you'd need `Pure` and `Functor` as well. Might as well implement `Bind` whilst you're at it - see appendix)

The great thing about this pattern is that you will start to see it everywhere (e.g. in `Option`, in `Validation`, in `List` etc). For example, the cartesian product of 2 streams is:

```
s1 <|*|> s2 
```

* * *

## Notes

*All the above assuming scalaz 6, doubtless scalaz 7 for 2.10 will ship with these typeclasses by default. `Pure` has been renamed `Pointed` in scalaz7.*

* * *

## Appendix

Other type class instances for future:

```
implicit val FuturePure = new Pure[Future] {
  def pure[A](a: =>A): Future[A] = Future { a }
}
implicit val FutureBind = new Bind[Future] {
  def bind[A, B](a: Future[A], f: A => Future[B]): Future[B] = a flatMap f
}
implicit val FutureFunctor = new Functor[Future] {
  def map[A, B](a: Future[A], f: A => B): Future[B] = a map f
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-22T14:26:20.503

如果您使用 akka，请查看数据流：[http ://doc.akka.io/docs/akka/2.0.2/scala/dataflow.html](http://doc.akka.io/docs/akka/2.0.2/scala/dataflow.html)

您需要使用 Delimited Continuations 插件（但使用 sbt 很容易），然后是：

```
val f:Future[(Class1,Class2,Class3)] = flow {
  val f0 = process1
  val f1 = process2
  val f2 = process3
  (f0(), f1(), f2())
} 
```

应该编译。

在 build.sbt 中：

```
autoCompilerPlugins := true

addCompilerPlugin("org.scala-lang.plugins" % "continuations" % "2.9.1") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-10T18:53:28.277

你也可以使用猫：

```
import cats._
import cats.instances.future._ 
```

有一些有用的方法可以做到这一点：

第一个更通用的选项：

```
Applicative[Future].map3(f0, f1, f2){ 
  (f0r, f1r, f2r) => //do something with results
} 
```

更简单:) 只会返回元组 Future[(f0.type, f1.type, f2.type)

```
Applicative[Future].tuple3(f0, f1, f2) 
```

# authentication - Yii 基于角色的访问，管理自己的帖子

> ID：11157553
> 
> 赞同：4
> 
> 时间：2012-06-22T13:52:59.920
> 
> 标签：authentication, yii, rbac, role-base-authorization

我用谷歌搜索，阅读教程，博客并进行了很多实验。所以我能够定义对控制器操作的基于角色的访问。一切正常。我想问的是。如何编写规则来显示、编辑和删除用户自己的帖子？

默认情况下，它显示所有帖子。但是，我们可以将数据提供者标准设置为显示自己的帖子。但是我怎样才能控制CRUD呢？请帮助我。我的代码如下。

```
 public function accessRules() {
        return array(
            array('allow', // allow all users to perform 'index' and 'view' actions
                'actions' => array('index', 'view'),
                'users' => array('*'),
            ),
            array('allow', // allow authenticated user to perform 'create' and 'update' actions
                'actions' => array('create', 'update'),
                'expression' => 'Yii::app()->controller->HaveAccess()',
                //'users' => array('@'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions' => array('admin', 'delete'),
                'expression' => 'Yii::app()->controller->HaveAccess()',
            ),
            array('deny', // deny all users
                'users' => array('*'),
            ),
        );
    } 
```

**对于帖子显示：**

```
 public function actionIndex() {
        $dataProvider = new CActiveDataProvider('Advertisment');
        if (!$this->IsAdmin()) {
            $dataProvider = new CActiveDataProvider('Advertisment', array(
                        'criteria' => array(
                            'condition' => 'added_by='.$this->userId,
                            'order' => 'id DESC',
                        ),
                        'pagination' => array(
                            'pageSize' => 20,
                        ),
                    ));
        }
        $this->render('index', array(
            'dataProvider' => $dataProvider,
        ));
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T15:38:01.070

要将更新和删除操作限制为用户自己的帖子，您必须检查控制器操作中的权限（这在控制器的`accessRules`afaik 中是不可能的，因为要检查权限的帖子的 ID，在`accessRules`被评估。）

例子：

```
public function actionUpdate($id){
    $model = $this->loadModel($id);
    if($model->added_by === $this->userId){
        // your code here
    }else
        throw new CHttpException(401,'You are not authorized to edit this post.');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T04:45:54.143

使用范围：

[http://www.yiiframework.com/doc/api/1.1/CActiveRecord#scopes-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#scopes-detail)

在您的模型中：

```
public function scopes()
{
return array(
  'own'=>array(
    'condition'=>'userid=' . Yii::app()->user->id,
  ),
);
} 
```

然后像这样选择您的数据：

```
Post::model()->own()->findAll(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T10:44:56.627

我能想到的唯一方法是首先修改激活操作的链接：*更新、删除、查看*以发送该`added_by`字段以及帖子的 ID（默认情况下发送帖子 ID）。然后在你的`'expression'`你可以检查是否`added_by`匹配你的`userId`. 以下是视图示例（假设您在问题中说显示时是指视图）：

1.  accessRule 修改，为此请确保您在`$this->userId`评估 accessRules 之前有一个值，这可以在[`init()`](http://www.yiiframework.com/doc/api/1.1/CController#init-detail "http://www.yiiframework.com/doc/api/1.1/CController#init-detail")方法中完成：

    ```
    return array(
        array('allow', // allow all users to perform 'index' actions
            'actions' => array('index'),
            'users' => array('*'),
        ),
        array('allow', // allow authenticated user to perform 'create' and 'update' actions
            'actions' => array('create', 'admin'),
            'expression' => 'Yii::app()->controller->HaveAccess()',
            //'users' => array('@'),
        ),
        array('allow', // allow admin user to perform 'admin' and 'delete' actions
            'actions' => array('view', 'delete', 'update'),
            'expression' => 'Yii::app()->controller->HaveAccess() && ($_REQUEST["added_by"]=='.$this->userId.")",
        ),
        array('deny', // deny all users
            'users' => array('*'),
        ),
    ); 
    ```

2.  查看修改以将`added_by`id 添加到 url 参数。假设您有默认生成的 crud 视图，即*index.php、_view.php、_form.php、_view.php、update.php 等*，其中*_view.php*具有转到帖子详细视图的链接，这也是index.php 中列表视图的 itemView。在这里我们进行一些更改（_view.php）：

    ```
    <div class="view">

       <b><?php echo CHtml::encode($data->getAttributeLabel('id')); ?>:</b>
       <?php echo CHtml::link(CHtml::encode($data->id), array('view', 'id'=>$data->id,'added_by'=>$data->added_by)); ?>
       <br />

       <b><?php echo CHtml::encode($data->getAttributeLabel('someattribute')); ?>:</b>
       <?php echo CHtml::encode($data->someattribute); ?>
       <br />

       <!-- more attributes-->

    </div> 
    ```

3.  您必须修改删除链接、更新操作以传递 added_by 字段。

# c# - 你如何实现 IEnumerable？

> ID：11157563
> 
> 赞同：-4
> 
> 时间：2012-06-22T13:53:48.553
> 
> 标签：c#, .net, linq, interface, ienumerable

我在扯头发。显然你不能只做类似的事情

```
class Ranch<T> : IEnumerable<T>
{
   // Mad code
    IEnumerator<T> GetEnumerator()
    {
        // Hectic implementation details
    }
   // More mad code
} 
```

我搜索了互联网，但找不到一个**简单**的例子来说明如何在任何地方实现该死的东西。甚至 MSDN。这太荒谬了。

有简单的关键词。我发现很多链接声称告诉我如何做，然后继续漫无目的，带来大量不必要和烦人的其他花絮。我想要一个简单的“打掉它并运行”代码示例，它与上述伪代码的大小和范围。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T13:59:31.140

要实现`IEnumerable<T>`接口，您还必须实现`IEnumerable`它继承的接口。

右键单击类签名中的接口，然后选择*实现接口*，您会在类的末尾添加一个骨架：

```
class Ranch<T> : IEnumerable<T> {

  ...

  #region IEnumerable<T> Members

  public IEnumerator<T> GetEnumerator() {
    throw new NotImplementedException();
  }

  #endregion

  #region IEnumerable Members

  System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() {
    throw new NotImplementedException();
  }

  #endregion
} 
```

只需调用该`IEnumerable.GetEnumerator`方法即可实现该`IEnumerable<T>.GetEnumerator`方法：

```
System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator() {
  return GetEnumerator();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T13:59:56.163

接口`IEnumerable<T>`继承`IEnumerable`并隐藏了方法`GetEnumerator`。从.net源复制：

```
 public interface IEnumerable<T> : IEnumerable
  {
    IEnumerator<T> GetEnumerator(); // hides IEnumerable.GetEnumerator()
  } 
```

您还需要显式实现非泛型接口方法`IEnumerable GetEnumerator()`：

```
class Ranch<T>: IEnumerable<T>
{
    // Mad code
    IEnumerator<T> GetEnumerator()
    {
        // Hectic implementation details
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
      return GetEnumerator();
    }

   // More mad code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:07:01.073

```
class Ranch<T> : IEnumerable<T>
{
   // Mad code
    public IEnumerator<T> GetEnumerator()
    {
        for (int i = 0; i < 42; ++i)
            yield return default(T);
    }
    IEnumerator IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
   // More mad code
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:00:17.393

正如[ienumerable 的文档](http://msdn.microsoft.com/en-us/library/system.collections.ienumerable.aspx)所示，您可以为自定义类实现自己的 Enum。或者要覆盖`GetEnumerator()`方法本身，您可以查看[iterators 的文档](http://msdn.microsoft.com/en-us/library/65zzykke.aspx)。

实现方法的示例代码：

```
public System.Collections.IEnumerator GetEnumerator()
{
    foreach (object obj in underLyingCollection)
    {
        yield return obj;
    }
} 
```

正如其他人所说，您还必须实现通用（上述）方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T14:04:22.737

一个例子在`Mad Code`哪里`List<T>`。创建类并指定它继承自后`IEnumerable<T>`，您可以单击它，然后会出现一个下拉菜单`Options to implement interface`。单击它然后选择`Implement interface 'IEnumerable<T>'`它，它将生成必要的存根。然后你只需填写疯狂的代码。

```
class Ranch<T>: IEnumerable<T> // <-- click here in VS
{
    List<T> _madCode = new List<T>(); // Mad code

    IEnumerator<T> GetEnumerator()
    {
        return _madCode.GetEnumerator(); // Hectic implementation details
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
      return GetEnumerator();
    }

   // More mad code
} 
```

# html - 修复表格中的文本位置

> ID：11157565
> 
> 赞同：1
> 
> 时间：2012-06-22T13:54:06.610
> 
> 标签：html, css, templates, html-table

我在将文本放入多个表格时遇到了一个简单的问题！请看一下代码。在这段代码中，看看名为“为什么它在中间”的文本总是停留在中间我不能把它们放在那个表的顶部！

代码

```
<table width="100%" border="0">
  <tr>
    <td width="50%"><table width="100%" border="0">
      <tr>
        <td>welcome</td>
      </tr>
      <tr>
        <td>some code here </td>
      </tr>
      <tr>
        <td>php script here </td>
      </tr>
    </table></td>
    <td width="50%">why it is in middle </td>
  </tr>
</table> 
```

那么我怎样才能把它放在桌子的顶部呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T13:56:22.217

使用 css 属性`vertical-align: top;`。见[演示](http://jsfiddle.net/ZUYJ3/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T13:58:27.373

如果您想使用内联表属性，还有 valign。

```
<td valign="top">This will be at the top</td> 
```

# ios - UIViewController 包含崩溃

> ID：11157576
> 
> 赞同：1
> 
> 时间：2012-06-22T13:54:25.520
> 
> 标签：ios, uiviewcontroller

我正在摆弄一些代码来尝试让 UIViewController 包含工作（在 iPad 应用程序中）。

场景如下：我有一个视图，我想在上面显示第二个视图。我想要第二个（不同的） UIViewController 管理与第二个视图的所有交互。第一个视图将在按下按钮时加载第二个视图。当按下按钮时，以下代码在第一个控制器中运行：

```
-(void)displayPropertyView // <-button triggers this
{
    // Need to instantiate a new view and add it to the main editor view.
    HPSQuestionListController* questionListController = [ [ HPSQuestionListController alloc ] init ];
    [self.view addSubview:questionListController.view];
    [self.view bringSubviewToFront:questionListController.view];
    [self pushViewController:questionListController animated:YES];

}
-(void)pushViewController:(UIViewController*)controller animated:(BOOL)animated
{
    [self addChildViewController:controller];
    //[controller didMoveToParentViewController:self];

    if (YES)
    {
        [self transitionFromViewController:self 
                          toViewController:controller 
                                  duration:1.0 
                                   options:nil 
                                animations:^{}
                                completion:^(BOOL finished){
            [controller didMoveToParentViewController:self];
        }];
    }
} 
```

该应用程序在 transitionFromViewController 行崩溃：

> 子视图控制器，并且在调用 -[UIViewController transitionFromViewController:toViewController:duration:options:animations:completion:]' 时必须有一个共同的父视图控制器

有谁知道如何解决这个问题？我对 UIViewController 包含的理解是，我可以让两个控制器同时管理两个视图。这是错的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-15T15:26:41.080

子视图控制器应该具有相同的父容器视图控制器（这就是错误消息所说的）。要添加子视图控制器，请在容器视图控制器中使用以下代码：

```
[self addChildViewController:myVC1];
[myVC1 didMoveToparentViewController:self]; 
```

在容器视图控制器中，您可以使用`transitionFromViewController`

```
[self transitionFromViewController:myVC1 toViewController:myVC2 duration:2.0f options:UIViewAnimationOptionTransitionCrossDissolve animations:^{} completion:^(BOOL finished) {
  [myVC1 removeFromParentViewController];
  [myVC2 didMoveToParentViewController:self];
}]; 
```

您正在尝试做一些没有多大意义的事情，`self`而不是代码中的容器视图控制器。

有关完整示例，请参见：[https ://github.com/toolmanGitHub/stackedViewControllers](https://github.com/toolmanGitHub/stackedViewControllers)

# javascript - 当对对象数组进行 foreach 时，Knockout 不会从对象数组属性生成下拉列表

> ID：11157581
> 
> 赞同：0
> 
> 时间：2012-06-22T13:54:34.213
> 
> 标签：javascript, arrays, knockout.js

我有一个生成属性对象数组的表单。属性对象有一个数组属性，它是属性值的数组。该表单允许您添加属性名称和属性值数组并映射到属性对象：

```
function Attribute(data) {
      var self = this;
      self.Name = ko.observable([data.attributeName]);
      self.Values = ko.observable([data.attributeValues]);
  } 
```

Values 数组是 AttributeValues 的一个属性：

```
 function AttributeValue(data) {
      this.Value = data.value;
  }; 
```

使用 ViewModel 在创建它们时具有**AttributeValues**数组，并将其与 Attribute 名称一起传递给其本地**Attributes数组**

```
 function newProductViewModel() {
      var self = this;
      self.attributeName = ko.observable();
      self.attributes = ko.observableArray([]);
      self.attributeValues = ko.observableArray([]); 
```

当您在表单中创建属性时，敲除列出您添加到 AttributeValues 数组中的属性值没有问题：

```
 <select multiple="multiple" height="5" data-bind="options: attributeValues, optionsText: 'Value', selectedOptions: selectedItems, optionsCaption: 'Added Values...'"> 
```

其中**attributeValues**是ViewModel 的attributeValues 数组。

添加属性名称和属性值列表并添加属性后，我会遍历 ViewModel 上的 observableArray**属性**属性，以在创建属性时显示添加的属性列表。

**问题**

**问题是我为每个属性的属性值**数组显示一个下拉列表（选择）：

```
<ul data-bind="foreach: attributes">
   <li>
    <div>
       <span data-bind="text: Name"></span>
       <select multiple="multiple" height="5" data-bind="options: Values, optionsText: 'Value', selectedOptions: selectedItems, optionsCaption: 'Added Values...'">

     .....remove for sake of brevity 
```

但它不会在每个**属性**的 Values 数组中列出每个**AttributeValue的****值**

 ******我已经逐步完成，可以看到 Values 属性确实设置了正确的值。**

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:25:54.417

我解决了这个问题。我将数组“attributeValues”传递给 Attribute 对象并将其放入数组

```
self.Values = ko.observable([data.attributeValues]); 
```

所以我假设这将是一个元素的数组，其中包含该索引中的 attributeValues 数组。单步执行时，我看到了正确数量的元素，因为我只添加了一个值，但实际上是查看第一个索引中的数组。****

# python - 我将如何更改此 QuerySet 过滤器以处理带有空格的用户输入？

> ID：11157585
> 
> 赞同：0
> 
> 时间：2012-06-22T13:54:49.060
> 
> 标签：python, django

我有一个 django 视图，可以在我的数据库中搜索包含用户在表单上提交的文本的名称。

当我使用搜索时，我会根据每条记录的和字段`.filter`检查用户查询。一切正常，但**我的问题是，如果用户在搜索框中输入带有空格的全名（例如，“John Smith”而不是“john”或“smith”，我的函数将不返回任何结果！**`first_name``last_name`

 **这一切都很新，我不确定我将如何改变功能甚至形式。我可能只是懒惰并阻止他们输入空格键（我认为这是可能的）或其他东西，但我想了解我的问题的实际解决方案？

这是表单和视图，它们非常简单：

```
<form action="/Speakers/Search" method="get">
    <input type="text" name="q">
    <input type="submit" value=" Search ">
    </form> 
```

完整的附带问题：刚刚意识到，因为我一直在使用带换行的文本编辑器，我忘记了我仍然不知道在 python 中添加换行符在哪里“安全”？重要的是缩进吗..？所以很抱歉不得不滚动下面的代码：

```
def SearchSpeakers(request):
    if 'q' in request.GET and request.GET['q']: #2nd condition return false if emtpy string
        search = request.GET['q']
        message = "You searched for: %s." % search
        results = Speaker.objects.filter(Q(first_name__icontains=search) | Q(last_name__icontains=search))
        if not results: #returned empty
            message += " We could not find the name you entered in our Speakers List but you check back again before the event! Press clear to see the complete list again."

        return render_to_response('Speakers.html', {'speakers':results, 'query': message})
    else:
        message = "You did not enter a name."
        return render_to_response('Speakers.html',{'query':message}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:36:17.457

你可以使用更多的[Q() 对象](https://docs.djangoproject.com/en/1.4/topics/db/queries/#complex-lookups-with-q-objects)

```
import operator
results = Speaker.objects.filter(reduce(operator.or_,
              (Q(first_name__icontains=term)|Q(last_name__icontains=term)
               for term in request.GET.get('q', '').split()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:03:07.340

看起来您的问题是您正在使用全名搜索 first_name 或 last_name 字段。您可以添加一些逻辑来检查输入（在空格或逗号上拆分）并在循环中搜索整个名称的每个成员。我不熟悉 Django 但

```
search = request.GET['q']
message = "You searched for: %s." % search
for term in list(set(search.split())):
    # ...search each term and compile into a set of results 
```**

# java - 包含数据库的程序安装版本

> ID：11157592
> 
> 赞同：2
> 
> 时间：2012-06-22T13:55:09.980
> 
> 标签：java, postgresql

我得到了 Netbeans 7.1 如何制作我的程序的安装版本？我需要它：Win32 和 Win64。我还必须包括 PostregSQL 数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T11:51:15.093

如果“Netbeans 7.1”是指您已经使用 Netbeans 平台构建了一个应用程序，那么您可以为 Netbeans 平台应用程序生成一个安装程序。请参阅[自定义 Netbeans 平台安装程序](https://blogs.oracle.com/geertjan/entry/customizing_the_netbeans_platform_installer)和[使用 NetBeans IDE 6.9 生成 NetBeans 平台安装程序](https://blogs.oracle.com/geertjan/entry/generate_a_netbeans_platform_installer)等。

至于 PostgreSQL：我建议*不要*自动安装 PostgreSQL。如果您愿意，请在您的应用程序旁边提供安装程序，但请不要为用户安装它。

为什么？

*   PostgreSQL 列表中的许多问题都来自那些在软件捆绑时安装了 PostgreSQL 的旧版本的人。（是的，我在看你 Poker Tracker）。如果您鼓励用户在您支持的主要版本中下载最新的点发布，您将不会遇到这些问题。

*   您的应用程序可能会尝试使用预设的密码和位置静默运行 Pg 安装程序。如果其他人的应用程序已经为相同的主要版本运行了 Pg 安装程序，或者如果用户已经安装了 Pg，则您的应用程序将无法配置安装，因此无法正常运行。

*   如果用户稍后想要安装 PostgreSQL，但他们不知道您已经为他们安装了它，他们将不知道 PostgreSQL 服务密码或“postgres”管理员密码，因此他们会对 Pg 安装程序不知道的原因感到困惑不按他们的期望工作。他们最终会成为 PostgreSQL 邮件列表中另一个困惑的用户。

我真的希望 EnterpriseDB 安装程序将来能够支持“品牌”安装，其中安装进入单独的位置和非默认端口上的单独服务帐户，因此它不会涉及常规 Pg 安装. 现在情况并非如此。

如果您确实*必须*在您的应用程序中安装 PostgreSQL，请使用 .zip 二进制包（适用于 Windows）并使用非默认端口自行在非默认位置运行 initdb。这样您就不会破坏常规安装。这也意味着您将更干净地安装在其他平台上，例如 Linux 系统，其中 PostgreSQL 通常被打包为操作系统的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:57:57.493

Java 在[JVM](http://en.wikipedia.org/wiki/Java_virtual_machine)上运行，这意味着您的应用程序需要的唯一安装是其机器上安装的处理器的 Java 运行时。

您可以分发 JAR，或者如果您愿意，可以创建另一种语言的 EXE 或批处理文件来执行 JAR。但是，如果您采用 EXE 路线，则必须在两种体系结构上进行编译才能兼容。

相关：[Java 可移植意味着什么？](http://wiki.answers.com/Q/What_does_it_mean_to_say_that_Java_is_portable)

# spring-roo - Spring Roo 用户注册、管理和登录

> ID：11157593
> 
> 赞同：1
> 
> 时间：2012-06-22T13:55:11.677
> 
> 标签：spring-roo

我是 Spring Roo 的新手，正在寻找一种快速启动具有基本功能的企业 Java 应用程序的方法。

从这个角度来看，我需要做的第一件事是一个简单的用户注册和登录页面，具有通常的一组功能：登录、注销、确认电子邮件地址、重置密码和编辑用户信息。

有一个非常好的附加组件，称为[典型安全](http://code.google.com/p/spring-roo-addon-typical-security/)，但它太旧（不支持 Roo 1.2）并且没有连续性（据我所知）

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T18:11:21.857

我花了 10 分钟将我需要的东西从他们的源 jar 复制到我的项目中。如果您喜欢该插件提供的所有内容，请为新的 roo 制作一个补丁并将其推送！ [https://code.google.com/p/gvnix/source/browse/#svn%2Frepo%2Fcom%2Fxsoftwarelabs%2Fspring%2Froo%2Faddon%2Ftypicalsecurity%2Fcom.xsoftwarelabs.spring.roo.addon.typicalsecurity%2F0.1.5](https://code.google.com/p/gvnix/source/browse/#svn%2Frepo%2Fcom%2Fxsoftwarelabs%2Fspring%2Froo%2Faddon%2Ftypicalsecurity%2Fcom.xsoftwarelabs.spring.roo.addon.typicalsecurity%2F0.1.5)

# cocoa - 只有在 Lion 10.7.4 中以管理员身份运行时，我的可可应用程序才会运行？

> ID：11157605
> 
> 赞同：0
> 
> 时间：2012-06-22T13:55:39.517
> 
> 标签：cocoa, client, osx-lion, administrator

当我尝试使用非管理员登录帐户打开应用程序时，仅在 Lion (10.7.4) 版本上出现此问题。尽管应用程序是在非管理登录权限下开发和编码的。该应用程序适用于其他系统的较低版本 [直到 Lion 10.7.2]。谁能帮我知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:33:21.170

在我的应用程序中，我没有`core plot framework`正确添加。现在我纠正自己以克服这个问题。

# jquery - 如何使用提交表单更改 jquery 参数？

> ID：11157606
> 
> 赞同：1
> 
> 时间：2012-06-22T13:55:39.520
> 
> 标签：jquery

我是 jQuery 的新手。我正在尝试一些事情，但我需要一些帮助。

我有以下脚本

```
jQuery(function($){
        $("#query").whatever({
          parameter1: 32,
          parameter2: 4,
          query: "something"
        });
      }); 
```

我需要一个脚本来`query: "something"`通过`query: "something else"`提交表单更改。是否可以？

ps：我改为`$("#query").something`不要`$("#query").whatever`与参数混淆`query: "something"`

[实际上，我使用来自http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)的jquery 代码我想通过提交表单更改示例 2 中的“查询”参数，正如我之前所说的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:02:33.893

看看：[http ://api.jquery.com/jQuery.extend/](http://api.jquery.com/jQuery.extend/)

有一个表格：

```
 <form>
        <input name="newvalue" id="newvalue" type="text"/>
        <input type="button" id="onclickUpdate" value="update" name="update"/>
    </form>
    <script>
        var obj = {
            parameter1 : 32,
            parameter2 : 4,
            query : "something"
        };
        $(function() {
            $('#onclickUpdate').click(function(e) {
                e.preventDefault();
                console.log('old : ' + obj.query);
                $.extend(obj, {
                    query : $('#newvalue').val()
                });
                console.log('new : ' + obj.query);
                $("#query").something(obj);
            });
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T18:49:41.883

好吧，假设您正在使用 $.ajax() 提交表单。提交表单时，您可能会传递 3 到 4 个键以及它们的值作为数据，对吧？在这些密钥对值之一中，您需要一个默认值，因此不要从头开始构建散列，而是从默认值开始，将要发送的其他值添加到其中：

```
initdata = {query:"something-else"}; //not needed if you don't include the "query" key while populating tobesent
tobesent = {}; //may be through serializing a form through serializeArray or something
tobesent = $.extend(tobesent,initdata);  
$.ajax({
url : "foo.php",
data: tobesent,success: function() {}
}); 
```

这是你要找的吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-22T14:02:03.960

是的，将选项包含为字典，并将**查询**键预设为**其他**值，并将选项字典作为要传递的参数传递。

# facebook - 将我的 domain.com 重定向到 facebook 画布页面

> ID：11157609
> 
> 赞同：0
> 
> 时间：2012-06-22T13:55:50.007
> 
> 标签：facebook, redirect, facebook-apps

我在[http://apps.facebook.com/myappname上有一个应用程序，它是](http://apps.facebook.com/myappname)[http://mydomain.com](http://mydomain.com)的画布页面。

我不希望用户访问 mydomain.com，所以我想将他重定向到[http://apps.facebook.com/myappname](http://apps.facebook.com/myappname)。

这样做最好的方法是什么？我试图通过 javascript、php 和 htaccess 重定向，但我收到一个错误，因为 facebook 使用我的 url 加载画布页面。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T21:40:51.950

JavaScript：

```
function referrerIsFacebookApp() {
    if(document.referrer) {
        return document.referrer.indexOf("facebook.com") !== -1;
    }
    return false;
}
if (!referrerIsFacebookApp()) {
    top.location.replace("http://apps.facebook.com/APP_NAME_SPACE");
} 
```

PHP：

```
function referrerIsFacebookApp() {
    if (strpos($_SERVER['HTTP_REFERER'], "facebook.com") === false || strpos($_SERVER['HTTP_REFERER'], "facebook.com/l.php?u=") !== false) {
        return false;
    }
    return true;
}
if (!referrerIsFacebookApp()) {
    header("Location: http://apps.facebook.com/APP_NAME_SPACE");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T15:57:17.480

只需在 iframe 中加载您的应用程序时检查 signed_request 参数传输。

# git - 使用 Git 分支维护网站的子域

> ID：11157611
> 
> 赞同：1
> 
> 时间：2012-06-22T13:56:13.183
> 
> 标签：git, version-control, branch

我不是 Git 方面的专家，但我以前见过这样做（我只是不知道它背后的实际实现）。

我在 www.foobar.com 有我的主要网站，但我想在 beta.foobar.com 有一个测试子域（或者如果这太复杂，在 foobar.com/beta 有一个测试目录）

有没有办法在我的 Git 存储库中有 2 个分支来管理主网站和一个子域，以便我可以在 beta 中进行所有测试，当我发现我的代码令人满意时，我可以简单地将 beta 合并到主分支中？

如果我以错误的方式思考这个问题，请随时提出替代方案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:02:34.480

这很容易实现，并且与 GIT 无关，但取决于您的网络服务器设置和应用程序的部署过程。2个简单的步骤：

1.  将您的 Web 服务器配置为同时为 www.foobar.com 和 beta.foobar.com 提供服务。为来自不同网络根的不同域提供服务，例如来自主应用程序`/var/www/foobar.com/app/public`和来自子域`/var/www/foobar.com/subdomains/beta/public`
2.  对于部署，只需将 master 分支克隆到`.../app/public`目录中，并将 beta 分支克隆到`.../subdomains/beta/public`

该过程还可以使用[Capistrano](https://github.com/capistrano/capistrano)和[多级扩展](https://github.com/capistrano/capistrano/wiki/2.x-Multistage-Extension)等工具自动化。

**编辑以回应您的评论：**

在您不只是为自己做的严肃项目中，**您永远不应该更新当前部署的文件**。这是建议的设置：

1.  拥有一个裸露的 git 存储库 - 可以在您的服务器或 github.com（或任何其他提供商）上访问
2.  在您的开发机器上克隆存储库 - 这是您将要处理的代码
3.  假设 beta 分支发生更改：推送该更改
4.  现在您可以将裸存储库的 beta 分支克隆到 beta 的部署路径中
5.  每当您准备好时：将 beta 拉入 master（在您的开发机器上）
6.  推主
7.  通过将裸存储库 master 分支克隆到 master 的部署路径来部署 master

如上所述，像 capistrano 这样的工具使部署变得非常简单，它们甚至可以保留您不同部署的历史记录。例如看[这篇文章](http://www.davegardner.me.uk/blog/2012/02/13/php-deployment-with-capistrano/)，看看它是如何用于 PHP 部署的。

# eclipse - Scala 在命令行上输出，但不在 Eclipse Scala IDE 中

> ID：11157612
> 
> 赞同：0
> 
> 时间：2012-06-22T13:56:13.857
> 
> 标签：eclipse, scala, scala-ide

我不知道发生了什么，甚至不知道如何弄清楚，但我有一个 Scala Hello World 对象，就像这样。

```
object TestFoo {
  def main(args: Array[String]): Unit = {
    println("Hello World")
  }
} 
```

用于 Eclipse 的 Scala IDE（用于 Scala 2.9，运行 Eclipse Indigo）没有显示任何错误并创建了一个编译类。当我去**Run > Run As > Scala Application**时，终端控制台没有显示输出。但是，当我转到命令行并直接运行 scala（使用 Eclipse 编译的类文件）时，我得到了正确的输出：

```
% scala -cp bin/classes TestFoo
Hello World 
```

关于我可能做错了什么或可以做些什么来纠正问题以便输出显示在 Eclipse 中的任何想法？

**更新：**在一位评论者建议检查错误日志之后，我检查了 Eclipse 的控制台输出，看看那里是否有任何常见的东西。我看到了 Java 的崩溃报告，但这是个例外：

```
Java information:
 Exception type: Internal Error (/SourceCache/JavaJDK16/JavaJDK16-424/hotspot/src/share/vm/runtime/fieldDescriptor.cpp, line 85)

#  guarantee(_name_index != 0 && _signature_index != 0) failed: bad constant pool index for fieldDescriptor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:16:02.753

好的，所以经过进一步调查，只要我使用 Scala 项目来完成这项工作，一切似乎都可以正常工作。它也可能适用于运行 Scala 和 Java 混合的典型 Java 项目。

在这种情况下，我试图让一个测试脚本在一个 Android 项目中运行，它根本找不到终端并且报告了异常。那就是我做错了。

如果您在从 Android 项目或其他非 Scala 项目中运行控制台应用程序时遇到问题，那可能就是问题所在。为此类事情使用 Scala 项目。

# html - PageSpeed 工具的奇怪修复

> ID：11157619
> 
> 赞同：4
> 
> 时间：2012-06-22T13:56:47.047
> 
> 标签：html, optimization, character-encoding, character, meta-tags

当我在 PageSpeed Tools（Google 优化网页的工具）中测试我的网页时，我遇到了以下问题：

问题 1：

> **避免元标记中的字符集**
> 
> 以下资源具有在元标记中指定的字符集。
> 在元标记中指定字符集会禁用 IE8 中的先行下载器。
> 要提高资源下载并行化，请将字符集移至 HTTP Content-Type 响应标头。

问题2：

> **指定字符集**
> 
> 尽早为您的 HTML 文档指定字符集允许浏览器立即开始执行脚本。
> 
> *此页面的建议*
> 
> 以下资源未在 HTTP 标头中设置字符集。
> 如果您在其中指定字符集，则会加快浏览器中的呈现速度。

但我不明白为什么会出现这些问题，因为我在头部指定了这样的字符集：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" /> 
```

**问题：**有人可以帮我解决这些问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T14:04:58.490

它告诉您：将字符集移动到 HTTP Content-Type 响应标头。看这个：

> [Wikipedia - HTTP 标头字段列表](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields.)

基本上，客户端从服务器返回的实际 HTTP 响应应该设置**Content-Type**字段。如果您无法更改此设置，则只需将其设置在`<meta>`标签中即可。

**编辑：**

如果可以，请修改服务器上的 .htaccess 文件以包括：

> AddType '文本/html; 字符集=iso-8859-15' html

这将导致所有提供的 HTML 文件都包含适当的响应标头。

# file-upload - ColdFusion - 如何检查上传文件字段是否为空 - 尤其是动态字段名称？

> ID：11157620
> 
> 赞同：5
> 
> 时间：2012-06-22T13:56:48.590
> 
> 标签：file-upload, coldfusion, dynamic-variables

我正在为表单提供动态数量的文件上传字段。所以在表单方面，我循环遍历这个动态数字（比如 3，作为索引'm'），并将每个文件字段输入命名为'ResumeFile#m#'。在操作页面上，如果其中一个文件字段未填写，我会收到错误消息。当所有 3 个文件字段都填写完毕后，它可以正常工作。

错误是（这里，当文件字段 2 未填写时）：

```
 The form field Form.ResumeFile2 did not contain a file. 
```

这是我创建表单的代码：

```
 <cfset numUploads = 3>
    <cfform name="uploadMultipleResumes" action="uploadMultipleResumes.cfm" enctype="multipart/form-data" >
        <cfinput name="EmployeeID" type="hidden" value="#form.EmployeeID#">
        Resume File(s): *<BR>
        <cfloop from="1" to="#numUploads#" index="j">
            <cfinput name="ResumeFile#j#" type="file" size="50">
        </cfloop>
        <BR />
        <cfinput name="Submit" type="submit" value="Upload Multiple Resumes">
    </cfform> 
```

这是我在操作页面中的代码（缩写）。我已经尝试了很多如何检查每个文件字段是否未填写的组合，所有这些都允许空白输入通过并得到我上面提到的错误。

```
 <!--- Loop over multiple file fields --->
    <cfloop from="1" to="#numUploads#" index="m">
        <cfif 'Form.ResumeFile#m#' is not "">
            <cffile action="upload" filefield="#Evaluate('Form.ResumeFile#m#')#" nameconflict="makeunique" destination="#destinationPath#">
        </cfif>
    </cfloop> 
```

即使我已经尝试过，我也会尝试所有建议！我一直在这几天，我知道有一个答案！

非常感谢！

这是错误的图像

> ![块引用](../Images/053521f38745e4eebd23d2257b53749f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-22T13:59:50.533

将您的操作页面上的代码更改为以下内容：

```
<!--- Loop over multiple file fields --->
<cfloop from="1" to="#numUploads#" index="m">
    <cfif len(Form["ResumeFile#m#"])>
        <cffile action="upload" filefield="Form.ResumeFile#m#" nameconflict="makeunique" destination="#destinationPath#">
    </cfif>
</cfloop> 
```

还修复了一些性能瓶颈：

1.  请记住，如果可能，应始终避免使用 `evaluate()`.
2.  使用`len()`而不是`IS NOT ""`检查非空字符串。

# android - Android 可扩展列表项圈的颜色

> ID：11157624
> 
> 赞同：0
> 
> 时间：2012-06-22T13:56:56.450
> 
> 标签：android, expandablelistview

有人知道如何用箭头改变可扩展列表项的小圆圈的颜色吗？我的设计师让我这样做，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:02:07.883

您不应该更改箭头颜色，这很复杂并且无论如何都是一个坏主意，因为可绘制的箭头可能因设备而异，因此结果将是不可预测的。

相反，使用该`android:groupIndicator`属性将默认箭头更改为自定义可绘制对象：

```
<ExpandableListView ...
    android:groupIndicator="@drawable/group_indicator" > 
```

**group_indicator.xml**可以是一个选择器，以在项目展开时显示不同的箭头：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_empty="true" android:drawable="@drawable/arrow_right" />
    <item android:state_expanded="true" android:drawable="@drawable/arrow_down" />
    <item android:drawable="@drawable/arrow_right" />
</selector> 
```

[本教程](http://android-adda.blogspot.fr/2011/06/custom-expandable-listview.html)将为您提供更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:26:11.703

你也可以做一个自己的组件（视图）并覆盖它

```
public void onDraw(Canvas canvas) 
```

方法。现在你可以画任何你想要的。当然这是很多工作，但这会给你最大的可能性。

# extjs - 使用 GXT ViewPort 调整问题大小

> ID：11157630
> 
> 赞同：2
> 
> 时间：2012-06-22T13:57:28.237
> 
> 标签：extjs, viewport, gxt

我正在使用 GWT/GXT 开发一个基于浏览器的应用程序。html 文件包含一个用 html 编写的静态标头，以及一个用 ViewPort 填充的 div。

ViewPort 在这里非常有用，因为它允许自动调整大小。但是，ViewPort 总是随着浏览器大小调整大小，并且不考虑 html 标头大小。所以我总是有一部分 ViewPort 隐藏：/

你知道另一种方法吗？

对不起我的英语不好:) 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-08T05:17:52.217

只需添加带有填充的样式：

```
Viewport view = new Viewport();
view.addStyleName("root");
view.setWidget(new MyWidget());
RootPanel.get().add(view);

.root{
    padding-right: 20px;
    padding-bottom: 20px;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T04:13:59.020

视口占用浏览器的整个高度和宽度。我看到在 onAttach() 方法中，它为自己分配了浏览器窗口的高度和宽度。

您可以考虑将标头添加到视口本身。

# python - 如何在 Jinja2 模板中获取当前模板的文件名？

> ID：11157631
> 
> 赞同：20
> 
> 时间：2012-06-22T13:57:29.293
> 
> 标签：python, html, jinja2

说我用`return render_template('index.html', users=users)`. 是否可以在模板中获取文件名而不在视图中显式发送它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-10-31T16:58:35.397

虽然没有记录，但`{{ self._TemplateReference__context.name }}`会给出模板名称。您可以在之后使用许多有趣的属性`self._TemplateReference__context`。

例如，您可以将其添加到最顶层的基本模板中：

```
 <meta name="template" content="{{ self._TemplateReference__context.name }}"> 
```

因此，查看页面源将帮助您快速找到相关的模板文件。如果您不想公开此类信息，请使其以测试环境为条件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T14:58:33.543

如果您只需要基本名称，您可以使用`{{ self }}`它将返回一个包含模板基本名称的 repr 字符串，例如`<TemplateReference 'view.html'>`. 您可以使用过滤器解析它，例如，`{{ self | quoted }}`

```
@app.template_filter('quoted')
def quoted(s):
    l = re.findall('\'([^\']*)\'', str(s))
    if l:
        return l[0]
    return None 
```

如果您需要完整路径，例如，'/full/path/to/view.html'，您可能需要子类化模板。

# javascript - 移动问题的照片滑动脚本

> ID：11157640
> 
> 赞同：0
> 
> 时间：2012-06-22T13:58:02.350
> 
> 标签：javascript, android, iphone, mobile

我正在使用 photoswipe 脚本，它在所有手机上都可以正常工作。

我在加载图像时遇到一个小问题，当时我希望加载图像显示需要时间来加载图像。

```
<link href="css/photoswipe.css" type="text/css" rel="stylesheet" />

<script type="text/javascript" src="js/klass.min.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>

<script type="text/javascript" src="js/code.photoswipe.jquery-3.0.5.min.js"></script>

<script type="text/javascript">

    (function(window, $, PhotoSwipe){

        $(document).ready(function(){

            var options = {};
            $("#Gallery a").photoSwipe(options);

        });

    }(window, window.jQuery, window.Code.PhotoSwipe));

</script>   
</head>

<ul id="Gallery" class="gallery">

    <li><a href="images/full/001.jpg"><img src="images/thumb/001.jpg" alt="Image 001" /></a></li>
    <li><a href="images/full/002.jpg"><img src="images/thumb/002.jpg" alt="Image 002" /></a></li>
    <li><a href="images/full/003.jpg"><img src="images/thumb/003.jpg" alt="Image 003" /></a></li>
    <li><a href="images/full/004.jpg"><img src="images/thumb/004.jpg" alt="Image 004" /></a></li>
    <li><a href="images/full/005.jpg"><img src="images/thumb/005.jpg" alt="Image 005" /></a></li>
    <li><a href="images/full/006.jpg"><img src="images/thumb/006.jpg" alt="Image 006" /></a></li>
    <li><a href="images/full/007.jpg"><img src="images/thumb/007.jpg" alt="Image 007" /></a></li>
    <li><a href="images/full/008.jpg"><img src="images/thumb/008.jpg" alt="Image 008" /></a></li>
    <li><a href="images/full/009.jpg"><img src="images/thumb/009.jpg" alt="Image 009" /></a></li>
    <li><a href="images/full/010.jpg"><img src="images/thumb/010.jpg" alt="Image 010" /></a></li>
    <li><a href="images/full/011.jpg"><img src="images/thumb/011.jpg" alt="Image 011" /></a></li>
    <li><a href="images/full/012.jpg"><img src="images/thumb/012.jpg" alt="Image 012" /></a></li>
    <li><a href="images/full/013.jpg"><img src="images/thumb/013.jpg" alt="Image 013" /></a></li>
    <li><a href="images/full/014.jpg"><img src="images/thumb/014.jpg" alt="Image 014" /></a></li>
    <li><a href="images/full/015.jpg"><img src="images/thumb/015.jpg" alt="Image 015" /></a></li>
    <li><a href="images/full/016.jpg"><img src="images/thumb/016.jpg" alt="Image 016" /></a></li>
    <li><a href="images/full/017.jpg"><img src="images/thumb/017.jpg" alt="Image 017" /></a></li>
    <li><a href="images/full/018.jpg"><img src="images/thumb/018.jpg" alt="Image 018" /></a></li>

</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:35:14.203

下载图像时，Photoswipe 会自动显示圆形图像加载 gif。如果这没有显示，您可能需要检查您的 CSS 图像路径以确保它们是正确的。

# html - div 总是在内容之后并且总是在底部

> ID：11157643
> 
> 赞同：1
> 
> 时间：2012-06-22T13:58:04.890
> 
> 标签：html, css

我有这个架构：

```
<div id="container">

    <div id="content">some text</div>

    <footer> my footer things </footer>

</div> 
```

和我的CSS：

```
body {
    font-family:'Open Sans', sans-serif;
    background:url(../imagens/fundo_cima.jpg) top center no-repeat;
    background-color: #bac8e3;
    color:#000;
    font-size:12px;
    height:100%;    
}

#container{
    width:100%;
    min-height:100%;
}

#content{
    width:990px;
    min-height:526px;
    margin:0 auto;  
}

footer{
    position: absolute;
    bottom:0;
    width:100%;
    height:231px;
    background:url(../imagens/fundo_baixo.jpg) center no-repeat;
} 
```

我的问题：在小分辨率（1024x768）下，页脚悬停在`content`div 上，而在大分辨率下，这很好用......我需要设置什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:00:54.710

使用本教程/代码我很幸运。[http://ryanfait.com/resources/footer-stick-to-bottom-of-page/](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:04:21.940

您可能希望在`#content`div 上放置一个边距，以便为页脚腾出空间。

```
#content{
    width:990px;
    min-height:526px;
    margin:0 auto 231px auto;  
} 
```

像页脚这样的绝对定位元素自然会悬停在其余内容上。如果要避免这种影响，最简单的方法是通过 padding 或 margin 让其他元素为它们留出空间。

# css - Chrome 中没有边框，但在 Firefox 中

> ID：11157647
> 
> 赞同：0
> 
> 时间：2012-06-22T13:58:14.790
> 
> 标签：css, google-chrome, twitter-bootstrap

我正在使用引导程序。你会在图片上看到我的麻烦

来自 Chrome 的屏幕：[https ://www.dropbox.com/s/1zi8eq7zposn6c9/chrome.png](https://www.dropbox.com/s/1zi8eq7zposn6c9/chrome.png)

来自 FireFox 的屏幕：[https](https://www.dropbox.com/s/7mrxarypnsjb63d/firefox.png) ://www.dropbox.com/s/7mrxarypnsjb63d/firefox.png （抱歉，底部还有另一个带边框的 div）

我的 HTML（我认为不需要全部放在这里）：

```
 <div class="row menu">
    ...
</div> 
```

我的 CSS：

```
 .menu{
    width:940px;
     height: 30px;
    border-width:0.5px;
    border-top-style:solid;
    border-bottom-style:solid;
    border-color: grey;
    padding:10px;
    background-color: rgb(212,229,190);
     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:10:02.433

由于我的评论有帮助，这里的解决方案作为官方答案。

问题是由于舍入错误，因为边框设置为半像素。通过使用至少 1px 的边框宽度，问题将消失（当边框出现时）。

# jquery - jQuery before.()/prependTo() 错误

> ID：11157648
> 
> 赞同：1
> 
> 时间：2012-06-22T13:58:15.110
> 
> 标签：jquery, html, css

我正在建立一个实验站点，但我遇到了一些代码问题。

下一个按钮有效，但上一个按钮无效。它基本上将前两个 div 与“tri”类交换，而不是另一个。

我无法理解为什么一个有效而另一个无效。

我已经尝试过 prependTo 和之前但都不能正常工作？

随意看这里的代码：

HTML：[http ://epicgiggle.co.uk/test/-testtwo/index.html](http://epicgiggle.co.uk/test/-testtwo/index.html)

CSS：[http ://epicgiggle.co.uk/test/-testtwo/style.css](http://epicgiggle.co.uk/test/-testtwo/style.css)

jQuery：[http ://epicgiggle.co.uk/test/-testtwo/custom.js](http://epicgiggle.co.uk/test/-testtwo/custom.js)

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:04:26.027

您正在做很多工作，分别移动文本和 CSS 属性。自己移动div要容易得多。（[`.insertBefore`](http://api.jquery.com/insertBefore)并且[`.insertAfter`](http://api.jquery.com/insertAfter)是在这种特殊情况下您需要的方法。）

```
$(".prev").click(function() {
        $('.tri').last().insertBefore( $('.tri').first() );
});
$(".next").click(function() {
        $('.tri').first().insertAfter( $('.tri').last() );
}); 
```

[http://jsfiddle.net/mblase75/Dnwvy/2/](http://jsfiddle.net/mblase75/Dnwvy/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:01:08.640

## *[jsBin 演示](http://jsbin.com/otabes/3/edit#javascript,html,live)*

这是您的 jQuery 的更正和简化：

```
var dh = $('.tri').height();

$(function() {
    $("p.content").css('padding-top', (dh/3.5));
    $("#title").text(currentDiv.attr('title'));
});

$("title").text( $("div.tri").first().attr('title'));

$(".prev, .next").click(function() {

  var $first = $('.tri').first();
  var $last = $('.tri').last();

  if( $(this).hasClass('next') ){
    $first.insertAfter( $last );
  }else{
    $last.insertBefore( $first );
  }

  $("#title").css('color', ( $("div.tri").first().css('background-color') ) );
  $("#title").text( $("div.tri").first().attr('title') ); 

}); 
```

`{ }`您的标记中有额外`#`的内容，而`title`.

在您的 HTML 中：您**不能**有 3 个相同的`p#content`元素！每个页面的 ID 都是唯一的。改为使用`class`（分别更改您的 CSS。）

**你的html：**

```
<div class="title"><p id="title">One</p></div>
<div class="prev"><p>Prev</p></div>
<div class="next"><p>Next</p></div>

<div class="tri" id="one" title="One"><p style="padding-top: 57.1429px;" class="content">Content One</p></div>
<div class="tri" id="two" title="Two"><p style="padding-top: 57.1429px;" class="content">Content Two</p></div>
<div class="tri" id="three" title="Three"><p style="padding-top: 57.1429px;" class="content">Content Three</p></div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:10:38.570

我还看到了另一件奇怪的事情。

在第一行你有

```
$(document).ready(function(){.... 
```

一段时间后，您拥有的匿名函数的主体

```
$(function(){..... 
```

意思是

```
$(document).load(function()..... 
```

如果文档处于就绪状态，那么我认为不会再次触发 load 事件。我会将所有代码都放在像这样的加载事件事件中

```
$(function() {

var dh = $('.tri').height();
var currentDiv;
var previousDiv;

$("p#content").css('padding-top', (dh/3.5));
$("#title").text(currentDiv.attr('title'));

currentDiv = $("div.tri").first();
lastDiv = $("div.tri").last();
$("title").text(currentDiv.attr('title'));
$(".prev").click(function() {
        lastDiv.before(currentDiv);
        lastDiv = $("div.tri").first();
        $("#title").text(currentDiv.attr('title'));
        $("#title").css('color', (currentDiv.css('background-color')));
        $("title").text(currentDiv.attr('title'));
});
$(".next").click(function(){
        $(currentDiv).appendTo('body');
        currentDiv = $("div.tri").first();
        $("#title").text(currentDiv.attr('title'));
        $("#title").css('color', (currentDiv.css('background-color')));
        $("title").text(currentDiv.attr('title'));
});

}); 
```

（括号可能不匹配......）

# python-3.x - 如何在 python 中创建结构的结构？

> ID：11157651
> 
> 赞同：1
> 
> 时间：2012-06-22T13:58:22.263
> 
> 标签：python-3.x

我希望在 python 中实现下面的 C 结构，并希望能够访问下面提到的成员。任何帮助表示赞赏

```
typedef struct{
    unsigned int ch_state;
    unsigned int polling;
    unsigned int timeout;
    unsigned int count;
}channel_Status_t;

typedef struct{
 channel_Status_t  ch_status;
}channel_num_t

typedef struct{   
    channel_num_t SR1;
    channel_num_t SR2;
    channel_num_t LR1;
    channel_num_t LR2;
} channel_type_t;

channel_type_t Rx;
channel_type_t Tx;

Rx.SR1.ch_status.ch_state=1;
Rx.SR1.ch_status.polling=10;
Rx.SR1.ch_status.polling=20;
Rx.SR1.ch_status.count=0;

// Should be able to access data as below... 
Rx.SR2.ch_status.ch_state=1;
Rx.SR2.ch_status.polling=10;
Rx.SR2.ch_status.polling=20;
Rx.SR2.ch_status.count=0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T16:29:00.197

您很可能希望从这些结构中的每一个中创建一个类。

# grails - 如何更改或映射 Grails ajax webflow 操作名称？

> ID：11157655
> 
> 赞同：0
> 
> 时间：2012-06-22T13:58:38.893
> 
> 标签：grails

我正在使用 Grails [ajaxflow](http://grails.org/plugin/ajaxflow)插件来创建基本向导。我遇到的一个问题是默认使用的控制器操作命名。具体来说，假设我有一个名为 ThingController 的控制器，其中默认流名为 pagesFlow。这会在执行过程中产生一个向导 url，因此..

```
/thing/pages?execution... 
```

通常，该向导旨在允许添加“事物”。事实上，我更喜欢一个表明这样的 ..

```
/thing/add?execution... 
```

有没有办法通过更改 pagesFlow 定义或通过自定义 url 映射来实现此结果？

我曾短暂地尝试过两者都没有运气。ajaxflow 插件似乎需要这个默认命名，而且我还不太了解 url 映射。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T14:14:58.077

我没有专门使用 ajaxFlow，但我之前使用过 grails webflow。通常，您所要求的内容是不可能的，因为 webflow 基本上管理不同的“操作”，例如在幕后为您的流程添加/删除/更新等，因此只有流程名称“页面”被公开。

但是，如果您真的想要一个独特的名称，我能想到的唯一解决方法是使用 webflow 的子流功能。webflow 文档是 grails 文档[http://grails.org/doc/latest/guide/theWebLayer.html#subflowsAndConversations](http://grails.org/doc/latest/guide/theWebLayer.html#subflowsAndConversations)的一部分。

这个想法是子流只是您定义的另一个流。流可以调用另一个流并让第二个流将结果返回给第一个流。因此，在您的情况下，您的主要流程将调用 addFlow、updateFlow 等。从概念上讲，即使您的所有操作都属于单个流程，也没有什么能阻止您将每个操作分成自己的流程。这样，您的 URL 名称就可以反映您的操作。你甚至可以在不同的控制器中定义你的子流，这样你就可以影响 url 中的控制器名称。

# javascript - 在 Firefox 中捕获用户设置的文本区域大小

> ID：11157660
> 
> 赞同：2
> 
> 时间：2012-06-22T13:58:51.250
> 
> 标签：javascript, html, firefox

我想请教您关于文本区域“问题”的建议。我喜欢 FF 的用户可调整大小的功能，实际上我想要实现的是，如果我使用 POST 表单提交内容，那么在页面刷新后，textarea 的大小将与用户拖动的大小相同。

这似乎不适用于标准 JS 或 PHP，因为在提交期间仅传输默认的原始行和列 - 而不是虚拟的，用户设置的。我假设这是一个虚拟值，由浏览器管理。

有没有办法在提交时捕获实际的 textarea cols&rows？我不需要浏览器或太多的操作系统兼容性，主要是在 Windows 和 Linux 下为 FF10.x 工作的解决方案将是完美的。

在此先感谢您的任何见解，nm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:02:10.350

您应该使用`width`and `height`，而不是`rows`and `cols`。然后您可以获取文本区域`offsetWidth`并`offsetHeight`保存它们，然后在下次出现文本区域时自动调整大小。

旁注：Chrome 在 Firefox 之前拥有可调整大小的文本区域。

# language-agnostic - 如何允许匿名信息共享和上传？

> ID：11157662
> 
> 赞同：3
> 
> 时间：2012-06-22T13:58:54.517
> 
> 标签：language-agnostic, web, uploading

我有兴趣建立一个允许用户完全匿名的网站。他们共享或上传的信息不应追溯到用户。需要采取哪些措施来确保用户的匿名性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T00:22:20.900

您可能会调查以前尝试支持匿名或假名或两者兼而有之的系统。也许您可以使用这些系统来提高匿名性或假名性。即使您不使用这些系统，也许您可​​以将想法甚至为这些系统开发的源代码应用到您的系统中。

*   [洋葱路由器](http://en.wikipedia.org/wiki/Tor_%28anonymity_network%29)(TOR) 匿名网络有一些有趣的想法来保持匿名性。也许您的网站可以拒绝*不*通过这种匿名网络的连接？
*   [自由网](http://en.wikipedia.org/wiki/Freenet)
*   [隐形互联网项目](http://en.wikipedia.org/wiki/I2P)（I2P）
*   [Osiris](http://en.wikipedia.org/wiki/Osiris_%28Serverless_Portal_System%29)无服务器门户系统
*   [匿名 P2P](http://en.wikipedia.org/wiki/anonymous_P2P)应用程序

# java - 如何在自定义 JComponent 中使后台工作？

> ID：11157664
> 
> 赞同：7
> 
> 时间：2012-06-22T13:59:00.517
> 
> 标签：java, swing, graphics, background, awt

在下面的示例中，我`JComponent`在绿色背景上绘制了一个自定义，但它没有出现。为什么会这样？

```
public class Test_Background {

    public static class JEllipse extends JComponent {

        private final Ellipse2D ellipse;

        public JEllipse(int width, int height) {
            ellipse = new Ellipse2D.Double(0, 0, width, height);

            setOpaque(true);
            setBackground(Color.GREEN);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension((int) ellipse.getBounds().getMaxX(),
                                 (int) ellipse.getBounds().getMaxY());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            ((Graphics2D) g).draw(ellipse);
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JEllipse e = new JEllipse(400, 300);

                JFrame f = new JFrame("Background Test");
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.add(e);
                f.pack();
                f.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-22T14:05:41.630

JComponent 不绘制其背景。您可以自己绘制，也可以使用 JPanel 绘制背景

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T16:56:56.263

您的 paint() 方法存在几个问题。

*   你从来没有打电话`Graphics.setColor()`，所以你画的颜色是完全未知的。
*   您已将该组件声明为不透明，这意味着您*承诺*自己绘制背景。

你想要更像这样的东西：

```
 protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(getBackground());
        g2.fillRect(0, 0, getWidth(), getHeight());
        g2.setColor(getForeground());
        g2.draw(ellipse);
    } 
```

或者，您可以从 JPanel 扩展而不是 JComponent，它会为您绘制背景，让您只做前景：

```
 protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.setColor(getForeground());
        g2.draw(ellipse);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:08:38.113

我记得它只支持这个背景属性，但实际上并没有绘制它。Pum 使用 g.fillRect （或 fillEllipse 如果这是椭圆）来创建您自己的背景。

# symfony - Doctrine2 与多个表的多对多关系

> ID：11157668
> 
> 赞同：1
> 
> 时间：2012-06-22T13:59:13.323
> 
> 标签：symfony, doctrine-orm, many-to-many

我正在使用 Symfony2 和 Doctrine2 构建应用程序。应用程序的一部分处理地址。我有一个表“地址”和三个通过多对多关系（员工、客户、供应商）连接到它的表。我用一个连接表“contact_address”进行了设置。

如何创建具有多对多关系的实体？在我的员工、客户和供应商实体中，我有

```
/**
 * @var Addressess
 *
 * @ORM\ManyToMany(targetEntity="Address", mappedBy="contacts")
 */
private $addresses; 
```

我在地址实体中放了什么？

```
 /**
     * @var Contacts
     *
     * @ORM\ManyToMany(targetEntity="Employee", inversedBy="id")
     * @ORM\JoinTable(name="contact_address",
     *   joinColumns={
     *      @ORM\JoinColumn(name="addressID", referencedColumnName="addressID")
     *   },
     *   inverseJoinColumns={
     *      @ORM\JoinColumn(name="employeeID", referencedColumnName="employeeID")
     *   }
     * )
     */
    private $contacts; 
```

这是我的第一个想法，但客户和供应商呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:34:37.143

一个地址可以同时链接到几个人吗？这对我来说似乎有点奇怪......

在任何情况下，我都建议您有一个实体联系人，与地址建立一对多关系，或者联系人和员工、联系人和客户、联系人和供应商之间的一对一关系，或者有员工, Client 和 Supplier 继承自 Contact。

# iphone - UITextView 滚动后应用程序崩溃

> ID：11157671
> 
> 赞同：3
> 
> 时间：2012-06-22T13:59:30.727
> 
> 标签：iphone, ios, networking, crash, uitextview

**背景**

我的应用程序从网络流中提取数据，并更改屏幕上 UI 元素的值。一个元素是 UITextView，它用作传入数据的一种日志。只要应用程序收到具有传入数据性质的“HasBytesAvailable”NSStreamEvent，它就应该更新。（例如，如果传入的数据与蛋糕有关，则 textview 将更新为“6/22/12 8:00 - got cake”）下面显示了它如何更新的示例。

```
[logString insertString:@"This is an update\n" atIndex:0]; 
//logstring is a MutableString I use to hold my UITextView's text
[logString insertString:timeString atIndex:0]; //timestring is current time
logView.text = logString; //logView is my UITextView
[logView flashScrollIndicators];

//logstring and logview declaration and implementation
@property (nonatomic,retain) IBOutlet UITextView *logView;
@property (nonatomic,retain) NSMutableString *logString;

logString = [[NSMutableString alloc] initWithString:@"-logging started\n"]; 
```

**问题**

只要我不尝试滚动 TextView，更新就会按我的意愿进行。但是，如果我滚动浏览文本并按住它，大概足够长的时间让我的更新代码被调用，当我停止滚动时应用程序会崩溃。我可以很好地浏览文本，只是当它必须处理传入的数据包并且我仍在滚动时它会崩溃。此外，当我滚动时，没有其他内容会更新。应该由接收到的数据更新的所有标签保持不变。

**我的想法**

就好像应用程序无法同时处理滚动和处理传入数据一样。我不确定这是否是因为我在内存管理方面做错了，或者我需要覆盖一些滚动功能，或者完全是其他东西。任何帮助或想法表示赞赏。

**解决方案**

正如 trumpetlicks 所说，我需要为我的网络任务实现多线程来做到这一点，我做了以下工作：

在初始化中：

```
NSOperationQueue *networkQueue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(initNetworkCommunication) object:nil];
[networkQueue addOperation:operation];
[operation release]; 
```

在 initNetworkCommunication 中，初始化 CFSocketpair 和流之后：

```
[[NSRunLoop currentRunLoop] run]; //necessary to handle stream events 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:14:06.363

从这里开始。

developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/… 你可以

还希望添加您的网络设置和使用代码，以便我们都可以看到您在那里做什么！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-19T20:47:16.700

我可以提出 3 个可以帮助您的想法：

1）不要从后台线程调用 UI 元素，总是在主线程上，例如使用：

```
 dispatch_async(dispatch_get_main_queue(), ^{

         self.textview.text = .....

    }); 
```

2）在线程之间使用某种同步（稍后会详细介绍..）

3) NSOperation 对于这个任务来说太复杂了，只需使用 NSURLSession 回调并在完成时调用一个必须序列化的“中央”方法（如 2 中所述）

假设在每个网络回调中：

```
...
    // create Session and request...
    NSURLSessionDataTask *task = [session dataTaskWithRequest:request
                                            completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                                                NSString * s = [[NSString alloc]initWithData:data encoding: NSUTF8StringEncoding];
                                                [self serializer:s];
                                            }
                                  ];
    [task resume];
... 
```

4）现在让'尝试同步（并转到UI的主线程..）

在“init”/ViewDidLoad 创建一个

```
self.queue = dispatch_queue_create("com.acme.myQueue", DISPATCH_QUEUE_CONCURRENT); 
```

5）在序列化方法中使用它：

```
-(void) serializer:(NSString*)s
{
    dispatch_barrier_async(self.queue, ^{
        [self updateUI:s];
    });
} 
```

6) 更新用户界面：

```
-(void) updateUI:(NSString*)s
{
    dispatch_async(dispatch_get_main_queue(), ^{
        NSString * currText = self.textView.text;
        self.textView.text = [NSString stringWithFormat:@"%@\n%@", currText, s];

    });
} 
```

所以回顾一下我的所有控制器可以（一些细节留给你..）

```
@interface ViewController ()

@property dispatch_queue_t queue;
@property UITextView * textView;

@end

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    self.queue = dispatch_queue_create("com.acme.myQueue", DISPATCH_QUEUE_CONCURRENT);

    [self startDownloadFromURL:@"https://www.apple.com"];
    [self startDownloadFromURL:@"https://www.google.com"];
}

-(void)startDownloadFromURL:(NSString*)urlString{

    NSURLSession * session;
    NSURLRequest * request;

    // create Session and request...
    NSURLSessionDataTask *task = [session dataTaskWithRequest:request
                                            completionHandler:^(NSData *data, NSURLResponse *response, NSError *error) {
                                                NSString * s = [[NSString alloc]initWithData:data encoding: NSUTF8StringEncoding];
                                                [self serializer:s];
                                            }
                                  ];
    [task resume];
}

-(void) serializer:(NSString*)s
{
    dispatch_barrier_async(self.queue, ^{
        [self updateUI:s];
    });
}

-(void) updateUI:(NSString*)s
{
    dispatch_async(dispatch_get_main_queue(), ^{
        NSString * currText = self.textView.text;
        self.textView.text = [NSString stringWithFormat:@"%@\n%@", currText, s];

    });
}

@end 
```

# ruby - riak ruby 客户端超时

> ID：11157674
> 
> 赞同：0
> 
> 时间：2012-06-22T13:59:43.013
> 
> 标签：ruby, timeout, riak

我刚刚在我的 OS X 机器上安装了 riak 并让 4 节点集群正常工作。

这是我的命令输出

`$ ps aux | grep beam`

```
anandhegde      1075   0.1  0.9  2519676  37548 s002  Ss+  10:49AM   1:34.84 /Users/anandhegde/dev/dev2/libexec/erts-5.8.5/bin/beam.smp -K true -A 64 -W w -- -root /Users/anandhegde/dev/dev2/libexec -progname riak -- -home /Users/anandhegde -- -boot /Users/anandhegde/dev/dev2/libexec/releases/1.1.2/riak -embedded -config /Users/anandhegde/dev/dev2/libexec/etc/app.config -pa ./lib/basho-patches -name dev2@127.0.0.1 -setcookie riak -- console
anandhegde       938   0.1  0.9  2519524  38152 s001  Ss+  10:49AM   1:36.31 /Users/anandhegde/dev/dev1/libexec/erts-5.8.5/bin/beam.smp -K true -A 64 -W w -- -root /Users/anandhegde/dev/dev1/libexec -progname riak -- -home /Users/anandhegde -- -boot /Users/anandhegde/dev/dev1/libexec/releases/1.1.2/riak -embedded -config /Users/anandhegde/dev/dev1/libexec/etc/app.config -pa ./lib/basho-patches -name dev1@127.0.0.1 -setcookie riak -- console
anandhegde      1295   0.0  0.9  2519188  37416 s004  Ss+  10:49AM   1:40.47 /Users/anandhegde/dev/dev4/libexec/erts-5.8.5/bin/beam.smp -K true -A 64 -W w -- -root /Users/anandhegde/dev/dev4/libexec -progname riak -- -home /Users/anandhegde -- -boot /Users/anandhegde/dev/dev4/libexec/releases/1.1.2/riak -embedded -config /Users/anandhegde/dev/dev4/libexec/etc/app.config -pa ./lib/basho-patches -name dev4@127.0.0.1 -setcookie riak -- console
anandhegde      1185   0.0  0.9  2519576  36764 s003  Ss+  10:49AM   1:39.91 /Users/anandhegde/dev/dev3/libexec/erts-5.8.5/bin/beam.smp -K true -A 64 -W w -- -root /Users/anandhegde/dev/dev3/libexec -progname riak -- -home /Users/anandhegde -- -boot /Users/anandhegde/dev/dev3/libexec/releases/1.1.2/riak -embedded -config /Users/anandhegde/dev/dev3/libexec/etc/app.config -pa ./lib/basho-patches -name dev3@127.0.0.1 -setcookie riak -- console
anandhegde      7115   0.0  0.0  2434892    540 s000  R+    7:13PM   0:00.00 grep beam 
```

在此之后，我安装了此处给出的 riak-ruby-client gem - [https://github.com/basho/riak-ruby-client/](https://github.com/basho/riak-ruby-client/)

我正在尝试根据 github 页面上提供的文档运行一个简单的脚本。这是我的脚本 -

```
require 'riak'

client = Riak::Client.new

bucket=client.bucket("doc")
object = bucket.get_or_new("index.html")
object.data="<html><body>some body content here</body></html>"
object.content_type="text/html"
object.store

puts client['doc']['index.html'] 
```

当我使用`$ ruby script.rb`

我收到以下错误 -

```
/Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:450:in `rescue in recover_from': Connection refused - connect(2) (RuntimeError)
    from /Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:422:in `recover_from'
    from /Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:284:in `http'
    from /Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:129:in `backend'
    from /Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/client.rb:277:in `get_object'
    from /Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/bucket.rb:88:in `get'
    from /Users/anandhegde/.rvm/gems/ruby-1.9.3-p0/gems/riak-client-1.0.3/lib/riak/bucket.rb:106:in `get_or_new'
    from riak_client.rb:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:00:02.580

在设置客户端时，您是否指定了要连接的节点的 IP 地址和端口？（如果这看起来很明显，我很抱歉，但我没有在您提供的脚本中看到那部分）

# c++ - c++子类作为方法的参数

> ID：11157680
> 
> 赞同：1
> 
> 时间：2012-06-22T14:00:10.640
> 
> 标签：c++, class, parameters, subclass

我想写两个类，在超类中我需要方法女巫作为参数有一个像这个示例代码中的子类：

```
class class1
{
    int a;
    void print(class2 k)
    {
        cout<<k.b*a;
    }  
};

class class2 :public class1
{
    public:
    int b;
}; 
```

不幸的是，这是不对的 ;-) 我无法弄清楚，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:01:56.060

使用前向声明并将实现移出`class`：

```
class class2;
class class1
{
    int a;
    void print(class2 k);
};

class class2 :public class1
{
    public:
    int b;
}; 
```

您不能保持该方法内联，因为您需要一个`class2`此时无法使用的完整类型。

**但这里的主要问题是设计**，这是错误的。为什么基类需要知道并更多地调用派生类的方法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:11:31.217

```
class class2;

class class1
{
    int a;
    inline void print(class2 &k); //pass by reference, but implemented after class2 is completely known to the compiler.
};

class class2 :public class1
{
    public:
    int b;
};

void class1::print(class2 &k)
{
    cout<<k.b*a;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:22:15.477

您的问题的一种可能的解决方案是不在`print()`基类中实现，而是强制任何继承类使用*纯虚函数来实现它。*目前，您可能会使用以下方法调用您的代码：

```
class2 c2;
c2.b = 20; // for example
class1 c1;
c1.print( c2 ); 
```

但也许实现这一点的更好方法如下：

```
class class1
{
protected:
    int a;

public:
    virtual void print() const = 0;
};

class class2 : public class1
{
public:
    int b;
    void print() const;
};

void class2::print() const
{
    cout << b * a;
} 
```

所以现在`class2`有义务实现打印功能，这在某种意义上是正确的，**因为`class2`应该知道`class1`但反之则不然。**现在你可以这样做：

```
class2 c2;
c2.b = 20; // for example
c2.print() 
```

当然，这可能无法帮助您完成您想做的事情，但我认为这通常是解决您描述的问题的更好方法。

# c# - C# 将 Foreach 值转换为其属性之一

> ID：11157683
> 
> 赞同：5
> 
> 时间：2012-06-22T14:00:14.453
> 
> 标签：c#, oop, foreach

我不确定标题是否传达了我的意思，如果您能更好地用一句话来定义这个问题，请更改它。

我想遍历 T 的集合，但不是使用 (T) 对象，而是要检索 (T)object.SomeProperty。

我该怎么做：

```
List<Car> _cars;
FillList(_cars);

foreach (Car car in _cars)
{
    Windshield ws = car.Windshield;

    ws.DoWorkA();
    ws.DoWorkB();
    ws.DoWorkC();
} 
```

我想做的事：

```
List<Car> _cars;
FillList(_cars);

foreach (Car car in _cars using ws as Windshield = car.Windshield)
{
    ws.DoWorkA();
    ws.DoWorkB();
    ws.DoWorkC();
} 
```

有什么办法可以成为一个更懒的程序员？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T14:01:40.797

您可以使用 LINQ 并选择：

```
foreach (Windshield ws in _cars.Select(car => car.Windshield))
{
    ws.DoWorkA();
    ws.DoWorkB();
    ws.DoWorkC();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:03:23.633

使用 Linq：

```
List<Car> _cars; 
FillList(_cars);  
foreach (Windshield ws in _cars.Select(c=>c.Windshield) {
         ws.DoWorkA();
         ws.DoWorkB();
         ws.DoWorkC(); 
    } 
```

# delphi - Delphi - identcache 扩展

> ID：11157684
> 
> 赞同：7
> 
> 时间：2012-06-22T14:00:15.927
> 
> 标签：delphi, ide, delphi-xe2

根据[文档](http://docwiki.embarcadero.com/RADStudio/en/File_Extensions_of_Files_Generated_by_RAD_Studio)，此扩展用于重构。是否有可能在物理上排除这些文件？

# mysql - mysqldump 问题

> ID：11157689
> 
> 赞同：0
> 
> 时间：2012-06-22T14:00:37.887
> 
> 标签：mysql, mysqldump

我正在学习 Mysql，目前正在学习 mysqldump（在我自然锁定表之后）。我对 mysldump 的位置特别有疑问。这本书说，可能需要一个完整的路径，我试图这样做，因为我认为我必须像在本地服务器上那样做 - 与登录非常相似。

说用...

mysqldump -u 用户名 -ppassword 数据库名；（举个例子）

并且还使用 EasyPHP 提供 Windows 中的大多数位置作为 \program files\EasyPHP 3.0\mysql\bin 正如我所说的可能需要完整路径。

当我登录到用户时，我授予了我使用的权限..

"H:\xampp\mysql\bin\mysql" -username -p 并输入我的密码。

我试过这条路径但失败了 "H:\xampp\mysql\bin\mysql\mysqldump" -u username -ppassword databsename

谁能看到我实际上哪里出错了？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T00:55:14.943

只是好奇...您在使用 2009 年 O'Reilly 的书“Learning PHP, MySQL, & JavaScript”吗？这就是我正在使用的，它的方向是绝对无用和错误的。我没有费心检查勘误表，因为它有很多问题，我无法想象它是如何通过简单的校对的，而反复试验通常是学习这类东西的更好指南。

作为一个新手，经过几个小时的挫折后，我才发现了这个完全相同的问题，基本上试图从 easyPHP 更新到 12.0 破坏我的开发服务器的各种方式中恢复。

我相信你现在已经明白了，但是为了给其他分享这个问题/阅读相同错误的书的用户提供有用的解释，这对我有用，一个 Windows 用户：

1.  打开**shell**命令行，而不是 MySQL 命令行。
2.  在双引号内，列出完整路径名（从驱动器名称到 .exe）。因为它在引号中，所以空格（例如在程序文件（x86）中很好）。
3.  关闭报价后，-u*用户名*-p*密码数据库*> *destination.sql*
4.  这会将转储导出到登录到命令行的用户的目录中。对我来说，sql 文件位于 C:\Users\Me
5.  再次在 shell 命令行中，将 mysqldump 更改为您将使用的目录中的 mysql。对我来说，我还将 exe 的路径名修改为更新的文件夹（从“EasyPHP-5.3.9 等”到“EasyPHP-12.0 等”）
6.  在数据库名称前加上 -D
7.  翻转箭头的方向。

转储命令：

“C:\Program Files (x86)\EasyPHP-5.3.9\mysql\bin\mysqldump.exe” -u root -p 数据库 > database_dump.sql

恢复命令：

“C:\Program Files (x86)\EasyPHP-12.0\mysql\bin\mysql.exe” -u root -p -D database < database_dump.sql

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:01:55.450

> H:\xampp\mysql\bin\mysqldump -u 用户名 -p 数据库

# c# - 从 C# 调用 Oracle 中的存储过程

> ID：11157690
> 
> 赞同：3
> 
> 时间：2012-06-22T14:00:38.130
> 
> 标签：c#, asp.net, oracle, stored-procedures

我有一个带有文本框的页面，该文本框通过 Oracle 中的存储过程传递了一个值。过程发生了变化，现在有 2 个参数，一个用于输入值，另一个用于返回整数值。

以下是 Oracle 程序：

```
procedure UnoxDataFix(p_shpmt_nbr in pkms.asn_hdr.shpmt_nbr%type, retval out integer) is
  begin
  retval:=0;
    for r in (
        -- simple select statement
        )
    loop    
     if(r.stat_code = 10 and r.whse_xfer_flag = 'Y')
     then     
        update pkms.asn_dtl ad 
          -- simple set statement
        update pkms.asn_hdr ah
          -- simple set statement
          where ah.shpmt_nbr = p_shpmt_nbr
           RETURNING 1 into retval;
        commit;   
      end if;    
    end loop;
  end; 
```

这是我拥有的核心 C# 代码：

```
this.oraServer.ExecuteNonQuery(this.connectionString, CommandType.Text, "begin INTEGRATION.UnoxDataFix('" + input + "'); end;"); 
```

连接字符串有效。这只是给出错误的实际程序。“输入”值是发送到过程的实际值。但是为了将“retval”返回到站点，我不知道该怎么做。我已经尝试过谷歌搜索，但它没有帮助。我有点慢，所以欢迎所有评论。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:25:16.317

因为该过程现在需要 2 个参数，所以您需要提供 2 个参数而不仅仅是输入参数。另外，我更喜欢使用绑定变量来防止 sql 注入。（是的，您也可以为 OUT 参数使用绑定变量）。

```
begin INTEGRATION.UnoxDataFix(:input, :retval); end; 
```

我不熟悉 C# 的细节，所以我无法帮助您使用插入和检索值的确切方法。

顺便说一句，这是一种什么样的命名约定？你的目标是不可读吗？:)

> pkms.asn_hdr.shpmt_nbr

# objective-c - UITableView 没有显示正确的单元格

> ID：11157692
> 
> 赞同：1
> 
> 时间：2012-06-22T14:00:46.740
> 
> 标签：objective-c, uitableview

我有 2 个表视图，第一个是主表，第二个是收藏夹表。

一切都用 plist 处理。

在第一个表的 detailView 中，在右上角，我创建了一个按钮，该按钮将那个单元格的值 YES 或 NO 写入 plist，以便该特定单元格将显示在表收藏夹中。

现在的问题是：

*   我从第一个表中选择一行，即主表。detailView 出现，我点击 UIBarButton 使该细节成为收藏夹（因此星形图像作为图像出现在按钮中，让用户知道该单元格是收藏夹）。好的。
*   我去第二张表，最喜欢的一张，选择以前收藏的单元格，我看到星号是空的，然后布尔值设置为 NO（它应该设置为 YES，因为我刚才收藏了它）。

我注意到，如果我将**firstTable的****第一**项添加到收藏夹中，那么即使在我将它们全部收藏在第一个视图中之后，第二个视图中的其他单元格也会正确显示。

 **有点棘手，我知道，但它正在发生。

知道为什么吗？

我用于读取 plist 的方法如下：

```
- (NSArray*)readPlist 
{  
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"tipsList.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if (![fMgr fileExistsAtPath:plistPath]) { 
        plistPath = [[NSBundle mainBundle] pathForResource:@"list" ofType:@"plist"]; 

    } 

    NSMutableArray *returnArr = [NSMutableArray arrayWithContentsOfFile:plistPath]; 
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isFav == YES"]; 

    for (NSDictionary *sect in returnArr) { 
        NSArray *arr = [sect objectForKey:@"Rows"]; 
        [sect setValue:[arr filteredArrayUsingPredicate:predicate] forKey:@"Rows"]; 
    } 
    return returnArr;
    [self.tableView reloadData];
} 
```

cellForRow：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    NSArray *rows;
    if (tableView == self.searchDisplayController.searchResultsTableView) {
        rows = filteredList;
    } else {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isFav == YES"]; 

        NSDictionary *section = [localSortedTips objectAtIndex:indexPath.section];
        rows = [section objectForKey:@"Rows"];
        [rows filteredArrayUsingPredicate:predicate];

    }

    cell.textLabel.text = [[rows objectAtIndex:indexPath.row] objectForKey:@"name"];        
    return cell;
} 
```

和 didSelectRow：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{   NSDictionary *section = [localList objectAtIndex:indexPath.section];

    NSArray *rows = [section objectForKey:@"Rows"];
    NSDictionary *item = [rows objectAtIndex:indexPath.row];

        detailViewController *detail = [[detailViewController alloc] initWithNibName:@"detailViewController" bundle:nil];
        detail.indexPath = indexPath;
        detail.imageString = [item valueForKey:@"image"]; 
        detail.nameString = [item valueForKey:@"name"];
        detail.title = [item valueForKey:@"name"];
        detail.descriptionString = [item valueForKey:@"description"];

        [self.navigationController pushViewController:detail animated:YES];
        [tableView deselectRowAtIndexPath:indexPath animated:YES];

        [detail release];
    }

} 
```

**用图片编辑**

可以，然后呢。我选择mainTable**第一**部分的 **第一**行，出现detailView：**[![](../Images/6ea8316b4521008799c689143404c1b1.png)](https://i.stack.imgur.com/e31nk.png)**

 **然后我通过那个小星星收藏它，在plist中将它的值设置为YES

[![](../Images/6fe893305e3e1e9122097bdc0e574861.png)](https://i.stack.imgur.com/SsVBV.png)

然后我进入收藏夹表，点击以前收藏的元素，它看起来像这样

[![](../Images/6fe893305e3e1e9122097bdc0e574861.png)](https://i.stack.imgur.com/SsVBV.png)

好的。这行得通。但仅限**于此**！

事实上，如果我尝试选择主表中间的一行，并尝试收藏它，detailView 看起来像

[![](../Images/715ed59381aa24bcc665d26c9a930d2f.png)](https://i.stack.imgur.com/h6uIX.png)

但是，在收藏夹表中选择它看起来像这样，空星，而它应该被收藏然后填充。如果我尝试通过星号收藏它，然后返回收藏夹表，则 mainTable 中的前一行会出现，即使它没有被收藏。

[![](../Images/5c6a012777061d8c6de27cc2c6b05cf5.png)](https://i.stack.imgur.com/cSadk.png)

我注意到如果我保留第一个元素，它工作正常，但如果我删除它，它就不再工作了。:\

任何帮助都非常感谢，从 2 周开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T00:27:11.247

`indexPath`你传递给你的in 和那个`detailController`in`favoritesView`不一样`mainView`。因此，您必须做一些魔术来将过滤后的列表解析`indexPath`回原始的未过滤列表。

```
- (NSArray*)readPlist // still filtered list
{  
    NSMutableArray *returnArr = [[self readFullPlist] mutableCopy];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"isFav == YES"];

    for (NSDictionary *sect in returnArr) {
        NSArray *arr = [sect objectForKey:@"Rows"];
        [sect setValue:[arr filteredArrayUsingPredicate:predicate] forKey:@"Rows"];
    }

    return returnArr;
}

- (NSArray*)readFullPlist // split that method to get the unfiltered list separately
{
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES); 
    NSString *plistPath = [[documentPaths lastObject] stringByAppendingPathComponent:@"tipsList.plist"]; 
    NSFileManager *fMgr = [NSFileManager defaultManager]; 
    if (![fMgr fileExistsAtPath:plistPath]) { 
        NSString *bundlePlistPath = [[NSBundle mainBundle] pathForResource:@"tipsList" ofType:@"plist"];
        [self writePlist:[NSArray arrayWithContentsOfFile:bundlePlistPath]];
    }

    return [NSArray arrayWithContentsOfFile:plistPath];
}

- (NSIndexPath*)realIndexPathForIndex:(NSIndexPath*)idxPath
{
    NSArray *fullList = [self readFullPlist];
    NSArray *subArr = [[fullList objectAtIndex:idxPath.section] objectForKey:@"Rows"];

    int row = idxPath.row;
    int newRow = 0;

    for (NSDictionary *dic in subArr)
    {
        if ([[dic valueForKey:@"isFav"] boolValue]) {
            if (row == 0) {
                return [NSIndexPath indexPathForRow:newRow inSection:idxPath.section];
            }
            row--;
        }
        newRow++;
    }
    return idxPath;
} 
```

然后在`didSelectRowAtIndexPath:`你传递这个转换`indexPath`而不是旧的：

```
//detail.indexPath = indexPath;
detail.indexPath = [self realIndexPathForIndex:indexPath]; 
```

我想提一点。`indexPath`如果可能，您应该使用唯一标识符，而不是使用。这将使事情（比如这个）变得更容易，因为你只将它传递`id`给下一个控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T19:35:54.787

我在使用自定义表格单元格时遇到了这样的问题。通常问题出在 cellForRowAtIndexPath 方法中。因为你说它给了你第一个单元格，我猜你正在重复使用你的单元格。你告诉它加载哪个并不重要，如果你重用单元格，xcode只会抛出它认为合适的第一个单元格。以下是解决问题的方法：

```
//Returns a cell to be used at a row, populates it from the holder object
- (UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{   
    NSArray *tempPlist = [self readPlist];

    static NSString *CellIdentifier = @"Cell";
    [tableView registerNib:nib forCellReuseIdentifier:CellIdentifier];
    UITableCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.favorite = [tempPlist objectAtIndex:indexPath.row];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T05:58:47.207

根据您的问题，您有两个表格视图。一个是主表，第二个是最喜欢的表。如果在主表中选择了收藏图标，需要将plist中的key值更改为，`YES`并且需要重新加载两个表。这是正确的吗？

如果是，您必须按照以下步骤操作。

> 1.  两个表格视图单元格是否相同？如果不是，请在 cellForRowAtIndexPath: 中进行区分。
>     
>     
> 2.  你在更新 plist 中最喜欢的键值吗？选择收藏夹按钮时。根据您的代码，它似乎不是。
>     
>     
> 3.  更新 plist 后，需要重新加载两个（主表和最喜欢的表）表。你在重新加载表格吗？您没有在代码中重新加载表，因为您已经在 return 语句之后编写了这个。

请检查这些条件，如果您有任何其他潜在客户，请告诉我。

我认为这可能对你有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:57:44.257

你的 readPlist 方法中没有你说要阅读哪个 isFav 。因此，即使所有行/单元格在 plist 中都有自己的条目，您也没有获得该特定行的特定 isFav****

# python - Python - 列表和字典键之间的交集

> ID：11157704
> 
> 赞同：17
> 
> 时间：2012-06-22T14:01:10.970
> 
> 标签：python

我有一个看起来像这样的列表：

```
l1 = ['200:200', '90:728'] 
```

我有一本看起来像这样的字典：

```
d1 = {'200:200':{'foo':'bar'},'300:300':{'foo':'bar'}} 
```

我需要过滤掉只有键在 l1 中的字典。字典应该是这样的：

```
result = {'200:200':{'foo':'bar'}} 
```

本质上是列表和字典键的交集，同时返回字典的小节。

如果时间对大集合来说是个问题，我如何有效地做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-22T14:02:46.770

您可以使用以下代码：

```
keys = set(l1).intersection(set(d1.keys()))
result = {k:d1[k] for k in keys} 
```

**编辑：**正如评论者建议的那样，您可以在 Python 2.x 中将第一行替换为：

```
keys = set(l1).intersection(d1) 
```

在 Python 3.x 中：

```
keys = d1.keys() & l1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T14:08:15.350

在 3.x 中，这可以很简单：

```
>>> {k: d1[k] for k in (d1.keys() & l1)}
{'200:200': {'foo': 'bar'}} 
```

在 2.7 下，您可以使用`dict.viewkeys()`重新创建此功能：

```
>>> {k: d1[k] for k in (d1.viewkeys() & l1)}
{'200:200': {'foo': 'bar'}} 
```

在旧版本的 2.x 下，它有点冗长：

```
>>> {k: d1[k] for k in (set(d1).intersection(l1))}
{'200:200': {'foo': 'bar'}} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-22T14:09:07.227

不确定每个解决方案的性能，但我会这样做：

```
{k: v for k, v in d1.items() if k in l1} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:06:06.230

您可以在 dict 构造函数中使用列表推导：

```
result = dict([(k,d1[k]) for k in l1 if k in d1]) 
```

如果您担心删除重复键，请先将 l1 设置为一组：

```
result = dict([(k,d1[k]) for k in set(l1) if k in d1]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T14:15:18.403

定义高效。无论如何，这就是我会做的。如果速度太慢，我可能会将其移至 Cython。

```
s1 = set(l1)
s2 = set(d1.keys())
s3 = s1 & s2
# now you can access d1 using only keys in s3, or construct a new dict if you like
d2 = dict([(k,d1[k]) for k in s3]) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T14:28:47.397

如果内存分配和释放使这个过程花费了太长时间，那么 itertools 可以救命。

```
import itertools
result = {dict_key:d1[dict_key] for dict_key in itertools.ifilter(lambda list_item: list_item in d1, l1) } 
```

这不会为整个新集合不必要地分配内存，并且 l1 可以很容易地成为迭代器而不是列表。

# android - 从 RotationMatrix.getValues() 获取奇异变量或度数旋转

> ID：11157708
> 
> 赞同：0
> 
> 时间：2012-06-22T14:01:29.647
> 
> 标签：android, graphics, matrix, rotation, rotational-matrices

我正在使用本教程： http: [//mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/](http://mobile.tutsplus.com/tutorials/android/android-sdk-creating-a-rotating-dialer/)它为我提供了一个基于图像视图的旋转拨号器。但是我试图通过添加功能来扩展它。但是，为了添加此功能，我需要获取当前单击的位置。但是，由于它使用旋转矩阵来旋转图像视图，所以我无法获得一个单一的位置来分析用户点击的位置。有没有办法将旋转矩阵中的 9 个值压缩成一个变量来指示用户触摸的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:39:03.757

这更像是一个计算机图形问题，而不是一个 Android 问题。使用[齐次坐标](http://en.wikipedia.org/wiki/Homogeneous_coordinates#Use_in_computer_graphics)，围绕原点的顺时针旋转将表示为（我在这里使用 Octave / MATLAB 表示法来表达这一点）：

```
rotationMatrix = [ cos(theta) sin(theta) 0; -sin(theta) cos(theta) 0; 0 0 1 ] 
```

假设矩阵只是围绕原点进行旋转，您可以调用`java.lang.Math.acos`并传入返回的数组中的第一个值`Matrix.getValues`以获取您的 theta。该值以弧度为单位，因此如果您需要度数，则需要对其进行[转换](http://en.wikipedia.org/wiki/Radians#Conversion_between_radians_and_degrees)。

OTOH，根据您在做什么，您可能只想调用`Matrix.invert`以获得逆并将包含触摸坐标的点与该逆相乘`Matrix`以“撤消”转换。

# javascript - 在 obj 中重新定义属性函数

> ID：11157720
> 
> 赞同：0
> 
> 时间：2012-06-22T14:01:58.407
> 
> 标签：javascript

我正面临这样的问题。我有一个来自图书馆的对象，通常说：

```
obj.childObj.doStuff({
   ....
   aProperty: function(params....){
      var xxx = this.someObj,
      e = this.someOtherObj;

      obj.doSomeXtraStuff();
   }
   ....
}); 
```

我想覆盖`aProperty();`然后全局`obj`调用我的版本，在那个配置中是否有可能，而且在不修改原始 obj 的定义的情况下这样做会很好吗？但是我愿意接受任何建议。我可以制作`aProperty.prototype = function(p1,p2,...){.....};` 但没有效果，虽然它保存在 proto 属性中？

# google-apps-script - 有没有办法在另一个谷歌文档电子表格中安装“编辑触发器”？

> ID：11157721
> 
> 赞同：0
> 
> 时间：2012-06-22T14:01:59.687
> 
> 标签：google-apps-script

这是我想要在编辑时触发的功能（电子表格 1）

```
function sendData() 
{
    var value1=SpreadsheetApp.getActiveSheet().getActiveRange().getValue();
    SpreadsheetApp.openById("third spreadsheet ID").getSheetByName("***").getRange("B2").setValue(value1);
} 
```

从另一个电子表格 (2) 我写下了：

```
function TriggerOn()
{ // create trigger
    var spreadsheet = SpreadsheetApp.openById("first Spreadsheet ID");
    ScriptApp.newTrigger("senData").forSpreadsheet(spreadsheet).onEdit().create();
} 
```

但它不起作用，因为 forSpreadsheet(spreadsheet) 仅适用于同一个电子表格......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:48:37.673

# wxpython - 从字符串加载 XRC

> ID：11157730
> 
> 赞同：1
> 
> 时间：2012-06-22T14:02:16.707
> 
> 标签：wxpython

我想从一些外部数据源动态创建 GUI。源将呈现其内部结构，例如字段，包括数据类型、初始值、最小最大值等，以及可以由（远程）数据对象处理的一些操作。该结构应转换为应从 GUI 动态添加和删除的文本控件和按钮。这很像使用 XRC 加载 GUI 的一部分，所以我想知道是否应该使用 XRC 或自己编写代码。使用 XRC 将使测试和使用替代数据源更容易。生成 XRC 相当容易。所以现在我有以下两个问题：

1.  这个想法有其他选择吗？
2.  我找不到从字符串加载 XRC 的方法，因为 xrc.XmlResource 仅将文件名作为其参数。使用临时文件似乎很乱，所以知道如何从字符串加载吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T23:30:00.873

你需要这样称呼它：

```
 res = wx.xrc.EmptyXmlResource() #Here it is
        res.LoadFromString(resourceText) 
```

这是一个例子。

```
import wx, wx.xrc

resourceText = '''<?xml version="1.0" encoding="UTF-8"?>
 <resource>

<object class="wxPanel" name="MyPanel">
  <object class="wxStaticText">
    <size>80,-1</size>
    <label>Hey</label>
  </object>
 </object>
</resource>
'''

class TestFrame(wx.Frame):
    def __init__(self, parent):
        wx.Frame.__init__(self, parent, -1, 'Testing',
                          size=(640,480))

        res = wx.xrc.EmptyXmlResource() #Here it is
        res.LoadFromString(resourceText)

        panel = res.LoadPanel(self, "MyPanel")
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(panel, 1, wx.EXPAND|wx.ALL, 5)

        self.SetSizer(sizer)
        self.SetAutoLayout(True)

if __name__ == '__main__':
    app = wx.PySimpleApp()
    frame = TestFrame(None)
    frame.Show(True)
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:26:58.903

经过一番试验，看起来 XmlResource 需要一个文件或类似文件的对象。我不知道为什么你不能只使用一些文件，但如果这是你想避免的事情，那么你可以通过创建类似文件的对象来做到这一点。请参阅 StringIO 或[http://pypi.python.org/pypi/filelike/0.3.3/](http://pypi.python.org/pypi/filelike/0.3.3/)

# php - 如何拆分多维数组PHP

> ID：11157731
> 
> 赞同：0
> 
> 时间：2012-06-22T14:02:21.580
> 
> 标签：php

我有一个多维数组，比如

```
$array = array ( [0] => array ([0] => 'stack1', [1] => 'stack2'),
                 [1] => array ([0] => 'exchange1', [1] => 'exchange2'),
         [2] => array ([0] => 'overflow1', [1] => 'overflow2'),
         [3] => array ([0] => 'super1', [1] => 'super2')
     ); 
```

如何拆分具有特定单词（例如“溢出”）的数组，我必须将其转换为两个数组，如下所示。之后我想循环。

```
$array1 = array ( [0] => array ([0] => 'stack1', [1] => 'stack2'),
                 [1] => array ([0] => 'exchange1', [1] => 'exchange2'),
          [2] => array ([0] => 'super1', [1] => 'super2')
        );

$array2 = array ( [0] => array ([0] => 'overflow1', [1] => 'overflow2') ); 
```

我如何使用 php 来实现这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:04:52.063

```
function array_find($needle, $haystack, $search_keys = false) {
    if(!is_array($haystack)) return false;
    foreach($haystack as $key=>$value) {
        $what = ($search_keys) ? $key : $value;
        if(strpos($what, $needle)!==false) return $key;
    }
    return false;
}

$word = 'overflow';
$c = count($array);
for ($i=0; $i<$c; $i++) {
    if (array_find($word, $array[$i])) {
        $array2[] = $array[$i];
    }
    else {
        $array1[] = $array[$i];
    }
} 
```

[array_find()](http://www.php.net/manual/en/function.array-search.php#95926)类似于[array_search()](http://www.php.net/manual/en/function.array-search.php)，但它也适用于部分匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:06:37.677

```
$search = 'overflow'; // set the search phrase
foreach($array AS $sub) {
  $final = 1;
  foreach($sub AS $val) {
    if ( strpos($search,$val) ) { $final = 2; }
  }
  ${'array'.$final}[] = $sub;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:11:26.993

我一直觉得我在模仿保罗，第二次我的答案与他的非常相似。我保证我不是故意这样做的。然而，这是不同的，希望这对你有用。

```
$array2 = array();
foreach( $array AS $key => $sub ) {
    foreach( $sub AS $item ) {
        if( strpos( $item, 'overflow' ) !== FALSE ) { $array2[ $key ] = ''; }
    }
}

$array2 = array_intersect_key( $array, $array2 );
$array1 = array_diff_key( $array, $array2 ); 
```

# java - 图片最亮的区域

> ID：11157737
> 
> 赞同：0
> 
> 时间：2012-06-22T14:02:47.493
> 
> 标签：java, image-processing

有没有可能在图片中找到最闪亮的物体？

所以让我们有一个亮点的图片。如何在图片中找到该点，例如围绕该点画一个圆圈？

我可以从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:12:01.460

Use [blob detection](http://en.wikipedia.org/wiki/Blob_detection).

Basically, you define an NxN operator, and pass it over each pixel in the image, computing a value for each pixel based on it and its neighbors. The resulting image has the largest values at locations of interest.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:46:29.077

我会说通过图像计算图像的大小，例如 sqrt(red^2+blue^2+green^2) * alpha （如果 alpha 是一个因素）。这将为您提供一种“亮度”指标。

从那里开始，这完全取决于您想要做什么。如果您只是想圈出所有亮点，则圈出幅度大于某个截止点的所有点。

如果您只是在寻找更复杂的最亮点。一种方法是取图像关于 x 和 y 的导数。这将定义亮点的边界。之后，您只需进入边界并计算其亮度与图像中其他点相比的相对大小。然后圈出最亮的那个。这一切都很笼统，因为您的问题很笼统。确切的实现取决于您到底要做什么。

# c++ - 用于将 C++ 对象公开给 JavaScript（在 PowerPC 上）的 v8 替代方案

> ID：11157743
> 
> 赞同：0
> 
> 时间：2012-06-22T14:03:00.380
> 
> 标签：c++, webkit, powerpc, javascriptcore, emscripten

我需要将 C++ 类（打包为共享库）暴露给 JavaScript 的神奇世界。

最明显的解决方案是使用 Node.js/v8。问题是它必须在 PowerPC 上运行（请不要对此发表评论......）而且 - 唉！- v8 不能在 PowerPC 上运行（[v8-powerpc](https://github.com/ic/v8-powerpc)项目似乎已经死了）。

我试图了解是否有任何其他可行的解决方案，目前一些可能性是：

1.  [emscripten](https://github.com/kripken/emscripten)，将 LLVM 位码转换为 JavaScript；
2.  WebKit 的[JavaScriptCore](http://trac.webkit.org/wiki/JavaScriptCore)，虽然我不确定它是否会工作（无论如何我都会在 PowerPC 上安装 WebKit）

我不是 JavaScript 专家，实际上我感到很迷茫，所以这些是我的问题：

1.  emscripten 是一个有效的解决方案吗？（你用过吗？）
2.  任何人都可以向我指出有关如何使用 JavaScriptCore 将 C++ 公开给 JavaScript 的任何文档吗？
3.  还有其他选择吗，和/或您会采用哪一种？

非常感谢，

里佩尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:24:32.437

Qt 有一个在 powerpc 上运行的 webkit 端口，它有一个 javascript 引擎，允许您调用 C++ 代码。

[Qt：使应用程序可编写脚本](http://qt-project.org/doc/qt-4.8/scripting.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T19:49:41.200

JavaScriptCore 有[JSObjectMakeFunctionWithCallback()](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/WebKit_JavaScriptCore_Ref/JSObjectRef_h/index.html#//apple_ref/c/func/JSObjectMakeFunctionWithCallback)。不过，看起来这可能涉及*大量*样板代码来转换参数和异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T12:56:03.100

您可以使用*Emscripten*。我已经使用它并且正在使用它。问题是：

*   *JS/C 社区在 IMO 上对Emscripten*有点怀疑/不同，所以你可能不会在那里得到太多支持（通常 #emscripten IRC 频道很有帮助）。
*   *Emscripten*编译代码相当容易/很好，但您需要对 C 有深入的了解才能获得有效的解决方案。您可能必须重写代码的某些部分以使其按 JavaScript 引擎的预期工作（例如使用 main_loop、回调等）。
*   使用*Node.js*，您也可以尝试使用同步文件 api（请参阅[http://nodejs.org/api/fs.html](http://nodejs.org/api/fs.html)） - 但我担心您将不得不更改*Emscripten*文件访问仿真，因为它主要是编码的对于浏览器的使用，现在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T11:01:30.603

现在 Node.js 可以在 PowerPC 上运行。请参阅[此 github 链接](https://github.com/andrewlow/node)（我认为它可以在任何具有运行 linux 的 powerpc 处理器的系统上运行。

# iphone - 使用 iOS SDK 初始授权后添加 facebook 权限？

> ID：11157744
> 
> 赞同：3
> 
> 时间：2012-06-22T14:03:02.160
> 
> 标签：iphone, facebook-graph-api, facebook-ios-sdk

如何在`[facebook authorize:permissions]`使用 facebook-ios-sdk 的初始后添加权限？

该应用程序的主要目的是在 facebook 墙上发帖，但如果用户激活一个选项，应用程序需要更多权限并且应该再次询问用户？

但是，如果我尝试使用具有不同权限的 facebook-ios-sdk 中的授权方法，则来自 facebook 的 sso 仅表示该应用程序已获得授权（但从第一次授权开始，该权限保持不变）

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:49:08.893

`[facebook authorize:permissions]`只需使用超集数组再次调用for`permissions`就可以了。

第二次`authorize:`调用时，您将获得不同的 Facebook SSO 屏幕，其中仅新权限显示在“使用此应用程序要求：”列表中。

注意：确保您的第二次调用`authorize:`不是以`[self.facebook isSessionValid]`返回为前提的`false`，因为它很可能是返回`true`。

**编辑：**

这是我在没有预先存在权限的情况下获得的第一个 FB 屏幕，我要求 (@"email", @"publish_stream", @"publish_actions")：

![第一授权](../Images/b31ab81c418aea0b57c8d486383b2f78.png)

现在，稍后当我请求这些权限（@"email"、@"publish_stream"、@"publish_actions"、**@​​"user_photos"**）时，我会得到这个：

![二次授权](../Images/8b4faa5ab34e7aaee7700e4e6c6fd504.png)

# sqlite - 如何在不先启动firefox的情况下直接启动sqlite manager（firefox插件）？

> ID：11157747
> 
> 赞同：5
> 
> 时间：2012-06-22T14:03:12.493
> 
> 标签：sqlite, firefox, sqlitemanager

我最近从我最喜欢的 Firefox 切换到 Chrome 进行浏览，但经常使用 SQLite 管理器。只是想看看我是否可以避免每次使用 sqlite 管理器时打开和关闭空的 firefox 窗口。不要认为 Chrome 有这个扩展。可以？

# php - 防止用户使用 FireBug 之类的东西编辑复选框值？

> ID：11157749
> 
> 赞同：0
> 
> 时间：2012-06-22T14:03:14.123
> 
> 标签：php, ajax, forms, security, firebug

我有一个管理页面，列出了一堆记录，每条记录旁边都有一个复选框，将其设置为“活动”状态。每个复选框都有一个值，该值与数据库中记录的 ID 相关联。如果有人使用 FireBug，他们可以轻松地将复选框的值更改为不同的数字，从而影响数据库中的错误记录。

我并不非常担心这种情况的发生，因为它只是一个只有一个用户的管理页面，我敢肯定他对 FireBug 一无所知.. 但我只是好奇，以防我将来遇到这个问题一个更面向公众的页面。

这是我目前拥有的代码，因此您可以了解我在做什么。

**HTML + PHP..**

```
<input type="checkbox" class="active" name="active<?php echo $id; ?>" id="active<?php echo $id; ?>" <?php if ($active == 1): ?>checked="checked"<?php endif; ?> value="<?php echo $id; ?>"> 
```

**jQuery ajax..**

```
$("input.active").click(function() {

var loader = $(this).prev().prev();

$(loader).css("visibility","visible");
// store the values from the form checkbox box, then send via ajax below
var check_active = $(this).is(':checked') ? 1 : 0;
var check_id = $(this).attr('value');

console.log(check_active);
console.log(check_id);

    $.ajax({
        type: "POST",
        url: "active.php",
        data: {id: check_id, active: check_active},
        success: function(){
            $(loader).css("visibility","hidden");

        }
    });
return true;
}); 
```

**这里是active.php ..**

```
<?php

include("dbinfo.php");
mysql_connect($server,$username,$password);
@mysql_select_db($database) or die( "Unable to select database"); 

$active = mysql_real_escape_string($_POST['active']);
$id = mysql_real_escape_string($_POST['id']);

$addEntry = "UPDATE entries SET active = '$active' WHERE id = '$id'";
mysql_query($addEntry) or die(mysql_error());

mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:04:37.277

您应该在其中设置一个`$_SESSION`包含其帐户信息的值，因此如果他们尝试访问不存在的帐户，您可以捕获它并适当地标记它。只需他们帐户的 ID 号就足够了。你绝对**不**应该把它放在隐藏字段或用户可以更改它的任何地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:11:34.123

You can't.

firebug has full control over the HTML.

But your not worried about HTML, your actually worried that the user will do something funky in active.php, which is exactly where you should add more protection.

If an admin has the right to edit the active state of entries, then he should be able to edit any entry he wants in any way that you will allow it.

The security issue that you describe where some malicious **admin** can change the id in the HTML and have the wrong record change the active state is nothing compared to an even more malicious **user** that can send a post request to your active.php page just like your ajax script does, but using his server, effectively having access to change any active state on any entry.

What you should do is to perform some kind of authentication on the active.php

Be it using SESSIONS or HTTP

# c# - C# TimeSpan.Parse 无效格式返回不正确的值而不是异常

> ID：11157750
> 
> 赞同：20
> 
> 时间：2012-06-22T14:03:19.320
> 
> 标签：c#, timespan

TimeSpan.Parse("23:00:00") 返回 23 小时。

TimeSpan.Parse("24:00:00") 返回 24 天！

我意识到我犯了一个错误，允许的时间范围是 0-23。但是，如果您尝试解析超出范围的值，则会在几分钟和几秒钟内出现异常。在小时值超出范围的情况下，解析器错误地假定您的意思是天而不是小时。

有人可以解释一下吗？

这个例子在这里涵盖了这个主题，并表明 [http://msdn.microsoft.com/en-us/magazine/ee309881.aspx](http://msdn.microsoft.com/en-us/magazine/ee309881.aspx)

TryParse 似乎也是如此。尽管文档说明解析应该失败，但我得到了 24 天。

[http://msdn.microsoft.com/en-us/library/3z48198e](http://msdn.microsoft.com/en-us/library/3z48198e)

```
//            String to Parse                TimeSpan
//            ---------------   ---------------------
//                          0        00:00:00
//                         14     14.00:00:00
//                      1:2:3        01:02:03
//                  0:0:0.250        00:00:00.2500000
//             10.20:30:40.50     10.20:30:40.5000000
//        99.23:59:59.9999999     99.23:59:59.9999999
//        0023:0059:0059.0099        23:59:59.0099000
//                     23:0:0        23:00:00
//                     24:0:0   Parse operation failed.
//                     0:59:0        00:59:00
//                     0:60:0   Parse operation failed.
//                     0:0:59        00:00:59
//                     0:0:60   Parse operation failed.
//                        10:   Parse operation failed.
//                       10:0        10:00:00
//                        :10   Parse operation failed.
//                       0:10        00:10:00
//                     10:20:   Parse operation failed.
//                    10:20:0        10:20:00
//                       .123   Parse operation failed.
//                    0.12:00        12:00:00
//                        10\.   Parse operation failed.
//                      10.12   Parse operation failed.
//                   10.12:00     10.12:00:00 
```

我发现了一个错误还是我做错了什么？

编辑：我已经在 LinqPad 中对此进行了测试，并在 Windows 7 64 位的 .NET4 中使用了控制台应用程序。

```
 var result = TimeSpan.Parse("24:00:00");
            Console.WriteLine(result);
            result = TimeSpan.Parse("24:00:00", CultureInfo.InvariantCulture);
            Console.WriteLine(result); 
```

这导致：

```
24.00:00:00
24.00:00:00 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-22T15:17:02.710

正在发生的事情是`TimeSpan.Parse`尝试`##:##:##`按顺序使用以下每种格式进行解析，一旦成功就停止：

1.  `hh:mm:ss`（不变的文化）
2.  `d.hh:mm`（不变的文化）
3.  `hh:mm:ss`（本地化）
4.  `d.hh:mm`（本地化；有关“.”的更多详细信息见下文）

所以：

*   `23:08:09`在步骤 1 中成功解析为 0d 23h 8m 9s。
*   `24:08:09`在步骤 4 中成功解析为 24d 8h 9m 0s。

如果此行为不适合您，您可以改用[TimeSpan.ParseExact](http://msdn.microsoft.com/en-us/library/dd992370.aspx)：

```
TimeSpan.ParseExact("23:00:00", "hh':'mm':'ss", null) // OK
TimeSpan.ParseExact("24:00:00", "hh':'mm':'ss", null) // OverflowException 
```

**更新：**根据[TimeSpan.Parse](http://msdn.microsoft.com/en-us/library/se73z7b9.aspx)的文档，“。” “d”和“hh”之间是

> 区分天数和小时数的文化敏感符号。不变格式使用句点（“.”）字符。

然而，我用 Reflector 挖掘了框架源代码，结果发现，在本地化格式中，这个所谓的“文化敏感”符号总是一个冒号！`DateTimeFormatInfo.FullTimeSpanPositivePattern`这是内部属性的摘录：

```
string separator = new NumberFormatInfo(cultureData).NumberDecimalSeparator;
this.m_fullTimeSpanPositivePattern = "d':'h':'mm':'ss'" + separator + "'FFFFFFF"; 
```

# mysql - 根据mysql中的另一个表更正列中的拼写错误

> ID：11157758
> 
> 赞同：0
> 
> 时间：2012-06-22T14:04:01.677
> 
> 标签：mysql, sql, soundex, spelling

我的 mysql 表有一个 cityname 列。cityname 列中的值有一些拼写错误。城市的每一个拼写错误都需要纠正。另一个表有一列包含所有正确的城市名称。根据此表，需要更正第一个表的拼写错误。我研究了 soundex 之类的东西，但找不到任何类似的链接。

```
TableA 

+----+------------+----------+
| id | col1      | city_name   |
+----+------------+----------+

TableB

+----+------------+--
| index |City_name      |
+----+------------+-- 
```

我想到的方法是获取一个 sql 查询，该查询从具有相似发音城市名称的行中创建单独的表。

一旦完成，再次使用 sql 查询将错误的拼写替换为正确的拼写

最后将所有不同的表格组合成一个带有所有更正拼写的表格。

我正在寻找方法和mysql查询语法的建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:14:26.427

这将涉及一些手动工作，如果这是一次性的事情，为其构建前端可能不是问题。

我会做的是以下几点：

1.  生成所有拼写错误的列表。
2.  根据 soundex 生成建议
3.  手动检查列表，手动选择正确的列表，并在每次修复时手动运行更新语句。

那么，如何做到这一点：

```
SELECT * FROM TableA as orig
LEFT OUTER JOIN
TableB as correct
ON SOUNDEX(orig.city_name) = SOUNDEX(correct.city_name)
WHERE orig.City_name NOT IN (SELECT City_name FROM TableB) 
```

并手动编写更新语句。您可能无法通过 soundex 获得任何建议，或者获得多项选择，您必须自己解决这些问题。电脑没那么聪明。

# arrays - 最短长度子集

> ID：11157759
> 
> 赞同：1
> 
> 时间：2012-06-22T14:04:02.270
> 
> 标签：arrays, search

我有一个数组和一个数字 N。

数组可以填充数字 0,1,2,3....N。

例如，**arr={1,0,2,3,1,0,2,4,3,1,0,2,4,3,0,0,0} //给定 N=4**

我必须找到包含所有数字 1,2,...N 的最小长度子数组。

例如，上面数组的答案应该是 {1,0,2,3,1,0, **2,4,3,1** ,0,2,4,3,0,0,0}// length=4 , 并且**索引 start=6,end=9, //0 基于**

上述问题的一个可能答案是 {1,0,2, **3,1,0,2,4** ,3,1,0,2,4,3,0,0,0}，但由于其长度为 5，它被拒绝了..如果有一个以上长度最短的子数组，答案应该是第 1 次出现。或者，如果数组不包含 1,2..N 之间的一个或多个数字，则答案是“未找到子数组”。

**这是我的python代码。它在某些情况下会产生错误的答案（我不知道）......如果有人能告诉我我做错了什么。**

```
shortlen=2000001 //initialise to INFINITY
shortstart=0 
matchln=len(match) //match is the array containing integers

while(i<matchln):
   if(match[i]>0):
    leng=0
    pos=[0]*n // array to keep status of found integers
    j=i
    start=i
    sums=0
    while(j<matchln and sums!=n):
        if(match[j]>0):
            if(pos[match[j]-1]==0): //only update status if the integer is not marked previously.
                pos.pop(match[j]-1)
                pos.insert(match[j]-1,1) //(match[j]-1) becuz array indexing is from 0.
                sums+=1

        j+=1

    leng=j-i

    if(j==matchln and sums!=n): // if the loop terminated,without marking all integers,that means we shouldn't proceed.
        break

    if(leng<shortlen): //if the length calculated is smaller then existing,then update it.
        shortlen=leng
        shortstart=start

i+=1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:15:23.543

一种可能性是跟踪*每个起始位置*的最短长度。您可以通过对数组执行两次传递来做到这一点：

假设对于索引 1..k，您已经维护了在该位置之后找到的一组数字（在 1..N 内）（每个位置的集合不同），当您前进到位置 k+1 时，您需要更新所有集合（* ) 位置为 k+1 的数字（只要数字在 1..N 以内）。一旦一个集合包含 N 个元素，您就找到了该起始位置的最短序列，记录该位置的长度。

(*) 意识到对于具有完整集合的位置，您不再需要遍历它们。此外，一旦一个位置的集合已满，那么在此之前的位置集合也必须是满的，因此您可以保留一个滑动的“起始位置”来检查集合

您现在可以再一次通过来为每个位置选择最短的记录序列（您可以根据开始和序列长度计算结束位置）。

```
status = new array[arr.length] of Status // for score keeping
// initialize Status with: set <- empty, length <- n+1
startPos = 1 // sliding start position
// first pass
for i = 1..arr.length
  if arr[i] > 0 // within 1..N
    for j = startPos..i
      status[j].set.add(arr[i])
      if status[j].set.size == N // we have all numbers
        status[j].length = i-j;
         startPos = j+1

min = n+1 // for the shortest length
startPos = 1
// second pass
for i = 1..status.length
  if status[i].length < min
    min = status[i].length
    startPos = i

if min < n+1
  // found a winner
  print("start: " + startPos + ", end: " + startPos + min) 
```

*注意*：上面代码中的索引从 1 开始（而不是从 0）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T20:07:11.620

如果允许额外的哈希表，则可以一次性完成。

基本上，您在数组上维护两个指针：*left*和*right*，最初都指向数组上的第一个元素。

在每一轮中，我们首先*向右*前进。在第一次移动之后，只要*right*指向与*left*相同的值，我们也会*向左*移动。我们当然会跳过 0。

在每一轮中，我们维护哈希表以查看从 1 到 N 的哪个值在区间 [left, right] 内，如果所有值都在区间内，我们得到区间长度。我们在整个过程中跟踪最小间隔长度。

时间复杂度为 O(Nn)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:02:45.883

我想这可能会对你有所帮助。您的问题的目标是将您的值转换为线性独立序列。我写了一个小代码来解决你的问题，它找到了你想要的序列的开头：

```
#include <stdio.h>
void main(){
/*By Volnei Klehm,
 Manaus-AM, Brazil
    2012
*/
long long arr[]={1,0,2,3,1,0,2,4,3,1,0,2,4,3,0,0,0};
long long power2arr[17]; /*same size or larger than arr*/
long long powerSum=0;
long long partialSum=0;
int count,count1,N;

int size_arr;
size_arr=sizeof(arr)/sizeof(long long);

/*the goal here is to find a way to represent your values as linear indepent ones,
      here a sequece of power of 2 is used, you can also use other ways to do it that not increases so dramatically in values.
      I use powers of 2 cause is more easy handled by computers, you can also use a sequence of sines, 
      cosines or any other math way that produces independets values. 
      For more informations I suggest you to take a look in linear algebra and/or digital signal processing books*/

/*Now it computes an independent basis*/

for(count=0 ; count<size_arr ; ++count){
    power2arr[count] = 1 << arr[count]; /*calculates 2^arr generating a set of independent numbers.*/

}

N=4; /*put here your N, for n=4 it will look for*/
/*Notice that deppending on your system, N cannot be too large,
      at certain point N values can make 2^N too large to be handled 
      by standard c/c++ types. Here is safe to use n up to 63.*/

/*now it gets the sum results of 2^0 + 2^1 + 2^2 ... + 2^N*/

++N; /* in C position starts at 0*/

for(count = 0 ; count < N ; count++)
    powerSum |= 1 << count;

for(count = 0 ; count<size_arr ; ++count){
    partialSum=0;
    for(count1 = count ; count1 < (count + N) ; count1++){
        if((count + N) > size_arr){
            printf("No occurrences found!\n");
            return;
        }
        partialSum |= power2arr[count1];    
    }
    if(partialSum==powerSum){
        printf("Ocurrence found at: %d\n", count);
        return;
    }
} 
```

}

# json - JSON数据是一个对象还是一个数组，如何检查？

> ID：11157760
> 
> 赞同：1
> 
> 时间：2012-06-22T14:04:07.237
> 
> 标签：json

我在 Joomla 应用程序中使用 jQuery 小部件。小部件的数据必须是一个对象并采用 json 格式。当我在没有 Joomla 框架的数据库功能的情况下直接从数据库中检索数据时，我能够实现这一点。

当然，我确实想在 Joomla MVC 结构中进行，并且我想利用 Joomla 数据库功能。这样做时，小部件中没有输出。

我之前有这个，当作为数组传递时，它不显示数据，当作为对象传递时，它会显示。

我的问题是这样的：直接从数据库生成数据并使用 Joomla 数据库结构在回显到屏幕时会产生完全相同的结果，但一个显示在网格中，另一个不显示。我之前遇到的问题也是这种情况，但在那种情况下，我对相同的数据调用了 json_encode 两次，但显示的数据绝对没有区别，但一个有效，另一个无效。

我的问题：我对 JSON 数据还不是很熟悉，但是有没有办法检查数据是表示为对象还是数组？这可能是一个非常愚蠢的问题，但在我看来，数据肯定存在差异，仅通过查看它，您就看不到它，还是我遗漏了什么？

***更新：*** 感谢您的回复。我已经坐了好几天了！！它现在正在使用 Joomla 数据库函数，除了 json 编码之外，我的代码似乎存在一个小问题，但是当我之前在模型和控制器中使用 json_encode 时，它​​们看起来就像这样，因此双 json 编码它，它不起作用，但是当在 Joomla 之外生成时，它起作用了（单次使用 json_encoding）。查看它们在 Joomla 之外生成并经过双重 json 编码后，两者看起来都一样，因此我在查看输出时找不到问题，与现在相同。

感谢您提供有关`[]`and的信息`{}`，这很有见地，但这是我的代码示例：

```
 [{"TotalRows":2,"Rows":[{"login_id":"122","cust_id":"0","shop_id":"0","nickname":null,"shopicon":null,"website":null,"shopname":null, "username":"","password":"","dob":"0000-00-00","comments":null},
{"login_id":"25","cust_id":"57","shop_id":"42","nickname":"qwerty","shopicon":"shop.ico","website":"http:\/\/www.shop.co.uk","shopname":"Shop","username":"eqweq","password":"wqewqeq","dob":"1981-12-14","comments":"qwqeqeqw"}]}] 
```

我如何判断它是数组还是对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T11:03:59.817

以下代码用于获取所有键并检查关联值以数组或 json 对象或字符串值的形式出现在哪里。

```
Iterator<?> rootIter = jsonData.keys();
while (rootIter.hasNext())
{
   String name = (String) rootIter.next();
   Object obj = jsonData.get(name);
   if (obj instanceof JSONObject)
   {
      JSONObject jsonObj = (JSONObject) obj;
   }
   else if(obj instanceof JSONArray)
   {
       JSONArray jsonArray = (JSONArray) obj;
   }
   else
   {
      String values = obj.toString();
   }           
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:40:32.480

如果您有 JSON 字符串，您可以简单地检查第一个非空白符号是否为`{`或`[`。`{`意味着顶层是常规对象（请记住，数组也是对象！），`[`-array. 您还可以将其解析为对象并检查`instanceof Array`结果是否为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:08:49.063

它们应该非常不同：

```
var arr = [1, 2, 3, 4];
console.log(JSON.stringify(arr)); // prints "[1,2,3,4]"
var obj = { a: 1, b: 2, c: 3, d: 4 };
console.log(JSON.stringify(obj)); // prints "{"a":1,"b":2,"c":3,"d":4}". 
```

您能否显示一些输入和输出（以及一些代码），以便我们了解发生了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T14:49:10.717

抱歉，user1154041，这不是一个完全正确的答案，但它可能会帮助您看到树木的木材。当开发人员准备好一段 JavaScript（或 JSON 子集）以进行部署时，他们会“缩小”它，这意味着删除所有空格。它对 JavaScript 引擎没有影响，但我们人类很难阅读。重新格式化一段缩小的代码有时被称为“美化”，这个过程过去需要特殊的工具。这些天来，我使用的所有编辑器都有一个“格式”函数，它像您的示例一样采用 JavaScript 或 JSON 字符串，并将其格式化为更易读的形式，如下例所示（我必须添加 var 语句以使其成为有效的 JavaScript以便我的编辑了解该怎么做）：

```
var test = [{
    "TotalRows": 2,
    "Rows": [{
        "login_id": "122",
        "cust_id": "0",
        "shop_id": "0",
        "nickname": null,
        "shopicon": null,
        "website": null,
        "shopname": null,
        "username": "",
        "password": "",
        "dob": "0000-00-00",
        "comments": null
    }, {
        "login_id": "25",
        "cust_id": "57",
        "shop_id": "42",
        "nickname": "qwerty",
        "shopicon": "shop.ico",
        "website": "http://www.shop.co.uk",
        "shopname": "Shop",
        "username": "eqweq",
        "password": "wqewqeq",
        "dob": "1981-12-14",
        "comments": "qwqeqeqw"
    }]
}] 
```

我知道您仍然必须习惯 [] 表示数组而 {} 表示对象这一事实，但您不同意它更容易看到吗？因此，当您对这样的字符串感到困惑时，请打开像 Aptana [http://www.aptana.com](http://www.aptana.com)这样的 IDE ，专为编辑 JavaScript 而设计。创建一个 JavaScript 文件，将字符串分配给 var 并点击格式按钮。这样你就有一半的机会弄清楚代码的结构。

# mysql - Mysql存储过程限制查询

> ID：11157761
> 
> 赞同：0
> 
> 时间：2012-06-22T14:04:08.520
> 
> 标签：mysql, stored-procedures

我只想通过存储中的参数限制查询，但在 LIMIT 字段中出现错误：

```
DELIMITER //
DROP FUNCTION IF EXISTS test//
CREATE PROCEDURE test(lim INT)
  BEGIN
    SELECT * FROM logs LIMIT 0,lim; 
  END //
DELIMITER ; 
```

我想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:02:56.413

MySQL LIMIT 子句有一些限制。参考一个已知的[***`bug id=11918`here***](http://bugs.mysql.com/bug.php?id=11918)。

> *这不是特定于存储的例程。*
> *LIMIT 不允许在任何上下文中使用变量*。
> *它的参数必须是整数常量。*

一种解决方法是在存储过程中使用准备好的语句。

**示例**：

```
mysql> DROP PROCEDURE IF EXISTS names_proc;
Query OK, 0 rows affected (0.00 sec)

mysql> DELIMITER //
mysql> CREATE PROCEDURE names_proc( lim INT )
    ->   BEGIN
    ->     PREPARE STMT FROM 'SELECT * FROM names LIMIT 0, ?';
    ->     EXECUTE STMT USING @lim;
    ->   END;
    -> //
Query OK, 0 rows affected (0.00 sec)

mysql> DELIMITER ;
mysql> CALL names_proc( 3 );
+------+----------+
| id   | name     |
+------+----------+
|    1 | jimjoe   |
|    2 | jimddjoe |
|    3 | jim      |
+------+----------+
3 rows in set (0.00 sec)

Query OK, 0 rows affected (0.01 sec) 
```

# php - 修复 PHP PEAR 错误

> ID：11157763
> 
> 赞同：3
> 
> 时间：2012-06-22T14:04:14.193
> 
> 标签：php, mysql, sql, error-handling

我正在尝试连接到 MYSQL 数据库并且无法连接。我相信它与 PEAR 错误有关，我已经看过这个答案，但它没有用。

[让 PEAR 在 XAMPP 上工作（Windows 上的 Apache/MySQL 堆栈）](https://stackoverflow.com/questions/62658/getting-pear-to-work-on-xampp-apache-mysql-stack-on-windows)

我的代码如下：

```
require 'DB.php';
require 'formhelpers.php';

$db = DB::connect('mysql://root:password@localhost/test');
if (DB::isError($db)) { die("connection error: " . $db->getMessage( )); }
$db->setErrorHandling(PEAR_ERROR_DIE);

//create table for responses 
$q = $db->query(
    "CREATE TABLE apiResponse(
    Name VARCHAR(20),
    Occupation VARCHAR(20)");

//select data to send
$db = DB::connect('mysql://root:password@localhost/test');
$q = $db->query('SELECT Name, Occupation FROM try2 ');
while ($row = $q->fetchRow())
{
$Name = $row[0];
$Occupation = $row[1];

$q = $db->query(
"INSERT INTO apiResponse (Name, Occupation) values ($Name, $Occupation)"
); 
```

我收到以下错误：

警告：require(formhelpers.php) [function.require]：打开流失败：C:\xampp\htdocs\myfiles\Testing API Script.php 中没有这样的文件或目录在第 10 行

致命错误：require() [function.require]：无法在 C:\xampp\htdocs\myfiles\Testing API 脚本中打开所需的 'formhelpers.php' (include_path='.;C:\xampp\php\PEAR')。第 10 行的 php

现在，根据另一个答案，这是寻找 PEAR 的问题。我找到了 php.ini 文件并找到了 include 语句。PHP 对 include_path 的默认设置是“.;/path/to/php/pear”，这就是答案所建议的。

我的问题：

1.  需要修正的文件是xamp中的php.ini文件？（我之前直接从 php.net 下载了 php）

2.  我有一个用于开发和生产的 php.ini……我应该编辑哪一个？

3.  .ini 文件在记事本中打开，我不确定这是编辑它的正确位置。确认？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T17:41:45.753

你之前这么说

> PHP 对 include_path 的默认设置是“.;/path/to/php/pear”，这就是答案所建议的。

您需要将其更改为实际安装路径。我在 Windows 下使用 XAMPP 并没有遇到问题，因为我将我的更改为 .;\xampp\php\PEAR 因为这是 xampp 默认安装 PEAR 的位置。

我还不得不改变一些事情。有关我必须进行的 pear 配置更改的详细信息，请参阅我在[让 PEAR 使用 XAMPP（Windows 上的 Apache/MySQL 堆栈）问题中的回答。](https://stackoverflow.com/questions/62658/getting-pear-to-work-on-xampp-apache-mysql-stack-on-windows)

# web-services - Biztalk、base64 和 Web 服务

> ID：11157769
> 
> 赞同：0
> 
> 时间：2012-06-22T14:04:30.177
> 
> 标签：web-services, hash, base64, biztalk

我有一位客户想从第三方接收以下格式的数据；

```
<?xml version="1.0" encoding="utf-8" ?>
<breakdown>
  <customer_code>34562</customer_code>
  <atc>
    <serial>1234</serial>
    <amount currency="USD">50000.00</amount>
    <quantity unit="bags">300</quantity>
  </atc>
  <atc>
    <serial>1235</serial>
    <amount currency="USD">60000000000.00</amount>
    <quantity unit="bags">600</quantity>
  </atc>
  <atc>
    <serial>1236</serial>
    <amount currency="USD">3500000.00</amount>
    <quantity unit="tonnes">30000</quantity>
  </atc>
  <atc>
    <serial>1237</serial>
    <amount currency="USD">7500000.00</amount>
    <quantity unit="tonnes">50000</quantity>
  </atc>  <signature>hRFUL/6Mf5U=ZLLyXVxOs4gBuOFQ5d7Cx9eBRuzfjy33Bp3IMBAAk5gqActFmhnCAKfcZwCF7xJknBqg4sJMRtJjw+sIaxANuLwATdHfcIADuRoU5gM70KpBWrYQiZs9hiXcQ14O0H41XZfrfun1FTkecLdGOxC4EIYWQcDDq2mtv5/JA/8iSWA=</signature>
</breakdown> 
```

签名值是一个哈希值被转换为base64字符串。

如何将此消息放入 BizTalk 管道以供外部方处理？

我也想知道如何在 biztalk 中解密签名值。

有没有可以使用这些参数向合作伙伴公开的编排？我对 BizTalk 有点陌生，所以如果我的问题听起来很业余，我深表歉意。

谢谢

# mysql - SQL查询以查找与一组类别匹配的产品

> ID：11157772
> 
> 赞同：5
> 
> 时间：2012-06-22T14:04:39.700
> 
> 标签：mysql, performance, indexing

我有 3 个表：产品、类别和 pro_cat_link。一个产品可以通过表 pro_cat_link 链接到一个或多个类别。

我的查询必须回答以下问题：查找与一组类别匹配的所有产品。例如：找到所有“黄色、水果和甜”的产品。

在 SO 中研究这个问题时，我只能找到我目前使用的解决方案： [复杂的 SQL 查询——查找匹配多个不同外键的项目](https://stackoverflow.com/questions/4019343/complicated-sql-query-finding-items-matching-multiple-diferent-foreign-keys)

就我而言，我的查询如下所示：

```
SELECT products.id, COUNT(DISTINCT categories.id) as countCat
FROM products
INNER JOIN pro_cat_link ON (pro_cat_link.product_id = products.id)
WHERE pro_cat_link.category_id IN (3,6,8,10)
GROUP BY product.id
ORDER BY product.date DESC
HAVING countCat = 4 
```

换句话说，选择与类别 id (3,6,8,10) 之一匹配的所有产品，并仅保留恰好匹配 4 个类别的产品。

这很好用，但我遇到了性能问题，因为 COUNT()、GROUP BY、ORDER BY 使得正确的索引非常有限。谁能想到更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:10:25.183

如果您将这些信息存储在某处，则可以消除分组和计数的性能问题。您可以在 Products 中添加一个名为的列，该列`total_categories`将告诉您该产品参与了多少个类别。然后您可以说`where total_categories = 4`. 如果产品经常更改其类别，这可能更难以维护，因为您必须不断正确更新此字段 - 然后您必须决定是否要在应用程序代码或触发器或存储过程中执行此操作...

通常我认为将此类元数据直接存储在表中并不是一个好主意，但如果性能*真的*那么差，可能值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:04:11.480

如果您没有太多类别，而不是跟踪列数，您可以使用一个位串来表示它所在的类别（即，位置 i 处的 1 表示产品在类别 i 中，0 表示不在该类别中）。然后，当搜索一组类别时，您会为该搜索生成一个位串，以及`AND`带有此字符串的所有类别字符串。正确类别中的那些将生成搜索字符串作为答案。

例如，假设您有十个类别。Item1 在类别中`1, 3, 5, 6, 8, 10`，所以它的类别字符串是`1010110101`。Item2 在类别`1, 2, 4, 6, 8, 10`中，因此它的类别字符串是`1010101011`。搜索 3、6、8 和 10 时，您将生成字符串`s = 1010100100`。 `Item1 & s = 1010100100 = s`. `Item2 & s = 1010100000 <> s`.

此外，您不必将其存储为字符串，您可以将其存储为实际的以 10 为底的等效值。所以 Item1、Item2 和 s 分别是 693、683 和 676。 `693 & 676 = 676`，但是`683 & 676 = 672`。然后，如果您将产品添加到类别 i，只需将其类别编号更新 2^(i - 1)，如果您要从类别 i 中删除，只需减去 2^(i - 1)。

当然，如果 MySQL int 中的类别多于位，则根本行不通。此外，正如 FrustratedWithFormsDes 在他的回答中指出的那样，这会引发更新 pro_cat_link 和此表的所有问题（当然，取决于 pro_cat_link 的用途，这可能会完全消除它）。此外，如果类别更改了数字，您必须更新所有内容。

# objective-c - 基于 iOS 页面的应用程序清除颜色问题

> ID：11157782
> 
> 赞同：3
> 
> 时间：2012-06-22T14:05:28.957
> 
> 标签：objective-c, ios, ipad, shadow, uipageviewcontroller

我正在尝试在 iOS 中创建一个基于页面的应用程序，其中实际页面是非矩形图像（包含清晰的颜色）。但是，翻页时出现的阴影似乎并没有忽略图像的透明度（见下文）。

[截图 http://img543.imageshack.us/img543/9730/pagecurl.png](http://img543.imageshack.us/img543/9730/pagecurl.png)

有谁知道是否可以修改这种行为？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T16:01:27.547

您是否尝试过设置`UIPageViewController`' `view`s`frame`以使其位于自定义页面图像定义的边框内？（因此，在您的情况下，适合您的白页图像的最大矩形）

`UIPageViewController`处理具有超出其自身`view`的视图的页面卷曲动画的方式`frame`可以考虑如下：

认为悬垂是刚性的。它不像页面的其余部分那样弯曲，但它确实保持了`UIPageViewController`'s边缘的角度`frame`。如果悬垂（即超出`UIPageViewController`'s的图像或视图的一部分`frame`）很小，那么悬垂动画为刚性（而不是弯曲、灵活的页面）这一事实在视觉上可以忽略不计。

但是，如果没有任何进一步的修改，页面只会在' 的视图框架内开始**触摸时翻转。**`UIPageViewController`但是，如果它可以对白页图像上的任何地方的触摸做出反应会更好。如果您希望页面对另一个视图框架内的触摸做出反应（例如，持有您的白页图像的视图），请尝试以下操作：

```
otherView.gestureRecognizers = myPageViewController.gestureRecognizers; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T18:14:12.597

问题是 iOS 框架会在您为页面指定的视图控制器的整个边界上放置阴影，因此任何透明区域都会看起来有阴影。您可以尝试屏蔽您的视图控制器（`viewController.view.layer.mask`和`viewController.view.layer.masksToBounds`），看看是否有帮助。

希望 Apple 为未来的 iOS 版本改进这个框架。禁用该阴影肯定会很好，或者有办法自己做，但你去吧。

# ms-word - 不支持 PostScript 和 UTF-8 的组合

> ID：11157783
> 
> 赞同：0
> 
> 时间：2012-06-22T14:05:36.477
> 
> 标签：ms-word, postscript

我是 linux 和 antiword 的新手。我想将 word 转换为 PostScript。

我能够创建文件，但 PS 文件未打开。

并且在转换时它会给出错误，例如

“不支持 PostScript 和 UTF-8 的组合”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T20:17:34.330

这个实用程序“antiword”，我发现它的最新版本是 0.37（2005 年 10 月 21 日）附带一些*自述*文件。

它在自己的*历史*文件中解释如下：

> 该名称来自：“针对将 Microsoft(R) Word 文件发送给所有人的人的解毒剂，因为他们认为每个人都运行 Windows(R)，因此运行 Word”。

同一个文件说明了它的当前版本：

> Beta版本，供公众评估。

它还说，在标题*Known Limitations*下：

> [....]
> 2) Antiword 不会显示 Word 文档中包含的所有图像。
> [....]
> 7) PostScript 输出不能与 UTF-8 结合使用。它只能与字符集 ISO-8859-1、ISO-8859-2 和 ISO-8859-5 结合使用。
> 8) Antiword 的错误信息不是很有帮助。

所以你来了。您遇到的行为与记录的完全一样。:-)

@Tushar：还建议阅读随附的*常见问题解答*文档。

# ruby-on-rails - Michael Hartl 的 Ruby on Rails 教程。第 9 章 失败的测试

> ID：11157788
> 
> 赞同：0
> 
> 时间：2012-06-22T14:05:57.117
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

嗨，我是 Rails 的新手，我已经设法完成了 Hartl 的第 9 章。我有 3 次失败的测试来完成本章。

终端返回：

```
sis-macbook-pro:sample_app Lagaspi$ bundle exec rspec spec/
..........................................F...................................FF.

Failures:

1) authentication authorization as non-admin user submitting a DELETE request to the  Users#destroy action 
 Failure/Error: before { delete user_path(user) }
 AbstractController::ActionNotFound:
   The action 'destroy' could not be found for UsersController
 # ./spec/requests/authentication_pages_spec.rb:110:in `block (5 levels) in <top (required)>'

2) delete links as an admin user 
 Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
   expected link "delete" to return something
 # ./spec/requests/user_pages_spec.rb:145:in `block (3 levels) in <top (required)>'

3) delete links as an admin user should be able to delete another user
 Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
 Capybara::ElementNotFound:
   no link with title, id or text 'delete' found
 # (eval):2:in `click_link'
 # ./spec/requests/user_pages_spec.rb:147:in `block (4 levels) in <top (required)>'
 # ./spec/requests/user_pages_spec.rb:147:in `block (3 levels) in <top (required)>'

Finished in 2.87 seconds
81 examples, 3 failures

Failed examples:

rspec ./spec/requests/authentication_pages_spec.rb:111 # authentication authorization as   non-admin user submitting a DELETE request to the Users#destroy action 
rspec ./spec/requests/user_pages_spec.rb:145 # delete links as an admin user 
rspec ./spec/requests/user_pages_spec.rb:146 # delete links as an admin user should be able to delete another user 
```

这是我的 authentication_pages_spec.rb

```
require 'spec_helper'

describe "authentication" do
subject { page }
let(:user) { FactoryGirl.create(:user) }

describe "signin page" do
before { visit signin_path }

it { should have_selector('h1',    text: 'Sign in') }
it { should have_selector('title', text: 'Sign in') }
end

describe "signin" do
before { visit signin_path }

describe "with invalid information" do
  before { click_button "Sign in" }

  it { should have_selector('title', text: 'Sign in') }
  it { should have_selector('div.alert.alert-error', text: 'Invalid') }

  describe "after visiting another page" do
    before { click_link "Home" }
    it { should_not have_selector('div.alert.alert-error') }
  end
 end

describe "with valid information" do
  before { sign_in user }

  it { should have_selector('title', text: user.name) }

  it { should have_link('Users',    href: users_path) }
  it { should have_link('Profile',  href: user_path(user)) }
  it { should have_link('Settings', href: edit_user_path(user)) }
  it { should have_link('Sign out', href: signout_path) }

  it { should_not have_link('Sign in', href: signin_path) }

  describe "followed by signout" do
    before { click_link "Sign out" }
    it { should have_link('Sign in') }
  end
  end
end

describe "authorization" do

describe "for non-signed-in users" do

  describe "when attempting to visit a protected page" do
    before do
      visit edit_user_path(user)
      fill_in "Email",    with: user.email
      fill_in "Password", with: user.password
      click_button "Sign in"
    end

    describe "after signing in" do

      it "should render the desired protected page" do
        page.should have_selector('title', text: 'Edit user')
      end
    end
  end
 end

  describe "in the Users controller" do

    describe "visiting the edit page" do
      before { visit edit_user_path(user) }
      it { should have_selector('title', text: 'Sign in') }
    end

    describe "submitting to the update action" do
      before { put user_path(user) }
      specify { response.should redirect_to(signin_path) }
    end

  describe "visiting the user index" do
      before { visit users_path }
      it { should have_selector('title', text: 'Sign in') }
    end

 end

 describe "as wrong user" do
  let(:wrong_user) { FactoryGirl.create(:user, email: "wrong@example.com") }
  before { sign_in user }

  describe "visiting Users#edit page" do
    before { visit edit_user_path(wrong_user) }
    it { should_not have_selector('title', text: full_title('Edit user')) }
  end

  describe "submitting a PUT request to the Users#update action" do
    before { put user_path(wrong_user) }
    specify { response.should redirect_to(root_path) }
  end
end

describe "as non-admin user" do
  let(:user) { FactoryGirl.create(:user) }
  let(:non_admin) { FactoryGirl.create(:user) }

  before { sign_in non_admin }

  describe "submitting a DELETE request to the Users#destroy action" do
    before { delete user_path(user) }
    specify { response.should redirect_to(root_path) }        
  end
end
end
end 
```

还有我的 user_pages_spec.rb

```
require 'spec_helper'

describe "User pages" do

subject { page }

describe "index" do

let(:user) { FactoryGirl.create(:user) }

before(:all) { 30.times { FactoryGirl.create(:user) } }
after(:all)  { User.delete_all }

before do
  sign_in user
  visit users_path
end

it { should have_selector('title', text: 'All users') }
it { should have_selector('h1',    text: 'All users') }

describe "pagination" do

  it { should have_selector('div.pagination') }

  it "should list each user" do
    User.paginate(page: 1).each do |user|
      page.should have_selector('li', text: user.name)
    end
  end
 end
end

describe "signup page" do
before { visit signup_path }

it { should have_selector('h1',    text: 'Sign up') }
it { should have_selector('title', text: full_title('Sign up')) }
end

describe "profile page" do
let(:user) { FactoryGirl.create(:user) }

before { visit user_path(user) }

it { should have_selector('h1',    text: user.name) }
it { should have_selector('title', text: user.name) }    
end

describe "signup" do

before { visit signup_path }

let(:submit) { "Create my account" }

describe "with invalid information" do
  it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end

  describe "after submission" do
    before { click_button submit }

    it { should have_selector('title', text: 'Sign up') }
    it { should have_content('error') }
  end
end

describe "with valid information" do

  before do
    fill_in "Name",         with: "Example User"
    fill_in "Email",        with: "user@example.com"
    fill_in "Password",     with: "foobar"
    fill_in "Confirmation", with: "foobar"        
  end

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving a user" do
    before { click_button submit }

    let(:user) { User.find_by_email("user@example.com") }

    it { should have_selector('title', text: user.name) }
    it { should have_selector('div.alert.alert-success', text: 'Welcome') }
    it { should have_link('Sign out') }
  end
 end
end

describe "edit" do
let(:user) { FactoryGirl.create(:user) }
before do
  sign_in user
  visit edit_user_path(user)
end

describe "page" do
  it { should have_selector('h1',    text: "Update your profile") }
  it { should have_selector('title', text: "Edit user") }
  it { should have_link('change', href: 'http://gravatar.com/emails') }
end

describe "with invalid information" do
  before { click_button "Save changes" }

  it { should have_content('error') }
  it { should_not have_content('Password digest') }
end

describe "with valid information" do
  let(:new_name) { "New Name" }
  let(:new_email) { "new@example.com" }
  before do
    fill_in "Name",             with: new_name
    fill_in "Email",            with: new_email
    fill_in "Password",         with: user.password
    fill_in "Confirm Password", with: user.password
    click_button "Save changes"
  end

  it { should have_selector('title', text: new_name) }
  it { should have_link('Sign out', href: signout_path) }
  it { should have_selector('div.alert.alert-success') }
  specify { user.reload.name.should  == new_name }
  specify { user.reload.email.should == new_email }
end
end
end

describe "delete links" do

  it { should_not have_link('delete') }

  describe "as an admin user" do
    let(:admin) { FactoryGirl.create(:admin) }
    before do
      sign_in admin
      visit users_path
    end

    it { should have_link('delete', href: user_path(User.first)) }
    it "should be able to delete another user" do
      expect { click_link('delete') }.to change(User, :count).by(-1)
    end
    it { should_not have_link('delete', href: user_path(admin)) }
  end
end 
```

我真的不确定这里出了什么问题，因为我真的试图忠实于教程。有任何想法吗？谢谢西蒙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:30:20.917

因为您收到以下消息：

```
AbstractController::ActionNotFound:
   The action 'destroy' could not be found for UsersController 
```

您必须`destroy`在您的`UsersController`.

```
class UsersController < ApplicationController

  .
  .
  .

  def destroy
    @user = User.find(params[:id])
    @user.destroy
    flash[:success] = 'User was deleted with success.'
    redirect_to users_path
  end
end 
```

并创建能够删除每个用户的链接。

在你的 `app/views/users/index.html.erb' 中，你应该有这样的东西：

```
<% @users.each do |user| %>
<p><%= link_to user.name, user_path(user), method: delete, confirm: 'Are you sure?' %></p>
<% end %> 
```

希望它可以帮助你。

# python - 在 python 中使用 sftp 从远程机器复制文件

> ID：11157789
> 
> 赞同：2
> 
> 时间：2012-06-22T14:06:00.860
> 
> 标签：python, sftp, paramiko

我希望能够在 python 中使用 scp、ssh 或 sftp 从远程机器复制文件。我发现最好的方法是使用 ssh 和 sftp。我一直在尝试使用这个示例来完成我需要做的事情。

```
import paramiko
import os

paramiko.util.log_to_file('logfile.log')

host = "101.102.103.104"
port = 22
transport = paramiko.Transport((host, port))
password = "pass"
username = "user"

sftp = paramiko.SFTPClient.from_transport(transport)

filepath = '~/remote/file'
localpath = '~/local/file'
sftp.get(filepath, localpath)

sftp.close()
transport.close() 
```

当我这样做时，我收到此错误：

```
Traceback (most recent call last):
  File "example.py", line 19, in <module>
    sftp.get(filepath, localpath)
AttributeError: 'NoneType' object has no attribute 'get' 
```

有什么我遗漏或没有正确执行的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:13:28.490

您的用户名和密码已初始化但从未使用过。您需要为您的*传输*对象调用*连接*

 *```
password = "pass"
username = "user"
transport.connect(username = username, password = password) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:14:04.533

[API](http://www.lag.net/paramiko/docs/paramiko.Transport-class.html#__init__)指定您必须提供“类似套接字的对象”才能提供`paramiko.Transport()`元组。我想这就是问题所在。

**更新：** 虽然在文档中另有说明，但元组是可以的。*

# ios - 设置值后如何在 UITextField 中移动光标

> ID：11157791
> 
> 赞同：33
> 
> 时间：2012-06-22T14:06:05.133
> 
> 标签：ios, uitextfield, nsnumberformatter, selectedtext

任何人都可以帮我解决这个问题：我需要实现`UITextField`输入数字。此数字应始终为十进制格式，有 4 位，例如 12.3456 或 12.3400。所以我创建`NSNumberFormatter`了一个帮助我处理小数位的东西。

我将`UITextField`值设置为

`-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string` 方法。我处理输入，使用格式化程序，最后调用`[textField setText: myFormattedValue];`

这工作正常，但这个调用也将光标移动到我的字段的末尾。这是不想要的。例如，我的字段中有 12.3400，光标位于开头，用户键入数字 1。结果值为 112.3400，但光标在末尾移动。我想在用户期望时以光标结束（就在最近添加的数字 1 之后）。有一些关于设置光标的主题，`TextView`但这是`UITextField`. 我还尝试捕获`selectedTextRange`该字段，它可以正确保存光标位置，但在`setText`方法调用之后，它会自动更改并且原点`UITextRange`丢失（更改为当前）。希望我的解释很清楚。

请在这件事上给予我帮助。非常感谢您。

**编辑**：最后，我决定在整个编辑后将功能切换为更改格式，并且效果很好。我通过添加一个选择器来完成它`forControlEvents:UIControlEventEditingDidEnd`。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-02-09T23:37:09.353

更改属性后，在设置 text 属性后`UITextField.text`，任何先前对旧文本的引用`UITextPosition`或`UITextRange`与旧文本关联的对象都将设置为 nil。您需要在设置 text 属性之前存储操作后的文本偏移量。

这对我有用（注意，如果在下面的示例中从 t 中删除任何字符，则必须测试 cursorOffset 是否为 < textField.text.length）：

```
- (BOOL) textField:(UITextField *) textField shouldChangeCharactersInRange:(NSRange) range replacementString:(NSString *) string

{
    UITextPosition *beginning = textField.beginningOfDocument;
    UITextPosition *start = [textField positionFromPosition:beginning offset:range.location];
    UITextPosition *end = [textField positionFromPosition:start offset:range.length];
    UITextRange *textRange = [textField textRangeFromPosition:start toPosition:end];

    // this will be the new cursor location after insert/paste/typing
    NSInteger cursorOffset = [textField offsetFromPosition:beginning toPosition:start] + string.length; 

    // now apply the text changes that were typed or pasted in to the text field
    [textField replaceRange:textRange withText:string];

    // now go modify the text in interesting ways doing our post processing of what was typed...
    NSMutableString *t = [textField.text mutableCopy];
    t = [t upperCaseString];
    // ... etc

    // now update the text field and reposition the cursor afterwards
    textField.text = t;
    UITextPosition *newCursorPosition = [textField positionFromPosition:textField.beginningOfDocument offset:cursorOffset];
    UITextRange *newSelectedRange = [textField textRangeFromPosition:newCursorPosition toPosition:newCursorPosition];
    [textField setSelectedTextRange:newSelectedRange];

    return NO;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-11-25T15:44:54.927

这是快速版本：

```
func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -> Bool {
    let beginning = textField.beginningOfDocument
    let start = textField.positionFromPosition(beginning, offset:range.location)
    let end = textField.positionFromPosition(start!, offset:range.length)
    let textRange = textField.textRangeFromPosition(start!, toPosition:end!)
    let cursorOffset = textField.offsetFromPosition(beginning, toPosition:start!) + string.characters.count

// just used same text, use whatever you want :)
    textField.text = (textField.text! as NSString).stringByReplacingCharactersInRange(range, withString: string)

    let newCursorPosition = textField.positionFromPosition(textField.beginningOfDocument, offset:cursorOffset)
    let newSelectedRange = textField.textRangeFromPosition(newCursorPosition!, toPosition:newCursorPosition!)
    textField.selectedTextRange = newSelectedRange

    return false
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-12-07T17:12:44.250

这是一个 swift 3 版本

```
extension UITextField {
    func setCursor(position: Int) {
        let position = self.position(from: beginningOfDocument, offset: position)!
        selectedTextRange = textRange(from: position, to: position)
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-10-23T13:41:42.010

实际上对我有用的东西非常简单，只使用了 dispatch main async：

```
DispatchQueue.main.async(execute: {
  textField.selectedTextRange = textField.textRange(from: start, to: end)
}) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-22T14:54:09.163

实现此答案中描述的代码：[将光标移动到 UITextField 的开头](https://stackoverflow.com/questions/4180263/moving-the-cursor-to-the-beginning-of-uitextfield)

```
NSRange beginningRange = NSMakeRange(0, 0);
NSRange currentRange = [textField selectedRange];
if(!NSEqualRanges(beginningRange, currentRange))
{
    [textField setSelectedRange:beginningRange];
} 
```

**编辑：**从[这个答案](https://stackoverflow.com/questions/3277538/can-i-select-a-specific-block-of-text-in-a-uitextfield)看来，如果您使用的是 iOS 5 或更高版本，您似乎可以将此代码与您的 UITextField 一起使用。否则，您需要改用 UITextView。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-10T11:44:45.280

Swift X. 防止光标从最后一个位置移动。

```
func textFieldDidChangeSelection(_ textField: UITextField) {
    let point = CGPoint(x: bounds.maxX, y: bounds.height / 2)
    if let textPosition = textField.closestPosition(to: point) {
        textField.selectedTextRange = textField.textRange(from: textPosition, to: textPosition)
    }
} 
```

# objective-c - UITableView Space 3 UITableViewCells 均匀分布在整个设备框架上

> ID：11157794
> 
> 赞同：0
> 
> 时间：2012-06-22T14:06:11.930
> 
> 标签：objective-c, ios, uitableview

我正在编写一个具有嵌套 UITableViews 的视图的应用程序。外部 UITableView 的单元格中的 UITableViews 旋转 90 度，以便它们水平滚动。主 UITableView 中的 UITableViewCell 属于 Horizo​​ntalTableViewCell 类。

```
 UITableView
--------------------------------------------------    
|                |               |               |
|                |               |               | HorizontalTableView
|       >        |       >       |       >       | (contained inside
|                |               |               | UITableView's 
|                |               |               | UITableViewCell)
--------------------------------------------------
|                |               |               |
|                |               |               |
|       >        |       >       |       >       |   |
|                |               |               |  \ /
|                |               |               |   "
--------------------------------------------------
|                |               |               |
|                |               |               |
|       >        |       >       |       >       |
|                |               |               |
|                |               |               |
-------------------------------------------------- 
```

在纵向模式下，我通过在方法中将 Horizo​​ntalTableView 的宽度设置为屏幕宽度，使内容均匀分布`initWithFrame:`。

我想增加 Horizo​​ntalTableView 的单元格的单元格填充，以便当设备旋转到横向模式时，调整 3 个单元格的大小以适应整个屏幕，每个单元格占用相等的空间。

但是，我似乎能达到的最好效果是一个具有相同纵向宽度的 Horizo​​ntalTableView，但通过以下位掩码（来自 Horizo​​ntalTableViewCell 的实现文件）在屏幕中居中：

```
self.horizontalTableView.autoresizingMask = 
    UIViewAutoresizingFlexibleLeftMargin | 
    UIViewAutoresizingFlexibleRightMargin; 
```

这会在 Horizo​​ntalTableView 的两侧产生较大的边距，有效地使单元格居中，但单个单元格的填充保持不变。

关于我将如何做这件事的任何想法？

（请注意，如果使用以下位掩码，则单元格会“从 Horizo​​ntalTableViewCell 的顶部”飞出视图，并且无法再次看到，即使设备旋转回纵向模式也是如此）。

```
self.horizontalTableView.autoresizingMask = UIViewAutoresizingFlexibleWidth; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:44:58.323

我能想到的唯一方法是为横向模式创建另一个视图。将数据放入持有者对象，加载新视图，然后从持有者重新加载数据。

# linux - 将数据从 .xml 文件转换为文本

> ID：11157795
> 
> 赞同：0
> 
> 时间：2012-06-22T14:06:14.890
> 
> 标签：linux

所以我有一个包含大量数据的 XML 文件。我的任务是从 XML 文件中提取“名称”和“描述”信息，以便读出。我已经搞砸了一段时间，我已经成功了一半。

我需要在 XML 文件中提取 `<name> Some Name</name>` 的数据的方式是，描述中的数据是 `<description> The Description </description>` 我所做的是将所有描述提取到文本文件中，但我知道我这样做是硬/不是有效的方式。有任何想法吗？

另外，如果我可以添加一些细节来帮助描述我在做什么，我可以这样做！希望我有效地描述了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:15:30.203

根据有问题的评论，创建一个使用 XPath 提取您感兴趣的节点的 C# 应用程序。

一个很好的教程：http: [//support.microsoft.com/kb/308333](http://support.microsoft.com/kb/308333)

# c# - 如何在没有具体实例的情况下使用反射来获取类型的静态属性的值

> ID：11157796
> 
> 赞同：9
> 
> 时间：2012-06-22T14:06:35.773
> 
> 标签：c#, asp.net, generics, reflection

考虑以下类：

```
public class AClass : ISomeInterface
{
    public static int AProperty
    {
   get { return 100; } 
    }
} 
```

然后我有另一个类如下：

```
public class AnotherClass<T>
   where T : ISomeInterface
{

} 
```

我通过以下方式举例：

```
AnotherClass<AClass> genericClass = new  AnotherClass<AClass>(); 
```

如何在没有 AClass 的具体实例的情况下从我的 genericClass 中获取 AClass.AProperty 的静态值？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T14:10:14.903

Something like

```
typeof(AClass).GetProperty("AProperty").GetValue(null, null) 
```

will do. Don't forget to cast to `int`.

Documentation link: [http://msdn.microsoft.com/en-us/library/b05d59ty.aspx](http://msdn.microsoft.com/en-us/library/b05d59ty.aspx) (they've got example with static properties, too.) But if you know exactly `AClass`, you can use just `AClass.AProperty`.

If you are inside `AnotherClass<T>` for `T = AClass`, you can refer to it as `T`:

```
typeof(T).GetProperty("AProperty").GetValue(null, null) 
```

This will work if you know for sure that your `T` has static property `AProperty`. If there is no guarantee that such property exists on any `T`, you need to check the return values/exceptions on the way.

If only `AClass` is interesting for you, you can use something like

```
if (typeof(T) == typeof(AClass))
    n = AClass.AProperty;
else
    ??? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:14:20.237

首先获取`AnotherClass`实例的通用类型。

然后获取静态属性。

然后获取属性的静态值。

```
// I made this sealed to ensure that `this.GetType()` will always be a generic
// type of `AnotherClass<>`.
public sealed class AnotherClass<T>
{
    public AnotherClass(){
        var aPropertyValue = ((PropertyInfo)
                this.GetType()
                    .GetGenericArguments()[0]
                    .GetMember("AProperty")[0])
            .GetValue(null, null);
    }
} 
```

当然，认识到不可能确保“AProperty”存在，因为接口不适用于静态签名，我将其删除`ISomeInterface`为与解决方案无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:37:58.960

确保你绑定了你想要的标志 [http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags](http://msdn.microsoft.com/en-us/library/system.reflection.bindingflags)

# javascript - 测试从某些 JavaScript 返回 JSON 的 ASP.NET Web 服务的最简单方法？

> ID：11157802
> 
> 赞同：4
> 
> 时间：2012-06-22T14:06:43.100
> 
> 标签：javascript, jquery, asp.net, json

我们有一个返回 JSON 数据的 .asmx 服务。有人可以指出一个简单的示例，该示例从带有 JavaScript 的页面调用服务吗？Tks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:09:31.860

您可以使用 jQuery 的 get 函数。

```
var dataID = $('#WhatINeedForAParameter').val();
$.get('WebApiAddress/MethodName', { id: dataID }, 
   function(data) {
     alert(data);
     // Since your method returns a JSON object you can access
     // the properties of that object
     alert(data.id);
     alert(data.name);
}); 
```

或者，如果您想使用长手 jQuery ajax，您可以执行以下操作：

```
var dataID = $("#WhatINeedForAParameter").val();
var request = $.ajax({
  url: "WebApiAddress/MethodName",
  type: "POST",
  data: { id : dataID },
  dataType: "jsonp"
});

request.done(function(msg) {
  alert('You got this ' + msg);
});

request.fail(function(jqXHR, textStatus) {
  alert( "Your request failed: " + textStatus );
}); 
```

# d3.js - 通过下拉框为某些可视化指定 json 文件

> ID：11157806
> 
> 赞同：2
> 
> 时间：2012-06-22T14:06:51.530
> 
> 标签：d3.js

我最近开始尝试使用 d3.js 进行可视化。我在 JS 或 Web 脚本方面没有太多背景，所以很抱歉，如果这是我要问的一件简单的事情。

确切的例子并不重要。我正在制作一个图表，像[这样](http://mbostock.github.com/d3/ex/force.html)

我希望页面上有一个列出不同数据源的下拉菜单。然后用户可以选择数据源并且图表会更新。

[我使用此处](http://www.idocs.com/tags/linking/linking_famsupp_137.html)的示例创建了一个下拉菜单。但是，我不确定如何获得价值，因为我需要这条线

```
d3.json("miserables.json", function(json) { 
```

用新名称更新。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T19:04:21.273

您的 html 文件应如下所示...

```
<select id="json_sources" name="json_sources">
    <option value ="source1.json" selected>Source 1</option>
    <option value ="source2.json">Source 2</option>
    <option value ="source3.json">Source 3</option>
</select>​ 
```

`change`然后为select 元素上的事件添加一个事件侦听器（`.on`在 d3.js 中）：

```
var dropdown = d3.select("#json_sources")
var change = function() {
  var source = dropdown.node().options[dropdown.node().selectedIndex].value;
  d3.json(source, function(json) {
     //continue doing stuff here.
  })
}

dropdown.on("change", change)
change(); //trigger json on load 
```

# javascript - 哪个逻辑运算符优先

> ID：11157814
> 
> 赞同：60
> 
> 时间：2012-06-22T14:07:01.233
> 
> 标签：javascript, if-statement, logic, operator-precedence

因此，我正在考虑在 if-else 语句中使用逻辑运算符编写稍微复杂的操作。我知道我可以做括号，而且我知道这是更好的方法，但我很好奇，所以我要问。如果我要做这样的事情：

```
if (firstRun == true || selectedCategory != undefined && selectedState != undefined) {
//Do something
} else {
//Do something else
} 
```

不使用括号将如何操作？我知道逻辑运算符有一个操作顺序，类似于 PEMDAS，对吧？我很好奇它是否会像这样运行：

```
firstRun == true || (selectedCategory != undefined && selectedState != undefined) 
```

或者，如果“或”运算符优先，它最终会变成这样：

```
(firstRun == true || selectedCategory != undefined) && selectedState != undefined 
```

如果您可以在某处找到完整的列表，那么它的操作顺序会很好。谢谢！

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-22T14:10:17.057

我的经验法则基本上涵盖了条件语句所有用例的 99%，它是：

1.  分组：`()`
2.  会员访问`. or [...]`
3.  不是：`!`
4.  比较，例如`< , >= , === , !=, ...`
5.  逻辑与`&&`
6.  逻辑或`||`

MDN 为您提供详尽的细分：[Javascript Operator Precedence](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)

所以对于你的例子：

```
(firstRun == true || selectedCategory != undefined && selectedState != undefined) 
```

等于

```
(firstRun == true) || ((selectedCategory != undefined) && (selectedState != undefined)) 
```

对于比上述情况更复杂的情况，无论如何我都会考虑重构代码以提高可读性！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2014-12-05T11:30:59.180

这有一个很好的经验法则。将这些运算符视为数学运算符：

*   `AND`是乘法（例如`0 * 1 = 0 => FALSE`）
*   `OR`正在添加（例如`0 + 1 = 1 => TRUE`）

当你记住这一点时，你只需要知道乘法总是*在*加法之前。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-22T14:11:25.720

请参阅[此图表了解优先级](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)。

我不打算解释会发生什么，因为下一个阅读您的代码的人会想：“WTF？这样做是应该的吗？”

因此，更好的解决方案是将术语括在括号中，**即使您知道优先级，正确应用它*并且*代码有效**

这遵循了古老的智慧，即你不应该仅仅因为你能做到就去做你能做的一切。时刻关注后果。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-22T14:10:41.283

[https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)

`&&`是 before `||`，所以你的表达相当于：

```
firstRun == true || (selectedCategory != undefined && selectedState != undefined) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T14:11:15.300

这将是第一个：

```
firstRun == true || (selectedCategory != undefined && selectedState != undefined) 
```

作为大多数编程语言的一般规则，并且具有更高的优先级

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T15:02:08.830

虽然逻辑运算符优先级实际上并未在[ECMAScript 规范](http://www.ecmascript.org/docs/tc39-2009-043.pdf)中定义，但[MDN](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Operator_Precedence)在这方面做得非常好，甚至为[逻辑运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)提供了一个单独的页面。

我想我担心的是，由于 ECMAScript 规范中实际上并未定义逻辑运算符优先级，因此每个单独的浏览器供应商可能会有所不同（我在与您交谈，Internet Explorer！）所以 YMMV。

如果有人想在不同的浏览器上对此进行测试，这里有一个测试用例小提琴：http: [//jsfiddle.net/HdzXq/](http://jsfiddle.net/HdzXq/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-25T18:11:02.210

我知道这是一篇旧帖子，但我想知道是否应该颠倒顺序。我一直认为 or 语句中要求更高的一半应该放在最前面，因为它不太可能通过：

克里斯托夫的正确回应：

`(firstRun == true) || ((selectedCategory != undefined) && (selectedState != undefined))`

它实际上应该写成吗？：

`((selectedCategory != undefined) && (selectedState != undefined) || firstRun == true))`

我觉得在第一个例子中你很有可能永远不会进入下半场。

让我知道你的想法。

# html - 报告表单提交错误和可访问性

> ID：11157823
> 
> 赞同：1
> 
> 时间：2012-06-22T14:07:26.320
> 
> 标签：html, accessibility

帖子提交 URL 如下所示：

```
default.cfm?fuseaction=Seasons.edit&sid=2569#errors 
```

我为我的错误添加了一个内部锚点。代码如下所示：

```
<a name="errors"/>
<div id="errors">
    <p>An error has occured:</p>
    <ul>    
        <li><label for="name">Missing or invalid season name, click to jump there</label></li>
    </ul>
</div>

<form action="#errors" id="gronk" method="post">
<fieldset>      
<legend>Edit Season</legend>

<div class="row">
    <span class="cell">
        <label for="name"><span class="required">*&nbsp;</span>Season name<span class="wcag_hide"> Required string</span></label>
        <input type="text" name="name" id="name" class="formFields" value="" />
    </span>
</div>
... 
```

这是使错误报告可访问的有效方法吗？

我曾想过把它改为，但我相信它只适用于 IE：

```
...
<li><a href="#name">Missing or invalid season name, click to jump there</a></li>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T15:27:18.393

不，不是。一个表单元素只能有一个标签。你的第二种方法更好，但我会删除“点击跳转”部分。

更改您的链接以`<a href="#name" tabindex="-1">....</a>`使其正常工作。我认为 Chrome 仍然存在页内链接问题，但这超出了我们的控制范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:55:12.647

我认为在返回有错误的表单的情况下，您想要的主要是：

1.  将用户的浏览器聚焦到有错误的输入
2.  提醒您的用户存在错误以及导致错误的原因（例如无效的电子邮件）

所以可能，与其将用户带回**default.cfm#errors** ，不如将它们集中在第一个出现错误的字段上——例如，将它们带回**default.cfm#name**并将错误消息注入字段标签：

```
<li>
    <label for="name"><span title="Error">Missing or invalid season name. Please enter a </span>Season name</label>
    <input id="name" name="name" type="text"/>
</li> 
```

然后，这给出了错误和字段本身之间的语义联系。

此外，即使在遇到错误之前，在标签中包含一些文本以指定该字段必须以开头也很有用。虽然星号是一个很好的视觉线索，但在使用屏幕阅读器时可能不会那么强烈。

在这些类型的场景中，您可以创建一个将文本内容隐藏在屏幕外的类（不是 display:none，因为这也会被屏幕阅读器忽略），以便为用户提供更多上下文信息，例如：

```
<label for="name">Season name *<span class="contextInfo">(this is a required field)</span>:</label> 
```

最主要的是使用实际的屏幕阅读器进行测试。虽然您不会获得与盲人用户相同的体验（因为您不会习惯用它浏览，这可能看起来很奇怪），但您会被提醒什么是读出的和没有读出的。

[NVDA](http://www.nvda-project.org)是一款开源屏幕阅读器，而[JAWS](http://www.freedomscientific.com/downloads/demo/FS-demo-downloads.asp)是最受欢迎的一款，提供试用版。你不能用真实的东西打败测试。

# node.js - 如何从快递服务器动态向客户端发送新号码

> ID：11157825
> 
> 赞同：1
> 
> 时间：2012-06-22T14:07:32.453
> 
> 标签：node.js, client-server, express, ejs

在快递服务器我有这个。

```
app.dynamicHelpers({
    dynamicValue: function(req, res) {
        console.log("returning a new value");
        return parseInt(Math.random() * 100);

    }

}); 
```

在客户端我有这个。

```
setInterval(function() {
        alert(<%= dynamicValue %>);
        }
        ,1000); 
```

所以每一秒，应该显示一个新的数字。

但事实并非如此。页面加载时会生成一个新号码，但客户端看到的号码始终相同，除非重新加载页面。

如何改变它来做它应该做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:19:41.283

您在这里混合了服务器代码和客户端代码。该语句`<%= dynamicValue %>`将值呈现到页面上的脚本中：

```
setInterval(function() {
  alert(<%= dynamicValue %>);
}
,1000); 
```

变成

```
setInterval(function() {
  alert(82.9090561);
}
,1000); 
```

该脚本稍后由浏览器解释。浏览器无法访问“服务器脚本代码库”。

为了在客户端上进行这项工作，您需要包含在页面上创建随机数的特定脚本：

```
<script type="text/javascript" src="dynamic.js" />

<script type="text/javascript">
  setInterval(function() {
    alert(smth.dynamicValue());
  }
  ,1000);
</script> 
```

# c# - LINQ 计数和按不同列分组

> ID：11157827
> 
> 赞同：1
> 
> 时间：2012-06-22T14:07:48.910
> 
> 标签：c#, linq, datatable

id'喜欢计算用户编辑或创建的文档数量。因此我有一个包含信息的数据表。像这样：

```
Input
DocumentName | ModifiedBy | CreatedBy
 a              Frank         Frank
 b              Mike          Frank
 c              John          Mike 
```

那应该是输出：

```
Name   DocumentsModified(Total)  DocumentsCreated(Total)
Frank      1                        2
Mike       1                        1
John       1                        0 
```

因此，计算一个人编辑的所有文档的方法如下

```
var query = from queryResult in resultTable.AsEnumerable()
group queryResult by queryResult.Field<string>("ModifiedBy") into rowGroup
select new 
{
    Name = rowGroup.Key, ModifiedDocuments = rowGroup.Count()
}; 
```

这工作正常。现在我还必须计算“Creator”列的值。这可能吗？如果可以，我该怎么做？好的，我可以遍历表，但最好在 LinQ 查询中完成此操作。

我尝试使用“group queryResult by new {}”，但我不确定我是否走在正确的轨道上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T15:19:43.317

你不能用同样的方法`CreatedBy`吗？

```
var query2 = from queryResult in resultTable.AsEnumerable()
group queryResult by queryResult.Field<string>("CreatedBy") into rowGroup
select new 
{
    Name = rowGroup.Key, ModifiedDocuments = rowGroup.Count()
}; 
```

然后使用按名称排序的 2 个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:27:50.247

最好的办法是分别查询创建和修改，然后将结果与连接结合起来。

```
var modifiedCount = from queryResult in resultTable.AsEnumerable()
group queryResult by queryResult.Field<string>("ModifiedBy") into rowGroup
select new 
{
    Name = rowGroup.Key, ModifiedDocuments = rowGroup.Count()
};

var createdCount = from queryResult in resultTable.AsEnumerable()
group queryResult by queryResult.Field<string>("CreatedBy") into rowGroup
select new 
{
    Name = rowGroup.Key, CreatedDocuments = rowGroup.Count()
};

var finalResult = from first in modifiedCount 
                  join second in createdCount
                  on first.Name equal second.Name
                  select new 
                  {
                     first.Name,
                     first.ModifiedDocuments,
                     second.CreatedDocuments 
                  }; 
```

# android - 发送 USSD 代码 Android

> ID：11157828
> 
> 赞同：3
> 
> 时间：2012-06-22T14:07:50.033
> 
> 标签：android, ussd

我正在尝试通过我的手机发送 USSD 代码，所以我使用了这里许多人建议的意图是发送代码的方式。不幸的是，每次我发送代码时，它都会发送相同的号码 *4355696753

我用来发送 USSD 的代码是：

```
sendCode.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String cUssd = ussdCodeEdTxt.getText().toString();
            String cToSend = "tel:*" + cUssd + Uri.encode("#");
            startActivityForResult(new Intent("android.intent.action.CALL",
                       Uri.parse(cToSend)), 1);

        }
    }); 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-11T08:27:33.910

我想你可能也需要使用`Uri.encode("*")`星号

```
sendCode.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String cUssd = ussdCodeEdTxt.getText().toString();
            String cToSend = "tel:" + Uri.encode("*") + cUssd + Uri.encode("#");
            startActivityForResult(new Intent("android.intent.action.CALL",
                       Uri.parse(cToSend)), 1);
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-03T04:11:19.937

虽然这是一个旧帖子，但是对于那些面临同样问题的人来说试试这个`Uri.fromParts("tel", number eg = *222# , "#");`

# c# - 使用 Microsoft.Office.Interop.Word dll 将存储在数据库中的 Rtf 文本渲染为字节

> ID：11157829
> 
> 赞同：0
> 
> 时间：2012-06-22T14:07:55.333
> 
> 标签：c#, asp.net

我将 Windows RichTextBox 控件中的 Rtf 文本作为字节存储到数据库中。

我想使用 Microsoft.Office.Interop.Word dll 将存储在数据库中的 Rtf 数据呈现给 Word。

如何将 Rtf 数据呈现到工作文档中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:24:33.077

甚至 Microsoft 也不建议在 ASP.NET 中使用 Office 自动化（请参阅[此](http://support.microsoft.com/kb/257757)MSDN 参考）。

[您可以使用此处](http://www.microsoft.com/downloads/en/details.aspx?FamilyId=C6E744E5-36E9-45F5-8D8C-331DF206E0D0&displaylang=en)找到的 OOXML 库。还有（不是免费的）[Aspose.words](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)。

# python - SQLite 在时区支持处于活动状态时收到了一个简单的日期时间

> ID：11157834
> 
> 赞同：1
> 
> 时间：2012-06-22T14:08:06.443
> 
> 标签：python, sql, datetime, timezone

在 python 中运行我的 sql 时出现以下错误

```
/usr/lib/python2.6/site-packages/django/db/backends/mysql/base.py:64: RuntimeWarning: SQLite received a naive datetime (2012-06-22 15:53:43) while time zone support is active. 
```

我的查询也返回了错误的数据。如果我将时间更改为 2 小时（17:53:43 而不是 15:53:43），我的时区 atm 是 gmt +2 所以我认为问题出在时区。

如何更改我的查询以使 sql 以我想要的方式执行？

sql：

```
sqlQuery = """SELECT w.id, w.serial, w.finishdate, w.weighingtype_id, w.netto, w.bruto, w.deleted
    FROM weighing w
    LEFT JOIN weighing w1
    ON w1.id = w.parent_id 
    WHERE w.user_id = %(userid)s"""
if date:
    sqlQuery = sqlQuery + " AND (w.created = %(date)s OR w.modified > %(date)s)" 
```

编辑：添加了我用于转换日期时间的代码

```
data = request.GET.copy()
if 'date' in data:
    try:
        data['date'] = datetime.datetime.strptime(data['date'], "%Y-%m-%dT%H:%M:%S")
    except:
        raise error(311) 
```

# c# - 使用 iTextSharp 将 Gridview 模板字段转换为 PDF

> ID：11157835
> 
> 赞同：0
> 
> 时间：2012-06-22T14:08:07.250
> 
> 标签：c#, asp.net, vb.net, itextsharp

我有一个 gridview，我正在使用 iTextSharp 将其转换为 PDF。我一直在关注这篇[文章](https://stackoverflow.com/a/10463624/1467598)中的方法。

由于我使用的是 VB.net，我已经更改了所有 C# 代码，但我一直遇到一行问题。

```
if (gvReport.Columns[columnNo] is TemplateField) 
```

我不知道如何在 VB.net 中编写这一行，并且由于我的 gridview 中有一些模板字段（用于格式化），它们在 PDF 中显示为空白。

如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:17:25.320

您可以随时使用此网站：[http ://converter.telerik.com/](http://converter.telerik.com/)

```
If TypeOf gvReport.Columns(columnNo) Is TemplateField Then 
```

实际上，这是适合您的整个方法：

```
Protected Sub ExportToPDF(gvReport As GridView, LandScape As Boolean)
Dim noOfColumns As Integer = 0, noOfRows As Integer = 0
Dim tbl As DataTable = Nothing

If gvReport.AutoGenerateColumns Then
    tbl = TryCast(gvReport.DataSource, DataTable)
    ' Gets the DataSource of the GridView Control.
    noOfColumns = tbl.Columns.Count
    noOfRows = tbl.Rows.Count
Else
    noOfColumns = gvReport.Columns.Count
    noOfRows = gvReport.Rows.Count
End If

Dim HeaderTextSize As Single = 8
Dim ReportNameSize As Single = 10
Dim ReportTextSize As Single = 8
Dim ApplicationNameSize As Single = 7

' Creates a PDF document

Dim document As Document = Nothing
If LandScape = True Then
    ' Sets the document to A4 size and rotates it so that the     orientation of the page is Landscape.
    document = New Document(PageSize.A4.Rotate(), 0, 0, 15, 5)
Else
    document = New Document(PageSize.A4, 0, 0, 15, 5)
End If

' Creates a PdfPTable with column count of the table equal to no of columns of the gridview or gridview datasource.
Dim mainTable As New iTextSharp.text.pdf.PdfPTable(noOfColumns)

' Sets the first 4 rows of the table as the header rows which will be repeated in all the pages.
mainTable.HeaderRows = 4

' Creates a PdfPTable with 2 columns to hold the header in the exported PDF.
Dim headerTable As New iTextSharp.text.pdf.PdfPTable(2)

' Creates a phrase to hold the application name at the left hand side of the header.
Dim phApplicationName As New Phrase("Sample Application", FontFactory.GetFont("Arial", ApplicationNameSize, iTextSharp.text.Font.NORMAL))

' Creates a PdfPCell which accepts a phrase as a parameter.
Dim clApplicationName As New PdfPCell(phApplicationName)
' Sets the border of the cell to zero.
clApplicationName.Border = PdfPCell.NO_BORDER
' Sets the Horizontal Alignment of the PdfPCell to left.
clApplicationName.HorizontalAlignment = Element.ALIGN_LEFT

' Creates a phrase to show the current date at the right hand side of the header.
Dim phDate As New Phrase(DateTime.Now.[Date].ToString("dd/MM/yyyy"), FontFactory.GetFont("Arial", ApplicationNameSize, iTextSharp.text.Font.NORMAL))

' Creates a PdfPCell which accepts the date phrase as a parameter.
Dim clDate As New PdfPCell(phDate)
' Sets the Horizontal Alignment of the PdfPCell to right.
clDate.HorizontalAlignment = Element.ALIGN_RIGHT
' Sets the border of the cell to zero.
clDate.Border = PdfPCell.NO_BORDER

' Adds the cell which holds the application name to the headerTable.
headerTable.AddCell(clApplicationName)
' Adds the cell which holds the date to the headerTable.
headerTable.AddCell(clDate)
' Sets the border of the headerTable to zero.
headerTable.DefaultCell.Border = PdfPCell.NO_BORDER

' Creates a PdfPCell that accepts the headerTable as a parameter and then adds that cell to the main PdfPTable.
Dim cellHeader As New PdfPCell(headerTable)
cellHeader.Border = PdfPCell.NO_BORDER
' Sets the column span of the header cell to noOfColumns.
cellHeader.Colspan = noOfColumns
' Adds the above header cell to the table.
mainTable.AddCell(cellHeader)

' Creates a phrase which holds the file name.
Dim phHeader As New Phrase("Sample Export", FontFactory.GetFont("Arial", ReportNameSize, iTextSharp.text.Font.BOLD))
Dim clHeader As New PdfPCell(phHeader)
clHeader.Colspan = noOfColumns
clHeader.Border = PdfPCell.NO_BORDER
clHeader.HorizontalAlignment = Element.ALIGN_CENTER
mainTable.AddCell(clHeader)

' Creates a phrase for a new line.
Dim phSpace As New Phrase(vbLf)
Dim clSpace As New PdfPCell(phSpace)
clSpace.Border = PdfPCell.NO_BORDER
clSpace.Colspan = noOfColumns
mainTable.AddCell(clSpace)

' Sets the gridview column names as table headers.
For i As Integer = 0 To noOfColumns - 1
    Dim ph As Phrase = Nothing

    If gvReport.AutoGenerateColumns Then
        ph = New Phrase(tbl.Columns(i).ColumnName, FontFactory.GetFont("Arial", HeaderTextSize, iTextSharp.text.Font.BOLD))
    Else
        ph = New Phrase(gvReport.Columns(i).HeaderText, FontFactory.GetFont("Arial", HeaderTextSize, iTextSharp.text.Font.BOLD))
    End If

    mainTable.AddCell(ph)
Next

' Reads the gridview rows and adds them to the mainTable
For rowNo As Integer = 0 To noOfRows - 1
    For columnNo As Integer = 0 To noOfColumns - 1
        If gvReport.AutoGenerateColumns Then
            Dim s As String = gvReport.Rows(rowNo).Cells(columnNo).Text.Trim()
            Dim ph As New Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL))
            mainTable.AddCell(ph)
        Else
            If TypeOf gvReport.Columns(columnNo) Is TemplateField Then
                Dim lc As DataBoundLiteralControl = TryCast(gvReport.Rows(rowNo).Cells(columnNo).Controls(0), DataBoundLiteralControl)
                Dim s As String = lc.Text.Trim()
                Dim ph As New Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL))
                mainTable.AddCell(ph)
            Else
                Dim s As String = gvReport.Rows(rowNo).Cells(columnNo).Text.Trim()
                Dim ph As New Phrase(s, FontFactory.GetFont("Arial", ReportTextSize, iTextSharp.text.Font.NORMAL))
                mainTable.AddCell(ph)
            End If
        End If
    Next

    ' Tells the mainTable to complete the row even if any cell is left incomplete.
    mainTable.CompleteRow()
Next

' Gets the instance of the document created and writes it to the output stream of the Response object.
PdfWriter.GetInstance(document, Response.OutputStream)

' Creates a footer for the PDF document.
Dim pdfFooter As New HeaderFooter(New Phrase(), True)
pdfFooter.Alignment = Element.ALIGN_CENTER
pdfFooter.Border = iTextSharp.text.Rectangle.NO_BORDER

' Sets the document footer to pdfFooter.
document.Footer = pdfFooter
' Opens the document.
document.Open()
' Adds the mainTable to the document.
document.Add(mainTable)
' Closes the document.
document.Close()

Response.ContentType = "application/pdf"
Response.AddHeader("content-disposition", "attachment; filename= SampleExport.pdf")
Response.[End]() 
```

结束子

# iphone - 如何在 xcode 4.3 开发的 xcode 3.1 中运行 xcode 项目？

> ID：11157839
> 
> 赞同：1
> 
> 时间：2012-06-22T14:08:25.010
> 
> 标签：iphone, ios, xcode4.2, compatibility, xcode3.2

我在 Virtual box 的帮助下在 Windows 7 PC 上安装了 Mac OS X Snow Leopard 10.6.2。我已经安装了 Xcode 3.1，因为它是 Mac OS X 10.6.2 上 Xcode 的兼容版本。

在 Xcode 4.3 开发的 Xcode 3.1 中运行 Xcode 项目时，我遇到很多错误。

有什么方法可以使代码在 xcode 3.1 上兼容，或者至少将 xcode 3.1 升级到 Mac OS X 10.6.2 支持的 xcode 4.3（附近）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:21:49.537

如果您在[http://developer.apple.com/ios](http://developer.apple.com/ios)使用您的开发者帐户登录，您会看到有一个指向“Xcode 4.2 for Snow Leopard”的链接。那正是你想要的。Xcode 3.1 已经过时了，并且不包含任何当前的 SDK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T02:29:22.000

自从您发布此内容以来已经有一段时间了，所以我希望您或其他人觉得这很有用。我在 VirtualBox 上运行 Mac OS X Snow Leopard 时遇到了同样的问题，并且无法运行高于 3.1 的 Xcode 版本。我的理解是，将 Mac OS 作为 VM 运行不允许您运行标准的内置升级实用程序来升级 OS。

此处记录了对我有用的解决方案[How to install Snow Leopard Hackintosh in Virtualbox](http://www.macbreaker.com/2012/02/snow-leopard-virtualbox.html)。

下面的方法很老套，没有经过任何彻底的测试。使用这些说明需要您自担风险。

首先您将升级 Mac OS Snow Leopard 然后您将安装 Xcode 4.2 您需要的步骤如下：

1.  拍摄 Mac OS VM 的快照以防万一
2.  在 google 上搜索“10.6.7 组合更新”（将版本号替换为您需要的版本号）
3.  从苹果官方网站下载组合更新并运行
4.  完成安装（不要重新启动）
5.  谷歌“10.6.7 legacy kernel”并下载与combo更新相同版本号的替换版本号（文章作者建议通过nawcom查找内核）
6.  安装旧内核
7.  重新启动 Mac OS 并且您的升级应该完成（注意：当我重新启动时，启动过程中出现的旋转轮在一两分钟后停止。我不得不用 VirtualBox 强制重新启动 VM，它似乎已正确更新）
8.  在 Snow Leopard 中单击右上角的时间/日期，然后单击“日期和时间首选项”
9.  取消勾选“自动设置日期和时间”
10.  将日期更改为 2012 年 1 月 1 日（这是因为在安装期间检查了过期的证书检查）
11.  谷歌“xcode_4.2_and_ios_5_sdk_for_snow_leopard.dmg”，下载并安装
12.  安装后，您现在应该拥有 Xcode 4.2 的工作副本。

# php - 正确的编码/PHP 字符串操作

> ID：11157840
> 
> 赞同：0
> 
> 时间：2012-06-22T14:08:28.140
> 
> 标签：php, string, encoding

所以我刚刚创建了一个简单的表单供同事提交故事/文章，我让它通过 mail() 函数将它作为电子邮件发送给我。

现在，我的大多数同事都在用 Word 写作，然后复制/粘贴到提交表单。

有时，他们在文本中使用项目符号和撇号，这是抛出奇怪的符号。

现在，我对编码不太熟悉（我知道基础知识，比如 UTF-8 有几个不同的位，具体取决于所讨论的语言）

我的问题是 - 我如何正确编码输入，以便将这些符号替换为正确的符号（在项目符号的情况下，我可能必须编写一个添加`<li>`和`</li>`标记的正则表达式），但是撇号呢？

有没有公​​认的方法来做到这一点？如果您愿意，我可以提供代码，但这都是通过 POST 和使用 mail() 函数提交的非常简单的表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:15:26.747

[尝试使用http://php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)清理输入`htmlspecialchars`

# css - 向下滚动页面时，div 没有更新其 100% 高度？

> ID：11157843
> 
> 赞同：1
> 
> 时间：2012-06-22T14:08:39.803
> 
> 标签：css, position, height

我有一个 div 设置`height:100%;`和定位使用`position:absolute`它一切正常，但是当 div 的内容导致它离开页面并强制它滚动时，div 不会更新它的高度。

我做了一个 jsfiddle 来显示问题[http://jsfiddle.net/jw8Qc/3/](http://jsfiddle.net/jw8Qc/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:10:48.990

Set your `height` property to `auto` or try to use `min-height: auto` and it should works.

**Note:** But with `min-height` property i'm not sure with its compatibility.

Also here is i think problem with `min-height` in `IE` especially in `IE 9`.

**EDIT:**

```
.slide-out {
   position:absolute; 
   top:0; 
   left:155px; 
   width:375px; 
}

.slide-cont {
   background:#000;
   margin:20px;
   height: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:10:17.367

Try using min-height:100% instead of height:100%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-19T11:50:35.083

. 滑出 { 位置：绝对；顶部：0；左：155px；宽度：375px；} .slide-cont { 背景：#000; 边距：20px；高度：自动；}

# ios5 - 从 UITableViewCells 更新 UITextFields 而无需重新加载数据

> ID：11157847
> 
> 赞同：2
> 
> 时间：2012-06-22T14:09:00.970
> 
> 标签：ios5, uitableview, ios4, uitextfield

我有一个`UITableView`with custom `UITableViewCells`，他们每个人都有一个`UITextField`. 我为每个 textField 分配一个带有 value : 的标签`indexPath.row + 100`。

好吧，当我在特定的文本字段中键入内容时，我想更新每个单元格的每个文本字段。更清楚地说，当我输入一个数字时，我的视图控制器应该进行一些计算，然后将结果分配给所有其他文本字段，并且每次从 textField 修改文本时都必须这样做，假设我输入了 1（进行一些计算和assing result to textFields) ，然后我输入 2 ，现在要计算的数字将是 12 等等。

问题是我可以在不关闭键盘的情况下从 tableView 重新加载数据。系统会自动隐藏 UIKeyboard ，所以这种情况下 reloaddata 不起作用。

我尝试使用 NSMutableArray 来存储所有这些文本字段，但是当从 cellForRowAtIndexPath 添加它们时，它们会得到很多。

我怎样才能正确更新所有这些`UITextFields`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:47:09.243

它只需要更新可见单元格，而不是全部。假设内容计算公式非常简单：

```
-(NSString*) textForRowAtIndex:(int)rowIndex
{
    return [NSString stringWithFormat:@"%d", startRowValue + rowIndex];
} 
```

每个单元格都包含`UITextField`带有标签的对象`indexPath.row + 100`：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString* cellId = @"cellId";
    UITableViewCell* cell = [tableView dequeueReusableCellWithIdentifier:cellId];
    if(!cell)
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellId] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
        UITextField* tf = [[[UITextField alloc] initWithFrame:CGRectMake(10, 8, 280, 30)] autorelease];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(textFieldTextDidChange:) 
                                                     name:UITextFieldTextDidChangeNotification object:tf];
        tf.delegate = (id)self;
        [cell.contentView addSubview:tf];
    }

    UITextField* tf = (UITextField*)[[cell.contentView subviews] lastObject];
    tf.tag = indexPath.row + 100;
    tf.text = [self textForRowAtIndex:indexPath.row];

    return cell;
} 
```

然后所有可见单元格都将在`textFieldTextDidChange:`方法中更新：

```
-(void) textFieldTextDidChange:(NSNotification*)notification
{
    UITextField* editedTextField = (UITextField*)[notification object]; 
    int editedRowIndex = editedTextField.tag - 100;
    int editedValue = [editedTextField.text intValue];
    startRowValue = editedValue - editedRowIndex;

    for (NSIndexPath* indexPath in [self.tableView indexPathsForVisibleRows])
    {
        if(indexPath.row != editedRowIndex)
        {
            UITableViewCell* cell = [self.tableView cellForRowAtIndexPath:indexPath];
            UITextField* textField = (UITextField*)[cell.contentView viewWithTag:indexPath.row+100];
            textField.text = [self textForRowAtIndex:indexPath.row];
        }
    }
} 
```

让我们有 50 个单元格：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 50;
} 
```

并在完成编辑时隐藏键盘：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    [textField resignFirstResponder];
    return YES;
} 
```

享受！

# google-chrome - 如何在 Chrome 中从当前位置开始搜索

> ID：11157848
> 
> 赞同：4
> 
> 时间：2012-06-22T14:09:03.910
> 
> 标签：google-chrome

在 Chrome 网络浏览器中，如果您位于网页中间的某个位置，然后单击此处以指示您所在的位置，然后使用 ctrl-f 开始搜索字符串，则搜索始终从网页的开头开始。我以前主要使用 Firefox，所以这让我感到惊讶，因为在 Firefox 中，这按预期工作 - 搜索从您单击的位置开始。有没有办法从 Chrome 获得相同的行为？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:12:08.967

nope, but it is requested: [https://productforums.google.com/forum/?fromgroups#!topic/chrome/h9cZN8WOBhw](https://productforums.google.com/forum/?fromgroups#!topic/chrome/h9cZN8WOBhw) I suggest you second the request. Edit: third it

# python - Python列表到XML，反之亦然

> ID：11157853
> 
> 赞同：4
> 
> 时间：2012-06-22T14:09:15.503
> 
> 标签：python, xml, labview

我编写了一些 python 代码，用于将 python 列表转换为 XML 元素。它用于与 LabVIEW 交互，因此是奇怪的 XML 数组格式。无论如何，这是代码：

```
def pack(data):
  # create the result element
  result = xml.Element("Array")

  # report the dimensions
  ref = data
  while isinstance(ref, list):
    xml.SubElement(result, "Dimsize").text = str(len(ref))
    ref = ref[0]

  # flatten the data
  while isinstance(data[0], list):
    data = sum(data, [])

  # pack the data
  for d in data:
    result.append(pack_simple(d))

  # return the result
  return result 
```

现在我需要编写一个 unpack() 方法来将打包的 XML 数组转换回 python 列表。我可以很好地提取数组维度和数据：

```
def unpack(element):
  # retrieve the array dimensions and data
  lengths = []
  data = []
  for entry in element:
    if entry.text == "Dimsize":
      lengths.append(int(entry.text))

    else:
      data.append(unpack_simple(entry))

  # now what? 
```

但我不确定如何展平阵列。什么是这样做的有效方法？

编辑：这是 python 列表和相应的 XML 的样子。注意：数组是 n 维的。

```
data = [[[1, 2], [3, 4]], [[5, 6], [7, 8]]] 
```

然后是 XML 版本：

```
<Array>
  <Dimsize>2</Dimsize>
  <Dimsize>2</Dimsize>
  <Dimsize>2</Dimsize>
  <I32>
    <Name />
    <Val>1</Val>
  </I32>

  ... 2, 3, 4, etc.
</Array> 
```

不过，实际格式并不重要，我只是不知道如何从以下位置展开列表：

```
data = [1, 2, 3, 4, 5, 6, 7, 8] 
```

回到：

```
data = [[[1, 2], [3, 4]], [[5, 6], [7, 8]]] 
```

给定：

```
lengths = [2, 2, 2] 
```

假设 pack_simple() 和 unpack_simple() 对基本数据类型（int、long、string、boolean）执行相同的 pack() 和 unpack()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:48:30.470

由内而外开始：

```
def group(seq, k):
    return [seq[i:i+k] for i in range(0, len(seq), k)]

unflattened = group(group(data, 2), 2) 
```

如果您的尺寸不完全相同，您的示例可能会更容易。但我认为上面的代码应该可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:55:02.170

尝试以下操作：

```
from operator import mul

def validate(array, sizes):
    if reduce(mul, sizes) != len(array):
        raise ValueError("Array dimension incompatible with desired sizes")

    return array, sizes

def reshape(array, sizes):
    for s in sizes:
        array = [array[i:i + s] for i in range(0, len(array), s)]

    return array[0]

data = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
length = [2, 2, 3]

print reshape(validate(data, length))

length = [2, 2, 2]

print reshape(validate(data, length)) 
```

输出为：

```
[[[1, 2], [3, 4]], [[5, 6], [7, 8]], [[9, 10], [11, 12]]]
Traceback:
   (...)
ValueError: Array dimension incompatible with desired sizes 
```

* * *

另一种方法是使用`numpy`数组。请注意，对于这个简单的任务，numpy 是一个相当大的依赖项，尽管您会发现大多数（常见）与数组相关的任务/问题已经在那里实现了：

```
from numpy import array

print array(data).reshape(*length)  # optionally add .tolist() to convert to list 
```

**编辑**：添加数据验证

**编辑**：使用 numpy 数组的示例（感谢 JFSebastian 的提示）

# java - 删除 Cassandra 中具有特定键的所有行

> ID：11157857
> 
> 赞同：1
> 
> 时间：2012-06-22T14:09:28.920
> 
> 标签：java, cassandra, hector

假设我在 Cassandra 中有一个 ColumnFamily，如下所示：

```
KEY   | VALUE
_____________
foo_a | data
foo_b | data
bar_a | data
bar_b | data 
```

删除键以“foo”开头的所有行的最佳方法是什么？如果有用的话，我可以改变数据的结构。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T16:00:56.550

这样做的唯一方法是扫描集群中的每一行并以编程方式检查它是否以 'foo' 开头，如果是则将其删除。

如果您需要这样的功能，您可能会保留以“foo”开头的行的索引。每次您编写以 'foo' 开头的行时，您还会将该行的完整键写入索引行。然后，当您想删除它们时，您可以轻松地查找以“foo”开头的所有键。使用该策略，您将希望确保您的索引行不会变得太大。在 cassandra 中，单行中有 20 亿列的技术限制，但您希望保持小于 20 亿列。

# replace - 如何注入换行符以替换分隔符

> ID：11157859
> 
> 赞同：1
> 
> 时间：2012-06-22T14:09:43.547
> 
> 标签：replace, sed, line, feed, comma

```
/usr/bin/sed 's/,/\\n/g' comma-delimited.txt > newline-separated.txt 
```

这对我不起作用。我只是删除了“，”，但现在只是没有分隔标记。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:34:26.430

你必须有一个旧版本的 sed，所以你需要在你的替代品中放一个文字 LF char，即

```
/usr/bin/sed 's/,/
/g' comma-delimited.txt > newline-separated.txt 
```

您甚至可能需要转义 LF，因此请确保最后一个字符 '\' 之后没有空格字符

```
/usr/bin/sed 's/,/\
/g' comma-delimited.txt > newline-separated.txt 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:58:47.980

这可能对您有用：

```
echo a,b,c,d,e | sed 'G;:a;s/,\(.*\(.\)\)/\2\1/;ta;s/.$//'
a
b
c
d
e 
```

解释：

*   将换行符附加到模式空间。`G`
*   用模式空间中的最后一个字符替换`,`'s，即`\n` `:a;s/,\(.*\(.\)\)/\2\1/;ta`
*   删除换行符。`s/.$//`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T11:20:49.863

我尝试了以下方法，看起来很笨拙，但确实有效。容易理解。我使用 tr 来替换占位符 §。唯一需要注意的是占位符，必须不在字符串中。

```
ps -fu $USER | grep java | grep DML| sed -e "s/ -/§      -/g" | tr "§" "\n" 
```

将为您提供命令行的缩进输出。DML 只是一些服务器名称。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-09-04T16:54:28.237

在 AIX7 上，答案 #3 效果很好：我需要在段落的开头插入一个换行符，这样我就可以执行 grep -p 以在生成的“节”中过滤“mksysb” lsnim -l | /usr/bin/sed 's/^[a-zA-Z/\^J&/' （实际上初始行有一个转义的换行符： lsnim -l | /usr/bin/sed 's/^[a-zA -Z/\ &/') 调用命令显示 ^J 语法...

# sql - 拆分作为变量/值对的列，并在 sql 中分配 var

> ID：11157862
> 
> 赞同：0
> 
> 时间：2012-06-22T14:09:58.893
> 
> 标签：sql, tsql, sql-server-2000

我有一个像这样的查询：

```
SELECT ...
FROM ...
WHERE .. AND SomeID = @someID 
```

我继承了这个包含一些动态元素的大型存储过程，所以我需要从另一个表的列中获取 someID 的值，即执行查找。

我怎样才能做到这一点？

另一列如下所示：

```
TypeValue
'SomeID=1232,OtherID=3383' 
```

某些列 TypeValue 是 VARCHAR(1000)，它包含一个逗号分隔的类型和值对字符串。

所以我需要拆分`,`，然后拆分，`=`所以以某种方式得到：

```
SET @SomeID = SELECT TypeValue FROM MyTABLE WHERE .. 
```

我怎样才能做到这一点？

（注意，这是 sql server 2000）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:24:12.637

假设你被糟糕的设计困住了，这不需要动态 SQL：

```
USE tempdb;
GO

CREATE TABLE dbo.foo(ID INT, TypeValue VARCHAR(1000));

INSERT dbo.foo SELECT 1, 'SomeID=1232,OtherID=3383';
INSERT dbo.foo SELECT 2, 'Blat=prong,SomeID=1254';
INSERT dbo.foo SELECT 3, 'Foo=bar,x=23';
INSERT dbo.foo SELECT 4, 'SomeID=767';
INSERT dbo.foo SELECT 5, 'x=y,SomeID=126,OtherID=3383';

SELECT ID, Value = SUBSTRING(TypeValue, 
  CHARINDEX('SomeID', TypeValue) + 7, 
  COALESCE(NULLIF(CHARINDEX(',', SUBSTRING(TypeValue, 
    CHARINDEX('SomeID', TypeValue) + 8, 1000)), 0), 1000))
FROM dbo.foo
WHERE ',' + TypeValue LIKE '%,SomeID=%'; 
```

结果：

```
ID  Value
--- -----
1   1232
2   1254
4   767
5   126 
```

如果你知道你想要哪一行：

```
DECLARE @ID INT, @Param VARCHAR(32);
SET @ID = 5;
SET @Param = 'SomeID';

DECLARE @val INT;

SELECT @val = SUBSTRING(TypeValue, 
  CHARINDEX(@Param, TypeValue) + LEN(@Param) + 1, 
  COALESCE(NULLIF(CHARINDEX(',', SUBSTRING(TypeValue, 
    CHARINDEX(@Param, TypeValue) + LEN(@Param) + 2, 1000)), 0), 1000))
FROM dbo.foo
WHERE ID = @ID 
AND ',' + TypeValue LIKE '%,' + @Param + '=%';

PRINT @val; 
```

结果：

```
126 
```

当然，这并不能防止有人将字符串放入 SomeID 值，因此如果证明是数字，则仅转换为 INT 可能更安全。但你明白了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T15:17:22.277

使用拆分：http: [//blogs.microsoft.co.il/blogs/itai/archive/2009/02/01/t-sql-split-function.aspx](http://blogs.microsoft.co.il/blogs/itai/archive/2009/02/01/t-sql-split-function.aspx)

```
DECLARE @Str NVARCHAR(4000)
SELECT @Str = 'SomeID=1232,OtherID=3383'
SELECT * into #temp FROM   [dbo].[Split] (@Str, ',') 

select property = (select Data from dbo.Split((select Data from #temp where Id = b.id), '=') where Id = 1),
       value = (select Data from dbo.Split((select Data from #temp where Id = b.id), '=') where Id = 2)
from #temp b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T20:34:14.613

```
SELECT [key] = LEFT(s.value, ca.pos - 1),
   [value] = SUBSTRING(s.value, ca.pos + 1, 8000)
FROM STRING_SPLIT(@activityValue, '|') s
CROSS APPLY (VALUES(CHARINDEX(':', s.value))) ca(pos); 
```

从这里拉出来：[Is it possible to parse key:value pairs in SQL](https://stackoverflow.com/questions/55131971/is-it-possible-to-parse-keyvalue-pairs-in-sql)

# c# - 捕获 ctrl + 多个按键

> ID：11157868
> 
> 赞同：1
> 
> 时间：2012-06-22T14:10:04.717
> 
> 标签：c#, winforms

是否有一种简单的方法可以在 Winforms 应用程序中捕获类似于 Visual Studio 中的事件，例如+ ，`ctrl`=`key1`注释掉选定的行？`key2``ctrl``e``c`

我目前正在覆盖我的表单`OnKeyDown`事件：

```
protected override void OnKeyDown(KeyEventArgs e)
    {
        base.OnKeyDown(e);

        if (e.Control && e.KeyCode.ToString() == "N")
        {
            //do something...
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T15:31:14.540

评论中的文章可能是针对 WPF 的，但里面的想法仍然可以使用

构造一个类，例如

```
 public class MultiKeyGesture
    {
        private List<Keys> _keys;
        private Keys _modifiers;
        public MultiKeyGesture(IEnumerable<Keys> keys, Keys modifiers)
        {
            _keys = new List<Keys>(keys);
            _modifiers = modifiers;
            if (_keys.Count == 0)
            {
                throw new ArgumentException("At least one key must be specified.", "keys");
            }
        }

        private int currentindex;
        public bool Matches(KeyEventArgs e)
        {
            if (e.Modifiers == _modifiers && _keys[currentindex] == e.KeyCode)
                //at least a partial match
                currentindex++;
            else
                //No Match
                currentindex = 0;
            if (currentindex + 1 > _keys.Count)
            {
                //Matched last key
                currentindex = 0;
                return true;
            }
            return false;
        }
    } 
```

但忽略继承。

使用它

```
 private MultiKeyGesture Shortcut1 = new MultiKeyGesture(new List<Keys> { Keys.A, Keys.B }, Keys.Control);
    private MultiKeyGesture Shortcut2 = new MultiKeyGesture(new List<Keys> { Keys.C, Keys.D }, Keys.Control);
    private MultiKeyGesture Shortcut3 = new MultiKeyGesture(new List<Keys> { Keys.E, Keys.F }, Keys.Control);

    protected override void OnKeyDown(KeyEventArgs e)
    {
        base.OnKeyDown(e);
        if (Shortcut1.Matches(e))
            BackColor = Color.Green;
        if (Shortcut2.Matches(e))
            BackColor = Color.Blue;
        if (Shortcut3.Matches(e))
            BackColor = Color.Red;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:27:40.810

如果你只有两个快捷键，就像 VS 一样，你可以将按下的最后一个键存储在一个变量中。

```
private Keys lastKeyPressed = null;

protected override void OnKeyDown(KeyEventArgs e)
{
    base.OnKeyDown(e);
    if(e.Control && lastKeyPressed != null)
    {
        if(lastKeyPressed == Keys.firstKey && e.KeyCode == Keys.secondKey)
        {
        }
        else if (...) // so on and so forth.
    }
    else if(e.Control)
        lastKeyPressed = e.KeyCode;
}

protected override void OnKeyUp(KeyEventsArgs e)
{
    if(!e.Control)
       lastKeyPressed = null;
} 
```

这将执行一个两键快捷方式，并在释放 ctrl 键时将其重置。这只是未经测试的伪代码，但它的概念是在按住 Ctrl 时保存最后按下的键，然后在释放我试图传达的 ctrl 时重置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-18T04:04:38.303

为控制键调用 e.Modifiers，为组合键调用 e.KeyCode。

```
private void Form1_KeyUp(object sender, KeyEventArgs e)
{
   // For Tow Key Shortcut.
   if (e.Modifiers == Keys.Control && e.KeyCode == Keys.B)
   {}

     // For Triple Key Shortcut.
   if (e.Modifiers.ToString() == (Keys.Shift+", "+Keys.Control) && e.KeyCode == Keys.B)
   {} 
}

// For Form level Key events you must have to set KeyPreview to True;
public Form1()
{
    InitializeComponent();
    this.KeyPreview = true;
} 
```

# objective-c - NSDate 在 iOS 中为空

> ID：11157869
> 
> 赞同：0
> 
> 时间：2012-06-22T14:10:10.537
> 
> 标签：objective-c, ios5, nsdate, nsdatecomponents

我必须从字符串中获取日期。所以我使用下面的代码：

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];

//Fri Mar 09 15:31:35 CST 2012
[formatter setDateFormat:@"EEE MMM d HH:mm:ss ZZZ yyyy"];
NSDate *date = [formatter dateFromString:[newDict objectForKey:@"eventDate"]];
NSLog(@"aDate is %@",[newDict objectForKey:@"eventDate"]); 
```

eventDate 的格式为 aDate 是**Fri May 18 12:00:37 IST 2012**，但日期为空。

我知道这是一个小问题，但我真的很坚持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:00:55.323

您的输入字符串可以用`@"EEE MMM d HH:mm:ss VVV yyyy"`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-22T14:25:10.097

尝试在`dateFromString:`通话前添加：

```
[formatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_IN"]]; 
```

# r - 模拟抛硬币一周？

> ID：11157870
> 
> 赞同：4
> 
> 时间：2012-06-22T14:10:10.623
> 
> 标签：r, simulation, probability, coin-flipping

*这不是功课*。我有兴趣在 R 中设置抛硬币的模拟。我想运行一周的模拟。R 中是否有一个函数可以让我在一个时间段（例如一周）内开始和停止模拟？如果一切顺利，我可能想增加模拟期的长度。

例如：

```
x <- rbinom(10, 1, 1/2) 
```

因此，为了澄清，**而不是上面代码中的 10，我如何让模拟持续一周**（一周内的试验次数与设定的试验次数）？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-22T14:23:47.477

以下代码将继续运行三秒钟，然后停止并打印总数。

```
x <- Sys.time()
duration <- 3 # number of seconds
heads <- 0
tails <- 0

while(Sys.time() <= x + duration){
  s <- sample(0:1, 1)
  if(s == 1) heads <- heads+1 else tails <- tails+1
  cat(sample(0:1, 1))
}
cat("heads: ", heads)
cat("tails: ", tails) 
```

结果：

```
001100111000011010000010110111111001011110100110001101101010 ...
heads:  12713
tails:  12836 
```

* * *

**警告说明：**

以我机器的速度，我敢打赌，你在周末之前**很久**就会收到浮点错误。换句话说，您可能会达到您的机器允许您存储为整数、双精度、浮点数或您正在使用的任何值的最大值，然后您的代码将崩溃。

因此，您可能必须构建一些错误检查或翻转机制来保护您免受这种情况的影响。

* * *

要快速说明会发生什么，请尝试以下操作：

```
x <- 1e300
while(is.finite(x)){
  x <- x+x
  cat(x, "\n")
} 
```

R 优雅地处理浮点重载，并返回`Inf`.

因此，您在模拟中拥有的任何数据现在都丢失了。不可能在任何合理的程度上分析无穷大。

在设计模拟时请记住这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T14:24:52.220

虽然现在小于一周后的时间戳附加到`x rbinmo(1,1,1/2)`

```
R> week_later <- strptime("2012-06-22 16:45:00", "%Y-%m-%d %H:%M:%S")
R> x <- rbinom(1, 1, 1/2) // init x
R> while(as.numeric(Sys.time()) < as.numeric(week_later)){
R>   x <- append(x, rbinom(1, 1, 1/2))
R> } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T19:24:46.390

您可能对`harvestr`Andrew Redd 的相当新的软件包感兴趣。它将任务分成几部分（想法是这些部分可以并行运行）。适用于您的问题的软件包部分是它缓存已处理的部分的结果，因此如果任务被中断并重新启动，那么那些已完成的部分将不会重新运行，但它会继续那些没有完成的（中途中断的部分将从该部分的开头开始）。

这可以让您按您的要求开始和停止模拟。

# android - 从资产中读取 HTML 文件

> ID：11157876
> 
> 赞同：12
> 
> 时间：2012-06-22T14:10:23.213
> 
> 标签：android

我在资产中有一个 html 文件 aaa.html。我想读取 html 文件的内容并用另一个字符串替换它。

这种方式是正确的还是有其他选择。

我的代码：

```
File f = new File("file:///android_asset/aaa.html");
FileReader fr = new FileReader(f);
BufferedReader br = new BufferedReader(fr); 
```

但是找不到它的给定文件，在 Web 视图中加载时会加载文件。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-22T14:12:58.077

```
InputStream is = getAssets().open("aaa.html");
int size = is.available();

byte[] buffer = new byte[size];
is.read(buffer);
is.close();

String str = new String(buffer);
str = str.replace("old string", "new string"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T14:40:53.077

如果你想在 webview 中加载文件然后使用这个

```
mWebView.loadUrl("file:///android_asset/myfile.html"); 
```

您想替换 H​​tml 文件标签中的内容，因此解决方案类代码在这里..

```
public class CardDetail {
    public static String newHtmlString = "";

    // private Context context;

    @SuppressWarnings("rawtypes")
    public String getNewHtmlString(String htmlString, HashMap hm) {
        try {
            StringTokenizer st = new StringTokenizer(htmlString, "##");
            CardDetail.newHtmlString = "";
            while (st.hasMoreTokens()) {
                String token = st.nextToken();
                CardDetail.newHtmlString += token;
                if (st.hasMoreTokens()) {
                    String token2 = st.nextToken();
                    if (token2.equals("NAME") || token2.equals("POSITION") || token2.equals("COMPANY") || token2.equals("PHOTOURL"))
                        CardDetail.newHtmlString += hm.get(token2);
                    if (token2.equals("SKYPE_CONTAINER1")
                            || token2.equals("TWITTER_CONTAINER1")
                            || token2.equals("PHONENUMBER_CONTAINER1")
                            || token2.equals("EMAIL_CONTAINER1")
                            || token2.equals("ADDRESS_CONTAINER1")) {
                        String replaceString = st.nextToken();
                        String tokenMiddle = (String) hm.get(st.nextToken());                       
                        if (!tokenMiddle.equals("")) {
                            replaceString += tokenMiddle;
                            CardDetail.newHtmlString += replaceString   + st.nextToken();
                            st.nextElement();
                        } else {
                            st.nextElement();
                            st.nextElement();
                        }
                    }
                }
            }
//          Log.i("convertedHTMLString", newHtmlString);
            return CardDetail.newHtmlString;

//          htmlString = "<img src='" + hm.get("PHOTOURL") + "' width=80 height=80>";           
//          return htmlString;
        } catch (Exception e) {
            // TODO: handle exception
            e.printStackTrace();
        }
        return null;
    }

    @SuppressWarnings("unchecked")
    public HashMap<?, ?> getProfileHashMap(JSONObject jsonObject) {
        @SuppressWarnings("rawtypes")
        HashMap hm = new HashMap();
        jsonObject = (new JSONConverterClass()).convertJsonObjectToCardDetail(jsonObject);
        try {
            hm.put("EMAIL", jsonObject.getString("email"));
            hm.put("NAME", jsonObject.getString("firstname") + " " + jsonObject.getString("lastname"));
            hm.put("COMPANY", jsonObject.getString("company_name"));
            hm.put("POSITION", jsonObject.getString("position"));
            hm.put("WEBSITE", jsonObject.getString("website"));
            hm.put("PHONENUMBER", jsonObject.getString("phonenumber"));
            hm.put("PHOTOURL", jsonObject.getString("picture_url"));
            hm.put("SKYPE", jsonObject.getString("skype_username"));
            hm.put("TWITTER", jsonObject.getString("twitter_username"));
            hm.put("ADDRESS", jsonObject.getString("generic_location"));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return hm;
    }
} 
```

convertJsonObjectToCardDetail 这个类只是用 Json 的值替换字符串希望这能解决你的问题....

# javascript - 使用 Google Maps V2、Facebook 评论等在 GWT（Google App Engine）中构建 HTML 视图 - 布局？

> ID：11157882
> 
> 赞同：1
> 
> 时间：2012-06-22T14:10:36.573
> 
> 标签：javascript, html, css, google-app-engine, gwt

嗨，我是 GWT 和 Google App Engine 的新手。我试图布局看起来像图像。但是，我不确定实现这一目标的最佳方法是什么。

![在此处输入图像描述](../Images/f78922d89b987f2dea1813714930f6ba.png)

根据 GWT 文档，有几种方法，例如：UIBinder、布局面板（我在图像中使用这种方法）......等。

但是，我的 UI 并没有那么复杂。我有一个顶部带有导航栏的 div，一个带有地图（Javascript）的 div，一个带有 Facebook 评论（javascript）的 div，以及一个带有我为评分等编写的一些功能的 div。

因此，大多数情况下，这个网页都会调用很多 javascript 和第三方的东西。

这是一些完成此操作的代码

```
 String header = "<div><h3>Navigation bar here</h3></div>";
    String east = "<div><h3>Rating System here</h3></div>";
    String south = "<div><h3>Facebook comments here</h3></div>";

    dock.addNorth(new HTML(header), 75);

    dock.addSouth(new HTML(south),50);
    dock.addEast(new HTML(east), 300);
    dock.add(map);

    RootLayoutPanel.get().add(dock); 
```

我尝试在要添加到地图的 html 字符串中输入一些 Javascript。然而，它并没有出现在视图中。似乎 html 仅在其文本有效时才有效，这是正确的吗？

在 GWT 中构建它的最佳方法是什么？

有人可以指点我一些代码/教程的例子吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T17:48:25.913

我建立了一个像您项目一样的网站（链接在我的个人资料中）。

有一个 jar 文件可用于在 gwt 中映射地图 v3。

这是：[http ://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-maps-3.8.0-pre1.zip](http://code.google.com/p/gwt-google-apis/downloads/detail?name=gwt-maps-3.8.0-pre1.zip)

照顾GAE ...如果您的应用程序必须保持“免费”状态，并且您计划将其提供给其他用户，您将很快用完配额:-(

（我只使用 googlebots 获得了 60% 的实例时间......）

无论如何，只需制作一个几乎空的 html，然后从头开始构建您的面板。

# objective-c - iOS 上的自定义进度条

> ID：11157883
> 
> 赞同：-1
> 
> 时间：2012-06-22T14:10:36.767
> 
> 标签：objective-c, ios

如何在 iOS 上创建自定义进度条？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:15:27.410

您没有发布图片 :) 但是您可以使用 UISlider 并将“userInteractionEnabled”设置为 NO，并将 thumb 设置为小的透明图片。这是一些代码：

```
UIImage* slider = [UIImage imageNamed:@"empty.png"];
UIImage* leftImage = [UIImage imageNamed:@"left_track.png"];
UIImage* rightImage = [UIImage imageNamed:@"right_track.png"];

[self.slider setThumbImage::slider forState:UIControlStateNormal];
[self.slider setThumbImage::slider forState:UIControlStateSelected];
[self.slider setThumbImage::slider forState:UIControlStateHighlighted];

[self.slider setMinimumTrackImage::leftImage forState:UIControlStateNormal];
[self.slider setMaximumTrackImage::rightImage forState:UIControlStateNormal]; 
```

当然，左右图像必须是可缩放的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:15:51.677

您可以有 2 个图像，“on”图像位于“off”图像之上，并且每个图像都在自己的 UIImageView 中。为包含“on”图像的 UIImageView启用`clipsToBound`。然后您可以根据控制它的数字调整顶部图像的边界宽度。您还可以选择使更改连续或谨慎。

# jquery - cakePHP、jQuery 对话框和 flowplayer 无法正常工作

> ID：11157886
> 
> 赞同：0
> 
> 时间：2012-06-22T14:10:44.863
> 
> 标签：jquery, cakephp, dialog, flowplayer

在我的视图文件中，我有想要通过使用 flowplayer 的 jQuery 对话框播放的声音片段。一切正常，除了播放器不显示。我已将问题缩小到我必须提供播放器的 SWF 文件所在位置的 url。我终其一生都无法确定玩家正在寻找的位置。

总结一下，我的文件是：

flowplayer 脚本 - /app/webroot/js/flowplayer/flowplayer-3.2.10.min.js

flowplayer SWF-/app/webroot/js/flowplayer/flowplayer-3.2.11.swf

然后我有以下内容：

```
 // Within the default.ctp in /app/view/layouts:

 <script type="text/javascript">
// Audio player information:
$(document).ready(function() {

   $(".player").click(function() {
      $("<div></div>").load($(this).attr("href")).dialog(); 
      return false;
   });
});
</script>

// Example in a view file where I am calling the model view:

 <?php
 echo $this->Html->link($this->Html->image("icons/control_play_blue.png", array("alt" => "Play audio file")),array("controller" => "surveys", "action" => "audioplayer","questions",$question['Question']['ivr_recording_file'], $question['Question']['mime']),array('escape' => false, "class" => "player"));
 ?>

 // Within the controller:

 /*
     * Audio player for IVR audio files for the site:
     * 
     */
    public function audioplayer($type,$audio,$mime) {

        $this->layout = false;
        //$this->autoRender = false;

        // Determine what type of file it is so that we can get the location:
       if($type == "ivr") {
           $location = "";
       } else {
           $location = "";
       }
       $file = $audio.".".$mime;

       $this->set(compact("file","type"));
    }

 // Lastly, within the view of the controller call (this is where the URL is wrong)

  <script type="text/javascript">
$(document).ready(function() {
   flowplayer("player", "flowplayer-3.2.11.swf"); 
});
 </script>
 <?php 
 echo $this->Html->Link("","/files/uploads/".$type."/".$file,array("id" => "player"));
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:25:22.597

正如@Ohgodwhy 所建议的，我的路径不正确，它必须是文件的绝对路径

# iphone - iOS折纸（折纸/手风琴）效果动画，带手动控制

> ID：11157888
> 
> 赞同：8
> 
> 时间：2012-06-22T14:10:55.883
> 
> 标签：iphone, ios, animation, accordion, fold

我正在寻找有关如何在我的 iOS 项目中实现流行的“折纸/折纸”效果的提示。

我知道诸如 [https://github.com/xyfeng/XYOrigami](https://github.com/xyfeng/XYOrigami)之类的项目， 但它们只提供“动画”效果，没有手动控制开场动画。

我一直在努力剖析那个项目并想出我想要的东西。

更准确地说，我正在研究如何实现此处显示的效果：http: [//vimeo.com/41495357](http://vimeo.com/41495357)其中折叠动画不仅仅是动画打开，而是用户控制打开折叠。

任何帮助将不胜感激，在此先感谢！

编辑：

好的，这里有一些示例代码可以更好地说明我正在努力解决的问题：

该方法触发折纸效果动画：

```
- (void)showOrigamiTransitionWith:(UIView *)view 
                NumberOfFolds:(NSInteger)folds 
                     Duration:(CGFloat)duration
                    Direction:(XYOrigamiDirection)direction
                   completion:(void (^)(BOOL finished))completion
{

if (XY_Origami_Current_State != XYOrigamiTransitionStateIdle) {
    return;
}
XY_Origami_Current_State = XYOrigamiTransitionStateUpdate;

//add view as parent subview
if (![view superview]) {
    [[self superview] insertSubview:view belowSubview:self];
}

//set frame
CGRect selfFrame = self.frame;
CGPoint anchorPoint;
if (direction == XYOrigamiDirectionFromRight) {

    selfFrame.origin.x = self.frame.origin.x - view.bounds.size.width;

    view.frame = CGRectMake(self.frame.origin.x+self.frame.size.width-view.frame.size.width, self.frame.origin.y, view.frame.size.width, view.frame.size.height);

    anchorPoint = CGPointMake(1, 0.5);
}
else {
    selfFrame.origin.x = self.frame.origin.x + view.bounds.size.width;
    view.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, view.frame.size.width, view.frame.size.height);

    anchorPoint = CGPointMake(0, 0.5);
}

UIGraphicsBeginImageContext(view.frame.size);
[view.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewSnapShot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

//set 3D depth
CATransform3D transform = CATransform3DIdentity;
transform.m34 = -1.0/800.0;
CALayer *origamiLayer = [CALayer layer];
origamiLayer.frame = view.bounds;
origamiLayer.backgroundColor = [UIColor colorWithWhite:0.2 alpha:1].CGColor;
origamiLayer.sublayerTransform = transform;
[view.layer addSublayer:origamiLayer];

//setup rotation angle
double startAngle;
CGFloat frameWidth = view.bounds.size.width;
CGFloat frameHeight = view.bounds.size.height;
CGFloat foldWidth = frameWidth/(folds*2);
CALayer *prevLayer = origamiLayer;
for (int b=0; b < folds*2; b++) {
    CGRect imageFrame;
    if (direction == XYOrigamiDirectionFromRight) {
        if(b == 0)
            startAngle = -M_PI_2;
        else {
            if (b%2)
                startAngle = M_PI;
            else
                startAngle = -M_PI;
        }
        imageFrame = CGRectMake(frameWidth-(b+1)*foldWidth, 0, foldWidth, frameHeight);
    }
    else {
        if(b == 0)
            startAngle = M_PI_2;
        else {
            if (b%2)
                startAngle = -M_PI;
            else
                startAngle = M_PI;
        }
        imageFrame = CGRectMake(b*foldWidth, 0, foldWidth, frameHeight);
    }
    CATransformLayer *transLayer = [self transformLayerFromImage:viewSnapShot Frame:imageFrame Duration:duration AnchorPiont:anchorPoint StartAngle:startAngle EndAngle:0];
    [prevLayer addSublayer:transLayer];
    prevLayer = transLayer;
}

[CATransaction begin];
[CATransaction setCompletionBlock:^{
    self.frame = selfFrame;
    [origamiLayer removeFromSuperlayer];
    XY_Origami_Current_State = XYOrigamiTransitionStateShow;

    if (completion)
        completion(YES);
}];

[CATransaction setValue:[NSNumber numberWithFloat:duration] forKey:kCATransactionAnimationDuration];
CAAnimation *openAnimation = [CAKeyframeAnimation animationWithKeyPath:@"position.x" function:openFunction fromValue:self.frame.origin.x+self.frame.size.width/2 toValue:selfFrame.origin.x+self.frame.size.width/2];
openAnimation.fillMode = kCAFillModeForwards;
[openAnimation setRemovedOnCompletion:NO];
[self.layer addAnimation:openAnimation forKey:@"position"];
[CATransaction commit];
} 
```

该方法从该方法中获取一个 CATransform 层：

```
- (CATransformLayer *)transformLayerFromImage:(UIImage *)image Frame:(CGRect)frame Duration:(CGFloat)duration AnchorPiont:(CGPoint)anchorPoint StartAngle:(double)start EndAngle:(double)end;
{
CATransformLayer *jointLayer = [CATransformLayer layer];
jointLayer.anchorPoint = anchorPoint;
CGFloat layerWidth;
if (anchorPoint.x == 0) //from left to right
{
    layerWidth = image.size.width - frame.origin.x;
    jointLayer.frame = CGRectMake(0, 0, layerWidth, frame.size.height);
    if (frame.origin.x) {
        jointLayer.position = CGPointMake(frame.size.width, frame.size.height/2);
    }
    else {
        jointLayer.position = CGPointMake(0, frame.size.height/2);
    }
}
else 
{ //from right to left
    layerWidth = frame.origin.x + frame.size.width;
    jointLayer.frame = CGRectMake(0, 0, layerWidth, frame.size.height);
    jointLayer.position = CGPointMake(layerWidth, frame.size.height/2);
}

//map image onto transform layer
CALayer *imageLayer = [CALayer layer];
imageLayer.frame = CGRectMake(0, 0, frame.size.width, frame.size.height);
imageLayer.anchorPoint = anchorPoint;
imageLayer.position = CGPointMake(layerWidth*anchorPoint.x, frame.size.height/2);
[jointLayer addSublayer:imageLayer];
CGImageRef imageCrop = CGImageCreateWithImageInRect(image.CGImage, frame);
imageLayer.contents = (__bridge id)imageCrop;
imageLayer.backgroundColor = [UIColor clearColor].CGColor;

//add shadow
NSInteger index = frame.origin.x/frame.size.width;
double shadowAniOpacity;
CAGradientLayer *shadowLayer = [CAGradientLayer layer];
shadowLayer.frame = imageLayer.bounds;
shadowLayer.backgroundColor = [UIColor darkGrayColor].CGColor;
shadowLayer.opacity = 0.0;
shadowLayer.colors = [NSArray arrayWithObjects:(id)[UIColor blackColor].CGColor, (id)[UIColor clearColor].CGColor, nil];
if (index%2) {
    shadowLayer.startPoint = CGPointMake(0, 0.5);
    shadowLayer.endPoint = CGPointMake(1, 0.5);
    shadowAniOpacity = (anchorPoint.x)?0.24:0.32;
}
else {
    shadowLayer.startPoint = CGPointMake(1, 0.5);
    shadowLayer.endPoint = CGPointMake(0, 0.5);
    shadowAniOpacity = (anchorPoint.x)?0.32:0.24;
}
[imageLayer addSublayer:shadowLayer];

//animate open/close animation
CABasicAnimation* animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.y"];
[animation setDuration:duration];
[animation setFromValue:[NSNumber numberWithDouble:start]];
[animation setToValue:[NSNumber numberWithDouble:end]];
[animation setRemovedOnCompletion:NO];
[jointLayer addAnimation:animation forKey:@"jointAnimation"];

//animate shadow opacity
animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
[animation setDuration:duration];
[animation setFromValue:[NSNumber numberWithDouble:(start)?shadowAniOpacity:0]];
[animation setToValue:[NSNumber numberWithDouble:(start)?0:shadowAniOpacity]];
[animation setRemovedOnCompletion:NO];
[shadowLayer addAnimation:animation forKey:nil];

return jointLayer;
} 
```

基本上，我需要删除自动动画，并使用一些手动设置的值（例如：uislider 值或内容偏移量）来控制效果的进度。

再次感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T16:12:57.997

我为折叠过渡编写了另一个库：[https ://github.com/geraldhuad/YFoldView](https://github.com/geraldhuard/YFoldView)

希望对你有效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-18T17:11:58.563

试试这个。您可以拖动控制纸张折叠的左侧和右侧。

[https://github.com/honcheng/PaperFold-for-iOS](https://github.com/honcheng/PaperFold-for-iOS)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:12:42.100

这是我见过的最好的解决方案：

[http://api.mutado.com/mobile/paperstack/](http://api.mutado.com/mobile/paperstack/)

编辑：这个怎么样：[Twitter for iPad 中的纸张折叠/展开效果](https://stackoverflow.com/questions/5385898/the-paper-folding-unfolding-effect-in-twitter-for-ipad)

# imagemagick - What is GraphicsMagick's equivalent to ImageMagick's Blend?

> ID：11157893
> 
> 赞同：0
> 
> 时间：2012-06-22T14:11:17.250
> 
> 标签：imagemagick, blend, composite, graphicsmagick

I'm running this with ImageMagick and would like to speed it up slightly by switching to GraphicsMagick if possible. In this, case I'm blending 30% of image1.png and 70% of image2.png together into result.png.

composite -blend 70 -geometry +0+22.86 image1.png image2.png result.png

I think you have to go with dissolve in GraphicsMagick but I'm not too sure how to go about achieving the same affect.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T20:27:22.870

gm 复合 - 溶解 30 image1 image2 结果

# python - Less painful way to parse a RSS-Feed with lxml?

> ID：11157894
> 
> 赞同：4
> 
> 时间：2012-06-22T14:11:19.650
> 
> 标签：python, django, lxml, atom-feed, feedparser

I need to display RSS-feeds with Python, Atom for the most part. Coming from PHP, where I could get values pretty fast with $entry->link i find lxml to be much more precise, faster, albeit complicated. After hours of probing I got this working with the arstechnica-feed:

```
def GetRSSFeed(url):
    out = []
    feed = urllib.urlopen(url)
    feed = etree.parse(feed)
    feed = feed.getroot()
    for element in feed.iterfind(".//item"):
        meta = element.getchildren()
        title = meta[0].text
        link = meta[1].text
        for subel in element.iterfind(".//description"):
            desc = subel.text
            entry = [title,link,desc]
            out.append(entry)
    return out 
```

Could this be done any easier? How can I access tags directly? Feedparser gets the job done with one line of code! Why?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T14:37:30.733

查看 feedparser 库。它为您提供了一个格式良好的 RSS 对象。

```
> import feedparser
> feed = feedparser.parse('http://feeds.marketwatch.com/marketwatch/marketpulse/')
> print feed.keys()
['feed',
 'status',
 'updated',
 'updated_parsed',
 'encoding',
 'bozo',
 'headers',
 'etag',
 'href',
 'version',
 'entries',
 'namespaces']

>  len(feed.entries)
    30 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T06:32:01.597

您可以尝试[speedparser](https://github.com/hiidef/speedparser/)，这是[Universal Feed Parser](https://pypi.python.org/pypi/feedparser/)的实现`lxml`。虽然仍处于测试阶段。

# ruby-on-rails - 如何在 Rails 应用程序中存储用户生成的内容

> ID：11157901
> 
> 赞同：0
> 
> 时间：2012-06-22T14:11:38.637
> 
> 标签：ruby-on-rails, ruby, mongodb

我想创建一个网站，用户可以在其中创建自己的教学资源，例如嵌入图像的文本块等。

我应该如何将它存储在 Rails 的数据库中？我听说 mongoDB 非常适合存储文档，但我计划将 postgresql 用于用户数据库等，并且读过通常你不应该混合不同类型的数据库

我确定这是一个显而易见的问题，但我无法在任何地方找到答案......

谢谢，

格雷厄姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:26:52.513

你可以做几件事。

**`1.`**对 Users 表和 TeachingResources 表都使用**PostgreSQL**。您可以简单地使用`content`类型的列`text`来保存所有数据。

* * *

**`2.`**使用**PostgreSQL**，但使用该`HStore`功能基本上[存储](http://schneems.com/post/19298469372/you-got-nosql-in-my-postgres-using-hstore-in-rails)您选择的对象的散列，这为您提供了更大的灵活性。默认情况下， Rails 4 将[支持此](http://travisjeffery.com/b/2012/02/using-postgress-hstore-with-rails/)功能，但您也可以使用[gem](https://github.com/softa/activerecord-postgres-hstore)。

* * *

**`3.`**在您的应用程序中结合使用**PostgreSQL 和 MongoDB**（或任何其他 NoSQL 解决方案）。我不认为这是一个糟糕的解决方案，但它确实使您超出了 Rails 中的“新用户约束”，因此这可能不是开始的最佳途径

* * *

**`4.`****一路**走NoSQL 。您没有理由不能将 MongoDB 用于您的用户模型。但是，您是对的，这种类型的数据存储不能提供完整的[ACID](https://en.wikipedia.org/wiki/ACID)保证，因此请小心产品规划并了解它的漏洞（以及它的优势）。

# java - Selenium WebDriver 和 InternetExplorer

> ID：11157902
> 
> 赞同：4
> 
> 时间：2012-06-22T14:11:43.897
> 
> 标签：java, internet-explorer, selenium, selenium-webdriver

我最近更新到 Selenium 2.24.1 以使 Firefox 13 正常工作。通过此更新，您现在可以运行类似于 chromedriver.exe 的可执行文件，以便将事件分派到 IE。但是，我没有运气让测试与 IE 一起运行。为了让它与 chrome 一起运行，我显然还必须设置 webdriver.chrome.driver 位，但它和 Firefox 使用相同的代码工作正常。

这是我的源代码：

```
public class GoogleTest {

@Test
public void test() throws Exception {
  System.setProperty("webdriver.ie.driver", "IEDriverServer.exe");
  final WebDriver driver = new InternetExplorerDriver();
  driver.get("http://www.google.com");
  driver.findElement(By.name("q")).sendKeys("test");
  driver.findElement(By.name("q")).submit();
  driver.quit();
} 
```

}

但是，在执行此测试时，我会看到此堆栈跟踪

```
org.openqa.selenium.NoSuchElementException: Unable to find element with name == q (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 395 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.24.1', revision: '17205', time: '2012-06-19 15:28:49'
System info: os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.7.0_01'
Driver info: driver.version: RemoteWebDriver
Session ID: e20f8370-00ed-4bf6-a4fa-a0c09c2b6d8c
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:472)
at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:242)
at org.openqa.selenium.remote.RemoteWebDriver.findElementByName(RemoteWebDriver.java:303)
at org.openqa.selenium.By$ByName.findElement(By.java:291)
at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:234) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-02T16:33:14.833

这可能真的很明显，但是由于您在原始帖子中没有提到它并且您刚刚下载了驱动程序并且您的内部玩具应用程序正在运行，您是否仔细检查了 IE 中的安全设置，如 IEDriver 代码页中所述：

> 在 Windows Vista 或 Windows 7 上的 IE 7 或更高版本上，您必须将每个区域的保护模式设置设置为相同的值。该值可以打开或关闭，只要每个区域都相同。要设置保护模式设置，请从“工具”菜单中选择“Internet 选项...”，然后单击“安全”选项卡。对于每个区域，标签底部都会有一个标记为“启用保护模式”的复选框。

如果您之前使用过 Selenium 的早期版本，您可能已经这样做了，但我认为值得检查以确保...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T19:06:54.230

好吧，至少在我的情况下，错误消息具有误导性。我的系统被系统管理员锁定为保护模式：关闭。所以我无法切换保护模式。然后我意识到系统有一个管理员用户，所以以管理员用户身份登录并尝试切换保护模式。它仍然被禁用。然后我在管理员用户帐户下运行 Selenium，一切正常。

因此，您可能需要以管理员权限登录才能运行 selenium。这个技巧对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T04:14:58.417

使用下面的代码

```
System.setProperty("webdriver.ie.driver", "E:\\Selenium\\workspace\\IEDriverServer.exe");
WebDriver driver = new InternetExplorerDriver(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T01:09:35.277

检查您下载的 IEWebdriver 服务器。如果您使用的是 32 位 IE，请下载并使用 32 位 IEWebdriver。

希望有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-09T20:50:23.803

我遇到了非常相似的问题。Internet选项中有一个设置需要打开才能使其工作。高级 > 设置 > 安全 > 允许活动内容在我的电脑上的文件中运行。

选中此框后，我的 IE 测试按预期工作，可以找到元素并与浏览器交互。

# xml - 使用 XML 正则表达式模式验证代理 URL

> ID：11157914
> 
> 赞同：1
> 
> 时间：2012-06-22T14:12:18.620
> 
> 标签：xml, regex, url

我正在使用**XML 正则表达式模式**来匹配我的代理 URL。

例如：代理：ab-proxy-sample.company.com:8080

我的要求：

1.  不应以**http://**或**https://****开头**（匹配整个单词）
*****   应该接受任何字符串 + 一个端口*   **应该接受以ht**开头的偶数字符串****

 ******我当前的 XML 正则表达式是： [^http://|https://].+:[0-9]+|

但它匹配每个字母而不是整个单词？

任何帮助将不胜感激。提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T14:34:36.640

正如@arnep 指出的那样，您正在尝试使用带有[替代](http://www.regular-expressions.info/alternation.html)[的否定字符类](http://www.regular-expressions.info/charclass.html)，这不是它的工作方式。此外，这里有一些关于[前瞻](http://www.regular-expressions.info/lookaround.html)的信息。

我相信其他人会发布一个您可以复制和粘贴的答案，但这是学习正则表达式基础知识的有用机会！

**更新：**

我没有意识到您使用的引擎不支持负面环视。如果没有消极的环顾四周，几乎不可能实现您想要做的事情。

*几乎*;)

这是一种“蛮力”组合方法：

```
(?:[^h]|h(?:[^t]|t(?:[^t]|t(?:[^p]|p(?:[^s:]|s(?:[^:]|:(?:[^\/]|\/(?:[^\/])))|:(?:[^\/]|\/(?:[^\/])))))))\S+:\d+ 
```

1.  如果 XML 引擎不支持非捕获组，即`(?: ... )`使用常规组代替：

    ```
    ([^h]|h([^t]|t([^t]|t([^p]|p([^s:]|s([^:]|:([^\/]|\/([^\/])))|:([^\/]|\/([^\/])))))))\S+:\d+ 
    ```

2.  如果 XML 引擎不支持字符类`\S`，`\d`然后使用`[^ \t\r\n\p]`and`[0-9]`代替。

这是一个运行示例：[http](http://rubular.com/r/JnpCVgeLmL) ://rubular.com/r/JnpCVgeLmL 。尝试更改测试字符串。你会看到...

```
 ab-proxy-sample.company.com:8080          # matches
    htab-proxy-sample.company.com:8080        # matches
    http://ab-proxy-sample.company.com:8080   # doesn't
    https://ab-proxy-sample.company.com:8080  # doesn't
    httpd://ab-proxy-sample.company.com:8080  # matches 
```

请注意，*您不需要`^`and`$`*。我专门为 Rubular 演示添加了这些，但显然 XML 引擎假定了这种情况（锚定性）。

这是如何运作的？如果我们像这样分解它更容易理解：

```
 ([^h] | h
    ([^t] | t
    ([^t] | t
    ([^p] | p
    ([^s:]| s ([^:]|:([^\/]|\/([^\/])))
          | :        ([^\/]|\/([^\/])))
    ))))
    \S+:\d+ 
```

说明：

1.  如果第一个字符不是“h”，那就太好了！（字符串不可能是“http://”或“https://”。）
2.  如果第一个字符*是*“h”，那么：
    1.  如果第二个字符不是“t”，那就太好了！（字符串不可能是“http://”或“https://”。）
    2.  如果第二个字符*是*“t”，那么：
        1.  ......不是“t”，太棒了！
        2.  ...*是*“t”，那么：
            1.  ...不是“p”，太好了！
            2.  ...*是*“p”，那么：

在这里，它变得棘手：现在我们遇到*三个*分支。

1.  如果第五个字符既不是“s”也不是“:”，那就太好了！
2.  如果第五个字符*是*“s”，那么：
    1.  如果第六个字符不是“：”，那就太好了！
    2.  如果第六个字符*是*“：”，那么：
        1.  如果第七个字符不是“/”，那就太好了！
        2.  如果第七个字符*是*“/”，那么：
            1.  如果第八个字符不是“/”，那就太好了！
            2.  否则，失败！我们找到了一个“https://”。
3.  如果第五个字符*是*“：”，那么：
    1.  如果第六个字符不是“/”，那就太好了！
    2.  如果第六个字符*是*“/”，那么：
        1.  如果第七个字符不是“/”，那就太好了！
        2.  否则，失败！我们找到了一个“http://”。

最后，如果我们已经走到这一步，那么我们会寻找一串非空白字符，后跟一个冒号，然后是一串数字。

我把它留给比我自己更聪明的数学家来思考是否所有使用环视匹配的字符串都可以以这种方式“强制”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:34:24.230

为避免匹配以某个单词开头的字符串，请使用否定前瞻：

```
^(?!https?).*$ 
```

将匹配任何不以 http(s) 开头的字符串。其他要求留给读者作为练习:-)******

# objective-c - 越来越多的生活视图

> ID：11157917
> 
> 赞同：0
> 
> 时间：2012-06-22T14:12:34.317
> 
> 标签：objective-c, ios, xcode, storyboard, segue

我已经使用包含两个视图的故事板建立了一个非常简单的项目，如下所示：http: [//i.stack.imgur.com/iRx21.png](http://i.stack.imgur.com/iRx21.png)。导航可以通过在自定义表格视图中选择一个单元格或点击标有“<<”的后退按钮来完成。一切正常，除了以下内容：

当我在视图之间切换时，每次都会发生实例化。分析显示越来越多的视图对象。我想只保留每个视图中的一个，并且实例化应该只发生一次。我究竟做错了什么？（我正在使用 ARC。）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:32:08.700

您不应将后退按钮链接到父视图控制器。这就是导致新实例化的原因。

方法是将表格视图嵌入`UINavigationController`（在 IB 中，选择`Editor -> Imbed In -> Navigation Controller`。然后将您的 segue 更改为`Push`segue。您当然可以隐藏导航栏等以使事情看起来完全符合您的喜好。然后，链接后退按钮在处理程序中使用和处理控制器`IBAction`做一个简单的

```
[self.navigationController popViewControllerAnimated:YES]; 
```

这将是您正在做的事情的适当*逻辑。*当然，您也可以模态地推送 web 视图，然后处理按钮单击

```
[self dismissModalViewControllerAnimated:YES]; 
```

# macos - Creating a custom security encoding/decoding transform

> ID：11157918
> 
> 赞同：1
> 
> 时间：2012-06-22T14:12:34.457
> 
> 标签：macos, osx-lion, core-foundation

I'd like to create a Base16 encoder and decoder for Lion's new `Security.framework` to complement `kSecBase32Encoding` and `kSecBase64Encoding`. Apple's documentation shows how to write a custom transform (Caesar cipher) using `SecTransformRegister`. As far as I can tell, custom transforms registered this way have to operate symmetrically on the data and can't be used to encode and decode data differently. Does anyone know if writing a custom encoder/decoder is possible, and if so, how?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T04:48:08.597

我看不到将自定义编码器绑定到 的方法`SecEncodeTransformCreate()`，这是`kSecBase32Encoding`和其他编码器所基于的。但是很容易创建一个接受“编码”布尔值的转换，并利用它来决定是编码还是解码。在 CaesarTransform 示例中，它们附加了一个名为`key`with的属性`SecTransformSetAttribute()`。你会做同样的事情，但使用 bool `encode`。

当然，您可以只创建一个编码转换和一个解码转换。

# java - 合并排序函数混淆中的两个递归调用

> ID：11157922
> 
> 赞同：13
> 
> 时间：2012-06-22T14:12:45.700
> 
> 标签：java, recursion

我已经有一段时间没有接触算法了，这些天开始修改我的概念。令我惊讶的是，我最后一次记得我的递归技能是我擅长它，但现在不行了。所以，我有一个让我困惑的基本问题。请先看下面的代码..

```
private void mergesort(int low, int high) {
    if (low < high) {
        int middle = (low + high)/2 ;
        System.out .println ("Before the 1st Call");
        mergesort(low, middle);
        System.out .println ("After the 1st Call");
        mergesort(middle+1, high);
        System.out .println ("After the 2nd Call");
        merge(low, middle, high);
    }
} 
```

函数调用

```
mergesort(0,7); 
```

输出是

> 第一次通话之前
> 
> 第一次通话之前
> 
> 第一次通话之前
> 
> 第一次通话后
> 
> 第二次通话后
> 
> 第一次通话后
> 
> 第一次通话之前
> 
> 第一次通话后
> 
> 第二次通话后
> 
> 第二次通话后
> 
> 第一次通话后
> 
> 第一次通话之前
> 
> 第一次通话之前
> 
> 第一次通话后
> 
> 第二次通话后
> 
> 第一次通话后
> 
> 第一次通话之前
> 
> 第一次通话后
> 
> 第二次通话后
> 
> 第二次通话后
> 
> 第二次通话后

在上面的代码和结果中让我感到困惑的是第二次递归调用。我正在理解第四个输出行之前的流程（即：在第一次调用之后）。但我不明白为什么它在（第一次通话后）之后输出（第二次通话后）。根据我对代码的理解，在输出之后（在第一次调用之后），应该调用带有参数（中+1，高）的合并排序函数，它应该输出（在第一次调用之前）并使用合并排序进入递归调用（低，中）。我对一个递归调用函数很满意，并且理解并与前斐波那契示例同步。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-22T14:16:41.647

在第四个输出行，您已经从第一个调用和随后的 2 个递归调用返回，所以现在控制到达`System.out .println ("After the 1st Call");`

因此，`low < high`在第二次递归调用后条件为假，因此您只需退出该函数。然后，控制权返回到第二次递归调用之后的行。

**提示** 我在学习递归时经常做的一件事是跟踪堆栈深度（例如为此传递一个参数），然后在您的输出中根据堆栈深度缩进输出。这可以帮助您可视化您在递归链中的位置，并使调试更容易。

因此，您的调试输入可能类似于以下内容：

```
entered method, low = 0, high = 10
  entered method, low = 0, high = 5
     entered method, low = 0, high = 2
     exiting method, low = 0, high = 2
  exiting method, low = 0, high = 5
exiting method, low = 0, high = 10 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-22T14:20:19.460

跟着执行就行了...

```
First call 0,7 --> enters if, middle = 3 (integer division), calls again as (0,3)
Second call 0,3 --> enters if, middle = 1, calls again as (0,1)
Third call 0,1 --> enters if, middle = 0, calls again as (0,0)
Fourth call 0,0 --> does not enter if, back to third call
Third call 0,1 --> calls as middle+1,high which is (1,1)
Fifth call 1,1 --> does not enter if, back to third call
Third call 0,1 --> calls the string you didn't expect 
```

可以继续，但这就是执行您不期望的字符串的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:18:43.167

你也可以打印出`high`and的值`low`。遵循递归会容易得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:17:18.767

尝试打印`middle`变量的值。

最佳实践要求您不要在没有任何变量输出的情况下使用“函数前”样式的调试消息进行编码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-22T14:20:59.937

在输出 4 行后 low = 0, middle = 0, high = 1 所以调用 mergesort(middle+1,high) 不会打印任何内容（ 1 < 1 为假）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-22T14:35:52.090

下面的缩进对应于递归：

```
mergesort(0, 7)
    middle=3
    "Before the 1st Call"
    mergesort(0, 3)
        middle=1
        "Before the 1st Call"
        mergesort(0, 1)
            middle=0
            "Before the 1st Call"
            mergesort(0, 0)
                (0 < 0) is false so return
        "After the 1st Call"
        mergesort(1, 1)
            (1 < 1) is false so return
        "After the 2nd Call"

        etc ... 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-07T20:11:54.693

运行这段代码可以很好地理解递归。我已经考虑了控制台中的堆栈深度。希望它能让它易于理解！

```
 #include "stdafx.h"
    #include <iomanip>
    using namespace std;
    static int stackdepth=0;
    void mergesort(int[],int,int);
    void merge(int[],int,int,int);
    void  space(int);
    int main(int argc,char *argv[])
    {
        int a[8]={5,7,1,4,9,3,2,0};
        mergesort(a,0,7);
        for(int i=0;i<10;i++)
    //  cout<<a[i]<<endl;
        return 0;
    }
    void mergesort(int a[],int low,int high)
    {
        int mid;

        if(low<high)
        {

            mid=(low+high)/2;
            space(stackdepth);
            cout<<"First Recursion Enter";
            cout<<" Low :"<<low<<" Mid :"<<mid<<endl;
            stackdepth++;
            mergesort(a,low,mid);
            stackdepth--;
            space(stackdepth);
            cout<<"First Recursion Exit";
            cout<<" Low :"<<low<<" Mid :"<<mid<<endl;
            space(stackdepth);
            stackdepth++;
            cout<<"Second Recursion Enter";
            cout<<" Mid+1 :"<<mid+1<<" High :"<<high<<endl;
            mergesort(a,mid+1,high);
            stackdepth--;
            space(stackdepth);
            cout<<"Second Recursion Exit";
            cout<<" Low :"<<mid+1<<" High :"<<high<<endl;
            space(stackdepth);
            cout<<"Merge Low :"<<low<<" Mid :"<<mid<<"High :"<<high<<endl;
            merge(a,low,mid,high);
            cout<<endl;
            space(stackdepth);
            cout<<"------------------------------------------------------------------------------------------"<<endl;
        }
    }
    void space(int stackdepth)
    {
        for(int i=0;i<stackdepth;i++)
        cout<<"                     ";

    }
    void merge(int a[],int low,int mid,int high)
    {
    //  cout<<endl;
    //  cout<<"Merging Begins"<<endl;
        int b[8];
        int i,k,j;
        i=low;k=low;j=mid+1;
        while(i<=mid && j<=high)
        {
            if(a[i]<a[j])
            {
                    b[k++]=a[i++];
            }
            else
            {
                b[k++]=a[j++];
            }
        }
        while(i<=mid)
            b[k++]=a[i++];
        while(j<=high)
            b[k++]=a[j++];
        space(stackdepth);
        for(int i=low;i<=high;i++)
        {
            a[i]=b[i];
        cout<<a[i]<<" ";
        }
            //cout<<"Low :"<<low<<" Mid :"<<mid<<" High :"<<high<<endl;
        //  cout<<"Merging Ends"<<endl;
        //  cout<<endl;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-10T13:43:38.100

合并排序使用递归算法来创建高度为 Log N 的完整二叉树，其中 N 是该树的节点数（这就是为什么如此高效的原因）。在下一张图片中，您可以逐步看到针对您的案例执行此算法的流程，以及创建的二叉树（我认为这是了解其工作原理的最佳方式）：

[使用包含 8 个位置的数组的合并排序生成的二叉树](http://i.stack.imgur.com/EBn3r.jpg)

合并排序所做的是将数组递归地分成两半，首先到最低的一半，直到我们到达一个单一元素，然后从最近到达的最低元素中分割出较高的一半。这就是为什么它每次调用都会调用自己两次，以便创建一个完整的二叉树，当我们到达一个单元（带有叶节点）时停止，只有在我们有两个单元（带有父节点）时才合并。在下图中，您可以逐步查看数组是如何递归拆分的：

[使用合并排序逐步划分 8 个元素的数组](http://i.stack.imgur.com/dBcBw.jpg)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-05-10T03:39:25.927

转到eclipse调试工具。按照步骤，你会发现规则双递归。我就是做这个的。

# multithreading - Perl 多线程 - 在第一个线程成功时退出

> ID：11157928
> 
> 赞同：2
> 
> 时间：2012-06-22T14:12:59.550
> 
> 标签：multithreading, perl

我绝不是 perl 或多线程方面的专家，但我确信我“做错了”，需要一些关于如何改变它的指导，这样我就不会收到线程退出警告。

如您所见，该程序读取参数 0，查找与主机名关联的每个 IP 地址，然后测试每个 IP 以查看 ssh 是否正在运行。

此脚本的目的是为每个主机生成一个 tcp 测试并返回第一个成功的 tcp 连接。

任何人都可以提出一种更可靠且不需要睡眠的方法吗？

```
use strict;
use warnings;
BEGIN {
    use Config;
    $Config{useithreads} or die('Recompile Perl with threads to run this program.');
}
use threads;
use IO::Socket::INET;
$| = 1;

unless($ARGV[0]){ die("error please use argument")}

my $timeoutval=3;
my $testHost=$ARGV[0];
my $dlquery=`dig $testHost | grep 'IN A'`;
my $SUCCESS=0;

sub testSSHhost {
    my $fqdn = shift;
    my $socket = new IO::Socket::INET (
            PeerHost => $fqdn,
            PeerPort => '22',
            Proto => 'tcp',
            Timeout => $timeoutval,
    ) or return "ERROR in Socket Creation : $!\n";

    my $tcpData = <$socket>;
    $socket->close();
    if ($tcpData && $tcpData=~/SSH/){
            print "$fqdn\n";
            $SUCCESS=1;
            exit(0);
    }
    return $fqdn;
}

my @threads;
for my $line (split(/\n/,$dlquery)){
    my @linesplit=split(/ /,$line);
     $linesplit[0]=~s/\.$//;
     $linesplit[0]=~s/ *//g;
     my $t = threads->new(\&testSSHhost, $linesplit[0]);
     push(@threads,$t);
}

while (!$SUCCESS){sleep 0.3} 
```

我真正想要避免的是“一个线程在 2 个线程运行时退出。” 错误消息或“分段错误”消息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T15:28:31.463

像这样的东西（**未经测试！**）：

```
use Modern::Perl;
use threads;
use Thread::Queue;
use IO::Socket::INET;
$| = 1;

my $testHost = $ARGV[0];
my $dlquery  = `dig $testHost | grep 'IN A'`;
my $config   = { NUMBER_OF_THREADS => 5 };      #how many threads you gonna use?

my $queue           = Thread::Queue->new;
my $queue_processed = Thread::Queue->new;

for my $line ( split( /\n/, $dlquery ) ) {
    my ($ip) = split( / /, $line );
    $ip =~ s/\.$//;
    $ip =~ s/ *//g;

    $queue->enqueue($ip);
}

foreach my $thread_id ( 1 .. $config->{NUMBER_OF_THREADS} ) {

    $queue->enqueue(undef);
    my $thread = threads->create( \&testSSHhost() )->detach();
}

while ( $queue->pending() ) {

    my $result = $queue_processed->dequeue();

    if ( $result->{status} ) {

        say $result->{ip};
    }
}

sub testSSHhost {

    while ( my $fqdn = $queue->dequeue() ) {

        my $status = 0;

        my $socket = new IO::Socket::INET(
            PeerHost => $fqdn,
            PeerPort => 22,
            Proto    => 'tcp',
            Timeout  => 3,
        ) or return "ERROR in Socket Creation : $!\n";

        my $tcpData = <$socket>;
        $socket->close();
        if ( $tcpData && $tcpData =~ /SSH/ ) {

            $status = 1;
        }

        $queue_processed->enqueue( { ip => $fqdn, status => $status, } );
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T14:16:36.717

您可以使用 Qeus 来实现它： [http ://search.cpan.org/dist/Thread-Queue/lib/Thread/Queue.pm](http://search.cpan.org/dist/Thread-Queue/lib/Thread/Queue.pm)

在产生线程之前，您创建一个队列，然后让线程将成功的 IP 地址推入其中。然后父进程将阻止出队，直到弹出一些东西。

# magento - 如何获取产品的尺寸到购物车页面

> ID：11157933
> 
> 赞同：0
> 
> 时间：2012-06-22T14:13:17.583
> 
> 标签：magento, size, cart

我有产品尺寸（XS、XL、...）。

我想在购物车表大小中添加列，其中显示产品的大小。

我在这个表中添加了 SKU $_item->getSku(); 这行得通。但是 $_item->getSize(); 不工作。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T02:52:47.130

尝试添加`->addFieldToSelect('*')`，它将在返回数据中添加与您的产品关联的每个属性，您可以将 * 替换为您尝试显示的属性的属性代码

问题是，它会返回在 eav_attribute_option 或 eav_attribute_option_value 中使用的整数（不知道为什么有 2 个不同的表，一个有值，一个有排序顺序，它不像 Magento 甚至将一个值链接到 2 个选项），但是如果你使用以下代码

```
$attributeInfo = Mage::getResourceModel('eav/entity_attribute_collection')->setCodeFilter('ATTRIBUTE_CODE')->getFirstItem();

$sizeValues = array();

// populates sizevalue array with data
foreach ($attributeOptions as $key => $value)
{
    $sizeValues[$value['value']] = $value['label'];
} 
```

你得到一个值数组，它们的索引是它在你的集合中返回的值

# ios - 放大界面生成器

> ID：11157937
> 
> 赞同：0
> 
> 时间：2012-06-22T14:13:28.920
> 
> 标签：ios, xcode, interface-builder

嗨，只是一个简单的问题，我有一个 30 英寸的显示器，当 Xcode 的 IB 部分打开时，iPhone 屏幕矩形看起来很小，周围有很多浪费的空间。有没有办法在屏幕上类似这样大没有实际使尺寸更大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T14:26:40.140

不，它看起来不像：

![Xcode Editor > Canvas > Zoom 菜单显示 100% 为最高缩放级别](../Images/c0fbd0fcf2c72d9ef8744f307c61d865.png)

界面构建器故事板画布被限制为 100% 作为最大缩放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-09T14:49:10.773

要在 Interface Builder 中进行缩放，请务必选择故事板，然后使用以下键盘快捷键。

**放大** - `⌘</kbd>+`+``

**缩小**-`⌘</kbd>+`-``

**放大至 100%** - `SHIFT`+`⌘</kbd>+`=``

# extjs - 如何对插入树存储的项目进行排序并在树面板中排序显示？extjs 4.07

> ID：11157941
> 
> 赞同：1
> 
> 时间：2012-06-22T14:13:50.707
> 
> 标签：extjs, tree, controller, extjs4, treepanel

我想知道如何将项目插入排序的树库中，如果 extjs 中有办法做到这一点。然后我想让这些项目出现在树面板中排序，尽管树面板中可能已经有一些节点；

所以，这个问题可能是，我如何让树形面板根据我商店中的内容重新加载它所显示的内容。让我明确一点，我不想从某个数据源重新加载商店。我想重新加载面板以反映商店中包含的内容。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:27:54.660

没有真正的默认方法可以做到这一点。你要做的是在页面上创建一个空商店，它使用与树相同的模型，就像这样非常简单：

```
var mySortStore = Ext.create("Ext.data.Store", {
    model: "MyTreeStore",
    data:  []
}); 
```

然后，当您将节点添加到树时，请改用此函数：

```
function addNodeSorted(node, childToBeAdded){
    //clear the store from previous additions
    mySortStore.removeAll();
    //remove old sorters if they are dynamically changing
    mySortStore.sort();
    //add the node into the tree
    node.appendChild(childToBeAdded);
    var cn = node.childNodes,
        n;

    //remove all nodes from their parent and add them to the store
    while ((n = cn[0])) {
        mySortStore.add(node.removeChild(n));
    }

    //then sort the store like you would normally do in extjs, what kind of sorting you want is up to you
    mySortStore.sort('height', 'ASC');//this is just an example

    //now add them back into the tree in correct order
    mySortStore.each(function(record){
        node.appendChild(record);
    });
} 
```

# c - 管道设置终端到 gnuplot 管道在屏幕上产生垃圾

> ID：11157942
> 
> 赞同：1
> 
> 时间：2012-06-22T14:13:50.920
> 
> 标签：c, pipe, gnuplot

我有一个通往 gnuplot 的管道，我用它来绘制文件。该文件可以很好地绘制并在屏幕上生成，但是当我尝试管道时`set terminal jpeg`，`set output file.jpeg`屏幕上会出现垃圾。有没有其他人有同样的问题。这是代码：

```
 FILE *gnuplotPipe = popen("gnuplot -persist","w");
    fprintf(gnuplotPipe, "set terminal jpeg\n");     //without these two lines it works
    fprintf(gnuplotPipe, "set output %s.jpeg\n ",fileName);

    int i = 2;
    if (gnuplotPipe) 
    {  
      fprintf(gnuplotPipe, "plot ");
       ....//plot some stuff,it is tested works.
      }
      fprintf(gnuplotPipe, "\n");
      fflush(gnuplotPipe);  
      fprintf(gnuplotPipe,"exit \n");  
      pclose(gnuplotPipe);  
    } 
```

我也尝试在这两个命令之后刷新，但没有结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:21:13.353

您需要将文件名括在引号中，例如：

```
fprintf(gnuplotPipe, "set output \"%s.jpeg\"\n ",fileName); 
```

# 3dsmax - 更新插件以使用 Max 2013 时出现链接错误 LNK2019

> ID：11157943
> 
> 赞同：0
> 
> 时间：2012-06-22T14:14:01.313
> 
> 标签：3dsmax

这是一个与 3ds Max 2013 的插件更新相关的问题。不用说，这个插件适用于所有先前版本的 3ds Max。

我在`BMMSplitFilename()`功能上收到链接错误 LNK2019。我怀疑它背后的unicode问题。

这是 3ds Max 2013 SDK 的 bitmap.h 中定义的 BMMSplitFilename() 的完整定义：

```
BMMExport void BMMSplitFilename(const MCHAR *name, MCHAR *directory, MCHAR *filename, MCHAR *extenstion) 
```

谁能告诉我为什么我会得到 LNK2019？而且，如何解决这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:09:22.763

我们正在使用 unicode 字符集进行编译，并且在 Additional Linker Dependencies 中有 bmm.lib。然而，我们发现我们必须在两个位置指定 unicode：

1.  配置属性 > 常规 > 字符集必须设置为“使用 Unicode 字符集”；和
2.  配置属性 > 资源 > 常规 > 预处理器定义必须设置为`_UNICODE;UNICODE;%(Preprocessor Definitions)`.

# socialengine - SocialEngine 4 我想只允许所有者编辑

> ID：11157946
> 
> 赞同：0
> 
> 时间：2012-06-22T14:14:07.250
> 
> 标签：socialengine

我目前正在处理的现有项目基于 SocialEngine 4，我必须扩展插件以允许成员创建新内容/编辑自己的内容。现在我得到它让他们做出新的条目。他们还可以进行全局编辑。现在我的问题是如何将其更改为更精细的权限。由于我没有找到任何关于“ **engine4_authorization_permissions** ”中内容的纪录片，如果有人能向我解释一下，那就太好了，因为 socialengineforum.com 已离线。

打招呼

简

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T09:30:56.067

请查看组插件中的权限使用。

<<<<

您也可以在插件中使用相同的权限。

# php - PHP 中的 XPath 多维数组

> ID：11157950
> 
> 赞同：0
> 
> 时间：2012-06-22T14:14:26.250
> 
> 标签：php, arrays, variables, xpath

我正在抓取一个主要基于表格的网站。我有`<tr>`标签，每个标签都代表一个类别，其中的`<td>`标签代表类别的属性。

使用 Xpath 我得到了`<tr>`很好的结果，但其中的所有`<td>`信息都集中为一个字符串：

```
$html_string = file_get_contents('testpage.html');
$dom = new DOMDocument();
$dom->loadHTML($html_string);
$xpath = new DOMXpath($dom);
$context_nodes = $xpath->query('//table[@id="category"]/tr[not(starts-with(@id, "category"))]'); 
```

并且每个人都可以`<td>`很好，但没有回顾性地参考以下类别：

```
$context_nodes = $xpath->query('//table[@id="category"]/tr[not(starts-with(@id, "category"))]/td'); 
```

我以后想做的是能够引用每个类别的属性。我想我可以用 $context_nodes[2] 等来做到这一点，认为它创建的数组是一个多维字符串数组。情况似乎并非如此。

我将如何从 xpath 信息创建一个数组，在该数组中我可以根据识别我特别想要的类别来获取类别的属性。例如火车[1][2]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T00:20:16.237

您的第二次尝试是正确的。PHP（或者，更确切地说，libxml）保留对您选择的节点从其返回的上下文的引用，允许您精确地执行您需要的情况。

**XML**

```
<root>
    <cat name="category 1">
        <prop>prop 1.1</prop>
        <prop>prop 1.2</prop>
    </cat>
    <cat name="category 2">
        <prop>prop 2.1</prop>
        <prop>prop 2.2</prop>
    </cat>
</root> 
```

**PHP**

```
$xml = new SimpleXMLElement($xml);
$props = $xml->xpath('cat/prop');
foreach($props as $prop) {
    //let's go back up...
    $parent_cat = $prop->xpath('parent::*/@name');
    echo '<p>'.$prop.' (property of '.$parent_cat[0].')</p>';
} 
```

请注意我们如何从节点的点向上导航到树`prop`以引用父类别。不确定这是否是您的意思，但希望对您有所帮助。

# php - 具有相同参数的相同函数的不同输出

> ID：11157952
> 
> 赞同：3
> 
> 时间：2012-06-22T14:14:28.940
> 
> 标签：php, string, string-length

我对以下字符串函数感到困惑

`echo strlen("l\n2"); //give 3 in output`

然而

`echo strlen('l\n2'); //give 4 in output`

谁能解释为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:17:29.173

因为当您使用单引号 (' ') 时，PHP 不会将 扩展`\n`为单个换行符，而在双引号 (" ") 中，`\n`会转换为换行符（即单个字符），从而给出 3 个字符

取自 PHP 的字符串文档： http: [//php.net/manual/en/language.types.string.php](http://php.net/manual/en/language.types.string.php)

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T14:16:25.647

`\n`当字符串用单引号括起来时，不会被解析为换行符。相反，它被视为一个文字`\`，后跟`n`.

# java - java.lang.RuntimeException：无法实例化服务

> ID：11157953
> 
> 赞同：3
> 
> 时间：2012-06-22T14:14:32.733
> 
> 标签：java, android, debugging

我正在尝试编写一个监视短信的应用程序。我想从我的主 Activity 类启动一个服务，但该服务由于某种原因没有启动。我认为我如何在清单文件中声明我的服务或如何从我的活动中调用它可能存在问题。这是我的活动代码的一部分：

```
public class TablighBlockActivity extends Activity {
    /** Called when the activity is first created. */
    private ToggleButton toggEnable;

    public void onCreate(Bundle savedInstanceState) {
        if (loadState("running")==false){startService(new Intent(this, SMSMonitor.class));}
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main); 
```

这是我的服务类的一部分：

```
public class SMSMonitor extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    Intent i = new Intent(context,SMSMonitor.class);
    i.setClass(context, SMSMonitor.class);
    context.startService(i); 
```

这是我的清单文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="tabligh.block"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="3" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <receiver android:name="SMSMonitor">  
            <intent-filter>  
                <action android:name="android.intent.action.BOOT_COMPLETED" /> 
                <action android:name="android.provider.Telephony.SMS_RECEIVED"></action> 
            </intent-filter>  

        </receiver>

        <activity
            android:name=".TablighBlockActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service android:enabled="true" android:name=".SMSMonitor"
                                    android:process=":smsmonitor"
                                    ></service>
    </application>

</manifest> 
```

这是错误日志：

```
06-22 13:46:14.649: W/dalvikvm(1013): threadid=3: thread exiting with uncaught exception (group=0x4000fe70)
06-22 13:46:14.668: E/AndroidRuntime(1013): Uncaught handler: thread main exiting due to uncaught exception
06-22 13:46:15.038: E/AndroidRuntime(1013): java.lang.RuntimeException: Unable to instantiate service tabligh.block.SMSMonitor: java.lang.ClassCastException: tabligh.block.SMSMonitor
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2449)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.app.ActivityThread.access$2800(ActivityThread.java:112)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1744)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.os.Looper.loop(Looper.java:123)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.app.ActivityThread.main(ActivityThread.java:3948)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at java.lang.reflect.Method.invokeNative(Native Method)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at java.lang.reflect.Method.invoke(Method.java:521)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:782)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:540)
06-22 13:46:15.038: E/AndroidRuntime(1013):     at dalvik.system.NativeStart.main(Native Method)
06-22 13:46:15.038: E/AndroidRuntime(1013): Caused by: java.lang.ClassCastException: tabligh.block.SMSMonitor
06-22 13:46:15.038: E/AndroidRuntime(1013):     at android.app.ActivityThread.handleCreateService(ActivityThread.java:2446)
06-22 13:46:15.038: E/AndroidRuntime(1013):     ... 10 more 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:19:28.843

```
 public class SMSMonitor extends BroadcastReceiver { 
```

你是 SMSMonitor 这是一个 BroadcastReceiver 而不是服务

```
Intent i = new Intent(context,SMSMonitor.class);
    i.setClass(context, SMSMonitor.class);
    context.startService(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:17:01.897

`tabligh.block.SMSMonitor`您的清单文件中有接收者和服务吗？

我认为它应该是 Service.and 将 BroadCastReceiver 扩展到 SMSMonitor。

```
 <receiver android:name="SMSMonitor"> **and**  

   <service android:enabled="true" android:name=".SMSMonitor"
                                    android:process=":smsmonitor"
                                    ></service> 
```

**和**

```
Intent i = new Intent(context,SMSMonitor.class);
//i.setClass(context, SMSMonitor.class);<<Remove this line no need...
context.startService(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T14:19:27.317

我有时会遇到奇怪的错误，因为我没有从`onCreate()`标准`super.onCreate()`和`setContentView()`.

就像其他人所说的那样，请确保您`Service`已将`Manifest file`. 这和在创建活动后忘记添加活动是我最大的错误！

编辑：对不起，不知何故错过了`Manifest`你放在那里的所有代码。

# diff - 使用 cksum 检查防病毒伪影

> ID：11157954
> 
> 赞同：0
> 
> 时间：2012-06-22T14:14:33.760
> 
> 标签：diff, checksum, antivirus

我正在寻找一种好方法来查看 Avira Anti-virus ( [www.avira.com](http://www.avira.com) ) 是否在扫描后留下任何痕迹。我在一个环境中工作，其中任何内容都不能被修改，并且盒子按照用户规范与网络断开连接。这个概念是使用 cksum 来监控一个盒子上的所有文件，然后通过管道输出到一个文本文件，并区分 Avira 前后的 cksum。

我努力了：

```
$ find . | xargs cksum | sort > cksum_A.txt 
```

和

```
$ find . \! -type p -exec cksum {} \; > cksum_A.txt 
```

我从两个文件中删除了 cksum_A.txt 和 cksum_B.txt 的所有临时和永久实例，因为它肯定会用作差异。

在多个**没有**运行反病毒程序的情况下，发现“./.local/share/gvfs-metadata...”和“./.gconf/apps/nautilus...”已根据差异。

问题是，有没有更好的方法来识别位级别的伪影？或者只是忽略这些文件并继续前进？

谢谢！

石匠

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:25:18.523

您可能希望从单用户模式运行，或者至少关闭 GUI 以运行扫描，因为 GUI 应用程序和守护程序可能会在两者之间写入文件。

# ios - 应用商店本地化描述未正确显示

> ID：11157956
> 
> 赞同：2
> 
> 时间：2012-06-22T14:14:45.657
> 
> 标签：ios, localization, app-store, app-store-connect

这是我第一次尝试本地化应用商店描述，所以我从英语（我设置为默认设置）和我的语言开始是泰语。在应用更新提交之前，我在 itune connect web 面板中进行了设置。今天我的应用程序获得了批准，但是当我在应用程序商店中查看它时，描述并没有像我预期的那样翻译。以前有人遇到过这种问题吗？我不知道我做错了什么，这应该是一个简单的过程。这是我的测试环境：

*   我用的是泰国的iTunes账号。
*   我将 iphone 设置中的语言设置为泰语并重新启动应用商店（从任务管理器中杀死它并再次打开它）。
*   我将我的本地化设置为泰语。但这一切似乎都不起作用，我仍然用英语看到它。

甚至网络上的描述也没有显示泰语英语链接： http: [//itunes.apple.com/en/app/tiny-thai-news-reader-lite/id509771273](http://itunes.apple.com/en/app/tiny-thai-news-reader-lite/id509771273?mt=8) ?mt=8 泰语链接：[http://itunes .apple.com/th/app/tiny-thai-news-reader-lite/id509771273?mt=8](http://itunes.apple.com/th/app/tiny-thai-news-reader-lite/id509771273?mt=8) （现在我通过在英文描述上方添加泰语描述进行热修复）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T02:17:00.993

今天我再次检查了应用商店，描述显示正确，我想可能需要一些时间才能正确设置。Itune 连接和应用商店过程对我来说仍然是个谜。

# linux - 如何在每个目录中查找具有最高编号的文件作为文件名？

> ID：11157958
> 
> 赞同：7
> 
> 时间：2012-06-22T14:14:56.927
> 
> 标签：linux, bash

我有一个看起来像这样的文件结构

```
./501.res/1.bin
./503.res/1.bin
./503.res/2.bin
./504.res/1.bin 
```

我想`.bin`在每个目录中找到文件名最大的文件的文件路径。所以我正在寻找的输出将是

```
./501.res/1.bin
./503.res/2.bin
./504.res/1.bin 
```

一个文件可以有的最大数字是 9。

**问题**

我如何在 BASH 中做到这一点？

我已经到了`find .|grep bin|sort`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T14:42:59.997

Glob 保证按词汇顺序扩展。

```
for dir in ./*/
do
    files=($dir/*)           # create an array
    echo "${files[@]: -1}"   # access its last member
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:29:56.517

测试：

```
find . -type d -name '*.res' | while read dir; do
    find "$dir" -maxdepth 1 | sort -n | tail -n 1
done 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-22T14:30:34.460

怎么用`awk`？你可以很简单地得到第一次出现：

```
[ghoti@pc ~]$ cat data1
./501.res/1.bin
./503.res/1.bin
./503.res/2.bin
./504.res/1.bin
[ghoti@pc ~]$ awk 'BEGIN{FS="."} a[$2] {next} {a[$2]=1} 1' data1
./501.res/1.bin
./503.res/1.bin
./504.res/1.bin
[ghoti@pc ~]$ 
```

要获得最后一次出现，您可以通过几种管道：

```
[ghoti@pc ~]$ sort -r data1 | awk 'BEGIN{FS="."} a[$2] {next} {a[$2]=1} 1' | sort
./501.res/1.bin
./503.res/2.bin
./504.res/1.bin
[ghoti@pc ~]$ 
```

鉴于您正在使用“find”和“grep”，您可能可以这样做：

```
find . -name \*.bin -type f -print | sort -r | awk 'BEGIN{FS="."} a[$2] {next} {a[$2]=1} 1' | sort 
```

**这是如何运作的？**

该`find`命令有许多有用的选项，包括通过 glob 选择文件、选择文件类型等的能力。它的输出你已经知道，它成为`sort -r`.

首先，我们对输入数据进行反向排序（`sort -r`）。这确保了在任何目录中，编号最高的文件将首先出现。该结果被输入 awk。FS 是字段分隔符，它`$2`包含“/501”、“/502”等内容。Awk 脚本具有`condition {action}`对每一行输入进行评估的部分。如果缺少某个条件，则该操作将在每一行上运行。如果条件为“1”且没有操作，则打印该行。所以这个脚本分解如下：

*   `a[$2] {next}`- 如果存在下标$2（即“/501”）的数组`a`，则直接跳到下一行。否则...
*   `{a[$2]=1}`- 将数组下标 $2 设置为 1，以便将来第一个条件评估为真，然后...
*   `1`- 打印该行。

此 awk 脚本的输出将是您想要的数据，但顺序相反。最后`sort`将事情按您期望的顺序放回原处。

现在......这是很多管道，当您要求它同时处理数百万行输入时，排序可能会有点资源消耗。这个解决方案对于少量文件来说已经足够了，但是如果你要处理大量的输入，请告诉我们，我可以提出一个一体化的 awk 解决方案（这将需要超过 60 秒来写）。

**更新**

根据 Dennis 的明智建议，我上面包含的 awk 脚本可以通过将其从

```
BEGIN{FS="."} a[$2] {next} {a[$2]=1} 1 
```

至

```
BEGIN{FS="."} $2 in a {next} {a[$2]} 1 
```

虽然这在功能上是相同的，但优点是您只需定义数组成员而不是为它们分配值，这可能会节省内存或 cpu，具体取决于您的 awk 实现。无论如何，它更干净。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:29:29.193

我想出了这样的东西：

```
for dir in $(find . -mindepth 1 -type d | sort); do
   file=$(ls "$dir" | sort | tail -n 1);
   [ -n "$file" ] && (echo "$dir/$file");
done 
```

也许它可以更简单

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T14:38:24.023

如果从 find 中调用 shell 是一个选项，试试这个

```
 find * -type d -exec sh -c "echo -n './'; ls -1 {}/*.bin | sort -n -r | head -n 1" \; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-22T14:45:44.977

这是一个班轮

```
find . -mindepth 1 -type d | sort | sed -e "s/.*/ls & | sort | tail -n 1 | xargs -I{} echo &\/{}/" | bash 
```

# iphone - 未找到 -lOAuthConsumer_iPhone 的库

> ID：11157973
> 
> 赞同：0
> 
> 时间：2012-06-22T14:15:58.490
> 
> 标签：iphone, xcode, app-store

我有一个要上传到 AppStore 的 iphone 应用程序，但我被 Xcode 卡住了。

当我想创建一个构建时，它一直告诉我：

未找到 -lOAuthConsumer_iPhone 的库

我在网上到处检查过，并没有真正找到问题所在。请记住，我不是 iphone 开发人员。我只知道如何提交应用程序，但这里的这个错误真的很烦人，因为我找不到它是什么。

我在哪里可以找到该库以及如何安装它？以及安装在哪里？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:19:12.123

似乎该项目要求 OAuthConsumer 库，可以在以下位置找到：[https](https://github.com/jdg/oauthconsumer) ://github.com/jdg/oauthconsumer 。

您首先需要检查您的项目是否确实需要该库，并确保按照 OAuthConsumer 自述文件中的说明包含 Security.framework

# android - 安卓检查下载成功

> ID：11157975
> 
> 赞同：1
> 
> 时间：2012-06-22T14:16:04.767
> 
> 标签：android, http-headers, httpresponse

为了下载东西，我使用 apache 类 HTTPResponse HTTPClient 等。我检查是否有这样的有效下载：

```
entity.writeTo(new FileOutputStream(outfile));
        if(outfile.length()!=entity.getContentLength()){
            long fileLength = outfile.length();
            outfile.delete();
            throw new Exception("Incomplete download, "+fileLength+"/"
                    +entity.getContentLength()+" bytes downloaded");

        } 
```

但似乎永远不会触发异常。如何正确处理？entity.getContentLength 是服务器上文件的长度还是接收到的数据量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:50:10.287

文件请求应始终带有 MD5 校验和。如果您有 MD5 标头，那么您需要做的就是对照生成的 MD5 文件检查它。然后你完成了，最好这样做，因为你可以拥有一个具有相同字节数的文件，但一个字节在传输中会出现乱码。

```
 entity.writeTo(new FileOutputStream(outfile));
        String md5 = response.getHeaders("Content-MD5")[0].getValue();
        byte[] b64 = Base64.decode(md5, Base64.DEFAULT);
        String sB64 = IntegrityUtils.toASCII(b64, 0, b64.length);
        if (outfile.exists()) {
            String orgMd5 = null;
            try {
                orgMd5 = IntegrityUtils.getMD5Checksum(outfile);
            } catch (Exception e) {
                    Log.d(TAG,"Exception in file hex...");
            }
            if (orgMd5 != null && orgMd5.equals(sB64)) {
                Log.d(TAG,"MD5 is equal to files MD5");
            } else {
                Log.d(TAG,"MD5 does not equal files MD5");
            }
        } 
```

将此类添加到您的项目中：

```
public class IntegrityUtils {
public static String toASCII(byte b[], int start, int length) {
    StringBuffer asciiString = new StringBuffer();

    for (int i = start; i < (length + start); i++) {
        // exclude nulls from the ASCII representation
        if (b[i] != (byte) 0x00) {
            asciiString.append((char) b[i]);
        }
    }

    return asciiString.toString();
}

public static String getMD5Checksum(File file) throws Exception {
    byte[] b = createChecksum(file);
    String result = "";

    for (int i = 0; i < b.length; i++) {
        result += Integer.toString((b[i] & 0xff) + 0x100, 16).substring(1);
    }
    return result;
}

public static byte[] createChecksum(File file) throws Exception {
    InputStream fis = new FileInputStream(file);

    byte[] buffer = new byte[1024];
    MessageDigest complete = MessageDigest.getInstance("MD5");
    int numRead;

    do {
        numRead = fis.read(buffer);
        if (numRead > 0) {
            complete.update(buffer, 0, numRead);
        }
    } while (numRead != -1);

    fis.close();
    return complete.digest();
}
} 
```

# python - 在 Python 中分析文本文件

> ID：11157977
> 
> 赞同：1
> 
> 时间：2012-06-22T14:16:08.840
> 
> 标签：python, parsing

我有一个需要分析的文本文件。文件中的每一行都是这种形式：

```
7:06:32 (slbfd) IN: "lq_viz_server" aqeela@nabltas1  

7:08:21 (slbfd) UNSUPPORTED: "Slb_Internal_vlsodc" (PORT_AT_HOST_PLUS   ) Albahraj@nabwmps3  (License server system does not support this feature. (-18,327))

7:08:21 (slbfd) OUT: "OFM32" Albahraj@nabwmps3 
```

我需要跳过时间戳和`(slbfd)`只保留 IN 和 OUT 的行数。此外，根据引号中的名称，如果一行以开头，我需要增加不同变量`OUT`的变量计数，否则减少变量计数。我将如何在 Python 中执行此操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:39:53.820

使用正则表达式和拆分行的其他答案将*完成工作*，但如果您想要一个完全可维护的解决方案，并与您一起成长，您应该构建一个语法。我喜欢`pyparsing`这个：

```
S ='''
7:06:32 (slbfd) IN: "lq_viz_server" aqeela@nabltas1  
7:08:21 (slbfd) UNSUPPORTED: "Slb_Internal_vlsodc" (PORT_AT_HOST_PLUS   ) Albahraj@nabwmps3  (License server system does not support this feature. (-18,327))
7:08:21 (slbfd) OUT: "OFM32" Albahraj@nabwmps3'''

from pyparsing import *
from collections import defaultdict

# Define the grammar
num = Word(nums)
marker = Literal(":").suppress()
timestamp = Group(num + marker + num + marker + num)
label = Literal("(slbfd)")
flag = Word(alphas)("flag") + marker
name = QuotedString(quoteChar='"')("name")

line    = timestamp + label + flag + name + restOfLine
grammar = OneOrMore(Group(line))

# Now parsing is a piece of cake!  
P = grammar.parseString(S)
counts = defaultdict(int)

for x in P:
    if x.flag=="IN": counts[x.name] += 1
    if x.flag=="OUT": counts[x.name] -= 1

for key in counts:
    print key, counts[key] 
```

这给出了输出：

```
lq_viz_server 1
OFM32 -1 
```

如果您的示例日志文件更长，这看起来会更令人印象深刻。pyparsing 解决方案的美妙之处在于能够适应未来更复杂的查询（例如，抓取和解析时间戳、提取电子邮件地址、解析错误代码......）。这个想法是您编写独立于查询的语法 - 您只需将原始文本转换为计算机友好格式，将解析实现从其使用中抽象出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T14:31:49.890

我对您的规范做了一些疯狂的假设，这里有一个示例代码可以帮助您开始：

```
objects = {}
with open("data.txt") as data:
    for line in data:
        if "IN:" in line or "OUT:" in line:
            try:
                name = line.split("\"")[1]
            except IndexError:
                print("No double quoted name on line: {}".format(line))
                name = "PARSING_ERRORS"
            if "OUT:" in line:
                diff = 1
            else:
                diff = -1
            try:
                objects[name] += diff
            except KeyError:
                objects[name] = diff
print(objects) # for debug only, not advisable to print huge number of names 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-22T14:29:00.730

你有两个选择：

1.  使用的`.split()`功能`string`（如评论中指出的）
2.  将[`re`模块](http://docs.python.org/library/re.html)用于正则表达式。

我建议使用该`re`模块并创建一个带有命名组的模式。

食谱：

*   首先创建一个`re.compile()`包含命名组的模式
*   对文件进行`for`循环以获取使用`.match()`od 的行
*   在每行使用`.groupdict()`的创建模式对象
*   返回匹配对象以访问您感兴趣的值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-22T14:29:10.293

如果我认为文件被分成几行（我不知道是否属实），你必须`split()`对每一行应用函数。你会有这个：

```
["7:06:32", "(slbfd)", "IN:", "lq_viz_server", "aqeela@nabltas1"] 
```

然后我认为你必须能够应用任何逻辑来比较你需要的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-22T15:29:28.710

在刚刚*完成*标准发行版的模式下，这有效：

```
import re
from collections import Counter
# open your file as inF...
count=Counter()
for line in inF:
    match=re.match(r'\d+:\d+:\d+ \(slbfd\) (\w+): "(\w+)"', line)
    if match:
        if match.group(1) == 'IN': count[match.group(2)]+=1
        elif match.group(1) == 'OUT': count[match.group(2)]-=1

print(count) 
```

印刷：

```
Counter({'lq_viz_server': 1, 'OFM32': -1}) 
```

# node.js - 在节点下运行基于 mocha coffeescript 的测试时出现意外的“->”

> ID：11157989
> 
> 赞同：1
> 
> 时间：2012-06-22T14:16:59.923
> 
> 标签：node.js, coffeescript, mocha.js

我正在尝试在 Windows 下的节点上运行 mocha。我也决定了为什么不把一些 CoffeeScript 放进去取乐。

```
describe 'Array', ->
  describe '#indexOf()', ->
    it 'should return -1 when not present' ->
      [1,2,3].indexOf(4).should.equal -1 
```

问题是我遇到了一个错误：

```
C:\Users\ShaneC\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\coffee-script.js:51
      throw err;
            ^
Error: In C:\projects\BowlingKata\test\test.coffee, Parse error on line 3: Unexpected '->'
    at Object.parseError (C:\Users\ShaneC\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\parser.js:477:11)
    at Object.parse (C:\Users\ShaneC\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\parser.js:554:22)
    at C:\Users\ShaneC\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\coffee-script.js:43:20
    at Object..coffee (C:\Users\ShaneC\AppData\Roaming\npm\node_modules\coffee-script\lib\coffee-script\coffee-script.js:19:17)
    at Module.load (module.js:353:31) 
```

这是我的 mocha.opts 文件：

```
--reporter spec
--ui bdd
-r should
--compilers coffee:coffee-script 
```

关于我可能做错了什么的任何想法？我已经从[http://net.tutsplus.com/tutorials/javascript-ajax/better-coffeescript-testing-with-mocha/](http://net.tutsplus.com/tutorials/javascript-ajax/better-coffeescript-testing-with-mocha/)复制了代码，没有人报告任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T14:22:23.887

假设您正在调用一个函数`it`，参数*"should return -1 when not present"*，然后是一个检查它的函数，您需要用逗号分隔参数：

```
describe 'Array', ->
  describe '#indexOf()', ->
    it 'should return -1 when not present', ->
      [1,2,3].indexOf(4).should.equal -1 
```

这编译为：

```
describe('Array', function() {
  return describe('#indexOf()', function() {
    return it('should return -1 when not present', function() {
      return [1, 2, 3].indexOf(4).should.equal(-1);
    });
  });
}); 
```

# c# - MVVM 与 Unity 和单元测试架构设计

> ID：11157991
> 
> 赞同：8
> 
> 时间：2012-06-22T14:17:03.470
> 
> 标签：c#, unit-testing, architecture, mvvm, unity-container

我正在 WPF 中构建一个类似 Visual Studio 的应用程序，但在确定组件的最佳架构设计组织时遇到了一些问题。我计划使用 Unity 作为我的依赖注入容器和 Visual Studio 单元测试框架，并且可能使用 moq 来模拟库。

我将首先描述我的解决方案的结构，然后是我的问题：

我有一个**WPF 项目**，其中包含：

*   应用程序启动时我的 Unity 容器初始化（引导程序）（在 App.xaml.cs 中）
*   我所有的应用程序视图 (XAML)。

另一个名为**ViewModel**的项目包含：

*   我所有的应用程序视图模型。我所有的 ViewModel 都继承自 ViewModelBase，它公开了 ILogger 属性

我的初始化逻辑如下：

1.  应用程序启动
2.  Unity 容器创建和注册类型：MainView 和 MainViewModel
3.  解决我的 MainView 并显示它。

`var window = Container.Resolve<MainView>();`

`window.Show();`

我的 MainView 构造函数在其构造函数中接收 MainViewModel 对象：

```
public MainView(MainViewModel _mvm) 
```

1.  我的 MainViewModel 的每个面板都有一个子 ViewModel：

    ```
    public ToolboxViewModel ToolboxVM{get; set;}
    public SolutionExplorerViewModel SolutionExplorerVM { get; set; }
    public PropertiesViewModel PropertiesVM { get; set; }
    public MessagesViewModel MessagesVM { get; set; } 
    ```

我计划创建一个 InitializePanels() 方法来初始化每个面板。

现在我的问题是：我的 MainViewModel.InitializePanels() 如何初始化所有这些面板？给出以下选项：

**选项 1：**手动初始化 ViewModel：

```
ToolboxVM = new ToolboxViewModel();
//Same for the rest of VM... 
```

**缺点：**

*   我没有使用 Unity 容器，因此我的依赖项（例如 ILogger）不会自动解析

**选项 2：**通过注释我的属性来使用 setter 注入：

```
[Dependency]
public ToolboxViewModel ToolboxVM{get; set;}
//... Same for rest of Panel VM's 
```

**缺点：**

*   我读过应该避免 Unity Setter 依赖项，因为在这种情况下它们会与 Unity 产生依赖关系
*   我还读到你应该避免使用 Unity 进行单元测试，那么如何在我的单元测试中明确这种依赖关系？拥有许多依赖属性可能是配置的噩梦。

**选项 3：**使用 Unity 构造函数注入将我的所有面板视图模型传递给 MainViewModel 构造函数，以便它们由 Unity 容器自动解析：

```
public MainViewModel(ToolboxViewModel _tbvm, SolutionExploerViewModel _sevm,....) 
```

**优点：**

*   在创建时，依赖关系是显而易见的，这有助于构建我的 ViewModel 单元测试。

**缺点：**

*   拥有如此多的构造函数参数可能会很快变得丑陋

**选项 4：**在容器构建时注册我的所有 VM 类型。然后通过构造函数注入将 UnityContainer 实例传递给我的 MainViewModel：

```
public MainViewModel(IUnityContainer _container) 
```

这样我可以做类似的事情：

```
 Toolbox = _container.Resolve<ToolboxViewModel>();
        SolutionExplorer = _container.Resolve<SolutionExplorerViewModel>();
        Properties = _container.Resolve<PropertiesViewModel>();
        Messages = _container.Resolve<MessagesViewModel>(); 
```

**缺点：**

*   如果我决定不将 Unity 用于我的单元测试，正如许多人所建议的那样，那么我将无法解析和初始化我的面板视图模型。

鉴于这个冗长的解释，什么是最好的方法，以便我可以利用依赖注入容器并最终得到一个可单元测试的解决方案？

提前致谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:30:47.177

首先要做的事情...正如您所注意到的，您当前的设置在进行单元测试（复杂的 VM 初始化）时可能会出现问题。然而，简单地遵循[DI 原则](https://softwareengineering.stackexchange.com/q/153410/39194)，*依赖于抽象而不是具体化*，这个问题就会立即消失。如果您的视图模型将实现接口并且依赖项将通过接口实现，那么任何复杂的初始化都变得无关紧要，因为在测试中您只需使用模拟。

接下来，带注释的属性的问题是您在视图模型和 Unity 之间创建*了高度耦合*（这就是为什么它很可能是错误的）。理想情况下，注册应该在单个顶级点（在您的情况下是引导程序）处理，因此容器不会以任何方式绑定到它提供的对象。您的选项 #3 和 #4 是解决此问题的最常见解决方案，几乎没有注意事项：

*   到**#3**：过多的构造函数依赖通常可以通过在[外观类](http://en.wikipedia.org/wiki/Facade_pattern)中分组常见功能来缓解（但毕竟4 并*没有那么多）。*通常，正确设计的代码不会有这个问题。请注意，根据您`MainViewModel`所做的事情，您可能需要的只是*对子视图模型列表的*依赖，而不是具体的。
*   到**#4**：你不应该在单元测试中使用 IoC 容器。您只需手动创建`MainViewModel`（通过 ctor）并手动注入*模拟*。

我想再谈一点。考虑当您的项目增长时会发生什么。*将所有*视图模型打包到单个项目中可能不是一个好主意。每个视图模型都有自己的（通常与其他视图模型无关）依赖关系，所有这些东西都必须放在一起。这可能很快变得难以维护。相反，请考虑您是否可以提取一些常见功能（例如*消息传递*、*工具*）并将它们放在单独的项目组中（同样，拆分为 M-VM-V 项目）。

此外，当您有与功能相关的分组时，交换视图要容易得多。如果项目结构如下所示：

```
> MyApp.Users
> MyApp.Users.ViewModels
> MyApp.Users.Views
> ... 
```

为用户编辑窗口尝试不同的视图是重新编译和交换单个程序集 ( `User.Views`) 的问题。使用*一体*式方法，您将不得不重建应用程序的大部分，即使其中大部分根本没有改变。

**编辑：**请记住，*更改项目的现有结构*（即使是很小的）通常是一个非常*昂贵的*过程，具有较小/没有业务结果。您可能不被允许或根本负担不起这样做。*基于使用*的（DAL、BLL、BO 等）结构**确实有效**，只是随着时间的推移变得越来越重。您也可以使用混合模式，将*核心功能*按用途分组，并使用模块化方法简单地添加新功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T14:27:07.333

首先，您可能希望使用接口而不是具体类，这样您就可以在单元测试时传递模拟对象，即`IToolboxViewModel`代替`ToolboxViewModel`等。

话虽如此，我会推荐第三种选择——构造函数注入。这是最有意义的，因为否则您可能会调用`var mainVM = new MainViewModel()`并最终得到一个非功能视图模型。通过这样做，您还可以很容易地理解您的视图模型的依赖项是什么，从而更容易编写单元测试。

我会查看[此链接](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)，因为它与您的问题有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T16:12:18.800

我同意莱斯特的观点，但想补充一些其他的选择和意见。

在通过构造函数将 ViewModel 传递给 View 的地方，这有点不合常规，因为 WPF 的绑定功能允许您通过绑定到 DataContext 对象将 ViewModel 与 View 完全解耦。在您概述的设计中，视图与具体实现耦合并限制重用。

虽然服务外观将简化选项 3，但顶级 ViewModel 承担很多责任的情况并不少见（正如您所概述的）。您可以考虑的另一种模式是组装视图模型的控制器或工厂模式。工厂可以由容器支持来完成工作，但容器是从调用者那里抽象出来的。构建容器驱动应用程序的一个关键目标是限制了解系统如何组装的类的数量。

另一个问题是属于顶级视图模型的职责和对象关系的数量。如果您查看 Prism（WPF + Unity 的一个很好的候选者），它引入了由模块填充的“区域”的概念。一个区域可以表示由多个模块填充的工具栏。在这样的设计下，顶级视图模型的职责（和依赖关系！）更少，并且每个模块都包含可单元测试的 DI 组件。与您提供的示例相比，思维发生了重大转变。

关于选项 4，通过构造函数传入的容器在技术上是依赖反转，但它是以服务位置的形式而不是依赖注入的形式。在我告诉你这是一个非常滑的斜坡（更像是悬崖）之前已经走下这条路：依赖关系隐藏在类中，你的代码变成了一个“及时”疯狂的网络——完全不可预测，完全无法测试。