# StackOverflow 问答 10765000-10765999

# jquery-tabs - JQuery 选项卡和事件冒泡

> ID：10765006
> 
> 赞同：1
> 
> 时间：2012-05-26T09:11:39.710
> 
> 标签：jquery-tabs, event-bubbling

[问题是从JQuery Theme Roller](http://jqueryui.com/themeroller/)下载的 JQuery Tabs没有冒泡除此之外的任何事件。

例如，我有一个“body”标签的点击事件监听器。但是单击主题滚轮的任何选项卡都不会触发 body-tag-click-event-handler。

我认为 JQuery Tabs 代码正在停止事件传播。有谁知道如何解决这一问题？

# wcf - TCP 错误代码 10013 netTcpBinding 服务和 Silverlight 客户端的跨域策略错误

> ID：10765007
> 
> 赞同：2
> 
> 时间：2012-05-26T09:11:48.463
> 
> 标签：wcf, silverlight, iis, iis-7, nettcpbinding

想知道是否有人可以让我摆脱跨域策略的地狱。

我有一个使用 的双工 WCF 服务，`netTcpBining`客户端是 Silverlight 4 应用程序。当我自己托管服务时，它可以完美运行，我的 Silverlight 客户端可以毫无问题地使用该服务。但是，当我在 IIS 7 中托管它时，问题就开始了。当我在 IIS 中托管它时，我可以在以下位置看到该服务：

`http://localhost/Conference/VideoConferenceService.svc`

当我添加对托管在 IIS 中的服务的引用并尝试调用它时，我得到：

> CommunicationException：无法连接到 net.tcp://localhost/Conference/VideoConferenceService.svc。连接尝试持续了 00:00:03.3071892 的时间跨度。TCP 错误代码 10013：尝试以访问权限禁止的方式访问套接字。这可能是由于尝试以跨域方式访问服务而未将服务配置为跨域访问. 您可能需要联系服务的所有者以通过 HTTP 公开套接字跨域策略，并将服务托管在允许的套接字端口范围 4502-4534 中。

或者，如果看到实际错误有助于激发那些以前看过它的人，这就是它向我抛出的内容`Reference.cs`：

![在此处输入图像描述](../Images/8ee947c004fbc908834693d16fb985b1.png)

我已经检查了几乎所有关于解决跨域策略错误的解决方案，并且我已经将我`clientaccesspolicy.xml`的默认网站根目录放在 IIS 中，也放在`wwwroot`. 我还关闭了所有防火墙。我可以看到该政策，`http://localhost/clientaccesspolicy.xml` 但`http://127.0.0.1/clientaccesspolicy.xml`我仍然收到此错误。

这是我在 IIS 7 中托管的服务的 web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>

  <runtime>
    <gcServer enabled="true" />
  </runtime>

  <system.web>
    <compilation debug="false" />
  </system.web>
   <system.serviceModel>
     <services>
       <service name="VideoServer.VideoConferenceService">
         <endpoint address="" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IVideoConferenceService" contract="VideoServer.IVideoConferenceService" />
         <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
         <host>
           <baseAddresses>
                <add baseAddress="net.tcp://localhost:4502/VideoServer/" />
           </baseAddresses>
         </host>
       </service>
     </services>

    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding_IVideoConferenceService" portSharingEnabled="true" transactionFlow="false" transferMode="Buffered" listenBacklog="2147483647" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="2147483647" maxReceivedMessageSize="2147483647" closeTimeout="24.20:31:23.6470000" openTimeout="24.20:31:23.6470000" receiveTimeout="24.20:31:23.6470000" sendTimeout="24.20:31:23.6470000">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <reliableSession enabled="false" />
          <security mode="None">
            <message clientCredentialType="None" />
            <transport protectionLevel="None" clientCredentialType="None" />
          </security>
        </binding>
      </netTcpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="False" />
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
    <system.webServer>
        <directoryBrowse enabled="true" />
    </system.webServer>

</configuration> 
```

这是 Silverlight 客户端的`ServiceReferences.ClientConfig`文件：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <customBinding>
                <binding name="NetTcpBinding_IVideoConferenceService">
                    <binaryMessageEncoding />
                    <tcpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost/Conference/VideoConferenceService.svc"
                binding="customBinding" bindingConfiguration="NetTcpBinding_IVideoConferenceService"
                contract="ServiceReference1.IVideoConferenceService" name="NetTcpBinding_IVideoConferenceService" />
        </client>
    </system.serviceModel>
</configuration> 
```

有人有什么建议吗？到目前为止，这个烦人的错误已经花费了我几天的时间。任何帮助将不胜感激。

**编辑**

当我使用 fiddler 检查在我的网络会话中检索到的文件时，它显示我的浏览器正在检索客户端访问策略文件，所以我认为错误出在其他地方，WCF 只是向我抛出了这个错误？我还设置了 IE9 以在每次关闭时清除其缓存。看看下面。

![在此处输入图像描述](../Images/d7fcb5b9e356d67d3f0f7ab19c166e00.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T13:07:22.417

好吧，我只是设法让它工作。值得一提的几点是：

**1.**如果您查看我在上面发布的*错误* `ServiceReferences.ClientConfig`（当我将服务地址指定为时由 Visual Studio 生成`http://localhost/Conference/VideoConferenceService.svc`：），您可以看到 netTcp 端口`4502`不是作为端点的一部分生成的，这就是导致的原因TCP 错误 10016 ( `EndpointNotFoundException`) 以及 TCP 错误 10013。`ServiceReferences.ClientConfig is`实际上正确的是：

```
<configuration>
    <system.serviceModel>
        <bindings>
            <customBinding>
                <binding name="NetTcpBinding_IVideoConferenceService">
                    <binaryMessageEncoding />
                    <tcpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint address="net.tcp://localhost:4502/Conference/VideoConferenceService.svc"
                binding="customBinding" bindingConfiguration="NetTcpBinding_IVideoConferenceService"
                contract="ServiceReference1.IVideoConferenceService" name="NetTcpBinding_IVideoConferenceService" />
        </client>
    </system.serviceModel>
</configuration> 
```

**2.**当我在 IIS 7 中托管我的服务时，我将端口范围`808:*`作为 netTcp 端口，而我应该`4502:*`将端口范围作为端口范围，如下所示：

![在此处输入图像描述](../Images/f3aa452a4d4b83fb0e299ee31f052e01.png)

同样从我收集的信息来看，托管服务的网站应该在端口 80 上，因为 Silverlight 将查找`localhost:80/ClientAccessPolicy.xml`客户端访问策略文件。

只是为了记录，对于那些偶然发现同样问题的人，这`web.config`设法在 IIS 中工作：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="false" />
  </system.web>

   <system.serviceModel>
     <services>
       <service name="VideoServer.VideoConferenceService">
         <endpoint address="" binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IVideoConferenceService" contract="VideoServer.IVideoConferenceService" />
         <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
       </service>
     </services>

    <bindings>
      <netTcpBinding>
        <binding name="NetTcpBinding_IVideoConferenceService" portSharingEnabled="false" transactionFlow="false" transferMode="Buffered" listenBacklog="2147483647" maxBufferPoolSize="2147483647" maxBufferSize="2147483647" maxConnections="2147483647" maxReceivedMessageSize="2147483647" closeTimeout="24.20:31:23.6470000" openTimeout="24.20:31:23.6470000" receiveTimeout="24.20:31:23.6470000" sendTimeout="24.20:31:23.6470000">
          <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <reliableSession enabled="false" />
          <security mode="None">
            <message clientCredentialType="None" />
            <transport protectionLevel="None" clientCredentialType="None" />
          </security>
        </binding>
      </netTcpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="True" />
          <serviceDebug includeExceptionDetailInFaults="False" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
    <system.webServer>
        <directoryBrowse enabled="true" />
    </system.webServer>
</configuration> 
```

另外值得注意的是，您不需要在`web.config`IIS 中放置任何端口或基地址。它将使用端口创建服务端点`4502`，我尝试将其更改为 4503、4522 等，有趣的是它不适用于这些端口，仅适用于 4502。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T10:30:13.077

我们遇到了与原始帖子中指定的类似问题。只是为了帮助无法使用上述解决方案解决问题的任何人，我们发现托管该服务的计算机上的 Windows 防火墙阻止了我们尝试通过 net.tcp 连接的端口。一旦我们允许流量通过该软件防火墙上的端口，我们的服务就开始按预期工作。

可能值得检查您可能拥有的任何硬件防火墙，以允许我相信 net.tcp 的范围为 4502-4530

# msbuild - Msbuild 无法创建智能设备 CAB 项目

> ID：10765011
> 
> 赞同：2
> 
> 时间：2012-05-26T09:12:17.513
> 
> 标签：msbuild, teamcity, vdproj, smart-device, teamcity-7.0

我正在尝试为智能设备应用程序设置 TeamCity 7.0。我的 Visual Studio 解决方案包含两个项目：

1.  SmartRead -> 移动应用程序
2.  SmartReadInstaller -> 用于创建 CAB 文件的智能设备 CAB 项目

我的 TeamCity 配置似乎成功构建了 SmartRead 应用程序并创建了必要的工件。但是，似乎 MSBuild 无法处理 SmartReadInstaller 项目。TeamCity 构建日志说：

> MSBuild 不支持 vddproj，因此无法构建。

这是完整的构建日志以供参考：

```
[11:46:10]Checking for changes
[11:46:10]Publishing internal artifacts
[11:46:10]Clearing temporary directory: C:\TeamCity\buildAgent\temp\buildTmp
[11:46:10]Clean build enabled: removing old files from C:\TeamCity\buildAgent\work\e252314f72f0d569
[11:46:10]Checkout directory: C:\TeamCity\buildAgent\work\e252314f72f0d569
[11:46:10]Updating sources: server side checkout
[11:46:11]Starting: C:\TeamCity\buildAgent\plugins\dotnetPlugin\bin\JetBrains.BuildServer.MsBuildBootstrap.exe /workdir:C:\TeamCity\buildAgent\work\e252314f72f0d569 /msbuildPath:C:\Windows\Microsoft.NET\Framework\v3.5\MSBuild.exe
[11:46:11]in directory: C:\TeamCity\buildAgent\work\e252314f72f0d569
[11:46:13]SmartRead.sln.teamcity: Build target: TeamCity_Generated_Build (3s)
[11:46:13][SmartRead.sln.teamcity] TeamCity_Generated_Build (3s)
[11:46:13][TeamCity_Generated_Build] MSBuild (3s)
[11:46:13][MSBuild] SmartRead.sln: Build target: Rebuild (2s)
[11:46:13][SmartRead.sln] ValidateSolutionConfiguration
[11:46:13][ValidateSolutionConfiguration] Building solution configuration "Release|Any CPU".
[11:46:13]SmartRead\SmartRead.csproj: Build target: Rebuild (2s)
[11:46:13][SmartRead.sln] Rebuild (2s)
[11:46:16][Rebuild] CallTarget
[11:46:16][CallTarget] SmartReadInstaller:Rebuild
[11:46:16][SmartReadInstaller:Rebuild] Warning
[11:46:16][Warning] C:\TeamCity\buildAgent\work\e252314f72f0d569\SmartRead.sln warning MSB4078: The project file "SmartReadInstaller\SmartReadInstaller.vddproj" is not supported by MSBuild and cannot be built.
[11:46:16]Process exited with code 0
[11:46:16]Publishing internal artifacts
[11:46:16][Publishing internal artifacts] Sending build.finish.properties.gz file
[11:46:16]Publishing artifacts
[11:46:16]Build finished 
```

请注意，我正在使用 Visual Studio (sln) 运行程序来构建我的应用程序。我该如何解决？如何为我的项目构建 CAB 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:55:22.097

MSBuild 不支持 VS 部署项目。您可能需要考虑将安装程序移至[WiX](http://wixtoolset.org)，因为从下一个版本的 Visual Studio 部署项目将变得[过时](http://blogs.msdn.com/b/buckh/archive/2011/03/17/visual-studio-setup-projects-vdproj-will-not-ship-with-future-versions-of-vs.aspx)。

对于当前使用[Devenv](https://stackoverflow.com/a/8870013/147211)构建的项目。

# c - 带有指针添加的 C 行为

> ID：10765012
> 
> 赞同：-2
> 
> 时间：2012-05-26T09:12:26.170
> 
> 标签：c, arrays, pointers

鉴于：

```
int a[N];
int *p; 
```

为什么`a-p`工作但`a+p`没有错误：“二进制+的无效操作数”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T09:15:06.980

两个指针之间的*差异*是有意义的，即它是两个指针之间的元素数（前提是它们都位于同一个数组中）。

*添加*两个指针虽然没有意义（你会如何解释它？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:19:21.333

因为减法是有意义的，所以它是两个指针之间的距离。添加指针没有意义。

当与减法运算符一起使用时，您的数组会衰减到 a `int*`，并且假设两个指针 (1) 属于同一类型，(2) 指向同一数组中的元素，并且 (b) 指针`T *b`大于指针`T *a`，那么标准保证的结果是和之间的元素`b - a`数。`T``a``b`

但是，在您的情况下，指针不指向同一个数组，因此结果`a - p`是未定义的（即使它编译）。

（请注意，该标准更具体地说明了何时以及如何减去两个指针，但这主要是它。）

# iphone - 释放 UIView 对象时，我的应用程序崩溃了

> ID：10765013
> 
> 赞同：0
> 
> 时间：2012-05-26T09:12:35.470
> 
> 标签：iphone, uiview

我开发了一个没有 XIB 文件的 iPhone 项目。在那里，我在该视图上手动创建了 UIView 对象和更多组件。我在我的`dealloc`和`viewDidUnload`方法中释放这些对象。我的问题是，如果我释放 UIView 对象，应用程序就会崩溃，我不知道为什么。任何人都可以在这个问题上帮助我吗？

这是我的代码：

```
allmessengersview = [[UIView alloc] initWithFrame: [[UIScreen mainScreen] bounds]]; 
allmessengersview.backgroundColor = [UIColor whiteColor];
self.view = allmessengersview;

-(void) dealloc { 
    [allmessengersview release]; 
    [super dealloc]; 
} 

- (void) viewDidUnload { 
    [super viewDidUnload];
    [allmessengersview release]; 
    allmessengersview = nil;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:14:01.790

请在视图的初始化中写下这段代码

```
allmessengersview=[[UIView alloc]init];
allmessengersview.frame = CGRect (0,0,320,480);
allmessengersview.backgroundColor = [UIColor whiteColor]; 
[self.view addsubView: allmessengersview]; 
```

请在 Dealloc 方法中写下这段代码

```
-(void)dealloc 
{
    [allmessengersview release]; 
    [super dealloc];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:54:06.493

不要在 viewDidUnload 中释放。这样，应用程序将在 viewDidUnload 中释放 allmessengersview，稍后它会尝试在 dealloc 中第二次释放它，但由于它已经释放，应用程序会崩溃。

# scala - 依赖方法类型的消息等价物

> ID：10765015
> 
> 赞同：6
> 
> 时间：2012-05-26T09:13:11.707
> 
> 标签：scala, akka, type-systems

感谢[这篇](https://stackoverflow.com/questions/7860163/what-are-some-compelling-use-cases-for-dependent-method-types)文章，我开始了解依赖方法类型。我有一个类似于以下的结构

```
trait Environment{
    type Population <: PopulationBase
    protected trait PopulationBase

    def evolveUs(population: Population): Population
}

object FactoredOut{
    def evolvePopulation(env: Environment)(prevPopulation: env.Population): env.Population = {
        env.evolveUs(prevPopulation)
    }
} 
```

我现在想开始使用演员将工作分散到`FactoredOut`整个集群中。为此，我需要一种方法来传递携带`Environment`.

显然*以下不起作用*，但演示了我正在尝试做的事情

```
object Messages{
    case class EvolvePopulation(env: Environment)(prevPopulation: env.Population)
} 
```

传递人口及其周围环境的正确方法是什么？

（会添加依赖方法类型标签，但我没有足够的积分来添加“新”标签）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T10:57:52.953

您需要将依赖类型 ( `env.Population`) 的值和类型依赖的值( ) 打包`env`为单个对象的直觉是完全正确的。

鉴于您已经发布的定义，可能最简单的方法是这样的，

```
// Type representing the packaging up of an environment and a population
// from that environment
abstract class EvolvePopulation {
  type E <: Environment
  val env : E
  val prevPopulation : env.Population
}

object EvolvePopulation {
  def apply(env0 : Environment)(prevPopulation0 : env0.Population) =
    new EvolvePopulation {
      type E = env0.type
      val env : E = env0 // type annotation required to prevent widening from
                         // the singleton type
      val prevPopulation = prevPopulation0
    }
} 
```

现在如果我们定义一个具体的环境类型，

```
class ConcreteEnvironment extends Environment {
  class Population extends PopulationBase
  def evolveUs(population: Population): Population = population
} 
```

我们可以像以前一样直接使用它，

```
val e1 = new ConcreteEnvironment

val p1 = new e1.Population
val p2 = e1.evolveUs(p1)
val p3 = e1.evolveUs(p2) 
```

我们还可以打包环境和人口进行分发，

```
def distrib(ep : EvolvePopulation) {
  import ep._
  val p4 = env.evolveUs(prevPopulation)
  val p5 = env.evolveUs(p4)
  val p6 = env.evolveUs(p5)
}

val ep1 = EvolvePopulation(e1)(p3)

distrib(ep1) 
```

# sql - 分页的 SQL ROW_NUMBER() 问题

> ID：10765028
> 
> 赞同：2
> 
> 时间：2012-05-26T09:14:31.883
> 
> 标签：sql, sql-server, database, tsql, row-number

我使用`ROW_NUMBER()`函数从数据库表中获取 50 x 50 项。
`@From`参数是从中开始抓取 50 行的行。（第一次是 1 即 51,101,151 等）
我将参数传递`@CityId`给存储过程，如果数据库中的前 60 行是`cityId=1`并且`cityId = 2`在第 61 行，则此存储过程不返回结果。
但是，如果我通过 @From 参数 51 而不是它返回我的结果。我在这里做错了什么？

```
SELECT  RowConstrainedResult.*
FROM    ( SELECT    ROW_NUMBER() OVER 
( ORDER BY f.ItemCreatedOnDate DESC ) AS RowNum, 
f.*
FROM (
SELECT
      t.ItemIdId,
      t.ItemTypeId,
      t.CreatedOnDate as ItemCreatedOnDate,
      t.CityId as CityId
FROM   dbo.Items    as t
) f) AS RowConstrainedResult
WHERE   RowNum >= @From
    AND RowNum < @From + 50
    AND CityId = @CityId 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T09:33:26.330

在您的版本中，`ROW_NUMBER()`正在枚举所有行。将谓词 for 移动`cityid`到最里面的选择，并且`ROW_NUMBER()`只会枚举 where 的行`cityid = 2`。

```
SELECT RowConstrainedResult.*
FROM (
     SELECT ROW_NUMBER() OVER (ORDER BY f.ItemCreatedOnDate DESC) AS RowNum, 
            f.*
     FROM (
          SELECT t.ItemIdId,
                 t.ItemTypeId,
                 t.CreatedOnDate as ItemCreatedOnDate,
                 t.CityId as CityId
          FROM dbo.Items AS t
          WHERE CityId = @CityId
          ) AS f
     ) AS RowConstrainedResult
WHERE RowNum >= @From AND 
      RowNum < @From + 50 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T09:33:32.760

我猜你想要做的是在内部选择查询中过滤 CityId ，如下所示：

```
SELECT  RowConstrainedResult.*
FROM    ( SELECT    ROW_NUMBER() OVER 
( ORDER BY f.ItemCreatedOnDate DESC ) AS RowNum, 
f.*
FROM (
SELECT
      t.ItemIdId,
      t.ItemTypeId,
      t.CreatedOnDate as ItemCreatedOnDate,
      t.CityId as CityId
FROM   dbo.Items    as t
WHERE CityId = @CityId
) f) AS RowConstrainedResult
WHERE   RowNum >= @From
    AND RowNum < @From + 50 
```

# ruby-on-rails - Instagram gem：如何获得下一页结果？

> ID：10765033
> 
> 赞同：10
> 
> 时间：2012-05-26T09:15:07.480
> 
> 标签：ruby-on-rails, instagram

如何使用 Instagram gem 获得下一页结果？

API 本身的文档说`pagination`每个结果都有一个哈希值（参见这里：http: [//instagram.com/developer/endpoints/](http://instagram.com/developer/endpoints/)）。如何使用 gem 访问它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-26T10:36:54.960

知道了。我认为`pagination`Instagram 传回的哈希值不可访问，但您可以在`max_id`查询时传入一个选项，以获取下一组较旧的图片。

```
@results = Instagram.user_recent_media(some_user_id, {access_token: token, count: 10, max_id: 197679035065553721}) 
```

通过传入`max_id`（照片的 id），它将返回所有比这更早的结果。因此，从第一个查询中获取最旧照片的 id，并将其传入以获取下一页。

注意：当你得到结果时，图片的 id 格式为：`197679035065553721_someuserid`. 您必须解析下划线之前的第一位，并将其作为`max_id`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-19T22:47:53.370

```
Instagram.tag_recent_media(params[:q]).pagination 
```

运行该代码，您将看到分页属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-30T04:07:57.203

我已经为我自己的一个项目进行了调查，最终发现您可以通过在创建客户端时将 no_response_wrapper 设置为 true 来让客户端为您提供分页信息：

```
client = Instagram.client(:access_token => accesstoken,
                          :no_response_wrapper => true) 
```

这使得您可以按照 Yigit C. Bacakoglu 的建议在响应中使用 .pagination 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T10:02:49.373

你可能不走运。如果查看[客户端模块](https://github.com/Instagram/instagram-ruby-gem/tree/master/lib/instagram/client)，您可以看到方法正在返回`data`响应的字段，因此该`pagination`字段不可用。还有[一个问题](https://github.com/Instagram/instagram-ruby-gem/issues/25)涉及响应中缺少分页信息。

# java - 在循环中使用 if 语句的最优化方式是什么？

> ID：10765038
> 
> 赞同：0
> 
> 时间：2012-05-26T09:17:13.737
> 
> 标签：java, optimization, if-statement

我有一份需要处理的清单。这些项目被启用或禁用。用户可以选择是否显示禁用的项目。

所以你有`cond2`这取决于项目，`cond1`但事实并非如此。这是我陷入的两难境地：我应该使用`cond1 && !cond2`or`!(!cond1 || cond2)`吗？`cond2`或者我应该在循环之前检查（显示禁用的项目）？我还认为（正如您将在我放置的代码中看到的那样）如果我应该放置`cond2`before `cond1`，因为`cond2` 它是一个布尔变量，并且使用“短路”（惰性评估？），它会更快吗？

我主要关心的是速度。如果我在循环中有很多项目，这可能是一个重要的变化。

这是说明选项的代码：

```
// First Option
for (String item : items) {
    doSomethingFirst(item);
    if (isDisabled(item) && !showDisabled) {
        continue;
    }
    doSomethingElse(item);
}

// Second Option
for (String item : items) {
    doSomethingFirst(item);
    if (!(!isDisabled(item) || showDisabled)) {
        continue;
    }
    doSomethingElse(item);
}

// Third Option
if (showDisabled) {
    for (String item : items) {
        doSomethingFirst(item);
        doSomethingElse(item);
    }
} else {
    for (String item : items) {
        doSomethingFirst(item);
        if (isDisabled(item)) {
            continue;
        }
        doSomethingElse(item);
    }
} 
```

那么，和的顺序`isDisabled(item)`重要`showDisabled`吗？我应该在循环之前检查事情吗？还是编译器对此进行了优化？（我怀疑...）

**PS**我不知道如何进行测量以查看实际值，如果相关，请执行。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:24:23.497

在 Java 中，表达式是从左到右计算的。`&&`如果第一个条件为假，则不执行第二个条件，如果`||`第一个条件为真，则不执行第二个条件。

因此，在您的情况下，请尝试将可以更快解决的条件放在首位`showDisabled`。

对于第三个示例，它看起来更好，因为您只检查了一次布尔值，但我想它并没有真正改变性能，布尔比较并不是真的很昂贵。您可能会对代码的其他部分进行更好的改进。（而且对于可读性而言，这不是我最喜欢的 - 很长）

例如，如果您想在您的案例中测量性能，请使用分析器。

或添加您的代码：

```
long start=System.currentTimeMillis();
//code to analyse
long timeSpent = System.currentTimeMillis()-start 
```

您必须将代码放入循环中，以使其相关。您可能会注意到，Java 会在一些循环之后提高性能；）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T10:11:20.807

关于可读性，另一个好的做法是命名处于积极状态的函数和变量。很难阅读双重否定。你更愿意读哪一本？

```
enabled 
```

或者

```
!disabled 
```

尽管在少数情况下以否定形式命名事物是有道理的。例如，如果您将它们用于终止条件，例如文件结尾。 `while(!feof(fp))`

但在大多数情况下，规范应该是以积极的形式命名事物，因此阅读代码的摩擦较小。

让我们看看您的代码在积极形式中的样子：

```
// First Option
for (String item : items) {
    doSomethingFirst(item);

    // if (isDisabled(item) && !showDisabled) {

    if (!isEnabled(item) && showEnabled) {
        continue;
    }
    doSomethingElse(item);
} 
```

该代码的可读性肯定有所提高。

甚至以下内容也变得可读，可以避免双重否定，阅读代码实际上只是阅读它，而不是弄清楚它太多。我曾经读过一篇文章，建议写代码的时候，读起来也应该很愉快，他说读代码不应该像读侦探小说。阅读双重否定代码就像阅读和破译一部侦探小说。

```
// Second Option
for (String item : items) {
    doSomethingFirst(item);

    // if (!(!isDisabled(item) || showDisabled)) {

    // You can now avoid double negatives
    if (!( isEnabled(item) || !showEnabled )) {
        continue;
    }
    doSomethingElse(item);
} 
```

事实上，以下不仅仅是双重否定，而是三重否定：

`if (!(!isDisabled(item)`

1.  被禁用
2.  ！被禁用
3.  ！（！被禁用

你需要读两遍，甚至三遍才能破译该代码的意图

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T09:32:46.517

> 我应该使用 cond1 && !cond2 还是 !(!cond1 || cond2)？或者我应该在循环之前检查 cond2 （显示禁用的项目）？

最能表达您的想法的东西，即更具可读性的东西。

> 我主要关心的是速度。

写入速度？重构速度？编译速度？发展速度？阅读和理解速度？调试速度？执行速度？

你不能一次拥有所有。没有语言。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T09:33:21.183

我会选择选项 1，然后反向切换

```
isDisabled(item) && !showDisabled 
```

和

```
!showDisabled && isDisabled(item) 
```

如果`isDisabled(...)`像你说的那么慢，最好先测试更快的情况。现在与其他选项相比，这是最明确和可读的：

*   我们为所有项目做某事
*   我们跳过验证某些测试的项目
*   我们为所有其他项目做点什么。

很难做更明确的。第三个选项很丑陋。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T09:20:31.177

与这些类型的问题一样，您应该测量它以确定这本身是否是您的瓶颈。如果是，那么我会衡量替代方案。我怀疑对于上述情况，它对您的替代方案几乎没有影响，特别是因为您可能会对列表条目做一些更重量级的事情（显示它们？将它们写入数据库或文件？）

衡量这一点的最简单方法是生成一个相当大的列表，在处理、处理之前记录时间（例如，通过 System.currentTimeMillis()），然后记录所用的毫秒（或秒）。

# java - 将 HashMap 转换为数组

> ID：10765042
> 
> 赞同：3
> 
> 时间：2012-05-26T09:17:58.087
> 
> 标签：java, android

我有一个 HashMap，我想将其转换为数组。下面的代码，我得到以下内容： [[2, 11, 10, 9], [value1, value2, value3, value4], [null, null, null, null], [null, null, null, null]] “空”条目给了我一个空指针异常。为什么它是应有的两倍大？我只想要真正的条目：[[2, 11, 10, 9], [value1, value2, value3, value4]]。我做错了什么？

```
String[][] test = getArrayFromHash(hashmap);

    public static String[][] getArrayFromHash(HashMap<String, String> hashMap){
        String[][] str = null;
        {
            Object[] keys = hashMap.keySet().toArray();
            Object[] values = hashMap.values().toArray();
            str = new String[keys.length][values.length];
            for(int i=0;i<keys.length;i++) {
                str[0][i] = (String)keys[i];
                str[1][i] = (String)values[i];
            }
        }
        return str;
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T09:28:23.587

参考这个[链接](https://stackoverflow.com/questions/2265266/convert-hash-map-to-2d-array):::

```
 String[][] arr = new String[hashmap.size()][2];
    Set entries = hashmap.entrySet();
    Iterator entriesIterator = entries.iterator();

    int i = 0;
    while(entriesIterator.hasNext()){

        Map.Entry mapping = (Map.Entry) entriesIterator.next();

        arr[i][0] = mapping.getKey().toString();
        arr[i][1] = mapping.getValue().toString();

        i++;
    } 
```

**更新::::**获取两个一维数组

```
String[] arr1 = new String[hashmap.size()];
String[] arr2 = new String[hashmap.size()];
        Set entries = hashmap.entrySet();
        Iterator entriesIterator = entries.iterator();

        int i = 0;
        while(entriesIterator.hasNext()){

            Map.Entry mapping = (Map.Entry) entriesIterator.next();

            arr1[i] = mapping.getKey().toString();
            arr2[i] = mapping.getValue().toString();

            i++;
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T09:31:57.753

我不确定 keyset 和 values 是否需要以相同的顺序返回值（在实现文档中没有指定，所以我说不能保证）。

尝试使用入口集：

```
Set<Map.Entry<String, String>> set = hm.entrySet();
int i = 0;
for (Map.Entry<String,String> me : set) {
  arr[i][0] = me.getKey();
  arr[i][1] = me.getValue()};
  i++;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T09:30:11.353

分配适当大小的数组，例如

```
str = new String[2][values.length]; 
```

此外，您应该断言值和键具有相同的长度。并且匹配的条目出现在相同的位置。就像是

```
String[] keys = hashMap.keySet().toArray(new String[0]);
String[] values = new String[keys.length];
String[][] str = {keys, values};
for(int i=0;i<keys.length;i++) values[i] = hashMap.get(keys[i]);
return str; 
```

应该做（未测试）。

# asp.net - facebook 应用程序的应用程序身份验证对话框

> ID：10765044
> 
> 赞同：0
> 
> 时间：2012-05-26T09:18:21.083
> 
> 标签：asp.net, facebook, facebook-graph-api

我制作了一个 Facebook 应用程序。现在我需要使用弹出的权限框获取用户信息。如果用户已经验证了应用程序，facebook 不应该打开对话框以获得许可，但如果用户第一次访问应用程序，那么它必须打开一个对话框。我在这里要做的是......并得到像......

无法调用未定义的方法“showPermissionDialog”

```
FB.getLoginStatus(function (response) {
               if (response.status === 'connected') {
                   alert("1");
                   // the user is logged in and has authenticated your
                   // app, and response.authResponse supplies
                   // the user's ID, a valid access token, a signed
                   // request, and the time the access token
                   // and signed request each expire
                   var uid = response.authResponse.userID;
                   //alert(uid);
                   var accessToken = response.authResponse.accessToken;
                   jQuery("#<%= accessToken.ClientID %>").val(accessToken);
                   // alert(accessToken);
                   fqlQuerynew();
               } else if (response.status === 'not_authorized') {

                   // the user is logged in to Facebook,
                   // but has not authenticated your app
                   alert('not_authorized');

                   OnRequestPermission();
               } else {
                   alert("3");
                   //alert('the user isnt logged in to Facebook');
               }
           });

       };

       function OnRequestPermission() {
           var myPermissions = "publish_stream, manage_pages"; // permissions your app needs
           FB.Connect.showPermissionDialog("email,offline_access", function (perms) {
               if (!perms) {
                   alert("hi");
                   // document.location.href = 'YouNeedToAuthorize.html';
               } else {
                   alert("buy");
                   document.location.href = 'homePage.html';
               }
           });
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:13:01.587

这是您的代码的修改版本，我没有对其进行测试并且它不完整，但应该让您知道该怎么做：

```
FB.getLoginStatus(function (response) {
    if (response.status === 'connected') {
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;
        jQuery("#<%= accessToken.ClientID %>").val(accessToken);
        fqlQuerynew();
    } else if (response.status === 'not_authorized') {
        OnRequestPermission();
    } else {
        ...
    }
});

function OnRequestPermission() {
    var myPermissions = "publish_stream, manage_pages"; // permissions your app needs
    FB.login(function(response) {
        if (response.status === 'connected') {
            FB.api("me/permissions", checkPermissions);
        }
        else {
            ....
        }
    }, { scope: "email,offline_access" });
}

function checkPermissions(response) {
    if (response.data && response.data.legth == 1) {
        var perms = response.data[0];
        // iterate over perms and check if the user has all needed permissions
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:48:33.597

如果您刚刚从代码中复制并粘贴了它，那么我认为您在 FB.getLoginStatus '};' 之后添加了一个额外的右括号。

删除后尝试您的代码。如果它不起作用，那么我们可以知道您何时要检查登录状态，例如在单击某些社交按钮后或在加载页面时。

# ruby-on-rails - 如何告诉 capybara-webkit 不要忽略确认框（或只是测试它们的内容）

> ID：10765045
> 
> 赞同：3
> 
> 时间：2012-05-26T09:18:35.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cucumber, capybara, capybara-webkit

所以我有一个场景：

```
Given I signed in to my business account
And there is one customer named "Samantha Seeley"
When I go to the customers management page
Then "Delete" should show a confirmation dialog saying "Are you sure?" 
```

链接很简单：

```
<%= link_to 'Delete' customer_path(customer), method: :delete, confirm: 'Are you sure?' do %> 
```

因此，当我单击 Chrome 中的链接时，此代码确实会出现一个确认对话框，但使用这样的页面渲染：

```
Then /^"(.*?)" should show a confirmation dialog saying "(.*?)"$/ do |arg1, arg2|
  click_on arg1
  page.driver.render "tmp/screenshot.jpg"
end 
```

我相信我可以确认屏幕截图中似乎没有评估 javascript（没有显示确认对话框）。不过，这个假设可能是错误的，我不确定。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:46:38.760

GitHub上提出了类似的问题：[https ://github.com/thoughtbot/capybara-webkit/issues/84](https://github.com/thoughtbot/capybara-webkit/issues/84)

结论是使用这样的东西，这是由[Jesse Cooke](https://github.com/jc00ke)和[Ken Collins](https://github.com/metaskills)建议的：

```
def handle_js_confirm(accept=true)
  page.evaluate_script "window.original_confirm_function = window.confirm"
  page.evaluate_script "window.confirm = function(msg) { return #{!!accept}; }"
  yield
ensure
  page.evaluate_script "window.confirm = window.original_confirm_function"
end 
```

这不会帮助您测试确认对话框的内容（尽管它可以很容易地扩展为这样做），但它可以让您测试当用户单击确定或取消时会发生什么。

在这种特定情况下，您期待一个确认对话框，因为您正在使用生成一个的 Rails 助手。值得考虑一下这是否需要在您自己的应用程序中进行测试；Rails中已经有[测试可以覆盖它](https://github.com/rails/rails/blob/master/actionpack/test/template/url_helper_test.rb#L201)。

# eclipse - 使用 Eclipse 从 SVN 结帐到远程位置

> ID：10765054
> 
> 赞同：2
> 
> 时间：2012-05-26T09:20:03.987
> 
> 标签：eclipse, svn, ssh, svn-checkout

我需要以一种可以连接到 SVN 并将项目或文件签出到远程位置的方式设置 eclipse。远程位置基于 Linux，客户端使用 Windows。

我阅读了一些线程，似乎它可以在带有 ssh+svn 的控制台上运行。但是我很难让这个场景在 Eclipse 中运行。

有什么提示吗？我感谢您的帮助。

菲利普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:18:51.883

你的问题对我来说是你试图解决一些我们还不知道的问题。所以我在这里推测一下，如果问题表明我错了，我会改变我的答案。

*   （您的一部分）开发必须在服务器上进行，因此您必须在开发期间使用一些资源，这些资源是开发所必需的。
*   这些资源可能（仅）用于测试（单元测试？）或功能测试。
*   您有 Eclipse 的经验并希望使用它。

因此，这里是可能对您有用的可能解决方案的草图。

## 在服务器上使用 Eclipse

*   您在必须开发的 linux 机器上安装适当的 eclipse 发行版。
*   您在本地安装，例如 Cygwin，带有 XWin 软件包，允许您在本地启动 X-windows 服务器。
*   您在本地打开一个 xterm（只是为了让显示变量正确）。
*   你从安装在 Linux 机器上的那个 xterm 开始：`ssh <user-id>@<ip-of-linux-server> <path to eclipse> -display $DISPLAY`

### 优点和缺点

*   +您在机器上工作并在本地显示。
*   + 您可以直接在机器上结帐，无需本地副本。
*   - 如果没有连接到 Linux 机器，您将无法工作。

## 在本地使用 Eclipse

有两种变体，而且都很有价值：

*   拥有服务器上的源（仅）
*   本地有资源

## 服务器上的源，本地 Eclipse

最简单的方法是挂载服务器的文件系统，这样您就可以通过不同的驱动器号在本地访问它们。询问您的系统管理员如何做到这一点。

### 优点和缺点

*   + 一切正常。
*   + 您不必在服务器上安装 Subversion。
*   - 远程文件系统的延迟可能很烦人。
*   - 您只能使用与服务器的网络连接。

## 本地来源，本地 Eclipse

这是正常的做法。像往常一样安装带有 Subversion 插件的 Eclipse，从存储库中签出，在本地工作（甚至断开连接），提交您的更改。

然后，您可以通过在服务器上进行检查来进行测试，在那里构建系统，并在那里进行单元和集成测试。

### 优点和缺点

*   + 更易于安装和维护。
*   - 在没有构建过程的情况下，在开发过程中没有测试。
*   - 测试只能使用已提交的代码，而不是未提交的更改。

## 我的推荐

我最喜欢在服务器上使用 Eclipse 的解决方案，因此您可以使用服务器上可用的一切，并且 Linux 下的 Eclipse 与 Windows 下完全一样。您在进行测试之间没有任何步骤，一切都在本地（在服务器上）完成。

另请参阅以下问题（和答案）：

*   [是否可以在 Eclipse 中处理远程文件？](https://stackoverflow.com/questions/3473154/is-it-possible-to-work-on-remote-files-in-eclipse)

PS：我忘记了什么：我认为`svn+ssh`这只是 Subversion 的不同协议来进行检出、更新和提交。它与使用协议`file://`、，甚至`svn://`是没有任何不同。`http://``https://`

# opengl - 实际上，在现代 opengl 3.x/4.x 中，矩阵模式切换发生在哪里（或以何种方式）？

> ID：10765055
> 
> 赞同：0
> 
> 时间：2012-05-26T09:20:28.947
> 
> 标签：opengl, view, model, projection

我已经阅读了很多关于向量、缓冲区对象等的内容，并查看了许多实现旧/新 opengl 操作的示例应用程序。我的应用程序，包括对象加载、转换和顶点/片段着色器的工作原理，总的来说，我了解如何将各种类型的变量传递给着色器，以及如何绘制数组和元素数组，到目前为止一切都很好。

但是有一件事我不明白 - 最终 gl_Position 矩阵使用了我生成的矩阵，传递给顶点着色器，作为一些数学运算的结果（实际上我使用 SDL、glew 和 glm 的函数，如lookAt、translate、rotate 等）。

我所做的是着色器

```
#version ...
uniform mvp..
main ..
{
   gl_Position = mvp * ...;
} 
```

cpp

```
load_object_vertices_indexes_etc;
install_shaders;
bind_buffers;
buffer_data;
enable_vertex_array_elements_etc;
mat4 aaa_proj = perspective(persp_params);
mat4 bbb_view = lookAt(look_params);
mat4 ccc_model = translate(translate_params);
mat4 ddd_anim = rotate(rotate_params);
/* then I do matrix multiply */
mat4 some_final = ..proj * ...view * ..model * anim;
glUniformMatrix4fv(location_in_shader, 1, GL_FALSE, ..val_pointer_of_some_final)
glClear(appropriate_bitfield);

glDraw...(spec); 
```

关键是，实际上，我当然可以通过任何组合生成最终矩阵。着色器使用有效的结果矩阵调用 gl_Position，无论它是如何生成的。现在，我究竟在哪里从投影切换到视图到模型到动画？当然矩阵名称无关紧要，透视，查看，平移和旋转内部是否有切换？我的意思是 - 如果堆栈实际上包含四个阶段，那么这些阶段中的每一个都可以平移、旋转、缩放等。据我所知，如果矩阵堆栈只有一个阶段，我采取的行动并不重要.

理论上，在 3d 场景中，如果我（将视图向左旋转 45 度，然后将模型向右旋转 45 度），或者如果我（将视图向右旋转 45，然后将模型向左旋转 45 度），我应该能够获得类似的效果。

当我身体站在茶壶前面时，我可以将它向右转 45 圈并绕着桌子走（自己平移和旋转）向左 45 圈从前面看到它 - 或者把它向左转 45 圈然后向右走 45 圈从前面看到它前方。世界其他地方会有所不同（我会看到茶壶后面的左墙或右墙），但显然我会看到茶壶的前面。

所以，总而言之，如果我想实现两个例程 - A（obj_turn_left，me_turn_right）和B（obj_turn_right，me_turn_left），都先旋转模型，然后我自己（眼睛，相机），我如何指定哪个矩阵模式特定的旋转或变换是否适用？我应该在需要时使用 glMatrixMode(APPROPRIATE_CONST) 强制进入特定阶段吗？到目前为止，我的代码中没有使用 glMatrixMode。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:49:36.837

根本没有切换发生。您将整个转换链乘以一个单一的复合矩阵。

为了使高级的事情变得更容易，您通常将转换分为*modelview*和*projection*，以便您可以在视图空间中执行例如照明计算。但这不是一个*开关*，它只是一个中间步骤。

# r - 使用 gettext 翻译 R 脚本

> ID：10765057
> 
> 赞同：10
> 
> 时间：2012-05-26T09:20:37.010
> 
> 标签：r, localization, internationalization, gettext

是否可以使用 gettext 之类的东西来翻译 R 脚本。如果是这样，怎么做？如果没有，我还有什么其他选择？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-22T22:32:57.200

您可以使用 base::gettext/ngettext、base::bindtextdomain 和 tools::xgettext2pot 函数。
例如：

```
myFunction <- function()
{  
  bindtextdomain("R-myProgram","/my/translation/dir")
  gettext("Hello",domain="R-myProgram")
} 
```

然后，假设这个函数在一个路径为“/my/dir/R/myfile.R”的文件中，使用：`tools::xgettext2pot("/my/dir", "/my/translation/dir/pot/R-myProgram.pot")`然后使用msginit、msgfmt等创建一个.mo文件`/my/translation/dir/fr/LC_MESSAGES/R-myProgram.mo`。如果您的语言环境是法语，myFunction() 现在应该打印“Bonjour”而不是“Hello”。

其他几点：

*   似乎 xgettext2pot 假定您的项目是标准 R 包，并且仅在 R/ 子目录中查找 *.R 文件。
*   默认情况下，该`domain`参数似乎是调用 gettext() 的函数的命名空间
*   xgettext2pot 也检测到 stop()、message()、warning() 和 packupStartupMessage()。还有一个 gettextf() 函数可用作 gettext() 的类似 sprintf 的变体。
*   由于标准的 xgettext 实用程序似乎不支持 R 语法，并且由于必须使用 tools::xgettext2pot，因此标准方法会遗漏一些东西，例如消息上下文 (pgettext())、指示 printf- 的标志像字符串一样，并且可以为翻译器编写代码内注释（由 xgettext -c 提取），而无需手动修改 .pot 文件。

# java - 在不使用接口的情况下使用 InvocationHandler 和 Proxy

> ID：10765061
> 
> 赞同：0
> 
> 时间：2012-05-26T09:22:07.867
> 
> 标签：java, reflection, dynamic, proxy

> **可能重复：**
> [具体类的动态代理](https://stackoverflow.com/questions/7878521/dynamic-proxy-for-concrete-classes)

一旦我创建了一个 InvocationHandler 实现，我就可以将它与 Proxy.newProxyInstance 函数一起使用来获取行为不同的对象。在这种情况下，我必须创建一个接口及其实现类来使用 Proxy.newProxyInstance 函数：

```
MyInterface objDest = Proxy.newProxyInstance(MyInterfaceImpl.class.getClassLoader(),   
        MyInterfaceImpl.class.getInterfaces(),   
        new MyInvocationHandler(new MyInterfaceImpl())); 
```

是否可以直接使用没有接口的简单类来完成相同的任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:30:52.153

您应该使用[CGLIB](http://cglib.sourceforge.net/)在具体类上创建动态代理。

# c++ - 什么是 openCV features2D 中的`query`和`train`

> ID：10765066
> 
> 赞同：16
> 
> 时间：2012-05-26T09:23:52.140
> 
> 标签：c++, opencv, feature-detection

我在课堂上到处都能`features2D`看到术语`query`和`train`. 例如`matches`have `trainIdx`and `queryIdx`, and `Matchers`have`train()`方法。

我知道单词`train`和`query`英文的定义，但我无法理解这个属性或方法的含义。

PS我明白，这是一个非常愚蠢的问题，但也许是因为英语不是我的母语。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-26T17:28:57.313

为了完成sansuiso的回答，我想选择这些名称的原因应该是在某些应用程序中我们事先有一组图像（训练图像），例如在您的办公室内拍摄的10张图像。可以提取特征并且可以为这些图像计算特征描述符。并在运行时将图像提供给系统以查询经过训练的数据库。因此查询图像是指该图像。我真的不喜欢他们命名这些参数的方式。如果您有一对立体图像并且想要匹配特征，这些名称没有意义，但您必须选择一个约定，即始终将左侧图像称为查询图像，将右侧图像称为训练图像。我在计算机视觉方面获得了博士学位，OpenCV 中的一些命名约定对我来说似乎真的很混乱/愚蠢。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-26T13:39:04.360

*   `train`：此函数构建分类器内部状态以使其可操作。例如，考虑*训练一个 SVM*，或者从参考数据构建一个 kd-tree。也许你很困惑，因为这一步在文献中通常被称为*学习*。

*   `query`是找到一组点的最近邻居的动作，并且通过扩展它还指您想要最近邻居的整个点集。回想一下，您可以在同一个函数调用中询问 1 个点的邻居，或一大堆（通过将特征点堆叠在矩阵中）。

*   `trainIdx`并`queryIdx`分别参考参考/查询集中一品脱的索引，即您向匹配器询问离`trainIdx`其他点（存储在该位置）最近的点（存储在该`queryIdx`位置）。当然`trainIdx`是函数调用后才知道的。如果您的点存储在矩阵中，则索引将是所考虑特征的行。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-15T10:51:13.613

我以一种非常幼稚但有用的方式理解“查询”和“训练”： “训练”：对数据或图像进行预处理以获得数据库 “查询”：将在我们训练的数据库中查询的输入数据或图像前。希望它对你也有帮助。

# jquery - Jquery中的JSON对象解析错误

> ID：10765067
> 
> 赞同：2
> 
> 时间：2012-05-26T09:24:05.360
> 
> 标签：jquery, json

```
[
    {
        "regNo": "1",
        "regDate": "2025-05-12",
        "patientName": "Ratna",
        "address": "saasgasgasga",
        "city": "Hyderabad",
        "phno": "2147483647",
        "mrgStatus": "single"
    }
] 
```

这来自服务器到客户端我正在使用`jQuery.parseJSON()`方法来解析数据，但它不起作用..谁能帮我解析它...？？？

我的代码是这样的..

```
success:function(data)
{ 
 var myObject = jQuery.parseJSON(data);
 $("#patname").val(myObject.patientName);
 $("#guaname").val(myObject.fathername);
 $("#age").val(myObject.age);
 $("#addr").val(myObject.address);
} 
```

但这显示为空...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:25:09.253

它已经从 JSON 转换为对象 - 您无需再次解析它。

```
success:function(data) { 
    $("#patname").val(data[0].patientName);
    $("#guaname").val(data[0].fathername);
    $("#age").val(data[0].age);
    $("#addr").val(data[0].address);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:28:01.610

```
 success: function(data) {
     // here data is an array, so you need data[0] to get the object
     $("#patname").val(data[0].patientName);
     $("#guaname").val(data[0].fathername);
     $("#age").val(data[0].age);
     $("#addr").val(data[0].address);
} 
```

# macos - 如何检测 GLUT 中的 Command/alt/control/fn 键

> ID：10765071
> 
> 赞同：0
> 
> 时间：2012-05-26T09:24:35.400
> 
> 标签：macos, opengl, keyboard, glut

我正在检测按键，并且在使用 fn(function)、ctrl(control)、alt 和 fn(function) 进行检测时遇到了一些问题。

我可以检测空格键、回车、ESC、字母、数字和光标。但我无法检测到我之前告诉过的特殊键。当我按下这些键时，这两种方法都不会在屏幕上显示任何内容。

*检测正常键的方法*

```
void KeyboardFunc(unsigned char key, int x, int y)
{
    int numeros;

    Key[key] = true;

    cout << "-----------------" << endl;
    cout << "PULSE " << (int) key << endl;
    cout << "-----------------" << endl;

    if(key >= 48 && key < 58)
    {
        numeros = key; 
        key = 'a';  
    }

    switch ( key ) 
    {
        case ' ':   // Space bar
            cout << "Barra Espaciadora pulsada." << endl;
            break;
        case 13:    // #13 es Enter
            cout << "Enter pulsada." << endl;
            break;   
        case 27:    // "27" is the Escape key
            cout << "Tecla ESC pulsada." << endl;
            exit(1);
        case 'a':   // Teclado numérico.
            cout << "Número pulsado: " << numeros - 48 << endl;
            key = numeros;    
    }
} 
```

*检测特殊键的方法：*

```
void SpecialFunc(int key, int x, int y)
{
    Arrow[key] = true;

    cout << "-----------------" << endl;
    cout << "ESPECIAL PULSADO: " << (int) key << endl;
    cout << "-----------------" << endl;

    switch ( key ) 
    {
        case GLUT_KEY_UP:    // #73 es cursor arriba
            cout << "Cursor ARRIBA pulsada." << endl;
            break;
        case GLUT_KEY_DOWN:    // #81 es cursor abajo
            cout << "Cursor ABAJO pulsada." << endl;
            break;
        case GLUT_KEY_LEFT:    // #73 es cursor izquierda
            cout << "Cursor IZQUIERDA pulsada." << endl;
            break;
        case GLUT_KEY_RIGHT:    // #81 es cursor derecha
            cout << "Cursor DERECHA pulsada." << endl;
            break;    
        case 30:    // #30 es alt_a     
            cout << "Tecla ALT pulsada." << endl;
            break;    
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T09:31:54.413

OpenGL 不处理用户输入。它是一个绘图 API，仅涉及将点、线和三角形放入光栅像素图缓冲区。

您现在使用的是*GLUT*，这是一个用于小型 OpenGL 演示的相当简单的框架。*GLUT 不是 OpenGL 的一部分！*如果 GLUT 不再满足您的需求，那么是时候继续使用功能更强大的框架，或者从头开始进行所有窗口化和输入处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:41:03.040

您可以切换到 SDL - 获取野蛮棋的来源，

[http://brutalchess.sourceforge.net/](http://brutalchess.sourceforge.net/)

并查看其中的键是如何处理的。datenwolf 是对的，opengl 与输入（鼠标、键、窗口焦点等）无关。你也可以试试 SFML，它比 SDL 更简单

[http://rastergrid.com/blog/downloads/mountains-demo/](http://rastergrid.com/blog/downloads/mountains-demo/)

SDL 比 SFML 更灵活，例如 KEY_PRESS 与 KEY_RELEASE 不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-21T12:12:04.660

好的，所以我知道这篇文章很旧，但我只是在寻找其他东西时碰巧找到了它。

无论如何回答，因为它可能会在未来帮助其他人。

GLUT 实际上支持 ALT... 被按下的事件。

> GLUT_ACTIVE_SHIFT – 如果您按下 SHIFT 键或 Caps Lock 开启，则设置。请注意，如果它们都打开，则不会设置常量。
> 
> GLUT_ACTIVE_CTRL – 如果您按下 CTRL 键则设置。
> 
> GLUT_ACTIVE_ALT – 如果您按下 ALT 键则设置。

你所要做的就是：

```
void processNormalKeys(unsigned char key, int x, int y) {

if (key == 27)
    exit(0);
else if (key=='r') {
    int mod = glutGetModifiers();
    if (mod == GLUT_ACTIVE_ALT)
        //piece of code
    else if(//...)
        //piece of code
}} 
```

# javascript - 如何向表单中的所有元素发出请求？

> ID：10765072
> 
> 赞同：0
> 
> 时间：2012-05-26T09:24:40.400
> 
> 标签：javascript, selenium

我有一个包含许多元素（输入、选择、复选框等）的表单。如何在不对每个元素显式执行的情况下将操作应用于表单内的所有元素？

这是我的代码（在 Selenium IDE 中）：

```
storeEval |
window.document.getElementsByTagName('form')[0].id = 'myForm';
window.document.defaultView.getComputedStyle(window.document.myForm.getElementsByTagName('*')).getPropertyValue('background-color');
| result 
```

我收到一个错误：`[error] Threw an exception: document.myForm is undefined`

我试图这样做：

```
storeEval |
window.document.getElementsByTagName('form')[0].id = 'myForm';
window.document.defaultView.getComputedStyle(window.document.getElementById('myForm')).getPropertyValue('background-color'); 
```

它工作正常。

当我尝试这样做时：

```
var myForm = document.getElementsByTagName('form')[0];
var children = myForm.childNodes; 
```

我收到一个错误：`[error] Threw an exception: document.myForm is undefined`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:45:51.957

首先，您需要为`id`您的表单标签设置一个属性，以便您可以使用 JavaScript 轻松识别它。

例如，如果您的表单`id`是`myForm`，您可以这样做

```
var children = document.myForm.childNodes;
// or
var children = document.myForm.getElementsByTagName('*'); 
```

第一个返回*直接*后代的列表，而第二个返回*所有*后代的列表。

**编辑**：您可以通过除 by 以外的许多其他方式识别表单`id`，但这可能会变得困难。尝试使用`document.getElementsByTagName('form')`. 这很有效，特别是如果您的页面中只有一个表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-27T10:38:02.677

尝试这个：

```
Command: storeEval
Target : myForm = selenium.browserbot.getCurrentWindow().document.getElementsByTagName("form")[0].childNodes; var colors = new Array(); for (i=0; i < myForm.length; i++) { colors[i] = window.document.defaultView.getComputedStyle(myForm[i]).getPropertyValue('background-color')}; colors.join()
Value  : result 
```

JavaScript 片段`selenium.browserbot.getCurrentWindow()`获取应用程序的窗口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T09:38:28.573

我不确定您为什么要这样做，但是为了在表单标签中引用**所有**子标签，您可以尝试以下操作：

```
#my_form * {
  color: #369
} 
```

但是，如果您只想引用特定于表单的元素，那么它们的数量并不多，因此您只需连续指定它们：

```
#my_form select, #my_form input, #my_form label, #my_form button {
  color: #369
} 
```

**编辑**. 如果您想通过 javascript 引用表单中的所有元素，**并且**您正在使用 jQuery 框架（我强烈推荐），您可以只使用相同的选择器：

```
$('#my_form *').css( ... )
$('#my_form select, #my_form input, #my_form label, #my_form button').css( ... ) 
```

# emacs - 在 emacs 中使用 cscope 作为语义数据库后端

> ID：10765075
> 
> 赞同：0
> 
> 时间：2012-05-26T09:25:14.447
> 
> 标签：emacs, cscope, cedet

everone，我在emacs中使用cscope作为semanticdb后端，它提示我“CScope的版本是15.5。需要至少16.0”，但是CScope的最新版本是15.7a，有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:19:27.753

您使用的是哪个版本的 CEDET？我在当前的 bzr 快照中看到，并且看到最低要求的版本是 15.7。1.1 版本也是如此。也许您需要升级到 1.1？

# c++ - 存储指向地图中包含的对象的指针

> ID：10765082
> 
> 赞同：0
> 
> 时间：2012-05-26T09:27:16.350
> 
> 标签：c++, pointers, stl, reference, map

我想知道这段代码是否真的会存储一个指向由地图管理的对象的指针：

```
std::map<std::string,MapType> map;
MapType* typePointer;

typePointer = map[someKey]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T09:30:27.333

```
typePointer = &map[someKey]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T09:29:13.647

不，不会的。

您正在存储`MapType`，而不是`MapType*`在地图内。因此，最后一行是类型不匹配并且不会编译。

# .net - ELMAH 无处不在 - Silverlight 4

> ID：10765083
> 
> 赞同：0
> 
> 时间：2012-05-26T09:27:19.190
> 
> 标签：.net, silverlight-4.0, elmah

我已经实现了代码（Elmah Everywhere）来捕获 Silverlight-4 中的未处理异常，如下面的链接所示

[https://github.com/vincoss/vinco-logging-toolkit](https://github.com/vincoss/vinco-logging-toolkit)。

我还下载了代码示例表单链接，但是我找不到存储未处理异常的位置。

我在 asp.net 中实现了 Elmah，我们通常可以在其中看到 domainname/elmah.axd 上所有未处理的异常（如 web.config 中给出的）。

请帮助我找到所有未处理的异常都存储在 Silverlight 中的位置。

或者任何人都可以向我推荐任何可以实现相同目标的库。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T13:32:24.513

Silverlight 中引发的异常存储在数据库中。请查看文档如何配置 Silverlight 异常处理。

您可以在项目文件夹“Vinco.Elmah.Everywhere\Source\ErrorWebSite\App_Data\Elmah.Everywhere.mdf”中找到数据库</p>

将此数据库附加到您的 MS SQL Server。

Elmah.Everywhere 代码库最近更新了新功能和更好的示例。

请尝试运行示例，然后浏览记录的错误

网址：http://localhost:11079/elmah

**注意：Elmah.Everywhere 日志旨在将错误记录到远程站点。要获得 Elmah.Everywhere 日志的全部好处，请创建一个网站或使用将记录错误的示例中的现有“ErrorWebSite”。这允许您拥有多个将错误记录到中央数据库的项目。只需更改 ExceptionDefaults 中的 ApplicationName 即可区分不同的项目。**

**Silverlight 配置示例**

您可以按照以下示例中的说明配置错误日志记录。

```
private static void SetUpExceptionHandler()
{
    Uri uri = Application.Current.Host.Source;
        string currentHost = string.Format("{0}{1}{2}:{3}", uri.Scheme, Uri.SchemeDelimiter, uri.Host, uri.Port);

    // Configure
    var writter = new ClientHttpExceptionWritter
    {
    // NOTE: Possible to pass URI by startup arguments.
            RequestUri = new Uri(string.Format("{0}/error/log", currentHost), UriKind.Absolute)
    };

    var defaults = new ExceptionDefaults
    {
    Token = "Silverlight-Test-Token",
    ApplicationName = "Silverlight-Sample",
    Host = string.Format("{0}{1}{2}:{3}", uri.Scheme, Uri.SchemeDelimiter, uri.Host, uri.Port)
    };
    ExceptionHandler.Configure(writter, defaults);
} 
```

**在 Application 构造函数中调用处理程序设置方法。**

```
public App()
{
    SetUpExceptionHandler();
} 
```

**将处理程序日志添加到 Application_UnhandledException 方法中**

```
private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
{
    ExceptionHandler.Report(e.ExceptionObject, null);
} 
```

此配置将针对 Silverlight 主机 URL 记录错误。确保您在 bin 文件夹中有 Elmah.Everywhere.dll、Elmah.dll 以及 Web.config 文件中的配置详细信息。

要查看浏览器中的错误，请参阅“ErrorWebSite”示例。URL 应如下所示。[http://yourdomain.com/elmah](http://yourdomain.com/elmah)

有关更多信息，请参阅提供的样本。

# ios - 将目标 C 类链接到故事板视图控制器

> ID：10765085
> 
> 赞同：2
> 
> 时间：2012-05-26T09:27:41.200
> 
> 标签：ios, xcode, uiviewcontroller, xcode4.3

我在 Xcode 4.3.1 中开始了一个新的 IOS 应用程序项目。我选择了选项卡式应用程序并获得了一个带有两个选项卡的故事板。我`viewController`在情节提要中添加了一个新内容，并使用关系将选项卡栏视图连接到新视图控制器。我现在在模拟器中看到 3 个选项卡。现在我在`UIViewController`. 我想将此子类链接到我添加到故事板的新视图控制器，以便我可以在`viewDidLoad`. 我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T09:57:46.317

您可以直接在 IB 上设置自定义类。

截屏：

![在此处输入图像描述](../Images/a65a00f72f1d8eae4eea2cc7a15dc003.png)

# wpf - WPF 动画在折叠元素上崩溃，但在隐藏元素上没有

> ID：10765094
> 
> 赞同：2
> 
> 时间：2012-05-26T09:29:41.403
> 
> 标签：wpf, animation, crash, visibility

为什么动画在折叠控件而不是隐藏控件上失败？

具体来说，在 WPF 中，我有一个带有动画的自定义复选框，可见性动态链接到“setVisible”资源元素（非常简化，如下所示）。

```
<local:MyCheckBox x:Name="checkNonVisual" Visibility="{DynamicResource setVisible}" /> 
```

在代码中，我将 checkNonVisual 的值设置为 true、false 或 null，这会在复选框上触发一个小动画。

这在元素/“setVisible”资源元素的可见性设置为 Visibility.Visible 和 Visibility.Hidden 时有效，但当可见性设置为 Visibility.Collapsed 时它会崩溃，并显示以下错误。

谁能解释我为什么在可见性折叠时动画失败以及为什么在可见性隐藏时动画没有失败？

如果我想继续使用折叠，如何防止动画运行，使其不再崩溃？

*Stacktrace 的摘录：*

> System.InvalidOperationException 未处理
> Message='Check' 名称无法在“System.Windows.Controls.ControlTemplate”的名称范围内找到。
> 来源=PresentationFramework
> 
> 堆栈跟踪：
> 
> 在 System.Windows.Media.Animation.Storyboard.ResolveTargetName（字符串 targetName，INameScope nameScope，DependencyObject 元素）
> 
> 在 System.Windows.Media.Animation.Storyboard.ClockTreeWalkRecursive（时钟 currentClock，DependencyObject containsObject，INameScope nameScope，DependencyObject parentObject，String parentObjectName，PropertyPath parentPropertyPath，HandoffBehavior handoffBehavior，HybridDictionary clockMappings，Int64 层）
> 
> [...]
> 
> 在 System.Windows.UIElement.RaiseEvent(RoutedEventArgs e) 在 System.Windows.Controls.Primitives.ToggleButton.OnChecked(RoutedEventArgs e)
> 
> [...]

# python - 搜索引擎对结果描述的想法

> ID：10765104
> 
> 赞同：0
> 
> 时间：2012-05-26T09:30:28.533
> 
> 标签：python, search, full-text-search, full-text-indexing

我正在为全文搜索制作搜索引擎，但在显示带有描述的结果时出现性能问题。我为当前查询制作了结果，但是当我尝试获取文本并突出显示关键字所在的部分时，表现不佳。我使用 pdf、txt、doc、docs、html 等。所以我的搜索引擎的工作方式如下：

*   我有一个存储文档文本的数据库表
*   我有一个数据库表，我用它的频率索引文本

这种情况是否很好。我必须搜索索引并获取文档，解析文本，获取句子，使用关键字过滤句子。无描述搜索的性能是：

```
**Крушевското Востание 1903** 0,00518989562988
**Даме Груев** 0,00394678115845
**Даме Груев и Гоце Делчев**  0,0916090011597
**Државен празник Илинден** 0,0072648525238
**Даме** 0,00195503234863
**Александар Македонски** 0,0423209667206
**Бранко Црвенковски и Никола Груевски** 0,0233609676361
**СДСМ и ВМРО-ДПМНЕ** 0,0295231342316
**Македонија** 0,0435738563538
**Никола Груевски и Македонија** 0,0451180934906 
```

搜索关键字是我的母语，文档集合是 3679。使用句子的描述标签，我的结果显示速度要慢 10 到 20 倍。（比如 2-3 秒）。搜索是在 python 中进行的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:56:30.973

我真的建议你看看像 Elastic search 和 Solr（都基于 Lucene）这样的项目，它们都支持你想做的事情（全文搜索、结果突出显示......）等等。

# mysql - MySQL删除尾随问号

> ID：10765107
> 
> 赞同：0
> 
> 时间：2012-05-26T09:31:25.970
> 
> 标签：mysql

我将 csv 文件中的数据导入 MySQL 数据库，但犯了一个错误，即没有删除 csv 列中的尾随空格。所以这些空间被视为“？” 在数据库中某些值的末尾（类型为 Varchar）。我想摆脱这些。我可以以某种方式一次性删除数据库中的所有这些？我知道替换命令，但我认为它一次只对单个表的一列起作用，这对我来说非常耗时。有人可以提出更好的建议吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:33:44.803

您可以使用[修剪](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_trim)功能

```
UPDATE table SET column = TRIM(TRAILING '?' FROM column) 
```

# android - Android重用活动堆栈中的活动并将其清除

> ID：10765110
> 
> 赞同：2
> 
> 时间：2012-05-26T09:32:00.027
> 
> 标签：android, android-activity

我有主要活动的应用程序等等。在每个其他活动上都有应用程序的徽标。当用户按下徽标按钮时，我想回到主要活动。

我不想创建新的意图，因为活动堆栈上的活动区域。

我怎样才能得到它 - 使用堆栈上的那个？我怎样才能清除整个活动堆栈，所以后退按钮实际上会从应用程序中退出，而不是返回到上一个活动？

约夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:26:22.757

> 我不想创建新的意图，因为活动堆栈上的活动区域。

如果您启动一个已经启动并位于堆栈上的活动（通过意图或任何其他方式），那么 Android 只需获取该活动的相同实例并将其放在堆栈顶部。未创建新实例。当然，如果您没有手动终止活动（通过调用`finish()`它），就会发生这种情况。

> 我怎样才能清除整个活动堆栈，所以后退按钮实际上会从应用程序中退出，而不是返回到上一个活动？

不建议在每个活动中覆盖后退按钮以退出应用程序（除非您的应用程序有充分的理由这样做）。通常，当用户按下后退按钮时，应用程序应该让用户回到上一个活动（这是用户可能期望的）。
如果您仍然想使用后退按钮退出，那么您可以覆盖后退按钮功能并启动通向主屏幕的意图：

```
Intent intent = new Intent(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_HOME);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:58:46.520

我遇到了一个类似的问题。以下链接可能对您有所帮助：

[只需按一下即可清除一堆活动](https://stackoverflow.com/questions/8277533/clearing-stack-of-activities-with-just-one-press)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:41:45.863

它非常简单。不要在 Home/Main 活动上调用 finish()。例如：假设您有 4 个活动。如果您的要求是这样的 .. Act1-->Act2-->Act3-->Act4-->Act1 。所以，不要在 Act1 上调用 finish()。但是在您进行其他活动时，请在 Act2、Act3 上调用 finish()。所以当你点击Act4中的logo时，只需调用finish()。因此，您将自动返回到 Act1，这是您的主要活动。
如果您在 Act2 中有徽标，Act3 也会在单击徽标时调用 finish() 以返回 Main。但记得在从 Act2 转到 Act3 时在 Act2 上调用 finish()

# android - 向 Urban Airship 注册 C2DM

> ID：10765112
> 
> 赞同：1
> 
> 时间：2012-05-26T09:32:35.253
> 
> 标签：android, android-c2dm, urbanairship.com

在过去的几天里，我一直在努力将 Urban Airship 与我的 Android 应用程序集成。我已经注册了 C2DM 并收到了邀请电子邮件。我已将 Urban Airship 库添加到我的应用程序中，并`airshipconfig.properties`使用正确的应用程序密钥、应用程序机密和我已将平台设置为`c2dm`. 我还在清单中添加了必要的权限和接收者。

不过，我收到以下错误。

控制台中打印的 APID 未在 Urban Airship 上的应用程序中注册，当尝试从 URban Airship 向 APID 发送推送通知时，我会收到一条错误消息，提示他们不知道 APID。

谁能引导我朝着正确的方向前进，因为我现在真的一无所知？

```
01-10 19:49:27.195: D/Nibe Festival - UALib(1124): Airship Take Off! Lib Version: 1.1.3 / App key = **hidden** / secret = **hidden**
01-10 19:49:27.195: D/Nibe Festival - UALib(1124): In Production? false
01-10 19:49:27.295: D/Nibe Festival - UALib(1124): Initializing Push.
01-10 19:49:27.304: D/Nibe Festival - UALib(1124): Initializing Analytics.
01-10 19:49:27.324: I/Nibe Festival - UALib(1124): My Application onCreate - App APID: **hidden**-**hidden**-**hidden**-**hidden**-**hidden**
01-10 19:49:27.794: D/Nibe Festival - UALib(1124): Push Service started with intent=Intent { act=com.urbanairship.push.START cmp=com.codeinacup.NibeFestival/com.urbanairship.push.PushService }
01-10 19:49:27.814: D/Nibe Festival - UALib(1124): Starting C2DM
01-10 19:49:27.814: I/Nibe Festival - UALib(1124): Initializing C2DM Push...
01-10 19:49:27.834: I/Nibe Festival - UALib(1124): Performing BoxOffice firstRun.
01-10 19:49:28.194: D/Nibe Festival - UALib(1124): Error when executing request: Not trusted server certificate
01-10 19:49:28.194: E/Nibe Festival - UALib(1124): Firstrun failed, will retry. Error: Failed to post to /firstrun; request failed
01-10 19:49:38.204: I/Nibe Festival - UALib(1124): Performing BoxOffice firstRun.
01-10 19:49:38.394: D/Nibe Festival - UALib(1124): Error when executing request: Not trusted server certificate
01-10 19:49:38.394: E/Nibe Festival - UALib(1124): Firstrun failed, will retry. Error: Failed to post to /firstrun; request failed
01-10 19:49:57.794: I/Nibe Festival - UALib(1124): Sending 15 events.
01-10 19:49:57.854: D/Nibe Festival - UALib(1124): Sending Analytics to: https://combine.urbanairship.com/warp9/
01-10 19:49:58.054: D/Nibe Festival - UALib(1124): Error when executing request: Not trusted server certificate
01-10 19:49:58.404: I/Nibe Festival - UALib(1124): Performing BoxOffice firstRun.
01-10 19:49:58.594: D/Nibe Festival - UALib(1124): Error when executing request: Not trusted server certificate
01-10 19:49:58.594: E/Nibe Festival - UALib(1124): Firstrun failed, will retry. Error: Failed to post to /firstrun; request failed
01-10 19:50:38.594: I/Nibe Festival - UALib(1124): Performing BoxOffice firstRun.
01-10 19:50:38.774: D/Nibe Festival - UALib(1124): Error when executing request: Not trusted server certificate
01-10 19:50:38.774: E/Nibe Festival - UALib(1124): Firstrun failed, will retry. Error: Failed to post to /firstrun; request failed
01-10 19:50:57.814: I/Nibe Festival - UALib(1124): Sending 15 events.
01-10 19:50:57.854: D/Nibe Festival - UALib(1124): Sending Analytics to: https://combine.urbanairship.com/warp9/
01-10 19:50:58.014: D/Nibe Festival - UALib(1124): Error when executing request: Not trusted server certificate 
```

控制台中有更多输出，但似乎与 Urban Airship 无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T11:28:48.483

它不会注册，因为我没有连接到 Google Play。打开 Google Play 应用程序时出现错误：`No connection`

我收到此错误是因为我手机上的日期和时间设置不正确。设置日期和时间意味着我可以建立与 Google Play 的连接，从而接收推送通知。

# c# - WPF 元素主机每秒崩溃一次

> ID：10765116
> 
> 赞同：0
> 
> 时间：2012-05-26T09:33:05.723
> 
> 标签：c#, wpf, user-controls, crash

我在 Windows 窗体项目中有一个 WPF 用户控件，但我遇到了问题。每次我的应用程序崩溃，因为元素主机无法在用户控件中加载数据。

当我把它放在 WPF 项目中时，也会发生同样的事情。每隔一秒，我的应用程序就会正常启动。

知道可能是什么问题吗？这是我的用户控制代码：

```
<UserControl x:Class="Fleet_management.Info"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" Height="492" Width="578">
    <UserControl.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#FFE2E2E2" Offset="0" />
            <GradientStop Color="White" Offset="1" />
        </LinearGradientBrush>
    </UserControl.Background>

    <UserControl.Resources>
        <XmlDataProvider x:Key="rssData" XPath="//item" Source="******" />
    </UserControl.Resources>

    <Grid Margin="3" Height="598" Width="565">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="252*" />
            <ColumnDefinition Width="90*" />
            <ColumnDefinition Width="223*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="177*" />
            <RowDefinition Height="55*" />
            <RowDefinition Height="122*" />
            <RowDefinition Height="177*" />
        </Grid.RowDefinitions>

        <ListBox x:Name="lstItems" Margin="3,0" ItemsSource="{Binding Source={StaticResource rssData}}"
                 SelectedIndex="0" VerticalAlignment="Stretch" FontStretch="Normal" FontSize="14" FontFamily="Lucida Sans Unicode" Grid.ColumnSpan="3">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <Image Width="20" Margin="3" Source="{Binding XPath=enclosure/@url}" />
                        <TextBlock Margin="3" VerticalAlignment="Center" Text="{Binding XPath=title}" FontWeight="Bold" />
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>

        <StackPanel Grid.Row="1" Orientation="Vertical" DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,0,0,5" Grid.ColumnSpan="3">
            <TextBlock Margin="3" FontSize="13" FontWeight="Bold" Text="{Binding XPath=title, Path=InnerText}" />
            <TextBlock Margin="3" Opacity="0.72" Text="{Binding XPath=pubDate}" />
        </StackPanel>
        <ScrollViewer CanContentScroll="True" Grid.Row="2" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto"  DataContext="{Binding ElementName=lstItems, Path=SelectedItem}" Margin="0,0,3,115" Grid.RowSpan="2" Grid.ColumnSpan="3">
            <TextBlock  Margin="3"
                       FontStyle="Italic" Text="{Binding XPath=description, Path=InnerText}" TextWrapping="Wrap" TextAlignment="Justify" AllowDrop="False"
                       Foreground="#FF0000E7" FontFamily="Lucida Sans Unicode" FontSize="14" Padding="0,0,5,0" VerticalAlignment="Center" />
        </ScrollViewer>

    </Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:39:45.983

您可能想要检查包含数据的 xml 文档是否仍被先前的应用程序锁定。

所以，启动应用程序。关闭它。[检查 xml 文件是否仍在使用中。](http://ask-leo.com/how_can_i_find_out_who_is_using_a_file_in_use.html)

另外，：添加异常处理，以便您知道抛出了什么异常。至少使用[Application.DispatherUnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.dispatcherunhandledexception.aspx)

# c++ - 更快地访问局部变量与成员变量？

> ID：10765120
> 
> 赞同：0
> 
> 时间：2012-05-26T09:33:37.030
> 
> 标签：c++, performance

> **可能重复：**
> [访问成员变量与局部变量的 C++ 性能](https://stackoverflow.com/questions/238535/c-performance-of-accessing-member-variables-versus-local-variables)

我一直认为访问堆栈上的局部变量比访问成员变量要快得多（这些与全局变量是一样的吗？）。但是，我遇到了这篇文章：[访问成员变量与局部变量的 C++ 性能，](https://stackoverflow.com/questions/238535/c-performance-of-accessing-member-variables-versus-local-variables)在接受的答案中声称几乎没有区别？

现在我很困惑，因为我的全部理解是局部变量可以更快地访问？

# java - java中的原始类对象

> ID：10765122
> 
> 赞同：2
> 
> 时间：2012-05-26T09:33:52.883
> 
> 标签：java

我遇到了一个术语“原始”对象。经过搜索，我发现原始类是没有直接超类的类，例如 Object。它是否正确？

另外，如何创建一个原始类，因为每个 Java 类都从 Object 类扩展而来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T09:39:36.557

您**不能**创建原始类。

> 除了没有超类的 Object 之外，每个类都有一个且只有一个直接超类（单继承）。在没有任何其他显式超类的情况下，每个类都隐含地是 Object 的子类。
> 
> 类可以从从类派生的类派生的类派生，依此类推，并最终从最顶层的类 Object 派生。据说这样的类是继承链中所有类的后裔，这些类一直延伸到 Object。

*http://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T09:39:04.707

您不能创建原始类。**唯一的原始类是 Object 类**。

并且您将声明的任何类都将自动继承自 Object。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-08T17:48:03.137

1.  *我遇到了一个术语“原始”对象。经过搜索，我发现原始类是没有直接超类的类，例如 Object。它是否正确？*

    是的

2.  *当每个 Java 类都从 Object 类扩展时，如何创建一个原始类。*

    正如其他人回答的那样，您不能创建原始类。它已经由 Java 创建者以**Object 类的形式创建**

# c# - NHibernate 3.3 loquacious mapping 使用约定时，我的实体的 id 在保存后不会更新。可能的错误？

> ID：10765123
> 
> 赞同：0
> 
> 时间：2012-05-26T09:33:57.487
> 
> 标签：c#, nhibernate

简短版本：

当我保存实体时，在 NHibernate 3.3 中使用约定时不会更新 id 属性

详细版本：

实体 ID 属性

```
public virtual Guid GuitarId { get; protected set; } 
```

有了这个映射，我的实体被正确保存在数据库中，但我的实体的 id 没有被填充，即使当我尝试加载我的实体时，它们也被简单地忽略了......

```
 mapper.BeforeMapClass += (model, type, classCustomizer) =>
    {
        classCustomizer.Id(x =>
        {
            x.Column(type.Name + "Id");
            x.Generator(Generators.GuidComb);
        });
    }; 
```

试图获取一个保存的实体，我填充了我的实体的所有字段，除了 Id，我试图访问 id 属性以防万一它被延迟加载但没有运气：

```
var g = session.Get<Guitar>(existingId); 
```

如果我覆盖实体的 id 映射，我会在保存后正确填充 id 属性

```
 mapper.Class<Guitar>(map =>
    {
        map.Id(x => x.GuitarId, x =>
        {
            x.Generator(Generators.GuidComb);
        });
    }); 
```

所以问题出在`BeforeMapClass`事件中，有什么建议吗？

我错过了什么吗？或者这是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:34:50.487

您的基于约定的块没有定义哪个属性代表主键；只有它映射到哪个**数据库列**，所以假定它是一个非映射的 id（即 NHibernate 知道该 Id，您可以从 NHibernate 获取它，但它没有在域模型中表示）

当您手动映射它时，您正在定义属性，并且默认情况下该列使用相同的名称；这就是它起作用的原因。

这个额外的约定将负责定义 Id 属性

```
mapper.IsPersistentId((mi, d) => mi.Name == mi.DeclaringType.Name + "Id"); 
```

# types - 从类型方案构造表达式

> ID：10765124
> 
> 赞同：2
> 
> 时间：2012-05-26T09:34:08.640
> 
> 标签：types, scheme, expression

所以我被要求找到以下类型的表达式：

```
(int -> ((int -> (bool -> int)) -> (bool -> int))) 
```

所以我构建了以下代码来生成 (bool -> int) 但是这是困扰我的组合：

```
(%which (T)
        (%typing '(lambda (f)
                    (lambda (x)
                      (succ (f (not x)))))
                 T)) 
```

谁能告诉我任何好的规则或方法？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T16:34:25.860

就个人而言，我认为当您从类型中删除多余的括号时会变得更加明显（就像非计划者会写它一样）：

```
int -> (int -> bool -> int) -> bool -> int 
```

所以你应该写一个给定三个参数并返回一个`int`. 也就是说，解决方案必须可以用以下形式表示：

```
lambda n. lambda f. lambda b. ____ 
```

但是你如何填补这个洞？好吧，看看你从参数中得到什么类型，很容易看出你可以通过应用and将它们连接`f`在一起，产生一个. 所以：`n``b``int`

```
lambda n. lambda f. lambda b. f n b 
```

这是一种解决方案。但是仔细观察这个术语会发现，最里面的 lambda 实际上可以被 eta-reduced，给出一个更简单的术语：

```
lambda n. lambda f. f n 
```

但实际上，这个问题有点退化，因为返回一个 int 总是微不足道的。所以最简单的解决方案可能是：

```
lambda n. lambda f. lambda b. 0 
```

获得解决方案的一般方案通常是对类型结构进行简单归纳：如果您需要一个函数，则写下一个 lambda 并递归处理主体。如果你需要一个元组，那么写下一个元组并递归地处理它的组件。如果您需要原始类型，那么您可以选择一个常量。如果你需要一些你没有的东西（通常在多态的情况下），在范围内寻找一些可以给你这样的东西的函数参数。如果该参数本身是一个函数，请尝试递归构造一个合适的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T13:26:47.640

有几个工具可以从类型派生实现（通过 Curry/Howard 对应）。一个例子是[Djinn](http://hackage.haskell.org/cgi-bin/hackage-scripts/package/djinn)。有[一个介绍](http://www.polyomino.f2s.com/david/haskell/programsfromproofs.html)，展示了一般如何从类型生成术语。

您或许可以了解更多关于 Curry-Howard 的信息，并将类型到代码的工具移植到 Scheme？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:32:24.507

对于您的问题的具体细节（而不是一般技术），我可能会这样做：

`(int -> ((int -> (bool -> int)) -> (bool -> int)))`可以简化为`(A -> ((A -> B) -> B))`where`A = int`和`B = (bool -> int)`。这个简化版本很容易构建：

```
(lambda (a)
  (lambda (f)
    (f a))) 
```

很容易看出为什么会这样：`a`有 type`A`和`f`has type `(A -> B)`，所以调用`(f a)`会导致`B`. 要将具体类型赋予这些变量，`a`has type `int`，`f`has type `(int -> (bool -> int))`，结果当然是`(bool -> int)`.

因此，现在您需要找到一个合适的函数，该函数具有`(int -> (bool -> int))`插入`f`参数的类型。做一个例子很简单：

```
(lambda (n)
  (lambda (negate?)
    ((if negate? - +) n))) 
```

以下是您可以如何使用这些功能：

```
> (define (foo a)
    (lambda (f)
      (f a)))
> (define (bar n)
    (lambda (negate?)
      ((if negate? - +) n)))
> (define baz ((foo 42) bar))
> (baz #t)
-42
> (baz #f)
42 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-27T08:36:28.407

这是我搜索的解决方案：

(lambda (i) (lambda (f) (lambda (b) (succ ((f (succ i)) (not b))))))

可以通过以下方式确认： (%which (T) (%typing '(lambda (i) (lambda (f) (lambda (b) (succ ((f (succ i)) (not b)))))) T))

Succ 确保它是一个整数而不是 --> bool。

# ruby-on-rails - 在多台机器上编码

> ID：10765125
> 
> 赞同：1
> 
> 时间：2012-05-26T09:34:53.540
> 
> 标签：ruby-on-rails, synchronization

您将使用哪些方法来安全地使用多台机器来处理主动开发中的代码？

### 我的理想情况

*   在多台机器（至少两台）之间安全地共享开发代码
*   自动同步（想想谷歌文档，任何用户的更改都会立即更新所有其他人）。这样做的原因是我希望能够交替使用这些计算机，而不必每次切换时都提交/克隆。我的理解是，自动同步可以实现无缝切换机器，而不必每次都提交一堆文件。
*   开发代码的位置使得它可以被本地 Rails 服务器访问并在`localhost:3000`.
*   该解决方案适用于 Apple 机器（我的两台电脑都是 Apple）。

我不确定这个问题在其特异性方面是否是一个“合理”的问题，但这是我最好的第一次尝试。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:04:03.353

如果您是该项目的唯一工作人员，那么像[Dropbox](https://www.dropbox.com/)这样的服务将起作用，并为您提供您所追求的自动同步。

但是，如果您正在与其他人一起在这个项目上工作，或者您将来可能会这样做，那么学习 Git（或其他一些分布式版本控制系统）的基础知识是值得的。它可能没有你想象的那么难：

*   您可以使用一些基本命令（参见[Everyday Git with 20 commands or so](http://schacon.github.com/git/everyday.html)）。
*   [您可以使用git-up](https://github.com/aanand/git-up)进一步简化事情（这并不完美，但在大多数情况下，它可以将远程更改提取到单个命令中）。
*   有多种 OS X GUI 可以帮助您，包括[Mac 版 GitHub](http://mac.github.com/)和[GitX](http://gitx.frim.nl/)
*   [您可以从GitHub（收取少量费用）](http://github.com/plans)或从[butbucket（免费）](https://bitbucket.org/plans)获得私有存储库托管。

与 Git 同步不会是自动的，但它确实为您提供了很大的灵活性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T09:55:46.793

使用任何版本控制系统（猜你已经这样做了），如果你真的需要自动同步，在你的 crontab 中放置类似的东西（假设 svn 和咆哮通知）：

```
* * * * * cd /path/to/checkout; svn update && svn commit -m '' || (echo "sync failed" |growlnotify ) 
```

我认为版本控制是代码共享最安全的最佳实践。

如果只有您处理代码，您当然可以设置另一种同步模式，例如自动同步保管箱文件夹。

此外，如果假设您在台式机上工作时始终可以访问您的笔记本电脑，您可以将实际笔记本电脑的代码位置用作桌面上的共享网络文件夹，因此不需要同步 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:00:47.243

Dropbox 是最好的免费和简单的解决方案。我也将它用于我的个人项目。仅当从一台计算机发送更改而第二台计算机仅运行 Dropbox 时，请注意同时在两台计算机上运行 Dropbox，您可能会丢失您的工作（这是我的情况）。

# masm32 - 读取反汇编代码

> ID：10765126
> 
> 赞同：2
> 
> 时间：2012-05-26T09:35:34.690
> 
> 标签：masm32, ida, disassembly

我用masm32编写了简单的Hello word程序。但是当我尝试用 IDA 反汇编它时，我得到了更大的输出（我不会在那里写它，因为它会占用很多空间）。我不明白为什么它不同。如何运行反汇编的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:39:06.597

这个是正常的。编译是一个“有损”的过程，这意味着如果你编译代码然后反编译它，你不能保证得到与你最初输入的完全相同的东西。同样的事情也适用于汇编语言。当您组装和链接代码时，这是一个单向过程。

这就是为什么程序员保存原始源代码，而不是在想要修复错误时尝试反编译他们的二进制文件。

# javascript - chirpy中文件组的典型过程是什么

> ID：10765127
> 
> 赞同：0
> 
> 时间：2012-05-26T09:35:48.483
> 
> 标签：javascript, jquery, chirpy

我有一个使用 Chirpy 配置的文件组：

```
<FileGroup Name="1.min.js" Minify="False">
    <File Path="test/temp1.js" />
    <File Path="test/temp2.js" />
  </FileGroup> 
```

现在我设置我的母版页来下载这个脚本`1.min.js`。到目前为止一切顺利，但问题是当我在 中编辑一些脚本时`temp1.js`，我必须进入这个 mash.chirp.config 并保存这个文件，以便 1.min.js 从中获取更新的更改`temp1.js`。这对我来说很乏味。如果我忘记在这两个地方保存它会导致无数分钟来弄清楚为什么它不工作。有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T23:22:04.910

我感觉到你的痛苦并且遇到了同样的问题。基本上，我解决这个问题的方法就是告诉页面直接加载 JS 文件。这似乎也适用于 js 调试器，因为文件还没有被缩小到一行。

然后在 js 文件完成后，我将其添加到我的 mash.js.chirp.config 文件中以进行合并和缩小。我知道这不是你想要的答案，但尽管在开发过程中不得不在这个庄园里处理它，但最终的付出对我来说还是值得的。

如果你真的想强制它，你可以在 web 项目属性中添加代码，在构建后的命令行中调用 chirpy 控制台来编译这个文件。我以前用过这个代码，但现在找不到。[不过这里](http://chirpy.codeplex.com/discussions/232543)有一些信息；哦，除非您设置 minify = true，否则我不会将您的文件命名为 .min.js。如果你忘记你做了那件事，它可能会在以后回来咬你。

我找到了强制编译器的链接； [http://www.annhoang.net/twitter-bootstrap-in-visual-studio-2010-with-chirpy-and-dotless/](http://www.annhoang.net/twitter-bootstrap-in-visual-studio-2010-with-chirpy-and-dotless/)

# greasemonkey - Greasemonkey: Intercept inline onload event

> ID：10765131
> 
> 赞同：2
> 
> 时间：2012-05-26T09:36:10.590
> 
> 标签：greasemonkey, onload

Is it possible to modify/remove an `<body onload="...">` event via GreaseMonkey?

The code in question is this:

```
<body onload="if (document.body.scrollIntoView &amp;&amp; (window.location.href.indexOf('#') == -1 || window.location.href.indexOf('#post') &gt; -1)) { fetch_object('currentPost').scrollIntoView(true); }"> 
```

I would like to completely prevent it from executing (it is an annoying vBulletin feature to scroll to the post even if no hash is present in the URL which apparently also triggers when using the "back" button).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T20:26:41.847

Yes, you can intercept `<body onload="..." ...` by overwriting it as soon as the DOM is interactively available to Greasemonkey (Probably can be made to work in Chrome, too, but not tested).

This works:

```
// ==UserScript==
// @name        _Block inline onload function
// @namespace   _pc
// @include     http://YOUR_SERVER/YOUR_PATH/*
// @run-at      document-start
// ==/UserScript==

document.addEventListener ("readystatechange", FireWhenReady, true);

function FireWhenReady () {
    this.fired  = this.fired || false;

    if (    document.readyState != "uninitialized"
        &&  document.readyState != "loading"
        &&  ! this.fired
    ) {
        this.fired = true;

        document.body.onload  = function () {
            console.log ("body onload intercepted.");
        };
    }
} 
```

# objective-c - 滚动 UITableView 时出现错误的 EXC_BAD_ACCESS

> ID：10765132
> 
> 赞同：0
> 
> 时间：2012-05-26T09:36:13.237
> 
> 标签：objective-c, xcode, uitableview, exc-bad-access

我使用以下代码启动了 UITableView：

```
ProductTableView *tableProd = [[ProductTableView alloc]initWithNibName:@"ProductTableView" bundle:nil]; 
```

xib文件确实存在！

由于我在单独的 UIView 中显示此表，因此我通过以下方式将其添加到此屏幕：

```
[content addSubview:tableProd.view]; 
```

我使用 xcode 创建了一个标准的 UITableView 并设置了以下功能：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
   return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
   return 10;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   static NSString *CellIdentifier = @"Cell";

   UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
   if (cell == nil) {
      cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
   }
   cell.textLabel.text = @"test";    
   return cell;
} 
```

该表显示在模拟器中，其中 10 行填充了测试。但是，当我开始滚动并且第一个单元格离开屏幕时，模拟器会因 EXC_BAD_ACCESS 错误而崩溃。我尝试使用 Instruments 来检测 NSZombie 并且软件标记了僵尸。不幸的是，我无法将此错误追溯到原因。 ![仪器僵尸截图](../Images/f2c41a30026f3b3a9dc4141f122b50fa.png)

有谁知道这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:39:36.187

如果您将视图控制器的视图添加为另一个视图控制器视图的子视图，我猜想 ProductTableView 视图控制器正在被释放（因为添加为子视图会保留视图，但不会保留它所属的视图控制器）

将 ProductTableView 视图控制器添加为容器视图控制器的属性，以便保留它

# javascript - 使用 dojo.data.ObjectStore 刷新 Enhancedgrid

> ID：10765138
> 
> 赞同：0
> 
> 时间：2012-05-26T09:37:30.997
> 
> 标签：javascript, dojo, dojox.grid

我正在使用 1.7.2 当我向对象存储添加一个项目时，我写

```
dataStore.newItem(data); 
```

然后我尝试保存`dataStore.save()`，然后`dijit.byId(gridId)._refresh()` 浏览器挂断了。

添加项目后，我还尝试再次将同一商店重新分配给网格。仍然没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:39:44.063

试着打电话

```
 dijit.byId(gridId).resize() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T16:58:12.307

使用网格的 setQuery 方法。

```
dijit.byId(gridId).setQuery(query); 
```

# ruby-on-rails - rake 资产：预编译失败，无法调用未定义错误的方法“写入”

> ID：10765146
> 
> 赞同：1
> 
> 时间：2012-05-26T09:38:55.070
> 
> 标签：ruby-on-rails, ruby, rake, spree

我一直在安装[spree](http://spreecommerce.com/)，作为安装的一部分，运行了以下命令：

```
rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets 
```

然后我得到这个错误：

```
rake aborted!
TypeError: Cannot call method 'write' of undefined
at /tmp/execjs20120526-15139-1ixqp7s.js:6290:20
at /tmp/execjs20120526-15139-1ixqp7s.js:6304:16
at /tmp/execjs20120526-15139-1ixqp7s.js:1:92
at Object.<anonymous> (/tmp/execjs20120526-15139-1ixqp7s.js:1:109)
at Module._loadContent (node.js:667:21)
at node.js:695:20
at node.js:304:23
at node.js:756:9 
```

（在 /app/assets/javascripts/admin/all.js 中）

这是堆栈跟踪：

```
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/execjs-
1.4.0/lib/execjs/external_runtime.rb:142:in `exec_runtime'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:28:in `block in exec'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:41:in `compile_to_tempfile'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/execjs-1.4.0/lib/execjs/external_runtime.rb:27:in `exec'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/uglifier-1.2.4/lib/uglifier.rb:101:in `compile'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/actionpack-3.2.3/lib/sprockets/compressors.rb:74:in `compress'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/processing.rb:265:in `block in js_compressor='
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/processor.rb:29:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/processor.rb:29:in `evaluate'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/tilt-1.3.3/lib/tilt/template.rb:76:in `render'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/context.rb:177:in `block in evaluate'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/context.rb:174:in `evaluate'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/bundled_asset.rb:26:in `initialize'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `new'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:244:in `build_asset'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/index.rb:89:in `block in build_asset'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/caching.rb:19:in `cache_asset'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/index.rb:88:in `build_asset'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:163:in `find_asset'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/index.rb:56:in `find_asset'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:20:in `block in compile'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/actionpack-3.2.3/lib/sprockets/static_compiler.rb:18:in `compile'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/actionpack-3.2.3/lib/sprockets/assets.rake:56:in `internal_precompile'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/actionpack-3.2.3/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/usr/local/rvm/gems/ruby-1.9.3-p125@happyBirthday/gems/actionpack-3.2.3/lib/sprockets/assets.rake:60:in `block (3 levels) in <top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin/rake:19:in `load'
/usr/local/rvm/gems/ruby-1.9.3-p125@global/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile:primary 
```

我查看了 all.js - 文件中有一些被注释掉的东西，就是这样。这也是全新的安装......

我正在运行 rake (0.9.2.2)、rails (3.2.3)、ruby 1.9.3p125

知道发生了什么吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T11:04:19.677

我在我的设置中遇到了这个问题，这是因为我在我的 CSS 中粘贴了一些无效的媒体查询。哦！

# javascript - disabled 在 IE 中有效，但在 Firefox 中无效

> ID：10765149
> 
> 赞同：0
> 
> 时间：2012-05-26T09:39:08.620
> 
> 标签：javascript, asp.net, cross-browser

这是我的 JavaScript 代码。在加载功能上，我必须禁用 btndelete ..它在 iE 中可以正常工作，但在 Firefox 中，buton 不是 dsabled..我不知道这是 CSS 问题还是什么？

**Javascript**

```
 window.onload = body_Onload;

            function body_Onload()
            {
                    var btnDelete = document.getElementById('<%=btnDelete.ClientID%>');
                btnDelete.disabled = true;
            } 
```

**HTML**

```
<asp:Button ID="btnDelete" runat="server" CssClass="cssbutton" Text="Delete" Width="60px" OnClick="btnDelete_Click" /> 
```

**CSS**

```
.cssbutton
{
    font-weight: bold;  
    border-right: #3C8FD1 1px solid;
    border-top: #3C8FD1 1px solid;
    border-left: #3C8FD1 1px solid;
    border-bottom: #3C8FD1 1px solid;
    font-size: 10px;
    color: #045FA7;
    font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
    background-image: url(../App_Images/cssbuttonbg.gif);
    line-height: 14px;
} 
```

**HTML 生成的代码**

```
<input type="submit" name="pageMain$contentPlaceHolderMain$btnDelete" 
    value="Delete" onclick="return btnDelete_Click();"
    id="contentPlaceHolderMain_btnDelete" class="cssbutton" style="width:60px;"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:08:18.497

这是我根据您的问题和评论中的信息制作的示例页面：

这适用于 IE 和 FireFox。不同之处在于，在 IE 中，该按钮在禁用时显示为灰色。在 FireFox 中，该按钮看起来相同，但已禁用。因此，您可能希望为其分配一个类，并为 FireFox 分配一个灰色的样式。

```
<!DOCTYPE html>
<html>
<head>

<script>
function body_Onload()
{
    var btnDelete = document.getElementById('contentPlaceHolderMain_btnDelete');
        btnDelete.disabled = true;
        btnDelete.className += ' btndisabled';
}
</script>
<style>
.cssbutton
{
    font-weight: bold;  
    border-right: #3C8FD1 1px solid;
    border-top: #3C8FD1 1px solid;
    border-left: #3C8FD1 1px solid;
    border-bottom: #3C8FD1 1px solid;
    font-size: 10px;
    color: #045FA7;
    font-family: Verdana, Geneva, Arial, Helvetica, sans-serif;
    background-image: url(../App_Images/cssbuttonbg.gif);
    line-height: 14px;
}
.btndisabled 
{
    background-color: rgb(236,233,216);
    color: #CCC;
    font-style:normal;
}
</style>
</head>
<body onload="body_Onload();">
<form>
<input type="submit" name="pageMain$contentPlaceHolderMain$btnDelete" 
    value="Delete" onclick="return btnDelete_Click();"
    id="contentPlaceHolderMain_btnDelete" class="cssbutton" style="width:60px;"/>
</form>
</body>
</html> 
```

# vim - Vim：突出显示incsearch中的所有匹配项

> ID：10765150
> 
> 赞同：11
> 
> 时间：2012-05-26T09:39:10.083
> 
> 标签：vim

我正在使用`incsearch`and`hlsearch`选项。在我按下回车键后，所有匹配项都会突出显示，但在我输入时只有第一个匹配项。我想在键入时突出显示所有匹配项。

我怎样才能得到这种行为？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-07T06:42:20.170

您可以使用[incsearch.vim 插件](https://github.com/haya14busa/incsearch.vim)：

![自动：nohlsearch](../Images/67559e484ef5f9c9a351174a14df5cff.png)

*[使用您最喜欢的插件管理器安装](https://github.com/haya14busa/incsearch.vim#installation)并[映射您的搜索键以调用插件的搜索](https://github.com/haya14busa/incsearch.vim#basic-usage)。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-26T10:02:07.183

不幸的是，如果没有在 Vimscript 中编写自己的搜索（通过 捕获每个键`getchar()`，通过突出显示`:match`）或在 C 中修补核心 Vim 源代码，这是不可能的。

未实施的原因可能是为了保持 incsearch 的快速和即时性。

**更新**：现在突出显示所有匹配项是从 Vim 7.4.2259 开始的默认行为（*使用 'incsearch' 只能看到下一个匹配*项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-19T03:40:14.283

也许我对此错了，因为答案似乎看似简单，但只需启用`incsearch`并`hlsearch`同时使用：

```
set incsearch
set hlsearch 
```

# java - 如何在恢复代码之前等待 setIcon() 方法执行？

> ID：10765152
> 
> 赞同：1
> 
> 时间：2012-05-26T09:39:28.650
> 
> 标签：java, swing, jlabel, graphics2d, paintcomponent

我有一个这样的代码：

```
jLabel.setIcon(map);
Graphics2D g = (Graphics2D) jLabel.getGraphics();
g.drawPolygon(xpoints,ypoints,vpolygonpointsarray.length); 
```

但是会发生的是在更新标签图标之前先绘制多边形。我怀疑设置一个图标会创建一个新线程。我想等到图标设置好后再执行其余代码。我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T09:42:40.137

您应该在重写的绘画方法（等）中执行您的自定义绘画`paint()`代码`paintComponents()`。在这里查看：http: [//docs.oracle.com/javase/tutorial/uiswing/painting/step2.html](http://docs.oracle.com/javase/tutorial/uiswing/painting/step2.html)

# ruby-on-rails - 使用 Rails 的 SAAS 架构

> ID：10765158
> 
> 赞同：4
> 
> 时间：2012-05-26T09:39:57.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, soa, saas

我正在为需要模块化的新软件规划基本架构。我正在尝试定义一个多租户应用程序，以便为所有用户运行一个实例。

我需要的是可以在需要的时间和地点进行扩展，所以我不喜欢在负载均衡器后面生成多个应用程序（单一架构）的想法，因为它可能是需要更多资源的计算的单个部分。

所以我正在考虑一个面向服务的架构，它将 Rails 应用程序作为 Web 客户端和其他服务，可以用任何语言几乎编写并由 Rails 应用程序通过 API 访问。

我还想让这些 API 向用户开放，以便与他们现有的软件集成并轻松扩展这些服务。

我有一些具体的问题：

*   为新的初创公司（1-5 名员工）采用这种架构会是一个好主意吗？
*   使用 API 我不需要使用任何 RPC，因为 API 请求本身就是一个 RPC，我对这个概念是否正确？
*   什么是 API 的好标准（REST 仅定义如何访问资源）？
*   实际上，向客户公开这些 API 的最佳（= 一种好）方式可能是什么？通过 Web Rails 应用程序？直接通过使它们在同一个域下都可用的代理？API 可以通过 HTTP 请求以 RESTful 方式访问。
*   使用这种架构，拥有 VPS、云或专用服务器会更便宜吗？我喜欢云，因为它们具有容错性，它可以让我们不必担心数据持久性和备份（包括我们希望构建一个几乎 100% 可用的架构这一事实）。
*   任何其他建议或观点，以及任何简单的考虑这一点的起点都将不胜感激。

我非常了解 Python、C/C++、JS、Perl 和其他 pl，并且我最近开始使用 Ruby/Rails。我之所以选择最后一个，是因为在我看来，这个社区非常注重构建服务，而我（在极端表现之前）最关心的是能够尽快学习并有人与之分享经验并从中学习，有实际的例子（我知道它是关于一种架构，而不是实现它的 PL，但我认为在仍然使用 web1 或 web2.0 风格的不成熟环境中更容易出错）。

PS我还需要写基本的架构设计，你有什么模板可以让我开始吗？我确实需要与我的团队和其他非常专业的专业人士分享它，我希望它完整且易于理解。

希望在这里阅读一些好的建议！

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T05:17:03.310

## 建筑学

这是一个示例堆栈，我认为它主要执行您想要完成的任务：

**簇**

*   一台或多台应用服务器
*   一台或多台数据库服务器
*   零个或多个作业服务器

**实例**

*   配置[厨师](http://www.opscode.com/chef/)
*   独角兽或乘客
*   Nginx

**应用**

*   Ruby on Rails
*   查看[Grape](https://github.com/intridea/grape)以获得简单的 API

## 更具体的答案

*   > 为新的初创公司（1-5 名员工）采用这种架构会是一个好主意吗？

    如果做得正确，这种方法可以非常稳定和健壮。您不想这样做的情况是您将所有时间都花在管理服务器上。你想要启动它，能够快速处理问题实例，并努力让你的应用程序做一些事情。如果你做得对，创建实例可以很简单并且完全自动化。

*   > 使用 API 我不需要使用任何 RPC，因为 API 请求本身就是一个 RPC，我对这个概念是否正确？

    是的。

*   > 什么是 API 的好标准（REST 仅定义如何访问资源）？

    在这里，我们需要进一步说明您需要如何使用[RESTful 设计](http://en.wikipedia.org/wiki/Representational_state_transfer#Concept)来实现特定目标。

*   > 实际上，向客户公开这些 API 的最佳（= 一种好）方式可能是什么？通过 Web Rails 应用程序？直接通过使它们在同一个域下都可用的代理？API 可以通过 HTTP 请求以 RESTful 方式访问。

    域（或子域）应该可以通过 HTTP 和 RESTful 软件设计访问。它可能会返回 JSON 或其他内容。全取决于你。

*   > 使用这种架构，拥有 VPS、云或专用服务器会更便宜吗？我喜欢云，因为它们具有容错性，它可以让我们不必担心数据持久性和备份（包括我们希望构建一个几乎 100% 可用的架构这一事实）。

    你得到你所付出的。我会推荐云服务器。如果您准备“自己动手”，请查看 Heroku 以开始使用，或者查看 Rackspace。或发动机场。

*   > 任何其他建议或观点，以及任何简单的考虑这一点的起点都将不胜感激。

    我会尝试使用免费的 Heroku 帐户创建一个测试 API。

# excel - 如何创建看起来像“来自其他来源”的 Excel 的 VSTO 功能区库？

> ID：10765161
> 
> 赞同：2
> 
> 时间：2012-05-26T09:40:31.087
> 
> 标签：excel, c#-4.0, vsto, ribbon

如何使用如下所示的 Excel 中的按钮创建功能区库？具体来说，我希望有带有标题和详细描述的按钮，以及旁边的图标。

我正在使用 VSTO C# 和 Winforms。

![在此处输入图像描述](../Images/bd596be1e147a2a52b223affa9c1c1f1.png)

据我所知：

![在此处输入图像描述](../Images/b49ec1f8f57e1180f188a1fe04daec4b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T12:57:38.960

在 Visual Studio 2010 (VSTO 4.0) 中，这可以通过使用菜单控件并设置此菜单的子按钮的描述来完成。粗体文本是标签，长的非粗体文本是描述。

这仅在 Menu ItemSize 设置为 Large 时有效。

# asp.net-mvc - 具有 Windows 身份验证的 MVC3 Web 应用程序中的特权提升

> ID：10765163
> 
> 赞同：10
> 
> 时间：2012-05-26T09:41:18.067
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-authorization

我需要在 MVC3 Web 应用程序中为 Forms 和 Windows 身份验证实现用户权限提升，但这个问题对于 Windows 身份验证至关重要。这是为了让较高权限的用户向较低权限的用户提供帮助，例如，当文书用户正在执行任务并要求管理员用户在文书用户可以继续之前执行任务时，管理员用户应该能够提升相同的会话到他们的权限级别，执行管理任务，并恢复会话的较低权限。考虑到我们只想在文书用户的桌面上实现这一点，我看不到没有文书用户注销和管理员用户登录的方法。也许用户切换比一个全新的会话更整洁，但我非常喜欢“运行方式”

这甚至可能吗？如果可以，我该如何实现？我什至不知道从哪里开始寻找。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:48:32.310

允许“高级用户”为其他用户临时设置特定角色，例如还可以使用 DateTime 设置角色到期。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-29T08:46:52.193

您可以在网站的某个位置放置一个锚点：

```
@Html.ActionLink("elevate to admin", "SwitchToAdmin", "Home") 
```

然后有一个控制器操作，允许输入管理员凭据：

```
public ActionResult SwitchToAdmin()
{
    // TODO: Adjust the role name that your administrators will have
    if (!User.IsInRole(@"DOMAIN\Administrators"))
    {
        // The user is not currently an admin => popup a Logon box
        // so that the administrator could authenticate himself
        return new HttpUnauthorizedResult();
    }
    else
    {
        // After inputting the correct username and password for the
        // admin, we can now redirect to the home action and start performing
        // the admin tasks
        return RedirectToAction("index", "home");
    }
} 
```

还原过程将是相反的。如果用户是管理员允许普通用户输入他的用户名和密码，您可以有一个链接将调用控制器操作，该操作将抛出 401。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:58:51.363

为了使用 Windows 身份验证来执行此操作，我认为您需要：

*   作为命令[运行](http://technet.microsoft.com/en-us/library/bb490994.aspx)
*   用户桌面上用于启动其他登录的快捷方式
*   提示用户登录信息的批处理脚本或收集信息的单独桌面程序（快捷方式指向您选择的任何一个）
*   一旦`run as`命令行信息准备就绪，您就可以启动浏览器，也可以启动带有嵌入式浏览器的自定义程序。

该程序具有嵌入式浏览器方法的一个优点是它可以具有额外的安全预防措施，例如在超时后强制关闭自身。

无论如何，这是一种可能的解决方案。您还可以尝试提出一种不太复杂的方法来解决业务需求。也许是管理员的远程桌面会话？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-30T08:52:19.647

run as 命令的等价物是使用用户模拟。那就是以另一个用户的身份运行需要更高权限的命令。它应该如下工作： 1）用户尝试访问特权资源。webapp 检测到这一点要么是因为它有一个需要更高权限的所有任务的表，要么是通过拦截它试图执行操作的安全异常。2）当检测到这种情况时，您会抛出“RequiresPrivilegesElevationException”（您必须定义的异常）。我被控制器捕获的这个异常，现在知道它必须提示用户提供更高的权限 3）控制器提示用户输入管理员（或更高权限的用户密码） 4）当用户发送 credentilas（通过 https）凭据时用于创建模拟上下文，

这种方法的缺点是凭据和特权提升仅持续一次到服务器的行程......对于任何其他请求，用户被迫重新插入凭据。由于安全浏览器的限制，没有安全的方法可以避免这种情况

# c++ - 从整数转换为指针

> ID：10765164
> 
> 赞同：1
> 
> 时间：2012-05-26T09:41:24.367
> 
> 标签：c++, pointers, casting, integer, c-preprocessor

我正在研究 C++ 中的铸造，之后的代码对我来说很神奇。

```
#include <iostream>
using namespace std;

class Base {
public:
virtual void f() { }
};

#define SOME_VALUE 8

int main() {
cout << SOME_VALUE <<endl;
getchar();
} 
```

输出为：8

代码很简单，但是什么类型的 SOME_VALUE 呢？int、double 还是 char？

之后更复杂：

```
#include <iostream>
using namespace std;

class Base {
public:
virtual void f() { }
};

#define SOME_VALUE 8
int main() {
cout << (Base*)SOME_VALUE-SOME_VALUE <<endl;
getchar();
} 
```

输出为：FFFFFE8

按照这段代码，我可以理解 SOME_VALUE 是数字类型。我还测试了 sizeof(SOME_VALUE) 并且输出是 4。但是如果 SOME_WHAT 是数字，它如何更改为对象指针？以及对象指针如何减去整数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T09:45:42.677

`#define`是一个预处理器命令。它在代码编译之前被评估。所发生的只是主函数中的 SOME_VALUE 将其文本替换为 SOME_VALUE 定义为的文本。那是8。

SOME_VALUE 本身没有 C++ 类型，因为它只存在于预处理之前。预处理后 SOME_VALUE 将不存在于 C++ 程序中，您将只有一个字面值 8，它是一个 int。

对于第二个问题，Base* 的转换使用 C 样式转换。只需将要转换的内容的原始内存视为目标类型，就可以将任何内容转换为任何内容。因此，如果正在转换的内存与目标类型不匹配，则可能会非常危险。对于 C++，我建议使用 static_cast 或 reinterpret_cast 来更明确地说明正在转换的内容。

我认为 (Base*)SOME_VALUE 最终会成为指向内存地址 8 的 Base*。所以，这是一个指向从内存中第 8 个字节开始的 Base 对象的指针。内存中的位置 8 可能没有 Base 对象，因此它实际上不是很有用。然后“- 8”去掉Base*类型大小的8倍。在 32 位计算机上，指针是 32 位或 4 字节。因此，8 - (4*8) = -24 十进制，即十六进制的 FFFFFFE8。

如果您想知道为什么计算机将负数表示为大数，那是另一个问题。从这里开始：[http ://en.wikipedia.org/wiki/Signed_number_representations](http://en.wikipedia.org/wiki/Signed_number_representations)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T09:45:55.233

```
cout << (Base*)SOME_VALUE-SOME_VALUE <<endl; 
```

基本上是一种（可怕的）做法：

```
Base* b = 8;
b = b - 8; 
```

8 将默默地乘以 Base 的大小（所以你减去 8 个基本插槽，而不是 8 个）。

指针通常是无符号的，所以发生的是无符号指针正在环绕。

0xFFFFFFE8 是 4294967272 或（假设 4 字节 unsigned int 通常环绕）8 - 24。

此外，您永远不应该在实际代码中这样做。将任意值分配给指针肯定会以火热的爆炸结束。

一个更容易理解的情况可能是这样的：

```
int* p = (int*) 24;
p -= 4; //like ((char*) p) - 4 * sizeof(int) 
```

对于 4 字节整数， 的值`p`将是 8，因为 24 - 4 * sizeof(int) = 24 - 4 * 4 = 24 - 16 = 8。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T09:46:53.913

`SOME_VALUE`是一个宏——它没有类型。 `8`然而，是一个整数。

使用`#define SOME_VALUE ((Base*)8)`，如果您想`SOME_VALUE`始终表现得像`Base*`.

# java - jFreechart在linux机器上不显示

> ID：10765166
> 
> 赞同：2
> 
> 时间：2012-05-26T09:41:38.643
> 
> 标签：java, jsp, jfreechart

jsp

```
<img alt="" src='<%=url+"/chartDemo/servlet/ChartDemoServlet"%>'> 
```

我在jsp中有上层代码来使用jfreechart。我已经在窗口机器的tomcat中部署了这个应用程序，它的工作很完美。但是当我在我的linux机器的tomcat中复制相同的文件时，除了图表之外的所有其他jsp内容都会显示出来。

为什么我使用 linux tomcat 运行 Web 应用程序时不显示图表？

当我直接作为 URL 输入 servlet 时，我发现以下异常

```
java.lang.Error: Probable fatal error:No fonts found.
    sun.font.FontManager.getDefaultPhysicalFont(FontManager.java:1088)
    sun.font.FontManager.initialiseDeferredFont(FontManager.java:967)
    sun.font.CompositeFont.doDeferredInitialisation(CompositeFont.java:254)
    sun.font.CompositeFont.getSlotFont(CompositeFont.java:334)
    sun.font.CompositeStrike.getStrikeForSlot(CompositeStrike.java:77)
    sun.font.CompositeStrike.getFontMetrics(CompositeStrike.java:93)
    sun.font.FontDesignMetrics.initMatrixAndMetrics(FontDesignMetrics.java:358)
    sun.font.FontDesignMetrics.<init>(FontDesignMetrics.java:349)
    sun.font.FontDesignMetrics.getMetrics(FontDesignMetrics.java:301)
    sun.java2d.SunGraphics2D.getFontMetrics(SunGraphics2D.java:790)
    org.jfree.text.G2TextMeasurer.getStringWidth(G2TextMeasurer.java:79)
    org.jfree.text.TextUtilities.nextLineBreak(TextUtilities.java:294)
    org.jfree.text.TextUtilities.createTextBlock(TextUtilities.java:235)
    org.jfree.chart.title.TextTitle.arrangeRR(TextTitle.java:628)
    org.jfree.chart.title.TextTitle.arrange(TextTitle.java:497)
    org.jfree.chart.JFreeChart.drawTitle(JFreeChart.java:1316)
    org.jfree.chart.JFreeChart.draw(JFreeChart.java:1204)
    org.jfree.chart.JFreeChart.createBufferedImage(JFreeChart.java:1404)
    org.jfree.chart.JFreeChart.createBufferedImage(JFreeChart.java:1384)
    org.jfree.chart.ChartUtilities.writeChartAsPNG(ChartUtilities.java:183)
    org.jfree.chart.ChartUtilities.writeChartAsPNG(ChartUtilities.java:136)
    com.ChartDemoServlet.doPost(ChartDemoServlet.java:170)
    com.ChartDemoServlet.doGet(ChartDemoServlet.java:64)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:44:21.203

是的，@Tom 是对的；查找使用的字体。早些时候，没有桌面的 Linux 也没有可用的字体（所谓的无头环境），可通过 GraphicsEnvironment.isHeadless() 和`System.getProperty("java.awt.headless");`. 您可能只需复制字体并执行 registerFont 即可。

# java - 运行具有文件系统和端口限制的本地 Java 应用程序

> ID：10765168
> 
> 赞同：1
> 
> 时间：2012-05-26T09:41:48.660
> 
> 标签：java, security

我需要运行一个 java 应用程序（不是 applet 或 JNLP，而是 JRE 中的一个成熟的应用程序）并且需要一些限制：

1.  文件系统 - 应用程序只能访问 1 个文件夹进行读写（这将是应用程序引用的固定路径，例如 / ）

2.  端口 - 该应用程序只能访问几个本地端口。（例如只能访问端口 8080 / 3306）

有没有办法做到这一点？我已经搜索了 Java 安全和策略，但没有找到解决方案。

我正在考虑编写一个容器来运行这个应用程序或更改/覆盖类（在 OpenJDK 的情况下）。这个可以吗？

这是针对我们即将开始的开源项目，感谢明智的 StackExchange 社区提供的一些好的建议。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:43:47.640

首先也是最基本的，使用具有应用程序工作所需的最低权限的用户运行 java 应用程序。

其次，设置java`SecurityManager`并配置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:41:24.760

[SJuan76](https://stackoverflow.com/users/598289/sjuan76)在这里有正确的答案。**SecurityManager**是限制 java 应用程序可以访问的文件/目录的适当方法。[本教程](http://www.exampledepot.com/egs/java.security/CustSecurityMgr.html)可能是一个很好的设置指南。

您可以限制您的 Java 应用程序侦听的端口。但是限制端口确实需要配置操作系统级别的防火墙。

# haskell - 在 newtype 中实现 >>=

> ID：10765169
> 
> 赞同：3
> 
> 时间：2012-05-26T09:42:40.140
> 
> 标签：haskell, instance, monads, typeclass

让我从我想要解决的任务开始，可能我走错路了。我在玩具项目中使用了 Snap 框架，主要是它在`Snap`monad 下的功能。我需要在它上面添加我的状态。我使用单子变压器：

```
type SnapApp a = StateT AppState Snap a 
```

这在模块中定义，例如`Base`. 由于我在其他模块中需要它，因此我必须将其导出：

```
module Base
  ( ..
  , SnapApp
  ) where 
```

这很好，但我希望该模块不导出`SnapApp`状态单子，因为我有一些复杂的处理来设置状态的一些属性。例如，会话。我必须在更改文件时写入文件，因此仅修改会话是错误的`get`，`put`应该调用特殊函数。所以，我隐藏了使用`newtype`而不是数据导出contrustor：

```
newtype SnapApp a = SnapApp (StateT AppState Snap a) 
```

我用修改会话等的功能使它成为我的类的实例。但是出现了问题：我丢失了`Monad`类和其他新的实例`SnapApp`。我坚持实施`>>=`：

```
instance Monad SnapApp where
    return = SnapApp . return
    mx >>= fm = -- HOW? 
```

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-26T10:01:08.600

让类型指导您。你需要

```
(>>=) :: SnapApp a -> (a -> SnapApp b) -> SnapApp b 
```

你有

```
(>>=) :: StateT AppState Snap a -> (a -> StateT AppState Snap b) -> StateT AppState Snap b 
```

您需要转换：

*   论据`SnapApp a`_`StateT AppState Snap a`
*   论据`a -> SnapApp b`_`a -> StateT AppState Snap b`
*   结果`StateT AppState Snap b`到`SnapApp b`

1）使用模式匹配；定义：

```
fromSnapApp (SnapApp x) = x 
```

2) 编写函数`a -> SnapApp b`和`SnapApp b -> StateT AppState b`

3) 使用`SnapApp`

最后结果：

```
x >>= f = SnapApp (fromSnapApp x >>= (fromSnapApp . f)) 
```

或者：

```
SnapApp x >>= f = SnapApp (x >>= (fromSnapApp . f)) 
```

你不必写这个；如果启用[`GeneralizedNewtypeDeriving`](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/deriving.html#newtype-deriving)扩展，GHC 可以派生实例：

```
newtype SnapApp a = SnapApp (StateT AppState Snap a) deriving (Monad) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-27T03:30:26.787

这种状态管理正是我们为您设计的 snaplets 来处理的。我们的 Handler monad 实际上只是一个新类型的包装器`StateT s Snap`，为了方便而内置了一些额外的东西。我们确实公开了一个 MonadState 实例，这是您试图避免的，但是您可以通过将您的状态类型封装在一个模块中而不为它导出任何访问器来处理这个问题。您可以只导出执行所有复杂属性处理的所需 Handler 函数。

# java - Cookie 读写问题 - jQuery to JSP

> ID：10765172
> 
> 赞同：1
> 
> 时间：2012-05-26T09:42:49.867
> 
> 标签：java, jquery, jsp, cookies

使用[jQuery cookie 插件](https://github.com/carhartl/jquery-cookie)我创建了 cookie：

```
$.cookie('uom', '1-23-235(K)'); 
```

当我从 JSP 中读取它时，它只返回以下内容

```
1-23-235 
```

如果我在创建 cookie 时删除括号，例如

```
$.cookie('uom', '1-23-235 K'); 
```

那么就没有问题了！所有工作都很好。

我该如何克服这个问题，因为用户可以输入任何符号，如括号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:48:36.150

尝试转义（也称为 URL 编码）您设置为 cookie 的字符串：

在 JS 方面：

```
escape(cookie); 
```

在 Java 方面：

```
String result = URLDecoder.decode(cookie, "UTF-8"); 
```

# java - 在tomcat中部署模型项目的最佳方法是什么

> ID：10765176
> 
> 赞同：0
> 
> 时间：2012-05-26T09:44:26.993
> 
> 标签：java, hibernate, jsf, tomcat, maven-2

我有一个多模块 maven 项目，其中包含一个通用模型项目和两个 Web 项目（1 个用于该站点使用 jsf，另一个是一组基于轴的 Web 服务，用于从用户那里收集数据）

当我部署到 tomcat 时，我将其部署为 2 个 war 文件，模型项目被编译为 jar 并包含在两个 war 文件中。最近我收到了很多 permgen 错误。我想知道是不是因为我有这 2 个war 文件，每个文件都包含所需的库，如 HIbernate、Model 项目以及单个项目所需的一堆其他库。

我的问题是我做对了吗（我不认为我是）？部署依赖于通用模型项目的多个 Web 项目的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:21:59.273

我没有使用 Maven 的经验，但我最近在 Java EE 尤其是 tomcat 方面做了很多工作。我从来没有让 tomcat 与 Eclipse 一起工作（自从四年前开始学习 Java 以来，我一直在 Eclipse 中从事 Java 项目）。我为学校 KTH 的一个班级做了一系列作业和项目。我们不得不将 OpenEJB 和 tomcat 一起用于分配，但是让它在 Eclipse 中工作真的很麻烦。所以在第一次作业中，我只是在文本编辑器中编写代码并从终端（OS X）编译，它真的很无效。

然而，我从一位同学那里得到提示，Netbeans 对 Java EE 有很好的支持。所以我切换到 Netbeans 并使用 Glassfish 和 JSF。事实证明，切换到 Netbeans 是一个不错的选择。Netbeans 的一个非常好的特性是它可以根据数据库中的表自动生成实体类。然后基于这些实体类 Netbeans 可以为您生成 JSF 页面（控制器）。这使得开发 Java EE 项目变得非常快速和愉快。我遵循了这个出色的指南： http: [//netbeans.org/kb/docs/web/jsf20-crud.html](http://netbeans.org/kb/docs/web/jsf20-crud.html)

我希望这可以帮助你！对不起，我不能给你一个更精确的解决方案。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:08:49.300

我猜答案是把它打包成EAR文件而不是WAR，因为你可以打包两个web项目常用的jar文件。唯一的问题是我将无法使用 tomcat，有时间看看应用程序服务器也会根据 David Blevins 的建议尝试 TomEE。

# php - 尝试在构造函数中初始化 php 变量，出现错误

> ID：10765177
> 
> 赞同：0
> 
> 时间：2012-05-26T09:44:35.343
> 
> 标签：php, class, constructor

我正在尝试在 php 构造函数方法中初始化类属性，但出现错误：

注意：未定义变量：第 9 行 C:\wamp\scaleUp\back\objects.php 中的 _board

代码：

```
<?php
class Board {
public function __construct(){
    for ($x = 9; $x >= 0; $x--) {
        for ($y = 0; $y<10; $y++){
            $row = array();
            $row[$y] = $y;
        }
        $this->$_board = array(); 
            $this->$_board[$x] = $row;
    }
    echo "here";
    echo $this->$board[$x];
}       

 }

 $board =  new Board();

 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T09:46:24.423

访问对象字段的语法是`$obj->field`, not `$obj->$field`（除非您想访问存储在 中的字段名称`$field`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:47:28.500

从- `$`_`_board`

```
$this->_board = array(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T09:59:13.197

在这里，我已经为您调试了代码。

```
<?php
class Board {
public $_board;
public function __construct(){
    for ($x = 9; $x >= 0; $x--) {
        for ($y = 0; $y<10; $y++){
            $row = array();
            $row[$y] = $y;
        }
        $this->_board = array(); 
            $this->_board[$x] = $row;
    }
    echo "here";
    echo $this->_board[$x+1];/*OR*/print_r($this->_board[$x+1]);
    //$x had to be incremented here.
}       

 }

 $board =  new Board();

 ?> 
```

正如其他人提到的，您必须遵循语法：`$obj->property`，而不是`$obj->$property`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T09:46:37.243

它应该是

`$this->board`

你不需要第二个`$`标志。

此外，在您的构造函数中，在内部循环中，您将在每次迭代中重新初始化`$row`为数组。这是故意的吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T09:49:43.887

您必须将变量定义为成员变量

```
class object {
 $_board ;
...
...
...
} 
```

当你想使用它时，你必须使用以下语法

```
$this->_board = .....; 
```

我希望这可以帮助你

# forms - 本地存储实现

> ID：10765180
> 
> 赞同：1
> 
> 时间：2012-05-26T09:45:06.093
> 
> 标签：forms, local-storage, sencha-touch-2

我正在尝试加载表单并将表单详细信息保存在本地存储中。

我不太确定我应该怎么做。

任何建议都是有帮助的。

这是我需要保存其数据的表单。

```
var count = 3;   // count to control the maximum number of selections

//Configuration class definition
Ext.define("InfoImage.view.configure.Settings",{
                    extend : 'Ext.form.Panel',
                    requires : [
                    //'InfoImage.view.workItemPanel',
                    'Ext.TitleBar', 'Ext.field.Text', 'Ext.field.Toggle',
                            'Ext.field.Select', 'Ext.layout.HBox',
                            'Ext.field.Number', 'Ext.field.Checkbox',
                            'Ext.form.FieldSet', 'Ext.field.Password',
                            'Ext.field.Url' ],
                    xtype : 'settingsPanel',
                    id : 'settings',
                    config : {
                        //store:'configStore',
                        scrollable : {
                            direction : 'vertical'
                        },
                        items : [
                                {
                                    xtype : 'toolbar',
                                    ui : 'dark',
                                    docked : 'top',
                                    title : 'InfoImage Settings',
                                    items : [
                                    {
                                        xtype : 'button',
                                        iconCls : 'delete2',
                                        iconMask : true,
                                        ui : 'normal',
                                        id : 'homeSettingbtn'
                                    },

                                    {xtype: 'spacer'},
                                    {
                                        xtype : 'button',
                                        //text:'Save',
                                        iconCls : 'save_fin',
                                        iconMask : true,
                                        ui : 'normal',
                                        id : 'savebtn',
                                        handler : function() {
                                            //console.log('hi');
                                            //var form = Ext.getCmp('settings').getValues().validate();
                                            //form.validate();
                                        //  var errors = form.validate();
                                            //console.log(form.isValid());
                                        }
                                    }, 
                                    {
                                        xtype : 'button',
                                        //text:'Default',
                                        iconCls : 'default',
                                        iconMask : true,
                                        ui : 'normal',
                                        handler : function() {
                                            var form = Ext.getCmp('settings');
                                            form.reset();
                                        }

                                    }

                                    ]
                                },

                                {
                                    //fieldset defined for the Server Configuration details to be entered.
                                    xtype : 'fieldset',
                                    title : 'Server Configuration',
                                    defaults : {
                                        xtype : 'selectfield',
                                        labelWidth : '30%',
                                    },
                                    items : [
                                            {
                                                xtype : 'urlfield',
                                                name : 'servname',
                                                id : 'servname',
                                                label : 'Server Name',
                                                labelWidth : '30%'
                                            },
                                            {
                                                xtype : 'numberfield',
                                                id : 'port',
                                                name : 'port',
                                                label : 'Port',
                                                value : '80',
                                                labelWidth : '30%'
                                            },
                                            {
                                                xtype : 'selectfield',
                                                name : 'protocol',
                                                id : 'protocol',
                                                label : 'Protocol',
                                                labelWidth : '30%',
                                                usePicker : false,
                                                handler : function() {
                                                },
                                                options : [ {
                                                    text : 'HTTP',
                                                    value : 'HTTP'
                                                }, {
                                                    text : 'HTTPS',
                                                    value : 'HTTPS'
                                                }

                                                ]
                                            }

                                    ]
                                },
                                {
                                    //fieldset defined for the User Configuration details to be entered.
                                    xtype : 'fieldset',
                                    title : 'User Configuration',
                                    items : [ {
                                        xtype : 'textfield',
                                        name : 'username',
                                        id : 'username',
                                        label : 'User Name',
                                        labelWidth : '30%'
                                    }, {
                                        xtype : 'passwordfield',
                                        name : 'password',
                                        id : 'password',
                                        label : 'Password',
                                        labelWidth : '30%'
                                    }, {
                                        xtype : 'textfield',
                                        id : 'domain',
                                        name : 'domain',
                                        label : 'Domain',
                                        labelWidth : '30%'
                                    } ]
                                },

                                {
                                    //fieldset defined for the Work Item display attributes to be checked.
                                    xtype : 'fieldset',
                                    id:'check',
                                    title : '<div class="appconfig"><div>App Configuration</div>'
                                            + '<br /><div style="font-size: 14px;font-weight: bold;">Work Item display attributes</div></div>',
                                    defaults : {
                                        xtype : 'checkboxfield',
                                        labelWidth : '30%'
                                    },
                                    items : [

                                            {
                                                name : 'domainname',
                                                id : 'c1',
                                                value : 'domainname',
                                                label : 'Domain Name',
                                                listeners : {

                                                    check : function() {
                                                        var obj1 = Ext
                                                                .getCmp('c1');
                                                        if (obj1.isChecked()) {
                                                            obj1.check();
                                                            count++;
                                                            if (count > 3) {
                                                                Ext.Msg
                                                                        .alert(
                                                                                'InfoImage',
                                                                                'Please choose only three fields',
                                                                                Ext.emptyFn);
                                                                obj1.uncheck();
                                                                count--;
                                                            }
                                                        }
                                                    },
                                                    uncheck : function() {
                                                        var obj1 = Ext
                                                                .getCmp('c1');

                                                        if (!obj1.isChecked()) {
                                                            obj1.uncheck();
                                                            count--;
                                                        }

                                                    }
                                                }

                                            },
                                            {
                                                name : 'objectid',
                                                id : 'c2',
                                                value : 'objectid',
                                                label : 'Object ID',
                                                checked : 'true',
                                                listeners : {

                                                    check : function() {
                                                        var obj2 = Ext
                                                                .getCmp('c2');

                                                        if (obj2.isChecked()) {
                                                            obj2.check();
                                                            count++;
                                                            if (count > 3) {
                                                                Ext.Msg
                                                                        .alert(
                                                                                'InfoImage',
                                                                                'Please choose only three fields',
                                                                                Ext.emptyFn);
                                                                obj2.uncheck();
                                                                count--;
                                                            }
                                                        }
                                                    },
                                                    uncheck : function() {
                                                        var obj2 = Ext
                                                                .getCmp('c2');

                                                        if (!obj2.isChecked()) {
                                                            obj2.uncheck();
                                                            count--;
                                                        }

                                                    }
                                                }

                                            },
                                            {
                                                name : 'servername',
                                                id : 'c3',
                                                value : 'servername',
                                                label : 'Server Name',

                                                listeners : {

                                                    check : function() {
                                                        var obj3 = Ext
                                                                .getCmp('c3');

                                                        if (obj3.isChecked()) {
                                                            obj3.check();
                                                            count++;
                                                            if (count > 3) {
                                                                Ext.Msg
                                                                        .alert(
                                                                                'InfoImage',
                                                                                'Please choose only three fields',
                                                                                Ext.emptyFn);
                                                                obj3.uncheck();
                                                                count--;
                                                            }
                                                        }
                                                    },
                                                    uncheck : function() {
                                                        var obj3 = Ext
                                                                .getCmp('c3');

                                                        if (!obj3.isChecked()) {
                                                            obj3.uncheck();
                                                            count--;
                                                        }

                                                    }
                                                }

                                            },
                                            {
                                                name : 'workitemname',
                                                id : 'c4',
                                                value : 'workitemname',
                                                label : 'WorkItem Name',
                                                checked : 'true',
                                                listeners : {

                                                    check : function() {
                                                        var obj4 = Ext
                                                                .getCmp('c4');

                                                        if (obj4.isChecked()) {
                                                            obj4.check();
                                                            count++;
                                                            if (count > 3) {
                                                                Ext.Msg
                                                                        .alert(
                                                                                'InfoImage',
                                                                                'Please choose only three fields',
                                                                                Ext.emptyFn);
                                                                obj4.uncheck();
                                                                count--;
                                                            }
                                                        }
                                                    },
                                                    uncheck : function() {
                                                        var obj4 = Ext
                                                                .getCmp('c4');

                                                        if (!obj4.isChecked()) {
                                                            obj4.uncheck();
                                                            count--;
                                                        }

                                                    }
                                                }

                                            } ]
                                },

                                {
                                    //fieldset defined for the App Subtitle to be entered.
                                    xtype : 'fieldset',
                                    items : [ {
                                        xtype : 'textfield',
                                        name : 'apptitle',
                                        id : 'apptitle',
                                        label : 'App Subtitle',
                                        labelWidth : '30%',
                                        value : 'Mobile Client Work Manager'
                                    } ]
                                }

                        ]

                    }
                }); 
```

我需要创建模型和商店吗？我如何获取值并存储它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:57:36.210

[http://nareshtank.blogspot.in/2012/03/html-5-localstorage-usefull-methods.html](http://nareshtank.blogspot.in/2012/03/html-5-localstorage-usefull-methods.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T15:14:56.843

以下是您声明商店的方式：

```
Ext.define('App.store.Items', {
  extend: 'Ext.data.Store',
  requires:"Ext.data.proxy.LocalStorage",
  config: {
    proxy: {
      type: 'localstorage',
      id: 'application-items'
    },
    autoLoad: true,
    model: 'App.model.Item',    
  }
}); 
```

这是模型

```
Ext.define('App.model.Item', {
  extend: 'Ext.data.Model',

  config: {
    fields: [
      'field1',
      'field2'
    ]
  }
}); 
```

然后，将商品添加到商店：

```
store.add({field1:'value1',field2:'value2'});
store.sync(); 
```

希望这可以帮助

# javascript - 检查 JavaScript 中是否存在数据库

> ID：10765181
> 
> 赞同：0
> 
> 时间：2012-05-26T09:45:22.263
> 
> 标签：javascript, database, exists

```
openDatabase(DB_SHORT_NAME, DB_VERSION, DB_DISPLAY_NAME, DB_MAX_SIZE) 
```

在 JavaScript 中打开数据库，如果浏览器中不存在则创建数据库。

有什么方法可以检查浏览器中是否存在数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:26:08.757

JavaScript 创造的 HTML5 是做到这一点的唯一方法；您可以使用 Phonegap 或 Titanium 等移动库，它们也将呈现 Javascript 库 - 但这些仅用于移动应用程序开发；那里的移动网络版本非常糟糕，所以不要考虑将其转换为移动网络并编辑流体宽度值！

不要忘记，*并非所有*HTML5 浏览器都支持数据库功能。它是有限的。支持也是如此，它实际上是关于找出教程和反复试验。那些做的人；要么写博客，要么没有博客来发布经验（或者关于头痛的懒惰和沮丧的博客是最后一件事！）。

[http://www.tutorialspoint.com/html5/html5_web_sql.htm](http://www.tutorialspoint.com/html5/html5_web_sql.htm)

[https://stackoverflow.com/questions/8007917/check-if-db-exists-and-dropping-db-in-sqllite-ios](https://stackoverflow.com/questions/8007917/check-if-db-exists-and-dropping-db-in-sqllite-ios)

许多网站中的一些。（*为愤怒的负面暴徒不寒而栗*）

你可以尝试这样的事情：

```
// Uses jQuery
var db="mydb.db";
$.ajax({
    url:db,
    type:'HEAD',
    error: function()
    {
        //file not exists
    },
    success: function()
    {
        //file exists
    }
}); 
```

这是使用jquery进行检查的代码

```
 function dbExists(db)
    {
        var http = new XMLHttpRequest();
        http.open('HEAD', db, false);
        http.send();
        return http.status!=404;
    }

var db="mydb.db";
dbExists(db); 
```

代码并不是真正的实时代码；我也不应该期望它是 - 我知道它很丑......但你肯定明白这个想法。HTML5 本地数据库和存储很差。你想做什么？

# java - 在 NetBeans / Java 中键入特殊字符（使用 Alt Gr）

> ID：10765185
> 
> 赞同：0
> 
> 时间：2012-05-26T09:46:09.350
> 
> 标签：java, netbeans, x11

我在 CentOS 6.1 上使用塞尔维亚拉丁语键盘。当我按`Alt Gr`+时`N`，我得到 }。无处不在，除了在 NetBeans 中。

此外，我无法输入任何括号 []{} 或 \|。有没有人遇到过这个问题的解决方案？

不能为每个大括号或其他符号更改键盘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T07:29:36.610

解决方案是安装 Sun/Oracle Java，然后重新安装 NetBEans。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T10:32:11.060

实际上它是一个 X11/distro 错误。

KDE 或 GTK 应用程序使用它们自己的键盘机制，因此它们不会显示该问题；但是java（以及netbeans）使用X11键盘机制进行输入。

问题在于 X11 如何处理您的语言环境。如果设置正确，它可以工作；如果不是，它不会。X11 没有任何“默认”规则；如果 X11 不知道您的语言环境，那么您将一无所有。此外，X11 语言环境支持也没有太多更新。

X11，为了允许正确的 altgr/compose 规则，必须加载正确的“撰写”文件。它根据语言环境加载（或不加载）：在 /usr/share/X11/locale/compose.dir 文件（您的路径可能会有所不同）中有如下行：

```
en_US.UTF-8/Compose             en_US.UTF-8
en_US.UTF-8/Compose             sr_CS.UTF-8
en_US.UTF-8/Compose:            en_US.UTF-8
en_US.UTF-8/Compose:            sr_CS.UTF-8 
```

等等（是的，每个语言环境有两行，有和没有冒号；一个由旧程序使用，另一个由新程序使用；但我不记得哪个是哪个）

您使用的语言环境必须有一行（显示为“locale”命令）。请注意，如果系统使用诸如“en_US.utf8”之类的语言环境，则必须有一个别名（在 locales.alias 文件中）；就像是：

```
sr_CS.utf8     sr_CS.UTF-8
...
sr_CS.utf8:    sr_CS.UTF-8 
```

(again, duplicate with and without colon)

To solve your problem, you can either set LC_ALL=en_US.UTF-8 before launching java programs; or edit (you need to be root, and do it at each X11 update) the compose.dir (and locale.dir and/or locale.alias) files, copy the en_US.UTF-8 lines and adapt to your locale. You can also report to your distro so they patch those *.dir/*.alias files to work properly for all locales provided by the distro.

# java - Mongo-Hadoop 简单测试因 NPE 失败

> ID：10765186
> 
> 赞同：2
> 
> 时间：2012-05-26T09:46:16.110
> 
> 标签：java, mongodb, hadoop, nullpointerexception, mapreduce

[这是在此处](http://groups.google.com/group/mongodb-user/browse_thread/thread/ec4ce08178a949a5/e002c043f41030d5?pli=1)的支持论坛中发布的一个未解决问题，但由于我没有得到任何回复，我想我应该尝试在这里提问。

我有一个使用 MongoDB 作为数据层的现有应用程序。目前我正在使用 Mongo 的 Map reduce 机制，但是我面临一些性能问题。所以我想到了使用 Hadoop 来实现这个逻辑。

我已经成功地运行了财政部收益示例，并考虑创建一个简单的项目来了解 mongo-hadoop 驱动程序。所以我创建了一个项目，在构建路径中插入了适当的 jar 文件并运行它。

这是我的java代码：

```
final Configuration conf = new Configuration(); 
    MongoConfigUtil.setInputURI( conf, "mongodb:// 
                          username:passw...@192.168.1.198/locations" ); 
    MongoConfigUtil.setOutputURI( conf, "mongodb://localhost/ 
                                 test.out" ); 
    System.out.println( "Conf: " + conf ); 
    final Job job = new Job( conf, "word count" ); 
    job.setJarByClass( WordCount.class ); 
    job.setMapperClass( TokenizerMapper.class ); 
    job.setCombinerClass( IntSumReducer.class ); 
    job.setReducerClass( IntSumReducer.class ); 
    job.setOutputKeyClass( Text.class ); 
    job.setOutputValueClass( IntWritable.class ); 
    job.setInputFormatClass( MongoInputFormat.class ); 
    job.setOutputFormatClass( MongoOutputFormat.class ); 
    System.exit( job.waitForCompletion( true ) ? 0 : 1 );" 
```

但我收到此错误：

```
Conf: Configuration: core-default.xml, core-site.xml 
12/05/20 14:12:03 WARN util.NativeCodeLoader: Unable to load native- 
hadoop library for your platform... using builtin-java classes where 
applicable 
12/05/20 14:12:03 WARN mapred.JobClient: Use GenericOptionsParser for 
parsing the arguments. Applications should implement Tool for the 
same. 
12/05/20 14:12:03 WARN mapred.JobClient: No job jar file set.  User 
classes may not be found. See JobConf(Class) or 
JobConf#setJar(String). 
12/05/20 14:12:03 INFO mapred.JobClient: Cleaning up the staging area 
file:/tmp/hadoop-maximos/mapred/staging/maximos1261801897/.staging/ 
job_local_0001 
Exception in thread "main" java.lang.NullPointerException 
        at java.util.concurrent.ConcurrentHashMap.get(ConcurrentHashMap.java: 
796) 
        at com.mongodb.DBApiLayer.doGetCollection(DBApiLayer.java:116) 
        at com.mongodb.DBApiLayer.doGetCollection(DBApiLayer.java:43) 
        at com.mongodb.DB.getCollection(DB.java:81) 
        at 
com.mongodb.hadoop.util.MongoSplitter.calculateSplits(MongoSplitter.java: 
51) 
        at 
com.mongodb.hadoop.MongoInputFormat.getSplits(MongoInputFormat.java: 
51) 
        at org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java: 
962) 
        at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:979) 
        at org.apache.hadoop.mapred.JobClient.access$600(JobClient.java:174) 
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:897) 
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:850) 
        at java.security.AccessController.doPrivileged(Native Method) 
        at javax.security.auth.Subject.doAs(Subject.java:416) 
        at 
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.j ava: 
1093) 
        at 
org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java: 
850) 
        at org.apache.hadoop.mapreduce.Job.submit(Job.java:500) 
        at org.apache.hadoop.mapreduce.Job.waitForCompletion(Job.java:530) 
        at 
com.mongodb.hadoop.examples.wordcount.WordCount.main(WordCount.java: 
100) 
```

我做错了什么？这是 Mongo、Hadoop 还是 Mongo-Hadoop 问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:14:46.530

看起来您忘记指定集合的​​名称（您从中获取数据）。

在示例中，该行如下所示：

```
MongoConfigUtil.setInputURI( conf, "mongodb://localhost/test.in" ); 
```

但是，在您的代码中，我看到：

```
MongoConfigUtil.setInputURI( conf, "mongodb:// 
                      username:passw...@192.168.1.198/locations" ); 
```

我不确定位置是集合名称还是数据库名称，如果是集合，那么您可以尝试在它前面加上数据库名称。如果是数据库，请将 .yourcollectionname 添加到它的末尾。

# php - 从另一个类中引用一个类时未定义的属性和未定义的索引

> ID：10765190
> 
> 赞同：0
> 
> 时间：2012-05-26T09:46:40.727
> 
> 标签：php, oop, class

我目前正在为客户处理一个大型项目，为了帮助简化事情并使管理会话更容易，我创建了一个会话类，这意味着如果我改变管理会话的方式，我可以访问会话的结构在一个文件中而不是多个文件中，会话已被回显（例如用户名或当前页面）

我的班级有 3 种类型的函数 setter、getter 和 unsetter，这是不言自明的。

现在在这种情况下，我直接向会话类设置一条错误消息，然后从另一个类中获取错误消息，该类从其中的会话中调用一个函数。

以下是我的文件的简化版本，显示了我认为相关的代码

c_session.php

```
class session {

    private $instance = 'isntname';
    private $A_user = 'user';
    private $A_page = 'page';
    private $A_message = 'message';

    //Set messages to the session.
    public function set_message($type, $value) {
        $_SESSION[$this->instance][$this->A_message][$type] = $value;
    }

    //Get messages from the session.
    public function get_message() {     
        return $_SESSION[$this->instance][$this->A_message];
    }

    //Unset messages from the session.
    public function unset_message() {
        #unset($_SESSION[$this->instance][$this->A_message]);
    }

} 
```

c_operations.php

```
class operations {

    //Display all pending messages.
    public function display_pending_messages() {

        if(session::get_message() != null) {
            foreach(session::get_message() as $type => $value) {
                if(strlen($type) != null) {
                    echo '
                        <div class="panel ' . $type . '">
                            ' . $value . '
                            <span class="close" onclick="hide_parent_element(this);">X</span>
                        </div>
                        ';
                }
            }
            session::unset_message();
        }
    }

} 
```

例子.php

```
$session->set_message('confirm', 'THIS IS A CONFIRM');
$session->set_message('error', 'THIS IS AN ERROR');
$session->set_message('notice', 'THIS IS A NOTICE');
$session->set_message('warning', 'THIS IS A WARNING');

var_dump($_SESSION);

$operation->display_pending_messages(); 
```

收到的错误/通知等

```
Notice: Undefined property: operations::$instance in /var/www/_classes/parent_session.php on line 43 
Notice: Undefined property: operations::$A_message in /var/www/_classes/parent_session.php on line 43 
Notice: Undefined index: in /var/www/_classes/parent_session.php on line 43 
```

第 43 行是指该行`return $_SESSION[$this->instance][$this->A_message];`

现在，如果我调用`get_message()`并`unset_message()`直接通过`$session->get_message()`它按预期工作，但在这种情况下通过另一个函数`$operation->display_pending_messages()`会返回上述错误。显然这与`$this->`操作员有关，但我不确定如何阻止这种情况。我尝试了各种搜索，虽然找到了类似的东西，但在这种情况下并没有帮助。

有人可以解释我哪里出了问题以及如何解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T09:52:17.700

您正在尝试静态调用这些函数，但它们是实例方法。例如`session::get_message()` ，尝试将静态关键字添加到函数中，或者更好地传递实例化类并调用方法`$session->get_message()`

```
public function display_pending_messages($session) {

        if($session->get_message() != null) { 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T09:55:01.970

在课堂`operations`上，您将会话称为静态，但您的所有数据都在一个对象中。最好的方法是将您的课程会话的所有数据存储在静态中：`class session {

```
private static $instance = 'isntname';
private static $A_user = 'user';
private static $A_page = 'page';
private static $A_message = 'message';

//Set messages to the session.
public static function set_message($type, $value) {
    $_SESSION[self::instance][self::A_message][$type] = $value;
}

//Get messages from the session.
public static function get_message() {     
    return $_SESSION[self::instance][self::A_message];
} 
```

}

因此，您可以`session::`在代码中调用所有函数，而无需创建对象会话

# windows - 关闭应用程序和从任务管理器结束进程有什么区别？

> ID：10765197
> 
> 赞同：7
> 
> 时间：2012-05-26T09:49:21.580
> 
> 标签：windows, process, taskmanager

使用关闭按钮终止应用程序和从任务管理器结束进程有什么区别？

我知道点击关闭按钮`WM_CLOSE`会在消息队列中发布一条消息，但我不知道当我们从任务管理器（或任何类似的应用程序，如 Killbox 或 Process Explorer）中终止进程时会发生什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T10:01:08.227

当您单击应用程序窗口标题栏中的“X”按钮时，会向窗口发送一条[`WM_CLOSE`消息](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632617.aspx)。这是一个“优雅的”关闭——应用程序处理消息，处理任何必要的清理任务，如果它愿意，甚至可以拒绝关闭（通过返回零来响应消息）。`WM_CLOSE`只是窗口或应用程序终止的*请求；*在应用程序本身调用该[`DestroyWindow`函数](http://msdn.microsoft.com/en-us/library/ms632682.aspx)之前，窗口不会被销毁。

当您在任务管理器中按下“结束任务”按钮时，Windows 将首先尝试向应用程序（如果是 GUI 应用程序）`WM_CLOSE`发送消息。换句话说，它首先会很好地询问并让应用程序有机会干净地终止自身。^*

如果您未能响应该初始消息而关闭，任务管理器将通过调用[函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714.aspx)`WM_CLOSE`来跟进。这个函数有点不同，因为它*强制*终止应用程序的进程及其所有线程，而无需请求应用程序的许可。这是一种非常苛刻的关闭方法，应该作为最后的手段使用——例如当应用程序挂起并且不再响应消息时。[`TerminateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686714.aspx)

 *`TerminateProcess`是一个非常低级的函数，它本质上是从内存中删除进程的用户模式部分，强制它无条件终止。调用`TerminateProcess`绕过诸如关闭​​通知和`DLL_PROCESS_DETACH`. 您的应用程序没有拒绝关闭的能力，也没有办法捕获/陷阱/挂钩对`TerminateProcess`. 进程中的所有用户模式代码都将永远停止运行。这是一个非常*不干净*的关机程序，有点类似于将计算机的电源插头从墙上拔下来。

[^*请注意，仅当您使用任务管理器的“应用程序”选项卡来终止应用程序时，这才是正确的。如果您使用“进程”选项卡，则跳过此步骤并`TerminateProcess`立即调用该函数。这种区别反映在各个按钮的标题中。对于“应用程序”选项卡，按钮标记为“结束任务”；对于“进程”选项卡，按钮标记为“结束进程”。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T09:55:04.560

杀死进程`WM_CLOSE`只是用消息向进程发出信号，并允许目标处理消息并优雅地退出。或者，该进程可以选择不在其`WM_CLOSE`处理程序中退出。

通过任务管理器终止进程将使用更苛刻的 TerminateProcess 执行此操作：

> **TerminateProcess**函数用于无条件地导致进程退出。**如果使用TerminateProcess**而不是**ExitProcess**，则动态链接库 (DLL) 维护的全局数据的状态可能会受到影响。
> 
> 该函数停止进程内所有线程的执行，并请求取消所有挂起的 I/O。在所有待处理的 I/O 完成或取消之前，终止的进程无法退出。当一个进程终止时，它的内核对象不会被销毁，直到所有拥有该进程的打开句柄的进程都释放了这些句柄。
> 
> **TerminateProcess**是异步的；它启动终止并立即返回。如果您需要确保进程已终止，请使用进程句柄调用**WaitForSingleObject**函数。进程不能阻止自己被终止。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T09:53:24.713

如果您使用关闭按钮关闭应用程序，您可以让应用程序执行必要的关闭任务（如果有）。如果您从任务管理器中终止进程，则应用程序没有机会执行这些任务，您只需在不通知的情况下终止应用程序。*

# objective-c - presentModalViewController 出现黑屏

> ID：10765207
> 
> 赞同：4
> 
> 时间：2012-05-26T09:51:23.190
> 
> 标签：objective-c, ios, ios5

在警报视图方法中，我实现了以下（非常标准的）代码段来弹出模式视图：

```
 else if (buttonIndex == 1) {
        EmergencyPlanViewController *emergencyPlanView = [[[EmergencyPlanViewController alloc] init] autorelease];
        [emergencyPlanView setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
        [self presentModalViewController:emergencyPlanView animated:YES];
    } 
```

不知何故，它给了我一个黑屏。我找不到这里有什么问题。我在 MainStoryBoard 中创建了窗口，并将 IB 中的 viewcontroller 类自定义为 EmergencyPlanViewController。

触发了 EmergencyPlanView 的 viewDidLoad 方法，但看起来视图没有加载。有人知道这里有什么问题吗？

**编辑：** 要清楚，我没有在我的项目中使用单独的 xib 文件。我只使用情节提要

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T11:32:29.647

通过在 Interface Builder 中为视图设置背景颜色，我设法解决了在呈现模态视图控制器时出现的黑屏问题。我注意到默认情况下，视图的背景颜色设置为黑色/白色（见附图），尽管它显示为白色。我不知道这到底是什么意思，也不知道它是如何导致黑屏的，但是设置单一颜色或纹理可以解决它。PS：我在从 iOS SDK 5 迁移到 6 时遇到了这个问题。

![界面生成器快照](../Images/f3cb7bedd64d3f62e6d9cf054daf8457.png)

[IOS6](/questions/tagged/ios6 "显示标记为“ios6”的问题")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:05:15.067

在`xib`文件中，是您`UIView`设置为文件所有者的视图。这大概就是问题所在。此外，如果您只是 apply `init`，这将加载`EmergencyPlanViewController`具有相同名称的界面构建器文件： `EmergencyPlanViewController.xib` 因此，请确保在这种情况下：`EmergencyPlanViewController`笔尖确实是： `EmergencyPlanViewController.xib` 或者您编写的是`init`：`initWithNibName://whatever nib name here`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:14:50.943

尝试这个：-

```
 EmergencyPlanViewController *emergencyPlanView=[[EmergencyPlanViewController alloc] initWithNibName:@"EmergencyPlanViewController" bundle:nil];
    emergencyPlanView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;

    [self.navigationController presentModalViewController:emergencyPlanView animated:YES]; 
```

# logic - 赛车游戏中的敌车移动逻辑

> ID：10765208
> 
> 赞同：-1
> 
> 时间：2012-05-26T09:51:27.073
> 
> 标签：logic, collision-detection, racing

我正在Andengine开发一个赛车游戏。我创建了一个玩家控制的汽车。但是由于是赛车游戏，应该有3或4辆汽车与玩家的汽车抢夺。我的问题是：其他汽车如何移动沿着路径？他们的逻辑如何？我必须知道某些路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:21:16.230

这是一个相当广泛的问题。从 Andengine 我看到它是一个 2D 游戏引擎，所以我假设你正在做一个 Micro Machines 克隆。

一种非常简单的方法是围绕赛道的所需路线构建一条折线（线段列表）。然后执行以下操作：

*   确定折线上离汽车最近的点（例如通过寻找离汽车最近的折线顶点，然后找到两条连接线段上的最近点）
*   现在按照固定或可变的量（可变=取决于汽车的速度）跟随折线。这也是简单的数学运算，因为您可以计算线段的总长度并将它们相加，直到您知道目标点位于哪个线段
*   然后让汽车转向这个点。如果汽车滑动很多，调整查找以选择更前面的点，这样汽车就会更早转向。

# c++ - 相当于 C++ 中的 Lua“和/或”？

> ID：10765209
> 
> 赞同：3
> 
> 时间：2012-05-26T09:51:39.007
> 
> 标签：c++, lua

在 Lua 中，你可以这样做：

```
foo = a and b or c and d or e 
```

这相当于（至少我很确定它相当于）：

```
local foo = nil
if a then
foo = b
elseif c then
foo = d
else
foo = e
end 
```

在 C++ 中是否有与此等效或类似的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T09:53:46.370

I guess this is what you want:

```
foo = a ? b : (c ? d : e ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T09:53:42.410

有[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation#C.2C_Java.2C_JavaScript)。它具有有趣的优先级，因此始终将其括起来是一个好习惯。

```
bool foo = ( a ? b : ( c ? d : e ) ) 
```

Note that this only works if `b`, `d`, and `e` can reduce to the same type. If `a` is a `double`, `d` is a `float` and `e` is an `int`, your result will always be cast to a `double`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T09:53:29.040

您可以使用三元运算符`?:`

```
foo = a ? b : c ? d : e; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T09:56:46.463

Not really. The main reason this works in Lua is because of dynamic typing- in C++ you could never really make it work. The closest you can get is the ternary operator, but it has srs limitations.

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-05-26T09:53:36.930

`&&`在*C*或*C++*中使用for *and then*并使用`||`for *or else*

将三元`?:`用于*条件表达式*

# javascript - 骨干.js / underscore.js 错误：没有方法'html'

> ID：10765214
> 
> 赞同：4
> 
> 时间：2012-05-26T09:52:55.963
> 
> 标签：javascript, ruby-on-rails, backbone.js

当我尝试导入如下所示的模板时，我似乎遇到了backbone.js / underscore.js 的砖墙：

```
<script type="text/template" id="overview_template">
<div>
  Sample text
</div>
</script> 
```

错误内容如下：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'html' navigation.js:356 
Backbone.View.extend.render navigation.js:356 
Backbone.View.extend.initialize navigation.js:351 
g.View backbone-min.js:33 d backbone-min.js:38 
(anonymous function) navigation.js:379 
f.Callbacks.n jquery-1.7.1.min.js:2 
f.Callbacks.o.fireWith jquery-1.7.1.min.js:2 
e.extend.ready jquery-1.7.1.min.js:2 c.addEventListener.B 
```

触发错误的代码`this.el.html(template);`如下：

```
 var OverviewView = Backbone.View.extend({
  el: $('#overview_container'),

  initialize: function() {
       this.render();
  },

  render: function() {
    var template = _.template( $("#overview_template").html(), {} );
    this.el.html(template);
  },

  defaults: {
    tip_of_the_day: 'open',
    news: 'open',
    recent_presentations: 'open'
  },

  events: {
    "click .overview_subsection_header": "toggleSubsection"     
  },

  toggleSubsection: function (event) {
    $(this).parent().find('.overview_subsection_content').toggle();
  }
 });

 var overview_view = new OverviewView(); 
```

我不确定是什么原因造成的，但它一直让我发疯。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T13:34:31.240

.html() 方法是 jQuery 对象的方法。当你使用 this.el - 它是一个 DOM 对象。要获取 jQuery 对象，请使用 this.$el（它由backbone.js jQuery 对象缓存）或$(this.el)。

因此，您的代码应如下所示：

```
 render: function() {
    var template = _.template( $("#overview_template").html(), {} );
    this.$el.html(template);    
  } 
```

或者

```
 render: function() {
    var template = _.template( $("#overview_template").html(), {} );
    $(this.el).html(template);    
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T13:12:33.470

那不应该

`this.$el.html(template);`

IE。jQuery 包装的 el。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T10:11:43.817

您正在尝试将视图连接到现有元素，`#overview_container`. 但可以肯定的是，在浏览器初始化 DOM 之前就创建了视图类。

由于您的模板存储在`#overview_container`，大概您不希望在该元素中呈现视图？尝试删除`el`视图上的属性并将视图的元素附加到页面中您想要的任何位置。

`this`此外，从该方法返回是一个 Backbone 约定，`render`因此您可以轻松地渲染和附加元素，如下所示：

```
$(document.body).append((new OverviewView()).render().el); 
```

如果您愿意，可以`render`在初始化程序中使用，但这不是标准做法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T09:32:28.440

尝试

```
this.$el.html(template) 
```

代替

```
this.el.html(template) 
```

# powershell - 从powershell创建带有分号的符号链接时遇到问题

> ID：10765215
> 
> 赞同：0
> 
> 时间：2012-05-26T09:53:24.437
> 
> 标签：powershell, symlink

所以我通常使用这种语法从powershell创建符号链接。

```
PS C:\> cmd /c mklink LinkName TargetFolder 
```

但是，当我尝试创建一个带有分号的符号链接时，我遇到了这个错误。

```
PS C:\> cmd /c mklink "link;name" "C:\Folder\file;name"
The syntax of the command is incorrect. 
```

如果我从 cmd 应用程序调用它，它工作正常

```
C:\>mklink "link;name" "C:\Folder\file;name"
symbolic link created for link;name <<===>> C:\Folder\file;name 
```

当通过 powershell 从 cmd 调用时，Echo args 似乎也可以正常工作

```
PS C:\> cmd /c echoargs "link;name" "C:\Folder\file;name"
Arg 0 is <link;name>
Arg 1 is <C:\Folder\file;name> 
```

那么为什么我无法从 powershell 创建该符号链接。该语法适用于所有其他合法字符，甚至是 unicode。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:52:24.127

试试这个：

```
cmd /c 'mklink "link;name" "C:\Folder\file;name"' 
```

# javascript - 我只想在 Iframe 中加载（实时）源 url 的正文

> ID：10765224
> 
> 赞同：0
> 
> 时间：2012-05-26T09:54:27.240
> 
> 标签：javascript, html, css, iframe

我正在执行仅加载 Iframe 中源 URL 的正文标记的任务。除此之外别无他法。我已经为它完成了以下代码。一个javascript函数

```
Function test(){
var iframe=document.getElementById('test');
iframe.contentWindow.document.body.style.backgroundColor="green";
}

<iframe id="Iframe1" width="700" height="400" src="http://www.facebook.com" Onload=test()></iframe> 
```

但是没有效果。

我的实际任务是将我的自定义 css 仅应用于该 body 标签。

请提出任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:10:26.517

除非您在浏览器设置中明确关闭跨域脚本保护，否则这将不起作用。你可以试试写[Greasemonkey Plugin](https://addons.mozilla.org/sl/firefox/addon/greasemonkey/)的运气。

# mysql - 合并和排序两个表

> ID：10765225
> 
> 赞同：0
> 
> 时间：2012-05-26T09:54:34.280
> 
> 标签：mysql

我有两张桌子。

带有列 ID、forumID、标题、内容、unixtime 的“threads”

带有列 ID、threadID、content、unixtime 的“comments”

我想做一个mysql查询，根据它们的unixtime对这两个表中的所有行进行排序，但也不显示相同的“threadID”两次。

以下查询将合并这两个表并对它们进行排序，但我无法删除重复的线程。我尝试了一些 GROUP BY 和 DISTINCT，但没有运气。

```
(SELECT unixtime, ID, threadID FROM comments)
UNION
(SELECT unixtime, ID, forumID FROM threads)
ORDER BY unixtime DESC 
```

它用于显示论坛的首页，因此让同一个主题出现多次是没有意义的。

编辑：我想显示最新的评论和最新的线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:16:55.887

```
SELECT unixtime, ID, type, type_id
FROM (( SELECT unixtime, ID, 'comment' AS type, threadID, forumID
        FROM (  SELECT unixtime, ID, threadID
                FROM comments
                ORDER BY unixtime DESC) AS h
        GROUP BY threadID)
        UNION ALL
      ( SELECT unixtime, ID, 'thread', ID, forumID
        FROM threads)
        ORDER BY unixtime DESC) AS h2
GROUP BY threadID
ORDER BY unixtime DESC 
```

我改变了一些东西。我想你想知道它是论坛还是线程ID？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:02:59.390

如果您没有加入的钥匙，简单的解决方案：

```
 Select DISTINCT tbl.unixtime from
    (
    (SELECT unixtime, ID, threadID FROM comments)
    UNION
    (SELECT unixtime, ID, forumID FROM threads)
    ORDER BY unixtime DESC))
    As tbl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:11:30.897

这将帮助您获得唯一的 threadID

```
(SELECT forumID, ID, unixtime FROM threads)
UNION
(SELECT distinct(threadID), ID, max(unixtime) FROM comments GROUPBY threadID)
ORDER BY unixtime DESC 
```

# android - Ormlite 使用日期查询

> ID：10765227
> 
> 赞同：1
> 
> 时间：2012-05-26T09:54:52.127
> 
> 标签：android, ormlite, query-builder

```
public GenericRawResults<Object[]> getCountByStatus(Date date,int status){
        Log.info("CallDayPlanningDao",date.toString());
        GenericRawResults<Object[]> rawResults=null;
        Dao callDayPlanningDao = getDao(CallDayPlanning.class);
        QueryBuilder query = callDayPlanningDao.queryBuilder();
        int year = date.getYear();
        int month = date.getMonth();
        Date date1 = new Date(year, month,1);
        Date date2 = new Date(year, month+1,1);

        Date startDate = new Date(date1.getTime()-5);
        Date endDate = new Date(date2.getTime()-5);
        try {
            **query.where().between("calldate", startDate, endDate);**//This line is not working
            if(status==Constant.cnStatus){
                query.where().in("callstatus", status,Constant.ccStatus);
            }else{
                query.where().eq("callstatus", status);
            }
            query.groupBy("calldate");
            query.selectRaw("calldate,count(*)");
            rawResults = callDayPlanningDao.queryRaw(query.prepareStatementString(), new DataType[] {
                            DataType.DATE_STRING, DataType.INTEGER });
            // page through the results

        } catch (SQLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        return rawResults;
    } 
```

好吧，我想获取对象的计数，但是日期条件无效，我从数据库中获取所有数据。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-21T15:16:52.943

我是 ORMLite 的新手，在访问 SQLite 数据库时遇到了同样的问题。

今天花了一整天的时间才弄明白，总结如下：

1.  我发现格式“yyyy-Md H:m:s”在 ORMLite 中可以很好地处理 SQLite DateTime 数据类型，而不是 ORMLite 的默认格式“yyyy-MM-dd HH:mm:ss.SSSSS”。

2.  为了让 ORMLite 在“Java Date”和“SQLite DateTime”之间进行转换，需要一个持久化类。

3.  这里显示了我使用的持久类的代码，它覆盖了 DateStringType 的公共函数并使用 "dateFormatConfig" 而不是 defaultDateFormatConfig" ：

`

```
public class DateStringSQLiteType extends DateStringType {

protected static final DateStringFormatConfig dateFormatConfig = new DateStringFormatConfig(
        "yyyy-M-d H:m:s");

private static final DateStringSQLiteType singleTon = new DateStringSQLiteType();

public static DateStringSQLiteType getSingleton() {
    return singleTon;
}

private DateStringSQLiteType() {
    super(SqlType.STRING, new Class<?>[0]);
}

/**
 * Convert a default string object and return the appropriate argument to a
 * SQL insert or update statement.
 */
@Override
public Object parseDefaultString(FieldType fieldType, String defaultStr)
        throws SQLException {
    DateStringFormatConfig formatConfig = convertDateStringConfig(
            fieldType, dateFormatConfig);
    try {
        // we parse to make sure it works and then format it again
        return normalizeDateString(formatConfig, defaultStr);
    } catch (ParseException e) {
        throw SqlExceptionUtil.create("Problems with field " + fieldType
                + " parsing default date-string '" + defaultStr
                + "' using '" + formatConfig + "'", e);
    }
}

/**
 * Return the SQL argument object extracted from the results associated with
 * column in position columnPos. For example, if the type is a date-long
 * then this will return a long value or null.
 * 
 * @throws SQLException
 *             If there is a problem accessing the results data.
 * @param fieldType
 *            Associated FieldType which may be null.
 */
@Override
public Object resultToSqlArg(FieldType fieldType, DatabaseResults results,
        int columnPos) throws SQLException {
    return results.getString(columnPos);
}

/**
 * Return the object converted from the SQL arg to java. This takes the
 * database representation and converts it into a Java object. For example,
 * if the type is a date-long then this will take a long which is stored in
 * the database and return a Date.
 * 
 * @param fieldType
 *            Associated FieldType which may be null.
 * @param sqlArg
 *            SQL argument converted with
 *            {@link #resultToSqlArg(FieldType, DatabaseResults, int)} which
 *            will not be null.
 */
@Override
public Object sqlArgToJava(FieldType fieldType, Object sqlArg, int columnPos)
        throws SQLException {
    String value = (String) sqlArg;
    DateStringFormatConfig formatConfig = convertDateStringConfig(
            fieldType, dateFormatConfig);
    try {
        return parseDateString(formatConfig, value);
    } catch (ParseException e) {
        throw SqlExceptionUtil.create("Problems with column " + columnPos
                + " parsing date-string '" + value + "' using '"
                + formatConfig + "'", e);
    }
}

/**
 * Convert a Java object and return the appropriate argument to a SQL insert
 * or update statement.
 */
@Override
public Object javaToSqlArg(FieldType fieldType, Object obj) {
    DateFormat dateFormat = convertDateStringConfig(fieldType,
            dateFormatConfig).getDateFormat();
    return dateFormat.format((Date) obj);
}

/**
 * @throws SQLException
 *             If there are problems creating the config object. Needed for
 *             subclasses.
 */
@Override
public Object makeConfigObject(FieldType fieldType) {
    String format = fieldType.getFormat();
    if (format == null) {
        return dateFormatConfig;
    } else {
        return new DateStringFormatConfig(format);
    }
}

} 
```

`

4.  用符号定义你的数据类： `@DatabaseField(..., persisterClass = DateStringSQLiteType.class) private Date date;`

5.  它对我来说效果很好，可以执行“Between”查询，例如：

    ```
    list = foo.getDao().queryBuilder().where().between(HistoryStandardView.DATE_FIELD_NAME, new Date(98,1,1), new Date(115,1,1)).query(); 
    ```

ORMLite 的记录器显示结果语句：

[DEBUG] StatementExecutor 查询 'SELECT * FROM `HistoryStandardView` WHERE `date` BETWEEN '1998-2-1 0:0:0' AND '2015-2-1 0:0:0' ' 返回 2 个结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-06T09:25:10.197

如果我错了，请纠正我是您的`calldate`专栏类型`DataType.DATE_STRING`吗？如果是这种情况，则意味着持久数据类型是 VARCHAR，因此当您执行查询时，您会进行字符串比较而不是日期比较。因此，要解决您的问题，您可以：

1.  `calldate`将列的类型更改`DataType.DATE`为以`TIMESTAMP`.
2.  `calldate`将列的类型更改为`DataType.DATE_LONG`。
3.  找到一种方法来进行符合您需要的字符串比较（例如，`date(calldate)`如果您的`calldate`值与时间字符串格式匹配，请调用 sql 函数，请参阅[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)）。

这是我所做的，它并不漂亮，但就像想要的那样工作：

```
QueryBuilder<OffreEntity, Integer> qb = this.daoOffre.queryBuilder();
//Need to format the date i want to compare so it can actually be compare with what i have on db
SimpleDateFormat dateFormatter = new SimpleDateFormat("yyMMdd");
String correctFormat = dateFormatter.format(dateLimite);
//In db the date is represented as a VARCHAR with format dd/MM/yy so i need to reformat so it matches yyMMdd
String rawQuery = String.format("substr(%1$s,7)||substr(%1$s,4,2)||substr(%1$s,1,2) > '%2$s'", OffreEntity.COLUMN_NAME_DATE, correctFormat);
qb.where().raw(rawQuery);
offresDept = qb.query(); 
```

希望能帮助到你！

> ps：感谢杰克道格拉斯的[日期格式查询](https://stackoverflow.com/a/4429028/665823)

# html - TD 中的可滚动 DIV 在 WebKit 中有效，但在 Gecko 中无效

> ID：10765236
> 
> 赞同：1
> 
> 时间：2012-05-26T09:56:05.653
> 
> 标签：html, css, scrollbar, overflow

我正在做一个学校项目，我必须创建一个简单的演示网页。问题是该网页在 Firefox 中无法按预期工作，而在 Chrome 和其他 WebKit 浏览器中则一切正常。

我的问题在这里：[http](http://c303.usv.ro/~HPC/) ://c303.usv.ro/~HPC/ （请不要更改英语语言，因为您将看不到我的问题）。如果您在 Chrome 中转到“Echipamente”，您会看到“#content” div 有一些不错的滚动条，并且页脚停留在底部。如果您在 Firefox 中执行此操作，滚动条将不再出现，并且页脚似乎位于网页可见部分下方的某个位置。作为一种解决方法，我使用：

```
function mozillaFix(){  
    return; // we shouldn't use this
    $('#content').height($('#maindiv').height() - $('#topheader').height() - $('#copynote').height() - 40)
    $('#leftmenu').height($('#maindiv').height() - $('#topheader').height() - $('#copynote').height() - 40)
} 
```

但我想这不是最优雅的解决方案。问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:08:01.740

将`max-height`with Javascript 设置为所需的高度（我使用 FireBug 将其测试为 with `max-height: 400px;`）。然后，Firefox 将制作一个漂亮的滚动条，并根据需要显示页脚。

* * *

正如在互联网上找到的，解决方案是定义 div 容器的高度。如果您有以下 CSS，它应该可以工作：

```
html, body {
    height: 100%;
} 
```

# javascript - 使用 webkit 滚动条的图像--webkit-scrollbar-track-piece 的最小高度？

> ID：10765237
> 
> 赞同：1
> 
> 时间：2012-05-26T09:56:07.240
> 
> 标签：javascript, css, webkit

使用背景图像`-webkit-scrollbar-thumb:vertical`。这是一个 jsFiddle：http: [//jsfiddle.net/6ESpj/2/](http://jsfiddle.net/6ESpj/2/)

为了模拟问题，将高度`div.inner`从 1500 像素增加到 2000 像素。您应该看到底部被截断（我相信这相当于随着页面内容的增长滚动条的高度“缩短”）。

谁能推荐一个解决方案？如有必要，甚至可以使用 javascript。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T22:55:54.630

```
::-webkit-scrollbar-thumb:vertical
{
    background:black url('http://i.minus.com/jbcOb9d7Bb1p6Y.png') no-repeat;
    background-size:26px 63px;  
    background-position:;
    display: block;
    width: 30px;
    height: 100px;
} 
```

试试这个，把它的高度改成你想要的，如果你希望你可以用 JS 计算适当的高度，比如：height_of_::-webkit-scrollbar-thumb:vertical = height_of_div / SOME_CONSTANT... 但我认为那不是必要。

# http - 如何在不使用 -F 的情况下重写此 CURL 多部分/表单数据请求？

> ID：10765243
> 
> 赞同：43
> 
> 时间：2012-05-26T09:57:17.193
> 
> 标签：http, curl, multipartform-data

如何重写以下 CURL 命令，使其不使用该`-F`选项，但仍生成完全相同的 HTTP 请求？即它直接传递正文中的多部分/表单数据。

```
curl -X POST -F example=test http://localhost:3000/test 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-26T09:57:17.753

解决了：

```
curl \
  -X POST \
  -H "Content-Type: multipart/form-data; boundary=----------------------------4ebf00fbcf09" \
  --data-binary @test.txt \
  http://localhost:3000/test 
```

其中`test.txt`包含以下文本，最重要的是具有**CRLF (\r\n) 行尾**：

```
------------------------------4ebf00fbcf09
Content-Disposition: form-data; name="example"

test
------------------------------4ebf00fbcf09-- 
```

注意：重要的是使用`--data-binary`而不是普通旧`-d`的，因为前者保留了行尾（这非常重要）。另外，请注意正文中的边界以额外的`--`.

我要重复一遍，因为它非常重要，但是请求正文文件必须有 CRLF 行结尾。具有良好行尾支持的多平台文本编辑器是 jEdit（[如何在 jEdit 中设置行尾](http://omegadelta.net/wp-content/uploads/2012/05/jedit_lineendings.png)）。

如果您对我如何解决这个问题（使用 Ruby on Rails 应用程序进行调试）感兴趣，而不仅仅是最终解决方案，我在[我的博客](http://omegadelta.net/2012/05/26/debugging-multipartform-data-form-requests-with-ruby-on-rails/)上写下了我的调试步骤。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-12-11T18:56:44.690

您可以将`--form`参数与显式

```
curl -H "Content-Type: multipart/related" \
  --form "data=@example.jpg;type=image/jpeg" http://localhost:3000/test 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-05-26T10:30:01.170

这是一个替代答案，将原始 CURL 语句重写`-d`为单行，没有临时文件。我个人认为临时文件方法更容易理解，但我也将其放在这里以供参考：

```
curl -X POST -H "Content-Type: multipart/form-data; boundary=----------------------------4ebf00fbcf09" -d $'------------------------------4ebf00fbcf09\r\nContent-Disposition: form-data; name="example"\r\n\r\ntest\r\n------------------------------4ebf00fbcf09--\r\n' http://localhost:3000/test 
```

注意：`$'blar'`语法使得 bash 将 \r\n 解析为 CRLF 标记。感谢[这个提示的答案](https://stackoverflow.com/a/5295906/72176)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-02-24T08:24:14.230

这就是我正在使用的，我认为它很干净，不需要临时文件，也不需要占用 RAM，以防你想上传整个文件（所以不要将文件读入内存）。

```
# Set these two.
file='path/to/yourfile.ext'
url='http://endpoint.example.com/foo/bar'

delim="-----MultipartDelimeter$$$RANDOM$RANDOM$RANDOM"
nl=$'\r\n'
mime="$(file -b --mime-type "$file")"

# This is the "body" of the request.
data() {
    # Also make sure to set the fields you need.
    printf %s "--$delim${nl}Content-Disposition: form-data; name=\"userfile\"${nl}Content-Type: $mime$nl$nl"
    cat "$file"
    printf %s "$nl--$delim--$nl"
}

# You can later grep this, or something.
response="$(data | curl -# "$url" -H "content-type: multipart/form-data; boundary=$delim" --data-binary @-)" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-03T05:47:49.673

这是使用“Content-Type：multipart/related”上传一个图像文件，

```
curl --trace trace.txt -X POST -H 'Content-Type: multipart/related; boundary=boundary_1234' --data-binary $'--boundary_1234\r\nContent-Type: application/json; charset=UTF-8\r\n\r\n{\r\n\t"title": "TestFile"\r\n}\r\n\r\n--boundary_1234\r\nContent-Type: image/jpeg\r\n\r\n' --data-binary '@Image0177.jpg' --data-binary $'\r\n--boundary_1234--\r\n' 'http://localhost:3000/google/upload/drive/v2/files?uploadType=multipart' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-19T13:41:09.833

这是我的做法：

```
curl https://httpbin.org/post \
    -H 'content-type: multipart/form-data; boundary=----FormBoundary123456789' \
    --data-binary $'------FormBoundary123456789\r
Content-Disposition: form-data; name="example"\r
\r
test\r
------FormBoundary123456789--\r
' 
```

或者更复杂一点（应该可以移植到大多数现代 shell）：

```
DELIM=----FormBoundary$RANDOM$RANDOM

curl https://httpbin.org/post \
    -H "content-type: multipart/form-data; boundary=$DELIM" \
    --data-binary --$DELIM$'\r
Content-Disposition: form-data; name="example"\r
\r
test\r
'--$DELIM--$'\r
' 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2016-01-19T11:01:41.640

> 这适用于多部分/表单数据请求方法。上传文件添加 --form filename="@path/image.jpg;type=image/jpeg"

curl --form key="value" --form key="value" [http://localhost:3000/test](http://localhost:3000/test)

# iphone - 仅在从相机拍摄图像时，应用程序在 ios 5.1.1 中显示内存警告后崩溃

> ID：10765245
> 
> 赞同：0
> 
> 时间：2012-05-26T09:57:18.893
> 
> 标签：iphone, crash, uiimagepickercontroller

嗨，我也经历了很多关于 SO[的](https://stackoverflow.com/questions/7689119/ios-5-gm-error-more-than-maximum-5-filtered-album-lists-trying-to-register)问题，但它对 ios 5.1.1 没有帮助。当我拍摄前 2 次图像时，它的工作正常，然后第 3 次应用程序显示内存警告并崩溃。这是我的代码：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
[picker dismissModalViewControllerAnimated:YES];

UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    if (image) {

    if ([appdel.arrImageData count]==0) {
        count=0;

    }
    count++;
    [appdel.arrImageData addObject:[image copy]];
}} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:02:48.610

每次你拍照时，你都会在 arrImageData 中保存一份副本，这样就会填满内存，直到 iOS 杀死你的应用程序，因为你占用了太多内存。重新考虑您的设计，以便您只在内存中保留一张图像。如果您出于某种原因需要所有图片，请将其保存在文档或缓存目录中并清理内存，然后再拍摄另一张照片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T10:06:42.087

我更正了您的代码检查它是否有帮助

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
        if (image) {

        if ([appdel.arrImageData count]==0) {
            count=0;

        }
        count++;
        [appdel.arrImageData addObject:[image copy]];
    }

[picker dismissModalViewControllerAnimated:YES];
[picker release];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T10:07:15.747

我没有看到您的 ImagePickerController 的内存管理。但是在我调用dismissModal之后，我在释放我的选择器时遇到了问题......

获取图像后尝试关闭模态视图和选择器。

更新：我同意你的看法。我有太多与尝试让 pickerController 在从 iOS 3 到 5 的多个设备上适用于许多 iOS 版本相关的问题。结果我跳过了对 iOS 3 的支持并开始实现自己的代码来处理基于[AV的图片和电影基础编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/AudioVideo/Conceptual/AVFoundationPG/Articles/00_Introduction.html#//apple_ref/doc/uid/TP40010188)，[AV 基础框架参考](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVFoundationFramework/_index.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T10:30:33.720

应用程序在使用时经常收到内存警告`UIImagePickerController`。发生的情况是，当您一次又一次地拍摄图像并拍摄图像时，您的内存每次都在不断增加（如果您没有正确管理内存。在我的情况下，它曾经每 1.5MB 增加一次）。所以它可能会在第一次、第二次或第三次工作并在下一次收到内存警告，或者如果后台运行的应用程序太多，它可能会在第一次收到内存警告。

重要的是您如何处理此内存警告。一旦应用程序收到内存警告，`viewDidUnload`就会调用所有活动视图控制器，您应该在其中释放所有可以再次创建的不需要的对象。所以你的应用程序可能会崩溃，因为你在那里做错了什么。所以简而言之，我们需要查看你的 .h 和 .m 文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T12:32:51.220

[在这里](https://stackoverflow.com/questions/9972454/compressing-image-taken-from-device-or-chosen-from-library-ios/9972544#9972544)你可以得到你想要的。

在该代码中，我只是将自动释放池用于释放内存。

我希望这可以帮助你。

# android - 在 Andengine 中使物理体运动多分辨率

> ID：10765253
> 
> 赞同：1
> 
> 时间：2012-05-26T09:58:20.597
> 
> 标签：android, box2d, andengine, scaling, game-physics

在andengineBox2d中制作物理体时，我遇到了一种奇怪的问题。我使用 800x480 分辨率制作了所有游戏，并使用支持所有分辨率的功能缩放所有图形。因此，当我在 320x480（Galaxy Ace）中运行游戏时，所有精灵和图形都根据分辨率看起来很完美（缩放），但我在 800x480 分辨率下制作的圆形物体仍然是相同的尺寸。我不知道它有什么问题......请帮助......我被困在这里。

谢谢你。

# ios - 滚动时不会调用 NSTimer 定期任务

> ID：10765264
> 
> 赞同：9
> 
> 时间：2012-05-26T10:00:07.600
> 
> 标签：ios, scroll, nstimer

我有一个 NSTimer

```
timer = [NSTimer scheduledTimerWithTimeInterval:1 
                                         target:self 
                                       selector:@selector(periodicTimer) 
                                       userInfo:nil 
                                        repeats:YES]; 
```

哪个

```
- (void)periodicTimer
{
    NSLog(@"Bang!");
    if (timerStart != nil)
        [timerLabel setText:[[NSDate date] timeDifference:timerStart]];        
} 
```

问题在于，在滚动表格视图（或执行其他任务）时，标签不会更新，此外，“砰！” 没有出现，所以我认为该方法不会被调用。

我的问题是即使用户正在使用应用程序界面，如何定期更新标签。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-26T11:58:19.353

您需要将计时器添加到 UITrackingRunLoopMode 以确保您的计时器在滚动期间也会触发。

```
NSRunLoop *runloop = [NSRunLoop currentRunLoop];
NSTimer *timer = [NSTimer timerWithTimeInterval:0.1 target:self selector:@selector(myTimerAction:) userInfo:nil repeats:YES];
[runloop addTimer:timer forMode:NSRunLoopCommonModes];
[runloop addTimer:timer forMode:UITrackingRunLoopMode]; 
```

来自： [https ://stackoverflow.com/a/1997018/474896](https://stackoverflow.com/a/1997018/474896)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-26T10:02:30.823

不确定这个，但我的第一个猜测是，渲染界面的主线程在更新界面时没有机会做任何事情。

您可以为您的计时器创建一个带有新运行循环的新线程，但这可能是一个丑陋的解决方案。你想在你的应用程序中实现什么功能？也许我们可以提出比使用计时器更好的策略。

# javascript - jquery ui multiselect 不适用于多选+单选

> ID：10765268
> 
> 赞同：1
> 
> 时间：2012-05-26T10:00:36.130
> 
> 标签：javascript, jquery, select, multi-select

我正在使用这个插件[http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#single](http://www.erichynds.com/examples/jquery-ui-multiselect-widget/demos/#single)进行多选，也希望在同一页面中进行单选。基本上我有 2 个选择 - 一个是多个，另一个是单个，但我想将它们设置为相同的样式。所以我尝试：

```
<script type="text/javascript">
        $(function(){
        $("#altceva").multiselect({
            multiple: false,
            header: "Select an option",
            noneSelectedText: "Select an Option",
            selectedList: 1
        });

         $("#ceva").multiselect();
    });     
    </script> 
```

和选择：

```
<select name="123_cat[]" id = "ceva" multiple="multiple" size="5">  
   <?php foreach($subcategories['categories'] as $sc) { ?>
   <optgroup label="<?php echo $sc['name']; ?>">
    <?php foreach ($sc['subcategories'] as $ss){?>                              
             <option id = "123_cat" value="<?php echo $ss['sid']; ?>" <?php if (isset($_GET['123_cat'])) { if(in_array($ss['sid'], $_GET['123_cat'])) echo "selected = 'selected'";} else { if(in_array($ss['sid'], $the_subcategories)) echo "selected = 'selected'"; } ?>><?php echo $ss['name']; ?></option>
        <?php }?> 
```

```
 <label for="oras">Oras</label>  
       <select name="123_city" id = "altceva">      
          <?php foreach($ac as $rc) {?> 
             <option id = "123_city" value="<?php echo $rc['slug']; ?>" <?php if         (isset($_GET['123_city'])) { if ($rc['slug'] == $_GET['123_city']) echo 'selected =   "selected"';} else { if ($rc['slug'] == $my_data->city) echo 'selected = "selected"';} ?>>           <?php echo $rc['name']; ?> </option>
        <?php } ?>

            </select> 
```

问题是多选有效，但单选根本不起作用（我无法选择任何内容，列表被下拉，但没有选择任何内容）。知道为什么吗？多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T06:31:08.650

```
altceva should be the id of multiselect dropdown and ceva should be the id of single dropdown.... Go for the below code...:)

<script type="text/javascript">
        $(window).load(function(){ 
        $("#altceva").multiselect({
            multiple: true,
            header: false,
            noneSelectedText: "Select an Option",
            selectedList: 1
        });

         $("#ceva").multiselect({
            multiple: false,
            header: false,
            noneSelectedText: "Select an Option",
            selectedList: 1
        });
    });     
    </script> 
```

# java - 在不继承抽象类的情况下模拟对抽象类的公共方法的调用，最好使用 mockito

> ID：10765273
> 
> 赞同：6
> 
> 时间：2012-05-26T10:00:56.880
> 
> 标签：java, unit-testing, junit, mocking, mockito

我正在使用 JUNIT + Mockito 编写单元测试来测试如下方法：

```
public someObject methodUnderTest(){
  SomeObject obj = SomeAbstractClass.someMethod();

  if(obj!=null){
    obj.someOtherMethod();
  }

  return someThing;
} 
```

我想模拟`abstract Class "SomeAbstractClass"`上面代码片段中提到的调用，这样我就可以验证对“obj”的调用，例如：

```
verify(SomeAbstractClass).someMethod();
verify(obj).someOtherMethod(); 
```

我尝试过使用 mockito 功能，例如： Mockito.CALLS_REAL_METHODS Mockito.RETURNS_MOCKS

但由于 SomeAbstractClass 不可用的依赖项，它们不起作用。

笔记：

1) SomeObject 是一个接口。

2）我需要一种技术来测试上面的代码片段。我被限制使用上面的代码片段并且不能更改代码片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:34:25.483

您可以使用[PowerMock](http://powermock.googlecode.com/svn/docs/powermock-1.4.12/apidocs/org/powermock/api/mockito/PowerMockito.html)来模拟静态和最终方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T19:48:40.923

听起来问题在于您对 CALLS_REAL_METHODS 的使用适用于整个类，您真的想在其中模拟特定方法（即制作“部分模拟”）。您在这里有两种选择，一种是 using `thenCallRealMethod`，另一种是 using`CALLS_REAL_METHODS`然后专门模拟您需要的调用：

```
public void testMethodUnderTest_mockSpecificThings() {
    SomeAbstractClass myAbstractClass = Mockito.mock(SomeAbstractClass.class);
    SomeAbstractClass myObject = Mockito.mock(SomeObject.class);
    when(myAbstractClass.someMethod()).thenReturn(foo);
    when(myAbstractClass.methodUnderTest()).thenCallRealMethod();

    myAbstractClass.methodUnderTest();

    verify(myAbstractClass).someMethod();
    verify(myObject).someOtherMethod();
}

public void testMethodUnderTest_makeSpecificRealCalls() {
    SomeAbstractClass myAbstractClass =
        Mockito.mock(SomeAbstractClass.class, CALLS_REAL_METHODS);
    SomeAbstractClass myObject = Mockito.mock(SomeObject.class);
    // overrides the default answer
    when(myAbstractClass.someMethod()).thenReturn(myObject);

    myAbstractClass.methodUnderTest();

    verify(myAbstractClass).someMethod();
    verify(myObject).someOtherMethod();
} 
```

预先警告 SomeAbstractClass 从未实际实例化，因此如果您依赖抽象类构造函数中的任何行为，例如变量初始化 - 包括声明字段的内联初始化 - 您将需要自己显式地进行这些调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T10:09:04.570

使用匿名类：

```
public interface SomeObject {
     public Object someOtherMethod();
}

public abstract class SomeAbstractClass {
    abstract SomeObject someMethod();
}

@Test
public void test() {
    SomeAbstractClass target = new SomeAbstractClass() {
        SomeObject someMethod() {
            // some impl
            SomeObject someObject = new SomeObject() {
                public Object someOtherMethod() {
                    // some other impl
                }
            };
            return someObject;
        }
    };

    // now test target
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-28T11:57:21.973

假设：如果您编写单元测试，我想您仍然可以稍微修改测试方法。

解决方案：

1.  提取对可覆盖方法的静态方法调用：

> ```
> public someObject methodUnderTest() {
>     SomeObject obj = getSomeObject();
> 
>     if(obj!=null){
>       obj.someOtherMethod();
>     }
> 
>     return someThing;
> }
> 
> protected SomeObject getSomeObject() {
>     return SomeAbstractClass.someMethod();
> } 
> ```

1.  然后您可以使用 Mockito Spy 部分模拟您实际测试的对象：

> ```
> private ClassUnderTest classUnderTest;
> 
> @Before
> public void setUp() {
>     classUnderTest= new ClassUnderTest();
>     classUnderTest = Mockito.spy(classUnderTest);
> }
> 
> @Test
> public void test() {
>     SomeObject someObject = Mockito.mock(SomeObject.class);
>     when(classUnderTest.getSomeObject()).thenReturn(someObject);
>     classUnderTest.methodUnderTest();
>     verify(someObject).someOtherMethod();
> }
> 
> @Test
> public void testNull() {
>     when(classUnderTest.getSomeObject()).thenReturn(null);
>     classUnderTest.methodUnderTest();
>     verify(something);
> } 
> ```

# android - 禁用菜单项

> ID：10765276
> 
> 赞同：0
> 
> 时间：2012-05-26T10:01:35.177
> 
> 标签：android, android-menu

在我的 Android 应用程序中，我有一个带有菜单的活动“A”。当您从另一个活动“B”返回时，我想禁用菜单项。我正在使用方法 OnPrepareOptionsMenu 和 onActivityResult 但我做不到。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:26:06.627

您可以执行以下操作，但您必须覆盖第二个活动的 onDestroy 方法并将 isEnabled 变量设置为 true。

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    menu.clear();

    if (isEnabled) {
        menu.add("item").setEnabled(true);
    } else {
        menu.add("item");
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:07:52.960

在添加菜单项的位置编写“if”逻辑：

像这样的东西：

```
@Override
public boolean onPrepareOptionsMenu (Menu menu) {
    if (isFinalized)
        menu.getItem(1).setEnabled(false);
    return true;
} 
```

让我知道这是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:29:03.177

我得到了它。我得到了它。通过 onActivityResult 我返回了一个字符串标志“dev”

```
@Override
public boolean onPrepareOptionsMenu (Menu menu){
    MenuItem m=menu.getItem(0);
    if (dev.contentEquals("1")){
           m.setEnabled(false);
        }
    return true;
} 
```

非常感谢 Agarwal 和 Shishir

# sts-springsourcetoolsuite - 启动 Springsource 工具给出一些错误

> ID：10765278
> 
> 赞同：1
> 
> 时间：2012-05-26T10:01:38.897
> 
> 标签：sts-springsourcetoolsuite

最近几天我在 STS 工作。但是今天它没有启动并给出以下窗口。所以，我重新安装了 STS。但问题仍然存在。有人可以帮忙整理一下吗？ ![在此处输入图像描述](../Images/ff398e46c277c803b9192d1772b5d555.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:26:48.250

几个小时后我找到了解决方案。有些人有同样的问题并 [在这里](http://techboard.wordpress.com/2009/01/30/error-starting-eclipse/#comment-269)解决：

> Eclipse 正在尝试获取系统上安装的 java 版本。您可能已经安装了最新版本，但以后软件的任何升级都有可能将 system32 文件夹中的 java.exe 文件替换为旧版本。您需要做的就是使用干净的参数运行 eclipse。在eclipse.exe所在的目录下创建一个批处理文件，在里面写下这一行`eclipse -clean -vmargs -Xmx256m`

# windows - Windows 中 Activestate Perl 中的 @INC 不正确

> ID：10765282
> 
> 赞同：1
> 
> 时间：2012-05-26T10:02:02.790
> 
> 标签：windows, perl, activeperl, activestate

我将 ActiveState perl 与 Komodo Edit 一起使用。我收到以下错误。

```
在 @INC 中找不到 MyGengo.pm（@INC 包含： C:/Perl/site/lib C:/Perl/lib 。）
在 D:\oDesk\MyGengo Integration\sample 第 6 行。
```

为什么解释器在寻找`C:/Perl/lib`而不是`C:\Perl\lib`？难道它不知道它是 Windows 而不是 Linux？

**编辑**

`.pm`我通过复制目录中的文件解决了这个问题`C:\Perl\lib`。我认为，这个问题是因为这个模块是手动下载的。PPM install 会将`.pm`文件复制到`lib`目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T11:25:59.453

就Windows而言，`C:/Perl/lib`和`C:\Perl\lib`都是同一个目录。

perlport[文档](http://perldoc.perl.org/perlport.html#DOS-and-Derivatives)说明（已添加重点）

> ## DOS 及其衍生产品
> 
> Perl 长期以来一直被移植到运行在诸如 PC-DOS、MS-DOS、OS/2 和大多数 Windows 平台（如果你算上 Windows CE 除外）等系统下运行的 Intel 风格的微型计算机上。熟悉`COMMAND.COM`或`CMD.EXE`样式化 shell 的用户应该知道，这些文件规范中的每一个都可能有细微的差异：
> 
> ```
> my $filespec0 = "c:/foo/bar/file.txt";
> my $filespec1 = "c:\\foo\\bar\\file.txt";
> my $filespec2 = 'c:\foo\bar\file.txt';
> my $filespec3 = 'c:\\foo\\bar\\file.txt'; 
> ```
> 
> **系统调用接受`/`或`\`作为路径分隔符。**但是，DOS 老式的许多命令行实用程序都将`/`其视为选项前缀，因此可能会被包含 / 的文件名混淆。除了调用任何外部程序之外，`/`它还可以正常工作，而且可能会更好，因为它更符合流行的用法，并且避免了记住什么回击和什么不回击的问题。

您的评论显示您正在使用[mygengo-perl-new](https://github.com/nheinric/mygengo-perl-new/tree/ce194df4ccad09c588c7d77ecc22c50865e7b56a)但已将其安装在`C:\Perl\lib\MyGengo\mygengo-api\nheinric-mygengo-perl-new-ce194df\mygengo`. 这是安装模块的不寻常位置。模块的编写方式，它期望`mygengo.pm`位于名为 in 的目录之一中`@INC`。客户端代码然后将其拉入

```
use mygengo; 
```

我的建议是从`mygengo.pm`移动`C:\Perl\lib\MyGengo\mygengo-api\nheinric-mygengo-perl-new-ce194df\mygengo`到`C:\Perl\site\lib`.

作为替代方案，如果您将 mygengo 用作您正在开发的另一个包的一部分，您可以`mygengo`放入源代码树中，也许作为[git submodule](http://git-scm.com/book/en/Git-Tools-Submodules)。`use lib 'mygengo';`如果您这样做，请不要忘记添加。

有关完整的详细信息，请阅读perlfunc 文档中的[`@INC`搜索过程](http://perldoc.perl.org/functions/require.html)`require`以及[通过`use`](http://perldoc.perl.org/functions/use.html).

## 关于斜杠与反斜杠的一般建议

即使您的代码仅在 Windows 上运行，也更喜欢在硬编码路径中使用正斜杠作为分隔符。反斜杠是 Perl 语言中的转义字符，因此您必须更仔细地考虑它。在双引号字符串中，您必须记住转义转义字符以获得其普通含义，*例如*，

```
# my $dir = "C:\Perl\lib";  # oops, $path would be 'C:Perlib'

$dir = "C:\\Perl\\lib"; 
```

在单引号字符串中情况可能会好一些。设置`$dir`如

```
$dir = 'C:\Perl\lib'; 
```

做你所期望的，但说你想要`$dir`一个斜杠。

```
$dir = 'C:\Perl\lib\'; 
```

现在你有一个语法错误。

```
在 dirstuff 行 n 的 EOF 之前的任何地方都找不到字符串终止符“'”。
```

您可能希望将另一个值插入到`$dir`.

```
$dir = 'C:\Perl\lib\$module';  # nope 
```

哦，是的，您需要双引号进行插值。

```
$dir = "C:\Perl\lib\$module";  # still not right 
```

摸头调试后

```
$dir = "C:\\Perl\\lib\\$module";  # finally 
```

因此，反斜杠更容易出错并且对维护很麻烦。正斜杠是单引号和双引号字符串中的普通字符，因此它几乎总是意味着您所期望的。

正如[perlport 所](http://perldoc.perl.org/perlport.html#DOS-and-Derivatives)指出的，Windows 命令外壳将正斜杠视为引入选项，将反斜杠视为路径分隔符。如果您无法避免使用 shell，那么您可能会被迫处理反斜杠。

# ios5 - 本地通知停止出现？

> ID：10765287
> 
> 赞同：0
> 
> 时间：2012-05-26T10:02:33.900
> 
> 标签：ios5, uilocalnotification

我最近为客户端做了一个包含本地通知的应用程序。在原始版本中，通知工作得非常好。但是当客户端尝试发布另一个版本时，只更改了图像和数据库资源，没有更改代码，通知停止工作。现在我一直在尝试调试代码，但一无所获。一切似乎都很好，但没有通知。同时，如果我运行早期的构建，它会完美运行。你能帮我看看有什么问题吗？非常感谢你花时间陪伴。

```
NSTimeInterval diffTimeIntervalSinceNow = timeInterval; //time-interval after which notification should appear

    UILocalNotification *localNotification = [[UILocalNotification alloc] init]; //Create the localNotification object
    [localNotification setFireDate:[NSDate dateWithTimeIntervalSinceNow:diffTimeIntervalSinceNow]]; //Set the date when the alert will be launched using the date adding the time the user selected on the timer
    //[localNotification setRepeatInterval:notificationInterval];

    [localNotification setAlertAction:@"Launch"]; //The button's text that launches the application and is shown in the alert
    [localNotification setAlertBody:alertBody]; //Set the message in the notification from the textField's text
    [localNotification setHasAction: YES]; //Set that pushing the button will launch the application
    [localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]+1]; //Set the Application Icon Badge Number of the application's icon to the current Application Icon Badge Number plus 1

    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; //Schedule the notification with the system
    [localNotification release]; 
```

这就是我一直在使用的代码。但这与在早期版本中工作的代码完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:58:43.280

我更正了您的代码：- 试试这个：- 在按钮操作中或在任何方法中

```
 [[UIApplication sharedApplication] cancelAllLocalNotifications];
       NSTimeInterval diffTimeIntervalSinceNow = timeInterval; //time-interval after which notification should appear

            UILocalNotification *localNotification = [[UILocalNotification alloc] init]; //Create the localNotification object
            [localNotification setFireDate:[NSDate dateWithTimeIntervalSinceNow:diffTimeIntervalSinceNow]]; //Set the date when the alert will be launched using the date adding the time the user selected on the timer
            //[localNotification setRepeatInterval:notificationInterval];

            [localNotification setAlertAction:@"Launch"]; //The button's text that launches the application and is shown in the alert
            [localNotification setAlertBody:alertBody]; //Set the message in the notification from the textField's text
            [localNotification setHasAction: YES]; //Set that pushing the button will launch the application
            [localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]+1]; //Set the Application Icon Badge Number of the application's icon to the current Application Icon Badge Number plus 1

            [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; //Schedule the notification with the system
            [localNotification release]; 
```

为此工作：- 在 App 委托中检查此方法是否获取某些事件

```
-(void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{

} 
```

要取消所有通知，请在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T07:25:13.583

可能你的客户端也修改了alertBody，新的alertBody的长度太长了？

# android - 音乐应用程序如何在 Android 屏幕关闭时检测音量键？

> ID：10765292
> 
> 赞同：2
> 
> 时间：2012-05-26T10:03:04.257
> 
> 标签：android, audio, volume

我在后台播放一首歌，现在屏幕关闭了。我按下音量键，音乐流的音量发生变化。怎么会发生？我已经搜索了很长时间关于如何在屏幕关闭时检测音量键按下事件的解决方案，但我目前不知道如何解决该问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:13:48.200

你需要一个`BroadcastReceiver`收听相应广播的。[在这里](https://stackoverflow.com/questions/4763464/howto-receive-media-volume-change-notifications)看到一个类似的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T09:37:33.177

如果您希望控制通过您的应用播放的音频音量，请使用 setVolumeControlStream() 方法。它将音量键按下定向到您指定的音频流。

```
setVolumeControlStream(AudioManager.STREAM_MUSIC); 
```

# performance - 为什么这种 EF 数据导入方法的性能如此糟糕？

> ID：10765295
> 
> 赞同：1
> 
> 时间：2012-05-26T10:03:28.890
> 
> 标签：performance, entity-framework

我有一个循环，在这里被删减，它执行员工记录的导入，如下所示：

```
var cts2005 = new Cts2005Entities();
IEmployeeRepository repository = new EmployeeRepository();

foreach (var c in cts2005.Candidates)
{
    var e = new Employee();

    e.RefNum = c.CA_EMP_ID;
    e.TitleId = GetTitleId(c.TITLE);
    e.Initials = c.CA_INITIALS;
    e.Surname = c.CA_SURNAME;

    repository.Insert(e);
} 
```

实际上还有几个字段，总共有九个类似`GetTitleId(c.TITLE)` 上面的查找。这些代码都是这样的：

```
private List<Title> _titles;
private Guid GetTitleId(string titleName)
{
    ITitleRepository repository = new TitleRepository();
    if (_titles == null)
    {
        _titles = repository.ListAll().ToList();
    }
    var title = _titles.FirstOrDefault(t => String.Compare(t.Name, titleName, StringComparison.OrdinalIgnoreCase) == 0);
    if (title == null)
    {
        title = new Title { Name = titleName };
        repository.Insert(title);
        _titles.Add(title);
    }
    return title.Id;
} 
```

除了实体类型不同外，所有`repository.Insert()`调用都如下所示：

```
public void Insert(Employee entity)
{
    CurrentDbContext.Employees.Add(entity);
    CurrentDbContext.SaveChanges();
} 
```

而且所有的PK都是Guid。我知道这可能是一个小问题，但我没想到它对这样的小体积产生如此大的影响。

我还没有对这个例程进行任何调整或优化，因为它只是针对我的小型测试数据库，但昨天我被迫意外导入了 6000 条记录。到最后，这个处理速度已经减慢到每条记录大约 1 秒，这非常令人沮丧。如果没有一些调整，我不会期望高速，但没有那么低。

我的方法有什么明显的、严重的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:07:18.140

您的 GetTitleId 将所有标题从数据库中拉到应用程序中，但它正在对每个“候选人”的所有标题进行线性搜索。这可能非常昂贵。使用带有`StringComparer.OrdinalIgnoreCase`.

另外，你为什么不分析你的应用程序？加载它并在调试器中点击中断 10 次。大部分时间停在哪里？这是热点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:15:10.413

感谢上面 marc_s 的评论，我将例程更改为仅`SaveChanges`每 500 次插入调用一次，速度提高了约 500%。

# android - Android - 使用 PNG 文件在画布上设置背景

> ID：10765300
> 
> 赞同：0
> 
> 时间：2012-05-26T10:04:56.860
> 
> 标签：android, png, resolution, android-canvas, bitmapfactory

`Canvas`我正在尝试在我的应用程序中将 .PNG 文件设置为背景。我制作了一个 480 x 800 的图像并使用了这种方法：

```
canvas.drawBitmap(BitmapFactory.decodeResource(getResources(), 
                  R.drawable.image_1), 0, 0, null); 
```

我已经启动了一个模拟器（WVGA800），但我的图像看起来比设备的屏幕大。

如何调整此图像的大小或应使用哪种方法使此图像匹配良好。

其次，有没有办法让不同屏幕分辨率的设备通用这样的背景？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:13:36.437

试试这个...

*设置位图*

```
Bitmap mFinalbitmap= BitmapFactory.decodeResource(getResources(), R.drawable.image_1); 
```

*根据您的宽度和高度调整位图大小*

```
mFinalbitmap= resizeImage(mFinalbitmap, width ,height); 
```

*设置位图的画布*

```
canvas.drawBitmap(mFinalbitmap, 0, 0, null); 
```

调整大小功能：根据维护图像的 x 和 y

```
public Bitmap resizeImage(Bitmap image,int maxWidth, int maxHeight)
{
    Bitmap resizedImage = null;
    try {
        int imageHeight = image.getHeight();

        if (imageHeight > maxHeight)
            imageHeight = maxHeight;
        int imageWidth = (imageHeight * image.getWidth())
                / image.getHeight();

        if (imageWidth > maxWidth) {
            imageWidth = maxWidth;
            imageHeight = (imageWidth * image.getHeight())
                    / image.getWidth();
        }

        if (imageHeight > maxHeight)
            imageHeight = maxHeight;
        if (imageWidth > maxWidth)
            imageWidth = maxWidth;

        resizedImage = Bitmap.createScaledBitmap(image, imageWidth,
                imageHeight, true);
    } catch (OutOfMemoryError e) {

        e.printStackTrace();
    }catch(NullPointerException e)
    {
        e.printStackTrace();
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return resizedImage;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:36:14.087

你把图片放在哪里了？如果它在 drawable 或 drawable-mdpi 中，它将比您所说的要大，因为 WVGA800 具有高密度 (hdpi)。

即使你把它放在 drawable-hdpi 文件夹中，它也适用于 WVGA800，但它可能在其他具有不同分辨率和纵横比的设备上显示效果不佳。

您需要处理纵横比的缩放和保持（如果您愿意）。否则，您将在其他设备上遇到相同的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-19T07:40:51.137

最简单的方法：在你的类中声明静态位图：

```
Bitmap bitmap; 
```

设置调整大小的位图，例如您希望将位图调整为 100x100：

```
 private void initBitmap(){
            bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.Your_bitmap);
            bitmap = Bitmap.createScaledBitmap(bitmap, 100,100,true);
    } 
```

并在构造函数中调用方法

# java - 从另一个类访问 Activity 中的 UI 元素

> ID：10765302
> 
> 赞同：2
> 
> 时间：2012-05-26T10:05:03.750
> 
> 标签：java, android, android-layout

我的代码有问题

```
setContentView(R.layout.game);
TextView text = (TextView) findViewById(R.id.qwe_string);
text.setText("Hello Android"); 
```

如果它在活动中，它可以工作，但如果不是，显然，它会给出错误：

```
The method findViewById(int) is undefined for the type new TimerTask(){}
The method setContentView(int) is undefined for the type new TimerTask(){} 
```

代码在单独的类（不是活动）中的计时器内。完整代码如下。

```
//main timer task for ingame time processing
static Timer gameTimer = new Timer();
static TimerTask gameTimerTask = new TimerTask() {
    @Override
    public void run() {
        setContentView(R.layout.game);
        TextView text = (TextView) findViewById(R.id.qwe_string);
        text.setText("Hello Android");
    }
}; 
```

我试着像那样改变它

```
ScreenGame.this.setContentView(R.layout.game);
TextView text = (TextView) ScreenGame.this.findViewById(R.id.qwe_string);
text.setText("Hello Android"); 
```

但它仍然不起作用:(

*PS - 是的，我搜索了其他类似的问题，但所有这些问题虽然看起来都一样，但实际上完全不同。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:12:19.337

```
ScreenGame.this.setContentView(R.layout.game);
TextView text = (TextView) ScreenGame.this.findViewById(R.id.qwe_string);
text.setText("Hello Android"); 
```

完全一样

```
setContentView(R.layout.game);
TextView text = (TextView) findViewById(R.id.qwe_string);
text.setText("Hello Android"); 
```

* * *

**错误代码**

[您应该创建一个父类，它会触发所有其他活动。在该父类中，您可以引用每个子活动，并且可以向每个孩子询问其文本字段：]

```
// In the parent:
child.getTextView().setText("Hello galaxy!");

// with the child method:
TextView getTextView () {
  return (TextView) findViewById(R.id.qwe_string);
} 
```

* * *

编辑：更多信息：

我给的代码不好，我没有很好地理解你的问题......我希望我现在这样做，我会尝试纠正自己。

创建一个单独的类，例如`MyTimer`，它将扩展`TimerTask`该类：

```
class MyTimer extends TimerTask {
  // your class
} 
```

创建一个构造函数，将 TextView 作为参数除外，并保存对它的引用。

```
TextView theTextView;
MyTimer (TextView tv) {
  this.theTextView = tv;
} 
```

现在实施`run()`：

```
@Override
public void run() {
    setContentView(R.layout.game);
    thetextView.setText("Hello Galaxy!");
} 
```

使用以下代码调用 make 此类：

```
static TimerTask gameTimerTask = new MyTimer((TextView) findViewById(R.id.qwe_string)); 
```

我希望这一切都是正确的，因为我没有任何测试环境，所以我必须凭记忆做到这一点。至少它应该可以帮助您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:10:32.727

你会需要：

```
ScreenGame.this.runOnUiThread( new Runnable(){
  public void run(){
   TextView text = (TextView) ScreenGame.this.findViewById(R.id.qwe_string);
   text.setText("Hello Android");  }
 }); 
```

你应该调用以下`onCreate()`行`ScreenGame`：

```
setContentView(R.layout.game); 
```

# haskell - 快乐：减少/减少冲突

> ID：10765307
> 
> 赞同：3
> 
> 时间：2012-05-26T10:05:36.813
> 
> 标签：haskell, happy, reduce-reduce-conflict

为什么这会引发有关减少/减少冲突的警告

```
root : set1 'X'     
     | set2 'X' 'X' 

set1 : 'A'          
     | 'B'             

set2 : 'B'          
     | 'C' 
```

但接下来可以吗？

```
root : 'A' 'X'     
     | 'B' 'X'     
     | 'B' 'X' 'X'  
     | 'C' 'X' 'X' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T10:53:16.430

不同之处在于，在第一种情况下，解析器必须先对归约做出选择，然后才能查看是否`'X'`会遵循一个或两个。

在第二种情况下，解析器可以使用相同的状态，我们称它为`BX`，当它看到 a`B`和 an时`X`——都移位了——然后根据下一个标记，可以移位（如果是`X`），然后减少`'B' 'X' 'X'`规则，或者减少`'B' 'X'`立即地。

请注意，如果它们没有*紧随其后*的相同标记——例如你有`set1 'X'`但是`set2 'Y'`——那么就不会有问题，因为前瞻将能够启动并选择要采取的减少。

`bison -v`以下是暴露此问题的输出中的相关部分：

### 案例一

```
state 0

$accept: . root $end

'A'  shift, and go to state 1
'B'  shift, and go to state 2
'C'  shift, and go to state 3

root  go to state 4
set1  go to state 5
set2  go to state 6 
```

假设我们得到 a `'B'`，我们进入状态 2：

```
state 2

set1: 'B' .
set2: 'B' .

'X'       reduce using rule 4 (set1)
'X'       [reduce using rule 5 (set2)]
$default  reduce using rule 4 (set1) 
```

请注意，我们可以进行两种可能的归约：to`set1`或`set2`，两者都具有相同的输入标记。因此减少/减少；我们只有一个前瞻标记，并且使用这种语法，唯一的标记可能是`'X'`- 在任何一种情况下！

### 案例二

```
state 0

$accept: . root $end

'A'  shift, and go to state 1
'B'  shift, and go to state 2
'C'  shift, and go to state 3

root  go to state 4 
```

假设我们得到 a `'B'`，我们进入状态 2：

```
state 2

root: 'B' . 'X'
    | 'B' . 'X' 'X'

'X'  shift, and go to state 6 
```

虽然我们只有一个前瞻标记，但解析器生成器可以生成一种可以看到的状态，`'B' 'X'`因为输入的适应结构。因此我们在任何情况下都会进入状态 6（否则会出错；-)）：

状态 6

```
root: 'B' 'X' .
    | 'B' 'X' . 'X'

'X'  shift, and go to state 9

$default  reduce using rule 2 (root) 
```

这就是魔法发生的地方：如果我们看到一个`'X'`，我们转移并进入状态 9（我们减少），否则我们`'B' 'X'`立即减少。

为了完整起见，这里是状态 9：

```
state 9

root: 'B' 'X' 'X' .

$default  reduce using rule 3 (root) 
```

### 如果我们有一个前瞻的标记来消除歧义

使用此示例语法：

```
root: set1 'X'
    | set2 'Y'

set1: 'A'          
    | 'B'             

set2: 'B'          
    | 'C' 
```

然后，我们开始：

```
state 0

$accept: . root $end

'A'  shift, and go to state 1
'B'  shift, and go to state 2
'C'  shift, and go to state 3

root  go to state 4
set1  go to state 5
set2  go to state 6 
```

我们转移`'B'`并进入状态 2：

```
state 2

set1: 'B' .
set2: 'B' .

'Y'       reduce using rule 5 (set2)
$default  reduce using rule 4 (set1) 
```

`set1`因此，在和的两个规则中都达到了这种状态`set2`，我们在堆栈上只有一个`'B'`标记。在这种情况下，如果我们接下来看到 a `'Y'`，我们将归`set2`约为——或者在任何其他情况下，归约为`set1`。

它被选为“默认”减少的事实`set1`可能会对错误处理产生影响。

### GLR 附录

Happy（and `bison`or `yacc`）默认生成 LALR(1) 解析器，尽管您可以使用`--glr`（或`%glr-parser`在您的`bison`声明文件中）生成 GLR 解析器。这可以通过同时尝试两种“可能性”来解决歧义；解析器将分叉并查看在任何一种情况下它会走多远。

这可能是不明智的，除非你真的需要它，知道你需要它，并且知道如果出现问题会发生什么。我不确定如果两个分叉都成功终止会发生什么；通过我的非科学测试，它似乎总是最终选择更长的解析。

### 词法分析器

如果您不想使用 GLR，但又不想显着重组解析器，则可以考虑使用 lexer hack 来解决此问题。

现在，你有这个：

```
root : set1 'X'     
     | set2 'X' 'X' 
```

您可以改为为单个`'X'`字符发出标记，为两个字符发出不同的标记：

```
root : set1 ONE_X
     | set2 TWO_XS 
```

这解决了单个标记内的歧义，因此是一个明确的 LALR(1) 语法。

# c# - 查看参数构造一次

> ID：10765308
> 
> 赞同：0
> 
> 时间：2012-05-26T10:05:47.970
> 
> 标签：c#, .net-4.0, system.componentmodel

我有以下代码作为`ViewModel`类的构造函数：

```
 [ImportingConstructor]
    public ItemDefViewModel(IItemDefView view)
        :base(view)
    {
        _Item = new ItemModel();
    } 
```

这个视图模型对应一个子窗口。当我运行一次子窗口时，关闭它并尝试再次运行它，我收到一个异常，告诉我我不能在关闭的窗口上`Show`调用。`ShowDialog`这是否意味着只`IItemDefView`创建了 1 个对象？我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:26:38.047

默认情况下，MEF 将容器中的实例注册为单例。要更改此行为，您需要将 ImportAttribute 中的属性 RequiredCreationPolicy 设置为 NonShared。请参阅[ImportAttribute.RequiredCreationPolicy 属性](http://msdn.microsoft.com/en-us/library/system.componentmodel.composition.importattribute.requiredcreationpolicy.aspx)，[部件生命周期](http://mef.codeplex.com/wikipage?title=Parts%20Lifetime)

# asp.net-mvc - 在 Mac 上运行 IIS 的最简单方法？

> ID：10765309
> 
> 赞同：21
> 
> 时间：2012-05-26T10:05:58.950
> 
> 标签：asp.net-mvc, macos, iis-7, mono, virtual-machine

我有一个想在 Mac 机器上运行的 ASP.NET MVC 4 应用程序。当我真正需要的是 IIS7 来运行 MVC 应用程序时，我不想运行一个完整的 Windows 虚拟机。运行它的最简单的方法是什么（VirtualBox、Parallels、IIS7 Express 等）？真的，我的目标是在我的 Mac 上编写应用程序的 Javascript/客户端，我正在努力不在 Windows 机器上进行开发:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-27T08:36:58.040

按照[此链接](http://tirania.org/blog/archive/2012/Mar-28.html)（由@LexLi 在上面的评论中提供）了解如何设置您的 MVC 环境。

关于 IIS，据我所知，它无法完成。您应该使用操作系统的本机 Web 服务器。IIS 不能在 Mac 上运行，所以我想你应该尝试 Apache，然后安装模块“mod_mono”。

或者，如果这太麻烦了，只需使用名为 XSP 的独立单声道 Web 服务器。

或者运行 FastCGI 或 nginx。

这一切都在这里解释：[http ://www.mono-project.com/ASP.NET](http://www.mono-project.com/ASP.NET)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T01:48:45.360

我使用 Parallels，尽管几年前他们的软件很差，但现在它在稳定性和性能方面领先 VMWare 光年。Parallels Desktop 7 for mac 非常棒。

我唯一的计算机是 MBP，但我[为 IIS 开发软件](http://imageresizing.net)。我在 Coherence 模式下运行 Parallels，我基本上将 VisualStudio 作为另一个 mac 应用程序。而且由于我只在虚拟机中运行一个应用程序，它比普通的 PC 安装更稳定。到目前为止，我实际上还没有在 2 个月内重新启动它！

唯一需要注意的是 - 您希望将 2-4GB 的 ram 专用于 VM 以防止分页，因此如果您是一名多语言开发人员，您应该尝试获得超过 8GB 的​​内存。在多个操作系统上拥有多个 IDE 可能会很繁重，当您将内存占用但速度极快的 Chrome 添加到组合中时，您会经常达到内存限制......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-18T16:43:45.967

Xsp 是 Mac 中 IIS 的替代品，可以运行基本功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-07T15:14:06.417

我最近将[VirtualBox](https://www.virtualbox.org/wiki/Downloads)与[Windows Home](https://www.microsoft.com/en-ca/software-download/windows10)的副本一起使用（免费提供“我没有密钥”）并在其上安装了[Visual Studio](https://visualstudio.microsoft.com/downloads/)（社区版）。并且 IIS Express 工作得很好，TFS repos 也工作。

# perl - 如何在 Perl 中读取和写入管道？

> ID：10765311
> 
> 赞同：22
> 
> 时间：2012-05-26T10:06:17.437
> 
> 标签：perl, pipe

我需要修改现有的 Perl 程序。我想通过外部程序通过管道传输一个字符串（可以包含多行）并读取该程序的输出。这个外部程序用于修改字符串。让我们简单地`cat`用作过滤程序。我试过这样，但它不起作用。（输出`cat`到 STDOUT 而不是被读取`perl`。）

```
#!/usr/bin/perl

open(MESSAGE, "| cat |") or die("cat failed\n");
print MESSAGE "Line 1\nLine 2\n";
my $message = "";
while (<MESSAGE>)
{
    $message .= $_;
}
close(MESSAGE);
print "This is the message: $message\n"; 
```

我读过 Perl 不支持这，因为它可能最终陷入死锁，我可以理解。但是我该怎么做呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-26T10:44:35.563

您可以使用[**IPC::Open3**](http://search.cpan.org/perldoc?IPC%3a%3aOpen3)实现与孩子的双向通信。

```
use strict;
use IPC::Open3;

my $pid = open3(\*CHLD_IN, \*CHLD_OUT, \*CHLD_ERR, 'cat')
    or die "open3() failed $!";

my $r;

for(my $i=1;$i<10;$i++) {
    print CHLD_IN "$i\n";
    $r = <CHLD_OUT>;
    print "Got $r from child\n";
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-26T17:27:57.090

这涉及系统编程，因此它不仅仅是一个基本问题。如所写，您的主程序不需要与外部程序进行全双工交互。数据流向一个方向传播，即

字符串→外部程序→主程序

创建此管道很简单。Perl`open`有一个有用的模式[，在 perlipc 文档的“安全管道打开”部分中进行了说明](http://perldoc.perl.org/perlipc.html#Safe-Pipe-Opens)。

> 进程间通信的另一种有趣方法是让您的单个程序成为多进程并在您自己之间甚至彼此之间进行通信。该`open`函数将接受一个文件参数，或者`"-|"`做`"|-"`一件非常有趣的事情：它派生一个连接到您打开的文件句柄的孩子。孩子正在运行与父母相同的程序。例如，这对于在假定的 UID 或 GID 下运行时安全打开文件很有用。如果您打开一个减号管道，您可以写入您打开的文件句柄，您的孩子会在他的`STDIN`. 如果你从减号打开一个管道，你可以从你打开的文件句柄中读取你的孩子写给他的任何内容`STDOUT`。

这是一个`open`涉及管道的管道，它为返回值提供了细微差别。[perlfunc 文档`open`](http://perldoc.perl.org/functions/open.html)解释了。

> 如果你在命令上打开一个管道`-`（即，指定一个`|-`或`-|`两个参数形式`open`），一个隐式`fork`完成，所以 open 返回两次：在父进程中它返回子进程的 pid，并在子进程中返回 (a defined) `0`。使用`defined($pid)`或`//`确定是否`open`成功。

为了创建脚手架，我们按照从右到左的顺序在每个步骤中使用`open`新`fork`流程。

1.  您的主程序已经在运行。
2.  接下来，`fork`一个最终将成为外部程序的进程。
3.  在步骤 2 的过程中
    1.  首先`fork`是字符串打印过程，以使其输出到达我们的`STDIN`.
    2.  然后`exec`外部程序执行其转换。
4.  让字符串打印机完成它的工作，然后`exit`，它会进入下一个级别。
5.  回到主程序，读取转换后的结果。

完成所有这些设置后，您所要做的就是将您的建议植入底部，科布先生。

```
#! /usr/bin/env perl

use 5.10.0;  # for defined-or and given/when
use strict;
use warnings;

my @transform = qw( tr [A-Za-z] [N-ZA-Mn-za-m] );  # rot13
my @inception = (
  "V xabj, Qnq. Lbh jrer qvfnccbvagrq gung V pbhyqa'g or lbh.",
  "V jnf qvfnccbvagrq gung lbh gevrq.",
);

sub snow_fortress { print map "$_\n", @inception }

sub hotel {
  given (open(STDIN, "-|") // die "$0: fork: $!") {  # / StackOverflow hiliter
    snow_fortress when 0;
    exec @transform or die "$0: exec: $!";
  }
}

given (open(my $fh, "-|") // die "$0: fork: $!") {
  hotel when 0;

  print while <$fh>;
  close $fh or warn "$0: close: $!";
} 
```

感谢有机会写出这么有趣的程序！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-11T22:42:39.217

您可以使用 -n 命令行开关有效地将现有程序代码包装在 while 循环中......查看 -n 的手册页：

```
 LINE:
            while (<>) {
                ...             # your program goes here
            } 
```

然后就可以直接使用操作系统的管道机制了

```
cat file | your_perl_prog.pl 
```

（编辑）我会尝试更仔细地解释这一点......

这个问题不清楚 perl 程序扮演什么角色：过滤器或最终阶段。这在任何一种情况下都有效，所以我假设是后者。

'your_perl_prog.pl' 是您现有的代码。我将您的过滤程序称为“过滤器”。

修改 your_perl_prog.pl 以便 shebang 行添加一个 '-n' 开关：#!/usr/bin/perl -n 或 #!/bin/env "perl -n"

这有效地在 your_perl_prog.pl 中的代码周围放置了一个 while(<>){} 循环

添加一个 BEGIN 块来打印标题：

```
BEGIN {print "HEADER LINE\n");} 
```

您可以阅读每一行`'$line = <>;'`并处理/打印

然后调用很多

```
cat sourcefile |filter|your_perl_prog.pl 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-19T19:58:29.170

我想扩展@Greg Bacon 的答案而不改变它。

我必须执行类似的操作，但是想在没有给定/何时命令的情况下进行编码，并且还发现缺少明确的 exit() 调用，因为在示例代码中它失败并退出了。

我还必须让它在运行 ActiveState perl 的版本上也能工作，但那个版本的 perl 不起作用。看到这个问题[How to read to and write from a pipe in perl with ActiveState Perl?](https://stackoverflow.com/questions/33836969/how-to-read-to-and-write-from-a-pipe-in-perl-with-activestate-perl/33907800#33907800)

```
#! /usr/bin/env perl

use strict;
use warnings;

my $isActiveStatePerl = defined(&Win32::BuildNumber);

sub pipeFromFork
{
    return open($_[0], "-|") if (!$isActiveStatePerl);
    die "active state perl cannot cope with dup file handles after fork";

    pipe $_[0], my $child or die "cannot create pipe";
    my $pid = fork();
    die "fork failed: $!" unless defined $pid;
    if ($pid) {         # parent
        close $child; 
    } else {            # child 
        open(STDOUT, ">&=", $child) or die "cannot clone child to STDOUT";
        close $_[0];
    }
    return $pid;
}

my @transform = qw( tr [A-Za-z] [N-ZA-Mn-za-m] );  # rot13
my @inception = (
  "V xabj, Qnq. Lbh jrer qvfnccbvagrq gung V pbhyqa'g or lbh.",
  "V jnf qvfnccbvagrq gung lbh gevrq.",
);

sub snow_fortress { print map "$_\n", @inception }

sub hotel 
{
    my $fh;
    my $pid = pipeFromFork($fh);     # my $pid = open STDIN, "-|";
    defined($pid)  or die "$0: fork: $!";
    if (0 == $pid) {
        snow_fortress;
        exit(0);
    }
    open(STDIN, "<&", $fh)  or  die "cannot clone to STDIN";
    exec @transform or die "$0: exec: $!";
}

my $fh;
my $pid = pipeFromFork($fh);            # my $pid = open my $fh, "-|";
defined($pid) or die "$0: fork: $!";
if (0 == $pid) {
    hotel;
    exit(0);
}

print while <$fh>;
close $fh or warn "$0: close: $!"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-30T22:32:27.357

最简单的——不涉及所有这些很酷的内部——做OP需要的方法是使用一个临时文件来保存输出，直到外部处理器完成，如下所示：

```
open ToTemp, "|/usr/bin/tac>/tmp/MyTmp$$.whee" or die "open the tool: $!";
print ToTemp $TheMessageWhateverItIs;
close ToTemp;
my $Result = `cat /tmp/MyTmp$$.whee`;  # or open and read it, or use File::Slurp, etc
unlink "/tmp/MyTmp$$.whee"; 
```

当然，这不适用于交互的东西，但协同例程似乎超出了原始问题的范围。

# c# - MIME 类型文件的 ASP.NET 基本身份验证（无 .aspx 文件）

> ID：10765313
> 
> 赞同：2
> 
> 时间：2012-05-26T10:06:33.830
> 
> 标签：c#, asp.net, handler, mime-types, basic-authentication

我必须对用户进行身份验证（**基本身份验证**）才能针对数据源访问**None .aspx**文件。我找到了文章并为**.aspx**文件做了它，但是一旦我尝试将它用于我的文件**通过将文件扩展名添加到 IIS 作为 MIME 或压缩类型文件，身份验证窗口会一直显示并且不会停止。

我应该怎么办？

```
P.S.1\. I cannot change the authentication method with form auth or something else.
P.S.2\. I cannot change my file type with ".aspx"
P.S.3\. URL Re-Writing didn't solve the problem
P.S.4\. I added handler to web.config to show the IIS that the new file extention is a script
    <handlers>
        <add name="NEW FORMAT" path="*.NXX" verb="GET,HEAD,POST,DEBUG" modules="IsapiModule"
        scriptProcessor="C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" 
        resourceType="Either" requireAccess="Script" preCondition="classicMode,runtimeVersionv4.0,bitness64" />
    </handlers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:41:50.073

您可以使用 location 指令来限制对实际文件的访问：http: [//msdn.microsoft.com/en-us/library/b6x6shw7 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/b6x6shw7(v=vs.100).aspx)

如果您真的需要它，请添加 mime 类型：

[http://www.iis.net/ConfigReference/system.webServer/staticContent/mimeMap](http://www.iis.net/ConfigReference/system.webServer/staticContent/mimeMap)

！您还可以创建一个 ashx 文件来帮助您传输所需的所有文件，这会增加一些开销，但可以提供更多的安全性。

希望能帮助到你。

# php - 在 1000 字文档中搜索 15,000 个短语

> ID：10765316
> 
> 赞同：0
> 
> 时间：2012-05-26T10:06:43.867
> 
> 标签：php, mysql, full-text-search, sphinx

我有一个包含约 15,000 个多词短语的数据库，长度范围为 2-7 个单词。我希望能够搜索一个小文档（约 1000 个单词）以查看其中包含哪些短语。我基本上是在寻找实现这一目标的最佳方法。

我目前在 MySQL 中有两个表中的数据：

**短语** *（约 15,000 行）*
phrase_id
短语
长度 *（短语中的单词数）*
**文档** *（100 秒/天）*
document_id
文本

短语列表保持不变，新文档一直在添加。

据我所知，最好的方法是使用某种索引。理想情况下，当文档被添加时，它会被索引以查看它包含哪些短语，以便稍后进行搜索时，结果会立即返回。

我已经考虑过如何在 MySQL 中做到这一点

1.  将文档标记为 2 个单词短语，查找以标记开头的短语
2.  遍历增加令牌长度的结果 - if (phrase length == token length) {match} else {keep for next token length}。
3.  将结果存储在新表中**document_phrasesphrase_id** , document_id

不过，这一切似乎都有很多开销，我想知道像 Sphinx 这样的外部工具是否能够更有效地做到这一点？我已经调查过了，但它似乎主要是为了搜索大量文档以获取 1 个短语，而不是在 1 个文档中搜索许多短语。

是否有一些我完全错过的技术？请注意，虽然技术上很有趣，但使用 java/python 的解决方案超出了我计划为这个项目学习的范围

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T14:00:56.593

您是否查看过[全文搜索](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)。给出的例子，以及找到相关性的能力可能会给你一些想法或替代方案。

# assembly - 组装的 ASM 代码能否产生不止一种可能的方式（偏移值除外）？

> ID：10765317
> 
> 赞同：2
> 
> 时间：2012-05-26T10:07:11.260
> 
> 标签：assembly, disassembly

我不太了解 x86 ASM，但我对 SHARP-z80 相当满意，而且我根据经验知道每条指令（助记符）都有相应的字节/字值，并通过查看组装好的十六进制转储二进制文件，我可以“读回”我使用助记符编写的相同代码。

在另一个 [SO question](https://stackoverflow.com/a/10765148/1376657)中，有人声称*在某些情况下 ASM 指令没有被翻译成相应的二进制值，而是由汇编程序以不同的方式重新排列*。

我正在寻找特别是反汇编二进制文件会导致 ASM 代码与原始代码不同的情况。

换句话说，**是否存在汇编代码与汇编代码不是 1:1 比例的情况？**

[MikeKwan](https://stackoverflow.com/questions/10765317/can-assembled-asm-code-result-in-more-than-a-single-possible-way-except-for-off#comment13994845_10765317)链接到另一个问题，其中 GCC 将修改内联 ASM 代码（在 C 项目中），但是，即使这是一个有趣的话题，它也没有回答这个问题，因为 GCC 是一个编译器，并且总是试图优化代码和内联 ASM 翻译受周围 C 代码的影响。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T13:19:13.243

在汇编器设计者认为它有帮助的范围内，它可以替代具有其他有用属性的等效指令。

首先，存在具有可变长度值操作数字段的机器。如果一个值/偏移量适合几个变体中的任何一个，汇编器通常会替换最短的那个。（在这样的汇编程序中，能够强制特定大小也很常见）。这适用于涉及立即操作数和索引寻址的指令。

许多机器都有带有 PC 相对偏移量的指令，通常用于 JMP，有时用于加载/存储/算术指令。汇编器在第一遍遇到这样的指令时可以确定寻址操作数在指令之前，或者它还没有看到指令。如果在前面，汇编器可以选择短相对形式或长相对形式，因为它知道偏移量。如果跟随，汇编器不知道大小，并且通常为它在 pass2 期间填充的指令选择一个大的偏移量。类似地，也有强迫汇编程序选择短格式的方法。

有些机器没有跳远相关指令。在这种情况下，如果目标在 jmp 之前并且在附近，则汇编器将相对向后插入一个短 jmp。如果目标在前面但距离很远，或者目标是前向引用，汇编器可能会在目标超过下一条指令的相反分支条件上插入一个短相对 jmp，然后是一个长绝对 jmp。（我亲自构建了这样的汇编程序）。这可确保 jmps 始终可以到达其目标。

关于这些技巧的好消息是，如果你反汇编，你仍然会得到一个有效的汇编程序。

现在让我们来看看那些会让你的反汇编程序感到困惑的东西。

如果机器具有用于加载/存储指令的短相对寻址并且程序员显然指定加载一个很远的常量或值，则可以使用类似的技巧来跳转文字操作数。在这种情况下，汇编器将指令更改为在围绕该常量插入一个短的相对 jmp 之后引用文字或地址常量。反汇编器认为指令流中的所有内容都是指令；在这种情况下，文字值不是，这会使反汇编程序关闭。至少在文字周围有一个无条件的 jmp 来指导反汇编程序。

您可能会在成熟的汇编程序中找到更诡异的技巧，在这些汇编程序中，曾经想象过的每一个特技都得到了支持。在 8 位汇编器上，我最喜欢的一个是“伪”指令 SKIP1、SKIP2，您可以将其视为极短的相对分支。它们实际上只是“CMP #8bits”和“CMP #16bits”指令的操作码字节，分别用于跳转 8 位或 16 位指令。所以，一个“一个字节”的相对跳转而不是两个。当您挤占空间时，每个字节都很重要：-{

```
 SKIP1
      INC    ; 8 bit instruction
      ... 
```

这在尝试实现一个循环时也很方便，其中某些步骤不应该在循环进入时执行，但需要在进一步的循环迭代中完成：

```
 SKIP2
LOOP: SHLD  ; 16 bit instruction
      ...
      BNE LOOP 
```

这里的问题是，如果您反汇编 SKIP1 或 SKIP2 指令，您将看不到 INC（或相应的 16 位指令）。

汇编语言程序员用来传递参数的一个技巧是在调用之后将它们内联放置，条件是被调用的例程适当地调整返回地址：

```
 CALL   foo
      DC     param1
      DC     param2 
```

或 CALL printstring DC "a variable length string",0

反汇编程序没有实际的方法可以知道正在使用这样的约定或该约定是什么，因此反汇编程序必须处理这个错误。

# c - 使用带有 -fPIC 的 dlopen 和 dlsym 编译 C 程序

> ID：10765320
> 
> 赞同：6
> 
> 时间：2012-05-26T10:07:16.017
> 
> 标签：c, linux, gcc, elf, dlopen

我遇到了关于错误符号解析的问题。我的主程序使用 dlopen 加载一个共享库，并使用 dlsym 从其中加载一个符号。程序和库都是用 C 编写的。库代码

```
int a(int b)
{
  return b+1;
}

int c(int d)
{
  return a(d)+1;
} 
```

为了使其在 64 位机器上工作，编译时将 -fPIC 传递给 gcc。

该程序是：

```
#include <dlfcn.h>
#include <stdio.h>

int (*a)(int b);
int (*c)(int d);

int main()
{
  void* lib=dlopen("./libtest.so",RTLD_LAZY);
  a=dlsym(lib,"a");
  c=dlsym(lib,"c");
  int d = c(6);
  int b = a(5);
  printf("b is %d d is %d\n",b,d);
  return 0;
} 
```

如果程序没有使用 -fPIC 编译，一切都运行良好，但是当程序使用 -fPIC 编译时，它会因分段错误而崩溃。调查导致发现崩溃是由于符号 a 的错误解析造成的。无论是从库还是主程序（后者是通过注释掉主程序中调用 c() 的行获得），都会在调用 a 时发生崩溃。

调用 c() 本身没有问题，可能是因为 c() 不是库本身内部调用的，而 a() 既是库内部使用的函数，又是库的 API 函数。

一个简单的解决方法是在编译程序时不使用 -fPIC。但这并不总是可行的，例如当主程序的代码必须在共享库中时。另一种解决方法是将指向函数 a 的指针重命名为其他内容。但我找不到任何真正的解决方案。

用 RTLD_NOW 替换 RTLD_LAZY 没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:18:25.930

I *suspect* that there is a clash between two global symbols. One solution is to declare `a` in the main program as static. Alternatively, the linux manpage mentions `RTLD_DEEPBIND` flag, a linux-only extension, which you can pass to `dlopen` and which will cause library to prefer its own symbols over global symbols.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T13:13:56.330

It seems this issue can take place in one more case (like for me). I have a program and a couple of a dynamically linked libs. And when I tried to add one more I used a function from a *static* lib (my too) in it. And I forgot to add to linkage list this static lib. Linker was not warn me about this, but program was crushing with segmentation fault error.

Maybe this will help for someone.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-22T09:04:17.927

FWIW, I ran into a similar problem when compiling as C++ and forgetting about name mangling. A solution there is to use `extern "C"`.

# git - 合并后是否应该删除分支？

> ID：10765321
> 
> 赞同：125
> 
> 时间：2012-05-26T10:07:25.380
> 
> 标签：git, branching-and-merging

合并分支后，是否将其从存储库中删除？
但是，这是一个好习惯吗？

我通常会创建很多分支，因为我不想破坏我当前的版本，我希望删除它们以保持秩序。
但是，如果您使用 Assembla 或 GitHub，来自旧分支的合并请求将保存在站点上，因此如果您删除它们，您将收到错误，因为它无法获取它们......

通常如何管理？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-05-26T10:14:39.833

删除已合并的分支没有问题。所有的提交在历史记录中仍然可用，即使在 GitHub 界面中，它们仍然会显示（参见，例如，[这个 PR](https://github.com/DanielStutzbach/blist/pull/40)指的是我已经PR 被接受后删除）。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-26T13:49:58.890

I definitely clean up my branches after they've been merged in.

We use GitLab and merge requests at work, so the historical information about branches is stored there; I don't need them cluttering my branch list, and when I look at a coworker's fork, ideally I'd like only to see the branches of their current active development. If I'm trying to look at some code on their branch, I want to be able to look through just a few currently active branches, and not every feature or fix they've ever started work on.

The above applies to BitBucket and GitHub, too.

The only reason you might have for not deleting a branch post-merge is so you know where a given feature ended, but merge commits (and `git merge --no-ff` if you really want) make that irrelevant.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-10-23T04:32:49.753

只需注意
您的 DELETED 分支的所有超链接 URL 引用，将被**BROKEN**。

例如
如果你`branch_feature_x`从你的 repo 中删除分支
，这个分支对应的超链接 URL 将会被破坏
[https://github.com/username/project/tree/branch_feature_x](https://github.com/username/project/tree/branch_feature_x)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-29T13:46:48.990

只是为了澄清，从 git 的角度来看，分支只是**链接**到某个提交。通过删除分支，您不会从 git repo 中删除提交。当然，**分离**的提交将在一段时间后通过 git 垃圾收集器进行清理。

仅供参考：我们通常通过 bitbucket 接口将分支合并到 master 中。在那里你可以设置`delete feature branch after merge`标志。

如果你需要处理太旧的分支，你可以看看一些实用程序，例如[这个](https://www.npmjs.com/package/git-branches-cleaner)。

# java - J2SE 应用程序的事务管理

> ID：10765329
> 
> 赞同：2
> 
> 时间：2012-05-26T10:08:37.543
> 
> 标签：java, jdbc

推荐用于传统 JDBC 连接事务的事务管理技术是什么？

自动提交和提交管理的典型禁用是程序员处理和回滚跨越多个 DAO 的错误的麻烦。

任何人都可以推荐更好的交易管理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:14:28.903

如果您直接使用 JDBC，那么您将需要忍受 JDBC 事务管理功能的麻烦，即`setAutoCommit(false)`自己提交/回滚。

另一方面，如果您使用更高级别的东西，您可以使用更高级别的事务管理 API。例如，Hibernate、JDO 和 JPA 都提供了更高级别的事务管理机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T10:13:46.697

我会选择spring jdbc/spring DAO。它为您提供了很好的 JDBC 包装器

# android - 区别：SAX Parser,XPath,DOM,XMLPullParser

> ID：10765339
> 
> 赞同：7
> 
> 时间：2012-05-26T10:10:27.483
> 
> 标签：android, xml, parsing

我想知道上述四种类型（SAXPaser、XPath、DOM、XMLPullParse）之间的区别以及我们应该在什么时候使用它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T10:49:25.877

SAX Parsing 是比 DOM 实现的最好的一种，请参阅以下两者之间的区别：

DOM

节点采用树结构内存的形式：它占用更多内存，仅在小型 XML 文档的情况下首选 DOM 运行时速度较慢 存储为对象 以编程方式易于实现 易于导航和使用。

萨克斯

事件序列 它不使用大型文档首选的任何内存。由于上述几点，运行时更快。对象将被创建。需要编写用于创建对象的代码在 SAX 中向后导航是不可能的，因为它顺序处理文档

因此，如果您有非常大的文件，那么您应该使用 SAX 解析器，因为它会触发事件并释放它们，没有任何内容存储在内存中，并且使用 SAX 解析器您不能以随机方式访问元素，没有回头路！，但 Dom 允许您访问 xml 文件的任何部分，因为它将整个文件/文档保存在内存中。

看到这篇[文章，你可以通过阅读](http://www.ibm.com/developerworks/opensource/library/x-android/index.html)**摘要**得到你想要的。

还检查此[链接](http://www.developer.com/ws/android/development-tools/Android-XML-Parser-Performance-3824221-2.htm)以查看不同 xml 解析器的性能

![在此处输入图像描述](../Images/69fa9600dcb80458cc1a8e6176a05728.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T10:16:55.097

请检查以下链接...

[http://steveliles.github.com/comparing_methods_of_xml_parsing_in_android.html](http://steveliles.github.com/comparing_methods_of_xml_parsing_in_android.html)

[http://xjaphx.wordpress.com/2011/11/01/android-xml-adventure-compare-xml-parsers/](http://xjaphx.wordpress.com/2011/11/01/android-xml-adventure-compare-xml-parsers/)

[http://www.ibm.com/developerworks/opensource/library/x-android/index.html](http://www.ibm.com/developerworks/opensource/library/x-android/index.html)

[http://www.developer.com/ws/android/development-tools/Android-XML-Parser-Performance-3824221-2.htm](http://www.developer.com/ws/android/development-tools/Android-XML-Parser-Performance-3824221-2.htm)

[http://www.geekinterview.com/question_details/12797](http://www.geekinterview.com/question_details/12797)

（根据上述文章）

SAX 和 DOM 都用于解析 XML 文档。两者各有优缺点，可以根据情况用在我们的编程中

萨克斯：

1.  逐个节点解析
2.  不将 XML 存储在内存中
3.  我们无法插入或删除节点
4.  从上到下遍历

DOM

1.  在处理之前将整个 XML 文档存储到内存中
2.  占用更多内存
3.  我们可以插入或删除节点
4.  向任何方向移动。

如果我们需要找到一个节点并且不需要插入或删除，我们可以使用 SAX 本身，否则 DOM 提供我们有更多的内存。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-21T13:41:44.150

DOM

节点采用树结构内存的形式：它占用更多内存，仅在小型 XML 文档的情况下优先使用 DOM。将整个 XML 文档存储到内存中，以便在运行时处理速度较慢存储为对象以编程方式易于实现导航和使用，可以在任何方向遍历。我们可以插入或删除，改变节点。

SAX ：当您想要访问 XML 时使用（而不是更改 XML）

事件序列它不使用大型文档首选的任何内存。由于上述几点，在运行时处理更快之前不将 XML 存储在内存中。对象将被创建。需要编写创建对象的代码在SAX中向后导航是不可能的，因为它顺序处理文档，从上到下遍历我们不能插入或删除节点

XPATH：当您只需要 XML 文档中的几个值并且您知道在哪里可以找到它们时，Xpath 很有用（您知道数据的路径。/root/item/challange/text）

XMLPullParser：速度快，使用 DOM 需要更少的内存

来源： [http ://www.time2ask.com/](http://www.time2ask.com/) [http://www.time2ask.com/Android/The-difference-among-SAX-ParserXPathDOMXMLPullParser/_2361836](http://www.time2ask.com/Android/The-difference-among-SAX-ParserXPathDOMXMLPullParser/_2361836)

# assembly - MIPS，汇编 - 几个问题

> ID：10765346
> 
> 赞同：1
> 
> 时间：2012-05-26T10:11:22.567
> 
> 标签：assembly, mips

我正在尝试研究一个我必须了解 MIPS 和汇编代码的测试。对于给定的问题，我会尝试写出我认为正确的答案，但我不确定我是否正确

1.  MIPS中的直接操作数32位操作数可以包含任何32位值吗？

    我认为“不 - 从不”，因为前 16 位是为操作码和源 + 最终寄存器保留的。是正确的还是有一些指令可以包含任何 32 位值？

2.  我们有时间指导（IF = 400ps，ID = 500ps，EX = 450ps，MEM = 500ps，WB = 150ps）

    什么是时钟机智

    a) 没有管道的处理器？
    b) 带有管道的处理器？

    我认为a）是2000ps（所有时间的总和）和b）500ps（表中最大的时间）但同样，我不确定。

3.  我有以下汇编代码：

    ```
    0x0000      addi t0, $0, 5
    0x0004  loop:   beq t0, $0, done
    0x0008      nop
    0x000C      lw t1, 0x4($0)
    0x0010      lw t2, 0x24($0)
    0x0014      addi t0, t0, -1
    0x0018      j loop
    0x001C      nop
    0x0020  done 
    ```

    我不是 100% 确定它做了什么（因为我不完全理解`0x4($0)`负载操作的结果是什么）。我知道有一个 for 循环（`for t=5, ,t >0 t--`）。

    问题是 -**这个缓存的命中率和未命中率是多少，你如何计算它**？

如果你至少能回答前两个问题，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:47:53.060

1.  如果您在谈论 MIPS 32 位，那么当然，I 类指令不可能包含 32 位立即数。这种指令的布局是（操作码、rs、rt、IMM），它们的大小为（6、5、5、16）位。所以立即数只有 16 位大小。当然，如果架构是 64 位，那么您可以有更长的立即数。

2.  我假设您指的是指令执行的延迟。正如您指出的那样，如果没有管道，您需要为所有阶段添加时间。如果处理器使用流水线，则必须设置时钟以匹配最慢的阶段。在您的情况下，解码和内存阶段都是 500ps。

3.  `lw t1, 0x4($0)`从内存地址 0x4 加载一个字（$0 指的是寄存器 0，它总是包含零）并将值存储到`t1`. 所以如果你仔细看代码，你会发现它总是从位置 0x4 和 0x24 加载数据。假设一开始缓存是空的，那么您将在第一次迭代中出现两次未命中，而在接下来的迭代中没有其他未命中。因此，未命中率将是 (1*2) / (5*2) = 2/10 = 1/5。但是，您必须考虑缓存是否以块的形式传输数据。在这种情况下，第一次加载可能会传输一个包含例如 64 个字节的大块。这将使第二次加载操作不会丢失，因此丢失率将降低到 1/10。但我认为这个简单的处理器并非如此。

仅供参考，[这里](http://en.wikibooks.org/wiki/MIPS_Assembly)有很多关于 MIPS 架构和 ISA 的信息。您可能还对一本关于计算机体系结构的经典书籍感兴趣：[计算机体系结构：一种定量方法](https://rads.stackoverflow.com/amzn/click/com/0123704901)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-28T13:16:05.413

> MIPS中的直接操作数32位操作数可以包含任何32位值吗？

显然不是，因为在 MIPS 中，指令宽度固定为 32 位。如果立即数是 32 位长，则操作码和其他操作数将没有更多空间

请注意，betabandido 关于 MIPS64 的说法是不正确的。在 MIPS64 中，指令长度仍然是 32 位，所以你仍然不能加载任何大于 16 位的立即数。事实上，我所知道的任何架构都没有固定 64 位指令。这太浪费了，而且更有可能错过指令缓存。要加载 32 位常量，您需要 2 条指令（lui + ori/addui）。对于 64 位常量，您需要 6 条指令（4 次立即加载加上 2 次移位）。[这是一个关于编译器如何构造大常量的示例](https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(j:1,lang:c%2B%2B,source:'long+long+ll(long+long+x)%0A%7B%0A++++return+x+%7C+0x1234567890ABCDEF%3B%0A%7D%0A%0Aint+i(int+x)%0A%7B%0A++++return+x+%7C+0x12345678%3B%0A%7D%0A'),l:'5',n:'0',o:'C%2B%2B+source+%231',t:'0')),k:23.88968590598753,l:'4',n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:mips564,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O3',source:1),l:'5',n:'0',o:'MIPS64+gcc+5.4+(Editor+%231,+Compiler+%231)+C%2B%2B',t:'0')),header:(),k:36.645706786006,l:'4',m:100,n:'0',o:'',s:0,t:'0'),(g:!((h:compiler,i:(compiler:mips5,filters:(b:'0',binary:'1',commentOnly:'0',demangle:'0',directives:'0',execute:'1',intel:'0',libraryCode:'1',trim:'1'),lang:c%2B%2B,libs:!(),options:'-O3',source:1),l:'5',n:'0',o:'MIPS+gcc+5.4+(Editor+%231,+Compiler+%232)+C%2B%2B',t:'0')),header:(),k:39.46460730800647,l:'4',n:'0',o:'',s:0,t:'0')),l:'2',n:'0',o:'',t:'0')),version:4)

这是一个很长的系列，只是为了加载一个简单的值，所以你有另一个选择是使用一个常量池（比如在 ARM 上）。例如指向池的指针存储在 $5 中，索引为 4，可以使用以下指令加载值

```
lw t1, 0x4($5) 
```

Older ARM microarchitectures can only load 8-bit immediates with a 4-bit shift, so it almost relies on constant pool for bigger constants

See

*   [Loading an address in MIPS64](https://stackoverflow.com/q/3914210/995714)
*   [Load 32-bit constant to register in MIPS](https://stackoverflow.com/q/13160930/995714)

# java - 覆盖equals方法不起作用

> ID：10765350
> 
> 赞同：5
> 
> 时间：2012-05-26T10:11:59.917
> 
> 标签：java, overriding

我在这里和其他网站上浏览了很多类似的问题。我似乎仍然无法解决这个问题。

我有一堂课：

```
public class Event {
    public String Item;
    public String Title;
    public String Desc;

    @Override
    public boolean equals(Object o) {
            return true;
    }
} 
```

我正在尝试使用此类，`ArrayList<Event> events`但找不到`events.contains("item")`上班的方法。我试过调试，我发现它甚至没有进入被覆盖的方法。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T10:19:47.367

那是因为你打破[了合同](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29)中规定的对称性`equals()`：如果任何事件等于`"item"`（**它是一个字符串**），`"item"`也应该等于任何事件。

实际上，Java 所做的就是调用`indexOf("item")`你的列表，并检查它是否是肯定的。

现在，例如，`indexOf()`像这样工作`ArrayList`（请参阅[此处的完整源代码](http://www.docjar.com/html/api/java/util/ArrayList.java.html)）：

```
 for (int i = 0; i < size; i++)
        if ("item".equals(elementData[i]))
            return i; 
```

所以基本上这里调用的是[String 的 equals()](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#equals%28java.lang.Object%29)方法，而不是你的返回 false 的方法。

只需为函数指定一个`Event`参数即可解决此问题，例如：

```
events.contains( new Event("item", "title", "desc") ) 
```

请注意，您必须为您的类创建一个适当的构造函数来初始化成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:15:45.843

您还应该覆盖`public int hashCode()`. 这两种方法密切相关。

阅读更多相关信息：[http ://www.javapractices.com/topic/TopicAction.do?Id=17](http://www.javapractices.com/topic/TopicAction.do?Id=17)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:16:08.120

当您覆盖`equals()`方法时，您还必须覆盖该`hashcode()`方法，因为它们是齐头并进的。如果两个对象相等，那么它们必须具有相同的哈希码。Hashmaps 使用它来评估保存位置。如果两个对象不相等，它们可能具有也可能不具有相同的哈希码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-02T20:46:58.667

在这种情况下，您只需要覆盖 equals 方法，而不是 hashCode 方法。

当你想使用你的类的对象作为 HashMap 中的键时，hashCode 和 equals 方法都应该被覆盖。HashMap 使用数组+linkedList 的结构。添加键值对时，首先根据key的hashCode进行计算，得到数组中的索引；然后遍历该索引位置的linkedList，以查找键值对是否已经存在。如果是，它将用新值覆盖记录；否则将键值对添加到该链接列表的末尾。定位密钥时，过程类似。所以如果 hashCode 方法没有被覆盖，你会在数组中的第一轮搜索失败。这就是您需要覆盖这两种方法的原因。不像某处说这两种方法之间有契约或者它们有密切的关系。

# javascript - 多级导航

> ID：10765351
> 
> 赞同：1
> 
> 时间：2012-05-26T10:12:09.867
> 
> 标签：javascript, html, css

请看下面的图片。

现在我正在用很多无序列表做这个——实际上是 5 个。我想在一个嵌套的 ul 中做到这一点。

我有两个问题：

1.  如果子菜单嵌套在水平菜单中，如何在水平菜单上创建边框底部？

2.  子菜单由 4 个不同的 ul 组成。我可以使用单个 ul 完成 4 列吗？某些菜单项可能会填满一行。

给解决这两个问题的人喝一品脱啤酒：）

[http://dl.dropbox.com/u/333152/menu.png](http://dl.dropbox.com/u/333152/menu.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:40:48.033

我不知道我是否明白了，因为你没有发布任何代码，但试试这个：http: [//jsfiddle.net/Djpsf/1/](http://jsfiddle.net/Djpsf/1/)

1.  请注意，您必须知道子菜单的高度才能设置正确的底部边距`#main`。
2.  这是可能的，但过于复杂，您必须重新排序子菜单中的项目并添加一些空项目。

# jquery - jquery设置动态背景和悬停无法解决某些问题

> ID：10765355
> 
> 赞同：0
> 
> 时间：2012-05-26T10:12:38.260
> 
> 标签：jquery, facebook

我有一个很大的精灵图像，我只是将此图像设置为我的 30 个李背景的背景。设置背景后，悬停时，我只想将 y 位置减去 70px，所以它会到达上方。

因为，我正在从 yi 中检索当前的 x、y 和存储，只是减少 70px 以实现我的悬停位置，但我没有得到正确的结果。它有效，但它非常有问题，任何人都可以更正我的代码以更好地工作吗？

我的代码：

```
$('.logo-gal li').each(function(index){ // dynamically i am setting the bg, works.
        index % 5 == 0 ? y+=1 : y;
        $(this).css({
            background:'url(images/css/gall-logo.png) no-repeat',
            backgroundPosition: -((index%5) * 106)+'px '+ -(y*140) +'px'
        })

    })

    $('.logo-gal li').hover(function(){
        var backPos = $(this).css('backgroundPosition').split(" ");
        var xPos = parseInt(backPos[0]),yPos = parseInt(backPos[1]);//storing x y pos.
        console.log(xPos);
        $(this).css({backgroundPosition: xPos+ (yPos-70)+"px"});// applying too.. not work, and i need to setback the stored dada, while mouseout..
    }) 
```

有什么好的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:34:41.283

你有字符串连接的问题

```
$('.logo-gal li').each(function(index){ // dynamically i am setting the bg, works.
        index % 5 == 0 ? y+=1 : y;
        $(this).css({
            background:'url(images/css/gall-logo.png) no-repeat',
            backgroundPosition: '-'+eval((index%5) * 106)+'px  -'+eval(y*140) +'px'
        })

    })

    $('.logo-gal li').hover(function(){
        var backPos = $(this).css('backgroundPosition').split(" ");
        var xPos = parseInt(backPos[0]),yPos = parseInt(backPos[1]);//storing x y pos.
        console.log(xPos);
        $(this).css({backgroundPosition: eval(xPos+ yPos)+"px"});// applying too.. not work, and i need to setback the stored dada, while mouseout..
    }) 
```

# javascript - Onclick 或 href 最适合在按钮中打开链接

> ID：10765363
> 
> 赞同：2
> 
> 时间：2012-05-26T10:13:31.633
> 
> 标签：javascript, html, css

哪个是最好的方法。使用按钮打开链接

```
<button type="button" onclick="location='permalink.php'">Permalink</button>

<button type="button" href="index.php">Permalink</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:19:33.953

如果您使用 jquery，您可以像这样编写第二个按钮

```
<button type="button" id="SecondButton" data-href="index.php">Permalink</button> 
```

然后添加一些javascript：

```
<script type="text/javascript">
    $('#SecondButton').click(function(e) {
        e.preventDefault(); e.stopPropagation();
        window.location.href = $(e.currentTarget).data().href;
    });
</script> 
```

编辑（进一步完成的场景）

```
<button type="button" id="SecondButton" data-href="index.php" onclick="location='permalink.php'" href="index.php">Permalink</button> 
```

我也会在其中插入额外的href标签和onclick；然后你可以测试不同的场景；不支持 javascript 或 jquery 的设备无法在移动设备等 CDN 上加载：

```
<button type="button" id="SecondButton" data-href="index.php?trackAnalytics=1" onclick="location='permalink.php?trackAnalytics=2'" href="index.php?trackAnalytics=3">Permalink</button> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-17T21:01:19.293

如果您使用的是引导程序，则可以执行此操作...

```
<a class="btn btn-default" href="permalink.php">Permalink</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T10:15:51.803

第一个应该可以工作，但不推荐使用内联脚本。您应该阅读有关如何使用[`addEventListener`](https://developer.mozilla.org/en/DOM/element.addEventListener)符合标准的浏览器和[`attachEvent`](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)旧 IE 附加事件的信息。

第二个不起作用，因为[按钮不使用`href`属性](http://reference.sitepoint.com/html/button)。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-26T10:20:42.423

或者，如果按钮“样式”是您所追求的，而不是专门的`<button>`标签，您可以这样做：

```
<form method="link" action="permalink.php">
    <input type="submit" value="Permalink">
</form> 
```

另一个想法是您可以将锚定样式设置为看起来像一个按钮，然后您可以使用 href 属性。

# iphone - 如何开发具有登录功能的基于 TabBar 的应用程序？

> ID：10765364
> 
> 赞同：2
> 
> 时间：2012-05-26T10:13:34.563
> 
> 标签：iphone, ios, login, tabbarcontroller

我正在开发一个应用程序，我需要向用户显示一个列表作为菜单（课程、课程、成绩、注销）。所以即使在此之前，我也需要显示一个登录屏幕。只有在成功且有效的登录后，我才需要将用户重定向到菜单。所以我计划开发一个带有 4 个选项卡的基于 tabBar 的应用程序。在这里，即使在加载 TabBar 控制器之前，我也对如何添加登录视图控制器感到困惑。我希望每次都选择第一个选项卡。到目前为止，我正在将我的**TabBar 控制器**作为 rootviewcontroller 添加到我的**AppDelegate 窗口**，然后将登录视图控制器呈现为模态视图控制器。但是这里的问题甚至在**登录视图控制器之前**已加载，我的课程视图控制器已加载，因为首先加载了 tabbarcontroller。我的实际要求是我需要根据登录视图控制器中给出的输入来加载带有课程列表的课程视图控制器。但是当然视图控制器的加载视图甚至在登录视图控制器的加载视图之前就被加载了。所以无论谁登录，我的课程列表总是相同的。我在这里对如何前进感到困惑......这里的任何建议都会有很大帮助......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:32:43.653

所以，一个非常简单的例子，可能是；在你的`loginViewController`你应该有一些类似这样的方法：

```
//Call this after the user has done with the login
-(IBAction)remove:(id)sender{
    AppDelegate *del=(AppDelegate*)[[UIApplication sharedApplication] delegate];
    //Set some data based on the user's input (eg some property shared in the AppDelegate)
    //del.dataEnterByTheUser=someData;
    [del removeLoginView];
} 
```

然后在你的（`AppDelegate`假设**现在**是）你可以这样做（你可以优化转换）：`rootViewController``loginViewController`

```
-(void)removeLoginView{

    UITabBarController *tabVC=[[UITabBarController alloc] init];
    ViewController *v1=[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    //v1.data=self.dataEnterByTheUser;
    ViewController *v2=[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
    NSArray *arrayVC=[NSArray arrayWithObjects:v1,v2, nil];
    [tabVC setViewControllers:arrayVC];
    [tabVC setSelectedViewController:0];
    CGRect rectVC=self.loginViewController.view.frame;
    rectVC.origin.y=self.view.frame.size.height;
    [UIView animateWithDuration:0.3f delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
        self.loginViewController.view.frame=rectVC;
    } completion:^(BOOL finished){
        [self.loginViewController.view removeFromSuperview];
        self.loginViewController=nil;
        self.window.rootViewController=tabVC;
    }];    
} 
```

还要记得在每个viewControllers 中设置tabItem 上`initWithNibName:`的`self.title`标题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T11:56:24.750

无需摆弄rootViewController ...

`viewWillAppear:`只需在通常首先出现的视图控制器方法的开头添加以下代码（很可能是您在第一个选项卡中呈现的 VC）：

```
[self.tabBarController presentModalViewController:loginController animated:NO]; 
```

loginController 显然是管理登录屏幕的视图控制器。如果您在没有动画的情况下显示它，它将是您的应用启动时（默认图像消失后）首先看到的内容。我使用相同的方法来显示免责声明页面，用户在使用该应用程序之前必须阅读该页面。它工作得很好，并且毫无问题地到达了商店。

**编辑：**在此解决方案中，登录控制器必须在用户成功登录后自行关闭：

```
[self dismissModalViewControllerAnimated:NO]; //Although you might do this animated, this time 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T14:21:17.273

您可以在运行时更改选项卡栏控制器中的视图控制器数组。这应该足以满足您的目的。

我写了一个小例子。尝试使用以下凭据登录：

*   用户名：`john`，密码：`doe`
*   用户名：`pete`，密码：`poe`

根据使用的登录名，您将看到不同的选项卡组合。

该示例可以从我的 Dropbox 下载： http: [//dl.dropbox.com/u/6487838/LoginTabExample.zip](http://dl.dropbox.com/u/6487838/LoginTabExample.zip)

# html - ul li 标签位置

> ID：10765367
> 
> 赞同：0
> 
> 时间：2012-05-26T10:13:45.610
> 
> 标签：html, css

我有两组带有标题的列表，它们需要并排显示，如下图所示：

![在此处输入图像描述](../Images/61297fe26d4a25d660b8d5cdedfb6e63.png)

这是我的html：

```
<h2>Pages</h2>
<ul class="one">
     <li><a href="">About</a></li>
     <li><a href="">Archives</a></li>
     <li><a href="">About</a></li>
     <li><a href="">Archives</a></li>
</ul>

<h2>Pages</h2>
<ul class="two">
    <li><a href="">About</a></li>
    <li><a href="">Archives</a></li>
    <li><a href="">About</a></li>
    <li><a href="">Archives</a></li>
</ul> 
```

我无法对 html 进行任何更改。我必须仅使用 css 来完成此操作。

请参考小提琴：http: [//jsfiddle.net/Pxtvh/](http://jsfiddle.net/Pxtvh/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:26:03.870

如果你可以使用 html，我会在每个标题和它的列表中加上

```
<div style="float:left"> 
```

这行得通，我试过了，但如果你想完全使用 css，我想你可以使用 css 代码：

```
ul.two {
    position:absolute;
    top:0px;
    left:100px;
} 
```

这不会定位标题，因为它们都是并且它们没有单独的类，所以除了如上所述更改 html 之外，我想不出解决方案。此外，如果要更改第一个列表的宽度，则必须更新“left”参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:29:00.110

就像 Waffle Face 建议的那样，您可以尝试使用 position: absolute 并设置 left 和 top 像素，用于第二组 h2 和 ul。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-24T23:44:38.160

我知道这不是很好，因为它使用绝对位置，但这是我的解决方案：http: [//jsfiddle.net/Pxtvh/25/](http://jsfiddle.net/Pxtvh/25/)

```
h2:nth-of-type(2){
    position: absolute;
    left: 100px;
    top: 0;
}
ul:nth-of-type(2){
   position: absolute;
    left: 100px;
    top: 1em;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-24T14:35:19.687

如前所述，您不能仅使用 CSS 来执行此操作。

理想情况下，您可以将 DIV 包裹在标题和列表组周围，但您已声明无法编辑 html。

这留下了另一种选择： **如果您可以使用 JavaScript**，您可以动态地将 DIV 包装在您的标题列表分组周围以实现相同的效果。

以下是使用 jQuery 执行此操作的方法：

```
$('h2 + ul').each(function () {
    $(this).prev().andSelf().wrapAll('<div class="grouped-list"/>');
}); 
```

`div.grouped-list`然后在你的css文件中你会向左 浮动。[请参阅一个工作示例](http://jsfiddle.net/Pxtvh/18/)。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-05-24T12:43:25.647

```
ul {
    float: left;
    list-style: none;
    padding: 0;
    margin: 0;
} 
```

这将使`<ul>`向左浮动然后编辑添加 HTML

```
<ul>
    <li>link 1</li>
    <li>link 2</li>
    <li>link 3</li>
    <li>link 4</li>
</ul> 
```

然后是第二个：

```
<ul>
    <li>link 1 column2</li>
    <li>link 2 column2</li>
    <li>link 3 column2</li>
    <li>link 4 column2</li>
</ul> 
```

# java - Java ClassCircularityError ，运行时还是编译时？

> ID：10765372
> 
> 赞同：0
> 
> 时间：2012-05-26T10:14:03.110
> 
> 标签：java, exception, inheritance, specifications

我正在阅读 JVM 规范第 2 版。在本节（[Loading](http://docs.oracle.com/javase/specs/jvms/se5.0/html/Concepts.doc.html#19175)）中，ClassCircularityError 被定义为当一个类无法加载时抛出，如果它是它自己的超类或超接口。我无法想象/想象它，因为当我编译这样一个类时，java编译器会阻止我并且不会让我继续。那么如何创建这样的.class来加载？

```
public class TestCycle extends TestCycle{
private String memberVar;
} 
```

谁能向我的罐头解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:19:51.600

在 Java 中，编译的单位是类，因此类很可能在不同的时间编译，例如因为类是独立开发的，因为它们位于不同的库中。考虑：

```
class A {} 
```

到时候别人

```
class B {} 
```

现在，A 的制造者决定他们想要扩展 B：

```
class A extends B {} 
```

而 B 的制造者决定他们想要扩展 A，但不知道前者的变化，即仍然有 A 的原始定义：

```
class B extends A{} 
```

后来，他们意识到有一个新版本的 A 可用，并将其放在类路径中，导致加载时出现 ClassCircularityError。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:19:56.403

您可以通过直接编辑类文件来创建这样的类文件（我的意思是如果您真的想要）。所以虽然它不能编译，但可以创建一个有效的类文件，包括这样的类。这就是 JVM 也会检查它的原因。

# android - Eclipse 在文件中但在文件夹中显示没有错误

> ID：10765378
> 
> 赞同：1
> 
> 时间：2012-05-26T10:15:16.780
> 
> 标签：android, eclipse

编码我的 Android 应用程序时出现此错误：

![在此处输入图像描述](../Images/c66afda69c3ddf8b101f4bf205f22d62.png)

我对这个 strings.xml 文件什么都不做。

任何人都可以修复这个错误吗？

我确实刷新和清洁，但没有任何改变。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:33:41.573

根据您的[评论。](https://stackoverflow.com/questions/10765378/eclipse-show-no-error-in-files-but-in-folder#comment13994856_10765378)在这里我发布我的答案。对于这个问题。尝试以下步骤 -

*   首先，只需从您的工作区中删除该项目。

*   而且，只需将该项目再次导入您的工作空间。

有时，它发生在我身上。我试图这样做。有用。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:53:57.087

大多数情况下，这也发生在我身上。尝试从工作区中删除项目并重新导入它。

希望它会工作:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:23:45.603

看来您使用本地化是您的应用程序。发生错误的可能性有多种：

1）您尚未本地化所有字符串。2）其他问题仍然存在，您不会忽略它们。

解决方案：

右键单击您的项目----> Java 编译器-----> 错误/警告---> 删除所有错误

让我知道这个是否奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T10:26:33.637

您正在编译哪个版本的 SDK？根据[此](http://colincooper.net/blog/2011/02/17/android-supported-language-and-locales/)列表，您至少需要 Android 2.3 才能进行越南语本地化。

# android - 线程 UI 休眠而不冻结滚动视图

> ID：10765380
> 
> 赞同：0
> 
> 时间：2012-05-26T10:15:51.227
> 
> 标签：android

我正在尝试实现游戏 AI，但遇到以下问题：我正在从我的 UI Activity 类的另一个类中调用一个方法，该方法调用自身 UI Activity 类的一些方法（以模拟点击屏幕等事情），事情是，在这个方法结束时，我需要“暂停”游戏几秒钟，让用户看到人工智能做了什么。

所以我尝试在另一个线程中运行该方法，但我收到了从另一个线程编辑小部件时提供的错误消息。我试图让 UI 线程休眠，但这样做，用户不能再使用滚动视图，并且更改不会在休眠之前而是之后显示。

所以我想知道我该怎么做？（我已经阅读了一些关于 AsyncTask、Handler 的主题，但不能让它按我需要的方式工作）谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:20:51.170

你需要 runOnUiThread。

[http://developer.android.com/reference/android/app/Activity.html#runOnUiThread(java.lang.Runnable)](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

[http://steve.odyfamily.com/?p=12](http://steve.odyfamily.com/?p=12)

# git - git-http-后端错误

> ID：10765393
> 
> 赞同：1
> 
> 时间：2012-05-26T10:17:32.860
> 
> 标签：git, gitstack

我在 rodmine 上设置了 git。在家里一切正常。我将所有文件/服务器文件复制到我的服务器。在这里，所有网站都可以正常工作。但是当我尝试使用 git-http-backend.exe 时，它​​在 apache 日志中给了我这个错误：

```
[Sat May 26 11:31:35 2012] [error] [client 213.81.166.244] 
     Repository not exported: 'D:/XAMPP_Server/gitstack/repositories/project' 
```

当我尝试浏览它时，它会返回错误 6 ERR_FILE_NOT_FOUND

# php - PHP登录脚本在某些浏览器中没有“刷新”

> ID：10765395
> 
> 赞同：1
> 
> 时间：2012-05-26T10:17:51.287
> 
> 标签：php, login

我的 PHP 登录脚本遇到了非常困难（很难找到）的问题。我正在使用会话来使用标准发送表单和使用此脚本进行登录：

```
public function login($user, $password)
    if (!empty($user) && !empty($password))
    {    
      $user = $web->esc($user);
      $password = $web->Hash($user, $password);

      $db->selectDb('login');
      $qw = mysql_query("SELECT * FROM account WHERE username='".$user."' AND pass='".$password."'");

      if (mysql_num_rows($qw) > 0)      
      {    
        $result = mysql_fetch_array($qw);
        $_SESSION['user_name'] = $result['username'];
        $_SESSION['user_id'] = $result['id'];  
        return true; 
...
... 
```

在登录时，我使用的是这样的东西：

```
if(isset($_POST["send"]))
{
  if($auth->login($_POST["name"], $_POST["pass"]))
  {
    header("location: ./");  
  }
}
else         
...
... 
```

它工作得很好，但在 Opera 和其他浏览器中有时会出现问题。例如，当我登录 Opera、Google Chrome 等时 - 填写我的表单并发送它 - 它只是“卡在”登录表单上，并且在登录后从不让我看到我的页面 - 它在其他浏览器中工作 - 我只是不看看为什么在某些浏览器中它不工作的问题。你知道如何解决这个问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:37:08.317

在标头位置之后：您必须确保 PHP 不会发送数据。所以试着把函数放在`exit();`头函数之后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:41:08.143

激活错误报告并显示错误。

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('scream.enabled', TRUE); 
```

**它应该向您显示“已在文件文件中发送****的**警告标题行”。

如果您在第一个 index.php 文件中的某处编写错误报告语句并且代码包含在您的索引中，那将是更可取的。因为没有显示当前文件中的解析错误，所以它只会给你一个白屏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T10:34:11.787

出现这些错误后，问题解决了：

```
Warning: Unknown: open(/var/lib/php5/sess_5019088d181146779ffc848a095c27ff, O_RDWR) failed: No space left on device (28) in Unknown on line 0

Warning: Unknown: Failed to write session data (files). Please verify that the current setting of session.save_path is correct (/var/lib/php5) in Unknown on line 0 
```

在 php.ini 的设置中改变这个：

```
session.save_path = /tmp 
```

一切都很好，感谢 Mihai Stancu 的错误分析代码。

# android - 在 Android 中切换标签

> ID：10765397
> 
> 赞同：0
> 
> 时间：2012-05-26T10:18:35.530
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich

基本上 Android 2.2 和所有都支持旧版本的选项卡，其中我们只需要传递管理加载和处理活动的选项卡处理程序的意图。

如何在 Android 3.0 或 4.0 中执行相同操作，如何为 Tab 对象设置 Intent？我们可以使用片段，但它必须是可选的，对吗？

这是 4.0 中 Tabs 的示例代码

```
ActionBar.Tab tab1 = getSupportActionBar().newTab();

    tab1.setText("Hello");
    tab1.setIcon(R.drawable.ic_search);
    tab1.setTabListener(this);

    getSupportActionBar().addTab(tab1); 
```

任何想法，如何添加相应选项卡的意图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:52:40.850

> 基本上 Android 2.2 和所有都支持旧版本的选项卡，其中我们只需要传递管理加载和处理活动的选项卡处理程序的意图。

这种方法已被弃用。

> 如何在 Android 3.0 或 4.0 中执行相同操作，如何为 Tab 对象设置 Intent？

你没有。这种方法已被弃用。

> 我们可以使用片段，但它必须是可选的，对吗？

欢迎您`TabListener`使用片段，或者只是更新您的活动的内容视图。

# c++ - 是否有任何工具可以显示函数内的数据依赖关系

> ID：10765399
> 
> 赞同：1
> 
> 时间：2012-05-26T10:19:01.150
> 
> 标签：c++, c

我有这种代码。我感兴趣的是找到循环之间的数据依赖关系，这样我就可以猜测是否可以并行运行循环。有什么工具可以帮助我解决这个问题。

```
void some_func()
{
 for( ... )
 {
  ...
 }
 for( ... )
 {
  ...
 }
 for( ... )
 {
  ...
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T13:23:37.623

请参阅我们的[DMS 软件再工程工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[C 前端](http://www.semanticdesigns.com/Products/FrontEnds/CFrontEnd.html)[计算的数据流结果](http://www.semanticdesigns.com/Products/DMS/FlowAnalyzers.html)。（我们的 C++ 前端还不会这样做）。

如果您只想在一个或两个循环中执行此操作，那么查看这些依赖项可能是一种昂贵的方式。您显然可以手动执行此操作，是的，这很痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:20:06.577

您可以查看这个实验工具[ParTools](https://sourceforge.net/projects/partools/)，它在图形环境中显示 C 程序中的数据依赖关系。它允许对 C 程序执行配置文件和数据依赖性进行交互式分析，以促进在手动并行化过程中发现和选择合适的并行化候选者。该流程不采用任何特定的并行化技术，因此可以广泛应用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:28:48.913

我还没有尝试过，但[`bp`](http://blitzprog.org/features)可能会有所帮助。从文档中：

> 在设计这些软件时，开发并发、并行和正确运行的软件通常需要大量的知识和注意力。bp[会自动尝试并行](http://blitzprog.org/articles/automatic-parallelism-data-dependency)化程序的某些部分，如果编译器认为值得这样做，它将用多线程代码替换顺序代码。

# jquery - jQuery submit() 对我未定义的属性不起作用？

> ID：10765402
> 
> 赞同：4
> 
> 时间：2012-05-26T10:19:07.197
> 
> 标签：jquery, submit

这就是我得到的：

```
<form method="post" id="myform" class="myform">
    <input type="submit" onclick="return claim();" name="submit" class="onsubmit" value="" />
</form> 
```

```
function claim() {
    var c = confirm('You sure?');

    if (!c) {
        return false;
    }

    var password = prompt("Please mention pw","");
    if (password != null && password != "") {
        $.post(
            "/claim/", 
            { partner_pwd: password },
            function(data) {
                if (data == '1') {
                    $('form').submit(function() {
                        alert('Handler for .submit() called.');
                    });
                }
            });
        }

        return false;
    } 
```

这很好用，但我的问题是它不会提交表单。我在声明中`$('form').submit()`都试过了。我在这个if语句里面试过了，它显示得很好，我只需要让它提交表单，为什么这不起作用？`$('#myform').submit()``data == '1'``alert(1)`

***更新：***

**控制台说：**

```
Uncaught TypeError: Property 'submit' of object #<HTMLFormElement> is not a function jquery.min.js:3 f.event.trigger 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:35:43.117

你犯了以下错误：

1.  jQuery 选择器`'form'`过于笼统，返回一个数组。所以改成`'#myform'`.
2.  此外，您的 javascript 绝不允许提交您的表单。罪魁祸首是最后一行：`return false;`。即使在成功验证表单之后，这条线也会阻止它。它应该是`return true;`。@11684 指出了这个错误，但没有人理解他，并被一些人否决。

无论如何，这是调试后的代码。

```
 function claim()
{
    var c = confirm('You sure?');

    if (!c) {
        return false;
    }

    var password=prompt("Please mention pw","");
    if (password!=null && password!="")
      {
            $.post("/claim/", { partner_pwd: password },
               function(data) {
                    if(data == '1')
                    {
                        $('#myform').bind('submit',function() {
                          alert('Handler for .submit() called.');
                        });
                    }
               });
      }

    return true;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T10:24:07.213

要引发事件，请调用不带参数的 relevent 函数，如下所示：

```
$('form').submit(); 
```

您当前的代码只是添加一个提交处理函数以在提交表单时执行，它实际上并没有提交表单。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-26T10:25:18.957

尝试：

```
$('#myform')[0].submit(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T10:47:34.567

正如 Rory 所说，您的代码只会添加一个事件处理程序。你需要做

```
$(form).submit() 
```

没有参数。如果您想附加一个处理程序，然后稍后触发事件，您可以使用

```
$(form).trigger('submit') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T17:11:48.040

我有一个类似的问题，除了我试图从 Javascript 提交表单，而不是附加 onsubmit 事件处理程序。问题原来是我正在使用的表单上的提交按钮的名称=“提交”......我怀疑这也是导致原始海报问题的部分原因。当表单有一个名为“submit”的按钮时，它会在表单对象上创建一个“submit”属性，覆盖“submit”属性的通常值，该属性是一个提交表单的函数。

看到[javascript submit() 不是一个函数？](https://stackoverflow.com/questions/6525790/javascript-submit-is-not-a-function)更多细节

# javascript - 如何在javascript中将变量从一个函数传递到另一个函数

> ID：10765405
> 
> 赞同：0
> 
> 时间：2012-05-26T10:19:40.977
> 
> 标签：javascript

```
var chart;
var d = new Array();

function click() {
    d = document.getElementById('graph:hi').value;
    alert(d);
}
var c = new Array(66, 15, 2.5, 21.9, 25.2, 23.0, 22.6, 21.2, 19.3, 16.6, 14.8);
alert(c);
jQuery(document).ready(function (e) {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            defaultSeriesType: 'spline',
            ignoreHiddenSeries: false
        },
        title: {
            text: 'Height Report'
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: ['0', '0.5', '1.5', '2.5', '3.5', '4.5', '5.5', '6.5', '7.5', '8.5', '9.5', '10.5', '11.5', '12.5', '13.5', '14.5', '15.5', '16.5', '17.5', '18.5', '19.5', '20.5', '21.5', '22.5', '23.5', '24.5', '25.5', '26.5', '27.5', '28.5', '29.5', '30.5', '31.5', '32.5', '33.5', '34.5', '35.5']
        },
        yAxis: {
            title: {
                text: 'Percentage'
            },
            labels: {
                formatter: function () {
                    return this.value + '%';
                }
            }
        },
        tooltip: {
            formatter: function () {
                return '' + this.x + ': ' + this.y;
            }
        },
        plotOptions: {
            spline: {
                marker: {
                    radius: 3,
                    lineColor: '#666666',
                    lineWidth: 1
                }
            }
        },
        series: [{
            name: 'Pecentile 3',
            data: c
        }, {
            name: 'Pecentile 10',
            data: d
        }]
    });
}); 
```

从 XHTML 我得到常规值并进入 click() 函数。jQuery(document).ready(function(e){}) 是一个绘图代码..我想将 d 值从 click() 传递给 jquery 函数。但我无法在 jquery 函数中获取值。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:30:22.557

您的代码在概念上写得很奇怪。

为什么要在文档准备好之前执行一些代码而在文档中执行一些代码`jQuery(document).ready(); ??`

如果您将所有内容都放在后一个函数中，并进行适当的修改，那么一切都可以工作。

我建议：

1.  将所有内容插入`Query(document).ready();`函数
2.  而不是使用`function click(...)`我会使用更多的jquery风格，也就是说： `$('graph:hi').click(function(){WRITE THE CODE});`

3.  当你这样做时， d 将在你的范围内 ba 全局变量，所以你不会遇到你遇到的问题

# c# - 我的代码中编译错误的原因是什么

> ID：10765407
> 
> 赞同：-3
> 
> 时间：2012-05-26T10:19:48.307
> 
> 标签：c#, asp.net

我在 VS2010 中运行 asp.net，C#4.0 应用程序。我收到以下编译错误：

```
Server Error in '/' Application.

Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately.

Compiler Error Message: ASPNET: Make sure that the class defined in this code file matches the 'inherits' attribute, and that it extends the correct base class (e.g. Page or UserControl).

Source Error:

Line 1:  using System;

Line 2:  using System.Collections.Generic;

Line 3:  using System.Linq; 
```

我的页面属性是：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default2.aspx.cs"
    EnableEventValidation="false" Inherits="jsPlumb_jsPlumb_Default2" %> 
```

我的 c#codebehind 类：

```
 namespace CompanyDisplay.jsPlumb.jsPlumb.jsPlumb
  {
        public  class jsPlumb_jsPlumb_Default2 : System.Web.UI.Page
        {
    }
} 
```

我希望显示名称空间以运行一些 Web 服务应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:32:44.773

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:36:14.960

当代码隐藏类名称与您的 aspx 页面上的“继承”属性不匹配时，会显示此错误。也许你试图重命名一些东西？

此外，当您尝试查看新页面但未编译源代码时，我已经看到此错误，因此即使您的 aspx 存在，它也无法与相应的代码隐藏类对抗。

**编辑：**

你有一个完全混乱的命名约定，难怪你在正确匹配类名时遇到了麻烦。

对不起，但这只是荒谬的！

```
inherits="CompanyDisplay.jsPlumb.jsPlumb.jsPlumb.jsPlumb_jsPlumb_Default2" 
```

修正你的约定，也许你会发现自己有这样的源文件：

```
CodeBehind="Default.aspx.cs" Inherits="MyNamespace.jsPlumb.Default" 
```

不要像 jsPlumb.jsPlumb.jsPlumb 那样做......那只是一场噩梦！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:49:11.303

我得到了答案；我应该将继承属性指定为；

继承="CompanyDisplay.jsPlumb.jsPlumb.jsPlumb.jsPlumb_jsPlumb_Default2"

# php - 在某个字符串之后解析引号中的字符串

> ID：10765416
> 
> 赞同：1
> 
> 时间：2012-05-26T10:21:05.740
> 
> 标签：php, parsing

我在解析字符串时遇到了困难。这是我的结构：

```
"Title":"Avatar","Year":"2009","Rated":"PG-13","Released":"18 Dec 2009","Runtime":"2 h 42 min" 
```

我想要做的是将每个结果放入一个自己的变量中，以便最终得到 $title、$year、$runtime 等。

我知道，有很多不同的 PHP 函数，但是在尝试了很多但没有得到我想要的结果之后，我只需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:24:17.303

您可以尝试以下方法：

```
<?php
    $string = "Title":"Avatar","Year":"2009","Rated":"PG-13","Released":"18 Dec 2009","Runtime":"2 h 42 min"
    $segments = explode(',', $string);
    foreach($segments as $segment) {
        list($key, $value) = explode(':', $segment);
        echo $key, ' ', $value;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:25:32.563

`{`因为在对您的字符串进行一些修改后，您可以通过添加尾随和来使其成为 JSON 字符串`}`。[`json_decode`](http://www.php.net/manual/en/function.json-decode.php)并在修改后的字符串上调用函数：

```
$str = '"Title":"Avatar","Year":"2009","Rated":"PG-13","Released":"18 Dec 2009","Runtime":"2 h 42 min"';
$arr = json_decode("{{$str}}", true);  // True to make it array, not object

// $arr contains parsed data 
```

它有效，只需看看[这个演示](http://codepad.viper-7.com/JIPxyL)。您可以使用以下变量：

```
echo $arr["Title"]; 
```

但是如果你真的需要`$title`（*我不建议这样做*）你可以使用[`extract`](http://php.net/manual/en/function.extract.php)函数

```
extract($arr); 
```

你可以像这样访问它：

```
echo $title; 
```

# php - Xdebug 在 OS X Lion 上不显示分析器输出

> ID：10765417
> 
> 赞同：1
> 
> 时间：2012-05-26T10:21:15.530
> 
> 标签：php, profiling, osx-lion, xdebug

我正在尝试让 OS X Lion 上的 Xdebug 分析器输出应有的文件，但它不会。我可以调试好并且代码覆盖率也可以，但是我无法让它输出缓存研磨文件。

我的 php.ini 的相关部分：

```
zend_extension = /usr/lib/php/extensions/no-debug-non-zts-20090626/xdebug.so
xdebug.remote_enable=on
xdebug.remote_host=localhost
xdebug.remote_handler=dbgp
xdebug.remote_port=9000
xdebug.profiler_enable=1
xdebug.profiler_output_dir = /var/log/xdebug
xdebug.profiler_output_name = "cachegrind.out.%t-%R"

include_path=".:/usr/lib/php/pear"
magic_quotes_gpc=off
date.timezone = 'Europe/Berlin'
extension = memcached.so
extension = http.so
memory_limit=1G 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:36:03.483

我能想到的两件事：

1.  运行 PHP 的用户无法将文件写入 /var/log/xdebug
2.  它试图生成的文件名（毕竟您使用 %R！）对于文件系统来说太大而无法理解。尝试使用默认的`xdebug.profiler_output_name`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-08T14:09:23.427

如果您使用的是 MAMP，还有第三种方法：您正在修改错误的 php.ini 文件。

正如我刚刚在这里发现并发布的那样：[MAMP 将其 php.ini 保存在哪里？](https://stackoverflow.com/questions/11691767/where-does-mamp-keep-its-php-ini/24633893#24633893)

希望这能有所帮助。

# java - 无法通过java类连接到数据库

> ID：10765420
> 
> 赞同：1
> 
> 时间：2012-05-26T10:21:35.310
> 
> 标签：java, mysql, jdbc

我正在尝试通过文件属性与 mysql 数据库建立连接，然后从 servlet 运行信息。我的 Connection 类如下所示：

```
public class pageDao {

private Connection connection;
private Statement statement;

private pageDao() {
Properties prop = new Properties();

    try {
        //Class.forName("oracle.jdbc.driver.OracleDriver");
        //Class.forName("org.gjt.mm.mysql.Driver");
        Class.forName("com.mysql.jdbc.Driver");
    } catch (ClassNotFoundException cnfe) {
        System.out.println("Error loading driver: " +cnfe);
    }

    try {
        try {
             //load a properties file
            prop.load(new FileInputStream("config.properties"));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        String db = prop.getProperty("database");
        String dbuser = prop.getProperty("dbuser");
        String dbpassword = prop.getProperty("dbpassword");
        connection = DriverManager.getConnection(db,dbuser,dbpassword);

    } catch (SQLException e) {
        e.printStackTrace();
    }

}
private static pageDao thisDao; 

public static pageDao gedDao()
{
    if(thisDao == null)
        thisDao = new pageDao();
    return thisDao;
}

public PageData getPage(String id)
{
    PageData data = new PageData();

    try {
        statement = connection.createStatement();
        ResultSet rs = statement.executeQuery("select * from pages where id='"+id+"'");
        if(rs.next())
        {
            data.setId(rs.getString("id"));
            data.setParentid(rs.getString("parentid"));
            data.setTitle(rs.getString("title"));
            data.setTitle4menu(rs.getString("title4menu"));
            data.setKeywords(rs.getString("keywords"));
            data.setDescription(rs.getString("description"));
            data.setMaintext(rs.getString("maintext"));
        }
        else 
            return null;
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return data;
} 
```

当我运行它时，它没有显示连接未建立的错误，但是当它到达

```
public PageData getPage(String id)  {
        PageData data = new PageData();

        try {
            statement = connection.createStatement(); 
```

它抛出`java.lang.NullPointerException`。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:29:50.623

代码没有问题。检查您的传递参数...

检查样品

```
private Connection getConnection() {
    try {
        String dbUrl = "jdbc:mysql://localhost:3306/projectmining";
        Class.forName("com.mysql.jdbc.Driver");
        return DriverManager.getConnection(dbUrl, "root", "admin");
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    return null;
} 
```

# iphone - 当应用程序使用 AVAudioPlayer 进入后台时如何播放音频

> ID：10765423
> 
> 赞同：0
> 
> 时间：2012-05-26T10:22:50.350
> 
> 标签：iphone, avaudioplayer, background-process

我是 iphone 新手。我正在开发使用 AVAudioPlayer 的音频播放器。通过使用这个框架，我开发了一个应用程序，它在应用程序处于活动状态时播放歌曲，但是每当我点击 iphone 中的主页按钮时，它会立即停止音频背景但应用程序在后台运行时如何在应用程序处于后台时收听音频。如果有人知道这一点，请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:52:38.093

在`info.plist`添加键名`Required background modes, Item 0 - App plays audio`和开始播放音频时添加以下代码。

```
[[AVAudioSession sharedInstance] setDelegate: self];

NSError *setCategoryError = nil;
[[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryError]; 
```

# asp.net-mvc-3 - 如何使用 Ninject for MVC 3 手动实例化对象

> ID：10765424
> 
> 赞同：3
> 
> 时间：2012-05-26T10:22:50.537
> 
> 标签：asp.net-mvc-3, ninject.web.mvc

如何在 ASP.NET MVC 3 中使用 Ninject 手动实例化对象？某事作为

```
"NinjectObject".Resolve<IMyService>(); 
```

谢谢和问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-26T10:24:21.330

最好注入依赖项而不是解决它们。服务定位器是一种反模式。例如，您可以使用以下内容：

```
IMyService myService = DependencyResolver.Current.GetService<IMyService>(); 
```

但请不要使用它。这是一种反模式。

依赖注入是首选方式。您应该让需要此依赖项的类的构造函数获取一个，`IMyService`而不是让该类获取此依赖项。

# php - 使用 Facebook API 向用户发送消息

> ID：10765430
> 
> 赞同：0
> 
> 时间：2012-05-26T10:23:42.883
> 
> 标签：php, facebook, facebook-graph-api, facebook-opengraph

我正在尝试向用户发送消息，但它不起作用。知道为什么吗？

```
<?php 

  $app_id = '####';
  $app_secret = '###';

  $token_url = "https://graph.facebook.com/oauth/access_token?" .
    "client_id=" . $app_id .
    "&client_secret=" . $app_secret .
    "&grant_type=client_credentials";

  $app_access_token = file_get_contents($token_url);

  $user_id = '###';

  $apprequest_url ="https://graph.facebook.com/" .
    $user_id .
    "/apprequests?message='INSERT_UT8_STRING_MSG'" . 
    "&data='INSERT_STRING_DATA'&"  .   
    $app_access_token . "&method=post";

  $result = file_get_contents($apprequest_url);
  echo "Request id number: ". $result;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:29:04.777

这不是发送帖子请求的方式

```
$apprequest_url ="https://graph.facebook.com/" .
    $user_id .
    "/apprequests?message='INSERT_UT8_STRING_MSG'" . 
    "&data='INSERT_STRING_DATA'&"  .   
    $app_access_token . "&method=post"; 
```

您应该使用 php curl 发送 post 请求或[检查此](http://www.php.net/manual/en/function.file-get-contents.php#108309)

# h2 - 如何连接到 Gerrit 中使用的 H2 数据库

> ID：10765431
> 
> 赞同：3
> 
> 时间：2012-05-26T10:23:43.763
> 
> 标签：h2, gerrit

我尝试了以下命令，但失败了。

```
ssh -p 24198 my_server gerrit gsql 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T02:08:53.300

那是正确的命令。你得到了什么错误？Gerrit 是否启动并运行？它必须启动并运行才能通过 ssh 连接。请参阅[http://gerrit-documentation.googlecode.com/svn/Documentation/2.4/cmd-gsql.html](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4/cmd-gsql.html)

如果 Gerrit 未启动并运行，您可以使用`java -jar gerrit.war gsql -d <SITE_PATH>`- 请参阅[http://gerrit-documentation.googlecode.com/svn/Documentation/2.4/pgm-gsql.html](http://gerrit-documentation.googlecode.com/svn/Documentation/2.4/pgm-gsql.html)

# android-layout - Android：正确使用RelativeLayout

> ID：10765436
> 
> 赞同：0
> 
> 时间：2012-05-26T10:24:32.703
> 
> 标签：android-layout

我将尝试使用文本来表示所需的布局：

股票名称

==========

符号 | 分数

谷歌 | 76

**符号**和**GOOG**应该在一个垂直的线性布局中对它们进行分组，并且它们应该与左边的**乐谱**对齐，**76**也应该在一个垂直的线性布局中对它们进行分组，但它们应该向右对齐。

这是我的布局。我可以通过您在下面看到的方式来实现它。有谁知道我做错了什么？（这只是布局的相关部分）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/stock_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="40dp" />
</LinearLayout>

<RelativeLayout
    android:id="@+id/relative_layout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/stock_symbol" />

        <TextView
            android:id="@+id/stock_symbol"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="30dp" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/stock_score" />

        <TextView
            android:id="@+id/stock_score"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="30dp" />
    </LinearLayout>
</RelativeLayout> 
```

我也尝试在内部使用`android:layout_alignLeft="@+id/relative_layout"`and但没有成功。`android:layout_alignRight="@+id/relative_layout"``LinearLayout`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:56:22.843

感谢聊天室“Android-People”的@RobinHood，我发现了错误：

我不得不用 RelativeLayout 替换内部的 LinearLayouts，内部的 RelariveLayout 应该从 android:layout_width="fill_parent" 更改为 android:layout_width="wrap_content"

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:id="@+id/main"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/stock_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="40dp" />
</LinearLayout>

<RelativeLayout        
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"        
    android:orientation="horizontal" >

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"            
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/stock_symbol" />

        <TextView
            android:id="@+id/stock_symbol"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="30dp" />
    </RelativeLayout>

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/stock_score" />

        <TextView
            android:id="@+id/stock_score"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="30dp" />
    </RelativeLayout>
</RelativeLayout> 
```

# ajax - 多个文件在 grails 中上传

> ID：10765437
> 
> 赞同：0
> 
> 时间：2012-05-26T10:24:37.827
> 
> 标签：ajax, grails, file-upload

我正在尝试实现一种评论机制，用户可以在其中发表评论并使用它上传多个文件。我在评论部分使用 ag:formRemote 但我了解到 ajax 请求不支持文件上传。那么我该怎么做呢？我发现了一些插件，但它们对我不起作用，因为我还必须保存评论，而这些插件不支持。我通过使用 iframe 在互联网上找到了一种方法，但我不知道该怎么做。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:58:34.340

尝试使用jQuery Form插件，它也支持[ajax文件上传，](http://jquery.malsup.com/form/#file-upload)所以你不需要自己实现。它还允许跟踪上传进度。

# python - 缓存结果的 Python IDE 或模块？

> ID：10765438
> 
> 赞同：0
> 
> 时间：2012-05-26T10:24:41.800
> 
> 标签：python, caching, ide, automation, nltk

我正在使用来自[nltk](http://nltk.org/)的 nltk-data 中包含的一些语料库来找出某些算法。

所以我的代码通常是这样的：

```
import re, nltk, random
from nltk.corpus import reuters

def find_test_and_train_data():
    return [fileid for fileid in reuters.fileids() if re.match(r"^training/", fileid)], [fileid for fileid in reuters.fileids() if re.match(r"^test/", fileid)]

def generate_random_data(train_and_test_fileids):
    random.seed(348) ; random.shuffle(train_and_test_fileids[0])
    return train_and_test_fileids[0][2000:], train_and_test_fileids[0][:2000]

def fileid_words(fileid):
    return [word.lower() for line in reuters.words(fileid) for word in line.split() if re.match('^[A-Za-z]+$', word)]

if __name__ == '__main__':
    train_fileids, dev_fileids = generate_random_data(find_test_and_train_data())
    train_data=fileid_words(train_fileids)
    dev_data=fileid_words(dev_fileids) 
```

因此，如果我将它运行到交互式解释器中，我就可以在 及其相应的文件 ID 上执行任务`train_data`，`dev_data`而无需重新填充变量（一项非常耗时的任务）。

但是，我希望能够将其写入*.py*文件，以便我可以保存统计上有趣的算法。

我可以通过双重输入来做到这一点，例如：当我得到一个在解释器中工作的函数时，我将它复制并粘贴到 .py 文件中，但这非常低效，而且我失去了 IDE 的功能。

是否有任何 IDE 或 Python 模块可以自动使 Python 脚本在内存中运行，或者将变量的值（例如）存储在`test_data`数据库中？

感谢所有建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:57:04.797

另一种解决方案是使用检查模块从中获取代码字符串并将其保存到 file.py 中。如果您使用检查模块，您将能够获取代码对象和事件源代码，然后能够将原始代码转换为字符串，然后将其放入持久存储（如文件）中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:46:48.147

特定于 python 的方法是使用 pickle：

[http://docs.python.org/library/pickle.html](http://docs.python.org/library/pickle.html)

您可以将变量保存到磁盘，然后将它们加载回来：

```
import pickle

data1 = {'a': [1, 2.0, 3, 4+6j],
     'b': ('string', u'Unicode string'),
     'c': None}
output = open('data.pkl', 'wb')
pickle.dump(data1, output)
output.close()

input = open('data.pkl', 'rb')

data1 = pickle.load(pkl_file) 
```

如果您想以将来与其他语言兼容的格式保存，请考虑使用 JSON。

# iphone - 您如何在 Facebook 中发布指向用户收件箱的链接？

> ID：10765440
> 
> 赞同：0
> 
> 时间：2012-05-26T10:25:07.157
> 
> 标签：iphone, ios, facebook, facebook-graph-api

我是一名 iPhone 应用程序开发人员。我不知道如何从我的 Facebook 帐户向 Facebook 中选定用户的收件箱发送“链接”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:43:24.023

您无法从后端使用 Facebook API 发送消息，但您可以通过 JS SDK 或根据此链接将用户重定向到 facebook url

仅供参考：[发送消息](https://developers.facebook.com/docs/reference/dialogs/send/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:48:54.530

我不完全知道我是否理解了您的问题，但是：如果您想提供一个用户为了访问她/他的 Facebook 收件箱而遵循的链接，您可以使用 URL 方案`fb://mailbox`（前提是她/他有已安装 Facebook 应用程序）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:50:47.637

正如@Venu 所写，api 不允许应用程序代表用户发送消息，只能使用您应该能够使用[iOS sdk Dialog打开的](http://developers.facebook.com/docs/reference/iossdk/dialog/)[发送](https://developers.facebook.com/docs/reference/dialogs/send/)对话框。

您可以使用的另一种方法是[Chat API](https://developers.facebook.com/docs/chat/)，您可以使用它代表用户发送消息，它需要`xmpp_login`权限并且您需要实现 xmpp 客户端。

# python - Python3.2 无法识别解释器中的 UP/DOWN/LEFT/RIGHT 键？

> ID：10765441
> 
> 赞同：3
> 
> 时间：2012-05-26T10:25:08.903
> 
> 标签：python, python-3.x, ipython

我正在使用 ubuntu，linux 内核 2.6.38。我平时用python2，今天决定试试python3。`make install`我按照自述文件下载了 python3 和它。但是，python 3.2 解释器无法识别`UP/SOWN/LEFT/RIGHT`键，这些键在我的 python 2.7 解释器中可用。我做错了什么？

![在此处输入图像描述](../Images/ba27d4e530e0af615a550205ff41d064.png)

另一个问题是，如果我同时拥有 python2.7 和 python3.2，我可以选择 iPython 使用的 python 版本吗？

最好的祝福。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T10:27:58.367

从 Ubuntu安装`libreadline-dev`包，然后从头开始重新编译 Python。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-26T10:34:13.650

`readline`在没有支持的情况下编译 python 时会发生这种情况。安装 readline 开发包，以便`readline.so`在编译时构建模块。

如果你想`ipython`同时在 python2 和 python3 上使用，你必须为每个解释器单独安装它。

最后一个提示：ubuntu 的存储库中已经有 python3。您可以使用以下方法安装它：

```
sudo apt-get install python3 ipython3 
```

# java - 在 Android VMware 中运行 Java 应用程序

> ID：10765444
> 
> 赞同：-4
> 
> 时间：2012-05-26T10:25:35.650
> 
> 标签：java, android, vmware

我正在尝试查看在基于 Android 操作系统的手机上运行我的 Java 应用程序的结果。

所以我想知道，是否可以使用 VMware，然后使用 Android-x86 2.2 live & installation iso 在 VMware 中运行它，然后在 Android 系统中运行我的应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:27:53.753

伙计们。为什么我被否决了？我一直在努力帮助人们并获得声望。所以这个问题可能对 SO 不利，但我帮助某人解决了一些有用的问题。似乎很难失去代表它....

是的！:)

[http://geeknizer.com/how-to-run-google-android-in-virtualbox-vmware-on-netbooks/](http://geeknizer.com/how-to-run-google-android-in-virtualbox-vmware-on-netbooks/)

[http://androiddevnotes.com/2011/03/08/1299521520000.html](http://androiddevnotes.com/2011/03/08/1299521520000.html)

我经常使用它，它比模拟器快得多。我建议使用通用 x86 iso 并创建虚拟机，而不是使用 live iso。这样，您可以配置各种东西，对其进行快照等。

# c - 编译 gSOAP 客户端时未定义的引用

> ID：10765446
> 
> 赞同：3
> 
> 时间：2012-05-26T10:25:46.730
> 
> 标签：c, gsoap

我正在尝试为 C 中的 Web 服务创建客户端。我使用 wsdl2h 和 soapcpp2 生成了 C 文件。在 netbeans 中，我将生成的文件和 gSOAP 包含目录添加到项目的包含目录中。我的主文件如下所示：

```
#include <stdio.h> 
#include <stdlib.h>
#include <soapH.h>
#include <webserviceSoap12.nsmap>

int main(int argc, char** argv) {

    struct soap *soap1 = soap_new();
    struct _ns1__getAllCustomer *quote;
    struct _ns1__getAllCustomerResponse *quote2;
    if (soap_call___ns2__getAllCustomer(soap1, NULL, NULL, quote, quote2) == SOAP_OK)
        printf("asd\n");
    else // an error occurred  
        soap_print_fault(soap1, stderr); // display the SOAP fault on the stderr stream
    return (EXIT_SUCCESS);
} 
```

我从 gSOAP 网站的入门部分复制了大部分内容。当我尝试编译时，出现以下错误：

```
build/Debug/MinGW-Windows/main.o: In function `main':
\NetBeansProjects\WebServiceClient/main.c:19: undefined reference to `soap_new_LIBRARY_VERSION_REQUIRED_20808'
\NetBeansProjects\WebServiceClient/main.c:22: undefined reference to `soap_call___ns2__getAllCustomer'
\NetBeansProjects\WebServiceClient/main.c:25: undefined reference to `soap_print_fault' 
```

如果我将“soapC.c”“soapClient.c”“soapClientLib.c”文件添加到项目中，我会得到一堆更多未定义的参考。我究竟做错了什么？我在 Win7 上使用带有 MinGW 编译器的 Netbeans ide。我需要哪些其他库或应该包含哪些其他文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:17:17.577

I managed to solve the problem by adding the files "soapC.c" "soapClient.c" "stdsoap.c" to the project files and in the Project propertie - Include Directories adding the files generated by soapcpp2 and the gSOAP toolkit's gsoap directory

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:40:42.620

您将需要链接到适当的库。您将需要使用`-l`开关添加适当的库，并且您可以选择需要将路径传递到这些库所在的位置`-L`。另外，请注意，以 a 结尾的库`++`通常是您在使用 C++ 时应该使用的库。所以，你的命令行应该至少包括：

对于 C：

```
gcc ... -lgsoap -L/path/to/gsoap/binaries 
```

对于 C++：

```
g++ ... -lgsoap++ -L/path/to/gsoap/binaries 
```

此外，根据您是否使用 SSL、cookie 等附加功能，您还需要链接这些库：

```
g++ ... -lgsoap++ -lgsoapssl++ -L/path/... 
```

如果您使用不同的工具链，请查找文档以获取确切的开关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-10T11:39:54.003

I had this problem in *Debian BullsEye (11)*, `-lgsoap++` is necessary and it was solved when I added `/gsoap_library_path/libgsoap++.a` to g++ compiler command line.

# javascript - jQuery在不同区域切换

> ID：10765447
> 
> 赞同：1
> 
> 时间：2012-05-26T10:25:49.943
> 
> 标签：javascript, jquery

我正在尝试复制 Facebook 的 Like 按钮，但问题出在点击更改按钮的特定位置。

当它尚未被点赞时，用户应单击按钮上的任意位置，按钮将变为灰色状态（已点赞）。这已经完成了。

但问题是当不喜欢它时，我认为我没有正确使用 jquery，因此它应该设置为蓝色状态（不喜欢），只有当它被点击图像时。

这是我所做的，看看它，以便您更好地理解：[https ://glenrdsgn.com/button/](https://glenrdsgn.com/button/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:31:16.307

I've added a class '.unlike' to the ch2 div so that the HTML looks like this:

```
<div id="like" >
    <div id="ch1" class="btn btn-empty no-like">
        <div class="pad">
            <div class="like-text">
                <div id="ch2" class="data-empty"></div>
                <div class="txt">Like</div>
            </div>
        </div>
    </div>
</div> 
```

Then the following jQuery does what I think you mean:

```
$(function() {
    $('.btn').live('click', function() {
        $('#ch1').attr('class', 'btn like btn-fill');
        $('#ch2').attr('class', 'unlike data-fill');
    });
    $('.unlike').live('click', function() {
        $('#ch1').attr('class', 'btn btn-empty no-like');
        $('#ch2').attr('class', 'data-empty');
        return false;
    });
}); 
```

The return false is needed as otherwise both events are triggered. Hope this helps

# c# - SQL2008中如何用随机唯一数字填充字段

> ID：10765460
> 
> 赞同：0
> 
> 时间：2012-05-26T10:27:56.053
> 
> 标签：c#, asp.net, sql-server-2008

我有一个表，其中有一个**int 字段**。该字段应填写随机数，并且应该是唯一的。什么是最好的解决方案？我应该生成一个随机数并检查它是否存在于表中？顺便说一句，我正在使用 ASP.NET 和 C# 开发一个 Web 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:40:13.880

你真的需要它是随机的吗？如果您只需要一个唯一的整数值，请使用 Identity。检查[此链接](http://www.plus2net.com/asp-tutorial/sql-identity.php)

编辑：对于随机数（BigInt），你可以试试这个：

```
SELECT ABS(CAST(CAST(NEWID() AS VARBINARY(5)) AS Bigint)) as UniqueNo 
```

在[这里找到](http://www.sqlservercurry.com/2007/12/generate-unique-number-in-sql-server.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:31:01.047

使用 GUID：

```
public string GetRandomGUID(int length)
{
  // Get the GUID
  string guidResult = System.Guid.NewGuid().ToString();

  // Remove the hyphens
  guidResult = guidResult.Replace("-", string.Empty);

  // Make sure length is valid
  if (length <= 0 || length > guidResult.Length)
    throw new ArgumentException("Length must be between 1 and " + guidResult.Length);

  // Return the first length bytes
  return guidResult.Substring(0, length);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:15:53.350

从`Front End`使用`C#`

```
Guid.NewGuid().ToString("N") //Replaces all - will Empty values. 
                               Final value will be numeric 
```

从数据库

```
newid() 
```

* * *

这两种技术都会给你独特的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T11:35:42.417

尝试[http://msdn.microsoft.com/en-us/library/system.random.aspx](http://msdn.microsoft.com/en-us/library/system.random.aspx)生成随机数，然后查询数据库以检查该值是否存在。您应该能够通过选择 'int field' = 'random number' 的行并检查 @@rowcount = 0 来确定它。

# objective-c - 如何单击 TableViewCell 打开一个新视图并保留数据？

> ID：10765464
> 
> 赞同：0
> 
> 时间：2012-05-26T10:28:31.690
> 
> 标签：objective-c, ios, uitableview, uinavigationcontroller

所以我在 UIViewController 中添加了一个 UITableView。我还将其 TableViewCells 子类化为如下所示：

![http://d339vfjsz5zott.cloudfront.net/70_UITableView_Display/UITableView_Preview_Part-2.png](../Images/b586c5ffffad832a66b211c4cdca56cb.png)

现在我只想知道如何单击单元格以打开一个新视图，其中包含另一个包含选项选择的 TableView，并编写所选选项而不是“这是行：%d”行。（一切都嵌入在 NavigationController 中）

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:52:00.190

您可以使用 UItableview 委托

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

您将获得点击事件。在那里，您可以使用 indexPath.row 从用户单击的数据源数组（其中包含您在单元格中显示的数据）中检索字符串。现在您可以使用导航打开（推送）新的视图控制器。

将 indexPath.row 或特定字符串传递给您的下一个视图控制器，以便您可以获取选择了哪个。

# java - 在Android中具有多个editText和微调器的自定义对话框？

> ID：10765476
> 
> 赞同：0
> 
> 时间：2012-05-26T10:30:34.257
> 
> 标签：java, android

我正在尝试将自定义对话框放在单击事件的按钮中，以及在 Android 中具有多个文本视图和微调器的对话框。

怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:34:11.917

嗨检查下面的示例演示应用程序，

[http://android-coding.blogspot.in/2011/04/create-custom-dialog-with-edittext.html](http://android-coding.blogspot.in/2011/04/create-custom-dialog-with-edittext.html)

根据您的需要创建布局，例如多个编辑文本或微调器，

1）在清单中创建活动并设置对话框的主题。

或者

2）创建类并使用对话框和使用进行扩展。

您根据需要控制设置布局。

# c# - 在水晶报表中更改列字体样式运行时

> ID：10765477
> 
> 赞同：0
> 
> 时间：2012-05-26T10:30:35.560
> 
> 标签：c#, dynamic, fonts, crystal-reports, dataset

我的项目中有水晶报表，它是使用数据集设计的（具有列名 inLanguage1、inLanguage2 的表）。

该数据集填充了来自数据库中一个表的数据，每个表有两列以两种不同的语言存储名称。

例如：表 1 有印地语和英语的名称。表 2 有英文和印地文名称。表 3 有卡纳达语和印地语名称。

当我使用我的前端 (C#) 在这些表中存储名称时，我已经为文本框设置了相应的字体类型，以便以该语言键入名称。（对于印地语，我已将文本框字体设置为已安装在系统上的“Devnagri”，因此将显示在文本框属性资源管理器中。对于英语，字体类型为 Arial）。该数据存储在相应的表中。

现在，当我在运行时获取表数据并填充数据集时，它工作正常。但是，我还想为要打印的报告中的列设置字体。

例如：对于 table1，在 Crystal 报表中，我想将“Devnagri”设置为第一列的字体，将第二列的字体设置为“Arial”，如果数据集填充了来自 table2 的数据，我想将报表第一列的字体属性设置为“ Arial”和“Devnagri”的第二列

因此，请建议一种在 C# 中为 Crystal 报表进行此字体设置的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-23T06:17:27.887

**在 Crystal Report 运行时更改字体样式、字体大小和字体使用以下代码，这将正常运行：**

您可以根据您的条件使用 TextObject 或 FieldObject。这里使用的是 TextObject。

```
TextObject MyText = (TextObject)Repotrdocumentobject.ReportDefinition.ReportObjects[i];

MyText.ApplyFont(new Font("Arial", 11f,FontStyle.Bold)); 
```

这里 **i**是 Crystal Report 中 TextObject 的数量，**11f**是字体大小

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T15:34:36.523

[这里](http://msdn.microsoft.com/en-us/library/ms225739%28v=vs.90%29.aspx)有一个链接。它显示了如何更改 a 的字体`FieldObject`。

例如：

```
FieldObject field;
field = Report.ReportDefinition.ReportObjects[reportObjectName] as FieldObject;
field.ApplyFont(YourFont); 
```

由于字体的名称存储在表中，您应该能够从`FontFamily`存储在那里的字体中制作字体。

我假设您使用标准`TextObjects`来显示值，因此在这种情况下，这应该适合您。

# php - 实时域上的 Facebook PHP SDK session_start() 错误，但本地主机上没有错误（两者都使用相同的 WordPress 环境）

> ID：10765478
> 
> 赞同：-1
> 
> 时间：2012-05-26T10:30:59.050
> 
> 标签：php, facebook

我面临一个我现在几个小时都无法修复的错误。本地主机上的一切看起来都很好。但是在我的实时域上，我收到了会话错误。这里有一些信息可以帮助你给我关于错误的任何想法。

*   我正在使用 Facebook PHP SDK
*   我在本地主机和实时域上都使用 WordPress 最新版本
*   我在本地主机和实时域上使用相同的文件，应用程序的精确副本
*   在 localhost 上，不返回任何错误。
*   在实时域上，我收到该错误：

    警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /home/vantaget/public_html/wordpress/sofashare/wp-content/themes/sofashare/header.php:6 ) 在第 37 行的 /home/vantaget/public_html/wordpress/sofashare/wp-content/themes/sofashare/lib/facebook/facebook.php

这是我实现 facebook sdk 的方式。

首先我把它放在我的functions.php文件中以检索错误：

```
error_reporting(E_ALL ^ E_NOTICE); 
```

我包括图书馆：

require_once TEMPLATEPATH.'/lib/facebook/facebook.php';

在函数文件中，这是函数：

```
function sofa_include($lib) {
    global $sofa, $user;
    if ($lib == 'facebook') {

    // new facebook call
    $facebook = new Facebook(array(
        'appId'  => $sofa['fbappid'],
        'secret' => $sofa['fbappsecret'],
    ));

    // get facebook user
    $user = $facebook->getUser();

    // get user profile
    if ($user) {
      try {
        $user_profile = $facebook->api('/me');
      } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
      }
    }

?>

<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
    appId: '<?php echo $facebook->getAppID() ?>',
            cookie: true,
            xfbml: true,
            oauth: true
    });
    FB.Event.subscribe('auth.login', function(response) {

    });
    FB.Event.subscribe('auth.logout', function(response) {

    });
};
(function() {
var e = document.createElement('script'); e.async = true;
e.src = document.location.protocol +
'//connect.facebook.net/en_US/all.js';
document.getElementById('fb-root').appendChild(e);
}());
</script>

<?php
    }
} 
```

现在在我的 header.php 文件中，我这样做是为了包含 facebook sdk

```
<?php sofa_include('facebook'); ?> 
```

在 localhost 上一切正常，错误报告设置为 ALL。但是在我的实时域上，我总是收到 session_start 标头发送错误。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:37:09.530

您可能会在会话开始之前输出该 facebook javascript 代码，这会导致您的问题。也许您的本地服务器默认启用了输出缓冲或其他东西，而生产没有

# java - 如何使用 TextChanged 事件？

> ID：10765481
> 
> 赞同：0
> 
> 时间：2012-05-26T10:31:25.270
> 
> 标签：java, swing, jtextcomponent, documentlistener

我有一个文本框，用户在其中输入一个唯一的数字。在他输入一个数字并按 Tab 或 Enter 后。我想编写查询以搜索与该唯一编号匹配的记录。该数字是一个整数。它将是护照号，泛卡号等。如果它在数据库中可用，我想显示该用户的所有信息。

我不想在单击按钮时这样做。

我一直在寻找一些`TextChanged`事件，但我发现 Java 中的替代方法是文档侦听器中的方法。但我不知道如何使用它。同样在设计视图中的 Netbeans 中，它不会向我显示任何关于文本更改的事件。如何使用`Documentlistener`我的`JFrame`/如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T10:33:20.173

在这里，您还可以找到[有关的教程`DocumentListeners`](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)和示例代码。

# powershell - 我应该如何在 Powershell 中创建可重用的“日志”对象？

> ID：10765482
> 
> 赞同：3
> 
> 时间：2012-05-26T10:32:05.200
> 
> 标签：powershell

我是 PowerShell 新手，正在编写我的第一个应用程序。应用程序将检查 Windows 服务的状态，并且（取决于许多因素）可以执行许多操作，例如停止、启动或重新启动它。我需要生成一个日志来显示它做了什么。我想使用模块，以便我的代码可重用且灵活（例如，如果我安排它自动运行，日志将需要通过电子邮件发送或写入文本文件，如果我运行它手动，我希望它输出类似`Write-Host`）。

我的问题是，如何创建日志？例如，在 Java 中，我会使用一个日志类`public void addToLog(String log)`和`public String getLog()`方法，这些方法只处理字符串并将其留给电子邮件/显示等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T14:56:12.853

我有一套相当复杂的脚本来安装我们的平台（依赖于 BizTalk、SQL Server、企业单点登录、IIS、企业库和其他一些东西）。这些脚本启动和停止服务、BizTalk 业务流程、创建或更新数据库等等。我尝试了几件事来记录日志，最后我选择了[log4net](http://logging.apache.org/log4net/)，因为它易于使用和灵活。从 PowerShell 使用它是轻而易举的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:39:05.697

请参阅我几天前在 SO 上提出的类似问题。可能有帮助。我正在使用 ANSWER - [Powershell: Debug in Production / Good Exception handling中提到的相同日志模块](https://stackoverflow.com/q/10676875/763026)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-27T10:03:02.267

如果您需要负责生产的人员的日志，您可以使用专用 Cmdlet 添加您自己的应用程序日志。当我为我的所有脚本创建并使用一个 PowerShell 日志来为负责生产的人员发布执行（信息）和错误（与良好的异常处理相协调）的详细信息时。您可以为一个脚本专用一个日志（因为它存在一个用于 DNS 等的日志）

这是一个例子：

```
# List of logs
Get-EventLog -list

# Creating your own log
New-EventLog -LogName "SlxScripting" -Source "MaSource"

# List of logs
Get-EventLog -list

# Writting in your own log
Write-EventLog -LogName "SlxScripting" -EventId 12 `
               -Message "Mon Message" 
               -Source "MaSource" -EntryType Warning

# Reading in your own log
Get-EventLog -LogName "SlxScripting"  

# Suppressing your log
Remove-EventLog -LogName "SlxScripting" 
```

# php - 汇总 Facebook 帖子并包含应用说明

> ID：10765485
> 
> 赞同：2
> 
> 时间：2012-05-26T10:32:55.870
> 
> 标签：php, facebook, facebook-graph-api, facebook-apps

我注意到 Seesmic 和 TripIt 的帖子经常聚合并显示应用描述 + 图标。这是一个屏幕截图：

![通过 Seesmic API 发布的汇总 Facebook 故事](../Images/81210ba325710770aa4902c748286e25.png)

我正在使用 Graph API 向用户墙发布消息，但我想知道如何显示应用描述。

我也尝试过连续发布一些提要故事，但它们并没有像屏幕截图中那样聚合。任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:43:11.957

我现在正在使用 Facebook 图形 API，我可以确认没有方法可以对这些帖子进行分组。这是 Facebook 最终帮助用户管理信息的事情。

也许如果您尝试频繁地发布多个帖子，Facebook 会将其视为来自同一来源的发展中的新闻活动并将其组合在一起。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:22:35.737

我最近为我们的客户实现了这个。这称为 Facebook 聚合

看这里： [https ://developers.facebook.com/docs/technical-guides/opengraph/defining-an-aggregation/](https://developers.facebook.com/docs/technical-guides/opengraph/defining-an-aggregation/)

# jquery - 比较jquery中的2个ul列表项？

> ID：10765488
> 
> 赞同：0
> 
> 时间：2012-05-26T10:33:38.470
> 
> 标签：jquery

我们如何通过 jquery 比较（通过类比较）2 ul listitems，我可以通过循环来做到这一点，但我想要最好的方法来做到这一点（使用一些 jquery 方法）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:41:39.453

嗨，像这样的人：http: [//jsfiddle.net/AzZHy/](http://jsfiddle.net/AzZHy/)

您将创建一个主列表，然后进行比较，

如果这不是你想要的，请不要投票让我知道。

**jQuery代码**

```
var master = [];

// Identify the master values.
$('ul').first().find('li').each(function(index,value) {
    master.push($(this).text());
});

$('ul:not(:first)').each(function(ulIndex) {
    $(this).find('li').each(function(index) {
        if(master[index] != $(this).text()) {
            $(this).addClass('mismatch');        
        }  
    });
});​ 
```

**html**

```
<ul>
    <li>hulk</li>
    <li>ironman</li>
    <li>bazinga</li>
    <li>thor</li>
    <li>rambo</li>
</ul>
<br />
<ul>
    <li>hulk</li>
    <li>ironman</li>
    <li>Zooyork</li>
    <li>thor</li>
    <li>rambo</li>
</ul>
<br/>

​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:38:00.077

```
var list1 = $(...), list2 = $(...); 
```

要比较长度，请使用`list1.length`和`list2.length`。
要比较元素的文本，最简单的方法可能是将它们存储在数组中：

```
var texts1 = list1.children('li').map(function() { return $(this).text() }).get();
var texts2 = list2.children('li').map(function() { return $(this).text() }).get(); 
```

# javascript - Firefox中`map`的奇怪javascript行为

> ID：10765498
> 
> 赞同：2
> 
> 时间：2012-05-26T10:35:37.470
> 
> 标签：javascript

`map`这是Firefox中该函数的一些奇怪的 javascript 行为。

在 web 应用程序的错误情况下（当 firebug 暂停错误时）在 Firebug 控制台中键入以下内容：

```
["a", "b", "c", "d"].map(function(val, i, arr) {
    return val + " " + i + " " + typeof arr;
}); 
```

产生以下意外结果：

```
["a undefined undefined",
"b undefined undefined", 
"c undefined undefined", 
"d undefined undefined"] 
```

那时，如果我打开另一个空白选项卡并在空白选项卡的 Firebug 控制台中键入相同的语句，它会产生以下预期结果：

```
["a 0 object", 
"b 1 object", 
"c 2 object", 
"d 3 object"] 
```

这意味着，在错误条件下，`map`使用 1 个参数而不是预期的 3 个参数调用回调。

来自 MDN 的引用：（[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map)）

> callback 使用三个参数调用：元素的值、元素的索引和被遍历的 Array 对象。

是因为应用程序强制 Firefox 进入某种模式而导致的意外行为吗？

（我使用的是 Firefox 12.0）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:39:00.513

```
>>> ["a", "b", "c", "d"].map(function(val, i, arr) { return val + " " + i + " " + typeof arr; });
["a 0 object", "b 1 object", "c 2 object", "d 3 object"] 
```

Firefox 12。听起来您有一些 JS 库，可以创建自己的`Array.prototype.map`.

您可以使用 firebug 轻松检查：

```
>>> Array.prototype.map.toString()
"function map() { [native code] }" 
```

如果您没有获得该`[native code]`功能，则您正在用其他东西覆盖该功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T10:39:59.300

听起来您的应用程序中的一些其他代码可能正在覆盖 Array.prototype.map 函数——也许是一个未完全实现的 polyfill？如果您`[].map`在控制台中输入，并且没有显示，`function map() { [native code] }`那么几乎可以肯定是这种情况。

# jquery - jquery - live - ajax - 成功问题

> ID：10765506
> 
> 赞同：0
> 
> 时间：2012-05-26T10:36:25.833
> 
> 标签：jquery

我在 php 文件中有一个表：

```
<table>
for($x=0;$x<$total;$x++) {
  <tr>
    <td><span id="utype-<?=$array[$x]['unique_id']?>">ADMIN</span></td>
    <td><a href="javascript:void(0)" id="changeType" class="<?=$array[$x]['unique_id']?>">Change User Type<a/></td>
  </tr>
}
</table> 
```

js：

```
$(document).ready(function(){

  var curID;

  $('#changeType').live('click', function(){

     curID = $(this).attr('class');

     $.ajax({
              type:'post',
              url:'actions.php?mc=utype',
              data: {
                  did:curID
              },
              success:function(msg) {
                var json = $.parseJSON(msg);
                $('#utype-'+curID).empty().append(json.newType);
                alert('Account changed!');
              },
              error:function (xhr, ajaxOptions, thrownError){
                alert('xhr status: '+xhr.status + '\n Error:'+ thrownError);
              }  
     });
  });
}); 
```

问题：

带有 id utype 的跨度在警报按钮存在时更改，但在单击确定按钮后，跨度值将显示回原始值。

示例：当警报仍然存在时，ADMIN 值更改为 REGULAR，但单击确定按钮后，它返回到 ADMIN。

问题：我想请教一下为什么它会回到原来的值以及如何修复它。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T11:55:18.157

我猜在按“确定”后，您的表格会执行“POST”或刷新。这意味着 php 页面关闭以再次检索数据。

如果是这种情况，那么您没有正确保存 ajax 发布事件之后的值。

查看保存请求并确保 $[array] 中的数据已更改。

# hibernate - EntityListeners 中的 CDI 注入

> ID：10765508
> 
> 赞同：10
> 
> 时间：2012-05-26T10:37:01.073
> 
> 标签：hibernate, jpa-2.0, java-ee-6, cdi, jboss-weld

由于 JPA 2.0 不支持注入 EntityListener（JPA 2.1 将），决定使用 JNDI 查找来获取`BeanManager`并通过它获取登录用户。我定义了一个`EntityListener`类似的：

```
public class MyEntityListener {

    public static BeanManager getBeanManager() {
        try {
            InitialContext initialContext = new InitialContext();
            return (BeanManager) initialContext.lookup("java:comp/BeanManager");
        } catch (NamingException e) {
            e.printStackTrace();
            return null;
        }
    }

    public Object getBeanByName(String name) {
        BeanManager bm = getBeanManager();
        Bean bean = bm.getBeans(name).iterator().next();
        CreationalContext ctx = bm.createCreationalContext(bean);
        return bm.getReference(bean, bean.getClass(), ctx);
    }

    @PrePersist
    @PreUpdate
    public void onPreInsertOrUpdate(MyEntity entity) {
        User loggedInUser = (User) getBeanByName("loggedInUser");
        entity.setUpdatedUser(loggedInUser);
        entity.setUpdatedTimestamp(new Date());
    }
} 
```

用户在会话范围内被管理为：

```
@SessionScoped
public class UserManager implements Serializable {

    private User loggedInUser;

    @Produces
    @Named("loggedInUser")
    public User getLoggedInUser() {
        return loggedInUser;
    }

    // Set the logged in user after successfully login action
} 
```

我想知道这种方法有什么缺点或需要注意的地方。性能吞吐量？当有多个登录用户在他们自己的范围内同时更新实体时会发生什么？
休眠 JPA 2.0
缝焊 CDI
Glassfish 3.1.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:53:55.003

你的方法是正确的。

> 性能吞吐量？

恕我直言，无需担心 - JPA 2.1 将使用等效机制。但是为了安全起见，一定要写一个[真实的测试。](http://arquillian.org/)

> 当有多个登录用户在他们自己的范围内同时更新实体时会发生什么？

所有（非依赖范围的）bean 引用都在内部代理。底层 CDI 实现必须保证正确的分辨率。

# jquery - 仅使用一个 HTTP 请求在 Wordpress 中预加载 100 张图像

> ID：10765511
> 
> 赞同：0
> 
> 时间：2012-05-26T10:37:29.923
> 
> 标签：jquery, wordpress, preload

我有一个 JSON 文件，它引用了我的 Wordpress 主题中显示的动画中使用的大约 300 张图像。在我的 header.php 中，我使用以下 jQuery 在 DOM 加载时预加载所有图像。

```
function preload(images) {
  jQuery(images).each(function () {
    jQuery('<img />').attr('src',this).appendTo('body').css('display','none');
  });
}

jQuery(document).ready(function() {
  preload([
     "<?php bloginfo('template_directory'); ?>/library/images/img001.jpg",
     "<?php bloginfo('template_directory'); ?>/library/images/img002.jpg",
          //about 300 more...
  ]);
}); 
```

问题是图像为 900x400 像素，因此所有 300 个 HTTP 请求大约需要 30 秒才能通过。我想如果我只用一个 HTTP 请求加载图像，我可以减少加载时间。这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:52:29.743

是的，可以使用[精灵](http://css-tricks.com/css-sprites/)（不，不是苏打水）。这是将图像打包成一个大图像的时候。

您可以查看[PHP 的 GD 库](http://php.net/manual/en/book.image.php)来为您生成编译后的图像。当然，提前编译一次，不是每一个请求，否则它会杀死你的服务器。

将其发挥到极致，[您可以将图像作为 base64 字符串发送](http://php.net/manual/en/function.base64-encode.php)。这样，字符串可以在服务器上压缩，并在客户端[使用 LZW 之类的算法](https://stackoverflow.com/a/294421/575527)解压缩。除此之外，您可以[在 transport 上应用 GZIP](http://www.mydigitallife.info/how-to-enable-gzip-compress-on-php-websites/)。

在客户端，您将图像作为一个大图像接收。如果您使用 base64 对它们进行编码，则可以使用[data URI 方案](http://en.wikipedia.org/wiki/Data_URI_scheme)使用 base64 字符串显示图像。

毕竟，您可以使用精灵技术为图像设置动画，每帧移动图像。

* * *

附加提示：

*   使用 Adob​​e Fireworks 之类的压缩图像：

    *   删除未使用的颜色
    *   将质量降低到可接受的程度
    *   使用像 JPG 这样的轻量级格式
*   将动画分成多个部分。这种技术被用在[Google 的母亲节涂鸦](http://www.google.com/logos/2012/mothersday12-hp-s.png)上，动画被分成几部分而不是每帧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:48:05.073

例如，为了完成一个 HTTP 请求，您需要对文件进行 base64_encode 并将它们作为 json_encoded 列表发送。在客户端做类似的事情：

```
jQuery.get('json_list_of_images.php', function(list) {
    for(i in list) {
        $('<img />').attr('src', list[i])
    }
}); 
```

这将使数据量增加 33%，这也意味着您将显示的图像已完全加载到内存中，即 300*900*400*1.33*4 = 0.535100698GB

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:42:09.390

需要 30 秒的原因是因为您尝试加载 300 张图像。再多的优化也不会使这成为一项相当快的任务。你需要重新考虑你的过程。例如，您可以：

1.  加载第一张图片并显示它
2.  在显示第一个图像时开始加载第二个图像
3.  显示第二张图像并对剩余图像重复步骤 2

一次加载 300 张这样的大图像绝对是零需求。

# c# - WCF 服务中的 COM 对象

> ID：10765512
> 
> 赞同：3
> 
> 时间：2012-05-26T10:37:32.263
> 
> 标签：c#, wcf, delphi, com, com-interop

我的 WCF 服务是用 .NET 4.0 编写的，存在第二个或任何其他调用卡住的问题。WCF 服务除了调用一个用 Delphi XE 编写的 COM 对象之外什么也不做。线程模型设置为 Both，服务的 InstanceContextMode 设置为 PerCall。该对象并没有比 BSTR DoRequest(BSTR Request) 多多少。我使用 Marshal.ReleaseComObject，但在一篇文章中读到这不是清理 com 对象的好方法；我也试过没有。

我尝试了以下事情：

*   添加了日志记录以查看 WCF 服务卡在的位置。它在 COM 调用中。
*   添加了一个未处理的异常处理程序，但没有异常。
*   检查 Delphi 对象是否使用静态变量
*   尝试使用 Delphi XE2 进行编译（可能是 delphi com 库中的错误）
*   使用多线程 Delphi 压力测试工具尝试了 Object 以查看问题是否相同，但效果很好。
*   使用 C# 控制台压力测试工具尝试了该对象，并获得了与 WCF 服务中相同的行为。
*   在创建对象、调用和销毁对象周围添加了一个锁定对象。这没有帮助。
*   尝试在 WCF 中创建一个新线程并将线程模型设置为 STA；将 Delphi 对象线程模型设置为 Single。这没有帮助。
*   试图在 COM+ 服务中运行对象；这没有帮助。
*   检查 WCF 限制，设置为 100
*   检查服务的最大连接数并设置为 MaxInt

COM DLL 是 32 位的，所以我的 VStudio 项目设置限制为 x86。我在 Windows 2008 R2 上运行。也许这确实很重要：Delphi COM 对象加载了一个 C++ DLL，这可能不是安全的。

我使用 Reflector + Dennis Bauer FileDisassembler 来反编译生成的 COM Wrapper。我看不出有什么特别之处。

使用 Windebug 似乎并不容易，因为 Delphi 不支持 PDB 文件。

没有想法，请帮助:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:04:11.627

我在 delphi 代码中围绕所有对第三方 dll 的调用添加了一个关键部分。看起来它现在正在工作。这并不能解释 com 对象的行为，但现在它似乎起作用了。

# asp.net - 如何在 SPA（ASP.NET MVC SPA）中处理具有 DEFAULT 值的数据库列

> ID：10765513
> 
> 赞同：0
> 
> 时间：2012-05-26T10:37:53.180
> 
> 标签：asp.net, asp.net-mvc, single-page-application, asp.net-spa

代码第一类：

```
public class Product
{
  [Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]
  public int ProductId{ get; set; }
  [MaxLength(256), Required]
  public string ProductName { get; set; }
  public DateTime CreatedTime { get; set; }
} 
```

在数据库中，我为 CreatedTime 列提供默认值“（getdate（））”，以便数据库在插入操作时为我们生成一个值。

**我的问题**：是否有某种**DataAnnotations** /其他东西可以做以下事情：

1.  可以告诉实体框架（代码优先模式）在建立数据库时包含 CreateTime；
2.  可以告诉 EF 在将新列插入数据库时​​不要包含 CreateTime；
3.  可以告诉 EF 在从数据库中选择时检索包括 CreateTime 在内的所有列。

这样，我可以将客户端中的 CreatedTime 列视为与 ProductId 列相同（即身份列：值只能由数据库生成；插入新列时不包含；选择时将包含...）。

我想现在更清楚了，请原谅我的误解！

院长

# .htaccess - 如何限制网站被索引

> ID：10765516
> 
> 赞同：7
> 
> 时间：2012-05-26T10:38:14.117
> 
> 标签：.htaccess, search, indexing, robots.txt

我知道这个问题被问了很多次，但我想更具体一点。

我有一个开发域并将那里的站点移到一个子文件夹中。让我们说：

```
http://www.example.com/ 
```

到：

```
http://www.example.com/backup 
```

所以我希望子文件夹根本不被搜索引擎索引。我已将 robots.txt 与以下内容放在子文件夹中（我可以将其放在子文件夹中还是必须始终位于根目录，因为我希望根目录的内容对搜索引擎可见）：

```
User-agent: *
Disallow: / 
```

也许我需要替换它并将以下内容放入根目录：

```
User-agent: *
Disallow: /backup 
```

另一件事是，我在某处读到某些机器人不尊重 robots.txt 文件，所以只需将 .htaccess 文件放在 /backup 文件夹中就可以了？

```
Order deny,allow
Deny from all 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T10:43:20.950

这将防止该目录被索引：

```
User-agent: *
Disallow: /backup/ 
```

此外，您的 robots.txt 文件必须放在域的根目录中，因此在这种情况下，该文件将放置在您可以通过访问[http://example.com/robots.txt在浏览器中访问它的位置](http://example.com/robots.txt)

顺便说一句，您可能需要考虑为您的开发站点设置一个子域，例如[http://dev.example.com](http://dev.example.com)。这样做可以让您将开发内容与生产环境完全分开，并确保您的环境更紧密地匹配。

例如，任何指向 JavaScript 文件、CSS、图像或其他资源的绝对路径在从开发到生产的过程中都可能不一样，这可能会导致一些问题。

有关如何配置此文件的更多信息，请参阅[robotstxt.org](http://www.robotstxt.org/robotstxt.html)站点。祝你好运！

最后也是最后一点，[Google 网站管理员工](https://www.google.com/webmasters/tools/home?hl=en)具有一个部分，您可以在其中[查看 robots.txt 文件阻止的内容](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)：

> 要查看 Google 已阻止抓取哪些 URL，请访问 Webmaster Tools 的 Health 部分的 Blocked URLs 页面。

我强烈建议您使用此工具，因为配置不正确的 robots.txt 文件可能会对您网站的性能产生重大影响。

# linux - 如何量化 C 内核的 CUDA 设备的处理权衡？

> ID：10765518
> 
> 赞同：11
> 
> 时间：2012-05-26T10:38:28.033
> 
> 标签：linux, cuda

我最近从 GTX480 升级到了 GTX680，希望增加三倍的内核数量会在我的 CUDA 代码中体现出显着的性能提升。令我惊恐的是，我发现我的内存密集型 CUDA 内核在 GTX680 上运行速度要慢 30%-50%。

我意识到这不是一个严格的编程问题，但它确实直接影响了不同设备上 CUDA 内核的性能。任何人都可以提供一些关于 CUDA 设备规格的见解以及如何使用它们来推断它们在 CUDA C 内核上的性能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T05:09:29.667

不完全是您问题的答案，但一些信息可能有助于理解 GK104（Kepler，GTX680）与 GF110（Fermi，GTX580）的性能：

在 Fermi 上，内核的运行频率是其余逻辑的两倍。在开普勒上，它们以相同的频率运行。如果一个人想要做更多的苹果对苹果与费米相比，这有效地减少了开普勒的核心数量。因此，GK104（开普勒）拥有 1536 / 2 = 768 个“费米等效核心”，仅比 GF110（费米）上的 512 个核心多 50%。

从晶体管数量来看，GF110 有 30 亿个晶体管，而 GK104 有 35 亿个。因此，即使 Kepler 的内核数量是其 3 倍，它的晶体管数量也仅略多一些。所以现在，不仅开普勒的“费米等效核心”比费米多 50%，而且这些核心中的每一个都必须比费米的简单得多。

因此，这两个问题可能解释了为什么许多项目在移植到 Kepler 时会出现放缓。

此外，GK104 是专为显卡制造的 Kepler 版本，经过调整，线程之间的协作比 Fermi 上的慢（因为这种协作对图形来说并不重要）。考虑到上述事实后，任何潜在的潜在性能增益都可能因此而被否定。

还有双精度浮点性能的问题。Tesla 卡中使用的 GF110 版本可以以单精度 1/2 的性能进行双精度浮点运算。该芯片用于显卡时，双精度性能被人为限制在单精度性能的1/8，但这仍然比GK104的1/24双精度性能好很多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:26:11.857

新 Kepler 架构的进步之一是将 1536 个内核分组为 8 个 192 核 SMX，但同时这个内核数量是一个大问题。因为共享内存仍然限制为 48 kb。因此，如果您的应用程序需要大量 SMX 资源，那么您无法在单个 SMX 上并行执行 4 个 warp。您可以分析您的代码以查找 GPU 的实际占用情况。改进应用程序的可能方法：

1.  使用 warp vote 函数而不是共享内存通信；
2.  增加一个花纹块的数量，减少一个花纹块的螺纹数量；
3.  优化全局加载/存储。Kepler 为每个 SMX 提供 32 个加载/存储模块（比 Kepler 上的多两倍）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T00:58:26.677

我正在安装 nvieuw 并使用coolbits 2.0 将您的着色器核心从默认解锁到最高性能。此外，您必须将设备的两个连接器都连接到 1 个显示器，这可以在 nVidia 控制面板屏幕 1/2 和屏幕 2/2 中启用。现在您必须将此屏幕与另一个屏幕克隆，并且 Windows 分辨率配置将屏幕模式设置为扩展桌面。

使用 nVidia 检查器 1.9（BIOS 级驱动程序），您可以通过为应用程序设置配置文件来激活此模式（您需要将应用程序的 exe 文件添加到配置文件中）。现在你的性能几乎翻了一番（注意温度）。

DX11 还具有曲面细分功能，因此您想要覆盖它并缩放您的原始分辨率。您可以通过渲染较低的分辨率（如 960-540P）来实现您的原始分辨率，然后让 3D 管道完成剩下的工作以放大到全高清（在 nv 控制面板桌面大小和位置中）。现在将较低的分辨率缩放到带显示的全屏，并且您可以在运行中以双倍的纹理大小渲染量获得全高清，并且一切都应该可以很好地渲染具有极端 LOD 偏差（细节级别）的 3D 纹理。您的显示器需要自动缩放！

此外，您可以击败 sli 配置计算机。这样，我在 tessmark 中获得的分数高于 3-way sli。像 32X 混合样本这样的高 AA 设置使 al 看起来像 AAA 质量的高清（在 tessmark 和 heavon benchies 中）。endscore 中没有分辨率设置，这表明渲染原始分辨率并不重要！

这应该会给你一些真实的结果，所以请仔细阅读而不是文学。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T11:42:24.200

我认为问题可能在于*流式多处理器*的数量：GTX 480 有 15 个 SM，GTX 680 只有 8 个。

SM 的数量很重要，因为最多 8/16 个块或 1536/2048 个线程（计算能力 2.0/3.0）可以驻留在单个 SM 上。它们共享的资源，例如共享内存和寄存器，可以进一步限制每个 SM 的块数。此外，GTX 680 上每个 SM 的更多内核数只能通过使用[指令级并行性](http://en.wikipedia.org/wiki/Instruction-level_parallelism)来合理利用，即通过流水线处理多个独立操作。

要找出每个 SM 可以同时运行的块数，您可以使用 nVidia 的[CUDA 占用计算器](http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls)电子表格。要查看内核所需的共享内存和寄存器数量，请在编译时添加`-Xptxas –v`到命令行。`nvcc`

# actionscript-3 - 错误 #1009：当 MouseEvent.CLICK 包含在按钮中时，onenterFrameHandler

> ID：10765519
> 
> 赞同：-1
> 
> 时间：2012-05-26T10:38:33.993
> 
> 标签：actionscript-3, flash

使用 MovieClip (root) 制作滑动按钮功能时遇到问题。

```
addEventListener (Event.ENTER_FRAME, onenterFrameHandler); 
```

当给定一个命令按钮时..`addEventListener (MouseEvent.CLICK, fl_ClickToGoToScene_20);`当我单击按钮时，我得到输出

> TypeError：错误＃1009：无法访问空对象引用的属性或方法。在 index_fla::MainTimeline/onenterFrameHandler()

这是我的代码：

```
var myVar:Boolean;
MovieClip(root).addEventListener(Event.ENTER_FRAME,onenterFrameHandler);
MovieClip(root).addEventListener(MouseEvent.CLICK, mouseClickHandler);

function onenterFrameHandler(event:Event):void
{
if (MovieClip(root).mouseY < 500)
    {
      myVar=false;
    }
if (MovieClip(root).mouseY > 500)
    {
       myVar=true;
    }

if (MovieClip(root).mouseX > 1266 && myVar==true)
{
imgbar.nextFrame();
} else {
    imgbar.play();
}
if (MovieClip(root).mouseX < 100 && myVar==true)
{
imgbar.prevFrame();
} else {
    imgbar.play();
}
    if (MovieClip(root).mouseX > 100 && mouseX < 1266 && myVar==true)
    {
        imgbar.stop();
    }
} 
```

在按钮层中，我填写代码来命令我的按钮/电影剪辑；

```
 btn1.addEventListener(MouseEvent.CLICK, fl_ClickToGoToScene);

function fl_ClickToGoToScene(event:MouseEvent):void
{
    MovieClip(this.root).gotoAndPlay(80, "Scene 2");
} 
```

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:50:26.610

在场景“场景 2”中，您的部分或全部影片剪辑不再出现在舞台上。因此， ENTER_FRAME 处理程序无法再找到`imgbar`，这会导致错误。要摆脱它，请`imgbar`像上一个场景一样包含剪辑（具有相同的舞台名称！），或者如果`imgbar`不再存在，则删除 ENTER_FRAME 侦听器：

```
function onenterFrameHandler(event:Event):void
{
    if (!imgbar) root.removeEventListener(Event.ENTER_FRAME,onenterFrameHandler);
     // the rest stays the same
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T18:32:57.360

```
function onenterFrameHandler(event:Event):void
{
    if (!imgbar) root.removeEventListener(Event.ENTER_FRAME,onenterFrameHandler);
     // the rest stays the same
} 
```

是的，我发现它几乎没有修改，感谢您的建议，**weltraumpirat**，这是最终代码：

```
 var myVar:Boolean=false;
    MovieClip(root).addEventListener(Event.ENTER_FRAME,onenterFrameHandler);
    MovieClip(root).addEventListener(MouseEvent.CLICK,fl_ClickToGoToAndStopAtFrame_28);

function onenterFrameHandler(event:Event):void
{
if (MovieClip(root).mouseY < 500)
    {
      myVar=false;
    }
if (MovieClip(root).mouseY > 500)
    {
       myVar=true;
    }

if (MovieClip(root).mouseX > 1266 && myVar==true)
{
imgbar.nextFrame();
} else {
    imgbar.play();
}
if (MovieClip(root).mouseX < 100 && myVar==true)
{
imgbar.prevFrame();
} else {
    imgbar.play();
}
    if (MovieClip(root).mouseX > 100 && mouseX < 1266 && myVar==true)
    {
        imgbar.stop();
    }
    if (!imgbar)root.removeEventListener(Event.ENTER_FRAME,onenterFrameHandler);
}

function fl_ClickToGoToAndStopAtFrame_28(event:MouseEvent):void
{
    MovieClip(root).removeEventListener(Event.ENTER_FRAME, onenterFrameHandler);

} 
```

# cordova - PhoneGap 应用服务器端包含 (SSI)

> ID：10765531
> 
> 赞同：2
> 
> 时间：2012-05-26T10:41:09.593
> 
> 标签：cordova, ssi

我是使用 PhoneGap 的新手，我想知道（因为我相信它基本上充当服务器？）是否可以将服务器端包含与 PhoneGap 一起使用？

我的文件的主要标题和页面的页脚是相同的，因此使用这样的东西是有意义的。但是有可能还是我忽略了另一种方式？

提前感谢您的帮助，

缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:53:38.977

PhoneGap 不充当服务器，它只是提供来自设备文件系统的 html 文件，然后使用 webview 中的 javascript-bridge 连接到它们。所以使用 SSI 是不可能的，但是您可以使用 xmlhttprequest 来做同样的事情来获取内容并将其放入当前页面。这也可以通过不重新加载页面和重新启动 phonegap 桥来节省一些时间。

# android - 在Android下检索视频的方向信息

> ID：10765532
> 
> 赞同：2
> 
> 时间：2012-05-26T10:41:12.700
> 
> 标签：android, video, ffmpeg, orientation

就像`ExifInterface.TAG_ORIENTATION`为 JPEG 工作一样，我如何检索视频的方向信息？

例如我以纵向模式录制视频，视频的方向应该是 90 或 270。

当我以横向模式录制视频时，该值应为 0 或 180。

播放视频时，`MediaPlayer`在 SDK 中始终可以正常工作，但我找不到任何方法来检索此信息。

最后，如果我无法使用 android SDK 获取视频方向，我可以使用 FFMPEG 获取此信息吗？

非常感谢您的帮助~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T17:59:09.427

您可以使用 FFmpeg 执行此操作：

```
$ ffprobe -show_streams input.avi | grep rotate
TAG:rotate=90
$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T10:23:11.727

我发现以下[博客文章](http://xjaphx.wordpress.com/tag/mp3/)展示了如何获取媒体文件的元数据。所有功能都需要 API 级别 >= 10。

# java - Java MP3Player 使用 Javazoom 播放和暂停

> ID：10765538
> 
> 赞同：0
> 
> 时间：2012-05-26T10:42:32.140
> 
> 标签：java, mp3, audio-player

我正在用 Java 制作一个简单的 MP3Player。我已经设法播放了一个 .mp3 文件，但是当我开始播放整个程序时，我会冻结，我无法单击程序中的任何按钮。在我开始播放后，我需要帮助使暂停按钮或任何其他按钮工作。这是我的代码：

```
 import java.awt.*;
    import java.awt.event.ActionEvent;
    import java.awt.event.ActionListener;
    import java.io.InputStream;
    import java.net.URL;
    import javazoom.jl.player.advanced.AdvancedPlayer;
    import javax.swing.*;

    public class MP3Player extends JFrame{

    public MP3Player(){
        JPanel jpBottom = new JPanel();
        JButton btnPlay = new JButton("Play");
        JButton btnPause = new JButton("Pause");

        jpBottom.add(btnPause);
        jpBottom.add(btnPlay);

        Container cp = this.getContentPane();
        BorderLayout bl = new BorderLayout();
        cp.setLayout(bl);
        cp.add(jpBottom, BorderLayout.SOUTH);

        btnPlay.addActionListener(
                new ActionListener() {
                    public void actionPerformed(ActionEvent e) {
                        Play("file:///C://a.mp3");
                    }
                }
        );

        this.setVisible(true);
        this.setSize(250, 100);
        this.setTitle("MP3 Player");
        this.setLocation(100, 100);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public void Play(String path){
        try{
            URL url = new URL(path);
            InputStream in = url.openStream();
            //Player pl = new Player(in);
            //pl.play();
            AdvancedPlayer pl = new AdvancedPlayer(in);

            pl.getPlayBackListener();
            pl.play();             
        }
        catch(Exception e){
            System.out.println("Feil: "+e);
        }
    }

    public static void main(String[] args) {
        MP3Player n = new MP3Player();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T10:50:09.010

`Play()`您应该在单独的线程中调用方法，并且对[Swing 中的 Multithreding](http://java.sun.com/developer/technicalArticles/Threads/swing/)有很好的了解。至少你应该阅读[`SwingUtilities.invokeLater()`](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:07:27.703

> 我需要帮助制作暂停按钮，..

暂停播放器的方法是[`stop()`](http://org.ntnu.no/tdt4100_600/javadoc/javazoom/jl/player/advanced/AdvancedPlayer.html#stop%28%29)。但是该代码创建`AdvancedPlayer`了方法的本地。相反，该类需要声明一个属性并在方法 `AdvancedPlayer`中引用该类属性。`actionPerformed()`

# php - PHP cURL cookie 和保持会话打开

> ID：10765539
> 
> 赞同：0
> 
> 时间：2012-05-26T10:42:44.347
> 
> 标签：php, post, curl

我在使用 cURL（使用 PHP）时遇到了一些问题。基本上我想登录并在网站上执行一些功能。这通常没问题，但是网站会为登录页面生成一个唯一的 URL，并且每次访问登录页面时都会生成一个动态/唯一的 POST url，在该会话期间必须使用该 URL。

因此 - 我目前正在导航到登录页面，然后抓取页面以检索唯一的 POST url（我成功地做到了），然后制定一个 POST 请求并将其发送到唯一的 URL。但它不起作用，我认为问题要么与 cookie 有关，要么与我没有保持会话打开的事实有关......

首先，我不知道为什么没有保存cookie（但是它们仅用于该浏览器会话，也许这可能是原因？）..我创建了一个存储cookie并且有效的测试页面..所以也许这不是我的问题。

其次，我认为我不会让会议保持开放。我打电话给：

`$curl = curl_init();`然后获取唯一的 POST url，然后调用`$ch = curl_init($loginPostUrl);`初始化我的 POST 请求，最后在完成之后

```
curl_close($ch);
curl_close($curl); 
```

但是，我认为这不会在发出发布请求时保持初始会话打开（因此我检索到的 POST url 无效..）

有人可以解释如何在同一会话中执行这些请求吗？

抱歉-我的解释很差，如果人们不理解，我会尝试澄清。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:08:58.863

如果您使用 cURL 访问该页面，cookie 将不会存储在您的浏览器中。这是正常的：脚本在服务器端执行请求，这与浏览器处理 cookie 的方式无关。

为了实现您想要的，您可以使用 cURL 的功能将 cookie 保存在一个文件中，您可以稍后将其与您的请求一起发送。要创建或使用此文件，请执行以下操作：（您要保存 cookie 的文件的路径在`curl_setopt ($ch, CURLOPT_COOKIEJAR, $cookieJar);`哪里）。`$cookieJar`

并将 cookie 与您的请求一起发送，请执行以下操作：

```
curl_setopt ($ch, CURLOPT_COOKIEFILE, $cookieJar); 
```

我希望这回答了你的问题。

# facebook - 使用没有对象的动作

> ID：10765540
> 
> 赞同：0
> 
> 时间：2012-05-26T10:42:49.810
> 
> 标签：facebook, action

这会破坏行动的全部目的，但我拥有的是一个在线食品菜单应用程序，我想做的就是`username`在`app_name (restaurant name)`. 通过一个动作，我可以发布`username`订购的`cheeseburger`at`app_name`但这只是开始变得令人毛骨悚然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:52:14.813

您可以将操作创建为“地点”，将对象创建为“订单”

# php - MySQL 数据库唯一字段（不是表唯一）

> ID：10765543
> 
> 赞同：0
> 
> 时间：2012-05-26T10:43:27.140
> 
> 标签：php, mysql, field, unique

我建立了一个数据库，并为不同种类的项目提供了大约 8 个不同的表。我这样做是因为每个表都是一个类别，每个项目都有不同的字段，所以我无法将它们全部设为 1 个表。我遇到的问题是我需要 itemID 字段在所有表中都是唯一的。不仅仅是每张桌子都是独一无二的。

例如，如果管理员在 1 个表中添加项目，则该项目的 itemID 不能与不同表中的另一个项目重复，否则会给我带来问题。请帮我正确设置。我可以直接在数据库中执行此操作吗？还是我需要制作一个 php 脚本来检查项目编号是否已经存在？

我希望我解释得对。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:59:54.920

您可以生成一个唯一 ID（如 GUID）并将其用作您的密钥（或作为备用唯一密钥）。或者有一个名为 say Entities 的表，其中有一个唯一的 id，然后向它添加一个外键。想法是，您插入实体，取回您的 id，然后使用它插入子表中。

打赌你不会再犯这个错误了。:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:56:03.673

创建一个表来保存全局唯一字段，这将是父表。

使所有其他全局唯一字段外键指向新表（字段），这些将是子表。

在插入时，请确保在插入子表之前始终将新值插入父表（否则会产生完整性违规）。

在更新时，请确保您始终只更新父表中的唯一字段，而不是子表中的唯一字段。

对子表中的外键添加进一步的唯一约束，使它们不能指向相同的父表值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:12:39.160

最简单的方法是将每个 PK 转换为使用[GUID](http://en.wikipedia.org/wiki/Guid)。[Jeff Atwood](http://www.codinghorror.com/blog/2007/03/primary-keys-ids-versus-guids.html)有一篇很好的文章讨论了 ID 与 GUID 的相对优点。MySQL 中甚至还有一个生成[UUID](http://dev.mysql.com/doc/refman/5.1/en/miscellaneous-functions.html#function_uuid)的函数。警告，我从未使用过此功能，我知道它在复制时确实存在一些问题，尽管我相信这些问题已在最近的版本中得到修复。

实现此目的的另一种方法是使用单独的表来控制实体本身并使用自动增量来保持 ID 的唯一性。然后，您的每个单独的表都将引用该表。就保持数据完整性的应用程序逻辑而言，这有点复杂，但这是可能的。

或者，您可以根据第二个选项拥有主表和另一个表，其中包含在不同类别之间变化的参数的键/值对。如果额外参数都是主要实体信息的次要参数（不同类别之间没有变化），这可能是一个不错的选择。

哪个选项最适合您实际上取决于您的数据模型和用例的结构和语义（即您最常访问数据的方式）。

这里有更多关于[将这种继承结构映射到关系数据库的信息](http://www.agiledata.org/essays/mappingObjects.html)。当然，如果您愿意在 MySQL 之外寻找，那么有各种 NoSQL 数据库更适合这种情况。

# javascript - 未定义统计信息

> ID：10765544
> 
> 赞同：2
> 
> 时间：2012-05-26T10:43:46.203
> 
> 标签：javascript, jquery

此代码使用参数加载 php 文件的内容：在线并命名并每 0.2 秒动态打印一次，整个代码有效，但它说“stats”未在 Internet Explorer 中定义，我不知道为什么。帮帮我，伙计们

```
function updateStats(stat)
{
    var stat = ["online","name"];

   var stats = "";

 if (stat==undefined)
{
document.write("is undefined");
}
    var url = "online.php";

    $.each(stat, function(i, key){
       $.post(url, {stats: key}, function(data) { 
          $("#" + key).html(data);       
       });
    });
} 

setInterval('updateStats("updateStats")', 200); //  200 milliseconds = 0.2 seconds 
```

**这是更新的代码，但仍然说未定义统计信息**

```
function updateStats(stat)
{

var stat = ["online","money"];

if (typeof stat == "undefined")
{
document.write("stat is undefined");
}
    var url = "online.php";

    $.each(stat, function(i, key){
       $.post(url, {stats: key}, function(data) { // stats to stat
          $("#" + key).html(data);       
       });
    });
} 

setInterval(function(){
  updateStats("updateStats");
}, 1000);

if (typeof stats == "undefined")
{
document.write("stats is undefined");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:46:26.637

改变：

```
setInterval('updateStats("updateStats")', 200); 
```

到：

```
setInterval(function(){
  updateStats("updateStats");
}, 200); 
```

还要检查是否有东西`undefined`，而不是：

```
if (stat==undefined) 
```

采用：

```
if (typeof stat == "undefined") 
```

* * *

同样正如@Felix Kling 所指出的，您正在`stat`通过函数传递变量：

```
updateStats(stat) 
```

并且稍后在该函数内部创建它：

```
var stat = ["online","name"]; 
```

这很奇怪，你应该修改你的代码来解决这个问题。

# c# - C#中推文的推荐算法

> ID：10765546
> 
> 赞同：2
> 
> 时间：2012-05-26T10:44:28.000
> 
> 标签：c#, .net, machine-learning, prediction

我正在寻找一种算法/推荐引擎来根据推文内容的评级“推荐”推文：

从包含 1000 条评级（1 到 5）条推文的数据集中，根据来自另一个数据集的评级推文推荐推文，例如 ... 10 000 000 条推文。

我们正在寻找的是已经在 C#/.net 上实现的东西，我们查看了 Aforge，但我们不确定哪种算法最适合我们的目的。

我们还查看了谷歌预测引擎，但它是付费的，我们这样做只是为了好玩。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T14:48:27.910

您正在寻找**协同过滤**算法系列。[在这里](https://stackoverflow.com/questions/737247/looking-for-collective-intelligence-net-c-sharp-resources)，您可以找到 C# 实现的几个选项。其中有[SlopeOne](http://www.cnblogs.com/kuber/articles/SlopeOne_CSharp.html)算法的实现——非常简单，但仍然非常有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-16T19:56:08.373

似乎[Apache Mahout 推荐框架](http://mahout.apache.org/users/recommender/recommender-documentation.html)非常适合您的任务 - Mahout 是一个成熟的、可用于生产的可扩展解决方案，可用于此类任务。如果您需要很好地介绍这个引擎，“Mahout in Action”一书可能会有所帮助。

尽管 Mahout 推荐引擎是 Java 库，但现在可以使用其名为[NReco Recommender的完整 C# 端口](http://www.nrecosite.com/recommender_net.aspx)

# javascript - iOS uiwebview 在加载整个 html 文件之前触发了 finishLoad 事件

> ID：10765552
> 
> 赞同：2
> 
> 时间：2012-05-26T10:46:40.523
> 
> 标签：javascript, iphone, objective-c, ios, xcode

我在 uiwebview 上加载静态 html 文件，当 webViewDidFinishLoad 时，我插入以下 javascript 以获取 div 中包含的数据。

```
NSString *body = [self.webView1 stringByEvaluatingJavaScriptFromString:
                              @"document.getElementById('social').innerHTML"];

NSLog(@"received data: %@", body); 
```

一切似乎都正常工作，但有时 div 是空的！假设 div 总是被填充，因为 div 是静态的，我认为 webViewDidFinishLoad 事件在整个页面加载之前被触发，然后 javascript 会查找尚未准备好的 div。可能的？如果没有，有什么建议吗？如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T22:19:23.107

是的，我注意到有时 webViewDidFinishLoad 在你认为它应该被解雇之前就被解雇了。我不记得我脑海中的细节，但可能是涉及重定向的时候。

当它被调用时，您可以检查页面是否仍在加载：

```
if (webView.loading)
    return; 
```

或者你可以使用一个javascript函数来注册一个事件监听器，当dom已经加载，当它使用location.href技术触发你的webViewShouldStartLoad时，使用自定义方案来通知你的代码dom已经完成加载。

# wpf - 使用 MVVM 将数据上下文绑定到用户控件

> ID：10765554
> 
> 赞同：1
> 
> 时间：2012-05-26T10:46:57.763
> 
> 标签：wpf, wpf-controls

我有一个模型

```
 public class PersonModel : INotifyPropertyChanged
    { 
        private string _firstname;
        public string FirstName 
        { 
            get {return _firstname; }
            set { _firstname = value; RaisePropertyChanged("FirstName"); } 
        }

        private string _lastname;
        public string LastName
        {
            get { return _lastname; }
            set { _lastname = value; RaisePropertyChanged("LastName"); }
        } 

        public string FullName 
        {
            get { return string.Format("{0} {1}", FirstName, LastName); } 
        }

        protected void RaisePropertyChanged(string propertyName)
        {
            var handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(propertyName));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    } 
```

我有一个视图模型：

```
 public class PersonViewModel
    {
        public ObservableCollection<PersonModel> Person { get; set; }
        public PersonViewModel()
        {
            Person = CookPersonData();
        }

        internal static ObservableCollection<PersonModel> CookPersonData()
        {
            ObservableCollection<PersonModel> persons = new ObservableCollection<PersonModel>();
            persons.Add(new PersonModel{ FirstName="Raj", LastName="kumar" });
            return persons;
        }
    } 
```

用户控件是

```
<UserControl x:Class="WpfApplication1.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:WpfApplication1"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.DataContext>
        <local:PersonViewModel></local:PersonViewModel>
    </UserControl.DataContext>
    <Grid>      
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>
        </Grid.RowDefinitions>        
        <TextBlock Grid.Row="0" Text="FirstName"></TextBlock>
        <TextBox Text="{Binding FirstName,Mode=TwoWay}" Name="txtFirstName" Margin="115,0,0,106" DataContext="{Binding Path=Person}" Background="#FFF0F0F0" />
        <TextBlock Grid.Row="1" Text="FirstName"></TextBlock>
        <TextBox Grid.Row="1" Text="{Binding LastName,Mode=TwoWay}" Name="txtLastName" Margin="115,0,0,110" DataContext="{Binding Path=Person}" Background="#FFF0F0F0" />
    </Grid>
</UserControl> 
```

我需要重新绑定没有发生的数据上下文

```
can you suggest what is the problem? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:55:09.130

ViewModel 没有实现 INotifyPropertyChanged，因此当您设置集合时，视图不会收到有关此更改的通知。

一般来说，我建议不要使用这种设置：您正在混合模型和视图模型，这将在模型的视图中创建依赖关系。虽然它现在可能在未来的版本中工作，但它可能会成为一个问题，而且它违反了 MVVM 模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T10:58:21.657

更改此代码：

```
public class PersonViewModel : INotifyPropertyChanged
   {
       public ObservableCollection<PersonModel> _person = new ObservableCollection<PersonModel>();

       public ObservableCollection<PersonModel> Person
       {
           get { return _person; }
           set { _person = value; RaisePropertyChanged("Person"); }
       }

       public PersonViewModel()
       {
           UpdateView = new DelegateCommand(this.OnUpdateView, this.CanUpdateView);

           var tmp = CookPersonData();
           Person.Clear();

           foreach (var item in tmp)
           {
               Person.Add(item);
           }
       }

       internal static ObservableCollection<PersonModel> CookPersonData()
       {
           ObservableCollection<PersonModel> persons = new ObservableCollection<PersonModel>();
           persons.Add(new PersonModel { FirstName = "Raj", LastName = "kumar" });
           return persons;
       }

       internal static ObservableCollection<PersonModel> CookPersonData2()
       {
           ObservableCollection<PersonModel> persons = new ObservableCollection<PersonModel>();
           persons.Add(new PersonModel { FirstName = "Raj2", LastName = "kumar2" });
           return persons;
       }

       public ICommand UpdateView { get; private set; } 
       private void OnUpdateView()
       {
           var tmp = CookPersonData2();
           Person.Clear();

           foreach (var item in tmp)
           {
               Person.Add(item);
           }
       }
       private bool CanUpdateView()
       {
           return true;
       }

       protected void RaisePropertyChanged(string propertyName)
       {
           var handler = PropertyChanged;
           if (handler != null)
           {
               handler(this, new PropertyChangedEventArgs(propertyName));
           }
       }

       public event PropertyChangedEventHandler PropertyChanged;
   } 
```

和 XAML 文件：

```
 <Window.DataContext>
        <local:PersonViewModel />
    </Window.DataContext>
    <StackPanel>
        <Grid>
        <Grid.RowDefinitions>
            <RowDefinition></RowDefinition>
            <RowDefinition></RowDefinition>

        </Grid.RowDefinitions>
        <TextBlock Grid.Row="0" Text="FirstName"></TextBlock>
        <TextBox Text="{Binding Person[0].FirstName,Mode=TwoWay}" Name="txtFirstName" Margin="115,0,0,106"  Background="#FFF0F0F0" />
        <TextBlock Grid.Row="1" Text="FirstName"></TextBlock>
        <TextBox Grid.Row="1" Text="{Binding Person[0].LastName,Mode=TwoWay}" Name="txtLastName" Margin="115,0,0,110" Background="#FFF0F0F0" />

    </Grid>
        <Button Content="Update" Command="{Binding UpdateView}" />
    </StackPanel> 
```

# git - 处理 git 中重叠更改的建议？

> ID：10765559
> 
> 赞同：1
> 
> 时间：2012-05-26T10:48:07.280
> 
> 标签：git, merge-conflict-resolution, pre-commit

我对 git repo 中的某些代码进行了两次更改，但我想为每个更改单独提交。这些更改*并不*冲突，但它们确实重叠——也就是说，它们进行独立的更改，有时碰巧在同一条线上。这意味着这`git add --patch`行不通。

此类更改的一个示例可能是在所有逗号后添加空格以符合编码标准，并通过在函数前面加上字符串来命名空间。

是否有任何与 git 相关的智能方法来处理这种冲突，或者是从头开始并撤消其中一个更改的唯一选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:38:49.517

您可以使用`git add --patch`它，但您需要进行一些手动编辑。当您看到包含重叠更改的块时，选择`e`（手动编辑当前块）将允许您对已提交的内容进行更改。

[这样做有一些风险，在 git-add(1) 手册页的 Editing Patches 部分](http://www.kernel.org/pub/software/scm/git/docs/v1.7.10/git-add.html#_editing_patches)有更多关于你应该避免的信息。

# javascript - Javascript，无法解析 XML 子节点

> ID：10765560
> 
> 赞同：0
> 
> 时间：2012-05-26T10:48:10.580
> 
> 标签：javascript, xml

在我的 Javascript 代码中解析 xml 响应时我遇到了一些麻烦（使用 extjs 4，但我认为这无关紧要）。

xml 响应是这样的：

```
<response>
  <id>9</id>
  <time>2012-05-24 14:22:44</time>
  <name>user</name>
  <message>message</message>
  <p2pchat>
    <requestor>user1</requestor>
    <requested>user2</requested>
    <time>2012-05-26 12:13:28</time>
    <message>msg</message>
  </p2pchat>
</response> 
```

我在解析 id、时间、名称和消息等 1 级元素时没有问题，但我的 js 代码无法访问更深层次的元素。代码是：

```
var response = xmlHttpGetMessages.responseText;
response = xmlHttpGetMessages.responseXML.documentElement;
idArray = response.getElementsByTagName("id");
nameArray = response.getElementsByTagName("name");
timeArray = response.getElementsByTagName("time");
messageArray = response.getElementsByTagName("message");

requestorsArray = response.getElementsByTagName("p2pchat/requestor");
requestedsArray = response.getElementsByTagName("p2pchat/requested");
timep2pArray = response.getElementsByTagName("p2pchat/time");
messagep2pArray = response.getElementsByTagName("p2pchat/message"); 
```

执行此代码后，最后四个数组的长度始终为 0，我的 xml 响应中没有任何内容。我在 google 上搜索了一种解析 xml 树中内部元素的方法，但在 10 个不同的页面中，我发现了近 10 种不同的 sintax，似乎没有一个对我有用..有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:01:40.230

谷歌上几个小时的数据挖掘给了我解决方案，我把它贴在这里，所以如果有人遇到同样的问题并发现这篇文章有我使用的解决方案：

```
var xmlp2pchat = response.getElementsByTagName("p2pchat");

var requestorsArray = Array();
var requestedsArray = Array();
var timep2pArray = Array();
var messagep2pArray = Array();

for(var i=0;i<xmlp2pchat.length;i++) {
  var x = xmlp2pchat[i].getElementsByTagName("requestor");
  var y = xmlp2pchat[i].getElementsByTagName("requested");
  var z = xmlp2pchat[i].getElementsByTagName("time");
  var t = xmlp2pchat[i].getElementsByTagName("message");

  for(var j=0;j<x.length;j++) {
    requestorsArray.push(x[j]);
    requestedsArray.push(y[j]);
    timep2pArray.push(z[j]);
    messagep2pArray.push(t[j]);
  }

} 
```

然后我用它

```
 var whatever = requestorsArray[i].firstChild.data 
```

# javascript - 如何设置keylistener以隐藏最上面的yui面板

> ID：10765561
> 
> 赞同：0
> 
> 时间：2012-05-26T10:48:24.937
> 
> 标签：javascript, yui

我有两个或多个 YUI 面板相互重叠。我想关闭最上面的面板，当我按下退出键时。

我怎么能在 YUI 的上下文中做到这一点？

1.  我已经尝试过这个 YUI 示例[http://developer.yahoo.com/yui/examples/container/keylistener.html](http://developer.yahoo.com/yui/examples/container/keylistener.html)

但是在按下退出键时，它会关闭所有面板。

1.  我也尝试过使用 OverlayManager 和覆盖的 z-index 属性，但有时最上层面板的 z-index 小于下层面板的 z-index。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:46:32.487

面板在转义时隐藏，因为这是默认的小部件设置，请参阅[http://yuilibrary.com/yui/docs/api/classes/Panel.html#attr_hideOn](http://yuilibrary.com/yui/docs/api/classes/Panel.html#attr_hideOn)

与文档所说的不同，触发事件的节点不是小部件的边界框，而是文档节点，请参见[http://yuilibrary.com/yui/docs/api/files/widget-autohide_js_Widget-Autohide.js。 html#l57](http://yuilibrary.com/yui/docs/api/files/widget-autohide_js_Widget-Autohide.js.html#l57)

尝试通过将小部件的边界框真正指定为节点来覆盖该`hideOn`属性。

像这样的东西应该工作：

```
var panel = new Y.Panel({...});
panel.set('hideOn', [{eventName: 'key', keyCode: 'esc', node: panel.get('boundingBox')}]); 
```

我确信它可以用来禁用转义，方法是将它从`hideOn`列表中排除。

# javascript - 使用 Labjs 我收到“$ 未定义”错误，但 js 仍然有效，不知道为什么:(

> ID：10765565
> 
> 赞同：2
> 
> 时间：2012-05-26T10:48:53.470
> 
> 标签：javascript, jquery, labjs

我正在使用 LABjs 来实现一些并行的 js 加载优势。

但是，出于某种奇怪的原因，我在调试控制台中收到“$ 未定义”的错误。

我的代码如下：

```
<script>
$LAB.script("http://use.typekit.com/blah.js").script("/assets/js/libs/jquery-1.5.1.min.js").script("/assets/js/libs/basic-jquery-slider.min.js").wait().script("/assets/js/libs/modernizr-1.7.min.js").script("/assets/js/libs/jquery.watermarkinput.js").wait().script("/assets/js/libs/jquery-ui-1.8.14.custom.min.js").wait().script("/assets/js/effects.js").wait(function(){}); 
```

在我的 effects.js 中有。

```
try{Typekit.load();}catch(e){}
$('#banner').bjqs({
'width' : 980,
'height' : 212,
'showMarkers' : false,
'showControls' : false,
'centerMarkers' : false
}); 
```

一切正常，但我收到上述错误。我不明白为什么，jquery 对象应该在那里（并且必须在一切正常的情况下）那么为什么会出现错误？

有任何想法吗？我确定我正确使用了 labjs，但我认为这个错误让 IE7 感到不安 :(

我可能应该在后面的代码中添加一个 $(document).ready ？但这似乎让labjs感到不安。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T19:19:57.250

试试这个：

```
<script>
$LAB
.script("http://use.typekit.com/blah.js")
.script("/assets/js/libs/jquery-1.5.1.min.js").wait() // <---- ADD THIS .wait()
.script("/assets/js/libs/basic-jquery-slider.min.js").wait()
.script("/assets/js/libs/modernizr-1.7.min.js")
.script("/assets/js/libs/jquery.watermarkinput.js").wait()
.script("/assets/js/libs/jquery-ui-1.8.14.custom.min.js").wait()
.script("/assets/js/effects.js").wait(function(){});
</script> 
```

其他一些注意事项：

1.  删除最后的 empty/noop .wait() 函数，不再需要它。
2.  LABjs不应该加载modernizr ...您应该根据IIRC所说的文档加载它，它应该位于`<script>`文档顶部的普通标签中。
3.  我的猜测是`.wait()`你在这个链中的一些 ' 是不必要的。例如，我的猜测是在“jquery-slider”和“jquery-watermark”`script()`调用之后不需要它们，因为我敢打赌它们不相互依赖，因此可以以任何 ASAP 顺序运行，因为只要他们确保在 jQuery 完成后运行（**这就是我在片段中添加注释以添加`.wait()`调用的原因！**）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T07:53:26.967

我刚刚意识到隐藏在页脚的包含中是对我的 effects.js 文件的另一个调用。但这是在普通的脚本标签中。这可以解释为什么它在运行时出现错误，然后在被调用两次时工作，一次在 labjs 内，一次不在。真是个白痴：（感谢大家的尝试！对不起！

# php - 在 echo << 中调用 php 函数 我已经搜索了很多但仍然没有机会，有没有办法在 echo HTML 中调用 php 函数？ 我也试过这个，但没有奏效。 its function: its function: ... HTML; ?> 函数在 html 之外工作。 我得到了答案；我应该将继承属性指定为； 继承="CompanyDisplay.jsPlumb.jsPlumb.jsPlumb.jsPlumb_jsPlumb_Default2" phphtml 4 4 回答 4 This answer is useful 3 你需要做： its function: {$z} ... HTML; ?> 或者你不能使用heredoc： [HTML PARTS..] its function: ... 于 2012-05-26T10:57:01.410 回答 This answer is useful 1 没有。您可以照常插入变量，因此您需要事先计算。 于 2012-05-26T10:51:11.860 回答 This answer is useful 0 没有。结果需要事先计算。只有变量被解析 于 2012-05-26T10:54:41.737 回答 This answer is useful 0 不评估回显文本。要解释“字符串”代码，您需要eval，尽管它是一个非常不推荐使用的命令，因为它很危险。 更好的选择是将这些函数调用的结果连接到 HTML。 于 2012-05-26T10:52:12.623 回答 Related 1 actionscript-3 - Actionscript3：鸭子的倒计时 0 nullpointerexception - 如何处理elasticsearch中的空指针异常 1 .htaccess - .htaccess 不带文件扩展名的重定向 URL 2 c# - 读取树形菜单 Xml C# 1 c++ - 检查是否在地图 c++ 中找到一个键并获取它 2 javascript - 谷歌地图：覆盖点未显示 3 javascript - 单击复选框获取下一个 td 的内容 0 .net - 使用 POST 与 GET 时 .NET ScriptService 序列化的区别？ 1 salesforce - 如何捕获绑定到 VisualForce 输入的 setter 中引发的异常？ 0 wordpress - Buddypress - 组导航/重定向到论坛（再次） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10765567
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php, html

我已经搜索了很多但仍然没有机会，有没有办法在 echo HTML 中调用 php 函数？

我也试过这个，但没有奏效。

```
<?php

echo <<<HTML

[HTML PARTS..]

<td colspan="2">its function: <? $z = func($x); echo $z; ?> </td>

...

HTML;

?> 
```

函数在 html 之外工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:57:01.410

你需要做：

```
<?php
$z = func($x);
echo <<<HTML

[HTML PARTS..]

<td colspan="2">its function: {$z} </td>

...

HTML;

?> 
```

或者你不能使用heredoc：

```
<?php
// your php code
?>

[HTML PARTS..]

<td colspan="2">its function: <? $z = func($x); echo $z; ?> </td>

...

<?php
// your php code
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:51:11.860

没有。您可以照常插入变量，因此您需要事先计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T10:54:41.737

没有。结果需要事先计算。只有变量被解析

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T10:52:12.623

不评估回显文本。要解释“字符串”代码，您需要[eval](http://php.net/manual/en/function.eval.php)，尽管它是一个非常不推荐使用的命令，因为它很危险。

更好的选择是将这些函数调用的结果连接到 HTML。

# android - 当手机倒置时指南针会吓坏

> ID：10765574
> 
> 赞同：0
> 
> 时间：2012-05-26T10:49:56.277
> 
> 标签：android, android-sensors, digital-compass

我一直在测试 Android 上的传感器数据，当手机屏幕指向重力（倒置）时，我注意到了奇怪的行为。当我从`TYPE_ORIENTATION`传感器方位角获得数据时，值错误，微小的变化会导致重大变化。它是否与欧拉的旋转表示和数值奇点有关？即使手机倒置，是否有任何解决方法来获得正确的罗盘方位角值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T20:03:02.007

看起来这是一种正常行为，并且与称为[磁倾角](http://en.wikipedia.org/wiki/Magnetic_dip)的最后一个 z 轴分量有关。x 轴分量是典型的指南针显示并指向北极。X 和 Y 分量远小于 Z 分量，这就是为什么当设备旋转时，该分量会投影到设备 x 和 y 轴上，从而产生错误的结果。

# php - 当facebook注销并且数据保留在php中时注销不会重定向

> ID：10765575
> 
> 赞同：0
> 
> 时间：2012-05-26T10:49:59.400
> 
> 标签：php, facebook, redirect

我在我的本地主机页面上使用`facebook-php-sdk`（**[github](https://github.com/facebook/php-sdk)**）进行 facebook 登录，当我注销时，页面没有重定向..

在同一页面上，我可以在数组中看到我的个人资料信息，即使在我按下注销之后，页面上的数据也应该是空的，但它会显示所有信息。

我使用了下面的代码，但它没有重定向

```
$logoutUrl = $facebook->getLogoutUrl(array('next' => 'http://google.com'));

<?php if ($user): ?>
    <a href="<?php echo $logoutUrl; ?>">Logout</a>
<?php else: ?>
    <div>
    Login using OAuth 2.0 handled by the PHP SDK:
    <a href="<?php echo $loginUrl; ?>">Login with Facebook</a>
    </div>
<?php endif ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:53:19.960

对我来说，使用 PHP SDK 成功注销的唯一方法是：将注销按钮重定向到一个函数并执行以下操作

```
private function do_facebook_logout() {
    // Get an instance of the Facebook class
    $facebook = $this->facebook_instance_factory();
    // Destroy the session so that no Facebook data is held
    $facebook->destroySession();
    // Get the logout URL from the Facebook Class
    $logout = $facebook->getLogoutUrl();
    // Redirect the user to the logout url, facebook will redirect him to our page
    wp_redirect( $logout );
} 
```

在取消设置 facebook 会话后，我实际上重定向了用户。请记住，如果您在 Facebook 类的实例中以编程方式设置访问令牌，您也必须使令牌无效

# c# - 查找单词的正则表达式

> ID：10765582
> 
> 赞同：1
> 
> 时间：2012-05-26T10:51:00.320
> 
> 标签：c#, asp.net, regex, string

我有一长串字符作为输入，我想计算该字符串中的单词数。我怎样才能通过正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:02:02.613

您可以创建一个表达式`\w+`，并使用正则表达式来枚举匹配项，如下所示：

```
var s = "Quick brown fox jumps over lazy dog";
foreach (var t in new Regex("\\w+").Matches(s)) {
    Console.WriteLine(t);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T10:57:39.207

您可以简单地做到这一点（如果您不关心计数，并且单个字符也可以作为单词）

```
 int CountOfWords = StringOf.Split(new char[] { ' ', '\n' }, 
                              StringSplitOptions.RemoveEmptyEntries).Length; 
```

将其拆分为一个数组，不计算空条目，然后获取该长度。您还可以定义您认为与您的文字不同的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T14:16:40.687

您可以使用以下代码计算字符串中的单词数

```
 str = "CSharp split test";
        char[] splitchar = { ' ' };
        strArr = str.Split(splitchar);
        int Count = strArr.Length; 
```

# c++ - 以相反顺序排列的对的优先级队列

> ID：10765586
> 
> 赞同：13
> 
> 时间：2012-05-26T10:51:17.540
> 
> 标签：c++, priority-queue

我想做这样的事情：

```
priority_queue< pair<int, int>, vector<int>, greater<int> > Q; 
```

如果我要比较的类型是 ，这很好用`int`，即：

```
priority_queue< int, vector<int>, greater<int> > Q; 
```

但是，显然对于`pair<int, int>`，无法将队列中的对与标准 进行比较`>`。我在想我该怎么办？我将如何实现重载`>`，或者是否有另一种方法可以创建一个优先级队列，其中最小`pair.second`的队列位于队列顶部？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-26T10:54:45.260

你试过这个吗？

```
typedef pair<int, int> P;
priority_queue< P, vector<P>, greater<P> > Q; 
```

这将给出正常`operator<`for的相反顺序`pair<int, int>`，它将从最小的`first`平局开始，并以最小的`second`.

如果你想按最小的`second`第一个和`first`第二个（！）排序，那么你需要一个新的排序函子：

```
struct Order
{
    bool operator()(P const& a, P const& b) const
    {
        return a.second < b.second || a.second == b.second && a.first < b.first;
    }
} 
```

然后使用：

```
priority_queue< P, vector<P>, Order > Q; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:54:21.660

据我所知，您应该创建自己的域类而不是`pair<int, int>`在这里使用。然后你可以随心所欲地超载`>`。

# c# - 在 C# 中比较一个 2D 和一个 1D 数组？

> ID：10765587
> 
> 赞同：-3
> 
> 时间：2012-05-26T10:51:25.497
> 
> 标签：c#

我只想编写用于比较一维数组和二维数组的代码......我正在编写一个编译器，并希望比较一个包含我的代码的一维数组和我在其中制作符号表的其他二维数组。我已经编写了代码，但它不起作用。

```
for (int x = 0; x < symboltable1.Length; x++)
{
    for (int y = 0; y < symboltable1.Length; y++)
    {
        for (int z = 0; z < text.Length; z++)
        {
            if (symboltable1[x,y] == text[z])
                listBox2.Items.Add(text[z]);
            else
                MessageBox.Show("poor");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T10:56:35.100

我认为您的错误可能在于检查数组长度。
尝试这个：

```
for (int x = 0; x < symboltable1.GetLength(0); x++)
{
    for (int y = 0; y < symboltable1.GetLength(1); y++)
    {
        for (int z = 0; z < text.Length; z++)
        {
            if (symboltable1[x,y] == text[z])
                listBox2.Items.Add(text[z]);
            else
                MessageBox.Show("poor");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:02:30.827

您的方法太慢了 O(n*m*l) （其中**l**是文本的长度，**n** & **m**是符号表的尺寸。）

将符号表转换为排序索引表将为您提供 O(l*log(n*m))，而使用哈希表则几乎为 O(l)。

我实现了这三种方法只是为了好玩：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace test
{
    class Program
    {
        class IndexElement:IComparable<IndexElement>
        {
            public string value;
            public int x;
            public int y;
            public IndexElement(string v,int x,int y)
            {
                this.value = v;
                this.x = x;
                this.y = y;
            }

            public int CompareTo(IndexElement other)
            {
                return value.CompareTo(other.value);
            }
        }

        struct Position
        {
            public int x;
            public int y;
            public Position(int x, int y)
            {
                this.x = x;
                this.y = y;
            }
        }
        static void Main(string[] args)
        {
            string[,] symbols = new string[,] { { "if", "else" }, { "for", "foreach" }, { "while", "do" } };
            string[] text = new string[] { "for", "int", "in", "if", "then" };
            Dictionary<string, Position> dictionary = BuildDict(symbols);
            IndexElement[] index = BuildIndex(symbols);
            Console.WriteLine("Brute:");
            foreach (string s in CompareUsingBrute(text, symbols))
            {
                Console.WriteLine(s);
            }
            Console.WriteLine("Dict:");
            foreach (string s in CompareUsingIndex(text, dictionary))
            {
                Console.WriteLine(s);
            }
            Console.WriteLine("Indexing:");
            foreach (string s in CompareUsingDictionary(text, index))
            {
                Console.WriteLine(s);
            }
            Console.ReadKey();
        }

        private static List<string> CompareUsingBrute(string[] text, string[,] symbols)
        {
            List<string> res = new List<string>();
            for (int x = 0; x < symbols.GetLength(0); x++)
            {
                for (int y = 0; y < symbols.GetLength(1); y++)
                {
                    for (int z = 0; z < text.Length; z++)
                    {
                        if (symbols[x, y] == text[z])
                            res.Add(text[z]);                        
                    }
                }
            }
            return res;

        }

        private static List<string> CompareUsingDictionary(string[] text, IndexElement[] index)
        {
            List<string> res = new List<string>();
            foreach (string s in text)
            {
                if (Array.BinarySearch<IndexElement>(index, new IndexElement(s, 0, 0)) >= 0)
                {
                    res.Add(s);
                }
            }
            return res;
        }

        private static IndexElement[] BuildIndex(string[,] symbols)
        {
            IndexElement[] res = new IndexElement[symbols.Length];
            int index = 0;
            for (int i = 0; i < symbols.GetLength(0); i++)
            {
                for (int j = 0; j < symbols.GetLength(1); j++)
                {
                    res[index] = new IndexElement(symbols[i, j], i, j);
                    index++;
                }

            }
            Array.Sort(res);
            return res;
        }

        private static List<string> CompareUsingIndex(string[] text, Dictionary<string, Position> dictionary)
        {
            List<string> res = new List<string>();
            foreach (string s in text)
            {
                Position p;
                if (dictionary.TryGetValue(s,out p))
                {
                    res.Add(s);
                }
            }
            return res;
        }

        private static Dictionary<string, Position> BuildDict(string[,] symbols)
        {
            Dictionary<string, Position> res = new Dictionary<string, Position>();
            for (int i = 0; i < symbols.GetLength(0); i++)
            {
                for (int j = 0; j < symbols.GetLength(1); j++)
                {
                    res.Add(symbols[i, j], new Position(i, j));
                }
            }
            return res;
        }

    }
} 
```

# java - 了解 Scanner 中的 useDelimiter：为什么我得到空白令牌？

> ID：10765597
> 
> 赞同：4
> 
> 时间：2012-05-26T10:52:33.253
> 
> 标签：java, parsing

我正在使用带分隔符的扫描仪，我遇到了一个我想了解的奇怪行为。

我正在使用这个程序：

```
 Scanner sc = new Scanner("Aller à : Navigation, rechercher");
    sc.useDelimiter("\\s+|\\s*\\p{Punct}+\\s*");
    String word="";
    while(sc.hasNext()){
        word = sc.next();
        System.out.println(word);
    } 
```

输出是：

```
Aller
à

Navigation
rechercher 
```

所以首先我不明白为什么我得到一个空白令牌，[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)说：

> 根据分隔模式的类型，可能会返回空标记。例如，模式“\s+”将不返回空标记，因为它匹配分隔符的多个实例。定界模式“\s”可能会返回空标记，因为它一次只传递一个空格。

我正在使用`\\s+`为什么它返回一个空白令牌？

然后我想了解关于正则表达式的另一件事。如果我使用“反转”正则表达式更改分隔符：

```
 sc.useDelimiter("\\s*\\p{Punct}+\\s*|\\s+"); 
```

输出是正确的，我得到：

```
Aller
à
Navigation
rechercher 
```

***为什么它会起作用？***

编辑 ：

在这种情况下：

```
 Scanner sc = new Scanner("(23 ou 24 minutes pour les épisodes avec introduction) (approx.)1");
    sc.useDelimiter("\\s*\\p{Punct}+\\s*|\\s+"); //second regex 
```

`introduction`我在和之间还有一个空白标记`approx`。有可能避免吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:13:27.840

我有一种感觉，您在有空格后跟标点符号的地方导致两个分隔符捕获。为什么不简单地使用`[\\s\\p{Punct}]+`？

此正则表达式`\\s+|\\p{Punct}+`将首先捕获空白并将其吞下，然后将捕获下一个分隔符作为标点符号。这将是两个相邻的分隔符，中间没有任何内容（空标记）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T19:44:21.927

我也碰巧遇到了 Scanner 类的空令牌问题。我认为必须通过用括号括起来并将**+**附加到组来使分隔符模式变得**贪婪。**我使用的模式看起来像这样

 **```
"((\\s)+|(\\\\r\\\\n)+|\\p{Punct}+)+". 
```**

# javascript - WebView + addJavascriptInterface + javascript = 问题，webcore 崩溃

> ID：10765598
> 
> 赞同：2
> 
> 时间：2012-05-26T10:52:38.087
> 
> 标签：javascript, android, webview

我使用**WebView** + **addJavascriptInterface**从 WebView 控件中显示的 html 页面控制我的应用程序。它在某些 API 版本上运行良好，但例如在模拟器中的 API 10 上它的行为是错误的，在**WebViewCoreThread中会出现****崩溃**。一些真实设备上的用户也报告过。

 **我的 html 看起来像这样：

```
<html>
<head>
<script type="text/javascript">
function hideId(id){
   callback.hide(id);
}
</script>
</head>
<body>
  <input type="button" value="Hide" onclick="hideId('1');">
</body>
</html> 
```

这显示了一个隐藏按钮，它应该回调我的 Java 代码，如下所示：

```
private class JS{
   public void hide(String id){
      ... some code
   }
}

WebView wv = ...
wv.addJavascriptInterface(new JS(), "callback");
wv.loadURL(...); 
```

它在某些设备上运行良好，但在提到的 API10 模拟器上，按下 html 中的按钮后，logcat 显示错误，并且整个 WebView 变得不适，不再有控件对触摸做出反应，并且我的 JS.hide 函数没有被调用。

```
W/dalvikvm(1790): JNI WARNING: jarray 0xb6e1bfd0 points to non-array object (Ljava/lang/String;)
I/dalvikvm(1790): "WebViewCoreThread" prio=5 tid=10 NATIVE
I/dalvikvm(1790):   | group="main" sCount=0 dsCount=0 obj=0xb6e4f8a0 self=0x8a9c568
I/dalvikvm(1790):   | sysTid=1800 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=145332280
I/dalvikvm(1790):   at android.webkit.WebViewCore.nativeTouchUp(Native Method)
I/dalvikvm(1790):   at android.webkit.WebViewCore.nativeTouchUp(Native Method)
I/dalvikvm(1790):   at android.webkit.WebViewCore.access$3300(WebViewCore.java:53)
I/dalvikvm(1790):   at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1158)
I/dalvikvm(1790):   at android.os.Handler.dispatchMessage(Handler.java:99)
I/dalvikvm(1790):   at android.os.Looper.loop(Looper.java:130)
I/dalvikvm(1790):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
I/dalvikvm(1790):   at java.lang.Thread.run(Thread.java:1019)
E/dalvikvm(1790): VM aborting 
```

知道这有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:29:13.803

我自己也遇到了这个问题，我发现这是 android 2.3 的一个已知问题。 [http://code.google.com/p/android/issues/detail?id=12987](http://code.google.com/p/android/issues/detail?id=12987)**

# objective-c - MD5 没有为 iOS 中的在线文件提供正确的哈希值

> ID：10765601
> 
> 赞同：1
> 
> 时间：2012-05-26T10:53:13.623
> 
> 标签：objective-c, ios, xcode, md5

我真的不知道这怎么可能，但我正在检查两个文件的 MD5 哈希值，所以我可以确定它们是否相同。

问题是本地文件（存储在应用程序包中的文件）给出了正确的值，而存储在在线服务器上的文件给出了错误的值。但是，如果我在 Mac 上的终端中或通过某些互联网工具检查在线文件的 md5，它会给出正确的值。

这怎么可能？

这基本上就是我正在做的事情。

```
NSData *currencyData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.iworldtip.com/appl/texts/files/CountryCurrency.plist"]];
NSData *localCurrencyData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"CountryCurrency" ofType:@"plist"]];

NSString *currencyDataHashValue = [currencyData md5];
NSString *localCurrencyDataHashValue = [localCurrencyData md5];

if (![currencyDataHashValue isEqual:localCurrencyDataHashValue]) {
            NSLog(@"Saving new version of currency plist\n\n%@ - %@", currencyDataHashValue, localCurrencyDataHashValue);
...
... 
```

这是输出：

![在此处输入图像描述](../Images/61cdf7a0b84158978c6afb9645db06c7.png)

* * *

这是我正在使用的 md5 扩展名（在网上某处找到）：

.h 文件：

```
@interface NSString (MyExtensions)
- (NSString *) md5;
@end

@interface NSData (MyExtensions)
- (NSString*)md5;
@end 
```

.m 文件：

```
#import "md5Extension.h"
#import <CommonCrypto/CommonDigest.h>

@implementation NSString (MyExtensions)
- (NSString *) md5
{
    const char *cStr = [self UTF8String];
    unsigned char result[16];
    CC_MD5( cStr, strlen(cStr), result ); // This is the md5 call
    return [NSString stringWithFormat:
            @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
            result[0], result[1], result[2], result[3], 
            result[4], result[5], result[6], result[7],
            result[8], result[9], result[10], result[11],
            result[12], result[13], result[14], result[15]
            ];  
}
@end

@implementation NSData (MyExtensions)
- (NSString*)md5
{
    unsigned char result[16];
    CC_MD5( self.bytes, self.length, result ); // This is the md5 call
    return [NSString stringWithFormat:
            @"%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x",
            result[0], result[1], result[2], result[3], 
            result[4], result[5], result[6], result[7],
            result[8], result[9], result[10], result[11],
            result[12], result[13], result[14], result[15]
            ];  
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-27T11:20:41.887

所以，我发现问题出在哪里。

首先，我很笨。我正在查看输出并认为问题出在远程文件上，但是本地文件给出了错误的哈希！

接下来是，这是由 Xcode 在编译项目时自动执行的转换引起的——它将 XML Plist 文件转换为 Binary Plist 文件。因此它具有不同的 MD5 哈希值。

所以最终的解决方案是将这些远程文件转换为 Binary Plists，一切都像魅力一样！

* * *

PS：我发现了一个很棒的编辑 Plist 的工具——它叫做[PlistEdit Pro](http://www.fatcatsoftware.com/plisteditpro/)。它可以用 Plist 完成所有你能想象到的事情 - 将它们转换为二进制，反之亦然......（我知道它可以通过 plutil 在终端中完成，但这是一个更方便的解决方案）

# javascript - Browsers\Javascript - 任何知道用户当前IP的方式

> ID：10765602
> 
> 赞同：2
> 
> 时间：2012-05-26T10:53:16.010
> 
> 标签：javascript, browser, cross-browser, ip

我正在使用 Kango 框架编写浏览器扩展。

作为其功能的一部分，它必须知道用户所在的位置。我已经用 API 覆盖了那部分，但是所述 API 需要一个 IP 地址作为参数之一。

有没有办法在内部查看它是什么（或上次是什么），或者我是否必须单独调用另一个服务（我想是一个简单的 php 页面）来确定 ip 是什么？

位置建立后，分机将再次拨打电话。我应该对 3 个单独的电话感到厌烦吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:04:03.223

Javascript：

```
$.ajax({
        type: "POST",
        url: "getIP.php",
        data: "",
        dataType: 'json',
        success: function(ret) {
           alert("ip = " + ret);
        },
        error: function (xhr, ajaxOptions, thrownError) {
            console.error(xhr.responseText);
            console.error(thrownError);
        } 
    }); 
```

PHP：

```
if (isset($_SERVER['HTTP_X_FORWARDED_FOR']))
    $IP = $_SERVER['HTTP_X_FORWARDED_FOR'];
else
    $IP = $_SERVER['REMOTE_ADDR'];
echo json_encode($IP); 
```

*旁注：我在这里使用 jQuery，如果您不知道如何使用，请阅读此处的文档：http: [//docs.jquery.com/Main_Page](http://docs.jquery.com/Main_Page)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:55:52.270

是的，出于安全原因，您无法通过 Javascript 知道用户的 IP，因此您必须依赖服务器端服务。

# jsp - jsp页面中的动态内容表

> ID：10765607
> 
> 赞同：0
> 
> 时间：2012-05-26T10:53:57.897
> 
> 标签：jsp

我的 jsp 页面有问题（我是新手）。在一个jsp页面中，我写了一个从数据库中读取的表。我在这里写页面的代码：

```
<%@page import="java.sql.SQLException"%>
<%@page import="java.lang.String"%>
<%@page import="java.sql.Connection"%>
<%@page import="java.sql.Statement"%>
<%@page import="java.sql.ResultSet"%>
<%@page import="java.util.Date "%>
<%@page import="jord.ConnectionManager "%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<% 
    String sql= "select numelencotrasm,dtelencotrasm \n"+
                "from fimand \n"+
                "where eser=2012 \n"+
                "group by numelencotrasm,dtelencotrasm \n"+
                "order by numelencotrasm";
    ConnectionManager manager = new ConnectionManager();
    Connection conn = null;
    Statement stmt = null;
    ResultSet rs = null;
    try{
        conn = manager.getConnection();
        stmt = conn.createStatement();
        rs = stmt.executeQuery(sql);
    }catch(SQLException ex){
        rs.close();
        conn.close();
        rs=null;
        conn=null;
        response.sendRedirect("../index.jsp");
    }
%>
<form id="tabella1" name="tabella1">
    <input name="numelencotrasm" type="hidden" value=""/>
    <input name="dtelencotrasm" type="hidden" value=""/>
    <table width="275px" cellspacing="0" cellpadding="1" border="1">
        <tr>
            <td class="TabellaTitolo" width="50%">
                Numero Distinta
            </td>
            <td class="TabellaTitolo" width="50%">
                Data Distinta
            </td>
            <td class="TabellaTitolo" width="50%">
                #
            </td>
        </tr>
        <%
        try{
            while(rs.next()){
        %>
        <tr>
            <td>
                <input type="text" value="<% out.print(rs.getInt(1)); %>"/>
            </td>
            <td>
                <input type="text" value="<% out.print(rs.getDate(2)); %>"/>
            </td>
            <td>
                <a href="#" onclick="javascript:setValue('<% out.print(rs.getInt(1)); %>','<% out.print(rs.getDate(2));%>');">
                    Click-me
                </a>
            </td>
        </tr>
        <%
            }
        }catch(Exception e){
            response.sendRedirect("../index.jsp");
        }
        %>
    </table>
</form>
<script language="Javascript">

    function setValue(num, dt){
        document.tabella1.numelencotrasm.value=num;
        document.tabella1.dtelencotrasm.value=dt;
        alert(document.tabella1.numelencotrasm.value); //test
        alert(document.tabella1.dtelencotrasm.value);//test
    }
</script> 
```

好吧..我现在要创建一个新的html-table 点击行“#”从数据库中读取数据并传递所选行的值。

我为基本的英语道歉！：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T16:11:05.850

您需要在上面的 jsp 代码中进行以下更改：

1.  将操作 URL 添加到您的表单。
2.  在调用 setValue() 之后调用提交表单。

在动作jsp中：

1.  抓取上面页面提交的参数，
2.  进一步处理它们以获取数据库中的详细数据，
3.  构建一个 html 表格，并将其填充以显示。

这是一个简单的解决方案，认为您刚刚开始学习。

**更新 1**：

> *I want to display an iframe that contains the date table2 on click of the table1.*

For this you need following changes in your current JSP.

1.  Define action URL as another JSP. It shall be something like `action="targetPage.jsp"`.
2.  Define target attribute value for the form as your `iframe`. It shall be like `target="nameOfTheIframe"`.
3.  Define and place an `iframe` in the page as appropriately. It shall be similar to `<iframe name="targetIframe" src="about:blank"></iframe>`.
4.  In the JavaScript `setValue` function write instructions to submit the form.
5.  In your other JSP, receive parameters submitted by this form, process them and display result.

# android - Android - 将旋转的位图绘制到画布上的特定位置

> ID：10765608
> 
> 赞同：6
> 
> 时间：2012-05-26T10:54:07.273
> 
> 标签：android, canvas, matrix, bitmap, rotation

好吧，也许我在这里遗漏了一些东西，但我被困了几个小时。我制作了一个应用程序，用户在图片上绘制尺寸线。现在我还想绘制一些选择点，以显示该线已被选中。这些点是一个特定的位图，必须在行尾（箭头之后）并根据箭头进行旋转。我创建了一个扩展 View 的类 DrawSelectionPoint，我可以用这样的方式旋转位图：

```
selectionPoint = BitmapFactory.decodeResource(context.getResources(),
                    R.drawable.selectionpoint);
Matrix matrix = new Matrix();
        matrix.postRotate((float)Math.toDegrees(angle));        
canvas.drawBitmap(selectionPoint, matrix, null); 
```

（其中角度是线的角度）这种方式我的位图以我想要的方式旋转，但它被绘制在点 0,0（屏幕的左上角）。

如果我使用类似的东西

```
canvas.save();

canvas.rotate();

canvas.drawBitmap(selectionPoint, x, y, null);

canvas.restore(); 
```

然后我发现在我想要的确切位置绘制位图太难了（因为我在旋转的画布上绘制，然后我旋转回来）。我尝试了一些欧几里得旋转变换，但我没有运气。

有没有办法应用矩阵旋转并给出我需要绘制位图的点？先感谢您！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-26T14:11:21.643

假设您要绘制位图*中心*位于 (px,py) 画布坐标处的位图。有一个成员变量

```
Matrix matrix = new Matrix(); 
```

在你的 onDraw 中：

```
matrix.reset();
matrix.postTranslate(-bitmap.getWidth() / 2, -bitmap.getHeight() / 2); // Centers image
matrix.postRotate(angle);
matrix.postTranslate(px, py);
canvas.drawBitmap(bitmap, matrix, null); 
```

# javascript - 从 JavaScript 中的 2 个数组中获取不匹配的值？

> ID：10765610
> 
> 赞同：2
> 
> 时间：2012-05-26T10:54:10.240
> 
> 标签：javascript, jquery

假设我们有 2 个数组说：

```
 A [] => 1 2 3 4 5

 B [] => 1 2 7 4 5 
```

在这种情况下，jQuery 中是否有任何方法可以提供 2 个数组的不匹配值：

```
 Result [] => 3 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T10:59:14.750

答案：没有。

解决方案：使用标准的 javascript 循环。

```
var nomatches = [];
for (var i=Math.min(A.length, B.length); i-->0;) {
   if (A[i]!=B[i]) {
       nomatches.push(A[i]);
       nomatches.push(B[i]);
   }
}
// do what you want with remaining items if A.length != B.length 
```

如果按照 Rory 的假设，您不想匹配数组而是逻辑集，则可以这样做：

```
 var nomatches = [];
var setA = {};
var setB = {};
for (var i=A.length; i-->0;) setA[A[i]]=1;
for (var i=B.length; i-->0;) setB[B[i]]=1;
for (var i=A.length; i-->0;) {
    if (!setB[A[i]]) nomatches.push(A[i]);
}
for (var i=B.length; i-->0;) {
    if (!setA[V[i]]) nomatches.push(B[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T11:17:26.940

**在这里工作演示：** [http](http://jsfiddle.net/mbKfT/) : //jsfiddle.net/mbKfT/

**好读** [http://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

这用于`inArray`检查元素是否存在，如果不将其添加到`intersect`数组中。

其余演示将消除任何疑问:)

**代码**

```
var a1 = [1,2,3,4,5];
var a2 = [1,2,7,4,5];
var intersect = [];

$.each(a1, function(i, a1val) {

    if ($.inArray(a1val, a2) === -1) {   
        intersect.push(a1val);
    }
});

$.each(a2, function(i, a1val) {

    if ($.inArray(a1val, a1) === -1) {           
        intersect.push(a1val);
    }
});
$("div").text(intersect);
alert(intersect + " -- " + matches);

​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T11:11:39.890

[jQuery.inArray()](http://api.jquery.com/jQuery.inArray/)会有所帮助：

```
var a = [1,2,3,4,5], b=[1,2,7,4,5];

var ret = 
a.filter(function(el) {
  return $.inArray(el, b) === -1;
}).concat(
b.filter(function(el) {
  return $.inArray(el, a) === -1;    
})
);
console.log(ret); 
```

[演示](http://jsfiddle.net/ATAuq/)。_

PS：或者你可以只使用`b.indexOf(el) === -1`，那么你就不再需要 jQuery 了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T11:14:52.773

```
var nomatch = [], Bcopy = B.slice(0);
for (var i = 0, j; i < A.length; i++) {
    j = Bcopy.indexOf(A[i]);
    if (j === -1) nomatch.push(A[i]);
    else Bcopy.splice(j, 1);
}
nomatch.push.apply(nomatch, Bcopy); 
```

笔记：

1.  此代码假定`A`和中的项目`B`是唯一的。
2.  `indexOf`for 数组必须在 IE8 和以前的版本中模拟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T11:04:27.180

```
function getUnique(A, B){
  var res = [];
  $.grep(A, function(element) {
    if($.inArray(element, B) == -1) res.push(element)        
  });
  $.grep(B, function(element) {
    if($.inArray(element, A) == -1) res.push(element);    
  });
  return res;
} 
```

利用：

```
var A = [1,2,3,4,5],
    B = [1,2,3,5,7];

getUnique(A, B); 
```

**[演示](http://jsfiddle.net/ZjqyU/1/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-26T11:46:28.810

这是现代浏览器的另一种解决方案（单行，是的！）：

```
var a = [1, 2, 3, 4, 5];
var b = [1, 2, 7, 4, 5];

var result = a.concat(b).filter(function(el, i) {
    return (i < a.length ? b : a).indexOf(el) == -1;
}); 
```

**演示：http:** [//jsfiddle.net/6Na36/](http://jsfiddle.net/6Na36/)

* * *

如果您还希望保留索引检查，则可以使用此变体：

```
var a = [1, 2, 3, 4, 5];
var b = [1, 2, 7, 4, 5];

var result = a.concat(b).filter(function(el, i, c) {
    return el != c[i < a.length ? i + a.length : i - a.length];
}); 
```

**演示：http:** [//jsfiddle.net/6Na36/1/](http://jsfiddle.net/6Na36/1/)

请注意，这两种变体都能成功处理不同大小的数组。

# c++ - 重载 [] 运算符和复制构造函数不起作用

> ID：10765619
> 
> 赞同：0
> 
> 时间：2012-05-26T10:55:38.413
> 
> 标签：c++, overloading, destructor

我在重载方面遇到了一个巨大的问题，`[]`我完全按照示例中所示使用它，但它不起作用，编译器甚至看不到它。

我得到错误：

> 'std::cout << * moj 中的 'operator<<' 不匹配

第二个问题是，即使我使用复制构造，如果我删除原始对象，复制的对象也会消失。但是现在当我添加析构程序时，它就会崩溃。

```
C:\Documents and Settings\Duke\Moje dokumenty\MaciekK\String\main.cpp|90|error: no match for 'operator<<' in 'std::cout << * moj'|
#include <iostream>
#include <cstdio>
#include <stdio.h>
#include <cstring>
using namespace std;

class String{
public:
 char* napis;
 int dlugosc;

    char & operator[](int el) {return napis[el];}
    const char & operator[](int el) const {return napis[el];}
    String(char* napis){
    this->napis = napis;
    this->dlugosc = this->length();
 }

String(const String& obiekt){

    int wrt = obiekt.dlugosc*sizeof(char);
    //cout<<"before memcpy"<<endl;
    memcpy(this->napis,obiekt.napis,wrt);

    //cout<<"after memcpy"<<endl;
    this->dlugosc = wrt/sizeof(char);
}

~String(){
    delete[] this->napis;
}

int length(){
    int i = 0;
    while(napis[i] != '\0'){
        i++;
    }
    return i;
}

void show(){
    cout<<napis<<" dlugosc = "<<dlugosc<<endl;
}

 };

int main()
{

String* moj = new String("Ala ma kota");
 //  cout<< moj[0] <<endl;  // I GETT ERROR NO MATH FOR OPERATO<< IN STD:: COUTN<< * MOJ
String* moj2  = new String(*moj);

moj->show();
delete moj;
moj2->show();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:04:19.893

你的问题是：

在内存分配函数未返回的任何地址上调用解除分配函数是**未定义的行为**。你的代码中有一个未定义的行为，因为你从不使用 destructor() 分配内存，`new []`而是调用`delete []`destructor( `delete[] this->napis;`)。

您没有正确实现构造函数和复制构造函数。
您需要在构造函数和复制构造函数中分配动态内存。目前，您不在构造函数中分配内存，而在复制构造函数中，您执行的是**浅拷贝**而不是深拷贝。

你应该有：

```
String(char* napis)
{
    //I put 20 as size just for demonstration, You should use appropriate size here.
    this->napis = new char[20];   <-------------- This is Important!
    memcpy(this->napis,napis,12);
    this->dlugosc = this->length();
}

String(const String& obiekt)
{

    int wrt = obiekt.dlugosc*sizeof(char);
    this->napis = new char[wrt];  <-------------- This is Important!
    memcpy(this->napis,obiekt.napis,wrt);
    this->dlugosc = wrt/sizeof(char);
} 
```

此外，您需要在程序结束时调用`delete`以`moj2`避免内存泄漏。

```
delete moj2; 
```

**[这](http://ideone.com/LkyOn)**是您的程序的在线版本，经过上述修改，它工作得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:02:23.577

问题是那`moj`是一个`String *`，而不是一个`String`。所以`moj[0]`不调用你的`operator <<`，它只是取消引用指针。

# php - 防止通过浏览器直接访问 inde.php

> ID：10765621
> 
> 赞同：0
> 
> 时间：2012-05-26T10:55:57.650
> 
> 标签：php, .htaccess, joomla

我正在制作具有年龄验证网关的酒精网站，该网站称为 default.html，它位于我的网站空间的根目录中。我使用了 Joomla，它有两个索引文件，一个来自根文件夹，另一个来自我正在使用的模板。现在我知道我可以使用 .htaccess 文件限制直接访问，但我的问题是我应该将它放在根文件夹还是模板文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T10:58:38.417

如果它在`template`文件夹中，则仅在访问该文件夹时才考虑它。所以这不是正确的地方。

将它放在根文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T21:41:02.410

Joomla 的模型使用站点根目录中的 index.php 文件，但如果您阻止该文件，该站点将无法运行。

您是否查看过[Joomla](http://extensions.joomla.org/)上的[内容限制扩展！](http://extensions.joomla.org/extensions/access-a-security/site-access/content-restriction)[扩展目录](http://extensions.joomla.org/)？

**编辑** 我只是看了一下，发现了这个-[年龄锁定](http://extensions.joomla.org/extensions/access-a-security/site-access/content-restriction/12583)-似乎可以满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T16:49:26.287

我在网关页面中设置了一个cookie，然后检查它是否存在于模板的索引文件中。因此，一旦您登陆网关，cookie 就会被设置。

这是设置cookie的代码

```
var theDate = new Date(); var oneYearLater = new Date(
theDate.getTime() + 31536000000       );    var expiryDate =
oneYearLater.toGMTString(); document.cookie =    "myTusker=tuskerUser;
expires=expiryDate; 
```

然后在模板索引文件中检查是否设置了 cookie，如果没有，它会重定向到名为 default.php 的网关页面。下面是代码片段。

```
$cookies = $_COOKIE;

if(!array_key_exists('myTusker', $cookies)) {

header("Location:http://zmbiz.net/tpfnew/default.php");
} 
```

# linux - dentry 和 i-node 的数量

> ID：10765623
> 
> 赞同：2
> 
> 时间：2012-05-26T10:56:06.493
> 
> 标签：linux, filesystems, ext3

我在考试中有以下问题：

*在 ext3 文件系统中，dentries 的数量高于 i 节点的数量。*

我不得不用真假来回答并解释。

我的答案：

*这是错误的，因为dentries 是目录之间的链接，基本上所有东西都是一个i-node（甚至是一个目录）所以#i-nodes > #dentries。*

但是我没有考虑到 ext3 文件系统。有什么我错过的或者我的答案是正确的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-21T12:16:50.150

由于以下原因，我们可能会有更多的 dentries：

1.  所有硬链接都有唯一的目录，但指向同一个 inode。
2.  返回 ENOENT（文件或目录不存在）的查找会创建一个 dentry 并将其 inode 指针标记为 NULL（技术上称为负 dentry）。这有助于加快否定查找，即在不存在的路径上查找。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T10:58:20.020

但是你可以有硬链接。因此，您可以合理地让许多dentries 指向同一个inode。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-21T12:27:30.027

在完全卸载的文件系统中，dentries 的数量*总是*高于 inode 的数量。

考虑：每个 inode（不包括通过打开的文件句柄保持活动状态的未链接文件 - 这些文件在干净卸载中或在未干净卸载后的恢复期间被清除）至少有一个与之关联的目录项。每个目录 inode 至少有两个 - 来自其父（或它自己`..`的根）的链接和来自`.`. 此外，对于每个子目录的目录，目录都有一个与之关联的附加目录`..`。

因此，绝对最小值，dentry 比 inode 多一个（对于只有根目录的 FS）。其他目录和硬链接进一步扩大了这一点。

# php - 附加参数表

> ID：10765626
> 
> 赞同：1
> 
> 时间：2012-05-26T10:56:51.347
> 
> 标签：php, mysql, html

我正在尝试结合 php 来理解 mysql，并且只是尝试创建一个表单来更新数据库中的某些内容。

我将旧值作为必须更改的参数。我将其放置在要编辑的字段中。只要我按下按钮，就必须运行一个查询，将旧值更新为新值。

假设您有以下代码：

```
<?php
$oldvalue = $_REQUEST['value'];
?>
<form action="change.php">
<input type="text" name="newvalue" value="<?= $oldvalue ?>">
<input type="submit" value="send">
</form> 
```

现在可以更改字段中的旧值，一旦提交按钮，我想运行查询：

```
UPDATE test SET value='$newvalue' WHERE value='$oldvalue' 
```

问题是：如何将旧值与表单一起发送？这样我就可以在 change.php 中运行查询

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:03:28.550

将旧值放入隐藏输入中：

```
<input type="hidden" name="old_value" value="<?php echo $oldvalue ?>" /> 
```

# visual-studio-2010 - Visual Studio 11 Team Foundation Server Express Beta 是否支持 Visual Studio 2010

> ID：10765630
> 
> 赞同：2
> 
> 时间：2012-05-26T10:57:21.193
> 
> 标签：visual-studio-2010, tfs

如果我安装[Visual Studio 11 Team Foundation Server Express Beta](http://www.microsoft.com/en-us/download/details.aspx?id=28987)，我能否从 Visual Studio 2010 客户端使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T15:25:54.190

是的，这是受支持的，但是您需要确保您的 Visual Studio 2010[保持最新](http://blogs.msdn.com/b/bharry/archive/2012/03/23/keeping-your-tfs-2010-up-to-date-as-of-march-2012.aspx)。

特别是，您需要安装[Visual Studio 2010 向前兼容包](http://www.microsoft.com/en-us/download/details.aspx?id=29082)才能连接到 Visual Studio 11 TFS 服务器或 TFS 服务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T11:14:53.707

在您提供的链接中有一个附加链接：[Visual Studio 11 Team Foundation Server Beta Readme File](http://go.microsoft.com/fwlink/?LinkId=237570)。在此文件中描述了一个已知问题：

> 在未打补丁的客户端中合并项目可能会导致项目属性丢失

这是通过使用 Visual Studio 2010 作为客户端来解决的。这让我相信它是受支持的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T11:12:18.517

是的，您可以将它与 VS10 一起使用。

可能您需要为 Microsoft Visual Studio 11 Beta 安装 Team Explorer。

从这里下载[http://www.microsoft.com/download/en/details.aspx?id=28976](http://www.microsoft.com/download/en/details.aspx?id=28976)。

# c# - 添加一个库，以便它可以在所有项目中使用

> ID：10765632
> 
> 赞同：1
> 
> 时间：2012-05-26T10:57:51.017
> 
> 标签：c#, html, visual-studio-2010, parsing, html-parsing

我正在尝试在 C# 中进行一些 Html 解析。在搜索 SO 以了解我应该从哪里开始之后，在[Parsing HTML with c#.net](https://stackoverflow.com/questions/6063203/parsing-html-with-c-net)中我找到了参考和对此的高度评价：http: [//htmlagilitypack.codeplex.com/](http://htmlagilitypack.codeplex.com/) 我想在我的项目中使用它，但我没有知道使用自定义库的正确步骤。下载后我不知道如何处理这些文件。我知道如何引用 dll。但我不确定如何处理其他文件（.XML、.PDB）

分步说明会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:02:20.190

您需要[添加](http://msdn.microsoft.com/en-us/library/wkze6zky.aspx)对 DLL 的引用。

完成后，您可以在代码中添加[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423)，以便直接使用库中定义的类型。

您需要的所有详细信息都在我发布的链接中。

# html - 请您解释一下如何更改 CSS 中的下拉列表选择菜单。

> ID：10765634
> 
> 赞同：1
> 
> 时间：2012-05-26T10:57:54.650
> 
> 标签：html, css

请您解释一下如何更改下拉列表选择菜单。如何在 css 的选择选项菜单中更改鼠标颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:56:29.323

尝试`onmouseout`并`onmouseover`：

```
<select style="background-color:#fff;" onmouseover="this.style.backgroundColor='#999';" onmouseout="this.style.backgroundColor='#fff';"> 
```

# android - AsyncTask 中的 ProgressDialog 抛出 NullPointerException？

> ID：10765638
> 
> 赞同：2
> 
> 时间：2012-05-26T10:58:23.907
> 
> 标签：android, android-asynctask, progressdialog

我正在尝试从 http 服务器`ProgressDialog`加载提要时显示一段时间。`json`我得到一个`NullPointerException`和。如果我没有误解，在最终代码中会运行！我的错在哪里？这是我的活动代码：`doInBackground``onPostExecute``AsyncTask``onPostExecute`

```
public class ResultInput extends Activity {

    int count = 0;
    String mainUrl;
    String[] product_pict_part;
    InputStream is = null;
    private ProgressDialog pd;
    String TAG = "meinDebug";
    ParseEan parse_code;
    String readProductNameEan;
    ImageView productPic;
    String productName;
    Drawable drawable;
    TextView product_name;
    TextView text_level;
    int productLevel;

    private Context context;

    // private MyProgressDialog dialog;
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        new ProgressTask(ResultInput.this).execute();
    }

    private InputStream fetch(String urlString) throws MalformedURLException,
            IOException {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(urlString);
        HttpResponse response = httpClient.execute(request);
        return response.getEntity().getContent();
    }

    private class ProgressTask extends AsyncTask<String, Void, Boolean> {
        private ProgressDialog dialog;
        private Activity activity;

        // private List<Message> messages;
        public ProgressTask(Activity activity) {
            this.activity = activity;
            context = activity;
            dialog = new ProgressDialog(context);
        }

        /** progress dialog to show user that the backup is processing. */

        /** application context. */

        protected void onPreExecute() {
            this.dialog.setMessage("Progress start");
            this.dialog.show();
        }

        @Override
        protected void onPostExecute(final Boolean success) {
            pd.dismiss();
            productPic.setImageDrawable(drawable);

            Log.i(TAG, "Picture URL " + mainUrl);
            product_name.setText(productName);

            if (productLevel == 1) {
                text_level.setText("helal");
            } else if (productLevel == 2) {
                text_level.setText("mittel");
            } else if (productLevel == 3) {
                text_level.setText("haram");
            } else if (productLevel == 4) {
                text_level.setText("in analyse");
            }

            if (dialog.isShowing()) {
                dialog.dismiss();
            }

            if (success) {
                Toast.makeText(context, "OK", Toast.LENGTH_LONG).show();
            } else {
                Toast.makeText(context, "Error", Toast.LENGTH_LONG).show();
            }
        }

        protected Boolean doInBackground(final String... args) {
            try {
                mainUrl = "http://nur-efsan.de/websHalalCheck/public/image/index/dir/";
                product_name = (TextView) findViewById(R.id.produkt_name);
                text_level = (TextView) findViewById(R.id.text_level);
                productPic = (ImageView) findViewById(R.id.productpic);
                productName = parse_code.parseJSONPost("data", "name",
                        readProductNameEan);
                String productPicture = parse_code.parseJSONPost("data",
                        "image", readProductNameEan);
                productLevel = Integer.parseInt(parse_code.parseJSONPost(
                        "data", "levelId", readProductNameEan));

                product_pict_part = productPicture.split("/");
                mainUrl = mainUrl + product_pict_part[0] + "/name/"
                        + product_pict_part[1];

                try {
                    is = fetch(mainUrl);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                drawable = Drawable.createFromStream(is, "src");

                return true;
            } catch (Exception e) {
                Log.e("tag", "error", e);
                return false;
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:06:45.697

在 OnPostExecute 方法中

```
 dialog.dismiss(); 
```

**代替**

```
 pd.dismiss(); 
```

**第二**

你不应该在 doInBackgroud(...) 方法中引用 TextView 或 imageview(productname,testview...) 因为 doinbackground 方法是非 UI 线程。

`So give refrence in onCreate method and then call asyncTask`和 setValue 在`onPostExecute method...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:25:33.807

非常感谢您的回复！我更改了您向我描述的代码！而且我忘记设置我的内容视图:) 我的最终代码：

```
package com.halal.helalcheck;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;

import org.apache.http.HttpResponse;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Context;
import android.graphics.drawable.Drawable;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.widget.ImageView;
import android.widget.TextView;

public class ResultInput extends Activity {

    int count = 0;
    String mainUrl;
    String[] product_pict_part;
    InputStream is = null;
    String TAG = "meinDebug";
    ParseEan parse_code = new com.halal.helalcheck.ParseEan();
    String readProductNameEan;
    ImageView productPic;
    String productName;
    Drawable drawable;
    TextView product_name;
    TextView text_level;
    int productLevel;

    private Context context;

    // private MyProgressDialog dialog;
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.resultwindow);

        mainUrl = "http://nur-efsan.de/websHalalCheck/public/image/index/dir/";
        product_name = (TextView) findViewById(R.id.produkt_name);
        text_level = (TextView) findViewById(R.id.text_level);
        productPic = (ImageView) findViewById(R.id.productpic);

        new ProgressTask(ResultInput.this).execute();

    }

    private InputStream fetch(String urlString) throws MalformedURLException,
            IOException {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet request = new HttpGet(urlString);
        HttpResponse response = httpClient.execute(request);
        return response.getEntity().getContent();
    }

    private class ProgressTask extends AsyncTask<String, Void, Boolean> {
        private ProgressDialog dialog;
        private Activity activity;

        public ProgressTask(Activity activity) {
            this.activity = activity;
            context = activity;
            dialog = new ProgressDialog(context);
        }

        /** progress dialog to show user that the backup is processing. */

        /** application context. */

        @Override
        protected void onPreExecute() {
            this.dialog.setMessage("Checking Product");
            this.dialog.show();
        }

        @Override
        protected void onPostExecute(final Boolean success) {
            drawable = Drawable.createFromStream(is, "src");
            productPic.setImageDrawable(drawable);
            Log.i(TAG, "Picture URL " + mainUrl);
            product_name.setText(productName);

            if (productLevel == 1) {
                text_level.setText("helal");
            } else if (productLevel == 2) {
                text_level.setText("mittel");
            } else if (productLevel == 3) {
                text_level.setText("haram");
            } else if (productLevel == 4) {
                text_level.setText("in analyse");
            }

            if (dialog.isShowing()) {
                dialog.dismiss();
            }

        }

        @Override
        protected Boolean doInBackground(final String... args) {
            try {
                Bundle b = getIntent().getExtras();
                String ean_code = b.getString("barcodestring");

                String readProductNameEan = parse_code.readProductEan(ean_code);
                Log.i(TAG, readProductNameEan);
                productName = parse_code.parseJSONPost("data", "name", readProductNameEan);
                Log.i(TAG, productName);

                productLevel = Integer.parseInt(parse_code.parseJSONPost( "data", "levelId", readProductNameEan));

                String productPicture = parse_code.parseJSONPost("data", "image", readProductNameEan);
                product_pict_part = productPicture.split("/");
                mainUrl = mainUrl + product_pict_part[0] + "/name/" + product_pict_part[1];

                try {
                    is = fetch(mainUrl);
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return true;
            } catch (Exception e) {
                Log.e("tag", "error", e);
                return false;
            }
        }

    }

} 
```

# accessibility - 没有单位的行高的缺点？

> ID：10765642
> 
> 赞同：15
> 
> 时间：2012-05-26T10:58:45.167
> 
> 标签：accessibility, css

在没有单位的情况下指定行高是否有任何缺点（浏览器/设备不一致......）？

例子：

```
body {

    line-height: 1.5;
} 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-26T11:19:52.960

在大多数情况下，实际上最好使用无单位行高 - 请参阅

*   [http://meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/](http://meyerweb.com/eric/thoughts/2006/02/08/unitless-line-heights/)
*   [https://developer.mozilla.org/en/CSS/line-height](https://developer.mozilla.org/en/CSS/line-height) - 查看他们展示示例的注释

当然，也有例外。想到的第一个是当你有一个*已知* `height`的块元素并且其中*有一行文本*并且你想垂直居中该行文本 - 我发现最简单的方法是使用 a `line-height`that's等于`height`块元素的。

* * *

*[以防万一，对于任何不知道与 unitless 有什么关系的人`line-height`。]*

假设您有一个带有`font-size: 14px`. 不管它是在哪里设置的，它是否被继承，是你自己设置还是来自用户代理样式表。该元素具有`font-size: 14px`.

现在，如果您设置，假设`line-height: 1.5`对于相同的元素，这将被转换为像素为**1.5 * 14px = 21px**。所以你的计算`line-height`将是`21px`.

# mysql - 如何解决 wamp 服务器中未正确配置 MySQL 服务器的套接字

> ID：10765649
> 
> 赞同：1
> 
> 时间：2012-05-26T10:59:35.887
> 
> 标签：mysql, wampserver

请帮助我，我尝试了我在搜索中找到的所有东西。比如换房`config.inc.php`等等`my.ini`。

请告诉我我可以改变什么来解决以下错误

> #2002 - 服务器没有响应（或本地 MySQL 服务器的套接字未正确配置问题。

我的 config.inc.php 文件是

```
$cfg['Servers'][$i]['host'] = 'localhost'; 
$cfg['Servers'][$i]['port'] = ''; 
$cfg['Servers'][$i]['socket'] = ''; 
$cfg['Servers'][$i]['connect_type'] = 'tcp'; 
$cfg['Servers'][$i]['extension'] = 'mysqli'; 
$cfg['Servers'][$i]['auth_type'] = 'config'; 
$cfg['Servers'][$i]['user'] = 'root'; 
$cfg['Servers'][$i]['password'] = ''; 
$cfg['Servers'][$i]['AllowNoPassword'] = true; 
```

仅更改`$cfg['Servers'][$i]['socket'] = '/tmp/mysql.sock';`插入`$cfg['Servers'][$i]['socket'] = '';`

# c# - 如何分配 IObservable 将值返回给 XDocument 实例

> ID：10765651
> 
> 赞同：0
> 
> 时间：2012-05-26T11:00:06.540
> 
> 标签：c#, reactive-programming

我是反应式扩展初学者。Gideon Engelberth 在我的问题中给了我关于 Reactive Extension 的出色回答。

[如何使用 LINQ 或 Rx 在一个方法链上将 img url 转换为 HTML 中的 BASE64 字符串](https://stackoverflow.com/questions/8897769/how-to-convert-img-url-to-base64-string-in-html-on-one-method-chain-by-using-lin)

现在我有第二个问题，即如何将 IObservable 返回值分配给 XDocument 实例。

Gideon 给了我下面的样品。

```
 public IObservable<Unit> ReplaceImageLinks(XDocument document)
    {
        return (from element in GetImages(document)
                let address = new Uri(element.Attribute("src").Value)
                select (from data in DownloadAsync(address)
                        select Convert.ToBase64String(data)
                       ).Do(base64 => element.Attribute("src").Value = base64)
               ).Merge()
                .IgnoreElements()
                .Select(s => Unit.Default);
    } 
```

我想这样做。布丁好像很难...

```
public void Convert(XDocument input, out XDocument output)
{
    output = ReplaceImageLinks(input);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T23:05:31.940

所以你在这里所拥有的只有一半有用。似乎 Gideon 已经回答了您的问题，但也许不知道您的额外要求。所以我假设你想要一个 XDoc，将所有 Image src 属性从路径转换为路径表示的 BASE64 内容。然后，您希望在所有处理完成后返回那个新的 XDoc 对象。正确的？

如果是这种情况，那么您*可以*这样做。

```
public IObservable<XDocument> ReplaceImageLinks(XDocument document)
{
    return Observable.Create<XDocument>(o=>
    {
        try{
            var images = document.Descendants("Image");
            Parallel.ForEach(images, SwapUriForContent);
            o.OnNext(document);
            o.OnCompleted();
        }
        catch(Exception ex)
        {
            o.OnError(ex);
        }
        return Disposable.Empty;    //Should really be a handle to Parallel.ForEach cancellation token.
    });
}

private static void SwapUriForContent(XElement imageElement)
{
    var address = new Uri(imageElement.Attribute("src").Value, UriKind.RelativeOrAbsolute);
    imageElement.Attribute("src").Value = Download(address);
}

public static string Download(Uri input)
{
    //TODO Replace with real implemenation
    return input.ToString().ToUpper();
} 
```

我刚刚测试过的

```
string str =
    @"<?xml version=""1.0""?>
    <!-- comment at the root level -->
    <Root>
        <Child>Content</Child>
        <Image src=""image.jpg""/>
        <Child>
            <Image src=""image2.jpg""/>
        </Child>
    </Root>";
XDocument doc = XDocument.Parse(str);
ReplaceImageLinks2(doc).Dump(); 
```

但是，这也有问题。第一，我们正在变异状态。在处理并发时，这不是一个好的开始。我们真的应该返回一个具有正确值的新 XDoc。第二，这似乎更像是一个 TPL 问题而不是 Rx 问题。Rx 最适合处理传入数据的流，这里需要执行并行处理。我认为一个更好的选择是只做任务。

```
public Task<XDocument> ReplaceImageLinks3(XDocument source)
{
    return Task.Factory.StartNew(()=>
    {
        var copy = new XDocument(source);
        var images = copy.Descendants("Image");
        Parallel.ForEach(images, SwapUriForContent);
        return copy;
    });
} 
```

请参阅我在[IntroToRx.com中的《](http://www.introtorx.com)[何时使用 Rx 》一书中的部分](http://introtorx.com/Content/v1.0.10621.0/01_WhyRx.html#Could)

# wpf - 如何右对齐 DataTemplate 中的内容？

> ID：10765652
> 
> 赞同：9
> 
> 时间：2012-05-26T11:00:07.427
> 
> 标签：wpf, list, alignment, datatemplate

我有一个带有 DataTemplate 的列表，它显示文本和旁边的“x”按钮。我希望“X”btn 显示在最右边，所以它们都出现在同一个地方。我使用的 XML 是：

```
<ListBox Name="seiveListBox" ItemsSource="{Binding}" MinWidth="80" Height="120" ScrollViewer.VerticalScrollBarVisibility="Visible" >
                                <ListBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding}" />
                                            <Button Name="delSeiveFromListBtn" Content="X" ToolTip="Delete" Margin="8, 0, 0, 0" Click="delSeiveFromListBtn_Click"></Button>
                                        </StackPanel>
                                    </DataTemplate>
                                </ListBox.ItemTemplate>
                            </ListBox> 
```

我尝试在 StackPanel 的地方添加网格，但没有成功。

如何设计它或将列表中的“x”对齐到每个项目的最右侧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T12:28:49.650

这是我的看法，按以下方式使用 Grid：

```
<ListBox ItemsSource="{Binding Items}"
          Width="200" HorizontalContentAlignment="Stretch">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Grid.Column="0" Text="{Binding Data}"></TextBlock>
                <Button Grid.Column="1" Content="x"></Button>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-22T16:25:47.483

如果您的项目应该是按钮，那么您必须指定 Horizo​​ntalContentAlignment="Stretch"。这是我用于右侧带有十字的按钮的模板：

```
 <DataTemplate x:Key="DeletableButtonCommandTemplate">
    <Button Command="{Binding}" Margin="0,1" HorizontalContentAlignment="Stretch">
        <Grid HorizontalAlignment="Stretch">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="18"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="{Binding Caption}" HorizontalAlignment="Center" Grid.Column="0"></TextBlock>
            <shared:CrossButton Width="12" Height="12" Grid.Column="1"
                                cal:Message.Attach="[Event Click]=[DeleteCommandSource($Datacontext)]"
                                Visibility="{Binding Path=AssociatedObject.Owner, Converter={sharedConv:NotNullToVisibleConverter} }"  />
        </Grid>
    </Button>
</DataTemplate> 
```

# authentication - 本地服务器和纯文本身份验证

> ID：10765653
> 
> 赞同：1
> 
> 时间：2012-05-26T11:00:29.547
> 
> 标签：authentication, ssl, local, loopback

我正在编写一个需要身份验证的本地网络服务器。由于它将通过环回设备进行通信（侦听 127.0.0.1），因此其流量不会离开本地机器。
我无法想象以明文形式发送用户名/密码，即使外界没有人可以嗅到它；但我不知道如何保护通信。它*必须*得到保护，对吧？一些本地用户可以嗅探其他用户的。
那该怎么做呢？SSL/TLS 和每次启动时新生成的一些密钥/证书？

# objective-c - NSDateFormatter 将日期更改为 2 小时，为什么？

> ID：10765654
> 
> 赞同：0
> 
> 时间：2012-05-26T11:00:32.837
> 
> 标签：objective-c, ios, nsdate

我想将以下内容转换`NSString`为`NSDate`：`@"2013-04-01T22:00:00Z"`

我正在使用以下代码：

```
NSString *dateString = @"2013-04-01T22:00:00Z";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
NSDate *theDate = [dateFormatter dateFromString:dateString]; 
```

当我打印时，`theDate`我得到以下答案：2013-04-01 20:00:00 +0000

现在我想知道为什么时间是 20:00 而不是 22:00，你有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:09:08.453

由于您的 dateFormat 未指定`NSDateFormatter`使用您当地时区的时区。您必须自己设置时区。字符串中的 Z 表示 GMT。

```
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:11:08.327

在您的代码中尝试时区，我在您的默认时区中尝试过。它工作正常。

```
NSString *dateString = @"2013-04-01T22:00:00Z";
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss'Z'"];
    [dateFormatter setTimeZone:[NSTimeZone defaultTimeZone];
    NSDate *theDate = [dateFormatter dateFromString:dateString]; 
```

# iis - 从 Windows 2008 服务器同时运行 IIS 7 和 JBoss AS 7

> ID：10765656
> 
> 赞同：6
> 
> 时间：2012-05-26T11:00:48.160
> 
> 标签：iis, web-applications, iis-7, jboss, jboss7.x

有人知道如何允许 IIS 7 和 JBoss AS 7 在 Windows 2008 Server 上运行和托管应用程序吗？我有一个 Windows 2008 VPS，我通过 IIS 通过端口 80（默认端口）托管了一些 ASP.NET 网站和应用程序。现在我想托管一些 JBoss Seam Web 应用程序（和 RESTEasy Web 服务），大概我需要在另一个端口上进行（例如 8080）。

我已经在独立配置文件夹中修改了 JBoss AS 中的standalone.xml 配置文件，以便套接字绑定名称“http”从端口 8080 运行。但是，当我尝试请求在 JBoss AS 上运行的应用程序时服务器没有响应来自服务器外部其他机器上的浏览器，例如：

> www.notmyrealdomain.com:8080

...不返回任何响应。当我使用

> 本地主机：8080

...要浏览服务器本身，我可以很好地从 JBoss AS 加载网页和应用程序。所以肯定有一个 Windows 设置或 JBoss AS 设置需要更改才能使其正常工作。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T15:27:05.847

You need to make jboss as 7 instance bind against the ip that resolves to `www.notmyrealdomain.com`.

you can do that by running jboss as:

```
standalone.bat -b <EXTERNALIP> 
```

Regards

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T13:38:51.850

终于得到了这个工作：

第一步 - 使用 Windows 防火墙公共配置文件属性启用传入连接！

第二步 - 通过将默认值替换为以下值，在我的 JBoss AS 上编辑了standalone/configuration/standalone.xml：

```
 <interfaces>
    <interface name="management">
        <inet-address value="127.0.0.1"/>
    </interface>
    <interface name="public">
        <any-address/>
    </interface>
 </interfaces>

<socket-binding-group ...>
    <socket-binding name="http" port="8080"/>
    ...
</socket-binding-group> 
```

第三步 - 通过再次运行standalone.bat 文件重新启动服务器。

IIS 和 JBoss AS 现在都成功托管了应用程序，尽管我需要为我在原始问题中提到的部署的 JBoss AS 应用程序指定端口地址，例如 www.notmyrealdomain.com:8080/jboss-as-app/ 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-28T16:28:41.843

您可以设置一个子域`jboss.notmyrealdomain.com`并配置 IIS 以将其完全重定向到 JBoss。这提供了在浏览器中使用端口 80 的好处。

请参阅[http://blogs.msdn.com/b/tconte/archive/2011/03/08/configuring-an-iis-7-front-end-for-apache-tomcat-using-appcmd-exe.aspx](http://blogs.msdn.com/b/tconte/archive/2011/03/08/configuring-an-iis-7-front-end-for-apache-tomcat-using-appcmd-exe.aspx)。

# sql - 根据多个条件选择一列（多对多关系）

> ID：10765657
> 
> 赞同：0
> 
> 时间：2012-05-26T11:00:52.187
> 
> 标签：sql, ms-access, join, many-to-many

好的，我知道标题可能有点不清楚，但我找不到更好的标题。让我解释一下情况，

我有 3 个表（实际上很多，但对于这个例子，我们需要 3 个）。
1.`teachers`带列的表`teacherid, teachername, other columns (DOB etc)...`
2.`classes`带列的表`classid, classname, other columns (students in class etc)`
3.`subjects`带结构的表`subjectid, subjectname, other columns (unimportant at this point)`

现在，您可能可以从表格中猜到，存在多对多关系，因为一位老师可以教很多课，而且，一位老师可以教很多科目，一个班可以有很多科目等等。所以包含的表格这些多对多关系是..
4.`ClassSubject`列`ClassId, SubjectId, CustomRemark`
5.`TeacherSubject`列`TeacherId, SubjectId, CustomRemark`
6.`TeacherClass`列`TeacherId, ClassId, CustomRemark`

您可能会再次猜到，表 4 代表了哪些类具有哪些主题的映射（前两个列被标记为主键）。表 5 代表什么老师可以教什么科目（前两列标记为 pk），再次表 6 代表什么老师可以教什么课程。（我只是希望我足够明确，不会混淆你！）

现在的问题是，有一次我有这本字典，`Dictionary<int, Dictionary<int, List<int>>> dctClsSubTeachers`它以给定的顺序存储类的 id，对于每个类的 id，另一个包含主题 id 和类的 id 的字典，如果of subject 可以在相应班级教授该科目的教师列表。（这听起来可能有点复杂，但请仔细考虑一下，我相信它会有意义:(

**所以，我需要填充这本字典，因此我需要一个查询思想，我可以提供 classId 和 subjectId 作为参数，我得到一个所有老师的列表，这些老师不仅可以教那个科目，还可以在课堂上教那个科目在参数中给出，（我们有表 4、5 和 6 的关系），因此我可以填充该字典**

顺便说一下，我尝试了很多方法，但都没有奏效，我尝试过的一些方法是..

```
select teacherId from teachers where teacherid in (SELECT teacherid from teacherclass where classid = k
intersect
SELECT teacherid from teachersubject where subjectid = k2) // I can't use this because access doesn't support intersect 
```

我试过的另一个

```
SELECT teacherid
FROM Teachers, (ClassSubject INNER JOIN TeacherClass ON ClassSubject.ClassId = TeacherClass.ClassId) INNER JOIN TeacherSubject ON ClassSubject.SubjectId = TeacherSubject.SubjectId; 
```

我又尝试了几个，但做不到，在头痛 10 小时后，我想到了 stackoverflow！那么，任何人都可以请，请在这里帮助我吗？

*ps：如果您需要有关数据库（或其他任何内容）的任何进一步说明，请随时询问..
pps：我使用的是 ms-access 2007，不，由于某些原因在此讨论中不重要，我无法迁移到 sql server*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:18:31.600

尝试使用加入：

```
SELECT tc.TeacherId
FROM ClassSubject
INNER JOIN TeacherSubject ON TeacherSubject.SubjectId = ClassSubject.SubjectId
INNER JOIN TeacherClass ON TeacherClass.TeacerId = TeacherSubject.teacherId AND ON TeacherClass.ClassId = ClassSubject.ClassId
WHERE ClassSubject.ClassId = [Your ClassId]
AND ClassSubject.SubjectId = [Your SubjectId] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:16:49.963

尝试这个

```
Select TeacherSubject.TeacherId From TeacherSubject 
INNER JOIN ClassSubject ON TeacherSubject.SubjectID=ClassSubject.SubjectID
INNER JOIN TeacherClass ON Teacherclass.ClassID=TeacherSubject.ClassID
Where TeacherClass.ClassID=1 AND ClassSubject.SubjectID=1 
```

当然是 MSS SQL 语法。我认为对于 MS ACCESS，您必须使用 JOIN。要再次从教师班级获取教师姓名，您需要将此教师 ID 加入教师班级。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-27T13:38:09.147

是的！！！其实我自己解决了！这是解决方案..

```
SELECT Classes.ClassId, Classes.ClassName, Subjects.SubjectId, Subjects.SubjectName, Teachers.TeacherId, Teachers.TeacherName
FROM (Teachers INNER JOIN (Classes INNER JOIN TeacherClass ON Classes.ClassId = TeacherClass.ClassId) ON Teachers.TeacherId = TeacherClass.TeacherId) INNER JOIN (Subjects INNER JOIN TeacherSubject ON Subjects.SubjectId = TeacherSubject.SubjectId) ON Teachers.TeacherId = TeacherSubject.TeacherId
where classes.classid = k and subjects.subjectid = p
GROUP BY Classes.ClassId, Subjects.SubjectId, Teachers.TeacherId, classes.classname, subjects.subjectname, teachers.teachername; 
```

# asp.net - 如何防止 iframe 内容消失

> ID：10765659
> 
> 赞同：2
> 
> 时间：2012-05-26T11:01:02.623
> 
> 标签：asp.net, iframe, powerpoint

我的页面中有四个框架的输入参数。我在我的页面中使用了导出到 Excel、PPT 和打印功能。问题是当我使用导出到 PPT 功能时，页面和 iframe 会等到 PPT 获取值并重新加载，并且一旦打开 PPT，iframe 的内容就会消失。

我使用 Microsoft.Office.Interop 来做这个 PPT 功能。当我使用 Excel 和打印功能时，我没有发现 iframe contet 有任何问题。我需要停止显示 iframe 的内容？？在所有浏览器中都会发生同样的情况。任何建议。

# c# - 轮盘选择程序

> ID：10765660
> 
> 赞同：5
> 
> 时间：2012-05-26T11:01:43.857
> 
> 标签：c#, c#-4.0, genetic-algorithm, genetic-programming

是否可以使用适应度值来评估种群中的每个个体，而无需找到概率，如下面的伪代码

```
For all members of population
    sum += fitness ( member)
End for 
Loop until new population is full 
      Do this twice 
            Number = Random between 0 and sum
            Currentfitness = 0.0
            For each member in population
               Currentfitness += fitness (member)
               if Number > Currentfitness then select member
            End for 
      End
Create offspring 
End loop 
```

以及代码的以下部分做什么？

```
Do this twice 
```

我真的很困惑轮盘赌如何选择一对父母。有什么帮助吗？提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-27T10:36:05.003

Number 应该**小于**Currentfitness，否则会严重偏向于人口的第一个成员。

例子：

*   考虑权重 {1, 2, 7}
*   累积权重 {1, 3, 10}
*   总重量 10
*   使用 r.NextDouble(10.0) 选择 0 到 10 之间的随机双精度
*   90% 的时间 1 是用给定的伪代码选择的。应该是 10%

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T11:11:22.257

该代码旨在选择一个随机元素，但具有一定权重的概率。

例子：

*   我们想从具有以下权重的二元素数组中进行选择：{ 1, 9 }
*   累积权重为 { 1, 10 }
*   总重量为 10
*   我们选择 1 到 10 之间的随机数
*   我们查看累积权重数组并找到我们的随机数大于元素的第一个索引
*   这个索引是随机选择的元素的索引

直观地说，这个例子是有道理的：十分之九的随机数将落在 1 到 9 之间，导致第一个元素以 0.9 的概率被绘制（就像指定的权重一样）。

# delphi - 带有 indy 的 Http Post

> ID：10765661
> 
> 赞同：12
> 
> 时间：2012-05-26T11:02:01.837
> 
> 标签：delphi, http, post, indy

我的网络服务器上有一个简单的 php 脚本，我需要使用 HTTP POST 上传文件，这是我在 Delphi 中所做的。

这是我在 Indy 上的代码，但显然它不起作用，我无法弄清楚我做错了什么。我如何查看我在服务器上发送的内容是否有这样的工具？

```
procedure TForm1.btn1Click(Sender: TObject);
var
  fname : string;
  MS,dump : TMemoryStream;
  http  : TIdHTTP;

const
  CRLF = #13#10;
begin
  if PromptForFileName(fname,'','','','',false) then
  begin
    MS := TMemoryStream.Create();
    MS.LoadFromFile(fname);
    dump := TMemoryStream.Create();
    http := TIdHTTP.Create();
    http.Request.ContentType:='multipart/form-data;boundary =-----------------------------7cf87224d2020a';
    fname := CRLF + '-----------------------------7cf87224d2020a' + CRLF + 'Content-Disposition: form-data; name=\"uploadedfile\";filename=\"test.png"' + CRLF;
    dump.Write(fname[1],Length(fname));
    dump.Write(MS.Memory^,MS.Size);
    fname := CRLF + '-----------------------------7cf87224d2020a--' + CRLF;
    dump.Write(fname[1],Length(fname));
    ShowMessage(IntToStr(dump.Size));
    MS.Clear;
    try
    http.Request.Method := 'POST';
    http.Post('http://posttestserver.com/post.php',dump,MS);
    ShowMessage(PAnsiChar(MS.Memory));
    ShowMessage(IntToStr(http.ResponseCode));
    except
    ShowMessage('Could not bind socket');
    end;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-26T11:26:05.950

Indy has `TIdMultipartFormDataStream` for this purpose:

```
procedure TForm1.SendPostData;
var
  Stream: TStringStream;
  Params: TIdMultipartFormDataStream;
begin
  Stream := TStringStream.Create('');
  try
   Params := TIdMultipartFormDataStream.Create;
   try
    Params.AddFile('File1', 'C:\test.txt','application/octet-stream');
    try
     HTTP.Post('http://posttestserver.com/post.php', Params, Stream);
    except
     on E: Exception do
       ShowMessage('Error encountered during POST: ' + E.Message);
    end;
    ShowMessage(Stream.DataString);
   finally
    Params.Free;
   end;
  finally
   Stream.Free;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T12:00:15.727

由于用户代理，从 Indy 调用 PHP 可能会失败，然后您会收到 403 错误。

试试这种方式，它为我修复了它：

```
var Answer: string;
begin
  GetHTML:= TIdHTTP.create(Nil);
  try
    GetHTML.Request.UserAgent:= 'Mozilla/3.0';
    Answer:= GetHTML.Get('http://www.testserver.com/test.php?id=1');
  finally
    GetHTML.Free;
  end;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-27T13:03:59.167

您丢失了 2 个字符“--”。最好这样做：

```
http.Request.ContentType:='multipart/form-data;boundary='+myBoundery;
fname := CRLF + '--' + myBoundery + CRLF + 'Content-Disposition: form-data; name=\"uploadedfile\";filename=\"test.png"' + CRLF; 
```

# google-maps-api-3 - 计算多边形的面积

> ID：10765667
> 
> 赞同：5
> 
> 时间：2012-05-26T11:02:32.250
> 
> 标签：google-maps-api-3

我需要在我的地图中获取多边形的面积。我找了一个例子`new google.maps.geometry.spherical.computeArea`，但我不能让它工作，我不知道为什么。

```
function dibuV(area){
  var i;
  var a = new Array();
  for(i=0; i<area.length; i++){
    var uno = area[i].split(",");
    a[i] = new google.maps.LatLng(uno[0],uno[1]);
  }
  poligon = new google.maps.Polygon({
    paths: a,
    strokeColor: "#22B14C",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#22B14C",  
    fillOpacity: 0.35  
  })  
  poligon.setMap(map);//until here is ok 
  var z = new google.maps.geometry.spherical.computeArea(poligon.getPath());
  alert(z); //this is not working
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-26T11:51:28.760

您的代码给您的错误：`google.maps.geometry is undefined`

在[Google Maps v3 API 文档](https://developers.google.com/maps/documentation/javascript/geometry)中，几何函数是默认不加载的库的一部分：

> 本文档中的概念是指仅在 google.maps.geometry 库中可用的功能。当您加载 Maps Javascript API 时，默认情况下不会加载此库，但必须通过使用库引导参数明确指定。

为了在您的页面中加载和使用几何功能，您需要通知 Google 您将使用几何库，方法是将其添加到您的初始 Google API 调用中，包括`libraries=geometry`：

```
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"></script> 
```

然后这将加载几何库，您的`z`变量将包含一个对象。

带有工作代码的测试页面：

```
<!DOCTYPE html>
<html>
<head>
    <style type="text/css">
      html, body, #map_canvas {
        margin: 0;
        padding: 0;
        height: 100%;
      }
    </style>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false"></script>
<script type="text/javascript">
    var map;
    function initialize()
    {
        var myOptions = {
          zoom: 8,
          center: new google.maps.LatLng(-34.397, 150.644),
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('map_canvas'), myOptions);
    }

    google.maps.event.addDomListener(window, 'load', initialize);
    </script>
<script>
function test()
{
var arr = new Array()
arr.push('51.5001524,-0.1262362');
arr.push('52.5001524,-1.1262362');
arr.push('53.5001524,-2.1262362');
arr.push('54.5001524,-3.1262362');
dibuV(arr);
}
function dibuV(area)
{
var a = new Array();

for(var i=0; i<area.length; i++)
{
    var uno = area[i].split(",");
    a[i] = new google.maps.LatLng(uno[0],uno[1]);
}

poligon = new google.maps.Polygon({
    paths: a,
    strokeColor: "#22B14C",
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: "#22B14C",   
    fillOpacity: 0.35   
})  

poligon.setMap(map);//until here is ok 
var z = new google.maps.geometry.spherical.computeArea(poligon.getPath());
alert(z); //this is not working
}
</script>
</head>
<body onload="test();">
    <div id="map_canvas"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T13:51:33.377

这不起作用，因为您正在使用“新”来使用 computeArea 方法。使用“google.maps.geometry.spherical.computeArea”而不使用“new”。例子：

```
var z = google.maps.geometry.spherical.computeArea(myPolyline.getPath().getArray());
alert(z); 
```

这将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-01T10:27:33.780

请看我下面的代码

```
var z = google.maps.geometry.spherical.computeArea(poligon.getPath()); 
```

# ruby-on-rails-3 - RSpec undefined method `update_attributes' for nil:NilClass Error

> ID：10765669
> 
> 赞同：2
> 
> 时间：2012-05-26T11:02:44.010
> 
> 标签：ruby-on-rails-3, controller, rspec-rails

I am trying to test my Rails app. Now I am testing my tiny controller but I have a problem. I use device to authentication. My controller which I test is like,

```
class WidgetsController < ApplicationController
  #skip_before_filter :authenticate, :only => [:new, :create]
  before_filter :authenticate, :except=>[:disabled]

  def index
    @widgets = current_user.widgets.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @widgets }
    end
  end

  def new
    @widget = Widget.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @widget }
    end
  end

  def create
    @widget = Widget.new(params[:widget])
    @widget.user_id = current_user.id
    @widget.score = 0
    @widget.total_score = 0
    @widget.click_number = 0
    @widget.average = 0

    respond_to do |format|
      if @widget.save
        format.html { redirect_to edit_widget_path(@widget), notice: 'Widget was successfully created.' }
        format.json { render json: @widget, status: :created, location: @widget }
      else
        format.html { render action: "new" }
        format.json { render json: @widget.errors, status: :unprocessable_entity }
        raise 'an error occurs when creation'
      end
    end
  end

  def show
    @widget = Widget.find_by_uuid(params[:uuid])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @widget }
    end
  end

  def edit
    @widget = Widget.find_by_uuid(params[:uuid])
  end

  def update
    @widget = Widget.find_by_uuid(params[:uuid])

    respond_to do |format|
      if @widget.update_attributes(params[:widget])
        format.html { redirect_to edit_widget_path(@widget), notice: 'Widget was successfully updated.' }
        format.json { render json: @widget, status: :created, location: @widget }
      else
        format.html { render action: "edit" }
        format.json { render json: @widget.errors, status: :unprocessable_entity }
        raise 'there is an error when alteration'
      end
    end
  end

  def destroy
    @widget = Widget.find_by_uuid(params[:uuid]).destroy

    respond_to do |format|
      format.html { redirect_to widgets_path }
      format.json { head :no_content }
    end
  end

  #generate widget
  def generate
    respond_to do |format|
      format.js {}
    end
  rescue
    #TODO add widget not found page
    render :template => 'application/widget_not_found', :status => :not_found
  end

  protected

  def authenticate
    unless current_user
      redirect_to root_url
    end
  end

end 
```

My route file maybe you can want to look in it.

```
Rwidget::Application.routes.draw do

  match 'widgets' => 'widgets#index', :via => :get
  match 'widgets/new' => 'widgets#new', :via => :get
  match 'widgets' => 'widgets#create', :via => :post
  match 'widgets/:uuid' => 'widgets#show', :via => :get
  get 'widgets/:uuid/edit' => 'widgets#edit'
  match 'widgets/:uuid' => 'widgets#update', :via => :put
  match 'widgets/:uuid' => 'widgets#destroy', :via => :delete

  resources :widgets, :collection => [:destroy]

  match 'rws/generate/:uuid' => 'rws#generate'

  get 'rws/:uuid' => 'rws#show'
  put 'rws/:uuid' => 'rws#update'
  post 'rws/getUserInfo' => 'rws#getUserInfo'

  resources :authentications
  match '/auth/:provider/callback' => 'authentications#create'

  devise_for :users do
    get '/users/sign_out' => 'devise/sessions#destroy'
  end

  root :to => "home#index" 
```

And my controller_spec. rb is

```
require 'spec_helper'

describe WidgetsController do
  login_user

  describe "User" do
    before(:each) do
      @current_user = mock_model(User, :id => 1)
      @widget = mock_model(Widget, :user_id => 1)
      Widget.stub!(:current_user).and_return(@current_user)
      Widget.stub!(:widgets).and_return(@widget)
    end

    it "should have a current_user" do
      subject.current_user.should_not be_nil
    end
  end

  def mock_widget(stubs={})
    @mock_widget ||= mock_model(Widget, stubs).as_null_object
  end

  describe "Get index" do
    it "should get all widgets " do
      Widget.stub(:all) { [mock_widget] }
      get :index
      assigns(:widgets) == @widgets
    end
  end

  describe "Post widget" do
    it "creates a new widget" do
      Widget.stub(:new).with({'these' => 'params'}) { mock_widget(:language => "en") }
      post :create, :widget => {'these' => 'params'}
      assigns(:widget) == @widgets
      response.should redirect_to (edit_widget_path(@mock_widget))
    end
  end

  describe "Get widget" do
    it "shows exact widget via id" do
      Widget.stub(:find).with("10") { [mock_widget] }
      get :show
      assigns(:mock_widget) == mock_widget
    end
  end

  describe "Put widget" do
    it "updates the widget attributes" do
      Widget.stub(:find).with("6") { [mock_widget] }
      mock_widget.should_receive(:update_attributes).with({'these' => 'params'})
      put :update, :id => "6", :widget => {'these' => 'params'}
    end
  end

  describe "delete destroy" do
    it "destroys the requested widget" do
      Widget.stub(:find).with("10") { [mock_widget] }
      mock_widget.should_receive(:destroy)
      get :destroy, :id => "10"
    end
  end
end 
```

Any I configured my spec helper to devise settings. My controller_macros.rb is

```
module ControllerMacros
  def login_user
    before(:each) do
      @request.env["devise.mapping"] = Devise.mappings[:user]
      user = Factory(:user)
      #user.confirm! # or set a confirmed_at inside the factory. Only necessary if you are using the confirmable module
      sign_in user
    end
  end
end 
```

And my spec_helper.rb

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|
  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr
  config.include Devise::TestHelpers, :type => :controller
  config.extend ControllerMacros, :type => :controller
  config.include RequestMacros, :type => :request
  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

end 
```

Finally, my devise.rb that is under the support file,

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end 
```

So. When I debug my controller.spec file, there is no current_user in update and delete describe blocks. When I run the `ender$ rspec spec/controllers/widgets_controller_spec.rb` I face with

```
Failures:

  1) WidgetsController Put widget updates the widget attributes
     Failure/Error: put :update, :id => "6", :widget => {'these' => 'params'}
     NoMethodError:
       undefined method `update_attributes' for nil:NilClass
     # ./app/controllers/widgets_controller.rb:60:in `block in update'
     # ./app/controllers/widgets_controller.rb:59:in `update'
     # ./spec/controllers/widgets_controller_spec.rb:52:in `block (3 levels) in <top (required)>'

  2) WidgetsController delete destroy destroys the requested widget
     Failure/Error: get :destroy, :id => "10"
     NoMethodError:
       undefined method `destroy' for nil:NilClass
     # ./app/controllers/widgets_controller.rb:72:in `destroy'
     # ./spec/controllers/widgets_controller_spec.rb:60:in `block (3 levels) in <top (required)>'

Finished in 0.4569 seconds
6 examples, 2 failures

Failed examples:

rspec ./spec/controllers/widgets_controller_spec.rb:49 # WidgetsController Put widget updates the widget attributes
rspec ./spec/controllers/widgets_controller_spec.rb:57 # WidgetsController delete destroy destroys the requested widget 
```

How I fix it?

**SOLUTION:** I shifted findbyid to findbyuuid because of searching over uuid. After that, I need to return an array and I got it on this way,

```
Widget.stub(:find_by_uuid).with("6").and_return(mock_widget(:update_attributes => true)) 
```

It's done!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T08:22:48.377

In your spec you're doing

```
Widget.stub(:find).with("6")... 
```

But your app code calls `Widget.find_by_uuid`. Your spec code should be stubbing out the calls your app code will do. Similarly, your app code is expecting `params[:uuid]` to be set but your spec is only `params[:id]`.

You should also return a correct return value - `find_by` returns a single object but the stub you are setting up returns an array.

```
Widget.stub(:find_by_uuid).with("6") { mock_widget} 
```

Will make your stub return the mock widget rather than an array containing the mock widget

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T07:04:16.057

You just have to look at WidgetCOntroller#update to know on which object 'update_attributes' is getting called.

```
 def update
    @widget = Widget.find_by_uuid(params[:uuid])

    respond_to do |format|
      if @widget.update_attributes(params[:widget]) 
```

So, basically, this call is returning nil:

```
Widget.find_by_uuid(params[:uuid]) 
```

You can debug this using 'rails console'.

# php - 我的代码可以安全注入吗？

> ID：10765671
> 
> 赞同：3
> 
> 时间：2012-05-26T11:03:22.107
> 
> 标签：php, mysql, sql, pdo

我以前使用 MySQL，被告知它不安全，所以现在我在 PDO 中重新编写了我的管理登录面板，这里的用户和其他论坛都说不能注入。但是黑客仍然在进入......我在登录后编辑了页面并告诉被黑客告诉我我在上面放了什么，黑客告诉我......

我需要知道我的代码是否安全。他告诉我他正在通过 SQL 进入。

因此，首先我将他们的 IP 存储在会话中，因此如果他们的 IP 更改，它将注销它们（或用户名）

```
if ( isset($_SESSION['last_ip']) == false )
{
    $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR'];
}
if ( $_SESSION['last_ip'] !== $_SERVER['REMOTE_ADDR'] )
{
    session_unset();
    session_destroy();
} 
```

然后这是我的登录信息：

```
session_start();
include 'functions/functions.php';  
$db = mysqlconnect();
$password = md5($_POST['mypassword']);
$mod = 1; 
$statement = $db->prepare("SELECT * FROM users WHERE username = ? AND password = ?");
$statement->execute(array($_POST['myusername'],$password));
$result = $statement->fetchObject()->mod;
$count = $statement->rowCount();
if ( $result == 1 ) {
    $db = mysqlconnect();
    // Register $myusername, $mypassword and redirect to file "login_success.php"
    $_SESSION['user'] = $_POST['myusername'] ;
    //Test if it is a shared client
    if ( !empty($_SERVER['HTTP_CLIENT_IP']) ) {
        $ip=$_SERVER['HTTP_CLIENT_IP'];
        //Is it a proxy address
    } elseif ( !empty($_SERVER['HTTP_X_FORWARDED_FOR']) ) {
        $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    } else {
        $ip=$_SERVER['REMOTE_ADDR'];
    }
    $sqll = "UPDATE users SET lastip=? WHERE username=?";
    $q = $db->prepare($sqll);
    $q->execute(array($ip,$_SESSION['username']));
    $_SESSION['user'] = $_POST['myusername'] ;
    $sqlll = "INSERT INTO user_log (username,ip) VALUES (?, ?)";
    $qq = $db->prepare($sqlll);
    $qq->execute(array($_SESSION['username'],$ip));
    header("Location: home.php");
} else {
    echo "Wrong Username or Password";
} 
```

可以注入代码吗？

这是我的 home.php 页面，它阻止用户查看它。

```
/// My conenct is here                    
$sql = "SELECT * FROM users WHERE username='$_SESSION[user]'";
$result = mysql_query($sql) or die(mysql_error());
$values = mysql_fetch_array($result);

if( isset($_SESSION['user']) ) {

} else {
    echo "Bye Bye";
    die;
}

if ( $values['mod'] == 1 ) {    
    echo "welcome";  
} else {
    echo"Your account has been reported for hacking";
    die;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-16T23:40:49.183

假设您显示的查询是您使用的唯一查询，那么黑客如何使用您认为会阻止他的代码是很有趣的。在 IT 世界中，前门通常是三重锁着的，而后门是开着的。在这种情况下，它不是后门，而是门上的小窗户，用于查看是否没有向骗子打开。

*对所有查询使用准备好的语句和变量绑定。*

这是一般规则。您只是忘记了“所有查询”中的“全部”。

您的声明：

```
$sql = "SELECT * FROM users WHERE username='$_SESSION[user]'"; 
```

是你打开的窗口。很明显，您的黑客在会话数据中欺骗了用户名。简单的解决方案是：

1.  验证用户名或您从外部收到的任何数据（$_SESSION、$_POST、一些 $_SERVER 和其他），然后再对它进行任何操作。当然在您执行任何数据库交互之前。
2.  像在其他查询中那样使用变量绑定。

在这种情况下，删除标签或使用 mysql_real_escape_string 的价值较小，因为在没有任何不可存储的字符的情况下完全可以破解。

顺便说一句，您实际上并不需要使用 PDO 来使用变量绑定。在mysql中也是完全可能的。

```
$verbLok = mysqli_connect(Iam, not, gonna, tellyou);
$result = array();
if (($stmtLok = $verbLok->prepare( "SELECT * FROM users WHERE username = ?  limit 1")))
{        
    $stmtLok->bind_param("s", $_SESSION[user]);
    $stmtLok->execute();
    $result = $stmtLok->get_result();
    $stmtLok->close();
}
mysqli_close($verbLok); 
```

应该为您解决问题。$result 将保存一个结果行数组。我对传统查询不太熟悉了，但据我所知，它与您的代码相似。

可以[在此页面上](http://unixwiz.net/techtips/sql-injection.html)找到有关如何对您的查询进行 SQL 代码注入攻击的有趣阅读。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-28T20:41:48.633

一个好的 SQL 注入预防措施是转义任何和所有可用于在评估中终止 SQL 命令以启动新命令的文本。

为此，您应该转义输入中的任何引号，并使用更好的 SQL — 在字段和表名周围使用反引号，使用引号包裹任何非代码文本等。

```
SELECT * FROM `users` WHERE `id` = '1' 
```

`mysql_real_escape_string`然后用, 或手动替换 #039;转义所有引号；等，还要确保转义任何 HTML 以确保它不会弄乱其他东西，使用`htmlentities`等。

# view - 我想从我在 oracle DB 上创建的视图中硬编码虚拟列的值

> ID：10765678
> 
> 赞同：2
> 
> 时间：2012-05-26T11:04:11.483
> 
> 标签：view, oracle10g, crystal-reports-xi, dummy-data, hard-coding

我有一个视图，其中有一个名为 action 的虚拟列。我有一个公式 {@action}

如果 {abc_view.name} 以 "abc" 开头，则 {abc_view.action} = "表示动作" 否则 {abc_view.action} = ""

当我从记录过滤器部分调用这个公式时，我得到的只是水晶报告 2.0 中用于 Eclipse 的虚拟列操作下的“操作”。我如何达到我的目的。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T11:04:43.070

You can hardcode the dummy column in oracle view while creating the view where COL1 and COL2 columns have actual value like the below

```
CREATE OR REPLACE VIEW ABC_VIEW
AS 
SELECT 
CASE WHEN name like 'ABC%'
THEN 'Represents action' 
ELSE
ACB.ACTION
END AS ACTION,COL1,COL2 FROM ABC; 
```

# vim - 以交互方式关闭多个vim缓冲区？

> ID：10765680
> 
> 赞同：3
> 
> 时间：2012-05-26T11:04:24.853
> 
> 标签：vim

在打开文本编辑器一段时间后，尤其是在执行涉及大量文件的相当大的重构之后，您最终会打开很多缓冲区。

在 emacs 中，我已经习惯使用`kill-some-buffers`，它基本上从交互式 yes/no 会话开始，显示每个缓冲区的名称并允许您按`y`或`n`保留或删除每个缓冲区，直到所有缓冲区都呈现给您（或者您取消命令）。

有没有办法在vim中做同样的事情？我可以使用通配符，但文件名都是具有不同名称的 ruby​​ 文件（基本上是我项目中的每个文件）。对我来说最简单的事情是关闭*所有*缓冲区并重新开始，但这并不是我真正想要的解决方案，只是为了我自己未来的参考。

如果我可以打开一个包含所有缓冲区列表的拆分窗口并“标记”我想以某种方式关闭的每个缓冲区，然后“提交”该决定，那也可以。基本上只是不需要我将发人深省的逻辑应用于关闭一桶缓冲区的过程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:53:29.357

我找到了允许类似事情的插件[自助餐：](http://www.vim.org/scripts/script.php?script_id=3896)

*   用于`:Bufferlist`打开缓冲区列表。
*   `j`使用常用键 ( , )上下移动`k`。
*   删除光标下的缓冲区`d`

我认为这足以将缓冲区标记为删除。

# selenium - 如何自动化 Java 小程序？

> ID：10765682
> 
> 赞同：6
> 
> 时间：2012-05-26T11:04:42.510
> 
> 标签：selenium, testing, automation, applet, automated-tests

我必须创建一个测试脚本并且我正在使用 Selenium，但我无法记录或编辑富文本编辑器 Ephox。那么有没有办法用 Selenium 做到这一点，因为我看到一篇文章指出 Java 小程序不能使用 Selenium 记录。此外，如果不是 Selenium，是否还有其他可用于此目的的工具？

这是 Ephox 的链接供您参考： [http ://editlive.com/demo](http://editlive.com/demo)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-28T09:54:48.600

[LiveConnect](http://en.wikipedia.org/wiki/LiveConnect)可以帮助您！

甚至还有一个用于它和 Selenium 的工具（虽然我没有使用它，所以我无法判断它是否运行良好）：[https ://web.archive.org/web/20150526204052/http:// fest.codehaus.org/Selenium](https://web.archive.org/web/20150526204052/http://fest.codehaus.org/Selenium)

除此之外，[`Robot`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)也可能有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-28T14:43:54.550

您无法使用 Web 测试工具可靠地自动化小程序。您需要使用 Swing 测试工具。有几个，但我推荐的两个是：

[http://code.google.com/p/fest/](http://code.google.com/p/fest/)

和

[http://www.uispec4j.org/](http://www.uispec4j.org/)

第二个也很有趣，因为它允许您为不需要在屏幕上呈现的 UI 编写单元测试。

# tridion - 如何在 SDL Tridion 中为不同页面创建导航菜单？

> ID：10765684
> 
> 赞同：6
> 
> 时间：2012-05-26T11:05:00.033
> 
> 标签：tridion, tridion-2011

我为所有这些类别创建了不同的页面：书籍、手机、comp 等。现在我想将这种类型的导航菜单（如图所示）放在所有页面中，打开一个页面应该突出显示相应的菜单链接。

我应该创建一个包含文本和链接的模式并使其具有多值性吗？那么我创建一个组件并最终在所有页面中呈现它们？

如果没有，请建议任何其他更好的方法。

![在此处输入图像描述](../Images/69062328c59893447231c4d37eb3d1a8.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-26T11:59:58.507

在 Tridion 中生成任何导航的最常用方法是在基于结构组和页面的 C# 模板中简单地生成它。

例如，可以通过以下方式轻松地从模板（C# 片段或实现的类`ITemplate`）中生成面包屑路径：

```
var pageDocument = package.GetByType(ContentType.Page).GetAsXmlDocument();
var current = new Page(pageDocument.DocumentElement, engine.GetSession());
var breadcrumb = page.Title;
while (current.OrganizationalItem != null)
{
    current = current.OrganizationalItem;
    breadcrumb = current.Title + " > " + breadcrumb;
}
package.PushItem("breadcrumb", 
                 package.CreateStringItem(ContentType.Text, breadcrumb)); 
```

上面的片段实际上只显示了如何向上导航结构组的层次结构。您仍然必须将每个结构组作为链接，可能通过查看 each 的`PublishUrl`属性`StructureGroup`。

我知道您不是在询问面包屑路径，您的看起来更像是左导航。但是所有导航元素的方法都是相似的：使用 ITemplate 中的 TOM.NET 遍历相关的 Pages 和 StructureGroups，并从中生成导航 HTML。

要获取当前 StructureGroup 中所有页面的列表（并标记当前页面），我希望是这样的：

```
var pageDocument = package.GetByType(ContentType.Page).GetAsXmlDocument();
var current = new Page(pageDocument.DocumentElement, engine.GetSession());
var sg = (StructureGroup) page.OrganizationalItem;
string result = "<ul>";
foreach (var page in sg.GetItems())
{
    result += (page.Id != current.Id) ? "<li>" : "<li class='selected'>";
    result += page.Title;
    result += "</li>";
}
result += "</ul>";
package.PushItem("siblings", package.CreateHtmlItem(result)); 
```

另请参阅[Nick 的这个很好的示例，他在其中生成了整个站点地图](http://www.tridiondeveloper.com/web-sitemap)。这更接近您最终需要的内容，但当然还有更多代码（此处无法重现）。Albert 还分享了[他对这种方法的一些经验，并提到了替代方案](http://www.albertteboekhorst.com/tridion_how_to/sdl-tridion-sitemapnavigation-rendering-1s/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T07:08:44.700

如果您使用 ASPX 作为页面类型，下面将描述其他导航逻辑：

1.  创建一个包含重要页面信息（ID、路径、标题...）的导航 xml（包含所有页面）

2.  创建将生成面包屑或任何其他导航的 ascx 控件。作为参数控制应该检索当前页面ID

3.  更改页面 DWT（放置 ascx 控件）

这样可以减少渲染（发布）时间，导航将在页面加载时渲染。不幸的是，您通过这种方式增加了页面加载时间。这取决于您需要什么更适合您的解决方案。刷新导航 XML 是这种方法的问题之一......

# vb.net - 将类的属性作为集合检索

> ID：10765688
> 
> 赞同：0
> 
> 时间：2012-05-26T11:05:33.173
> 
> 标签：vb.net, oop, reflection, collections, vb.net-2010

我正在做一个小项目，并在试图保持 OOP 时遇到了一些麻烦。

我有一个全局变量：

```
Public Stations As New Microsoft.VisualBasic.Collection() 
```

和 2 个类：`Station`& `Unit`：

```
Public Class Station

    Property name As String
    Property stype As String
    Property units As New Collection
End Class

Public Class unit
     Property name As String
     Property lbl As String
     Property ip As String
     Property utype As String
End Class 
```

我想你可以在这里看到层次结构：

```
Collection Stations -> Object Station -> Collection Units -> Object Unit 
```

有一个代码可以从 XML 文件中获取数据，并据此将对象添加到上面的集合中。

但是，我不知道如何根据集合检索单位`Stations`集合。我试过这样的事情：

```
 Dim st = Stations.Item("The key of a specific object in the Stations collection")
    Dim stUnits = st.GetType().GetProperty("units") 
```

但是当我试图检索`stUnits`集合时：

```
For Each unit In stUnits 
```

它说这`stUnits`不是一个集合。我有点困惑，感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:27:48.663

傻我。忘记设置`st`为站对象。

```
Dim st As Station = Stations.Item("The key of a specific object in the Stations collection") 
```

然后，简单地说：

```
Dim stUnits = st.units 
```

# iphone - 横向时图像定位不正确

> ID：10765689
> 
> 赞同：0
> 
> 时间：2012-05-26T11:05:36.030
> 
> 标签：iphone, ios, ios4, orientation

请找到以下代码，当我将模拟器旋转到横向时，图像位置不正确。但在肖像中，它似乎很好。

我的图像尺寸是高度 768，宽度是 1024。即使我已经相应地设置了框架。

我不确定这背后的原因是什么。

请让我知道我的代码中有什么问题。

```
const CGFloat HEIGHT = 1024.0;
const CGFloat WIDTH = 768.0;
#define myViewPortrait CGRectMake(0.0f, 0.0f, 768.0f,1024.0f)
#define myViewLandSacpe CGRectMake(0.0f, 0.0f, 1024.0f,768.0f)

#define kAnimationKey @"animationKey"

-(void)layoutScrollImages
{
  UIImageView *view = nil;
  NSArray *subviews = [myScrollView subviews];

  CGFloat curXLoc = 0;
  for (view in subviews)
  {
    if ([view isKindOfClass:[UIImageView class]] && view.tag > 0)
    {
      CGRect frame = view.frame;
      frame.origin = CGPointMake(curXLoc, 0);
      view.frame = frame;

      curXLoc += (self.view.frame.size.width);
    }
  }

  [myScrollView setContentSize:CGSizeMake((myImagesCount * self.view.frame.size.width), [myScrollView bounds].size.height)];
}   

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {

  self.view.backgroundColor = [UIColor viewFlipsideBackgroundColor];
  myScrollView = [[UIScrollView alloc] initWithFrame:
  CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

  [self.view addSubview:myScrollView];

  UISwipeGestureRecognizer *rightRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(rightSwipeHandle:)];
  rightRecognizer.direction = UISwipeGestureRecognizerDirectionRight;
  rightRecognizer.numberOfTouchesRequired = 1;
  [rightRecognizer setDelegate:self];
  [myScrollView addGestureRecognizer:rightRecognizer];
  [rightRecognizer release];

  UISwipeGestureRecognizer *leftRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(leftSwipeHandle:)];
  leftRecognizer.direction = UISwipeGestureRecognizerDirectionLeft;
  leftRecognizer.numberOfTouchesRequired = 1;
  [leftRecognizer setDelegate:self];
  [myScrollView addGestureRecognizer:leftRecognizer];
  [leftRecognizer release];

  [myScrollView setBackgroundColor:[UIColor blackColor]];
  [myScrollView setCanCancelContentTouches:NO];
  myScrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
  myScrollView.clipsToBounds = YES;     
  myScrollView.scrollEnabled = YES;
  myScrollView.pagingEnabled = YES;
  myScrollView.delegate = self;
  myImagesCount = 5;
  myScrollView.showsHorizontalScrollIndicator=NO;
  myScrollView.showsVerticalScrollIndicator=NO;

  for (int i = 1; i <= myImagesCount; i++)
  {
    NSString *imageName = [NSString stringWithFormat:@"screen-%d.jpg", i];
    UIImage *image = [UIImage imageNamed:imageName];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    CGRect rect = imageView.frame;
    rect.size.height = myScrollView.frame.size.height;
      NSLog(@"%d -----",self.view.frame.size.width);
    rect.size.width = myScrollView.frame.size.width;
    imageView.frame = rect;
    imageView.tag = i;
    [myScrollView addSubview:imageView];
    [imageView release];
  }

  [self layoutScrollImages];

  [super viewDidLoad];

}

// if you want to change things based on orientation
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation duration:(NSTimeInterval)duration 
{
    switch (interfaceOrientation) 
    {
        case UIInterfaceOrientationPortrait:
        {       
            //changes for Portait
            NSLog(@"Portait");
            [self.view setFrame:CGRectMake(0,0,768,1024)];
            myScrollView.frame = self.view.frame;
        }
            break;

        case UIInterfaceOrientationPortraitUpsideDown: 
        {
            //changes for PortaitUpsideDown
            NSLog(@"PortaitUpsideDown");
            [self.view setFrame:CGRectMake(0,0,768,1024)];
            myScrollView.frame = self.view.frame;

        }
            break;

        case UIInterfaceOrientationLandscapeRight: 
        {
            //changes for LandscapeRight
            NSLog(@"LandscapeRight");
            [self.view setFrame:CGRectMake(0,0,1024,768)];
            myScrollView.frame = self.view.frame;

        }
            break;

        case UIInterfaceOrientationLandscapeLeft: 
        {
            //changes for LandscapeRight
            NSLog(@"LandscapeRight");
            [self.view setFrame:CGRectMake(0,0,1024,768)];
            myScrollView.frame = self.view.frame;

        }
            break;          
    }
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
}

- (void)rightSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer 
{
  CATransition *animation = [CATransition animation];
  [animation setDelegate:self];
  [animation setType:kCATransitionFade];
  [animation setSubtype:kCATransitionFromRight];
  [animation setDuration:1.0];
  [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
   kCAMediaTimingFunctionEaseInEaseOut]];
  [self.view exchangeSubviewAtIndex:0 withSubviewAtIndex:1];
  [[self.view layer] addAnimation:animation forKey:kAnimationKey];  

}

- (void)leftSwipeHandle:(UISwipeGestureRecognizer*)gestureRecognizer 
{
    CATransition *animation = [CATransition animation];
    [animation setDelegate:self];
    [animation setType:kCATransitionFade];
    [animation setSubtype:kCATransitionFromLeft];
    [animation setDuration:1.0];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:
                                  kCAMediaTimingFunctionEaseInEaseOut]];
    [self.view exchangeSubviewAtIndex:0 withSubviewAtIndex:1];
    [[self.view layer] addAnimation:animation forKey:kAnimationKey];  
}

// Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

    return YES;
} 
```

> 编辑：因为我现在无法提交评论，所以在调试时它会在 willrotate 的所有情况下进行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:27:02.763

Write your code in `- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation` instead of `- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation) interfaceOrientation duration:(NSTimeInterval)duration` and implement in it . I think it will be work.

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        //return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
        if ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight)) {
           //implement your code 
        return (interfaceOrientation != UIInterfaceOrientationLandscapeRight);
    } else {

        return YES;
    }
} 
```

# php - 为什么我的查询没有更新？

> ID：10765691
> 
> 赞同：0
> 
> 时间：2012-05-26T11:06:08.410
> 
> 标签：php, mysql

我的 php 文件中有以下查询：

```
 if ($user) { //user is logged in (which he is)
        $highscore = mysql_query("SELECT highscore FROM highscore WHERE fbID = $user"); //wil give 200
        $fb_country_str = nl;

        if (mysql_num_rows($highscore) == 0) { //if no result from highscore set it to 1
            $highscore = 1;
        } else { //if we do get a result, select the country (in this case it is: uk)
            $country = mysql_query("SELECT country FROM highscore WHERE fbID = $user");
            if (!($country == $fb_country_str)) { //if the country is NOT the same, update the country with $fb_country_str (which in this case it should update)
                $sql = mysql_query("UPDATE highscore SET country = $fb_country_str WHERE fbID = $user");
            }
        }
    } 
```

现在，在运行时，它不会更新应将国家/地区 uk 更改为 nl 的数据库。为什么不？我错过了什么？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:09:47.110

mysql_query 函数不返回字符串，它将返回可与其他 mysql_* 函数一起使用的资源（请参阅[http://php.net/mysql_query](http://php.net/mysql_query)）

所以你的变量**$country**不是你所期望的。您需要使用**mysql_fetch_assoc**或**mysql_result**之类的函数来获取国家/地区字符串

**您可以在 php.net 手册页上看到示例，并且当您在$highscore**上调用 mysql_num_rows 函数时，您已经在该脚本中使用了返回值作为资源（而不是标量值）

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:09:27.367

```
 if ($user) { //user is logged in (which he is)
        $highscore = mysql_query("SELECT highscore FROM highscore WHERE fbID = $user"); //wil give 200
        $fb_country_str = "nl"; //It's a string , you need quotes.

        if (mysql_num_rows($highscore) == 0) { //if no result from highscore set it to 1
            $highscore = 1;
        } else { //if we do get a result, select the country (in this case it is: uk)
            $getCountry = mysql_query("SELECT country FROM highscore WHERE fbID = $user");
//NOTICE - COUNTRY IS NOT THE COUNTRY VALUE YET!
$country = mysql_fetch_array($country);
$country = $country['country'];
            if (!($country == $fb_country_str)) { //if the country is NOT the same, update the country with $fb_country_str (which in this case it should update)
                $sql = mysql_query("UPDATE highscore SET country = $fb_country_str WHERE fbID = $user");
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:10:00.473

$user - 您将其视为布尔值（在 if 语句中），然后是查询中的数字（如果我假设正确）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T11:16:55.393

更改最后一个 if 条件

```
if ($country != $fb_country_str) 
{ 
//if the country is NOT the same, update the country with $fb_country_str (which in this case it should update)
$sql = mysql_query("UPDATE highscore SET country = $fb_country_str WHERE fbID = $user");
} 
```**

# iphone - 无法在 iPhone 中捆绑加载 NIB

> ID：10765692
> 
> 赞同：0
> 
> 时间：2012-05-26T11:06:13.403
> 
> 标签：iphone, objective-c, ios5, xib

我收到这个错误...

```
enter code here
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason:     'Could not load NIB in bundle: 'NSBundle </Users/patrontechnosoft/Library/Application Support/iPhone Simulator/5.0/Applications/EBCB993E-A707-4121-BE4C-13B34466B44D/New GMAT - Practice.app> (loaded)' with name 'IRAnswerViewController_iPad'' 
```

*** First throw call stack: (0x1a88052 0x1c99d0a 0x1a30a78 0x1a309e9 0x584838 0x42be2c 0x42c3a9 0x42c5cb 0x447b89 0x4479bd 0x445f8a 0x445e2f 0x4478f4 0x1a89ec9 0x3695c2 0x36955a 0x58e569 0x1a89ec9 0x3695c2 0x36955a 0x40eb76 0x40f03f 0x40ebab 0x590d1f 0x1a89ec9 0x3695c2 0x36955a 0x40eb76 0x40f03f 0x40e2fe 0x38ea30 0x38ec56 0x375384 0x368aa9 0x23d1fa9 0x1a5c1c5 0x19c1022 0x19bf90a 0x19bedb4 0x19beccb 0x23d0879 0x23d093e 0x366a9b 0x1d5a 0x1ca5) 终止调用抛出异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:58:10.870

确保您使用正确的拼写`initWithNibName:`。

许多人确实在这里犯了拼写错误并得到了错误。养成复制和粘贴的习惯，这样出错的机会就会减少。

# html - HTML/CSS - 如何让 div 相互契合

> ID：10765698
> 
> 赞同：0
> 
> 时间：2012-05-26T11:07:23.823
> 
> 标签：html, css

我正在尝试让我的 div 像在 pinterest.com 上一样相互匹配。现在我的 html/css 是这样的：

```
<div id="content">
    <div class="box">my content, which can be xx px heigh.</div>
    <div class="box">my content, which can be xx px heigh.</div>
    <div class="box">my content, which can be xx px heigh.</div>
</div>

#content{ float:left;width:1000px; }
.box{
  margin: 10px;
  padding: 5px;
  width: 220px;
  float: left;
} 
```

.box 可以是帖子的任何高度。所以我希望我的 div 适合它的高度。就像 pinterest.com :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:26:12.393

考虑列

css

```
 <style type="text/css">

  .container { display:block;width:100%; /* or whatever you are using */ }
  .col { display:block;float:left;width:25%; }
  .box { display:block; padding:10px;margin:10px;}
  .clear { display:block; clear:both;line-height:0;}

</style> 
```

标记

```
<div class="container">

 <div class="col">

  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>

 </div>

 <div class="col">

  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>

 </div>

 <div class="col">

  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>

 </div>

 <div class="col">

  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>
  <div class="box">my content, which can be xx px heigh.</div>

 </div>

 <div class="clear"></div>

</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:15:57.593

没关系，我使用 jQuery 找到了这个插件：

[http://www.wookmark.com/jquery-plugin](http://www.wookmark.com/jquery-plugin)

# php - 正则表达式匹配除尾随空格以外的任何字符

> ID：10765699
> 
> 赞同：0
> 
> 时间：2012-05-26T11:07:25.973
> 
> 标签：php, regex, preg-replace, whitespace

我正在使用这个`/\([^\S\n]*(.*)[^\S\n]*\)/`正则表达式来匹配括号内的内容，它工作得很好，除非有尾随空格，它匹配它们。

例如，`( test1 test2 )`我想匹配`test1 test2`，但我匹配`test1 test2_`（我写了下划线，但它是尾随空格）。

知道如何从我的比赛中删除这个尾随空格吗？

我正在使用 PHP preg_replace 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:10:57.223

将表达式锚定到文本的末尾怎么样？

```
/\([^\S\n]*(.*)[^\S\n]*\)$/
                         ^ 
```

之后没有空格`\)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:23:53.893

试试这个

```
/\(\s*([^)]+?)\s*\)/ 
```

结果：

```
$reg = '/\(\s*([^)]+?)\s*\)/';

var_dump( preg_replace( $reg, '$1', "( test1 test2 )" ) );

//string(11) "test1 test2" 
```

# python - 使用 urlencode python 构建查询字符串

> ID：10765705
> 
> 赞同：14
> 
> 时间：2012-05-26T11:08:03.213
> 
> 标签：python, dictionary, urllib

我正在尝试构建一个 url，以便我可以使用`urllib`模块向它发送 get 请求。

假设我的`final_url`应该是

```
url = "www.example.com/find.php?data=http%3A%2F%2Fwww.stackoverflow.com&search=Generate+value" 
```

现在为了实现这一点，我尝试了以下方法：

```
>>> initial_url = "http://www.stackoverflow.com"
>>> search = "Generate+value"
>>> params = {"data":initial_url,"search":search}
>>> query_string = urllib.urlencode(params)
>>> query_string
'search=Generate%2Bvalue&data=http%3A%2F%2Fwww.stackoverflow.com' 
```

现在，如果您将我`query_string`的格式与您的格式进行比较，`final_url`您可以观察到两件事

1）参数的顺序是相反的，而不是`data=()&search=`它是`search=()&data=`

2）`urlencode`还编码了`+`in`Generate+value`

我相信第一个变化是由于字典的随机行为。所以，我想用[`OrderedDict`反转字典](https://stackoverflow.com/questions/6083531/python-reverse-dictionary-order)。正如，我正在使用`python 2.6.5`我做的

```
pip install ordereddict 
```

但是当我尝试时，我无法在我的代码中使用它

```
>>> od = OrderedDict((('a', 'first'), ('b', 'second')))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'OrderedDict' is not defined 
```

所以，我的问题是`OrderedDict`在 python 2.6.5 中使用的正确方法是什么以及如何`urlencode`忽略`+`in `Generate+value`。

另外，这是构建`URL`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-26T11:11:55.863

您不必担心编码，`+`它应该在取消转义 url 后在服务器上恢复。命名参数的顺序也不重要。

考虑到 OrderedDict，它不是 Python 内置的。您应该从以下位置导入它`collections`：

```
from urllib import urlencode, quote
# from urllib.parse import urlencode # python3
from collections import OrderedDict

initial_url = "http://www.stackoverflow.com"
search = "Generate+value"
query_string = urlencode(OrderedDict(data=initial_url,search=search))
url = 'www.example.com/find.php?' + query_string 
```

**如果您的 python 太旧**并且模块中没有 OrderedDict `collections`，请使用：

```
encoded = "&".join( "%s=%s" % (key, quote(parameters[key], safe="+")) 
    for key in ordered(parameters.keys())) 
```

无论如何，参数的顺序应该无关紧要。

注意 的`safe`参数`quote`。它防止`+`被转义，但这意味着，服务器将解释`Generate+value`为`Generate value`. `+`您可以通过写入`%2B`并标记`%`为安全字符来手动转义：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T11:12:58.357

首先，http请求中的参数顺序应该是完全不相关的。如果不是，那么另一边的解析库做错了。

其次，当然`+`是编码的。`+`用作编码网址中空格的占位符，因此如果您的原始字符串包含 a `+`，则必须对其进行转义。`urlencode`需要一个未编码的字符串，您不能将已编码的字符串传递给它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-29T23:53:16.210

对问题和其他答案的一些评论：

1.  如果您想保留 的顺序，请`urllib.urlencode`提交 k/v 对的有序序列，而不是映射（dict）。当你传入一个字典时， `urlencode`只需调用`foo.items()`来获取一个可迭代的序列。

`# urllib.urlencode accepts a mapping or sequence # the output of this can vary, because `items()` is called on the dict urllib.urlencode({"data": initial_url,"search": search}) # the output of this will not vary urllib.urlencode((("data", initial_url), ("search", search)))`

您还可以传入第二个`doseq`参数来调整可迭代值的处理方式。

2.  参数的顺序不是无关紧要的。以这两个网址为例：

    [https://example.com?foo=bar&bar=foo](https://example.com?foo=bar&bar=foo) [https://example.com?bar=foo&foo=bar](https://example.com?bar=foo&foo=bar)

    http 服务器应该认为这些参数的顺序无关紧要，但设计用于比较 URL 的函数则不会。为了安全地比较 url，需要对这些参数进行排序。

    但是，请考虑重复键：

    [https://example.com?foo=3&foo=2&foo=1](https://example.com?foo=3&foo=2&foo=1)

URI 规范支持重复键，但不解决优先级或排序问题。

在给定的应用程序中，这些都可能触发不同的结果并且也是有效的：

```
https://example.com?foo=1&foo=2&foo=3
https://example.com?foo=1&foo=3&foo=2
https://example.com?foo=2&foo=3&foo=1
https://example.com?foo=2&foo=1&foo=3
https://example.com?foo=3&foo=1&foo=2
https://example.com?foo=3&foo=2&foo=1 
```

1.  是`+`一个保留字符，以 urlencoded 形式表示一个空格（`%20`相对于部分路径）。`urllib.urlencode`转义使用`urllib.quote_plus()`，而不是`urllib.quote()`。OP 很可能只想这样做：

`initial_url = "http://www.stackoverflow.com" search = "Generate value" urllib.urlencode((("data", initial_url), ("search", search)))`

产生：

`data=http%3A%2F%2Fwww.stackoverflow.com&search=Generate+value`

作为输出。

# php - 来自一组键的 PHP 数组

> ID：10765706
> 
> 赞同：-1
> 
> 时间：2012-05-26T11:08:20.410
> 
> 标签：php, arrays, multidimensional-array

找到这篇帮助我的帖子：[Split a string to form multidimensional array keys？](https://stackoverflow.com/questions/10519108/split-a-string-to-form-multidimensional-array-keys)

无论如何，当涉及到字符串值时，这就像一个魅力，但如果数组键包含整数，那么它就会错过这些。

这是演示：

我有一组钥匙：

```
Array
(
    [0] => variable_data
    [1] => 0
    [2] => var_type
) 
```

以及创建嵌套数组的方法

```
function constructArray( &$array_ptr, $keys, $value )
    {
        // extract the last key
        $last_key = array_pop ( $keys );

        // walk/build the array to the specified key
        while ( $arr_key = strval( array_shift ( $keys ) ) )
        {
            if ( !array_key_exists ( strval($arr_key), $array_ptr ) )
            {
                $array_ptr[ strval($arr_key) ] = array ( );
            }
            $array_ptr = &$array_ptr[ strval($arr_key) ];
        }

        // set the final key
        $array_ptr[ $last_key ] = '$value';
    } 
```

我以这种方式使用它：

```
$keys = array(
    'variable_data',
    '0',
    'var_type'
);
    $clean_arr = array();
    constructArray($clean_arr, $keys, 'asd'); 
```

但输出如下所示：

```
Array
(
    [variable_data] => Array
        (
            [var_desc] => $value
        )

) 
```

如您所见， variable_data 索引不包含 0 索引。我已经测试了我可能知道的所有东西，但它没有。谁有更好的线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:36:02.617

# 解决方案

这是具有魔力的函数：

```
function constructArray( &$array_ptr, $keys, $value )
    {
        // extract the last key
        $last_key = array_pop ( $keys );

        foreach ( $keys as $arr_key )
        {
             unset($keys[$arr_key]);
             if ( !array_key_exists ( strval($arr_key), $array_ptr ) )
            {
                $array_ptr[ strval($arr_key) ] = array ( );
            }
            $array_ptr = &$array_ptr[ strval($arr_key) ];
        }

        // set the final key
        $array_ptr[ $last_key ] = $value;
    } 
```

用法：

```
$keys = array('variable_data', '0', 'var_desc');
$clean_arr = array();
constructArray($clean_arr, $keys, 'asd');

// Output
Array
(
    [variable_data] => Array
        (
            [0] => Array
                (
                    [var_desc] => asd
                )

        )

) 
```

# arrays - 将数组中的实例添加到另一个影片剪辑

> ID：10765707
> 
> 赞同：0
> 
> 时间：2012-05-26T11:08:56.870
> 
> 标签：arrays, adobe, export, actionscript-2, instance

我从事 ActionScript 3.0 编程，我对此非常了解。我有一个使用 ActionScript 2.0 的项目，但在向舞台添加实例时遇到了一个简单的问题。在 ActionScript 3.0 中，当我想向某个影片剪辑添加多个实例时，首先将它们保存在一个数组中，然后使用该数组设置 X 和 Y 以及宽度和 alpha 以及其他详细信息。

例子：

“ `itemBlock`”是我的实例，它是库中导出的影片剪辑。

```
for ( var i = 0 ; i < 24 ; i++ ) {
blockBANK[i] = new itemBlock(); // itemBlock is an exported movieclip in the library. 
blockBANK[i].x = // some calculation;
blockBANK[i].y = // some other calculation;
mainPage_mc.addChild(blockBANK[i]); // add to the mainPage_mc  holder
} 
```

现在我可以使用这个数组在我的 AS3 代码中的任何地方添加和编辑我的实例。在 AS2 中，我尝试了这些但不工作，也**没有**编译器错误！

```
for (var i=0;i<7;i++) { 
    var temp:MovieClip = new MovieClip();
    temp.attachMovie("itemBlock "," itemBlock "+i,0); 
    textboxBANK[i].addChild(temp);
    textboxBANK[i]._y = 40; 
    textboxBANK[i]._x = i * 20; 
    mainPage_mc.addChild(textboxBANK[i]);// add to holder
} 
```

不工作，没有编译器错误

```
for (var i=0;i<7;i++) { 
    var temp:MovieClip = new MovieClip();
    temp.attachMovie("itemBlock","itemBlock"+i,0); 
    textboxBANK[i].attachMovie(temp);
    textboxBANK[i]._y = 40; 
    textboxBANK[i]._x = i * 20; 
    mainPage_mc.attachMovie(textboxBANK[i]);// add to holder
} 
```

不再工作，也没有编译器错误..

我如何将实例放入数组中**并将它们添加到****AS2**中的该数组的持有者？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T12:33:09.900

据我所知，您使用*createEmptyMovieClip*方法在 AS2 中创建了一个新的 MovieClip。此外，AS2 不支持*addChild方法。*

AS2 显示列表与 AS3 完全不同。显示对象仅在其在舞台上时才存在（与 AS3 不同，您可以使用存储的 DisplayObject 遍历显示树）。简而言之，如果您尝试将 MovieClips 存储在一个数组中，以便稍后添加到舞台，这是不可能的。

您需要做的就是将它们添加到舞台上，并弄乱它们的 *_visible* 属性。然后让它们在稍后阶段可见。这是一些代码，基于我理解你想要做的......

```
var tempClips:Array = new Array();

for(var i = 0; i < 10; i++){

    var temp = mainStage.createEmptyMovieClip("temp"+i, mainStage.getNextHighestDepth());

    var temp_inner = temp.attachMovie("exportedLibrarySymbol", "temp_inner", temp.getNextHighestDepth());

    temp._visible = false; //or true if you want them to be seen instantly

    temp._x = someCalculation;
    temp._y = someCalculation;

    tempClips.push(temp);

} 
```

请注意，在 AS2 中，如果您尝试在相同深度的舞台上添加一些东西，则原始显示对象将消失。使用*getNextHighestDepth*方法来精确计算正确的整数。

更好地描述您正在尝试做的事情将非常有帮助。

# c# - DataGrid 中的超链接不起作用

> ID：10765712
> 
> 赞同：0
> 
> 时间：2012-05-26T11:09:40.133
> 
> 标签：c#, wpf

我正在编写一个 WPF 应用程序，并且在一个用户控件中我正在使用 DataGrid 中的超链接，但它不起作用。我使用 bing.com 只是为了测试。

```
<DataGrid Grid.Row="1" 
  AutoGenerateColumns="False" 
  Height="Auto" 
  Name="dataGrid1" 
  Width="Auto" 
  CanUserAddRows="False" 
  CanUserResizeColumns="True" 
  HorizontalAlignment="Stretch" 
  VerticalAlignment="Stretch" 
  Focusable="True" 
  IsHitTestVisible="False" 
  BorderThickness="0">
    <DataGrid.Columns >
        <DataGridTextColumn Header="Start Time" Width="*" Binding="{Binding Path=startTime}" CanUserSort="True"/>
        <DataGridTextColumn Header="End Time"   Width="*" Binding="{Binding Path=endTime}" CanUserSort="True"/>
        <DataGridTextColumn Header="Resources"  Width="*" Binding="{Binding Path=resources}" CanUserSort="True"/>
        <DataGridTextColumn Header="Action"  Width="*" Binding="{Binding Path=action}" CanUserSort="True"/>
        <DataGridTextColumn Header="Result"  Width="*" Binding="{Binding Path=result}" CanUserSort="True"/>
        <DataGridTemplateColumn Header="Health"  Width="*" CanUserSort="True">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock >
                        <Hyperlink NavigateUri="http://www.bing.com" RequestNavigate="Hyperlink_RequestNavigate"><!--"{Binding Path=healthUri}">-->
                            <TextBlock Text="{Binding Path=healthUri}" Focusable="True" />                                                                                    
                        </Hyperlink>                                    
                    </TextBlock>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:27:37.887

来自 MSDN：

仅当超链接的直接或间接父级是导航主机（包括 NavigationWindow、Frame 或任何可以托管 XBAP 的浏览器（包括 Internet Explorer 7、Microsoft Internet Explorer 6 和 Firefox 2.0+））时，才会发生超链接导航。

你可以做：

```
<Hyperlink NavigateUri="http://www.bing.com" RequestNavigate="Hyperlink_RequestNavigate">

private void Hyperlink_RequestNavigate(object sender, RequestNavigateEventArgs e)
{
    Process.Start(new ProcessStartInfo(e.Uri.AbsoluteUri));
    e.Handled = true;
} 
```

# c# - 关闭应用程序后如何在通知区域运行应用程序

> ID：10765714
> 
> 赞同：-3
> 
> 时间：2012-05-26T11:09:57.830
> 
> 标签：c#, .net

我创建了一个演示应用程序，并希望始终像防病毒、micromax 数据卡软件或任何其他通知软件一样运行。

我的主要目标是：当我关闭应用程序时，我的应用程序可能会关闭，但它应该运行并显示在 gtalk、skypee 等通知区域图标中，当它单击时，应用程序窗口将打开并显示在任务栏中.

怎么做请用代码和例子描述一下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:26:15.717

我希望您知道 WinForms 中的通知图标和上下文菜单条。添加 ContextMenustrip 选择编辑项目并添加`show`和`Exit`菜单项工具条。添加相应的点击事件。

```
using System;
using System.Windows.Forms;

namespace test
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            //Form Closing Event
            e.Cancel = true;
            Hide();
        }

        private void toolStripMenuItem1_Click(object sender, EventArgs e)
        {
            //Exit in notify icon Context menu tool strip
           Environment.Exit(-1);
        }

        private void toolStripMenuItem2_Click(object sender, EventArgs e)
        {
            //Show in notify icon context menu tool strip
            Show();
        }
    }
} 
```

# sql-server - 附近使用 Long/Lat SQL Server 2008

> ID：10765716
> 
> 赞同：0
> 
> 时间：2012-05-26T11:10:02.210
> 
> 标签：sql-server, geometry, latitude-longitude, geo

我有一个名为 Places 的表，该表中的每条记录都有其经度和纬度。

我想在这张桌子上搜索以找到特定经纬度附近的地方（假设附近圆的半径为 25 公里）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-24T22:21:05.570

由于您有给定的距离来限制搜索，因此您的问题与那些要求找到最近点的问题（无限制）略有不同。我发明了两个将距离计算简化为度数差异的公式。这些公式只是拟合地球形状而不是任何其他球形：

下图显示了在给定纬度周围 1 度经度中包围了多少公里：

```
LongDistanceFactor = − 0.0114 * (lat)^2 − 0.2396(lat) + 112.57 
```

第二个显示了在给定纬度周围 1 度纬度所包围的公里数：

```
LatDistanceFactor = 0.0139(lat) + 110.51 
```

因此，对于 (lat,lng) 周围的给定 25 公里，您只需要找到它们的 lat 介于`lat ± (25/LatDistanceFactor)`和 long 之间的点`lng ± (25/LongDistanceFactor)`

编辑：当我对纬度和经度都使用±时，目标区域将是一个正方形，每边长度为 50 公里。如果你坚持一个圆形区域，你可以用真正的**点距离**公式对第一个系列的结果进行第二轮计算，并省略那些不在你的圈子里的。

# delphi - Delphi 中的索引属性 - 初学者正在使多个 Player 对象在 Game 对象中可访问

> ID：10765722
> 
> 赞同：0
> 
> 时间：2012-05-26T11:10:59.563
> 
> 标签：delphi

我是一个初学者的德尔福用户。我有这个 while 循环，而不是只有一个玩家 (player1)，我想有很多玩家，写成 Player[i]。我已经编辑了我的课程，它可以让我添加 [I]

```
 while i < FMyPlayers.TeamCount do
    begin
       buttonSelected := MessageDlg('Placeing Unit: '+FMyPlayers.Player[i].Values['name']+'.',mtError, mbOKCancel, 0);
          if buttonSelected = mrCancel then exit;
       imageyouwant.LoadFromFile(thisdir+'\char\'+FMyPlayers.Player[i].Values['picon']);
       Hexmap1.ImageAHex(ImageYouWant , bsSolid, position);
       FMyPlayers.Player[i].Add('pos='+inttostr(position.x)+inttostr(position.Y));
       FMyPlayers.PlaceUnit := false;
    end; 
```

但是现在在我的课堂上我得到了错误

```
 property Player: array[1..20] of TStringList read P; 
```

我的 MYPlayer 类如下

```
TPlayers = class
Private
  p : array[1..20] of TStringList;
  FPlaceUnit: Boolean;
  FTeamCount: Integer;
Public
  property Player: array[1..20] of TStringList read P;
  property PlaceUnit : Boolean read FPlaceUnit write FPlaceUnit;
  procedure AddPlayer (PlayerNo : integer; player : String);
  property TeamCount : Integer read FTeamCount write FTeamCount;

 constructor Create;   virtual;
End; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:38:10.907

不是一个真正的答案，而是扩展 Warren P 的建议。看起来您的课程没有从头开始正确设计。

```
uses Generics.Collections;

TPlayer = class
 // add player related properties & routines here
end;

TGame = class
 protected  
   // all fields go here
   FPlayers : TObjectList<TPlayer>;

 public

   function AddPlayer(settings : TStringList) : TPlayer; 

   property Player[index:Integer]:TPlayer read GetPlayer;
end; 
```

# c# - 在 ASP.NET MVC 3 中添加标头

> ID：10765725
> 
> 赞同：13
> 
> 时间：2012-05-26T11:11:09.233
> 
> 标签：c#, asp.net-mvc-3, http-headers

我有一个基本的 ASP.NET MVC 3 应用程序。我有一个如下所示的基本操作：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult AddItem(string id, string name, string description, string username)
{
  // Do stuff
  return Json(new { statusCode = 1 });
} 
```

我试图让某人通过将托管在 Phone Gap 中的 JQuery Mobile 应用程序访问此操作。我被告知我需要`Access-Control-Allow-Origin: *`在我的标题中返回。但是，我不确定如何在标题中返回它。有人可以告诉我该怎么做吗？

非常感谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-26T11:47:35.400

```
 public class HttpHeaderAttribute : ActionFilterAttribute
    {
        /// 
        /// Gets or sets the name of the HTTP Header.
        /// 
        /// The name.
        public string Name { get; set; }

        /// 
        /// Gets or sets the value of the HTTP Header.
        /// 
        /// The value.
        public string Value { get; set; }

        /// 
        /// Initializes a new instance of the  class.
        /// 
        /// The name.
        /// The value.
        public HttpHeaderAttribute(string name, string value)
        {
            Name = name;
            Value = value;
        }

        public override void OnResultExecuted(ResultExecutedContext filterContext)
        {
            filterContext.HttpContext.Response.AppendHeader(Name, Value);
            base.OnResultExecuted(filterContext);
        }
   } 
```

* * *

```
[HttpHeader("Access-Control-Allow-Origin","*")]
    public ActionResult myaction(int id)
    {
        // ...
    } 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-26T11:17:14.550

```
Response.AppendHeader("Access-Control-Allow-Origin", "*"); 
```

# ruby-on-rails - Ruby On Rails - Resque - 停止工人 / Pid-Command

> ID：10765728
> 
> 赞同：1
> 
> 时间：2012-05-26T11:11:37.070
> 
> 标签：ruby-on-rails, command, background-process, resque, pid

我已使用此命令在 Ubuntu 上启动 resque 计划，但如果我想停止工作人员和计划，我该怎么办？

```
PIDFILE=./resque.pid BACKGROUND=yes QUEUE="*" rake resque:scheduler >>  worker2.log &
PIDFILE=./resque.pid BACKGROUND=yes QUEUE="*" rake resque:work >>  worker2.log & 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:25:11.583

如果您同时运行这两个命令，那么大概只有最后一个工作人员会将其进程 ID 写入文件。您可能想要做的不是重新发明轮子，而是使用诸如[上帝](http://godrb.com/)或[工头](http://ddollar.github.com/foreman/)之类的东西来管理 resque 过程的启动/停止/等。

这是我以前使用过的示例上帝配置：[gist](https://gist.github.com/2793738)

Foreman 采用不同的方法（并且没有像上帝那样进行监控）来使用操作系统的作业管理——例如。你可以让它在 Ubuntu 上生成新贵脚本，然后你可以`resque_scheduler [start|restart|stop]`像任何其他类型的守护进程一样运行。

# web-services - HTTP 状态 404 - Servlet JAX-RS Servlet 不可用

> ID：10765734
> 
> 赞同：1
> 
> 时间：2012-05-26T11:12:07.710
> 
> 标签：web-services, rest, tomcat, jersey, jax-rs

我尝试使用 Eclipse 创建宁静的 web 服务，并按照提到的所有步骤

> [http://shrikantuw.blogspot.in/2012/03/jersy-developing-restful-web-service.html](http://shrikantuw.blogspot.in/2012/03/jersy-developing-restful-web-service.html)

但是当我尝试在tomcat中运行并点击

```
http://localhost:8080/RestFulWS/rest/exampleWithOutParam/getName 
```

我越来越

> HTTP 状态 404 - Servlet JAX-RS Servlet 不可用

我的tomcat端口也只有8080。

请让我该怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T21:58:50.920

如果您的 web.xml 和服务类映射如下，它应该可以正常工作：

你的网址：

```
http://localhost:8080/RestFulWS/rest/exampleWithOutParam/getName 
```

网页.xml：

```
<display-name>RestFulWS</display-name>
<servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.yourapp</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

您的服务：

```
package com.yourapp;
// imports here
@Path("/exampleWithOutParam")
public class YourService {
     @GET
     @Path("/getName")
     @Produces("text/plain")
     public Response getName() {
        return Response.ok("OK").build();
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T10:35:15.270

确保 jersey jar 确实是您的 Web 服务的一部分（也就是说，当部署在 tomcat 中时，它们位于 Web 服务包的 WEB-INF/lib 目录中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-08T07:15:14.727

```
 <display-name>RestFulWS</display-name>
     <servlet>
       <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servletclass>
      <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
       <param-value>com.yourapp</param-value>
     </init-param>
       <load-on-startup>1</load-on-startup>
   </servlet>
     <servlet-mapping>
          <servlet-name>Jersey REST Service</servlet-name>
          <url-pattern>/rest/*</url-pattern>
      </servlet-mapping> 
```

你的 web.xml 文件应该是这样的。映射servlet类和你的根资源类。

# kohana-3 - 我可以将 kohana 3.0 Auth 模块与 3.2 一起使用吗

> ID：10765737
> 
> 赞同：1
> 
> 时间：2012-05-26T11:12:47.703
> 
> 标签：kohana-3, kohana-auth, kohana-3.2

我正在尝试将我的应用程序升级到 Kohana 3.2，但我遇到了麻烦，因为我的所有用户都在数据库中，密码由 Kohana 3.0 的 Auth 加密。看起来 3.2 的做法有所不同。我可以将 3.2 配置为使用相同的加密吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T18:12:41.277

没有简单的方法。Kohana 3.2 使用`hash_hmac()`而不是`hash`+salt。登录工作流程也有变化（例如，`Model_User`在 3.2 中不包含任何登录逻辑）。您需要将大量代码从 3.0 复制到 3.2，我认为这不是一个好主意。

发送带有密码恢复链接的电子邮件怎么样？旧密码将被破坏，但用户可以简单地重新定义密码。并且不要忘记注销所有“记住”的用户（在您的基本控制器中，`before()`方法是它的完美位置）。

PS。对不起我的英语，它不是我的母语。

# javascript - RequireJS：如何处理浏览器和服务器之间共享代码的不同模块依赖关系？

> ID：10765741
> 
> 赞同：0
> 
> 时间：2012-05-26T11:13:10.697
> 
> 标签：javascript, node.js, browser, requirejs

我在浏览器和服务器上都加载了一个 requireJS 模块，以实现一些共享功能。

然而，该模块在每个环境中具有不同的依赖关系：

*   在节点中，它需要 fs 模块才能加载文件
*   在浏览器中，它需要 JQuery AJAX 或其他一些 AJAX 库来获取这些文件作为 HTTP 资源。

能够处理在浏览器和服务器之间共享但每个模块具有不同依赖关系的模块的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T14:14:34.953

依赖项不需要不同。相反，让您的模块没有*任何*模块作为依赖项。相反，您需要针对两种不同情况对模块进行参数化，并从服务器和浏览器特定代码传递正确的参数来处理这些情况。一种方法是在调用任何方法之前要求在模块上设置特定属性，并且该属性用于提供必要文件加载功能的对象：

```
mymodule.fileLoader = fswrapper; 
```

或者

```
mymodule.fileLoader = ajaxWrapper; 
```

（显然，以上两个片段会分别出现在服务器和浏览器的特定代码中）。另一种选择是将相关对象传递给从模块导出的类的构造函数（如果这是您的模块公开的方式）或将其分配为创建对象的属性。例如

```
var v = new MyClass(fswrapper);
//or
var v = new MyClass();
v.fileLoader = ajaxWrapper; 
```

这些想法有很多变化，但重点是您应该将文件系统差异从共享模块中抽象出来，而是将其传递给处理相关环境访问的对象。

# javascript - 不明白图像将我重定向到哪里

> ID：10765742
> 
> 赞同：0
> 
> 时间：2012-05-26T11:13:21.620
> 
> 标签：javascript

我正在尝试制作一批将您带到链接的批次，但这不是问题，问题是我正在尝试从网站获取链接，但我不知道为什么我不好。我解释得更好，在网站上有一张图片，这张图片带你到我想要的地方。这是图像代码。忘了饼干，我只想要这张图片带你去的地方。

```
<div id="x" class="votes" style="height:30px;">
<img src="images/image.png" id="y"></div> 
```

往下走，我们有这样的代码：

```
<script>
("#y").click(function () {
  $.post("z.php",{id:100},function(exit){
    $("#x").html(exit);
  }
);
</script> 
```

好的，问题是当我在网站上时，例如 www.h.com/i.php?id=100 （其中有我向您展示的代码）并且我将 url 更改为 /i.php?id =100 for /z.php?id=100 （我认为网站会这样做）我收到此错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 '' 附近使用正确的语法。

但是，如果您单击网络中的 image.png，网络会执行我正在尝试对 url 执行的操作...我不知道您是否理解我，对不起我的英语和我的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:24:53.643

You can't interchange a GET and POST request. Something that looks like this is a GET request:

```
www.h.com/i.php?id=100 
```

Also, you should take a look at your `z.php`. There is something wrong with how it handles your SQL query. It could be a typo causing a syntax error. Most probably, you missed escaping a quote, forgot a quote or your opening and closing quotes don't match.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:53:58.510

是的，如果 z.php 实际上响应 GET，则不能使用 POST。假设 z.php 实际上响应 GET，jQuery 的加载函数更适合您，因为您想用 ajax 结果填充 div。

没试过，但试试下面的：

```
<script>
("#y").click(function () {
    $("#x").load("z.php", {id:100});
  });
</script> 
```

回复您的评论：

> 有什么方法可以在不单击图像的情况下执行代码的操作吗？

是的。如果你想在没有用户点击的情况下执行操作，你可以试试这个：

```
<script>
$(function(){
    $("#x").load("z.php", {id:100});
});
</script> 
```

我想现在我明白了你关于批处理的问题。在 javascript 中，您可以在任何您喜欢的地方运行批处理程序。只需将 javascript 行/批处理放在脚本标记中即可。

```
<script>
  //... Your program comes here (batch)
</script> 
```

但是该批处理应该仅在加载资源/图像后运行。因此，您可以在文档加载完成后运行程序/批处理，如下所示。

```
<script>
  $(function() {
     //... Your program comes here (batch)
  });
</script> 
```

要了解有关此的更多信息，请在 Google 上搜索“javascript 文档加载”或“javascript on load”。Jquery 提供了一个功能来检测文档负载`$(function(){ /* ... */ });`，如上所示。

# vb.net - 使用 ObjectListVew

> ID：10765747
> 
> 赞同：1
> 
> 时间：2012-05-26T11:14:49.840
> 
> 标签：vb.net, vb.net-2010, objectlistview

我是这个控件的新手。我从brightideassoftware 下载了ObjectListView 控件。我正在使用 VS2010 / Visual basic.net。我将它添加为一个项目，并添加了一个项目（testproj）来测试它。我也确实将控制项目引用到 testProj。我将控件添加到表单中。我收到以下错误：

未定义类型“BrightIdeasSoftware.TreeListView”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T22:43:51.570

这个问题现在是 ObjectListView 常见问题解答的一部分，可以在以下位置找到：

[http://objectlistview.sourceforge.net/cs/faq.html](http://objectlistview.sourceforge.net/cs/faq.html)

希望这可以帮助

# android - 调整 MediaController 源问题

> ID：10765752
> 
> 赞同：0
> 
> 时间：2012-05-26T11:15:31.260
> 
> 标签：android

我想调整标准 MediaController 类中的布局。为此，我从[这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/MediaController.java)下载了它的源文件。调整布局似乎很容易，但是我对以下几行有疑问：

[127](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/MediaController.java#127) - 这里 eclipse 说它找不到 PolicyManager - 这是否意味着我也必须下载它？我想必须有另一种解决方案。

[416](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/widget/MediaController.java#416) - 在这里它想像那样（（Object）事件）.isDown（）进行投射，这很奇怪并且不能解决任何问题。

欢迎任何建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:50:35.830

> 127 - 这里 eclipse 说它找不到 PolicyManager - 这是否意味着我也必须下载它？我想必须有另一种解决方案。

[PolicyManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/com/android/internal/policy/PolicyManager.java)`com.android.internal`是API 中package 下的一个类。

> 416 - 在这里它想像那样（（Object）事件）.isDown（）进行投射，这很奇怪并且不能解决任何问题。

[KeyEvent.isDown()](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/view/KeyEvent.java#KeyEvent.isDown%28%29)的注释与`Hide`API 中一样。

一般来说，google 提供给消费者开发者的开发 API (android.jar) 已经剥离了内部 (com.android.internal) 和隐藏 (@hide) API。但是，安装在实际设备上的运行时 API (framework.jar) 应有尽有。

如果您想在代码中使用这些内部和隐藏 API，解决方案是使用反射或 inazaruk 在他的博客中解释的解决[方法](http://devmaze.wordpress.com/2011/01/18/using-com-android-internal-part-1-introduction/)。

希望这可以帮助。

# css - 如何在 CSS 中应用多个变换？

> ID：10765755
> 
> 赞同：725
> 
> 时间：2012-05-26T11:15:52.880
> 
> 标签：css, css-transforms

使用 CSS，我如何应用多个`transform`？

示例：在下文中，仅应用了平移，而不应用了旋转。

```
li:nth-child(2) {
    transform: rotate(15deg);
    transform: translate(-20px,0px);        
} 
```

* * *

## 回答 #1

> 赞同：1213
> 
> 时间：2012-05-26T11:17:42.260

您必须像这样将它们放在一行上：

```
li:nth-child(2) {
    transform: rotate(15deg) translate(-20px,0px);
} 
```

当您有多个转换指令时，只会应用最后一个。就像任何其他 CSS 规则一样。

* * *

**[请记住，从右到左应用](https://developer.mozilla.org/en-US/docs/Web/CSS/transform#Values)**多个变换一行指令。

这：`transform: scale(1,1.5) rotate(90deg);`
和：`transform: rotate(90deg) scale(1,1.5);`

不会**产生**相同的结果：

```
.orderOne, .orderTwo {
  font-family: sans-serif;
  font-size: 22px;
  color: #000;
  display: inline-block;
}

.orderOne {
  transform: scale(1, 1.5) rotate(90deg);
}

.orderTwo {
  transform: rotate(90deg) scale(1, 1.5);
}
```

```
<div class="orderOne">
  A
</div>

<div class="orderTwo">
  A
</div>
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2014-07-07T08:04:18.160

我添加这个答案不是因为它可能会有所帮助，而是因为它是真的。

除了使用现有的答案来解释如何通过链接它们来进行多个翻译之外，您还可以[自己构建 4x4 矩阵](http://www.w3.org/TR/css-transforms-1/#three-d-transform-functions)

[我从谷歌搜索时发现的一些随机网站](https://web.archive.org/web/20140616142747/http://inside.mines.edu/~gmurray/ArbitraryAxisRotation/ArbitraryAxisRotation.html)抓取了以下图片，其中显示了旋转矩阵：

绕 x 轴![绕 x 轴旋转](../Images/88269c442fab2ca9b415ae3974da4d68.png)
旋转： 绕 y 轴![绕 y 轴旋转](../Images/72a960ca4820e142d8eb97f7b0754606.png)
旋转： 绕 z 轴旋转：![绕 z 轴旋转](../Images/5d9d3471895689802782c6b032e06756.png)

我找不到一个很好的翻译例子，所以假设我记得/理解正确，翻译：

```
[1 0 0 0]
[0 1 0 0]
[0 0 1 0]
[x y z 1] 
```

查看更多[关于转换的维基百科文章](http://en.wikipedia.org/wiki/Transformation_matrix)以及解释它[的实用 CSS3 教程。](https://web.archive.org/web/20140829071149/http://9elements.com/html5demos/matrix3d/)我发现的另一个解释任意旋转矩阵的指南是[Egon Rath 关于矩阵的注释](http://www.matrix44.net/cms/notes/opengl-3d-graphics/basic-3d-math-matrices)

矩阵乘法当然适用于这些 4x4 矩阵，因此要执行旋转后平移，您需要制作适当的旋转矩阵并将其乘以平移矩阵。

这可以让你有更多的自由来让它恰到好处，并且也会让任何人几乎完全不可能理解它在做什么，包括你在五分钟内。

但是，你知道，它有效。

编辑：我刚刚意识到我错过了可能最重要和最实际的用途，即通过 JavaScript 逐步创建复杂的 3D 转换，这样事情会更有意义。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2016-09-15T09:20:34.290

您还可以使用额外的标记层应用多个转换，例如：

```
<h3 class="rotated-heading">
    <span class="scaled-up">Hey!</span>
</h3>
<style type="text/css">
.rotated-heading
{
    transform: rotate(10deg);
}

.scaled-up
{
    transform: scale(1.5);
}
</style> 
```

这在使用 Javascript 为带有变换的元素设置动画时非常有用。

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2014-01-02T08:23:13.183

您可以像这样应用多个转换：

```
li:nth-of-type(2){
    transform : translate(-20px, 0px) rotate(15deg);
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-27T15:43:54.010

在未来的某个时间，我们可以这样写：

```
li:nth-child(2) {
    rotate: 15deg;
    translate:-20px 0px;        
} 
```

当在元素上应用单个类时，这将变得特别有用：

```
<div class="teaser important"></div>

.teaser{rotate:10deg;}
.important{scale:1.5 1.5;} 
```

此语法在进行中的[CSS Transforms Level 2 规范](https://drafts.csswg.org/css-transforms-2/#individual-transforms)中定义，但除了 chrome canary 之外，找不到任何关于当前浏览器支持的信息。希望有一天我会回来并在这里更新浏览器支持；）

[在本文](https://danielcwilson.com/blog/2017/10/all-the-transform-ways/)中找到了您可能想要查看的有关当前浏览器解决方法的信息。

**更新**：功能已登陆 Firefox 72

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-17T03:04:15.847

从那里开始，在**CSS**中，如果您重复 2 个或更多值，除非使用标签，否则始终应用最后一个`!important`，但同时`!important`尽可能避免使用，所以在您的情况下，这就是问题所在，所以第二个在这种情况下，转换**覆盖**第一个......

**那么你怎么能做你想做的呢？...**

**别担心**，transform 同时接受多个值......所以下面的代码可以工作：

```
li:nth-child(2) {
  transform: rotate(15deg) translate(-20px, 0px); //multiple
} 
```

如果您喜欢使用 transform 运行以下**MDN**中的 iframe：

```
<iframe src="https://interactive-examples.mdn.mozilla.net/pages/css/transform.html" class="interactive  " width="100%" frameborder="0" height="250"></iframe>
```

查看下面的链接了解更多信息：

[<< CSS 变换 >>](https://cssreference.io/property/transform/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-27T11:20:18.097

**在单行 css 中变换旋转和平移：-如何？**

```
div.className{
    transform : rotate(270deg) translate(-50%, 0);    
    -webkit-transform: rotate(270deg) translate(-50%, -50%);    
    -moz-transform: rotate(270deg) translate(-50%, -50%);    
    -ms-transform: rotate(270deg) translate(-50%, -50%);    
    -o-transform: rotate(270deg) translate(-50%, -50%); 
    float:left;
    position:absolute;
    top:50%;
    left:50%;
    }
```

```
<html>
<head>
</head>
<body>
<div class="className">
  <span style="font-size:50px">A</span>
</div>
</body>
</html>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-23T16:41:26.367

**我学到的教训。**

如果您使用`style`的是 React css，请不要包含分号，即使在它的末尾也是如此，因为它是由 React 自动包含在内部的。

就像：

```
style={                             
  transform: "rotate(90deg) scaleX(-1)",
} 
```

# c++ - C++ 开关 - 预处理案例参数？

> ID：10765762
> 
> 赞同：1
> 
> 时间：2012-05-26T11:16:56.953
> 
> 标签：c++, switch-statement, c-preprocessor

在我的开关中，我希望案例从 0 变为 ( `number_of_cases-1`)，而无需自己编写数字。这样如果我在中间删除一个 case 块，以下 case 会重新编号（减 1），从而再次从 ( `0..caseNo-1`) 切换。

像这样（当然它不会编译，因为`i++`不知道编译时间）：

```
#include <iostream>

#define ALWAYS_SECOND_CASE 1

void nop(char c){}

int main()
{
 int i=0;
 int var=ALWAYS_SECOND_CASE;

 switch(var)
 {
  case i++: //case 0:
    nop('x');
    break;
  case i++: //case 1:
    nop('y')
    break;
  case i++: //case 2:
    nop('z')
    break;
 }

 //case 1 should have been switched to, nop('y') called.
} 
```

现在我删除了中间情况，并且不写任何内容，最后一个情况应该从情况 2 更改为情况 1：

```
#include <iostream>

#define ALWAYS_SECOND_CASE 1

void nop(char c){}

int main()
{
 int i=0;
 int var=ALWAYS_SECOND_CASE;

 switch(var)
 {
  case i++: //case 0:
    nop('x');
    break;
  case i++: //case 1: instead of case 2 like before
    nop('z')
    break;
 }

 //case 1 should have been switched to, nop('z') called,
 // instead of nop('y') like before.
} 
```

所以我不能使用变量，因为它们太可变了；那么符号常数太恒定了，我可以做`SYMC+1`，但是不行`SYMC++`。那么也许是枚举，或者一些不错的宏函数？

编辑感谢 if-else 提示，我只是认为由于 case 值在编译时是已知的，因此使用 switch 会更好。

并指定我想要做什么：我有一个菜单`char[rows][cols]={"first line","second line"}`。我想将 switch case 映射到行，这样如果我想从菜单中删除一行（减少行号之后的行），我将只删除程序其余部分中的一个 case。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:42:14.060

预处理器中没有状态保持结构。但是，在 C++11 中，您可以使用 lambdas 来表达个别情况，将它们放在一个数组中，并以类似于`switch`在每个情况后加上中断的方式使用：

```
function<void()> cases[] = {
    [] () {cout << "quick" << endl; }
,   [] () {cout << "brown" << endl; }
,   [] () {cout << "fox" << endl; }
};
int k = 1;
cases[k](); // <<== This is where the switch happens 
```

现在，每次从中间删除一个案例时，您的数组索引都会自动“重新编号”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:27:58.007

This is perhaps silly, but have you considered something like:

```
#define ALWAYS_SECOND_CASE 1

std::string some_cases = "xyz";
nop(some_cases[ALWAYS_SECOND_CASE]);

std::string some_other_cases = "xz";
nop(some_other_cases[ALWAYS_SECOND_CASE]); 
```

`std::map` comes to mind, too.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T11:20:38.493

一系列`if`陈述如何？

```
 int i=0;
 int var=ALWAYS_SECOND_CASE;

 if (var == i++) {
    nop('x');
 } else if (var == i++) {
    nop('y');
 } else if (var == i++) {
    nop('z');
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T12:41:39.720

我认为[Boost Preprocessor](http://www.boost.org/doc/libs/1_49_0/libs/preprocessor/doc/index.html)库提供了在编译时生成 switch 语句所需的宏。我无权访问编译器来检查下面的代码，但如果它没有编译，它应该非常接近可以解决您的问题的东西。

```
#include <boost/preprocessor/tuple/elem.hpp>
#include <boost/preprocessor/tuple/size.hpp>

#include <boost/preprocessor/repetition/for.hpp>
#include <boost/preprocessor/arithmetic/inc.hpp>
#include <boost/preprocessor/comparison/not_equal.hpp>

#define OPS (x, y, z)
#define NOPS BOOST_PP_TUPLE_SIZE(OPS)

#define PRED(r, state) BOOST_PP_NOT_EQUAL( \
    BOOST_PP_TUPLE_ELEM(2, 0, state) \
  , BOOST_PP_TUPLE_ELEM(2, 1, state) \
)

#define OP(r, state) ( \
    BOOST_PP_INC(BOOST_PP_TUPLE_ELEM(2, 0, state)) \
  , BOOST_PP_TUPLE_ELEM(2, 1, state) \
)

#define MACRO(r, state) \
    case BOOST_PP_TUPLE_ELEM(2, 0, state): \
        BOOST_PP_TUPLE_ELEM(NOPS, BOOST_PP_TUPLE_ELEM(2, 0, state), OPS)(); \
        break;

void x() { }
void y() { }
void z() { }

main() {
    int i = 0;

    switch(i) {
        BOOST_PP_FOR((0, NOPS), PRED, OP, MACRO)
    }
} 
```

每当您要添加或删除操作时，只需修改 OPS 的定义，案例值应自动重新编号。我知道有些人不喜欢使用预处理器，但它可以做的一些事情非常了不起。

更新：我可以再次访问编译，并且我验证了上面的代码可以像宣传的那样工作。但是，它需要 Boost 1.49，并且您必须在编译行中包含 -DBOOST_PP_VARIADICS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T11:20:23.147

我不完全理解你想要做什么，但很明显你根本不应该使用`switch`; 它不适用于您尝试实现的逻辑。

您可能会改为一系列`if(...) else if (...)`陈述。

# php - 通过 while 和 for 循环更新表

> ID：10765763
> 
> 赞同：0
> 
> 时间：2012-05-26T11:16:57.110
> 
> 标签：php, mysql

我正在尝试为我的网站的私人消息部分整理删除功能，基本上它可以很好地删除消息，但我现在正试图让它不仅删除消息，而且连接到的所有其他回复消息它通过一个while循环，每个单独的消息都有一个唯一的message_id，但是每个消息的“对话”，例如涉及回复的地方，都有一个message_unique，它对于通过彼此连接的每条消息都是相同的id。

这是下面的删除代码，它需要做的就是将一个变量设置为来自收件人的回复，或者如果它来自发件人，则将删除变量设置为一个，希望你现在应该明白我的意思它将 sender_deleted 和 recipient_deleted 都设置为 1，这是不应该的

```
if (isset($_POST['delete_inbox'])) {

foreach($_POST['inbox_select_box'] as $message_unique) //loop through the checkboxes
{

 $query = mysql_query("SELECT * FROM messages WHERE message_unique = $message_unique");

      while($row = mysql_fetch_assoc($query)){
          extract($row);

 if ($recipient_id == $user_id){
     $sql = "UPDATE messages SET recipient_deleted = '1' WHERE message_unique = '$message_unique'";
 $result=mysql_query($sql);
 }
 else{
     $sql = "UPDATE messages SET sender_deleted = '1' WHERE message_unique = '$message_unique'";
 $result=mysql_query($sql);
 }

      }

} 
```

$user_id 是登录用户的 id 的全局变量，感谢你们给我的任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:51:05.957

我假设你的主键被称为类似`message_id`. 试试这样：

```
if (isset($_POST['delete_inbox'])) {
    foreach($_POST['inbox_select_box'] as $message_unique) //loop through the checkboxes
    {
        $query = mysql_query("SELECT * FROM messages WHERE message_unique = $message_unique");
        while($row = mysql_fetch_assoc($query)){
            extract($row);
            $message_id = $row['message_id'];
            if ($recipient_id == $user_id){
                $sql = "UPDATE messages SET recipient_deleted = '1' WHERE message_id = '$message_id'";
            }
            else
            {
                $sql = "UPDATE messages SET sender_deleted = '1' WHERE message_id = '$message_id'";
            }
            $result = mysql_query($sql);
        }
    }
} 
```

问题是，您每次都在线程中的每条消息上设置值。您需要使用每行消息的实际 id 执行更新。

附带说明：如果您只是设置要在其中使用的 SQL 字符串，则应该只在语句`mysql_query()`之外执行一次方法调用。`if () ... else ...`

# objective-c - Profiler 告诉我与 nil 的比较很慢

> ID：10765765
> 
> 赞同：4
> 
> 时间：2012-05-26T11:17:04.397
> 
> 标签：objective-c, ios, performance, profiling

我有一个方法可以检查 a`NSData`的值，如下所示：

```
if (data == nil) {

//Method

} 
```

但是，尽管方法中包含了所有内容，但事实证明，超过 80% 的时间都花在了第一行，检查是否`data`等于`nil`. 有没有更有效的方法来做到这一点？

截屏： ![在此处输入图像描述](../Images/e4075881403983c6029c1a1de096b596.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T18:17:31.567

这不是直接比较`nil`。它是一行中的多个语句。

划分问题的一种方法是划分陈述。您还可以单步执行您的实现。简而言之，分析器的突出显示被误解了。

打破这个：

```
NSData * thumbnailData = self.thumbnail;
NSUInteger length = thumbnailData.length; 
```

访问属性不需要太多时间。

访问长度应该不会花费太多时间（假设这是不可变数据）。

我怀疑在`self.thumbnail`. 但是，如果您深入了解实现，分析器将为您提供更多详细信息。

最后一点是，它可以被解释为方法的本地。如果该方法不是热点并且上述方法确实不起作用，那通常意味着“通常在您调用此方法时加载缩略图”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:36:30.570

肯定没有比直接比较更快的检查方法了`nil`，或者至少你不会通过摆弄那条线来获得任何显着的性能——这个分析数据是不准确的。

`-getThumbnail`以我的经验，当方法（在您的情况下）运行太多次时，会发生这种行为（仪器错误地“指责”方法的第一行） 。尝试优化何时`-getThumbnail`被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T18:21:28.273

您必须考虑经典的采样型性能分析器是如何工作的。

基本上，当您的程序运行时，计时器会每隔 100 微秒关闭一次，然后您的程序就会被中断。分析器然后检查指令指针，并根据其相对于被分析代码段的开始和结束的值，索引到整数计数器数组并递增对应于代码地址的计数器。

但是（至少）有三件事阻止了它“完美”：

1.  除了非常小的程序，为每条指令设置一个计数器是不切实际的，因此代码空间被分割成 16 字节或 1000 字节的间隔，具体取决于您的设置方式，并且单个计数器收集增量对于该范围内的所有指令。这意味着关于您在程序中的确切位置的测量“精度”并不完美。

2.  这在很大程度上取决于特定的处理器，但通常处理器仅在代码中的某些点识别计时器中断，例如分支和执行某些“系统”操作时，或者它可能只是等到预取缓存耗尽。因此分析器的定时器中断可能会“触发”，处理器可能会继续执行更多指令。

3.  某些代码序列（例如比较和交换）可能会禁用中断，因此禁用区域内的所有活动最终都将“归咎于”紧随其后的指令。类似地，某些类型的系统调用是以在调用期间禁用中断的方式进行的，因此，调用的全部成本再次“归咎于”紧随其后的指令。

# ruby - QtRuby 应用程序可以部署在 Apple 的 App Store 上吗？

> ID：10765770
> 
> 赞同：2
> 
> 时间：2012-05-26T11:17:30.433
> 
> 标签：ruby, app-store, macruby, qtruby

我正在争论我应该使用 MacRuby 还是 QtRuby。但是，我绝对想在 App Store 上部署我的应用程序。如果 QtRuby 无法在 App Store 上部署，我将不得不使用 MacRuby。

# iphone - 在标签栏应用程序中弹出到根 ViewController

> ID：10765774
> 
> 赞同：0
> 
> 时间：2012-05-26T11:18:10.087
> 
> 标签：iphone, objective-c, ios, tabs

我有 tabBar 应用程序，其中我在 SignViewController 上添加了选项卡我在我的设置选项卡中有 3 个不同的选项卡我有 logOut 按钮而不是按钮单击我想弹出选项卡栏并跳回我的 SignViewController。任何人都可以帮助解决这个小问题请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:05:44.333

我认为您只需要了解您在做什么的应用程序流程即可。

首先，您正在使用`rootviewcontroller`.

当您获得登录成功时，您只需分配`rootviewcontroller = tabbarcontroller.view`，对吗？

所以你需要的是，当你想从应用程序中注销时，只需将相同的 rootview 分配给 main `rootviewcontroller`。无需做任何事情。

或者，如果您要添加`subviews`到窗口，则使用添加和删除方法，例如

```
[self.window addSubview:rootview];
[tabbar removefromSuperview]; 
```

我希望这能帮到您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:27:30.157

使用 SignviewController 作为根导航。然后你可以使用方法

```
 [self.navigationController popToRootViewControllerAnimated:YES];
    [self.navigationController popToViewController:signViewController animated:YES]; 
```

# objective-c - 以一对多关系从 coredata 中获取所有对象

> ID：10765779
> 
> 赞同：1
> 
> 时间：2012-05-26T11:19:13.180
> 
> 标签：objective-c, database, core-data

这是我的`Exercise`课

```
@class Question;

@interface Exercise : NSManagedObject

@property (nonatomic, retain) NSNumber * aID;
@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSSet *listQuestion;
@end

@interface Exercise (CoreDataGeneratedAccessors)

- (void)addListQuestionObject:(Question *)value;
- (void)removeListQuestionObject:(Question *)value;
- (void)addListQuestion:(NSSet *)values;
- (void)removeListQuestion:(NSSet *)values;

@end 
```

这是`Question`上课

```
@class Exercise;

@interface Question : NSManagedObject

@property (nonatomic, retain) NSNumber * aID;
@property (nonatomic, retain) id jsAnswer;
@property (nonatomic, retain) Exercise *exercise;

@end 
```

这些类是由 coredata 创建的
我如何在每个练习中获取所有`Question`对象`listQuestion`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T11:29:46.307

这将为您提供给定练习的所有 Question 对象的数组：

```
NSArray *questions = [[exercise listQuestion] allObjects]; 
```

# mysql - Node.js DRY 与 MySQL 客户端

> ID：10765780
> 
> 赞同：0
> 
> 时间：2012-05-26T11:19:28.183
> 
> 标签：mysql, node.js, coffeescript, express

所以这是一个快速的问题。基本上我正在制作一个连接到 MySQL 服务器的快速应用程序。很简单。但是如何停止在文件之间添加所有连接代码，以便在更改密码或数据库时不必更改多个文件。

例子：

`app.coffee`

```
client = mysql.createClient
  user: config.db.user,
  password: config.db.pass

app.get '/', routes.index 
```

`routes/index.coffee`

```
client = mysql.createClient
  user: config.db.user,
  password: config.db.pass

exports.index = (req, res) ->
  res.render 'index' 
```

我试图创建一个名为的文件`lib/mysql.coffee`，如下所示：

```
config = require '../config'
mysql = require 'mysql'

module.exports = ( ->
  mysql.createClient
    host: config.db.host
    user: config.db.user
    password: config.db.pass
    database: config.db.name
) 
```

所以在应用程序中，我可以去：

```
mysql = require './lib/mysql'
mysql.query 'SHOW TABLES', (err,r,f) ->
    console.log err 
```

但它一直在给：

```
TypeError: Object function () {
    return mysql.createClient({
      host: config.db.host,
      user: config.db.user,
      password: config.db.pass,
      database: config.db.name
    });
  } has no method 'query' 
```

模块：[https ://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T17:18:21.673

现在，您正在导出函数并且没有它的返回值。

`do`显然你可以用CoffeeScript 中的关键字创建一个自执行函数，所以试试这个：

```
module.exports = do ( ->
  mysql.createClient
    host: config.db.host
    user: config.db.user
    password: config.db.pass
    database: config.db.name
) 
```

或者做[*µ 太短*的建议](https://stackoverflow.com/a/10768288/298479)并调用导出的函数。反正这样会更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T17:13:48.690

我的 node-fu 不是那么强，但是这个：

```
module.exports = ( ->
  mysql.createClient
    ...
) 
```

正在导出一个返回 MySQL 连接的函数。您的错误信息：

```
TypeError: Object function () {
    return mysql.createClient({
      ...
    });
  } has no method 'query' 
```

说了这么多；表示这`mysql`是一个没有`query`方法的函数对象。

你可以继续做你正在做的事情，然后说：

```
mysql = require './lib/mysql'
db    = mysql()
db.query 'SHOW TABLES', (err,r,f) ->
  console.log err 
```

或者你可以导出一个`connect`方法：

```
module.exports =
  connect: ->
    mysql.createClient(...) 
```

并使用它：

```
mysql = require './lib/mysql'
db    = mysql.connect()
db.query ... 
```

# actionscript-3 - 支持@NotNull/@Nullable 的 Actionscript 3 静态分析器

> ID：10765782
> 
> 赞同：4
> 
> 时间：2012-05-26T11:20:02.940
> 
> 标签：actionscript-3, flash, actionscript, static-analysis

我想使用静态分析来防止“TypeError：错误＃1009：无法访问空对象引用的属性或方法”。

据我所知，有一个使用@NotNull/@Nullable 的Java 静态分析器。程序员通过为每个成员/函数/参数指定这些注释来明确表达他的意图，以便工具可以验证一切是否正确，并且每个 @Nullable -> @NotNull 转换都是通过检查是否为空来进行的。对我来说，只指定@Nullable 会更舒服，这样其他所有东西都可以像@NotNull 一样对待，但这不是必需的。

我想知道 Actionscript 3 是否有这种免费工具？

我有 FlashBuilder 4.5 许可证，但除此之外我不想购买任何其他东西。我听说 IntelliJ IDEA 可能有这样的东西，但它只适用于终极版中的 Actionscript，它不是免费的 :(

## 所以问题是：

1.  Actionscript 3 有这样的静态分析器吗？
2.  如果不免费的话要多少钱？
3.  除了“检查所有内容并将代码转换成一团糟”之外，是否还有其他解决方案可以防止 1009 错误。

## 更新

没有给出完整的答案:(但**weltraumpirat**的答案是迄今为止最好的。我考虑对可空函数使用命名约定：Try*、Find*、*OrNull、*IfAny 等。名称变得更长，但可靠性更重要. 谢谢weltraumpirat！赏金是你的，但我不会将答案标记为“已接受”，因为它不完整，我希望在某个时候有人会回答所需静态分析器的链接:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T12:05:26.697

据我所知，ActionScript 没有静态分析工具可以真正防止空引用错误 - AS 是一种动态语言，并且很多使它成为一种好的语言的原因发生在编译器（或静态分析）之外工具，就此而言）可以验证。

但是，您可以并且应该做的是以首先*防止*空引用的方式设计代码，并允许*有意义的错误消息*帮助您更快地发现错误。

可以这样想：**如果变量实例在某个时刻不应该为空，那么是否应该允许程序运行？** 在大多数情况下，答案很明确：不，不应该！

例如，一个常见的错误不是阻止空引用，而是在程序中每个可能的点添加空检查，如下所示：

```
function myMethod( something:* ) : void {
    if ( something != null) {
       doStuff();
    }
} 
```

这样做的结果是，程序不会抛出错误（这将使您能够找到发生崩溃的方法的名称和行号，以便跟踪问题），程序将继续运行，但什么也没有发生。现在，当您执行手动测试时，您将看到：**nothing**。并且没有迹象表明出了什么问题。

处理空引用的更好方法是

*   确保没有任何方法返回 null。 *曾经*。

    这可以通过返回默认值来实现，例如：

    ```
    function getPropertyValue() : String { 
        return _property != null ? _property : "";
    } 
    ```

    当然，默认值可能是有意义的，例如`"Property did not have a value."`，这样在您的 UI 中，您会立即注意到问题，而不会影响程序的其余部分。（请注意，这不仅适用于 getter，而且适用于任何返回值的方法——我只是选择了一个明显的例子。）

    如果由于某种原因您真的无法绕过返回 null，请确保您的方法名称反映了这一点，因此当您使用它时，您*知道*预期可能的 null 值：

    ```
     function getPropertyValueOrNull() : String {
         return _property;
     } 
    ```

*   代替无用的空检查，在应用程序的关键点创建验证方法，并抛出有意义的错误以指出问题的原因：

    ```
    function tryExecuteImportantFunction() : void {
        try {
             validate();
             executeImportantFunction();
        } catch ( e:Error ) {
             trace( "Validation failed:" + e.message );
        }
    }

    function validate() : void {
        if (_requiredProperty1 == null) 
            throw new Error ( "_requiredProperty1 was null, but should always contain a string value.");
        if (_requiredProperty2 == null) 
            throw new Error ( "_requiredProperty2 was null, but should always contain a dictionary.");
    } 
    ```

    应该捕获有意义的错误并将其转发到日志或调试控制台，以便您始终知道在哪里寻找原因，并了解您必须采取哪些措施来修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:51:20.093

在这种情况下最有用的应该是 getter 和 setter ：

```
protected var _value:Object;

public function get value():Object{
    if(_value){
        return _value;
    }
    trace("missing object");// or throw "missing object error"
    return new Object();
}

public function set value(v:Object):void {
    _value = v;
} 
```

编辑：

还可以读取用于空检查的其他内容 describeType() xml 并检查可访问的值（如果存在）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T19:40:50.523

gui 编程的问题在于，总是存在某种状态。所描述的问题基本上是具有有效和无效状态。作为一位经验丰富的 Flex 开发人员，我可以说，不存在无效状态这样的状态。null 是一个有效的引用，所以我们必须处理它。

我要问的第一个问题是：为什么 null 不好？需要 null 来清理事物并确保我们了解状态，没有数据。

Flex 有一个生命周期的想法，这基本上会导致一个非常有趣的行为。当一个组件被初始化时，它的子组件没有被初始化。所以基本上这是一个非常脆弱的系统，乍一看。属性主要委托给视图聚合的其他组件（关于视图层）。但同样的情况也可能发生在模型、控制器或服务层上。

那么，如何处理这个问题呢？我认为这首先是一个设计决定。当 null 被视为破坏系统的值时，默认情况下系统几乎是破坏的。我认为 null 是表示数据缺失的最简单方法。

另一种方法是创建默认模型。在我看来，模型是唯一真正令人讨厌的东西，因为所有其他组件都依赖于它们。

```
package net.icodeapps.examples.model
{
  public class User
  {
  }
}

package net.icodeapps.examples.model
{
  public class DefaultUser extends User
  {
  }
} 
```

拥有这样的默认模型可以很容易地使用有效的非空引用和值引导应用程序，但也必须做出决定，无论是否正在处理默认模型。

此外，还有最重要的部分：如果系统没有经过适当考虑，将 null 踢出应用程序最终会杀死内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:23:11.200

无论 weltraumpirat 以一种完全避免空值的方式进行编程，我都支持它。但是，根据我的经验，这并不总是可能的。在我们最近做的一个项目中，我们检索并生成了大量改变类型和形状的动态数据。

网络超时、回调退出和任何其他与此相关的意外导致空值停止应用程序。我们知道空错误并不重要，并且我们在很多情况下都期望它。

这要求对游戏中的所有错误情况进行动态错误处理。try catch 语句要么太慢要么需要大量维护。Flash Player 提供了一种处理此问题的方法，尽管它可能不是对所有问题集的最合适的解决方案。它是 Flash Player 10.1 发布后引入的“UncaughtErrorEvent”。

[Flash Player 未捕获错误事件](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/UncaughtErrorEvents.html)

此外，有一个非常好的库可以处理这个问题。这里：

[全局错误处理程序](https://github.com/jonasmonnier/jonAS3)

最后，如果您查看 Flash Player 开发的未来路线图，您会注意到静态类型、重载和大量重大变化即将出现在平台上。但就目前而言，这是我用过的最好的解决方案。

[Flash 播放器路线图](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T04:41:03.697

你也可以试试 FlexPMD。它与 Java 的 PMD 密切相关，并且会通过应用规则在您的源代码中发现异味。

Adobe 将其作为开源发布，您可以在 sourceforge 获得它：http: [//sourceforge.net/adobe/flexpmd/home/Home/](http://sourceforge.net/adobe/flexpmd/home/Home/)

这是一个小的介绍视频：[http ://www.riagora.com/2010/04/introduction-to-flex-pmd/](http://www.riagora.com/2010/04/introduction-to-flex-pmd/)

据我所知，它可以很容易地与 Flex Builder 集成，但也可以与 IntelliJ 和 FDT 甚至命令行等其他 IDE 一起使用。

# android - MySQL 可以本地连接但不能远程连接

> ID：10765783
> 
> 赞同：1
> 
> 时间：2012-05-26T11:20:07.390
> 
> 标签：android, mysql, database, localhost, mamp

我正在尝试从我的 IP 地址连接到我正在帮助修复的移动网络应用程序，以便我可以在我的 Android 手机上对其进行测试。但是，当我从 localhost 和我的 ip 地址访问它时会显示登录屏幕，它只会让我从 localhost 地址登录——它甚至不能从 ip 地址连接。

我正在运行 MAMP Pro 并取消选中“仅允许本地访问”。我进入 MySQL my.cnf 并将绑定地址从 127.0.0.1 更改为我自己的 IP。我还注释掉了“MAMP_skip-networking_MAMP”行。然后，我创建了一个与 config.php 中的用户匹配的用户，具有对数据库的完全访问权限，并将其主机设置为 %。

在 config.php 文件中，我尝试将主机名更改为：

*   本地主机
*   本地主机：[端口号]
*   [IP地址]
*   [IP 地址]:[端口号]
*   /Applications/MAMP/tmp/mysql/mysql.sock

依然没有。当我尝试从我的 IP 访问该站点时，我仍然无法登录。任何帮助/方向将不胜感激..谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:24:56.670

The issue isn't with the client, most likely, but with the server. Most MySQL servers are configured (I think by default) to refuse connection attempts that aren't local. Give me a few seconds to pull up the config/info schema change to make so that you can change this.

Warning, it's a bad idea to open up the db to all requests. You'll want to either make it open to all IP requests from one user, or allow requests from any user from a specific IP (or even better, combine the two and make it so that only certain users can make requests from specific IPs).

Here's a good (but again dangerous) tutorial:

[how-do-i-enable-remote-access-to-mysql-database-server](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

The simple way to do it, if I'm not mistaken, is to run the following queries: (assuming you're as "superadmin":

```
USE information_schema;
UPDATE USER_PRIVILEGES SET Host='%' WHERE user='superadmin';
FLUSH PRIVILEGES;
USE mysql;
UPDATE user SET Host='%' WHERE user='superadmin'; 
```

The above basically grants the superadmin access to the mysql db (if not already granted), then the switch to that db and grant superadmin access from any IP. Again, follow the links provided to see how to tweak this per user and per IP, otherwise you are opening up yourself to a world of hurt just to use a nifty MySQL GUI.

It may be more complicated than the above (a restart may be required, etc.). Another good article is:

[MySQL - Adding Users](http://dev.mysql.com/doc/refman/5.5/en/adding-users.html) -- look for the section mentioning wildcards.

# android - 在 Android 中从 Eclipse 导出项目时出错

> ID：10765784
> 
> 赞同：0
> 
> 时间：2012-05-26T11:20:17.220
> 
> 标签：android, export, project

从 Eclipse 导出我的项目以发送它进行测试时，我收到以下错误。

```
Obsolete ProGuard file; use -keepclasseswithmembers instead of -keepclasseswithmembernames

Issue: Looks for problems in proguard config files
Id: Proguard

Using -keepclasseswithmembernames in a proguard config file is not correct; it can cause some symbols to be renamed which should not be.
Earlier versions of ADT used to create proguard.cfg files with the wrong format. Instead of -keepclasseswithmembernames use -keepclasseswithmembers, since the old flags also implies "allow shrinking" which means symbols only referred to from XML and not Java (such as possibly CustomViews) can get deleted.

http://http://code.google.com/p/android/issues/detail?id=16384 
```

该链接对我不起作用，我不知道如何解决此问题。我最近升级了我的 ADT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:42:10.163

我在以下链接中找到了答案：

*   [安卓开发者](https://groups.google.com/group/android-developers/browse_thread/thread/7606320e664fec9b?pli=1)
*   [这个](https://stackoverflow.com/questions/8613098/obsolete-proguard-file-use-keepclasseswithmembers-instead-of-keepclasseswithm)
*   [错误列表](http://code.google.com/p/android/issues/detail?id=16384)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T19:23:50.867

我在eclipse的程序窗口中选择了错误。并且错误被删除。

# gcc - 传递 'const 这个参数会丢弃限定符 [-fpermissive]

> ID：10765787
> 
> 赞同：41
> 
> 时间：2012-05-26T11:20:56.780
> 
> 标签：gcc, g++

我有一个类`Cache`，它的函数 write 指定为

```
bool write(const MemoryAccess &memory_access, CacheLine &cl); 
```

我这样调用这个函数。

```
const Cache *this_cache;
c = (a==b)?my_cache:not_cache;
c->write(memory_access,cl); 
```

上面的行给了我以下错误

> “将 'const Cache' 作为 'bool Cache::write(const MemoryAccess&, CacheLine&)' 的 'this' 参数传递会丢弃限定符 [-fpermissive]。”

this 参数是特定于编译器的，它有助于代码修改和破坏局部命名空间变量的优先级。但是这里没有传递这样的变量。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-05-26T11:25:24.623

由于`c`是 type `const Cache *`，因此您只能`const`在其上调用成员函数。

你有两个选择：

(1)`const`从声明中删除`c`；

(2) 改变`Cache::write()`如下：

```
 bool write(const MemoryAccess &memory_access, CacheLine &cl) const; 
```

（注意最后添加`const`的。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T11:24:56.247

当您通过指向对象的指针调用方法时，该对象将作为`this`指针隐式传递给该方法。`c`可能有类型`const Cache*`。由于方法`write`未声明为`const`，因此它具有`this`可从其主体访问的非常量指针，需要丢弃`const`限定符 of 。`c`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T05:45:44.707

此外，如果您的类的方法返回任何成员上的指针，您不应该忘记在返回类型示例之前编写 const：

`const float * getPosition() const{...}`

# c++ - 如何检查指针何时被删除？

> ID：10765788
> 
> 赞同：7
> 
> 时间：2012-05-26T11:21:20.040
> 
> 标签：c++, pointers, delete-operator

当我调试别人的代码时，我怎么能发现指针被删除了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T11:24:22.973

1)

Use a debugger. follow one delete. In general you end up in some "free" function passing a pointer

Set a breakpoint with the condition that the past pointer has the same value as your investigated pointer

2)

One similar approach is to override the "delete" method and to check for that pointer in question.

3)

If the pointer refers to an object with an destructor. Place a breakpoint on the destructor. May be you may want to add a destructor first (if possible at all by foreign code, always possible on own code)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T12:05:00.620

在相关类型的析构函数上设置条件断点。让条件`this`指向您感兴趣的对象。例如，在 Visual C++ Express 2010 中：

![在此处输入图像描述](../Images/b8392057c83fcee3379f735c574b6af1.png)

上图我先执行到三个`new`表达式之后，然后记下`b`对象的地址，然后作为断点条件，`this`应该是那个地址。

如何使用其他调试器执行此操作的*详细信息*取决于调试器。请参阅调试器的手册。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T12:10:42.297

在 C++ 中，您没有任何内置的跨平台功能，它会发现指针是否被删除。

但是，您可以使用某些调试器、工具和语言本身提供的功能。例如，您可以全局和/或在每个类基础上重载`new`and`delete`运算符，并维护一个通用的集合/映射类型的引用。例如：

```
class X {
  ...
  set<void*> m_CurrentAlloc;

public:
  void* operator new (size_t SIZE)
  {
    ...
    m_CurrentAlloc.insert(p);
    return p;
  }

  void operator delete (void *p)
  {
    m_CurrentAlloc.erase(p);
    ...
  }
}; 
```

在定期基础上或在程序结束时，`set`可以打印或验证其内容。
请记住，这是理想情况下的解决方案，您正在使用`new/delete`. 如果您也有混合，`malloc/free`那么代码也需要其他增强功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T11:26:28.383

How about a [GDB watchpoint](http://www.unknownroad.com/rtfm/gdbtut/gdbwatch.html)? You can set a watchpoint on the pointer in question and see when the program accesses to delete its referent.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T11:28:54.573

If you are referring to the memory pointed to by a pointer, you can't. However, if you are having trouble with [dangling](http://en.wikipedia.org/wiki/Dangling_pointer) pointers, just replace all of their raw pointers with boost::shared_ptr and remove all occurences of free and delete. Never use the delete or free keywords. Smart pointers rock!

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-26T11:30:27.100

You can't. Use smart pointers and never worry about it.

# php - jQuery ajax 请求发送多个数组并在 php 脚本中访问它们的值

> ID：10765789
> 
> 赞同：0
> 
> 时间：2012-05-26T11:21:20.217
> 
> 标签：php, jquery, ajax

我正在尝试将多个数组传递给我的脚本，然后我将从那里将这些数组值插入数据库中。在`Branches_Control.php`我想将这些数组值保存在 PHP 变量中，然后将它们传递给我的模型并循环遍历该 PHP 数组变量以将它们插入数据库中。

这是我的 AJAX 请求：

```
var finalplaces = [];
var finallongArr = [];
var finallatArr = [];
var finalphone = [];
var finalcompanyName = [];

for (var i = 0; i < places.length; i++) {
    if (finalplaces[i] != null) {
        finalplaces[i].push(places[i])
        finallongArr[i].push(longitudeArr[i]);
        finallatArr[i].push(latitudeArr[i]);    
        finalphone[i].push(phone[i]);
        finalcompanyName[i].push(companyName[i]);
    }
}

$.ajax({
    type: 'POST',
    url: "Branches_Control.php",
    data: "Places=" + finalplaces +
            "&longitudeArr=" + finallongArr +
            "&latitudeArr=" + finallatArr +
            "&phones=" + finalphone +
            "&companyNames=" + finalcompanyName,
    success: function(data) {
        alert(data + "Succese");
        document.getElementById("asd").innerHTML = data;
    }
}); 
```

我想在我的 Branches_Control.php 中做什么

```
$places = $_POST['Places'];
echo $places[0]; 
```

谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:06:55.173

你的错误在这里：

```
 data: "Places=" + finalplaces +
            "&longitudeArr=" + finallongArr +
            "&latitudeArr=" + finallatArr +
            "&phones=" + finalphone +
            "&companyNames=" + finalcompanyName, 
```

如果您将数据作为字符串发送，则必须将这些数组字符串化，例如：

```
"&longitudeArr=" +JSON.stringify(finallongArr ) 
```

然后在服务器端你必须进行 json 解码：

```
 $longitudeArr= json_decode($_POST['longitudeArr']) 
```

或者更简单地使用 jquery 功能，您可以将数据作为对象传递：

```
data:{longitudeArr:finallongArr ,  latitudeArr: finallatArr , phones: finalphone .....} 
```

最后一种方法的优点是在 php 站点上，您可以立即获得数组：

```
$longitudeArr= $_POST['longitudeArr'] //this is an array 
```

尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:58:34.143

在您的代码中：

```
var finalplaces = [];
for (var i = 0; i < places.length; i++) {
    if (finalplaces[i] != null) {
        finalplaces[i].push(places[i])
    }
} 
```

条件`if (finalplaces[i] != null)`不能是`true`因为数组是空的，所以你永远不会填充数组。
我猜你想反转测试：`if (finalplaces[i] == null)`

# html - 如何强制浏览器使用 HTML 加载页面的所有组件？

> ID：10765791
> 
> 赞同：-1
> 
> 时间：2012-05-26T11:22:19.573
> 
> 标签：html

我使用 HTML 制作了一个页面，其中包含一些 .jpg 文件和一些 .swf 文件，当有人用慢速网络连接打开它时，其中一些文件没有被浏览器加载，即使加载需要几个小时也必须加载. 这个问题有什么解决办法吗？是否有任何代码可用于 HTML 或任何其他语言（之前是 HTML）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:29:39.610

这不是您可以从服务器端配置的东西（尤其是不能从您的 HTML 中）。

这由用户浏览器上的**超时**设置决定。如果他们愿意，他们将不得不自己更改设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:03:01.660

对于图像，您可以轻松地使用 javascript 来请求您的所有资产，一旦所有资产都加载完毕，就会显示页面的其余部分。您可以使用 CSS 默认隐藏它，然后让 javascript 在加载时再次使其可见。

这是一个这样做的例子：http: [//jsfiddle.net/HdSSL/](http://jsfiddle.net/HdSSL/)

然而，预加载 Flash 嵌入是另一回事。您可以通过手动将每个嵌入包装在容器 swf 中并监控子电影的加载状态来做到这一点，但这非常复杂，并且可能会破坏一些 Flash 电影。

# c# - 通过线程将表单显示为另一个表单上的对话框

> ID：10765792
> 
> 赞同：4
> 
> 时间：2012-05-26T11:23:16.550
> 
> 标签：c#, multithreading

以下代码给出“跨线程操作”异常。只是因为“form2.ResumeLayout(false)”。如果此语句被注释，我无法在表单中看到浏览器。我知道 ResumeLayout(false) 的需要，但有解决方案吗？

```
namespace WindowsFormsApplication1
{
public partial class Form1:  Form
{
    private System.ComponentModel.IContainer components = null;
    protected override void Dispose(bool disposing)
    { if (disposing && (components != null)) { components.Dispose(); } base.Dispose(disposing); }
    private System.Windows.Forms.Button button1;

    public Form1()
    {
        this.button1 = new System.Windows.Forms.Button();
        this.SuspendLayout();
        this.button1.Location = new System.Drawing.Point(64, 47);
        this.button1.Text = this.button1.Name = "button1";
        this.button1.Size = new System.Drawing.Size(75, 23);
        this.button1.Click += new System.EventHandler(this.button1_Click);
        this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
        this.ClientSize = new System.Drawing.Size(284, 262);
        this.Controls.Add(this.button1);
        this.Text = this.Name = "Form1";
        this.ResumeLayout(false);
    }
    private void button1_Click(object sender, EventArgs e)
    {
        Class1 clss = new Class1();
        clss.startme();
    }
}

class Class1
{
    public void startme()
    {
        Thread thread = new Thread(new ParameterizedThreadStart(Run));
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start(null);
    }
    private void Run(object j)
    {
        WebBrowser webBrowser1 = new WebBrowser();
        webBrowser1.Dock = DockStyle.Fill;
        webBrowser1.Navigate("https://dshift.sharepoint.com");

        Form form2 = new Form();
        form2.SuspendLayout();
        form2.Controls.Add(webBrowser1);
        form2.ResumeLayout(false);
        Application.OpenForms["Form1"].Invoke(new MethodInvoker(delegate
        {
            form2.ShowDialog(Application.OpenForms["Form1"]);
        }));
    }
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T16:27:56.907

WebBrowser.Navigate() 调用是问题所在。这会强制创建控件的本机窗口句柄，这发生在工作线程上。一段时间后，您强制使用 ShowDialog() 调用创建表单的本机窗口。但这发生在另一个线程上，即主 UI 线程，这要归功于 Invoke() 调用。

现在出现了不匹配，表单的窗口归主线程所有，但浏览器的窗口归工作线程所有。Winforms 提醒您这是非法的，子窗口必须与容器窗口属于同一线程。一种解决方法是将 Navigate 调用移到匿名方法中。

您可能会看到此代码，因为当您尝试在没有调用 Invoke() 的情况下显示对话框时，您也遇到了 IllegalOperationException。如果您真的想在工作线程上运行对话框，这将是正常的做法。Winforms 引发异常是因为它不希望窗口的所有者成为另一个线程上的窗口。这在 Windows 中实际上是合法的，Winforms 搞砸了检查。

您可以通过调用 SetParent() 来解决此问题。在这种非常特殊的情况下，并且永远不要在任何其他情况下这样做，方法是暂时将 Control.CheckForIllegalCrossThreadCalls 设置为 false。*暂时*强调一下。需要额外的工作来确保表单实际上是主线程上窗口的模态，并在对话框消失*之前*重新启用它：

```
var owner = Application.OpenForms["Form1"];
form2.Load += delegate {
    // NOTE: just as a workaround for the Owner bug!!
    Control.CheckForIllegalCrossThreadCalls = false;
    form2.Owner = owner;
    Control.CheckForIllegalCrossThreadCalls = true;
    owner.BeginInvoke(new Action(() => owner.Enabled = false));

};
form2.FormClosing += new FormClosingEventHandler((s, ea) => {
    if (!ea.Cancel) {
        owner.Invoke(new Action(() => owner.Enabled = true));
        form2.Owner = null;
    }
});
form2.ShowDialog(); 
```

# java - Hibernate or hsql does not respect column length

> ID：10765796
> 
> 赞同：1
> 
> 时间：2012-05-26T11:24:13.790
> 
> 标签：java, sql, hibernate, hsqldb

I have an application that uses hibernate to generate tables (since my application is still under development) for HSQL db. In my domain model I have set

```
@Basic
@Column(name = "about", length = 10)
private String about; 
```

When I open my db using DBVisualizer I can see that everything is set up properly except it is not working my column accepts values that are way over 10 characters long. When I try to run the query manually in the DBVisualier it fails as it should but hibernate lets it run.

Also very strange is when I use the file (in stead of in memory db) so that I can see the db structure and I point to the DBVisualizer it somehow breaks the connection so my changes from the Hibernate are not visible from that moment on. Everything still works I just cant see that changes in the DBVisualizer but I can in the application.

Anyone has any idea about this weird behavior?

cheers all

UPDATE

Hibernate configuration

```
 <property name="hibernate.connection.driver_class">org.hsqldb.jdbcDriver</property>
    <property name="hibernate.connection.url">jdbc:hsqldb:mem:test</property>
    <property name="hibernate.connection.username">sa</property>
    <property name="hibernate.connection.password"></property>
    <property name="hibernate.dialect">org.hibernate.dialect.HSQLDialect</property>
    <property name="hbm2ddl.auto">create</property>
    <property name="sql.enforce_strict_size">true</property> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T11:42:33.533

您的问题可能来自[文档](http://www.hsqldb.org/doc/1.8/guide/ch09.html#create_table-section)中描述的 HSQLDB 的限制：

> HSQLDB 数据库最初是在**不强制列大小和精度**的传统模式下创建的。您可以设置属性：sql.enforce_strict_size=true 来启用此功能。设置此属性后，将强制执行为数字和字符类型（CHARACTER 和 VARCHAR）提供的任何列大小和精度。在定义表之前使用命令 SET PROPERTY "sql.enforce_strict_size" TRUE 一次。

（强调我的）

# regex - Rewrite a URL to include GET data (with Drupal)

> ID：10765799
> 
> 赞同：0
> 
> 时间：2012-05-26T11:24:48.507
> 
> 标签：regex, .htaccess, drupal, url-rewriting, drupal-6

I'm relatively new to both .htaccess and regular expressions, but I really need to do the following. I'm using Drupal for my website (I don't know if the affects anything) but I've wrote a small PHP script that emails a confirmation link to users.

The page that actually processes the link is mysite.com/process?uniqueurl=confirmationLink but I want to be able to email by users the following link mysite.com/reset/confirmationLink.

Could someone give me the code that I need in order to do this? Thanks in advance.

PS: The URLs are obviously not the real ones but they are an accurate representation of my current situation!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:48:44.690

尝试以下操作：

```
RewriteEngine On
RewriteRule ^reset/(.*)$ http://mysite.com/process?uniqueurl=$1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:59:45.873

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^reset/([^/]+) process?uniqueurl=$1 [L,NC,QSA] 
```

# jquery - 如何在图像加载时放置 ajax 加载器

> ID：10765817
> 
> 赞同：0
> 
> 时间：2012-05-26T11:27:51.783
> 
> 标签：jquery, html, ajax

如何使用 ajax 加载器是我的问题，我是 ajax 新手。我有一个功能可以在用户单击缩略图时更改图像但图像很重所以我想要 ajax 直到第二个图像自行加载。我已经创建了 loader.gif 现在我只想知道如何将此图像用作加载器。

```
<script type="text/javascript">
    jQuery(function (){
        jQuery('#data').find('img').each(function(){
            jQuery(this).click(function (){
                var crd = jQuery(this).attr('title');
                jQuery('#bigimg').fadeOut('slow', function (){
                    jQuery(this).find('#imnew').attr('src', 'images/' + crd +".jpg")
                }).fadeIn()
            })
        })
    })
</script> 
```

HTML

```
<div id="bigimg">
    <img src="images/bigImage1.jpg" id="imnew" alt="" />
</div>

<div id="data">
    <div class="sub">
        <div class="1">
            <img src="images/thumb1.png" width="117" height="74" title="bigImage1" alt="" />
        </div>
        <div class="2">
            <img src="images/thumb2.png" width="117" height="74" title="bigImage2" alt=""/>
        </div>
        <div class="3">
            <img src="images/thumb3.png" width="117" height="74" title="bigImage3" alt=""/>
        </div>
        <div class="4">
            <img src="images/thumb4.png" width="117" height="74" title="bigImage4" alt=""/>
        </div>
        <div class="5">
            <img src="images/thumb1.png" width="117" height="74" title="bigImage1" alt=""/>
        </div>
        <div class="6">
            <img src="images/thumb2.png" width="117" height="74" title="bigImage2" alt=""/>
        </div>
        <div class="7">
            <img src="images/thumb3.png" width="117" height="74" title="bigImage3" alt=""/>
        </div>
        <div class="8">
            <img src="images/thumb4.png" width="117" height="74" title="bigImage4" alt=""/>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:09:50.640

您需要使用 jQuery.load 来告诉您图像何时完成加载。

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。[http://api.jquery.com/load/](http://api.jquery.com/load/)

```
<script type="text/javascript">
    jQuery(function (){
        jQuery('#data').find('img').each(function(){
            jQuery(this).click(function (){
                var crd = jQuery(this).attr('title');
                // $('#loader').show();
                jQuery('#bigimg').fadeOut('slow', function (){
                    jQuery(this).find('#imnew').attr('src', 'images/' + crd +".jpg")
                    .load(function() { 
                                    $('#loader').hide();
                                    $('#bigimg').fadeIn()

                   });
                })
            })
        })
    })
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:10:39.567

试试这个：

为所有缩略图提供相同的类名，然后：

```
 $('.thumbnail').click(function (){
            var thumbNail = $(this);
            var thumbPath = $(this).attr('src');
            var crd = $(this).attr('title');
            $(this).attr('src', 'images/loader.gif');
            $('#bigimg').fadeOut('slow', function (){
               $(this).load(function() {
                  $(this).fadeIn();
                  $(thumbNail).attr('src', thumbPath);
               });
               $(this).attr('src', crd);
            })

        }) 
```

# php - php缓存在每一定数量的页面视图中过期

> ID：10765818
> 
> 赞同：0
> 
> 时间：2012-05-26T11:27:56.137
> 
> 标签：php, caching, load

我正在寻找一些关于缓存 php 的信息。我发现的所有信息都是在特定时间间隔（每隔几个小时）缓存一个 php 文件。有没有办法为每 50 个页面视图缓存？每浏览 50 次页面后，缓存文件就会过期。

有人对此有任何想法吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:07:28.893

这是一个我刚刚放在一起的解决方案，而不是使用基于文件的缓存使用数据库，PDO sqlite（这种方式很容易删除缓存文件数据库以清除所有缓存）。

往底部看，你可以看到它是如何工作的，它会在 50 次点击后删除该行并重定向，这样它就可以生成一个新副本。希望能帮助到你

**sqlite.cache.class.php**

```
<?php 
/**
* PDO sqlite cache class
* You can include('sqlite.cache.class.php'); this class
*/
class sqlite_cache{
    private $db;

    function __construct($dsn){
        $this->dsn = $dsn;
        $this->chkSetup();
    }

    /*Singleton Connect*/
    private function connect(){
        if (!$this->db instanceof PDO){
            $this->db = new PDO($this->dsn);
            $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
    }

    /*Raw Select*/
    public function rawSelect($sql){
        $this->connect();
        return $this->db->query($sql)->fetchAll(PDO::FETCH_ASSOC);
    }

    public function get($fieldname=null, $id=null){
        $this->connect();
        $sql = "SELECT * FROM cache WHERE $fieldname = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->execute();
        return $statement->fetchAll(PDO::FETCH_ASSOC);
    }

    /*Insert*/
    public function put($values){
        $this->connect();
        $fieldnames = array_keys($values[0]);
        $sql = "INSERT INTO cache ";
        $fields = '('.implode(' ,', $fieldnames).')';
        $bound = '(:'.implode(', :', $fieldnames).')';
        $sql .= $fields.' VALUES '.$bound;

        $statement = $this->db->prepare($sql);
        foreach($values as $vals){
            $statement->execute($vals);
        }
    }

    /*Update*/
    public function update($fieldname, $value, $pk, $id){
        $this->connect();
        $sql = "UPDATE cache SET $fieldname = :value WHERE $pk = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->bindParam(':value', $value, PDO::PARAM_STR);
        $statement->execute();
    }

    /*Update Hits*/
    public function add_hit($id){
        $this->connect();
        $sql = "UPDATE cache SET hits = hits + 1 WHERE url = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->execute();
    }

    /*Delete*/
    public function delete($id){
        $this->connect();
        $sql = "DELETE FROM cache WHERE url = :id";
        $statement = $this->db->prepare($sql);
        $statement->bindParam(':id', $id, PDO::PARAM_STR);
        $statement->execute();
    }

    /*Database Setup*/
    private function chkSetup(){
        $dso = explode(':',$this->dsn);

        if(file_exists($dso[1])){
            return;
        }else{
            $this->connect();
            //Create Table
            $sql ="CREATE TABLE cache (id INTEGER PRIMARY KEY,
                                            title TEXT,
                                            url TEXT,
                                            hits INTEGER,
                                            date INTEGER,
                                            contents TEXT)";
            $this->db->query($sql);
            header("refresh:0;url=./");
            die;
        }
    }
}
?> 
```

**索引.php**

```
<?php
include('sqlite.cache.class.php');
$cache = new sqlite_cache('sqlite:./cache.db');

//Check if cache exists
$cache_result = $cache->get('url',$_SERVER['REQUEST_URI']);
//Exists
if(!empty($cache_result)){
    //Add Hit
    $cache->add_hit($_SERVER['REQUEST_URI']);

    //Delete If over 50 hits
    if($cache_result[0]['hits']>=50){
        $cache->delete($_SERVER['REQUEST_URI']);
        header('Location: '.$_SERVER['REQUEST_URI']);
        die;
    }

    echo $cache_result[0]['contents'];
}else{
    //Generate your page contents ect
    ob_start();

    ///////////////////////////////
    //Your script code goes here
    ///////////////////////////////

    echo 'Your content';

    //End your script code/////////
    ///////////////////////////////
    $return = ob_get_contents();
    ob_end_clean();

    //Before output build values to put in cache
    $cache_contents = array(array('id'=>NULL,
                                  'title'=>'Page Title',
                                  'url'=>$_SERVER['REQUEST_URI'],
                                  'hits'=>'0',
                                  'date'=>time(),
                                  'contents'=>$return));

    //Store cache
    $cache->put($cache_contents);
    echo $return;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:48:59.450

您可以采用非常低的技术来解决此问题。

对于您的 URL 的每次点击，您都可以创建一个临时文件作为计数器。使用这样的东西 -

```
// recursively remove a directory
function rrmdir($dir) {
    foreach(glob($dir . '/*') as $file) {
        if ($file != "." && $file != "..") {
          if(is_dir($file))
            rrmdir($file);
          else
            unlink($file);
        }
    }
    rmdir($dir);
} 

$fileCount = count(glob($tempfile_directory."/*"));
if ($fileCount >= $someLimit){
  rrmdir($tempfile_directory); // clear the counter
  mkdir($tempfile_directory);
  // clear the cached server data and refresh. 
}
touch($tempfile_directory . '/' . time()); // create a new dummy counter file 
```

[从 - http://www.php.net/manual/en/function.rmdir.php#108113](http://www.php.net/manual/en/function.rmdir.php#108113)借来的递归删除函数

当文件数`$tempfile_directory`大于等于 时`$someLimit`，文件夹将被清空并刷新缓存数据。

# r - create a new column that arrange data frame order based on previous columns

> ID：10765829
> 
> 赞同：1
> 
> 时间：2012-05-26T11:30:39.190
> 
> 标签：r

i have a data frame like this:

```
 A     B      C    
1   1   1 0.4519
2 101   1 0.3819
3 201   1 0.3819
4 301   1 0.2819
5 401   1 0.9819
6 501   1 0.6819 
```

it's larger but that's an example.

i want to create a new column called `order` which include a number from `(1 until nrow(df))` and it increase based on the value of the `C` column (1 for smallest value and increase with increasing `C` value). and when the values in column C are equal change the ordering criteria to column `A` and when the values in column A are equal, change it to column `B`.

is this can be done in R in an easy and efficient way?

this can be done using a for loop on the data frame and make some if statement, but it will take to much time to finish. that's why i need a faster alternative if possible

thank you

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:56:56.560

您可以使用`order`基于多个列对数据进行排序。根据`order`文档：

> 在第一个向量中的平局的情况下，第二个向量中的值用于打破平局。如果这些值仍然绑定，则使用后面的参数中的值来打破绑定。

这将是您的示例数据框：

```
df <- data.frame(list(A=c(1, 101, 201, 301, 401, 501),
                      B=rep(1, 6),
                      C=c(0.45, 0.38, 0.38, 0.28, 0.98, 0.68))) 
```

这是根据您想要的顺序在数据框中创建新列的代码：

```
df$order <- order(df$C, df$A, df$B) 
```

# android - Out of memory exception in gson.fromJson()

> ID：10765831
> 
> 赞同：10
> 
> 时间：2012-05-26T11:30:59.143
> 
> 标签：android, json, gson, out-of-memory

I use the following code for converting Json string(strWebserviceResult) to my Object:

```
EntMyClass entMyClass = gson.fromJson(strWebserviceResult,EntMyClass.class); 
```

When **strWebserviceResult** is large (about 2.5 MB) I get the **Out of memory** exception on this line on Android phone devices not in Tablet that has larger memory.

How can I solve that.

Does anybody have any suggestion?

```
05-26 15:52:49.607: E/dalvikvm-heap(2078): Out of memory on a 9200-byte allocation.
05-26 15:52:49.618: E/dalvikvm(2078): Out of memory: Heap Size=31879KB, Allocated=27693KB, Bitmap Size=936KB, Limit=32768KB
05-26 15:52:49.618: E/dalvikvm(2078): Extra info: Footprint=31879KB, Allowed Footprint=31879KB, Trimmed=7400KB
05-26 15:52:49.618: E/AndroidRuntime(2078): FATAL EXCEPTION: Thread-19
05-26 15:52:49.618: E/AndroidRuntime(2078): java.lang.OutOfMemoryError: (Heap Size=31879KB, Allocated=27693KB, Bitmap Size=936KB)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at java.util.ArrayList.add(ArrayList.java:123)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.deserialize(DefaultTypeAdapters.java:664)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.deserialize(DefaultTypeAdapters.java:624)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationVisitor.invokeCustomDeserializer(JsonDeserializationVisitor.java:92)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonObjectDeserializationVisitor.visitFieldUsingCustomHandler(JsonObjectDeserializationVisitor.java:117)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.ReflectingFieldNavigator.visitFieldsReflectively(ReflectingFieldNavigator.java:63)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:120)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationContextDefault.fromJsonObject(JsonDeserializationContextDefault.java:76)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationContextDefault.deserialize(JsonDeserializationContextDefault.java:54)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.deserialize(DefaultTypeAdapters.java:663)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.DefaultTypeAdapters$CollectionTypeAdapter.deserialize(DefaultTypeAdapters.java:624)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializerExceptionWrapper.deserialize(JsonDeserializerExceptionWrapper.java:51)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationVisitor.invokeCustomDeserializer(JsonDeserializationVisitor.java:92)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationVisitor.visitUsingCustomHandler(JsonDeserializationVisitor.java:80)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:101)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationContextDefault.fromJsonArray(JsonDeserializationContextDefault.java:67)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.JsonDeserializationContextDefault.deserialize(JsonDeserializationContextDefault.java:52)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.Gson.fromJson(Gson.java:551)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.Gson.fromJson(Gson.java:498)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.Gson.fromJson(Gson.java:467)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.Gson.fromJson(Gson.java:417)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at com.google.gson.Gson.fromJson(Gson.java:389)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at org.mabna.order.businessLayer.BoWebService.getDataForUpdate(BoWebService.java:188)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at org.mabna.order.ui.ActToolDataExchange.threadGetDataForFullUpdate(ActToolDataExchange.java:371)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at org.mabna.order.ui.ActToolDataExchange.access$9(ActToolDataExchange.java:362)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at org.mabna.order.ui.ActToolDataExchange$33.run(ActToolDataExchange.java:603)
05-26 15:52:49.618: E/AndroidRuntime(2078):     at org.mabna.order.utils.Utilities$5.run(Utilities.java:778) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T15:47:49.857

尝试使用将JsonReader 作为输入的[fromJson方法。](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html#fromJson%28com.google.gson.stream.JsonReader,%20java.lang.reflect.Type%29)这应该允许您一次不需要整个输入字符串都在内存中。这是一些示例代码：

```
 final HttpURLConnection c = (HttpURLConnection) url.openConnection();
        final InputStreamReader isr = new InputStreamReader(c.getInputStream());
        final JsonReader reader = new JsonReader(isr);
        final EntMyClass entMyClass = GSON.fromJson(reader, EntMyClass.class);
        reader.close();
        c.disconnect(); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T16:57:36.883

与另一篇文章一样，我会问是否有任何方法可以避免您的应用程序使用大量内存。如果你能做到这一点，那将是最优化的解决方案。如果您的应用确实需要这么多内存，您可以尝试`android:largeHeap="true"`在清单中为您的应用设置。这是参考：

[http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)

有关更多信息，请参阅此视频：

[http://www.youtube.com/watch?v=_CruQY55HOk](http://www.youtube.com/watch?v=_CruQY55HOk)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T16:01:54.690

首先。您真的需要将 2.5MB 数据加载到内存中吗？
首先创建了一个大字符串，然后对其进行解析（内存中的另一个对象），然后创建了一个巨大的 EntMyClass 实例。这种方法确实效率低下。

我猜你在这个对象中有 List 。只有您提供的信息，我建议将数据流式传输到数据库中。然后您可以创建适配器以在 ListView 中显示数据。

有很多方法可以做到这一点。我正在使用 Jackson 库，因为它是最快的，GSON 应该具有类似的功能。

假设您在此对象中有一个列表，下面是如何将 json 数组存储在数据库中的示例：

```
 //create parser
    final JsonParser jsonParser = objectMapper.getJsonFactory().createJsonParser(inputStream);

    JsonToken jsonToken = jsonParser.nextToken();
    while ((jsonToken = jsonParser.nextToken()) != null && jsonToken != JsonToken.END_ARRAY) {
        //map json object to ItemClass
        final ItemClass item = jsonParser.readValueAs(ItemClass.class);
        //store in database
        itemDAO.insert(item);
    } 
```

并用数据库事务围绕它，不仅数据会在出错的情况下回滚，而且效率更高。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T19:25:41.527

请阅读 gson 作者的答案 -[这里](https://stackoverflow.com/a/9460267/394678)

还有我的 5 美分：

```
 JsonReader r = null;
        try {
            Reader reader = new BufferedReader(new InputStreamReader(is));
            r = new JsonReader(reader);
            result = gson.fromJson(r, clazz);
        } finally {
            if (null != r) {
                r.close();
            }
        } 
```

# java - 使用 Java 模式进行特殊字符检查

> ID：10765837
> 
> 赞同：-2
> 
> 时间：2012-05-26T11:32:51.170
> 
> 标签：java, regex, pattern-matching, special-characters, matcher

我想用以下信息生成两种模式，

1) 账户表单中的名字、姓氏、电子邮件、电话号码字段中不能输入以下特殊字符：

**模式** " [ ] : ; | = + * ? < > / \ ， **名称不能以句点开头**

2）以下特殊字符不能在公司地址字段中输入：

**模式**< > / \ |

请给我一个想法。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:13:29.793

**试试这些模式**

*第 1 点*

```
(?i)^([a-z][^"\[:\]\|=\+\*\?<>\\\/\r\n]+)$ 
```

*第 2 点*

```
(?i)^([a-z][^<>\\\/\|\r\n]+)$ 
```

**解释**

```
1st Pattern

"(?i)" +                               -- Match the remainder of the regex with the options: case insensitive (i)
"^" +                                  -- Assert position at the beginning of a line (at beginning of the string or after a line break character)
"(" +                                  -- Match the regular expression below and capture its match into backreference number 1
   "[a-z]" +                              -- Match a single character in the range between “a” and “z”
   "[^\"\\[:\\]\\|=\\+\\*\\?<>\\\\\\/\r\n]" +       -- Match a single character NOT present in the list below
                                             -- The character “"”
                                             -- A [ character
                                             -- The character “:”
                                             -- A ] character
                                             -- A | character
                                             -- The character “=”
                                             -- A + character
                                             -- A * character
                                             -- A ? character
                                             -- One of the characters “&lt;>”
                                             -- A \ character
                                             -- A / character
                                             -- A carriage return character
                                             -- A line feed character
      "+" +                                  -- Between one and unlimited times, as many times as possible, giving back as needed (greedy)
")" +
"$"                                    -- Assert position at the end of a line (at the end of the string or before a line break character)

2nd Pattern

"(?i)" +                  -- Match the remainder of the regex with the options: case insensitive (i)
"^" +                     -- Assert position at the beginning of a line (at beginning of the string or after a line break character)
"(" +                     -- Match the regular expression below and capture its match into backreference number 1
   "[a-z]" +                 -- Match a single character in the range between “a” and “z”
   "[^<>\\\\\\/\\|\r\n]" +       -- Match a single character NOT present in the list below
                                -- One of the characters “&lt;>”
                                -- A \ character
                                -- A / character
                                -- A | character
                                -- A carriage return character
                                -- A line feed character
      "+" +                     -- Between one and unlimited times, as many times as possible, giving back as needed (greedy)
")" +
"$"                       -- Assert position at the end of a line (at the end of the string or before a line break character) 
```

**代码**

```
try {
    boolean foundMatch = subjectString.matches("(?i)^([a-z][^\"\\[:\\]|=+*?<>\\\\/\\r\\n]+)$");
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:53:05.157

`String.contains()`您可以使用该方法，而不是使用您显然没有信心的正则表达式。

但是，如果您必须使用正则表达式，就像 Mayur Patel 所说的那样，“ `[ab]`”基本上意味着 a 或 b ！您应该查看正则表达式.info

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T15:47:25.313

以下是我的问题的解决方案

1) (?i)^([az][^\"\[:\]|=+*.?<>\\/\r\n]+)$

2) (?i)^([az][^\"<>|\\/\r\n]+)$

我还在 1) 点中添加了句点符号，用于检查不以句点符号开头的名称。

非常感谢 Cylian 和 Andy 的帮助，它真的帮了我很多。

再次感谢 ：）

# html - HTML中的侧边栏直到底部

> ID：10765838
> 
> 赞同：0
> 
> 时间：2012-05-26T11:32:56.070
> 
> 标签：html, css

我的朋友正在他的网站上工作，但他的侧边栏有问题。他希望侧边栏一直到页面底部，而不是浏览器中可见部分的底部。[这是该页面的链接](http://www.mitchelldesmet.be/antwerpengooit/)。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T03:04:24.047

为了让侧边栏到达页面底部，侧边栏和它的所有父元素都需要这样做。这意味着他们都需要（在这种情况下）是`height: 100%;`

在你的情况下，你需要你的 html、body、#container 和 #sidebar`height: 100%;`

***PS：***在旁注中，可以说您的侧边栏可能更合适，`<aside>`而不是`<article>`.

# iphone - 为什么 GCD 代码在 drawRect 中崩溃？

> ID：10765841
> 
> 赞同：0
> 
> 时间：2012-05-26T11:33:37.440
> 
> 标签：iphone, objective-c, ios, grand-central-dispatch

这是在drawRect里面：

```
NSString *generated = [Entry generateString];

const char *cString = (const char*)[generated UTF8String];

dispatch_queue_t queue = dispatch_queue_create(cString, NULL);*/

dispatch_async(queue, ^{

    Media *media = [self.entry.media objectAtIndex:i];

    UIImage *image = [media getThumbnail];

    dispatch_async(dispatch_get_main_queue(), ^{

        int bottom = [JHomeViewCell yOfMessageBottomWithMessageHeight:self.cellInfo.messageHeight
                                                            withMonth:self.cellInfo.hasMonth];

        CGRect frame = CGRectMake(87 + (68 * i),
                                  bottom,
                                  THUMBNAIL_SIZE.width,
                                  THUMBNAIL_SIZE.height);

        [image drawInRect:frame];
    });

}); 
```

现在，它在 objectAtIndex 行崩溃。这不是一个无效的索引。该代码在此之外工作正常。

编辑：我收到了这个错误：

```
Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'statement is still active' 
```

编辑 2：我放入 NSLogs，第一个获得 media.count。它因同样的错误而崩溃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T12:53:03.567

这里的问题是你画在你应该在的地方之外。当你从 回来时`drawRect:`，你已经告诉操作系统你已经完成了。您不能在从返回之前生成异步线程，`drawRect:`并且期望能够通过返回到主线程来进行绘制，因为一旦您从`drawRect:`上下文返回就会被破坏。

执行此操作的常用方法是将信息缓存在单独的线程上，然后调用`invalidateRect:`您需要绘制的区域，让您的`drawRect:`方法除了快速绘制和退出之外什么都不做。

如果您想延迟加载缩略图，我建议将缩略图的副本存储在一个私有位置（可能使用 NSCache 并使用您的图像标识符作为键），然后如果图像在`drawRect:`调用时存在于缓存中，则绘制图像，否则绘制一个占位符并使用 GCD 将图像添加到队列以创建缩略图。在该调度队列调用内部：

*   检索缩略图
*   将其存储在缓存中
*   调用`invalidateRect`包含图像的区域

如果您发现很难计算位置，或者您的缩略图非常快，您可以延迟 invalidateRect: 并在您的绘图例程结束时在最终的 dispatch_async 中调用它（但前提是您将缩略图排队等待恢复）。这将导致单个全区域重绘，而不是针对包含单个缩略图的每个区域进行多次重绘。

# file - 防止 ClickOnce 下载应用程序数据文件并在它们所在的位置使用它们

> ID：10765842
> 
> 赞同：-2
> 
> 时间：2012-05-26T11:33:41.110
> 
> 标签：file, clickonce

我有一个在客户端计算机上安装某些软件的程序。而且因为在开始之前它需要.Net Framework 2，所以我必须先点击一次先决条件来安装.Net Framework 2。在单击开始之前，它只是将我的所有安装文件复制到某个地方，例如：'C:\Users\Mark\AppData\Local\Apps\2.0\0H6ZL......'

它们是大安装文件，我不希望它在那里复制它们。有什么解决办法吗？

谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T05:11:42.490

我不太明白你的问题，但让我试着回答我认为你在问的问题。

您在问题中引用的目录（“...\apps\2.0...”）是 ClickOnce 缓存的位置，在安装 .NET Framework 之前它不会将这些文件复制到那里，而是在复制它们那里为了安装 ClickOnce 应用程序。这是应用程序驻留和运行的地方。

setup.exe 是引导程序。它检查先决条件并在必要时安装它们，然后启动 ClickOnce 安装，它将文件下载到上述位置。它与先决条件的安装无关。

# installation - 使用 Maven 安装 Playn 停止并且未完成

> ID：10765843
> 
> 赞同：0
> 
> 时间：2012-05-26T11:33:59.893
> 
> 标签：installation, playn

我完全按照[http://code.google.com/p/playn/wiki/GettingStarted的说明进行操作](http://code.google.com/p/playn/wiki/GettingStarted)

我安装了 Git 并将 playn-samples 放入名为 C:\a2 的文件夹中。我将环境变量设置为指向 JAVA_HOME 和 M2_HOME。我安装了 maven 并确保版本大于 3.0.3。在 Windows 命令窗口中，我做了：

```
cd C:\a2\playn-samples\showcase
mvn test 
```

但它给了我这个并且永远停顿（我是 maven 的初学者）：

```
c:\a2\playn-samples\showcase>mvn test
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO]
[INFO] PlayN Showcase Metaproject
[INFO] PlayN Showcase Core
[INFO] PlayN Showcase Android
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building PlayN Showcase Metaproject 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] --- maven-enforcer-plugin:1.0:enforce (enforce-maven) @ playn-showcase --
-
Downloading: http://repo.maven.apache.org/maven2/commons-lang/commons-lang/2.3/c
ommons-lang-2.3.jar
Downloading: http://repo.maven.apache.org/maven2/org/beanshell/bsh/2.0b4/bsh-2.0
b4.jar
78 KB   151 KB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T19:40:50.450

看起来像一个临时的网络故障。我敢打赌，如果你再试一次，它最终会下载所有必要的依赖项。

# javascript - 使用 javascript 获取元素标题

> ID：10765844
> 
> 赞同：1
> 
> 时间：2012-05-26T11:34:01.387
> 
> 标签：javascript

我正在尝试使用以下代码检索元素的标题

```
function highlight(elem) {
    var e = new Array();
    if (elem.style.border == '2px solid blue') {
        elem.style.border = '';
    } else elem.style.border = '2px solid blue';
    e.push(elem.title);
    var x = document.getElementById("test");
    x.innerHTML = e;
} 
```

但它不起作用。我也试过在函数中传递'this.title'并显示它，仍然不起作用。现在我只传递“这个”。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:45:17.610

查看您在评论中发布的代码：

```
<a title="<?php echo $url;?>" href="#">
    <img class="photo-img" src="<?php echo $thumb?>" border="2" alt="" width="40" onClick="highlight(this)" />
</a> 
```

我可以看到您正在传递一个`img`没有标题的元素作为元素。您实际上想要访问父元素的标题，因为您`img`没有标题，但它的父元素（the `a`）有：

```
elem.parentNode.title 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-26T11:51:33.427

使用`elem.getAttribute('title')`. 这是与浏览器无关的解决方案。

# codeigniter - MAMP / IIS 上的 CodeIgniter / Gmail SMTP 超时

> ID：10765849
> 
> 赞同：0
> 
> 时间：2012-05-26T11:35:27.490
> 
> 标签：codeigniter, iis, smtp, gmail, mamp

我正在尝试使用 CI 电子邮件类发送电子邮件，但页面在尝试发送时只是挂起。我已经在 IIS 上尝试过，现在在我的 Mac 上使用 MAMP。该代码与到处复制的代码相同，并且似乎对其他人都有效！

```
 $config = Array(
                'protocol'  => 'smtp',
                'smtp_host' => 'ssl://smtp.googlemail.com',
                'smtp_port' => '465',
                'smtp_user' => 'xxx',
                'smtp_pass' => 'xxx',
                'mailtype'  => 'html',
                'starttls'  => true
            );

        $this->load->library('email', config);
        $this->email->from('email@gmail.com', 'George');
        $this->email->to('email@gmail.com');
        $this->email->subject('hey this is an email');
        $this->email->message('this is the content of the email');
        $this->email->send(); 
```

任何其他服务器设置尝试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T19:31:02.110

好的，所以我很尴尬地说我错过了 $ ：

```
$this->load->library('email', config); 
```

尝试每个可以想象的端口/服务器/防火墙/安全设置浪费了一整天。

我希望这可以帮助像我一样愚蠢的人。

# spring - jsp errorPage 无法与 spring 调度程序一起正常工作

> ID：10765850
> 
> 赞同：3
> 
> 时间：2012-05-26T11:35:28.317
> 
> 标签：spring, jsp, servlets

我在我的 JSP 项目中使用 Spring：

我对所有 HTML 请求都有以下映射：

```
<servlet>
  <servlet-name>spring</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet> 
```

和

```
<servlet-mapping>
   <servlet-name>spring</servlet-name>
   <url-pattern>*.html</url-pattern>
</servlet-mapping> 
```

所以每个请求都会发送给调度程序。

我有一个 JSP 页面，其中有`session.getAttribute()`，它将会话变量返回到该页面。

如果某些用户直接访问该页面，则会话变量将返回为 null。

为了避免这种情况，我尝试在 JSP 页面中添加以下行：

```
<%@page errorPage="error.jsp"%> 
```

JSP 文件位于该页面所在的同一目录中，但没有运气。我收到以下异常：-> 404

我还尝试了一种组合，因此 errorPage 将指向如下：

`<%@page errorPage="../error.jsp"%>`还是行不通

然后，我在 Controller 中添加了一个条目，如下所示：

```
 @RequestMapping("/xyz/result/error")
        public ModelAndView showErrorPageEng() {
            return new ModelAndView("errorpage", "command", null);
        } 
```

更新部分问题：

我有错误页面的以下磁贴条目：

```
<definition name="errorpage" extends="basic"
    template="/error/error_layout.jsp">
    <put-attribute name="error" value="/error/error.jsp"/>  
</definition> 
```

并将 JSP 中的代码修改为：

```
<%@page errorPage="error.html"%> 
```

上述路径/xyz/result/error如下：

```
ROOT/xyz/result/error 
```

我可以访问该文件`mydomain/xyz/result/error.html`，但没有发生同样的情况，但有以下例外：

**开始为**

```
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:745)
at org.apache.jasper.runtime.PageContextImpl.forward(PageContextImpl.java:716)
at org.apache.jsp.error_jsp._jspService(error_jsp.java:63)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at org.apache.jasper.runtime.PageContextImpl.doForward(PageContextImpl.java:745)

**and ends as** 

    at org.apache.tiles.servlet.context.ServletTilesRequestContext.dispatch(ServletTilesRequestContext.java:220)
    at org.apache.tiles.renderer.impl.TemplateAttributeRenderer.write(TemplateAttributeRenderer.java:44)
    at org.apache.tiles.renderer.impl.AbstractBaseAttributeRenderer.render(AbstractBaseAttributeRenderer.java:103)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:659)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:678)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:633)
    at org.apache.tiles.impl.BasicTilesContainer.render(BasicTilesContainer.java:322)
    at org.springframework.web.servlet.view.tiles2.TilesView.renderMergedOutputModel(TilesView.java:124)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549 
```

)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T20:46:25.620

我们找到了可能的解决方法如下，我们可以把它放在 jsp 页面中，我不知道但把 return 工作，

```
String  myObject= (String)session.getAttribute("finalList");

    if(myObject==null)
        {
            out.println("<div class=\"content\">     <div class=\"mainbarWH\">       <div class=\"article\">         <h2 class=\"style1\">Sorry !</h2>         <div class=\"clr style1\"></div>         <p class=\"style1\"><strong>Your session has been expired </strong></p>         <p class=\"style1\">Please go to <a href=\"engineering.html\">Home</a></p>       </div>       </div>     <div class=\"clr\"></div> </div>");
            return;

        } 
```

假设您喜欢的jsp页面

x - 平铺 y - 平铺 z - jsp 页面中的平铺，如果平铺 y 出现空指针异常，

然后上面的代码给出的页面为，

x -平铺 y -平铺

所以在回去的时候，我们只是做了 out.println('some html code')

这只是解决方法，还不是标准解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T20:57:19.687

基于@pradeep 现有解决方案的另一种可能解决方案是使用 HttpServletResponse 对象重定向到静态 HTML 页面。

虽然静态 HTML 页面不能在 JSP 脚本页面声明中使用，但浏览器可访问的现有路径是服务器可以将用户重定向到的路径。

这种解决方案的优点是 HTML 保留在它所属的位置，在 HTML 文件中，而不是在 Java 字符串中。这创建了一个更易于维护的环境，Java 工程师可以阅读代码并且 Web 开发人员可以访问该环境，但仍然构建在建议的解决方法之上。

**爪哇：**

```
String  myObject= (String)session.getAttribute("finalList");

    if(myObject==null)
        {

            // redirect to the error page, using static HTML
            response.sendRedirect("/errorPage.html");
            return;

        } 
```

**错误页面.html：**

```
<html>
<head></head>
<body>
  <div class="content">
    <div class="mainbarWH">
        <div class="article">
        <h2 class="style1">Sorry !</h2>
        <div class="clr style1"></div>
        <p class="style1">
            <strong>Your session has been expired </strong>
        </p>
        <p class="style1">Please go to <a href="engineering.html">Home</a></p>
     </div>
   </div>
   <div class="clr"></div> </div>
</body>
</html> 
```

# asp.net - Localization for "the value {0} is invalid" in case of int overflow

> ID：10765853
> 
> 赞同：7
> 
> 时间：2012-05-26T11:35:55.073
> 
> 标签：asp.net, asp.net-mvc-3, localization, validation

I've read [answers](https://stackoverflow.com/a/5395297/291695) about localization of validation errors by specifying `DefaultModelBinder.ResourceClassKey`, basically it's when entering string values in int field or not a datetime in datetime field.

But when I'm typing "111111111111111111111111111111" for an int field I get `System.OverflowException` and it looks like `"The value '{0}' is invalid."`.

Is there a way to localize (translate that message to other languages) that validation error in a way similar to other MVC-validation?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T11:08:08.437

I had the same issue, and I finally managed to find the solution. Yes, that message can be localized, and luckily it's pretty easy when you figure it out.

You have to create a resource file and put it in the `App_GlobalResources` folder. You can call the file whatever you want, but I usually call it MvcValidationMessages.

Open the resource file and create a string with the name `InvalidPropertyValue` and write whatever message you want in the value field.

Now, open the Global.asax file and add the following line to the method `Application_Start()`:

```
System.Web.Mvc.Html.ValidationExtensions.ResourceClassKey = "MvcValidationMessages"; 
```

"MvcValidationMessages" should of course be the correct name of the resource file you just created.

And voíla! That's all there is to it. The message shown will now be your own instead of the default one.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T06:12:32.883

I ended up overriding ModelBinder for `int` and supplying a localized error-message there:

```
public class IntModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        double parsedValue;
        if (double.TryParse(value.AttemptedValue, out parsedValue))
        {
            if ((parsedValue < int.MinValue || parsedValue > int.MaxValue))
            {
                var error = "LOCALIZED ERROR MESSAGE FOR FIELD '{0}' HERE!!!";
                bindingContext.ModelState.AddModelError(bindingContext.ModelName, string.Format(error, value.AttemptedValue, bindingContext.ModelMetadata.DisplayName));
            }
        }
        return base.BindModel(controllerContext, bindingContext);
    }
} 
```

Then I simply registered it: `ModelBinders.Binders.Add(typeof(int), new IntModelBinder());` and it now works fine.

P.S. sure, my localized errormessages are not hardcoded in model binder, this is just a simplified example :)

# css - CSS：为表格中的选定行设置颜色

> ID：10765854
> 
> 赞同：6
> 
> 时间：2012-05-26T11:36:02.047
> 
> 标签：css, colors, css-tables

我需要在我的表中添加以下功能：

当用户单击一行（选择它）时，该行会用颜色标记`#FFCF8B`（与 相同`hover`）。我试过`#newspaper-b` `tbody tr.selected td`了，但它不起作用。

```
 #newspaper-b {
        border-collapse: collapse;
        border-color: #B7DDF2;
        border-style: solid;
        border-width: 1px;
        font-family: Arial,Helvetica,sans-serif;
        font-size: 11px;
        margin: 0;
        text-align: left;
        width: 480px;
    }
    #newspaper-b th {
        background: none repeat scroll 0 0 #EBF4FB;
        border-color: lightgray;
        font-size: 11px;
        font-weight: bold;
        padding: 15px 10px 10px;
    }
    #newspaper-b tbody tr td {
        background: none repeat scroll 0 0 #FFFFFF;
    }
    #newspaper-b td {
        border-top: 1px dashed #FFFFFF;
        color: #000000;
        padding: 10px;
    }
    #newspaper-b tbody tr:hover td {
        background: none repeat scroll 0 0 #FFCF8B;
        color: #000000;
    }
    #newspaper-b tbody tr.selected td {
        background: none repeat scroll 0 0 #FFCF8B;
        color: #000000;
    } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-26T11:49:20.957

为了将 .selected 类添加到单击的行中，您需要一些 JavaScript。

示例[http://jsfiddle.net/thebabydino/KzVfy/](http://jsfiddle.net/thebabydino/KzVfy/)

我使用 jQuery 作为示例，因此代码很少：

```
$("tr").click(function(){
    $(this).addClass("selected").siblings().removeClass("selected");
});​ 
```

当然，如果您不想包含 jQuery，也可以不使用任何库来完成。

* * *

只是为了变化，我做了另一个版本。**这个不使用任何库**（没有 jQuery、没有 Mootools、没有 YUI、没有 Dojo，等等......）并选择了多行。可以在[http://jsfiddle.net/thebabydino/nY5jj/](http://jsfiddle.net/thebabydino/nY5jj/)看到一个变体，当再次单击它时取消选择选定的行[http://jsfiddle.net/thebabydino/nY5jj/1/](http://jsfiddle.net/thebabydino/nY5jj/1/)

JavaScript 是：

```
var trs = document.querySelectorAll("tr");
for(var i = 0; i < trs.length; i++){
    trs[i].addEventListener("click", function(){this.className += " selected";});
}​ 
```

要在第二次单击时取消选择选定的行：

```
var trs = document.querySelectorAll("tr");
for(var i = 0; i < trs.length; i++){
    trs[i].addEventListener("click", function(){
        var cn = this.className, thc = " selected", start_idx = cn.indexOf(thc);
        if(start_idx == -1) cn += thc;
        else cn = cn.replace(thc,"");
        this.className = cn;
    });
}​ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-26T11:48:32.630

我`CSS`认为你不能这样做。您可以使用`jQuery`. 我写了快速的基本示例（但还有更多方法可以做到）：

```
 <table class="tab" cellpading="0" cellspacing="0" border="1">
    <tr>
      <td>lol</td>
      <td>lol</td>
    </tr>
    <tr>
      <td>lol</td>
      <td>lol</td>
    </tr>
    <tr>
      <td>lol</td>
      <td>lol</td>
    </tr>
   </table> 
```

添加到您的`CSS`文件中：

```
tr.clicked {
      background-color: #abc;
} 
```

添加此`jQuery`代码：

```
$('.tab tr').click(function() {
      $(this).toggleClass("clicked");
    }); 
```

当您单击行中的时`table`，`jQuery`将为`background-color`您的行添加，再次单击，类将被删除。希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-26T11:53:14.063

这是一个使用dojo的小提琴。其他人都提到过的相同概念。

[http://jsfiddle.net/cswing/SG9dp/](http://jsfiddle.net/cswing/SG9dp/)

注意：我允许选择多行。问题没有说明要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-17T10:33:01.617

```
<!DOCTYPE html>
<html>
<head>
<style>
table, td {
    border: 2px solid black;
    border-collapse: collapse;
    padding: 5px;
    marging: 2px;
}
</style>
</head>
<body onload="initSelection()">

<table id="myTable" onkeydown="fn">
  <tr>
    <td>cell 1</td>
    <td>cell 2</td>
    <td>cell 3</td>
    <td>cell 4</td>
    <td>cell 5</td>
    <td>cell 6</td>
  </tr>
  <tr>
    <td>cell 3</td>
    <td>cell 4</td>
    <td>cell 1</td>
    <td>cell 2</td>
    <td>cell 1</td>
    <td>cell 2</td>
  </tr>
  <tr>
    <td>cell 5</td>
    <td>cell 6</td>
    <td>cell 1</td>
    <td>cell 2</td>
    <td>cell 1</td>
    <td>cell 2</td>
  </tr>
  <tr>
    <td>cell 7</td>
    <td>cell 8</td>
    <td>cell 1</td>
    <td>cell 2</td>
    <td>cell 1</td>
    <td>cell 2</td>
  </tr>
</table>

<script>

var row = 0;
var cell = 0
var selectedStyle = "5px solid #c68305";
var deleSelectedStyle ="2px solid #000000" ;
function initSelection() {
     var x = document.getElementById("myTable");
  x.rows[row].cells.item(cell).style.border = selectedStyle;

}
document.addEventListener('keydown',fn);
function fn(event){
  console.log(event.keyCode);
  var x = document.getElementById("myTable");
  var prev = x.rows[row];
  var cur = null;
  var next = null;
  if(event.keyCode ==40){
    if(prev){
      prev.cells.item(cell).style.border = deleSelectedStyle;
    }
     row++;
     cur = x.rows[row];
     if(cur){
        cur.cells.item(cell).style.border = selectedStyle;
     }else{
      row =0;
      cur = x.rows[row];
      cur.cells.item(cell).style.border = selectedStyle;
     }
   }else if(event.keyCode==38){
    prev.cells.item(cell).style.border = deleSelectedStyle;
     row--;
     if(row<0){
      row = x.rows.length-1;
     }
     x.rows[row].cells.item(cell).style.border = selectedStyle;
   }else if(event.keyCode==39){
    prev.cells.item(cell).style.border = deleSelectedStyle;
     cell++;
     next   = prev.cells.item(cell);
     if(next){
        prev.cells.item(cell).style.border = selectedStyle;
     }else{
        cell = 0;
        prev.cells.item(cell).style.border = selectedStyle;
     }
   }else if(event.keyCode==37){
      prev.cells.item(cell).style.border = deleSelectedStyle;
     cell--;
      if(cell<0){
      cell = prev.cells.length-1;
     }
     prev.cells.item(cell).style.border = selectedStyle;
   }

}
</script>

</body>
</html> 
```

# macos - 如何从 MAC OS X 中删除应用程序

> ID：10765857
> 
> 赞同：3
> 
> 时间：2012-05-26T11:36:09.347
> 
> 标签：macos, osx-lion

当我删除这个应用程序时，它会立即出现在 mac App Store 的更新标签中，我怎样才能彻底删除它？ ![空闲内存无法删除](../Images/4fdd38921d98705358c1f5e55ac6f997.png)
我曾经通过两种方式将其删除：
1.command + 从 Applications 文件夹中删除此应用
2.使用其他应用名称 AppCleaner 将其删除，
但问题仍然存在。

看起来系统中有一些信息（Mac OS X 10.7.4）。App Store 认为它需要更新。
我应该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:40:22.997

如果您正在运行 MAC OS Lion，您是否尝试过从 LaunchPad 中移除它（按住图标直到它摆动然后按 x）。

或者尝试应用程序清洁器[http://appcleaner.en.softonic.com/mac](http://appcleaner.en.softonic.com/mac)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-02T14:22:16.313

我在stackexchange上找到了这个答案并且它有效：我遇到了完全相同的问题，这解决了它：

从 Mac AppStore(MAS) 下载的所有应用程序都在其应用程序包中包含收据（例如：appname.app/Contents/_MASReceipt/receipt）。MAS 将扫描此文件以检查新版本是否可用。

您可以使用此应用程序（查找任何文件）搜索驱动器上的任何收据：http: [//apps.tempel.org/FindAnyFile/](http://apps.tempel.org/FindAnyFile/)

启动“查找任何文件”并搜索：_MASReceipt 浏览您认为可能是罪魁祸首的每个结果，将收据复制到桌面作为备份，然后删除 _MASReceipt 文件夹中的收据。打开 MAS 并让它扫描软件更新。如果仍然显示错误的 ID，则表示您删除了错误的收据。将收据备份从您的桌面恢复到之前的位置。重复该过程，直到找到问题收据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-25T19:49:24.247

你有选择：

*   您有许多带有 GUI 界面的高级应用程序可以为您完成。
*   从 Mac 上的 Applications 文件夹中手动删除该应用程序，但这只会删除该应用程序，而不会清理相关的文件和文件夹。
*   我最喜欢的是，您可以利用 UNIX shell“终端”为您做这件事。

查找并删除与应用程序关联的目录。例如：

```
#this will list all the paths that exist for a specific app name
$ sudo find 'location' -name 'Application'
$ rm -rf 'location' 
```

辅助函数：

```
uninstall(){
    if [ ! $@ ]; then
        echo 'you must specify a program name you want to uninstall.'
        printf "Enter an App name > \n"
        read  1
        while [[ -z $1 ]];do
            printf "Enter valid App Name >\n"
            read 1
        done
    fi
    # forcekill $1
    paths=('/Applications' $HOME) # where most installed applications lives
    echo "Scanning directories for $1 ..."
    saved_state=` for location in $paths ;do sudo find ${location} -iname "*$1*";done `

    if [ ${#saved_state} -gt 0 ];then
        echo "found `echo $saved_state | wc -l` dirs"
        for line in $saved_state;do echo $line 2>/dev/null| sed -l 's/ /\\ /g' |xargs rm -rf; echo "Deleting... \n$line" ;done
        echo "$1 has been removed."
    else
        echo "$1 program not found on your hard drive"
    fi

} 
```

如果您不熟悉 Mac 上的终端程序，只需打开终端应用程序并粘贴卸载功能，然后通过以下方式使用它：

```
uninstall 'App name' 
```

或者将其放入 .bashrc 或 .profile 并使其可重用。分配正确的应用名称，否则将发生强制删除并且您无法恢复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-15T17:11:31.413

从 MacOS（Macbook M1 或任何版本）中删除应用程序的最佳方法是下载 AppCleaner 应用程序

[https://freemacsoft.net/appcleaner/](https://freemacsoft.net/appcleaner/)

并拖放 [![在此处输入图像描述](../Images/cf674d97ba2cd44140ed54c3c95e5a47.png)](https://i.stack.imgur.com/sSZOC.jpg)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T17:12:59.917

从 MacOS（Macbook M1 或任何版本）中删除应用程序的最佳方法是下载 AppCleaner 应用程序

[https://freemacsoft.net/appcleaner/](https://freemacsoft.net/appcleaner/)

并拖放要从应用程序中删除的应用程序。

[![在此处输入图像描述](../Images/cf674d97ba2cd44140ed54c3c95e5a47.png)](https://i.stack.imgur.com/sSZOC.jpg)

只需单击删除并清空垃圾箱即可完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-02T09:08:41.587

这对我有用：

1.  将应用程序从“应用程序”文件夹拖到“Bin”中。
2.  进入 Bin，右键单击应用程序并选择“立即删除...”选项。

# c - 使用 CryptUnprotectData 解密 WEP wlan 配置文件密钥

> ID：10765860
> 
> 赞同：7
> 
> 时间：2012-05-26T11:36:48.310
> 
> 标签：c, windows-vista, encryption, wlanapi, wep

我正在尝试使用[CryptUnprotectData](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380882%28v=vs.85%29.aspx)解密 WEP 配置文件的密钥。我获取配置文件密钥的方法是使用 netsh 导出配置文件。

```
netsh wlan export profile name="MyWEP" folder="./" 
```

现在，我手动将 netsh 命令生成的 .xml 文件中的密钥材料复制到我的程序中。我正在解密的方式是-

```
DATA_BLOB DataOut, DataVerify;
DataOut.cbData = encryptData.length();
DataOut.pbData = (BYTE*)("I_Manually_Copy_The_WEP_Key_Here");

if (CryptUnprotectData( &DataOut,
                        NULL,
                        NULL,
                        NULL,
                        NULL,
                        0,
                        &DataVerify))
{
    printf("The decrypted data is: %s\n", DataVerify.pbData);
}
else
{
    printf("Failed. Error Code: %d", GetLastError());
} 
```

但我收到错误代码**13**引用无效数据。我究竟做错了什么 ？在 Win 7 及更高版本上，我可以直接使用[WlanGetProfile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706738%28v=vs.85%29.aspx)和参数**WLAN_PROFILE_GET_PLAINTEXT_KEY**。但是我在**Vista**上除了使用 CryptUnprotectData 函数之外别无选择**。**我在这里看到过类似的帖子[，](http://social.msdn.microsoft.com/Forums/en-US/vbgeneral/thread/7815b530-65e7-4404-888a-02d929439094/)[但](http://social.msdn.microsoft.com/Forums/en/vistawirelesssdk/thread/ad10453a-68a8-4f69-bcc8-76aeae9085f7)没有得到太多有用的信息。此外，我正在使用具有相同用户登录凭据的同一系统。有人可以建议我如何进行吗？

 **PS：我已经在 Windows Desktop SDK 论坛上发布了同样的问题，但还没有得到回复。试试我的运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T18:58:47.997

我喜欢有关 Windows 安全的问题。因此，如果我偶尔看到这样的问题，我会尝试解决它。

在您的情况下，您已经完成了第一步，即使用`netsh.exe wlan export profile ...`XML 文件从 WLAN 配置文件中导出数据。该文件包含`<keyMaterial>`元素。元素内部的数据是编码为十六进制的二进制数据：（类似于`01000000D08C9DDF0115D1118C7A00C0...`）。

所以你首先需要做的就是将字符串解码为二进制数据。您可以使用带参数的[CryptStringToBinary](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380285%28v=vs.85%29.aspx)`CRYPT_STRING_HEX`将字符串解码为二进制。

下一步将填充`DATA_BLOB`二进制数据并调用`CryptUnprotectData`以获取结果，但是...有小问题。如何在[WlanGetProfile](http://msdn.microsoft.com/en-us/library/windows/desktop/ms706738%28v=vs.85%29.aspx)的文档中阅读以下内容

> 默认情况下，pstrProfileXml 指向的配置文件中返回的*keyMaterial*元素**是**加密的。如果您的进程在同一台计算机上的**LocalSystem**帐户的上下文中运行，那么您可以通过调用**CryptUnprotectData**函数来解密密钥材料。
> 
>  *******Windows Server 2008 和 Windows Vista**：在pstrProfileXml指向的配置文件架构中返回的**keyMaterial元素***始终*是加密的。如果您的进程在 **LocalSystem**帐户的上下文中运行，那么您可以通过调用**CryptUnprotectData**函数来解密密钥材料。*****

 *****因此，为了能够解密密钥，我们必须在**LocalSystem**安全上下文中调用[CryptUnprotectData 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380882%28v=vs.85%29.aspx)如果您的程序已经在**LocalSystem**上下文下运行，您可以直接执行此操作。如果不是这样，但您具有管理权限或至少具有调试权限，您可以从计算机上运行的其他进程“借用” **LocalSystem令牌。**例如，可以获取“winlogon.exe”进程的进程令牌并模拟它。

 ******以下演示程序使用我个人更喜欢的[NtQuerySystemInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724509%28v=vs.85%29.aspx)方法（请参阅我的[旧答案）枚举进程。](https://stackoverflow.com/a/4110741/315935)可以使用[EnumProcesses](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682629%28v=vs.85%29.aspx)或其他众所周知的方法来做同样的事情。这是对我有用的代码

```
#include <Windows.h>
#include <tchar.h>
#include <stdio.h>
#pragma comment (lib, "Crypt32.lib")

#define STATUS_SUCCESS               ((NTSTATUS)0x00000000L)
#define STATUS_INFO_LENGTH_MISMATCH  ((NTSTATUS)0xC0000004L)

typedef enum _SYSTEM_INFORMATION_CLASS {
    SystemProcessInformation = 5
} SYSTEM_INFORMATION_CLASS;

typedef struct _UNICODE_STRING {
    USHORT Length;
    USHORT MaximumLength;
    PWSTR  Buffer;
} UNICODE_STRING;

typedef LONG KPRIORITY; // Thread priority

typedef struct _SYSTEM_PROCESS_INFORMATION_DETAILD {
    ULONG NextEntryOffset;
    ULONG NumberOfThreads;
    LARGE_INTEGER SpareLi1;
    LARGE_INTEGER SpareLi2;
    LARGE_INTEGER SpareLi3;
    LARGE_INTEGER CreateTime;
    LARGE_INTEGER UserTime;
    LARGE_INTEGER KernelTime;
    UNICODE_STRING ImageName;
    KPRIORITY BasePriority;
    HANDLE UniqueProcessId;
    ULONG InheritedFromUniqueProcessId;
    ULONG HandleCount;
    BYTE Reserved4[4];
    PVOID Reserved5[11];
    SIZE_T PeakPagefileUsage;
    SIZE_T PrivatePageCount;
    LARGE_INTEGER Reserved6[6];
} SYSTEM_PROCESS_INFORMATION_DETAILD, *PSYSTEM_PROCESS_INFORMATION_DETAILD;

typedef NTSTATUS (WINAPI *PFN_NT_QUERY_SYSTEM_INFORMATION)(
  IN       SYSTEM_INFORMATION_CLASS SystemInformationClass,
  IN OUT   PVOID SystemInformation,
  IN       ULONG SystemInformationLength,
  OUT OPTIONAL  PULONG ReturnLength
);

//
// The function changes a privilege named pszPrivilege for
// the current process. If bEnablePrivilege is FALSE, the privilege
// will be disabled, otherwise it will be enabled.
//
BOOL SetCurrentPrivilege (LPCTSTR pszPrivilege,   // Privilege to enable/disable
                          BOOL bEnablePrivilege)  // to enable or disable privilege
{
    HANDLE hToken;
    TOKEN_PRIVILEGES tp;
    LUID luid;
    TOKEN_PRIVILEGES tpPrevious;
    DWORD cbPrevious = sizeof(TOKEN_PRIVILEGES);
    BOOL bSuccess = FALSE;

    if (!LookupPrivilegeValue(NULL, pszPrivilege, &luid)) return FALSE;

    if (!OpenProcessToken (GetCurrentProcess(),
                           TOKEN_QUERY | TOKEN_ADJUST_PRIVILEGES,
                           &hToken
                          )) return FALSE;

    //
    // first pass.  get current privilege setting
    //
    tp.PrivilegeCount           = 1;
    tp.Privileges[0].Luid       = luid;
    tp.Privileges[0].Attributes = 0;

    AdjustTokenPrivileges(
            hToken,
            FALSE,
            &tp,
            sizeof(TOKEN_PRIVILEGES),
            &tpPrevious,
            &cbPrevious);

    if (GetLastError() == ERROR_SUCCESS) {
        //
        // second pass.  set privilege based on previous setting
        //
        tpPrevious.PrivilegeCount     = 1;
        tpPrevious.Privileges[0].Luid = luid;

        if(bEnablePrivilege)
            tpPrevious.Privileges[0].Attributes |= (SE_PRIVILEGE_ENABLED);
        else
            tpPrevious.Privileges[0].Attributes ^= (SE_PRIVILEGE_ENABLED &
                tpPrevious.Privileges[0].Attributes);

        AdjustTokenPrivileges(
                hToken,
                FALSE,
                &tpPrevious,
                cbPrevious,
                NULL,
                NULL);

        if (GetLastError() == ERROR_SUCCESS) bSuccess=TRUE;

        CloseHandle(hToken);
    }
    else {
        DWORD dwErrorCode = GetLastError();

        CloseHandle(hToken);
        SetLastError(dwErrorCode);
    }

    return bSuccess;
}

DWORD GetProcessIdByProcessName (LPCWSTR pszProcessName)
{
    SIZE_T bufferSize = 1024*sizeof(SYSTEM_PROCESS_INFORMATION_DETAILD);
    PSYSTEM_PROCESS_INFORMATION_DETAILD pspid = NULL;
    HANDLE hHeap = GetProcessHeap();
    PBYTE pBuffer = NULL;
    ULONG ReturnLength;
    PFN_NT_QUERY_SYSTEM_INFORMATION pfnNtQuerySystemInformation = (PFN_NT_QUERY_SYSTEM_INFORMATION)
        GetProcAddress (GetModuleHandle(TEXT("ntdll.dll")), "NtQuerySystemInformation");
    NTSTATUS status;
    int uLen = lstrlenW(pszProcessName)*sizeof(WCHAR);

    __try {
        pBuffer = (PBYTE) HeapAlloc (hHeap, 0, bufferSize);
#pragma warning(disable: 4127)
        while (TRUE) {
#pragma warning(default: 4127)
            status = pfnNtQuerySystemInformation (SystemProcessInformation, (PVOID)pBuffer,
                                                  bufferSize, &ReturnLength);
            if (status == STATUS_SUCCESS)
                break;
            else if (status != STATUS_INFO_LENGTH_MISMATCH) { // 0xC0000004L
                _tprintf (TEXT("ERROR 0x%X\n"), status);
                return 1;   // error
            }

            bufferSize *= 2;
            pBuffer = (PBYTE) HeapReAlloc (hHeap, 0, (PVOID)pBuffer, bufferSize);
        }

        for (pspid = (PSYSTEM_PROCESS_INFORMATION_DETAILD)pBuffer; ;
             pspid = (PSYSTEM_PROCESS_INFORMATION_DETAILD)(pspid->NextEntryOffset + (PBYTE)pspid)) {

            if (pspid->ImageName.Length == uLen && lstrcmpiW(pspid->ImageName.Buffer, pszProcessName) == 0)
                return (DWORD)pspid->UniqueProcessId;

            if (pspid->NextEntryOffset == 0) break;
        }
    }
    __finally {
        pBuffer = (PBYTE) HeapFree (hHeap, 0, pBuffer);
    }
    return 0;
}

int _tmain()
{
    BOOL bIsSuccess, bImpersonated = FALSE;
    HANDLE hProcess = NULL, hProcessToken = NULL;
    DATA_BLOB DataOut, DataVerify;
    // !!! in the next line you should copy the string from <keyMaterial>
    WCHAR szKey[] = L"01000000D08C9DDF0115D1118C7....";
    BYTE byKey[1024];
    DWORD cbBinary, dwFlags, dwSkip;
    DWORD dwProcessId = GetProcessIdByProcessName(L"winlogon.exe");
    if (dwProcessId == 0) return 1;

    bIsSuccess = SetCurrentPrivilege(SE_DEBUG_NAME, TRUE);
    if (!bIsSuccess) return GetLastError();

    __try {
        hProcess = OpenProcess(MAXIMUM_ALLOWED, FALSE, dwProcessId);
        if (!hProcess) __leave;
        bIsSuccess = OpenProcessToken (hProcess, MAXIMUM_ALLOWED, &hProcessToken);
        if (!bIsSuccess) __leave;
        bIsSuccess = ImpersonateLoggedOnUser(hProcessToken);
        if (!bIsSuccess) __leave;
        bImpersonated = TRUE;

        cbBinary = sizeof(byKey);
        bIsSuccess = CryptStringToBinary (szKey, lstrlenW(szKey), CRYPT_STRING_HEX, // CRYPT_STRING_HEX_ANY
            byKey, &cbBinary, &dwSkip, &dwFlags);
        if (!bIsSuccess) __leave;
        DataOut.cbData = cbBinary;
        DataOut.pbData = (BYTE*)byKey;

        if (CryptUnprotectData (&DataOut, NULL, NULL, NULL, NULL, 0, &DataVerify)) {
            _tprintf(TEXT("The decrypted data is: %hs\n"), DataVerify.pbData);
        }
    }
    __finally {
        if (bImpersonated)
            RevertToSelf();
        if (hProcess)
            CloseHandle(hProcess);
        if (hProcessToken)
            CloseHandle(hProcessToken);
    }

    return 0;
} 
```*************

# android - 从 Android 中的脚本创建数据库

> ID：10765861
> 
> 赞同：0
> 
> 时间：2012-05-26T11:37:24.340
> 
> 标签：android, database, sqlite

有没有一种简单而优雅的方法可以从 Android 中的脚本创建数据库？我想在第一次运行脚本时创建我的数据库（也许我必须解析文件），这是一种非 android 方法导致我在这个主题上找不到很多东西吗？

我的脚本只创建表（没有 INSERT 语句）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:41:38.730

您可以尝试在您的应用程序中发送整个数据库。

[你自己的 sqlite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

您还可以在资产中捆绑 .sql 文件，然后执行这些脚本。[安卓 API](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)

# php - 货币符号未在 SMS 中发送

> ID：10765862
> 
> 赞同：1
> 
> 时间：2012-05-26T11:37:28.520
> 
> 标签：php

**背景：**

我正在开发一个在注册付款后向用户发送短信的应用程序。SMS 文本可以正常发送到手机，但货币符号未正确显示。

我正在测试这样的内容

```
$smsContent =   "This is a euro test mesage 1) &euro; 2)  &#8364; 3)  €"; 
```

但没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:49:42.823

您必须使用 GSM7 字符集正确编码内容。您可以搜索一些已经存在的库，修补 PHP 以使 iconv() 使用它，甚至尝试将 PHP 修补程序代码转换为 PHP：http: [//mobiletidings.com/2009/07/06/gsm-7-encoding -gnu-libiconv/](http://mobiletidings.com/2009/07/06/gsm-7-encoding-gnu-libiconv/)

# java - 用Java查找数字中最左边的数字

> ID：10765864
> 
> 赞同：0
> 
> 时间：2012-05-26T11:37:35.760
> 
> 标签：java, random, digit

我必须在随机生成的数字中找到最左边的数字（例如：46891 -> 4）。无论数字是多少，我都会不断变为零。这是我尝试的代码之一：

```
int num1 = (int)((Math.random()*100000)+1);

while((Math.floor(num1/10))>0)
    {
        num1 = (int)Math.floor(num1/10);
    }

    System.out.println("Left digit: " + num1); 
```

我尝试使用`Integer.parseInt`，但显然出现了这个错误： Integer 类型中的方法 parseInt(String) 不适用于参数 (int)。

我做错了什么，我怎样才能让它发挥作用？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T11:52:18.807

这个怎么样 ：

```
final Random r=new Random();
final int t=r.nextInt(100000)+1;
// naive way:
final String s=Integer.toString(t);
System.out.println("left digit is:"+s.charAt(0));
// "math" way:
int temp=t;
while(temp>=10)
  temp/=10;
System.out.println("left digit is:"+temp); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-26T11:46:28.303

整数除法去掉了小数部分，所以你只需要一个简单的循环：

```
int num = (int)((Math.random()*100000)+1);
for ( ; num >= 10 ; num /= 10);
System.out.println(num); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T11:39:53.277

您快到了！问题是，`num1`将是一个数字，而不是一个字符，尽管它们基本上是一回事。使用`.toString()`或使用`System.out.format`格式`%i`字符串将其转换为字符串。

编辑：没关系，我错了。您正在执行循环 while`num1`大于 0，问题是该循环在`num1`0 时退出。在这种情况下，您需要先中断一个，所以我只需将测试更改为`>=10`. 在这种情况下，您确保您有一个数字，考虑到问题的性质，它必须大于 0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-26T11:43:15.107

无需`Math.floor`用作整数除法自动舍入。

并且您想`num1 > 9`在循环中检查，仅在数字至少为 10 时进行除法。

**编辑**：我测试了你的代码，它也适用于我，无需修改......

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-26T11:51:46.263

我正在使用基于您的代码

```
int num1 = (int)((Math.random()*100000)+1);
System.out.println("Randomed number: " + num1);
while((num1/10)>0)
        num1 = num1/10;
System.out.println("Left digit: " + num1); 
```

它对我来说很好用

# java - 覆盖与数据字段 - 哪个是更好的选择？

> ID：10765866
> 
> 赞同：0
> 
> 时间：2012-05-26T11:38:17.857
> 
> 标签：java, oop

例如，一个自定义组件需要知道要绘制什么字符串作为其标题。

**覆盖**

```
CustomComponent c = new CustomComponent(){
    @Override
    public String getTitle(){
        return "A given title";
    }
}; 
```

**字段**

```
CustomComponent c = new CustomComponent()
c.setTitle("A given title"); 
```

使用第一种方法，我不需要在CustomComponent中创建一个String字段，但是代码更简洁。是否有强烈首选/建议的方式，如果有，为什么？

请注意，这只是一个简单的示例。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:42:20.667

如果所有 CustomComponents 都有一个简单的字符串标题，那么数据字段就是要走的路。

一旦事情变得有点复杂（例如标题需要子类特定信息[比如它“拥有”多少孩子]），就转移到一个方法。

# client-side - 来自免费主机（三脚架）的 301 重定向

> ID：10765867
> 
> 赞同：0
> 
> 时间：2012-05-26T11:38:22.047
> 
> 标签：client-side, http-status-code-301

我正在更新一个非常古老的网站 - c.1999 - 托管在 Tripod 上。我不知道如何在那里对 PDF 和 Word 文档进行 301 重定向（或 302）。

据我所知，我不能对 PDF 和 DOC 使用 rel=canonical 或元刷新。三脚架有 mod_asis 但如果我无法更改 mime 类型，这似乎没用。

有哪些用于重定向 PDF 和 DOC 的客户端选项？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:08:28.543

DOC 和 PDF 文件可以分别转换为 DOCX 和 SVG，如果它们嵌入到 XHTML 或 HTML5 文档中，这将使重定向工作。以下是一些可能有所帮助的工具：

*   [WordDown](http://code.google.com/p/jischtml5/wiki/WordDown)
*   [PDF2SVG](https://stackoverflow.com/questions/4120567/convert-pdf-to-svg)

# android - 将html标签应用于android中的textview

> ID：10765870
> 
> 赞同：0
> 
> 时间：2012-05-26T11:39:05.363
> 
> 标签：android, html

我正在显示来自 sqlite db 的数据。数据库中的数据以html形式存储。数据包含用于显示图像的图像标签。我可以显示数据，但我怎样才能显示图像呢？我的图像存储在服务器中。

我的代码：

```
((TextView)view.findViewById(R.id.tv_text)).setText(Html.fromHtml(listItem.gettext()+"")); 
```

从上面的行中，我正在显示来自数据库的数据。现在，我需要显示服务器中的图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-08T18:08:02.147

试试我的代码。希望能帮助到你

```
TextView mDetail;
ProgressBar mProgressBar;
String body;
Handler handler;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.act_recipe_detail);
    getActionBar().setDisplayHomeAsUpEnabled(true);

    if (this.getIntent().getStringExtra("body") != null)
        body = this.getIntent().getStringExtra("body");

    mDetail = (TextView) this.findViewById(R.id.tv_recipe_detail);

    if (this.getIntent().getStringExtra("body") != null)
        body = this.getIntent().getStringExtra("body");

    mDetail.setText(Html.fromHtml(body));

    mProgressBar = (ProgressBar) this.findViewById(R.id.bar);
    mDetail.setMovementMethod(ScrollingMovementMethod.getInstance());// 皛
    handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            if (msg.what == 0x101) {
                mProgressBar.setVisibility(View.GONE);
                mDetail.setText((CharSequence) msg.obj);
            }
            super.handleMessage(msg);
        }
    };
    Thread t = new Thread(new ImageTask());
    t.start();
    mProgressBar.setVisibility(View.VISIBLE);

}
class ImageTask implements Runnable {
    Message msg = Message.obtain();

    @Override
    public void run() {

        ImageGetter imageGetter = new ImageGetter() {
            @Override
            public Drawable getDrawable(String source) {
                // TODO Auto-generated method stub
                URL url;
                Drawable drawable = null;
                try {
                    url = new URL(source);
                    drawable = Drawable.createFromStream(
                            url.openStream(), null);

                    int scale_y = MAX_HEIGHT/drawable.getIntrinsicHeight();
                    drawable.setBounds(0, 0,
                            drawable.getIntrinsicWidth()*scale_y,
                            drawable.getIntrinsicHeight()*scale_y);

                } catch (MalformedURLException e) {
                    Log.e(TAG, "MalformedURLException" + e.toString());
                } catch (IOException e) {
                    Log.e(TAG, "IOException" + e.toString());
                }
                return drawable;
            }
        };
        CharSequence test = Html.fromHtml(body, imageGetter, null);
        msg.what = 0x101;
        msg.obj = test;
        handler.sendMessage(msg);
    }
} 
```

# javascript - 延迟加载 Javascript 以加快我的 Joomla

> ID：10765871
> 
> 赞同：0
> 
> 时间：2012-05-26T11:39:09.743
> 
> 标签：javascript, jquery, delay

我正在使用 joomla 网站，并强制使用额外的 java 脚本。

我的问题是：

1.  如何仅在页面完成后强制加载 javascript
2.  我的意思不是延迟它们，而是让它们在队列中直到页面完成加载。

我尝试了许多链接教程，但没有任何帮助。

请，

您能否提供正确的示例以使我理解。

我插入到页面底部的 JS 文件示例：

```
<script src="/js/easing.js" type="text/javascript"></script> 
```

你能提供 Jquery 代码来强制所有这些脚本等到页面加载完成吗？

谢谢

塔里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:03:59.240

Ales Kotnik 的回答很好，如果你想在自己的特定时间做，你可以这样做：

```
function loadScript(url, callback){

var script = document.createElement("script")
script.type = "text/javascript";

if (script.readyState){  //IE
    script.onreadystatechange = function(){
        if (script.readyState == "loaded" ||
                script.readyState == "complete"){
            script.onreadystatechange = null;
            callback();
        }
    };
} else {  //Others
    script.onload = function(){
        callback();
    };
}

script.src = url;
document.getElementsByTagName("head")[0].appendChild(script);
} 
```

这只会在你调用它时加载一个脚本，然后你像这样激活它：

```
<script type="text/javascript" src="http://your.cdn.com/first.js"></script>
<script type="text/javascript">
loadScript("http://your.cdn.com/second.js", function(){
    //initialization code
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T11:42:10.250

使用`<script src="..." async="async"/>`. 在现代浏览器 (HTML5) 中，它会分别生成获取 javascript 文件，并且不会延迟 HTML 的加载。您可以将脚本标签放在`<body>`.

# visual-studio-2010 - VS2010 没有将文件嵌入到程序集中

> ID：10765872
> 
> 赞同：1
> 
> 时间：2012-05-26T11:39:18.220
> 
> 标签：visual-studio-2010, embedded-resource

出于某种原因，在 VS2010 中，我无法将任何文件嵌入到程序集中。这些文件的***Build Action***属性设置为应有的***Embedded Resource ，但是在执行程序集时它没有找到任何资源。***例如下面的测试代码：

```
string[] list = System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceNames();
string msg = (list.Length > 0) ? "Full" : "Empty";
MessageBox.Show(msg); 
```

总是显示“ *Empty* ”，因为*GetManifestResourceNames()*总是返回一个空列表。

此问题会影响使用 nettiers 的项目，在这种情况下，不方便将存储过程包含到数据库中，因此必须从*Procedures.xml 文件中获取它们，顺便说一句，该文件在****Build Action*** *= **Embedded Resource***之后自动设置类生成，当然，当一个函数试图从中获取任何 SQL 脚本时，程序就会失败。

我还创建了几个测试项目，尝试嵌入 xml 和 gif，但始终没有成功。

**更新**：问题似乎只针对***C#***。*我在VB.Net*中复制了测试项目，并且文件确实被嵌入了。我注意到在输出窗口中，在 C# 的情况下，编译器命令行不包含**/resource**选项（应该在后面跟着要嵌入的文件的名称），而对于 VB 的情况，它确实出现了.

我应该检查*C#*的任何全局设置或配置文件吗？（该项目的构建选项在那里没有什么奇怪的）

有谁知道可能发生的事情以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:56:22.227

最后，我找到了原因：

*Microsoft.CSharp.targets*文件中存在错误行（位于 c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319 内）。有一个标签写成：

> <EmbeddedResource **F** Include="@(_Temporary)" />

代替

> <EmbeddedResource Include="@(_Temporary)" />

正确编写恢复了嵌入文件的能力

F 是如何出现的以及为什么该文件首先被更改，我不知道......尽管我已经做了几年的 .NET 程序员，但我今天在网上搜索了这个问题后才意识到“.targets”文件，因为从来不需要查看 MSBuild 的东西。

# html - 构建一个简单的 HTML5/canvas 2D 游戏。推荐使用游戏引擎？

> ID：10765873
> 
> 赞同：19
> 
> 时间：2012-05-26T11:39:26.530
> 
> 标签：html, 2d, game-engine

我想通过构建一个简单的 2d 游戏开始使用画布学习 HTML5。我想构建一个看起来像这样的一个：[http ://www.youtube.com/watch?v=h4SgiVCPfPk](http://www.youtube.com/watch?v=h4SgiVCPfPk)

您是否推荐我可以用来执行此操作的任何框架或游戏引擎？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-26T18:44:05.313

我建议将[EaselJs](http://www.createjs.com/#!/EaselJS)用于使用画布的 2D 游戏。你会在网站上找到一些很棒的例子，以及一个相当不错的文档化 api 来帮助你前进。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-03T14:20:58.583

我将以[MelonJS](http://www.melonjs.org/)的形式为您提供一个替代方案，它有一些优秀的文档并且非常容易启动和运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T09:40:32.617

我会推荐 CAAT → [http://labs.hyperandroid.com/static/caat/](http://labs.hyperandroid.com/static/caat/)

这里有一个技术演示（画布）： http: [//labs.hyperandroid.com/static/caat/sumon/canvas/Sumon.html](http://labs.hyperandroid.com/static/caat/sumon/canvas/Sumon.html)

它易于使用且功能强大，具有良好的文档和大量的官方教程。如果您有兴趣在移动设备上发布您的游戏，它是 Ludei.com 团队第一个支持的引擎 - [http://ludei.com/tech/cocoonjs](http://ludei.com/tech/cocoonjs)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-24T12:01:08.780

熟悉 Backbone 的开发者可以试试[Backbone Game Engine](http://martindrapeau.github.io/backbone-game-engine/)。专为在 Web 和 CocoonJS 中工作而构建。超级马里奥兄弟 1-1 级是作为演示编写的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-07T20:25:17.540

你可以试试[chem](https://github.com/superjoe30/chem/)。

它针对快速开发进行了优化，因此非常适合小游戏原型创意。

# java - JList：按顶部/底部按钮排序

> ID：10765880
> 
> 赞同：1
> 
> 时间：2012-05-26T11:40:32.560
> 
> 标签：java, swing, sorting, netbeans, jlist

我有一个与我之前的问题有关的问题：[JList：按向上/向下按钮排序](https://stackoverflow.com/questions/10752463/jlist-sorting-by-up-down-buttons) 我的向上/向下按钮现在可以正常工作，但还有另一件事：我还需要制作顶部/底部按钮。他们似乎更难。我使用 actionPerformed 按钮“顶部”：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
 int indexOfSelected = jList1.getSelectedIndex();
 swapElements2(indexOfSelected, 0);
 indexOfSelected = 0;
 jList1.setSelectedIndex(indexOfSelected );
 jList1.updateUI();
} 
```

swapElements2 方法如下所示：

```
private void swapElements2(int pos1, int pos2) {
  String tmp1 =  (String) listModel.get(pos1);
  String tmp2 =  (String) listModel.get(pos2);
  listModel = (DefaultListModel) jList1.getModel();
  int sizeOfList = listModel.getSize();

  listModel.set(pos2, listModel.get(sizeOfList-1));
  for (int i=sizeOfList-2;i>0;i--){
    listModel.set(i+1, listModel.get(i));
  }

  listModel.set(pos2, tmp1);
  listModel.set(pos2+1, tmp2);
} 
```

当然，它只有在选择 jList 的最后一个元素时才有效。有谁知道如何制作一个通用方法将元素从选定位置移动到 0 位置？方法还应该向前移动所有其他元素，如果最后一个元素没有被选中，它应该留在它的位置。

我会很感激任何帮助。

从评论编辑，这也不起作用：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
 String temp = (String) listModel.remove(jList1.getSelectedIndex());
 listModel.add(0, temp);
} 
```

错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
name podziwiaj.jpg
at java.io.File.<init>(File.java:222) 
```

这是：

```
public File(String pathname) {
if (pathname == null) {
    throw new NullPointerException();
}
this.path = fs.normalize(pathname);
this.prefixLength = fs.prefixLength(this.path);
} 
```

列表存储文件（图像）的路径名，并在选择项目时显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T11:46:01.493

我自己的偏好是使用列表的模型来做到这一点。就像是：

```
DefaultListModel model = (DefaultListModel)jList1.getModel();
File temp = model.remove(jList1.getSelectedIndex());
model.add(0, temp); 
```

要查看列表模型可用的方法，请查看[DefaultListModel API](http://docs.oracle.com/javase/7/docs/api/javax/swing/DefaultListModel.html)。

编辑：代码工作正常。

**编辑 2**：我的[sscce](http://sscce.org)

```
import java.awt.event.ActionEvent;
import javax.swing.*;

public class TestList {

   private static void createAndShowGui() {
      String[] data = {"Mon", "Tues", "Wed", "Thurs", "Fri", "Sat", "Sun"};
      final DefaultListModel<String> model = new DefaultListModel<String>();
      for (String datum : data) {
         model.addElement(datum);
      }
      final JList<String> myList = new JList<String>(model);      
      JButton toTop = new JButton(new AbstractAction("To Top") {

         @Override
         public void actionPerformed(ActionEvent arg0) {
            int selectedIndex = myList.getSelectedIndex();
            if (selectedIndex < 0) {
               return;
            }
            String temp = model.remove(selectedIndex);
            model.add(0, temp);
         }
      });

      JPanel mainPanel = new JPanel();
      mainPanel.add(new JScrollPane(myList));
      mainPanel.add(toTop);

      JFrame frame = new JFrame("TestList");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

如果您在查看此内容后仍然遇到问题，请考虑阅读有关[SSCCE](http://sscce.org)的内容，并在此处发布您自己的内容，我们可以对其进行修改和更正。

**编辑 3**
根据我们在聊天中的讨论，
您的问题是当您调用 To Top JButton 时，您正在从列表中删除所选项目，*而 ListSelectionListener 仍在侦听*，这将导致抛出 NPE。一种可能的解决方案是在删除或添加任何项目之前删除 ListSelectionListener，然后在执行这些操作后重新添加侦听器。当您更新列表模型时，这可能是必要的。请在下面查看我的[SSCCE](http://sscce.org)。还可以了解阅读和理解 SSCCE 代码如何比您的大代码更容易。

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Image;
import java.awt.event.*;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.event.*;

@SuppressWarnings("serial")
public class MyToolView extends JPanel {

   public File[] file;
   public static int i = 0;

   final static JFileChooser fc = new JFileChooser();
   private static final int PREF_W = 900;
   private static final int PREF_H = 750;
   final DefaultListModel listModel = new DefaultListModel();
   final JList myList = new JList(listModel);
   private JLabel imageLabel = new JLabel();
   private javax.swing.JButton openButton;
   private JButton toTopBtn;
   private javax.swing.JList imageJList;
   private javax.swing.JScrollPane jScrollPane1;
   private javax.swing.JPanel mainPanel;

   public MyToolView() {
      initComponents();
   }

   private void initComponents() {
      jScrollPane1 = new javax.swing.JScrollPane();
      imageJList = new javax.swing.JList(listModel);
      openButton = new javax.swing.JButton();
      toTopBtn = new JButton("To Top");

      JPanel topPanel = new JPanel();
      topPanel.add(jScrollPane1);
      topPanel.add(openButton);
      topPanel.add(toTopBtn);

      setLayout(new BorderLayout());
      add(topPanel, BorderLayout.PAGE_START);
      add(new JScrollPane(imageLabel), BorderLayout.CENTER);

      toTopBtn.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            toTopBtnActionPerformed(e);
         }
      });

      jScrollPane1.setFocusable(false);
      jScrollPane1.setName("jScrollPane1"); // NOI18N

      imageJList.setModel(new javax.swing.AbstractListModel() {
         String[] strings = { "AAAA.JPG", "BBBB.JPG" };

         public int getSize() {
            return strings.length;
         }

         public Object getElementAt(int i) {
            return strings[i];
         }
      });
      imageJList.setName("jList1"); // NOI18N
      imageJList.setCellRenderer(new JavaRenderer());
      jScrollPane1.setViewportView(imageJList);
      imageJList.addListSelectionListener(listSelectionListener);

      openButton.setFocusable(false);
      openButton.setName("openButton"); // NOI18N
      openButton.setAction(new OpenAction("Open"));

   }

   @Override
   public Dimension getPreferredSize() {
      return new Dimension(PREF_W, PREF_H);
   }

   private void toTopBtnActionPerformed(java.awt.event.ActionEvent evt) {

      // ******** here **********
      imageJList.removeListSelectionListener(listSelectionListener);
      int selectedIndex = imageJList.getSelectedIndex();
      if (selectedIndex < 0) {
         return;
      }
      String temp = (String) listModel.remove(selectedIndex);
      listModel.add(0, temp);

      // ******** here **********
      imageJList.addListSelectionListener(listSelectionListener);
   }

   ListSelectionListener listSelectionListener = new ListSelectionListener() {
      public void valueChanged(ListSelectionEvent listSelectionEvent) {
         System.out.print("First index: " + listSelectionEvent.getFirstIndex());
         System.out.print(", Last index: " + listSelectionEvent.getLastIndex());

         String path = (String) imageJList.getSelectedValue();
         System.out.println("path should be here: " + path);
         Image img;
         try {
            System.out.println("path is null: " + (path == null));
            File imageFile = new File(path);
            img = ImageIO.read(imageFile);
            imageLabel.setIcon(new ImageIcon(img));
            imageLabel.setText("");
         } catch (IOException ex) {
            ex.printStackTrace();
         }
      }
   };

   private class OpenAction extends AbstractAction {
      public OpenAction(String text) {
         super(text);
      }

      public void actionPerformed(ActionEvent evt) {

         fc.setMultiSelectionEnabled(true);
         int returnVal = fc.showDialog(null, "Open");
         int len = 0;

         if (returnVal == JFileChooser.APPROVE_OPTION) {
            imageJList.removeListSelectionListener(listSelectionListener); //!!
            file = fc.getSelectedFiles();
            len = file.length;
            System.out.println("length = " + len);

            // this code should be inside the if block
            for (i = 0; i < len; i++) {
               String path = file[i].getPath();
               System.out.printf("%d: %s%n", i, path);
               listModel.add(i, path);
            }
            imageJList.setModel(listModel);
            imageJList.addListSelectionListener(listSelectionListener); //!!
         }
         // imageJList.updateUI(); //!! you shouldn't call this.
      }
   }

   private static void createAndShowGui() {
     MyToolView mainPanel = new MyToolView();

      JFrame frame = new JFrame("MyToolView");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
}

class JavaRenderer extends DefaultListCellRenderer {
   private int a;

   @Override
   public Component getListCellRendererComponent(JList jList1, Object value,
         int index, boolean isSelected, boolean hasFocus) {

      if (value instanceof String) {
         String name = (String) value;
         String[] splitedArray = null;
         splitedArray = name.split("\\\\");
         a = splitedArray.length - 1;
         name = splitedArray[a];
         System.out.println("name " + name);
         return super.getListCellRendererComponent(jList1, name, index,
               isSelected, hasFocus);// what we display
      } else {
         return super.getListCellRendererComponent(jList1, value, index,
               isSelected, hasFocus);// what we take
      }
   }
} 
```

# ruby - 在 ruby 中使用 URI.escape 时出错

> ID：10765882
> 
> 赞同：3
> 
> 时间：2012-05-26T11:41:23.007
> 
> 标签：ruby

我试图简单地用空格转义一个 URL，然后在 Ruby 中对该 URL 执行 GET 请求。

我的错误是

```
/Users/user/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:393:in `get_response': undefined method `host' for "http://google.com/?this%20is%20a%20stromg%20with%20spaces":String (NoMethodError)
from test_url.rb:6:in `<main>' 
```

这是当前代码

```
require 'rubygems'
require 'net/http'

uri = URI.escape("http://google.com/?this is a string with spaces")
res = Net::HTTP.get_response(uri)
puts res.body if res.is_a?(Net::HTTPSuccess) 

Net::HTTP.start(uri.host, uri.port) do |http|
  request = Net::HTTP::Get.new uri.request_uri

  response = http.request request # Net::HTTPResponse object
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T12:14:08.657

`URI.escape`只是逃避它，没有别的。您需要 a 的实际实例`URI`传递给`get_response`：

```
uri = URI.parse(URI.escape("http://google.com/?this is a string with spaces")) 
```

# php - 无法连接到 MySQL 数据库错误

> ID：10765883
> 
> 赞同：-3
> 
> 时间：2012-05-26T11:41:33.900
> 
> 标签：php, mysql, database, web

> **可能重复：**
> [从我的站点获取 MYSQL 错误](https://stackoverflow.com/questions/10765675/getting-mysql-error-from-my-site)

我主持了一个bux 网站CrimsonBux.Com。一切都与脚本一起工作得很好。[我对密码恢复页面http://crimsonbux.com/login.php?option=forgot](http://crimsonbux.com/login.php?option=forgot)只有一个问题。在页面上输入电子邮件地址和验证码后，用户将被重定向到此页面[http://crimsonbux.com/recover.php](http://crimsonbux.com/recover.php)。在recover.php 页面中，用户面临错误。下面列出了错误。

```
Warning: mysql_query() [function.mysql-query]: Access denied for user 'crimst1d'@'localhost' (using password: NO) in /home/crimst1d/public_html/recover.php on line 19

Warning: mysql_query() [function.mysql-query]: A link to the server could not be established in /home/crimst1d/public_html/recover.php on line 19 
```

在这里，我的站点无法连接到 MySQL 数据库。如何连接？

这是我对recover.php 页面的配置。

```
<?
/**********************************************************************************************************************************************
    ScriptBux Version 2.50 beta
    This Script has been created and coded by Gabrola and edited by hassan ahmady.
    If you find any bugs in the script report at support@thealternatif.info or contact hassan ahmady.
    Copywrite ScriptBux 2008;
    Please make donations if you use this sript for commercial use
    to My paypal account "bisnis-usd@plasa.com"
************************************************************************************************************************************************/

?>

<h3>Forgot Password</h3>
<?php
if($_POST)
{
  $code = $_POST["code"];
  $email = $_POST["email"];
  $emailx = mysql_query("SELECT COUNT(*) AS cnt FROM tb_users WHERE email='{$_POST['email']}'");
  $emailx = mysql_fetch_array($emailx);
  $emailx = $emailx["cnt"];
  $errormsg = false;
  if($_SESSION['string'] != $code)
  {
    $error = 1;
    $errormsg .= "<b>Error -</b> The captcha was entered incorrectly.<br />";
  }
  if(!$code)
  {
    $error = 1;
    $errormsg .= "<b>Error -</b> The captcha was entered incorrectly.<br />";
  }
  if(!$email)
  {
    $error = 1;
    $errormsg .= "<b>Error -</b> The email was not supplied.<br />";
  }
  if(!$emailx)
  {
    $error = 1;
    $errormsg .= "<b>Error -</b> No account was found with that email address.<br />";
  }
  if($_SESSION['next_reseptsend'] != 0)
  {
    $error = 1;
    $errormsg .= "<b>Error -</b> You have already made a password retrieval within the last 15 minutes.<br />";
  }
  $_SESSION['string'] = false;
  if($error)
  {
    print $errormsg."<br><br>";
  } else {
    $s = mysql_query("SELECT * FROM tb_users WHERE email='{$_POST['email']}'");
    $x = mysql_fetch_array($s);
    $_SESSION['next_reseptsend'] = 1;
    $message = "Hello {$x['username']},
    You requested to resend your account password a while ago.

    Account Username: {$x['username']}
    Account Password: {$x['password']}

    We hope you can have a good time earning your money again,

    Thanks,
    {$config['site_name']}";
    mail($x["email"],"Password Retrieval - ".$config["site_name"],$message,"From: mail@".$_SERVER['HTTP_HOST']);
    print "<b>Password Sent!</b><br />
    We have dispatched your password to your email address.<br />
    You can only make another account retrieval again in 15 minutes.<br />";
  }
}
?>

<div style="padding-left:25px;">
<form action="recover.php" method="post" name="resend">
<table>
<tr><td class="midtext">Your Email:</td><td><input type="text" name="email" size="25" class="form" autocomplete="off" value="<?=$_POST['email']?>"></td></tr>
<tr><td class="midtext" valign="top">Security Code:</td><td class="midtext"><img src="image.php" onclick="this.src='image.php?newtime=' + (new Date()).getTime();"><br /><span style="font-size:10px;">(Click to reload)</span><br /><input type="text" name="code" size="17" maxlength="" autocomplete="off" class="form"></td></tr>
<tr><td></td><td align="right"><input type="submit" value="Login" name="loginsubmit"  class="inputbox"></td></tr>
</table>
</form>
</div>

<?php

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:44:17.203

您需要将用户添加到数据库以及脚本可以通过[`mysql_connect`](http://php.net/manual/en/function.mysql-connect.php)和连接到的数据库[`mysql_select_db`](http://php.net/manual/en/function.mysql-select-db.php)。

放在脚本的顶部：

```
mysql_connect('localhost', 'username', 'password');
mysql_select_db('database name'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T11:57:48.340

以下是解决安全漏洞的方法。改变这个：

```
$emailx = mysql_query("SELECT COUNT(*) AS cnt FROM tb_users WHERE email='{$_POST['email']}'"); 
```

对此：

```
$emailUntainted = mysql_real_escape_string($_POST['email']);
$emailx = mysql_query("
    SELECT COUNT(*) AS cnt
    FROM tb_users
    WHERE email='{$emailUntainted}'
"); 
```

你有两个要修复；也做一些阅读，以*了解*为什么这是必要的`:)`。

发布脚本：正如@Esailija 所说，最好使用 PDO 和*准备好的语句*，但这需要您进行更多的学习。快速进行此修复，然后尽可能切换到 PDO。

# cmake - 如何安装您的自定义 CMake-Find 模块

> ID：10765885
> 
> 赞同：66
> 
> 时间：2012-05-26T11:41:42.543
> 
> 标签：cmake, cpack

我使用 CMake 和 CPack 配置和打包我的库。我已经编写了自己的 find-module: `FindMyLib.cmake`。

如何告诉 CMake/CPack 将此文件添加到 CMake 模块目录中，以便未来的开发人员可以简单地指定`FIND_PACKAGE(MyLib)`使用我的库？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-05-26T12:18:21.700

您可以设置`CMAKE_MODULE_PATH`和分发您的自定义`FindFoo.cmake`项目。例如：

```
set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake/Modules/") 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-05-26T12:58:52.477

CMake 模块目录是 CMake 本身安装树的一部分，因此您不应该尝试在其中添加任何内容。

CMake 模块目录包含由 Kitware 编写或至少审查过的模块，并且在其中添加您自己的模块会给您的项目用户留下这样的印象，即您的项目也是如此。

您最好将 FindMyLib.cmake 安装到以下搜索的位置之一`find_package`：

> ```
> <prefix>/                                               (Windows)
> <prefix>/(cmake|CMake)/                                 (Windows)
> <prefix>/<name>*/                                       (Windows)
> <prefix>/<name>*/(cmake|CMake)/                         (Windows)
> <prefix>/(lib/<arch>|lib|share)/cmake/<name>*/          (Unix)
> <prefix>/(lib/<arch>|lib|share)/<name>*/                (Unix)
> <prefix>/(lib/<arch>|lib|share)/<name>*/(cmake|CMake)/  (Unix)
> <prefix>/<name>.framework/Resources/                    (Apple)
> <prefix>/<name>.framework/Resources/CMake/              (Apple)
> <prefix>/<name>.framework/Versions/*/Resources/         (Apple)
> <prefix>/<name>.framework/Versions/*/Resources/CMake/   (Apple)
> <prefix>/<name>.app/Contents/Resources/                 (Apple)
> <prefix>/<name>.app/Contents/Resources/CMake/           (Apple) 
> ```

有关如何搜索的完整详细信息，请参阅[文档。`find_package`](https://cmake.org/cmake/help/v3.6/command/find_package.html)`find_package`在这种情况下，[CMake 打包教程](https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Packaging)也很有用。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-01-17T12:57:31.547

允许的最好方法

> 未来的开发人员可以简单地指定 FIND_PACKAGE(MyLib) 来使用我的库

是写一个包配置文件 (-config.cmake) ，而不是一个 Find 模块。然后应该将包配置文件安装在 FindPackage 模块查找的文件夹之一中（类似于 /lib/package/ 或 /lib/cmake/package 第二个是首选）

FindPackage 模块会自动加载配置文件，如果它可以在那里找到它。

[CMake wiki 在https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Packaging](https://gitlab.kitware.com/cmake/community/wikis/doc/tutorials/Packaging)有更详细的说明

# c++ - 为什么 shared-obj 中的 new&delete 运算符符号即使在该 shared-obj 中实现也要重新定位？

> ID：10765888
> 
> 赞同：0
> 
> 时间：2012-05-26T11:41:58.093
> 
> 标签：c++, linker, relocation

我试图在我的程序中实现我自己的 c++ new & delete 运算符，如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <new>

using namespace std;

void *operator new(std::size_t size) throw(std::bad_alloc)
{
    printf("My new is called!\n");
    return malloc(size);
}

void operator delete(void *ptr) throw ()
{
    printf("My delete is called!\n");
    free(ptr);
}

void *operator new(std::size_t size, const std::nothrow_t&) throw()
{
    return malloc(size);
}

void operator delete(void *ptr, const std::nothrow_t&) throw()
{
    free(ptr);
}

void *operator new[](std::size_t size) throw(std::bad_alloc)
{
    return malloc(size);
}

void operator delete[](void *ptr) throw () 
{
    free(ptr);
}

void *operator new[](std::size_t size,
                     const std::nothrow_t&) throw()
{
    return malloc(size);
}

void operator delete[](void *ptr,
                       const std::nothrow_t&) throw()
{
    free(ptr);
}

class Object
{
public:
    Object() {}
    ~Object() {}

private:
    int a;
};

int main()
{
    Object* obj = new Object();
    if (obj)
        delete obj;

    return 0;
} 
```

然后我发现，如果程序构建为： -- 一个 exe，那么我的 new/delete 会按预期调用 -- 但是，一个共享对象，那么 new & delete 的符号将被重新定位，所以在我的环境当它由 dlopen 在另一个程序中加载时，新的和删除的将被映射到另一个程序的新的和删除...

详细信息如下...

1.  构建一个exe：

    gcc -m32 -c main.cpp gcc -m32 main.o -o main.exe

    $ ./main.exe 我的新被调用！我的删除被称为！

    $ objdump -d main.exe 080484ac :
    80484ac: 55 push %ebp
    80484ad: 89 e5 mov %esp,%ebp
    80484af: 53 push %ebx
    80484b0: 83 ec 24 sub $0x24,%esp
    80484b3: 83 e4 f0 和 $0xfffff0 ,%esp
    80484b6: b8 00 00 00 00 mov $0x0,%eax
    80484bb: 83 c0 0f 添加 $0xf,%eax
    80484be: 83 c0 0f 添加 $0xf,%eax
    80484c1: c1 e8 04 shr $0x4,%eax
    80484c4 : c1 e0 04 shl $0x4,%eax
    80484c7: 29 c4 sub %eax,%esp
    80484c9: c7 04 24 04 00 00 00 movl $0x4,(%esp)
    **80484d0: e8 1f ff ff ff call 80483f4 <_Znwj>** --> 新：预期！！
    80484d5: 89 c3 mov %eax,%ebx
    80484d7: 89 1c 24 mov %ebx,(%esp)
    80484da: e8 35 00 00 00 调用 8048514 <_ZN6ObjectC1Ev>
    80484df: 89 5d f8 mov %ebx,-0x8(%ebp)
    80484e2: 83 7d f8 00 cmpl $0x0,-0x8(%ebp)
    80484e6: 74 22 je 804850a
    80484e8: 8b 45 f8 mov -0x8(%ebp),%eax
    80484eb: 89 45 e8 mov %eax,-0x18(% ebp)
    80484ee: 83 7d e8 00 cmpl $0x0,-0x18(%ebp)
    80484f2: 74 16 je 804850a
    80484f4: 8b 45 e8 mov -0x18(%ebp),%eax
    80484f7: 89 04 24 mov %eax,(%esp)
    80484fa: e8 1b 00 00 00 调用 804851a <_ZN8466ObjectD 804851a <_ZN8466ObjectD>
    8451a <_ZNffObjectD e8 mov -0x18(%ebp),%eax
    8048502: 89 04 24 mov %eax,(%esp)
    **8048505: e8 0a ff ff ff call 8048414 <_ZdlPv>** --> 删除：预期

2.  构建一个共享对象：

    gcc -m32 -c main.cpp gcc --shared -m32 main.o -o main.so

    $ objdump -d main.so 000006d4 :
    6d4: 55 push %ebp
    6d5: 89 e5 mov %esp,%ebp
    6d7: 53 push %ebx
    6d8: 83 ec 24 sub $0x24,%esp
    6db: 83 e4 f0 和 $0xffffffff0 ,%esp
    6de: b8 00 00 00 00 mov $0x0,%eax
    6e3: 83 c0 0f 添加 $0xf,%eax
    6e6: 83 c0 0f 添加 $0xf,%eax
    6e9: c1 e8 04 shr $0x4,%eax
    6ec : c1 e0 04 shl $0x4,%eax
    6ef: 29 c4 sub %eax,%esp
    6f1: c7 04 24 04 00 00 00 movl $0x4,(%esp)
    **6f8: e8 fc ff ff ff call 6f9** ---> 新：要重新定位，意外 :(
    6fd: 89 c3 mov %eax,%ebx
    6ff: 89 1c 24 mov %ebx,(%esp)
    702: e8 fc ff ff ff call 703
    707: 89 5d f8 mov %ebx,-0x8(%ebp)
    70a: 83 7d f8 00 cmpl $0x0,-0x8(%ebp) 70e
    : 74 22 je 732
    710: 8b 45 f8 mov -0x8(%ebp),%eax
    713: 89 45 e8 mov %eax,-0x18(%ebp)
    716: 83 7d e8 00 cmpl $0x0,-0x18(%ebp)
    71a: 74 16 je 732
    71c: 8b 45 e8 mov -0x18(%ebp),%eax
    71f : 89 04 24 mov %eax,(%esp)
    **722: e8 fc ff ff ff call 723** ---> 删除：要重新定位，意外:(
    727: 8b 45 e8 mov -0x18(%ebp),%eax
    72a: 89 04 24 mov %eax,(%esp)
    72d：e8 fc ff ff ff 调用 72e

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:25:42.073

> 但是，一个共享对象，那么新和删除的符号将被重新定位

这完全符合设计（在这方面，UNIX 共享库与 Windows 共享库的工作方式非常不同）。

原因：符号插入。例如，在 UNIX 上，您可以将替代 malloc 实现（例如 tcmalloc）链接到主可执行文件，并且*每个*共享库（包括`libc.so`提供自己的 malloc）都会调用*您的*malloc。

如果你想在 UNIX 上实现类似 Windows 的符号绑定，`-Bsymbolic`链接器标志可能会做你想做的事情（`man ld`在你的平台上阅读）。

如果你在 Linux 或 Solaris 上，`gcc -shared -Wl,-Bsymbolic ...`应该做你想做的事。当心：“反对系统”有很多陷阱。你可能会后悔尝试这样做。

# visual-studio-2010 - 从网页获取数字，执行计算，将它们粘贴到 Excel 表中

> ID：10765889
> 
> 赞同：0
> 
> 时间：2012-05-26T11:42:07.750
> 
> 标签：visual-studio-2010, excel, c#-4.0, html-parsing

我正在开发一个业务应用程序，该应用程序将根据上市公司的财务报表进行财务计算。具体来说，我想使用来自此类页面的[数据](http://www.google.com/finance?q=NASDAQ:TXN&fstype=ii "德克萨斯州")。如第一栏为营业收入的数字。

我目前的计划是将页面解析为 htm 文件（如果可以的话）。然而，这是我第一次尝试编写与 Web 交互的应用程序，所以我不确定这是否是最好的方法。我目前期望实现[这个](http://htmlagilitypack.codeplex.com/ "德克萨斯州")库。进行解析。

获得所有相关数字并完成计算后，我想将结果放入 Excel 电子表格中。这也是我不知道该怎么做的事情。

非常感谢任何详细说明如何实施该计划或如何形成更好计划的建议或回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T17:27:25.390

对于上市公司的财务数据，您可能希望使用 Web 服务，而不是解析 HTML。 [这](https://data.nasdaq.com/xml.aspx)是此类网络服务的一个示例（尽管我不保证它的价格或可靠性——我从未使用过它）。您可以在 Visual Studio 中创建一个简单的控制台应用程序（VSTO 解决方案可能更好，我只是没有太多经验），通过 Web 服务检索数据，然后通过[Excel Interop](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel%28v=office.14%29.aspx)在 Excel 中粘贴和格式化。SO 上以及整个网络上都有很多关于 Excel 互操作的帖子。

您尝试做的事情听起来很常见，以至于我想知道某处是否有可用的现有报表包。

# memcached - 什么是 memcached 服务器

> ID：10765897
> 
> 赞同：44
> 
> 时间：2012-05-26T11:42:57.570
> 
> 标签：memcached

我是学习 memcached 的初学者。memcached 服务器最让我困惑。我可以将它视为像 Web 服务器一样的单台服务器计算机吗？我也对 memcached 服务器和客户端之间的关系感到困惑，它们是否位于不同的计算机上？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-26T14:15:52.310

我同意@phihag 回答的大多数事情，但我必须澄清一些事情。

Memcached 根据键存储数据（phihag 将其称为 id，不要与数据库 id 混淆）。数据可以有各种大小，因此您可以存储少量数据（例如从数据库中提取的 1 条记录），也可以存储大量数据（例如数百条记录或整个完成的 html 页面）。

Memcached通常**不**与应用程序服务器在同一台机器上使用，原因是因为它被设计为通过 TCP 使用（如果它被设计为在同一台服务器上工作，它可以通过套接字访问）并且它被设计为作为池服务器。

池化部分很有趣——你可以让 10 台机器运行 Memcached，每台机器为此分配最多 10GB 的内存。10*10 = 100GB 内存空间。

当您将值写入 Memcached 时，只有一个（随机或通过某些算法）服务器存储它。当您尝试从 Memcached 读取值时，只有存储了它的服务器会将其发送给您。

因此，您确实**可以**将所有数据库/内存缓存/应用程序/文件服务器放在同一台机器上，通常您会为您的开发沙箱这样做。但您也**可以**将它们放在单独的机器上，也可以将两者结合起来。

如果您只需要一个 Memcached 服务器，您可能可以将其托管在与应用程序代码相同的机器上。

如果开始使用 varnish 等前端缓存服务器，或者将 NginX 配置为前端缓存服务器，则必须配置一些 Memcached 服务器来存储这些前端缓存服务器正在缓存的数据。

如果您将数据库分发到多台服务器中，将文件服务器分发到 CDN 中，这意味着您的应用程序会在短时间内处理大量数据，因此您将需要大量 RAM 空间，而这些空间在单个服务器中是无法使用的应用服务器。

由于为 Memcached 服务器扩展内存池就像将新服务器的 IP 添加到列表中一样简单，因此您将像在许多服务器中一样水平扩展（这是 Memcached 的真正典型用途）。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-26T11:49:17.493

memcached 服务器是一个管理 memcached 存储的数据的*程序*（不要与*机器*混淆，它也可以称为服务器）。理论上，它可以在任何计算机上运行。但是，它通常在运行主应用程序的同一台机器上运行。

然后，应用程序使用其 memcached 客户端与 memcached 服务器通信并请求缓存内容。这比从传统数据库中查询数据要快，因为

1.  memcached 服务器只是将 ID 映射到值，从不需要扫描整个表
2.  memcached 协议更简单。服务端不需要解析 SQL 左右，客户端也不需要精雕细琢。
3.  由于 memcached 不需要数据库的可靠性（想想备份、故障隔离、集群、安全等），它可以在运行应用程序的同一台机器上运行。虽然您可以在运行应用程序的同一台机器上运行数据库，但由于上述原因，这样做是不受欢迎的。

# vim - 使用 vim 删除 div 中的新行

> ID：10765901
> 
> 赞同：2
> 
> 时间：2012-05-26T11:43:29.297
> 
> 标签：vim, macvim

我有一些这样的数据

```
<div>
This
is
some text
</div> 
```

我想结束这个

```
<div>
This is some text
</div> 
```

我知道我可以搜索和替换`\n`，但我想限制只搜索`<div>`标签内的行。

我有一个非常长的 HTML 文件，其中包含数千个 Div，没有类或 ID。

我怎样才能用 Vim 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:15:04.993

将光标移动到`<div>`块中，试试这个：

`v``i``t``o``j``J`

* * *

要加入所有非重叠`<div>`块，请尝试以下操作：

```
:g/<div>/+1,/<\/div>/-1 join 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:05:01.097

1.  开始录制宏（在寄存器中`d`）`qd`
2.  `/<div`使用（然后按回车键）搜索开始的 DIV 标记
3.  使用可视模式选择 DIV 内的所有内容`vit`
4.  更改视觉选择，使其不包含带有开始标记的行`oj`
5.  加入行`J`
6.  停止录制`q`

现在您可以根据需要多次播放宏`@d`（或者，对于固定次数的重复，您可以在其前面加上一个数字，例如`20@d`）

（此解决方案假定，如您的示例所示，打开和关闭标签始终位于各自的行中。此外，如果 DIV 中只有一行内容，则结束标签将与内容位于同一行.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T11:49:26.557

如果您在“This”上，`VjjJ`（选择整行，向下两次，以 ' ' 作为分隔符连接行。）

--

如果您希望最终结果是`<div>This is some text</div>`：将光标放在标签中的任意位置并执行`vatJ`（可视模式，选择包含，选择标签，连接行。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T11:52:30.740

您可以执行以下操作之一：

*   用 选择树线`V`，并使用`J`将它们放在同一行。
*   将光标放在第二行并使用`3J`.
*   将光标放在第二行，然后执行`J`两次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-26T18:44:59.527

```
:g/<div>/norm! jVjjJ 

:................... command
g................... global
/<div> ............. search for <div>
norm! .............. in normal mode
j................... down one line 'j', 
V .................. visual by line 'V' 
jj ................. down more two lines
J .................. upper 'J' join lines 
```

对于可变数量的行尝试

```
:g/<div>/norm! jV/\/div^MkJ

:............. command
g ............ global
/<div> ....... search div
norm!  ....... execute in normal mode
j ............ down one line
V ............ start visual mode
/\/div ....... search div close
^M ........... type <ctrl-v> in linux or <ctrl-k> on windows, after that <enter>
k ............ up one line
J ............ joine all selected lines

On linux to insert <Enter> press <ctrl-v><enter>
On windows try <ctrl-k><enter> 
```

# xcode - 使用 XCode 改进开发流程和编辑。

> ID：10765902
> 
> 赞同：3
> 
> 时间：2012-05-26T11:43:46.287
> 
> 标签：xcode

XCode 在强制您格式化代码的方式以及它对您施加的限制方面有点弱。我正在考虑诸如选择一个代码块并使用选项卡重新定位整个块之类的事情，这对于清理缩进等非常有用。

我意识到我可以使用外部编辑器（例如 Sublime Text 2，它非常棒，也是我的日常编辑器）来编辑代码，但我想知道是否有任何插件或工具可以集成到 xcode 中以改进本次开发经验。

xcode 存在哪些类型的扩展，或者如果没有，是否有任何鲜为人知的功能有助于改进它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T15:06:57.733

很难给您答案，因为我们不知道您在其他地方使用了哪些您认为 Xcode 中缺少的功能。例如，您可以通过按`Cmd-{`或将代码块移入或移出`Cmd-}`。`ctrl-i`或者您可以使用上面指出的 jrturton来“修复”缩进。所有的 emacs 键绑定都有效。事实上，您应该查看首选项中的键绑定，看看还有什么其他可能的。我最喜欢的一些是：

1）选择一个词并点击`Cmd-E`使其成为搜索词。然后`Cmd-G`寻找下一个实例。

2)`F6`进入调试器，`F7`进入和`F8`退出

3）尽管我讨厌命令行，`gdb`但有许多有用的命令可以在断点处停止时调用方法。`call`您可以使用该命令调用任何函数或 C++ 或 Objective-C 方法。（`help call`在 gdb 提示符下键入以了解更多信息。）

4) 如果您的索引是最新的，您应该能够 Cmd 单击符号以转到它的定义，或选项单击以查看其文档。

这些是你正在寻找的东西吗？如果没有，请举例说明您想要什么。据我所知，Xcode 4 中没有插件机制，所以不存在扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:41:41.317

虽然第一个答案很好（从中学到了很多），但我想添加一点提示，在粘贴代码片段时对我有很大帮助。很多时候 xCode 以我不喜欢的方式复制缩进，然后我必须重新缩进整个代码段。

我开始做的是**跳到行中的第一个字符**（**ctrl + a** | **cmd + ArrowLeft**）并立即粘贴代码，或者在粘贴之前缩进一两个，如果我在函数中，则取决于循环等。

# http - 在 url 中通过 http 发送二进制数据

> ID：10765903
> 
> 赞同：2
> 
> 时间：2012-05-26T11:43:53.913
> 
> 标签：http, binary-data

我正在尝试一种通过浏览器中的 URL 字段通过 http 将二进制数据传递到服务器的方法。有没有办法绕过浏览器完成的自动 http 编码，所以我可以自己编码数据。

例如：而不是值 48 的字节，填写 URL %30 以便浏览器不会重新编码 url，我最终得到 %2530

已解决：以后可能会遇到类似问题的人。您可以使用 wget 参数来执行此操作

*--restrict-file-name=ascii*

这基本上确保***'%'***不会被转义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T12:45:30.720

使用[base64](http://msdn.microsoft.com/en-us/library/dhx0d524.aspx)编码，这就是它的设计目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-19T19:53:34.953

使用[base62](https://stackoverflow.com/questions/17745025/convert-a-string-into-base62)编码。

编码字符串不包含任何将被 URL 编码的字符。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-04T00:17:49.593

我设法做到了，通过编写自己的 tcp 客户端来连接到 http 服务器并通过手动输入来传输请求。

# c# - 如何访问 PhoneApplicationPage 中的所有元素？

> ID：10765904
> 
> 赞同：0
> 
> 时间：2012-05-26T11:44:00.210
> 
> 标签：c#, .net, xaml, windows-phone-7.1

我想知道如何访问`IEnumerable`派生自的页面中的所有元素`PhoneApplicationPage`？

如果它是 ASP.Net WebForms，它将如下所示：

```
 foreach (Control control in this.Controls)
    {
        //Do something
    } 
```

但在 Windows Phone 7.5 中找不到等价物！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:08:51.437

您可能可以使用[VisualTreeHelper](http://msdn.microsoft.com/en-us/library/system.windows.media.visualtreehelper%28v=vs.95%29.aspx)类来实现这一点

执行以下操作：

```
LoopThroughControls(LayoutRoot);

private void LoopThroughControls(UIElement parent)
{
  int count = VisualTreeHelper.GetChildrenCount(parent);
  if (count > 0)
  {
    for (int i = 0; i < count; i++)
    {
      UIElement child = (UIElement)VisualTreeHelper.GetChild(parent, i);
      string childTypeName = child.GetType().ToString();
      LoopThroughControls(child);
    }
  }
} 
```

# c# - 如何检测防病毒/防火墙是否阻止了我的应用程序？

> ID：10765906
> 
> 赞同：2
> 
> 时间：2012-05-26T11:44:34.943
> 
> 标签：c#, winapi, wmi, firewall, antivirus

我有一个工作正常的下载器，但有时用户的防病毒/防火墙会阻止其文件写入访问和/或下载。有没有办法检测到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-26T12:50:40.920

由于您使用的是 C#，因此请使用 try/catch 块并捕获[UnauthorizedAccessException](http://msdn.microsoft.com/en-us/library/system.unauthorizedaccessexception.aspx)。
这是处理它的最干净和最标准的方式。

注意：这不会告诉您 AV 是否​​捕获了它，您也不应该检查：这是用户及其 AV 的问题。
如果您的程序被拒绝访问用户的某些资源，并且您认为您有正当理由访问该资源，请使用漂亮的文本框通知用户并让他们使用 AV 对其进行排序。例如，您可以建议您的下载器位于 AV 的受信任程序列表中。

# php - 用于图像悬停的 PHP 脚本，但它不起作用

> ID：10765908
> 
> 赞同：0
> 
> 时间：2012-05-26T11:44:39.853
> 
> 标签：php, javascript

我不太确定出了什么问题。我已经尝试了一些东西，但我就是无法让它工作。当您将鼠标悬停在链接上时，它应该有一个小图像，但它不起作用。它似乎正确地输出了 HTML

```
 <html>
    <head>
    <title>JamieHankins.co.uk</title>
    <link rel="stylesheet" href="http://jamiehankins.co.uk/css.css">
    <style type="text/css">
    table.tables td {
        border-width: 4px;
        padding: 8px;
        border-style: solid;
        border-color: #999999;
    }
    .ddimgtooltip{
    box-shadow: 3px 3px 5px #818181; /*shadow for CSS3 capable browsers.*/
    -webkit-box-shadow: 3px 3px 5px #818181;
    -moz-box-shadow: 3px 3px 5px #818181;
    display:none;
    position:absolute;
    border:1px solid black;
    background:white;
    color: black;
    z-index:2000;
    padding: 4px;
    }
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
    <script type="text/javascript">
    var ddimgtooltip={

        tiparray:function(){
            var tooltips=[]
            <?php
            $count = 0;
            if ($handle = opendir('.')) {
            while (false !== ($entry = readdir($handle))) {
            if ($entry != "." && $entry != "..") {
            $count++;
            echo"
            ";
            echo "tooltips[$count]=['$entry']";
            }
            }
            }
            ?>

            return tooltips
        }(),

        tooltipoffsets: [20, -30],

        tipprefix: 'imgtip',

        createtip:function($, tipid, tipinfo){
            if ($('#'+tipid).length==0){
                return $('<div id="' + tipid + '" class="ddimgtooltip" />').html(
                    '<div style="text-align:center"><img src="' + tipinfo[0] + '" /></div>'
                    + ((tipinfo[1])? '<div style="text-align:left; margin-top:5px">'+tipinfo[1]+'</div>' : '')
                    )
                .css(tipinfo[2] || {})
                .appendTo(document.body)
            }
            return null
        },

        positiontooltip:function($, $tooltip, e){
            var x=e.pageX+this.tooltipoffsets[0], y=e.pageY+this.tooltipoffsets[1]
            var tipw=$tooltip.outerWidth(), tiph=$tooltip.outerHeight(), 
            x=(x+tipw>$(document).scrollLeft()+$(window).width())? x-tipw-(ddimgtooltip.tooltipoffsets[0]*2) : x
            y=(y+tiph>$(document).scrollTop()+$(window).height())? $(document).scrollTop()+$(window).height()-tiph-10 : y
            $tooltip.css({left:x, top:y})
        },

        showbox:function($, $tooltip, e){
            $tooltip.show()
            this.positiontooltip($, $tooltip, e)
        },

        hidebox:function($, $tooltip){
            $tooltip.hide()
        },

        init:function(targetselector){
            jQuery(document).ready(function($){
                var tiparray=ddimgtooltip.tiparray
                var $targets=$(targetselector)
                if ($targets.length==0)
                    return
                var tipids=[]
                $targets.each(function(){
                    var $target=$(this)
                    $target.attr('rel').match(/\[(\d+)\]/)
                    var tipsuffix=parseInt(RegExp.$1)
                    var tipid=this._tipid=ddimgtooltip.tipprefix+tipsuffix 
                    var $tooltip=ddimgtooltip.createtip($, tipid, tiparray[tipsuffix])
                    $target.mouseenter(function(e){
                        var $tooltip=$("#"+this._tipid)
                        ddimgtooltip.showbox($, $tooltip, e)
                    })
                    $target.mouseleave(function(e){
                        var $tooltip=$("#"+this._tipid)
                        ddimgtooltip.hidebox($, $tooltip)
                    })
                    $target.mousemove(function(e){
                        var $tooltip=$("#"+this._tipid)
                        ddimgtooltip.positiontooltip($, $tooltip, e)
                    })
                    if ($tooltip){
                        $tooltip.mouseenter(function(){
                            ddimgtooltip.hidebox($, $(this))
                        })
                    }
                })

            })
        }
    }

    ddimgtooltip.init("*[rel^=imgtip]")
    </script>
    </head>
    <body>
    <div class="box">
    <span class="title">Screenshot Bin</span>
    <table class="tables">
    <tr>
    <?php
    $COUNT = 0;
    if ($handle = opendir('.')) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != ".." && $COUNT % 3 == 0) {
            echo "</tr><tr><td><a href='$entry' rel='imgtip[$COUNT]'>$entry</a></td>";
            $COUNT++;
        }
        else {echo "<td><a href='$entry' rel='imgtip[$COUNT]'>$entry</a></td>";
        $COUNT++;
        }
    }
    closedir($handle);
    }
    ?>
    </tr>
    </table>
    </div>
    <div class="proboxs">
    <a class="social" href="http://jamiehankins.co.uk/">Back</a>
    </div>
    </body>
    </html>
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:02:59.443

@jamie 您的代码需要包含您应该下载的图像的外部文件。然后你应该设置图像的路径。

# android - Android 服务进程属性

> ID：10765910
> 
> 赞同：1
> 
> 时间：2012-05-26T11:44:48.327
> 
> 标签：android

如果我在两个 APK 中定义一个服务，并尝试在设备启动时启动这些服务，并且这两个服务具有相同的进程名称，它们都会启动吗？或者 Android 操作系统是否足够聪明，可以知道同名的“进程”已经在运行？或者这是否意味着它们都共享相同的虚拟机或操作系统级别的进程？

APK #1

```
<service android:name=".app.MessengerService" android:process="process_name" /> 
```

APK #2

```
<service android:name=".app2.MessengerService" android:process="process_name" /> 
```

# silverlight - 在 JavaScript 中显示 Silverlight 错误，而不是在 Visual Studio 中

> ID：10765919
> 
> 赞同：0
> 
> 时间：2012-05-26T11:46:47.080
> 
> 标签：silverlight, debugging, visual-studio-debugging

构建一个在浏览器中运行的 Silverlight 5 应用程序，但在 JavaScript 中出现一些令人讨厌的错误，当附加调试器时，由于某种原因，它们没有被 Visual Studio 捕获。我已经完成了一些简单的事情（创建带有 Web 项目的 VS SL 5 项目）。当我调试时，错误通过JS显示在浏览器中......而不是在Visual Studio中。

我可以设置断点并遍历它们，但是当发生未处理的异常时，SL 只是在页面中冒泡（如预期的那样），但 VS 没有捕捉到它。

我已验证 VS 已附加到 IE 进程和 Type=Silverlight。现在我要解决的错误是 4004 错误代码 (category=managedruntimeerror) 带有“system.argumentexception：值不在预期范围内”的消息，但我找不到发生这种情况的地方/ oa堆栈更详细。我得到的只是“Visual Studio JIT 调试器”，它看起来很像这个[http://www.scottleckie.com/2010/04/code-4004-unhandled-error-in-silverlight-application/](http://www.scottleckie.com/2010/04/code-4004-unhandled-error-in-silverlight-application/)但他的解决方案不是不为我工作...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T13:13:36.603

查看您的 App.xaml.cs，您会发现一个名为 Application_UnhandledException 的处理程序。
应该有一些类似的代码：

```
 Deployment.Current.Dispatcher.BeginInvoke(delegate
    {
        ReportErrorToDOM(e);
    }); 
```

将其替换为您的自定义错误处理方法。
ReporterErrorToDOM 是在您的浏览器中触发 javascript 错误的原因。

如果没有，您需要设置一个：

```
public App()
{
    this.UnhandledException += this.Application_UnhandledException;
    ...
}
private void Application_UnhandledException(object sender, ApplicationUnhandledExceptionEventArgs e)
{
    // Handle exception here
    ...
    // Don't forget this !
    e.Handled = true;
} 
```

# c - Xcode 4 普通 C 静态库链接

> ID：10765920
> 
> 赞同：1
> 
> 时间：2012-05-26T11:46:50.067
> 
> 标签：c, xcode, static

我想在`Xcode`. 我有 5 个源文件添加到一个项目和一个库中，比如`libMyLib.a`. C 源文件显然使用该库。我无法让它工作，链接器产生类型错误：

> 架构 x86_64 的未定义符号...

我已经检查了 lipo 静态库是否支持这种架构。我尝试了这个论坛上建议的各种选项：设置标题的路径（绝对的，以及使用`$(SOURCE_ROOT)`），设置构建阶段 - > 使用库链接二进制文件，使用工作区。使用命令行 gcc 时，相同的源代码编译得很好。我还尝试`Xcode`为我与 make 一起使用的那些设置额外的链接器标志。没有任何效果。我错过了什么？

# android - 使用android模拟器时的网络重定向

> ID：10765924
> 
> 赞同：0
> 
> 时间：2012-05-26T11:47:43.587
> 
> 标签：android, android-emulator

我一直在尝试了解 android 模拟器网络的基础知识。我找到了这个[模拟器](http://developer.android.com/guide/developing/devices/emulator.html#redirection)的详细信息。

它要求执行这些命令：

*   远程登录本地主机 5554
*   重新添加 tcp:5000:6000

Que：所以我怀疑我在哪里输入这些命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:17:23.977

使用普通的命令行窗口输入`telnet localhost 5554`

您必须首先检查您的 PC 上是否激活了 telnet 客户端：

在窗口中：

检查此链接[打开-telnet-in-windows-7](http://www.lovemytool.com/blog/2010/03/turn-on-telnet-in-windows-7-by-tony-fortunato.html)

在 ubuntu 中通过以下方式安装它：

```
$ sudo apt-get install telnet 
```

你也必须先运行你的模拟器！！希望对你有帮助

# flash - 如何将 Flash facebook 应用程序与 facebook 服务器同步

> ID：10765926
> 
> 赞同：0
> 
> 时间：2012-05-26T11:48:12.360
> 
> 标签：flash, facebook-graph-api, facebook-javascript-sdk, facebook-as3-api

我正在使用 as3-fb-api 连接到 js-api 的 flash 应用程序。它工作正常：登录，获取朋友的个人资料照片，注销，重复。

但是，如果用户打开指向 facebook.com 的第二个浏览器选项卡，并使用它注销 facebook，然后返回到我的应用程序，并点击调用 Facebook.logout() 的注销按钮，问题就开始了。

我的应用程序监听：

```
Facebook.addJSEventListener( 'auth.statusChange'       , om__statusChange       ) ;
Facebook.addJSEventListener( 'auth.authResponseChange' , om__authResponseChange ) ;
Facebook.addJSEventListener( 'auth.login'              , om__login_noticed      ) ;
Facebook.addJSEventListener( 'auth.logout'             , om__logout_noticed     ) ; 
```

理想情况下，我希望 Facebook.logout() 会调用 js，这将 ajax fb 服务器，以发现用户已经退出，并返回消息供应用程序处理。

在我的萤火虫调试器中，我看到调用了 facebookjsbridge: logout 函数，但没有调用它的回调 FBAS.handleUserLogout，也**没有**调用任何事件监听器。

那么将我的应用程序与服务器同步的适当方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:33:47.370

经过几天尝试各种技术，这就是我想出的，但它是**HACKish**

问题是：如果用户通过 as3-fb-api:Facebook.login(...) 登录到我的 Facebook 应用程序，然后转到另一个浏览器选项卡，在那里打开 facebook.com，在那里注销，然后返回我的应用程序和它搞砸了，我的应用程序变得与 facebook 不同步。

所以为了解决这个问题，我现在有任何和所有 Facebook.api 调用来寻找这个失败：

```
{ error , [object Object] , object
    { code , 190 , number
      message , Error validating access token: The session is invalid because the user logged out. , string
      type , OAuthException , string
      error_subcode , 467 , number          
     }
}
// I may discover later that there are other types of failures 
//    that I will need to catch as well. 
```

如果任何调用返回此错误，则应用程序会自行重新加载（我使用对 js 的外部接口调用来处理重新加载）。

*此外，*我在我的 LOGOUT 按钮中添加了一个例程来使用这个系统。最初，当用户按下 LOGOUT 按钮时，我会简单地调用 Facebook.logout(...)，但*如果*用户已经注销则失败...... Facebook.logout(...) 甚至不会调用回调带有错误消息，因此应用程序无法发现不同步问题。

*所以现在当用户按下 LOGOUT 按钮*时，应用程序首先调用 Facebook.api("/me/" , ... )。为什么？因为即使用户已通过另一个浏览器选项卡注销，该 api 调用也会返回错误消息（或成功消息）。如果此 api 调用返回失败消息/对象，则我将应用程序转移到重新加载阶段，否则我通常继续使用 Facebook.logout(...)

# java - java如何知道进程是否正在等待输入

> ID：10765928
> 
> 赞同：2
> 
> 时间：2012-05-26T11:48:28.443
> 
> 标签：java

我正在尝试在 java 中创建一个进程，该进程启动一个外部文件，该文件要求用户在执行时提供一些参数。

问题是如何确定进动是否要求争论

```
 ProcessBuilder pb = new ProcessBuilder(c.fileName);
    Process proc = null;
    try {
        proc = pb.start();
    } catch (IOException ex) {
        Logger.getLogger(clas.class.getName()).log(Level.SEVERE, null, ex);
    }
    Scanner in = new Scanner(proc.getInputStream());
    PrintWriter out = null;
    out = new PrintWriter(proc.getOutputStream());
    while (in.hasNextLine()) {
        System.out.println(in.nextLine());
        out.println(1); // i don't want to give 1 untill the process need it ! 
        out.flush();
    }

    out.close(); 
```

# android - Android：私信应用

> ID：10765937
> 
> 赞同：-2
> 
> 时间：2012-05-26T11:49:20.707
> 
> 标签：android, message, microblogging

我想开发一个广播消息的应用程序，只能通过这个应用程序查看。因此，教师可以使用它来广播使用此应用程序（或接收器应用程序）的学生可以访问的指令。任何人都可以帮助我实现这个想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T11:51:38.093

您需要有外部服务器来存储消息。然后，您的客户端应用程序将连接到服务器并提取新数据。

就个人而言，我会选择服务器的 PHP 网站，因为它可以快速实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:03:39.783

尝试查看[http://www.parse.com](http://www.parse.com) API 以轻松实现用户访问和推送。真是太棒了！

您可以创建一个免费帐户并使用它，直到每月收到 1 000 000 个请求，我认为这已经足够了......

# c# - 在不使用 html 解析器的情况下，有一种方法可以使用普通的字符串方法来获取两个指定字符串之间的字符串部分，在我的情况下为标签

> ID：10765940
> 
> 赞同：0
> 
> 时间：2012-05-26T11:49:27.793
> 
> 标签：c#, asp.net, linq

假设我有以下字符串。

```
"<description>This is the description,<strong> I want to retrieve this text</strong></description> and this is not the description." 
```

我只想提取两个描述标签/字符串之间的字符串部分。我知道我可以安装和使用 html 敏捷包之类的东西，但我宁愿不要为了这样的目的而执行任务。.net XML 解析器也不会这样做，因为它不能很好地处理 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T11:56:34.920

```
var description = Regex.Match(s, @"<description>(.*)</description>").Groups[1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T12:08:23.540

您可以使用带有环视的正则表达式来匹配开始和结束标签：

```
string description = 
    Regex.Match(html, @"(?<=<description>).*?(?=</description>)").Value; 
```

但是，请注意这种方法非常脆弱。例如，它假定您的`<description>`元素永远不会有属性、嵌套或自闭合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-26T14:11:44.887

您可以使用正则表达式使用以下代码在描述标签之间获取字符串。

```
 Regex objPatterntable = new Regex("<description [^>]*?>.*?</description>", RegexOptions.IgnoreCase | RegexOptions.Singleline | RegexOptions.IgnorePatternWhitespace); 
```

# ubuntu - ssh 使用 $HOME/.ssh/known_hosts 以外的 known_hosts

> ID：10765946
> 
> 赞同：58
> 
> 时间：2012-05-26T11:50:39.087
> 
> 标签：ubuntu, ssh

`known_hosts`是否可以使用用户标准之外的其他文件运行 SSH `$HOME/.ssh/known_hosts`？

请注意，SSH 使用`$HOME`原始用户。如果您尝试更改它，例如

```
export HOME=some_other_location 
```

它不会影响 SSH 用于查找的位置`known_hosts`。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-05-26T11:54:57.483

`$HOME/.ssh/config`您可以在或`/etc/ssh/ssh_config`参数中指定替代的 known_hosts 文件`UserKnownHostsFile`。

或者，如果您更喜欢为特定的 SSH 调用使用替代 known_hosts 文件，您可以使用 SSH 命令选项`-o UserKnownHostsFile=<alternative known_hosts file>`，例如`ssh -o UserKnownHostsFile=~/my_temporary_known_host ssh_host`.

# javascript - 将对象添加到 JavaScript 中的对象

> ID：10765947
> 
> 赞同：1
> 
> 时间：2012-05-26T11:50:51.730
> 
> 标签：javascript, object

> **可能重复：**
> [对象字面量声明中的自引用](https://stackoverflow.com/questions/4616202/self-references-in-object-literal-declarations)

**大家好，**

我有一个关于 JavaScript 对象的小问题。我在 JavaScript 中有以下对象：

```
var CONFIG = {
    MAIN_URL: 'http://www.test.us',
    MAIN_COLOR: '#fff'
} 
```

现在我想声明一个带有另一个对象前缀的对象：

```
var CONFIG = {
    MAIN_URL: 'http://www.test.us',
    LOGIN_URL: MAIN_URL+'/login', // <- this one!
    MAIN_COLOR: '#fff'
} 
```

我怎么做？我试过 this.MAIN_URL, CONFIG[MAIN_URL], CONFIG.MAIN_URL - 但没有任何效果？！？！

谢谢，萨沙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-26T11:53:59.043

您不能在对象初始化程序中这样做。相反，请执行以下操作：

```
var CONFIG = {};
CONFIG.MAIN_URL = 'http://www.test.us';
CONFIG.LOGIN_URL = CONFIG.MAIN_URL+'/login'; // <- this one!
CONFIG.MAIN_COLOR = '#fff'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-26T11:53:25.283

```
var CONFIG = new function() {
    this.MAIN_URL = 'http://www.test.us',
    this.LOGIN_URL = this.MAIN_URL+'/login', // <- this one!
    this.MAIN_COLOR = '#fff'
}; 
```

# python - python中的背景音乐

> ID：10765948
> 
> 赞同：0
> 
> 时间：2012-05-26T11:51:03.823
> 
> 标签：python, audio

我正在制作一个游戏，你是一个逃避迎面而来的流星的航天飞机，这是我的第一个 Python 程序，我真的在音乐部分苦苦挣扎：这个想法是只使用`wxPython`(`pyGame`是被禁止的)。

目前，当您单击一个按钮时，我以某种方式设法让音乐播放，但后来我无法再控制宇宙飞船了。

我不完全明白发生了什么，我一直在寻找几天没有答案。

```
class Board(wx.Panel):
BoardWidth = 5
BoardHeight = 12
Speed = 50
ID_TIMER = 1

def __init__(self,parent):
    wx.Panel.__init__(self,parent)

    self.timer = wx.Timer(self, Board.ID_TIMER)

    self.Bind(wx.EVT_PAINT, self.OnPaint)
    self.Bind(wx.EVT_KEY_DOWN, self.OnKeyDown)
    self.Bind(wx.EVT_TIMER, self.OnTimer, id=Board.ID_TIMER)
    self.ClearBoard()

    self.music = wx.Panel(self)
    button = wx.Button(self, label="Play")
    self.music=wx.media.MediaCtrl(self.music, -1, "game.mp3")
    button.Bind(wx.EVT_BUTTON, self.play)

def play(self,event):
    self.music.Play() 
```

就我而言，我认为它应该如何工作，但它没有：

```
 #...
    self.music=wx.media.MediaCtrl(self, -1, "game.mp3")
    self.Bind(wx.media.EVT_MEDIA_LOADED, self.play)

def play(self,event):
    self.music.Play() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T13:51:19.050

You can use a thread to play the music. Right now your frame freezes while it waits for the music to finish, which of course never happens, as it is background music.
There is a strange bug where the event is never generated. To solve this, add `szBackend=wx.media.MEDIABACKEND_WMP10` (see code below)

try:

```
import threading
#...

self.music=wx.media.MediaCtrl(self.music, -1, "game.mp3",
                              szBackend=wx.media.MEDIABACKEND_WMP10)    

#...
def play(self, event):
    threading.Thread(target=self.music.Play).start() 
```

Alternatively, you could use a timer to wait for the file to be loaded:

```
def __init__(self, parent):
    #...
    self.play()

def play(self):
    threading.Timer(0.5, self.music.Play).start() 
```

# assembly - MIPS寄存器内容

> ID：10765952
> 
> 赞同：0
> 
> 时间：2012-05-26T11:51:34.033
> 
> 标签：assembly, mips

**我们从地址8002000 到 80020028**运行代码，问题是当我们最后时寄存器**$18**里面是什么。我认为可能有**0x0E**但我真的不确定我是如何得到这个答案的。谁能解释一下？

如果我们从 80020000 开始并按照书面说明进行操作，是否会发生异常？如果是，什么时候会发生？

```
8001FFF8    NOP 
8001FFFC    NOP
80020000    LUI     $16, 0x8002
80020004    ADDIU   $16, $16, 0x30
80020008    ADDI    $17, $00, 0x3
8002000c    SLL     $17, $17, 0x2
80020010    LW      $18, 0x4 ($16)
80020014    LW      $19, 0x0 ($16)
80020018    SW      $18, 0x8 ($16)
8002001C    NOP
80020020    ADD     $18, $18, $17
80020024    NOP
80020028    NOP
8002002C    NOP
80020030    ???
80020034    SRL     $00, $00, 0
80020038    SRA     $00, $00, 0
8002003C    SLLV    $00, $00, $00
80020040    NOP
80020044    NOP 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T17:50:56.990

```
8001FFF8    NOP 
8001FFFC    NOP
80020000    LUI     $16, 0x8002
80020004    ADDIU   $16, $16, 0x30 
```

$16 = 0x80020030

```
80020008    ADDI    $17, $00, 0x3
8002000c    SLL     $17, $17, 0x2 
```

17 美元 = 12 ( 3 << 2 )

```
80020010    LW      $18, 0x4 ($16) 
```

$18 = 0x2（从反汇编的 80020034 加载值是 srl $0,$0,0 -> 0x2）

```
80020014    LW      $19, 0x0 ($16) 
```

19 美元 = ??? （0x80020030 下的值未知）

```
80020018    SW      $18, 0x8 ($16) 
```

存储在 0x80020038 (0x2) 下

```
8002001C    NOP
80020020    ADD     $18, $18, $17 
```

$18 = 0xE ( 0x2 + 12 )

```
80020024    NOP
80020028    NOP 
```

$18 = 0xE（nops 不会改变任何东西）

```
8002002C    NOP
80020030    ???
80020034    SRL     $00, $00, 0
80020038    SRA     $00, $00, 0
8002003C    SLLV    $00, $00, $00
80020040    NOP
80020044    NOP 
```

此代码中的异常是可能的（我可能会错过一些东西）：

*   在 80020018 sw 指令中，如果该内存片段被写保护（分段错误）
*   在 80020030 如果继续执行代码并执行此地址（非法指令）
*   在 80020010 如果这个内存片段被读保护（非常不可能）（分段错误）
*   如果此内存片段不可执行（不太可能）（分段错误），则为 80020000
*   如果此转储中可见的地址对执行此代码的进程不可见.. - 很难说不知道环境以及如何获得此转储。

# java - java.awt.image.ConvolveOp 中的非平方核

> ID：10765954
> 
> 赞同：0
> 
> 时间：2012-05-26T11:51:37.017
> 
> 标签：java, image-processing, graphics, 2d

我有示例图像处理代码，它使用以下内核对图像应用卷积滤波器：

```
float kernel[] = {-1,0,1}; 
```

及过滤器的应用：

```
new ConvolveOp(new Kernel(1,3, kernel), ConvolveOp.EDGE_NO_OP, null).filter(copy, img); 
```

我想知道 ConvolveOp 会如何处理非方核矩阵？据我所知，我们必须在卷积算法中使用*奇数行的**方阵。*

 ***PS。**我认为它（java）可能会用零填充它（例如 {0,0,0,-1,0,1,0,0,0}），但在更复杂的情况下，我们也可以拥有这种形式的内核没有运行时错误：

```
 float data[] = {
        -1,0,1,
        -1,0,1,
        -1,0,1,
        -1,0,1
    }; 
```

不能填充为奇数行的正方形。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T11:54:41.257

没有什么说卷积核必须是方阵。*

# assembly - 在 YASM 或 NASM 程序集中执行退格键

> ID：10765959
> 
> 赞同：2
> 
> 时间：2012-05-26T11:51:55.303
> 
> 标签：assembly, x86-64, nasm, yasm

我有一个程序以原始模式读取字符。也就是说，任何输入的字符都会被立即读取，而不是被缓冲。

我想知道如何执行退格。也就是说，当我按下退格键时，它应该删除左边的字符并将光标向左移动一位。

我尝试输出一个退格字符，后跟一个空格字符。由于某种原因，这会删除左侧的字符，但会将光标向右移动*两个空格。*

我也尝试过自己输出 Backspace 字符。这会将光标向左移动一格，但不会删除字符。

我的汇编程序是 YASM，我使用的是 64 位 Linux。下面是一些相关的代码。

首先，这是我用来输出字符的函数：

```
printchar:                       
        mov     [buf], al      ; Backup whatever was in al.
                               ; buf is declared as resb 1 in section .bss
        mov     edx, 1
        mov     ecx, buf
        mov     ebx, 1
        mov     eax, 4
        int     0x80
        mov     al, [buf]    ; restore char that was previously in al
        ret 
```

以下代码打印退格键。它不会像您的常规 Backspace 那样将光标向左移动一位。

```
 mov     al, 0x08 ; ASCII for Backspace
    call    printchar 
```

此代码打印一个退格键，后跟一个空格键。它将光标向右移动两个空格而不是一个空格。

```
 mov     al, 0x08 ; ASCII for Backspace
    call    printchar
    mov     al, 0x20 ; ASCII for Space
    call    printchar 
```

Len 建议打印 Backspace，然后是 Space，然后是 Backspace。这似乎有效：

```
 mov     al, 0x08 ; ASCII for Backspace
    call    printchar
    mov     al, 0x20 ; ASCII for Space
    call    printchar
    mov     al, 0x08 ; ASCII for Backspace
    call    printchar 
```

请注意，正如我之前提到的，我正在以原始模式读取字符。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T12:03:48.253

> 我也尝试过自己输出 Backspace 字符。这会将光标向左移动一格，但不会删除字符。

您快到了！尝试输出一个退格键，然后输出一个常规空格来黑掉光标现在所在的字符，然后再输出一个退格键再次将光标移回。

这看起来像一个黑客，但它实际上很常见！

# java - Windows Server 2008 上 IIS 7.5 背后的 Java 应用程序服务器

> ID：10765962
> 
> 赞同：0
> 
> 时间：2012-05-26T11:52:24.100
> 
> 标签：java, iis, glassfish, windows-server-2008

注意：我刚刚在[此处](https://serverfault.com/questions/392898/java-application-server-behind-iis-7-5-on-windows-server-2008)`ServerFault`发布了相同的问题。如果这不是正确的地方，请告诉我，以便我从这里删除问题。

我有一个 Java 应用程序服务器（确实是 GlassFish，但我猜任何其他应用程序服务器的问题都是一样的），在端口 8080 上运行。默认配置下，我有 IIS 7.5 在端口 80 上侦听。

我想避免人们输入端口，因为它不专业。所以我想要当有人打字时

```
http://myserver 
```

流量被定向到 IIS。这就是它现在已经工作的方式。但我也希望当有人打字时

```
http://myserver/java 
```

流量被定向到端口 8080，因此会显示我的 GlassFish 闪屏。如果我在 GlassFish 上的 context root 下部署了一个应用程序`app1`，请键入

```
http://myserver/java/app1 
```

应该访问应用程序。

我怎样才能做到这一点？我尝试使用`URL Rewrite`IIS7.5 UI 中的实用程序添加一些规则，但这会在规则重写 url 后显示端口，我想避免它。

# android - 在 Android 中永远不间断地播放

> ID：10765965
> 
> 赞同：0
> 
> 时间：2012-05-26T11:52:47.107
> 
> 标签：android, audio, soundpool

我有个问题。当我尝试使用 Soundpool 播放声音时，每次播放之间会有短暂的停顿。例如，我有 2 秒的声音，我想在按下按钮时播放。我试图以相同的声音启动 2 个线程。第二次在第一次之后 0.5 秒开始。但没有任何帮助。

 `````
 AudioManager  mAudioManager;
    SoundPool mSoundPool;
    Runnable thr1;
    Runnable thr2;

    public void playLoopedSound(int soundId) {
        mSoundPool = new SoundPool(2, AudioManager.STREAM_MUSIC, 0);
        mAudioManager = (AudioManager)mContext.getSystemService(Context.AUDIO_SERVICE);
        int streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC)*2; 
        thr1 = new Runnable() {
            public void run() {
                mSoundPool.play(soundId, 0, streamVolume, 1, -1, 1f); //0 = no loop, -1 = loop forever
            }
        };

   thr2 = new Runnable() {
        public void run() {
            mSoundPool.play(soundId, 0, streamVolume, 1, -1, 1f); 
        }
    };
    thr1.run();
    try {
        Thread.sleep(400);
    } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
    }
        thr2.run();
    } 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:03:10.723

没有调试很难知道，但是由于 soundpool 在加载声音时的性能，我遇到了类似的问题。为了解决这个问题，我实现了 SoundPool.onLoadCompleteListener 以确保在 soundpool 完全加载之前我不会开始尝试播放声音。

请注意，这仅适用于 API8 或更高版本。请参阅此答案以获得很好的实现：

[了解在 Android 1.6/2.0/2.1 上使用 SoundPool 加载声音是否成功](https://stackoverflow.com/questions/4692572/knowing-if-the-loading-of-a-sound-with-soundpool-has-been-successful-on-android)``

# redirect - 使用域屏蔽子域，就像 Google 协作平台一样

> ID：10765970
> 
> 赞同：1
> 
> 时间：2012-05-26T11:53:26.217
> 
> 标签：redirect, dns, subdomain

我有一个托管在 xyz.abc.com 的网站。

但是我希望人们在地址栏中只看到 abc.com。目前我只是将 abc.com 重定向到 xyz.abc.com 并将 URL 更改为 xyz.abc.com。

换句话说，我想像 Google Sites 一样屏蔽子域（而不是使用框架和 iframe 来隐藏它）。请帮我解决。谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:01:57.787

您只需在 abc.com 上放置框架。

```
<frameset rows="100%,*" frameborder="NO" border="0" framespacing="0">
<frame name="main_frame" src="http://xyz.abc.com/">
</frameset> 
```

# iphone - 在通用应用程序中使用 UIPopoverController

> ID：10765973
> 
> 赞同：1
> 
> 时间：2012-05-26T11:53:35.827
> 
> 标签：iphone, objective-c, ios, ipad, ios-universal-app

我有一个按钮，按下时会显示一个视图控制器，这是一个通用应用程序。

在 iPhone 上，视图控制器被推送到导航堆栈上。在 iPad 上，它显示在弹出窗口中。新的视图控制器有一个委托，它是负责按钮的视图控制器，当用户选择了一个项目时，新的视图控制器向委托发送一条消息，将用户选择的内容传递给委托。

我知道无论呈现什么弹出框都应该负责解除它，所以我保留对 UIPopover 的引用，以便我可以从负责按钮的视图控制器中解除它（从创建弹出框的同一视图控制器）。

但是我不确定谁应该负责将新的视图控制器从导航堆栈中弹出，应该是允许用户选择项目的视图控制器，还是具有按钮的视图控制器？

我应该这样做：

```
//Picker view controller
//....
[self.delegate finishedPickingItem:item];
//...

//The first view controller (the self.delegate in the above line):
-(void)finishedPickingItem:(NSString *)item {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        [self.profilePopover dismissPopoverAnimated:YES];
    } else {
        [self.navigationController popToViewController:self animated:YES]; //Or should this be just popViewController:?
    }
    // do something with item...
} 
```

或者：

```
//Picker view controller
//...
[self.delegate finishedPickingItem:item];
[self.navigationController popViewControllerAnimated:YES];
//...

//The first view controller (the self.delegate in the above line):
-(void)finishedPickingItem:(NSString *)item {
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
        [self.profilePopover dismissPopoverAnimated:YES];
    }
    // do something with item...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T12:00:38.757

负责的人总是将视图控制器推送到导航堆栈上的人，所以你的第一个选择。这样做的原因是，你永远不知道你是如何显示你的选择器视图控制器的，这一次你将它推送到堆栈上，下次你将它呈现为模态并且在这种情况下将它弹出到选择器中是行不通的。

# php - PHP零浮点返回真

> ID：10765979
> 
> 赞同：4
> 
> 时间：2012-05-26T11:54:42.367
> 
> 标签：php, floating-point, boolean

我的 mySQL 数据库表中有一个十进制类型的字段 (15,4)

我以前从未经历过这种情况，但如果值为 0.0000，我的 PHP if 语句将返回 true！

作为健全性检查，我什至做了：

`if(0.0000) echo "Hello World";`

果然，Hello World 回响了。这到底是怎么回事？有人有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-26T12:29:10.293

如果它是来自 DB 的浮点值，它将被视为字符串，而不是数值。你可以试试这个：

```
if(floatval($value) > 0) { ... } 
```

其中`$value`包含来自 DB 的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-26T12:01:31.147

我认为问题是你`"0.0000"`从 db 得到了一个字符串，但没有`0.0000`。

再试一次：

```
if ((int)$your_value) echo "Hello World"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-26T12:00:11.453

我的 PHP 版本（5.3.3）没有这种行为。

我建议在进行检查之前将数字转换为*bool*`if ((bool) $float)`：。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T00:27:06.657

我知道自从这个问题被打开以来已经很长时间了，但我认为它可能会对其他人有所帮助。

浮点数实际上是 的近似值`Real Number`。你会发现并不是所有的都`Real numbers`可以用浮点数来表示。这可能是您得到意外结果的原因。您应该阅读 [http://php.net/manual/en/language.types.float.php](http://php.net/manual/en/language.types.float.php)。

但是，如果您需要更高的精度，您应该考虑使用 BC Math 库的[http://php.net/manual/en/ref.bc.php](http://php.net/manual/en/ref.bc.php)。

# apache - apache重写，如何忽略子目录并传递给处理程序

> ID：10765986
> 
> 赞同：0
> 
> 时间：2012-05-26T11:56:14.127
> 
> 标签：apache, mod-rewrite

在虚拟主机环境中，希望使用处理程序。对于指定的目录，例如，`images, script`要`Apache`处理它。对于所有其他子目录，希望传递给处理程序。

一切正常，除了最后一个要求

注意：以下代码已更正并正在运行

```
<VirtualHost 127.0.1.12:80>

  DocumentRoot /var/www
  RewriteEngine On
  ServerName monitor.phiddler.nit:80
  UseCanonicalName Off

  # for robots
  RewriteCond %{HTTP_HOST} ^.
  RewriteRule \.(php|php3|cgi|asp|aspx|jsp|cf|java|do|inc)$ /var/www [N,L]

  # regular subdirs
  RewriteCond %{HTTP_HOST} monitor.phiddler.nit
  RewriteRule ^/(css|image|script|admin|ckeditor)/(.*) /data/phiddler/http/$1/$2 [L]

  # ico file is in image
  RewriteCond %{HTTP_HOST} monitor.phiddler.nit
  RewriteRule \.ico$  /data/phiddler/http/image/$1.ico [L]

  # name beginning with "." rerouted to ajax handler
  RewriteCond %{HTTP_HOST} monitor.phiddler.nit
  RewriteRule /\. /data/phiddler/http/ajax.php [L,QSA]

  # all else goes to handler
  RewriteCond %{HTTP_HOST} monitor.phiddler.nit
  RewriteRule . /data/phiddler/http/handler.php [L]

</VirtualHost> 
```

这应该很容易，但不知何故我想念它

另外，`RewriteCond`每个之前都是必要的`RewriteRule`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T08:18:08.817

已将其固定在问题本身中，以作为正确的参考

问问题的方式和代码布局不利于得到好的答案

# android - OpenGL和Android相对布局

> ID：10765989
> 
> 赞同：0
> 
> 时间：2012-05-26T11:56:30.087
> 
> 标签：android, android-layout, opengl-es

我已经尝试在[相对布局编码](https://stackoverflow.com/questions/10760674/relative-layout-coding)中提出这个问题，但第一次尝试不是很清楚。

我想创建一个相对布局，`GLSurfaceView`但布局必须如下所示：

```
<RelativeLayout
        android:id="@+id/View1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@raw/gi"
        android:orientation="vertical" >

        <ImageView
                android:id="@+id/imageView1"
                android:layout_width="64px"
                android:layout_height="64px"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:src="@drawable/b1" />

        <ImageView
                android:id="@+id/imageView2"
                android:layout_width="64px"
                android:layout_height="64px"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/imageView1"
                android:src="@drawable/b2" />

        <ImageView
                android:id="@+id/imageView3"
                android:layout_width="64px"
                android:layout_height="64px"
                android:layout_alignParentTop="true"
                android:layout_toRightOf="@+id/imageView2"
                android:src="@drawable/b3" />
</RelativeLayout> 
```

但是，如果我像他们在答案中所说的那样对其进行编码，它可以工作，但图像仍然相互重叠。（我使用 getId 函数来添加规则）

所以我正在考虑添加整个 xml 文件并以这种方式工作，但是任何时候我加载一个 xml 应用程序都会停止。这是大部分代码：

```
public class HelloWorld extends Activity {
...
protected void onCreate(Bundle savedInstanceState) {
    ....
    opengl = new GLSurfaceView(getApplication());
    opengl.setEGLConfigChooser(new GLSurfaceView.EGLConfigChooser() {
        public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display) {
              int[] attributes = new int[] { EGL10.EGL_DEPTH_SIZE, 16, EGL10.EGL_NONE};
              EGLConfig[] configs = new EGLConfig[1];
              int[] result = new int[1];
              egl.eglChooseConfig(display, attributes, configs, 1, result);
              return configs[0];
        }
    });

    renderer = new MyRenderer();
    mGLView.setRenderer(renderer);
    setContentView(opengl);
    addContentView(findViewById(R.id.View1), new RelativeLayout.LayoutParams(
              RelativeLayout.LayoutParams.FILL_PARENT,
              RelativeLayout.LayoutParams.FILL_PARENT)); 
```

请记住，如果没有对`addContentView`应用程序的最后一次调用，则可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T21:41:22.700

看来我要回答我自己的问题了。

而不是 addcontentview 我添加了以下内容

```
gi=new RelativeLayout(this);
                View view; 
        LayoutInflater inflater = (LayoutInflater)   getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
        view = inflater.inflate(R.layout.gi, null);
        hud.addView(view);
        addContentView(gi, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT)); 
```

因此，我成功地在 glsurface 视图上方添加了一个完整的 xml 文件。

但我现在想知道如何在 r.layout.gi 中获取每个孩子的 id。假设我要更改 R.id.imageView1 的图片 ??????????????

有人知道如何使用当前代码执行此操作吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-04T20:46:21.340

我知道这对我来说适用于正常的 FrameLayout。

```
 TextView counter = new TextView(getApplicationContext());
    counter.setBackgroundResource(R.drawable.counter);
    counter.setTextSize(50);
    counter.setTypeface(null, Typeface.BOLD);
    counter.setText(" 000");
    addContentView(counter, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)); 
```

# php - 如何在 MySQL 中将给定的天数转换为年、月和日？

> ID：10765995
> 
> 赞同：8
> 
> 时间：2012-05-26T11:57:18.367
> 
> 标签：php, mysql, datetime, datediff

我正在尝试获取贷款日期和支付日期之间的日期和持续时间。我使用了 PHP 日期和时间函数，但它并不总是准确的。我怎样才能在 MySQL 中准确地做到这一点？

假设两个日期，贷款日期

> 2009-05-24

和贷款归还日期

> 2012-04-30

我写了一个 MySQL 查询

```
SELECT DATEDIFF('2012-04-30', '2009-05-24') `total_days`; 
```

返回 1072 天，大约是 2 年 11 个月 12 天。

> 请不要用 PHP 代码回答，我已经尝试过了。这是代码。

下面的函数使用 PHP >= 5.3 函数并将天转换为年、月和日。

```
function date_interval($date1, $date2)
{
    $date1 = new DateTime($date1);
    $date2 = new DateTime($date2);

    $interval = date_diff($date2, $date1);
    return ((($y = $interval->format('%y')) > 0) ? $y . ' Year' . ($y > 1 ? 's' : '') . ', ' : '') . ((($m = $interval->format('%m')) > 0) ? $m . ' Month' . ($m > 1 ? 's' : '') . ', ' : '') . ((($d = $interval->format('%d')) > 0) ? $d . ' Day' . ($d > 1 ? 's' : '') : '');
} 
```

下面的函数使用 PHP >= 5.2 函数并将天转换为年、月和日。

```
function date_interval($date1, $date2)
{
    $diff = abs(strtotime($date2) - strtotime($date1));

    $years = floor($diff / (365 * 60 * 60 * 24));
    $months = floor(($diff - $years * 365 * 60 * 60 * 24) / (30 * 60 * 60 * 24));
    $days = floor(($diff - $years * 365 * 60 * 60 * 24 - $months * 30 * 60 * 60 * 24) / (60 * 60 * 24));

    return (($years > 0) ? $years . ' Year' . ($years > 1 ? 's' : '') . ', ' : '') . (($months > 0) ? $months . ' Month' . ($months > 1 ? 's' : '') . ', ' : '') . (($days > 0) ? $days . ' Day' . ($days > 1 ? 's' : '') : '');
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-26T13:30:18.693

主要问题如下：

1.  为了找到您需要使用的天数之间的差异[`datediff()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)
2.  `datediff()`返回天数的差异。
3.  为了将天数转换为日期，您可以获得需要使用的年数等 [`from_days()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_from-days)
4.  `from_days()`从文档中引用，在 1582 年之前并没有真正起作用：

    > “在旧日期上谨慎使用 FROM_DAYS()。它不适用于公历 (1582) 出现之前的值”

    最小值是 1582 年，因为这是欧洲从儒略历转换为公历的时候。

5.  0000-00-00 + 6 天是 0000-01-06，比 1582 早。

这实际上意味着 MySQL 日期函数对您毫无用处。

您要求在 MySQL 中*“准确地”*完成此操作。由于您不能使用日期功能，因此您必须自己制作。这*将是不*准确的。一年有多少天？当然并不总是 365。一个月有多少天？

我强烈建议在 PHP 中执行此操作。

但是，由于您坚持不想这样做，因此您将不得不作弊。

将日期 1600-01-01 添加到*所有内容*。然后从最后的答案中删除 1600 年、1 个月和 1 天。我只使用这个日期是因为它大于 1582 并且是一个不错的整数。任何事情都会真正起作用，但越早越好，这样你就不会遇到问题。

假设我们已经建立了下表：

```
create table dates (a date, b date);
insert into dates
values ( str_to_date('2012-04-30','%Y-%m-%d')
       , str_to_date('2012-04-24','%Y-%m-%d')
        );

insert into dates
values ( str_to_date('2012-04-30','%Y-%m-%d')
       , str_to_date('2009-05-24','%Y-%m-%d')
        ); 
```

以下查询将得到您想要的：

```
select extract(year from from_days(days)) - 1600
     , extract(month from from_days(days)) - 1
     , extract(day from from_days(days)) - 1
  from ( select to_days(a) - to_days(b) + 
                to_days(str_to_date('1600-01-01', '%Y-%m-%d')) as days
           from dates ) as b 
```

[这是一个 SQL Fiddle 来证明它](http://sqlfiddle.com/#!2/8d1a6/12)。

再一次，这真的很hacky，并不推荐。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-29T10:48:57.273

使用 MySQL 的[`TIMESTAMPDIFF()`](http://dev.mysql.com/doc/en/date-and-time-functions.html#function_timestampdiff)功能：

```
SELECT TIMESTAMPDIFF(YEAR
       , '2009-05-24'
       , '2012-04-30'
       ) AS Years,
       TIMESTAMPDIFF(MONTH
       , '2009-05-24'
           + INTERVAL TIMESTAMPDIFF(YEAR, '2009-05-24', '2012-04-30') YEAR
       , '2012-04-30'
       ) AS Months,
       TIMESTAMPDIFF(DAY
       , '2009-05-24'
           + INTERVAL TIMESTAMPDIFF(YEAR, '2009-05-24', '2012-04-30') YEAR
           + INTERVAL TIMESTAMPDIFF(YEAR, '2009-05-24', '2012-04-30') MONTH
       , '2012-04-30'
       ) AS Days 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/d41d8/783)上查看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-18T22:22:20.570

我用这个：

```
SELECT TIMESTAMPDIFF(YEAR
       , '2010-08-29'
       , '2014-09-18'
       ) AS Years,
       TIMESTAMPDIFF(MONTH
       , '2010-08-29'
           + INTERVAL TIMESTAMPDIFF(YEAR, '2010-08-29', '2014-09-18') YEAR
       , '2014-09-18'
       ) AS Months,
       TIMESTAMPDIFF(DAY
       , '2010-08-29'
           + INTERVAL TIMESTAMPDIFF(MONTH, '2010-08-29', '2014-09-18') MONTH
       , '2014-09-18'
       ) AS Days 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-26T12:11:57.190

```
SELECT DATE_FORMAT(FROM_DAYS(DATEDIFF('2012-04-30', '2009-05-24')), '%Y-%m-%d') AS `total_days` 
```

# database - PDO 不起作用。我无法从 PHP 访问 sqlite3 文件。

> ID：10765997
> 
> 赞同：0
> 
> 时间：2012-05-26T11:57:33.287
> 
> 标签：database, sqlite, pdo, php

我在 Fedora 16 fc16.x86_64 上使用 php+ apache。我正在学习 php 和 sqlite3（使用 PDO）。但是我的代码不管用。

```
<?php
    try {
    $db = new PDO('sqlite:./z4.db');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $db->prepare('SELECT * FROM users;');
    $posts = $db->execute();

        echo "test test";
        echo '<ul>';
        while ($post = $posts->fetchObject()) {
        echo '<li>' . $post->content . '</li>';
        }
        echo '</ul>';

    } catch (Exception $e) {
    die($e);
    }
?> 
```

sqlite 3 没问题，数据库文件没问题，

php -m 的输出：

```
apc
bz2
calendar
Core
ctype
curl
date
dom
ereg
exif
fileinfo
filter
ftp
gd
gettext
gmp
hash
iconv
igbinary
json
libxml
mbstring
mcrypt
memcache
memcached
mhash
mongo
mysql
mysqli
openssl
pcntl
pcre
PDO
pdo_mysql
pdo_pgsql
pdo_sqlite
pgsql
Phar
readline
Reflection
session
shmop
SimpleXML
sockets
SPL
sqlite3
standard
tokenizer
wddx
xml
xmlreader
xmlwriter
xsl
zip
zlib 
```

rpm -qa 的输出 | grep php：

```
php-pecl-apc-3.1.9-2.fc16.x86_64
php-pgsql-5.3.11-1.fc16.x86_64
php-gd-5.3.11-1.fc16.x86_64
php-5.3.11-1.fc16.x86_64
php-pear-1.9.4-5.fc16.noarch
php-pdo-5.3.11-1.fc16.x86_64
php-pecl-mongo-1.2.10-1.fc16.x86_64
php-common-5.3.11-1.fc16.x86_64
php-devel-5.3.11-1.fc16.x86_64
php-cli-5.3.11-1.fc16.x86_64
php-mbstring-5.3.11-1.fc16.x86_64
php-mysql-5.3.11-1.fc16.x86_64
php-mcrypt-5.3.11-1.fc16.x86_64
php-pecl-memcached-1.0.2-6.fc16.x86_64
php-xml-5.3.11-1.fc16.x86_64
php-pecl-memcache-3.0.6-1.fc16.x86_64
php-pecl-igbinary-1.1.1-1.fc16.x86_64 
```

在向 php.ini 添加一些扩展后，它会发出警告：模块 'xyz' 已经加载到未知 0... 所以我删除了它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T15:58:33.973

当您通过命令行执行 php 时，您通常不会执行与您的网络服务器运行相同的 php 二进制文件。它们可以是不同的版本，并且几乎总是有不同的 php.ini 和配置。

使用[phpinfo](http://www.php.net/phpinfo) () 从`script run through the webserver`. 使用它来找到要编辑的正确 php.ini 文件，然后重新启动网络服务器以确保设置更新。

打开`display_errors`并设置`error_reporting`为`E_ALL`