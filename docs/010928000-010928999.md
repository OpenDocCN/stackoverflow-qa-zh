# StackOverflow 问答 10928000-10928999

# sql-server - 将存储过程从 Firebird 迁移到 SQL Server

> ID：10928003
> 
> 赞同：1
> 
> 时间：2012-06-07T08:07:35.400
> 
> 标签：sql-server, stored-procedures, firebird

Firebird 和 SQL Server 上有数据库。我在 Firebird 中有工作存储过程。

问题是：如何将其翻译成 T-SQL 语法？

```
begin
  IF ((:PHONE_N is NULL) or (STRLEN(:PHONE_N)<1))  THEN
    BEGIN
      O_PHONE_N = NULL;
      EXIT;
    END

  IF (STRLEN(PHONE_N) > 3) THEN
    BEGIN
      O_PHONE_N = '(' || SUBSTR(:PHONE_N, 1, 3) || ') ';
      PHONE_N = SUBSTR(:PHONE_N, 4, STRLEN(:PHONE_N));
      IF (STRLEN(:PHONE_N)> 3) THEN
        begin
          O_PHONE_N = O_PHONE_N || SUBSTR(:PHONE_N, 1, 3);
          PHONE_N = SUBSTR(:PHONE_N, 4, STRLEN(:PHONE_N));
          IF (STRLEN(:PHONE_NUMBER)> 0) THEN
            O_PHONE_N = O_PHONE_N || '-' ||:PHONE_N;
        END
      ELSE
        O_PHONE_N = :O_PHONE_N || :PHONE_N;
    END
  ELSE
    O_PHONE_N = :PHONE_N;
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:54:47.967

此链接可能会有所帮助：[http ://www.firebirdsql.org/manual/migration-mssql-syntax.html](http://www.firebirdsql.org/manual/migration-mssql-syntax.html)

这可能会有所帮助：

*   前导`@`标记 T-SQL 变量（例如`@phone_n`）
*   `STRLEN``LEN()`在 T-SQL中调用
*   `SUBSTR`是`SUBSTRING`

[查看关于 T-SQL 的优秀 MSDN 文档，](http://msdn.microsoft.com/en-us/library/ms189826%28v=sql.90%29.aspx)了解有关 T-SQL 语法的更多详细信息

# java - 如何实现这个地图 > 结构

> ID：10928004
> 
> 赞同：18
> 
> 时间：2012-06-07T08:07:36.393
> 
> 标签：java, data-structures, multimap, multi-mapping

我有如下数据：

```
 Key       value
-----      ------
car         toyota
car         bmw
car         honda

fruit       apple
fruit       banana

computer    acer
computer    asus
computer    ibm 
... 
```

（上面的每一行数据都是一个**对象**，字段为“key”和“value”，都在一个 List 中`List<DataObject>`）

我想将数据构建为`Map<String, List<String>>`如下所示：

```
 "car"      : ["toyota", "bmw", "honda"]
 "fruit"    : ["apple","banana"]
 "computer" : ["acer","asus","ibm"] 
```

如何`Map`从数据对象中实现上述结构？

****** *** ******除了****** ** *** ******

 **我更感兴趣的是使用纯 JDK 提供的类或接口来实现结果，而不是使用外部库。有什么帮助吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-07T08:41:31.820

```
 Map<String, List<String>> myMaps = new HashMap<String, List<String>>();
    for (DataObject item : myList) {
        if (!myMaps.containsKey(item.getKey())) {
            myMaps.put(item.getKey(), new ArrayList<String>());
        }
        myMaps.get(item.getKey()).add(item.getValue());
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-07T08:12:03.353

我会使用番石榴`Multimap`实现。但是使用标准 JDK 也很容易实现。

## 示例标准 JDK：

```
public static void main(String[] args) {
    Scanner s = new Scanner(
            "car         toyota\n" +
            "car         bmw\n" +
            "car         honda\n" +
            "fruit       apple\n" +
            "fruit       banana\n" +
            "computer    acer\n" +
            "computer    asus\n" +
            "computer    ibm");

    Map<String, List<String>> map = new LinkedHashMap<String, List<String>>();

    while (s.hasNext()) {

        String key = s.next();
        if (!map.containsKey(key))
            map.put(key, new LinkedList<String>());

        map.get(key).add(s.next());
    }

    System.out.println(map);
} 
```

## 番石榴示例：

```
public static void main(String[] args) {
    Scanner s = new Scanner(
            "car         toyota\n" +
            "car         bmw\n" +
            "car         honda\n" +
            "fruit       apple\n" +
            "fruit       banana\n" +
            "computer    acer\n" +
            "computer    asus\n" +
            "computer    ibm");

    Multimap<String, String> map = LinkedListMultimap.create();

    while (s.hasNext()) 
        map.put(s.next(), s.next());

    System.out.println(map);
} 
```

* * *

输出（两种实现）：

```
{car=[toyota, bmw, honda], fruit=[apple, banana], computer=[acer, asus, ibm]} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T08:12:26.907

```
Map<String, List<String>> data = new HashMap<String, List<String>>();
data.put("car", Arrays.asList("toyota", "bmw", "honda"));
data.put("fruit", Arrays.asList("apple","banana"));
data.put("computer", Arrays.asList("acer","asus","ibm")); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-07T08:14:47.690

下面的代码段应该对您有所帮助。

```
HashMap<String, ArrayList<String>> map = new HashMap<String, ArrayList<String>>();

ArrayList<String> carList = new ArrayList<String>();
carList.add("toyota");
carList.add("bmw");
carList.add("honda");

map.put("car", carList);

ArrayList<String> fruitList = new ArrayList<String>();
fruitList .add("apple");
fruitList .add("banana");

map.put("fruit", fruitList ); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-07T08:11:56.317

迭代对象。对于每个对象，从地图中获取其对应的列表。如果为 null，则创建一个新列表并将其放入地图中。然后将该值添加到列表中。

或者使用[Guava 的 ListMultimap](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/com/google/common/collect/ListMultimap.html)，它会为你做到这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T08:12:44.087

大概是这样的？

```
Map<String, List<String>> dataMap = new HashMap<String, List<String>>(); 
```

伪代码：

```
for (String key : keys) {
    if (!dataMap.containsKey(key)) {
        dataMap.put(key, new ArrayList<String>());
    }

    dataMap.get(key).add(getValue(key));
} 
```

或者，使用 Guava [`ListMultiMap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ListMultimap.html)。**

# jquery - 最自然的用户评分

> ID：10928005
> 
> 赞同：0
> 
> 时间：2012-06-07T08:07:37.487
> 
> 标签：jquery

哪个系统更自然地为用户评分？

我有一个网站，人们可以在交易完成后对其他用户进行评分。

现在，我正在“经典”五星级评级系统之间做出选择，其中五星级最好，零最差。所以，它看起来像：

用户评分：4.5（加上一个 4 星半的图像）

或您键入的百分比类型评分（手动或使用滑块 jQuery UI）

人们将选择一个从 0% 到 100% 的值，结果会像经过几次投票后的样子，例如：

用户评分：96%

你更喜欢哪种方式，为什么？

您能推荐使用 jquery 进行此类投票的最多插件吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:21:30.897

“别让我思考”。这取决于您是否想以更精细的方式跟踪体验的质量，或者只是想知道某人是否更喜欢另一个人，或者只是有良好的体验。

当用户想要描绘电影、书籍或产品等事物的质量时，星星是有意义的。你所描述的听起来比这简单得多。

你可能会问评论者“你会再和这个人做生意吗？”。一个简单的复选框，是或否（如果他们愿意，您可以允许他们输入评论以解释原因）。然后你会平均说是的人数。“96% 的用户会再次与此人做生意。”。那里不需要太多插件。

无论哪种方式，绝对没有滑块、组合框、whackamole 或类似的愚蠢的东西。人们可以选中复选框（或者竖起大拇指，竖起大拇指，如果这更适合您），并且星级评分对人们来说是直观的。坚持其中任何一个。

# asp.net-mvc - 多次点击时页面响应无效

> ID：10928008
> 
> 赞同：0
> 
> 时间：2012-06-07T08:07:50.247
> 
> 标签：asp.net-mvc

当我多次点击页面时，我收到的是图像而不是页面内容。应用程序在 MVC 中开发并在 IIS 7.5 下运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:17:36.503

您应该检查“c:\Windows\System32\drivers\”下的主机文件

# facebook - JS SDK getLoginStatus 不返回 userID 也不返回 signedRequest

> ID：10928009
> 
> 赞同：3
> 
> 时间：2012-06-07T08:07:50.263
> 
> 标签：facebook, cordova, facebook-javascript-sdk

我正在使用带有 facebook 插件的 PhoneGap/Cordova。一切似乎都正常，除了 getLoginStatus 没有按照[这里](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus)和[这里](http://developers.facebook.com/docs/authentication/signed_request/)的定义工作。调用时，它返回一些数据，但不是全部：它不返回 userID 也不返回 signedRequest。这是代码：

```
FB.getLoginStatus(function(response) {
  if (response.status == 'connected') {
    var fb_uid = response.authResponse.userID;
    var fb_signedRequest = response.authResponse.signedRequest;
    alert('logged in');
  } else {
    alert('not logged in');
  }
}); 
```

userID 用省略号 (...) 填充，而 signedRequest 未定义。

我设法通过对 /me 的图形调用来获取用户 ID：

```
FB.api('/me', function(me){
  if (me.id) {
    var fb_uid = me.id;
  }
}); 
```

我无法在文档中找到任何方法来获取signed_request，我必须使用它来将facebook用户验证到用户已经与facebook连接的远程服务（我已经进行了登录调用，所以用户是好的）。基本上问题是我对 getLoginStatus 的调用返回

```
{
    status: 'connected',
    authResponse: {
        session_key: true,
        accessToken: 'a long string...',
        expiresIn:'a number',
        sig: '...',   //exactly this string
        userID:'...'  //exactly this string
        secret:'...'  //exactly this string
        expirationTime:'a long number'
    }
} 
```

而不是记录的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:21:26.643

作为背景，当使用插件进行身份验证时，JavaScript SDK API 会调用 iOS/Android SDK 来处理授权，然后将响应身份验证数据传递回 JS 部分。本机 (iOS/Android) SDK 不会收到签名请求，以便能够将其传递给 JS。这就是为什么它是空的。

如果您使用最新的插件，您至少现在应该可以看到用户 ID。六月的那个可能没有把它传回去。否则，作为一种解决方法，您可以在 JS 代码中的身份验证成功时调用 /me 端点以获取用户 ID。请参阅执行此操作的 Hackbook 示例。

# objective-c - NSConstantString 对象的唯一性

> ID：10928012
> 
> 赞同：4
> 
> 时间：2012-06-07T08:07:54.357
> 
> 标签：objective-c, nsstring

> 在源代码中创建字符串对象的最简单方法是使用 Objective-C 的 @"..." 构造：
> 
> ```
> NSString *temp = @"/tmp/scratch"; 
> ```
> 
> 请注意，以这种方式创建字符串常量时，您应该使用 UTF-8 字符。这样的对象是在编译时创建的，并且存在于程序的整个执行过程中。编译器使此类对象常量在每个模块的基础上都是唯一的，并且它们永远不会被释放，尽管您可以像处理任何其他对象一样保留和释放它们。您也可以像执行任何其他字符串一样将消息直接发送到字符串常量：
> 
> ```
> BOOL same = [@"comparison" isEqualToString:myString]; 
> ```

这是在 ObjC 文档中[创建字符串的引用。](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/CreatingStrings.html#//apple_ref/doc/uid/20000148-SW1)

我在 applicationA 中测试了不同的 @"" 字符串，以及 applicationA 使用的 libB。所有使用 string=@"..." 模式初始化且内容相同的@""都指向相同的内存地址。

因此，我不明白“每模块基础”的含义，“每模块”是什么意思？基于库？基于应用程序？基于文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T13:29:04.947

对于 Mac OS X 和 iOS 开发而言，一个模块相当于一个 .m/.mm/.c/.cpp 文件。

# python - 将成员函数作为函数 arg 传递？

> ID：10928016
> 
> 赞同：0
> 
> 时间：2012-06-07T08:08:13.897
> 
> 标签：python, sqlite, select, functional-programming, pysqlite

我为 SQLite 编写了一个非常简单的选择函数，但我对如何传递成员函数感到困惑......例如：`.fetchone()`, `.fetchmany()`.

```
def select(cursor, select="*", table="reuters", fetch=".fetchone()", tologfile=False, logfile=""):
    if tologfile:
        logfile = open(logfile, 'w')
        logfile.write(str(cursor.execute("select * from ?;".replace('?',table).replace("select * ", "select "+select)).fetchone()))
        logfile.close()
    else: return str(cursor.execute("select * from ?;".replace('?',table).replace("select * ", "select "+select)).fetchone()) 
```

**如何将此成员函数作为 arg 传递？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:23:46.323

您可以简单地传递`self.fetchone`以传递该函数。

如果您希望它作为默认值，只需`None`在函数定义中使用并添加

```
if whatever is None:
    whatever = self.fetchone 
```

在函数本身。

如果您想在另一个对象上调用该方法但`self`继续将其作为字符串传递并使用此代码（基于您的`else`代码，因为该代码更短）：

```
result = self.execute("select * from ?;".replace('?',table).replace("select * ", ("select "+attr)))
return str(getattr(result, whatever)()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:14:08.090

您可以使用 getattr ：

```
>>> class A:
...     def b(self):
...             print 'c'
... 
>>> a = A()
>>> getattr(a,'b')
<bound method A.b of <__main__.A instance at 0x7f2a24a85170>>
>>> getattr(a,'b')()
c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:16:25.593

一个 lambda 可以实现这一点

```
class A:
  def test(self):
    print "hello world"

a = A()
func = (lambda: a.test())
func() 
```

打印“你好世界”

这种技术也可以扩展到处理传递和转换参数

```
class B:
  def test(self, x):
    print x

b = B()
func = (lambda a, b : b.test(b))
func("garbage", "foo") 
```

打印“富”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:49:39.230

好的，让它工作：

```
import sqlite3

def select(self, attr="*", table="reuters", fetch=None, num=None, tologfile=False, logfile=""):
    if fetch is None:
        fetch=self.fetchone
    output=self.execute("select * from ?;".replace('?',table).replace("select * ", ("select "+attr+' ')))

    output=fetch(num) if num else fetch()

    if tologfile:
        logfile = open(logfile, 'w')
        logfile.write(str(output))
        logfile.close()
    else: return output

if __name__ == '__main__':    
    connection = sqlite3.connect('winkwinknudgenudgesaynomore.db')
    cursor = connection.cursor()
    cursor.execute("drop table reuters;")
    cursor.execute("create table reuters (foo text, bar text);")
    connection.commit()
    print select(cursor)
    print select(cursor, 'bar')
    print select(cursor, 'bar', fetch=cursor.fetchmany, num=5)
    cursor.close() 
```

# java - 从哪里获得 Java.media 包？

> ID：10928024
> 
> 赞同：0
> 
> 时间：2012-06-07T08:08:55.923
> 
> 标签：java, netbeans, applet, jcreator

我正在制作一个 java 小程序播放器。它包括 Java.Media 包，我没有得到它。在谷歌上搜索下载它，但都是徒劳的。

一段代码在这里

```
import javax.media.*;

    AxisPlayer mPlayer;
    mPlayer = new AxisPlayer(videoWidth, videoHeight, mFps,mUrl.openStream()); 
```

这是我想做的，但我没有 Javax.media 包。

所以我的问题是：

问：从哪里下载 Java.media 包以及如何从 Jcreator/NetBeans 安装它

请记住，我使用的是 JDK 1.6.0。

感谢期待帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:13:59.230

**[Java 媒体 API](http://java.sun.com/javase/technologies/desktop/media/)**

您正在寻找[java.media.*](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#7372-jmf-2.1.1e-oth-JPR)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:31:43.460

看人这里是你可以下载Java媒体框架的链接

它托管在[http://www.oracle.com/technetwork/java/javase/download-142937.html](http://www.oracle.com/technetwork/java/javase/download-142937.html)

# wpf - 从 TabControl 中的绑定源动态添加和删除 TabItem

> ID：10928026
> 
> 赞同：0
> 
> 时间：2012-06-07T08:09:05.307
> 
> 标签：wpf, data-binding, tabcontrol

我发生了一些奇怪的事情:-)

我有一个 TabControl。ItemSource 绑定到一个列表。这是 TabItemBase 的定义：

```
public class TabItemBase : UserControl
{
    #region Properties
    public virtual string TabName { get; set; }
    public virtual string TabHeader { get; set; }
    #endregion
} 
```

这是我声明 TabControl 的 XAML：

```
<TabControl ItemsSource="{Binding Views, Mode=TwoWay}" ItemContainerStyle="{StaticResource TabItemTemplate}"
            SelectedItem="{Binding SelectedView}" Name="MainTabControl" /> 
```

该样式工作正常，因为从这里开始，当我在列表中添加视图时，它可以工作，并且我在 UI 的 TabControl 中看到它。我只添加它

```
View.Add(new HomeView()); 
```

然后我添加了一个 NavigationService 来管理导航，因为它的名称非常明确:-)。这是代码：

```
public class NavigationService
{
    #region ctor
    public NavigationService(MainViewModel vm)
    {
        ViewModel = vm;
    }
    #endregion

    #region Properties
    public MainViewModel ViewModel { get; set; }
    #endregion

    #region Methods
    public void NavigateTo(string viewName)
    {
        TabItemBase view = ViewModel.Views.FirstOrDefault(v => v.TabName.Equals(viewName));

        if (view == null)
        {
            switch (viewName)
            {
                case ViewNames.Home:
                    view = new HomeView();
                    break;
                case ViewNames.Carriers:
                case ViewNames.Clients:
                    break;
                case ViewNames.Commands:
                    view = new CommandsView();
                    break;
                case ViewNames.Help:
                case ViewNames.Inputs:
                case ViewNames.Providers:
                case ViewNames.Sorts:
                case ViewNames.Users:
                    break;
                default:
                    MessageBox.Show(DefaultMessages.NavigationFailed);
                    return;
            }
            ViewModel.Views.Add(view);

            ViewModel.OnPropertyChanged("Views");
        }

        if (ViewModel.SelectedView != null && ViewModel.SelectedView.DataContext != null)
        {
            (ViewModel.SelectedView.DataContext as ViewModelBase).OnUnLoaded();
        } 
        ViewModel.SelectedView = view;
        (ViewModel.SelectedView.DataContext as ViewModelBase).OnLoaded();
    }
    #endregion
} 
```

我这样做（点击我的按钮时）：

```
NavigationService ns = new NavigationService(this);
ns.NavigateTo(ViewNames.Commands); 
```

这是行不通的。它在集合中添加了视图，但我在 UI 中看不到它。

有人可以帮我解决这个问题，因为我开始掉头发了吗？

干杯

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:23:01.893

您`TabItemBase`必须继承 from`TabItem`而不是，`UserControl`或者您必须定义一个`TabControl.ItemTemplate`.

让我知道哪种解决方案适合您。

# powershell - 在 PowerShell 中，如何测试变量是否包含数值？

> ID：10928030
> 
> 赞同：38
> 
> 时间：2012-06-07T08:09:18.220
> 
> 标签：powershell

在 PowerShell 中，如何测试变量是否包含数值？

目前，我正在尝试这样做，但它似乎总是返回`false`。

```
add-type -Language CSharpVersion3 @'
    public class Helpers {
        public static bool IsNumeric(object o) {
            return o is byte  || o is short  || o is int  || o is long
                || o is sbyte || o is ushort || o is uint || o is ulong
                || o is float || o is double || o is decimal
                ;
        }
    }
'@

filter isNumeric($InputObject) {
    [Helpers]::IsNumeric($InputObject)
}

PS> 1 | isNumeric
False 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-07T08:16:40.123

您可以检查变量是否是这样的数字：`$val -is [int]`

这适用于数值，但如果数字用引号括起来则不行：

```
1 -is [int]
True
"1" -is [int]
False 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-06-07T08:20:18.680

像这样修改您的过滤器：

```
filter isNumeric {
    [Helpers]::IsNumeric($_)
} 
```

`function`使用`$input`变量来包含管道信息，而使用包含当前管道对象`filter`的特殊变量。`$_`

编辑：

对于 powershell 语法方式，您可以只使用过滤器（无添加类型）：

```
filter isNumeric() {
    return $_ -is [byte]  -or $_ -is [int16]  -or $_ -is [int32]  -or $_ -is [int64]  `
       -or $_ -is [sbyte] -or $_ -is [uint16] -or $_ -is [uint32] -or $_ -is [uint64] `
       -or $_ -is [float] -or $_ -is [double] -or $_ -is [decimal]
} 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-06-07T20:46:19.923

如果您正在测试一个字符串的数值，那么您可以使用正则表达式和`-match`比较。否则，克里斯蒂安的回答是类型检查的一个很好的解决方案。

```
function Is-Numeric ($Value) {
    return $Value -match "^[\d\.]+$"
}

Is-Numeric 1.23
True
Is-Numeric 123
True
Is-Numeric ""
False
Is-Numeric "asdf123"
False 
```

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2017-05-10T11:06:53.087

您可以执行以下操作：

```
$testvar -match '^[0-9]+$' 
```

或者

```
$testvar -match '^\d+$' 
```

`True`如果`$testvar`是数字则返回。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2014-12-09T10:17:49.593

如果要检查字符串是否具有数值，请使用以下代码：

```
$a = "44.4"
$b = "ad"
$rtn = ""
[double]::TryParse($a,[ref]$rtn)
[double]::TryParse($b,[ref]$rtn) 
```

学分在[这里](https://social.technet.microsoft.com/Forums/windowsserver/en-US/549c9432-9708-4711-9d4b-a03b512f8c20/how-can-i-check-if-variable-is-a-letter-or-number?forum=winserverpowershell)

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2012-06-07T16:20:44.203

```
PS> Add-Type -Assembly Microsoft.VisualBasic
PS> [Microsoft.VisualBasic.Information]::IsNumeric(1.5)
True 
```

[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.information.isnumeric.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.information.isnumeric.aspx)

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-06-07T08:46:49.853

-is 和 -as 运算符需要您可以比较的类型。如果您不确定类型可能是什么，请尝试评估内容（部分类型列表）：

```
(Invoke-Expression '1.5').GetType().Name -match 'byte|short|int32|long|sbyte|ushort|uint32|ulong|float|double|decimal' 
```

无论好坏，它也可以对十六进制值起作用（Invoke-Expression '0xA' ...）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-04-02T10:12:02.843

```
filter isNumeric {
    $_ -is [ValueType]
} 
```

-

```
1 -is [ValueType]
True
"1" -is [ValueType]
False 
```

-

```
function isNumeric ($Value) {
    return $Value -is [ValueType]
}

isNumeric 1.23
True
isNumeric 123
True
isNumeric ""
False
isNumeric "asdf123"
False 
```

-

```
(Invoke-Expression '1.5') -is [ValueType] 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-05-21T20:30:23.153

```
$itisint=$true
try{
 [int]$vartotest
}catch{
 "error converting to int"
 $itisint=$false
} 
```

这更通用，因为这样您也可以测试字符串（例如从文件中读取）是否代表数字。如果您将“123”作为变量中的字符串，则使用 -is [int] 的其他解决方案会导致错误。这也适用于具有较旧 powershell 然后 5.1 的机器

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-01-10T20:55:58.720

感谢所有为这个线程做出贡献并帮助我弄清楚如何测试数值的人。我想发布关于如何处理负数的结果，供那些在搜索时也可能找到此线程的人...

注意：由于使用了 Trim()，我的函数需要传递一个字符串。

```
function IsNumeric($value) {
# This function will test if a string value is numeric
#
# Parameters::
#
#   $value   - String to test
#
   return ($($value.Trim()) -match "^[-]?[0-9.]+$")
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-01-06T18:42:07.500

我在使用 read-host 进行输入验证时遇到了这个主题。如果我尝试将变量的数据类型指定为 read-host 命令的一部分，并且用户输入了该数据类型以外的内容，则 read-host 会出错。这就是我解决这个问题并确保用户输入我想要的数据类型的方法：

```
do
    {
    try
        {
        [int]$thing = read-host -prompt "Enter a number or else"
        $GotANumber = $true
        }
    catch
        {
        $GotANumber = $false
        }
    }
until
    ($gotanumber) 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-06T21:19:25.627

```
"-123.456e-789" -match "^\-?(\d+\.?\d*)(e\-?\d+)?$|^0x[0-9a-f]+$" 
```

或者

```
"0xab789" -match "^\-?(\d+\.?\d*)(e\-?\d+)?$|^0x[0-9a-f]+$" 
```

将检查数字（整数、浮点数和十六进制）。

请注意，这不包括逗号/点用作千位分隔符的情况。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-08-18T10:20:23.880

每种数字类型都有自己的值。请参阅 TypeCode 枚举定义： [https](https://docs.microsoft.com/en-us/dotnet/api/system.typecode?view=netframework-4.8) ://docs.microsoft.com/en-us/dotnet/api/system.typecode?view=netframework-4.8 根据此信息，您所有的数字类型值都在 5 到15\. 这意味着，您可以像这样编写条件检查：

```
$typeValue = $x.getTypeCode().value__
if ($typeValue -ge 5 -and $typeValue -le 15) {"x has a numeric type!"} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-02-18T02:40:20.183

测试一个值是数字还是数字值的字符串表示形式。

```
function Test-Number 
{
    Param
    (
        [Parameter(Mandatory=$true,
                   Position=0)]
        [ValidatePattern("^[\d\.]+$")]
        $Number
    )

    $Number -is [ValueType] -or [Double]::TryParse($Number,[ref]$null)
} 
```

测试一个值是否为数字。

```
function Test-Number 
{
    Param
    (
        [Parameter(Mandatory=$true,
                   Position=0)]
        [ValidatePattern("^[\d\.]+$")]
        $Number
    )

    $Number -is [ValueType]
} 
```

# php - Javascript encodeURIComponent 重定向问题

> ID：10928034
> 
> 赞同：0
> 
> 时间：2012-06-07T08:09:35.740
> 
> 标签：php, javascript, jquery, encodeuricomponent

我有一个与 jquery 和 php 一起使用的搜索框，当您在此搜索框中输入内容时，jquery 会准备一个查询并重定向位置。准备查询部分效果很好，但重定向部分的编码查询存在问题。页面在重定向之前自动解码编码的查询。

如果您在搜索框中键入“test1 test2 test3”，它会使用 encodeURIComponent() 成功地将查询编码为 test1%20test2%20test3。

现在页面将自己重定向到 result.php+query。我的问题是页面转到 result.php?q=test1 test2 test3 而不是 result.php?q=test1%20test2%20test3。

这是代码

```
 if($("#searchbox").val() != "")
 {
    var mq1 = encodeURIComponent($("#searchbox").val());
    var query = "q="+mq1;

 }

 alert(query);
 if(query!="")
 location = "result.php?"+query; 
```

警报结果是 q=test1%20test2%20test3 但结果是 result.php?q=test1 test2 test3

编辑：如果我使用带有重定向代码的 encodeURIComponent 函数，它工作得很好。

```
 alert(query);
 if(query!="")
 location = "result.php?"+encodeURIComponentquery); 
```

这些代码正在工作，但它也编码 q= 部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:14:20.137

我想也许只是`test1 test2 test3`地址栏中显示了浏览器，但服务器获得了正确的值。您可以通过诸如 firebug 之类的浏览器开发工具进行检查，甚至可以在服务器中进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:19:28.900

为什么不改成`result.php?q=+encodeURIComponent(query)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:23:44.807

既然您使用的是 jQuery，为什么不直接写这个：

```
if ($("#searchbox").val()) {
    location = 'result.php?' + $.param({
        q: $("#searchbox").val()
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:26:00.843

这是您编写的内容的变体-在输入查询后等待回车键被击中（因为我不确定您的代码的上下文，它是否位于表单的提交方法中）：

```
$('#searchbox').keypress(function(e) {
   if(e.which == 13 && $(this) {
       $(this).blur();
       var mq1 = encodeURIComponent($(this).val());
       var query = "q="+mq1;
       window.location = "result.php?"+ query;
   }
}); 
```

使用它，它会创建以下 URL：

```
result.php?q=multiple%20words%20in%20the%20url%20work%20fine 
```

我认为您的代码几乎就在那里，但是围绕 IF 语句的逻辑引起了问题。

# php - 在 PHP 中解析具有多个同名属性的 XML 文件中的数据

> ID：10928036
> 
> 赞同：3
> 
> 时间：2012-06-07T08:09:37.850
> 
> 标签：php, xml, parsing

我正在尝试从下面的 XML 中解析数据（我大大缩短了数据以举例说明数据的外观）。

对于每个属性，我需要将数据存储在单独的数组中。

XML 文件

```
<report>
    <title>Resolution Times (Jun 07 00:21)</title>
    <sets>
        <set>
            <legend>Solved in Less than 2 Hours</legend>
            <values>
                <value data="8702" date="2012-05-24"/>
                <value data="8741" date="2012-05-25"/>
                <value data="8741" date="2012-05-26"/>
                <value data="8741" date="2012-05-27"/>
            </values>
        </set>
        <set>
            <legend>Solved in Less than 24 Hours</legend>
            <values>
                <value data="36990" date="2012-05-24"/>
                <value data="37094" date="2012-05-25"/>
                <value data="37096" date="2012-05-26"/>
                <value data="37144" date="2012-05-27"/>
            </values>
        </set>
    </sets>
</report> 
```

下面是我正在尝试读取数据的一些测试代码。出于测试目的，我只是打印出来看看实际提取了哪些数据。

```
$verifyReport = new SimpleXMLElement('305262.xml', null, true);
$testing = $verifyReport->sets->set->values->value;

echo '<ol>';
foreach($testing as $data)
{
    echo '<li>',
    $data['data'].PHP_EOL;
    echo '</li>';
}

echo '</ol>';

$testing1 = $verifyReport->sets->sets->values->value;

echo '<ol>';
foreach($testing1 as $data2)
{
    echo '<li>',
    $data2['data'].PHP_EOL;
    echo '</li>';
}

echo '</ol>'; 
```

下面是数据的输出

```
1\. 8702
2\. 8741
3\. 8741
4\. 8741

Warning: Invalid argument supplied for foreach() in 
/Applications/XAMPP/xamppfiles/htdocs/tango/test.php on line 23 
```

我能够提取第一组（在不到 2 小时内解决）好的，但是当我尝试从第二组中提取数据（在不到 24 小时内解决）时，我得到了上述错误。

任何人都可以帮助纠正这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:20:21.967

在第二个街区你有`$testing1 = $verifyReport->sets->sets->values->value;`所以我想第二个`sets`必须`set`代替。但是无论如何，为什么不迭代`$verifyReport->sets`并读取 for 循环中的更多值呢？

```
new SimpleXMLElement('305262.xml', null, true);
foreach ($verifyReport->sets->set as $set) {
    echo '<ol>';
    foreach ($set->values->value as $data) {
        echo '<li>',
        $data['data'] . PHP_EOL;
        echo '</li>';
    }
    echo '</ol>';
} 
```

# c# - 无法投射类型的对象，绘图项

> ID：10928039
> 
> 赞同：0
> 
> 时间：2012-06-07T08:09:40.387
> 
> 标签：c#, winforms

如何解决问题如下：

当我drawItem，然后得到消息错误：“无法将'System.Collections.Generic.List`1[mypro.InfoDialog+Mycontact]'类型的对象转换为'Mycontact'。”

行号处的 C# 代码：

```
public class Mycontact
{
        public string P_DISPLAY_NAME    { get; set; }
        public string P_AVAILABILITY    { get; set; }
        public string P_AVATAR_IMAGE    { get; set; }
}

Mycontact fbContact;

private void AddDataToList()
{
    var fbList = new List<Mycontact>();
    foreach (dynamic item in result.data)
    {
        fbContact = new Mycontact() { P_DISPLAY_NAME = (string)item["name"], P_AVAILABILITY = (string)item["online_presence"]};
        fbList.Add(fbContact);
        listBox1.Items.Add(fbList);
    }
}

private int mouseIndex = -1;

private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
{

    if (e.Index == -1) return;

    line number:
    Mycontact contact = (Mycontact)listBox1.Items[e.Index];

    Brush textBrush = SystemBrushes.WindowText;
        if (e.Index > -1)
        {
            // Drawing the frame
            if (e.Index == mouseIndex)
            {
                e.Graphics.FillRectangle(SystemBrushes.HotTrack, e.Bounds);
                textBrush = SystemBrushes.HighlightText;
            }
            else
            {
                if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
                {
                    e.Graphics.FillRectangle(SystemBrushes.Highlight, e.Bounds);
                    textBrush = SystemBrushes.HighlightText;
                }else{
                    e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds);
                }
                // Drawing the text
                e.Graphics.DrawString(contact.P_DISPLAY_NAME, e.Font, textBrush,    e.Bounds.Left + 20, e.Bounds.Top);
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:14:10.133

似乎整个列表被添加到 listbox1 而不是单个项目 (listBox1.Items.Add(fbList))

不应该是：

```
listBox1.Items.Add(fbContact); 
```

或者，您可以在循环后设置 listBox1.DataSource = fbList

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:15:47.533

您正在将完整列表作为单个项目添加到列表框中：

`listBox1.Items.Add(fbList);`

所以这条线

`(Mycontact)listBox1.Items[e.Index];`

返回 MyContact 对象的列表，而不是单个 MyContact 对象。

因此，要修复它，您可以像这样将每个联系人的联系人添加到列表中

`listBox1.Items.Add(fbContact);`

# coldfusion - 用于 Xero 包装器的 ColdFusion oAuth RSA-SHA1 授权

> ID：10928044
> 
> 赞同：1
> 
> 时间：2012-06-07T08:10:02.977
> 
> 标签：coldfusion, oauth, rsa

我正在为 Xero API 编写一个包装器，使用 oAuth 和两条腿身份验证。正如 Xero 所说，它是一个“私人”应用程序，需要 RSA-SHA1 签名。Coldfusion oAuth 包装器没有在 RSA-SHA1 中加密的功能，只有 HMAC-SHA1。我们在CF9上。

因此，在运行 GET 请求的过程中，我收到以下错误：

```
signature_method_rejected
Private applications must use the RSA-SHA1 signature method 
```

因此，看起来 GET 调用正在工作，但问题在于签名方法。我发现我认为看起来像某人创建的解决方案，如下所示：

```
<cffunction name="rsa_sha1" returntype="string" access="public" descrition="RSA-SHA1 computation based on supplied private key and supplied base signature string.">
               <cfargument name="signKey" type="string" required="true" hint="base64 formatted PKCS8 private key">
               <cfargument name="signMessage" type="string" required="true" hint="msg to sign">
               <cfargument name="sFormat" type="string" required="false" default="UTF-8">

               <cfset var jKey = JavaCast("string", arguments.signKey)>
               <cfset var jMsg = JavaCast("string",arguments.signMessage).getBytes(arguments.sFormat)>

               <cfset var key = createObject("java", "java.security.PrivateKey")>
               <cfset var keySpec = createObject("java","java.security.spec.PKCS8EncodedKeySpec")>
               <cfset var keyFactory = createObject("java","java.security.KeyFactory")>
               <cfset var b64dec = createObject("java", "sun.misc.BASE64Decoder")>

               <cfset var sig = createObject("java", "java.security.Signature")>

               <cfset var byteClass = createObject("java", "java.lang.Class")>
               <cfset var byteArray = createObject("java","java.lang.reflect.Array")>

               <cfset byteClass = byteClass.forName(JavaCast("string","java.lang.Byte"))>
               <cfset keyBytes = byteArray.newInstance(byteClass, JavaCast("int","1024"))>
               <cfset keyBytes = b64dec.decodeBuffer(jKey)>
               <!--- keyBytes = 48-111-10345-125-5349-114-581835-28-330-3984120-2848-4384-1-43 --->

               <cfset sig = sig.getInstance("SHA1withRSA", "SunJSSE")>
<!--- error occurs on the line below --->
               <cfset sig.initSign(keyFactory.getInstance("RSA").generatePrivate(keySpec.init(keyBytes)))> 
               <cfset sig.update(jMsg)>
               <cfset signBytes = sig.sign()>

               <cfreturn ToBase64(signBytes)>
         </cffunction> 
```

它接收以下参数：

```
SFORMAT     UTF-8
SIGNKEY     0JxxxxxxxxxxxxxxxxxxxP&
SIGNMESSAGE     GET&https%3A%2F%2Fapi.xero.com%2Fapi.xro%2F2.0%2FContacts&contactid%3D%26contactnumber%3D%26name%3D7-Eleven%26oauth_consumer_key%3Dxxxxxxxxxxxxxxxx%26oauth_nonce%3Dxxxxxxxxxxxxxxxx%26oauth_signature_method%3DRSA-SHA1%26oauth_timestamp%3D1339055484%26oauth_version%3D1.0 
```

但是，这会产生以下错误：

```
Could not read BER data.(ASN1Lengths.determineLengthLen: length greater than 0x7FFF,FFFF.)

ColdFusion cannot determine the line of the template that caused this error. This is often caused by an error in the exception handling subsystem. 
```

任何人都可以对此有所了解吗？

**编辑 - -**

![在此处输入图像描述](../Images/9ff08ff2c8461fe109e3e7a24d074ac0.png)

有一个上传公共证书的链接，我做了。还有一个注释说：“注意，对于私有应用程序，消费者令牌和秘密也用作访问令牌和秘密。”。所以我假设我需要那里显示的“消费者秘密”值才能签署请求。在这种情况下，如何将该密钥值转换为 RSA-SH1 格式的签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T02:31:00.540

（评论总结）

根据[他们的 API](http://blog.xero.com/developer/api-overview/setup-an-application/#private-apps) ，私有应用程序必须生成一个 RSA 公共/私有对（一次性事件）。然后，您将*公共*证书上传到他们的服务器，并使用私钥使用 RSA-SHA1 对所有请求进行签名。如果您按照他们链接中的说明进行操作，您的私钥将采用`PEM`格式，它只是以 base64 编码的键值，包含在 BEGIN/END 包装器中：

```
 -----BEGIN RSA PRIVATE KEY-----
    xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
    ....
    -----END RSA PRIVATE KEY----- 
```

在将密钥与 . 一起使用之前，您需要提取包装器之间的部分`PKCS8EncodedKeySpec`。至少有三种方法可以做到这一点。最简单的选择是使用字符串函数：

```
 // read in the  key file and remove the wrapper
    pathToKey = "c:/path/to/file/privateKey.pem";
    rawKey = FileRead( pathToKey );
    rawKey = replace( rawKey, "-----BEGIN RSA PRIVATE KEY-----"& chr(10), "" );
    rawKey = replace( rawKey, "-----END RSA PRIVATE KEY-----", "" );

    yourMessage = "GET&https%3A%2F%2Fapi.xero.com%2Fapi.xro%2F2.0%2F...";
    signature = rsa_sha1( rawKey, yourMessage, "utf-8" ); 
```

另一种选择是使用 BouncyCastle [PEMReader](http://www.bouncycastle.org/docs/docs1.6/org/bouncycastle/openssl/PEMReader.html)类。它为您完成所有工作（并且还支持受密码保护的密钥）。

```
 pathToKey  = "c:/path/to/file/privateKey.pem";
    provider   = createObject("java", "org.bouncycastle.jce.provider.BouncyCastleProvider").init();
    security   = createObject("java", "java.security.Security").addProvider( provider );
    fileReader = createObject("java", "java.io.FileReader").init( pathToKey );
    keyReader  = createObject("java", "org.bouncycastle.openssl.PEMReader").init( fileReader);
    privateKey = keyReader.readObject().getPrivate();
    rawKey     = binaryEncode( privateKey.getEncoded(), "base64" );
    yourMessage = "GET&https%3A%2F%2Fapi.xero.com%2Fapi.xro%2F2.0%2FContacts&....";
    signature  = rsa_sha1( rawKey, yourMessage, "utf-8" ); 
```

另一种选择是[使用 openssl 将密钥转换为 DER 格式](https://stackoverflow.com/questions/8451131/read-private-key-in-der-format-java)

```
 $ openssl pkcs8 -topk8 -in privateKey.pem -outform DER -nocrypt -out privateKey.pk8

    pathToKey = "c:/path/to/file/privateKey.pk8";
    bytes = binaryEncode( fileReadBinary(pathToKey), "base64");
    yourMessage = "GET&https%3A%2F%2Fapi.xero.com%2Fapi.xro%2F2.0%2F...";
    signature = rsa_sha1(rawKey, testMessage, "utf-8"); 
```

**注意**如果您在此处（或其他论坛）发布了您的实际私钥，则它已被泄露。所以我强烈建议生成新密钥。

# blackberry - 用于黑莓开发的 WebWorks

> ID：10928045
> 
> 赞同：0
> 
> 时间：2012-06-07T08:10:04.463
> 
> 标签：blackberry, blackberry-webworks

我有一个使用WebWorks 为Blackbery 开发的想法，但是WebWorks 适合从哪个操作系统。我知道WebWorks 适合5.0 及更高版本的操作系统。

但是在 5.0 本身中，当使用 java 开发进行开发时，我无法在 5.0 的网页（浏览器字段）中使用 javascript 显示谷歌地图，但它在 6.0 中显示路线图但在加载时挂起，在 7.0 操作系统中，没关系，

因此，虽然我在使用 WebWorks 进行开发时遇到了类似的问题。

我不是 Web 开发人员，我对这些 Web 开发的东西一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:37:07.127

是的，它适用于 OS 5 及更高版本，在 WebWorks 中开发可以完全支持 javascript。但它可能会在 OS 5 上显示一些滞后和错误，但在 OS 6 和 7 上运行良好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:23:09.877

os 5 和 6 不支持大多数功能，因此从 os 7 开始，webworks 适合开发。例如，OS 5 和 6 不支持 Videoplayer 和 InAppPurchase。

# java - AppEngine ChannelAPI 警告：找不到文件：/_ah/channel/connected/

> ID：10928048
> 
> 赞同：0
> 
> 时间：2012-06-07T08:10:30.027
> 
> 标签：java, google-app-engine, channel-api

在我的 web.xml

```
<servlet>
    <servlet-name>channelConnected</servlet-name>
    <servlet-class>ChannelConnected</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>channelConnected</servlet-name>
    <url-pattern>/_ah/channel/connected</url-pattern>
</servlet-mapping> 
```

我的小服务程序

```
public class ChannelConnected extends HttpServlet{

    private static final long serialVersionUID = 1L;

    protected void doPost(HttpServletRequest req, HttpServletResponse resp) 
            throws ServletException, IOException{
          System.out.println("hello world");
    }

} 
```

我总是收到这个错误：

```
WARNING: No file found for: /_ah/channel/connected/ 
```

我的请求处理程序有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:25:06.537

在 url 模式中添加反斜杠使其工作。

```
<url-pattern>/_ah/channel/connected/</url-pattern> 
```

# spring-mvc - AOP 是否违反了企业应用程序的分层架构？

> ID：10928056
> 
> 赞同：0
> 
> 时间：2012-06-07T08:11:02.523
> 
> 标签：spring-mvc, aop, n-tier-architecture

这个问题（如标题中所述）出现在我面前，因为最近我正在研究带有注释支持的 Spring MVC 3.1，并且还在为即将到来的项目考虑 DDD。在新的 Spring 中，任何带有业务方法的 POJO 都可以被注释为控制器，我在 Controller 类中解决的所有问题都可以通过注释来表达。

所以，从技术上讲，我可以采用任何类并将其连接为控制器，java 代码不受任何控制器特定代码的影响，因此 java 代码可以处理诸如检查安全性、启动 txn 等事情。所以这样的类属于表示层或应用层？？

更进一步，我们可以提取安全性、txn mgmt 之类的内容并通过注释来表达它们，因此 java 代码现在是域对象的代码。这是否意味着我们已经将 2 层融合在一起了？请说清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:38:37.563

您不能将任何 POJO 用作控制器。控制器的工作是从浏览器获取输入，调用服务，为视图准备模型，并返回视图以进行调度。它仍然是一个控制器。不是通过 XML 和方法覆盖来配置它，而是通过注释来配置它，仅此而已。

该代码与任何控制器特定代码相去甚远。它仍然使用 ModelAndView、BindingResult 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:43:12.420

关于 AOP，我将接近问题的标题：

AOP 不违反“分层架构”，特别是因为根据定义，它添加了应用程序范围的功能，*而不管*功能在哪个层中使用。规范的 AOP 示例是日志记录：不是一个层，而是一个功能——所有层都这样做记录。

要将 AOP 与您的问题联系起来，请考虑事务管理，这可以通过 Spring 的 AOP 机制处理。“事务”本身并不特定于任何层，尽管任何给定的应用程序可能只*需要*单层中的事务。在这种情况下，AOP 不会违反分层架构，因为它只应用于单个层。

在事务可能跨层 IMO 的应用程序中，它仍然不违反任何分层原则，因为事务所*在*的位置并不真正相关：重要的是“这块功能必须是事务性的”。即使该事务跨越多个应用程序边界。

实际上，我会说在这种情况下使用 AOP 会特别*保留*层，因为 TX 代码不会在所有这些层中机械地复制，并且没有单个层需要怀疑 (a) 它是否在事务上下文中被调用, 或 (b)它位于*哪个*事务上下文中。

# asp.net-mvc - WIF 不适用于 ASP.NET MVC 4

> ID：10928061
> 
> 赞同：3
> 
> 时间：2012-06-07T08:11:33.553
> 
> 标签：asp.net-mvc, forms-authentication, asp.net-mvc-4, wif

我的 Windows Identity Foundation 与 MVC 3 配合得很好。但是，在 MVC 4 中，WIF 似乎没有机会处理未授权响应并重定向到 STS - 相反，我被重定向到 login.aspx，这很好形成身份验证。

在 MVC 3 中，我曾经在 web.config 中禁用表单身份验证，但它在 MVC 4 中不起作用。

我知道 MVC 4 中的身份验证和授权发生了变化，但我的 Google 技能似乎已经抛弃了我，我似乎无法找到如何阻止表单身份验证干扰。任何指针？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T08:39:45.380

嗬！在这里回答我自己的问题。您所要做的就是通过在 web.config 中添加一个删除元素来删除表单身份验证模块。

```
<modules>
    <remove name="FormsAuthentication" />
</modules> 
```

我之前实际上已经尝试过，但使用了错误的字符串：“FormsAuthenticationModule”。我希望这可以帮助其他正在休息的人。:)

# android - 使 MyLocationOverlay 指南针指向特定位置

> ID：10928064
> 
> 赞同：0
> 
> 时间：2012-06-07T08:11:47.513
> 
> 标签：android, location, compass-geolocation, mylocationoverlay

我正在尝试使`MyLocationOverlay`指南针指向特定位置。我想显示从当前用户位置到给定位置的方向。到目前为止，我已经设法计算出一个方向并将其传递给`MyLocationOverlay`. 但是指南针箭头开始混乱地指向不同的位置。有时它指向正确的方向，但通常它完全是胡说八道。

有没有办法让指南针正常工作？

这就是我计算活动方向的方式

```
 @Override
    public void onSensorChanged(SensorEvent event) {
        if(location != null && carOverlay.size() > 0 
                && !map.getUserOverlay().isPointingToNorth()) {

            float azimuth = event.values[0];
            azimuth = azimuth * 180 / (float) Math.PI;
            GeomagneticField geoField = new GeomagneticField(
                    Double.valueOf(location.getLatitude()).floatValue(),
                    Double.valueOf(location.getLongitude()).floatValue(),
                    Double.valueOf(location.getAltitude()).floatValue(),
                    System.currentTimeMillis());
            azimuth += geoField.getDeclination();

            GeoPoint point = carOverlay.getItem(0).getPoint();
            Location target = new Location(provider);
            float lat = (float) (point.getLatitudeE6() / 1E6f);
            float lon = (float) (point.getLongitudeE6() / 1E6f);
            target.setLatitude(lat);
            target.setLongitude(lon);

            float bearing = location.bearingTo(target);
            float direction = azimuth - bearing;

            map.getUserOverlay().putCompassDirection(direction);
        }
    } 
```

这是我的自定义叠加层中的覆盖方法

```
@Override
    protected void drawCompass(Canvas canvas, float bearing) {
        if(pointToNorth) {
            super.drawCompass(canvas, bearing);
        }
        else {
            super.drawCompass(canvas, compassDirection);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:24:54.280

为什么你自己计算你的“方位角”？MyLocationOverlay 持有方法 getOrientation() 为您提供方位角。我绝对会`onSensorChanged`保持不变，让`MyLocationOverlay`计算为你。通常要正确绘制指南针，您只需致电`enableCompass()`

# github - 如何在 github 中查看本地未提交的更改

> ID：10928075
> 
> 赞同：2
> 
> 时间：2012-06-07T08:12:35.580
> 
> 标签：github, gitk

在我们公司，我们使用的是 git。
如果我有一些文件不存在并且我运行 command `gitk`，我可以看到带有描述的红点：

```
Local uncomitted changes, not checked in to index 
```

现在我在 GitHub 中创建新的存储库，因为我想更有效地使用这个工具。
但是在这里，当我有一些未提交的文件时，我运行时看不到任何红点`gitk`。
有一些选项如何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:38:58.343

如[本线程](http://git.661346.n2.nabble.com/Local-uncommitted-changes-not-checked-in-to-index-with-gitk-td721528.html)所述，在以下情况下可能会发生这种情况：

> 您在不区分大小写的文件系统上。
> linux 内核源代码需要区分大小写的文件系统，因为源代码包含以下两个文件：

```
include/linux/netfilter/xt_connmark.h
include/linux/netfilter/xt_CONNMARK.h 
```

由于 GitHub 位于*区分大小写*的文件系统上，因此不会受到此问题的影响（因此没有“红点”）。

# linux - 将 JBoss 作为 Windows 服务运行有什么用？

> ID：10928078
> 
> 赞同：0
> 
> 时间：2012-06-07T08:12:40.247
> 
> 标签：linux, jboss, windows-services

将 JBoss 作为 Windows 服务运行而不是从 run.bat 运行有什么优势吗？我正在运行 JBoss 4.0.3。

我对 Windows 不是很熟悉，所以如果有人可以解释 Windows 服务的用途或 Linux 等价物是什么，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:46:40.137

从我的观点来看，主要的好处是 jboss 会在操作系统启动时自动启动。否则，您至少必须登录，即使它可以作为登录开始事件启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:47:44.367

主要区别在于 JBoss 的启动时间。使用 run.bat 意味着必须有人登录才能启动它，这对于 24x7 服务器软件来说并不理想。作为 Windows 服务，JBoss 将在 PC 启动时自动启动，无需任何人登录（或任何其他人为干预）。

[在Windows 服务常见问题解答](http://www.coretechnologies.com/WindowsServices/FAQ.html)中了解有关 Windows 服务优势（和特性）的更多信息。

# c# - 将数据类型 varchar 转换为浮点数时出错。准备声明

> ID：10928084
> 
> 赞同：1
> 
> 时间：2012-06-07T08:13:03.370
> 
> 标签：c#, sql-server-2008

我一直在寻找解决方案，但到目前为止，尽管其他一些人有类似的问题，但没有发现任何可行的方法。我正在使用以下代码运行 SQL 语句（对可怕的格式感到抱歉。这就是我们在这里使用的）：

```
 /// <summary>
    /// Executes a prepared statement with the parameters passed to AddParameter(parameterName, parameterValue) and creates a recordset.
    /// </summary>
    /// 
    /// <param name="sqlQuery">The sql statement to execute.</param>
    public DbStandardResponseType ExecutePreparedStatementWithParametersQuery (string sqlQuery)
        {
        DbStandardResponseType dbFactoryResponse = new DbStandardResponseType();

        if (String.IsNullOrEmpty (sqlQuery))
            {
            dbFactoryResponse.ExceptionMessage = "No query string passed.";
            dbFactoryResponse.Success = false;
            dbFactoryResponse.UserFriendlyMessage = "No query string passed.";

            return dbFactoryResponse;
            }

        try
            {
            //attempt to prepare our connection
            dbFactoryResponse = PrepareConnection();

            if (!dbFactoryResponse.Success)
                {
                return dbFactoryResponse;
                }

            m_dbFactoryDatabaseCommand.CommandText = sqlQuery;
            m_dbFactoryDatabaseCommand.CommandType = CommandType.Text;

            if (m_parameterName.Count != 0)
                {
                for (int i = 0; i < m_parameterName.Count; i++)
                    {
                    //create a new parameter object and assign its values before adding it to the connection object
                    DbParameter parameter = m_dbFactoryDatabaseCommand.CreateParameter();
                    parameter.Value = m_parameterValue[i];
                    parameter.ParameterName = m_parameterName[i];
                    m_dbFactoryDatabaseCommand.Parameters.Add (parameter);
                    }

                m_parameterName.Clear();
                m_parameterValue.Clear();
                }

            m_hasRecordSet = true;

            *****Error appears on this line inside the reader object*****

            m_dbFactoryDatabaseDataReader = m_dbFactoryDatabaseCommand.ExecuteReader();

            dbFactoryResponse.ExceptionMessage = "";
            dbFactoryResponse.Success = true;
            dbFactoryResponse.UserFriendlyMessage = "OK";

            return dbFactoryResponse;
            }
        catch (Exception ex)
            {
            if (m_queueErrors)
                {
                m_queuedErrorsList.AppendLine (ex.Message);
                m_queuedErrorsList.AppendLine ("\r\n\r\nPrepared Statement: " + sqlQuery);
                m_queuedErrorsList.AppendLine();

                m_queuedErrorCount++;

                dbFactoryResponse.ExceptionMessage = m_queuedErrorsList.ToString();
                dbFactoryResponse.Success = false;
                dbFactoryResponse.UserFriendlyMessage = "Execute failed on the database.";
                }
            else
                {
                dbFactoryResponse.ExceptionMessage = ex.Message;
                dbFactoryResponse.Success = false;
                dbFactoryResponse.UserFriendlyMessage = "Execute failed on the database.";
                }

            try
                {
                Close();
                }
            catch (Exception f)
                {
                dbFactoryResponse.ExceptionMessage = f.Message + "\r\n\r\nPrepared Statement: " + sqlQuery;
                dbFactoryResponse.Success = false;
                dbFactoryResponse.UserFriendlyMessage = "Failed to close the connection to the database.";
                }

            return dbFactoryResponse;
            }
        } 
```

查询如下（用替换的值）：

```
select CONTRIBUTO, count(*) as CountCol 
from HA_WITHOUT_SCOTLAND 
where 
GEOMETRY.STIntersects(geometry::STGeomFromText('POLYGON((-25.43623984375 44.257784519021, 21.62918984375 44.257784519021, 21.62918984375 60.752403080295, -25.43623984375 60.752403080295, -25.43623984375 44.257784519021))', 4326)) = 1 
group by CONTRIBUTO 
```

CONRIBUTO 列是 varchar(max) GEOMETRY 列是几何数据类型

当我直接在数据库上运行该语句时，它运行没有错误并返回我所期望的。

当我通过 C# 运行它但是使用准备好的语句（从 C# 代码中的表中获得）时，会产生错误。传入的参数如下：

```
@5 = -25.43623984375 double
@6 = 44.257784519021 double
@7 = 21.62918984375  double
@8 = 60.752403080295 double 
```

没有替换值的查询如下：

```
select CONTRIBUTO, count(*) 
from HA_WITHOUT_SCOTLAND
where STIntersects(GEOMETRY, geometry::STGeomFromText('POLYGON(('+@5+' '+@6+', '+@7+' '+@6+', '+@7+' '+@8+', '+@5+' '+@8+', '+@5+' '+@6+'))', 4326)) = 1 
group by CONTRIBUTO 
```

鉴于列和参数是正确的数据类型，我在这里看不到任何会产生此错误的地方。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:19:28.560

问题归结为以下部分：

```
'POLYGON(('+@5+'... 
```

这将尝试将文本`POLYGON(('`转换为浮点数，以使其与`@S`参数匹配（以便可以添加它们）。

相反，您可以尝试将每个参数包装在 a`CONVERT`中，例如：

```
'POLYGON(('+CONVERT(VARCHAR(100),@5)+'... 
```

一切都将是`+`运算符的字符串，它将连接它们。

在您的替换版本中，您已经自己处理了到 varchar 的转换，所以没有问题。

# java - java将字符串中的双精度值解析为文字值

> ID：10928091
> 
> 赞同：1
> 
> 时间：2012-06-07T08:13:27.670
> 
> 标签：java

如何将字符串解析为文字双精度值？我有一组我正在解析的概率值`Double.valueOf(probabilityString)`，需要精确地求和`1.0d`。

例如，双精度值的总和是`0.999999...`当概率字符串为 时`0.2, 0.5, 0.2, 0.1`。

我想要的是将双精度值解析为`0.2d, 0.5d, 0.2d, 0.1d`，这可能吗？

我正在处理一个接受作为参数的第三方库，`double[]`如果双精度值不精确地总结为`1.0d`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:16:25.740

双打只有 64 位长。有无穷多个实数。因此，不可能将每个实数精确地表示为 64 位双精度数。所以使用双打总是会导致近似的结果。如果您需要绝对精度，请使用 BigDecimal。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:16:58.607

使用Java 中可用的[BigDecimal](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigDecimal.html)。

看到[这个链接](https://stackoverflow.com/questions/8891318/bigdecimal-error)，它一定会对你有所帮助。

如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:32:17.853

尝试这个：

```
DecimalFormat df =(DecimalFormat)NumberFormat.getInstance(); 
df.setParseBigDecimal(true); 
BigDecimal bd = (BigDecimal) df.parse(probabilityString); 
```

# string - 较少“活跃”的emacs字符串突出显示？

> ID：10928102
> 
> 赞同：0
> 
> 时间：2012-06-07T08:14:23.447
> 
> 标签：string, emacs, syntax-highlighting

问题是，当我键入 ' 或 " （在包括 java、python、ruby、c 在内的多种模式中）时，它会立即以某种方式立即将文件的其余部分作为字符串突出显示。如果它宁可不那么烦人什么也没做，*等待*关闭引号字符。python 中的三重引号可以，但普通的可以吗？

谷歌搜索并没有太大帮助，因为我在简洁和独特的表述上遇到了麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:18:35.160

您可以使用[AutoPairs](http://www.emacswiki.org/emacs/AutoPairs)以便`"`在您键入第一个时自动添加第二个`"`（括号、大括号等也是如此）。

语法高亮不会受到干扰。

[http://www.emacswiki.org/emacs/AutoPairs](http://www.emacswiki.org/emacs/AutoPairs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T14:13:30.197

实际上，Emacs 确实已经在等待了。所以你可能只是想调整它等待的时间，它由`jit-lock-context-time`.

# image - GWT 画布和图像包 [理解题]

> ID：10928104
> 
> 赞同：0
> 
> 时间：2012-06-07T08:14:29.307
> 
> 标签：image, gwt, canvas

我在[http://code.google.com/p/gwt-examples/wiki/gwt_hmtl5](http://code.google.com/p/gwt-examples/wiki/gwt_hmtl5)使用了这段代码（一种教程） ......在这段代码中，我使用了“图像缩放/调整大小”代码，我发现我无法解释的事情。我的意思是，而不是使用：

```
final Image img = new Image("/img/test.jpg"); 
```

我使用了客户端捆绑包，因此使用了以下代码：

```
final Image img = new Image(NormalResources.NORMAL_RES_INSTANCE.axl1()); 
```

而且我没有任何错误，但图像没有出现。最后我找到了解决方案：

```
final Image img = new Image(NormalResources.NORMAL_RES_INSTANCE.axl1().getSafeUri()); 
```

您知道“.getSafeUri()”解决问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:57:57.463

将ClientBundle[中的 ImageResource 视为真正的 <img> 元素](https://stackoverflow.com/questions/10913588/imageresource-in-clientbundle-as-real-img-element/10914280#10914280)

用an`Image`创建的`ImageResource`将无条件使用*裁剪图像*，其中图像设置为 CSS 背景图像（并且`<img>`'s`src`是 1×1px 透明 GIF）。因为图像实际上是一个空白的 GIF，所以将它绘制到画布上并没有什么明显的效果；canvas 不考虑 CSS 样式。

使用`getSafeUri()`您将获得图像的URL ，该`data:`URL 将用作`src`. `<img>`不在`blank.gif`这里，所以图像被正确地绘制在画布上。

但请注意，默认情况下这*在*IE6 和 IE7 中`getSafeUri()`不起作用。如果您需要支持它们，则必须使用或注释您的 s 。或者，您可以使用s 代替s。*`ImageResource``@ImageOptions(preventInlining = true)``@ImageOptions(repeatStyle = RepeatStyle.Both)``DataResource``ImageResource`*

# symfony - symfony2 / 学说 2 刷新创建为删除后的选择

> ID：10928108
> 
> 赞同：0
> 
> 时间：2012-06-07T08:14:42.417
> 
> 标签：symfony, doctrine-orm

我正在使用以下命令删除实体：

```
$this->getEntityManager()->remove($exclusivedeal->getPicture());
$exclusivedeal->setPicture();
$this->getEntityManager()->flush();
$this->getEntityManager()->getConnection()->commit(); 
```

图片属性是与图片实体的多对一关系。图片实体有一个函数，该函数通过 postremove 注释调用以从文件系统中物理删除图片。Flush() 操作正在执行 sql 语句。在 delete 语句之后，还会调用一个 select 语句。这会产生以下错误：

```
[2012-06-07 10:06:46] request.CRITICAL: Doctrine\ORM\EntityNotFoundException: Entity was not found. (uncaught exception) at C:\xampp\htdocs\forum\app\cache\dev\doctrine\orm\Proxies\__CG__DankeForumBundleEntityPicture.php line 32 [] [] 
```

当我将注释更改为 preRemove 时，一切都很好，但这不是解决方案。我正在对与图片实体相关的另一个实体执行相同的操作。

当我设置级联删除注释时，发生了同样的问题。

有谁知道我做错了什么？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T10:45:50.323

我遇到了同样的问题，试图解决这个问题让我很头疼。我终于找到了[问题](https://github.com/symfony/symfony-docs/issues/712)。[symfony](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html)网站上用于处理文件上传的教程已更新以解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T12:05:07.173

我刚刚遇到了同样的问题，发现我的问题是因为我同时使用了 cascade={"all"}（即'remove'）和 onDelete="CASCADE"。

将级联更改为“持久”解决了它，我现在能够删除具有图像关联的实体。

# linux - 在多个线程/进程之间共享标准输出

> ID：10928115
> 
> 赞同：5
> 
> 时间：2012-06-07T08:15:16.660
> 
> 标签：linux, multithreading, stdout

我有一个 linux 程序（语言无关紧要），它将它的日志打印到标准输出上。监控过程需要日志。

现在我将通过分叉或使用线程来并行化它。

**问题：生成的标准输出将包含不相关行的不可读混合......**

最后**是问题：您将如何重新构建并行进程的输出逻辑？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T09:53:05.343

不好意思回答自己...

**明确的解决方案是使用[GNU 并行](http://www.gnu.org/software/parallel/)实用程序。**

它取代了众所周知的`xargs`实用程序，但并行运行命令，将输出分成组。

所以我只是保留了我简单的单进程单线程实用程序，并通过`parallel`这样的管道调用它：

> 生成参数列表 | 并行<选项> my-utility

这取决于并行的选项可以为多次调用产生很好的分组输出`my-utility`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:19:09.153

如果它是多线程的，那么您需要对标准输出日志的打印/写入进行互斥保护。在 Linux 和 c/c++ 中最常用的方法是使用 pthread_mutex。此外，如果它的 c++，boost 具有可以使用的同步。

要实现它，您可能应该将所有日志记录封装在一个函数或对象中，并在内部锁定和解锁互斥锁。

如果日志记录阻塞性能变得令人望而却步，您可以考虑缓冲日志消息（在上述对象或函数中），并且仅在缓冲区已满时才写入标准输出。您仍然需要互斥锁保护来缓冲，但缓冲将比写入标准输出更快。

如果每个线程都有自己的日志消息，那么它们仍然需要共享相同的互斥锁来写入标准输出。在这种情况下，最好每个线程缓冲其各自的日志消息，并且仅在缓冲区已满时才写入 stdout，从而仅获取用于写入 stdout 的互斥锁。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T08:38:40.847

如果您使用 C++，我会考虑使用[Pantheios](http://www.pantheios.org/)或衍生版本 Boost::Log 或使用查看[Logging In C++ : Part 2](http://www.drdobbs.com/cpp/221900468)或

如果您使用另一种语言，那么围绕 IO 操作的文件锁定可能是查看[File Locks](http://www.gnu.org/software/libc/manual/html_node/File-Locks.html)的方式，您可以使用信号机或任何其他过程控制系统获得相同的结果，但对我而言，文件锁定是最简单的。

如果此监控被视为系统范围，您也可以考虑使用[syslog 。](http://www.gnu.org/software/libc/manual/html_node/Syslog-Example.html#Syslog-Example)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T09:58:41.743

我们使用的另一种方法是委托一个线程，记录器线程，用于记录。希望记录的所有其他线程将其发送到记录器线程。此方法为您提供了灵活性，因为日志的格式可以在一个地方完成，也可以配置。如果您不想担心锁可以使用套接字进行消息传递。

# objective-c - 调用 performSelector:withObject:afterDelay 的对象是否被 NSRunLoop 保留？

> ID：10928118
> 
> 赞同：2
> 
> 时间：2012-06-07T08:15:35.233
> 
> 标签：objective-c, ios, cocoa-touch, nsobject, nsrunloop

我有某个对象每 X 秒执行一次“刷新”。（“更新程序”）我进行这种重复更新的方式是通过调用`performSelector:withObject:afterDelay`并在我的选择器中根据需要重新安排。

当然，我有一种方法可以通过调用来停止这些调用`cancelPreviousPerformRequests`。

问题是这个“更新程序”永远不会被释放。只有一个其他对象保留更新程序（AFAIK），并且保留对象**正在**被释放并调用`[self setUpdater:nil];`

我怀疑这与该`performSelector:withObject:afterDelay`方法有关，但我在文档中找不到对该问题的任何引用。

任何人都可以确认或驳回它吗？

谢谢！

**附录** 这是调度方法：

```
-(void) scheduleProgressUpdate
{
    [self stopProgressUpdates]; // To prevent double scheduling
    [self performSelector:@selector(updateProgress) 
               withObject:nil 
               afterDelay:1.0];
}

-(void) updateProgress
{
    // Perform update..
    [self scheduleProgressUpdate];
}

-(void) stopProgressUpdates
{
    [NSObject cancelPreviousPerformRequestsWithTarget:self 
                                             selector:@selector(updateProgress) 
                                               object:nil];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:28:09.940

据我所知 performSelector 方法保留了它的接收者和参数。

# javascript - 如何使用 Mustache.js 从具有相同选项和值的数组中获取 JSON 子数组数据？

> ID：10928120
> 
> 赞同：0
> 
> 时间：2012-06-07T08:15:53.567
> 
> 标签：javascript, jquery, json, mustache

我正在尝试使用真正有帮助的 Mustache.js。

我被困在获得具有特定选项和价值的数组上。

我的 JSON 看起来像这样：

```
 {
    "departments": [
        {
            "department": [
                {
                    "id": 114,
                    "deptName": "Department 1",
                    "category": [
                        {
                            "id": 127,
                            "catName": "Category Name",
                            "subCategory": []
                        },
                        {
                            "id": 115,
                            "catName": "Category Name",
                            "subCategory": []
                        }
                    ]
                }
            ]
        },
        {
            "department": [
                {
                    "id": 123,
                    "deptName": "Department 2",
                    "category": [
                        {
                            "id": 126,
                            "catName": "Category Name",
                            "subCategory": []
                        },
                        {
                            "id": 124,
                            "catName": "Category Name",
                            "subCategory": []
                        }
                    ]
                }
            ]
        }
    ]
} 
```

要获取主要部门名称，很容易：

JS：

```
$.ajax({

            url: 'link_to_json',
            dataType: 'json',
            success: function(data) {
                var template = $('#pageHomeTpl').html();
                var html = Mustache.to_html(template, data);
                $('#category-list').html(html);
            }
        }); 
```

HTML：

```
<ul id="category-list">
                <script id="pageHomeTpl" type="text/template">
                    {{#departments}}
                    {{#department}}
                    <li><a href="{{id}}">{{deptName}}</a></li>
                    {{/department}}
                    {{/departments}}
                  </script>
                </ul> 
```

但现在我需要以某种方式从具有特定 ID 的部门获取类别（“类别：”），例如“id”：114。

任何帮助，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:39:44.590

您可以使用 jQuery`map()`和`grep()`

```
 console.log(JSON.stringify(data)); 
var filtereddata = {"departments" : []}; 
var filtereddept= {};
filtereddept.department= $.map(data.departments, function(alldept,indx){
    return $.grep(alldept.department, function(deptobj,indx){
        return deptobj.id==114;
    });
});
filtereddata.departments[0]=filtereddept;
console.log(JSON.stringify(filtereddata)); 
```

迭代部门类别的模板：

```
 <script id="pageHomeTpl" type="text/template">
                    {{#departments}}
                    {{#department}}
                    <li><a href="{{id}}">{{deptName}}</a></li>
                     {{#category}}
                     <ul>
                    <li><a href="{{id}}">{{catName}}</a></li>
                    </ul>
                    {{/category}}
                    {{/department}}
                    {{/departments}}
      </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:46:59.527

我没有测试它，但它似乎是工作......

```
...
success: function(data) {
    var template = $('#pageHomeTpl').html();
    var item = data.departments
    for(key in item){
        if(key == 'id' && item[key] == 114 ){
            var html = Mustache.to_html(template, item);
        }
    }
    $('#category-list').html(html);
}
... 
```

使用 FOR .. IN 语句，您可以在对象或数组中循环查看此链接 [js_loop_for_in](http://www.w3schools.com/js/js_loop_for_in.asp)

# ruby-on-rails - 缺少部分

> ID：10928121
> 
> 赞同：3
> 
> 时间：2012-06-07T08:16:02.773
> 
> 标签：ruby-on-rails

嘿，当我尝试运行它时，我遵循了一个 ruby​​ on rails 指南，我收到以下错误，我不知道如何修复它：

```
ActionView::MissingTemplate in Posts#new

Showing /home/jandre/Downloads/RubyForRails/blog/app/views/posts/_form.html.erb where line #29 raised:

Missing partial tags/form with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. Searched in:
  * "/home/jandre/Downloads/RubyForRails/blog/app/views"

Extracted source (around line #29):

26:   </div>
27:   <h2>Tags</h2>
28:    <%= render :partial => 'tags/form',
29:               :locals => {:form => f} %>
30:   <div class="actions">
31:     <%= f.submit %>
32:   </div>

Trace of template inclusion: app/views/posts/new.html.erb

Rails.root: /home/jandre/Downloads/RubyForRails/blog

app/views/posts/_form.html.erb:29:in `block in _app_views_posts__form_html_erb__1175061583764259658_69931731368600'
app/views/posts/_form.html.erb:2:in `_app_views_posts__form_html_erb__1175061583764259658_69931731368600'
app/views/posts/new.html.erb:3:in `_app_views_posts_new_html_erb___2345045124576917782_69931899129680'
app/controllers/posts_controller.rb:33:in `new' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:22:54.587

**此错误意味着您在app/view/tags**中没有**_form** partial

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-30T00:47:17.640

确保您的部分文件名以下划线开头：

`_somepartial.html.erb`而不是`somepartial.html.erb`**

# ruby - 是否可以将 Mechanize::File 转换为 Mechanize::Page

> ID：10928122
> 
> 赞同：1
> 
> 时间：2012-06-07T08:16:08.847
> 
> 标签：ruby, gem, mechanize, mechanize-ruby

我在使用 Mechanize gem 时遇到问题，如何将**Mechanize::File**转换为**Mechanize::Page**，

这是我的一段代码：

```
**link** = page.link_with(:href => %r{/en/users}).click 
```

当用户点击链接时，它会转到包含用户列表的页面，现在我想点击第一个用户，但我无法做到这一点，因为**链接**返回**Mechanize::File**对象

任何帮助，建议都会很棒，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T15:38:31.520

Mechanize 使用 Content-Type 来确定应该如何处理资源。有时网站不会为其资源设置 MIME 类型。`Mechanize::File`是未设置的 Content-Type 的默认值。

如果您只是与您打交道，`'text/html'`您可以按照 Jimm Stout 的[建议](http://jimmstout.com/2012/adding-a-default-content-type-to-mechanize-agent/)使用`post_connect_hooks`

```
agent = Mechanize.new do |a|
  a.post_connect_hooks << ->(_,_,response,_) do
    if response.content_type.empty?
      response.content_type = 'text/html'
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T06:02:50.727

只需用 nokogiri 解析身体：

```
link = page.link_with(:href => %r{/en/users}).click
doc = Nokogiri::HTML link.body
agent.get doc.at('a')[:href] 
```

# linux - 在 bash 文件末尾添加一行

> ID：10928128
> 
> 赞同：-2
> 
> 时间：2012-06-07T08:16:26.203
> 
> 标签：linux, bash, ubuntu, ubuntu-11.04, ubuntu-11.10

```
-bash: /root/.bashrc: line 100: conditional binary operator expected
-bash: /root/.bashrc: line 100: syntax error near `"$HOME/.rvm/scripts/rvm"'
-bash: /root/.bashrc: line 100: `[[ -s "$HOME/.rvm/scripts/rvm"]] && source "$HOME/.rvm/scripts/rvm" #Load RVM into a shell session *as a function*' 
```

添加后我得到了这些输出

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && source "$HOME/.rvm/scripts/rvm" # Load RVM into a shell session *as a function*` 
```

在结束时`~/.bashrc`

有谁知道如何解决这一问题 ？

我想将 rvm 加载到 shell 会话中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:30:21.180

之前缺少一个空格`]]`（从错误消息中猜测，但代码中未显示）。

# asp.net-mvc-3 - 当我返回操作并检索数据时，如何保存数据？

> ID：10928130
> 
> 赞同：0
> 
> 时间：2012-06-07T08:16:36.810
> 
> 标签：asp.net-mvc-3

我有一个类并创建一个实例并在我的索引中填充一个属性，但是当我在视图中按下提交按钮并再次返回到我的索引操作时，我的类的属性为空。

当我返回操作并检索数据时，如何保存数据？可能吗？

我在我的索引和填充主题中使用了`viewbag`and `viewdata`，但是当再次返回索引操作时，所有主题都为空:(

```
public class myclass
{
    public string tp { get; set; }
}

public class HomeController : Controller
{
    //
    // GET: /Home/
    myclass myc = new myclass();
    public ActionResult Index()
    {
        myc.tp = "abc";
        return View(myc);
    }
} 
```

看法：

```
 @model MvcApplication2.Controllers.myclass
 @{
  Layout = null;
  }
<!DOCTYPE html>
<html>
 <head>
     <title>Index</title>
 </head>
 <body>

     @using (Html.BeginForm())
     {
        <input id="Submit1" type="submit" value="submit" />
     }

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:48:00.000

在您的 HttpPost 中，如果您为视图中的属性提供了输入字段，则可以获取模型并查看它的属性。

```
[HttpPost]
public ActionResult Index(myclass myc)
{
    //check the myc properties here
    return View(myc);
} 
```

然后在您的视图中：

```
 @using (Html.BeginForm())
 {
@Html.TextBoxFor(m => m.tp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:32:16.053

只需根据您的表单方法在控制器中使用 GET 或 POST 方法，例如，

```
[HttpGet]
public ActionResult Index(string id)
{
    myc.tp = id;
    return View(myc);
} 
```

# php - 如何在我的 JS 文件中附加来自 php 的值？

> ID：10928133
> 
> 赞同：0
> 
> 时间：2012-06-07T08:16:46.380
> 
> 标签：php, javascript

基本上我想读取和写入一个文件，然后将所有编译的内容保存到另一个文件中。

脚步：

1.  假设我有一个包含以下代码的文件*mycode.js*：

    ```
     var url = '';     //this will be field throug form in php 
    ```

2.  现在在 php 中，我将输入该 url 的值，例如`www.google.com`

3.  如何将我刚刚输入的 url 附加到我的 js 文件中？
    预期输出：

    ```
    var url = 'www.google.com'; 
    ```

4.  另请关注问题，在成功将值附加到我的 JS 文件后，我现在将创建一个新文件（*newappend.js*），就像另存为一样。其中文件的内容是新追加的代码：

    ```
    var url = 'www.google.com'; 
    ```

想用php实现这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:26:12.943

将你的 js 文件重命名为 mycode.php 并像这样在文件中写入 php 代码，这样 php 引擎将执行该文件

```
var url = "<?php echo($YOUR-URL); ?>"; 
```

现在在您的 html 文件中包含此文件，就像您在脚本标记中包含 js 文件一样。给 src="mycode.php"。浏览器会将其视为 js 文件，您可以在 javascript 中访问变量 url。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:27:00.643

以字符串形式获取`.js`文件内容：

```
$js = file_get_contents( '/path/to/file/mycode.js' ); 
```

`$js`现在将保存文件的内容。

用赋值替换空变量行：

```
$url = 'www.google.com';
$js = str_replace( "var url = '';", "var url = '$url';", $js ); 
```

将新内容写回新的 js 文件：

```
file_put_contents( '/path/to/file/newlyappend.js', $js ); 
```

确保您具有从指定路径读取和写入文件的适当权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:37:17.727

`<script></script>`最简单的解决方案是在 HTML 模板/网页部分中包含 PHP 代码，因为文件扩展名很可能是`.php`：

```
<script>
    var jsVar = "<?php echo $phpVar ?>";
</script> 
```

一个解决方案是让您的服务器解析所有以`.js`. 如果您希望在所有文件`.htaccess`中包含并运行 PHP 代码的目录中不存在它，只需创建一个。`.js`在 .htaccess 末尾添加这些行：

```
AddType application/x-httpd-php .js
AddHandler x-httpd-php5 .js 
```

在某些情况下，您也可以使用 php5-script 而不是 x-httpd-php5。您也可以尝试使用正则表达式来更好地匹配特定条件：

```
<FilesMatch "\.(js|php)$">
    SetHandler application/x-httpd-php
</FilesMatch> 
```

现在，您可以在任何扩展名为 .js 的 JavaScript 文件中添加所有 PHP 代码，当客户端请求文件时，服务器将自动解析并运行它们。希望这可以帮助！:)

# objective-c - 以编程方式检查 iPod Touch 硬件性能

> ID：10928136
> 
> 赞同：1
> 
> 时间：2012-06-07T08:16:55.093
> 
> 标签：objective-c, ios, xcode, ipod-touch

我遇到了一个奇怪的问题。我有两个用于测试目的的 iPod touch 设备都具有相同的平台，即 iPod touch 4G，但在速度方面的性能不同。
要检查设备平台，我使用了以下链接：[使用 iPhone SDK 确定设备（iPhone、iPod Touch）](https://stackoverflow.com/questions/448162/determine-device-iphone-ipod-touch-with-iphone-sdk)

我的应用程序在两个 iPod touch 上都运行良好，但对于一个 iPod touch，它由于设备性能问题而崩溃。我想区分相同平台但性能不同的 iPod Touch 设备，以便我可以根据设备性能对我的应用程序进行更改。

有没有办法以编程方式检查 iPod Touch 设备的硬件性能。

提前谢谢你。。

# java - JSF + Hibernate：集合不与任何会话相关联

> ID：10928138
> 
> 赞同：2
> 
> 时间：2012-06-07T08:17:15.780
> 
> 标签：java, hibernate, jsf, jakarta-ee, primefaces

首先，我使用 Java EE、带有 EntityManager 和 PrimeFaces 的 Hibernate。

我有一个 EJB 模块（业务逻辑和域）和两个 WAR 模块（Jersey WS 和 JSF PrimeFaces）。

我决定在 JSF WAR 模块中初始化惰性集合以避免惰性初始化异常。我不使用扩展实体管理器。

```
@ManagedBean(name = "company")
@SessionScoped
public class CompanyBean {

    @EJB
    private CompanyFacade cf;

    ...

    public String showDetails(Long id) {
        company = cf.find(id);
        Hibernate.initialize(company.getCompanyTypes());
        Hibernate.initialize(company.getPrimaryUser());
        Hibernate.initialize(company.getBlocked());
        Hibernate.initialize(company.getAddresses());
        Hibernate.initialize(company.getContacts());
        return "DETAILS";
    }

    ...
} 
```

我得到：

`Caused by: org.hibernate.HibernateException: collection is not associated with any session at org.hibernate.collection.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:474) at org.hibernate.Hibernate.initialize(Hibernate.java:417) at minepackage.CompanyBean.showDetails(CompanyBean.java:79) ...`

我不明白。当初始化之前的一行从数据库中获取时，必须有一个会话，不是吗？我以类似的方式初始化 WS 模块中的属性并且它在那里工作。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T08:41:22.170

我认为您的 EJB 完成后会话已关闭，因此对象处于*分离*状态。所以`Hibernate.initialize()`不会再工作了。您在这里有多种选择：

*   在客户端（在 JSF bean 或 servlet 过滤器中）打开事务。这样，当您呼叫时，会话仍将打开`Hibernate.initialize()`。
*   修改您的 EJB 以加载完整的对象和所有必需的集合。您可以使用 fetch 连接和/或`Hibernate.initialize()`在那里使用。
*   在您的 EJB 中创建更细粒度的 API。方法如`CompanyFacade.getAddressesByCompany()`.

我更喜欢后两者的组合。使用 fetch 连接在您的方法中加载一对一和多对一关系，`find`并添加额外的方法来加载一对多集合（如地址）。这也将提高后端的性能，因为它减少了数据库查询的数量。

# ruby - 如何解决未定义的局部变量或方法“has_mailbox”？

> ID：10928140
> 
> 赞同：0
> 
> 时间：2012-06-07T08:17:35.053
> 
> 标签：ruby, ruby-on-rails-3, private-messaging

我正在按照[本教程](https://github.com/fajrif/has_mailbox)在我的 rails 应用程序中添加用户之间的消息传递功能，但在我的`User`模型中出现错误。

```
class User < ActiveRecord::Base
  has_mailbox
end 
```

这给了我以下错误：

```
undefined local variable or method `has_mailbox' for #<Class:0xb60f6f84> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:47:10.063

我已经检查了这个 gem，尝试运行

```
rails g has_mailbox:install 
```

在 Rails 应用程序中安装任何 gem 时，最好检查可用的生成器

```
rails g //list of available generators 
```

# jquery - 将参数传递给 jquery 函数的问题

> ID：10928141
> 
> 赞同：0
> 
> 时间：2012-06-07T08:17:56.047
> 
> 标签：jquery, formbuilder

我正在使用[这个](https://github.com/botskonet/jquery.formbuilder)jquery 插件来构建表单。

为了允许修改表单，我试图加载指定表单的 json，之前保存在数据库中。

我必须使用

```
<script>
        $(function(){
            $('#my-form-builder').formbuilder({
                'save_url': 'jsp/save.jsp',
                'load_url': 'jsp/load.jsp',
                'useJson' : true 
            });
            $(function() {
                $("#my-form-builder ul").sortable({opacity: 0.6, cursor:'move'});
            });
        });
</script> 
```

但我需要一个带有查询字符串的'load_url'，例如'jsp/load.jsp?id=11'，其中id 是数据库中表单的标识符。

当用户单击“修改表单”链接或加载 div 时，应调用 formbuilder 函数。

我尝试使用：

```
<script>
    $('modify').click(function(){
                var url = 'jsp/load.jsp?id='.$(this).id;
                $("#".$(this).id).formbuilder({
                    'save_url': 'jsp/example-save.jsp',
                    'load_url': url,
                    'useJson' : true 
                });
                $(function() {
                    $("modify ul").sortable({opacity: 0.6, cursor:'move'});
                });
            });
</script> 
```

和：

```
<a href="index.jsp?id=${form.id}" id="${form.id}" class="modify">Modify form</a> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:24:29.393

JavaScript 用于`+`连接字符串，而不是`.`. 您还需要使用`attr()`来获取`id`.

更改此行：`var url = 'jsp/load.jsp?id='.$(this).id;`

它应该是：`var url = 'jsp/load.jsp?id='+$(this).attr('id');`

# java - Spring：如何在 JSP 页面上显示带有其他内容的图像

> ID：10928149
> 
> 赞同：0
> 
> 时间：2012-06-07T08:18:33.613
> 
> 标签：java, spring, jsp, spring-mvc

> **可能重复：**
> [将图像保存为 BLOB 时如何在 JSP 中用文本显示它？](https://stackoverflow.com/questions/4775201/when-saving-an-image-as-blob-how-to-display-it-in-jsp-with-text)
> [Spring - 在jsp文件上显示图像](https://stackoverflow.com/questions/10066349/spring-display-image-on-jsp-file)

我想在我的网页上显示图片库，并在其下方显示一些内容。但我不知道如何将我的图像从数据库传递到我的页面，例如：

```
@RequestMapping(value = "/", method = RequestMethod.GET)
public String home(Model model) {
    model.addAttribute("serverTime", /*my image as byte[] ?!*/);
    return "home";
} 
```

我找到了一些示例，告诉我无法显示图像和内容映射到相同的 url 模式。如果是真的，你能给我举个例子吗？

# requirejs - RequireJS 和 3rd 方库的依赖项，例如。Backbone 依赖于 Underscore 和 jQuery

> ID：10928152
> 
> 赞同：0
> 
> 时间：2012-06-07T08:18:38.250
> 
> 标签：requirejs

我知道 Backbone 依赖于 Underscore、jQuery 和 JSON2。那么是否可以指定，所以当我说我的模块依赖于 Backbone 时，它​​将包括它的依赖关系？或者他们有什么办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:12:18.083

`define`RequireJS 通过您可以在模块中声明的依赖项使这变得容易。对于不支持 AMD 的库（下划线和主干是两个主要示例），则`shim`需要使用配置。

这是一个示例配置：

```
require.config({
    baseUrl: 'scripts/',
    paths: {
        'backbone': 'lib/backbone',
        'jquery': 'lib/jquery',
        'underscore': 'lib/underscore'
    },
    shim: {
        'backbone': {
            deps: ['underscore', 'jquery'],
            exports: 'Backbone'
        }
    }
}); 
```

现在，如果您需要 Backbone 作为您的一个模块中的依赖项，`underscore`并且`jquery`将可用。

其中很多[内容也包含在文档中](http://requirejs.org/docs/api.html#config)。

# java - Mastermind Game Java Swing, MouseListener

> ID：10928153
> 
> 赞同：-1
> 
> 时间：2012-06-07T08:18:43.413
> 
> 标签：java, swing, icons, joptionpane, mouselistener

我正在为 Java 面向对象编程开发 Mastermind 游戏，除了代码的一部分之外，我的一切都在工作

```
 if(uG[0].getIcon() == compGuess[0].getIcon() && uG[1].getIcon() == compGuess[1].getIcon() && uG[2].getIcon() == compGuess[2].getIcon() && uG[3].getIcon() == compGuess[3].getIcon())
        {
            JOptionPane.showMessageDialog(f1, "You have guessed them all coorect!", "Mastermind: Test Your Mind", JOptionPane.INFORMATION_MESSAGE);

            submit.setEnabled(false);

            compGuess[0].setEnabled(false);
            compGuess[1].setEnabled(false);
            compGuess[2].setEnabled(false);
            compGuess[3].setEnabled(false);

            compGuess[0].setVisible(true);
            compGuess[1].setVisible(true);
            compGuess[2].setVisible(true);
            compGuess[3].setVisible(true);

            uG[0].setEnabled(false);
            uG[1].setEnabled(false);
            uG[2].setEnabled(false);
            uG[3].setEnabled(false);

            System.exit(0);
        } 
```

我正在添加完整代码，因为上面的代码 ^^ 显示了我的问题所在，但是除非您查看原始完整代码，否则您无法弄清楚为什么它不能按预期方式工作。是的，通读可能需要一两分钟，但这将有助于解决手头的问题。您可以将音频部分注释掉并更改图标。当它运行时，计算机猜测不会显示，直到你猜对了，但这就是问题所在。即使你猜对了，直到你猜了 10 次，游戏才会开始。我无法弄清楚为什么会这样。有人可以帮忙吗？

```
 import java.awt.*; 
    import java.io.*;
    import javax.swing.*; 
    import java.awt.event.MouseEvent;
    import java.awt.event.MouseListener;
    import javax.sound.sampled.AudioInputStream; 
    import javax.sound.sampled.AudioSystem; 
    import javax.sound.sampled.*;

    public class Mastermind extends JFrame
    {

    public static int found = 0;
    public static int guesses = 0;
    public final JTextField guess = new JTextField(20);
    public static JFormattedTextField nG = new JFormattedTextField();
public Mastermind()
{   

    final JFrame f1 = new JFrame("Mastermind: Can you win?");
    f1.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

    //runs a song/midi upon start of the game
    int replys = JOptionPane.showConfirmDialog(f1, "Welcome to Mastermind! \n T he game to test your brain." +
                                                                      "\n\n\nWould you like to play?", "Mastermind: Test Your Brain!", JOptionPane.YES_NO_OPTION);
    if(replys == JOptionPane.YES_OPTION)
    {
        try
        {

            //AudioFormat audioFormat;
            //AudioInputStream audioInputStream;
            //SourceDataLine sourceDataLine;

            File soundFile = new File("swfinal.mid");
                            AudioInputStream ai =      AudioSystem.getAudioInputStream(soundFile);
            Clip clip = AudioSystem.getClip();
            clip.open(ai);
            clip.start();
        }
        catch (Exception f)
        {}
    }
    else
    {
        System.exit(0);
    }

    //makes the panel to display the computer's guess
    final JPanel gamePanel = new JPanel(new GridLayout(1,4,5,5));
    f1.add(gamePanel);
    gamePanel.setBorder(BorderFactory.createMatteBorder(5,5,5,5, Color.GREEN));
    gamePanel.setBackground(Color.BLACK);   

    //the rules on how to play
    JOptionPane.showMessageDialog(f1, "Welcome to Mastermind! \n The game to test your brain.", "Mastermind: Test Your Brain!", JOptionPane.INFORMATION_MESSAGE);
    JOptionPane.showMessageDialog(f1, "You have to guess what color is behind the circle the White cirlce" +
                                                     "\n This will display on the right side of the f1 for you." +
                                                     "\n Your guesses will display on the left side of the f1 for you." +
                                                     "\n You have 10 attempts at getting it correct" +
                                                     "after all 10 attmepts are done \nand you did not guess correctly, the game will end." +
                                                     "\n\n\n Now, good luck on Mastermind. May you have a very fun time!", "Mastermind Rules", J   OptionPane.ERROR_MESSAGE);

    //makes the panel to display the heading
    final JPanel Gs = new JPanel();
    f1.add(Gs);
    Gs.setBorder(BorderFactory.createMatteBorder(5,5,5,5, Color.GREEN));
    Gs.setBackground(Color.BLACK);

    //makes the panel where you control everything
    final JPanel p2 = new JPanel();
    f1.add(p2);
    p2.setBorder(BorderFactory.createMatteBorder(5,5,5,5, Color.GREEN));
    p2.setBackground(Color.BLACK);

    final JLabel line = new JLabel("");
    p2.add(line);
    line.setForeground(Color.GREEN);

    //creates the submit button 
    final JButton submit = new JButton("Submit");
    p2.add(submit);

    //adds a text field to display the number of guesses
    final JFormattedTextField tf1 = new JFormattedTextField();
    p2.add(tf1);
    tf1.setColumns(2);
    tf1.setEditable(false);
    tf1.setForeground(Color.RED);
    tf1.setValue(new Integer(guesses));

    JLabel here = new JLabel("Take a guess: ");
            p2.add(here);
    here.setForeground(Color.GREEN);

    final JLabel master = new JLabel("MASTERMIND: TEST YOUR MIND!");
    master.setForeground(Color.green);
    Font newf = new Font("SansSerif", Font.BOLD + Font.ITALIC, 32);
    master.setFont(newf);
    Gs.add(master);

    //add and initializes the computers guess buttons
    //and its guesses
    final String[] colored = new String[4];
    colored[0] = "circle-red.png";
    colored[1] = "circle-blue.png";
    colored[2] = "circle-green.png";
    colored[3] = "circle-yellow.png";

    final JButton[] compGuess = new JButton[4];
    compGuess[0] = new JButton();
    compGuess[1] = new JButton();
    compGuess[2] = new JButton();
    compGuess[3] = new JButton();

    gamePanel.add(compGuess[0]);
    gamePanel.add(compGuess[1]);
    gamePanel.add(compGuess[2]);
    gamePanel.add(compGuess[3]);

    compGuess[0].setVisible(false);
    compGuess[1].setVisible(false);
    compGuess[2].setVisible(false);
    compGuess[3].setVisible(false);

    final String[] colored2 = new String[4];
    final int[] checkFilled = new int[4];
    for(int fill = 0; fill < 4; fill++)
    {
        checkFilled[fill] = 0;
    }
    int counter = 0;
    do
    {
        int Random = (int)(Math.random()*4);

        if(checkFilled[Random] == 0)
        {
            colored2[counter] = colored[Random];
            checkFilled[Random] = 1;
            counter++;
        }
    }
    while(counter < 4);

    final ImageIcon cell1 = new ImageIcon(colored2[0]);
    final ImageIcon cell2 = new ImageIcon(colored2[1]);
    final ImageIcon cell3 = new ImageIcon(colored2[2]);
    final ImageIcon cell4 = new ImageIcon(colored2[3]);

    compGuess[0].setIcon(cell1);
    compGuess[1].setIcon(cell2);
    compGuess[2].setIcon(cell3);
    compGuess[3].setIcon(cell4);

    //adding a label to tell user where their guessing at
    JLabel user = new JLabel("Your Guess: ");
    user.setForeground(Color.green);
    p2.add(user);

    //adding your guessing buttons
    final JButton[] uG = new JButton[4];
    uG[0] = new JButton();
    uG[1] = new JButton();
    uG[2] = new JButton();
    uG[3] = new JButton();

    p2.add(uG[0]);
    p2.add(uG[1]);
    p2.add(uG[2]);
    p2.add(uG[3]);

    //This is the mouse event handler that make it change colors
    //to the corresponding color that you want with the click of
    //the mouse on the button
    uG[0].addMouseListener(new MouseListener()
    {
        @Override
                    public void mouseClicked(MouseEvent e) 
        {
            if(e.getClickCount() == 1)
            {
                uG[0].setIcon(new ImageIcon("circle-red.png"));
            }
            else if(e.getClickCount() == 2)
            {
                uG[0].setIcon(new ImageIcon("circle-blue.png"));
            }
            else if(e.getClickCount() == 3)
            {
                uG[0].setIcon(new ImageIcon("circle-green.png"));
            }
            else if(e.getClickCount() == 4)
            {
                uG[0].setIcon(new ImageIcon("circle-yellow.png"));
            }
        }

        @Override
        public void mousePressed(MouseEvent e) {
        }

        @Override
        public void mouseReleased(MouseEvent e) { }

        @Override
        public void mouseEntered(MouseEvent e) {}

        @Override
        public void mouseExited(MouseEvent e) {}
    });

    uG[1].addMouseListener(new MouseListener()
    {
        @Override
                    public void mouseClicked(MouseEvent e) 
        {
            if(e.getClickCount() == 1)
            {
                uG[1].setIcon(new ImageIcon("circle-red.png"));
            }
            else if(e.getClickCount() == 2)
            {
                uG[1].setIcon(new ImageIcon("circle-blue.png"));
            }
            else if(e.getClickCount() == 3)
            {
                uG[1].setIcon(new ImageIcon("circle-green.png"));
            }
            else if(e.getClickCount() == 4)
            {
                uG[1].setIcon(new ImageIcon("circle-yellow.png"));
            }
        }

        @Override
        public void mousePressed(MouseEvent e) {
        }

        @Override
        public void mouseReleased(MouseEvent e) { }

        @Override
        public void mouseEntered(MouseEvent e) {}

        @Override
        public void mouseExited(MouseEvent e) {}
    });

    uG[2].addMouseListener(new MouseListener()
    {
        @Override
                    public void mouseClicked(MouseEvent e) 
        {
            if(e.getClickCount() == 1)
            {
                uG[2].setIcon(new ImageIcon("circle-red.png"));
            }
            else if(e.getClickCount() == 2)
            {
                uG[2].setIcon(new ImageIcon("circle-blue.png"));
            }
            else if(e.getClickCount() == 3)
            {
                uG[2].setIcon(new ImageIcon("circle-green.png"));
            }
            else if(e.getClickCount() == 4)
            {
                uG[2].setIcon(new ImageIcon("circle-yellow.png"));
            }
        }

        @Override
        public void mousePressed(MouseEvent e) {
        }

        @Override
        public void mouseReleased(MouseEvent e) { }

        @Override
        public void mouseEntered(MouseEvent e) {}

        @Override
        public void mouseExited(MouseEvent e) {}
    });

    uG[3].addMouseListener(new MouseListener()
    {       
                    @Override
        public void mouseClicked(MouseEvent e) 
        {
            if(e.getClickCount() == 1)
            {
                uG[3].setIcon(new ImageIcon("circle-red.png"));
            }
            else if(e.getClickCount() == 2)
            {
                uG[3].setIcon(new ImageIcon("circle-blue.png"));
            }
            else if(e.getClickCount() == 3)
            {
                uG[3].setIcon(new ImageIcon("circle-green.png"));
            }
            else if(e.getClickCount() == 4)
            {
                uG[3].setIcon(new ImageIcon("circle-yellow.png"));
            }
        }

        @Override
        public void mousePressed(MouseEvent e) {
        }

        @Override
        public void mouseReleased(MouseEvent e) { }

        @Override
        public void mouseEntered(MouseEvent e) {}

        @Override
        public void mouseExited(MouseEvent e) {}
    });

    submit.addMouseListener(new MouseListener()
    {

    @Override
public void mouseClicked(MouseEvent e)
{   
    if(e.getSource() == submit)
    {
        int s = 0;

        System.out.println(uG[0].getIcon());
        System.out.println(uG[1].getIcon());
        System.out.println(uG[2].getIcon());
        System.out.println(uG[3].getIcon());
        System.out.println(compGuess[0].getIcon());
        System.out.println(compGuess[1].getIcon());
        System.out.println(compGuess[2].getIcon());
        System.out.println(compGuess[3].getIcon());

        if(uG[0].getIcon() == compGuess[0].getIcon() && uG[1].getIcon() == compGuess[1].getIcon() && uG[2].getIcon() == compGuess[2].getIcon() && uG[3].getIcon() == compGuess[3].getIcon())
        {
            JOptionPane.showMessageDialog(f1, "You have guessed them all coorect!", "Mastermind: Test Your Mind", JOptionPane.INFORMATION_MESSAGE);
            submit.setEnabled(false);
            compGuess[0].setEnabled(false);
            compGuess[1].setEnabled(false);
            compGuess[2].setEnabled(false);
            compGuess[3].setEnabled(false);
            uG[0].setEnabled(false);
            uG[1].setEnabled(false);
            uG[2].setEnabled(false);
            uG[3].setEnabled(false);
        }
        else
        {   
            JOptionPane.showMessageDialog(f1, "Please try again!", "Mastermind: Test Your Mind", JOptionPane.INFORMATION_MESSAGE);
        }

        guesses++;
        tf1.setValue(new Integer(guesses));

        if(guesses == 10)
        {
            JOptionPane.showMessageDialog(f1, "Thank you for playing! \n\n\n Have a wonderful day.", "Mastermind: Test Your Mind", JOptionPane.INFORMATION_MESSAGE);
            System.exit(0);
        }

        int x = 0;
        int y = 0;

        if(uG[0].getIcon() == compGuess[0].getIcon())
        {
            x = x + 1;
        }
        if(uG[1].getIcon() == compGuess[1].getIcon())
        {
            x = x + 1;
        }
        if(uG[2].getIcon() == compGuess[2].getIcon())
        {
            x = x + 1;
        }
        if(uG[3].getIcon() == compGuess[2].getIcon())
        {
            x = x + 1;
        }

        if(uG[0].getIcon() != compGuess[0].getIcon())
        {
            y = y + 1;
        }
        if(uG[1].getIcon() != compGuess[1].getIcon())
        {
            y = y + 1;
        }
        if(uG[2].getIcon() != compGuess[2].getIcon())
        {
            y = y + 1;
        }
        if(uG[3].getIcon()!= compGuess[2].getIcon())
        {
            y = y + 1;
        }

        JOptionPane.showMessageDialog(f1, "You have " + x + " colors correct and in the right position."+
                                                     "\nYou have " + y + " colors correct but in the wrong position.", "Mastermind: Test Your      Mind", JOptionPane.INFORMATION_MESSAGE);
    }
}

    @Override
    public void mousePressed(MouseEvent e) {}

    @Override
    public void mouseReleased(MouseEvent e) {}

    @Override
    public void mouseEntered(MouseEvent e) {}

    @Override
    public void mouseExited(MouseEvent e) {}

    });
    //set the component of the game on the f1
    //and also sets the size of the fame and makes
    // its visible to the user
    f1.add(Gs, BorderLayout.NORTH);
    f1.add(gamePanel, BorderLayout.CENTER);
    f1.add(p2, BorderLayout.SOUTH);
    f1.setSize(650, 350);
    f1.setVisible(true);
    f1.setResizable(false);
    f1.setLocationRelativeTo(null);
}

public static void main(String[] args)
{
    Mastermind mastermind = new Mastermind();
}   
    } 
```

提前感谢杰伊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:47:16.733

The problem you describe is caused by comparing distinct references.

The `compGuess` array is initialized by something like (distributed accross your sorce code, but basically it's like that):

```
// colored2[0] contains filename
final ImageIcon cell1 = new ImageIcon(colored2[0]);  
compGuess[0] = new JButton();
compGuess[0].setIcon(cell1); 
```

i.e. you create a `JButton` and assign a newly created `ImageIcon` to that button.

On the other hand for `uG` we have the code

```
uG[0] = new JButton();
uG[0].setIcon(new ImageIcon("circle-red.png"));    // inside mouse listener 
```

which means you again create a button and assign another instance of `ImageIcon` to that one.

So when you compare

```
uG[0].getIcon() == compGuess[0].getIcon() 
```

you actually compare the icon instances which of course never match since they were created independently and are thus always distinct objects.

To fix this issue you may create each distinct icon once and share/reuse it for all your components. But I'd prefer a different way and separate the representation (icons) from the underlying data model and have both stored with a suitable (view-independent) data type (e.g. `enum DiskColor { RED, BLUE, GREEN, YELLOW };`) which you can easily compare but also transform into your view representation.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T09:01:23.797

Put something like:

```
Thread.sleep(1000);
System.exit(0); 
```

On the code that shows the user that the number was guessed correctly. I think the problem is that there are not-daemon threads running on the background and you don't specify that you want the program to end.

# android - Android中的Ksoap2运行时异常SoapObject ClassDefNotFound

> ID：10928156
> 
> 赞同：0
> 
> 时间：2012-06-07T08:18:52.830
> 
> 标签：android, web-services, android-ksoap2

我正在尝试使用 ksoap2 库在 Android 应用程序中使用 .NET 服务。我在我的项目中添加了对 ksoap2-android-assembly-2.6.5-jar-with-dependencies jar 的引用。但是当我运行代码时，我得到一个**运行时异常**说

```
java.lang.NoClassDefFound : org.ksoap2.serialization.SoapObject. 
```

有人可以帮忙吗？这是我的代码。

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = 
        new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);
        SoapObject resultsRequestSOAP = (SoapObject) envelope.bodyIn;
        tvTemp.setText("Received :" + resultsRequestSOAP.toString());
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:00:39.307

I solved the problem using the link provided by the first commentator on the question. I am leaving the answer here just in case another programmer faces the same problem and comes across my question.

The solution to this problem is to create a folder named "libs" in the project directory and copying all the external jar files there.

For further explanation, one can refer to this link. [http://tools.android.com/recent/dealingwithdependenciesinandroidprojects](http://tools.android.com/recent/dealingwithdependenciesinandroidprojects)

# android - 重新打开时我的申请没有恢复？

> ID：10928157
> 
> 赞同：0
> 
> 时间：2012-06-07T08:18:55.860
> 
> 标签：android, resume

我的应用程序在重新打开时没有恢复到以前的状态虽然它在收到呼叫或其他应用程序打开然后关闭时运行良好但它排在前面

但

> **当 HOME_KEY 被按下时，它从第一个活动开始。**
> 
> **它没有发生在模拟器上它只发生在设备上**

它发生在我的应用程序中的许多活动中的任何活动中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:30:44.230

您是否在活动中重新实现该`onResume()`方法？

我不确定您需要恢复什么状态，但也许[使用 Save Instance State 保存 Android Activity 状态](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)可能会有所帮助（重复？）？

您熟悉[活动生命周期](http://developer.android.com/training/basics/activity-lifecycle/index.html)吗？

# jasper-reports - JasperReports：子报表属性“在第一个全带中打印”

> ID：10928159
> 
> 赞同：2
> 
> 时间：2012-06-07T08:19:18.353
> 
> 标签：jasper-reports, border, stretch, subreport

首先对不起我的英语 - 它不是我的母语。
我已经用子报告创建了报告。子报表打印一些记录，每个*文本*字段都被边框包围（它应该看起来像一个表格）。当某些*textField*的高度太大时 - 它会中断并继续在下一页上打印文本 - 没关系，但是一行中的其他*textField*元素留在上一页 - 并且它们的边框不会显示在新页面上. 这会导致报表在一行中仅查看单独的*textField*（新页面上的第一行）。见附件：红线 - 文本被转移到新页面。绿色标记 - 上一页留下的文本字段。

![在此处输入图像描述](../Images/4f1659e10d892b043e24e3c92ae9bc6f.png)

我尝试使用***Print In First Whole Band***属性来避免断行，但 Subreport 不会对此做出反应。可能这是 JasperReports 问题。

请建议我如何使我的报告看起来很好，在开始新页面时没有空格而不是边框​​？

# android - 在自定义列表视图中无法获取正确的数据

> ID：10928160
> 
> 赞同：0
> 
> 时间：2012-06-07T08:19:21.880
> 
> 标签：android, listview

在这里，我正在使用一个包含列表视图的活动，我正在从一个 xml 字符串填充它，填充很好，在列表视图中有两个按钮

单击 no 增加和减少的按钮。onsubmit 按钮我希望所有修改过的数据都将显示在提交中。例如，选择了两个座位 2。

代码片段是：

```
my xml 
private static String seatXml="<?xml version=\"1.0\" encoding=\"UTF-8\"?><seatlist>"
        +"<seatselection><seater>two</seater></seatselection>"
        +"<seatselection><seater>four</seater></seatselection>"
        +"<seatselection><seater>six</seater></seatselection>"
        +"<seatselection><seater>eight</seater></seatselection>"
        +"<seatselection><seater>ten</seater></seatselection>"
        +"</seatlist>"; 
```

在这里我正在填充列表视图

```
private void populateSeatList() {
    // TODO Auto-generated method stub
    seatItems=new ArrayList<HashMap<String,String>>();
    XMLParser parser=new XMLParser();
    Document doc=parser.getDomElement(seatXml);
    NodeList nl=doc.getElementsByTagName(KEY_RECORD);
    String seatName="";

    for (int i = 0; i < nl.getLength(); i++) {
        map=new HashMap<String, String>();
        Element e=(Element)nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_SEAT,parser.getValue(e, KEY_SEAT)); //this will fetch the seater value like 2 seater,3 seater
        map.put(KEY_SEAT_QTY,""+QTY);
        seatItems.add(map);
    }

    adapter=new SeatAdapter(this, seatItems);
    seatListView.setAdapter(adapter);
    //      makeAToast(seatName);

} 
```

适配器类中的 getview 函数

```
int i=0;
@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View view=convertView;
    if(convertView==null)
        view=inflater.inflate(R.layout.seat_desc,null);
    TextView seatName=(TextView)view.findViewById(R.id.textView_seat_no);
    Button buttonMinus=(Button)view.findViewById(R.id.button_minus);
    Button buttonPlus=(Button)view.findViewById(R.id.Button_plus);
    final TextView seatInput=(TextView)view.findViewById(R.id.textView_seat_input);

    seatInfo=new HashMap<String, String>();
    seatInfo=data.get(position);

    seatName.setText(seatInfo.get(SeatSelectionActivity.KEY_SEAT)+" seater:");
    seatInput.setText(""+i);

    //    menuInfo.get(MenuScreenActivity.KEY_MENUNAME)
    buttonPlus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated i stub
            i=Integer.parseInt(seatInput.getText().toString());
            if(!(i>=10))
                i++;
            seatInput.setText(""+i);
            //              seatInfo.put(SeatSelectionActivity.KEY_SEAT, seatInfo.get(SeatSelectionActivity.KEY_SEAT));
            seatInfo.put(SeatSelectionActivity.KEY_SEAT_QTY,seatInput.getText().toString());
            data.set(position, seatInfo);
            //              notifyDataSetChanged();

        }
    });

    buttonMinus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO ,goto-generated method stub
            i=Integer.parseInt(seatInput.getText().toString());
            if(!(i<1))
                i--;
            seatInput.setText(""+i);
            //              seatInfo.put(SeatSelectionActivity.KEY_SEAT, seatInfo.get(SeatSelectionActivity.KEY_SEAT));
            seatInfo.put(SeatSelectionActivity.KEY_SEAT_QTY,seatInput.getText().toString());
            data.set(position, seatInfo);
            //              notifyDataSetChanged();
        }
    });

    return view;
} 
```

[如果需要我的示例项目](http://www.mediafire.com/?hqpd8bb9v60b0j8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:13:14.763

我使用此代码获取所有我选择的座位并且它有效

```
buttonPlus.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated i stub
            i=Integer.parseInt(seatInput.getText().toString());
            if(!(i>=10))
                i++;
            seatInput.setText(""+i);

            data.get(position).put(SeatSelectionActivity.KEY_SEAT_QTY, seatInput.getText().toString());

        }
    }); 
```

# sql-server-2008-r2 - 查询时的 SQL Server 默认数据库 - 主

> ID：10928161
> 
> 赞同：14
> 
> 时间：2012-06-07T08:19:26.247
> 
> 标签：sql-server-2008-r2, ssms, sql-server-2012

在过去的 8 年里，我一直在使用 SQL Server Management Studio (SSMS)，但我一直在遇到问题。当我右键单击一个表并选择 SELECT TOP 2000 ROWS 时，查询编辑器会打开一个包含查询的新文件。这很好，所有这些都是为了快速查看表格。

我遇到的问题是默认数据库从实际数据库更改为主数据库。我有系统管理员权限。

由 SSMS 生成的查询，然后在括号中包含数据库、模式和表，即 [DB].[dbo].[TableName]

有没有办法在 SELECT TOP 2000 ROWS 命令​​上设置默认数据库，而不是将默认数据库设置为 'master' ？

另一种解决方法是单击表，然后执行“新建查询”，这将保留当前数据库，然后我必须输入“SELECT * FROM TableName”

![默认数据库更改为 master](../Images/42f38254254dbe34566a429dd74aa1d1.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-07T08:28:47.663

在 SSMS 中，转到 Security > Logins - 选择您的登录名，然后右键单击并选择 Properties - 在选项卡的底部是一个名为“默认数据库”的选项 - 这就是您要更改的内容。

# objective-c - 检查时NSString长度不正确？

> ID：10928164
> 
> 赞同：1
> 
> 时间：2012-06-07T08:19:31.200
> 
> 标签：objective-c, nsstring

我对此功能有疑问：

```
- (bool) test : (NSString *) chaine
{
    NSLog(@"%i",[chaine length]);
    if([chaine length] == 19) NSLog(@"Test");
} 
```

我的日志中有正确的 19，但不是“测试”。所以你知道出了什么问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:12:45.077

我试过这个

```
- (void)testFunction{
NSString * aStrFunc= @"StackOverflow";

NSLog(@"%d",[aStrFunc length]);

NSLog(@"%@",[aStrFunc length]==13?@"test right":@"test not right"); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:27:57.377

尝试使用此代码：

```
- (bool) test : (NSString *) chaine
{
    //CGFloat len = (float)[chaine length];
    NSUInteger len = [chaine length];
    NSLog(@"%i", len);
    //if (19.0f == len)
    if (19 == len)
    {
        NSLog(@"Test");
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-07T08:47:31.180

尝试这个

```
NSData* data=[chaine dataUsingEncoding:NSUTF8StringEncoding];
NSLog(@"@s",[data bytes]);//watch the string's bytes possibly you have some unprintable symbols here
if ([data length] == 19) {
NSLog(@"Test");
} 
```

# ember.js - 如何在最新的 ember 版本中更改应用程序视图？

> ID：10928165
> 
> 赞同：3
> 
> 时间：2012-06-07T08:19:32.217
> 
> 标签：ember.js

我正在尝试使用`Ember.Router`最新版本的 ember（最新的 git master）中实现的。现在似乎`Ember.Application`能够实例化全局应用程序视图布局并且路由器连接出口。如果应用程序具有不共享相同布局的不同部分怎么办。例如，/library 和/workspace 的ApplicationView 不同，当我从状态'library' 转到状态'workspace' 时，我需要更改布局。
我当前的解决方案是在我进入其中一种状态时创建并附加我的布局，并在退出时删除它们。还有另一种更符合使用 ApplicationView 的方法吗？或者，是否有可能有一个子插座？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:24:46.147

您可以有内部插座，因此当进入父状态时，您可以将应用程序视图绑定为布局，并具有子插座（根据需要命名），其内容将由子状态设置。

# iphone - 一个在wi-fi和蓝牙之间进行选择的项目

> ID：10928172
> 
> 赞同：1
> 
> 时间：2012-06-07T08:20:19.367
> 
> 标签：iphone, ios, bluetooth, wifi

我正在研究连接性。但我仍然想知道在允许我连接到 iPhone 的设备中实现蓝牙芯片或 wifi 模块的成本是多少。这里有人知道这些费用吗？

具有这些模块的网站也足够了。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:24:18.333

它们都相对便宜。然而，蓝牙在连接方面*非常*有限，因为苹果在实施所需的协议以对其进行建设性的工作方面做得很差。Wifi 是有限的，因为你必须建立某种 AdHoc 网络（除非你有一个无线路由器介于两者之间），但在那之后你基本上是无限的（尽管在实现一些有用的东西时你必须做很多体力劳动。 )

# vb.net - MyBase 不能在扩展方法中使用？

> ID：10928182
> 
> 赞同：0
> 
> 时间：2012-06-07T08:20:59.257
> 
> 标签：vb.net, extension-methods

我创建了一个模块来向类添加一些[扩展方法](http://msdn.microsoft.com/en-us/library/bb384936.aspx)。这个类继承自另一个父类。在我的扩展方法的代码中，我想使用 MyBase 引用基类。

这似乎是不允许的（错误消息：“ *'MyBase' 在模块中无效。* ”）

```
<Extension()>
Public Function Get_OutOfSpace(val as ClassA) As Boolean
    Return MyBase.IsOutOfSpace()
End Function 
```

如何在扩展方法中调用我的基类的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:43:42.180

这就是为什么他们强迫你在模块中编写扩展方法，这样你就不会犯错误使用 MyBase。但是您的代码至少还有另一件事是错误的，*您没有扩展任何东西*。扩展方法的第一个参数必须是对要扩展类型的对象的引用：

```
<Extension()>
Public Function Get_OutOfSpace(ByVal obj As Foo) As Boolean
    ''...
End Function 
```

所以一个可能的实现是`Return obj.IsOutOfSpace`. 这反过来又使您很可能实际上根本没有使用此扩展方法，因为您要扩展的类已经具有 IsOutOfSpace 属性。

仅使用扩展方法向类添加方法。只有在您无法更改课程时才这样做。

# netbeans - Netbeans 和 Insubstantial

> ID：10928183
> 
> 赞同：2
> 
> 时间：2012-06-07T08:20:59.883
> 
> 标签：netbeans, netbeans-7, netbeans-platform, substance

我最近看到有一种将 Substance LAF 与 Netbeans 集成的方法，该方法于 2008 年被放弃。现在，在 Insubstantial - 项目中进行了积极的开发，自 2008 年以来，取得了很多进展。

每次我看到一篇关于 Substance（和/或 Flamingo）和 Netbeans 的文章时，作者都在使用过时的 Substance 版本，而不是新的 Insubstantial 库。

有人知道如何将它们与 Netbeans 一起使用吗？仅添加`--laf`参数的标准方法似乎不起作用，我想如果它那么简单，就不会有集成项目。

我的目标是使用`SubstanceSkin`我自己编写的 Netbeans Platform 应用程序。

亲切的问候，

大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:53:34.740

您可以尝试使用`-Dswing.defaultlaf`in `netbeans.conf`。

例如 ：

```
-Dswing.defaultlaf=org.pushingpixels.substance.api.skin.SubstanceBusinessLookAndFeel 
```

这是[文档](http://insubstantial.github.com/insubstantial/substance/docs/skins/toneddown.html)和可用的皮肤。

# ruby-on-rails - 使用 Squeel 在同一个关联上执行多个连接

> ID：10928196
> 
> 赞同：2
> 
> 时间：2012-06-07T08:21:54.370
> 
> 标签：ruby-on-rails, join, associations, squeel

在我的应用程序中，我必须建模：工作流和步骤；步骤`belongs_to`工作流程和工作流程`has_many`步骤。步骤有一个索引和一个布尔状态（“完成”）。我想检索步骤 1 已完成而步骤 2 未完成的工作流，即 SQL 中的类似内容：

```
SELECT * FROM workflows w
INNER JOIN steps s1 ON s1.workflow_id = w.id
INNER JOIN steps s2 ON s2.workflow_id = w.id
WHERE s1.index = 1 AND s1.completed = 1
AND s2.index = 2 AND s2.completed = 0 
```

我试图用 Squeel 来表达这个查询，但它似乎不允许在同一个关联上进行多个连接：我找不到命名连接的方法，当我输入类似这样的内容时`Workflow.joins{steps}.joins{steps}`，生成的 SQL 很简单：

```
SELECT `workflows`.* FROM `workflows` 
INNER JOIN `workflow_steps` ON `workflow_steps`.`workflow_id` = `workflows`.`id` 
```

知道如何实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:29:43.187

我不知道你是否会喜欢它，但可以通过自我参考：

```
Workflow.joins{steps.workfolw.steps}.
  where{(steps.index == 1) & (steps.completed == true)} &
        (steps.workfolw.steps.index == 2) & (steps.workfolw.steps.completed == false)}.
  uniq 
```

# sql - Postgresql 聚合数组

> ID：10928210
> 
> 赞同：116
> 
> 时间：2012-06-07T08:23:09.300
> 
> 标签：sql, arrays, postgresql

我有两张桌子

```
Student
--------
Id  Name
1   John    
2   David
3   Will

Grade
---------
Student_id  Mark
1           A
2           B
2           B+
3           C
3           A 
```

是否可以使本机 Postgresql SELECT 获得如下结果：

```
Name    Array of marks
-----------------------
'John',     {'A'}
'David',    {'B','B+'}
'Will',     {'C','A'} 
```

但**不像**下面

```
Name    Mark
----------------
'John',     'A'
'David',    'B'
'David',    'B+'
'Will',     'C'
'Will',     'A' 
```

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-06-07T08:56:24.940

使用array_agg：[http ://www.sqlfiddle.com/#!1/5099e/1](http://www.sqlfiddle.com/#!1/5099e/1)

```
SELECT s.name,  array_agg(g.Mark) as marks        
FROM student s
LEFT JOIN Grade g ON g.Student_id = s.Id
GROUP BY s.Id 
```

顺便说一句，如果您使用的是 Postgres 9.1，[则不需要将](http://www.ienablemuch.com/2010/08/postgresql-recognizing-functional.html)SELECT 上的列重复到 GROUP BY，例如，您不需要在 GROUP BY 上重复学生姓名。您只能对主键进行 GROUP BY。如果您删除学生的主键，则需要在 GROUP BY 上重复学生姓名。

```
CREATE TABLE grade
    (Student_id int, Mark varchar(2));

INSERT INTO grade
    (Student_id, Mark)
VALUES
    (1, 'A'),
    (2, 'B'),
    (2, 'B+'),
    (3, 'C'),
    (3, 'A');

CREATE TABLE student
    (Id int primary key, Name varchar(5));

INSERT INTO student
    (Id, Name)
VALUES
    (1, 'John'),
    (2, 'David'),
    (3, 'Will'); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-07T08:34:15.407

据我了解，您可以执行以下操作：

```
SELECT p.p_name, 
    STRING_AGG(Grade.Mark, ',' ORDER BY Grade.Mark) As marks
FROM Student
LEFT JOIN Grade ON Grade.Student_id = Student.Id
GROUP BY Student.Name; 
```

**编辑**

我不确定。但也许是这样的：

```
SELECT p.p_name, 
    array_to_string(ARRAY_AGG(Grade.Mark),';') As marks
FROM Student
LEFT JOIN Grade ON Grade.Student_id = Student.Id
GROUP BY Student.Name; 
```

参考[这里](http://www.postgresonline.com/journal/archives/191-String-Aggregation-in-PostgreSQL,-SQL-Server,-and-MySQL.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-07T08:25:45.470

您可以使用以下内容：

```
SELECT Student.Name as Name,
       (SELECT array(SELECT Mark FROM Grade WHERE Grade.Student_id = Student.Id))
       AS ArrayOfMarks 
FROM Student 
```

如此处所述：[http ://www.mkyong.com/database/convert-subquery-result-to-array/](http://www.mkyong.com/database/convert-subquery-result-to-array/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-28T09:43:49.277

@Michael Buen 做对了。我使用array_agg 得到了我需要的东西。

这里只是一个基本的查询示例，以防它帮助某人：

`SELECT directory, ARRAY_AGG(file_name) FROM table WHERE type = 'ZIP' GROUP BY directory;`

结果是这样的：

`parent_directory | array_agg | ------------------------+----------------------------------------+ /home/postgresql/files | {zip_1.zip,zip_2.zip,zip_3.zip} | /home/postgresql/files2 | {file1.zip,file2.zip} |`

* * *

这篇文章对我也有很大帮助：[SQL 和 Python Pandas 中的“Group By”](https://mode.com/blog/group-by-sql-python)。它基本上说在可能的情况下只使用 PSQL 更方便，但是 Python Pandas 可以用于在过滤过程中实现额外的功能。

我希望它有帮助

# github - git push 错误“致命：无法找到'https'的远程助手”

> ID：10928215
> 
> 赞同：9
> 
> 时间：2012-06-07T08:23:22.060
> 
> 标签：github

我添加了远程来源，例如：

```
git remote add origin https://github.com/username/repo.git 
```

当我推送 git 存储库时，我收到此错误：

```
git push -u origin master
fatal: Unable to find remote helper for 'https' 
```

我在 Ubuntu 10.04.4 LTS 上使用 git 1.7.1

任何想法，非常感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T20:05:01.343

如果您从源代码编译 git，请务必先安装此包：

`apt-get install libcurl4-openssl-dev`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-25T00:44:09.303

我昨天刚遇到问题，今天解决了，所以发帖以防万一这可能对 Windows 用户有所帮助。对我来说，问题是在我更新到最新版本的 Git 之后发生的（因为 Visual Studio 建议我这样做——一些事情不匹配。）

原来我安装在默认目录 Program Files 中，但我的旧 Git 在 Program Files (x86) 中。（直到尝试重新安装才注意到。）

卸载新版本并安装其他 Git for Windows 下载（这不是默认设置）下列出的 64 位 Git for Windows 安装程序覆盖了 Program Files (x86) 中的版本。（我首先尝试了版本和文件夹的其他组合。）

在执行 git push origin master 之前，我确实必须删除已经创建的本地存储库并使用 git init、git add .、git commit -m "first commit"、git remote add origin theGitUrl （所有这些都工作过）重新启动。奇怪的是，出现了一个弹出窗口，输入我的用户名和密码。一开始没注意，还以为git push上的处理挂了。因此，请注意那个“其他适用于 Windows 的 Git”版本。

我确实在修复之前更改了我的环境变量；我不知道这是否有帮助。我将这两个添加到 PATH：C:\Program Files (x86)\Git\bin C:\Program Files (x86)\Git\libexec\git-core 我对用户和系统变量都这样做了。

关于在 Windows 10 中更新 PATH 的注意事项：您必须一次添加一个，并且不包括 ;

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T06:44:03.123

经过大量搜索，答案是您需要 git 版本 1.7.7

[无法更新 RVM -“致命：无法找到 'http' 的远程助手”](https://stackoverflow.com/questions/4569089/cant-update-rvm-fatal-unable-to-find-remote-helper-for-http)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-08T14:49:59.590

我在 chroot 监狱里工作，以为我已经复制了 git 工作所需的所有内容，但我自己丢失了 git-core 文件，所以我只需要复制它们：

```
cp -r /usr/lib/git-core /opt/chroot/myjail/usr/lib/ 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-04-26T06:20:50.920

```
Add this to git config: (Checked in centos 6.7 and working)
    #git config --global url.https://.insteadOf git://

#To see the config added
    #git config --list
    url.https://.insteadof=git://
    user.name=username
    user.email=youremail
    .... 
```

# c - 使用##和#运算符连接C中宏中的字符串

> ID：10928217
> 
> 赞同：1
> 
> 时间：2012-06-07T08:23:28.530
> 
> 标签：c, macros, operator-keyword

我有一个需要连接字符串的代码，如下所示：

```
#define CMD(A,B)  CMD_##A_PROMPT##B

void main()
{
    int a = 10, b = 5;
    printf("%s\n", CMD(a, b));
} 
```

期望的输出是：`CMD10_PROMPT5`
这可以通过任何方式实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:39:49.350

我不认为这是可以做到的，因为您要查找的宏是*编译时*“字符串化”，参数在*运行时*接收它们的值。

如果您正在寻找运行时“字符串化”，请使用`sprintf`等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:46:13.927

您可以通过替换来做到这一点`int a = 10, b = 5;`：

```
#define a 10
#define b 5 
```

否则是不可能的。C 翻译发生在标准中定义的一系列阶段，预处理阶段发生在任何对象定义被解析之前。就预处理器而言，`int a = 10`不会在 token`a`和 token之间建立任何关系`10`。

如果您所追求的只是输出，请这样做：

```
#define CMD_PATTERN "CMD_%d_PROMPT%d"

int main() {
    int a = 10, b = 5;
    printf(CMD_PATTERN "\n", a, b);
} 
```

不幸的是，参数的提供顺序与它们在模式中出现的顺序相同——这使得将来很难更改顺序。出于这个原因，定义格式化函数可能比仅仅定义一个模式更好。

# jquery - 如何在 Chrome 扩展 contentscript 中使用 jQuery 而不会发生冲突

> ID：10928218
> 
> 赞同：11
> 
> 时间：2012-06-07T08:23:29.477
> 
> 标签：jquery, google-chrome, google-chrome-extension

如何在我的谷歌浏览器扩展中使用 jQuery 而不会与网页上的脚本冲突？因为当我使用 jQuery 并且网页上的另一个脚本使用 $ 时，我的内容脚本会死掉或者那个网页死掉，

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-07T09:02:08.690

**真正的**答案是您不需要使用“自运行私有函数”。您需要了解内容脚本是[独立执行的，](https://developer.chrome.com/extensions/content_scripts#execution-environment)因此不会与网站设计使用的资源发生冲突。

如果您想在内容脚本中使用库，首选方法是将其简单地包含在您的扩展程序/应用程序中，然后首先将其加载到您的清单中；

```
{
  ...
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "js": ["jquery.js", "myscript.js"]
    }
  ]
  ...
} 
```

这将导致 jquery.js 被加载到您的私有内容脚本环境中，然后是 myscript.js。您的代码将更加简洁和模块化，因为它不包含外部库的*缩小*代码。

**来源：** [https ://developer.chrome.com/extensions/content_scripts](https://developer.chrome.com/extensions/content_scripts)

# jquery - jquery链接无法在弹出窗口中提交表单

> ID：10928225
> 
> 赞同：1
> 
> 时间：2012-06-07T08:23:57.320
> 
> 标签：jquery, forms, popup

谁能告诉我为什么以下代码无法将表单提交到弹出窗口中？单击链接应将表单提交到弹出窗口中

```
$(".myClass").click(function () 
    {
        var myVar = $(this).attr("rel");
        //$(this).closest("form").submit();

        $("#form_id"+myVar).submit(function() 
        {
            window.open('', 'formpopup', 'width=700,height=550,resizeable,scrollbars');
            this.target = 'formpopup';
        });     

    return false;
    }) 
```

如果我删除弹出选项并且只有 $(this).closest("form").submit(); 有用。但事实上它失败了。有什么想法/建议吗？firebug中没有js错误。

注意：目前我们不想使用模态窗口 - 所以请不要使用模态建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:28:52.147

你从来没有真正提交过表格。您只需将`submit`事件处理程序绑定到它。您可以使用[`submit`](http://api.jquery.com/submit/)或[`trigger`](http://api.jquery.com/trigger/)实际触发`submit`事件：

```
$("#form_id"+myVar).submit(function() {
    window.open('', 'formpopup', 'width=700,height=550,resizeable,scrollbars');
    this.target = 'formpopup';
}).submit(); //Submit the form after binding event handler 
```

您注释掉的调用`submit`将在事件处理程序绑定到表单之前发生，因此它永远不会被执行。

# .net - 语法错误 xml linq 查询

> ID：10928227
> 
> 赞同：0
> 
> 时间：2012-06-07T08:23:58.803
> 
> 标签：.net, xml, linq

我想用 linq 查询文件 xml，我想获取 SubLayers 的所有后代，它的名称为 SubLayer，并且有一个名为“Where”的属性

我如何在 linq 中编写此查询？我是这样写的：

```
 var query3 = from c in xmlFile.Descendants("SubLayers").Elements("SubLayer").Where(c.Attribute("where" != null))
 select c; 
```

但它说我不能使用

```
 c 
```

在里面

```
 where condition. 
```

我怎么写？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:05:18.470

试试这个：

```
var query3 = from c in xmlFile.Descendants("SubLayers").Elements("SubLayer") where c.Attributes().Any(a => a.Name == "where") 
 select c; 
```

# varnish - 多个带有 haproxy 的清漆服务器

> ID：10928228
> 
> 赞同：1
> 
> 时间：2012-06-07T08:24:01.283
> 
> 标签：varnish, haproxy

我们计划在我们的基础设施中添加第二台清漆服务器。

平衡两台服务器的流量的更好方法是什么？我认为我们可以在两台服务器前面使用 haproxy，但是如何配置它来负载平衡 2 varnish 之间的流量呢？理想的解决方案是，如果一种清漆出现故障，所有流量都会流向另一种。

编辑：理想的行为是主动/主动配置，每个都有 50% 的负载，如果一个发生故障，haproxy 会向另一个发送 100% 的负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T18:16:12.787

另一种选择是将两个 varnish 实例放在同一个后端，但通过 uri 或参数平衡请求。

这将允许您在同一个后端中都处于活动状态，并且仍然保持较高的缓存命中率，因为同一个 uri 将始终与同一个清漆缓存平衡（只要它可用）。Balace uri 还需要一个可选的长度参数，以便在散列时使用。

这是一个简单的例子：

前端 http-in acl my_acl use_backend varnish if my_acl

```
backend varnish1
  mode http
  balance uri
  option httpchk  GET /check.txt HTTP/1.0
  server varnish1 192.168.222.51:6081 check inter 2000
  server varnish2 192.168.222.52:6081 check inter 2000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:13:42.263

我提出的想法是使用两个后端，并在每个后端使用另一台服务器作为备份，因此当服务器关闭时，所有请求都会发送到活动服务器。

```
frontend http-in
  acl my_acl <whaever acl to split the traffic>
  use_backend varnish2 if my_acl
  default_backend varnish1

backend varnish1
  mode http
  option httpchk  GET /check.txt HTTP/1.0
  server varnish1 192.168.222.51:6081 check inter 2000
  server varnish2 192.168.222.52:6081 check inter 2000 backup

backend varnish2
  mode http
  option httpchk  GET /check.txt HTTP/1.0
  server varnish2 192.168.222.51:6081 check inter 2000
  server varnish1 192.168.222.52:6081 check inter 2000 backup 
```

# asp.net - 使用 Quartz.Net 创建作业

> ID：10928230
> 
> 赞同：0
> 
> 时间：2012-06-07T08:24:12.313
> 
> 标签：asp.net, quartz-scheduler

我在[这里](https://stackoverflow.com/questions/1356789/quartz-net-with-asp-net)关注答案。我已经下载了最新的`Quartz.dll`，它在我的项目中被引用。我对代码的第一部分（服务部分）没有任何问题，但它找不到`JobDetail`，`SimpleJob`和`CronTrigger`（上面答案的工作部分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:34:56.077

如果您收到编译错误，您可能会检查的内容：

*   .NET 版本是否不匹配？
*   引用的程序集是否需要完整的 .NET 配置文件（并且您只有一个客户端配置文件）？
*   引用的程序集构建目标类型是否与您的代码匹配？（例如，它们是否仅针对 32 位构建，而您仅针对 64 位）

# java - 如何在 Java 中制作自定义文件格式

> ID：10928243
> 
> 赞同：1
> 
> 时间：2012-06-07T08:24:57.397
> 
> 标签：java, android, file-security

我正在Android中制作应用程序。我在服务器上有很多文件，如 abc.doc、abc.xls、abc.mp3 等。我想将所有这些文件下载到单个文件中，如 .zip、.rar，然后将其存储在 SDCARD 上。由于安全问题，只有我的应用程序能够读取这些文件，没有其他应用程序能够读取它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:30:34.147

唯一安全的方法是使用加密来保护文件。例如，您可以使用 AES 或类似的东西使用简单的对称加密。该`java.security`包包含所有必需的类：

[http://developer.android.com/reference/java/security/package-summary.html](http://developer.android.com/reference/java/security/package-summary.html)

**编辑：**

对于自定义二进制文件格式，您可以使用`DataInputStream`. 它允许从二进制输入流中读取不同的数据类型。有关详细信息，请参阅文档：

[http://developer.android.com/reference/java/io/DataInputStream.html](http://developer.android.com/reference/java/io/DataInputStream.html)

# javascript - 跨域环境下无法访问JS函数

> ID：10928245
> 
> 赞同：7
> 
> 时间：2012-06-07T08:25:16.343
> 
> 标签：javascript, iframe

为了解决 JavaScript 的跨域安全问题，我正在实现以下方法

**在域 [abc.com]**

在域上`abc.com`，我有一个名为`main_page.html`. 它的代码如下——

```
<script>
function SendMsg(id)
{
   frames["invisible_iframe"].location = "http://xyz.com/invisible_iframe.html#"+id;
}
</script>
<body>
  <input type="button" id="Test" value="Call iFrame" onclick="SendMsg(this.id);">
  <iframe src="ttp://xyz.com/visible_iframe.html" name="visible_iframe" height="250" width="500"></iframe>
  <iframe name="invisible_iframe" height="0" width="0" style="display:none;"></iframe>
</body> 
```

**在域 [ xyz.com ]**

在域上`xyz.com`，我有一个名为`visible_iframe.html`. 它的代码如下——

```
<script>
function Hi()
{
   alert("Hi there!");
}
</script>
<body>
  <h1>Visible iFrame on xyz.com
  <iframe name="d2_invisible_iframe" id="d2_invisible_iframe" class="iFrame" src="http://xyz.com/invisible_iframe.html" height="310" width="520"></iframe>
</body> 
```

现在我想`Hi()`从`invisible_iframe.html`（在同一个域上）访问该函数

的代码`invisible_iframe.html`如下

```
<script>
var sActionText = "";
function CheckForMessages()
{
   if(location.hash != sActionText)
   {
     sActionText = location.hash;
     var sAction = "";
     var oSplitActionText = sActionText.split("#");
     sAction = oSplitActionText[1];
     if (sAction == "Test")
     {
        parent.Hi();
     }
   }
}

setInterval(CheckForMessages, 200); 
</script>
<body>
  <h1>Invisible iFrame on xyz.com</h1>
</body> 
```

我正在使用隐藏的 iFrame，`visible_iframe.html`因为我不想更改 visible_iframe.html 的 URL。

现在我希望当单击按钮时`main_page.html`，我会收到警报消息。但这不会发生。在 Firefox 中它说 -*访问属性“嗨”的权限被拒绝*

奇怪的是当我把`parent.Hi();`外部`CheckForMessages()`功能，该`Hi()`功能可以访问并显示警告框。

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-09T21:53:09.440

为什么不使用[easyXDM](http://easyxdm.net/wp/)？这个库应该让你的生活变得非常轻松，并有助于在处理跨域问题时避免安全限制。特别是如果您可以控制这两个域。

> easyXDM 是一个 Javascript 库，使您作为开发人员能够轻松解决同源策略设置的限制，从而使跨域边界的通信和公开 javascript API 变得容易。

**[这是最好且易于使用的 API 之一]**可用于 Web 应用程序之间的跨域通信。easyXDM*易于使用、轻量级、灵活、编写高质量的代码*等。我强烈认为如果您要继续跨域场景，那么您应该采用健壮的跨域 API，例如 easyXDM。

**[easyXDM vs PostMessage Transport?]** easyXDM 将使用 PostMessageTransport 方法，如果浏览器启用了此功能，例如（IE8+，Opera 9+，Firefox 3+，Safari 4+，Chrome 2+），它会使用不同的不受支持的浏览器的传输方法，例如（Firefox 1-2 - 使用 FrameElementTransport）将根据需要使用其他传输方法，例如 FlashTransport、NameTransport 和 HashTransport）。

这显然使得**easyXDM**在浏览器支持方面更胜一筹，特别是旧浏览器。

* * *

**演示使用 easyXDM 的跨域访问（Domain1 [abc.com] 调用远程域 [xyz.com] 上的方法）：**

* * *

****在域 [abc.com] - 主域****

```
 <script type="text/javascript">
        /**
         * Request the use of the JSON object
         */
        easyXDM.DomHelper.requiresJSON("../json2.js");
    </script>
    <script type="text/javascript">
        var remote;
        window.onload = function(){
            /**
             * When the window is finished loading start setting up the interface
             */
            remote = new easyXDM.Interface(/** The channel configuration */{
                /**
                 * Register the url to hash.html, this must be an absolute path
                 * or a path relative to the root.
                 * @field
                 */
                local: "/hash.html",
                /**
                 * Register the url to the remote interface
                 * @field
                 */
                remote: "http://YOUR.OTHER.DOMAIN/YOUR_APPLICATION/YourRemoteApplication.html",
                /**
                 * Register the DOMElement that the generated IFrame should be inserted into
                 */
                container: document.getElementById("embedded")
            }, /** The interface configuration */ {
                remote: {
                    remoteApplicationMethod: {},
                    noOp: {
                        isVoid: true
                    }
                },
                local: {
                    alertMessage: {
                        method: function(msg){
                            alert(msg);
                        },
                        isVoid: true
                    }
                }
            },/**The onReady handler*/ function(){
                /**
                 * Call a method on the other side
                 */
                remote.noOp();
            });
        }

        function callRemoteApplicationMethod(Value1, Value2){
            remote.remoteApplicationMethod(Value1, Value2, function(result){
                alert("Results from remote application" + result);
            });
        }

    </script> 
```

在身体里

```
<input type="button" onclick="callRemoteApplicationMethod(3,5)" value="call remoteApplicationMethod on remote domain"/> 
```

现在在您的远程域端，您需要按如下方式定义您的远程客户端

****在域 [ xyz.com ] - 远程域****

这应该进入页面 YOUR_APPLICATION/YourRemoteApplication.html

```
 <script type="text/javascript">
        /**
         * Request the use of the JSON object
         */
        easyXDM.DomHelper.requiresJSON("../json2.js");
    </script>
    <script type="text/javascript">
        var channel, remote;
        /**
         * When the window is finished loading start setting up the channel
         */
        window.onload = function(){

            /**
             * When the channel is ready we create the interface
             */
            remote = new easyXDM.Interface(/** The channel configuration*/{}, /** The configuration */ {
                remote: {
                    alertMessage: {
                        isVoid: true
                    }
                },
                local: {
                    remoteApplicationMethod: {
                        method: doSomething(value1, value2){
                        // do somethigs with values

                        return "i'm return value from remote domain";
                        }
                    },
                    noOp: {
                        isVoid: true,
                        method: function(){
                            alert("Method not returning any data");
                        }
                    }
                }
            });
        }
    </script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-12T07:11:54.720

我想没有必要支持旧的浏览器，对吧？您可以在现代浏览器中使用[window.postMessage](https://developer.mozilla.org/en/DOM/window.postMessage)来支持跨域通信。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-10T21:37:57.983

你不会相信原因。在 main_page.html (abc.com) 上，您定义了两个 iframe，但您没有关闭它们（缺少 </iframe>）。现在有两种情况：

**情况1：**

iframe 是独立的，因此您的 main_page.html 代码应该是

```
<iframe src="http://xyz.com/visible_iframe.html" ...></iframe>
<iframe src="http://xyz.com/invisible_iframe.html" ...></iframe> 
```

并且来自 invisible_iframe.html 的 javascript 调用应该是

```
parent.frames["visible_iframe"].Hi(); 
```

**案例二：**

iframe 是父子，所以 main_page.html 代码应该是

```
<iframe src="http://xyz.com/visible_iframe.html" ...></iframe> 
```

visible_iframe.html 代码应该包括

```
<iframe src="http://xyz.com/invisible_iframe.html" ...></iframe> 
```

并且来自 invisible_iframe.html 的 javascript 调用应该是

```
parent.Hi(); 
```

就这样。这是你的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T09:52:31.907

假设你的`onlcick`作品是你的输入（只是一个错字）：从，你`invisible_frame`应该用.`visible_frame``Hi()``parent.frames['visible_frame'].Hi()`

现在，`parent.Hi()`尝试访问`Hi()`位于`abc.com`' 页面（因为它是框架的`parent`），所以你被同源策略的硬棒戳了戳。

希望这有帮助并且有效；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T14:32:31.250

尝试创建这三个文件：

[http://abc.com/main.html](http://abc.com/main.html)：

```
<!DOCTYPE html>
<html>
<head>
    <script>
    function SendMsg(id) {
        window.frames.invisible.location = 'http://xyz.com/invisible.html#' + id;
    }
    </script>
</head>
<body>
    <input type="button" id="Test" value="Call iFrame" onclick="SendMsg(this.id);">
    <iframe src="http://xyz.com/visible.html" name="visible" height="250" width="500"></iframe>
    <iframe name="invisible" height="0" width="0" style="display:none;"></iframe>
</body>
</html> 
```

[http://xyz.com/visible.html](http://xyz.com/visible.html)：

```
<!DOCTYPE html>
<html>
<head>
    <script>
    function Hi() {
        alert('Hi there!');
    }
    </script>
</head>
<body>
    <h1>Visible on xyz.com</h1>
</body>
</html> 
```

[http://xyz.com/invisible.html](http://xyz.com/invisible.html)：

```
<!DOCTYPE html>
<html>
<head>
    <script>
    var sActionText = "";
    function CheckForMessages() {
        if (location.hash != sActionText) {
            sActionText = location.hash;
            var sAction = "";
            var oSplitActionText = sActionText.split("#");
            sAction = oSplitActionText[1];
            if (sAction == "Test") {
                parent.frames.visible.Hi();
            }
        }
    }
    setInterval(CheckForMessages, 200); 
    </script>
</head>
<body>
    <h1>Invisible on xyz.com</h1>
</body>
</html> 
```

请注意，框架结构是：

```
 main
       /  \
      /    \
visible    invisible 
```

所以如果你需要从 访问`visible`，`invisible`你需要去：

```
parent.frames.visible.Hi() 
```

展望未来，我建议使用[easyXDM](http://easyxdm.net/wp/)或[jQuery postMessage 插件](http://benalman.com/projects/jquery-postmessage-plugin/)进行跨域通信，而不是重新发明轮子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T17:09:17.290

[由于相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy "维基百科")，它不允许您访问该功能是有原因的。如果可以的话，它会导致真正的安全问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-13T15:31:00.763

如果您不关心 IE7 支持，[CORS（跨域资源共享）](https://developer.mozilla.org/En/HTTP_access_control)或`window.postMessage`（参考：[MDN 上的文档](https://developer.mozilla.org/en/DOM/window.postMessage)或另一个[简单的 postMessage 示例）绝对值得研究；](http://72lions.com/2011/05/cross-origin-communication-with-html5)您还可`postMessage`以为较旧的 IE 浏览器使用 shim。

但是，我将坚持使用 iframe 解决方案，以更准确地回答您的问题。

不幸的是，您应该无法从跨域 iframe访问`parent`（范围）属性/方法。`window`但是，您可以`window`通过同一域上的 iframe 访问范围......在任何深度。因此，一种解决方案是利用垂直 iframe 隧道。

如果创建三个 html 文档：

*顶级 - abc.com*

```
<script>
    function sendMsg( id ) {
       frames["invisible_iframe"].location = "//xyz.com/mid_level.html#" + id;
    }

    window.ACTIONS = {
        Test: function() {
            alert("hello");
            // This action could also start an interaction with another
            // visible iframe by setting a hash, etc
        }
    };
</script>
<input type="button" id="Test" value="Call iFrame" onclick="sendMsg(this.id);">
<iframe name="invisible_iframe" height="0" width="0" frameborder="0" style="visibility:hidden;" src="//xyz.com/mid_level.html"></iframe> 
```

*中级 - xyz.com*

```
<script>
    function sendMsg( id ) {
       frames["invisible_iframe"].location = "//abc.com/low_level.html#" + id;
    }

    var sActionText = "";
    function checkForMessages() {
       if(location.hash != sActionText) {
         sActionText = location.hash.replace(/^#/, "");
         location.hash = "";

         sendMsg(sActionText);
       }
    }

    setInterval(checkForMessages, 20); 
</script>
<iframe name="invisible_iframe" height="0" width="0" frameborder="0" style="visibility:hidden;" src="//abc.com/low_level.html"></iframe> 
```

*低级 - abc.com*

```
<script>
    function runActionInTop( action ) {
        try {
            window.top.ACTIONS[action]();
        } catch ( err ) {
            // Bad action!
        }
    }

    var sActionText = "";
    function checkForMessages() {
       if(location.hash != sActionText) {
         sActionText = location.hash.replace(/^#/, "");
         location.hash = "";

         runActionInTop(sActionText);
       }
    }

    setInterval(checkForMessages, 20); 
</script> 
```

这三个 iframe 可以通信 - 第一个和第三个可以直接通信，第二个可以间接通信（在本例中通过哈希）。

我知道这与您最初尝试使用“可见 iframe”显示的内容有所不同。我想重点说明跨站点通信所需的分层。如果您仍然需要可见的 iframe，您可以在顶层添加通信挂钩，并将附加信息（在哈希中）从中间帧发送回最低帧（最低帧可以直接将信息传递回顶部页）。

是的，我知道这很复杂——这就是 CORS 存在的原因之一`postMessage`:)

我还更改了我认为值得指出的原始代码的一些小方面：

*   使用`//`而不是`http://`意味着该系统将在 http 或 https 上运行。
*   一些浏览器（我相信我是在 Safari 3 中第一次遇到这个问题）实际上可能不会使用`display:none`;加载 iframe。设置`frameborder`属性`visibility:hidden`并将阻止 iframe 可见。
*   `about:blank`如果您未`src`在标记中指定 iframe 属性，某些浏览器将加载（或类似页面）。在 https 页面上，这可能会导致在 IE 中引发不安全的内容警告。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T02:13:18.497

另一种选择，代理。

在服务器端抓取外部文件并将其回显。现在它在您的域上，所以没有问题。

例如在`php`

```
<?php
  $external-site = file_get_contents('http://xyz.com/');
  echo $external-site;
?> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-16T08:26:10.153

我想我会删除任何 iframe 并将 jsonp 与库一起使用。1\. 没有跨域错误 2\. 您可以将数据作为对象获取（易于使用它们 3\. 您甚至可以获得您可以解析的 JS 代码。4\. 甚至可以移动设备（iframe 是上世纪的解决方案.. .) 但是，也许您出于任何原因无法删除 iframe，所以我建议使用现成的库解决方案。祝好运

# jsp - 部署war文件时的数据库设置

> ID：10928246
> 
> 赞同：0
> 
> 时间：2012-06-07T08:25:19.293
> 
> 标签：jsp

我在jsp中做了一个项目。我对整个项目进行了战争。当我将这场战争部署到另一台机器上时，它给出了登录失败的错误，cz我的数据库（sql server 2005）用户名和密码（现在是硬编码使用在 jsp 文件中）与另一台机器不同。我想要一些技巧，让我的项目可以在任何机器上运行而不会产生连接问题。cz我想在我的项目中制作这样的软件，它将分发到许多机器上。所以在这种情况下，这个连接问题不应该发生，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:23:19.120

当然，您不能在您的网络应用程序中存储硬编码凭据。

因此，您必须将它们存储在您部署的服务器上。

在数据源等特定容器功能之外，您可以：

1）使用java Preferences，但是它们有很多错误，特别是如果在linux上使用tomcat，我不会考虑它们（我做了，我清理了）

2）将连接属性放在外部文件中。这是我的做法：

我的 WEB-INF 目录中有一个文本文件，列出了这些属性的所有授权位置。此文件按原样部署在所有服务器上。这是一个例子：

```
# This file lists all the locations where mysoft will look for
# an XML config file when starting.
# It's recommended to use links to simplify parameterization but
# it's also possible to enrich this file.

 # standard windows locations
 c:\mycomp\mysoft\config\config.xml
 d:\mycomp\mysoft\config\config.xml

 # standard linux location
 /var/lib/mycomp/mysoft/config/config.xml 
```

而我的 webapp 只是在初始化时选择第一个找到的文件。为此，我实现了一个 ServletContextListener，我在其中读取文本文件并存储配置。

这是我的听众的一个非常简化的版本：

```
public class MySoftServletContextListener implements ServletContextListener {

public final static String CONFIG_LIST_PATH = "/WEB-INF/config-paths.txt";

@Override
public void contextInitialized(ServletContextEvent contextEvent) {
    InputStream list = context.getResourceAsStream(WORLD_LIST_PATH);
    try {
        BufferedReader listReader = new BufferedReader(new InputStreamReader(list));
        String line;
        while ((line=listReader.readLine())!=null) {
            if (line.length()<4 || line.charAt(0)=='#') continue;
            File file = new File(line);
            if (file.exists()) {

                // log config from the file and, for example, store it in a singleton

                break;
            } else {
                log.info("No config in file " + line + " (file doesn't exist)");
            }
        }
        list.close();
    } catch (IOException e) {
        e.printStackTrace();
        log.severe("Error while looking for a config : " + e.toString());
    }
}

} 
```

servlet 上下文侦听器在我的 web.xml 中引用，如下所示：

```
<listener>
    <listener-class>com.mycomp.mysoft.webapp.MySoftServletContextListener</listener-class>
</listener> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:15:22.807

Not just credentials. You should not hardcode any database properties. JavaEE provides wonderful ways to configure the datasource at runtime:

*   If you are using Servlet 3.0 Container, you can configure the datasource properties in web.xml and use the datasource
*   You can lookup datasource resource with a given name in the application and bind your required datasource . You can also let Servlet Container inject the datasource if you define a resource annotation.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:39:09.967

您可以在 xml 文件中配置与数据库相关的凭据，而不是硬编码，然后在部署时您可以在 xml 文件中进行更改。其他技巧是您可以使用属性文件，并且可以完成同样的事情。

您可以通过其他方式定义数据源，然后您可以使用数据源查找并获取连接。

所以最后这取决于你的要求是什么，然后你可以在此基础上提供解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:42:10.213

答案是不要将用户名和密码（或者任何类似的配置细节）硬编码到 jsp 文件中。

您需要将连接详细信息外部化，最好在 war 文件之外，以便您可以将相同的战争部署到不同的环境）

您应该将连接详细信息放在属性文件中并从中读取。然后，您可以配置您的构建过程为每个环境构建不同的战争 - 或者构建一个战争并为每个部署解包并覆盖连接属性然后重新打包战争。根据您的 Web 服务器，还有其他选项。

您在什么环境中运行它 - Tomcat？老板？

# freebase - 如何在 Freebase 中提取组织的位置？

> ID：10928249
> 
> 赞同：1
> 
> 时间：2012-06-07T08:25:46.807
> 
> 标签：freebase

我正在与 Freebase 合作，我想从 Freebase 中找到一些组织。

例如，我想从卡迪夫大学提取位置（城市、国家、...）。为此，我进行了此查询以查看实体的所有属性：

```
 https://www.googleapis.com/freebase/v1/mqlread?
 query=
 [
    {"name":"cardiff%20university",
    "*":[{}],
    "type":"/education/university"}
 ] 
```

[查询链接在这里](https://www.googleapis.com/freebase/v1/mqlread?query=%5B%7B%22name%22%3a%22cardiff%20university%22,%22%2a%22%3a%5B%7B%7D%5D,%22type%22%3a%22/education/university%22%7D%5D)

但是 O 没有看到任何位置字段，无论是 UK、Cardiff 还是类似的地方。

我认为 Freebase 没有得到这些信息，但是当我进入[网页](http://www.freebase.com/view/en/cardiff_university)时，我可以看到“Cardiff”、“Wales”
和“United Kingdom”。

我怎样才能检索到这些信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:36:11.370

当您使用 * 通配符属性时，您要求提供指定类型的所有属性值，在本例中为[/education/university](http://www.freebase.com/schema/education/university)。您要查找的 containsby 属性是[/location/location](http://www.freebase.com/schema/location/location)的一部分，因此不会显示。

有两种方法可以在查询中显示 containsby。一种是使用完整的属性路径明确要求该属性，如下所示：

```
[{
  "name": "Cardiff University",
  "type": "/education/university",
  "/location/location/containedby": [{}]
}]​ 
```

另一种方法是将默认类型指定为`/location/location`，然后`/education/university`使用如下前缀添加约束：

```
[{
  "name": "cardiff university",
  "*": [{}],
  "type": "/location/location",
  "f:type": "/education/university"
}]​ 
```

# facebook - 脸书加入按钮

> ID：10928255
> 
> 赞同：-2
> 
> 时间：2012-06-07T08:26:30.560
> 
> 标签：facebook

我正在做一个移动网络应用程序，是否可以在我的网站上实现**加入事件按钮**？我想直接从我的网站加入 Facebook 活动。Facebook 使用这个：

参与

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:50:47.277

看到这个链接 [facebook api](http://developers.facebook.com/docs/reference/api/)

根据它，我们无法在我的站点中使用 api 创建使用。

# c# - 如何以编程方式在 2 个单独的窗口上的 DependencyProperty 对象之间添加 WPF 绑定

> ID：10928264
> 
> 赞同：3
> 
> 时间：2012-06-07T08:26:59.167
> 
> 标签：c#, wpf, binding, dependency-properties

我遇到的问题可能很容易解决，但从初学者的角度来看似乎很棘手。

我创建了 2 个同时可见的窗口，一个带有 ListBox，另一个带有 TextBox。我想以编程方式将 window1.ListBox.SelectedValue 绑定到 window2.TextBox.Text 属性。我没有使用价值转换器。

代码很简单：

```
 var binding = new Binding("SelectedValue");
      binding.Source = window1.ListBox;
//      binding.Path = new PropertyPath(ListBox.SelectedValueProperty);
      var bound = window2.TextBox.SetBinding(TextBlock.TextProperty, binding); 
```

出于性能原因，我想使用 DependencyProperty 实例而不是属性名称进行绑定，但我也尝试按名称绑定。绑定只是不起作用。

[您可以在此处](https://turecki.net/download/so/dummy.7z)下载虚拟 VS2010 项目。

这导致另一个问题 - 如何调试绑定，订阅哪个事件（如果有）以检测绑定更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T08:50:50.293

问题已解决 - 我错误地使用 TextBlock.TextProperty 调用了 SetBinding，而它应该是 TextBox.TextProperty。

# android - 在 Android 中暂停 UI 布局

> ID：10928266
> 
> 赞同：0
> 
> 时间：2012-06-07T08:27:11.470
> 
> 标签：android, user-interface, view

我在一个例程中有一堆代码，看起来有点像这样：

```
a.setContentView(R.layout.myLayout);
textview t1 = (TextView) a.findViewById(R.id.mylayout_t1);
t1.setText("Hello")
t1.setTypeface(font);
t1.setTextColor(colour);
t1.setTextSize(fontSize);

textview t2 = (TextView) a.findViewById(R.id.mylayout_t2);
t2.setText("Hello Again")
t2.setTypeface(font);
t2.setTextColor(colour);
t2.setTextSize(fontSize); 
```

我遇到的问题是，在调用例程之前，布局是使用默认字体/大小/颜色的所有字体完成的，然后它们迅速更改为指定的值，这在视觉上不是很令人愉快。

是否可以在例程的开头添加某种命令来暂停任何布局，然后在例程结束时添加另一个命令来恢复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:51:51.350

有两种方法：

1）把你所有的代码（你上面提到的）放在`onCreate()`方法中，最后调用`t1.setVisible(true);`

2) 将代码放入创建 UI 的方法中（类似`initUI()`或类似的方法），并在将可见性设置为 true 之前调用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:40:22.917

您是否考虑过使用 XML 来设置文本样式，而不是以编程方式进行。有关此主题的更多信息，请参阅[此 Android Dve 指南页面](http://developer.android.com/guide/topics/resources/style-resource.html)。

另一种（不好的？）方法可能是使用 XML 将视图可见性设置为 false，并且当您更改样式时，调用`t1.setVisibility(true)`. 没有尝试过这个，所以它可能会产生类似的、不需要的结果。

# c# - 如何遍历字典 > 并且每次返回每个列表的部分值？

> ID：10928273
> 
> 赞同：0
> 
> 时间：2012-06-07T08:28:07.250
> 
> 标签：c#, linq, c#-4.0, dictionary

字典中的每个键都有**许多**整数列表。我需要遍历每个键，并且每次都从列表中获取 n 项并执行此操作，直到我遍历**所有列表中的所有项**。实施它的最佳方法是什么？我需要实现一些枚举器吗？

编码：

```
enum ItemType { Type1=1, Type2=2, Type3=3 };

var items = new Dictionary<ItemType, List<int>>();
items[ItemType.Type1] = new List<int> { 1, 2, 3, 4, 5 };
items[ItemType.Type2] = new List<int> { 11, 12, 13, 15 };
items[ItemType.Type3] = new List<int> { 21, 22, 23, 24, 25, 26 }; 
```

例如：n=2。

1.  第一次迭代返回 1,2,11,12,21,22
2.  第二次迭代返回 3,4,13,15,23,24
3.  第三次迭代返回 5,25,26

**更新**：最后我必须按顺序获取这些项目的列表：1,2,11,12,21,22, 3,4,13,15,23,24, 5,25,26

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:48:13.660

这是如何完成的：

```
enum ItemType { Type1 = 1, Type2 = 2, Type3 = 3 };

Dictionary<ItemType, List<int>> items = new Dictionary<ItemType, List<int>>();
items[ItemType.Type1] = new List<int> { 1, 2, 3, 4, 5 };
items[ItemType.Type2] = new List<int> { 11, 12, 13, 15 };
items[ItemType.Type3] = new List<int> { 21, 22, 23, 24, 25, 26 };

// Define upper boundary of iteration
int max = items.Values.Select(v => v.Count).Max();

int i = 0, n = 2;
while (i + n <= max)
{
    // Skip and Take - to select only next portion of elements, SelectMany - to merge resulting lists of portions
    List<int> res = items.Values.Select(v => v.Skip(i).Take(n)).SelectMany(v => v).ToList();
    i += n;

    // Further processing of res
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:38:10.893

这将为您完成：

```
var resultList = new List<int>();
items.ToList().ForEach(listInts => resultList.AddRange(listInts.Take(n)); 
```

这让 LINQ 扩展为您完成了艰苦的工作。[如果您请求的数量超过实际数量， Take()](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28%22System.Linq.Enumerable.Take%60%601%22%29;k%28SolutionItemsProject%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.0%29;k%28DevLang-csharp%29&rd=true)将尽可能多地使用它而不会引发异常。在这种情况下，我将结果添加到另一个列表，但您可以轻松地在末尾标记另一个[ForEach()](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28%22System.Collections.Generic.List%601.ForEach%22%29;k%28SolutionItemsProject%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.0%29;k%28DevLang-csharp%29&rd=true)`Take()`以迭代结果。

我从示例序列中注意到，您正在从*x起点检索**n*个项目- 如果您编辑您的问题以包括如何确定起点，那么我将调整我的示例。

 ** * *

# 编辑：

因为您想在每次迭代中从每个列表中获取*n*个项目，直到没有更多元素返回，所以可以这样做：

```
class Program
{
    static void Main(string[] args)
    {

        var items = new Dictionary<ItemType, List<int>>();
        items[ItemType.Type1] = new List<int> { 1, 2, 3, 4, 5 };
        items[ItemType.Type2] = new List<int> { 11, 12, 13, 15 };
        items[ItemType.Type3] = new List<int> { 21, 22, 23, 24, 25, 26 };

        int numItemsTaken = 0;
        var resultsList = new List<int>();
        int n = 2, startpoint = 0, previousListSize = 0;

        do
        {
            items.ToList().ForEach(x => resultsList.AddRange(x.Value.Skip(startpoint).Take(n)));
            startpoint += n;
            numItemsTaken = resultsList.Count - previousListSize;
            previousListSize = resultsList.Count;
        } 
        while (numItemsTaken > 0);

        Console.WriteLine(string.Join(", ", resultsList));
        Console.ReadKey();
    }

    enum ItemType { Type1 = 1, Type2 = 2, Type3 = 3 };
} 
```

这是您将使用`do while`循环的少数几次之一，无论列表的大小`n`或列表的大小或有多少列表，它都会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:46:22.713

您不需要定义自定义枚举器，只需`MoveNext`手动使用：

第 1 步，将您转换`Dictionary<ItemType, List<int>>`为`Dictionary<ItemType, List<IEnumerator<int>>`：

```
var iterators = items.ToDictionary(p => p.Key, p => (IEnumerator<int>)p.Value.GetEnumerator()); 
```

第二步：`MoveNext`手动处理：

```
public List<int> Get(Dictionary<ItemType, IEnumerator<int>> iterators, int n)
{
    var result = new List<int>();

    foreach (var itor in iterators.Values)
    {
        for (var i = 0; i < n && itor.MoveNext(); i++)
        {
            result.Add(itor.Current);
        }
    }

    return result;
} 
```

`Get`多次调用会给你预期的结果。枚举器本身将保持当前位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:50:23.710

“最佳方式”取决于您的目标，例如可读性或性能。

这是一种方法：

```
var firstIter = items.Values.SelectMany(list => list.Take(2));
var secondIter = items.Values.SelectMany(list => list.Skip(2).Take(2));
var thirdIter = items.Values.SelectMany(list => list.Skip(4).Take(2));

var finalResult =  firstIter.Concat(secondIter).Concat(thirdIter); 
```

**编辑：**这是一个更通用的版本：

```
var finalResult = Flatten(items, 0, 2);

IEnumerable<int> Flatten(
    Dictionary<ItemType, List<int>> items, 
    int skipCount, 
    int takeCount)
{
    var iter = items.Values.SelectMany(list => list.Skip(skipCount).Take(takeCount));

    return
        iter.Count() == 0 ?  // a bit inefficient here
        iter :
        iter.Concat(Flatten(items, skipCount + takeCount, takeCount));
} 
```*

# php - 包含文件中的 NULL 变量

> ID：10928274
> 
> 赞同：1
> 
> 时间：2012-06-07T08:28:08.433
> 
> 标签：php, global-variables

如果我有三个文件“ `index.php`”“ `file.php`”和“ `fns.php`”

*第一个例子（有效）：*

**索引.php：**

```
<?php
  $var = "Variable Data";
  include "file.php";
?> 
```

**文件.php：**

```
<?php
  var_dump($var);  #Output will be : string(13) "Variable Data"
?> 
```

*第二个例子（它不起作用）：*

**索引.php：**

```
<?php
  include "fns.php";
  $var = "Variable Data";
  load("file.php");
?> 
```

**fns.php：**

```
<?php
  function load($file) { include $file; }
?> 
```

**文件.php**

```
<?php
  var_dump($var); #Output will be : NULL
?> 
```

**如何使用类似函数包含文件`load()`并保持变量在没有额外的情况下工作`Global $var;`？**

*我的解决方案：*

```
<?php
  function load($file)
  {
    $argc = func_num_args();
    if($argc>1) for($i=1;$i<$argc;$i++) global ${func_get_arg($i)};

    include $file;
  } 

  #Call :
  load("file.php", "var");
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T08:31:14.713

因为您将文件包含在函数内部，所以包含文件的范围就是该函数的范围。

为了包含其他变量，请将它们注入函数中。

```
function load($file, $var) { include $file; } 
```

这样，`$var`将可用。

* * *

你甚至可以让事情变得更有活力：

```
function load($file, $args) { extract($args); include($file); } 
```

并像这样使用它：

```
load("path/to/file.php", array("var"=>$var, "otherVar"=>$otherVar)); 
```

PHP 会将变量提取为正确的符号名称 ( `$var`, `$otherVar`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:34:53.517

当您尝试在函数中包含文件时，变量的范围在函数中。如果您在函数加载中设置变量，那么它不是`NULL`.

```
function load($file, $var) {
    include($file);
} 
```

# c# - 当用户在 asp.net mvc3 中未授权时重定向到另一个页面

> ID：10928277
> 
> 赞同：23
> 
> 时间：2012-06-07T08:28:19.230
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我读了

[如果未在 MVC 3 中进行身份验证，如何轻松重定向？](https://stackoverflow.com/questions/6770563/how-to-easily-redirect-if-not-authenticated-in-mvc-3)[当用户未获得授权](https://stackoverflow.com/questions/6329524/redirect-to-accessdenied-page-when-user-is-not-authorized)但来自答案的链接（表示[http://wekeroad.com/2008/03/12/aspnet-mvc-securing-your-controller-actions/](http://wekeroad.com/2008/03/12/aspnet-mvc-securing-your-controller-actions/)）不起作用时 重定向到 AccessDenied 页面。

我放

```
[Authorize(Users = "test")]
    public class RestrictedPageController: Controller
    {

        public ActionResult Index()
        {
           return View();
        }

 ....
    } 
```

在我的 web.config 中，我已经

```
 <authentication mode="Forms">
      <forms loginUrl="~/Account/LogOn" timeout="2880" />
 </authentication> 
```

相应地与[https://stackoverflow.com/a/6770583/998696](https://stackoverflow.com/a/6770583/998696)

但是当我想访问时`/RestrictedPage/Index`，它必须将我重定向到其他页面（来自其他控制器）。而不是这个，错误看起来像：

```
Server Error in '/Project' Application.

The view 'LogOn' or its master was not found or no view engine supports the searched locations. The following locations were searched:
~/Views/Account/LogOn.aspx
~/Views/Account/LogOn.ascx
~/Views/Shared/LogOn.aspx
~/Views/Shared/LogOn.ascx
~/Views/Account/LogOn.cshtml
~/Views/Account/LogOn.vbhtml
~/Views/Shared/LogOn.cshtml
~/Views/Shared/LogOn.vbhtml 
```

登录前，页面表单显示正确，但访问页面`Logon`时出现上述错误。`/RestrictedPage/Index`我可以使用不同的授权访问`RestrictedPage`页面的用户登录。

我的错误在哪里以及如何设置重定向？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-06-07T09:08:53.627

默认`Authorize`属性的行为方式是，当用户*未经过身份验证*或经过*身份验证但未授权*时，它将状态代码设置为**401 (UnAuthorized)**。当过滤器将状态代码设置为**401** 时，ASP.NET 框架会检查网站是否启用了表单身份验证，然后将其重定向到`loginUrl`那里设置的参数。

如果您想更改该行为，`AccessDenied`如果用户已通过身份验证但未授权，则您希望将用户重定向到控制器，那么您必须扩展`Authorize`属性并覆盖该`HandleUnauthorizedRequest`方法。

例如。

```
public class CustomAuthorize: AuthorizeAttribute
{
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
        {
            filterContext.Result = new HttpUnauthorizedResult();
        }
        else
        {
           filterContext.Result = new RedirectToRouteResult(new 
               RouteValueDictionary(new { controller = "AccessDenied" }));
        }
    }
} 
```

您可以根据需要覆盖`HandleUnauthorizedRequest`，然后您必须标记控制器操作以使用该`CustomAuthorize`属性而不是内置属性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-07-22T07:31:36.830

我喜欢 Mark's Answer，
但我不想将我的所有操作属性
从 [Authorize] 更改为 [CustomAuthorize]

我编辑`Login()`操作并在显示视图之前`AccountController`
检查 我认为，如果经过身份验证的用户转到， 我将重定向到。`Request.IsAuthenticated`
`/Account/Logon`
`/Error/AccessDenied`

```
 [AllowAnonymous]
    public ActionResult Login(string returnUrl)
    {
        if (Request.IsAuthenticated)
        {
            return RedirectToAction("AccessDenied", "Error");
        }

        ViewBag.ReturnUrl = returnUrl;

        return View();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:36:31.497

放置“/Account/LogOn”而不是“~/Account/LogOn”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-10T08:08:11.757

因为我不想覆盖`AuthorizeAttribute`我使用了过滤器

```
public class RedirectFilter : ActionFilterAttribute
{
   public override void OnActionExecuting(ActionExecutingContext filterContext)
    {

        if (!IsAuthorized(filterContext))
        {
            filterContext.Result =
                new RedirectToRouteResult(new RouteValueDictionary(new {controller = "AccessDenied"}));
        }
    }

    private bool IsAuthorized(ActionExecutingContext filterContext)
    {
        var descriptor = filterContext.ActionDescriptor;
        var authorizeAttr = descriptor.GetCustomAttributes(typeof(AuthorizeAttribute), false).FirstOrDefault() as AuthorizeAttribute;

        if (authorizeAttr != null)
        {
            if(!authorizeAttr.Users.Contains(filterContext.HttpContext.User.ToString()))
            return false;
        }
        return true;

    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T08:41:01.573

是的，正如您在 web.config 中提到的那样是正确的

```
<forms loginUrl="~/Account/LogOn" timeout="2880" /> 
```

重定向正在寻找帐户控制器和登录操作结果。如果你想重定向你的页面，改变那里而不是帐户和登录

# python - 从 db 获取文本作为 django 字典

> ID：10928281
> 
> 赞同：0
> 
> 时间：2012-06-07T08:28:43.700
> 
> 标签：python, django, json

我最近加入了一家公司，该公司正在使用 django 构建他们的产品。我目前负责其中一个应用程序，该应用程序在我来这里之前已经开发了一点。

应用程序中的一个实体具有一个 json 字典属性，该属性已作为文本字段保存在数据库中。此外，此属性在模型中标记为文本字段。因此，您可以想象它没有得到正确处理。

我想更改它并使用[https://github.com/bradjasper/django-jsonfield](https://github.com/bradjasper/django-jsonfield)将其设置为 json 字段，效果非常好。

但是，我遇到了一个特殊的问题。存储在数据库中的先前数据未正确处理，并且由于它是 unicode 数据，因此数据库中的文本字段如下所示：

```
{u'key': u'value'} 
```

现在，当实体管理器尝试使用 json 字段加载这些值时，它当然会中断，因为它不再是有效的 json 字符串。

我已经对如何克服这个问题进行了一些研究，但一无所获。

**我的问题：**

你对如何克服这个有什么建议吗？它可以是任何类型的解决方案。

*   我可以在晚上运行一些东西来更改该字段以将其转换为有效的 json 字符串。
*   对 json-field 代码进行了一些更改，使其能够正确处理这些值。

**附加信息**

我们使用`postgres`with`psycopg2`作为 django 的数据库后端。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:40:36.940

您可能只需要遍历整个表，加载字段，将其转换为真正的 Python 字典，然后使用`json.dumps`. `ast.literal_eval`是转换阶段的不错选择，因为它的工作方式与内置类似，`eval`但受到更多限制，因此对您的系统风险较小。

```
for obj in MyModel.objects.all():
    value = ast.literal_eval(obj.dict_value)
    obj.dict_value = json.dumps(value)
    value.save() 
```

# c++ - 可能的原因包括预处理器指令或编译器链接器优化，vs10

> ID：10928282
> 
> 赞同：0
> 
> 时间：2012-06-07T08:28:45.620
> 
> 标签：c++, visual-studio-2010, breakpoints

我在尝试在类方法中实现断点时遇到了以下问题。

> 当前不会命中断点。没有可执行代码与此行相关联。可能的原因包括：预处理器指令或编译器/链接器优化

在此类的另一个方法中可以插入断点。这个函数在代码中被引用。如果我不放断点而只想进入它，从代码中调用它的地方我得到空指针断言。该类在`*.hpp`文件中实现。我试图清理并重新构建，但它没有帮助。有什么建议/想法吗？

# objective-c - NSMutableDictionary 的 Objective-C 运行时问题设置对象

> ID：10928286
> 
> 赞同：0
> 
> 时间：2012-06-07T08:29:03.207
> 
> 标签：objective-c, objective-c-runtime

我正在编写一个相当复杂的系统，它使用大量元数据来管理动态对象。我正在使用各种 Objective-C 运行时特性。我想将东西添加到可变字典中，这些字典是各种类中的属性。我想在知道类类型并且知道属性名称的情况下执行此操作，但我不想对分配进行“硬编码”。如果我对其进行硬编码，我可以这样做：

```
[[(myknownclass*)localClassObjectInstance knownDictionary] setObject:value forKey:key]; 
```

但我想做的是这样的：

```
[[unknownClassObjectInstance {aStringContainingTheDictionaryName}] setObject:value forKey:key]; 
```

当我在运行时只有属性的名称时，如何引用可变字典属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:32:25.183

您可以使用`-valueForKey:`运行该方法：

```
[(NSMutableDictionary*)[inst valueForKey:@"whateverMethodName"] setObject:o forKey:k]; 
```

或者，您可以使用`performSelector:`

```
SEL dictGetter = NSSelectorFromString(@"whateverMethodName");
NSMutableDictionary* dict = [inst performSelector:dictGetter];
[dict setObject:o forKey:k]; 
```

# asp.net-mvc - ASP.NET MVC - 数据库实体或视图模型？

> ID：10928287
> 
> 赞同：39
> 
> 时间：2012-06-07T08:29:14.983
> 
> 标签：asp.net-mvc, asp.net-mvc-3, orm, viewmodel

我目前正在开发一个 ASP.NET MVC 项目。

团队中的一些开发人员希望将自动生成的数据库实体直接绑定到视图。

其他开发人员想要创建定制的 ViewModel 并将它们绑定到 Views。

客观地说，这两种方法的优缺点是什么？

（“数据库实体”是指 ORM 框架生成的自动生成的类，例如 LINQ to SQL、Entity Framework 或 LLBLGen）。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-07T08:39:53.367

绝对**在您的视图中使用视图模型**，并使用类似的东西`AutoMapper`轻松地从实体创建视图模型。

缺点：

1.  有时感觉就像在复制代码，特别是当视图模型和实体具有完全相同的属性时

优点：

1.  您经常需要以更简单的格式（通常称为展平）来表示对象，但您需要在服务器端完全保真。这使您可以在两者之间进行转换，而不会用演示文稿弄乱您的域模型。
2.  聚合根通常有许多与特定视图无关的值对象和附加实体，在视图模型中省略它们可以使其更易于使用。
3.  您的实体将有许多在 API 方面合理的双向引用，但在为 JSON、XML 等序列化它们时会创建纯粹的地狱。视图模型将消除这些循环引用。
4.  您可能经常使用相同的实体，但以不同的方式用于不同的视图。试图在一种类型上平衡两种需求可能会造成巨大的混乱。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-07T08:51:58.873

正统的观点是永远不要在视图中使用原始数据库实体。像任何规则一样，如果您非常了解您的实体并了解其后果，那么它就会被打破，但是有很好的理由不打破该规则，特别是在团队合作和未来将由人们维护的代码时谁可能不像你那样理解规则或实体。主要原因是：

1.  **ORM 延迟加载。**假设您的客户有一个延迟加载的集合 Orders。您将 Customer 传递给 View，它会遍历 Orders。您会在 Orders 表上获得 N*1 选择。但这也意味着你的数据库连接仍然需要在 View 中打开。有一种模式是人们使用“Transaction per Action”来处理 Action_Executed 事件中的数据库上下文，该事件发生在您的视图呈现之前。因此，您可能会在处理完数据库后尝试访问它。即使您现在不这样做，将来有人可能会决定实施该模式，因为它很流行。

2.  **ViewModel 的关注点与 db Model 不同。**例如，您通常使用验证属性装饰您的 ViewModel 属性。这些通常是不同的，或者只涉及 UI 而不是数据库。如果您绑定到数据库实体，您会发现所有这些 UI 问题都会污染您的数据库实体。

3.  与 2 相关 - **ViewModel 的要求可能需要计算或派生的属性。**例如，由名字和姓氏构成的全名。这些东西最好保存在 ViewModel 中。

4.  **您可以独立于数据库对 ViewModel 进行单元测试。**ViewModel 最终可能包含大量需要进行单元测试的逻辑。如果它不绑定到您的数据库（与 EF 实体一样），这更容易测试。

一般来说，创建和维护 ViewModels（即使没有 AutoMapper）不是开销，你会发现它是一个整体上更好的开发模式。除了最简单的情况（例如，静态数据的查找列表），我会推荐它。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-07T09:00:32.153

**我相信使用视图模型是唯一的方法，因此 ORM 实体没有优点:) 视图模型不仅为视图提供数据，而且还定义视图的外观（通过定义模板）或它应该如何验证（通过添加数据注释或实现 IDataErrorInfo）。**

**使用视图模型：**

**优点：**

*   视图模型只包含视图所需的属性，没有别的。
*   视图模型可能包含使用数据注释或 IDataErrorInfo 的特定验证规则。
*   视图模型可以组合来自不同数据库实体的值。
*   视图模型自己记录，不依赖于任何框架。
*   视图模型可以保护您免受伪造的 POST，其中包含未以表单提供但包含在 ORM 实体中的值。
*   您可以轻松地为视图模型指定显示模板，并在许多地方使用`DisplayFor`或`EditorFor`助手重用它们。

**使用 ORM 实体：**

**缺点：**

*   ORM 实体已经包含数据注释，这可能会打乱您的验证。示例：用户中的密码字段可能标记为`Required`，但仅更改基本用户信息时不需要。
*   ORM 实体与框架（Entity Framework）有很强的联系，可能不容易在其中实现规则。
*   ORM 实体可以包含多个视图的属性，但很难区分不同视图的验证规则。
*   使用带有延迟加载的 ORM 实体会导致您在呈现视图时执行 SQL 查询。它不应该发生。
*   使用 ORM 实体可能会导致使用大型 SQL 查询而不是小型 SQL 查询。当您想显示包含名字和姓氏的下拉列表时，您应该只从数据库中检索名字和姓氏，而不是整个实体。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-07T21:59:38.560

到目前为止，感谢您的回答——它们对理解这两种方法的优缺点有很大帮助。我要补充一件事，其他人没有提到。

## 过度发布攻击

直接绑定数据库实体的一个令人担忧的缺点是“过度发布攻击”。这是攻击者使用不比 FireBug 更高级的工具的地方，可以插入不打算由用户编辑但确实存在于 DB 实体上的表单字段。

考虑一个“编辑我的个人资料”页面。您的视图可能如下所示：

```
@using(Html.BeginForm() {
  <div>
    @Html.LabelFor(x=> x.FirstName)
    @Html.TextBoxFor(x=> x.FirstName)
  </div>
  <div>
    @Html.LabelFor(x=> x.LastName)
    @Html.TextBoxFor(x=> x.LastName)
  </div>

  <input type="Submit" value="Save" />
} 
```

它将呈现以下 HTML：

```
<form action="/profile/edit" method="post">
  <div>
    <label for="FirstName">FirstName</label>
    <input type="text" name="FirstName" value="" />
  </div>
  <div>
    <label for="LastName">LastName</label>
    <input type="text" name="LastName" value="" />
  </div>

  <input type="Submit" value="Save" />
</form> 
```

使用 FireBug，攻击者只需在表单中插入一段 HTML：

```
 <input type="hidden" name="IsAdmin" value="true" /> 
```

...突然间，用户能够以非常意想不到和有害的方式更改数据。

这里有一些更可怕的隐藏表单域：

```
 <input type="hidden" name="ShoppingCart.Items[0].Price" value="0.01" />
  <input type="hidden" name="BankAccount.Balance" value="1000000" />
  <input type="hidden" name="User.Administrator.Password" value="hackedPassword" /> 
```

哎哟!

信息取自： [http ://hendryluk.wordpress.com/tag/asp-net-mvc/](http://hendryluk.wordpress.com/tag/asp-net-mvc/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-07T09:41:51.220

我曾经尝试开发一个直接在 ASP.NET 视图中使用 NHibernate 实体的应用程序。我遇到了许多延迟加载和延迟 SQL 执行的问题，这些问题直接从视图运行，而不是在业务逻辑层甚至控制器中运行。迁移到视图模型并使用自动映射器似乎解决了所有这些问题，并使应用程序更易于测试、调试和维护。

我还发现视图模型有助于在页面上保存我需要的所有相关数据。一些开发人员喜欢为此使用动态 ViewBag，但这不利于测试和调试。

特别是，当您想从下拉列表中选择关联实体时，视图模型让您变得很容易。

AutoMapper 是这个项目的救星，因为它省去了编写大量映射代码的工作，我所要做的就是创建视图模型，然后将控制器从实体自动映射到视图模型。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-06-07T11:43:21.223

不要向客户端公开后端实体。现实世界的应用程序有行为 - 而不是 CRUD。如果您将实体数据绑定到视图，那么当客户端需要行为时，您深入研究泥泞的黑客只是时间问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-07T08:47:01.433

我正要添加与 hackedbychinese 完全相同的情绪。我还要补充一点，使用 fk 来查找列表，您只需要使用视图模型，因为实体模型只会在该表中保存一个指向单个 id 的指针。视图模型允许您将所需的填充列表传递到视图中 - 瞧。

此外，视图模型可以在需要时包含谨慎的逻辑，这绝对不是实体模型的情况。此外，您的验证可能会因视图的使用而异，因此每个“视图”要求可以应用不同的验证。

ViewModel 的目的主要是关注点分离——将 View 与 Model 的实现细节解耦。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-14T03:58:42.223

在您的视图中使用数据库实体，尤其是您的表单是一个*巨大的*安全问题。取以下 POCO 对象

```
public class User
{
    public int Id { get; set; }
    public string Username { get; set; }
    public string Email { get; set; }
    public bool IsAdmin { get; set; }
} 
```

现在假设您正在展示一个允许用户更改其电子邮件的视图。使用 Db 实体而不是视图模型时处理表单结果的 MVC 方法如下所示：（除非您不使用模型绑定，在这种情况下，您需要为自己做更多的工作）

```
public class HomeController : Controller
{
    [HttpPost]
    public ActionResult ChangeEmail(User user)
    {
        //....
    }
} 
```

Asp.net 中的模型绑定通过查找与模型中的属性名称匹配的 GET 或 POST 参数来工作。因此，用户只需添加`IsAdmin=true`POST 参数和 viola，传入`ChangeEmail`函数的模型会将 IsAdmin 属性设置为 true，这很容易被意外添加到数据库中，让用户可以自由访问更改数据他们无权改变。

这适用于用户权限、更改谁拥有实体（使您的问题与我而不是您相关联）、更改原始创建日期等...

# android - 从 TableLayout 获取数据？

> ID：10928288
> 
> 赞同：0
> 
> 时间：2012-06-07T08:29:15.457
> 
> 标签：android, android-tablelayout

当我试图获取值来计算总数时，我无法获取值，而是获取*android.widget.TableRow@4103c468*。我怎样才能克服这种情况，我需要将这些值传递给另一个`Activity`。我的代码：

```
public class ProvisionActivity extends Activity {

    private TableLayout mTable;
    private static int sCount = 0;
    Button btnAdd;
    String[] pnames = { "provision1", "provision2", "provision3", "provision4",
            "provision5" };
    String[] pprice = { "45", "85", "125", "15", "198" };
    StringBuffer xpenses;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        btnAdd = (Button) findViewById(R.id.button1);
        mTable = (TableLayout) findViewById(R.id.tableprovision);
        xpenses = new StringBuffer();
        btnAdd.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                mTable.addView(addRow(pnames, pprice));

                for (int i = 0; i < mTable.getChildCount(); i++) {
                    mTable.getChildAt(i);

                    System.out.println("Table Row values are   "
                            + mTable.getChildAt(i));

                    xpenses = xpenses.append(mTable.getChildAt(i).toString());

                    System.out
                            .println("Expense Table Values Are After Storing it in a String variable "
                                    + xpenses);

                }
            }
        });

    }

    private TableRow addRow(String[] sname, final String[] sprice) {

        TableRow tr = new TableRow(this);
        tr.setId(1000 + sCount);
        tr.setLayoutParams(new TableLayout.LayoutParams(
                TableLayout.LayoutParams.FILL_PARENT,
                TableLayout.LayoutParams.WRAP_CONTENT));
        TableRow.LayoutParams blparams = new TableRow.LayoutParams(150, 35);
        final Spinner spinner = new Spinner(this);
        spinner.setLayoutParams(blparams);
        spinner.setBackgroundColor(Color.DKGRAY);
        ArrayAdapter<String> xtypeadapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_spinner_dropdown_item, sname);

        spinner.setAdapter(xtypeadapter);
        tr.addView(spinner);
        TableRow.LayoutParams tlparams = new TableRow.LayoutParams(55,
                TableLayout.LayoutParams.WRAP_CONTENT);
        final TextView textView = new TextView(this);
        textView.setLayoutParams(tlparams);
        textView.setTextColor(Color.BLACK);

        spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                textView.setText("  "
                        + sprice[spinner.getSelectedItemPosition()]);

            }

            public void onNothingSelected(AdapterView<?> arg0) {

            }
        });
        tr.addView(textView);
        TableRow.LayoutParams blparams1 = new TableRow.LayoutParams(
                TableRow.LayoutParams.WRAP_CONTENT,
                TableRow.LayoutParams.WRAP_CONTENT);
        final Button button = new Button(this);
        button.setLayoutParams(blparams1);
        button.setBackgroundColor(Color.LTGRAY);
        button.setText(" - ");
        button.setId(2000 + sCount);
        button.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                mTable.removeView(findViewById(v.getId() - 1000));
            }
        });
        tr.addView(button);
        sCount++;
        return tr;

    }
} 
```

> 布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginBottom="154dp"
        android:layout_marginLeft="42dp"
        android:text="Total"
        android:textColor="#000000" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignParentRight="true"
        android:layout_marginRight="80dp"
        android:text="TextView"
        android:textColor="#000000" />

    <TableLayout
        android:id="@+id/tableprovision"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="74dp" >
    </TableLayout>

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="33dp"
        android:text="Expenses "
        android:textColor="#000000"
        android:textSize="18sp" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/textView3"
        android:layout_marginRight="30dp"
        android:text="Add" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:02:55.680

我以下面显示的方式解决了上述问题..对上述代码进行了一些修改

```
public class ProvisionActivity extends Activity {

private TableLayout mTable;
private static int sCount = 0;
Button btnAdd, btntot;
TextView tot;
int sum = 0;
String[] pnames = { "provision1", "provision2", "provision3", "provision4",
        "provision5" };
String[] pprice = { "45", "85", "125", "15", "195" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnAdd = (Button) findViewById(R.id.button1);
    mTable = (TableLayout) findViewById(R.id.tableprovision);
    tot = (TextView) findViewById(R.id.textViewsum);
    btntot = (Button) findViewById(R.id.buttontotal);

    btnAdd.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            mTable.addView(addRow(pnames, pprice));
        }
    });

    btntot.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            int total = 0;
            for (int i = 0; i < mTable.getChildCount(); i++) {
                TableRow mRow = (TableRow) mTable.getChildAt(i);
                Spinner mspinner = (Spinner) mRow.getChildAt(0);
                TextView mTextView = (TextView) mRow.getChildAt(1);
                Log.i("mspinner", "" + mspinner.getSelectedItem());
                total = total
                        + Integer.parseInt(mTextView.getText().toString());
            }

            System.out.println("Sum of the provision are " + total);
            tot.setText("" + total);
        }

    });

}

private TableRow addRow(String[] sname, final String[] sprice) {

    TableRow tr = new TableRow(this);
    tr.setId(1000 + sCount);
    tr.setLayoutParams(new TableLayout.LayoutParams(
            TableLayout.LayoutParams.MATCH_PARENT,
            TableLayout.LayoutParams.WRAP_CONTENT));
    TableRow.LayoutParams blparams = new TableRow.LayoutParams(150, 35);
    final Spinner spinner = new Spinner(this);
    spinner.setLayoutParams(blparams);
    spinner.setBackgroundColor(Color.DKGRAY);
    ArrayAdapter<String> xtypeadapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_dropdown_item, sname);

    spinner.setAdapter(xtypeadapter);
    tr.addView(spinner);
    TableRow.LayoutParams tlparams = new TableRow.LayoutParams(55,
            TableLayout.LayoutParams.WRAP_CONTENT);
    final TextView textView = new TextView(this);
    textView.setLayoutParams(tlparams);
    textView.setTextColor(Color.BLACK);

    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        private boolean flag = false;

        public void onItemSelected(AdapterView<?> spin, View arg1,
                int position, long arg3) {
            if (flag) {
                flag = true;
                return;
            }

            textView.setText(sprice[position]);

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }

    });
    tr.addView(textView);
    TableRow.LayoutParams blparams1 = new TableRow.LayoutParams(
            TableRow.LayoutParams.WRAP_CONTENT,
            TableRow.LayoutParams.WRAP_CONTENT);

    final Button button = new Button(this);
    button.setLayoutParams(blparams1);
    button.setBackgroundColor(Color.LTGRAY);
    button.setText(" - ");
    button.setId(2000 + sCount);
    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            sCount--;
            mTable.removeView(findViewById(v.getId() - 1000));

        }
    });
    tr.addView(button);
    sCount++;
    return tr;

}
} 
```

# java - 如何在多显示器环境下以全屏显示模式显示 JFrame？

> ID：10928293
> 
> 赞同：1
> 
> 时间：2012-06-07T08:30:18.730
> 
> 标签：java, swing, awt, fullscreen, multiple-monitors

有一个JFrame，在多显示器环境下，如何全屏显示这个JFrame？例如，现在JFrame在显示器1显示，当它要切换到全屏显示模式时，必须在显示器1显示；如果在显示器 2 中显示，当它要切换到全屏显示模式时，必须在显示器 2 中显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:23:59.567

尝试这个，

对于单屏

```
Toolkit tool = Toolkit.getDefaultToolkit();
Dimension dim = tool.getScreenSize();
int screenWidth = dim.getWidth();
int screenHeight = dim.getHeight(); 
```

多屏

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
GraphicsDevice[] gs = ge.getScreenDevices();

// Get size of each screen

for (int i=0; i<gs.length; i++) {
    DisplayMode dm = gs[i].getDisplayMode();
    int screenWidth = dm.getWidth();
    int screenHeight = dm.getHeight();
} 
```

# java - Eclipse 格式化程序和双大括号初始化

> ID：10928298
> 
> 赞同：5
> 
> 时间：2012-06-07T08:30:29.347
> 
> 标签：java, eclipse

调整 Eclipse 格式化程序以很好地格式化[双括号初始化是否可行？](http://c2.com/cgi/wiki?DoubleBraceInitialization)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:46:13.393

这不是实际答案，但由于我无法在评论中向您显示格式化代码，因此我正在使用它。

**无格式代码：**

```
new ArrayList<String>() {   {           add("RJ");              add("MJ");}}; 
```

**格式化代码**[ECLIPSE 格式化程序]

```
 new ArrayList<String>() {
        {
            add("RJ");
            add("MJ");
        }
    }; 
```

我不知何故觉得它的格式**很好。**你问别的吗？

# ssh - aspera 连接数据传输工具的 ssh 会话错误

> ID：10928303
> 
> 赞同：1
> 
> 时间：2012-06-07T08:30:51.993
> 
> 标签：ssh, download, data-transfer, ssh-keys

我在 fedora 14 linux 平台上安装了 aspera connect 插件，用于下载大数据。

我已经配置了我们组织的代理设置。每当我尝试下载某些文件时，它都会引发错误：

错误 - 无法打开 ssh 会话。（代码 16）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-23T11:48:45.080

对于成功传输，您需要在防火墙上打开以下端口： TCP 端口 22 (ssh)：允许与 Aspera 服务器的连接。UDP 端口 33001：允许文件传输。UDP 端口从 33001 到 33010 例如，如果您想同时发送 10 个文件。( [http://support.sportstec.com/hc/en-us/articles/202344978-Firewall-configuration-for-ASPERA](http://support.sportstec.com/hc/en-us/articles/202344978-Firewall-configuration-for-ASPERA) ) 有关如何打开端口的更多信息，请参阅此链接： [https://help .ubuntu.com/lts/serverguide/firewall.html](https://help.ubuntu.com/lts/serverguide/firewall.html)

# php - 从 php 调用参数化的 javascript 函数

> ID：10928306
> 
> 赞同：0
> 
> 时间：2012-06-07T08:22:43.337
> 
> 标签：php, javascript

我需要通过在 php 变量中传递一个值来从 php 调用 javascript 函数。我的代码是这样的：

```
echo '<tr class="trlight"><td onclick="callVehicle('.$qry_vehicleid.');"><label>Call Vehicle</label>&nbsp;</td></tr>'; 
```

在 javascript 文件中，我尝试执行以下代码：

```
function callVehicle(vid)
{
alert('Call '+vid);
document.getElementById("SearchResult").style.visibility="hidden";
} 
```

并发生错误`test is not defined`。`test`是我分配给变量的值`$qry_vehicleid`。有人可以指出错误是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:30:38.983

尝试在插入的 PHP 变量周围添加引号。

```
echo '<tr class="trlight"><td onclick="callVehicle(\''.$qry_vehicleid.\'');"><label>Call Vehicle</label>&nbsp;</td></tr>'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:30:58.677

你错过了几个引号，你在呼应的是：

```
<td onclick="callVehicle(test);"> 
```

你想要的是：

```
<td onclick="callVehicle('test');"> 
```

因为`test`是一个字符串参数。您的代码应该是：

```
echo '<tr class="trlight"><td onclick="callVehicle(\''.$qry_vehicleid.'\');"><label>Call Vehicle</label>&nbsp;</td></tr>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:34:43.813

将您的 PHP 代码更改为

```
echo '<tr class="trlight"><td onclick="callVehicle('.json_encode($qry_vehicleid).');"><label>Call Vehicle</label>&nbsp;</td></tr>'; 
```

如果您尝试使用其中已经包含引号的值，那么在您的值周围天真地添加引号会在某些时候咬住您。

# ruby-on-rails - 我收到错误语法错误，意外 $end，期待关键字结束

> ID：10928310
> 
> 赞同：2
> 
> 时间：2012-06-07T08:31:14.340
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我是第一个使用 ruby​​ 的，所以当我遵循指南（http://guides.rubyonrails.org/getting_started.html）时，我得到了如下错误：

> 在 2012-06-07 17:22:36 +0900 开始为 127.0.0.1 获取“/问题”
> 
> SyntaxError (/Users/sookcha/Desktop/Dev/CSap/app/models/question.rb:3: 无效的多字节字符 (US-ASCII) /Users/sookcha/Desktop/Dev/CSap/app/models/question.rb: 3: 语法错误，意外 $end，期望关键字_end 验证 :name, :presence => true ^): app/controllers/questions_controller.rb:2:in `'
> 
> 渲染 /Users/sookcha/.rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms) 渲染 /Users/sookcha/ .rvm/gems/ruby-1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms) 渲染/Users/sookcha/.rvm/gems/ruby -1.9.3-p125/gems/actionpack-3.2.5/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb 在救援/布局中（10.7 毫秒）

当我刷新页面时，出现以下不同的错误：

```
Started GET "/questions" for 127.0.0.1 at 2012-06-07 17:22:40 +0900

NoMethodError (undefined method `key?' for nil:NilClass): 
```

我的代码是

```
class Question < ActiveRecord::Base
attr_accessible :content, :name, :title
validates :name,  :presence => true
validates :title, :presence => true,
                  :length => { :minimum => 5 }

end 
```

我的代码有什么问题？

编辑

当我插入 `# encoding: utf-8,`我的代码时，我得到了一个不同 `/Users/sookcha/Desktop/Dev/CSap/app/models/question.rb:5: syntax error, unexpected tSYMBEG, expecting keyword_do or '{' or '(' validates :name, :presence => true ^ /Users/sookcha/Desktop/Dev/CSap/app/models/question.rb:7: syntax error, unexpected tASSOC, expecting keyword_end :length => { :minimum => 5 } ^):`
的错误，比如：怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:39:49.633

您的代码很好，我敢打赌您的编辑器在某处插入了一个非标准选项卡。将其放在模型文件的顶部：

```
# encoding: utf-8 
```

这是一个神奇的注释，指示 ruby​​ 将任何非 ascii 字符串或文字解释为 UTF-8。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T09:12:24.477

您的代码中有一个[不间断的空格：](http://en.wikipedia.org/wiki/Non-breaking_space)

```
validates :name,  :presence => true
                ^
               here 
```

# opencv - android 本机代码中的 cv::VideoCapture

> ID：10928311
> 
> 赞同：1
> 
> 时间：2012-06-07T08:31:14.997
> 
> 标签：opencv, android-ndk

我在本机代码中使用 cv::VideoCapture 并且遇到了问题：在 android java 代码中，Videocapture 提供了一个 Yuv420 帧，在本机代码中它是一个 BGR 帧。因为我需要一个灰色图像，所以有一个 Yuv 图像会更好（我读到将 Yuv 转换为灰色是没有成本的）。

这是我的问题：

使用华硕 TF201 的即时通讯，获取一帧大约需要 26 毫秒，这很多......因为标准的 android 相机 API 为 Yuv 提供了本机版本的 VideoCapture 是否执行转换？（这将解释时间成本）

是否可以使用 CV_CAP_PROP_FORMAT 更改格式？每当我尝试 mycapture.get(CV_CAP_PROP_FORMAT) 我的应用程序崩溃...

编辑：安德烈·卡马耶夫回答了这个问题。我必须使用抓取/检索方法在第二个中添加一个参数：

```
capture.retrieve(frame, CV_CAP_ANDROID_GRAY_FRAME); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:41:36.183

查看适用于 Android 的 OpenCV 示例。他们中的大多数都从一个`VideoCapture`对象中获取灰色图像：

```
capture.retrieve(mGray, Highgui.CV_CAP_ANDROID_GREY_FRAME); 
```

在内部，这个灰色图像以最有效的方式从 yuv420 帧“转换” - 即使没有额外的复制。

# python - 使用 DRAKON 和 python 的 try: except: exceptions

> ID：10928313
> 
> 赞同：5
> 
> 时间：2012-06-07T08:31:25.650
> 
> 标签：python, drakon, drakon-editor

有人熟悉 DRAKON 吗？

我非常喜欢 DRAKON 可视化编辑器的想法，并且一直在使用 Python 来使用它——更多信息：[http ://drakon-editor.sourceforge.net/python/python.html](http://drakon-editor.sourceforge.net/python/python.html)

到目前为止，我唯一遇到的问题是 python 的 try: except: exceptions。我尝试过的唯一方法是使用分支，然后将 try: 和 except: 定义为分支下方的单独操作。唯一的问题是 DRAKON 不接受 try: 并在之后自动缩进异常代码。

有什么方法可以处理 try: except: 在 DRAKON 中的可视化方式，或者您可能听说过另一个类似的 python 可视化编辑器项目？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T06:23:49.467

您可以将整个“try: except:”结构放在一个“Action”图标中，如下所示：

![在 DRAKON-Python 中捕获异常](../Images/591cba2397bd3a009689c2bdc7653e57.png)

空格和制表符都可用于图标内的缩进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T18:09:57.953

Drakon 存在限制，因为它是一个代码生成器，但您可以做的是尽可能重构代码并将其填充到操作块中：

```
尝试：
   函数_1()
   函数_2()
除了：
   函数_3()

```

如果您遵循建议的规则（串烧、快乐路线、分支等），Drakon 效果最好。

一旦你在此基础上构建算法，它可以帮助你快速解决复杂的问题。

希望那有帮助。

# hibernate - Hibernate：动态设置表名

> ID：10928314
> 
> 赞同：2
> 
> 时间：2012-06-07T08:31:36.040
> 
> 标签：hibernate

我有一个实体，它应该根据一些表示表名的字符串属性动态地持久化到不同的表中。Hibernate 的动态模型看起来正是我想要的，但我找不到如何设置表名:) 谁能告诉我我缺少什么？提前致谢。

PS另一个找到的解决方案是[http://java.dzone.com/articles/hibernate-dynamic-table-routin](http://java.dzone.com/articles/hibernate-dynamic-table-routin)。但我不喜欢它，因为它看起来像肮脏的黑客。如果我将多个查询部分命名为要替换的子字符串怎么办。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:43:05.390

如果你正在使用`JPA then`你可以`@PrePersist`。

如果使用 plain`Hibernate`然后看看[event](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/events.html)。

不知道它是否适合你。

看起来`NamingStrategy`你需要一个教程。

```
@Override
public String classToTableName(String className) {
    // your code super.classToTableName()
}

org.hibernate.cfg.NamingStrategy interface. 
```

Hibernate 3.6 对该接口有四种实现：

```
org.hibernate.cfg.DefaultComponentSafeNamingStrategy
org.hibernate.cfg.DefaultNamingStrategy
org.hibernate.cfg.EJB3NamingStrategy
org.hibernate.cfg.ImprovedNamingStrategy 
```

实现您的代码以返回表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-20T16:43:26.557

这更像是一个架构设计问题，那些具有相似定义且仅名称因某些属性而不同的表，为什么不将此属性添加到表架构中并将所有这些表合并为一个呢？然后，您只需将此字段添加到 where 子句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-17T08:02:37.113

我尝试了很多方法，只有它是最简单的：

```
Session session = super.getSession();
    SQLQuery query = session.createSQLQuery("raw sql");
    query.setParameter(":abc", "value");
    query.addEntity(Some.class);
    return query.list(); 
```

# java - 需要添加 SOAP 安全令牌

> ID：10928315
> 
> 赞同：1
> 
> 时间：2012-06-07T08:31:37.730
> 
> 标签：java, soap, jax-ws

我需要在 jax-ws 生成的 web 服务客户端上设置自定义的 soap 标头属性。在我的情况下，所有 Web 服务调用都必须通过代理服务器，该代理服务器需要特定的令牌（从 Web 请求标头接收）才能出现在 soap 请求标头中。例如：

```
1 CarServiceService service = null;
2 service = new CarServiceService(new URL(url), new QName(qname);
3 CarServiceEndpoint port = service.getCarServicePort(); 
```

似乎在第 3 行中检索了 wsdl，并且由于缺少安全令牌，我的调用失败了。任何人都可以指出如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:04:25.617

这里提到了一个详细的例子：

[在 Tomcat 6 上创建和部署 JAX-WS Web 服务](http://java.dzone.com/articles/creating-and-deploying-jax-ws)

本文展示了如何创建和使用`security token`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:50:00.577

我能够从这篇博文中解决我的问题：http: [//tugdualgrall.blogspot.dk/2009/02/jax-ws-how-to-configure-service-end_17.html](http://tugdualgrall.blogspot.dk/2009/02/jax-ws-how-to-configure-service-end_17.html)

基本上我需要手动设置 web 服务端点，而不是框架试图从请求的 wsdl 中提取端点——但失败了。

# c# - 获取所有用户，仅当它们没有出现在另一个表中时

> ID：10928319
> 
> 赞同：1
> 
> 时间：2012-06-07T08:31:50.910
> 
> 标签：c#, entity-framework

我有两张桌子。一个*用户*表和一个放置某个测试*结果的表。*

当用户进行测试时，他的结果和他的 user_id 被放置在*结果*表中。如果用户从未参加过测试，那么显然他的 user_id 不会出现在*结果*表中。

我需要获取所有不在结果表中的用户。有没有办法在一个查询中做到这一点？（实体框架）

获取所有用户很容易。但现在我需要一种方法将其链接到*结果*表，以查看我想要在我的结果集中哪些用户。

```
(from u in entity.Users
[where not in results table..??]
select u); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:07:28.407

完整的工作示例，使用模拟对象：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            var usersTakenTest = new List<string>() { "Bob", "Jim", "Angel" };
            var allUsers = new List<string> { "Bob", "Jim", "Angel", "Mike", "JimBobHouse" };

            var users = from user in allUsers
                        join userTakenTest in usersTakenTest on user equals userTakenTest into tempUsers
                        from newUsers in tempUsers.DefaultIfEmpty()
                        where string.IsNullOrEmpty(newUsers)
                        select user;

            foreach (var user in users)
            {
                Console.WriteLine("This user has not taken their test: " + user);
            }
            Console.ReadLine();
        }
    }
} 
```

.DefaultIfEmpty() 是您所追求的 - 如果它返回一个空结果，则您在表 A 中有一个未显示在表 B 中的对象。

# c# - 在运行时更新 app.config 文件

> ID：10928320
> 
> 赞同：0
> 
> 时间：2012-06-07T08:32:02.107
> 
> 标签：c#, web-services, app-config

我正在尝试在运行时更新 app.config 文件。我得到错误

> System.NullReferenceException：对象引用未设置为对象的实例。第 59 行。

我想要做的是在运行时更改 url，通过弹出一个表单，该表单有一个用于 url 的文本框，然后用于更新配置文件。

```
public void changeSettings()
    {
        Configuration config =
            ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
            KeyValueConfigurationCollection settings = config.AppSettings.Settings;

        try
        {
            Console.WriteLine("nothing " + ConfigurationManager.AppSettings["client_postCodeRef_Service"]);
            settings["client_postCodeRef_Service"].Value = textBox1.Text; <- line 59
            config.Save(ConfigurationSaveMode.Modified);
            ConfigurationManager.RefreshSection("applicationSettings");
            Console.WriteLine("nothing 2 " + ConfigurationManager.AppSettings["client_postCodeRef_Service"]);
        }
        catch (ConfigurationErrorsException e)
        {
            MessageBox.Show("[Exception error: {0}]",
                e.ToString());
        }

    } 
```

这是配置文件

```
 <applicationSettings >
    <Client.Properties.Settings>
      <setting name="client_postCodeRef_Service" serializeAs="String">
        <value>http://127.0.0.1/directory/directory/webService.asmx</value>
      </setting>
      </Client.Properties.Settings>
    </applicationSettings> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:52:31.053

您正在使用`applicationSettings`not `appSettings`。
这两个是配置文件的不同部分。

要在 中使用条目，`applicationSettings`请使用以下语法：

```
string result = Client.Properties.Settings.Default.client_postCodeRef_Service; 
```

另请注意，您不能轻易地从程序内部更改 applicationSetting 条目的值。
关于 applicationSettings 和 AppSettings 的优缺点的详细讨论[可以在这里找到](https://stackoverflow.com/questions/460935/pros-and-cons-of-appsettings-vs-applicationsettings-net-app-config)

# php - 使用 .htaccess 进行 PHP 设置时出现 500 内部服务器错误

> ID：10928328
> 
> 赞同：26
> 
> 时间：2012-06-07T08:32:48.400
> 
> 标签：php, .htaccess

当我`.htaccess`用于以下 PHP 设置时，我`500 Internal Server Error`在访问网站时得到了。

文件中的代码`.htaccess`：

```
php_flag display_errors off
php_flag log_errors on 
```

该文件的文件权限为`.htaccess`644

我知道上面的代码是正确的。但是当它显示给我时`500 Internal Server Error`，我也尝试了不同的代码（很可能是错误的），但没有任何效果。尝试的不同代码是：

```
php_value display_errors off
php_value log_errors on 
```

和

```
php_value display_errors 0
php_value log_errors 1 
```

可能是什么原因`500 Internal Server Error`？

从这个问题的评论中学习后，我发现 PHP 设置在`.htaccess`FastCGI 上不起作用。因此，要更改 PHP 设置，我需要修改`php.ini`或者我需要在 php 代码中进行。当我无权修改`php.ini`文件并且我不想单独修改所有 PHP 文件时，是否有任何替代方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-10T15:40:50.300

就像上面的评论所说：您需要将您的 php 模块作为[动态共享对象](http://httpd.apache.org/docs/2.4/dso.html)运行以使其工作，如[Apache PHP 请求处理文档中所述](http://docs.cpanel.net/twiki/bin/view/EasyApache3/ApachePHPRequestHandling#DSO_considerations)

> DSO注意事项：
> 
> libphp 提供 Apache 指令，例如 php_$value 和 php_admin_$value。DSO 是这些指令在 .htaccess 文件或 httpd.conf**中有效的唯一选项。**当这些指令与并发 DSO 补丁一起编译时，它们应该被命名为 php4_$value 和 php5_$value。

cgi、fcgi、suphp 都行不通。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-02T14:13:49.557

正如您所发现的，修改`.htaccess`仅适用于 apache 模块，它会添加到 apache 可以理解的指令中。这不适用于 cgi 和其他人。

php的方式是修改整个站点的php.ini，或者以每个目录或每个用户为基础进行修改。

对于 php5.5（不确定其他版本），修改`.user.ini`您希望应用这些设置的目录中的文件。显然，将其设置在站点的根目录会使其适用于整个站点。

转到此处以获取有关 .user.ini 的信息：http: [//php.net/manual/en/configuration.file.per-user.php](http://php.net/manual/en/configuration.file.per-user.php)

转到此处查看指令列表以及可以更改的位置：http: [//php.net/manual/en/ini.list.php](http://php.net/manual/en/ini.list.php)

最后，要检查您的文件（可能在评论中提到），添加一个 phpinfo.php（名称无关紧要）文件，其中包含

```
<?php phpinfo() ?> 
```

到该目录，以便您可以查看在该目录中运行的 php 脚本的设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-09T04:29:35.003

我知道这个问题被问到已经有一段时间了，但是如果您的 .htaccess 不包含错误，则可能是引起您头痛的评论。

我最近升级了 WHM，突然在某些页面上出现 500 个内部服务器错误。在查看日志后，我可以看到 .htaccess 文件是问题所在，我解决了问题，因为它们是由评论引起的。

这就是为我解决问题的原因。

以前，我在 .htaccess 文件中有如下所示的指令：

```
Order Deny,Allow
Deny from 52.87.112.125   # whattheme.com
Deny from 192.163.217.239 # scanwp.net 
```

WHM 升级后我开始收到 500 内部服务器错误（升级中可能包含 apache）。

突然间，apache 不喜欢指令中的注释。我修改了上面代码的 .htaccess 文件，如下所示：

```
Order Deny,Allow
#  whattheme.com
Deny from 52.87.112.125

#   scanwp.net
Deny from 192.163.217.239 
```

问题解决了。

这可能不是你的问题，但经过一番寻找，这个解决方案对我有用。祝你好运。

# c# - 弱参考理解

> ID：10928329
> 
> 赞同：16
> 
> 时间：2012-06-07T08:32:49.863
> 
> 标签：c#, wpf, weak-references

我想创建所有 ViewModel 的字典。

```
 public static Dictionary<string, WeakReference> vmCollection = new Dictionary<string, WeakReference>(); 
```

像这样添加它

```
 vmCollection.Add(name, new WeakReference(viewModel)); 
```

并像这样调用所需的方法..

```
((vmCollection[viewModel].Target) as BaseViewModel).NewMessage(message); 
```

我需要维护它`WeakReference`吗？如果我不将其维护为`WeakReference`.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-07T08:38:20.720

不使用 a 的唯一后果`WeakReference`是字典中的引用将阻止 View Model 实例被垃圾收集。A`WeakReference`允许垃圾收集（假设其他地方没有其他可靠的引用）。

当一个项目没有对它的引用时，它就有资格进行垃圾回收。不会创建“可数”引用，因此您可以保留对它的某种引用，但如果您是唯一剩下的人，`WeakReference`则仍然让它符合条件。`WeakReference`

你是否需要它真的取决于你的视图模型有什么样的生命周期。如果他们需要处置或以其他方式“放手”，那么您可能需要使用`WeakReference`或公开一种方法来从字典中删除引用。

正如我在评论中提到的。我倾向于避免使用`WeakReference`，而不是明确地处理相关对象的生命周期。也就是说，当您根本不了解相关点的生命周期时，它们很有用。我认为在您的情况下，您应该具有必要的可见性，因为这些都可能在 UI 层中，因此应该尽量*不*使用它们。

这是有关该主题的资源：

*   [弱引用 MSDN 文章](https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/weak-references)

从上述 MSDN 链接中提取的指南：

> 仅在必要时使用长弱引用，因为对象的状态在完成后是不可预测的。
> 
> 避免对小对象使用弱引用，因为指针本身可能一样大或更大。
> 
> 避免使用弱引用作为内存管理问题的自动解决方案。相反，开发一个有效的缓存策略来处理您的应用程序的对象。

我相信最后一个指导点适用于您的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T11:10:33.090

我采取了稍微不同的方法。

对于这个例子，我只有一个**实例**，但我确信它可以很容易地扩展到多个实例......

因此，在我的课堂上，我创建了以下操作（如果您需要返回某些东西，它可能是一个 Func）。对于我的示例，我只是在推动一个异常：

```
private  static Action<Exception> StaticAccessorToInstanceMethod { get; set; } 
```

我要调用的实例方法是：

```
public void HandleExceptionDetails(Exception e)
{
    // Content of the method on the instance
} 
```

然后我在我的构造函数中有这个：

```
StaticAccessorToInstanceMethod = this.HandleExceptionDetails; 
```

以及析构函数中的以下内容：

```
StaticAccessorToInstanceMethod = null; 
```

（如果您正在处理多个实例，那么构造函数和析构函数代码会有点不同）。

然后静态方法简单地调用实例方法：

```
public static void HandleGeneralException(Exception ex)
{    
     StaticAccessorToInstanceMethod(result);
} 
```

我忽略了防守逻辑。

# ios - tableView 索引和 NSArray objectAtIndex 之间的冲突

> ID：10928336
> 
> 赞同：0
> 
> 时间：2012-06-07T08:33:30.727
> 
> 标签：ios, indexing, nsarray, tableview, conflict

我正在实现一个 TableView（ListeExercice 类），显示自定义单元格的列表。这些单元格在另一个类（ExerciceTableCell 类）中定义。

在 ListeExercice 类中，我在 viewDidLoad 方法中创建了一个 NSArray，如下所示：

```
table1 = [NSArray arrayWithObjects:@"exo1", @"exo2", nil];
table2 = [NSArray arrayWithObjects:@"10:00", @"10:00", nil]; 
```

然后在同一个班级，我做所有事情都是为了显示表格中的单元格

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection(NSInteger)section
- (NSArray *)sectionIndexTitlesForTableView:(UITableView *)tableView 
```

我遇到的问题发生在以下方法中，基本上是显示正确单元格的代码所在的位置：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *exerciceTableIdentifier = @"ExerciceTableCell";
ExerciceTableCell *cell = (ExerciceTableCell *)[tableView dequeueReusableCellWithIdentifier:exerciceTableIdentifier];
if (cell == nil) 
{
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ExerciceTableCell" owner:self options:nil];
    cell = [nib objectAtIndex:0];
} 

//label1 is a label from the cell defined in the ExerciceTableCell class.

cell.label1.text = [tableIntituleExercice objectAtIndex:indexPath.row];

return cell; 
```

}

问题是我在这两行之间发生了冲突：

```
cell = [nib objectAtIndex:0]; 
```

和

```
cell.Label1.text = [table1 objectAtIndex:indexPath.row]; 
```

显然这两个“objectAtIndex”之间存在冲突。我没有任何警告，只是 App 崩溃，还有一个线程说“线程 1：EXC_BAD_ACCESS (code = 1 ....)

关于我能做什么的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:55:22.163

如果您不使用 ARC，则这是一个简单的内存管理错误。您必须在这些行中保留两个数组：

```
table1 = [NSArray arrayWithObjects:@"exo1", @"exo2", nil];
table2 = [NSArray arrayWithObjects:@"10:00", @"10:00", nil]; 
```

否则，对象将在被调用之前被释放`tableView:cellForRowAtIndexPath:`。对于此类错误，您通常应该始终使用属性设置器将值分配给 ivars/properties。设置器关心为您进行正确的内存管理。

# python - 如何模拟图像上传到谷歌应用引擎 blobstore

> ID：10928339
> 
> 赞同：2
> 
> 时间：2012-06-07T08:33:47.957
> 
> 标签：python, unit-testing, google-app-engine, blobstore

我正在使用 create_upload_url 将图像上传到 GAE blobstore

```
uploadURL = blobstore.create_upload_url('/upload') 
```

为了对gae代码进行单元测试，可以模拟图片上传吗？或者我应该在我的测试平台中插入图像数据并假设上传成功？如果是这样，您如何将图像上传到测试台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:39:37.453

同意@fredrik 关于您在那里测试的确切内容。

无论如何，如果您正在做一些功能/黑盒/类似测试，您可以简单地使用[Webtest 框架](http://webtest.pythonpaste.org/en/latest/modules/webtest.html)（参见`post`方法）并进行实际上传，例如

```
payload = [(fieldname, filename)]
test_app.post(uploadURL, upload_files=payload) 
```

有关如何初始化上述 test_app 的详细信息，请查看[Handler Testing for Python 。](https://developers.google.com/appengine/docs/python/tools/handlertesting)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:52:37.810

您能否提供一些有关您的测试外观的代码？

我认为您应该能够使用 webapp2 伪造对 upload_url 的请求。在[这里](https://github.com/fredrikbonander/Webapp2-Sample-Applications/blob/master/sample-app-auth/tests/test_pac_auth.py)查看一些关于如何伪造请求的示例代码。

另一方面，您应该考虑测试的目的是什么。是为了测试图片上传是否有效，还是上传完成后您的代码如何工作？

运行单元测试时，尝试打破对其他库的依赖关系，以便您只测试自己的代码。然后添加一套新的实现测试，即请求和 url 并检查您是否得到预期的响应。如上`test_redirect_if_no_session`例所示，向需要用户并期望重定向的页面发出请求（http 响应代码 302）。

..弗雷德里克

# gcc - 是否保证复杂浮点变量在内存中是 8 字节对齐的？

> ID：10928341
> 
> 赞同：1
> 
> 时间：2012-06-07T08:33:53.563
> 
> 标签：gcc, c99, compiler-optimization, memory-alignment, complex-numbers

在 C99 中定义了新的复杂类型。我试图了解编译器是否可以利用这些知识来优化内存访问。这些类型的对象 ( `A`- `F`)是否`complex float`保证在内存中是 8 字节对齐的？

```
 #include "complex.h"
typedef complex float cfloat;

cfloat A;
cfloat B[10];

void func(cfloat C, cfloat *D)
{
    cfloat E;
    cfloat F[10];
} 
```

请注意，对于`D`，问题与 指向的对象有关`D`，而不是与指针存储本身有关。而且，如果假设这是对齐的，那么如何确定传递的地址是实际的复数而不是来自另一种（非 8 对齐）类型的强制转换？

更新 1：我可能在关于`D`指针的最后一条评论中回答了自己。B/c 没有办法知道函数调用的参数会被分配到什么地址，也无法保证它是 8 位对齐的。这可以通过`__builtin_assumed_aligned()`函数来​​解决。

对于其他变量，这个问题仍然存在。

更新 2：我在[这里发布了一个后续问题](https://stackoverflow.com/questions/10934987/is-there-a-reason-why-not-to-impose-8-byte-alignment-for-complex-float-type)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:18:11.407

保证A具有与两个数组（第 6.2.5 节）`float complex`相同的内存布局和对齐方式。`float`确切的对齐方式将由您的编译器或平台定义。`float complex`您可以肯定地说 a*至少与*a一样对齐`float`。

> 如果假设它是对齐的，那么如何确定传递的地址是实际复杂的而不是来自另一种（非 8 对齐）类型的转换？

如果您的调用者传递给您一个未充分对齐的指针，那是未定义的行为和他们的代码中的错误（第 6.3.2.3 节）。您不需要支持（尽管您可以选择支持）。

# java - 在 Java 中对记录进行分类

> ID：10928342
> 
> 赞同：5
> 
> 时间：2012-06-07T08:33:56.187
> 
> 标签：java

我有一个书籍清单，其中每本书都属于一个类别。

*   驾驶飞机 - 航空
*   画一幅画 - 艺术
*   1001 食谱 - 烹饪

我有足够大的样本数据集。我需要使用一些算法对我的新书进行分类。我知道它永远不会 100% 准确，但一个好的猜测对我有好处。

我应该用什么来实现做这样的事情？我应该使用 Classifier4J 和它的[Vector Classifier](http://classifier4j.sourceforge.net/usage.html#Using_VectorClassifier)吗？

还有其他我应该看的工具，比如 Weka 吗？如果有人可以向我指出一些文章/示例以帮助我入门，那就太好了。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:47:26.507

[https://www.coursera.org/course/ml](https://www.coursera.org/course/ml)上有一门课程叫做机器学习。如果您将问题视为分类，则应该训练`N`One-vs-All 分类器，其中`N`是您的类数（=类别）。为了训练分类器使用自然语言处理类[https://www.coursera.org/course/nlp中描述的算法，通常它与现有类](https://www.coursera.org/course/nlp)[http://nlp.stanford.edu/IR-book/](http://nlp.stanford.edu/IR-book/html/htmledition/text-classification-and-naive-bayes-1.html)相似[html/htmledition/text-classification-and-naive-bayes-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/text-classification-and-naive-bayes-1.html)。所有这些都可以通过[https://cwiki.apache.org/confluence/display/MAHOUT/Bayesian](https://cwiki.apache.org/confluence/display/MAHOUT/Bayesian)在 Apache Mahout 中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T12:17:16.493

Lingpipe 似乎是一个很好的解决方案，并且似乎运作良好。Lingpipe 中包含的演示是一个很好的起点：

[http://alias-i.com/lingpipe/demos/tutorial/classify/read-me.html](http://alias-i.com/lingpipe/demos/tutorial/classify/read-me.html)

# fonts - 网站上的付费字体

> ID：10928343
> 
> 赞同：0
> 
> 时间：2012-06-07T08:33:55.600
> 
> 标签：fonts

因此，另一个网络局为我将编写代码的网站进行了设计。问题是他们对所有文本（不仅是标题）使用了非免费的自定义字体。字体是 Klavika。

解决这个问题的最佳方法是什么？我应该说我们不能使用它还是应该只使用@font-face 或其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:43:09.207

这不应该让你担心。字体的适当许可是订购网站的客户的责任，您应该通知他们该设计使用非免费字体并且应该安排许可，但由于您没有创建设计，您的义务到此为止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:37:43.900

如果许可证允许您将其嵌入网站，那么就这样做（除非文件很大）。否则，告诉他们无法完成并选择不同的字体。

# ruby-on-rails - 如何使用 compass-rails 知道生成的精灵的名称？

> ID：10928344
> 
> 赞同：1
> 
> 时间：2012-06-07T08:33:56.197
> 
> 标签：ruby-on-rails, compass-sass

我试图找出如何知道使用 compass-rails 生成的图像的名称。

这是我的 .sass 样式表中的内容：

```
$asset-path: "/assets/"
@import "../images/icons/*.png"
@include all-icons-sprites
.icons-sprite,
.icons-doc,
.icons-enroll
  background: url('#{$asset-path}icons-s604efe6938.png') no-repeat 
```

当我在本地使用指南针时，该图像被称为 icons-s604efe6938.png。

如何知道现在如何在 Rails 上调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T07:24:23.943

Compass 的人想不出为什么开发人员需要知道生成的 sprite 的文件名，如此处[所述](http://compass-style.org/help/tutorials/spriting/#magic-imports)。我可以想到一个：使用 img 标签预加载精灵并捕获 onload 事件。

似乎最好的选择是破解 Compass 以防止它生成附加在文件末尾的随机字符串。看这里：

[如何从 Compass 生成的精灵图像文件名中删除哈希？](https://stackoverflow.com/questions/9183133/how-to-turn-off-compass-sass-cache-busting/9332472#9332472)

然后你会知道生成的精灵的确切名称，你可以在你的 css url 或 img src 中引用它。

# mysql - MySQL 5 亿行表在带有连接的选择查询中

> ID：10928346
> 
> 赞同：4
> 
> 时间：2012-06-07T08:33:58.490
> 
> 标签：mysql, performance, join, indexing, subquery

一旦表格完全填充，我担心下面的查询的性能。到目前为止，它正在开发中，并且在虚拟数据方面表现良好。

一旦完全填充，表“adress_zoo”将包含大约 5 亿条记录。“adress_zoo”表如下所示：

```
 CREATE TABLE `adress_zoo` 
     ( `adress_id` int(11) NOT NULL, `zoo_id` int(11) NOT NULL, 
     UNIQUE KEY `pk` (`adress_id`,`zoo_id`), 
     KEY `adress_id` (`adress_id`) ) 
     ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

其他表将包含最多 500 条记录。

完整的查询如下所示：

```
 SELECT a.* FROM jos_zoo_item AS a 
  JOIN jos_zoo_search_index AS zsi2 ON zsi2.item_id = a.id 
  WHERE a.id IN (   

     SELECT r.id FROM ( 

        SELECT zi.id AS id, Max(zi.priority) as prio 
        FROM jos_zoo_item AS zi 
        JOIN jos_zoo_search_index AS zsi ON zsi.item_id = zi.id 
        LEFT JOIN jos_zoo_tag AS zt ON zt.item_id = zi.id 
        JOIN jos_zoo_category_item AS zci ON zci.item_id = zi.id 
        **JOIN adress_zoo AS az ON az.zoo_id = zi.id** 

        WHERE 1=1 
        AND ( (zci.category_id != 0 AND ( zt.name != 'prolong' OR zt.name is NULL)) 
        OR (zci.category_id = 0 AND zt.name = 'prolong') ) 
        AND zi.type = 'telefoni' 
        AND zsi.element_id = '44d3b1fd-40f6-4fd7-9444-7e11643e2cef' 
        AND zsi.value = 'Small' 
        AND zci.category_id > 15 
        **AND az.adress_id = 5** 

        GROUP BY zci.category_id ) AS r 
  ) 

  AND a.application_id = 6 
  AND a.access IN (1,1) 
  AND a.state = 1 
  AND (a.publish_up = '0000-00-00 00:00:00' OR a.publish_up <= '2012-06-07 07:51:26') 
  AND (a.publish_down = '0000-00-00 00:00:00' OR a.publish_down >= '2012-06-07 07:51:26') 
  AND zsi2.element_id = '1c3cd26e-666d-4f8f-a465-b74fffb4cb14' 

  GROUP BY a.id 
  ORDER BY zsi2.value ASC 
```

查询通常会返回大约 25 条记录。

根据您的经验，此查询的执行是否可以接受（例如 3 秒内响应）？我能做些什么来优化这个？

正如@Jack 所建议的，我用 EXPLAIN 运行了查询并得到了这个：

![MySQL解释输出](../Images/c75ac3e31f0e2ac74193f7054c987da2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:41:30.913

这部分是一个重要的限制器：

```
az.adress_id = 5 
```

MySQL 会在将表与语句的其余部分连接*之前*`adress_id`将表限制为仅匹配的记录，因此这取决于您认为结果集可能有多大。

 *顺便说一句，你有一个`UNIQUE(adress_id, zoo_id)`和一个单独的`INDEX`. 有什么特别的原因吗？因为 MySQL 也可以使用生成键的第一部分进行选择。

同样重要的是要`EXPLAIN`了解 MySQL 如何“攻击”您的查询并返回结果。另见：[http ://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:51:42.537

为避免子查询，您可以尝试将查询重写为：

```
SELECT a.* FROM jos_zoo_item AS a 
  JOIN jos_zoo_search_index AS zsi2 ON zsi2.item_id = a.id 
  INNER JOIN 
  (   
     SELECT ** distinct ** r.id FROM ( 

        SELECT zi.id AS id, Max(zi.priority) as prio 
        FROM jos_zoo_item AS zi 
        JOIN jos_zoo_search_index AS zsi ON zsi.item_id = zi.id 
        LEFT JOIN jos_zoo_tag AS zt ON zt.item_id = zi.id 
        JOIN jos_zoo_category_item AS zci ON zci.item_id = zi.id 
        **JOIN adress_zoo AS az ON az.zoo_id = zi.id** 

        WHERE 1=1 
        AND ( (zci.category_id != 0 AND ( zt.name != 'prolong' OR zt.name is NULL)) 
        OR (zci.category_id = 0 AND zt.name = 'prolong') ) 
        AND zi.type = 'telefoni' 
        AND zsi.element_id = '44d3b1fd-40f6-4fd7-9444-7e11643e2cef' 
        AND zsi.value = 'Small' 
        AND zci.category_id > 15 
        **AND az.adress_id = 5** 

        GROUP BY zci.category_id ) AS r 
  ) T
    on a.id = T.id
  where 
  AND a.application_id = 6 
  AND a.access IN (1,1) 
  AND a.state = 1 
  AND (a.publish_up = '0000-00-00 00:00:00' OR a.publish_up <= '2012-06-07 07:51:26') 
  AND (a.publish_down = '0000-00-00 00:00:00' OR a.publish_down >= '2012-06-07 07:51:26') 
  AND zsi2.element_id = '1c3cd26e-666d-4f8f-a465-b74fffb4cb14' 

  GROUP BY a.id 
  ORDER BY zsi2.value ASC 
```

这种方法不对每个候选行执行子查询。`T`只有在几毫秒内计算，才能提高性能。*

# java - java.util.regex 的 Jar 文件

> ID：10928348
> 
> 赞同：1
> 
> 时间：2012-06-07T08:34:32.703
> 
> 标签：java

我的项目中需要 java.util.regex 的 jar 文件用于输入验证，如果有人可以帮助请帮助我。请提供一些我可以下载的网站。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:37:12.283

它`java.util.regex`与标准 Java 运行时捆绑在一起。（这意味着您无需包含单独的 .jar 文件即可访问它。）

回答您的问题：它在`rt.jar`文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:42:20.727

该[`java.util.regex`](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/regex/package-summary.html)包已添加到 Java SE 1.4。如果您运行的是旧版本的 java，那么您真的应该考虑升级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:37:14.513

这些`regex`类在`rt.jar`每个 JDK 或 JRE 下载的标准中。您几乎可以肯定已经拥有它们。

# c# - 如何在wpf的下一行打印字符串

> ID：10928357
> 
> 赞同：0
> 
> 时间：2012-06-07T08:35:12.300
> 
> 标签：c#

```
 Window.Content = "Chandru" + "Guna" + "Kalai"; 
```

当我运行这个程序时，结果就像这个 ChandruGunaKalai。

所以我想逐行打印每个字符串值。

像这样

```
 Chandru

       Guna

       Kalai 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:39:27.697

```
Window.Content = "Chandru"+Environment.NewLine + "Guna" +Environment.NewLine+ "Kalai"+Environment.NewLine; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:38:29.350

```
Environment.NewLine 
```

Window.Content = "Chandru" + Environment.NewLine + "Guna" + Environment.NewLine + "Kalai"；

那如何打印一个新行。或者您可以使用 a`StackPanel`并将其设置`Orientation`为 Vertical 并在其中放置 3 个单独`TextBlock`的 s。

# java - 用tomcat（java）打包activeMq

> ID：10928358
> 
> 赞同：1
> 
> 时间：2012-06-07T08:35:24.623
> 
> 标签：java, activemq

在我的应用程序中，我有 activeMq 将消息从客户端发送到服务器，反之亦然。我将它作为独立服务器运行。因此，当客户端机器发送消息时，消息在 activeMq 队列中传递，然后由服务器检索（我的应用程序）当且仅当事务在本地完成，这意味着客户端计算机和服务器（我的应用程序）位于同一台计算机中。但是，当我从两台不同的计算机上运行客户端和服务器时，一台服务器和另一台客户端的客户端只能建立与服务器的连接，但消息不会传递到 activeMq 队列。我认为这是 activeMq 问题。

谁能告诉我如何解决这个问题？谢谢

这是将客户端发送的数据传递到队列的代码。

```
package event.activeMq;  
import java.util.ArrayList;  
import java.util.Arrays;  
import java.util.Date;  
import java.util.Iterator;  

import javax.jms.Connection;  
import javax.jms.DeliveryMode;  
import javax.jms.Destination;  
import javax.jms.MessageProducer;  
import javax.jms.Session;  
import javax.jms.TextMessage;  

import org.apache.activemq.ActiveMQConnection;  
import org.apache.activemq.ActiveMQConnectionFactory;  
import org.apache.activemq.console.command.store.amq.CommandLineSupport;  
import org.apache.activemq.util.IndentPrinter;  

public class ProducerTool extends Thread {

    private Destination destination;
    private int messageCount = 1;
    private long sleepTime;
    private boolean verbose = true;
    private int messageSize = 1000;
    private static int parallelThreads = 1;
    private long timeToLive;
    private String user = ActiveMQConnection.DEFAULT_USER;
    private String password = ActiveMQConnection.DEFAULT_PASSWORD;
    private String url = ActiveMQConnection.DEFAULT_BROKER_URL;
    private String subject = "CLOUDD.DEFAULT";
    private boolean topic;
    private boolean transacted;
    private boolean persistent;
    private static Object lockResults = new Object();
    private static String DateTime="";
    private static String TaskID="";
    private static String UniqueEventID="";
    private static String Generator="";
    private static String GeneratorBuildVsn="";
    private static String Severity="";
    private static String EventText="";
    private static String SubsystemID="";
    private static String EventNumber="";
    private static String atmId="";

   public void element(String[] element) {  
       this.DateTime = element[0];  
       this.TaskID = element[1];  
       this.Generator = element[2];  
       this.Severity = element[3];  
       this.EventText = element[4];  
       this.SubsystemID = element[5];  
       this.EventNumber = element[6];  
       this.GeneratorBuildVsn = element[7];  
       this.UniqueEventID = element[8];  
       this.atmId = element[9];  
   }  
    public static void main(String[] args) {  
        System.out.println("came here");  
        ArrayList<ProducerTool> threads = new ArrayList();  
        ProducerTool producerTool = new ProducerTool();  
        producerTool.element(args);  

        producerTool.showParameters();  
        for (int threadCount = 1; threadCount <= parallelThreads; threadCount++) {  
            producerTool = new ProducerTool();  
            CommandLineSupport.setOptions(producerTool, args);  
            producerTool.start();  
            threads.add(producerTool);  
        }  

        while (true) {  
            Iterator<ProducerTool> itr = threads.iterator();  
            int running = 0;  
            while (itr.hasNext()) {  
                ProducerTool thread = itr.next();  
                if (thread.isAlive()) {  
                    running++;  
                }  
            }
            if (running <= 0) {
                System.out.println("All threads completed their work");
                break;
            }
            try {
                Thread.sleep(1000);
            } catch (Exception e) {
            }
        }
    }

    public void showParameters() {
        System.out.println("Connecting to URL: " + url);
        System.out.println("Publishing a Message with size " + messageSize + " to " + (topic ? "topic" : "queue") + ": " + subject);
        System.out.println("Using " + (persistent ? "persistent" : "non-persistent") + " messages");
        System.out.println("Sleeping between publish " + sleepTime + " ms");
        System.out.println("Running " + parallelThreads + " parallel threads");

        if (timeToLive != 0) {
          //  System.out.println("Messages time to live " + timeToLive + " ms");
        }
    }

    public void run() {
        Connection connection = null;
        try {
            // Create the connection.
            ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory(user, password, url);
            connection = connectionFactory.createConnection();
            connection.start();

            // Create the session
            Session session = connection.createSession(transacted, Session.AUTO_ACKNOWLEDGE);
            if (topic) {
                destination = session.createTopic(subject);
            } else {
                destination = session.createQueue(subject);
            }

            // Create the producer.
            MessageProducer producer = session.createProducer(destination);
            if (persistent) {
                producer.setDeliveryMode(DeliveryMode.PERSISTENT);
            } else {
                producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);
            }
            if (timeToLive != 0) {
                producer.setTimeToLive(timeToLive);
            }

            // Start sending messages
            sendLoop(session, producer);

           // System.out.println("[" + this.getName() + "] Done.");

            synchronized (lockResults) {
                ActiveMQConnection c = (ActiveMQConnection) connection;
               // System.out.println("[" + this.getName() + "] Results:\n");
                c.getConnectionStats().dump(new IndentPrinter());
            }

        } catch (Exception e) {
           // System.out.println("[" + this.getName() + "] Caught: " + e);
            e.printStackTrace();
        } finally {
            try {
                connection.close();
            } catch (Throwable ignore) {
            }
        }
    }  

    protected void sendLoop(Session session, MessageProducer producer) throws Exception {

        for (int i = 0; i < messageCount || messageCount == 0; i++) {

            TextMessage message = session.createTextMessage(createMessageText(i));
            if (verbose) {
                String msg = message.getText();
                if (msg.length() > 50) {
                    msg = msg.substring(0, 50) + "...";
                }
              //  System.out.println("[" + this.getName() + "] Sending message: '" + msg + "'");
            }

            producer.send(message);

            if (transacted) {
              //  System.out.println("[" + this.getName() + "] Committing " + messageCount + " messages");
                session.commit();
            }
            Thread.sleep(sleepTime);
        }
    }

    private String createMessageText(int index) {
        StringBuffer buffer = new StringBuffer(messageSize);

        buffer.append("DateTime "+DateTime+" EventNumber "+EventNumber+" TaskID "+TaskID+" AtmId "+atmId+
                " Generator "+Generator+" GeneratorBuildVsn "+GeneratorBuildVsn+" Severity "+Severity+
                " UniqueEventID "+UniqueEventID+" EventText "+EventText+" SubsystemID "+SubsystemID+" End ");
        if (buffer.length() > messageSize) {
            return buffer.substring(0, messageSize);
        }
        for (int i = buffer.length(); i < messageSize; i++) {
            buffer.append(' ');
        }

        DateTime="";
        EventNumber="";
        TaskID="";
        atmId="";
        Generator="";
        GeneratorBuildVsn="";
        Severity="";
        UniqueEventID="";
        EventText="";
        SubsystemID="";

        return buffer.toString();        
    }

    public void setPersistent(boolean durable) {
        this.persistent = durable;
    }

    public void setMessageCount(int messageCount) {
        this.messageCount = messageCount;
    }

    public void setMessageSize(int messageSize) {
        this.messageSize = messageSize;
    }

    public void setPassword(String pwd) {
        this.password = pwd;
    }

    public void setSleepTime(long sleepTime) {
        this.sleepTime = sleepTime;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }

    public void setTimeToLive(long timeToLive) {
        this.timeToLive = timeToLive;
    }

    public void setParallelThreads(int parallelThreads) {
        if (parallelThreads < 1) {
            parallelThreads = 1;
        }
        this.parallelThreads = parallelThreads;
    }

    public void setTopic(boolean topic) {
        this.topic = topic;
    }

    public void setQueue(boolean queue) {
        this.topic = !queue;
    }

    public void setTransacted(boolean transacted) {
        this.transacted = transacted;
    }

    public void setUrl(String url) {
        this.url = url;
    }

    public void setUser(String user) {
        this.user = user;
    }

    public void setVerbose(boolean verbose) {
        this.verbose = verbose;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:55:52.460

您需要使用以下问题的答案更新您的问题：

*   你用什么操作系统？
*   你的电脑上有防火墙之类的软件吗？
*   你能在这里提供 ActiveMQ conf 文件吗？
*   你能提供一个实现连接建立的功能吗？

upd：我不明白你所有的逻辑，但我认为这里有错误：

```
try {
    Thread.sleep(1000);
    } catch (Exception e){    
    e.printStackTrace();
    } 
```

并且永远永远永远不会捕获所有异常！这是非常危险的。如果你想捕获异常，你需要处理它。

# r - 返回相同的 DF 或向量而不是 NULL

> ID：10928359
> 
> 赞同：0
> 
> 时间：2012-06-07T08:35:26.433
> 
> 标签：r, dataframe, na

用户，

我的结果中有 NULL 的 data.frames，但我不希望它们为 NULL。我希望它们与开始时相同（不变）。我正在处理一个文件列表，我的代码的目的是用我的其他 data.frames 中的数据填充所有 NA （根据最佳相关系数）。这是一个小例子：

想象一下这是我的 3 个输入数据帧（每个 10 行）：

```
ST1 <- data.frame(x1=c(1:10))
ST2 <- data.frame(x2=c(1:5,NA,NA,8:10))
ST3 <- data.frame(x3=c(NA,NA,NA,NA,NA,NA,NA,NA,NA,NA)) 
```

这里的目的是，例如，如果 ST1 中有 NA，则 ST1 必须填充来自与 ST1 最佳相关文件的数据（在本例中介于 ST2 和 ST3 之间）。

由于 ST3 这里没有数据，所以我不能有任何相关系数。所以 ST3 中的 NA 无法填充，ST3 也不能用于填充另一个文件。因此，如果您愿意，ST3 没有用。尽管如此，我想在我的所有代码中保持 ST3 不变。所以我的代码中的问题来自没有数据的data.frames，所以只有NA。

目前我的代码会给出这个“refill”（我的代码结束）（在我的data.frames中填充NA）：

```
ST1 <- data.frame(x1=c(1:10))
ST2 <- data.frame(x2=c(1:5,6,7,8:10))
ST3 <- NULL 
```

但实际上，我想要“补充”这个结果：

```
ST1 <- data.frame(x1=c(1:10))
ST2 <- data.frame(x2=c(1:5,6,7,8:10))
ST3 <- data.frame(x3=c(NA,NA,NA,NA,NA,NA,NA,NA,NA,NA)) 
```

因此，对于只有 NA 的 data.frame，我不希望它们在“refill”中为 NULL，但我希望它们与输入中的相同。我需要它在输入和输出之间具有相同尺寸的 data.frames。如果它们为 NULL（目前是这样，但我不明白为什么，我想更改它），则此 data.frame 中将有 0 行，而不是像其他 data.frames 那样有 10 行。

所以我认为函数“process.all”或“na.fill”或“lst”中的代码有问题。

这是我的代码，它是一个可重现的示例，您可以理解我的错误（您将在`head(refill)`ST2 中看到设置为 NULL）。对不起，如果它有点长，但我的错误取决于以前使用的其他功能。希望您了解我的问题以及我正在尝试做的事情。谢谢你的帮助！

（有关信息，在函数“process.all”和“na.fill”中：x 是我要填充的 data.frame，y 是将用于填充 x 的文件（因此与 x 的最佳相关文件） ）。

杰弗里

```
# my data for example
DF1 <- data.frame(x1=c(NA,NA,rnorm(3:20)),x2=c(31:50))
write.table(DF1,"ST001_2008.csv",sep=";")
DF2 <- data.frame(x1=c(NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,rnorm(1:10)),x2=c(1:20))
write.table(DF2,"ST002_2008.csv",sep=";")
DF3 <- data.frame(x1=rnorm(81:100),x2=NA)
write.table(DF3,"ST003_2008.csv",sep=";")
DF4 <- data.frame(x1=c(21:40),x2=rnorm(1:20))
write.table(DF4,"ST004_2008.csv",sep=";")

# Correlation table

  corhiver2008capt1 <- read.table(text="  ST001 ST002      ST003      ST004
ST001  1.0000000    NA -0.4350665  0.3393549
ST002         NA    NA         NA         NA
ST003 -0.4350665    NA  1.0000000 -0.4992513
ST004  0.3393549    NA -0.4992513  1.0000000",header=T)

    lst <- lapply(list.files(pattern="\\_2008.csv$"), read.table,sep=";", header=TRUE, stringsAsFactors=FALSE)
    Stations <-c("ST001","ST002","ST003","ST004")
    names(lst) <- Stations

    # searching the highest correlation for each data.Frame
    get.max.cor <- function(station, mat){
     mat[row(mat) == col(mat)] <- -Inf
     m <- max(mat[station, ],na.rm=TRUE)
     if (is.finite(m)) {return(which( mat[station, ] == m ))}
     else {return(NA)}
    }

    # fill the data.frame with the data.frame which has the highest correlation coefficient
    na.fill <- function(x, y){
     if(all(!is.finite(y[1:10,1])))  return(y)
     i <- is.na(x[1:10,1])
     xx <- y[1:10,1]
     new <- data.frame(xx=xx)
     x[1:10,1][i] <- predict(lm(x[1:10,1]~xx, na.action=na.exclude),new)[i]
     x
    }

    process.all <- function(df.list, mat){

        f <- function(station)
             na.fill(df.list[[ station ]], df.list[[ max.cor[station] ]])

        g <- function(station){
        x <- df.list[[station]]
        if(any(!is.finite(x[1:10,1]))){
            mat[row(mat) == col(mat)] <- -Inf
            nas <- which(is.na(x[1:10,1]))
            ord <- order(mat[station, ], decreasing = TRUE)[-c(1, ncol(mat))]
            for(y in ord){
                if(all(!is.na(df.list[[y]][1:10,1][nas]))){
                    xx <- df.list[[y]][1:10,1]
                    new <- data.frame(xx=xx)
                    x[1:10,1][nas] <- predict(lm(x[1:10,1]~xx, na.action=na.exclude), new)[nas]
                    break
                }
            }
        }
        x
    }

        n <- length(df.list)
        nms <- names(df.list)
        max.cor <- sapply(seq.int(n), get.max.cor, corhiver2008capt1)
        df.list <- lapply(seq.int(n), f)
        df.list <- lapply(seq.int(n), g)
        names(df.list) <- nms
        df.list
    }

    refill <- process.all(lst, corhiver2008capt1)
    refill <- as.data.frame(refill)                                               ########## HERE IS THE PROBLEM ######
    refill 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:31:23.370

怎么样

```
if(sum(!is.na(ST3)) == 0) { 
skip whatever you normally would do and go to the next vector
} 
```

当然，这假设您对 1999 NA 的向量和一个数值没有任何问题。

# java - Java Application Server 有哪些具体用途是 Web 服务器无法做到的？

> ID：10928362
> 
> 赞同：3
> 
> 时间：2012-06-07T08:35:40.677
> 
> 标签：java, web

我对 Java 应用程序服务器的角色及其与 Web 服务器的区别感到有些困惑。
我发现许多网站解释了两者之间的相同差异，但并不令我满意。
因此，请向我解释以下两种情况：-

**1）应用程序。服务器及其与Web服务器的区别：**

从这两个链接：
[应用服务器和servlet容器之间的区别？](https://stackoverflow.com/questions/5039354/difference-between-an-application-server-and-a-servlet-container)
[应用服务器和Web服务器有什么区别？](https://stackoverflow.com/questions/936197/what-is-the-difference-between-application-server-and-web-server)

***Web 服务器：***它通过 http 协议处理一切，通过接受来自客户端的请求并**在其 servlet 容器（例如 Apache Tomcat**）
的帮助下向它们发送响应***。******服务器：***应用服务器支持整个 JavaEE，如 JMS、JPA、RPC 等。

 ***现在我感到困惑的是，如何通过在我的 Web 应用程序中
添加它们的**jar**文件来将JMS、JPA 等大量 JavaEE API 与我的 Tomcat 一起使用？
这是否意味着如果我使用应用程序服务器，我不必添加那些**jar**文件？（*我不这么认为*）

**2）应用程序的角色。服务器**（这对我来说很重要）

来自维基百科
[http://en.wikipedia.org/wiki/Application_Server](http://en.wikipedia.org/wiki/Application_Server)

应用服务器提供诸如安全、事务支持等服务。
*“该术语通常用于支持 JavaEE 的 Web 服务器”* ——听起来如果我们添加JavaEE API所需的**jar文件，Web 服务器就变成了一个应用程序。**服务器。**怎么样。**

现在我的问题是**应用服务器如何自己执行安全控制或事务管理的任务**？
**例如**，在我使用 Spring 框架的 Web 应用程序中，我通过使用 spring-security 和事务管理来提供安全性，通过使用 @Transactional 注释和所有你知道的东西。
应用程序也是如此。服务器与我的安全或事务管理有什么关系，或者它有自己的方式？

*原谅我的无知。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:46:05.813

使用 Spring，您实际上是在应用程序中嵌入了某种 Java EE 容器。但是即使在使用 Spring 时，如果您需要 JTA 支持（因为您需要分布式 XA 事务），您也需要使用额外的事务管理器。如果需要 JMS，则需要安装额外的 JMS 代理。如果您需要连接池，则需要使用额外的连接池。有时它就像向类路径和属性或 XML 文件中添加额外的 jar 一样简单。有时更难。

Java EE 应用程序服务器捆绑了所有内容。您的灵活性较低，但您不需要自己安装、配置和让一切工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:43:55.970

当您使用 时`Java EE framework`，这是一个规范。所以应用服务器，如果是的话`Java EE compliant`，需要实现这个。因此，一旦实现了规范，它就会解决`Security`，`transaction`等等，因为它在规范中被提及。所以这是一份合同。而在 a 中`web server`，它只会提取您的静态资源。不需要处理其他的东西。

在这种情况下`Spring framework`，框架知道如何处理事务、安全性等。因此，开发人员尤其不需要研究在其他场景中由应用服务器实现的这些方面。

> 应用服务器如何自行执行安全控制或事务管理的任务

解决这些问题的是规范，而不是应用程序服务器。所以，应用服务器的职责就是实现这些。因此，如果您的应用程序是`Java EE compliant`，那么这些区域将得到解决，并且实施将由应用服务器完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:29:15.647

可能这是过于简单化了，

Web 服务器基本上是**通过 http 协议提供内容**的 HTTP 服务器。因此，Web 服务器只是通过 http 协议提供内容。一个典型的例子是[Apache Web 服务器](http://httpd.apache.org/)。这只是一个文件服务器。

现在的问题是Web 服务器从**哪里获取****内容**？可能的来源是

1.  *静态内容*（图像/css 等内容）不是根据请求生成但静态提供的。
2.  *动态内容*：简单地说，要服务的内容是根据用户请求生成的。

对于静态内容，Web 服务器不需要任何东西，因为它只是读取文件并提供服务。

对于动态内容，Web 服务器可能需要**其他组件的帮助，这些组件**将生成要提供的内容。

在这里，应用程序服务器出现了。

现在，前面提到的这些**附加组件可能与数据库或其他一些系统等进行交互。**

在您的网站暴露给**大量**用户（有意/无意）的 Web 环境中，您需要诸如事务/安全/并发等典型服务，以便用户获得**预期的响应**并且不会看到应用程序行为的**不一致**.

应用程序服务器具有管理**事务/安全/并发**/资源管理的内置功能。通常这些被称为**托管服务**，它们提供的环境称为**托管环境**，其中这些基本服务由应用程序服务器管理，程序员不必为它们烦恼。

Application Server 需要 Web 服务器，或者我们可以说 Web 服务器使用 Application Server 的服务来生成动态内容。

例如，**JBoss**使用 Tomcat 作为内置 Web 服务器。而网络逻辑有自己的网络服务器。**Tomcat**再次可以称为**应用程序服务器**（原则上），因为它还为 servlet 提供托管环境（它管理并发和 servlet/JSP 的实例池）。

*以您的 Spring 为例：* 无论您是否需要，应用程序服务器都将内置事务/安全等。Spring 提供了一种非常好的方法来处理这个问题。Spring拥有所有这些东西，但你使用你需要的东西。不只是这些，只要像 Tomcat 这样的 Java Web Sever 就足以构建一个需要应用服务器的成熟服务。***

# git - 如何解决 Gerrit 的“您的更改需要递归合并来解决”

> ID：10928365
> 
> 赞同：1
> 
> 时间：2012-06-07T08:35:44.743
> 
> 标签：git, gerrit

我在 Gerrit 有以下公开评论：

*   更改 I37783be4

    取决于更改 IFF96ca11（已合并）

更改 I37783be4 它取决于已合并的提交，因此我希望 Gerrit 知道如何将其合并到 master 中。我仍然收到以下错误：

**您的更改需要递归合并来解决。请在本地合并（或变基）更改并上传解决方案以供审核。**

我试图获取那个特定的changeId并做一个'git rebase master'，但我唯一得到的是一个悲伤的“无事可做”消息。

关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:34:34.373

问题是递归合并策略。由于文件重命名等原因，此策略可能是必要的。然而，Gerrit 使用 JGit 作为 Git 实现，而 JGit 仅支持解析合并策略（至少目前）。所以你必须在本地做（你可能想使用 Git 而不是 EGit，因为 EGit 也使用 JGit）。

如果您的本地 master 和您的 origin/master 彼此不同，您也可以尝试“git rebase origin/master”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:39:16.543

奇怪的。基本上你只需要获取、变基或合并然后推送。

试试`git pull --rebase`。

# domain-driven-design - 你是从 DDD 中的数据库设计或领域对象设计开始的吗？

> ID：10928366
> 
> 赞同：0
> 
> 时间：2012-06-07T08:35:46.177
> 
> 标签：domain-driven-design

数据库设计（表）是否需要解决域模型持久性以外的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:39:26.527

[DDD](http://en.wikipedia.org/wiki/Domain-driven_design)（*领域*驱动设计）表明您将从领域驱动您的设计。因此，您不关心数据库设计（表）-您对[持久性无知](http://thinkddd.com/glossary/persistence-ignorance/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T17:49:12.777

如前所述，DDD 将重点放在模型上，同时对持久性无知抽象数据访问。我觉得这很合适，但是一旦您开始设计聚合根和实体，就很难避免数据访问问题。您的实体最终看起来可能会略有不同，具体取决于您是使用传统的 SQL 持久性、文档存储还是事件溯源。建模过程应该与持久性无关，并且只关注业务领域，而不考虑架构问题。看看这个线程进行讨论：[http ://tech.groups.yahoo.com/group/domaindrivendesign/message/23106](http://tech.groups.yahoo.com/group/domaindrivendesign/message/23106)

# javascript - 在gridview中保存可见div的状态

> ID：10928367
> 
> 赞同：0
> 
> 时间：2012-06-07T08:35:47.697
> 
> 标签：javascript, .net

我有一个隐藏字段，用于存储有关网格视图中包含的 div 的可见性的信息。

```
<asp:HiddenField id="divhidden" runat="server" /> 
```

然后我在javascript中设置值。

```
weekrow.getElementsByTagName('input')[0].value = 'visible'; 
```

我可以看到它一直工作到回发点，其中值被清除。当我在gridview之外尝试相同的概念时，这似乎有效，但由于某种原因，数据绑定可能会清除值？无论如何要在回发之间保持隐藏字段中的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:51:34.833

网格视图清除了隐藏字段上的值。因此它不能用于存储我的 div 是否隐藏的值。

我通过创建一个 div“divhidden”解决了这个问题，该 div 添加了可用于设置由我的 javascript 编辑的可见性的隐藏值。

现在，关于隐藏哪些 div 的信息存储在这些隐藏值中的回发之间。

aspx-page: hiddenDiv = new System.Web.UI.HtmlControls.HtmlGenericControl("DIV"); hiddenDiv.ID = "hiddenValuesDiv"; PlanningForm.Controls.Add(hiddenDiv);

```
 Label weekLabel = row.FindControl("weeknr") as Label;
      if (weekLabel != null && PlanningForm.FindControl("visiblediv" + weekLabel.Text) == null) {

          HiddenField divvisible = new HiddenField();
          divvisible.ID = "visiblediv" + weekLabel.Text;
          //Open the first two divs
          if (!Page.IsPostBack) {
              if(openDivCount < 2)
              divvisible.Value = "block";
              openDivCount++;
          }
          hiddenDiv.Controls.Add(divvisible);
      } 
```

和javascript代码：

```
function expandcollapse(obj, row) {
var hidden = document.getElementById(GetClientId('visible' + obj));
var warningonweek = weekrow.getElementsByTagName('td')[0].getElementsByTagName('img')
if (div.style.display == "none") {
    div.style.display = "block";
    ....
}
else {
    div.style.display = "none";
    ....
} 
```

}

# php - 在客户端问题上分页记录

> ID：10928368
> 
> 赞同：0
> 
> 时间：2012-06-07T08:35:53.187
> 
> 标签：php, jquery, mysql, ajax, pagination

我正在使用 php、mysql 进行搜索、过滤操作。

我的分页课程是

```
class Paginator{
var $items_per_page;
var $items_total;
var $current_page;
var $num_pages;
var $mid_range;
var $low;
var $limit;
var $return;
var $default_ipp;
//var $querystring;
var $ipp_array;

function Paginator()
{
    $this->current_page = 1;
    $this->mid_range = 2;
    $this->ipp_array = array(2,4,6,8,10,'All');
    $this->items_per_page = (!empty($_GET['ipp'])) ? $_GET['ipp']:$this->default_ipp;
}

function paginate()
{
    if(!isset($this->default_ipp)) $this->default_ipp='2';
    if($_GET['ipp'] == 'All')
    {
        $this->num_pages = 1;
   //$this->items_per_page = $this->default_ipp;
    }
    else
    {
        if(!is_numeric($this->items_per_page) OR $this->items_per_page <= 0) $this->items_per_page = $this->default_ipp;
        $this->num_pages = ceil($this->items_total/$this->items_per_page);
    }
    $this->current_page = (isset($_GET['page'])) ? (int) $_GET['page'] : 1 ; // must be numeric > 0
    $prev_page = $this->current_page-1;
    $next_page = $this->current_page+1;
    if($_GET)
    {
        $args = explode("&",$_SERVER['QUERY_STRING']);
        foreach($args as $arg)
        {
            $keyval = explode("=",$arg);
            if($keyval[0] != "page" And $keyval[0] != "ipp") $this->querystring .= "&" . $arg;
        }
    }

    if($_POST)
    {
        foreach($_POST as $key=>$val)
        {
            if($key != "page" And $key != "ipp") $this->querystring .= "&$key=$val";
        }
    }
    if($this->num_pages > 4)
    {
        $this->return = ($this->current_page > 1 And $this->items_total >= 10) ? "<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=$prev_page&ipp=$this->items_per_page$this->querystring\">&laquo; Previous</a> ":"<span class=\"inactive\" href=\"#\">&laquo; Previous</span> ";

        $this->start_range = $this->current_page - floor($this->mid_range/2);
        $this->end_range = $this->current_page + floor($this->mid_range/2);

        if($this->start_range <= 0)
        {
            $this->end_range += abs($this->start_range)+1;
            $this->start_range = 1;
        }
        if($this->end_range > $this->num_pages)
        {
            $this->start_range -= $this->end_range-$this->num_pages;
            $this->end_range = $this->num_pages;
        }
        $this->range = range($this->start_range,$this->end_range);

        for($i=1;$i<=$this->num_pages;$i++)
        {
            if($this->range[0] > 2 And $i == $this->range[0]) $this->return .= " ... ";
            // loop through all pages. if first, last, or in range, display
            if($i==1 Or $i==$this->num_pages Or in_array($i,$this->range))
            {
                $this->return .= ($i == $this->current_page And $_GET['page'] != 'All') ? "<a title=\"Go to page $i of $this->num_pages\" class=\"current\" href=\"#\">$i</a> ":"<a class=\"paginate\" title=\"Go to page $i of $this->num_pages\" href=\"$_SERVER[PHP_SELF]?page=$i&ipp=$this->items_per_page$this->querystring\">$i</a> ";
            }
            if($this->range[$this->mid_range-1] < $this->num_pages-1 And $i == $this->range[$this->mid_range-1]) $this->return .= " ... ";
        }
        $this->return .= (($this->current_page < $this->num_pages And $this->items_total >= 10) And ($_GET['page'] != 'All') And $this->current_page > 0) ? "<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=$next_page&ipp=$this->items_per_page$this->querystring\">Next &raquo;</a>\n":"<span class=\"inactive\" href=\"#\">&raquo; Next</span>\n";
        $this->return .= ($_GET['page'] == 'All') ? "<a class=\"current\" style=\"margin-left:10px\" href=\"#\">All</a> \n":"<a class=\"paginate\" style=\"margin-left:10px\" href=\"$_SERVER[PHP_SELF]?page=1&ipp=All$this->querystring\">All</a> \n";
    }
    else
    {
        for($i=1;$i<=$this->num_pages;$i++)
        {
            $this->return .= ($i == $this->current_page) ? "<a class=\"current\" href=\"#\">$i</a> ":"<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=$i&ipp=$this->items_per_page$this->querystring\">$i</a> ";
        }
        $this->return .= "<a class=\"paginate\" href=\"$_SERVER[PHP_SELF]?page=1&ipp=All$this->querystring\">All</a> \n";
    }
    $this->low = ($this->current_page <= 0) ? 0:($this->current_page-1) * $this->items_per_page;
    if($this->current_page <= 0) $this->items_per_page = 0;
    $this->limit = ($_GET['ipp'] == 'All') ? "":" LIMIT $this->low,$this->items_per_page";
}
function display_items_per_page()
{
    $items = '';
    if(!isset($_GET[ipp])) $this->items_per_page = $this->default_ipp;
    foreach($this->ipp_array as $ipp_opt) $items .= ($ipp_opt == $this->items_per_page) ? "<option selected value=\"$ipp_opt\">$ipp_opt</option>\n":"<option value=\"$ipp_opt\">$ipp_opt</option>\n";
    return "<span class=\"paginate\">Items per page:</span><select class=\"paginate\" onchange=\"window.location='$_SERVER[PHP_SELF]?page=1&ipp='+this[this.selectedIndex].value+'$this->querystring';return false\">$items</select>\n";
}
function display_jump_menu()
{
    for($i=1;$i<=$this->num_pages;$i++)
    {
        $option .= ($i==$this->current_page) ? "<option value=\"$i\" selected>$i</option>\n":"<option value=\"$i\">$i</option>\n";
    }
    return "<span class=\"paginate\">Page:</span><select class=\"paginate\" onchange=\"window.location='$_SERVER[PHP_SELF]?page='+this[this.selectedIndex].value+'&ipp=$this->items_per_page$this->querystring';return false\">$option</select>\n";
}
function display_pages()
{
    return $this->return;
}
  }
 ?> 
```

我使用这样的复选框执行了过滤器：

```
 <input type="checkbox" id="checkbox1" class="checkbox1" value="<?php echo $suburb['suburb_name']?>" name="Suburb_check[]" onClick="changeResults();" onChange="" ><?php echo $suburb['suburb_name']?>  <span class="grey">(<?php echo $suburb['total']?>)</span> 
```

过滤器的 Javascript/ajax 代码

```
function changeResults(){
    var data = { 'venue[]' : []};
        $("input:checked").each(function() {
            var chck1 = $(this).val();
            //alert(chck1);
            data['venue[]'].push($(this).val());

    });
$.ajax({
     type : 'POST',
     url : 'process.php',
     data : data,
     success : function(data){
          $('#project_section').html(data); // replace the contents coming from php file
            }  
        });
    } 
```

进程.php 文件

```
include_once("includes/classes/db_connect.php");
include_once("pagination/paginator.class.php");

$pages = new Paginator();

$value= array();

foreach($_POST as $key=>$value)
{
    $value[] = $venue[$key][$value];    
}
$countArray = count($value);

//echo $countArray;
/*echo "<pre>";
    print_r($value);
echo "</pre>";
exit;*/

if($countArray=='2')
{
        $where = "cities.city_name like '%".$_SESSION['$cityName']."%' and suburbs.suburb_name ='".$value[0]."' ";
}
else if($countArray=='3')
{
       $where = "cities.city_name like '%".$_SESSION['$cityName']."%' and (suburbs.suburb_name ='".$value[0]."' or suburbs.suburb_name ='".$value[1]."')";
}
else if($countArray=='4')
{
$where = "cities.city_name like '%".$_SESSION['$cityName']."%' and (suburbs.suburb_name ='".$value[0]."' or suburbs.suburb_name ='".$value[1]."' or suburbs.suburb_name ='".$value[2]."')";
}
else if($countArray=='5')
{
        $where = "cities.city_name like '%".$_SESSION['$cityName']."%' and (suburbs.suburb_name ='".$value[0]."' or suburbs.suburb_name ='".$value[1]."' or suburbs.suburb_name ='".$value[2]."' or suburbs.suburb_name ='".$value[3]."')";
}
else{
    $where = "cities.city_name like '%".$_SESSION['$cityName']."%' " ;
}

$countSql="SELECT count(*) as total from properties inner join cities on properties.city_id=cities.city_id inner join suburbs on properties.suburb_id=suburbs.suburb_id where ".$where." ";

//echo $countSql;
$resultCount = mysql_query($countSql);
$data = mysql_fetch_row($resultCount);
$pages->items_total = $data[0];
$pages->mid_range = 2;
$pages->paginate();
echo $pages->display_pages();       
echo $pages->display_items_per_page();

$sql="SELECT * from properties inner join cities on properties.city_id=cities.city_id inner join suburbs on properties.suburb_id=suburbs.suburb_id where ".$where." $pages->limit";

//echo $sql;
$result = mysql_query($sql);
//$data = mysql_fetch_assoc($result);
/*echo "<pre>" ;
print_r($data);
echo "</pre>" ; */
while($row=mysql_fetch_assoc($result))
{
      ?>
      <div class="projectlisttiger" id="propertyList">      

                <div class="spacer5">&nbsp;</div>
                <div class="listnewimg flt">
                    <a href="p-kolte-patil-cilantro-wagholi-pune.php">
                        <img src="admin/uploads/<?php echo ($row['property_cover_image']) ?>" width="186" height="125" border="0">
                        <!--<img src="admin/uploads/Cilantra1/1cilantra-large.jpg" width="186" height="125" border="0">-->
                    </a>
                     <!--<div class="newlistlaunch"><a href="p-kolte-patil-cilantro-wagholi-pune.php"><img width="65" height="65" border="0" src="images/projects/kolte-patil/cilantra/new_launch_blue.png"></a>
                     </div>-->                              
                </div>

                <div class="listright">
                    <div style="width:498px; height:42px;" class="flt">
                        <div class="list-logo flt">
                            <div class="buildborder"><a href="p-kolte-patil-cilantro-wagholi-pune.php"><img width="80" height="36" border="0" align="absmiddle" alt="Kolte Patil" src="admin/uploads/<?php echo $row['builder_logo']?>"></a>
                            </div>
                               <div class="tablistname"><a href="p-kolte-patil-cilantro-wagholi-pune.php"><?php echo $row['property_name'] ?></a></div>
                        </div>   
                        <?php if ($row['property_price_min']!=0) { ?>      
                        <div class="listprice">
                            <img width="18" height="18" align="absmiddle" src="images/city/rupee_icon.gif"> <?php echo $row['property_price_min'] ?> Lacs - <?php echo $row['property_price_max'] ?> Lacs       
                        </div>
                        <?php } else { ?>
                        <div class="listprice">
                             <img width="18" height="18" align="absmiddle" src="images/city/rupee_icon.gif">Price on Request
                        </div>
                        <?php } ?>

                    </div>

                        <div class="spacer3">&nbsp;</div>        

                    <div class="listbox">
                        <a href="p-kolte-patil-cilantro-wagholi-pune.php"><strong>Address</strong>:<?php echo $row['locality_name'] ?>, <?php echo $row['city_name'] ?><br> <strong>Types</strong>: 2BHK &amp; 3BHK
                        <br><strong>Sizes:</strong> <?php echo $row['property_size_min'] ?> sqft - <?php echo $row['property_size_max'] ?> sqft </a>
                    </div>

                    <div style="margin-left:-3px;" class="flt">
                        <div style="width:110px;" class="flt"><a style="text-decoration:none;" href="p-kolte-patil-cilantro-wagholi-pune.php"><input type="button" value="View Details" class="detail_project"></a>
                        </div>     
                      <div style="width:110px;" class="flt"><input type="button" onClick="showEnqForm('2659','Cilantro'); return false;" value="Enquire Now" class="enquire_project"></div>
                    </div>
                           <div class="spacer">&nbsp;</div>                                 
                </div>
                <div class="spacer15">&nbsp;</div>              
       </div> 
```

我返回了分页结果，但是当我单击页码时，它会将我带到 process.php，因为分页类使用**$_SERVER[PHP_SELF]** 如何在不更改页面 url 的情况下对结果进行分页，即使用 ajax 相同执行。我无法进行太多更改，如果对此进行修改使其工作会很有用。（这就是为什么我要添加尽可能多的代码。）对不起，如果它太多了。
谢谢

**编辑** **@Gavin这是我的process.php**

```
 <?php session_start();
  if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
{
    include('processRegion.php');
    die();
}
include_once("includes/classes/db_connect.php");
include_once("pagination/paginator.class.php");
$pages = new Paginator();
            if(isset($_GET['dataString']))
               {
                    $regionValue =  $_GET['dataString'];
                    //echo "region=".$regionValue;
               }
else{
        $regionValue = $_POST['dataString'];
}
$reqValue = "'".$regionValue."'";

echo $reqValue;

$arr = explode(",",$reqValue);
//print_r($arr);
$getBack = implode("','",$arr);

$beds = "'".$_POST['beds'];
//echo ($beds);
$arrBeds= explode(",",$beds);
//print_r($arrBeds);
$getBedValue = implode("','",$arrBeds);
$finalBedValue = substr($getBedValue,0,-2);

if(isset($_POST['beds']) && $_POST['beds']!=" ")
{
    $cityNameAndRegionName = "cities.city_name like '%".$_SESSION['$cityName']."%' and (suburbs.suburb_name in (".$getBack.")) and (properties_type.bed_type in (".$finalBedValue."))"; 
}
else
{
    $cityNameAndRegionName = "cities.city_name like '%".$_SESSION['$cityName']."%' and (suburbs.suburb_name in (".$getBack."))";
}   

$countSql="SELECT count(*) as total from properties inner join cities on properties.city_id=cities.city_id inner join suburbs on properties.suburb_id=suburbs.suburb_id left outer join properties_type on properties.property_id=properties_type.property_id where ".$cityNameAndRegionName." ";
    ?>
    <?php include_once("processRegion.php"); ?> 
```

**带有 HTML 的**processRegion.php****

 **```
<div class="flt width710" id="">
            <div style="float:right" id="toppagesel">
            <?php

            //Query processed here
        ?>
            </div>
                    </div>
        <div class="spacer15">&nbsp;</div>
                <div><strong>Results for properties for sale</strong> in <?php echo ucfirst($_SESSION['$cityName']) ?>.</div>
        <div class="spacer15">&nbsp;</div>

         <div class="width710" id="displayProp">
        <?php while($row=mysql_fetch_assoc($result))
    { ?>  
            <div class="projectlisttiger" id="propertyList">        

                <div class="spacer5">&nbsp;</div>
                  <div class="listnewimg flt">
                    <a href="p-kolte-patil-cilantro-wagholi-pune.php">
                        <img src="admin/uploads/<?php echo ($row['property_cover_image']) ?>" width="186" height="125" border="0">

                </div>

                <div class="listright">
                    <div style="width:498px; height:42px;" class="flt">
                        <div class="list-logo flt">
                            <div class="buildborder"><a href="p-kolte-patil-cilantro-wagholi-pune.php"><img width="80" height="36" border="0" align="absmiddle" alt="Kolte Patil" src="admin/uploads/<?php echo $row['builder_logo']?>"></a>
                            </div>
                               <div class="tablistname"><a href="p-kolte-patil-cilantro-wagholi-pune.php"><?php echo $row['property_name'] ?></a></div>
                        </div>   
                        <?php if ($row['property_price_min']!=0) { ?>      
                        <div class="listprice">
                            <img width="18" height="18" align="absmiddle" src="images/city/rupee_icon.gif"> <?php echo $row['property_price_min'] ?> Lacs - <?php echo $row['property_price_max'] ?> Lacs       
                        </div>
                        <?php } else { ?>
                        <div class="listprice">
                             <img width="18" height="18" align="absmiddle" src="images/city/rupee_icon.gif">Price on Request
                        </div>
                        <?php } ?>

                    </div>
                    <div class="spacer3">&nbsp;</div>        

                    <div class="listbox">
                        <a href="p-kolte-patil-cilantro-wagholi-pune.php"><strong>Address</strong>:<?php echo $row['locality_name'] ?>, <?php echo $row['city_name'] ?><br> <strong>Types</strong>: 2BHK &amp; 3BHK
                        <br><strong>Sizes:</strong> <?php echo $row['property_size_min'] ?> sqft - <?php echo $row['property_size_max'] ?> sqft </a>
                    </div>

                    <div style="margin-left:-3px;" class="flt">
                        <div style="width:110px;" class="flt"><a style="text-decoration:none;" href="p-kolte-patil-cilantro-wagholi-pune.php"><input type="button" value="View Details" class="detail_project"></a>
                        </div>     
                      <div style="width:110px;" class="flt"><input type="button" onClick="showEnqForm('2659','Cilantro'); return false;" value="Enquire Now" class="enquire_project"></div>
                    </div>
                           <div class="spacer">&nbsp;</div>                                 
                </div>
                <div class="spacer15">&nbsp;</div>              
       </div>
       <?php
            }
       ?>
  <div class="spacer15">&nbsp;</div>
</div>     

<div style="float:right" id="toppagesel">
            <?php 
                echo $pages->display_pages();
                echo $pages->display_items_per_page();
            ?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:36:05.550

正如我的评论中所述。

您可以执行以下操作：

```
$(document).ready(function()
{
    $('.paginate').live('click', function(e)
    {
        e.preventDefault();
        var btnPage = $(this);
        $.ajax(
        {
            url : btnPage.attr('href'),
            success : function(resp)
            {
                // replace current results with new results.
                $('#project_section').html(resp);
            },
            error : function()
            {
                window.location.href = btnPage.attr('href');
            }
        });
    });
}); 
```

以上将复制您单击每个分页链接。

我建议接下来要做的是将生成“结果”列表的 PHP 代码和 HTML 分离到一个单独的文件中。

这样，在显示结果的页面上，您可以简单地使用`include('path-to-results-file.php');`which 将适用于非 ajax 请求，然后您可以执行以下操作：

**进程.php**

```
if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
{
    include('path-to-results-file.php');
    die();
} 
```

上面将检测是否已发出 ajax 请求，如果是，则不会显示包括结果在内的整个页面，它将仅显示结果和分页。

**更新以包含更好的解释**

下面是我的意思的一个非常简单的例子。

**当前进程.php**

```
 <?
    // currently contains all of the code required
    // to query the database etc.
?>
<html>
<head>...</head>
<body>
    <!-- header content -->
    <table>
    <?
        // currently contains all of the code required to display
        // the results table and pagination links.
    ?>
    </table>
    <!-- footer content -->
</body>
</html> 
```

**新进程.php**

```
<?
    if(!empty($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')
    {
        include('path-to-results-file.php');
        die();
    }
?>
<html>
<head>...</head>
<body>
    <!-- header content -->
    <? include('path-to-results-file.php'); ?>
    <!-- footer content -->
</body>
</html> 
```

**新的结果路径文件.php**

```
<?
    // currently contains all of the code required
    // to query the database etc.
?>
<table>
<?
    // currently contains all of the code required to display
    // the results table and pagination links.
?>
</table> 
```

现在... 当您`process.php`通过浏览器正常访问时，或者当 javascript 被禁用时。它现在的工作方式与没有 Javascript 的方式相同。

当您转到`process.php`然后单击其中一个分页链接（启用了 javascript）时，`process.php`将检测到您正在使用 Ajax，并且只发回结果表。**

# objective-c - XCode 4.2 为什么我在 .h 和 .m 文件中都看到 @interface

> ID：10928372
> 
> 赞同：7
> 
> 时间：2012-06-07T08:36:03.233
> 
> 标签：objective-c, ios, xcode

为什么我看到@interface 两次（在我创建的这个 UIViewController 文件中的 .h 和 .m 文件中。.m 中的那个似乎就像一个构造函数。是吗？

.h 文件

```
@interface BlackTimer : UIViewController 

@end 
```

.m 文件

```
@interface ViewController ()

@end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T08:38:34.810

.m 文件中的@interface 称为类扩展。[这](http://www.friday.com/bbum/2009/09/11/class-extensions-explained/)是一个很好的链接来解释它。希望这可以帮助。这是关于类扩展的 Apple 文档[。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T08:38:09.943

通常在 .m 文件中放置私有方法的所有声明

像这样写“私人”（或类似的东西）这个词是一个很好的用途：

```
@interface ViewController (private)

-(void)myPrivateMethod;

@end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T08:39:45.547

实现文件 (.m) 中的`@interface ViewController ()`定义是一个匿名类别。它允许定义您的类实现的 ivars、属性和消息，而不会将它们暴露给导入您的公共接口 (.h) 的其他对象。

# objective-c - 在返回值应该是不可变的地方返回可变的

> ID：10928374
> 
> 赞同：0
> 
> 时间：2012-06-07T08:36:25.807
> 
> 标签：objective-c, cocoa

我找到了这段代码

```
-(NSString *) genRandStringLength: (int) len {

    NSMutableString *randomString = [NSMutableString stringWithCapacity: len];

    for (int i=0; i<len; i++) {
         [randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
    }

    return randomString;
} 
```

可以传递一个可变对象，结果是不可变的吗？

我们应该这样做吗？

```
return [randomString copy]; 
```

或者

```
return randomString; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:44:34.983

从技术上讲，返回 an`NSMutableString`而不是`NSString`. 由于前者是后者的子类，因此`NSMutableString`实例支持 an`NSString`所做的一切。例如，如果您查看 Cocoa，您会注意到许多 alloc/init 方法返回您要创建的类的子类的实例。

在您的特定情况下，如果该方法返回一个可变字符串，我认为没有问题，因为该字符串是在该方法中本地创建的，并且没有在类中的其他地方使用。

通常，如果这些对象是返回它们的类的 ivars/属性，您可能应该避免返回可变对象。如果您这样做，该方法的调用者可能会发现返回的对象是可变的，然后更改其内容而不通知对象的“拥有”实例有关更改。

还要注意，如果要返回一个不可变对象，`return [randomString copy];`只有在 ARC 和垃圾回收下才是正确的。使用手动内存管理，它应该是`return [[randomString copy] autorelease];`or `return [NSString stringWithString:randomString];`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:44:14.463

你可以做 ：-

```
-(NSString *) genRandStringLength: (int) len
{
  NSMutableString *randomString = [NSMutableString stringWithCapacity: len];

  for (int i=0; i<len; i++) {
     [randomString appendFormat: @"%C", [letters characterAtIndex: arc4random() % [letters length]]];
  }

  NSString *immutableString = [NSString stringWithString:randomString];

  //OR

  NSString *immutableString = (NSString *)randomString;

  return immutableString;
} 
```

# javascript - 使用 Phonegap 将图像保存到 iPhone 照片库

> ID：10928377
> 
> 赞同：0
> 
> 时间：2012-06-07T08:36:41.180
> 
> 标签：javascript, cordova

我希望能够使用我的 phonegap 应用程序以编程方式将图像从页面保存到 Iphone 照片库。（就像在 iOS safari 中通过长按然后“保存图像”来保存图像一样）

有没有办法用javascript做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:41:52.073

以下帖子可能会解决您的问题：

[如何使用 PhoneGap 将图像保存到 iPhone 照片库？](https://stackoverflow.com/questions/8663890/how-can-i-save-an-image-to-an-iphone-photo-gallery-using-phonegap)

## 编辑

[FileTransfer.download()是另一种在本地保存图像的方法，请在](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileTransfer_download)[此处](http://docs.phonegap.com/en/1.8.0/cordova_file_file.md.html#FileTransfer)查看 Phonegap 文档以获得更多选项。

# jquery - 如何显示通过 jcrop 创建的图像的裁剪区域？

> ID：10928378
> 
> 赞同：0
> 
> 时间：2012-06-07T08:36:43.983
> 
> 标签：jquery, haml, jcrop

我正在使用 jcrop 在我的网站中实现图像裁剪。

![在此处输入图像描述](../Images/e290e4e3e37351752229926c141019ba.png)

![在此处输入图像描述](../Images/17044d7808be84f9e453fe518251b353.png)

单击“确认裁剪”后，我希望显示区域被新裁剪的图像替换。

我的代码如下：

```
//jquery method to display cropped image
coords_w = @options.media.get('crop_w')
coords_h = @options.media.get('crop_h')
coords_x = @options.media.get('crop_x')
coords_y = @options.media.get('crop_y')

img = new Image()
img.onload = () =>
  attachImage = () =>
    rx = img.width / coords_w
    ry = img.height / coords_h

    @$('.media_preview_display .image_holder').find('img').attr('src', @options.media.get('image_url'))
    @$('.media_preview_display .image_holder').find('img').css
      width: Math.round(rx * img.width) + 'px'
      height: Math.round(ry * img.height) + 'px'
      marginLeft: '-' + Math.round(rx * coords_x) + 'px'
      marginTop: '-' + Math.round(ry * coords_y) + 'px'

img.src = @options.media.get('image_url') 
```

它目前无法正确显示裁剪后的图像。如何修改我的代码以便只显示裁剪区域（如我的代码中所示，我有裁剪区域的 x、y 轴和高度和宽度）

```
//haml file
.section.media_preview_display.align_center
  .image_holder
    %img.jcrop{src: "<%= generic_object.image_url %>"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T13:20:11.483

Jcrop 实际上并不裁剪图像。您需要在服务器端使用从 jcrop 获得的参数来处理实际裁剪。

您可以通过溢出：隐藏来了解 css 位置和大小。

# html-table - Outlook 2007/2010 中浮动表格之间的水平差距

> ID：10928380
> 
> 赞同：2
> 
> 时间：2012-06-07T08:36:49.880
> 
> 标签：html-table, css-float, html-email, outlook-2010, outlook-2007

我花了两周的时间来找到任何解决方案，但无法找到。如果在每个表格之后浮动表格，Microsoft Outlook 2007/2010 中将有一个像素的间隙，它使用 Microsoft Word 2007 HTML 渲染引擎：

![在此处输入图像描述](../Images/a6900d38ba32ca9670e0d727b3a75db4.png)

我会感谢您提供任何可行的解决方案 -*这不是将表格放在分开`<td>`的*.

**这是重现它的 HTML 代码：**

```
<html>
    <head>
    <title>Outlook 2007/2010 horizontal gap</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <style type="text/css">
        table { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
    </style>
</head>
<body bgcolor="#000000">
    <table bgcolor="#ffff00" align="left"><tr><td>&nbsp;</td></tr></table>
    <table bgcolor="#ffff00" align="left"><tr><td>&nbsp;</td></tr></table>
</body>
</html> 
```

**到目前为止我已经尝试过：**

*   `display: inline-table;`代替`align="left"`
*   `mso-`没有运气搜索其他相关的CSS 属性
*   删除`<table>`元素之间的空格
*   `border-collapse: collapse`和`border-spacing: 0`
*   添加`border: 1px solid red;`将消除间隙但增加表格的宽度
*   其他`display`的，`padding`和`margin`
*   和/或上不相关或已弃用的 html 属性（`rules`、、、`frame`等`border`）`<td>``<table>`

* * *

**有趣的因素：**

如果将这两个表放在一个表中，额外的间隙宽度将增加到 2 个像素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T22:43:34.847

这是一个如何浮动表格的示例。您需要结合使用border="1" 和mso-table css 来消除1px 的差距。参见示例：

```
<table bgcolor="#454545" width="100%" border="0" cellpadding="0" cellspacing="0"><tr><td width="5%"></td><td align="center" width="95%">

<div align="left" style="float: left; padding: 0px; margin:0px;">
  <table border="1" bordercolor="#959595" cellpadding="0" cellspacing="0" align="left" style="padding: 0px; margin:0px; mso-table-lspace: -1pt; mso-table-rspace: -1pt; ">
    <tr>
      <td width="318" bgcolor="959595">table 1

      </td>
    </tr>
  </table>
</div>
<div align="left" style="float: left; padding: 0px; margin:0px;">
  <table border="1" bordercolor="#959595" cellpadding="0" cellspacing="0" align="left" style="padding: 0px; margin:0px; mso-table-lspace:-1pt; mso-table-rspace: -1pt; ">
    <tr>
      <td width="318" bgcolor="959595">table 2

      </td>
    </tr>
  </table>
</div>

</td></tr></table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T11:09:31.997

尝试在两个表的每一个上使用 table border="0" cellspacing="0" cellpadding="0" 。如果我理解你的问题是正确的，这应该可以解决它:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T14:02:08.940

我们在这里可能是 SOL。我也在研究与 Outlook 2007/10 兼容的电子邮件格式。如果我的读数是正确的，Outlook 2007/10/13 不支持`border-spacing`表格，这可能是给你间距问题的原因。

参考：
[Outlook 2007 中的 Word 2007 HTML 和 CSS 呈现功能（第 1 部分，共 2 部分）](http://msdn.microsoft.com/en-us/library/aa338201.aspx#Word2007MailHTMLandCSS_Full)
[电子邮件中的 CSS 支持指南 | 活动监视器](http://www.campaignmonitor.com/css/)

# html - CSS让文本覆盖图像

> ID：10928381
> 
> 赞同：0
> 
> 时间：2012-06-07T08:36:59.733
> 
> 标签：html, css, positioning

你知道 tekst (paragraphs) 总是围绕一个浮动的图像，像这样吗？[见图片]

![示例浮点数](../Images/5b6fa647b87b6d92caac3b98df5be227.png)

我希望 tekst 覆盖图像。就像下面的例子 img 一样。我尝试使用`z-index`，`display:inline`但都没有奏效。

![示例我想要什么](../Images/43a6cecbbb3387cb73de9114e7cb9126.png)

这不是我的实际 HTML，但基本上是我的样子；

```
<img src="" alt="" style="float:right;" />
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sed eros tellus, sit amet ultrices quam. Sed quis justo metus, quis gravida orci. Vivamus porttitor fringilla massa at luctus. Quisque lacinia diam eget justo tempor vehicula. Nulla fringilla libero sit amet tortor bibendum imperdiet. Pellentesque in risus vel libero pellentesque hendrerit. Suspendisse vehicula fermentum pretium. Sed elementum eleifend dolor nec aliquam. Nam ac viverra dolor. Vivamus vitae ultricies velit.</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:39:05.620

您可以使用`position: absolute`和`z-index`将图像移动到文本后面，或者将图像用作段落的背景图像。

例如

HTML：

```
<p><img src="xyz.jpg" /> Lorem ipsum</p> 
```

CSS：

```
img {
    position: absolute;
    top: 0;
    right: 0;
    z-index: 1;
}
p {
    z-index: 10;
} 
```

或者：

```
<p>Lorem ipsum</p> 
```

CSS：

```
p {
    background: url(xyz.jpg) top right no-repeat transparent;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:40:31.797

尝试：

```
<div style="position: relative;">
 <img src="" alt="" style="position: absolute; top: 0px; right: 0px;" />
 <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla sed eros tellus, sit amet ultrices quam. Sed quis justo metus, quis gravida orci. Vivamus porttitor fringilla massa at luctus. Quisque lacinia diam eget justo tempor vehicula. Nulla fringilla libero sit amet tortor bibendum imperdiet. Pellentesque in risus vel libero pellentesque hendrerit. Suspendisse vehicula fermentum pretium. Sed elementum eleifend dolor nec aliquam. Nam ac viverra dolor. Vivamus vitae ultricies velit.</p>
</div> 
```

关键是`absolute`定位。确保容器有一个位置集（`relative`如果它当前没有，则使用）。

（您可能还需要一些`z-index`检查以确保图层正确）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:50:54.470

如果我理解这个问题，这就是你想要[的 jsfiddle](http://jsfiddle.net/v4D9q/1/)。

Z-index 仅适用于`position: absolute`. 倒计时坐标取决于属性位置的值。如果父元素设置为`position: relative`，则子元素的绝对定位决定了它们在父元素之上的位置。

# algorithm - 曲面细分的逆任务

> ID：10928383
> 
> 赞同：3
> 
> 时间：2012-06-07T08:37:14.160
> 
> 标签：algorithm, 3d, computational-geometry

作为输入，我有一组三角形，它们形成带孔的凹形网格。每个三角形由三个顶点组成：(vi,vj,vk),... 没有提供邻接信息。**算法必须将具有相同法线**的三角形集合“联合”成多边形。所以输出是 (pi,pj,pk,...,ps),...

例如（见下图），假设我们有由三角形组成的网格

(v0,v1,v4), (v1,v3,v4), (v1,v2,v3)

(v2,v6,v4), (v6,v5,v4)。

作为输出，我们有：

(p0,p1,p4)

(p1,p2,p3,p4)

![在此处输入图像描述](../Images/955427ec97497921b7f211170846875a.png)

我正在寻找解决上述问题的有效算法。任何建议、提示或文章表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:30:16.503

在我的头顶上；

*   对每个多边形进行三角剖分，得到一组三角形。
*   对于所有多边形中的所有三角形，根据法线分配一个组号
*   对于每个三角形 T = (va,vb,vc) 创建了邻接信息 E = (ab,bc,ca)，其中 ab 是在边 a,b 处与 T 相邻的三角形的链接/索引。
*   通过搜索两个相邻三角形不属于同一组的任何边来跟踪每个新多边形的轮廓，跟随具有相同关系的下一条边，并重复直到回到第一条边。

请注意，您还必须在 TIN 船体边缘处理 NULL 边缘类型，但这很简单。

这里最慢的一点是开发邻接信息，许多好的 TIN 创建算法可以在 O(n log n) 内完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:52:18.213

查看自适应网格粗化算法。这些通常用于计算流体动力学（[Ansys CFX](http://www.ansys.com/Products/Simulation+Technology/Fluid+Dynamics/ANSYS+CFX)、[CD-Adapco Star CCM+](http://www.cd-adapco.com/products/star_ccm_plus/index.html)等）/结构动力学（Anasys 等人）的高级软件。给定网格的自动细化和粗化是有利的。

一些关于这个主题的免费论文将为您提供一个强有力的起点：

1.  [https://cfwebprod.sandia.gov/cfdocs/CCIM/docs/coarsening.pdf](https://cfwebprod.sandia.gov/cfdocs/CCIM/docs/coarsening.pdf)

2.  [http://tetra.mech.ubc.ca/ANSLab/publications/coarsen.pdf](http://tetra.mech.ubc.ca/ANSLab/publications/coarsen.pdf)

3.  [http://www.cs.cmu.edu/~glmiller/Publications/MiTaTe98.pdf](http://www.cs.cmu.edu/~glmiller/Publications/MiTaTe98.pdf)（这是相当数学的）

自适应网格细化算法领域的其他 Google 搜索将显示有关该主题的类似论文。

编辑。自适应网格粗化的一种基本且成熟的方法是*边缘折叠方法*，该方法涉及将边缘减少到单个顶点，从而删除两个元素。Li X.、Shephard MS、Beall MW “通过网格修改进行 3-D 各向异性网格自适应”。Computer Methods in Applied Mechanics and Engineering, 2004\. 有一个很好的粗化算法，在伪代码中定义为

```
for all edge in short edge list do
    for all vertex that bounds the current edge do
        if vertex is not yet tagger then
            append vertex to dynamic list
            tag vertex to be in dynamic list
        end if
    end for
end for
while vertices not tagged processed in dynamic list do
    get an unprocessed vertex Vi from the list
    get Ej , the shortest mesh edge in transformed space connected to Vi
    if the transformed length Ej is greater than Llow then
        remove Vi from the dynamic list
    else
        evaluate edge collapse operation of collapsing Ej with Vi removed
        if the edge collapse would create an edge longer than Lmax then
            evaluate relocated vertex Vi
        else if the edge collapse would lead to 
            at/inverted elements then
            evaluate the swaps(s)/collapse compound operation
        end if
        if any local mesh modication is determined then
            tag neighbouring vertices of Vi in the dynamic list as unprocessed
            apply the local mesh modication
            remove Vi from the dynamic list if it is collapse
        else
            tag Vi as processed
        end if
    end if
end while 
```

这取自我过去使用过的一篇令人印象深刻的硕士论文。可以在[这里找到](http://www.doc.ic.ac.uk/teaching/distinguished-projects/2011/m.potter.pdf)

我希望这有帮助。

# java - 在 Java 中检查文件扩展名

> ID：10928387
> 
> 赞同：28
> 
> 时间：2012-06-07T08:37:29.577
> 
> 标签：java, string, if-statement

我必须将数据从 Excel 文件导入数据库，为此，我想检查所选文件的扩展名。

这是我的代码：

```
String filename = file.getName();
String extension = filename.substring(filename.lastIndexOf(".") + 1, filename.length());

String excel = "xls";
if (extension != excel) {
    JOptionPane.showMessageDialog(null, "Choose an excel file!");
}
else {
    String filepath = file.getAbsolutePath();
    JOptionPane.showMessageDialog(null, filepath);
    String upload = UploadPoData.initialize(null, filepath);

    if (upload == "OK") {
        JOptionPane.showMessageDialog(null, "Upload Successful!");
    }
} 
```

但我总是得到：

> 选择一个excel文件！

我找不到我的代码有什么问题，有人可以帮忙。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-07T08:38:39.203

下列的

```
extension != excel 
```

应该

```
!excel.equals(extension) 
```

或者

```
!excel.equalsIgnoreCase(extension) 
```

* * *

**也可以看看**

*   [字符串`equals()`与`==`](https://stackoverflow.com/questions/767372/java-string-equals-versus)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T08:45:17.950

`==`测试引用相等。对于值相等测试，使用`.equals`. `String#equalsIgnoreCase`如果您希望在相等性测试期间忽略大小写，请使用。

另一件事：不要重新发明轮子，除非它严重损坏。在您的情况下，您应该使用 Apache Commons 的[FilenameUtils#isExtension](http://commons.apache.org/io/api-1.4/org/apache/commons/io/FilenameUtils.html#isExtension%28java.lang.String,%20java.lang.String%29)来检查扩展名。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T08:44:08.933

```
if (extension != excel){
   JOptionPane.showMessageDialog(null, "Choose an excel file!");

} 
```

应该用作

```
if (!extension.equals(excel)){
   JOptionPane.showMessageDialog(null, "Choose an excel file!");

} 
```

和

```
 if (upload == "OK") {
 JOptionPane.showMessageDialog(null,"Upload Successful!");
} 
```

作为

```
 if ("OK".equals(upload)) {
 JOptionPane.showMessageDialog(null,"Upload Successful!");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T09:50:57.793

您可以使用 Apache Commons Api 检查文件扩展名

```
String filename = file.getName();
if(!FilenameUtils.isExtension(filename,"xls")){
  JOptionPane.showMessageDialog(null, "Choose an excel file!");
} 
```

[http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html](http://commons.apache.org/io/api-release/index.html?org/apache/commons/io/package-summary.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-07T08:43:19.087

利用

```
excel.equals(extension)

or

excel.equalsIgnoreCase(extension) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T08:39:08.203

在您的情况下使用**equals()**方法而不是**!=**符号。我的意思是写

```
if (!(extension.equals(excel))){..........} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-01-19T14:10:20.320

在我的程序中，我做到了

```
if(file_name.endsWith(".xls") || file_name.endsWith(".xlsx"))
   // something works with file 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-19T03:27:17.297

怎么样

```
if (filename.endsWith("xls"){
    <blah blah blah>
} 
```

?

# mysql - 将表名更改为大写

> ID：10928390
> 
> 赞同：21
> 
> 时间：2012-06-07T08:37:36.073
> 
> 标签：mysql

我需要将表名从小写更改为大写，但使用此语句可以更改表名，但名称为小写..

```
sql> rename table name to Name; 
```

有没有办法将表名转换为大写？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-07T08:41:25.350

1.  在 my.cnf 的 mysql 服务器变量数组中添加这一行：

    ```
    lower_case_table_names=2 
    ```

2.  重启你的mysql服务器。

3.  现在您可以创建或更改大写表，服务器将接受您的查询。

请注意，通常，在 Linux 系统上，主 mysql 配置文件可以在`/etc/my.cnf`或中找到`/etc/mysql/my.cnf`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T08:43:08.263

这应该给你你正在寻找的东西......

```
ALTER TABLE oldtable RENAME TO NewTable; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-03T12:35:04.693

如果您使用 EasyPHP（也许它也适用于 WAMP/XAMP/LAMP？）这对我有用：

在 EasyPHP 安装文件夹中打开以下文件：

> \binaries\conf_files\my.ini

就在它写的那一行下面：

> [mysqld]

写：

> lower_case_table_names=2

所以你会有：

> [mysqld]
> 
> lower_case_table_names=2

EasyPHP 会注意到此文件的变化并重新启动，但您始终可以手动重新启动以确保。

* * *

您可以使用以下命令测试变量：

> 显示变量，如“lower_case_table_names”；

或者在 phpMyAdmin 中转到：主页 > 变量，然后搜索“小写表名”。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-07T08:48:54.267

简单的

```
sql> rename table name to tempName;
sql> rename tempName name to TABLE; 
```

# actionscript-3 - Granite DS Actionscript 代码生成 Ant 找不到类错误

> ID：10928401
> 
> 赞同：0
> 
> 时间：2012-06-07T08:38:13.020
> 
> 标签：actionscript-3, apache-flex, ant, graniteds

我试图让我的 Ant 构建运行花岗岩 DS Actionscript 代码生成任务并且遇到了一些问题。目前我收到此错误：

```
BUILD FAILED
C...\build.xml:62: Could not load Java class file: SampleDTOOne.class 
```

因此，显然找到了 .class 文件。但是，我不确定此错误是否意味着它无法加载 .class 文件或找不到实际的 java 源代码。

我的 Ant 任务定义如下所示：

```
 <classpath>
            <pathelement location="C.../src/packages/" />    
        </classpath>

        <fileset dir="${base.build.dir}/jc/classes/gpbit/packageName">
            <include name="*.class" />
        </fileset>

    </gas3> 
```

我为类路径尝试了许多不同的值，但无法正常工作。我不喜欢我用来查找 .class 文件的路径，但目前这是我唯一可以开始工作的路径。似乎没有任何变量可以更容易地到达这个位置。该文件集肯定可以正常工作，因为它肯定找到了 .clas 文件以在错误消息中包含名称。

更详细的错误信息：

```
 [gas3] Using output dir: C...trunk\plugin\build/etc/src/as3
 [gas3] Using classpath: C...\trunk\plugin\src\packages
 [gas3] Loading all Java classes referenced by inner fileset(s) {
 [gas3] java.lang.ClassNotFoundException: SampleDTOOne
 [gas3]     at org.apache.tools.ant.AntClassLoader.findClassInComponents(AntClassLoader.java:1361) 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:35:10.597

看看[这里](http://www.graniteds.org/public/docs/2.3.2/docs/reference/en-US/html/graniteds.gas3.html#gas3.ant)的文档。基本使用示例如下：

```
<gas3 outputdir="as3">
    <classpath>
        <pathelement location="classes"/>
    </classpath>

    <fileset dir="classes">
        <include name="com/myapp/entity/**/*.class"/>
    </fileset>
</gas3> 
```

请注意，您希望 Gas3 处理生成的类文件（在文件集部分中）也必须在类路径部分中（因此可以通过使用此类路径配置的类加载器加载它们）。

因此，您的配置应如下所示：

```
<gas3 outputdir="as3">
    <classpath>
        <pathelement location="${base.build.dir}/jc/classes"/>
    </classpath>

    <fileset dir="${base.build.dir}/jc/classes">
        <include name="gpbit/packageName/*.class"/>
    </fileset>
</gas3> 
```

如果您的类使用第三方 jar，请将它们也包含在类路径中。

PS：Gas3 从不使用 Java 源代码，它只是基于 Java 反射。

# c# - 如何制作一个在 webservice 方法结束时运行的方法？

> ID：10928402
> 
> 赞同：1
> 
> 时间：2012-06-07T08:38:19.593
> 
> 标签：c#, web-services

我有一个网络服务并在构造函数中启动了很多方法。我需要很多这些“结束”（例如数据库连接终止等），是否有一种简单而花哨的方法来做到这一点，有点像构造函数（de-contructor），即。在 web 服务方法调用结束时运行的方法？在每种方法结束时重复所有内容，感觉必须有更聪明的方法。

我选择的语言是 c#

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:43:22.103

这种方法怎么样？

```
 private void WebMethodAction()
    {
        Execute(() =>
        {
            Console.WriteLine("Hello World");
        });
    }

    private int WebMethodFunc(int a, int b)
    {
        return Execute(() =>
        {
            return (double)a / (double)b;
        });
    }        

    public void Execute(Action action)
    {
        // call Execute<T> and discard result
        Execute(() => { action.Invoke(); return true; });
    }

    public T Execute<T>(Func<T> func)
    {
        T result = func.Invoke();

        // cleanup
        Console.WriteLine("Cleanup");

        return result;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:40:45.497

您可以使用[try finally](http://msdn.microsoft.com/en-us/library/zwc8s4fz.aspx)并将所有整理内容放在 finally 部分中。

将其放在 Web 服务方法中：

```
[WebMethod]
public void DoSomething(string value)
{
    try
    {
       //Do Something
    }
    finally
    {
       //Tidy up after methods in the try have ended
    }
} 
```

# php - 使用openID的数据库设计是什么？

> ID：10928412
> 
> 赞同：0
> 
> 时间：2012-06-07T08:38:40.237
> 
> 标签：php, database-design, openid, janrain

我想为我的登录系统使用 janrain，一切准备就绪，但我不知道如何构建我的数据库？使用 openID 的数据库设计是什么？特别是当一些用户有一些不同的提供者时，我怎么知道他们是谁？他们是新用户还是旧用户？我想要一个完整的数据库设计

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:40:25.400

在存储用户信息的表中为 openId 添加一列。

一个例子如下：

```
create table users (
first_name varchar(50),
last_name varchar(50),
email_address varchar(100),
openId varchar(150)); 
```

您还可以为 openId 设置索引，以便在将用户登录到应用程序时搜索更快。还要添加 UNIQUE 约束，以便具有相同 openId 的用户不存在两行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:41:15.053

您所需要的只是一个用于存储您使用的任何 OpenID 库返回的身份 URL 的列。

您可以考虑将其放在一个单独的表中，该表只有`identity`和`userid`列，以便用户可以将多个 openid 分配给他的帐户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:40:28.927

我会建议你做一些我在我的应用程序中所做的事情。我在用户表中有一个布尔列。如果用户使用 openID，则为 1，否则为 0。另一个表是 opneID 表，它具有提供者和在他们使用开放 ID 时提供给他们的密钥。因此，您将有以下三种情况：

1.  用户已经登录并想在下次登录时添加 openID。
2.  用户已经注册但想在下次登录时使用 openID。
3.  用户未注册并希望使用 OpenID 登录。

这就是我所做的：

1.  详细信息已存储，因此查找当前登录用户并将 openID 布尔值设置为 true 并添加他将提供的 openID 详细信息。

2.  当他点击 openID 时，询问他是否已经注册，是否要求提供电子邮件 ID 和密码，然后使用 openID 详细信息。

3.  （这是最难的部分）将 openID 设为布尔值 1 并添加 OpenID 的详细信息，然后给他一个表单，该表单只询问适合您的应用程序的重要细节。根据您的应用程序的规模，您可能不需要第二种形式。我正在开发的应用程序需要用户提供额外的信息。如果您想跳过第二步，您可以查看 Facebook API 提供的一些选项，以检索 first_name last_name 等详细信息并保存。

因此，当用户登录时，检查 OpenID 布尔值是否设置为 0 或 1 如果设置为 1，则使用您可能已通过正确连接保存的相应 OpenID 详细信息。

我发现的最困难的部分是第三步，我不应该以某种方式从使用 OpenID 的用户那里获取任何密码。这违反了数据库约束。我无法取消限制，因为这会给其他想要注册的用户带来问题。所以我不得不以某种方式规避 openID 用户的限制。它可能不是最好的解决方案，但它可能会对您有所帮助。祝你好运！！

# jasper-reports - 当我的碧玉报告只有一页时，如何隐藏第 x 页

> ID：10928415
> 
> 赞同：2
> 
> 时间：2012-06-07T08:38:45.630
> 
> 标签：jasper-reports

我正在使用 jasper-reports 4.5.0 并且正在生成报告。我的要求是，如果我的报告只有一页，那么它不应该显示页面 1 0f 1。我该怎么做。要显示页面 x of y我正在使用以下代码行。

```
 <textField>
                <reportElement x="395" y="121" width="20" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="350" y="121" width="45" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["PAGE"]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="415" y="121" width="25" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["OF"]]></textFieldExpression>
            </textField>
            <textField evaluationTime="Report">
                <reportElement x="440" y="121" width="19" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$V{PAGE_NUMBER}]]></textFieldExpression>
            </textField> 
```

这是新修改的代码。

```
<variable name="NPAGES" class="java.lang.Integer" calculation="Highest">
        <variableExpression><![CDATA[$V{PAGE_NUMBER}]]></variableExpression>
        <initialValueExpression><![CDATA[$V{PAGE_NUMBER}]]></initialValueExpression>
    </variable>

<textField>
                <reportElement x="395" y="121" width="20" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? $V{PAGE_NUMBER} : ""]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="350" y="121" width="45" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? "PAGE" : ""]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="415" y="121" width="25" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? "OF" : ""]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="440" y="121" width="19" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? $V{NPAGES} : ""]]></textFieldExpression>
            </textField> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:50:42.183

定义一个变量 NPAGES，它设置为报告中的总页数：

```
<variable name="NPAGES" class="java.lang.Integer" calculation="Highest">
    <variableExpression><![CDATA[$V{PAGE_NUMBER}]]></variableExpression>
    <initialValueExpression><![CDATA[$V{PAGE_NUMBER}]]></initialValueExpression>
</variable> 
```

现在，使用该变量作为条件来确定是否显示页码：

```
 <textField>
            <reportElement x="395" y="121" width="20" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? $V{PAGE_NUMBER} : ""]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement x="350" y="121" width="45" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? "PAGE" : ""]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement x="415" y="121" width="25" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? "OF" : ""]]></textFieldExpression>
        </textField>
        <textField>
            <reportElement x="440" y="121" width="19" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA[($V{NPAGES} > 1) ? $V{NPAGES} : ""]]></textFieldExpression>
        </textField> 
```

我在我的一份报告中尝试了这一点，它奏效了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T05:36:12.967

不，没有直接的方法可以实现这一点。在引擎正在填充第 1 页的那一刻，它不知道是否会有第 2 页。延迟的评估时间不足以解决这个问题。

最简单的类似解决方案是在第 1 页上隐藏“第 x 页，共 y 页”。这不符合您声明的要求......但有些人非常喜欢它。

最好的相对简单的解决方案是使用子报表。创建一个只执行当前报表查询的主报表。创建一个名为`$P{subreport_has_more_than_one_page}`（或者，呃，使用更简洁的名称）的布尔参数。希望您可以使用简单的逻辑，例如知道如果报告返回超过 25 行，您的报告将是多个页面。这不一定是可能的……但在现实世界的很大一部分案例中，这确实是可能的。如果您的页面依赖于不可预测的换行长文本，这可能会很困难。

假设您可以确定 的值`$P{subreport_has_more_than_one_page}`，则将此参数传递给子报表。子报表只是您现有的报表。有了这个值，在第一页的“Page x of y”中添加一个 Print When Expression 就很简单了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-25T08:50:02.327

我们可以按照以下步骤实现这一点。

第 1 步：创建变量，以便存储当前页码。

```
<variable name="V_CURRENT_PAGE_NUMBER" class="java.lang.Integer" resetType="Page">
    <variableExpression><![CDATA[1]]></variableExpression>
    <initialValueExpression><![CDATA[$V{PAGE_NUMBER}+1]]></initialValueExpression>
</variable> 
```

step2：添加文本字段，evaluationTime 应该是**Auto**。

价值将是

**$V{PAGE_NUMBER}>1?msg("第 {0} 页，共 {1} 页",$V{V_CURRENT_PAGE_NUMBER},$V{PAGE_NUMBER}):" "**

这样 PAGE_NUMBER 值如果大于 1 则打印页面*current_page* of *total_report_page*否则为**空**。

例如：第 1 页，共 3 页

```
<textField evaluationTime="Auto">
            <reportElement positionType="Float" x="475" y="37" width="74" height="15"/>
            <textElement/>
            <textFieldExpression><![CDATA[$V{PAGE_NUMBER}>1? 
```

msg("第 {0} 页，共 {1} 页", $V{V_CURRENT_PAGE_NUMBER}, $V{PAGE_NUMBER}):" "]]>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-02T04:30:52.887

使用变量 of`$V{MASTER_TOTAL_PAGES}`和`$V{MASTER_CURRENT_PAGE}`代替页码。我尝试制作文本字段来显示页码。然后在文本字段中添加这个表达式

```
$V{MASTER_TOTAL_PAGES} > 1 ? "(PAGE/OF) "+$V{MASTER_CURRENT_PAGE}+"/"+$V{MASTER_TOTAL_PAGES} : "" 
```

将 更改`evaluation time`为`master`。

这是我的文本字段的完整片段。

```
<textField textAdjust="StretchHeight" evaluationTime="Master">
    <reportElement x="315" y="108" width="179" height="20" uuid="0ea93412-058f-49a0-95ac-06728421e4f1"/>
    <textElement textAlignment="Right" verticalAlignment="Middle">
        <font fontName="ThaiFontFamily" size="10"/>
    </textElement>
    <textFieldExpression><![CDATA[$V{MASTER_TOTAL_PAGES} > 1 ? "(PAGE/OF) "+$V{MASTER_CURRENT_PAGE}+"/"+$V{MASTER_TOTAL_PAGES} : ""]]></textFieldExpression>
</textField> 
```

注意：我认为这仅在您有一份主报告且不使用子报告时才有效。

# php - 使用 PHPExcel 在 Excel 2007 中的标题和总样式

> ID：10928418
> 
> 赞同：1
> 
> 时间：2012-06-07T08:38:55.343
> 
> 标签：php, excel-2007, phpexcel

是否可以使用[PHPExcel在 Excel 2007 的单元格中应用](http://phpexcel.codeplex.com/downloads/get/212184)*标题样式（尤其是 excel 2007 中的标题 3）*和*总样式（如 excel 2007 中的）* ，如下面的[片段](https://i.stack.imgur.com/m1KD4.png)所示？

![在此处输入图像描述](../Images/8351f825dfa7eedfc1dc15737b380505.png)

我在生成它们后应用了这些样式（如*发货地址*、*账单地址*和*总计*单元格中所示）。在谷歌上尝试了很长时间，但找不到它，我大概认为 PHPExcel 可能不支持它们。有没有办法使用 PHPExcel 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:58:07.743

Excel 的“预定义样式”没有内置到 PHPExcel 中，尽管模拟起来并不难。

您可以定义样式数组来复制 Excel 的任何预定义样式，然后使用 applyFromArray() 方法将单元格设置为该样式。

```
$totalStyle = array(
    'borders' => array(
        'outline' => array(
            'style' => PHPExcel_Style_Border::BORDER_THIN,
            'color' => array('argb' => 'FF000000'),
        ),
    ),
);
$objPHPExcel->getActiveSheet()->getStyle('A4:C4')->applyFromArray($totalStyle); 
```

您需要做的就是计算出每个预定义 Excel 样式的各个组件，并相应地定义样式数组。

# ruby-on-rails - 错误页面，但 Rails 日志显示一切正常

> ID：10928419
> 
> 赞同：0
> 
> 时间：2012-06-07T08:38:56.270
> 
> 标签：ruby-on-rails, logging

我的一位客户在生产服务器上收到标准的“出现问题”错误页面，但是 production.log 声称该页面已正确呈现。

```
Started GET "/translations" for **IP** at 2012-06-07 08:30:56 +0000
Processing by TranslationsController#index as HTML
  Rendered translations/_filters.html.erb (1.9ms)
  Rendered glossary_terms/_form.html.erb (3.4ms)
  Rendered translations/index.html.erb within layouts/application (125.8ms)
Completed 200 OK in 131ms (Views: 119.4ms | ActiveRecord: 8.6ms) 
```

我已经确认这确实是她的请求被记录，并且她重新加载了页面。另外，我无法在本地重现错误；该页面对我和其他几个人来说加载得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:02:36.640

**这是**你必须去枚举你的环境和客户端之间所有不同的东西的错误之一。检查以下内容：

*   饼干
*   会话状态
*   浏览器版本（响应可能是 200，但可能格式不正确）
*   使用 Sam Spade 查看原始响应 - 可能是其中的线索
*   仔细检查是否记录了她的请求
*   她能无误地复制它吗？
*   她尝试过不同的浏览器吗？不同的机器？
*   也许“出了点问题”错误被作为 200 响应提供？

# jquery-plugins - jQuery Sparklines 2.0 不适用于 IE9

> ID：10928420
> 
> 赞同：0
> 
> 时间：2012-06-07T08:38:59.070
> 
> 标签：jquery-plugins, internet-explorer-9, sparklines

我正在使用 jQuery Sparklines (http://omnipotent.net/jquery.sparkline) 来绘制图表，它在 FF&Chrome 上运行良好，但是在 IE9 上测试时它不起作用，并且在 sparkline lib 中出现错误，错误是：

> SCRIPT5007：对象预期 jquery.sparkline.min.js，第 4 行字符 3378

IE9 对 jQuery 的支持有问题吗？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T12:16:33.847

我使用了 jquery.sparkline 2.1.2 - [http://omnipotent.net/jquery.sparkline/](http://omnipotent.net/jquery.sparkline/) 然后这得到了修复。

# javascript - Knockout.js ：使用 Repository-Pattern 绑定到点击事件上的函数

> ID：10928436
> 
> 赞同：3
> 
> 时间：2012-06-07T08:39:52.547
> 
> 标签：javascript, binding, knockout.js, repository-pattern

我在尝试在 Knockout.js 中实现 Repository-Pattern 时遇到了困难。我发现处理点击事件很困难，因为：

**问题**：

1.  单击时：未调用 pendDeleteItem。我找不到范围;(
2.  在 PendDeleteItem 我有这个问题。我需要访问 PendingItem 属性。

**工作小提琴**：http: [//jsfiddle.net/ThomasDeutsch/j7Qxh/8/](http://jsfiddle.net/ThomasDeutsch/j7Qxh/8/)

**目标**：

单击后，项目将发送到 PendingItem。

限制：如果可能，我想保留 ko.applyBindings(ViewModel)，因为我想添加更多存储库并在 html 中定义数据绑定，例如：customer.pendDeleteItem

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:51:25.467

你的问题的第一部分很简单。查看按钮的标记：

```
<button data-bind"click: $root.customer.pendDeleteItem "> sendTo -> PendingItems</button> 
```

您缺少属性名称`=`后面的。`data-bind`将其更改为：

```
<button data-bind="click: $root.customer.pendDeleteItem "> sendTo -> PendingItems</button> 
```

下一个问题是`this`在单击处理程序中是指“项目”，而不是视图模型。您将需要更改这些行：

```
this.PendingItems.push(item);
this.Items.remove(item); 
```

要引用您的视图模型：

```
ViewModel.customer.PendingItems.push(item);
ViewModel.customer.Items.remove(item); 
```

这是一个[更新的小提琴](http://jsfiddle.net/j7Qxh/9/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:31:14.783

对于第二个问题：此绑定将解决它：

```
data-bind="click: function() { $root.customer.pendDeleteItem($data)} 
```

这是相应的js，我可以用“this”引用它:)

```
pendDeleteItem = function(item) {
        console.log("pendDeleteItem called");
        item.Operation = 'DELETE';
        this.PendingItems.push(item);
        this.Items.remove(item);
    }; 
```

# maven-2 - 部署到 Glassfish 时未调用 @PostConstruct 方法

> ID：10928438
> 
> 赞同：2
> 
> 时间：2012-06-07T08:39:58.517
> 
> 标签：maven-2, ejb, glassfish-3, war, liquibase

我打算使用 LiquiBase 来管理数据库，我希望每次将 Web 应用程序部署到 Glassfish 3.1 时它都能运行。为了做到这一点，我编写了以下类：

```
@Singleton
@Startup
public class LiquibaseWrapper {

    @Resource(name = "jdbc/mydatabase")
    private DataSource dataSource;

    @PostConstruct
    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public void doLiquibaseUpdate() {
        ResourceAccessor fileOpener = new ClassLoaderResourceAccessor();
        DatabaseFactory databaseFactory = DatabaseFactory.getInstance();
        Database database = null;
        try {
            database = databaseFactory
                    .findCorrectDatabaseImplementation(new Jdbc Connection(
                            dataSource.getConnection()));
            Liquibase liquibase = new Liquibase("ChangeLog.xml",
                    fileOpener, database);
            liquibase.update("");
        } catch (DatabaseException e) {
            // TODO: handle error
        } catch (SQLException e) {
            // TODO: handle error
        } catch (LiquibaseException e) {
            // TODO: handle error
        }
    }
} 
```

问题是当我通过 Eclipse 将应用程序部署到服务器上时，doLiquiBaseUpdate() 没有执行。当我从中构建一个 WAR 文件并手动部署它时，就会执行该方法。

我有点困惑为什么 doLiquiBaseUpdate() 在通过 Eclipse 部署时不运行。

其他可能有用的信息： - 正在使用 Maven 2 构建 WAR - 使用 JSF 2.1 - 数据库是 MySQL - 使用 LiquiBase 2.0.3 - Eclipse Indigo 和 Glassfish 服务器工具 1.7.3

# serial-port - PIC18f4620 在 SDCC 中接收 usart

> ID：10928442
> 
> 赞同：0
> 
> 时间：2012-06-07T08:40:23.217
> 
> 标签：serial-port, pic18, sdcc, usart

我正在尝试实现PC（linux）与用于rs232的PIC18F4620的通信。传输（PIC -> 到 PC 很好）。但是，当我尝试将某些东西从 PC 传递到 PIC 时，PIR1bits.RCIF 标志永远不会设置，并且不会发生中断。

那是我的（PIC18f）代码（一个版本）：

```
/*
 * sdcc --use-non-free -mpic16 -p18f4620 test_lcd_serial.c
 * stty -F /dev/ttyUSB0 9600
*/

#include <pic18fregs.h>
#include <pic18f4620.h>
#include <delay.h>
#include <stdio.h>
#include <usart.h>
#include "lcd.c"

//__code char __at 0x300000   _conf0 = 0x00;
//~ __code char __at __CONFIG1H _conf1 = 0x06;// oscilador HS-PLL
__code char __at __CONFIG1H _conf1 = 0x02;// oscilador HS
__code char __at __CONFIG2L _conf2 = 0x1e;
__code char __at __CONFIG2H _conf3 = 0x1e;
__code char __at 0x300004   _conf4 = 0x00;
__code char __at __CONFIG3H _conf5 = 0x01;
__code char __at __CONFIG4L _conf6 = 0x81;
__code char __at 0x300007   _conf7 = 0x00;
__code char __at __CONFIG5L _conf8 = 0x0f;
__code char __at __CONFIG5H _conf9 = 0xc0;
__code char __at __CONFIG6L _confA = 0x0f;
__code char __at __CONFIG6H _confB = 0xe0;
__code char __at __CONFIG7L _confC = 0x0f;
__code char __at __CONFIG7H _confD = 0x40;

char buf[255];

void main(void)
{
    unsigned char count;
    unsigned char caracter;

    lcd_init( FOURBIT_MODE );
    lcd_home();lcd_puts("Start Test"); delay_s(1);
    lcd_home();lcd_puts("Start Test."); delay_s(1);
    lcd_home();lcd_puts("Start Test.."); delay_s(1);
    lcd_home();lcd_puts("Start Test..."); delay_s(1);

    INTCONbits.GIE  = 1;
    INTCONbits.PEIE = 1; 

    usart_open(
        USART_TX_INT_OFF & //0x7f
        USART_RX_INT_ON &  //0xff
        USART_BRGH_HIGH &  //0xff
        USART_EIGHT_BIT & // 0xfd
        USART_ASYNCH_MODE, //0xfe
        129 // 9600 at 20MHz
    );
    stdout = STREAM_USART;   

    count = 1;

    while(1){ //This works fine :)
        printf("To PC: %i\r", count);
        sprintf( buf, "Sent: %i", count );
        //even if I print (in LCD) the PIR1bits.RCIF is always 0
        // sprintf( buf, "Sent: %i,%i", count, PIR1bits.RCIF );
        lcd_home();lcd_puts( "                " );
        lcd_home();lcd_puts( buf );
        delay_ms(500);        
        count++;
    } 
}

void printrx(){
    unsigned char pnt = 0;
    while(PIR1bits.RCIF){
        buf[ pnt++ ] = RCREG;

        // clear CREN
        // RCSTAbits.CREN = 0;
        // RCSTAbits.CREN = 1;
    }
    if( pnt ){
        sprintf( buf, "GOT1 %s", buf );
        lcd_home();lcd_puts( "                " );
        lcd_home();lcd_puts( buf );
        delay_ms(1000);
    }
}

void receive_intr1() interrupt 1 { //this is never call
    if( PIR1bits.RCIF )  // serial received
        printrx();
}
void receive_intr2() interrupt 2 {
    if( PIR1bits.RCIF )  // serial received
        printrx();
} 
```

在 PC 中我做了：

```
>cat /dev/ttyUSB
To PC: 1
To PC: 2
To PC: 3
To PC: 4
To PC: 5
To PC: 6
To PC: 7
To PC: 8
To PC: 9
To PC: 10
... 
```

所以，PIC到PC是可以的。但是当我尝试时：

> 回声“某事”> /dev/ttyUSB0

或者

```
cat > /dev/ttyUSB0
something 
```

或者即使我编写代码将 /dev/ttyUSB0 作为文件打开并写入，使用 python 串行模块，也没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:15:09.043

我已经锁定了 SDCC usart 的实现，看起来还不错。但是我注意到最近发生了一些变化。（[SDCC usart 源](http://sdcc.svn.sourceforge.net/viewvc/sdcc/trunk/sdcc/device/lib/pic16/libio/usart/uopen.c?revision=7442&view=markup)）。所以也许 SDCC usart 有错误，我自己决定实现。所以我改变了usart代码：

```
 usart_open(
    USART_TX_INT_OFF & //0x7f
    USART_RX_INT_ON &  //0xff
    USART_BRGH_HIGH &  //0xff
    USART_EIGHT_BIT & // 0xfd
    USART_ASYNCH_MODE, //0xfe
    129 // 9600 at 20MHz
); 
```

通过我的特定代码（8位，带中断的RX，无奇偶校验）：

```
// Serial Interrupts
INTCONbits.GIE  = 1;
INTCONbits.PEIE = 1; 
PIE1bits.RCIE = 1;
IPR1bits.RCIP = 0;
PIE1bits.TXIE = 0;
IPR1bits.TXIP = 0;

TRISCbits.TRISC7 = 1; //RX (1:input)
TRISCbits.TRISC6 = 1; //TX (0:output)

//~ TXSTAbits.CSRC  = 0; //Don't  care
TXSTAbits.TX9   = 0;
TXSTAbits.TXEN  = 1;
TXSTAbits.SYNC  = 0;
TXSTAbits.SENDB = 0;
TXSTAbits.BRGH  = 1;
//~ TXSTAbits.TRMT  //Read Only
TXSTAbits.TX9D  = 0;

RCSTAbits.SPEN = 1;
RCSTAbits.RX9  = 0;
//~ RCSTAbits.SREN  = 0; //Don't care
RCSTAbits.CREN  = 1;
//~ RCSTAbits.ADDEN  = 0; //Don't care
//~ RCSTAbits.FERR //Read Only
//~ RCSTAbits.OERR //Read Only
//~ RCSTAbits.RX9D //Read Only

//~ BAUDCONbits.ABDOVF //Read
//~ BAUDCONbits.RCIDL  //Read Only
BAUDCONbits.RXDTP = 0; 
BAUDCONbits.TXCKP = 0; 
BAUDCONbits.BRG16 = 0;
//~ Not implemented
BAUDCONbits.WUE   = 0;
BAUDCONbits.ABDEN = 0;

SPBRG = 129;

stdout = STREAM_USART; 
```

一切都很好。stty 命令配置很多与设备通信相关的东西对某人很有用。例如将波特率设置为 9600 并禁用回显

```
stty -echo -F /dev/ttyUSB0 9600 
```

显示所有配置

```
stty -a -F /dev/ttyUSB0 
```

# android - traceview 文件中 VMDebug.startGC 的含义是什么

> ID：10928448
> 
> 赞同：8
> 
> 时间：2012-06-07T08:40:43.717
> 
> 标签：android

traceview 文件中 VMDebug.startGC 的含义是什么

[文档](http://www.java2s.com/Open-Source/Android/android-core/platform-libcore/dalvik/system/VMDebug.java.htm)说：

```
/*
 * Fake method, inserted into dmtrace output when the garbage collector
 * runs.  Not actually called.
 */

private static void startGC() {} 
```

但在我的跟踪视图中，我看到了这样的内容： ![跟踪视图](../Images/2834baf7f3c9f2645fec6d074fb24c1d.png)

将鼠标悬停在棕色方块上表示它们是 VMDebug.startGC() 方法，每个方法大约需要 17 个实际毫秒。绿色方块是 BitmapFactory.nativeDecodeAssetFunctions，它们每个都需要大约 26 个真正的毫秒。在这段代码中，我正在加载位图以作为 openGL 纹理导入。

startGC() 函数是什么？

我有一个基于函数名称的信念，并在调用它时观察到它与垃圾收集有某种关系，但文档与我相矛盾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T15:27:38.067

您已经复制并粘贴了`startClassPrep()`以下来源中方法的文档描述`startGC()`。

真实的描述是：

```
/*
 * Fake method, inserted into dmtrace output when the garbage collector
 * runs.  Not actually called.
 */
private static void startGC() {} 
```

看起来该方法仅在运行 traceview 时用于调试目的。

# entity-framework - DDD EF 存储库

> ID：10928449
> 
> 赞同：0
> 
> 时间：2012-06-07T08:40:44.227
> 
> 标签：entity-framework, repository, domain-driven-design, aggregateroot

通过遵循 DDD 和存储库模式，是否可以返回已经包含其子数据的聚合根对象，而不是使用延迟加载？

例如，我有一个仓库实体作为聚合根，它有一个名为 location 的子对象。

在存储库上，我有一个方法来查询位置 ID，但传回仓库实体。

```
dim warehouse as Warehouse = warehouseRepository.FindByLocationId(Id as int32).
dim locationName as string = warehouse.location.where(function(x) x.Id = 1).firstordefault.name 
```

当我使用warehouse.location 时，EF 使用代理类来触发另一个数据库查询以检索位置数据。在我的存储库方法 FindByLocationId 中，我可以查询位置数据库表并传回包含位置数据的仓库实体吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:45:31.283

通常，要停止延迟加载和代理，您可以在**DbContext**类的**Configuration**属性上设置以下属性。我倾向于在覆盖**OnModelCreating()**方法时这样做，所以我所有的“设置”东西都在一起。

 ****```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        Configuration.LazyLoadingEnabled = false;
        Configuration.ProxyCreationEnabled = false;

        base.OnModelCreating(modelBuilder);
    } 
```

如果你想急切地加载一个属性，你可以使用**Include()**方法：

```
var wareHouse = (from w in ctx.WareHouses.Include("location")
                select w).FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:41:53.187

我想您只想`include`在查询中使用该选项。[http://msdn.microsoft.com/en-us/library/bb896272.aspx](http://msdn.microsoft.com/en-us/library/bb896272.aspx)

所以你会有这样的事情：

```
var data = (from w in context.Warehouse
            .Include("Location")
            select w).FirstOrDefault(); 
```****

# linux - 如何在 Linux 中获得内存修改通知

> ID：10928451
> 
> 赞同：5
> 
> 时间：2012-06-07T08:40:49.587
> 
> 标签：linux, memory

在 Linux 的用户空间程序中，我通过从堆中分配获得一块内存，然后将指针分配给运行在其他线程中的许多其他组件以使用。我想在修改所述内存时收到通知。我当然可以为其他组件开发一个自定义用户空间解决方案，以便在他们尝试修改内存时使用。我的问题是这些是遗留组件，它们可以在很多情况下写入内存。所以我想知道是否有类似的API，如inotify（在文件更改时得到通知）或其他方法，以便在一块内存被更改时得到通知。

我考虑过使用 mmap 和 inotify，如果没有刷新更改，这显然是行不通的。任何建议表示赞赏:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T08:05:05.720

您可以添加一个**inotify**[**手表**](http://linux.die.net/man/7/inotify)，该手表将在 mmap-ed 文件上的[**msync()**](http://linux.die.net/man/2/msync)上触发。

这需要修补 Linux 内核以[**启用对新 inotify watch 的支持**](https://gist.github.com/TheCodeArtist/5874669)。该补丁添加了一个新标志**IN_SYNC** - 一个新的 inotify 事件，每当对 mmap-ed 文件执行 msync() 时就会触发该事件。

补丁已经在 Linux Kernel v2.6.37 上测试过了。

```
From 83edf446e92c86c738337ca4a35eab48e2f4e0eb Mon Sep 17 00:00:00 2001
From: Chinmay V S <cvs268@gmail.com>
Date: Mon, 17 Jun 2013 13:53:57 +0800
Subject: [PATCH] Add mmap-ed file support to inotify

This patch adds a new flag IN_SYNC. This is a new inotify event that is
triggered whenever msync() is carried out on a mmap-ed file.

Signed-off-by: Chinmay V S <cvs268@gmail.com>
---
 fs/sync.c                             |  5 +++++
 include/linux/fsnotify.h              | 16 ++++++++++++++++
 include/linux/fsnotify_backend.h      |  1 +
 include/linux/inotify.h               |  3 ++-
 mm/msync.c                            |  4 ++++
 5 files changed, 28 insertions(+), 3 deletions(-)

diff --git a/fs/sync.c b/fs/sync.c
index ba76b96..174c2af 100644
--- a/fs/sync.c
+++ b/fs/sync.c
@@ -16,6 +16,7 @@
 #include <linux/buffer_head.h>
 #include <linux/backing-dev.h>
 #include "internal.h"
+#include <linux/fsnotify.h>

 #define VALID_FLAGS (SYNC_FILE_RANGE_WAIT_BEFORE|SYNC_FILE_RANGE_WRITE| \
            SYNC_FILE_RANGE_WAIT_AFTER)
@@ -190,6 +191,10 @@ static int do_fsync(unsigned int fd, int datasync)
        ret = vfs_fsync(file, datasync);
        fput(file);
    }
+
+   if (!ret)
+       fsnotify_sync(file->f_path.dentry);
+
    return ret;
 }

diff --git a/include/linux/fsnotify.h b/include/linux/fsnotify.h
index b10bcde..ef211fb 100644
--- a/include/linux/fsnotify.h
+++ b/include/linux/fsnotify.h
@@ -224,6 +224,22 @@ static inline void fsnotify_modify(struct file *file)
 }

 /*
+ * fsnotify_sync - file was synced
+ */
+static inline void fsnotify_sync(struct dentry *dentry)
+{
+   struct inode *inode = dentry->d_inode;
+   u32 mask = FS_SYNC;
+
+   if (S_ISDIR(inode->i_mode))
+       mask |= FS_ISDIR;
+
+   fsnotify_parent(NULL, dentry, mask);
+   fsnotify(inode, mask, inode, FSNOTIFY_EVENT_INODE, NULL, 0);
+
+}
+
+/*
  * fsnotify_open - file was opened
  */
 static inline void fsnotify_open(struct file *file)
diff --git a/include/linux/fsnotify_backend.h b/include/linux/fsnotify_backend.h
index 7380763..35b5cb8 100644
--- a/include/linux/fsnotify_backend.h
+++ b/include/linux/fsnotify_backend.h
@@ -36,6 +36,7 @@
 #define FS_DELETE      0x00000200  /* Subfile was deleted */
 #define FS_DELETE_SELF     0x00000400  /* Self was deleted */
 #define FS_MOVE_SELF       0x00000800  /* Self was moved */
+#define FS_SYNC            0x00001000  /* File was synced */

 #define FS_UNMOUNT     0x00002000  /* inode on umount fs */
 #define FS_Q_OVERFLOW      0x00004000  /* Event queued overflowed */
diff --git a/include/linux/inotify.h b/include/linux/inotify.h
index d33041e..244a132 100644
--- a/include/linux/inotify.h
+++ b/include/linux/inotify.h
@@ -38,6 +38,7 @@ struct inotify_event {
 #define IN_DELETE      0x00000200  /* Subfile was deleted */
 #define IN_DELETE_SELF     0x00000400  /* Self was deleted */
 #define IN_MOVE_SELF       0x00000800  /* Self was moved */
+#define IN_SYNC            0x00001000  /* File was synced */

 /* the following are legal events.  they are sent as needed to any watch */
 #define IN_UNMOUNT     0x00002000  /* Backing fs was unmounted */
@@ -64,7 +65,7 @@ struct inotify_event {
 #define IN_ALL_EVENTS  (IN_ACCESS | IN_MODIFY | IN_ATTRIB | IN_CLOSE_WRITE | \
             IN_CLOSE_NOWRITE | IN_OPEN | IN_MOVED_FROM | \
             IN_MOVED_TO | IN_DELETE | IN_CREATE | IN_DELETE_SELF | \
-            IN_MOVE_SELF)
+            IN_MOVE_SELF | IN_SYNC)

 /* Flags for sys_inotify_init1\.  */
 #define IN_CLOEXEC O_CLOEXEC
diff --git a/mm/msync.c b/mm/msync.c
index 632df45..b1665ac 100644
--- a/mm/msync.c
+++ b/mm/msync.c
@@ -13,6 +13,7 @@
 #include <linux/file.h>
 #include <linux/syscalls.h>
 #include <linux/sched.h>
+#include <linux/fsnotify.h>

 /*
  * MS_SYNC syncs the entire file - including mappings.
@@ -83,6 +84,9 @@ SYSCALL_DEFINE3(msync, unsigned long, start, size_t, len, int, flags)
            get_file(file);
            up_read(&mm->mmap_sem);
            error = vfs_fsync(file, 0);
+               if (!error)
+                   fsnotify_sync(file->f_path.dentry);
+
            fput(file);
            if (error || start >= end)
                goto out;
-- 
1.8.2 
```

补丁已经在 Linux Kernel v2.6.37 上测试过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-25T15:14:27.587

您可以 mprotect RAM 中的相应页面（将其设置为只读）并在写入失败时捕获 SIGSEGV 信号。在信号处理程序中，您需要设置 RAM 读写以允许写入成功（这基本上是对用户空间中的页面错误作出反应）。然后，您需要重新保护 RAM 以检测下一次写入。

这是特定于体系结构（不可移植）的硬核 C 代码，但我过去做过（2001 年在 Intel Pentium 服务器上）。这是特定于 x86 的，所以我不确定如何使用 x86_64 执行此操作。如果需要的话，我可以在我的档案中做一些考古来引导你朝着正确的方向前进（发表评论，我会深入研究我的旧代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:37:32.740

唯一可能这样工作的是调试硬件观察点。

但是，如果你沿着那条路线走，你就做错了。

为了在线程之间共享内存，您需要实现适当的锁定和同步代码。因为您应该能够在内存解锁时添加更改通知。

# jquery - 添加一个将选项值从数据库到带有 jQ uery 的表单动态使用 PHP 我回显了一个 <select>，其中包含基于数据库值的表单选项，如下所示： /* SQL Stuff */ $sql = mysql_query("SELECT id, name FROM myTable "); 回声“<选择>”；while ($row = mysql_fetch_assoc($sql)) { echo " <option value="&quot; 。$row[" id']="" 。"'<="" h1="">ID：10928452 赞同：1 时间：2012-06-07T08:40:52.130 标签：jquery, forms, select, add, dynamically-generated 回答 #1 赞同：1 时间：2012-06-07T08:42:15.197 你没有在你的问题中给出 html 。所以它不可能达到正确的点。但我认为你需要类似以下的东西。这只是一个样本。 HTML <div id="some_target"> <select> <option>One</option> <option>Two</option> <option>Three</option> </select> </div> <input type="button" id="add_button" value="Add more"> jQuery $('#add_button').on('click', function() { var selectClone = $('select:first').clone(true); // make a copy of select $('#some_target').append(selectClone); // append to clone select });</option></select>

# c# - 默认情况下接受不受信任的证书以连接 Windows Phone 的 SSL

> ID：10928455
> 
> 赞同：1
> 
> 时间：2012-06-07T08:41:05.270
> 
> 标签：c#, windows-phone-7

在我的 Windows Phone 应用程序中，我需要默认接受不受信任的证书才能连接 SSL，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:05:08.487

Codeplex 上有一个项目允许您信任其他不受信任的根 CA。
它称为[Windows Phone Certificate Installer](http://wp7certinstaller.codeplex.com/)，您可以`TrustedRootCertificateInstaller.cs`在项目中重复使用该文件。

# iphone - 优势 iOS 企业帐户和标准帐户有什么区别？

> ID：10928456
> 
> 赞同：1
> 
> 时间：2012-06-07T08:41:08.387
> 
> 标签：iphone, ios

谁能告诉我标准iOS帐户和企业帐户有什么区别？企业账户相对于标准个人账户有哪些优势？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T08:51:39.727

首先，我想说。如果您打算将应用程序提交到 AppStore，请不要使用企业帐户。企业帐户仅**用于****`in-house`**分发。更多信息在这里[iOS 企业开发者计划](https://developer.apple.com/programs/ios/enterprise/)

 **标准帐户允许您以个人**（您自己）**或公司**（LLC、Co 等）**的身份注册，并提交到 AppStore。这可能是您想要/需要的帐户。

[iOS 开发者计划注册](https://developer.apple.com/support/ios/enrollment.html)

**更新**：同样`@Stefan`如前所述，这里是每个程序的比较表。[https://developer.apple.com/programs/start/ios/](https://developer.apple.com/programs/start/ios/)

希望这对您的问题有所帮助！**

# android - 我们可以用线程移动android中的任何对象吗

> ID：10928468
> 
> 赞同：1
> 
> 时间：2012-06-07T08:41:35.383
> 
> 标签：android, android-layout

就像我的代码一样，但这有线程折旧方法的错误

```
class x implements Threads{
public void run()
{
 someButton.layout(10,k,40,40);

 k+=10;
}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:50:32.167

为什么不试试 Android 的内置动画

如果您只想移动对象，请使用`TranslateAnimation`

别忘了放`object.setFillAfter(true);`

否则对象将再次回到原来的位置。

下面的代码片段将为您提供帮助。

```
package org.sample;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.TranslateAnimation;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.LinearLayout.LayoutParams;
import android.widget.TextView;

public class AnimationActivity extends Activity
{

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        LinearLayout ll = new LinearLayout(this);
        ll.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,
                LayoutParams.MATCH_PARENT));
        ll.setOrientation(LinearLayout.VERTICAL);

        final TextView tv = new TextView(this);
        tv.setText("Animation");

        final TranslateAnimation moveLefttoRight = new TranslateAnimation(0,
                200, 0, 0);
        moveLefttoRight.setDuration(1000);
        moveLefttoRight.setFillAfter(true);

        Button button = new Button(this);
        button.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,
                LayoutParams.WRAP_CONTENT));
        button.setText("PressMe");
        button.setOnClickListener(new OnClickListener()
        {

            public void onClick(View v)
            {
                tv.startAnimation(moveLefttoRight);
            }

        });

        ll.addView(tv);
        ll.addView(button);
        setContentView(ll);

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T12:54:55.720

是的，我们可以，但这个原因你必须使用用户界面线程

```
runOnUiThread(new Runnable() {
                        @Override
                        public void run() {
                            // do your stuff here
                        }
                 }); 
```

# javascript - nodejs将值从一个模块传递到另一个模块

> ID：10928471
> 
> 赞同：0
> 
> 时间：2012-06-07T08:41:46.200
> 
> 标签：javascript, node.js, mongodb

在我的自定义模块中，我有这个方法，它将查询数据库并查找用户名是否存在于我的数据库中。我想返回一些值，所以在上层我会知道查询结果。

```
var findUserbyUsername=function(username)
{
    db.users.find({email:username},function(err,result)
    { 

        if(err|!username) {console.log('username not found'); return 0;} 
        else return 1;
    }
    );
}
module.exports.findUser=findUserbyUsername; 
```

在 app.js 中我会像这样调用上面的方法

```
var lt=dbutil.findUser('xxxx@gmail.com'); 
```

但不幸的是我没有定义....任何人都可以帮我解决这个问题吗？或任何其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T08:51:48.220

您的`findUserbyUsername`函数不返回任何内容，这就是您得到`undefined`. 由于 Node 中的数据库操作是异步的，因此无法返回任何有意义的内容并通过回调进行工作。像这样更改您的代码：

```
var findUserbyUsername = function(username, callback) {
    db.users.find({ email: username }, function(err, result) { 
        if (err || !username) {
            console.log('username not found');
            callback(err? err: 'Username not found');
        } else {
            callback(null, whateverYouWantToReturn);
        }
    });
}
module.exports.findUser = findUserbyUsername; 
```

并像这样使用它：

```
dbutil.findUser('xxxx@gmail.com', function(err, result) {
    // you have the result from findUserbyUsername() in "result", and "err" is set if there was an error
}); 
```

（*注意：*我还修复了您的条件`if(err|!username)`，因为`|`它是按位运算符，而您实际上需要`||`逻辑运算符）

`err`（编辑：在回调中添加了事实上的标准参数）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:51:57.657

这是一个异步代码，当然它不会返回任何东西。您可能需要以下内容：

应用程序.js：

```
dbutil.findUser( 'xx@gmail.com', function( err, data ) {
    if ( err ) throw err;
    // Handle the datas returned "data"
} ); 
```

模块：

```
var findUserByUserName = function( username, callback ) {
    db.users.find( { email: username }, function( err, result ) {
       if ( err || !username ) {
           console.log( 'username not found' );

           // Call the function passed as parameter
           callback( err ); // You give "undefined" as second parameter
       }
       else {
           callback( err, result ); // You give the datas back
       }
    } );
} ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:55:43.967

问题是您的函数中有一个异步请求，因此 db.users.find 中的返回值在错误的范围内，并且永远不会返回您的请求。

您需要将回调函数作为第二个参数传递，因此代码如下所示：

```
var findUserbyUsername=function(username, cb)
{
    db.users.find({email:username}, cb);
}
module.exports.findUser=findUserbyUsername; 
```

然后你可以像这样调用函数：

```
dbutil.findUser('xxxx@gmail.com', function(err, username) {
    if (err) {
      // Handle err
    } else {
      // Handle username
    }
}) 
```

# php - 如何在 PHP 中将变量分配给 GET 值

> ID：10928473
> 
> 赞同：-3
> 
> 时间：2012-06-07T08:41:55.297
> 
> 标签：php, get, concatenation

`<a href="details.php?phoneid=1"><img src="phone01.jpg"></a>`

当我编写这样的代码时，它工作正常。但是当我编辑它以将 php 变量分配给 GET 值时，它不起作用。

`<a href="Details.php?phoneid=<?php $Pid_arr[count($Pid_arr)-1]?> " class="product" title="Product 1">`

有人可以解释为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:43:01.920

您需要回显变量：

```
<a href="Details.php?phoneid=<?php echo $Pid_arr[count($Pid_arr)-1]; ?>" > 
```

你也可以这样做：

```
<?=$Pid_arr[count($Pid_arr)-1]?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:43:43.400

你必须要么回应它，像这样：

```
<a href="Details.php?phoneid=<?php echo $Pid_arr[count($Pid_arr)-1]; ?> " class="product" title="Product 1"> 
```

或使用短标签：

```
<a href="Details.php?phoneid=<?=$Pid_arr[count($Pid_arr)-1]?> " class="product" title="Product 1"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:43:05.510

请务必`echo`：

```
<a href="Details.php?phoneid=<?php echo $Pid_arr[count($Pid_arr)-1] ?> class="product" title="Product 1"> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T08:44:15.593

尝试;

```
<a href="Details.php?phoneid=<?php echo $Pid_arr[count($Pid_arr)-1]; ?> " class="product" title="Product 1"> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T08:44:42.477

我会尝试用短标签写这个。我相信它提供了更好的可读性

```
<a href="Details.php?phoneid=<?=$Pid_arr[count($Pid_arr)-1]?>" class=....... 
```

# algorithm - 0-1 背包重访

> ID：10928477
> 
> 赞同：2
> 
> 时间：2012-06-07T08:42:14.837
> 
> 标签：algorithm, dynamic, knapsack-problem

好吧，这是一个古老的 0-1 背包问题，但在找到我能得到的最高总价后，我需要找到我可以携带的物品。但是对于以下测试用例（共3项）

```
10 (max weight that I can carry)
5 3 (weight and value for each item)
5 2
6 5 
```

这里的最高价格是 5。但对于重量，它可以是`6`或`10(5+5)`。两者都会给出相同的价格，但显然可行的是 6 公斤的物品而不是 10 公斤的物品。我想提示我如何从 dp 矩阵计算这个。我得到了这个测试用例的以下矩阵。

```
0 0 0 0 3 3 3 3 3 3 
0 0 0 0 3 3 3 3 3 5 
0 0 0 0 3 5 5 5 5 5 
```

使用这个算法，它发现重量为 10，但最佳重量为 6 公斤。

```
i=n, k=W(max weight)// n= total items

while i,k > 0

if dp[i,k] ≠ dp[i−1,k] then 
mark the ith item as in the knapsack
i = i−1, k = k-w(weight of ith item)

else
i = i−1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:59:27.983

简单的解决方案是在不同的袋子尺寸上迭代地运行背包算法，并选择最小的袋子，它仍然可以为您提供与原始袋子相同的价值。

这可以使用对重量的[二分搜索](http://en.wikipedia.org/wiki/Binary_search_algorithm)`[0,W]`来完成- 因此您将运行背包算法的总`O(logW)`次数，为您提供`O(nW*log(W))`找到最大值和可能的最小袋子大小的总解决方案。

**如何隐含二分搜索的想法：**
让原始包的大小为`W`，运行`knapsack(W,items)`，得到`value`. 现在检查是否`knapsack(W/2,items)`仍然返回`value`。如果是 - 在范围内搜索`(0,W/2]`。如果没有，请在 range 中搜索`(W/2,W]`，直到找到返回的最小袋子尺寸`value`。

# python - 带 gevent 的 redis-py

> ID：10928481
> 
> 赞同：27
> 
> 时间：2012-06-07T08:42:31.290
> 
> 标签：python, redis, gevent

redis-py 库可以与 gevent 一起使用吗？

有没有人有使用 gevent 运行 redis-py 库的经验？有工作的例子吗？

他们在一起玩得好吗？是否有任何预防措施或技巧可以让它们大规模工作？

换句话说，这个问题：

要使用 gevent greenlets 进行 redis-py 连接，除了monkeypatch 套接字之外，我还需要做什么特别的事情吗？

```
from gevent import monkey

monkey.patch_all() 
```

然后像往常一样使用redis-py？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T10:08:23.727

是的，redis-py 与 gevent 配合得很好。

您可以查看我对以下问题的回答：您会找到一个示例和一些备注。

[redis + gevent - 性能不佳 - 我做错了什么？](https://stackoverflow.com/questions/10656953/redis-gevent-poor-performance-what-am-i-doing-wrong/10663498#10663498)

主要的陷阱是考虑到因为 gevent 是异步的并且套接字是猴子补丁的，所以往返 Redis 的成本会神奇地消失。这是完全错误的。

当同时使用多个连接时，gevent 主要是有趣的，因此可以分解事件循环系统调用。如果用户代码在少量连接上生成大量到 Redis 的同步往返，则会涉及延迟，即使这些连接是由 gevent 以异步方式管理的。

因此，即使使用 gevent，也必须始终使用流水线来优化通信成本。

# c# - RadGrid 不会在回发时保留更改

> ID：10928482
> 
> 赞同：0
> 
> 时间：2012-06-07T08:42:33.847
> 
> 标签：c#, asp.net, telerik

我有一个`RadGrid`，我`Radiobuttonlist`在`EditItemTemplate`列中使用一个。我还有一个按钮会导致`postback`. 我检查 ItemCreate 事件中的单选按钮列表值，并根据该值执行一些操作。

我的问题是：当我更改单选按钮值并单击按钮时，我无法访问 itemcreate 事件中的单选按钮列表值，它始终是相同的默认值。这不仅仅是单选按钮列表，我意识到下拉列表等一些控件也有这个问题。

# html - 用内容制作一个盒子，在 HTML 而不是 CSS 中工作，我做错了什么？

> ID：10928494
> 
> 赞同：0
> 
> 时间：2012-06-07T08:43:23.713
> 
> 标签：html, css

我一直在努力解决这个问题好几个小时，所以我想我应该问你们。

所以我有一个网站，如果我有一个包含一些内容的框：图像，文本......

这是它在 index.html 中的样子：

```
 <div id="aust-agder">
    <!-- agent address in the first region -->
    <p style="  background: #111;
                background: rgba(0,0,0,.8);
                color: #eee;
                position:absolute;
                z-index:95;
                top:500px;
                left:1050px;
                font: normal 20px 'Lucida Grande',Arial,sans-serif;
                padding: 0.6em 1.2em;
                text-shadow: 0 1px 0 #000;
                -moz-border-radius: 1.6em;
                -ms-border-radius: 1.6em;
                -o-border-radius: 1.6em;
                -webkit-border-radius: 1.6em;
                border-radius: .6em; ">
  Lillesand - Kjøreskole<br>
  Vi vil gratulere A4 Trafikkskole med Digital Skiltløsning<br>
  A4 Trafikkskole<br>
  A: <a href=http://g.co/maps/xybpd>Elvegata 2A, 4608 Kristiansand S</a><br>
  T: 38 02 56 00<br>
  E: <a href=mailto:post@a-4.no>post@a-4.no</a><br>
  Besøk hjemmesiden til <a href=http://www.a-4.no/>A4 Trafikkskole</a><br>

  <img src=images/test.jpg>
    </p>
  </div> 
```

当我在 html 中有这个时，网站看起来像这样：http: [//iseeit.no/maptest/working/](http://iseeit.no/maptest/working/)

如果我将其从 html 中删除并将其放入 css 文件中，如果我是正确的，则如下所示：

```
.aust-agder{
    background: #111;
    background: rgba(0,0,0,.8);
    color: #eee;
    position:absolute;
    z-index:95;
    top:500px;
    left:1050px;
    font: normal 20px 'Lucida Grande',Arial,sans-serif;
    padding: 0.6em 1.2em;
    text-shadow: 0 1px 0 #000;
    -moz-border-radius: 1.6em;
    -ms-border-radius: 1.6em;
    -o-border-radius: 1.6em;
    -webkit-border-radius: 1.6em;
    border-radius: .6em; 
} 
```

在 index.html 中：

```
 <div id="aust-agder">
    <!-- agent address in the first region -->
  Lillesand - Kjøreskole<br>
  Vi vil gratulere A4 Trafikkskole med Digital Skiltløsning<br>
  A4 Trafikkskole<br>
  A: <a href=http://g.co/maps/xybpd>Elvegata 2A, 4608 Kristiansand S</a><br>
  T: 38 02 56 00<br>
  E: <a href=mailto:post@a-4.no>post@a-4.no</a><br>
  Besøk hjemmesiden til <a href=http://www.a-4.no/>A4 Trafikkskole</a><br>

  <img src=images/test.jpg>
    </p>
  </div> 
```

该网站然后看起来像这样：http: [//iseeit.no/maptest/not/](http://iseeit.no/maptest/not/)

我不是css专家，所以我可能做错了。

希望我把问题说清楚了，如果不是毫不犹豫地问，也很抱歉我的英语不好:)

另外，我似乎无法使用 text-decoration: none; 删除链接颜色。有什么解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:56:45.567

我希望您尝试将 css 应用于 DIV，因为您`</p>`在 index.html 中缺少起始标记。在这种情况下，请在您的 CSS 名称前加上“#”而不是“.”。. 它应该像

```
    #aust-agder
    {
        背景：#111；
        背景：rgba(0,0,0,.8);
        颜色：#eee；
        位置：绝对；
        z指数：95；
        顶部：500px；
        左：1050px；
        字体：正常 20px 'Lucida Grande',Arial,sans-serif;
        填充：0.6em 1.2em；
        文字阴影：0 1px 0 #000;
        -moz-边界半径：1.6em；
        -ms-边界半径：1.6em；
        -o-边界半径：1.6em；
        -webkit-border-radius：1.6em；
        边界半径：0.6em；
    }

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T08:47:01.570

尝试使用`#`，不在`.`你的 CSS 中：

```
#aust-agder{
   background: #111;
   ..... 
```

`.`用于样式类。对于具有特定样式的元素`id`，请参阅此链接： [http ://www.w3.org/TR/CSS2/selector.html#id-selectors](http://www.w3.org/TR/CSS2/selector.html#id-selectors)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T08:48:35.547

在您的 CSS 中，您拥有`.aust-agder`aust-agder**类**的样式。您使用`aust-agder`as **id**，因此您需要`#aust-agder`在 CSS 中使用。

有关id 和 classes 的 CSS 的更多信息，请参阅[w3schools](http://www.w3schools.com/css/css_id_class.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T08:47:30.477

您的 CSS 中的 aust-agder 是一个类，而在您的 HTML 中，它是一个 ID。采用

`#aust-agder`代替`.aust-agder`或`class="aust-agder"`代替`id="aust-agder"`

# c# - 如何编写一个只允许字母、数字和特殊字符的正则表达式，只有中间永远不会结束

> ID：10928505
> 
> 赞同：0
> 
> 时间：2012-06-07T08:44:12.317
> 
> 标签：c#, regex, url

需要一些正则表达式的帮助。

到目前为止，我的代码允许有限数量的特殊字符。但是，我不知道如何让它只允许它们在中间而不是结束。

有人可以帮我弄清楚那部分吗？

这是我在 c# 中使用的代码：

```
 Regex uRLToVal= new Regex("^[A-Za-z0-9-_.+!*]*$");

            if (!uRLToVal.IsMatch(this.mainURL))
            {
                results.AddPropertyError("Your Entry can only contain letters, numbers, underscores, periods, plus, exclamation marks and hypens. Special characters should always be inside numbers or letters.  Example: v!v is OK BUT NOT !vv or vv!");
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:52:32.463

```
new Regex(@"^[A-Za-z0-9]+([-_.+!*]+[A-Za-z0-9]+)*$"); 
```

意思是 ：

match 必须以至少一个数字或字母字符开头：`[A-Z-z0-9]+`

该序列后面**可能**跟零个或多个特殊字符`-_.+!*`，后面跟至少一个数字或字母字符。第二个组合可以发生零次或多次（例如 :`asdf-e*r!asdf`或`a`有效）

# html - 失踪 ; before 语句 [Break On This Error]

> ID：10928511
> 
> 赞同：0
> 
> 时间：2012-06-07T08:44:28.813
> 
> 标签：html, jsp, layout, jspx

为什么我的 jspx 布局之一出现此错误

![在 firebug 控制台中看到的错误的屏幕截图](../Images/110432bdd06d996a12a9d48095cf326e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:44:29.127

所以在挖掘了一下之后我找到了原因这是我的测试模板来重现它

```
 <html 
    xmlns:jsp="http://java.sun.com/JSP/Page" 
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:tiles="http://tiles.apache.org/tags-tiles" 
    xmlns:spring="http://www.springframework.org/tags" 
    xmlns:util="urn:jsptagdir:/WEB-INF/tags/util"
    xmlns:fb="http://www.facebook.com/2008/fbml" >  

    <jsp:output doctype-root-element="HTML" doctype-system="about:legacy-compat" />

    <jsp:directive.page contentType="text/html;charset=UTF-8" />  
    <jsp:directive.page pageEncoding="UTF-8" /> 

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=8" />    

        <spring:url context="" value="resources/js/test.js" var="testX_js" />
        <script src="${test_js}" type="text/javascript" charset="utf-8" ><!-- //required for FF3 and Opera --></script>

        <spring:message code="application_name" var="app_name" htmlEscape="false"/>
        <title><spring:message code="welcome_h3" arguments="${app_name}" /></title>
    </head>

    <body>
        <span>TEST</span>
    </body>
</html> 
```

现在看看js文件何时包含“testX_js”

```
<spring:url context="" value="resources/js/slideshow.js" var="testX_js" />
<script src="${test_js}" type="text/javascript" charset="utf-8" ><!-- //required for FF3 and Opera --></script> 
```

名称 testX_js 与 test_js 不匹配，这是导致错误的原因。在包含新脚本时，我不得不打错字所以人们确保带有脚本 url 的变量不为空

干杯

# apache - 找不到 httpd.conf

> ID：10928516
> 
> 赞同：2
> 
> 时间：2012-06-07T08:44:45.517
> 
> 标签：apache, tomcat, webserver

我正在运行 tomcat，我想更改默认值`webroot`，使其指向另一个位置。有没有办法找出正在运行的 tomcat 或默认 webroot 的设置位置，因为我找不到我认为通常设置的 httpd.conf？

干杯，

阿列克谢蓝。

**更新：**

很久没看这个问题了，忘记了。最后结果证明我们使用 Apache HTTPD 来接受来自端口 80 的请求。从那里我们在文件中设置了`webroot`and`ProxyPass`规则`/etc/httpd/conf/virtual-hosts/default.conf`（这些也可以在 中设置`/etc/httpd/conf/httpd.conf`）。从那里我们运行了几个 tomcat 实例，它们都托管在不同的端口上，这些端口设置在`apache-tomcat-x/conf/server.xml`.

当我写这个问题时，我试图设置一个新的 tomcat 实例来运行开发中的应用程序，并被告知我需要更改`webroot`以访问我的应用程序，这是不正确的。相反，我需要包含一个`ProxyPass`规则，以便当我的应用程序名称在 URL 中被识别时，HTTPD 会将请求发送到正确的 tomcat 实例以进行处理。例如

```
www.domain.com/myApplication

In /etc/httpd/conf/virtual-hosts/default.conf

ProxyPass /myApplication/ ajp://127.0.0.1:<ajp_port>/myApplication/
ProxyPassReverse /myApplication/ ajp://127.0.0.1:<ajp_port>/myApplication/ 
```

ajp_port 设置在`apache-tomcat-x/conf/server.xml`. 我需要确保没有端口与其他 tomcat 实例发生冲突，因此请记住检查所有端口，即关闭、HTTP、带有 SSL 的 HTTP、AJP 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:11:21.337

正如@Woody 所说，Tomcat 不使用 httpd.conf 文件：那是 Apache httpd 的东西（httpd 是 Web 服务器，Tomcat 是 Java 应用程序服务器）。

你没有提到你正在使用什么操作系统或你正在使用什么包管理软件（例如 yum、apt 等），所以我会给你一般信息，就好像你直接从 apache.org 下载并安装了 Tomcat（其中我通常出于多种原因建议人们这样做）。

Tomcat 将其服务器范围的配置保存在`conf/server.xml`Tomcat 基本安装目录的文件中（为方便起见，通常称为 $CATALINA_BASE）：在这里，您可以配置要使用的连接器类型（例如 HTTP、HTTPS、AJP 等）以及使用哪些连接器。他们应该监听的端口、集群配置、会话持久性、全局 JNDI 和领域资源。还有一些文件为部署在该 Tomcat 实例上的所有 webapps 定义默认值`conf/web.xml`，`conf/context.xml`但最好不要管这些文件，除非您有充分的理由修改它们。

当你想要部署一个 webapp（在默认配置下）时，你需要做的就是将一个 .WAR 文件放到`$CATALINA_BASE/webapps/`目录中，webapp 将被部署到一个与名称匹配的“上下文路径”（又名 URL 前缀）中该文件减去“.WAR”后缀。因此，如果您有一个名为 mygreatwebapp.war 的 WAR 文件，那么它将被部署以便您的客户可以在`http://yourhost/mygreatwebapp/`. 您可以为 WAR 文件指定一个特殊名称，使其具有空的上下文路径：如果您命名 WAR 文件`ROOT.war`（大小写很重要），那么您的 webapp 可以在`http://yourhost/`. （如果您更愿意使用爆炸的 WAR 目录而不是 WAR 文件，则上述所有内容仍然适用，只是目录根本没有 .war 扩展名）。

鉴于您最初的问题，听起来您要做的就是将 ROOT.war 文件放入`$CATALINA_BASE/webapps`（或替换已经存在的文件）：这会将您想要的任何 webapp 部署到您可能称之为“默认值”的 URL 空间中网根”。

***更新*** 如果要更改主机的所有 web 应用程序所在的目录，可以修改`$CATALINA_BASE/conf/server.xml`并更改`<Host>`'s`appBase`属性以指向，例如`/cfusion/main/www/`. 这会将所有 WAR 文件和目录部署`/cfusion/main/www/`为单独的 webapp。

如果您只想从任意位置提供单个 web 应用程序，您可以在`$CATALINA_BASE/conf/[EngineName]/[HostName]/[appname].xml`. 这是一个标准文件`META-INF/context.xml`，它包含一个`<Context>`元素，除了你必须指定一个`docBase`指向你的 webapp 的元素（例如`/cfusion/main/www/mywebapp`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:48:17.040

Tomcat 不使用 httpd.conf，它是一个 apache 文件。各个 webapp 的位置保存在它们各自的 web.xml 文件中，但所有配置的位置都在 ../tomcat6/conf/server.xml 和 web.xml

是您要移动的文件来自哪里，还是从哪里编译和执行它们？

# java - 在后台执行 Java

> ID：10928518
> 
> 赞同：0
> 
> 时间：2012-06-07T08:44:59.340
> 
> 标签：java, background, daemon

我开发了一个执行 sql 作业的应用程序。当我单击执行按钮时，我的应用程序进入运行状态并暂停，直到执行查询。

我希望我的应用程序不应该停止并且用户应该能够输入其他查询并且这些查询执行应该在后台运行。

我的问题是如何在后台运行查询的执行？意味着当单击执行按钮时，剩余的执行应该在屏幕后面运行。

我的应用程序是使用struts1.3框架开发的。我在Action Class的execute()中编写了主要功能

execute() 的代码片段

```
DAO dao1=new DAO();
                    System.out.println("Here...1");
                    con1=dao1.DBConnection(jndiname);
                    Statement st = con1.createStatement();
                    //status_id=1;
                    ResultSet rs = st.executeQuery(query); 
                    System.out.println("Here...2");
                    String id = Long.toString(System.currentTimeMillis());
                    //int req_id = System.currentTimeMillis();
                    String dirTree= rsBundle.getString("CSV_DIR");
                    File f=new File(dirTree);
                    String[] directories = dirTree.split("/");
                    String[] lists=f.list();

                    for (String dir : directories )
                    {
                        if (!dir.isEmpty() )
                        {
                            if (f.exists())
                            {

                                System.out.println("directory exist");
                            }
                            if (!f.exists())
                            {
                                boolean success = (new File(dirTree).mkdirs());
                                if(success)
                                {
                                System.out.println("directory created");
                                }

                            }

                            }

                            }
                    for(String s:lists)
                    {
                        System.out.println("files.." + s);
                    }
                    String csv_file_path=dirTree+"/";
                    String csv_file_name=id +".csv";
                    //writing to csv file
                    CSVWriter writer = new CSVWriter(new FileWriter(csv_file_path + csv_file_name), ',',CSVWriter.NO_QUOTE_CHARACTER);

                    writer.writeAll(rs, true);
                    writer.close();
                    //status_id=7;
                    String zip_file_path=rsBundle.getString("zip_file_path");
                    String zip_filename=id + ".zip";

                    String zip_file_pwd=rsBundle.getString("zip_file_pwd");
                    //zip file creation
                    ZipUtil.zipDirWithPassword(dirTree,  zip_file_path + zip_filename,zip_file_pwd);
                    String ftp_file_path=rsBundle.getString("ftp_file_path");
                    long zip_file_size= new File(zip_file_path + zip_filename).length();
                    System.out.println("File size..inside" + zip_file_size);
                    System.out.println("Here...3");
                    String exec_id=(String)request.getSession().getAttribute("userLoginId");
                    //int executor_id= Integer.parseInt(exec_id);
                       DateFormat dateFormat = new SimpleDateFormat("mm/dd/yyyy");
                       //get current date time with Date()
                       Date date = new Date();
                       System.out.println(dateFormat.format(date));

                    String query4 = "select executor_id,email_id from m_executor where windows_id = '" +  exec_id + "'";
                    System.out.println("Query... " + query4);
                    //int i=0;
                    iPreparedStatement4=con.prepareStatement(query4);

                    iResultSet3=iPreparedStatement4.executeQuery();
                    while(iResultSet3.next())
                    {
                        //restriction=iResultSet2.getString(1);
                        exec_email=iResultSet3.getString(2);
                        executor_id=iResultSet3.getInt(1);
                    }

                                    ValueListForExec db= new ValueListForExec();
                    String status_name="";
                    status_name=db.getStatusName(status_id);

                    if(zip_file_size <= 5242880){
                        System.out.println("send via email");
                    /*}
                    else
                    {*/
                        System.out.println("send via FTP");
                        upload.upload(host, usrname, pwd,zip_file_path + zip_filename, ftp_file_path,zip_filename);
                    }

                    String insertquery="{ call sp_process_job (?,?,?,?) }";

                    cs = con.prepareCall(insertquery.toString());
                    cs.setString(1,id);
                    cs.setString(2,host);
                    cs.setString(3,usrname);
                    cs.setString(4,pwd);

                    cs.execute();

                    con.commit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:49:12.317

您可以使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)或 Java 线程来完成这项工作。您可以在 Runnable/Callable 对象中编写 sql 作业，并且一旦用户单击按钮作业应该被提供给将在后台执行的其他线程。即使您可以使用线程池将作业转移到池线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T08:51:37.593

您即将进入线程世界。

要在后台运行任务，您需要在单独的线程上启动该任务。如果您在 Swing 应用程序中运行，则需要确保您没有在事件调度程序线程上运行任务。

看看 SwingUtilities invokeLater。

# javascript - 从我的 json 响应中访问一组特定的值？

> ID：10928521
> 
> 赞同：0
> 
> 时间：2012-06-07T08:45:18.013
> 
> 标签：javascript, jquery, json

我正在尝试使用 for..in 循环来访问“事件”中的描述键/值，但目前我不完全确定如何实现这一点。首先，我使用了 for..in 并将其注销，这将返回响应中的所有顶级条目，我现在如何向下钻取并选择 Event.description？我首先认为它是 data[prop].Event.description 但事实并非如此。我应该使用普通的 for 循环，然后在其中使用 for..in 吗？

这是我当前的代码：

```
$(document).ready(function() {

    var data = {
        "status": "ok",
        "code": "200",
        "message": "event details",
        "data": [{
            "Event": {
                "id": "1",
                "name": "Sample Event Number 1",
                "description": "Sample Event Number 4 Description ....",
                "event_date": "2012-05-31 00:00:00",
                "Band": [{
                    "id": "1",
                    "name": "Support #1",
                    "BandsEvent": {
                        "id": "7",
                        "band_id": "2",
                        "event_id": "8",
                        "created": "2012-05-23 15:53:56",
                        "modified": "2012-05-23 15:53:56"
                    }},
                {
                    "id": "2",
                    "name": "Support #2",
                    "BandsEvent": {
                        "id": "8",
                        "band_id": "1",
                        "event_id": "8",
                        "created": "2012-05-23 15:53:57",
                        "modified": "2012-05-23 15:53:57"
                    }}]
            }},
        {
            "Event": {
                "id": "2",
                "name": "Sample Event Number 2",
                "description": "Sample Event Number 4 Description ....",
                "event_date": "2012-05-31 00:00:00",
                "Band": [{
                    "id": "2",
                    "name": "Another Crazy Band",
                    "BandsEvent": {
                        "id": "3",
                        "band_id": "2",
                        "event_id": "8",
                        "created": "2012-05-23 15:53:56",
                        "modified": "2012-05-23 15:53:56"
                    }},
                {
                    "id": "4",
                    "name": "The Band",
                    "BandsEvent": {
                        "id": "8",
                        "band_id": "1",
                        "event_id": "8",
                        "created": "2012-05-23 15:53:57",
                        "modified": "2012-05-23 15:53:57"
                    }}]

            }}]
    }

    var prop;

    for (prop in data) {
        console.log( data[prop] );
        // data.Event.description 
    }

});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:50:48.387

这应该做你想要的：

```
for (var i = 0; i < data.data.length; i++) {
    console.log(data.data[i].Event.description);        
} 
```

我应该补充一点，您的代码不起作用的原因是“ `prop`”变量首先是“ `status`”，然后是“”，然后是“ `code`”，然后是`message`“ `data`”。Status/code/message 没有“Event”属性，因此如果您尝试访问，您的代码将返回 undefined `data[prop].Event`。这里我们特意挑出来。而且由于 data.data 是一个数组，所以没有理由使用`for .. in`循环，而只是一个常规的 for 循环。

同样，如果您想打印出描述和波段，您可以执行以下操作：

```
for (var i = 0; i < data.data.length; i++) {
    console.log(data.data[i].Event.description + " has the following bands:"); 
    for (var j = 0; j < data.data[i].Event.Band.length; j++) {  
        console.log(data.data[i].Event.Band[j].name); 
    }       
} 
```

# asp.net - 回发后的属性 null - 动态加载的控件

> ID：10928524
> 
> 赞同：6
> 
> 时间：2012-06-07T08:45:35.940
> 
> 标签：asp.net, ascx

我知道这个问题之前已经被问过很多次，但我怀疑我有一个独特的场景。

我正在加载一个子控件 (ASCX) 并在该控件上设置一个属性。这工作得很好，直到属性为空的回发。

特此加载 ChildControl 的第一类：

```
protected override void CreateChildControls()
{
    MyUserControl control = (MyUserControl)Page.LoadControl(_ascxPath);
    control.MyProperty = base.MyProperty
    Controls.Add(control);
} 
```

然后，在我的子控件上，我得到了以下代码：

```
public partial class MyUserControl : UserControl
{
    public MyType MyProperty { get; set; }
    protected void Page_Load(object sender, EventArgs e)
    {
        //Exception on next line because Property is null (only on postback)
        var somevalue = MyProperty.SubProperty; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T09:25:43.030

行。让我试着解释一下。
1\. 创建页面后，您将获得完整的页面[生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)
2\. 您单击某个控件以创建用户控件，然后获得它
3\. 现在您正在向该控件输入值，并获得回发
4\. 在服务器端回发被处理，但正如您所见，视图状态操作会在页面加载后立即出现。
viewstate 的主要目的之一是处理控制事件，查看它们是否被更改，或者保存它们的状态或其他东西。
5\. 如果此时加载视图状态时您的控件仍未构造，则它的所有事件和值都将被忽略。

解决方案要么使其成为静态控件并隐藏它，要么在视图状态操作开始之前创建它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T09:57:09.420

您需要在 Page_Init 事件中添加控件并设置属性，否则您将丢失属性值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-16T09:18:03.050

在微软关于 ASP.NET 页面[生命周期](https://msdn.microsoft.com/library/ms178472(v=vs.100).aspx)的解释中，写到动态创建的控件必须在**PreInit**中创建。

它对我有用。这是我的主页：

```
protected global::System.Web.UI.HtmlControls.HtmlGenericControl FiltersZone; 
```

（……）

```
 protected override void OnPreInit(EventArgs e)
    {
        base.OnPreInit(e);
        FiltersZone.Controls.Add(new PlanningFiltersSurgeonWeb());
    } 
```

这个动态创建的“.ascx”控件包含一个隐藏字段：

```
<input id="hidTxtPaint" type="hidden" name="hidTxtPaint" runat="server" /> 
```

在从 JavaScript 启动的“ ”或“ ”之后，我现在能够从动态创建的 ASCX 控件`Page_Load`事件中检索其值。`submit``__dopostback('hidTxtPaint')`

另一方面，如果在主页面的`Page_Load`事件中添加其父“.ascx”控件，则隐藏字段的值在 POST 后始终为空。

# facebook-graph-api - facebook api发布用户操作与permission.request

> ID：10928526
> 
> 赞同：0
> 
> 时间：2012-06-07T08:45:39.603
> 
> 标签：facebook-graph-api, facebook-c#-sdk

我想发布到 Facebook 用户墙活动，例如用户观看的照片。所以 url 应该是这样的

> [https://www.facebook.com/connect/uiserver.php?app_id=](https://www.facebook.com/connect/uiserver.php?app_id=) {APP_ID}&method=permissions.request&redirect_uri={URL}&response_type=code&display=async&auth_referral=1

我正在使用 fb c# sdk

```
 var fbApp = GetClient();
 return fbApp.Post("/me/"+AppName+":add", new {website = "http://thebestofpets.com/pet/1161"}); 
```

但它只会发布指向我的对象的链接，那么如何创建包含权限请求的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T13:26:18.973

> 但它只会发布指向我的对象的链接，那么如何创建包含权限请求的链接？

您想向谁申请什么权限？

你的意思是你希望当另一个用户点击你的应用程序的链接时，Facebook 会自动向他请求权限？然后看看经过[身份验证的推荐](https://developers.facebook.com/docs/opengraph/authentication/#referrals)。

# c# - 从 HTTP 请求接收 JSON 数据

> ID：10928528
> 
> 赞同：132
> 
> 时间：2012-06-07T08:45:52.137
> 
> 标签：c#, httpwebrequest

我有一个正常工作的 Web 请求，但它只是返回状态 OK，但我需要我要求它返回的对象。我不确定如何获取我请求的 json 值。我是使用对象 HttpClient 的新手，是否有我遗漏的属性？我真的需要返回的对象。谢谢你的帮助

拨打电话 - 运行良好会返回 OK 状态。

```
HttpClient client = new HttpClient();
client.DefaultRequestHeaders.Accept
  .Add(new MediaTypeWithQualityHeaderValue("application/json"));
var responseMsg = client.GetAsync(string.Format("http://localhost:5057/api/Photo")).Result; 
```

api获取方法

```
//Cut out alot of code but you get the idea
public string Get()
{
    return JsonConvert.SerializeObject(returnedPhoto);
} 
```

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-06-07T09:06:04.213

如果您指的是 .NET 4.5 中的 System.Net.HttpClient，则可以使用[HttpResponseMessage.Content](http://msdn.microsoft.com/en-us/library/system.net.http.httpresponsemessage.content%28v=vs.110%29.aspx)属性作为[HttpContent](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent%28v=vs.110%29.aspx)派生对象获取 GetAsync 返回的内容。[然后，您可以使用HttpContent.ReadAsStringAsync](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.readasstringasync%28v=vs.110%29.aspx)方法将内容读取到字符串中，或​​者使用[ReadAsStreamAsync](http://msdn.microsoft.com/en-us/library/system.net.http.httpcontent.readasstreamasync%28v=vs.110%29.aspx)方法将内容读取为流。

[HttpClient](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient%28v=vs.110%29)类文档包括以下示例：

```
 HttpClient client = new HttpClient();
  HttpResponseMessage response = await client.GetAsync("http://www.contoso.com/");
  response.EnsureSuccessStatusCode();
  string responseBody = await response.Content.ReadAsStringAsync(); 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2018-07-02T10:27:02.680

基于**@Panagiotis Kanavos**的回答，这里有一个工作方法作为示例，它还将响应作为对象而不是字符串返回：

```
using System.Text;
using System.Net.Http;
using System.Threading.Tasks;
using Newtonsoft.Json; // Nuget Package

public static async Task<object> PostCallAPI(string url, object jsonObject)
{
    try
    {
        using (HttpClient client = new HttpClient())
        {
            var content = new StringContent(jsonObject.ToString(), Encoding.UTF8, "application/json");
            var response = await client.PostAsync(url, content);
            if (response != null)
            {
                var jsonString = await response.Content.ReadAsStringAsync();
                return JsonConvert.DeserializeObject<object>(jsonString);
            }
        }
    }
    catch (Exception ex)
    {
        myCustomLogger.LogException(ex);
    }
    return null;
} 
```

请记住，这只是一个示例，您可能希望将其`HttpClient`用作共享实例，而不是在 using 子句中使用它。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2020-06-14T01:37:06.030

从 Microsoft 安装此 nuget 包`System.Net.Http.Json`。它包含扩展方法。

然后加`using System.Net.Http.Json`

现在，您将能够看到这些方法：

[![在此处输入图像描述](../Images/3efa14217bd0bac06467c40e6b7510e1.png)](https://i.stack.imgur.com/8a69N.png)

所以你现在可以这样做：

`await httpClient.GetFromJsonAsync<IList<WeatherForecast>>("weatherforecast");`

来源：[https ://www.stevejgordon.co.uk/sending-and-receiving-json-using-httpclient-with-system-net-http-json](https://www.stevejgordon.co.uk/sending-and-receiving-json-using-httpclient-with-system-net-http-json)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-08-20T17:07:12.853

我认为最短的方法是：

```
var client = new HttpClient();
string reqUrl = $"http://myhost.mydomain.com/api/products/{ProdId}";
var prodResp = await client.GetAsync(reqUrl);
if (!prodResp.IsSuccessStatusCode){
    FailRequirement();
}
var prods = await prodResp.Content.ReadAsAsync<Products>(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-02-19T10:10:20.437

我通常做的，类似于回答一个：

```
var response = await httpClient.GetAsync(completeURL); // http://192.168.0.1:915/api/Controller/Object

if (response.IsSuccessStatusCode == true)
    {
        string res = await response.Content.ReadAsStringAsync();
        var content = Json.Deserialize<Model>(res);

// do whatever you need with the JSON which is in 'content'
// ex: int id = content.Id;

        Navigate();
        return true;
    }
    else
    {
        await JSRuntime.Current.InvokeAsync<string>("alert", "Warning, the credentials you have entered are incorrect.");
        return false;
    } 
```

其中“模型”是您的 C# 模型类。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-11-21T08:23:56.407

通过以下方式对我来说工作正常 -

```
public async Task<object> TestMethod(TestModel model)
    {
        try
        {
            var apicallObject = new
            {
                Id= model.Id,
                name= model.Name
            };

            if (apicallObject != null)
            {
                var bodyContent = JsonConvert.SerializeObject(apicallObject);
                using (HttpClient client = new HttpClient())
                {
                    var content = new StringContent(bodyContent.ToString(), Encoding.UTF8, "application/json");
                    content.Headers.ContentType = new MediaTypeHeaderValue("application/json");
                    client.DefaultRequestHeaders.Add("access-token", _token); // _token = access token
                    var response = await client.PostAsync(_url, content); // _url =api endpoint url
                    if (response != null)
                    {
                        var jsonString = await response.Content.ReadAsStringAsync();

                        try
                        {
                            var result = JsonConvert.DeserializeObject<TestModel2>(jsonString); // TestModel2 = deserialize object
                        }
                        catch (Exception e){
                            //msg
                            throw e;
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        return null;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-08T21:31:57.513

下面的代码用于访问您的 HttpResponseMessage 并从 HttpContent 中提取您的响应。

```
string result = ret.Result.Content.ReadAsStringAsync().Result; 
```

根据您的业务将您的 json 转换为结构在我的情况下，BatchPDF 是一个复杂的对象，它由结果变量填充。

```
BatchPDF batchJson = JsonConvert.DeserializeObject<BatchPDF>(result);

return batchJson; 
```

# actionscript-3 - 在 Flex 中，是否存在与 DividedBox 等效的 Spark？

> ID：10928532
> 
> 赞同：3
> 
> 时间：2012-06-07T08:46:15.690
> 
> 标签：actionscript-3, apache-flex, flex-spark, halo

我需要一种`DividedBox`带有 Flex (4.6) 的东西。这是一个组件，其中两组组件由一个可以用鼠标移动的栏分隔。因此，用户可以选择哪个组可以在屏幕上拥有更多空间。

当然，还有`HDividedBox`Halo`VDividedBox`和`mx.*`软件包。

但 Spark 没有。而且，在 Flex Builder 中，`HDividedBox`并`VDividedBox`没有被标记为推荐的组件。

Spark 是否有 DividedBox 等价物？

如果没有：它在路线图上吗？将 Halo 中的 DividedBox 与我的 Spark 组件一起使用有什么缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:14:01.180

这些 DividedBox 容器没有 Spark 替代品。DividedBoxes 可以将 MX 和 Spark 组件用作子组件。您可以毫无问题地使用分盒。

# jquery - 将删除按钮从生成的网格单击到 JQuery 对话框时，为每一行传递第一个文本框值

> ID：10928534
> 
> 赞同：0
> 
> 时间：2012-06-07T08:46:28.763
> 
> 标签：jquery, jquery-dialog

![在此处输入图像描述](../Images/3c2e6c5e68f6d1aaed7d3dfadde66e3e.png)我生成了一个 HTML 表格（网格）来显示数据库中的数据，例如包裹名称、包裹成本和参加者人数（如果有数据）。每个字段都有一个文本框来显示其内容。对于每一行，都有一个删除按钮来删除该行。当用户单击删除按钮时，包名称应传递到对话框并在其上显示包名称。请帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:07:48.927

没有你的实际 HTML 有点困难，但你可以在按钮点击事件中使用类似的东西：

```
var name = $(this).parent().find('input:eq(0)').val(); //get the name
$(this).parent().remove(); //remove row 
```

# android - org.openqa.selenium.WebDriverException：无法创建临时目录：/sd 卡/1339054625829。

> ID：10928535
> 
> 赞同：3
> 
> 时间：2012-06-07T08:46:35.487
> 
> 标签：android, junit, sd-card

我正在尝试使用*Junit*在 Android 模拟器上使用 selenium 自动化 android（运行基本测试） ，我已将所有必需的 jar 添加到 Classpath，启动模拟器，在其上打开 Web 驱动程序并设置端口转发。

但是当我在 Eclipse 中运行测试时（运行为 JUnit 测试）。它失败了，我得到一个错误：

`org.openqa.selenium.webdriverexception: cannot create temp directory: /sd card/1339054625829`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T13:48:38.963

如果您在启动模拟器时没有为 SD 卡设置任何空间，则会出现此错误。您可以设置用作设备 SD 卡内存的内存量。您可以在编辑 AVD 详细信息时找到它

![在此处输入图像描述](../Images/8fbeea14f2c75ad6425346139447b9e0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T19:58:11.400

以下步骤在真实设备上为我解决了这个问题（有或没有 sd 卡）：

1.  连接你的 USB
2.  打开其他 USB 设置（在 Android 上->从屏幕顶部向下滑动）
3.  选择媒体设备或门户和工具

# php - “公共”文件夹的 Laravel（和通用）框架设置

> ID：10928536
> 
> 赞同：4
> 
> 时间：2012-06-07T08:46:37.830
> 
> 标签：php, .htaccess, laravel

我试图让[Laravel](http://www.laravel.com/)在我的环境（MAMP）上工作，但我陷入了这种情况。

Laravel的`index.php`文件位于一个名为“public”的子文件夹中，所以如果我想测试我的应用程序，我需要使用这个 url 访问它，`http://localhost/laravel/public/` 但我想使用`http://localhost/laravel`

我试图用这些行设置一个 htaccess 但它不起作用：

```
<IfModule mod_rewrite.c>  
    RewriteEngine on
    RewriteRule ^(.*)$ public/$1
</IfModule> 
```

我不确定这个 htaccess 是否可以解决这种情况，我得到了 Lavarel 生成的 404。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:14:19.200

您需要创建一个虚拟主机。Dayle Ress 在他的 Laravel 书的第一章中介绍了这一点：[https ://web.archive.org/web/20121013083457/http://daylerees.com/2012/03/25/laravel-getting-started/](https://web.archive.org/web/20121013083457/http://daylerees.com/2012/03/25/laravel-getting-started/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-10T20:04:29.647

使用代码将 .htacess 文件放在根目录中：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteCond %{REQUEST_URI} !^public
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:57:58.623

public 实际上应该是您的文档根目录。

# prolog - Prolog 中的逻辑

> ID：10928544
> 
> 赞同：4
> 
> 时间：2012-06-07T08:47:09.760
> 
> 标签：prolog, logic

如何在 Prolog 中表达接下来的 3 个句子？

```
All summers are warm. If it not summer, then it is winter. Now it is winter. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:52:55.737

好问题。正如@larsman（好吧，我认为现在是@FredFoo）正确地说，可以是一个很大的主题。他的回答确实很好。

由于您的问题可能是由自定义语言的必要性（Prolog 的主要用途之一）驱动的，因此我在这里提出了虚拟 DSL 的语法糖（这*意味着*它现在完全是空的......）

```
:- op(500, fx, all).
:- op(500, fx, now).
:- op(600, xfx, are).
:- op(700, fx, if).
:- op(399, fx, it).
:- op(398, fx, is).
:- op(397, fx, not).
:- op(701, xfx, then).

all summers are warm.
if it is not summer then it is winter.
now it is winter. 
```

SWI-Prolog 可以将那些被存储的操作设置为红色，即可以轻松查询。这些是声明的优先级较高的词：即 are,then,now。

```
?- now X.
X = it is winter. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:51:07.990

如何表示这取决于您要做出什么推论。最简单的方法之一是

```
warm :- summer.
winter. 
```

“如果不是夏天，那么冬天”规则实际上不允许您做出任何有用的推论，因此您也可以跳过它。如果要包含它，它可能类似于

```
winter :- \+ summer. 
```

但是由于 Prolog 中的 negation 是[negation as failure](https://en.wikipedia.org/wiki/Negation_as_failure)，如果您期望 vanilla 命题逻辑的语义，这可能不会像您认为的那样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:40:04.147

```
winter(now).

warm(X) :- summer(X). 
summer(X) :- \+ winter(X).
winter(X) :- \+ summer(X). 
```

将是做到这一点的方法之一。

在行动：

```
6 ?- summer(now).
false.
7 ?- summer(tomorrow).
ERROR: Out of local stack
8 ?- warm(now).
false. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-06T13:56:32.437

这里没有使用否定的解决方案，而是指定了季节的宇宙。

```
season(summer).
season(winter).

now(winter).

warm(S) :-
    season(S),
    S = summer. 
```

一些示例查询：

```
?- now(S).
S = winter ;
false.

?- now(S), warm(S).
false.

?- warm(S).
S = summer ;
false. 
```

# linux - 在 sed 中搜索和替换 html 标签（带斜杠）

> ID：10928548
> 
> 赞同：2
> 
> 时间：2012-06-07T08:47:14.740
> 
> 标签：linux, sed

我有一个包含此文件的文件，`<!-- CordovaVersion -->` 我想将其替换为`<script src="cordova-1.7.0.js" type="text/javascript"></script>`

我试过

```
sed 's/"<!-- CordovaVersion -->"/"<script src="cordova-1.7.0.js" type="text/javascript"></script>"/g' junk4 > junk4_modified 
```

但它似乎不起作用。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:53:26.077

使用像*#*这样的其他字符作为分隔符而不是*/*。

```
sed 's#<!-- CordovaVersion -->#<script src="cordova-1.7.0.js" type="text/javascript"></script>#g' junk4 > junk4_modified 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:23:52.827

首先，你不需要像[李考](https://stackoverflow.com/a/10928651/912144)`"`所说的那样多余的 s 。其次，您需要知道 sed 如何理解什么被替换为什么：

```
s/this/that/flags 
```

这意味着用额外的标志替换`this`（`that`例如`g`意味着无处不在）。实际上 the`/`不是一个特殊字符，你可以使用任何其他字符，例如`#`scai[说](https://stackoverflow.com/a/10928632/912144)的：

```
s#this#that#flags 
```

但问题是什么？想象一下你想`this`用`th/at`. 然后 sed 看到这个：

```
s/this/th/at/flags 
```

并得到正确的混淆。你想用 替换`this`吗`th`？比什么`at/flags`意思？你想用 替换`this/th`吗`at`？还是`this`与`th/at`? 没有办法说。

这就是为什么你应该用 . 转义特殊字符的原因`\`。由于我们用作`/`分隔符，所以当它不是分隔符时我们必须将其转义：

```
sed 's/<!-- CordovaVersion -->/<script src="cordova-1.7.0.js" type="text\/javascript"><\/script>/g' junk4 > junk4_modified 
```

（当然，如果我们使用 # and inside`this`或者`that`有一个`#`你应该已经逃脱了`#`）

你可以[在这里](http://www.grymoire.com/Unix/Sed.html)阅读更多关于 sed 的信息，包括它的特殊字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T08:54:08.697

`sed 's/<!--\s*CordovaVersion\s*-->/<script src="cordova-1.7.0.js" type="text\/javascript"><\/script>/g' junk4 > junk4_modified`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T08:54:20.163

使用此行 sed 将搜索`"<!-- CordovaVersion -->"`并尝试将其替换为`<script src="cordova-1.7.0.js" type="text/javascript"></script>"`. 但是您的原始文档不包含`"`. 只需从 sed 命令中删除它们即可。

# android - .flv 播放器无法在 3.0 及更高版本中播放

> ID：10928550
> 
> 赞同：1
> 
> 时间：2012-06-07T08:47:30.477
> 
> 标签：android, flvplayback

我正在制作一个必须播放视频文件的应用程序。.flv 文件在 android 2.2 和 2.3.4 中播放，但无法在 3.0 及更高版本中播放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:55:26.640

> 您可以使用 android:hardwareAccelerated="true" 在 AndroidManifest.xml 添加标签

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:hardwareAccelerated="true">
        <activity
            android:name=".WebviewActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application> 
```

# ios - air + iOS：iPad1和iPad2有什么区别

> ID：10928557
> 
> 赞同：1
> 
> 时间：2012-06-07T08:47:57.233
> 
> 标签：ios, air

我有一个适用于 iPad1 的 AIR 应用程序，但它甚至无法安装在 iPad2 上（应用程序是通过 iTunes 部署的）。在 iPad 上显示类似“无法安装 APPID”的信息。问题是我没有iPad2，所以无法测试。

在 iPad1 和 iPad2 上安装可能导致问题的区别是什么？

**PS：**这是用于构建 ipa 的命令：

```
adt -package -target ipa-debug -connect -storetype pkcs12 -keystore ******.p12 
-storepass ****** -provisioning-profile p.mobileprovision app.ipa
application.xml app.swf 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:19:15.027

没有区别。我猜您的问题与您的配置文件中 iPad2 的 UDID 编号丢失或不正确有关。

# java - 使用 ProxyFactory 实现程序化 Spring AOP

> ID：10928559
> 
> 赞同：0
> 
> 时间：2012-06-07T08:48:15.720
> 
> 标签：java, spring, aop, spring-aop, proxyfactory

我正在尝试以编程方式实现 Spring AOP。我创建了一个简单的工厂类，它使用给定的 MethodInterceptors 列表生成 AOP Object.class 代理：

```
public class AOPProxyFactoryBean implements FactoryBean<Object> {

    private List<MethodInterceptor> methodInterceptors = new ArrayList<MethodInterceptor>();

    public Object getObject() throws Exception {
        Object o = new Object();
        ProxyFactory proxyFactory = new ProxyFactory(o);
        for (MethodInterceptor methodInterceptor : methodInterceptors) {
            proxyFactory.addAdvice(methodInterceptor);
        }
        return proxyFactory.getProxy();
    }

    public Class<?> getObjectType() {
        return Object.class;
    }

    public boolean isSingleton() {
        return false;
    }

    public void setMethodInterceptors(List<MethodInterceptor> methodInterceptors) {
        this.methodInterceptors = methodInterceptors;
    } 
```

一个简单的拦截器：

```
public class SimpleMethodInterceptor implements MethodInterceptor {

    public Object invoke(MethodInvocation invocation) throws Throwable {
        System.out.println("SimpleMethodInterceptor: " + invocation.getMethod().getName());
        return invocation.proceed();
    }
} 
```

春天 XML 配置：

```
<bean id="simpleMethodInterceptor" class="...SimpleMethodInterceptor"/>

<bean id="objectAOPProxyFactoryBean" class="...AOPProxyFactoryBean">
    <property name="methodInterceptors">
        <list>
            <ref bean="simpleMethodInterceptor"/>
        </list>
    </property>
</bean> 
```

[在此处](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/aop/framework/AdvisedSupport.html#addAdvice%28org.aopalliance.aop.Advice%29)的文档中， 您可以阅读有关 addAdvice(Advice advice) 的以下内容：*'...请注意，给定的建议将适用于代理上的所有调用，甚至适用于 toString() 方法！...'*

所以，我希望得到对由 SimpleMethodInterceptor 截获的 Object.class 方法的所有调用。

测试：

```
@Test
public void aopTest() {
    Object o = (Object) applicationContext.getBean("objectAOPProxyFactoryBean");
    o.toString();
    o.equals(o);
    o.getClass();
} 
```

给出这个输出：

*SimpleMethodInterceptor: toString*

似乎只有 toString() 方法被拦截了。知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T21:33:55.390

奇怪的。这对我来说似乎是一个错误。我无法准确解释原因，但我有一个可能的解决方法。创建一个接口并在那里重新定义equals和hashCode：

```
public interface MadeUpInterface {
    @Override
    public boolean equals(Object obj);

    @Override
    public int hashCode();
} 
```

而是从代理工厂返回一个实现该接口的实例。

```
public Object getObject() throws Exception {
    Object o = new MadeUpInterface() {};
    ProxyFactory proxyFactory = new ProxyFactory(o);
    for (MethodInterceptor methodInterceptor : methodInterceptors) {
        proxyFactory.addAdvice(methodInterceptor);
    }
    return proxyFactory.getProxy();
} 
```

现在它将打印equals和hashCode。所以我认为行为是它不会拦截对仅在 Object 上定义的方法的调用。并且 toString 被视为一种特殊情况。

# android - 我应该如何将 onActivityResult 中存在的值添加到 ExpandableListView 的子视图？

> ID：10928561
> 
> 赞同：2
> 
> 时间：2012-06-07T08:48:30.933
> 
> 标签：android, expandablelistview

我有 expandableListView 由 GroupViews 和 childViews 组成。MyActivity 正在扩展 Activity。现在我想将onActivityResult的for循环中存在的所有数据添加到ExpandableListView的childViews中。我该怎么做..？

请帮我...

任何人都可以请帮助我....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:49:28.547

我想你有你的 ExpandableListVieW 的适配器类。您的 Adapter 类由您存储的某种形式的数据初始化。使用新数据更新该存储。我阅读了很多帖子来调用适配器上的 notifyDataSetChanged() 方法，这取决于您使用的是哪种适配器。Mine Adapter 从 BaseAdapter 扩展而来，该类没有该功能，但在我将新数据添加到我的存储后，它会自动更新我的列表。

# php - Replacing links in text with PHP

> ID：10928568
> 
> 赞同：-1
> 
> 时间：2012-06-07T08:48:57.097
> 
> 标签：php, regex

I'm using the following RegEx to replace links in the text with clickable links:

```
preg_replace('/(http)+(s)?:(\/\/)((\w|\.)+)(\/)?(\S+)?/i', '<a href="\0" target="_blank" class="lgray">\0</a>',$message); 
```

I need a new one, that will recognize links starting with www only as well as those with http. Here's a list of the required URL types:

*   www.example.com/
*   [http://example.com/](http://example.com/)
*   [http://www.example.com/](http://www.example.com/)
*   www.example.com
*   [http://example.com](http://example.com)
*   [http://www.example.com](http://www.example.com)
*   [https://example.com/](https://example.com/)
*   [https://www.example.com/](https://www.example.com/)
*   [https://example.com](https://example.com)
*   [https://www.example.com](https://www.example.com)

I've tried to do it by myself, but I'm not very good in RegEx-s. Will appreciate any help.

Thank you!

**P.S:** *stackoverflow also does not recognize URLs starting with www only.*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:24:57.257

In your regex you have made the colon and the two slashes mandatory.

This line should remedy that:

```
preg_replace('/(http|https)?(:)?(\/\/)?((\w|\.)+)(\/)?(\S+)?/i', '<a href="\0" target="_blank" class="lgray">\0</a>',$domains); 
```

For a better answer, try looking at [Regular expression pattern to match url with or without http://www](https://stackoverflow.com/questions/6427530/regular-expression-pattern-to-match-url-with-or-without-http-www)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:15:35.437

Using Claus Witt's link and modifying it just a little did the job. The preg_replace he gave did not work though. Here's what I did:

```
$regex = "(((https?|ftp)\:\/\/)|(www))";//Scheme
$regex .= "([a-z0-9-.]*)\.([a-z]{2,4})";//Host or IP
$regex .= "(\:[0-9]{2,5})?";//Port
$regex .= "(\/([a-z0-9+\$_-]\.?)+)*\/?";//Path
$regex .= "(\?[a-z+&\$_.-][a-z0-9;:@&%=+\/\$_.-]*)?";//GET Query
$regex .= "(#[a-z_.-][a-z0-9+\$_.-]*)?";//Anchor
return str_replace
(
    array('href="','http://http://','http://https://','http:///'),
    array('href="http://','http://','https://','/'),
    preg_replace('/'.$regex.'/i','<a href="\0" target="_blank" class="lgray">\0</a>',$message)
); 
```

In the modification I made the **http** or the **www** required, removed some non-necessary checks and extended the domain extension from 3 to 4 characters (.info is a domain too).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:15:28.297

**Disclaimer: These are very basic, and will not account for checking valid TLDs or file extensions. Use at your own risk.**

Assuming you don't need to account for directories or files, to match only those base URLs without subdomains, [you can use the following regex](http://regexr.com?316qo):

```
(?<=^|[\n\s])(?:https?:\/\/)?(?:www\.)?[a-zA-Z0-9-.]+\.com\/?(?=$|[\n\s]) 
```

```
#DESCRIPTION::
#  (?<=^|[\n\s])           Checks to see that what's preceding the URL is the beginning of the string, or a newline, or whitespace.
#  (?:https?:\/\/)?        Matches http(s) if it is there
#  (?:www\.)?              Matches www. if it is there
#  [a-zA-Z0-9-]+           Matches "example" in "example.com" (as well as any other valid URL character; will also match subdomains)
#  \.com\/?                Matches .com(/)
#  (?=$|[\n\s])            Checks to see that what's following the URL is the end of the string, or a newline, or whitespace. 
```

* * *

If you need to also match directories and files, [the end of the regex needs to be modified and added to slightly](http://regexr.com?316ql):

```
(?<=^|[\n\s])(?:https?:\/\/)?(?:www\.)?[a-zA-Z0-9-.]+\.com(?:(?:\/[\w]+)+)?(?:\/|\.[\w]+)?(?=$|[\n\s]) 
```

```
#DESCRIPTION::
#  (?<=^|[\n\s])           Checks to see that what's preceding the URL is the beginning of the string, or a newline, or whitespace.
#  (?:https?:\/\/)?        Matches http(s) if it is there
#  (?:www\.)?              Matches www. if it is there
#  [a-zA-Z0-9-.]+          Matches "example" in "example.com" (as well as any other valid URL character; will also match subdomains)
#  \.com                   Matches .com
#  (?:                     Start of a group
#     (?:\/[\w]+)+         Attempts to find subdirectories by matching /, then word characters
#  )?                      Ends the previous group. This group can be skipped, if there are no subdirectories
#  (?:\/|\.[\w]+)?         Matches a file extension if it is there, or a / if it is there.
#  (?=$|[\n\s])            Checks to see that what's following the URL is the end of the string, or a newline, or whitespace. 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T10:08:12.690

Try this one:

```
$pattern = preg_replace("/((https:\/\/|http:\/\/||http:\/\/www.|https:\/\/www.|www.)+([\w\/])+(.com\/|.com))/i","<a target=\"_blank\" href=\"$1\">$1</a>",$url); 
```

# php - 以“yyyy-mm-dd 00:00:00”格式获取今天的日期。日期转换的奇怪行为

> ID：10928572
> 
> 赞同：-2
> 
> 时间：2012-06-07T08:49:04.640
> 
> 标签：php, date, time

我正在尝试为 time() 函数查找格式为 yyyy-mm-dd 的零秒（时间，日期更改时）。因此，今天将是“2012-06-07 00:00:00”。似乎一切都清楚了，但是

```
 $today_starts_str='2012-06-07 00:00:00';
    var_dump($today_starts_str); //'2012-06-07 00:00:00', good

    $today_starts_sec=strtotime ( $today_starts_str );
    var_dump($today_starts_sec); //1339016400, good

    $today_starts_str2=date ( 'Y-m-d h:m:s', $today_starts_sec );
    var_dump($today_starts_str2); //"2012-06-07 12:06:00" Why it is 12:06, but not 00:00? 
```

所以，我需要一些东西来获取日期随时更改的时间（可能使用 time()）；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:51:14.910

日期格式字符串内部`m`用于月份，`i`用于分钟；-)

对于一小时的 24 小时格式，请使用`H`而不是`h`. （谢谢埃米尔！）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T08:53:12.830

尝试`$today_starts_str2=date ( 'Y-m-d H:i:s', $today_starts_sec );`

# build - Dojo 自定义构建错误

> ID：10928575
> 
> 赞同：0
> 
> 时间：2012-06-07T08:49:29.713
> 
> 标签：build, dojo

**我的 HTML 文件**：**buildCheck.html**

```
<SCRIPT src="/dojo/dojo.js"></SCRIPT>
<SCRIPT>
    dojo.require("dijit.form.Button");
    dojo.require("dijit.form.CheckBox");
    dojo.require("dijit.form.ComboBox");
    dojo.require("dijit.Dialog");
    dojo.require("dojo.data.ItemFileReadStore");
     dojo.require("my.app");

</SCRIPT> 
```

**命令 ：**

```
>build.bat action=release htmlFiles=../../buildCheck1.html profile=myProfile 
```

**错误 ：**

```
kwArgs.htmlFiles ../../buildCheck1.html
release:  Using profile: profiles/myProfile.profile.js
release:  Using version number: 0.0.0.dev for the release.
release:  Deleting: ../../release/dojo
release:  Copying: ../dojo/../dijit to: ../../release/dojo/dijit
release:   ********** Not Copied: ../dojo/../dijit
release:  Copying: ../dojo/../dojox to: ../../release/dojo/dojox
release:   ********** Not Copied: ../dojo/../dojox
release:  Copying: ../dojo to: ../../release/dojo/dojo
release:   ********** Not Copied: ../dojo
release:  Building dojo.js and layer files
js: "./../../dojo/_base/_loader/loader.js", line 423: exception from uncaught Ja
vaScript throw: Error: Could not load 'dojo.i18n'; last tried '../../release/doj
o/dojo/i18n.js' 
```

如果我添加以下组件，我会收到此错误

```
dojo.require("dojo.data.ItemFileReadStore") 
```

删除组件构建后工作正常。

可能是什么问题？我应该添加什么来避免这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-08T10:40:02.803

我不知道你是如何组织文件的，但就我而言，我是这样的：

```
- js
  - dojo_require.js (the file with "dojo.require" statements, just like your "buildCheck.html")
  - dojo-release-1.6.1-src (dojo files)
    - dijit
    - dojo
    - dojox
    - util
      - buildscripts
    - release 
```

我面临着完全相同的问题。我发现当 html 文件包含`require`从“dojo”文件夹中加载某些内容的任何内容时，就会发生这种情况。`dojo.require("dijit.<*>")`很好，`dojo.require("dojox.<*>")`很好，但是`dojo.require("dojo.<*>")`会导致构建脚本使用不正确的 dojo 相对路径。我得到了和你一样的输出：

```
release:  Deleting: ../../release/dojo
release:  Copying: ../dojo/../dijit to: ../../release/dojo/dijit 
```

但我应该得到类似的东西`Copying: ../../dojo/../dijit to: ../../release/dojo/dijit`。一个`../`失踪了。

现在，它可能是一个错误（我懒得进一步调查它），并且由于 1.6 是一个相当旧的 dojo 版本，正确的修复应该是升级。但是由于在某些情况下，这实在是太痛苦了，所以这里有一个肮脏的 hack，它使我的 buildscript 可以运行并完成：

在`dojo-release-1.6.1-src/util/buildscripts/build.js`第 107 行，添加以下行：

```
prefixPath = '../' + prefixPath; 
```

这样整个代码块看起来像这样：

```
for(var i = 0; i < prefixes.length; i++){
    var prefixName = prefixes[i][0];
    var prefixPath = prefixes[i][1];
    prefixPath = '../' + prefixPath; // HACK!
    var finalPrefixPath = prefixPath;
    if(finalPrefixPath.indexOf(".") == 0 && prefixName != "dojo"){
        finalPrefixPath = dojoPrefixPath + "/" + prefixPath;
    }
    _copyToRelease(prefixName, finalPrefixPath, kwArgs, buildLayers);

    if(kwArgs.symbol){
        var releasePath = kwArgs.releaseDir + "/"  + prefixName.replace(/\./g, "/");
        buildUtil.insertSymbols(releasePath, kwArgs);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:57:44.797

看起来在发生错误时，dojo/i18n 尚未构建。我觉得很奇怪，你说它是 ItemFileReadStore - 正如在 dojo.data 中指出的那样，需要本地化。

尝试添加手动 dojo.require("dojo.i18n"); 到您的 .html 上面的任何 dijits reqs

# sharepoint - 无法访问我在 sharepoint 中的类的属性

> ID：10928577
> 
> 赞同：2
> 
> 时间：2012-06-07T08:49:32.100
> 
> 标签：sharepoint

我的 Sharepoint 应用程序有问题。我开始将它作为一个普通项目进行编程，现在我喜欢将它“移动”到一个 Sharepoint 应用程序中。我的应用程序有两个项目，一个是 sharepoint 的实际项目，一个包含类。我签署了我的类项目，它有一个强名称并被引用。到目前为止一切都很好......但现在我遇到的问题是我无法再访问我的班级中的公共方法了。所以当实例化我的类时：

```
var myName = new ClassName(); 
```

然后尝试访问它，例如：

```
myName.Size = 20; 
```

“大小”将标记为红色，并显示错误“无法解析符号”。但在将其全部放入共享点应用程序之前，它工作得很好！我上下搜索，但找不到解决这个问题的方法。

有人知道这个问题吗？

更新：

这是我在主项目中的代码：

```
protected override void CreateChildControls()
{
  ...

  HPlaner hp = new HPlaner();
  hp.Entries.Add(new HPlanerEntry("Micky Mouse", new DateTime(2012, 12, 24), new DateTime(2013, 1, 13)));

  hp.Scale = 2;
  hp.Year = year;
  hp.Summary = true;
  this.Controls.Add(hp);
} 
```

这是课程：

```
public class HPlaner : WebControl
{
  private List<HPlanerEntry> _Entries;
  public List<HPlanerEntry> Entries
  {
    get
    {
      if (_Entries == null)
      {
        _Entries = new List<HPlanerEntry>();
      }

      return _Entries;
    }
  }

  public bool Summary { get; set; }
  public int Scale { get; set; }
  public int DayCount { get; set; }
  public int UserCount { get; set; }
  public int Year { get; set; }
  public string[,] UserList { get; set; }

  ... (myMethods)

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:16:19.690

对不起各位，答案很简单！普通项目中的 Main-Class 是 _Default，在 Sharpoint Application HPlaner 中，它与我的其他类同名。你看不到这一点，因为我的列表中没有包含类名。像这样的“小”事情是多么耗时！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:14:46.833

我的猜测是您的代码是针对 x86 架构编写的，而 SharePoint 代码针对 64 位。您可以通过在 VS 中右键单击项目并选择 Properties->Build->Platform Target 来更改代码的设置。选择 x64 并重新编译。

# php - wordpress 404 Not Found 页面不显示，只显示一个空白页面

> ID：10928583
> 
> 赞同：0
> 
> 时间：2012-06-07T08:50:01.370
> 
> 标签：php, wordpress, iis

我在这里阅读了很多关于 404 页面显示为空白的帖子，但似乎找不到任何解决问题的方法。

而且，我希望有人在这里提出另一个建议。

设置

```
IIS 6, PHP 5.2, Helicon ISAPI_Rewrite, and latest version of WordPress.
Custom permalinks enabled as /%postname%/
IIS 404 custom error page set to /index.php?error=404
Debugging enabled 
```

问题：所有链接和相应页面都按预期工作，除了无效或错误的 url，应该显示我的 404 页面。相反，我得到一个空白页。标题看起来不错，即。404 Not Found，但主体不存在。

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:46:14.437

我们已经解决了这个问题，我们将站点从 IIS 6 转移到了 IIS 7，现在它可以正常工作了。

# dynamic - 外部 TypoScript 模板的动态包含/自动加载

> ID：10928584
> 
> 赞同：0
> 
> 时间：2012-06-07T08:50:08.637
> 
> 标签：dynamic, include, typo3, autoload, typoscript

是否可以在某些文件夹中自动包含所有外部 TS 模板以避免手动链接？

而不是每次都像这样手动编写**INCLUDE_TYPOSCRIPT**：

**常数：**

```
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/setup/1.ts">
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/setup/2.ts">
...
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/setup/999.ts"> 
```

**设置 ：**

```
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/constants/1.ts">
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/constants/2.ts">
...
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/constants/999.ts"> 
```

我想要这样的东西，而不是每个文件的手动包含文件：

**常数：**

```
<INCLUDE_TYPOSCRIPT_ALL: source="FILE:fileadmin/templates/typoscript/constants/"> 
```

**设置 ：**

```
<INCLUDE_TYPOSCRIPT_ALL: source="FILE:fileadmin/templates/typoscript/setup/"> 
```

*递归*选项也可能会有所帮助。

是否有可能，或者我需要破解核心来实现这样的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:55:15.080

唯一的方法是将子文件包含在一个主文件中。它类似于`@import`在`CSS`文件中使用包含其他子样式的方法。

然后你可以在你的 TS 中包含一个文件：

```
<INCLUDE_TYPOSCRIPT: source="FILE:fileadmin/templates/typoscript/setup/main.ts"> 
```

在 main.ts 你可以粘贴额外的`includes`

# excel - Excel 从“2012 年 7 月 6 日 10:26:42”的单元格计算与今天的日期差

> ID：10928586
> 
> 赞同：12
> 
> 时间：2012-06-07T08:50:18.777
> 
> 标签：excel, date

所以我有一个`7/6/2012 10:26:42`输入的单元格，我想在另一个单元格中显示与今天的日期差异。

我试图提取`7/6/2012`，`=LEFT(A1, Find(" ", A1, 1) -1)`但结果是有一个值错误。

该公式在我制作 A1 时有效`'7/6/2012 10:26:42`，但它并不理想，因为我必须处理整个列。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-03T13:53:16.527

您可以使用 datedif 函数找出天数的差异。

```
=DATEDIF(A1,TODAY(),"d") 
```

**引用自 excel.datedif.com**

Microsoft Excel 中神秘的 datedif 函数

Datedif 函数用于以天、月或年计算两个日期之间的间隔。

此函数在所有版本的 Excel 中都可用，但没有记录。它甚至没有在“插入函数”对话框中列出。因此，必须在公式框中手动输入。句法

`DATEDIF( start_date, end_date, interval_unit )`

start_date 从日期 end_date 到日期（必须在 start_date 之后） interval_unit 用于输出间隔的单位 interval_unit 的值

interval_unit 描述

D 天数

M 完整月数

Y 完整年数

YD 天数，不包括年份

MD 天数，不包括月和年

YM 月数，不包括年份

## 错误

错误描述

#NUM！end_date 晚于（大于） start_date 或 interval_unit 具有无效值。＃价值！end_date 或 start_date 无效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T08:56:12.627

如果这是一个有效的日期/时间条目，那么 excel 只需将其存储为一个数字（天是整数，时间是小数部分），所以你可以做一个简单的减法。

我不确定 7/6 是 6 月 7 日还是 7 月 6 日，假设后者是未来的日期，因此您可以通过

`=INT(A1-TODAY())`

确保将结果单元格格式化为一般或数字（不是日期）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:03:00.303

对于 A1 和今天日期之间的差异，您可以输入：=ABS(TODAY()-A1)

它返回日期之间的（小数）天数。

您可能会获得#VALUE！公式中的错误，因为 Excel 将日期视为数字。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-02-13T13:35:05.813

```
DAYS(start_date,end_date): 
```

例如：

```
DAYS(A1,TODAY()) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-03T18:56:51.373

你为什么不让它变得容易和简单。如果我需要知道今天之间的天数，比如 2015 年 3 月 10 日，我可以输入简单的公式。

假设静态日期是 2015 年 3 月 10 日，位于单元格 O5 中。

确定今天和 O5 之间的天数的公式是 =O5-Today()

没有什么花哨或 DATEDIF 的东西。显然，您在其中键入此公式的单元格必须具有“数字”的数据类型。只需在参考单元格中正常输入您的日期，在本例中为 O5。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-15T16:46:42.710

`=ROUND((TODAY()-A1)/365,0)`将提供单元格 A1 中的日期与今天日期之间的年数

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-24T15:16:58.843

*在所有情况下，# 指的是单元格编号

你真的不需要 datedif 函数；例如：

我正在制作一个跟踪员工福利资格的电子表格。

我在“A”列中有他们的雇用日期，在 B 列中是 =(TODAY()-A#)

您只需格式化单元格以显示通用数字而不是日期。

它也很容易以另一种方式工作：我还将该数字转换为显示实际日期是他们何时获得福利，而不是剩下多少天，这很简单

=（90-B#）+今天（）

只要确保您将单元格格式设置为相应的通用数字或日期即可。

希望这可以帮助。

# javascript - 以平滑的方式更改 Textarea 的大小

> ID：10928588
> 
> 赞同：4
> 
> 时间：2012-06-07T08:50:24.877
> 
> 标签：javascript, jquery, html

我想达到这个效果：当用户关注表单中的文本区域时，它会变得更高，模糊时会达到它的原始大小。这是我到目前为止所做的：http: [//jsfiddle.net/jRYDw/](http://jsfiddle.net/jRYDw/)

我的代码：

```
$('textarea').focus(function(){
    $(this).css('height','80px');
});

$('textarea').blur(function(){
    $(this).css('height','40px');
}); 
```

我想要做的是使textarea以平滑的方式扩展，这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T08:52:10.180

我不得不使用动画功能

```
$('textarea').focus(function(){
    $(this).animate({height:'80px'});
});

$('textarea').blur(function(){
    $(this).animate({height:'40px'});
}); 
```

您可以指定动画的长度、缓动函数以及动画完成时的回调。

> .animate（属性[，持续时间] [，缓动] [，完成]）

参考 - [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

[演示](http://jsfiddle.net/jRYDw/1/)

# html - CSS：子菜单对齐和样式（严格的 CSS；没有 javascript）

> ID：10928600
> 
> 赞同：0
> 
> 时间：2012-06-07T08:51:16.607
> 
> 标签：html, css

我正试图让我的第一个菜单工作。我在[没有 javascript 的情况下获得了 CSS Menu](https://stackoverflow.com/questions/4873604/css-menu-without-javascript)的基础知识。我试图让它尽可能简单。我必须接近我想要的样子（不完全是我真正想要的样子）：

[http://jsfiddle.net/EjXgU/2/](http://jsfiddle.net/EjXgU/2/)

主要问题是子菜单。它们将一个堆叠在另一个下方，而不是在父菜单的右侧。此外，第一级子菜单不会堆叠在主菜单行的正下方，而是在其中。

我注意到的另一个问题是，我想添加一个 rgba `background-color`（透明度）。但是，对于每个子菜单级别，透明度都会发生变化。

我也接受任何 css3 技巧，让它看起来“华丽”和花哨 =)

HTML：

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Title: css-menu-without-javascript</title>
</head>
<body>

    <nav>
        <ul id="menu">
        <li><a href="#" title="Home">Home</a></li>
        <li><a href="#" class="normaltip" title="Units">With sub-menus --&gt;</a>
            <ul class="submenu">
            <li><a href="...">Submenu 1</a></li>
            <li><a href="...">Submenu 2 --&gt;</a>
                <ul class="submenu">
                <li><a href="...">Sub-submenu 1</a></li>
                <li><a href="...">Sub-submenu 2</a></li>
                </ul>
            </li>
            </ul>
        </li>
        <li><a href="#" title="Future Residents">Menu item 3</a></li>
        <li><a href="#" title="Current Residents">With sub-menus --&gt;</a>
            <ul class="submenu">
            <li><a href="...">Submenu 3</a></li>
            <li><a href="...">Submenu 4 --&gt;</a>
                <ul class="submenu">
                <li><a href="...">Sub-submenu 3</a></li>
                <li><a href="...">Sub-submenu 4 --&gt;</a>
                    <ul class="submenu">
                    <li><a href="...">Sub-sub-submenu 1</a></li>
                    <li><a href="...">Sub-sub-submenu 2</a></li>
                    </ul>
                </li>
                </ul>
            </li>
            </ul>
        </li>
        <li><a href="#" title="Contact Us">Menu item 3</a></li>
        </ul>
    </nav>

</body>
</html> 
```

CSS：

```
/*https://stackoverflow.com/questions/4873604/css-menu-without-javascript*/
#menu li>ul { display: none; }
#menu li:hover>ul { display: block; }
/*End of Nathan MacInnes' code*/

nav { position: relative; }
#menu> li { float: left; padding:10px; border: 1px ridge #cccccc;}
#menu a {
    text-decoration:none;
    font-size: 20px;
    color:#191919;
    padding:10px;
}
.submenu { background-color: rgba( 0,0,0,0.5 ); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:08:52.207

你可以试试

```
.submenu { background-color: rgba( 0,0,0,0.25 );
    margin-left: 25px;} 
```

透明度值是相加的——一个子菜单中的一个子菜单被加了两次，所以第二个子菜单的透明度会降低。从较低的值开始允许它是有用的。

添加边距会使文本向右移动，我更喜欢每个子菜单“包含”自己的子菜单的方式。

[http://jsfiddle.net/EjXgU/3/](http://jsfiddle.net/EjXgU/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:13:10.083

如果您想要纯 CSS 下拉菜单，请查看[Son of Suckerfish](http://www.htmldog.com/articles/suckerfish/dropdowns/)。这几乎是实现这一目标的事实上的方式。

有*一点*关于使用 JavaScript 来解决早期版本的 Internet Explorer 缺乏对伪元素的支持，但我认为这是 IE7 及以下版本，因此可能会被删除，具体取决于您想要的支持级别较旧的浏览器，例如 IE < 7。其他浏览器（Firefox、Chrome、Safari、Opera 等）仅使用 CSS 即可显示菜单和功能。

# php - 从 php 调用 jquery 函数

> ID：10928602
> 
> 赞同：0
> 
> 时间：2012-06-07T08:51:24.923
> 
> 标签：php, jquery, function, call

当从选择元素中选择选项时，我有一个jQuery函数会触发，它的一个函数在具有特定类别时将其应用于选择元素：

```
<script type="text/javascript">
$(document).ready(function() 
{       
    $('.acompanante').on('change', function(event) 
    {   
       //my code
    }
}
</script> 
```

这是我的选择元素代码：

```
<select class="acompanante" name="acompanante_anterior" id="<?php echo "$i" ?>">
  <option value="0" ><?php echo $txt_nuevo_acompanante;?></option>
  ....
</select> 
```

如何`.change()`从 PHP 中调用 select 元素的 jQuery 事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:54:25.687

您不能从 PHP 调用它，也不需要它。jQuery 看不到 PHP，而只看到呈现的 HTML。

所以你可以像往常一样绑定它，在这种情况下使用类。

```
$('.acompanante').change(function(){
    this  // the dropdown which changed
}); 
```

在其中，您可以使用`$(this)`它来查看它是哪个下拉列表。

想要从 PHP 调用 javascript，让 PHP 渲染 JavaScript 来这样做：

```
<script>
    <?
       echo 'javascriptFunction();';
    ?>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:59:14.923

您想在页面加载时执行您的功能。

```
<script type="text/javascript">
$(document).ready(function() 
{       
    $('.acompanante').on('change', fillDropdown);
    fillDropdown.call($('.acompanante'));
});

function fillDropdown(event)
{

}
</script> 
```

制作 jquery 对象涉及一些技巧`this`，这是 jQuery 的默认行为。这就是 fn.Call 的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:55:11.303

与[`change()`](http://api.jquery.com/change)：

```
$('.acompanante').change(function() {
    alert('change() called.');
}); 
```

# oracle - SSIS Oracle 数据加载不完整

> ID：10928614
> 
> 赞同：1
> 
> 时间：2012-06-07T08:52:07.980
> 
> 标签：oracle, sql-server-2008, oracle11g, ssis

我有一个数据流任务，其中在近 400k 行数据流失败并出现以下错误后，从 oracle 源获取数据并将其存储在 SQL Server DB 中。

ORA-01489 字符串连接的结果太长

![在此处输入图像描述](../Images/bdec284dcd153d5777ed4497c23b8941.png)

![在此处输入图像描述](../Images/919b5e153c65eab398271237e179e02a.png)

我的执行结果是 [Oracle Source [1543]] 错误：这到底是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:58:27.733

我假设您使用的`varchar2`数据类型限制为 4000 个字符。

此错误是因为连接的字符串返回超过 4000 个 varchar2 字符，超出了尝试使用[CLOB 数据类型的限制。](http://ss64.com/ora/syntax-datatypes.html)

[http://nimishgarg.blogspot.in/2012/06/ora-01489-result-of-string.html](http://nimishgarg.blogspot.in/2012/06/ora-01489-result-of-string.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:57:26.710

在源代码之后使用派生列将字符串剪切为 4000 个字符

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:53:45.247

您的数据源 (Oracle) 正在发送大于 4000 个字符的字符串，而您的 SSIS 源期望的内容少于此。检查您的源以获取长度 > 4000 的任何数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T07:15:20.390

经过长时间的战斗，我决定修改包，结果再次删除和创建所有任务已经解决了问题。

真正的原因对我来说仍然未知。

# java - 调用一堆AsyncTask，有没有办法知道它们什么时候都完成显示一条消息？

> ID：10928620
> 
> 赞同：1
> 
> 时间：2012-06-07T08:52:36.940
> 
> 标签：java, android, android-asynctask

所以我正在做的是，我有一个循环，我在循环中调用了一个 AsyncTask，所以可能会有一堆。据我了解，在循环完成后，我不能只显示一切都已完成的消息，因为该消息将在 AsyncTasks 完成之前出现，因为这有点像异步线程。

如果我只有一个 AsyncTask 那就太简单了，我会将用于显示消息的代码放入 onPostExecute() 但现在我有很多。

那么有没有办法知道所有 AsyckTast 线程何时都完成，以便我可以显示我的消息？

感谢您的回答，您可能已经猜到了，我对 Java 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:59:05.100

尝试`static Integer`为每个`AsyncTask`创建的增量和`onPostExecute()`递减它。当它达到 0 时，您的所有任务都将完成。

例如：创建任务时：

```
 synchronized(staticInt) {
    //create AsyncTask
    ++staticInt;
 } 
```

当它完成时：

```
 protected void onPostExecute(Object result) {
     synchronized(staticInt) {
        --staticInt;
        if (staticInt == 0) {
           //show message
        }
     }
 } 
```

正如@James 建议的那样，您还可以使用它来控制 AsyncTask 在特定时间执行的最大数量：

```
 while (staticInt >= MAX_NUMBER_OF_THREADS) {
     //wait
 }

 synchronized(staticInt) {
    //create AsyncTask
    ++staticInt;
 } 
```

它可以通过等待通知方法进行改进。

# blackberry - BlackBerry 单个屏幕上的两个标题栏

> ID：10928625
> 
> 赞同：0
> 
> 时间：2012-06-07T08:52:52.347
> 
> 标签：blackberry, blackberry-simulator, blackberry-jde

我正在尝试在 BlackBerry 中构建屏幕。在原始标题栏下方应该有第二个标题栏。第二个标题栏也应该是固定的，它不应该用垂直滚动来滚动。

在这个问题上需要一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:42:29.123

[您可以在VerticalFieldManager](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/VerticalFieldManager.html)上添加第二个标题和原始标题栏。然后只需将其设置为标题，`VerticalFieldManager`因为可以将任何实例设置为标题。`Field``Manager`

检查[public void setTitle(Field title)](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/MainScreen.html#setTitle%28net.rim.device.api.ui.Field%29)和以下示例。

```
public class DemoScreen extends MainScreen {
    public DemoScreen() {
        super();

        // Prepare a Custom Title
        long style = NO_VERTICAL_SCROLL | NO_VERTICAL_SCROLLBAR | USE_ALL_WIDTH;
        VerticalFieldManager myTitle = new VerticalFieldManager(style);

        // Set background color.
        myTitle.setBackground(BackgroundFactory.createSolidBackground(Color.GRAY));

        // Add any numbers/types of field
        myTitle.add(new LabelField("First line."));
        myTitle.add(new LabelField("The second line."));

        // Set the Title
        setTitle(myTitle);
    }
} 
```

# linux - 可以删除 Centos 选项

> ID：10928629
> 
> 赞同：0
> 
> 时间：2012-06-07T08:53:19.327
> 
> 标签：linux, unix, centos

在我在 VBox 上安装的 CentOS 的启动选项中，我有以下内容真的让我很困惑，以弄清楚如何消除那些不再起作用的选项，例如第一个报告为内核 root 无法启动的选项。我只能选择最后一个来引导系统。

```
> CentOS(2.6.32-200.17.1.e16.x86_64)
> CentOS(2.6.32-200.17.1.e16.x86_64.debug)
> CentOS(2.6.32-200.4.2.e16.x86_64.debug)
> CentOS(2.6.32-200.4.2.e16.x86_64) 
> CentOS(2.6.32-200.4.1.e16.x86_64)
> CentOS(2.6.32-200.e16.x86_64) 
```

一旦我使用最后一个选项启动系统，这些存储在哪里？如果我想（完全）删除其中之一怎么办？我不知道 xxx.debug 有什么用？

感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:19:06.560

在今天的大多数发行版中，引导管理器是 GRUB。引导菜单的配置通常存储在`/boot/grub`一个名为`menu.lst`或`grub.cfg`取决于 GRUB 版本和发行版的文件中。在该文件中，您可以在菜单中注释掉与您不想要的操作系统相对应的行集 - 语法应该非常直观。

在某些发行版上，该文件是由一组脚本生成的，在这种情况下，顶部的注释说您不应该直接编辑该文件。例如在 Debian 中，生成配置的脚本驻留在其中`/etc/grub.d/`，它们对可用的操作系统进行各种自动探测。在这种情况下，需要修改脚本或删除自动附加到菜单的操作系统映像。干净地执行此操作的确切方法可能因您的设置而异 - 可能其中一些启动映像可以使用包管理器删除，这比手动删除文件更优雅。

无论哪种方式，都要小心，因为删除与引导相关的错误文件可能会导致无法引导您的操作系统，甚至如果您非常不走运，甚至根本无法启动 GRUB。

# android - 在不使用 AsyncTask 的情况下避免活动之间的黑屏

> ID：10928631
> 
> 赞同：1
> 
> 时间：2012-06-07T08:53:25.093
> 
> 标签：android, android-intent, android-activity

我想避免或自定义活动之间的这些黑色过渡，它们很烦人。

我读过该解决方案正在使用 AsyncTask 但我想知道是否有另一种方法可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T08:41:30.287

您是否有机会使用 android:launchMode="singleInstance" ？我的活动轻如鸿毛，但我在使用 singleInstance 时遇到了 200 毫秒的延迟。更改为标准解决了该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:01:45.270

1- 在 onCreate 中使用进度条并执行大容量操作，然后在 handler.postDelayed 或 Async 任务中......

2-我认为在活动事务中插入动画也是使用 overridePendingTransition 的一个选项......但怀疑它可能会增加等待时间:(

[http://blog.blundell-apps.com/animate-an-activity/](http://blog.blundell-apps.com/animate-an-activity/)

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/Animation.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/Animation.html)

[http://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/](http://www.warriorpoint.com/blog/2009/05/26/android-switching-screens-in-an-activity-with-animations-using-viewflipper/)

[http://chrisrisner.com/31-Days-of-Android--Day-17%E2%80%93Animating-between-Activities](http://chrisrisner.com/31-Days-of-Android--Day-17%E2%80%93Animating-between-Activities)

# html - 使用 z-index 在 Internet Explorer 中堆叠问题

> ID：10928634
> 
> 赞同：1
> 
> 时间：2012-06-07T08:53:36.657
> 
> 标签：html, css, internet-explorer, internet-explorer-8, z-index

我不太擅长 CSS，所以我无法让 IE 正确显示我的菜单栏。正如你在这个[小提琴](http://jsfiddle.net/hhnLj/9/)中看到的，我有一个简单的栏，用户可以点击他的用户名来显示一些选项。

此代码在 chrome 和 firefox 中运行良好，但它在 Internet Explorer 上执行此操作： ![在此处输入图像描述](../Images/9412e47eb07ef04c15926bc412a9cb55.png)

如您所见，菜单在导航栏中打开，因此您只会看到第一个选项。

你能打开这个[小提琴](http://jsfiddle.net/hhnLj/9/)并告诉我我的代码有什么问题吗？

提前致谢！！

* * *

解决方案：

哇，这真的很奇怪，但它是 CSS 上的这一行！这就是它在小提琴中起作用的原因，因为我为示例放置了一个简单的背景。为了将来参考，如果您正在进行堆叠，切勿这样做：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#5b5b5b', endColorstr='#282828',GradientType=0 ); /* IE6-9 */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:07:54.530

我在 Internet Explorer 9 中查看[小提琴](http://jsfiddle.net/hhnLj/9/)并在开发模式下转到 IE 8，我可以看到所有选项。不知道如何重新产生你有的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:50:29.663

您需要添加`position: relative`到父项和`position: absolute`下拉列表。您可能还需要更改`top`#user_menu 的属性，使其不与用户名重叠（大约 20px 左右应该这样做）。

[更多关于这里的 IE 错误](http://brenelz.com/blog/squish-the-internet-explorer-z-index-bug/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:00:20.913

Modify the CSS of `#user_menu` to the following:

```
top: 30px; 
```

# javascript - 表单按钮不会在 IE 中提交

> ID：10928635
> 
> 赞同：0
> 
> 时间：2012-06-07T08:53:36.963
> 
> 标签：javascript, button, internet-explorer-9

我有一个表单，它只是验证用户的年龄然后提交它。该表单在 FF、Safari 和 Chrome 中运行良好，但在 IE 9 上运行良好（我目前只在 IE9 上测试过）。

这是javascript

```
 <script type="text/ecmascript">
         function CalculateAge() {

        var a= document.getElementById("c").value;
         var d=document.getElementById("d").value;
         var m=document.getElementById("m").value;
         var y=document.getElementById("y").value;

         if (d != \'0\' && m != \'0\' && y != \'0\' ) {

            now = new Date()

            if (d) {

               /* born = new Date(y, d, m);

                age = Math.floor((now.getTime() - born.getTime()) / (365.25 * 24 * 60 * 60 * 1000)); */
                //from php spence

            /* now.getDate();//daty of month 1-30
            now.getFullYear();//four digits
            now.getMonth();//return month from 0-11
            */
            year_diff =now.getFullYear() - y;
            month_diff= (now.getMonth()+1)-m;
            day_diff=now.getDate()-d;

            if(month_diff<0){ 

            //--year_diff;
            y=year_diff-1;

            }

            else if((month_diff==0) && (day_diff<0)){ 

            //--year_diff;
            y=year_diff-1;

            }else{
            y=year_diff;
            }
            //alert(y);
            //alert(day_diff);
                //alert(year_diff);
                //alert(month_diff);
            //age=year_diff;
            b=a;
            h=new Number(b)+1;
            //alert("You are "+y+" years old and Your Country is "+document.getElementById("c").options[h].text);
            age=y;
            //alert(age);
                if(isNaN(age))

                {

                   alert(\'Input date is incorrect!\');

                }else if(a=="none"){
                alert("please select a country");
                }

                else

                {

                if(a==1||a==2||a==3||a==4||a==5||a==6||a==7||a==8||a==9||a==11||a==14||a==15||a==16||a==17||a==18||a==19||a==20||a==21||a==22||a==23||a==24||a==25||a==27||a==28||a==29||a==30||a==31||a==33||a==34||a==35||a==36||a==37||a==38||a==39||a==40||a==41||a==42||a==43||a==44||a==45||a==46||a==47||a==48||a==49||a==50||a==51||a==52||a==53||a==55||a==56||a==57||a==58||a==60||a==61||a==63||a==64||a==65||a==66||a==67||a==68||a==69||a==70||a==71||a==72||a==73||a==74||a==76||a==83||a==84||a==85||a==89||a==90||a==91||a==93||a==96||a==97||a==98||a==99||a==100||a==102||a==103||a==104||a==105||a==106||a==107||a==108||a==109||a==110||a==111||a==112||a==113||a==114||a==115||a==116||a==117||a==118||a==119||a==120||a==121||a==122||a==123||a==124||a==125||a==127||a==128||a==129||a==130||a==131||a==136||a==137||a==139||a==140||a==141||a==142||a==143||a==144||a==145||a==146||a==147||a==148||a==149||a==151||a==152||a==154||a==155||a==156||a==157||a==158||a==159||a==160||a==162||a==163||a==164||a==167||a==168||a==170||a==171||a==172||a==174||a==175||a==176||a==177||a==178||a==179||a==180||a==182||a==183||a==184||a==186||a==188||a==190||a==191||a==192||a==193||a==195||a==196||a==197){

if(age>=18){
    document.cookie ="chdg=testcookie; expires=3600; path=/tpfnew";
    window.location="index.php";

}
else{

window.location="reject.html";
}

}else if(a==32||a==92){

if(age>=19){
document.cookie ="chdg=testcookie; expires=3600; path=/tpfnew";
window.location="index.php";

}
else{

window.location="reject.html";
}

}
else if(a==86||a==138){
if(age>=20){
document.cookie = "chdg=hjko; expires=3600; path=/tpfnew";
window.location="index.php";

}
else{

window.location="reject.html";
}

}else if(a==187||a==185||a==161||a==150||a==135||a==133||a==79||a==75||a==12){
if(age>=21){
document.cookie ="chdg=testcookie; expires=3600; path=/tpfnew";
window.location="index.php";

}
else{

window.location="reject.html";
}
}

else if(a==78){
if(age>=25){
document.cookie ="chdg=testcookie; expires=3600; path=/tpfnew"; 
window.location="index.php";

}
else{

window.location="reject.html";
}

}
else if (a){window.location="reject2.html";}

        // window.location="welcome.php";
                    //alert(x+"is the "+age);
                    //alert(age);

            }}

        }else{alert("please select your Date of Birth.")}

    }

    </script> 
```

提前thanx 这是按钮输入

```
<input type="button" onclick="CalculateAge();" value="Submit" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T08:56:55.893

将它用于一件事“提交”或函数调用。如果您从按钮单击调用CalculateAge() 函数，然后手动执行提交操作，您可以同时执行这两项操作。喜欢

```
function CalculateAge(){
  //DO your Stuff here
  jQuery.post(<your URL> , jQuery('#formid).serialize(),function(data){
      jQuery('#your result div').html(data);
  });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:22:06.020

这是 jsfiddle 为您提供的代码，并在行中进行了一些修改

[jsfiddle 演示你的代码](http://jsfiddle.net/sssonline2/fMw7t/2/)

`if (d != \'0\' && m != \'0\' && y != \'0\' ) {`修改的行删除了斜杠修改
的行`alert(\'Input date is incorrect!\');` 删除了斜杠

**因为这些行上的错误请参阅链接以查看修复，并且无需修改任何其他内容即可工作**

我已经在 Firefox 和 ie8 上测试过它们

# php - 用于检测已加载页面的 WordPress 功能？

> ID：10928638
> 
> 赞同：0
> 
> 时间：2012-06-07T08:53:46.450
> 
> 标签：php, wordpress

是否有可用于检测页面的 wordpress 功能？我想做的例子如下。

```
<?php if( is_FUNCTION_page('Contact Us') ) : ?>

...display this <div> / xhtml

<?php else: ?>

something else <div>

<?php endif;?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T08:59:01.360

检查[is_page()](http://codex.wordpress.org/Function_Reference/is_page)函数：

```
is_page();
// When any single Page is being displayed.

is_page(42);
// When Page 42 (ID) is being displayed.

is_page('Contact');
// When the Page with a post_title of "Contact" is being displayed.

is_page('about-me');
// When the Page with a post_name (slug) of "about-me" is being displayed.

is_page(array(42,'about-me','Contact'));
// Returns true when the Pages displayed is either post ID 42, or post_name "about-me", or post_title "Contact".  Note: the array ability was added at Version 2.5. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:06:00.213

是的。使用 Wordpress [is_page](http://codex.wordpress.org/Function_Reference/is_page)函数来做到这一点。

例子：

```
<?php if( is_page('Contact Us') ) : ?>

<div> Your If content goes here </div>

<?php else: ?>

<div> something else </div>

<?php endif;?> 
```

***笔记：***

**不能在循环内使用**

由于某些全局变量在循环期间被覆盖，is_page() 将不起作用。为了在循环之后使用它，您必须在循环之后调用 wp_reset_query()。

# php - yii：只是试图使用表单生成器显示一个无辜的表单

> ID：10928640
> 
> 赞同：1
> 
> 时间：2012-06-07T08:53:47.313
> 
> 标签：php, yii, formbuilder, yii-cformmodel, yii-cform

我只是想[使用表单生成器](http://www.yiiframework.com/doc/guide/1.1/en/form.builder#creating-a-simple-form)显示表单，但未显示字段。这是代码：

注册.php

```
entered here
<div class="form">
   <?php echo $form?>
</div> 
```

注册表格.php

```
class RegisterForm extends CFormModel {

    public $name;
} 
```

MyController.php

```
public function actionRegister()
{   
    $model = new RegisterForm();

    $config=array(
            'elements'=>array(
                'name'=>array(
                    'type'=>'text',
                    ),  
                ),  
            );  

    $form = new CForm($config, $model);

    $this->render('register', array('form' => $form));
 } 
```

**编辑1：**

我错过了 RegisterForm.php 中的规则。

```
public function rules()
{   
    return array(
        array('name', 'required'),
    );  
} 
```

所以，规则是强制性的？？？无论如何，我也有兴趣分别显示字段，所以我尝试了这个：

```
<div class="form">
<?php echo CHtml::beginForm(); ?>
     <?php echo CHtml::activeTextField($form,'name') ?>
     <?php echo CHtml::endForm(); ?>
</div> 
```

但我收到此错误：

```
CForm and its behaviors do not have a method or closure named "getValidators".

/home/javiergarcia/programacion/libs/yii/framework/base/CComponent.php(266)

254     public function __call($name,$parameters)
255     {
256         if($this->_m!==null)
257         {
258             foreach($this->_m as $object)
259             {
260                 if($object->getEnabled() && method_exists($object,$name))
261                     return call_user_func_array(array($object,$name),$parameters);
262             }
263         }
264         if(class_exists('Closure', false) && $this->canGetProperty($name) && $this->$name instanceof Closure)
265             return call_user_func_array($this->$name, $parameters);
266         throw new CException(Yii::t('yii','{class} and its behaviors do not have a method or closure named "{name}".',
267             array('{class}'=>get_class($this), '{name}'=>$name)));
268     } 
```

**编辑2：**

在 dInGd0nG 的评论之后：

```
object(CForm)#35 (17) {
  ["title"]=>
  NULL
  ["description"]=>
  NULL
  ["method"]=>
  string(4) "post"
  ["action"]=>
  string(0) ""
  ["inputElementClass"]=>
  string(17) "CFormInputElement"
  ["buttonElementClass"]=>
  string(18) "CFormButtonElement"
  ["attributes"]=>
  array(0) {
  }
  ["showErrorSummary"]=>
  bool(false)
  ["activeForm"]=>
  array(1) {
    ["class"]=>
    string(11) "CActiveForm"
  }
  ["_model":"CForm":private]=>
  object(my-firm\web\models\forms\RegisterOrganizationForm)#34 (9) {
    ["organization_name"]=>
    NULL
    ["email"]=>
    NULL
    ["password"]=>
    NULL
    ["repeatPassword"]=>
    NULL
    ["_errors":"CModel":private]=>
    array(0) {
    }
    ["_validators":"CModel":private]=>
    NULL
    ["_scenario":"CModel":private]=>
    string(0) ""
    ["_e":"CComponent":private]=>
    NULL
    ["_m":"CComponent":private]=>
    NULL
  }
  ["_elements":"CForm":private]=>
  object(CFormElementCollection)#36 (6) {
    ["_form":"CFormElementCollection":private]=>
    *RECURSION*
    ["_forButtons":"CFormElementCollection":private]=>
    bool(false)
    ["_d":"CMap":private]=>
    array(1) {
      ["organization_name"]=>
      object(CFormInputElement)#37 (15) {
        ["type"]=>
        string(4) "text"
        ["name"]=>
        string(17) "organization_name"
        ["hint"]=>
        NULL
        ["items"]=>
        array(0) {
        }
        ["errorOptions"]=>
        array(0) {
        }
        ["enableAjaxValidation"]=>
        bool(true)
        ["enableClientValidation"]=>
        bool(true)
        ["layout"]=>
        string(30) "{label}
{input}
{hint}
{error}"
        ["_label":"CFormInputElement":private]=>
        NULL
        ["_required":"CFormInputElement":private]=>
        NULL
        ["attributes"]=>
        array(0) {
        }
        ["_parent":"CFormElement":private]=>
        *RECURSION*
        ["_visible":"CFormElement":private]=>
        NULL
        ["_e":"CComponent":private]=>
        NULL
        ["_m":"CComponent":private]=>
        NULL
      }
    }
    ["_r":"CMap":private]=>
    bool(false)
    ["_e":"CComponent":private]=>
    NULL
    ["_m":"CComponent":private]=>
    NULL
  }
  ["_buttons":"CForm":private]=>
  NULL
  ["_activeForm":"CForm":private]=>
  NULL
  ["_parent":"CFormElement":private]=>
  object(SiteController)#24 (19) {
    ["layout"]=>
    string(14) "//layouts/main"
    ["menu"]=>
    array(0) {
    }
    ["breadcrumbs"]=>
    array(0) {
    }
    ["baseUrl"]=>
    string(15) "//my-firm.local"
    ["assetsUrl"]=>
    string(16) "/assets/e876fe71"
    ["bodyClass"]=>
    string(9) "sidebar-3"
    ["_viewVars":"my-firm\core\Controller":private]=>
    array(2) {
      ["model"]=>
      object(my-firm\web\models\forms\LoginForm)#31 (9) {
        ["email"]=>
        NULL
        ["pass"]=>
        NULL
        ["rememberMe"]=>
        NULL
        ["_identity":"my-firm\web\models\forms\LoginForm":private]=>
        NULL
        ["_errors":"CModel":private]=>
        array(0) {
        }
        ["_validators":"CModel":private]=>
        NULL
        ["_scenario":"CModel":private]=>
        string(0) ""
        ["_e":"CComponent":private]=>
        NULL
        ["_m":"CComponent":private]=>
        NULL
      }
      ["linkSchools"]=>
      string(39) "https://my-firm.local/escoles/espana/76"
    }
    ["defaultAction"]=>
    string(5) "index"
    ["_id":"CController":private]=>
    string(4) "site"
    ["_action":"CController":private]=>
    object(CInlineAction)#32 (4) {
      ["_id":"CAction":private]=>
      string(20) "RegisterOrganization"
      ["_controller":"CAction":private]=>
      *RECURSION*
      ["_e":"CComponent":private]=>
      NULL
      ["_m":"CComponent":private]=>
      NULL
    }
    ["_pageTitle":"CController":private]=>
    NULL
    ["_cachingStack":"CController":private]=>
    NULL
    ["_clips":"CController":private]=>
    NULL
    ["_dynamicOutput":"CController":private]=>
    NULL
    ["_pageStates":"CController":private]=>
    NULL
    ["_module":"CController":private]=>
    NULL
    ["_widgetStack":"CBaseController":private]=>
    array(0) {
    }
    ["_e":"CComponent":private]=>
    NULL
    ["_m":"CComponent":private]=>
    NULL
  }
  ["_visible":"CFormElement":private]=>
  NULL
  ["_e":"CComponent":private]=>
  NULL
  ["_m":"CComponent":private]=>
  NULL
} 
```

哈维尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:54:49.837

要以不同的方式呈现表单，您可以使用以下内容：

```
<div class="form">
 <?php echo $form->renderBegin(); ?>
 <?php echo $form['name']; ?>
 <?php echo $form->renderEnd(); ?>
</div> 
```

您可以使用主动助手，但它们需要 CModel 派生类，而不是 CForm 派生类，因此您需要这样做（[通过 CForm 访问模型](http://www.yiiframework.com/doc/api/1.1/CForm#model-detail "http://www.yiiframework.com/doc/api/1.1/CForm#model-detail")）：

```
<div class="form">
 <?php echo CHtml::beginForm(); ?>
 <?php echo CHtml::activeTextField($form->model,'name') ?>
 <?php echo CHtml::endForm(); ?>
</div> 
```

# playframework - 在 Play Framework 中转义引号的正确位置在哪里？

> ID：10928642
> 
> 赞同：3
> 
> 时间：2012-06-07T08:53:59.497
> 
> 标签：playframework, escaping, playframework-1.x

我有以下流程：

1.  向用户呈现表单。
2.  他填写表单字段，并提交给控制器，控制器将其保存到数据库
3.  在另一个页面上，控制器从数据库中获取此记录，并将其传递给视图
4.  视图将其捕获为 javascript 变量：`var foo = '${user.bar}';`

现在，如果用户在表单中输入此字符串：

```
I have a quote - ' - very dangerous 
```

然后引用一直传递到数据库并返回，并导致**损坏**的javascript 语句：

```
var foo = 'I have a quote - ' - very dangerous'; 
```

逃离这个角色的最佳地点是什么，如何逃脱？我不想为每个模板的使用手动执行它，这很乏味且容易出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T08:59:04.753

数据就是数据。如果它包含一个报价，它就包含一个报价，并且它必须以这种方式存储在数据库中。使用此 String aa JavaScript 字符串文字时，您需要转义引号。

您可以使用 Apache commons-lang`StringEscapeUtils.escapeECMAScript()`方法来执行此操作，或者您可以将 Java 对象编码为 JSON 字符串，并在 JavaScript 代码中解析 JSON 字符串。

# jquery - 从 jquery 中的页面获取文档上的锚标记的值，而不是使用 id attr

> ID：10928643
> 
> 赞同：-1
> 
> 时间：2012-06-07T08:54:04.190
> 
> 标签：jquery

我想从文档就绪函数上的锚标记中获取一个值，并且我不想使用 id attr。建议一些方法来使用名称 attr 从使用 jquery 的锚标记准备好的文档上检索值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:57:13.817

使用[`attribute-equals`](http://api.jquery.com/attribute-equals-selector/)选择器，如下所示：

```
$('a[name="whatever"]') 
```

一旦你选择了相关的锚元素，你就可以调用任何你需要的 jQuery 函数来检索所需的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T08:57:39.823

您可以使用 jQuery attr() 获取任何属性的值，例如：

```
$('a').attr('name'); 
```

我建议使用 HTML5 的数据属性而不是名称：

```
<a href="#" data-some-attribute="somevalue"></a>

$('a').data('some-attribute'); 
```

# java - Java JNA C++ 对方法映射

> ID：10928645
> 
> 赞同：0
> 
> 时间：2012-06-07T08:54:04.873
> 
> 标签：java, c++, dll, jna

我有一个简单的 dll，它公开了一个返回类型的方法

```
std::pair<int, string> 
```

我正在使用 JNA，我想知道如何使用 Structure 基类映射对结构。可以做类似`Pair<T,E> extends Structure`的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:31:35.937

简短的回答是否定的，您不能将 C++ 模板映射到 Java 泛型。虽然它们看起来很相似，但它们是完全不同的东西。

稍长一点的答案是肯定的，你可以映射它，虽然这个过程是手动的。如果它打算在单个平台上运行，那么这可能是值得的。

首先确定您的数据对的数据偏移量，然后创建一个 JNA 结构，其中的字段位于与您的数据对数据偏移量相对应的偏移量处。

```
// C++
typedef std::pair<int,string> mypair;
mypair* p = (mypair *)0;
offset_t PADDING1 = (char*)&p->first - (char*)p;
offset_t PADDING2 = (char*)&p->second - (char *)p;

// Java
class MyPair extends Structure {
    public byte[] = byte[PADDING1]; // omit if PADDING1 is zero
    public first;
    public byte[] = byte[PADDING2]; // omit if PADDING2 is zero
    public second;
} 
```

# assembly - ARM 处理器上的 BP 寄存器（帧指针）的等价物是什么？

> ID：10928646
> 
> 赞同：6
> 
> 时间：2012-06-07T08:54:07.667
> 
> 标签：assembly, arm, calling-convention

在 intel 平台上，`BP`用于指向堆栈帧的开头并访问参数`[bp+0x??]`和局部变量`[bp-0x??]`。

ARM中使用哪个寄存器？或者，是否仅基于 SP 的寻址？

[我没有基础架构可以编译和反汇编自己看。提到 AAPCS 也没有帮助我]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T09:14:38.087

What you are looking for is the Frame Pointer. Generally, `R7` acts as the frame pointer in THUMB mode and `R11` acts as the frame pointer in ARM mode. But it is under the discretion of the OS to change this convention if it wishes to.

Read [here](http://msdn.microsoft.com/en-us/library/ms253599%28v=vs.80%29.aspx)

# object - 将具有未知值类型的对象数组转换为双精度

> ID：10928649
> 
> 赞同：0
> 
> 时间：2012-06-07T08:54:12.767
> 
> 标签：object, types, casting, double

我正在编写一个四分位数函数，但我遇到了这个问题。我正在拉一个类型和长度未知的数组，但我需要将其转换为双精度。

这是我当前的代码，它编译但抛出了一个无效的强制转换异常：

double[] array1 = array.Cast().ToArray();

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:26:12.487

最简单的方法应该是：

```
double[] array1 = array.OfType<double>().ToArray(); 
```

您需要添加`using System.Linq;`到文件顶部才能编译。

# javascript - 当我想要一个链接无处链接并使用它来运行脚本时，使用什么作为“href”属性？

> ID：10928650
> 
> 赞同：0
> 
> 时间：2012-06-07T08:54:14.113
> 
> 标签：javascript, html

我以前是这样做`href="#"`的，但有没有其他方法？

因为单击此类链接有时可以将用户转到所查看页面的前面，我想通过单击链接来加载一些脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:22:25.913

继续使用`<a href="#">Click</a>`，但使用一些 Javascript/jQuery 来防止页面跳转：

```
$('a').click(function() {
    // do whatever
    return false;
} 
```

return false 行将阻止浏览器跟随链接，在这种情况下，这将阻止它跳转到页面顶部。

您应该将链接保留为`<a>`标签，而不是使用`span`or `div`，因为这更具语义（即用户/爬虫将知道它应该做某事，因为它是一个链接）。

您还应该避免使用内联 Javascript（即`onclick="doSomething()"`），因为如果您想改变行为，这将是一个巨大的痛苦，并且您还希望使您的 Javascript 尽可能[不显眼](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:01:51.363

是的，href="#" 让你滚动......

你可以试试：

```
<a href="javascript:void(0);" onclick="doIt(); return false;">Woho</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T08:57:05.110

为什么不使用`onclick`

```
<a href="#" onclick="doMyThing() return false;" /> 
```

[关于 SO， href-tag-for-javascript-links-or-javascriptvoid0 的](https://stackoverflow.com/questions/134845/href-tag-for-javascript-links-or-javascriptvoid0)类似讨论

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T08:59:05.120

`good markup`如果您想在同一页面上进行活动。所以，如果你使用它`div or span`并在上面定义你的，那就更好`click event`了。

```
div{
 color:red;
} 
```

**JS**

```
$('div').click{function(

)}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T09:02:03.603

```
href="javascript:void(0)" 
```

谢谢亚尼罗[_](https://stackoverflow.com/users/1021890/yaniro)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T09:02:06.320

正如@Yaniro 评论的那样，您可以使用 href="javascript:void(0)"，原因是：

> JavaScript 无效 0 解释
> 
> Web 浏览器将尝试获取任何用作 URL 的内容并加载它。我们可以在不加载新页面的情况下使用 JavaScript Alert 语句的唯一原因是因为 alert 是一个返回空值的函数。这意味着当浏览器尝试加载新页面时，它会看到 null 并且没有要加载的内容。
> 
> 这里要注意的重要一点是，如果您确实使用 JavaScript 语句作为返回值的 URL，浏览器将尝试加载页面。为防止这种不必要的操作，您需要在此类语句上使用 void 函数，该函数将始终返回 null 并且永远不会加载新页面。

摘自：[JavaScript Void 0 解释](http://www.tizag.com/javascriptT/javascriptvoid.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T09:25:45.653

您可以简单地`onclick`在任何元素中使用该属性，例如

```
<span onclick="foo()">Do something</span> 
```

使用习惯`href="#"`是早期浏览器不`onclick`普遍支持的保留，仅用于链接（在技术意义上：具有属性的`a`元素）。`href`那是桥下的水，但旧习惯往往不会消失，特别是如果人们只是在不知道原因的情况下采用它们。

而不是`span`，您也可以使用`a`。没有任何`href`属性，`a`元素就没有特殊含义。

根据非破坏性原则，元素应该使用 JavaScript 动态生成，而不是作为页面的静态部分（因为禁用 JavaScript 时，它只会坐在那里，给人一种相关的印象，但不做任何事情）。

# extjs-mvc - 如何从 extjs 4.1 中网格中的 actioncolumn 渲染器调用控制器

> ID：10928654
> 
> 赞同：1
> 
> 时间：2012-06-07T08:54:27.543
> 
> 标签：extjs-mvc, extjs4.1

在 extjs 4.1 中，我希望在我的网格中有一个按钮。

我见过一些方法，例如使用渲染器或操作列。我已经走到这一步了。

下一步是我需要在我的控制器中捕获这个事件。

我尝试添加以下内容，但没有被调用

```
'#cutterGrid .editRow':{
                click:this.onCutterSelect
            }, 
```

我需要获取选定的记录。

- 更新

```
 {
                        xtype:'actioncolumn',
                        width:20,
                        cls: 'rowEdit',
                        items: [{
                            icon: '/images/icons/layout_edit.png', 
                            tooltip: 'Edit'
                        }]
                    }, 
```

在我的控制器中

```
'#cutterGrid actioncolumn':{
                click:this.onCutterSelect
            }, 
```

和调用的函数

```
onCutterSelect : function(gridview, el, rowIndex, colIndex, e, rec, rowEl) {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:38:34.233

看看 Mitchell Simoens 的博客：

[ActionColumn 和 MVC](https://mitchellsimoens.com/actioncolumn-and-mvc/)

> ...所以我们选择触发自定义事件调用'itemclick'，首先我们需要决定我们想要触发这个事件的参数类型。处理程序的范围是我们要触发事件的 ActionColumn 的范围。我们可能想要 ActionColumn、grid、rowIndex、colIndex、record、eventObject、节点点击，因为我们正在触发事件，我们可以让自己变得容易，并放置一个自定义参数来告诉我们应该采取的行动。让我们看看代码...

# sql - 在一个shell脚本上同时执行两个查询

> ID：10928659
> 
> 赞同：1
> 
> 时间：2012-06-06T15:19:13.097
> 
> 标签：sql, oracle, shell

我有一个 shell 脚本，我必须在其中执行两个查询（在不同的数据库上），将它们的结果假脱机到文本文件，最后调用一个 C++ 程序来处理这些文本文件上的信息。像这样的东西：

```
sqlplus user1/pw1@database1 @query1.sql
sqlplus user2/pw2@database2 @query2.sql

./process_db_output 
```

这两个查询都需要一些时间来执行。其中一个可能需要 10 分钟，而另一个通常更快。我想要做的是同时执行它们，当两者都完成后，调用处理实用程序。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T15:28:18.357

用于`&`后台查询，然后`wait`等待所有子进程完成，然后是处理结果的 c++ 事物。代码：

```
 #!/bin/bash
 # first calling
 sqlplus user1/pw1@database1 @query1.sql &
 sqlplus user2/pw2@database2 @query2.sql &

 #now waiting
 wait
 #done waiting
./process_db_output 
```

# android - Android中的余弦正切对数等数学函数的输入

> ID：10928664
> 
> 赞同：4
> 
> 时间：2012-06-07T08:55:15.137
> 
> 标签：android, android-widget

我正在尝试在 Android 中制作一个小型数学应用程序，但我发现了一个小问题。我的问题是，我希望我的应用程序能够正确解释 EditText 的内容，以便它不仅可以将数字作为输入，还可以将数学函数作为输入，例如正弦余弦正切对数等。我是不是专业的程序员，我以前从未发现过此类问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:17:49.547

你可以试试这个：

```
EditText et = (EditText)additem.findViewById(R.id.edittext);
String item = et.getText().toString();
String splitter[] = item.split("\\d+");
if(splitter[0].equals("sin"))
   // perform sine
//similarly for other functions 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:24:02.583

您也可以尝试使用 java formel 解析器。有很多用于java的。例如：[http ://www.speqmath.com/tutorials/expression_parser_java/index.html](http://www.speqmath.com/tutorials/expression_parser_java/index.html)

这可能看起来像这样：

```
Parser prs = new Parser();
EditText et = (EditText)findViewById(R.id.edittext);
String expr = et.getText().toString();
String result = prs.parse(expr); 
```

要安装它，您必须下载： [http ://www.speqmath.com/tutorials/expression_parser_java/html/files/expression_parser_java.zip](http://www.speqmath.com/tutorials/expression_parser_java/html/files/expression_parser_java.zip)

然后你必须将java文件复制到eclipse中的源文件夹中。

你是这样做的吗？如果是这样，您可以发布例外情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:31:04.470

你需要一个解析器。

您可以遵循 frugi 的建议并使用 java 库，也可以实现自己的库。

一个适用于这个问题的简单解析器是[Shutting Yard 算法。](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)

实现自己的解析器的优点：

*   更多地控制语法和表达。
*   好的经历。
*   乐趣。

缺点：

*   比 3rd 方库需要更多时间来准备（显然）。
*   可能是越野车。

我建议你自己写！

# c# - 检查 double.ToString()

> ID：10928668
> 
> 赞同：4
> 
> 时间：2012-06-07T08:55:34.687
> 
> 标签：c#, .net, clr, double, tostring

作为一个关于优化内存转换为字符串的问题的后续行动（参见[c# double to character array or alternative](https://stackoverflow.com/questions/10914105/c-sharp-double-to-character-array-or-alternative/10914673#10914673)），我想看看如何在 .NET 中实现 double.ToString()。当我使用 ildasm 或 DotPeek 时，我会得到：

```
[SecurityCritical]
[MethodImpl(MethodImplOptions.InternalCall)]
public static string FormatDouble(double value, string format, NumberFormatInfo info); 
```

或者

```
IL_0008:  call string System.Number::FormatDouble(float64,
                                                  string,
                                                  class System.Globalization.NumberFormatInfo) 
```

并且无法进一步钻取。我想如果我的理解是正确的，那是因为这是对 CLR 的调用。我想知道有没有简单的方法来找出实现是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:00:54.593

看看单声道源代码怎么样？Mono 只需使用 IL 来完成整个工作，而无需任何 C 代码。

```
mcs/class/corlib/System/Double.cs
mcs/class/corlib/System/NumberFormatter.cs 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-11T07:34:26.177

由于 .NET Core 现在是开源的，因此可以更新此问题的答案。[MethodImplOptions.InternalCall](https://github.com/dotnet/coreclr/blob/master/Documentation/botr/mscorlib.md#calling-from-managed-to-native-code)表示`FormatDouble`是一个[FCall](https://github.com/dotnet/coreclr/blob/master/Documentation/botr/mscorlib.md#calling-from-managed-to-native-code)，它是一种与本机实现通信的机制。`FormatDouble` [您可以在此处](https://github.com/dotnet/coreclr/blob/master/src/classlibnative/bcltype/number.cpp#L2085)找到本机实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:00:23.433

我认为 WinDbg 会有所帮助 - 您是否检查了单声道的实现？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-13T08:57:16.860

在 .NET 5 中，`FormatDouble`现在用 C# 实现，源代码可在[dotnet/runtime 存储库](https://github.com/dotnet/runtime/blob/066a24c7493cb894bff1e4532b770a9c1f9c3f56/src/libraries/System.Private.CoreLib/src/System/Number.Formatting.cs#L520)中找到。

# java - android：将微调器绑定到自定义列表

> ID：10928669
> 
> 赞同：1
> 
> 时间：2012-06-07T08:55:36.993
> 
> 标签：java, android, android-spinner

我正在尝试显示一个`Spinner`列表供用户选择，然后将选择绑定到另一个`array`. 保存用户选择的值`surfaceCode`以供以后使用。`Spinner`数组`R.array.surface_option`和要绑定的数组对齐`R.array.surface_code`并保存在xml中。

这是我的代码...

```
spinnerSurface = (Spinner) findViewById(R.id.spinnerSurface);
ArrayAdapter<CharSequence> adapterSurface = ArrayAdapter.createFromResource(this, R.array.surface_option, android.R.layout.simple_spinner_item);
adapterSurface.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinnerSurface.setAdapter(adapterSurface);

spinnerSurface.setOnItemSelectedListener(new Spinner.OnItemSelectedListener() { 
    public void onItemSelected(AdapterView<?> parent, View v, int position, long id) { 
        TextView tx = (TextView)v; 
        Log.i("\n\nid",String.valueOf(tx.getText()));
        String surfaceCode = getResources().getStringArray(R.array.surface_code)[spinnerSurface.getSelectedItemPosition()];
    }

    public void onNothingSelected(AdapterView<?> arg0) {
    } 
});

Log.d("code outside", surfaceCode.trim() + " is equal to SW: " + surfaceCode.trim().equals("SW")); 
```

出现`surfaceCode`错误`process stopped unexpectedly`，可能是因为它返回`null`。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:05:46.557

surfaceCode 在最后一行代码中可以为空，因为匿名侦听器中的代码仅在进行选择时执行。

这将导致最后一行出现 NullPointerException。

即使 onItemSelected() 被调用，它也不会设置成员surfaceCode，因为您已经声明了一个同名的局部变量来遮蔽它。

您应该删除surfaceCode 之前的“String”并将日志语句放在onItemSelected() 中。

# android - 适用于所有三星 Galaxy Tabs 的应用程序，如何制作可绘制和布局

> ID：10928673
> 
> 赞同：1
> 
> 时间：2012-06-07T08:55:53.453
> 
> 标签：android, android-layout, samsung-mobile, galaxy-tab

我有**Galaxy tab 10.1 英寸**，我已经制作了应用程序并对其进行了测试，它工作正常。

现在我的问题是这个应用程序是否适用于 Galaxy 7 英寸、Galaxy 7.7 英寸、Galaxy Note 和 Galaxy 8.9 英寸

以下是这些设备的详细信息：

**（我的设备）Galaxy tab 10.1 英寸 -->** 800 x 1280 像素，10.1 英寸（~149 ppi 像素密度）

**Galaxy 8.9 英寸**--> 800 x 1280 像素，8.9 英寸（约 170 ppi 像素密度）

**Galaxy 7.7 英寸**--> 800 x 1280 像素，7.7 英寸（~196 ppi 像素密度）

**Galaxy 7 英寸**--> 600 x 1024 像素，7.0 英寸（~170 ppi 像素密度）

**Galaxy Note** --> 800 x 1280 像素，5.3 英寸（~285 ppi 像素密度）

请告诉我必须为哪个设备再次进行布局以及可绘制和布局的文件夹名称是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T06:55:34.773

对于 Galaxy 7 英寸 --> 600 x 1024 像素，7.0 英寸（约 170 ppi 像素密度），您可以制作名为“layout-large-mdpi-1024x600”的布局文件夹....但对于其他设备我也无法排序正确

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:00:54.933

只要您使用相对布局机制，就可以了。如果您想自己测试它，您可以在使用不同屏幕尺寸的模拟器中启动您的应用程序。还有一个 Galaxy Tab 模拟器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:02:55.770

阅读 [多屏幕分辨率支持](http://developer.android.com/guide/practices/screens_support.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T07:17:41.887

自己找到答案：为了支持最大的设备，我们可以尝试制作适合所有设备的总体布局，可能会有一些小的权衡，但可以接受。我们可以尽量使用Relative Layout来做这样的布局，如果出现无法处理多设备支持的情况，我们可以尝试在运行时用代码处理，但是以这样的方式运行所有设备。

完整答案在这里 [720*1280 设备的布局](https://stackoverflow.com/questions/13660452/layout-for-7201280-devices/13660963#13660963)

# objective-c - 将两个 iOS 应用程序合二为一

> ID：10928677
> 
> 赞同：3
> 
> 时间：2012-06-07T08:56:18.933
> 
> 标签：objective-c, ios, xcode, app-store

我有一种情况，两家不同的公司希望将他们的 iOS 应用程序“加入”在一起以形成一个应用程序（因此只需要一个应用程序商店下载）。这些应用程序具有完全独立的代码库。这些公司正在寻求合作，但他们并不真正希望彼此看到彼此的代码。

对代码进行一定程度的摆弄是可以接受的。

有没有办法“打包”代码库或二进制文件，以便应用程序 1 可以合并到应用程序 2 中，而应用程序 2 开发人员无法访问应用程序 1 代码库？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:04:31.877

当然，将一个（或两个）应用程序制作成可以从另一个应用程序调用的库或框架（以实例化和打开一个 XIB 文件和视图控制器，它是“其他”应用程序的父视图）。

然后，源代码可以保持独立，并且从一个部分到另一个部分。

但是您还必须制定解决方案来处理在两个应用程序中实现的任何应用程序委托 (UIApplicationDelegate) 方法。祝你好运！

# objective-c - 可以编译 Objective-C 程序以使 int 为 64 位吗？

> ID：10928681
> 
> 赞同：2
> 
> 时间：2012-06-07T08:56:30.337
> 
> 标签：objective-c, c, xcode

如果我没记错的话，在某些机器上`int`是 16 位的，而当我们移动到 32 位平台时，则`int`是 32 位。

既然 Snow Leopard 和 Lion 都是 64 位的，那么 C 或 Objective-C 程序可以在 Xcode 上编译成`int`64 位吗？（并且“%d”或“%i”也将采用 64 位整数）。还是`int`出于兼容性原因保留为 32 位？

（如果使用 64 位`int`，它会比 32 位更快，因为 64 位是本机的吗？）

**更新：**我刚刚发现`sizeof(NSInteger)`Xcode 在 Lion 上的控制台应用程序中打印的是否为 8（它与 typedef 一样长），如果它在 iOS 5.1.1 上，那么它是 4（typedef as int）。 `sizeof(int)`在两个平台上都是 4。所以它看起来在某种程度上，`int`之前从 16 位移动到 32 位，但现在我们确实希望将其停止在 32 位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:38:41.653

在 Apple 采用的**LP64**数据模型下，int 始终为 32 位。一些编译器可能允许您改用**ILP64**数据模型，如此处的评论中[所述](https://stackoverflow.com/a/799923/248062)。但是，您可能会破坏与预编译库的兼容性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:12:17.170

> 可以在 Xcode 上编译 C 或 Objective-C 程序以使 int 为 64 位吗？

我一直找不到可以使`int`64 位宽的 clang 选项。事实上，平台标题似乎认为它不可能。此外，您将无法使用任何以 an`int`作为参数的平台库函数/方法（包括在格式字符串`printf()`中指定类型的内容）。`int`

> 如果使用 64 位 int，它会比 32 位更快，因为 64 位是本机的吗？

我看不出为什么使用 32 位`ints`会比使用 64 位慢`ints`。事实上，它们可能会更快，因为您可以在缓存中容纳两倍的它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-07T14:55:59.373

要获得 int = 64 位的编译器，您必须下载 Clang 源代码并手动修改它。因此，对于现有的 gcc 或 Clang 编译器，没有办法。

但是 int 是 32 位有一个很好的理由：出于兼容性原因，许多代码需要具有 8 位、16 位、32 位和 64 位项目的能力。C 中可用的类型有 char、short、int、long 和 long long。您不希望 long 或 long long 小于 int。如果 int = 64 位，则对于三种尺寸（8、16 和 32 位）只有两种类型（char 和 short），因此您必须放弃其中一种。

# java - 如何使用 Morphia 获取 MongoDB 的所有非结构化字段

> ID：10928683
> 
> 赞同：1
> 
> 时间：2012-06-07T08:56:36.730
> 
> 标签：java, mongodb, morphia

我有一些数据存储在 MongoDb 中，目前我不想映射到 POJO，我们如何在单个映射中获取文档的所有非结构化字段。

我发现这个链接
[http://www.carfey.com/blog/using-mongodb-with-morphia/](http://www.carfey.com/blog/using-mongodb-with-morphia/)
说你可以使用映射所有非结构化字段

```
// .. our base attributes here
private Map<String, Object> attributes 
```

但它不起作用，因为我连续将其设为空，我检查了 Morphia 代码，它在 Morphia 实体类字段上进行迭代，所以我们如何才能在属性 Map 中获取所有 DBObject 未映射的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:54:38.480

出于兴趣：你为什么要这样做？无论如何，您都需要将要在其中添加数据的类和一个字段映射到 Morphia。还是我误会你了？

怎么做：您需要注释要存储在地图中的所有字段，并在您的自定义和方法`@Transient`中添加/加载它们。`@PrePersist``@PostLoad`

# c++ - 最佳实践：使用命名空间还是重新打开命名空间？

> ID：10928686
> 
> 赞同：14
> 
> 时间：2012-06-07T08:56:54.910
> 
> 标签：c++, coding-style

假设我在头文件中声明了一个函数（或类，无关紧要），它是命名空间 foo 的一部分：

```
namespace foo
{
    void bar();
    …
} 
```

很长一段时间以来，当我在 cpp 文件中定义函数时，我一直在重新打开命名空间：

```
namespace foo
{
void bar()
{
    doSomething();
    …
}
} 
```

那是因为我是通过这种方式学习它的，并且它被用于我正在从事的项目中。直到最近，当我偶然发现一个使用 using 指令的项目时，我才真正考虑过它：

```
using namespace foo;

void bar()
{
    doSomething();
    …
} 
```

最后还有一个使用全名的选项。我觉得这很乏味，尤其是当涉及到很多成员的课程时。在我看来，当文件的所有内容都是一个命名空间的一部分时，它没有多大意义。

```
void foo::bar()
{
    doSomething();
    …
} 
```

所以我的问题是应该首选哪一个，为什么？特别是关于前两个选项（使用指令与重新打开命名空间）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T09:08:06.183

我认为最干净的方法是重新打开命名空间，并且我有支持它的论据：

*   使用第二个选项，使用`using`指令，不清楚您是否正在该命名空间中实现方法。你也可以实现一个使用命名空间中的东西的自由函数。
*   第三个选项通常用于实现类成员函数。如果您直接查看该`cpp`文件，则不清楚您正在从命名空间实现函数，除非您知道该命名空间存在。首先想到的是您正在实现一个类成员函数。
*   第一个是最清楚的。您打开命名空间并在其中定义一个函数。该函数是命名空间的一部分，这就是实现。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T09:14:52.977

尽管这`using namespace`是最懒惰的（因此也是最诱人的）解决方案，但它通常不是一个好主意。除了 Luchian 所说的函数声明模棱两可（项目的新手不知道这是独立函数还是命名空间中的一个），以及您稍后可能会在命名空间中引入一个名称的事实，与您的一个冲突现在使用，我有另一个理由建议使用第三种方法。

使用第三种方法，您可以使您的代码更加**一致**。如果`A`在里面`B`，你总是用`A::B`. 如果`A`是一个类和类`B`中的一个函数，你会写`type A::B(args)`. 如果`A`是一个类和`B`一个静态成员，您将再次编写`type A::B = value`. now`A`是一个命名空间，但它仍然是同一个概念：`B`在内部定义`A`，因此再次使用更加一致`A::B`。

（如果你的编辑器是 ViM，那么搜索能力还有一个额外的好处）

# oracle-apex - 如何以 APEX4.1 表格形式创建动态操作

> ID：10928689
> 
> 赞同：0
> 
> 时间：2012-06-07T08:57:11.833
> 
> 标签：oracle-apex

我正在使用 Apex4.1，

在我的应用程序中，我有一个表格形式，其中包含以下字段，

```
 Emp_id
     Emp_name
     Dept_id 
```

这`Emp_id`是可更新列，它是一个选择列表 LOV 和

`Emp_name`是一个可更新的列，

这里我需要的是，

如果我`Emp_id`从 LOV 中选择，则`Emp_Name`应该根据在中选择的值自动存储`EMP_ID`，

在表格形式中，我无法像在普通形式中创建动态操作一样，任何人都可以帮助我解决这个问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:32:39.753

APEX 当​​前不提供对表格表单项的动态操作。希望这可以在 APEX 4.2 中解决，但[方向声明](http://www.oracle.com/technetwork/developer-tools/apex/application-express/apex-sod-087560.html)没有明确说明。

所以现在如果你需要这样做，你将不得不编写自己的 Javascript，使用表格表单项的唯一 ID 来操作它们（ID 看起来像“fcc_rrrr”，其中“cc”是列号，“rrrr”是行号）。有关使用这些的示例 Javascript 代码，请参阅[此 SO q&q](https://stackoverflow.com/questions/3282252/how-to-identify-the-current-row-in-an-apex-tabular-form)。

您需要编写的 Javascript 有点令人生畏（对于初学者来说），但需要注意的一点是，在您的情况下，您可以通过将名称嵌入到 LOV 的返回值中来避免使用 AJAX 来获取员工姓名像这样的东西：

```
select emp_name d, emp_id||':'||emp_name r
from employee
order by 1 
```

这样，返回值将类似于 '123:John Smith'; 您的 Javascript 可以解析此字符串并提取“John Smith”并将其插入到同一行的 emp_name 项中。显然，您还需要解析此字符串以获得提交页面时更新数据库时需要的 emp_id 值。

# mysql - 是否可以在 SQL 中 SELECT * FROM a table WHERE column 1 = something 而不是 column_name = something

> ID：10928698
> 
> 赞同：5
> 
> 时间：2012-06-07T08:57:50.490
> 
> 标签：mysql, sql, select

我想`SELECT * FROM table`第一列等于一个变量。它假设我不知道列名。

我知道我可以做类似的事情

```
SELECT * FROM table WHERE column_id = 1 
```

但我无法比较数据。

我怎样才能做到这一点？

我找到了一些 T-SQL 解决方案，但我不感兴趣。

**更准确地说：**

我正在我的网站上开发一个管理面板，“超级”管理员可以直接修改数据库。为此，我可以选择一个表并编辑该表。但要做到这一点，我只使用了一个显示所有表的 PHP 脚本，我们可以选择一个，脚本会显示所选表中的所有行。之后，您选择一行，您将被重定向到问题所在的页面。这个页面可以接收任何只有一行的表，所以我想要`SELECT`这一行中包含的数据。

要理解的图像：
第一个显示表格。
第二个显示选定表的行。
第三个显示（通常）1行的数据，但在这张图片中我们可以看到很多行的数据。
[选择 http://imageshack.us/g/135/selecto.png](http://imageshack.us/g/135/selecto.png)

**我找到了一个解决方案：**

尝试解释：首先：我从发布的特定表格中选择了所有内容

```
 $query="SELECT * FROM ".$_POST['table']."";
    $result=mysql_query($query); 
```

第二：我将列名归因于变量（我不知道）

```
while($fields=mysql_fetch_array($result))
    {
        $col =  mysql_field_name($result,0);
        $nb++;
    } 
```

第三：我从`where $col = id`行的表中选择数据

```
$sql = "SELECT * FROM ".$_POST['table']." WHERE ".$col."=".$_GET['idRow']."";
$result1=mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-25T08:28:12.187

如果你知道有*多少*列，你可以在这里使用这个小技巧：

```
SELECT *
FROM (
  SELECT null x1, null x2, ..., null xn
  WHERE 1 = 0
  UNION ALL
  SELECT * FROM my_table
) t
WHERE t.x1 = something 
```

在 MySQL 以外的其他数据库中，重命名“未知”列会更简单，例如，在 PostgreSQL 中，您可以只重命名第一列，如下所示：

```
SELECT * FROM my_table t(x) WHERE x = something 
```

### 如果你对桌子一无所知

...您可以快速查询第`information_schema`一个：

```
SELECT column_name
FROM information_schema.columns
WHERE table_name = :my_table
AND ordinal_position = 1 
```

### SQL注入注意事项

请不要，不要这样做。曾经：

```
$query="SELECT * FROM ".$_POST['table'].""; 
```

[我最近写了一篇关于 SQL 注入的文章](http://blog.jooq.org/2013/11/05/using-sql-injection-vulnerabilities-to-dump-your-database/)。像您这样的每个漏洞都将允许任何脚本小子转储您的数据库，或者更糟。

解决方案是首先清理您的输入。理想情况下，您将维护一个允许的表字符串目录，将您的`$_POST`变量与那些进行比较，然后将预定义的表字符串连接到您的 SQL 语句中，而*不是*用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:04:47.857

在 PHP 中，您可以执行以下操作：

```
$col = 'users';
mysql_query("SELECT * FROM table WHERE $col = $something"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-16T03:08:27.357

我认为您可以使用它`SHOW CREATE TABLE table_name`来获取表的架构。之后，您应该已经知道每一列。

# .htaccess - .htaccess 使用参数重定向 url

> ID：10928704
> 
> 赞同：0
> 
> 时间：2012-06-07T08:58:17.107
> 
> 标签：.htaccess, redirect

如何重定向此网址：

```
http://www.indianastro.co.il/index.php?id=moon 
```

对此：

```
http://www.indianastro.co.il/?p=217 
```

通过 .htaccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T05:49:36.863

`moon`如果两个标识符（ => ）之间没有关系，`217`您可以使用[RewriteMap](http://httpd.apache.org/docs/trunk/rewrite/rewritemap.html)。基于文档中的示例：

```
RewriteMap oldsite2wordpress txt:/etc/apache2/oldsite2wordpress.txt
RewriteRule ^index.php?id=(.*) /?p=${oldsite2wordpress:$1|NOTFOUND} [PT] 
```

然后你定义映射`/etc/apache2/oldsite2wordpress.txt`

```
##
## oldsite2wordpress.txt - Maps old website IDs to WordPress IDs
##

moon 217
earth 87
sun 997
... 
```

# iphone - 对我的应用程序的大小感到困惑？

> ID：10928706
> 
> 赞同：2
> 
> 时间：2012-06-07T08:58:23.210
> 
> 标签：iphone, ios, xcode4, xcode4.3, appstore-approval

我对我的应用程序的大小有点困惑！文件夹和所有内容的大小为 25.9MB……在 Xcode 中存档后，它显示“估计 App Store 大小：49.8MB……有人知道这是为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:34:49.990

您是否正在为 armv6 和 armv7 进行编译（如果您想支持 iPhone 3G 等，您正在这样做）？

在这种情况下，您提交的 .xcarchive 将包含两个二进制文件，使其大两倍。根据您提到的尺寸，这似乎很有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:07:06.313

我遇到了与 xcode 4.3 相同的问题，因为我的应用程序说它会这样`45.8`，实际大小是`31.5`

# c# - 使用 .net 的 sybase 的 BCP

> ID：10928710
> 
> 赞同：0
> 
> 时间：2012-06-07T08:58:32.053
> 
> 标签：c#, sybase, bcp

是否可以从 .net 代码为 sybase 数据库运行 bcp 实用程序？

我想在我从文件中读取的数据库中插入大约 10000 行。因此，我想将文件中的数据转换为 bcp 可读格式，而不是进行需要大量时间的正常插入。

之后，我如何使用 .net 前端调用 sybase 数据库的 bcp 命令？

我正在使用窗口应用程序。

谢谢， 丹尼斯

谢谢，拒绝

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:05:01.837

[您可以使用Process.Start()](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.start.aspx)运行 bcp 实用程序

这是一个[例子](http://www.dotnetperls.com/process-start)。

# c# - iPhone 模拟器的 MonoTouch 编译器指令

> ID：10928711
> 
> 赞同：8
> 
> 时间：2012-06-07T08:58:55.170
> 
> 标签：c#, xamarin.ios, compiler-directives

有谁知道我在 MonoTouch 中使用的编译器指令来查看我是否在 iPhone 模拟器中运行？在任何地方都找不到任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T10:50:51.517

没有编译器指令（条件编译符号）来确定您是在 iPhone 模拟器还是在设备上运行。

但是，您可以使用以下代码在运行时确定它：

```
using ObjCRuntime;
static bool InSimulator ()
{
    return Runtime.Arch == Arch.SIMULATOR;
} 
```

这是从这里：[http ://docs.xamarin.com/ios/recipes/General/Projects/Environment_Checks](http://docs.xamarin.com/ios/recipes/General/Projects/Environment_Checks)

# zend-framework - Netbeans 中运行命令中的 Zend Framework 问题

> ID：10928713
> 
> 赞同：1
> 
> 时间：2012-06-07T08:59:03.463
> 
> 标签：zend-framework, netbeans

我正在尝试将 Zend 框架与 netbeans 一起使用。

我已经正确设置了所有内容，因为我可以使用 ZF 命令行创建项目并可以创建其他控制器和操作。

但是当我在 netbeans 中设置项目并使用运行命令时，它似乎不理解 Zend 框架 MVC url 结构并在浏览器中显示完整路径。

而不是运行[http://testing.com/about](http://testing.com/about)

它正在使用[http://testing.com/application/controllers/AboutController.php](http://testing.com/application/controllers/AboutController.php)

但是当我手动输入时，一切似乎都工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:46:52.970

您需要在项目属性中调整一些设置。打开您的项目属性菜单并选择`Sources`确保您`Web Root`的设置为`public`，当您在那里时确保您的源和项目文件夹是正确的。

接下来选择`Run Configuration`并确保您`Project URL`是正确的。使用 ZF 时不需要指定索引文件，netbeans 可能会抱怨一些但它会工作。

现在，当想要运行您的项目时，您必须运行整个项目。使用 ZF 时，您不能只运行一个文件，因为所有请求都通过`index.php`公用文件夹中的 路由。所以总是选择在项目级别而不是在文件级别运行。

# visual-studio-2010 - 如何编译使用 boost 库的 DLL？

> ID：10928717
> 
> 赞同：3
> 
> 时间：2012-06-07T08:59:06.190
> 
> 标签：visual-studio-2010, boost, dll, static, compilation

我正在 VS 2010 中开发一个 DLL 项目，我想在我的代码的某些部分使用 boost mutex。但是当我编译项目以发布最终的 DLL 时，我得到了这个链接错误：

```
LINK : fatal error LNK1104: cannot open file 'libboost_date_time-vc100-mt-1_49.lib' 
```

我已经用这个命令编译了 boost：

```
bjam install --toolset=msvc variant=release link=static threading=multi runtime-link=static 
```

`libboost_date_time-vc100-mt-s-1_49.lib`我有一个名为对其他外部 DLL 的任何依赖）。我知道问题是由 boost 的编译引起的，但我不知道我应该如何重新编译它有什么
指导方针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:38:51.720

检查您是否静态链接运行时库（配置属性-->C/C++-->代码生成-->运行时库：多线程 (/MT)。

否则，链接 CRT 并动态提升。为此，像这样构建提升：

```
bjam --toolset=msvc variant=release link=shared threading=multi runtime-link=shared 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:20:30.240

IMO，您构建了 boost 库就好了：您使用`link=static`了这意味着您想要发出静态库（而不是 DLL），并且由于您想要独立部署，您指定的`runtime-link=static`意思是您链接到 MS C/C++ 运行时间为*静态*库（例如 printf() 的代码将嵌入到您的最终库中，不会被 msvcr100.dll 引用）

**请看下图，确保在Additional Library Dependencies**下设置你的 boost 库所在目录的完整路径

 **![在此处输入图像描述](../Images/5296348ce97d3d8bcea780434580447e.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-23T09:38:30.173

我在一个 DLL 项目中修复了我的错误“错误 LNK1104 无法打开文件 'libboost_locale-vc142-mt-gd-x32-1_73.lib'”，我通过使用 vcpkg 安装 boost 库在 boost' github 上的[这个问题中进行了描述。](https://github.com/boostorg/boost/issues/412)

安装 vcpkg。然后写`.\vcpkg install boost`。您可以在视频中看到它是如何完成的：[https](https://youtu.be/b7SdgK7Y510) ://youtu.be/b7SdgK7Y510 。他没有安装 boost 库，但过程完全相同。

当然，这一切都适用于 Windows 和 Visual Studio 的工具集。**

# php - php.ini 变量未通过 htaccess 设置

> ID：10928721
> 
> 赞同：0
> 
> 时间：2012-06-07T08:59:15.913
> 
> 标签：php, phpinfo, php-ini

我们不能通过 phpfiles 或 htaccess 设置哪些 php.ini 变量。

意味着如果我们要设置变量，那么我们必须直接在 php 服务器文件中进行配置。

谁能给我该变量名称的列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:03:32.423

[http://php.net/manual/en/ini.list.php](http://php.net/manual/en/ini.list.php)

检查“可更改”列

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:04:28.600

完整的清单很长。您可以查看此页面[php.ini 指令列表以](http://php.net/manual/en/ini.list.php)获取帮助。那些`PHP_INI_`在`Changeable`你需要看到的列。

```
allow_call_time_pass_reference
allow_url_fopen
allow_url_include
always_populate_raw_post_data
apc.cache_by_default
apc.enabled
apc.enable_cli
apc.file_update_protection
apc.filters
apc.gc_ttl
apc.include_once_override
apc.localcache
apc.localcache.size
apc.max_file_size
apc.mmap_file_mask
apc.num_files_hint
apc.optimization
apc.report_autofilter
apc.rfc1867
apc.rfc1867_freq
apc.rfc1867_name
apc.rfc1867_prefix
apc.shm_segments
apc.shm_size
apc.slam_defense
apc.stat
apc.stat_ctime
apc.ttl
apc.user_entries_hint
apc.user_ttl
apc.write_lock
apd.bitmask
apd.dumpdir
apd.statement_tracing
arg_separator
arg_separator.input
arg_separator.output
asp_tags
assert.active
assert.bail
assert.callback
assert.quiet_eval
assert.warning
async_send
auto_append_file
auto_detect_line_endings
auto_globals_jit
auto_prepend_file
axis2.client_home
axis2.enable_exception
axis2.enable_trace
axis2.log_path
bcmath.scale
bcompiler.enabled
birdstep.max_links
blenc.key_file
browscap
cgi.check_shebang_line
cgi.discard_path
cgi.fix_pathinfo
cgi.force_redirect
cgi.nph
cgi.redirect_status_env
cgi.rfc2616_headers
child_terminate
cli.pager
cli.prompt
cli_server.color
coin_acceptor.autoreset
coin_acceptor.auto_initialize
coin_acceptor.auto_reset
coin_acceptor.command_function
coin_acceptor.delay
coin_acceptor.delay_coins
coin_acceptor.delay_prom
coin_acceptor.device
coin_acceptor.lock_on_close
coin_acceptor.start_unlocked
com.allow_dcom
com.autoregister_casesensitive
com.autoregister_typelib
com.autoregister_verbose
com.code_page
com.typelib_file
crack.default_dictionary
daffodildb.default_host
daffodildb.default_password
daffodildb.default_socket
daffodildb.default_user
daffodildb.port
date.default_latitude
date.default_longitude
date.sunrise_zenith
date.sunset_zenith
date.timezone
dba.default_handler
dbx.colnames_case
default_charset
default_mimetype
default_socket_timeout
define_syslog_variables
detect_unicode
disable_classes
disable_functions
display_errors
display_startup_errors
docref_ext
docref_root
doc_root
enable_dl
engine
error_append_string
error_log
error_prepend_string
error_reporting
etpan.default.charset
etpan.default.protocol
exif.decode_jis_intel
exif.decode_jis_motorola
exif.decode_unicode_intel
exif.decode_unicode_motorola
exif.encode_jis
exif.encode_unicode
exit_on_timeout
expect.logfile
expect.loguser
expect.timeout
expose_php
extension
extension_dir
fastcgi.impersonate
fastcgi.logging
fbsql.allow_persistant
fbsql.allow_persistent
fbsql.autocommit
fbsql.batchSize
fbsql.batchsize
fbsql.default_database
fbsql.default_database_password
fbsql.default_host
fbsql.default_password
fbsql.default_user
fbsql.generate_warnings
fbsql.max_connections
fbsql.max_links
fbsql.max_persistent
fbsql.max_results
fbsql.mbatchSize
fbsql.show_timestamp_decimals
file_uploads
filter.default
filter.default_flags
from
gd.jpeg_ignore_warning
geoip.custom_directory
geoip.database_standard
gpc_order
hidef.ini_path
highlight.bg
highlight.comment
highlight.default
highlight.html
highlight.keyword
highlight.string
html_errors
htscanner.config_file
htscanner.default_docroot
htscanner.default_ttl
htscanner.stop_on_error
http.allowed_methods
http.allowed_methods_log
http.cache_log
http.composite_log
http.etag.mode
http.etag_mode
http.force_exit
http.log.allowed_methods
http.log.cache
http.log.composite
http.log.not_found
http.log.redirect
http.ob_deflate_auto
http.ob_deflate_flags
http.ob_inflate_auto
http.ob_inflate_flags
http.only_exceptions
http.persistent.handles.ident
http.persistent.handles.limit
http.redirect_log
http.request.datashare.connect
http.request.datashare.cookie
http.request.datashare.dns
http.request.datashare.ssl
http.request.methods.allowed
http.request.methods.custom
http.send.deflate.start_auto
http.send.deflate.start_flags
http.send.inflate.start_auto
http.send.inflate.start_flags
http.send.not_found_404
hyerwave.allow_persistent
hyperwave.allow_persistent
hyperwave.default_port
ibase.allow_persistent
ibase.dateformat
ibase.default_charset
ibase.default_db
ibase.default_password
ibase.default_user
ibase.max_links
ibase.max_persistent
ibase.timeformat
ibase.timestampformat
ibm_db2.binmode
ibm_db2.i5_allow_commit
ibm_db2.i5_dbcs_alloc
ibm_db2.instance_name
iconv.input_encoding
iconv.internal_encoding
iconv.output_encoding
ifx.allow_persistent
ifx.blobinfile
ifx.byteasvarchar
ifx.charasvarchar
ifx.default_host
ifx.default_password
ifx.default_user
ifx.max_links
ifx.max_persistent
ifx.nullformat
ifx.textasvarchar
ignore_repeated_errors
ignore_repeated_source
ignore_user_abort
imlib2.font_cache_max_size
imlib2.font_path
implicit_flush
include_path
ingres.allow_persistent
ingres.array_index_start
ingres.blob_segment_length
ingres.cursor_mode
ingres.default_database
ingres.default_password
ingres.default_user
ingres.max_links
ingres.max_persistent
ingres.report_db_warnings
ingres.timeout
ingres.trace_connect
ircg.control_user
ircg.keep_alive_interval
ircg.max_format_message_sets
ircg.shared_mem_size
ircg.work_dir
last_modified
ldap.base_dn
ldap.max_links
log.dbm_dir
log_errors
log_errors_max_len
magic_quotes_gpc
magic_quotes_runtime
magic_quotes_sybase
mail.add_x_header
mail.force_extra_parameters
mail.log
mailparse.def_charset
maxdb.default_db
maxdb.default_host
maxdb.default_pw
maxdb.default_user
maxdb.long_readlen
max_execution_time
max_input_nesting_level
max_input_vars
max_input_time
mbstring.detect_order
mbstring.encoding_translation
mbstring.func_overload
mbstring.http_input
mbstring.http_output
mbstring.internal_encoding
mbstring.language
mbstring.script_encoding
mbstring.strict_detection
mbstring.substitute_character
mcrypt.algorithms_dir
mcrypt.modes_dir
memcache.allow_failover
memcache.chunk_size
memcache.default_port
memcache.hash_function
memcache.hash_strategy
memcache.max_failover_attempts
memory_limit
mime_magic.debug
mime_magic.magicfile
msql.allow_persistent
msql.max_links
msql.max_persistent
mssql.allow_persistent
mssql.batchsize
mssql.charset
mssql.compatability_mode
mssql.connect_timeout
mssql.datetimeconvert
mssql.max_links
mssql.max_persistent
mssql.max_procs
mssql.min_error_severity
mssql.min_message_severity
mssql.secure_connection
mssql.textlimit
mssql.textsize
mssql.timeout
mysql.allow_persistent
mysql.connect_timeout
mysql.default_host
mysql.default_password
mysql.default_port
mysql.default_socket
mysql.default_user
mysql.max_links
mysql.max_persistent
mysql.trace_mode
mysqli.default_host
mysqli.default_port
mysqli.default_pw
mysqli.default_socket
mysqli.default_user
mysqli.max_links
mysqli.reconnect
namazu.debugmode
namazu.lang
namazu.loggingmode
namazu.sortmethod
namazu.sortorder
nsapi.read_timeout
oci8.default_prefetch
oci8.max_persistent
oci8.old_oci_close_semantics
oci8.persistent_timeout
oci8.ping_interval
oci8.privileged_connect
oci8.statement_cache_size
odbc.allow_persistent
odbc.check_persistent
odbc.defaultbinmode
odbc.defaultlrl
odbc.default_db
odbc.default_pw
odbc.default_user
odbc.max_links
odbc.max_persistent
odbtp.datetime_format
odbtp.detach_default_queries
odbtp.guid_format
odbtp.interface_file
odbtp.truncation_errors
opendirectory.default_separator
opendirectory.max_refs
opendirectory.separator
open_basedir
oracle.allow_persistent
oracle.max_links
oracle.max_persistent
output_buffering
output_handler
pam.servicename
pcre.backtrack_limit
pcre.recursion_limit
pdo.dsn.*
pdo_odbc.connection_pooling
pdo_odbc.db2_instance_name
pfpro.defaulthost
pfpro.defaultport
pfpro.defaulttimeout
pfpro.proxyaddress
pfpro.proxylogon
pfpro.proxypassword
pfpro.proxyport
pgsql.allow_persistent
pgsql.auto_reset_persistent
pgsql.ignore_notice
pgsql.log_notice
pgsql.max_links
pgsql.max_persistent
phar.extract_list
phar.readonly
phar.require_hash
enable_post_data_reading
post_max_size
precision
printer.default_printer
python.append_path
python.prepend_path
realpath_cache_size
realpath_cache_ttl
register_argc_argv
register_globals
register_long_arrays
report_memleaks
report_zend_debug
request_order
runkit.internal_override
runkit.superglobal
safe_mode
safe_mode_allowed_env_vars
safe_mode_exec_dir
safe_mode_gid
safe_mode_include_dir
safe_mode_protected_env_vars
sendmail_from
sendmail_path
serialize_precision
session.auto_start
session.bug_compat_42
session.bug_compat_warn
session.cache_expire
session.cache_limiter
session.cookie_domain
session.cookie_httponly
session.cookie_lifetime
session.cookie_path
session.cookie_secure
session.entropy_file
session.entropy_length
session.gc_dividend
session.gc_divisor
session.gc_maxlifetime
session.gc_probability
session.hash_bits_per_character
session.hash_function
session.name
session.referer_check
session.save_handler
session.save_path
session.serialize_handler
session.use_cookies
session.use_only_cookies
session.use_trans_sid
session_pgsql.create_table
session_pgsql.db
session_pgsql.disable
session_pgsql.failover_mode
session_pgsql.gc_interval
session_pgsql.keep_expired
session_pgsql.sem_file_name
session_pgsql.serializable
session_pgsql.short_circuit
session_pgsql.use_app_vars
session_pgsql.vacuum_interval
short_open_tag
simple_cvs.authMethod
simple_cvs.compressionLevel
simple_cvs.cvsRoot
simple_cvs.host
simple_cvs.moduleName
simple_cvs.userName
simple_cvs.workingDir
SMTP
smtp_port
soap.wsdl_cache
soap.wsdl_cache_dir
soap.wsdl_cache_enabled
soap.wsdl_cache_limit
soap.wsdl_cache_ttl
sql.safe_mode
sqlite.assoc_case
sybase.allow_persistent
sybase.hostname
sybase.interface_file
sybase.login_timeout
sybase.max_links
sybase.max_persistent
sybase.min_client_severity
sybase.min_error_severity
sybase.min_message_severity
sybase.min_server_severity
sybase.timeout
sybct.allow_persistent
sybct.deadlock_retry_count
sybct.hostname
sybct.login_timeout
sybct.max_links
sybct.max_persistent
sybct.min_client_severity
sybct.min_server_severity
sybct.packet_size
sybct.timeout
sysvshm.init_mem
tidy.clean_output
tidy.default_config
track_errors
track_vars
unserialize_callback_func
uploadprogress.file.filename_template
upload_max_filesize
max_file_uploads
upload_tmp_dir
url_rewriter.tags
user_agent
user_dir
user_ini.cache_ttl
user_ini.filename
valkyrie.auto_validate
valkyrie.config_path
variables_order
velocis.max_links
vld.active
vld.execute
vld.skip_append
vld.skip_prepend
windows_show_crt_warning
xbithack
xdebug.auto_profile
xdebug.auto_profile_mode
xdebug.auto_trace
xdebug.collect_includes
xdebug.collect_params
xdebug.collect_return
xdebug.collect_vars
xdebug.default_enable
xdebug.dump.COOKIE
xdebug.dump.ENV
xdebug.dump.FILES
xdebug.dump.GET
xdebug.dump.POST
xdebug.dump.REQUEST
xdebug.dump.SERVER
xdebug.dump.SESSION
xdebug.dump_globals
xdebug.dump_once
xdebug.dump_undefined
xdebug.extended_info
xdebug.idekey
xdebug.manual_url
xdebug.max_nesting_level
xdebug.output_dir
xdebug.profiler_aggregate
xdebug.profiler_append
xdebug.profiler_enable
xdebug.profiler_enable_trigger
xdebug.profiler_output_dir
xdebug.profiler_output_name
xdebug.remote_autostart
xdebug.remote_enable
xdebug.remote_handler
xdebug.remote_host
xdebug.remote_log
xdebug.remote_mode
xdebug.remote_port
xdebug.show_exception_trace
xdebug.show_local_vars
xdebug.show_mem_delta
xdebug.trace_format
xdebug.trace_options
xdebug.trace_output_dir
xdebug.trace_output_name
xdebug.var_display_max_children
xdebug.var_display_max_data
xdebug.var_display_max_depth
xmlrpc_errors
xmlrpc_error_number
xmms.path
xmms.session
y2k_compliance
yami.response.timeout
yaz.keepalive
yaz.log_file
yaz.log_mask
yaz.max_links
zend.enable_gc
zend.multibyte
zend.script_encoding
zend.signal_check
zend.ze1_compatibility_mode
zend_extension
zend_extension_debug
zend_extension_debug_ts
zend_extension_ts
zlib.output_compression
zlib.output_compression_level
zlib.output_handler 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:04:24.733

请在此处查看变量列表

[http://php.net/manual/en/ini.list.php](http://php.net/manual/en/ini.list.php)

并且那里的“可更改”列显示了确定何时何地可以设置指令的模式。

网址是

[http://www.php.net/manual/en/configuration.changes.modes.php](http://www.php.net/manual/en/configuration.changes.modes.php)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T09:06:07.607

检查[php.ini 指令列表](http://php.net/manual/en/ini.list.php)和`Changeable`字段。

# android - Android 的备份服务何时不可用？

> ID：10928723
> 
> 赞同：0
> 
> 时间：2012-06-07T08:59:23.400
> 
> 标签：android, backup

[这里](http://developer.android.com/guide/topics/data/backup.html)的文件指出：

> “数据备份不保证在所有 Android 设备上都可用”

是否有任何备份服务在设备上不可用的示例？如果用户通过 Google Play 安装了应用程序（即他们有一个 google 帐户），是否保证存在备份服务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:18:58.313

好吧，一方面，它需要 API Level 8 (Android 2.2) 或更高版本，因此目前大约 6% 的 Google Play 设备无法使用它。否则，我认为绝大多数具有 2.2+ 和 Google Play 的设备都可以访问它是一个安全的假设。

# objective-c - 缩放图像时禁用滚动

> ID：10928724
> 
> 赞同：0
> 
> 时间：2012-06-07T08:59:26.917
> 
> 标签：objective-c, ios, xcode

我在 UIScrollView 中有一个图像。我想要发生的是，如果我放大到特定位置，我想禁用滚动（垂直和水平），以便它保持在缩放区域上。你能给我一些关于如何做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:23:00.077

要记住两件事：

1.  当您需要禁用滚动时，请确保您在您想要的位置。（您可以使用 中的一些方法`UIScrollViewDelegate`来完成此操作）。
2.  使`contentSize`您`UIScrollView`的框架大小相同。这样水平和垂直滚动都将被禁用。

* * *

```
CGRect myScrollViewRect = myScrollView.frame;
CGSize myScrollViewFrameSize = CGSizeMake(myScrollViewRect.frame.size.width, myScrollViewRect.frame.size.height);
myScrollView.contentSize = myScrollViewFrameSize; 
```

为了清楚起见，我放了比你通常需要的更多的代码。

# couchdb - couchdb 偏移量：我没有得到任何结果

> ID：10928729
> 
> 赞同：2
> 
> 时间：2012-06-07T08:59:43.567
> 
> 标签：couchdb

我向 couchdbwith POST 方法发出 ajax 请求，给出我想要检索的文档的键列表。

一切似乎都很好，除了我得到 0 行，因为偏移量设置在最后一行。

所以这意味着：

1.  我与 couchdb 服务器（cloudant）沟通良好
2.  POST 方法有效
3.  它似乎检索了列表，但只是给出了最后一个元素的offest，即一个空列表

此外，尝试以不同的方式排序结果也没有成功。

`riList`var 是这样的（来自谷歌浏览器开发工具）：

```
keys: Array[194]
0: "Wire line diamond core drilling rig"
1: "VUA - isotope geochemistry laboratory"
2: "Volcanologic and Seismological Observatories"
3: "VESOG"
4: "Utrecht University - TecLab, Tectonic Laboratory"
5: "Utrecht University - Experimental and Analytical Laboratories"
..... 
```

这基本上是相同的

```
var riList=["Wire line diamond core drilling rig", "VUA - isotope geochemistry laboratory","Volcanologic and Seismological Observatories","VESOG","Utrecht University - TecLab, Tectonic Laboratory","Utrecht University - Experimental and Analytical Laboratories"]; 
```

这是代码

```
 var riList= ListOfRU.pluck('ri_name');
            var queryParams={"keys":riList};
            var riResponseList=[];
            var ajaxURL= ('_view/'+ self.parentMcDropDownValue);
            console.log(ajaxURL, queryParams);
            $.ajax({ //retrieve and show on map LABORATORY coordinates
                async: true, 
                url: ajaxURL,
                type:"POST",
                data:JSON.stringify(queryParams),
                dataType: 'json',
                timeout:5000,
                success:function(response){
                    console.log("response",response);
                    riResponseList=response.rows;
                    },
                error:function(){
                    alert('fetching error');
                    }
                }); 
```

chrome 开发者工具输出

```
response 
Object
offset: 194
rows: Array[0]
total_rows: 194
__proto__: Object 
```

正如您在 chrome devtools 的输出中看到的，偏移量为 194，因此我有一个 0 行的数组，因为它从最后一个键开始。

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:18:13.437

当我发现错误时，我很想删除这个问题。

但最后我决定放弃它并解释什么是错的。

如果你觉得它应该被删除，请激励它，我会删除它。

所以我的问题的答案很简单：我检索的键不是我使用`"keys"`参数选择的键。

错误确实在`map`我写的函数中：

```
//WRONG ONE!!
function(doc){
    if(doc.doctype=='ri'){
        emit(doc.ri, doc);
    }
} 
```

**代替**

```
//RIGHT ONE!!
function(doc){
    if(doc.doctype=='ri'){
        emit(doc.ri_name, doc);// RI_NAME INSTEAD OF RI!!!!!
    }
} 
```

所以教训是：

*当你得到一个等于数组长度的偏移量时，检查结果是否真的是你想要使用 map 函数获得的结果。*

# html - Creating a quiz with text input rather than multiple choice

> ID：10928732
> 
> 赞同：0
> 
> 时间：2012-06-07T08:59:52.637
> 
> 标签：html, input

I need to create an on-line quiz in where the user can type in the answer. There are plenty of multiple choice quizzes out there, but I can't seem to find any that use input from the user?

Does anyone have any recommendations?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:09:11.617

了解如何编写出色的正则表达式，并通过精心设计您的问题以某种方式让用户输入您可以期待的内容。人们使用多项选择作为输入是有原因的。

# javascript - 从jQuery中生成的表单中获取数据

> ID：10928734
> 
> 赞同：0
> 
> 时间：2012-06-07T09:00:04.663
> 
> 标签：javascript, jquery

我有以下代码设置：

[http://jsfiddle.net/bABHU/2/](http://jsfiddle.net/bABHU/2/)

不得不对其进行一些更改以将其全部放在 jsfiddle 上，但我遇到的问题是来自第一个 from 的数据被放入查询字符串以发送到 ajax 调用，但之后生成的表单元素（其中来自 JSON 调用）再次单击下一步按钮时不会提交。

因此，当您遇到第二个问题时，我如何提交生成的“答案”输入。- 查看控制台的输出。

希望这是有道理的。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:05:24.697

发生这种情况是因为您将整个`<form>`元素替换为问题 2 中的新 HTML 内容。替换`$('.FinderOptionsInner').html`为`$('#formStep').html`

见[http://jsfiddle.net/M3eZp/1/](http://jsfiddle.net/M3eZp/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:06:20.380

当您替换 findOptionsInner 的标记时，您会删除表单本身。因此它没有序列化。此外，您的表单没有关闭标签。

```
<form action="" method="post" name="formStep" id="formStep">
<div class="FinderOptionsInner">
    <p>
    <label class="label_check">
      <input type="radio" name="answer" value="1" id="answer_0" />
      Answer 1</label>
    <br />
    <label class="label_check">
      <input type="radio" name="answer" value="2" id="answer_1" />
      Answer 2</label>
    <br />
  </p>
</div>
</form>

<div class="nextButton-step1 nextButton">Next
</div> 
```

工作得很好（请注意，我还修复了表单的关闭标签和底部的 div）。

# java - 创建逐步验证

> ID：10928735
> 
> 赞同：1
> 
> 时间：2012-06-07T09:00:17.137
> 
> 标签：java

我正在尝试使用[FTP4J](http://www.sauronsoftware.it/projects/ftp4j/)（在代码示例中称为客户端）为 FTP 服务器制作监控应用程序。

它连接到 FTP，登录，在本地创建文件，上传文件，下载文件，验证文件是否相同，清理 ftp 和本地文件并断开连接。

所有这些都已经完成，但我的问题是如何最好地记录发生的事情并在检测到错误时中断？

我能想到的简单解决方案是制作一个布尔值，显示之前的步骤是否成功，并且只有在他们成功的情况下才执行下一步。

```
StringBuilder sb = new StringBuilder();
boolean noError = true;
// Connect to FTP
try {
    client.connect(hostname, port);
} catch (Exception e) {
    noError = false;
    sb.append("failed to connect<br>");
}

//Logging in to FTP
if(noError) {
    try {
        client.login(username, password);

    } catch (Exception e) {
        noError = false;
        sb.append("failed to login<br>");
    }
}
...
// Close connection
if(client.isConnected()) {
    try {
        client.disconnect(true);
    } catch (Exception e) {
        sb.append("failed to disconnect<br>");
    }
} 
```

我能想到的另一个解决方案是嵌套的 try/catch，但看起来更糟，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:03:04.750

解决方案很简单：不要捕获异常。一旦抛出异常并且没有被捕获，整个过程就会停止。或者捕获它，但将其转换为您自己的异常，并带有适当的错误消息，然后抛出此异常。

旁注：您应该使用 a`boolean`而不是 a`Boolean`来存储不可为空的布尔值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:04:49.477

```
StringBuilder sb = new StringBuilder();
Boolean noError = true;
// Connect to FTP
try {
    client.connect(hostname, port);
        client.login(username, password);

} catch (ConnectException ce) {
    sb.append("Couldn't connect: ");
    sb.append(ce.getMessage);
} catch (LoginException le) {
     sb.append("Couldn't login: ");
    sb.append(le.getMessage);

} finally {
if(client.isConnected()) {
    try {
        client.disconnect(true);
    } catch (Exception e) {
        sb.append("failed to disconnect<br>");
    }
} 
```

# android - VideoView not streaming from https url in android 4.0(ICS)?

> ID：10928736
> 
> 赞同：2
> 
> 时间：2012-06-07T09:00:18.853
> 
> 标签：android, https, streaming, android-videoview

i have searching for the soultion to play a HTTPS video in android. i have come to know that https does not support for before 3.1 from [android media support doc](http://developer.android.com/guide/appendix/media-formats.html#network). so i have tested it in the android 4.0.3 emulator. still i am getting the same error (Media player error (-1,243234242)).

But i have tested same video with HTTP. its working fine to me.

```
videoview.setContentURI(Uri.parse("https://url_that_i_am_using"); 
```

Any idea to play https video streaming in video view or any permission do i need to specify in my manifest/serverside/video encoding?

Thanks in advance.

# core-data - CoreData 的数据持久性

> ID：10928740
> 
> 赞同：0
> 
> 时间：2012-06-07T09:00:33.497
> 
> 标签：core-data, ios5, data-persistence

大家好，我在使用 CoreData Persistence 时遇到问题，我的问题是，当我启动我的应用程序时，我设法将一些数据（来自应用程序内的表单）添加到我的数据库并使用 NSLog 显示它们。但实际上我认为当我停止 ipad 模拟器并在之后重新启动它时，所有这些数据都会消失..

所以我真的不知道它是来自我的代码还是因为模拟器。我制作了一个图表来向您展示我的应用程序和我的实体的架构：

![模型](../Images/2fba923ecd83dd716b5ea30de06fc493.png)

![模型](../Images/f293f85774efb0ff613cc01bb0822c3e.png)

问题是我使用不同的 viewController 所以我需要将 ManagedObjectModel 传递给每个。我的表单在 newDocumentViewController 中，当我添加一些实体时，我想在所有其他 viewController 中访问它们并将其保存到应用程序本地存储中。

这里有一些代码向您展示：

AppDelegate.m

```
@synthesize managedObjectContext = __managedObjectContext;
@synthesize managedObjectModel = __managedObjectModel;
@synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

    DetailViewController *detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
    UINavigationController *detailNavigationController = [[UINavigationController alloc] initWithRootViewController:detailViewController];

    MasterViewController *masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
    UINavigationController *masterNavigationController = [[UINavigationController alloc] initWithRootViewController:masterViewController];

    masterViewController.managedObjectContext = self.managedObjectContext;    
    detailViewController.managedObjectContext = self.managedObjectContext; 
```

我在每个 masterViewController 和 DetailViewController（以及从 DetailViewController 到 NewDocumenViewController）中都有这些属性来接收 objectContext

```
@property (nonatomic,strong) NSManagedObjectContext *managedObjectContext; 
```

所以有了这个，我真的不知道如何从每个控制器访问我的数据，并且数据是否通过这样的方式存储在本地：

新文档控制器.m

```
-(void) addNewDocument:(NSString*)name with_niveau:(NSInteger)level{
    Document *doc = [NSEntityDescription insertNewObjectForEntityForName:@"Document" inManagedObjectContext:managedObjectContext];
    doc.nom=name;
    doc.niveau=[NSNumber numberWithInteger:level];
}
-(void) addNewDocument_info:(NSString*)name with_createur:(NSString*)createur with_dateModif:(NSDate*)date1 with_status:(BOOL)etat{

    DocumentInfo *doc_info = [NSEntityDescription insertNewObjectForEntityForName:@"DocumentInfo" inManagedObjectContext:managedObjectContext];

    doc_info.nom =name;
    doc_info.createur=createur;
    doc_info.date_creation=[NSDate date];
    doc_info.date_modification=date1;
    doc_info.status= [NSNumber numberWithBool:etat];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:00:00.590

您需要保存数据：

```
NSError *error = nil;
[self.managedObjectContext save:&error]; 
```

# zend-framework - Zend 应用内的 Zend 应用，路由问题

> ID：10928746
> 
> 赞同：1
> 
> 时间：2012-06-07T09:01:12.603
> 
> 标签：zend-framework, zend-route, zend-application

所以我有一个 Zend 项目，比如说 project1 和 project1 的源文件夹中的另一个 Zend 项目，比如说 project2。设 project1 的 url 为 www.project1.com。

因此，当我访问“www.project1.com/project2”时，它会运行 project2 的默认模块、控制器、操作。但如果我喜欢“www.project1.com/project2/test/index/index”，或者访问 project2 中定义的路由，如“www.project1.com/project2/agb”，project1 应用程序会尝试将其映射到在 project1 中定义为“/:module/:controller/:action/:id/:page”的路由。

我想要做的是，如果一个 url 以“project1.com/project2”开头，那么无论如何，它应该到达 project2 应用程序。我不能使用正则表达式，因为 ":module" 是一个变量，或者至少我不知道该怎么做。

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:08:16.717

问题解决了！事实上完全没有问题。

project2 的 index.php 需要位于主目录中，因为我正在使用目录 url 访问项目，即“project1.com/project2”（无服务器别名）。所以我所要做的就是将 .htaccess 从 /public 目录替换为 project2 主目录，然后 wola ......！有用

# garbage-collection - Can I close all loaded XML files on disk without forcing garbage collection?

> ID：10928750
> 
> 赞同：0
> 
> 时间：2012-06-07T09:01:26.607
> 
> 标签：garbage-collection, xmldocument, xmlreader

I have coded a UI import tool that will scan a bunch of folders, locate all XML files in them, load them to do a first basic check on validity, then try to import them in the DB (which causes another even bigger bunch of validity checks to run). When the basic checks or the import fails, the app shows a detailed error message to the user, so the user can open up the respective XML file and edit it. BUT... the user CANNOT save the file, because the file "is in use by another process".

At that stage, all my importer objects are long gone, but I figured they might not be garbage collected yet, so they keep open handles to the XML files. So I tried a GC.Collect() after the checking/import process and then magically the user can edit and save the XML files.

All my code ever does with the XML files is this:

```
XmlReader reader = XmlReader.Create(m_xmlInputFile);
m_XmlDocument = new XmlDocument();
m_XmlDocument.Load(reader); 
```

'reader' is a local variable, so it goes out of scope immediately, m_XmlDocument is a member variable that will live as long as the importer object is alive. The importer object is a local variable in another function, so everything should end up in death row after all is said and done. Still it looks like waiting on death row might take a while...

Not that it matters much in my case, but just out of curiosity I would like to know if there is something I could do (apart from forcing a GC) to "free" the XML files on disk, so that the user can do his/her editing without surprises.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:04:59.587

[`XmlReader`](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)implements `IDisposable`，并且您没有推迟合同的结束。

`Dispose`在适当的时候调用它，或者（更好地）将使用它的代码包围在一个`using`块中：

```
using(XmlReader reader = XmlReader.Create(m_xmlInputFile))
{
    m_XmlDocument = new XmlDocument();
    m_XmlDocument.Load(reader);
} 
```

如果您发现自己强制进行垃圾收集，*那么*您做错了什么（在 99.99% 以内）。

当引用超出范围时不会发生任何神奇的事情 - 是的，它所引用的对象将*有资格*进行垃圾回收（如果这是对该对象的最后一个剩余引用），但不会运行额外的代码。

然而，如果对象持有资源，并且应该尽快清理，它将实现[一次性模式](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx)

# ios - NSXMLParser does not finish file

> ID：10928751
> 
> 赞同：0
> 
> 时间：2012-06-07T09:01:29.747
> 
> 标签：ios, xml, nsxmlparser

I am parsing an XML file in my app and the oddest thing happens. It stops after a number of elements, not finishing that element yet the parse method still returns succes. I have the feeling it is a wrong character somewhere but cannot figure it out. Does anyone have any idea why it halts during the parsing. And why, if it doesn't finish the file does it return true for being done parsing?

File that parses:

```
MOOAnimal *soort;
NSString *currentElementValue;

- (void) getData
{
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"soorten" ofType:@"xml"];  

    NSURL *xmlUrl = [NSURL fileURLWithPath:filePath];

    NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL:xmlUrl];

    [parser setDelegate:self];

    BOOL succes = [parser parse];

    if(succes)
    {
        data = true;
        beestjes = [NSArray arrayWithArray:soorten];
    }

}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if([elementName isEqualToString:@"soorten"])
    {
        soorten = [[NSMutableArray alloc] init ];
    }
    else if([elementName isEqualToString:@"soort"])
    {
        soort = [[MOOAnimal alloc] init];
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    currentElementValue = nil;
    currentElementValue = [[NSString alloc] initWithString:string];
     NSLog(@"Naam: %@", currentElementValue);
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if([elementName isEqualToString:@"soorten"])
    {

    }
    else if([elementName isEqualToString:@"soort"])
    {
        [soorten addObject: soort];
        soort = nil;
    }
    else if([elementName isEqualToString:@"nl"])
    {
        [soort setName:currentElementValue];

    }
} 
```

The XML file:

```
<soorten>
<soort><wormscode>117644</wormscode><localnames><nl>Ruwe zeerasp </nl></localnames><latinname>Hydractinia echinata </latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>231751</wormscode><localnames><nl>Haringgraat </nl></localnames><latinname>Halecium halecinum </latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>117273</wormscode><localnames><nl>Lampenkapje  </nl></localnames><latinname>Aequorea vitrina</latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>125333</wormscode><localnames><nl>Dodemansduim  </nl></localnames><latinname>Alcyonium digitatum</latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>283798</wormscode><localnames><nl>Viltkokeranemoon </nl></localnames><latinname>Cerianthus lloydii </latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>100803</wormscode><localnames><nl>Rode paardeanemoon </nl></localnames><latinname>Actinia equina </latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>100834</wormscode><localnames><nl>Zeedahlia  </nl></localnames><latinname>Urticina felina</latinname><omschrijving>- Doorsnede van de zuil en de voetschijf niet groter dan 10 tot 15 cm. De hoogte circa 6 cm. De tentakels tot 2 cm hoog.
- Een Zeedahlia is een grote brede zeeanemoon met korte dikke tentakels.
- Kenmerkend is de helder gekleurde tekening op de mondschijf. Deze bestaat uit dubbele lijnen die vanaf de mond gezien vóór de tentakels beginnen.
- Vrijwel alleen op hard substraat zoals stenen maar soms ook op veen of onder veenranden. Af en toe op pontons. De soort wordt aangetroffen vanaf iets boven de laagwaterlijn tot diepten van 15 meter en meer.
- Algemeen  in het Nederlandse zoute water.</omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>100872</wormscode><localnames><nl>Golfbrekeranemoon  </nl></localnames><latinname>Diadumene cincta</latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
<soort><wormscode>395099</wormscode><localnames><nl>Groene golfbrekeranemoon  </nl></localnames><latinname>Haliplanella lineata</latinname><omschrijving></omschrijving><opmerkingen></opmerkingen></soort>
</soorten> 
```

Where it stalls (by logging all the data/characters found)

```
2012-06-07 10:49:31.654 MOOFormulier[27852:f803] Naam: 
2012-06-07 10:49:31.654 MOOFormulier[27852:f803] Naam: 283798
2012-06-07 10:49:31.655 MOOFormulier[27852:f803] Naam: Viltkokeranemoon 
2012-06-07 10:49:31.655 MOOFormulier[27852:f803] Naam: Cerianthus lloydii 
2012-06-07 10:49:31.655 MOOFormulier[27852:f803] Naam: 
2012-06-07 10:49:31.656 MOOFormulier[27852:f803] Naam: 100803
2012-06-07 10:49:31.656 MOOFormulier[27852:f803] Naam: Rode paardeanemoon 
2012-06-07 10:49:31.657 MOOFormulier[27852:f803] Naam: Actinia equina 
2012-06-07 10:49:31.657 MOOFormulier[27852:f803] Naam: 
2012-06-07 10:49:31.658 MOOFormulier[27852:f803] Naam: 100834
2012-06-07 10:49:31.658 MOOFormulier[27852:f803] Naam: Zeedahlia  
2012-06-07 10:49:31.659 MOOFormulier[27852:f803] Naam: Urticina felina
2012-06-07 10:49:31.659 MOOFormulier[27852:f803] Naam: - Doorsnede van de zuil en de voetschijf niet groter dan 10 tot 15 cm. De hoogte circa 6 cm. De tentakels tot 2 cm hoog. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:42:28.427

在`parser:foundCharacters:`你应该追加`string`到`currentElementValue`，而不是覆盖整个字符串。同时记录你的价值观`parser:didEndElement:`

```
NSMutableString *currentElementValue;
[...]

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    currentElementValue = [NSMutableString new];
    [...]
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
     NSLog(@"Element: %@ Value: %@",elementName, currentElementValue);
    [currentElementValue release];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [currentElementValue appendString:string];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:33:18.070

一位也调查过该问题的同事指出，我没有在文件开头的标签中定义字符集。这导致解析器跳过文件中的某些唯一字符。有了这个设置，它现在可以正常工作了。

感谢我的同事，我仍然需要将他转换为 StackOverflow 用户。

# version-control - Mercurial+TortoiseHG 修订退出

> ID：10928752
> 
> 赞同：1
> 
> 时间：2012-06-07T09:01:34.053
> 
> 标签：version-control, mercurial, tortoisehg

这是问题所在。比如说，我有修订版 1 和 5（后来添加了很多文件和代码行）。现在我需要将项目恢复到第一次修订的状态，这就是我理解退出的目的。但我总是得到我不再需要的所有文件和代码行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:06:08.477

您想要的是`update`，在您的情况下`hg update -r 1`（在 hg 工作区中选择修订版 1，右键单击它并选择更新）。

回退有一个非常不同的含义：它反转了一个特定修订的更改，因此之后看起来，这个修订没有发生（当然它在项目历史中是可见的，但是对工作副本的更改已经消失了。）

可以删除不在版本控制中的文件`hg purge`（我不知道这个命令在 tortoiseHg 中是否可用）。

当您甚至不再需要修订版 2-5（并且对此非常确定）时，您可以启用`mq`扩展，并删除不需要的修订版。

# url - 当 URL 包含两个点时，字符串索引超出范围错误

> ID：10928753
> 
> 赞同：0
> 
> 时间：2012-06-07T09:01:44.357
> 
> 标签：url, coldfusion, coldfusion-9

[我有一个 ColdFusion 9 服务器，它在 URL 包含字符 .. 在 / 例如http://www.example.com/..cfm](http://www.example.com/..cfm)或[http://www.example.com](http://www.example.com/..foo/bar.cfm)之后的任何 ColdFusion 页面上提供以下错误[/..foo/bar.cfm](http://www.example.com/..foo/bar.cfm)：

```
String index out of range: -1

java.lang.StringIndexOutOfBoundsException: String index out of range: -1
    at java.lang.AbstractStringBuilder.delete(AbstractStringBuilder.java:698)
    at java.lang.StringBuffer.delete(StringBuffer.java:373)
    at coldfusion.util.Utils.collapseDotDots(Utils.java:604)
    at coldfusion.util.Utils.canonicalizeURI(Utils.java:558)
    at coldfusion.filter.PathFilter.invoke(PathFilter.java:39)
    at coldfusion.filter.ExceptionFilter.invoke(ExceptionFilter.java:70)
    at coldfusion.filter.ClientScopePersistenceFilter.invoke(ClientScopePersistenceFilter.java:28)
    at coldfusion.filter.BrowserFilter.invoke(BrowserFilter.java:38)
    at coldfusion.filter.NoCacheFilter.invoke(NoCacheFilter.java:46)
    at coldfusion.filter.GlobalsFilter.invoke(GlobalsFilter.java:38)
    at coldfusion.filter.DatasourceFilter.invoke(DatasourceFilter.java:22)
    at coldfusion.CfmServlet.service(CfmServlet.java:175)
    at coldfusion.bootstrap.BootstrapServlet.service(BootstrapServlet.java:89)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:86)
    at coldfusion.monitor.event.MonitoringServletFilter.doFilter(MonitoringServletFilter.java:42)
    at coldfusion.bootstrap.BootstrapFilter.doFilter(BootstrapFilter.java:46)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at com.seefusion.Filter.doFilter(Filter.java:49)
    at com.seefusion.SeeFusion.doFilter(SeeFusion.java:1500)
    at jrun.servlet.FilterChain.doFilter(FilterChain.java:94)
    at jrun.servlet.FilterChain.service(FilterChain.java:101)
    at jrun.servlet.ServletInvoker.invoke(ServletInvoker.java:106)
    at jrun.servlet.JRunInvokerChain.invokeNext(JRunInvokerChain.java:42)
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:286)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66) 
```

我无法在我测试过的每台服务器上重现这一点，但它似乎发生在大多数服务器上。查看错误，它看起来与 ColdFusion 的一部分有关，而不是与这些站点上运行的任何 ColdFusion 代码有关。任何人都可以对此进行更多说明，例如如何捕捉错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T00:36:41.993

我收到了上述错误，并发现这可以通过 ColdFusion Admin 中的“站点范围错误处理程序”来处理。我将它定向到我的 404.cfm。

希望能帮助到你。

# c# - C#使用webservice接收和存储iPhone应用程序发送的文件块作为文件

> ID：10928756
> 
> 赞同：0
> 
> 时间：2012-06-07T09:01:56.330
> 
> 标签：c#, iphone, asp.net, web-services, filestream

目前，我一直在研究 iPhone 应用程序需要将视频分块发送到 .NET 开发的 Web 服务和 Web 服务需要接收所有块并在 .NET 服务器上创建和存储文件的项目。

那么，是否有可能接收块并立即将它们存储在临时文件中，以便在上传大文件（20-50 MB）的情况下我们不需要中继缓冲区大小？如果有人提供演示代码，那就太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:04:31.383

您可以接收一个字节块并存储在一个文件中并继续将块附加到它，同时发送最后一组块，只需添加并保存为有效的文件名。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:12:43.953

您需要使用`NSFileHandle`类的组合，`-writeData:`并将块`-seekToEndOfFile`写入`NSData`文件。

希望这会有所帮助，并指导您朝着正确的方向前进！

# android - ViewPager、兼容性包和冰淇淋三明治

> ID：10928762
> 
> 赞同：1
> 
> 时间：2012-06-07T09:02:23.640
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-viewpager

我正在为冰淇淋三明治构建一个 android 应用程序。我希望在我的应用程序中能够使用 ViewPager，但我似乎不能这样做，因为它说它仅在使用兼容性包时可用。这里我有一个问题，因为我不想使用兼容性包，因为如果我这样做，我将无法使用 PreferencesFragment（它在兼容性包中不可用，但对我的应用程序非常重要）。现在我觉得我被困住了。我的问题是，是否有人知道我可以使用的某种解决方法，以便能够使用此 ViewPager 或类似的东西。也许如果他们把它放在冰淇淋三明治里……我会很感激任何建议。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:06:17.990

你可以使用它。添加兼容性，使用 ViewPager。

不要使用 FragmentPagerAdapter 或 FragmentStatePagerAdapter，因为它们期望来自兼容性包的片段。

扩展 PagerAdapter 或简单地复制 FragmentPagerAdapter 或 FragmentStatePagerAdapter 之一，并在其中使用来自冰淇淋的片段。

源链接 [https://github.com/android/platform_frameworks_support/blob/master/v13/java/android/support/v13/app/FragmentPagerAdapter.java](https://github.com/android/platform_frameworks_support/blob/master/v13/java/android/support/v13/app/FragmentPagerAdapter.java) [https://github.com/android/platform_frameworks_support/blob/master/v13 /java/android/support/v13/app/FragmentStatePagerAdapter.java](https://github.com/android/platform_frameworks_support/blob/master/v13/java/android/support/v13/app/FragmentStatePagerAdapter.java)

# debugging - 调试 JNI 模块中的特定访问冲突

> ID：10928764
> 
> 赞同：3
> 
> 时间：2012-06-07T09:02:35.107
> 
> 标签：debugging, java-native-interface, windbg, access-violation

我正在尝试通过带有 WinDBG 的 JNI 调试在基于 Java 的服务进程中运行的 C++ 组件中的访问冲突错误。我目前面临两个问题：

1.  Java 本身使用第一次机会访问冲突异常来执行一些内部线程同步（至少看起来是这样），所以我不能只打破所有第一次机会访问冲突（根据 Java 错误数据库，这是预期的行为，所以我们不应该期待任何修复）
2.  异常在外部代码中处理（应该保护生产环境免受 C++ 代码的不当行为）

目前，我看到了一种区分 Java 的 AV 和我的 AV 的方法 - Java 发生在属于没有加载任何符号的模块的地址，或者在内存的任何其他点，我有兴趣捕捉发生的 AV在已加载符号的地方。

似乎我有关于如何使用 WinDbg 实现它的所有元素，但无法将它们组装在一起：

`sxe -c ".if (ln) {gN}" av`

问题是我无法在 .if 语句中指定 ln 命令的输入（因为它需要一个表达式），而且我不确定如何检查 ln 的输出是否为空。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:30:02.373

有趣的案例！我认为使用 ln 并检查输出会非常慢（而且也不知道该怎么做）。稍微不同的方法：伪 @$ip 应该包含异常的地址

```
First chance exceptions are reported before any exception handling.
 <cut cut >
 eip=0041625d
 0:000> r @$ip
 $ip=0041625d 
```

使用[rebase 实用程序](https://stackoverflow.com/questions/3969190/is-rebasing-dlls-or-providing-an-appropriate-default-load-address-worth-the-tr)将 .dll 的默认加载地址更改为较高的值，并希望它们都加载到那里。

然后你可以测试：@$ip > “RebaseAddr”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:51:24.507

我们有一个本地 C++ 服务，它加载 jvm.dll 并调用它。来自它的大量 AV :-(。幸运的是，它们总是来自 jvm.dll 中最多两个不同的指令，所以我这样做`sxe -c ".if (@eip == <addr1>) || (@eip == <addr2>) {gn}" av`了，这对我有用。

# selenium - AutoIT Window Info Tool 无法与 Windows 的对话框一起正常工作

> ID：10928772
> 
> 赞同：-2
> 
> 时间：2012-06-07T09:03:22.160
> 
> 标签：selenium, automation, autoit

我目前正在使用 Autoit 自动化 firefox 浏览器来执行一些下载。要下载，我需要知道单击下载按钮时打开的对话框的控制元素。我尝试使用 Autoit 窗口信息工具收集 Windows 对话框中的信息以供下载，但 Autoit 窗口信息工具只是显示对话框的名称，没有显示其他控件元素。是否有任何其他工具可以捕获此类信息。我非常努力，但仍然没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T01:39:25.670

您使用的 AutoIT 版本是什么？我遇到了同样的情况，Autoit Window Info 无法识别窗口中的控件信息。终于找到了，因为我安装的是3.3.6.1版本的AutoIt。如果我使用3.3.0.0版本的窗口信息工具，它可以识别3.3.6.1版本无法识别的控件信息。您可以尝试使用版本 3.3.0.0 的窗口信息工具

# java - 重命名 Java 文件但在 IBM Rational Synergy 7.1 中保留历史记录

> ID：10928773
> 
> 赞同：0
> 
> 时间：2012-06-07T09:03:22.953
> 
> 标签：java, refactoring, cm-synergy

在我目前参与的非常大的 Java 项目中，我们使用 IBM Rational Synergy 7.1 作为 SCM。现在，由于架构的变化，大量的重命名和移动重构即将到来。

我们希望 Eclipse 作为重构的主导方，使用（大致）以下工作流程：

1.  使用 JDT 工具应用重构
2.  移动 Synergy 中的文件以保留文件的历史记录（如果可能，使用 Synergy CLI 自动执行）

如果我们只是进行重构和同步，旧文件将被标记为已删除，而新文件将具有版本 1。这显然是不希望的。

考虑到具有旧名称的旧版本是当前在服务器上的版本，而新版本暂时仅存在于工作区中，有没有办法使用 Synergy CLI 实现第 2 步？您可能会假设我拥有有关数据库中旧文件的所有必要信息（实例、名称、版本等），我认为我必须事先收集这些信息。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:16:05.540

我们将为此使用 Synergy CLI 并大致具有以下工作流程：

1.  在 Eclipse 中进行重构
2.  重命名重构的目标文件（加后缀）
3.  使用 CLI 命令`ccm move`协同移动文件
4.  删除在工作区中创建的文件，并从步骤 2 中的文件中删除后缀
5.  同步项目

我省略了诸如设置任务之类的事情，这些事情必须完成。

# java - 我如何制作一个实现 KeyListener 的控制台应用程序？

> ID：10928775
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:03:30.770
> 
> 标签：java, keylistener

我正在尝试创建一个`Java`实现`KeyListener`.

我想连续运行我的程序，直到我中止它或在某种情况下。我想要做的是在我运行程序之后，无论我按下什么键，它都会存储在`out.txt`文件中。

```
public class StoreInFile implements KeyListener{
    public static void main(String[] args) {
    while(true){
    // **What should i do here such that it will call the keypressed event**.
    }
    }
    @Override
    public void keyPressed(KeyEvent e) {
        try{
              FileWriter fstream = new FileWriter("d:\\out.txt",true);
              BufferedWriter out = new BufferedWriter(fstream);
              out.write(e.getKeyChar());
              out.close();
              }catch (Exception ex){
              System.err.println("Error: " + ex.getMessage());
              }
    }

} 
```

是否可以在控制台应用程序中实现？基本上我想创建一个**KeyLogger**或**KeyCatcher**。我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:07:45.890

对于基于行的输入，即*“用户输入文本，用户按下回车，您的程序接收用户输入的内容”*，`Scanner`该类应该可以正常工作。

对于单个字符输入，例如*“用户按下 x 键，您的程序会收到通知”。*您必须查看诸如[CHARVA](http://www.pitman.co.za/projects/charva/)或[Java Curses](http://sourceforge.net/projects/javacurses/)之类的库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:13:30.417

您可以尝试一个开源框架，`jLine`： [jLine](http://jline.sourceforge.net/)

但这不是 100% java。还有一些本地实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:26:58.143

如果您在 Windows 上运行，我会推荐[JNA](https://github.com/twall/jna)，并编写 keyhook 和/或 mousehook 来监视键/鼠标事件。当您的控制台窗口处于非活动状态时，它仍然有效。

[Windows 中的 JNA 键盘挂钩](https://stackoverflow.com/questions/3078646/jna-keyboard-hook-in-windows)

[JNA 鼠标钩子的工作示例](https://stackoverflow.com/questions/3590226/working-example-of-jna-mouse-hook)

# perl - 是否可以只对 Perl 中的子例程调用进行计时？

> ID：10928778
> 
> 赞同：4
> 
> 时间：2012-06-07T09:03:54.397
> 
> 标签：perl, profiling, subroutine

我想知道是否有一个 Perl 分析器可以分析特定子例程的子例程调用所花费的时间。

我不想计算整个子程序（从调用到返回）的时间，而只想计算 Perl 在调用子程序时所花费的时间（在调用和子程序的第一条指令之间）。

这可能吗 ？（当然，在我所有的 90k 行代码中没有手动添加时间函数 :)）

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T09:16:05.833

看来您需要[`Devel::NYTProf`](http://p3rl.org/Devel%3a%3aNYTProf)'s line profiling 模式。“在线时间”列将显示您在处理您拨打电话的线路上花费了多少，不包括在被叫子上花费的时间。

# jquery - 带有展开/折叠全部或任何选项的水平手风琴

> ID：10928790
> 
> 赞同：1
> 
> 时间：2012-06-07T09:04:47.780
> 
> 标签：jquery, horizontal-accordion

我正在寻找一个水平手风琴，用户可以选择展开/折叠所有面板或任何面板。

现在我遇到了很多水平手风琴插件，比如[http://nicolahibbert.com/demo/liteAccordion/](http://nicolahibbert.com/demo/liteAccordion/)

所有这些都允许选择一次打开一个。

请帮我解决这个问题。

谢谢， Cbalan

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:59:44.980

尝试将 collapsible 设置为 true 并将 active 设置为 none：

```
$("#accordion").accordion({ header: "h3", collapsible : true, active : 'none' }); 
```

# android - ACRA 导致应用程序延迟启动

> ID：10928794
> 
> 赞同：1
> 
> 时间：2012-06-07T09:04:58.950
> 
> 标签：android, acra

我`ACRA`在我的 Android 应用程序中使用。在`onCreate()`我的`Application`班级中初始化应用程序时，在应用程序启动之前存在明显的延迟。这在应用程序的第一个布局显示之前显示为白屏。

有没有办法解决这个问题？？也许在类中加载内容视图或稍后在应用程序中`Application`初始化。`ACRA`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:38:07.220

我还将 Acra 集成到我的应用程序中，但我从未遇到过您在此处提到的问题。以下是我如何初始化 Acra：

```
 @Override
    public void onCreate() 
    {
        // The following line triggers the initialization of ACRA
        ACRA.init(this);
        super.onCreate();
    } 
```

# couchdb - 本地实例不支持 couchdb POST 方法

> ID：10928814
> 
> 赞同：3
> 
> 时间：2012-06-07T09:06:27.293
> 
> 标签：couchdb

我的本地 couchdb 实例似乎不支持 POST 方法。

这是我从 chrome 开发工具中得到的答案

```
POST http://localhost:5984/epos-couch/_design/epos-couch/_view/ri 415 (Unsupported Media Type) 
```

使用的代码是一个简单的 ajax 请求，设置了 post 方法：

```
$.ajax({ 
                    async: true, 
                    url: ajaxURL,
                    type:"POST",
                    data:.....,
                    dataType: 'json',
                    timeout:5000,
                    success:function(response){

                        riResponseList=response.rows;
                        },
                    error:function(){
                        alert('fetching error');
                        }
                    }); 
```

我很确定问题出在我的本地实例中，因为在[cloudant.com](https://cloudant.com/)上运行这样的代码 一切正常。

所以我的问题是：如何设置我的本地 couchdb 实例以支持 POST 方法？

我在互联网上搜索了一下（http://wiki.apache.org/couchdb, [http://guide.couchdb.org/](http://guide.couchdb.org/)），但找不到答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T09:01:32.257

您需要`contentType: "application/json"`在`$.ajax`调用中指定，因为 CouchDB 的某些配置在收到非`application/json`POST 正文时会阻塞。

# android - Dropbox 和 Android - 通过 API 调用获取文件名

> ID：10928816
> 
> 赞同：4
> 
> 时间：2012-06-07T09:06:35.793
> 
> 标签：android, dropbox-api

有谁知道如何获取元数据列表...我的意思是存在于我们的应用程序文件夹中的文件和文件夹在 Android 的 Dropbox 中。我需要获取文件和文件夹名称..现在我想再次从 android.i 在 Dropbox 中创建文件夹reffered dropbox docs.but 没有找到相同的.. 提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T12:57:04.487

这是我所做的，对我来说效果很好。

`SavedProperties.selectedAddress`是我的`static`变量，其中包含要创建的文件夹的名称。

我在这里

1）检查文件夹是否存在。

2）如果不存在则创建文件夹。

3）将文件上传到该文件夹​​。

```
 private void loadMetadata() 
    {

        // Metadata
        try 
        {
            Entry existingEntry = mApi.metadata("/" + SavedProperties.selectedAddress , 1, null, false, null);
            if(existingEntry.isDir)
            {
                Log.d(TAG, "Folder exists : " + existingEntry.fileName());
                uploadPictures("/"+SavedProperties.selectedAddress + "/");
            }
        } 
        catch (DropboxException  e) 
        {
            Log.d(TAG,"Folder does not exist..." + e.fillInStackTrace());
            try 
            {
                Entry createFolder = mApi.createFolder("/"+SavedProperties.selectedAddress);
                Log.d(TAG,"Folder created..." + createFolder.rev);
                uploadPictures("/"+SavedProperties.selectedAddress + "/");
            } 
            catch (DropboxException e1)
            {
                 Log.d(TAG,"Create Folder DropboxException : " + e1.fillInStackTrace() );
            }       
        }
    }

    private void uploadPictures(String uploadTo) 
    {
        // Uploading Pictures....
        FileInputStream inputStream = null;
        try 
        {
            for(int i =0 ; i < selectedImages.length; i++)
            {
                if(selectedImages[i]==0)
                {
                    String path = PictureGallery.images.get(i).toString().replace("file://", "");
                    String filename = PictureGallery.images.get(i).toString().split("/")[PictureGallery.images.get(i).toString().split("/").length-1];
                    File file = new File(path);
                    inputStream = new FileInputStream(file);
                    Entry newEntry = mApi.putFile(uploadTo + filename, inputStream, file.length(), null, null);
                    Log.i(TAG, "The uploaded file's rev is: " + newEntry.rev);
                    //Log.d(TAG,"PictureGallery " + PictureGallery.images.get(i).toString().split("/")[PictureGallery.images.get(i).toString().split("/").length-1]);
                }
            }
            progress.dismiss();
        } catch (DropboxUnlinkedException e) {
            // User has unlinked, ask them to link again here.
            Log.e(TAG, "User has unlinked.");
        } catch (DropboxException e) {
            Log.e(TAG, "Something went wrong while uploading.");
        } catch (FileNotFoundException e) {
            Log.e(TAG, "File not found.");
        } 
        finally {
            if (inputStream != null) {
                try {
                    inputStream.close();
                } catch (IOException e) {}
            }
        }
    } 
```

在我的情况下，我使用了 android sdk 1.3.1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T09:30:52.180

我有同样的问题，并找出来。访问完成后，如上所述创建一个新条目，但将参数“布尔列表”设置为 true。如果你这样做了，List 不会为空，你可以通过 for 循环获取你想要的信息

```
AccessTokenPair access = getStoredKeys();
mDBApi.getSession().setAccessTokenPair(access);

try {
    // ----SET boolean list PARAMETER TO TRUE---------

    Entry dropboxDir = mDBApi.metadata("/YOUR_FOLDER_NAME/", 0, null, true, null);
    if (dropboxDir.isDir) {
        List<Entry> contents = dropboxDir.contents;
        if (contents != null) {
            // ------CREATE NEW ENTRY AND THEN, GET THE FILENAME OF
            // EVERY FILE
            for (int i = 0; i < contents.size(); i++) {
                Entry e = contents.get(i);
                String a = e.fileName();
                Log.d("dropbox", "FileName:" + a);
            }
        }
    }
    // ONLY A TEST CATCH, PLEASE DO WRIGHT EXCEPTION HANDLING HERE
} catch (Exception ex) {
    Log.d("dropbox", "ERROR");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T06:08:41.883

```
Entry entries = mApi.metadata(Path, 100, null, true, null);

for (Entry e : entries.contents) {
    if (!e.isDeleted) {
        Log.i("Is Folder",String.valueOf(e.isDir));
        Log.i("Item Name",e.fileName());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-13T14:22:13.977

如果您想从路径中检索所有文件和文件夹，请使用此代码，它将帮助您。

我自己得到了解决方案。

```
 String mPath="/";  //You can change the path here to specific FOLDER
Entry dirent = null;
 try 
   {
      dirent = mApi.metadata(mPath, 1000, null, true, null);            
    } 
 catch (DropboxException e)
   {
     System.out.println("Error Detail "+e.getMessage());
   } 
```

> //执行循环并从PATH中检索所有文件和文件夹

```
 for (Entry ent: dirent.contents)
     {
       String name = ent.fileName();                           
       System.out.println("My File in Folder "+name);                        
      } 
```

# verilog - 如何使用 Verilog 和 Altera DE2 板的 VGA 打印数字？

> ID：10928818
> 
> 赞同：2
> 
> 时间：2012-06-07T09:06:43.657
> 
> 标签：verilog, fpga, vga, nios

我正在使用 Altera DE2 FPGA 板和 verilog，使用它们设计了一个简单的 CPU。我需要使用电路板的 VGA 输出打印寄存器的值。

我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:58:16.023

恐怕路还很长。

首先，您需要拥有一个 VGA 输出外围设备。这会从内存中获取值，并在相对于同步脉冲（它也必须生成）的正确时间将适当的 RGB 值发送到屏幕。

完成此操作后，您的处理器需要将一组点写入内存，这些点看起来像您要显示的字符 - 因此您需要一个简单的位图字体。或者，您可以使内存面向字符，因此处理器只需将一组 ASCII 值放入其中，然后 VGA 输出将查找 i（在内部字体查找表中） 'a'（比如说）应该在它当时正在创建的显示的任何一行上。

视频输出是一个很好玩的项目！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T04:38:54.007

加上马丁所说的，如果你想通过破解它来缩短这条路径，你基本上可以制作一个片段库。要理解我在说什么，如果您查看 7 段显示器，每个段单独亮起以创建 0-9 的值，基本上您可以编写一个库来创建这些段中的每一个，然后将它们转置以表示一个位，十位，以此类推。这是一些代码片段，它显示了右下角的段。

```
/*
  __5__
 |     |
1|__6__|3
 |     |
2|_____|4
    7
  offset referring to the position meaning tens or ones place.
  If you would like ones place, call seg_1(0) for example and 
 if you would like tens place, call seg_1(1) and so forth. 
*/

void seg_1(int offset) {
    for(i = 360; i < 420; i++) //y-axis
    {
        for(j = 540-(offset*120) ; j < 560-(offset*120); j++) //x-axis
        {
            Vga_Set_Pixel(VGA_0_BASE,j,i);
        }
    }
}

void seg_2(int offset) {
    for(i = 420; i < 460; i++) //y-axis
    {
        for(j = 540-(offset*120) ; j < 560-(offset*120); j++) //x-axis
        {
            Vga_Set_Pixel(VGA_0_BASE,j,i);
        }
    }
}
...
... 
```

# django - 通过覆盖 ModelForm 和 ModelChoiceField 连接两个模型的值

> ID：10928819
> 
> 赞同：2
> 
> 时间：2012-06-07T09:06:48.553
> 
> 标签：django, forms, django-models, admin, modelform

为了在 Django AdminForm 的 ForeignKey 选择框中仅显示相关的项目，我使用 ActionAdminForm 类自定义了我的 ActionAdmin 模型。为了预选值，我使用了类似此处发布的类[https://stackoverflow.com/a/9191583/326905](https://stackoverflow.com/a/9191583/326905)。非常感谢，这真的很好。

但是，当用户不导航表单客户 - > 项目 - > 操作并直接导航到 django admin 中的操作时，我想在 ActionAdmin 表单中显示外键项目的选择框中的值，格式如下：

客户名称 1 - 项目名称
1 客户名称 1 - 项目名称 2
客户名称 2 - 项目名称 3

**我的问题是，如何
在下面的代码中的 else 情况下覆盖 self.fields["project"] ，
以便获得从
Project.customer.name 和 Project.name 连接的选择框值？**

```
class ActionAdminForm(ModelForm):
    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop('request', None)
        super(ActionAdminForm, self).__init__(*args, **kwargs)
        if self.request.GET.get('project'):
            prj = Project.objects.get(id=self.request.GET.get('project'))
            self.fields["project"].queryset = Project.objects.filter(customer = prj.customer)
        else:

           self.fields["project"] = ProjectModelChoiceField(Project.objects.all().order_by('name'))

    class Meta:
        model = Action 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T20:56:38.167

我得到了解决方案。是的。首先，当我尝试仅使用 self.fields [“project”] 时总是出错，但现在它可以工作了。我将它放入 else 并写了一个如下所示的 ProjectModelChoiceField，受此描述的影响：http: [//bradmontgomery.blogspot.de/2009/01/custom-form-for-djangos-automatic-admin.html](http://bradmontgomery.blogspot.de/2009/01/custom-form-for-djangos-automatic-admin.html)

```
class ProjectModelChoiceField(ModelChoiceField):
    def label_from_instance(self, obj):
        return "%s - %s"%(obj.customer.name, obj.name) 
```

# android - 从 sdcard 文件中获取 apk 信息

> ID：10928826
> 
> 赞同：1
> 
> 时间：2012-06-07T09:07:14.737
> 
> 标签：android, apk

```
 String apkPath = apk.getAbsolutePath();
        Log.i(getClass().getName(), "addApk(): apkPath = " + apkPath);
        PackageInfo localPackageInfo = pm.getPackageArchiveInfo(apkPath, 0);
        localPackageInfo.applicationInfo.sourceDir = apkPath;//! null point exception 
```

无法获取 apk 的图标、名称、版本等。我也尝试了幻数 8192 而不是 0，但也不起作用。有人有什么建议吗？提前谢谢！

* * *

我将代码更改为：

```
 PackageInfo pi = pm.getPackageArchiveInfo(apkPath, PackageManager.GET_ACTIVITIES);
        if (pi != null) {
            ApplicationInfo ai = pi.applicationInfo;
            Drawable appIcon = pm.getApplicationIcon(ai);
            String appName = pm.getApplicationLabel(ai).toString();
            String appVersion = pi.versionName;
            String pkgName = ai.packageName;

            Log.i(getClass().getName(), "pkgName = " + pkgName + ", appName = " + appName + ", appVersion = " + appVersion);
            adapter.add(new InstallItem(pkgName, appIcon, appName, appVersion));
        } 
```

并得到这样的输出：

pkgName = com.chaozh.iReaderFree, appName = com.chaozh.iReaderFree, appVersion = 1.3.2.0 ...

如您在此处看到的，我无法获取应用程序名称，并且其图标始终是默认的相同图标。我厌倦了市场上的其他安装程序，他们工作得很好，所以有人告诉我该怎么做吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:14:58.753

您可以使用 PackageManager 方法[getPackageArchiveInfo](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageArchiveInfo%28java.lang.String,%20int%29)从 APK 文件中检索信息。假设您的 APK 位于 SD 卡的根目录中，您可以使用以下代码：

```
 String apkPath = Environment.getExternalStorageDirectory().getAbsolutePath() 
                   + "/MyApp.apk";
    PackageManager pm = getPackageManager();

    PackageInfo info = pm.getPackageArchiveInfo(apkPath, 
                           PackageManager.GET_ACTIVITIES);
    //Log.i("ActivityInfo", "Package name is " + info.packageName);

    for (android.content.pm.ActivityInfo a : info.activities) {
        Log.i("ActivityInfo", a.name);
    } 
```

您可以在 ActivityInfo 和 PackageInfo 对象中找到大量附加信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T12:54:19.317

这是正确的答案，有一些技巧（SDK> 8！）：

```
public Drawable getApkIcon(String path){      
    PackageManager pm = getPackageManager();      
    PackageInfo info = pm.getPackageArchiveInfo(path, PackageManager.GET_ACTIVITIES);      
    if(info != null){      
        ApplicationInfo appInfo = info.applicationInfo;

        if(Build.VERSION.SDK_INT >= 8){
            appInfo.sourceDir = path;
            appInfo.publicSourceDir = path;
        }

        return appInfo.loadIcon(pm);
    }           
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-08T08:51:36.603

**最简单的方法** 只需使用其获取任何应用程序的图标`packageName`

```
public static final Drawable getIconOfAppUsingPackageName(Context context,String packageName)
{
 Drawable icon = context.getPackageManager().getApplicationIcon(packageName);
 imageView.setImageDrawable(icon);
 return icon;
} 
```

# javascript - 在集成指南中添加播放列表按钮不起作用

> ID：10928829
> 
> 赞同：-4
> 
> 时间：2012-06-07T09:07:33.053
> 
> 标签：javascript, spotify

我正在尝试创建一个按钮，将当前视图添加为这样的播放列表

```
<button class="add-playlist button icon" value="spotify:album:0fqSVcXza5It71LS2BJdLR"><span class="plus"></span>Add as Playlist</button><br /> 
```

但是当我点击那个按钮时什么也没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:20:21.707

简单地添加一个 HTML 按钮不会为您完成这项工作。您还需要使用[JavaScript](http://www.w3schools.com/js/default.asp)。

如果您在 Spotify 客户端内构建应用程序，您可能正在寻找类似这样的内容：

```
var subscribeToPlaylist: function(e) {
    e.preventDefault();

    var button = this,
        models = require('sp://import/scripts/api/models'),
        playList = models.Playlist.fromURI(this.value);

    playList.subscribed = true;
};

var myButton = document.querySelector('button.add-playlist');

myButton.onclick = subscribeToPlaylist; 
```

为此，您需要将其与 Spotify Apps API 一起使用

在此处查看 Spotify 应用程序 API：[https ://developer.spotify.com/technologies/apps/docs/beta/](https://developer.spotify.com/technologies/apps/docs/beta/)

# c# - 将数字代码复制到剪贴板并粘贴到 Excel，而不将它们格式化为数字

> ID：10928834
> 
> 赞同：2
> 
> 时间：2012-06-07T09:07:48.380
> 
> 标签：c#, winforms, excel, clipboard

我有一个 .NET Windows 窗体应用程序，我需要将一个 8 位数字代码列表复制到剪贴板中以粘贴到 Excel 工作表中。

```
string tabbedText = string.Join("\n", codesArray);    
Clipboard.SetText(tabbedText); 
```

问题是，当代码以一个或多个零开头（例如“00001234”）时，它会被粘贴为数字并修剪零。

有没有办法设置剪贴板文本以便 Excel 接受它作为文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:17:14.357

我会在 Excel 中处理这个问题（而不是在您的应用程序中）。将单元格格式化为文本，*然后*从剪贴板粘贴。这种方式总是粘贴前导零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:15:22.463

**编辑：**这在 Excel 中不起作用，因为撇号被粘贴并显示出来。我将答案留在这里作为一个明确的声明，即这种方法对 Excel 没有帮助。它确实**适用于 OpenOffice Calc**。

“告诉” Excel 将字符串视为字符串的标准方法是在其前面加上撇号。您是否尝试过类似的方法：

```
string tabbedText = "'" + string.Join("\n'", codesArray); 
```

（注意那里的额外撇号......有点难以看到）。

当然，如果您打算此后在 Excel 计算中使用此值，这可能会给您带来问题，但也有一些方法可以处理。

# audio - SDL_Open 中的内存泄漏

> ID：10928837
> 
> 赞同：0
> 
> 时间：2012-06-07T09:07:56.330
> 
> 标签：audio, sdl

环境：Ubuntu 11.04。SDL 1.2.15。

在我基于 SDL 的应用程序中，我一个接一个地播放多个视频剪辑。对于每个视频，我在开头调用 SDL_OpenAudio，最后调用 SDL_CloseAudio。但是，每一轮都会留下两个未释放的内存块。它们都来自内部 SDL 函数 AudioAvailable。

```
 ==17035== 372 bytes in 3 blocks are definitely lost in loss record 139 of 169
==17035==    at 0x4C28F9F: malloc (vg_replace_malloc.c:236)
==17035==    by 0xB2B0564: ??? (in /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0)
==17035==    by 0xB2B062A: ??? (in /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0)
==17035==    by 0xB2B01CA: xcb_connect_to_display_with_auth_info (in /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0)
==17035==    by 0xCC650ED: pa_client_conf_from_x11 (in /usr/lib/x86_64-linux-gnu/libpulsecommon-1.0.so)
==17035==    by 0xC9ED83E: pa_context_new_with_proplist (in /usr/lib/x86_64-linux-gnu/libpulse.so.0.13.4)
==17035==    by 0xC7DD9F2: pa_simple_new (in /usr/lib/x86_64-linux-gnu/libpulse-simple.so.0.0.3)
==17035==    by 0x418AED: Audio_Available (SDL_pulseaudio.c:235)
==17035==    by 0x405893: SDL_AudioInit (SDL_audio.c:360)
==17035==    by 0x404A79: SDL_InitSubSystem (SDL.c:105)
==17035==    by 0x405E59: SDL_OpenAudio (SDL_audio.c:404) 
```

我想知道我的代码中是否有一些我可能做错的事情。我已经验证 SDL_CloseAudio 确实被调用了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T14:09:08.850

无论如何，我都不是 SDL 或 OpenGL 方面的专家，但我认为大多数软件都会在某一时刻泄漏内存。有关更多信息，请参阅此帖子：[为什么 valgrind 说基本 SDL 程序正在泄漏内存？](https://stackoverflow.com/q/1997171/793208)

从好的方面来说，SDL 只泄漏了 374 字节，与大多数系统提供的相比，这只是几分钱。从长远来看，它不应该有很大的不同。

# scala - 如何在没有匹配器的情况下跳过 specs2 中的测试？

> ID：10928839
> 
> 赞同：8
> 
> 时间：2012-06-07T09:07:59.247
> 
> 标签：scala, skip, specs2

我正在尝试在 scala 中使用 specs2 测试一些依赖于 db 的东西。目标是测试“db running”，然后执行测试。我发现如果数据库关闭，我可以使用 Matcher 类中的 orSkip 。

问题是，我正在获得一个匹配条件的输出（作为通过），并且该示例被标记为跳过。我想要的是：只执行一个标记为“SKIPPED”的测试，以防测试数据库脱机。这是我的“TestKit”的代码

```
package net.mycode.testkit

import org.specs2.mutable._
import net.mycode.{DB}

trait MyTestKit {

  this: SpecificationWithJUnit =>

  def debug = false

  // Before example
  step {
    // Do something before
  }

  // Skip the example if DB is offline
  def checkDbIsRunning = DB.isRunning() must be_==(true).orSkip

  // After example
  step {
    // Do something after spec
  }
} 
```

这里是我的规范的代码：

```
package net.mycode

import org.specs2.mutable._
import net.mycode.testkit.{TestKit}
import org.junit.runner.RunWith
import org.specs2.runner.JUnitRunner

@RunWith(classOf[JUnitRunner])
class MyClassSpec extends SpecificationWithJUnit with TestKit with Logging {

  "MyClass" should {
    "do something" in {
      val sut = new MyClass()
      sut.doIt must_== "OK"
    }

  "do something with db" in {
    checkDbIsRunning

    // Check only if db is running, SKIP id not
  }
} 
```

现在出来：

```
Test MyClass should::do something(net.mycode.MyClassSpec) PASSED
Test MyClass should::do something with db(net.mycode.MyClassSpec) SKIPPED
Test MyClass should::do something with db(net.mycode.MyClassSpec) PASSED 
```

输出我希望它是：

```
Test MyClass should::do something(net.mycode.MyClassSpec) PASSED
Test MyClass should::do something with db(net.mycode.MyClassSpec) SKIPPED 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T03:47:12.690

我认为你可以使用一个简单的条件来做你想做的事：

```
class MyClassSpec extends SpecificationWithJUnit with TestKit with Logging {

  "MyClass" should {
    "do something" in {
      val sut = new MyClass()
      sut.doIt must_== "OK"
    }
    if (DB.isRunning) {
      // add examples here
      "do something with db" in { ok }
    } else skipped("db is not running")
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T12:06:13.137

您是否尝试过使用该`args(skipAll=true)`参数？请参阅[此处的几个示例](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Runners.html)。

不幸的是（据我所知），您不能跳过单元​​规范中的单个示例。但是，您可以使用这样的参数跳过规范结构，因此您可能必须创建单独的规范：

```
class MyClassSpec extends SpecificationWithJUnit {

  args(skipAll = false)

  "MyClass" should {
    "do something" in {
      success
    }

    "do something with db" in {
      success
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-21T17:46:28.860

解决此问题的新功能[已添加到规范 2.3.10](https://github.com/etorreborre/specs2/issues/230#issuecomment-32728333)中。

# php - 未终止的字符串文字问题

> ID：10928845
> 
> 赞同：0
> 
> 时间：2012-06-07T09:08:29.500
> 
> 标签：php, javascript

这里的第一个计时器，当涉及到 PHP 和 JavaScript 时，完全是菜鸟。

我有 2 行相同的代码，但是其中一个可以工作，一个可以解决未终止的字符串文字错误。

一个有效的：

```
<script type="text/javascript">
  document.getElementById('vehiclemake').value
                                         = "<?php echo $_POST['vehiclemake'];?>";
</script> 
```

一个没有：

```
<script>
  document.getElementById('PostcodeSelect').value =
                                        "<?php echo $_POST['PostcodeSelect'];?>";
</script> 
```

我唯一能想到的是邮政编码选择 POST 变量中有一个下划线，例如： AB1_1BA 这需要转义吗？

非常感谢任何帮助，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:10:27.133

考虑使用`json_encode()`：

```
document.getElementById('vehiclemake').value = <?php echo json_encode($_POST['vehiclemake']);?>; 
```

它会注意正确引用字符串中的所有特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:13:09.917

对于你的东西，如果`$_POST`变量 has `chr(10)`，它也可能是一个问题。所以`trim()`在`$_POST['PostcodeSelect']`.

```
<script type="text/javascript">
    document.getElementById('PostcodeSelect').value="<?php echo trim($_POST['PostcodeSelect']); ?>";
</script> 
```

可能工作！最佳的揣测！

# hudson - 如何在 Hudson 的工作之间共享有关 SCM 变化的信息？

> ID：10928848
> 
> 赞同：1
> 
> 时间：2012-06-07T09:08:59.037
> 
> 标签：hudson

有什么方法可以在下游作业中获取有关上游作业中 SCM 更改的信息？
例如，如果我们有一个触发一些测试作业的构建作业（使用 SCM 轮询），那么测试作业如何检索并在仪表板中显示有关触发该测试作业的构建作业中的 SCM 更改的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:20:56.727

不确定 Hudson，但对于 Jenkins，我们使用[Blame Subversion 插件](https://wiki.jenkins-ci.org/display/JENKINS/BlameSubversion)。

# linux - 如何访问打开的终端会话

> ID：10928849
> 
> 赞同：0
> 
> 时间：2012-06-07T09:09:01.500
> 
> 标签：linux, ipad, session, terminal, remote-access

我想知道是否可以在任何操作系统上远程连接到已经打开的终端提示会话，因为使用提示应用程序切换到 iPad 并且无法连接到它时会变得非常烦人开会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:39:54.793

你看过屏幕程序吗？它允许您一次运行多个会话并从其他设备/会话连接到它们。

[http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/](http://www.rackaid.com/resources/linux-screen-tutorial-and-how-to/)

# android - Android TtsService.apk？

> ID：10928854
> 
> 赞同：1
> 
> 时间：2012-06-07T09:09:54.657
> 
> 标签：android, text-to-speech

[维基百科](http://en.wikipedia.org/wiki/Speech_synthesis)：**Android 1.6 版增加了对语音合成 (TTS) 的支持**。
但我的问题是“是否有任何 Android 设备有 TtsService.apk”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:36:19.730

Android 1.6+ 在每台设备上都有内置的 TTS 服务（可能缺少一些极端的自定义）。对于扩展的 TTS 服务 - 即使用插件第三方引擎的能力 - 必须从 Market 下载免费的“TTS Services Extended”应用程序。

在 Android 2.2 及更高版本（当前安装基础的大部分）上，扩展的 TTS 服务已内置。

具体的 APK 名称无关紧要，它是一个实现细节。

编辑：1。引用[http://developer.android.com/resources/articles/tts.html](http://developer.android.com/resources/articles/tts.html)：

> 从 Android 1.6（API 级别 4）开始，Android 平台包括一个新的文本转语音 (TTS) 功能。

2\. “TTS（文件）”是什么意思？Android 1.5 及以下的标准引擎？扩展的 TTS 服务？一些第三方引擎？你自己的引擎？

# apache - Apache Benchmark HTTPS 失败

> ID：10928855
> 
> 赞同：6
> 
> 时间：2012-06-07T09:10:02.817
> 
> 标签：apache, ssl, benchmarking

我在 Ubuntu 虚拟机中使用 Apache 2.4.2。我用它来加载测试，向一些 HTTPS url 发送请求。失败的请求数为零。但是我的任何请求都不能真正得到处理（已经在数据库中查找过）。使用相同的url，通过浏览器调用它就可以了（数据库更新了）。所以这纯粹是 Apache Benchmark 的问题。这是我的 Apache Benchmark 命令：

```
# ab -n 100 -c 10 -k -f ALL -g "/home/administrator/Desktop/g.txt" -e "home/administrator/Desktop/e.txt" "https://mysecuredurl.com/MyWCF.svc/POX/MyMethod?arg=something" 
```

当我省略 -k 参数时，SSL 连接清楚地表明它们是问题所在：

**SSL 读取失败 - 关闭连接**

```
Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:      845  851   4.0    852     857
Processing:   218  232  20.4    229     286
Waiting:      218  232  20.4    229     286
Total:       1068 1083  19.6   1076    1131 
```

有谁知道如何解决这个问题，以便我可以利用 Apache Benchmark 进行 HTTPS 负载测试，通过 SSL 问题？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T15:29:43.167

当我将 ab 与 https URL 一起使用时，它以 **SSL not compiled in 这条消息将我赶出去；不支持 https**

**使用abs**效果很好

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-17T12:31:51.313

不幸的是，这似乎是一个已知的错误

[https://issues.apache.org/bugzilla/show_bug.cgi?id=49382](https://issues.apache.org/bugzilla/show_bug.cgi?id=49382)

那里有一个补丁，但没有关于如何应用它的明确说明。您可能想先看看[http://jungels.net/articles/diff-patch-ten-minutes.html](http://jungels.net/articles/diff-patch-ten-minutes.html)。**

# android - 从图库中检索未缓存的 Picasa 图像。3.0 和 4.0

> ID：10928856
> 
> 赞同：10
> 
> 时间：2012-06-07T09:10:04.517
> 
> 标签：android, gallery, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, picasa

我的应用程序正在调用画廊，其意图如下所示：

```
Intent intent = new Intent(Intent.ACTION_PICK,
        android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(intent, SELECT_IMAGE_FROM_GALLERY); 
```

在版本 < 3.0 中没有问题。

在 3.0 及更高版本中，当您获取本地图像时，onActivityResult 方法中的 Intent 包含类似...

```
content://media/external/images/media/XXX 
```

但是当您选择 picasa 图像时，uri 类似于...

```
content://com.google.android.gallery3d.provider/picasa/item/XXXXXXXXXXXXXXXXXXXXX 
```

我阅读了很多关于该问题的信息，并尝试了许多解决方法。

目前，我可以使用以下方法获取缓存的图像：

```
getContentprovider().openInputStream(uri) 
```

问题是，当图像未缓存时，**openInputStream(uri)**方法会抛出**FileNotFoundException**，我无法获取图像:_(

任何人都知道如何获取文件或下载文件的网址或获取图像的东西？

谢谢！！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-03T23:29:50.720

正确的解决方案是使用[ACTION_GET_CONTENT](http://developer.android.com/reference/android/content/Intent.html#ACTION_GET_CONTENT)。它的名称可能听起来不像[ACTION_PICK](http://developer.android.com/reference/android/content/Intent.html#ACTION_PICK)那样直观，但它是您应该使用的名称。

使用`ACTION_GET_CONTENT`在您的画廊中挑选图像而不是使用`ACTION_PICK`并指向 ImageStore 的 URI 提供程序的原因是它**得到**`ACTION_GET_CONTENT`了**很好的支持**，而`ACTION_PICK`不是。Android 框架工程师多次[提到](https://stackoverflow.com/a/6486827/1922917)它。

 **我很难学会。在发现这一点之前，我不得不处理各种不一致。

* * *

**与此相关的注释**

您应该始终使用`openInputStream`通过 a 来获取文件`ContentResolver`，`URI`而不是尝试获取存储文件的真实路径。实施很可能`ContentProvider`是由云服务支持的（Picasa 就是这种情况），或者实施细节会随着时间而改变。

Android 的内容提供程序让您可以抽象出数据是如何被访问的。试图找出文件所在的位置是我看到的一个常见错误。通常建议是通过查询`DATA`给定的列来查找位置`URI`。根据`ContentProvider`使用情况，它可能会返回不同的东西，甚至随着时间的推移随着新版本的变化而变化。

通过使用`openInputStream`，您不必关心文件在哪里，您只需接收字节流并用它做您想做的事。这样，您就不会遇到支持来自其他应用程序（如 Google Drive、Dropbox 等）的内容提供者的问题，这些应用程序提供类似的选择器界面来选择图像。

我知道 OP 正在使用`openInputStream`，但其他答案却提出了不同的建议，这是我经常看到的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T02:34:06.797

另一种获取图片比特流的方法是通过 picasa api....

将一些映射应用到内容提供者 uri ...

内容：//com.google.android.gallery3d.provider/picasa/item/5703943700733980450

可以将其映射到 picasa api，如下所示：

项目=>照片名称？？白蛋白？？

picasaweb.google.com/data/entry/api/user/$NAME/albumid/nnnn/photoid/nnnn

以上是照片条目的 api 请求 - 请参阅 picasa 文档了解详细信息。

API 要求

姓名 相册ID photoID

我想你可以从手机上的帐户中获得姓名。AlbumID 很棘手，因为内容提供程序中的 /item/ 节点值不是可以使用关系来推断其所在专辑的 GUID。我不认为.. picasa 中的 AFAIK ，您需要用户、专辑、照片tuple 以获取对照片条目的引用，并且照片条目在 API 元素中具有大照片的 URL：

"media$group":{ "media$content":[ {"url":

如果相册的可见性是公开的，您可以获取 url 属性的 textvalue 并使用 http(s) 请求它。响应是 JPG 的二进制流。

[php picasa api 显示大图](https://stackoverflow.com/questions/10592633/php-picasa-api-show-large-image)

有关从 picasa api 获取所需图像的更多详细信息，请参阅上述链接中接受的答案。

在示例中使用我自己的内容 URI 之一...

内容：//com.google.android.gallery3d.provider/picasa/item/5703943700733980450

在缓存中不可用，那么如何获取图像？

好吧，帐户上的名称是“rowntreerob”，我知道 photoid 5703943700733980450 属于白蛋白 5703943611411433905。

所以，我对条目提出了一个 api 请求

> [https://picasaweb.google.com//data/entry/api/user/rowntreerob/albumid/5682316071017984417/photoid/5682316083381958690?fields=media%3Agroup%2Fmedia%3Athumbnail%5B%40url%5D%2Cmedia%3Agroup%2Fmedia %3Acontent%5B%40url%5D&alt=json](https://picasaweb.google.com//data/entry/api/user/rowntreerob/albumid/5682316071017984417/photoid/5682316083381958690?fields=media%3Agroup%2Fmedia%3Athumbnail%5B%40url%5D%2Cmedia%3Agroup%2Fmedia%3Acontent%5B%40url%5D&alt=json)

并检查文本值的响应

"media$group":{ "media$content":[ {"url":

值= [https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/DSC01612.JPG](https://lh3.googleusercontent.com/-_FFMNGPU1TQ/TtukXyN4eCI/AAAAAAAACso/EzPmut2iKVQ/DSC01612.JPG)

我使用上面的值发出照片图像请求，并且我有图像。

* * *

Gallery 3D 应用程序还具有您可以分叉的代码，因为无论它在缩略图列表之一上检测到“触摸”，它都会委托给 contentProvider 接口以“获取”BMP。我相信这个接口封装了上面提到的所有血淋淋的实现。通过要求 ContentProvider 生成 BMP，开发者不必担心实现的味道？？在 thumbtouch 上，Gallery3d 可能只要求提供者返回 BMP 及其负责解析缓存的各种状态以及是否需要网络调用来返回 BMP 的提供者实例。**

# forms - 如何在 z3c.form 按钮处理程序中显示另一个表单？

> ID：10928858
> 
> 赞同：0
> 
> 时间：2012-06-07T09:10:08.027
> 
> 标签：forms, plone, z3c.form

我有一个带有单个文本字段的表单。

在提交时，我想显示另一个表单。

我可以使用 RESPONSE.redirect() 并将其传递到查询字符串中，但我宁愿不这样做。

我不想使用 SESSION 变量。

我想显示第二种形式，它可以从请求变量中读取这个值。

我查看了collective.z3cform.wizard，但如何做到这一点并不明显。

尝试从按钮处理程序调用 view() 似乎没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:22:33.490

我同样缺乏功能。

据我所知， z3c.form 不支持这种遍历。

您可能还记得这个功能与 CMFFormController 配合得很好。实际上，为了做到这一点，cmfformcontroller 使用了会话机制。

所以，你不想使用会话，但就是这样。至少我这样做了，而且我很高兴。

这样就不需要像 z3c.form.wizard 这样的包装工具了。

hth，亚历山德罗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:52:20.630

collective.singing 有一个非基于会话的向导，它使用隐藏字段来存储中间步骤的结果。

# django - 具有由 django-guardian 分配的权限的对象在管理员中不可见

> ID：10928860
> 
> 赞同：10
> 
> 时间：2012-06-07T09:10:13.440
> 
> 标签：django, permissions, django-admin, django-authentication, django-guardian

我正在使用[django-guardian](https://github.com/lukaszb/django-guardian)来管理每个对象的权限。

对于给定的用户，我授予对一个对象的所有权限：

```
joe = User.objects.get(username="joe")

mytask = Task.objects.get(pk=1)

assign('add_task', joe, mytask)
assign('change_task', joe, mytask)
assign('delete_task', joe, mytask) 
```

正如预期的那样，我得到：

```
In [57]: joe.has_perm("add_task", mytask)
Out[57]: True

In [58]: joe.has_perm("change_task", mytask)
Out[58]: True

In [59]: joe.has_perm("delete_task", mytask)
Out[59]: True 
```

在 admin.py 我也让 TaskAdmin 继承自`GuardedModelAdmin`而不是`admin.ModelAdmin`

现在，当我使用 joe 连接到我的网站时，在管理员上我得到：

```
You don't have permission to edit anything 
```

我不应该能够编辑对象 mytask 吗？

我是否必须使用内置的基于模型的权限系统设置一些权限？

我错过了什么吗？

**编辑**

我试图添加选项`user_can_access_owned_objects_only`，它应该可以解决我的问题，但我仍然在我的管理员中看不到任何东西......

```
class TaskAdmin(GuardedModelAdmin):

    user_can_access_owned_objects_only = True

    pass

admin.site.register(Task, TaskAdmin) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T16:41:55.910

为了只看到当前用户拥有的实例，我给了他所有权限

```
add_task=Permission.objects.get(codename="add_task")
change_task=Permission.objects.get(codename="change_task")
delete_task=Permission.objects.get(codename="delete_task")

joe.user_permissions.add(add_task)
joe.user_permissions.add(change_task)
joe.user_permissions.add(delete_task) 
```

然后我使用 Guardian.shortcuts.assign 在几个实例上设置权限，并在管理员中过滤查询集：

```
class TaskAdmin(admin.ModelAdmin):

    def queryset(self, request):
            if request.user.is_superuser:
                return super(TaskAdmin, self).queryset(request)
            return get_objects_for_user(user=request.user, perms=['add_task', 'change_task', 'delete_task'], klass=Task) 
```

它远非完美，但我找不到任何其他解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-11T13:43:31.440

Django Admin，特别是它处理 w/`change`权限，有点粗粒度。内部方法`ModelAdmin.has_change_permission()`涵盖了`view`实际缺乏的权限检查。

其次，`GuardedModelAdmin`带来了所有权检查（通过`user_can_access_owned_objects_only`）和用于管理行级权限的表单。它不向 Django Admin 提供任何其他行级访问策略。

对于 Django Admin 中典型的行级权限场景，我想建议代码，这里我引入了一个可选的“查看”权限：

```
class ExtendedGuardedModelAdmin(GuardedModelAdmin):
    def queryset(self, request):
        qs = super(ExtendedGuardedModelAdmin, self).queryset(request)
        # Check global permission
        if super(ExtendedGuardedModelAdmin, self).has_change_permission(request) \
            or (not self.list_editable and self.has_view_permission(request)):
                return qs
        # No global, filter by row-level permissions. also use view permission if the changelist is not editable
        if self.list_editable:
            return get_objects_for_user(request.user, [self.opts.get_change_permission()], qs)
        else:
            return get_objects_for_user(request.user, [self.opts.get_change_permission(), self.get_view_permission(
)], qs, any_perm=True)

    def has_change_permission(self, request, obj=None):
        if super(ExtendedGuardedModelAdmin, self).has_change_permission(request, obj):
            return True
        if obj is None:
            # Here check global 'view' permission or if there is any changeable items
            return self.has_view_permission(request) or self.queryset(request).exists()
        else:
            # Row-level checking
            return request.user.has_perm(self.opts.get_change_permission(), obj)

    def get_view_permission(self):
        return 'view_%s' % self.opts.object_name.lower()

    def has_view_permission(self, request, obj=None):
        return request.user.has_perm(self.opts.app_label + '.' + self.get_view_permission(), obj)

    def has_delete_permission(self, request, obj=None):
        return super(ExtendedGuardedModelAdmin, self).has_delete_permission(request, obj) \
                or (obj is not None and request.user.has_perm(self.opts.get_delete_permission(), obj)) 
```

这样，您可以实现更灵活的权限检查，用户权限现在是全局的，用户对象权限是基于行级的：

*   `joe.user_permissions.add(add_task)`
    joe 可以添加新任务（没有行级“添加”权限）
*   `joe.user_permissions.add(change_task)`
    乔可以改变所有的任务
*   `joe.user_permissions.add(delete_task)`
    joe 可以删除所有任务
*   `assign(Task._meta.get_change_permission(), joe, obj)`
    joe 可以更改 Task obj，查看包含 obj 的更改列表以及其他可更改的任务。
*   `assign(Task._meta.get_delete_permission(), joe, obj)`
    joe 可以删除任务 obj
*   `assign('view_task', joe, obj)`
    *[可选]* joe 可以查看任务 obj（您可能希望在自定义管理视图页面检查此权限）
*   `joe.user_permissions.add(Permission.objects.get(codename='view_task', ...))`
    *[可选]* joe 可以查看更改列表中的所有任务，只要更改列表不可内联编辑。如果 joe 可以在没有更改权限的情况下从 raw_id_fields 中获取项目，这将很有用。
*   ...

如果它对您没用，您可以安全地忽略“查看”权限。

目前，`django.contrib.admin.util.get_deleted_objects`在检查权限时不尊重 obj，如果您需要在删除时检查行级权限，请将行`get_deleted_objects`修改`if not user.has_perm(p):`为`if not user.has_perm(p, obj):`. 相关票是[13539](https://code.djangoproject.com/ticket/13539) & [16862](https://code.djangoproject.com/ticket/16862)

# asp.net - DataAnnotationsModelMetadataProvider containerType, modelType

> ID：10928862
> 
> 赞同：1
> 
> 时间：2012-06-07T09:10:18.667
> 
> 标签：asp.net, asp.net-mvc-3

`DataAnnotationsModelMetadataProvider`'s`GetMetadataForProperties(..., Type containerType)` 和`GetMetadataForType(..., Type modelType)`.中的 containerType 和 modelType 有什么区别？我还想提供它们的值的示例，例如对于带有 CustomerViewModel 的一些虚构的“编辑”页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:23:52.907

`GetMetadataForProperties``ModelMetadata`为在 中找到的每个属性返回一个实例`containerType`。

因此，如果您有：

```
public class CustomerViewModel
{
   [DisplayName("Customer Name")]
   public string Name { get; set; }
   public string AccountNumber { get; set; }
   // etc.
} 
```

这个示例代码：

```
var model = new CustomerViewModel();

var propertiesMetadata = provider.GetMetadataForProperties(model, model.GetType());

var customerName = propertiesMetadata.Where(m => m.PropertyName == "Name").First().DisplayName; // customerName would equal "Customer Name" 
```

而`GetMetadataForType`获取表面上是容器本身的元数据。

例子：

```
var model = new CustomerViewModel();

var metadata = provider.GetMetadataForType(() => model, model.GetType());

var customerName = metadata.Properties.Where(m => m.PropertyName == "Name").First().DisplayName; // customerName would equal "Customer Name" 
```

这些东西主要用于内部的模型绑定、验证和视图引擎。

在视图本身中，您不能直接访问这些方法。您的视图已经`ModelMetadata`可以访问了。以下视图（`CustomerViewModel`用作模型类型）打印出一个带有模型每个属性的显示名称的跨度。

```
@foreach (var propertyMetadata in ViewData.ModelMetadata.Properties) {
  <span>@propertyMetadata.DisplayName</span>
}

// the resulting HTML should be <span>Customer Name<span><span>Account Number</span> 
```

# javascript - 无法为 Firefox 扩展创建 javascript XPCOM 服务

> ID：10928864
> 
> 赞同：0
> 
> 时间：2012-06-07T09:10:19.147
> 
> 标签：javascript, firefox-addon, xpcom

两天多来，我一直在用头撞这堵特殊的砖墙。我正在尝试创建用于 Firefox 扩展的 XPCOM 服务，但无法初始化组件，并在 Firefox 的错误控制台中显示以下错误。

```
Timestamp: 07/06/2012 09:23:28 Error: uncaught exception: [Exception... 
"Component returned failure code: 0x80570016 (NS_ERROR_XPC_GS_RETURNED_FAILURE)
[nsIJSCID.getService]"  nsresult: "0x80570016 (NS_ERROR_XPC_GS_RETURNED_FAILURE)"
location: "JS frame :: chrome://logger/content/logger.js :: <TOP_LEVEL> :: line 21"
data: no] 
```

[我使用ted.mielczarek.org](http://ted.mielczarek.org/code/mozilla/jscomponentwiz/ "ted.mielczarek.org")上出色的样板生成器将组件减少到最低限度。组件代码如下...

```
const nsISupports = Components.interfaces.nsISupports;
const CLASS_ID = Components.ID("808e1607-caea-418c-b563-d9fe1df6ee08");
const CLASS_NAME = "Test component";
const CONTRACT_ID = "@test/loggerservice;1";

function LoggerService() {
  this.wrappedJSObject = this;
}

LoggerService.prototype = {
  QueryInterface: function(aIID)
  {
    if (!aIID.equals(nsISupports))
      throw Components.results.NS_ERROR_NO_INTERFACE;
    return this;
  }
} 
```

创建模块和工厂接口的样板的其余部分保持不变。

chrome.manifest 文件看起来像这样......

```
content   logger                 chrome/content/
skin      logger   classic/1.0   chrome/skin/
locale    logger   en-US         chrome/locale/en-US/

component {808e1607-caea-418c-b563-d9fe1df6ee08} components/loggerservice.js
contract @test/loggerservice;1 {808e1607-caea-418c-b563-d9fe1df6ee08}

overlay chrome://browser/content/browser.xul chrome://logger/content/logger-overlay.xul
style   chrome://global/content/customizeToolbar.xul chrome://logger/skin/overlay.css 
```

最后，该`logger-overlay.xul`文件包含一个脚本文件`logger.js`——它尝试`LoggerService`使用以下代码获取对组件的引用...

```
this.loggerService = Components.classes["@test/logger;1"].getService().wrappedJSObject; 
```

正是这一行在 Firefox 错误控制台中报告。

我看不出我可以使它变得多么简单-非常感谢任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:03:44.433

这是一个不错的样板生成器，但不幸的是它已经过时了。一方面，您应该使用[XPCOMUtils](https://developer.mozilla.org/en/JavaScript_code_modules/XPCOMUtils.jsm)，这将摆脱大部分样板文件。更重要的是，这个样板生成器没有更新到[Gecko 2.0 中的 XPCOM 更改，](https://developer.mozilla.org/en/XPCOM/XPCOM_changes_in_Gecko_2.0#JavaScript_components)并且定义了`NSGetModule`函数而不是`NSGetFactory`. 像这样的模块代码应该可以工作：

```
Components.utils.import("resource://gre/modules/XPCOMUtils.jsm");

function LoggerService() {
  this.wrappedJSObject = this;
}

LoggerService.prototype = {
  classID: Components.ID("808e1607-caea-418c-b563-d9fe1df6ee08"),
  classDescription: "Test component",
  contractID: "@test/loggerservice;1",

  QueryInterface: XPCOMUtils.generateQI([])
}

if ("generateNSGetFactory" in XPCOMUtils)
  var NSGetFactory = XPCOMUtils.generateNSGetFactory([LoggerService]);  // 2.0+
else
  var NSGetModule = XPCOMUtils.generateNSGetModule([LoggerService]);    // 1.9.x 
```

`NSGetModule`如果您的扩展不需要与 Firefox 3.6 兼容，您可以删除代码。您也可以删除`classDescription`and`contractID`属性，这些`chrome.manifest`已经在中指定。

*注意*：如果您只需要一个在整个浏览会话期间都存在并且可以从任何地方访问的对象，那么[JavaScript 代码模块](https://developer.mozilla.org/en/JavaScript_code_modules/Using)将是一个更好的选择 - 没有 XPCOM 样板，也没有`wrappedJSObject`hack。

# c++ - 信号 SIGABRT 即使我在 C++ 中使用 delete[]

> ID：10928868
> 
> 赞同：0
> 
> 时间：2012-06-07T09:10:33.750
> 
> 标签：c++, xcode

```
Mat::Mat(int R, int C)
{
    Ar = new int[C*R];
    Co = C;
    Ro = R;
}

Mat::~Mat()
{
    delete[] Ar;
} 
```

然而我在这个“删除”上得到了“信号 SIGABRT”。

**编辑：**
我使用 XCODE，也尝试添加硬拷贝构造函数。我仍然在 delete[] 中收到此错误：

```
Mat::Mat(int R, int C)
{
    Ar = new int[C*R];
    Co = C;
    Ro = R;
}

Mat::Mat(const Mat& M): Co(M.Co), Ro(M.Ro)
{
    Ar = new int[M.Co*M.Ro];
    for (int i = 0; i<(M.Co*M.Ro); i++) {
        Ar[i] = M.Ar[i];
    }
}

Mat::~Mat()
{
    delete[] Ar;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:11:52.490

这更像是心理调试，但我非常确信，这是根本原因：
您应该遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。您应该为制作指针的深层副本的 类
提供自己的***复制构造函数***和***复制赋值运算符。***`Mat`

如果您没有上述函数的自定义版本，那么`Ar`每当您的类对象的临时副本被创建和销毁时，分配给指针成员的动态内存就会被释放，最终您会留下一个悬空指针成员，最后`delete []`被调用它导致**未定义的行为**和崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:21:34.860

如果您的代码中的任何地方都有类似的内容：

```
{
Mat A(R1,C1);//create A.Ar
MAT B(A);//now B.Ar will point to A.Ar array
}//delete will be called twice for the same array 
```

# php - PHP 将对象转换为数组

> ID：10928869
> 
> 赞同：5
> 
> 时间：2012-06-07T09:10:35.903
> 
> 标签：php, arrays, zend-framework

当具有私有变量的对象已转换（转换）为 php 中的数组时，数组元素键将以

> *_

. 如何删除存在于数组键开头的“*_”？

例如

```
class Book {
    private $_name;
    private $_price;
} 
```

投射后的数组

```
array('*_name' => 'abc', '*_price' => '100') 
```

我想

```
array('name' => 'abc', 'price' => '100') 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T14:41:58.793

我是这样做的

```
class Book {
    private $_name;
    private $_price;

    public function toArray() {
        $vars = get_object_vars ( $this );
        $array = array ();
        foreach ( $vars as $key => $value ) {
            $array [ltrim ( $key, '_' )] = $value;
        }
        return $array;
    }
} 
```

当我想将书籍对象转换为数组时，我调用 toArray() 函数

```
$book->toArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T09:29:53.260

要正确执行此操作，您需要`toArray()`在类中实现一个方法。这样，您可以保护您的属性，并且仍然可以访问属性数组。
有很多方法可以做到这一点，如果您将对象数据作为数组传递给构造函数，这是一种有用的方法。

```
//pass an array to constructor
public function __construct(array $options = NULL) {
        //if we pass an array to the constructor
        if (is_array($options)) {
            //call setOptions() and pass the array
            $this->setOptions($options);
        }
    }

    public function setOptions(array $options) {
        //an array of getters and setters
        $methods = get_class_methods($this);
        //loop through the options array and call setters
        foreach ($options as $key => $value) {
            //here we build an array of values as we set properties.
            $this->_data[$key] = $value;
            $method = 'set' . ucfirst($key);
            if (in_array($method, $methods)) {
                $this->$method($value);
            }
        }
        return $this;
    }

//just return the array we built in setOptions
public function toArray() {

        return $this->_data;
    } 
```

您还可以使用您的 getter 和代码构建一个数组，以使数组看起来像您想要的那样。您也可以使用 __set() 和 __get() 来完成这项工作。

当一切都说完了，目标将是有这样的东西：

```
//instantiate an object
$book = new Book(array($values);
//turn object into an array
$array = $book->toArray(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:11:58.437

您可能会遇到问题，因为您正在访问其允许范围之外的私有变量。

尝试更改为：

```
class Book {
    public $_name;
    public $_price;
} 
```

或者，一个黑客：

```
foreach($array as $key => $val)
{
   $new_array[str_replace('*_','',$key)] = $val;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-31T07:17:08.073

以下是将对象转换为数组的步骤

1）。将对象转换为数组

2）。将数组转换为 json 字符串。

3）。替换字符串以删除“*_”

```
e.g
    $strArr= str_replace('\u0000*\u0000_','',json_encode($arr));
    $arr = json_decode($strArr); 
```

# android - AdMob 广告根本没有展示

> ID：10928871
> 
> 赞同：3
> 
> 时间：2012-06-07T09:10:41.927
> 
> 标签：android, sdk, admob, manifest

所以我下载了最新的admob sdk。按照所有说明将其导入项目等。

然后我通过将 project.properties 目标更改为 android-13 并将 min-sdk 设置为 10 来做了允许 2.3.3 中的广告的事情。

在清单中也声明了这一点：

```
<activity android:name="com.google.ads.AdActivity"
                       android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

像这样在 XML 中声明 AdView：

```
<com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="xxxxxx"    <!--replaced xxxxxx with publisher id-->
                     ads:adSize="BANNER"
                     ads:testDevices="xxxxx"  <!--replaced xxxxx with device id-->
                     ads:loadAdOnCreate="true"/> 
```

毕竟这一切的广告根本没有出现！在图形布局中，它说无法实例化类

我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:28:34.293

您是否将`admob.jar`文件包含在项目`libs`目录中？

# android - 从字符串生成 xml 文件

> ID：10928875
> 
> 赞同：1
> 
> 时间：2012-06-07T09:11:06.233
> 
> 标签：android, xml, string

我想从字符串创建 xml 文件，即我有一个要转换为 xml 文件的字符串，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T15:13:55.480

试试下面的代码：

```
String pathname="D:\\XML files\\text.xml"; //specify your file path here
FileWriter out=new FileWriter(pathname);
out.write(str); // Assuming that str contains text to be writen in xml file i.e. well formed xml string
out.close(); 
```

如果以上不起作用，请写：

```
out.write(str.trim()); 
```

反而。

# .net - 在gridview中获取标签文本

> ID：10928877
> 
> 赞同：0
> 
> 时间：2012-06-07T09:11:19.760
> 
> 标签：.net, winforms, gridview

我想从gridview获取单元格值，但返回空字符串。我
在radiobuttonlist的selectedindexchanged事件中实现代码。我遍历gridview并按代码访问单元格。但问题仍然存在。我使用了三个itemtemplate，每个都有一个elemnt这样每个元素都有自己的 .aspx

```
 <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="false" >

               <Columns>
<asp:TemplateField>
    <itemtemplate>
                <asp:Label ID="Label2" runat="server" Text='<%# Eval("qno") %>'>

           </asp:Label>
               </ItemTemplate>
          </asp:TemplateField>

          <asp:TemplateField>

          <ItemTemplate>
                    <asp:Label ID="Label3" runat="server" Text='<%# Eval("description") 
        %>'>

          </ItemTemplate>
          </asp:TemplateField>
    <asp:TemplateField>
    <itemtemplate>
          <asp:RadioButtonList ID="RadioButtonList1" RepeatDirection="Horizontal" 
           runat="server" OnSelectedIndexChanged="changed"  AutoPostBack="true" >

             <asp:ListItem   Value="agree" Selected="True" >

             </asp:ListItem>
               <asp:ListItem 
                Value="disagree">

             </asp:ListItem>
               <asp:ListItem Value="strongagree">

             </asp:ListItem>
               <asp:ListItem Value="strondisagree">

             </asp:ListItem>
                </asp:RadioButtonList>
    </itemtemplate>
    </templatefield>
                </Columns>

           </asp:GridView>

         <asp:Label ID="Labe11" runat="server" ></asp:Label>
        Code behind: public void changed(object sender, EventArgs e) {

              for(int i=0;i<GridView2.Rows.Count;i++)
              {
                  string labtext;
                    RadioButtonList list = 
            GridView2.Rows[i].Cells[2].FindControl("RadioButtonList1") as RadioButtonList;
                   labtext= GridView2.Rows[i].Cells[0].Text;

                   Label1.Text = labtext;

              }

                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:38:25.020

您是否包含了上述 .aspx 页面中的所有 HTML？你在那里拥有的东西是行不通的。ItemTemplates 不构成列，它们包含*在*TemplateField 列中。

示例（改编自您的代码， http:
[//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.itemtemplate.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield.itemtemplate.aspx)
和[http://msdn.microsoft.com/en-us /图书馆/aa479353.aspx](http://msdn.microsoft.com/en-us/library/aa479353.aspx)）：

```
<asp:GridView ID="GridView1" Runat="server" 
    <Columns>

        <asp:TemplateField HeaderText="Description">
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" Text='<%# Eval("description") %>'>
            </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText="Choice">
            <ItemTemplate>
                <asp:RadioButtonList ID="RadioButtonList1" RepeatDirection="Horizontal" runat="server" OnSelectedIndexChanged="changed"  AutoPostBack="true" >
                    <asp:ListItem Value="agree" Selected="True" />
                    <asp:ListItem Value="disagree" />
                    <asp:ListItem Value="strongagree" />
                    <asp:ListItem Value="strondisagree" />
                </asp:RadioButtonList>
            </ItemTemplate>
        </asp:TemplateField>

    </Columns>
</asp:GridView> 
```

您需要为每列单独定义 TemplateField。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T18:10:47.333

请改用这个：

```
GridView2.Rows[i].FindControl("RadioButtonList1") as RadioButtonList; 
```

问候， 西瓦库玛

# c# - 将文件上传到两台 Web 前端服务器 - 如何合并到一个位置？

> ID：10928880
> 
> 赞同：0
> 
> 时间：2012-06-07T09:11:36.157
> 
> 标签：c#, .net, web-applications

我已经构建了一个使用两个 Web 前端服务器的 Web 应用程序，用户通过相同的 URL 随机定向到其中一个。该网络应用程序具有上传和下载文件的特定功能。上传文件时，它会存储在上传到的服务器上的特定目录中。

问题是，当用户将文件上传到服务器 1 上的文件夹时，任何尝试从服务器 2 下载相同文件的用户都将无法下载，因为它只存在于上传文件的服务器上。

解决这个问题的最佳方法是什么？我正在查看： - 使用 SAN，这里的问题是我不想更改或创建域 - 编写 Windows 服务，如果可能，希望避免这种情况，我以前没有做过，但会给出必要时去

提前致谢！

乔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:22:37.703

除非我遗漏了一些非常明显的东西，否则您只需要一个共享位置。这可以是通过 UNC 路径寻址的网络共享、FTP 服务器上的文件夹、数据库等等，只要它是

1.  共享，
2.  可从两个 Web 服务器访问
3.  web-application 服务帐户对其具有读/写权限。

根据您的要求，文件服务器上的网络共享（可能是 2 个 Web 服务器中的 1 个，或者负载平衡器，或者（理想情况下）完全是一个新服务器）将是最简单的方法。

# java - 错误 - /bin/sh: java: command not found

> ID：10928881
> 
> 赞同：6
> 
> 时间：2012-06-07T09:11:46.470
> 
> 标签：java, macos, sublimetext2

当我尝试在我的 Mac 上从 SublimeText 2 运行 JSLint 时出现以下错误：

```
/bin/sh: java: command not found 
```

我认为这与Java不在`PATH`Mac上有关，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:17:43.933

打开终端并开始编辑 .bash_profile

```
vi ~/.bash_profile 
```

然后添加以下内容

```
export JAVA_HOME=/usr/java/jdk<your JDK folder>

export PATH=$PATH:/usr/java/jdk<your JDK folder>/bin 
```

保存并关闭。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T09:18:07.833

从[这篇文章](http://www.tech-recipes.com/rx/2621/os_x_change_path_environment_variable/)和其他几篇文章来看，您似乎编辑了您的`~/.profile`文件（`.profile`在您的主目录中），找到以 开头的行，并在开头或结尾`export PATH=...`添加 Java目录，将其与上一个/下一个元素分开`bin`带有冒号 ( `:`)。

例如，如果它看起来像这样：

```
export PATH=/opt/local/bin:/opt/local/sbin:$PATH 
```

将其更改为

```
export PATH=/opt/local/bin:/opt/local/sbin:$PATH:/path/to/java/bin 
```

或者

```
export PATH=/opt/local/bin:/opt/local/sbin:/path/to/java/bin:$PATH 
```

# java - primefaces 组件未使用数据领域正确呈现

> ID：10928884
> 
> 赞同：1
> 
> 时间：2012-06-07T09:11:54.130
> 
> 标签：java, css, primefaces, jdbcrealm

我正在使用数据领域进行登录身份验证。它工作正常。我还在我的应用程序中使用 primefaces 3.2 组件，它们也可以正常工作，但问题出现在登录前的主页上。primefaces 组件未正确呈现（例如，选项卡菜单显示为一个下方的简单链接，按钮显示为简单的 jsf 按钮等）并且登录工作正常，当我从浏览器清除浏览历史记录时， primefaces 已正确呈现，但现在领域无法工作，我被重定向到错误页面，为什么会发生这种情况？我该如何解决？由于这个原因，我的应用程序的主页被毁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:28:07.077

您的 Primefaces 资源似乎位于受限文件夹中。从您的安全约束定义中排除资源文件夹。

这是我的一个项目的示例配置。首先，我限制对整个项目的访问（只允许特定角色访问）：

```
<security-constraint>
        <display-name>Secured project</display-name>
        <web-resource-collection>
            <web-resource-name>Secured project</web-resource-name>
            <description/>
            <url-pattern>/*</url-pattern>
        </web-resource-collection>
        <auth-constraint>
            <description/>
            <role-name>user</role-name>
            <role-name>admin</role-name>
        </auth-constraint>
    </security-constraint> 
```

然后我为任何用户可以访问的文件夹添加例外：

```
<security-constraint>
    <display-name>Exceptions</display-name>
    <web-resource-collection>
        <web-resource-name>Exceptions</web-resource-name>
        <description/>
        <url-pattern>/resources/*</url-pattern>
        <url-pattern>/faces/resources/*</url-pattern>
        <url-pattern>/faces/javax.faces.resource/*</url-pattern>
    </web-resource-collection>
</security-constraint> 
```

您需要根据您的安全策略和文件夹结构进行调整。

# eclipse-emf - 使用 Ecore 分类器的 OCL 约束 - 未知类型异常

> ID：10928886
> 
> 赞同：0
> 
> 时间：2012-06-07T09:12:01.230
> 
> 标签：eclipse-emf, eclipse-emf-ecore, invariants, ocl

我正在使用 OCLinEcore 编辑器开发一个在 OCL 中定义了一些不变量的 Ecore 模型。在我的模型中，一些元素引用了 EClassifier；在某些 OCL 约束中，我需要检查所引用的 EClassifier 是 EDataType 还是 EClass。在 OCLinEcore 中，这是一个类似于我的模型：

```
import ecore : 'http://www.eclipse.org/emf/2002/Ecore#/';

package Foo : foo = 'some_namespace'
{
  class EndPoint
  {
    attribute name : String[1];
    property type : ecore::EClassifier[1];
  }

  class Coupling
  {
    invariant Compatibility:
      (destination.type.oclIsKindOf(ecore::EDataType) and source.type = destination.type) or
      let destinationClass : ecore::EClass = destination.type.oclAsType(ecore::EClass) in
      destinationClass.isSuperTypeOf(source.type.oclAsType(ecore::EClass));

    property source : EndPoint[1];
    property destination : EndPoint[1];
  }
} 
```

但是，当我尝试验证模型的动态实例时，会出现异常并显示以下消息：

> 在“耦合”上委派评估“兼容性”约束时发生异常：未知类型（[ecore，EDataType]）

当我在 OCL 交互式控制台中尝试表达式时，我得到了正确的结果。定义我的不变量时我做错了什么吗？如何编写使用 Ecore 类型的不变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T12:09:14.503

[Edward Willink在 OCL 论坛](http://www.eclipse.org/forums/index.php/mv/msg/359602/882849/#msg_882849)上给了我一个解释和解决方法：

> 裸 OCL 不支持将 ecore 绑定到有用的东西，因此 oclAsType(ecore::EClass) 具有未解析的引用，因为每个 ecxpression 都是 ECore 文件中的独立片段。
> 
> 因此，Juno 版本添加了一个扩展，其中包限定符可能是一个 URI，因此如果您看到上面的序列化它可能是 oclAsType(_'http://www.eclipse.org/emf/2002/Ecore'::ecore ::E类）。
> 
> Juno 版本还增加了您是否将新的 Pivot 绑定与此扩展功能一起使用的灵活性。在 Window->Preferences->OCL 页面中，确保为默认委托选择的执行程序是 [http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot](http://www.eclipse.org/emf/2002/Ecore/OCL/Pivot)。

# php - PHP Session 变量消失？

> ID：10928889
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:12:13.117
> 
> 标签：php, session, variables

我有 3 个页面，login.php、login_validate.php 和 userhome.php。我的问题是登录信息已正确传递给 login_validate.php，但当 login_validate 重定向到 userhome.php 时似乎消失了

任何帮助，将不胜感激。

登录.php

```
<form name="login" action="login_validate.php" method="post">
    Username: <input type="text" name="myusername" /><br />
    Password: <input type="password" name="mypassword" /><br />
    <input type="submit" value="Login" />
</form> 
```

login_validate.php（我知道，它很长）

```
<?php

  include'connect.php';

  // username and password sent from form
  if(isset($_POST['myusername']) and isset($_POST['mypassword'])){
    $myusername=$_POST['myusername'];
    $mypassword=$_POST['mypassword'];
  }else{
    header('Location:login.php?failatvalidate');
  }
  // To protect MySQL injection (more detail about MySQL injection)
  $myusername = stripslashes($myusername);
  $mypassword = stripslashes($mypassword);
  $myusername = mysql_real_escape_string($myusername);
  $mypassword = mysql_real_escape_string($mypassword);

  $mypassword = hash('sha256', $mypassword);

  $sql="SELECT * FROM users WHERE username='$myusername' and password='$mypassword'";
  $result=mysql_query($sql);

  // Mysql_num_row is counting table row
  $count=mysql_num_rows($result);

  // If result matched $myusername and $mypassword, table row must be 1 row

  if($count==1){

  // Register $myusername, $mypassword and redirect to file "userhome.php"
  $_SESSION['myusername'] = $myusername;
  $_SESSION['mypassword'] = $mypassword;

  print '<pre>';
  var_dump($_SESSION);
  print '</pre>';

  echo "<a href='userhome.php'>Home</a>";
  }
  else {
    echo "Wrong Username or Password";
  }
?> 
```

用户主页.php

```
<?php
  error_reporting(E_ALL ^ E_NOTICE);
  ini_set('display_errors',1);

  session_start();
  if(!isset($_SESSION['myusername'])){
    echo "error :( ";
  }else{
    echo "Logged in as ".$_SESSION['myusername']."&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp<a href='logout.php'>Log out</a><br /><br />";
  }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:15:33.413

您需要在每个使用会话的脚本中调用 session_start() （以及在发送标头之前）。

# php - 我可以通过取消设置句柄来关闭文件吗？

> ID：10928892
> 
> 赞同：5
> 
> 时间：2012-06-07T09:12:25.960
> 
> 标签：php, resources

如果我可以`fclose`通过取消设置带有句柄的变量来节省命令，我有点困惑？

```
$handle = fopen($file);
...
fclose($handle);

... // script goes on for a long 
```

和....相比：

```
$handle = fopen($file);
...
unset($handle);

... // script goes on for a long 
```

洞察任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:36:06.480

> 感谢 PHP 4 的 Zend 引擎引入的引用计数系统，自动检测到不再引用它的资源，并被垃圾收集器释放。

考虑这一点的影响。可以安全地假设在垃圾回收之后变量的所有痕迹都消失了。换句话说，在 PHP 执行结束时，如果 PHP 仍然没有跟踪引用，它会如何关闭它？因此，当垃圾收集器吃掉它时它会关闭它似乎是相当合乎逻辑的。

这是一个糟糕的逻辑论点，因为它假定垃圾收集在取消设置后立即或不久发生，并且 PHP 不会保留对用户空间中不再存在的变量的隐藏引用。

* * *

如果 PHP 在超出范围时没有关闭文件句柄，那么一个更令人信服的案例可能是潜在的行为缺陷。考虑打开大量文件的某种守护进程。现在考虑是否永远不会调用 fclose。相反，允许变量超出范围或在它们上显式调用 unset。

如果这些文件句柄没有关闭，这个长时间运行的守护进程将耗尽文件句柄。

* * *

潜在行为特定的测试脚本：

```
<?php

$db = mysql_connect(...);

if ($db) {
    echo "Connected\n";
    sleep(5); //netstat during this just for paranoia
    unset($db);
    echo "Unset\n";
    sleep(5); //netstat during this and the connection is closed
} 
```

在 Windows 7 和 Debian 6 上，取消设置后连接已关闭。

显然，这仅证明在我的特定机器上使用我的特定 PHP 版本可以工作。对文件句柄等没有意义:)。

* * *

**我现在正在搜索 PHP 源代码以获得确凿的证据**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:15:28.210

PHP 文档提示所有没有剩余引用的资源都被“释放”，我假设文件句柄包括关闭文件。

简单的测试用例：

```
$f = fopen("test.php", "r");
if (!flock($f, LOCK_EX)) {
  print("still locked\n");
  exit;
}
unset($f);
sleep(5);
print("goodbye\n"); 
```

（我已将此保存为`test.php`，因此它会自行锁定；否则可能需要将 中的文件名更改`fopen()`为某个现有文件）

5秒内运行两次脚本；如果您“仍处于锁定状态”，则显然取消手柄并没有释放锁定。在我的测试中，我没有*得到*“仍然锁定”，因此显然取消设置句柄*至少*会释放锁定，尽管在垃圾收集时释放锁定但不关闭文件似乎很愚蠢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:19:20.020

`unset($handle)`将破坏`$handle`变量，但不会关闭 . 指向的文件`$handle`。您仍然需要调用`fclose()`以关闭文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T09:20:06.887

一些研究：

`fclose`使`$handle`之成为`resource(5) of type (Unknown)` 而

`unset`成功了`NULL`。

并且在`fclose`php 消耗更多的 88 字节内存之后。

所以：他们是不同的=）

# html - 将 html 输出打印到服务器应用程序上的打印机

> ID：10928893
> 
> 赞同：3
> 
> 时间：2012-06-07T09:12:26.807
> 
> 标签：html, printing, jeditorpane, printers

我正在本地服务器端编写一个服务，它将接受来自 UI 应用程序的打印机名称和其他输入，并将 html 文件打印到所需的网络打印机。它不是桌面应用程序。我有一个处理过的 html 文件，我正在读入一个字符串，并希望将其输出发送到所需的打印机。

我能找到的一种方法是通过将图像读入 JEditorPane 来创建图像（尽管使用 swing 类不是很好的方法），然后保存图像，然后将其发送到打印机。但是当 html 有标签并且该图像未在 html 创建的图像中呈现时，它会失败。有人可以帮助我解决我的问题的方法。打印机也能够支持后记。

这是我的方法

```
protected void generateDoc(DataObj data) {
DocFlavor dsc =
        DocFlavor.INPUT_STREAM.PNG;

   // get the html file's contents
   String receipt =
       getFileContents("Receipt.html");

   // process the html contents and insert the data details
    receipt = processHTMLContents(receipt, data);

    // create image of the receipt
    createReceiptImage(receipt);

    InputStream is =
        null;
    try {
        is =
            new FileInputStream(new File("testingToday.png")); // the same image which was created below
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    }

    // create the doc to be sent to the printer
    Doc doc =
        new SimpleDoc(is, dsc, null);

    return doc;
}

/**
 * Create an image of the html receipt.
 * @param htmlReceipt processed html receipt
 * @return
 * @throws InterruptedException
 */
protected void createReceiptImage(String htmlReceipt) throws InterruptedException {
    JEditorPane pane =
        new JEditorPane();
    //pane.setEditable(false);
    pane.setEditorKit(new HTMLEditorKit());
    pane.setContentType("text/html");
    pane.setText(htmlReceipt);
    pane.setSize(650, 850);
    pane.setBackground(Color.white);

    // Create a BufferedImage
    BufferedImage image =
        new BufferedImage(pane.getWidth(), pane.getHeight(),
            BufferedImage.TYPE_INT_ARGB);
    Graphics2D g =
        image.createGraphics();

    // Have the image painted by SwingUtilities
    JPanel container =
        new JPanel();
    SwingUtilities.paintComponent(g, pane, container, 0, 0, image
        .getWidth(), image.getHeight());
    g.dispose();

    ImageIO.write(image, "PNG", new File("testingToday.png")); // this would be replaced by a relative network location 
```

}

然后将此文档发送到打印机。但这不是一种理想的方法，因为它是摇摆类，并且无法在 html 中呈现任何图像。我已经花了大约一个星期的时间来解决它，但仍然无法解决。如何解决这个问题或有什么解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T11:12:48.767

虽然这个问题看起来很老，但你可以看看这个[问题](https://stackoverflow.com/questions/633780/converting-html-files-to-pdf)..基本上它将HTML转换为PDF然后你打印PDF......希望这会有所帮助

# ios - Cocos2d 2.0 - 在图层上居中精灵

> ID：10928894
> 
> 赞同：0
> 
> 时间：2012-06-07T09:12:30.550
> 
> 标签：ios, objective-c, cocos2d-iphone

我有一个 CClayer 类，当这个类初始化时，它会创建一个应该居中的 CCSprite，所以稍后，当我旋转使用该 CCLayer 类创建的对象时，它会围绕其中心旋转。我的意思是，如果该类的精灵是一个 200 像素宽和 300 像素高的图像，我希望 CCLayer 枢轴位于 100,150。

我曾尝试将其设置为 0,0 和 0.5,0.5，但均未成功。

据我了解，CCLayer 没有边界框，它就像一种节点，对吧？所以，我创建这样的类：

```
-(id) initWithImage:(UIImage*)image Name:(NSString*)name
{

    if( (self=[super init])) {

        self.isTouchEnabled = YES;

        self.mySprite = 
            [CCSprite spriteWithCGImage:image.CGImage key:name];

        self.mySprite.position = CGPointZero;
        [self addChild:self.mySprite];

        self.mySprite.anchorPoint = ccp(0.0f, 0.0f);
        // have tried also 0.5f, 0.5f... no success        
    }

    return self;
} 
```

我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:26:42.100

在 CCLayer 子类中提供一个方法来旋转精灵：

```
-(void) rotateMySpriteToAngle:(float) angle
{
    self.mySprite.rotation = angle;
} 
```

精灵的锚点应该是`(0.5, 0.5)`围绕其中心旋转。

我觉得你让你的程序太复杂了？你能不能只使用一个精灵而不是一个带有精灵的图层？然后你可以直接旋转它。

看起来你想让你的精灵可触摸。如果您希望实现按钮，请考虑使用`CCMenu`and 。`CCMenuItem`

* * *

# 编辑

尝试将图层`(0, 0)`的锚点设置为 ，将精灵的锚点设置为`(0.5, 0.5)`，然后将精灵的位置设置为`(0, 0)`

这意味着精灵的中心位于`(0, 0)`图层上，然后您围绕其原点旋转图层。

```
                    场景
==============================================
= =
= =
= =
= =
= | =
= | 层（有效无限大小）=
= __|__ =
= | | | =
= | +---|-------------- =
= |_____| =
= 雪碧 =
==============================================
+ 是图层的原点和精灵的中心点
当您围绕其原点旋转图层时，您同时围绕其中心旋转精灵。

```

# android - 如何在android中创建一个文件夹并将多个文件保存到该文件夹 ？

> ID：10928897
> 
> 赞同：0
> 
> 时间：2012-06-07T09:12:38.960
> 
> 标签：android, android-sdcard

我使用如下所示的代码在单击按钮时将 jpg 文件保存到 sdcard。

```
OutputStream fOut = null;
            try 
            {
                fOut = new FileOutputStream(String.format("/sdcard/%d.jpg", System.currentTimeMillis()));
                sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"+ Environment.getExternalStorageDirectory())));
                mMergedLayersBitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
                fOut.flush();
                fOut.close();
            } 
            catch (FileNotFoundException e) 
            {
                e.printStackTrace();
            } 
            catch (IOException e)
            {
                e.printStackTrace();
            } 
```

为了将图像保存到文件夹，我重写了代码，如下所示

```
OutputStream fOut = null;
            //Create Folder
              File folder = new File(Environment.getExternalStorageDirectory().toString()+"/draw/Images");
              folder.mkdirs();

              //Save the path as a string value
              String extStorageDirectory = folder.toString();

              //Create New file and name it draw.jpg
              File file = new File(extStorageDirectory, "draw.jpg");
              try 
                {
                    fOut = new FileOutputStream(file);
                    mMergedLayersBitmap.compress(Bitmap.CompressFormat.JPEG, 85, fOut);
                    fOut.flush();
                    fOut.close();
                } 
                catch (FileNotFoundException e) 
                {
                    e.printStackTrace();
                } 
                catch (IOException e)
                {
                    e.printStackTrace();
                } 
```

现在，当我第二次单击保存按钮时，它会重写图像。我想将我保存的整个图像保存到一个文件夹中。我不知道如何根据此要求更改我的代码。如果有人知道这件事，请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:22:01.560

由于您已将图像名称硬编码为`"draw.jpg"`，因此每次图像都会被覆盖。因此，与其硬编码，不如提供一个动态名称。

例如，而不是，

```
File file = new File(extStorageDirectory, "draw.jpg"); 
```

尝试

```
File file = new File(extStorageDirectory, System.currentTimeMillis()+"draw.jpg"); 
```

# entity-framework - 实体框架错误：找不到概念模型类型

> ID：10928898
> 
> 赞同：0
> 
> 时间：2012-06-07T09:12:39.583
> 
> 标签：entity-framework, entity-framework-4

```
 public ViewResult List(string category,int page = 1)
    {
        ProductsListViewModel viewModel = new ProductsListViewModel
        {
            Products = repository.Products
            .Where(p => category == null || p.Category == category)
            .OrderBy(p => p.ProductID)
            .Skip((page - 1) * PageSize)
            .Take(PageSize),

            PagingInfo = new PagingInfo
            {
                CurrentPage = page,
                ItemsPerPage = PageSize,
                TotalItems = category == null?repository.Products.Count():repository.Products.Where(e => e.Category == category).Count()
            },

            CurrentCategory = category
        };
        return View(viewModel);
    } 
```

它抛出一个异常说“找不到 SportsStore.Domain.Concrete.ORM.Product 的概念模型类型。” 我想这与我手动添加的 SportStore.edmx 文件有关，但本书只是提到了这个文件，就好像它已经存在一样，实际上不是。所以我必须自己创建ORM，然后抛出异常。我不知道如何检查这个问题，thx..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T20:39:01.677

我也在阅读这本书（Pro Asp.Net MVC 3 Framework），发现了同样的错误/问题。

似乎作者从使用切换`ObjectContext`到“DbContext”（或相反）并且没有清理他的示例。前者是 EntityFramework 4.0 的旧 API，后者是 4.1 的 API。 `DbContext`也只是一个包装器，`ObjectContext`所以他们做同样的事情。

如果您查看第 10 章的代码示例，您会发现他使用实体数据模型 (.edmx) 来建立数据库和模型之间的连接，而在整本书中直到那时他都使用“代码优先”方法与`DbContext`.

事实上，第 9 章中的这一节是他唯一一次提到`Concrete/ORM`文件夹，而这个 .edmx 模型进一步证明了这是本书前一版本遗留下来的东西。

总结一下：您不需要这个 .edmx 模型文件，也不需要更新概念模型。该框架应该能够将`Product`代码中的模型片段连接到数据库中的 Product 表。

这是一个可能提供一些见解的相关问题： [Using DbContext and Database First in EF 4.1](https://stackoverflow.com/questions/9264190/using-dbcontext-and-database-first-in-ef-4-1)

# android - Android - VideoView 需要按两次 BACK 才能退出

> ID：10928900
> 
> 赞同：2
> 
> 时间：2012-06-07T09:12:45.730
> 
> 标签：android, android-layout, android-emulator, android-widget, android-ndk

我有一个显示不同视频文件的活动。当我单击一个视频文件时，我被带到另一个活动，其中一个 VideoView 播放视频。

我的问题是，当我想退出此活动并返回上一个活动时，我应该单击两次后退按钮才能返回。如果我只单击一次，视频就会再次开始播放，并且只有在第二次尝试时我才被允许退出屏幕。

然后我尝试了这个：

```
@Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            Log.d(Constants.LOG_TAG, "back pressed in videoplayer");
            finish();
            return true;
        }
        return super.onKeyDown(keyCode, event);
    } 
```

而且，虽然我在 logcat 中看到“在视频播放器中按下”，但活动并没有退出。我仍然应该按两次后退按钮。

**编辑：**这是最相关的（我相信）源代码。但是请注意，视频是从互联网上播放的，我没有使用 Mediacontroller，而是定义了自己的布局并链接到 videoview 控件。

```
public class VideoPlayer extends Activity implements OnClickListener, OnCompletionListener,
        OnSeekBarChangeListener, OnPreparedListener, OnTouchListener {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.video_view);

        // Gets the position of clicked video, from an ArrayList of video urls.
        selectedVideo = getPosition();

        // the play button
        play = (ImageButton) findViewById(R.id.play);
        play.setOnClickListener(this);

        videoView = (VideoView) findViewById(R.id.videoView);
        videoView.setOnCompletionListener(this);
        videoView.setOnPreparedListener(this);
        videoView.setOnTouchListener(this);

        // the url to play
        String path = videoUris.get(selectedVideo);
        videoView.setVideoPath(getPath(path));
    }

    /**
     * Play or Pause the current video file.
     * 
     * If the video is paused, then invoking this method should start it. If the video is already playing, then the
     * video should pause.
     */
    private void play() {
        if (!isVideoStarted) {
            isVideoStarted = true;
            videoView.start();
            play.setImageResource(R.drawable.video_pause);
            videoSeekBar.post(updateSeekBarRunnable);
        } else if (isVideoStarted) {
            isVideoStarted = false;
            pause();
        }
    }

    /**
     * Start playing back a video file with the specified Uri.
     */
    private void startPlayback() {
        String path = videoUris.get(selectedVideo);
        videoView.setVideoPath(getPath(path));
        videoView.start();
    }

    /**
     * Stops the currently playing video. (The SeekBar position is reset to beginning, 0.)
     */
    private void stopPlayback() {
        videoView.stopPlayback();
    }

    /**
     * Pause the currently playing video. (The SeekBar remains in its position.)
     */
    private void pause() {
        videoView.pause();

    @Override
    public void onPrepared(MediaPlayer mp) {        
        play();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-15T02:59:31.513

下面的代码对我来说很好：

```
 try
            {
            MediaController mc = new MediaController(YourActivity.this);
            mc.setAnchorView(vd);
            Uri uri = Uri.parse(YourURL);
            vd.setMediaController(mc);
            vd.setVideoURI(uri);
            //vd.start();
            }catch(Exception e)
            {
                Log.e("Error", e.getMessage());
                e.printStackTrace();
            }
            vd.requestFocus();
            vd.start();

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if(keyCode == KeyEvent.KEYCODE_BACK)
    {
        finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:01:39.910

您可以尝试覆盖`onBackPressed`而不是`KeyEvent`. 因为您的代码看起来正确。

去掉这个，

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Log.d(Constants.LOG_TAG, "back pressed in videoplayer");
        finish();
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

并添加，

```
@Override
public void onBackPressed() {
    finish();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T07:28:24.300

谢谢你试图帮助我。
结果我打`startActivity(intent);`了两次电话，这就是为什么我应该按两次后退按钮。

# iphone - Iphone-App Freezes for some time

> ID：10928911
> 
> 赞同：2
> 
> 时间：2012-06-07T09:13:40.603
> 
> 标签：iphone

When I am clicking on the application icon, the app freezes for some time and is not opened. No crash report is generated.

From the console logs I could get the following warning:

```
Jun  6 10:55:00 Saschas-iPhone UserEventAgent[12] <Warning>: TRACE: <MBConnection: 0x160790> connection interrupted

Jun  6 10:55:00 Saschas-iPhone UserEventAgent[12] <Warning>: DEBUG: <MBConnection: 0x160790> disconnected

Jun  6 10:55:00 Saschas-iPhone UserEventAgent[12] <Warning>: TRACE: Canceling <MBConnection: 0x160790>

Jun  6 10:55:00 Saschas-iPhone UserEventAgent[12] <Warning>: TRACE: <MBConnection: 0x160790> connection invalid 
```

Would the above mentioned warnings have caused any affect to the application.

Kindly let me know what the warnings mean.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:42:43.817

使用启动画面并将断点添加到

`- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions`

然后检查问题出在哪里......

# android - 什么是 repaintOpenGLDisplay 没有为 Eclipse 控制台 android 上的单独渲染器进程实现？

> ID：10928912
> 
> 赞同：0
> 
> 时间：2012-06-07T09:13:42.603
> 
> 标签：android, eclipse, android-emulator

早些时候工作`developer phone`，今天我尝试了模拟器我不知道为什么它显示

```
repaintOpenGLDisplay not implemented for separate renderer process !!! 
```

在`console window`我尝试运行的每个应用程序中。

谢谢

亚西尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T09:50:09.650

您是否尝试过在没有 GPU 仿真的模拟器上运行应用程序？转到 AVD 管理器，编辑模拟器的硬件属性。禁用 gpu 仿真并查看应用程序现在是否运行。

# python - Homebrew Python and writing to /Library/Python/2.7/site-packages/?

> ID：10928914
> 
> 赞同：8
> 
> 时间：2012-06-07T09:13:46.490
> 
> 标签：python, homebrew

Is there a definitive guide for how to install Homebrew's Python properly, along with pip, virtualenv, virtualenvwrapper etc.?

I've read the following pages:

[https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python](https://github.com/mxcl/homebrew/wiki/Homebrew-and-Python)
[http://osxastrotricks.wordpress.com/2012/05/02/python-setup-with-homebrew/](http://osxastrotricks.wordpress.com/2012/05/02/python-setup-with-homebrew/)
[http://skipperkongen.dk/2011/11/13/installing-django-in-virtual-environment-on-mac/](http://skipperkongen.dk/2011/11/13/installing-django-in-virtual-environment-on-mac/)
[http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/](http://www.thisisthegreenroom.com/2011/installing-python-numpy-scipy-matplotlib-and-ipython-on-lion/)
[http://youshoulddoityourself.blogspot.com.au/2010/11/test.html](http://youshoulddoityourself.blogspot.com.au/2010/11/test.html)

I have OSX 10.8 (Mountain Lion) DP3, and I installed the XCode Command Line Tools.

I also installed XQuartz as well, just in case (10.8 doesn't provide it).

I then ran:

```
brew install python  --universal --framework 
```

I added the following to my `~/.bash_profile`:

```
export PATH="/usr/local/bin:/usr/local/share/python:${PATH}" 
```

I then ran:

```
sudo easy_install pip 
```

which seemed to work.

I check where pip's installed:

```
 Victors-MacBook-Pro:~ victorhooi$ which pip
/usr/local/bin/pip 
```

However, when I try to pip install packages, I get an error complaining about not being able to write to /Library/Python/2.7/site-packages:

```
running install_lib

creating /Library/Python/2.7/site-packages/yolk

error: could not create '/Library/Python/2.7/site-packages/yolk': Permission denied

----------------------------------------
Command /usr/bin/python -c "import  setuptools;__file__='/Users/victorhooi/build/yolk/setup.py';exec(compile(open(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --single-version-externally-managed --record /var/folders/gg/m37t1rkx4zj7z54ls487jfc40000gn/T/pip-ap7LSB-record/install-record.txt failed with error code 1 in /Users/victorhooi/build/yolk
Storing complete log in /Users/victorhooi/Library/Logs/pip.log 
```

My understanding was that Homebrew's Python would install into it's own site-packages, and I wouldn't need to do weird chown's all over the filesystem tree to get things to work?

Cheers, Victor

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T08:36:00.153

同时，homebrew 的 python 也进化了：

*   通过 brew 安装的 Python 不再尝试写入`/Library/Python`.
*   Homebrew 的 Python 现在总是使用自己的站点包。
*   pip（和分发）是自动安装的。
*   不需要“--framework”选项。Homebrew 现在默认使用它。
*   需要 XQuartz（不幸的是）因为 Tk 标头链接到 X11 标头。

.bashrc 中的 PATH 是正确的（并且仍然需要）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:16:26.380

请作为一直在您所在位置的人，首先开始使用虚拟环境，然后是 pip 和其余部分。他们很棒，将解决这个问题和许多未来的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-28T21:19:14.007

现在有了 Mountain Lion 10.8.2 并且我从 Lion 安装了旧版 Python 2.7，但一切都无法正常工作。无论我尝试什么，Python 都想访问 /Library/.. 不好。简单的解决方案是`brew uninstall python`，然后`brew install python`解决几乎所有与 ML 上的 homebrew 相关的 Python 相关问题。

# java - onStop Error, app shuts down

> ID：10928917
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:13:52.627
> 
> 标签：java, android

I am trying to stop a melody from playing when user hit the back-button. This code is working when the file is playing, if not there will be an error and the app shuts down. How come it isnt working?

```
MediaPlayer melodisnutt;
public void onStop() {
    super.onStop();
    if ( melodisnutt.isPlaying () ) {
        melodisnutt.stop();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:23:48.563

如果您确定错误发生在 onStop() 方法中，则它看起来像一个 nullPointerException。

尝试更换：

```
if(melodisnutt.isPlaying()){ 
```

经过

```
if(melodisnutt != null && melodisnutt.isPlaying()){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:22:46.323

最好检查您的 MediaPlayer 是否不为空，

```
public void onStop() {
    super.onStop();
    if (melodisnutt.isPlaying () && melodisnutt != null) {
        melodisnutt.stop();
    }
} 
```

# tomcat - Jenkins save artifact when build failed

> ID：10928928
> 
> 赞同：4
> 
> 时间：2012-06-07T09:14:39.973
> 
> 标签：tomcat, jenkins, jobs, artifacts

I want to Archive the artifacts of my program, but when the build failes he doesn't save the artifacts. Why is this?

Because I only want to read the artifact when the job failed!

Thanks for your response!

--

Always when the job fails, I didn't get the artifact. I test it in very small jobs:

Empty batch file + artifact a file, Result: Job Succesfull, Artifact: succesfull

Exit 1 in batch file + artifact a file, Result: Job fails, Artifact: didn't do anything

config.xml file of the job:

```
<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties/>
  <scm class="hudson.scm.NullSCM"/>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers class="vector"/>
  <concurrentBuild>false</concurrentBuild>
  <customWorkspace>C:\test\</customWorkspace>
  <builders>
    <hudson.tasks.BatchFile>
      <command>exit 1</command>
    </hudson.tasks.BatchFile>
  </builders>
  <publishers>
    <hudson.tasks.ArtifactArchiver>
      <artifacts>tomcat\logs\tomcat.log</artifacts>
      <latestOnly>false</latestOnly>
    </hudson.tasks.ArtifactArchiver>
  </publishers>
  <buildWrappers/>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T09:44:05.063

无论构建是否失败，都会归档工件。确保以下几点：

*   您正在查看实际的上次构建工件，而不是“上次成功构建”工件。
*   生成工件（或将它们复制到您的工作区以进行归档）的构建步骤实际运行 - 如果它应该在失败后运行，它可能不会运行。在这种情况下，您需要一种解决方法，具体取决于您的具体情况。

也看看[这个相关的问题](https://stackoverflow.com/questions/9664716/archiving-artifacts-not-in-the-workspace-when-build-fails)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-10T06:22:27.330

在“归档工件”步骤中，单击高级按钮。取消选中“仅在构建成功时存档工件”因此即使您的单元测试失败，您也将存档工件。

# sass - 指南针和 Sass 的煎茶主题不起作用

> ID：10928929
> 
> 赞同：0
> 
> 时间：2012-06-07T09:14:43.610
> 
> 标签：sass, compass-sass, sencha-touch-theming

我正在尝试构建一个自定义主题。我将 $base-color 和 $base_gradient 属性添加到我的 resources/sass/app.scss 并通过从文件夹中发出 compass compile 来编译它。编译工作并替换了 css/app.csss。但是我没有看到我的应用程序中反映的变化。如何用 sass 和 compass 更改主题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:35:05.417

基本梯度采用 - 而不是 _

然后检查您的 var 是否在该行之后定义（对于基色应该无关紧要，但最好将它们放在后面）

```
@import 'sencha-touch/default/all'; 
```

你的变量应该这样定义：

```
$base-color: #7A1E08;  
$base-gradient: 'glossy'; 
```

检查您是否在 [app-folder]/resources/sass/app.css 而不是 sdk 文件夹中

编译时您应该看到以下行

```
overwrite ../css/app.css 
```

清空您的浏览器缓存，然后重新加载您的应用程序。

# java - 在eclipse中组织maven多模块项目

> ID：10928930
> 
> 赞同：11
> 
> 时间：2012-06-07T09:14:47.100
> 
> 标签：java, eclipse, maven

我有一个巨大的 Maven 多模块项目。具有相似的结构

```
parentA
  - subA1
     - subA3
     - subA3
  - subA2

parentB
  - subB1
  - subB2 
```

ETC

问题是， parentA 和 subA1 里面不包含任何代码，但我仍然可以在项目资源管理器中看到它们。但我想隐藏它们或像在资源管理器中那样在树层次结构中组织。现在有 30 多个项目，其中只有 20 个包含 Java 代码。其他仅包含其他模块引用。我在项目资源管理器中以简单的形式看到所有 30 个项目。

第一个想法 - 使用工作集，但我不能将工作集包含在另一个工作集中。eclipse 用户处理这个问题的常见做法是什么

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-30T15:37:16.687

转到：Windows -> 首选项 -> Maven -> 隐藏物理嵌套模块的文件夹

并重新导入您的项目。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-14T12:56:50.633

We can also use working sets.

1.  Choose Top level Elements as 'Working Sets' from Package Explorer / Project Explorer view.
2.  Configure "Working Sets" to manage your projects. Move the Parent project to a different working set and child project in different working sets.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-18T15:25:27.733

在项目资源管理器中，有一个向下箭头，如果将鼠标悬停在它上面，它会显示“*查看菜单*”。

单击它，*项目演示*->*分层*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-21T12:53:53.003

从包资源管理器视图中，从“视图菜单”中选择过滤器。然后选择过滤器，并排除非 java 项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T09:28:21.623

尝试使用项目视图。在这种情况下，它为我做到了。

此外，您可以在 Package Explorer 或您喜欢的其他视图中放置过滤器以排除某些项目，如下所示：转到*PackageExplorer*，选择*View Menu - Filters*，选中*Name filter Patterns*并输入您要隐藏的项目的名称，以逗号。

在其他视图中，*View Menu - Filters*不是*View Menu - Customize View*。

[您可以在此处](http://viralpatel.net/blogs/2010/02/hide-closed-projects-eclipse-project-explorer-view.html)找到教程，但选择*Closed Projects*输入我上面提到的项目名称。

至于树视图，我认为您无法实现这一点，因为在 Eclipse 中没有子项目的概念。看看[这里](https://stackoverflow.com/a/2616827/1384984)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-09T01:38:23.280

在包资源管理器窗口中： -> 选择三点菜单 -> 然后包演示 -> 然后从 Flat 更改为“Hierarchical”

你完成了：D

[更改项目视图图像](https://i.stack.imgur.com/2EKT6.png)

# android - 动画运行时临时阻止绘制

> ID：10928931
> 
> 赞同：1
> 
> 时间：2012-06-07T09:14:47.367
> 
> 标签：android, animation, drawing, android-imageview

我有一个`ImageView`覆盖整个屏幕的大屏幕。我制作了一个“滑入式”菜单，当您按下屏幕上的任意位置时会激活该菜单，我使用动画做到了这一点，因此看起来菜单会滑入。

由于内部的图像，`ImageView`这会导致动画卡顿。当我离开`ImageView`空的时候，它真的很顺利。

这是因为里面的图像在`ImageView`动画过程中不断地被重绘，而我的安卓平板电脑很难处理它。

我已经尝试在动画完成时设置`WillNotDraw`为`true`我`ImageView`并返回`false`，但这会导致图像在动画播放（流畅）时消失，然后再次出现。

这是我创建动画的方式：

```
topMenu.setVisibility(View.VISIBLE);
Animation slideDown = AnimationUtils.loadAnimation(this, R.anim.slide_down);
slideDown.setStartOffset(200);
topMenu.startAnimation(slideDown); 
```

这是动画xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:interpolator="@android:anim/accelerate_interpolator">
   <translate 
       android:fromYDelta="-40" 
       android:toYDelta="0" 
       android:duration="200"/>
</set> 
```

里面的图像`ImageView`是由a完成的`Bitmap`

如何在播放动画时保持图像可见，但仍保持动画的流畅度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:36:53.757

让我们说如果您正在使用动画侦听器并注意动画完成并在最后使用它绘制图像，

```
slideDown.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

            }

            public void onAnimationEnd(Animation animation) {
                // Draw your Image here

            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:39:05.313

彼得，

根据您的代码，您每次要运行动画时都会重新加载动画。您可能希望将动画加载本身移动到类成员而不是局部变量。这将减轻***一些***压力。提供更多信息时的更多详细信息。

# porting - HP-UX 和 RHEL ping 的区别

> ID：10928932
> 
> 赞同：1
> 
> 时间：2012-06-07T09:14:49.697
> 
> 标签：porting, ping, rhel, hp-ux

我有这两个命令用于不同的环境..

> ```
> for HP-UX: "ping someaddress 10" 
> for RHEL: "ping someaddress -c 10" 
> ```

我正在将应用程序从 HP-UX 移植到 RHEL，但我不知道这两个命令是否具有相同的结果，因为我没有 HP-UX 系统。

我已经阅读了 HP-UX 手册（[http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c01922497/c01922497.pdf](http://bizsupport2.austin.hp.com/bc/docs/support/SupportManual/c01922497/c01922497.pdf)），但仍然没有帮助，因为命令中没有指定任何选项.

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T13:16:44.623

您可以通过[HP Alliance](http://www.hp.com/go/pvp)程序访问 HP-UX shell。需要注册。这可能会帮助您测试脚本。

# php - 如何替换双引号和单引号之外的单词

> ID：10928935
> 
> 赞同：5
> 
> 时间：2012-06-07T09:15:02.967
> 
> 标签：php, string, preg-replace

对于 PHP 中的自定义脚本解析器，我想替换包含双引号和单引号的多行字符串中的一些单词。但是，只能替换引号**之外**的文本。

```
Many apples are falling from the trees.    
"There's another apple over there!"    
'Seedling apples are an example of "extreme heterozygotes".' 
```

例如，我想将 'apple' 替换为 'pear'，但仅限于引用句子之外。所以在这种情况下，只有“许多苹果从树上掉下来”中的“苹果”才会成为目标。

以上将给出以下输出：

```
Many pears are falling from the trees.    
"There's another apple over there!"    
'Seedling apples are an example of "extreme heterozygotes".' 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T09:26:47.577

这个函数可以解决问题：

```
function str_replace_outside_quotes($replace,$with,$string){
    $result = "";
    $outside = preg_split('/("[^"]*"|\'[^\']*\')/',$string,-1,PREG_SPLIT_DELIM_CAPTURE);
    while ($outside)
        $result .= str_replace($replace,$with,array_shift($outside)).array_shift($outside);
    return $result;
} 
```

**它是如何工作**的 它由带引号的字符串分割，但包括这些带引号的字符串，这使您可以在数组中交替使用未引用、引用、未引用、引用等字符串（一些未引用的字符串可能为空白）。然后它在替换单词和不替换之间交替，因此只替换未引用的字符串。

**以你的例子**

```
$text = "Many apples are falling from the trees.    
        \"There's another apple over there!\"    
        'Seedling apples are an example of \"extreme heterozygotes\".'";
$replace = "apples";
$with = "pears";
echo str_replace_outside_quotes($replace,$with,$text); 
```

**输出**

```
Many pears are falling from the trees.    
"There's another apple over there!"    
'Seedling apples are an example of "extreme heterozygotes".' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:22:43.617

我想出了这个：

```
function replaceOutsideDoubleQuotes($search, $replace, $string) {
    $out = '';
    $a = explode('"', $string);
    for ($i = 0; $i < count($a); $i++) {
        if ($i % 2) $out .= $a[$i] . '"';
        else $out .= str_replace($search, $replace, $a[$i]) . '"';
    }
    return substr($out, 0, -1);
} 
```

逻辑是：你用双引号分解字符串，所以返回的字符串数组的**奇数**元素表示引号外的文本，**偶数**表示双引号内的文本。

因此，您可以通过交替连接原始部件和替换部件来构建输出，好吗？

这里的工作示例：http: **[//codepad.org/rsjvCE8s](http://codepad.org/rsjvCE8s)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:19:16.447

只是一个想法：通过删除引用部分创建一个临时字符串，替换您需要的部分，然后添加您删除的引用部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T09:25:09.090

你可以使用preg_replace，使用正则表达式替换“”里面的单词

```
$search  = array('/(?!".*)apple(?=.*")/i');
$replace = array('pear');
$string  = '"There\'s another apple over there!" Seedling apples are an example of "extreme heterozygotes".';

$string = preg_replace($search, $replace, $string); 
```

您可以通过在 $search 中添加另一个 RegEx 和在 $replace 中添加另一个替换字符串来添加更多可能的可搜索对象

此 RegEx 使用前瞻和后瞻来确定搜索的字符串是否在“”内

# sql-server - 使用 SSIS 在同一数据库中创建表的副本

> ID：10928941
> 
> 赞同：2
> 
> 时间：2012-06-07T09:15:27.107
> 
> 标签：sql-server, ssis

我想使用 SSIS 包在同一个数据库中创建一个表的副本，比如**TestTable**，并使用新名称**TestTableNew 。**我为此创建了一个“传输 SQL Server 对象任务”，源数据库同时指定为*SourceDatabase*和*DestinationDatabase*。当我运行此任务时，原始表**TestTable**被新的 -empty **-TestTable**覆盖。

这很可能是我忽略的非常明显的事情，但是我可以在这个传输任务的某个地方为目标表指定另一个名称吗？还是我应该用另一种方式解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:55:56.447

您不能使用“传输 SQL Server 对象任务”将表复制到同一数据库，因为没有指定新表名称的选项。您会将表“TestTable”复制到表“TestTable”，这将失败，因为它们都具有相同的名称。

您可以将“DropObjectsFirst”属性设置为 true，但这会使您丢失原始表及其数据，我认为您在测试中这样做了，否则您会收到一条失败消息。

这里最好的选择是使用“执行 SQL 任务”根据您的 TestTable 创建 TestTableNew 的结构，然后执行简单的 OleDBSource -> OleDBDestination 转换以将所有数据从一个表加载到另一个表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:24:06.167

我对 SSIS 的了解非常有限，但我假设您可以运行传递参数的 sql 命令，从而动态生成如下内容

```
select *
insert into TestTableNew
from TestTable 
```

# java - 获取删除的记录？

> ID：10928943
> 
> 赞同：0
> 
> 时间：2012-06-07T09:15:31.887
> 
> 标签：java, hibernate

我正在使用休眠。我正在使用如下删除方法删除记录。

```
Session session = sessionFactory.getCurrentSession();
session.delete(pojotobedeleted); 
```

我的要求是删除记录后，它应该返回相同的删除记录。如何获取已删除的记录？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:31:28.220

我会说

```
Session session = sessionFactory.getCurrentSession();
pojotobedeleted = session.load(Pojo.class, id);  /* not necessary if loaded before */
session.delete(pojotobedeleted);
return pojotobedeleted; 
```

当然，这样做有一个额外的 select 语句，但这与原生 SQL 相同。SQL delete 不会返回被删除的行，hibernate 不能比原生 SQL 好。

（如果这不是你想要的，那么我不明白你的问题：目标是什么，为什么不喜欢我的例子？）

# objective-c - 重命名后的 .xcodeproj 文件问题

> ID：10928945
> 
> 赞同：1
> 
> 时间：2012-06-07T09:15:55.163
> 
> 标签：objective-c, ios5

我试图更改项目名称，但在那之后，会出现一条警告，上面写着“验证项目设置更新以推荐设置”。之后，我无法执行该项目，并且在左侧项目资源管理器中只显示红色的 .xcodeproj 文件。我可以构建项目，但无法在模拟器中运行。

拜托，你能帮我解决这个问题吗？

谢谢！

# android - android/eclipse 中的验证

> ID：10928946
> 
> 赞同：3
> 
> 时间：2012-06-07T09:15:59.273
> 
> 标签：android, eclipse, validation

如何在 android/eclipse 上限制带有数字和特殊符号的编辑文本框。

即，我必须只允许字符（az & AZ）而不是其他字符。

是否有任何选项可以通过 .xml(file) 执行此操作？

提前致谢！。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:24:25.517

//它是可用的

在您的 string.xml 中，您可以将资源添加为

```
<string name="specific_chars">ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz _1234567890</string> 
```

并在您的编辑文本中访问添加属性为

```
android:digits="@string/specific_chars" 
```

现在只有指定的字符只有edittext才会使用。

# python - 如何禁用或更改毒性输出的颜色

> ID：10928948
> 
> 赞同：0
> 
> 时间：2012-06-07T09:16:05.647
> 
> 标签：python, tox

默认情况下使用 tox 时，它会将颜色输出到终端，如果您使用白色背景终端，这实际上很好，但在深色终端上很难看到。是否有任何技巧可以在不直接破解代码的情况下禁用 tox 中的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:16:07.033

如果您想禁用颜色但不知道如何更改颜色，请在命令行上使用 TERM=dumb。

# .net - 如何使用 MVVM Light 从 MessageDialog 获取返回值？

> ID：10928951
> 
> 赞同：1
> 
> 时间：2012-06-07T09:16:20.147
> 
> 标签：.net, mvvm-light, windows-8, microsoft-metro, async-await

我目前使用 mvvm light 框架开发一个 Metro 风格的应用程序。

我有一些命令，例如 DeleteSelectedAppUserCommand。用户必须确认他确实要删除该用户。所以我在静态类“DialogService”中写了一个静态方法“ShowMessageBoxYesNo”。

```
public static async Task<bool> ShowMessageBoxYesNo(string message, string title)
{
    MessageDialog dlg = new MessageDialog(message, title);

    // Add commands and set their command ids
    dlg.Commands.Add(new UICommand("Yes", null, 0));
    dlg.Commands.Add(new UICommand("No", null, 1));

    // Set the command that will be invoked by default
    dlg.DefaultCommandIndex = 1;

    // Show the message dialog and get the event that was invoked via the async operator
    IUICommand result = await dlg.ShowAsync();

    return (int)result.Id == 0;
} 
```

在命令中我想调用这个方法，但我不知道如何......这不可能吗？以下代码不起作用！

```
#region DeleteSelectedAppUserCommand

/// <summary>
/// The <see cref="DeleteSelectedAppUserCommand" /> RelayCommand's name.
/// </summary>
private RelayCommand _deleteSelectedAppUserCommand;

/// <summary>
/// Gets the DeleteSelectedAppUserCommand RelayCommand.
/// </summary>
public RelayCommand DeleteSelectedAppUserCommand
{
    get
    {
        return _deleteSelectedAppUserCommand
            ?? (_deleteSelectedAppUserCommand = new RelayCommand(
            () =>
            {
                if (await DialogService.ShowMessageBoxYesNo("Do you really want delete the user?","Confirm delete")
                {
                    AppUsers.Remove(SelectedEditAppUser);
                }
            },
            () =>
                this.SelectedEditAppUser != null
            ));
    }
}
#endregion 
```

感谢帮助！迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:59:54.760

如果要`await`在 lambda 中使用，则必须将该 lambda 标记为`async`：

```
new RelayCommand(
    async () =>
    {
        if (await DialogService.ShowMessageBoxYesNo("Do you really want delete the user?", "Confirm delete")
        {
            AppUsers.Remove(SelectedEditAppUser);
        }
    },
    () =>
        this.SelectedEditAppUser != null
    ) 
```

这会创建一个通常应该避免的`void`-returning方法。`async`但我认为这很有意义，因为您基本上是在实现一个事件处理程序。事件处理程序是唯一通常使用`void`-returning方法的地方。`async`

# gdb - 在 GDB 中如何从文件中填充内存

> ID：10928953
> 
> 赞同：3
> 
> 时间：2012-06-07T09:16:25.537
> 
> 标签：gdb

我们在 GDB 中有 dump 命令，它会将特定的内存转储到文件中。我想要一个与转储命令完全相反的命令，即，它将从特定长度的文件中读取并将其转储到指定的地址（内存）。

请在这方面帮助我，该命令是否存在。如果该命令不存在，那么请指导我我需要如何继续执行它。作为 GDB 的新手。

我尝试使用恢复，但问题是我需要将文件加载到某个长度的特定内存位置。在恢复命令语法中没有这样的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-12-20T15:34:35.470

原始文件 [PATH] 可以通过以下方式加载到目标的内存地址 [ADDR]：

```
restore [PATH] binary [ADDR] 
```

cf: [GDB 文档](https://sourceware.org/gdb/onlinedocs/gdb/Dump_002fRestore-Files.html#Dump_002fRestore-Files)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T04:17:41.613

查看恢复命令：

> restore -- 将 FILE 的内容恢复到目标内存

使用 python 还有 Inferior.write_memory 函数

# javascript - 如何判断一个元素是按钮还是文本框

> ID：10928955
> 
> 赞同：1
> 
> 时间：2012-06-07T09:16:27.870
> 
> 标签：javascript, jquery

如何确定元素是`input`类型`button`还是`text`jquery 中的类型？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:18:00.853

```
$('input').attr('type') 
```

或者

```
$('input').prop('type') 
```

**[演示](http://jsfiddle.net/vSsgD/)**

或者

```
$('input').is(':button');

$('input').is(':text'); 
```

**[演示](http://jsfiddle.net/vSsgD/1/)**

或者

```
$(target)[0].tagName 
```

**[演示](http://jsfiddle.net/vSsgD/2/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:21:28.337

如果你有：

```
var field = $("some selector that finds the input"); 
```

然后

```
field[0].tagName 
```

...将是`INPUT`or`BUTTON`或`SELECT`or `TEXTAREA`，告诉您使用什么标签来创建该字段。

如果是`INPUT`，那么

```
field[0].type
// or
field.attr('type')
// or
field.prop('type') 
```

...将是`input`标签的类型（例如`"text"`，，`"button"`等）。

[实例](http://jsbin.com/ubeseh)| [来源](http://jsbin.com/ubeseh/edit)：

HTML：

```
<input type="text" value="text field">
<br><input type="button" value="input button">
<br><select><option>select</option></select>
<br><textarea>textarea</textarea>
<br><button>button</button> 
```

JavaScript：

```
jQuery(function($) {

  $("input, select, textarea, button").each(function(index) {
    var msg;
    var field = $(this);
    msg = "[" + index + "]: tagName is " + field[0].tagName;
    if (field[0].tagName === "INPUT") {
      msg += ", and type is " + field.prop('type');
    }
    display(msg);
  });

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

输出：

```
[0]：tagName 为 INPUT，type 为 text
[1]：tagName 为 INPUT，type 为 button
[2]: 标记名是 SELECT
[3]：tagName 是 TEXTAREA
[4]: tagName 是 BUTTON
```

请注意，我只在`field = $(this)`那里使用，以便我们在每个元素周围都有一个 jQuery 包装器。如果你已经有一个原始的 DOM 元素引用（就像我们在那个循环中所做的那样， as `this`），不需要这样做，直接使用`elm.tagName`and`elm.type`即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:19:22.337

检查元素的标签名称：

```
element.prop('tagName') 
```

对于`<input>`标签，还要检查类型：

```
element.prop('type'); 
```

# tomcat - ant 无法检索 RMIServer 存根 NameNotFoundException jmxrmi

> ID：10928956
> 
> 赞同：1
> 
> 时间：2012-06-07T09:16:36.590
> 
> 标签：tomcat, ant, jmx, alfresco, cacti

我已经安装了 alfresco 4.0d，我正在尝试使用仙人掌设置监控。我从[percona](http://www.percona.com/doc/percona-monitoring-plugins/cacti/jmx-templates.html)得到了模板。当我尝试运行以下命令时出现错误。我使用了来自 tomcat/lib 目录的 percona 链接中提到的 jar 文件。

```
/opt/apache-ant-1.8.1/bin/ant -f jmx-monitor.xml -v -d

    Apache Ant version 1.8.1 compiled on April 30 2010
Buildfile: /home/cacti/jmx-monitor.xml
Adding reference: ant.PropertyHelper
Detected Java version: 1.6 in: /opt/alfresco-4.0.d/java/jre
Detected OS: Linux
Adding reference: ant.ComponentHelper
Setting ro project property: ant.file -> /home/cacti/jmx-monitor.xml
Setting ro project property: ant.file.type -> file
Adding reference: ant.projectHelper
Adding reference: ant.parsing.context
Adding reference: ant.targets
parsing buildfile /home/cacti/jmx-monitor.xml with URI = file:/home/cacti/jmx-monitor.xml
Setting ro project property: ant.project.name -> JMX Monitor
Adding reference: JMX Monitor
Setting ro project property: ant.project.default-target -> status
Setting ro project property: ant.file.JMX Monitor -> /home/cacti/jmx-monitor.xml
Setting ro project property: ant.file.type.JMX Monitor -> file
Project base dir set to: /home/cacti
 +Target: 
 +Target: status
Adding reference: ant.LocalProperties
parsing buildfile jar:file:/opt/apache-ant-1.8.1/lib/ant.jar!/org/apache/tools/ant/antlib.xml with URI = jar:file:/opt/apache-ant-1.8.1/lib/ant.jar!/org/apache/tools/ant/antlib.xml from a zip file
Setting project property: jmx.server.name -> hector
Setting project property: jmx.server.port -> 50500
Setting ro project property: ant.project.invoked-targets -> status
Attempting to create object of type org.apache.tools.ant.helper.DefaultExecutor
Adding reference: ant.executor
Build sequence for target(s) `status' is [status]
Complete build sequence is [status, ]

status:
parsing buildfile jar:file:/home/cacti/.ant/lib/catalina-ant.jar!/org/apache/catalina/ant/jmx/antlib.xml with URI = jar:file:/home/cacti/.ant/lib/catalina-ant.jar!/org/apache/catalina/ant/jmx/antlib.xml from a zip file
Class org.apache.catalina.ant.jmx.JMXAccessorTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:open org.apache.catalina.ant.jmx.JMXAccessorTask
Class org.apache.catalina.ant.jmx.JMXAccessorSetTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:set org.apache.catalina.ant.jmx.JMXAccessorSetTask
Class org.apache.catalina.ant.jmx.JMXAccessorGetTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:get org.apache.catalina.ant.jmx.JMXAccessorGetTask
Class org.apache.catalina.ant.jmx.JMXAccessorInvokeTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:invoke org.apache.catalina.ant.jmx.JMXAccessorInvokeTask
Class org.apache.catalina.ant.jmx.JMXAccessorQueryTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:query org.apache.catalina.ant.jmx.JMXAccessorQueryTask
Class org.apache.catalina.ant.jmx.JMXAccessorCreateTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:create org.apache.catalina.ant.jmx.JMXAccessorCreateTask
Class org.apache.catalina.ant.jmx.JMXAccessorUnregisterTask loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:unregister org.apache.catalina.ant.jmx.JMXAccessorUnregisterTask
Class org.apache.catalina.ant.jmx.JMXAccessorEqualsCondition loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:equals org.apache.catalina.ant.jmx.JMXAccessorEqualsCondition
Class org.apache.catalina.ant.jmx.JMXAccessorCondition loaded from parent loader (parentFirst)
 +Datatype antlib:org.apache.catalina.ant.jmx:condition org.apache.catalina.ant.jmx.JMXAccessorCondition

BUILD FAILED
/home/cacti/jmx-monitor.xml:29: java.io.IOException: Failed to retrieve RMIServer stub: javax.naming.NameNotFoundException: jmxrmi
    at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:338)
    at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
    at org.apache.catalina.ant.jmx.JMXAccessorTask.createJMXConnection(JMXAccessorTask.java:385)
    at org.apache.catalina.ant.jmx.JMXAccessorTask.accessJMXConnection(JMXAccessorTask.java:441)
    at org.apache.catalina.ant.jmx.JMXAccessorTask.getJMXConnection(JMXAccessorTask.java:479)
    at org.apache.catalina.ant.jmx.JMXAccessorTask.execute(JMXAccessorTask.java:346)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1397)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1366)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1249)
    at org.apache.tools.ant.Main.runBuild(Main.java:801)
    at org.apache.tools.ant.Main.startAnt(Main.java:218)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: javax.naming.NameNotFoundException: jmxrmi
    at com.sun.jndi.rmi.registry.RegistryContext.lookup(RegistryContext.java:99)
    at com.sun.jndi.toolkit.url.GenericURLContext.lookup(GenericURLContext.java:185)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at javax.management.remote.rmi.RMIConnector.findRMIServerJNDI(RMIConnector.java:1886)
    at javax.management.remote.rmi.RMIConnector.findRMIServer(RMIConnector.java:1856)
    at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:257)
    ... 22 more

Total time: 0 seconds 
```

jmx-monitor.xml的内容如下

```
 <project name="JMX Monitor" 
        xmlns:jmx="antlib:org.apache.catalina.ant.jmx" 
        default="status"
        basedir=".">
    <property name="jmx.server.name" value="hector" />
    <property name="jmx.server.port" value="50500" />

    <target name="status" description="Show JMX Cluster state">
        <jmx:open
            host="${jmx.server.name}"
            port="${jmx.server.port}"
            username="controlRole"
            password="change_asap"/>
        <jmx:get
            name="java.lang:type=Memory" 
            attribute="HeapMemoryUsage"
            resultproperty="HeapMemoryUsage"
            />
        <jmx:get
            name="java.lang:type=Memory" 
            attribute="NonHeapMemoryUsage"
            resultproperty="NonHeapMemoryUsage"
            />
        <jmx:get
            name="java.lang:type=OperatingSystem"
            attribute="OpenFileDescriptorCount"
            resultproperty="OpenFileDescriptorCount"
            />
        <jmx:get
            name="java.lang:type=OperatingSystem"
            attribute="MaxFileDescriptorCount"
            resultproperty="MaxFileDescriptorCount"
            />
            <jmx:get
                    name="Catalina:type=ThreadPool,name=${jmx.catalina.threadpool.name}"
                    attribute="currentThreadsBusy"
                    resultproperty="currentThreadsBusy"
                    />
            <jmx:get
                    name="Catalina:type=ThreadPool,name=${jmx.catalina.threadpool.name}"
                    attribute="currentThreadCount"
                    resultproperty="currentThreadCount"
                    />
            <jmx:get
                    name="Catalina:type=ThreadPool,name=${jmx.catalina.threadpool.name}"
                    attribute="maxThreads"
                    resultproperty="maxThreads"
                    />
    <echo>heap_memory_used: ${HeapMemoryUsage.used}
heap_memory_committed: ${HeapMemoryUsage.committed}
heap_memory_max: ${HeapMemoryUsage.max}
non_heap_memory_used: ${NonHeapMemoryUsage.used}
non_heap_memory_committed: ${NonHeapMemoryUsage.committed}
non_heap_memory_max: ${NonHeapMemoryUsage.max}
open_file_descriptors: ${OpenFileDescriptorCount}
max_file_descriptors: ${MaxFileDescriptorCount}
current_threads_busy: ${currentThreadsBusy}
current_thread_count: ${currentThreadCount}
max_threads: ${maxThreads}
</echo>
    </target>

</project> 
```

**更新**

一旦我设置了所需的值，我就可以在 Windows 64 位上使用 jconsole 监视某些内容。

```
### RMI service ports ###
alfresco.rmi.services.port=50500
monitor.rmi.service.port=50508
alfresco.rmi.services.external.host=172.16.0.49 
```

然后`ctl.sh`——`-Dcom.sun.management.jmxremote=true -Djava.rmi.server.hostname=172.16.0.36`

我的仙人掌服务器是`172.16.0.15`，我的带有 jconsole 的 Windows 64 位是`172.16.0.49`，我的露天服务器是`172.16.0.36`. 如果我可以用 jconsole 做到这一点，我如何用 cacti 进行监控？

当我跑步时，`ant -e -q -f jmx-monitor.xml`我得到以下信息

```
BUILD FAILED
/home/cacti/jmx-monitor.xml:22: Problem: failed to create task or type antlib:org.apache.catalina.ant.jmx:open
Cause: The name is undefined.
Action: Check the spelling.
Action: Check that any custom tasks/types have been declared.
Action: Check that any <presetdef>/<macrodef> declarations have taken place.
No types or tasks have been defined in this namespace yet

This appears to be an antlib declaration. 
Action: Check that the implementing library exists in one of:
        -/usr/share/ant/lib
        -/root/.ant/lib
        -a directory added on the command line with the -lib argument 
```

我试过使用端口 9012、50500、50508

在 jconsole 上，我使用以下命令`service:jmx:rmi:///jndi/rmi://172.16.0.36:50500/alfresco/jmxrmi`，它与凭据一起使用`webapps/alfresco/WEB-INF/classes/alfresco/alfresco-jmxrmi.*`

我已更新`setenv.sh`并添加

```
CATALINA_OPTS="-Dcom.sun.management.jmxremote
  -Dcom.sun.management.jmxremote.port=%9012%
  -Dcom.sun.management.jmxremote.ssl=false
  -Dcom.sun.management.jmxremote.authenticate=false"
export CATALINA_OPTS 
```

我可以使用 jconsole url 监控 tomcat：`service:jmx:rmi:///jndi/rmi://172.16.0.36:9012/jmxrmi`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T16:16:19.860

JMX 在 Alfresco 社区版中不可用。

# blackberry - Blackberry UI 在底部显示图像

> ID：10928959
> 
> 赞同：0
> 
> 时间：2012-06-07T09:16:43.537
> 
> 标签：blackberry

我想在屏幕底部添加一个带有图像和字符串的栏，我希望间距相同

img1 string img2|img3 ，这就是底栏的样子，下面的代码没有正常工作，我正在对齐，最后一个 iamge 正在消失。

```
HorizontalFieldManager horizontalFieldManager = new HorizontalFieldManager(
                FIELD_BOTTOM) {
            public void paint(Graphics graphics) {
                graphics.setBackgroundColor(0x316AC5);
                graphics.clear();
                super.paint(graphics);
            }
        };
        Bitmap fadeBitmap = Bitmap
                .getBitmapResource("GE_TimeZone_Fade_blue.PNG");
        Bitmap clockBitmap = Bitmap.getBitmapResource("GE_Cal_icon_blue.PNG");
        Bitmap tzBitmap = Bitmap
                .getBitmapResource("GE_TimeZone_Button_blue.PNG");

        final ImageButtonField unfocus = new ImageButtonField("",
                Field.FOCUSABLE | FIELD_LEFT, "GE_TimeZone_Fade_blue.PNG",
                "GE_TimeZone_Fade_blue.PNG", 0xFFFFFF);
        LabelField test = new LabelField("hello");
        final ImageButtonField bitmapField = new ImageButtonField("",
                Field.FOCUSABLE | FIELD_HCENTER, "GE_Cal_icon_blue.PNG",
                "GE_Cal_icon_onSelect.PNG", 0xFFFFFF);

    final ImageButtonField bitmapField1 = new ImageButtonField("",
            Field.FOCUSABLE | FIELD_RIGHT, "GE_TimeZone_Button_blue.PNG",
            "GE_TimeZone_Btn_OnSelect.PNG", 0xFFFFFF);

    int margin = ((Display.getWidth() - (fadeBitmap.getWidth()
            + clockBitmap.getWidth() + tzBitmap.getWidth() + test
            .getWidth())) / 4);

    unfocus.setMargin(0, margin, 0, 0);
    test.setMargin(0, margin, 0, 0);
    bitmapField.setMargin(0, margin, 0, 0);
    bitmapField1.setMargin(0, margin, 0, 0);

    horizontalFieldManager.add(unfocus);
    horizontalFieldManager.add(test);
    horizontalFieldManager.add(bitmapField);
    horizontalFieldManager.add(bitmapField1);

    this.setStatus(horizontalFieldManager); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:53:36.573

您使用的代码有问题。检查以下行。

```
int margin = ((Display.getWidth() - (fadeBitmap.getWidth()
            + clockBitmap.getWidth() + tzBitmap.getWidth() + test
            .getWidth())) / 4); 
```

如果调用其父管理器的布局方法，则任何[Field](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html)的[getWidth()](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html#getWidth%28%29)和[getHeight()](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/Field.html#getHeight%28%29)都将返回有效值。因此，使用,调整边距是不安全的。`getWidth()``getHeight()`

但是可以`Field`通过扩展[Horizo​​ntalFieldManager](http://www.blackberry.com/developers/docs/6.0.0api/net/rim/device/api/ui/container/HorizontalFieldManager.html)来控制 s 的对齐和位置。检查以下代码和输出以了解如何完成。

*输出*

![在此处输入图像描述](../Images/1e887b9ed118bbcd5b2419b92079d0c6.png)

*使用 StatusFieldManager：*

```
StatusFieldManager statusFieldManager = new StatusFieldManager();
statusFieldManager.setBackground(BackgroundFactory.createSolidBackground(0x316AC5));

final Bitmap bmTest = Bitmap.getBitmapResource("bitmap.png");

BitmapField bmOne = new BitmapField(bmTest, Field.FOCUSABLE | FIELD_LEFT);
BitmapField bmTwo = new BitmapField(bmTest, Field.FOCUSABLE | FIELD_LEFT);
BitmapField bmThree = new BitmapField(bmTest, Field.FOCUSABLE | FIELD_LEFT);
LabelField lblTest = new LabelField("Test");

statusFieldManager.add(bmOne);
statusFieldManager.add(lblTest);
statusFieldManager.add(bmTwo);
statusFieldManager.add(bmThree);

setStatus(statusFieldManager); 
```

*StatusFieldManager 的实现*

```
class StatusFieldManager extends HorizontalFieldManager {
    protected void sublayout(int width, int height) {
        int numField = getFieldCount();
        Field f;
        int nHeight = 0, maxFieldWidth = width / 4;
        if (numField == 4) {
            f = getField(0);
            layoutChild(f, maxFieldWidth, height);
            nHeight = Math.max(nHeight, f.getHeight());

            f = getField(1);
            layoutChild(f, maxFieldWidth, height);
            nHeight = Math.max(nHeight, f.getHeight());

            f = getField(2);
            layoutChild(f, maxFieldWidth, height);
            nHeight = Math.max(nHeight, f.getHeight());

            f = getField(3);
            layoutChild(f, maxFieldWidth, height);
            nHeight = Math.max(nHeight, f.getHeight());

            // set position of the child fields
            int x = 0, y = 0;
            int requiredFieldWidth = 0;
            for (int i=0;i<numField;i++) {
                requiredFieldWidth += getField(i).getWidth(); 
            }
            int spaceBetweenFields = (width - requiredFieldWidth) / (numField - 1);

            for (int i=0;i<numField;i++) {
                setPositionChild(getField(i), x, (nHeight - getField(i).getHeight()) / 2);
                x += getField(i).getWidth() + spaceBetweenFields;
            }
            setExtent(width, nHeight);

        } else {
            setExtent(0, 0);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:36:23.230

试试这个 -

```
unfocus.setMargin(0, margin, 0, 0);
test.setMargin(0, 10, 0, 0);
bitmapField.setMargin(0, 10, 0, 0);
bitmapField1.setMargin(0, 10, 0, 0); 
```

# multithreading - 如何在没有 TThread 的情况下从线程过程访问类的成员？

> ID：10928964
> 
> 赞同：1
> 
> 时间：2012-06-07T09:17:25.117
> 
> 标签：multithreading, delphi

我有一个像这样的单位

```
type
 TMyClass = Class(TObject)
private
 AnInteger      : Integer;
 MyThreadHandle : DWORD;
 procedure MyPrivateProcedure;
public
 procedure MyPublicProcedure;
end;

procedure TMyClass.MyPrivateProcedure;
 procedure MyThread; stdcall;
 begin
  if AnInteger <> 0 then MyPublicProcedure;
 end;
var
 DummyID: DWORD;
begin
  MyThreadHandle := CreateThread(NIL,0,@MyThread,NIL,0, DummyID);
end;

procedure TMyClass.MyPublicProcedure;
begin
 AnInteger := 0;
end; 
```

我的目标是拥有一个可以“访问”变量/函数/过程的线程（请不要使用 TTthread），就像它是类的一部分一样。此示例失败，因为它无权访问变量或过程。这只是一个例子，我知道 Integer 不能像那样改变。对我来说，有一个线程是课堂的一部分很重要。我还尝试将整数作为指针（有效）传递给线程，但我仍然无法访问该类的过程/函数。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:40:44.087

您可以使用 TThread 并保持文件大小较小。我认为你正在走上一条艰难的道路：重新发明轮子很费时间，我可以告诉你！:)

这是一些初始化线程的工作代码：

```
function ThreadProc(Thread: TThread): Integer;
var FreeThread: Boolean;
begin
  if not Thread.FTerminated then
  try
    result := 0; // default ExitCode
    try
      Thread.Execute;
    except
      on Exception do
        result := -1;
    end;
  finally
    FreeThread := Thread.FFreeOnTerminate;
    Thread.FFinished := True;
    if Assigned(Thread.OnTerminate) then
      Thread.OnTerminate(Thread);
    if FreeThread then
      Thread.Free;
    EndThread(result);   
  end;
end;

constructor TThread.Create(CreateSuspended: Boolean);
begin
  IsMultiThread := true; // for FastMM4 locking, e.g.
  inherited Create;
  FSuspended := CreateSuspended;
  FCreateSuspended := CreateSuspended;
  FHandle := BeginThread(nil, 0, @ThreadProc, Pointer(Self), CREATE_SUSPENDED, FThreadID);
  if FHandle = 0 then
    raise Exception.Create(SysErrorMessage(GetLastError));
  SetThreadPriority(FHandle, THREAD_PRIORITY_NORMAL); 
end; 
```

也就是说，您将对象作为`pointer()`线程创建 API 传递，它将作为 ThreadProc 的唯一参数传递。

ThreadProc 不应该是任何方法的一部分，而是该单元的全局。

这是另一段代码直接调用 API 来处理多线程压缩，没有开销，并且同步：

```
type
  TThreadParams = record
    bIn, bOut: pAESBlock;
    BlockCount: integer;
    Encrypt: boolean;
    ID: DWORD;
    AES: TAES;
  end;

{ we use direct Windows threads, since we don't need any exception handling
  nor memory usage inside the Thread handler
   -> avoid classes.TThread and system.BeginThread() use
   -> application is still "officialy" mono-threaded (i.e. IsMultiThread=false),
     for faster System.pas and FastMM4 (no locking)
   -> code is even shorter then original one using TThread }
function ThreadWrapper(var P: TThreadParams): Integer; stdcall;
begin
  with P do
    AES.DoBlocks(bIn,bOut,bIn,bOut,BlockCount,Encrypt);
  ExitThread(0);
  result := 0; // make the compiler happy, but won't never be called
end;

procedure TAES.DoBlocksThread(var bIn, bOut: PAESBlock; Count: integer; doEncrypt: boolean);
var Thread: array[0..3] of TThreadParams; // faster than dynamic array
    Handle: array[0..3] of THandle; // high(Thread) is not compiled by XE2
    nThread, i, nOne: integer;
    pIn, pOut: PAESBlock;
begin
  if Count=0 then exit;
  if {$ifdef USEPADLOCK} padlock_available or {$endif}
    (SystemInfo.dwNumberOfProcessors<=1) or // (DebugHook<>0) or
    (Count<((512*1024) div AESBlockSize)) then begin // not needed below 512 KB
    DoBlocks(bIn,bOut,bIn,bOut,Count,doEncrypt);
    exit;
  end;
  nThread := SystemInfo.dwNumberOfProcessors;
  if nThread>length(Thread) then // a quad-core is enough ;)
    nThread := length(Thread);
  nOne := Count div nThread;
  pIn := bIn;
  pOut := bOut;
  for i := 0 to nThread-1 do
  with Thread[i] do begin // create threads parameters
    bIn := pIn;
    bOut := pOut;
    BlockCount := nOne;
    Encrypt := doEncrypt;
    AES := self; // local copy of the AES context for every thread
    Handle[i] := CreateThread(nil,0,@ThreadWrapper,@Thread[i],0,ID);
    inc(pIn,nOne);
    inc(pOut,nOne);
    dec(Count,nOne);
  end;
  if Count>0 then
    DoBlocks(pIn,pOut,pIn,pOut,Count,doEncrypt); // remaining blocks
  inc(Count,nOne*nThread);
  assert(integer(pIn)-integer(bIn)=Count*AESBlockSize);
  assert(integer(pOut)-integer(bOut)=Count*AESBlockSize);
  bIn := pIn;
  bOut := pOut;
  WaitForMultipleObjects(nThread,@Handle[0],True,INFINITE); 
  for i := 0 to nThread-1 do
    CloseHandle(Handle[i]);
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T09:40:59.650

线程有自己的堆栈指针，因此您无法在`MyThread`本地过程中访问局部变量或参数（如隐藏的 Self 参数）（顺便说一句，这被声明为错误的）。此外，如果线程从外部函数访问变量（包括 Self），则不能对线程使用本地过程。而且如果你以后想使用64位编译器，你不能使用本地过程进行任何回调。

在您的情况下，您只需修复程序的声明并将其移动到单元范围（使其成为“独立”程序。这允许您使用线程回调参数“Self”。

```
function MyThread(MyObj: TMyClass): DWORD; stdcall;
begin
  if MyObj.AnInteger <> 0 then
    MyObj.MyPublicProcedure;
  Result := 0;
end;

procedure TMyClass.MyPrivateProcedure;
var
  DummyID: DWORD;
begin
  MyThreadHandle := CreateThread(nil, 0, @MyThread, Self, 0, DummyID);
end; 
```

# php - 找出 PHP 中 strtotime 日期的第四天

> ID：10928965
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:17:30.560
> 
> 标签：php

我在变量中有一个 strtotime 日期。我需要从该变量中找出第 4 天

```
$strtotime1=strtotime('06/17/2012'); 
```

我需要以 strtotime 格式找出第 4 天（即 2012 年 6 月 21 日）。

我尝试过：

```
$strtotime2=$strtotime1+4*60 * 60; 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:20:51.107

您要增加 4 小时而不是 4 天。

它应该是`$strtotime2=$strtotime1+4*24*60*60;`

或者

你可以这样做：

```
$strtotime2 = strtotime('+4 days', $strtotime1);
$date2 = date('m/d/Y', $strtotime2); 
```

# makefile - 在“全部”中创建多个目标

> ID：10928966
> 
> 赞同：2
> 
> 时间：2012-06-07T09:17:34.280
> 
> 标签：makefile

我正在尝试使用 Makefile 构建库的调试和发布版本，并将这些库复制到相关的构建目录，例如

```
.PHONY: all clean distclean

all: $(program_NAME_DEBUG)
    $(CP) $(program_NAME_DEBUG) $(BUILD_DIR)/debug/$(program_NAME_DEBUG)
    $(RM) $(program_NAME_DEBUG)
    $(RM) $(program_OBJS)
    $(program_NAME_RELEASE)
    $(CP) $(program_NAME_RELEASE) $(BUILD_DIR)/release/$(program_NAME_RELEASE)
    $(RM) $(program_NAME_RELEASE)
    $(RM) $(program_OBJS)

$(program_NAME_DEBUG): $(program_OBJS)
    $(LINK_DEBUG.c) -shared -Wl,-soname,$(program_NAME_DEBUG) $(program_OBJS) -o $(program_NAME_DEBUG)

$(program_NAME_RELEASE): $(program_OBJS)
    $(LINK_RELEASE.c) -shared -Wl,-soname,$(program_NAME_RELEASE) $(program_OBJS) -o $(program_NAME_RELEASE) 
```

第一个目标 (program_NAME_DEBUG) 编译正常，但第二个目标 (program_NAME_RELEASE) 产生以下错误：

```
libGlam_rel.so
make: libGlam_rel.so: Command not found
make: *** [all] Error 127 
```

`libGlam_rel.so`是的价值`program_NAME_RELEASE`

它似乎不像第一个目标那样识别第二个目标？

**编辑**

终于让这个工作了。

一个问题是在多个目录中有 src 文件，使用 VPATH 对此进行排序，例如

```
# specify dirs other then current dir to search for src files
VPATH = ../../pulse_IO/src ../../../g2/src 
```

在平台条件的东西中添加了额外的库目标，例如

```
# Platform specific conditional compilation
UNAME := $(shell uname)

TARGET := Glam

ifeq ($(UNAME), Linux)
# LINUX version
program_NAME := lib$(TARGET).so
program_DEBUG_NAME := lib$(TARGET)_dbg.so
program_RELEASE_NAME := lib$(TARGET)_rel.so
BUILD_DIR = ../build/linux
endif

ifeq ($(UNAME), MINGW32_NT-6.1)
# WINDOWS version
program_NAME := lib$(TARGET).dll
program_DEBUG_NAME := lib$(TARGET)_dbg.dll
program_RELEASE_NAME := lib$(TARGET)_rel.dll
BUILD_DIR = ../build/windows
endif 
```

添加了新的调试和发布目标文件：

```
DEBUG_OBJS := $(addprefix $(BUILD_DIR)/debug/,${program_OBJS})
RELEASE_OBJS := $(addprefix $(BUILD_DIR)/release/,${program_OBJS}) 
```

设置我的调试并发布 CFLAGS：

```
DEBUG_CFLAGS := -fPIC -g -Wall -DDEBUG=1
RELEASE_CFLAGS := -fPIC -O2 -Wall -DDEBUG=0 
```

整理了所有调试和发布编译器选项：

```
DEBUG_LINK.c := $(CC) $(DEBUG_CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH)
RELEASE_LINK.c := $(CC) $(RELEASE_CFLAGS) $(CPPFLAGS) $(LDFLAGS) $(TARGET_ARCH) 
```

将我的新规则添加到“全部”目标中：

```
.PHONY: all clean

all: $(program_DEBUG_NAME) $(program_RELEASE_NAME) 
```

规则集如下所示（包括替代隐式目标文件生成）：

```
$(program_DEBUG_NAME): $(DEBUG_OBJS)
    $(DEBUG_LINK.c) -shared -Wl,-soname,$@ $^ -o $(BUILD_DIR)/debug/$@

$(program_RELEASE_NAME): $(RELEASE_OBJS)
    $(RELEASE_LINK.c) -shared -Wl,-soname,$@ $^ -o $(BUILD_DIR)/release/$@

# rule to build object files (replaces implicit rule)
$(BUILD_DIR)/debug/%.o: %.c
    $(DEBUG_LINK.c) $< -c -o $@

$(BUILD_DIR)/release/%.o: %.c
    $(RELEASE_LINK.c) $< -c -o $@ 
```

最后，我修改了 clean 以处理所有新文件：

```
clean:
    @- $(RM) $(BUILD_DIR)/debug/$(program_DEBUG_NAME)
    @- $(RM) $(DEBUG_OBJS)
    @- $(RM) $(BUILD_DIR)/release/$(program_RELEASE_NAME)
    @- $(RM) $(RELEASE_OBJS) 
```

这允许我使用单个 Makefile 在 linux 和 windows 平台上生成我的库的调试和发布版本，例如`$ make -k`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:56:10.910

第一件事。您似乎想要两个库的不同版本的目标文件，但是这个 makefile 中没有任何东西可以提供。

有几种方法可以做到这一点。最干净的可能是有两个目录：

```
debug_objs/
  ang.o
  naur.o
  gul.o

release_objs/
  ang.o
  naur.o
  gul.o 
```

第二个最干净的是具有不同的文件名：

```
 ang_debug.o
  naur_debug.o
  gul_debug.o

  ang_rel.o
  naur_rel.o
  gul_rel.o 
```

`RELEASE_OBJS`无论哪种方式，您都可以为and编写规则`DEBUG_OBJS`（如果需要，我们可以提供帮助）。

现在看看库规则：

```
$(program_NAME_DEBUG): $(DEBUG_OBJS)
    $(LINK_DEBUG.c) -shared -Wl,-soname,$(program_NAME_DEBUG) $(DEBUG_OBJS) -o $(program_NAME_DEBUG)

$(program_NAME_RELEASE): $(RELEASE_OBJS)
    $(LINK_RELEASE.c) -shared -Wl,-soname,$(program_NAME_RELEASE) $(RELEASE_OBJS) -o $(program_NAME_RELEASE) 
```

我们可以使用[自动变量](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables)来使它们更简洁：

```
$(program_NAME_DEBUG): $(DEBUG_OBJS)
    $(LINK_DEBUG.c) -shared -Wl,-soname,$@ $^ -o $@

$(program_NAME_RELEASE): $(RELEASE_OBJS)
    $(LINK_RELEASE.c) -shared -Wl,-soname,$@ $^ -o $@ 
```

（我们可以走得更远一点，但我们不要推它。）

现在为`all`. 我们`$(program_NAME_RELEASE)`进入它所属的先决条件列表：

```
all: $(program_NAME_DEBUG) $(program_NAME_RELEASE)
    $(CP) $(program_NAME_DEBUG) $(BUILD_DIR)/debug/$(program_NAME_DEBUG)
    $(RM) $(program_NAME_DEBUG)
    $(RM) $(DEBUG_OBJS)
    $(CP) $(program_NAME_RELEASE) $(BUILD_DIR)/release/$(program_NAME_RELEASE)
    $(RM) $(program_NAME_RELEASE)
    $(RM) $(RELEASE_OBJS) 
```

但是没有理由删除目标文件，因为它们不会发生冲突，如果它们是中间文件，Make 无论如何都会删除它们。没有必要`$(CP)`，然后`$(RM)`当我们可以的时候`mv`。而且没有必要`mv`；如果那是库所属的地方，我们可以首先在那里构建它们：

```
all: $(program_NAME_DEBUG) $(program_NAME_RELEASE)

$(program_NAME_DEBUG): $(DEBUG_OBJS)
    $(LINK_DEBUG.c) -shared -Wl,-soname,$@ $^ -o $(BUILD_DIR)/debug/$@

$(program_NAME_RELEASE): $(RELEASE_OBJS)
    $(LINK_RELEASE.c) -shared -Wl,-soname,$@ $^ -o $(BUILD_DIR)/release/$@ 
```

**编辑：**
构建目标文件（我猜你正在使用 C）：

```
OBJS:= ang.o naur.o gul.o
DEBUG_OBJS := $(addprefix debug_objs/,$(OBJS))
RELEASE_OBJS := $(addprefix release_objs/,$(OBJS))

debug_objs/%.o: $(SOURCE_DIR)/%.c
    $(CC) $(DEBUG_FLAGS) $< -o $@

release_objs/%.o: $(SOURCE_DIR)/%.c
    $(CC) $(RELEASE_FLAGS) $< -o $@ 
```

（只要确保这些目录存在——你也可以自动化，但你一天所做的更改已经足够了。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:29:40.290

这种改变应该做到：

```
all: $(program_NAME_DEBUG) $(program_NAME_RELEASE) 
```

否则，`make all`无法 make `$(program_NAME_RELEASE)`，这就是错误消息告诉您的内容。

# c# - 如何声明动态对象的属性类型？

> ID：10928969
> 
> 赞同：0
> 
> 时间：2012-06-07T09:17:45.060
> 
> 标签：c#, object, dynamic

我有以下问题：

我正在使用动态对象（ ExpandoObject ），我想更改运行时的属性。线索是什么......我希望我的属性是双精度的，因为我正在使用的用户控件如果它的类型不是双精度，则无法识别该属性是双精度的。据我所知，动态对象的属性的已知类型在这种情况下应该是双倍的，但它不适用于此控件。那么当我声明动态对象的新属性来告诉它是双精度时，有什么明确的方法吗？

提前致谢， 杨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:24:35.707

在 的情况下`ExpandoObject`，只需*分配一个 double*：

```
 dynamic obj = new ExpandoObject();
    obj.Foo = 123.45;
    Console.WriteLine(obj.Foo.GetType()); // System.Double 
```

但是，我会说`dynamic`对象可能不是 UI 绑定（到用户控件）的好选择，因为它们没有强大的属性模型。事实上，大多数 UI 绑定甚至都不是最新的`dynamic`，并且会尝试使用`System.ComponentModel`（不知道`dynamic`）。

# php - PHP评论每x小时

> ID：10928971
> 
> 赞同：0
> 
> 时间：2012-06-07T09:17:50.030
> 
> 标签：php

我是 PHP 的初学者，但我希望用户能够在 24 小时内发表 10 次评论。如果他们在这 24 小时之前达到 10 条评论，他们会收到一条消息，说“您不能再发表任何评论”，并且在 24 小时后，他们可以再次发表评论。

关于如何做到这一点的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:19:31.203

将用户名和时间戳与数据库中的每条评论一起存储。

当有人尝试发表评论时，进行 SQL 查询以返回该用户发表评论的评论以及过去 24 小时内的时间。

如果有 10 个结果，则向用户显示错误消息。

否则正常处理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:21:19.803

如果您有注册用户，您可以在每次添加新评论时将评论和日期存储在数据库中。如果您还没有注册用户，您可以将其存储在 cookie 中。阅读有关[cookie](http://php.net/manual/en/function.setcookie.php)的信息。

# linux - mmap 比 ioremap 慢

> ID：10928978
> 
> 赞同：13
> 
> 时间：2012-06-07T09:18:30.923
> 
> 标签：linux, kernel, mmap, gpio

我正在为运行 Linux 2.6.37 的 ARM 设备进行开发。我正在尝试尽快切换 IO 引脚。我做了一个小内核模块和一个用户空间应用程序。我尝试了两件事：

1.  使用 . 直接从内核空间操作 GPIO 控制寄存器`ioremap`。
2.  `mmap()`GPIO 控制寄存器没有缓存并从用户空间使用它们。

两种方法都有效，但第二种方法比第一种方法慢约 3 倍（在示波器上观察）。我想我禁用了所有缓存机制。

当然，我想充分利用这两个世界：从用户空间开发的灵活性和易用性以及内核空间的速度。

有谁知道为什么`mmap()`可能比 慢`ioremap()`？

这是我的代码：

### 内核模块代码

```
static int ti81xx_usmap_mmap(struct file* pFile, struct vm_area_struct* pVma)
{
  pVma->vm_flags |= VM_RESERVED;
  pVma->vm_page_prot = pgprot_noncached(pVma->vm_page_prot);

  if (io_remap_pfn_range(pVma, pVma->vm_start, pVma->vm_pgoff,
                          pVma->vm_end - pVma->vm_start, pVma->vm_page_prot))
     return -EAGAIN;

  pVma->vm_ops = &ti81xx_usmap_vm_ops;
  return 0;
}

static void ti81xx_usmap_test_gpio(void)
{
  u32* pGpIoRegisters = ioremap_nocache(TI81XX_GPIO0_BASE, 0x400);
  const u32 pin = 1 << 24;
  int i;

  /* I should use IO read/write functions instead of pointer deferencing, 
   * but portability isn't the issue here */

  pGpIoRegisters[OMAP4_GPIO_OE >> 2] &= ~pin;    /* Set pin as output*/

  for (i = 0; i < 200000000; ++i)
  {
     pGpIoRegisters[OMAP4_GPIO_SETDATAOUT >> 2] = pin;
     pGpIoRegisters[OMAP4_GPIO_CLEARDATAOUT >> 2] = pin;
  }

  pGpIoRegisters[OMAP4_GPIO_OE >> 2] |= pin;    /* Set pin as input*/

  iounmap(pGpIoRegisters);
} 
```

### 用户空间应用代码

```
int main(int argc, char** argv)
{
   int file, i;
   ulong* pGpIoRegisters = NULL;
   ulong pin = 1 << 24;

   file = open("/dev/ti81xx-usmap", O_RDWR | O_SYNC);

   if (file < 0)
   {
      printf("open failed (%d)\n", errno);
      return 1;
   }

   printf("Toggle from kernel space...");
   fflush(stdout);

   ioctl(file, TI81XX_USMAP_IOCTL_TEST_GPIO);

   printf(" done\n");    

   pGpIoRegisters = mmap(NULL, 0x400, PROT_READ | PROT_WRITE, MAP_SHARED, file, TI81XX_GPIO0_BASE);
   printf("Toggle from user space...");
   fflush(stdout);

   pGpIoRegisters[OMAP4_GPIO_OE >> 2] &= ~pin;

   for (i = 0; i < 30000000; ++i)
   {
      pGpIoRegisters[OMAP4_GPIO_SETDATAOUT >> 2] = pin;
      pGpIoRegisters[OMAP4_GPIO_CLEARDATAOUT >> 2] = pin;
   }

   pGpIoRegisters[OMAP4_GPIO_OE >> 2] |= pin;

   printf(" done\n");
   fflush(stdout);
   munmap(pGpIoRegisters, 0x400);    

   close(file);    
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T21:34:32.893

这是因为 ioremap_nocache() 仍然在 VM 映射中启用 CPU 写入缓冲区，而 pgprot_noncached() 禁用缓冲性和缓存性。

苹果与苹果的比较将改为使用 ioremap_strongly_ordered() 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T17:34:24.380

我的猜测是，由于`mmap`必须检查以确保您正在写入允许写入的内存，因此它会比内核版本慢（我相信/假设不会进行那种检查- - 使用你负责测试的内核模块，直到你非常确定你没有破坏东西）。

尝试从内核空间使用`do_mmap`（我相信这是一个）`mmap`，看看它的比较。如果它相对更快，那么我是对的。如果不是，那就是别的东西。

# .net - 在 Linq to SQL 部分实体类中调用用户定义函数

> ID：10928979
> 
> 赞同：1
> 
> 时间：2012-06-07T09:18:34.137
> 
> 标签：.net, sql-server, tsql, linq-to-sql

我的 SQL 服务器上有一个用户定义的函数。我想在 Linq to SQL 设计器创建的部分实体类之一中利用它。

我知道当您可以访问数据上下文时这样做非常简单，但是在部分实体类中我显然没有。

有谁知道访问拥有特定实体的数据上下文或直接从该实体调用 udf 的方法？

谢谢

# episerver - 来自 EPiServerUI.master 的 Episerver 嵌套母版页

> ID：10928981
> 
> 赞同：2
> 
> 时间：2012-06-07T09:18:36.103
> 
> 标签：episerver, episerver-6, episerver-6-r2

我想要所有 GuiPlugIn 报告的自定义母版页。我们知道，默认情况下 GuiPlugIn 引用 EPiServerUI.master 页面，它是安装的一部分。我想为我的 GuiPlugIn 创建一个嵌套母版页，而不是默认。

请分享你的想法。

谢谢，克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:15:16.140

我认为您无法更改插件母版页的原因是为了视觉一致性。您可以尝试通过这样的代码更改母版页（假设您的插件是用户控件：

```
protected override void OnInit(EventArgs e) 
{
this.Page.MasterPageFile = "~/NewMaster.master";
} 
```

如果您提供更多详细信息，也许有更好的方法来做您想做的事？

如果您想注入自定义 css 或脚本以与您的插件一起使用，您始终可以访问 Page 对象，如下所示：

```
HtmlGenericControl js = new HtmlGenericControl("script");
js.Attributes["type"] = "text/javascript";
js.Attributes["src"] = "mylibrary.js";
this.Page.Header.Controls.Add(js); 
```

# java - sql server 2008 不支持 JDBC 驱动程序类

> ID：10928982
> 
> 赞同：0
> 
> 时间：2012-06-07T09:18:41.220
> 
> 标签：java, sql-server-2008, jdbc

在我的 java 代码中，ms sql server 2008 不支持 JDBC 驱动程序类，但它与 ms sql server 2005 完美配合

我已经把 jdbc 驱动程序类“com.microsoft.sqlserver.jdbc.SQLServerDriver”

我的代码是

```
import java.sql.*;

  public class MysqlConnect{
  public static void main(String[] args) {
  System.out.println("MySQL Connect Example.");
  Connection conn = null;
  String url = "jdbc:sqlserver://SQLSERVERIP:1433;";
  String dbName = "DatabaseName=DBNAME";
  String driver = "com.microsoft.sqlserver.jdbc.SQLServerDriver";
  String userName = "sa"; 
  String password = "password";
  try {
  Class.forName(driver).newInstance();
  conn = DriverManager.getConnection(url+dbName,userName,password);
  System.out.println("Connected to the database");
  conn.close();
  System.out.println("Disconnected from database");
  } catch (Exception e) {
  e.printStackTrace();
  }
 }
} 
```

当我尝试连接时，它给出了一个错误

```
com.microsoft.sqlserver.jdbc.SQLServerException: Cannot open database "hj_cnb_ci
" requested by the login. The login failed.
        at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError
(SQLServerException.java:197)
        at com.microsoft.sqlserver.jdbc.TDSTokenHandler.onEOF(tdsparser.java:246
)
        at com.microsoft.sqlserver.jdbc.TDSParser.parse(tdsparser.java:83)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.sendLogon(SQLServerC
onnection.java:2529)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.logon(SQLServerConne
ction.java:1905)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.access$000(SQLServer
Connection.java:41)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection$LogonCommand.doExecu
te(SQLServerConnection.java:1893)
        at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:4615)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLSe
rverConnection.java:1400)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLSer
verConnection.java:1045)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConne
ction.java:817)
        at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerCon
nection.java:700)
        at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.
java:842)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at MysqlConnect.main(MysqlConnect.java:14) 
```

请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:35:48.217

请检查您的 jdbc 驱动程序版本。“Microsoft JDBC Driver 4.0”适合你的ms sql server 2008。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T14:30:59.620

如果您使用的是 SQL Server 2008，请将您的驱动程序类更改为 -- com.microsoft.jdbc.sqlserver.SQLServerDriver 。连接应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T21:59:50.090

检查是否存在“hj_cnb_ci”或 DBName 在您的数据库服务器上创建它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:35:51.677

请检查您的数据库名称。`newInstance()`加载类时无需调用；它将调用其静态块并调用`registerDriver()`驱动程序管理器类的方法，并将其引用作为参数传递。

这个方法携带一个`Driver`类的对象。当您调用驱动程序管理器的`getConnection()`方法时，它会在该对象的帮助下调用驱动程序类方法连接。

# ios - 点击图像时如何弹出 UITextField 以输入数据？

> ID：10928984
> 
> 赞同：2
> 
> 时间：2012-06-07T09:18:48.410
> 
> 标签：ios, popup, uitextfield

如果我点击一个图像，我可以弹出`UITextfield`输入数据吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:30:51.503

您可以使用 UIAlertView 如下：

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Title"
                                                message:@"Please enter your text:"
                                               delegate:self
                                      cancelButtonTitle:@"Done"
                                      otherButtonTitles:nil];

alert.alertViewStyle = UIAlertViewStylePlainTextInput;
UITextField *textField = [alert textFieldAtIndex:0];
textField.keyboardType = UIKeyboardTypeDefault;
textField.placeholder = @"Enter some text";

[alert show]; 
```

编辑：处理返回的文本，实现委托方法

```
- (void)alertView:(UIAlertView *)alert clickedButtonAtIndex:(NSInteger)buttonIndex {
    if(buttonIndex > 0) {
        UITextField *textField = [alert textFieldAtIndex:0];
        NSString *text = textField.text; 
        if(text == nil) { 
            return; 
        } else { 
            //do something with text 
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:25:20.470

您可以在其选择器操作中添加一个 .. 向`UITapGestureRecognizer`您`UIImageView`的视图添加一个 textField .. 就这么简单，您的实现将是。并且不要忘记`userInterActionEnabled = YES`为 imageView 设置，因为默认值为 NO。

# jquery - 登录后彩盒重定向到父窗口中的 url

> ID：10928985
> 
> 赞同：0
> 
> 时间：2012-06-07T09:18:52.500
> 
> 标签：jquery, colorbox

我正在为登录窗口使用颜色框，成功后，我想将用户重定向到父框架中的 index.php。我遗漏了一些细节，它在颜色框本身中重定向 index.php。我在哪里声明目标的“父”参数？

我正在发布启用颜色框等的代码部分：

打开颜色框的链接：

```
$(document).ready(function() {
   $("a.logmein").colorbox({rel: 'logmein', iframe:true, width:"540", height:"400", onClosed:function(){ location.reload(true); }});
}); 
```

检查用户的凭据：

```
if($totalRows_finduser==0){
    echo '<script type="text/javascript" charset="utf-8">
      $(document).ready(function() {
            $.colorbox({href:\'login.php\', iframe:true, transition:"fade", width:"540", height:"400"});
    });
  </script>';

} else {    
    $_SESSION['login'] = 1; 
        // I set the user as logged in, assign the session vars etc
        // HOW DO I REDERECT HIM FROM HERE TO PARENT??

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:37:34.333

也许有不同的方式来思考这个问题。为什么将路由（重定向）作业分配给登录弹出窗口。

考虑使弹出窗口的工作（i）获取登录凭据并（ii）对其进行身份验证。如果凭据失败，请留在弹出窗口中。如果它们通过，关闭弹出窗口，将操作结果传回给父级。让父母在那里执行路由。

您还应该考虑最终用户只是关闭登录弹出窗口的情况；要么防止这种情况发生，要么向涵盖该案例的父级添加一个信号。

如果您更喜欢从弹出窗口中进行路由，请记住您可以访问父级的 Window 对象。所以用一些 URI加载**window.parent.location 。**

kjm

# php - 从 url 获取数字

> ID：10928987
> 
> 赞同：0
> 
> 时间：2012-06-07T09:18:53.203
> 
> 标签：php, regex

我们有一个类似[http://site.com/people/593765-barack-obama?sort=popular的网址](http://site.com/people/593765-barack-obama?sort=popular)

如何仅获取链接的 ID 部分？此示例为 593765。

所以模式是`http://site.com/people/{somenumber}-{anythingelse}`

我不确定如何使用正则表达式来获取它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:28:17.500

```
preg_match('#/(\d+)-#', $url, $m);
echo $m[1]; // 593765 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:24:57.670

我猜 shorts 是 URL 的“catch”文件，而 {somenumber}-{anythinelse} 是您获得的参数，我只想分解该参数。

```
list($iNumber, $sAnything) = explode("-", $sParam1); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:28:49.940

正则表达式模式：

```
#/(\d+)-.+\??# 
```

使用示例：

```
preg_match('#/(\d+)-.+\??#', 'http://site.com/people/593765-barack-obama?sort=popular', $matches);
var_dump($matches[1]); 
```

输出：

```
string(6) "593765" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T09:29:03.957

使用正则表达式：

`/people\/([0-9]+)\-/`

```
<?php
    //$pattern = $_SERVER['REQUEST_URI'];
    $pattern = "http://site.com/people/593765-barack-obama?sort=popular";
    preg_match('/people\/([0-9]+)\-/', $pattern, $match);
    if (isset($match[1])) {
        echo "The number is: " . $match[1];
    }
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T09:22:44.170

您将需要从

`/shots/593765-brainzap?list=following`

这是`$_SERVER['REQUEST_URI']`页面的。

# php - 有没有办法在不知道深度的情况下循环遍历多维数组？

> ID：10928993
> 
> 赞同：15
> 
> 时间：2012-06-07T09:19:15.040
> 
> 标签：php, arrays, nested-loops

到目前为止，如果我必须遍历一个多维数组，我会为每个维度使用一个 foreach 循环。

例如二维

```
foreach($array as $key=>$value)
{
    foreach($value as $k2=>$v2)
    {
         echo
    }
} 
```

不知道数组的深度怎么办？即深度是可变的。

我唯一能想到的就是编写整个循环堆栈并在下一个值不是数组时中断循环。这似乎有点傻。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-07T09:28:29.267

是的，您可以使用[递归](https://en.wikipedia.org/wiki/Recursion_%28computer_science%29)。这是一个输出数组中所有元素的示例：

```
function printAll($a) {
  if (!is_array($a)) {
    echo $a, ' ';
    return;
  }

  foreach($a as $v) {
    printAll($v);
  }
}

$array = array('hello',
               array('world',
                     '!',
                     array('whats'),
                     'up'),
               array('?'));
printAll($array); 
```

在进行递归时，您应该*始终*记住的是，您需要一个不会更深入的**基本案例。**

我喜欢在继续该功能之前检查基本情况。这是一个常见的习语，但不是绝对必要的。如果您应该输出或进行递归调用，您也可以检查`foreach`循环，但我经常发现代码很难以这种方式维护。

当前输入和基本情况之间的“距离”称为**变体**，是一个整数。在每次递归调用中，变量都应该严格递减。上一个示例中的变体是`the depth of $a`. 如果您不考虑变体，则可能会导致无限递归，最终脚本将因[堆栈溢出](https://en.wikipedia.org/wiki/Stack_overflow)而死。在递归函数之前在注释中准确记录变体的内容并不少见。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-12-12T04:46:59.790

您可以在不知道其深度的情况下为循环多维数组执行以下功能

```
// recursive function loop through the dimensional array
function loop($array){

    //loop each row of array
    foreach($array as $key => $value)
    {
         //if the value is array, it will do the recursive
         if(is_array($value) ) $array[$key] =  loop($array[$key]);

         if(!is_array($value)) 
         {
            // you can do your algorithm here
            // example: 
             $array[$key] = (string) $value; // cast value to string data type

         }
    }

    return $array;
} 
```

通过使用上述函数，它将遍历每个多维数组，下面是您可以传递给循环函数的示例数组：

```
 //array sample to pass to loop() function
 $data = [
  'invoice' => [
      'bill_information' => [
          'price' => 200.00,
          'quantity' => 5
      ],
      'price_per_quantity' => 50.00
  ],
  'user_id' => 20
];

// then you can pass it like this :
$result = loop($data);
var_dump($result);

//it will convert all the value to string for this example purpose 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:28:27.220

您可以对这个问题使用递归：

这是一个例子

```
$array = array(1 => array(1 => "a", 2 => array(1 => "b", 2 => "c", 3 => array(1 => "final value"))));

//print_r($array);

printAllValues($array);

function printAllValues($arr) {
    if(!is_array($arr)) {
        echo '<br />' . $arr;
        return;
    }
    foreach($arr as $k => $v) {
        printAllValues($v);
    }
} 
```

它将使用递归循环遍历数组

它会像这样打印

```
a
b
c
final value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-01T19:25:30.630

根据前面的递归示例，这里有一个函数，它保存一个值所在的键的路径数组，以防你需要知道你是如何到达那里的：

```
function recurse($a,$keys=array()) 
    {
        if (!is_array($a)) 
            {
                echo implode("-", $keys)." => $a <br>";
                return;
            }
        foreach($a as $k=>$v) 
            {
                $newkeys = array_merge($keys,array($k));
                recurse($v,$newkeys);
            }
    }

recurse($array); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-24T21:35:53.170

内部的简单函数`array_walk_recursive`用于显示嵌套级别以及键和值：

```
array_walk_recursive($array, function($v, $k) {
                                 static $l = 0;
                                 echo "Level " . $l++ . ": $k => $v\n";
                             }); 
```

另一个显示`use`参考以获得结果：

```
array_walk_recursive($array, function($v) use(&$result) {
                                 $result[] = $v;
                             }); 
```