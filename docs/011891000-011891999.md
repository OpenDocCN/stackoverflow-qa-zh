# StackOverflow 问答 11891000-11891999

# oracle - 评估 Oracle IN 子句中的多个范围

> ID：11891000
> 
> 赞同：2
> 
> 时间：2012-08-09T19:56:15.770
> 
> 标签：oracle, between, range

我有一个如下所示的 Oracle 选择：

```
SELECT *
  FROM CUSTOMER
 WHERE (CUSTOMER_TYPE BETWEEN 100 AND 200
     OR CUSTOMER_TYPE = 350
     OR CUSTOMER_TYPE BETWEEN 410 AND 520); 
```

我想将其更改为在同一语句中结合多个范围和单个值的评估的东西。以下语法不正确，但是否有一些 Oracle 等价物？

```
SELECT *
  FROM CUSTOMER
 WHERE CUSTOMER_TYPE IN (100..200, 350, 410..520); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:41:15.867

考虑这是一种可能性。

```
SELECT *
FROM CUSTOMER c,
(
    select level + 99 n from dual connect by level < 102
        union all
    select 350 n from dual
        union all
    select level + 409 n from dual connect by level < 112
) t
WHERE c.CUSTOMER_TYPE = t.n 
```

它避免了**OR**和**IN**。如果你幸运的话，一个**哈希连接**就是结果。

# php - 查找全局变量存储在哪个文件中

> ID：11891004
> 
> 赞同：1
> 
> 时间：2012-08-09T19:56:18.343
> 
> 标签：php, cakephp

我正在查看一个 PHP 文件，我看到了`$myaccounts`在条件语句中使用的变量。该变量未在此 PHP 文件中定义，因此我假设这是一个全局变量。

我将如何去查找在哪个目录/文件中定义了这个变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:01:10.757

如果您有一个可以执行全局搜索的 IDE，只需查找`$myaccounts*=`(`*`可以替换为您的搜索功能使用的任何通配符)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:08:29.330

如果您的环境启用了 xdebug，您可以使用它的[跟踪功能](http://xdebug.org/docs/execution_trace)来获取执行的每一行的列表。您肯定需要的配置是`xdebug.collect_assignments`将 this 设置为`1`. 获得跟踪文件后，对变量名称的简单文本搜索应该会显示分配给它的每个位置。

如果您没有 xdebug，我会尝试在您看到“$myaccounts”变量的地方输出[get_included_files()](http://www.php.net/manual/en/function.get-included-files.php)并在其中搜索文本“$myaccounts\s*=”，但`extract()`可以隐藏作业。

# apache-flex - spark.effects.Effect 类的性能

> ID：11891005
> 
> 赞同：0
> 
> 时间：2012-08-09T19:56:20.223
> 
> 标签：apache-flex, flex4, effects, flex4.6

我正在尝试确定 Spark Effect 类的性能。我不确定如何确定这一点。

有几个属性看起来可能会提高性能。disableLayout 属性、suspendBackgroundProcessing 和 applyChangesPostLayout。

在某处我读到suspendBackgroundProcessing 未启用，因为它需要验证，我认为在所述属性的覆盖中。

我在设置重复效果的地方设置了测试并查看了 FPS。更改以前的属性会使帧速率从 3 fps 更改为 12fps，但我不确定它们如何影响行为（我略有影响，但在某些情况下，无论这些选项如何，结果都是相同的）。我还将效果放在一个序列中，并测试了在序列效果中设置目标与在效果本身上设置一个或多个目标。Sequence 复合效果有一个 target 属性，如果设置，该属性会将此值传递给子效果。运行内部不同的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T04:21:37.380

我发现性能很差，现在尽量避免它。

我们的卡片翻转使用 spark.effects，它可以在桌面和网络上找到，但是当我们交叉兼容到 iOS 时它严重失败，我们将其更改为纯 Flash 动画并且它运行完美。

总的来说，我认为火花组件对于任何需要高性能的东西都是有缺陷的。

# wordpress - wordpress - 是否有显示选项页面验证错误的内置功能？

> ID：11891010
> 
> 赞同：3
> 
> 时间：2012-08-09T19:56:44.240
> 
> 标签：wordpress

我正在为我的插件构建一个管理选项页面并`register_settings`用于设置我的验证功能。一切正常，但想要一个函数来定义并在字段验证失败的情况下显示错误消息。Wordpress 中是否有内置功能，如果没有，推荐的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:36:57.623

WordPress 有自己的错误管理器，非常简单。要添加错误消息，首先您必须实例化您自己的 WP_Error 实例。

```
$myErrors = new WP_Error(); 
```

下一步是添加您的错误消息

```
$myErrors->add('required', __('Please fill up all the fields correctly !')); 
```

最后，您可以通过错误代码获取错误消息，如下所示

```
$msg = $myErrors->get_error_message('required'); 
```

如果您回显`$msg`，那么它将打印`Please fill up all the fields correctly !`.

或者您可以按如下方式使用它

```
if(!isset($_POST['myRequiredField']))
{
    $myErrors=new WP_Error('required', __('Please fill up all the fields correctly !'));
} 
```

然后检索错误消息以在任何地方打印，如下所示

```
if (is_wp_error($myErrors)) echo $myErrors->get_error_message(); 
```

**参考：** [**Codex和另一个关于**](http://codex.wordpress.org/Class_Reference/WP_Error)[**SO**](https://stackoverflow.com/questions/9945757/wordpress-admin-required-custom-meta-check/9946829#9946829)的答案可能会给你更多的想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T14:00:29.617

答案是使用[http://codex.wordpress.org/Function_Reference/add_settings_error](http://codex.wordpress.org/Function_Reference/add_settings_error)`add_settings_error()`上的文档

# sql - 库存调整表的表设计，2 表还是 1？

> ID：11891012
> 
> 赞同：0
> 
> 时间：2012-08-09T19:56:52.373
> 
> 标签：sql, database-design

我目前有一个库存类型表（仅显示重要的字段）：

```
Timestamp Account User  Symbol Locates 
---------+-------+---- +------+--------
 2012-...| ABC   | Joe | ZZZ  | 1000
---------+-------+---- +------+-------- 
```

每当用户需要调整定位（共享）的数量时，他们就会在表中发布一条新记录。我需要为用户存储几乎完全相同的数据来调整他们持有的股票数量。事实上，唯一不同的`Locates`字段是`Shares`需要调整股票的字段，例如：

```
Timestamp Account User  Symbol  Shares
---------+-------+---- +------+--------
 2012-...| ABC   | Joe | ZZZ  | 2000
---------+-------+---- +------+-------- 
```

问题是最好有 2 个表，一个用于定位，一个用于共享，还是最好有 1 个表，将`Locates`列重命名为`Shares`并添加一个 Enum 类型列以指示事务类型（'LOCATES '，'位置'）。

目前还没有这方面的报告。它仅用于用户所做的应用程序存储更改，并在重新启动应用程序时重建定位和共享。我看不出任何一种方法都有很大的优势，所以这更像是一个“什么是最佳实践”类型的问题。

**更新**

在阅读了一些评论后，我意识到如果不知道这张表是如何使用的，很难回答。希望这里有一个简短的解释：

每天结束时，我们会从数据库中清除交易数据，这样第二天就开始没有数据了。这些定位/共享数据都不会每天结转。

每天早上应用程序启动，并从第三方每天发布到服务器的平面数据文件中加载拥有的共享和定位的共享（一天开始时没有从数据库加载数据）。在交易日内，用户可以通过向服务器发送消息来调整股票数量和/或定位。此消息更新服务器上内存中的值，并将记录写入此表以显示正确的*起始值*应该是什么。（基本上覆盖了从平面文件中读取的内容）。

如果我们需要在白天重新启动服务器（这种情况很少见，但可能发生），在重新启动时，来自平面文件的数据会重新读回应用程序。应用程序还读取此表中的任何记录，并使用帐户/符号组合的最新记录来覆盖从平面数据文件中读取的值。因此，如果我们必须重新启动应用程序，此表将用作额外的每日数据源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:59:13.650

您还有第三种选择，即有两个数据列，一个用于定位，一个用于共享。

我认为拥有一个通用列不是一个好主意，它的值取决于枚举类型。这种情况很容易发生错误。某一天的总份额调整是多少？糟糕，我还包括了“定位”。

一些数据库支持计算/计算列。使用这样的数据库，您还可以使用指示符列指定一行是用于定位还是共享（或两者）：

```
IsLocate as (case when locates is not null then 'Y' else 'N' end),
IsAdjustment as (case when shares is not null then 'Y' else 'N' end), 
```

# objective-c - 将选择动画添加到 UIButton

> ID：11891015
> 
> 赞同：5
> 
> 时间：2012-08-09T19:57:07.167
> 
> 标签：objective-c, animation, uibutton, touch-up-inside

我的一个 ViewController 中有一个 UIButton，其中包含三个不同的状态图像（正常、突出显示和选中）。当我按下此按钮时，它会突出显示，当我释放它时，它会被选中。我想制作一个动画，在 4 秒内使用 fadeIn 左右将按钮的突出显示图像更改为选定的图像。

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-17T10:51:26.510

尝试`UIView transitionWithView`首先将**正常**和**选定**图像设置为`UIButton`，然后在动作处理程序中为更改设置动画：

```
[UIView transitionWithView:self.addListButton
                  duration:0.3
                   options:UIViewAnimationOptionTransitionCrossDissolve
                animations:^{
                    [self.addListButton setSelected:YES];
                } completion:nil]; 
```

我不想改变的状态`UIButton`所以我只是改变了动画块中的**正常图像：**

```
[self.addListButton setImage:[UIImage imageNamed:@"icon-addbutton.png"]
    forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:49:06.070

您必须注册自己的`UIButton`子类，并且可能必须使用自定义动画代码覆盖`setSelected`和覆盖。`setHighlighted`更安全的选择是`UIControl`直接子类化并重新实现这些选择器，这样您就没有任何`UIButton`特定的遗产。

# arrays - 如何在matlab中预分配结构

> ID：11891023
> 
> 赞同：1
> 
> 时间：2012-08-09T19:57:24.770
> 
> 标签：arrays, matlab, structure

我确实有一个简单的问题，但它不适合我。我想预先分配一个包含许多字段的结构。我想像这样获得它：结构 S 1x30 和 30 个字段中的每一个都应该是一个 1x50 的结构（50 个条目中的一些整数，一些带有字符串的单元格，一些子数组）。这是否可以在不为 50 个字段中的每一个提供确切名称的情况下预先分配它？

干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:08:23.280

必须命名 AFAIK 结构字段，但是，这些名称不需要硬编码。

例如，如果我有一个`foo`具有名为的字段的结构，`bar`我可以像这样访问该字段：

```
name = 'bar';
data = foo.(name);  % the same as data = getfield(data, name); 
```

该`foo.(name)`符号表示可以从变量（动态字段名称）中生成字段名称，文档可以在[此处](http://www.mathworks.com/help/techdoc/matlab_prog/br1v5cc-1.html)找到。此外，您可以使用它来创建字段。

```
name = 'bar'
for i = 1:10
  nameI = [bar, num2str(i)] ;
  foo.( nameI) = []; % the same as foo = setfield(foo, nameI, []);
end 
```

该结构`foo`现在有 10 个名为`bar1`, `bar2`, ...的字段`bar10`。

如果您绝对不想要名称而只想要索引，那么您可能想要的是一个元胞数组。元胞数组类似于常规的 matlab 向量，只是它们可以包含任何内容。

```
c = {'1234', 1234, [1 2 3 4],  [1 2; 3 4], @disp, {1 ,2, 3}}; 
```

例如`c`，一个元胞数组包含字符串、标量、向量、矩阵，然后是函数句柄，以及另一个元胞数组。

您可以使用花括号访问单个单元格的内容`{}`。所以 `c{1}`会返回`'1234'`，而`c{2}`会返回一个数字。

您可以使用这些方法中的任何一种来预先分配适合您所描述的数据结构。

# cdi - 如何在 Weld 中检索所有现有的长时间运行的对话？

> ID：11891035
> 
> 赞同：1
> 
> 时间：2012-08-09T19:58:23.023
> 
> 标签：cdi, seam3, conversation-scope, weld

我正在 JBoss 7.1.1.Final、Weld、Seam 3 中编写应用程序。我有以下 bean：

```
@ConversationScoped
public class ConversationBean implements Serializable {

   @Inject
   Conversation conversation;

   private Article article;
...
} 
```

现在，用户可能会创建多个对话，每个对话都会与 ConversationBean 的实例相关联。我需要能够获得所有与长期对话相关的实例。

我需要访问它们的原因是，如果用户多次打开一篇文章（因此他将使用同一篇文章创建多个对话）。如果他在一次对话中更改了文章，我希望能够刷新其他对话中的文章。

有没有一些标准的方法来做到这一点？

编辑：“文章”实例由 entityManager 查找并在对话中进行管理。使用 Seam Managed Persistence Context 检索实体管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T15:31:35.390

见[http://docs.jboss.org/weld/reference/latest/en-US/html/contexts.html](http://docs.jboss.org/weld/reference/latest/en-US/html/contexts.html)

```
@Inject @Http private HttpConversationContext conversationContext;

[...]    

     conversationContext.getConversations() 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T19:18:44.867

每个会话只进行一次对话。Injection Conversation 将为您提供一个长时间运行的对话（如果尚未升级，则为临时对话）。

# css - 哪个 CSS 属性对于渐变“背景”或“背景图像”是正确的

> ID：11891040
> 
> 赞同：0
> 
> 时间：2012-08-09T19:58:49.123
> 
> 标签：css, gradient

哪个是用于 CSS 渐变的正确属性？“背景”或“背景图像”，如下所示。它们都适用于所有 5 个浏览器（在我拥有的版本中）。我看过多个教程，有些使用“背景”，有些使用“背景图像”，但没有人讨论为什么一种方法比另一种更好。

他们都没有在[http://jigsaw.w3.org/css-validator/#validate_by_input上验证](http://jigsaw.w3.org/css-validator/#validate_by_input)

```
.gradient {
    background-color: #1a82f7;
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#1a82f7), to(#2F2727));
    background: -webkit-linear-gradient(top, #2F2727, #1a82f7);
    background: -moz-linear-gradient(top, #2F2727, #1a82f7);
    background: -ms-linear-gradient(top, #2F2727, #1a82f7);
    background: -o-linear-gradient(top, #2F2727, #1a82f7);
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#2F2727, endColorstr=#1a82f7);
} 
```

或者这个：

```
.gradient {
    background-color: #1a82f7;
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#1a82f7), to(#2F2727));
    background-image: -webkit-linear-gradient(top, #2F2727, #1a82f7);
    background-image: -moz-linear-gradient(top, #2F2727, #1a82f7);
    background-image: -ms-linear-gradient(top, #2F2727, #1a82f7);
    background-image: -o-linear-gradient(top, #2F2727, #1a82f7);
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0, startColorstr=#2F2727, endColorstr=#1a82f7);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:03:19.987

我不相信 using与 using`background`有什么不同`background-image`。基本上它就像`background: url('image.png');`和`background-image: url('image.png')`- 它们是相同的东西，只是它`background`是一个速记属性，允许您指定多个背景属性，例如`background-repeat`, `background-color`，当然还有`background-image`。

所以基本上梯度应该指定为 a `background-image`， using`background`没有什么不同，只是指定它的另一种方式。

至于**W3C**验证器问题，我认为这是因为渐变“函数”都使用特定于浏览器的前缀。**我希望在HTML5**正式发布之前，这些功能不会被官方认可。

希望以任何方式有所帮助。

# ruby-on-rails - 授权与 CanCan、Devise 和 Rolify 建立关联

> ID：11891050
> 
> 赞同：1
> 
> 时间：2012-08-09T19:59:31.867
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, authorization, cancan

我的应用程序中有当前的数据库结构：

```
Publisher has_many videos, has_many users
Video      belongs_to publisher
User       belongs_to publisher 
```

我希望能够根据发布者向用户授予权限，但实际被编辑的对象是视频对象。

这意味着用户 X 可以编辑来自发布者 1 和 2 的视频，但用户 Y 只能编辑来自发布者 2 和 3 的视频，依此类推。我很确定这可以通过 CanCan、Devise、Rolify 组合来完成。

谁能在这里指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T15:56:31.603

回复较晚，抱歉。希望您现在已经解决了您的问题，但我会为您提供解决方案。

在你的 CanCan 能力中，你有这样的东西：

```
def initialize(current_user) 
  current_user ||= User.new

  can :update, Video do |video|
    current_user.publisher_list.contains? video.publisher
  end
end 
```

如果 user.publisher_list 返回用户可以修改的发布者列表，则上述代码将起作用。我相信你也可以这样做：

```
def initialize(current_user)
  current_user ||= User.new

  can :update, Video, publisher: {id: current_user.publisher_list}
end 
```

# php - str_replace() 有搜索限制？

> ID：11891052
> 
> 赞同：0
> 
> 时间：2012-08-09T19:59:57.950
> 
> 标签：php, str-replace

我有一个用于当前项目的模板系统。我使用 str_replace() 将 HTML 文档中的标记替换为动态数据。

例如，{%TEAM_NAME%} 将被替换为根据某些因素从表中提取的团队名称。

在一种情况下，令牌的数量（或搜索参数的字符串长度）似乎变得太长了，它不再被替换。

以下是显示我所指内容的片段：

```
$tokens = array('{%T_ID%}','{%NAV_BAR%}','{%TEAM_NAMES%}','{%CLUB_NAME%}','{%TEAM_NAME%}','{%STATE%}', '{%AGE_GROUP%}','{%LEVEL%}','{%CONTACT_NAME%}','{%CONTACT_ADDRESS%}','{%CONTACT_CITY%}','{%CONTACT_ZIP%}','{%CONTACT_EMAIL%}','{%CONTACT_PHONE_NUM%}','{%COACH_NAME%}','{%COACH_EMAIL%}','{%COACH_PHONE_NUM%}','{%SECRET_Q%}','{%SECRET_A%}','{%SO_CAL_ID%}','{%STATE_ID%}','{%NUM_PLAYERS%}','{%NOTES%}','{%SCORE_W%}','{%SCORE_L%}','{%SCORE_T%}','{%SCORE_GF%}','{%SCORE_GA%}','{%SCORE_GD%}','{%SCORE_POINTS%}');

    $replace = array(
        $tId => null,
        $navBar->Parse() => null,
        $teamNameOptions => null,
        _CLUB_NAME_ => _TEAM_TABLE_,
        _TEAM_NAME_ => _TEAM_TABLE_,
        _STATE_ => _TEAM_TABLE_,
        $ageOptions => null,
        $levelOptions => null,
        _CONTACT_NAME_ => _TEAM_TABLE_,
        _CONTACT_ADDRESS_ => _TEAM_TABLE_,
        _CITY_ => _TEAM_TABLE_,
        _ZIP_ => _TEAM_TABLE_,
        _CONTACT_EMAIL_ => _TEAM_TABLE_,
        _CONTACT_PHONE_NUM_ => _TEAM_TABLE_,
        _COACH_NAME_ => _TEAM_TABLE_,
        _COACH_EMAIL_ => _TEAM_TABLE_,
        _COACH_PHONE_NUM_ => _TEAM_TABLE_,
        _SECRET_Q_ => _TEAM_TABLE_,
        _SECRET_A_ => _TEAM_TABLE_,
        _SO_CAL_ID_ => _TEAM_TABLE_,
        _STATE_ID_ => _TEAM_TABLE_,
        _NUM_PLAYERS_ => _TEAM_TABLE_,
        _NOTES_ => _TEAM_TABLE_,
        _SCORE_W_ => _TEAM_TABLE_,
        _SCORE_L_ => _TEAM_TABLE_,
        _SCORE_T_ => _TEAM_TABLE_,
        _SCORE_GF_ => _TEAM_TABLE_,
        _SCORE_GA_ => _TEAM_TABLE_,
        _SCORE_POINTS_ => _TEAM_TABLE_
    ); 
```

进行一些广泛的白盒测试，值都在那里，但是最后一个标记和替换 {%SCORE_POINTS%} 没有被替换为应该是的数字，而是 null。

这：

```
<input type="text" name="fScorePoints" value="{%SCORE_POINTS%}"> 
```

应该变成：

```
<input type="text" name="fScorePoints" value="5"> 
```

但实际上变成了：

```
<input type="text" name="fScorePoints" value=""> 
```

我通过添加另一个令牌和替换进行了进一步测试，但也没有正确替换，导致我假设存在某种形式的字符限制？

我可以确认所有其他令牌和替换都可以正常工作，只是不是最后一个。

这是怎么回事？

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:09:51.063

从[str_replace() 的文档中](http://us.php.net/manual/en/function.str-replace.php)：

> 如果搜索和替换是数组，则 str_replace() 从每个数组中获取一个值并使用它们来搜索和替换主题。如果 replace 的值比 search 少，则将空字符串用于其余的替换值。

正如评论者指出的那样，您的重置价值比您拥有的主题少 1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:15:21.097

虽然其他人已经回答了您的问题，但我会指出，有一种更具可扩展性的方式来做您正在做的事情。通过使用回调函数，您可以替换语法的所有内容

```
{%VARIABLE_NAME%} 
```

使用数组 $array['VARIABLE_NAME']; 的项目

我可以把它复制出来，但我的网站上的功能已经有一段时间了。

[http://www.bumcheekcity.com/pages/112-php-code](http://www.bumcheekcity.com/pages/112-php-code)

它应该对您或其他有您想要替换这样的字符串的问题的人有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:20:50.690

您在替换中缺少“{%SCORE_GD%}”是导致问题的原因吗？

*编辑* 显然忘记在发布之前刷新页面是一件坏事，我迟到了！

# python - 如何使用数组输入调用 python scipy quad

> ID：11891057
> 
> 赞同：3
> 
> 时间：2012-08-09T20:00:06.487
> 
> 标签：python, numpy, scipy, integrate, quad

我正在使用嵌套的 scipy.integrate.quad 调用来集成二维被积函数。被积函数由 numpy 函数组成 - 因此将输入数组传递给它比循环输入并为每个输入调用一次要高效得多 - 由于 numpy 的数组，它的速度要快约 2 个数量级。

但是....如果我只想在一个维度上集成我的被积函数 - 但在另一个维度上使用一组输入，事情就会下降 - 似乎“scipy”quadpack包无法做任何事情numpy 确实处理数组输入。有没有其他人看到这个 - 或者找到了修复它的方法 - 或者我误解了它。我从 quad 得到的错误是：

```
Traceback (most recent call last):
  File "C:\Users\JP\Documents\Python\TestingQuad\TestingQuad_v2.py", line 159, in <module>
    fnIntegrate_x(0, 1, NCALLS_SET, True)
  File "C:\Users\JP\Documents\Python\TestingQuad\TestingQuad_v2.py", line 35, in fnIntegrate_x
    I = Integrate_x(yarray)
  File "C:\Users\JP\Documents\Python\TestingQuad\TestingQuad_v2.py", line 23, in Integrate_x
    return quad(Integrand, 0, np.pi/2, args=(y))[0]
  File "C:\Python27\lib\site-packages\scipy\integrate\quadpack.py", line 247, in quad
    retval = _quad(func,a,b,args,full_output,epsabs,epsrel,limit,points)
  File "C:\Python27\lib\site-packages\scipy\integrate\quadpack.py", line 312, in _quad
    return _quadpack._qagse(func,a,b,args,full_output,epsabs,epsrel,limit)
quadpack.error: Supplied function does not return a valid float. 
```

我在下面放了一个我正在尝试做的卡通版本 - 我实际上正在做的事情有一个更复杂的被积函数，但这是 gyst。

肉在顶部 - 底部正在做基准测试以表明我的观点。

```
import numpy as np
import time

from scipy.integrate import quad

def Integrand(x, y):
    '''
        Integrand
    '''
    return np.sin(x)*np.sin( y )

def Integrate_x(y):
    '''
        Integrate over x given (y)
    '''
    return quad(Integrand, 0, np.pi/2, args=(y))[0]

def fnIntegrate_x(ystart, yend, nsteps, ArrayInput = False):
    '''

    '''

    yarray = np.arange(ystart,yend, (yend - ystart)/float(nsteps))
    I = np.zeros(nsteps)
    if ArrayInput :
        I = Integrate_x(yarray)
    else :
        for i,y in enumerate(yarray) :

            I[i] = Integrate_x(y)

    return y, I

NCALLS_SET = 1000
NSETS = 10

SETS_t = np.zeros(NSETS)

for i in np.arange(NSETS) :

    XInputs = np.random.rand(NCALLS_SET, 2)

    t0 = time.time()
    for x in XInputs :
        Integrand(x[0], x[1])
    t1 = time.time()
    SETS_t[i] = (t1 - t0)/NCALLS_SET

print "Benchmarking Integrand - Single Values:"
print "NCALLS_SET: ", NCALLS_SET
print "NSETS: ", NSETS    
print "TimePerCall(s): ", np.mean(SETS_t) , np.std(SETS_t)/ np.sqrt(SETS_t.size)        
print "TotalTime: ",np.sum(SETS_t) * NCALLS_SET
'''
Benchmarking Integrand - Single Values:
NCALLS_SET:  1000
NSETS:  10
TimePerCall(s):  1.23999834061e-05 4.06987868647e-06
'''

NCALLS_SET = 1000
NSETS = 10

SETS_t = np.zeros(NSETS)

for i in np.arange(NSETS) :

    XInputs = np.random.rand(NCALLS_SET, 2)

    t0 = time.time()
    Integrand(XInputs[:,0], XInputs[:,1])
    t1 = time.time()
    SETS_t[i] = (t1 - t0)/NCALLS_SET

print "Benchmarking Integrand - Array Values:"
print "NCALLS_SET: ", NCALLS_SET
print "NSETS: ", NSETS    
print "TimePerCall(s): ", np.mean(SETS_t) , np.std(SETS_t)/ np.sqrt(SETS_t.size)        
print "TotalTime: ",np.sum(SETS_t) * NCALLS_SET
'''
Benchmarking Integrand - Array Values:
NCALLS_SET:  1000
NSETS:  10
TimePerCall(s):  2.00009346008e-07 1.26497018465e-07
'''

NCALLS_SET = 1000
NSETS = 100

SETS_t = np.zeros(NSETS)

for i in np.arange(NSETS) :

    t0 = time.time()
    fnIntegrate_x(0, 1, NCALLS_SET, False)
    t1 = time.time()
    SETS_t[i] = (t1 - t0)/NCALLS_SET

print "Benchmarking fnIntegrate_x - Single Values:"
print "NCALLS_SET: ", NCALLS_SET
print "NSETS: ", NSETS    
print "TimePerCall(s): ", np.mean(SETS_t) , np.std(SETS_t)/ np.sqrt(SETS_t.size)        
print "TotalTime: ",np.sum(SETS_t) * NCALLS_SET
'''
NCALLS_SET:  1000
NSETS:  100
TimePerCall(s):  0.000165750000477 8.61204306241e-07
TotalTime:  16.5750000477
'''

NCALLS_SET = 1000
NSETS = 100

SETS_t = np.zeros(NSETS)

for i in np.arange(NSETS) :

    t0 = time.time()
    fnIntegrate_x(0, 1, NCALLS_SET, True)
    t1 = time.time()
    SETS_t[i] = (t1 - t0)/NCALLS_SET

print "Benchmarking fnIntegrate_x - Array Values:"
print "NCALLS_SET: ", NCALLS_SET
print "NSETS: ", NSETS    
print "TimePerCall(s): ", np.mean(SETS_t) , np.std(SETS_t)/ np.sqrt(SETS_t.size)        

'''
****  Doesn't  work!!!! *****
Traceback (most recent call last):
  File "C:\Users\JP\Documents\Python\TestingQuad\TestingQuad_v2.py", line 159, in <module>
    fnIntegrate_x(0, 1, NCALLS_SET, True)
  File "C:\Users\JP\Documents\Python\TestingQuad\TestingQuad_v2.py", line 35, in fnIntegrate_x
    I = Integrate_x(yarray)
  File "C:\Users\JP\Documents\Python\TestingQuad\TestingQuad_v2.py", line 23, in Integrate_x
    return quad(Integrand, 0, np.pi/2, args=(y))[0]
  File "C:\Python27\lib\site-packages\scipy\integrate\quadpack.py", line 247, in quad
    retval = _quad(func,a,b,args,full_output,epsabs,epsrel,limit,points)
  File "C:\Python27\lib\site-packages\scipy\integrate\quadpack.py", line 312, in _quad
    return _quadpack._qagse(func,a,b,args,full_output,epsabs,epsrel,limit)
quadpack.error: Supplied function does not return a valid float.

''' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-03T18:02:54.440

恐怕我在这里用否定回答我自己的问题。我不认为这是可能的。似乎quad是用其他东西编写的库的某种端口-因此，内部的库定义了事情的完成方式-因此，如果不重新设计库本身，就不可能做我想做的事情。

对于其他在多 D 集成上有时间问题的人，我发现最好的方法是使用专用的集成库。我发现“古巴”似乎有一些非常有效的多 D 集成例程。

[http://www.feynarts.de/cuba/](http://www.feynarts.de/cuba/)

这些例程是用 c 编写的，所以我最终使用 SWIG 与它们交谈 - 最终也为了提高效率，我用 c 重新编写了我的被积函数 - 这加快了加载速度......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-27T19:48:32.123

可以通过 numpy.vectorize 函数实现。我有这个问题很长一段时间，然后想出了这个矢量化功能。

你可以像这样使用它：

```
vectorized_function = numpy.vectorize(your_function)

output = vectorized_function(your_array_input) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-12T15:46:21.640

使用[quadpy](https://github.com/nschloe/quadpy)（我的一个项目）。它是完全矢量化的，因此可以处理任何形状的数组值函数，而且速度非常快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-08T01:14:33.183

在所有维度上集成从 -np.inf 到 np.inf 的概率密度函数时，我遇到了这个问题。

我通过创建一个接收 *args 的包装函数、将 args 转换为 numpy 数组并集成包装函数来修复它。

我认为使用 numpy 的向量化只整合所有值都相等的子空间。

这是一个例子：

```
from scipy.integrate import nquad
from scipy.stats import multivariate_normal

mean = [0., 0.]
cov = np.array([[1., 0.],
                [0., 1.]])

bivariate_normal = multivariate_normal(mean=mean, cov=cov)

def pdf(*args):
    x = np.array(args)
    return bivariate_normal.pdf(x)

integration_range = [[-18, 18], [-18, 18]]

nquad(pdf, integration_range)

Output: (1.000000000000001, 1.3429066352690133e-08) 
```

# java - org.hibernate.HibernateException：无法实例化结果类

> ID：11891063
> 
> 赞同：19
> 
> 时间：2012-08-09T20:00:18.607
> 
> 标签：java, spring, hibernate

完整的堆栈跟踪：

```
org.hibernate.HibernateException: Could not instantiate resultclass: com.firstbankpr.lmu.data.dto.EmployeeScore
at org.hibernate.transform.AliasToBeanResultTransformer.transformTuple(AliasToBeanResultTransformer.java:99)
at org.hibernate.hql.HolderInstantiator.instantiate(HolderInstantiator.java:96)
at org.hibernate.loader.custom.CustomLoader.getResultList(CustomLoader.java:361)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
at org.hibernate.loader.Loader.list(Loader.java:2271)
at org.hibernate.loader.custom.CustomLoader.list(CustomLoader.java:316)
at org.hibernate.impl.SessionImpl.listCustomQuery(SessionImpl.java:1842)
at org.hibernate.impl.AbstractSessionImpl.list(AbstractSessionImpl.java:165)
at org.hibernate.impl.SQLQueryImpl.list(SQLQueryImpl.java:157)
at com.nimchip.lmu.data.dao.hibernate.WinnerHibernateDAO.findEmployeeTotals(WinnerHibernateDAO.java:155)
at com.nimchip.lmu.data.dao.WinnerDAOTest.testEmpScore(WinnerDAOTest.java:159)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:71)
at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:199)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

第 11 行指向此查询的最后一行：

```
 Query query = currentSession().createSQLQuery(
            "select n.EMP_ID as id, SUM(DISTINCT(nom.TOTAL_POINT)) as score from" +
                    " NOMINEE n join NOMINATION nom on nom.NOM_ID = n.NOM_ID" +
                    " join EMPLOYEE e on n.EMP_ID = e.EMP_ID" +
                    " join COMPANY c on c.COMPANY_CODE = e.COMPANY_CODE" +
                    " join REGION r on r.REGION_ID = c.REGION_ID" +
                    " where nom.PERIOD_ID = :periodId" +
                    " AND nom.STATUS_ID = 2" +
                    " AND e.ISACTIVE = 1" +
                    " AND nom.CATEGORY_CODE != 'H'" +
                    " AND r.REGION_ID = :regionId" +
                    " group by n.EMP_ID")
            .addScalar("id")
            .addScalar("score")
            .setParameter("regionId", regionId)
            .setParameter("periodId", periodId)
            .setResultTransformer(Transformers.aliasToBean(EmployeeScore.class)); 
```

这是 EmployeeScore.class：

```
public class EmployeeScore {

    private int id;
    private int score;

    EmployeeScore(){}

    public EmployeeScore(int id, int score) {
        this.id = id;
        this.score = score;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public int getScore() {
        return score;
    }

    public void setScore(int score) {
        this.score = score;
    }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;
        if (o == null || getClass() != o.getClass()) return false;

        EmployeeScore that = (EmployeeScore) o;

        if (id != that.id) return false;
        if (score != that.score) return false;

        return true;
    }

    @Override
    public int hashCode() {
        int result = id;
        result = 31 * result + score;
        return result;
    }
} 
```

构造函数在，为什么它不起作用？注意：我也在使用 Spring，这是一个 DTO bean。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-08-09T20:03:42.320

的无参数构造函数`EmployeeScore`应该是公共的：

```
public EmployeeScore(){} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-11-06T17:14:11.630

您可能会收到此错误的另一个原因是因为它是您尝试转换的内部类，代码可以编译，但您会收到同样的错误。

# php - 将 & 变成 amp 用于将 URL 导入数据库

> ID：11891064
> 
> 赞同：0
> 
> 时间：2012-08-09T20:00:21.563
> 
> 标签：php

我从 XML 提要导入一些 URL。

```
$myurl = 'http://www.myurl.com?value1=val&value2=val&value3=val 
```

问题是当我尝试验证我的代码时，我需要`&amp`而不是`&`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:02:19.693

当您`&amp;`将文本插入 HTML 或 XML 文档时需要，而不是当它靠近数据库时。

如果您正在生成 HTML，则将您的文本通过`htmlspecialchars()`以将其转换为 HTML。

如果要生成 XML，则使用 XML 库来生成它。不要通过将字符串混合在一起来构建它。

# html - 带有固定标题的 CSS-Only 可滚动表

> ID：11891065
> 
> 赞同：73
> 
> 时间：2012-08-09T20:00:24.683
> 
> 标签：html, internet-explorer, css

我有一个解决方案，通过它我可以使用次要的 jQuery 和 CSS 创建带有固定页眉/页脚的可滚动表格 - 但我正在寻找一种方法来使其成为跨浏览器兼容的纯 CSS 解决方案。

需要明确的是，我要做的是**只**使用一个`table`标签（它是有效的子标签，`colgroup`, `col`, `thead`, `tbody`, `tfoot`, `tr`, `th`, `td`），但采用一组符合以下条件的 CSS 规则：

1.  必须保持页眉/页脚/内容行之间的列对齐
2.  必须允许页眉/页脚在内容垂直滚动时保持固定
3.  必须不需要任何 jQuery 或其他 JavaScript 才能提供功能
4.  只能使用上面提供的标签

此代码示例： http: [//jsfiddle.net/TroyAlford/SNKfd/](http://jsfiddle.net/TroyAlford/SNKfd/)显示了我当前的方法。大多数 JS 只是用随机值填充表格，但最后一部分是驱动左/右滚动性的原因。

```
$tbody.bind('scroll', function(ev) {
    var $css = { 'left': -ev.target.scrollLeft };
    $thead.css($css);
    $tfoot.css($css);
}); 
```

注意：提供的示例在 IE 中无法正确呈现，需要 jQuery 来提供水平滚动。无论如何我都不关心水平滚动，所以如果解决方案不这样做也没关系。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2018-09-21T13:13:25.090

*此答案将用作不完全支持的占位符，`position: sticky`并将随着时间的推移而更新。目前建议不要在生产环境中使用本机实现。*

查看当前支持：[https ://caniuse.com/#feat=css-sticky](https://caniuse.com/#feat=css-sticky)

* * *

### 用于`position: sticky`

另一种答案是使用`position: sticky`. [如 W3C 所述](https://www.w3.org/TR/css-position-3/#sticky-pos)：

> 粘性定位框的定位类似于相对定位的框，但偏移量是参考最近的带有滚动框的祖先计算的，或者如果没有祖先有滚动框，则参考视口。

这准确描述了相对静态标头的行为。`<thead>`将它分配给第一个或第一个HTML 标记很容易，因为[根据 W3C](https://www.w3.org/TR/css-position-3/#valdef-position-sticky)`<tr>`应该支持它。但是，[Chrome](https://bugs.chromium.org/p/chromium/issues/detail?id=702927)、[IE 和 Edge](https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/16765952/)都存在为这些标签分配粘性位置属性的问题。目前似乎也没有优先解决这个问题。

似乎对表格元素有效的是将粘性属性分配给表格单元格。在这种情况下，`<th>`细胞。

因为一个表不是一个尊重你分配给它的静态大小的块元素，所以最好使用一个*包装器元素*来定义滚动溢出。

### 编码

```
div {
  display: inline-block;
  height: 150px;
  overflow: auto
}

table th {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
}

/* == Just general styling, not relevant :) == */

table {
  border-collapse: collapse;
}

th {
  background-color: #1976D2;
  color: #fff;
}

th,
td {
  padding: 1em .5em;
}

table tr {
  color: #212121;
}

table tr:nth-child(odd) {
  background-color: #BBDEFB;
}
```

```
<div>
  <table border="0">
    <thead>
      <tr>
        <th>head1</th>
        <th>head2</th>
        <th>head3</th>
        <th>head4</th>
      </tr>
    </thead>
    <tr>
      <td>row 1, cell 1</td>
      <td>row 1, cell 2</td>
      <td>row 1, cell 2</td>
      <td>row 1, cell 2</td>
    </tr>
    <tr>
      <td>row 2, cell 1</td>
      <td>row 2, cell 2</td>
      <td>row 1, cell 2</td>
      <td>row 1, cell 2</td>
    </tr>
    <tr>
      <td>row 2, cell 1</td>
      <td>row 2, cell 2</td>
      <td>row 1, cell 2</td>
      <td>row 1, cell 2</td>
    </tr>
    <tr>
      <td>row 2, cell 1</td>
      <td>row 2, cell 2</td>
      <td>row 1, cell 2</td>
      <td>row 1, cell 2</td>
    </tr>
    <tr>
      <td>row 2, cell 1</td>
      <td>row 2, cell 2</td>
      <td>row 1, cell 2</td>
      <td>row 1, cell 2</td>
    </tr>
  </table>
</div>
```

在此示例中，我使用一个简单的`<div>`包装器来定义使用静态高度`150px`. 这当然可以是任何大小。现在已经定义了滚动框，粘性`<th>`元素将对应“到最近的带有滚动框的祖先”，即 div-wrapper。

* * *

### 使用`position: sticky` *polyfill*

不受支持的设备可以使用 polyfill，它通过代码实现行为。一个例子是[stickybits](https://github.com/yowainwright/stickybits)，它与浏览器实现的行为相似`position: sticky`。

**polyfill 示例：http:** [//jsfiddle.net/7UZA4/6957/](http://jsfiddle.net/7UZA4/6957/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-08-03T22:31:33.447

惊讶于尚未发布使用 flexbox 的解决方案。

这是我的解决方案使用`display: flex`和基本使用`:after`（感谢[Luggage](https://stackoverflow.com/users/956900/luggage)）以保持对齐，即使滚动条填充`tbody`了一点。这已在**Chrome 45、Firefox 39 和 MS Edge**中得到验证。可以使用前缀属性对其进行修改以在 IE11 中工作，并进一步在 IE10 中使用[CSS hack](https://stackoverflow.com/questions/24320966/how-to-add-css-hack-specifically-for-ie10)和[2012 flexbox 语法](http://www.w3.org/TR/2012/WD-css3-flexbox-20120322/)。

注意表格宽度可以修改；这甚至适用于`100%`宽度。

唯一需要注意的是所有表格单元格必须具有相同的宽度。下面是一个明显人为设计的例子，但是当单元格内容不同时这很好用（表格单元格都具有相同的宽度和自动换行，强制 flexbox 保持它们相同的宽度而不管内容）。[这](https://jsfiddle.net/purmou/npdob14y/4/)是一个单元格内容不同的示例。

只需将该`.scroll`类应用于您想要可滚动的表，并确保它具有`thead`：

```
.scroll {
  border: 0;
  border-collapse: collapse;
}

.scroll tr {
  display: flex;
}

.scroll td {
  padding: 3px;
  flex: 1 auto;
  border: 1px solid #aaa;
  width: 1px;
  word-wrap: break-word;
}

.scroll thead tr:after {
  content: '';
  overflow-y: scroll;
  visibility: hidden;
  height: 0;
}

.scroll thead th {
  flex: 1 auto;
  display: block;
  border: 1px solid #000;
}

.scroll tbody {
  display: block;
  width: 100%;
  overflow-y: auto;
  height: 200px;
}
```

```
<table class="scroll" width="400px">
  <thead>
    <tr>
      <th>Header</th>
      <th>Header</th>
      <th>Header</th>
      <th>Header</th>
      <th>Header</th>
      <th>Header</th>
    </tr>
  </thead>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
    <td>Data</td>
  </tr>
</table>
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-28T14:18:33.350

受@Purag 回答的启发，这里有另一个 flexbox 解决方案：

```
/* basic settings */
table { display: flex; flex-direction: column; width: 200px; }
tr { display: flex; }
th:nth-child(1), td:nth-child(1) { flex-basis: 35%; }
th:nth-child(2), td:nth-child(2) { flex-basis: 65%; }
thead, tbody { overflow-y: scroll; }
tbody { height: 100px; }

/* color settings*/
table, th, td { border: 1px solid black; }
tr:nth-child(odd) { background: #EEE; }
tr:nth-child(even) { background: #AAA; }
thead tr:first-child { background: #333; }
th:first-child, td:first-child { background: rgba(200,200,0,0.7); }
th:last-child, td:last-child { background: rgba(255,200,0,0.7); }
```

```
<table>
    <thead>
      <tr>
        <th>a
        <th>bbbb
    <tbody>
      <tr>
        <td>fooo vsync dynamic
        <td>bar
      <tr>
        <td>a
        <td>b
      <tr>
        <td>a
        <td>b
      <tr>
        <td>a
        <td>b
      <tr>
        <td>a
        <td>b
      <tr>
        <td>a
        <td>b
      <tr>
        <td>a
        <td>b
  </table>
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-23T21:11:13.843

据我所知，没有标准的方法可以仅使用 CSS 来实现这一点，尽管我认为应该有。Mozilla 浏览器曾经支持带有滚动正文的固定标题，但在过去几年中他们已将其删除。

经过一番研究，包括找到这个帖子，一位朋友刚刚为我开发了[这个解决方案](http://nevcal.com/eclectic/UltimateScrollingTable.html)；它使用 Javascript 但没有罐装库，并且 HTML 标记的唯一要求是表有一个 id 名称。然后，在 window.onload 中，为每个表调用一个 Javascript 函数，并给出 id、高度和宽度。如果浏览器禁用了 Javascript，则整个表格将根据其原始标记显示。如果启用了 Javascript，则表格适合指定的高度和宽度，并且 tbody 滚动，如果存在 thead 和 tfoot，则它们固定在顶部和底部。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-04-20T20:25:01.883

我使用以下代码轻松实现了这一点：

所以你有一个这样的结构：

```
<table>
<thead><tr></tr></thead>
<tbody><tr></tr></tbody>
</table> 
```

只需使用以下样式设置标题：

```
<style>
thead{ 
    position: -webkit-sticky;
    position: -moz-sticky;
    position: -ms-sticky;
    position: -o-sticky;
    position: sticky;
    top: 0px;
}
</style> 
```

***需要考虑的三件事：***

首先，这个属性是新的。除了基于 Webkit 的浏览器的 beta 版本之外，它根本不受支持。所以警告格式器。同样，如果您真的希望您的用户从粘性标题中受益，请使用 javascript 实现。

其次，如果您确实使用它，则需要合并供应商前缀。也许位置：sticky 有一天会起作用。不过，现在，您需要使用 position:-webkit-sticky （以及其他；在这篇文章中进一步检查 css 块）。

第三，目前没有任何定位默认值，因此您至少需要包含 top: 0; 在与位置相同的 css 声明中：-webkit-sticky。否则，它只会滚动到屏幕外。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-08-11T03:47:12.617

如果您可以选择为表格单元格提供固定宽度（并为标题提供固定高度），则可以使用以下`position: fixed`选项：

[http://jsfiddle.net/thundercracker/ZxPeh/23/](http://jsfiddle.net/thundercracker/ZxPeh/23/)

您只需将其粘贴在`iframe`. 您也可以通过提供滚动条来进行水平滚动`iframe`（我认为）。

* * *

**编辑 2015**

如果您可以预先定义表格单元格的宽度（按百分比），那么这里有一个更优雅（仅限 CSS）的解决方案：

[http://jsfiddle.net/7UBMD/77/](http://jsfiddle.net/7UBMD/77/)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-03-30T07:42:52.410

仅使用 CSS ：

**CSS**：

```
tr {
  width: 100%;
  display: inline-table;
  table-layout: fixed;
}

table{
 height:300px;              // <-- Select the height of the table
 display: -moz-groupbox;    // Firefox Bad Effect
}
tbody{
  overflow-y: scroll;      
  height: 200px;            //  <-- Select the height of the body
  width: 100%;
  position: absolute;
} 
```

**引导层**：http : [//www.bootply.com/AgI8LpDugl](http://www.bootply.com/AgI8LpDugl)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-06-27T13:11:42.753

我看到这个线程已经有一段时间没有活动了，但是这个话题让我很感兴趣，现在有了一些 CSS3 选择器，这变得更容易了（而且只用 CSS 就很可行）。

此解决方案依赖于表格容器的最大高度。但只要你能使用`:first-child`选择器就支持它。

[在这里](http://jsfiddle.net/7UBMD/1/)拉小提琴。

如果有人可以改进这个答案，请做！我计划很快在商业应用程序中使用这个解决方案！

**HTML**

```
<div id="con">
<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>        
    <tbody>             
    </tbody>
</table>
</div> 
```

**CSS**

```
#con{
    max-height:300px;
    overflow-y:auto;
}
thead tr:first-child {
    background-color:#00f;
    color:#fff;
    position:absolute;
}
tbody tr:first-child td{
    padding-top:28px;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-07-03T08:28:45.600

我遇到了同样的问题，经过 2 天的研究后，我发现 Ksesocss 的这个解决方案适合我，也许对你也有好处。它允许固定标题和动态宽度，并且只使用 CSS。唯一的问题是源代码是西班牙语，但您可以在那里找到 html 和 css 代码。

这是链接：

[http://ksesocss.blogspot.com/2014/10/responsive-table-encabezado-fijo-scroll.html](http://ksesocss.blogspot.com/2014/10/responsive-table-encabezado-fijo-scroll.html)

我希望这有帮助

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-12-08T21:37:57.443

如果在所有提到的解决方案都不起作用的情况下（对我来说），它变得很困难，请尝试一个两表解决方案，正如我在这个答案中解释的那样

[https://stackoverflow.com/a/47722456/6488361](https://stackoverflow.com/a/47722456/6488361)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-27T15:30:10.410

由于我最近需要这个，我将分享一个使用 3 个表但不需要 JavaScript 的解决方案。

表 1（父）包含两行。第一行包含列标题的表 2（子 1）。第二行包含滚动内容的表 3（子 2）。

必须注意，滚动条`childTbl`必须`25px`比`parentTbl`滚动条正确显示的短。

[这](http://www.scientificpsychic.com/blogentries/html-and-css-scrolling-table-with-fixed-heading.html)是我的想法的来源。我在没有弃用标签和内联 CSS 的情况下使它对 HTML5 友好。

```
.parentTbl table {
  border-spacing: 0;
  border-collapse: collapse;
  border: 0;
  width: 690px;
}
.childTbl table {
  border-spacing: 0;
  border-collapse: collapse;
  border: 1px solid #d7d7d7;
  width: 665px;
}
.childTbl th,
.childTbl td {
  border: 1px solid #d7d7d7;
}
.scrollData {
  width: 690;
  height: 150px;
  overflow-x: hidden;
}
```

```
<div class="parentTbl">
  <table>
    <tr>
      <td>
        <div class="childTbl">
          <table class="childTbl">
            <tr>
              <th>Header 1</th>
              <th>Header 2</th>
              <th>Header 3</th>
              <th>Header 4</th>
              <th>Header 5</th>
              <th>Header 6</th>
            </tr>
          </table>
        </div>
      </td>
    </tr>
    <tr>
      <td>
        <div class="scrollData childTbl">
          <table>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
            <tr>
              <td>Table Data 1</td>
              <td>Table Data 2</td>
              <td>Table Data 3</td>
              <td>Table Data 4</td>
              <td>Table Data 5</td>
              <td>Table Data 6</td>
            </tr>
          </table>
        </div>
      </td>
    </tr>
  </table>
</div>
```

这在不同的浏览器上是可靠的，缺点是必须对表格宽度进行硬编码。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-04T18:07:33.870

我最近试图自己解决这个问题，我想出了一个很好的解决方案，可以在我的浏览器（Chrome 51）中完美运行并**支持动态列宽**。我应该提到，在我独立得出我的答案后，我还发现了网络上其他地方描述的类似技术......

**诀窍是使用两个相同的桌子，它们相互叠放。**下表是可见的，而上表是不可见的，除了标题。上表也`pointer-events: none`设置在 tbody 上，因此鼠标交互会击中下表。这样下层表格在上层表格的标题下滚动。

为了正确布局和调整大小（例如当用户调整屏幕宽度时），两个表需要具有相同的滚动条行为。但是，上表的滚动条会被忽略，这要归功于`pointer-events: none`并且可以通过以下方式使其不可见：

```
<style>
    .hiddenScrollbar::-webkit-scrollbar {
        background-color: transparent;
    }
</style> 
```

这是完整的代码：

```
<html>

<head>
  <style>
    td {
      border: 1px solid black; 
      white-space: nowrap;
    }
    th {
      background-color: gray;
      border: 1px solid black;
      white-space: nowrap;
    }
    .hiddenScrollbar::-webkit-scrollbar {
      background-color: transparent;
    }
  </style>
</head>

<body>
  Table test. Use mouse wheel to scroll or scroll to the right to see vertical scroll bar. You can also remove the outermost div if you don't want a horizontal scroll bar.
  <br/>
  <div style="display: inline-block; height: 10em; width: 15em; overflow-x: scroll; overflow-y: hidden">
    <div style="position: relative;">
      <div style="display: inline-block; position: absolute; left: 0px; top: 0px; height: 10em; overflow-y: scroll">
        <table style="border-collapse: collapse;">
          <thead>
            <tr>
              <th>Column 1</th>
              <th>Another Column</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Data 1</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 2</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 3</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 4</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 5</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 6</td>
              <td>12340921375021342354235 very long...</td>
            </tr>
            <tr>
              <td>Data 7</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 8</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 9</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 10</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 11</td>
              <td>123409213750213</td>
            </tr>
            <tr>
              <td>Data 12</td>
              <td>123409213750213</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="hiddenScrollbar" style="display: inline-block; pointer-events: none; position: relative; left: 0px; top: 0px; height: 10em; overflow-y: scroll">
        <table style="border-collapse: collapse;">
          <thead style="pointer-events: auto">
            <tr>
              <th>Column 1</th>
              <th>Another Column</th>
            </tr>
          </thead>
          <tbody style="visibility: hidden">
            <tr>
              <tr>
                <td>Data 1</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 2</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 3</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 4</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 5</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 6</td>
                <td>12340921375021342354235 very long...</td>
              </tr>
              <tr>
                <td>Data 7</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 8</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 9</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 10</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 11</td>
                <td>123409213750213</td>
              </tr>
              <tr>
                <td>Data 12</td>
                <td>123409213750213</td>
              </tr>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div><br/>
Stuff after table.
</body>

</html>
```

注意事项：需要更多的工作来证明这在其他浏览器中有效。此外，我在混合内联和样式表样式方面相当自由。但是我相信一般概念是这样做的最佳方式，因为如果目标浏览器支持它。**唯一的功能/显示问题是，如果您想要一个水平滚动条，垂直滚动条可以滚动到视图之外**（如代码片段所示）。不过，您仍然可以使用鼠标滚轮滚动。**此外，标题上不能有透明背景**（否则下面的表格会显示出来）。最后，您需要一种方法来生成两个相同的表。就我个人而言，我正在使用 react.js，使用 react 很容易做到这一点，但 php 或其他服务器端生成或 javascript 也可以。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-24T23:41:19.003

另一种实现，但没有任何溢出`tbody`和动态列。虽然需要 JavaScript。容器`div`用于容纳列标题。当表格滚动通过视口时，顶部会出现一个固定的标题。如果表格水平滚动，则固定标题也会滚动。

列标题是使用`span`元素创建`display: inline-block`的，负边距用于水平滚动标题。还优化使用`RequestAnimationFrame`以避免任何卡顿。

```
function rAF(scrollLeft) {
  var offsetLeft = 0 - scrollLeft;
  $('.hdr__inner span:first-child').css('margin-left', offsetLeft);
} 
```

[https://codepen.io/lloydleo/pen/NRpqEE](https://codepen.io/lloydleo/pen/NRpqEE)

# ember.js - Ember.js toArray 方法预期结果

> ID：11891066
> 
> 赞同：0
> 
> 时间：2012-08-09T20:00:25.167
> 
> 标签：ember.js

我一直在试图弄清楚如何到达一个基本的 js 数组，以便我可以遍历它 [http://emberjs.com/documentation/#toc_the-enumerable-interface](http://emberjs.com/documentation/#toc_the-enumerable-interface)

> 这个很简单。要将 Enumerable 转换为 Array，只需调用其 toArray 方法即可。

现在，当我使用 1.pre 和 0.9.8.1 运行以下测试时，结果不是我所期望的。

```
> var msp = ["1","2","3"]

> msp
["1", "2", "3"]
> for (mp_c in msp) console.log(mp_c);
0
1
2
isEnumerable
nextObject

> for (mp_c in msp.toArray()) console.log(mp_c);
0
1
2
isEnumerable
nextObject 
```

我希望它返回一个香草数组，没有任何 ember 属性。 [https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/enumerable.js#L554](https://github.com/emberjs/ember.js/blob/master/packages/ember-runtime/lib/mixins/enumerable.js#L554)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:09:19.597

Ember 实际上将方法应用于 Array.prototype；这意味着这些方法将在站点上的每个数组上（数组对象类实际上已更改，它们不会更改每个实例）。

这实际上发生在很多 javascript 库中，因此最好迭代长度（最好我的意思是，使用 ember 之类的库最不脆弱）。

```
for(var mp_c, i=0, j=msp.length; i<j; i++){
    mp_c = msp[i];
} 
```

编辑：ij

# spring - 我如何配置 spring 2.5.6 + eclipseLink + weblogic 10.3

> ID：11891067
> 
> 赞同：0
> 
> 时间：2012-08-09T20:00:25.317
> 
> 标签：spring, persistence, eclipselink, weblogic-10.x

```
 <bean id="configProperties" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="placeholderPrefix" value="${" />
    <property name="placeholderSuffix" value="}" />
    <property name="locations">
        <value>classpath:ddes/config.properties</value>
    </property>
</bean>

<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName" value="${datasource}"/>
    <property name="resourceRef" value="true"/>
</bean>

<context:load-time-weaver weaver-class="org.springframework.instrument.classloading.weblogic.WebLogicLoadTimeWeaver"/>

<bean id="PersistenceUnit" class="org.springframework.orm.jpa.persistenceunit.DefaultPersistenceUnitManager">
    <property name="defaultDataSource" ref="dataSource"/>
    <property name="class">
    <!--LIST BEANS-->
        <value>....</value>
    </property>
</bean>

<bean id="jpaVendorAdapter" class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
    <property name="databasePlatform" value="org.eclipse.persistence.platform.database.OraclePlatform"/>
    <property name="generateDdl" value="true"/>
    <property name="showSql" value="true"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="jpaVendorAdapter" ref="jpaVendorAdapter"/>
    <property name="persistenceUnitManager" ref="PersistenceUnit"/>
    <property name="persistenceUnitName" ref="Persistence-ejbPU"/>
    <property name="persistenceProvider" ref="org.eclipse.persistence.jpa.PersistenceProvider"/>
</bean>

<bean id="transactionManager" class="org.springframework.transaction.jta.JtaTransactionManager">
    <property name="transactionManager" ref="entityManagerFactory"/>
</bean> 
```

实施

```
@CallByReference
@Stateless(mappedName = "cliente") 
public class ClienteDAOBean implements ClienteDAOLocal, ClienteDAORemote {

    @PersistenceUnit(unitName = "Persistence-ejbPU")
    private EntityManagerFactory emf;

    public Clientes find(Integer codCliente) throws Exception {
        Clientes cliente = null;
        EntityManager em = emf.createEntityManager();
        try {
            javax.persistence.Query q = em.createNamedQuery("Clientes.findByCodCliente").setParameter("codCliente", codCliente);
            cliente = (Clientes) q.getSingleResult();
        } catch (Exception e) {
            throw e;
        } finally {
            em.close();
            return cliente;
        }
    }
} 
```

Pero al iniciar la aplicación el log arroja este 错误：

**Persistence-ejbPU.jar 范围内没有名为“Persistence-ejbPU”的持久性单元**

以前使用 persistence.xml 文件，但需要动态的数据源名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:33:17.310

只需将 ref 替换为 value。利用：

```
 <property name="persistenceUnitName" value="Persistence-ejbPU" /> 
```

代替：

```
<property name="persistenceUnitName" ref="Persistence-ejbPU"/> 
```

如果您仍然有问题，那么我将实现我自己的*LocalContainerEntityManagerFactoryBean*类，该类从[AbstractEntityManagerFactoryBean](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/orm/jpa/AbstractEntityManagerFactoryBean.html)扩展，因此您可以覆盖**setPersistenceUnitName**然后看看发生了什么。

# jquery - 防止默认 Jquery

> ID：11891073
> 
> 赞同：0
> 
> 时间：2012-08-09T20:00:55.233
> 
> 标签：jquery

我试图阻止在表单标签内的输入字段上按下输入按钮以提交和刷新页面。相反，我想加载一个 AJAX 文件。现在我知道如果我摆脱了表单标签，那么这将起作用，我什至不需要`e.preventDefault();`标签。我在这里想念什么？代码如下。

```
$('#input_field').bind('keyup', function(e) {
    if(e.keyCode==13){
        e.preventDefault();
            $('#insert_ajax_file').load('load_file.php');
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:02:49.683

将其更改为`e.preventDefault`当您将事件对象作为`e`参数传递时。

见下文，

```
$('#input_field').bind('keyup', function(e) {
   if(e.keyCode==13){
      e.preventDefault(); //<== Changed to e
        $('#insert_ajax_file').load('load_file.php');
   }
   //..
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:11:19.813

keyup 事件在默认事件之后触发。使用 keydown

```
$('#input_field').bind('keydown', function(e) {
    if(e.keyCode==13){
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:08:01.880

绑定到 'click' 事件而不是 'keyup'：

```
$('#input_field').bind('click', function(e) {
    e.preventDefault();
    // do whatever you want here
}); 
```

[http://jsfiddle.net/rzkaN/](http://jsfiddle.net/rzkaN/)

**编辑**：对不起，误读了你的问题。

使用`keypress`而不是`keyup`那时。 [http://jsfiddle.net/rzkaN/1/](http://jsfiddle.net/rzkaN/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:04:11.020

你在你的函数中传递了一个“e”，但是在“事件”上做一个 preventDefault

在职的：

```
$('#input_field').bind('keyup', function(e) {
  if(e.keyCode==13){
    e.preventDefault();
    $('#insert_ajax_file').load('load_file.php');
  }
}); 
```

# iphone - 如何使用两个后续的 MBProgressHUD 消息

> ID：11891080
> 
> 赞同：2
> 
> 时间：2012-08-09T20:01:10.880
> 
> 标签：iphone, mbprogresshud

我想在通过 NSURL 字符串上传期间使用 MBProgressHUD 显示一条消息。所以我编码：

```
MBProgressHUD *hud1 = [MBProgressHUD showHUDAddedTo:self.view animated:YES]; 
hud1.labelText = @"sending info ..."; 
hud1.minShowTime =10.0;

NSURL *url =[NSURL URLWithString:self.urlToUpload]; 
```

10 秒时间是为了等待一段时间，我希望用户等待。它有效，但是当第一个消失时我会显示另一条消息。使用另一个：

```
MBProgressHUD *hud2 = [MBProgressHUD showHUDAddedTo:self.view animated:YES]; 
hud2.labelText = @"SENT!"; 
hud2.minShowTime =2.0; 
```

它没有用，因为此消息与第一个消息重叠。有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T21:01:57.310

我会删除您`-connectionDidFinishLoading`方法中的第一个 HUD，或者在您收到字符串已成功上传的通知的任何地方。

```
[MBProgressHUD hideHUDForView:self.view animated:YES]; 
```

然后您可以添加下一个 HUD 1-2 秒。仅通过特定时间添加它，无法在下一个显示之前准确删除第一个 HUD。

这取自[MBProgressHUD](https://github.com/jdg/MBProgressHUD)演示项目。我会用它来显示你的定时完成 HUD。

```
HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
[self.navigationController.view addSubview:HUD];

// The sample image is based on the work by http://www.pixelpressicons.com, http://creativecommons.org/licenses/by/2.5/ca/
// Make the customViews 37 by 37 pixels for best results (those are the bounds of the build-in progress indicators)
HUD.customView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]] autorelease];

// Set custom view mode
HUD.mode = MBProgressHUDModeCustomView;

HUD.delegate = self;
HUD.labelText = @"Completed";

[HUD show:YES];
[HUD hide:YES afterDelay:3]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-11T03:10:09.047

```
+(void)toast:(NSString*) str view:(UIView*)view delegate:(id)delegate  type:(IconType)type{

    [MBProgressHUD hideHUDForView:view animated:YES];

    MBProgressHUD * HUD = [[MBProgressHUD alloc] initWithView:view];
    [view addSubview:HUD];

    NSString* strImage;
    switch (type) {
        case kNone:
            strImage=nil;
            break;
        case kOK:
            strImage=@"37x-Checkmark.png";//NSString stringWithFormat:@"%@",
            break;
        case kError:
            strImage=@"ic_cancel_white_24dp.png";//NSString stringWithFormat:@"%@",
            break;
        default:
            break;
    }

    HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:strImage] ];

    // Set custom view mode
    HUD.mode = MBProgressHUDModeCustomView;

    HUD.delegate = delegate;
    HUD.labelText = str;
    HUD.userInteractionEnabled = NO;

    [HUD show:YES];
    [HUD hide:YES afterDelay:1.5f];
} 
```

# c# - 如何将网站内容下载到字符串？

> ID：11891082
> 
> 赞同：3
> 
> 时间：2012-08-09T20:01:14.313
> 
> 标签：c#

我试过了，我希望将网站的源内容下载到一个字符串：

```
public partial class Form1 : Form
    {
        WebClient client;
        string url;
        string[] Search(string SearchParameter);

        public Form1()
        {
            InitializeComponent();

            url = "http://chatroll.com/rotternet";
            client = new WebClient();

            webBrowser1.Navigate("http://chatroll.com/rotternet");
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        static void DownloadDataCompleted(object sender,
           DownloadDataCompletedEventArgs e)
        {

        }

        public string SearchForText(string SearchParameter)
        {
            client.DownloadDataCompleted += DownloadDataCompleted;
            client.DownloadDataAsync(new Uri(url));
            return SearchParameter;
        } 
```

我想使用 WebClient 和 downloaddataasync 并最终将网站源内容放在一个字符串中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:02:44.607

真的不需要异步：

```
var result = new System.Net.WebClient().DownloadString(url) 
```

如果您不想阻止您的 UI，您可以将上述内容放在 BackgroundWorker 中。我建议使用此方法而不是 Async 方法的原因是因为它使用起来非常简单，并且因为我怀疑您无论如何都会将此字符串粘贴到 UI 中的某个地方（BackgroundWorker 将使您的生活更轻松）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T20:16:25.303

如果您使用的是 .Net 4.5，

```
public async void Downloader()
{
    using (WebClient wc = new WebClient())
    {
        string page = await wc.DownloadStringTaskAsync("http://chatroll.com/rotternet");
    }
} 
```

对于 3.5 或 4.0

```
public void Downloader()
{
    using (WebClient wc = new WebClient())
    {
        wc.DownloadStringCompleted += (s, e) =>
        {
            string page = e.Result;
        };
        wc.DownloadStringAsync(new Uri("http://chatroll.com/rotternet"));
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T20:14:21.823

使用`WebRequest`：

```
WebRequest request = WebRequest.Create(url);
request.Method = "GET";
WebResponse response = request.GetResponse();
Stream stream = response.GetResponseStream();
StreamReader reader = new StreamReader(stream);
string content = reader.ReadToEnd();
reader.Close();
response.Close(); 
```

您可以轻松地从另一个线程中调用代码，或使用后台佩戴者 - 这将使您的 UI 在检索数据时响应。

# ssl-certificate - SSL 设置：忽略客户端证书

> ID：11891086
> 
> 赞同：4
> 
> 时间：2012-08-09T20:01:26.963
> 
> 标签：ssl-certificate

我对客户端证书的全部内容有点困惑。我已在我的 SSL 设置中将客户端证书设置为“忽略”。但我担心它是否可以。有人可以向我解释这三者的区别或重要性/优势吗？哪个是最常用/最可取的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:15:05.200

客户端证书用于 SSL 连接的客户端身份验证。
通常默认设置是不请求客户端证书，因为服务器可能会为数千个客户端提供服务，并且能够进行客户端身份验证（并且有意义）的唯一方法是让服务器和客户端成为同一 PKI 基础架构的一部分（这实际上意味着同一组织的一部分）。
因此，除非您询问您的浏览器，否则没关系。你这一边没有恐惧的脆弱性。可能发生的更糟糕的事情是您将无法连接到实际进行客户端身份验证的站点

# asp.net-mvc - 如何循环访问成员列表？

> ID：11891088
> 
> 赞同：4
> 
> 时间：2012-08-09T20:01:27.977
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

我有一个所有成员的列表：

```
Dim allUsers = Membership.GetAllUsers().Cast(Of MembershipUser).ToList 
```

尽管我进行了搜索，但我一直无法弄清楚如何循环执行以下操作。我想循环并检索记录，如果记录包含某个值，则将用户添加到新集合中。

```
for each allusers as user

  ' get user profile
  ' if user profile has a certain value, add it to another collection

end for each 
```

然后，一旦新集合已满，将该集合输出到我的视图。

那有意义吗？我怎样才能做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-06T02:07:46.700

添加了 C# 版本：

```
 var newListOfUsers = new List<MembershipUser>();
    Membership.GetAllUsers().OfType<MembershipUser>().ToList().ForEach( user =>
                                                                                {
                                                                                    if(user.Comment.Equals("A Leather Glove")) newListOfUsers.Add(user);
                                                                                }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:20:08.557

尝试这个：

```
Public Function GetUsers() As IEnumerable(Of MembershipUser)

    Dim newListOfUsers = New List(Of MembershipUser)()
    Dim users As MembershipUserCollection = Membership.GetAllUsers()
    For Each user As MembershipUser In users
        If user.Comment = "A Leather Glove" Then
            newListOfUsers.Add(user)
        End If
    Next

    Return newListOfUsers
End Function 
```

# asp.net - IIS 7.5 中未显示 ASP.NET 功能

> ID：11891089
> 
> 赞同：12
> 
> 时间：2012-08-09T20:01:38.280
> 
> 标签：asp.net, .net-4.0, windows-server-2008, iis-7.5

我在 IIS 7.5 中遇到问题，其中 ASP.NET 功能部分未显示在我的 Web 应用程序上。

我的环境：Windows 2008 R2 SP1、IIS 7.5 (7.5.7600)、.NET Framework 4.0

我的问题与此处发布的问题类似：[No asp.net features on IIS 7.5](https://stackoverflow.com/questions/3234930/no-asp-net-features-on-iis-7-5 "IIS 7.5 上没有 asp.net 功能")，只有我的环境不同。该帖子中提到的“添加功能”修复似乎在 Windows Server 2008 中不起作用，因为我没有看到可以选择的简单“ASP.NET”功能。

我尝试以管理员身份针对 .NET 4.0 运行 aspnet_regiis 工具，但没有成功。为 Web 应用程序选择的应用程序池当前配置为使用 .NET 4.0。这个应用程序可以正常工作，所以我假设 .NET 4.0 已正确安装，但我希望能够配置 ASP.NET 部分中的更多内容。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T20:35:58.200

尝试角色 > 右键单击​​ Web 服务器 (IIS) > 添加角色服务 > 应用程序开发以打开 IIS 中的 ASP.Net 功能

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-11-29T19:54:43.387

较新版本的 Windows Server 中的 UI 略有不同。在这里您必须启用 ASP.Net 才能使其在 IIS 上运行

[![如何修复 IIS ASP.Net 错误](../Images/12fb8d43bff709321faaa8da264fafd9.png)](https://i.stack.imgur.com/NR9c9.png)

# asp.net-mvc - asp mvc noob：为什么我的 mvc 应用程序没有从它的种子数据中填充？

> ID：11891091
> 
> 赞同：0
> 
> 时间：2012-08-09T20:01:43.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在关注 ASP MVC 3 音乐商店教程——将 C# 转换为 VB。 [http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-4)

我有一个名为 SampleData 的类，它应该保存应用程序的数据。它看起来像这样：

```
 Public Class SampleData
        Inherits DropCreateDatabaseIfModelChanges(Of MusicStoreEntities)

        Protected Overrides Sub Seed(context As MusicStoreEntities)
            Dim genres As Genre() = { _
                New Genre() With {.name = "Rock"},
                New Genre() With {.name = "Jazz"},
               ... more genres...
             } 
```

我有一个名为 MusicStoreEntities 的类，它从 DbContext 继承，如下所示：

```
Public Class MusicStoreEntities
    Inherits DbContext

    Property albums As DbSet(Of Album)
    Property genres As DbSet(Of Genre) 
```

我的控制器应该返回一个列出流派的视图，但流派列表是空的。

```
 ' GET: /Store
    Dim storeDB As MusicStoreEntities = New MusicStoreEntities()

    Function Index() As ActionResult
        Dim genres As List(Of Genre) = storeDB.genres.ToList
        Return View(genres)
    End Function 
```

我还在位于 global.asax 的 Application_start 中调用我的种子

```
Sub Application_Start()
    System.Data.Entity.Database.SetInitializer(
           New MvcMusicStore.Models.SampleData()) 
```

基本上，我应该看到所有类型，但没有。

![在此处输入图像描述](../Images/1fb8bd574f2e093b633adb18f7a184f7.png)

我不知道如何进行调试。我从哪里开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:07:14.137

您是否在位于 global.asax 的 Application_start 中调用您的种子？

我不知道vb，但这是c#：

```
protected void Application_Start() {
    Database.SetInitializer(new SampleData());
} 
```

更改`DropCreateDatabaseIfModelChanges`为`DropCreateDatabaseAlways`也可能会有所帮助，它会在每次运行程序时强制您的数据库删除并重新设置种子。

# excel - Excel函数替换子字符串

> ID：11891093
> 
> 赞同：4
> 
> 时间：2012-08-09T20:01:46.720
> 
> 标签：excel

我需要替换可能包含某些值的单元格中的值。假设我在 A 列中列出了以下值。

```
Trucking Inc.
New Truck Inc
ABV Trucking Inc, LLC 
```

我希望能够用相应的值替换以下内容。以下是包含 2 列的列表。1 列是 From，另一列是 To 字段。

```
 From      To
      " Inc."   ""
      " Inc"    ""
      " Inc, "  ""
      " LLC"    "" 
```

结果应该是：

```
Trucking
New Truck
ABV Trucking 
```

希望我在这里有意义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-09T21:30:35.687

我做出与 Scott Holtzman 相同的假设——您可能想要使用 SUBSITUTE 函数。

例子：

```
=SUBSTITUTE(A2,B2,C2) 
```

这是我为您假设的情况：

![我认为你的情况](../Images/eb88d1281d3afd441b61ea7d2f51e87e.png)

顺便说一句（笑双关语）：您应该学习如何拍摄屏幕截图，然后使用 MS Paint 对其进行编辑 - 这将为您正确回答更多问题（仅供将来参考）：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T16:00:06.220

如果您尝试在宏中执行此操作，那么您也可以尝试 VBA Replace 语句。它比替代功能好得多。

您可以使用以下宏来帮助您的事业：

```
Sub ChangeTerms()
Dim rows As Integer
Dim cellvalue As String
Dim Newcellvalue As String
rows = ActiveSheet.UsedRange.rows.Count
For i = 1 To rows
cellvalue = ActiveSheet.Cells(i, 1).Value
Newcellvalue = Replace(cellvalue, " Inc.", "")
Newcellvalue = Replace(Newcellvalue, " Inc,", "")
Newcellvalue = Replace(Newcellvalue, " Inc", "")
Newcellvalue = Replace(Newcellvalue, " LLC", "")
ActiveSheet.Cells(i, 1).Value = Newcellvalue
Next i
End Sub 
```

这个宏的核心是替换函数。如果您需要了解有关此功能的更多信息，请查看以下资源：

[http://www.exceltrick.com/formulas_macros/vba-replace-function](http://www.exceltrick.com/formulas_macros/vba-replace-function)

[http://msdn.microsoft.com/en-us/library/bt3szac5(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bt3szac5(v=vs.80).aspx)

# php - 从 postmaster@domain.co.uk 收到的 PHP 电子邮件表单

> ID：11891097
> 
> 赞同：0
> 
> 时间：2012-08-09T20:02:13.583
> 
> 标签：php, javascript, email

我从 postmaster@domain.co.uk 收到我的电子邮件，而不是我指定的 $email。

php 应该将 $email 设置为发送电子邮件的人，但它会转到默认的 postmaster@domain.co.uk

```
 <?php
    // Clean up the input values
    foreach($_POST as $key => $value) {
      if(ini_get('magic_quotes_gpc'))
        $_POST[$key] = stripslashes($_POST[$key]);

      $_POST[$key] = htmlspecialchars(strip_tags($_POST[$key]));
    }

    mb_convert_encoding($string, "UTF-8"); //AUTO DETECT AND CONVERT
    mb_convert_encoding($string, "UTF-8", "latin1");

    // Assign the input values to variables for easy reference
    $name = $_POST["name"]; 
    $email = $_POST["email"];
    $telephone = $_POST["telephone"];
    $pages = $_POST["pages"];
    $budget = $_POST["budget"];
    $message = $_POST["message"];

    // Test input values for errors
    $errors = array();
    if(strlen($name) < 2) {
      if(!$name) {
        $errors[] = "You must enter a name.";
      } else {
        $errors[] = "Name must be at least 2 characters.";
      }
    }
    if(!$email) {
      $errors[] = "You must enter an email.";
    } else if(!validEmail($email)) {
      $errors[] = "You must enter a valid email.";
    }
    if(strlen($telephone) < 6) {
      if(!$telephone) {
        $errors[] = "You must enter a phone number.";
      } else {
        $errors[] = "Message must be at least 6 characters. (include area code)";
      }
    }
    if(strlen($message) < 10) {
      if(!$message) {
        $errors[] = "You must enter a message.";
      } else {
        $errors[] = "Message must be at least 10 characters.";
      }
    }

    if($errors) {
      // Output errors and die with a failure message
      $errortext = "";
      foreach($errors as $error) {
        $errortext .= "<li>".$error."</li>";
      }
      die("<span class='failure'>The following errors occured:<ul>". $errortext ."</ul></span>");
    }

    // Send the email
    $to = "contact@dorsetdesigns.co.uk";
    $subject = "Quote Request: $name";
    $message = "Telephone Number: $telephone"."<br />"."Job Details: $message"."<br />"."Number of Pages Required: $pages"."<br />"."Clients Budget: $budget";
    $headers = 'Content-Type: text/html; charset=utf-8';
    "Quote Request From: $email";

    mail($to, $subject, $message, $headers);

    // Die with a success message
    die("<span class='success'>Success! Your message has been sent.</span>");

    // A function that checks to see if
    // an email is valid
    function validEmail($email)
    {
       $isValid = true;
       $atIndex = strrpos($email, "@");
       if (is_bool($atIndex) && !$atIndex)
       {
          $isValid = false;
       }
       else
       {
          $domain = substr($email, $atIndex+1);
          $local = substr($email, 0, $atIndex);
          $localLen = strlen($local);
          $domainLen = strlen($domain);
          if ($localLen < 1 || $localLen > 64)
          {
             // local part length exceeded
             $isValid = false;
          }
          else if ($domainLen < 1 || $domainLen > 255)
          {
             // domain part length exceeded
             $isValid = false;
          }
          else if ($local[0] == '.' || $local[$localLen-1] == '.')
          {
             // local part starts or ends with '.'
             $isValid = false;
          }
          else if (preg_match('/\\.\\./', $local))
          {
             // local part has two consecutive dots
             $isValid = false;
          }
          else if (!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain))
          {
             // character not valid in domain part
             $isValid = false;
          }
          else if (preg_match('/\\.\\./', $domain))
          {
             // domain part has two consecutive dots
             $isValid = false;
          }
          else if(!preg_match('/^(\\\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/',
                     str_replace("\\\\","",$local)))
          {
             // character not valid in local part unless
             // local part is quoted
             if (!preg_match('/^"(\\\\"|[^"])+"$/',
                 str_replace("\\\\","",$local)))
             {
                $isValid = false;
             }
          }
          if ($isValid && !(checkdnsrr($domain,"MX") || checkdnsrr($domain,"A")))
          {
             // domain not found in DNS
             $isValid = false;
          }
       }
       return $isValid;
    }

    ?> 
```

和js

```
 $(function() {
      // Validate the contact form
      $('#contactform').validate({
        // Specify what the errors should look like
        // when they are dynamically added to the form
        errorElement: "label",
        wrapper: "td",
        errorPlacement: function(error, element) {
          error.insertBefore( element.parent().parent() );
          error.wrap("<tr class='error'></tr>");
          $("<td></td>").insertBefore(error);
        },

        // Add requirements to each of the fields
        rules: {
          name: {
            required: true,
            minlength: 2
          },
          email: {
            required: true,
            email: true
          },
           telephone: {
            required: true,
            minlength: 6
          },
          message: {
            required: true,
            minlength: 10
          }
        },

        // Specify what error messages to display
        // when the user does something horrid
        messages: {
          name: {
            required: "Please enter your name.",
            minlength: jQuery.format("At least {0} characters required.")
          },
          email: {
            required: "Please enter your email.",
            email: "Please enter a valid email."
          },
          telephone: {
            required: "Please enter a phone number.",
            minlength: jQuery.format("At least {0} characters required.")

          },
          message: {
            required: "Please enter a message.",
            minlength: jQuery.format("At least {0} characters required.")
          }
        },

        // Use Ajax to send everything to quote.php
        submitHandler: function(form) {
          $("#send").attr("value", "Sending...");
          $(form).ajaxSubmit({
            target: "#response",
            success: function(responseText, statusText, xhr, $form) {
              $(form).slideUp("fast");
              $("#response").html(responseText).hide().slideDown("fast");
            }
          });
          return false;
        }
      });
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:04:15.237

```
$headers = 'Content-Type: text/html; charset=utf-8';
"Quote Request From: $email"; 
```

应该：

```
$headers = 'Content-Type: text/html;\ncharset=utf-8;\nFrom: $email'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:11:59.313

现在无法检查，但我不认为 From 地址被添加到您的 $header 变量中。

```
$headers = 'Content-Type: text/html; charset=utf-8';     
           "Quote Request From: $email"; 
```

这是我在 PHP 邮件手册中找到的设置附加标头的示例。

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n"; 
```

[http://www.php.net/manual/en/function.mail.php](http://www.php.net/manual/en/function.mail.php)

你的......至少根据文档。

```
$headers  = 'Content-type: text/html; charset=utf-8' . "\r\n";
$headers .= "From: $email" . "\r\n"; 
```

# java - NullPointerException - 在 jasper 中生成报告

> ID：11891100
> 
> 赞同：0
> 
> 时间：2012-08-09T20:02:33.647
> 
> 标签：java, jasper-reports

使用 Jasper Reports 生成报告时遇到问题。
我的目的是为每个用户生成一份报告，但它只生成一个 pdf。

```
Grave: Error instantiating extensions registry for fonts
    java.lang.NullPointerException
        at net.sf.jasperreports.engine.fonts.SimpleFontFace.<init>(SimpleFontFace.java:83)
        at net.sf.jasperreports.engine.fonts.SimpleFontFamily.createFontFace(SimpleFontFamily.java:316)
        at net.sf.jasperreports.engine.fonts.SimpleFontFamily.setItalic(SimpleFontFamily.java:101)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseFontFamily(SimpleFontExtensionHelper.java:241)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.parseFontFamilies(SimpleFontExtensionHelper.java:204)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.loadFontFamilies(SimpleFontExtensionHelper.java:173)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionHelper.loadFontFamilies(SimpleFontExtensionHelper.java:142)
        at net.sf.jasperreports.engine.fonts.SimpleFontExtensionsRegistryFactory.createRegistry(SimpleFontExtensionsRegistryFactory.java:63)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.instantiateRegistry(DefaultExtensionsRegistry.java:200)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.loadRegistries(DefaultExtensionsRegistry.java:175)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.loadRegistries(DefaultExtensionsRegistry.java:135)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.getRegistries(DefaultExtensionsRegistry.java:121)
        at net.sf.jasperreports.extensions.DefaultExtensionsRegistry.getExtensions(DefaultExtensionsRegistry.java:98)
        at net.sf.jasperreports.engine.util.JRStyledTextParser.<clinit>(JRStyledTextParser.java:76)
        at net.sf.jasperreports.engine.fill.JRBaseFiller.<init>(JRBaseFiller.java:181)
        at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:76)
        at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:86)
        at net.sf.jasperreports.engine.fill.JRVerticalFiller.<init>(JRVerticalFiller.java:56)
        at net.sf.jasperreports.engine.fill.JRFiller.createFiller(JRFiller.java:142)
        at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:52)
        at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:417)
        at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:247)
        at sige.comunicacao.participante.ServletEmitirCertificadoTodosParticipantes.emitirCertificado(ServletEmitirCertificadoTodosParticipantes.java:250)
        at sige.comunicacao.participante.ServletEmitirCertificadoTodosParticipantes.doPost(ServletEmitirCertificadoTodosParticipantes.java:102)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:873)
        at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
        at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
        at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
        at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
        at java.lang.Thread.run(Unknown Source) 
```

产生异常的代码片段是：

```
 // Aqui ele cria o relatório
                        impressao = JasperFillManager.fillReport(pathJasper
                                + "/Certificado_Conclusao.jasper", parametros, con);

                        // exporta para pdf
                        JasperExportManager.exportReportToPdfFile(impressao, path
                                + "/Certificado_Conclusao_" + cpf + ".pdf"); 
```

我正在使用 jasper 报告 3.7.2

任何人都知道如何解决这个问题？先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:50:26.110

这可能对您有所帮助： http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid= [88402](http://jasperforge.org/plugins/espforum/view.php?group_id=83&forumid=101&topicid=88402)

# php - 使用 swiftmailer 动态获取附件名称

> ID：11891102
> 
> 赞同：0
> 
> 时间：2012-08-09T20:02:45.230
> 
> 标签：php, swiftmailer

正如标题所说，我想从表单中提取一个输入来更改附件的名称。

当我把这个：

```
->attach(Swift_Attachment::newInstance($pdf_content, '$post->name', 'application/pdf')) 
```

它不起作用，但如果我这样叫出这个名字，它就会起作用：

```
->attach(Swift_Attachment::newInstance($pdf_content, 'design.pdf', 'application/pdf')) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:12:36.347

很可能**a)** `$post->name`不是你认为的那样，并且**b)**单引号把你弄乱了。

首先，验证它`$post->name`是一个字符串/文件名（例如*design.pdf*）：

```
echo $post->name;
exit(); 
```

然后，一旦你确定它是你所期望的，在将它传递给函数时不要使用单引号：

```
->attach(Swift_Attachment::newInstance($pdf_content, $post->name, 'application/pdf')) 
```

*单引号括起来的字符串由 PHP 字面意思表示*，因此您作为文件名传递的所有`$post->name`内容都是. 如果您希望将字符串解析为包含变量，请使用双引号代替 ( ) 或根本不使用引号（因为那里没有要传递的其他内容）。*`$post->name``..., "$post->name", ...`*

# android - 如果屏幕太长，让水平 RadioButtons 换行

> ID：11891105
> 
> 赞同：16
> 
> 时间：2012-08-09T20:03:00.690
> 
> 标签：android, android-layout

所以我有以下单选按钮。我想让它们像这样显示：

![在此处输入图像描述](../Images/4249a2060c27d24f0c7de1bfc435f4e6.png)

但是会发生这种情况：

![无线电组问题](../Images/83545c9b8234c61aa89e5f5ebb7e0ab6.png)

我怎样才能让它像上面那样显示？
我可以在 Eclipse 的 GUI 编辑器中移动它，但它会从 RadioGroup 中删除 RadioButton！
在组内，它忽略所有其他布局参数。

```
<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/timeBar"
    android:layout_marginTop="43dp"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/privRadio0"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Everyone" />

    <RadioButton
    android:id="@+id/privRadio1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:checked="true"
    android:text="FriendOfFriends" />

 <RadioButton
    android:id="@+id/privRadio2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Friends" />
</RadioGroup> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-06-03T12:57:29.490

你可以简单地复制这个类：

[https://github.com/jevonbeck/AbstractMachine/blob/jevon_dev/app/src/main/java/org/ricts/abstractmachine/ui/utils/MultiLineRadioGroup.java](https://github.com/jevonbeck/AbstractMachine/blob/jevon_dev/app/src/main/java/org/ricts/abstractmachine/ui/utils/MultiLineRadioGroup.java)

放入项目中的适当包中并在 XML 中实例化，如下所示：

```
<view
    class="mypackage.packagepath.MultiLineRadioGroup"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:20:45.687

您要的是[FlowLayout](http://nishantvnair.wordpress.com/2010/09/28/flowlayout-in-android/)。与 0gravity 更“静态”的解决方案相比，这种布局的好处是只在需要时才进行包装。

# css - 具有 100% 高度的 jQuery UI 选项卡具有延伸到可见区域下方的内容和垂直滚动条

> ID：11891106
> 
> 赞同：2
> 
> 时间：2012-08-09T20:03:16.883
> 
> 标签：css, html, html-lists, overflow, jquery-ui-tabs

有一个奇怪的问题（奇怪是因为我看不懂）

尝试使用 100% 高度的 jQuery UI 选项卡和内容的垂直溢出滚动条。

这不起作用 - 可滚动区域大于可见区域，导致滚动条的下部低于可见区域。看起来滚动区域随着列表区域的高度而扩展。

该问题仅在 100% 高度时有效（以不同的方式对此进行测试）。一旦我设置了固定高度（以某种方式），问题就消失了？？？

经过一些测试后发现 UI 不应该受到责备，并且该问题对于本机列表项也有效。

我的设置是这样的：

*   我需要使用所有可用空间（完整的 iframe、div、窗口）
*   我不知道顶级列表的高度。
*   我需要将剩余空间用于垂直溢出的内容
*   不会使用脚本来修改高度（必须单独使用 CSS 和 HTML5）

你可以在这里看到一个演示：

[http://jsfiddle.net/beasty/6cAat/10/](http://jsfiddle.net/beasty/6cAat/10/)

关于如何修复它的任何建议？

谢谢本尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:13:18.753

css 属性 height: 100% 对相对定位的元素没有影响。

```
<div style="position: relative; height: 100%; border-style: solid; border-width:2px;">

    <div id="contenttab" style="position: absolute; top: 0; bottom: 0; right: 0; left: 0; overflow-y: auto;">

        Looong text

    </div>
</div> 
```

[这是](http://jsfiddle.net/6cAat/12/)一个更好的方法来做到这一点。您仍然必须确定绝对定位的 div 上方的列表高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:09:22.813

这是因为顶级`div`元素隐藏了它的溢出。它的子`div`元素超出了其父元素的高度，因为它的高度是 100%。浏览器计算父级的高度，在本例中为 643 像素。所以孩子也是 643 像素，即使它必须与高度为 60 像素的无序列表共享可见空间。因此，子`div`元素的 60 像素是隐藏的。

作为一种解决方案，您可以将高度设置`ul`为 10%，将孩子`div`设置为 90%。但小心点！您正在使用高度声明中未包含的边框，因此您仍然会丢失一定数量的子 div，这与您正在使用的边框像素数完全相同。此外，如果它`ul`不断增长，它的内容也可能会从视野中消失。最好不要为孩子`div`或 the指定高度`ul`，而是允许父母`div`溢出-y。否则它看起来有点“框架-y”。

# c++ - 产生两个间隔集合的差异的算法

> ID：11891109
> 
> 赞同：25
> 
> 时间：2012-08-09T20:03:26.653
> 
> 标签：c++, algorithm, language-agnostic, binary-tree

## 问题

假设我有两个区间集合，分别命名为 A 和 B。我如何以最节省时间和内存的方式找到差异（相对补码）？

图片说明： ![在此处输入图像描述](../Images/07bc5288331ca41beeae27482bba9188.png)

区间端点是**整数**( ≤ 2 ^(128) -1 )，它们总是 2 ^n长并且在 m×2 ^n晶格上对齐（所以你可以用它们制作二叉树）。

间隔可以在输入中重叠，但这不会影响输出（如果展平，结果将是相同的）。

问题是因为两个集合中有很多间隔（最多 100,000,000），所以幼稚的实现可能会很慢。

输入是从两个文件中读取的，并以这样一种方式进行排序，即较小的子间隔（如果重叠）按大小顺序紧随其父级之后。例如：

```
[0,7]
[0,3]
[4,7]
[4,5]
[8,15]
... 
```

## 我尝试了什么？

到目前为止，我一直在研究一种生成二叉搜索树的实现，同时聚合`[0,3],[4,7] => [0,7]`来自两个集合的相邻区间 (如有必要，在第一棵树中间隔）。

虽然这似乎适用于小型集合，但它需要越来越多的 RAM 来保存树本身，更不用说完成插入和从树中删除所需的时间了。

我认为由于间隔是预先排序的，我可以使用一些动态算法并一次性完成。但是，我不确定这是否可能。

* * *

那么，我将如何以有效的方式解决这个问题呢？

**免责声明：**这不是作业，而是对我面临的实际问题的修改/概括。我正在用 C++ 编程，但我可以接受任何 [命令式] 语言的算法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T22:14:52.327

回想一下我们在学校的第一个编程练习——编写一个计算器程序。从输入行获取算术表达式，对其进行解析和评估。还记得跟踪括号深度吗？所以我们开始吧。

类比：区间起点是左括号，终点是右括号。我们跟踪括号深度（嵌套）。二相交的深度，一差的深度

算法：

*   无需区分A和B，只需将所有起点和终点按升序排序即可
*   将括号深度计数器设置为零
*   遍历端点，从最小的一个开始。如果是起点，则增加深度计数器，如果是终点，则减少计数器
*   跟踪深度为 1 的区间，即 A 和 B 差异的区间。深度为2的区间为AB交点

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T20:25:57.440

您的间隔已排序，这很棒。您可以在几乎没有内存的情况下在线性时间内完成此操作。

首先“压平”你的两组。即对于集合 A，从最低间隔开始，并组合任何重叠间隔，直到您有一个没有重叠的间隔集。然后为 B 执行此操作。

现在拿你的两组，从前两个间隔开始。我们将这些称为 A 和 B、Ai 和 Bi 的区间指数。

Ai 索引 A 中的第一个区间，Bi 索引 B 中的第一个区间。

虽然有处理时间间隔，但请执行以下操作：

考虑两个区间的起点，起点是否相同？如果是这样，将两个区间的起点提前到较小区间的终点，则不向您的输出发送任何内容。将较小区间的索引推进到下一个区间。（也就是说，如果 Ai 在 Bi 之前结束，则 Ai 前进到下一个区间。）如果两个区间在同一位置结束，则 Ai 和 Bi 都前进并且什么都不发射。

一个起点是否早于另一起点？如果是这样，则发出从较早起点到 a) 较晚端点的起点或 b) 较早终点的终点的间隔。如果您选择选项 b，则将前一区间的索引提前。

因此，例如，如果 Ai 的间隔首先开始，则您发出从 Ai 的开始到 Bi 的开始的间隔，或者 Ai 的结束，以较小者为准。如果Ai 在Bi 开始之前结束，你推进Ai。

重复直到所有时间间隔都用完。

附言。我假设您没有多余的内存来将两个间隔集展平为单独的缓冲区。在两个函数中执行此操作。一个“获取下一个区间”函数，它推进区间索引，根据需要进行展平，并将展平的数据提供给差分函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T20:26:49.067

您正在寻找的是[扫描线算法](http://en.wikipedia.org/wiki/Sweep_line_algorithm)。一个简单的逻辑应该告诉您扫描线何时与 A 和 B 中的一个区间相交，以及它只与一组相交。

[这与这个问题](https://stackoverflow.com/questions/10886975/simple-algorithm-pseudo-code-for-line-segment-intersection)非常相似。只需考虑您有一组垂直线穿过 B 段的端点。

该算法复杂度为 O((m+n) log (m+n))，这是初始排序的成本。排序集上的扫描线算法需要 O(m+n)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T12:34:32.383

我认为您应该使用 boost.icl （间隔容器库） [http://www.boost.org/doc/libs/1_50_0/libs/icl/doc/html/index.html](http://www.boost.org/doc/libs/1_50_0/libs/icl/doc/html/index.html)

```
#include <iostream>
#include <boost/icl/interval_set.hpp>

using namespace boost::icl;

int main()
{
  typedef interval_set<int> TIntervalSet;
  TIntervalSet intSetA;
  TIntervalSet intSetB;

  intSetA += discrete_interval<int>::closed( 0, 2);
  intSetA += discrete_interval<int>::closed( 9,15);
  intSetA += discrete_interval<int>::closed(12,15);

  intSetB += discrete_interval<int>::closed( 1, 2);
  intSetB += discrete_interval<int>::closed( 4, 7);
  intSetB += discrete_interval<int>::closed( 9,10);
  intSetB += discrete_interval<int>::closed(12,13);

  std::cout << intSetA << std::endl;
  std::cout << intSetB << std::endl;

  std::cout << intSetA - intSetB << std::endl;

  return 0;
} 
```

这打印

```
{[0,2][9,15]}
{[1,2][4,7][9,10][12,13]}
{[0,1)(10,12)(13,15]} 
```

# objective-c - 删除和添加相同的对象到不同的类

> ID：11891114
> 
> 赞同：0
> 
> 时间：2012-08-09T20:03:46.670
> 
> 标签：objective-c

我正在读一本书来学习Objective-C。我被困在其中一个练习中。您必须制作一个包含班级歌曲、播放列表和音乐收藏的程序。如果你创建一首歌曲，它必须自动添加到音乐收藏中，谁有一个 NSMutableArray 用于收集歌曲。如果您从音乐收藏中删除一个对象，则该歌曲必须从包含该歌曲的每个播放列表中删除。

歌曲界面

```
#import <Foundation/Foundation.h>

    @interface Song : NSObject{

    NSString *title;
    NSString *artist;
    NSString *album;
    }

    @property (copy) NSString  *title;
    @property (copy) NSString  *artist;
    @property (copy) NSString  *album;

    -(Song *) initWithNames:(NSString*) title1 and: (NSString*) artist1 and: (NSString*) album1;

    @end 
```

播放列表界面

```
#import <Foundation/Foundation.h>

@interface Playlist : NSObject{
    NSString * title;
    NSMutableArray *collecsongs;
}

@property (strong) NSString *title; 
@property (strong) NSMutableArray *collecsongs;

-(Playlist *) initWithName: (NSString *) name;

@end 
```

音乐收藏界面

```
#import <Foundation/Foundation.h>
#import "Playlist.h"

@interface MusicCollection : NSObject{
    NSMutableArray *collecplist;
    Playlist *library;
}

@property (strong) NSMutableArray *collecplist;
@property (strong) Playlist *library;

@end 
```

因此，如果我创建一首歌曲，例如歌曲 1，是否有办法将其添加到播放列表中，自动将其添加到 mastercoleection 变量“库”中，而不是这样做

```
Song *song1 = [[Song alloc] initWithNames:@"Somebody That I Used To Know" and: @"Gotye" and: @"First Album"];

Playlist *Misrolas = [[Playlist alloc] initWithName: @"Misrolas"];

MusicCollection *music = [[MusicCollection alloc] init];        

[Misrolas.collecsongs addObject: song1];//adds song1 to the playlist named "Misrolas"
[music.library.collecsongs addObject: song1];//adds song1 to the music collection 
```

所以我不知道该怎么做，我在想可能覆盖 addObject:，但这似乎并不正确和容易，感谢您的帮助 =)

我这样做是这样的，有没有更有效或更好的方法来添加它？？？

```
-(void) addsong: (Song *)song addtocollection: (Playlist *) library{

    NSAssert([song isKindOfClass: [Song class]], @"Not the same class");

        [self.collecsongs addObject:song];
        [library.collecsongs addObject: song];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:07:16.837

如果您在`Playlist`对象上调用方法来添加歌曲，而不是访问其`collecsongs`属性，您可能会发现这更容易。在该方法中，它可以将歌曲添加到数组中，然后将其添加到库中。（然后你可以让`collecsongs`属性返回一个 NSArray，而不是一个`NSMutableArray`，这对我来说似乎更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:13:19.613

```
-(Song *) initWithNames:(NSString*) title1 and: (NSString*) artist1 and: (NSString*) album1; 
```

这是一个非常糟糕的命名。您的选择器缩短为 initWithNames:and:and: （这不是真正的描述性）。考虑使用

```
- (id)initWithTitle:(NSString *)title artist:(NSString *)artist album:(NSString *)album; 
```

请注意我在这里如何使用 (id) 的返回类型。它允许更轻松的子类化，因为任何后代类都可以使用 init...“构造函数”而没有任何类型不匹配警告。

说到你的问题，我建议你只公开 NSArray * 属性访问器（这样你就不能修改数组内容）并在 Playlist 类上创建一个方法：

```
- (void)addSong:(Song *)song
{
    NSAssert([song isKindOfClass:[Song class]]);
    [self.collecplist addObject:song];
} 
```

这就是 OOP 的实际封装。您不公开私有接口（数组），您提供用于精确添加歌曲的接口（您不能添加其他类型的对象），最后，您进行验证，您添加的确实是一首歌曲。在这里，您还可以将歌曲添加到您的音乐收藏中。

# mustache - Mustache.js：遍历通过 json 接收的列表

> ID：11891123
> 
> 赞同：8
> 
> 时间：2012-08-09T20:04:42.427
> 
> 标签：mustache

> **可能重复：**
> [带有 JSON 集合的 Mustache JS 模板](https://stackoverflow.com/questions/11819006/mustache-js-template-with-json-collection)

我有一个像这样的 json 响应，我想与 Mustache.js 一起使用：

```
[
    {"id": "1", "details": {"name": "X", "type":"Y" }},
    {"id": "2", "details": {"name": "aName", "type":"something" }}
] 
```

如何使用 mustache.js 对其进行迭代？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-10T16:37:32.903

数组本身应该是更大对象中的值，如下所示：

```
var obj = {
  arr: [
    {"id": "1", "details": {"name": "X", "type":"Y" }},
    {"id": "2", "details": {"name": "aName", "type":"something" }}
  ]
} 
```

然后你可以这样做：

```
{{#arr}}
   my id: {{id}}
{{/arr}} 
```

{{#bla}} 的使用实际上是重载的。当它作用的属性是一个数组时，它将循环。当属性是对象本身时，它将“进入”该对象。鉴于你的例子：

```
{{#arr}}
   my id: {{id}} <br/>
   {{#details}}
     and my name: {{name}}
   {{/details}}
{{/arr}} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-10T20:49:44.990

我发现了另一种与 Geert-Jan 非常相似的方法，只是您不必将数组分配给 Javascript 对象。

```
{{ #. }}
   <p> {{ id }} </p>
   <ul> {{#details}}
        {{name }}
        {{ type }}
   {{/details}}
   </ul>
{{ /. }} 
```

# jquery - jQuery .click() 不会触发

> ID：11891126
> 
> 赞同：0
> 
> 时间：2012-08-09T20:04:54.807
> 
> 标签：jquery, onclick, click

我有一个隐蔽的问题。当 .click() 事件突然停止触发时，我正在使用 jQuery 为某些东西创建 UI。

这个 jsFiddle 有所有相关的代码：

[http://jsfiddle.net/qgz2j/1/](http://jsfiddle.net/qgz2j/1/)

如果查看代码，您可以看到`<div>`id 为“target”的 a 包含另外两个`<div>`s，一个 id 为“red”，一个 id 为“green”。查看相关的 CSS，它们都有 100% 的宽度并且是重叠的，但绿色有`display:none;`.

如您所见，`.click()`不会触发，也不会显示任何警报。但是，使用它可以：

```
<div id="target" onClick="alert('Clicked!')">
    <div id="red"></div>
    <div id="green"></div>
</div> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:07:48.160

您选择了错误的框架。将其从**Mootools**更改为**jQuery**。

![在此处输入图像描述](../Images/60193fd434be50dad39ad67fd4593d78.png)

此外，将代码包装在[**ready**](http://api.jquery.com/ready/)函数中也是一个好习惯。

```
$(function(){     
       $('div#target').click(function() {
            alert('div has been clicked');
        });

});
​ 
```

工作示例[http://jsfiddle.net/qgz2j/4/](http://jsfiddle.net/qgz2j/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:07:02.583

现在检查一下，您没有附加 jquery 库 [http://jsfiddle.net/qgz2j/3/](http://jsfiddle.net/qgz2j/3/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T20:07:12.363

在小提琴中，选择框架作为 jQuery，它应该可以工作。:P

[http://jsfiddle.net/qgz2j/6/](http://jsfiddle.net/qgz2j/6/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T20:07:55.243

您的代码很好，您只是将小提琴设置为使用 MooTools 而不是 jQuery。看看这个版本：

[http://jsfiddle.net/qgz2j/8/](http://jsfiddle.net/qgz2j/8/)

我所做的只是告诉它使用 jQuery。

# c# - 访问我的集线器类中的内部静态集合

> ID：11891130
> 
> 赞同：1
> 
> 时间：2012-08-09T20:05:15.180
> 
> 标签：c#, asp.net, signalr

我有一个集线器类，它有一个静态的“在线”用户集合，我还有另一个集线器类，我希望能够实时显示第一个集线器类的“在线”用户，我该怎么做完成这一点，特别是如何让 2 个集线器类相互通信并在它们之间共享数据（我的静态集合）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:07:28.907

简单的版本：让第一个类公开一个`event`，另一个实现一个事件监听器。

```
using System;

namespace EventSample
{
    // Class that contains the data for
    // the alarm event. Derives from System.EventArgs.
    //
    public class AlarmEventArgs : EventArgs
    {
        private bool snoozePressed;
        private int nrings;

        //Constructor.
        //
        public AlarmEventArgs(bool snoozePressed, int nrings)
        {
            this.snoozePressed = snoozePressed;
            this.nrings = nrings;
        }

        // The NumRings property returns the number of rings
        // that the alarm clock has sounded when the alarm event
        // is generated.
        //
        public int NumRings
        {
            get { return nrings;}
        }

        // The SnoozePressed property indicates whether the snooze
        // button is pressed on the alarm when the alarm event is generated.
        //
        public bool SnoozePressed
        {
            get {return snoozePressed;}
        }

        // The AlarmText property that contains the wake-up message.
        //
        public string AlarmText
        {
            get
            {
                if (snoozePressed)
                {
                    return ("Wake Up!!! Snooze time is over.");
                }
                else
                {
                    return ("Wake Up!");
                }
            }
        }
    }

    // Delegate declaration.
    //
    public delegate void AlarmEventHandler(object sender, AlarmEventArgs e);

    // The Alarm class that raises the alarm event.
    //
    public class AlarmClock
    {
        private bool snoozePressed = false;
        private int nrings = 0;
        private bool stop = false;

        // The Stop property indicates whether the
        // alarm should be turned off.
        //
        public bool Stop
        {
            get {return stop;}
            set {stop = value;}
        }

        // The SnoozePressed property indicates whether the snooze
        // button is pressed on the alarm when the alarm event is generated.
        //
        public bool SnoozePressed
        {
            get {return snoozePressed;}
            set {snoozePressed = value;}
        }

        // The event member that is of type AlarmEventHandler.
        //
        public event AlarmEventHandler Alarm;

        // The protected OnAlarm method raises the event by invoking
        // the delegates. The sender is always this, the current instance
        // of the class.
        //
        protected virtual void OnAlarm(AlarmEventArgs e)
        {
            AlarmEventHandler handler = Alarm;
            if (handler != null)
            {
                // Invokes the delegates.
                handler(this, e);
            }
        }

        // This alarm clock does not have
        // a user interface.
        // To simulate the alarm mechanism it has a loop
        // that raises the alarm event at every iteration
        // with a time delay of 300 milliseconds,
        // if snooze is not pressed. If snooze is pressed,
        // the time delay is 1000 milliseconds.
        //
        public void Start()
        {
            for (;;)
            {
                nrings++;
                if (stop)
                {
                    break;
                }
                else
                {
                    if (snoozePressed)
                    {
                        System.Threading.Thread.Sleep(1000);
                    }
                    else
                    {
                        System.Threading.Thread.Sleep(300);
                    }
                    AlarmEventArgs e = new AlarmEventArgs(snoozePressed, nrings);
                    OnAlarm(e);
                }
            }
        }
    }

    // The WakeMeUp class has a method AlarmRang that handles the
    // alarm event.
    //
    public class WakeMeUp
    {
        public void AlarmRang(object sender, AlarmEventArgs e)
        {
            Console.WriteLine(e.AlarmText +"\n");

            if (!(e.SnoozePressed))
            {
                if (e.NumRings % 10 == 0)
                {
                    Console.WriteLine(" Let alarm ring? Enter Y");
                    Console.WriteLine(" Press Snooze? Enter N");
                    Console.WriteLine(" Stop Alarm? Enter Q");
                    String input = Console.ReadLine();

                    if (input.Equals("Y") ||input.Equals("y"))
                    {
                        return;
                    }
                    else if (input.Equals("N") || input.Equals("n"))
                    {
                        ((AlarmClock)sender).SnoozePressed = true;
                        return;
                    }
                    else
                    {
                        ((AlarmClock)sender).Stop = true;
                        return;
                    }
                }
            }
            else
            {
                Console.WriteLine(" Let alarm ring? Enter Y");
                Console.WriteLine(" Stop Alarm? Enter Q");
                String input = Console.ReadLine();
                if (input.Equals("Y") || input.Equals("y"))
                {
                    return;
                }
                else
                {
                    ((AlarmClock)sender).Stop = true;
                    return;
                }
            }
        }
    }

    // The driver class that hooks up the event handling method of
    // WakeMeUp to the alarm event of an Alarm object using a delegate.
    // In a forms-based application, the driver class is the
    // form.
    //
    public class AlarmDriver
    {
        public static void Main(string[] args)
        {
            // Instantiates the event receiver.
            WakeMeUp w = new WakeMeUp();

            // Instantiates the event source.
            AlarmClock clock = new AlarmClock();

            // Wires the AlarmRang method to the Alarm event.
            clock.Alarm += new AlarmEventHandler(w.AlarmRang);

            clock.Start();
        }
    }
} 
```

[在MSDN](http://msdn.microsoft.com/en-us/library/9aackb16)上阅读更多信息。

# android - Android AccountManager - 添加新帐户

> ID：11891136
> 
> 赞同：0
> 
> 时间：2012-08-09T20:06:09.423
> 
> 标签：android, accountmanager, google-drive-api, google-account

我正在使用 Android AccountManager 来验证用户的 google 帐户以访问 Google Drive。但是，我想允许用户访问不在其手机上的云端硬盘帐户。例如，我有一个不在手机上的工作 google 帐户，但我想在我的应用程序中使用。有没有办法让用户验证不一定存储在 AccountManager 中的帐户？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T13:55:46.447

也许您可以将另一个 Google 帐户添加到手机并允许用户选择要使用的帐户。如果此选项不能满足您的要求，并且您确实想通过手机而不是通过 Google Drive 帐户进行身份验证，则必须使用 OAuth。

如果你真的，但真的，想在你的应用程序中使用 AccountManager 工具，你必须创建一个行为如下的帐户类型：

*   创建新帐户时，您打开浏览器小部件并使用 Google Drive 执行 OAuth 循环，然后将令牌存储在安全存储中
*   当您通过 getAuthToken() 请求令牌时，它会释放您存储的令牌或使用 OAuth 触发令牌刷新周期

这有其安全缺陷：在没有 AccountManager 的情况下更好地执行 OAuth 循环并将令牌存储在应用程序内存中

# matlab - 从图像中提取特征

> ID：11891141
> 
> 赞同：0
> 
> 时间：2012-08-09T20:06:34.373
> 
> 标签：matlab, image-processing, computer-vision

嗨，我是 matlab 的新手……我想检测图像中的病态细胞。

首先我用这段代码分割图像：现在我想提取它的特征......我该怎么办？请指导我？谢谢

```
he = imread('hestain.png');
imshow(he), title('H&E image');
text(size(he,2),size(he,1)+15,...
     'Image courtesy of Alan Partin, Johns Hopkins University', ...
     'FontSize',7,'HorizontalAlignment','right');

cform = makecform('srgb2lab');
lab_he = applycform(he,cform);
ab = double(lab_he(:,:,2:3));
nrows = size(ab,1);
ncols = size(ab,2);
ab = reshape(ab,nrows*ncols,2);
nColors = 3;
% repeat the clustering 3 times to avoid local minima
[cluster_idx cluster_center] = kmeans(ab,nColors,'distance','sqEuclidean', ...
                                      'Replicates',3);
pixel_labels = reshape(cluster_idx,nrows,ncols);
imshow(pixel_labels,[]), title('image labeled by cluster index');

segmented_images = cell(1,3);
rgb_label = repmat(pixel_labels,[1 1 3]);
for k = 1:nColors
    color = he;
    color(rgb_label ~= k) = 0;
    segmented_images{k} = color;
end
imshow(segmented_images{1}), title('objects in cluster 1');

imshow(segmented_images{2}), title('objects in cluster 2');

imshow(segmented_images{3}), title('objects in cluster 3'); 
```

这是图像： ![在此处输入图像描述](../Images/f1fff84009012450d750f72b5d55efaf.png)

现在我想提取它的特征......我该怎么办？请指导我？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T15:42:24.337

**matlab中的regionprops**函数会提取检测到的blob的不同属性，这里有一个链接[regionprops](http://www.mathworks.in/help/toolbox/images/ref/regionprops.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T06:15:30.943

通过查找其特征值和特征向量来查找每个集群（即细胞）的属性。这些将表明您的细胞的“管状”。您也可以计算每个单元格的矩。

我不知道你的“病态”细胞是什么样子，所以如果没有人知道“病态”细胞是什么样子，就不可能想出一种区分健康细胞和病态细胞的方法。再张贴一张生病细胞长什么样子的图片。

您可以了解每个单元的管度和矩的属性，并存储它们。然后使用支持向量机对健康与病态细胞进行分类。使用 SVM-Light。[http://svmlight.joachims.org/](http://svmlight.joachims.org/)

安库尔

# apache - 在每个 URL mod_rewrite apache 前面添加别名

> ID：11891142
> 
> 赞同：0
> 
> 时间：2012-08-09T20:06:40.773
> 
> 标签：apache, rewrite

如果有任何喜欢的格式

```
http://localhost/index.php/bla... 
```

我想把它转换成`http://localhost/er/index.php/bla...`

我正在尝试以下操作，但它似乎无限期地循环 URL

```
RewriteRule  ^localhost/index/php/(.*)$  localhost/er/index.php/$1  [R=301,L]
RedirectMatch  301  ^/localhost/index.php/(.*)$  localhost/er/index.php/$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:54:44.737

你有两个不同的事情发生，一个`RewriteRule`（mod_rewrite）和一个`RedirectMatch`（mod_alias）。您只需要一个，但它们都不能与主机名 (localhost) 匹配。如果这仅限于“localhost”主机，那么您需要这样做：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} localhost$ [NC]
RewriteRule ^/?index\.php/(.*)$ /er/index.php/$1 [R=301,L] 
```

否则，您可以坚持使用 mod_alias：

```
Redirect 301 /index.php/ /er/index.php/ 
```

之后的所有`/index.php/`内容都会自动附加。

# python - Python字典键错误..列表中的字典大乱

> ID：11891146
> 
> 赞同：0
> 
> 时间：2012-08-09T20:07:09.607
> 
> 标签：python, debugging

这有点令人费解，所以如果我错过了一个简单的构造，请告诉我:)

我正在分析一些匹配实验的结果。在游戏结束时，我希望能够查询诸如之类的东西`experiments[0]["cat"]["cat"]`，这会产生“cat”与“cat”匹配的次数。`experiments[0]["cat"]["dog"]`相反，当第一个查询是一只猫并且匹配尝试是一只狗时，我可以这样做。

以下是我填充此结构的代码：

```
 # initializing the first layer, a list of dictionaries.
    experiments = []
    for assignment in assignments:
        match_sums = {}
        experiments.append(match_sums)

for i in xrange(len(classes)):
        for experiment in xrange(len(experiments)):
            # experiments[experiment][classes[i]] should hold a dictionary,
            # where the keys are the things that were matched against classes[i], 
            # and the value is the number of times this occurred.
            experiments[experiment][classes[i]] = collections.defaultdict(dict)

            # matches[experiment][i] is an integer for what the i'th match was in an experiment.
            # classes[j] for some integer j is the string name of the i'th match. could be "dog" or "cat".
            experiments[experiment][classes[i]][classes[matches[experiment][i]]] += 1
            total_class_sums[classes[i]] = total_class_sums.get(classes[i], 0) + 1

    print experiments[0]["cat"]["cat"]
    exit() 
```

很明显，这有点令人费解。最后一场比赛我得到的值为“1”，而不是完整的字典`experiments[0]["cat"]`。我做错了吗？这里的错误可能是什么？抱歉，您的疯狂并感谢您提供任何可能的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:40:11.890

两点：

*   字典键可以是元组；和
*   如果您要计算事物，请使用[`collections.Counter`](http://docs.python.org/dev/library/collections.html#collections.Counter). （您可以使用`defaultdict(int)`，但`Counter`更有用。）

所以，而不是

```
experiments[experiment][classes[i]][classes[matches[experiment][i]]] += 1 
```

写

```
experiments = Counter()
...
experiments[experiment, classes[i], classes[matches[experiment][i]]] += 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:58:45.093

我只是想猜测你的需求，所以我试图改变你的尺寸顺序。

```
for className, classIdx in enumerate(classes):
    experiment = collections.defaultdict(list)
    experiments[className] = experiment
    for assignment,assignmentIdx in enumerate(assignments):
        counterpart = classes[matches[assignmentIdx][classIdx]]
        experiment[counterpart].append((assignment,assignmentIdx))

print(len(experiments["cat"]["cat"]), len(experiments["cat"])) 
```

# javascript - 在 html 文件中调用 Javascript 文件

> ID：11891148
> 
> 赞同：0
> 
> 时间：2012-08-09T20:07:11.787
> 
> 标签：javascript, html, canvas, input

我有一个球在画布上弹跳的代码我在 HTML 中创建 hte 画布，球代码在一个 .js 文件中。当我运行 html 文件时，球代码不起作用，但是当我将球代码放在 html 文件中的标签之间时，它确实起作用。任何人都看到它在 .js 文件中不起作用的原因是什么？

这是 HTML 文件：

```
<html> 
    <header> 
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
        <title>Bouncing Ball Paint</title> 
        <body>
            Welcome to Paint Brush! 
            Before you begin: Please type in a color, width, and speed. Now sit back and enjoy the show.</body>
        <body>
        <style> 
        #ball{background:#CCC;} 
        </style> 
    </header> 
    <body style="background-color:#FFDEAD;"> 
        Ball Width: <input type="text" id="lineWidth"></input> 
        Ball Color: <input type="text" id="lineColor"></input> 
        Ball Speed X:<input type="text" id="speedx"></input> 
        <input type="button" value="Clear" onClick="window.location.href=window.location.href"> 
        <input type="button" value="Green" id="green" onclick= "DGN.GreenRect()" />
        <div id="container"> 

        <canvas id="ball" width="1000" height="700"></canvas> 

        <script type="text/javascript" 

        src="balledit3.js"> </script>

    </body>
</html> 
```

这是我试图在 .js 文件中包含但将在 html 中的标签之间工作的代码：

```
var x=50; 
var y=300; 
var dx=10; 
var dy=10; 

function draw(){ 
    var canvas = document.getElementById('ball'); 
    context= ball.getContext('2d'); 
    context.clearRect(0,0,canvas.width,canvas.height); 
    lineColor = (document.getElementById('lineColor').value.length>0)?document.getElementById('lineColor').value:'#0000FF'; 
    lineWidth = (document.getElementById('lineWidth').value.length>0)?document.getElementById('lineWidth').value:'10'; 
    context.beginPath(); 
    context.fillStyle=lineColor; 
    context.arc(x,y,lineWidth,20,Math.PI*2,true); 
    context.closePath(); 
    if (lineWidth){ 
        context.lineWidth=lineWidth; 
    } 
    if (lineColor){ 
        context.strokeStyle=lineColor; 
        context.stroke(); 
    } 
    context.fill(); 
    if( x<0 || x>1000) 
    dx=-dx; 
    if( y<0 || y>700) 
    dy=-dy; 
    x+=dx; 
    y+=dy; 
    fr = (document.getElementById('speedx').value>0)?document.getElementById('speedx').value:50; 
    setTimeout(draw,fr);   
} 
draw(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:26:45.867

清理你的 HTML，它似乎工作

```
<!DOCTYPE html>

<html>
    <head>
        <title>Bouncing Ball Paint</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style>#ball{background:#CCC;}</style> 
    </head>
    <body style="background-color:#FFDEAD;">
        <p>Welcome to Paint Brush!</p>
        <p>Before you begin: Please type in a color, width, and speed. Now sit back and enjoy the show.</p>
        <form id="container">
            <fieldset>
                <label>Ball Width:</label><input type="text" id="lineWidth" />
                <br />
                <label>Ball Color:</label><input type="text" id="lineColor" />
                <br />
                <label>Ball Speed X:<input type="text" id="speedx" />
            </fieldset>
            <input type="reset" value="Clear" />
            <input type="button" value="Green" id="green" onclick="javascript:DGN.GreenRect();" />
            <fieldset>
                <canvas id="ball" width="1000" height="700">This text is displayed if your browser does not support HTML5 Canvas.</canvas>
            </fieldset>
        </form>
        <script type="text/javascript" src="draw.js"></script>
    </body> 
</html> 
```

# oracle - 在文本中查找 Unix 时间戳并替换为 sql

> ID：11891155
> 
> 赞同：2
> 
> 时间：2012-08-09T20:07:32.720
> 
> 标签：oracle, datetime, pattern-matching, unix-timestamp

我有大文本字符串，其中散布着 10 位 unix 日期戳。我正在尝试编写一个查询来搜索这些 10 位数字的文本字符串，并将它们替换为常规日期格式。我的转换语句为：

`TRUNC(DATE '1970-01-01' + [timestamp]/86400)`，当我输入一个值时效果很好。

示例：从对偶中选择 TRUNC(DATE '1970-01-01' + 1022089483/86400)；= 2002 年 5 月 22 日

但是我很难找到合适的方法来查找和替换。另外，我不能使用正则表达式。所以，这是我的理论 SQL：

```
replace([column],'[sql to find 10-digit number]'
          ,TRUNC(DATE '1970-01-01' + [10-digit number]/86400)) 
```

这是一些示例文本：

> 1022089483 胡说八道 1022094450 胡说八道 胡说八道 1022095218 胡说八道

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T17:53:12.583

只是为了好玩，我想我会努力尝试。一个函数使用 查找 10 位数字的开头`instr`，然后是一个重复调用该函数并用格式化日期替换找到的任何函数。完全不确定这是一种明智的方法，或者以任何方式有效......

```
create or replace function epoch_offset(p_value in varchar2, p_start number)
return number is
    l_value varchar2(4000);
    offset number := 0;
    prev_offset number := 0;
    digit_count number := 0;
    epoch_start number := 0;
    pos number := p_start;
begin
    -- replace all digits with a single one, to make searching with instr
    -- simpler
    l_value := translate(p_value, '1234567890', '9999999999');

    while true loop
        -- find the next digit, starting as pos; first time through, pos
        -- will be the p_start we were given, then it tracks where we have
        -- got to
        offset := instr(l_value, '9', pos);

        if offset = 0 then
            -- we didn't find a digit, check if we already had a 10-digit
            -- number and have just reached the end
            if digit_count = 10 then -- and pos > length(p_value) then
                -- original value ends with a timestamp; so we have a 10-digit
                -- number
                exit;
            else
                -- no more digits, and last set we saw was short than 10; so
                -- l_value does not contain any 10-digit numbers (at least,
                -- after p_start)
                epoch_start := 0;
                exit;
            end if;
        end if;

        if prev_offset > 0 and offset != prev_offset + 1 then
            -- we've found a digit, but there's a gap since the last one
            if digit_count = 10 then
                -- the gap denotes the end of a 10-digit number, which is
                -- what we're looking for
                exit;
            end if;

            -- we've potentially started a new 10-digit number, so reset
            epoch_start := offset;
            digit_count := 0;
            prev_offset := 0;
        else
            -- we've found a sequential digit
            prev_offset := offset;
        end if;

        -- mark where we are
        if digit_count = 0 then
            -- start of a potential digit-sequence, make a note
            epoch_start := offset;
        end if;
        digit_count := digit_count + 1;
        pos := offset + 1;
    end loop;

    return epoch_start;
end epoch_offset;
/

create or replace function epoch_replace(p_value in varchar2,
    p_start in number default 1)
return varchar2 as
    l_pos number;
    l_time number;
    l_value varchar2(4000);
begin
    -- for this iteration, find the start of a 10-digit number, starting
    -- from p_start (1 on first iteration, by default)
    l_pos := epoch_offset(p_value, p_start);
    if l_pos > 0 then
        -- found a 10-digit number; call this recursively before modifying -
        -- this means we'll replace numbers with dates working from the end,
        -- so the positions don't need to be adjusted for the difference
        -- between the number and date lengths
        l_value := epoch_replace(p_value, l_pos + 10);
        -- get the 10-digit number...
        l_time := to_number(substr(l_value, l_pos, 10));
        -- ... and convert it to a date, with the rest of the original value
        -- around it
        return substr(l_value, 1, l_pos - 1)
            || to_char(trunc(DATE '1970-01-01' + l_time/86400), 'DD-mon-RR')
            || substr(l_value, l_pos + 10);
    else
        -- didn't find a 10-digit number, so return what we started with
        return p_value;
    end if;
end epoch_replace;
/ 
```

它可能会遇到其他边缘情况，但是用一些明显的情况来解决它：

```
with tmp_tab as (
    select '1022089483 blah blah blah blah blah 1022094450 blah blah blah blah blah blah 1022095218 blah blah blah blah' as value from dual
    union all
    select 'blah 1022089483 blah 1022094450' from dual
    union all
    select 'blah 1022089483 98765 1022094450 1234' from dual
    union all
    select 'blah 1022089483 98765 1022094450 1022095218 1234 123456789 12345678901 123' from dual
)
select epoch_replace(value) from tmp_tab;

EPOCH_REPLACE(VALUE)
------------------------------------------------------------------------------------------------------------------------
22-may-02 blah blah blah blah blah 22-may-02 blah blah blah blah blah blah 22-may-02 blah blah blah blah
blah 22-may-02 blah 22-may-02
blah 22-may-02 98765 22-may-02 1234
blah 22-may-02 98765 22-may-02 22-may-02 1234 123456789 12345678901 123 
```

# java - 使用 Hibernate Criteria 的复杂表达式（如 "isnull(retryCount,0)<3" ）

> ID：11891156
> 
> 赞同：0
> 
> 时间：2012-08-09T20:07:43.253
> 
> 标签：java, hibernate, criteria-api

我有一些查询，例如

```
SELECT * FROM JobTable 
WHERE isnull(retryCount,0)<3 
AND updatedOn < dateadd(MI,-5,getdate()) 
```

如何将其转换为 Criteria api 调用？使用标准的要点是如果字段名称将被更改，则允许重构。

对于简单的事情，这看起来像

```
criteria.add(Restrictions.lt(JobTable.RETRYCOUNT_FULL, 3)); 
```

但是我的情况呢？

```
criteria.add(Restrictions.lt(JobTable.UPDATEON_FULL, <???>);
criteria.add(Restrictions.lt( <someexpression(JobTable.RETRYCOUNT_FULL)> , 3)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T08:21:11.027

我不确定正确的名称，但 hibernate 有一些映射到方言函数的标准函数。它们可以像这样使用

```
Projections.sqlFunction("dateadd", Projections.property("property"), Hibernate.dateTime); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:33:19.323

Hibernate Criteria API 具有`Restrictions.sqlRestriction`功能。在这些函数中，您可以按照自己喜欢的方式编写 SQL，而 Hibernate 会将其嵌入到您的 SQL 中。

```
criteria.add(Restrictions.sqlRestriction("isnull({alias}" + JobTable.RETRYCOUNT_FULL + ", 0) < ?", 3, new IntegerType()); 
```

# bash - 重击序列 00 01 ... 10

> ID：11891162
> 
> 赞同：35
> 
> 时间：2012-08-09T20:08:03.940
> 
> 标签：bash

在 bash 中，与

```
$ echo {1..10}
1 2 3 4 5 6 7 8 9 10 
```

我可以得到一个数字序列，但在某些情况下我需要

```
01 02 03 ... 10 
```

我怎么能得到这个？

我怎么能得到？

```
001 002 ... 010 011 .. 100 
```

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-08-09T20:11:11.800

这将在已`coreutils`安装的机器上的任何 shell 中工作（感谢评论者纠正我）：

```
seq -w 1 10 
```

和

```
seq -w 1 100 
```

解释：

*   该选项`-w`将：

> 根据需要用零填充来均衡所有数字的宽度。

*   `seq [-w] [-f format] [-s string] [-t string] [first [incr]] last`

> 打印一系列数字，每行一个（默认），从第一个（默认 1）到尽可能接近最后一个，增量为 incr（默认 1）。当 first 大于 last 时，默认 incr 为 -1

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-03-09T09:00:37.087

使用带`-f`参数的 seq 命令，尝试：

`seq -f "%02g" 0 10`

结果：00 01 02 03 04 05 06 07 08 09 10

`seq -f "%03g" 0 10`

结果：000 001 002 003 004 005 006 007 008 009 010

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-08-09T20:09:54.950

```
printf "%02d " {1..10} ; echo 
```

输出：

```
01 02 03 04 05 06 07 08 09 10 
```

相似地：

```
printf "%03d " {1..100} ; echo 
```

* * *

在最新版本的 bash 中，只需：

```
echo {01..10} 
```

和：

```
echo {001..100} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-09T20:22:47.557

```
$ printf "%02d " {0..10}; echo
00 01 02 03 04 05 06 07 08 09 10 
$ printf "%03d " {0..100}; echo
000 001 002 003 004 005 006 007 008 009 010 011 012 013 014 015 016 017 018 019 020 021 022 023 024 025 026 027 028 029 030 031 032 033 034 035 036 037 038 039 040 041 042 043 044 045 046 047 048 049 050 051 052 053 054 055 056 057 058 059 060 061 062 063 064 065 066 067 068 069 070 071 072 073 074 075 076 077 078 079 080 081 082 083 084 085 086 087 088 089 090 091 092 093 094 095 096 097 098 099 100 
```

只需改变格式字符串中的字段宽度（在本例中为 2 和 3），当然还有大括号扩展范围。只是为了`echo`美观，因为格式字符串本身不包含换行符。

`printf`是内置的 shell，但您可能还安装了 coreutils 的版本，可以就地使用。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-09T20:22:51.063

仅限awk：

```
awk 'BEGIN { for (i=0; i<10; i++) printf("%02d ", i) }' 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-09T20:09:50.830

以下将在 bash 中工作

```
echo {01..10} 
```

**编辑看到我周围的答案我只是想添加这个，如果我们谈论的命令可以在任何终端下工作

```
yes | head -n 100 | awk '{printf( "%03d ", NR )}'   ##for 001...100 
```

或者

```
yes | head -n 10 | awk '{printf( "%03d ", NR )}'    ##for 01..10 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-08-09T20:15:09.657

有很多方法可以做到这一点！我个人最喜欢的是：

```
yes | grep y | sed 100q | awk '{printf( "%03d ", NR )}'; echo 
```

显然，the`sed`和 the`grep`都不是必需的（这`grep`要微不足道，因为如果您省略 the ，则`sed`需要更改`awk`），但它们有助于解决方案的整体满意度！final`echo`也不是必需的，但是有一个尾随换行符总是很好的。

另一个不错的选择是：

```
yes | nl -ba | tr ' ' 0 | sed 100q | cut -b 4-6 
```

或者（不那么荒谬）：

```
yes '' | sed ${top-100}q | nl -ba -w ${width-3} -n rz 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-10-22T15:50:12.510

```
echo 0{0..9} 
```

您可以获得：00 01 02 03 04 05 06 07 08 09

```
echo 0{0..9} 1{0..9} 
```

您可以获得：00 01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19

```
echo 00{0..9} 0{10..99} 
```

你可以得到 001 .. 099

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-11-12T09:26:41.370

正如favouretti所说，`seq`是你的朋友。

但有一个警告：

`seq -w`使用第二个参数设置它将使用的格式。

因此，该命令`seq -w 1 9`将打印序列`1 2 3 4 5 6 7 8 9`

要打印序列 01 .. 09，您需要执行以下操作：

`seq -w 1 09`

或者为了清楚起见，在两端使用相同的格式，例如：

`seq -w 000 010` 适用于 001 002 003 ... 010 系列

您还可以使用一个也可以反向工作的 step 参数：

`seq -w 10 -1 01' for 10,09,08...01 or`seq -w 01 2 10` 用于 01,03,05,07,09

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-09-23T12:28:33.890

```
for i in {01..99}; do
  echo $i
done 
```

将返回 ：

```
01
02
03
04
05
06
07
08
09
10
... 
```

将 01 替换为 001 并将 99 替换为 999 或 100 也会达到您的预期。

# facebook-opengraph - Opengraph 聚合预览不起作用

> ID：11891167
> 
> 赞同：1
> 
> 时间：2012-08-09T20:08:18.520
> 
> 标签：facebook-opengraph, preview

我已经苦苦挣扎了 2 天，试图让应用程序仪表板中的应用程序预览来处理示例数据。我已经成功创建了一个对象（级别）和一个动作（运行）。我已经成功配置了 2 个不同的聚合（我最喜欢的级别和我最喜欢的级别）。我已经为聚合创建并调试了示例对象和操作……但我仍然只看到聚合的“通用”预览。我在 Chrome 和 Safari 中都试过了。

我到底做错了什么？

这就是我所看到的：[https ://dl.dropbox.com/u/35391195/OG_testing/aggregation_preview.png](https://dl.dropbox.com/u/35391195/OG_testing/aggregation_preview.png)

# c# - 如何使用 MonoTouch.Dialog 的 ActivityElement？

> ID：11891168
> 
> 赞同：3
> 
> 时间：2012-08-09T20:08:19.690
> 
> 标签：c#, xamarin.ios, monotouch.dialog

我可能在这里遗漏了一些东西，但是这段代码：

```
this.oSectionDRs = new Section()
{
    new ActivityElement()
    {
        Caption = Locale.GetLocale("Settings_Loading"), 
        Animating = true
    }
};

// To begin with just show a loading indicator.
this.Root = new RootElement (Locale.GetLocale("Settings_Select"))
{
    this.oSectionDRs
}; 
```

不显示任何动画的东西。它只显示标签。如何获得动画明星？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T20:01:07.973

使用此代码：

```
var root = new RootElement("foo");
      root.Add (new Section("foo", "bar") {
      new ActivityElement()
      {
        Caption = "foo",
        Animating = true
      }
    });

    var dvc = new DialogViewController(root, false);

    window.RootViewController = dvc; 
```

我得到了标题和活动滚动条的东西。不确定它对你有帮助！我只是在使用内置的 MT.D。

# ruby-on-rails - 使用移动设备中的 Ajax 从 RAILS 3 服务器调用 JSON

> ID：11891171
> 
> 赞同：0
> 
> 时间：2012-08-09T20:08:28.370
> 
> 标签：ruby-on-rails, ajax, http, mobile

我正在尝试从一个常见的 html 文件（要在移动设备上加载）向我的服务器发送一个 ajax 请求，并且在这里遇到了一些问题。

如果我使用来自 WizTools 的 RestClient，我可以轻松地创建一个带有 body 的 json POST 命令`{"email":"myemail", "password":"mypassword"}`，并设置标题`"Content-type":"application/json"`和`"Accept":"application/json"`.

但是当我添加 contentType 时，从浏览器中，它只是发送一个 OPTIONS 方法而不是 POST，并且服务器正在等待一个 POST。如果我取出 contentType 标签，则请求通过 POST 正常，但服务器不会将其识别为 JSON，因此会阻止请求。

为什么会这样？我该如何解决这个问题并列出用户的数据？

```
<html>
<head>
    <script src="jquery-1.7.2.min.js"></script>
    <script src="jquery.mobile-1.2.0-alpha.1.min.js"></script>
    <script>

function runAjax() {
var url_p = "https://myserver/list";
var emailVal = "email@email.com"
var passwordVal = "mypwd"

  $.ajax({
type: 'POST', 
url: url_p,
dataType: "application/json",
contentType: "application/json; charset=utf-8",

data: { "email": emailVal, "password": passwordVal },
success: function (data, textStatus, jqXHR) {
                                            $("#result").html(data);
        },
error: function(jqXHR,error, errorThrown) {  
               if(jqXHR.status&&jqXHR.status==400){
                    alert(jqXHR.responseText); 
               }else{
                   alert("Something went wrong");
               }
          }, 
dataType: "json"
});
}

function resetValue(){
        $("#result").html("");
    }

</script>

</head>
<body>
    <button onclick="runAjax()">Post Ajax call</button>
    <button onclick="resetValue()">Reset value</button>
    <p>Result</p>
    <p id="result"></p>
</body>
</html> 
```

谢谢

**编辑**

这似乎是 Ajax 的跨域问题。从那以后，我尝试使用 jsonp 作为数据类型，但是 HTTP 使用 GET 请求而不是 POST ......

我已经看到，在 2010 年不可能跨域使用 POST 和 jsonp ......我想知道现在是不是......

**编辑 2**

我最终使用了这个 ajax 代码（归功于 Pedro Carmona）：

```
<html>
<head>
    <script src="jquery-1.7.2.min.js"></script>
    <script src="jquery.mobile-1.2.0-alpha.1.min.js"></script>
    <script>

    function rpc_call(){
        var http = new XMLHttpRequest();
        var url = "https://yourserver/list";
        var params = "email=Useremail&password=pwd";

        http.open("POST", url, true);
        http.setRequestHeader("Accept", "application/json");
        http.setRequestHeader("Content-type","application/x-www-form-urlencoded");

        http.onreadystatechange = function() {//Call a function when the state changes.
            if(http.readyState == 4 && http.status == 200) {
                $("#resposta").html(http.responseText);
            }
        }
        http.send(params);

    }
    function apagaConteudo(){
        $("#resposta").html("");
    }
    </script>
</head>
<body>
    <button onclick="rpc_call()">Post Ajax call</button>
    <button onclick="apagaConteudo()">Apagar conteudo</button>
    <p>Resposta</p>
    <p id="resposta">____Cena______</p>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:49:33.787

这是一个苛刻的问题，但现在终于用 CORS 解决了。

感谢 Tom 的[帖子](http://www.tsheffler.com/blog/?p=428)，Forrest Zeisler 的评论，Sam 的[帖子](http://codeodor.com/index.cfm/2011/7/26/Responding-to-the-OPTIONS-HTTP-method-request-in-Rails-Getting-around-the-Same-Origin-Policy/3387)

将此行添加到您的路线文件

```
match '/list', to: 'things#options', via: :options 
```

这给你的“东西”控制器：

```
def options

    render text:""

end 
```

和

将这些行添加到 application_controller.rb 文件

```
...
before_filter :cors_preflight_check
after_filter :cors_set_access_control_headers
...
def cors_set_access_control_headers
    headers['Access-Control-Allow-Origin'] = '*'
    headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
    headers['Access-Control-Max-Age'] = "1728000"
    headers['Access-Control-Allow-Headers'] = 'content-type, accept'

  end

  def cors_preflight_check
    if request.method == :options
      headers['Access-Control-Allow-Origin'] = '*'
      headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
      headers['Access-Control-Allow-Headers'] = 'X-Requested-With, X-Prototype-Version, X-CSRF-Token'
      headers['Access-Control-Max-Age'] = '1728000'
      render :text => '', :content_type => 'text/plain'
    end
  end 
```

# orbeon - 当字段为十进制/双精度时，为什么 8 != 8.000？

> ID：11891176
> 
> 赞同：0
> 
> 时间：2012-08-09T20:08:50.983
> 
> 标签：orbeon, xforms

我的 XForm 中有几个控件，我们只称它们为 x 和 y。

x 的值为 8；y 的值为 8.000 我将约束设置为：*$x = $y*

显然，XForms 不认为这些值是相等的，无论数据类型是双精度还是十进制。

一种解决方案是：*$x - $y = 0*

但是 XForms 会有舍入错误吗？所以现在它需要是这样的：*abs($x - $y) < 0.00001*

有绝对值函数吗？

对于应该很简单的事情来说，这似乎很混乱。有没有更简单的方法让 XForm 考虑 8 = 8.000？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:11:50.473

我不知道那种语言，但在伪代码中：

设置一些非常小的 $epsilon := .00001

然后检查 $x - $y < $epsilon

这显然不会捕获所有舍入错误，但只要您的应用程序没有做任何太重要的事情（如果是的话，您无论如何都不应该使用浮点数）这应该认为 8 和 8.000 相同。

编辑：我注意到你已经想出了这个答案，所以忽略这个:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:19:56.603

您需要先转换该值，然后再进行比较。

```
<xforms:input
  ref="foo"
  xxforms:format="format-number(xs:integer(.), '###,##0')"/> 
```

有关更多信息，请参阅[此链接](http://wiki.orbeon.com/forms/doc/developer-guide/xforms-other-extensions#TOC-The-xxforms%3aformat-attribute)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T05:32:47.220

number() 解决了这个问题，也不需要定义数据类型。请参阅下面的简单代码。

```
<xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml"
    xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
    xmlns:xforms="http://www.w3.org/2002/xforms">

    <xhtml:head>
      <xhtml:title>Xforms</xhtml:title>

      <xforms:model>

        <xforms:instance id="main-instance">
            <form>
                <nodes>
                    <x>8</x>
                    <y>8.00</y>
                </nodes>
            </form>
        </xforms:instance>

        <xforms:bind id="x" nodeset="instance('main-instance')/nodes/x" />

        <xforms:bind id="y" nodeset="instance('main-instance')/nodes/y" />

      </xforms:model>

    </xhtml:head>

    <xhtml:body>

        <table>
            <tr>
                <td>
                    X is 
                    <xforms:output bind="x">
                        <xforms:alert>Invalid</xforms:alert>
                    </xforms:output>
                </td>
            </tr>
            <tr>
                <td>
                    Y is
                    <xforms:output bind="y">
                        <xforms:alert>Invalid</xforms:alert>
                    </xforms:output>
                </td>
            </tr>
            <tr>
                <td>
                    <strong>X = Y ? </strong>
                    <xforms:output value="instance('main-instance')/nodes/x = instance('main-instance')/nodes/y">
                        <xforms:alert>Invalid</xforms:alert>
                    </xforms:output>
                </td>
            </tr>
            <tr>
                <td>
                    <strong>(using number function) X = Y ? </strong>
                    <xforms:output value="number(instance('main-instance')/nodes/x) = number(instance('main-instance')/nodes/y)">
                        <xforms:alert>Invalid</xforms:alert>
                    </xforms:output>
                </td>
            </tr>
        </table>

    </xhtml:body>

</xhtml:html> 
```

但是，当我们将数据类型作为 xforms:decimal 给两个节点并且不使用 number 函数时，它将不起作用（条件返回 false）。

# asp.net - ASP.net 将数据库型号放入数组中

> ID：11891177
> 
> 赞同：0
> 
> 时间：2012-08-09T20:09:00.397
> 
> 标签：asp.net, mysql, arrays, gridview

嘿，我想弄清楚如何在循环时将我的一些型号从我的数据库添加到数组中。

这是我的代码：

```
objCmd = New MySqlCommand(strSQL, objConn)
dtReader = objCmd.ExecuteReader()

If dtReader.HasRows() Then
   grdViewItems.DataSource = dtReader
   grdViewItems.DataBind()

   Dim arrayOfItems As String() = New String() {}

   While dtReader.Read()
        arrayOfItems(intX) = dtReader.GetString("model_number")
        'arrayItems(intX) = dtReader.GetString("model_number")
        intX += 1
   End While

   'Session.Add("arrayOfItems", arrayItems)
   Session("arrayOfItems") = arrayOfItems

   dtReader.Close()
   dtReader = Nothing
   objConn.Close()
   objConn = Nothing
End If 
```

问题是它永远不会用值填充数组（尽管这些值存在于gridview中，因为它跳过了while循环中值的读取。

我在这里做错了什么？

**完整代码**

```
Dim intX As Integer = 0

    objConn = New MySqlConnection(product.strConnString)
    objConn.Open()

    strSQL = "SELECT prod.id, PP.model_number, description, price, price_new, price_direct, price_builder " & _
             "FROM product as prod " & _
                "INNER JOIN product_price as PP ON PP.product_id = prod.type " & _
             "WHERE prod.id = " & pageID & ";"

    Try
        objCmd = New MySqlCommand(strSQL, objConn)
        dtReader = objCmd.ExecuteReader()

        If dtReader.HasRows() Then
            grdViewItems.DataSource = dtReader
            grdViewItems.DataBind()

            Dim arrayOfItems As New List(Of String)()

            For Each row As GridViewRow In grdViewItems.Rows
                arrayOfItems(intX) = row.Cells(0).Text.ToString
                intX = intX + 1
            Next

            MsgBox(arrayOfItems(0))

            'Session.Add("arrayOfItems", arrayItems)
            Session("arrayOfItems") = arrayOfItems

            dtReader.Close()
            dtReader = Nothing
            objConn.Close()
            objConn = Nothing
        End If
    Catch ex As Exception
        MsgBox("LoadProductItems: " & ex.Message)
    End Try 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T13:23:20.917

看起来问题出在你的循环中。替换以下代码

```
Do While dtReader.Read
   arrayOfItems(intX) = dtReader.GetString("model_number")
   intX += 1
Loop

'with this code
While dtReader.Read()
     arrayOfItems(intX) = dtReader.GetString("model_number")
     intX += 1
End While 
```

**更新的答案：** 当您将数据分配给 gridview 时，还将数据保存在这样的数据表中

```
Dim dt As DataTable = New DataTable
dt = dtReader

`Then get the data from the table
Dim i As Integer = 0
Do While (i < dt.Rows.Count)
dt.Rows(i)("COlumnName").ToString
i = (i + 1)
Loop 
```

**再次更新答案：** 从 gridview 读取数据

```
For Each row As GridViewRow In grdViewItems.Rows
   arrayOfItems(intX) = row.Cells(0).Text.ToString ` in cell specify the index of the model_number column
   intX = intX + 1
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:32:19.310

Instead of array, I would recommend using [List of int or string](http://www.dotnetperls.com/list)

# css - Chrome 和 Safari 忽略了我的 -webkit-transition-

> ID：11891181
> 
> 赞同：1
> 
> 时间：2012-08-09T20:09:23.203
> 
> 标签：css

我一直在尝试让 CSS3 过渡效果在 Chrome 和 Safari 中工作，但没有运气。正如您在下面的代码示例中看到的那样，我使用`:target`伪类选择器来触发关键帧动画，在这种情况下，它将 div 从一个位置移动到另一个位置。一旦您单击另一个链接，div 就会消失（它会跳回原来的位置）。

为了防止这种瞬间跳跃，我在 div 的原始状态中添加了过渡效果。通过这样做，转换将启动，并且 div 将“滑”回顶部，至少在您使用 Firefox 或 Opera 时是这样。Chrome 和 Safari 似乎忽略了过渡效果，我不知道为什么？

我以前从来没有像这样结合过过渡和动画，所以我可能遗漏了什么？

关于如何使其在 Chrome 和 Safari（最好使用 CSS3）中工作的任何想法？

我正在使用 Mac OS X、Chrome 21、Firefox 14.0.1 和 Opera 12.01

这是一个[jsFiddle](http://jsfiddle.net/sRaDK/4/)，这是 jsFiddle 示例中使用的代码：

html

```
<a href="#id1">One</a>
<a href="#id2">Two</a>

<div id="id1">
Hello hello
</div> 
```

CSS

```
#id1 {
    position: absolute;
    top: -100px;
    left: 100px;
    width: 100px;
    height: 100px;

    /* Not working */
    -webkit-transition-timing-function: linear;
    -webkit-transition-duration: 0.5s;

    /* Working */
    -moz-transition-timing-function: linear;
    -moz-transition-duration: 0.5s;

    /* Working */
    -o-transition-timing-function: linear;
    -o-transition-duration: 0.5s;    
}

#id1:target {
     -webkit-animation: down 0.5s ease-in forwards;
        -moz-animation: down 0.5s ease-in forwards;
          -o-animation: down 0.5s ease-in forwards;
}

@-webkit-keyframes down {
      0%   { top: -100px; left: 100px; }
      100% { top: 200px; left: 100px;  }
}

@-moz-keyframes down {
      0%   { top: -100px; left: 100px; }
      100% { top: 200px; left: 100px;  }
}

@-o-keyframes down {
      0%   { top: -100px; left: 100px; }
      100% { top: 200px; left: 100px;  }
} 
```

​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:23:16.250

看起来好像动画取消了过渡。可能是因为您没有明确设置`left`，`top`所以过渡不知道从哪里开始。

我已经[更新了你的小提琴](http://jsfiddle.net/sRaDK/5/)，向你展示你可以不用动画。

如果您的目标是在页面加载时发生动画，只需重新添加关键帧。

您还可以通过使用速记描述并省略默认值来节省大量空间，例如`forwards`

```
#id1 {
    position: absolute;
    top: -100px;
    left: 100px;
    width: 100px;
    height: 100px;

    -webkit-transition: 0.5s linear;
       -moz-transition: 0.5s linear;
         -o-transition: 0.5s linear;
}

#id1:target {
    top: 200px;
    left: 100px;
     -webkit-animation: down 0.5s ease-in;
        -moz-animation: down 0.5s ease-in;
          -o-animation: down 0.5s ease-in;
}

@-webkit-keyframes down {
      0%   { top: -100px;}
      100% { top: 200px;}
}

@-moz-keyframes down {
      0%   { top: -100px;}
      100% { top: 200px;}
}

@-o-keyframes down {
      0%   { top: -100px;}
      100% { top: 200px;}
} 
```

如果您需要超级平滑的过渡，请考虑使用 2d 变换。他们使用亚像素精度，你*会*注意到（至少在 webkit 中）效果很慢。[看到这个小短片](http://dabblet.com/gist/2479228)。

# c++ - C++ 中的私有虚函数是否有通用的命名约定？

> ID：11891183
> 
> 赞同：5
> 
> 时间：2012-08-09T20:09:32.267
> 
> 标签：c++, coding-style, naming-conventions

C++ 中的私有虚函数是否有通用的命名约定？我见过诸如`do_something(...)`,`something_vfunc(...)`等约定。C++ 项目中通常使用哪种约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:20:57.727

标准中使用的约定（例如在许多约定中[`std::numpunct`](http://en.cppreference.com/w/cpp/locale/numpunct)）是`do_something`方法`protected` `virtual`，并且`something`是调用它的`public`非方法。`virtual`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:23:43.670

我使用前缀`dyn_`。所以你可能会看到：

```
class t_type {
public:
    /* ... */
    void method() {
        this->dyn_method();
    }

private:
    virtual void dyn_method() const = 0;
};

class t_subtype : public t_type {
public:
    /* ... */
private:
    virtual void dyn_method() const {
        ...
    }
}; 
```

至于一个常见的 - 我不确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:27:06.777

我敢肯定，有很多约定。我倾向于使用尾随`Impl`或`_impl`取决于方法名称其余部分的约定。所以根据需要`ComputeFoo`调用`ComputeFooImpl`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T21:39:06.970

不同的团队和人员使用不同的标准。我个人是不要添加任何特殊的前缀或后缀。名称应该代表这个函数的作用。IDE 将帮助您查看它是私有的还是受保护的、虚拟的还是非虚拟的。是的，将虚函数设为私有或受保护是一个不错的选择，但如果你添加新函数只是为了遵循这个原则——三思而后行。

# c++ - C++ 模板 - 简单点类

> ID：11891192
> 
> 赞同：0
> 
> 时间：2012-08-09T20:09:55.210
> 
> 标签：c++, templates

我正在尝试使用模板（学习）实现一个简单的多维点类。我需要两个特化 Point2D 和 Point3D - 这是我到目前为止所获得的，以允许构造函数像 Point p (1, 2) 一样直接初始化 Point。尽管这段代码可以编译并且运行良好，但我不喜欢的是专业化中的代码重复部分——我一定是做错了什么。

我是 C++ / 模板的新手 - 任何帮助表示赞赏。

```
#ifndef POINT_H_
#define POINT_H_

template< typename T, int Dimensions = 2 >
class Point
{
public:
    typedef typename T value_type;

    Point() { std::fill(elements_, elements_+Dimensions, 0); }
    Point(const Point<T, Dimensions>& rhs) : elements_(rhs.elements_) {}
    ~Point() {}

    Point & operator=(const Point<T, Dimensions>& rhs) { return *this; }

    const Point operator+(const Point<T, Dimensions>& p)
    {
        Point<T, Dimensions> ret;

        for(int i = 0; i < Dimensions; i++)
        {
            ret[i] += elements_[i] + p[i];
        }

        return ret;
    }

    Point & operator+=( const Point<T, Dimensions>& p)
    {
        for(int i = 0; i < Dimensions; i++)
        {
            elements_[i] += p[i];
        }

        return *this;
    }

    Point & operator-=( const Point<T, Dimensions> & p)
    {
        for(int i = 0; i < Dimensions; i++)
        {
            elements_[i] -= p[i];
        }

        return *this;
    }

    T & operator[](const size_t index)
    {
        return elements_[index];
    }

private:
    T elements_[Dimensions];
};

template<typename T>
class Point< T, 2 >
{
public:
    Point(const T x, const T y)
    {
        elements_[0] = x;
        elements_[1] = y;
    }

    typedef typename T value_type;

    Point() { std::fill(elements_, elements_+Dimensions, 0); }
    Point(const Point<T, 2>& rhs) : elements_(rhs.elements_) {}
    ~Point() {}

    Point & operator=(const Point<T, 2>& rhs) { return *this; }

    const Point operator+(const Point<T, 2>& p)
    {
        Point<T, 2> ret;

        for(int i = 0; i < 2; i++)
        {
            ret[i] += elements_[i] + p[i];
        }

        return ret;
    }

    Point & operator+=( const Point<T, 2>& p)
    {
        for(int i = 0; i < 2; i++)
        {
            elements_[i] += p[i];
        }

        return *this;
    }

    Point & operator-=( const Point<T, 2> & p)
    {
        for(int i = 0; i < 2; i++)
        {
            elements_[i] -= p[i];
        }

        return *this;
    }

    T & operator[](const size_t index)
    {
        return elements_[index];
    }

private:
    T elements_[2];
};

template< typename T>
class Point< T, 3 >
{
public:

    Point(const T x, const T y, const T z)
    {
        elements_[0] = x;
        elements_[1] = y;
        elements_[2] = z;
    }

    typedef typename T value_type;

    Point() { std::fill(elements_, elements_+3, 0); }
    Point(const Point<T, 3>& rhs) : elements_(rhs.elements_) {}
    ~Point() {}

    Point & operator=(const Point<T, 3>& rhs) { return *this; }

    const Point operator+(const Point<T, 3>& p)
    {
        Point<T, 3> ret;

        for(int i = 0; i < 3; i++)
        {
            ret[i] += elements_[i] + p[i];
        }

        return ret;
    }

    Point & operator+=( const Point<T, 3>& p)
    {
        for(int i = 0; i < 3; i++)
        {
            elements_[i] += p[i];
        }

        return *this;
    }

    Point & operator-=( const Point<T, 3> & p)
    {
        for(int i = 0; i < 3; i++)
        {
            elements_[i] -= p[i];
        }

        return *this;
    }

    T & operator[](const size_t index)
    {
        return elements_[index];
    }

private:
    T elements_[3];
};

typedef Point< int, 2 > Point2Di;
typedef Point< int, 3 > Point3Di;

#endif //POINT_H_ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:57:34.250

您可以——简单地——在主模板中同时提供 2D 和 3D 构造函数。

这里没有必要玩弄基类和其他[Rube Goldberg 解决方案](http://en.wikipedia.org/wiki/Rube_Goldberg)，因为*没有要解决的问题*：我们处于模板领域，任何未使用的东西都只是未使用。

例子：

```
#ifndef POINT_H_
#define POINT_H_

#include <array>            // std::array

#define STATIC_ASSERT( e ) static_assert( e, "!(" #e ")" )

template< typename T, int nDimensions = 2 >
class Point
{
private:
    std::array< T, nDimensions > elements_;

public:
    typedef T ValueType;

    T& operator[]( int const i )
    {
        return elements_[i];
    }

    T const& operator[]( int const i ) const
    {
        return elements_[i];
    }

    void operator+=( Point const& other )
    {
        for( int i = 0; i < nDimensions; ++i )
        {
            elements_[i] += other.elements_[i];
        }
    }

    void operator-=( Point const& other )
    {
        for( int i = 0; i < nDimensions; ++i )
        {
            elements_[i] -= other.elements_[i];
        }
    }

    friend Point operator+( Point const& a, Point const& b )
    {
        Point ret( a );

        ret += b;
        return ret;
    }

    friend Point operator-( Point const&a, Point const& b )
    {
        Point ret( a );

        ret -= b;
        return ret;
    }

    Point(): elements_() {}

    Point( int x, int y )
    {
        STATIC_ASSERT( nDimensions == 2 );
        elements_[0] = x;
        elements_[1] = y;
    }

    Point( int x, int y, int z )
    {
        STATIC_ASSERT( nDimensions == 3 );
        elements_[0] = x;
        elements_[1] = y;
        elements_[2] = z;
    }
};

typedef Point< int, 2 > Point2D;
typedef Point< int, 3 > Point3D;

#endif //POINT_H_

#include <iostream>
using namespace std;

wostream& operator<<( wostream& stream, Point3D const& point )
{
    return (stream << "(" << point[0] << ", " << point[1] << ", " << point[2] << ")");
}

int main()
{
    wcout << "starting" << endl;
    Point3D a( 1, 2, 3 );
    Point3D b( 4, 5, 6 );

    a += b;
    wcout << a << endl;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T20:45:33.853

我建议使用类似于您所显示的类模板：

```
template< typename T, int Dimensions>
class Point {
}; 
```

然后进一步`Point2D`和`Point3D`继承自该模板的类模板：

```
template <typename T>
class Point2D : public Point<T,2>{
  // add X,Y constructor
};

template <typename T>
class Point3D : public Point<T,3>{
  // add X,Y, Z constructor
}; 
```

如果您有 C++11，另一种选择是将可变参数模板构造函数添加到泛型`Point`类模板。这完全避免了继承，并且对于任意数量的维度都是通用的：

```
template< typename T, unsigned int N>
class Point {
  template <typename ... Args>
  Point(const Args& ... args) : elements_{args...} {}
}; 
```

这将允许以下操作：

```
Point<int, 3> p3a(1,2,3); // OK, array values set to 1, 2, 3
Point<int, 3> p3b(1,2); // OK, array values set to 1, 2, 0
Point<int, 3> p3c(1,2,3,4); // compiler error! 
Point<double, 10> p10a(1,2,3,4,5,6,7,8,9,10); // OK 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:47:09.173

就像 jahhaj 所说，将通用代码移动到基类模板中并从中继承：

```
template<typename T, int Dimensions>
class PointBase {
    ...  // all existing code from Point
};

template<typename T, int Dimensions = 2>
class Point: public PointBase<T, Dimensions> {
    // empty
};

template<typename T>
class Point<T, 2>: public PointBase<T, 2> {
public:
    Point(T x, T y): PointBase<T, 2>() { // convenience constructor
       (*this)[0] = x;
       (*this)[1] = y;
    }
}; 
```

顺便说一句，C++11 可变参数模板和初始化列表将消除手动创建便利构造函数的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:45:52.013

我尝试了 Luchian 的答案，但它似乎不适用于在专业化中提供新的构造函数。

但是，您可以使用派生来帮助为类型提供不同的构造函数。不幸的是，使用这种技术，您必须重新定义要公开的*所有构造函数。*

顺便说一句，请注意，在模板化类型本身的定义中引用当前类型时，您不需要重复模板参数。

```
#ifndef POINT_H_ 
#define POINT_H_ 

template< typename T, int Dimensions = 2 > 
class Point 
{ 
public: 
    typedef typename T value_type; 

    Point() { std::fill(elements_, elements_+Dimensions, 0); } 
    Point(const Point& rhs) : elements_(rhs.elements_) {} 
    virtual ~Point() {} 

    Point & operator=(const Point& rhs) { return *this; } 

    Point operator+(const Point& p) 
    { 
        Point<T, Dimensions> ret; 

        for(int i = 0; i < Dimensions; i++) 
        { 
            ret[i] += elements_[i] + p[i]; 
        } 

        return ret; 
    } 

    Point & operator+=( const Point& p) 
    { 
        for(int i = 0; i < Dimensions; i++) 
        { 
            elements_[i] += p[i]; 
        } 

        return *this; 
    } 

    Point & operator-=( const Point& p) 
    { 
        for(int i = 0; i < Dimensions; i++) 
        { 
            elements_[i] -= p[i]; 
        } 

        return *this; 
    } 

    T & operator[](const size_t index) 
    { 
        return elements_[index]; 
    } 

private: 
    T elements_[Dimensions]; 
}; 

template<typename T>
class Point2D : public Point<T, 2>
{
public:

    Point2D()
    {
    }

    Point2D(const Point2D& rhs) : Point<T, 2>(rhs) 
    {
    }

    Point2D(const T x, const T y) 
    { 
        (*this)[0] = x; 
        (*this)[1] = y;
    }
};

template<typename T>
class Point3D : public Point<T, 3>
{
public:

    Point3D()
    {
    }

    Point3D(const Point3D& rhs) : Point<T, 3>(rhs) 
    {
    }

    Point3D(const T x, const T y, const T z) 
    { 
        (*this)[0] = x; 
        (*this)[1] = y;
        (*this)[2] = z;
    }
};

typedef Point2D< int > Point2Di; 
typedef Point3D< int > Point3Di; 

#endif //POINT_H_ 
```

作为迂腐的一点，您可能还希望在基类中添加一个 const 索引访问器：

```
 const T & operator[](const size_t index) const
    { 
        return elements_[index]; 
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T20:48:58.920

因为你想改变你的构造函数的输入参数的数量，你有两种方法：
1）将所有实现移动到一个基类并从它驱动你的类，然后专门化驱动类
2）使用预处理器命令重复你的构造函数（例如with `BOOST_PP_REPEAT`) 然后使用模板(`tr1::disable_if`或`boost::disabled_if`) 禁用无效的构造函数。

第一种技术非常简单，但第二种技术有很多关于`BOOST_PP_REPEAT`“disable_if”的文档和帮助，如果它们不能帮助您，请告诉我向您发送完整的工作代码

# android - xpath 中的未知错误（使用 xmlpullparser）

> ID：11891193
> 
> 赞同：5
> 
> 时间：2012-08-09T20:10:02.840
> 
> 标签：android, xml, xpath, xmlpullparser

我正在使用`XmlPullParser`打开文件并`XPath`获取根目录。（稍后我将修改我的代码以获取`idx`节点）

但是，我收到以下错误：

```
javax.xml.transform.TransformerException: Unknown error in XPath. 
```

我在互联网上搜索过，但没有找到任何可以解决此问题的方法。

```
try{
    XmlPullParser xpp = getResources().getXml(R.xml.x1);
    XPath xpath = XPathFactory.newInstance().newXPath();
    String askFor2 = "/root";
    NodeList creaturesNodes = (NodeList) xpath.evaluate(askFor2, xpp, XPathConstants.NODESET);
    Log.d("", "");
} catch (Exception ex) {
    String err = (ex.getMessage()==null)?"run thread failed":ex.getMessage();
    Log.e("bm run catch", err);
} 
```

我的 XML 文件是

```
<?xml version="1.0"?>
<root>
    <child index="1">
        <idx index="1" />
        <idx index="2" />
        <idx index="3" />
        <idx index="4" />
        <idx index="5" />
        <idx index="6" />
        <idx index="7" />
    </child>
</root> 
```

非常感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:43:14.397

您将错误的属性传递给评估方法。尝试使用 InputSource，

```
try{
    XPath xpath = XPathFactory.newInstance().newXPath();
    InputSource is = new InputSource(getResources().openRawResource(R.raw.xm));
    String askFor2 = "/root";
    NodeList creaturesNodes = (NodeList) xpath.evaluate(askFor2, is, XPathConstants.NODESET);
    Log.d("", "");
} catch (Exception ex) {
    Log.e("bm run catch", err);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T02:23:10.267

在我看来，您应该将 InputSource 作为第二个参数传递给 xpath.evaluate()，而不是解析器。请记住，XPath 通常可能需要遍历整个文档树，因此除了某些特殊的受限情况外，它不能与流式解析一起使用：您需要读取整个文档，构建内存中的树模型并应用XPath 到那个。

# java - 为 Apache ANT 启用 javac 调试

> ID：11891194
> 
> 赞同：21
> 
> 时间：2012-08-09T20:10:07.690
> 
> 标签：java, xml, apache, ant, build

只是一个简单的问题。对于 ANT 构建，如果我完全不使用该`debuglevel`参数，它会与所有调试信息一起编译吗？`debuglevel="lines,vars,source"`还是包含在 javac 任务中会更好？我想启用最高级别的调试。这是一个片段：

```
<javac srcdir="${dir.source}"
     destdir="${dir.classes}"
     deprecation="${javac.deprecation}"
     debug="${veracode.release.mode}"
     debuglevel="lines,vars,source" <-- should I leave this line out? -->
     optimize="${javac.optimize}"> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T22:42:15.207

简短回答：是的，`debuglevel`只要您将属性设置为`debug`，您就可以忽略该属性`true`。

从[`javac Ant task`](http://ant.apache.org/manual/Tasks/javac.html)文档中：

**调试**

> 指示是否应使用调试信息编译源；默认为关闭。如果设置为 off，则 -g:none 将在支持它的编译器的命令行上传递（对于其他编译器，将不使用命令行参数）。如果设置为 true，则 debuglevel 属性的值将确定命令行参数。

**调试级别**

> 要附加到 -g 命令行开关的关键字列表。除了现代，经典（版本> = 1.2）和jikes之外，所有实现都将忽略这一点。合法值是 none 或以下关键字的逗号分隔列表：lines、vars 和 source。***如果未指定 debuglevel，默认情况下，不会将任何内容附加到 -g。***如果未打开调试，则该属性将被忽略。

因此，设置`debug`为`true`和省略与传递不附加选项`debugLevel`的标志相同。`-g`根据[`javac`](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)文档，传递`-g`不附加任何内容的标志等效于指定源、行和变量。

# ruby-on-rails - 导轨错误

> ID：11891195
> 
> 赞同：-3
> 
> 时间：2012-08-09T20:10:14.107
> 
> 标签：ruby-on-rails, ruby

从 rails 开始，我遇到了 'rails s' 的问题，并出现以下错误：

```
/usr/bin/ruby1.8: symbol lookup error: /var/lib/gems/1.8/gems/therubyracer-0.11.0beta5-x86_64-linux/lib/v8/init.so: undefined symbol: rb_intern2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:33:42.273

You should consider updating to the latest version of Ruby and Rails (1.9.2 and 3.2.7, respectively). Also, you should make sure you have the latest version of the gem by running

```
gem uninstall therubyracer
gem install therubyracer 
```

Note that servers such as WEBrick need to be restarted after installing gems; you can't just install the gem, include it in your code, and refresh the page like you can with new JS or CSS.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:25:34.963

我遇到了这个问题，但似乎我的本地版本需要 therubyracer 的 beta 版（支持 libv8，因为它在 OS X 10.8 上没有它会引发编译错误），但我的生产系统不需要（CentOS）。

我尝试在我的包中指定 group :production do ，但它抛出一个错误，说我已经调用了两次 gem。[http://gembundler.com/rationale.html](http://gembundler.com/rationale.html)是让我尝试的。

# php - 24 小时后更改值

> ID：11891196
> 
> 赞同：1
> 
> 时间：2012-08-09T20:10:16.270
> 
> 标签：php, mysql

24小时后如何更改mysql数据库中的值？用户是否需要访问网站才能运行查询？例如，我有一个名为“user-rank”的列，它的值为“10”，我希望它在 24 小时后为“20”......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:41:26.313

Crontab aka CRON 是最灵活的解决方案，但您需要在 shell 或特定控制面板中拥有使用它的权限，因为出于安全原因，许多托管服务提供商不喜欢与其共享权限。

首先创建带有更新代码的 PHP 脚本，如下所示：

```
<?php

//connect to database
//.... 

//prepare MySQL query
$sql = "UPDATE myTable SET `user-rank` = `user-rank` + 10";

//execute query and handle errors
//...

//optinal reporting on e-mail
//...

//end
?> 
```

接下来，您需要通过在 shell 中调用“crontab -e”来向 crontab 添加条目，像这样粘贴代码并保存更改：

```
0    0     *     *     *     /usr/bin/php -f /path/to/my_update_script.php > /dev/null 
```

此条目将定义每天午夜（服务器时间）对脚本的调用，并忽略脚本的任何输出。

注意：您需要为不同的操作系统或用户定义的配置文件指定 php 二进制文件的确切路径。**使用“ which php** ”shell 命令检查它。

- - - - - - - - 更新 - - - - - - - -

**没有 crontab 的解决方案。**

创建一个新的数据库表**php_cron**并使用以下 MySQL 代码插入初始记录（第一个且仅需要一个）：

```
CREATE TABLE `php_cron` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `last_ts` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
);

INSERT INTO `php_cron` (`id`, `last_ts`) VALUES (1,'2012-08-10 00:00:00'); 
```

然后创建新的 PHP 脚本，它将包含此类任务所需的所有逻辑，并将其包含在您的主 index.php 文件或其他可以在用户每次访问您的站点时加载的位置，例如在某些配置或类似脚本中。我想你每天至少会有一个访客。

这个新脚本需要做两个任务，首先查询那些 php_cron 表并计算时间差，如果差大于 24 小时（86400 秒）然后执行更新用户等级的代码并将新的时间戳保存到数据库中。

该脚本可能如下所示：

```
<?php

    //connect to database
    //.... 

    //get time difference in seconds from last execution
    $sql1 = "SELECT TIME_TO_SEC(TIMEDIFF(NOW(), last_ts)) AS tdif FROM php_cron WHERE id=1";
    $res1 = mysql_query($sql1) or die("[1] MySQL ERROR: ".mysql_error());
    $dif = mysql_fetch_assoc($res1['tdif']);

    if ($dif >= 86400) { //24h

        //following code will run once every 24h

        //update user's page rank
        $sql2 = "UPDATE myTable SET `user-rank` = `user-rank` + 10"; 
        mysql_query($sql2) or die("[2] MySQL ERROR: ".mysql_error());

        //update last execution time
        $sql3 = "UPDATE php_cron SET last_ts = NOW() WHERE id=1";
        mysql_query($sql3) or die("[3] MySQL ERROR: ".mysql_error());

    }

?> 
```

这个脚本不像 CRON 那样时间准确，但肯定会每天运行一次。这可以通过更多的 php/mysql 逻辑来纠正，但我认为它会完成这项工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:13:02.517

一个常见的解决方案是设置一个[cron 作业](http://en.wikipedia.org/wiki/Cron_job)来定期运行脚本来更新任何需要更新的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:13:30.097

您可以设置一些东西来运行查询检查数据库的最后一次运行时间，然后您可以运行查询（当有人访问该站点时所有这些）。或者你可以设置一个 cron 作业。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:11:48.087

根据您的 MySQL 版本，您可以使用事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T20:24:14.150

首先编辑您的 crontab 文件（在终端中）

```
crontab -e 
```

将此行添加到文件中：

```
0    0     *     *     *         php /var/www/myquery.php 
```

第一个 0 表示分钟 0，第二个零表示 0h。其他星星表示该作业将每天执行。

在 myquery.php 文件中，您放置了一些将连接到您的数据库并执行您想要的查询的 php。

这是在 linux 系统上执行此操作的一种方法。

# php - 经过提交后到其他表格

> ID：11891197
> 
> 赞同：3
> 
> 时间：2012-08-09T20:10:18.660
> 
> 标签：php, jquery, ajax, file-upload

我有一个使用 ajax 提交的上传表单。

这一切都很好，但我想要做的是将我上传的文件的名称存储在隐藏的输入类型中，所以当我提交带有文本字段的表单时，图像的名称可以提交到数据库。

我注意到当我将主表单提交到数据库时，图像的名称已经丢失。我刚刚意识到输入文件在上传表单上，这就是为什么不会提交名称的原因。

我的问题是如何将上传文件的名称传递给我的其他表单？

在我的主要形式中，我想我会有一个

```
<input type="hidden" name="imgname" id="imgname" value="" /> 
```

这是我提交表单的 jquery

```
<script type="text/javascript"> 
    $(document).ready(function() { 
        //elements
        var progressbox     = $('#progressbox');
        var progressbar     = $('#progressbar');
        var statustxt       = $('#statustxt');
        var submitbutton    = $("#SubmitButton");
        var myform          = $("#UploadForm");
        var output          = $("#output");
        var lotterydiv      = $("#lottovidpreview");
        var completed       = '0%';

        $(myform).ajaxForm({
            beforeSend: function() { //brfore sending form
                lotterydiv.remove();
                submitbutton.attr('disabled', ''); // disable upload button
                statustxt.empty();
                progressbox.slideDown(); //show progressbar
                progressbar.width(completed); //initial value 0% of progressbar
                statustxt.html(completed); //set status text
                statustxt.css('color','#000'); //initial color of status text
            },
            uploadProgress: function(event, position, total, percentComplete) { //on progress
                progressbar.width(percentComplete + '%') //update progressbar percent complete
                statustxt.html(percentComplete + '%'); //update status text
                if(percentComplete>50) {
                    statustxt.css('color','#fff'); //change status text to white after 50%
                }
            },
            complete: function(response) { // on complete
                output.html(response.responseText); //update element with received data
                myform.resetForm();  // reset form
                submitbutton.removeAttr('disabled'); //enable submit button
                progressbox.slideUp(); // hide progressbar
            }
        });
    });

</script> 
```

我还假设我需要在 complete: function 部分做一些事情，但不知道是什么。我是否需要获取发送到 php 脚本的文件的名称来移动图像，或者我可以从客户端获取它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:35:24.577

我只需要完整输入：函数

```
$("#imagename").val($("#filepc").val()); 
```

# javascript - 获取整数的对象属性名称的最小值和最大值

> ID：11891204
> 
> 赞同：0
> 
> 时间：2012-08-09T20:11:10.357
> 
> 标签：javascript

**已更新** （问题表述错误，请参见下面的注释）

我有一个对象，该对象具有一组以数字命名的属性，如示例中所示。“编号名称”不一定是连续的，我也不知道它们从哪里开始或结束。我知道其他属性不会用数字命名。
我知道 myObject["propName"] 和 myObject.propName 是一样的，但是我特意用第一种方式写，因为 myObject.0 看起来很奇怪，并没有得到所有编辑器的认可。

如何获得最小和最大数组索引？

所以在这样的情况下

```
myObject["0"] = undefined
myObject["1"] = {}
myObject["2"] = undefined
myObject["3"] = {}
myObject["4"] = {}
myObject["5"] = undefined
myObject["someOtherProperty"] = {} 
```

会给我这个

```
minIndex(myObject) == 1
maxIndex(myObject) == 4 
```

**在此编辑之前的所有答案**
感谢您的回复。我不应该匆忙发布这个问题，应该在提交之前重新阅读它。已经很晚了，我很着急。我很抱歉。
通过实际看到我的错误陈述（使用数组而不是对象），我认为，根据我重新制定的问题的答案，我可能需要重写我的代码以使用数组而不是对象。我使用对象而不是数组的原因是另一个问题的材料。

**到目前为止**
，我已经尝试找到一种将属性名称转换为数组然后循环遍历它们的方法，但事实证明这很笨拙。我正在寻找一种不易出错且优雅的方式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T20:14:05.490

**编辑**：啊哈！现在问题变得更有趣了。

*解决方案 1：*让我们一口气解决这个问题，好吗？对于最大值：

```
function maxIndex(obj){
    var max = -1;
    for(var i in myObject){
        var val = parseInt(i);
        if(isFinite(val)){
            if(typeof obj[val] !== 'undefined' && val > max){
                max = val;
            }
        }
    }
    return max;
} 
```

我认为您可以自己将其转换为 min ;)

*解决方案 2*：在这里，我会将您的*对象*恢复为我们最初认为的样子，以防您真的喜欢其他解决方案之一。然后其余的答案适用。

```
function convertObject(obj){
    var output = [];
    for(var i in myObject){
        var val = parseInt(i);
        if(isFinite(val)){         
            output[val] = obj[i]; //Gotta love JS
        }
    }
    return output;
} 
```

按计划继续！

* * *

要找到最小的，从底部开始，一路向上直到找到。

```
function minIndex(myArray){
    for(var i = 0; i < myArray.length; i++){
        if(typeof myArray[i] !== 'undefined')
            return i;
    }
} 
```

要获得最大，从顶部开始。

```
function maxIndex(myArray){
    for(var i = myArray.length - 1; i >= 0; i--){
        if(typeof myArray[i] !== 'undefined')
            return i;
    }
} 
```

两者都是最坏情况 O(n)。你真的不能做得更好，因为整个数组可能是空的，你必须检查每个元素是否为正。

编辑：如前所述，您还可以通过简单地编写来检查某些内容*是否*`if(myArray[i])`未定义。随心所欲，随心所欲。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:15:16.283

尝试遍历数组，直到找到第一个非`undefined`元素。

```
function minIndex(arr){
    for(var i = 0, len = arr.length; i < len; i++){
        if(arr[i] !== undefined){
            return i;
        }
    }
} 
```

对于最大索引，做同样的事情，除了相反。

```
function maxIndex(arr){
    for(var i = arr.length-1, len = 0; i >= len; i--){
        if(arr[i] !== undefined){
            return i;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T16:19:07.993

```
var myObject = {};
myObject["0"] = undefined;
myObject["1"] = {};
myObject["2"] = undefined;
myObject["3"] = {};
myObject["4"] = {};
myObject["5"] = undefined;
myObject["someOtherProperty"] = {};

var keys = Object.keys(myObject).map(Number).filter(function(a){
    return isFinite(a) && myObject[a];
});

var min = Math.min.apply(Math, keys);
var max = Math.max.apply(Math, keys);

console.log(min, max); //Logs 1 and 4 
```

所有人的文档和兼容性信息：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)
[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)
[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:18:20.853

分钟：

```
for(var i = 0; i < myArray.length; i++) {
    if(myArray[i] != undefined) {
        return i;
    }
} 
```

最大限度：

```
for(var i = myArray.length-1; i >= 0; i--) {
    if(myArray[i] != undefined) {
        return i;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T20:19:29.230

尝试这样的事情：

```
function minIndex(var array){
   for(var i = 0; i < array.length; i++)
   {
      if(typeof array[i] != "undefined")
      return i;
   }
   return null;
}

function maxIndex(var array){
   var returnIndex = -1;
   for(var i = 0; i < array.length; i++)
   {
      if(typeof array[i] != "undefined")
      returnIndex = i;
   }
   if(returnIndex !== -1) return returnIndex;
   else return null;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-09T20:29:22.720

这利用了 for..in 仅迭代定义的元素并使用索引的事实：

```
function minIndex(arr){ for(el in arr){return el} }

function maxIndex(arr){var v; for(el in arr){v = el}; return v } 
```

注意事项：第二个函数虽然不是很有效，因为它循环遍历整个数组。如果您明确设置未定义的索引，这将不起作用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-09T20:15:53.310

```
var max=0;
var min=myArray.length;
for (var i in myArray)
    if (myArray[i]!==undefined)
    {
        max=Math.max(i, max);
        min=Math.min(i, min);
    } 
```

# authentication - 除非删除 cookie，否则 ServiceStack AuthenticateAttribute 第二次导致空引用异常

> ID：11891205
> 
> 赞同：0
> 
> 时间：2012-08-09T20:11:11.050
> 
> 标签：authentication, servicestack

我正在尝试让 ServiceStacks 身份验证在 MVC 站点上工作。我的控制器是这样的：

```
 public abstract class ControllerBase : ServiceStackController<AuthUserSession> {
    //TODO: override LoginRedirectUrl  
  }

  public class IndexController : ControllerBase {
    [Authenticate]
    public ActionResult Index() {
      return View();
    }
  } 
```

我第一次通过从 Visual Studio 启动站点来测试代码时，会重定向到 /login 路由。

现在，如果我从 Visual Studio 再次启动该站点，则会引发如下所示的空引用异常，并且在每次重新启动时都会发生这种情况，直到我删除浏览器中的所有 cookie。

看起来像一个错误？

```
NullReferenceException: Object reference not set to an instance of an object.]
   ServiceStack.Mvc.ServiceStackController`1.get_UserSession() in C:\src\ServiceStack\src\ServiceStack.FluentValidation.Mvc3\Mvc\ServiceStackController.cs:28
   ServiceStack.Mvc.ServiceStackController`1.get_AuthSession() in C:\src\ServiceStack\src\ServiceStack.FluentValidation.Mvc3\Mvc\ServiceStackController.cs:39
   ServiceStack.Mvc.ExecuteServiceStackFiltersAttribute.OnActionExecuting(ActionExecutingContext filterContext) in C:\src\ServiceStack\src\ServiceStack.FluentValidation.Mvc3\Mvc\ExecuteServiceStackFiltersAttribute.cs:21
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +47
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970061
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:29:32.303

好的不要紧。我遇到的错误可能是因为我还没有实现登录路由。

# c# - 将 SQL 数据导出为 PDF。错误：HtmlParser

> ID：11891216
> 
> 赞同：0
> 
> 时间：2012-08-09T20:11:59.000
> 
> 标签：c#, sql, pdf-writer

我想将 Sql 数据导出到 PDF 文件。我使用了以下代码。我收到错误为**HtmlParser.Parse(Doc, xmlReader);** ***当前上下文中不存在名称“HtmlParser”***

```
using System;
using System.Data;
using System.Configuration;
using System.Web;
using System.Web.Security;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Web.UI.WebControls.WebParts;
using System.Web.UI.HtmlControls;
using iTextSharp.text;
using iTextSharp.text.pdf;
using iTextSharp.text.html;
using System.IO;
using System.Collections;
using System.Net;
using System.Data.SqlClient;
using System.Windows.Forms;

protected void btnPdf_Click(object sender, EventArgs e)
        {
            HtmlForm form = new HtmlForm();
            form.Controls.Add(StdA_grid);
            StringWriter sw = new StringWriter();
            HtmlTextWriter hTextWriter = new HtmlTextWriter(sw);
            form.Controls[0].RenderControl(hTextWriter);
            string html = sw.ToString();
            Document Doc = new Document();

            //PdfWriter.GetInstance
            //(Doc, new FileStream(Request.PhysicalApplicationPath 
            //+ "\\AmitJain.pdf", FileMode.Create));

            PdfWriter.GetInstance
            (Doc, new FileStream(Environment.GetFolderPath
            (Environment.SpecialFolder.Desktop)
            + "\\AmitJain.pdf", FileMode.Create));
            Doc.Open();

            Chunk c = new Chunk
            ("Export GridView to PDF Using iTextSharp \n",
            FontFactory.GetFont("Verdana", 15));
            Paragraph p = new Paragraph();
            p.Alignment = Element.ALIGN_CENTER;
            p.Add(c);
            Chunk chunk1 = new Chunk
            ("By Amit Jain, amit_jain_online@yahoo.com \n",
            FontFactory.GetFont("Verdana", 8));
            Paragraph p1 = new Paragraph();
            p1.Alignment = Element.ALIGN_RIGHT;
            p1.Add(chunk1);

            Doc.Add(p);
            Doc.Add(p1);

            System.Xml.XmlTextReader xmlReader =
            new System.Xml.XmlTextReader(new StringReader(html));
            HtmlParser.Parse(Doc, xmlReader); // error shown on this line

            Doc.Close();
            string Path = Environment.GetFolderPath
            (Environment.SpecialFolder.Desktop)
            + "\\AmitJain.pdf";

            ShowPdf(Path);

        }

        private void ShowPdf(string strS)
        {
            Response.ClearContent();
            Response.ClearHeaders();
            Response.ContentType = "application/pdf";
            Response.AddHeader
            ("Content-Disposition", "attachment; filename=" + strS);
            Response.TransmitFile(strS);
            Response.End();
            //Response.WriteFile(strS);
            Response.Flush();
            Response.Clear();

        } 
```

请为此提供一些解决方案，或者您可以建议我任何其他更好的程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:43:53.550

`HtmlParser`尝试在您的设置中搜索课程。根据快速谷歌搜索，`HtmlParser`新版本的 iTextSharp 中不存在。请参阅[此](http://www.dotnetfunda.com/forums/thread2353-solution-htmlparser-doesnt-exsits-in-itextsharp-5020-free-net.aspx)、[此](http://forums.asp.net/t/1199774.aspx)并搜索有关使用 iTextSharp 的任何帮助。在第二个链接中，这里有一些可能有帮助的代码：

```
//make an arraylist ....with STRINGREADER since its no IO reading file...

            List<IElement> htmlarraylist = iTextSharp.text.html.simpleparser.HTMLWorker.ParseToList(new StringReader(htmlText), null);

            //add the collection to the document
            for (int k = 0; k < htmlarraylist.Count; k++)
            {
                document.Add((IElement)htmlarraylist[k]);
            } 
```

# ruby-on-rails - ActiveAdmin 如何从列中获取总和

> ID：11891217
> 
> 赞同：4
> 
> 时间：2012-08-09T20:12:00.113
> 
> 标签：ruby-on-rails, activeadmin

我有一种情况，我想得到一列的总和并显示它

例如在activeadmin

```
ActiveAdmin.register Expense do    
   index do       

    column :amount 
    column :details
    column :created_at

    default_actions
  end         
end 
```

我需要对`amount`列求和并显示它。另外我不知道在哪里显示`Total Sum`，也许是侧边栏？如果结果被过滤，那么总和必须根据显示的结果相应地改变。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-07-29T13:52:07.410

`collection`您可以通过简单地访问将考虑当前应用的过滤器/范围的基础来避免必须计算运行总数，并使用`reduce(:+)`来执行总和：

```
ActiveAdmin.register Expense do    
   index do       
    column :amount 
    column :details
    column :created_at

    default_actions

    div class: "panel" do
      h3 "Total amount: #{collection.pluck(:amount).reduce(:+)}"
    end
  end         
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-27T04:56:27.693

```
ActiveAdmin.register Expense do    
  amount = 0
  index do       

  column :amount 
  column :details
  column :created_at
  column("sub amount") {|resource| amount = amount + resource.amount}
  default_actions
  div :class => "panel" do
    h3 "Total: #{amount}"
  end
 end         
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-15T22:44:11.833

我有同样的问题，找不到答案，所以在玩了一会儿之后，我想出了这个：

```
ActiveAdmin.register Expense do
  index do

    column :amount
    column :details
    column :created_at

    default_actions

    div :class => "panel" do
      h3 "Total: #{Expense.search(params[:q]).result.sum(:amount)}"
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-25T11:39:03.693

我更喜欢只在没有列（“子金额”）的面板上查看金额，就像以下代码一样：

```
 ActiveAdmin.register Expense do    

    index do       
      amount = 0
      column :amount 
      column :details
      column :created_at
      registers.each {|resource| amount += resource.amount}
      default_actions
     div :class => "panel" do
       h3 "Total: #{amount}"
     end
   end         
 end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-01T08:41:46.887

当我尝试在“index do”上方使用“amount = 0”时使用上面提到的代码时，当我刷新管理页面时，值会增加。这解决了我的问题。

```
ActiveAdmin.register Expense do    

  index do       
    amount = 0
    column :amount 
    column :details
    column :created_at
    column("sub amount") {|resource| amount = amount + resource.amount}
    default_actions
    div :class => "panel" do
      h3 "Total: #{amount}"
    end
  end         
end 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-07-04T10:10:03.410

```
ActiveAdmin.register Expense do    

  index do       
    sum = 0
    column "Amount" do |expense|
      sum += expense.amount 
      expense.amount
    end
    column :details
    column :created_at
    default_actions
    div :class => "panel" do
      h3 "Total: #{sum}"
    end
  end         
end 
```

# javascript - JQuery JSON数据不显示

> ID：11891228
> 
> 赞同：0
> 
> 时间：2012-08-09T20:13:05.850
> 
> 标签：javascript, jquery, json

我无法从页面显示一些 jason。

数据在那里，但我认为它可能与这条线有关：

```
document.write(fbResults.cats[0].title); 
```

这是完整的html源代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title></title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>

    $(document).ready(function() {
        $.getJSON('http://mydomain.com/api/get_cats', function(fbResults) {
            document.write(fbResults.cats[0].title);
        });
    });
</script>

</head>
<body>

</body>
</html> 
```

这是它正在读取的数据：

```
{"cats":[

{"id":"1","title":"mytitle1","colour":"#EE297C"},
{"id":"2","title":"mytitle2","colour":"#EE412F"},
{"id":"3","title":"mytitle3","colour":"#F5821F"},
{"id":"4","title":"mytitle4","colour":"#00AEEF"},
{"id":"5","title":"mytitle5","colour":"#00B495"},
{"id":"6","title":"mytitle6","colour":"#006476"}

]} 
```

它没有在页面上显示任何内容。

在萤火虫控制台我得到这个错误：

未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。页面的字符编码必须在文档或传输协议中声明。

那里没有json数据的痕迹

我在做什么我是谁？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:15:59.190

您不应该在页面加载后 document.write （这里肯定是这种情况）。

如果要将其写入页面，则需要创建 HTML 并附加它。只需替换document.write：

```
$('body').append('<p>'+fbResults.cats[0].title+'</p>'); 
```

* * *

更新：

您的示例进行了完全限定的 URL 调用。该服务器与您从中运行页面的服务器完全相同吗？如果不是，XHR 只会接受请求（有时不会告诉你）。如果您需要跨域，则需要使用 JSONp。如果您在从网络上提取数据的同时尝试在本地运行它，它会中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:18:46.690

试试这个

```
 $.each(fbResults.cats,function(index,item){
    document.write(item.title);       
  }); 
```

工作样本：http: [//jsfiddle.net/zWhEE/8/](http://jsfiddle.net/zWhEE/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:21:13.850

它似乎对我有用，请检查这个 [http://jsfiddle.net/TxTCs/1/](http://jsfiddle.net/TxTCs/1/)

# iphone - iPhone 应用发布无法验证

> ID：11891235
> 
> 赞同：-1
> 
> 时间：2012-08-09T20:13:42.953
> 
> 标签：iphone, objective-c, ios, xcode, cocos2d-iphone

我试图发布我的新应用，但遇到了问题。在我存档并在存档选项卡中使用我的应用程序获取管理器屏幕之后。当我尝试验证它时，它给了我一个错误。

“游戏应用名称”
不包含单个捆绑应用或包含多个产品。请选择另一个存档，或调整您的方案以创建单捆绑应用程序。

我不知道这个错误是什么意思或该怎么做。有人可以帮帮我吗。会欣赏的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:17:49.613

我相信您有一个带有静态库的子项目。确保在任何不是您的应用程序的构建设置中将“**跳过安装”设置为“是”。**

# highcharts - Highstock - 如何更改工具提示颜色

> ID：11891245
> 
> 赞同：1
> 
> 时间：2012-08-09T20:14:46.473
> 
> 标签：highcharts, highstock

我正在使用类似于此示例的 highstock 图表 - [http://jsfiddle.net/93HQn/2/](http://jsfiddle.net/93HQn/2/)。我要添加的是，如果工具提示中的 % 值为负值，则为红色，如果为正值，则为绿色。以前有人这样做过吗？

谢谢，琳达

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:48:54.780

您可以根据值或计算更改任何工具提示药水的颜色。我修改了您的[**jsfiddle**](http://jsfiddle.net/93HQn/4/)以显示如何根据百分比是正数还是负数来更改百分比的颜色。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:27:23.033

为您的工具提示定义一个`formatter`函数：

[http://api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

有了它，您应该能够完全控制工具提示内容。

# javascript - 如何防止 ASP:Button 从 jQuery 点击处理程序回发

> ID：11891249
> 
> 赞同：2
> 
> 时间：2012-08-09T20:15:01.890
> 
> 标签：javascript, jquery, asp.net

我有`ASP:Button`一页。它呈现为 HTML，如下所示：

```
<input type="submit" name="myButton" value="Do something" 
    onclick="javascript:WebForm_DoPostBackWithOptions(
        new WebForm_PostBackOptions('myButton', '', true, '', '', false, false))"
    id="myButton" /> 
```

现在我试图通过 jQuery 事件处理程序阻止此按钮的默认行为（提交表单）：

```
$('#myButton').click(function () { 
    // do some client-side stuff

    if (someCondition) {
        // don't postback!
        return false;
    }
}); 
```

这里的问题是，ASP 粘贴在输入上的内联点击处理程序似乎每次都在 jQuery 事件处理程序之前执行。

这里最简单的解决方案是使用普通`input type="button"`而不是`ASP:Button`，不幸的是，**这不是一种可能性**，因为这`ASP:Button`会执行此场景中所需的许多其他事情。

防止表单提交发生的最佳方法是什么？我曾想过使用字符串操作将我的处理程序添加到元素的`onclick`属性上，但这似乎真的很脏。我也想避免使用，`OnClientClick`因为这需要我的处理函数公开​​。有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:20:14.213

您是否尝试将`OnClientClick="return false;"`属性添加到您的 aspx 按钮控件？

不用担心，看看这篇文章，它提供了一个 javascript 事件卸载脚本：[Is it possible to remove all event handlers of a given element in javascript?](https://stackoverflow.com/questions/2837542/is-it-possible-to-remove-all-event-handlers-of-a-given-element-in-javascript)

我认为您对最后一种方法 DomLib.prototype.removeEventsByTypeEx 感兴趣

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:21:08.860

我刚刚找到了一个方法

```
<script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(function () {
        var ploopButton = null;
        $("#ploop").click(function (e) {
            ploopButton = this;
        });
        $("#form1").submit(function (e) {
            if (ploopButton !== null) {
                ploopButton = null;
                return confirm('are u sure?');
            }
            return true;
        });
    });
</script>
<form id="form1" runat="server">
    <asp:Button ID="ploop" Text="ploop" runat="server" OnClick="ploop_Click" />
</form> 
```

基本上，您将使用一个全局标志来指示单击了哪个按钮，并且您将在标志打开时确认表单提交

# ruby-on-rails - 如何将嵌套类“导入”到 Ruby 中的当前类中？

> ID：11891259
> 
> 赞同：6
> 
> 时间：2012-08-09T20:15:37.317
> 
> 标签：ruby-on-rails, ruby, import, namespaces

在 Ruby 中，我可以将模块/类嵌套到其他模块/类中。我想要的是在文件或类中添加一些声明，以便能够通过它们的短名称引用嵌套类，例如使用`Inner`to get `Outer::Inner`，就像在 Java、C# 等中一样。语法可能是这样的：

```
module Outer
  class Inner; end
  class AnotherInner; end
end
class C
  import Outer: [:Inner, :AnotherInner]
  def f
    Inner
  end
end 
```

简单的实现可能是这样的：

```
class Class
  def import(constants)
    @imported_constants = 
      (@imported_constants || {}).merge Hash[
        constants.flat_map { |namespace, names|
          [*names].map { |name| [name.to_sym, "#{namespace}::#{name}"] }
        }]
  end

  def const_missing(name)
    const_set name, eval(@imported_constants[name] || raise)
  end
end 
```

Rails 或某些 gem 中是否有可靠的实现，在与 Rails 的自动加载机制兼容的同时进行类似的导入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:24:47.337

```
module Outer
  class Inner; end
  class AnotherInner; end
end

class C
  include Outer

  def f
    Inner
  end
end

C.new.f # => Outer::Inner 
```

请记住： Ruby中没有*嵌套类这样的东西。*一个类就像任何其他对象一样只是一个对象，它像任何其他对象一样被分配给变量。在这种特殊情况下，“变量”是一个在模块内命名空间的常量。并且您将该常量添加到另一个模块（或类）的名称空间中，就像您添加任何其他常量一样：通过`include`模块。

# c# - 调用委托时出现 NotImplementedException

> ID：11891260
> 
> 赞同：3
> 
> 时间：2012-08-09T20:15:46.697
> 
> 标签：c#, winforms, delegates

我正在实现一个事件结构来将信息从视图传递给演示者。在视图中，单击按钮时会调用以下代码：

```
private void alterCmpd1()
{
    EventHandler AlterEvent = AlterCompound1_Action;
    if (AlterEvent != null) AlterEvent(this, EventArgs.Empty);
}

public event EventHandler AlterCompound1_Action; 
```

出于某种原因，NotImplementedException 总是出现在：

```
AlertEvent(this, EventArgs.Empty); 
```

有人可以帮我弄清楚为什么吗？

Presenter 类的代码：

```
 public MainPresenter(IMainView view, IModel model)
    {
        this.view = view;
        this.view.AlterCompound1_Action += new EventHandler(view_AlterCompound1);
        this.model = model;
        view.Show();
    }

    void view_AlterCompound1(object sender, EventArgs e)
    {
        // I commented out this code, on the off
        // chance that it was affecting things. Still no luck.
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:18:32.107

90％肯定如果你看你会发现这个。

```
private void AlterCompound1_Action(object, EventArgs e)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T16:16:55.697

多亏了威尔，我才意识到自己犯的错误。我一直在使用“构建解决方案”工具，但我忽略了查看 Visual Studio 2010 的构建配置管理器（构建 -> 配置管理器）。在那里，我发现了这个：

![VS2010配置管理器截图](../Images/f18f837e2c7b0f7113143a49bc591d25.png)

之前，其中一些 Build 列复选标记（对应于我正在编辑的项目，例如 QAz.Presenter 和 QAz.View）没有被选中，因此“构建解决方案”正在跳过它们。选择这些项目后，Visual Studio 在我运行解决方案时就知道要构建它们。

# sql-server - 为什么这个使用字符串连接的查询会在 SQL Server Compact Edition 中引发错误？

> ID：11891264
> 
> 赞同：1
> 
> 时间：2012-08-09T20:16:11.260
> 
> 标签：sql-server, sql-server-ce, string-concatenation

我正在使用 SQL Server 精简版。我有一个简单的表：

```
CREATE TABLE people (
    ident NCHAR(7) NOT NULL UNIQUE,
    first_name NVARCHAR(100) NOT NULL, 
    last_name NVARCHAR(100) NOT NULL,
    notes NVARCHAR(4000) NULL,
    birth_year SMALLINT NULL,
    birth_location NVARCHAR(200) NULL,
    amount SMALLINT NULL,
    location NCHAR(6) NOT NULL,
    title_date INT NOT NULL,
    num INT NOT NULL UNIQUE,
    PRIMARY KEY (ident)
); 
```

和一个简单的插入语句：

```
INSERT INTO people (ident, first_name, last_name, notes, birth_year, birth_location, amount, location, title_date, num)
VALUES ('t1bbbee', 'Sam', 'Simpson', 'HKiONV6JGxKdd2qs5pQ3GGWlrSPRSfu19cJ6zyEn2qT1WHyv5N', 2007, 'N6fCeYVqJcjDov9DDmLfkpYtGs0WV4QeSVRaKm659lw52W21TX', 1143, 'YcbKbv', 19805274, 7735) 
```

和一个基于我阅读[文档](http://msdn.microsoft.com/en-us/library/ms174042)的简单查询应该可以正常工作：

```
SELECT p.ident + "-" + p.first_name + " " + p.last_name AS "name"
FROM people AS p 
ORDER BY p.ident 
```

但是，这会在 Visual Studio 和[SQL Fiddle](http://www.sqlfiddle.com/#!3/92400/2)（后者使用 SQL Server，而不是 SQL Server CE）中返回错误：

> 列名 '-' 无效。：SELECT p.ident + "-" + p.first_name + " " + p.last_name AS "name" FROM people AS p ORDER BY p.ident

问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:19:30.417

您使用的是双引号而不是单引号：

```
SELECT p.ident + '-' + p.first_name + ' ' + p.last_name name
FROM people AS p 
ORDER BY p.ident 
```

请参阅[SQL 小提琴](http://www.sqlfiddle.com/#!3/b6356/2)

# sql-server - WHERE 子句中的 SQL WHILE 循环

> ID：11891269
> 
> 赞同：0
> 
> 时间：2012-08-09T20:16:46.737
> 
> 标签：sql-server

我可以在 WHERE 子句中放置一个 WHILE 循环吗？我有一个存储过程，我试图在其中加入文本搜索功能。我让它为这样的完全匹配工作：

```
AND (@exactString = '' 
    OR (CHARINDEX(@exactString, [Short Description]) > 0 
        OR CHARINDEX(@exactString, [Description]) > 0
        OR CHARINDEX(@exactString, [Manufacturer]) > 0)) 
```

接下来，我尝试进行“任何单词”匹配和“所有单词”匹配。我可以使用以下 WHILE 循环获取要搜索的搜索字符串：

```
DECLARE @searchString varchar(max)
DECLARE @endIndex int

SET @allString = LTRIM(RTRIM(@allString))
WHILE LEN(@allString) > 0
BEGIN
    SET @endIndex = CHARINDEX(' ', @allString) > 0
    IF @endIndex > 0
    BEGIN
        SET @searchString = LEFT(@allString, @endIndex)
        SET @allString = LTRIM(RTRIM(RIGHT(@allString, @endIndex)))
    END
ELSE
    BEGIN
        SET @searchString = @allString
        SET @allString = ''
    END
END 
```

现在我想像上面使用@exactString 一样使用@searchString 变量。有没有办法在我的循环中做到这一点，或者我是否缺少其他一些可以在这里工作的技术？

谢谢你的帮助，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T23:11:17.377

我使用表值函数通过如下查询执行此任务：

```
SELECT I.*
  FROM @info AS I
        INNER JOIN dbo.funcSplitToTable( ' ', @allString ) AS S
                ON I.[Manufacturer] LIKE '%' + S.result + '%'
                OR I.[Description] LIKE '%' + S.result + '%'
                OR I.[Short Description] LIKE '%' + S.result + '%' 
```

该表值函数定义如下：

```
CREATE FUNCTION dbo.funcSplitToTable
/*
   Split a string into parts base on a separation character to produce
   a table that has one column containing the results of the split.

   EXAMPLE:
      SELECT * FROM dbo.funcSplitToTable( '~', 'MAINT~12221~10001~10/25/2004~CANCELLED~1' )
      SELECT * FROM dbo.funcSplitToTable( '~', '' )
      SELECT * FROM dbo.funcSplitToTable( '~', NULL )
      SELECT * FROM dbo.funcSplitToTable( NULL, 'MAINT~12221~10001~10/25/2004~CANCELLED~1' )
      SELECT * FROM dbo.funcSplitToTable( '', 'MAINT~12221~10001~10/25/2004~CANCELLED~1' )

   RETURN:
      Table with one column containing resulting strings.
*/
(
    @strSearch       AS varchar(255)            -- String to search for.
   ,@strText         AS varchar(MAX )           -- Text to search for string.
)
RETURNS @tblResult TABLE (
   result varchar(MAX) NOT NULL
)
WITH SCHEMABINDING
AS
BEGIN
   DECLARE @iLastPos    int
   DECLARE @iPos        int
   DECLARE @strResult   varchar(MAX)

   IF @strText IS NULL RETURN ;
   IF @strSearch IS NULL SET @strSearch = '' ;

   SET @strResult    = NULL ;
   SET @iLastPos     = 1 ;
   SET @iPos         = CHARINDEX( @strSearch, @strText ) ;

   WHILE @iPos > 0
   BEGIN
      IF (@iPos - @iLastPos) > 0
          INSERT INTO @tblResult
          SELECT SUBSTRING( @strText, @iLastPos, (@iPos - @iLastPos) ) AS result
          ;
      SET @iLastPos  = @iPos + 1 ;
      SET @iPos      = CHARINDEX( @strSearch, @strText, @iLastPos ) ;
   END

   IF (1 + LEN(@strText) - @iLastPos) > 0
       INSERT INTO @tblResult
       SELECT SUBSTRING( @strText, @iLastPos, (1 + LEN(@strText) - @iLastPos) ) AS result
       ;
   RETURN ;
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:24:08.357

我从 Michael Erickson 那里得到了一个很好的答案，它完全适用于“任何”搜索。对于“全部”搜索。我用整个查询建立了一个 sql 字符串。“全部”搜索部分在这里：

```
IF LEN(@allString) > 0
BEGIN
    DECLARE @searchString varchar(max)
    DECLARE @endIndex int
    DECLARE @isFirstString bit

    SET @isFirstString = 0
    SET @allString = LTRIM(RTRIM(@allString))
    WHILE LEN(@allString) > 0
    BEGIN
        SET @endIndex = CHARINDEX(' ', @allString)
        IF @endIndex > 0
            BEGIN
                SET @searchString = LTRIM(RTRIM(LEFT(@allString, @endIndex)))
                SET @allString = LTRIM(RTRIM(RIGHT(@allString, LEN(@allString) - @endIndex)))
            END
        ELSE
            BEGIN
                SET @searchString = @allString
                SET @allString = ''
            END
        SET @sql = @sql + ' AND ((CHARINDEX(''' + cast(@searchString as varchar(max)) + ''', [Short Description]) > 0 
            OR CHARINDEX(''' + cast(@searchString as varchar(max)) + ''', [Description]) > 0
            OR CHARINDEX(''' + cast(@searchString as varchar(max)) + ''', [Manufacturer]) > 0))'
    END
END
EXEC (@sql) 
```

再次感谢，丹

# c# - 如果字符串在c#中有空或空格，如何返回false

> ID：11891271
> 
> 赞同：2
> 
> 时间：2012-08-09T20:17:00.230
> 
> 标签：c#, asp.net

我不能返回 null 因为 my`Hlist`是不可为空的类型。我还能返回什么来代替 null？

```
HList findHListentry(string letter)
{
    if (string.IsNullOrWhiteSpace(letter))
    {
        HList result = listentry.Find(delegate(HList bk)
                       {
                           return bk.letter == letter;
                       });
        return result;
    }
    else
    {
        return ?;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:19:47.357

使用 a`Nullable<HList>`代替？

```
HList? findHListentry(string letter)
{
    ///
    return null;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:21:33.367

有几种处理不可为空值类型的方法：

*   使用`Nullable<HList>`（它的简写名称是`HList?`），或
*   定义一个“空”`HList`条目，类似于 Microsoft 为`Guid`
*   使您的方法返回`bool`而不是`HList`，并`HList`通过`out`参数返回，它的完成方式`Dictionary.TryGetValue`

使用特殊值：

```
struct HList {
    public static HList Empty;
    ...
}

if (...) {
    return HList.Empty;
} 
```

返回`bool`：

```
bool findHListentry(string letter, out HList res) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:22:21.550

如果方法的输入确实*不应该*是`null`空字符串，则可以抛出异常：

```
HList findHListentry(string letter)
{
    if (string.IsNullOrWhiteSpace(letter))
        throw new ArgumentNullException("letter");

    HList result = listentry.Find(
        delegate(HList bk)
        {
            return bk.letter == letter;
        }
    );

    return result;
} 
```

（请注意，我还颠倒了条件逻辑，因为听起来您正在寻找与问题标题相反的内容。）

您还可以查看[代码契约](http://msdn.microsoft.com/en-us/library/dd264808.aspx)来验证方法的先决条件，而不是手动检查输入并引发异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:20:25.043

你有几个选择：

如果`HList`是一个结构：

1.  把它变成一个班级。然后你可以返回null。
2.  将方法签名更改为`HList? findHListentry(string letter)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T20:20:56.950

您可能想查看[Nullable of T](http://blogs.msdn.com/b/ericgu/archive/2004/05/27/143221.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T20:38:27.777

一种实现是提供一个不可空类型的 Empty 实例，并返回它来代替 null。以字符串为例...虽然 String 在 .NET 中是可空类型，但它包含一个名为 Empty 的内置只读字段，因此您可以使用 String 执行以下操作：

```
if(mystring == null)
{
    //My String Is Null
} 
```

或者，你可以这样做

```
if(mystring == String.Empty)
{
    //My String is Empty
} 
```

虽然它可能不是最好的方法，但您可以将 HList 的空实例添加到您的类/结构中。例如

```
HList findHListentry(string letter)
{
    if (string.IsNullOrWhiteSpace(letter))
    {
        HList result = listentry.Find(delegate(HList bk) { return bk.letter == letter; });
        return result;
    }
    else
    {
        return HList.Empty;
    }
}

public struct HList
{
    public const HList Empty;
} 
```

现在您可以代替 null 执行此操作

```
if(myHList == HList.Empty)
{
    //My HList is Empty
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-09T20:23:52.817

如果您不想返回 null，则可以创建 HList 的静态实例，用于指示它是“空”值。

类似于 EventArgs.Empty

`public static readonly HList EmptyHList = new Hlist() { /* initialise */ };`

# javascript - 选择下一个和上一个列表项

> ID：11891274
> 
> 赞同：0
> 
> 时间：2012-08-09T20:17:33.527
> 
> 标签：javascript, jquery, css-selectors

我正在制作一个简单的图片库，在下面的一行缩略图上方显示一张较大的图片。我通过使用针对 li 的 css 规则将每个缩略图的初始不透明度设置为 0.3。使用 javascript 我想将当前选择的缩略图的不透明度更改为 1，但将其余部分设置为 0.3。

我已经设法将当前缩略图的不透明度从 0.3 更改为 1，但我无法弄清楚如何将上一个（或下一个）缩略图的不透明度改回 0.3。

例如，如果当前选择了 #3 缩略图，我希望所有剩余的 5 个缩略图恢复到它们的原始不透明度设置 0.3

我已将我的一些代码放入下面的链接中，以便您了解我在做什么。

div 类="缩略图">

```
<ul>
    <li><a href='#' class='thumb' id="thumb_1"></a></li>
    <!-- MORE FOLLOW -->
</ul> 
```

```
$("#nextBtn").click(function() {
    currentPic++;
    $(".thumbnails ul li:nth-child(" + currentPic + ")").animate({
        "opacity": "1"
    });
}); 
```

完整代码示例：http: [//jsfiddle.net/nqKJw/](http://jsfiddle.net/nqKJw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:20:59.803

在将所需缩略图的不透明度设置为 1 的函数中，首先将**所有**缩略图的不透明度设置为 0.3：

```
$("#nextBtn").click(function() {
    $(".thumbnails ul li").animate({
        "opacity": "0.3"
    });
    currentPic++;
    $(".thumbnails ul li:nth-child(" + currentPic + ")").animate({
        "opacity": "1"
    });
}); 
```

试试看：http: [//jsfiddle.net/nqKJw/1/](http://jsfiddle.net/nqKJw/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:30:49.327

[Here](http://jsfiddle.net/unloco/nqKJw/3/)'s a nice solution using the `.current` class

CSS:

```
.current{ opacity:1 !important; } 
```

Jquery:

```
$("#nextBtn").click(function() {
    var nextThumb = $('.thumbnails .current').removeClass('current').next();
    nextThumb = nextThumb.length?nextThumb:$('.thumbnails li:first');
    $(nextThumb).addClass('current');
});

$("#prevBtn").click(function() {
    var nextThumb = $('.thumbnails .current').removeClass('current').prev();
    nextThumb = nextThumb.length?nextThumb:$('.thumbnails li:last');
    $(nextThumb).addClass('current');
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:24:15.260

只需在更改当前项目之前更改当前项目的不透明度值

```
$("#nextBtn").click(function() {
  $(".thumbnails ul li:nth-child(" + currentPic + ")").animate({
      "opacity": ".3"
  });

  currentPic++;

  $(".thumbnails ul li:nth-child(" + currentPic + ")").animate({
      "opacity": "1"
  });
}); 
```

同样对于 prevBtn

[更新了 JSFiddle](http://jsfiddle.net/nqKJw/2/)

# javascript - 带有字符串的javascript日期

> ID：11891277
> 
> 赞同：0
> 
> 时间：2012-08-09T20:17:49.877
> 
> 标签：javascript, date, formatting

我正在尝试将javascript中的日期从 MM/dd/yyyy 转换为 yyyy/MM/dd

所以这**有效**：

```
var d = new Date("08/08/2012");
dateString = d.getFullYear() + "/" + d.getMonth() + "/" + d.getDate();
document.write(dateString); 
```

输出 = 2012/7/8

///////////////////////////////////////// /

这**不是**：

```
var dateString = "08/08/2012";
var d = new Date(dateString);
dateString = d.getFullYear() + "/" + d.getMonth() + "/" + d.getDate();
document.write(dateString); 
```

**这也不**是：

```
var dateString = "08/08/2012";
var d = Date.parse(dateString);
dateString = d.getFullYear() + "/" + d.getMonth() + "/" + d.getDate();
document.write(dateString); 
```

如何使它与字符串变量一起使用？谢谢

～喵喵

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:20:51.850

```
var dateString = "08/08/2012";
var d = new Date(dateString);
dateString = d.getFullYear() + "/" + d.getMonth() + "/" + d.getDate();
document.write(dateString); 
```

那应该[而且确实](http://jsfiddle.net/ZscEC/)有效。请记住，JavaScript 将月份存储为零索引值。

如果你想有前导零，那么你必须做一些魔术：

```
var dateString = "08/08/2012";
var d = new Date(dateString);
dateString = d.getFullYear() + "/" + ('0' + (d.getMonth()+1)).slice(-2) + "/" + ('0' + d.getDate()).slice(-2);
document.write(dateString);​ 
```

[jsFiddle](http://jsfiddle.net/wkqmH/)

您的`Date.parse( )`示例不起作用的原因是该函数返回时间戳（自 1970 年以来的毫秒数），而不是 Date 对象。因此，您不能调用`getFullYear()`时间戳上的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:31:53.183

如果您需要做的只是重新排序值，您可以执行以下操作：

```
var dateString = "08/08/2012";
var dateElements = dateString.split("/");
var outputDateString = dateElements[2] + "/" + dateElements[0] + "/" + dateElements[1];
document.write(outputDateString ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:32:47.540

我可以向 MrSlayer 确认该代码在 jsFiddle 中有效。

您的使用尝试`Date.parse()`实际上应该是 using `Date(String(dateString))`。

不要忘记每个月加 1。

# c# - 使用文件上传获取确切的文件路径以通过电子邮件 C# ASP.NET 发送文件

> ID：11891278
> 
> 赞同：0
> 
> 时间：2012-08-09T20:17:53.690
> 
> 标签：c#, asp.net, email, file-upload, path

我想使用 c# ASP.net 通过电子邮件发送文件（也许还有更多文件，但目前我担心至少只发送一个文件）

目前，如果您想发送电子邮件，我确实有一种方法可以使用

```
public string EnviarMensaje(int intIdVendedor, string strCorreoPara, string strCorreosAdicionales, string strTema, string strMensaje, string strRuta)
    {
        string strResultado="";
        DataTable dt = ConexionBD.GetInstanciaConexionBD().GetVendedorEspecifico(intIdVendedor);
        string strCuerpo = strMensaje + "\n\n\n\nMensaje Enviado Por:\n" + dt.Rows[0]["Vendedor"] + "\n" + dt.Rows[0]["Email"] + "\n" + dt.Rows[0]["Telefono"];
        string[] strListaCorreos = strCorreosAdicionales.Split(new Char[] {' ', ','}, StringSplitOptions.RemoveEmptyEntries);

        try
        {
            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient("smtpout.secureserver.net");

            mail.Subject = strTema;
            mail.Body = strCuerpo;
            mail.From = new MailAddress(strCorreoDe);
            mail.To.Add(strCorreoPara);

            foreach (string c in strListaCorreos)
            {
                mail.To.Add(c);
            }

            if (strRuta != "")
            {
                Attachment attachment;
                attachment = new Attachment(strRuta);
                mail.Attachments.Add(attachment);
            }

            SmtpServer.Port = 80;
            SmtpServer.Credentials = new System.Net.NetworkCredential(strCorreoDe, strContrasena);
            SmtpServer.EnableSsl = false;

            SmtpServer.Send(mail);
            strResultado = "Exito";
        }

        catch (Exception ex)
        {
            strResultado = ex.ToString();
        }

        return strResultado;
    } 
```

在 aspx 我有

```
<asp:FileUpload ID="fileUploadArchivos" runat="server" />

<asp:ImageButton ID="imgBtnEnviar" runat="server" Height="60px" Width="60px" ImageUrl="~/img/iconos/email.png" CausesValidation = "True" ValidationGroup="vgpCorreo" onclick="imgBtnEnviar_Click" /> 
```

在我的cs上

```
EnviarEmail objEmail = new EnviarEmail();

protected void imgBtnEnviar_Click(object sender, ImageClickEventArgs e)
{
if (fileUploadArchivos.HasFile)
{
    strArchivo = Path.GetTempFileName();\\RIGHT NOW I LEFT IT THIS WAY, BUT I NOW THAT HERE IS THE PROBLEM, I DON'T KNOW WHTAT CAN I DO HERE
}
string strResultado = objEmail.EnviarMensaje((int)Session["IdVendedor"], lblCorreoPara.Text, tbxCorreoPara.Text, tbxTema.Text, tbxMensaje.Text, strArchivo); 
```

}

但是，问题出在 FileUpload 中。我尝试了许多方法，例如 Server.MapPath、Path.GetFileName、GetDirectoryName、GetFullPath、GetPathRoot ......而且我总是一无所获，只有文件名或完全不同的路径（我猜是服务器类型的路径） ..

我现在只想获得一个像 C:\Test.txt 这样简单的文件路径……我想如果我能从 FileUpload 中得到那个确切的字符串，我就可以发送它……但是，我不知道如何使它工作。

希望你能帮助我谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:39:24.557

如果您需要保存在服务器上的上传文件的本地副本，您可以这样做

```
fuFileUpload.SaveAs(MapPath(filepath)); 
```

然后你的 strRuta 可以使用你刚刚保存的文件

```
strRuta = Server.MapPath(filepath); 
```

准备传入新的 Attachment 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:47:25.800

*您根本*不需要将文件保存到磁盘，如果您只想将其添加为附件，则不需要。

`FileUpload`有一个[`FileContent`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.filecontent.aspx)属性是`Stream`- 类的一些构造函数将[`Attachment`](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.attachment)流作为参数。

解决方案是将此流传递给您的方法并直接使用它。

在后面的代码中：

```
string strResultado = objEmail.EnviarMensaje((int)Session["IdVendedor"], 
                                             lblCorreoPara.Text, 
                                             tbxCorreoPara.Text, 
                                             tbxTema.Text, 
                                             tbxMensaje.Text, 
                                             fileUploadArchivos.FileContent); 
```

在你的课堂上：

```
public string EnviarMensaje(int intIdVendedor, 
                            string strCorreoPara, 
                            string strCorreosAdicionales, 
                            string strTema, 
                            string strMensaje, 
                            Stream attachmentData)
{

...

  var attachment = new Attachment(attachmentData, "nameOfAttachment");

...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:54:12.153

您可以尝试使用流而不是简单的文本：

```
public string EnviarMensaje(int intIdVendedor, string strCorreoPara, string strCorreosAdicionales, string strTema, string strMensaje, string strRuta)
    {
        string strResultado="";
        DataTable dt = ConexionBD.GetInstanciaConexionBD().GetVendedorEspecifico(intIdVendedor);
        string strCuerpo = strMensaje + "\n\n\n\nMensaje Enviado Por:\n" + dt.Rows[0]["Vendedor"] + "\n" + dt.Rows[0]["Email"] + "\n" + dt.Rows[0]["Telefono"];
        string[] strListaCorreos = strCorreosAdicionales.Split(new Char[] {' ', ','}, StringSplitOptions.RemoveEmptyEntries);

        try
        {
            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient("smtpout.secureserver.net");

            mail.Subject = strTema;
            mail.Body = strCuerpo;
            mail.From = new MailAddress(strCorreoDe);
            mail.To.Add(strCorreoPara);

            foreach (string c in strListaCorreos)
            {
                mail.To.Add(c);
            }

            bool hasAttachment = !string.IsNullOrWhitespace(strRuta);
            System.IO.FileStream stream = null;
            Attachment attachment = null;

            if (hasAttachment)
            {
                // Create a file stream.
                stream = new FileStream(strRuta, FileMode.Open, FileAccess.Read);

                // Define content type.
                ContentType contentType = new ContentType();
                contentType.MediaType = MediaTypeNames.Text.Plain; // or whatever your attachment is

                // Create the attachment and add it.
                attachment = new Attachment(stream, contentType);
                mail.Attachments.Add(attachment);
            }

            SmtpServer.Port = 80;
            SmtpServer.Credentials = new System.Net.NetworkCredential(strCorreoDe, strContrasena);
            SmtpServer.EnableSsl = false;

            SmtpServer.Send(mail);
            strResultado = "Exito";

            // Don't forget to release the resources if the attachment has been added
            if (hasAttachment)
            {
                data.Dispose();
                stream.Close();
                stream.Dispose();
            }
        }

        catch (Exception ex)
        {
            strResultado = ex.ToString();
        }

        return strResultado;
    } 
```

# smarty - 如何 fetch() Smarty 模板的子部分

> ID：11891286
> 
> 赞同：3
> 
> 时间：2012-08-09T20:18:38.590
> 
> 标签：smarty, smarty3

**背景**Smarty 是一个模板引擎，它将表示层与 Web 应用程序的逻辑层分开。它非常适合用于开发 Web 应用程序的模型-视图-控制方法。视图可以用 Smarty 模板表示，这些模板只包含 HTML 和 Smarty 标签。控件可以由 PHP 文件实现，这些文件通过 PHP 代码根据其中包含的逻辑提供适当的视图。通过`display()`命令显示模板来实例化视图。或者，可以将模板作为变量读入，而无需通过`fetch()`命令显示。模板的文件名是这两个命令的参数。

**问题**该`fetch()`命令可以读取整个模板。为了读取模板的部分/子部分，这些部分中的每一个通常需要存储在一个单独的文件中，其名称可以作为命令的参数。这会创建不必要的文件。

**问题**是否可以通过以某种方式标记模板的部分来仅获取 Smarty 模板的一部分？

**案例示例**下面我展示了一个带有 Smarty 和 HTML 标签的示例模板文件，以及带有 PHP 代码的相应控制器文件。

*模板文件 (index.tpl)*

```
<html>
<body>
    <div id="sec1">
        First section
    </div>
    <div id="sec2">
        Second section
    </div>
</body>
</html> 
```

*控制器文件 (index.php)*

```
<?php
    $smarty = new Smarty;
    $template = $smarty->fetch("index.tpl");
?> 
```

在上面的示例中，`$template`变量将包含模板页面的完整输出。下面是示例中其内容的转储。

```
$template => string(255)
"<html><body>
<div id="sec1">First section</div>
<div id="sec2">Second section</div>
</body></html>" 
```

但是，假设我希望分别从每个 DIV 容器中读取代码，并将它们存储到单独的变量中，我该如何实现呢？例如，假设我有一个名为`fetch_sub()`. 这是我对使用它的期望。

```
<?php
    $smarty = new Smarty;
    $div1 = $smarty->fetch_sub("index.tpl", "sec1");
    $div2 = $smarty->fetch_sub("index.tpl", "sec2");
?> 
```

然后`$div1`, etc 将仅包含相关的子部分，而不是整个模板。

**其他信息**我*不是*Smarty 的初学者，并且对基本概念以及 Smarty 的一些高级概念有相当好的掌握。以下是我迄今为止在概念化问题和寻求解决方案方面的尝试。我最初的粗略想法是使用 将模板划分为多个部分`{capture}`，然后*以某种方式*引用这些部分中的每一个。我在下面给出了这个想法的一个概要示例。

```
 {capture name=sec1}
    <div id="sec1">
        First section
    </div>
    {/capture}
    . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:18:43.993

Smarty（从 Smarty 3.1 开始）没有内置功能可以让您实现目标。我在 2011 年提出了类似的建议，但我们还没有开始实施。

也许您可以将生成的 HTML 解析为 DOM 并使用 xpath 或类似的东西帮助自己？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-25T17:52:20.327

你可以试试这个：

**sec1.tpl**

```
<div id="sec1">First section</div> 
```

**sec2.tpl**

```
<div id="sec2">Second section</div> 
```

**索引.tpl**

```
<html><body>
{include file="sec1.tpl"}
{include file="sec2.tpl"}
</body></html> 
```

然后你可以通过调用来获取部分：

```
 $smarty = new Smarty;
$div1 = $smarty->fetch("sec1.tpl");
$div2 = $smarty->fetch("sec2.tpl"); 
```

# objective-c - 您如何防止访问可相互访问的变量？

> ID：11891291
> 
> 赞同：1
> 
> 时间：2012-08-09T20:18:56.687
> 
> 标签：objective-c, c, multithreading

我有一个接受整数指针作为参数的函数，然后它会改变它。我有几个在不同线程上运行的函数实例——一些与参数具有相同的整数。

如果参数正在被另一个线程上的另一个函数实例更改，我需要暂停该函数的实例，并在另一个实例完成更改变量时恢复。

对于此类问题，看似显而易见的解决方案是 NSLock 或 POSIX 互斥锁，但这会阻止函数的*所有*实例继续运行，即使整数参数不同。

为了更直观地了解我的意思，请考虑以下内容：

```
void theFunction (int *argument)
{   
    NSLock *theLock = [NSLock new];
    [theLock lock];

    (*argument) ++;

    [theLock unlock];
} 
```

上面的代码将阻止函数的*所有*实例运行，但是我只需要暂停整数参数*相同*的函数实例。如何专门锁定变量，以暂停任何尝试读取或写入它的实例，直到它被解锁？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:24:36.710

如果您有 int*，请考虑使用原子增量操作（请参阅 man on OSAtomicAdd32）。您想要的按值锁定非常便宜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:22:08.913

为每个参数使用单独的锁？

# java - apache httpclient 有什么方法可以根据 URI 设置凭据

> ID：11891292
> 
> 赞同：0
> 
> 时间：2012-08-09T20:18:58.943
> 
> 标签：java, resteasy, apache-httpclient-4.x

目前我有一些使用resteasy调用的uris，看起来像这样：

```
http://host.com/api/project1/getsomestuff 
```

和

```
http://host.com/api/project2/getsomestuff 
```

两者都使用摘要身份验证，但需要不同的用户名和密码进行身份验证。目前在代码中，我必须通过为每个项目创建不同的客户端实例来处理这个问题，如下所示：

```
DefaultHttpClient project1Client = new DefaultHttpClient();
Credentials project1Credentials = new UsernamePasswordCredentials("user1", "password1");
project1Client.getCredentialsProvider().setCredentials(AuthScope.ANY, project1Credentials);
ClientExecutor executor1 = new ApacheHttpClient4Executor(project1Client);
MyService project1Proxy = ProxyFactory.create(MyService.class, executor1);
project1Proxy.getSomeStuff("project1");

DefaultHttpClient project2Client = new DefaultHttpClient();
Credentials project2Credentials = new UsernamePasswordCredentials("user2", "password2");
project2Client.getCredentialsProvider().setCredentials(AuthScope.ANY, project1Credentials);
ClientExecutor executor2 = new ApacheHttpClient4Executor(project1Client);
MyService project2Proxy = ProxyFactory.create(MyService.class, executor2);
project2Proxy.getSomeStuff("project2"); 
```

我查看了 AuthScope 和 CredentialsProvider ，但我看不出这怎么可能。有谁知道使用同一客户端使用两组凭据的任何方法，还是我被困在使用多个客户端？

另外，请注意，我不控制此 rest 调用的服务器端，并且两个调用使用相同的领域，因此我无法为每个领域设置不同的凭据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:37:49.613

我觉得你运气不好。查看文档，您无法创建向同一主机和端口上的不同路径发送不同密码的 Authscope。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T12:13:10.110

如果这些应用程序具有不同的安全上下文，它们也可能具有不同的身份验证领域（或者至少它们应该具有）。可以在 AuthScope 对象上显式设置领域属性，以将其显式匹配到具有给定领域名称的特定身份验证上下文。

# c# - 是否存在任何在解析时不加载整个文件的 DOM 实现？

> ID：11891294
> 
> 赞同：4
> 
> 时间：2012-08-09T20:19:04.663
> 
> 标签：c#, xml, dom

我有一些大于可用内存的 XML 文件，以及一个大型（！）代码库，假设它可以使用 DOM 结构对该文件进行操作。但是，一些用户报告了大输入大小的 OutOfMemoryException ；并且 XML 大于 32 位处理器上可用的地址空间。

是否有可以处理这种情况的 DOM 实现，并且只在必要时“水合”子对象，以实现对大量 XML 文件的合理内存使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:47:05.973

MS XmlTeam 在两篇文章中概述了一个[很好的解决方案，](http://blogs.msdn.com/b/xmlteam/archive/2007/03/05/streaming-with-linq-to-xml-part-2.aspx)用于获得 linq2xml 的好处，但流式传输文件而不是加载整个内容。经过许多死胡同和死胡同，这是我从数据库转储中读取 >10GB xml 文件时确定的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:03:19.870

*DOM*对象模型依赖于将所有数据加载到内存中的事实。即使你会发现一个实现延迟加载延迟的东西，如果*DOM* api 用户遍历整个*DOM*树，你仍然会耗尽内存。

实际上，当您执行`XMemorySavingXDocument`.Load("big.xml")` 时会节省内存，但第一个 XPath 或 LINQ 查询仍会导致*OutOfMemoryException*。如果任何查询确实遍历了完整的 DOM 树，则这是正确的。如果你能确保永远不会出现这种情况，那么你就可以摆脱这种懒惰的 DOM 树。

我不知道任何这样的实现，但我怀疑无论如何它会对你的情况有所帮助。正如你所说，大量的 DOM Api 用户将通过 DOM 树接触所有节点，并且通过这样的解决方案，你会在几毫秒后得到 OutOfMemoryException。

XML DOM 对象模型确实将 xml 文件“解压缩”为内存中的表示形式，它消耗的内存 (x64) 比原始文件多 7 倍。对于 32 位，它仍然是大约 3.5 倍。

XML DOM 模型如此臃肿的原因是每个 dom 节点都知道它的子节点、父节点和属性。这是每个 DOM 节点的对象引用，确实会花费你很多。

托管类对象每个实例至少消耗 12/24 字节。由于每个节点指针确实会在总内存消耗中增加 4/8 字节（x86，x64），因此使用大的 xml 文件会很快耗尽内存。有关 .NET 对象大小的更多信息，请参阅[本文](http://geekswithblogs.net/akraus1/archive/2012/07/25/150301.aspx)。

由于 DOM 对于大型 XML 文件不是一个好主意，但您当前的架构需要 DOM，我担心您需要将 DOM 抽象出来，并用一个可以提取（并可能修改）您感兴趣的内容的 API 替换它。在一个大型组织，您可以将这个主题提交给建筑师，并将其作为一个必须优先考虑的重大重新设计来展示。

如果您更幸运地得到架构师和管理层的承诺，那么您从未去过的国家的一些外包程序员可以让他们的下一个大型积压项目开始工作;-)。

为了给你一些数字，我确实创建了一个包含 100 万个整数的文件，数据格式对性能的影响有多大。我确实使用了 3 种不同的数据格式

*   二进制 40 MB
*   ASCII 文本文件 80 MB (ddd\r\nddd\r\n...)
*   Xml 文件 170 MB ( *1* \r\n *2* ....)

然后我确实在 64 位进程中读取了它们

*   0,1s 通过内存映射文件的二进制文件
*   0,5s BinaryReader
*   2,5s 文本文件
*   5,3s XmlReader（流式传输）
*   8,6s XDocument.Load

除了 XDocument.Load 导致 1.2 GB 的内存峰值外，内存消耗持平在 ~ 200 MB。您的性能目标可能不同，但我会首先通过流式 XmlReader 将 Xml 内容转换为可以更快加载的二进制格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:25:56.660

这不是最佳解决方案，但在过去，我将 XML 文件作为字符串读取，并使用正则表达式将部分分解为它们自己的 DOM 对象。

也许您也可以使用 XPath？（https://developer.mozilla.org/en-US/docs/Using_XPath）

# mysql - 编写与 MySQL 中的 UUID 列匹配的查询的正确方法是什么？

> ID：11891295
> 
> 赞同：1
> 
> 时间：2012-08-09T20:19:11.480
> 
> 标签：mysql, entity-framework

我有一个从 Postgres 移植到 MySQL 的应用程序。别管为什么。该应用程序使用 Entity Framework 4 来查询数据库。

由于各种原因，我不得不`Guids`在我的 C# 代码中使用，将它们保存到数据库中，然后根据保存的`Guids`. 我对 MySQL 以及它如何处理本质上是 blob 的东西不是很熟悉。

首先，MySQL 中没有 UUID 类型。我必须将它们保存为 BINARY(16) 值。好的。我已将列创建为 BINARY(16) 并将数据写入表中。好的。

我的问题是我看不到与 Guid 的存储值相匹配。我编写了一个单元测试，它`Guid`使用表已知的数据写入数据，然后尝试检索它。数据很好地进入数据库，但是当我尝试读回它时，我没有得到任何行。

这是一个示例表架构：

```
CREATE TABLE `MyDatabase`.`MyTable` (
    `id`                INT             NOT NULL AUTO_INCREMENT,
    `guid`              BINARY(16)      NOT NULL,
    `applicationId`     INT(11)         NOT NULL,
    `name`              VARCHAR(256)    NOT NULL,
    Description         VARCHAR(256)    NULL,
    SessionTimeout      INT             NOT NULL,
    DomainId            INT             NOT NULL,
    PRIMARY KEY (`id`),
    CONSTRAINT IX_aspnetx_groups UNIQUE ( `applicationId`, `id` )
); 
```

这是实体框架代码：

```
var g = ( from r in context.MyTable
          where r.guid = id
          select r ).Single(); 
```

这是 Entity Framework 生成的查询：

```
SELECT
`Extent1`.`id`, 
`Extent1`.`guid`, 
`Extent1`.`applicationId`, 
`Extent1`.`name`, 
`Extent1`.`Description`, 
`Extent1`.`SessionTimeout`, 
`Extent1`.`DomainId`
FROM `aspnetx_groups` AS `Extent1`
WHERE `Extent1`.`guid` = '81d7de5e-4212-4ff8-b3d4-9f115261971d' LIMIT 2; 
```

当它执行时，它不返回任何行，导致在我的 C# 代码中引发“序列不包含元素”异常。

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T20:38:43.210

事实证明，我遇到的问题与 MySQL Connector/Net 包中实体框架连接器的怪癖有关。如果您将其`BINARY(16)`用作数据库中的数据类型，则需要添加一个连接字符串设置`Guids`：

```
Old Guids=True 
```

将其添加到连接字符串后，Entity Framework 开始发出在插入、更新或比较 Guid 时真正有效的代码。

我还得出结论，MySQL 中的 UUID / Guid 支持只是半生不熟，需要一些认真的工作才能使其达到可用状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:36:07.670

在 SELECT 的 WHERE 子句中，看起来您正在将 BINARY(16)（等号左侧的 guid）与右侧的字符串文字进行比较。

为了进行有效的比较，我将该字符串文字转换为 BINARY(16)，然后将其与 guid 进行比较。

因此，删除所有短划线字符，然后使用 UNHEX 函数应该可以解决问题：

```
WHERE `Extent1`.`guid` = 
  UNHEX(REPLACE('81d7de5e-4212-4ff8-b3d4-9f115261971d','-','')) 
```

为了提高性能，您希望您的查询引用左侧的裸 guid 列（就像它一样），而*不是*将 guid 列包装在任何类型的函数中。您会希望在谓词的文字端进行任何转换，这样转换只需在查询开始时进行一次，而不必对表中的每一行进行转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-17T03:37:20.673

只是为了补充托尼的答案，我一直在使用旧的 guid，直到今天，EF 似乎没有正确转换 GUID。

它以某种方式解析了错误的 GUID，因此在代码级别比较这些值时我必须使用不同的 GUID

# joomla - Joomla 文件夹识别

> ID：11891298
> 
> 赞同：0
> 
> 时间：2012-08-09T20:19:27.377
> 
> 标签：joomla, joomla1.5

我开发了，现在支持 Joomla 1.5。似乎它最近被黑客攻击了：MW:SPAM:SEO (http://labs.sucuri.net/db/malware/malware-entry-mwspamseo)。我查看了目录结构（使用 FTP），并在 library\joomla\session\storage 中发现了一个名为：'f42ad68b3fb9cdd940d9eacc861791aa' 的文件夹。这个文件夹是干什么用的？我在开发网站时从未使用过它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T01:34:19.323

我已经应对了这种恶意软件的攻击。就我而言，它似乎是通过图像幻灯片插件（对于 joomla 2.5）进入的。为了找到更好的方法，我下载了整个网站并搜索 t='';}}x[la]=z;}document.write('<'+x[0]+' '+x[4]+ '>.'+x[2]+'{'+x[1]+'} ');}dnnViewState();

这是根据网站的 sucuri 扫描的恶意软件代码字符串。在 javacript 脚本中有一个这样的实例，根据 sucuri 扫描仪，删除该脚本后会为该站点生成一份干净的健康单。我不会轻易删除整个文件夹的文件，特别是因为这个恶意软件占用空间很小——只有 1 行 javascript。我知道这个线程已经过时了，但也许其他人仍然有问题。我的感染发生在 2013 年 2 月左右

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:34:43.447

里面的默认文件`libraries\joomla\session\storage`是：

1.  acp.php
2.  数据库.php
3.  加速器.php
4.  索引.html
5.  内存缓存.php
6.  无.php
7.  xcahe.php

安装的扩展不应操纵任何核心 Joomla 文件并将任何内容存储在核心文件夹中。有，出于安全原因删除它们。

上面提到的大部分文件用于会话和缓存有关会话的更多信息，请阅读：php.net/manual/en/intro.session.php

至于将来解决黑客问题，我不久前回答了一个问题，其中解释了您可以做的一些事情并推荐了扩展。 [Joomla！2.5.4 被黑：诊断有问题](https://stackoverflow.com/questions/11036763/joomla-2-54-hacked-having-trouble-with-diagnosis/11037642#11037642)

# iphone - 禁用滚动 UIWebView

> ID：11891307
> 
> 赞同：3
> 
> 时间：2012-08-09T20:19:46.983
> 
> 标签：iphone, objective-c, ios, cocoa, uiwebview

如何禁用滚动`UIWebView`？我还想禁用“滚动反弹”。

提前致谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T20:23:43.373

在 iOS 5.x 上，UIWebView 有一个支持`scrollView`属性：

```
webView.scrollView.scrollEnabled = NO;
webView.scrollView.bounces = NO; 
```

在 iOS 4.x 及更早版本上，UIWebView 本身继承自 ScrollView：

```
webView.scrollEnabled = NO;
webView.bounces = NO; 
```

如果要检查是否在 iOS 4 或 5 上，可以测试 UIWebView 是否响应 scrollView 属性 getter：

```
if ([webView respondsToSelector:@selector(scrollView)]) {
    webView.scrollView.scrollEnabled = NO;
    webView.scrollView.bounces = NO;
} else {
    webView.scrollEnabled = NO;
    webView.bounces = NO;
} 
```

# r - 将因子转换为R中的日期

> ID：11891321
> 
> 赞同：2
> 
> 时间：2012-08-09T20:20:38.213
> 
> 标签：r

我有这个数据集并试图转换为日期，以便我可以绘制它：

```
dput(y)
structure(c(23L, 17L, 41L, 1L, 47L, 35L, 29L, 7L, 63L, 58L, 53L, 
12L, 24L, 18L, 42L, 2L, 48L, 36L, 30L, 8L, 64L, 59L, 54L, 13L, 
25L, 19L, 43L, 3L, 49L, 37L, 31L, 9L, 65L, 60L, 55L, 14L, 26L, 
20L, 44L, 4L, 50L, 38L, 32L, 10L, 66L, 61L, 56L, 15L, 27L, 21L, 
45L, 5L, 51L, 39L, 33L, 11L, 67L, 62L, 57L, 16L, 28L, 22L, 46L, 
6L, 52L, 40L, 34L), .Label = c("APR-07", "APR-08", "APR-09", 
"APR-10", "APR-11", "APR-12", "AUG-07", "AUG-08", "AUG-09", "AUG-10", 
"AUG-11", "DEC-07", "DEC-08", "DEC-09", "DEC-10", "DEC-11", "FEB-07", 
"FEB-08", "FEB-09", "FEB-10", "FEB-11", "FEB-12", "JAN-07", "JAN-08", 
"JAN-09", "JAN-10", "JAN-11", "JAN-12", "JUL-07", "JUL-08", "JUL-09", 
"JUL-10", "JUL-11", "JUL-12", "JUN-07", "JUN-08", "JUN-09", "JUN-10", 
"JUN-11", "JUN-12", "MAR-07", "MAR-08", "MAR-09", "MAR-10", "MAR-11", 
"MAR-12", "MAY-07", "MAY-08", "MAY-09", "MAY-10", "May-11", "MAY-12", 
"NOV-07", "NOV-08", "NOV-09", "NOV-10", "NOV-11", "OCT-07", "OCT-08", 
"OCT-09", "OCT-10", "OCT-11", "SEP-07", "SEP-08", "SEP-09", "SEP-10", 
"SEP-11"), class = "factor") 
```

我试过

```
 y1 <- strptime(y, format = "%b-%y") 
```

y1 得到所有 NA，有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:25:34.750

您需要一天将其转换为日期：

```
##Make each date the first of the month
strptime(paste("1", as.character(y)), format="%d %b-%y") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:39:28.780

如果您将定期处理月尺度上的时间序列，您可能还想查看 zoo 包，它是一个不需要添加“月的第一天值”的“yearmon”类。它有许多相关的绘图和计算方法。广泛使用的“xts”包基于“动物园”结构。

```
 require(zoo)
 zym <- as.yearmon(as.character(y), "%b-%y")
 str(zym)
#Class 'yearmon'  num [1:67] 2007 2007 2007 2007 2007 ...
 head(zym)
#[1] "Jan 2007" "Feb 2007" "Mar 2007" "Apr 2007" "May 2007" "Jun 2007"
 format(head(zym), "%b %y")
#[1] "Jan 07" "Feb 07" "Mar 07" "Apr 07" "May 07" "Jun 07" 
```

# jquery - 使用 json 在 python / django 中设置用户登录并且不知道从哪里开始

> ID：11891322
> 
> 赞同：1
> 
> 时间：2012-08-09T20:20:42.373
> 
> 标签：jquery, python, ajax, django, rest

我有一个非常模糊的问题，我不知道从哪里开始。

我需要使用 python 进行 ajax 登录（django REST 调用）

jQuery 可以从我这里获得。

我得到了这个：

```
 import sys, base64
    import httplib, urllib, urlparse, json
    auth = 'Basic %s' % base64.encodestring('%s:%s' % (username, password)).strip()
    headers = {'Content-Type':'application/x-www-form-urlencoded', 'Authorization':auth}
    endpoint = "urlendpoint.com"
    url = "/login/"
    conn = httplib.HTTPSConnection(endpoint)
    conn.request("POST", url, "", headers)
    response = conn.getresponse()
    if response.status != httplib.OK: raise Exception("%s %s" % (response.status, response.reason))
    result = json.load(response)
    if "token" not in result: raise Exception("Unable to acquire token.")
    if "sessionid" not in result: raise Exception("Unable to acquire session ID.")
    print result["token"], result["sessionid"]
    conn.close() 
```

我需要通过 POST 发送登录信息，然后设置一个 cookie。

我完全不知道从哪里开始这项任务。使用命令行，我可以设置 /login.py 文件，使用在上述变量字段和 VIOLA 中硬编码的用户名和密码访问所述文件 - 它工作正常。但是，我不知道从哪里开始使用 ajax 来完成这项任务。

这里的主要内容是，一旦用户登录，我需要在登录用户和服务器之间建立会话 ID，以便访问 REST (json) 端点，以便我可以开始添加数据（通过 Ajax ）。

任何帮助将不胜感激。

我希望有人

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T21:42:28.770

常规视图的实现方式与 AJAX 视图的实现方式在功能上没有区别。唯一的区别是您发送的响应是什么：

```
from django.contrib.auth import authenticate, login
from django.http import HttpResponse, HttpResponseBadRequest
from django.utils import simplejson

def ajax_login(request):
    if request.method == 'POST':
        username = request.POST.get('username', '').strip()
        password = request.POST.get('password', '').strip()
        if username and password:
            # Test username/password combination
            user = authenticate(username=username, password=password)
            # Found a match
            if user is not None:
                # User is active
                if user.is_active:
                    # Officially log the user in
                    login(self.request, user)
                    data = {'success': True}
                else:
                    data = {'success': False, 'error': 'User is not active'}
            else:
                data = {'success': False, 'error': 'Wrong username and/or password'}

            return HttpResponse(simplejson.dumps(data), mimetype='application/json')

    # Request method is not POST or one of username or password is missing
    return HttpResponseBadRequest() 
```

# jquery - jQuery deferred 和 Backbone 保存成功方法的问题

> ID：11891326
> 
> 赞同：4
> 
> 时间：2012-08-09T20:20:48.817
> 
> 标签：jquery, backbone.js, jquery-deferred

`$.ajax`所以我正在尝试使用 jQuery 的延迟（以及返回承诺的事实）来处理一些异步代码。

这是一个快速示例，它显示了正在发生的事情

```
var update_model = function(model, resp){
    model.set('id', resp.id);
    m = model;
};

var print_id = function(){
    console.log(m.get('id'));
};

var MyModel = Backbone.Model.extend({});
var m = new MyModel({title: 'test'});

var model_promise = m.save({author: 'me'}, {success: update_model});

$.when(model_promise).then(print_id); 
```

问题是它`print_id`被称为之前`update_model`，我不知道如何让它发生相反的方式。

在实际示例中，我尝试保存从 1 到 100 个模型的任意位置，并且我需要从这些模型中获取 ID，然后才能进行下一步。

我在这里缺少一些基本的东西吗？

* * *

**编辑**

`update_model`确实被调用了——它只是发生在`print_id`. 另外，我尝试过使用该`done`方法`model_promise`，然后使用`then`：

```
model_promise.done(update_model).then(print_id); 
```

但随后`update_model`没有收到必要的论据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:33:42.123

问题是您的延迟在成功方法中解决。要使用带有 ajax 方法的延迟，请使用该`deferred.done().then()`模式（查看此处的“jqXHR 对象”部分：http://api.jquery.com/jQuery.ajax/ [）](http://api.jquery.com/jQuery.ajax/)。

```
var update_model = function(model, resp){ 
  model.set('id', resp.id); 
  m = model; 
};

var print_id = function(){ 
  console.log(m.get('id')); 
};

var MyModel = Backbone.Model.extend({}); 
var m = new MyModel({title: 'test'});

var $model_promise = m.save({author: 'me'});

$model_promise.done(update_model).then(print_id); 
```

# c# - Nlog 目标数据库在运行时设置连接信息

> ID：11891329
> 
> 赞同：4
> 
> 时间：2012-08-09T20:20:53.690
> 
> 标签：c#, nlog

使用 Nlog 和 Database 目标，有没有办法在运行时设置连接信息？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T21:00:53.220

我记得我的一些同事正在做类似的事情。他找到了这个答案：[http](http://nlog-forum.1685105.n2.nabble.com/DDL-for-Database-Table-How-to-set-Connection-String-Programmatically-td5241103.html) ://nlog-forum.1685105.n2.nabble.com/DDL-for-Database-Table-How-to-set-Connection-String-Programmatically-td5241103.html运行良好。

从上面的链接

> 覆盖连接字符串的最简单方法是使用 GDC：

```
<target name="db" type="Database" connectionString="${gdc:myConnectionstring}" ... /> 
```

> 现在在您的代码中，您可以简单地执行以下操作：

```
GDC.Set("myConnectionString", "Server=.;database=....."); 
```

> 您还可以修改目标：

```
var config = LogManager.Configuration;
var dbTarget = (DatabaseTarget)config.FindTargetByName("db");
dbTarget.ConnectionString = "server=.;...";
LogManager.ReconfigExistingLoggers(); 
```

# windows - 如何在批处理文件中获取昨天的日期

> ID：11891335
> 
> 赞同：12
> 
> 时间：2012-08-09T20:21:05.837
> 
> 标签：windows, date, batch-file

我知道如何在 Windows 7 中获取今天的日期。这是我正在使用的命令：

```
%DATE:~6,4%%DATE:~3,2%%DATE:~0,2% 
```

但我想昨天得到，我不知道如何。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-08-07T05:12:09.697

如果您仅限于*，* `cmd.exe`那么其他解决方案（尽管它们的大小）可能与您获得的一样好。但是，现代 Windows（例如您的 Win7）附带了许多*其他*工具，可以更轻松地完成这项工作。

只需创建一个 VBScript`yester.vbs`脚本，如下所示：

```
d = date() - 1
wscript.echo year(d) * 10000 + month(d) * 100 + day(d) 
```

然后你可以从你的`cmd`脚本中调用它：

```
for /f %%a in ('cscript //nologo yester.vbs') do set yesterday=%%a 
```

并且`yesterday`变量将以`yyyymmdd`您想要的形式创建，供您操作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-09T20:29:17.567

找到了一个脚本，即使年份或月份发生变化[Dos Yesterday Batch](http://www.powercram.com/2010/07/get-yesterdays-date-in-ms-dos-batch.html)也能确保您获得前一天。

```
@echo off

set yyyy=

set $tok=1-3
for /f "tokens=1 delims=.:/-, " %%u in ('date /t') do set $d1=%%u
if "%$d1:~0,1%" GTR "9" set $tok=2-4
for /f "tokens=%$tok% delims=.:/-, " %%u in ('date /t') do (
for /f "skip=1 tokens=2-4 delims=/-,()." %%x in ('echo.^|date') do (
set %%x=%%u
set %%y=%%v
set %%z=%%w
set $d1=
set $tok=))

if "%yyyy%"=="" set yyyy=%yy%
if /I %yyyy% LSS 100 set /A yyyy=2000 + 1%yyyy% - 100

set CurDate=%mm%/%dd%/%yyyy%
set dayCnt=%1

if "%dayCnt%"=="" set dayCnt=1

REM Substract your days here
set /A dd=1%dd% - 100 - %dayCnt%
set /A mm=1%mm% - 100

:CHKDAY
if /I %dd% GTR 0 goto DONE
set /A mm=%mm% - 1
if /I %mm% GTR 0 goto ADJUSTDAY
set /A mm=12
set /A yyyy=%yyyy% - 1

:ADJUSTDAY
if %mm%==1 goto SET31
if %mm%==2 goto LEAPCHK
if %mm%==3 goto SET31
if %mm%==4 goto SET30
if %mm%==5 goto SET31
if %mm%==6 goto SET30
if %mm%==7 goto SET31
if %mm%==8 goto SET31
if %mm%==9 goto SET30
if %mm%==10 goto SET31
if %mm%==11 goto SET30
REM ** Month 12 falls through

:SET31
set /A dd=31 + %dd%
goto CHKDAY

:SET30
set /A dd=30 + %dd%
goto CHKDAY

:LEAPCHK
set /A tt=%yyyy% %% 4
if not %tt%==0 goto SET28
set /A tt=%yyyy% %% 100
if not %tt%==0 goto SET29
set /A tt=%yyyy% %% 400
if %tt%==0 goto SET29

:SET28
set /A dd=28 + %dd%
goto CHKDAY

:SET29
set /A dd=29 + %dd%
goto CHKDAY

:DONE
if /I %mm% LSS 10 set mm=0%mm%
if /I %dd% LSS 10 set dd=0%dd%

REM Set IIS and AWS date variables
set IISDT=%yyyy:~2,2%%mm%%dd%
set AWSDT=%yyyy%-%mm%-%dd% 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-22T13:12:00.200

```
@echo off
:: Strip the day of the week from the current date
FOR %%A IN (%Date%) DO SET Today=%%A
:: Parse the date, prefix day and month with an extra leading zero
FOR /F "tokens=1-3 delims=/" %%A IN ("%Today%") DO (
    SET Day=0%%A
    SET Month=0%%B
    SET Year=%%C
)
:: Remove excess leading zeroes
SET Day=%Day:~-2%
SET Month=%Month:~-2%
:: Display the results
SET Day
SET Month
SET Year
:: Convert to Julian date
CALL :JDate %Year% %Month% %Day%
:: Display the result
SET JDate
:: Subtract 1 day
SET /A JPast = JDate - 1
:: Display the result
SET JPast
:: Convert back to "normal" date again
CALL :GDate %JPast%
:: Display the result
::SET GDate=20130121
SET GDate

echo The previous day in form YYYYMMDD is %GDate%

pause
::::::::::::::::::::::::::::::::::::::::::::::::::::::

GOTO:EOF

:JDate
:: Convert date to Julian
:: Arguments : YYYY MM DD
:: Returns   : Julian date
::
:: First strip leading zeroes
SET MM=%2
SET DD=%3
IF %MM:~0,1% EQU 0 SET MM=%MM:~1%
IF %DD:~0,1% EQU 0 SET DD=%DD:~1%
::
:: Algorithm based on Fliegel-Van Flandern
:: algorithm from the Astronomical Almanac,
:: provided by Doctor Fenton on the Math Forum
:: (http://mathforum.org/library/drmath/view/51907.html),
:: and converted to batch code by Ron Bakowski.
SET /A Month1 = ( %MM% - 14 ) / 12
SET /A Year1  = %1 + 4800
SET /A JDate  = 1461 * ( %Year1% + %Month1% ) / 4 + 367 * ( %MM% - 2 -12 * %      Month1% ) / 12 - ( 3 * ( ( %Year1% + %Month1% + 100 ) / 100 ) ) / 4 + %DD% - 32075

SET Month1=
SET Year1=
GOTO:EOF
:GDate
:: Convert Julian date back to "normal" Gregorian date
:: Argument : Julian date  
:: Returns  : YYYY MM DD
:: 
:: Algorithm based on Fliegel-Van Flandern
:: algorithm from the Astronomical Almanac,
:: provided by Doctor Fenton on the Math Forum
:: (http://mathforum.org/library/drmath/view/51907.html),
:: and converted to batch code by Ron Bakowski.
::
SET /A P      = %1 + 68569
SET /A Q      = 4 * %P% / 146097
SET /A R      = %P% - ( 146097 * %Q% +3 ) / 4
SET /A S      = 4000 * ( %R% + 1 ) / 1461001
SET /A T      = %R% - 1461 * %S% / 4 + 31
SET /A U      = 80 * %T% / 2447
SET /A V      = %U% / 11
SET /A GYear  = 100 * ( %Q% - 49 ) + %S% + %V%
SET /A GMonth = %U% + 2 - 12 * %V%
SET /A GDay   = %T% - 2447 * %U% / 80
:: Clean up the mess
FOR %%A IN (P Q R S T U V) DO SET %%A=
:: Add leading zeroes
IF 1%GMonth% LSS 20 SET GMonth=0%GMonth%
IF 1%GDay%   LSS 20 SET GDay=0%GDay%
:: Return value
:: Here you can define the form that you want
SET GDate=%GYear%%GMonth%%GDay%
GOTO:EOF 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-11T07:12:32.133

这是一个即时创建 earlyday.vbs 文件、使用它并随后将其删除的解决方案。

它将结果存储在 NewDate 变量中

此示例计算 1 天前，但可以通过更改 Offset 变量的值轻松计算更早的日期。

```
@echo off
set Offset=1

echo d = date() - WScript.Arguments.Item(0) > earlierday.vbs
echo wscript.echo year(d) * 10000 + month(d) * 100 + day(d) >> earlierday.vbs

for /f %%a in ('cscript //nologo earlierday.vbs %Offset%') do set NewDate=%%a

del earlierday.vbs    
echo %NewDate%
pause 
```

您可以通过使用 %temp%\earlierday.vbs 在用户的临时文件夹中创建文件来稍微改进这一点。

*感谢**paxdiablo**，因为这是对他早期帖子的简单调整。*

**编辑：**这里有一个循环，接近我真正需要它做的事情。这将在今天的日期休息 14 天并返回该日期。然后它将一次返回 7 天，直到返回 35 天前。

```
@echo off
SETLOCAL EnableDelayedExpansion

set BackDaysFrom=14
Set BackDaysTo=35
Set BackDaysStep=7

echo d = date() - WScript.Arguments.Item(0) > earlierday.vbs
echo wscript.echo year(d) * 10000 + month(d) * 100 + day(d) >> earlierday.vbs

for /L %%i in (%BackDaysFrom%, %BackDaysStep%, %BackDaysTo%) do (
    for /f %%a in ('cscript //nologo earlierday.vbs %%i') do set NewDate=%%a
    echo !NewDate!
)

del earlierday.vbs    

pause 
```

# vba - 加快 vba 宏以将 xml 数据导入 excel 工作簿，同时删除连接和 xmlmaps

> ID：11891343
> 
> 赞同：0
> 
> 时间：2012-08-09T20:21:42.113
> 
> 标签：vba, excel-2007

我目前使用以下 vba 将 12000+ xml 文件导入到 excel 工作簿中：

```
Public Sub XMLIMport()

    Dim lngRow As Long
    Dim strXML As String
    Dim ct As Integer, XMLMap

    Const maxXMLDel = 1
    lngRow = 2

    Do While Cells(lngRow, 1) <> ""
        strXML = Cells(lngRow, 1)
        ActiveWorkbook.XMLIMport url:=strXML, _
        ImportMap:=Nothing, Overwrite:=False, _
        Destination:=Range("$B$" & lngRow)
        lngRow = lngRow + 1
        For Each XMLMap In ActiveWorkbook.XmlMaps
                  XMLMap.Delete
        Next
    Loop

End Sub 
```

然后继续将工作簿表从 excel 导入到 access 2007 中的表中。导入使用到服务器的链接来下载各个文件。

所以在 A 列中是 xml 链接，宏将 xml 数据结果放在 B、C、D 等列中，然后继续到下一行并为每个文件重复该过程。但是有这么多文件，需要相当长的时间才能完成该过程。我什至包括删除 xml 映射以加快该过程，但 Excel 2007 仍然需要相当长的时间才能完成该过程（2 小时以上）。

我猜这个宏是因为我想要的没有更好的词“优化”，还是应该有另一种方法？

更新：禁用屏幕更新但在尝试删除连接时遇到错误。

运行宏记录器我得到以下删除一些连接的信息，但我不确定如何将其添加到上述宏中以使其在继续下一个文件之前删除 xmlmap 之外的连接。

```
Sub deleteconnection()
'
' deleteconnection Macro
'

'
    ActiveWorkbook.Connections("itemResponse").Delete
    ActiveWorkbook.Connections("itemResponse1").Delete
    ActiveWorkbook.Connections("itemResponse10").Delete
    ActiveWorkbook.Connections("itemResponse100").Delete
    ActiveWorkbook.Connections("itemResponse101").Delete
    ActiveWorkbook.Connections("itemResponse102").Delete
    ActiveWorkbook.Connections("itemResponse103").Delete
    ActiveWorkbook.Connections("itemResponse104").Delete
    ActiveWorkbook.Connections("itemResponse105").Delete
    ActiveWorkbook.Connections("itemResponse106").Delete
    ActiveWorkbook.Connections("itemResponse107").Delete
    ActiveWorkbook.Connections("itemResponse108").Delete
    ActiveWorkbook.Connections("itemResponse109").Delete
    ActiveWorkbook.Connections("itemResponse11").Delete
    ActiveWorkbook.Connections("itemResponse110").Delete
    ActiveWorkbook.Connections("itemResponse111").Delete
    ActiveWorkbook.Connections("itemResponse112").Delete
    ActiveWorkbook.Connections("itemResponse113").Delete
    ActiveWorkbook.Connections("itemResponse114").Delete
    ActiveWorkbook.Connections("itemResponse115").Delete
    ActiveWorkbook.Connections("itemResponse116").Delete
    ActiveWorkbook.Connections("itemResponse117").Delete
    ActiveWorkbook.Connections("itemResponse118").Delete
    ActiveWorkbook.Connections("itemResponse119").Delete

End Sub 
```

编辑：尝试使用以下内容为连接添加删除

```
Public Sub XMLIMport()

    Dim lngRow As Long
    Dim strXML As String
    Dim ct As Integer, XMLMap
    Dim QTable As QueryTables

    'Application.ScreenUpdating = False

    Const maxXMLDel = 1
    lngRow = 2

    Do While Cells(lngRow, 1) <> ""
        strXML = Cells(lngRow, 1)
        ActiveWorkbook.XMLIMport url:=strXML, ImportMap:=Nothing, Overwrite:=False, Destination:=Range("$B$" & lngRow)
        lngRow = lngRow + 1
        For Each XMLMap In ActiveWorkbook.XmlMaps
                  XMLMap.Delete
         Next
         For Each QTable In ActiveSheet.QueryTables
                  QTable.Delete

         Next
    Loop

    'Application.ScreenUpdating = True

End Sub 
```

导致连接仍留在工作簿中，并重新插入第一个文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:48:17.893

要删除所有连接：

```
Dim Conn As Object        '* connection collection

For Each Conn In ActiveWorkbook.Connections

    Conn.Delete

Next Conn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-29T02:48:47.603

为了提高大型表的慢速 XMLmap 导入的性能，请在导入之前调整 ListObject 的范围。

从 60 秒导入 60'000 条记录 x 10 个字段

```
lst.XmlMap.Import "c:\data\dummy.xml" 
```

低于 5 秒：

```
lst.Resize lst.Range.Resize(data.count)
lst.XmlMap.Import "c:\data\dummy.xml" 
```

因此，在导入之前对项目进行计数确实是值得的。我认为性能差距是由于 excel 在导入期间分别插入每一行。可能您已经有了行数，否则您可以在 DomDocument 中使用 SelectNodes(x).length。或者使用 element(x).Descendents(y).Count...

# java - 将属性转换为输入流？

> ID：11891345
> 
> 赞同：3
> 
> 时间：2012-08-09T20:21:54.057
> 
> 标签：java, properties, sftp

修改后是否可以将 Properties 转换为 InputStream。

这里有一些代码来澄清这个问题：

```
sftpConnection = new connectSFTP(host, user, pass, port);
Properties ssProperties = new Properties();
InputStream in = null;
try{
    in = sftpConnection.download(fileName, fileDirectory);
    ssProperties.load(in);
    //System.out.println("File Found");
    ssProperties.setProperty(key, value);
    sftpConnection.upload(<<Need the new InputStream here>>, fileDirectory);
    in.close();     
}
catch(Exception ex)
{
System.out.println("File Not Found"); 
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T20:25:20.987

当然 - 最简单的方法是创建一个`ByteArrayOutputStream`，保存到其中，然后`ByteArrayInputStream`围绕结果创建一个：

```
ByteArrayOutputStream output = new ByteArrayOutputStream();
ssProperties.store(output, null);
ByteArrayInputStream input = new ByteArrayInputStream(output.toByteArray());
sftpConnection.upload(input, fileDirectory); 
```

# android - Android BaseExpandableListAdapter 与 AsyncTask 保存列表状态

> ID：11891354
> 
> 赞同：3
> 
> 时间：2012-08-09T20:22:17.333
> 
> 标签：android, android-layout, android-asynctask, expandablelistview, expandablelistadapter

几天来我一直试图弄清楚这一点，在搜索和搜索和搜索之后我放弃了并决定询问社区。任何帮助是极大的赞赏。我正在扩展 BaseExpandableListAdapter 并使用延迟图像加载技术将 svg 图形解析为可绘制对象并将这些可绘制对象设置为我的可扩展列表的子项。一切都很完美。

在后台解析和加载 svg 时，会生成可展开列表并处于折叠状态。如果用户展开一个组并且孩子们还没有完成加载，则会显示一个简单的“正在加载...”消息。只要任何一个 AsyncTasks 完成并在 onPostExecute 上触发，可扩展列表视图就会更新为另一个可绘制对象，并且任何扩展组都会重置回折叠状态。

**问题：** 我无法弄清楚如何保存组的展开/折叠状态，以便在 AsyncTasks 更新我的列表时它们不会被重置。似乎在显式调用 onContentChangedExtended() 时，整个列表被重置回其初始状态，而当 Activity 隐式更新视图时，它会保存展开/折叠状态。它是如何做到的？

并且最初强制所有组进行扩展不是一种选择，因为它超出了可扩展列表的全部目的。

```
public class ListAdapter<T> extends BaseExpandableListAdapter {
  // Some implementation here.
} 
```

这是填充组的子对象：

```
public class Expression {
  /* Some implementation here.
   * .
   * .
   * .
   */

  // ListViewGenerator extends ExpandableListActivity
  private class ParseSVG extends AsyncTask<ListViewGenerator, Void, ListViewGenerator> {
    /* Parse svg in background.
     * .
     * .
     * .
     */
    @Override
    protected void onPostExecute(ListViewGenerator listView)
      {listView.onContentChangedExtended();}
  }
} 
```

我尝试将 getGroupView() 中的 isExpanded 保存到布尔数组，并尝试从 ExpandableListActivity 恢复展开/折叠状态，但没有运气，只要调用 onContentChangedExtended()，getGroupView() 就已经重置回折叠状态状态所以我的数组被清除并设置为“折叠”......

先感谢您！

# c# - 将对象序列化为 XML 并包含 CDATA 部分

> ID：11891358
> 
> 赞同：0
> 
> 时间：2012-08-09T20:22:27.520
> 
> 标签：c#, xml-serialization

> **可能重复：**
> [如何使用 LINQ to XML 包含 CData？](https://stackoverflow.com/questions/6784337/how-to-include-cdata-using-linq-to-xml)

大约一个月前，我写了一篇关于在 Web 服务的 CDATA 标记中包装一些数据的文章（这是他们的要求，不是我的要求）。我做了一堆故障排除，并研究了一个提供一些结果的示例。（请参阅[将类序列化为 XML 并包含](https://stackoverflow.com/questions/11471676/problems-serializing-a-class-to-xml-and-including-a-cdata-section)代码和结果的 CDATA 部分的问题）

现在我意识到类设计至少可以说很糟糕，并且重写了我之前编写的大部分代码。因此，我花了一些时间才回到我之前提出的同一个问题。

为了简洁起见，我决定提出一个新问题并保留旧问题。

**我的（修改后的）问题**

我是否能够使用 XmlDocument 创建直到 CDATA 部分的元素，然后使用该`CreateCDataSection()`方法创建 CDATA 部分，如下所示？

```
<UpdateOrderStatus> 
    <Action>2</Action> 
        <Value> 
            <![CDATA[ 
                <Shipment> 
                    <Header> 
                        <SellerID>
                            ...
             ]]>
         </Value>
 </UpdateOrderStatus> 
```

我能够将现有对象序列化为正确的 XML 片段，但是我不能 100% 确定这段代码是否正确或是否有更好的方法：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.CreateDocumentFragment();
xmlDoc.CreateElement("Shipment");
xmlDoc.CreateElement("Action");
xmlDoc.CreateTextNode("2");
xmlDoc.CreateElement("Value");
xmlDoc.CreateCDataSection(orderToUpdate); 
```

如果你正在编程，你会怎么做？我不一定需要代码，除非这个概念只能以这种方式显示。类名或 MSDN 参考等都可以

# java - AppEngine HR Datastore 是否会自动分配负 ID？

> ID：11891359
> 
> 赞同：3
> 
> 时间：2012-08-09T20:22:30.750
> 
> 标签：java, google-app-engine, google-cloud-datastore

我正在将 AppEngine 与 HR 数据存储区一起使用，并且我的对象具有类型 ID `Long`（使用 Java）。我自己没有设置 ID，而是让 Datastore 选择一个新的唯一 ID。到目前为止，我只看到生成了积极的 ID。

AppEngine 是否也曾经分配过负 ID？（当然，假设我请求的 ID 不超过 2^63 个 ;-)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:28:05.840

[allocate_id_range](https://developers.google.com/appengine/docs/python/datastore/functions#allocate_id_range)（预分配 id 的 Python 方法）如果传递负值将引发异常。所以我猜否定的 id 键不是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-23T00:46:27.553

答案似乎是：也许。

在我的测试中，我只看到了积极的自动生成的 ID，但我能够存储消极的 ID（如果手动分配）。直到有人可以向我们指出以其他方式定义的规范，或者至少来自 AppEngine 团队的某些 Google 员工大声疾呼，我们必须假设他们至少保留随时生成负 ID 的权利。因此，我们的代码不能假定生成的 ID 始终为正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T05:38:04.387

不会。只会生成肯定的 ID。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T06:12:46.773

在 GAE 数据存储对象中生成了两个唯一值，一个是**KEY**，它是在您创建模型对象的实例时生成的，并且在保存（放置）操作之后，它生成了**ID**（始终为正数），当然两者都是在整个数据存储区中将是唯一的。

# python - Django：模板 if 语句即使在 false 时也会执行

> ID：11891362
> 
> 赞同：0
> 
> 时间：2012-08-09T20:22:49.507
> 
> 标签：python, django

我的模板中有以下内容：

```
<li{% if selected == "al" %} id="selected" {% endif %}><a href="/posting/alerts">Alerts{% if alertnum != 0 %}<span style="color:red">({{alertnum}})</span>{% endif %}</a></li> 
```

问题在于`alertnum != 0`它似乎。我有以下看法：

```
def posting_draft(request):
    user = request.user
    user_drafts = Draft.objects.filter(user = user)
    drafts = dict()
    for d in user_drafts:
        drafts[d.title] = d.id
    alertnum = get_alertnum(user) # Returns 0\. I have used print statements to verify this
    return render_to_response('posting_draft.html', {'STATIC_URL':STATIC_URL, 'draft_l' : drafts, 'selected':"dr", alertnum: alertnum}) 
```

当我加载它时，浏览器中显示的是`Alert ()`空的红色括号。括号根本不应该存在，因为 alertnum = 0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:29:23.467

不确定这是否是一个错字，但您忘记了上下文中 alertnum 周围的引号：

```
return render_to_response('posting_draft.html',
    {'STATIC_URL':STATIC_URL, 'draft_l' : drafts, 'selected':"dr", alertnum: alertnum}) 
```

所以你在比较`0 != 0`。它应该是：

```
return render_to_response('posting_draft.html',
    {'STATIC_URL':STATIC_URL, 'draft_l' : drafts, 'selected':"dr", 'alertnum': alertnum}) 
```

# java - Hibernate Search 不会根据“计算”值的更改重新索引

> ID：11891367
> 
> 赞同：1
> 
> 时间：2012-08-09T20:23:16.297
> 
> 标签：java, hibernate, hibernate-search

我们在整个应用程序中使用 Hibernate Search (4.1) 来管理资源的搜索和索引，但有时需要管理索引中的“计算”值，例如，调用 @IndexEmbedded 或 @Field 附加到没有实际属性的 getter：

```
 public class Resource {
            @ManyToMany(...)
            private List<Keyword> keywords = new ArrayList<Keyword>();

            public List<Keyword> getKeywords() {
                    return keywords;
            }

            public List<Keyword> setKeywords(List<Keyword> keyword>) {
                    this.keywords=keywords;
            };

            @IndexedEmbedded
            public List<Keyword> getIndexedKeywords() {
                    List<Keyword> toReturn = new ArrayList<Keyword>();
                    for (Keyword keyword: getKeywords()) {
                            if (keyword.isIndexed) {
                                    toReturn.add(keyword);
                            }
                    }
                    return toReturn;
            }

    } 
```

...

```
public void saveResource(Resource resource, Collection<Keyword> keywords) {
        resource.getKeywords().retainAll(keywords);
        resource.getKeywords().addAll(keywords);
        session.saveOrUpdate(resource);
        // will trigger a persist in the database correctly, but will not trigger a reindex
}; 
```

但调用 saveResource 不会导致 HibernateSearch 重新索引。不应该吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:23:16.297

HibernateSearch 4.1（或 3.4 之后的任何版本）使用“智能”检查来查看是否需要重新索引，这与 @IndexedEmbedded 对 Hibernate 的持久字段的调用相匹配。如果这些不匹配，则 Hibernate Search 不会重新索引对象，因为检查没有看到任何匹配的内容，因此不会调用重新索引。这很可能是因为 HibernateSearch 要么必须对索引字段执行大量反射和自省，以确定底层值是否已更改，要么计算并存储每次调用的结果，以便确定值是否已更改，因此减慢重新索引过程和/或使用存储的哈希或整个结果值使 lucene 索引膨胀。可能最好简单地污染导致重新索引的字段，

# php - 如何更新已更改的分叉代码？

> ID：11891369
> 
> 赞同：0
> 
> 时间：2012-08-09T20:23:18.600
> 
> 标签：php, wordpress, svn, tortoisesvn

有时我们必须稍微改变 Wordpress 插件以满足我们的需要。如果出现更新，我希望仍然能够更新插件并将其与我们的更改合并。构建我的代码的最佳方法是什么，这样这个过程就不会是一场灾难？我们使用 SVN 来存储我们的 wordpress 插件。我们使用 tortoiseSVN 作为我们的 SVN 客户端。

具体来说，我更改了 qa-lite 以取消投票选项。一个更新版本的 qa-lite 出来了，我想要它拥有的新功能。除了下载新版本并手工梳理以进行更改之外，还有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:16:25.090

现在唯一想到的是将插件的公开发布视为头部，将修改后的版本视为分支。因此，您将它们分开并从头到分支执行合并以获得新功能。手动。

或者从 head 和您的更改之间的差异创建一个补丁。然后在新的公共版本上使用补丁。

# android - 使用 Jenkins 构建 Android 应用程序，包括库项目

> ID：11891370
> 
> 赞同：1
> 
> 时间：2012-08-09T20:23:20.167
> 
> 标签：android, ant, jenkins, build-automation

我刚刚在我的 Mac 上设置了本地 jenkins 安装...

现在，我尝试创建一个构建的 ant，它在我签入新更改后立即构建我的应用程序。只要我只在项目中使用它，蚂蚁脚本就可以很好地工作......

*   cd 进入文件夹
*   蚂蚁释放

它能够找到我包含的所有库项目（ActionBarSherlock、ViewPagerIndicator、NineOldAndroids、HoloEveryWhere、PocketChange）

一旦我把它放在我的詹金斯安装上，一切都会中断。

我的主要文件夹组织是这样的： Projects/Project Projects/ProjectLibrarys/Library Eclipse 引用这些库是这样的：android.library.reference.2=../Project Librarys/ActionBarSherlock/library

我不能使用绝对链接（因为我认为它们会解决问题）但 eclipse 或 ant 不喜欢它们。

我真的不知道如何解决它？我是否必须编辑 build.xml（我已将其添加到文件夹 ext/commonbuild/commonbuild.xml 中，所以我的所有项目都有相同的 android 构建文件）

如果您需要更多代码，请告诉我。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:18:52.040

好的，我能够通过添加一个带有单独链接的 customproject.properties 文件来解决我的问题。

还有一个问题。似乎 ant 没有为我添加的库项目使用 customproject.properties。这个库项目包括另一个库项目，一旦我构建它就有一个错误的相对 url。

有人知道如何将 customproject.properties 用于项目库吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T13:39:22.353

正如 bluszcz 提到的，我检查了两个模块，我能够通过 Jenkins 构建我的 apk，而无需两个 project.properties 或 customproject.properties 文件。

在 Jenkins 配置屏幕上，在 Source Code Management - Subversion Modules 下，

1.  提供您的 android 项目的 url（例如 SampleAndroidProject） [https://goxxx.com/svn/repository/projects/trunk/SampleAndroidProject](https://goxxx.com/svn/repository/projects/trunk/SampleAndroidProject)

2.  提供本地模块目录为“SampleAndroidProject”

3.  为您的图书馆项目提供 svn 网址（例如，google-play-services_lib） [https://goxxx.com/svn/repository/projects/trunk/google-play-services_lib](https://goxxx.com/svn/repository/projects/trunk/google-play-services_lib)

4.  将本地模块目录提供为“google-play-services_lib”

保存并再次构建。

# c# - 下拉框链接过滤器不起作用？

> ID：11891371
> 
> 赞同：0
> 
> 时间：2012-08-09T20:23:23.923
> 
> 标签：c#, asp.net, .net

我正在尝试实现一个从一个下拉框到另一个下拉框的简单过滤器。

当我从第一个下拉列表中选择一个项目时，第二个下拉框不会填充（包含任何项目）。我不确定我错过了什么。请指教。

这是ascx代码：

```
 <div id="SubmitSection" style="width:auto; height:auto;" class="SubmitSectionStyle">
        <div id="DropdownSection" style="text-align:center;">
        <asp:DropDownList ID="DropDown1" runat="server" AppendDataBoundItems="true"
               onselectedindexchanged="Type_SelectedIndexChanged" ToolTip="Select Category">
              <asp:ListItem Text="--Select Category--" Value="" />
              <asp:ListItem Value="1">Department</asp:ListItem>
              <asp:ListItem Value="2">Safety</asp:ListItem>
        </asp:DropDownList>&nbsp;

        <asp:DropDownList ID="DropDown2" runat="server">
        <asp:ListItem Text="--Select One--" Value="" />
        </asp:DropDownList>

      </div> 
```

这是我背后的代码：

```
protected void Type_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (DropDown1.SelectedValue == "1")
        {
            DropDown2.Items.Clear();
            DropDown2.Items.Add("DeptTest");
            DropDown2.DataBind();
        }
        else if (DropDown1.SelectedValue == "2")
        {
            DropDown2.Items.Clear();
            DropDown2.Items.Add("SafetyTest");
            DropDown2.DataBind();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:27:26.023

在您的第一个下拉列表中，设置[AutoPostBack="True"](http://asp-net-example.blogspot.com/2009/03/how-to-use-dropdownlist-autopostback.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:28:46.880

```
AutoPostBack = "true" // AutoPostBack attribute is missing in DropDown1 due to which the event does not fire

// change your dropdown1 code as
<asp:DropDownList ID="DropDown1" AutoPostBack = "true" runat="server" AppendDataBoundItems="true"
           onselectedindexchanged="Type_SelectedIndexChanged" ToolTip="Select Category">
          <asp:ListItem Text="--Select Category--" Value="" />
          <asp:ListItem Value="1">Department</asp:ListItem>
          <asp:ListItem Value="2">Safety</asp:ListItem>
    </asp:DropDownList> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:29:44.740

如果您希望它在项目更改时更新页面，则需要将自动回发设置为 true。

```
<asp:DropDownList ID="DropDown1" AutoPostBack="True" runat="server" AppendDataBoundItems="true" onselectedindexchanged="Type_SelectedIndexChanged" ToolTip="Select Category" >
              <asp:ListItem Text="--Select Category--" Value="" />
              <asp:ListItem Value="1">Department</asp:ListItem>
              <asp:ListItem Value="2">Safety</asp:ListItem>
        </asp:DropDownList> 
```

您可能还需要考虑将这两个 DropDownList 控件包装在一个更新面板中，这样您就不会在每次用户更改选择时刷新整个页面。

# ruby-on-rails - 如何解决“弃用警告：ActiveSupport::Memoizable 已弃用并将在未来版本中删除”？

> ID：11891372
> 
> 赞同：1
> 
> 时间：2012-08-09T20:23:23.357
> 
> 标签：ruby-on-rails, warnings, ruby-on-rails-3.2, deprecated

升级到 Rails 后`3.2.0`，我开始在*开发日志*和*测试输出*中看到以下弃用警告：

```
DEPRECATION WARNING: ActiveSupport::Memoizable is deprecated and will be removed in future releases,simply use Ruby memoization pattern instead. (called from <top (required)> at /Users/foo/bar/baz/bif/config/environment.rb:5) 
```

请注意结尾`config/environment.rb:5`，这[与](https://stackoverflow.com/q/9132197/664833) [其他](https://stackoverflow.com/q/7929946/664833)相关的（可记忆的）SO 问题不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:23:23.357

我将其追溯到这个[rails 问题](https://github.com/rails/rails/issues/4678)（特别是[这个评论](https://github.com/rails/rails/issues/4678#issuecomment-3660281)）和[这个 carrierwave 问题](https://github.com/jnicklas/carrierwave/issues/652)。

解决方案是升级`carrierwave`：

**Gemfile 差异**

```
-gem 'carrierwave', '~> 0.5.8'
+gem 'carrierwave' 
```

记得跑`bundle update`。

# jquery - 从 jquery 小部件返回新创建的元素

> ID：11891375
> 
> 赞同：0
> 
> 时间：2012-08-09T20:23:25.963
> 
> 标签：jquery, jquery-widgets

是否有可能使在某个 DOM 元素上初始化的小部件返回某个其他元素。

```
var ulwidget= $("<ul>")
                .widgetList(
                    {
                        attribute1: x
                        tabIndex: tabIndex++
                    }); 
```

ulwidget 是 ul 元素，但我想知道它是否可以是在小部件中创建的任何其他元素

# jquery - jQuery .not() 和 .has() 在 IE7 中无法正常工作

> ID：11891378
> 
> 赞同：0
> 
> 时间：2012-08-09T20:23:33.847
> 
> 标签：jquery, internet-explorer-7

我想将一个 div 附加到`<li>`页面上某个特定的末尾。我无法更改标记的结构，所以我必须从我掌握的有关它的信息中深入了解。我开始`span.ruUploadSuccess`并找到一个包含我的数组中的文本`fileInfo[0]`。
然后我从那里去找两个父母，这是`<li>`我需要附加的。如果 div 已经存在，我不想附加这些数据，所以我检查该行是否已经有这个 div（使用`.has()`），然后使用`.not()`.

这在除 IE7 之外的所有浏览器中都非常有效。在 IE7 中，它找到了我想要附加到的正确行，但它没有过滤掉那些已经有这个 div 的行。这会导致两次（或更多次）附加相同的 div。

有没有更简单的方法来访问这个特定元素？这是否有理由在 IE7 中以不同的方式运行？

我用于查找`<li>`要附加到的元素的代码：

```
var row = $("span.ruUploadSuccess:contains('" + fileInfo[0] + "')").parent().parent();
$(row).not($(row).has("div.contactUsAttachmentFileSize")).append(label); 
```

这是一些示例标记，显示了我正在尝试处理的结构：

```
<ul id="content_0_leftcolumn_0_Attachments_RadAsyncUploadListContainer" class="ruInputs">
  <li>
    <span class="ruFileWrap ruStyled">
      <span class="ruUploadProgress ruUploadSuccess">test file (above 5mb).zip</span>
    </span>
    <input class="ruButton ruRemove" type="button" name="RowRemove" value="Remove" tabindex="-1">
    ===> DIV GOES HERE <===
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:49:33.607

如何使用过滤器（）。它似乎比 not()/.has() 更好用

```
$(row).filter(function(){
    return !$(this).find('div.contactUsAttachmentFileSize').length;
}).append(label); 
```

不，有小提琴 [http://jsfiddle.net/wirey00/vxmGw/](http://jsfiddle.net/wirey00/vxmGw/)

filter() 小提琴 [http://jsfiddle.net/wirey00/B6v3A/](http://jsfiddle.net/wirey00/B6v3A/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:50:17.297

我只是以一种更能表达你实际想要做的事情的方式重新编码它。虽然你所拥有的*应该*工作 - 很难理解，而且更深思熟虑的方法避免了可能在旧 IE 中造成麻烦的细微差别的 jquery 内容。您的意图也更加清楚。

您真的只想测试 div 是否已经存在，如果不存在则添加它。所以把它写成条件式。

[http://jsfiddle.net/jamietre/ECVny/](http://jsfiddle.net/jamietre/ECVny/)

```
var row = $("span.ruUploadSuccess:contains('test file')").parent().parent();

if (!row.find("div.contactUsAttachmentFileSize").length) {
    row.append(label);
} 
```

# c++ - C++ 项目的 CMake 文件

> ID：11891380
> 
> 赞同：3
> 
> 时间：2012-08-09T20:23:36.587
> 
> 标签：c++, cmake

有一些我不明白的 CMake 魔法。对于具有如下目录的小型 C++ 项目，CMakeLists.txt 文件应该如何：

```
.
├── bin
└── src
    ├── src
    └── test

bin      — directory for built program
src/src  — directory for source
src/test — directory for tests 
```

测试需要包含来自 src/src 的文件。我想管理来自 cmake 的所有操作，但是此时我什至无法使 cmake 编译 src/c.cpp 中的文件。

任何帮助，欢迎链接。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:40:11.357

您的 CMake 文件应位于主源目录及其子目录中。最简单的方法是`CMakeLists.txt`在目录中创建一个，其中包括来自和`src`的所有文件。一个非常简约的示例可能如下所示：`src/src``src/test`

```
# CMakeLists.txt in src
project(myExample)
set(myExample_SOURCES
        src/file1.cpp
        src/main.cpp)
add_executable(myExecutable ${myExample_SOURCES})

set(myExample_test_SOURCES
        src/file1.cpp
        test/test_file2.cpp
        test/test_main.cpp)
add_executable(myTestSuite ${myExample_test_SOURCES}) 
```

通常不指定输出目录，因为您可以使用不同的选项并行构建不同的活动构建，例如，您可以在调试模式下构建`-O0 -g`一个，另一个在发布模式下使用`-O2 -g`标志，第三个在发布模式下使用大量优化标志`-O3`。每个构建都驻留在它自己的目录中（例如`build-debug`, `build-rel`, `build-opt`）。

`bin`您应该手动创建输出目录（在您的情况下）并`cmake`在此目录中调用命令。作为参数，您必须提供 main 的路径`CMakeLists.txt`。换句话说，只需执行

```
cmake ../src 
```

当你在里面时`bin`。这将从`src`目录中获取所有文件并将输出放到`bin`目录中。您可以轻松地创建第二个输出目录，例如`bin2`，在其中指定不同的构建标志。它`ccmake`为此提供了一个非常简约的 GUI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:36:06.123

这帮助我从 cmake [examples.html开始](http://www.cmake.org/cmake/help/examples.html)

# c# - 在 C# 中创建动态变量名

> ID：11891381
> 
> 赞同：5
> 
> 时间：2012-08-09T20:23:40.883
> 
> 标签：c#, design-patterns, dynamic, csv

我正在尝试用 C# 编写一个简单的角色扮演游戏，以更加熟悉该语言。

我有一个从 CSV 文件加载数据、创建对象并将其放入字典的类。因为游戏的每个方面都有不同的数据（项目、演员、技能等），所以我将这些数据设置为一个类，但这需要我为每个数据重新实现一个 Load() 方法。在这样做了 5 或 6 次之后，我想知道是否有更好的方法来实现它。

基本上，我想要做的是解析包含标题的 CSV 的第一行，并将它们用作类变量名。目前，它们是作为字典关系实现的，所以我会使用 SomeClassInstance.dict["id"]，我最好在其中键入 SomeClassInstance.id，它完全由文件的内容生成。

那是一回事吗？我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:26:56.887

您需要阅读[序列化- 您可以将它们存储为序列化格式并将它们](http://en.wikipedia.org/wiki/Serialization)*直接*加载到所需的类型中，而不是将文件保存在 CSV 文件中。

您只需要几个方法来序列化和反序列化。

我建议阅读：

*   [XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)
*   [二进制格式化程序](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)
*   [DataContractSerializer](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.aspx)
*   [JavaScriptSerializer](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)
*   [protobuf.net](http://code.google.com/p/protobuf-net/)
*   [json.net](http://json.codeplex.com/)

上面的链接指向不同的序列化程序（我当然遗漏了一些 - 任何知道的人，如果你知道有一个好的序列化程序，请添加） - 通读，查看他们的 API，与他们一起玩，看看他们的-磁盘格式并做出决定。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T22:28:11.830

如果您坚持当前的设计（CSV + 字典），您可以使用 ExpandoObject 类来获取您要查找的内容，创建一个简单的工厂类：

```
public static class ObjectFactory
{
    public static dynamic CreateInstance(Dictionary<string, string> objectFromFile)
    {
        dynamic instance = new ExpandoObject();

        var instanceDict = (IDictionary<string, object>)instance;

        foreach (var pair in objectFromFile)
        {
            instanceDict.Add(pair.Key, pair.Value);
        }

        return instance;
    }
} 
```

该工厂将创建您提供给它的任何字典的对象实例，即创建所有不同类型对象的一种方法。像这样使用它：

```
 // Simulating load of dictionary from file
   var actorFromFile = new Dictionary<string, string>();

   actorFromFile.Add("Id", "1");
   actorFromFile.Add("Age", "37");
   actorFromFile.Add("Name", "Angelina Jolie");

   // Instantiate dynamically
   dynamic actor = ObjectFactory.CreateInstance(actorFromFile);

   // Test using properties
   Console.WriteLine("Actor.Id = " + actor.Id + 
                     " Name = " + actor.Name + 
                     " Age = " + actor.Age);
   Console.ReadLine(); 
```

希望这会有所帮助。（是的，她出生于 1975 年）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:31:30.487

[从DynamicObject](http://msdn.microsoft.com/en-gb/library/system.dynamic.dynamicobject)派生并覆盖`TryGetMember`，以便它返回适当的字典条目。正是微软在 MVC 3 的 ViewBag 中所做的。示例用法（如果您的派生类型名为`CsvBag`）：

```
dynamic bag = new CsvBag(csvFileStream);
_monitor.Monster.LookUp(*bag.Id*).Attack(player); // whatever.. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:36:42.030

为什么不创建一个负责读取数据并返回指定对象实例的管理器对象呢？就像是：

```
var actors = ActorsLoader.Load("actors.cvs"); 
```

其中 ActorsLoader.Load 可以实现为：

```
IEnumerable<Actor> Load( string fileName )
{
    //1\. reading each line (each line = new actor) & creating actor object
    //2\. adding created actor object to a collection
    //3\. returning back a collection
} 
```

我假设每种类型的游戏内对象都存储在单独的文件中（所以你有：actors.csv、items.csv、skills.csv 等）

# mysql - “sudo make”返回错误内存缓存设置

> ID：11891384
> 
> 赞同：0
> 
> 时间：2012-08-09T20:23:50.893
> 
> 标签：mysql, memcached, redhat, libmemcache, libmemcached

根据[这篇文章](https://stackoverflow.com/questions/11890826/libmemcached-path)。

我能够`./configure`在安装 libmemcache-devel 后，但现在当我进入下一个设置并运行时，`sudo make`我得到以下信息：

```
Making all in src
make[1]: Entering directory `/root/tmp/memcached_functions_mysql-1.1/src'
make  all-am
make[2]: Entering directory `/root/tmp/memcached_functions_mysql-1.1/src'
/bin/sh ../libtool --preserve-dup-deps --tag=CC   --mode=compile gcc -DHAVE_CONFIG_H -I. -I../include -I/usr/include/mysql  -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -fno-strict-aliasing -fwrapv    -g -O2 -MT args.lo -MD -MP -MF .deps/args.Tpo -c -o args.lo args.c
 gcc -DHAVE_CONFIG_H -I. -I../include -I/usr/include/mysql -g -pipe -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -D_GNU_SOURCE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -fno-strict-aliasing -fwrapv -g -O2 -MT args.lo -MD -MP -MF .deps/args.Tpo -c args.c  -fPIC -DPIC -o .libs/args.o
args.c:7:19: error: mysql.h: No such file or directory
In file included from args.c:12:
common.h:19: error: expected ')' before '*' token
args.c:16: error: expected ')' before '*' token
args.c:82: error: expected ')' before '*' token
make[2]: *** [args.lo] Error 1
make[2]: Leaving directory `/root/tmp/memcached_functions_mysql-1.1/src'
make[1]: *** [all] Error 2
make[1]: Leaving directory `/root/tmp/memcached_functions_mysql-1.1/src'
make: *** [all-recursive] Error 1 
```

任何想法出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:26:02.940

在您的情况下，您缺少 mysql 开发包`mysql-devel`。

# javascript - 用 jQuery 替换 CSS :hover

> ID：11891386
> 
> 赞同：2
> 
> 时间：2012-08-09T20:24:02.210
> 
> 标签：javascript, jquery, css, hover, mouseevent

有没有办法`:hover`用 jQuery 的平滑悬停自动替换所有或某些 CSS 效果（或者纯 JavaScript 或其他库也可以）？

例如，如果为一个元素`:hover`定义了一个样式，则无需为每个元素手动编写 JavaScript 即可替换它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:38:35.000

我觉得这种方法在网络发展方面倒退了。将演示文稿与脚本分开是一种很好的做法。标记也是如此：在一个完美的世界里，它们在实现上应该是完全不同的。

话虽如此，您也许可以使用 CSS3 过渡来完成您需要的工作，尽管大多数旧浏览器不支持它们。见这里： [https ://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS%2FCSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions?redirectlocale=en-US&redirectslug=CSS%2FCSS_transitions)

否则使用 jQuery：

```
$('element').hover(function () {
    $(this).css({
        // styles in JSON
    });
}); 
```

# java - Eclipse RCP IPageLayout 问题

> ID：11891387
> 
> 赞同：7
> 
> 时间：2012-08-09T20:24:08.257
> 
> 标签：java, layout, swt, eclipse-rcp

我有一个具有三列布局的 Eclipse RCP 应用程序：

![在此处输入图像描述](../Images/83e37c39fd5d3b133f65bfd547f771eb.png)

编辑器区域在最右边。现在，当你开始`IPageLayout`使用时，编辑器区域已经添加进去了。这很好：我们在编辑器的左侧添加区域 B，在 B 的左侧添加区域 A，布局正是我们需要的。

问题是，当您在 A 和 B 之间移动窗扇时，视图 A 和 B 会发生变化，而不会调整编辑器区域的大小（很好；）但是当您在 B 和编辑器区域之间移动另一个窗扇时，所有三个视图都会调整大小；布局管理器的作用是保持 A 和 B 的宽度比，这*不是*我们想要的。我们希望用户能够独立移动每个窗扇，并让它只影响它接触的两个视图。

似乎根本原因是当你得到你的编辑器时，编辑器就位`IPageView`，因此你必须`IFolderLayout`相对于它定位 s 。相反，如果您可以相对于 B 定位编辑器，那么 resize 会做正确的事情。

所以我的问题：

1.  有没有办法告诉`IPageView`编辑器相对于视图定位，而不是相反？
2.  除此之外，还有其他方法可以影响布局算法，比如编写某种布局管理器吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T16:46:12.663

我知道没有办法改变`IPageLayout`Eclipse 3.x 中的布局树。然而，在 Eclipse 4.2 中，应用程序模型可以在运行时动态更改。

因此，如果您考虑将您的应用程序迁移到 Eclipse 4，那么这个解决方案可能是一个选择。为了尽可能保持原始应用程序和 UI 代码不变，此解决方案将

*   充分利用 Eclipse 4 的兼容性层，从基于 Eclipse 3 的 RCP 应用程序创建应用程序模型。无需创建应用程序模型或更改应用程序的 UI 代码。
*   应用程序激活后重新排列编辑器区域的布局。这是通过在单独的插件中创建插件类来完成的。
*   允许在未来轻松迁移到更多 Eclipse 4 功能：如果您决定构建自己的应用程序模型，您只需解开插件插件即可。

我从 Eclipse 3 的常规 RCP 邮件模板开始，并更改了透视图以重现问题。这是`Perspective`我在测试应用程序中使用的类：

```
import org.eclipse.ui.IPageLayout;
import org.eclipse.ui.IPerspectiveFactory;

public class Perspective implements IPerspectiveFactory {

  public static final String ID = "wag.perspective";

  public void createInitialLayout(IPageLayout layout) {
    String editorArea = layout.getEditorArea();
    layout.setEditorAreaVisible(true);

    layout.addStandaloneView(AView.ID, false, IPageLayout.LEFT,
                             0.25f, editorArea);
    layout.addStandaloneView(BView.ID, false, IPageLayout.LEFT,
                             0.25f, editorArea);

    layout.getViewLayout(AView.ID).setCloseable(false);
    layout.getViewLayout(BView.ID).setCloseable(false);
  }
} 
```

它基本上创建了您描述的场景：三列布局，其中一个窗扇影响所有三个部分，而另一个只影响两个部分。

然后我开始迁移应用程序并更改应用程序模型。

**将基于 Eclipse 3 的 RCP 应用程序迁移到 Eclipse 4**

有可用于此过程的在线教程。我发现[Eclipse 4.1: Run your 3.x RCP in 4.1](http://tomsondev.bestsolution.at/2011/07/01/eclipse-4-1-run-your-3-x-rcp-in-4-1/ "Eclipse 4.1：在 4.1 中运行 3.x RCP")和[Eclipse 4 and the Compatibility Layer - Tutorial](http://www.vogella.com/articles/Eclipse4CompatibilityLayer/article.html "Eclipse 4 和兼容层 - 教程")非常有帮助。

我建议`org.eclipse.e4.tools.emf.liveeditor`在您的产品依赖项中包含 及其所需的插件。使用实时编辑器，您可以查看由兼容层创建的应用程序模型。

应用程序启动后，窗扇仍将以相同的方式运行。在您的应用程序窗口中打开实时编辑器并查看您的模型。

![兼容层创建的布局树](../Images/56d29d5b71d08934d4393ea425b796d3.png)

您可以看到`PartSashContainer`包含 的占位符`AView`包含另一个`PartSashContainer`. 在容器和容器之间移动窗扇`AView`将更新布局树的其余部分，而`BView`在编辑器和编辑器之间移动窗扇不会影响布局的其他部分。

您现在可以将 的占位符拖到和 编辑器`AView`所在的容器中。`BView`这将立即产生您想要的效果：腰带只会影响它们的直接邻居。但是这些更改只会保存在自己的运行时工作区中。需要其他东西来自动改变布局结构。

**在运行时更改应用程序模型**

由于可能的话我不想接触原始代码，所以我创建了另一个插件来为应用程序模型做出贡献。

`Activator`在不使用模板的情况下创建插件项目。

添加`Addon`类：选择New->Other->Eclipse 4->Classes->New Addon Class

添加`Model Fragment`：选择New->Other-Eclipse 4->Model->New Model Fragment。打开创建的`fragment.e4xmi`文件并添加一个`Model Fragment`. 对于 Element Id，put `org.eclipse.e4.legacy.ide.application`（这是遗留应用程序的标准 id）和 Featurename `addons`。在. `Addon`_ `Model Fragment`输入一个 ID 并将其设置`Class URI`为您的插件类。

现在将您添加`fragment.e4xmi`到您的`org.eclipse.e4.workbench.model`扩展点：

```
<extension
  id="id1"
  point="org.eclipse.e4.workbench.model">
  <fragment
    uri="fragment.e4xmi">
  </fragment>
</extension> 
```

将您的贡献插件添加到您的应用程序产品的依赖项中。当您启动应用程序并使用实时编辑器查看模型时，您应该会`Addon`在模型中看到您的列表。

现在我们可以实现`Addon`. 这是我`Addon`班的代码：

```
package wag.contribution.addons;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;
import javax.inject.Inject;

import org.eclipse.e4.core.services.events.IEventBroker;
import org.eclipse.e4.ui.model.application.MApplication;
import org.eclipse.e4.ui.model.application.ui.MElementContainer;
import org.eclipse.e4.ui.model.application.ui.MUIElement;
import org.eclipse.e4.ui.model.application.ui.advanced.MPlaceholder;
import org.eclipse.e4.ui.workbench.modeling.EModelService;
import org.osgi.service.event.Event;
import org.osgi.service.event.EventHandler;

public class LayoutSorter {

  @Inject private IEventBroker broker;

  private EventHandler handler;

  // The part IDs we are interested in, sorted in the sequence they should be
  // shown
  private static List<String> PART_IDS = Arrays.asList(new String[] {
              "wag.aView", "wag.bView", "org.eclipse.ui.editorss" });

  // Listen to the e4 core service's event broker to find the magical time
  // when the application is created and try to sort the layout.
  @PostConstruct
  void hookListeners(final MApplication application,
                     final EModelService service) {

    if (handler == null) {
      handler = new EventHandler() {
        // Try to sort the layout. Unsubscribe from event broker if
        // successful.
        @Override
        public void handleEvent(Event event) {
          try {
            sort(application, service);
            // sort did finish: stop listening to the broker.
            broker.unsubscribe(handler);
          } catch (Exception e) {
            // Something went wrong, the application model was not ready yet.
            // Keep on listening.
          }
        }
      };

      // Subscribe "ServiceEvent.MODIFIED" to grab the application.STARTED
      // event. Does anybody know how to do this in a better way?
      broker.subscribe("org/osgi/framework/ServiceEvent/MODIFIED",
                       handler);
    }
  }

  private void sort(MApplication application, EModelService service) {

    // find all placeholders
    List<MPlaceholder> placeholders = service.findElements(application,
              null, MPlaceholder.class, null);

    // only keep the ones we are interested in
    for (int i = placeholders.size() - 1; i > -1; i--) {
      if (!PART_IDS.contains(placeholders.get(i).getElementId())) {
        placeholders.remove(i);
      }
    }

    // find the parents of the placeholders
    List<MElementContainer<MUIElement>> parents = new ArrayList<>(
             placeholders.size());
    for (MPlaceholder placeholder : placeholders) {
      parents.add(placeholder.getParent());
    }

    // find the parent that is "deepest down" in the tree
    MElementContainer<MUIElement> targetParent = null;
    for (MElementContainer<MUIElement> parent : parents) {
      for (MUIElement child : parent.getChildren()) {
        if (parents.contains(child)) {
          continue;
        }
        targetParent = parent;
      }
    }

    // move all parts to the target parent
    if (targetParent != null) {
      for (int i = 0; i < placeholders.size(); i++) {
        if (targetParent != placeholders.get(i).getParent()) {
          service.move(placeholders.get(i), targetParent, i);
        }
      }
    }
  }

  @PreDestroy
  void unhookListeners() {
    if (handler != null) {
      // in case it wasn't unhooked earlier
      broker.unsubscribe(handler);
    }
  }
} 
```

（请注意，上面的代码有点hack，因为它只适合这个特定的问题。）

重新启动后，应用程序现在应该以所需的方式运行。查看应用程序模型以了解您的更改。

要注意的一件事是，如果打开保存，本地更改将保存在文件的运行时工作区中`.metadata\.plugins\org.eclipse.e4.workbench\workbench.xmi`，因此必须删除重新创建未更改模型以测试此文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T15:24:47.010

我不认为，有可能达到你想要的（所以你的问题的答案是 1\. 不，2\. 不）。但这是第三种选择，IMO 表现得非常好。

在 Eclipse 中尝试时：从左侧的 viewA 和右侧的 Editor 开始。然后，当您将 viewB 拖到 viewA 的右侧时，您会得到您描述的（错误的）设置。但是随后将其拖动到编辑器的左侧，然后您将获得不同的配置，其中拖动右窗扇的行为如您所愿。拖动左窗框可调整 viewA 的大小以及 Editor 和 MOVES viewB。

我会说实现这一目标的代码是：

```
IFolderLayout areaA = layout.createFolder("A", IPageLayout.LEFT, 0.33f, editorArea);
IFolderLayout areaB = layout.createFolder("B", IPageLayout.LEFT, 0.5f, editorArea); 
```

# android - 使用 @Override 的 ListAdapter 错误

> ID：11891392
> 
> 赞同：0
> 
> 时间：2012-08-09T20:24:29.027
> 
> 标签：android

我在 Eclipse Juno 中遇到错误，代码如下：

```
FilmListAdapter listAdapter = new FilmListAdapter(this, 
        R.layout.film_list_items, data);
listViewInstance.setAdapter(listAdapter);

listViewInstance.setOnItemClickListener(new AdapterView.OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> getView, View view, int i, long l) {
        Toast.makeText(getApplicationContext(),
        "click is performed", Toast.LENGTH_SHORT)
        .show();
    }
}); 
```

当我添加 @Override 时，它​​会给我一个错误并且无法编译。没有它，它会编译，但点击不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:27:20.457

您需要将 eclipse 中的默认语言设置为 Java 1.6。

这可以通过单击 Preferences -> Java -> Compiler 并选择编译器合规级别来完成`1.6`

# c# - 以编程方式重新启动或停止并启动 Azure 网站上的应用程序

> ID：11891397
> 
> 赞同：2
> 
> 时间：2012-08-09T20:24:45.140
> 
> 标签：c#, azure-web-app-service

我正在尝试在保留实例（[Azure 网站](https://www.windowsazure.com/en-us/home/scenarios/web-sites/)）上重新启动/反弹我的 Azure 网站，但我似乎无法在任何地方找到任何文档来执行此操作。我可以通过新门户（[Azure 管理门户](https://manage.windowsazure.com)）来实现，但我想通过 c# 代码来实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-26T19:06:19.280

查看此示例，了解如何与 Azure 管理 API 交互：[https ://github.com/davidebbo/AzureWebsitesSamples/blob/master/ManagementLibrarySample/Program.cs](https://github.com/davidebbo/AzureWebsitesSamples/blob/master/ManagementLibrarySample/Program.cs)

您可以使用一种`RestartAsync`方法 ( ) 重新启动您的网站。`_websiteClient.WebSites.RestartAsync`

# ruby - Ruby自编源码

> ID：11891400
> 
> 赞同：1
> 
> 时间：2012-08-09T20:25:11.380
> 
> 标签：ruby

我正在创建一个语法校正器应用程序。您输入俚语，它会返回一个正式的英语更正。支持的所有俚语都保存在数组中。当输入不支持的俚语时，我创建了一个看起来像这样的方法。

```
def addtodic(lingo)
  print"\nCorrection not supported. Please type a synonym to add '#{lingo}' the dictionary: "
  syn = gets.chomp
  if $hello.include?("#{syn}")
    $hello.unshift(lingo)
    puts"\nCorrection: Hello.\n"
  elsif $howru.include?("#{syn}")
    $howru.unshift(lingo)
    puts"\nCorrection: Hello. How are you?\n"   
  end
end 
```

这有效，但仅在应用程序关闭之前。我怎样才能让它持续存在，以便它也修改源代码？如果我不能，我将如何创建一个包含所有案例的外部文件并在我的源代码中引用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:41:50.773

您需要将数组加载并存储在外部文件中。

[如何将数组存储在ruby的文件中？](https://stackoverflow.com/questions/3308393/how-to-store-arrays-in-a-file-in-ruby)与您正在尝试做的事情相关。

### 简短的例子

假设您有一个文件，其中每行有一个俚语

```
% cat hello.txt
hi
hey
yo dawg 
```

以下脚本会将文件读入数组，添加一个术语，然后再次将数组写入文件。

```
# Read the file ($/ is record separator)
$hello = File.read('hello.txt').split $/

# Add a term
$hello.unshift 'hallo'

# Write file back to original location
open('hello.txt', 'w') { |f| f.puts $hello.join $/ } 
```

该文件现在将包含一个带有您刚刚添加的术语的额外行。

```
% cat hello.txt
hallo
hi
hey
yo dawg 
```

这只是将数组存储到文件的一种简单方法。检查此答案开头的链接以了解其他方式（对于不那么琐碎的示例，这将更好地工作）。

# versioning - 是否可以在 nuget 中进行预发布版本控制

> ID：11891401
> 
> 赞同：8
> 
> 时间：2012-08-09T20:25:12.903
> 
> 标签：versioning, nuget

根据[文档](http://docs.nuget.org/docs/Reference/Versioning)，支持预发布版本控制，并举了一个例子：

> 在 NuSpec 文件中，在元素中指定版本
> 
> ```
> <version>1.0.1-alpha</version> 
> ```

我正在从 .nuspec 文件构建；如果我*逐字*包含此行，则运行（在包管理器控制台）：

> PM> nuget 包“Nuget\protobuf-net.nuspec”

然后我得到一个有点胖的错误：

```
Attempting to build package from 'protobuf-net.nuspec'.
NuGet.exe : Input string was not in a correct format.
At line:1 char:6
+ nuget <<<<  pack "Nuget\protobuf-net.nuspec"
    + CategoryInfo          : NotSpecified: (Input string wa...correct format.:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError 
```

但是，如果我只是使用`<version>1.0.1</version>`并运行完全相同的命令，那么我会得到：

```
Attempting to build package from 'protobuf-net.nuspec'.
Successfully created package 'C:\Dev\protobuf-net\protobuf-net.1.0.1.nupkg'. 
```

事实上，它已经正确构建。我的 NuGet 包管理器报告版本 2.0.30625.9003。

所以：我做错了什么吗？还是他们破坏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:49:27.740

> NuGet 版本：1.5.21005.9019

语义版本控制是[在 nuget 1.6 中引入的](http://docs.nuget.org/docs/release-notes/nuget-1.6)。是时候升级了。您可以`nuget update -self`直接从命令行使用更新。

# java - Java Pattern 导致堆栈溢出

> ID：11891402
> 
> 赞同：5
> 
> 时间：2012-08-09T20:25:14.593
> 
> 标签：java, regex, pattern-matching, stack-overflow, key-value

我正在使用正则表达式从任意长的输入字符串中提取键值对，并且遇到了这样一种情况：对于具有重复模式的长字符串，它会导致堆栈溢出。

KV 解析代码如下所示：

```
public static void parse(String input)
{
    String KV_REGEX = "((?:\"[^\"^ ]*\"|[^=,^ ])*) *= *((?:\"[^\"]*\"|[^=,^\\)^ ])*)";
    Pattern KV_PATTERN = Pattern.compile(KV_REGEX);

    Matcher matcher = KV_PATTERN.matcher(input);

    System.out.println("\nMatcher groups discovered:");

    while (matcher.find())
    {
        System.out.println(matcher.group(1) + ", " + matcher.group(2));
    }
} 
```

一些虚构的输出示例：

```
 String input1 = "2012-08-09 09:10:25,521 INFO com.a.package.SomeClass - Everything working fine {name=CentOS, family=Linux, category=OS, version=2.6.x}";
    String input2 = "2012-08-09 blah blah 09:12:38,462 Log for the main thread, PID=5872, version=\"7.1.8.x\", build=1234567, other=done"; 
```

调用`parse(input1)`产生：

```
{name, CentOS
family, Linux
category, OS
version, 2.6.x} 
```

调用`parse(input2)`产生：

```
PID, 5872
version, "7.1.8.x"
build, 1234567
other, done 
```

这很好（即使第一种情况需要一些字符串处理）。然而，当试图解析一个很长（超过 1,000 个字符长）的类路径字符串时，会发生上述类溢出，但有以下异常（开始）：

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.regex.Pattern$BitClass.isSatisfiedBy(Pattern.java:2927)
    at java.util.regex.Pattern$8.isSatisfiedBy(Pattern.java:4783)
    at java.util.regex.Pattern$8.isSatisfiedBy(Pattern.java:4783)
    at java.util.regex.Pattern$8.isSatisfiedBy(Pattern.java:4783)
    at java.util.regex.Pattern$8.isSatisfiedBy(Pattern.java:4783)
    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3345)
    ... 
```

该字符串太长，无法放在这里，但它具有以下易于重现和重复的结构：

```
java.class.path=/opt/files/any:/opt/files/any:/opt/files/any:/opt/files/any 
```

任何想要重现该问题`:/opt/files/any`的人只需在上述字符串中附加几十次即可。在类路径字符串中创建一个包含大约 90 个“:/opt/files/any”副本的字符串后，会发生堆栈溢出。

是否有`KV_REGEX`可以修改上述字符串的通用方法，以便不会发生问题并产生相同的结果？

我明确地将泛型放在上面，而不是（例如）在解析之前检查最大字符串长度的黑客。

我能想出的最严重的解决方法，一个真正的反模式，是

```
public void safeParse(String input)
{
    try
    {
        parse(input);
    }
    catch (StackOverflowError e) // Or even Throwable!
    {
        parse(input.substring(0, MAX_LENGTH));
    }
} 
```

有趣的是，它在我尝试过的几次运行中都有效，但它的品味不足以推荐。:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:47:39.140

您的正则表达式看起来过于复杂，例如，我认为您还不太了解字符类的工作原理。这对我来说效果更好，我不能让它溢出了：

```
public static void parse(String input) {
    String KV_REGEX = "(\"[^\" ]*\"|[^{=, ]*) *= *(\"[^\"]*\"|[^=,) }]*)";
    Pattern KV_PATTERN = Pattern.compile(KV_REGEX);

    Matcher matcher = KV_PATTERN.matcher(input);

    System.out.println("\nMatcher groups discovered:");

    while (matcher.find()) {
        System.out.println(matcher.group(1) + ", " + matcher.group(2));
    }
} 
```

要分解正则表达式，这将匹配：

`(\"[^\" ]*\"|[^{=, ]*)``"`: 用s 或任意数量的非`{=,`字符 包围的任何内容

`*= *`: 零到任意数量的空格，后跟`=`，后跟零到任意数量的空格

`(\"[^\"]*\"|[^=,) }]*)``"`: 用s 或任意数量的非`=,) }`字符 包围的任何内容

# java - 使用 JFileChooser 访问多线程网络文件夹

> ID：11891408
> 
> 赞同：2
> 
> 时间：2012-08-09T20:25:26.140
> 
> 标签：java, multithreading, swing, jfilechooser

我们有一个问题，当用户在 JFileChooser 中选择“网络”图标时，对话框似乎会挂起，直到它完成收集网络上的所有“东西”。由于基础类'Win32ShellFolder2'被标记为final，有没有人知道一种模仿windows填充网络文件夹方式的方法？Windows 将在它仍在搜索时更新文件夹，这给用户一个很好的温暖和模糊。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:49:24.950

*   我有陛下读过的好主意，在我[在 WinXp 上遇到相同问题](https://codereview.stackexchange.com/a/4450/6673)但从未在 Win7/2008 上出现`VanGui_Ph`过的版本的第一个（几次更新）中，

*   现在是我的帖子未删除，稍后我必须再次删除

*   我认为重定向到`Backgroun`d 任务（`SwingWorker`）解决了这个问题

# makefile - gnu Make 如何处理依赖关系？

> ID：11891409
> 
> 赞同：1
> 
> 时间：2012-08-09T20:25:26.900
> 
> 标签：makefile

我们目前为每个 .o 生成一个依赖文件。但是当进行增量构建时，Make 从依赖文件中读取每个 .o 的依赖项。Make是否检查这些依赖文件的时间戳并将其与.o进行比较？如果是这样，是否可以缓存依赖关系的状态以避免由于每个目标文件的重复状态检查而导致过多的 I/O 命中？

```
for example, 
a.o: h1.h h2.h
    gcc...
b.o: h1.h h2.h
    gcc... 
```

如果我们在构建ao的时候缓存了h1.h和h2.h的状态，那么构建bo的时候是不是省了两个check呢？

我不熟悉 make 系统，但目前正在寻找在大型遗留 C 项目上提高其性能的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:16:14.600

用于`strace`此目的：

```
strace -e trace=stat make --touch 
```

第一次运行的输出（完整构建）：

```
...
stat("a.o", 0x7fff70c35f00)             = -1 ENOENT (No such file or directory)
stat("h1.h", {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
stat("h2.h", {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
touch a.o
stat("b.o", 0x7fff70c35f00)             = -1 ENOENT (No such file or directory)
touch b.o 
```

第二次运行（增量构建）：

```
...
stat("a.o", {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
stat("h1.h", {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
stat("h2.h", {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
stat("b.o", {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
make: Nothing to be done for `all'. 
```

如您所见，GNU Make 缓存时间戳以避免不必要`stat`的系统调用。但是，我想，在使用递归 make 的情况下，事情就不那么好了。

# asp.net - 如何使用 VSTS Loadtest 基于目标的负载模式来实现每秒的恒定测试

> ID：11891410
> 
> 赞同：2
> 
> 时间：2012-08-09T20:25:27.513
> 
> 标签：asp.net, visual-studio-2010, stress-testing, load-testing

我正在使用 Visual Studio TS 负载测试来运行 WebTest（一个客户端/控件访问一台服务器）。如何配置基于目标的负载模式以实现恒定的测试/秒？

我尝试在“LoadTest:Test”下使用计数器“Tests/Sec”，但它似乎没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:06:57.597

我最近针对 Tests / Sec 进行了测试，并且我已经确认它可以正常工作。

对于基于目标的负载模式的设置，我使用了：

```
Category: LoadTest:Test
Counter: Tests/Sec
Instance: _Total 
```

当负载测试开始时，验证它没有显示错误：无法访问该性能计数器。

我为自己的需要运行的测试：

*   将**初始用户负载**设置得很低（10），并给它 5 分钟，看看它是否会达到目标**测试/秒**目标，并稳定下来。就我而言，它在大约 1 分钟 40 分钟后稳定下来。

*   将**最大用户计数 [Increment|Decrement]**设置为 50。事实证明，用户负载会上下起伏很大，因为它会一直试图追赶。（因为每个测试需要 10-20 秒）

*   将**初始用户负载**设置为非常接近测试 1 中的“答案”，并观察它对用户音量进行小而持续的调整。

*注意*：查看统计数据时，请注意*“最后”*下的值。我相信*“平均”*是在一个相对较长的时期内平均的，并且可能与目标不同步。

# clojure - Datomic 中的参数查询

> ID：11891411
> 
> 赞同：5
> 
> 时间：2012-08-09T20:25:29.613
> 
> 标签：clojure, datomic

我正在[学习 Datomic 查询](http://docs.datomic.com/query.html)，并对如何进行“参数查询”感到好奇。

这就是我想出的：

```
(d/q '[:find ?n ?x :where [?n :likes ?x] [(= ?x "pizza")]] 
  [['ethel :likes "sushi"]['fred :likes "pizza"]])

=> #<HashSet [[fred "pizza"]]> 
```

是这样，还是有更简洁/惯用的方式来完成上述任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:46:55.203

答案在[Datomic 教程的“高级查询”部分](http://docs.datomic.com/tutorial.html)

使用`:in`子句

```
(d/q '[:find ?n ?x :in $ ?x :where [?n :likes ?x]] 
  [['ethel :likes "sushi"]['fred :likes "pizza"]] "sushi")

=> #<HashSet [[ethel "sushi"]]> 
```

`:in $ ?x`是参数子句，尾部`"sushi"`绑定到`?x`

# php - ZEND：无法访问帖子数据

> ID：11891425
> 
> 赞同：0
> 
> 时间：2012-08-09T20:26:26.857
> 
> 标签：php, zend-framework

问候。{{Solved}} 为了获取 POST 数据，您必须使用 $this->formHidden 来保存所有数据。即使变量在内部，如果它们不在某种形式的项目中，它们也不会被传递。

我无法访问 ZEND 中的帖子数据。

用户路径 - 开始索引页面 -> 提交页面 -> 支付页面

我创建了一个控制器，扩展了 Zend 控制器，并添加了一个名为 payAction 的操作。用户可以从索引页面转到提交页面。在我将所有数据都包含在变量中之后，我使用了一个表单和一个提交按钮转到“支付页面”。但是，我无法获得任何 POST 数据。

```
public function payAction()
{
 $data = $this->getRequest();
} 
```

我尝试将 getRequest、getParam、getRawBody 放在该控制器函数中。在页面本身我已经尝试过。

```
echo 'Hello';
   echo $request;
   echo $data;
   echo $_POST['payZip'];
   echo $_POST['data'];
   echo $_POST[$data];
   echo $request;
   echo $this->values['payZip'];
   echo $payZip;
   echo $this->values['shippingDone'];
   echo $stuff; 
```

为了获取我的帖子数据，我可以在我的控制器或视图中放置任何东西吗？我使用了一个表单方法=“post”和一个按钮，它确实允许我进入页面。我可以看到你好。但是没有任何帖子数据可用。

任何援助将不胜感激。

谢谢你。

- 更新

```
 $data = $this->getRequest();
    $param = $this->_request->getParam('payZip');

    if($this->getRequest()->isPost())
    {
    print_r($this->_getAllParams());
    echo $param;
    } 
```

这样做给了我 - HelloArray（[控制器] => 轮 [动作] => 支付 [模块] => 默认 [运费] => UPS Ground [贝宝] => 安全支付系统）

但我仍然无法打印 payZip ......我做了回声，没有任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:29:57.993

要从 Zend Framework 获取参数，您需要在 Action Controller 中执行此操作：

```
$data = $this->_request->getParams(); 
```

您还可以像这样获取单个参数

```
$param = $this->_request->getParam('payZip'); 
```

看起来你做错了什么是你只得到了“请求对象”。然后您需要调用该对象方法来获取请求数据。

这是我在测试参数时经常使用的一些简单代码：

```
public function indexAction()
{
    #::DEBUG:: 
    echo '<pre>'; print_r($this->_request->getParams()); echo '</pre>';
    #::DEBUG:: 
} 
```

这将显示您的所有参数。您会注意到，您还将使用参数获取模块、控制器和操作的名称。

**编辑**

附言。如果您尝试在视图脚本中使用该参数，则需要执行以下操作：

```
echo $this->data['payZip'];

echo $this->param; 
```

在您的动作控制器中，您可以通过执行以下操作将数据保存到“视图”对象：

```
$this->view->myVariable = 'Hello'; 
```

但是当您在视图脚本中时，您就*在*视图脚本中，因此`$this`代表`$this->view`来自动作控制器。

因此，您可以像这样访问变量：

```
echo $this->myVariable; 
```

将所有内容包装成更大的代码块以供理解：

你的控制器

```
public function indexAction()
{
    // get all parameters and pass them to the view
    $this->view->params = $this->_request->getParams();
    // get an individual parameter and pass it to the view
    $this->view->payZip = $this->_request->getParam('payZip');
} 
```

您的视图脚本

```
<!-- Dump all parameters -->
<pre><?php print_r($this->params); ?></pre>
<!-- Print payZip -->
<p>My PayZip is: <?php echo $this->payZip; ?></p>
<!-- Print payZip from full parameter array -->
<p>My PayZip (array) is: <?php echo $this->data['payZip']; ?></p> 
```

我希望这会有所帮助！

# c# - 如何将表单中的输入列表更改为链接列表？

> ID：11891426
> 
> 赞同：0
> 
> 时间：2012-08-09T20:26:30.640
> 
> 标签：c#, asp.net, .net, razor

如何使以下代码成为链接列表而不是按钮列表？

```
@foreach (var item in @Model)
{ 
    using (Html.BeginForm(new { action = "GetL", controller = "L" }))
    {
         <input name="fileLocation" type="submit" value="@item" />
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:31:37.757

```
@foreach (var item in @Model)
{ 
      using (Html.BeginForm(new { action = "GetL", controller = "L" }))
      {
           <a name="fileLocation" href="@item">@item</a>
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:33:32.110

您可以使用**[Html.ActionLink](http://msdn.microsoft.com/en-us/library/dd505070.aspx)**辅助方法生成锚标记

```
@foreach (var item in @Model)
{ 
   using (Html.BeginForm(new { action = "GetL", controller = "L" }))
   {
       @Html.ActionLink(item,"yourAction","YourController")           
   }
} 
```

如果您想将一些参数（例如：Id）传递给 Action 方法，您可以使用 [此](http://msdn.microsoft.com/en-us/library/dd504972.aspx)覆盖来完成

```
@Html.ActionLink(item,"yourAction","YourController",
                                                     new { @id="someVal"} ,null) 
```

# iad - Iphone 应用程序中的广告

> ID：11891429
> 
> 赞同：0
> 
> 时间：2012-08-09T20:26:45.727
> 
> 标签：iad, ads

我在任何地方都没有为我的问题找到任何好的答案。我正在为某个客户开发一个应用程序，它是一个包含广告横幅的免费应用程序，但仅适用于我的客户选择的一些广告。在 iAd 中是不可能的，那么其他广告网络呢？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:21:52.157

大多数广告网络使您能够筛选出可能与您自己的应用程序冲突的广告，例如您不想为直接竞争对手展示广告。

Admob FAQ 的这一[部分](https://developers.google.com/mobile-ads-sdk/kb/#adfilters)详细介绍了该过程，但您必须登录才能对其进行测试。

# c++ - 语法错误“==”

> ID：11891438
> 
> 赞同：6
> 
> 时间：2012-08-09T20:27:21.157
> 
> 标签：c++, syntax-error, game-engine

这是我正在开发的游戏引擎代码的一部分。当我构建/调试代码时，它会因编译器错误而停止：“Camera.cpp(70): error C2059: syntax error: '=='” 并且第 70 行是

`if ( near == far )`线。它也发生在第 75 行：

> `(if near == NULL || far == NULL)`

```
bool Camera::SetClippingPlanes( float near, float far )
{
    if (near == far)  //Line 70(First Error)
    { 
        MessageBox(NULL, L"ERROR: The far and near clipping planes cannot be equal!", L"Error", MB_OK | MB_ICONERROR);
        return false;
    }
    else
    {
        if (near == NULL || far == NULL)  //Line 75(Second Error)
        {
            MessageBox(NULL, L"ERROR: Near and/or Far clipping planes are null!", L"Error", MB_OK | MB_ICONERROR);
            return false;
        }
        else
        {
            nearPane = near;
            farPane = far;
            return true;
        }
    }
} 
```

我还有其他以相同方式使用 == 运算符的函数，但它们没有收到错误。谢谢，如果你有任何建议...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T20:32:22.250

许多年前（在遥远的星系中）`near`并且`far`是关键字。看起来您的编译器仍然认为它们是 - 它可能试图提供帮助。

您要么需要选择不同的名称，要么弄清楚如何关闭这个特定的向后兼容的“功能”。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T20:38:22.800

如果您包含 windows.h 或包含它的文件（当然您包含它，因为您有对 MessageBox 的调用），那么您正在为 windows 和 windows 进行编码，那么`far`它们`near`都被定义`windef.h`并且您不能将它们用作变量名字

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T20:43:46.077

将浮点数与 == 进行比较也很危险。不可能以绝对精度表示每个数字。我相信主要的 ieee 浮动实现只适用于 6 个重要的地方。你会找到两种方法，或者计算应该是相同的数字会减少 0.000001 或更少，因此不会相等。

# cakephp - 如何为 cakephp 树生成正确的 lft 和 rght 值？

> ID：11891440
> 
> 赞同：1
> 
> 时间：2012-08-09T20:27:24.340
> 
> 标签：cakephp, tree

我正在使用 cakephp recover() 函数来设置 lft 和 rght，但是在执行函数时，recover 会在这两列中放入相同的较大值。

例如。

在运行 Tree::recover('parent');

```
+------+------+
| lft  | rght |
+------+------+
|37600 | 42875|
+------+------+ 
```

运行后 Tree::recover('parent');

```
+-----------+-----------+
|    lft    |    rght   |
+-----------+-----------+
|2147483647 | 2147483647|
+-----------+-----------+ 
```

为什么会这样？我也试图将所有值（lft 和 rght）都设置为“0”或“null”，但会发生这种情况[如何为 cakephp 2.0 树生成 lft 和 rght 值？](https://stackoverflow.com/questions/8496084/how-do-i-generate-lft-and-rght-values-for-a-cakephp-2-0-tree) （由recover函数生成一个随机负数）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T19:22:30.353

我不确定这是否有帮助，我知道这个问题很老，但 2147483647 是 32 位有符号整数（[维基百科](http://en.wikipedia.org/wiki/2147483647)）的最大值。`lft`因此，我认为您正在尝试在您的和`rght`字段中存储一个大于该数字的数字。至于为什么会这样，我不确定。

# javascript - 等效于 Jquery/Backbone.js 中的 Dgrid/Store（Dojo 工具包）

> ID：11891445
> 
> 赞同：0
> 
> 时间：2012-08-09T20:27:48.383
> 
> 标签：javascript, jquery, datagrid, backbone.js

我遇到了这些[网格](http://wiki.jqueryui.com/w/page/35122722/Grid-OtherGrids)，想知道它们是否是新的（或推荐的）。商店也是如此，我相信骨干就像收藏一样。我正在寻找类似和简单的东西，比如 Dojo 实现它。

基本上，我想要一个**JsonStore**并将这个商店传递给一个网格（填充**onDemand**，所以当我滚动 ajax 调用时）。

在 dojo 中，它看起来像这样：

```
define([
    "dojo/_base/declare",

    "dgrid/OnDemandGrid",
    "dgrid/Keyboard", 
    "dgrid/Selection",
    "dgrid/extensions/ColumnHider",
    "dgrid/editor",
    "dojo/store/Memory",
    "dojo/store/JsonRest",
    "dojo/store/Cache",
    "dojo/store/Observable"

], function(
    declare,
    Grid,
    Keyboard, 
    Selection,
    Hider,
    editor,
    Memory,
    JsonRest,
    Cache,
    Observable
){

    var contentStore = Observable(Cache(JsonRest({
                        target:/* my url */, 
                        idProperty: "id",
                    }), Memory()));

    return declare([Grid, Keyboard, Selection, Hider], {
    store: contentStore,
    columns: {
        /* labels/columns names */
    },
    loadingMessage: 'Loading data...',
    noDataMessage: 'No data found',
    getBeforePut: false

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T10:46:07.553

我相信该列表中每个插件的“稳定”应该告诉您它们的新旧程度。可以说 jQuery 插件的质量无法与 Dojo dgrid 相媲美。请参阅此答案以了解原因：

[2008 年 Dojo 发生了什么？](https://stackoverflow.com/questions/2450696/what-happened-to-dojo-in-2008)

所以我的建议是从该列表中寻找一些特定插件的意见，也许是那些最新的“稳定”插件？

作为替代方案，请查看 ExtJS 项目。它不是严格意义上的 jQuery 插件，但它允许与 jQuery 轻松互操作：

[http://en.wikipedia.org/wiki/Ext_JS](http://en.wikipedia.org/wiki/Ext_JS)

# php - 从.INI文件中读取类似数组的值到PHP数组中？里面的例子

> ID：11891446
> 
> 赞同：0
> 
> 时间：2012-08-09T20:28:04.663
> 
> 标签：php, arrays, ini

我搜索了类似的问题，但没有发现完全符合我的要求。

我有一个大的 INI 文件，其中包含每行的基本键/值对。许多键基本上是以 .INI 格式存储的“数组”，您将在下面的摘录中看到：

```
# Excerpt from INI file itself...
CountryFlagsPackage=CountryFlags
bAllowBinds=False
bShowTime=False
Records[0]=14.64
Records[1]=16.33
Records[2]=11.47
Records[3]=13.26
Records[4]=16.64
Records[5]=19.34 
```

我正在使用 parse_ini_string() 将 INI 放入一个数组中，结果如下：

```
# Excerpt from print_r() after parse_ini_string()
[CountryFlagsPackage] => CountryFlags
[bAllowBinds] => False
[bShowTime] => False
[Records[0]] => 14.64
[Records[1]] => 16.33
[Records[2]] => 11.47
[Records[3]] => 13.26
[Records[4]] => 16.64
[Records[5]] => 19.34 
```

我的问题是：有没有一种优雅的方法可以将所有这些“记录”条目分组到一个 PHP 数组中？目前——正如你在上面看到的——它们只是单独的数组项。基本上，我正在寻找上述数组成为多维的。

我可以使用 array_keys() 并查找文本“记录”，但这不是很优雅或可重复使用。

编辑：我想我也可以使用正则表达式来查找末尾带有方括号的任何内容。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:13:15.770

我怀疑是否有本地方法可以做到这一点，所以这就是我所做的：

```
$file = parse_ini_string($ini);

foreach ($file as $key => $value) {
    if (preg_match("/(\w+)\[\d+]/", $key, $matches)) {
        // "Array" style key/value
        $arrays[$matches[1]][] = $value;
    } else {
        // Standard key/value pair
        $arrays[$key] = $value;
    }
}

print_r($arrays); 
```

结果是：

```
Array
(
    [CountryFlagsPackage] => CountryFlags
    [bAllowBinds] => False
    [bShowTime] => False
    [Records] => Array
        (
            [0] => 14.64
            [1] => 16.33
            [2] => 11.47
            [3] => 13.26
            [4] => 16.64
            [5] => 19.34
        )
) 
```

# php - 直接从 jQuery 插件执行 Ajax 请求是不好的做法吗？

> ID：11891447
> 
> 赞同：2
> 
> 时间：2012-08-09T20:28:05.087
> 
> 标签：php, jquery, ajax, internet-explorer, export

所以我正在编写一个 jQuery 插件，它严重依赖于使用 URI 的内容导出。仅使用 JavaScript，它可以在所有非 IE 浏览器上正常工作。IE中有一种使用ActiveX下载东西的方法，但经常阻塞，所以我发现我只能通过PHP使用IE下载。所以对于所有非 IE 浏览器我会使用 JS，但我会用 IE 做 Ajax。这会是一个糟糕/低效的做法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:41:26.647

我猜您正在尝试下载文件？这些下载可能在其他浏览器上运行，因为其他浏览器正在猜测文件的类型（即图像、文档等）。

如果在 HTTP 响应标头中没有设置 MIME-TYPE（例如“image/png”）或 CONTENT-TYPE（“application/javascript”），那么这在 IE 中将不起作用，因为 IE（在这种特定情况下）实际上会尝试遵循标准并且不假设与文件有任何关系。

# perforce - 用于验证 kerberos 主体密码的 Bash/perl 脚本

> ID：11891449
> 
> 赞同：0
> 
> 时间：2012-08-09T20:28:08.383
> 
> 标签：perforce, kerberos

我正在尝试编写一个脚本，该脚本通过参数获取用户名，并通过标准输入获取密码。我希望脚本联系 kerberos 服务器并验证密码。我将使用它通过 auth-check 触发器对 perforce 用户进行身份验证。尽管相关的（centos 5）系统上已经安装了 bash 和 perl，但我并不太喜欢任何特定的语言。

任何提示/建议将不胜感激。

谢谢，

芬斯特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:36:04.850

这篇 Perforce 文章有一些有用的开始链接。

[http://kb.perforce.com/article/74](http://kb.perforce.com/article/74)

我认为 Kerberos 会在您进行身份验证的机器上保存一张票，所以也许 Perforce 的 SSO 框架会更好。看看这个项目：

[http://www.assembla.com/spaces/sso-p4/wiki](http://www.assembla.com/spaces/sso-p4/wiki)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T08:40:11.147

请注意，有效验证密码不仅仅需要执行 kinit（AS 交换）。这对 KDC 欺骗攻击是开放的：攻击者给你一个密码，然后将你的 KDC 请求重定向到他自己的 KDC，它说密码是正确的。

防止这种情况的通常方法是让验证者拥有自己的服务主体；它启动用户的主体，然后使用获取的 TGT 为其自己的主体获取服务票证并验证该票证。这可确保它与同一个 KDC 对话。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-28T09:37:07.793

只是在谷歌代码上遇到[pwauth](http://code.google.com/p/pwauth/wiki/Risks)。它可以配置为使用 pam 接口验证系统密码。它看起来像是在设计时考虑到了 apache，但应该适用于任何可编写脚本的情况。本周将尝试设置它。当我尝试过时会报告。

请注意，暴露您的系统帐户存在风险，因此该链接首先将您引导至风险页面。

# android - 安卓滚动数字时间显示通缉

> ID：11891451
> 
> 赞同：-1
> 
> 时间：2012-08-09T20:28:35.467
> 
> 标签：android

我正在寻找 Android 代码来做一个数字计时器显示，它看起来像是一些 HTC 手机附带的标准计时器之一（我认为）。计时器的外观与大多数不同，它使用数字，但具有机械滚轮外观，就好像数字是涂在滚筒上一样。它不模仿 LED 计时器，也不模仿机械“翻转”型数字计时器。它可能需要图形文件才能工作。

googlesource 上有代码，似乎它可能有我想要的。但我找不到任何运行代码图像的索引。而且（对我来说）让代码运行并不总是那么容易，所以我可以看到它的样子。一些看起来很有希望的代码如下：

（[https://android.googlesource.com/device/htc/common/](https://android.googlesource.com/device/htc/common/)）

http://st.gsmarena.com/vv/reviewsimg/htc-droid-incredible-4g-lte/sshots/gsmarena_109.jpg">图片链接</a>">

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:36:52.193

请参阅[http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)

您也许可以根据自己的需要对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:49:16.883

这是以前的用户提供的代码：

```
private Handler mHandler = new Handler(); 

OnClickListener mStartListener = new OnClickListener()  
{ 
   public void onClick(View v) 
   { 
      if (mStartTime == 0L)  
      { 
        mStartTime = System.currentTimeMillis(); 
        mHandler.removeCallbacks(mUpdateTimeTask); 
        mHandler.postDelayed(mUpdateTimeTask, 100); 
      } 
   } 
}; 

......... 

private Runnable mUpdateTimeTask = new Runnable()  
{ 
   public void run()  
   { 
     final long start = mStartTime; 
     long millis = SystemClock.uptimeMillis() - start; 
     int seconds = (int) (millis / 1000); 
     int minutes = seconds / 60; 
     seconds     = seconds % 60; 

     if (seconds < 10)  
     { 
        mTimeLabel.setText("" + minutes + ":0" + seconds); 
     }  
     else  
     { 
        mTimeLabel.setText("" + minutes + ":" + seconds);             
     } 

     mHandler.postAtTime(this,start + (((minutes * 60) + seconds + 1) * 1000)); 
   } 
}; 
```

[https://stackoverflow.com/users/559090/khawar](https://stackoverflow.com/users/559090/khawar)

# jquery - 在 x-handlebars 脚本中执行 javascript

> ID：11891452
> 
> 赞同：1
> 
> 时间：2012-08-09T20:28:38.010
> 
> 标签：jquery, ember.js

我正在使用 Ember 并尝试在 x-handlebars 脚本段内执行一些 javascript 代码（不可能将 a 放在 a 内吗？）。这是我的代码：

```
<script type="text/x-handlebars" data-template-name="home">

 <div id="slideshowfrontpage">

  <script type="text/javascript">

   $.vegas( 'slideshow' , {valign:'center',
   backgrounds: homeImgURLs
   })('overlay', {
   src:'css/images/overlays/01.png'
   }); 

  </script>

 </div>

</script> 
```

我怎么能做这样的事情？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:00:41.580

如果您想在每次将元素添加到 DOM 时触发 javascript，您应该在[didInsertElement 方法](http://emberjs.com/api/classes/Ember.View.html#event_didInsertElement)中添加该代码。

```
Em.View.create({
    templateName: 'home',

    didInsertElement: function(){
        this.$().vegas( 'slideshow' , {valign:'center',
            backgrounds: homeImgURLs
        })('overlay', {
            src:'css/images/overlays/01.png'
        }); 
    }
}); 
```

this.$() 实际上会为您提供该视图的 DOM 元素（这非常好）。每次附加视图时，它都会触发一次，当它从 DOM 中删除时，会有一个匹配的方法。

# ios - iOS 5.1 模拟器“文档”幽灵目录

> ID：11891455
> 
> 赞同：0
> 
> 时间：2012-08-09T20:29:03.607
> 
> 标签：ios, simulator, documents

在开始之前，我需要强调一个事实，即我已经查看了每个处理文档目录的帖子。

因此，我将尝试剖析我的问题，以更好地帮助您帮助我。

我正在开发针对 5.1 的 iOS 应用程序。我正在使用 XCode 4.4.1 和 iOS 模拟器版本 5.1 (272.21)。

据我了解，在模拟器中安装应用程序时，其目录结构映射到

```
/Library/Application Support/iPhone Simulator/[IOS_VERSION]/Applications/[APP_UUID] 
```

这在我运行我的应用程序时得到了正确反映。

此外，我能够使用以下代码成功创建和使用临时目录

```
NSString *tmpDir = NSTemporaryDirectory(); 
```

这导致以下路径

```
/Library/Application Support/iPhone Simulator/[IOS_VERSION]/Applications/[APP_UUID]/tmp 
```

当我想使用应该位于的**Documents**目录时，问题开始出现

```
/Library/Application Support/iPhone Simulator/[IOS_VERSION]/Applications/[APP_UUID]/Documents 
```

以下代码检查该路径是否存在，然后使用 NSLog 记录它，即使它说它存在导航到该位置也会返回未找到的文件。

```
+ (NSString *) currentPath{

NSArray *searchPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentPath = [searchPaths objectAtIndex:0];

searchPaths=nil;

BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:documentPath];

if (fileExists == TRUE) {
    NSLog(@" %@ already exists",documentPath);
} else {

    NSLog(@"doesn't exists");
    NSFileManager *fileManager = [NSFileManager defaultManager];
    NSError *error;

    if(![fileManager createDirectoryAtPath:documentPath withIntermediateDirectories:true attributes:nil error:&error])
    {
        NSLog(@"Couldn't create documents directory %@",error);

    }

}

return documentPath;

} 
```

NSLog 行的结果是：

```
2012-08-09 23:12:09.813 AMM[22656:c07]  /Users/fotis/Library/Application Support/iPhone Simulator/5.1/Applications/7CE8645A-BDD7-4AB6-8CAB-B0EF1579CD2B/Documents already exists 
```

在终端

```
 > pwd
 /Users/fotis/Library/Application Support/iPhone Simulator/5.1/Applications/7CE8645A-BDD7-4AB6-8CAB-B0EF1579CD2B
 >ls -lsa
  total 0
  0 drwxr-xr-x  5 fotis  170 Aug  9 23:12 .
  0 drwxr-xr-x  3 fotis  102 Aug  9 22:50 ..
  0 drwxr-xr-x 30 fotis 1020 Aug  9 23:12 AMM.app
  0 drwxr-xr-x  4 fotis  136 Aug  9 22:50 Library
  0 drwxr-xr-x  4 fotis  136 Aug  9 22:51 tmp 
```

如您所见，我的**Documents** ghost 目录不存在。对于我的一生，我无法理解这一切背后的魔力。需要注意的一件事是，我在我的应用程序委托的“-didFinishLaunchingWithOptions”方法中运行它，因为我在那里进行了一些初始化。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:42:31.903

我不知道我是否可以对自己的问题**投反对票，但这里是烤架。**

事实证明，我的初始化过程的一部分是从**Documents**目录中**删除**一些文件。

 **因此，对于任何想知道缺少路径的人，请确保您的斜杠“/”是正确的，并且您的 glob (*)`DO NOT`包含您的根 (Documents/) 文件夹。

然而奇怪的是，我的“坏”代码能够从其路径中删除这个（对于什么是值得的，取决于应用程序）目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:37:33.597

模拟器在那个场地上有点笨拙，过去当你的应用程序没有在模拟器上运行时，你甚至找不到模拟的沙箱。无论如何，您不必担心创建 Documents 文件夹，它会一直在设备上（还有模拟器，因为您没有尝试在应用程序内或在 Finder 中删除它）**

# java - Java 从另一个线程更新 jtable 行

> ID：11891457
> 
> 赞同：1
> 
> 时间：2012-08-09T20:29:11.637
> 
> 标签：java, multithreading, swing, jtable, event-dispatching

我有一个多线程程序，我正在尝试使用 JTable 来查看每个线程的进度。每个线程都是一行JTable。我已经发布了我现在拥有的简化且相关的代码。每次我按下开始时，都会启动一个新线程并将该行添加到 JTable 中。但是如何从正在运行的线程中更新属于该线程的行中的“第 2 列”？

主要这就是我所拥有的

```
JTable table = new JTable(new DefaultTableModel(new Object[]{"Thread Name", "Progress"}, 0));

btnBegin.addActionListener(new ActionListener()
{
  public void actionPerformed(ActionEvent arg0)
  {
    Thread newThread = new Thread(new MyThreadClass(country, category));
    newThread.start();
    DefaultTableModel model = (DefaultTableModel) table.getModel();
    model.addRow(new Object[]{"Thread " + threadNumber, "Column 2"});
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:57:36.503

如果您想在运行时更新该列并且如果您知道要在哪一行更新，您可以这样使用它：

```
int row; // row number you want to update.
int column = 1; // You want to update the first row.
DefaultTableModel model = (DefaultTableModel)table.getModel();
Object value = "New Value Of This Cell";
model.setValueAt(value, row, column); 
```

您可以将您的表以及线程显示的行传递或设置给 MyThreadClass，因此它可以自行更新其行。

您可以像这样编写一个方法 insie MyThreadClass ：

```
public void setTableAndRow(int row, JTable table) {
    this.table = table;
    this.row = row;
} 
```

您可以在创建线程时传递这些参数：

```
btnBegin.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent arg0) {
        DefaultTableModel model = (DefaultTableModel) table.getModel();
        MyThreadClass myThread = new MyThreadClass(country, category);
        Thread newThread = new Thread(myThread);
        /**
         * We know, if there is n rows starting from 0,
         * index of the row that we're adding is n.
         */
        int row = model.getRowCount();
        myThread.setTableAndRow(row, table);
        // Now we add the row before starting the thread, because it
        // will try to reach that row, we don't want any exceptions.
        model.addRow(new Object[]{"Thread " + threadNumber, "Column 2"});
        newThread.start();
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T21:22:27.510

如果您可以将字段 tableModel 添加到`MyThreadClass`（字段+构造函数参数），则可以从此类中调用 @sedran 提到的代码。

例子：

```
public class T {

static int threadNumber = 0;

public static void main(String[] args) throws Exception {

    final JTable table = new JTable(new DefaultTableModel(new Object[] { "Thread Name", "Progress" }, 0));

    JButton btnBegin = new JButton("Begin");
    btnBegin.addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent arg0) {
            DefaultTableModel model = (DefaultTableModel) table.getModel();
            MyThreadClass newThread = new MyThreadClass(model, threadNumber++);
            newThread.start();

            model.addRow(new Object[] { "Thread " + threadNumber, "Column 2" });
        }
    });

    JFrame frame = new JFrame();
    frame.add(btnBegin, BorderLayout.NORTH);
    frame.add(table);
    frame.setSize(400, 400);
    frame.setVisible(true);
}

static class MyThreadClass extends Thread {
    private final DefaultTableModel model;
    private final int threadNumber;

    public MyThreadClass(DefaultTableModel model, int threadNumber) {
        super();
        this.model = model;
        this.threadNumber = threadNumber;
    }

    @Override
    public void run() {
        for (int i = 0; i <= 5; i++) {
            final int index = i;
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }

            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    model.setValueAt(index * 20, threadNumber, 1);
                }
            });
        }
    }
} 
```

}

请注意，使用`SwingUtilities.invokeLater`很重要，因为必须在 EDT 中刷新视图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T22:00:14.600

建议：

*   使用 SwingWorker 对象来创建您的后台线程。
*   从 SwingWorker 获取更新的一种方法是使用其发布/处理方法对。这允许后台线程在 Swing 事件线程上将数据传递给 Swing 应用程序。这将允许后台进程将数据“推送”到 GUI 上。
*   获取更新的另一种方法是将 PropertyChangeListener 添加到 SwingWorker 并让 SwingWorker 更新绑定属性。要么工作正常。这将允许将数据从后台进程“拉”到 GUI 上。
*   要更新特定数据行中的数据，您需要以某种方式将模型的一行与您所关注的线程连接起来。您总是可以遍历表模型的某一列的单元格，`getValueAt(...)`直到您找到一个包含与线程匹配的数据的单元格，也许是被监视类的字段。然后您可以使用 JTable 更新由该行的不同列保存的数据`setValueAt(...)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T21:06:05.007

我认为[SwingUtilies.invokeLater()](http://www.javamex.com/tutorials/threads/invokelater.shtml) 是您正在寻找的，因此您可以访问[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

# c# - 在 VSTO 插件中捕获 Windows 消息

> ID：11891464
> 
> 赞同：2
> 
> 时间：2012-08-09T20:29:23.343
> 
> 标签：c#, vsto

有没有办法在 word 中捕获 windows 消息（我尝试覆盖 WinProc ......不行）？我有一个 word VSTO 插件，我正在尝试与外部通信……理想情况下，我想从一个应用程序发布一条消息，用 word 捕获该消息，然后执行适当的响应……</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:43:33.797

由于互操作程序集没有公开此功能，因此我不建议使用此方法。您应该只尝试通过这些 API 与办公应用程序进行交互。

如果您只需要进程间通信并且您可以控制发送方和接收方，我建议您使用套接字连接或管道。Word 将处理它自己的 Windows 消息，干扰该过程不是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T15:33:55.787

避免 Word 中的进程间通信（当涉及到 UAC 的权限时，这是一团糟）我想出了自己的解决方案：

我使用 SetWinEventHook() 在我的 word VSTO 插件实例中设置了一个钩子（挂钩 SYS_ALERT）……我只是监视创建的新窗口（OB_CREATE），如果它是使用所解释的相机的应用程序，那么我关闭 DS 中当前运行的图形，释放相机并允许它在具有焦点的应用程序中使用。我的每个使用相机的程序都会实现这个类钩子。

欢迎更好的想法……</p>

# wordpress - 重定向到 Wordpress 网站后区分大小写的 URL

> ID：11891465
> 
> 赞同：0
> 
> 时间：2012-08-09T20:29:30.263
> 
> 标签：wordpress, redirect, case-sensitive

将站点重定向到子文件夹中的 Wordpress 站点后，我遇到了区分大小写的 url 的问题。

在我想去**www.domain.com/FreeTrial**重定向之前，我输入了**www.domain.com/freetrial**或**www.domain.com/FreeTrial**并且效果很好。但是在重定向到子文件夹**www.domain.com/2012/**中的 wordpress 站点后，它不起作用。当我输入**免费试用**时，它会显示 404 wordpress 错误页面。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:57:26.127

看着

[http://code.rawlinson.us/2012/01/force-wordpress-to-be-case-insensitive.html](http://code.rawlinson.us/2012/01/force-wordpress-to-be-case-insensitive.html)

和

[http://www.unfocus.com/2007/08/31/case-insensitive-permalinks-plugin-for-wordpress/](http://www.unfocus.com/2007/08/31/case-insensitive-permalinks-plugin-for-wordpress/) 希望对您有所帮助

# .net - 一个接受大文件的迷你服务器组件

> ID：11891476
> 
> 赞同：3
> 
> 时间：2012-08-09T20:29:59.420
> 
> 标签：.net, multithreading, network-programming

我们将不得不接受大型文本文件（最大约 5 GB）到我们的服务器中。它需要能够：

1\. 接受文件并将其写入服务器磁盘
2\. 支持多个客户端
3\. 当然，如果出现问题，请重新启动其侦听客户端的工作进程。但不需要更多的管理
4\. 高性能非常重要
5\. 如果连接断开，则从给定点恢复（不是必需的）

我的问题是：您是否知道一个（n）（开源）简单而强大的组件可以做到这一点。除了 .net 框架库（v4.5 OK）之外没有其他依赖项？

如果没有，您对开始的建议是什么？

谢谢K。

PS：我忘了提，但不需要认证

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T22:32:30.037

我同意*Tommy Grovnes*的观点，这就是 FTP 服务器的用途。如果您的目标是紧密集成，您可以使用 C# FTP 服务器库项目[csftpserver](http://csftpserver.sourceforge.net/)。

> 用于创建自定义 FTP 服务器的 AC# .net 库。应该由应用程序来确定身份验证、提供目录列表和提供文件数据。该库应该纯粹使用托管 C#.net 处理 FTP 协议。

# qt - 返回 QTableView 中选定行的编号

> ID：11891478
> 
> 赞同：0
> 
> 时间：2012-08-09T20:30:16.447
> 
> 标签：qt, qtableview, qstandarditemmodel

我有以下代码：

```
model = new QStandardItemModel();
channel = new QTableView(this);
channel->setModel(model);

model->setData(model->index(d,0,QModelIndex()), 0 );
model->setData(model->index(d,1,QModelIndex()),Channel);
model->setData(model->index(d,2,QModelIndex()),Unit);
model->setData(model->index(d,3,QModelIndex()),dimension);
model->setData(model->index(d,4,QModelIndex()),code);
model->setData(model->index(d,5,QModelIndex()),description); 
```

我希望您只需单击一个框，返回所选字段所在的行号。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:55:52.997

您所指的称为[SIGNALS 和 SLOTS](http://doc.qt.nokia.com/4.7-snapshot/signalsandslots.html)。QObjects 发出各种信号，您可以将这些信号连接到执行操作的函数。在您的情况下，您可能对（实际上由超类 QAbstractItemView 提供）的[`clicked`](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#clicked)信号感兴趣`QTableView`

```
connect(channel, SIGNAL(clicked(QModelIndex), 
           this, SLOT(handleTableClick())); 
```

`handleTableClick`真的可以命名为任何你想要的名字，并且是你定义的一个公共 SLOT 来处理这个信号：

```
public slots:
    void handleTableClick(const QModelIndex &); 
```

当用户单击有效单元格时，您的插槽将被调用，并且您将被传递 QModelIndex。从那里您可以查找该行。

```
void Foo::handleTableClick(const QModelIndex &idx) {
    int row = idx.row();
} 
```

# c++ - OpenGL VC++ 初学者中的 gluProject() 设置

> ID：11891481
> 
> 赞同：0
> 
> 时间：2012-08-09T20:30:30.817
> 
> 标签：c++, visual-c++, opengl, 2d, glu

我正在尝试将 3D 转换为 2D 坐标。我知道我需要使用`gluProject()`. 但是我在设置它时遇到了麻烦。我需要使用像素坐标

我需要有关`InitGL()`如何正确初始化它的帮助。又在`DrawGLScene()`怎么能用呢？我需要保留`z`用于制作图层的变量，所以我不想禁用它。

这是我的代码：

```
#ifdef WIN32
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#endif
#if defined(__APPLE__) && defined(__MACH__)
#include <OpenGL/gl.h>  // Header File For The OpenGL32 Library
#include <OpenGL/glu.h> // Header File For The GLu32 Library
#else
#include <GL/gl.h>  // Header File For The OpenGL32 Library
#include <GL/glu.h> // Header File For The GLu32 Library
#endif

#include "SDL.h"   // SDL library for managing input and window management (multipltform)
#include "SOIL.h"  // SOIL library for loading textures (multiplatform)

const int WINDOW_WIDTH = 640;
const int WINDOW_HEIGHT = 480;
const char* WINDOW_TITLE = "RB Game Engine";

float position=0;
GLuint  texture[1];  // number of texture = 1

/* A general OpenGL initialization function.  Sets all of the initial parameters. */
void InitGL(int Width, int Height)          // We call this right after our OpenGL window is created.
{
  LoadGLTextures();                                 // Jump To Texture Loading Routine ( NEW )
  glEnable(GL_TEXTURE_2D);                          // Enable Texture Mapping ( NEW )
  glViewport(0, 0, Width, Height);
  glClearColor(0.0f, 0.0f, 0.0f, 0.0f);     // This Will Clear The Background Color To Black
  glClearDepth(1.0);                // Enables Clearing Of The Depth Buffer
  glDepthFunc(GL_LESS);             // The Type Of Depth Test To Do
  glEnable(GL_DEPTH_TEST);          // Enables Depth Testing
  glShadeModel(GL_SMOOTH);          // Enables Smooth Color Shading

  glMatrixMode(GL_PROJECTION);
  glLoadIdentity();             // Reset The Projection Matrix

  gluPerspective(45.0f,(GLfloat)Width/(GLfloat)Height,0.1f,100.0f); // Calculate The Aspect Ratio Of The Window

  glMatrixMode(GL_MODELVIEW);
}

/* The main drawing function. */
void DrawGLScene()
{
  glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);       // Clear The Screen And The Depth Buffer
  glLoadIdentity();             // Reset The View

  glTranslatef(0.0f,0.0f,-6.0f);                // Move Right 3 Units
  glBindTexture(GL_TEXTURE_2D, texture[0]); 
  // draw a square (quadrilateral)
  glBegin(GL_QUADS);                // start drawing a polygon (4 sided)
        glTexCoord2f(0.0f, 0.0f); glVertex3f(-1.0f+position, -1.0f,  1.0f);
        glTexCoord2f(1.0f, 0.0f); glVertex3f( 1.0f+position, -1.0f,  1.0f);
        glTexCoord2f(1.0f, 1.0f); glVertex3f( 1.0f+position,  1.0f,  1.0f);
        glTexCoord2f(0.0f, 1.0f); glVertex3f(-1.0f+position,  1.0f,  1.0f);
  glEnd();                  // done with the polygon

  // swap buffers to display, since we're double buffered.
  SDL_GL_SwapBuffers();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:57:20.000

你可以在里面使用下面的代码`DrawGLScene()`，之后`InitGL()`。

它不需要任何其他初始化。

但请确保在更改任何投影之前执行它（例如，用于在`coords`您返回的位置上绘制的 2D 投影）。

```
GLdouble x, y, z; // target 2d coords (z is 'unused')
GLdouble coords[] = { 1.0, 1.0, 1.0 }; // current 3d coords

GLdouble model_view[16];
glGetDoublev(GL_MODELVIEW_MATRIX, model_view);

GLdouble projection[16];
glGetDoublev(GL_PROJECTION_MATRIX, projection);

GLint viewport[4];
glGetIntegerv(GL_VIEWPORT, viewport);

// get window coords based on 3D coordinates
gluProject( coords[0], coords[1], coords[2],
            model_view, projection, viewport,
            &x, &y, &z); 
```

[gluProject 参数说明](http://www.opengl.org/sdk/docs/man/xhtml/gluProject.xml)

[gluUnproject 的一个示例，其中我有代码](http://www.gamedev.net/topic/65558-gluproject-glunproject-use-examples/)

# iphone - 中文本地化时iPhone App中出现的奇怪的面孔图标

> ID：11891483
> 
> 赞同：0
> 
> 时间：2012-08-09T20:30:35.457
> 
> 标签：iphone, localization

我正在将我的英文应用程序本地化为繁体和简体中文，现在，英文看起来不错。然而，当我切换到中文时，在某些地方，我会看到这些奇怪的脸，看起来像一个男人的脸，下面有“Insanitype”这个词。我意识到只有当我使用它时才会发生这种情况：

```
[lblName setText:[NSLocalizedString(@"menuHello",@"") stringByAppendingString:[ NSString stringWithFormat:@", %@",[[NSUserDefaults standardUserDefaults] objectForKey:@"bluebaymob.amazingABC.nombre"]]]]; 
```

所以每当我再次使用这条线时：

```
[lblName setText:[[NSUserDefaults standardUserDefaults] objectForKey:@"bluebaymob.amazingABC.nombre"]]; 
```

面孔出现。还有其他人有这个问题吗？谢谢你的帮忙！

更新：屏幕截图

这里这个链接，因为我还不能发布：http: [//i.imgur.com/so7YL.jpg](http://i.imgur.com/so7YL.jpg)

奇怪的面孔在左上角。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:39:38.003

我使用的是自定义字体：BradBunR，它不支持中文字符。我刚换了另一个

```
NSLocalized(@"font",@""); 
```

然后在我的中文文件中使用 Arial 或其他一些系统字体。感谢您的帮助！

# c++ - 带有 Pthread 的 Hello World 损坏的内存

> ID：11891492
> 
> 赞同：4
> 
> 时间：2012-08-09T20:31:43.823
> 
> 标签：c++, c, pthreads, segmentation-fault

我正在研究一些来自 llnl.computing.gov pthreads 教程的简单 pthread 示例。网站上的程序打印出threadid的地址，但是我想把id的地址传给PrintHello，然后用dereference这个地址来获取id。我认为在睡眠中每个线程都应该打印 8（线程数）。代码是

```
#include <pthread.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define NUM_THREADS  8

void *PrintHello(void *threadid)
{
   long *taskid = (long *)threadid;
   sleep(1);
   printf("Hello from thread %ld\n", *taskid);
   pthread_exit(NULL);
} 

int main(int argc, char *argv[])
{
  pthread_t threads[NUM_THREADS];
  int rc;
  long t;

  for(t=0;t<NUM_THREADS;t++) {
    printf("Creating thread %ld\n", t);
    rc = pthread_create(&threads[t], NULL, PrintHello, (void *) &t);
    if (rc) {
      printf("ERROR; return code from pthread_create() is %d\n", rc);
      exit(-1);
    }
 }
 pthread_exit(NULL);
} 
```

当我在 Cygwin 中编译并运行它时，它会出现堆栈损坏错误。如果我将 PrintHello 重写为：

```
void *PrintHello(void *threadid)
{
  long taskid = (long) threadid;
  sleep(1);
  printf("Hello from thread %ld\n", taskid);
  pthread_exit(NULL);
 } 
```

它没有段错误，它只是打印地址，我想取消引用地址并从 main 获取 t 的值。

有人对如何实现该目标有一些指示吗？我知道我可以传递`t`给`pthread_create`而不是，`&t`但我想这样做是为了学习目的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T20:36:32.103

当您`pthread_exit(NULL)`从主线程调用时，它会终止该线程。此时，`main`函数中的任何局部变量，包括`t`，都被破坏并且不能再使用。

如果主线程在所有工作线程完成使用之前退出`t`（通过您通过传递给它们的指针`pthread_create`），您的程序会表现出未定义的行为。

该程序包含竞争条件，因为`t`从工作线程访问变量和从主线程销毁变量`t`是不同步的。`pthread_join`解决此问题的一种方法是让主线程在退出之前与每个工作线程（通过）连接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:37:10.507

1）你传递的*地址*，`t`所以每个线程都会得到一个指向同一个变量的指针，这不是线程 ID，它是`long`一个值不断变化的值。您正在修改变量`main`并在每个其他线程中读取它，这是一个数据竞争。

2）可能发生的情况是，当新线程执行循环时`main`已经完成并且变量已经超出范围。退出时`main`，它的局部变量会从堆栈中弹出，所以当其他线程访问时，`t`它不再在堆栈上。你的程序中没有任何同步来防止这种情况发生，所以你有另一个数据竞争。您需要等待`main`线程完成，您可以通过调用`pthread_join`等待每个线程来完成，但这仍然不会改变其他线程正在尝试读取另一个线程正在写入的变量的事实。

3) 不需要调用`pthread_exit`那里，从函数返回或者从main自动退出线程（就像调用`exit(0)`导致`main()`完成一样）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:39:06.653

一些指针？好吧，你的线程函数中有很多......

问题：你不能安全地传递你的局部变量的地址——当 main 退出时它超出了范围。您需要将指针声明为静态全局变量，或 malloc() sizeof(long) 字节的内存并使用它。

# ruby-on-rails - 以 64 为基数或类似的导轨编号并返回

> ID：11891493
> 
> 赞同：0
> 
> 时间：2012-08-09T20:31:48.333
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在开发一个 URL 缩短[器 vyo.la](http://vyo.la)，但我不确定如何完全按照我的意愿去做。我注意到像[bit.ly](http://bit.ly)这样的网站不使用整数，而是使用哈希、十六进制或类似的东西。我的应用程序，目前仅使用整数。我尝试过 base64，但我注意到它只对字符串进行编码，并且将整数转换为字符串提供了比整数本身更长的键。

无论如何要使用所有带有数字的大写和小写字母进行转换，以便我可以最大化可用的短 URL 的数量？

我希望将整数轻松转换为值并将值转换回整数。我不想为其分配一个随机的friendly_id 以避免冲突。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:40:24.097

如果我没记错的话，很多 URL 缩短器使用基数 36 (az, 0-9) 或 58 (az, AZ, 0-9)，这应该可以满足您的需求。[这是一个 base 58 ruby​​ 库](https://github.com/dougal/base58)。从自述文件中的示例中，它应该是您正在寻找的内容：

```
# Int to Base58
Base58.encode(12345) # => 4ER

# Base58 to Int
Base58.decode('A2Ph') # => 6639914 
```

# java - Server redirected too many times

> ID：11891494
> 
> 赞同：0
> 
> 时间：2012-08-09T20:31:50.173
> 
> 标签：java, httpsurlconnection

I get the below exception when running from application but when i run as stand alone i get the rest call response place help me solve this problem.

java.net.ProtocolException: Server redirected too many times (20)

```
public static void main(String args[]) throws Exception{
        String input = new String();
        Authenticator.setDefault(new MyAuthenticator());
        StringBuffer url = new StringBuffer();
        url.append("https://rest-call-server-URL");
        URL page;
        try {
            page = new URL(url.toString());
            URLConnection conn = (URLConnection) page.openConnection();
            conn.connect();
            BufferedReader in = new BufferedReader(new InputStreamReader(
                    conn.getInputStream()));
            String inputLine;

            while ((inputLine = in.readLine()) != null) {

                input+=inputLine;

                System.out.println(inputLine);
            }
            in.close();
//          out.close();
            //parseXmlList(input);
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:35:31.607

您很可能已经在服务器上进入了重定向循环。服务器响应，`303 See other`当 Java 的 URL 连接实现自动“看到另一个”时，服务器再次响应相同的响应，以此类推。

# jquery - 我们可以更改浏览器的原生视频播放器的 css 吗？如果不是，那么最轻的 html5 视频播放器插件是什么？

> ID：11891496
> 
> 赞同：5
> 
> 时间：2012-08-09T20:31:53.263
> 
> 标签：jquery, css, html, video, controls

是否可以只使用音频控制并从 html5 视频控制栏中隐藏其他人？

我想隐藏控制栏，只使用音频关闭/打开按钮。我阅读[了有关 w3schools 的相关文章，](http://www.w3schools.com/html5/tag_video.asp)但找不到解决方案。

是否可以更改css位置音频静音按钮？我在这张照片上做了标记。

[这是 jsFiddle 示例。](http://jsfiddle.net/YZT5s/5/)

![在此处输入图像描述](../Images/21b8aa963f09cb631ca7e5e726cb68d3.png)

编辑：我们是否有机会更改视频控件的 css 并根据我们的需要重新设置它们的样式？

**如果没有，我们可以设计的最好的轻量级 html5 视频播放器是什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T21:47:13.833

如果您使用浏览器的本机控件，则不会。无法修改本机控件，即使有，浏览器之间的控件也是不同的。

您可以[构建自己的音量控制](http://blog.steveheffernan.com/2010/04/how-to-build-an-html5-video-player/)来覆盖视频并关闭本机控制。

或者您可以使用[HTML5 视频播放器](http://videojs.com)（视频的 javascript 库）并为其修改 CSS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-09-07T09:31:48.727

html5 视频标签的控制栏有一些 css 选项。

例如，如果您想隐藏静音按钮，您可以使用：

```
video::-webkit-media-controls-mute-button {
  display: none;
} 
```

以下是我知道的所有 CSS 选项：

```
video::-webkit-media-controls-panel {}
video::-webkit-media-controls-play-button {}
video::-webkit-media-controls-volume-slider-container {}
video::-webkit-media-controls-volume-slider {}
video::-webkit-media-controls-mute-button {}
video::-webkit-media-controls-timeline {}
video::-webkit-media-controls-current-time-display {}
video::-webkit-media-controls-timeline-container {}
video::-webkit-media-controls-time-remaining-display {}
video::-webkit-media-controls-seek-back-button {}
video::-webkit-media-controls-seek-forward-button {}
video::-webkit-media-controls-fullscreen-button {}
video::-webkit-media-controls-picture-in-picture-button {}
video::-webkit-media-controls-rewind-button {}
video::-webkit-media-controls-return-to-realtime-button {}
video::-webkit-media-controls-toggle-closed-captions-button {}
video::-webkit-full-page-media::-webkit-media-controls-panel {} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T00:42:59.280

您可以通过处理 Shadow DOM 来对本机控件进行样式设置，使用浏览器供应商特定的伪元素选择器`video::-webkit-media-controls-panel`（例如 请记住：html[5] 视频不仅仅是`video`标签；它带有一个不错的 (JavaScript) API。

# android - Android: Update database table

> ID：11891498
> 
> 赞同：0
> 
> 时间：2012-08-09T20:32:15.253
> 
> 标签：android, database, sqlite

I have an app with the SQlite DB inside and MySQL DB on the server.

* * *

**SQLite:**

Table 1: some columns

Table 2: some columns

**MySQL:**

The same tables and columns.

* * *

I want to ask you: *Is it possible and is it the proper way for creating such functionality, like*:

User starts the app and there is two buttons <=> activities (Activity 1 & Activity 2)

Activity 1: ListView with data from Table 1

Activity 2: ListView with data from Table 2

For example, user chooses Activity 1\. The application proposes to user to update the data. If he/she agrees, the app makes connection with the server and updates SQlite DB Table 1 with data from MySQL DB Table 1.

The same is for Activity 2, but now, the data will be downloaded from Table 2.

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:41:33.080

您所描述的非常好，我建议创建一个内容提供程序来包装您的 sqlite 数据库。这样您就可以利用许多框架函数来获取数据。

您可能必须实现 CursorAdapter 才能在 listView 中填充数据。

查看此链接以了解有关内容提供者和 Sqlite 的更多信息 [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)

查看此链接以了解有关光标适配器的更多信息

[http://blog.cluepusher.dk/2009/11/16/creating-a-custom-cursoradapter-for-android/](http://blog.cluepusher.dk/2009/11/16/creating-a-custom-cursoradapter-for-android/)

查看此 Google I/O 以了解您可以在应用中实现的架构

[http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html](http://www.google.com/events/io/2010/sessions/developing-RESTful-android-apps.html)

# javascript - Is it possible to mock the window.location object for a qUnit test?

> ID：11891502
> 
> 赞同：18
> 
> 时间：2012-08-09T20:32:27.350
> 
> 标签：javascript, unit-testing, query-string, qunit

Let's say I have a utility function that, for simplicity's sake (the real thing is complicated and irrelevant), returns the current window's querystring.

```
var someUtilityFunction = () {
    return window.location.search.substring(1);
}; 
```

Now I want to unit test this function in qUnit (not sure if the testing harness is relevant or not):

```
test('#1 someUtilityFunction works', function () {
    // setup
    var oldQS = window.location.search;
    window.location.search = '?key1=value1&key2=value2&key3=value3';

    var expectedOutput = 'key1=value1&key2=value2&key3=value3';

    // test
    equals(someUtilityFunction(),
        expectedOutput,
        'someUtilityFunction works as expected.');

    // teardown
    window.location.search = oldQS;
}); 
```

The problem here is that setting the `window.location.search` to a different querystring is causing the page to reload, essentially entering an infinite request loop. Is there any way to mock out the window.location object **without** making any changes to the `someUtilityFunction` function?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T20:36:06.427

几天前我们遇到了同样的问题。主要有2种方法：

## 重写你的代码

这可能不是最好的（如果有的话）解决方案，但请考虑将`window`对象传递给您的函数以使模拟更容易。更好的是，使用闭包并封装您的代码。这还有几个优点：

*   您可以阴影全局变量
*   您可以使用私有本地变量
*   您可以避免命名冲突
*   阴影使嘲笑变得非常容易，只需传入其他内容

## 包装你的代码

您可以将所有代码包装在一个将窗口对象模拟为局部变量的函数中。你基本上也有两种可能性：

假设这是模拟：

```
var customWindow = {
    location: {
        search: "",
        hash: ""
    }
}; 
```

### 使用闭包

```
var someUtilityFunction;

(function(window) {
    // window is now shadowed by your local variable
    someUtilityFunction = () {
        return window.location.search.substring(1);
    };
})(customWindow); 
```

这`window`用局部阴影遮蔽了全局`window`。

### 使用`with`语句

虽然我通常强烈反对，但它确实可以解决这里的很多问题。由于它基本上重新映射了您的范围，因此您可以非常轻松地模拟您的环境。

```
// first some more preparation for our mock
customWindow.window = customWindow;

with(customWindow) {

    // this still creates the var in the global scope
    var someUtilityFunction = () {
        // window is a property of customWindow
        return window.location.search.substring(1);
    };

    // since customWindow is our scope now
    // this will work also
    someUtilityFunction = () {
        // location is a property of customWindow too
        return location.search.substring(1);
    };

} 
```

顺便说一句：我不知道该`search`物业是否与该物业有相同的症状`hash`- 即有时包括问号，有时不包括。但您可能要考虑使用

```
window.location.search.replace(/^\?/, ""); 
```

代替

```
window.location.substr(1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-09T12:19:46.117

我使用`window.history.pushState`. 请参阅[此 StackOverflow 答案](https://stackoverflow.com/questions/824349/modify-the-url-without-reloading-the-page)。对于每个单元测试，我调用一个函数`setQueryString('var=something')`，然后像这样实现：

```
function setQueryString(queryString) {
  window.history.pushState({}, '', '?' + queryString);
} 
```

您需要使用`afterEach`QUnit.module 的方法清除查询字符串，否则您的查询字符串将被设置为最终测试的值，您会得到奇怪的结果。

# c# - Cannot connect to hub class

> ID：11891503
> 
> 赞同：0
> 
> 时间：2012-08-09T20:32:27.900
> 
> 标签：c#, javascript, jquery, asp.net, signalr

I have the following script include:

```
<script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script> 
```

I have a hub class like so:

```
public class Dashboard : Hub, IDisconnect, IConnected
{
} 
```

I am trying to connect to it on client side like this:

```
$(function () {
    $.connection.Dashboard.start(function () { 

    });
}); 
```

but I am getting a javscript error:

```
TypeError: $.connection.Dashboard is undefined 
```

What am i doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:44:20.500

@pollirrata 是正确的，默认命名规则将在客户端初始化您的集线器的小写名称以匹配典型的 JavaScript 约定。[也就是说，如果您想明确控制集线器的`HubNameAttribute`](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-server#hubnames)确切名称，您可以这样应用：

```
[HubName("Dashboard")]
public class Dashboard : Hub, IDisconnect, IConnected 
{
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:36:01.373

您的集线器名称在 javascript 代码中被视为小写。查看[wiki 示例](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)

所以在你的情况下，你应该使用`dashboard`而不是`Dashboard`

# python - GtkTextBuffer error when calling buffer.insert_with_tags_by_name invisible

> ID：11891504
> 
> 赞同：1
> 
> 时间：2012-08-09T20:32:29.710
> 
> 标签：python, gtk

I'm trying to insert text before and after selection in textbuffer. All works fine but after applying tag program crash with error:

here is part of my code I use:

```
self.tag_bold = self.des_buffer.create_tag("bold", weight=Pango.Weight.BOLD)
self.tag_hide = self.des_buffer.create_tag("hide", invisible=True)

def text_edit(self, widget, html_format_start):
    bounds = self.des_buffer.get_selection_bounds()
    start, end = bounds
    self.des_buffer.insert_with_tags_by_name(start, html_format_start, 'hide')

def on_button_text_bold_clicked(self, widget):
    self.test1 = "<B>"
    self.test2 = "</B>"
    self.text_edit(self, self.tag_hide)
    self.text_edit(self, self.test1)
    self.text_edit(self, self.test2) 
```

Error message:

```
(magic-ebay:6056): Gtk-WARNING **: /build/buildd/gtk+3.0-3.4.2/./gtk/gtktextbtree.c:4019: byte index off the end of the line
(magic-ebay:6056): Gtk-ERROR **: Byte index 24 is off the end of the line 
```

when I only use different tag then hide (invisible) all works fine, no crash occur. Any idea ?

# linq - Linq using the index from a select many query

> ID：11891505
> 
> 赞同：1
> 
> 时间：2012-08-09T20:32:35.853
> 
> 标签：linq

I am using the SelectMany method to create a combination of items from two list of strings. I am able to create the flattended list without any issues, but unable to figure out how to add the index. In the example below, I need to assign the Position property of Product with the Index.

```
var strings = new List<string> { "Milk", "Eggs", "Cheese" };
var suffixes = new List<string> {"-Direct", "-InDirect"};

var products = strings
               .SelectMany((_, index) => suffixes, 
                           (x, y) => new Product {Position = ?, ID = x + y}); 
```

Thanks for any help,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:40:54.243

您在错误的位置指定索引。*之后*你需要它`SelectMany`。例如：

```
var products = strings.SelectMany(x => suffixex,
                                  (x, y) => x + y)
                      .Select((id, index) => new Product { Position = index,
                                                           ID = id }); 
```

# android - TitlePageIndicator title becomes different from PagerAdapter.getPageTitle(int)

> ID：11891506
> 
> 赞同：2
> 
> 时间：2012-08-09T20:32:40.540
> 
> 标签：android, android-viewpager, viewpagerindicator

The issue I'm noticing happens when the user scrolls to the next (or previous) page in the `ViewPager`, which triggers the `ViewPager`'s settling (confirm?) to that page. This works perfectly unless the user starts dragging while the `ViewPager` is still settling. In this scenario what I get is the title shown by the `TitlePageIndicator` shows the title for 2 pages after (or before, respectively) while the content shown by the `ViewPager` is showing the next (or previous) page.

If the user starts to swipe after that page - the one with the mismatched title and content - has settled, the title gets quickly updated to the correct title. Looking at [`ViewPager.OnPageChangeListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html#onPageScrollStateChanged%28int%29) they say "Useful for discovering when the user begins dragging, when the pager is automatically settling to the current page" for `onPageScrollStateChanged(int)`, which seems to be what the issue is, but I haven't found a way to use the method to resolve the issue.

I'm using Jake Wharton's `com.viewpagerindicator.TitlePageIndicator` with `android.support.v4.view.ViewPager` to render a view of calendar days. Swiping left/right moves to the previous/next calendar day. This means my `ViewPager` is set up to implement infinite pagination based on 3 `Fragments` that correspond to the visible day, the day before the visible day, and the day after the visible day.

My `ViewPager.OnPageChangeListener` is constructed like this and attached to the `TitlePageIndicator`

```
_title.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
        private int _focused_page = _VISIBLE;
        private boolean _is_settling = false;

        @Override
        public void onPageScrollStateChanged(int state) {
            if (state == ViewPager.SCROLL_STATE_IDLE) {
                if (_focused_page == _PREVIOUS)
                    moveToPrevious();
                else if (_focused_page == _NEXT)
                    moveToNext();

                // always set to middle page to continue to be able to
                // scroll left/right
                if (_paginator.getCurrentItem() != _VISIBLE)
                    _paginator.setCurrentItem(_VISIBLE, false);
                _is_settling = false;
            } else if (state == ViewPager.SCROLL_STATE_DRAGGING && _is_settling) {
                Ln.d("Double scrolled!");
                _title.setCurrentItem(_paginator.getCurrentItem());
                _title.invalidate();
            } else if (state == ViewPager.SCROLL_STATE_SETTLING) {
                _is_settling = true;
            }
        }

        @Override
        public void onPageSelected(int position) {
            _focused_page = position;
        }
}); 
```

I see there to be about 3 solutions

*   Disable the sending or responding to user drag event while settling
*   Notice when the drag occurs during a settling and recover the correct title after it becomes invalid
*   Move the `ViewPager` with the second drag as if it were the first drag resulting in everything being 2 pages after (or before) the original visible day

**EDIT:** Is there a way to force the `TitlePageIndicator` to call `getPageTitle(int)` again to redraw the title with the correct title?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:05:54.957

感谢您的第一次实施，我找到了解决方案。

```
private static final int PAGE_LEFT = 0;
private static final int PAGE_MIDDLE = 1;
private static final int PAGE_RIGHT = 2;

mTitleIndicator.setOnPageChangeListener(new OnPageChangeListener() {
            private boolean isSettling;
            private int focusedPage = 1;

            @Override
            public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {

            }

            @Override
            public void onPageSelected(int position) {
                focusedPage = position;
            }

            @Override
            public void onPageScrollStateChanged(int state) {
                if (sViewPager.getChildAt(PAGE_RIGHT) != null) {
                    if (state == ViewPager.SCROLL_STATE_IDLE) {

                        // User swiped in right direction, change to left page.
                        if (focusedPage == PAGE_LEFT) {
                            doSomething();

                            // User swiped in left direction, change to right page.
                        } else if (focusedPage == PAGE_RIGHT) {
                            doSomething();
                        }
                        mTitleIndicator.setCurrentItem(PAGE_MIDDLE, false);
                        isSettling = false;

                    } else if (state == ViewPager.SCROLL_STATE_DRAGGING && isSettling) {
                        mTitleIndicator.notifyDataSetChanged();

                    } else if (state == ViewPager.SCROLL_STATE_SETTLING) {
                        isSettling = true;
                    }
                } else {
                    mTitleIndicator.setCurrentItem(PAGE_MIDDLE, false);
                }
            }
        }); 
```

> 编辑：有没有办法强制 TitlePageIndicator 再次调用 getPageTitle(int) 以用正确的标题重绘标题？

是的，调用`TitlePageIndicator.notifyDataSetChanged()`（仅调用`invalidate()`）。

**编辑：**我的解决方案仅在向后滚动时有效，而不是向前滚动。

# java - Can Java determine if there are global/OS keyboard shortcuts?

> ID：11891510
> 
> 赞同：3
> 
> 时间：2012-08-09T20:32:57.017
> 
> 标签：java, keyboard-shortcuts

Is there a way for Java to figure out if there are globally accessible shortcuts defined outside of a java desktop application?

The purpose is for a keyboard shortcut configuration UI, we might warn the user that they are overriding OS shortcuts and might want to choose a different keystroke.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:38:15.017

恐怕这是不可能的，因为：

*   太多不同的操作系统或桌面环境（Linux 就是这种情况）
*   无法访问，因为它们不是以纯文本形式存储的

我认为你最好的办法是定义它们（或至少定义非常重要的）。毕竟捷径列表是可用的。我还找到[了键盘快捷键表，](http://en.wikipedia.org/wiki/Table_of_keyboard_shortcuts)因为它们概述了不同操作系统的快捷键。

对于 GNOME，我发现了以下问题：[GNOME 键盘快捷键存储在哪里？](https://askubuntu.com/questions/26056/where-are-gnome-keyboard-shortcuts-stored)

> 根据您的发行版本，键盘快捷键应用程序可能在 GUI 中被称为不同的东西，但在命令行上它应该被称为“gnome-keybinding-properties”。事实证明，这个简洁的小应用程序将所有快捷方式集中到一个方便用户编辑的地方。

此外，为您的应用程序定义快捷方式不会**覆盖**操作系统快捷方式，它们只是在您的应用程序中不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:49:48.717

我认为这是不可能的，也许可以做一些事情来使用[RunTime](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html)类运行本机命令。但是通过 Java 执行本机操作系统级别的命令通常不是一个好主意。

但是，可能值得显示常用快捷方式列表，警告您的用户这些可能不可用，具体取决于他们的操作系统。但是，如果它们覆盖了常用的测试，您可以添加一个快速测试警告它们。

# jquery - setTimeout function always triggers

> ID：11891512
> 
> 赞同：0
> 
> 时间：2012-08-09T20:33:23.110
> 
> 标签：jquery, settimeout

I'm using the following code to hide a div (named info) when you click outside of it:

```
$(document).click(function(e) {
if (e.target.id != 'info' && !$('#info').find(e.target).length) {
        $("#info").fadeOut(300);
setTimeout(function() {
        $("#info").html("Select an Item");
},300);
}; //if statement
}); //click function 
```

What i'm trying to achieve is after the fadeOut is done, to place the text "Select an Item" in the div. However this SetTimeout is always executed; the div shows itself through another function, but it seems that this setTimeout function also triggers, immediately.

Why does this happen and how do you fix this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:37:07.667

`setTimeout`如果可以的话，我会避免这样做，而是这样做：

```
$("#info").fadeOut(300, function() {
  // Animation complete.
  $("#info").html("Select an Item");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:37:03.843

我更好的解决方案是使用延迟功能：

> $("#info").delay(1000).html("选择一个项目").fadeOut(300);

参考：

*   [http://api.jquery.com/delay/](http://api.jquery.com/delay/)
*   [http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

# php - 在 Zend 控制器上设置 cookie

> ID：11891522
> 
> 赞同：0
> 
> 时间：2012-08-09T20:33:53.780
> 
> 标签：php, zend-framework, cookies, zend-framework-mvc

我们正在尝试为访问我们网站的每个用户创建一个唯一的 ID。我对 Zend 和 MVC 模式比较陌生，所以我不确定应该在哪里设置 cookie 以及如何设置。

php非常简单：

```
if(!isset($_COOKIE['mx_uid'])){
   $expire = time()+60*60*24*30;
   setcookie('mx_uid', uniqid('mx_'), $expire);
}

$lxid = $_COOKIE['mx_uid']; 
```

我试图将其放入视图中，但遇到了在加载的每个新页面上都会重新生成 cookie 的问题，因此如果他们访问网站上的 20 个页面，那么他们就有 20 个 cookie。

此外，我需要在每个页面上使用“$lxid”变量内联而不刷新，因为 javascript 片段将捕获 cookie 内容。

有没有人在 Zend 上以这种方式使用过 cookie？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:57:54.567

如果您需要在一个会话期间设置一次 cookie，请将它们放在 frontController 插件中。添加到您的 app.ini
`resources.frontController.plugins.a.class = "YourNamespace_Plugin_Cookies"`

然后你的插件看起来像

```
class YourNamespace_Plugin_Cookies extends Zend_Controller_Plugin_Abstract  
{  
  public function preDispatch(Zend_Controller_Request_Abstract $request)  
  { 
      $cookie = $request->getCookie('mx_uid');  
      if(empty($cookie)){  
           setcokkie('mx_uid',$lxid,$expire, '/');  
      }  
  }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:46:15.960

您还需要设置 cookie 路径（第 4 个参数）：

```
setcookie('mx_uid', uniqid('mx_'), $expire, '/'); 
```

请注意，您可能无法在您设置它的同一脚本中访问 c​​ookie（即，直到他们访问的下一页才会起作用）。所以更好的逻辑可能是：

```
if (isset($_COOKIE['mx_uid'])){
    $lxid = $_COOKIE['mx_uid'];
} else {
    $lxid = uniqid('mx_');
    $expire = time()+60*60*24*30;
    setcookie('mx_uid', $lxid, $expire, '/');
} 
```

以确保`$lxid`将始终包含一个值。

# linux - 有没有办法在 Linux 或 apache 日志中查看通过 http 访问了哪些文件？

> ID：11891524
> 
> 赞同：0
> 
> 时间：2012-08-09T20:34:17.327
> 
> 标签：linux, apache, logging, ubuntu, webserver

我正在尝试查看闪存 (SWF) 文件被访问了多少次。

我看过了，`/var/log/apache2/access.log`但似乎是空的。这是寻找的正确地方吗？如果是这样，我需要启用它`etc/syslog.conf`吗？

我也检查过`/var/log/syslog`，但这似乎不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:44:10.400

查看您的 Apache 配置。寻找 CustomLog 和 LogFormat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:55:55.147

好吧，问题是我很愚蠢，我正在运行 Python/Django，`nginx`而不是`apache`访问日志在那里。

感谢看过的人。

# javascript - 从选项选择中删除值

> ID：11891526
> 
> 赞同：-3
> 
> 时间：2012-08-09T20:34:19.500
> 
> 标签：javascript, jquery

有机会移除exp。value="1" 选项选择？

经验。那是我的选择：

```
<select name="animals">
 <option value="0">dog</option>
 <option value="1">cat</option>
</select> 
```

如何删除 value="0" 和 value="1"？

我试试这个，这是我的形式：

```
<form method="post" action="/user/register/" onsubmit="test(this)">
<select name="animals" id="animals">
 <option value="0">dog</option>
 <option value="1">cat</option>
</select>
</form> 
```

那是我的测试功能：

```
function test(form) {
    form["#animals"].removeAttr("value");
} 
```

但是有错误信息：

```
form['#animals'] is undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:40:44.883

使用 jQuery：

```
$('option').removeAttr("value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:04:13.763

您的功能存在两个问题

1.  **form["#animals"]**不是从表单中检索元素的正确方法。使用`form["animals"]`- 直接使用名称而不使用 css 选择器

2.  **form["animals"]**不是 jQuery 对象，因此 removeAttr 将失败。利用`$(form["animals"])`

相反，只需使用`$(form["animals"]).find('option').removeAttr('value')`

更新：

```
//this will remove the attributes at load time
$(function() {
  $('#animals option').find('option').removeAttr('value');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:44:42.060

尝试：

```
$('select[name="animals"] option[value="1"]').remove(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:39:54.963

删除一个选项：

```
$("select option[value='0'], select option[value='1']").remove(); 
```

# .net - 底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系

> ID：11891529
> 
> 赞同：2
> 
> 时间：2012-08-09T20:34:47.693
> 
> 标签：.net, vb.net, security, ssl

这是我的代码，我花了很长时间才写出我仍然是一个小人物：

```
Imports System.Net
Imports System.Text
Imports System.IO

Public Class Form1

Dim logincookie As CookieContainer

Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles      Button1.Click

    Dim postdata As String = "action=do_login&url=https%3A%2F%2Fforum.suprbay.org% 2F&quick_login=1&quick_username=USERNAME&quick_password=PASSWORD&submit=Login&quick_remember=yes"
    Dim tempcookies As New CookieContainer
    Dim encoding As New UTF8Encoding
    Dim bytedata As Byte() = encoding.GetBytes(postdata)
    Dim postreq As HttpWebRequest = DirectCast(WebRequest.Create("https://forum.suprbay.org/member.php"), HttpWebRequest)

    postreq.Method = "POST"
    postreq.KeepAlive = True
    postreq.CookieContainer = tempcookies
    postreq.ContentType = "application/x-www-forum-urlencoded"
    postreq.Referer = "https://forum.suprbay.org/member.php"
    postreq.UserAgent = "Mozilla/5.0 (Windows NT 6.2; rv:9.0.1) Gecko/20100101  Firefox/9.0.1"
    postreq.ContentLength = bytedata.Length

    Dim postreqstream As Stream = postreq.GetRequestStream()
    postreqstream.Write(bytedata, 0, bytedata.Length)
    postreqstream.Close()
    Dim postresponse As HttpWebResponse
    postresponse = DirectCast(postreq.GetResponse(), HttpWebResponse)

    tempcookies.Add(postresponse.Cookies)
    logincookie = tempcookies

    Dim postreqreader As New StreamReader(postresponse.GetResponseStream)
    Dim thepage As String = postreqreader.ReadToEnd

    RichTextBox1.Text = thepage

    End Sub

End Class 
```

当我运行它并单击按钮时，出现以下错误：

> “底层连接已关闭：无法为 SSL/TLS 安全通道建立信任关系。”

它是 PirateBay.Se 的官方论坛，它是一个种子网站，如果您在常规浏览器中访问它，您会收到有关信任证书的警告，所以这可能就是我收到错误的原因，对吧？我怎样才能忽略信任证书和其他东西，以便我的应用程序可以工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T20:39:12.860

此行应忽略连接上的信任错误，在尝试连接之前执行此操作：

```
ServicePointManager.ServerCertificateValidationCallback = AddressOf ValidateRemoteCertificate 
```

你还需要在你的类中定义这个：

```
 Public Shared Function ValidateRemoteCertificate(ByVal sender As Object, ByVal certificate As X509Certificate, ByVal chain As X509Chain, ByVal sslPolicyErrors As SslPolicyErrors) As Boolean
        Return True
    End Function 
```

抱歉，如果这不是对 VB.Net 的完美翻译，我最初是在 C# 中使用的。

编辑：

是的，这正是您收到此错误的原因，他们拥有的证书已过期。

# python - 异步套接字未正确关闭

> ID：11891536
> 
> 赞同：3
> 
> 时间：2012-08-09T20:35:35.967
> 
> 标签：python, sockets, asyncore

我已经编写（大部分是复制）一个非常简单的 python 脚本来充当 xbmc 的来电显示插件。除了关闭套接字外，它按预期工作。我已经确认 xbmc.abortRequested（XBMC 正在关闭的通知）确实设置为 True，因此循环应该结束。但它没有（它似乎挂起）并且 xbmc 在清理过程中大约 5 秒后杀死了脚本。这种不正常的退出不会导致任何问题，但我希望脚本能够正确退出。我不知道是否可以设置某种其他超时或什么。谢谢你的帮助。

道格

我的代码：

```
import socket, threading, thread, sys, asyncore, xbmc, xbmcgui, xbmcaddon
from time import *
from string import *

xbmc.log("YAC Listener: Starting")
PORT = 10629

class Server(asyncore.dispatcher):
    def __init__(self, host, port):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_INET, socket.SOCK_STREAM)
        self.bind((host, port))
        self.listen(1)

    def handle_accept(self):
        socket, address = self.accept()
        ConnectionHandler(socket)

    def handle_close(self):
        self.close()
        xbmc.log("YAC Listener: Closing Port")

class ConnectionHandler(asyncore.dispatcher_with_send):
    def handle_read(self):
        self.buffer = self.recv(1024)
        self.buffer = split(self.buffer[5:], "~")
        self.close()
        global data
        if len(self.buffer) > 1:
            name = self.buffer[0]
            number = self.buffer[1]
                xbmc.executebuiltin("XBMC.Notification("+name+","+number+",7000,special://home/addons/script.yaclistener/phone.png)")
        else:
            data = self.buffer

s = Server('', PORT)

while not xbmc.abortRequested:
    asyncore.loop(timeout=1)

s.close()
sys.exit()
xbmc.log("YAC Listener: Exiting") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T09:59:03.213

“超时”的含义略有不同（大致可以认为是循环粒度）。

所以最终文件代码应该像下面这样：

```
...
while not xbmc.abortRequested:
    asyncore.loop(timeout=1, count=1)

# this will try to close ALL current connections:
asyncore.close_all()
# this will give some time (up to 5 seconds) for things to settle down:
asyncore.loop(timeout=1, count=5)
sys.exit()
xbmc.log("YAC Listener: Exiting") 
```

# python - 在 python 中读取 HTTP 流

> ID：11891537
> 
> 赞同：2
> 
> 时间：2012-08-09T20:35:39.247
> 
> 标签：python, twitter

我正在尝试读取 Twitter 流 API 的输出，但遇到了一些麻烦。到目前为止，这是我的代码：

```
from urllib2 import *
import StringIO

password_mgr = HTTPPasswordMgrWithDefaultRealm()
url = "https://stream.twitter.com/1/statuses/sample.json"
password_mgr.add_password(None, url, 'myusername', 'mypassword')
h = HTTPBasicAuthHandler(password_mgr)
opener = build_opener(h)
page = opener.open(url)
io = StringIO(page.read())
print io.getvalue()
io.close() 
```

我最初只是使用，`page.read()`但导致我的控制台一直打印出流并且不会返回到代码。我现在正在尝试使用 StringIO 像流一样处理它并逐步打印出来，但是当我这样做时，我什么也得不到，而且这个过程就成立了。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:41:16.287

我听到了有关 requests 模块的好消息：

[https://2.python-requests.org/en/master/user/advanced/#id9](https://2.python-requests.org/en/master/user/advanced/#id9)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-11-18T08:57:33.903

请阅读流请求¶

[https://requests.kennethreitz.org/en/master/user/advanced/#streaming-requests](https://requests.kennethreitz.org/en/master/user/advanced/#streaming-requests)

```
import json
import requests

r = requests.get('https://httpbin.org/stream/20', stream=True)

if r.encoding is None:
    r.encoding = 'utf-8'

for line in r.iter_lines(decode_unicode=True):
    if line:
        print(json.loads(line)) 
```

# asp.net - 在 ASP 中构建 JSON，我不确定如何在 Json.net 或 JavaScriptSerializer 中构建这部分

> ID：11891538
> 
> 赞同：0
> 
> 时间：2012-08-09T20:35:38.887
> 
> 标签：asp.net, vb.net, json, json.net, javascriptserializer

每个人！

我正在构建 JSON，但我不确定如何构建 JSON 的这一部分。

```
'playlist': [
        {
           'file': 'bunny.mp4',
           'title': 'Big Buck Bunny Trailer',
           'provder': 'rtmp',
           'streamer': 'rtmp://rtmp.server.com/application',
           'image': 'http://thumbnails.server.com/thumbs/bunny.jpg',
           'duration': '33.03',
           'description': 'An animated short from the Blender project'
        },
        {
           'file': 'sintel.mp4',
           'title': 'Sintel',
           'streamer': 'rtmp://rtmp.server.com/application',
           'image': 'http://thumbnails.server.com/thumbs/sintel.jpg',
           'provider': 'rtmp',
           'duration': '888.06',
           'description': 'An animated short from the Blender project'
        },
        {
           'file': 'elephant.mp4a',
           'title': 'Elephant´s Dream',
           'streamer': 'rtmp://rtmp.server.com/application',
           'image': 'http://thumbnails.server.com/thumbs/elephant.jpg',
           'provider': 'rtmp',
           'duration': '653.79',
           'description': 'An animated short from the Blender project'
        }
    ] 
```

我可以做播放列表部分，但我不确定三个子部分。

完整的 json 看起来像这样

```
{
    'flashplayer': 'player.swf',
    'id': 'playerID',
    'width': '650',
    'height': '240',
    'playlist.position': 'right',
    'playlist.size': '250',
    'playlist': [
        {
           'file': 'bunny.mp4',
           'title': 'Big Buck Bunny Trailer',
           'provder': 'rtmp',
           'streamer': 'rtmp://rtmp.server.com/application',
           'image': 'http://thumbnails.server.com/thumbs/bunny.jpg',
           'duration': '33.03',
           'description': 'An animated short from the Blender project'
        },
        {
           'file': 'sintel.mp4',
           'title': 'Sintel',
           'streamer': 'rtmp://rtmp.server.com/application',
           'image': 'http://thumbnails.server.com/thumbs/sintel.jpg',
           'provider': 'rtmp',
           'duration': '888.06',
           'description': 'An animated short from the Blender project'
        },
        {
           'file': 'elephant.mp4a',
           'title': 'Elephant´s Dream',
           'streamer': 'rtmp://rtmp.server.com/application',
           'image': 'http://thumbnails.server.com/thumbs/elephant.jpg',
           'provider': 'rtmp',
           'duration': '653.79',
           'description': 'An animated short from the Blender project'
        }
    ]
  } 
```

除了播放列表中的项目，我什么都能做。我之前使用的是字典对象，只是调用了 (JavaScriptSerializer) serializer.Serialize(ConfigurationDictionary) 将其转换为我想要的 JSON。

有没有办法通过播放列表部分中的部分获得我想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:48:47.290

使“播放列表”属性成为歌曲或曲目对象的数组或列表，其中包含列出的属性（文件、标题、流媒体、图像、提供者、持续时间、描述）

```
Public Class Track
 Public Property file as String
 Public Property title as String 
 (etc)
End Class

Public Class Playlist
 Public Property flashplayer As String
 (etc)
 Public Property playlist As List(Of Track)
End Class 
```

然后你可以只使用 JSON 库或函数。

# asp.net-mvc - 字节模型的 C# MVC3 布尔编辑器模板或 html 帮助器

> ID：11891540
> 
> 赞同：1
> 
> 时间：2012-08-09T20:35:45.380
> 
> 标签：asp.net-mvc, templates, checkbox, boolean, html-helper

有没有办法为 Byte MVC 模型属性制作复选框编辑器模板或 html 助手？其他人在这里确实问过基本相同的问题，[使用 EditorTemplate 将字节显示为复选框？](https://stackoverflow.com/questions/10078150/display-a-byte-as-a-checkbox-using-a-editortemplate)，我最终可能会使用谁的解决方案；此外，它链接到一些相关[的 Checkbox for nullable boolean](https://stackoverflow.com/questions/6849774/mvc3-creating-checkbox-for-nullable-boolean)。然而，这些都没有真正建立一个工作编辑器模板/助手，所以虽然我认为这意味着我将不得不有些不合常规地解决这个问题，但我只是想仔细检查一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:44:58.737

您可以对类型使用 EditorTemplate 和自定义模型绑定器，`byte`如果类型为布尔值，则检查绑定器以返回 1 或 0

# jquery - 如何导航直到跨度进入表格？

> ID：11891544
> 
> 赞同：0
> 
> 时间：2012-08-09T20:36:03.467
> 
> 标签：jquery, html-table

我想知道如何导航到表格中的跨度；这是我的代码

[![](../Images/3a4547965d91fdd3a3cf98a7b57942b4.png)](https://i.stack.imgur.com/UQY0L.png)

这是由visualforce页面生成的html代码。在我的 pageblocktable 中，我的表的 id 是`id="maintable"`. 我想使用 jQuery 在表格的第一行中选择一个跨度，但我不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:41:27.900

CSS后代选择器：

```
$('#maintable span') 
```

这将返回表内的所有跨度。您可以循环然后使用

```
$('#maintable span').each(function (i) {
     // do something here
}); 
```

或者，如果您只需要第一个，请使用：

```
$('#maintable span').first() 
```

或者

```
$('#maintable span:first') 
```

**编辑**：

对于第一行使用

```
$('#maintable tr:first span:first') 
```

# dll - 为本机 WinSxS DLL 创建发布者配置文件需要什么

> ID：11891548
> 
> 赞同：0
> 
> 时间：2012-08-09T20:36:08.493
> 
> 标签：dll, configuration, native, policy

下面是 MSDN 为 WinSxS DLL 指定发布者配置文件（策略）的格式。我对文件的名称（可能是 .dll.config）感到困惑。网上的所有信息都是关于托管程序集的，其中规定了创建策略 DLL、对其进行签名，并且可以使用 Wix 轻松安装。

我已经成功创建了一个 DLL 并将其安装到 WinSxS 文件夹，方法是创建一个将其描述为 WinSxS dll 的清单文件。我需要有关为新 DLL 版本创建策略文件的信息，这将允许绑定到旧版本 DLL 的应用程序绑定到新 DLL。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
   <assemblyIdentity type="win32-policy" 
      publicKeyToken="b09aca5b7f613458" 
      name="policy.1.0.ssc" 
      version="1.0.0.0" 
      processorArchitecture="x86"/>
   <dependency>
      <dependentAssembly>
         <assemblyIdentity 
            type="win32" 
            name="ssc"  
            processorArchitecture="x86" 
            publicKeyToken="b09aca5b7f613458"/>
         <bindingRedirect oldVersion="0.0.0.0" newVersion="1.0.0.0"/>
      </dependentAssembly>
   </dependency>
</assembly> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T17:19:02.427

首先，您使用问题中描述的清单格式创建策略文件。然后使用“makecat”为策略创建一个验证目录。因此，一旦您已经为 POLICY 创建了验证目录文件（并对其进行了签名），您就可以使用下面的 wix 配置。不要忘记 bindingRedirect 组件描述了哪些版本将绑定到特定的 DLL。

```
<Component Id="PolicyComp" Guid="GUID-HERE" Win64="$(var.Win64)">
  <File
     Id="policy_manifest"
     Assembly="win32"
     Name="policy.<dll_name>.dll.manifest"
     KeyPath="yes"
     AssemblyManifest="policy_manifest"
     Source="$(var.release_dir)\policy.<dll_name>.dll.manifest"
     Vital="yes"
  />
  <File
     Id="policy_catalog"
     Name="policy.<dll_name>.dll.cat"
     Source="$(var.release_dir)\policy.<dll_name>.dll.cat"
     Vital="yes"
  />
</Component> 
```

# ruby-on-rails - Rails 和 Formtastic：如何在右侧显示复选框的标签？

> ID：11891550
> 
> 赞同：3
> 
> 时间：2012-08-09T20:36:17.057
> 
> 标签：ruby-on-rails, ruby, twitter-bootstrap, formtastic

我正在使用 Twitter 引导程序。

我有以下代码...

```
<div class="row">
  <div class="span5">
    <%= f.input :is_authorized_to_leave_with_child %>
    <%= f.input :is_emergency_contact %>
  </div>
  <div class="span5">
  </div>
</div> 
```

问题是，标签显示在左侧，复选框显示在右侧。与 Twitter Bootstrap 示例表单复选框部分的外观相反，请查看：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

复选框在右侧，标签在右侧。我怎样才能这样显示它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-17T10:55:37.940

从**formtastic 2.x**`app/inputs/#{ input_name.underscore }_input.rb`开始，您可以使用该文件重新定义现有输入的行为。

的默认行为`BooleanInput`是：调用`to_html`方法，调用`label_with_nested_checkbox`，调用`label_text_with_embedded_checkbox`，创建如下布局：

```
<label>
  <input />
</label> 
```

并使用这个逻辑：

```
check_box_html << "" << label_text 
```

**因此，您需要做**的只是`app/inputs/boolean_input.rb`使用以下代码创建一个文件：

```
class BooleanInput < Formtastic::Inputs::BooleanInput
def label_text_with_embedded_checkbox
        label_text << "" << check_box_html
    end
end 
```

并更改一个`app/assets/formtastic-ie7.css`文件以使该输入看起来更漂亮：

```
.formtastic .boolean label input {
    left:-4px;
} 
```

这是它的样子：

![在此处输入图像描述](../Images/ba9b356bf33e41b0d17f9c83d4965002.png)

# php - 如何通过 FTP 安装具有 MySQL 数据库/登录名的 PhpMyAdmin

> ID：11891552
> 
> 赞同：4
> 
> 时间：2012-08-09T20:36:31.380
> 
> 标签：php, mysql, sql-server, phpmyadmin

我有 MySQL 数据库。我有 FTP 登录。我正在尝试通过 FTP 安装 PhpMyAdmin。我已经将 PhpMyAdmin 文件夹从 phpmyadmin.net 上传到 FTP，我现在应该怎么做才能将 PhpMyAdmin 连接到 MySQL 数据库？我找不到任何配置文件，我必须从 MySQL 数据库中插入主机 url、数据库名称、用户名和密码。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:40:41.817

首先，从他们的[网站](http://www.phpmyadmin.net/home_page/downloads.php)下载 phpmyadmin 。接下来，使用 FTP、SSH 等将其解压缩到服务器的首选目录 - 您喜欢的任何内容。在 phpmyadmin 的根目录中找到 config.sample.inc.php 文件，将其重命名为 config.inc.php 并编辑必要的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:39:55.407

您需要制作 config.inc.php 文件 -- [http://www.phpmyadmin.net/documentation/#quick_install](http://www.phpmyadmin.net/documentation/#quick_install)向您显示格式。

# ruby-on-rails - 如何在 Rails 中正确实现表单？

> ID：11891554
> 
> 赞同：0
> 
> 时间：2012-08-09T20:36:40.680
> 
> 标签：ruby-on-rails, dry, rails-models

我正在用 Rails 开发我的第一个 Web 应用程序，我正在思考这是实现功能的好方法还是坏方法。

这个 Web 应用程序有一个 User 和 Guild 类。目标是用户通过单选按钮回答一组问题，以便与某个公会匹配。

因为公会有一个大陆位置，每个大陆都有国家，我有大约 60 个选项，每个选项都有一个名称和一个 ID，还有其他较短的单选按钮问题，只有 3 个选项。总共有大约 7 组问题，所有这些问题都在 Views 文件中“硬编码”。

我主要关心的是：由于 Guild 类对每组问题都有一个字段，因此在数据库中对表单的答案进行建模是一种更好的做法吗？

我正在考虑注册该选项并将其查询到数据库并返回匹配的行会。但后来我想到了公会的注册过程，以及我必须如何为他们重复相同的选项以匹配模型。

此外，因为表单将是 webapp 中访问最多的元素，如果应用程序检索每个选项而不是硬编码，会不会损害性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:14:19.800

我建议使用名为 simple_form 的 gem。它使建筑形式非常简单。

是的，您应该对其进行建模并使用表单构建器来帮助您。

你会做这样的事情

```
simple_form_for(@user) do |form|
  form.input :some_attribute
  form.collection_radio :guild_country, [collection of countries]
end 
```

像上面那样的东西会做到这一点。

这是 simple_form 参考 [https://github.com/plataformatec/simple_form/](https://github.com/plataformatec/simple_form/)

如果您需要所有国家/地区，请使用名为 Carmen [https://github.com/jim/carmen的宝石](https://github.com/jim/carmen)

# testng - 测试 NG 过滤器仅在套件的第一个测试中分组

> ID：11891561
> 
> 赞同：0
> 
> 时间：2012-08-09T20:37:11.287
> 
> 标签：testng

我正在运行 TestNG，并且我正在尝试仅运行所有套件附加中的特定组，但只有第一个测试被组过滤。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd">
<suite name="Managemenet" parallel="methods" thread-count="100" preserve-order="false"  >
<test verbose="2" name="Chen Tests" parallel="tests" thread-count="100" >
     <groups>
          <define name="Sanity">
              <include name="mgmt_sanity"></include>
          </define>
         <define name="Regression">
              <include name="mgmt_regression"></include>
              <include name="mgmt_sanity"></include>
          </define>
         <define name="Smoke">
              <include name="mgmt_smoke"></include>
          </define>

    </groups>

    <classes>
        <class name="com.chen.auto.mgmt.chenTests">
        </class>
    </classes>
</test>

<test verbose="2" name="Dudu Tests" parallel="tests" thread-count="100" >
     <groups>
          <define name="Sanity">
              <include name="mgmt_sanity"></include>
          </define>
         <define name="Regression">
              <include name="mgmt_regression"></include>
              <include name="mgmt_sanity"></include>
          </define>
         <define name="Smoke">
              <include name="mgmt_smoke"></include>
          </define>

    </groups>
    <classes>
        <class name="com.chen.auto.mgmt.dudu">
        </class>
    </classes>
</test>
</suite> 
```

有一个类似的[未决问题](https://stackoverflow.com/questions/9494027/running-multiple-testng-tests-by-defining-groups-from-command-line)，但没有答案。
它看起来像一个错误。结果，即使使用所有并行选项，我也无法使用 ReportNG。

有人如何使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:22:27.140

根据[TestNG 文档](http://testng.org/doc/documentation-main.html)，您可以定义[groups of groups](http://testng.org/doc/documentation-main.html#groups-of-groups)，这就是您要做的事情。`<run>`但是，这只是创建组，您仍然需要通过指定元素来定义要运行的组：

```
<test name="MyTest">
  <groups>
    <define name="GroupOfGroups1">
      <include name="group1"/>
      <include name="group2"/>
    </define>

    <define name="all">
      <include name="GroupOfGroups"/>
      <include name="group3"/>
    </define>

    <run>
      <include name="all"/>
    </run>
  </groups>

  <classes>
    <class name="org.test.MyTest"/>
  </classes>
</test> 
```

这定义了应该由 TestNG 调用程序执行的所有测试。并行设置对包含在运行中的测试没有影响，而是对这些选定测试的执行方式有影响。您可以在同一[文档页面](http://testng.org/doc/documentation-main.html)中阅读更多关于TestNG 中[并行运行](http://testng.org/doc/documentation-main.html#parallel-running)测试的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T11:03:37.130

升级到 testNg 6.7 - 它肯定会解决你的问题。

# java - Postgres/JSON - 将父子关系转换为 json

> ID：11891562
> 
> 赞同：3
> 
> 时间：2012-08-09T20:37:11.760
> 
> 标签：java, json, postgresql, recursive-query, self-join

我在 postgres 数据库中有以下记录。parent_pk 与父子关系中的 pk 相关。

```
pk 名称类型 parent_pk
--- ---- ---- ---------
1 hnumber101 房子 0
2 hnumber201 房子 0
101 dodge_charger 车辆 1
102野马车1
103 民用车 2
301约翰用户101
302 爱德华用户 102
303 约翰用户 102
304 约翰用户 103

我想从上面生成一个json，格式如下-

[ {
   “身份证”：1，
   “名称”：“hnumber101”，
   “类型”：“房子”
   “孩子”： [ {
              “身份证”：101，
              "name": "道奇充电器",
              “类型”：“车辆”
              “孩子”： [{
                       “身份证”：301，
                       “姓名”：“约翰”，
                       “类型”：“用户”
                       }],                            
              },
              {
              “身份证”：102，
              “名称”：“野马”，
              “类型”：“车辆”
              “孩子”： [{
                       “身份证”：303，
                       “姓名”：“约翰”，
                       “类型”：“用户”
                       },
                       {
                       “身份证”：302，
                       “姓名”：“爱德华”，
                       “类型”：“用户”
                       }],                            
              }],
  },
 {
   “身份证”：2，
   “名称”：“hnumber201”，
   “类型”：“房子”
   “孩子”： [ {
              “身份证”：103，
              “名称”：“公民”，
              “类型”：“车辆”
              “孩子”： [{
                       “身份证”：304，
                       “姓名”：“约翰”，
                       “类型”：“用户”
                       }],

              }],
  }]

```

我曾尝试使用 WITH RECURSIVE 查询，但这会产生条目列表，然后我必须在我的 java 代码中进行大量循环/散列映射，才能在父级中获取该子块。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:32:06.807

这些方面的东西：

```
SELECT things.pk, things.name, things.type, array_agg(sub.pk) AS children
FROM things
LEFT JOIN things sub ON sub.parent_pk = things.pk
GROUP BY things.pk, things.name, things.type; 
```

```
PK | 姓名 | 类型 | 孩子们  
-----+----------------+---------+-----------
   1 | hnumber101 | 房子| {102,101}
 101 | 道奇充电器 | 车辆 | {301}
 102 | 野马 | 车辆 | {303,302}
 301 | 约翰 | 用户 | {空值}
 302 | 爱德华 | 用户 | {空值}
 303 | 约翰 | 用户 | {空值}

```

*将行收集到由pk* 键入的 Map 中`Map<Integer, Thing>`。

```
class Thing {
  Integer id;
  String name;
  String type;
  Integer[] children;

  public String printMe(Map<Integer, Thing> allThings) {
    String ret = "... format json stuff here";
    for(Integer childId in children) {
      Thing child = allThings.get(childId);
      ret += child.printMe(allThings);
    }
    ret += "Format json stuff here";
    return ret;
  } 
}; 
```

# java - <> 在 Java 中做了什么？

> ID：11891567
> 
> 赞同：5
> 
> 时间：2012-08-09T20:37:45.267
> 
> 标签：java, list, generics, types

我知道如果您想要一个列表（例如），您可以像这样创建它：

```
List<String> 
```

如果你想创建一个通用类型的列表，你可以这样做：

```
MyList<T> 
```

那么 <> 所做的唯一事情就是将对象与容器或列表耦合起来吗？它还有其他用途吗？它实际上是做什么的？在另一篇文章中阅读如何将静态方法放入泛型类型对类型安全来说是一件坏事，那么这是糟糕的代码吗？

```
public class LinkList<T> {

private final T t;
private final LinkList<T> next;

public LinkList(T t, LinkList<T> next){
    this.t = t;

    this.next = next;
}
// Creates list from array of T
public static <T> LinkList<T> getList(T[] t){
    if(t == null){
        return null;
    }
    LinkList linkList = null;
    for(int i = t.length-1; i >= 0; i--){
        linkList = new LinkList(t[i], linkList);
    }
    return linkList;
}

public T element() {
    return t;
}

public LinkList<T> getNext() {
    return next;
} 
```

}

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T20:39:20.360

`<>`帮助编译器验证类型安全。

编译器确保在编译时而不是运行时`List<MyObj>`保存类型的对象。`MyObj`

泛型主要用于编译时的类型安全。由于类型擦除，编译后所有通用信息都将替换为具体类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T20:44:37.247

当您在其中放入`<>`一个类型时，它用于将潜在的运行时异常转换为编译错误。

以这段代码为例，没有泛型

```
ArrayList stringList = new ArrayList();
stringList.add("string");
stringList.add(3.4);
String s = (String) stringList.get(1); 
```

// 这将编译并产生运行时错误，将字符串比较为双倍。

如果您添加泛型，您可能会在编写时发现这些错误。

考虑以下代码：

```
ArrayList<String> stringList = new ArrayList<String>(); // Since Java 7 you can write - new ArrayList<>()
stringList.add("string"); // OK
stringList.add(3.4); // Would not compile! 
```

通过这种方式，您可以在编译时捕获与类型相关的错误。

编译器本身并不关心您是否使用了泛型。它会在编译时删除所有这些，并且就像您没有使用泛型一样。但是，如果您首先遇到编译错误，它不会让您编译。

我还注意到我没有回答您关于代码的问题。

当你做这样的事情

```
class LinkedList<T> {
....
.... 
} 
```

你告诉编译器这个类支持泛型，在这种情况下可以做我上面所说的

你可以做

```
LinkedList<String> list = new LinkedList<String>(); 
```

现在，在你的课堂上，无论在哪里，`T`它都会像在说 一样`String`，因此只允许添加和维护字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-15T00:05:13.610

`<>`用于一个很酷的功能，称为**泛型**。

在 Java 5 之前，不存在泛型。`ArrayList`像返回和操纵这样的集合`Objects`。问题在于，例如，当您知道您只会存储`String`s 时。但是如果你`Objects`在所有的类中都使用，你不仅要使用烦人的强制转换（`String blah = (String) list.get(9);`），而且如果你犯了一个错误并把一个`Integer`放在你的列表中，你的程序就会`ClassCastException`烧毁。

Java 5 用泛型解决了这个问题，所以现在你可以说`ArrayList<String>`你只会`String`在 this 中使用 s `ArrayList`。但是如果你需要制作`ArrayList<Supercalifragilisticexpealidocious>`呢？显然，打字并不是一种愉快的体验，尤其是当你不得不打字的时候

```
ArrayList<Supercalifragilisticexpealidocious> supercaliList = new ArrayList<Supercalifragilisticexpealidocious>(); 
```

声明其中之一。此外，它可能会导致拼写错误，尤其是对于这种大小的类型参数；在某些时候，你一定会打错一两个字母，让你的程序`cannot find symbol`烧毁——或者更糟的是，默默地使用错误的类并导致逻辑错误。

Java 7 引入了纯`<>`语法。它被称为**菱形运算符**，因此您不必`<>`在赋值运算符的右侧重新键入类型参数（在 中的东西）。所以，

```
ArrayList<Supercalifragilisticexpealidocious> supercaliList = new ArrayList<Supercalifragilisticexpealidocious>(); 
```

变成

```
ArrayList<Supercalifragilisticexpealidocious> supercaliList = new ArrayList<>(); 
```

这意味着重新键入的时间要少得多`Supercalifragilisticexpealidocious`。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:42:35.777

<> 可以与您希望的任何类一起使用，而不仅仅是容器。这些只是最常见的，因为我们希望能够在容器中存储我们想要的任何类型的对象，并且仍然保持类型安全。要更深入地理解这一点，您应该研究泛型及其用途。

# jquery - 自定义 jQuery 插件返回 val()

> ID：11891568
> 
> 赞同：0
> 
> 时间：2012-08-09T20:37:47.580
> 
> 标签：jquery, jquery-plugins

我创建了一个简单的 jquery 插件，如果该字段为空白（文本框的水印），则将“灰色”文本放入文本框中。问题是当我提交表单并尝试获取文本框的值时，它返回的是水印文本而不是空字段。

水印文本等于“标题”属性，所以我可以做这样的事情，但我不想对我表单中的每个文本框都这样做：

```
if ($("#textboxid").val() == $("#textboxid").attr("title")) {
  //default, return empty string
} else {
  //user entered this
} 
```

理想情况下，这将是我的插件的一部分，当我调用 .val() 时它会返回一个空字符串关于如何执行此操作的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:43:20.727

对于我制作的自定义水印/占位符插件，我有类似的东西。我只是在单击时处理它（表单的提交按钮），然后遍历所有内容。

[**更新了 jsFiddle DEMO**](http://jsfiddle.net/Lkas5/2/)

```
(function ($, window, document, undefined) {

    $.fn.myCustomVal = function () {
        return $(this).each(function () {
            var _self      = $(this),
                _watermark = _self.attr('title');

            _self.attr('data-watermark', 'on');
            _self.val(_self.attr('title'));

            _self.on('focus', function () {
                $(this).val('');
            });
            _self.on('blur', function () {
                $(this).val(_watermark);
            });
        });            
    };

    $(function () {
        // change this class here to whatever you want
        $('.btnSubmit').on('click', function () {
            $('input:text[data-watermark]').each(function () {
                if ($(this).val() == $(this).attr("title")) {
                    $(this).val('');
                }
            });

            // now validate / submit / whatnot
            alert('submitted!');
        });
    });

}(jQuery, window, document));

// ************************
// Initiate plugin
$('input:text').myCustomVal(); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:12:53.637

我接受了 mcpDesigns 的答案，因为它让我走上了正确的道路，但并不是我想要的。我最终将以下内容添加到插件中以创建一个名为“ActualVal()”的函数，该函数返回正确的值：

```
 $.fn.ActualVal = function () {
            if (this.val() == this.attr(opts.attrName)) {
                return "";
            } else {
                return this.val();
            }
        } 
```

因此，当我不使用 val() 获取值时，我使用 .ActualVal() 获取值。比围绕特定按钮编码更清洁和动态=）

多谢你们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:05:28.580

尝试这样的方法：http: [//jsfiddle.net/aVhMh/3/](http://jsfiddle.net/aVhMh/3/)

逻辑也不是很通用：如果用户想要输入确切的水印值，您的插件将无用。我知道这是一个**非常**不可能的情况，但考虑到这一点会更优雅。

```
$("input[type=text]").addClass("watermark");
$("input[type=text]").each(function() {
    $(this).val($(this).attr("title"));
});

$("input[type=text]").on("focus", function() {
    if ($(this).hasClass("watermark")) {
        $(this).removeClass("watermark").val("");
    }
});
$("input[type=text]").on("blur", function() {
    if ($(this).val() == "") {
        $(this).val($(this).attr("title")).addClass("watermark");
    }
});
$("form").on("submit", function() {
    $("input[type=text].watermark").val("");
    $(this).submit();
}); 
```

# java - 从 ScriptLibray 中的自定义类获取 JavaAgent 类

> ID：11891570
> 
> 赞同：0
> 
> 时间：2012-08-09T20:37:52.547
> 
> 标签：java, lotus-domino, lotus

我已将字体 (.ttf) 文件附加到 Notes 中的 Java 脚本库。此库附加到 Java 代理。在该代理中，我可以使用以下代码获取字体文件的输入流：

```
InputStream is = this.getClass().getResourceAsStream("/SourceSansPro.otf"); 
```

这按预期工作，我可以将字体嵌入代理生成的 PDF 中。

但是，我想从脚本库中的自定义类中完成这项工作。但是上面的代码在主代理的“公共类JavaAgent”类之外不起作用。

有人知道为什么吗？

我已经尝试过类似 this.getClass().getDeclaringClass().getResource.... 但无济于事。

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:43:01.440

假设您只是在读取流，您应该能够像在 notesMain 中那样实例化它，然后将流作为参数传递给方法或作为构造函数的一部分传递给自定义类，并将其用作字段自定义类或方法

# c# - 通过串口发送和接收更多线路

> ID：11891579
> 
> 赞同：0
> 
> 时间：2012-08-09T20:38:55.540
> 
> 标签：c#, serial-port

*（编者注。可能相关：[SerialPort 类](https://msdn.microsoft.com/en-us/library/system.io.ports.serialport%28v=vs.110%29.aspx)）*

我正在尝试向 RFID 阅读器发送命令并接收“答案”。

例如，如果阅读器可以读取标签，则会收到 UID `port.Write("S")`。`port.ReadLine()`

我正在使用这样的[SerialDataReceivedEventHandler](https://msdn.microsoft.com/en-us/library/system.io.ports.serialdatareceivedeventhandler%28v=vs.110%29.aspx)：

```
port.DataReceived += new SerialDataReceivedEventHandler(port_DataReceived);

private void port_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
    port.ReadLine();  
} 
```

这就是我发送命令的地方：

```
public void sendData()
{
    port.Write("S");
    port.Write("r01");
    port.Write("r02");
} 
```

现在的问题是我只收到“S”的第一个答案，它不会发送所有 3 行。问题是我不知道如何将所有 3 个命令发送给阅读器。

如果我忽略`SerialDataReceivedEventHandler`，我发现我可以使用此代码：

```
public void sendandreceive()
{
    port.Write("S");
    port.ReadLine();
    port.Write("r01");
    port.ReadLine();
} 
```

该代码将发送和接收命令和答案。但我读到使用`SerialDataReceivedEventHandler`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:59:25.413

当 DataReceived 事件触发时，它不会再次触发，除非有更多数据到达。发生的事情是串行端口的缓冲区包含所有三个响应，而您只读取一个。

如果您有一个必须解析的消息结构（您这样做，每条消息都以 EOL 终止符结尾），那么使用 DataRecived 可能会很复杂。有很多方法可以解决这个问题。

您可以将所有可用字节读入缓冲区并提取完整的消息，然后触发另一个事件，每条消息一个。如果缓冲区中有部分消息，请将其保留到下一个 DataReceived 事件。

您可以将整个操作（上面示例中的发送和接收）作为异步操作执行，该操作在完成时发出信号。这是最简单的方法。请记住，如果 SerialPort.ReadLine 没有及时获得完整的“行”，它可能会超时并抛出 TimeoutException。因此，它不是最强大的解决方案。您必须考虑如果操作超时该怎么办（缓冲区中可能有不完整的消息）。

您使用哪种方法取决于应用程序的性质。协议是否总是“发送命令，得到响应”？还是某些命令会导致连续响应？

正确（稳健地）进行串行通信是很困难的。我将从最简单的解决方案开始并仔细测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T12:04:42.210

如果我使用该方法，它工作得很好，`sendandreceive`所以我将使用它并且不会使用`SerialDataReceivedEventHandler`.

我有点困惑，因为在每个串行端口示例`SerialDataReceivedEventHandler`中都使用了。

不过，我需要先对其进行测试，然后才能说它可以正常工作。也就是说，我愿意接受其他建议。

# ruby-on-rails - 如何在rails 3中过滤具有特定条件的模型上的每个查询

> ID：11891580
> 
> 赞同：0
> 
> 时间：2012-08-09T20:39:02.200
> 
> 标签：ruby-on-rails, filter

我有一个模型需要添加一个属性来判断它是否处于活动状态，例如一个名为 disabled 的布尔值，可以设置为 true。我已经有一个很大的代码库，我不想在`unless disabled == false`每个查询中添加一个条件。

是否有某种前置过滤器可以在每个查询之前运行以检查此属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:42:49.143

您可以使用 ActiveRecord default_scope 语句。它会将您定义的范围连接到通过模型完成的每个查询。

```
class MyModel < ActiveRecord::Base
  default_scope where(:disabled => false)
end 
```

现在运行这个：

```
MyModel.all 
```

生成：

```
# => SELECT * FROM my_models WHERE disabled =false 
```

它的完整文档可以在[这里](http://apidock.com/rails/ActiveRecord/Scoping/Default/ClassMethods/default_scope)找到。我还在我的博客中发表了[关于该主题的帖子。](http://railsadventures.wordpress.com/2012/08/09/activerecord-default_scope/)我建议在应用之前先了解有关 default_scope 的一些很好的见解。

# php - 使用 POST 到 .php

> ID：11891582
> 
> 赞同：11
> 
> 时间：2012-08-09T20:39:08.747
> 
> 标签：php, objective-c

**编辑**：我已经根据从人们那里得到的所有建议编辑了 OP，所以这是最新的（并且仍然无法正常工作）。

* * *

我有以下代码，它应该将一些数据发布到我拥有的 .php 文件中（然后发布到数据库，但这超出了这个问题的范围）。

对于我的方法，我传递了一个包含一些字符串的数组。

```
-(void)JSON:(NSArray *)arrayData {

    //parse out the json data
    NSError *error;

    //convert array object to data
    NSData* JSONData = [NSJSONSerialization dataWithJSONObject:arrayData 
                                                       options:NSJSONWritingPrettyPrinted 
                                                         error:&error];

    NSString *JSONString = [[NSString alloc] initWithData:JSONData 
                                                 encoding:NSUTF8StringEncoding];

    NSString *URLString = [NSString stringWithFormat:@"websitename"];

    NSURL *URL = [NSURL URLWithString:URLString];

    NSLog(@"URL: %@", URL);

    NSMutableURLRequest *URLRequest = [NSMutableURLRequest requestWithURL:URL 
                                                              cachePolicy:NSURLRequestUseProtocolCachePolicy 
                                                          timeoutInterval:60.0];

    NSData *requestData = [NSData dataWithBytes:[JSONString UTF8String] length:[JSONString length]];

    NSString *requestDataString = [[NSString alloc] initWithData:requestData 
                                                        encoding:NSUTF8StringEncoding];
    NSLog(@"requestData: %@", requestDataString);

    [URLRequest setHTTPMethod:@"POST"];
    NSLog(@"method: %@", URLRequest.HTTPMethod);
    [URLRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
    [URLRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [URLRequest setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"];
    [URLRequest setHTTPBody: requestData];

    NSURLConnection *connection = [[NSURLConnection alloc]initWithRequest:URLRequest delegate:self];

    if (connection) {
        NSMutableData *receivedData = [[NSMutableData data] retain];
        NSString *receivedDataString = [[NSString alloc] initWithData:receivedData 
                                                             encoding:NSUTF8StringEncoding];
        NSLog(@"receivedData: %@", receivedDataString);
    }

    //potential response
    NSData *response = [NSURLConnection sendSynchronousRequest:URLRequest returningResponse:nil error:nil];

    //convert response so that it can be LOG'd
    NSString *returnString = [[NSString alloc] initWithData:response encoding:NSASCIIStringEncoding];

    NSLog(@"RETURN STRING: %@", returnString);
} 
```

**注意**：我在代码中有我网站的实际 URL，以便任何人都可以测试是否愿意。

* * *

然后是 .php 方面的事情，我所要做的就是寻找任何输入（但我什么也没得到）。

```
<html>
        <body>
        <?php

        echo "Connection from iOS app to MySQL database<BR>";

        echo '<pre>'.print_r($GLOBALS,true).'</pre>';

        ?>
        </body>
</html> 
```

* * *

我现在真正想做的就是确认数据正在通过，通过将其回显到页面，然后从我的应用程序中读取页面（到目前为止数据尚未显示）。

* * *

.php 的输出：

```
 <html>
        <body>
        Connection from iOS app to MySQL database<BR>'Array
(
)
'<pre>Array
(
    [_GET] => Array
        (
        )

    [_POST] => Array
        (
        )

    [_COOKIE] => Array
        (
        )

    [_FILES] => Array
        (
        )

    [GLOBALS] => Array
 *RECURSION*
)
</pre>        </body>
</html> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-13T13:50:07.223

您正在发布 JSON 而不是`application/x-www-form-urlencoded`.

PHP`$_POST`仅用于 *-requests*`application/x-www-form-urlencoded`。如果您像这样直接发送 json，那么您应该这样做：

```
<?php
$posted_json = json_decode(file_get_contents("php://input"));
print_r($posted_json); 
```

请注意，如果 json 无效，这将不起作用。您始终可以使用以下命令调试请求正文：

```
<?php
echo file_get_contents("php://input"); 
```

* * *

这是 $_POST 和 $_GET [http://www.php.net/manual/en/language.variables.external.php](http://www.php.net/manual/en/language.variables.external.php)的一般解释：

它们旨在与普通的 html 表单一起使用，尽管您可以使用适当的编码和内容类型标头轻松模拟此类请求。但它们不适用于 JSON，因为这不是普通的 html 表单的工作方式。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T12:52:51.057

我对Objective-C一无所知，假设您正在尝试发送以下JSON数据（即JSONString如下）：

```
{
    "firstName": "John",
    "lastName": "Smith",
    "age": 25,
    "address": {
        "streetAddress": "21 2nd Street",
        "city": "New York",
        "state": "NY",
        "postalCode": "10021"
    },
    "phoneNumber": [
        {
            "type": "home",
            "number": "212 555-1234"
        },
        {
            "type": "fax",
            "number": "646 555-4567"
        }
    ]
} 
```

那么你的请求应该是这样的：

```
POST /yourwebsite.php HTTP/1.1
Host: cs.dal.ca
User-Agent: USER-AGENT
Accept: text/html,application/json,*/*
Connection: close
Content-Type: application/x-www-form-urlencoded
Content-Length: 624

data=%7B%0A++++%22firstName%22%3A+%22John%22%2C%0A++++%22lastName%22%3A+%22Smith%22%2C%0A++++%22age%22%3A+25%2C%0A++++%22address%22%3A+%7B%0A++++++++%22streetAddress%22%3A+%2221+2nd+Street%22%2C%0A++++++++%22city%22%3A+%22New+York%22%2C%0A++++++++%22state%22%3A+%22NY%22%2C%0A++++++++%22postalCode%22%3A+%2210021%22%0A++++%7D%2C%0A++++%22phoneNumber%22%3A+%5B%0A++++++++%7B%0A++++++++++++%22type%22%3A+%22home%22%2C%0A++++++++++++%22number%22%3A+%22212+555-1234%22%0A++++++++%7D%2C%0A++++++++%7B%0A++++++++++++%22type%22%3A+%22fax%22%2C%0A++++++++++++%22number%22%3A+%22646+555-4567%22%0A++++++++%7D%0A++++%5D%0A%7D%0A%0A%0A 
```

请注意，这`Content-Type: application/json`不是您使用过的发布数据的方式，并注意数据已被**urlencoded**，这应该不难，我在 Objective-C 中找到了关于这样做的链接：[URLEncoding a string with Objective-C](https://stackoverflow.com/questions/2590545/urlencoding-a-string-with-objective-c)

发送上述请求，我得到了这个：

php代码：

```
<?php
$raw_json_data = $_POST['data'];
$json_data = json_decode($raw_json_data);
print_r($json_data); 
```

结果：

```
stdClass Object
(
    [firstName] => John
    [lastName] => Smith
    [age] => 25
    [address] => stdClass Object
        (
            [streetAddress] => 21 2nd Street
            [city] => New York
            [state] => NY
            [postalCode] => 10021
        )

    [phoneNumber] => Array
        (
            [0] => stdClass Object
                (
                    [type] => home
                    [number] => 212 555-1234
                )

            [1] => stdClass Object
                (
                    [type] => fax
                    [number] => 646 555-4567
                )

        )

) 
```

这就是你想要的！

**注意**：我应该提到您在[http://yourwebsite.php](http://yourwebsite.php)的脚本无法正常工作，我什至无法向它提交正常的表单！可能存在服务器配置错误或类似问题，但使用 Apache 2.2 和 PHP 5.4.4 以及上面提到的代码，我得到了它的工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T21:15:52.783

您已接受 http 标头字段设置为`application/json`。内容类型也是如此。您可能需要检查在浏览器和服务器之间传递的数据是否是有效的 json。您也可以将其更改为`text/plain`并检查..

# extjs4 - Extjs4 MVC、Ext.define() 和 Ext.create()

> ID：11891583
> 
> 赞同：6
> 
> 时间：2012-08-09T20:39:10.530
> 
> 标签：extjs4, extjs4.1, extjs-mvc

首先，我的问题是我想知道 Ext.Define() 和 Ext.Create() 之间有什么不同，并且我想知道如何以正确的方式使用它们。

我查看了我的代码和许多 Extjs4 MVC 教程，

我在 Extjs4 MVC 项目中发现了很多 Ext.define() 方法。

我了解 Ext.define() 方法创建一个对象（CLASS）。

如果我只需要一个面板，我不会对面板进行任何继承，也不会在初始化后重用面板。

然后，我想我需要使用 Ext.create() 而不是 Ext.define()。

所以，我尝试更改我的代码@.@;

看来，原来是

```
Ext.Define("App.view.MyGrid",{
    extend : 'Ext.grid.panel',
    alias : 'widget.MyGrid',
    initComponent : function(){
        this.columns : [{ header: 'column' }];
        this.store : Ext.create('Ext.data.ArrayStore', {})
    }
}); 
```

我改为，

```
var myGrid = Ext.create('Ext.grid.Panel', {
    layout: 'fit',
    border: false,
    columns: [{ header: 'column' }],
    store: Ext.create('Ext.data.ArrayStore', {})
}); 
```

更改代码后，我遇到了无法在 Controller 中检索（grep）面板的问题，

在我以前这样做之前，

```
refs: [
        {
            ref: 'myGrid',
            selector: '',
            xtype: 'MyGrid', //view - alias
            autoCreate: true
        }
]

this.getMyGrid(); 
```

但更改后，我不知道如何在控制器中检索该面板。

在搜索网络以了解如何使用它时，我只是想知道'**我对 Ext.define() 和 Ext.create() 的理解是否正确？为什么很多人使用 Ext.define() 方法，即使他们不再使用也不用于继承？**'

请建议我了解 Extjs 的基础知识。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T08:45:21.993

我的 2c：我**总是**定义东西，然后创建它（除非它是 2 衬里组件）。这意味着我总是可以在其他地方重用一个组件，甚至不必考虑我*是否*愿意。

`Ext.define`还会在页面加载时创建错误，而不是组件 init/construct（取决于代码的编写方式），至少对我来说，这使调试更容易。

此外，它似乎`Ext.define`实际上更快，这很重要。[http://jsperf.com/extjs-create-vs-define-create](http://jsperf.com/extjs-create-vs-define-create)

`Ext.define`还倾向于简化架构（因为它迫使您考虑将要调用的组件，并且这有助于自动加载器的文件名（顺便说一句，这是使用`Ext.define` [http://docs. sencha.com/ext-js/4-1/#!/api/Ext.Loader](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader)）

`Ext.define`，使用`requires`关键字，还可以让您通过 sdk（[http://www.sencha.com/products/sdk-tools/](http://www.sencha.com/products/sdk-tools/)）创建 sencha 包的自定义构建 - 我有点不确定这是否在 ExtJS 4 中使用虽然，或者只是联系。

唱完它的优点后，它肯定是文件数量之间的权衡，这本身就是一种复杂性。

# sql - SQL：通过连接机器名称创建数据库

> ID：11891590
> 
> 赞同：0
> 
> 时间：2012-08-09T20:39:34.390
> 
> 标签：sql, sql-server-2008

我必须创建一个查询，该查询应该通过连接机器名称和任何给定名称来创建数据库。我有以下 SQL 查询，但出现错误。请给我建议。

```
DECLARE @machinename VARCHAR(100)    
SET @machinename=HOST_NAME()   

CREATE DATABASE @machinename+' Test' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:43:43.770

我真的不知道您为什么要这样做，但是您将需要动态 SQL（所以首先，请转到[此链接](http://www.sommarskog.se/dynamic_sql.html)）。也就是说，你可以这样做：

```
DECLARE @machinename VARCHAR(100), @SQL VARCHAR(8000)
SET @machinename=HOST_NAME()
SET @SQL = 'CREATE DATABASE ' + QUOTENAME(@machinename + ' Test')
EXEC(@SQL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:45:08.757

您需要使用动态 SQL，并且需要删除该`' Test'`部分中的空格：

```
DECLARE @machinename VARCHAR(100)    
declare @sql varchar(max)
SET @machinename=HOST_NAME()  
set @sql = 'CREATE DATABASE ' + QUOTENAME(@machinename + '_Test')

execute(@sql) 
```

从[MSDN 数据库标识符](http://msdn.microsoft.com/en-us/library/ms175874.aspx)：

> 不允许嵌入空格或特殊字符。

# python - Python - locals() 和闭包

> ID：11891591
> 
> 赞同：6
> 
> 时间：2012-08-09T20:39:34.797
> 
> 标签：python, closures, locals

我找不到这种行为的充分解释。

```
>>> def a():
...     foo = 0
...     print locals()
...     def b():
...         print locals()
...     b()

>>> a()
{'foo': 0}
{} 
```

但：

```
>>> def a():
...     foo = 0
...     print locals()
...     def b():
            foo
...         print locals()
...     b()

>>> a()
{'foo': 0}
{'foo': 0} 
```

我知道在第二种情况下有一个闭包，但我找不到关于实际是什么以及在什么条件下应该返回函数的详细描述`locals()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:43:20.717

如果你没有`foo`在闭包内赋值，Python 会将其解析为`foo`作用域的上一级（直到找到`foo`某个地方或抛出异常）。

通过在第二个示例中提到`foo`within ，您将locals 放入了 内，但它解析为. 如果你分配，比如说，in ，你会看到`b()``foo``b()``foo``a()``foo = 1``b()`

```
 {'foo': 0}
 {'foo': 1} 
```

作为输出。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:53:26.673

locals() 内置函数打印绑定到**代码对象**的本地符号表，并在解释器收到源代码中的名称时填充。

第二个例子，当反汇编时，将在**b**函数代码中包含**LOAD_GLOBAL foo**字节码指令。此 LOAD_GLOBAL 指令将向上移动范围，找到外部 foo 名称并将其绑定到代码对象，方法是将名称偏移量添加到闭包（函数 b）代码对象的**co_names**属性中。

 ****locals() 函数打印本地符号表（如前所述，函数代码对象的 co_names 属性）。

[在此处](http://docs.python.org/reference/datamodel.html#index-880)阅读有关代码对象的更多信息。****

# entity-framework - 基于 EF 模型的 Repository 是否应该首先包含 Update 方法？

> ID：11891592
> 
> 赞同：0
> 
> 时间：2012-08-09T20:39:37.510
> 
> 标签：entity-framework, repository-pattern

我一直在使用存储库模式和实体框架模型的首次设置。在我的基础存储库类中，我有典型的 CRUD 方法。由于 EF 跟踪对象的更改，为什么我需要更新 CRUD 方法？我可以简单地查询存储库，对对象进行更改并提交，而无需调用 Update。EF 将自动更新任何使用 Modified 对象状态更改的对象。谢谢

```
public class BaseRepository<T> : IRepository<T> where T : class
{
  private ObjectSet<T> _set;
  private readonly IDatabaseFactor _databaseFactory;

  protected MyDataContext DataContext
  {
    get{ return _databaseFactory.DataContext;}
  }

  public BaseRepository(IDatabaseFactory dbFactory)
  {
    _databaseFactory = dbFactory;
        _set = _databaseFactory.DataContext.CreateOjbectSet<T>();
  }

  public virtual IQueryable<T> GetQuery()
  {
    return _set;
  }

  public virtual void Insert(T entity)
  {
    _set.AddObject(entity);
  }

  public virtual void Delete(T entity)
  {
    _set.DeleteObject(entity);
  }

  public virtual void Update(T entity)
  {
    _context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:47:22.403

存储库应该从它的实现中抽象出来。这意味着您可以在每个接口下有任何实现。进行这种分离的全部意义在于使您可以完全重写 BaseRepository 而无需更改任何使用它的代码（因为使用它的代码应该基于 IRepository

一个例子是实体框架与 WCF 数据服务。它们都在底层使用 EF 和 LINQ，但 WCF 数据服务需要在数据上下文上调用 Update 方法来构建 URL 以提交数据。

# c# - Windows 上任何单个进程可以处理的最大内存量

> ID：11891593
> 
> 赞同：31
> 
> 时间：2012-08-09T20:39:39.643
> 
> 标签：c#, windows, memory, limit

[Windows 版本的内存限制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)回答了 Windows 上任何单个进程可以处理的最大内存量：

> 在 32 位版本的 Windows 上，单个进程一次可以映射和寻址不超过 3GB 的虚拟内存。在 64 位版本的 Windows 中，32 位进程一次可以映射和寻址不超过 4GB 的虚拟内存。
> 
> 对于 64 位进程，该数量很难计算，因为根据各种因素可能会应用许多重叠限制。它通常在 7TB 左右。

我的问题：如何验证“3GB”、“4GB”等值？

可以写一个C#程序来证明吗？有办法吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-09T21:27:12.497

Mark Russinovich 发表了一个关于 windows 内存资源的多部分系列，确实很好地涵盖了这一点。你可以在这里找到它：http: [//blogs.technet.com/b/markrussinovich/archive/2008/07/21/3092070.aspx](http://blogs.technet.com/b/markrussinovich/archive/2008/07/21/3092070.aspx)

他涵盖了限制为何如此的原因以及测试。测试的代码在某处的管子里四处飘荡。

如果您想了解内存资源以及从泄漏各种类型中可以看到的问题，这是一本很好的读物。

但是，简而言之，32 位操作系统上的 32 位：2 GB，除非设置为大地址空间感知，在这种情况下为 3 GB。64 位操作系统上的 32 位：2 GB，除非设置为大地址空间感知，在这种情况下为 4 GB。

64 位进程：2 GB，除非设置为大地址空间感知，在这种情况下，它可以寻址高达 8 TB，除非它托管在限制为 7 TB 的基于 Intel Itanium 的系统上。

微软在以下网址说明了各种限制（按风格和类型）：http: [//msdn.microsoft.com/en-us/library/aa366778.aspx](http://msdn.microsoft.com/en-us/library/aa366778.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:45:00.333

您可以在控制台应用程序中编写某种循环来测试它。

也许创建一个正好为 1MB 的字符串并循环连接过程以增加它的大小，直到你得到一个......堆栈溢出错误。

在每次迭代中，WriteLine 的大小或迭代次数。

**编辑**

我要补充一点，因为 STRING 是不可变的（尽管在*技术上*是一个引用类型）来使用 OBJECT

**编辑二**

Trisped 指出，装在 Object 中的字符串仍然是不可变的。

创建一个字节数组 [1024] 应该可以解决问题。

# django - 寻找基于 Django 类的视图并在单个页面示例上有多个表单

> ID：11891605
> 
> 赞同：8
> 
> 时间：2012-08-09T20:40:13.073
> 
> 标签：django, forms, class

我一直在寻找如何使用更新的基于 Django 类的视图方法在一个页面上显示 2 个独特的表单。

任何人都可以参考任何东西吗？或者提供一个基本的例子。谷歌不是我的“朋友”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T21:31:04.913

关键是您甚至不必使用其中一个`FormView`子类来处理表单。您只需添加用于手动处理表单的机器。在您确实使用`FormView`子类的情况下，它只会处理 1 并且仅处理 1 表单。因此，如果您需要两种表格，您只需手动处理第二张表格。我将`DetailView`其用作基类只是为了表明您甚至不必从`FormView`类型继承。

```
class ManualFormView(DetailView):
    def get(self, request, *args, **kwargs):
        self.other_form = MyOtherForm()
        return super(ManualFormView, self).get(request, *args, **kwargs)

    def post(self, request, *args, **kwargs):
        self.other_form = MyOtherForm(request.POST)
        if self.other_form.is_valid():
            self.other_form.save() # or whatever
            return HttpResponseRedirect('/some/other/view/')
        else:
            return super(ManualFormView, self).post(request, *args, **kwargs)

    def get_context_data(self, **kwargs):
        context = super(ManualFormView, self).get_context_data(**kwargs)
        context['other_form'] = self.other_form
        return context 
```

# django - django中的行级权限

> ID：11891606
> 
> 赞同：21
> 
> 时间：2012-08-09T20:40:22.723
> 
> 标签：django, django-models, django-permissions

有没有办法在 django 中执行行级权限？我以为没有，但只是在文档中注意到了这一点：

> 不仅可以按对象类型设置权限，还可以按特定对象实例设置权限。通过使用 ModelAdmin 类提供的 has_add_permission()、has_change_permission() 和 has_delete_permission() 方法，可以为同一类型的不同对象实例自定义权限。

[https://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)

但我没有看到任何关于如何实际实现每个实例权限的文档

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-02T17:48:53.123

对于我正在构建的应用程序，我想通过一个简单的装饰器提供行级权限。我可以这样做，因为条件只是 request.user 是否是模型对象的所有者。

以下似乎工作：

```
from functools import wraps
from django.core.exceptions import PermissionDenied, ObjectDoesNotExist

def is_owner_permission_required(model, pk_name='pk'):
    def decorator(view_func):
        def wrap(request, *args, **kwargs):
            pk = kwargs.get(pk_name, None)
            if pk is None:
                raise RuntimeError('decorator requires pk argument to be set (got {} instead)'.format(kwargs))
            is_owner_func = getattr(model, 'is_owner', None)
            if is_owner_func is None:
                raise RuntimeError('decorator requires model {} to provide is_owner function)'.format(model))
            o=model.objects.get(pk=pk) #raises ObjectDoesNotExist
            if o.is_owner(request.user):
                return view_func(request, *args, **kwargs)
            else:
                raise PermissionDenied
        return wraps(view_func)(wrap)
    return decorator 
```

风景：

```
@login_required
@is_owner_permission_required(Comment)
def edit_comment(request, pk):
    ... 
```

网址：

```
url(r'^comment/(?P<pk>\d+)/edit/$', 'edit_comment'), 
```

该模型：

```
class Comment(models.Model):
    user = models.ForeignKey(User, ...
    <...>
    def is_owner(self, user):
        return self.user == user 
```

任何反馈或评论表示赞赏。

保罗·博尔曼斯

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T20:47:02.903

管道在那里（这是您链接的同一页面的底部）：

> 处理对象权限
> 
> Django 的权限框架为对象权限奠定了基础，尽管核心中没有实现它。这意味着检查对象权限将始终返回 False 或空列表（取决于执行的检查）。身份验证后端将接收每个对象相关授权方法的关键字参数 obj 和 user_obj，并可以适当地返回对象级别的权限。

但是没有提供默认实现。因为这是一个共同的话题；SO上有很多[答案](https://stackoverflow.com/questions/4076145/django-adding-permission-to-an-specific-model-instance)。检查右侧，您会看到一些列表。

基本思想是浏览[django 包的 perm 网格](http://djangopackages.com/grids/g/perms/)并选择对象级权限的实现。我个人喜欢[django-guardian](http://www.djangopackages.com/packages/p/django-guardian/)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-09T21:10:47.723

文档讨论的方法将允许您限制对管理员中特定对象的访问。每个方法都传递给正在运行的对象，您可以使用它来确定用户是否可以访问它，方法是返回`True`或`False`。

```
class MyModelAdmin(admin.ModelAdmin):
    ...
    def has_add_permission(self, request):
        # This one doesn't get an object to play with, because there is no
        # object yet, but you can still do things like:
        return request.user.is_superuser
        # This will allow only superusers to add new objects of this type

    def has_change_permission(self, request, obj=None):
        # Here you have the object, but this is only really useful if it has
        # ownership info on it, such as a `user` FK
        if obj is not None:
            return request.user.is_superuser or \
                   obj.user == request.user
            # Now only the "owner" or a superuser will be able to edit this object
        else:
            # obj == None when you're on the changelist page, so returning `False`
            # here will make the changelist page not even viewable, as a result,
            # you'd want to do something like:
            return request.user.is_superuser or \
                   self.model._default_manager.filter(user=request.user).exists()
            # Then, users must "own" *something* or be a superuser or they
            # can't see the changelist

    def has_delete_permission(self, request, obj=None):
        # This pretty much works the same as `has_change_permission` only
        # the obj == None condition here affects the ability to use the
        # "delete selected" action on the changelist 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-30T18:26:08.750

我已经使用 Django 基于类的视图推出了针对此类问题的解决方案。

查看我的文章[Django Generic Class Based Views with Object-Level Permissions Checking](http://blog.darwiniansoftware.com/2013/09/30/dslibpy-django-generic-class-based-views-with-object-level-permissions-checking/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T20:46:10.817

[PyPi 上](http://pypi.python.org/pypi?%3aaction=search&term=django%20permission&submit=search)有大量适用于 django 的“权限”应用程序，
例如，您可以查看[django-object-permission](http://pypi.python.org/pypi/django-object-permission/0.5.2)。

文档所指的是实现权限的功能。人们通过为此创建应用程序来做到这一点。

# r - R中的应用函数导致内存分配错误

> ID：11891609
> 
> 赞同：1
> 
> 时间：2012-08-09T20:40:28.103
> 
> 标签：r, data.table

我正在尝试对**R**中数据框的每一行进行计算，并将计算附加为框架中的新列。我开始使用“by”函数，但计算速度非常慢，所以我改用“apply”函数。我想象它的工作方式是使用我的函数运行 apply ，将输出保存到变量并将该数据附加到原始数据框中。

我创建了一个函数来计算保险计划的期限长度并返回该值，这在样本数据集上运行良好。当我使用较大的数据集时，出现“无法分配大小的向量 ...”的错误。**我知道很多人建议使用更多的 RAM，但我已经有 16GB 的内存，并且在R**中加载了整个数据集，我的计算机说它只使用了 7.7GB 的内存。该数据集有 44 列，约 1100 万条记录，所以我没有看到再添加一列数据会占用 8GB 内存？

朝着正确方向的任何一点都会很棒。

* * *

以下是我正在使用的功能：

```
get_term_length <- function(row_data){

    # convert values to dates
    expiration_date <- as.Date( row_data[42] )
    start_date <- as.Date( row_data[43] )
    cancellation_date <- as.Date( row_data[44] )

    # check to see if the cancellation date is NA - just use entire policy length
    if( is.na(cancellation_date) ){
        return( expiration_date - start_date) )
    }

    # check to see if policy was cancelled early
    if(cancellation_date < expiration_date){
        return( cancellation_date - start_date )
    }

    # the policy was for the entire term
    else{
        return( expiration_date - start_date )
    }

} 
```

我一直在通过调用来运行该函数：

```
tmp <- apply(policy_data, 1, get_term_length) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T05:02:16.210

`data.table`@Dwin 暗示的解决方案

```
 library(data.table)
 policy_data <- as.data.table(policy_data)

  # set the date  columns to be  IDate (the exact form of this will depend
  # on the format they are currently in

  policy_data[, cancellation_date := as.IDate(cancellation_date)]
  policy_data[, start_date := as.IDate(start_date)]
  policy_data[, end_date := as.IDate(end_date)]
  # create a column which is an indicator for NA 

  policy_data[, isna := is.na(cancellation_date)]

  setkey(policy_data, isna)

  policy_data[J(TRUE), tmp := expiration_date - start_date]
  policy_data[J(FALSE), tmp := pmin(cancellation_date - start_date, expiration_date-start_date)] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T21:22:37.733

“经验法则”是您将需要 _at_least_ 3 倍于您正在使用的最大对象的*连续RAM，因此您可能需要更频繁地重新启动并限制系统上其他正在运行的应用程序的数量。*我对拥有 32 GB 的硬件感到相当满意，并且正在研究基于 5-6 GB 大小的数据对象的回归模型。

（我也通常对添加一列数据所花费的时间不满意，所以我有时会创建“外部”或“平行”向量，通常使用 ave() 函数来进行表操作。或者我使用子集()-s 的数据。）R 专家正在研究这个，但尚未公布解决方案。Matthew Dowle 开发了 'data.table' 包来解决它（并且速度非常快），但代价是“[”操作需要不同的语义。

您可以在此处找到其他讨论内存要求的帖子。最常被投票的可能是： [在 R 会话中管理可用内存的技巧](https://stackoverflow.com/questions/1358003/tricks-to-manage-the-available-memory-in-an-r-session/4360358#4360358)。我有点惊讶，那里的答案中没有提到 data.table 包。

编辑：我看到了您接受的答案（这实际上是处理数据子集的一个实例），但我认为这与您之前得到的结果不同。要获得该结果，您需要以下内容：

```
tmp <- with(policy_data, 
          ifelse( is.na(cancellation_date), expiration_date - start_date , # else
            pmin(as.Date(cancellation_date)-as.Date(start_date),
                 as.Date(expiration_date)-as.Date(start_date)
                 )) 
```

`pmin`如果您希望该`ifelse`功能正常工作，您不想使用“na.rm=TRUE” 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T21:31:28.110

看起来您不需要整个 data.frame。只需提取所需的 3 列，即可恢复大部分记忆。

```
tmp <- with(policy_data, 
            pmin(as.Date(cancellation_date)-as.Date(start_date),
                 as.Date(expiration_date)-as.Date(start_date),
                 na.rm=TRUE)) 
```

# java - 使用 Java 工具测试数据库性能

> ID：11891612
> 
> 赞同：0
> 
> 时间：2012-08-09T20:40:40.023
> 
> 标签：java, performance, testing

我是一名 Java 开发人员，现在加入了一个性能测试团队，为他们开发一个测试数据库性能的工具。我的工作是开发一个工具，它接受一组查询，同时访问数据库（线程）并计算平均响应时间。

该工具正在开发为增值服务，以打动客户，从而摆脱项目目前处于的红色状态。我的问题是..

1.  它真的是一个有用的工具吗？使用线程同时命中它会给我们实际的响应时间吗？
2.  有什么建议可以进一步改进上述工具吗？例如，添加图表时间与查询次数
3.  关于可以开发用于测试数据库性能的其他工具的任何想法？

注意：它是一个内部工具，我不关心数据库的性能，我只需要测试它是否可以处理多个查询而没有太多延迟。另外请不要建议使用现有工具，因为我们提供了一些“额外”的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:45:09.280

您可以使用提供 jdbc 采样器的 jmeter。

看：

*   [http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Request](http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Request)

问候

菲利普

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:47:37.673

这不完全是您问题的答案，而是一个建议。

我会使用一些完善的数据库基准测试，如 TPC-H，并从 Java 运行它来记录结果。

我建议查看此线程以获取更多信息：

[如何记录运行存储在文件中的 sql 语句的执行时间？](https://stackoverflow.com/questions/10535341/how-do-i-record-the-execution-time-of-running-sql-statements-that-are-stored-in)

# javascript - 如何在 Rails 应用程序中向 Galleria 添加自定义描述？

> ID：11891615
> 
> 赞同：0
> 
> 时间：2012-08-09T20:40:41.177
> 
> 标签：javascript, ruby-on-rails, galleria, caption

我正在使用 Galleria（经典），但无法在图像上添加自定义描述。否则画廊工作正常，只有我在标题中看到 img 文件名。

我正在尝试使用 dataConfig 功能 - [http://galleria.io/docs/options/dataConfig/](http://galleria.io/docs/options/dataConfig/)。我不太擅长 JavaScript，所以我真的看不出我做错了什么。

我的代码：

```
 <div id="galleria">
   <% for image in @trip.images %>  
   <%= link_to image_tag(image.image.url(:thumb)), image.image.url(:large) %> 
 <span class="desc"> <%= image.title %>  </span>
   <% end %>
</div>
<script>

    Galleria.run('#galleria');
    Galleria.configure({
         minScaleRatio: 1.5,
         maxScaleRatio: 3,
         dataConfig: function(img) { return { description: $(img).next('.desc').html() }; }

   });

</script>
</div> 
```

你能帮忙吗？谢谢！

**更新：** 生成的 HTML 代码

```
 <div id="galleria">
   <a  href="http://s3.amazonaws.com/Thrill/images/439/large/14d8868ac166ce1.54701969.JPG?1326357617"><img alt="14d8868ac166ce1.54701969" src="http://s3.amazonaws.com/Thrill/images/439/thumb/14d8868ac166ce1.54701969.JPG?1326357617" /></a>  
   <span class="desc" style=""> aaaaaaaaaaaaaaa </span>
   <a href="http://s3.amazonaws.com/Thrill/images/440/large/14c77a671ced5e4.22721576.JPG?1326357627"><img alt="14c77a671ced5e4.22721576" src="http://s3.amazonaws.com/Thrill/images/440/thumb/14c77a671ced5e4.22721576.JPG?1326357627" /></a>   
   <span class="desc" style=""> bbbbbbbbbbbbbbbbbbbbbbbbb </span>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:03:52.200

我从未使用过它，但我看到您的图像位于标签内，并且您正在尝试导航到从标签开始。首先，您必须移动到父级，然后导航到下一个标签。

```
$(img).parent().next('.desc').html() 
```

希望这是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:36:53.177

它应该工作：http: [//jsfiddle.net/7g7am/](http://jsfiddle.net/7g7am/)

```
Galleria.run('#galleria', {
    dataConfig: function(img) {
        return {
            description: $(img).parent().next('.desc').html()
        };
    }
});
​ 
```

# asp.net - 绕过 Windows 身份验证

> ID：11891620
> 
> 赞同：5
> 
> 时间：2012-08-09T20:41:00.603
> 
> 标签：asp.net, windows, authentication

我有一个配置为在集成 Windows 身份验证模式下运行的 ASP.NET Intranet 应用程序。在最近出现需求之前，它一直运行良好。

需要的是，需要通过作为 Windows 服务的可用性检查器来检查 Intranet 的可用性。检查器所做的是点击一个 ASP.NET 页面并检查响应对象。由于 windows 服务没有使用域用户帐户运行，因此它得到

> 远程服务器返回错误：(401) Unauthorized。

我正在考虑添加一个新的 asp.net 页面供检查器使用，并且我想告诉系统不要对其进行身份验证。但我相信身份验证发生在应用程序甚至有机会查看页面之前，即在应用程序代码“看到”页面之前返回 401 错误。

我有什么选择？

谢谢！

约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:06:49.380

除了添加一个新文件夹，正如@GordonBell 评论的那样，您可以`location`在根 web.config 文件中使用该元素。

例子：

```
 <location path="YourFile.aspx">
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:53:16.430

尝试这个：

将新文件夹添加到您的网站（例如：/Check）

在 /Check 中，创建新的 web.config，其中包含：

```
<configuration>
  <system.web>
    <authentication mode="Windows" />
    <authorization>
      <allow users="?"/>
      <allow users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

那么您在 /Check 中访问的任何内容都不应经过身份验证。

# php - Yii 格式化日期和过滤器

> ID：11891629
> 
> 赞同：0
> 
> 时间：2012-08-09T20:41:48.927
> 
> 标签：php, yii

我有一个日期字段，需要显示为日/月/年并保存为年-月-日。我想为此使用 CFilter ，但由于它在操作之后应用了一个函数，因此它将在渲染之前执行。

我应该把它放在一个事件上，是否有过滤输入数据和格式化 yii 中的输出数据的默认方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:31:42.233

最简单的方法是将您的信息作为日期类型传递给 CGridView / CDetailView：

```
'columns'=>array(
    array(
        'name'=>'checkout',
        'type'=>'date',
    ),
), 
```

传入一个类型，然后使用相应的 formatDate 函数 CFormatter 对其进行格式化。它非常方便/灵活。这样，您甚至不必将日期转换为其他格式。更多信息在这里：[https ://github.com/samdark/a-guide-to-yii-grids-lists-and-data-providers/blob/master/grid-columns.md](https://github.com/samdark/a-guide-to-yii-grids-lists-and-data-providers/blob/master/grid-columns.md)

# regex - 正则表达式 - 排除组中的字符集

> ID：11891639
> 
> 赞同：0
> 
> 时间：2012-08-09T20:42:31.923
> 
> 标签：regex

尝试编写一个可以拆分标题和作者的正则表达式，语法如下：

作者姓名 - 标题

标题可以包含多个“-”。

我有以下正则表达式：`([^-]*) - (.*)`

这适用于大多数情况，例如

```
Douglas Adams - Life, The Universe & Everything 
```

分为`Douglas Adams`和`Life, The Universe & Everything`

但对于双桶作者姓名失败 - 例如`Ayize Jama-Everett - Some Book Title`我得到：

作者 =`Everett`

所以我想将排除组更改为排除`[^-]`组`" - "`，因为名称中的连字符周围不会有空格。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:45:46.103

看起来你需要[惰性量词](http://www.regular-expressions.info/repeat.html)：

```
(.*?) - (.*) 
```

第一组将在之前获得最少数量的符号`-`。第二个将捕获其余部分。如果字符串中没有，它将不匹配`-`。

取决于你如何使用它。您还可以通过添加开始和结束量词来强制它与整个字符串匹配：

```
^(.*?) - (.*)$ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:53:09.043

如果您知道“ - ”是作者姓名和书名之间的分隔符，只需在该分隔符上进行简单的字符串拆分。一个正则表达式似乎有点矫枉过正。

在 Python 中：

```
>>> "Author Name-Hyphen - Book Title".split(" - ")
['Author Name-Hyphen', 'Book Title'] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T20:49:00.643

*除了空格-连字符-空格之外的所有*“字符”类看起来都像 tbis——这是不这样做的一个很好的理由（Perl 中的示例）：

```
say "author=($1) title=($2)"
    if q{foo bar-baz - taz-fraz daz} =~ m/((?: [^-]|(?:[^ ]-[^ ]))+ ) \s - \s (.+)/x
#                                          ^^^^^^^^^^^^^^^^^^^^^^^^
#                                          this mess here 
```

即使用交替`[^-]`或`[^ ]-[^ ]`（非空格、连字符、非空格）重复一次或多次。字符类必须是一个字符——但替代品不是。

相反，您应该使用“split”（或您的语言中的任何等价物）

```
my ($author, $title) = split(/ - /, $record, 2); 
```

它将所有内容`-`放入 $author 中，然后将其余部分放入标题中。

# object - 在 Intellij IDEA 中使用快捷方式和自动完成创建新对象的最佳方法是什么？

> ID：11891641
> 
> 赞同：18
> 
> 时间：2012-08-09T20:42:43.143
> 
> 标签：object, autocomplete, intellij-idea, new-operator, shortcut

`Object`+ `shortcut`➜`Object object = new Object();`

是否有这样的捷径？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2017-06-29T20:18:48.003

截至**2017 年**，改进了@aleksander 的回答，我相信在 Intellij IDEA 中尽可能高效地创建新对象的最佳方法是（点击放大）：

[![在此处输入图像描述](../Images/3506eab4f18a72ae2b1148b74f1b55ab.png)](https://i.stack.imgur.com/yq4BH.png)

1.  去`Settings > Live Template`。
2.  然后单击`+`窗口右侧的 ，添加新的实时模板。
3.  选择您想要的缩写（Like`n`或`newo`）。描述可能是`new Object`。
4.  添加模板文本：`$Clazz$ $obj$ = new $Clazz$($END$);`
5.  点击 que按钮，如上图所示`Edit Variables`填写`Clazz`和`obj` **Expression**和**Default Value 。**
6.  不要忘记单击`Define`旁边的`No applicable contexts`, 以定义`Java > Statement`为上下文。

现在测试它：转到编辑器，键入`n`，然后键入`TAB`密钥。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-09T21:13:08.723

`new Obj`,`Tab`完成到`new Object()`, `Ctrl`++ ( |**引入变量**`Alt`) :`V``Refactor`

 **```
Object o = new Object(); 
```

如果需要更改名称，然后按`Enter`确认。

有关使用实时模板功能的更方便的解决方案，请[查看](https://stackoverflow.com/a/44834284/104891)[@MarcG](https://stackoverflow.com/users/3411681/marcg)的以下答案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-15T02:09:16.560

您可以定义自己的实时模板。按 Crtl+Alt+Shift+S（转到设置），然后转到选项卡 Live Templates 并写下类似于下面的内容，您将拥有新的快捷方式（newo+tab）。

[![在此处输入图像描述](../Images/fc94183951351d73fca61feab1bea690.png)](https://i.stack.imgur.com/QaOy0.png)**

# entity-framework - DateTime2 让我发疯

> ID：11891650
> 
> 赞同：0
> 
> 时间：2012-08-09T20:43:38.003
> 
> 标签：entity-framework, datetime2

`DateTime`我在我的项目 .NET 中使用 EF 4（模型优先）并且我在这些领域遇到了困难。

当我将使用`SaveChanges()`此异常时抛出：

> *System.Data.SqlClient.SqlException ：将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。*

我尝试使用：

```
System.Globalization.CultureInfo enGB = new System.Globalization.CultureInfo("en-GB"); 
```

但没有新的事情发生。如果我今晚不修理它，我会炸毁我的电脑。

我需要帮助，我不想炸毁我的电脑 =( 1 周尝试解决但没有成功

这是我的代码：

```
protected void btnSave_Click(object sender, EventArgs e)
{
        int id = Convert.ToInt32(Request.QueryString["id"]);
        ModeloContainer ctx = new ModeloContainer();
        Cliente cli = ctx.Cliente.Where( cl => cl.IdCliente == id).First();
        Contrato c = new Contrato();

        c.Descricao = this.txtDescricao.Text;
        c.FaturarPara = this.ddlFaturarPara.SelectedValue;
        c.Tolerancia =  Convert.ToInt32(this.txtSuspenderContratoEm.Text);
        c.PeriodoPagto = this.ddlPeriodoPagamento.SelectedValue;

       // DateTime dtExpiracao = this.txtExpiraEm.Text.Trim() == "" ?                                                                       Convert.ToDateTime("01/01/0001") : Convert.ToDateTime(this.txtExpiraEm.Text.Trim());
        DateTime dt = DateTime.Now;
        System.Globalization.CultureInfo enGB = new System.Globalization.CultureInfo("en-GB");
        dt = Convert.ToDateTime(dt, enGB);

        c.ExpiraEm = dt; //Here is the problem! but I no have idea how fix it

        ctx.AddToContrato(c);
        ctx.SaveChanges();
        this.SalvarServiços(c.IdContrato);
} 
```

我知道，这里有很多这样的问题，但没有一个能解决我的问题。

我想在 TextBox 中插入这样的日期：`09/08/2012`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:10:19.863

我不认为你的`ExpiraEm`专栏有任何问题。

我怀疑您有另一个（或超过 1 个）不可为空的日期时间字段，并且由于您没有为它们提供任何值，EF 将为`01/01/0001`它们传递，这是 SQL 服务器不接受的（SQL Server 的可接受的最低日期是 1753 年 1 月 1 日）。所以你得到了这个 SQL 异常。

[类似的情况在这里](https://stackoverflow.com/q/1916441/337294)和[这里](https://stackoverflow.com/q/1678474/337294)都遇到过。

# javascript - JavaScript 用退格键连接字符串

> ID：11891653
> 
> 赞同：11
> 
> 时间：2012-08-09T20:43:48.823
> 
> 标签：javascript, string, concatenation, backspace

我有一个函数 f 类似于

```
function f(str){
    alert("abc"+str);
} 
```

现在，我想以这样一种方式使用 JavaScript 特殊字符“\b”，以便我可以选择是否要显示硬编码字符串“abc”。例如，

```
f("\b\b"+"yz"); //should output "ayz" 
```

我尝试了同样的方法，但它不起作用。换句话说，我想连接一个带有退格字符的字符串，以便我可以从字符串中删除最后一个字符。

我们可以在 JavaScript 中做到这一点吗？

**编辑** 真正的代码太大了（它是一个巨大的 1 衬里，连接了许多字符串）。要在上面的例子中映射它，我们不能编辑函数 f，所以从函数 f 之外做任何你想做的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T21:01:57.190

问题来自这样一个事实，即`\b`ASCII 代码中的另一个字符。特殊行为仅在由某些字符串阅读器（例如文本终端）实现时。

您需要自己实现退格行为。

```
function RemoveBackspaces(str)
{
    while (str.indexOf("\b") != -1)
    {
        str = str.replace(/.?\x08/, ""); // 0x08 is the ASCII code for \b
    }
    return str;
} 
```

示例：http: [//jsfiddle.net/kendfrey/sELDv/](http://jsfiddle.net/kendfrey/sELDv/)

像这样使用它：

```
var str = RemoveBackspaces(f("\b\byz")); // returns "ayz" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:48:09.623

编辑：我意识到这可能不是 OP 想要的，但在大多数情况下，这绝对是从字符串末尾删除字符的更简单方法。

您可能应该只使用`string.substring`or `string.substr`，两者都返回字符串的一部分。您可以获取从 0 到字符串长度减 2 的子字符串，然后将其与“yz”或其他任何内容连接起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:48:42.967

有趣的问题。我首先检查了 JS 中关于 \b 的一些假设。

如果你试试这个：

console.log('abc\b\byz');

您会得到与“abcyz”相同的答案。

这意味着，它不是连接的函数，而是方法中的一个基本错误。

我会修改您使用 SubString 的方法，然后获取 \b 的索引并切出前一个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T20:54:54.003

像这样的东西：

```
function f(str, abc){
   if(!abc) abc = "abc";
   if (str.indexOf("\b") != "undefined")
   {
       abc = abc.slice(0,-1);
       str = str.replace("\b","");
       f(str, abc);
   }
   else alert(abc+str);
} 
```

作为额外的奖励，您可以使用递归！

请注意，这比这样做要慢一些：

```
function f(str){
    var count = 0;
    var abc = "abc";
    for(var i = 0; i < str.length; i++)
    { 
       if(str[i] = "\b") //at least i think its treated as one character...
       count++;
    }
    abc = abc.slice(0, count * -1);
    alert(abc+str);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-11T13:24:19.117

我正在处理 backspace `\b`，但它总是在s`\x1B[K`之后有 ANSI 擦除。`\b`所以我要做的是：

```
function applyBackspaces(str) {
  // Catch character + \b or character + \b\x1B[K and delete it
  const re = /.?[\u0008](\u001b\[K)?/
  while (re.test(str)) {    
    str = str.replace(re, "");
  }
  return str;
}

// wrote "up", backspace+erase, backspace+erase (used backspace key)
// wrote "ls", backspace+backspace+erase (used clear line command C-u)
// wrote uptime
applyBackspaces('up\b\x1B[K\b\x1B[Kls\b\b\x1B[Kuptime') // uptime 
```

# php - php & lighttpd 代码背后的机制？

> ID：11891661
> 
> 赞同：0
> 
> 时间：2012-08-09T20:44:30.263
> 
> 标签：php, lighttpd

我继承了我正在尝试熟悉的网站代码库。首先它由 lighttpd 和 php 提供支持。我的挣扎是 php 可执行文件没有这样命名，这意味着前开发人员选择将文件命名为 samplewebpage.html 而不是 samplewebpage.html，其中没有任何内容（即空文件）并且后面有代码名为 samplewebpage.data 的文件，其中包含所有 php 代码。有人可以告诉我这是如何设置的吗？我正在尝试在新服务器上重建环境以记录构建手册，以防未来开发人员可能需要重建类似的服务器。因此，任何人都可以评论如何以这种方式设置 php/lighttpd 环境，而 php 代码没有 t 进入主 html 文件，但进入一个具有相同名称但扩展名不同的单独文件？(samplewebpage.html --> samplewebpage.data)。感谢您的任何帮助或指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T16:53:40.243

根据我提供的少量信息，我想这是通过重写规则执行的。

一个好的起点是 /etc/lighttpd/lighttpd.conf 配置文件并查看`url.rewrite`

# javascript - 鼠标移出恢复功能

> ID：11891667
> 
> 赞同：0
> 
> 时间：2012-08-09T20:44:43.370
> 
> 标签：javascript, jquery, function, onmouseover, onmouseout

我正在使用 javascript/jQuery 处理一个页面，并且几乎完成了。我应该有旋转内容（函数'rotatecontent'）和当相关按钮悬停时显示在旋转内容位置的div。我已经完成了所有这一切，除非当我将鼠标悬停在按钮上时，所有 div 内容都消失了，并且原始的 rotatecontent 功能不会恢复。一旦用户将鼠标悬停在按钮上，我需要实现一个功能以使其恢复。这是我的 JS：

```
<script type="text/javascript">

var messages;
var curcontentindex = 0;
var prevcontentindex;
var futcontentindex;
var i;

function rotatecontent() {
messages.hide();
curcontentindex = (curcontentindex < messages.length - 1) ? curcontentindex + 1 : 0;
messages.get(curcontentindex).style.display = "block";
}

$(function() {
messages = $('.dyncontent').find('div');
i = setInterval(rotatecontent, 1000);

$('li').hover(
function () {
$(this).addClass("hover");
clearInterval(i); // when mouse is over object
},
function () {
$(this).removeClass("hover");
setInterval(rotatecontent, 1000); //when mouse is no longer over object
}
);

});

</script> 
```

这是我的 HTML：

```
<div class="dyncontent">
<div id="div1">Be A Billiken </div>
<div id="div2" style="display:none">Be A Billiken 2</div>
<div id="div3" style="display:none">Be A Billiken 3</div>
<div id="div4" style="display:none">Be A Billiken 4</div>
<div id="div5" style="display:none">Be A Billiken 5</div>
</div>

<ul id="container" overflow:hidden>

<li><a href="#" onMouseOver="$('div.dyncontent').replaceWith($('#div1').show());" onMouseOut=""><img     src="../Work/Images/BAB.com_web_link_10.jpg"  width="250" height="100" class="Bab-image"></a></li>

<li><a href="#" onMouseOver="$('div.dyncontent').replaceWith($('#div2').show());" onMouseOut=""><img     src="../Work/Images/SLU_on_the_Road.jpg" class="sluotr-image">    </a></li>

<li><a href="#" onMouseOver="$('div.dyncontent').replaceWith($('#div3').show());"     onMouseOut=""><img src="http://slu.edu/Images/graduate/Billiken_Blogs.jpg" class="blogs-    image"></a></li>

<li ><a href="#" onMouseOver="$('div.dyncontent').replaceWith($('#div4').show());"     onMouseOut=""><img src="http://slu.edu/Images/graduate/SLU_Chat.jpg" class="chat-image">    </a></li>

<li><a href="#" onMouseOver="$('div.dyncontent').replaceWith($('#div5').show());"     onMouseOut=""><img src="http://slu.edu/Images/graduate/Viewbook_Button_2011.jpg"     class="view-image"></a>
</li>

</ul> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:49:48.607

jQuery`.hover()`函数有一个特殊的结构，它允许您设置鼠标移到对象上时发生的情况，以及鼠标不再指向对象后发生的情况。

```
$(".class").hover(
  function () {
    $(this).addClass("hover"); // when mouse is over object
  },
  function () {
    $(this).removeClass("hover"); //when mouse is no longer over object
  }
); 
```

保存原始设置，然后在“鼠标未悬停”部分中使用它们

# regex - 用于匹配非空 JSON 字符串的正则表达式？

> ID：11891668
> 
> 赞同：1
> 
> 时间：2012-08-09T20:44:49.447
> 
> 标签：regex, json

我有以下正则表达式..

```
(^\[[.*][[0-9a-zA-Z][0-9a-zA-Z]]*[.*]\]) 
```

这意味着只匹配像这样的非空 JSON 编码字符串......

```
[ { object: HELLO } ] 
```

同时排除“空”JSON响应，例如......

```
[ ] 
```

这些响应中可能有也可能没有空格。

我的正则表达式似乎适用于某些情况，即。

```
[ ] <---- does not match.
[ HELLO ] <---- matches.
[ { HELLO } ] <---- does not match. 
```

我不太关心 JSON 的实际有效性，而是确保在`[]`

检查它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:47:47.327

您的正则表达式不正确，因为您`[...]`同时用于分组和字符类。

*   组是使用括号组成的：`(...)`.
*   字符类是使用方括号形成的：`[...]`.

表达式`[.*]`是一个字符类。这并不意味着您可能想要的“匹配零个或多个任何字符”。它的意思是“完全匹配一个点或星号”。

修复这些错误后，您的正则表达式也可以简化：

```
^\[.*[0-9a-zA-Z]+.*\]$ 
```

这不会*验证*JSON 是否正确。它只检查字符串是否满足以下条件：

*   以 开头`[`。
*   以 结束`]`。
*   至少包含 0-9、az 或 AZ 中的一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:56:56.283

为什么不检查您是否有您不想要的条件呢？

```
^\[\s*\]$ 
```

这应该检查您是否有空的 JSON 响应

IE

*   它开始于`[`
*   它只包含空格（0 个或更多）
*   它以`]`

# php - 错误的数据通过ajax发送到php

> ID：11891669
> 
> 赞同：0
> 
> 时间：2012-08-09T20:44:51.317
> 
> 标签：php, javascript, ajax

这是ajax中的代码

```
 $(document).ready(function(){
     var i = 0;
     while($($(".empleado")[i]).children('.id_empleado').html() != null){
      var  datas ='id_empleado='+encodeURIComponent($($(".empleado")
      [i]).children('.id_empleado').html())+'&i='+i;
      $.ajax({
      type: 'POST',
      url: "descripcion_segundo.php",
      data: datas,
      async: false,
      success:  function (result) {
       $("#descripcion").append(result);
       }
      });
     }
    }); 
```

这是 php(descripcion_segundo.php) 中的代码：

```
<?php
$flag = $_POST['i'];
$id_empleado = $_POST['id_empleado'];
echo "<a>" . $flag ." ".$id_empleado."</a>";
?> 
```

$flag 第一次取值 1，第二次取值 1，然后循环结束。为什么它取值 1？，两次？
有趣的是，同一行定义了 i，下一个：

```
var  datas ='id_empleado='+encodeURIComponent($($(".empleado")
[i]).children('.id_empleado').html())+'&i='+encodeURIComponent(i); 
```

,使用 i 来获取另一个值，但这个值很好，这意味着在这种情况下 i 的值为 0。
帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:51:42.970

对于初学者，您的数据对象设置不正确。你应该做这样的事情：

```
var  datas = { id_empleado : 'Your data' }; 
```

# c# - 如何将数据读取器中的数据读入数据表？

> ID：11891670
> 
> 赞同：0
> 
> 时间：2012-08-09T20:44:56.087
> 
> 标签：c#, ado.net

我有一个用于 ado.net 操作的基类，如下所示：

```
 public abstract class BaseDataAccess
    {
        private string _connectionString = ......

        protected string ConnectionString
        {
            get { return _connectionString; }
        }

        protected object ExecuteScalar(string spName, SqlParameter[] parameters=null)
        {
            using (SqlConnection connection = new SqlConnection(_connectionString))
            {
                using (SqlCommand command = new SqlCommand(spName, connection))
                {
                    if (parameters != null)
                    {
                        command.Parameters.AddRange(parameters);
                    }
                    command.CommandType = System.Data.CommandType.StoredProcedure;
                    connection.Open();
                    return command.ExecuteScalar();
                }
            }            
        }

        protected DataTable ExecuteReader(string spName, SqlParameter[] parameters=null)
        {
            using (SqlConnection connection = new SqlConnection(_connectionString))
            {
                using (SqlCommand command = new SqlCommand(spName, connection))
                {
                    if (parameters != null)
                    {
                        command.Parameters.AddRange(parameters);
                    }
                    command.CommandType = CommandType.StoredProcedure;
                    connection.Open();
                    using (SqlDataReader reader = command.ExecuteReader())
                    {
                        DataTable table = new DataTable();                        
                        table.Load(reader);
                        return table;
                    }
                }
            }
        }
    } 
```

还有一个查询用户表的类

```
 public class UsersAccess : BaseDataAccess
    {
        private const string SP_COUNT_USERS = "spCountUsers";
        private const string SP_GET_USERS = "spGetUsers";

        public int CountUsers()
        {
            return (int)base.ExecuteScalar(SP_COUNT_USERS);
        }

        public IList<User> GetUsers()
        {
            DataTable usersTable = base.ExecuteReader(SP_GET_USERS);
            return GetUsersFromDataTable(usersTable);
        }

        private IList<User> GetUsersFromDataTable(DataTable usersTable)
        {
            IList<User> users = new List<User>();
            foreach (DataRow row in usersTable.Rows)
            {
                User user = new User();
                user.UserID = (int)row["UserID"];
                user.Password = (string)row["Password"];
                user.Username = (string)row["Username"];
            }
            return users;
        }
    } 
```

数据读取器带有 2 行数据，但是当没有数据进入数据表时。如何做到这一点？

PS：为 ado.net 提供更好的基类的任何提示都会很棒。我只有很少的表，只有很少的程序/表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:53:36.693

缺少`users.Add(user);`每个循环末尾的

```
 private IList<User> GetUsersFromDataTable(DataTable usersTable) 
    { 
        IList<User> users = new List<User>(); 
        foreach (DataRow row in usersTable.Rows) 
        { 
            User user = new User(); 
            user.UserID = (int)row["UserID"]; 
            user.Password = (string)row["Password"]; 
            user.Username = (string)row["Username"]; 
            users.Add(user);
        } 
        return users; 
    } 
```

# javascript - 为什么 jQPlot dateAxisRenderer 不能正常工作？

> ID：11891672
> 
> 赞同：5
> 
> 时间：2012-08-09T20:45:03.743
> 
> 标签：javascript, jquery, jquery-ui, jqplot

我想使用 jQPlot 并将轴呈现为一系列日期值 - jQPlot 的原始包可以是这里的字体：

[http://www.jqplot.com/](http://www.jqplot.com/)

[http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html](http://www.jqplot.com/docs/files/plugins/jqplot-dateAxisRenderer-js.html)

**问题是这样的：**

a) xaxis 不是从左侧开始，它还会显示我不想看到的值

b) 右边同样的问题有更多不需要的数字

c) 我希望整天都在 xaxis 1 2 3 4 5 ... 而不是 31 3 6 9 ...

d）是否可以在底部设置一种偏移量（只是一点点......）

**截屏：** ![来自当前状态的图片](../Images/3bf33d9519a2528403ab0e4e0afed27e.png)

**我的代码：**

```
$.jqplot('chartdiv', [
    [
        ['2012-08-01', 0],
        ['2012-08-02', 0],
        ['2012-08-03', 0],
        ['2012-08-04', 0],
        ['2012-08-05', 0],
        ['2012-08-06', 0],
        ['2012-08-07', 1],
        ['2012-08-08', 0],
        ['2012-08-09', 6],
        ['2012-08-10', 0],
        ['2012-08-11', 0],
        ['2012-08-12', 0],
        ['2012-08-13', 0],
        ['2012-08-14', 0],
        ['2012-08-15', 0],
        ['2012-08-16', 0],
        ['2012-08-17', 0],
        ['2012-08-18', 0],
        ['2012-08-19', 0],
        ['2012-08-20', 0],
        ['2012-08-21', 0],
        ['2012-08-22', 0],
        ['2012-08-23', 0],
        ['2012-08-24', 0],
        ['2012-08-25', 0],
        ['2012-08-26', 0],
        ['2012-08-27', 0],
        ['2012-08-28', 0],
        ['2012-08-29', 0],
        ['2012-08-30', 0],
        ['2012-08-31', 0]
    ]
], {
    title: 'Downloadstatistik',
    axes: {
        xaxis: {
            renderer: $.jqplot.DateAxisRenderer,
            tickOptions: {
                formatString: '%#d',
                tickInterval: '1 month'
            },
            pad: 1.0
        },
        yaxis: {
            tickOptions: {
                formatString: '%.0f'
            },
            min: 0
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T23:41:34.603

首先，您应该尝试将您的 tickInterval 设置为“1 天”:)

在此之后，诀窍是根据日期数组的第一个和最后一个值设置您的 xaxis 最小值和最大值。

这是一个例子：

```
var timeline = [[
    ['2012-08-01', 0], ['2012-08-02', 0], ['2012-08-03', 0],
    ['2012-08-04', 0], ['2012-08-05', 0], ['2012-08-06', 0],
    ['2012-08-07', 1], ['2012-08-08', 0], ['2012-08-09', 6],
    ['2012-08-10', 0], ['2012-08-11', 0], ['2012-08-12', 0],
    ['2012-08-13', 0], ['2012-08-14', 0], ['2012-08-15', 0],
    ['2012-08-16', 0], ['2012-08-17', 0], ['2012-08-18', 0],
    ['2012-08-19', 0], ['2012-08-20', 0], ['2012-08-21', 0],
    ['2012-08-22', 0], ['2012-08-23', 0], ['2012-08-24', 0],
    ['2012-08-25', 0], ['2012-08-26', 0], ['2012-08-27', 0],
    ['2012-08-28', 0], ['2012-08-29', 0], ['2012-08-30', 0],
    ['2012-08-31', 0]
]];
var plot = $.jqplot('chartdiv', timeline, {
    title: 'Downloadstatistik',
    axes: {
        xaxis: {
            renderer: $.jqplot.DateAxisRenderer,
            tickOptions: { formatString: '%#d' },
            tickInterval: '1 day',
            min: timeline[0][0][0],
            max: timeline[0][timeline[0].length-1][0]
        },
        yaxis: {
            tickOptions: { formatString: '%.0f' },
            min: 0
        }
    }
}); 
```

我也认为不需要垫子。

**编辑（添加了新的 jsFiddle）：**

您可以在此处测试此示例代码：http: [//jsfiddle.net/JhHPz/4/](http://jsfiddle.net/JhHPz/4/)

# iis - 获取 IIS 日志位置 - 服务器 2k8 & c#

> ID：11891674
> 
> 赞同：3
> 
> 时间：2012-08-09T20:45:04.950
> 
> 标签：iis, logging, azure, windows-server-2008

我们有一堆在 Azure（和 IIS 7.5）上运行的服务器。我试图编写一个独立的应用程序，它会定期将来自服务器的日志文件聚合到一个中心位置。通过聚合，它实际上是将我们的自定义上传器指向目录并让它完成它的事情。

有没有一种简单的方法可以（以编程方式）获取为我的站点配置的 logdir 的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:35:12.250

AaronS 的回答是朝着好的方向，但我想补充几点：

*   如果你想从你的 WebRole.cs 访问 ServerManager，你需要在升级的上下文中运行你的角色才能被允许使用 ServerManager。

> ```
> <Runtime executionContext="elevated"/> 
> ```

*   就像 AaronS 已经解释的那样，您可以使用 ServerManager 访问日志目录。此示例代码更“对 Azure 友好”：

* * *

```
using (ServerManager serverManager = new ServerManager())
{
    var siteName = RoleEnvironment.CurrentRoleInstance.Id + "_Web";
    var id = serverManager.Sites[siteName].Id;
    var logFile = serverManager.Sites[siteName].LogFile;

    var iisLogDirectory = String.Format("{0}\\W3SVC{1}", logFile.Directory, id);
} 
```

* * *

*   为什么不简单地使用 Windows Azure 诊断程序？从[MSDN 文章](http://msdn.microsoft.com/en-us/library/microsoft.windowsazure.diagnostics.diagnosticmonitorconfiguration.aspx)中可以看出，wad **-iis-failedreqlogfiles**、wad **-iis-logfiles**和 wad **-crash-dump**被自动考虑在内。这意味着如果您正确配置了 DiagnosticMonitor，它将每 X 分钟将您的日志发送到存储帐户。如果您有多个服务器正在运行（即使您只有 1 个），这非常棒，因为您可以在一个中心位置访问所有日志。我最近使用 CloudXplorer 访问我的日志，因为它在浏览文件时为您提供了类似资源管理器的体验。

**注意：**对于我的 3 条评论，我假设您使用的是 PaaS WebRole（而不是 IaaS VM）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:02:09.500

您可以使用类似于以下内容的方式获取 IIS7 日志文件位置：

```
using (ServerManager manager = ServerManager.OpenRemote("yourservername"))
{
     Site defaultSite = manager.Sites[0];
     string loglocation=defaultSite.LogFile.Directory;
} 
```

它将以这种格式返回一个字符串：“%SystemDrive%\inetpub\logs\LogFiles”

# asp.net-mvc - 注册后 ASP.NET MVC 结帐重定向

> ID：11891675
> 
> 赞同：0
> 
> 时间：2012-08-09T20:45:07.447
> 
> 标签：asp.net-mvc

我一直在查看 ASP.NET 音乐商店教程结帐过程第 9 部分。除非我在用户结帐时错过了某些内容，如果他们未经授权，他们将被重定向到通过的标准 ASP.NET MVC 登录页面返回 url 即当前结帐阶段。

然后，用户可以通过表单登录，之后他们将被重定向到正确的结帐步骤或通过单击操作链接注册新帐户。如果选择后者，则返回 url 丢失并且用户被重定向到 home/index。提醒帐户/注册发布操作用户来自结帐过程并返回到下一阶段而不是主页/索引的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:05:24.507

您可以附加自己的“ReturnUrl”参数或查看 URL 引用 (=> `Request.UrlReferrer`)。

# iphone - 声纳效应的方向？

> ID：11891679
> 
> 赞同：0
> 
> 时间：2012-08-09T20:45:38.850
> 
> 标签：iphone, ios, cocos2d-iphone

我正在为一款有望具有声纳类型效果的游戏进行预开发。即你什么都看不到，然后你发出声纳 ping，当 ping 击中物体时，它们会被照亮。有没有人对我从哪里开始有任何想法。我正在使用 cocos2d，所以它是一个横向卷轴类型的游戏。任何帮助都会真的很有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:26:16.430

保持简单，这就是我要做的。发出声纳后的每次更新，使用`ccpDistance`并检查声纳开始与您要检查的所有对象之间的距离是否小于`i`每次更新都会增加的某个变量。实际上，这基本上是一个不断增长的圆圈，用于检查其半径内的对象。

如果距离小于`i`，则对精灵运行一个动作，例如`[self runAction:[CCFadeOut actionWithDuration:5]]`。这将显示对象，然后将其淡出，持续时间为 5。如果您事先将对象设置为 visible = false，您应该会获得不错的声纳效果。

如果您需要方向，只需在可见时获取从声纳起始位置到对象的矢量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:59:48.260

对于照明，您可以查看 glColorMask - 您可以在此处查看它的运行情况[http://www.youtube.com/watch?v=Bj4ts5KRSTs&t=4m36s](http://www.youtube.com/watch?v=Bj4ts5KRSTs&t=4m36s)。在碰撞检测方面，您可能想要使用 Box2d。

# java - 通过 Java 中的 ObjectInputStream 实现多种类型的对象

> ID：11891684
> 
> 赞同：1
> 
> 时间：2012-08-09T20:45:54.977
> 
> 标签：java

我正在尝试使用 ObjectStreams 通过套接字连接发送和接收数据。我会使用 RMI 接口，但是 android 不支持它。通过我的实现，我想通过流读取多种对象。例如，如果客户端想要从指定的房间断开连接，他们将发送一个 Disconnect 对象，如果他们想与某人聊天，他们将发送一个聊天对象等。

我知道您必须键入 cast 才能在 java 中使用该对象，如下所示：

```
joinRoom = (Room) clientInput.readObject(); 
```

但是如果我声明一个通用对象来告诉它是什么类型然后确定我将如何处理它，是否有办法？

也许是这样的：

```
Object obj;
obj = (Object) clientInput.readObject(); 
```

然后使用？

```
if(obj.getClass().equals(Room)){....}
if(obj.getClass().equals(Disconnect)){....} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:50:14.410

改用`instanceof`：

```
if(obj instanceof Room)
{
    Room room = (Room) obj;
} 
```

instanceof 使用**RTTI**（运行时类型信息）来检查基类引用（obj）是否在运行时（Room）有效地对应于给定类型。然后你可以安全地执行演员表（你永远不会遇到 a `ClassCastException`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:48:36.727

我相信您可以使用 instaceof 来检查类型。

.equals() 更适合检查字符串是否相同

# mysql - 显示 mysql 查询的实际执行计划

> ID：11891693
> 
> 赞同：1
> 
> 时间：2012-08-09T20:46:55.543
> 
> 标签：mysql, sql, explain

> **可能的重复：**
> [PostgreSQL 的 EXPLAIN ANALYZE 的 MySQL 等价物是什么](https://stackoverflow.com/questions/6812655/what-is-the-mysql-equivalent-of-postgresqls-explain-analyze)

我想知道 mysql 中是否有一种方法可以显示已执行查询的执行计划的实际步骤。

例如`EXPLAIN SELECT ...`显示 mysql 会做什么，但有没有办法实际执行查询并显示执行中使用的执行计划？

我看到 postgreSQL 通过`EXPLAIN ANALYZE SELECT...`

MySQL中是否有任何等效功能？

# c# - 'List.Contains()' 无限期地导致 100% CPU 使用率

> ID：11891697
> 
> 赞同：1
> 
> 时间：2012-08-09T20:47:07.643
> 
> 标签：c#, asp.net, .net

今天在做一个项目时，我在 .NET 中遇到了这种奇怪的行为。

我正在获取文件名列表并将它们添加到对象中。但是，我需要根据已知的“坏”名称列表过滤传入的名称，这导致我这样做。（我绝不是高级 C# 编码器，仍然只是学习它。）但是，因为它导致**aspnet_wp.exe**进程无限期地以 100% 运行，所以我认为我在语言上做错了。

这是我的代码供参考：

```
List<string> localFiles = new List<string>(); 
// I was worried the object was causing the issue so dumbed it down to this with no changed.

string path = "//<file share>/<dir>/"; 
// As I commented below yes, it's slow when it works but it's clearly not working when using the if();

List<string> omitNames = new List<string>();
omitNames.Add("Thumbs.db"); 
// This is the only item in the list when it breaks also.

FileInfo[] localFileList = new DirectoryInfo(path).GetFiles();
foreach ( FileInfo item in localFileList )
{
    if(!omitNames.Contains(item.Name))
    {
        localFiles.Add(path + itemName);
    }
} 
```

谁能解释为什么这段代码作为无限循环运行？看来真的不应该。另外，我意识到使用 a`List`可能不是最好的方法。有没有另一种方法可以干净地实现这一点？

注释掉`if(!){}`for`omitNames`可以让代码正常运行。（虽然显然结果没有被过滤。）

**更新：**要求将其放入控制台应用程序中，您将在下面找到该应用程序。然而它完美地工作。另一件事是有人建议我尝试简单地将其与字符串进行比较。但是如果改为这样，就会发生完全相同的事情：

```
if(item.Name != "Thumbs.db")
{
    localFiles.Add(path + itemName);
} 
```

控制台应用程序（有效）：

```
using System;
using System.IO;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace LoopKiller
{
class Program
{

    static void Main(string[] args)
    {

        List<string> omitNames = new List<string>();
        List<string> localFiles = new List<string>();

        omitNames.Add("Thumbs.db");

        FileInfo[] localFileList = new DirectoryInfo("c:/test/").GetFiles();

        foreach (FileInfo item in localFileList)
        {
            if (!omitNames.Contains(item.Name))
            {
                Console.WriteLine("Adding " + item.Name + " to localFiles.");
                localFiles.Add(item.Name);
                Console.WriteLine("Item added to localFiles.");
            }
        }

        foreach (string item in localFiles)
        {
            Console.WriteLine(item);
        }

        Console.ReadLine();

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:28:03.040

这是不是更快？

```
foreach (string item in Directory.GetFiles("c:/test/", "*.*").Select(Path.GetFileName())
    {
        if (!omitNames.Contains(item))
        {
            Console.WriteLine("Adding " + item.Name + " to localFiles.");
            localFiles.Add(item.Name);
            Console.WriteLine("Item added to localFiles.");
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:23:06.517

试试 Directory.EnumerateFiles。如果您只需要文件名作为字符串，那么为什么要获取整个 FileInfo？我同意把它放在一个哈希集中。

[Directory.EnumerateFiles](http://msdn.microsoft.com/en-us/library/dd383458.aspx)

如果问题出在 !omitNames.Contains(item.Name) 上，仍然无济于事。那里发生了一些奇怪的事情，因为这应该是一个非常非常快的电话。

这会在 2 毫秒内针对 161 个文件的目录运行，并正确跳过这两个文件。

```
public void testFileFilter()
    {
        string path = @"c:\temp\";
        int pathLen = path.Length;
        string[] badNames = { "1692.pdf", "readme.htm" };
        List<string> goodNames = new List<string>();
        string fn;
        System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();
        sw.Start();
        foreach(String fp in System.IO.Directory.EnumerateFiles(path))
        {
            //System.Diagnostics.Debug.WriteLine(fp);
            fn = fp.Substring(pathLen);
            //System.Diagnostics.Debug.WriteLine(fn);
            if(badNames.Contains(fn))
            {
                //fn = fp.Substring(pathLen);
            }
            else
            {
                goodNames.Add(fn);
            }
        }
        sw.Stop();
        System.Diagnostics.Debug.WriteLine(sw.ElapsedMilliseconds.ToString());
        System.Diagnostics.Debug.WriteLine(goodNames.Count());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:41:11.043

尝试以下操作：

```
List<string> localFiles = new List<string>();
// I was worried the object was causing the issue so dumbed it down to this with no changed.

string path = "//<file share>/<dir>/";
// As I commented below yes, it's slow when it works but it's clearly not working when using the if();

List<string> omitNames = new List<string>();
omitNames.Add("Thumbs.db");
// This is the only item in the list when it breaks also.

localFiles = (from files in new DirectoryInfo(path).GetFiles() where !omitNames.Contains(files.Name) select path + files.Name).ToList<string>(); 
```

至于你为什么有这个问题，我不知道。您可以尝试在循环中放置一个断点并进行调试。我发现调试可以使大多数问题变得清晰。例如，锁定文件信息的获取。

# c# - 通过 MVC3 提供音频文件的问题 | 使用各种 HTML5 播放器

> ID：11891700
> 
> 赞同：4
> 
> 时间：2012-08-09T20:47:12.007
> 
> 标签：c#, .net, asp.net-mvc-3, html, audio

我最近遇到了一个我似乎无法解决的问题。我正在为播放音频文件（*主要是 .mp3 和 .wav*）的应用程序创建一个简单的组件，经过一些测试，该应用程序似乎在 Chrome 中运行良好。

然而，在 IE9 中，这是我唯一关心的主要浏览器，我在提供音频文件时似乎遇到了障碍。

当前正在通过控制器操作请求文件，如下所示：

```
public ActionResult PlayAudioFile(string id)
{     
    AudioFile af = FileAgent.GetAudioFile(id);

    try
    {
          //Grabs the file via a Provider
          Stream resultStream = StorageProvider[af.Provider].ReadFile(af.Location);
          resultStream.Position = 0;

          //Added several headers in attempts to resolve the issues
          Response.AppendHeader("Content-Disposition", "attachment; filename=audio.mp3");
          Response.AppendHeader("Content-Length", resultStream.Length.ToString());
          Response.AddHeader("Accept-Ranges", "bytes");
          Response.Headers.Remove("Cache-Control");
          Response.AddHeader("Content-Range","bytes 0-" + (resultStream.Length-1).ToString() + "/" + resultStream.Length.ToString());

          //Returns the file and associated file type (from the Provider)
          return new FileStreamResult(resultStream, resultStream.ContentType);
     }
     catch
     {
            //Uh oh. Error
     }         
} 
```

上面的内容非常适合 Chrome，并且已经在各种 HTML5 播放器中工作，例如**[jPlayer](http://jplayer.org/)**、**[audio.js](http://kolber.github.com/audiojs/)**和[**MediaElement**](http://mediaelementjs.com/)。但是，当文件被以下内容请求时*（使用 jPlayer 语法）*：

```
$(this).jPlayer("setMedia", {
    mp3: '@Url.Action("PlayAudioFile","Home")?id=D00023',
}); 
```

*或 audio.js 语法*：

```
player.load('@Url.Action("PlayAudioFile","Home")?id=D00023'); 
```

*和相关的 audio.js 音频标签：*

```
<audio preload="auto" crossorigin="use-credentials"></audio> 
```

这会触发正确的操作并返回 FileStreamResult，但似乎所有玩家都难以破译文件并正确读取它。我已经尝试了几个播放器，并且在所有播放器中都遇到了同样的问题。

非常欢迎任何建议。谢谢。

**笔记：**

*   如其中一条评论所述，我尝试使用多种评论类型来解决此问题。这些都没有奏效。

*   在探索这个问题的一些可能的根本原因时，我注意到删除 [Authorize] 属性清除了直接访问文件的一些问题，但所有播放器都无法在 IE9 中加载文件。

*   我现在确信这可能是一个凭据问题，当我需要通过 jPlayer 或 audio.js（或者你有什么）请求文件时，我需要包含必要的凭据以允许它通过控制器访问文件。

*   尝试使用`$.ajax({ withCredentials: true})`和`<audio crossorigin='use-credentials>`。两者都没有成功。

**标题信息：**

这两个请求（Chrome 中的工作请求和 IE9 中的非功能请求）都具有以下相同的标头：

```
Cache-Control: public, max-age=3600, s-maxage=0
Date: [Current Date Time]
Expires: [Current Date Time + max-age]
Vary: *

Content-Length: 77870
Content-Type: audio/mpeg
Last-Modified: [Date]

Accept-Ranges: bytes
Content-Range: bytes 0-77869/77870
Server: Microsoft-IIS/7.5 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:53:47.437

是的。不要将音频作为`application/octet-stream`（仅表示通用内容）提供，而是作为`audio/mp3`或`audio/wave`其他[与](https://developer.mozilla.org/en-US/docs/Media_formats_supported_by_the_audio_and_video_elements)您所提供的音频相匹配的适当 contentType 提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T21:40:37.143

在进一步研究该问题后，很明显该问题是由录制过程中 .mp3 文件本身的编码引起的。我选择通过 Audacity 处理它们，并且在这样做之后它们被 IE9（以及其他浏览器）识别。

# c# - 防止应用程序超时

> ID：11891702
> 
> 赞同：0
> 
> 时间：2012-08-09T20:47:23.450
> 
> 标签：c#, asp.net, vb.net

对不起专家的标题，我想不出更好的方法。

下面的代码接收多达 20 个链接，然后使用一个组件，将这 20 个链接转换为文档，并将这些文档存储到一个 adobe pdf 文件中。

如果您传递少于 10 个，它会起作用。以上任何内容都会破坏应用程序。

事实证明，代码中断的原因是运行时间过长。

在 asp.net（c# 或 vb.net）中有没有办法将应用程序配置为运行更长时间而不会中断？

这是在 iis 端完成的吗？

如果是的话，有人可以指出我正确的方向吗？

我知道的一件事是 iis 元数据库将其设置为接受更大的尺寸，但我不确定如何处理下面的代码以确保应用程序在运行时间过长时不会中断。

```
using System;
using System.Collections.Generic;
using System.Text;
using EO.Pdf;
using System.Collections.Specialized;
using EO.Web;

partial class getRecs : System.Web.UI.Page
{
    private void  // ERROR: Handles clauses are not supported in C#
Page_Load(object sender, System.EventArgs e)
    {

        if (!Page.IsPostBack) {
            string linksList = Request.QueryString("pid");
            string[] AllLinks = linksList.Split(",");

            //Create a PdfDocument object
            PdfDocument doc = new PdfDocument();

            string links = null;

            foreach ( links in AllLinks) {

                HtmlToPdf.ConvertUrl(url, doc);
            }

            doc.Save(Response.OutputStream);

        }
    }

} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:00:19.213

您似乎遇到了请求超时问题，因为该过程需要很长时间才能使用生成的 PDf 响应客户端。您可以在 Web.config 中增加请求超时设置：

```
<configuration>
  <system.web>
  <httpRuntime 
    executionTimeout="1000"/>
  </system.web>
</configuration> 
```

executionTimeout 以秒为单位设置。根据您的需要进行调整。这仅适用于编译元素中的`debug`标志设置为。`false`

[链接到 MSDN](http://msdn.microsoft.com/en-us/library/e1f13641.aspx)文档。

# reporting-services - ssrs 在行组上设置列可见性

> ID：11891704
> 
> 赞同：19
> 
> 时间：2012-08-09T20:47:31.690
> 
> 标签：reporting-services, ssrs-2008

我试图隐藏一列，但它属于 RowGroups 区域。不幸的是，列可见性是灰色的并被禁用。我想在某些条件下（使用表达式）隐藏列，但保留分组。

我在 SO 上发现了一个类似的问题，但它的解决方案对我不起作用。有解决方法吗？

[行组内的 ssrs 列可见性](https://stackoverflow.com/questions/10522848/ssrs-column-visibility-inside-row-groups)

我尝试将一些列移动到 tablix 的正文区域，但是我无法垂直合并单元格。我不确定我的选择是什么。

在下图中，我试图隐藏第一列，但禁用了“列可见性”选项。 ![试图隐藏整个第一列](../Images/793808862458e9d36e6224f3f5c20aae.png).

SSRS 2008 R2

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T05:52:33.920

您是否要删除第 1 列？如果您右键单击列标题并选择**删除列**，它将提示您**删除列和关联的组**或**仅**删除列。如果您选择列，则仅应保留分组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-09T09:28:06.863

您可以选择一列，然后导航到属性栏中的 Visibility 属性。您可以在那里输入表达式，也可以选择真或假。但是在这种情况下，它只会留下一个空格而不是那个字段。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-03T22:52:38.153

我在灰色的列可见性方面遇到了同样的问题，而且我在网上找到的解决方案不起作用，所以希望这能帮助其他人。

你必须基本上欺骗它工作。我是这样做的：

1.  单击tablix，然后右键单击您感兴趣的列右侧列上的灰色列属性。
2.  选择添加组>相邻的左侧。
3.  在 group by 字段中，输入 False 因为您真的不希望它分组。
4.  现在您可以右键单击灰色列属性框并选择可见性。
5.  输入您的功能以获得可见性。
6.  现在从无法调整可见性的“损坏”列中复制并粘贴您需要的所有内容到新列中。
7.  删除旧列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-30T10:44:59.703

1.  删除列
2.  选择“仅删除列”选项
3.  添加新列（没有关联的行组）
4.  将字段分配给新列

新列将使用行组，因为粒度相等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-11T11:28:55.043

在Visual Studio中，在设计框下面，你可以找到行组和列组，列组右侧你可以找到向下箭头，如果你点击它你会找到[高级模式]打开后，右键单击第一个行组，单击组属性，选择可见性，单击隐藏

![在此处输入图像描述](../Images/80f14a9a4e59b1cca3fc0dff0ba581de.png) ![在此处输入图像描述](../Images/8bb05a32f39b9c059c227ce36a708860.png)

完成，请检查

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-12-29T12:19:41.787

在详细信息行组上添加您希望数据分组的列列表。

# php - Jquery提交表单，在成功提交表单到php时添加

> ID：11891712
> 
> 赞同：1
> 
> 时间：2012-08-09T20:48:32.480
> 
> 标签：php, javascript, ajax, jquery

在 jquery 中需要帮助：

这是代码架构：

1.  通过jquery提交表单到php
2.  php 在提交时发送另一个表单
3.  再次提交表单而不刷新页面，这将永远持续下去。

示例代码：

```
$(document).ready(function()
{
    $(".message-submit-button").click(function(){   
        var element = $(this);
        var Id = element.attr("id");
        var messageinput = $("#messageinput"+Id).val();
        var action = $("#action"+Id).val();
        var dataString = 'messageinput='+ messageinput + '&mobilenumber=' + Id + '&action=' + action;

        if(messageinput=='')
        {
            alert("Please Enter Message");
            document.getElementById('messageinput'+Id).focus();
        }
        else
        {
            $("#flash"+Id).show();
            $.ajax({
                type: "POST",
                url: "insert_message.php",
                data: dataString,
                cache: false,
                success: function(html){
                    $("#flash"+Id).hide();
                    $("#message-content"+Id).replaceWith(html); 
                }
            });

        }
        return false;
    });
}); 
```

在上面的脚本中，请注意输出的“html”只不过是具有不同 id 集的相同表单。

上面的代码适用于第一种形式，但不适用于第二种形式。请帮助继续提交表单。

注意：将表单提交到“insert_message.php”后，它会在 div 标记中返回另一个表单，该表单具有不同的 id 集，但输入和类名相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:57:28.383

如果表单相同只是id不同，只需更改id即可。如果您必须更改表单，则必须重新附加事件处理程序，或者您可以使用委托

```
$(document).on("click", ".message-submit-button", function(){ 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

如果您不在 jquery 1.7+ 上，您可以使用委托代替

```
$(document).delegate(".message-submit-button", "click", function(){ 
```

[http://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

# perl - Perl：是否可以将 DBI bind_param() 作为 selectrow_arrayref() 的一部分？

> ID：11891714
> 
> 赞同：1
> 
> 时间：2012-08-09T20:48:42.267
> 
> 标签：perl, dbi

我想在 selectrow/selectall 函数调用期间绑定参数类型。

是否可以更改以下内容：

```
$sth = $dbh->prepare($sql);
$sth->bind_param(1, undef, {pg_type => DBD::Pg::PG_BYTEA});
$sth->execute($byteavalue); 
```

到一个 selectrow 语句：

```
$dbh->selectrow_arrayref( $sql, undef, $byteavalue ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:54:42.870

的第一个参数`selectrow_*`可以是语句句柄，因此您可以使用：

```
$sth = $dbh->prepare($sql)
and $sth->bind_param(1, undef, { pg_type => DBD::Pg::PG_BYTEA })
and $dbh->selectrow_arrayref($sth, undef, $byteavalue); 
```

否则，您必须创建自己的`selectrow_arrayref`. 现有版本是：

```
sub selectrow_arrayref {
    my ($dbh, $stmt, $attr, @bind) = @_;
    my $sth = ((ref $stmt) ? $stmt : $dbh->prepare($stmt, $attr))
        or return;
    $sth->execute(@bind)
        or return;
    my $row = $sth->fetchrow_arrayref()
        and $sth->finish;
    return $row;
} 
```

# git - git：合并回我合并的内容

> ID：11891718
> 
> 赞同：3
> 
> 时间：2012-08-09T20:48:53.100
> 
> 标签：git, merge, revert

所以我将一个分支“badBranch”合并到我的开发分支中，并在合并后发现了几个提交，它是错误的。

我做了一个还原：`git revert -m 1 <commit hash of the merge>`

工作得很好。时间流逝，编写代码，在开发中提交了进一步的更改。

现在，有更多的闲暇时间，我想将 badBranch 合并回 develop （或 development ），看看我是否可以修复它。

但是 develop 认为 badBranch 在它的历史中（我认为？），所以当我检查 badBranch 并将 develop 合并到它时，我只是得到了当前的 develop 状态。

如何强制将 devleop 和 badBranch 实际合并？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:59:43.890

这非常简单 - 只需还原还原：

```
git revert <commit hash of your merge revert> 
```

Marco 的 howto 链接还提供了下一个解决方案：将 badBrahcn 重新设置`-no-ff`为重新创建所有提交（所有 SHA ID 将不同）并将其合并到主节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:56:24.063

我不知道这是否可行，但是如果您在开发中`checkout`ed badBranch 和`merge`d 然后在 badBranch 中`checkout`ed develop 和`merge`d 怎么办？

# objective-c - UITextView 调整宽度以适合文本

> ID：11891731
> 
> 赞同：3
> 
> 时间：2012-08-09T20:49:36.773
> 
> 标签：objective-c, ios, text, uitextfield

这个问题已经被问过无数次了，但反复给出的两三个答案似乎都不起作用。

问题是：包含一些任意文本的`UITextView。经过一些操作，UITextView 需要调整水平和垂直大小以紧贴文本。

其他问题的答案给出的值似乎与文本的宽度/高度大致相同；但是，当将`UITextView`调整为计算的大小时，它并不完全正确，并且文本换行符与原来的不同。

建议的方法包括 using`– sizeWithFont:constrainedToSize:`和其他 NSString 方法，`sizeThatFits:`UITextView 的方法（这给出了更正确的高度，但视图的全宽），以及`contentSize`文本视图的属性（也给出了错误的宽度）。

有没有一种准确的方法来确定 a`UITextView`的文本的宽度？或者文本视图中是否有一些隐藏的填充使文本适合的实际宽度更小？还是我完全想念的其他东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T06:10:27.380

我注意到同样的问题：`- sizeWithFont:constrainedToSize:`在 NSString 上将使用与相同宽度的 UITextView 不同的换行符。

这是我的解决方案，但我想找到更清洁的东西。

```
 UITextView *tv = [[UITextView alloc] initWithFrame:CGRectMake(0, 0, myMaxWidth, 100)]; // height resized later.
    tv.font = myFont;
    tv.text = @"."; // First find the min height if there is only one line.
    [tv sizeToFit];
    CGFloat minHeight = tv.contentSize.height;
    tv.text = myText; // Set the real text
    [tv sizeToFit];
    CGRect frame = tv.frame;
    frame.size.height = tv.contentSize.height;
    tv.frame = frame;
    CGFloat properHeight = tv.contentSize.height;
    if (properHeight > minHeight) { // > one line
        while (properHeight == tv.contentSize.height) {
            // Reduce width until height increases because more lines are needed
            frame = tv.frame;
            frame.size.width -= 1;
            tv.frame = frame;
        }
        // Add back the last point. 
        frame = tv.frame;
        frame.size.width += 1;
        tv.frame = frame;
    }
    else { // single line: ask NSString + fudge.
        // This is needed because a very short string will never break 
        // into two lines.
        CGSize tsz = [myText sizeWithFont:myFont constrainedToSize:tv.frame.size];
        frame = tv.frame;
        frame.size.width = tsz.width + 18; // YMMV
        tv.frame = frame;
    } 
```

# android - 按字母顺序对 Android strings.xml 进行排序

> ID：11891732
> 
> 赞同：12
> 
> 时间：2012-08-09T20:49:37.797
> 
> 标签：android, eclipse, adt, xml-editor

在编写我的 Android 应用程序时，我只是不停地在 strings.xml 中插入元素，没有任何*顺序*。是否有按字母顺序对字符串元素进行排序的快捷键（如`Ctrl`++可以在 XML 布局文件中组织属性`Shift`） ？`F``android:`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-23T02:58:36.053

对于遇到此问题的任何其他人。复制所有字符串元素，粘贴到 Excel 电子表格排序 AZ，然后复制并粘贴回来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T22:50:03.493

这实际上是 ADT 插件中的一个功能：

![在此处输入图像描述](../Images/60c772a6f5453023e74da6471032f50e.png)

但是，它仅对资源查看器中的元素进行排序，不会修改原始 strings.xml 文件中的任何内容。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-01-10T21:44:20.693

对于那些有权访问 GNU 或类似的 *nix 命令行工具的人，您可以执行以下操作：

```
cat <(head -n 1 strings.xml) <(head strings.xml -n -2 | tail -n +2 | sort ) <(tail -n 2 strings.xml) 
```

`strings.xml`如果您的 XML 标头较大，您可能需要稍微调整数字。

# html - MongoDb 将 HTML 实体（如“®”）转换为“®” 在 PHP 的 save() 上

> ID：11891738
> 
> 赞同：1
> 
> 时间：2012-08-09T20:50:09.113
> 
> 标签：html, mongodb, character, html-entities

在 MongoDb 2.0.6 上，在 64 位上运行，带有官方驱动程序的 PHP 5.4。MongoDb save() 的

```
&reg; 
```

存储为

```
&amp;reg; 
```

Mongo 显然把所有的 & into & amp; 从而在再次输出到浏览器时破坏 html 实体！存储“Bose®”工作正常，它存储为“Bose®”。这里发生了什么？我希望 MongoDb 停止更改我的数据。我故意存储 HTML 实体，例如

```
&reg; 
```

避免此类问题，但 MongoDb 将其变成

```
&amp;&reg; 
```

通过 PHP 在 save() 上？这是错误还是“功能”？

目前，我必须在 save() 到 MongoDb 之前对我的所有字符串/数据执行 html_entity_decode() ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T22:50:19.323

MongoDB**不会**以这种方式处理数据。您的应用程序中还有其他东西正在处理数据。

这是一个简单的测试程序：

```
<?php

$conn = new Mongo();
$db = $conn->test;
$collection = $db->tb;

$collection->drop();
$collection->save( array( 'name' => ">>&reg;<<" ) ) ; 
$cursor = $collection->find();

foreach ($cursor as $doc) 
    print(" {$doc['name']} \n");

?> 
```

运行时，它会产生以下输出：

```
 >>&reg;<< 
```

显然，您的工具链中的其他东西正在执行 HTML 编码。

# java - 如何禁用积压（无等待连接）？

> ID：11891741
> 
> 赞同：2
> 
> 时间：2012-08-09T20:50:17.877
> 
> 标签：java, android, sockets, serversocket

我有一个服务器，它应该打开`ServerSocket`与每个客户端的连接。问题是，我需要客户端检查 ConnectionPort 是否已在使用中。这意味着客户端应该检查端口 12345 并得到一个结果，如果有`ServerSocket`“等待”或没有，如果没有，他们会采取下一个等。

所以最终有两三个客户端连接到服务器上的端口 12345、12346、12347...

我写了这个：

```
serverSocket = new ServerSocket(incomingPort, 1); // backlog 1 = Minimum
incomingSocket = serverSocket.accept();
readerIn = new BufferedReader(new InputStreamReader(incomingSocket.getInputStream()));

outgoingSocket = new Socket(incomingSocket.getInetAddress().getHostAddress(), outgoingPort);
dataOutputStream = new BufferedOutputStream(outgoingSocket.getOutputStream());
pwOut = new OutputStreamWriter(outgoingSocket.getOutputStream()); 
```

我连接了第一个客户端并打开（在最后三行中）另一个“返回”到客户端的连接。在客户端，我写的几乎一样，反之亦然：

```
outgoingSocket = new Socket(serverIP, inPort1);
dataOutputStream = new BufferedOutputStream(outgoingSocket.getOutputStream());
pwOut = new OutputStreamWriter(outgoingSocket.getOutputStream());

serverSocket = new ServerSocket(outPort1);
incomingSocket = serverSocket.accept();
readerIn = new BufferedReader(new InputStreamReader(incomingSocket.getInputStream())); 
```

下一个尝试打开连接的客户端也在做同样的事情，从同一个端口开始。我希望得到一个`Exception`像一个`ConnectException`或这样的，但没有。我想这与*积压*的“缓冲区”有关。它继续一切并等待成为a `ServerSocket`，但它会永远等待。服务器本身已经被第一个连接占用。

我读了很多帖子，但他们都说这`outgoingSocket.isConnected()`是给予`true`和`.isClosed()`给予`false`，至少在超时之前是这样。有没有办法确定服务器已经被占用？或者至少要“禁用”积压，以便拒绝所有传入连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T21:03:08.813

回答您的直接问题 - 不，您不能禁用侦听 TCP 套接字积压队列，即使它设置为`1`- 那是***挂起***的数量，即尚未`accept()`被应用程序连接请求的数量。一旦您接受了第一个客户端连接，您可以在那里做的是`close()`服务器套接字。

然后才是真正的东西——你为什么认为你需要两个这样的插座？单个 TCP 连接是**全双工的**，即您可以双向通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T21:04:52.237

我不确定您是否了解客户端-服务器通信和套接字接口的概念。您不需要创建新的套接字来从服务器到客户端进行通信，TCP 连接是双向的，您可以写入您读取的同一个套接字。

[客户端-服务器的好例子](http://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html)请参考官方文档，或者按照完整的[TUTORIAL](http://docs.oracle.com/javase/tutorial/networking/sockets/index.html)进行。

如果你仍然想继续你的方法，服务器只接受一个连接，你需要`serverSocket`在接受连接后关闭服务器。`incomingSocket`使用您的班级仍然可以进行交流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T22:22:47.557

> 我有一个服务器，它应该为每个客户端打开一个 SocketServer 连接。

不，你没有。没有“SocketServer Connection”之类的东西，TCP 服务器创建一个`ServerSocket`并*接受*来自客户端的连接。打开连接的是客户端。

> 问题是，我需要客户端检查 ConnectionPort 是否已经在使用中。

不，你没有。所有客户端都连接到相同的端口号。客户无需检查任何内容。

> 这意味着客户端应该检查：端口 12345 并得到一个结果，如果有一个 ServerSocket “等待”或没有。如果不是，他们会采取下一个等

不，它没有。客户端只是连接到监听端口。时期。你完全误解了整个过程。

我建议您阅读并查看一些代码示例，然后重新开始。

# java - 为什么小程序中允许使用非静态方法？

> ID：11891744
> 
> 赞同：1
> 
> 时间：2012-08-09T20:50:35.337
> 
> 标签：java, static-methods, appletviewer

我注意到向包含 java 应用程序中的 main 方法的类添加一个非静态方法，然后从 main 方法中调用它，会导致编译错误。这我可以理解，因为这个类永远不会被实例化。

但是，将非静态方法添加到 Applet 类并从内部调用它，例如，paint 方法可以正常工作。为什么是这样？applet-class 是由 appletviewer 以某种方式实例化的，还是有另一种解释来解释为什么前者不允许而后者是？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:52:44.243

> applet-class 是否由 appletviewer 以某种方式实例化

绝对地。请参阅[Applet 教程](http://docs.oracle.com/javase/tutorial/deployment/applet/index.html)[的“Applet 的生命周期”](http://docs.oracle.com/javase/tutorial/deployment/applet/lifeCycle.html)部分。尤其：

> 作为加载小程序的结果，您应该看到文本“正在初始化...开始...”。加载小程序时，会发生以下情况：
> 
> *   创建了applet 控制类（Applet 子类）的一个实例。
> *   小程序自行初始化。
> *   小程序开始运行。

# c# - 使用带有附件的 ASP.NET MVC3 发送电子邮件

> ID：11891746
> 
> 赞同：1
> 
> 时间：2012-08-09T20:50:57.380
> 
> 标签：c#, asp.net-mvc-3, itextsharp

我到处搜索，但没有找到任何解决方案。问题是：我正在尝试从 ASP.NET MVC3 应用程序发送带有附件的电子邮件。问题是：附件是（或应该是）使用 iTextSharp 创建的 pdf 文件。我在控制器中已经有一个返回 ActionResult 的方法，并且这个方法会产生一个 pdf 响应。问题是：如何从这个 ActionResult 中获取文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:24:51.773

将生成 PDF fike 流的代码移动到可以在许多地方重复**使用**并在创建附件时使用的方法

```
public Byte[] GetGeneratedPDF(string someParameter)
{
   //Do your magic to create the PDF and return the byte array

} 
```

现在您可以调用此方法来创建附件

```
MailMessage msg = new MailMessage();
MemoryStream stream = new MemoryStream(GetGeneratedPDF("hi"));
Attachment att1= new Attachment(stream, "stack123.pdf");
msg.Attachments.Add(att1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:59:51.763

只需采用您在“PDF 生成操作方法”中使用的相同逻辑，并将`Stream`（或任何 iTextSharp 返回的）作为附件添加到您的邮件中：

```
message.Attachments.Add(new Attachment(stream, "name", "mimeType")); 
```

# android - Activity.onDestroy 幕后 破坏的真正含义是什么？

> ID：11891749
> 
> 赞同：2
> 
> 时间：2012-08-09T20:51:08.827
> 
> 标签：android, android-activity

我很熟悉，按下后退键会导致**活动**被“破坏”，或者当开发人员调用函数**finish()**，或者当系统需要内存等时......

并且还熟悉我们需要在 onDestroy 中执行清理过程，如**unBindDrawables**（参见[示例](http://www.alonsoruibal.com/bitmap-size-exceeds-vm-budget/)）以避免 OutOfMemory 异常。

我的问题是：

> 活动的破坏是否意味着对**活动对象**的引用被删除？即活动对象可用于GC？如果是这样，为什么我们需要明确删除对活动相关视图的引用？

考虑示例：

如果对象**A**具有对对象**B**的引用，而**B**仅由**A**引用，那么如果我们取消**A**的引用，则无需将**B**的引用显式设置为 null，两者都将被 GC-ed...

我的直觉告诉我，活动的情况是这样的……请告诉我我的错误在哪里。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:53:44.847

> 活动的破坏是否意味着对活动对象的引用被删除？即活动对象可用于GC？

是的，只要 Android 放弃该活动。如果您从静态上下文中（直接或间接）引用它，它将不会被垃圾收集。

> 如果是这样，为什么我们需要明确删除对活动相关视图的引用？

您不需要“显式删除对活动关联视图的引用”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:10:39.087

当您按下后退按钮时，您的应用程序不会被破坏而是暂停并且 SO 调用 onPause() 方法。如果 SO 检测到例如内存不足的情况，它可以被销毁，然后它会销毁并调用 onDestroy 方法。在这种方法中，您必须清理线程（如果您启动了它们）或所有不必要的东西并导致资源消耗。如果你熟悉 Servlet，android 中的 onDestroy 方法非常相似。希望这对你有帮助

# ruby-on-rails - ActiveRecord 中的有序一对多关系

> ID：11891751
> 
> 赞同：0
> 
> 时间：2012-08-09T20:51:15.300
> 
> 标签：ruby-on-rails, rest, activerecord

我第一次使用 ActiveRecord 设计 API。我有一个子对象的父`has_many`对象。子对象`belongs_to`与父对象`:counter_cache => true`。

*目前，API 返回一个 JSON 结构，其中包含父级及其所有*子级的数组，按时间排序。我想将 API 更改为默认情况下不返回所有子对象。理想情况下，API 应该足够灵活，能够返回例如孩子 #1、#4 和 #6-22，并且 JSON 响应将指示这些位置。

我的第一个直觉是为数据库中包含整数索引的每个子对象添加一列。我可以在创建时将这个整数分配给当时`counter_cache`父级的值。这样，第一个孩子将是#0，下一个是#1，依此类推。

这是最好的方法吗？

这是我的模型（模型名称已更改）：

```
class Parent < ActiveRecord::Base
    has_many :children, :dependent => :destroy
end

class Child < ActiveRecord::Base
    belongs_to :parent, :counter_cache => true
end 
```

假设我想向 Child 添加一个名为“ordinal”的整数列，迁移如下：

```
class AddOrdinalToChild < ActiveRecord::Migration
  def self.up
    add_column :children, :ordinal, :integer, :default => 0
  end

  def self.down
    remove_column :children, :ordinal
  end
end 
```

我将如何进行填充`ordinal`，以便对于属于父母的每个孩子，序数记录该孩子被创建/分配给该父母的顺序？

# mysql - 如何修复？：mysql> 显示变量，如“plugin_dir”；不显示 plugin_dir 位置

> ID：11891752
> 
> 赞同：2
> 
> 时间：2012-08-09T20:51:16.360
> 
> 标签：mysql, memcached, redhat, libmemcache, libmemcached

在这篇[文章](https://stackoverflow.com/questions/11891384/sudo-make-returns-error-memcache-setup)之后，我继续尝试按照以下说明设置 MySQL memcached 用户定义函数：http: [//stanley-huang.blogspot.com/2010/04/level-3-install-memcached-user-defined.html](http://stanley-huang.blogspot.com/2010/04/level-3-install-memcached-user-defined.html)

但是现在当我试图找到 plugin_dir 位置时，我得到：

```
mysql> show variables like 'plugin_dir';
+---------------+-------+
| Variable_name | Value |
+---------------+-------+
| plugin_dir    |       | 
+---------------+-------+
1 row in set (0.00 sec) 
```

它是空白的。我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:55:33.347

检查你的 my.cnf

```
[mysqld]
plugin_dir=/path/to/plugin/directory 
```

# python - 在python中查找对对象的所有引用

> ID：11891755
> 
> 赞同：36
> 
> 时间：2012-08-09T20:51:33.590
> 
> 标签：python, django, memory-leaks, garbage-collection

**什么是在python中查找对对象的所有引用的好方法？**

我问的原因是看起来我们有“内存泄漏”。我们正在从 Web 浏览器将图像文件上传到服务器。每次我们这样做时，服务器上的内存使用量与刚刚上传的文件的大小成正比。这个内存永远不会被python垃圾收集释放，所以我认为可能有指向图像数据的杂散引用没有被删除或超出范围，即使在每个请求结束时也是如此。

我认为能够问 python 会很好：“哪些引用仍然指向这个内存？” 这样我就可以弄清楚是什么阻止了垃圾收集器释放它。

目前我们在 Heroku 服务器上运行 Python 和 Django。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2015-10-28T18:12:01.337

Python 的`gc`模块有几个有用的功能，但听起来像是[`gc.get_referrers()`](https://docs.python.org/2/library/gc.html#gc.get_referrers)您正在寻找的。这是一个例子：

```
import gc

def foo():
    a = [2, 4, 6]
    b = [1, 4, 7]

    l = [a, b]
    d = dict(a=a)
    return l, d

l, d = foo()
r1 = gc.get_referrers(l[0])
r2 = gc.get_referrers(l[1])

print r1
print r2 
```

当我运行它时，我看到以下输出：

```
[[[2, 4, 6], [1, 4, 7]], {'a': [2, 4, 6]}]
[[[2, 4, 6], [1, 4, 7]]] 
```

可以看到第一行是`l`and `d`，第二行是 just `l`。

在我的简短实验中，我发现结果并不总是那么干净。例如，Interned 字符串和元组的引用者比您预期的要多。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T21:02:28.850

Python 的标准库具有`gc`包含垃圾收集器 API 的模块。您可能想要的功能之一是

```
gc.get_objects() 
```

此函数返回垃圾收集器当前跟踪的所有对象的列表。下一步是对其进行分析。

如果您知道要跟踪的对象，则可以使用`sys`模块的`getrefcount`功能：

```
>>> x = object()
>>> sys.getrefcount(x)
2
>>> y = x
>>> sys.getrefcount(x)
3 
```

# iis - 将主机名分配给 Intranet IIS 网站

> ID：11891757
> 
> 赞同：0
> 
> 时间：2012-08-09T20:51:41.463
> 
> 标签：iis, networking, lan, intranet

我正在尝试使用 IIS 创建一个可以从我公司的 Intranet (LAN) 访问的网站。该网站将显示各种信息。

目前，要连接到网页，我必须`192.168.1.24`在同一 LAN 上的任何计算机中输入（运行 IIS 的服务器的地址）。我希望让员工输入`http://CorporationName.com`甚至`CorporationName`被带到网站上。

我相信我的问题的解决方案可能在于编辑主机文件以重定向`CorporationName`到`192.168.1.24`. 这种变化会发生在服务器上，还是发生在每台试图访问它的客户端机器上？后者似乎并不可行/不方便。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:53:11.790

您需要找人（可能是 IT 部门）为该机器分配一个永久 IP 地址和内部 DNS 服务器中的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:00:42.297

解决方案取决于您的设置。虽然您是正确的，但编辑 HOST 文件以将“公司名称”指向 192.168.XXX.XXX 将起作用，但您必须在每台客户端 PC 中进行设置。

如果您在域控制器负责 DNS 的典型域设置中，那么您应该使用管理控制台和 DNS 管理单元在域控制器上的 DNS 中创建适当的条目。DNS 和设置的一个很好的解释位于：[http](http://technet.microsoft.com/en-us/library/cc738619%28v=ws.10%29.aspx) ://technet.microsoft.com/en-us/library/cc738619%28v=ws.10%29.aspx 。

# mysql - 使用 OR 运算符连接两个表

> ID：11891763
> 
> 赞同：0
> 
> 时间：2012-08-09T20:52:31.120
> 
> 标签：mysql, sql, visual-studio

我如何编写一个使用 Or 运算符连接两个表的查询例如：

```
select upc,ean,productName
from maintable m1 left join maintable2 m2
on m2.upc = m1.upc OR m2.ean = m1.ean 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:58:41.690

好吧，您可以尝试使用 UNION。

```
select upc,ean,productName
from maintable m1 left join maintable2 m2
on m2.upc = m1.upc
union
select upc,ean,productName
from maintable m11 left join maintable m22
on m22.ean = m11.ean 
```

这对你有用吗？默认情况下，UNION 运算符只会返回不同的行，因此不必担心返回重复。

# php - 如何上传重新格式化的图像？

> ID：11891766
> 
> 赞同：1
> 
> 时间：2012-08-09T20:52:49.203
> 
> 标签：php, image-processing, gd, image-resizing

我知道这非常接近完成。我的目标是将用户上传的图像重新调整 0.5 倍。我已经实现了返回上传图像的宽度和高度，并将这些值减半。下面的代码：

```
//get image attributes
    $target = "Images/";
    $target = $target . basename($_FILES['myFile']['name']);

    $thumbnailsize = 0.5;

    //Get uploaded image width and height.
    list($width, $height) = getimagesize($target);

    //Half the current image in size.
    $newWidth = $width * $thumbnailsize;
    $newheight = $height * $thumbnailsize;

    $new_target = imagecreatefromjpeg($target);
    $image = imagecreate($newWidth, $newheight);

    imagecopyresized($image, $new_target, 0, 0, 0, 0, $newWidth, $newheight, $width, $height);

    $pic = $_FILES['myFile']['name'];
    move_uploaded_file($_FILES['myFile']['tmp_name'], $target); 
```

我想我现在的变量使用和 UPDATE SQL 语句出错了，见下文：

```
$tUser_SQLselect = "UPDATE User SET imageLocation='" . $pic . "' ";
$tUser_SQLselect .= "WHERE ID = '" . $userID . "' "; 
```

任何建议将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:55:34.767

你没有`imagejpeg()`在任何地方打电话，所以你调整大小的文件不会保存在任何地方。除非您打算将原始文件与调整大小的文件一起保存，否则您不能在副本上使用 move_uploaded_files() - m_u_l() 专门用于对上传的文件应用某些安全检查，因此上传完成后不会发生篡改但在文件移动之前 - 您调整大小的图像会触发安全检查。

您还可以通过该变量对[SQL 注入攻击](http://bobby-tables.com)持开放态度 - $_FILES 数组中的参数是用户提供的数据，可用于破坏您的服务器。`$pic``['name']`

# objective-c - 使用 xcode 中 LAPACK 的 SVD 从 Objective-C 中的 A = USVt 计算 V

> ID：11891769
> 
> 赞同：1
> 
> 时间：2012-08-09T20:53:03.677
> 
> 标签：objective-c, xcode4, coordinates, lapack, svd

我的目标是将透视坐标从已知矩形（例如 800 x 600 屏幕）转移到倾斜/旋转的四边形。为此，我发现了这一点，这非常有帮助：[将捕获的坐标转换为屏幕坐标](https://stackoverflow.com/questions/1689839/transforming-captured-co-ordinates-into-screen-co-ordinates/1689899#1689899)

我想这个问题还有更多的解决方案。1 通过从你的四边形中制作三角形并应用一些我还无法解决的数学函数。或使用公式 A=USVt 得出的 H 矩阵。这看起来不错，因为一旦您拥有正确的 H 矩阵，您就可以很容易地传输任何坐标，如上面链接中所述。所以我想我会去那个！

经过一番挣扎，我能够在matlab中做到这一点（我测试了上面的链接）并且它有效:)但是现在在objective-C中？！

我写了下面的代码，它以 (A=USVt) 的 A 开头。要计算 Vt，这是我进入 H 矩阵的第一步，我应该使用与 matlab [USV]=SVD(A) 类似的函数；功能。所以我在这里找到：[调用 MATLAB 的内置 LAPACK/BLAS 例程](https://stackoverflow.com/questions/6438551/calling-matlabs-built-in-lapack-blas-routines)来执行此操作，您可以包含加速.h 框架，然后能够使用 C-LAPACK 等效 dgesvd_(...);

顺便说一句，我使用与[将捕获的坐标转换为屏幕坐标中相同的](https://stackoverflow.com/questions/1689839/transforming-captured-co-ordinates-into-screen-co-ordinates/1689899#1689899)坐标，以使其更易于测试。

**解决** 了我遇到的问题是计算多维数组 A 并将其转换为一维数组的方式。因为 Lapacks 的输入似乎总是一维的：）

我还包括了数组 A 的计算方式。WP = 网络摄像头和 SC = 800*600 屏幕。

```
 float   WP[4][3];
WP[0][0] = 98;
WP[0][1] = 86;
WP[0][2] = 1;
WP[1][0] = 119;
WP[1][1] = 416;
WP[1][2] = 1;
WP[2][0] = 583;
WP[2][1] = 80;
WP[2][2] = 1;
WP[3][0] = 569;
WP[3][1] = 409;
WP[3][2] = 1;

float   SC[4][3];
SC[0][0] = 0;
SC[0][1] = 0;
SC[0][2] = 1;
SC[1][0] = 799;
SC[1][1] = 0;
SC[1][2] = 1;
SC[2][0] = 0;
SC[2][1] = 599;
SC[2][2] = 1;
SC[3][0] = 799;
SC[3][1] = 599;
SC[3][2] = 1;

float A[9][8];
int i=0;
int j=0;
float X[3], x, y;
for (i=0; i<4; i++) {
    X[0] = WP[i][0];
    X[1] = WP[i][1];
    X[2] = WP[i][2];
    x = SC[i][0]; y = SC[i][1];

    A[0][j] = 0;    A[1][j] = 0;         A[2][j] = 0;         A[3][j] = -X[0];  A[4][j] = -X[1];
    A[5][j] = -1;   A[6][j] = y*X[0];    A[7][j] = y*X[1];    A[8][j] = y;
    j++;
    A[0][j] = X[0]; A[1][j] = X[1];      A[2][j] = 1;         A[3][j] = 0;      A[4][j] = 0;
    A[5][j] = 0;    A[6][j] = (-x)*X[0]; A[7][j] = (-x)*X[1]; A[8][j] = (-x);
    j++;
}

int m = 8;
int n = 9;
int p = (m < n ? m : n);

double B[m*n];

//Recalculate multidimentional A to one-dimentional array B for LAPACK
int k = 0;
for (i=0; i<n; i++) {
    for (j=0; j<m; j++) {
        B[k]=A[i][j];
        // NSLog(@"%f", A[i][j]);
        k++;
    }
}

double U[m*m];
double VT[n*n];
double S[p * 1];

int info=0;
double work[5*m];
int lwork = 5*m;
//do the actual computation
dgesvd_("N","A", &m, &n, B, &m, S, U, &m, VT, &n, work, &lwork, &info);

for (int i=0; i<(n*n); i++) {
    NSLog(@"%f", VT[i]);
}

// NEXT STEP IN MATLAB, have to still translate this to C-language
// H = transpose(reshape(V(:,end),[3 3]));
// H = H/H(3,3); 
```

然后在 matlab 中我们取 Vt 的最后一列并将其重塑为 3x3 矩阵。并将其转置，使其变为 H。

```
0.0001
0.0099
-0.8647
0.0054
-0.0003
-0.5021
-0.0000
-0.0000
 0.0045
Vt_reshaped = reshape(V(:,end),[3 3]);
H = transpose(Vt_reshaped) 
```

**解决了！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:57:36.453

我解决了！我遇到的问题是计算多维数组 A 并将其转换为一维数组的方式。因为 Lapacks 的输入似乎总是一维的：）

我用工作代码编辑了我的问题。

玩得开心在 Objective-c 中的工作代码！我在我的第一个带有 ARC 的 MAC 的 Xcode 4.4 项目中使用了它！

# html - 如何制作：在 chrome 和 IE 中工作后？

> ID：11891778
> 
> 赞同：1
> 
> 时间：2012-08-09T20:53:36.690
> 
> 标签：html, css

我有这个代码只适用于 Firefox 而不是所有浏览器，虽然`:after`也适用于其他浏览器。

HTML：

```
<select>
    <option> select </option>
    <option class="red"> one </option>
    <option class="green"> two </option>
    <option class="blue"> three </option>
</select>​ 
```

CSS：

```
option:after {
    content: " ";
    height: 5px;
    width: 5px;
    border-radius: 5px;
    display: inline-block;
}

option.red:after { background: #c00; }
option.green:after { background: #0c0; }
option.blue:after { background: #00c; } 
```

JS 小提琴：http: [//jsfiddle.net/abud/EAdvP/](http://jsfiddle.net/abude/EAdvP/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:56:16.877

抱歉，但大多数浏览器并没有为您提供样式`select`和`option`元素的许多 CSS 可能性。Firefox 在这件事上相当宽容——其他人则不然。

我必须告诉你，以目前的形式，你的代码不能跨浏览器工作。您仍然可以选择（通过使用 Javascript）`select`用一些可样式化的元素替换该元素，并使它们像一个下拉框。有许多图书馆可以做到这一点。

# jquery - jQuery $.ajax 在 $.post 不工作时工作

> ID：11891779
> 
> 赞同：2
> 
> 时间：2012-08-09T20:53:40.887
> 
> 标签：jquery, json, post

我只是想做一个简单的 $.post 调用。

```
<body>
<div id="main">
    <div id="diver">
    </div>
    <form id="entry_field_container" action="" method="post" accept-charset="utf-8">
        <input type="text" name="entry_field" value="" id="entry_field">

        <input id="send" type="submit" value="send">
    </form>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        $('#send').click(function(e){
            e.preventDefault();
            var txt = $('#entry_field').val();
            $.post(
                'http://localhost/proc.php',
                {
                    name:'me',
                    text:txt
                },
                function(data){
                    console.log(data);
                    $('#diver').html(data)
                },
                'json'
            )

        })
    });
</script> 
```

在 proc.php 内部：

```
<?php
    $name = $_POST['name'];
    $text = $_POST['text'];
    echo "{\"" . $name . "\", \"" . $text . "\"}";
?> 
```

出于某种原因，POST 返回 200，但控制台永远不会返回`data`，它只是空白。

我最难理解的是为什么这个 $.ajax 函数每次都有效。它不只是同一件事的一个更详细的例子吗？

```
$.ajax({
    'type':    'POST',
    'url':     'http://localhost/proc.php',
    'async':   true,
    'cache':   false,
    'global':  false,
    'data':    {
       'name':'me',
        'text':txt
    },
    'error': function(xhr,status,err){
        alert("DEBUG: status"+status+" \nError:"+err);
    },  
    'success': function(data){
        console.log(data);
    }   
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:55:45.140

在你`$.post`告诉jQuery返回的文本是JSON，但`$.ajax`你不是。

失败是因为从 PHP 返回的`$.post`文本不是有效的 JSON。

```
{"me", "test"} 
```

这不是有效的 JSON。 `{}`是一个对象，所以它需要键：

```
{"name": "me", "text": "test"} 
```

或者，也许您想要一个数组 ( `[]`)：

```
["me", "test"] 
```

PS 在 PHP 中创建 JSON 时，*强烈*建议您使用`json_encode`而不是自己制作 JSON。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T20:55:58.530

您在 $.post 调用中指定了“json”格式，但在 $.ajax 调用中没有指定，可能是您没有返回有效的 JSON 响应，这就是您的 $.post 没有执行成功的原因方法？

# c# - C# 中路径、多边形、面积和线的可继承 Java 类等价物

> ID：11891782
> 
> 赞同：1
> 
> 时间：2012-08-09T20:54:06.530
> 
> 标签：c#, java, geometry

我正在尝试将一些代码从 Java 转换为 C#，并且正在实现的 Java 类继承自这些类：

```
java.awt.geom.Area
java.awt.Polygon
java.awt.geom.Path2D.Double
java.awt.geom.Line2D.Double 
```

我一直在研究它，在 ;System.Drawing.Drawing2d; 中似乎有几个等效的 C# 类。命名空间，但它们都被标记为不可继承。有谁知道 C# 中是否有与这些等效的可继承类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:46:12.900

这些类是否绝对*需要*从这些类型继承？如果重构事物非常困难，以便您的类与几何类型具有**has-a**关系而不是**is-a ，我会感到惊讶。**即：您可以将几何类型作为对象的字段，并根据需要传递字段而不是对象本身吗？

# c# - 在 Unity 中合并 .wav 文件

> ID：11891784
> 
> 赞同：1
> 
> 时间：2012-08-09T20:54:28.077
> 
> 标签：c#, unity3d, filestream

我试图从这篇文章中获取代码以在 Unity 中工作：[使用 C# 2005 连接 Wave 文件](http://www.codeproject.com/Articles/15187/Concatenating-Wave-Files-Using-C-2005)。经过一番修改，我运行了脚本，但 Unity 输出了一个无法识别的文件。它的末尾有 .wav，但进口商说它是未知的，而不是 Native(Wav)。为了让 Unity 将文件输出为可识别的 .wav，我还需要做些什么吗？

# ios - 从滚动视图的 delaysContentTouches 中排除自定义滑块

> ID：11891785
> 
> 赞同：2
> 
> 时间：2012-08-09T20:54:28.093
> 
> 标签：ios, uiscrollview, touch, slideshow, hittest

情况 1：我创建了一个水平 UIScrollView 并添加了较小的水平 UIScrollView 作为子视图。它工作正常 - 我可以毫不拖延地滚动两者。

情况 2：我创建了一个水平 UIScrollView 并添加了我的自定义 UIControl，其工作方式类似于“滑动解锁滑块”。您可以水平滑动它。但是，当我触摸滑块并立即移动手指时，触摸会传递给 ScrollView。当我触摸滑块时，按住它一会儿然后移动它 - 触摸被传递给 ScrollView。

请注意，我不想设置：

```
scrollView.delaysContentTouches = NO 
```

我想要 scrollView 到 delaysContentTouches 但不包括我的滑块。

我试图在我的滑块类中覆盖 hitTest:withEvent:。它返回“自我”，但没有效果。触摸仍然随着延迟而传递。

# regex - Powershell 正则表达式匹配域\用户名

> ID：11891787
> 
> 赞同：1
> 
> 时间：2012-08-09T20:54:37.313
> 
> 标签：regex, parsing, tomcat, powershell, powershell-2.0

我正在尝试创建一个正则表达式来匹配在 tomcat 服务器上发出请求的所有用户名。日志中的行示例：

192.10.123.45 - 域/用户名 [30/Jul/2012:07:29:13 -0400] "GET /APP/ HTTP/1.1" 200 53167

问题是用户名有几种不同的格式：

1.  用户名
2.  域\用户名
3.  域/用户名

目前的尝试：

```
if(($line -match “GET”) -AND ($line -match "(\s-\s\w{1,})")) {
            $temp = $matches[0]
            if(($line -match “GET”) -AND ($line -match "(\s-\s\w{1,}\S)?=[\\\/](w{1,}\b)")) {
                $temp1 = $matches[0]
                Write-host $temp
            } 
```

我在用户名之前使用空格作为起点，这似乎工作正常。我总是检查该行中是否包含“GET”，因为它是我们目前唯一关心的 PHP 调用。我有 2 个匹配项，因为第一个匹配项总是只匹配一个单词，如果第二个匹配项匹配，我将使用 $temp 修剪 $temp1，因为我们不关心域。我真正遇到的麻烦是如何用正则表达式说“反斜杠或正斜杠”。

另外，我不确定我的正则表达式是否处理用户名将有数字或域将有破折号的情况。我假设这是由 \w 拾取的，但我在开发中找不到任何我正在测试的案例。

对于我对正则表达式缺乏了解，我提前道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:43:49.483

如果我理解您的问题，您希望能够从字符串中提取域\用户名。以下几行将从您在示例中显示的内容中提取用户名：

```
$line = $line.split("-")[1]
$line = $line.split("[")[0]
$line = $line.trim() 
```

这将`$line`留下`domain/username`

现在，用于提取用户名。

```
if ($line.Contains("/")) {
    $Line = $Line.split("/")[1]
} #End if($line.Contains("/")) {
if ($line.contains("\")) {
    $Line = $line.split("\")[1]
} #End if ($line.contains("\")) { 
```

最终结果将`$line`包含用户名这可以全部包含在对 GET 的搜索中

```
if (($line -match “GET”) {
    $Line = $Line.Replace(" - "," < ") 
    #If there is a - in the username, this replaces it so the split doesn't break up the username.  Change the < to suit whatever works best
    $line = $line.split("<")[1]
    $line = $line.split("[")[0]
    $line = $line.trim()
    if ($line.Contains("/")) {
        $Line = $Line.split("/")[1]
    } #End if($line.Contains("/")) {
    if ($line.contains("\")) {
        $Line = $line.split("\")[1]
    } #End if ($line.contains("\")) {
}#End if (($line -match “GET”) { 
```

我用你放在那里的线进行了测试，结果是`$line`equaling `username`。

在我回答了这个问题之后，我想你可能想要一个用于其他用途的正则表达式。所以我也写了如何用正则表达式来做到这一点：

```
if([regex]::Match($Line,".*GET.*").Success) {
        $line = [regex]::Split($Line,".*\s[-]{1}\s")
        $Line = [regex]::Split($Line,"\s[\[].*")
    if ([regex]::Match($Line,"[\\]{1}|[//]{1}").Success) {
    $Line = [regex]::Split($Line,".*[//]|.*[\\]")
    } #End if ([regex]::Match($Line,"[\]{1}|[//]{1}").Success) {
} #End if([regex]::Match($Line,".*GET.*").Success) { 
```

同样，我对此进行了测试，它可以在我的环境中提取用户名。`-`这些都不关心域或用户名中是否有数字。

# c# - 快速迭代多维字符串数组

> ID：11891788
> 
> 赞同：2
> 
> 时间：2012-08-09T20:54:40.687
> 
> 标签：c#, unsafe

我正在尝试找出迭代多维 C# 数组的最快方法。我已经剥离了所有域代码以专注于该问题。目前，这在 1.86 秒内执行，在这段时间内执行了大约 25,000,000 次迭代，处理了 5000 个数组元素。我为自己设定了在 2 天内尽可能降低 1.86 秒的目标 :-)

在现实世界中，要处理的数据更像是 50,000²。

我曾尝试使用 PLINQ，但似乎线程开销实际上使它变慢（在 3.48 秒时出现）。

我在想不安全的 C# 可能是要走的路，但是，在我走这条路之前，我会很感激关于如何提高性能的任何想法？我以前没有做过不安全的 C#，所以我不确定这是否会提高性能？！

```
Console.WriteLine("started");
        var sw = System.Diagnostics.Stopwatch.StartNew();
        long iterations = 0;
        string[] data = new string[5000];
        string[] data2 = new string[5000];
        string[] data3 = new string[5000];

        int ubound = data.GetUpperBound(0);
        for (int i = 0; i <= ubound; i++)
        {
            string d1 = data[i];
            string d2 = data2[i];
            string d3 = data3[i];

            for (int j = 0; j < ubound; j++)
            {
                string e1 = data[j];
                string e2 = data2[j];
                string e3 = data3[j];
                Interlocked.Increment(ref iterations);
            }

            Interlocked.Increment(ref iterations);
        }
        Console.WriteLine("Finished {0} iterations in {1} seconds", iterations, sw.Elapsed.TotalSeconds); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:18:41.440

不要使用多维数组，而是使用平面数组并使用数学来解决它：

```
Console.WriteLine("started");
var sw = System.Diagnostics.Stopwatch.StartNew();
long iterations = 0;

var width=5000;
var height=3;
string[] data = new string[width*height];
for (int i = 0; i < width; i++)
{
    string d1 = data[i];
    string d2 = data[width+i];
    string d3 = data[width*2+i];

    for (int j = 0; j < width; j++)
    {
        string e1 = data[j];
        string e2 = data[width+j];
        string e3 = data[width*2+j];
        Interlocked.Increment(ref iterations);
    }
    //});

    Interlocked.Increment(ref iterations);
}
Console.WriteLine("Finished {0} iterations in {1} seconds", iterations, sw.Elapsed.TotalSeconds); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:47:53.477

Interlocked.Increment() 调用是否必须代表实际问题？从您编写的代码来看，这些调用可能占用了最大的时间。由于没有对局部变量迭代的多线程访问，因此可以取消调用。

# android - Android，将路径保存到数据库

> ID：11891796
> 
> 赞同：0
> 
> 时间：2012-08-09T20:55:28.370
> 
> 标签：android

我有`private Path mPath = new Path();`

我想将 path( `mPath`) 保存到数据库以供将来读取和重绘。

有没有办法将路径分离到 x,y 然后收集到路径，或任何其他方法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T10:10:32.127

制作可序列化的自定义路径类并将其保存到数据库

```
public class CustomPath extends Path implements Serializable {

    private static final long serialVersionUID = -5974912367682897467L;

    private ArrayList <PathAction> actions = new ArrayList <CustomPath.PathAction> ();

    private void readObject(ObjectInputStream in ) throws IOException, ClassNotFoundException { in .defaultReadObject();
        drawThisPath();
    }

    @Override
    public void moveTo(float x, float y) {
        actions.add(new ActionMove(x, y));
        super.moveTo(x, y);
    }

    @Override
    public void lineTo(float x, float y) {
        actions.add(new ActionLine(x, y));
        super.lineTo(x, y);
    }

    private void drawThisPath() {
        for (PathAction p: actions) {
            if (p.getType().equals(PathActionType.MOVE_TO)) {
                super.moveTo(p.getX(), p.getY());
            } else if (p.getType().equals(PathActionType.LINE_TO)) {
                super.lineTo(p.getX(), p.getY());
            }
        }
    }

    public interface PathAction {
        public enum PathActionType {
            LINE_TO, MOVE_TO
        };
        public PathActionType getType();
        public float getX();
        public float getY();
    }

    public class ActionMove implements PathAction, Serializable {
        private static final long serialVersionUID = -7198142191254133295L;

        private float x, y;

        public ActionMove(float x, float y) {
            this.x = x;
            this.y = y;
        }

        @Override
        public PathActionType getType() {
            return PathActionType.MOVE_TO;
        }

        @Override
        public float getX() {
            return x;
        }

        @Override
        public float getY() {
            return y;
        }

    }

    public class ActionLine implements PathAction, Serializable {
        private static final long serialVersionUID = 8307137961494172589L;

        private float x, y;

        public ActionLine(float x, float y) {
            this.x = x;
            this.y = y;
        }

        @Override
        public PathActionType getType() {
            return PathActionType.LINE_TO;
        }

        @Override
        public float getX() {
            return x;
        }

        @Override
        public float getY() {
            return y;
        }

    }
} 
```

# php - PHP：从恢复的会话中获取会话变量

> ID：11891810
> 
> 赞同：1
> 
> 时间：2012-08-09T20:55:55.250
> 
> 标签：php

我有一个不存储任何 cookie 的机器人可以访问的 PHP。会话 ID 可以从 _POST 变量中恢复。我的理解是在我从会话 ID 恢复会话后，在这种情况下 $_SESSION 无法访问会话变量，因为 cookie 被禁用。

准确地说，会话是由用户启动的。这个 PHP 页面将只接收来自机器人的一个 POST 请求 - 用户的会话 ID 作为参数传递。我需要“恢复”这个会话并检查用户会话中存储的内容。

机器人会丢弃发送给它的任何信息。

还有其他方法可以检索会话变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:00:01.380

是的，有办法。利用 INI 设置`session.use_trans_sid`（将其设置为“1”）会将包含会话 ID 的查询字符串附加到所有输出的 URL，从而消除对 cookie 的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:30:39.147

许多人建议使用 session_id(...) - 由于某种原因，这在我的设置中不起作用。相反，我的解决方案是读取会话文件并使用 session_decode(...) 填充 $_SESSION 变量，然后通过 $_SESSION 访问变量。

# javascript - 为什么它不将 JSON 返回到浏览器

> ID：11891816
> 
> 赞同：0
> 
> 时间：2012-08-09T20:56:15.223
> 
> 标签：javascript, node.js

我正在尝试将 JSON 格式发送到浏览器以显示。但它似乎不会去浏览器加上像 req.write 部分这样的错误。访问 url 是 127.0.0.1:3000/media=video 我可以访问服务器，但它不会将 JSON 返回到浏览器。

```
var http = require('http');
var recommandCat=['top5','newest','like','random','recommened'];
var url =require('url');

http.createServer(function (req, res) {
  var url_parts = url.parse(req.url, true);
  var query = url_parts.query;
  var returnJson="";
  console.log(query.media);  
   switch (query.media) 
   {
    case 'photo':
        returnJson=photoGenerator();
        break;
        case 'video':
        returnJson=videoGenerator();
        break;
        case 'audio':
        returnJson=audioGenerator();
   }

   console.log(returnJson);
   res.write(returnJson);   

       }).listen(3000, '127.0.0.1');

    function videoGenerator()
   {
    var jsonArray = new Array();
    for(i=0;i<10;i++)
   {
    var data = new Object();         
     var recoCat = recommandCat[Math.floor(Math.random()*4)];        
     data = {
                    tomEngine:{ 
                    mediaType:"video",
                        recommendset:[

                                                    {recommendCat:"+recoCat+",

                                                    recommendResult:[

                                                   {

                                                    mediaId:"",

                                                    mediaEntry:[{
                                                        user1:{
                                                                    name:"sooin",
                                                                    rating:"3",
                                                                    views:"2",
                                                                    like:"ture",
                                                                    comment:"good"                                  
                                                        },
                                                        user2:{
                                                                    name:"sara",
                                                                    rating:"1",
                                                                    views:"4",
                                                                    like:"ture",
                                                                    comment:"good!"                                 
                                                        }                                       
                                                        }], 
                                                    view:"4",
                                                    rating:"4",
                                                    like:"10",
                                                    attribute:{
                                                                    smallUrl:"www",
                                                                    largeUrl:"llll",
                                                                    title:"aaaa"
                                                    },
                                             }]                                                 
                                               }
                        ]   
                    }
        };  
        jsonArray.push(data);
}

return jsonArray;
} 
```

也许我的 json 格式是错误的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:28:08.733

您可能必须向客户端发送正确**的 Content-Type**标头。[**response.end()**](http://nodejs.org/api/http.html#http_response_end_data_encoding)也[应该在每个 response 结束时调用](http://nodejs.org/api/http.html#http_response_end_data_encoding)。

```
var body = JSON.stringify(returnJson);

res.writeHead(200, {
  'Content-Length': body.length,
  'Content-Type': 'application/json'
});

res.write(body);
res.end(); 
```

此外，如果您的响应正文未分块，则只能使用方法 response.end() 像

```
res.end(body); 
```

# javascript - nodejs中的RTMP实现是可能的吗？

> ID：11891818
> 
> 赞同：5
> 
> 时间：2012-08-09T20:56:17.707
> 
> 标签：javascript, flash, node.js, rtmp

我正在尝试在 Node.js 中实现 RTMP，但是在查看文档并尝试之后，我无法做到，而且我怀疑这不可能让它看到 node.js 如何处理数据流。

我正在分叉此代码：[https ://github.com/timwhitlock/node-amf/tree/master/node-rtmp](https://github.com/timwhitlock/node-amf/tree/master/node-rtmp)

根据代码和写得很糟糕的adobe文档，连接后，握手过程开始，客户端发送一个1537个八位字节的流，其中第一个是rtmp版本（应该总是3），后面4个是时间戳其他4个应该是0（0000），其余数据都是随机字符。

现在，链接库完成了所有这些工作，但在检查 4 个零时被破坏了。它使用 Net 模块创建服务器，并监听连接事件。[使用事件提供的套接字对象，将编码设置为“二进制”（我在文档http://nodejs.org/api/stream.html#stream_stream_setencoding_encoding](http://nodejs.org/api/stream.html#stream_stream_setencoding_encoding)中看到的这种类型的编码不存在），然后尝试检查四个零

我怀疑套接字无论如何都在'utf8'中编码，并且流在哪里搞砸了，因为打印第一个字节，永远不是相同的数据。将套接字的编码更改为十六进制，我找到了表明我正在寻找的四个零的匹配项：

```
V | TIME   |4 ZEROS |RANDOM DATA
03|0091c3ee|80000702|3e904115
03|0091ea60|80000702|f6e2d38a
03|00921a47|80000702|f2e21db3

03|0092eaeb|80000702|15834dbf
03|00931e0d|80000702|5f0b7891
03|00933c68|80000702|b4980c5d 
```

即使我可以让它像那样*工作*，当我需要将真实数据（如视频、音频等）流式传输到服务器时（我知道我可以从套接字二进制数据写入传递缓冲区对象并使用它：[https ://github.com/substack/node-binary](https://github.com/substack/node-binary)）并且套接字无法处理二进制数据，我会损坏数据吗？

我不是专家，但我尽我所能对此进行调查，即使这无法解决，我希望有人能告诉我我是对的还是我搞砸了:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T11:03:24.093

好吧，我的答案是在同一个[文档](http://nodejs.org/api/stream.html#stream_stream_setencoding_encoding)上，如果我根本不调用 Net 模块返回的套接字对象上的 setEncoding()，我可以接收一个普通的二进制缓冲区，我可以随意解析，所以这似乎成为可能。

仍然，接收到的数据不是 0（在字节 5、6、7 和 8 上有 128 0 7 2）所以我需要知道如何正确解析二进制数据，但至少现在，这似乎是可能的。

问候，影子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T17:05:19.653

这不是编码问题（你没有搞砸它）。我能找到的最接近的解释是 Red5 的来源：

[OutboundHandshake.java:96](https://github.com/Red5/red5-client/blob/master/src/main/java/org/red5/client/net/rtmp/OutboundHandshake.java#L96)

不知何故，该字段用于传输实现的版本。

# javascript - Jquery 绑定事件不响应

> ID：11891822
> 
> 赞同：0
> 
> 时间：2012-08-09T20:56:25.647
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, unobtrusive-javascript

我试图在按下按钮时增加和减少投票计数（我已经简化了情况以利用我的错误）；我用点击事件绑定了两个不同的按钮；但是，我没有得到任何响应（用 Firebug 测试）。

jQuery代码：

```
//This Code is located within Application.js (Rails)
$(document).ready(function() {
    $('.buttonUp').bind('click', function() {
        var voting_element = $(this).closest('.current_vote');
        voting_element.text( Number(voting_element.text()) + 1 );
    });
    $('.buttonDown').bind('click', function() {
        var voting_element = $(this).closest('.current_vote');
        voting_element.text( Number(voting_element.text()) - 1 );
    });
}); 
```

每个具有 buttonUp 或 buttonDown 类的按钮都位于包含单个提交按钮的表单中。

我在 Rails 3.1.3 中执行此操作并使用以下版本的 Jquery 库：

Jquery-Rails => 1.0.12
Jquery => 1.6.1
JqueryUI => 1.8.12
JqueryUJS => 上面 Jquery-Rails 自带的那个。

Live 也不起作用，我没想到会这样，因为我在将方法绑定到按钮之前等待文档加载。

这是有问题的 HTML 的片段。

```
<tr>
    <td>pop</td>
    <td>pop</td>
    <td><a href="/posts/12">Show</a></td>
    <td><a href="/posts/12/edit">Edit</a></td>
    <td><a href="/posts/12" data-confirm="Are you sure?" data-method="delete" rel="nofollow">Destroy</a></td>
    <td><p>
      <b>votes: </b>
    </p>
      <p class="current_vote">
        1
      </p>
      <form action="/posts/increaseVote?id=12" class="button_to" data-remote="true" data-type="json" method="post"><div><input class="buttonUp" type="submit" value="increaseVote" /><input name="authenticity_token" type="hidden" value="TxEGwONzSD+tnJ19iHMdGjuCBJMFoNJdECEspDtZxxY=" /></div></form>
      <form action="/posts/decreaseVote?id=12" class="button_to" data-remote="true" data-type="json" method="post"><div><input class="buttonDown" type="submit" value="decreaseVote" /><input name="authenticity_token" type="hidden" value="TxEGwONzSD+tnJ19iHMdGjuCBJMFoNJdECEspDtZxxY=" /></div></form>
  </tr> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:15:48.733

要指出正确的方向，请查看此[**演示**](http://jsfiddle.net/srBRp/2/)。

这是JS：

```
$(document).ready(function() {

    function vote(el, amt) {
        var $counter = $(el).siblings('.counter');
        $counter.text(parseInt($counter.text(), 10) + amt);
    }

    $('.voteUp').bind('click', function() {
        vote(this, 1);
    });

    $('.voteDown').bind('click', function() {
        vote(this, -1);
    });

});​ 
```

# android - 即时 GZIP 到 FTP 服务器

> ID：11891824
> 
> 赞同：0
> 
> 时间：2012-08-09T20:56:26.677
> 
> 标签：android, ftp, gzip

我想获取 sdcard 上的一个文件，并在我 FTP 时即时对其进行 GZip。我不想创建一个中间文件，将其保存为 gzip，然后按照某人的建议删除这两个文件。必须有一种方法可以动态地在代码中执行此操作。我遇到的问题是其中一些文件是 250M。所以我的基本代码如下所示：

```
FTPClient con;
FileInputStream in = new FileInputStream(files[i]);
boolean result = con.storeFile(files[i].getName(), in); 
```

如果我可以插入那会很棒，但是由于明显的原因而失败：

```
GZIPInputStream gzip = new GZIPInputStream(in);
con.storeFile(files[i].getName(), gzip); 
```

我收到一个幻数错误..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:21:15.410

您可以使用[zlib](http://zlib.net/)。它支持内存中 gzip 压缩。您可以简单地将其编译到您的代码中。

# c# - PC 和 Android ICS 之间的 UDP 多播（CSharp 与 Java）

> ID：11891825
> 
> 赞同：0
> 
> 时间：2012-08-09T20:56:29.000
> 
> 标签：c#, udp, multicast, udpclient

我有一个小问题让我很头疼。
我写了两个用于 UDP 通信的小程序（每个都接收和发送）。

到目前为止的测试：
- PC 发送数据包并接收它。
- Android 发送数据包并接收它。

在同一网络内的 2 台 PC 之间进行另一次测试后，似乎
即使是这 2 台 PC 也不会相互通信。

用于 android 设备的 Java 代码主要
来自我为 Android 集群编写的（工作）程序（所以我认为它是正确的）。

有没有人对此有任何想法（或者甚至可能是与防火墙相关的问题）？
一些代码（仅重要部分，精简列表的监控和管理，例如）

在里面：

```
private UdpClient udpClient;
private static int udpPort=9998;
private IPAddress mCastAddress = IPAddress.Parse("239.255.255.255"); 
```

在克托：

```
udpClient = new UdpClient(udpPort);
udpClient.MulticastLoopback = true;
udpClient.EnableBroadcast = true;
udpClient.AllowNatTraversal(true);
udpClient.JoinMulticastGroup(mCastAddress); 
```

发件人线程：

```
IPEndPoint iep = new IPEndPoint(mCastAddress, udpPort);           
//MessageCoder.encode(msg) is returning a valid byte[], no problem here.
byte[] data=MessageCoder.encode(msg);
udpClient.Send(data, data.Length, iep); 
```

接收线程：

```
IPEndPoint iep = new IPEndPoint(IPAddress.Any, 0);
byte[] data = udpClient.Receive(ref iep); 
```

提前致谢。
[编辑]
我要提一下，android 设备似乎也没有从
我的电脑接收任何包。
[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:33:43.053

好的，我找到了 PC <-> PC 问题的解决方案：

在克托：

```
udpClient = new UdpClient(udpPort);
udpClient.MulticastLoopback = true;
udpClient.EnableBroadcast = true;
udpClient.JoinMulticastGroup(mCastAddress); 
```

在发件人线程中：

```
 IPEndPoint iep = iep = new IPEndPoint(IPAddress.Broadcast, udpPort); 
```

在接收线程中：

```
IPEndPoint iep = new IPEndPoint(IPAddress.Any,udpPort); 
```

有时候是小事...

现在是时候尝试与我的 Android 设备互操作了。

# ruby-on-rails-3 - 用设计嵌套

> ID：11891829
> 
> 赞同：0
> 
> 时间：2012-08-09T20:56:51.587
> 
> 标签：ruby-on-rails-3, devise

我正在尝试建立一个注册表单，当用户注册时，我还为他创建了一个商店。对于注册，我正在使用设计。路线.rb

```
devise_for :owners 
```

所有者.rb

```
 devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable

  attr_accessible :email, :password, :password_confirmation, :remember_me, 
                  :stores_attributes

  has_many :stores
  accepts_nested_attributes_for :stores 
```

商店.rb

```
 attr_accessible :city, :country, :locale, :name, :time_zone
  belongs_to :owner 
```

我想使用嵌套表单为该用户创建和存储，该表单适用于所有者部分，但不适用于嵌套字段。

我一直在寻找类似的问题，但由于某种原因它仍然不起作用。

意见/设计/注册/新

## 注册

```
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>

  <%= devise_error_messages! %>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

    <%= f.fields_for :stores do |store_form| %>
      <p><%= store_form.label :name %></p>
      <p><%= store_form.text_field :name %></p>
    <% end %>

  <div><%= f.submit "Sign up" %></div>
<% end %> 
```

它没有显示表单的商店部分，有人知道我的代码有什么问题吗？感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:59:03.160

你错过了一个=

```
<%= f.fields_for :stores do |store_form| %> 
```

# java - 你能有多个哈希码和等于吗

> ID：11891831
> 
> 赞同：2
> 
> 时间：2012-08-09T20:56:56.137
> 
> 标签：java

好吧，我需要指出正确的方向。我已经有一个哈希码和一个带有 override 的 equals 方法。

```
@Override 
public int hashCode() {         
    return  type.hashCode() ^ type2.hashCode() ^ type3.hashCode()  ;        } 

@Override 
public boolean equals(Object obj) { 
    if (!(obj instanceof MyObject)) {
        return false;
    }
    MyObject mdc = (MyObject) obj; 
    return mdc.type.equals(type) && mdc.type2.equals(type2) && mdc.type3.equals(type3); 
} 
```

现在如果我只想比较第一种和第二种类型而不是第三种呢？我可以有两个 hash 和 equal 方法供以后使用吗？

我想要做的是，如果类型 1 和类型 2 匹配，则从当前数组列表中删除它们并将它们添加到新列表中，显示哪些是相同类型。这与上面显示的哈希码不同。

数组中是否有另一种方式，我可以看到 type1 和 type2 的哪个组合出现多次？

前任：

*   射击光环
*   射击使命召唤
*   竞速极限
*   …………
*   …………
*   …………
*   射击光环

Shooting Halo 出现了两次，需要将它们删除并添加到另一个列表中，但问题是我已经有一个以前使用的哈希码。

编辑：我要感谢大家的想法。我通过创建另一个具有类似 getter 和 setter 但具有更新的哈希码的对象类解决了这个问题，并且它有效。下次我会使用更好的逻辑方法。我在这篇文章中的主要目标是了解是否有任何方法可以在一个类中拥有多个哈希码和方法，这显然是不可能的。:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:59:26.233

你不能在同一个类中有两个具有相同签名的方法，所以这是不可能的（这是java类/方法的共同原则，不仅仅是`equals`和`hashcode`方法）。

正如所`Dennis Meng`评论的，如果遇到这种情况，您需要重新考虑您的设计。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:06:54.477

> 现在如果我只想比较第一种和第二种类型而不是第三种呢？

在我看来，您的需求推动创建可以正确比较对象的不同类。所以一个类知道它应该只比较 type1 和 type2 而另一个知道它应该比较所有 3 个（也许是对象的层次结构？）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:00:58.103

在一个班级里，没有办法。您可以子类化您的类并覆盖`hashCode()`and `equals(..)`，并在一种情况下使用一个类的实例，而在另一种情况下使用另一个类的实例。但是整个场景看起来像是灾难的候选者，所以重新考虑你是否真的需要它。

如果您只想定义多个排序顺序，请使用外部`Comparator`实例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:24:50.763

在我看来，您真正的问题不是等于哈希码的事情……它试图处理某些 Collection 已经具有您尝试放入第二个的事物之一并尝试用equals，hashcode 不仅知道被比较的两个对象。我想我在这里正在“重新思考你的逻辑”火车上，我相信你试图建立的收藏`Map<String,List<MyObject>>`比`Set<MyObject>`我认为你目前正在努力解决的问题更多。

如果您尝试将 MyObject 实例推入的数据结构是`Map<String,List<MyObject>>`，则 MyObject equals/hashCode 问题将完全消失，因为有关 equals() 和 hashcode() 的 String 的默认处理将正常工作。

在你的例子中，这最终就像......

```
[ "Shooting Halo", [ MyObject("Shooting Halo"), MyObject("Shooting Halo") ],
[ "Shooting CallofDuty", [ MyObject("Shooting CallofDuty") ],
[ "Racing Forza", [ MyObject("Racing Forza") ] 
```

构建集合后，您可以对其进行解析并找出如何处理具有多个值的键。如果您走这条路，请查看 Google Guava Library 以获取 Multimap，因为它使这个用例变得微不足道。 [http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T21:00:30.943

您不能有两个具有相似签名的方法。无论您提到什么逻辑，您都可以放入现有的 equals 方法并相应地返回结果

# ios - 在连续启动中打开 FBSession (FB SDK for SDK 3.0)

> ID：11891834
> 
> 赞同：11
> 
> 时间：2012-08-09T20:57:15.483
> 
> 标签：ios, facebook, facebook-ios-sdk

我正在尝试为 iOS 集成新的 Facebook SDK，但在理解某些概念时遇到了问题。

1.  我使用`[FBSession sessionOpenWithPermissions:...]`身份验证对话框进行身份验证并返回应用程序。认证成功。

2.  然后关闭应用程序，重新启动。`[[FBSession activeSession] accessToken]`成功返回之前保存的令牌。

3.  但是，与此同时，`[[FBSession activeSession] isOpen]`返回`NO`。（这意味着会话尚未准备好使用。）

4.  还有，`[[FBSession activeSession] state]`就是`FBSessionStateCreatedTokenLoaded`在这个时候。[此处](https://developers.facebook.com/docs/tutorials/ios-sdk-tutorial/personalize/)的教程使用`isOpen`调用来验证活动会话是否已加载并使用令牌打开。

那么我们调用什么来打开令牌加载会话而不将用户重定向到身份验证对话框？

**提示：**

在`FBSessionState`枚举中，因为`FBSessionStateOpen`它说：

> 打开会话状态指示用户已登录或缓存的令牌可用。

然而`FBSessionStateCreatedTokenLoaded`被描述为：

> 两个初始会话状态之一，指示已加载缓存的令牌；当会话处于此状态时，对 open* 的调用将导致会话打开，无需 UX 或应用程序切换

你能帮我弄清楚这些会话转换吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-30T16:55:44.877

我包括了一个我编写的 Facebook 实用程序类，它有助于理解登录状态，因为除了使用实际的“FBLoginView”之外，我还在自己的设置 UI 中向用户公开了“登录”/“未登录”消息允许用户切换授权状态的组件。

下面的代码也可以通过这个[gist](https://gist.github.com/3532903)获得。

我可能没有`FBSessionState`正确解释我的 switch 语句中的所有类型，但到目前为止，它在我测试过的情况下对我很有帮助（我只是把它放在一起）。

其他人提到的要注意的关键是，有时您有一个无法立即使用的缓存授权令牌，但如果您对其进行 Facebook`open`调用，则可以使其可重用（刷新）。这个开放的调用在幕后工作，不会触发任何 UI/不和谐的 OAuth 窗口/应用程序切换（如果您有缓存的令牌）。

请参阅我在方法中的评论`isLoggedInAfterOpenAttempt`。请注意我如何检查状态，`FBSessionStateCreatedTokenLoaded`然后才调用

`-openWithCompletionHandler:^(FBSession *session, FBSessionState status, NSError *error)`.

关于这门课的其他花絮：

*   我这里有一个属性来缓存登录用户，类型符合协议`FBGraphUser`。但是，这里演示的任何登录方法都没有使用它。
*   适用于 iOS 的 Facebook SDK 3.0 示例代码建议构建您自己的类来保持和管理这些类型的操作，如果您的应用程序不仅仅是一个微不足道的应用程序。下面的这门课是我的应用程序这个想法的开始。
*   你可以用 NSLog 替换我的 'log4Info' 和 'log4Debug' 宏来让它工作。

```
#import "UWFacebookService.h"

@implementation UWFacebookService

// 静止的
静态常量 int ddLogLevel = LOG_LEVEL_DEBUG;

// 强的
@synthesize facebookGraphUser = _facebookGraphUser;

#pragma mark - 查询

- (BOOL)isSessionStateEffectivelyLoggedIn:(FBSessionState)state {
    BOOL 有效登录；

    开关（状态）{
        案例 FBSessionStateOpen：
            log4Info(@"Facebook 会话状态：FBSessionStateOpen");
            有效LoggedIn = YES；
            休息;
        案例 FBSessionStateCreatedTokenLoaded：
            log4Info(@"Facebook 会话状态：FBSessionStateCreatedTokenLoaded");
            有效LoggedIn = YES；
            休息;
        案例 FBSessionStateOpenTokenExtended：
            log4Info(@"Facebook 会话状态：FBSessionStateOpenTokenExtended");
            有效LoggedIn = YES；
            休息;
        默认：
            log4Info(@"Facebook 会话状态：不是打开或可打开类型之一。");
            有效登录 = 否；
            休息;
    }

    返回有效登录；
}

/**
* 确定 Facebook 会话是否具有授权状态。如果它是缓存的，它可能仍需要打开
* 令牌，但此调用的目的是确定用户是否至少被授权
* 明确询问任何事情。
*/
- (BOOL)isLoggedIn {
    FBSession *activeSession = [FBSession activeSession];
    FBSessionState state = activeSession.state;
    BOOL isLoggedIn = activeSession && [self isSessionStateEffectivelyLoggedIn:state];

    log4Info(@"Facebook 活动会话状态：%d；登录结论：%@", state, (isLoggedIn ?@"YES" : @"NO"));

    返回是登录；
}

/**
* 如果我们加载了有效令牌（可能需要后台刷新），则尝试静默打开 Facebook 会话。
* 在那次尝试之后，我们遵循会话处于有效授权状态之一的基本概念。
*/
- (BOOL)isLoggedInAfterOpenAttempt {
    log4Debug(@"FBSession.activeSession: %@", FBSession.activeSession);

    // 如果我们没有缓存的令牌，在此处调用 open 将导致 UX 登录
    // 发生; 我们不希望这种情况发生，除非用户点击设置中的登录按钮，所以
    // 我们在这里检查以确保在调用 open 之前我们有一个令牌
    如果（FBSession.activeSession.state == FBSessionStateCreatedTokenLoaded）{
        log4Info(@"我们有一个缓存的令牌，所以我们要为用户重新建立登录。");
        // 即使我们有一个缓存的令牌，我们也需要登录才能使会话可用：
        [FBSession.activeSession openWithCompletionHandler:^(FBSession *session, FBSessionState 状态, NSError *error) {
            log4Info(@"已完成打开登录会话，状态：%d", status);
        }];
    }
    别的 {
        log4Info(@"活动会话不在状态'FBSessionStateCreatedTokenLoaded'。它有状态：%d", FBSession.activeSession.state);
    }

    返回 [self isLoggedIn];
}

@结尾

```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T01:07:20.933

这意味着当您保存（缓存）或以其他方式已经可用的令牌时，Facebook iOS 库仍然要求您使用 open 方法重新初始化会话。

如果它可以重用现有令牌（这是您的情况），则这样做将不会触发 UX（用户体验 - 即应用程序切换或 Facebook 登录弹出窗口）。

用户的印象是他从未注销，但在应用程序中发生的事情是您正在联系 Facebook 以重新打开会话。

之所以这样设计，是因为如果令牌可用但已过期，Facebook 库会告诉您 - “嘿，令牌已过期，除非您现在获得新令牌，否则请考虑您已注销。”

希望有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T00:44:03.310

尝试以下代码示例：

```
/////////////////////////////////

-(void)CallBackOpenURLFromDelegate:(NSURL *)url
{
    [FBSession.activeSession handleOpenURL:url];
}

-(id)init
{
    self = [super init];
    FBSessionTokenCachingStrategy* pToken = [[[FBSessionTokenCachingStrategy alloc]initWithUserDefaultTokenInformationKeyName:@"STokenInfoX"]autorelease];
    FBSession.activeSession = [[FBSession alloc] initWithAppID:FACEBOOK_AppId
                                                   permissions:[NSArray arrayWithObject:@"status_update"]
                                               urlSchemeSuffix:@""
                                            tokenCacheStrategy: pToken];
    return self;
}

-(void)dealloc
{
    [FBSession.activeSession close];
    [super dealloc];
}

-(void) UploadImpl:(NSString*)strImagePath
{
    FBRequest *photoUploadRequest = [FBRequest requestForUploadPhoto: [UIImage imageWithContentsOfFile:strImagePath ]];
    [photoUploadRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error)
    {
        NSLog(@"%@",[error description]);
        //self.delegate
    }];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-26T06:28:04.347

这可能是一个旧线程，但现在您所要做的就是在您的应用程序委托中的 (void)applicationDidBecomeActive:(UIApplication *)application 中调用您的 FBSession 对象中的 handleDidBecomeActive。

例如：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [[[MLSocialNetworksManager sharedManager] MLFacebook] handleDidBecomeActive];
} 
```

MLFacebook 是我的 FBSession 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-12T22:03:01.153

只需调用您的初始化视图控制器

```
self.FBloginView = [[FBLoginView alloc] init]; 
```

# matlab - 如何以 Matlab eps 格式导出变音符号（或任何外来字符）？

> ID：11891836
> 
> 赞同：7
> 
> 时间：2012-08-09T20:57:20.197
> 
> 标签：matlab, printing, character-encoding, diacritics, eps

我正在尝试在 MATLAB 的图例命令中使用变音符号。一个快速的谷歌告诉我我想要的形式是`char(146)`，它可以很好地显示文件，或者将它打印到 tif。

但是当我打印为 EPS 格式（或 epsc、eps2、epsc2）时，文件中会显示一个不同的字符。我试过打印前 300 多个字符，它们肯定会发生变化（尽管速度很慢，其中一半是紧接着带有符号的“A”），但这似乎是一种相当缓慢的方法，而且我不是保证真正找到我想要的符号。那么，这里有人对我可以尝试什么有任何想法吗？

我正在使用 MATLAB R2011a，我的默认字符集是 UTF-8，我的打印行看起来像..

```
legend( plot_id , strcat('lala',char(146)) ) 
```

我的打印线看起来像..

```
print -depsc2 -tiff -r600 <filename> 
```

（但关闭 tiff 缩略图生成没有任何效果）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T09:50:45.243

当 MATLAB 字符编码为 UTF-8 时出现问题，Linux 用户通常是这种情况（因此 Amro 使用 CP1252 的配置没有问题）。当 MATLAB 字符集编码（使用`slCharacterEncoding()`UTF-8 获取）时，MATLAB eps 导出函数存在错误（至少在 R2011b 之前），因为它以八进制转义 UTF-8 格式（2 个字节）导出非 ASCII 字符，而 Postscript解释器设置为解码 1 字节格式。

让我们用字符 ö U+00F6 来说明这个错误，它的一些表示是：

*   UTF-16：0x00F6
*   UTF-8：0xC3 0xB6
*   八进制转义 UTF-8：\303\266
*   XML 十进制实体：ö

MATLAB 创建的 eps 文件包含：

```
/Helvetica /ISOLatin1Encoding 120 FMSR
(\303\266) s 
```

MATLAB 在 eps 文件中定义了一个`FMSR`将 Helvetica 字体重新编码为另一种编码的函数，这里[ISOLatin1Encoding](http://www.adobe.com/products/postscript/pdfs/PLRM.pdf)是两个内置编码向量之一，并且与 ISO-8859-1 (Latin1) 标准非常匹配（参见第 329 页） 330 的 Postscript 语言参考手册了解更多详细信息）。简而言之，编码向量是将字符名称与字符代码相关联的 256 元素数组。所以它只读取 1 字节的字符代码。在 ISO-8859-1 中，\303=195=Ã 和 \266=182=¶。结果，它打印出Ã¶。

## 使用 UTF-8 语言环境导出非 ASCII ISO-8859-1 字符的选项

1.  将八进制 UTF-8 代码转换为八进制 ISO-8859-1 代码，这很容易，因为非 ASCII ISO-8859-1 字符在 UTF-8 中遵循相同的布局。例如，使用可以从命令窗口或导出脚本运行的程序 sed：

    ```
    !sed -i -e 's/\\302\(\\2[4-7][0-7]\)/\1/g' -e 's/\\303\\2\([0-7][0-7]\)/\\3\1/g' file.eps 
    ```

    因此，`\303\266`变为`\366`=246=ö。您可以在 MATLAB 中直接键入非 ASCII 字符。

2.  在将文本添加到图窗之前更改 MATLAB 字符集编码`slCharacterEncoding('ISO-8859-1')`，如果您从命令窗口添加文本，请对非 ASCII 字符使用 char(number)。如果使用绘图工具直接在图中添加文本，则可以输入非 ASCII 字符。此解决方案并不理想，因为非 ASCII 字符不会以默认字体（Linux 上的 MATLAB 默认使用 Helvetica）出现在图形上，并且如果您编写图形创建脚本，则需要使用 char(number)。

3.  稍后通过使用用户提交的 MATLAB 函数（例如 LaPrint 或其分支之一）使用 LaTex 渲染文本，该函数会创建一个包含图形文本的 tex 文件和一个包含图形非文本部分的 eps 文件。一个类似的解决方案是 matlab2tikz，它创建一个 tikz/pgfplot 文件和一个 tex 文件。

4.  使用 MATLAB 的 Latex 解释器：`\"{o}`. MATLAB 通过将 ASCII 字符与其变音符号组合来创建字符，但由于相对定位不好（变音符号与字符相比在右侧有点过多），结果质量低下。MATLAB 使用 Computer Modern 字体中的字形并将字体嵌入到 eps 文件中（增加了 ~ 80 Ko）。此外，从 eps 创建的 pdf 中的原始文本不包含`ö`but `o ̈`。

## 导出非 ISO-8859-1 字符

对于导出不在 ISO-8859-1 中[的](https://stackoverflow.com/questions/4957988/how-to-use-non-ascii-characters-in-matlab-figures-for-use-in-latex-doc)字符，如果需要的字符数少于 256（8 位格式）并且理想情况下在标准编码集中，则可能有一个合理的解决方案。它涉及以下步骤：

1.  将八进制代码转换为 Unicode 字符；
2.  将文件保存为目标编码标准（8位格式）；
3.  添加目标编码集的编码向量。

例如，如果要导出波兰语文本，则需要将文件转换为 ISO-8859-2。这是在 Linux 上使用 Bash 的实现：

```
#!/bin/bash
name=$(basename "$1" .eps)
ascii2uni -a K "$1" > /tmp/eps_uni.eps
iconv -t ISO-8859-2 /tmp/eps_uni.eps -o "$name"_latin2.eps
sed -i -e '/%EndPageSetup/ r ISOLatin2Encoding.ps' -e 's/ISOLatin1Encoding/MyEncoding/' "$name"_latin2.eps 
```

保存为 eps_lat2；然后运行该命令`sh eps_lat2 file.eps`会使用 Latin-2 编码创建 file_latin2.eps。文件 ISOLatin2Encoding.ps 包含以下内容：

```
/MyEncoding
% The first 144 entries are the same as the ISO Latin-1 encoding.
ISOLatin1Encoding 0 144 getinterval aload pop
% \22x
    /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
    /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef /.notdef
% \24x
    /nbspace /Aogonek /breve /Lslash /currency /Lcaron /Sacute /section
    /dieresis /Scaron /Scedilla /Tcaron /Zacute /hyphen /Zcaron /Zdotaccent
    /degree /aogonek /ogonek /lslash /acute /lcaron /sacute /caron
    /cedilla /scaron /scedilla /tcaron /zacute /hungarumlaut /zcaron /zdotaccent
% \30x
    /Racute /Aacute /Acircumflex /Abreve /Adieresis /Lacute /Cacute /Ccedilla
    /Ccaron /Eacute /Eogonek /Edieresis /Ecaron /Iacute /Icircumflex /Dcaron
    /Dcroat /Nacute /Ncaron /Oacute /Ocircumflex /Ohungarumlaut /Odieresis /multiply
    /Rcaron /Uring /Uacute /Uhungarumlaut /Udieresis /Yacute /Tcedilla /germandbls
% \34x
    /racute /aacute /acircumflex /abreve /adieresis /lacute /cacute /ccedilla
    /ccaron /eacute /eogonek /edieresis /ecaron /iacute /icircumflex /dcaron
    /dcroat /nacute /ncaron /oacute /ocircumflex /ohungarumlaut /odieresis /divide
    /rcaron /uring /uacute /uhungarumlaut /udieresis /yacute /tcedilla /dotaccent
256 packedarray def 
```

这是 Python 的另一个实现（因此它也可以在 Windows 和 Mac 上工作）：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-
import sys,codecs
input = sys.argv[1]
fo = codecs.open(input[:-4]+'_latin2.eps','w','latin2')
with codecs.open(input,'r','string_escape') as fi:
    data = fi.readlines()
with open('ISOLatin2Encoding.ps') as fenc:
    for line in data:
        fo.write(line.decode('utf-8').replace('ISOLatin1Encoding','MyEncoding'))
        if line.startswith('%%EndPageSetup'):
            fo.write(fenc.read())
fo.close() 
```

保存为 eps_lat2.py；然后运行该命令`python eps_lat2.py file.eps`会使用 Latin-2 编码创建 file_latin2.eps。

通过更改脚本中的编码向量和 iconv（或 codecs.open）参数，它可以很容易地适应其他 8 位编码标准。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T22:24:15.763

这是一个简单的测试：

```
%# common text properties
props = {'FontSize',30};

%# LaTeX
str = '\"a\"o\"u';
subplot(121), plot(1:10)
text(5, 5, str, 'Interpreter','latex', props{:})
legend({str}, 'Interpreter','latex', props{:})
xlabel(str, 'Interpreter','latex', props{:})
title(str, 'Interpreter','latex', props{:})

%# normal text
str = 'äöü';
subplot(122), plot(10:-1:1)
text(5, 5, str, props{:})
legend({str}, props{:})
title(str, props{:})
xlabel(str, props{:})

%# export as EPS file
print -depsc2 -tiff -r600 file.eps 
```

![截屏](../Images/8468393ad9a9eea897ab6200601f505b.png)

生成的[EPS](https://i.stack.imgur.com/pHmMP.png)文件看起来相同。

### 笔记：

我在 Windows XP 上，默认字符编码是[Windows-1252](http://en.wikipedia.org/wiki/Windows-1252#Codepage_layout)：

```
>> feature('DefaultCharacterSet')
ans =
windows-1252 
```

因此，您可以使用它们的（扩展）ASCII 代码直接输入这些变音符号：`Alt+0228`、`Alt+0246`和`Alt+0252`ä、ö、ü 分别：

```
>> char([228 246 252])
ans =
äöü 
```

另请注意，我默认使用 Arial 字体：

```
>> get(0, 'defaultTextFontName')
ans =
Arial

>> get(0, 'defaultAxesFontName')
ans =
Arial 
```

# javascript - 如何正确存储自动完成的值

> ID：11891842
> 
> 赞同：0
> 
> 时间：2012-08-09T20:57:48.650
> 
> 标签：javascript, jquery

我的自动完成数据是这样的 {"label":"Apple iPhone 3G","values":"293"}.. 等.. 当用户单击自动完成选项时，我想将它们重定向到基于的产品页面关于唯一的 id 值。前任。当挑选iphone 3g时，我希望它进入example.com/293，但目前它需要输入的值而不是选择的内容。所以说我输入A并点击iphone 4g，它不会存储iphone 4g的正确值，而是存储第一个以a开头的项目的值。或者，如果我输入 iphone 并选择 iphone 4，它会将第一个 iphone 的值保存在数据库中

[http://mogulcases.com/matt/search.php](http://mogulcases.com/matt/search.php)

我如何存储键值

```
$.widget( "custom.catcomplete", $.ui.autocomplete, {
  _renderMenu: function( ul, items ) {
    var self = this,
               currentCategory = "";

    $.each( items, function( index, item ) { 
      self._renderItem( ul, item );

      $("input[type=hidden][name=key]").val(item.values); 

    });

  }
}); 
```

我是如何抓住价值观的

```
var searchcode = document.getElementById('key').value; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:02:37.260

为什么不只是对事件做点什么`select`。IE

```
$( ".selector" ).autocomplete({
   select: function(event, ui) { 
    window.location = "http://example.com/" + ui.item.id //would send them to the page you want them to go if they click on this
  }
}); 
```

这样，如果用户从列表中选择了某些内容，您可以从那里调用事件并知道该项目存在。如果他们没有从列表中选择它，它将在他们单击搜索按钮或按 Enter 时执行搜索。

您甚至可以以相同的方式更改选择的值

```
$( ".selector" ).autocomplete({
   select: function(event, ui) { 
    $(".selector").val(ui.item.value); //I think Autocomplete does something like this automatically so may not be needed.
    //But you could do something like this
    $("input[type=hidden][name=key1]").val(ui.item.value); 
  }
}); 
```

文档可以在[这里找到](http://jqueryui.com/demos/autocomplete/#event-select)

# android - 当我尝试在设备上安装已编译的 .apk 时，INSTALL_FAILED_UPDATE_INCOMPATIBLE

> ID：11891848
> 
> 赞同：311
> 
> 时间：2012-08-09T20:58:17.780
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean, cyanogenmod

我已经从 CyanogenMod 9 编译了 Trebuchet 启动器，并尝试使用 adb 安装它：

```
$ adb install out/target/product/generic/system/app/Trebuchet.apk
3986 KB/s (7870141 bytes in 1.928s)
    pkg: /data/local/tmp/Trebuchet.apk
Failure [INSTALL_FAILED_UPDATE_INCOMPATIBLE] 
```

我在 Nexus S 和 CM9 上试过，在 Galaxy Nexus 上用股票 JB 试过。为什么我会收到此错误？

**编辑：**就我而言，我尝试使用包管理器重新安装**系统包。**这不受支持，所以我遇到了这个错误。根据您的情况，错误的来源可能会有所不同。

* * *

## 回答 #1

> 赞同：526
> 
> 时间：2012-10-31T15:00:11.690

这意味着您要安装的应用程序已经安装。只需删除旧的，然后重试。

* * *

## 回答 #2

> 赞同：195
> 
> 时间：2014-04-12T11:07:58.837

尝试

```
adb uninstall package-name 
```

这个对我有用。我已经使用 Titanium Backup 删除了我的应用程序。但是，我认为 Titanium 备份并没有完全删除我的应用程序。

* * *

## 回答 #3

> 赞同：113
> 
> 时间：2015-09-21T18:18:14.930

**卸载应用程序就足以避免此问题。**

```
INSTALL_FAILED_UPDATE_INCOMPATIBLE 
```

但有时甚至再次引发卸载消息，它发生在Android OS 5.0 +，所以这是解决方案：

转到`Settings`> `Apps`，您将找到带有消息的应用程序：

> “未为此用户安装” [![在此处输入图像描述](../Images/7fd5be574b61de612b50d030b063ecfa.png)](https://i.stack.imgur.com/5zcHX.png)

我们必须为所有用户手动卸载！然后我们可以毫无问题地安装我们编译的应用程序。

[![在此处输入图像描述](../Images/834cfdd5a50694ef7f302645c63d2160.png)](https://i.stack.imgur.com/58RHG.png)

### 另一种选择：

*   删除旧应用程序并重新安装。

*   使用 Android Debug Bridge 命令：

    > adb 卸载 [包名]

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2015-04-08T07:31:06.730

两种可行的方法

**1：**手动从移动设备卸载应用程序

**2：**打开命令提示符，跟踪路径`adb`并执行以下命令

```
adb uninstall your_package_name 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-02-06T07:03:13.870

1.  转到：您的 adb 文件夹 \sdk\platform-tools\
2.  键入命令
3.  类型：adb remount 在命令窗口
4.  亚行外壳
5.  苏
6.  rm /system/app/YourApp.apk
7.  重新启动您的设备

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2016-02-21T12:49:43.990

问题是他为什么会出现这个错误。卸载将解决这个问题，但在我的情况下，当我安装 apk 的编译版本时，问题就出现了。我试图为我的应用程序构建更新。所以我做了什么，我构建了一个签名的apk，然后尝试安装apk，并且apk安装得很好。因此，与其删除旧的 apk，我不得不签署更新的更新，然后安装它。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-08-11T00:58:16.207

我刚刚重命名了这个包，它对我有用。

或者，如果您使用的是 Ionic，您可以删除应用程序并重试，当 ionic 检测到您正在部署的应用程序不是来自同一构建时，就会发生这种情况。当您从 pc 更改时，通常会发生这种情况。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2015-05-12T17:14:48.793

这可能是因为您**的设备中有多个用户，**并且您刚刚删除了其中一个上的应用程序（**其他人的 apk 仍然存在**）。

我已经删除了所有帐户，然后它就起作用了。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2018-06-21T10:31:04.390

如果您使用不同的证书签署您的应用程序，就会发生这种情况。您可以随时使用

```
adb install -r myapk.apk 
```

覆盖设备上现有的 apk，但如果您使用与已安装 apk 不同的证书签署新 apk，您仍然会收到错误消息。

在这种情况下，您需要在尝试安装之前从您的设备上卸载 apk。但是，这也会影响您的应用程序，因为您的原始签名可能与某些开发者 API 相关联，因此您可能需要使用新凭据更新控制台。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-10-10T12:00:43.003

我安装了 Astro 文件管理器并搜索了以前版本的 apk 文件，在 sdcard 上找到了一个并使用 Astro 文件管理器删除了 apk 文件。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-07-17T01:33:35.387

如果您的设备支持多个用户，您可能还必须删除每个帐户的应用程序。

我通常使用 adb 就可以了 `adb uninstall <your-package-name>`

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2016-07-31T08:59:12.867

如果 APK 是使用 Android.mk 文件构建在项目中的。也许是因为签名证书已更改。

在我的问题中，我添加了 LOCAL_CERTIFICATE := 平台。因为原始 apk 是在没有此标签的情况下签名的。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-10-23T01:45:05.600

就我而言，我无法通过设备管理器或 Astro 找到该应用程序的版本。

我最终做的是：

1) 从应用商店下载最新版本的应用程序

2）在我重新启动设备之前，该应用程序在设备管理器中仍然不可见。

3）从设备管理器中删除应用程序

4）再次运行我的项目

5）一切正常

希望这可以帮助某人

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-06-30T10:31:42.837

当您的设备中安装的应用程序作为不同的签名然后您尝试安装的应用程序（apk）时，可能会引发这种情况。（简单地说，早期的应用程序是由“System-A”构建的，现在由“System-A”构建一个应用程序B”并尝试安装）您可以通过如下所示的一种或其他方式解决此问题。

## 选项1：

```
 Uninstall the Application in your Device and install the New APK 
```

## 选项 2：

注意：仅当您有权访问分别构建 Apk 的旧系统和新系统时，此选项才适用

如果您不想删除 APk 或不允许它，那么您可以获得调试密钥、System-A 和相同的 Debug 到 System-B

获取调试密钥表单“System-A”的步骤

去终端输入

```
./gradlew signingReport 
```

你会知道你的结果如下

```
Variant: debug Config:
debug Store: /home/user/debug.keystore
Alias: AndroidDebugKey
MD5: CS:7B:E3:51:C5:2E:36:AA:3F:66:BA:ED:40:DB:86:25
SHA1: 2A:BB:C5:4E:64:4E:FE:12:4C:4E:2B:4E:4E:42:4E:4E:4E:4E:63:83
Valid until: Wednesday, May 6, 2048 
```

从上面显示的位置获取“debug.keystore”文件并将其传输到“System-B”然后转到

```
 Android studio >> File >> Project Structure >> SigningConfigs
    set the location of the "debug.keystore" to Store File and then ok 
```

现在在您的“System-B”中构建 Apk 并运行它会工作

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-03-09T03:44:40.610

> C:\android-sdk\platform-tools\adb.exe：命令失败，退出代码为 1
> 
> 错误输出：adb: failed to install app\platforms\android\app\build\outputs\apk\debug\app-debug.apk: Failure [INSTALL_FAILED_UPDATE_INCOMPATIBLE: Package com.example. `app1`签名与之前安装的版本不匹配；无视！]

**解决方案：**

您已经`app1`在手机上安装了该应用程序（主要是从播放控制台下载，或更改了上传密钥）
卸载该应用程序。

**更多细节：**

您可能已经使用上传密钥将此应用上传到 Play 商店，Play 控制台对其应用了自己的签名。这就是为什么从 google play 下载的手机中的应用程序没有与您的上传密钥相同的签名。

通过卸载应用程序，没有应用商店版本的应用程序，因此当您将新版本安装到手机时会出现错误匹配。

希望有帮助。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-04-07T21:43:45.783

转到设置/应用程序/搜索您的应用程序并卸载...

它对我有用

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-07-08T19:08:49.210

我只花了一个小时尝试调试它，然后意识到我连接到我的模拟器而不是我的手机。因此，即使我已成功删除手机上的应用程序，它仍然失败。愚蠢的错误，但也许这会帮助别人。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2015-08-08T16:57:34.927

1.  转到设置/应用程序/搜索您的应用程序并卸载...
2.  打开命令提示符和“adb 卸载”

它对我有用

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-08-11T20:46:24.727

您必须**签署**您的应用程序，然后运行它！

如果您正在为您的应用程序准备新的更新，那么继续工作不是问题。最后，在发布准备好的版本之前，当您签署应用程序时，问题将得到解决，用户安装您的应用程序没有问题。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-01-11T20:37:51.810

对于 MIUI 用户，除了通常的 USB 调试选项外，请务必同时启用这些设置：

通过 USB 安装
USB 调试（安全设置）

然后在您再次尝试安装应用程序时接受提示。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-12-30T14:02:47.650

我遇到了同样的问题并做了以下修复。

1.  设置 > 存储 > 清除缓存数据
2.  设置 > 应用程序 > 卸载那里显示的应用程序。我已经卸载了我的应用程序，但它在那里显示。
3.  重新启动，然后一切顺利。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-12-28T14:43:22.057

**三星**Galaxy 手机有一个名为“**安全文件夹**删除应用程序”的功能，它为我解决了这个问题。

adb uninstall packagename 也不能从 Secure 文件夹中删除 App。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-03-26T10:29:22.487

如果您从其他 PC 构建您的 apk 并从其他 PC 更新它，则会发生这种情况。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-01-14T16:29:30.583

当我使用 Instant Run 安装开发版本并从 Google Play 卸载时，它发生在我身上。出于某种原因，来自 Instant Run 的数据仍在设备中，无法再次安装/卸载应用程序。

修复它的唯一方法： - 在 android studio 中禁用 Instant Run - 从 android studio 安装（它应该只能从这里工作） - 卸载应用程序

现在从 Google Play 或 adb 安装应该是干净的。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-02-17T07:04:39.253

RankoR@ 您必须从另一台计算机安装应用程序。就我而言，这就是问题出现的地方..您只需卸载应用程序并重新安装它或从您正在工作的计算机上运行它..这可能是一个迟到的回复，但它会帮助一些人..谢谢

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-10-29T15:48:09.683

如果您尝试从与最初不同的计算机进行调试，您将收到可怕的 INSTALL_FAILED_UPDATE_INCOMPATIBLE 错误。但是，**有一种方法可以在不卸载应用程序并丢失数据的情况下继续进行。**

要查看如何传输所需的 debug.keystore，以免收到消息“设备已有具有相同应用程序但签名不同的应用程序。为了继续，您必须卸载现有应用程序。” （并丢失您的数据）。请参阅[使用 android 中相同的 debug.keystore 在另一台机器上更新应用程序](https://stackoverflow.com/questions/18266947/update-the-app-in-another-machine-with-same-debug-keystore-in-android)

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2021-08-09T13:09:19.020

## 工作简介/工作空间

[![在此处输入图像描述](../Images/906bc8965d41ba321c31fedb5bbbe1a3.png)](https://i.stack.imgur.com/ggBql.png)

不要忘记，根据您手机上的用户帐户（例如设备管理设置为高级的 Google Workspace -G Suite 帐户配置文件）可能会为您的手机生成工作配置文件。

90% 的人拥有它，但甚至不知道它。您通常会在所有应用视图中看到 Workprofile。几乎就像一个带有单独应用程序的单独工作区。

如果他们有少量行李，您可以识别您何时从 Workprofile 浏览应用程序。反正 ：

## **您还必须从 Workprofile 中删除该应用程序！！！**

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2015-11-23T06:43:27.050

就我而言，我已经从 Playstore 安装了应用程序，然后当我尝试从**Eclipse**或**Android Studio**运行时，它会尝试在不允许的 APK 上再次安装。

因此，首先您必须卸载该**Siged APK**，然后您必须尝试。

谢谢你。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2020-10-23T05:21:53.583

你只要跑`adb uninstall {{package_name}}`。而已。现在您尝试构建。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2018-06-25T15:43:36.253

如果您的清单文件有这一行 -

> android:sharedUserId="android.uid.system"

导致此错误！只需评论此行，您就可以开始了！

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2019-10-24T10:45:57.480

我没有看到任何人提到我的案例，所以让我添加它 - 当您以一种模式（例如开发）构建应用程序然后尝试用不同的模式（例如生产）覆盖它时会发生这种情况。

解决方案与其他情况相同 - 删除设备/模拟器上的应用程序并再次运行。

# java - 如何使用 Apache POI 加载大型 xlsx 文件？

> ID：11891851
> 
> 赞同：53
> 
> 时间：2012-08-09T20:58:35.177
> 
> 标签：java, memory, apache-poi, out-of-memory, xssf

我有一个大的 .xlsx 文件（141 MB，包含 293413 行，每行 62 列）我需要在其中执行一些操作。

我在加载此文件 ( `OutOfMemoryError`) 时遇到问题，因为 POI 在 XSSF (xlsx) 工作簿上占用了大量内存。

[这个 SO question](https://stackoverflow.com/questions/6069847/java-lang-outofmemoryerror-java-heap-space-while-reading-excel-with-apache-poi)类似，提出的解决方案是增加 VM 的分配/最大内存。

它似乎适用于那种文件大小（9MB），但对我来说，即使分配所有可用的系统内存，它也根本不起作用。（好吧，考虑到文件大 15 倍以上，这并不奇怪）

我想知道是否有任何方法可以以不会消耗所有内存的方式加载工作簿，但是，无需进行基于（进入）XSSF 底层 XML 的处理。（换句话说，保持一个清教徒的 POI 解决方案）

如果没有困难，欢迎您说出来（“没有。”）并向我指出“XML”解决方案的方法。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2015-02-08T17:58:16.320

我在网络服务器环境中处于类似情况。上传的典型大小约为 150k 行，从单个请求中消耗大量内存并不是一件好事。Apache POI Streaming API 可以很好地解决这个问题，但它需要对您的读取逻辑进行全面重新设计。我已经有一堆使用标准 API 的读取逻辑，我不想重做，所以我写了这个：[https ://github.com/monitorjbl/excel-streaming-reader](https://github.com/monitorjbl/excel-streaming-reader)

它并不完全是标准`XSSFWorkbook`类的替代品，但如果你只是迭代行，它的行为类似：

```
import com.monitorjbl.xlsx.StreamingReader;

InputStream is = new FileInputStream(new File("/path/to/workbook.xlsx"));
StreamingReader reader = StreamingReader.builder()
        .rowCacheSize(100)    // number of rows to keep in memory (defaults to 10)
        .bufferSize(4096)     // buffer size to use when reading InputStream to file (defaults to 1024)
        .sheetIndex(0)        // index of sheet to use (defaults to 0)
        .read(is);            // InputStream or File for XLSX file (required)

for (Row r : reader) {
  for (Cell c : r) {
    System.out.println(c.getStringCellValue());
  }
} 
```

使用它有一些注意事项；由于 XLSX 工作表的结构方式，并非所有数据都在流的当前窗口中可用。但是，如果您只是想从单元格中读取简单的数据，那么它的效果就很好。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-07-09T07:38:04.263

可以通过使用 File 而不是 Stream 来提高内存使用率。（最好使用流式 API，但流式 API 有局限性，请参阅[http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html)）

所以而不是

```
Workbook workbook = WorkbookFactory.create(inputStream); 
```

做

```
Workbook workbook = WorkbookFactory.create(new File("yourfile.xlsx")); 
```

这是根据： http: [//poi.apache.org/spreadsheet/quick-guide.html#FileInputStream](http://poi.apache.org/spreadsheet/quick-guide.html#FileInputStream)

**文件与输入流**

“打开工作簿时，无论是 .xls HSSFWorkbook 还是 .xlsx XSSFWorkbook，都可以从 File 或 InputStream 加载工作簿。使用 File 对象可以降低内存消耗，而 InputStream 需要更多内存，因为它有缓冲整个文件。”

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-12T19:37:02.130

Apache POI、HSSF 和 XSSF 中的 Excel 支持，支持 3 种不同的模式。

一个是完整的、类似 DOM 的内存中“UserModel”，它同时支持读取和写入。使用通用的 SS (SpreadSheet) 接口，您可以基本透明地为 HSSF (.xls) 和 XSSF (.xlsx) 编写代码。但是，它需要大量内存。

POI 还支持一种流式只读方式来处理文件，即 EventModel。这比 UserModel 低得多，并且让您非常接近文件格式。对于 HSSF (.xls)，您可以获得记录流，并且可以选择一些帮助处理它们（丢失单元格、格式跟踪等）。对于 XSSF (.xlsx)，您可以从文件的不同部分获取 SAX 事件流，这有助于获取文件的正确部分，并且还可以轻松处理文件中常见但很小的部分。

仅针对 XSSF (.xlsx)，POI 还支持只写流式写入，适用于低级别但低内存的写入。它在很大程度上只支持新文件（某些类型的附加是可能的）。没有等效的 HSSF，并且由于许多记录中来回的字节偏移和索引偏移，这将很难做到......

对于您的具体情况，如您在澄清评论中所述，我认为您将希望使用 XSSF EventModel 代码。请参阅[POI 文档](http://poi.apache.org/spreadsheet/how-to.html#xssf_sax_api)以开始使用，然后尝试查看POI 和 Tika 中使用它的[这](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/hssf/eventusermodel/examples/XLS2CSVmra.java) [三个](http://svn.apache.org/repos/asf/poi/trunk/src/ooxml/java/org/apache/poi/xssf/extractor/XSSFEventBasedExcelExtractor.java) [类以获取更多详细信息。](http://svn.apache.org/repos/asf/tika/trunk/tika-parsers/src/main/java/org/apache/tika/parser/microsoft/ooxml/XSSFExcelExtractorDecorator.java)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-09T22:12:06.877

POI 现在包括用于这些情况的 API。SXSSF [http://poi.apache.org/spreadsheet/index.html](http://poi.apache.org/spreadsheet/index.html) 它不会将所有内容加载到内存中，因此它可以让您处理此类文件。

注意：我读过 SXSSF 作为一个写作 API 工作。应该使用 XSSF 来完成加载，而不需要对文件进行输入流（以避免在内存中完全加载它）

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-07-07T10:54:45.843

检查这篇文章。我将展示如何使用 SAX 解析器来处理 XLSX 文件。

[https://stackoverflow.com/a/44969009/4587961](https://stackoverflow.com/a/44969009/4587961)

简而言之，我`org.xml.sax.helpers.DefaultHandler`为 XLSX filez 扩展了 whih 处理 XML 结构。t 是事件解析器 - SAX。

```
class SheetHandler extends DefaultHandler {

    private static final String ROW_EVENT = "row";
    private static final String CELL_EVENT = "c";

    private SharedStringsTable sst;
    private String lastContents;
    private boolean nextIsString;

    private List<String> cellCache = new LinkedList<>();
    private List<String[]> rowCache = new LinkedList<>();

    private SheetHandler(SharedStringsTable sst) {
        this.sst = sst;
    }

    public void startElement(String uri, String localName, String name,
                             Attributes attributes) throws SAXException {
        // c => cell
        if (CELL_EVENT.equals(name)) {
            String cellType = attributes.getValue("t");
            if(cellType != null && cellType.equals("s")) {
                nextIsString = true;
            } else {
                nextIsString = false;
            }
        } else if (ROW_EVENT.equals(name)) {
            if (!cellCache.isEmpty()) {
                rowCache.add(cellCache.toArray(new String[cellCache.size()]));
            }
            cellCache.clear();
        }

        // Clear contents cache
        lastContents = "";
    }

    public void endElement(String uri, String localName, String name)
            throws SAXException {
        // Process the last contents as required.
        // Do now, as characters() may be called more than once
        if(nextIsString) {
            int idx = Integer.parseInt(lastContents);
            lastContents = new XSSFRichTextString(sst.getEntryAt(idx)).toString();
            nextIsString = false;
        }

        // v => contents of a cell
        // Output after we've seen the string contents
        if(name.equals("v")) {
            cellCache.add(lastContents);
        }
    }

    public void characters(char[] ch, int start, int length)
            throws SAXException {
        lastContents += new String(ch, start, length);
    }

    public List<String[]> getRowCache() {
        return rowCache;
    }
} 
```

然后我解析 XML 呈现 XLSX 文件

```
private List<String []> processFirstSheet(String filename) throws Exception {
    OPCPackage pkg = OPCPackage.open(filename, PackageAccess.READ);
    XSSFReader r = new XSSFReader(pkg);
    SharedStringsTable sst = r.getSharedStringsTable();

    SheetHandler handler = new SheetHandler(sst);
    XMLReader parser = fetchSheetParser(handler);
    Iterator<InputStream> sheetIterator = r.getSheetsData();

    if (!sheetIterator.hasNext()) {
        return Collections.emptyList();
    }

    InputStream sheetInputStream = sheetIterator.next();
    BufferedInputStream bisSheet = new BufferedInputStream(sheetInputStream);
    InputSource sheetSource = new InputSource(bisSheet);
    parser.parse(sheetSource);
    List<String []> res = handler.getRowCache();
    bisSheet.close();
    return res;
}

public XMLReader fetchSheetParser(ContentHandler handler) throws SAXException {
    XMLReader parser = new SAXParser();
    parser.setContentHandler(handler);
    return parser;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-14T17:13:49.623

基于从 poi 探索的 monitorjbl 的答案和测试套件，以下为我处理了具有 200K 记录（大小 > 50 MB）的多页 xlsx 文件：

```
import com.monitorjbl.xlsx.StreamingReader;
. . .
try (
        InputStream is = new FileInputStream(new File("sample.xlsx"));
        Workbook workbook = StreamingReader.builder().open(is);
) {
    DataFormatter dataFormatter = new DataFormatter();
    for (Sheet sheet : workbook) {
        System.out.println("Processing sheet: " + sheet.getSheetName());
        for (Row row : sheet) {
            for (Cell cell : row) {
                String value = dataFormatter.formatCellValue(cell);
            }
        }
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-07T12:53:57.940

对于最新的代码使用这个

```
 InputStream file = new FileInputStream(
                    new File("uploads/" + request.getSession().getAttribute("username") + "/" + userFile));
Workbook workbook = StreamingReader.builder().rowCacheSize(100) // number of rows to keep in memory
                    .bufferSize(4096) // index of sheet to use (defaults to 0)
                    .open(file); // InputStream or File for XLSX file (required)

Iterator<Row> rowIterator = workbook.getSheetAt(0).rowIterator();
 while (rowIterator.hasNext()) {
     while (cellIterator.hasNext()) {
         Cell cell = cellIterator.next();
        String cellValue = dataFormatter.formatCellValue(cell);
     }} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-01-19T19:57:39.710

您可以使用 SXXSF 而不是使用 HSSF。我可以生成 200000 行的 excel。

# actionscript-3 - 如何在数据生成模式下使用 NetStream 循环播放视频

> ID：11891852
> 
> 赞同：2
> 
> 时间：2012-08-09T20:58:37.457
> 
> 标签：actionscript-3, flash, apache-flex, netstream

我在数据生成模式下使用 NetStream 使用 appendBytes 播放嵌入的 FLV。流播放完毕后，我想循环播放 FLV 文件。我不确定如何实现这一目标。这是我到目前为止所拥有的（这不是一个完整的例子）：

```
 public function createBorderAnimation():void
        {
            // Load the skin image
            borderAnimation = Assets.BorderAnimation;

            // Convert the animation to a byte array
            borderAnimationBytes = new borderAnimation();

            // Initialize the net connection
            border_nc = new NetConnection();
            border_nc.connect( null );

            // Initialize the net stream
            border_ns = new NetStream( border_nc );
            border_ns.client = { onMetaData:function( obj:Object ):void{ trace(obj); } }
            border_ns.addEventListener( NetStatusEvent.NET_STATUS, border_netStatusHandler );
            border_ns.play( null );
            border_ns.appendBytes( borderAnimationBytes );

            // Initialize the animation
            border_vd = new Video( 1024, 768 );
            border_vd.attachNetStream( border_ns );

            // Add the animation to the stage
            ui = new UIComponent();
            ui.addChild( DisplayObject( border_vd ) );
            grpBackground.addElement( ui );             
        }

        protected function border_netStatusHandler( event:NetStatusEvent ):void
        {
            if( event.info.code == "NetStream.Buffer.Flush" || event.info.code == "NetStream.Buffer.Empty" )
            {
                border_ns.appendBytesAction( NetStreamAppendBytesAction.RESET_BEGIN );
                border_ns.appendBytes( borderAnimationBytes );
                border_ns.appendBytesAction( NetStreamAppendBytesAction.END_SEQUENCE );
            }
        } 
```

这将循环动画，但它开始疯狂地消耗内存。我尝试过使用 NetStream.seek(0) 和 NetStream.appendBytesAction( NetStreamAppendBytesAction.RESET_SEEK )，但是我不确定下一步该做什么。如果您只是尝试在此之后再次调用 appendBytes，它就不起作用，大概是因为我正在附加具有 FLV 标头和内容的完整字节数组？我不是很熟悉这一切是如何运作的。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T17:11:21.110

**[Edit]**

Initially I didn't see a memory problem with your code. However, the example app I was using (below) only listens for the `NetStream.Buffer.Empty` message from the `NetStatusEvent`. It does not listen for the `NetStream.Buffer.Flush` message. I just tried listening for both, as in your example, and the app goes haywire :)

The code below also shows how to use `seek(0)` to restart playback with `appendBytes()`. To make that work, you need to wait for `NetStream.Seek.Notify` from the `NetStatusEvent`, then append the bytes.

I also restarted playback without using `seek(0)` (the commented out line), and memory usage was fine.

I am using Mac OS X and measured memory with the `top` command and Activity Monitor. Activity Monitor's virtual memory stats fluctuated considerably, but nothing like a memory leak.

```
package
{
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.NetStatusEvent;
    import flash.media.Video;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.net.NetStreamAppendBytesAction;
    import flash.utils.ByteArray;

    public class LoopEmbedFLV extends Sprite
    {

        [Embed(source="woot.flv",mimeType="application/octet-stream")]
        private var flv:Class;

        private var bytes:ByteArray;
        private var nc:NetConnection;
        private var ns:NetStream;
        private var video:Video;

        public function LoopEmbedFLV()
        {
            super();
            stage.scaleMode=StageScaleMode.NO_SCALE;
            stage.align=StageAlign.TOP_LEFT;
            bytes = new flv();
            nc=new NetConnection();
            nc.connect(null);
            ns=new NetStream(nc);
            video=new Video();
            addChild(video);
            video.attachNetStream(ns);
            ns.client = { onMetaData: function():void { } };
            ns.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
            ns.play(null);
            ns.appendBytes(bytes);
        }

        private function onNetStatus(event:NetStatusEvent):void
        {
            var code:String=event.info.code;
            trace(code);
            switch(code)
            {
                case "NetStream.Buffer.Empty":
                    ns.seek(0);
//                  seekToBeginning();
                    break;
                case "NetStream.Seek.Notify":
                    var seekPoint:Number = event.info.seekPoint;
                    trace("seeking to: ", seekPoint);
                    seekPoint == 0 ? seekToBeginning() : seekToOffset(seekPoint);
                    break;
            }
        }

        private function seekToBeginning():void
        {
            ns.appendBytesAction(NetStreamAppendBytesAction.RESET_BEGIN);
            ns.appendBytes(bytes);
            ns.appendBytesAction(NetStreamAppendBytesAction.END_SEQUENCE);
        }
        private function seekToOffset(seekPoint:Number):void
        {
            ns.appendBytesAction(NetStreamAppendBytesAction.RESET_SEEK);
            // todo
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-09T13:59:36.463

```
package {

    import flash.display.MovieClip;
    import flash.events.AsyncErrorEvent;
    import flash.events.IOErrorEvent;
    import flash.events.NetStatusEvent;
    import flash.media.Video;
    import flash.net.NetConnection;
    import flash.net.NetStream;
    import flash.utils.ByteArray;

    public class VideoPlayer extends MovieClip {

        /** Проиграть массив данныx <b>byteArray</b> (flv) в видеоконтейнере <b>video</b>. Проигрывается 1 + n раз, при n >= 0 и infinity при n < 0
         * 
         * @param video - видеоконтейнер
         * @param fileArray - массив данныx (flv) 
         * @param repeat - количество повторений видеоролика (-1 - бесконечный цикл, 0 - проиграть без повторений, (n > 0) - n повторений)
         * 
         */     
        public static function playVideo(video:Video, byteArray:ByteArray, repeat:int = -1):void {
            var netConnection:NetConnection;
            var netStream:NetStream;
            var repeatCount:int = 0;

            var netStream_Status_Handler:Function = function(event:NetStatusEvent):void {
                switch(event.info.code || "") {
                    case 'NetStream.Buffer.Empty': {
                        update();
                    }
                    default: {
                        break;
                    }
                }
            }

            var netStream_IOError_Handler:Function = function(event:AsyncErrorEvent):void {

            }

            var netConnection_Status_Handler:Function = function(event:NetStatusEvent):void {
                switch(event.info.code || "") {
                    case 'NetConnection.Connect.Success': {
                        update();
                        break;
                    }

                    default: {
                        break;
                    }
                }
            }

            var update:Function = function():void {
                if(repeat > -1 && repeat < repeatCount) {
                    return;
                }

                repeatCount++;

                try {
                    if(netStream) {
                        netStream.close();
                        if(netStream.hasOwnProperty("dispose")) { // совместимость с fla|as3
                            netStream["dispose"]();
                        }
                        netStream = null;
                    }

                    netStream = new NetStream(netConnection);
                    netStream.addEventListener(NetStatusEvent.NET_STATUS, netStream_Status_Handler);
                    netStream.addEventListener(IOErrorEvent.IO_ERROR, netStream_IOError_Handler);
                    netStream.client = {};
                    netStream.play(null);
                    netStream["appendBytes"](byteArray); // совместимость с fla|as3

                    video.attachNetStream(netStream); 
                } catch(error:Error) {

                }
            }

            var netConnection_AsyncError_Handler:Function = function(event:AsyncErrorEvent):void {

            }

            var netConnection_IOError_Handler:Function = function(event:AsyncErrorEvent):void {

            }

            netConnection = new NetConnection();
            netConnection.addEventListener(NetStatusEvent.NET_STATUS , netConnection_Status_Handler);
            netConnection.addEventListener(AsyncErrorEvent.ASYNC_ERROR , netConnection_AsyncError_Handler);
            netConnection.addEventListener(IOErrorEvent.IO_ERROR , netConnection_IOError_Handler);
            netConnection.connect(null);
        }

    }
} 
```

# delphi - Delphi 5.0 开始和结束标签 - 通过键盘快捷键在编辑器中导航

> ID：11891862
> 
> 赞同：0
> 
> 时间：2012-08-09T20:59:28.423
> 
> 标签：delphi, delphi-5

我正在使用 delphi 5.0 IDE 和 Delphi 代码。如何导航到块的末尾？在 Eclipse 中，我们有 ctrl+Shift+P。非常感谢任何见解！

# c# - 组合框选择的索引错误

> ID：11891871
> 
> 赞同：2
> 
> 时间：2012-08-09T21:00:15.637
> 
> 标签：c#, wpf

我有一个调用和加载我的组合框的方法。拨打电话后，我将“全部”添加到组合框中的第一位。不幸的是，当它被添加到列表中时，“All”的索引为 0，这会搞砸一切。selectedindex 应该是表中的“a”。有没有办法将“全部”设置为 -1 作为索引？将“a”作为索引 0 而不是索引 1 的最佳方法可能是什么？

```
private void Load()
{
    List<string> all = dataSource.GetAll();

    if (all.Count > 1)
    {
        cbAll.Items.Clear();
        cbAll.BeginUpdate();

            cbAll.Items.Add("All");

            foreach (var item in all)
            {
                cbAll.Items.Add(item);
            }
            cbAll.SelectedIndex = 0;
    }
} 
```

表 ITEM 结果

```
0 -- a
1 -- b
2 -- c
3 -- d 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T22:21:32.440

不要依赖于选定的索引，将 ItemsSource 绑定到 an`ObservableCollection<T>`并将 SelectedItem 绑定到 type 的属性`T`并使用绑定属性来读取选择。

如果您需要显示值与所选值不同，则将它们包装在一个小类中：

```
public class Item
{
  public int Code { get; set; }
  public string Display { get; set; }
} 
```

然后您的 ItemsSource 绑定到一个属性：

```
public ObservableCollection<Item> Items { get; set; }

public int Selection { get; set; } 
```

您的 DisplayMemberPath 将是**Display**

您的 SelectedValuePath 将是**代码**

您的 CombobBox 的 Xaml 将如下所示：

```
<ComboBox 
          ItemsSource="{Binding Path=Items}" 
          DisplayMemberPath="Display" 
          SelectedValuePath="Code" 
          SelectedValue="{Binding Path=Selection}"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T21:10:06.063

组合框中项目的索引从零开始，因此您无法在“-1”处添加项目。“-1”的选定索引意味着您没有选择任何项目。

请参阅[http://msdn.microsoft.com/en-US/library/system.windows.controls.primitives.selector.selectedindex.aspx](http://msdn.microsoft.com/en-US/library/system.windows.controls.primitives.selector.selectedindex.aspx)

> 获取或设置当前选择中第一项的索引，如果选择为空，则返回负数 (-1)。
> 
> ...
> 
> 在支持多选的 Selector 中设置 SelectedIndex 会清除现有的选中项，并将选择项设置为索引指定的项。如果选择为空，SelectedIndex 返回 -1。
> 
> 如果将 SelectedIndex 设置为小于 -1 的值，则会引发 ArgumentException。如果将 SelectedIndex 设置为等于或大于子元素数量的值，则忽略该值。

# scala - 为什么 List[Int].apply(1,2,3) 在 Scala 中会出错？

> ID：11891872
> 
> 赞同：2
> 
> 时间：2012-08-09T21:00:16.020
> 
> 标签：scala

我是 Scala 的新手，来自 python，并试图围绕一些语法和约定。我很好奇为什么以下不起作用：

```
scala> val tmp = List[Int].apply(1,2,3)
<console>:7: error: missing arguments for method apply in object List;
follow this method with `_' if you want to treat it as a partially applied function
    val tmp = List[Int].apply(1,2,3) 
```

然而，当我执行以下操作时，我没有收到任何错误：

```
scala> val tmp = List.apply(1,2,3)
tmp: List[Int] = List(1,2,3)

scala> val tmp = List[Int](1,2,3)
tmp: List[Int] = List(1,2,3) 
```

为什么`List[Int].apply()`给我一个错误？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T21:02:11.200

因为你的语法是错误的。如果你想要 的等价物`List.apply(1,2,3)`，那么它应该是：

```
val tmp = List.apply[Int](1,2,3) 
```

在表达式`List.apply(1,2,3)`中，`List`引用的是伴随对象，对象不能有泛型。因此，您必须将泛型放在方法上。

作为参考，您可以在以下源代码中看到`List`：

```
object List extends SeqFactory[List] {
  ...
  override def apply[A](xs: A*): List[A] = xs.toList 
```

当您编写时`List[Int].apply(1,2,3)`，Scala 将其解释为`(List[Int]).apply(1,2,3)`. And`List[Int]`被解释为好像`List[Int]()`没有括号，相当于`List.apply[Int]`. 由于`apply`需要一个参数，Scala 会给你一个错误，告诉你它丢失了。

# c# - 当用户连接到集线器类时，公共任务连接（）不会触发

> ID：11891873
> 
> 赞同：1
> 
> 时间：2012-08-09T21:00:16.950
> 
> 标签：c#, javascript, jquery, asp.net, signalr

我有以下集线器类：

```
public class Dashboard : Hub, IDisconnect, IConnected
    {
        //Initialize Repoisotries 
        private IProfileRepository profileRepository;
        private ISiteDataRepository siteDataRepository;
        private readonly IHubContext matchContext = GlobalHost.ConnectionManager.GetHubContext<MatchMaker>();

    //Constructor Injection for profile repository and site data repository
    public Dashboard(IProfileRepository repo, ISiteDataRepository siteRepo)
    {            
        profileRepository = repo;
        siteDataRepository = siteRepo;            
    }
    public Task Disconnect()
    {
        return null;
    }
    public Task Reconnect(IEnumerable<string> connections)
    {
        return null;
    }
    public Task Connect()
    {
        Debug.WriteLine(MatchMaker.onlineUsers.Count);
        return null;
    }
    public void GetUserInfo()
    {
        Debug.WriteLine(MatchMaker.onlineUsers.Count);
    }
} 
```

}

我的信号器包括：

```
<script src="@Url.Content("~/signalr/hubs")" type="text/javascript"></script> 
```

我像这样访问它：

```
$(function () {
    //Create the proxy
    var Dashboard = $.connection.dashboard;
    $.connection.hub.start(function () {
        Dashboard.getUserInfo();

    });
}); 
```

当我调用`Dashboard.getUserInfo()`该方法时，该方法被称为 find，但该`Connect()`方法一开始就不会触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:09:48.737

我发现出了什么问题......只要我添加了这样的方法：

```
$(function () {
//Create the proxy
var Dashboard = $.connection.dashboard;

Dashboard.someMethod = function(message){
}

$.connection.hub.start(function () {
    Dashboard.getUserInfo();

});
}); 
```

我的`Connect()`功能开始触发，不知道您需要一个客户端功能来激活连接。

# java - 为什么在关闭移动设备时输入 OnCreate()？

> ID：11891878
> 
> 赞同：3
> 
> 时间：2012-08-09T21:00:33.580
> 
> 标签：java, android, api, android-activity

我编写了我的第一个 Android 应用程序，并且对 Android 开发（以及 Java）非常陌生。我有 PreferenceActivity 并注意到当显示活动并关闭移动设备时，它的 onCreate() 再次被调用。更令人困惑的是静态成员`MyFirstAppActivity.camera`不再存在导致异常。我可以在那里检查 null 但我想知道为什么会发生这种情况以及避免它的最佳方法是什么？

```
public class SettingsActivity extends PreferenceActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

     // Root
        addPreferencesFromResource(R.xml.preferences);

        // get list of available resolutions

        Object[] previewSizes = MyFirstAppActivity.camera.getParameters()
                .getSupportedPreviewSizes().toArray();

        // split object properties into two arrays

        String[] ps=new String[previewSizes.length];

        for(int i=0;i<previewSizes.length;i++)
        {
            try
            {
                int width=((Size)previewSizes[i]).width;
                int height=((Size)previewSizes[i]).height;
                ps[i]=width+"x"+height;
            }
            catch(Exception ex)
            {}
        }

        // get list of available resolutions

        Object[] recordingSizes = MyFirstAppActivity.camera.getParameters()
                .getSupportedPictureSizes().toArray();

        // split object properties into two arrays

        String[] rs=new String[recordingSizes.length];

        for(int i=0;i<recordingSizes.length;i++)
        {
            try
            {
                int width=((Size)recordingSizes[i]).width;
                int height=((Size)recordingSizes[i]).height;
                rs[i]=width+"x"+height;
            }
            catch(Exception ex)
            {}
        }

        Preference prefPreviewSizes = getPreferenceManager().findPreference("previewSizes");
        Preference prefRecordingSizes = getPreferenceManager().findPreference("recordingSizes");

        ((ListPreference) prefPreviewSizes).setEntries(ps);
        ((ListPreference) prefRecordingSizes).setEntries(rs);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:28:35.113

您可能需要检查[Android 的生命周期](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)信息。

为了让事情变得更好，您应该实现`onPause`and `onResume`，因为每次您更改 Activity 或旋转手机时都会调用它们。我认为关闭手机意味着将其锁定而不是关闭电源。在这种情况下，`onCreate`可能会调用它，因为您的手机正在清理 Activity 堆栈以节省电池。

在任何情况下，您都应该将所有事件侦听器添加到`onCreate`方法中，但是与显示的信息相关的任何内容都可以进入`onResume`（并且您应该在 期间保存任何信息或状态`onPause`）。这样，每当您的应用程序状态发生变化时，您的界面总是会显示新的数据。（默认情况下，EditText 和任何标准小部件存储其当前状态，但应仔细考虑与此不同的任何内容）。你可以把那个相机放在里面。

PS：我不确定这是否有帮助，但您可能希望将该`camera`变量放在另一个类中，可能是[Singleton](http://es.wikipedia.org/wiki/Singleton#Java)。在一个 Activity 中存储与多个 Activity 相关的信息在 Android 环境中可能看起来很奇怪。使用 Singleton，您可以确保您`camera`始终可以访问，无论您在哪里调用它（您仍然需要第一次初始化它）。您还可以扩展一个包含对相机的引用的基本活动，因此任何需要此变量的活动都可以直接访问它（但是，这会稍微增加应用程序的处理）。我重复一遍：这只是关于我如何面对这个变量的一些建议，它们不一定能帮助你解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:16:41.730

每当发生某种状态更改（例如，关闭或旋转屏幕）时，`onCreate`都会调用该方法。

我很确定您应该做的是覆盖该 [`onSaveInstanceState`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)方法并将数据保存到它的`outState`Bundle 中，然后将其`onCreate`作为`savedInstanceState`Bundle 传递给它。

有关更多信息，请查看 Android 开发者中心的“[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)”。

您可以通过在创建它之前检查它是否存在来防止您的相机引起异常，例如

```
if(MyFirstAppActivity.camera == null)
    MyFirstAppActivity.camera = new Camera(...); 
```

或者只是创建它的一个新实例`onCreate`

# vb.net - 在 Visual Basic 中从 Javascript 中检索字符串

> ID：11891879
> 
> 赞同：0
> 
> 时间：2012-08-09T21:00:39.873
> 
> 标签：vb.net, pandora

好的，所以我正在开发一个可视化的基本程序，它允许我通过热键控制潘多拉，而不必直接访问该站点并按下按钮等。

对于我的问题，有没有办法可以访问网站上的 javascript 变量来获取歌曲名称和经过的时间等？（我对 Visual Basic 还很陌生）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T22:32:38.807

损害，

我会尝试的一个攻击角度是将 Pandora 加载到 winform 内的 WebBrowser 控件中，然后执行以下操作：

```
Private Sub GetFrames()
'Purpose: searches all frames in the document(s) and adds them to colDocuments

Dim i As Integer, j As Integer
j = 1

Set colDocuments = New Collection
colDocuments.Add WebBrowser1.Document

Do While j < colDocuments.Count + 1
    For i = 0 To colDocuments.Item(j).frames.length - 1
        colDocuments.Add colDocuments.Item(j).frames.Item(i).Document
    Next i
    j = j + 1
Loop
End Sub 
```

然后跟进：

```
colDocuments(3).getElementsByName("TD").Item(10).Click 
```

colDocuments 对象中的“3”将是您要单击的目标“播放”、“暂停”等。然后，您可以将所需的快捷键绑定到您在 winform 中创建的任何按钮。希望这能让你朝着正确的方向前进！！单击源以查看我从何处获得此代码：感谢 vbforums.com 上的 TheVader。

[资源](http://www.vbforums.com/showthread.php?334773-WebBrowser-Click-Button-%28JavaScript%29-Resolved)

# javascript - Javascript显示/隐藏正确的div

> ID：11891882
> 
> 赞同：1
> 
> 时间：2012-08-09T21:00:46.613
> 
> 标签：javascript, jquery, asp-classic

我有一个包含 3 个项目的下拉页面：

```
<select name="orderOption" id="orderOption">
<option value="1">Item 1</option>
<option value="2">Item 2</option>
<option value="3">Item 3</option> 
</select> 
```

目前有 Javascript 可以根据该选择显示或隐藏具有适当类的 div。

```
function orderOptionChanged() {
        var e = document.getElementById("orderOption");
        var orderOption = e.options[e.selectedIndex].value;

        if (orderOption == "1") {
            $('.OrderOption1').show();
            $('.OrderOption2,.OrderOption3,').hide();
        } 
```

这仅适用于其中 3 个，但现在他们需要 25 个。我需要一种方法来只选择一个选项，而不必全部写出来。我以前从未使用过 Javascript，所以这对我来说是全新的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:02:41.787

```
var orderOption = e.options[e.selectedIndex].value;
$('*[class^="OrderOption"]').hide();
$('.OrderOption'+orderOption).show(); 
```

您还可以为它们分配一个基类，并使用它来调用`.hide()`，因为当前方法必须遍历所有元素并检查它们的类。

`class^="OrderOption"`- 此行选择所有具有“以 OrderOption 开头”类的元素。

`'.OrderOption'+orderOption`- 然后我们将上面的值附加到另一个选择器上以选择合适的`OrderOption`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:04:46.287

试试这个

```
function orderOptionChanged() {
        var e = document.getElementById("orderOption");
        var orderOption = e.options[e.selectedIndex].value;    
        $('#orderOption option').hide();
        $('.OrderOption'+orderOption).show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:07:07.380

对您的 div 进行排序，以便它们以与其相应选项相同的顺序出现。给他们上同一堂课。将它们全部隐藏，然后显示与所选选项对应的选项：

```
$("#orderOption").change(function () {
    $(".orderOption").hide().eq(this.selectedIndex).show();
}); 
```

**工作演示：http:** [//jsfiddle.net/mXc93/](http://jsfiddle.net/mXc93/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:08:35.977

```
function orderOptionChanged() {
    var e = $("#orderOption");
    var orderOption = e.val();
    var option = $('.OrderOption'+orderOption);

    option.show();
    $('[class^=OrderOption]').not(option).hide();
} 
```

# selenium-webdriver - Webdriver findElement 在 32 位 IE 浏览器上失败

> ID：11891885
> 
> 赞同：2
> 
> 时间：2012-08-09T21:00:56.493
> 
> 标签：selenium-webdriver, selenium-grid

我在 Windows XP 上使用最新的 Selenium 代码，2.25 IEDriver 2.25.2 32 位，IE 8 32 位。使用下面的简单代码清单，我永远不会找到“找到的元素！！” 如果我使用 InternetExplorerDriver。它打开页面，读取页面标题，但 findElement 调用失败。如果我换成 FirefoxDriver 就可以了。我已经能够通过集线器让 IE 9 64 位在远程 PC 上工作（取消注释前两行并注释掉两个 WebDriver 行）。

不明白为什么 IE 32 位会失败。

============================================

```
package com.company.test;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.RemoteWebDriver;

public class App 
{
    public static void main( String[] args ) throws InterruptedException, MalformedURLException
    {
        // Grid driver
//        DesiredCapabilities capabilities = DesiredCapabilities.internetExplorer();
//        WebDriver driver = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), capabilities);

        // Local driver
//        WebDriver driver = new FirefoxDriver();

        WebDriver driver = new InternetExplorerDriver();
        try {
            driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
            driver.get("http://seleniumhq.org/");
            String pageTitle = driver.getTitle();
            System.out.println("pageTitle=" + pageTitle);
            driver.findElement(By.id("q")).clear();
            System.out.println("Found element!!");
            driver.findElement(By.id("q")).sendKeys("test");
            driver.findElement(By.id("submit")).click();
        } finally {
            driver.quit();
        }
        System.out.println("Done");
    }
} 
```

==================================================== ==========

我能够让 IEDriver 生成 TRACE 日志这是感兴趣的片段：

```
T 2012-08-09 16:04:09:516 IECommandExecutor.cpp(604) Entering IECommandExecutor::LocateElement
T 2012-08-09 16:04:09:516 IECommandExecutor.cpp(587) Entering IECommandExecutor::GetElementFindMethod
T 2012-08-09 16:04:09:516 ElementFinder.cpp(33) Entering ElmentFinder::FindElement
T 2012-08-09 16:04:09:516 IECommandExecutor.cpp(439) Entering IECommandExecutor::GetCurrentBrowser
T 2012-08-09 16:04:09:516 IECommandExecutor.cpp(445) Entering IECommandExecutor::GetManagedBrowser
T 2012-08-09 16:04:09:516 ElementFinder.cpp(468) Entering ElementFinder::SanitizeCriteria
T 2012-08-09 16:04:09:516 ElementFinder.cpp(479) Entering ElementFinder::ReplaceAllSubstrings
T 2012-08-09 16:04:09:516 ElementFinder.cpp(479) Entering ElementFinder::ReplaceAllSubstrings
T 2012-08-09 16:04:09:516 Browser.cpp(91) Entering Browser::GetDocument
I 2012-08-09 16:04:09:516 Browser.cpp(95) No child frame focus. Focus is on top-level frame
T 2012-08-09 16:04:09:516 IECommandExecutor.cpp(187) Entering IECommandExecutor::OnGetResponseLength
T 2012-08-09 16:04:09:532 IECommandExecutor.cpp(187) Entering IECommandExecutor::OnGetResponseLength
T 2012-08-09 16:04:09:532 Browser.cpp(451) Entering Browser::GetDocumentFromWindow
T 2012-08-09 16:04:09:532 Script.cpp(40) Entering Script::Initialize
T 2012-08-09 16:04:09:532 Script.cpp(210) Entering Script::Execute
T 2012-08-09 16:04:09:532 Script.cpp(577) Entering Script::CreateAnonymousFunction
T 2012-08-09 16:04:09:547 IECommandExecutor.cpp(187) Entering IECommandExecutor::OnGetResponseLength
W 2012-08-09 16:04:09:547 Script.cpp(594) -2147024891 [Access is denied.]: Unable to execute code, call to IHTMLWindow2::execScript failed
W 2012-08-09 16:04:09:547 Script.cpp(221) Cannot create anonymous function
W 2012-08-09 16:04:09:547 ElementFinder.cpp(86) Unable to create criteria object for mechanism 00FBA030 and criteria00FB9FB0 
```

我相信问题出在上面红色突出显示的部分，但我不知道如何解决这个问题。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T21:32:48.007

检查您的浏览器安全设置以确保启用了活动脚本。要在 IE9 中启用，请执行以下操作： 1\. 单击“工具”图标。（工具图标在 IE9 的右上角，或者工具也可以在菜单栏上作为“工具”找到）。2\. 然后点击 -> Internet 选项” -> 安全选项卡 -> 自定义级别按钮 -> 滚动到靠近底部的“脚本”部分，然后在“活动脚本”下选择启用。 3\. 点击确定。

# c# - 计算二维有符号距离场

> ID：11891887
> 
> 赞同：12
> 
> 时间：2012-08-09T21:00:57.627
> 
> 标签：c#, .net, math, 2d, distance

我正在尝试计算黑白图像像素的有符号距离场，但我想我已经设法在某个地方弄错了我的代码。因为这是我的输入和输出：

输入

![输入](../Images/2f9334a9d3efcc65a9c829e81ee7f63a.png)

输出

![输出](../Images/5c46c5d9e6ad09b6db53503538aa805e.png)

我遇到的问题是 S 中间的黑线，我的理解让我相信它应该是完全浅灰色的？

这是我正在使用的代码：

```
 for (int x = 0; x < source.width; ++x)
    {
        for(int y = 0; y < source.height; ++y) 
        {
            // Get pixel
            float a = source.GetPixel(x, y).r;

            // Distance to closest pixel which is the inverse of a
            // start on float.MaxValue so we can be sure we found something
            float distance = float.MaxValue;

            // Search coordinates, x min/max and y min/max
            int fxMin = Math.Max(x - searchDistance, 0);
            int fxMax = Math.Min(x + searchDistance, source.width);
            int fyMin = Math.Max(y - searchDistance, 0);
            int fyMax = Math.Min(y + searchDistance, source.height);

            for (int fx = fxMin; fx < fxMax; ++fx)
            {
                for (int fy = fyMin; fy < fyMax; ++fy)
                {
                    // Get pixel to compare to
                    float p = source.GetPixel(fx, fy).r;

                    // If not equal a
                    if (a != p)
                    {
                        // Calculate distance
                        float xd = x - fx;
                        float yd = y - fy;
                        float d = Math.Sqrt((xd * xd) + (yd * yd));

                        // Compare absolute distance values, and if smaller replace distnace with the new oe
                        if (Math.Abs(d) < Math.Abs(distance))
                        {
                            distance = d;
                        }
                    }
                }
            }

            // If we found a new distance, otherwise we'll just use A 

            if (distance != float.MaxValue)
            {

                // Clamp distance to -/+ 
                distance = Math.Clamp(distance, -searchDistance, +searchDistance);

                // Convert from -search,+search to 0,+search*2 and then convert to 0.0, 1.0 and invert
                a = 1f - Math.Clamp((distance + searchDistance) / (searchDistance + searchDistance), 0, 1);
            }

            // Write pixel out
            target.SetPixel(x, y, new Color(a, a, a, 1));
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:30:31.330

你的罪魁祸首是这个条件语句：

```
// If not equal a
if (a != p)
{ 
```

这意味着您只对从黑色像素到白色像素的最短距离感兴趣，或者如果“a”是白色，那么您正在寻找最近的黑色像素。

如果您将该测试更改为仅查看：

```
if ( p == white )
{ 
```

然后你可能会得到你所期望的。

（我没有对此进行测试，所以希望它是正确的）。

（另外，如果它不正确，最好发布您的 Math.Clamp 方法，因为它不是 Math 类中的内置库方法。）

最后一件事，不确定算法是否希望您将像素与其自身进行比较，因此您可能需要在嵌套的 for 循环中考虑这一点。

（基本上，您希望输出看起来像中间有一个白色像素的全黑图像？中间像素的输出应该是黑色的，因为附近没有白色像素，还是应该是白色的。）

# jenkins - 不应该使用 Artifactory 来捕获 Jenkins 生成的构建工件吗？

> ID：11891890
> 
> 赞同：3
> 
> 时间：2012-08-09T21:01:36.537
> 
> 标签：jenkins, artifactory

我们使用 Jenkins 来运行持续集成构建。这些构建的输出可能是一个 EAR 文件、一个 WAR 文件或一组经过 TAR 处理并部署到上游环境的文件。

至此，我们已经使用 Jenkins 来管理生成的工件。但是，我们在内部部署了 Artifactory。利用 Artifactory 捕获生成的工件会是一个坏主意吗？如果是这样，为什么？例如，Artifactory 是否仅用于保存具有可以在构建时使用 Maven 拉入项目中的版本的 JAR，而不是用于捕获持续集成工具使用的工件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T23:42:26.473

我不这么认为。下图来自 sonatype 网站：

![在此处输入图像描述](../Images/04c14748cd90e7464d0da15b9d9f9569.png)

演示 Maven 存储库管理器如何成为部署过程的平台

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-10T05:15:25.047

Artifactory（或任何二进制存储库管理器）***应该***与您的 CI 服务器一起使用。甚至还有一个[插件](https://wiki.jenkins-ci.org/display/JENKINS/Artifactory+Plugin)。

维护二进制存储库管理器优于其他解决方案（网络共享、SCM）的原因很明显：

1.  为二进制文件量身定制。
2.  高效的。
3.  安全的。
4.  用于分发的单一可控网关。

还有很多。

因此，您使用二进制存储库管理器来控制您的依赖关系并解决您的工件，但为什么要停在那里呢？你的整个周期都有二进制文件：

1.  构建环境的二进制文件。
2.  构建过程所需的二进制文件。
3.  CI 期间生成的二进制文件。
4.  应分发的已发布二进制文件。

二进制存储库管理器是保存它们的最安全、最有效和最自然的地方。将所有二进制文件保存在一个地方意味着更少的维护和更高的构建可重复性。

# java - Java - 实现另一个类并修改方法

> ID：11891893
> 
> 赞同：2
> 
> 时间：2012-08-09T21:01:45.397
> 
> 标签：java

到目前为止我已经这样做了，但是在 b 部分有困难。这是一份模拟试卷，b 部分的其余部分不确定。

Q) 总结由 给出的序列的元素`s.valAtIndex(i)`。s 是 Seq 类型。Seq 是一个具有方法的接口`valAtIndex (integer parameter and double result)`。

(a) 编写接口 Seq。

(b) 写一个 Geometric 类，实现 Seq. 因此每个实例 s 表示如下的几何级数 `s.valAtIndex(0), s.valAtIndex(0)`...使得第 i 个元素`s.valAtIndex(i)`等于底 b 的第 i 次幂，即 b^i。（回想一下 b^0=1）

（一个）

```
public interface Seq{

public double valAtIndex(int i);
} 
```

(二)

```
public Geometric implements Seq{

Seq s;
private double b;

public Geometric(double a){

s = new Geometric(a);
this.b=a;
}

@Override
public double valAtIndex(int i){

return 0;//not sure how to do this method

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T21:05:17.697

你的意思是这样的：

```
@Override
public double valAtIndex(int i) {
    return Math.pow(b, i);
} 
```

?

编辑：另外，正如其他答案中提到的，`Seq s;`在构造函数中删除和有关它的行。最后你应该拥有的是：

```
public class Geometric implements Seq {
    private double b;

    public Geometric(double a) {
        this.b=a;
    }

    @Override
    public double valAtIndex(int i){
        return Math.pow(b, i);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:08:46.240

第一的，

```
@Override
public double valAtIndex(int i) {
    return Math.pow(b, i);
} 
```

这将使 b 返回 i 的幂。

但是，您的代码会导致堆栈溢出异常。您在构造函数内部调用几何构造函数。导致对构造函数的连续调用和异常。

您需要将构造函数更改为

```
public Geometric(double a) {
    this.b = a;
} 
```

此外，您需要将其声明`class Geometric`为`public Geometric`

# python - 异步 CLI 输出

> ID：11891897
> 
> 赞同：0
> 
> 时间：2012-08-09T21:01:59.540
> 
> 标签：python, asynchronous, cmd, rabbitmq

所以我正在编写这个基于 python RabbitMQ 的工具，`cmd`用于 CLI 接口，它通过向相应服务器上的客户端发送消息并获取带有数据集的消息来查询远程数据库（一些查询可能需要很长时间和它需要是异步的）。

语法示例如下：

```
CLI> get host=myhost.com fact=cpunumber 
```

此命令将创建一条消息给 X 客户端以获取数据。

现在，我正在努力使用一种方法来显示查询结果，以使输出不会混乱。响应数据集消息到达后立即显示结果似乎是一种糟糕的 UEX 方法。

任何人都实施过类似的东西并愿意分享方法吗？

我知道这不是一个非常具体的问题，但也许会有一些指向可以在这种情况下使用的文本模式格式化库的指针。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:08:22.167

由于这个问题没有“好的答案”，我将就这个问题分享我的想法。

我不知道为什么你觉得数据一到就打印是不好的设计——即时性让人放心，因为它让你知道某些东西正在工作。

另一方面，如果输出看起来很乱，您可能需要引入一些顺序。众所周知，使用一些明显的标准排序的数据更清晰。更重要的是——即使是伪造的数据，在排序后看起来也更正确。;)

使用您的示例，我将尝试按主机名或给定事实的值对其进行排序（在您的情况下更有意义）。如果您知道数据点将是什么（例如，您查询已知主机的列表），那么您可以在输出记录到达时对其进行排序并打印已知完整/连贯的部分。

希望这可以帮助。

# awk - awk - 打印远离匹配字段的字段 n 个字段

> ID：11891898
> 
> 赞同：1
> 
> 时间：2012-08-09T21:02:03.740
> 
> 标签：awk

这完美地工作：

```
awk '{for (i=1;i<=NF;i++) if($i ~/mystring/) print $1, $i}' 
```

但我也想打印远离 $i 字段的第二个字段。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:04:57.750

相当简单:)

```
awk '{for (i=1;i<=NF;i++) if($i ~/mystring/) print $1, $i, $(i+2)}' 
```

# eclipse - 是否有 Eclipse 热键可以像浏览器切换选项卡一样切换选项卡？

> ID：11891900
> 
> 赞同：0
> 
> 时间：2012-08-09T21:02:07.870
> 
> 标签：eclipse, ide, tabs, hotkeys

换句话说，我想使用 CMD+2 直接从左侧切换到第二个选项卡，就像在 Firefox 和 Chrome 中一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:13:33.413

`CTRL`在 Eclipse 中，您可以使用命令+`Page Down`用于下一个选项卡和`CTRL`+用于返回选项卡之间切换`Page Up`。

目前无法切换到选项卡的索引

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T21:04:28.607

CTRL E 和 CTRL F6 只是我知道的

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T21:30:32.113

*   转到*窗口>首选项>常规>键*
*   在搜索字段中，输入“下一个选项卡”
*   在 Binding 字段中，您可以分配您想要的任何击键，但请确保并注意是否有任何冲突
*   再次搜索“上一个标签”
*   重新分配给绑定

# r - 如何在R语言中将全局地图覆盖在填充轮廓上

> ID：11891908
> 
> 赞同：2
> 
> 时间：2012-08-09T21:02:42.190
> 
> 标签：r, graphics, contour

我想在填充轮廓中绘制一些经纬度数据，然后在顶部覆盖全球地图。我正在尝试这样的事情：

```
filled.contour(lons, lats, glb.data,
plot.axes={axis(1);axis(2);map(projection='rectangular',parameters=0,add=T)}
) 
```

等高线绘制得很好，地图也显示出来了，但只是在等高线图的一小块区域中显示为一个非常小的黑色矩形。当然，我希望地图能够覆盖填充等高线图的整个区域。

我也尝试过类似的东西：

```
filled.contour(lons, lats, glb.data,
plot.axes={axis(1);axis(2);map(projection='rectangular',x=lons,y=lats,parameters=0,add=T)}
) 
```

在这种情况下，地图根本没有绘制，并且我收到一条错误消息“没有可绘制的内容：所有区域超出范围”人们显然一直都成功地做到了这一点，但我无法让它工作。谁能告诉我我做错了什么？顺便说一句，我不想​​使用 lattice 包。它不适用于我小组正在做的其他事情。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:41:07.357

好的。对于任何关心的人，我有一个答案。也许不是最好的答案，而是一个答案。问题是有两种常用的方式来表示纬度和经度：度数和弧度。还有第三种常用的表示经度的方式：本地时间，即时区时间一般化为浮点数。然后，为了让生活更有趣，经度通常被指定为 -180（东）到 180（西）或 0 到 360。

现在，当您尝试显示地图时，R 会根据地图包的内部结构自动选择显示的纬度单位。如果您在一组单位中工作，但 R 想要在另一组中显示地图，您会遇到麻烦。另一个问题是不同的地图投影要以不同的单位显示。正如我所发现的，“默认”投影喜欢度数；它希望显示在一个绘图矩形中，经度限制为 -180 到 180，纬度限制为 -90 到 90。但是，“矩形”投影虽然看起来很像默认投影，但它喜欢弧度；它希望显示在一个将 -pi 拉伸到 pi（经度）和 -pi/2 到 pi/2（纬度）的矩形中。 *这些绘图限制在 ?mapproject 中根本没有讨论。*

所以这就是你需要做的：1）确定你想要的地图投影，然后确定它的绘制范围：

```
> map(projection=foo,parameters=foo)
> par('usr')   # will return vector of plot limits 
```

2）知道你自己的数据所用的单位。如果你刚刚抓取了别人的数据集，你可能会在这里感到惊讶。

3）当你绘制......

```
filled.contour(lons, lats, glb.data) 
```

如果您的“lons”和“lats”的单位与您的投影预期的限制一致，那么您应该没问题，您应该能够简单地添加一张地图

```
filled.contour(lons, lats, glb.data,
plot.axes={axis(1,...);axis(2,...);map(projection=foo,parameters=foo,add=T)}) 
```

但是，如果您的 lons 和 lats*不是*投影所需的，那么您还有更多工作要做。您必须通过调用 par() 重新定义绘图的限制。这对我有用：

```
filled.contour(lons, lats, glb.data,
plot.axes={axis(1,...);axis(2,...);par(usr=c(-180,180,-90,90));
map(add=T)}) 
```

当我需要绘图左端的本初子午线时（即，x 轴上的经度从 0 到 360 增加）我对 par() 和 map() 进行了两次调用：

```
filled.contour(lons, lats, glb.data,
plot.axes={axis(1,...);axis(2,...);
par(usr=c(0,360,-90,90));map(add=T);  #eastern hemisphere
par(usr=c(-360,0,-90,90));map(add=T)}   #western
) 
```

还有一些其他的皱纹。（例如，“矩形”投影没有*精确*的 -pi 和 +pi 限制。）但是如果我到目前为止所说的有道理，那么您将能够处理它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T22:26:39.477

为什么不直接使用`image`？

```
image(lons, lats, glb.data)
library(maps)
map(add = TRUE) 
```

您从哪里得到尝试提出论点`map()`的想法？`plot.axes`

# windows - 如何调试 H264 DirectShow 过滤器？

> ID：11891910
> 
> 赞同：1
> 
> 时间：2012-08-09T21:02:52.913
> 
> 标签：windows, directshow, h.264, decoder

我正在开发一个 h264 directshow 过滤器。

我有一个有效的硬件源，可以正确输出 NAL 单元。我有一个 DirectShow 过滤器，它宣传 h264 并成功连接到默认的 windows 7 解码器 microsoft dtv-dvd 视频解码器。

当我将渲染器连接到解码器时，渲染器没有收到任何数据包，因此我假设解码器无法正确解码我的数据包。

[ h264 源 ] -> [ dtv-dvd 解码器 ] -> [ 增强型视频渲染器 ]

我有什么办法可以检查微软解码器失败的地方吗？

任何其他信息可能会有所帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T14:27:05.407

你遇到的困难是你没有 dtv-dvd 解码器的代码，使它有点像管道中的黑盒。您的 h264 源可以连接到 dtv-dvd 解码器这一事实意味着您在媒体格式协商方面有了一个良好的开端。为了更好地了解问题所在，我建议您将 dtv-dvd 解码器换成您拥有源代码的解码器，然后使用 GraphEdit 或类似工具之一调试您的管道。我一直在做同样的开发，发现一旦我让 h264 管道与一个解码器过滤器一起正常工作，它通常与其他 h264 解码器一起正常工作。

以下是一些包含源代码的选项：

*   [Intel Media SDK 2012](http://software.intel.com/en-us/articles/vcsource-tools-media-sdk/)包含一个示例 h264 解码器过滤器。

*   如果你有 Nvidia GPU，你可以试试这个开源的[CUDA 解码过滤器](http://code.google.com/p/cuda-decode-filter/)

另外，我发现 dtv-dvd 过滤器有点挑剔。使用以下二进制形式的解码器过滤器之一进行测试可能会有所帮助：

*   Nanocosmos 有一个非常不错的基于 directshow的“ [AVC/h264 解码器解码器 SDK ”。](http://www.nanocosmos.de/v3/order/demo.php)（免费评估）

*   “ [CoreCodec 的 CoreAVC](http://www.corecodec.com/products/coreavc) ”包括支持 CUDA 和 DXVA 的最快的 h264 解码器之一（商业 - 售价 12.95 美元）

*   MainConcept 的 h264 解码器过滤器可作为其“ [MainConcept Showcase](http://www.mainconcept.com/products/sdks/others/showcase.html) ”（免费评估）的一部分

# javascript - 由另一个变量引用变量名，或从变量中确定变量名

> ID：11891911
> 
> 赞同：1
> 
> 时间：2012-08-09T21:02:56.240
> 
> 标签：javascript

我有一个函数，它迭代一些对象，然后我想使用被迭代的对象的变量名。目前我维护一个重复的名称列表，并通过数组索引引用它们。这似乎是不必要的。整个东西都在一个外壳里。

原则上，我可以看到两种方法。

一种是使用名称列表，并以某种方式引用这样命名的变量，另一种是从变量本身（保存在数组中）以某种方式确定变量名称。

这是可能的，还是我应该寻找一种完全不同的方法？

```
(function(){

  var a = {p:true,b:true};
  var b = {em:true,i:true};
  var c = {h1:true,strong:true};

  var x = function(tagName){

    var typedefnames = ["a","b","c"]
    var typedefs = [a,b,c];

    var types = {}
    var i;

    for( i=0; i<typedefs.length; i++ )
      if( typedefs[i][ tagName ] )
        types[ typedefnames[i] ] = true
      else
        types[ typedefnames[i] ] = false

    return types; 

  }

  console.log(x("p"))
  // { a:true, b:false, c:false }

}()) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:57:59.003

你真的需要三个变量吗？我建议改用单个对象，它的键将扮演您当前变量名的角色：

```
(function(){
    var obj = {
        a : {p:true,b:true},
        b : {em:true,i:true},
        c : {h1:true,strong:true}
    };

    var x = function(tagName){
       var types = {}
       for(var key in obj) {
           types[key] = obj[key].hasOwnProperty(tagName) && obj[key][tagName] === true;
       }
       return types; 
    }
    console.log(x("p"));
}()); 
```

[http://jsfiddle.net/sKbPu/1/](http://jsfiddle.net/sKbPu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:21:51.197

如果你对物体有自由，你可以试试这个

```
(function(){
  var a = {name: 'a', tags: {p: true, b: true}};
  var b = {name: 'b', tags: {em: true, i: true}};
  var c = {name: 'c', tags: {h1: true, strong: true}};

  var x = function(tagName){
    var typedefs = [a, b, c];

    var types = {};

    for(var i=0; i<typedefs.length; i++ ) {
      if(typedefs[i].tags[tagName]) {
        types[typedefs[i].name] = true;
      }
      else {
        types[typedefs[i].name] = false;
      }
      //alternative way for setting true/false based on truthy value
      //types[typedefs[i].name] = !!typedefs[i].tags[tagName];
    } 

    return types; 
  }

  console.log(x("p"))
  // { a:true, b:false, c:false }
}()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T00:48:26.313

虽然对我来说并不完美（因为仍有少量重复），但我认为这可能是最干净的解决方案。

```
(function(){

  // leave these as they are as they can be used from many other parts of the code
  var a = {p:true,b:true};
  var b = {em:true,i:true};
  var c = {h1:true,strong:true};

    var x = function(tagName){
       // define a single object with key/value pairs that can both be accessed
       var typedefs = {a:a,b:b,c:c}
       var types = {};
       // iterate the type definitions, setting the value based on lookup of originals
       for(var key in typedefs)
           types[key] = !!typedefs[key][tagName];
       // good to go!
       return types; 
    }

    console.log(x("p"));
    // { a:true, b:false, c:false }

}()); 
```

# .htaccess - 如何在 htaccess 中制作，没有 www 多个域到一个根目录

> ID：11891913
> 
> 赞同：0
> 
> 时间：2012-08-09T21:03:03.497
> 
> 标签：.htaccess, rewrite

我有两个指向同一个根的域，我想对它们强制没有 www 前缀：

```
www.tapirhostel.pl
www.tapirhostel.com 
```

现在我有这样的事情：

```
RewriteCond %{HTTP_HOST} ^www\.tapirhostel\.pl$  [NC,OR]
RewriteCond %{HTTP_HOST} ^www\.tapirhostel\.com$  [NC,OR]
RewriteCond %{HTTP_HOST} ^tapirhostel\.pl$  [NC,OR]
RewriteCond %{HTTP_HOST} ^tapirhostel\.com$  [NC]
RewriteCond %{REQUEST_URI} !^/tapirhostel/.*$ 
```

当我在没有 www 的情况下输入它时，一切正常。当您在前面输入“www”时，问题就开始了。当您输入[www.tapirhostel.pl](http://www.tapirhostel.pl)时，它很好地重定向到[tapirhostel.pl](http://tapirhostel.pl)但是当我输入[www.tapirhostel.com](http://www.tapirhostel.com)时，它会将我重定向到[tapirhostel.pl](http://tapirhostel.pl)。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:39:53.323

这应该工作

```
Options +FollowSymLinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www\.tapirhostel\.pl [NC]
RewriteRule ^(.*)$ http://tapirhostel.pl/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^www\.tapirhostel\.com [NC]
RewriteRule ^(.*)$ http://tapirhostel.com/$1 [R=301,L] 
```

# c# - connectionId 可以是集线器类中多个组的一部分吗

> ID：11891918
> 
> 赞同：0
> 
> 时间：2012-08-09T21:03:16.137
> 
> 标签：c#, asp.net, signalr

我可以`Groups.Add`为 2 个不同的组调用相同的 connectionid 吗？如果我向任一组广播某个消息，添加的 connectionid 会同时收到这两个消息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:28:42.570

是的。这正是 SignalR 的旗舰测试应用程序 JabbR 所做的。它使用组来表示“房间”，在 JabbR 中，用户可以在*N*个房间中。[您可以在此处](https://github.com/davidfowl/JabbR/blob/master/JabbR/Hubs/Chat.cs#L578)查看该实现的确切细节。

# c - 在windows上写v

> ID：11891921
> 
> 赞同：5
> 
> 时间：2012-08-09T21:03:26.300
> 
> 标签：c, windows, unix, file-io

Windows 是否在非 Cygwin 环境中提供类似于 writev 的功能？

理想情况下，答案将有一个适用于 Windows 的工作示例，类似于：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <sys/uio.h>

int main() {
  struct iovec iov[2];
  char blah[][20] = { "mickey", " mouse" };
  int fd = open ("/tmp/mice.txt", O_WRONLY | O_CREAT);
  iov[0].iov_base=blah[0];
  iov[1].iov_base=blah[1];
  iov[0].iov_len=iov[1].iov_len=6;
  writev(fd, iov, 2 );
  close(fd);
} 
```

答案应该是如何使用系统调用来解决问题。具体来说，我希望避免将单个缓冲区复制到一个更大的缓冲区中来执行写入。此外，生成的写入应该是单个大型写入请求，而不是执行缓冲 IO 之类的 fwrite。

* * *

***编辑**：12 年 8 月 13 日*

到 Scatter Gather I/O 的链接似乎主要与 TCP/IP 网络有关（真的是 winsock）。另一个建议是 writefilegather，它是一种以非常特定的格式写入文件的解决方案。即 writev 使用 iov 容器（任意内存块）写入，而 writefilegather 使用与页表大小对齐的固定缓冲区。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-12T14:48:33.613

[WSASend 函数](http://msdn.microsoft.com/en-us/library/ms742203%28v=vs.85%29.aspx)可以发送一个 WSABUF 结构的数组

# python - 为什么pygame不会画一个圆圈？

> ID：11891923
> 
> 赞同：3
> 
> 时间：2012-08-09T21:03:41.183
> 
> 标签：python, pygame, geometry

我是python的初学者，我试图在鼠标所在的地方画一个圆圈（我也有鼠标和背景图像）。这是我的代码：

```
while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit

        if event.type == MOUSEBUTTONDOWN:
            color = (100,100,100)
            posx,posy = pygame.mouse.get_pos()
            screen.lock()
            pygame.draw.circle(screen, color, (posx,posy), 50)
            screen.unlock()

    screen.blit(background,(0,0))
    x,y = pygame.mouse.get_pos()
    x -= mousec.get_width()/2
    y -= mousec.get_height()/2

    screen.blit(mousec, (x,y))

    pygame.display.update() 
```

每当我点击什么都没有发生。为什么不画一个圆圈？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T21:18:50.253

我对 pygame 几乎一无所知，所以我无法提供比这更多的帮助......但我认为你正在做的总是在你的圈子里拉回。试试这个：

```
pygame.init()
screen = pygame.display.set_mode((640, 480))

screen.fill((0,0,0))

while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit()

        if event.type == MOUSEBUTTONDOWN:
            # draw background first (however)
            screen.fill((0,0,0))

            # draw your other layers (mouse image)

            # draw the circle
            color = (255,255,255)
            posx,posy = pygame.mouse.get_pos()
            pygame.draw.circle(screen, color, (posx,posy), 50)

    pygame.display.update() 
```

基本上，您的示例中发生的情况是，当您按下鼠标事件进行绘制时，您将再次使用背景绘制它。我不确定是什么`mousec`，但每次都会在背景上绘制。因此，您将永远不会看到通过鼠标单击绘制的圆圈

我的例子开始填充背景一次，然后当鼠标按下时，它会再次填充背景以绘制之前的状态，然后绘制圆圈。

使用您的确切示例的另一种方法是仅在检查事件时记录鼠标位置，并将圆的绘制推迟到您的图层之后。您将“记住”最后一个鼠标位置，以便在每个循环上不断重绘该圆圈：

```
last_mouse_pos = None

while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit

        if event.type == MOUSEBUTTONDOWN:
            last_mouse_pos = pygame.mouse.get_pos()

        elif event.type == KEYDOWN and event.unicode == 'c':
            # clear the circle when pressing the 'c' key
            last_mouse_pos = None

    screen.blit(background,(0,0))
    x,y = pygame.mouse.get_pos()
    x -= mousec.get_width()/2
    y -= mousec.get_height()/2

    screen.blit(mousec, (x,y))

    if last_mouse_pos:
        color = (100,100,100)
        posx,posy = last_mouse_pos
        pygame.draw.circle(screen, color, (posx,posy), 50)

    pygame.display.update() 
```

这种方法的不同之处在于，您总是在每个循环上绘制所有内容，而不是仅响应事件的变化。

**更新**

为了回答您在评论中的问题...修改第二个示例以保留所有鼠标点击的方法是将它们保存在 a 中`set`并每次将它们拉回来。

```
mouse_clicks = set()

while True:

    for event in pygame.event.get():
        if event.type == QUIT:
            pygame.quit()
            sys.exit

        if event.type == MOUSEBUTTONDOWN:
            mouse_clicks.add(pygame.mouse.get_pos())

        elif event.type == KEYDOWN and event.unicode == 'c':
            # clear the circle when pressing the 'c' key
            mouse_clicks.clear()

    screen.blit(background,(0,0))
    x,y = pygame.mouse.get_pos()
    x -= mousec.get_width()/2
    y -= mousec.get_height()/2

    screen.blit(mousec, (x,y))

    for pos in mouse_clicks:
        color = (100,100,100)
        posx,posy = pos
        pygame.draw.circle(screen, color, (posx,posy), 50)

    pygame.display.update() 
```

# javascript - 激浪网站上的元素动画是怎么做的？

> ID：11891925
> 
> 赞同：-2
> 
> 时间：2012-08-09T21:03:45.707
> 
> 标签：javascript, jquery

我试图找到一个 javascript 库来像[这里所做](http://mountaindew.com/)的那样为元素设置动画。请看一下介绍，然后从顶部菜单应用一些过滤器，并尝试调整浏览器窗口的大小。

我没有找到任何可以完成像这样的流体布局的东西。那里使用的那种动画有名字吗？你知道它是怎么编码的吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-12T14:01:32.317

我是[Mountain Dew 网站](http://mountaindew.com)的首席开发人员。我从头开始编写了整个过滤和网格逻辑，但[Isotope](http://isotope.metafizzy.co/)是一个非常好的通用库，可以完成你想要的。我没有使用它，因为我有很多特定的需求（主要是因为我必须在单击一个项目后拆分网格）。下面是关于 Mountain Dew 网站上的网格如何工作以及如何完成排序的简化说明。

如果所有项目的大小相同，则逻辑非常简单，您只需要计算一行可以容纳多少项目并相应地定位它们。

```
var nCols = Math.floor( lineSize / itemWidth ); 
```

如果物品的尺寸不同，您可能需要一些[打包算法](http://en.wikipedia.org/wiki/Packing_problem)，但对于这种情况，因为我知道可能的尺寸并且它们都适合相同的网格（1x1、1x2、2x2、3x2），并且它们之间有随机间距（没有重叠)，我们也有一些关于产品和促销位置的非常具体的规则，我必须编写自己的算法。对我所做的工作的简化解释（大致是[装箱首次拟合算法](http://en.wikipedia.org/wiki/Bin_packing_problem)）：

1.  获取浏览器窗口尺寸。
2.  检查我们可以有多少列。
3.  从数组中获取一个随机项。
4.  将其插入当前行的下一个可用*bin*。
5.  如果它不适合当前行，我们将创建新行，直到我们有足够的*bin*来容纳该项目。
6.  根据需要多次重复步骤 3 到 5。

关于激浪网格的一些注意事项：

*   瓶子不能相邻插入。
*   如果*存储桶*被标记为*接管*，它应该位于网格的顶部。
*   过滤掉的项目应该放在网格的底部。
*   在应用任何过滤器*后*，瓶子可能会被放置在网格上的任何位置。
*   如果它是网格的最后一行并且我们没有更多项目，则瓶子可以彼此相邻（避免创建不必要的行）。
*   瓶子应该均匀地分布在网格上，但在伪随机位置上。
*   网格上的瓶子数量与网格上的物品数量有关（每 12 个物品大约 1 个）。
*   项目应该是随机间隔的，并且应该尽可能避免重叠（这比项目像常规网格一样定位更难）。

排序是通过*稳定*排序完成的——`Array#sort`在 v8 上不稳定，所以[我实现了一个稳定的合并排序](http://millermedeiros.github.com/amd-utils/array.html#sort)。只需要遍历数组上的所有项目并执行以下操作：

```
//native array sort isn't stable on chrome so we use amd-utils instead
grid.items = sort(grid.items, function(item, next){
    // move inactive items to the end of list
    // if return zero it keeps items at the same relative position
    if (next.active) {
        return (item.active)? 0 : 1;
    } else {
        return (item.active)? 0 : -1;
    }
}); 
```

在我们决定如何订购物品之后，只需找到物品的正确位置并设置`element.style.top`and `element.style.left`：

```
// positioning can be calculated based on item index if all items have
// same size. not same logic used on mdew since on mdew we have a
// random gutter between items and they shouldn't overlap each other
var colIndex = itemIndex % (nCols - 1);
var rowIndex = Math.floor(itemIndex / nCols);
var destX = colIndex * colWidth;
var destY = rowIndex * rowHeight; 
```

如果浏览器支持 CSS 过渡并且所有项目都具有相同的延迟/持续时间，我们可以在样式表上设置动画：

```
.grid-item {
    -webkit-transition: all 500ms ease;
       -moz-transition: all 500ms ease;
            transition: all 500ms ease;
} 
```

但是在 Mountain Dew 网站上，因为我们需要每个项目的随机延迟和持续时间（因为它看起来更好），所以我使用 JavaScript 设置了过渡：

```
function randomizeSpeed(){
    var delayProp = vendorPrefix.style('transitionDelay');
    var durationProp = vendorPrefix.style('transitionDuration');
    $('.grid-item').each(function(i, el){
        var duration = rand(SLOWEST_TRANSITION, FASTEST_TRANSITION);
        var delay = map(duration, FASTEST_TRANSITION, SLOWEST_TRANSITION, MIN_DELAY, MAX_DELAY);
        if (delayProp) {
            el.style[delayProp] = delay +'s';
            el.style[durationProp] = duration +'s';
        } else {
            // store delay/duration for JS fallback
            $(el).data({ delay: delay, duration: duration });
        }
    });
} 
```

在上面的代码中，我使用方法`math/map`和`random/rand`来自[amd-utils](http://millermedeiros.github.com/amd-utils/)。我还有一些代码用于根据特征检测获取供应商前缀样式属性 ( `mozTransitionDelay`, `webkitTransitionDelay`, )。`transitionDelay`如果浏览器不支持 CSS 过渡，我会使用一些 JavaScript 来制作动画：

```
if (USE_TRANSFORM && USE_TRANSITION) {
    el.css({translateY: destY, translateX: destX});
} else if (USE_TRANSITION) {
    el.css({top: destY, left: destX});
} else {
    TweenLite.to(el, el.data('duration'), {
        css : { top : destY, left: destX },
        delay : el.data('delay'),
        ease : Expo.easeOut
    });
} 
```

由于性能原因，我在 IE 7-8 上删除了过渡动画，网格元素太复杂而且我们的项目太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T19:00:00.413

不，要在浏览器调整大小时拥有也适用于触摸设备的自动布局功能，您可以[在此处使用此插件](http://isotope.metafizzy.co/)。然后，MTN 的东西就是小菜一碟。这个插件可以只是动画、随机化和做 shizzle，但你也可以用它排序、排序和过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T18:17:42.217

不，山。露码更好。同位素会在网格中间留下孔洞。特别是如果您的细胞像 mt 一样随机组合在一起。露。

# ruby-on-rails - Ruby on Rails 在任何源中都找不到 rake-0.9.2.2 (Bundler::GemNotFound)

> ID：11891926
> 
> 赞同：1
> 
> 时间：2012-08-09T21:03:50.233
> 
> 标签：ruby-on-rails

我创建了一个应用程序，上传了该应用程序，该应用程序在本地运行，但出现错误。谁能告诉我为什么？或者如何解决？

错误看起来像这样。

在任何源中都找不到 rake-0.9.2.2 (Bundler::GemNotFound) 异常类：PhusionPassenger::UnknownError

我是 Rails 新手，我将发布一些我认为会有所帮助的信息。

这是我的宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.7'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem 'execjs'

gem 'therubyracer' 
```

我有 Rails 3.2.7，

我有 RVM 1.14.12，

我有 Ruby 1.9.3p194

让我知道是否有更多信息可以发布以更好地帮助回答这个问题。

# java - GWT 2.4 ValidationTool 在 ValueProxy 上的 Date 属性上失败

> ID：11891928
> 
> 赞同：0
> 
> 时间：2012-08-09T21:03:51.550
> 
> 标签：java, gwt, gwt-validation

我现在在网上浏览了几个小时，但没有找到任何提示。我目前正在学习 GWT（从 2.4.0 开始），并且正在设置一个 RequestFactory。一切都很顺利，直到我运行注释处理器。

这是相关的代理类：

```
@ProxyFor(value = PlaylistModel.class)
public interface PlaylistProxy extends ValueProxy {

    Long getPlaylistId();

    String getPlaylistName();

    void setPlaylistName(String playlistName);

    Date getPlaylistStartTime();

    void setPlaylistStartTime(Date playlistStartTime);
} 
```

但是注释处理器给了我以下错误：

```
error: Could not find domain method similar to java.util.Date getPlaylistStartTime()
error: Could not find domain method similar to void setPlaylistStartTime(java.util.Date) 
```

对我来说，问题似乎是由 java.util.Date 返回值和参数引起的，尽管[官方文档](https://developers.google.com/web-toolkit/doc/2.4/DevGuideRequestFactory#transportable)告诉这个类型是可传输类型。

将被代理的类型是：

```
public class PlaylistModel implements Serializable {

    private static final long serialVersionUID = 7476233813742570809L;

    private Long playlistId;

    @NotNull
    @Size(min = 1)
    private String playlistName;

    private Date playlistStartDate;

    private ChannelModel channel;

    public Long getPlaylistId() {
        return playlistId;
    }

    public void setPlaylistId(final Long playlistId) {
        this.playlistId = playlistId;
    }

    public String getPlaylistName() {
        return playlistName;
    }

    public void setPlaylistName(final String playlistName) {
        this.playlistName = playlistName;
    }

    public Date getPlaylistStartDate() {
        return playlistStartDate;
    }

    public void setPlaylistStartDate(final Date playlistStartDate) {
        this.playlistStartDate = playlistStartDate;
    }

    public ChannelModel getChannel() {
        return channel;
    }

    public void setChannel(final ChannelModel channel) {
        this.channel = channel;
    }
} 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:11:57.913

`getPlaylistStartTime`对比`getPlaylistStartDate`

# java - 无法使用静态变量进行 Web 服务声明？

> ID：11891929
> 
> 赞同：0
> 
> 时间：2012-08-09T21:03:54.837
> 
> 标签：java, web-services, jakarta-ee, ejb

创建 Web 服务时，我可以以某种方式使用静态字符串变量吗？

```
@WebService(
        portName = Util.PORT,
        serviceName = Util.SERVICE,
        targetNamespace = ...,
        endpointInterface = ...)
public class MyWsClass implements WsInterface 
```

结果：

```
The value for annotation attribute WebService.portName must be a constant expression 
```

那么我不能使用静态变量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:08:25.777

相关的 SO 问题：[How to provide value to an annotation from a Constant java](https://stackoverflow.com/questions/2065937/how-to-supply-value-to-an-annotation-from-a-constant-java)

如果它们是字符串或数字并声明为静态最终值，则可以从常量设置注释参数值。

# regex - 与 BBEdit 兼容的正则表达式，用于删除空行

> ID：11891938
> 
> 赞同：9
> 
> 时间：2012-08-09T21:04:39.367
> 
> 标签：regex, bbedit

我已经尝试过其他应该能够从文档中删除空白行的正则表达式，但它们似乎都不能在 BBEdit 的查找和替换中工作。

什么是用于从可在 bbedit 中工作的文档中删除空白行的正则表达式？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T21:26:50.000

我将假设您希望删除的行中可能有空格。这应该可以解决问题：

```
^\s*?\r 
```

（替换为空，确保勾选“Grep”复选框）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T07:23:32.533

我发现使用以下表达式选择“文本>包含...的处理线”更容易：

```
^$ 
```

或者

```
^\s*$ 
```

选中“使用 grep”和“删除匹配的行”框。取消选中所有其他。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-15T00:35:50.633

这在 Coda 中有效。（虽然不确定BBEdit）

寻找：

```
\n\n 
```

用。。。来代替：

```
\n 
```

确保选中“使用正则表达式”选项。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-31T22:07:27.667

Find: \r+ Replace with: \r

Grep option should be checked.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-13T05:45:40.157

BBEdit.. Text --> 处理重复行。删除重复行

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-18T14:11:14.330

删除所有空行，无论非空行之间的空行数量是多少，无论数量是否正常。

你必须这样做：

第一个你删除所有的空行

```
 « Text Menu / Process Lines Containing... »
 > Regex : ^$
 > Use grep enabled
 > Delete matched line enabled 
```

2d 如果你想恢复易读性，例如在你的块之后添加一个空行

```
 « Search Menu / Find... »
 > Grep enabled
 > Find: ^}$        <<<< because the final curly is usually the 1st and the last char
 > Replace: }\n     <<<< or \r or \r\c according to the Platform choice 
```

# hover - css a：悬停限制

> ID：11891939
> 
> 赞同：0
> 
> 时间：2012-08-09T21:04:40.837
> 
> 标签：hover

我有这个代码：

```
ul
{ list-style-type: none;
  margin:0;
  padding:0;
  overflow: hidden;
}

a:link,a:visited
{ display: block;
  width: 240px;
  background: transparent url(./style/black2.jpg) ;
  text-align: right;
  text-transform: uppercase;
  text-decoration: none;
    height: 40px;
    color: #ffffff
}

a:hover,a:active
{ background: transparent;
  color: #000000
} 
```

和这个

```
<ul>
        <li><a href="http://127.0.0.1:4001/wbdemo/pages/abc.php"><h99>Home<h99/></a></li>
        <li><a href="#"><h99>Home</h99></a></li>
        <li><a href="#"><h99>Home</h99/></a></li> 
      <li><a href="#"><h99>Home</h99/></a></li> 
      <li><a href="#"><h99>Home</h99/></a></li>
</ul> 
```

现在所有有链接的东西都“悬停”了。我想将 a:hover 限制在菜单部分并将其与其余部分分开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:07:38.963

然后使用更具体的选择器：

```
ul a
{ 
style
} 
```

如果你可以给菜单一个 ID：

```
<ul id="menu"> 
```

然后你可以这样做：

```
ul#menu a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:08:21.663

如果你只想设置元素内部**的**链接`<ul>`，你应该这样编码：

```
ul a:hover {
    /* here goes the styles */
} 
```

# python - Python：如何按类别对这个项目列表进行分组？

> ID：11891940
> 
> 赞同：0
> 
> 时间：2012-08-09T21:04:44.310
> 
> 标签：python, django

使用 Django 应用程序。我有一个列表，`ads`我希望能够在模板中过滤这些（例如，抓取 的所有广告`spot_id = 1`，然后随机选择一个。

我通过游标使用原始 SQL 而不是 Django 的神秘查询，所以我已经有了我的列表（转换为字典）。这是我到目前为止所拥有的：

```
# list/dict of ads
[
 {'filename': u'rc_ad_06_02_11.gif', 'spot_id': 1L }, 
 {'filename': u'k_banner.jpg', 'spot_id': 1L}, 
 {'filename': u'dwarves-banner.gif', 'spot_id': 1L}, 
 {'filename': u'k_skyscraper.jpg', 'spot_id': 2L }
]   

# attempt to group them somehow
final_ads = []

    last_spot_id = 0
    for a in ads:
        if a['spot_id'] != last_spot_id:
        final_ads[a['spot_id']][] = a # syntax error here
    last_spot_id = a['spot_id']

logger.info(final_ads) 
```

这行不通。我基本上想要得到的是这种结构的列表：

```
[
 1: [
     {'filename': u'rc_ad_06_02_11.gif', 'spot_id': 1L }, 
     {'filename': u'k_banner.jpg', 'spot_id': 1L}, 
     {'filename': u'dwarves-banner.gif', 'spot_id': 1L}
 ],
 2: [
     {'filename': u'k_skyscraper.jpg', 'spot_id': 2L }
 ]
] 
```

（想不出合适的方式来表示这一点，如果看起来不正确，请见谅）。

如果有人可以向我展示一种更聪明的方法，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:12:07.927

defaultdict 应该可以很好地处理它，它将返回一个字典而不是一个列表

final_ads 将类似于 {1:[a1,a3,a4],2:[a2,a5]...}

```
from collections import defaultdict
final_ads = defaultdict(list)
for a in ads:
    final_ads[a['spot_id']].append(a)

print final_ads
for spot_id in sorted(final_ads.keys()):
    print "Spot %s=%s"%(spot_id,final_ads[spot_id]) 
```

上面的代码与您的 dicts 列表~~返回~~打印

```
defaultdict(<type 'list'>, {1L: [{'spot_id': 1L, 'filename': u'rc_ad_06_02_11.gif'}, {'spot_id': 1L, 'filename': u'k_banner.jpg'}, {'spot_id': 1L, 'filename': u'dwarves-banner.gif'}], 2L: [{'spot_id': 2L, 'filename': u'k_skyscraper.jpg'}]})
Spot 1=[{'spot_id': 1L, 'filename': u'rc_ad_06_02_11.gif'}, {'spot_id': 1L, 'filename': u'k_banner.jpg'}, {'spot_id': 1L, 'filename': u'dwarves-banner.gif'}]
Spot 2=[{'spot_id': 2L, 'filename': u'k_skyscraper.jpg'}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:27:38.760

```
import itertools
grps = itertools.groupby(ads,lambda x:x['spot_id'])
final_ads = dict(map(lambda (k,g):(k,list(g)),grps) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T21:15:06.610

```
import collections
final_ads = collections.defaultdict(list)
for ad in ads:
    final_ads[ad['spot_id']].append(ad)
logger.info(final_ads) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T21:13:03.563

我认为这个脚本就是你要找的。

```
final_ads = {}
for a in ads:
    final_ads.setdefault(a['spot_id'], []).append(a) 
```

请注意`setdefault`，如果列表不存在，则初始化列表。

# iphone - 将 UIButton 编程为切换

> ID：11891942
> 
> 赞同：0
> 
> 时间：2012-08-09T21:04:49.873
> 
> 标签：iphone, objective-c, ios, xcode, uibutton

这就是我如何让我的 UIButton 来管理收藏夹：

```
-(IBAction)favoriteButtonPressed:(id)sender
    {
    if (favoriteButtonSelected == 0) {

        [sender setSelected:YES];

        favoriteButtonSelected = 1;
        [sender setImage:[UIImage imageNamed:@"favoritedItem.png"]];
        [selectedObject setValue:@"Yes" forKey:@"Favorite"];

    } else {

        [sender setSelected:NO];

        favoriteButtonSelected = 0;
        [sender setImage:[UIImage imageNamed:@"notFavorite.png"]];
        [selectedObject setValue:@"No" forKey:@"Favorite"];
    }
} 
```

这将设置按钮的默认状态：

```
- (void)viewDidLoad
    {
    [super viewDidLoad];

    if ([[selectedObject valueForKey:@"Favorite"] isEqual:@"Yes"])  {

        [favoriteButton setImage:[UIImage imageNamed:@"favoritedItem.png"]];
        [favoriteButton setSelected:YES];
        favoriteButtonSelected = 1;

    } else {

        [favoriteButton setImage:[UIImage imageNamed:@"notFavorite.png"]];
        [favoriteButton setSelected:NO];
        favoriteButtonSelected = 0;
    }
    } 
```

我的问题是：如何声明 favoriteButtonSelected？以及如何在 viewDidLoad 中引用按钮（favoriteButton）和 favoriteButtonSelected？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:08:20.360

我开发了一个 UICheckbox 解决方案，它本质上只是一种切换。您可以轻松替换我的源项目中提供的图像并拥有您正在寻找的内容：

[https://github.com/Brayden/UICheckbox](https://github.com/Brayden/UICheckbox)

# cluster-analysis - 如何使用 mahout 找到集群的特征？

> ID：11891945
> 
> 赞同：1
> 
> 时间：2012-08-09T21:05:05.517
> 
> 标签：cluster-analysis, mahout

我正在使用 mahout 0.8，在对数据进行聚类后，我使用此命令查看结果：

> mahout clusterdump --seqFileDir clusters/clusters-77/ --pointsDir clusters/clusteredPoints/

我还想了解为什么行聚集在同一个集群中。我认为，要了解这一点，我可以编写代码来查找集群中哪些特征/维度相似。

不写代码，我能找到为什么行聚集在同一个集群中吗？

**简而言之：我想了解集群的特征。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T06:18:56.140

许多聚类算法**不会提供解释**。即使他们这样做了，答案也可能只是“因为集群中心 X 是最近的”。特别是 k-means 是一种数值优化方法，可以写成搜索特定数学方程的（局部）最小值。所以本质上，答案是**因为这个集群分配最小化了给定的方程**。

在某种程度上，这是问题所固有的：聚类是一种无监督技术，通常基于诸如最小化方程或计算图子集等概念（例如，在基于密度的聚类中，DBSCAN 可以被视为寻找密度连接的子图）

现在当谈到“大数据”时，解释就没什么意义了。如果你只有几十个点，解释是好的。如果你有数十亿，谁会看这些解释（如果它们存在的话）？在 Mahout 等系统中，通常*甚至不计算精确解，而是计算近似值*。如果您需要尽可能快并愿意放弃精度，那么您可能也愿意放弃解释。

如果您想了解有关集群的更多信息，您可以

*   用你自己的方法检查它们的聚类后
*   使用更小的数据量和更复杂的算法来提供解释

如果您的数据集小到可以在单个系统上处理，我一开始就不会使用 Mahout。仅对非常*庞大的*数据集*才有意义。*所有 Hadoop 的东西*确实会*花费一些您在单台计算机设置中不需要的开销。

# javascript - 如何找到“语法错误：JSON.parse：意外字符”的原因

> ID：11891949
> 
> 赞同：1
> 
> 时间：2012-08-09T21:05:14.263
> 
> 标签：javascript, jquery, json, debugging, firebug

这是我得到的错误：

![在此处输入图像描述](../Images/a2fad61641f4b2cb7203ad2acf46afec.png)

未缩小的 jQuery 1.7.2 javascript 文件中有问题的行：

```
 error: function( msg ) {
     throw new Error( msg );
 }, 
```

由此，无法确定错误在哪里（或者至少我不清楚）。我发现从 jQuery 插件 ( [http://shama.github.com/jmpress.js/#/docs](http://shama.github.com/jmpress.js/#/docs) ) 中取消注释此行会导致错误停止：

```
$("#my_div").jmpress(); 
```

但我无法获得比这更大的粒度。有什么调试技巧可以帮助我找出这个 JSON 解析发生在哪里？

===**编辑：** ===

使用 JSON.parse，我能够追踪这个试图被解析为字符串的特定字符串：

```
_FB_f3757ad5f032398xd_action=proxy_ready&data 
```

但无法确定它进入我的代码的位置，但从“ *FB* ”前缀看来，这个字符串似乎是 Facebook JS SDK 的一部分（我正在使用）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:24:10.657

好的，看jmpress的源代码，它来自跨域iframe消息传递。基本上 jmpress[是这样做的](https://github.com/shama/jmpress.js/blob/master/src/plugins/presentation-mode.js#L33)：

```
window.addEventListener("message", function(event) {
    // We do not test orgin, because we want to accept messages
    // from all orgins
    try {
        var json = JSON.parse(event.data);
        switch(json.type) {
        case "select":
            // TODO SECURITY filter targetId
            $.each(eventData.settings.presentationMode.transferredValues, function(idx, name) {
                eventData.current[name] = json[name];
            });
            $(eventData.jmpress).jmpress("select", {step: "#"+json.targetId, substep: json.substep}, json.reason);
            break;
        case "listen":
            current.selectMessageListeners.push(event.source);
            break;
        case "ok":
            clearTimeout(current.presentationPopupTimeout);
            break;
        case "read":
            try {
                event.source.postMessage(JSON.stringify({type: "url", url: window.location.href, notesUrl: eventData.settings.presentationMode.notesUrl}), "*");
            } catch(e) {
                $.error("Cannot post message to source: " + e);
            }
            break;
        default:
            throw "Unknown message type: " + json.type;
        }
    } catch(e) {
        $.error("Recieved message is malformed: " + e);
    }
}); 
```

因此，所有发布到主窗口的 iframe 都将通过此事件处理程序并在传递无效 JSON 时记录错误。看起来您的网站上有一个 facebook iframe，可以将消息发布到主窗口。尝试删除所有这些，看看错误是否消失。

# linux - 批量重命名文件

> ID：11891958
> 
> 赞同：1
> 
> 时间：2012-08-09T21:05:34.023
> 
> 标签：linux

我在服务器上的一个文件夹中有 25,000 张 ++ 图像。其中很多都包含 %20，这会阻止它们显示。有谁知道我如何对 str_replace('%20', '_', $imagename) 执行命令行？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:13:45.040

这可能有效[http://snipplr.com/view/2736/](http://snipplr.com/view/2736/)

（此处提供代码以供将来参考）

```
for i in *.avi
do
  j=`echo $i | sed 's/find/replace/g'`
  mv "$i" "$j"
done 
```

也可以写成一行

```
for i in *.avi; do j=`echo $i | sed 's/find/replace/g'`; mv "$i" "$j"; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:12:31.590

一种方法是获取文件中的文件列表，即使用 'ls -1 | awk '{print "mv $1 $1"}' > torename.sh'，然后使用正则表达式编辑 torename.sh。一旦你得到你想要的脚本，运行脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:13:08.687

这个小的 python 片段可能可以帮助你：

```
import os

for root, dirs, files in os.walk(".", topdown=False):
    for name in files:
        if "%20" in name:
            os.rename(os.path.join(root, name), os.path.join(root, name.replace("%20", "_")))
            print("renamed: %s" % name) 
```

注意“。” 论据`os.walk`。将其更改为文件所在目录的路径，或者从该目录运行脚本。

# mongodb - pymongo mapreduce 示例中的错误？

> ID：11891959
> 
> 赞同：0
> 
> 时间：2012-08-09T21:05:44.507
> 
> 标签：mongodb, mapreduce, pymongo

我试图执行“http://api.mongodb.org/python/1.3/examples/map_reduce.html”中的示例，出现以下错误：

> 文件“map_red.py”，第 30 行，在
> 
> 如果**名称**== '**主要**': main()
> 
> 文件“map_red.py”，第 24 行，在 main
> 
> 结果 = db.things.map_reduce(map, reduce)
> 
> TypeError: map_reduce() 至少需要 4 个参数（给定 3 个）

所以我编辑代码看起来像这样，但我没有看到任何输出（我还在 find() 中将“result”替换为“mr_result”但仍然没有输出！！）

```
result = db.things.map_reduce(map, reduce,{"out": "mr_results"} )
result_find = db.result.find()
for doc in result_find:
    print doc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:08:33.053

您正在参考旧 PyMongo 1.3 的文档示例，但似乎安装了更新的版本。

您可以通过以下方式检查您的 PyMongo 版本：

```
>>> import pymongo
>>> pymongo.version
'2.2.1+' 
```

期望您想参考当前文档：

*   [映射/减少示例](http://api.mongodb.org/python/current/examples/map_reduce.html)
*   [map_reduce() 函数](http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.map_reduce)

# javascript - 动态 DOM 砌体 jQuery 插件

> ID：11891960
> 
> 赞同：1
> 
> 时间：2012-08-09T21:05:47.580
> 
> 标签：javascript, jquery

我`dom`通过解析`tumblr`的 json 文件创建元素。
加载图像后，我想应用一个[jQuery 插件 Masonry](http://masonry.desandro.com/docs/intro.html)来收紧图像网格。

这是我的尝试，但似乎没有响应
任何帮助将不胜感激，谢谢。

```
var container = $('#output');
$.getJSON("http://mydomain.tumblr.com/api/read/json?callback=?", function(data) { 
    $.each(data["posts"], function(i){
        var img = data["posts"][i]["photo-url-400"];
        container.append('<div class="box"><a href="temp.php?var='+i+'"><img src="'+img+'" alt="" /></a></div>');
    });
});

//container.live('imagesLoaded', function(){
container.imagesLoaded( function(){
    container.masonry({
        itemSelector: '.box',
        columnWidth : 400
    });
}); 
```

或这个

```
var container = $('#output');
$.getJSON("http://mydomain.tumblr.com/api/read/json?callback=?", function(data) { 
        $.each(data["posts"], function(i){
                var img = data["posts"][i]["photo-url-400"];
                container.append('<div class="box"><a href="temp.php?var='+i+'"><img src="'+img+'" alt="" /></a></div>', function(){
                    container.imagesLoaded( function(){
                        container.masonry({
                                itemSelector: '.box',
                                columnWidth : 400
                        });
                });
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T13:27:21.520

```
// Nothing changed here:
var container = $('#output');
$.getJSON("http://mydomain.tumblr.com/api/read/json?callback=?", function(data) { 
    $.each(data["posts"], function(i){
        var img = data["posts"][i]["photo-url-400"];
        container.append('<div class="box"><a href="temp.php?var='+i+'"><img src="'+img+'" alt="" /></a></div>');
    });
});

// Now, do this:
container.masonry({
    itemSelector: '.box',
    columnWidth : 400
});
var masonryUpdate = function() {
    setTimeout(function() {
        container.masonry();
    }, 500);
}
$(document).on('click', masonryUpdate);
$(document).ajaxComplete(masonryUpdate); 
```

再也不用担心了！

# java - VisualVM 启动器错误

> ID：11891969
> 
> 赞同：13
> 
> 时间：2012-08-09T21:06:31.820
> 
> 标签：java, eclipse, plugins, profiling

我正在尝试使用 Eclipse VisualVM[启动器](http://visualvm.java.net/eclipse-launcher.html)。看起来很不错，只是如果 VisualVM 来不及对我的应用程序进行任何分析，它似乎会生成一个实例。我的应用程序甚至在分析器初始化之前就完成了执行；一旦启动，就会弹出一个错误窗口，说：`cannot open requested application`. 然后它显示运行 Eclipse 的 VM（标记为“org.eclipse.equinox.launcher.Main”）。我怎样才能让它等待我的应用程序并进行正确的分析？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-09T07:41:17.783

这可能为时已晚，但我遇到了同样的问题，设置断点然后在调试模式下启动根本没有帮助。我最终发现 VisualVM 将其临时数据保存在文件夹 %TMP%/hsperfdata_[username] 中，例如，在我的 Windows 机器上，该文件夹是 C:\Users\Jacob\AppData\Local\Temp\hsperfdata_Jacob。事实证明，该进程没有足够的权限来访问该文件夹，所以我放宽了它的权限，现在它工作得很好。希望这对有同样问题的人有用！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-09T21:16:45.823

我知道那个问题。我一直想出的唯一穷人的解决方案是：

1.  在源代码中设置断点
2.  以调试模式启动程序
3.  连接分析器
4.  让程序继续

VisualVM 将分析代理注入您的 VM 只需要一点时间，我很确定它只允许远程分析。

作为替代方案，您可以使用[YourKit](http://www.yourkit.com/)，它可以从一开始就分析您的应用程序。通过这种方式，分析代理在 VM 启动时被注入：

```
java -agentpath:c:\yourkit\yjpagent.dll FooClass 
```

我很好奇为什么 VisualVM 不提供这个选项，因为它在技术上是可行的。无论如何，我认为调试技巧是 Eclipse 中的一个很好的解决方案，除非您也对类加载等感兴趣。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-12T13:21:00.657

在 Windows 上，以管理员身份运行 Eclipse。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-21T20:21:13.507

这是一个愚蠢的解决方案，但有效。它是这样的：

向您的应用程序添加一个无限循环包装器，例如“while(true) { your_app }”。

随着程序运行时间的延长，计时噪音也会变得均匀。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-05-08T22:43:24.107

您只需以管理员用户 (Windows 10) 的身份运行 VisualVM 可执行文件。

# devexpress - LinQtoXpo 和 sqlexpress

> ID：11891971
> 
> 赞同：0
> 
> 时间：2012-08-09T21:06:44.803
> 
> 标签：devexpress, xpo

如何使用 linQPad 访问 sqlepxress 数据库 我需要使用 LinqToXPO 驱动程序？

如果数据库是从 VS2010 中的 EF 模型创建的，（你们知道 devexpress 文档是如何......没有或很少）谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T06:29:17.407

鉴于您已经为要在 LinqPad 中访问的表创建了 XPO 对象，这篇文章将引导您完成该过程：http: [//community.devexpress.com/blogs/xpo/archive/2011/12/27/xpo -s-new-friend-is-the-linqpad.aspx](http://community.devexpress.com/blogs/xpo/archive/2011/12/27/xpo-s-new-friend-is-the-linqpad.aspx)。

数据库是由 XPO 还是 EF（代码优先）手动创建的，这无关紧要。

如果我误解了你的问题，请告诉我。

# c - 如何在不使 Linux 内核崩溃的情况下访问 mmaped /dev/mem？

> ID：11891979
> 
> 赞同：16
> 
> 时间：2012-08-09T21:07:33.107
> 
> 标签：c, linux, linux-kernel, mmap

我有一个简单的程序，它试图访问用户空间中的物理内存，内核存储第一个结构页面。在 64 位机器上，这个地址是：

*   内核虚拟地址：ffffea0000000000
*   物理地址：0000620000000000

我正在尝试通过用户空间中的 mmap 访问此物理地址。但是下面的代码会使内核崩溃。

```
int *addr;
if ((fd = open("/dev/mem", O_RDWR|O_SYNC)) < 0 ) {
    printf("Error opening file. \n");
    close(fd);
    return (-1);
}
/* mmap.  address of first struct page for 64 bit architectures 
 * is 0x0000620000000000.
 */
addr = (int *)mmap(0, num*STRUCT_PAGE_SIZE, PROT_READ, MAP_PRIVATE,
            fd, 0x0000620000000000);
printf("addr: %p \n",addr);
printf("addr: %d \n",*addr); /* CRASH. */ 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-10T08:27:07.633

我想我找到了问题——这与 x86 上的 /dev/mem 内存映射保护有关。

请参考这篇 LWN 文章：“x86：使用配置选项引入 /dev/mem 限制” [http://lwn.net/Articles/267427/](http://lwn.net/Articles/267427/)

CONFIG_NONPROMISC_DEVMEM

现在（我在最近的 3.2.21 内核上对此进行了测试），配置选项似乎被称为 CONFIG_STRICT_DEVMEM。

我改变了我的内核配置：

```
$ grep DEVMEM .config
# CONFIG_STRICT_DEVMEM is not set
$ 
```

当上述 prg 使用*以前*的内核运行时，使用 CONFIG_STRICT_DEVMEM SET: dmesg 显示：

```
[29537.565599] Program a.out tried to access /dev/mem between 1000000->1001000.
[29537.565663] a.out[13575]: segfault at ffffffff ip 080485bd sp bfb8d640 error 4 in a.out[8048000+1000] 
```

这是因为内核保护..

当内核被重建（使用 CONFIG_STRICT_DEVMEM *UNSET*）并运行上述 prg 时：

```
# ./a.out 
mmap failed: Invalid argument
# 
```

这是因为 'offset' 参数 > 1 MB（在 x86 上无效）（它是 16MB）。

使 mmap 偏移量在 1 MB 以内后：

```
# ./a.out 
addr: 0xb7758000
*addr: 138293760 
# 
```

有用！有关详细信息，请参阅上面的 LWN 文章。

在支持 PAT（页面属性表）的 x86 架构上，内核仍然会阻止 DRAM 区域的映射。[内核源代码](http://lxr.free-electrons.com/source/arch/x86/mm/pat.c#L703)中提到的原因是：

```
This check is nedded to avoid cache aliasing when PAT is enabled 
```

此检查将导致与上述错误类似的错误。例如：

```
Program a.out tried to access /dev/mem between [mem 68200000-68201000]. 
```

可以通过禁用 PAT 来消除此限制。可以通过在引导时向内核命令行添加“nopat”参数来禁用 PAT。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-14T21:34:35.300

在支持 PAT（页面属性表）的 x86 架构上，内核可以阻止 DRAM 区域的映射（即使它是在没有设置 CONFIG_NONPROMISC_DEVMEM 的情况下编译的）。

[内核源代码](http://lxr.free-electrons.com/source/arch/x86/mm/pat.c#L703)中提到的原因是：

```
This check is nedded to avoid cache aliasing when PAT is enabled 
```

此检查将导致出现与`dmesg`上述kaiwan 回答中提到的类似的错误。例如：

```
Program a.out tried to access /dev/mem between [mem 68200000-68201000]. 
```

可以通过禁用 PAT 来消除此限制。

`nopat`可以通过在引导时将参数添加到内核命令行来禁用 PAT 。

# c - 计算从 1 到 N 的整数中 0 出现的次数

> ID：11891984
> 
> 赞同：17
> 
> 时间：2012-08-09T21:08:07.430
> 
> 标签：c, algorithm, math

您将如何有效地计算从 1 到 N 整数的十进制表示中 0 的出现次数？

```
e.g. The number of 0's from 1 to 105 is 16\. How?

10,20,30,40,50,60,70,80,90,100,101,102,103,104,105 
```

数一下 0 的个数，你会发现它是 16 个。

显然，蛮力方法不会受到赞赏。你必须想出一种方法，它不依赖于“有多少数字落在 1 到 N 之间”。我们可以通过看到某种模式来做吗？

我们不能扩展[这里编译的逻辑](http://www.geeksforgeeks.org/archives/22180)来解决这个问题吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T21:12:27.053

**更新的答案**

我最初的答案很容易理解，但编码起来很棘手。这是更容易编码的东西。这是一个直接的**非递归**解决方案，它通过计算每个位置出现零的方式的数量来工作。

例如：

> x <= 1234\. 以下形式的数有多少？
> 
> x = ??0?

“数百个或更多”（1,2，...，12）有 12 种可能性。那么必须有一个零。那么最后一位数字有 10 种可能性。这给出`12 * 10 = 120`了在第三位包含 0 的数字。

因此，范围（1 到 1234）的解是：

*   ?0??: 1 * 100 = 100
*   ??0?: 12 * 10 = 120
*   ???0: 123
*   总计 = 343

但一个例外是如果`n`包含一个零数字。考虑以下情况：

> x <= 12034\. 以下形式的数有多少？
> 
> x = ??0??

我们有 12 种方法来挑选“数千个或更多”。对于 1, 2, ... 11，我们可以选择任意最后两位数字（给出 11 * 100 种可能性）。但是如果我们从 12 开始，我们只能在最后两位数字之间选择一个数字`00`。`34`所以我们得到`11 * 100 + 35`了完全的可能性。

* * *

这是这个算法的一个实现（用 Python 编写，但应该很容易移植到 C 中）：

```
def countZeros(n):
    result = 0
    i = 1

    while True:
        b, c = divmod(n, i)
        a, b = divmod(b, 10)

        if a == 0:
            return result

        if b == 0:
            result += (a - 1) * i + c + 1
        else:
            result += a * i

        i *= 10 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T21:39:34.893

我建议将此算法从以 2 为基数调整为以 10 为基数：

[范围内整数的二进制补码二进制表示中 1 的数量](https://stackoverflow.com/questions/7942732/)

结果算法为 O(log N)。

方法是编写一个简单的递归函数`count(n)`，从 1 到 计数零`n`。

关键的观察是，如果 N 以 9 结尾，例如：

```
123456789 
```

您可以将 0 到 N 的数字分成 10 个大小相等的组。第 0 组是以 0 结尾的数字。第 1 组是以 1 结尾的数字。第 2 组是以 2 结尾的数字。依此类推，一直到第 9 组，即所有以 9 结尾的数字。

除了第 0 组之外，每个组都`count(N/10)`对总数贡献了零位，因为它们都没有以零结尾。第 0 组贡献`count(N/10)`（计算除最后一位以外的所有数字）加上`N/10`（从最后一位数中计算零）。

由于我们是从 1 到 N，而不是从 0 到 N，这个逻辑对于个位数的 N 是不成立的，所以我们只是将其作为一种特殊情况来处理。

[更新]

到底是什么，让我们概括并定义数字在从 1 到`count(n, d)`的数字中出现的次数。`d``n`

```
/* Count how many d's occur in a single n */
unsigned
popcount(unsigned n, unsigned d) {
  int result = 0;
  while (n != 0) {
    result += ((n%10) == d);
    n /= 10;
  }
  return result;
}

/* Compute how many d's occur all numbers from 1 to n */
unsigned
count(unsigned n, unsigned d) {
  /* Special case single-digit n */
  if (n < 10) return (d > 0 && n >= d);

  /* If n does not end in 9, recurse until it does */
  if ((n % 10) != 9) return popcount(n, d) + count(n-1, d);

  return 10*count(n/10, d) + (n/10) + (d > 0);
} 
```

该案例的丑陋`n < 10`再次来自范围是 1 到`n`而不是 0 到... 对于任何大于或等于 的`n`单个数字，计数为 1，除非为 0。`n``d``d`

将此解决方案转换**为非递归**循环是 (a) 微不足道的，(b) 不必要的，并且 (c) 留给读者作为练习。

[更新 2]

最后`(d > 0)`一项也来自 1 到`n`而不是 0 到的范围`n`。当`n`以 9 结尾时，从 1 到`n`包含 1 的数字有多少个有尾数`d`？好吧，当`d`为零时，答案是`n/10`；当`d`非零时，它比那多一，因为它包括值`d`本身。

例如，如果`n`是 19 并且`d`是 0，则只有一个较小的数字以 0 结尾（即 10）。但如果`n`是 19 和`d`2，则有两个以 2 结尾的较小数字（即 2 和 12）。

感谢@Chan 在评论中指出这个错误；我已经在代码中修复了它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-09T21:44:35.413

让`Z(n) = #zero digits in numbers 0 <= k < n`. 显然，`Z(0) = 0`。

如果`n = 10*k + r, 0 <= r <= 9`，所有`10*k`数字`10*j + s, 0 <= j < k, 0 <= s <= 9`都在范围内，每个倒数第十个数字都是 0，所以是`k`零，并且每个前缀`j`（除了最后一个数字）出现十次，但我们不能数 0，所以前缀中的零个数是`10*(Z(k)-1)`。

数字中零的`r`个数`10*k, ..., 10*k + (r-1)`是`r*number of zeros in k + (r > 0 ? 1 : 0)`。

所以我们有一个`O(log n)`计算算法`Z(n)`

```
unsigned long long Z(unsigned long long n)
{
    if (n == 0) {
        return 0;
    }
    if (n <= 10) {
        return 1;
    }
    unsigned long long k = n/10, r = n%10;
    unsigned long long zeros = k + 10*(Z(k)-1);
    if (r > 0) {
        zeros += r*zeroCount(k) + 1;
    }
    return zeros;
}

unsigned zeroCount(unsigned long long k)
{
    unsigned zeros = 0;
    while(k) {
        zeros += (k % 10) == 0;
        k /= 10;
    }
    return zeros;
} 
```

要计算任意范围的数字，

```
unsigned long long zeros_in_range(unsigned long long low, unsigned long long high)
{
    return Z(high+1) - Z(low); // beware of overflow if high is ULLONG_MAX
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-10-12T11:11:56.157

我有一个非常简单的方法来计算 1 到 n 之间的 0。我希望这能解决您的问题并消除复杂性

```
function countZero(n) {
  var count = 0;
  while (n > 0) {
    count += Math.floor(n / 10);
    n = n / 10;
  }
  console.log(count);
}

countZero(99); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-29T07:14:15.377

```
class FindZero{

    public int findZero(int lastNumber){

        int count=1,k;
        if(lastNumber<10)
            return 0;
        else if(lastNumber==10)
            return 1;
        else{

            for(int i=11;i<=lastNumber;i++){
                k=i;
                while(k>0){

                    if(k%10==0)
                        count++;
                        k=k/10;
                }
            }
            return count;
        }
    }
    public static void main(String args[]){
        FindZero obj = new FindZero();
        System.out.println(obj.findZero(1234));
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T21:10:45.247

我处理这个问题的方式：

数字可以在 1 到 N 的范围内：

所以，我把它分解成这样的范围：

```
Rangle      : #Digits   :   #Zeros
1   -   9   :   1       :   0
10  -   99  :   2       :   9 (number of all the possible digits when zero is at units place=> _0 ie, 1,2,3,4,5,6,7,8,9
100 -   199 :   3       :   20 => 10 (#digits when zero is at units place) + 10 (#digits when zero is at tens place)
200 -   276 :   3       :   18 => 8 (#digits when zero is at units place) + 10 (#digits when zero is at tens place)
300 -   308 :   3       :   10 => 1 (#digits when zero is at units place) + 9 (#digits when zero is at tens place)
1000-   1008:   4       :   19 => 1 + 9 + 9 
```

现在对于任何给定的范围 1 - N，我希望能够将数字分解为这些范围并使用上述逻辑来计算零的数量。

测试运行：

对于给定的数字 N：

```
- compute number of digits: len
- if len = 1 : d1: return 0
- len = 2: d2_temp: count # of digits that can possibly occur when 0 is at unit's place 
            : for e.g. 76: so numbers can be between 10 - 76: (7 - 1) + 1 = 7
         : d2: sum(d2_temp, d1)
- len = 3: return d3 : sum(d3_temp, d2)
         : compute d3_temp: 
         : for e.g. n = 308 : get digit at 10^(len-1) : loopMax 3
         : d3_temp1: count number of zeros for this loop: 1 * 100 to (loopMax -1) * 100 : (loopMax-1) * 20
         : d3_temp2: for n count (#digits when zero is at units place) + (#digits when zero is at tens place)
         : d3_temp = d3_temp1 + d3_temp2 
```

让我们尝试概括：

```
99 : sum( , )
    : d3_temp: 
    : loopMax: n = 99 : n/(10^1) : 9
    : d3_temp1: 8 : (9-1) * (10*(len-1)) : (loopMax - 1) * 10 * (len-1)
    : d3_temp2: 1 : for len, count #0s in range (loopMax * 10 * (len-1)) to n : count(90, 99)
    : d3_temp = 8 + 1
    : sum(9, 0)
    : 9 
```

从这里开始我遇到了一些麻烦，但这会起作用。

# objective-c - 为什么 ARC 让我的应用程序如此缓慢？

> ID：11891986
> 
> 赞同：1
> 
> 时间：2012-08-09T21:08:19.220
> 
> 标签：objective-c, ios, xcode, automatic-ref-counting

我正在尝试将我的应用程序转换为 ARC，但是当我这样做时它会减慢 5 倍 :(

在我的图表视图中，我有这个迭代所有点的代码块：

```
 NSLog(@"%f", CACurrentMediaTime());
            for (NSUInteger xIndex = firstXValueOnScreen; xIndex <= lastXValueOnScreen; xIndex++)
            {
                float value = 5; //This used to call a function to get the value but I took out the function call to better demonstrate that this seems to be just a general slowdown...

                if (extremesUninitialized)
                {
                    yMax = value;
                    yMin = value;
                    extremesUninitialized = NO;
                }
                else
                {
                    yMax = MAX(yMax, v,alue);
                    yMin = MIN(yMin, value);
                }
            }
            NSLog(@"%f", CACurrentMediaTime()); 
```

在 ARC 之前，此块在大约 0.01 秒内执行。然后，我使用 ARC 转换器，它愉快地将我的代码转换为 ARC，没有任何抱怨。在此之后，我在相同的情况下运行相同的代码并得到 0.05 秒的结果！它减慢了 5 的倍数......所以我从快照中恢复了我的旧项目，所以没有更多的 ARC，并且进行了 10 次测试，并且始终得到 0.01 秒的结果。然后我将其转换回 ARC 并始终获得 0.05 秒。XCode 在这里没有给我任何关于为什么会发生这种情况的线索......但是我的其余代码也在变慢。会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T22:09:45.270

我有兴趣查看有问题的文件。在任何情况下，您始终可以为所有内容打开 ARC，但对于任何有问题的文件（在性能优化之后）将其关闭。这就是我们在 Apple 构建大量产品的方式。

我们通常为整个项目打开 ARC，然后为特定文件关闭它。任何关闭它的文件都会得到这个：

```
#if __has_feature(objc_arc)
#error This file should not be built with ARC until blah-blah-blah is fixed.
#endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:32:46.153

只能有几个选项 - 它必须是以下之一：

1）您的旧代码在 -Os 处使用优化器，而新代码没有（因此，您应该使用“发布”进行测试）而不是“调试”配置。

2）（lastXValueOnScreen - firstXValueOnScreen）的值，即你正在做的范围，是不同的（谁知道什么原因，你必须做一些搜索）

3）当您启用 ARC 时，有一些后台任务 - 一些线程 - 正在疯狂运行，但它通常不存在。

所以关于如何找到这个的一些想法：

1）仔细检查两者中的Scheme配置设置，确保其发布（不确定ARC是否在Debug中运行较慢，但Debug肯定比Release慢）。

2) 将这两个值添加到 for 循环上方的日志语句中。

3) 在您执行任何其他操作之前，将整段代码移至您的 appDelegateLaunched 方法，或者甚至更好地将其放入 appDelegate 中的“+(void)initialize”方法中（因此它在您的任何其他代码之前运行）。为您的两个变量硬编码大值。

我在 ARC 上读过的每一个文档都说它更快；每个 Apple 工程师都说它更快；我的经验是它更快。

# ruby-on-rails - Rails 回溯中视图附加的数字是什么意思？

> ID：11891990
> 
> 赞同：0
> 
> 时间：2012-08-09T21:08:31.683
> 
> 标签：ruby-on-rails

以下是失败规范的示例：

```
2) widgets/new renders new sentiment form
     Failure/Error: render
     ActionView::Template::Error:
       undefined method `each' for nil:NilClass
     # ./app/views/widgets/new.html.erb:13:in `_app_views_widgets_new_html_erb__3591031757452814763_2164570860'
     # /Users/user/.rvm/gems/ruby-1.9.3-p194@myapp/gems/actionpack-3.2.7/lib/action_view/template.rb:145:in `block in render'
     # /Users/user/.rvm/gems/ruby-1.9.3-p194@myapp/gems/activesupport-3.2.7/lib/active_support/notifications.rb:123:in `block in instrument'
     ....... 
```

这一切意味着什么：_app_views_widgets_new_html_erb__ **3591031757452814763_2164570860**？它是否在某处呈现临时文件？为什么会有这些特定的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:51:35.200

当 rails 渲染你的模板时，它首先将它们编译成真正的 ruby​​ 代码。您可以在[actionpack/lib/action_view/template.rb](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/template.rb#L324-326)的 rails 源代码中看到这一点。

这是通过 3 个步骤完成的。

1.  它会创建一个包含 ruby​​ 代码的字符串，例如`@output_buffer += "some_text"; @output_buffer += some_expression; ...`您的 erb（或 haml，或任何您喜欢的）模板。
2.  它定义了一个使用`eval`.
3.  第一次运行该方法时，ruby VM 会自动将其编译为字节码。

包含已编译代码的方法的名称是使用以下方案创建的（参见 template.rb 的第 325 行）：

```
def method_name #:nodoc:
  @method_name ||= "_#{identifier_method_name}__#{@identifier.hash}_#{__id__}".gsub('-', "_")
end 
```

所以这些数字实际上是`@identifier`（通常是模板文件的路径）和当前模板实例的对象 id 的哈希值。

# c# - 设计决策 - 带委托的继承

> ID：11891992
> 
> 赞同：0
> 
> 时间：2012-08-09T21:08:38.117
> 
> 标签：c#, design-patterns, inheritance, composition

我有以下对象模型：

```
class CheckoutAd{
  int AdId;
  int ImpressionCap;
  int ClickCap;
  int ConversionCap;
  // ...
}

class SiteAd{
  int AdId;
  int ImpressionCap;
  int ClickCap;
  //...
} 
```

如您所见，有重复的代码。所以我决定将重复的代码放在一个基类中，并从基类扩展上述类，如下所示：

```
class BaseAd{
   int AdId;
   int ImpressionCap;
   int ClickCap;
} 
```

但后来我想到了未来会有一个 MobileAd 类，这个基类可能不是一个好的候选者，那么我将不得不改变它。

我应该委托这些属性吗？

你会怎么做？

我应该使用策略模式吗？我将如何委派这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:29:42.143

我没有看到重复的代码，我看到几个类的成员具有相同的名称和类型。

```
Is CheckoutAd a SiteAd? (yes inherit)
Does CheckOutAd have a SiteAd? (yes aggreate)
No to both, leave them the heck alone.. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:14:23.180

由于我无法推测未来的类，从我在这里看到的情况来看，这对于接口或抽象类来说都是一个完美的地方。

一个抽象类可以有方法和属性填充需要被覆盖。

由于您只有空属性，因此界面看起来更合适。

看看：[C# 接口 - 有什么意义？](https://stackoverflow.com/questions/6802573/c-sharp-interfaces-whats-the-point)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:25:16.330

这在很大程度上取决于您的应用程序、您的目标和您的时间框架。

您需要实施任何您认为会**降低复杂性**的解决方案。如果您的对象要共享行为和数据，并且从基类继承它们将使您的应用程序更易于理解、更易读且不易混淆，那么请务必确定所有的用例广告，构建基类并继承。

你不想做的是根据一些你还没有想到的“可能”场景来选择一个设计。你最终会得到一些对当前状态没有意义的东西，并且不必要地包含一个甚至可能不会发生的东西的结构。

确定您现在能想到的所有可能的广告类型。确定他们是否共享行为、数据、不共享或两者兼而有之。如果它们共享行为，则从定义该行为的基类继承。如果它们共享行为和数据，则从定义行为和数据的基类继承。如果他们共享数据，则在类的实例中包含该数据。

请记住，您的目标是**降低复杂性**。现在使用最简单的解决方案，并在遇到问题时对其进行迭代。不要为您推测可能发生的问题进行设计。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T21:41:29.107

除非方法重复，否则我不会考虑任何继承。你们有共同的领域，那又如何？我无法准确推断出您的意思`...`，但可以说这是毫无意义的。因此，基类本身根本不使用泛化字段。

在我的团队中，我们在将重复字段移动到基类时发生了一些冲突。在基类中保留公共字段可能会违反[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)。说到未来：您可能决定为某个字段提供功能性 getter/setter 以赋予它一些副作用。您无法完全控制访问，因为它通过基类接口可见。

两个类中具有相同名称的字段应该具有与之相关的不同行为。如果行为相同，则创建基类并在那里提取重复的方​​法。

所以，我的一般建议：除非你概括链接行为，否则不要概括数据成员

PS托尼霍普金森说得对

# php - PHP-MYSQL-Innodb 插入速度慢

> ID：11891994
> 
> 赞同：-2
> 
> 时间：2012-08-09T21:08:46.193
> 
> 标签：php, mysql, innodb

目前我已经构建了一个 PHP 脚本来将一个大型数据集导入到 Innodb 表中。该脚本从文件中读取记录，构建多个查询（数据高度相关）并将它们插入数据库。我在一个新的 debian VM 上创建了这个脚本，该 VM 由一个内核和 2GB 内存构建。

需要明确的是，新鲜的意思是它是一个干净的图像，只安装了包 mysql-server mysql-client 和 php5 。

在 VM 2 中运行脚本时，数据文件（每个 60MB+）在 8 秒内完成，插入超过 5,000 条记录。

然后我将此脚本移到当前保存数据并将保存数据库的服务器上。该服务器具有 28GB RAM 和 2 个 XEON（6 核）处理器。它也是安装了默认 mysql-client、mysql-server 和 php5-cli 的全新安装。需要明确的是，当脚本开始时数据库是空的，并且服务器除了 SSH 和标准系统进程之外没有其他进程在运行。

在此服务器上运行脚本时，它的移动速度非常慢（30 秒，只插入了 180 条记录）。

我已经在 my.cnf 文件中尝试了 skip-name-resolve，但它似乎什么也没做。当脚本运行时，如果我在 mysql 中查看进程列表，我会看到插入查询不断处于“释放项目”状态。关于什么可能导致放缓的任何想法？

这是服务器上的 my.cnf 给出的问题::

```
[client]

port            = 3306
socket          = /var/run/mysqld/mysqld.sock

[mysqld]
#
# * Basic Settings
#
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
language        = /usr/share/mysql/english
skip-external-locking
skip-name-resolve
#
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
bind-address            = 127.0.0.1
#
# * Fine Tuning
#
key_buffer              = 16M
max_allowed_packet      = 16M
thread_stack            = 192K
thread_cache_size       = 8
# This replaces the startup script and checks MyISAM tables if needed 
# the first time they are touched
myisam-recover         = BACKUP
#max_connections        = 100
#table_cache            = 64
#thread_concurrency     = 10
#
# * Query Cache Configuration
#
query_cache_limit       = 1M
query_cache_size        = 16M
#
# * Logging and Replication
#
# Both location gets rotated by the cronjob.
# Be aware that this log type is a performance killer.
# As of 5.1 you can enable the log at runtime!
#general_log_file        = /var/log/mysql/mysql.log
#general_log             = 1
#
# Error logging goes to syslog due to /etc/mysql/conf.d/mysqld_safe_syslog.cnf. 
#
# Here you can see queries with especially long duration
#log_slow_queries       = /var/log/mysql/mysql-slow.log
#long_query_time = 2
#log-queries-not-using-indexes
#
# The following can be used as easy to replay backup logs or for replication.
# note: if you are setting up a replication slave, see README.Debian about
#       other settings you may need to change.
#server-id              = 1
#log_bin                        = /var/log/mysql/mysql-bin.log
expire_logs_days        = 10
max_binlog_size         = 100M
#binlog_do_db           = include_database_name
#binlog_ignore_db       = include_database_name 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:57:00.100

所以我发现了问题所在。在开发服务器上，数据库最初是 MyISAM，但在开发过程中被转换为 Innodb。这导致事务和自动提交被禁用。

迁移到新服务器时，数据库从一开始就创建为 Innodb，使事务和自动提交处于活动状态。

这导致 MySQL 在每次查询后自动提交，从而导致速度急剧下降。

然后修复是添加查询，

```
Start transaction 
```

在加载每个文件之前，然后立即提交。

性能现在超过了 VM。

# jasmine - 使用 PhantomJasmine 时 PhantomJS “找不到变量：需要”

> ID：11891998
> 
> 赞同：10
> 
> 时间：2012-08-09T21:09:14.760
> 
> 标签：jasmine, phantomjs

我想使用 Phantomjs 和 Jasmine 对 javascript 进行单元测试。Phantomjs 的网站建议我使用单独的东西来处理这个问题，特别是 PhantomJasmine。我下载了 PhantomJasmine 并运行了这个例子。一切都很顺利。然后我将该行添加`var system = require('system');`到 example_spec.js 的顶部。当我尝试运行我得到“ReferenceError：找不到变量：需要”的示例时，Phantomjs 现在会引发错误。所以，我想做一些事情，比如启动浏览器，但看起来我不能结合 jasmine 和 phantomjs 语法。我只能使用 Phantomjs 运行纯 jasmin。如何在同一个文件中同时使用两者？喜欢：

```
console.log('Loading a web page');
var page = new WebPage();
var url = "http://www.phantomjs.org/";
page.open(url, function (status) {
    //Page is loaded!
    describe("A suite", function() {
      it("contains spec with an expectation", function() {
        expect(true).toBe(true);
      });
    });
    phantom.exit();
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:54:05.583

这不是你应该如何使用它。控制 phantomjs 的代码不应与 jasmine 规范混淆，反之亦然。

您应该将您的规范分成 .js 文件，并使用 HTML 规范运行程序创建标准 jasmine 设置，该运行程序加载规范 .js 文件并在 phantomjs 中打开该 HTML 文件。

另一种解决方案是使用带有 phantomjs 和 jasmine 的 grunt 来自动运行 jasmine 规范。

[https://github.com/cowboy/grunt](https://github.com/cowboy/grunt)
[https://github.com/creynders/grunt-jasmine-task](https://github.com/creynders/grunt-jasmine-task)