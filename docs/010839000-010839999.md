# StackOverflow 问答 10839000-10839999

# php - 使用盐登录系统的优势？

> ID：10839000
> 
> 赞同：0
> 
> 时间：2012-05-31T18:15:26.300
> 
> 标签：php, login, token

我想建立自己的登录系统以尽可能安全。使用 MD5 加密密码并使用

```
$password = strip_tags($password);
$password = mysql_real_escape_string($password);
$password = md5($password); 
```

我在一些例子中看到了令牌，但并不真正理解它的用处。编辑-我被纠正了，我看到的是盐而不是令牌。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:17:19.863

它不叫令牌，它叫盐。

如果我们不对密码加盐，您可能会有重复的密码哈希。

如果我和其他人的密码相同（比如说 StackOverflow）

*   我`StackOverflow`——`84d7dc19766c446f5e4084e8fce87f82`
*   别人`StackOverflow`——`84d7dc19766c446f5e4084e8fce87f82`

但加了盐，

*   我`StackOverflowMeSalt`——`9a0126445be2d0b0bc6ab9728aae1323`
*   别人`StackOverflowSomeone elseSalt`——`66f6bd8d92f084dabd7e2dd588b2bfcb`

此外，散列时无需使用`mysql_real_escape_string`或`strip_tags`使用密码。这将使密码更加不安全。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T18:28:22.403

盐增加了一层额外的安全性 - 无法再在反向 MD5 数据库中查找 md5 哈希。

例如，如果有人入侵了您仅使用 md5($password) 的网站（密码是 'somepassword'），他可以在使用[彩虹表的](http://en.wikipedia.org/wiki/Rainbow_table)[反向 MD5 数据库](http://www.md5decrypter.com/)中查找您的密码，并且它将显示为纯文本。但是使用盐（盐是'W*&sju'），纯文本实际上是'W*&sjusomepassword'，并且不会在在线数据库中找到。

因此，在您的服务器上，在将密码输入数据库之前，先用盐对密码进行哈希处理：

```
md5($password . 'somesalT&^@*!'); 
```

然后在登录时检查密码：

```
$hashed_password = md5($_POST['password'] . 'somesalt&^@*!'); 
```

建议：

*   对盐进行硬编码，因此即使有人要获得数据库访问权限，他们也不会拥有您的盐……使您的哈希更加安全。
*   盐应该至少有 3 个字符长，大写、小写和特殊字符。
*   要求密码长度至少为 7 个字符。因此，这将为您留下一个 10 个字符长、大写、小写、特殊字符的密码哈希。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T18:34:50.783

您使用盐的原因是因为存在[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)。

例如， 的 MD5 哈希`password123`是`482c811da5d5b4bc6d497ffa98491e38`.

如果在您的数据库中发现了上述哈希，则可以将其与`password123`可能存在的已知哈希表进行比较。因此，如果找到匹配项，则将知道纯文本密码。

但是，如果您使用只有您自己知道的盐，例如`mY_r4nD0m_Sa1t`，当您执行以下操作时：

```
md5($password.$salt); 
```

这将产生一个`f5a299746a9dbc005e423259283bc56b`与上述已知散列完全不同的散列`password123`。

不过，在所有情况下，我都建议您使用[phpass](http://www.openwall.com/phpass/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T18:23:00.797

是的，它被称为“盐”。
通常，您使用 PHP 中的密码加密登录详细信息并生成随机盐。然后盐与加密的登录详细信息一起存储在数据库中，并在解密时使用。基本上它使每个用户的密码随机。

# regex - 匹配特定标签之后的所有标签

> ID：10839002
> 
> 赞同：0
> 
> 时间：2012-05-31T18:15:47.557
> 
> 标签：regex, textmate

我在这里打败了这匹死马：

```
<p style='margin: 5px 0;'>I wan't be matched!</p>
<p style='margin: 5px 0;'>me 2!</p>
<ul>
    <li>
      <b>Lorem</b>
      ipsum sit dolor amet
    </li>

    <li>
      <b>Lorem</b>
      ipsum sit dolor amet
    </li>

    <li>
      <b>Lorem</b>
      ipsum sit dolor amet
    </li>

    <li>
      <b>Lorem</b>
      ipsum sit dolor amet
    </li>

    <p style='margin: 5px 0;'>can i haz regex</p>
    <p style='margin: 5px 0;'>NO! you can't</p>
    <li>
      <b>Lorem</b>
      ipsum sit dolor amet
    </li>   
<ul> 
```

从那我需要一个改变所有的正则表达式

```
 <p style='margin: 5px 0;'>can i haz regex</p> 
```

在标签之后并将其转换为

```
 <li>can i haz regex</li> 
```

就这么简单，但考虑到我是正则表达式的真正菜鸟，我无法完成它。

我正在尝试用look behind expression，但没有成功

```
 (?m:(?<=(.*?<ul>.*?)(<p style='margin: 5px 0;'>.*?</p>)+) 
```

我试图弄清楚大约 2 小时，但我似乎无法让它发挥作用。所以提前感谢任何可以解释我应该如何解决这个问题的人。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:18:03.217

如果要更改的行必须在`<ul>`and之间`</ul>`，那么您可以尝试以下`sed`命令：

```
sed "/<ul>/,/<\/ul>/ s|<p style='margin: 5px 0;'>\(.*\)</p>|<li>\1</li>|g" test.html 
```

从我也指定地址范围的意义上说，这**不仅仅是**使用正则表达式。但是，您确实需要小心将这些工具与 HTML 一起使用，但我同意这些评论。首先，您不想依赖空格或标签如何位于行上。

另外，也许您可​​以告诉我们您使用的是什么语言（如果重要的话）。

# php - Twitter 模块和天气模块严重延迟 joomla 网站

> ID：10839007
> 
> 赞同：0
> 
> 时间：2012-05-31T18:16:08.477
> 
> 标签：php, twitter, joomla, rss, feed

我有一个 joomla 网站，它适用于所有模块。我将我的网站安装在另一台服务器上，但由于 Twitter 模块和天气模块当然会读取 rss 提要，因此延迟太多。如果我禁用这些模块，则站点的性能很好。谁能告诉我新服务器有什么问题。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:23:59.180

通常在 Joomla 上！Twitter/Facebook/Weather 的模块在服务器上做的很少——它们中的大部分使用 Javascript 从源网站（即不是您的网站）检索数据。

鉴于此，任何放缓通常与以下因素有关：

1.  您的互联网连接速度*或*
2.  提供数据的服务的速度

使用您的浏览器分析工具（[Chrome](https://developers.google.com/speed/tools)、[Safari](http://developer.apple.com/library/safari/#documentation/appleapplications/Conceptual/Safari_Developer_Guide/OptimizingYourWebsite/OptimizingYourWebsite.html)、[Firefox](http://getfirebug.com/)）来确定到底发生了什么——您可能会发现它不是您的服务器。

# javascript - SoundCloud 流 API 为某些 URL 提供 401 和 403 错误

> ID：10839012
> 
> 赞同：4
> 
> 时间：2012-05-31T18:16:28.190
> 
> 标签：javascript, sdk, soundcloud

我有一个 js 函数可以按曲目 ID 播放曲目：

```
SC.stream("/tracks/" + trackID, function(sound){
  sound.play();
}); 
```

但是，我只收到某些轨道 ID 的 401 和 403 错误...

返回错误的 ID 示例：

*   18163056
*   21792172

我已经为这些 ID 尝试了 SC.stream，并且对于未经身份验证（仅使用客户端 ID）和经过身份验证的用户都尝试了更多，并获得了相同的结果。

我已经看到它表明如果有人禁用嵌入在跟踪选项中可能会发生这种情况，但是如果您转到跟踪页面并共享它，这些显然不会被禁用（因为嵌入 URL 已显示并有效）

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:36:04.307

在仍然允许使用小部件时，可以通过 API 禁用 SoundCloud 轨道以进行流式传输。

如果您 GET [http://api.soundcloud.com/tracks/18163056?client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/tracks/18163056?client_id=YOUR_CLIENT_ID)您可以检查流属性，对于您发送的两个曲目，该属性都是错误的。

# linux - 反向ssh隧道

> ID：10839014
> 
> 赞同：3
> 
> 时间：2012-05-31T18:16:42.197
> 
> 标签：linux, ssh, cron, tunnel

我在现场有一个嵌入式设备，通过 USB 手机棒连接到互联网。为了能够访问它，我在端口 19996 上建立了一个反向 ssh 隧道到我的家用 PC 以便能够访问它。

现在我每 10 分钟重新建立一次隧道（通过 cron），以确保我几乎可以不间断地访问，即使提供商决定更改我的 IP。

现在我意识到我的进程列表充满了

```
"4383 root     ssh -R 19996:localhost:22 -f -N user@host" 
```

并且 netstat 也加载了连接。我如何确保不会发生这种情况？我一次只需要打开一条隧道，而不是 100 条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:01:26.580

我写了followiung shell script，它似乎工作正常！

```
#!/bin/sh
RETVAL=`netstat | grep 'S0106b0487afe2a57'| grep -c 'ssh ESTABLISHED'`
echo "${RETVAL} open tunnel(s)"
if [ "$RETVAL" -lt "1" ]
  then
        echo "starting reverse ssh tunnel"
        `ssh -R 19999:localhost:22 -f -N user@host`
        echo "done"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:19:21.963

使用 autossh 代替，如果它断开连接，它将重新建立连接。如果找不到，请尝试先在发行版的存储库中搜索，然后在网上搜索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T15:59:09.870

我编写了以下脚本，cron 每 5 分钟运行一次。尽管我希望这可以工作，但我仍然发现连接一直不允许我从远程端进入。回答上面的评论 - 它似乎并没有从 netstat 中消失。我检查了 netstat，它仍然会为连接显示“ssh ESTABLISHED”，因此当我的脚本运行时，我得到“套接字似乎已连接。假设反向 ssh 隧道运行良好”的结果。必须有更好的方法来测试远程端并获得表明它正在工作的结果？

```
#!/bin/bash

#$Id: ssh_reverse_tunnel.sh 14 2012-10-13 22:53:21Z root $

REMOTE_USER="user"
REMOTE_DOMAIN="domain"
SOCKETS_USED=`netstat -p ssh | grep 'ssh ESTABLISHED' | grep -c $(host $REMOTE_DOMAIN | awk {'print $NF'})`

establish_connecton() {
  echo "establishing reverse ssh tunnel connection..."
  ssh -R 12222:localhost:22 -R12223:localhost:5901 -f -N -T ${REMOTE_USER}@${REMOTE_DOMAIN} &
  echo "done."
  echo
  exit
}

if [ $(ps -ef | grep "ssh -R 12222" | grep -v grep | wc -l) == 0 ]; then
  echo "no reverse ssh tunnel connection exists."
  establish_connecton
fi

if [ "$SOCKETS_USED" -lt 1 ]; then
  echo "no reverse ssh tunnel sockets are connected. nuking stale pids and re-establishing connection"
  # check for stale pids and kill them if found.
  if [ $(ps -ef | grep "ssh -R 12222" | grep -v grep | wc -l) -gt 0 ]; then
    # stale pids exist, kill them...
    ps -ef | grep "ssh -R 12222" | grep -v grep | awk {'print $2'} | \
      while read PID; do
        echo "kill -9 $PID"
      done
  fi
  establish_connecton
else
  echo "sockets appear connected. assuming reverse ssh tunnel is running fine."
fi 
```

希望有人发现上述内容有用，并可以让我知道在哪里进行更多检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:20:18.580

只需在启动新进程后终止前一个进程（按 ID）。您可以从 ps 命令获取进程 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-28T14:44:39.013

您可以使用 ssh 命令套接字来检查连接是否仍处于活动状态。它应该如下所示：

```
#!/bin/bash
if ! ssh -S mysocket -O check user@host ; then
    ssh -M -S mysocket -R 19996:localhost:22 -f -N user@host
fi 
```

然后您可以使用关闭该特定连接

```
ssh -S mysocket -O exit user@host 
```

`ServerAliveInterval`将 设置为大于 0 的值也可能是值得的`-o ServerAliveInterval=N`。因为如果连接丢失，它会杀死你的隧道。

# java - 使用 VLCJ 进行设备捕获

> ID：10839017
> 
> 赞同：0
> 
> 时间：2012-05-31T18:16:56.570
> 
> 标签：java, vlc, libvlc, vlcj

我正在尝试使用 VLCJ 通过网络摄像头（USB 和 IP）进行视频捕获

dshow:// & rtsp://192.168.1.4:554/live.sdp

像 VLC 2.0.1 x64 Windows 7 一样工作。

但 VLCJ 2.1.0 示例没有任何作用

Java SE 1.7 x64

RTSP 错误：

```
[000000000fefed58] main demux error: corrupt module: C:\Program Files\VideoLAN\VLC\plugins\demux\liblive555_plugin.dll
[000000000059a4d8] main input error: open of `rtsp://192.168.1.4:554/live.spd' failed
[000000000059a4d8] main input error: Your input can't be opened
[000000000059a4d8] main input error: VLC is unable to open the MRL 'rtsp://192.168.1.4:554/live.spd'. Check the log for details. 
```

显示错误：

```
[00000000004fa4d8] main input error: open of `dshow://' failed
[00000000004fa4d8] main input error: Your input can't be opened
[00000000004fa4d8] main input error: VLC is unable to open the MRL 'dshow://'. Check the log for details. 
```

有任何想法吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T09:42:23.907

我刚刚找到了解决方案。我在尝试运行 dshow:// 时遇到了与您相同的问题。我认为问题出在实验性的 vlc2.0.1 x64 上。我只是使用 32 位配置（32 位 java，32 位 vlc）运行它，它运行良好。

# java - 在向 Android ListView 添加页脚时需要帮助，使其不会与 ListView 的条目重叠

> ID：10839024
> 
> 赞同：1
> 
> 时间：2012-05-31T18:17:34.193
> 
> 标签：java, android, xml

下面的代码适用于带有页脚的 ListView，我面临的问题是 ListView 中的较低条目与页脚重叠。那么您能否提出任何解决方案（因为我尝试了很多，并且每种情况下我都得到相同的重叠结果）或其他方式来做到这一点。提前致谢。为了以防万一，我还发布了页脚的代码。

```
<LinearLayout android:id="@+id/homeParentLayout"
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent">

    <ListView android:layout_height="wrap_content"
        android:layout_width="fill_parent" android:id="@+id/listV_main"
        android:listSelector="@android:color/transparent"/>

    <include android:id="@+id/footer" android:layout_height="wrap_content"
        layout="@layout/mymenu" android:layout_width="fill_parent"
        android:layout_centerHorizontal="true"
        android:layout_alignParentBottom="true">
    </include>

</RelativeLayout>
</LinearLayout> 
```

mymenu.xml 的代码

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:orientation="horizontal" 
android:gravity="center" 
android:layout_gravity="bottom">

<TableLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center_horizontal"
    android:gravity="center"
    android:orientation="vertical">

    <TableRow 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center_horizontal">
            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text=" "
                android:gravity="center"/>
            <ImageView 
                android:id="@+id/imgSetting" 
                android:src="@drawable/settings_gear_icon_256"
                android:layout_width="60dip"
                android:layout_height="60dip" 
                android:layout_marginLeft="10sp"
                android:clickable="true"/>

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text=" "
                android:gravity="center"/>

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text=" "
                android:gravity="center"/>
            <ImageView 
                android:id="@+id/imgLogin" 
                android:layout_width="60dip"
                android:src="@drawable/login_lock_256" 
                android:clickable="true"
                android:layout_height="60dip" />

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text=" "
                android:gravity="center"/>

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text=" "
                android:gravity="center"/>
    </TableRow>
</TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:36:49.970

使用这样的相对布局：声明相对布局，然后将页脚声明为第一个元素。这些属性是页脚的重要属性：

```
android:layout_alignParentBottom="true"
android:id="@+id/footer_id" 
```

然后用这个属性声明你的 listView：

```
android:layout_above="@id/footer_id" 
```

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:26:18.887

尽管 a`RelativeLayout`通常为您的布局设计提供了更大的灵活性，但在像这样相当简单的布局的情况下，您可以使用权重以类似的方式使用`LinearLayout`.

请注意，以下最显着的变化是在`ListView`声明中。'0dp' 的高度和 '1' 的重量将使`ListView`页脚（垂直）占据尽可能多的空间，而不会将页脚推离底部。实际上，这将使页脚底部对齐。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/homeParentLayout"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView android:layout_height="0dp" android:layout_weight="1"
        android:layout_width="fill_parent" android:id="@+id/listV_main"
        android:listSelector="@android:color/transparent" />

    <include android:id="@+id/footer" android:layout_height="wrap_content"
        layout="@layout/mymenu" android:layout_width="fill_parent"
        android:layout_gravity="center_horizontal" />

</LinearLayout> 
```

我还冒昧地从玩`RelativeLayout`.

# svn - 在存储库之外单独维护对 SVN 存储库的代码更改

> ID：10839025
> 
> 赞同：0
> 
> 时间：2012-05-31T18:17:34.977
> 
> 标签：svn, version-control, maintenance, mirroring

我有一个关于维护一些代码的最佳方法的问题。

在线 SVN 存储库上托管了一个项目。该项目正在积极开发中，因此主干不断变化。我也没有这个 repo 的写权限。

我对该项目进行了一些更改，需要对整个项目的许多模块进行更改。我的更改非常“小众”，将它们签入后备箱没有任何意义。此外，我的变化将不断发展。

我更改的文件在主干中没有得到太多修改，因此即使主干不断更改，如果将它们应用于主干，我的更改很可能会保持有效。

有什么方法可以在不镜像整个存储库的情况下单独维护我的更改？到目前为止，我一直在维护我不断合并的 repo 的镜像，这非常耗时。我没有时间，所以我的更改与最新的不同步。

从本质上讲，如果想要使用我的更改的人必须执行以下操作，那就太好了：

1.  从 SVN 存储库中查看主干（或特定标签）
2.  从某个地方单独查看我的最新更改（或特定标签）
3.  使用一些脚本（我可以开发）合并两者

所以现在他们有来自 repo 的最新主干，以及我最新的更改，自动合并并准备好使用。

我愿意使用任何系统来维护我所做的更改。不必是 SVN 或任何特定的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:23:38.287

您可以使用[git-svn](http://schacon.github.com/git/git-svn.html)克隆 subversion 存储库，然后继续使用 git-svn 克隆。如果你这样做了，想要你的代码版本/分支的人就不需要你描述的三步过程；相反，他们只会“git clone”您的仓库（或您指定的标签等）。

您还可以维护 svn 存储库主干的多个分支，或单独跟踪多个 svn 分支等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:23:56.733

如果您可以获得写入权限，那么最好的办法是请求分支。然后你可以将你的更改提交到一个分支并使用合并来保持它与主干的更新。如果不是，那么我会将其视为经典的“供应商分支”场景。

[https://www.google.com/search?q=svn+vendor+branch](https://www.google.com/search?q=svn+vendor+branch)

基本上，只需在本地创建自己的 SVN 存储库并使用脚本在存储库中维护原始主干的副本。在您的存储库中创建一个分支并在那里提交您的更改。然后只需定期使用脚本将您的存储库中的主干与主干中的主干同步，然后将该主干中的更改合并到您的分支。

我猜你也可以使用 git-svn 来维护一个主干的 git 镜像，然后只使用 git 分支来存储你的更改并使它们保持同步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:24:53.620

听起来也许分支是最好的选择。它将可供所有用户使用，并允许您提交以帮助保持您的更改可管理和版本控制。人们可以在您的分支上与您一起工作，并且您始终可以将主干中的更改合并到您的分支，反之亦然。

# iphone - Iphone 从核心数据中获取数据并显示在表格中

> ID：10839026
> 
> 赞同：0
> 
> 时间：2012-05-31T18:17:42.830
> 
> 标签：iphone, core-data, uitableview

错误：“原因：'+entityForName：找不到实体名称的 NSManagedObjectModel”

我使用选项卡式应用程序创建了一个新项目。我创建了多个选项卡，然后在我的 delegate.h 文件中添加了核心数据函数，如下所示。

```
 @property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext;
    @property (readonly, strong, nonatomic) NSManagedObjectModel *managedObjectModel;
    @property (readonly, strong, nonatomic) NSPersistentStoreCoordinator *persistentStoreCoordinator;

    - (void)saveContext;
     - (NSURL *)applicationDocumentsDirectory; 
```

现在我改变了 delegate.m 文件如下

```
 @synthesize window = _window;
    @synthesize managedObjectContext = __managedObjectContext;
    @synthesize managedObjectModel = __managedObjectModel;
    @synthesize persistentStoreCoordinator = __persistentStoreCoordinator;

    #pragma mark -
    #pragma mark Application lifecycle

    - (void)saveContext
    {
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
     if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
           // Replace this implementation with code to handle the error appropriately.
           // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
              } 
           }
         }

         - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
             {
             // Override point for customization after application launch.

              return YES;
               }

        - (void)applicationWillResignActive:(UIApplication *)application
           {

            }

      - (void)applicationDidEnterBackground:(UIApplication *)application
           {

            }

      - (void)applicationWillEnterForeground:(UIApplication *)application
         {

          }

      - (void)applicationDidBecomeActive:(UIApplication *)application
         {
         }

      - (void)applicationWillTerminate:(UIApplication *)application
         {

         [self saveContext];

           }

  #pragma mark - Core Data stack

     - (NSManagedObjectContext *)managedObjectContext
        {
          if (__managedObjectContext != nil) {
              return __managedObjectContext;
               }

           NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
           if (coordinator != nil) {
               __managedObjectContext = [[NSManagedObjectContext alloc] init];
               [__managedObjectContext setPersistentStoreCoordinator:coordinator];
                 }
              return __managedObjectContext;
                 }

       - (NSManagedObjectModel *)managedObjectModel
           {
            if (__managedObjectModel != nil) {
                  return __managedObjectModel;
                    }
              NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"myapp" withExtension:@"momd"];
             __managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
               return __managedObjectModel;
                 }

      - (NSPersistentStoreCoordinator *)persistentStoreCoordinator
          {
           if (__persistentStoreCoordinator != nil) {
              return __persistentStoreCoordinator;
              }

            NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"myapp.sqlite"];

            NSError *error = nil;
            __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
            if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {

           NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
             }    

        return __persistentStoreCoordinator;
        }

    #pragma mark - Application's Documents directory

      - (NSURL *)applicationDocumentsDirectory
       {
         return [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory            inDomains:NSUserDomainMask] lastObject];
         }

       @end 
```

我有一个视图控制器，我在其中添加数据并且我也能够获取数据但是当我做同样的事情从表中获取数据时，我收到一个错误，它无法找到 coredata 表. 我的 myappTableViewController.h 文件如下：

```
 #import <UIKit/UIKit.h>
          #import "myappAppDelegate.h"

          @interface myappTableViewController : UITableViewController 

          @property(nonatomic,retain)NSManagedObjectContext *managedObjectContext;
          @property(nonatomic,retain)NSArray *arr;

         -(void)getData;

           @end 
```

在 myappTableViewController.m 文件中，我添加了以下代码：

```
 -(void)getData{

             NSEntityDescription *entity = [NSEntityDescription entityForName:@"Data" inManagedObjectContext:managedObjectContext];

             NSFetchRequest *request = [[NSFetchRequest alloc] init];

             [request setFetchBatchSize:20];

             [request setEntity:entity];

             NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];

            NSArray *newArray = [NSArray arrayWithObject:sort];

           [request setSortDescriptors:newArray];

           NSError *error;

           NSMutableArray *results = [[managedObjectContext executeFetchRequest:request error:&error] mutableCopy];

           [self setArr:results];

           [self.tableView reloadData];

           } 
```

我打电话给[self getData]；在 ViewDidLoad 中。和合成

```
 @synthesize managedObjectContext,arr;

       - (void)viewDidLoad
          {
            [super viewDidLoad];

             [self getData];
          } 
```

现在有什么地方我需要对托管对象上下文做一些事情。我想我只是在某处丢失了那一行代码。

普雷纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:16:44.387

你必须创建你的`xcdatamodeld`. 根据您的代码，应该调用它`myapp.xcdatamodeld`。在您的情况下，此模型应包含您要获取的实体`Data`。

# sql - 如何使用 SQL 中的输出子句将插入、更新、删除结果输出到新的临时表中？

> ID：10839032
> 
> 赞同：6
> 
> 时间：2012-05-31T18:18:03.553
> 
> 标签：sql, tsql, output-clause

目前，我正在尝试`update`在 SQL Server 中执行一个（但它可以是任何支持该[子句的](http://msdn.microsoft.com/en-us/library/ms177564.aspx)[DML 语句](http://en.wikipedia.org/wiki/Data_Manipulation_Language)），并且我想将输出放入本地临时表中，如下所示：[`output`](http://msdn.microsoft.com/en-us/library/ms177564.aspx)

```
update
    dbo.MyTable
set
    MyField = 30
output
    inserted.MyKeyField
into
    #myTempTable
from
    dbo.MyTable as t
where
    f.MyFilteredField = 8 
```

根据该`output`子句的文档（强调我的），我知道语法是正确的：

> 输出表
> 
> 指定将返回的行插入而不是返回给调用者的表。**output_table 可能是一个临时表**。

也就是说，我希望它可以像在语句的[`into`子句](http://msdn.microsoft.com/en-us/library/ms188029.aspx)上一样工作`select`，因为它只会创建表。

但是，我收到以下错误：

> 无效的对象名称“#myTempTable”。

如何将`output`子句（`inserted`或`deleted`）的结果放入临时表中？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T18:18:04.007

该`output`子句不会生成新表，因此您必须[事先生成与该`output`子句](http://blogs.msdn.com/b/sqltips/archive/2005/06/13/output-clause.aspx)中指定的结构匹配的表，例如：

```
select t.MyKeyField into #myTempTable from dbo.MyTable as t where 1 = 0 
```

请注意，您不必使用`select into`上面的语法，也可以使用[`create table`](http://msdn.microsoft.com/en-us/library/ms174979.aspx)。`output`最后，最简单的方法是创建一个与您的子句中的字段匹配的空临时表。

创建表后，“Invalid object name”错误将消失，DML 语句将正常执行（假设没有其他错误）。

# c++ - Visual Studio 静态链接的应用程序方式太小

> ID：10839037
> 
> 赞同：3
> 
> 时间：2012-05-31T18:18:17.173
> 
> 标签：c++, visual-studio-2010, static-linking

我正在用 C++ 构建一个 win32 应用程序。我有两个正在编译和在应用程序中使用的静态库项目（开源库）。这些项目的静态库都超过 50MB。但是，我的可执行文件只有 3MB。这似乎不对，即使我将可执行文件（仅）复制到另一台机器上，一切似乎都运行良好。

我已按照 VS2010 静态链接项目的所有 Visual Studio 说明进行操作。即属性->框架和引用->添加静态库项目。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:19:24.243

静态链接将仅包含您从库中使用的部分，因此您的可执行文件很可能比库小得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T18:21:31.403

生成可执行文件时，链接器通常会删除未使用的方法。但是，在生成静态库时，无法确定需要哪些方法，因此将它们全部包含在库中。只有在生成可执行文件时，才确定真正使用的库中的方法，然后删除其他方法。

# java - MVC 模式和 JTable 的

> ID：10839039
> 
> 赞同：1
> 
> 时间：2012-05-31T18:18:23.163
> 
> 标签：java, swing, model-view-controller, jtable

我已经在我的系统中实现了这个 MVC 模式：

[http://www.oracle.com/technetwork/articles/javase/index-142890.html](http://www.oracle.com/technetwork/articles/javase/index-142890.html)

一切都很好，花花公子，我有不同的观点，当他们需要将更改放入模型中或当更改反映在模型中时被调用时，他们会与控制器交谈。

现在，我需要这个使用 JTable 的新视图。我决定将模型扩展为 AbstractTableModels，现在只是我不确定这是否正确，但 Java 网站建议将模型绑定到表：

```
public TableDemo() {
    ...
   JTable table = new JTable(new MyTableModel());
   ...
} 
```

这只是感觉不对，我的视图中没有对我的模型的引用，那么我应该如何将我的视图中的模型提供给 JTable？我可以创建一个 ;getModel; 我的控制器中针对这种特殊情况的方法，但我仍然不知道是否有更好的方法来处理这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:55:43.520

你的方法是正确的；[`EnvTableTest`](https://stackoverflow.com/a/9134371/230513)是一个例子。该表的`getModel()`方法将返回您的`TableModel`. 另请参阅此相关[答案](https://stackoverflow.com/a/3072979/230513)。

# c# - 如何通过代码按住Ctrl键

> ID：10839040
> 
> 赞同：3
> 
> 时间：2012-05-31T18:18:24.473
> 
> 标签：c#, key, modifier-key

我正在编写一个单元测试，如果（Control.ModifierKeys == Keys.Control）..我可以为运行单元测试的特定情况添加一个标志或其他东西，但是在堆栈深处将调用某个函数太脏了！如何通过代码将 ModifierKeys 设置为 Ctrl？我正在使用 C#.Net 4.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:32:59.490

您可以使用 P/Invoke 调用[`keybd_event`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)合成击键的函数。

首先声明以下内容：

```
[DllImport("user32.dll", SetLastError = true)] 
static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

public const uint KEYEVENTF_KEYUP = 0x02;
public const uint VK_CONTROL = 0x11; 
```

然后，在您的测试中，使用：

```
// Press the Control key.
keybd_event(VK_CONTROL, 0, 0, 0);

try
{
    // Perform test.
}
finally
{
    // Release the Control key.
    keybd_event(VK_CONTROL, 0, KEYEVENTF_KEYUP, 0);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T19:37:54.567

按住：Keyboard.PressModifierKeys(ModifierKeys.Control);

释放：Keyboard.ReleaseModifierKeys(ModifierKeys.Control);

# java - java.lang.Void 和 void 有什么区别？

> ID：10839042
> 
> 赞同：72
> 
> 时间：2012-05-31T18:18:41.230
> 
> 标签：java, void

在 API

> “Void 类是一个不可实例化的占位符类，用于保存对表示 Java 关键字 void 的 Class 对象的引用。”

1.  什么是“不可实例化”的占位符类？什么时候`java.lang.Void`使用？如果类是“不可实例化的”，它有什么用？
2.  `java.lang.Void`和有什么区别`void`？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-09-27T22:00:48.767

`java.lang.Void`类似于[`java.lang.Integer`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html)。`Integer`是一种对原始类型值进行装箱的方法`int`。`Void`是一种对原始类型值进行装箱的方法`void`。

“但是等等，`void`没有任何可能的值！”

正确的！这就是`java.lang.Void`“不可实例化”的原因。:)

Java 类型系统的一个很好的特性是每个原始类型都有一个盒装的等价物。`int`有`Integer`，`long`有`Long`，`byte`有`Byte`……而且`void`有`Void`。如果`Void` *不*存在，那将是奇怪和不对称的。

`java.lang.Void`“那么和有什么区别`void`？”

简单的。`void`是原始类型。`Void`是继承自 的引用类型`Object`。它们的相似之处在于它们都没有任何可能的值。但是，从类型系统的角度来看，它们是两种截然不同的类型。

“但我在我的程序中没有任何用处`Void`。”

我对我的使用没有任何用处`GarbageCollectorMXBean`。*有些*功能没有非晦涩的用途。没关系。

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-03-15T05:20:14.030

**最常见的用途`Void`是反射，但这不是唯一可以使用它的地方。**

`void`是一个关键字，表示函数不会产生值。

`java.lang.Void`是引用类型，则以下内容有效：

```
 Void nil = null; 
```

（到目前为止，它并不有趣......）

作为结果类型（返回值类型`Void`为 的函数），它意味着函数 *always * 返回`null`（它不能返回除 之外的任何内容`null`，因为`Void`没有实例）。

```
 Void function(int a, int b) {
    //do something
    return null;
 } 
```

**为什么我想要一个*总是*返回 null 的函数？**

在泛型发明之前，我没有`Void`.

对于泛型，有一些有趣的案例。例如，a[`Future<T>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html)是另一个线程执行的异步操作结果的持有者。`Future.get`将返回操作值（类型`T`），并阻塞直到执行计算。

但是......如果没有什么可以返回怎么办？很简单：使用`Future<Void>`. 例如，在 Google App Engine 中，异步数据存储服务[`delete`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/AsyncDatastoreService)操作返回一个 future `. When`get() `is invoked on that future,`null` ，在删除完成**后返回。**[可以用Callable](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html)写一个类似的例子。

另一个用例是 a`Map`没有值，即 a `Map<T,Void>`。这样的映射表现得像 a `Set<T>`，那么当没有等效的实现时它可能很有用`Set`（例如，没有`WeakHashSet`，那么可以使用 a [`WeakHashMap<T,Void>`](http://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html)）。

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2012-05-31T18:19:53.823

*唯一的一点*就是握住`Void`，`Void.TYPE`有点像`void.class`。如果你有一个对返回的方法的反射引用`void`，并且你得到了它的返回类型，它就会返回`Void.TYPE`。

您不能也不应该将其用于其他任何事情。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-10-19T16:05:40.150

> Void 是 void 的一个自动装箱功能（从 JDK 1.5 开始）。
> 
> 好吧，它的自我解释是 Void 是引用，而 void 是原始类型。
> 
> 那么，哪里有要求必须使用 Void ？？？
> 
> 泛型类型的一种常见用法，我们不能使用原始类型。
> 
> 比如说，如果是 Android `AsyncTaks<Params, Progress, Result>`，如果我不想获得进度更新怎么办。我不能在这里使用 void (原始类型) 我们需要 java.lang.Void

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-31T04:18:36.030

另一个使用示例`Void`是`SwingWorker`

```
new SwingWorker<Void, Integer> () {
    @Override
    protected Void doInBackground(){
        ...
    }
    @Override
    protected void process(List<Integer> chunk){
        ...
    }
    @Override
    public void done(){
        ...
    }
}.execute(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-23T10:47:20.147

Void 很有用，因为有时您需要在方法本身之外指定方法的返回类型。

以这个[java 8 lambda 表达式](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)为例，它检查 EventResource 对象是否具有某些属性，使用名为 的方法`checkBenefitConcertInCentralPark`，传递给方法`checkCreatedEvent`：

```
eventChecker.checkCreatedEvent(TestEvents::checkBenefitConcertInCentralPark); 
```

该`checkBenefitConcertInCentralPark`方法是这样定义的（注意 Void 的使用）：

```
 public static Void checkBenefitConcertInCentralPark(EventResource eventResource) { 
        // JUnit code here...
        // assertThat(blablabla  :)  )

        return null; // we can only return null at the end of a method when returning Void
    } 
```

然后将`checkBenefitConcertInCentralPark`方法传递给方法`checkCreatedEvent`。

```
 // Function<EventResource, Void> describes the checkBenefitConcertInCentralPark method
    public void checkCreatedEvent(Function<EventResource, Void> function) { 
        function.apply(this.eventResource);
    } 
```

# javascript - JavaScript 数学公式结果

> ID：10839043
> 
> 赞同：0
> 
> 时间：2012-05-31T18:18:47.280
> 
> 标签：javascript, math

在其他堆垛机的帮助下，我转换了这个 Excel 公式

```
=+G15*B15/(1-(1+G15)^(-H15)) 
```

进入这个 javascript 公式（假设 G15=1.325%，B15=importe 和 H=plazo）：

```
(importe * 0.01325) / (1 - (Math.pow((1 + importe), -plazo) ) ); 
```

现在，当我在 excel 和 javascript 中计算 importe=10000 和 plazo=144 时，在 excel 中我得到 155.93，在 javascript 中我得到 132.5

我已经对这个和许多其他公式做过太多了，可能会有一些愚蠢的错误，但我看不到......就像阅读你写的拼写错误的单词并且没有发现错字。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:32:15.633

这是您想要的计算：
`=+G15*B15/(1-(1+G15)^(-H15))`
而不是使用您的转换代码示例：
`(importe * 0.01325) / (1 - (Math.pow((1 + importe), -plazo) ) )`这相当于：

=B15*G15/(1-(1+ ***B15*** )^(-H15))

所以你的公式应该是：

`(0.01325 * importe) / (1 - (Math.pow((1 + 0.01325), -plazo)));`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:21:55.283

试着`G15*B15`在你的 excel 公式中加上括号，看看答案是否匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:28:02.657

[10001 ^ -144 = 9.857038937816808015251426789861755167080725836 × 10^-577](http://www.wolframalpha.com/input/?i=10001%5E-144)

结果无法正确表示，将被“截断”为 0。`132.5`等于`(importe * 0.01325)`

[完整的 Javascript 编号参考](http://www.hunlock.com/blogs/The_Complete_Javascript_Number_Reference)

# regex - 在 .htaccess 中从 URL 中删除单词

> ID：10839047
> 
> 赞同：3
> 
> 时间：2012-05-31T18:18:58.330
> 
> 标签：regex, .htaccess, url, mod-rewrite, redirect

经过一个多小时的搜索，我仍然无法弄清楚如何将链接从 重定向`http://site/fr/other`到`http://site/other`.

我正在使用这段代码：

```
RewriteEngine On
RewriteRule ^/fr/(.*)$ /$1 [L,R=301,QSA] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T18:26:09.097

只需删除第一个正斜杠：`RewriteRule ^fr/(.*)$ /$1 [L,R=301,QSA]`.

在[http://htaccess.madewithlove.be/](http://htaccess.madewithlove.be/)试试这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T16:33:34.887

从 url 中删除 '-xyz-'

```
RewriteRule ^(.*)-xyz-(.*).html$ http://%{SERVER_NAME}/$1-$2.html [NC,R=301,L] 
```

从 url ' [http://yoursite.com/xyz/some-url.html](http://yoursite.com/xyz/some-url.html) ' 中删除 'xyz'

```
RewriteRule ^xyz/(.*)\.html$ $1-watches.html [L,R=301] 
```

从 url ' [http://yoursite.com/some-dir/xyz/some-url.html](http://yoursite.com/some-dir/xyz/some-url.html) ' 中删除 'xyz'

```
RewriteRule ^(.*)/xyz/(.*).html$ http://%{SERVER_NAME}/$1/$2.html [NC,R=301,L] 
```

# ruby-on-rails - 如何在不设置/覆盖现有默认助手类的情况下将类添加到 ruby on rails 中的表单？

> ID：10839049
> 
> 赞同：13
> 
> 时间：2012-05-31T18:19:00.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, form-for

`form_for`通过选项添加一个类`html: {class: "form-horizontal"}`会覆盖默认值`new_model`或`edit_model`类。如何在保留现有 form_helper 类的同时添加我的类？

我想：

`<form class="edit_model form-horizontal">`或者

`<form class="new_model form-horizontal">`

代替：

`<form class="form-horizontal">`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-14T19:02:33.630

我遇到了完全相同的问题。最终，我想出了这个解决方案

```
form_for @foo, :html => {:class => "form-horizontal #{controller.action_name}_model_name"} 
```

这对你来说可能有点太晚了，但也许其他人会发现它很有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-20T17:04:56.860

通过选项定义类`:html => {:class => '...'}`会覆盖默认构建器添加的任何类。但是，您可以在块中附加 CSS 类而不覆盖这些类。

使用`form_for`助手，`:class`如果未设置，则将是一个字符串。追加时注意前导空格。（**更新**：还请注意，在最新版本的 Rails 中，字符串将被*冻结*`+=`，因此必须使用它来代替`<<`以避免“无法修改冻结的字符串”错误。）

```
<%= form_for @model do |f| %>
  <% f.options[:html][:class] += ' form-horizontal' %>
  <%# ... %>
<% end %>

<form class="edit_model form-horizontal"> 
```

如果您使用`simple_form_for`帮助器，`options[:html][:class]`则将是一个数组，并且您不需要额外的前导空格（尽管它不会造成伤害）。

```
<%= simple_form_for @model do |f| %>
  <% f.options[:html][:class] << 'form-horizontal' %>
  <%# ... %>
<% end %>

<form class="simple_form edit_model form-horizontal"> 
```

如果您使用符号而不是模型，`form_for`则不会设置类，并且`options[:html][:class]`会`nil`在块中。但是，如果您这样做，则无论如何您都没有新的或持久的模型。

```
<%= form_for :model do |f| %>
  <% f.options[:html][:class] << ' form-horizontal' %>
  <%# ... %>
<% end %>

NoMethodError: undefined method `<<' for nil:NilClass 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T09:38:07.413

也许不是一个理想的解决方案，但你有没有考虑过用 JS/Jquery 来做？

例如：

```
$(document).ready(function(){
    $('form.edit_model').addClass('form-horizontal')
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-01T23:21:02.960

您可以像使用视图助手`dom_class(object, prefix = nil)`一样生成类名`form_for`。

直接在表单中执行它不是很干净，但是将其合并到帮助程序中可能只是票。例如：

```
# app/helpers/application_helper.rb
def class_for object, *additional_classes
  additional_classes.unshift dom_class(object, object.persisted? ? 'edit' : 'new')
end

# app/views/models/_form.html.erb
<%= form_for @model, :html => {:class => class_for(@model, 'form-horizontal')} do |f| %>
  <%# ... %>
<% end %>

<form class="new_model form-horizontal" ...> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T18:35:24.340

```
html: {class: "edit_model form-horizontal"} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-16T23:04:22.267

您是否尝试过使用合并方法？[ [http://ruby-doc.org/core-1.9.3/Hash.html#method-i-merge]](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-merge])类似 html = html.merge(new) { |key, value1, value2| value1 + " " + value2 } 可以让你将新值输入到类值中。[快速编辑：小心配置和测试实现，以免完全覆盖 html）

# python - 如何在 Django 中为模型字段编写验证器？

> ID：10839051
> 
> 赞同：1
> 
> 时间：2012-05-31T18:19:13.193
> 
> 标签：python, django, django-models, ip

我有这样的Django模型：

```
class Host():
    ipv4 = models.ChaField(max_length=39,verbose_name=_("IPv4"), validator= [ip_validator])
    ipv6 = models.CharField(max_length=39, verbose_name=_("IPv6"), 
                        blank=True, null=True, validators= [ip_validator]) 
```

我在 utils.py 中定义了 ip_validator 方法：

```
 from netaddr import * 
 def ip_validator(value):
 try:
     ip_version = IPAddress(value).version()
     if ip_version !=6:
         raise ValidationError(u'%s Not a  IPv6 address' % value)
 except ValueError:
     raise ValidationError(u'%s Not a IPv6 address' % value) 
```

它工作正常，但我必须为 IPv4 验证编写相同的方法。这似乎是冗余而不是一个好主意。是否可以为 IPv4 和 IPv6 编写通用方法。

我找到了以下示例来执行此操作，但无法理解它是如何将参数传递给验证器的：

```
 #!/usr/bin/env python

 class IPAddress(object):
     def __init__(self, version):
         self.version = version

 def validator_factory(ip_version):
     def validate_ip_address(ip_address):
         if ip_address.version != ip_version:
             print "Invalid! :("
         else:
             print "Valid! :D"
     return validate_ip_address

 ipv4_validator = validator_factory(4)
 ipv6_validator = validator_factory(6)

 ipv4_address = IPAddress(4)
 ipv6_address = IPAddress(6)

 ipv4_validator(ipv4_address)
 ipv4_validator(ipv6_address)
 ipv6_validator(ipv6_address) 
```

如果它是这样做的，那么我们必须通过`validator = []`

**更新！** 在models.py中：

```
 class Host():
     ipv4 = models.CharField(max_length=39,verbose_name=_("IPv4 address"),
                        validators=[validator_factory(4)]) 
```

这是调用验证器的正确方法吗？在 utils.py 中：

```
from netaddr import *

def validator_factory(ip_version):
    def validate_ip_address(ipv4):
        if IPAddress(ipv4).version != ip_version:
           print "Invalid! :("
        else:
           print "Valid! :D"
    return validate_ip_address 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:33:36.310

由于变量`validator_factory`的关闭而起作用。`ip_version`factory 返回的内部函数可以访问该`ip_version`变量。您将在您的字段的验证器列表中使用 `ipv4_validator`or`ipv6_validator`函数。

如果可能，我建议升级到 Django 1.4，以便您可以使用[`GenericIPAddressField`](https://docs.djangoproject.com/en/dev/ref/models/fields/#genericipaddressfield). 如果您需要坚持使用 1.3 版，您可以从 Django 1.4 反向移植代码。如果您坚持使用自己的验证器，我不会过多担心重复，只需专注于让两个验证器工作即可。

# linux-kernel - Linux 内核配置文件中模块或 CONFIG_* 参数的顺序是否重要？

> ID：10839055
> 
> 赞同：1
> 
> 时间：2012-05-31T18:19:25.783
> 
> 标签：linux-kernel

我面临一个内核补丁问题，我有一组适用于一个人而不是我的补丁。我们俩都使用了相同的 git 树，似乎它可能是用于内核编译的配置对我造成了这个问题。尽管我已向其他开发人员索要 .config 文件，但由于他是远程工作者，因此可能需要一些时间。

同时，我试图理解为什么在我的案例中会出现未定义的引用错误。

我的问题是，配置文件中模块或 CONFIG_* 参数的顺序是否重要？我怀疑某个地方是内核编译的顺序导致了这种情况。

任何帮助是极大的赞赏。我一直在进行大量搜索，但没有明确提及订单，也许这无关紧要。

任何调试技巧都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:19:35.100

不，配置文件中参数的顺序无关紧要。但是，如果您绝对确定您有相同的初始代码库和补丁 - 尝试`make clean`。有时它会有所帮助。

# ios - AVPlayer 不会在渐进式下载和流式传输之间切换

> ID：10839061
> 
> 赞同：6
> 
> 时间：2012-05-31T18:19:51.150
> 
> 标签：ios, video, streaming, avplayer

我有一个处理流媒体视频的应用程序。从 .m3u8 播放列表开始，它创建一个 AVAsset 数组，并通过

```
[player replaceCurrentItemWithPlayerItem:[AVPlayerItem playerItemWithAsset:[assetItems objectAtIndex:index]]] 
```

这很好用，但在此之前我想使用渐进式下载播放一段简短的 mp4 视频。我使用加载 AVPlayer

```
AVAsset *prerollAsset = [AVAsset assetWithURL:prerollURL];
[player replaceCurrentItemWithPlayerItem:[AVPlayerItem playerItemWithAsset:prerollAsset]]; 
```

它可以播放，但是当我像以前一样继续播放流视频时，我得到了 AVPlayerStatusFailed 的状态，并且 AVPlayerItem 中的错误是`The operation could not be completed`

为了让它工作，我需要为（渐进式下载）预卷创建一个 AVPlayer 对象，然后创建一个全新的 AVPlayer 对象来开始播放流视频。

单个 AVPlayer 实例是否可能无法播放渐进式下载视频和流式视频？还是我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T19:54:06.573

此错误是一个已知问题，据称已在 iOS 的下一个主要版本中修复。

在此期间，创建一个新的 AVPlayer 对象是唯一已知的解决方法。

# jquery - 奇怪的 Jquery 行为：单击弹出窗口上的关闭按钮后，另一个 jquery 插件停止工作

> ID：10839062
> 
> 赞同：0
> 
> 时间：2012-05-31T18:19:52.803
> 
> 标签：jquery, debugging

你能帮我解决这个问题吗？我没有足够的经验或知识。

访问：[http ://dev.holiday.ge/xhtml/login-signup.html](http://dev.holiday.ge/xhtml/login-signup.html)

单击“添加事件”，将出现弹出窗口，检查下拉菜单一切正常。关闭弹出窗口再次单击“添加事件”，检查下拉菜单 - 他们停止工作。

我怎样才能解决这个问题？或者为什么会这样？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:26:41.663

第一步，在 Chrome/Safari 或 Firebug/Firefox 中打开控制台。

第二步，做你描述的动作。

第三步，查看错误`Uncaught TypeError: Cannot read property 'cached_width' of undefined`

第 4 步，请注意，当您“关闭”下拉菜单时，实际上是从 DOM 中完全删除了它。因此，丢失了绑定到下拉列表的所有动作侦听器。

第 5 步，添加`.dropp()`仅在您打开事物时才发生的调用（或在关闭事物时停止删除它）

第6步，感谢我看到你的菜鸟错误；）

# tomcat - GWT 编译后不反映更改

> ID：10839065
> 
> 赞同：0
> 
> 时间：2012-05-31T18:19:54.357
> 
> 标签：tomcat, server, gwt, client-server, development-environment

我在 tomcat 服务器上运行 GWT 应用程序。即使在 GWT 编译之后，客户端代码中的更改也不会反映出来。我必须重新启动 Eclipse 才能看到更改。可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:55:05.107

当您在客户端进行更改时，如果您使用 GWT 的托管模式，您可能会立即看到这一点，您可能知道...要查看 Tomcat 中的更改，您必须重新编译应用程序并重新部署到雄猫。如果您只是使用 GWT 为托管提供的相同 Jetty 服务器，您可以简单地重新编译然后重新启动 Jetty 服务器，并运行您的应用程序而不包括托管模式 URL 参数`(?gwt.codesvr=127.0.0.1:9997)`。

正如您所说，您必须重新启动 Eclipse 才能看到更改，我猜您正在使用 Eclipse 中的 Tomcat 服务器……我不这样做，我只是运行一个独立的 Tomcat 服务器……Tomcat 允许您这样做热部署（即，您可以取消部署然后再次部署您的应用程序而无需重新启动服务器），这可以通过使用 Tomcat 管理器（默认情况下与 Tomcat 一起提供的 Web 应用程序）变得容易......尝试使用 Tomcat 管理器或了解如何在 Eclipse 中进行热部署。

# java - 在一个 Web 应用程序中使用多个 .war

> ID：10839067
> 
> 赞同：1
> 
> 时间：2012-05-31T18:20:06.877
> 
> 标签：java, jsf, jakarta-ee

我的公司正在创建多个 Web 应用程序，这些应用程序在功能上有一些重叠。我想将通用功能开发为一个单独的项目，并且由于它将由网页和托管 bean 组成，因此我假设该项目需要位于其自己的 .war 文件中。然后我可能会在 .ear 文件中部署两个（或更多）Web 应用程序。在网上做一些初步研究让我不确定 Web 应用程序如何协同工作。我是否能够在托管 bean 之间共享数据并将用户从一个 Web 应用程序内的页面引导到另一个 Web 应用程序？是使我的应用程序可维护的正确方法还是有更好的方法来分解项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:44:42.570

这是一种矫枉过正，但是：
您可以将应用程序的功能拆分为数据库、业务逻辑和表示 /web/ 层；“重叠”功能可以用于业务和数据库层。
Web 前端必须通过 corba、REST/LESS、soap 或替代方案与业务层对话，具体取决于您在第 2 层 /business/ 中拥有的连接器；

有关更多信息，请参阅[此图](http://upload.wikimedia.org/wikipedia/commons/thumb/5/51/Overview_of_a_three-tier_application_vectorVersion.svg/350px-Overview_of_a_three-tier_application_vectorVersion.svg.png)
或谷歌 3 层架构

我的公司几年前也遇到过同样的问题，他们最终部署了多个应用程序/一些业务逻辑重复是不可避免的/

现在，我们通过创建一个通用的、开放的、业务层服务层来重新发明轮子，该服务层可以通过 web 服务调用，并且部门内任何地方的其他应用程序/脚本都可以访问该服务层；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T04:26:15.167

将所有 WAR 文件包装到 EAR 文件中。并将库文件放入 EAR 中，以便所有 WAR 文件可以共享。

# turbo-pascal - Turbo Pascal“crt”单元的名称代表什么？

> ID：10839068
> 
> 赞同：5
> 
> 时间：2012-05-31T18:20:10.560
> 
> 标签：turbo-pascal

“阴极射线管”？“C 运行时”？对我来说都没有多大意义；完全不同的东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T18:22:49.190

你是对的，它是“阴极射线管”。过去的事情已经:) 2005 年之前最常见的显示类型。

CRT 单元中的大多数功能都与文本模式输出和颜色设置有关，这是可以在较旧的非图形 pre-VGA 显示器上完成的唯一“有趣”的事情。

我没那么老，但我记得早在 1995 年，我就一直在典型的 13 英寸 CRT 显示器上使用 Turbo Pascal（它们实际上是“显示器”的同义词），并且该单元包含 100% 自然操纵 CRT 显示的函数称为 CRT。是的，还有按键之类的，但是 CRT 是很自然的。不知道如何更好地解释它。它就像一个 3.5'' 软盘图标，是“保存文件”菜单项的隐喻。很多年轻人连软盘都没见过，现在只是一种“文化遗产”。

# windows-phone-7 - 响应处理期间发生意外错误（名称：ECN）WP7

> ID：10839070
> 
> 赞同：3
> 
> 时间：2012-05-31T18:20:16.537
> 
> 标签：windows-phone-7, ads

我正在 WP7 上开发一个应用程序，并决定在我的应用程序中添加一个 Microsoft 广告。

我添加了控件并设置了宽度/高度，插入了我的应用程序 ID 和广告单元 ID，并将其发布到我的手机上。但是我不断收到以下错误：

> 响应处理期间发生意外错误（名称：ECN）

将“test_client”用于应用程序 ID 并将“Image300_50”用于广告单元 ID 时，我没有收到此错误。

有没有人知道这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:54:42.907

我找到了 Microsoft 关于该错误的官方声明，似乎没有任何广告与您的应用相匹配。

> 此错误仅对在开发环境中调试 Microsoft Ad Control 使用的应用程序开发人员可见。自 2011 年 2 月 24 日起，此方案现在将返回错误“无可用广告”。在生产中，如果出现错误或没有要显示的广告，广告控件将根本不显示广告。没有用户面临影响。请参考获利最佳实践文档（附件），以查看您可以采用的最佳实践，以确保您最大限度地提高广告商希望接触您的应用程序受众的可能性。

我还发现，当我收到错误消息时，我使用了错误的控件宽度和高度，并修复了该问题以显示广告。

# flash - 裁剪 Flash 网络摄像头图像

> ID：10839071
> 
> 赞同：1
> 
> 时间：2012-05-31T18:20:16.847
> 
> 标签：flash, webcam

我有一个使用 Flash 网络摄像头视频拍摄人们图像的信息亭。我们使用的是 16:9 的相机，但我们需要拍摄 4:3 的图像。所以我只是制作了 4:3 的舞台并将视频添加到其中，然后在 kiosk UI 上解决了它。

但是...我正在使用 ExternalInterface 通过 base64 编码的 jpg 将这些图像发送到 javascript，效果很好。但是，当我抓取一个视频帧发送过来时，它当然仍然是 16:9。

所以我需要裁剪视频，以便当我抓取它（或添加它的显示对象）时，它只是 4:3 图像。

我尝试使用口罩，但由于某种原因不需要。

```
video = new Video(videoHeight, videoWidth); //backwards on purpose
video.x = -(videoWidth - stage.stageWidth) /2; //Center X
video.y = -(videoHeight - stage.stageHeight) /2; //Center Y

var maskSprite:Sprite = new Sprite();
maskSprite.graphics.drawRect(0,0,640,480);

video.mask(maskSprite); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:22:46.820

遮罩`video`不会产生影响，因为 的`draw`方法`BitmapData`是从自身绘制`video`（不包括遮罩）如果您将`video`遮罩放入另一个遮罩`Sprite`并`draw`在其上使用`Sprite`，那么遮罩将起作用。

然而，最好的解决方案可能是调整`BitmapData`正在绘制的矩形。您可能还需要调整宽度和高度`BitmapData`：

```
var bmd:BitmapData = new BitmapData(640, 480);
bmd.draw(video, null, null, null, new Rectangle(0, 0, 640, 480)); 
```

基本上，您正在为`clipRect`参数定义一个矩形，并将该矩形的大小设置为您要捕获的最终大小（和纵横比）。

# ruby-on-rails - 如果有关 RoR 应用程序的所有内容都基于并反映 1 个时区，则最佳时区实践？

> ID：10839074
> 
> 赞同：0
> 
> 时间：2012-05-31T18:20:21.693
> 
> 标签：ruby-on-rails

导轨 2.3.5

如果我正在开发一个 Rails 应用程序（像往常一样强制使用 UTC），它将有一个工作日程系统，其中包含很多 dateTime 交互，但任何接触它的人（在全国范围内）都将所有内容都视为“EST”（企业事情），你会留下Rails将记录保存为UTC时间还是强制EST？

我的意思是，如果这个工具所做的一切都基于并反映 EST - 是否有必要遵循将所有数据库记录保存为 UTC 的默认做法？

谢谢 - 无法为这个找到一个好的搜索词组，我想这更像是一个“只有 UTC 最佳实践有例外”的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:27:27.530

要点是你要走很长的路去喝一小杯水来打破 UTC 约定，并且可以安全地假设你集成的任何其他东西都会假设时间存储在 UTC 中。（如果你开始使用另一个关闭时间的库，你真的想分叉它并更改他们的代码以确保他们的时间是 EST 而不是 UTC？）

换句话说，打破惯例比顺从更让人头疼。

你也想成为未来的证明。您是否确定在未来任何时候您都不想搬出 EST？可能不会，并且使用约定将使扩展到新市场更容易:)

# php - 使用 PHP 会话记住用户在表单中的位置

> ID：10839078
> 
> 赞同：0
> 
> 时间：2012-05-31T18:20:41.357
> 
> 标签：php, forms, session, session-cookies

我做了一个包含 4 个是/否问题的简短测验，我想要做的是，如果用户在第二个问题上关闭网页，那么当他们重新打开页面时（最多 30 天后）他们将被带到他们留下的相同问题。下面是我到目前为止得到的一些代码。

```
<?php
session_set_cookie_params(2592000); //Sets cookie to last for 30 days
session_start();
?> 
```

这是问题的代码

```
//Variables for functions
 $number;
 $creature2;
 $creature3;
 //Function for showing questions 2 to 7
  function showquestion($number) {

      echo "<div class='questions'><form method ='GET' action='Creatures.php'>
     <input type='submit' name='answer$number' value='Yes' class='buttons' />
     <input type='submit' name='answer$number' value='No' class='buttons' />
     </form></div>";
 }

  //Function for showing questions 8 to 15
  function showanswer($creature2,$creature3) {
      echo "<div class='questions'><form method ='GET' action='Creatures.php'>
     <button type='submit' name='final' value='$creature2' class='buttons'> Yes </button>
     <button type='submit' name='final' value='$creature3' class='buttons'> No </button>
     </form></div>";
 }
//If start button has not been pressed, display nothing
if (!isset($_POST['start'])){

} //If start button has been pressed, display questions
else{ 
echo $firstquestion;
     echo "<div class='questions'><form method ='GET' action='Creatures.php'>
     <input type='submit' name='yes1' value='Yes' class='buttons' />
     <input type='submit' name='no1' value='No' class='buttons' />
     </form></div>";
}
//Question 2
if ($_GET['yes1']) //If answer to Q1 is yes then display this
{
echo "<div class='questions'><p>{$questions[0][0]}</p></div>";
showquestion(1);
}

//Question 3
if ($_GET['no1']) 
{
echo "<div class='questions'><p>{$questions[0][1]}</p></div>"; //If answer to Q1 is no then display this
showquestion(2);
}

//Questions 4 and 5
switch($_GET['answer1']) //If Question 2 is yes, do this
{
case 'Yes': echo "<div class='questions'><p>{$questions[1][0]}</p></div>";
showquestion(3);
break;
case 'No': echo "<div class='questions'><p>{$questions[1][1]}</p></div>";
showquestion(4);
}

//Questions 6 and 7
switch($_GET['answer2']) //If Question 3 is yes, do this
{
case 'Yes': echo "<div class='questions'><p>{$questions[1][2]}</p></div>";
showquestion(5);
break;
case 'No': echo "<div class='questions'><p>{$questions[1][3]}</p></div>";
showquestion(6);
}

//Questions 8 and 9
switch($_GET['answer3']) 
{
case 'Yes': echo "<div class='questions'><p>{$questions[2][0]}</p></div>";
showanswer('Eagle','Parrot');
break;
case 'No': echo "<div class='questions'><p>{$questions[2][1]}</p></div>";
showanswer('Ostrich','Turkey_(bird)');
}

//Questions 10 and 11
switch($_GET['answer4']) 
{
case 'Yes': echo "<div class='questions'><p>{$questions[2][2]}</p></div>";
showanswer('Grasshopper','Ant');
break;
case 'No': echo "<div class='questions'><p>{$questions[2][3]}</p></div>";
showanswer('Gorilla','Tiger');
}

//Questions 12 and 13
switch($_GET['answer5']) 
{
case 'Yes': echo "<div class='questions'><p>{$questions[3][0]}</p></div>";
showanswer('Penguin','Goose');
break;
case 'No': echo "<div class='questions'><p>{$questions[3][1]}</p></div>";
showanswer('Frog','Salamander');
}

//Questions 14 and 15
switch($_GET['answer6']) 
{
case 'Yes': echo "<div class='questions'><p>{$questions[3][2]}</p></div>";
showanswer('Octopus','Jellyfish');
break;
case 'No': echo "<div class='questions'><p>{$questions[3][3]}</p></div>";
showanswer('Goldfish','Eel');
} 
```

我知道这是可能的，因为我以前见过其他人这样做。测验在这里[我的测验](http://s504518.brunelweb.net/Creatures.php)

# iphone - iOS为javascript不同的应用程序创建推送通知应用程序

> ID：10839079
> 
> 赞同：1
> 
> 时间：2012-05-31T18:20:46.610
> 
> 标签：iphone, ios, apple-push-notifications

我使用 jQTouch 构建了一个应用程序并将其部署为使用 phonegap 作为本机应用程序。我需要通知，为此我创建了一个单独的 iOS 应用程序来处理推送通知。有没有办法不让这个应用程序在 iphone 上显示为图标？还有可能不让它启动吗？我只需要它来通知用户他们需要检查 jQTouch 应用程序。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:33:45.027

不——你不能安装一个应用程序然后隐藏它，也不能让它启动。

为什么不启用 PhoneGap 应用程序来接收推送通知？

如果您使用 XCode 配置项目，PhoneGap 应用程序将能够接收通知。

如果 iOS 上的 PhoneGap 还不支持将通知传递给您的代码，您可以使用 PhoneGap 插件添加它。

# iphone - 如何在目标 c iphone 中使用不同的警报消息安排每周 LocalNotification

> ID：10839083
> 
> 赞同：0
> 
> 时间：2012-05-31T18:21:07.070
> 
> 标签：iphone

在这里，我有一个数组：

```
weeklySnippets = [[NSArray alloc] initWithObjects:
                            @"Message 1"
                          , @"Message 2"
                          , @"Message 3"
                          , @"Message 4"
                          , @"Message 5"]; 
```

我应该如何根据每周的数组索引更改通知警报消息：例如，当 week=1 时，它应该在 index=0 处显示第一条消息，即“消息 1”等等。

```
UILocalNotification *notifWeek = [[UILocalNotification alloc] init];
notifWeek.fireDate = [NSDate date];
notifWeek.alertBody = notifText;
notifWeek.repeatInterval = NSWeekCalendarUnit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:17:23.167

这里有两个选项，我的选择是#2：

1.  安排每周定期通知，然后`scheduledLocalNotifications`在您的 App Delegate 中访问并更改每个通知的消息。

2.  每周创建一个不同的通知，使用类似：

    ```
     for (int i = 0; i > [weeklySnippets count]; i++) {

        UILocalNotification *notification = [[UILocalNotification alloc] init];

        // Set the fire date by one week increments (1 week = 604800 seconds)
        // First object in array fires one week from now (i + 1)
        notification.fireDate = [NSDate dateWithTimeIntervalSinceNow:604800 * (i+1)];

        NSString *notificationText = [weeklySnippets objectAtIndex:i];

        notification.alertBody = notificationText;
    } 
    ```

# javascript - 如何将 javascript 代码放在另一个 javascript 代码中

> ID：10839084
> 
> 赞同：0
> 
> 时间：2012-05-31T18:21:10.843
> 
> 标签：javascript

我想把

```
<div id='gallerysharebar'>
    <div id='fbshare' class='fb-like' data-href='http://www.facebook.com' data-send='false' data-layout='button_count' data-width='100' data-show-faces='false' data-font='tahoma'>
    </div>
    <a id='pinterest-icon' href='
javascript:void((function(){var e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)})());
'><img onclick='doPinIt();' src='/wp-content/themes/bliss/images/pin-it.png' alt='Pin It'/></a>
</div> 
```

这段代码在 xxx 部分的 javascript 代码中。问题是代码都是javascript，所以当我直接输入上面的代码时，它会使画廊崩溃。

```
 f.fn.tn3.version = "1.1.0.44";
    f.fn.tn3.config = {
        data: null,
        skin: null,
        skinDir: "skins",
        skinDefault: '..........<div class="tn3-show-albums"></div><div class="tn3-next-page"></div><div class="tn3-prev-page"></div>**xxxxxxxx**<div class="tn3-play"></div>...........',
        cssID: null
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:41:00.497

我现在明白了。您的引号（`'`vs. `"`）有问题。你在你的 skinDefault 字符串中使用了单引号，所以一旦你粘贴到上面的 html 中，它就会结束字符串，并且你会从第一个单引号之后的东西中得到一个解析错误。因此，要解决此问题，请将 html 中的所有单引号替换为双引号。请让我知道这是否有效，如果无效，您会看到什么错误。

**编辑：** 我很确定属性内的引号不起作用，您需要将它们替换为`&quot;`. 无论哪种方式，请先按原样尝试，然后如果您认为需要，请告诉我`&quot;`，我会更新我的答案。

```
<div id="gallerysharebar">
    <div id="fbshare" class="fb-like" data-href="http://www.facebook.com" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="tahoma">
    </div>
    <a id="pinterest-icon" href="javascript:void((function(){var e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute(\"charset\",\"UTF-8");e.setAttribute("src","http://assets.pinterest.com/js/pinmarklet.js?r="+Math.random()*99999999);document.body.appendChild(e)})());">
        <img onclick="doPinIt();" src="/wp-content/themes/bliss/images/pin-it.png" alt="Pin It"/>
    </a>
</div> 
```

# c# - ASP.Net Web 表单 (C#) - 2 路绑定

> ID：10839089
> 
> 赞同：0
> 
> 时间：2012-05-31T18:21:37.000
> 
> 标签：c#, asp.net, forms, web

试图弄清楚如何绑定数据以更新类似于绑定 ms 访问子表单的记录。

理想情况下，我希望所有列/行能够在填写时自动更新。考虑一下您需要一次更新 20 个价格的产品列表。我不想点击更新按钮 20 次，而是让它自动保存。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:37:53.240

这是在 gridview 中进行批量更新的最佳解决方案。

[http://msdn.microsoft.com/en-us/library/aa992036(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/aa992036(v=vs.90).aspx)

# apache-camel - 使用 Camel 实现竞争消费者模式

> ID：10839090
> 
> 赞同：1
> 
> 时间：2012-05-31T18:21:40.230
> 
> 标签：apache-camel

我怎样才能让我的竞争消费者保持完全的活力？
Camel 实现要求提供 concurrentConsumers 值。但是假设一个新的消费者启动并开始消费发送者的消息。那么我将如何保持并发消费者的数量呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T22:02:15.127

我假设你在谈论 JMS 消费者......

如果是这样，您可以设置 concurrentConsumers 和 maxConcurrentConsumers 以允许活动消费者线程的数量根据需求增长/缩小。像这样的东西会明确地设置一条路线......

```
from("activemq:queue:input?concurrentConsumers=1&maxConcurrentConsumers=5")
.to("log:+++consumed+++"); 
```

也就是说，如果您有其他路由（或非路由消费者，如 Spring JMSTemplates 等）从同一资源（输入队列）开始消费，那么总消费者的数量可能会更高......

您可以随时在 AMQ Web 控制台或通过 JMX 查看活跃消费者的总数

# android - 找安卓

> ID：10839093
> 
> 赞同：1
> 
> 时间：2012-05-31T18:22:02.067
> 
> 标签：android, httpclient, webdav

我正在尝试在android中使用propfind。我是webdav的新手。我已将 Jackrabbit jar 添加到我的项目中。我不知道如何使用 PROPFIND 请向我推荐任何可以获取文件列表的站点或任何代码。

我正在使用代码，但出现异常：

```
HostConfiguration config=new HostConfiguration();
config.setHost("");
MultiThreadedHttpConnectionManager manager = new MultiThreadedHttpConnectionManager();
HttpConnectionManagerParams params = new HttpConnectionManagerParams();
params.setMaxConnectionsPerHost(config, 5);
HttpClient client = new HttpClient(manager);
client.setHostConfiguration(config);

try {
  PropFindMethod propfind=new PropFindMethod("https://",PropFindMethod.PROPFIND_ALL_PROP,1);
  Credentials creds=new UsernamePasswordCredentials("XXXX", "XXXXX");
  client.getState().setCredentials(AuthScope.ANY, creds);

  int Status=client.executeMethod(propfind);
  Log.d("Status",Status+"");
} catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
} 
```

错误：

```
05-31 18:08:49.908: E/AndroidRuntime(29145): java.lang.ExceptionInInitializerError 
```

请帮忙。先感谢您

# eclipse - 是否有更快的方法在 Eclipse STS 中重复运行测试应用程序？

> ID：10839096
> 
> 赞同：2
> 
> 时间：2012-05-31T18:22:33.550
> 
> 标签：eclipse, grails, junit

在 Eclipse STS 下运行 test-app 对我来说很慢，因为它每次都必须启动 Grails 应用程序堆栈。在命令行上，我可以交互地运行 Grails，然后运行“test-app -functional”，它非常快。有没有办法在 STS 下做到这一点并获得漂亮的 JUnit 条？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:04:22.413

这不能回答问题，但它可能会有所帮助。

试试 grails [AutoTest](http://grails.org/blog/view/willy/AutoTest+plugin+released)插件。作者创建了一个[截屏视频](http://www.youtube.com/watch?v=7qLuDlJqFwY)来演示它。

# google-maps - 哪个点更北？

> ID：10839098
> 
> 赞同：0
> 
> 时间：2012-05-31T18:22:51.930
> 
> 标签：google-maps, google-maps-api-3

我在谷歌地图中有两个 latlng。一个是边界的东北部分，一个是边界的西南部分 - 问题是，我不知道哪个是哪个，它们并不总是必须以相同的顺序排列，即有时第一个点是东北，有时第二点就是东北。

我想知道的是，给定 2 个 latlng 坐标，无论如何我可以分辨出哪个是更北的 latlng 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:27:53.703

坐标的纬度分量测量北/南位置。如果纬度分量更大，那么它总是更偏北。负纬度是指赤道以南的位置，因此同样适用。（-90 小于 -60，而且更靠南。）

见：[http ://www.mrdowling.com/601-grid.html](http://www.mrdowling.com/601-grid.html)

# nservicebus - NServiceBus 到底是不是 ESB

> ID：10839105
> 
> 赞同：10
> 
> 时间：2012-05-31T18:23:27.767
> 
> 标签：nservicebus, esb

NServiceBus 到底是 ESB 还是轻量级 ESB？还是更像具有持久/可靠消息传递的 WCF？在我看来，它更像是一个消息传递框架而不是 ESB。

只是想要一些指针，因为我刚刚开始研究不同的 ESB 产品以及它们能做什么或不能做什么。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-01T07:02:12.327

NServiceBus 绝对是一个 ESB。句号。

Enterprise Service Bus，一种总线，意思是通过设计允许系统的组件分布和独立工作的东西。总线本身也是分布式的。一个组件或服务的故障不会影响连接到总线的其他组件的可用性。

公共汽车的对面是经纪人。代理在系统中呈现单点故障。像 MS BizTalk 这样的东西是代理，而不是 ESB。

**更新**
只是为了详细说明 NSB 中的企业支持
- 支持的[消息传递模式](http://docs.particular.net/nservicebus/architecture/principles)是单向即发即忘（持久和快速）、相关的请求-响应、发布-订阅。其他一切都可以建立在此之上。
- 事务性[消息处理](http://docs.particular.net/nservicebus/messaging/transactions)和自动[重试](http://docs.particular.net/nservicebus/errors/automatic-retries)
- 使用分配器进行负载平衡- 使用[性能计数器](http://docs.particular.net/nservicebus/operations/performance-counters)进行 可配置的[审计](http://docs.particular.net/nservicebus/operations/auditing)和监控 - 内置的[长时间运行的进程](http://docs.particular.net/nservicebus/sagas/)管理 不胜枚举...使 NServiceBus 成为[ESB](http://docs.particular.net/nservicebus/scalability-and-ha/distributor/)

一些消息代理产品可以以“联合模式”部署，这使得这些部署是分散的。分散式部署类型与总线架构风格非常吻合。所以，我想，这取决于。但是，集中部署只是一个企业服务代理，而不是总线。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-12T01:48:14.363

不，我不认为 N​​ServiceBus 是一种 ESB 产品，它也绝对不是一般的 EAI 工具。

如果我们要与其他工具进行比较，NServiceBus 更接近于 JMS api（例如 spring-jms）和 AMQP。它是一个框架，可帮助您使用友好的编程语法与消息队列交互并在应用程序中实现常见的消息传递模式（例如发布/订阅、请求/回复、死信、“传奇”）。

而传统上在 EAI 行业中众所周知的 ESB 产品是一个平台，它有助于在企业环境中集成许多异构应用程序。尽管不同的 ESB 产品提供了不同的特性，但它们都具有使它们有用的某些共同特性，主要是它们广泛收集各种开放和专有协议和服务的连接器（包括消息队列，还有其他东西，例如 WS -*, sftp, SAP, Siebel, rdbms, xmpp, websockets/comet, corba, edi)，以及企业集成模式的一整套即用型实现（根据黑皮书），因此您无需自己重新实现它们以编排复杂的集成逻辑，例如转换、转换、路由、优先级、业务规则、策略执行，

NServiceBus 不提供与执行任何集成工作远程相关的功能，也不是为此而设计的。它是您用来在应用程序中实现消息传递模式的东西，但不会是您为 EAI 项目选择的东西。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-13T08:25:08.633

好吧，我认为 nServicebus 肯定是一个 ServiceBus，不确定你是否可以将其称为“企业”ServiceBus 而无需花费数十万。不过说真的，您需要考虑是否真的需要 ESB。他们中的大多数人承诺会带来大量财富，但会带来大量开销，并且很难实现价值。我在一家大型企业中使用过 WSO2，它是我们的 3 个 ESB 之一。非常有进取心，由 OPs 团队运行，而且真的很痛苦，因为我们必须与另一个团队打交道来建立和运行我们的系统。其他问题包括所谓的功能，如消息路由或消息翻译。当然该产品可以做这些事情，但它会让你脱离你的开发环境，让你担心更多的事情。代码和/或配置传播到更多地方，更多的事情来管理更多可能出错的事情。这就是我喜欢 nServiceBus 的地方，它对开发人员来说非常容易访问。我喜欢的另一个实现是 Azure ServiceBus。显然，它的功能并不全面，可能也不是您想要的，但我喜欢开发人员的可访问性和自助服务性质，这些都是我会关注的特征。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-13T17:06:53.403

企业服务总线是一种复合 SOA 模式。如果您查看 Thomas Earl 的书籍，这里是 ESB 包含的模式

1.  Broker（协议桥接、数据格式和数据模型转换）
2.  中间路由
3.  异步排队
4.  可靠的混乱
5.  事件驱动
6.  政策集中
7.  规则集中化

据我所知（有限），NServiceBus 确实应用了其中一些模式 - 其余的（例如：规则集中化和策略集中化）预计将由用户实施。根据这个定义，BizTalk 也是一个 ESB。

要记住的重要一点是，使用 NServiceBus 或 Biztalk 或其他任何东西都不会使您成为 SOA。事实上，如果使用不当，您可能会发现自己与供应商捆绑在一起，从而违背了 SOA 的第一个原则——供应商中立性。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T20:43:24.070

你的问题有点开放式。最好概述一下您需要 ESB 的哪些功能，然后询问 NSB 是否支持这些功能。

**更新**

我认为我应该更新我的答案以回应克里斯的回答。

虽然很方便，但创建两个类别（Bus 和 Broker）是错误且无益的，正如 Chris 所说的那样。

服务总线在服务及其消费者之间提供传输和平台中立的中介连接。在此定义下，使用消息代理模型的产品也可以用作服务总线。

*企业*服务总线提供这种连接，但也可以添加企业级中介，例如：

*   内置对消息交换模式的支持
*   集中监控
*   服务负载均衡和实例化
*   自动故障和异常管理
*   服务元数据可发现性
*   失败重试
*   ...还有很多

因此，我认为当您选择工具集时，您应该首先确定您需要哪些类型的功能，然后您可以选择最适合您需求的产品。

# c# - 使用 Streamreader.Read 块/RedirectStandardOutput

> ID：10839106
> 
> 赞同：2
> 
> 时间：2012-05-31T18:23:30.650
> 
> 标签：c#, process

我正在尝试使用 StreamReader 从进程中读取输出数据，但 StreamReader 阻塞并且不会返回任何输出。

我的流程如下所示：

```
ProcessStartInfo startInfo = new ProcessStartInfo();
startInfo.Arguments = args;
startInfo.FileName = filename;
StartInfo.WorkingDirectory = aDirectory;
StartInfo.UseShellExecute = false;
StartInfo.RedirectStandardOutput = true;
Process p = new Process();
p.StartInfo = startInfo;
p.Start(); 
```

之后立即调用 StreamReader：

```
StreamReader strmRead = p.StandardOutput;
char[] output = new char[4096];
while(true){
   strmRead.Read(output,0,output.Length);
   string outputString = new string(output);
   Debug.WriteLine(outputString);
} 
```

代码在调用 Read 方法时挂起。当我手动终止程序时，进程的输出被写入调试控制台。进程输出不使用换行符，因此使用 Process.OutputDataReceived 不起作用。如何从流中获取进程输出而不让它无限期地阻塞？

**编辑：**鉴于我已经得到的答案，这似乎是进程没有放弃标准输出或不刷新输出的问题，而不是我的代码有任何问题。如果其他人有任何见解，请随时发表评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:32:01.893

你可以这样做：

```
String outputString = strmRead.ReadToEnd(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:28:46.027

您正在读取 4096 字节并且可能更少，因此流块。

此外，还有更有效的方式从流中读取文本。 `TextReader`有`ReadLine`方法，试试吧。

[http://msdn.microsoft.com/en-us/library/system.io.textreader.readline.aspx](http://msdn.microsoft.com/en-us/library/system.io.textreader.readline.aspx)

顺便说一句，`while (true)`？？？你打算如何退出？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-27T09:50:53.883

我知道这个问题很老了。但我有一个类似的问题。我尝试使用 Peek() 方法，但即使 Peek() 返回 -1，它也不总是流的结尾。

**我通过启动一个新线程**来解决我的问题，该线程在 Peek() 返回 -1 时尝试读取下一个字符。

```
 string toRead = "";
                    do
                    {
                        if (reader.Peek() == -1)
                        {
                            Thread td = new Thread(TryReading);
                            td.Start();
                            Thread.Sleep(400);
                            if (ReadSuccess == false)
                            {
                                try
                                {
                                    td.Abort();
                                }
                                catch (Exception ex) { }
                                break;
                            }
                            else
                            {
                                toRead += ReadChar;
                                ReadSuccess = false;
                            } 
                        }
                        toRead += (char)reader.Read();
                    } while (true); 
```

TryReading() 方法在这里定义：

```
static char ReadChar = 'a';
static bool ReadSuccess = false;

static void TryReading(object callback)
{
    int read = reader.Read();
    ReadChar = (char)read;
    ReadSuccess = true;
} 
```

基本上......如果线程花费太长时间来读取字符 - 我中止它并使用它到目前为止读取的文本。

这解决了我的问题。

# visual-studio-2010 - 资源文件不再加载

> ID：10839109
> 
> 赞同：0
> 
> 时间：2012-05-31T18:23:34.813
> 
> 标签：visual-studio-2010, unicode, mfc

我使用 Visual Studio 2010 使用 Unicode 编码保存了项目的 .rc 文件。我使用了 Unicode - CodePage 1200，因为我认为这是 Visual Studio 在启用 unicode 时创建新的 .rc 文件的格式。

![在此处输入图像描述](../Images/170dfc7b02a747e6b7aa55efd2677fc9.png)

现在只是在 Visual Studio 中正常使用该文件，在某些时候 .rc 文件变得不可读。当我运行我的应用程序时，它无法加载资源并且永远不会出现。即使在 Visual Studio 中，我也无法再打开 .rc 文件。如果我将它作为文本编辑器打开，它会全部显示中文字符，但实际上它不包含任何中文文本。

我的问题是我应该如何使用 Unicode 编码保存旧的 .rc 文件，以便它支持国际语言？任何洞察为什么新保存的文件可以工作一段时间但停止工作，甚至 VS IDE 也无法打开它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:04:30.123

[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)很可能搞砸了。

# iphone - 在捆绑包中找不到图像

> ID：10839115
> 
> 赞同：0
> 
> 时间：2012-05-31T18:24:08.573
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有下一个问题，xcode 找不到一个图像，但是在捆绑包和`InterfaceBuilder`检测图像中有，但是当我运行应用程序时，它没有运行，因为找不到它们，因为我重新组织了其他文件夹中的所有 te 图像但是当我将图像再次放入首先创建的文件夹中时，这没问题，但是在我想存储图像的文件夹中却找不到它。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:27:04.650

删除对 xcode 项目中图像的引用。将其移动到您想要保留它的任何位置。然后再次在 xcode 中，将图像添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:28:55.887

在 XCode 中单击您的 Target，然后选择 Build Phases，然后查看 Copy Bundle Resources 并检查您的文件是否存在，如果没有则添加它。

# python - pygame：像素与线条完美碰撞？

> ID：10839117
> 
> 赞同：0
> 
> 时间：2012-05-31T18:24:21.100
> 
> 标签：python, pygame, linear-algebra, collision, pixel-perfect

我有一两个问题。我正在使用 Pygame 创建绘图游戏。

我们有球在一个表面上在内部弹跳，彼此和墙壁相撞。使用鼠标，您可以绘制直线，球反弹也反弹。

球是使用 pygame.image 绘制的，因为我们有一个 ball.png 覆盖球的表面和矩形。但是对于线条，我们只是使用 pygame.draw.line() 返回简单的矩形。

而我目前最大的问题：

我选择在自己的 Surface 对象上绘制每条线，然后将它们粘贴到更大的“游戏画布”上。这是因为我想使用[此处](http://www.pygame.org/wiki/FastPixelPerfect)提供的像素完美碰撞检测以及 surfarray.array_colorkey()，为此我需要一个底层 Surface（球具有 pygame.image 返回的图像 Surface）。我想要线条的 Surface 以便我可以使用碰撞算法的透明度方面，否则球会从包裹线条的 Rects 上反弹。

**Q1) 有没有更好的画线方法？我想使用类似于图像或雪碧的东西。有这样的事吗？**

**Q2）如果不是，我应该如何为每条线创建 Surface，以便使用“游戏画布”中的坐标将线绘制到较小的 Surface 上相对容易，线不会被切断并且上述像素完美碰撞有效?**

*Q3）如果我完全关闭/有更好的方法来进行碰撞、检测、绘图等。拜托，我全神贯注。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:13:33.480

圆圈上的线的每像素碰撞是多余的。

关于圆和线的 [二维碰撞的信息：移动圆和固定线段之间的二维碰撞](https://stackoverflow.com/questions/7060519/2d-collision-between-a-moving-circle-and-a-fixed-line-segment)

并且，`euclid`有`Circle.intersect( Line2 )`碰撞： http: [//partiallydisassembled.net/euclid/point2.html#SECTION002530000000000000000](http://partiallydisassembled.net/euclid/point2.html#SECTION002530000000000000000)

`numpy`可能有更好的解决方案。

# android - 编辑文本字段未被编辑

> ID：10839122
> 
> 赞同：0
> 
> 时间：2012-05-31T18:24:36.163
> 
> 标签：android, android-edittext

我有一个活动，其中有一个`EditText`和一个`Button`。中的数据一`EditText`开始是不可编辑的，但是按下后变成可编辑的。`Button`我尝试`android:editable="false"`在xml布局中使用，但它不起作用。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:26:51.397

```
editText.setEnabled(true); or editText.setEnabled(false); 
```

如果不能工作，那么[Editable false](https://stackoverflow.com/questions/660151/how-to-replicate-androideditable-false-in-code)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:33:55.780

您需要首先在 xml 布局中将 TextEdit 可编辑属性设置为 false：

```
<EditText
    ...
    android:id="@+id/input"
    android:clickable="false" /> 
```

然后在单击按钮时，将 TextEdit 设置为 editable ：

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    input = (EditText) findViewById(R.id.input);
    button = (Button) findViewById(R.id.button);

    button.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View v)
        {
            input.setClickable(true);
        }

    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-26T06:33:19.200

```
<EditText
    ...
    android:id="@+id/urId"
    android:clickable="True" /> 
```

这对我有用，试试你的运气。

# http - 让 Amazon S3 在缺少对象请求时重定向到我的终端节点？

> ID：10839125
> 
> 赞同：4
> 
> 时间：2012-05-31T18:25:26.530
> 
> 标签：http, redirect, amazon-s3

我们使用 S3 在线存储文件。为了降低成本，可以使用预先知道的路径按需生成其中的许多文件。

是否可以让 S3 存储桶将丢失的对象请求重定向到我的预配置端点（然后可以按需生成和提供文件）？

例如，对[http://bucket1.s3.amazonaws.com/path2/file3.jpg](http://bucket1.s3.amazonaws.com/path2/file3.jpg)的请求将临时重定向 (307) 到[http://mydomain.com/missing_s3_obj/bucket1/path2/file3.jpg](http://mydomain.com/missing_s3_obj/bucket1/path2/file3.jpg)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-08T06:32:42.650

您可以使用`RoutingRules`S3 重定向到您的域，如S3 文档中[*为网站托管配置存储桶*](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html#d0e29197)[的示例 3 中所述。](http://docs.aws.amazon.com/AmazonS3/latest/dev/HowDoIWebsiteConfiguration.html#d0e29197)*我相信它准确地描述了你的情况。*

 *```
<RoutingRules>
  <RoutingRule>
  <Condition>
    <HttpErrorCodeReturnedEquals>404</HttpErrorCodeReturnedEquals>
  </Condition>
  <Redirect>
    <HostName>mydomain.com</HostName>
    <ReplaceKeyPrefixWith>missing_s3_obj/bucket1/</ReplaceKeyPrefixWith>
    <HttpRedirectCode>307</HttpRedirectCode>
  </Redirect>
  </RoutingRule>
</RoutingRules> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T11:05:00.647

目前这是不可能的，尽管这是一个非常好的主意。（也许您应该在 S3 论坛上将其列为功能请求，其中实际上非常重视功能请求）。

不过，您可以使用不同的架构设置来实现您想要的。

例如，您将使用 Cloudfront，而不是使用 S3。您的边缘来源将是您自己的应用程序服务请求。您必须将所有可用文件的哈希存储在 S3 上，但如果该文件在 S3 上可用，您将代理到 S3。如果不是，那么您将动态生成文件并将其提供给 Cloudfront。

然后，您将在后续请求中获得缓存的所有好处。*

# c# - 访问字符串中的字符与在 C# 中转换为字符数组

> ID：10839129
> 
> 赞同：3
> 
> 时间：2012-05-31T18:25:45.663
> 
> 标签：c#, string, parsing, char

在回答另一个问题时有人指出，在 C# 中，您可以通过执行 sting[i] 来访问字符串中的字符。我的问题是，幕后发生了什么？这与将字符串转换为字符数组然后解析它有什么不同吗？

我认为区别在于内存使用和可变性，但我宁愿知道而不是假设:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:34:47.663

主要区别在于转换为字符数组将创建字符串内部字符数组的副本，而使用索引器将访问适当的字符。

# .net - 生成资源文件

> ID：10839130
> 
> 赞同：0
> 
> 时间：2012-05-31T18:25:46.527
> 
> 标签：.net, localization, resx

我的 VB.NET 控件有一个默认资源文件 (resx)。我想基于此为俄语和其他一些语言生成资源文件（resx）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:05:42.427

只需复制您现有的 resx 并将其重命名为`<Filename>.<Culture>.resx`. 它会自动嵌套在解决方案资源管理器中项目树的主要资源下方：

![Visual Studio 解决方案资源管理器中的文化特定资源文件](../Images/da5d2fe39998a4f5d9e696ba8ea08c86.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:40:42.253

这是 MSDN 上的一个链接，可以帮助您在 VS 中执行此操作：[演练：本地化 Windows 窗体](http://msdn.microsoft.com/en-us/library/y99d1cd3)

这些天我使用了windows sdk附带的winres工具（Windows Localiaztion Editor）......但已经很长时间了。

# java - 实现与扩展：何时使用？有什么不同？

> ID：10839131
> 
> 赞同：780
> 
> 时间：2012-05-31T18:25:47.120
> 
> 标签：java, inheritance, interface, extends, implements

请用通俗易懂的语言或文章的链接进行解释。

* * *

## 回答 #1

> 赞同：811
> 
> 时间：2012-05-31T18:27:30.093

`extends`是为了*扩展*一个类。

`implements`用于*实现*接口

接口和常规类之间的区别在于，在接口中您不能实现任何已声明的方法。只有“实现”接口的类才能实现方法。接口的 C++ 等价物将是一个抽象类（不完全相同但几乎相同）。

java也不支持类的**多重继承**。这是通过使用多个接口来解决的。

```
 public interface ExampleInterface {
    public void doAction();
    public String doThis(int number);
 }

 public class sub implements ExampleInterface {
     public void doAction() {
       //specify what must happen
     }

     public String doThis(int number) {
       //specfiy what must happen
     }
 } 
```

现在扩展一个类

```
 public class SuperClass {
    public int getNb() {
         //specify what must happen
        return 1;
     }

     public int getNb2() {
         //specify what must happen
        return 2;
     }
 }

 public class SubClass extends SuperClass {
      //you can override the implementation
      @Override
      public int getNb2() {
        return 3;
     }
 } 
```

在这种情况下

```
 Subclass s = new SubClass();
  s.getNb(); //returns 1
  s.getNb2(); //returns 3

  SuperClass sup = new SuperClass();
  sup.getNb(); //returns 1
  sup.getNb2(); //returns 2 
```

另外，请注意，`@Override`实现接口不需要标签，因为原始接口方法中没有任何内容*可以被覆盖*

**我建议您对面向对象编程中的动态绑定、多态性和一般继承进行**更多研究

 *** * *

## 回答 #2

> 赞同：82
> 
> 时间：2012-05-31T18:36:47.193

我注意到您的个人资料中有一些 C++ 问题。如果你从 C++ 中理解*多重继承*的概念（指从多个其他类继承特性的类），Java 不允许这样做，但它确实有关键字`interface`，这有点像 C++ 中的纯虚拟类。正如很多人所提到的，你`extend`是一个类（你只能从一个类扩展），你`implement`是一个接口——但你的类可以实现任意数量的接口。

即，这些关键字和管理它们使用的规则描述了Java 中多重继承的可能性（你只能有一个超类，但你可以实现多个接口）。

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2016-01-24T14:59:01.980

通常**implements**用于实现*接口*，**extends**用于*扩展*基类行为或*抽象*类。

**extends**：派生类可以扩展基类。您可以重新定义已建立关系的行为。派生类“***是***”基类类型

**implements**：您正在执行合同。实现接口的类“***具有***”能力。

在 java 8 版本中，接口可以在接口中具有*默认*方法，它在接口本身中提供实现。

请参阅此问题以了解何时使用它们中的每一个：

[接口 vs 抽象类（通用 OO）](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo/33963650#33963650)

理解事物的例子。

```
public class ExtendsAndImplementsDemo{
    public static void main(String args[]){

        Dog dog = new Dog("Tiger",16);
        Cat cat = new Cat("July",20);

        System.out.println("Dog:"+dog);
        System.out.println("Cat:"+cat);

        dog.remember();
        dog.protectOwner();
        Learn dl = dog;
        dl.learn();

        cat.remember();
        cat.protectOwner();

        Climb c = cat;
        c.climb();

        Man man = new Man("Ravindra",40);
        System.out.println(man);

        Climb cm = man;
        cm.climb();
        Think t = man;
        t.think();
        Learn l = man;
        l.learn();
        Apply a = man;
        a.apply();

    }
}

abstract class Animal{
    String name;
    int lifeExpentency;
    public Animal(String name,int lifeExpentency ){
        this.name = name;
        this.lifeExpentency=lifeExpentency;
    }
    public void remember(){
        System.out.println("Define your own remember");
    }
    public void protectOwner(){
        System.out.println("Define your own protectOwner");
    }

    public String toString(){
        return this.getClass().getSimpleName()+":"+name+":"+lifeExpentency;
    }
}
class Dog extends Animal implements Learn{

    public Dog(String name,int age){
        super(name,age);
    }
    public void remember(){
        System.out.println(this.getClass().getSimpleName()+" can remember for 5 minutes");
    }
    public void protectOwner(){
        System.out.println(this.getClass().getSimpleName()+ " will protect owner");
    }
    public void learn(){
        System.out.println(this.getClass().getSimpleName()+ " can learn:");
    }
}
class Cat extends Animal implements Climb {
    public Cat(String name,int age){
        super(name,age);
    }
    public void remember(){
        System.out.println(this.getClass().getSimpleName() + " can remember for 16 hours");
    }
    public void protectOwner(){
        System.out.println(this.getClass().getSimpleName()+ " won't protect owner");
    }
    public void climb(){
        System.out.println(this.getClass().getSimpleName()+ " can climb");
    }
}
interface Climb{
    public void climb();
}
interface Think {
    public void think();
}

interface Learn {
    public void learn();
}
interface Apply{
    public void apply();
}

class Man implements Think,Learn,Apply,Climb{
    String name;
    int age;

    public Man(String name,int age){
        this.name = name;
        this.age = age;
    }
    public void think(){
        System.out.println("I can think:"+this.getClass().getSimpleName());
    }
    public void learn(){
        System.out.println("I can learn:"+this.getClass().getSimpleName());
    }
    public void apply(){
        System.out.println("I can apply:"+this.getClass().getSimpleName());
    }
    public void climb(){
        System.out.println("I can climb:"+this.getClass().getSimpleName());
    }
    public String toString(){
        return "Man :"+name+":Age:"+age;
    }
} 
```

输出：

```
Dog:Dog:Tiger:16
Cat:Cat:July:20
Dog can remember for 5 minutes
Dog will protect owner
Dog can learn:
Cat can remember for 16 hours
Cat won't protect owner
Cat can climb
Man :Ravindra:Age:40
I can climb:Man
I can think:Man
I can learn:Man
I can apply:Man 
```

要理解的要点：

1.  *Dog*和*Cat*是动物，它们通过共享扩展( )`remember`和()`protectOwner``name,lifeExpentency``Animal`
2.  *猫可以攀登（），但狗不能。Dog 可以 think() 但 Cat 不能*。这些特定功能被添加到`Cat`并`Dog`通过实现该功能。
3.  *人不是动物，但他可以`Think,Learn,Apply,Climb`*

通过这些例子，你可以理解

***不相关的类可以通过接口获得能力，但相关类通过基类的扩展覆盖行为。***

* * *

## 回答 #4

> 赞同：47
> 
> 时间：2017-08-15T16:58:01.290

如下图所示，一个类扩展了另一个类，一个接口扩展了另一个接口，但一个类实现了一个接口。 [![在此处输入图像描述](../Images/8a7d0be364006d0832a1a3c9a7a19c27.png)](https://i.stack.imgur.com/4Jrgs.jpg)

了解更多[详情](https://www.javatpoint.com/interface-in-java)

* * *

## 回答 #5

> 赞同：44
> 
> 时间：2012-05-31T18:27:16.893

`extends`用于从*基类*继承（即扩展其功能）时。

`implements`用于实现*接口*时。

这是一个很好的起点：[*接口和继承*](http://docs.oracle.com/javase/tutorial/java/IandI/index.html)。

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2012-05-31T18:29:39.573

A`class`只能“实现”一个`interface`. 一个类只“扩展” a `class`。同样， an`interface`可以扩展 another `interface`。

A`class`只能扩展另一个`class`。A`class`可以实现几个`interface`s。

相反，如果您对知道何时使用`abstract class`es 和`interface`s 更感兴趣，请参阅此线程：[Interface vs Abstract Class (general OO)](https://stackoverflow.com/questions/761194/interface-vs-abstract-class-general-oo)

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2015-08-25T20:45:09.870

界面是对对象可以执行的操作的描述……例如，当您拨动电灯开关时，灯会亮起，您不在乎如何，它就是这样做的。在面向对象的编程中，接口是对对象必须具有的所有功能的描述，以便成为“X”。同样，作为一个例子，任何“像”灯一样的东西都应该有一个 turn_on() 方法和一个 turn_off() 方法。接口的目的是允许计算机强制执行这些属性并知道类型 T 的对象（无论接口是什么）必须具有称为 X、Y、Z 等的函数。

接口是允许计算机在对象（类）上强制执行某些属性的编程结构/语法。例如，假设我们有一个汽车类、一个踏板车类和一个卡车类。这三个类中的每一个都应该有一个 start_engine() 动作。每个车辆的“引擎启动”如何留给每个特定的类，但它们必须有一个 start_engine 动作这一事实是[interface](http://www.cs.utah.edu/~germain/PPS/Topics/interfaces.html)的领域。

* * *

## 回答 #8

> 赞同：24
> 
> 时间：2014-12-08T09:23:16.430

***Extends*** : This is used to get attributes of a parent class into child class and may contain already defined methods that can be overridden in the child class.

***Implements*** : This is used to implement an interface (parent class with functions signatures only but not their definitions) by defining it in the child class.

There is one special condition: "What if I want a new Interface to be the child of an existing interface?". In the above condition, the child interface **extends** the parent interface.

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2012-05-31T18:29:21.660

在 Java 语言中创建您自己的新类时会使用这两个关键字。

区别： `implements`意味着您在类中使用 Java 接口的元素。 `extends`意味着您正在创建要扩展的基类的子类。您只能在子类中扩展一个类，但您可以实现任意数量的接口。

[有关详细信息，请参阅界面](https://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)上的 oracle 文档页面。

这有助于阐明接口是什么，以及使用它们的约定。

* * *

## 回答 #10

> 赞同：16
> 
> 时间：2016-05-25T07:39:47.003

*   A 扩展 B：

    A 和 B 都是类或都是接口

*   A 实现 B

    A是一个类，B是一个接口

*   剩下的 A 是接口而 B 是类的情况在 Java 中是不合法的。

* * *

## 回答 #11

> 赞同：12
> 
> 时间：2012-05-31T18:27:40.023

Implements 用于接口，extends 用于扩展类。

为了用更简单的术语使其更清晰，界面就像它听起来 - 一个界面 - 一个模型，你需要应用，遵循，以及你的想法。

扩展用于类，在这里，您通过向其添加更多功能来扩展已经存在的东西。

还有一些注意事项：

一个接口可以扩展另一个接口。

当您需要在实现接口或为特定场景扩展类之间进行选择时，请选择实现接口。因为一个类可以实现多个接口，但只能扩展一个类。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2017-04-03T10:46:21.677

仅当子类想要使用已经在*SuperClass*中声明的某些功能（方法或实例变量） ，或者我想稍微修改*SuperClass*的功能（方法覆盖）时，我们才使用*SubClass* extends *SuperClass 。*但是说，我有一个 Animal 类（*SuperClass*）和一个 Dog 类（*SubClass*），并且我在 Animal 类中定义的方法很少，例如。*吃*（）；, *doSleep* (); ... 还有很多。

 ***现在，我的 Dog 类可以简单地扩展 Animal 类，如果我希望我的狗使用 Animal 类中声明的任何方法，我可以通过简单地创建 Dog 对象来调用这些方法。所以这样我就可以保证我有一只能吃能睡的狗，可以做任何我想让狗做的事情。

现在，想象一下，有一天某个爱猫的人来到我们的工作区，她试图扩展 Animal 类（猫也吃和睡）。她制作了一个 Cat 对象并开始调用这些方法。

但是，比如说，有人试图制作 Animal 类的对象。你可以告诉猫如何睡觉，你可以告诉狗如何吃东西，你可以告诉大象如何喝水。但是在创建 Animal 类的对象时没有任何意义。因为它是一个模板，我们不想要任何一般的吃法。

因此，我更愿意创建一个没有人可以实例化但可以用作其他类的模板的抽象类。

**所以总而言之，接口只不过是一个抽象类（一个纯抽象类），它不包含方法实现，只包含定义（模板）。所以实现接口的人只知道他们有*doEat* ()的模板；和*doSleep* ()；但是他们必须定义自己的*doEat* ()；和*doSleep* ()；方法根据自己的需要。**

仅当您想要重用 SuperClass 的某些部分时才进行扩展（但请记住，您始终可以根据需要覆盖 SuperClass 的方法）并且您在需要模板并且想要自己定义它们时实现（根据您的需要）。

我将与您分享一段代码：您尝试使用不同的输入集并查看结果。

```
class AnimalClass {

public void doEat() {

    System.out.println("Animal Eating...");
}

public void sleep() {

    System.out.println("Animal Sleeping...");
}

}

public class Dog extends AnimalClass implements AnimalInterface, Herbi{

public static void main(String[] args) {

    AnimalInterface a = new Dog();
    Dog obj = new Dog();
    obj.doEat();
    a.eating();

    obj.eating();
    obj.herbiEating();
}

public void doEat() {
    System.out.println("Dog eating...");
}

@Override
public void eating() {

    System.out.println("Eating through an interface...");
    // TODO Auto-generated method stub

}

@Override
public void herbiEating() {

    System.out.println("Herbi eating through an interface...");
    // TODO Auto-generated method stub

}

} 
```

**定义的接口**：

```
public interface AnimalInterface {

public void eating();

}

interface Herbi {

public void herbiEating();

} 
```

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2017-09-01T15:44:06.677

用最简单的术语来说，**extends**用于从**类**继承，**implements**用于在您的类中应用**接口**

**扩展**：

```
public class Bicycle {
    //properties and methods
}
public class MountainBike extends Bicycle {
    //new properties and methods
} 
```

**实现**：

```
public interface Relatable {
    //stuff you want to put
}
public class RectanglePlus implements Relatable {
    //your class code
} 
```

如果您仍然感到困惑，请阅读以下内容：[https ://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html](https://docs.oracle.com/javase/tutorial/java/IandI/subclasses.html) [https://docs.oracle.com/javase/tutorial/java/IandI/usinginterface.html](https://docs.oracle.com/javase/tutorial/java/IandI/usinginterface.html)

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2016-01-16T11:11:42.450

当子类扩展一个类时，它允许子类继承（重用）和覆盖超类型中定义的代码。当一个类实现一个接口时，它允许从该类创建的对象在任何需要接口值的上下文中使用。

这里真正的问题是，当我们实现任何东西时，它仅仅意味着我们正在使用这些方法。它们的值和返回类型没有变化的余地。

但是当我们扩展任何东西时，它就会成为你类的扩展。你可以改变它，使用它，重用它，它不一定需要返回与在超类中相同的值。

* * *

## 回答 #15

> 赞同：7
> 
> 时间：2019-10-09T13:01:24.980

*类*和*接口*都是**契约**。它们提供应用程序的其他部分所依赖的方法和属性。

当您对该合约的实现细节不感兴趣时​​，您可以定义一个*接口。*唯一需要关心的是合约（接口）是否存在。

在这种情况下，您将其留给**实现**接口的类来关心合同如何履行的细节。只有类可以实现接口。

**当您想要替换现有合同的详细信息时使用**扩展。**这样，您就可以用另一种方式替换履行合同的一种方式。类可以扩展其他类，接口可以扩展其他接口。**

 *** * *

## 回答 #16

> 赞同：4
> 
> 时间：2018-08-22T10:44:28.317

`extends`当您想要子类/接口中的父类/接口的属性时`implements`使用，并且当您想要类中的接口属性时使用。

例子：

1.  使用类扩展

    ```
    class Parent{

    }

    class Child extends Parent {

    } 
    ```

2.  使用接口扩展

    ```
    interface Parent {

    }

    interface Child extends Parent {

    } 
    ```

3.  工具

    ```
    interface A {

    }

    class B implements A {

    } 
    ```

4.  扩展和实现的组合

    ```
     interface A {

     }

     class B {

     }

     class C implements A, extends B {

     } 
    ```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-12-05T17:23:44.793

在 Java 中，一个类（子类）扩展了另一个类（超类），并且可以覆盖超类中定义的方法。

当一个类试图声明接口中定义的方法时，使用实现，该类正在扩展。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2019-05-20T17:48:12.047

**延伸**

*   类只扩展一个类
*   接口扩展一个或多个接口

**工具**

*   类实现一个或多个接口
*   接口“不能”实现任何东西

**抽象类也像类一样，具有扩展和实现**

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-06-03T07:08:37.740

这两个关键字直接与继承相关，它是 OOP 的核心概念。当我们将某个类继承到另一个类时，我们可以使用**扩展**，但是当我们要将某些接口继承到我们的类时，我们不能使用扩展，我们应该使用**实现**，我们可以使用**扩展**关键字从另一个接口继承接口。*******

# c# - 如何在 XAML 页面构造函数中初始化基于文件的数据模型

> ID：10839135
> 
> 赞同：0
> 
> 时间：2012-05-31T18:25:58.840
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml

鉴于您只能在标记为 async 的方法中使用**await关键字，那么从构造函数初始化基于文件的数据模型的方法是什么？**还是打算在 OnNavigatedTo() 方法中设置 DataContext。

以前，我会简单地说

> MyDataModel d = new MyDataModel();

MyDataModel 的构造函数将执行文件 I/O。

到目前为止，我所能想到的只是我可以在构造函数中使用 DispatchTimer 来触发一个标记为异步的事件处理程序并从那里执行文件 I/O。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:32:15.727

您可以将 DataModel 作为 Navigate 方法中的参数传递，然后从 e.Parameter 将其转换回 OnNavigatedTo(NavigationEventArgs e)。

-或者-

您可以尝试使用 IOC 容器，我使用过[Ninject](http://www.ninject.org/)，但不确定它是否适用于 Metro 应用程序。 [MVVM Light](http://mvvmlight.codeplex.com/)也有一个简单的 IOC 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:10:23.770

如果我正确理解了您的问题（基于您对迈克尔回答的评论）。您很难`await`在构造函数中进行异步操作。构造函数不能是异步的，因此您不能在那里等待任何异步方法。但是，有一个简单的解决方法；您可以重构构造函数中的所有异步操作并将它们添加到异步方法中，但无需等待它。在下面的示例中，您可以`LoadFileAsync`从构造函数中调用。

```
class MyDataModel
{
  public MyDataModel()
  {
      LoadFileAsync(); 
  }
  public async void LoadFileAsync()
  {
     // do async operations here 
     var file = await FooAsync(); 
  }
} 
```

这样做最终将允许您从页面的构造函数或从`onNavigateTo`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T19:45:44.557

我发现的底线是，基本上不可能在对象构造函数中使用“明显同步”行为进行文件 I/O。

因此，在我的 Win8 应用程序中，我可以选择在导航到第一页之前实例化数据模型（如果这涉及文件 I/O，这并不是一个好主意），或者只是忍受“松散的糊涂”视觉体验，这样我的第一个页面出现，然后，在加载数据并使用实际数据模型更新 DataContext 后，数据在准备好时“飞入”。

鉴于应用程序应该在 < 5 秒内启动（如果可能的话，远远少于该时间），我选择了“松散笨拙”的方法。

# mysql - 我可以将多对多关系的层次结构聚合到一个视图中吗？

> ID：10839143
> 
> 赞同：0
> 
> 时间：2012-05-31T18:26:52.363
> 
> 标签：mysql, sql

我正在设计一个关系数据库，其中用户对其各个部分具有一定的访问级别。让我们将这些部分称为`Company`、`Site`和`Department`。A`Company`由一个或多个组成`Site`，每个`Site`由一个或多个组成`Department`。这些实体之间存在多对多的关系`User`，并且每个关系都有一个访问级别。

例如，可能`User1`具有对 的访问级别`3`，可能对's具有访问级别，并且可能对's具有访问级别。如果 a可以访问某个实体（例如公司），则假定他们也可以访问该实体的成员。`CompanyA``User2``2``CompanyA``Site1``User3``1``Site1``DepartmentX``User`

我想创建一个视图，列出每个`Department`相关`User`的访问级别`Department`。

这是我到目前为止所拥有的：

```
SELECT
   Dept.Id AS 'DeptId', User.Id AS 'UserId',
   DeptAccess.RightsLevel AS 'DeptRightsLevel',
   SiteAccess.RightsLevel AS 'SiteRightsLevel'
FROM (Dept, User)
LEFT JOIN DeptAccess
   ON DeptAccess.DeptId=Dept.Id AND DeptAccess.UserId=User.Id
LEFT JOIN SiteAccess
   ON SiteAccess.SiteId=Dept.SiteId AND SiteAccess.UserId=User.Id
WHERE DeptAccess.RightsLevel IS NOT NULL OR SiteAccess.RightsLevel IS NOT NULL 
```

这给出了如下表（假设`DepartmentY`也是 的一部分`Site1`）：

```
DeptId | UserId | DeptRightsLevel | SiteRightsLevel
-------+--------+-----------------+------------------
X      | 2      | NULL            | 2
X      | 3      | 1               | NULL
Y      | 2      | NULL            | 2 
```

如何将其`CompanyRightsLevel`合并到此表中，以便在表中显示具有公司范围权限的用户？

如果我的数据库设置不清楚，请在评论中要求澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:47:15.880

经过短暂的头脑风暴后，我想出了这个：

```
SELECT
   Dept.Id AS 'DeptId', User.Id AS 'UserId',
   DeptAccess.RightsLevel AS 'DeptRightsLevel',
   SiteAccess.RightsLevel AS 'SiteRightsLevel',
   CompanySiteAccess.RightsLevel AS 'CompanyRightsLevel'
FROM (Dept, User)
LEFT JOIN DeptAccess
   ON DeptAccess.DeptId=Dept.Id AND DeptAccess.UserId=User.Id
LEFT JOIN SiteAccess
   ON SiteAccess.SiteId=Dept.SiteId AND SiteAccess.UserId=User.Id
LEFT JOIN (
      SELECT
         Site.CompanyId,
         Site.Id AS 'SiteId',
         CompanyAccess.UserId,
         CompanyAccess.RightsLevel
      FROM Site
      INNER JOIN CompanyAccess
         ON Site.CompanyId=CompanyAccess.CompanyId
   ) AS CompanySiteAccess
   ON CompanySiteAccess.SiteId=Dept.SiteId AND CompanySiteAccess.UserId=User.Id
WHERE
   DeptAccess.RightsLevel IS NOT NULL OR
   SiteAccess.RightsLevel IS NOT NULL OR
   CompanySiteAccess.RightsLevel IS NOT NULL 
```

不幸的是，它包含一个子查询，因此 MySQL 将强制`CompanySiteAccess`定义为它自己的视图，但它应该可以正常工作。

# javascript - 如何在 JavaScript 中实现一个简单的优先级监听器模式

> ID：10839146
> 
> 赞同：1
> 
> 时间：2012-05-31T18:27:02.927
> 
> 标签：javascript

我有一个具有此功能的事件/侦听器管理器：

```
 var addListener = function(event, listener) {
    myListeners[event].push(listener); //assume this code works
  } 
```

但现在我需要改变它，使它看起来像这样：

```
 var addListener = function(event, listener, fireFirst) {
    if(fireFirst) {
      myListenersToFireFirst[event].push(listener);
    } else {
      myListenersToFireSecond[event].push(listener);
    }
  } 
```

这样当`fireEvent`函数被调用时，它将`myListenersToFireFirst`首先触发数组中的侦听器，然后触发第二个数组中的侦听器。

所以它看起来像这样：

```
 var fireEvent = function(event) {
    var firstListeners = myListenersToFireFirst[event];
    //for each listener in firstListeners, call `apply` on it

    var secondListeners = myListenersToFireSecond[event];
    //for each listener in secondListeners, call `apply` on it
  } 
```

这是在 JavaScript 中完成此任务的最佳方式吗？有没有更优雅的方法来实现这个监听器事件触发的优先级列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:37:09.260

也许它比我的更好。但这是一种特定的方式，我的意思是你必须在块中插入新的处理程序。这是一个更通用的工具，但它似乎适用于您的案例。

我建议这样做：

```
//makes a closured function that calls this function after the other
Function.prototype.prefix=function(o) {
    var that=this;
    return function(){
        that.apply(this,arguments);
        return o.apply(this,arguments);
    };
}
//prefix=reversed sufix
Function.prototype.sufix=function(o) {return o.prefix(this);} 
```

使用此代码，您可以将函数彼此附加/附加以形成一种链，这对于添加另一个侦听器或跟踪函数使用情况很有用，甚至可以在影响最小的情况下调整代码。

一些用法

```
function audit() {console.log(arguments.callee.caller,arguments.callee.name,arguments);}
function a() {alert(arguments);}
a=audit.prefix(a);

//a user function
function f() {alert(arguments);}
f("test");//just do the alert as defined
 f=audit.prefix(a);
f("test");//now arguments will be on console too

//a builtin function
//this audit example only write to the console the arguments being passed to it
function audit() {console.log(arguments.callee,arguments);}
//auditing alert function (not too usefull, but shows it works even for
alert=audit.prefix(alert);//alert is now prefixed with audit

//an event handler
document.body.onclick=function() {alert("clicked");};
document.body.onclick=audit.prefix(document.body.onclick); 
```

# php - PHP遍历一个简单的逗号分隔列表

> ID：10839147
> 
> 赞同：7
> 
> 时间：2012-05-31T18:27:02.997
> 
> 标签：php

我有一个字符串可以是

```
$string = "value."; 
```

或者

```
$string = "value1, value2."; 
```

我想遍历这个字符串来获取每个项目，它们是 -> `value`（在第一个例子中）和 -> `value1`AND`value2`在第二个例子中（最后没有逗号或点）。

我在想；

1.  最后替换点。
2.  检查是否有逗号。
3.  如果有逗号，则使用“，”进行拆分分解并迭代。
4.  如果没有，只有一个项目，所以只需使用它。

这是正确的做法吗？

我是 PHP 新手，正在尝试学习解决问题的最佳实践和最佳方法。

谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-31T18:34:10.643

你是绝对正确的，你可以这样做：

```
$string = 'foo, bar, baz.';
$string = preg_replace('/\.$/', '', $string); //Remove dot at end if exists
$array = explode(', ', $string); //split string into array seperated by ', '
foreach($array as $value) //loop over values
{
    echo $value . PHP_EOL; //print value
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T18:59:13.273

我知道这已经得到解答，但是，你可以用一个命令来做到这一点：

```
$input = "foo, bar, baz., shibby, poop.";

//-- handles it all in one pass
$output = preg_split('/[\.,\s]/', $input, -1, PREG_SPLIT_NO_EMPTY);

//-- just output
array_walk($output, function(&$item, $idx) {
    echo $idx . ': ' . $item . PHP_EOL;
}); 
```

但是，如果您希望值中有空格，这也会将它们分开。我刚刚添加`\s`到正则表达式来修剪元素。如果您希望值中有空格，则省略`\s`正则表达式中的 和`trim()`稍后的元素。

或者，这个正则表达式将产生相同的结果：`/(\.\s?|,\s?)/`

```
$input = "foo, bar, baz., shibby, poop. foo bar";

//-- handles it all in one pass
$output = preg_split('/(\.\s?|,\s?)/', $input, -1, PREG_SPLIT_NO_EMPTY);

//-- just output
array_walk($output, function(&$item, $idx) {
    echo $idx . ': ' . $item . PHP_EOL;
}); 
```

生产

```
0: foo
1: bar
2: baz
3: shibby
4: poop
5: foo bar 
```

**正则表达式：解释**

原始的正则表达式只是简单地分割字符串中的单个字符，如`[`and表示`]`。因此，`/[\.,\s]/`匹配字符串中的句点、逗号和空格字符。想了想，这可能不是你想要的，但很接近。

更新后的正则表达式略有不同，分为两种不同的场景。`\.\s?`说：拆分期间和/或前段+空格。使`?`前面的可选（我相信 0 或 1）。与`,\s?`. 匹配逗号和/或逗号+空格。这说明了所有场景。使用分组 ( `(...)`) 而不是字符范围可以实现这一点。`|`中间的管道表示 OR 所以，完整的正则表达式表示：匹配句点和/或句点+空格或逗号和/或逗号+空格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T18:30:30.280

```
$string = "value 1, value2";
$string = trim($string, ".");

$split = explode(",", $string);
print_r($split); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T18:32:17.467

我会使用以下代码：

```
$string = "value1, value2.";
$arr = explode(', ', trim($string, '.'));
print_r($arr); 
```

### 输出

```
Array
(
    [0] => value1
    [1] => value2
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T18:29:54.567

你不应该做 2 和 4。如果没有逗号，那么它将拆分为一个元素的数组。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-27T07:53:44.947

试试这个代码

```
$arr="a,b,c";
$variableAry=explode(",",$arr); 
foreach($variableAry as $var)
{
 echo"<input type='text' value=".$var." ><br/><br/>";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T18:31:13.360

当您展开并且没有您请求的分隔符时，索引 0 处的结果是整个字符串。

```
<?php
$string = "test, test2., test3, test4";
print_r( explode(',', $string) );
//Array
//(
//    [0] => test
//    [1] =>  test2.
//    [2] =>  test3
//    [3] =>  test4
//)

$string = "test test2\. test3 test4";
print_r( explode(',', $string) );
//Array
//(
//    [0] => test test2\. test3 test4
//) 
```

# mysql - 将mysql DATETIME列转换为纪元秒

> ID：10839151
> 
> 赞同：26
> 
> 时间：2012-05-31T18:27:19.767
> 
> 标签：mysql, sql, datetime, epoch

我有一个`datetime`DATETIME 格式的 mysql 列。

有没有办法`SELECT`在纪元秒内访问这个专栏？如果不是，将日期时间格式转换为纪元秒的最佳方法是什么？什么类型的字段最能捕捉到这一点？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-31T18:29:31.963

使用 MySQL 的[`UNIX_TIMESTAMP`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-31T18:32:20.823

您可以使用 ：

```
SELECT UNIX_TIMESTAMP(yourfield) FROM yourtable; 
```

对于 UPDATE，反函数是： FROM_UNIXTIME(...)

# asp.net-mvc-3 - 将所有参数放入字典 在 MVC3 中？

> ID：10839160
> 
> 赞同：1
> 
> 时间：2012-05-31T18:27:47.677
> 
> 标签：asp.net-mvc-3

我想将参数从 URL 获取到控制器的字典中。这是一个例子：

> 网址：http://localhost/Application/View/Action?a=1&b=2

控制器代码

```
public ActionResult Action(Dictionary<string,string> args)
{
    //args["a"] = "1"
    //args["b"] = "2"
    return view(args); //sends entire dictionary
} 
```

我曾尝试使用扩展 IValueProvider 类，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:34:47.663

您可以使用提供的

```
Request.QueryString 
```

获取这些参数。它已经是一个 NameValueCollection（您也可以访问那里的键或将其作为任何其他 IEnumerable 进行迭代）。

# asp.net-mvc-3 - Asp.Net FormsAuth cookie 不持久

> ID：10839171
> 
> 赞同：1
> 
> 时间：2012-05-31T18:28:34.033
> 
> 标签：asp.net-mvc-3, asp.net-membership

我在浏览器会话中没有保留 cookie 时遇到问题。如果我关闭并重新打开浏览器，cookie 不会在下一次请求时传递给服务器。

这是我在用户登录时创建 cookie 的方式：

```
var ticket = new FormsAuthenticationTicket(
    1 /*version*/,
    user.Id,
    now,
    now.Add(ExpirationTimeSpan), /* ExpirationTimeSpan = TimeSpan.FromHours(6) */
    true /*createPersistentCookie*/,
    userData,
    FormsAuthentication.FormsCookiePath);

var encryptedTicket = FormsAuthentication.Encrypt(ticket);

var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket)
                    {
                        HttpOnly = true,
                        Secure = FormsAuthentication.RequireSSL,
                        Path = FormsAuthentication.FormsCookiePath
                    };
if (FormsAuthentication.CookieDomain != null)
{
    cookie.Domain = FormsAuthentication.CookieDomain;
}

var httpContext = this.contextAccessor.Current();
httpContext.Response.Cookies.Add(cookie); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:45:47.310

我认为您需要像这样设置 HttpCookie 的过期时间......

```
var cookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket)
        {
            HttpOnly = true,
            Secure = FormsAuthentication.RequireSSL,
            Path = FormsAuthentication.FormsCookiePath,
            Expires=  = DateTime.UtcNow.AddHours(6);
        }; 
```

# iphone - iPhone 应用程序的 SmallSockets 链接器错误

> ID：10839175
> 
> 赞同：0
> 
> 时间：2012-05-31T18:28:50.617
> 
> 标签：iphone, ios, sockets, networking

我正在尝试在我的 iPhone 应用程序中使用 SmallSockets 来建立与 Windows 主机（服务器）的 TCP 套接字连接。当我编译时，我收到以下错误：

```
 Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_Socket", referenced from:
  objc-class-ref in SmallSocketsTestViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

具体来说，红色部分是以下几行：

```
 "_OBJC_CLASS_$_Socket", referenced from:
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我是 iOS 开发的新手，而且对套接字编程非常陌生，所以当涉及到这些错误时，我非常迷茫。任何帮助深表感谢。谢谢！

这是我用来建立连接的代码：

```
-(IBAction)btnConnect:(id)sender
{
    Socket *socket;
    int port = 11005;
    NSString *host = @"19.5.8.63";

    socket = [Socket socket];

    @try
    {
        NSMutableData *data;
        [socket connectToHostName:host port:port];
        [socket readData:data];
    //  [socket writeString:@"Hello World!"];

    //** Connection was successful **//
    //[socket retain]; // Must retain if want to use out of this action block.
    }
    @catch (NSException* exception) 
    {
        NSString *errMsg = [NSString stringWithFormat:@"%@",[exception reason]];
        NSLog(errMsg);
        socket = nil;
    }

    //** Disconnect **//
    [socket close];
} 
```

如果我将整个方法注释掉，我不会收到任何错误。不确定这是否有助于阐明这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:41:18.990

终于想通了...我在将库文件添加到项目时没有选择“添加到目标”。/掌脸

# ruby-on-rails-3 - rails 3.2，如何为 HTTP 动词 put 编写路由，并在 link_to 中使用它？

> ID：10839177
> 
> 赞同：5
> 
> 时间：2012-05-31T18:29:05.700
> 
> 标签：ruby-on-rails-3, routes

我正在尝试为拒绝和批准操作编写两个链接，但是，我不知道如何编写正确的路线，

我的路线.rb

```
put 'approve_class_room/:id(.:format)', :to => 'class_room_member_ships#approve'
put 'reject_class_room/:id(.:format)', :to => 'class_room_member_ships#reject' 
```

但是，在 rake 路线中，我得到：

```
PUT    /approve_class_room/:id(.:format) class_room_member_ships#approve
PUT    /reject_class_room/:id(.:format)  class_room_member_ships#reject 
```

那么，正确的 link_to 路径是什么？

我的链接是

```
= link_to 'approve', approve_class_room_path 
```

它不会工作，我得到：

```
undefined local variable or method `approve_class_room_path' 
```

ps：我正在尝试使用 AJAX 让 link_to 工作，在同一页面上进行批准，我的方式是否正确？link_to 路径是什么？

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T20:09:21.863

首先，要清除错误，您需要使用[命名路由](http://guides.rubyonrails.org/routing.html#naming-routes)：

```
put 'approve_class_room/:id(.:format)', :to => 'class_room_member_ships#approve',
                                        :as => :approve_class_room
put 'reject_class_room/:id(.:format)', :to => 'class_room_member_ships#reject',
                                       :as => :reject_class_room 
```

然后，要执行 PUT 请求，您需要在调用中包含该`:method`选项：`link_to`

```
link_to 'approve', approve_class_room_path, :method => :put
link_to 'reject', reject_class_room_path, :method => :put 
```

如果您收到 404 导致 GET 请求而不是 PUT 请求，那是因为该`:method => :put`选项依赖于 JavaScript。您需要确保[jquery-rails](https://github.com/rails/jquery-ujs)正确集成到您的应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:03:38.893

这可能无法清除该错误，但由于请求是 put，因此您需要在以下内容中指定`link_to`：

```
= link_to 'approve', approve_class_room_path, :method => :put 
```

对于路线，我认为添加它会使错误消失：

```
put 'approve_class_room/:id(.:format)', :to => 'class_room_member_ships#approve', :as => :approve_class_room 
```

# jndi - Pentaho 客户端控制台中的空报告

> ID：10839179
> 
> 赞同：1
> 
> 时间：2012-05-31T18:29:24.110
> 
> 标签：jndi, pentaho, report-designer

我正在尝试向双服务器发布报告，因此我可以从客户端控制台（http://localhost:8080/pentaho/Home）对其进行可视化

我从管理控制台成功地将 JNDI 数据源配置到远程数据库（Oracle 10g），这是我使用的 url：jdbc:oracle:thin:@MY_SERVER_IP_HERE:1521:orcl

但是当我可视化我的报告时，我根本看不到任何数据，只有静态的东西：标签、图片等等。

请注意，我已经启动了双服务器，管理控制台和我的数据库所在的服务器也在工作，证明我可以在预览时看到来自报表设计器的数据。

在双服务器日志中，我在调用报告后发现了这一点：[CascadingDataFactory] ​​弃用行为：没有一个数据工厂能够处理查询“信息”。返回空表模型而不是硬失败。

是因为我使用 Report-Designer 3.9 运行双服务器 4.1 吗？

有没有人有任何想法可以帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:34:47.197

您是如何创建该报告的？你用过报表设计器吗？在我看来，报告本身存在问题，而不是 BI 服务器中存在问题

**更新** 对于许多消息，蒙德里安在检索数据时说了什么？我认为您应该通过制作一个小型 bi xaction 文件来验证您的 jndi，该文件显示 jPivot 中表的几列。这并不难，如果您对 xaction 不太熟悉，可以使用示例轻松创建一个。

哦，我完全忘记了这一点，您可能已经熟悉了，但是，您是否将 oracle 的 java 驱动程序放在管理控制台驱动程序目录中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T08:56:58.413

Bi server 版本与 PRD 冲突，查看这个[http://wiki.pentaho.com/display/PEOpen/Pentaho+Release+Product+Version+Matrix](http://wiki.pentaho.com/display/PEOpen/Pentaho+Release+Product+Version+Matrix)

# sql - 提高 DML 操作性能

> ID：10839182
> 
> 赞同：0
> 
> 时间：2012-05-31T18:29:34.353
> 
> 标签：sql, sql-server, sql-server-2008

这个问题是针对 SQL Server 的。如何提高 20 个索引的表的 DML 操作性能？除了删除索引还有什么选择？

我是一名具有编写 SP、函数等经验的 Web 开发人员。我对数据库优化的经验很少。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:36:51.300

第一步是使用 SQL Server Management Studio[可视化查询计划](http://msdn.microsoft.com/en-us/library/ms178071%28v=sql.105%29.aspx)并确定当前的性能瓶颈。它与优化查询的过程基本相同。

如果这不能立即使下一步变得明显，请更新您的 Stack Overflow 问题，提供有关您的 DML、架构、记录数以及您看到的查询计划的详细信息。

拥有 20 个索引并不能说明您的环境。

在开始之前，最零的步骤是`UPDATE STATISTICS`在数据库上。

# google-app-engine - AppEngine Java 上的全文。搜索子字符串 (SDK 1.6.6)

> ID：10839186
> 
> 赞同：2
> 
> 时间：2012-05-31T18:29:45.863
> 
> 标签：google-app-engine, full-text-search

搜索包含单词的文档，例如*London* works。如何使用（子字符串）定义对文档的搜索：

1.  以“*伦敦*”开头
2.  *或以“ don* ”结尾的词
3.  或含有“*上*”的词

文档：[https ://developers.google.com/appengine/docs/java/search/overview](https://developers.google.com/appengine/docs/java/search/overview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:28:07.380

不支持子字符串搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T15:20:47.210

App Engine 的全文搜索 API 不支持子字符串匹配。

但是，您可以为此发明一种解决方法。有关应该轻松转换为 Java 的基于 Python 的解决方案，请参阅[此答案](https://stackoverflow.com/a/10962212/66673)。

# c - C - 使用 read() 从标准输入读取整数

> ID：10839188
> 
> 赞同：3
> 
> 时间：2012-05-31T18:29:55.513
> 
> 标签：c

我正在学习 C，但我不理解以下代码的行为：

```
#include <sys/types.h>
#include <sys/uio.h>
#include <unistd.h>
#include <stdio.h>

int main() {    
    int buffer;
    read(0, &buffer, sizeof(int));
    printf("%d", buffer);
    return 0;
} 
```

输入：

```
1 
```

输出：

```
2609 
```

这里发生了什么？输出不应该是1吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:31:14.537

您`1`将十进制数字与数字一混淆。您还将第一名与第一名的计算机内部表示混淆了。

敲击`1`键盘上的键的人不是在输入计算机内部表示的数字。因此，将该键直接读入整数变量会产生垃圾。

计算机内部将 2609 存储为 0x31、0x0A（假设为 little-endian）。当这个人点击`1`然后输入时，键盘会发送一个 0x31（的 ASCII 代码`1`），然后是一个输入 (0x0A)。

但这是一个垃圾进，垃圾出的例子。您不应该将整数的地址传递给不需要指向整数的指针的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:29:23.783

我假设您正在阅读标准输入...

使用 scanf 函数

```
int scanf(const char *format, ...); 
```

在您的代码中：

```
int main() {    
    int buffer;
    scanf("%d", &buffer);
    printf("%d", buffer);
    return 0;
} 
```

见网址： [http ://en.wikipedia.org/wiki/Scanf_format_string](http://en.wikipedia.org/wiki/Scanf_format_string)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:31:23.543

你需要阅读二进制和ASCII。您将 ASCII 输入控制台，然后将其再次转换为 ascii。

此外，一个字符（通常）只有 1 个字节。您正在阅读 4（假设这是 int 的大小）。你有很多研究和阅读在你面前。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T18:34:40.620

您正在`character`从流中读取 a 并尝试将其打印为`integer`.

采用：

```
printf("%c", buffer); 
```

# c# - Azure 服务总线托管 REST 服务

> ID：10839191
> 
> 赞同：2
> 
> 时间：2012-05-31T18:30:08.663
> 
> 标签：c#, wcf, azure, azure-web-roles, azureservicebus

我正在尝试托管可以从 Azure 服务总线中继的 REST 服务。我看到了[这个博客](http://weblogs.thinktecture.com/cweyer/2010/07/beautiful-rest-services-urls-in-windows-azure-with-wcf4s-routing-integration-feature.html)，看起来它可以回答我的问题，但不幸的是，我得到了相同的结果。

这是我尝试在浏览器中访问服务时收到的异常。

> 该服务无法激活，因为它不支持 ASP.NET 兼容性。为此应用程序启用了 ASP.NET 兼容性。在 web.config 中关闭 ASP.NET 兼容模式，或将 AspNetCompatibilityRequirements 属性添加到服务类型，并将 RequirementsMode 设置为“允许”或“必需”。

`ServiceHostFactory`如果我从连接到 Azure 服务总线 ( *via[`basicHttpRelayBinding`](http://msdn.microsoft.com/en-us/library/microsoft.servicebus.basichttprelaybinding.aspx)* ) 的服务中排除 Azure 端点注册，我不会收到此错误，我可以在本地访问该服务。它与托管 RESTful 服务 ( `webHttpBinding`) 和 Azure 服务总线中继绑定 ( `basicHttpRelayBinding`) 有关。

在 global.asax 我添加服务托管

```
protected void Application_Start(object sender, EventArgs e)
{
    // Add REST service hosting.
    RouteTable.Routes.Add(new ServiceRoute("myservice/rest",
         new CustomWebServiceHostFactory(typeof(IMyService)),
         typeof(MyServiceProvider)));
} 
```

我已按如下方式装饰了我的服务提供者：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class MyServiceProvider : IMyService
{
    ...
} 
```

我在 IIS 中运行的服务接口的 web.config 具有以下值：

```
<configSections>
    <sectionGroup name="system.serviceModel" type="System.ServiceModel.Configuration.ServiceModelSectionGroup, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
      <section name="standardEndpoints" type="System.ServiceModel.Configuration.StandardEndpointsSection, System.ServiceModel, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
    </sectionGroup>           
</configSections>

<system.serviceModel>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <standardEndpoints>
       <webHttpEndpoint>
          <standardEndpoint helpEnabled="true" automaticFormatSelectionEnabled="true">
             <security mode="None"/>
          </standardEndpoint>
       </webHttpEndpoint>
    </standardEndpoints>
...
</system.serviceModel> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:44:57.547

我可以建议你试试我的这个博客，它显示了完全相同的问题以及根本原因和解决方案，尝试应用建议并让我们知道：

[http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/17/wcf-rest-http-application-connecting-azure-service-bus-using-webhttprelaybinding-causes-aspnetcompatibilityenabled-error.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/17/wcf-rest-http-application-connecting-azure-service-bus-using-webhttprelaybinding-causes-aspnetcompatibilityenabled-error.aspx)

# c# - XNA 相机类不工作

> ID：10839192
> 
> 赞同：1
> 
> 时间：2012-05-31T18:30:10.047
> 
> 标签：c#, xna, camera, rotation

所以我正在用相机制作游戏，它的工作原理与模拟人生 2 的相机类似。我想要完成的是一台相机，它可以：

*   围绕焦点旋转。*   提供三个必要的矩阵（World、View 和 Proj），每帧重新计算世界和视图矩阵。*   当位置向量发生变化时，假设它的 X 部分，它应该向左/向右移动，而不是沿 X 轴移动，如果你明白我的意思的话。*   相对焦点向量。

但是，我在移动左/右部分时遇到问题。我会给你我拥有的代码。请注意，在这个版本的代码中，我还没有尝试实现它。

```
private float worldRotation = 0;
public void RotateAroundFocusPoint(float relativeDegrees)
{
    worldRotation += MathHelper.ToRadians(relativeDegrees);
}

public Matrix World, View, Proj;
public Vector3 Position, Focus /*relative*/;

public void Update()
{
    World = Matrix.CreateTranslation(-Position - Focus) *
        Matrix.CreateRotationY(worldRotation);
    View = Matrix.CreateLookAt(-Focus, Vector3.Zero, Vector3.Up);
} 
```

在 3D 编程方面，我是一个菜鸟，所以我希望你能帮助我！

提前致谢，

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:31:47.880

所以我自己想通了。这是一种解决方法，但我使用以下方法实现了它：

```
private float worldRotation = 0;
public void RevolveAroundFocusPoint(float relativeDegrees)
{
    worldRotation += MathHelper.ToRadians(relativeDegrees);
}

public Vector3 Modified
{
    get
    {
        Vector3 f = Vector3.Transform(Focus, Matrix.Invert(Matrix.CreateRotationY(worldRotation)));
        return new Vector3(f.X, Position.Y, f.Z);
    }
}
public float Multiplier(float value, Vector3 v3)
{
    return value / /*Zoom / */ (Math.Abs(v3.X) + Math.Abs(v3.Z));
}
public void MoveRight(float value)
{
    Vector3 f = Modified;
    float multiplier = Multiplier(value, f);
    Position += new Vector3(f.Z * multiplier, 0, f.X * multiplier);
}
public void MoveLeft(float value)
{
    Vector3 f = Modified;
    float multiplier = Multiplier(value, f);
    Position += new Vector3(-f.Z * multiplier, 0, -f.X * multiplier);
}
public void MoveBackward(float value)
{
    Vector3 f = Modified;
    float multiplier = Multiplier(value, f);
    Position += new Vector3(-f.X * multiplier, 0, f.Z * multiplier);
}
public void MoveForward(float value)
{
    Vector3 f = Modified;
    float multiplier = Multiplier(value, f);
    Position += new Vector3(f.X * multiplier, 0, -f.Z * multiplier);
}

public Matrix World;
public Matrix View;
public Matrix Proj;

public Vector3 Position { get; private set; }
public Vector3 Focus;

public void Update()
{
    World = Matrix.CreateTranslation(-Position - Focus) *
        Matrix.Invert(Matrix.CreateRotationY(worldRotation)) *
        Matrix.CreateScale(Zoom) *
        Matrix.CreateTranslation(Position + Focus);
    View = Matrix.CreateLookAt(Position, Position + Focus, Vector3.Up);
} 
```

# c - 为什么访问 C:\Windows\System32\... 的 windows 命令在 C 程序中不起作用？

> ID：10839193
> 
> 赞同：0
> 
> 时间：2012-05-31T18:30:10.130
> 
> 标签：c, windows, cmd, system32, bcdedit

我正在运行旨在自动化“重新打包”Windows 安装的进程的 ac 程序。我这样做有两个原因。第一个原因是学习 c 编程，第二个原因是我在没有超级驱动器的 MacBook Pro 上运行 Windows。我找到了一个教程，解释了如何在 vbox 上安装 Windows，然后将其复制到另一个硬盘驱动器。我决定要练习 c 编程并使本教程自动化，所以我编写了下面的代码。当我运行下面的程序时，我收到 bcdedit 不是内部或外部命令并且 unnattend.xml 复制的错误，但是当我检查它是否存在时，找不到任何地方。经过一番试验，我发现我在 System() 函数中使用的代码如果我直接从提升的命令提示符运行它，它运行得非常好。虽然当我从提升的命令提示符运行我的程序时，它给了我前面提到的错误。似乎exe无法访问System32文件夹？请帮忙！我在这里用头撞墙

```
 #include <stdio.h>

    void part1 (void);
    void part2 (void);

    void part1 (void)
    {
        FILE *fp;
        //Run Switcheroo
        if ((fp=fopen("log.txt", "r")) == NULL)
        {
            //Run part 1.
            system("DISKPART /s resources\\diskpart\\DskPrtAssgn.txt");
            system("TIMEOUT /T 3");
            system("reg unload HKLM\\BCD00000000");
            system("TIMEOUT /T 3");
            system("robocopy s:\\ c:\\ bootmgr");
            system("TIMEOUT /T 3");
            system("robocopy s:\\Boot c:\\Boot /s");
            system("TIMEOUT /T 3");
            system("bcdedit /store c:\\boot\\bcd /set {bootmgr} device partition=C:");
            system("TIMEOUT /T 3");
            system("DISKPART /s resources\\diskpart\\DskPrtActv.txt");
            system("TIMEOUT /T 3");
            system("schtasks /create /tn 'Switcheroo' /tr %userprofile%\\Desktop\\Switcheroo\\Switcheroo.exe /sc onlogon");

            //Set up the log file that the computer will check upon reboot.
            char buffer[2] = {'0'};
            fp = fopen("log.txt", "wb");
            fwrite (buffer , 1 , sizeof(buffer) , fp );

            //Reboot.
            system("shutdown -r");
        }
        else if (fp = fopen("log.txt", "rt"))
        {
            part2();
        }
    }

    void part2 (void)
    {
        FILE *fp;

        //Read the log file from part1\. 
        if (fp = fopen("log.txt", "rt"))
        {
            //Run part 2.
            system("DISKPART /s resources\\diskpart\\DskPrtRmv.txt");
            system("TIMEOUT /T 3");
            system("cd resources\\sysprep");
            system("copy unattend.xml C:\Windows\System32\Sysprep");
            system("TIMEOUT /T 3");     
            system("runas /user:%username% %userprofile%\\Desktop\\Switcheroo\\resources\\sysprep\\ sysprep.bat");
        }

        //If part one did not finish then print error.
        else if ((fp=fopen("log.txt", "r")) == NULL)
        {
            printf("Error.");
        }
    }

    int main ()
    {
        part1();
        return(0);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:46:44.483

您是否在关闭所有警告的情况下进行编译？

因为该行`system("copy unattend.xml C:\Windows\System32\Sysprep");` 需要转义反斜杠。

**编辑**

这将是您被拒绝访问该文件夹的权限问题。如果您以管理员身份运行 .exe，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:50:23.417

您不应该在 C 中编写系统管理脚本。在批处理、python 或 PowerShell 中进行。对于您正在编写的程序，C 绝对不是正确的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:50:40.573

我不能肯定地说这是你的问题，但是......我怀疑你只是对一个新目录进行了`system()`调用。`cd`由于每个都在新的 shell 中运行，因此*不会*影响对`system()`. 因此，如果您尝试更改到存在文件的目录来对其进行操作，您会发现您实际上并不在该目录中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:57:54.550

除了失败的那一行之外，您已经逃脱了每一行中的所有反斜杠。你只需要在那里逃脱它们。

```
system("copy unattend.xml C:\\Windows\\System32\\Sysprep"); 
```

我不得不同意你所做的对于 C 程序来说是疯狂的。但它应该工作。

***编辑***

`sysprep.bat`在上一次 System() 调用之前，您似乎也有一个不需要的空间。

另外，我同意 FatalError 的观点，即您的`cd`系统调用没有任何好处。删除该行，然后在下一行中为“unattend.xml”添加文件的完整路径。

如果在您的任何默认 PATH 文件夹中都找不到 bcedit，那么您可能需要提供该文件的绝对路径。

# python - 子流程 - Grep 断管

> ID：10839194
> 
> 赞同：1
> 
> 时间：2012-05-31T18:30:24.617
> 
> 标签：python, grep, subprocess

Python 2.4.x 在这里。

一直在努力让子进程与 glob 一起工作。

好吧，这里是问题区域。

```
def runCommands(thecust, thedevice):
    thepath='/smithy/%s/%s' % (thecust,thedevice)
    thefiles=glob.glob(thepath + '/*.smithy.xml')
    p1=subprocess.Popen(["grep", "<record>"] + thefiles, stdout=subprocess.PIPE)
    p2=subprocess.Popen(['wc -l'], stdin=p1.stdout, stdout=subprocess.PIPE)
    p1.stdout.close()
    thecount=p2.communicate()[0]
    p1.wait() 
```

我在屏幕上收到许多“grep：写入输出：断管”错误。

这一定是我想念的一些简单的东西，我只是无法发现它。任何想法？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:57:01.240

这里的问题是`p2`你的参数列表应该是`['wc', '-l']`而不是`['wc -l']`.

目前它正在寻找一个名为`'wc -l'`运行的可执行文件但没有找到它，因此`p2`立即失败并且没有任何连接到`p1.stdout`，这导致管道错误。

试试下面的代码：

```
def runCommands(thecust, thedevice):
    thepath='/smithy/%s/%s' % (thecust,thedevice)
    thefiles=glob.glob(thepath + '/*.smithy.xml')
    p1=subprocess.Popen(["grep", "<record>"] + thefiles, stdout=subprocess.PIPE)
    p2=subprocess.Popen(['wc', '-l'], stdin=p1.stdout, stdout=subprocess.PIPE)
    p1.stdout.close()
    thecount=p2.communicate()[0]
    p1.wait() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:46:28.363

这似乎是因为您`p1.stdout`在 grep 完成输出之前关闭。也许你的意思是关闭`pt.stdin`？不过，似乎没有任何理由关闭其中任何一个，所以我将删除该`p1.stdout.close()`声明。

# java - 使用 Java 策略文件使应用程序免受 JCE 限制

> ID：10839197
> 
> 赞同：1
> 
> 时间：2012-05-31T18:30:42.410
> 
> 标签：java, security, cryptography, jce

我有一个使用 AES-256 执行一些加密的 Java 应用程序；如您所知，这需要 JCE Unlimited Strength Jurisdiction Policy Files。但是，我不想在应用程序分发到的所有机器上都安装这些。所以经过一番挖掘后，我遇到了这个：

[http://docs.oracle.com/javase/1.5.0/docs/guide/security/jce/JCERefGuide.html#ExemptApps](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jce/JCERefGuide.html#ExemptApps)

这显然是一种在 JAR 中包含策略文件的方法。从那篇文章中，完成此操作的步骤是：

> 第 1 步：编写和编译您的应用程序代码
> 
> 第 2 步：创建权限策略文件以授予适当的加密权限
> 
> 第 3 步：准备测试
> 
> > 步骤 3a：从政府强制限制中申请政府批准。
> > 
> > 步骤 3b：获取代码签名证书
> > 
> > 步骤 3c：将应用程序和权限策略文件捆绑到 JAR 文件中
> > 
> > 步骤 3d：签署 JAR 文件
> > 
> > 步骤 3e：设置您的环境，就像受限制国家的用户一样
> > 
> > 步骤 3f：（仅适用于使用豁免机制的应用程序）安装实现权限策略文件中指定的豁免机制的提供程序
> 
> 第 4 步：测试您的应用程序
> 
> 第 5 步：如果需要，申请美国政府出口批准
> 
> 第 6 步：部署您的应用程序

我想知道的是步骤 3b - 3d。我应该如何签署这个 JAR 文件？谁应该签字？我可以使用客户没有的自签名证书进行签名吗？是否对此签名进行了任何身份验证？

有人对这个有经验么？

# javascript - 单元测试 base.js 类

> ID：10839199
> 
> 赞同：1
> 
> 时间：2012-05-31T18:30:46.950
> 
> 标签：javascript, jquery, unit-testing, qunit, sinon

我正在测试一些**base.js**（[dean edwards base.js](http://dean.edwards.name/weblog/2006/03/base/)）代码，并想测试一些基本函数是否被特定参数调用。我们的测试堆栈看起来像 js 代码、qunit、sinon。例如，我有：

```
var Foo = Base.extend({
    constructor: function () {
        //do constructor stuff
    },
    render: function (config) {
        config = config || {};

        //do rendery stuff with specified config
    }
});

var Bar = Foo.extend({
    render: function () {
        config = {a: 'a', b: 'b'};
        this.base(config);
    }
});

var b = (new Bar()).render(); 
```

所以在上面的例子中，我创建了一个“Bar”的新实例并调用了 render 方法。Bar 渲染方法指定一些配置并将其传递给父渲染方法。有什么方法（使用 sinon.js）来监视该基本渲染调用吗？我通常会做类似的事情：

```
sinon.spy(b, 'render') 
```

但这只会让我第一次调用渲染。

# c# - In Visual Studio for a C# project, where does the list of exceptions to break on get stored?

> ID：10839210
> 
> 赞同：4
> 
> 时间：2012-05-31T18:31:47.850
> 
> 标签：c#, visual-studio-2010, visual-studio, exception

In Visual Studio, there is a list under Debug > Exceptions (Ctrl-Alt-E) that shows which exceptions the debugger should break on. Where does this list get stored?

I ask because my list is being constantly reset (and all of my System exceptions are being disabled, so all of the important exceptions don't break at all) and I'm trying to figure out why.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T18:52:08.380

I guessed it right... It is actually stored in the Solution User Option (suo) file right next to your solution. You need to save it correctly once to keep your exception list persisted.

Here is an article from John Robbins along the same lines [http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/04/03/customizing-exception-handling-in-the-vs-debugger.aspx](http://www.wintellect.com/CS/blogs/jrobbins/archive/2009/04/03/customizing-exception-handling-in-the-vs-debugger.aspx)

# c++ - 用汽车游戏连接 C++ 代码

> ID：10839221
> 
> 赞同：2
> 
> 时间：2012-05-31T18:32:24.410
> 
> 标签：c++, visual-studio-2010, image-processing, opencv, c++11

我在opencv中做一个项目。我想通过手势控制汽车。现在任何人都可以帮助我了解如何将我的程序与游戏连接起来。我应该遵循哪些步骤。所以我可以将信号发送到汽车游戏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T09:54:13.627

你的手势应该是数字。每个手势都由一个数字表示。

您将这些数字作为程序的输出发送。您的游戏使用数字作为输入，每个数字决定一个动作。

根据您当前对问题的描述，我无法更具体。

# java - EJB2 中的时间延迟

> ID：10839222
> 
> 赞同：1
> 
> 时间：2012-05-31T18:32:24.550
> 
> 标签：java, ejb

EJB 类之一正在调用外部 API，如果在一段时间延迟后出现故障，我想重试。由于管理线程不是一个好主意（不建议使用 Thread.sleep(1000)），有人可以告诉我如何在 EJB2 中延迟/暂停进程一段时间吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:16:37.707

作为一种解决方法，如果出现故障，那么您可以创建一个具有适当超时持续时间的计时器，在这种情况下将是延迟持续时间。

在超时方法中，您可以再次调用 EJB，这将进一步调用外部 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:53:08.573

如果线程成功，我认为您多次睡眠 1 秒的问题是不必要的等待时间。

您可以尝试使用 join 代替睡眠，而不是睡眠。

```
join(5000) 
```

最多会等待 5 秒以使线程完成。如果它提前完成，您的执行将继续。如果它没有提前完成，您的执行将在 5 秒后恢复。

sleep 方法使用[轮询](http://en.wikipedia.org/wiki/Polling_%28computer_science%29)技术，而 join 使用修改后的[中断](http://en.wikipedia.org/wiki/Interrupt)方案。

# php - 如果 GET 查询包含数组中的关键字

> ID：10839224
> 
> 赞同：0
> 
> 时间：2012-05-31T18:32:41.877
> 
> 标签：php, html

我想制作一个 PHP 脚本，它采用`$_GET[q]`由许多不同的单词或术语组成的 PHP GET 变量，并检查它是否包含存储在数组中的任何“关键字”。这方面的一个例子是它可能看起来像“旧金山现在几点了”。我希望脚本以“时间”和“旧金山”为例。我玩过使用

```
if(stripos($_GET[q],'keyword1','keyword2')) 
```

但没有太多的运气。

**有谁知道我该怎么做？**

我希望每个人都能理解我要描述的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:41:06.543

```
foreach($arr as $value){
  if(stripos($_GET[q],$value){
    do stuff
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:42:51.243

您可以创建一个关键字数组，然后循环直到找到匹配项。

```
$array = array('keyword1', 'keyword2');
$found = false;
foreach($array as $x){
    if(stripos($_GET['q'], $x) !== false){
        $found = true;
        break;
    }
}

if($found){
} 
```

**更新**：如果你想匹配*所有*关键字，你可以这样做：

```
$array = array('keyword1', 'keyword2');
$found = true;
foreach($array as $x){
    $found &= stripos($_GET['q'], $x) !== false;
}

if($found){
} 
```

演示：[http ://codepad.org/LaEX6m67](http://codepad.org/LaEX6m67)

**更新 2**：因为我很疯狂，喜欢单线，你可以在 PHP 5.3+ 中做到这一点：

```
$array = array('keyword1', 'keyword2');
$val = $_GET['q'];
$found = array_reduce($array, function($x, $v) use($val){
    return $x && stripos($val, $v) !== false;
}, true);

if($found){
} 
```

演示：[http ://codepad.viper-7.com/Y48sHR](http://codepad.viper-7.com/Y48sHR)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:36:27.510

使用[in_array](http://php.net/manual/en/function.in-array.php)函数：

```
 // assuming $arr is your array of keywords
 if (in_array($_GET['q'], $arr))
     echo "found a match\n"; 
```

### 编辑：根据您的评论，这里是您可以使用的代码，无需任何循环即可工作：

```
$arr = array('keyword1', 'keyword2', 'keyword3');
$brr = array_map(create_function('$m', 'return "/\b" . $m . "\b/";'), $arr);
if ($_GET['q'] !== preg_replace($brr, '', $_GET['q']))
     echo "found a match\n";
else
     echo "didn't find a match\n"; 
```

# java - ehcache 配置中的 maxElementsInMemory 是否会影响性能

> ID：10839229
> 
> 赞同：7
> 
> 时间：2012-05-31T18:33:10.207
> 
> 标签：java, hibernate, ehcache

只是想知道将 maxElementsInMemory 设置为远高于实际使用的值是否会对性能产生影响？例如，最多 10,000 个并且仅使用 100 个。

ehcache.xml

```
<defaultCache
    eternal="false"
    overflowToDisk="false"
    maxElementsInMemory="10000"
    timeToIdleSeconds="7200"
    timeToLiveSeconds="0"/> 
```

上下文：我将 ehcache 与休眠一起使用，并且我希望缓存表的所有记录（所有实体）。从一个客户到另一个客户，该表中的记录数会有所不同，因此很难设置精确的最大值。

谢谢！

马克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:44:03.110

不，没有。这只是一个*最大值*。如果您的缓存仅包含 100 个项目，您将支付包含 100 个元素的地图的成本。上限与这里无关。

您可以安全地使用更高的限制（下面是一个简单的[`ConcurrentHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentHashMap.html)），尽管很难证明这样的选择是合理的。

# c# - 为问题进程创建转储文件的最简单方法

> ID：10839230
> 
> 赞同：6
> 
> 时间：2012-05-31T18:33:12.420
> 
> 标签：c#, windbg, dump

我发现了多种创建转储文件的方法，例如使用 windows 实用程序 userdump 和 adplus.vbs 以及其他一些方法。我在任务管理器中找到了一个选项似乎是最简单最简单的一个打开任务管理器+选择进程+右键单击+创建用户转储。使用 taks manager 创建的 .dmp 文件与使用 win 实用程序创建的文件有什么不同吗？

让用户从任务管理器创建转储文件比让他运行实用程序容易得多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T02:42:29.557

请记住，在 64 位操作系统上，任务管理器为 WOW 进程创建的转储将是 64 位转储。这可能会导致问题，尤其是在调试托管代码时。对于 32 位 WOW 进程，通常最好使用 32 位实用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:01:22.847

不确定从任务管理器创建的 minidump 有什么区别，但如果您想了解更多信息，那么最好的办法是以编程方式创建 minidump 并设置适当的标志（请注意，某些标志取决于操作系统）或使用 Dr. Watson，您可以在其中简单地选中转储文件中所需信息的框。

您可以使用以下方式以编程方式创建转储：http `MiniDumpWriteDump`: [//msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680360%28v=vs.85%29.aspx)有一篇关于此的 SO 文章：[如何创建我的进程崩溃时的小型转储？](https://stackoverflow.com/questions/1547211/how-to-create-minidump-for-my-process-when-it-crashes)

您还可以设置博士。Watson 在崩溃发生时为您生成它们：http: [//kb.acronis.com/content/2191](http://kb.acronis.com/content/2191)

任务管理器解决方案很好，但自动生成它们更好 IMO 并以编程方式生成它们可以让您更好地控制和转储特定于您的应用程序的其他信息的选项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T21:08:00.377

我们用于捕获最终用户计算机上的崩溃或挂起的方法之一是使用出色的 ProcDump 实用程序，我们编写一个简单的批处理脚本，该脚本要么坐下来等待应用程序无响应，要么您可以设置其他条件，例如当 CPU 使用率达到特定点时。我在[这个回复](https://stackoverflow.com/questions/10586122/windbg-to-create-dump-file-upon-crash/10590557#10590557)中举了一个例子。

# spotify - libspotify API：曲目、专辑、播放列表、图像等的可用性之间的关系是什么？

> ID：10839233
> 
> 赞同：1
> 
> 时间：2012-05-31T18:33:24.357
> 
> 标签：spotify

曲目数据需要准备好才能播放曲目。是否必须加载专辑才能检索专辑封面图片？艺术家肖像也一样吗？

我正在尝试使用可用的专辑 URI 检索专辑封面图片。我的计划是从专辑 uri 中获取专辑封面艺术图像 id，然后从图像 id 中获取图像数据。如果未加载专辑，则专辑封面艺术图像 ID 似乎不可用。

我的问题是 - 是否可以在不加载整个专辑对象（包括所有曲目）的情况下获取封面图像 ID？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:50:11.123

每个单独的元数据对象都与任何关联的元数据对象分开——加载曲目时，它只知道其关联的艺术家和专辑的 ID。如果您还需要艺术家和专辑，则需要单独加载它们。一个对象的元数据加载要么全部加载，要么全部加载——要么加载要么不加载。

考虑到这一点，您必须等待专辑对象完全加载，然后才能获取该专辑的封面 ID。

但是，加载专辑并不会加载其所有曲目（这就是`sp_ablumbrowse`目的）。加载专辑的元数据实际上非常轻量级。

# joomla - Joomla com_extplorer 不断重新加载页面

> ID：10839237
> 
> 赞同：0
> 
> 时间：2012-05-31T18:33:30.033
> 
> 标签：joomla, components, aruba

我习惯于在每个 joomla 项目中安装 explorer，总是一切顺利。这次在 extplorer 启动时，它继续以循环模式加载网页（试图更改管理员/组件中的权限，让 Aruba 安装 joomla 的三重奏）没有任何效果。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:45:25.107

您是否安装了 Admintools 扩展和自定义 .htaccess 文件？

如果是，请打开 AdminTools 和 htaccess maker。在服务器保护>例外>允许直接访问这些文件

添加以下行：

> 管理员/组件/com_extplorer/fetchscript.php

到允许的文件列表并重新生成您的 .htaccess。

# internet-explorer - IE9、IE8、SVG、VML 和文档类型

> ID：10839240
> 
> 赞同：7
> 
> 时间：2012-05-31T18:33:39.817
> 
> 标签：internet-explorer, internet-explorer-8, svg, internet-explorer-9, vml

我正在我的 ASP.NET Web 应用程序中绘制形状。在 IE9 和其他浏览器中，我使用 SVG 进行操作，而且效果很好。在 IE8 及以下版本中，我使用的是 VML。我发现 IE8 在 IE8 标准模式下（不使用兼容性视图）时根本不显示 VML。

我的文档类型设置为`<!DOCTYPE html>`. 如果我完全取消 doctype，IE8 会进入 quirks 模式并且工作正常，但 IE9 然后会进入*其*quirks 模式（而不是 IE9 标准）并且不显示 SVG。

`<svg>`这发生在测试页面上，因此除了包含包含元素及其子元素或 VML 元素的 div 的表单之外没有任何内容。

这里发生了什么？似乎我不应该为不同的浏览器更改文档类型，并且 Stack Exchange 用户页面上的信誉图似乎以相同的方式工作（IE8 及以下版本的 VML，其他所有人的 SVG，HTML5 文档类型）......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T10:17:33.293

您还需要检查几件事：

需要修改行为规则的选择器。

*   设置元素的尺寸或位置时，单位不默认为 px。必须明确指定它才能工作。
*   您不能在 DOM 之外创建 VML 元素：

.

```
var vmlFrag = document.createDocumentFragment();
vmlFrag.insertAdjacentHTML('beforeEnd',
'<v:rect id="aRect" fillcolor="red"         
style="top:15px;left:20px;width:50px;height:30px;position:absolute;"></v:rect>'
);
document.body.appendChild(vmlFrag); 
```

*   不会显示矩形元素！你也不能修改它的 CSS，因为你可能只会让浏览器崩溃。但是，有一个解决方法。将元素的 outerHTML 复制到自身中：

.

```
var aRect = document.getElementById('aRect');
aRect.outerHTML = aRect.outerHTML; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-03T23:22:05.467

要在 IE8 标准模式下声明 VML 命名空间，您需要包含第三个[`'#default#VML'`参数](https://groups.google.com/group/google-excanvas/browse_thread/thread/8762ed1ede73509)：

```
document.namespaces.add('v', 'urn:schemas-microsoft-com:vml', '#default#VML'); 
```

您可能需要注意 IE8 中对 VML的[其他更改。](http://louisremi.com/2009/03/30/changes-in-vml-for-ie8-or-what-feature-can-the-ie-dev-team-break-for-you-today/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T14:10:31.170

[HighCharts](http://www.highcharts.com/)源代码给出了解决方案。除了在运行时添加命名空间外，您还必须添加特定的 CSS 行为：

```
<!--[if lte IE 8 ]>
<script type="text/javascript">
    document.namespaces.add('vml', 'urn:schemas-microsoft-com:vml');
    document.createStyleSheet().cssText =
        'vml\\:fill, vml\\:path, vml\\:shape, vml\\:stroke' +
        '{ behavior:url(#default#VML); display: inline-block; } ';
</script>
<![endif]--> 
```

之后，js创建的元素将在页面上可见。[观看演示](http://jsfiddle.net/ntoniazzi/gHLPE/)。

# jquery - 跨浏览器文件上传输入黑客

> ID：10839247
> 
> 赞同：0
> 
> 时间：2012-05-31T18:33:53.243
> 
> 标签：jquery, css, forms, file-upload

我正在使用 hack 使文件输入在所有浏览器中显示一致。我正在使用[这种技术](http://www.quirksmode.org/dom/inputfile.html)。基本上，您将文件上传输入的不透明度设置为 0，并将其绝对定位在另一个样式化的输入之上（为了跨浏览器的一致性）。当用户点击“文件上传”区域时，其实是点击了下方的输入，但是由于上传区域的不透明度为零，所以还是触发了上传对话框。这个 hack 效果很好（在链接中阅读更多内容），但是，有一个主要问题：因为不透明度设置为 0，所以您看不到文件路径，这是让用户知道浏览按钮有效所必需的。

我正在寻找执行以下操作的 jquery 解决方案：当用户浏览文件时，jquery 会将文件名/路径存储在变量中，然后将该变量显示为另一个输入的（先前输入）值。也就是说，当用户选择一个文件时，文件名作为一个值显示在另一个输入中。

这是我的 HTML / CSS：

```
<div id="upload">
    <input type="text" id="fakeUpload" value="Choose File">
    <span class="file-upload">
        <input type="file" name="file-upload" class="wpcf7-file" size="1" value="1">
    </span>
</div>

#upload{position:relative; float:left; width:100%; cursor:pointer;}
#upload input#fakeUpload{position:absolute; top:0; left:0; display:block; font-size:15px; color:black; background:#f1f1f1; padding:7px 5%;  width:90%!important; cursor:pointer; z-index:1;}
#career input[type="file"] {opacity: 0; position:absolute; top:0; left:0; z-index:2; text-align: right;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:40:14.897

添加：

```
$('.wpcf7-file').on('change', function(){
    $('#fakeUpload').val(this.value);
}); 
```

[http://jsfiddle.net/fEp68/](http://jsfiddle.net/fEp68/)

该演示没有您的样式，但您可以发挥您的想象力：]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:51:05.317

不要只依赖于点击的不透明度。如果用户使用的是显示不一致的浏览器（如手机浏览器），文件输入可能不在“假”输入的正上方，所以他将无法点击

这是一个等效的解决方案，但依赖于javascript来点击真正的输入：html。请注意，“真实”输入并未隐藏，但您可以`display:none`对其应用 a：

见小提琴：http: [//jsfiddle.net/QPUJa/](http://jsfiddle.net/QPUJa/)

html:

```
normal file:<input type="file" name="myfile" id="myfile" />
<br /> <br /> 
Fake: <input type="text" id="choosebox" />
<a href="#" id="choose">Choose</a> 
```

js：

```
$("#choose").click(function(){
    $("#myfile").click();
    return false;
});

$("#myfile").change(function(){
    $("#choosebox").val($(this).val())
}); 
```

基于此，创建一个自动查找所有输入文件并在页面加载时替换为假文件的脚本很容易。

# c++ - 使用 `(boost::any a)` 而不是 `(const boost::any& a)` 来防止引用到引用

> ID：10839252
> 
> 赞同：2
> 
> 时间：2012-05-31T18:34:12.927
> 
> 标签：c++, boost, stl, boost-any

> 首先是我们的新函数对象 contains_t 的定义。它可能继承自辅助类 std::unary_function（C++ 标准库的一部分，旨在促进正确的 typedef 的创建）并自动定义参数和结果类型，但为了清楚起见，所需的 typedef 是明确提供。**参数类型已从 const boost::any& 更改为 boost::any，以避免潜在的引用到引用，这是非法的。**实现和之前一样，只是这里放在了函数调用操作符中。

```
template <typename T> struct contains_t {
  typedef boost::any argument_type;
  typedef bool result_type;
  bool operator()(boost::any a) const {
    return typeid(T)==a.type();
  }
}; 
```

为什么以下实现有可能接收引用到引用？

```
template <typename T> struct contains_t {
  typedef boost::any argument_type;
  typedef bool result_type;
  bool operator()(const boost::any& a) const {
    return typeid(T)==a.type();
  }
}; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:51:47.290

由于 boost::any 可以存储任何东西，它也可以存储引用。因此，如果您有对 boost::any 的引用，您可能会意外地在内部得到对引用的引用。

即 boost::any 可以表示任何类型 T。令 T 为类型 U 的引用，即 T = U&。因此，获取 T 类型的引用会创建对 U 类型引用的引用，这在 C++03 中是不允许的（但 C++11 将允许这样做）。

# java - Mockito - 拦截模拟上的任何方法调用

> ID：10839253
> 
> 赞同：29
> 
> 时间：2012-05-31T18:34:17.223
> 
> 标签：java, unit-testing, mockito

是否可以以通用方式拦截模拟上的所有方法调用？

**例子**

给定供应商提供的类，例如：

```
public class VendorObject {

    public int someIntMethod() {
        // ...
    }

    public String someStringMethod() {
        // ...
    }

} 
```

我想创建一个模拟，将*所有*方法调用重定向到另一个有匹配方法签名的类：

```
public class RedirectedToObject {

    public int someIntMethod() {
        // Accepts re-direct
    }

} 
```

Mockito 中的 when().thenAnswer() 构造似乎符合要求，但我找不到将任何方法调用与任何参数匹配的方法。无论如何，InvocationOnMock 肯定给了我所有这些细节。有没有通用的方法来做到这一点？看起来像这样的东西，其中 when(vo.*) 被替换为适当的代码：

```
VendorObject vo = mock(VendorObject.class);
when(vo.anyMethod(anyArgs)).thenAnswer(
    new Answer() {
        @Override
        public Object answer(InvocationOnMock invocation) {

            // 1\. Check if method exists on RedirectToObject.
            // 2a. If it does, call the method with the args and return the result.
            // 2b. If it does not, throw an exception to fail the unit test.

        }
    }
); 
```

在供应商类周围添加包装器以简化模拟不是一种选择，因为：

1.  现有代码库太大。
2.  性能极其关键的应用程序的一部分。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-31T22:50:13.143

我想你想要的是：

```
VendorObject vo = mock(VendorObject.class, new Answer() {
    @Override
    public Object answer(InvocationOnMock invocation) {

        // 1\. Check if method exists on RedirectToObject.
        // 2a. If it does, call the method with the args and return the
        // result.
        // 2b. If it does not, throw an exception to fail the unit test.

    }
}); 
```

当然，如果你想经常使用这种方法，Answer 不需要匿名。

从[文档](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#mock%28java.lang.Class,%20org.mockito.stubbing.Answer%29)中：“这是一个非常高级的功能，通常你不需要它来编写像样的测试。但是在使用遗留系统时它会很有帮助。” 听起来像你。

# c# - 使用 REST API 列出 Dropbox 文件

> ID：10839265
> 
> 赞同：5
> 
> 时间：2012-05-31T18:34:54.700
> 
> 标签：c#, api, rest, oauth, dropbox

我想在我的网站上列出我自己的 Dropbox 帐户中一个文件夹的所有文件。我打算使用 C# 和 Dropbox Rest API，但从阅读文档看来，如果不先让用户去 Dropbox 接收授权令牌，我就无法做到这一点。

这个对吗？无论如何我可以在不要求用户登录的情况下返回代码中的数据吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T18:54:24.527

其实没有。

您需要先使用 OAuth 进行身份验证，然后获取文件列表。文档在[这里](https://www.dropbox.com/developers/reference/api)

也作为这里的教程：

[https://github.com/geersch/DropboxRESTApi](https://github.com/geersch/DropboxRESTApi)

# download - Liferay下载文件结构

> ID：10839268
> 
> 赞同：0
> 
> 时间：2012-05-31T18:35:17.163
> 
> 标签：download, liferay, structure

在模板中，我想插入链接以使用文档和媒体字段下载文档，我这样做：

```
#set ($gid = $getterUtil.getLong($doc.getData().split("/").get(2)))
#set ($fid = $getterUtil.getLong($doc.getData().split("/").get(3)))
#set ($fileTitle = $doc.getData().split("/").get(4))
#set ($dlService = $serviceLocator.findService("com.liferay.portlet.documentlibrary.service.DLFileEntryLocalService"))
#set ($fileEntry = $dlService.getFileEntry($gid, $fid, $fileTitle))

#set($fileTitle = $httpUtil.encodeURL($htmlUtil.unescape($fileEntry.getTitle())))
##Title and download link

<a href='/documents/$gid/$fid/$fileTitle'>$fileEntry.getTitle() </a><br /> 
```

该代码正在运行，但如果我在标题中插入一个带有空格的文件，它会崩溃。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:33:04.720

我这样做

```
$httpUtil.decodeURL($htmlUtil.unescape($doc.getData())) 
```

Tnx萨布丽娜

# c# - 用于智能组件的 C# 健壮架构

> ID：10839269
> 
> 赞同：0
> 
> 时间：2012-05-31T18:35:19.673
> 
> 标签：c#, architecture

我正在创建一个可以通信的“智能”组件库。可以使用主控制器进程，它可以创建进程或启动包含通信器的服务。创建的实体由 master 分配一个端口号，然后可以使用 http 向它发送 XML 消息。我的问题是这样的：假设主对象崩溃并重新启动。我可以遍历服务和进程并匹配名称，但是如何恢复分配给子进程/服务的端口号？

我考虑将一对列表 - 进程 ID 和端口号 - 写入一个可以在启动时重新加载的隐藏文件，但因为进程 ID 不一定是唯一的（仅在进程本身的持续时间内），这似乎并不可靠。我可以从*进程*中检索端口号，因为我可以只查询用于创建它的参数数组，但这不适用于*service*。关于可以将每个孩子的端口号隐藏在哪里以便我可以恢复它的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:59:31.223

我想您正在使用 WCF，在这种情况下，根据您的网络，[WCF 发现](http://msdn.microsoft.com/en-us/library/dd456791.aspx)可能是一种选择。

> Discovery API 为使用 WS-Discovery 协议的 Web 服务的动态发布和发现提供了统一的编程模型。这些 API 允许服务发布自己，并允许客户端查找已发布的服务。一旦服务变得可发现，该服务就能够发送通知消息以及侦听和响应发现请求。可发现服务可以发送 Hello 消息来宣布它们到达网络，并发送 Bye 消息来宣布它们离开网络。要查找服务，客户端会发送包含特定条件（例如服务合同类型、关键字和网络范围）的探测请求。服务接收探测请求并确定它们是否符合条件。如果服务匹配，

更具体地说，在我看来，您正在尝试重新实现[WCF Discovery Proxy](http://msdn.microsoft.com/en-us/library/dd456796.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:41:04.447

服务可以使用参数，并且您可以查询正在运行的进程以获取用于启动进程的参数（使用 WMI）。

# javascript - JavaScript 中 getElementById 方法返回 null

> ID：10839271
> 
> 赞同：0
> 
> 时间：2012-05-31T18:35:22.967
> 
> 标签：javascript

JavaScript 中 getElementById 方法返回 null

```
<html>
<head>

<title>test_elementObject</title>

<script language="JavaScript" type="text/javascript">
<!--
        var input1 = document.getElementById ( "input1" );
        input1.value = "sample text"
//-->
</script>

</head>

<body>

<input id = "input1" type = "text" value = "" />

</body>
</html> 
```

我是 JavaScript 新手，为什么脚本会导致错误：“input1 为空”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:36:39.317

发生这种情况是因为此代码是在加载正文内容之前执行的。试试这个代码：

```
<script language="JavaScript" type="text/javascript">
<!--
window.onload = function(){
    var input1 = document.getElementById ( "input1" );
    input1.value = "sample text"
}
//-->
</script> 
```

此命令使代码仅在加载所有页面内容时执行并记住这一点`<!--`并且`//-->`已过时，因为所有最近的浏览器都具有 javascript 兼容性

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:36:40.317

将脚本元素移动到输入元素下方。JavaScript 是一种*事件驱动*语言，自上而下解析/执行。

```
<title>test_elementObject</title>

</head>
<body>
    <input id = "input1" type = "text" value = "" />
</body>
<script language="JavaScript" type="text/javascript">
<!--
    var input1 = document.getElementById ( "input1" );
    input1.value = "sample text"
//-->
</script>
</html> 
```

* * *

或者，您可以正确使用事件：

```
window.addEventListener('load', function(e){
    var input1 = document.getElementById ( "input1" );
    input1.value = "sample text"
}, false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T18:40:36.087

这是因为当您选择输入字段时 DOM 尚未准备好。您可以在标记之后移动脚本。

```
<html>
<head>    
<title>test_elementObject</title>               
</head>

<body>

<input id = "input1" type = "text" value = "" />
 <script language="JavaScript" type="text/javascript">   
        var input1 = document.getElementById ( "input1" );
        input1.value = "sample text"   
</script>
</body> 
```

或连接到 window.onload 函数，这将确保文档已被解析并且 DOM 已准备好。 

```
window.onload = function(){
    var input1 = document.getElementById ( "input1" );
    input1.value = "sample text"
} 
```

PS you don't need the comments `<!--` in the script tags anymore, unless your users are using the mosaic browser or older IE browsers 1 and 2, this technique is outdated.

# android - 安卓内存问题

> ID：10839277
> 
> 赞同：0
> 
> 时间：2012-05-31T18:35:48.520
> 
> 标签：android, memory

在后台保存图像然后传输到充满图片的 gridview 时出现内存问题。

那么我的应用程序是如何工作的：

活动一“显示一堆图像”（此处启用了无痛加载）活动二“将图像保存在sd卡中”

我遇到的问题在于活动二，因为它涉及活动一。当项目保存在显示缺少图像的背景中时。

我试过的：

在转移到活动一之前，我曾尝试调用 System.gc()。

我试图创建一个方法并将变量更改为 null。（强制垃圾收集）

我的尝试没有成功。因此，如果有人可以让我更好地了解我的优化选项，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:33:07.153

我昨天找到了问题的原因。问题是我在 AsyncTask 类中添加了项目，甚至在完成该类之后转移下一个活动。异步类以某种方式保存了它的项目，因为我正在使用包含我的异步类中的上下文的 ProgressDialog 并且根据此[评论](https://stackoverflow.com/questions/2726494/what-happens-on-activity-finish-with-asynctask-still-running-in-background)。

“它将保留对 Activity 的引用，防止 Activity 被垃圾收集......除非它是一个静态内部类或完全独立的类，它没有引用 Activity 或任何指向 Activity 的东西”

由**CommonsWare**评论。

# objective-c - AVAudioplayer 检索 NSURL 的 nil 参数

> ID：10839278
> 
> 赞同：1
> 
> 时间：2012-05-31T18:35:50.957
> 
> 标签：objective-c, ios, avaudioplayer, nsurl

您好，我正在使用以下代码片段。

```
NSString *path = [[NSBundle mainBundle]pathForResource:@"mtgcko" ofType:@"caf"];
    [audioPlayer initWithContentsOfURL:[NSURL fileURLWithPath:path] error:NULL];
    audioPlayer.delegate = self;
    [audioPlayer play]; 
```

它应该可以工作，但在我的设备和模拟器上我收到以下错误：

`Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter'` 但是我在 NSURL 中调用的文件存在于 MainBundle 中。

不知道问题出在哪里。我在网上的一些文章中读到问题可能出在编解码器中？但这似乎不是，因为我可以播放所有其他格式，包括 aiif、mp3、wav ......

# javascript - 您如何在输入文本字段中使一些文本变为粗体？

> ID：10839279
> 
> 赞同：16
> 
> 时间：2012-05-31T18:35:52.017
> 
> 标签：javascript, html, text, input, bold

我正在尝试在输入文本字段中获取粗体的特定文本。我不知道该怎么做，因为 html 代码不会在文本字段内解释，所以任何类似的东西`<b>`都行不通。是否可以只加粗一些文本？像 bold() 这样的方法只`<b>`在字符串周围添加。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:04:17.530

这是一个技巧。

INPUT 字段位于 SPAN 上。使用一个将前 3 个字符以粗体显示的函数示例。使用旧版浏览器可能会遇到透明度问题。在这种情况下，您可以保留普通输入字段而没有粗体效果。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>transp</title>
    <style>
        div{
            position:relative;
        }
        input, span{
            top:0;
            position:absolute;
            width:120px;
        }
        span{
            top:2px;
            left:2px;
            z-index:1;
            overflow:hidden;
        }
        input{
            background:transparent;
            z-index:2;
        }
    </style>
</head>
<body>
<div>
    <input onkeyup="bold3(this)" />
    <span id="back"></span>
</div>
<script>
function bold3(inp){
    inp.style.color = 'transparent';
    var span = document.getElementById('back');
    span.innerHTML = 
        '<b>' + 
        inp.value.substr(0, 3) + 
        '</b>' + 
        inp.value.substr(3);
}
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T18:52:38.657

这取决于您要支持的浏览器。如果您只想支持 HTML5 浏览器，只需放入一个设置了 contenteditable 标志的 div 并使用 css 对其进行样式设置，使其看起来像一个输入。

```
<div contenteditable>Text <b>bold</b></div> 
```

如果粗体位于非常受控的区域，则可能执行以下操作：

```
<div>
    <input type="text" style="font-weight: bold;" value="Bold text" />
    <input type="text" value="This is not" />
</div> 
```

使用 CSS 设置样式，使用 JS 管理开销。不过，这很快就会变得丑陋。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T18:45:48.070

也许一个可能的解决方案是让您使用可编辑的 div，如下所示：

```
<div contentEditable="true">
    Lorem <b>ipsum</b> dolor
</div> 
```

如果您尝试在表单中提交此值，则必须使用 JavaScript 获取此 div 的 innerHTML 并将其分配给隐藏的输入或其他内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T14:46:30.697

我们需要像android视图这样的东西，它允许自定义html标记、链接识别等，本机......这就是问题所在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-15T19:41:48.923

拥有这样的东西最真实的方法是构建自己的**自定义元素**。

您可以创建自己的`<my-input></my-input>`元素，并自定义自己的输入。

# android - 如何从 wowza 服务器播放 rtsp 视频？

> ID：10839282
> 
> 赞同：4
> 
> 时间：2012-05-31T18:35:57.850
> 
> 标签：android, android-videoview, android-mediaplayer, android-video-player, wowza

我有一个来自 Wowza Media Server 2 Perpetual 2.2.4.07 的 rtsp url
我如何在应用程序中播放它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:41:13.423

这就是您使用数据源启动媒体播放器的方式。请记住，android 仅支持[此处](http://developer.android.com/guide/appendix/media-formats.html)列出的某些音频/视频编解码器。

```
MediaPlayer m = new MediaPlayer(); 
m.setDataSource("rtsp://rtsp.yourserver.com/stream.mp3"); 
m.prepare(); 
m.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:43:07.883

或者，您可以使用[VideoView](http://developer.android.com/reference/android/widget/VideoView.html)

```
videoView.setVideoURI(Uri.parse("rtsp://server/track.mpg")); 
```

# java - 在应用程序中存储数据

> ID：10839287
> 
> 赞同：0
> 
> 时间：2012-05-31T18:36:27.663
> 
> 标签：java, database, persistence, jlist

我有一个将信息存储在`JList`. 但是，当然，当应用程序关闭时，所有信息都会从内存中删除。

我正在尝试构建应用程序，以便在重新启动时包含相同的数据。那么有没有办法将这些数据存储在数据库或类似的数据库中，如果有的话？我在哪里以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:53:44.123

坚持恕我直言，最简单的方法是在文件中。

[`Properties`](http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html)如果您需要键值映射，请尝试使用。
或者，如果您要绑定更复杂的对象，我推荐使用[Simple](http://simple.sourceforge.net/) XML 序列化包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:41:25.503

您需要使用`JDBC`. JDBC 代表 Java 数据库连接。从名称可以看出，它允许您连接到数据库。因此，您可以将您的应用程序链接到数据库，并持久存储您的数据。这是一个开始的[链接。](http://www.jdbc-tutorial.com/)这里[有一些](http://docs.oracle.com/javase/tutorial/jdbc/overview/index.html)供进一步阅读的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:43:01.810

如果数据不复杂且不大（多个对象的多个实例），您可以使用序列化将列表保存到文件中。[这](http://www.java-samples.com/showtutorial.php?tutorialid=398)会让你开始。如果您的列表很大或很复杂，您可能会考虑使用数据库。在您最喜欢的搜索引擎中搜索 JDBC 将帮助您入门。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T19:38:38.370

我想你想要一个普通的平面文件。这很简单; 您可以立即拥有一个。（学习曲线比数据库少得多。）而且速度很快；您甚至可以在登录数据库之前读取 1 GB 的文件。Java 序列化有点棘手，但它可以是一种非常强大的方式来保存大量复杂数据。（请参阅[此处](https://stackoverflow.com/a/10743767/796401)了解需要注意的事项，以及更多有用的链接。）例如，如果您想在会话之间保存大型、复杂的游戏，那么将其序列化是可行的方法。无需将面向对象结构转换为关系结构。

**使用数据库：** 如果您想*将*数据添加到大文件中，或者从大文件中只读取*部分*数据。或者，如果其他进程要读取和修改它。

**考虑一个数据库：** 如果您已经将一个数据库用于其他目的。如果用户可能在另一台机器上启动并且无法从上次会话中找到文件并且数据不是太广泛。或者，如果数据本质上是相关的，并且其他人可能有兴趣查看它。

因此，如果您有一个简单的情况，即用户总是从同一个目录开始，只需写入和读取一个简单的文件。如果您有大量复杂、广泛的 OO 数据，即使*不*容易做到，也要使用平面文件——您需要速度。否则，考虑一个数据库。

# servlets - Servlet URL 映射错误

> ID：10839296
> 
> 赞同：0
> 
> 时间：2012-05-31T18:36:40.740
> 
> 标签：servlets

我无法弄清楚为什么我的 servlet 没有正确映射。

这是 web.xml 的一部分：

```
<servlet>
  <servlet-name>InsertServlet</servlet-name>
  <servlet-class>servlets.InsertServlet</servlet-class> 
</servlet> 

<servlet-mapping>
   <servlet-name>InsertServlet</servlet-name>
   <url-pattern>/insert</url-pattern> 
</servlet-mapping> 
```

这将生成：localhost:8080/GestiuneSimpozioane/jsp/insert（因为我发送数据的表单位于 jsp 文件夹中）相反，我需要：localhost:8080/GestiuneSimpozioane/insert

我该如何修改映射？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:44:30.427

你是什​​么意思，“这就是它会产生的”？

在表单中使用绝对路径，而不是相对路径。您也应该使用 JSTL 的`<c:url>`标签来自动包含上下文等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:49:57.580

您的问题不在 servlet 映射中。您的问题是您如何在 HTML 表单中指定 servlet URL。鉴于您使用过的症状

```
<form action="insert"> 
```

HTML 中的相对 URL（即不以 scheme 或 a 开头`/`的 URL）将相对于请求的 HTML 页面的 URL（如浏览器地址栏中显示的那样）进行解析。在您的情况下，这显然在`/jsp`子文件夹中。然后，浏览器当然会解释`/jsp`文件夹中的 URL。

您需要指定一个域相对 URL。

```
<form action="${pageContext.request.contextPath}/insert"> 
```

将`${pageContext.request.contextPath}`动态打印上下文路径，因此在您的情况下，HTML 将按如下方式生成：

```
<form action="/GestiuneSimpozioane/insert"> 
```

您也可以使用`<base>`标签实现此目的。另请参阅[此相关答案](https://stackoverflow.com/questions/3655316/browser-cant-access-css-and-images-when-calling-a-servlet-which-forwards-to-a-j/3658735#3658735)。

如果您出于某种原因*确实*需要 servlet 来监听`/jsp/insert`，那么只需`<url-pattern>`相应地更改即可。不要忘记在 HTML 中也考虑到这`<form>`一点。

# json - JsonMappingException：无法从 JSON 字符串实例化类型 [简单类型，abcCompany] 的值；没有单字符串构造函数/工厂方法

> ID：10839297
> 
> 赞同：12
> 
> 时间：2012-05-31T18:36:41.657
> 
> 标签：json, spring, rest, jackson

我刚刚向我现有的 Spring + BlazeDS + Hibernate 服务器添加了一个 REST api，当数据被检索并序列化为 JSON 时，一切似乎都正常工作，但是当我尝试将数据反序列化为 POJO 时，我得到了一个异常。

我的印象是，类路径中的 spring 注释和 Jackson jar 的存在将是所需要的，至少对于我的 list、get、delete 具有简单参数的方法来说是这样。

```
org.codehaus.jackson.map.JsonMappingException: Can not instantiate value of type [simple type, class com.twoh.dto.Company] from JSON String; no single-String constructor/factory method 
```

这是被调用的方法：

```
public abstract class BaseEntityService<T extends BaseEntity> implements IBaseEntityService<T> {

private IBaseEntityDAO<T> DAO;

@Autowired
private ValidationResultHelper validationResultHelper;

public void setDAO(IBaseEntityDAO<T> DAO) {
    this.DAO = DAO;
}

...
@Secured("ROLE_USER")
@RequestMapping(value="/create", method=RequestMethod.POST)
public @ResponseBody ValidationResult create(@RequestBody T entity) {
    ValidationResult result = null;
    try {
        result = DAO.persistEntity(entity);
    } catch(JDBCException e) {
        result = ExceptionHelper.getValidationResult(e);
    } catch(DataIntegrityViolationException e) {
        result = ExceptionHelper.getValidationResult(e);
    }
    validationResultHelper.log(DAO.getSession(), entity.getId(), entity.getClass(), result);
    return result;
}
} 
```

这是完整的例外：

```
org.codehaus.jackson.map.JsonMappingException: Can not instantiate value of type [simple type, class com.twoh.dto.Company] from JSON String; no single-String constructor/factory method
at org.codehaus.jackson.map.deser.std.StdValueInstantiator._createFromStringFallbacks(StdValueInstantiator.java:379)
at org.codehaus.jackson.map.deser.std.StdValueInstantiator.createFromString(StdValueInstantiator.java:268)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserializeFromString(BeanDeserializer.java:759)
at org.codehaus.jackson.map.deser.BeanDeserializer.deserialize(BeanDeserializer.java:585)
at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2723)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1914)
at org.springframework.http.converter.json.MappingJacksonHttpMessageConverter.readInternal(MappingJacksonHttpMessageConverter.java:135)
at org.springframework.http.converter.AbstractHttpMessageConverter.read(AbstractHttpMessageConverter.java:154)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.readWithMessageConverters(HandlerMethodInvoker.java:633)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveRequestBody(HandlerMethodInvoker.java:597)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.resolveHandlerArguments(HandlerMethodInvoker.java:346)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:171)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:436)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:669)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:585)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
at java.lang.Thread.run(Unknown Source) 
```

**更新：添加了公司 DTO 的定义**

```
@CheckDictionaryProperty.List({
    @CheckDictionaryProperty(propertyName="partyId", dictionaryName="Party")
})
@Unique.List({
    @Unique(properties = {"code"}, message = "UNIQUE_CODE"),
    @Unique(properties = {"name"}, message = "UNIQUE_NAME")
})
@Entity
@FXClass
@Table(name="edrcompany")
@JsonAutoDetect
public class Company extends BaseEntity {

    private static final long serialVersionUID = 1L;

    public Company(){}

    @NotBlank
    @Column
    private String name;
    public String getName(){ return this.name; }
    public void setName(String name){ this.name = name; }

    @Column
    private String code;
    public String getCode() { return this.code; }
    public void setCode(String code) { this.code = code; }

    @NotNull
    @Column(name="party_id")
    private Integer partyId;
    public Integer getPartyId() { return this.partyId; }
    public void setPartyId(Integer partyId) { this.partyId = ValueHelper.isNullOrZero(partyId) ? null : partyId; }

    @ElementCollection(targetClass=Integer.class, fetch=FetchType.EAGER)
    @Fetch(FetchMode.SUBSELECT)
    @CollectionTable(name="edrcompanyadminlink", joinColumns={@JoinColumn(name="company_id")})
    @Column(name="user_id")
    private Collection<Integer> adminUserIdList = new HashSet<Integer>();
    public Collection<Integer> getAdminUserIdList() { return this.adminUserIdList; }
    public void setAdminUserIdList (Collection<Integer> adminUserIdList) { this.adminUserIdList = adminUserIdList; }    

}

@MappedSuperclass
@FXClass
public abstract class BaseEntity implements Serializable  {

    private static final long serialVersionUID = 1L;

    public BaseEntity(){}

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "id")
    private Integer id;
    public Integer getId() { return id; }
    public void setId(Integer id) { this.id = ValueHelper.isNullOrZero(id) ? null : id; }

    @Column(name="ENTITY_UID", unique=true, nullable=false, updatable=false, length=36)
    /* Assign a default whenever this class is instantiated Hibernate will 
     * overwrite it when retrieving an entity from the DB.
     */
    private String uid = UUID.randomUUID().toString();
    public String getUID() { return uid; };
    public void setUID(String uid) { this.uid = uid; }

    @Version
    @Column
    private Integer version;
    @FXIgnore
    public Integer getVersion() { return this.version; }
    public void setVersion(Integer version) { this.version = version; }

    // Fake property so that DTO2FX will put it in
    public String getClassName() { return this.getClass().getName(); }
    @JsonIgnore
    public void setClassName(String className) { throw new UnsupportedOperationException(); }

    @Override
    public boolean equals(Object o) {
        if (this == o) return true;

        if (o == null || !(o instanceof BaseEntity)) return false;

        BaseEntity other = (BaseEntity) o;

        // if the id is missing, return false
        if (uid == null) return false;

        // equivalence by uid
        return uid.equals(other.getUID());
    }

    @Override
    public int hashCode() {
        if (uid != null) {
            return uid.hashCode();
        } else {
            return super.hashCode();
        }
    }

    @Override
    public String toString() {
        return this.getClassName() + ": " + this.getId();
    }

} 
```

**更新** 如果我修改 DTO 使 Jackson 忽略 Company.adminUserIdList 属性，则成功创建记录。

```
@JsonIgnore
public Collection<Integer> getAdminUserIdList() { return this.adminUserIdList; }
@JsonIgnore
public void setAdminUserIdList (Collection<Integer> adminUserIdList) { this.adminUserIdList = adminUserIdList; } 
```

**更新**`/company/get/1`这是使用 FireFox RESTClient 的方法返回的 Json

```
{
  "partyId":1,
  "adminUserIdList":[21],
  "name":"2H Mechanical LLC",
  "code":null,
  "uid":"fc5e15e7-a9a7-11e1-be90-7d08b05cbb96",
  "id":1,
  "className":"com.twoh.dto.Company",
  "version":0
} 
```

`/compamy/create`我对带有`Content-type=application/json`标题的调用使用了类似的模式（少了“id”和不同的“uid”）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T10:25:18.720

我通过修复发送到服务器的 JSON 解决了​​同样的问题；这是无效的。我删除了最后一个属性末尾的“，”字符并且它起作用了。我希望它有帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-12T21:37:12.813

与@Nirmal 类似，我传入了包含在双引号中的 JSON：

`"{ "SomeJSON":"Value" }"`

代替

`{ "SomeJSON":"Value" }`

删除`"`s 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-27T04:20:48.680

就我而言，我缺少开始和结束花括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-16T22:43:15.163

此外，当我尝试实例化在我的 swagger 文件中未正确定义的枚举时，我收到了此错误消息。请参阅[如何在 swagger.io 中定义枚举？](https://stackoverflow.com/questions/27603871/how-to-define-enum-in-swagger-io)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-05T15:12:00.373

就我而言，问题是键后的空格。

```
{
    "key " : "001" , //There is a space after the key
    "name" : "ABC"
} 
```

键正常工作后删除了空格。

# html - 让两个 div 向右浮动并重叠？

> ID：10839298
> 
> 赞同：1
> 
> 时间：2012-05-31T18:36:46.243
> 
> 标签：html, dom, css

有人可以告诉我如何让这两个 div 重叠而不是并排

# hc_menu & #hc_show_hide

[jsfiddle](http://jsfiddle.net/YnEaA/) ，这是代码：css：

```
 .chart_scroll{  height: 100%;}
    #hc_hover{height:100%;width: 25%; float: right;}
    #hc_menu{height:400px ;background-color: Black;opacity:0.4;margin:50px 0px 50px 20px;width:125px ; float:right;}
    #hc_show_hide{height:500px ; width: 15% ;float:right ; background:red;} 
```

html：

```
 <div class="chart_scroll" runat="server" id="pnlCharts">
              <div id="hc_hover" >
              <div id="hc_show_hide"></div>
                <div id="hc_menu">

                </div>
              </div>
           </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:42:07.520

如果你的意思是重叠，那么你需要设置`position:absolute`和调整你的`z-index`，以确定哪一个在上面。

您的代码有一些更改，所以这里是更新的 CSS 和[一个新的小提琴](http://jsfiddle.net/YnEaA/5/)：

```
 .chart_scroll{  height: 100%;} 
#hc_hover{height:100%;width: 25%; float: right; position:relative; /* Keeps the children inside of its boundry */}
        #hc_menu{height:400px ;background-color: Black;opacity:0.4;margin:50px 0px 50px 20px;width:125px ; float:right; position:absolute;  right:0; /* lets it occupy the same space, aligned to the right */  z-index:50 /* puts this one on top */ }
        #hc_show_hide{height:500px ; width: 15% ;float:right ; background:red;  position:absolute; right:0; /* lets it occupy the same space, aligned to the right */ } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:43:23.957

您可以通过使用使它们重叠`position: absolute;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:51:03.377

```
.chart_scroll{ width: 100%;}
#hc_menu, #hc_show_hide{width: 100px; height: 100px; float: right;  }
#hc_menu{background: blue; z-index: 1; position: relative; left: 10px; top: 10px;}
#hc_show_hide{background:red;}

<div class="chart_scroll" runat="server" id="pnlCharts">
    <div id="hc_hover" >
            <div id="hc_show_hide"></div>
            <div id="hc_menu"></div>
    </div>
</div> 
```

使用上面的代码，蓝色将始终被红色划分为朋友区。大声笑@mattytomo

# python - virtualenv 中奇怪的 PIL 行为 - Python

> ID：10839302
> 
> 赞同：1
> 
> 时间：2012-05-31T18:36:58.287
> 
> 标签：python, python-imaging-library, virtualenv

我有一个需要 PIL 的 django 应用程序，但我遇到了错误，所以我决定在我的托管服务器上使用 PIL。

PIL 安装在我的虚拟环境中。但是，在运行以下命令时出现错误，当我在虚拟环境之外运行它时，它可以工作。

```
Python 2.7.3 (default, Apr 16 2012, 15:47:14) 
[GCC 4.4.6 20110731 (Red Hat 4.4.6-3)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import Image
>>> im  = Image.open('test.png')
>>> im
<PngImagePlugin.PngImageFile image mode=RGBA size=28x22 at 0x7F477CFFAE18>
>>> im.convert('RGB')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/opt/python27/lib/python2.7/site-packages/PIL-1.1.7-py2.7-linux-x86_64.egg/Image.py", line 679, in convert
    self.load()
  File "/opt/python27/lib/python2.7/site-packages/PIL-1.1.7-py2.7-linux-x86_64.egg/ImageFile.py", line 189, in load
    d = Image._getdecoder(self.mode, d, a, self.decoderconfig)
  File "/opt/python27/lib/python2.7/site-packages/PIL-1.1.7-py2.7-linux-x86_64.egg/Image.py", line 385, in _getdecoder
    raise IOError("decoder %s not available" % decoder_name)
IOError: decoder zip not available
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:19:33.880

您在 virtualenv 中使用的 Python 很可能是您自己构建的，而不是系统 Python - 对吗？如果是这样，您的问题是在构建 Python 本身时，您的系统中没有安装 zlib 的头文件 (.h)。

在构建您将在 virtualenv 上使用的 Python 时，您必须在 Linux 中拥有“ziplib-devel”（或等效）包。您可以通过尝试`import zlib`从 Python 控制台测试它是否有效。

作为重建 Python 的替代方法，您可以找到系统的 Python zip 相关文件并将它们复制到 virtualenv 中使用的 Python（如果它们是相同的 Python 版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:50:04.160

你可以试试[Pillow](http://pypi.python.org/pypi/Pillow)，它是一个重新打包的 PIL，它与 virtualenv 配合得更好。

# java - JKS 密钥库格式规范

> ID：10839303
> 
> 赞同：10
> 
> 时间：2012-05-31T18:36:59.583
> 
> 标签：java, file-format, keystore, jks

我想知道是否存在 Java 中使用的[JKS](http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html#KeystoreImplementation)密钥库格式的官方规范？我想写一个从/到 PKCS#12 的转换器，但不是在 Java 中，所以不幸的是，keytool 或 Java 代码不是一个选项。

在十六进制编辑器中查看一个告诉我它可能不是 ASN.1。在我开始深入研究 OpenJDK 并尝试对格式进行逆向工程之前，有人知道是否存在规范吗？到目前为止我找不到任何东西，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-01T06:19:34.207

[我认为您应该从 JDK源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/security/provider/JavaKeyStore.java#JavaKeyStore)开始您的研究。那里有一些非常有用的评论。例如

```
/*
         * KEYSTORE FORMAT:
         *
         * Magic number (big-endian integer),
         * Version of this file format (big-endian integer),
         *
         * Count (big-endian integer),
         * followed by "count" instances of either:
         *
         *     {
         *      tag=1 (big-endian integer),
         *      alias (UTF string)
         *      timestamp
         *      encrypted private-key info according to PKCS #8
         *          (integer length followed by encoding)
         *      cert chain (integer count, then certs; for each cert,
         *          integer length followed by encoding)
         *     }
         *
         * or:
         *
         *     {
         *      tag=2 (big-endian integer)
         *      alias (UTF string)
         *      timestamp
         *      cert (integer length followed by encoding)
         *     }
         *
         * ended by a keyed SHA1 hash (bytes only) of
         *     { password + whitener + preceding body }
         */ 
```

# extjs3 - 如何避免 ExtJS 网格中重复的选择模型规范？

> ID：10839305
> 
> 赞同：0
> 
> 时间：2012-05-31T18:37:09.550
> 
> 标签：extjs3

我们最近从 ExtJS 3.2 切换到 3.4，发现带有复选框选择模型的网格停止工作。事实证明，这样的配置不再被允许：

```
var gridConfig = {
  xtype: 'grid',            
  store: myStore,
  columns:[ 
    new Ext.grid.CheckboxSelectionModel(), 
  {
    id: 'Name', 
    header: 'Inland Carrier',
    dataIndex: 'Name'
  }],
  sm: new Ext.grid.CheckboxSelectionModel({
    checkOnly: true
  })
}; 
```

相反，选择模型对象必须创建一次，然后传递给`column`集合和`sm`属性。

现在的问题是我们有一个非常长的配置对象，其中包含大量网格。以前的选择模型是根据上面的示例在本地指定的。但是现在我们必须为每个选择模型对象分配一个变量，为它创造一个唯一的名字，并且让这些变量远离它们被使用的地方。这是非常不方便的。

是否有可能以某种方式在一个地方指定选择模型？或者也许在一个属性初始化器中创建它并在第二个位置引用这个对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T23:14:17.547

您可以在网格初始化后将 sm 添加到 cm。

IE：

```
var gridConfig = {
  xtype: 'grid',            
  store: myStore,
  columns:[{
    id: 'Name', 
    header: 'Inland Carrier',
    dataIndex: 'Name'
  }],
  sm: new Ext.grid.CheckboxSelectionModel({
    checkOnly: true
  })
};
var grid = new Ext.grid.GridPanel( gridConfig );
grid.getColumnModel().config.unshift( grid.getSelectionModel() ); 
```

# php - Zend 框架基本路径

> ID：10839306
> 
> 赞同：0
> 
> 时间：2012-05-31T18:37:13.057
> 
> 标签：php, zend-framework, url-routing, base-path

嗨，我在远程服务器上安装了一个 Web 应用程序，我想修改这个 Web 应用程序，所以我从服务器下载了所有文件

.zfproject 库文件夹 应用程序文件夹 public_html 文件夹

我在本地 xampp\htdocs 文件夹中创建了一个名为 newZend 的文件夹

当我尝试访问网站“http://localhost/newZend/public”时

它给了我一个应用程序错误，说在路径中找不到脚本'login/index.phtml' (C:/xampp/htdocs/newZend/application/modules/user/views\scripts/)

我相信 url 路由器或基本路径可能有问题..请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T03:24:33.787

标准 Zend Framework .htaccess 规则和路由将采用您提供的 url

> 当我尝试访问网站“http://localhost/newZend/public”时

并呼吁“公共”控制器的“索引”动作。

我的 Zend 应用程序都不允许直接访问公共目录。试试这个网址：

> http://localhost/newZend

这将调用索引控制器的索引操作。

# python - Shogun Toolbox 在 Snow Leopard 上安装失败 - liblapack 问题？

> ID：10839309
> 
> 赞同：1
> 
> 时间：2012-05-31T18:37:18.667
> 
> 标签：python, shogun

我正在尝试在雪豹上安装 Shogun Toolbox。通过 MacPorts 我收到以下一组错误：

```
info:build Undefined symbols for architecture x86_64:
:info:build   "_drot_", referenced from:
:info:build       _dbdsqr_ in liblapack.a(dbdsqr.o)
:info:build   "_dswap_", referenced from:
:info:build       _dbdsqr_ in liblapack.a(dbdsqr.o)
:info:build       _dsteqr_ in liblapack.a(dsteqr.o)
:info:build      (maybe you meant: _ATL_dswap_xp0yp0aXbX)
:info:build   "__gfortran_concat_string", referenced from:
:info:build       _dgesvd_ in liblapack.a(dgesvd.o)
:info:build       _dormbr_ in liblapack.a(dormbr.o)
:info:build       _dormqr_ in liblapack.a(dormqr.o)
:info:build       _dormlq_ in liblapack.a(dormlq.o)
:info:build   "_dgemm_", referenced from: 
```

还有更多，但它们之间的共同点是对`liblapack.a`. 我不知道为什么这会失败。我安装了 LAPACK，希望它会消失，但这并没有发生。

此外，尽管已安装`pkg-config`，但当我从源代码配置 Shogun 时，它会挂断，告诉我我没有`pkg-config`安装。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T01:38:06.933

答案与lapack完全无关。解决方案是不使用 MacPorts，从 Shogun 网站下载的源代码构建，然后编辑`PYTHONPATH`以包含 shogun 安装目录。 *掌心*

# html - Chrome 上的 HTML5 游戏手柄 API

> ID：10839310
> 
> 赞同：9
> 
> 时间：2012-05-31T18:37:20.580
> 
> 标签：html, google-chrome, gamepad-api

我正在使用 Chrome（版本 19.0.1084.46）。我在 chrome://flags 中启用了 Gamepad API。我插入了一些游戏手柄，但`navigator.webkitGamepads`始终是一个长度为 4 的数组，只包含未定义的数组。

```
navigator.webkitGamepads
GamepadList
  0: undefined
  1: undefined
  2: undefined
  3: undefined
  length: 4
  __proto__: GamepadList 
```

我需要做什么才能使用游戏手柄进行测试？如果这很重要，我在 Ubuntu Linux 上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T21:36:00.420

我也遇到了这个问题（在带有 Chrome 21.0.1163.0 dev 的 Ubuntu 10.04 上）。[我从chromium-discussions 的一个线程中](https://groups.google.com/a/chromium.org/group/chromium-discuss/browse_thread/thread/b9de63c1b68951ce)遇到了这个问题：

> 请注意，您需要先按下游戏手柄上的面部按钮，然后才能使用数据。这是由于指纹问题。

我写了一个[快速测试页面](https://gist.github.com/2891688)，如果在刷新页面时按住控制器按钮，它似乎可以工作。我正在使用带有 xboxdrv 驱动程序的 Gamestop 品牌 Xbox 360 有线控制器。

另外，需要注意的另一件重要事情 - Chrome 将这些 Gamepad 对象视为控制器状态的快照。因此，如果您传递实际的 Gamepad 对象，您将永远不会获得更新的信息。Chrome 似乎只在您调用`navigator.webkitGamepads[x]`getter 时轮询控制器（请参阅我的测试页面中的第 23 行）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-27T04:29:58.107

**特别注意： Firefox 和 Google Chrome 以两种****完全**不同的方式处理 GamePad API 。因此，您需要包含代码来测试浏览器的身份，并相应地处理这些案例。

当调用 navigator.getGamePads() 方法时，会返回一个对象数组，这些对象包含有关游戏手柄/操纵杆的身份以及轴/按钮状态的信息。

这就是问题所在：在 Firefox 上，该方法将数组传递给您的调用代码，然后您可以反复检查该数组，以在您自己的代码中查找轴/按钮状态的变化。Firefox 以预期的方式运行，并在可用时使用新的轴/按钮数据更新您收到的对象。

另一方面，谷歌浏览器对数组的处理方式*完全*不同。Chrome 将数组视为您的游戏手柄/操纵杆状态的*一次性快照*，如果您想获取新数据，您必须*再次*调用 navigator.getGamePads()，以获取新快照，丢弃旧的一。

因此，您需要这样的东西来使您的代码在两个浏览器上都工作（假设变量 'gp' 是您先前存储第一次调用 navigator.getGamePads() 的返回值的变量......）

```
var ua = navigator.userAgent;
if (ua.toLowerCase().indexOf("chrome") != -1)
    gp = navigator.getGamePads(); 
```

为什么这两个浏览器的行为如此不同，这是另一个线程的主题，但我怀疑这与 GamePad API 仍处于试验阶段的事实有很大关系，适用于其的标准的细节尚未最终确定。

就我而言，在 Windows 7 64 位（但 32 位版本，由于某种奇怪的原因，我的计算机制造商以这种方式安装它最为人所知）上运行 Chrome 时，navigator.getGamePads() 返回的数组当前包含只有与插入我的计算机的实际游戏手柄/操纵杆一样多的条目。如果您在 Linux 下的 Chrome 上遇到不同的情况，那么您还需要考虑这一点，通过测试查看数组中是否有任何空值。

另一个需要考虑的因素是，在选择游戏手柄/操纵杆时，现有标准要求引用 GamePad 对象的*index*属性，然后用于索引到数组中。本文档更详细地介绍了其原因：

[W3C 页面：GamePad 界面上的编辑草稿](https://w3c.github.io/gamepad/)

然而，虽然这个实现在我的谷歌浏览器的化身中记录在上面，你可能必须通过实验检查你的版本，看看它的行为是否与我的相同。如果没有，请相应地调整您的代码，直到标准最终确定，并且在所有现代浏览器及其所有操作系统化身中强制执行适当的符合标准。

因此，当您选择要使用的特定游戏手柄/操纵杆时，代码将如下所示（使用变量 'gid' 作为索引选择器）：

```
var gLen = this.gamePads.length;
done = false;
idx = 0;

while (!done)
{
    if (this.gamePads[idx] !== null)
    {
        if (gid == this.gamePads[idx].index)
        {
        //Here, choose this GamePad as the selected GamePad, based upon the index number as per the W3C recommendation ...

            selectedGamePadIndex = gid;
            selectedGamePad = this.gamePads[idx];
            done = true;

        //End if
        }

    //End if
    }

    //Update counter in case we haven't selected one of the available GamePads above ...

    idx++;

    if (idx >= gLen)
        done = true;    //Exit loop altogether if we've exhausted the list of available GamePads

//End while
} 
```

我实际上将上面的代码（以及最后的一些整理）实现为自定义对象的方法，但无论实现细节如何，原理都是一样的。（此时我要承认，我有编写自己的短库来处理此类任务的习惯！）

另一个需要注意的问题是游戏手柄 API 将游戏手柄/操纵杆的物理数据源映射到 GamePad 对象的轴/按钮元素以及其中包含的值的方式。我有一个 Microsoft Sidewinder Pro USB 游戏杆，我电脑上这个设备的映射非常奇怪，即：

*   轴 0/1：操纵杆手柄（如预期的那样）
*   轴 2/3：未分配
*   轴 4/5：4 个未分配，5 个分配给扭转握把
*   轴 6/7：6 个分配给圆形滑块，7 个未分配
*   轴 8/9：8 未分配，9 分配给帽子开关（呃，什么？？？）

是的，没错，模拟轴 9 分配给了帽子开关，并返回了严重的奇数值，即：

*   帽子开关居中：+1.2
*   帽子切换：-1.0
*   帽子切换：+0.1
*   帽子开关左：+0.7
*   帽子开关右：-0.42

当您尝试使用 GamePad API 时，您应该警惕此类怪癖。更糟糕的是，所谓的“标准”游戏手柄（在我上面链接到的那个文档中定义）可能在某些浏览器上报告为标准，但在其他浏览器上不报告，或者更糟糕的是，在 Windows 中的浏览器 X 上报告为标准，但不是Linux 中的同一个浏览器 X！当你试图通过这个相当于荆棘丛的软件时，这会引起很多令人毛骨悚然的挫败感，一路上被一些荆棘严重刮伤，但你至少可以对浏览器开发人员*正在*工作的事实感到安慰尝试改善这一点，但这需要时间，因为其他事情优先考虑（例如确保您的浏览器不会成为勒索软件劫持的容易目标，**如果发生这种情况，将**非常严重）。****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T03:31:24.153

这对我不起作用，但也许对你有帮助？[从这里](https://groups.google.com/a/chromium.org/forum/?fromgroups#!topic/chromium-html5/DdtTZXZ8oxQ)拉出来的。

```
function updateStatus() {
    window.webkitRequestAnimationFrame(updateStatus);

    var gamepads = navigator.webkitGamepads;

    var data = '';
    for (var padindex = 0; padindex < gamepads.length; ++padindex)
    {
        var pad = gamepads[padindex];
        if (!pad) continue;
        data += '<pre>' + pad.index + ": " + pad.id + "<br/>";
        for (var i = 0; i < pad.buttons.length; ++i)
            data += "button" + i + ": " + pad.buttons[i] + "<br/>";
        for (var i = 0; i < pad.axes.length; ++i)
            data += "axis" + i + ": " + pad.axes[i] + "<br/>";
    }
    document.body.innerHTML = data;
}

window.webkitRequestAnimationFrame(updateStatus); 
```

或者作为一个艰难的替代方案，有[Javascript 操纵杆插件](https://code.google.com/p/javascript-joystick/)（[这里是演示](http://www.gefs-online.com/)），但我认为这在 Linux 中不起作用。**

# iphone - iOS 流式传输相机源到另一台设备

> ID：10839313
> 
> 赞同：5
> 
> 时间：2012-05-31T18:37:31.937
> 
> 标签：iphone, ios, camera, streaming, wifi

有没有人尝试将一台 iOS 设备的摄像头馈送流式传输到另一台设备？例如，将 iPhone 摄像头馈送到 iPad 1。我想您可以继续拍照并通过蓝牙发送，但这可能会很糟糕。

理想的解决方案是通过 wifi 将视频和位置传输到一台设备，并能够将数据发回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-04T11:06:12.773

看看[这个项目](https://github.com/nicnocquee/iPad-iPhone-Photo-Booth--iPhone-as-Wireless-Cam-for-iPad-)，我希望这会有所帮助。

# ms-access-2007 - 进行邮件合并时出错 - MS Access 找不到文件 mdb

> ID：10839321
> 
> 赞同：1
> 
> 时间：2012-05-31T18:38:00.290
> 
> 标签：ms-access-2007

我有一个查询，我正在尝试进行邮件合并；查询运行良好，但是当我尝试在 Access 2007 中进行邮件合并时，我在弹出窗口中收到以下错误消息：

```
Pop-up title:  ODBC Microsoft Access Driver Login Failed
Error Message: Could not find file: 'D:\folder\myfile.mdb 
```

我不确定这个文件在哪里或者为什么会这样。

感谢大家！

盖伊

# google-app-engine - 事务中的分片计数器

> ID：10839327
> 
> 赞同：1
> 
> 时间：2012-05-31T18:39:11.963
> 
> 标签：google-app-engine, transactions, google-cloud-datastore, sharding

摘自[这篇](https://developers.google.com/appengine/articles/sharding_counters#implv2_python)关于分片计数器的文章，以下函数演示了如何在增加随机分片之前对其进行选择。这发生在事务中。

```
def increment():
    """Increment the value for a given sharded counter."""
    def txn():
        index = random.randint(0, NUM_SHARDS - 1)
        shard_name = "shard" + str(index)
        counter = SimpleCounterShard.get_by_key_name(shard_name)
        if counter is None:
            counter = SimpleCounterShard(key_name=shard_name)
        counter.count += 1
        counter.put()
    db.run_in_transaction(txn) 
```

一次只能发生一个事务，这不会阻止不同（随机）分片计数器同时更新吗？如果是这样，如果一次只能更新一个分片计数器，那么分片计数器的目的是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:13:36.660

事务锁定事务涉及的所有实体。只要它们不涉及相同的实体，您就可以进行多笔交易。

每个分片都是一个单独的实体。这允许您同时更新各个分片。

如果事务碰巧试图命中已经在事务中的分片（由于随机数生成器），那么事务将失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T19:16:17.453

不，这是独立的交易，不会相互阻塞，而且写入限制仅适用于每个实体。

基本原理：在您的情况下`SimpleCounterShard`，实体没有父级，这意味着每个实体都是其自己的实体组的根。事务的范围是实体组，并发写入限制也适用于实体组。

# android - 滚动时自定义 ListView 中的错误

> ID：10839328
> 
> 赞同：1
> 
> 时间：2012-05-31T18:39:14.977
> 
> 标签：android, android-layout, android-listview

在 myadapter.java 我有以下代码：

```
public View getView(int position,View convertView,ViewGroup parent) {
  View view=null;
  if(convertView!=null)view=convertView;else view=newView(context,parent);
  HashMap<String,String> d=new HashMap<String,String>();
  d=data.get(position);
  String _r=d.get("r");
  String out=d.get("out");
  Typeface mf=Typeface.createFromAsset(context.getAssets(),"fonts/mf.ttf");
  TextView txt=(TextView)view.findViewById(R.id.c_n);
  txt.setText(_r);
  txt.setTypeface(mf);
  if(out.equals("yes") && !d.get("sid").equals("-1")) {
    ImageView imag=(ImageView)view.findViewById(R.id.myimage);
    imag.setVisibility(imag.VISIBLE);//This fires sometimes while scroll, while
    //I scroll & where I don't need it.
    //view.setBackgroundDrawable(context.getResources().getDrawable(R.drawable.c_c));
    //^ same as setVisibility.
  }
  ...
  return view;
} 
```

当我启动我的应用程序时，这个列表就可以了。但是，当我滚动时，`imag.setVisibility(imag.VISIBLE);`有时会在我不需要它的地方触发，比如 listview 会生成每个滚动事件。一些 ImageViews 变得可见，而不是在应用程序启动时。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:53:35.117

问题是由`convertView`它用于重新循环现有视图的方式引起的。

示例 - 假设您的列表适配器有 20 个项目，但`ListView`屏幕上只能显示 5 个。这 5 个列表项“视图”将通过在滚动`convertView`时作为参数传递来重新循环。`ListView`

一旦您设置了 的可见性`ImageView`，它将保持在 中的设置`convertView`。换句话说，您需要将其设置为，`INVISIBLE`或者`GONE`如果您不希望它可见...

```
ImageView imag=(ImageView)view.findViewById(R.id.myimage);
if (d.get("ms").equals("yes") && !d.get("sid").equals("-1")) {
    imag.setVisibility(View.VISIBLE);
}
else
    imag.setVisibility(View.INVISIBLE); // Or use View.GONE depending on what you need 
```

# c# - Windows 窗体接受按钮不起作用

> ID：10839330
> 
> 赞同：-1
> 
> 时间：2012-05-31T18:39:19.273
> 
> 标签：c#, winforms

我目前正在做我的作业，这是一个 Windows 形式的计算器，我面临的问题是我已将表单接受按钮设置为相等按钮，但通过按下回车键，退格按钮正在工作，退格按钮有背景图像，当我运行我的应用程序，然后退格按钮突出显示或聚焦。为什么会发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:48:01.317

```
 this.KeyPreview = true; 
```

需要在initializeComponent之后

事实上，除非有特殊原因，否则什么都不应该放在这前面。我敢肯定这里还有更多错误，但是从这个开始，然后我们将继续前进

尝试

```
equalButton.Focus() 
```

在 initialComponent() 之后

但是，如果您突出显示了一个控件并按下回车键，它将选择该按钮。在您的网络浏览器上进行文件打印，使用您的键和选项卡突出显示取消并按 Enter。将选择取消。

接受按钮仅用于在文本框内时使用，该文本框具有

```
AcceptReturn=false; 
```

或者我相信如果您没有突出显示控件。您需要做的是进入每个控制 keypreview 事件，并在

```
if (e.keycode == keys.Enter)
    equalsButton_Click(new object(), EventArgs.empty) 
```

**编辑** 我要做的是添加到您的每个按钮 onfocus 事件中，它们都可以指向此方法

```
public button1_onfocus(object sender, Eventargs e)
{
    myTextbox.focus();
} 
```

这样你的文本框将永远是焦点，如果他们点击返回，你的文本框就有焦点，所以它会触发你的接受按钮。

我的所有代码示例都没有经过语法准确性测试

# android - Android - 基于表单的身份验证

> ID：10839333
> 
> 赞同：0
> 
> 时间：2012-05-31T18:39:36.863
> 
> 标签：android, android-layout, android-intent, android-emulator, android-ndk

我需要使用 POST 请求在网站上上传一些数据。我知道使用 HTTP 客户端[执行 POST 请求](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

问题是，为了做到这一点，您应该首先进行身份验证。
该站点是一个提示输入用户名和密码的简单页面。我假设它在浏览器中存储一个 cookie 并检查后续请求以查看我是否已经通过身份验证。
但我没有具体的想法如何在 Android 上实现它。

客户端刚刚给了我这个：
URL 上传： http: [//xyz.com/](http://xyz.com/?page=add)
?page=add 凭据：admin/admin
数据格式：

```
$_POST = {
  ["Name"]=>string(255)
  ["Address"]=>string(255)
  ["ZIP"]=>string(50)
  ["City"]=>string(100)
  ["Phone"]=>string(50)
  ["Email"]=>string(50)
  ["Age"]=>int(11)
  ["Validation_Result"]=>string(255)
  ["Comment"]=>string(-)
}
$_FILES["Image"] = {
    ["name"]=>string "3D-graphics_3D_Triangles_006790_.jpg"
    ["type"]=>string "image/jpeg"
    ["tmp_name"]=>string "C:\Windows\Temp\php1362.tmp"
    ["error"]=>int(0)
    ["size"]=>int
} 
```

没有别的了。

你能否指出我将如何去做这件事的正确方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:42:55.920

[如何在android中进行HTTP身份验证？](https://stackoverflow.com/questions/1968416/how-to-do-http-authentication-in-android)

查看此问题的最佳答案。很好的解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:49:41.730

如果您正在使用`HttpClient`您链接的帖子描述的 POST，您可以通过执行以下操作添加基本身份验证：

```
String username, password;
DefaultHttpClient client = new DefaultHttpClient();

UsernamePasswordCredentials creds = new UsernamePasswordCredentials(username, password);
client.getCredentialsProvider().setCredentials(AuthScope.ANY, creds); 
```

高温高压

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-18T22:41:50.040

我知道这是一个非常古老的问题，但这是我一直遇到的最高搜索结果，我想添加另一种方法，我设法使用 CookieStore 和 HttpClient 做到这一点。

对于我的用例（Tomcat 服务器配置），我点击了经过身份验证的基本 URL 以获取 cookie，将我的身份验证数据发布到表单提交端点，然后使用 cookie 进行后续调用。这是使它为我工作的简化代码：

```
String cookieUrl = "SOME_URL_THAT_WILL_PROVIDE_COOKIE";
String authenticateUrl = "URL_TO_POST_FORM_DATA";
String dataUrl = "AUTHENTICATED_URL_YOU_WANT_DATA_FROM";

final String userNameKey = "FORM_KEY_FOR_USERNAME";
final String userPassKey = "FORM_KEY_FOR_PASSWORD";
final String userName = "USER_NAME";
final String userPass = "USER_PASSWORD";

HttpClient client = new DefaultHttpClient();
CookieStore cookieStore = new BasicCookieStore();
HttpContext context = new BasicHttpContext();
context.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

String getUrl = cookieUrl;
HttpGet get = new HttpGet( getUrl );
HttpResponse getResponse = client.execute(get, context);
Log.d( "ConnectionTest", "GET @ " + getUrl );
Log.d( "ConnectionTest", getResponse.getStatusLine().toString() );

List<NameValuePair> authDataList = new ArrayList<NameValuePair>();
authDataList.add( new NameValuePair() {
    @Override
    public String getName() {
        return userNameKey;
    }

    @Override
    public String getValue() {
        return userName;
    }
} );
authDataList.add( new NameValuePair() {
    @Override
    public String getName() {
        return userPassKey;
    }

    @Override
    public String getValue() {
        return userPass;
    }
} );
HttpEntity authEntity = new UrlEncodedFormEntity( authDataList );

String authPostUrl = authenticateUrl;
HttpPost authPost = new HttpPost( authPostUrl );
authPost.setEntity( authEntity );
HttpResponse authPostResponse = client.execute(authPost, context);
Log.d( "ConnectionTest", "POST @ " + authPostUrl );
Log.d( "ConnectionTest", authPostResponse.getStatusLine().toString() );

String getUsersUrl = dataUrl;
HttpGet usersGet = new HttpGet( getUsersUrl );
HttpResponse usersGetResponse = client.execute(usersGet, context);
Log.d( "ConnectionTest", "GET @ " + getUsersUrl );
Log.d( "ConnectionTest", usersGetResponse.getStatusLine().toString() );
Log.d( "ConnectionTest", EntityUtils.toString( usersGetResponse.getEntity() ) ); 
```

# objective-c - 为什么我在 Xcode 中看到“未声明的标识符”？

> ID：10839347
> 
> 赞同：1
> 
> 时间：2012-05-31T18:40:50.390
> 
> 标签：objective-c, ios

我最近开始写一本对 Mac 或 Xcode 一无所知的书，名为《*开始 iOS 5 开发*》 。我在第4章，要么我犯了错误，要么他们打错了。我无法弄清楚，所以这是问题所在：

```
- (IBAction)textFieldDoneEditing:(id)sender {
    [sender resignFirstResponder];
}

-(IBAction)backgroundTap:(id)sender {
    [nameField resignFirstResponder];
    [numberField resignFirstResponder];
}

- (IBAction)sliderChanged:(id)sender {
    UISlider *slider = (UISlider *)sender;
    int progressAsInt = (int)roundf(slider.value);
    sliderLabel.text = [NSString stringWithFormat:@"%d", progressAsInt];
}

@end 
```

他们告诉我在`sliderChanged`方法之后添加粗体文本。现在 Xcode 说“使用未声明的标识符”，所以我无法在 iOS 模拟器上运行应用程序进行预览。顺便说一句，它说问题是`sliderLabel.text`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:49:32.057

确保您的头文件`IBOutlet UILabel *sliderLabel`在接口声明中有一个（并且它连接到您视图中的标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:01:45.637

第 98 页的第二段描述了如何命名标签“sliderLabel”。标签本身是在第 96 页的最后一段中创建的。这里的关键是在助手编辑器中检查标签的属性，并将标签小部件的“名称”字段更改为“sliderLabel”。

# java - 如何使自定义 listView 成为可检查的？

> ID：10839348
> 
> 赞同：0
> 
> 时间：2012-05-31T18:40:50.537
> 
> 标签：java, android, eclipse, listview, checkbox

我的问题是，如果我按下我的列表项之一，复选框只会在我的手指触摸它时被选中。我一直在疯狂地寻找，但我很难相信没有简单的解决方法。

这是我的代码示例。

我正在为我的列表项使用以下 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/text1"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:textAppearance="?android:attr/textAppearanceLarge"
android:gravity="center_vertical"

android:checkMark="?android:attr/listChoiceIndicatorMultiple"
android:paddingLeft="6dip"
android:paddingRight="6dip"
android:textColor="#000000"
android:textSize="25dp"
/> 
```

附加到此类，它正在我的阵列适配器中使用。

```
public class Misshandel extends Activity {

    Button misstankt;
    ListView mListView;
    ArrayAdapter<String> mAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.forhor);

        misstankt = (Button) findViewById(R.id.misstanktKnapp);
        mListView = (ListView) findViewById(R.id.forhorsLista);

         final String[] misshandelMT = getResources().getStringArray(R.array.misshandelMT);

        misstankt.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                ArrayAdapter<String> mAdapter = new ArrayAdapter<String>(Misshandel.this, R.layout.custom_list_item, misshandelMT);
                mListView.setAdapter(mAdapter);
                mAdapter.notifyDataSetChanged();

            }
        });
}
} 
```

总而言之，我想要实现的是能够检查我的框！

如果您想查看，这里是完整的课程：http: [//codepaste.net/fg3xiz](http://codepaste.net/fg3xiz)

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:59:45.543

您应该发布更详细的信息，但我会给您我的对话框代码，您可以在其中选择几个选项：

`multiselect.xml'

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:theme="@android:style/Theme.Translucent.NoTitleBar" >

    <ListView
        android:id="@+id/values"
        android:layout_width="match_parent"
        android:layout_height="0dip"
        android:layout_weight="2"
        android:choiceMode="multipleChoice" >
    </ListView>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/selectAll"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_gravity="bottom"
            android:layout_weight="1"
            android:text="@string/select_all" />

        <Button
            android:id="@+id/ok"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="@string/ok" />

        <Button
            android:id="@+id/deselectAll"
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:text="@string/select_none" />
    </LinearLayout>
</LinearLayout> 
```

以及 Dialog 类（支持翻译奖励）：

```
public class MultiSelectDialog extends Dialog {
    private final String title;
    private ListView items;
    private List<String> selectedItems;
    private HashMap<String, String> translation;
    private List<String> displayedValues;

    public MultiSelectDialog(Context context, String title, List<String> values,
            HashMap<String, String> translation) {
        super(context);
        this.title = title;
        this.translation = translation;
        if(translation != null) {
            displayedValues = FUtils.collect(translation.entrySet().iterator(),
                    new Converter<HashMap.Entry<String, String>, String>() {
                        public String convert(Entry<String, String> object) {
                            return object.getValue();
                        }
                    });
        }
        else {
            displayedValues = values;
        }
        selectedItems = new LinkedList<String>();
    }

    public List<String> getSelectedItems() {
        return selectedItems;
    }

    public void setSelectedItems(List<String> selectedItems) {
        this.selectedItems.clear();
        this.selectedItems.addAll(selectedItems);
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.multiselect);

        setTitle(title);
        items = (ListView) findViewById(R.id.values);

        final ArrayAdapter<String> adapter = new ArrayAdapter<String>(getContext(),
                android.R.layout.simple_list_item_multiple_choice, displayedValues);
        items.setAdapter(adapter);
        for(int i = 0; i < adapter.getCount(); ++i) {
            items.setItemChecked(i, false);
        }

        if(selectedItems != null) {
            for(int i = 0; i < selectedItems.size(); ++i) {
                String value = getTranslatedValue(selectedItems.get(i));
                for(int j = 0; j < items.getAdapter().getCount(); ++j) {
                    if(items.getAdapter().getItem(j).equals(value)) {
                        items.setItemChecked(j, true);
                    }
                }
            }
        }

        Button selectAll = (Button) findViewById(R.id.selectAll);
        selectAll.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                for(int i = 0; i < adapter.getCount(); ++i) {
                    items.setItemChecked(i, true);
                }
            }
        });
        Button deselectAll = (Button) findViewById(R.id.deselectAll);
        deselectAll.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                for(int i = 0; i < adapter.getCount(); ++i) {
                    items.setItemChecked(i, false);
                }
            }
        });
        Button okButton = (Button) findViewById(R.id.ok);
        okButton.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                selectedItems.clear();
                for(int i = 0; i < adapter.getCount(); ++i) {
                    if(items.isItemChecked(i)) {
                        String item = (String) items.getItemAtPosition(i);
                        reverseTranslateAndAdd(item);
                    }
                }
                dismiss();
            }
        });
    }

    private String getTranslatedValue(String key) {
        if(translation == null) {
            return key;
        }
        return translation.get(key);
    }

    private void reverseTranslateAndAdd(String item) {
        if(translation != null) {
            for(Entry<String, String> e : translation.entrySet()) {
                String value = e.getValue();
                if(value.equals(item)) {
                    selectedItems.add(e.getKey());
                    break;
                }
            }
        }
        else {
            selectedItems.add(item);
        }
    }
} 
```

# sql - SQL - 选择在给定日期之前找到的第一条记录

> ID：10839350
> 
> 赞同：3
> 
> 时间：2012-05-31T18:40:59.130
> 
> 标签：sql

假设我有一张桌子：

```
ID  DATE
1   2/1/12
2   3/1/12
3   1/1/12
4   4/1/12 
```

从给定日期递减时，我将如何选择找到的第一个日期。

示例：按日期查找 2012 年 4 月 1 日之前的最后一个条目。返回 SQL ID 2 处的条目。

如果添加了这个：

```
ID  DATE
5   3/2/12 
```

上述示例将返回 SQL ID 5 处的条目。

我将如何在 SQL 中表示我需要的内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:43:47.340

```
Select top 1 ID, DATE
from table
where DATE < '4/1/12'
order by DATE DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:46:15.007

其他想法：（除了 Gratzy 的）

选择日期小于目标日期的 MAX 日期。

使用 LAG 函数。

# zend-framework - Zend MVC 和 IIS7 重写

> ID：10839351
> 
> 赞同：0
> 
> 时间：2012-05-31T18:41:00.020
> 
> 标签：zend-framework, iis-7, url-rewriting

我到处找了几天，显然我是这个星球上唯一一个有这个问题的人......

我正在使用一个简单的重写规则来获取路由到 /public/index.php 的请求，这可以正常工作，但没有其他功能......一旦请求被路由，我的布局似乎找不到任何关于类和包含的内容，所以我只是得到了布局和内容应该在哪里，我得到了 PAGE NOT FOUND。

当我导航到 www.domain.com/public/index.php - 一切正常。只有当重写发生时，我才会遇到问题。

我已经尝试了所有的“标准”重写规则。这是我正在使用的规则......

规则名称="导入规则" stopProcessing="true"

匹配 url="^(.*)$"

动作类型="重写" url="public/index.php"

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:08:18.270

我刚刚在 ZF1 的 SVN 后备箱中修复了这个问题。如果你能测试一下，我会很高兴的！问题是[ZF-4491](http://framework.zend.com/issues/browse/ZF-4491)。

颠覆代码在这里： http: [//framework.zend.com/svn/framework/standard/trunk/](http://framework.zend.com/svn/framework/standard/trunk/)

# java - java.io.File 的路径问题

> ID：10839356
> 
> 赞同：0
> 
> 时间：2012-05-31T18:41:14.307
> 
> 标签：java, xml, swt

我在 Eclipse 插件中使用`org.eclipse.swt.widgets.FileDialog`并保存 XML 文件中的路径来获取文件路径。

在 web.xml 中，路径存储如下（我无法将反斜杠更改为正斜杠或转义反斜杠，因为该值来自 SWT FileDialog）

```
<init-param>
  <param-name>filePath</param-name>
  <param-value>c:\new\demo\next\version.txt</param-value>
</init-param> 
```

在我的过滤器中，我在 init() 方法中有以下代码，但由于特殊字符而无法获取文件引用

```
String filePath = filterConfig.getInitParameter("filePath");
// Tried filePath.replace('\\','/') --> Didnot work since \n is a single character
File f = new File(path) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:46:29.883

> 我无法获得实际路径，因为 \n 被视为新行。

这表明读取文件的任何内容都假设转义，而事实并非如此。

不幸的是，您还没有告诉我们使用什么代码来*写入*数据*或*用于*读取*数据的代码。它是否在您的控制之下？

基本上，您需要以与 unescape 相同的方式进行转义 - 因此您可以在写入数据时转义`c:\new\demo\next\version.txt`到`c:\\new\\demo\\next\\version.txt`，或者您可以删除在读取数据时试图取消转义的代码。

请注意，如果您*确实*尝试过：

```
string.replace('\\', '/'); 
```

那么这肯定无济于事-因为您忽略了返回值。如果你试过

```
string = string.replace('\\', '/'); 
```

那么这应该已经执行了相关的替换，但是你没有说你在*哪里*尝试这样做，或者它以什么*方式*不起作用。

实际上，我在这里将正斜杠与反斜杠视为一条红鲱鱼：从根本上说，您需要以与逃脱相同的方式逃脱。*用正斜杠替换反斜杠可能有助于文件名，但如果您不能*只执行替换，您只会在其他地方遇到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T04:47:57.910

> 我正在使用 org.eclipse.swt.widgets.FileDialog 获取 eclipse 插件中的文件路径并将路径保存在 XML 文件中。
> 
> 在 web.xml 中，路径存储如下（我无法将反斜杠更改为正斜杠或转义反斜杠，因为该值来自 SWT FileDialog）

SWT 文件对话框不写入 web.xml 文件。您正在这样做，因此您*可以*修复反斜杠。将它们更改为正斜杠。

> 我在 init() 方法中有以下代码，但由于特殊字符不起作用，因此无法获取文件引用，因为 \n 被视为单个字符 [来自您的评论之一]

这意味着*web.xml 文件中的数据有误。*你在代码中做的任何事情都无法解决这个问题。这不是一个编码问题。您不需要在 Java 中处理反斜杠。编译器已经这样做了，在这种情况下，Web-app 容器中的 XML 解析器也是如此。您需要预先获取正确的文件格式。

# c# - 调整位图图像大小

> ID：10839358
> 
> 赞同：10
> 
> 时间：2012-05-31T18:41:21.297
> 
> 标签：c#, wpf, image, bitmap, resize

我希望保存的图像尺寸更小。我该如何调整它的大小？我使用此代码重新渲染图像：

```
Size size = new Size(surface.Width, surface.Height);
surface.Measure(size);
surface.Arrange(new Rect(size));
// Create a render bitmap and push the surface to it
RenderTargetBitmap renderBitmap =
    new RenderTargetBitmap(
        (int)size.Width,
        (int)size.Height, 96d, 96d,
        PixelFormats.Default);
renderBitmap.Render(surface);

BmpBitmapEncoder encoder = new BmpBitmapEncoder();
// push the rendered bitmap to it
encoder.Frames.Add(BitmapFrame.Create(renderBitmap));
// save the data to the stream
encoder.Save(outStream); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-31T18:46:08.977

```
public static Bitmap ResizeImage(Bitmap imgToResize, Size size)
{
    try
    {
        Bitmap b = new Bitmap(size.Width, size.Height);
        using (Graphics g = Graphics.FromImage((Image)b))
        {
            g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
            g.DrawImage(imgToResize, 0, 0, size.Width, size.Height);
        }
        return b;
    }
    catch 
    { 
        Console.WriteLine("Bitmap could not be resized");
        return imgToResize; 
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-13T14:58:58.987

[调整位图大小的最短方法是将其与所需大小](https://msdn.microsoft.com/de-de/library/0wh0045z%28v=vs.110%29.aspx)（或[宽度和高度](https://msdn.microsoft.com/de-de/library/334ey5b7%28v=vs.110%29.aspx)）一起传递给位图构造函数：

```
bitmap = new Bitmap(bitmap, width, height); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T18:52:47.200

您的“表面”视觉是否具有缩放功能？如果没有，您可以将其包装在 Viewbox 中，然后以您想要的大小渲染 Viewbox。

当您在表面上调用 Measure and Arrange 时，您应该提供您想要的位图大小。

要使用 Viewbox，请将您的代码更改为如下所示：

```
Viewbox viewbox = new Viewbox();
Size desiredSize = new Size(surface.Width / 2, surface.Height / 2);

viewbox.Child = surface;
viewbox.Measure(desiredSize);
viewbox.Arrange(new Rect(desiredSize));

RenderTargetBitmap renderBitmap =
    new RenderTargetBitmap(
    (int)desiredSize.Width,
    (int)desiredSize.Height, 96d, 96d,
    PixelFormats.Default);
renderBitmap.Render(viewbox); 
```

# c# - 在 C# 中强制执行同时事件调用的顺序

> ID：10839359
> 
> 赞同：0
> 
> 时间：2012-05-31T18:41:22.017
> 
> 标签：c#, events, race-condition

我有一个 C# 程序，它有两个元素，一个 TreeView 和一个 DataGridView 以及两个 EventHandelrs。当在 TreeView 中选择一个项目时，DataGridView 带有一个表格，显示一些信息并且可以由用户编辑。TreeView 中的每个项目都有自己唯一的表。当用户不关注 DataGridView 时，软件底层软件模型被更新（保存用户所做的更改）：

```
aDataGridView_Leave(object sender, EventArgs e)
{
     //Update the software model (save the current DataGridView)
}

aTreeView_AfterSelect(object sender, EventArgs e)
{
    //Update the table that is shown in aDataGridView
} 
```

我的问题是，如果用户通过在 TreeView 中选择不同的项目来分散对 DataGridView 的关注，我基本上在这些事件中的哪一个首先发生之间存在竞争条件（即使这一切都在一个线程上）。显然，在这种情况下，我希望 DataGridView_Leave 事件首先触发，否则用户对表所做的更改会被在保存更改之前加载的新表所吹走。

无论如何，有没有优雅的方式来强制执行首先发生的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:50:13.897

立即想到的是某种计数器。为每个事件调用分配一个编号并存储最后处理的事件。这样你就可以检查它是否是一个旧事件并忽略它。我还没有看到它完全用在 C# 中，但是当网络延迟经常导致这种情况时，很多时候使用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:53:30.820

听起来您可以通过`isDirty`在必须保存更改时保持一个布尔值来解决这个问题。您需要自己跟踪这一点，例如在属性设置器中。如有必要，签`isDirty`入`aTreeView_AfterSelect`并保存，`aDataGridView_Leave`这样如果没有更改就不会保存。

这应该可行，但听起来您的设置有点 hacky，并且当元素失去焦点时保存更改对于用户来说可能是违反直觉的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T21:05:13.350

我创建了一个简单的 Windows 窗体应用程序，其中包含树视图、网格视图和文本框来记录发生的事件。当您离开网格视图时，它的离开事件总是在选择后的树视图之前触发。

您是否将数据异步保存在 gridview 中？我可以看到您是否正在异步保存，然后在您的异步方法抓取数据以从网格中保存之前，select 之后的树视图可能会触发。

如果是这种情况，请将 gridviews 数据推送到堆栈并在执行保存的方法中将其弹出。

# php - 以下代码给出 500 错误

> ID：10839366
> 
> 赞同：0
> 
> 时间：2012-05-31T18:41:37.353
> 
> 标签：php, codeigniter

如果我包括`if block`我得到 500 错误，我正在使用 codeigniter 2.1

```
<?php echo form_open('skill/add',array('class'=>'form-horizontal')) ?>
  <fieldset>

   <input type="text" class="input-xlarge" id="skill" name="skill" placeholder="Skill" 
        value="<?php echo set_value('skill'); ?>" max-length="50" required>
    <?php 
            if(!empty(form_error('skill')))
                echo '<p class="help-block">'.form_error('skill').'</p>';
    ?>
 ....... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:43:03.100

```
echo '<p class="help-block">'.form_error('skill')).'</p>'; 
```

在 form_error 之后你有一个额外的关闭括号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:43:06.323

```
echo '<p class="help-block">'.form_error('skill')).'</p>'; 
```

函数调用末尾有一个额外的右括号 - 这可能是问题吗？

# jquery - 一些 JQuery 代码快捷方式

> ID：10839368
> 
> 赞同：2
> 
> 时间：2012-05-31T18:41:48.610
> 
> 标签：jquery

我最近写了很多 JQuery 代码，这些代码似乎在重复，我想知道以下是否有任何快捷方式：

1）按名称选择多个元素，即

```
$("input[type=text][name=one][name=two][name=three]").live(); <-- is that correct syntax 
```

2）多个实时绑定，即

```
$("input[type=text]").live('blur and click',function(){}); 
```

谢谢

**编辑**：

我也有这个用例，我想在多个元素上翻转显示，我在这个论坛上找到了这个，但我还没有测试过。这是我的 impl，我欢迎就该策略提供反馈

```
$("#btn_account_edit").live('click',function(){
    flip_display_on_off(
        $("#btn_account_edit_cancel, #btn_account_save, #account_edit_form"),
        $("#btn_account_edit, #account_edit_static"),
        false,true);
});
$("#btn_account_edit_cancel").live('click',function(){
    flip_display_on_off(
        $("#btn_account_edit_cancel, #btn_account_save, #account_edit_form"),
        $("#btn_account_edit, #account_edit_static"),
        true,false);
}); 
```

```
function flip_display_on_off($element_set1,$element_set2,flip1,flip2) {
    var display1 = 'block' ? if flip1 : 'none';
    var display2 = 'none' ? if flip2 : 'block';
    for (i =0; i < element_set1.length; i++) {
        $element_set1[i].css('display',display1);
    }
    for (i =0; i < element_set2.length; i++) {
        $element_set2[i].css('display',display2);
     } 
} 
```

**第二次编辑**：

这是代码的最终版本，经过测试并且可以完美运行！感谢@thecodeparadox

```
$("#btn_account_edit").live('click',function(){
    flip_display_on_off(
        $("#btn_account_edit_cancel, #btn_account_save, #account_edit_form"),
        $("#btn_account_edit, #account_edit_static"),
        true);
});

$("#btn_account_edit_cancel").live('click',function(){
    flip_display_on_off(
        $("#btn_account_edit_cancel, #btn_account_save, #account_edit_form"),
        $("#btn_account_edit, #account_edit_static"),
        false);
});

function flip_display_on_off($element_set1, $element_set2, flip1) {
    $element_set1.css('display', flip1 ? 'block' : 'none');
    $element_set2.css('display', flip1 ? 'none' : 'block'); 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:43:25.473

**回答您的问题：01**

要选择不同的选择器，它们需要**用逗号分隔**，请阅读有关**[jQuery Selectore的更多信息](http://api.jquery.com/category/selectors/)**

```
$("#container").on('click', ":text[name=one], :text[name=two], :text[name=three]", function() {

}); 
```

是正确的。

**回答你的问题：02**

对于多个实时事件绑定事件名称也应该**用逗号分隔**。阅读有关**[jQuery 事件](http://api.jquery.com/category/events/)**的更多信息。

在实时事件绑定的情况下，我们不应该使用 live，因为它已被弃用。相反，我们需要使用**[.on()](http://api.jquery.com/on)**。

```
// here #container is the parent of input[type=text]
// which is already exits in DOM

$("#container").on("blur click", "input[type=text]", function(){

}); 
```

现场活动委托还有另一种选择，称为**[.delegate()](http://api.jquery.com/delegate)**。它实现如下：

```
$("#container").delegate("input[type=text]", "blur click", function(){

}); 
```

**根据评论**

### 想要将输入字段数组作为函数的参数发送

```
function handlerToInputs(inputParams) {
  var filter = inputParams.join(', ');
  $("#container").on("blur click", filter, function(){

  });
}

// on checkbox click you execute a function with inputs
// if checkbox needs delegate event then
// bind live event like above

$(':checkbox').on('click', function() {
  hadlerToInputs([":text[name=one]", ":text[name=two]", ":text[name=three]"]);
}); 
```

### 根据编辑

```
$("#some_container").on('click', #btn_account_editfunction(){
    flip_display_on_off(
        $("#btn_account_edit_cancel, #btn_account_save, #account_edit_form"),
        $("#btn_account_edit, #account_edit_static"),
        false,true);
});
$("#some_container").on('click',"#btn_account_edit_cancel", function(){
    flip_display_on_off(
        $("#btn_account_edit_cancel, #btn_account_save, #account_edit_form"),
        $("#btn_account_edit, #account_edit_static"),
        true,false);
});

function flip_display_on_off($element_set1, $element_set2, flip1, flip2) {

    // making flip for first set of elements
    $element_set1.css('display', flip1 ? 'block' : 'none');

    // making flip for second set of elements
    $element_set2.css('display', flip2 ? 'block' : 'none');

} 
```

**注意**我认为你不需要任何循环。

我希望你能得到所有的答案。快乐编码:(

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:44:42.223

您尝试做的第一件事是行不通的。您可以像这样合理简洁地做到这一点：

```
$("input[type=text]").filter("[name=one], [name=two], [name=three]").live(); 
```

如果你有大量的名字，你可以更简单地这样做：

```
$("input[type=text]").filter(function() {
    return $.inArray(["one", "two", "three"], $(this).attr("name")) !== -1;
}).live(); 
```

对于第二件事，您可以这样做：

```
$("input[type=text]").live("blur click", function() {
}); 
```

请记住，该`live`功能已[弃用](http://api.jquery.com/live/)。建议您使用[`delegate`](http://api.jquery.com/delegate/)or[`on`](http://api.jquery.com/on/)代替。

这是一个例子`delegate`：

```
$(document).delegate("input[type=text]", "click", function() {
    if ($.inArray(["one", "two", "three"], $(this).attr("name")) !== -1) {
        // handle the event here
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:44:41.910

至于＃2，你不需要`and`那里的词。jQuery 绑定可以接受多个事件，只是用空格分隔。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T18:58:56.763

我会使用一个函数来过滤输入：

```
$( 'input:text' ).filter(function () { 
    return /one|two|three/.test( this.name ); 
}) 
```

**现场演示：http:** [//jsfiddle.net/rhKBy/](http://jsfiddle.net/rhKBy/)

# api - Twitter GET 状态/提及不返回任何内容

> ID：10839369
> 
> 赞同：0
> 
> 时间：2012-05-31T18:41:56.267
> 
> 标签：api, rest, twitter, get

我正在尝试获取用户的`mentions using the Twitter REST API`，但是当我打电话时我没有得到任何回应。

我基本上只是想点击他们在我提供的链接中指定的 URL。我正在尝试获得特定用户的提及。

以下是我尝试过的 URL，它们都不起作用（它们都返回空白页）：

```
https://api.twitter.com/1/statuses/mentions.json
https://api.twitter.com/1/statuses/mentions.json?screen_name=ludjanio
https://api.twitter.com/1/statuses/mentions.json?screen_name=ludjanio&include_entities=true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T23:15:31.060

此 API 端点需要通过 OAuth 进行授权。除此之外，此 API 端点不接受参数 screen_name。这个 API 端点的完整文档可以在这里找到，[https://dev.twitter.com/docs/api/1/get/statuses/mentions](https://dev.twitter.com/docs/api/1/get/statuses/mentions) 如果你想得到一个完全不同的人的提及，没有直接的用于此的 API。但是你可以搜索@，这是大多数应用程序这样做的方式。

# winforms - Winforms - 添加文本框时无法调整大小

> ID：10839371
> 
> 赞同：0
> 
> 时间：2012-05-31T18:42:00.993
> 
> 标签：winforms, textbox, resize

我正在整理一个简单的 winforms 应用程序，它由一个表单和一个文本框组成。当用户缩放表单时，我希望文本框的宽度缩放。

默认情况下，文本框是固定宽度并锚定在顶部和左侧。表单可以缩放，但文本框不行。

如果我将左、上和右锚点应用于文本框，它只会缩放文本框和表单，我无法缩小它。

我是否需要将文本框的宽度动态设置为表单的宽度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:55:23.317

我一直在尝试重新创建它 5 分钟，它的大小对我来说很好，我只能找到一组可以重现您描述的行为的组合：

面板内的文本框是否将**Autosize**设置为“true”并且**AutoSizeMode**设置为“grow only”？这是我能够复制行为的唯一方法。

这是以这种方式设置的属性的屏幕截图。我的文本框也设置为锚定在顶部、左侧、右侧。同样，这是我能够复制您所描述的行为的唯一方法，所以希望这会有所帮助。

![在此处输入图像描述](../Images/ce787fb47a6e408134cba76e6d371a0b.png)

# c# - 超链接 wpf RichTextBox 中的选定文本并从代码中设置选择

> ID：10839373
> 
> 赞同：0
> 
> 时间：2012-05-31T18:42:22.627
> 
> 标签：c#, wpf, hyperlink, richtextbox

如何向 wpf RichTextBox 中的选择添加超链接？

例如，如果我的 RichTextBox 说：

“把我送到 Stack Overflow。”

我突出显示“溢出”，然后单击一个按钮以从中创建一个超链接以转到“www.stackoverflow.com”我该如何实现？

另外，我正在尝试突出显示代码中的文本，但我不知道如何。为了突出显示整个 RichTextBox，我已经尝试过，但没有奏效：

```
 TextPointer myTextPointer1 = rtb.Document.ContentStart;
    TextPointer myTextPointer2 = rtb.Document.ContentEnd;

    rtb.Selection.Select(myTextPointer1, myTextPointer2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:46:03.490

```
 TextSelection ts = rtb.Selection;
    TextPointer start = ts.Start;
    TextPointer end = ts.End;

    TextRange before = new TextRange(rtb.Document.ContentStart, start);
    TextRange after = new TextRange(end, rtb.Document.ContentEnd);
    TextRange linker = new TextRange(start, end);

    Paragraph myParagraph = new Paragraph();
    myParagraph.Inlines.Clear();
    myParagraph.Inlines.Add(before.Text);

    Hyperlink hyperLink = new Hyperlink();
    hyperLink.Inlines.Add(ts.Text);

    hyperLink.Click += new RoutedEventHandler(hyperLink_Click);
    myParagraph.Inlines.Add(hyperLink);
    myParagraph.Inlines.Add(after.Text);

    rtb.Document.Blocks.Clear();

    rtb.Document.Blocks.Add(myParagraph); 
```

# sql-server - SQL Server 数据库有 2 个日志文件，我想删除一个。如何？

> ID：10839374
> 
> 赞同：5
> 
> 时间：2012-05-31T18:42:23.457
> 
> 标签：sql-server, logfile

我是新来的。我有一个包含 2 个 .ldf 文件的数据库（由其他人创建）。（blah_log.ldf 和 blah_log2.ldf）。我的经理要求我删除其中一个日志文件，但我不能。我该怎么做呢？我试图把它放在另一台服务器上，分离，删除日志文件，附加，但它给出了一个错误。我以为这样它只会创建一个，但它想要两个。然后我尝试右键单击属性并删除文件，不让我删除。它说日志文件不为空。我到底是如何做到这一点的。我只想让它在 dang 数据库有一个该死的日志文件而不是两个的地方。这不应该这么复杂。我是初学者，一无所知，所以也许不是真的。请帮忙！

我刚试过这个：empty SQL Server database transaction log file

备份日志 [dbname] with truncate_only go DBCC SHRINKDATABASE ([dbname], 10, TRUNCATEONLY) go

然后我删除了第二个日志文件并单击确定。我想这就是我需要做的全部？我在还原后的测试服务器上进行了尝试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:50:09.107

[这篇 MSDN 文章描述了如何在高层次上实现这一点](http://msdn.microsoft.com/en-us/library/ms191433%28v=sql.105%29.aspx)：

> 您不能将事务日志数据从一个日志文件移动到另一个以清空事务日志文件。要从事务日志文件中删除非活动事务，必须截断或备份事务日志。当事务日志文件不再包含任何活动或非活动事务时，可以从数据库中删除该日志文件。

[这篇博文展示了将完成此任务的实际 T-SQL](http://sqlblog.com/blogs/tibor_karaszi/archive/2009/06/17/remove-transaction-log-files.aspx)：

```
USE master 
IF DB_ID('rDb') IS NOT NULL DROP DATABASE rDb 
GO 

CREATE DATABASE rDb 
ON  
PRIMARY  
 ( NAME = N'rDb', FILENAME = N'C:\rDb.mdf' , SIZE = 50MB , 
     FILEGROWTH = 1024KB ) 
LOG ON  
 (NAME = N'rDb_log2', FILENAME = N'C:\rDb_log2.ldf', SIZE = 3MB, 
     FILEGROWTH = 2MB) 
,(NAME = N'rDb_log3', FILENAME = N'C:\rDb_log3.ldf', SIZE = 3MB, 
     FILEGROWTH = 2MB) 
,(NAME = N'rDb_log4', FILENAME = N'C:\rDb_log4.ldf', SIZE = 3MB, 
     FILEGROWTH = 2MB) 
GO 

ALTER DATABASE rDb SET RECOVERY FULL 
BACKUP DATABASE rDb TO DISK = 'C:\rDb.bak' WITH INIT 
CREATE TABLE rDb..t(c1 INT IDENTITY, c2 CHAR(100)) 

INSERT INTO rDb..t 
SELECT TOP(15000) 'hello' 
FROM syscolumns AS a 
  CROSS JOIN syscolumns AS b 

--Log is now about 46% full 
DBCC SQLPERF(logspace) 

--Check virtual log file layout 
DBCC LOGINFO(rDb) 
--See that file 4 isn't used at all (Status = 0 for all 4's rows) 

--We can remove file 4, it isn't used 
ALTER DATABASE rDb REMOVE FILE rDb_log4 

--Check virtual log file layout 
DBCC LOGINFO(rDb) 

--Can't remove 3 since it is in use 
ALTER DATABASE rDb REMOVE FILE rDb_log3 

--What if we backup log? 
BACKUP LOG rDb TO DISK = 'C:\rDb.bak' 

--Check virtual log file layout 
DBCC LOGINFO(rDb) 
--3 is still in use (status = 2) 

--Can't remove 3 since it is in use 
ALTER DATABASE rDb REMOVE FILE rDb_log3 

--Shrink 3 
USE rDb 
DBCC SHRINKFILE(rDb_log3) 
USE master 

--... and backup log? 
BACKUP LOG rDb TO DISK = 'C:\rDb.bak' 

--Check virtual log file layout 
DBCC LOGINFO(rDb) 
--3 is no longer in use 

--Can now remove 3 since it is not in use 
ALTER DATABASE rDb REMOVE FILE rDb_log3 

--Check explorer, we're down to 1 log file 

--See what sys.database_files say? 
SELECT * FROM rDb.sys.database_files 
--Seems physical file is gone, but SQL Server consider the file offline 

--Backup log does it: 
BACKUP LOG rDb TO DISK = 'C:\rDb.bak' 
SELECT * FROM rDb.sys.database_files 

--Can never remove the first ("primary") log file 
ALTER DATABASE rDb REMOVE FILE rDb_log2 
--Note error message from above 
```

# maven - 将 maven 构建输出作为插件依赖项提供

> ID：10839378
> 
> 赞同：1
> 
> 时间：2012-05-31T18:42:37.020
> 
> 标签：maven, maven-plugin

我有一个自定义工厂实现，我想通过字符串参数提供给 wro4j maven 插件。问题是工厂与插件构建在同一个项目中，因此插件没有从构建中传递输出，我得到了一个不错的 ClassNotFoundException。

我知道有一个注释可以附加到 wro4j mojo 以使其了解构建输出，但这需要从源代码修补和构建 wro4j，这听起来并不聪明。我也不热衷于创建一个完全不同的工件来包含我的 5 行工厂实现。感觉应该有一个更简单的方法，所以问题是

**有没有办法在不编辑 mojo 的情况下将构建工件传递给同一个 pom 中的插件？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:10:39.893

必须猜测没有实际插件配置的问题是什么。但一般来说，如果您需要为某些插件添加依赖项（或类），则必须将该类包装到它自己的工件中，即将它移动到一个单独的项目中。

从根本上说，Maven 在进入构建周期的其余部分之前会进行插件依赖解析，因此此时您的类可能尚未编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:12:05.157

尝试指示 wro4j 插件在`process-classes`阶段而不是`compile`阶段中执行，当您的工厂类被编译时（`process-classes`发生在之后`compile`）：

```
<plugin>
    <groupId>ro.isdc.wro4j</groupId>
    <artifactId>wro4j-maven-plugin</artifactId>
    <version>${wro4j.version}</version>
    <executions>
        <execution>
            <phase>process-classes</phase>
            <goals>
                <goal>run</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <wroManagerFactory>...</wroManagerFactory>
    </configuration>
</plugin> 
```

# c++ - OpenCL 在 NVidia 硬件上生成 QNaN

> ID：10839379
> 
> 赞同：1
> 
> 时间：2012-05-31T18:42:43.007
> 
> 标签：c++, opencl, gpgpu

我正在使用 C++ 绑定在 OpenCL 中编程。我有一个问题，在 NVidia 硬件上，我的 OpenCL 代码自发地产生非常大的数字，然后（在下一次运行中）“1.#QNaN”。我的代码几乎是一个简单的物理模拟，使用方程 x = vt * .5at^2。我唯一注意到的奇怪之处是粒子的速度突然上升到大约 6e+34，我猜这是那台机器上的最大浮点值。但是，在此之前的速度/力非常小，通常小于 1。

我使用的特定 GPU 是 Tesla M2050，带有最新的驱动程序。我使用我的 AMD Fusion CPU 作为平台（它没有专用的 GPU）在我的笔记本电脑上进行原型设计，并且问题不会在那里发生。我不确定这是否是 NVidia 驱动程序问题、我的计算问题，或者完全是其他问题。

这是内核代码（**注意：我有理由确定质量总是非零**）：

```
_kernel void update_atom(__global float4 *pos, __global float4 *vel, __global float4 *force,
                        __global const float *mass, __global const float *radius, const float timestep, const int wall)
{
    // Get the index of the current element to be processed
    int i = get_global_id(0);
    float constMult;
    float4 accel;
    float4 part;

    //Update the position, velocity and force
    accel = (float4)(force[i].x/mass[i],
            force[i].y/mass[i],
            force[i].z/mass[i],
            0.0f);
    constMult = .5*timestep*timestep;
    part = (float4)(constMult*accel.x,
            constMult*accel.y,
            constMult*accel.z, 0.0f);
    pos[i] = (float4)(pos[i].x + vel[i].x*timestep + part.x,
                pos[i].y + vel[i].y*timestep + part.y,
                pos[i].z + vel[i].z*timestep + part.z,
                0.0f);
    vel[i] = (float4)(vel[i].x + accel.x*timestep,
                vel[i].y + accel.y*timestep,
                vel[i].z + accel.z*timestep,
                0.0f);
    force[i] = (float4)(force[i].x,
                force[i].y,
                force[i].z,
                0.0f);

    //Do reflections off the wall
    //http://www.3dkingdoms.com/weekly/weekly.php?a=2
    float4 norm;
    float bouncePos = wall - radius[i];
    float bounceNeg = radius[i] - wall;
    norm = (float4)(0.0f, 0.0f, 0.0f, 0.0f);
    if(pos[i].x >= bouncePos)
    {
        //Normal is unit YZ vector
        pos[i].x = bouncePos;
        norm.x = 1.0f;
    }
    else if(pos[i].x <= bounceNeg)
    {
        pos[i].x = bounceNeg;
        norm.x = -1.0f;
    }
    if(pos[i].y >= bouncePos)
    {
        //Normal is unit XZ vector
        pos[i].y = bouncePos;
        norm.y = 1.0f;
    }
    else if(pos[i].y <= bounceNeg)
    {
        //etc
        pos[i].y = bounceNeg;
        norm.y = -1.0f;
    }
    if(pos[i].z >= bouncePos)
    {
        pos[i].z = bouncePos;
        norm.z = 1.0f;
    }
    else if(pos[i].z <= bounceNeg)
    {
        pos[i].z = bounceNeg;
        norm.z = -1.0f;
    }
    float dot = 2 * (vel[i].x * norm.x + vel[i].y * norm.y + vel[i].z * norm.z);
    vel[i].x = vel[i].x - dot * norm.x;
    vel[i].y = vel[i].y - dot * norm.y;
    vel[i].z = vel[i].z - dot * norm.z;
} 
```

这就是我将信息存储到内核中的方式。PutData 只是使用 std::vector::push_back 函数将原子的位置、速度和力转换为相应的向量，而 kernel 只是我为 OpenCL 库编写的一个包装类（你可以相信我，我把正确的参数放入入队函数的正确位置）。

```
void LoadAtoms(int kernelNum, bool blocking)
{
    std::vector<cl_float4> atomPos;
    std::vector<cl_float4> atomVel;
    std::vector<cl_float4> atomForce;
    for(int i = 0; i < numParticles; i++)
        atomList[i].PutData(atomPos, atomVel, atomForce);
    kernel.EnqueueWriteBuffer(kernelNum, posBuf, blocking, 0, numParticles*sizeof(cl_float4), &atomPos[0]);
    kernel.EnqueueWriteBuffer(kernelNum, velBuf, blocking, 0, numParticles*sizeof(cl_float4), &atomVel[0]);
    kernel.EnqueueWriteBuffer(kernelNum, forceBuf, blocking, 0, numParticles*sizeof(cl_float4), &atomForce[0]);
}

void LoadAtomTypes(int kernelNum, bool blocking)
{
    std::vector<cl_float> mass;
    std::vector<cl_float> radius;
    int type;
    for(int i = 0; i < numParticles; i++)
    {
        type = atomList[i].GetType();
        mass.push_back(atomTypes[type].mass);
        radius.push_back(atomTypes[type].radius);
    }
    kernel.EnqueueWriteBuffer(kernelNum, massBuf, blocking, 0, numParticles*sizeof(cl_float), &mass[0]);
    kernel.EnqueueWriteBuffer(kernelNum, radiusBuf, blocking, 0, numParticles*sizeof(cl_float), &radius[0]);
} 
```

与往常一样，我的代码还有更多内容，但这与内核有关。

我看到了类似的[这个问题](https://stackoverflow.com/questions/6591144/opencl-producing-incorrect-calculations)，但我尽可能使用 cl_float4，所以我不认为这是对齐问题。真的没有任何其他相关的问题。

我意识到这可能不是一个简单的问题，但在我们可以在办公室获得新硬件进行测试之前，我已经没有想法了。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T23:13:16.380

由于没有人回答，我想我只会贡献我到目前为止所学到的东西。

我没有明确的结论，但至少，我弄清楚了为什么它经常这样做。因为我正在运行这个（和其他类似的内核）来计算时间顺序的估计，所以我正在清除列表，调整它们的大小，然后重新运行计算。然而，我没有做的是调整缓冲区的大小。这导致一些未定义的数字被线程拉取。

但是，这并不能解决我长时间运行程序所产生的 QNaN。那些只是自发地出现。也许这是我忽略的类似问题，但我不能说。如果有人对此问题有进一步的意见，将不胜感激。

# jakarta-ee - 为 RESTFUL API 设计 Web 界面

> ID：10839384
> 
> 赞同：1
> 
> 时间：2012-05-31T18:43:01.117
> 
> 标签：jakarta-ee, web

我是网页设计的新手。我正在使用 Struts2 框架。实现了一个 RESTFUL API，它将执行客户端（Web 界面）的所有任务。我必须设计将联系用户代理的 Web 界面。我将设计的界面将与 API（用户代理）交互，并且来自代理的响应将显示给客户端。简而言之，API 处理后端的所有活动。我没有在互联网上找到任何资源来帮助我如何做到这一点。链接或参考也将帮助我解决这个问题并帮助我开始。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T00:15:09.327

我没有使用 Struts2 来访问 REST API（我使用过其他客户端），但显然 Struts2 有一个 REST 插件，旨在使其更容易。见：[http ://struts.apache.org/2.x/docs/rest-plugin.html](http://struts.apache.org/2.x/docs/rest-plugin.html)

# javascript - 在 nodeJS 中以编程方式将路径添加到 Express

> ID：10839389
> 
> 赞同：0
> 
> 时间：2012-05-31T18:43:05.770
> 
> 标签：javascript, node.js, express

我想知道是否有一种方法可以动态地（不确定是否正确）向 nodeJS 添加路径。我的意思是，我希望允许用户从正在运行的程序中添加更多路径。一个杂乱无章的版本是简单地将路由放在一个文件中，并使用一个 NPM 库，当它注意到应用程序中的文件已更改时重置服务器（我忘记了 NPM 数据包的名称）。即使是半生产就绪的东西，这也不是一个真正可行的方法。

有任何想法吗？

编辑：这个周末项目是服务器即服务。想象一下，您正在设计原型和应用程序，或者参加黑客马拉松，并且您需要一个带有数据库的服务器来存储您的数据。此时的问题可能是您不了解服务器端，或者您没有时间设置它。所以你可以用这个项目做的是，指定表/数据库名称，以及 GET、POST、PUT、DELETE 的路径，以及你想要输入的数据类型，它会给你实际的 URL 和任何身份验证的东西。

所以问题是，当用户想要添加路径时，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:50:49.187

我想象它的工作方式如下：

POST /apps with body {name: "myFirstDB", fields: [{name: "id", type: "String"}, {name: "age", type: Integer}] 为我的用户设置数据库（ normanjoyner）命名为 myFirstDB 的字段为：id 和 age。在快速路由的主体中，您使用指定的模式创建一个新的 mongoDB 集合。

POST /apps/:username/:dbname with body {id: "1", age: 21} 将向数据库添加一个条目。（也可以接受对象数组以一次添加多个条目）

PUT on /apps/:username/:dbname?id=1 with body {id: "1", age: 22} 将更新与查询字符串参数匹配的特定条目（请注意，如果您只打算更新一个条目）

GET on /apps/:username/:dbname 返回指定数据库的所有条目

GET on /apps/:username/:dbname?id=1 仅返回匹配查询字符串参数的条目

/apps/:username/:dbname 上的 DELETE 将删除整个数据库和架构

/apps/:username/:dbname?id=1 上的 DELETE 将仅删除与查询字符串条件匹配的某些行

你明白了。您当然可以对此进行扩展，并希望能满足您的所有需求。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T02:39:42.320

如果您正在寻找用例的实现，请查看[Json Feed Server](https://github.com/chadlung/jsonfeedserver)。它可以完成您对应用程序的大部分意图。

希望这可以帮助。

# c# - 使用本地服务的成员资格表不正确

> ID：10839393
> 
> 赞同：4
> 
> 时间：2012-05-31T18:43:18.050
> 
> 标签：c#, mysql, asp.net-mvc-3, asp.net-membership

我有：

*   MVC 3
*   MySQL 使用 .NET 连接器 6.4.4

如果我使用 VS2010 从本地 PC 连接到 Linux 上的远程数据库，一切都很好。我做了一个备份以在本地拥有数据库并安装相同版本的 MySQL (5.5, x64)

在远程我有正常的.net 自动生成的成员表名，例如`my_aspnet_membership`，但是当我在本地开始申请时，它会创建其他表名，例如`mysql_membership`。我也得到了例外：`Unable to initialize provider. Missing or incorrect schema.`

使用相同的设置，但连接到远程数据库一切正常。

```
<add name="MySqlSessionStateProvider" type="MySql.Web.SessionState.MySqlSessionStateStore, MySql.Web, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" applicationName="/" autogenerateschema="true" connectionStringName="MySqlMembershipConnection" /> 
```

有谁知道问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T06:54:12.110

我认为问题在于配置。请参阅以下帖子：

1.  [无法初始化提供程序。缺少或不正确的架构。](http://bugs.mysql.com/bug.php?id=53076)
2.  [http://forums.asp.net/t/1557879.aspx/1](http://forums.asp.net/t/1557879.aspx/1)
3.  [无法初始化提供程序。缺少或不正确的架构。对于 MySql.Web 连接器](https://stackoverflow.com/questions/2393131/unable-to-initialize-provider-missing-or-incorrect-schema-for-mysql-web-connec)
4.  [无法初始化提供程序。缺少或不正确的架构](https://stackoverflow.com/questions/3699688/unable-to-initialize-provider-missing-or-incorrect-schema)
5.  [无法初始化提供程序。MYSQL 中缺少或不正确的模式](https://stackoverflow.com/questions/6858182/unable-to-initialize-provider-missing-or-incorrect-schema-in-mysql)
6.  [MVC2 MySQL 托管问题？](https://stackoverflow.com/questions/3983622/mvc2-mysql-hosting-issue)

# javascript - Chrome 中的 HTML5 视频在 mp4 下不起作用

> ID：10839396
> 
> 赞同：1
> 
> 时间：2012-05-31T18:43:24.980
> 
> 标签：javascript, html

我正在开发一个简单的网站以在画布上显示视频。视频显示但它只是停留在第一帧，我设置了控件并且自动播放既不显示也不播放视频。

```
<div style="position: absolute; top: 50px; left: 50px;">

<canvas id="canvasOne" width="500" height="300">
Your browser does not support HTML5 Canvas.
</canvas>
</div>

@section Scripts
{
<script src="@Url.Content("~/Scripts/modernizr-2.5.3.js")" type="text/javascript">        </script>
<script type="text/javascript">
    window.addEventListener('load', eventWindowLoaded, false);
    var firstVideo, secondVideo, videoSource
    var videoDiv;
    function eventWindowLoaded() {
        firstVideo = document.createElement("video");
        videoSource = document.createElement("source");
        firstVideo.appendChild(videoSource);
        //secondVideo = document.createElement("video");
        videoDiv = document.createElement('div');
        document.body.appendChild(videoDiv);
        videoDiv.appendChild(firstVideo);
       //videoDiv.appendChild(secondVideo);
        videoDiv.setAttribute("style", "display:none;");
        var videoType = supportedVideoFormat(firstVideo);       
        if (videoType == "") {
            alert("no video support");
            return;
        }
        videoSource.setAttribute("src", "/Content/QualitySample." + videoType);
        videoSource.setAttribute("type", "video/mp4");
        firstVideo.setAttribute("controls", "controls");
        firstVideo.setAttribute("autoplay", "autoplay");
        firstVideo.addEventListener("canplaythrough", videoLoaded, false);
        //secondVideo.setAttribute("src", "/Content/QualitySample." + videoType);
        //secondVideo.setAttribute("controls", "controls");
        //secondVideo.addEventListener("canplaythrough", videoLoaded, false);

    }

    function supportedVideoFormat(video) {
        var returnExtension = "";
        if (video.canPlayType("video/mp4") == "probably" ||
       video.canPlayType("video/mp4") == "maybe") {
            returnExtension = "mp4";
    } else if (video.canPlayType("video/webm") == "probably" ||
   video.canPlayType("video/webm") == "maybe") {
        returnExtension = "webm";
    } else if (video.canPlayType("video/ogg") == "probably" ||
   video.canPlayType("video/ogg") == "maybe") {
        returnExtension = "ogg";
    }

    return returnExtension;

}

function canvasSupport() {
    return Modernizr.canvas;
}

function videoLoaded(event) {

    canvasApp();

}

function canvasApp() {

    if (!canvasSupport()) {
        return;
    }

    function drawScreen() {

        //Background
        context.fillStyle = '#ffffff';
        context.fillRect(0, 0, theCanvas.width, theCanvas.height);
        //Box
        context.strokeStyle = '#000000';
        context.strokeRect(5, 5, theCanvas.width - 10, theCanvas.height - 10);
        //video
        context.drawImage(firstVideo, 60, 50, 200, 200);
        //context.drawImage(secondVideo, 260, 50, 200, 200);

    }

    var theCanvas = document.getElementById("canvasOne");
    var context = theCanvas.getContext("2d");
    //firstVideo.load();
    firstVideo.play();
    //secondVideo.play();
    setInterval(drawScreen, 33);

} 
```

} 当页面加载时，视频显示在画布上并且视频已加载，但没有控件处于活动状态，也没有播放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:19:55.823

MP4 是一种媒体文件类型。但是，MP4 可以支持任意数量的不同编解码器。某些编解码器受专利保护，因此 Chrome 可能无法使用某些编解码器。确保支持您的视频的编解码器。

另见：[http ://news.cnet.com/8301-30685_3-20028196-264.html](http://news.cnet.com/8301-30685_3-20028196-264.html)

编辑：我的意思是“受保护”，因为谷歌不想支付支持编解码器的费用，而不是 Chrome 无法处理该编解码器。

# c# - 事务未连接或断开连接错误

> ID：10839399
> 
> 赞同：1
> 
> 时间：2012-05-31T18:43:30.943
> 
> 标签：c#, sql-server, nhibernate, bulkinsert

我正进入（状态

> “事务未连接，或已断开连接错误”

在执行批量插入（以及其他一些操作）后提交/回滚事务时出错。

```
using(var tran = Session.Session().BeginTransaction(IsolationLevel.Serializable))
    {
       // do something
       fullSession.Session().CreateSQLQuery(query).ExecuteUpdate();// this query bulk insert in a temp db
       // do something else
       tran.Commit()/ tran.RollBack();// if transaction is active and not already rolled back/committed
    } 
```

如果从文件批量插入临时数据库的查询失败，我会在 tran.Commit/rollback 上收到此错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:54:52.153

批量插入是插入语句的组合，因此如果失败，它不会回滚事务，因此如果您真的想捕获错误，请尝试在 BEGIN 和 END 事务中使用 Try 和 catch 块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T08:47:22.903

`System.Data.SqlTypes.SqlDateTime?`在持久化具有类型属性（Nullable）的实体时，我在使用 Nhybernate 时遇到了完全相同的错误。

将属性更改为常规属性可以`System.DateTime?`解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-22T21:51:16.110

我遇到了一些问题，但在我关闭 MS SQL 管理工作室的连接后它就消失了。

# visual-c++ - 如何在编译时检测 DbgHelp 的版本？

> ID：10839400
> 
> 赞同：0
> 
> 时间：2012-05-31T18:43:42.387
> 
> 标签：visual-c++, dbghelp

DbgHelp的[参考手册](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679309%28v=vs.85%29.aspx)很好地列出了所有版本以及它们引入的更改。如何在编译时检测版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T15:56:36.910

[ImagehlpApiVersion](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680163%28v=vs.85%29.aspx)函数检索系统上安装的 DbgHelp 库的版本信息。

要指示构建应用程序的库的版本，请使用[ImagehlpApiVersionEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680167%28v=vs.85%29.aspx)函数。

# c# - 如何处理使用数据库的 WCF 服务中的并发性

> ID：10839406
> 
> 赞同：1
> 
> 时间：2012-05-31T18:44:19.303
> 
> 标签：c#, .net, database, wcf, concurrency

你好 :) 我对 WCF 很陌生，这是我第一次处理任何类型的并发，所以请多多包涵。

我想要做的是拥有一个服务实例，它将被多个客户端（不超过 10 或 11 个）使用。我希望客户端在使用服务操作时相互等待。这样我应该避免数据库中条目的错误更新。这些操作足够快，因此性能不会受到太大影响。现在我不确定，但据我了解，为了实现我应该使用带有 ConcurrencyMode.Single 的单例服务，对吗？欢迎任何有关如何实现该目标的全面阅读。

我也知道可能有更好、更优雅的并发处理方式，但我的时间非常短，而且如果我理解正确的话，这种方法似乎是最简单和最快的实现方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:21:44.993

您可以在这里做的最糟糕的事情是单例服务。

数据库引擎（嗯，大多数）非常适合并发调用。你想限制他们的并发功能做什么？

对您来说最好的方法是每次调用的无状态 WCF 服务。
为了数据一致性，请使用[乐观并发](http://en.wikipedia.org/wiki/Optimistic_concurrency_control)。为了简化这一点，您可以使用任何 ORM，例如[Entity Framework](http://msdn.microsoft.com/en-us/library/bb399567.aspx)。

# arrays - 改变序列中的重复

> ID：10839407
> 
> 赞同：0
> 
> 时间：2012-05-31T18:44:20.210
> 
> 标签：arrays, r

我有以下向量

```
328 328 328 328 337 338 339 340 341 342 343 344 345 346 347 348 349 349 349 349 349 349 349 349 349 349 349 349 
```

如您所见，328 重复了 4 次，349 重复了 12 次。我想知道在 R 中重新编号 328 的最有效方法是什么，使其为 328,329,330,331，而 349 将是 349,350,351，...

我可以使用 for 循环来做到这一点，但我觉得 R 有一种更“以 R 为中心”的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:02:06.697

如果这是数据

```
x = c(rep(328, 4), rep(349, 12)) 
```

您可以对其进行游程编码表示

```
r = rle(x) 
```

然后创建等于每次运行长度的序列

```
s = lapply(r$lengths, seq_len) 
```

最后将这些添加到原始数据中（减 1，因为在上一步中创建的序列从 1 开始）

```
unlist(Map("+", s, r$values - 1) 
```

所以

```
> r = rle(x)
> unlist(Map("+", lapply(r$lengths, seq_len), r$values - 1))
 [1] 328 329 330 331 349 350 351 352 353 354 355 356 357 358 359 360 
```

（不过，@DWin 的使用`seq`更干净）。`x`如果还没有按顺序排列，那么对 first 的值进行排序是有意义的。

```
> (x = sample(x))
 [1] 349 349 349 349 349 349 328 349 349 328 328 328 349 349 349 349
> o = order(x)
> r = rle(x[o])
> unlist(Map(seq, r$values, length=r$length))[order(o)]
 [1] 349 350 351 352 353 354 328 355 356 329 330 331 357 358 359 360 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:06:46.597

```
# Demonstrating efficient way to take comma-less sequence as input from console.

> x <- scan()
 1: 328 328 328 328 337 338 339 340 341 342 343 344 345 346 347 348 349 349 349 349 349 349 349 349 349 349 349 349
29: 
Read 28 items

# Solution
unlist( mapply(seq, rle(x)$values, length=rle(x)$lengths ) )
# [1] 328 329 330 331 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357
# [26] 358 359 360 
```

`rle`看起来确实是一个明显的起点，但`mapply`直到我看到@MartinMorgan 的`Map`解决方案我才想到这种方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:09:19.177

如果`vec`你的序列有重复

```
Reduce(function(x,y) if (y %in% x) c(x, max(x) + 1) else c(x, y), vec[order(vec)]) 
```

# python - 如何在 django 的单元测试期间禁用翻译？

> ID：10839408
> 
> 赞同：11
> 
> 时间：2012-05-31T18:44:27.670
> 
> 标签：python, django, unit-testing

我正在使用[Django 国际化](https://docs.djangoproject.com/en/1.3/topics/i18n/internationalization/)工具从我的应用程序中翻译一些字符串。代码如下所示：

```
from django.utils.translation import ugettext as _
def my_view(request):
    output = _("Welcome to my site.")
    return HttpResponse(output) 
```

然后，我正在使用[Django 测试客户端](https://docs.djangoproject.com/en/1.3/topics/testing/#module-django.test.client)编写单元测试。这些测试向视图发出请求并比较返回的内容。

如何在运行单元测试时禁用翻译？我的目标是这样做：

```
class FoobarTestCase(unittest.TestCase):
    def setUp(self):
        # Do something here to disable the string translation. But what?
        # I've already tried this, but it didn't work:
        django.utils.translation.deactivate_all()
    def testFoobar(self):
        c = Client()
        response = c.get("/foobar")
        # I want to compare to the original string without translations.
        self.assertEquals(response.content.strip(), "Welcome to my site.") 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-04T16:37:20.143

在测试客户端上调用`.get()`或`.post()`将运行所有配置的中间件。这意味着它也会运行，`LocaleMiddleware`它会调用`translation.get_language_from_request()`.`translation.activate(language)`

这意味着在使用测试客户端编写测试时，当前活动的语言会被忽略并丢弃。换句话说，以下代码不起作用：

```
def testFoobar(self):
    c = Client()
    # This will not work.
    translation.deactivate_all()
    # This will not work either.
    translation.activate('en-us')
    # The next call will override the earlier activate/deactivate calls.
    response = c.get("/foobar") 
```

有几个解决方案：

1.  在会话对象上设置所需的语言。
2.  在 cookie 中设置所需的语言。
3.  发送`HTTP_ACCEPT_LANGUAGE`标头。
4.  环境`settings.LANGUAGE_CODE`

来源（来自 Django 1.4，但自 1.1 或更早版本以来几乎没有变化）：

*   [`django.utils.translation.get_language_from_request()`](https://github.com/django/django/blob/stable/1.4.x/django/utils/translation/trans_real.py#L366)
*   [`django.middleware.locale.LocaleMiddleware.process_request()`](https://github.com/django/django/blob/stable/1.4.x/django/middleware/locale.py#L20)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-10T06:58:08.137

我用方法 4 解决了同样的问题。来自@Denilson Sá 的回答。事实证明，这不需要任何特定于测试的设置文件，并且可以使用 django 提供的装饰器或上下文管理器在每个测试的基础上进行定义（请参阅[覆盖设置](https://docs.djangoproject.com/en/dev/topics/testing/tools/#overriding-settings)）。

它可以这样使用：

```
from django.test import TestCase, override_settings

class MyTest(TestCase):
    @override_settings(LANGUAGE_CODE='en-US', LANGUAGES=(('en', 'English'),))
    def test_mypage(self):
        // ... 
```

装饰器也可以应用于整个 TestCase 子类，或者对于更细粒度的控制，还有一个上下文管理器（参见上面链接的文档）。

这对我来说很常见，我还定义了：

```
english = override_settings(
    LANGUAGE_CODE='en-US',
    LANGUAGES=(('en', 'English'),),
) 
```

所以现在我可以简单地`@english`在需要它的测试用例上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:51:29.737

我认为将语言强制设置为单元测试的已知设置会更有意义。这意味着您正在测试更接近实际实现的东西。

要激活特定语言，您可以在设置中执行此操作：

```
from django.utils.translation import activate
...
activate('en-en') 
```

# c# - 没有抽象方法的抽象类

> ID：10839412
> 
> 赞同：1
> 
> 时间：2012-05-31T18:44:44.300
> 
> 标签：c#, abstract-class

参考C#，可以定义不包含抽象方法的抽象类，那么将类定义为抽象有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:46:16.410

具有属性的`abstract`类可用于表示继承中的基类。抽象类不能被实例化。这可能很合适，因为我们不想让其他人为我们的基类创建对象。

您可以定义抽象类来定义对象的抽象性质。例如：动物有眼睛。Dog 可以从 Animal 继承，因此它会有眼睛。我们可以创建一个 Dog 对象。但是我们不想创建 Animal 对象。

来自[msdn](http://msdn.microsoft.com/en-us/library/ms173150.aspx) ,

> 抽象类的目的是提供多个派生类可以共享的基类的通用定义。例如，一个类库可以定义一个抽象类，用作其许多函数的参数，并要求使用该库的程序员通过创建派生类来提供他们自己的类实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:46:36.243

> 参考 C#，可以定义不包含抽象方法的抽象类

是的，一点没错

> 那么将类定义为抽象有什么用？

主要是为了传达应该派生类的事实。通过使构造函数受保护可以实现类似的效果：没有人将能够创建类的实例而不继承它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:47:28.750

将类定义为抽象可防止它被直接实例化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T18:50:23.593

基本上，我使用的经验法则是，当必须继承才能实例化类时，您应该始终定义抽象类。因为抽象类本身不能。

例如。假设您有一个 Building 类，它是抽象的。然后必须通过派生类实例化它，例如银行或房屋。Building 类中没有抽象方法的事实与它是否抽象无关。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-02T16:38:28.777

一个简单的规则是，当你觉得这个特定的类如果单独存在没有意义时，就创建抽象类**（无论它包含或不包含抽象方法） ......**

因此使用抽象类时

*   你不允许抽象类的对象的实例化，因为它对于那个目的来说太笼统了
*   但同时允许你给出一些可以被其他类继承的方法的具体实现，这对你设计的层次结构很有帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T18:47:49.487

您可以将一个类定义为抽象类并且其中没有方法......但是，您将无法对它做任何事情，因为它只能由其他类继承而不能自行实例化。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-31T18:49:44.733

> 1.  您不能创建抽象类的实例。
> 2.  abstract 关键字使您能够创建不完整且必须在派生类中实现的类和类成员。
> 3.  抽象类的目的是提供多个派生类可以共享的基类的通用定义。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-31T18:49:49.543

抽象类可以包含抽象方法以及普通（具体方法）。

抽象类的目的是用作可以被其他类继承的基类。这样做的好处是多个子类可以利用基类（抽象类）中的方法，而不必再次重写相同的方法。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-31T18:52:46.210

您定义一个类`abstract`以*保留*定义抽象成员的可能性。

确实可以避免这样做，但在这种情况下，它的意义就更少了。

可以做其他类似的问题：

> 为什么我可以定义一些函数`virtual`，即使没有人会覆盖它。?

当然，这些是不同的概念，但提出问题的想法是相同的。

希望这可以帮助。

# java - 是否可以将变量分配给两种类型？

> ID：10839413
> 
> 赞同：3
> 
> 时间：2012-05-31T18:44:47.277
> 
> 标签：java

出于好奇，是否可以将变量分配给两种类型？

由于我在这个问题上没有直截了当的技术术语，让我澄清一下。通常你会有一个静态和动态类型：

```
Animal a = new Dog(); 
```

动态类型必须继承静态类型的地方：

```
public class Dog extends Animal {...} 
```

但是是否可以确保动态类型扩展/实现多种类型？

所以`Dog`必须扩展`Animal`-class 并实现接口？

我会想象这样的事情：

```
Animal [implements Happy] a = new Dog(); 
```

我很确定这只是疯狂的谈话，但这可能吗？如果没有，最接近的选择是什么？

我认为这仅在确保变量属于您自己制作的接口和您无法编辑的类的情况下才有意义。

我能想到的一种方法是通过每次使用它时强制转换来确定它的运行时间：

```
try {
    @SuppressWarnings("unused")
    Animal a = (Happy) new Dog();
} catch (ClassCastException e) {
    //Is not of type Happy
}

//Using a method from the Happy-interface
try {
    ((Happy)a).smile();
} catch (ClassCastException e) {
    //Is not of type Happy
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:48:09.710

不，这是不可能的。您可以考虑一些解决方法，例如：

```
abstract class HappyAnimal extends Animal implements Happy 
```

然后使用该类型。当然，您的类必须扩展，如果它们直接扩展和实现`HappyAnimal`，它将不起作用。`Animal``Happy`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T18:50:12.927

您可以通过在您想要签入的类或方法中声明类型参数来使用泛型：

```
<A extends Animal & Happy> //put in class/method declaration

...

A a = new Dog(); 
```

这将允许您在编译时进行类型检查，而无需使用任何其他`abstract`类。

# java - 错误：“必须在添加内容之前调用 requestFeature()”，尽管它是在 setContentView() 之前调用的

> ID：10839414
> 
> 赞同：1
> 
> 时间：2012-05-31T18:45:07.277
> 
> 标签：java, android, android-activity, actionbarsherlock

我有一个使用 ActionBarSherlock 的活动。现在我想在该操作栏中显示一个不确定的进度，并按照 ActionBarSherlock 中的示例进行操作：

```
public class MainMenu extends SimpleWebActivity implements BackgroundBrowserReciever {
    private Boolean windowFeatureCalled;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
        super.onCreate(savedInstanceState);

        this.windowFeatureCalled = true;
        setContentView(R.layout.main_menu);
                ....
    } 
```

SimpleWebActivity 是扩展 SherlockActivity 的抽象类。

但是当我尝试加载该活动时，我收到以下错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.dalthed.tucan/com.dalthed.tucan.ui.MainMenu}: android.util.AndroidRuntimeException: requestFeature() must be called before adding content 
```

为什么会发生此错误，即使我在调用 setContentView 之前请求了 WindowFeature？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:00:56.407

在您的 Super.onCreate 之后移动它，这应该可以解决您的问题。

```
 @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState);

//HERE
 requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

            setContentView(R.layout.main_menu);
  this.windowFeatureCalled = true;
                    ....
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:49:26.570

让我们试试这个它对我有用

```
@Override
    public void onCreate(Bundle savedInstanceState) {

//HERE
        requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);

        super.onCreate(savedInstanceState);

        setContentView(R.layout.main_menu);

         this.windowFeatureCalled = true;
                ....
    } 
```

# facebook - Facebook - 尽管尝试了所有解决方案，但没有缩略图

> ID：10839419
> 
> 赞同：0
> 
> 时间：2012-05-31T18:45:28.080
> 
> 标签：facebook, thumbnails

我以前从未遇到过让 Facebook 显示共享链接的缩略图的问题，但对于我刚刚启动的网站 xmlplayground.com，它只是拒绝。

最奇怪的是，Facebook Lint 实用程序说我的页面很好，并向我显示图像！

我从各种帖子中的建议中尝试了很多：

*   添加 og:image 元标记
*   添加旧的 rel="image_src" 链接标签
*   在我的 html 标签中声明 og 命名空间
*   确保图像的路径干净且友好
*   不使用 PNG

我想知道是不是因为图像实际上并没有出现在页面中的 IMG 标签中，但即使我添加它，也没有乐趣。

有什么想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:11:03.497

好的，所以这需要很长时间才能弄清楚。我遵守了所有规则，Facebook Linter 说一切都很好。它甚至给我看了我的照片！

最终我读到图片在两个维度上都必须至少为 200 像素。

这很奇怪，因为我经常分享我的其他网站的链接，这些网站的图片比这小，但它们仍然出现。

无论如何，如果有人无法将他们的照片放到 Facebook 链接上，请检查尺寸。

# c# - 拖动方向wpf？

> ID：10839421
> 
> 赞同：1
> 
> 时间：2012-05-31T18:45:47.887
> 
> 标签：c#, wpf

在 wpf 中使用拖放时，有没有办法确定用户是向左拖动还是向右拖动？我在 wpf 中使用标准的拖动事件，例如 OnDragStarted、OnPreviewDragEnter 等...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:50:21.573

您可以通过计算`DragEventArgs.GetPosition()`每半秒的差异来轻松计算出这一点。

返回相对于指定的放置点

它返回一个`Point`对象，该对象具有可用于确定方向的 X 和 Y 坐标。

# sql-server - SQL / LINQ to SQL 翻译验证

> ID：10839426
> 
> 赞同：1
> 
> 时间：2012-05-31T18:45:59.897
> 
> 标签：sql-server, linq-to-sql

如果我的翻译正确，有人能告诉我吗？这是我的 SQL：

```
CASE WHEN p.prioid IN ('1 - Routine', '6 - Planned Outage') THEN 'Planned' ELSE 'Unplanned' END as Planning 
```

这是我的 Ling to SQL：

```
List <string> routines = new List<string>();
routines.Add("1 - Routine");
routines.Add("6 - Planned Outage");

Planning = routines.Contains(pri.Prioid) ? "Planned" : "UnPlanned"; 
```

# google-chrome - Extjs 命名空间和 TabReorderer

> ID：10839431
> 
> 赞同：0
> 
> 时间：2012-05-31T18:46:10.373
> 
> 标签：google-chrome, extjs, namespaces, xmlhttprequest

我正在尝试使用“ux”文件夹中提供的 Ext.ux.TabReorderer 插件，但无法让它在命名空间中工作。

当我正常执行此操作时（未定义命名空间），它工作得很好。（如下所示。）

```
var tabPanel = Ext.create('Ext.tab.Panel', {
renderTo: Ext.Element.get('tabs1'),
        bodyStyle: 'padding: 5px',
        plugins: Ext.create('Ext.ux.TabReorderer'),
        items: [{
            xtype: 'panel',
            title: 'Tab 1',
            html : 'Test 1',
            closable: true
        }, {
            xtype: 'panel',
            title: 'Tab 2',
            html : 'Test 2',
            closable: true
        },{
            xtype: 'panel',
            title: 'Tab 3',
            html : 'Test 3',
            closable: true
        },{
            xtype: 'panel',
            title: 'Tab 4',
            html : 'Test 4',
            closable: true
        }]
    }); 
```

但是当我把它放在命名空间中时它不起作用。

```
Ext.define('MyApp.Layout.CenterTabs', {        extend: 'Ext.tab.Panel',
        bodyStyle: 'padding: 5px',
        plugins: Ext.create('Ext.ux.TabReorderer'),
        items: [{
            xtype: 'panel',
            title: 'Tab 1',
            html : 'Test 1',
            closable: true
        }, {
            xtype: 'panel',
            title: 'Tab 2',
            html : 'Test 2',
            closable: true
        },{
            xtype: 'panel',
            title: 'Tab 3',
            html : 'Test 3',
            closable: true
        },{
            xtype: 'panel',
            title: 'Tab 4',
            html : 'Test 4',
            closable: true
        }]
    }); 
```

在 Chrome 中我得到错误：

> XMLHttpRequest 无法加载 [省略此部分]/extjs-4.1.0/examples/ux/TabReorderer.js?_dc=1338489585629。仅 HTTP 支持跨源请求。

为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T02:47:19.530

首先，您看到的错误与您使用的代码无关。看起来可能是某种不使用网络服务器的脚本错误，我不知道。

话虽如此，您正在使用 Ext.define 错误[http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-define](http://docs.sencha.com/ext-js/4-1/#!/api/Ext-method-define)。您在示例中所做的是将共享对象放在原型上，这通常不应该做。

相反，你想要类似的东西：

```
Ext.define('MyApp.Layout.CenterTabs', {
    extend : 'Ext.tab.Panel',
    //Strings can be put on the prototype and is good practice too
    //because it allows for easy configing  
    bodyStyle : 'padding: 5px',
    initComponent : function() {
        Ext.apply(this, {
            plugins : Ext.create('Ext.ux.TabReorderer'),
            items : [{
                xtype : 'panel',
                title : 'Tab 1',
                html : 'Test 1',
                closable : true
            }, {
                xtype : 'panel',
                title : 'Tab 2',
                html : 'Test 2',
                closable : true
            }, {
                xtype : 'panel',
                title : 'Tab 3',
                html : 'Test 3',
                closable : true
            }, {
                xtype : 'panel',
                title : 'Tab 4',
                html : 'Test 4',
                closable : true
            }]
        })

        this.callParent()
    }
});

var tabPanel1 = Ext.create('MyApp.Layout.CenterTabs', { renderTo: Ext.Element.get('tabs1') }),
    tabPanel2 = Ext.create('MyApp.Layout.CenterTabs', { renderTo: Ext.Element.get('tabs2') })
//Now the plugin instances will not be shared between the two variables. 
```

# php - 使用 PostgreSQL 为 PHP 上的 IN / =ANY 子句参数化数组

> ID：10839432
> 
> 赞同：2
> 
> 时间：2012-05-31T18:46:12.167
> 
> 标签：php, postgresql, parameterized-query

我需要在参数化查询中传递一个字符串数组。我尝试了以下方法，但它根本不起作用。

```
$params = array( array('bob','andrew','larry') );
pg_query_params($conn, 'SELECT * FROM table1 WHERE field = ANY($1)', $params) 
```

我已经看到将数组转换为字符串然后使用 string_to_array 将输入转换为数据库端的数组的解决方案，但是由于这些字符串是从用户输入的，即使我使用了分隔符而不是逗号。如果可能的话，我宁愿为此使用更清洁的解决方案。

有没有办法让这个查询参数化并将一个数组传递给它，而无需将数据转换为字符串？

顺便说一句，我使用的是 PostgreSQL 8.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:57:31.277

`pgsql.so`链接到`libpq`的没有此功能。

在内部，无论如何它都需要将数组序列化为字符串。

`libpqtypes`内置了此功能，但我现在知道任何`PHP`使用它的库。

# javascript - 概念 - `this` 在 addEventListener 回调中指的是什么？

> ID：10839433
> 
> 赞同：1
> 
> 时间：2012-05-31T18:46:13.267
> 
> 标签：javascript

此功能不起作用..无法弄清楚为什么...没有错误...但是当我单击它时图像不会缩小。

```
image_element.addEventListener( "click", function( )
{ 
    this.style.width = ( parseInt( this.style.width ) - 1 ) + 'px';
    this.style.height = ( parseInt( this.style.height ) - 1 ) + 'px';
}, false ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:48:38.223

`this`，在 eventListener 的上下文中，是[引发事件的]元素。您可能遇到的一个问题是`this.style.width`可能尚未指定...

记录/提醒价值`this.style.width`并首先查看其中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:50:56.923

```
image_element.addEventListener( "click", function( )
{ 
    var iWidth  = parseInt(this.style.width.substr(0, this.style.width.length-2), 10);
    var iHeight = parseInt(this.style.height.substr(0, this.style.height.length-2), 10);

    this.style.width  = (parseInt(iWidth  - 1, 10)) + 'px';
    this.style.height = (parseInt(iHeight - 1, 10)) + 'px';
}, false ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:00:10.130

关键字`this`是指谁触发了事件，在这种情况下是`DOM Element`

但是您的问题是因为样式是`undefined`在您没有初始化它的时候。所以你应该使用“ComputedStyle”来获取当前值，即使你没有初始化它。

```
image_element.addEventListener( "click", function( )
{ 
    this.style.width = ( getStyle(this,'width',true) - 1 ) + 'px';
    this.style.height = ( getStyle(this,'height',true) - 1  ) + 'px';
}, false ); 
```

将此功能附加到您的文档：

```
/** Get the current computed style of an element */
function getStyle(element, strCssRule, returnInt){
    if(typeof element==="string"){element=document.getElementById(element);}
    var strValue = "";
    if(document.defaultView && document.defaultView.getComputedStyle){
        strValue = document.defaultView.getComputedStyle(element, "").getPropertyValue(strCssRule);
    }
    else if(element.currentStyle){
        strCssRule = strCssRule.replace(/\-(\w)/g, function (strMatch, p1){ return p1.toUpperCase(); });
        strValue = element.currentStyle[strCssRule];
    }
    if(returnInt===true){ strValue=parseInt(strValue); }
    return strValue;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T19:04:25.200

使用 jQuery：

```
function initOrbs()
{
    var image_element = document.createElement( 'img' );
        $(image_element).addClass("orb");
        image_element.id = icon_array[ initOrbs.index ];
        image_element.speed = icon_array[ initOrbs.index + 1 ];
        if(image_element.speed  > 10000 )
        {
            image_element.speed  = image_element.speed / 10;
            $(image_element).width(20);
            $(image_element).height(20);
        }
        image_element.src = '/develop/foo/favicons/' + icon_array[ initOrbs.index ];  
        image_element.style.top = '-80px';
        image_element.style.left = random( 100, 800) + 'px';
        sky.appendChild( image_element );
        $(image_element).click( function()
        { 
            $(this).width( parseInt( $(this).width() ) - 1 );
            $(this).height( parseInt( $(this).height() ) - 1 );
        });
        moveLinear( image_element );
        initOrbs.index += 2;
} 
```

# c# - 两个线程 - Console.out 的两个流

> ID：10839434
> 
> 赞同：3
> 
> 时间：2012-05-31T18:46:14.053
> 
> 标签：c#

全部

我有一个库，而不是我的，所以它不能被修改。这个库有两个方法，我们称它们为 Method_1() 和 Method_2()。在这些方法中称为 Console.WriteLine("...")

我有课

```
public class CustomBackgroundWorker: BackgroundWorker
{
         private readonly StringBuilder logBuilder;

         public CustomBackgroundWorker ()
         {
             logBuilder = new StringBuilder ();
             TextWriter outStream = new StringWriter (logBuilder);
             Console.SetOut (outStream);
         }

         public string GetLogs ()
         {
             return logBuilder.ToString ();
         }
} 
```

它创建了这个类的两个实例。库中的每个实例执行方法。但是输出只保存在一个流中，因为 SetOut() 方法是全局工作的。是否可以将来自不同线程的输出重定向到单独的流？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:55:00.220

你想做的事情并不容易。`Console.WriteLine()` *等*是`static`因为它们是共享的；**调用这些方法的**任何线程都将写入标准输出流。

将输出拆分为单独文件的最简洁方法是创建自己的`TextWriter`包装多个输出文件的文件，并将其设置为标准输出。然后，让每个线程在您的 中注册自己`TextWriter`，指定所需的输出文件。每当调用进入编写器时，它都会查看哪个线程进行了调用，然后写入适当的文件。

这显然需要一些工作才能正确（因为可能会出现许多竞争条件和资源共享问题），但可以让你做你想做的事。

**编辑**：这是一个这样的作家可能是什么样子的样本，以及如何使用它。**这个类是不完整的（例如它目前只支持`WriteLine()`s `string`），并且可能还存在其他错误。**

```
public class ThreadAwareStreamWriter : TextWriter
{
    private ConcurrentDictionary<int, TextWriter> threadWriterMap;
    private TextWriter defaultWriter;

    public ThreadAwareStreamWriter()
    {
        this.threadWriterMap = new ConcurrentDictionary<int, TextWriter>();
        this.defaultWriter = Console.Out;
    }

    public TextWriter RegisterThreadWriter(TextWriter threadWriter)
    {
        int threadId = Thread.CurrentThread.ManagedThreadId;

        TextWriter oldWriter;
        this.threadWriterMap.TryGetValue(threadId, out oldWriter);
        this.threadWriterMap[threadId] = threadWriter;

        return oldWriter;
    }

    public void DeregisterThread()
    {
        TextWriter threadWriter;
        if (this.threadWriterMap.TryRemove(Thread.CurrentThread.ManagedThreadId, out threadWriter))
        {
            threadWriter.Close();
        }
    }

    public override Encoding Encoding
    {
        get 
        {
            TextWriter threadWriter;
            if (this.threadWriterMap.TryGetValue(Thread.CurrentThread.ManagedThreadId, out threadWriter))
            {
                return threadWriter.Encoding;
            }

            return this.defaultWriter.Encoding;
        }
    }

    public override void WriteLine(string value)
    {
        TextWriter threadWriter;
        if (this.threadWriterMap.TryGetValue(Thread.CurrentThread.ManagedThreadId, out threadWriter))
        {
            threadWriter.WriteLine(value);
            return;
        }

        if (this.defaultWriter != null)
        {
            this.defaultWriter.WriteLine(value);
        }
    }
} 
```

一个示例程序：

```
public static void Main(string[] args)
{
    ThreadAwareStreamWriter writer = new ThreadAwareStreamWriter();
    Console.SetOut(writer);

    Thread t = new Thread(o =>
    {
        ThreadAwareStreamWriter tWriter = (ThreadAwareStreamWriter)o;
        tWriter.RegisterThreadWriter(new StreamWriter(File.Open("test.txt", FileMode.Create, FileAccess.ReadWrite)));
        Console.WriteLine("Hello from another thread");

        tWriter.DeregisterThread();
    });

    t.Start(writer);

    Console.WriteLine("Hello");
    Console.ReadLine();
} 
```

这会将“Hello”打印到控制台，并将“Hello from another thread”打印到文件“test.txt”。

# .net - 访问列表视图之外的标签

> ID：10839438
> 
> 赞同：0
> 
> 时间：2012-05-31T18:46:26.223
> 
> 标签：.net, label

我在列表视图中使用标签，在后面的代码中，我想在单击按钮时访问标签并
设置其文本。但是当我单击按钮时，nullretrace `exception` 被抛出

```
**.aspx Code:**

      <asp:ListView ID="ListView1" runat="server" 
      `onselectedindexchanged="labeltext"` 
            onselectedindexchanging="la">
        <ItemTemplate>  
            <asp:Label ID="Label2" runat="server" Text="Label"></asp:Label>
      <asp:Button ID="Button1" CommandName="select" runat="server" Text="Button" />

        </ItemTemplate>
          </asp:ListView>

**.aspx.cs:**
              protected void labeltext(object sender, EventArgs e)
        {
             Label list = sender as Label;

            ListViewItem item = (ListViewItem)list.NamingContainer;
            Label lable = item.FindControl("Label2") as Label;
            lable.Text = "you click me";
        }

        protected void la(object sender, ListViewSelectEventArgs e)
        {

            Label1.Text = "rr";

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:52:33.660

尝试这个

```
ListView list = (ListView) sender;
Label lable = list.FindControl("label2") as Label; 
```

# php - PHP——模糊数组搜索？

> ID：10839445
> 
> 赞同：0
> 
> 时间：2012-05-31T18:46:57.333
> 
> 标签：php, arrays, search, fuzzy-search

所以，想象一个非常大的句子数组，比如百科全书文章或书籍。基本上，我想搜索这个数组，并且智能地——有点像谷歌搜索——返回匹配的键。这意味着单词在输入中可能是乱序的，或者在字符串中不存在，等等。

我可以想出很多方法来实现这一点，但我想知道是否已经创建了任何预构建的函数（请不要使用类——我想保持这个简单）。有谁知道这样的事情？如果可能的话，我宁愿不重新发明轮子。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:53:27.060

PHP [Levenstein 距离函数](http://php.net/manual/en/function.levenshtein.php)可用于构建您想要的。他们会在单词之间进行模糊匹配，您可以通过一些代码将其扩展为模糊搜索。

# vb.net - 这个数组中存储的 RGB 值在哪里？

> ID：10839446
> 
> 赞同：1
> 
> 时间：2012-05-31T18:47:00.113
> 
> 标签：vb.net, arrays, rgb, lockbits

我一直在创建的控件中使用以下子控件，以便更快地修改位图中的像素：

```
 Protected Sub LockForMemory()
        idata = ime.LockBits(New Rectangle(0, 0, ime.Width, ime.Height), ImageLockMode.WriteOnly, ime.PixelFormat)
        ipoint = idata.Scan0

        ibytes = Math.Abs(idata.Stride) * ime.Height
        ReDim irgbvalues(ibytes - 1)
        System.Runtime.InteropServices.Marshal.Copy(ipoint, irgbvalues, 0, ibytes)
    End Sub 
```

所有这些都有效，稍后当我在操作后检索实际图像时，它也可以正常工作。问题在于设置那些实际像素。

这个数组是什么？我知道它充满了`Integers`但每个指数代表什么？一开始我以为是这样设置的：

***Array-> [R of Pixel 0,0][G of Pixel 0,0][B of Pixel 0,0][R of Pixel 2,0][G of Pixel 2,0][B of Pixel 2,0 ]***

然而，这似乎并不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:01:13.070

这取决于 ime.PixelFormat 的值。每个像素可以表示为 RGB、ARGB、调色板查找索引等。

[http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.pixelformat.aspx)

此外，您需要注意字节顺序。字节可能是 little-endian 字节顺序，但这取决于您的目标平台。

对于 Format32bppArgb，这可能会对格式有所帮助：

[PixelFormat.Format32bppArgb 似乎有错误的字节顺序](https://stackoverflow.com/questions/8104461/pixelformat-format32bppargb-seems-to-have-wrong-byte-order)

# c++ - DLL 中的 WINAPI 函数上的链接器错误 LNK2001、标头和库都存在，我缺少什么？

> ID：10839447
> 
> 赞同：1
> 
> 时间：2012-05-31T18:47:00.927
> 
> 标签：c++

我有一个尝试在 VS2010 Express 中编译的简单 DLL。DLL的代码如下：

```
#pragma comment(linker, "/EXPORT:PlusOne=_PlusOne@4")

#include <windows.h>
#include <commctrl.h>

extern "C"  __declspec(dllexport) int PlusOne(int inNum)
{
    inNum++;
    return inNum;
};

extern "C"  __declspec(dllexport) LRESULT CALLBACK OwnerDrawButtonProc(HWND hWnd, UINT uMsg, WPARAM wParam,
                               LPARAM lParam, UINT_PTR uIdSubclass, DWORD_PTR dwRefData)
{
//further processing will go here
   return DefSubclassProc(hWnd, uMsg, wParam, lParam);
}; 
```

__stdcall 在项目选项中被选中

plusOne 函数本身编译得很好，但第二个函数不能。

DefSubclassProc 在 commctrl.h 中声明，但我在函数上收到错误，包括搜索的库（包括该函数所在的 commdlg32）的完整错误文本如下：

```
1>  Searching libraries
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\winmm.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\kernel32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\user32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\gdi32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\winspool.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\comdlg32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\advapi32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\shell32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\ole32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\oleaut32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\uuid.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\odbc32.lib:
1>      Searching C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\lib\odbccp32.lib:
1>      Searching c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\MSVCRT.lib:
1>      Searching c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\lib\OLDNAMES.lib:
1>  
1>  Finished searching libraries
1>dlltest.obj : error LNK2001: unresolved external symbol _DefSubclassProc@16
1>s:\documents\my documents\visual studio 2010\Projects\dlltest\Release\dlltest.dll : fatal error     LNK1120: 1 unresolved externals 
```

看起来它找不到函数，但库和头文件存在，所以我不明白为什么。

顺便说一句，代码的动机是我在 vba 中子类化一个窗口，但是在 vba 中拥有 windowprocedure 非常不稳定，所以我想尝试将它移动到一个 dll 中。

请帮助我了解这里出了什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:49:46.840

“Comctl32.lib”（不是“commdlg32.lib”）是这个函数“存在”的地方。

请参阅 MSDN： http: [//msdn.microsoft.com/en-us/library/windows/desktop/bb776403 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776403(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:49:08.320

你试过链接反对`Comctl32.lib`吗？

[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776403%28v=vs.85%29.aspx)说这是函数所在的库。

转到**项目设置 -> 链接器 -> 输入 -> 附加依赖**项并在`Comctl132.lib`那里添加。

# ios - iOS：Xcode：架构：armv7 与 armv6

> ID：10839448
> 
> 赞同：0
> 
> 时间：2012-05-31T18:47:14.873
> 
> 标签：ios, xcode, sharekit, armv7

我有一个两年前在 iOS 2.0 出现时创建的项目。该应用程序本身一直在成功更新并且运行良好。到目前为止，在 Xcode 中，在架构设置中，我有“armv7 arm6”，我的部署是 iOS 3.0。

最近，我将 Facebook (ShareKit) 集成到应用程序中，它需要 iOS 4.0 或更高版本，只需“arm7”。当我将设置更改为这些设置并创建二进制文件时，Application Loader 会拒绝上传并显示以下消息：

```
iPhone/iPod Touch: application executable is missing a required architecture.  At least one of the following architecture(s) must be present: armv6 
```

如果我将它改回“armv7 arm6”，那么由于 Facebook (ShareKit) 的要求，该应用程序将无法运行。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:30:18.517

[ShareKit 2.0](https://github.com/ShareKit/ShareKit/)目前可以在这两种架构上运行。（上周增加了对armv6的支持）

然而推荐的部署目标是 4.0，尽管使用一些调整你可能会在目标设置为 iOS 3.0 或 3.1 的情况下编译它，[这里描述了这些调整之一](https://github.com/ShareKit/ShareKit/pull/127)

如果您决定使用[ShareKit 2.0](https://github.com/ShareKit/ShareKit/) ，请务必仔细按照[安装说明进行操作。](https://github.com/ShareKit/ShareKit/wiki/Installing-sharekit)由于它最近发生了很多变化，最好的办法可能是从头开始阅读它。

# c# - 清理 XML LINQ 查询

> ID：10839450
> 
> 赞同：1
> 
> 时间：2012-05-31T18:47:17.107
> 
> 标签：c#, linq, linq-to-xml

这是这个问题的一个分支[Stuck on basic Linq to XML query](https://stackoverflow.com/questions/10836330/stuck-on-basic-linq-to-xml-query)

我正在努力提高编写 LINQ 和学习 LINQ to XML 的能力。LINQ 查询返回预期的结果，但代码看起来并不干净。有没有更好的写法？

**XML**

```
 <ApiResponse xmlns="http://api.namecheap.com/xml.response" Status="OK">
        <Errors/>
        <Warnings/>
        <RequestedCommand>namecheap.domains.check</RequestedCommand>
        <CommandResponse>
            <DomainCheckResult Domain="gooaagle.com" Available="true"/>
        </CommandResponse>
        <Server>WEB1-SANDBOX1</Server>
        <GMTTimeDifference>--4:00</GMTTimeDifference>
        <ExecutionTime>0.859</ExecutionTime>
    </ApiResponse> 
```

**C＃**

```
XNamespace ns = "http://api.namecheap.com/xml.response";
var response = (
    from r in doc.Elements()
    select new
    {
        Errors = r.Element(ns + "Errors").Value,
        Warnings = r.Element(ns + "Warnings").Value,
        RequestedCommand = r.Element(ns + "RequestedCommand").Value,
        CommandResponse = new
                      {
                         Domain= r.Element(ns + "CommandResponse").Element(ns + "DomainCheckResult").Attribute("Domain"),
                         Available = r.Element(ns + "CommandResponse").Element(ns + "DomainCheckResult").Attribute("Available")
                      },
       Server = r.Element(ns + "Server").Value
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:51:18.957

好吧，您无缘无故地使用查询表达式，并且有不必要的括号和很长的行……但除此之外，它看起来还不错。使其更简洁的一种选择是避免使用匿名类型 - 创建一个`ApiResponse`带有`FromXElement`方法的类（例如），允许您编写：

```
var response = doc.Elements().Select(x => ApiResponse.FromXElement(x)); 
```

或者在 C# 4 中：

```
var response = doc.Elements().Select(ApiResponse.FromXElement); 
```

然后，您可以从查询中取出投影*，*并以正常方法编写它。你可以把它分成几个陈述，也可以不 - 这是你的决定。

顺便说一句，您是否真的期望多个元素仍然不清楚 - 文档只能有一个顶级元素，如果您*真的*只期望根元素有用，那么摆脱查询完全的一部分。

您可能还会发现避免使用字符串文字更清楚（并`ns + ...`在您的代码中重复，如下所示：

```
private static readonly XNamespace ResponseNs = 
    "http://api.namecheap.com/xml.response";
private static readonly XName ErrorsName = ResponseNs + "Errors";
private static readonly XName WarningsName = ResponseNs + "Warnings";
// etc 
```

然后你可以使用：

```
Errors = r.Element(ErrorsName).Value 
```

# asp.net - 使用 WebForm 中的 MVC2 AntiforgeryToken

> ID：10839453
> 
> 赞同：1
> 
> 时间：2012-05-31T18:47:28.863
> 
> 标签：asp.net, ajax, asp.net-mvc-2, antiforgerytoken

## 背景

我需要使用 WebForms 页面（托管在 cms 中）中的 AntiForgeryToken。该页面应将数据发布到作为解决方案一部分的 MVC 2.0 操作。该操作应使用 ValidateAntiForgeryToken 属性。

我确实从这里尝试了解决方案：[Using an MVC HtmlHelper from a WebForm](https://stackoverflow.com/questions/1347728/using-an-mvc-htmlhelper-from-a-webform)但它似乎不起作用，因为渲染的 antiforgerytoken 在控制器操作中被指示为无效。

## 当前解决方案

现在我已经解决了这个问题，这样我就有了一个可用的操作来渲染一个部分视图，该视图只包含一个带有防伪标记的输入标签。

**看法**

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl" %>
<%= Html.AntiForgeryToken() %> 
```

该页面使用 javascript 将 antiforgerytoken 拉入如下形式：

**形式**

```
<form id="jsonForm" action="/my/action" method="post">
  <input id="tokenPlaceholder" type="hidden" /> 
```

**获取防伪令牌**

```
<script type="text/javascript">
    $(function () {
        $.ajax({
            url: "/antiforgery/token",
            type: "GET",
            success: function (data, textStatus, jqXHR) {
                $("#tokenPlaceholder").replaceWith(data);
            }
        });
    });
</script> 
```

只要表单发布根据 ValidateAntiforgeryToken 属性有效，这将起作用。

## 问题

**以这种方式将防伪令牌添加到表单中是否存在任何安全问题？**

有没有更简单的方法我不干？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-03T00:50:14.267

```
 <script>
@functions{
    public string TokenHeaderValue()
    {
        string cookieToken, formToken;
        AntiForgery.GetTokens(null, out cookieToken, out formToken);
        return cookieToken + ":" + formToken;                
    }
}

$.ajax("/antiforgery/token", {
    type: "post",
    contentType: "application/json",
    data: {  }, // JSON data goes here
    dataType: "json",
    headers: {
        'RequestVerificationToken': '@TokenHeaderValue()'
    }
});
 </script> 
```

处理请求时，从请求标头中提取令牌。然后调用 AntiForgery.Validate 方法来验证令牌。如果令牌无效，Validate 方法将引发异常。

```
 void ValidateRequestHeader(HttpRequestMessage request)
 {
   string cookieToken = "";
   string formToken = "";

IEnumerable<string> tokenHeaders;
if (request.Headers.TryGetValues("RequestVerificationToken", out tokenHeaders))
{
    string[] tokens = tokenHeaders.First().Split(':');
    if (tokens.Length == 2)
    {
        cookieToken = tokens[0].Trim();
        formToken = tokens[1].Trim();
    }
}
AntiForgery.Validate(cookieToken, formToken);
} 
```

[在原始帖子中了解更多信息](http://www.asp.net/web-api/overview/security/preventing-cross-site-request-forgery-%28csrf%29-attacks)

# java - 登录 Web 应用程序：最佳实践？

> ID：10839457
> 
> 赞同：7
> 
> 时间：2012-05-31T18:47:50.170
> 
> 标签：java, tomcat, web-applications, logging, log4j

在客户站点上部署 Web 应用程序（在测试环境中）期间，我们遇到了应用程序日志记录问题。我将很快尝试描述当前的情况：

*   实现使用由 java.util.logging 和 apache.commons.logging 检索的 Logger。
*   在部署的包中存在一个指向 JUL 的 commons-logging.properties。
*   应用程序在 Tomcat 6.x 上运行

客户决定他想在 tomcat 上使用 Log4J 并对其进行配置，使其（通常）工作 - 当然它不适用于上述应用程序。

看来我们无论如何都需要更改日志记录实现 - 我想向您询问一些关于如何在 Web 应用程序中实现日志记录的最佳实践。以下事情应该是可能的：

*   客户需要能够在不修改 *.war 文件中的任何内容的情况下更改日志级别。-> 如果他必须修改战争文件，他必须为每个新版本都这样做......
*   应该可以进行某种滚动文件日志记录（例如：最多 10 个文件，每个文件最多 10mb）——当然也应该由客户来定义和更改此设置...
*   由于另一个客户可能想要使用标准的 JUL 日志记录 - 我当然更愿意不对首选库（在这种情况下为 Log4J）进行硬编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T18:53:31.523

> 客户需要能够在不修改 *.war 文件中的任何内容的情况下更改日志级别。

您可以将日志框架配置文件（`log4j.xml`或`logback.xml`）放在 WAR 文件之外。[logback](/questions/tagged/logback "显示标记为“logback”的问题")还支持在更改此文件时自动重新配置。

> 应该可以有某种滚动文件记录

[log4j](/questions/tagged/log4j "显示标记为“log4j”的问题")和 Logback都支持基于大小和日期的文件回滚，参见例如[`RollingFileAppender`](http://logback.qos.ch/manual/appenders.html#RollingFileAppender)。

> 由于另一个客户可能想要使用标准的 JUL 日志记录 - 我当然更愿意不对首选库（在这种情况下为 Log4J）进行硬编码。

[apache-commons-logging](/questions/tagged/apache-commons-logging "显示标记为“apache-commons-logging”的问题")从根本[上被破坏了](https://stackoverflow.com/questions/3222895)，改用[slf4j](/questions/tagged/slf4j "显示标记为“slf4j”的问题")。然后，您只需在您的 CLASSPTH 上放置不同的实现。SLF4J API 也很讨人喜欢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:52:04.003

你应该看看[SLF4J](http://www.slf4j.org/)。它本质上是一个包装器，允许最终用户放入他们想要的任何日志库（大多数情况下）。

虽然我没有尝试过，但他们甚至有一个[迁移工具](http://www.slf4j.org/migrator.html)，可以帮助您更改代码以使用它。

# ember.js - 如何在 EmberJS 中设置“ENV”变量？

> ID：10839458
> 
> 赞同：9
> 
> 时间：2012-05-31T18:47:51.603
> 
> 标签：ember.js

更新到 EmberJS 0.9.8.1 后，我现在收到两个警告：

```
WARNING: Computed properties will soon be cacheable by default. To enable this
in your app, set `ENV.CP_DEFAULT_CACHEABLE = true`. 
```

和：

```
WARNING: The way that the {{view}} helper affects templates is about to change.
...SNIP...  by setting `ENV.VIEW_PRESERVES_CONTEXT = true`. 
```

这似乎是一个愚蠢的问题，但我该如何设置这些 ENV 变量呢？我尝试用几种不同的方式设置它们，但没有一种方法会使警告消息消失，而且我的应用程序中也没有任何中断。这是否意味着我很清楚？或者这是否意味着我没有正确设置 ENV 变量？

1.  **window.ENV**不存在，因此实际上执行 'ENV.CP_DEFAULT_CACHEABLE = true' 不起作用
2.  **Ember.ENV**存在，但是是一个空对象，并且没有 Ember.ENV.set 方法。所以我尝试做 Ember.ENV.CP_DEFAULT_CACHEABLE = true。这是设置 ENV 的正确方法吗？然而，它对 Ember.CP_DEFAULT_CACHEABLE 没有影响，所以这似乎不对。
3.  **Ember.CP_DEFAULT_CACHEABLE**存在，所以我尝试过 Ember.CP_DEFAULT_CACHEABLE = true，但这对 Ember.ENV.CP_DEFAULT_CACHEABLE 没有影响。
4.  我也尝试过 Ember.set('CP_DEFAULT_CACHEABLE', true)。

其中哪一项（如果有）是回应这些警告的正确方法？当您根据他们的请求设置事情时，他们不只是取消吗？警告可能应该更好地记录这一点，或者提供您设置它们的反馈。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T19:01:26.053

您必须确保`ENV`在加载 Ember.js 之前设置变量（在[ember-metal/lib/core.js](https://github.com/emberjs/ember.js/blob/8647bd5815ed1cbf6adcc70ad5e2771afdefc483/packages/ember-metal/lib/core.js#L56-65)中定义），请参阅[http://jsfiddle.net/pangratz666/jweyf/](http://jsfiddle.net/pangratz666/jweyf/)：

```
<!doctype html>
<body>
    <script type="text/javascript" >
        ENV = {
            CP_DEFAULT_CACHEABLE: true,
            VIEW_PRESERVES_CONTEXT: true
        };
    </script>
    <script src="http://code.jquery.com/jquery-1.7.2.js"></script>
    <script src="https://github.com/downloads/emberjs/ember.js/ember-0.9.8.1.js"></script>
    ...
</body> 
```

​</p>

# php - 在 Codeigniter 中取消设置会话数组值

> ID：10839459
> 
> 赞同：2
> 
> 时间：2012-05-31T18:47:59.930
> 
> 标签：php, codeigniter

这是我的会话数组：

```
[inactivefilter] => Array
    (
        [0] => add
        [1] => new
    )

[filter] => Array
    (
        [0] => new
    ) 
```

“添加”和“新建”由用户动态生成。

我目前将数组的值发送到我的控制器，然后被困在模型应该做什么上。

```
 public function clear_filter()
    {
        $i = $this->input->post('filtervalue');
        $this->thread_model->clear_filter($i);
    } 
```

`$i`将等于他们点击的任何值。所以如果他们点击“添加”`$i = add`

我需要根据 $i 的值取消设置 activefilter 和 filter 。有没有简单的方法来做到这一点？

我已经阅读了有关 array_splice、array_diff 和其他一些方法的信息，但没有成功。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:56:51.660

使用 codeigniter 会话：

```
$filter = $this->session->userdata('filter');
$index = array_search($i, $filter);
unset($filter[$index]);
$this->session->set_userdata('filter', $filter); 
```

使用 php 会话：

```
$index = array_search($i, $_SESSION['filter']);
unset($_SESSION['filter'][$index]); 
```

# python - 删除不在 Python 集合中的字符

> ID：10839464
> 
> 赞同：1
> 
> 时间：2012-05-31T18:48:27.337
> 
> 标签：python, regex

我有一个字符串，我正在尝试删除所有不是字母数字的字符，也不是这个集合中的字符

```
'''!$%*()_-=+\/.,><:;'"?|'''. 
```

我知道这会删除所有非字母数字字符，但我怎样才能做得更好？

```
re.sub(r'\W+','',line) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T18:53:08.580

Python 2.x 非正则表达式解决方案：

```
punctuation = '''!$%*()_-=+\/.,><:;'"?|'''
allowed = string.digits + string.letters + punctuation
filter(allowed.__contains__, s) 
```

要过滤的字符串是`s`. （这可能不是长字符串最快的解决方案。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T19:10:49.610

归功于这个线程：[Remove specific characters from a string in python](https://stackoverflow.com/questions/3939361/remove-specific-characters-from-a-string-in-python)

首先，无需手动重新输入所有标点符号。为了方便起见， string 模块将 string.punctuation 定义为属性。（`help(string)`用于查看其他可用的类似定义）

```
>>> import string
>>>string.punctuation
'!"#$%&\'()*+,-./:;<=>?@[\\]^_`{|}~' 
```

解决方案的确切应用将需要一些摆弄来定义不需要的字符；一个很大的缺点是，在这种形式下，它只会删除您告诉它删除的字符。如果您确定您的文件是 100% ASCII 字符，那么您可以定义：

```
>>> delchars = ''.join(c for c in map(chr, range(256)) if c not in (string.punctuation + string.digits + string.letters) ) 
```

您可以通过丢弃字符来过滤字符：

```
>>> text.translate(None, delchars) 
```

编辑：以下是各种方法的一些有趣的计时信息： [从 Python 中的字符串中剥离除字母数字字符之外的所有内容](https://stackoverflow.com/questions/1276764/stripping-everything-but-alphanumeric-chars-from-a-string-in-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:36:51.050

在 Python 3.x 中，您可以使用`translate`string 上的方法来删除不需要的字符：

```
>>> def remove(string, characters):
        return string.translate(str.maketrans('', '', characters))

>>> import string
>>> remove(string.printable, string.ascii_letters + string.digits + \
                             '''!$%*()_-=+\/.,><:;'"?|''')
'#&@[]^`{}~ \t\n\r\x0b\x0c' 
```

# .htaccess - 如何重定向到不同的域

> ID：10839466
> 
> 赞同：0
> 
> 时间：2012-05-31T18:48:31.093
> 
> 标签：.htaccess, redirect

我需要在我的 .htaccess 文件中设置一个指令来重定向，如下所示：

来自[http://mydomain.com/internal/](http://mydomain.com/internal/)

到[http://myotherdomain.com/internal/](http://myotherdomain.com/internal/)

有人可以帮忙吗？

谢谢

**我的代码——产生 500 内部服务器错误**

```
//Rewrite to www
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mydomain.com/internal[nc]
RewriteRule ^(.*)$ http://myotherdomain.com/internal/$1 [r=301,nc] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:55:45.520

您的文件存在一些问题：注释以`#`not开头`//`，您无法将 URI 与 HTTP_HOST 匹配（您试图匹配 /internal），并且规则或 cond 与标志之间需要有空格（NC ）。这应该可以工作：

```
#Rewrite to www
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^mydomain.com$ [NC]
RewriteRule ^internal(.*)$ http://myotherdomain.com/internal$1 [R=301,NC] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:51:14.843

试试这个：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^mydomain.com$ [NC]
RewriteRule ^internal(.*)$ http://myotherdomain.com/internal$1 [L,NC] 
```

将`(.*)`复制任何内容，以便您可以在`$1`. 如果重定向应该是永久性的，只需在`R=301`之后添加`L,NC`

**编辑** 您在给定代码中的错误是：

1.  评论使用“#”
2.  主机是`^mydomain.com$`
3.  您必须在主机和主机之间添加一个空格`[NC]`
4.  写`RewriteRule ^(.*)$ http://myotherdomain.com/$1`OR `RewriteRule ^internal/(.*)$ http://myotherdomain.com/internal/$1`，但您的规则将重定向到`internal/internal`

# php - 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 18 行的 C:\xampp\htdocs\wr\header.php 中给出

> ID：10839470
> 
> 赞同：0
> 
> 时间：2012-05-31T18:48:50.303
> 
> 标签：php

> **可能重复：**
> [警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在](https://stackoverflow.com/questions/5473981/warning-mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-i)

好的，我有这个代码。

```
<?//index.php
if(!defined('INCLUDE_CHECK')) die('You are not allowed to execute this file directly');

include('db.php');//include our database
//connecting to the database
$con = mysql_connect($dbhost, $dbusername, $dbpassword);
//if we cant connect
if (!$con)
{
die ('could not connect to the database' . mysql_error());
}
//if successfully connected then select db
mysql_select_db ($dbtable, $con);
//our query
$result = mysql_query("SELECT * FROM header");
//fetch our result
while($row = mysql_fetch_array($result)) //this is the line 18
{
//if type is meta then..
if ($row['type'] === "meta")
{
$meta .= "<meta name='".$row['name']."' content='".$row['content']."' />";
}
//if type is title then..
elseif ($row['type'] === "title")
{
$title = "<title>".$row['content']."</title>";
$title2 = "<div id='ti'>".$row['name']."</div>";
}
//if type is favicon then..
elseif ($row['type'] === "favicon")
{
$favicon = "<link rel='shortcut icon' href='".$row['content']."' />";
$imglogo = "<img class='imglogo' src='".$row['content']."' />";
}
//if type is description then..
elseif ($row['type'] === "description")
{
$des = "<div id='ti2'>".$row['content']."</div>";
}

}
mysql_close($con);
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<? echo $title; //line 50 ?>
<? echo $favicon; //line 51 ?>
<? echo $meta; //line 52 ?>
<? echo (file_get_contents("cc.txt")); ?>
</head> 
```

我收到以下错误，警告：mysql_fetch_array() 期望参数 1 是资源，在第 18 行的 C:\xampp\htdocs\wr\header.php 中给出的布尔值

注意：未定义变量：第 50 行 C:\xampp\htdocs\wr\header.php 中的标题

注意：未定义的变量：第 51 行 C:\xampp\htdocs\wr\header.php 中的 favicon

注意：未定义变量：第 52 行 C:\xampp\htdocs\wr\header.php 中的元

错误行是在代码中指定的，请参阅错误行的顶部代码。

有人可以帮我解决这个问题吗？提前致谢。

朱利弗。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:51:48.950

也许您的 SELECT 没有成功。您应该检查是否`$result`为 FALSE

```
if ($result === false) 
```

如果是这样，您可以使用`mysql_error()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:52:20.463

在将 $result 传递给 mysql_fetch_array 之前，您应该始终检查它！== false，因为如果查询失败，这就是它的值，这就是您的情况所发生的情况。请参阅[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)。如果它确实失败了，你可能想回显 mysql_error() 来看看出了什么问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T18:57:40.437

从[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE。
> 
> 对于其他类型的 SQL 语句，INSERT、UPDATE、DELETE、DROP 等，mysql_query() 在成功时返回 TRUE，在错误时返回 FALSE。
> 
> 如果用户无权访问 > 查询引用的表，mysql_query() 也将失败并返回 FALSE。

在进一步处理结果之前，您应该始终确保它不是布尔值 FALSE（即！== FALSE）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T19:07:34.460

错误仍然存​​在于以下行之一中，因此请添加：

mysql_select_db ($dbtable, $con) OR DIE(mysql_error());

$result = mysql_query("SELECT * FROM header") OR DIE(mysql_error());

# windows - 是否有任何实用函数可以将 CString 转换为 URL 编码的 UTF-8 字符串？

> ID：10839474
> 
> 赞同：0
> 
> 时间：2012-05-31T18:49:26.967
> 
> 标签：windows, visual-studio-2010, visual-c++, unicode, mfc

我有以下内容：

```
CString gText = _T("Π Σ Ω"); 
```

我想获得：

```
%CE %A0 %CE %A3 %CE %A9 
```

任何转换例程都喜欢`WideStringToMultiByte`或`CT2A`将二进制文件返回给我。实际上，我希望十六进制逃脱。MFC 中是否有任何转换实用程序用于此目的？任何第三方库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:57:12.037

好吧，你可以使用

```
sprintf(hexcode_string, "U+%02x", MultibyteStringFromWideStringToMultiByte[j]); 
```

对于每个字符，然后组合字符串。

# python - 在 Python 中将 SQL 转换为 json

> ID：10839475
> 
> 赞同：5
> 
> 时间：2012-05-31T18:49:32.063
> 
> 标签：python, sql, json

我需要传递一个可以使用`$.parseJSON`. 查询如下所示：

```
cursor.execute("SELECT earnings, date FROM table") 
```

为了传递可以转换为 json 的 HttpResponse 对象，我需要从这里做什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-31T19:00:42.450

好吧，如果你只是这样做：

```
json_string = json.dumps(cursor.fetchall()) 
```

你会得到一个数组数组......

> `[["earning1", "date1"], ["earning2", "date2"], ...]`

另一种方法是使用：

```
json_string = json.dumps(dict(cursor.fetchall())) 
```

这将为您提供一个带有`earnings`索引的 json 对象...

> `{"earning1": "date1", "earning2": "date2", ...}`

如果这不是您想要的，那么您需要指定您希望结果的外观......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:00:17.453

你调查过[json 库](http://docs.python.org/library/json.html)吗？

以下将您的数据库输出序列化为 json。我不确定你的数据是什么样的，或者你需要 json 是什么样的，但如果你只记住 python 列表 -> 数组和 python dicts -> 对象，我想你会没事的。

```
import json
json.dumps(data) 
```

# file-upload - Capybara（带有 Cucumber 和 Selenium）attach_file 上传后重定向

> ID：10839482
> 
> 赞同：1
> 
> 时间：2012-05-31T18:49:53.357
> 
> 标签：file-upload, selenium, cucumber, capybara

这是我的 x_steps.rb：

```
Given "I upload an image" do
attach_file('file','image.png')
click_button "Save Changes"
end 
```

我的 x.feature 文件中的行：

```
When I go to Upload page
When I upload an image 
```

这是输入表单/字段的 html

```
<form action="/en/upload/" method="post" id="main_form">
...
<input multiple="multiple" type="file name="file">
...
</form> 
```

运行 Selenium 后会转到上传页面，可能会或可能不会附加文件。但是 attach_file('file','image.png') 行会导致重定向到 file:///image.png。然后 click_button 导致错误，因为页面上不再有按钮。

有谁知道发生了什么事？还有上传文件的替代方法吗？

# c++ - 将浮点数与常量进行比较时的奇怪行为

> ID：10839486
> 
> 赞同：1
> 
> 时间：2012-05-31T18:50:13.183
> 
> 标签：c++

我被这种奇怪的行为震惊了：

```
float pi = 3.14;

if(pi == 3.14)
    cout << "OK";
else
    cout << "How is it possible?"; 
```

谁能解释一下？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T18:51:30.457

`if`语句中的常数是`(double)3.14`。它非常接近它的`float`版本，但不完全等于它，因为`3.14`没有精确表示。

尝试使用相同的技巧`1.25`或任何其他可以精确表示的数字，您将得到一个`OK`.

```
float num = 1.25;
if(num == 1.25)
    cout << "OK";
else
    cout << "How is it possible?"; 
```

你也可以投到`3.14`得到`float`一个`OK`：

```
float pi = 3.14;

if(pi == (float)3.14)
    cout << "OK";
else
    cout << "How is it possible?"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T18:51:35.253

因为默认情况下 like`3.14`被视为双精度值，但是将其中一个值存储在浮点变量中会导致精度损失；因此存在与不同精度相关的微观差异。这就是为什么大多数时候不应该直接比较浮点数的原因。

# c# - 如何获取 BackgroundWorker 提供的进度值？

> ID：10839490
> 
> 赞同：0
> 
> 时间：2012-05-31T18:50:22.500
> 
> 标签：c#, backgroundworker

上面有这样的`BackgroundWorker`吗？当一个函数在`DoWork`回调中结束时，我会`ProgressChanged`根据函数的结束来获取这个进度的值。

代码示例：

```
bw.DoWork += (a,b) => {
  foo();
  baa();
  if(..) else {  }
}; 
```

当每个语句结束时，我开始

```
 bw.ProgressChanged += (o, e) => {
                   MessageBox.Show(e.ProgressPercentage);
   }; 
```

我有三个stataments，它应该打印三个`Message.Show()`：33,66,100

`33`% =>`foo()`被执行。

`66`% =>`baa()`被执行。

`100`% => `if(..) else { }`最后一条语句被执行，完成。

我可以`.ReportProgress()`在回调事件上运行的每个函数/语句中调用方法`DoWork`，但是根据语句编号，这可能是不可行的。

我希望这很清楚。我为我糟糕的英语道歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:58:00.807

如果我理解你的问题；答案是“不，后台工作人员无法自动报告其进度”。

您必须明确调用 `.ReportProgress()`

```
bw.DoWork += (a,b) => {
  foo();
  worker.ReportProgress(33);
  baa();
  worker.ReportProgress(66);
  if(..) else {  }
}; 
```

如果你真的要处理 DoWork 主体中的大量方法调用，你可以变得聪明，做一些事情，比如构建一个动作队列，调用每个动作并在每个动作之后调用 ReportProgress。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T18:58:04.703

以下方法有问题吗？

```
bw.DoWork += (a,b) => {
  foo();
  bw.ReportProgress(33);
  baa();
  bw.ReportProgress(66);
  if(..) else {  }
  bw.ReportProgress(100);
}; 
```

我只会尝试调用`ReportProgress`inside of`foo`或者`baa`如果有一些令人信服的理由（即从 33 增加到 66，一次增加几个百分比， inside of `foo`）。

# memory-leaks - 内存泄漏 - 物理或虚拟

> ID：10839493
> 
> 赞同：1
> 
> 时间：2012-05-31T18:50:32.797
> 
> 标签：memory-leaks

当我们说存在内存泄漏时，是指虚拟内存中的泄漏还是物理内存中的泄漏？我觉得它实际上是VM中的泄漏，因为只有虚拟内存空间被浪费了，因为无论如何通过交换未使用的页面来节省物理内存。但它仍然浪费VM空间。请澄清。

是否可以使用该`linux top`命令并告诉可能存在内存泄漏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:53:16.647

虚拟内存本质上（在实际意义上）与物理内存相同，只是为了缓存目的而扩展到系统的磁盘驱动器（参见页面文件）。由于它在磁盘上，因此访问速度要慢得多，因为在读取数据之前需要将数据从磁盘“交换”到物理内存。如果程序有内存泄漏，它将填满两者（或至少到程序可用内存的限制。）

您可以使用 top 检查消耗大量内存的进程。如果程序中的内存量继续以异常的速度增长，那么这可能是内存泄漏的迹象。使用 valgrind 之类的程序会更容易识别：[http ://en.wikipedia.org/wiki/Valgrind](http://en.wikipedia.org/wiki/Valgrind)

# asp.net - 为什么 Crystal Reports 会挂起我的网页？

> ID：10839497
> 
> 赞同：1
> 
> 时间：2012-05-31T18:50:46.493
> 
> 标签：asp.net, crystal-reports-2010

我对 ASP.Net 很陌生，并且使用 CrystalReportsViewer 开发了一个简单的 Web 应用程序。我有一个“主页”页面，其中选择了所需的报告，还有一个“ViewReports”页面来呈现报告。为了调试，我硬编码了 *.rpt 文件的路径。

使用 ASP.Net 开发服务器进行调试时，我可以很好地加载报告并且加载速度相当快。但是，当应用程序托管在 IIS 中（在同一台机器上）时，“V​​iewReports”页面永远不会加载 - 它大约到一半然后就挂起。完全没有错误。如果我删除 RPT 文件，页面会加载预期的“错误加载报告”消息。有任何想法吗？我将 .NET 4.0 与 VS 2010 和 Crystal Reports 用于 VS 2010。此外，如果有帮助，我可以包含代码，只要让我知道您希望看到的部分（我不想用不必要的问题淹没这个问题代码，如果它不会有帮助）。

更新（5/31 下午 2:59）

我确实在事件日志中看到了大量错误（好电话，Christopher）。消息如下：

```
The description for Event ID 4353 from source Crystal Reports cannot be found. Either the component that raises this event is not installed on your local computer or the installation is corrupted. You can install or repair the component on the local computer.

If the event originated on another computer, the display information had to be saved with the event.

The following information was included with the event: 

The keycode assembly, BusinessObjects.Licensing.KeycodeDecoder.dll, cannot be loaded.

the message resource is present but the message is not found in the string/message table 
```

这个缺失的程序集是否应该包含在 CR 运行时中？

# ruby-on-rails-3 - Rails 3中模型多态关联的可能滥用

> ID：10839499
> 
> 赞同：0
> 
> 时间：2012-05-31T18:51:00.470
> 
> 标签：ruby-on-rails-3, associations, polymorphic-associations

在我的应用程序中，我有三个感兴趣的模型。第一个是 Patient 模型，它有_many Record 模型。类似地，Record 模型 has_many 诊断模型。最初，我让 Patient 模型通过以下方式访问诊断：

```
:has_many :diagnoses, :through => :records 
```

但是我遇到的问题是**我还希望 Patient 模型能够创建一个独立于 Record 模型的诊断对象**。例如，在入院期间，患者可能被诊断出患有新疾病。然而，她也可能有过某种疾病的历史（先前的诊断），所以我想跟踪它而不必求助于创建新模型。

[我尝试使用这里](http://guides.rubyonrails.org/association_basics.html#polymorphic-associations)描述的多态关联，这样我的模型看起来像：

```
class Patient < ActiveRecord::Base
  has_many :records
  has_many :diagnoses, :as => :medical_history
  # ...
end

class Record < ActiveRecord::Base
  belongs_to :patient
  has_many :diagnoses, :as => :medical_history
  # ...
end

class Diagnosis < ActiveRecord::Base
  belongs_to :medical_history, :polymorphic => true
  # ...
end 
```

我遇到的问题是，虽然我可以通过 Record 对象成功创建 Diagnosis 对象，但当我调用`p.diagnoses`（`p`Patient 对象在哪里）时，它并没有像我期望的那样让我访问所有 Diagnosis 对象。

*重申一下，我想要的是能够通过 Record 模型或通过 Patient 模型创建一个 Diagnosis 对象，但能够让 Patient 模型访问通过其自身或通过 Record 模型创建的所有 Diagnosis 对象（这应该是可能的，因为 Record 模型属于 Patient 模型）。*

我很确定这是我并没有真正理解多态关联是如何工作的，而且我也可能完全滥用了多态关联。所以我感谢所有的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:38:14.543

我认为您对多态性的使用是合适的。

通过记录创建的诊断（在此上下文中是一个令人困惑的术语，因为它可能表示患者记录或数据库记录）不会自动添加到患者。您需要做以下两件事之一：

1.  在 Record 模型上使用回调（例如 after_save），将所有诊断添加到 Record.patient 并调用 Record.patient.save。请注意，您的 Patient 也可能有回调，因此请注意他们不要互相调用。

2.  在 Patient 中添加一个方法，以便在需要时将 p.diagnoses 与 p.records.diagnoses 结合起来。如（未经测试的代码）：

    ```
    def diagnoses_all
      // you could memoize this if so inclined
      (diagnoses + records.collect{|r| r.diagnoses}.flatten).uniq
    end 
    ```

无论哪种情况，您都可以随时调用 Patient.records.diagnoses，这样就不会丢失知识。但是，在第一种情况下，如果您想知道哪些诊断是通过 Patient 创建的，则必须编写另一种方法来基本上反转 diagnostics_all，即从 Patient.diagnoses 中减去 Patient.records.diagnoses。

为了更好地了解正在发生的事情，请查看为 3 个表生成的（假设为 SQL）模式。在控制台中，实例化一个 Patient，调用 p.diagnoses 和 p.records.diagnoses，查看生成 SQL 的日志。

# java - 像 Object(){} 这样的 java 语法

> ID：10839508
> 
> 赞同：2
> 
> 时间：2012-05-31T18:51:18.270
> 
> 标签：java, class, reflection

```
Class clazz = new Object(){}.getClass(); 
```

为什么这是可能的，这意味着什么？有人可以提醒我吗？

例如：

```
public class Testing {
    public static void main(String[] args) {
        Class clazz = new Object(){}.getClass();
        System.out.println(clazz);
    }
} 
```

结果是：`class Testing$1`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T18:52:19.657

`new Object(){}`创建一个[*匿名内部类*](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)，作为 的子类`Object`。它是 的内部类`Testing`，因此它会获得一个编译器生成的名称，就像您看到的那样。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T18:53:08.067

它创建了一个匿名内部类子类化`Object`。我在 Guice 中看到的空主体的主要用途是 for [`TypeLiteral`](http://google-guice.googlecode.com/git/javadoc/com/google/inject/TypeLiteral.html)，它用于捕获泛型类型参数：

```
key = new TypeLiteral<List<String>>() {}; 
```

这很有用，因为类型擦除*不适*用于此处的超类，因此 Guice 能够`List<String>`取出无法表示为普通类文字的部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:55:13.927

它与以下代码相同：

```
public class Testing{
      private class Anon extends Object{
      }
      public static void main(String[] args) {
          Class clazz = new Anon().getClass();
          System.out.println(clazz);
      }
} 
```

是类的`Testing$1`名称，它是类Testing 中定义的第一个匿名类。

这些匿名类可用于在您使用它的地方实现接口，并且它们可以访问本地最终变量。

```
final String text = "Written by new Thread";
Thread thread = new Thread(new Runnable(){
     public void run(){
         System.out.println(text);
}});
thread.start(); 
```

# ruby-on-rails - pass value of selected option to partial

> ID：10839517
> 
> 赞同：0
> 
> 时间：2012-05-31T18:52:00.037
> 
> 标签：ruby-on-rails

I would appreciate it if someone could help me with the following issue.

I have in my form the following code:

```
Type:  <%= f.select(:SUB_TYPE, [
            ['type A', 'type A'],
            ['type B', 'type B'],
            ['Type C', 'type C']
            ],{ :prompt => "Please select"}
            ) %>

  <% f.fields_for :author do |builder| %>
  <%= render :partial=>'sub/formAuthor', :locals => {:f => builder, :sub_type_selected => value_of_selected_type} %>
  <% end %> 
```

I need to pass the type selected by the user to the partial 'formAuthor' and I would like to do so by passing the selected type value via the variable ':sub_type_selected'.

My question is how do I pass the value of the selected type to that partial.

Any suggestion is most appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:02:05.530

You cannot do that. The selected value is not known when the partial is built. The partial is processed before the user even sees the drop down. You should either hide the partial block, and load it after the user makes a selection, or load for all values and use tabs or similar mechanism to hide/ show. Basically, you will have to manage it with javascript or ajax.

# java - Web 服务客户端错误

> ID：10839519
> 
> 赞同：1
> 
> 时间：2012-05-31T18:52:05.720
> 
> 标签：java, web-services, tomcat, jboss

我创建了一个 Web 服务，它在 tomcat 服务器上运行，我的 web 服务客户端也在 tomcat 服务器上。当我在 tomcat 中部署 web 服务和 web 服务客户端时，我的机器 tomcat 和 jboss 上运行了两个 web 服务器，它运行良好。但是当我在 jboss 中部署相同的 web 服务时，tomcat 和 jboss web 服务的客户端都停止工作。它给了我以下错误。

```
org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.ExceptionInInitializerError
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:522)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:398)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause

javax.servlet.ServletException: java.lang.ExceptionInInitializerError
    org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:850)
    org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:779)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:103)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause

java.lang.ExceptionInInitializerError
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    javax.xml.soap.FactoryFinder.newInstance(FactoryFinder.java:55)
    javax.xml.soap.FactoryFinder.find(FactoryFinder.java:133)
    javax.xml.soap.FactoryFinder.find(FactoryFinder.java:166)
    javax.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:75)
    javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:144)
    com.sun.xml.ws.api.SOAPVersion.<init>(SOAPVersion.java:178)
    com.sun.xml.ws.api.SOAPVersion.<clinit>(SOAPVersion.java:83)
    com.sun.xml.ws.api.BindingID.<clinit>(BindingID.java:318)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseBinding(RuntimeWSDLParser.java:424)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseWSDL(RuntimeWSDLParser.java:321)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:146)
    com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:263)
    com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:226)
    com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:174)
    com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:104)
    javax.xml.ws.Service.<init>(Service.java:56)
    com.dnb.discovery.searchservice.SearchServiceService.<init>(SearchServiceService.java:57)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:83)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)

root cause

java.lang.IllegalArgumentException: com.sun.xml.internal.messaging.saaj.soap.LocalStrings != com.sun.xml.messaging.saaj.soap.LocalStrings
    java.util.logging.Logger.getLogger(Logger.java:314)
    com.sun.xml.messaging.saaj.soap.SAAJMetaFactoryImpl.<clinit>(SAAJMetaFactoryImpl.java:71)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    javax.xml.soap.FactoryFinder.newInstance(FactoryFinder.java:55)
    javax.xml.soap.FactoryFinder.find(FactoryFinder.java:133)
    javax.xml.soap.FactoryFinder.find(FactoryFinder.java:166)
    javax.xml.soap.SAAJMetaFactory.getInstance(SAAJMetaFactory.java:75)
    javax.xml.soap.MessageFactory.newInstance(MessageFactory.java:144)
    com.sun.xml.ws.api.SOAPVersion.<init>(SOAPVersion.java:178)
    com.sun.xml.ws.api.SOAPVersion.<clinit>(SOAPVersion.java:83)
    com.sun.xml.ws.api.BindingID.<clinit>(BindingID.java:318)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseBinding(RuntimeWSDLParser.java:424)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parseWSDL(RuntimeWSDLParser.java:321)
    com.sun.xml.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:146)
    com.sun.xml.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:263)
    com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:226)
    com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:174)
    com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:104)
    javax.xml.ws.Service.<init>(Service.java:56)
    com.dnb.discovery.searchservice.SearchServiceService.<init>(SearchServiceService.java:57)
    org.apache.jsp.index_jsp._jspService(index_jsp.java:83)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:337)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:266)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:803) 
```

# layout - 将 div 裁剪为 2 个背景图像，然后在顶部分层渐变，使用 CSS3

> ID：10839529
> 
> 赞同：1
> 
> 时间：2012-05-31T18:52:46.547
> 
> 标签：layout, html, css

我希望能够创建一行 DIV，如下所示：

```
\---------\---------\---------\
 \         \         \         \
 /         /         /         /
/---------/---------/---------/ 
```

唯一的问题是，这些 DIV 中的每一个都有一个百分比的宽度，而不是绝对值。我希望能够使用两个图像创建一个像上面这样的 DIV ...

```
\---+
 \  |
 /  |
/---+ 
```

和...

```
+--\
|   \
|   /
+--/ 
```

...其中第一个图像与 DIV 的左侧对齐，第二个图像与右侧对齐。然后，在此之上，我想添加一个从西北方向到东南方向的渐变。

我想尝试避免创建一个内部有 3 个单独的 DIV 的 DIV，一个用于图像的每个部分，因为我认为 CSS3 正在发展以阻止这个确切的原因，就像过去给一个 div 提供 9 个 DIV 的网格一样在它里面只是为了添加一个漂亮的外阴影。

无论如何，有人知道我该怎么做吗？我意识到有背景分层之类的东西，所以我想这是一个开始。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:34:08.893

你在寻找这样的东西..，

[http://jsfiddle.net/HsZbp/1/](http://jsfiddle.net/HsZbp/1/)

我在一个 Div [左右和中间] 中提到了 3 个背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T17:44:29.953

使用 3 张图像而不是 2 张图像可能更简单：一张用于容器的左侧，一张用于容器的右侧，一张（新的）用于两个中间边框。会有左、右和中间边框图像。

每列将有一个带有 的 bg 图像（分别为左、中、中），`background-position:left top;`外部容器将有一个带有 的 bg 图像（右）`background-position:right top;`。

# tsql - 如何在 sql server 中为 T-SQL 中的特定位置或大小写生成插入

> ID：10839534
> 
> 赞同：0
> 
> 时间：2012-05-31T18:52:57.640
> 
> 标签：tsql, sql-server-2000

是否可以在 T-SQL 中为特定的 where 或 case 生成插入，而无需购买一些 3rd 方工具？

```
IQ     
-----------
87   - 0087
161  - 0161
205  - 0205
4087 - 4087 
```

存储过程示例：

```
sp_generate_insert select * from GENIUSES where IQ=161 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:15:53.507

如果你可以使用 Sql Server Management Studio，你可以这样做：

1.  右键单击数据库（不是表）并选择任务 --> 生成脚本
2.  下一步 --> 选择请求的表/表（从选择特定的数据库对象）
3.  下一步 --> 点击高级 --> 要脚本的数据类型 = 模式和数据
4.  下一步和完成

我不记得在上述过程中是否可以应用过滤器，所以如果不是，您可以将表选择到另一个表中并从另一个表生成脚本

```
select * 
into filteredGeniuses
from GENIUSES
where IQ=161 
```

# java - GWT 生成的 JavaScript 什么时候出现？

> ID：10839547
> 
> 赞同：0
> 
> 时间：2012-05-31T18:53:38.630
> 
> 标签：java, javascript, gwt

嗯，这确实是一个非常基本的问题。说，我做了一些更改，但我没有看到它们没有`?gwt.codesvr=127.0.0.1:9997`，据我所知，这很好。这些更改究竟何时出现在生成的 JavaScript 中？有人可以提供此生命周期描述的答案或链接吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:58:27.670

当您调用 GWT 编译器时。这可能是使用适用于 Eclipse、Maven、Ant 或您使用的任何构建系统的 Google 插件。

# c# - 想在我的 C# 应用程序中添加导入/导出功能

> ID：10839548
> 
> 赞同：-1
> 
> 时间：2012-05-31T18:53:46.857
> 
> 标签：c#, import, export

我想在我的 C# 应用程序中添加导入/导出功能...

将我的 sql server 数据导出到文件（CSV、XLS、XML）将数据从导出的文件（CSV、XML、XLS）导入到 sql server

请建议我应该以哪种格式（CSV、XML 或 XSL）进行导入/导出，因为我对任何一种都很好。这取决于我做它的难易程度。

还为我提供链接或方向，以便我可以获得详细信息并开始对此进行编码..

谢谢， 马赫什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:59:00.573

`CSV`如果您的应用程序应该传输/操作大量数据，我将代表文件格式。`CSV`内存占用少，因为它只是`comma-separated`文本。这种格式的困难在于国际应用程序，当您在不同的机器上有（比如说）不同的十进制分隔符并且需要从另一台机器保存/恢复数据时。在这种情况下，您需要

*   或以某种方式将文化信息存储在文件中
*   **或为所有**客户端定义单一统一格式。

与`CSV`您一起工作可以使用[A Fast CSV Reader](http://www.codeproject.com/Articles/9258/A-Fast-CSV-Reader)

对于小块数据，或通过网络传输或在不同进程之间进行通信，您可以在格式上中继，它对持久性、序列化和导航`XML`具有巨大的内置支持。`.NET Framework`

没什么好说的`XLS`，因为我总是尽量避免使用它们，因为它们是专有格式而不是大多数 IT 世界的通用格式。您需要拥有并`Excel`安装，或者您可以使用一些第 3 部分库，例如[excellibrary](http://code.google.com/p/excellibrary/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:00:22.310

尝试检查 FileHelpers。

[http://www.filehelpers.net/](http://www.filehelpers.net/)

它支持向导和您能想到的所有格式。

# c# - Azure 身份验证

> ID：10839552
> 
> 赞同：3
> 
> 时间：2012-05-31T18:54:18.713
> 
> 标签：c#, wpf, wcf, authentication, azure

目前有一个我计划转换为 Azure 的 ASP.NET Web 应用程序。每个客户一个应用程序，具有一个 SQL 数据库和成员服务，用于身份验证和授权。拥有用户管理员角色和客户可以管理自己的用户 ID 和密码的页面。

在升级到 Azure 时，我计划同时提供 Web 客户端和 WPF 客户端。WPF 客户端将通过 WCF 连接到 Web 服务。

什么是合适的安全模型？

不确定 ACS 是否是正确的工具。应用程序必须直接提供带有角色的用户 ID 和密码身份验证并管理该数据。客户管理员角色必须能够重置密码，因此外部身份提供者不适合。在 ASP.NET 级别的会员服务正是我所需要的。我想通过 WCF 将该模型扩展到 WPF 客户端。

客户非常健谈。今天有一个 WPF 客户端版本，它直接连接到 SQL 以供有限数量的“受信任”大批量客户使用。需要摆脱这种模式并进入大容量服务模式。

为如何跨 ASP.NET 和 WPF/WCF 进行通用身份验证和授权而苦苦挣扎。我认为 WPF 到 WCF 的通道级别身份验证是正确的方法，因此我不会对每个方法调用进行身份验证。

看起来[WCF 身份验证服务](http://msdn.microsoft.com/en-us/library/bb386582.aspx)是一个工具来做我正在寻找的东西。我没有在 Azure 中找到这样做的具体示例。我怀疑该功能在 Azure 中，但术语可能略有不同。 [部署](http://msdn.microsoft.com/en-us/library/bb515342.aspx) 希望这就是说 - 它部署在 Azure 上。

在我得到你试过的东西之前，你可以免费试用。需要获得许可才能评估新技术。我可能要做的是在家中打开 Azure 试用版。

我要尝试的是 Azure Membership 使用 TableStorage 作为提供。然后将 WCF Web 服务与 WS 和 userName 凭据一起使用。会回来汇报的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:34:27.567

关于 WPF，您只有一种选择来使用 Web 界面，因为 Azure 不支持 WPF。有关这方面的更多信息，请参见[此处](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredevelopment/thread/0b576707-3756-4f4c-8bbf-f026f17be5bd/#dd7ec709-6b9e-490e-b6a0-bcdd0574d6af)。

您的 Web 应用程序将完全是 ASP.NET（如果您决定选择 MVC），因此您选择的任何安全模型都可以在 Windows Azure 上运行。Windows Azure 没有规定或强制任何人选择 ASP.NET 安全模式。作为应用程序开发人员，您做出此决定。

ACS 只是一项服务，为使用它的应用程序提供访问和身份验证服务，因此它没有内置提供程序，即使有，它与任何基于 OpenID 的身份验证服务有何不同？

您当然可以使用会员提供商或自己建立取决于您的选择。

取决于您在这里谈论的证书类型，有几个地方由于各种原因需要证书。在某些地方，它不是“选项”而是“必需品”，因此除非有关于您所指的证书类型的具体描述，否则没有什么可以共享的。

关于您问题的最后一行，您肯定可以使用 PKI 或基于凭据的方法保护基于 WCF 的通信，但是正如我之前所说的，Azure 不支持 WPF，因此可能与上下文无关。是的，您确实可以使用成员资格提供程序来保护 WCF 和 ASP.NET 应用程序之间的通信。

最后，我不确定我是否理解您在第 1 行中描述的设计。您在一个问题中也问了很多 :)

# c# - 一种将字符串解析为键值对的简单方法

> ID：10839556
> 
> 赞同：0
> 
> 时间：2012-05-31T18:54:57.613
> 
> 标签：c#, string-parsing

可以说我有这样的类定义（相当简单）：

```
class Person
{
  public string Balance;
  public string Escrow;
  public string Acc;
  // .. and more 

} 
```

我需要将此字符串解析为上面的类：

```
BALANCE:      746.67     ESCROW PAYMENT:      271.22     LAST ACT:05/03/12
ACC: 10                   YTD DIVIDENDS:          .27   ENTRY DATE:12/20/10 
```

字符串以这种奇怪的格式出现。

我正在考虑逐行阅读并解析其内容，但我可能喜欢学习更好的方法。至少2个大脑比1个大脑强。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T18:58:18.417

如果字符串始终采用该格式，那么您应该能够仅拆分“：”字符并索引到数组中。

```
public Person ParsePerson(string line1, string line2) 
{
  string[] fields1 = line1.Split(new char[] {':', ' '}, StringSplitOptions.RemoveEmptyEntries);
  string[] fields2 = line2.Split(new char[] {':', ' '}, StringSplitOptions.RemoveEmptyEntries);
  return new Person() {
    Balance = fields1[1],
    Escrow = fields1[3],
    Acc = fields1[1]
  };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:21:02.797

您可以使用[正则表达式](http://www.regular-expressions.info/)从源字符串中提取每个属性的值，如下所示：

```
using System.Text.RegularExpressions;
...
Regex balanceRegex = new Regex("(?<=BALANCE:\\s*)[^\\s]+");
string balance = balanceRegex.Match(source).Value; 
```

这可以包含在一个函数中以搜索任何命名属性，如下所示：

```
private static string GetProperty(string source, string propertyName)
{
    string pattern = String.Format("(?<={0}:\\s*)[^\\s]+", propertyName);
    Regex regex = new Regex(pattern, RegexOptions.IgnoreCase);
    return regex.Match(source).Value;
} 
```

然后你可以像这样填充一个 Person 对象：

```
Person person = new Person
{
    Balance = GetProperty(source, "Balance"),
    Escrow = GetProperty(source, "Escrow Payment"),
    Acc = GetProperty(source, "Acc")
}; 
```

例如，如果您的属性值*中*有空格，您可能需要调整正则表达式，例如`ACCOUNT NAME: MR SMITH`

正则表达式方法非常灵活，因为即使属性的顺序或空格的数量发生了变化，它也可以工作。

# c# - 没有可用的 recaptcha.getHTML 函数

> ID：10839558
> 
> 赞同：1
> 
> 时间：2012-05-31T18:55:11.040
> 
> 标签：c#, asp.net-mvc-3, visual-studio-2010

我正在处理 asp.net MVC 3 表单。我确保在我的项目引用中有 recaptcha.dll、system.web.helpers dll、Webmatrix.Data.dll、Webmatrix.Webdata.dll，并确保在我的表单视图顶部。

但是，当我键入 @Recaptcha 时，没有可用的 getHTML 方法，只有 Design、RecaptchaControl、RecaptchaControlMVC、RecaptchaResponse 和 RecaptchaValidator。我还需要做什么才能使用 Recaptcha？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:57:07.123

您是否也将此添加到视图的顶部？

```
@using Recaptcha; 
```

要在视图中生成 reCaptcha，请使用：

```
@Html.Raw(Html.GenerateCaptcha("captcha", "clean")) 
```

如果您需要验证一切是否到位，请参见此处

[如何在 MVC3 应用程序中实现 Google reCaptcha？](https://stackoverflow.com/questions/9740402/how-to-have-captcha-functionality-like-stackoverflow-in-my-mvc3-application/9740583#9740583)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-05T12:07:00.810

您需要“Microsoft.Web.Helpers.dll”而不是“System.Web.Helpers.dll”

# php - jQuery Ajax 在第二次出现时不起作用

> ID：10839560
> 
> 赞同：0
> 
> 时间：2012-05-31T18:55:20.747
> 
> 标签：php, javascript, ajax, jquery

我无法理解是什么导致了这个错误，我已经尝试了我能想到的一切来修复它。我的页面上有两个不同的`submit`按钮，用于触发一些 Ajax 和发布数据。一个工作和火灾完美。第二个从来没有`POST`什么。

谁能看到我可能出错的地方？

```
$('.delete').submit( function(event) {

    event.preventDefault(); 
    $(this).children('input[type=\"submit\"]').prop('disabled',true);
    alert("Click detected!");

    $.ajax({
        url: 'scripts/deleteWork.php',
        data: slideID,
        type: 'POST',
        mode: 'abort',
        success: function(){
            $('#newOrder-1').fadeOut('fast');
        },
        error: function(){
            $(this).children('input[type=\"submit\"]').prop('disabled',false);
        }
    });
    return false;
}); 
```

我已经尝试删除第一次出现，以防它通过某种方式发生冲突而导致问题。我检查并重新检查了我的语法。火灾很好......只是在 Firebug 中没有 POST的`alert`迹象。我不明白！

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:13:19.750

*摸额头*

我需要添加以下行：

```
var slideID = $('#slideID').val(); 
```

感谢 Aaron W. 和 thecodeparadox。

# php - mod_rewrite - 我不能让它像我想要的那样工作

> ID：10839562
> 
> 赞同：1
> 
> 时间：2012-05-31T18:55:27.060
> 
> 标签：php, model-view-controller, .htaccess, apache2

谢谢阅读。首先，我在根目录中有一个 .htaccess ，其中包含以下语句：

```
# Mod Rewrite
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteRule     ^$              /root/              [L]
    RewriteRule     (.*)            /root/$1            [L]
</IfModule> 
```

在根文件夹中我得到了这个文件：

```
# Mod Rewrite
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$          /root/index.php/$1 [PT,L]
</IfModule> 
```

此外，在文件夹`/root`中，我有三个文件夹`css`：`js`和`images`.

我的应用程序设计为与我的 MVC 框架分离（有点像 CodeGgniter）。所以这是树：

```
- application
    - my application files are there
- root
    - css
    - js
    - images
- grecko
    - my mvc framework files are there 
```

像这样，我可以在不触及应用程序文件夹下运行的整个网站的情况下更新我的框架。

无论如何，我现在想做的就是将我上面说的三个文件夹（`css`，`js`和`images`）移动到里面`/application/assets/`。但由于所有内容都被重定向到`/root/`，我需要一个允许将这样的请求`http://www.domain.tld/css/blabla.css`映射到`/application/assets/css/blabla.css`等的规则。

我确实尝试过，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:27:15.960

试着把它放在你的 web 根目录（不是根文件夹）的 .htaccess 中：

```
RewriteEngine on

RewriteRule ^(css|js|images)(.*) application/assets/$1$2 [L]

RewriteCond %{REQUEST_URI} !^/application/assets [NC]
RewriteRule (.*) root/$1 [L] 
```

避免多余的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:32:41.277

将此代码放入`$DOCUMENT_ROOT/.htaccess`：

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteBase /

    RewriteRule ^(css|js|images)(/.*|)$ application/assets/$1$2 [L,NC]

    RewriteCond %{ENV:REDIRECT_STATUS} !200
    RewriteRule ^ root${REQUEST_URI} [L]
</IfModule> 
```

# sql-server - 观看表格/电子邮件队列 - 发生了什么事？

> ID：10839563
> 
> 赞同：0
> 
> 时间：2012-05-31T18:55:40.960
> 
> 标签：sql-server, email, queue, windows-server-2003

我正在接管一个项目，但在追踪特定机制时遇到了麻烦。我有一个包含多个表和触发器的数据库。其中一张表称为`MailQueue`. 我有一个使用此数据库的票务跟踪 Web 应用程序，该应用程序中的某些操作会导致生成一条消息并将其插入`MailQueue`表中。定期（每 5-10 分钟？很难说）消息被发送并且桌子被清空。此外，每天早上 6 点会发送有关之前通过 Web 应用程序提交的未完成票证的提醒。

几天来，我一直在寻找这些消息的发送地点和方式，无论是定期从队列中发送，还是每天早上 6 点发送。我已经检查了触发器、SQL Server 作业、计划任务以及代码隐藏中的任何地方，但我都快干了。

根据我描述的特征，有没有人有任何聪明的想法是如何发生的？以下是应用程序和环境要素。

*   视窗服务器 2003
*   IIS 6（.NET 1.1 应用程序池）
*   SQL 服务器 2005

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T08:05:56.100

最容易开始的地方是使用 SQL Profiler 来跟踪`MailQueue`表中发生的任何事情，这应该可以帮助您快速缩小范围。

# php - 根据 PHP 和 jQuery 的选择，将文本字段中的数字与数组中的数字进行比较

> ID：10839564
> 
> 赞同：0
> 
> 时间：2012-05-31T18:55:41.330
> 
> 标签：php, javascript, jquery, html, arrays

**问题：**

选择单选按钮并将文本字段中的数字与数组中的数字进行比较。如果为真，则不采取任何行动，否则将 div 与另一个 div 切换。

**HTML 代码：**

```
<!-- Step 1 - Choose level -->
<label class="control-label">Level:</label>
<label class="radio"><input type="radio" name="level" id="level" value="1">C-level</label> 
<label class="radio"><input type="radio" name="level" id="level" value="2">D-level</label>

<!-- Step 2 - This apply only if choice 1 (C-level) is chosen -->
<label class="control-label">Number of authors:</label>
<label class="radio"><input type="radio" name="authors" id="authors" value="1">1 author</label> 
<label class="radio"><input type="radio" name="authors" id="authors" value="2">2 authors</label>

<!-- Step 2 - This apply only if choice 2 (D-level) is chosen -->
<label class="control-label">Credits:</label>
<label class="radio"><input type="radio" name="credits" id="credits" value="1">15 credits</label> 
<label class="radio"><input type="radio" name="credits" id="credits" value="2">30 credits</label>

<!-- Step 3 - This apply for both choice 1 and 2 -->
<label class="control-label">Type of study:</label>
<label class="radio"><input type="radio" name="study" id="study" value="1">Within</label> 
<label class="radio"><input type="radio" name="study" id="study" value="2">Between</label>

<!-- Check the number in this input field against the criteria in $within or $between -->
<label class="control-label">Participants:</label>
<input class="input-small" id="participants" name="participants" type="text"> 
```

**jQuery代码：**

```
<script type="text/javascript">
    $(document).ready(function()
    {       
        var numbers = {
            '1': {  // whithin
                '1': {  // C
                    '1': 36,
                    '2': 63
                },
                '2': {  // D
                    '1': 54,
                    '2': 63
                }
            },
            '2': {  // between
                '1': { // C
                    '1': 60,
                    '2': 105
                },
                '2': { // D
                    '1': 90,
                    '2': 105
                }
                // ...
            }
        };

        $('#participants').change(function() 
        {
            var choice1 = $('input[name=level]:checked').val();

            if (choice1 == '1') 
            {
                var choice2 = $('input[name=authors]:checked').val();
            } 
            else 
            {
                var choice2 = $('input[name=credits]:checked').val();
            }

            var choice3 = $('input[name=study]:checked').val();
            var number = numbers[choice3][choice1][choice2];

            if ($(this).val() < number) 
            {
                $('#part').addClass('error');
            } 
            else 
            {
                $('#part').removeClass('error');
            }
        }
    });
</script> 
```

**扩展解释：**

这个想法是获取每个选择的值并将它们相加，以查看它们是否对应于其中一个数组中给出的值。

**设想：**

1.  用户选择**“C-level”**（值=1），然后选择**“2 个作者”**（值=2），连接时等于 12。
2.  用户选择**“Between”**（值=2）并在文本字段中输入数字**95**（id/name=number）。
3.  当用户将焦点从文本字段移开时，jQuery 应该进行比较。

**结果：**

jQuery 进入数组 $between，查找值 12 并看到它是 105。95 小于且不等于 105，因此 DIV 1 应替换为 DIV 2（同时保留用户输入的值）。

**分区代码：**

```
<div id="part" class="control-group">
    <label class="control-label">Participants:</label>

    <div class="controls">
        <div class="input-prepend">
            <input class="input-small" id="participants" name="participants" type="text">
        </div>
    </div>
</div> 
```

如果用户键入不同的值并移动焦点，则应重新计算。如果文本字段中的值等于或大于数组中的值，则什么也不做。

任何帮助表示赞赏，如果我不是真的被卡住，我就不会输入这个！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:27:03.547

```
var numbers = {
    '1': {  // whithin
        '1': {  // C
            '1': 36,
            '2': 63
        },
        '2': {  // D
            '1': 54,
            '2': 63
        }
    },
    '2': {  // between
        // ...
    }
};
$('#number').change(function() {
    var choice1 = $('input[name=level]:checked').val();
    if (choice1 == '1') {
        var choice2 = $('input[name=authors]:checked').val();
    } else {
        var choice2 = $('input[name=credits]:checked').val();
    }
    var choice3 = $('input[name=study]:checked').val();
    var number = numbers[choice3][choice1][choice2];
    if ($(this).val() < number) {
        $('#yourDiv').addClass('error');
    } else {
        $('#yourDiv').removeClass('error');
    }
}); 
```

我建议使用字符串而不是 1/2 - 它更容易理解且不易出错。

如果 PHP 数组是动态的，您可以使用函数 json_encode 设置 javascript 数组：

```
<script>
    var numbers = <?php echo json_encode($numbers); ?>;
    // rest of code
</script> 
```

# php - 以字符串形式获取 XML 结果

> ID：10839566
> 
> 赞同：0
> 
> 时间：2012-05-31T18:55:44.013
> 
> 标签：php, xml

我有以下生成 XML 的代码：

```
$dom = new DomDocument('1.0');
...snip adding elements to document...
$xmlout = $dom->saveXML();
$api = "myapi.com/myservice?". trim($xmlout); 
```

问题是，如果我查看它的实际值，`$api`它看起来像

```
"myapi.com/myservice?"<xml-structure> 
```

代替

```
"myapi.com/myservice?<xml-structure>" 
```

当我使用 $api 打印出来时`print_r();`，我怀疑这会干扰实际调用 api，因为 url 不正确。我的怀疑是`$dom->saveXML()`返回一个关联数组，而不是实际上是一个字符串——这暗示着如果我回显 $xmlout，它只打印各个节点的值，而不是节点本身。

获取包含所有节点名称等的 XML 字符串表示的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:05:46.383

`saveXML()`返回一个字符串，而不是一个数组。[http://us3.php.net/manual/en/domdocument.savexml.php](http://us3.php.net/manual/en/domdocument.savexml.php)

它有您正在寻找的内容。确保您在源代码视图中查看字符串，而不是在浏览器窗口中。浏览器会将所有标签解释为标签而不显示它们，就像它不显示`<p>`和其他html标签一样。

另外，请注意，如果存在，则 trim() 不会删除标签之间的空格，只会删除字符串的开头和结尾 - 而不是字符串中的每一行。

# android - 为什么我的 SQL 数据库无法存储字符串？

> ID：10839567
> 
> 赞同：0
> 
> 时间：2012-05-31T18:55:45.493
> 
> 标签：android, sql, string

我在字符串 selectedImagePath 中存储了一个图像路径。现在我想将此字符串存储在 SQL 数据库中。因此，我创建了另一个类 ImageAdapter。

您能否查看代码并告诉我为什么当我尝试保存字符串时代码总是崩溃？

这是我的 onActivityResult 方法，如果我检索图像路径并将其存储在字符串 selectedImagePath 中：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == PICK_FROM_FILE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);

            Log.v("IMAGE PATH====>>>> ",selectedImagePath);

            // Save the image path to the database
            long id = mImageHelper.createImage(selectedImagePath);
            if (id > 0) {
                id = mImageRowId;
            }
        }
    }
} 
```

这是我的数据库助手 ImageAdapter：

```
public class ImageAdapter {

//
// Database Related Constants
//
private static final String DATABASE_NAME = "dataImage";
private static final String DATABASE_TABLE = "remindersImage";
private static final int DATABASE_VERSION = 4;

public static final String KEY_IMAGE = "image";
public static final String KEY_ROWID = "_id";

private static final String TAG = "ImageAdapter";
private DatabaseHelper mImageHelper;
private SQLiteDatabase mImageDb;

/**
 * Database creation SQL statement
 */
private static final String DATABASE_CREATE =
    "create table " + DATABASE_TABLE + " ("
            + KEY_ROWID + " integer primary key autoincrement, "
            + KEY_IMAGE + " text not null)"; 

private final Context mImageCtx;

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(DATABASE_CREATE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
        onCreate(db);
    }
}

/**
 * Constructor - takes the context to allow the database to be
 * opened/created
 * 
 * @param ctx the Context within which to work
 */
public ImageAdapter(Context ctx) {
    this.mImageCtx = ctx;
}

/**
 * Open the database. If it cannot be opened, try to create a new
 * instance of the database. If it cannot be created, throw an exception to
 * signal the failure
 * 
 * @return this (self reference, allowing this to be chained in an
 *         initialization call)
 * @throws SQLException if the database could be neither opened or created
 */
public ImageAdapter open() throws SQLException {
    mImageHelper = new DatabaseHelper(mImageCtx);
    mImageDb = mImageHelper.getWritableDatabase();
    return this;
}

public void close() {
    mImageHelper.close();
}

public long createImage(String selectedImagePath) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_IMAGE, selectedImagePath);

    return mImageDb.insert(DATABASE_TABLE, null, cv);
}

public boolean deleteImage(long rowId) {

    return mImageDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
}

public Cursor fetchAllImages() {

    return mImageDb.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_IMAGE}, null, null, null, null, null);
}

public Cursor fetchImage(long rowId) throws SQLException {

    Cursor mCursor =

            mImageDb.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
                    KEY_IMAGE}, KEY_ROWID + "=" + rowId, null,
                    null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

public boolean updateImage(long rowId, String image) {
    ContentValues args = new ContentValues();
    args.put(KEY_IMAGE, image);

    return mImageDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
}
} 
```

更新：这是我的 LogCat：

```
05-31 21:10:14.947: E/AndroidRuntime(533): FATAL EXCEPTION: main
05-31 21:10:14.947: E/AndroidRuntime(533): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=2, result=-1, data=Intent { dat=content://media/external/images/media/22 }} to activity {com.xyz.android.taskreminder/com.xyz.android.taskreminder.ReminderEditActivity}: java.lang.NullPointerException
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.ActivityThread.access$1100(ActivityThread.java:123)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.os.Looper.loop(Looper.java:137)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-31 21:10:14.947: E/AndroidRuntime(533):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 21:10:14.947: E/AndroidRuntime(533):  at java.lang.reflect.Method.invoke(Method.java:511)
05-31 21:10:14.947: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-31 21:10:14.947: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-31 21:10:14.947: E/AndroidRuntime(533):  at dalvik.system.NativeStart.main(Native Method)
05-31 21:10:14.947: E/AndroidRuntime(533): Caused by: java.lang.NullPointerException
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.database.sqlite.SQLiteStatement.releaseAndUnlock(SQLiteStatement.java:290)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:115)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1718)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1591)
05-31 21:10:14.947: E/AndroidRuntime(533):  at com.xyz.android.taskreminder.ImageAdapter.createImage(ImageAdapter.java:114)
05-31 21:10:14.947: E/AndroidRuntime(533):  at com.xyz.android.taskreminder.ReminderEditActivity.onActivityResult(ReminderEditActivity.java:233)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.Activity.dispatchActivityResult(Activity.java:4649)
05-31 21:10:14.947: E/AndroidRuntime(533):  at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
05-31 21:10:14.947: E/AndroidRuntime(533):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:51:45.147

首先，让我们清理一些代码:)

改变这个

```
private static final String DATABASE_CREATE =
"create table " + DATABASE_TABLE + " ("
        + KEY_ROWID + " integer primary key autoincrement, "
        + KEY_IMAGE + " text not null)"; 
```

至

```
private static final String DATABASE_CREATE =
"create table if not exists " + DATABASE_TABLE + " ("
        + KEY_ROWID + " integer primary key autoincrement, "
        + KEY_IMAGE + " text not null)"; 
```

现在，卸载应用程序或清除数据，以便删除之前创建的任何数据库。试用您的应用，然后发布结果。还请发布此行的结果：

```
Log.v("IMAGE PATH====>>>> ", selectedImagePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:06:00.800

你`ImageAdapter.open()`在插入之前打电话吗？如果不是，那么您`mImageDb`将是`null`，那将导致崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:01:23.240

编辑：
Ole 恰当地指出，我假设您正在存储图像，但是您正在存储**图像路径**，所以现在我建议您遵循 Ole 的回答。

为了进一步说明我为什么建议这样做，以下是：
“尝试在已经包含同名表、索引或视图的数据库中创建新表通常是错误的。但是，如果“ IF NOT EXISTS" 子句被指定为 CREATE TABLE 语句的一部分，并且同名的表或视图已经存在，CREATE TABLE 命令根本不起作用（并且不返回错误消息）。如果由于现有索引，即使指定了“IF NOT EXISTS”子句，也无法创建表。”
资料来源：[sqlite.org](http://www.sqlite.org/lang_createtable.html)

另外，我总是建议使用`try`-`catch`块并`logs`尽可能多地进行故障排除。

# bash - 在 CygWin 下 find(1)：“参数格式不正确”

> ID：10839568
> 
> 赞同：6
> 
> 时间：2012-05-31T18:55:45.787
> 
> 标签：bash, shell, command-line, cygwin

我正在尝试从源代码构建 Bochs。因此，我编写了一个配置脚本。我的脚本不是从头开始编写的——它基于 `.conf.win32-vcpp`Bochs tarball 中的 sh 脚本。导致问题的脚本部分**在原始**Nochs tarball中**没有任何更改**- 我没有编写那部分。

# 我的问题：

每次我执行我的 sh 脚本时，都会出现以下错误：

```
[...]
config.status: creating host/linux/pcidev/Makefile
config.status: creating config.h
config.status: creating ltdlconf.h
config.status: ltdlconf.h is unchanged
FIND: Parameterformat falsch 
```

*****（*Parameterformat falsch*表示*参数格式不正确*）

但我不需要执行大厅脚本。那个摩擦片段就足够了：

```
sh-4.1$ find -name Makefile
FIND: Parameterformat falsch 
```

*****（*Parameterformat falsch*表示*参数格式不正确*）

# 我的问题：

*   该脚本片段有什么问题：`find . -name Makefile`？任何的想法？
*   如何重写该部分代码以使其正常工作？

# 我的脚本：

```
#!/bin/sh

set echo

./configure --target=pentium-windows \
            --enable-sb16 \
            --enable-ne2000 \
            --enable-all-optimizations \
            --enable-cpu-level=6 \
            --enable-x86-64 \
            --enable-pci \
            --enable-clgd54xx \
            --enable-usb \
            --enable-usb-ohci \
            --enable-show-ips \
            --enable-disasm \
            --enable-iodebug \
            --enable-logging \
            --enable-debugger-gui \
            --disable-readline \
            --without-x \
            --with-win32 \
            --with-rfb \
            --with-nogui \
            --with-wx

unset echo

# Fix up all makefiles so that nmake can handle them. 
```

**-->** *狗的埋葬地点：*

```
for i in `find . -name Makefile`; do
  echo Removing curly brackets in $i for NMAKE.
  mv $i $i.tmp
  sed -e 's/{/(/g' -e 's/}/)/g' < $i.tmp > $i
  rm -f $i.tmp
done 
```

# 我的环境：

我不知道这是否重要，但我没有使用普通的 bash。我使用**cygwin**的`sh`命令（Win64）提供的外壳。

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T19:31:16.233

确保您的 Cygwin 安装包含该`findutils`软件包，并且 Cygwin`find`是您的第一个`PATH`（在本机 Windows 之前）。

如果`find --help`返回`FIND: Paramater format not correct`（或您本地化的等价物），这是一个确定的迹象，表明它是当前使用的 Windows 版本，而不是 Cygwin 版本。

# html - stackoverflow 如何制作其 Tag 输入字段？

> ID：10839570
> 
> 赞同：51
> 
> 时间：2012-05-31T18:55:46.087
> 
> 标签：html, input, tags

StackOverflow 如何创建它的标签系统。它如何格式化文本区域中的html？

我只是不知道从哪里开始。如果有人可以指导我，那么我可以知道该采取什么方向，这样我就可以编写一些有人可以检查的代码。

**像这样：**

![在此处输入图像描述](../Images/10d087185f22c720590e05660066fc50.png)

**编辑：基本上，当我按空格键时，如何在 div 内部添加一个新元素/div？**

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-04-01T07:57:51.587

Bootstrap 解决方案呢？

你可以试试这个：

HTML 代码：

```
<input type="text" value="html,input,tag" data-role="tagsinput"></input> 
```

对于 CSS，调用这两个文件：

```
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.css"> 
```

对于 Javascript，调用这两个文件：

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="http://bootstrap-tagsinput.github.io/bootstrap-tagsinput/dist/bootstrap-tagsinput.min.js"></script> 
```

代码将生成以下结果：

[![在此处输入图像描述](../Images/78f83babcfe3c95d158afa94b18c1294.png)](https://i.stack.imgur.com/0e482.png)

## **[看看这个。](https://bootstrap-tagsinput.github.io/bootstrap-tagsinput/examples/)**

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-31T18:59:48.137

我会做的是：

*   创建一个带边框的主 DIV（比如这里的边框 1px solid #000）
*   之后，在这个 DIV 中，我将创建另一个 DIV (float: left;)、另一个 DIV (float: right) 和右 div 内的一个输入。

当您在输入中写入并假设您选择 HTML 时，它会在左侧 DIV 中创建一个跨度并减小右侧 div 的宽度以匹配剩余大小。当然，在您的跨度内有带有删除符号的文本 HTML。

您可以使用 jQuery 轻松完成。

例子：

```
<div id="master_div">
    <div id="categories">

    </div>
    <div id="input">
        <input type="text" value="" />
    </div>
</div> 
```

你写了一些 jQuery / JS

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-31T19:01:22.740

它没有。如果您查看 DOM，您最初看到的只是一个输入框。添加标签后，它会在带有该标签的输入框之前插入一个`<span>`标签，并且它是删除图标。输入框现在位于该`<span>`标签的右侧。当您单击标签进行编辑时，它会在其位置放置一个文本框，以便您进行编辑。所有这一切都是用 Javascript 完成的，并且有一些 JQuery 插件可以帮助您做到这一点。这是来自快速谷歌搜索的一个：http: [//xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)

就样式而言，`<span>`元素可以有任何你想要的 CSS。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-07T14:47:32.340

```
var es = document.querySelectorAll('.input-categories');
for (var i = 0; i < es.length; i++) {
  es[i]._list = es[i].querySelector('ul');
  es[i]._input = es[i].querySelector('input');
  es[i]._input._icategories = es[i];
  es[i].onkeydown = function(e){
    var e = event || e;
    if(e.keyCode == 13) {
      var c = e.target._icategories;
      var li = document.createElement('li');
      li.innerHTML = c._input.value;
      c._list.appendChild(li);
      c._input.value = '';
      e.preventDefault();
    }
  }
}
```

```
*{
  margin: 0px;
  padding: 0px;
}

.input-categories{
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  border: 1px solid black;
}

.input-categories ul{
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  list-style-type: none;
  flex-wrap: wrap;
}

.input-categories li{
  border: 1px solid black;
  border-radius: 2px;
  padding: 1px;
  margin: 1px;
}
.input-categories input{
  flex: 1 1 auto;
  align-self: flex-start;
}
```

```
<div class="input-categories">
  <ul>
    <li>moscow</li>
    <li>new york</li>
  </ul>
  <input type="text"/>
</div>

<div class="input-categories">
  <ul>
    <li>CSS</li>
    <li>PHP</li>
  </ul>
  <input type="text"/>
</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-13T18:34:41.747

## 反应功能组件

```
const AutoList=()=>{
const [currentTagText, setCurrentTagText] = useState("");
const [tags, setTags] = useState(["javascript"]);

const handleTag = (e) => {
   setCurrentTagText(e.target.value);
   if (e.keyCode == 13 && currentTagText) {
    setTags((prevTags) => [...prevTags, currentTagText]);
    setCurrentTagText("");
   } else if (e.keyCode == 32 && currentTagText) {
    setTags((prevTags) => [...prevTags, currentTagText]);
    setCurrentTagText("");
   }
};
const removeTag = (index) => {
   const newTagArray = tags;
   newTagArray.splice(index, 1);
   setTags([...newTagArray]);
};

return (

  <div className="masterStackDiv">
          <div
            className="stackTags"
            style={{ display: tags.length > 0 ? "flex" : "none" }}
          >
            {tags.map((tag) => {
              return (
              <div className="stackTag">
                 <button
                    onClick={() => removeTag(index)}
                    className="tagCloseBtn"
                  >
                    x
                  </button>
                  #{tag}
              </div>
               )
            })}
          </div>
          <div className="stackInput">
            <input
              type="text"
              onKeyDown={handleTag}
              onChange={handleTag}
              value={currentTagText}
            />
          </div>
        </div>
 )

} 
```

CSS：-

```
.masterStackDiv {
  width: auto;
  background-color: transparent;
  border: none;
  display: flex;
  align-items: center;
}
.stackInput input[type="text"] {
  border: none;
  background-color: transparent;
  color: white;
  font-family: "Segoe UI";
  font-size: 0.8em;
  float: right;
  margin-left: 5px;
  width: auto;
  border-bottom: 2px solid white;
}

.stackTag {
  background-color: #707070;
  color: white;
  height: 20px;
  width: auto;
  border-radius: 10px;
  font-size: 0.7em;
  padding: 5px;
  margin: 3px;
  display: flex;
  align-items: center;
}

.stackTags {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 30px;
  width: auto;
}
.tagCloseBtn {
  border: none;
  background-color: transparent;
  border-radius: 5px;
}
.tagCloseBtn:hover {
  background-color: white;
  cursor: pointer;
} 
```

```
const {useState} = React

const StackTag=()=>{
 const [currentTagText, setCurrentTagText] = useState("");
 const [tags, setTags] = useState(["javascript"]);

 const handleTag = (e) => {
    setCurrentTagText(e.target.value);
    if (e.keyCode == 13 && currentTagText) {
      setTags((prevTags) => [...prevTags, currentTagText]);
      setCurrentTagText("");
    } else if (e.keyCode == 32 && currentTagText) {
      setTags((prevTags) => [...prevTags, currentTagText]);
      setCurrentTagText("");
    }
  };

  const removeTag = (index) => {
    const newTagArray = tags;
    newTagArray.splice(index, 1);
    setTags([...newTagArray]);
  };

  return (
       <div className="masterStackDiv">
              <div
                className="stackTags"
                style={{ display: tags.length > 0 ? "flex":"none"}} 
              >
                {tags.map((tag, index) => {
                  return (
                    <div className="stackTag" key={index}>
                      <button
                        onClick={() => removeTag(index)}
                        className="tagCloseBtn"
                      >
                        x
                      </button>
                      #{tag}
                    </div>
                  );
                })}
              </div>
              <div className="stackInput">
                <input
                  type="text"
                  onKeyDown={handleTag}
                  onChange={handleTag}
                  value={currentTagText}
                />
              </div>
            </div>
            )
       }
ReactDOM.render(<StackTag/>,document.getElementById("react"))
```

```
.masterStackDiv {
  width: auto;
  background-color: transparent;
  border: none;
  display: flex;
  align-items: center;
}
.stackInput input[type="text"] {
  border: none;
  background-color: transparent;
  color: black;
  font-family: "Segoe UI";
  font-size: 0.8em;
  float: right;
  margin-left: 5px;
  width: auto;
  border-bottom: 2px solid black;
}

.stackTag {
  background-color: #707070;
  color: white;
  height: 20px;
  width: auto;
  border-radius: 10px;
  font-size: 0.7em;
  padding: 5px;
  margin: 3px;
  display: flex;
  align-items: center;
}

.stackTags {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 30px;
  width: auto;
}
.tagCloseBtn {
  border: none;
  background-color: transparent;
  border-radius: 5px;
}
.tagCloseBtn:hover {
  background-color: white;
  cursor: pointer;
}
```

```
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/16.8.4/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.4/umd/react-dom.production.min.js"></script>
</head>
<body>
<div id="react"></div>
</body>
</html>
```

# html - 如何创建具有 100% 宽度和左右边距的 div？

> ID：10839575
> 
> 赞同：2
> 
> 时间：2012-05-31T18:56:29.207
> 
> 标签：html, css

我想要一个 100% 宽度和高度的 div，但有左右边距（我也想要顶部和底部边距，但一次只有一件事）。我已经能够实现一个宽度和高度为 100% 的 div，具有顶部和左侧边距，但无法识别底部和右侧边距。我不确定我做错了什么。这是我用过的css：

```
#link_wrapper {
    margin:32px 73px 45px 73px;
    width:100%;
    height:100%;
    position:fixed;
    z-index:1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:10:31.297

您可以使用 css box-sizing 来完成它（IE8+）。这是一个示例[http://jsfiddle.net/Z9xHs/](http://jsfiddle.net/Z9xHs/)

HTML

```
<div class="content">hi</div> 
```

CSS

```
body, html { height:100%; }
.content { 
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;
    box-sizing:border-box;
    padding:32px 73px 45px 73px;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:02:14.477

看一看。我想这就是你要找的 -> [http://tinkerbin.com/qslYAlq8](http://tinkerbin.com/qslYAlq8) 将宽度设置为自动，左右设置为 0；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:36:01.017

也许您可以通过使用您用于`#link_wrapper`.

`#parent_container{ padding:32px 73px 45px 73px; }`

然后`#link_wrapper`不需要任何保证金。

# sql - 关键字“IF”附近的语法不正确

> ID：10839576
> 
> 赞同：0
> 
> 时间：2012-05-31T18:56:32.167
> 
> 标签：sql, sql-server

我正在尝试将`IF`.. `ELSE`in`WHERE`子句如下所示，但收到错误消息

> “关键字 'IF' 附近的语法不正确。')' 附近的语法不正确。”

```
DECLARE @categoryID int

SET @categoryID = 0

SELECT * from SE_Auctions
  WHERE ItemCategoryID IN
  (
   IF @categoryID = 0
     SELECT CategoryID from SE_ItemCategory
   ELSE
     SELECT CategoryID from SE_ItemCategory 
    WHERE ParentID = @categoryID 
          OR CategoryID = @categoryID
  ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:01:22.837

您不能`IF`以这种方式使用内部子选择。相反，使用 an来测试子句`AND`中变量的值`@categoryID`。`WHERE`这将需要两个`()`组之间具有逻辑`OR`关系。

```
WHERE 
-- First case, @categoryID = 0
(@categoryID = 0 AND ItemCategoryID IN (
  SELECT CategoryID from SE_ItemCategory
))
-- Other case, @categoryID <> 0
OR (@categoryID <> 0 AND ItemCategoryID IN (
  SELECT CategoryID from SE_ItemCategory 
    WHERE ParentID=@categoryID OR CategoryID=@categoryID
)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:02:50.637

您不能`if`在这样的 SQL 语句中间放置一个。有几种方法可以做到这一点：

```
--Example 1
DECLARE @categoryID int = 0

SELECT * from SE_Auctions
WHERE 
ItemCategoryID IN
(SELECT CategoryID from SE_ItemCategory where @categoryID=0
union all
SELECT CategoryID from SE_ItemCategory 
    WHERE ParentID=@categoryID OR CategoryID=@categoryID) 

--Example 2
DECLARE @categoryID int = 0

SELECT * from SE_Auctions
WHERE 
(@categoryID=0
and ItemCategoryID IN
(SELECT CategoryID from SE_ItemCategory))
or (@categoryID <> 0
and ItemCategoryID IN
(SELECT CategoryID from SE_ItemCategory 
    WHERE ParentID=@categoryID OR CategoryID=@categoryID))

--Example 3
DECLARE @categoryID int = 0

SELECT * from SE_Auctions
WHERE 
ItemCategoryID IN
(SELECT CategoryID from SE_ItemCategory 
    WHERE ParentID=@categoryID OR CategoryID=@categoryID or @categoryID=0)) 
```

# tridion-2011 - SiteEdit DD4T 加载错误

> ID：10839577
> 
> 赞同：1
> 
> 时间：2012-05-31T18:56:33.037
> 
> 标签：tridion-2011, dd4t

我在加载使用 DD4T 使用 Razor 模板创建的页面时遇到问题。

我使用 DD4T 模板向内容代理发布了一个页面，并使用 DD4T 编写了一个 Razor 模板页面。

我在 Razor 页面中添加了 SiteEdit 特定评论。

我将 siteEdit 登台服务器 url 指向我托管 DD4T 应用程序的网络服务器。

当我访问 Razor 页面时，启用了 siteEdit 按钮，当我单击 siteEdit 按钮时，它开始初始化组件并给出以下错误。

![在此处输入图像描述](../Images/78d11dcffc42795d9a6cdd713e2ed248.png)

我想这与 DD4T 模板有关，它提供了 xml 类型的输出。

请帮忙。嗨奎里恩，

这是我的 html 文件中的源代码。

嗨奎里恩，

```
<!DOCTYPE html>
<html>
<head>
    <title>News</title>
    <link href="/FirstDD4TMVCApplicationsiteedit/Content/Site.css" rel="stylesheet" type="text/css" />
    <script src="/FirstDD4TMVCApplicationsiteedit/Scripts/jquery-1.4.4.min.js" type="text/javascript"></script>
<link href="/SiteEdit/App_Themes/SiteEdit/Calendar.css" type="text/css" rel="stylesheet" /><link href="/SiteEdit/App_Themes/SiteEdit/SiteEditBorders.css" type="text/css" rel="stylesheet" /></head>

<body>

<div>
<div> 
  <!-- Start SiteEdit Component Presentation: {"ID" : "CP0", "ComponentID" : "tcm:8-31855", "ComponentTemplateID" : "tcm:8-31851-32", "ComponentVersion" : 1, "IsQueryBased" : false, "SwapLabel" : "default" } --> 
</div> 
<div> 
  <!-- Start SiteEdit Component Field: {"ID" : "ContentHeading1", "IsMultiValued" : true, "XPath" : "tcm:Content/custom:Content/custom:Heading[1]" } --> 
 TestNews 
</div> 
</div>
<!-- SiteEdit Settings: {"PageID":"tcm:8-31856-64", "PageVersion":2, "ComponentPresentationLocation":1, "BluePrinting" : {"PageContext" : "tcm:0-0-1", "ComponentContext" : "tcm:0-8-1", "PublishContext" : "tcm:0-8-1" }} -->  
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T20:47:52.073

问题已解决。从 DD4T 的 PageSiteEdit 中添加标签和删除蓝图属性已经解决了这个问题。

修改后的源代码如下所示。

```
 <div> <span> <!-- Start SiteEdit Component Presentation: {"ID" : "CP0", "ComponentID" : "tcm:8-31855", "ComponentTemplateID" : "tcm:8-31851-32", "ComponentVersion" : 1, "IsQueryBased" : false, "SwapLabel" : "default" } -->

    <span>

 <h2> <!-- Start SiteEdit Component Field: {"ID" : "ContentHeading1", "IsMultiValued" : true, "XPath" : "tcm:Content/custom:Content/custom:Heading[1]" } -->
   TestNews
</h2>
</span> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T13:55:30.850

您有一个 SiteEdit 组件字段标记，它不在 SiteEdit 组件演示文稿中。这是不正确的，因为 SiteEdit 应该如何知道该字段属于哪个组件？我的猜测是这导致了你的问题。你可以试试这个吗？

```
<div> 
  <!-- Start SiteEdit Component Presentation: {"ID" : "CP0", "ComponentID" : "tcm:8-31855", "ComponentTemplateID" : "tcm:8-31851-32", "ComponentVersion" : 1, "IsQueryBased" : false, "SwapLabel" : "default" } --> 
  <div> 
    <!-- Start SiteEdit Component Field: {"ID" : "ContentHeading1", "IsMultiValued" : true, "XPath" : "tcm:Content/custom:Content/custom:Heading[1]" } --> 
 TestNews 
  </div>
</div> 
<!-- SiteEdit Settings: {"PageID":"tcm:8-31856-64", "PageVersion":2, "ComponentPresentationLocation":1, "BluePrinting" : {"PageContext" : "tcm:0-0-1", "ComponentContext" : "tcm:0-8-1", "PublishContext" : "tcm:0-8-1" }} --> 
```

# qt - 覆盖 Qt 4.8.1 的 OpenGL 选择

> ID：10839581
> 
> 赞同：3
> 
> 时间：2012-05-31T18:56:54.283
> 
> 标签：qt, linker, shared-libraries, ubuntu-11.04, dynamic-linking

我在同一台 Ubuntu 11.04 机器上有两个不同的 libGL 库。一个库是为 Nvidia 的显卡安装的，`/usr/lib/libGL.so`另一个是随 Ubuntu 一起安装的默认库，位于`usr/lib/x86_64-linux-gnu/mesa/libGL.so`.

现在，我遇到的问题是从 Ubuntu 的存储库下载的 Qt 库链接到 mesa 库，但我想链接到 Nvidia 的库。这可能会提供更好的性能，并且在编译程序时使用 mesa 的 libGL 会出现问题。这些已通过以下方式修复：

```
export LIBGL_ALWAYS_INDIRECT=1 
```

据我所知，这迫使 X11 选择 openGL 库，并且它选择了正确的库。但是，我更希望 Qt 和使用 QtOpenGL 编译的程序直接与正确的库链接。

我下载了 Qt 并使用这些选项自己编译了它：

```
./configure -nomake examples -nomake demos -nomake tools -release -no-webkit 
```

我希望链接器会使用正确的库。没有骰子。接下来，我尝试`mkspec/linux-g++-64/qmake.conf`使用这些变量集进行编辑：

```
QMAKE_LIBDIR_X11      = /usr/lib/x86_64-linux-gnu
QMAKE_LIBDIR_OPENGL   = /usr/lib 
```

是否有一个选项可以强制链接特定库而不是另一个库（特别是在运行配置脚本时）？我不希望以任何特定方式配置链接器。我也不想删除台面库。

如果没有这样的配置脚本标志，有没有办法设置链接器使用的库的优先级？

在最坏的情况下，我可能会在`./configure`运行后更改所有 Makefile。Grep 整个 Qt 树以供使用`-lGL`并将其更改为`/usr/lib/libGL.so`. 我觉得这是一个相当的黑客。

**更新**

一些成功。我在 Qt 树上为 lGL 做了一个 grep，发现其他 mkspecs（除了`linux-g++-64`）使用其他变量来指定 OpenGL 路径。所以我将它们添加到`linux-g++-64`mkspec 中，结果如下`mkspec/linux-g++-64/qmake.conf`：

```
QMAKE_LIBS_OPENGL     = /usr/lib/libGL.so
QMAKE_LIBS_OPENGL_QT  = /usr/lib/libGL.so 
```

所以我设置了我想要直接认为它会正确链接的库的路径。确实这是个好消息，在编译期间，-lGL 从未使用过。但是，最终的结果`lib/libQtOpenGL.so`仍然是链接到了错误的库：

```
$ ldd lib/libQtOpenGL.so
    linux-vdso.so.1 =>  (0x00007fffd83ff000)
    libQtGui.so.4 => (edited)lib/libQtGui.so.4 (0x00007f554c684000)
    libQtCore.so.4 => (edited)lib/libQtCore.so.4 (0x00007f554c19c000)
    libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007f554beda000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f554bcd6000)
    **libGL.so.1 => /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1 (0x00007f554ba7a000)**
    libXrender.so.1 => /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007f554b86e000)
    libX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007f554b536000)
    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007f554b22f000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007f554afaa000)
    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f554ad94000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007f554a9f5000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f554a7d7000)
    libglib-2.0.so.0 => /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007f554a4e1000)
    libpng12.so.0 => /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007f554a2ba000)
    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007f554a0a1000)
    libSM.so.6 => /usr/lib/x86_64-linux-gnu/libSM.so.6 (0x00007f5549e99000)
    libICE.so.6 => /usr/lib/x86_64-linux-gnu/libICE.so.6 (0x00007f5549c7f000)
    libfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007f5549a48000)
    libXext.so.6 => /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007f5549835000)
    libgthread-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgthread-2.0.so.0 (0x00007f554962f000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007f5549427000)
    /lib64/ld-linux-x86-64.so.2 (0x00007f554d66f000)
    libglapi.so.0 => /usr/lib/x86_64-linux-gnu/libglapi.so.0 (0x00007f5549203000)
    libXdamage.so.1 => /usr/lib/x86_64-linux-gnu/libXdamage.so.1 (0x00007f5548fff000)
    libXfixes.so.3 => /usr/lib/x86_64-linux-gnu/libXfixes.so.3 (0x00007f5548df9000)
    libXxf86vm.so.1 => /usr/lib/x86_64-linux-gnu/libXxf86vm.so.1 (0x00007f5548bf3000)
    libdrm.so.2 => /usr/lib/x86_64-linux-gnu/libdrm.so.2 (0x00007f55489e7000)
    libxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007f55487cb000)
    libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007f554858e000)
    libuuid.so.1 => /lib/x86_64-linux-gnu/libuuid.so.1 (0x00007f5548389000)
    libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007f554815f000)
    libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007f5547f5b000)
    libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007f5547d55000) 
```

我不知道为什么，我直接指定了要使用的库并且它被正确传递给`g++`，但链接器显然忽略了它。我相信这不再是 Qt 问题，而是链接器问题。

是否有任何方法`ldconfig`或其他工具来指定链接到的库以防万一`-lGL`？我知道其他库有一个程序可以组织要使用的库（`libusb-config`来自我的），但我认为 openGL 不是这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:39:58.873

链接器需要重新配置才能为 openGL 找到正确的库。一个这样的选项，经常皱眉头是更改`LD_LIBRARY_PATH`变量以包含您希望使用的 openGL 库的路径。在我的情况下，它位于`/usr/lib`所以我相应地更改了变量。

`export LD_LIBRARY_PATH=/usr/lib/fsl/4.1:/usr/lib`

在使用相同的选项运行`./configure`脚本并制作之后，它终于指向了正确的库。

```
ldd lib/libQtOpenGL.so
    linux-vdso.so.1 =>  (0x00007fff04ebf000)
    libQtGui.so.4 => (edited)Qt4.8.1/lib/libQtGui.so.4 (0x00007fad8826c000)
    libQtCore.so.4 => (edited)Qt4.8.1/lib/libQtCore.so.4 (0x00007fad87d84000)
    libfreetype.so.6 => /usr/lib/x86_64-linux-gnu/libfreetype.so.6 (0x00007fad87ac2000)
    libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fad878be000)
    **libGL.so.1 => /usr/lib/libGL.so.1 (0x00007fad875a8000)**
    libXrender.so.1 => /usr/lib/x86_64-linux-gnu/libXrender.so.1 (0x00007fad8739c000)
    libX11.so.6 => /usr/lib/x86_64-linux-gnu/libX11.so.6 (0x00007fad87064000)
    libstdc++.so.6 => /usr/lib/x86_64-linux-gnu/libstdc++.so.6 (0x00007fad86d5d000)
    libm.so.6 => /lib/x86_64-linux-gnu/libm.so.6 (0x00007fad86ad8000)
    libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fad868c2000)
    libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 (0x00007fad86523000)
    libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fad86305000)
    libglib-2.0.so.0 => /lib/x86_64-linux-gnu/libglib-2.0.so.0 (0x00007fad8600f000)
    libpng12.so.0 => /lib/x86_64-linux-gnu/libpng12.so.0 (0x00007fad85de8000)
    libz.so.1 => /lib/x86_64-linux-gnu/libz.so.1 (0x00007fad85bcf000)
    libSM.so.6 => /usr/lib/x86_64-linux-gnu/libSM.so.6 (0x00007fad859c7000)
    libICE.so.6 => /usr/lib/x86_64-linux-gnu/libICE.so.6 (0x00007fad857ad000)
    libfontconfig.so.1 => /usr/lib/x86_64-linux-gnu/libfontconfig.so.1 (0x00007fad85576000)
    libXext.so.6 => /usr/lib/x86_64-linux-gnu/libXext.so.6 (0x00007fad85363000)
    libgthread-2.0.so.0 => /usr/lib/x86_64-linux-gnu/libgthread-2.0.so.0 (0x00007fad8515d000)
    librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 (0x00007fad84f55000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fad89257000)
    libnvidia-tls.so.290.10 => /usr/lib/tls/libnvidia-tls.so.290.10 (0x00007fad84d52000)
    libnvidia-glcore.so.290.10 => /usr/lib/libnvidia-glcore.so.290.10 (0x00007fad82a4a000)
    libxcb.so.1 => /usr/lib/x86_64-linux-gnu/libxcb.so.1 (0x00007fad8282e000)
    libpcre.so.3 => /lib/x86_64-linux-gnu/libpcre.so.3 (0x00007fad825f1000)
    libuuid.so.1 => /lib/x86_64-linux-gnu/libuuid.so.1 (0x00007fad823ec000)
    libexpat.so.1 => /lib/x86_64-linux-gnu/libexpat.so.1 (0x00007fad821c2000)
    libXau.so.6 => /usr/lib/x86_64-linux-gnu/libXau.so.6 (0x00007fad81fbe000)
    libXdmcp.so.6 => /usr/lib/x86_64-linux-gnu/libXdmcp.so.6 (0x00007fad81db8000) 
```

我相信还有另一种可能且可能更好的选择。在 Ubuntu 11.04 中，链接器被配置为在`/usr/lib/x86_64-linux-gnu/mesa/`目录中查找配置文件位于`/etc/ld.so.conf.d/x86_64-linux-gnu_GL.conf`.

如果编辑此文件以反映不同的路径，则链接器可能会选择该库。链接器的库搜索优先级似乎是：

`LD_LIBRARY_PATH`=> 位于 => 中的文件`/etc/ld.so.conf.d`最后求助于在默认路径中搜索库。

在 /etc/ld.so.conf.d 中相应地编辑文件可能是一个更好的解决方案，但在我的情况下，我没有编辑这些文件的权限，所以编辑`LD_LIBRARY_PATH`就可以了。

# html - 对齐段落

> ID：10839582
> 
> 赞同：3
> 
> 时间：2012-05-31T18:56:55.553
> 
> 标签：html, css

嗨，我有一个使用 html 和 css 的简单问题......希望有人可以帮助我度过一个“duh”的时刻。

这是[jsfiddle](http://jsfiddle.net/nathanfrancy/4t2N9/3/)。

我计划在左边有活动日期，在右边有活动信息，想要一个两列的外观......而且我现在拥有的信息会从头开始，与日期保持一致。我希望信息对齐。

我知道我可以使用 div-float 或使用表格轻松完成此操作，但我不想要其中任何一个。也许我使用了错误的元素..不确定。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:04:16.800

我建议一个负数`text-indent`加上一个`margin-left`相同数量的：

```
#container p {
    text-indent: -4em;
    margin-left: 4em;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/4t2N9/4/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:15:14.017

在你的小提琴中试试这个 CSS：

```
#container {
    width: 270px;
    background: #e9cfa7;
}
#container p:not(span) { padding-left: 70px }
#container p span {
    background-color: #5d396e;
    float: left;
    display: block;
    width: auto;
    margin-left: -70px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:16:46.083

[这是一个替代解决方案](http://jsfiddle.net/4t2N9/15/)，使用 a `dl`，但它假定您已`.clearfix`包含在您的样式中。

HTML：

```
<dl id="container" class="clearfix">
    <dt>05/31/12</dt>
    <dd>The first event looks like this. It has to wrap around.</dd>
    <dt>06/01/12</dt>
    <dd>The second event looks like this. It has to wrap around too.</dd>
    <dt>06/01/12</dt>
    <dd>Thesecondeventlookslikethis.Ithastowraparoundtoo.</dd> 
</dl> 
```

CSS：

```
dl#container{
    width:270px;
    background-color:#e9cfa7;
}

dt{
    clear:left;
    float:left;
    width:25%; 
    margin-right:2%;
    background-color:#5d396e;
}

dd{
    width:70%;
    float:left;
    display:inline-block;
    word-wrap:break-word;
}

.clearfix:after {
    content: ".";
    display: block;
    height: 0;
    clear: both;
    visibility: hidden;
    }

.clearfix {display: inline-block;}  /* for IE/Mac */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T19:37:30.410

```
#container p {position: relative; padding: 0 4px 4px 80px;}

#container p span {background-color: #5d396e; color: #FFF;  display:block; width: 60px;position: absolute; left: 4px; top: 4px; padding: 4px} 
```

# artificial-intelligence - 训练函数和学习函数有什么区别

> ID：10839588
> 
> 赞同：6
> 
> 时间：2012-05-31T18:57:20.813
> 
> 标签：artificial-intelligence, neural-network

人工神经网络中的训练功能和学习功能有什么区别？我找到[了这个](http://www.mathworks.com/products/neural-network/description4.html)，但无法正确理解。有人请解释一下吗？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T15:07:01.620

训练函数是用于训练神经网络识别特定输入并将其映射到输出的整体算法。一个常见的例子是[反向传播](http://en.wikipedia.org/wiki/Backpropagation)及其许多变化和权重/偏差训练。学习函数处理个人的权重和阈值，并决定如何操纵它们。这些通常（但不总是）采用某种形式的[梯度下降](http://en.wikipedia.org/wiki/Gradient_descent)。示例包括[模拟退火](http://en.wikipedia.org/wiki/Simulated_annealing)、[Silva 和 Almeida 算法](http://www.lx.it.pt/~lbalmeida/papers/AlmeidaHNC.pdf)、使用[动量](http://www.willamette.edu/~gorr/classes/cs449/Momentum/momentum.html)和[自适应学习率](http://www.math.upatras.gr/~dgs/papers/reports/tr98-02.pdf)以及权重学习（示例包括[Hebb](http://www.cs.cmu.edu/afs/cs/academic/class/15782-f06/slides/hebbpca.pdf)、[Kohonen](http://www.cs.bham.ac.uk/~jlw/sem2a2/Web/Kohonen.htm)等）算法。

# ruby - Ruby 哈希火箭 vs 1.9 语法

> ID：10839594
> 
> 赞同：2
> 
> 时间：2012-05-31T18:57:47.173
> 
> 标签：ruby, ruby-on-rails-3

Railscast [Episode 275 - 我如何测试](https://github.com/railscasts/episode-275/blob/master/auth-after/app/models/user.rb)使用以下代码向用户发送密码重置：

```
def send_password_reset
  generate_token(:password_reset_token)
  ....
  ... etc
end

def generate_token(column)
  begin
    self[column] = SecureRandom.urlsafe_base64
  end while User.exists?(column => self[column])
end 
```

我的问题是关于倒数第二行代码：`end while User.exists?(column => self[column])`它可以正常工作，但是如果我换掉哈希火箭，就会导致我的规范失败，即`end while User.exists?(column: self[column])`

```
Failure/Error: user.send_password_reset
   ActiveRecord::StatementInvalid:
   SQLite3::SQLException: no such column: users.column: SELECT  1 FROM "users"  WHERE "users"."column" = 'Y7JJV4VAKBbf77zKFVH7RQ' LIMIT 1 
```

为什么会这样？在某些情况下您必须使用哈希火箭，并且对此有任何指导吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T18:59:44.973

`column`在该行代码中不是符号，而是变量，因此您需要使用哈希火箭。`column: self[column]`将构建一个哈希，其中 key 是 symbol `:column`，而不是 variable 的值`column`，这就是你想要的。

新语法只是使用文字符号作为键（`key: value`而不是`:key => value`）时的一种快捷方式。如果您使用变量键，`=>`则仍然需要语法。

# html - GWT CellTable 将列设置为 HTML

> ID：10839595
> 
> 赞同：-1
> 
> 时间：2012-05-31T18:57:52.553
> 
> 标签：html, gwt, celltable, flextable

我想将 FlexTable 放入 CellTable，因此在我的 String getValue() 中我创建了 FlexTable 并返回 ft.toString()，其中 ft 是我的 FlexTable。

但是，当我执行 table.addColumn(flex_table_string, "Header") 时，GWT 不会呈现 HTML，而是将其保留为文本

请帮忙，

谢谢，

垫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:28:33.683

您应该构建一个`Cell`使用 构建HTML表的`SafeHtmlBuilder`而不是构建一个小部件并获取它的HTML表示（顺便说一句，您甚至不应该`toString()`这样做，而是创建，比如说， a `SimplePanel`，将小部件放入其中，然后调用`getElement().getInnerHTML()`在父面板上）。
主要原因有两个：

*   `SafeHtmlBuilder`会更快（这就是`CellTable`vs. `Grid`or的全部意义`FlexTable`）
*   你打破了预期：*序列化*一个小部件将失去所有事件处理。

* * *

话虽这么说，你所问的确实是可能的：使用`Cell`使用`SafeHtmlBuilder`'`appendHtmlConstant`方法的 a 。要么制作一个，要么与 Alex 建议的 escape/unescape 往返不同，使用 a但`TextCell`使用使用.`SafeHtmlRenderer``AbstractSafehtmlRenderer``SafeHtmlUtils.fromTrustedString`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T05:36:21.777

您需要用 < 和 >替换所有的`&lt;`and 。`&gt;`

```
protected void render(Context context, SafeHtml value, SafeHtmlBuilder sb) {
    String html = value.asString().replaceAll("&lt;", "<").replaceAll("&gt;", ">");
    sb.appendHtmlConstant(html);
} 
```

# c# - 刷新以 ac# windows 窗体加载的 SWF

> ID：10839597
> 
> 赞同：0
> 
> 时间：2012-05-31T18:57:57.860
> 
> 标签：c#, actionscript-3

我在 C# 中使用 AxShockwaveFlash 对象在 Windows 窗体中加载和显示 SWF。

我正在使用 LoadMovie 加载它，一切正常

```
axShockwaveFlash.LoadMovie(0, "local url"); 
```

出于调试原因，我希望能够刷新此 swf 而无需重新构建 c# 应用程序。

我已经尝试了几件事，包括在重新加载真实的之前加载空白 swf。

```
axShockwaveFlash.LoadMovie(0, "");
axShockwaveFlash.LoadMovie(0, "local url"); 
```

但是，这似乎不起作用。

有谁知道如何重新加载 axShockwaveFlash 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:06:39.510

啊，很快就想通了。似乎创建一个加载空白 swf 就可以了。

```
axShockwaveFlash.LoadMovie(0, "EmptySwf.swf");
axShockwaveFlash.LoadMovie(0, "RealProjectSwf.swf"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T14:35:13.400

您也可以让它从 youtube 加载视频，然后在它加载您的 SWF 或任何您想要的内容之后立即加载：

```
 string tmpStr = axShockwaveFlash1.Movie;

        axShockwaveFlash1.LoadMovie(0, "http://www.youtube.com/v/jNQXAC9IVRw");
        axShockwaveFlash1.Play();

        axShockwaveFlash1.LoadMovie(0, tmpStr);
        axShockwaveFlash1.Play(); 
```

# java - 正则表达式从 Java 中的字符串中的单词、数字和引号

> ID：10839601
> 
> 赞同：0
> 
> 时间：2012-05-31T18:58:04.953
> 
> 标签：java, regex, string, words

我有一个关于 Java 中的 Regex 的快速问题（尽管其他语言可能相似）。

我想要做的是像这样转换一个字符串：

```
 How are you "Doing well" How well 10 "That's great"

//# I want the Regex in Java to match out all of the words, numbers, 
//# and things inside quotation marks. Ideally, I'd get something like this 

How
Are
You
"Doing Well"
How 
Well
10
"That's Great!" 
```

我尝试使用的正则表达式如下：

```
String RegexPattern =   "[^"+           //  START_OR: start of line OR" 
                        "\\s" +         //  empty space OR
                        "(\\s*?<=\")]" + // ENDOR: preceeded by 0 or more spaces and a quotation mark 
                        "(\\w+)" +      // the actual word or number
                        "[\\s" +        // START_OR: followed by a space OR
                        "(?=\")" +      // followed by a quotation mark OR
                        "$]";           // ENDOF:  end of line 
```

不过，这对我不起作用；即使是更简单的字符串！我花了很多时间在这里寻找类似的问题。如果我不需要引号，我可以使用拆分；但最终，这种模式会变得更加复杂，所以我需要使用正则表达式（这只是第一次迭代）。

我会很感激任何帮助；提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:08:13.857

我不认为`[ ]`意味着你认为它意味着什么。在方括号内，`^`实际上是字符类的否定运算符。在开始这项任务之前，您应该练习使用较小的正则表达式。您正在寻找的模式更像是：

```
 \s*([^"\s]+|"[^"]*") 
```

您可以在这里看到这一点：[http](http://rubular.com/r/enq7eXg9Zm) ://rubular.com/r/enq7eXg9Zm 。

如果您不想要单词中的符号，那么最好使用第二个正则表达式来删除它们，例如

```
 \W 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:46:56.723

您可以分多个步骤完成（python 中的代码，但逻辑和模式应该相同）

1 - 获取双引号内的所有字符串：

```
r = re.findall(r'\"([^"]*)\"','How are you "Doing well" How well 10 "That\'s great"') 
```

结果：`['Doing well', "That's great"]`

2 - 从文本中删除这些字符串：

```
r = re.sub(r'\"([^"]*)\"', "", 'How are you "Doing well" How well 10 "That\'s great"') 
```

结果：`'How are you How well 10 '`

3 - 现在您可以进行拆分以及步骤 1 中双引号中的拆分。

绝对不是一个好的/干净的解决方案，但它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:51:31.027

这应该适合你。(\"[^\"]+\")|([^\s]+)

# java - 丑陋的数字 - 找到第 1500 位 UVA 在线评委

> ID：10839608
> 
> 赞同：-3
> 
> 时间：2012-05-31T18:58:28.590
> 
> 标签：java, runtime

源代码：

```
import java.util.Arrays;

class Uglynumbers {

/**
 * @param arg
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    long[] ugly= new long[1510];
    long inter1,inter2,inter3;
    int count=0;
    boolean found1=false,found2=false,found3=false;

    ugly[0]=1;
    ugly[1]=2;
    ugly[2]=3;
    ugly[3]=5;
    count=4;
    for (int i=1; i<1500;i++)
    {
        found1=found2=found3=false;
        inter1= ugly[i]*2;
        inter2= ugly[i]*3;
        inter3= ugly[i]*5;

        for(int z=count-1;z>=0;z--)
        {
            if((inter1>ugly[z]) && (inter2>ugly[z]) && (inter3>ugly[z]))
                break;
            else
            {
             if(ugly[z]==inter1)
                found1=true;
             if(ugly[z]==inter2)
                found2=true;
             if(ugly[z]==inter3)
                found3=true;
            }

            if( found1 && found2 && found3)
                break;
        }

        if(!found1)
        {

            ugly[count]=inter1;
            count+=1;

        }

        if(!found2)
        {

            ugly[count]=inter2;
            count+=1;

        }

        if(!found3)
        {

            ugly[count]=inter3;
            count+=1;

        }

        Arrays.sort(ugly,0,count);

        if(count>=1500)
            break;

        }

System.out.println("The 1500'th ugly number is "+ ugly[1499]);

System.exit(0);

}

}; 
```

当我在 Eclipse 中运行此代码时，它工作正常。但是当我给它 UVA 在线判断时，出现以下运行时错误：“”136 - Ugly Numbers has failed with verdict Runtime error。这意味着您的程序的执行没有正确完成。请记住始终使用退出代码 0“终止您的代码。”

代码中缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:05:08.103

似乎它需要将类称为 Main。

[http://code.google.com/p/collat​​z-deandalm/issues/detail?id=13](http://code.google.com/p/collatz-deandalm/issues/detail?id=13)

编辑：

整个 Java 规范：

[http://uva.onlinejudge.org/index.php?option=com_content&task=view&id=15&Itemid=30](http://uva.onlinejudge.org/index.php?option=com_content&task=view&id=15&Itemid=30)

> Java 规范：提交的 Java 程序必须在单个源代码（不是 .class）文件中。不过，您可以在此文件中添加任意数量的类。此文件中的所有类不得位于任何包中。
> 
> 所有程序都必须从 Main 类中的静态 main 方法开始。
> 
> 不要使用公共类：即使 Main 也必须是非公共的，以避免编译错误。
> 
> 使用缓冲 I/O 以避免由于过度刷新而超出时间限制。
> 
> 作为参考，我们提供了一个示例 Java 代码

摆脱这个：

`System.exit(0);`

并更改`Uglynumbers`为`Main`.

# java - JFreeChart and printing in swt

> ID：10839609
> 
> 赞同：0
> 
> 时间：2012-05-31T18:58:38.387
> 
> 标签：java, eclipse, swt, jfreechart

I'm using `JFreeChart` inside of a `ChartPanel` with `SWT_AWT` bridging. What I want to do is use the SWT to handle the printing of the chart. Is there a way to take the `chartpanel` and draw it onto the printer GC from SWT?

```
JFreeChart chart = createXYChart(createDataset(v2, v1));

Composite comp = new Composite(parent, SWT.NONE | SWT.EMBEDDED);
chart.removeLegend();

//ChartComposite c = new ChartComposite(parent, SWT.NONE | SWT.EMBEDDED, chart, true);
Frame frame = SWT_AWT.new_Frame(comp);
ChartPanel panel = new ChartPanel(chart);
panel.setMaximumDrawHeight(10000);
panel.setMinimumDrawHeight(0);
panel.setMaximumDrawWidth(10000);
panel.setMinimumDrawWidth(0);
panel.setPopupMenu(null);

frame.add(panel);

Shell shell  = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell();
PrintDialog dialog = new PrintDialog(shell);

try {
    //PrinterData printerData = Printer.getDefaultPrinterData();
    PrinterData printerData = dialog.open();
    if (printerData != null) {
        Printer printer = new Printer(printerData);
        if (printer.startJob("Text")) {
            GC gc = new GC(printer);

            if (printer.startPage()) {
                gc.drawString("HDSDFSDFSDFSDFDS", 0, 0);
                //WANT TO PRINT CHART SOMEHOW HERE
                printer.endPage();
            }
            gc.dispose();
            printer.endJob();
        }
        printer.dispose();
        System.out.println("Print job done.");
    }
} catch (Exception exception) {
    exception.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T06:59:46.570

我从未使用过`SWT_AWT`，但我将 JFreeChart 与 SWT 一起使用（使用[ChartComposite](http://www.jarvana.com/jarvana/view/jfree/jfreechart-swt/1.0.8a/jfreechart-swt-1.0.8a-javadoc.jar!/org/jfree/experimental/chart/swt/ChartComposite.html)），我可以使用下面的代码将图表捕获到图像中。它可以帮助你：

```
ChartComposite chartComposite = ...;
Image image = new Image(chartComposite.getDisplay(), chartComposite.getBounds());
GC gc = new GC(image);
chartComposite.print(gc);
gc.dispose(); 
```

# ios5 - Segue 后 NSString 未向 UITextField 发送数据

> ID：10839612
> 
> 赞同：0
> 
> 时间：2012-05-31T18:58:42.550
> 
> 标签：ios5, nsstring, xcode4.2, uitextfield, segue

在过去的几天里，这个问题让我很沮丧，现在很烦人，因为我在这上面浪费了太多时间。

我已经完成了 NSLog() 以查看发生了什么，这似乎是正确的，但我不明白为什么它不发送数据。它下面的代码来自 PrepareForSegue：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:id
{
    if ([[segue identifier] isEqualToString:@"Confirm"]) {
        NSLog(@"Preparing to Segue");
        SubmitEventsP2 *subEventVC = segue.destinationViewController;
        NSLog(@"Set destination VC to *subEventVC");
        NSDate *choice = [ datePick date];
        NSLog(@"Assign date from picker to *choice");
        NSDateFormatter *format = [[NSDateFormatter alloc] init];
        [format setDateFormat:@"dd/MM/yyy HH:mm"];
        NSLog(@"Set the format of date and time");
        NSString *formatteddate = [format stringFromDate:choice];
        NSLog(@"Store the date format in *formatteddate");
        [subEventVC setDateField:formatteddate];    //Incompatible pointer types sending "NSString *" to parameter of type "UITextField *"
        NSLog(@"Should send the date to the textField");
        //      NSString *viewchange = @"SubmitEventsP2" ;
        NSLog(@"%@",formatteddate);
    }
} 
```

任何有关此问题的帮助将不胜感激。

如果需要更多信息，请告诉我。

谢谢

编辑：问题已被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:02:23.803

尝试先在 subEventVC 中输入一个 NSString 属性，然后将其加载到该类中 viewDidLoad 上的 textField 中。我怀疑 textField 无法更新，因为它尚未创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:04:44.833

两件事情：

1.  您应该在您的行中使用`setDateField`（注意日期中的大写 D）`[subEventVC setdateEvent...`

2.  最后一行应该是：

    NSLog(@"%@", 格式化日期);

**编辑：**

由于 dateField 是一个文本字段，因此您实际上应该使用：

```
[subEventVC.dateField setText:formatteddate]; 
```

# forms - 如何为具有一对多多对一关系的实体获取表单中的单选按钮列表？

> ID：10839614
> 
> 赞同：0
> 
> 时间：2012-05-31T18:58:47.847
> 
> 标签：forms, symfony

实际上，我有一个与 ProjectsWorkgroups 实体具有一对多关系的 Project 实体，该实体与 Workgroup 实体具有多对一关系。我想显示许多单选按钮并能够为项目分配一个工作组。

我试试，没有成功

```
public function buildForm(FormBuilder $builder, array $options)
{
    $builder->add('name');
    $builder->add('color');
    $builder->add('workgroups', 'entity', array(
        'class' => 'MyBundle:Workgroup',
        'property' => 'name',
        'multiple' => true
    ));
} 
```

怎么了？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:04:39.893

如果你想要一个单选按钮，你必须将属性 multiple 更改为 false 并扩展为 true，如下所示：

```
$builder->add('workgroups', 'entity', array(
    'class' => 'MyBundle:Workgroup',
    'property' => 'name',
    'multiple' => false,
    'expanded' => true
 )); 
```

更多详情： [选择标签、复选框或单选按钮](http://symfony.com/doc/current/reference/forms/types/entity.html)

# c# - 如何测试 AccessViolationException 的处理

> ID：10839615
> 
> 赞同：18
> 
> 时间：2012-05-31T18:58:52.280
> 
> 标签：c#, .net, c#-4.0, access-violation, unsafe

我需要编写一个测试来验证我的代码是否可以处理 AccessViolationException（或任何其他 WIN32 损坏状态异常 - CSE），该异常发生在不安全的上下文中，通常是通过调用 3rd 方库。这一切都应该在 .net 4.0 上使用 C# 完成。

我发现了这个相关的问题[How to handle AccessViolationException](https://stackoverflow.com/questions/3469368/how-to-handle-accessviolationexception)和这篇相关的文章[http://dotnetslackers.com/articles/net/All-about-Corrupted-State-Exceptions-in-NET4.aspx](http://dotnetslackers.com/articles/net/All-about-Corrupted-State-Exceptions-in-NET4.aspx)，它解释了如何捕获这些 CSE 及其背景。

所以我想在测试中激发一个 WIN32 CSE，以确保在我的应用程序中正确处理。就像是：

一些要测试的示例类：

```
public class MyExceptionHandler
{
    [HandleProcessCorruptedStateExceptions]
    public void HandleCorruptedStateException()
    {
        try
        {
             //Force genuine unsafe AccessViolationException
             //not just a throw new AccessViolationException
        }
        catch(Exception e)
        {
             //Log/cleanup/other
        }
    }

    public void DoesNotHandleCorruptedStateException()
    {
        try
        {
             //Force genuine unsafe AccessViolationException
             //not just a throw new AccessViolationException
        }
        catch (Exception e)
        {
            //Log/cleanup/other
        }
    }
} 
```

一个测试：

```
class MyTest
{
    [Test]
    public void ShouldVerifyThatAnAccessViolationExceptionIsHandledCorrectly()
    {
        var handler = new MyExceptionHandler();

        Assert.DoesNotThrow(() => handler.HandleCorruptedStateException());
    }

    [Test]
    public void ShouldVerifyThatAnAccessViolationExceptionIsNotHandledCorrectly()
    {
        var handler = new MyExceptionHandler();

        Assert.Throws<AccessViolationException>(() => handler.DoesNotHandleCorruptedStateException());
    }
} 
```

Does anyone have a suggestion of how to achive this without to much work (ex. writting a unsafe lib which causes this exception).

Kind regards

**UPDATED:** To match my final solution, thanks to JaredPar.

```
public class MyExceptionHandler
{
    [HandleProcessCorruptedStateExceptions]
    public void HandleCorruptedStateException()
    {
        try
        {
            var ptr = new IntPtr(42);
            Marshal.StructureToPtr(42, ptr, true);
        }
        catch(Exception e)
        {
             //Log/cleanup/other
        }
    }

    public void DoesNotHandleCorruptedStateException()
    {
        try
        {
            var ptr = new IntPtr(42);
            Marshal.StructureToPtr(42, ptr, true);
        }
        catch (Exception e)
        {
            //Log/cleanup/other
        }
    }
} 
```

**TIP:** To verify this manually use a simple console app, from the commandline:

```
class Program
{
    static void Main(string[] args)
    {
        var handler = new MyExceptionHandler();

        if (args.Length > 1)
        {
            handler.HandleCorruptedStateException();
        }
        else
        {
            handler.DoesNotHandleCorruptedStateException();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T19:01:54.607

Try the following

```
var ptr = new IntPtr(42);
Marshal.StructureToPtr(42, ptr, true); 
```

This isn't guaranteed to throw an `AccessViolationException` by the CLI spec but it will on every platform I'm aware of

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:09:47.383

```
 private static unsafe void AccessViolation()
    {
        int* p = (int*)0xFF004324;
        int q = *p;
    } 
```

Edited out the unsafe write. Reading from that address should still generate an AccessViolationException unless coincidentally that is within your address space.

# matlab - matlab clear all

> ID：10839617
> 
> 赞同：0
> 
> 时间：2012-05-31T18:58:55.313
> 
> 标签：matlab

I have m file (`main.m`), and I have some variables that I have in this file.

In the end of the file, I wrote: `clear all`

I want to clear all the variables. so in the Matlab, I wrote: `main`, in order to run the function.

When the function completes, I wrote in MATLAB console the name of one of the variables of `main.m`.

For example, I wrote the variable: `data`

Surprisingly, the variable exists.

Why the expression `clear all` doesn't delete it?

Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:15:12.143

函数有自己的变量范围。当你从一个函数返回时，函数的所有局部变量都被清除，并且在函数调用之前立即存在的变量和值被恢复，唯一的区别是你刚刚返回的函数的返回值。您可以使用 MATLAB 调试器轻松完成此过程，首先确保在第一个函数中定义了一些变量，然后进入第二个函数（至少在 Linux 版本中为 F11），然后逐步执行第二个函数，最后退出当你到达`return`或结束第二个函数时，你会看到第二个函数的局部变量被清除，第一个函数的变量被恢复。

这意味着您不能清除函数内的工作区变量，至少不能通过 using清除`clear all`，因为在函数内部`clear all`只会清除其变量范围内的所有变量。

如果您遵循函数式编程范式，通常您无需担心工作区变量，因为重要的是您在自己的函数中创建和修改的变量。

# asp.net-mvc-3 - MVC3 - Twitter Bootstrap Collapse 仅适用于根 URL

> ID：10839622
> 
> 赞同：0
> 
> 时间：2012-05-31T18:59:12.253
> 
> 标签：asp.net-mvc-3, twitter-bootstrap, accordion, collapse

我的 _Layout 页面上有一个手风琴，它仅在我加载根 URL 时才起作用。

~/ -> 根 URL，手风琴在这里工作。

~/Main/Home -> 手风琴在这里不起作用，即使它与 ~/.

~/MyController/MyAction -> 手风琴在这里不起作用。

我从主页视图和其他视图之一中删除了所有内容，因此唯一的区别是 URL。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:37:55.420

万一其他人遇到此问题，我的 css 和脚本文件未链接为相对路径，因此程序通过将位置附加到路由来查找文件。

# javascript - Wordpress 主题重复但在不同域上显示不同

> ID：10839624
> 
> 赞同：0
> 
> 时间：2012-05-31T18:59:19.830
> 
> 标签：javascript, css, wordpress

我决定将我创建的 wordpress 设计镜像到另一个域

[http://www.global-markets-recruitment.com/](http://www.global-markets-recruitment.com/)

但是，一旦我将代码复制到新域中，当屏幕移动而不是与网站框架一起移动时，徽标就会出现错位

[http://www.keylexconsulting.com/wp/#home](http://www.keylexconsulting.com/wp/#home)

CSS 和 HTML 完全相同，但我不明白为什么它们会有所不同

```
/*
Theme Name:     Child
Description:    This is a child theme
Author:         Laura Dawaf
*/

body
{
    font-family: 'Helvetica', Times New Roman, Times, serif;
    font-size: 12px;
    line-height: 180%;
    color: #FFFFFF;
    text-decoration: none;
    margin: 0 auto;
    padding: 0;
    background: #EEEFF1;
    overflow: hidden;
}

p
{
    margin: 0px;
    padding: 0px 0px 15px 0px;
}

a
{
    text-decoration: none;
    color: #5b5b5b;
}

a:focus
{
    outline: none;
}

a:focus,
a:active,
a:hover {
    text-decoration: none;
}

#header {
    width: 1200px;
    height: 110px;
    margin: 0 auto;
    position: relative;
}

#logo {
    font-size: 28px;
}

#logo a {
    display: block;
    width: 200px;
    height: 105px;
    background: url(Assets/logo.png) no-repeat 0px 0px;
    padding-top: 23px;
    padding-left: 5px;
}

.logo-image {
    float: left;
    padding-right: 8px;
    padding-top: 4px;
}

#logo h1
{
    position: absolute;
    top: -50px;
    left: -2000px;
    font-size: 11px;
    color: #FFFFFF;
}

#nav
{
    position: absolute;
    right: 0px;
    bottom: 1px;
    width: 850px;
}

#nav ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
}

#nav li
{
    float: right;
    padding: 30px 34px 10px 34px;
    height: 20px;
    margin: 0px;
    background: url(Assets/Nav/navSplitLine.gif) no-repeat right top;
}

#nav li.end
{
    float: right;
    padding: 30px 34px 10px 34px;
    height: 20px;
    margin: 0px;
    background: none;
}

#nav li a#navHome
{
    display: block;
    width: 46px;
    height: 20px;
    background: url(Assets/Nav/home.png) no-repeat 0px 0px;
    overflow: hidden;
}

#nav li a#navHome:hover
{
    background-position: 0px -20px;
}

#nav li a#navArtScience
{
    display: block;
    width: 130px;
    height: 20px;
    background: url(Assets/Nav/artScience.png) no-repeat 0px 0px;
    overflow: hidden;
}

#nav li a#navArtScience:hover
{
    background-position: 0px -20px;
}

#nav li a#navContext
{
    display: block;
    width: 250px;
    height: 20px;
    background: url(Assets/Nav/context.png) no-repeat 0px 0px;
    overflow: hidden;
}

#nav li a#navContext:hover
{
    background-position: 0px -20px;
}

#nav li a#navContact
{
    display: block;
    width: 65px;
    height: 20px;
    background: url(Assets/Nav/contact.png) no-repeat 0px 0px;
    overflow: hidden;
}

#nav li a#navContact:hover
{
    background-position: 0px -20px;
}

#footerContainer
{
    float: left;
    width: 100%;
    height: 95px;
    margin: 550px 0px 0px 0px;
    background: url(Assets/footerBg.png) repeat-x 0px 0px;
}

#footer
{
    width: 1200px;
    margin: 0 auto;
    position: relative;
    font-family: 'Helvetica', Arial, sans-serif;
    color: #FFFFFF;
    font-size: 11px;
}

#footerNav {
    position: relative;
    float:right;
    top: -576px;
}

#footerNav ul
{
    list-style: none;
    margin: 0px;
    padding: 0px;
}

#footerNav li
{
    float: left;
    padding: 0px 6px 0px 11px;
    margin: 0px;
    background: url(Assets/footerSplitLine.png) no-repeat 0px 5px;
}

#footerNav li.start
{
    padding: 0px 8px 0px 0px;
    background: none;
}

#footerNav li a
{
    color: #666666;
    text-decoration: none;
}

#footerNav li a:hover
{
    color: #FFFFFF;
}

#footerStrap
{
    position: absolute;
    right: 0px;
    top: 20px;
}

#footerStrap img
{
    display: block;
    padding: 0px;
    margin: 0px;
}

#footerDetails
{
    position: absolute;
    right: 0px;
    top: 48px;
    line-height: 100%;
}

/* Nav Slider */

#navPointer
{
    position: absolute;
    right: 0px;
    bottom: 1px;
    height: 7px;
    z-index: 1000;
}

#controlContainer
{
    width: 713px;
    padding: 0px;
    margin: 0px;
    position: relative;
}

#pointer
{
    width: 713px;
    height: 7px;
    background: url(Assets/pointer.gif) no-repeat 0px 0px;
}

/* Content Slider */

#contentHolder
{
    position: absolute;
    width: 1200px;
    height: 500px;
    top: 110;
    left: 50%;
    margin: 0 0 0 -600px;
}

#contentShadow
{
    position: absolute;
    top: 0px;
    left: 0px;
    display: block;
    width: 1200px;
    height: 550px;
    z-index: -10;
    background: url(Assets/bgShadow-trans.png) no-repeat 0px 0px;
}

#contentGallery
{
    position: absolute;
    top: 0px;
    left: 0px;
    display: block;
    width: 1200px;
    height: 550px;
    z-index: -100;
}

#content {
    width: 1200px;
    height: 550px;
    padding: 0px 0px 0px 0px;
    overflow: hidden;
    z-index: 500;
}

#contentScroller
{
     width: 100000px;
}

.page
{
    float: left;
    width: 1200px;
    margin: 0px 1200px 0px 0px;
    height: 550px;
}

.pageContent
{
    width: 640px;
    height: 500px;
    margin: 0px 100px 0px 460px;
    padding: 50px 0px 0px 0px;
    background: url(http://www.keylexconsulting.com/wp/wp-content/uploads/pageBg-trans.png) no-repeat 0px 0px;
}

.closed
{
    display: none;
}

.headerText
{
    font-size: 22px;
    margin: 0px;
    padding: 0px 0px 10px 35px;
    font-weight: normal;
    text-transform: uppercase;
    background: url(Assets/dottedLine.gif) no-repeat bottom right;
    color: #4484A9;
}

.pageText
{
    width: 560px;
    min-height: 385px;
    padding: 25px 35px 0px 35px;
    color: #5B5B5B;
}

h2
{
    font-size: 22px;
    margin: 0px;
    padding: 10px 0px 5px 0px;
    font-weight: normal;
}

h3
{
    font-size: 17px;
    margin: 0px;
    padding: 10px 0px 15px 0px;
    font-weight: normal;
}

h3 a
{
    color: #FBB034;
}

h3 a:hover
{
    color: #5B5B5B;
}

.homeContent
{
    width: 424px;
    height: 470px;
    margin: 0px 100px 0px 680px;
    padding: 80px 0px 0px 0px;
    background: url(http://www.keylexconsulting.com/wp/wp-content/uploads/pageBg-trans.png) no-repeat 0px 0px;
}

.homeHeaderText
{
    float: left;
    width: 389px;
    line-height: 100%;
    font-size: 43px;
    margin: 0px 0px 0px 22px;
    padding: 0px 0px 10px 0px;
    font-weight: normal;
    background: url(Assets/dottedLine.gif) no-repeat bottom right;
    color: #4484A9;
    text-align: center;
}

.homeStrap
{
    width: 354px;
    padding: 15px 35px 0px 35px;
}

.homePageText
{
    width: 380px;
    padding: 40px 35px 0px 22px;
    color: #5B5B5B;
}

/* accordian */

a.acc_trigger, a.acc_trigger_2, a.acc_trigger_3
{
    padding: 0px 15px 0px 0px;
    margin: 0px;
    font-size: 14px;
    font-weight: normal;
    background: url(Assets/arrow.gif) no-repeat right 5px;
    line-height: 240%;
    color: #4484A9;
}

a.acc_trigger:hover, a.acc_trigger_2:hover, a.acc_trigger_3:hover
{
    color: #FFFFFF;
}

a.active
{
    background: none;
    padding: 0px;
    color: #5B5B5B;
}

.acc_container, .acc_container_2, .acc_container_3
{
    margin: 0px;
    padding: 0px;
    overflow: hidden;
    font-size: 12px;
    width: 560px;
    clear: both;
}

.acc_container p, .acc_container_2 p, .acc_container_3 p
{
    margin: 0px;
    padding: 0px;
}

a.acc_trigger:hover, a.acc_trigger_2:hover, a.acc_trigger_3:hover {
    color: #4484A9;
}

.seperator
{
    height: 3px;
}

/* classes */

.clear
{
    clear: both;
    margin: 0px;
    padding: 0px;
    width: 0px;
    height: 0px;
    border: none;
}

a.largeArrow
{
    padding: 0px 18px 0px 35px;
    margin: 0px;
    font-size: 16px;
    font-weight: normal;
    background: url(Assets/largeArrow.gif) no-repeat right 4px;
    line-height: 100%;
    color: #FBB034;
    text-transform: uppercase;
}

a.largeArrow:hover
{
    color: #FFFFFF;
}

/* links & tables */

.linkTable
{
    width: 100%;
    margin: 0px;
    padding: 0px;

}

.linkTable td
{
    width: 45%;
}

.hentry, .no-results {
    display: none;
}

#primary {
    display: none;
}

#page {
    background: #EEEFF1;
    margin: 0px;
}

#site-generator {
    background: #EEEFF1;
    padding: 0px;
    font-size: 10px;
    color: #666666;
}

#footerNav li a:hover {
    color: #4484A9;
}

small a {   
    color: #4484A9 !important;
}

#sidebar {  
    display: none;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:06:05.857

在第一个链接上的 chrome 开发人员工具中，我看到：

```
<body class="home blog single-author two-column right-sidebar"> 
```

在第二个我看到：

```
<body class="home page page-id-275 page-template page-template-page-fullwidth-php"> 
```

如果模板应用相同，两者不都一样吗？

# internet-explorer - 在 VS express 2010 中开发 IE 扩展？

> ID：10839628
> 
> 赞同：0
> 
> 时间：2012-05-31T18:59:36.283
> 
> 标签：internet-explorer, atl, bho, browser-extension

我已经为 chrome 和 opera 开发了一些简单的扩展。而且他​​们提供的 da 文档非常酷，以至于花了大约 1 周的时间才得到这些东西。

但是开发 IE 扩展是相当困难的。没有适当的文档！alex dint 提供的 MSDN 教程和开发 IE 扩展帮助很大！！此外，我确实有 VS express 2010 ..没有可用的 ATL ！任何人都可以为我提供开发 HELLO WORLD 扩展的精细链接或文档..

而且，是否可以像在 Opera 和 Chrome 中一样使用 JavaScript 和 HTML 开发 IE 扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:07:59.077

ATL 是 COM/ActiveX，COM/ActiveX 是 Oh-So-1995，伙计。我不建议去那里；）

您*可以*在 .Net 中编写 IE 扩展。因此，您*应该*能够使用 MSVS Express 2010 的 C# 和/或 VB.Net 版本中的一个/两个：

*   [http://msmvps.com/blogs/vcsjones/archive/2010/05/23/writing-a-managed-internet-explorer-extension-part-1.aspx](http://msmvps.com/blogs/vcsjones/archive/2010/05/23/writing-a-managed-internet-explorer-extension-part-1.aspx)

最后，这个链接中还有很多很好的信息：

*   [如何开始开发 Internet Explorer 扩展？](https://stackoverflow.com/questions/5643819/developing-internet-explorer-extensions/5740004#5740004)

# spring - spring security：密码修改页面实现

> ID：10839629
> 
> 赞同：1
> 
> 时间：2012-05-31T18:59:40.193
> 
> 标签：spring, spring-mvc, spring-security

我完全是 Spring 和 Web 开发的新手。我想实现用户密码更改功能。到目前为止，我只以这种方式使用了路径：

```
@RequestMapping(value = "/timetable/{year}/{month}/{date}", method = RequestMethod.GET)
public String timetableDateJump(@PathVariable("year") int year, @PathVariable("month") int month..) 
```

但我不希望用户的通行证仅在 url 中传递。它是如何在 Web 服务中完成的？什么是正常的为什么要实施？

顺便说一句：我应该从用户 tpo 服务器传递密码并在服务器端对其进行哈希处理，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:26:03.290

从我的角度来看，这里没有 spring-security 的具体细节：

1）在视图中创建表单

```
<form:form method="post" action="/password/change" modelAttribute="changePasswordForm">
    <form:label path="password">
        New password:
    </form:label>
    <form:password path="password" />
    <input type="submit" value="Change password" />
</form:form> 
```

2) 创建类以将用户的值从表单绑定到 java 对象

```
public class ChangePasswordForm {
    private String password;

    public void setPassword(String password)
        this.password = password;
    }

    public String getPassword() {
        return password;
    }
} 
```

3) 创建控制器

```
@Controller
public ChangePasswordController {

    @RequestMapping(value = "/password/change", method = RequestMethod.POST)
    public String changePassword(ChangePasswordForm form) {
        // change user password
        return "return:/user/info";
    }
} 
```

我没有测试过这段代码，但它应该以这种方式工作。

如何更新数据库中的密码取决于您的应用程序和使用的库。

# wpf - DataTemplate x:Shared=false 对视图没有影响

> ID：10839633
> 
> 赞同：6
> 
> 时间：2012-05-31T18:59:55.803
> 
> 标签：wpf, prism-4

我正在使用数据模板通过 PRISM 4 发现加载我的视图。我需要多次创建视图/视图模型而不是重用现有实例，因此我在资源中设置 x:Shared=false 但它只对视图模型有影响。我可以确认视图模型没有被重用，但视图是。视图构造函数仅在第一次调用时调用一次。我在这里读过类似的帖子，但他们的解决方案对我不起作用。我想知道我是否可以扩展资源加载器/定位器并确保它尊重 Shared 标志。

这是我的模板的定义方式：

```
 <DataTemplate DataType="{x:Type CVM:MyViewModel}" x:Shared="False">
        <V:MyView />
 </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:26:35.170

所有`DataTemplate`包含的内容都是`'Template'`用于在对象（在您的情况下为视图模型）进入视野时创建必要的可视化树。

因此，如果只有一个`'MyViewModel'`对象在视图中，则视图的构造函数只会被调用一次（即使实例化了多个视图模型）。如果您的视图中有多个视图模型，则视图的构造函数将被多次调用，因为您的模板`DataTemplate`被正确构造并添加到可视树中（每个视图模型一次）。

但是，如果您的`ItemsControl`（保存您的视图模型的）已打开虚拟化，则可能仅存在一个“容器”（简而言之就是您的数据模板），并且可以重复使用。

# iphone - 如何使用 autoresizingmask 来阻止 UITableViewCell 的组件在编辑时消失？(iPhone/iPad)

> ID：10839635
> 
> 赞同：0
> 
> 时间：2012-05-31T19:00:11.790
> 
> 标签：iphone, ios, uitableview, autoresizingmask

我有一个包含 3 个 UILabel 的自定义 UITableViewCell。其中两个标签与单元格的左侧对齐，另一个与右侧对齐。这是它的样子：

![在此处输入图像描述](../Images/d14fee8ac61dc9fbce71635cef50e1fc.png)

我遇到的问题是 UITableView 处于编辑模式时。我一直试图通过使用 AutoResizingMasks 来阻止右侧的标签从屏幕一侧消失，但我没有任何运气。这是发生的事情：

![在此处输入图像描述](../Images/7fb183de20acadeed21a476eaf15bbab.png)

我一直在玩的代码来自我的子类 UITableViewCell。这是我的代码：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];

    if (self) 
    {
        // Setup the cells accessory
        self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

        // Setup the cell background
        self.backgroundView = [[UIImageView alloc] initWithImage:[[UIImage imageNamed:@"Plain_Cell.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0]];

        // Setup the Main label (fruit names)
        mainLabel = [[UILabel alloc] init];
        mainLabel.font = [UIFont systemFontOfSize:25];
        mainLabel.backgroundColor = [UIColor clearColor];
        [self.contentView addSubview:mainLabel];

        // Setup the dates label
        datesLabel = [[UILabel alloc] init];
        datesLabel.font = [UIFont systemFontOfSize:14];
        datesLabel.backgroundColor = [UIColor clearColor];
        [self.contentView addSubview:datesLabel];

        // Setup the milage label
        distanceLabel = [[UILabel alloc] init];
        distanceLabel.textAlignment = UITextAlignmentRight;
        distanceLabel.font = [UIFont systemFontOfSize:14];
        distanceLabel.backgroundColor = [UIColor clearColor];
        [self.contentView addSubview:distanceLabel];
    }

    return self;
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    mainLabel.frame = CGRectMake(10, 10, 280, 39);
    datesLabel.frame = CGRectMake(10, 58, 184, 21);
    distanceLabel.frame = CGRectMake(205, 58, 85, 21);

    mainLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin;
    datesLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin;
    distanceLabel.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleRightMargin;
} 
```

**注意：**请向下滚动以获取更多代码！

不过，我没有太多运气。请问有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:29:55.597

You are aligning your text to the right, but not the label. Try this:

```
...
// Setup the mileage label
distanceLabel = [[UILabel alloc] init];
distanceLabel.autoresizingMask = UIViewAutoresizingFlexibleLeftMargin;
distanceLabel.textAlignment = UITextAlignmentRight;
distanceLabel.font = [UIFont systemFontOfSize:14];
distanceLabel.backgroundColor = [UIColor clearColor];
[self.contentView addSubview:distanceLabel]; 
```

This will lock the right margin where it is and allow the left margin to shrink when the view shrinks.

# asp.net - asp.net cookieless 会话和应用程序主题，是否可以在没有会话 ID 的情况下从 url 引用 css 文件？

> ID：10839639
> 
> 赞同：0
> 
> 时间：2012-05-31T19:00:21.270
> 
> 标签：asp.net, caching, themes, cookieless

我有一个使用 cookieless 会话（即会话 ID 在 url 中，而不是在 cookie 中）和主题的 asp.net Web 应用程序。使用主题，对 css 文件的引用将包含在发送给客户端的 HTML 中，其 url 包含会话 id，例如：

```
http://website/(S(12344jkjl232343)/app_themes/folder/site.css 
```

如果 css 使用相对于 css 位置的路径引用图像，则将通过包含会话 ID 的 URL 检索这些图像。

由于每次登录后会话 id 都会更改，因此客户端将始终必须在会话开始时至少向服务器请求一次 css 文件，并且无法使用本地浏览器缓存。

有没有一种简单的方法让 asp.net 插入没有会话 ID 的资源文件的链接，以便重复访问者能够使用他们的本地浏览器缓存？

寻找一种快速简单/低风险的方式。也就是说，比首先放弃使用主题更简单（并创建更小的重新测试表面），这将是中期计划。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:31:11.130

因此，如果您使用的是无 cookie 会话，我推断用户将始终位于同一个网站中。

如果它们在同一个网站中，则不需要通过 http 发送主题。而是将主题存储在会话（内存）中。

```
// store the selected theme
this.Session["theme"] = "/app_themes/folder/site.css"; 
```

或创建一个表并只存储那里的 id

```
// store the selected theme
this.Session["Themeid"] = "1"; 
```

# javascript - addEventListener() 不工作

> ID：10839642
> 
> 赞同：3
> 
> 时间：2012-05-31T19:00:36.527
> 
> 标签：javascript, addeventlistener

好的，所以我尝试使用 addEventListener 函数制作此页面，以解决单击按钮的问题；它没有用。我通过删除除侦听器所需的基本元素之外的所有内容来缩小范围，并留下以下内容：

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">
function init(){
    document.getElementById("test").addEventListener("mousedown", function(){
        alert("Test successful");
    });
}
body.onload = init();
</script>
</head>
<body>
<button id="test">Click</button>
</body>
</html> 
```

这也不起作用，所以我知道问题出在我上面的语法中。请注意，当我拿走`body.onload = init();`并放入`onload="init()"`body 标签时，它确实有效：O 问题是，我不想让它内联。有什么建议么？

注意：请记住，这个问题**不是**关于 JS 中如何存在错误，即使标题可能暗示如此，而是关于我如何无法让它工作，因为我可能有语法错误。如果您愿意，请随时重命名。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-31T19:05:56.027

首先，您应该通过`document.body`. 但是，`onload`在 上定义`window`，因此您实际上需要：

```
window.onload = init(); 
```

但是，这将执行该`init()`方法并将返回值存储在`window.onload`. 显然，这不是您想要的：您希望`init`函数充当`onload`处理程序。因此，你应该写：

```
window.onload = init; 
```

虽然我也建议使用`addEventListener`它：

```
window.addEventListener("load", init); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T19:08:28.093

body.onload = init();

不是引用 body 的方式，而是使用 window - 并且不要在那里调用该方法，引用它（不带括号）

**窗口.onload=初始化；**

传递第三个参数，即使它是错误的——

```
function init(){
     document.getElementById("test").addEventListener("mousedown", function(){
         alert("Test successful");
     },false);
} 
```

请注意，版本 #9 之前的 IE 不支持 addEventListener。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:06:47.053

它发生是因为`body`没有定义，正确的是document.body。另外，可能 document.body 尚未定义，因为`head`标签是在标签之前呈现的`body`，所以最好检查何时加载`window`或`document`加载。试试这个代码：

```
function init(){
    document.getElementById("test").addEventListener("mousedown", function(){
        alert("Test successful");
    });
}
document.addEventListener('load',init);//Or also, window.addEventListener 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-31T12:13:57.483

```
<script>
        window.addEventListener('load', () => {
            document.getElementById('test').addEventListener("mousedown", (e) => {
                alert("Test successful");
            });
        })
</script> 
```

# c# - 我们可以在 Silverlight 导航中传递列表吗？

> ID：10839645
> 
> 赞同：0
> 
> 时间：2012-05-31T19:00:51.850
> 
> 标签：c#, silverlight, silverlight-4.0, navigation, query-string

我正在为 sharepoint 2010 开发 silverlight 应用程序。我想将列表从一个页面传递到另一个页面。我正在使用 Silverlight 导航。我知道如何在页面之间传递值。

```
myFrame.Navigate(new Uri("/foo.xaml?customerId=1234", UriKind.Relative));

string customerId = this.NavigationContext.QueryString["customerid"]; 
```

但是如果我想传入`List<string> customers`查询字符串怎么办。我可以通过吗？如果是，那么你能告诉我该怎么做吗？如果还有其他更好的方法在页面之间传递列表，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T07:07:42.073

不幸的是，您不能将任何类型的对象与对 Navigate 的调用一起传递。在您的情况下，序列化您的列表（例如到 xml）可能是可行的。然后，您可以在查询字符串中包含序列化版本。

根据您的情况，您还可以考虑采用其他导航框架之一。

[Jounce](http://jounce.codeplex.com/)是一个成熟的 MVVM 框架，但这并不意味着你不能只将它用于导航。

# javascript - jQuery("#item_id").val() 对 document.getElementById("item_id").value 的好处？

> ID：10839648
> 
> 赞同：0
> 
> 时间：2012-05-31T19:01:11.337
> 
> 标签：javascript, jquery

使用 jQuery over`getElementById()`检索输入字段的值有什么好处吗？

```
jQuery("#item_id").val()

document.getElementById("item_id").value 
```

换句话说，JQuery 是否需要检索一个值（即，它是否涵盖特殊的棘手情况）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:03:41.160

jQuery 帮助解决的唯一棘手的情况是选择元素。本机方式应该（是）更快。

**编辑以避免混淆：**

原生方式是`document.getElementById("item_id").value`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:04:12.617

```
document.getElementById("item_id").value 
```

是比较快的

[http://jsperf.com/asdddddddddddddddddddd](http://jsperf.com/asdddddddddddddddddd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:05:53.163

如果我用 jQuery 编写脚本，我会倾向于只使用 jQuery 的方式来做事，例如这个例子。它看起来更干净并且遵循相同的语法。

但我相信`document.getElementById("item_id").value`更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T19:09:26.727

jQuery 方式更简洁，但让人们无法学习真正更快的 javascript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T19:13:47.440

虽然`document.getElementById("item_id").value`正如其他人已经指出的那样更快，但您还应该考虑`jQuery("#item_id").val()`更短的事实，这意味着您的脚本将下载得更快。

您应该始终**在访问 DOM 之前优化资源加载**：这就像从 HDD 与 RAM 加载某些东西一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T19:26:26.680

如果您只是检索值，那么唯一的好处就是语法。但是，如果您对元素做更多的工作，jQuery 方法将返回一个 jQuery 对象，它比 DOM 对象有用得多。

# java - 监听摆动对象上所有更改事件的一般方法

> ID：10839653
> 
> 赞同：2
> 
> 时间：2012-05-31T19:01:25.640
> 
> 标签：java, swing, events

是否有一个库或技术来监听摆动 ui 对象上的所有可变事件？具体数据。

例如，我有一个带有 JTextArea、JCheckBox、JComboBox 等的 JPanel。是否有一种常见的方式来表示“如果其中的数据发生变化，请通知我”？我不关心边框的变化和其他 UI 事件，只关心用户数据的变化。

我已经尝试过propertychangelister，但我似乎找不到一个公共属性，或者一个公共类可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:09:08.473

不，没有什么共同点。对于那些具有[*可分离模型的组件，您可以直接监听模型*](http://java.sun.com/products/jfc/tsc/articles/architecture/)。您可以将更改包装在 a 中`PropertyChangeListener`，如此处所示[，](https://stackoverflow.com/a/10523401/230513)以自定义消息。这里提到[了](https://stackoverflow.com/a/3072979/230513)[*观察者模式*](http://en.wikipedia.org/wiki/Observer_pattern)。

# html - 我应该修改什么 html 或 css 属性，以便移动浏览器显示右侧没有空格的网站？

> ID：10839657
> 
> 赞同：1
> 
> 时间：2012-05-31T19:02:02.440
> 
> 标签：html, css, mobile, browser, safari

我正在为移动设备制作一个网站，它的宽度固定为 480 像素，但是当我在我的 ipod 上查看它时，我看到右侧有一个巨大的空白区域。如何告诉带有 html / css 的移动浏览器像移动页面一样显示它？我试过

身体{宽度：480px}

它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:09:37.747

您的 iPod 屏幕可能不是 480 像素宽，尤其是在横向模式下。尝试在包装 div 而不是 body 上使用百分比，这样宽度将始终被填充。

html:

```
<div id="wrapper">content of the site</div> 
```

CSS：

```
#wrapper
{
  width:100%;
} 
```

如果要放置特定于移动设备的代码，您可能还需要检查用户代理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:20:14.317

将此元标记添加到您的页面：（不要使用许多流行的包含的 maximum-scale=1 部分。无论您的页面有多好，某些人都需要缩放。）

```
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

然后你需要你的移动布局是 100% 宽度而不是固定宽度，有很多不同尺寸的设备。也永远不要检查用户代理......永远。

```
body{ width:100% } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:05:10.020

你有 Viewport META 标签吗？

# javascript - html可以指向JS对象吗

> ID：10839663
> 
> 赞同：1
> 
> 时间：2012-05-31T19:02:16.833
> 
> 标签：javascript, html

有没有办法让 html 指向一个 javascript 对象？

我知道我可以在 JS 中有一个哈希来将标签 ID（或其他属性）与 JS 对象相关联，但是有没有办法将指向 html 标签的指针添加到 JS 对象？

```
<div id="user10"></div>
<div id="user11"></div> 
```

然后在 JS 中有

```
function getUserPointedByTag(tag){
    //this is what I would like to have without going through a hash
} 
function myAwesomeUserDivClickHandler(clickedTag){
    user = getUserPointedByTag(clickedTag)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:35:40.410

多次阅读问题后，我认为这就是您想要的：

```
document.addEventListener('click', function (e) {
    var node = e.target.tagName ? e.target : e.target.parentNode;
    yourAwesomeUserDivClickHandler(node);
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:48:27.690

我认为你最好使用`data-`属性来存储用户 ID。

```
<div class="user" data-userid="10"></div>
<div class="user" data-userid="11"></div> 
```

这样，您可以使用以下方法轻松检索与元素关联的用户 ID：

```
document.addEventListener("click", function (e) {
    var node = e.target.tagName ? e.target : e.target.parentNode;
    var userId = e.getAttribute("data-userid");
    // Do something with the user ID
}, false); 
```

# ruby - ruby 全局路径变量是如何设置的？

> ID：10839665
> 
> 赞同：0
> 
> 时间：2012-05-31T19:02:23.750
> 
> 标签：ruby

如果我这样做，`ruby -v`我会得到：

```
ruby 1.9.3p0 (2011-10-30 revision 33570) [x86_64-darwin11.3.0] 
```

但如果我这样做，`ruby -e 'puts $:'`我会得到：

```
/usr/local/lib/ruby/site_ruby/1.9.1/rubygems.rb:31:in `require': cannot load such file -- rbconfig (LoadError)
from /usr/local/lib/ruby/site_ruby/1.9.1/rubygems.rb:31:in `<top (required)>'
from <internal:gem_prelude>:1:in `require'
from <internal:gem_prelude>:1:in `<compiled>' 
```

我需要做什么来编辑 $: 变量，使其停止寻找 ruby​​ 1.9.1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:27:53.613

`$:`是 的简写名称`$LOAD_PATH`。

也许`gem`正在使用与`ruby`;不同的 Ruby 尝试：

```
which ruby
gem env | grep 'RUBY EXECUTABLE' 
```

如果你得到不同的结果，那么我们就知道问题出在哪里。

# java - 如何在正则表达式中匹配包含 3 个或更多数字的单词？

> ID：10839668
> 
> 赞同：0
> 
> 时间：2012-05-31T19:02:26.750
> 
> 标签：java, regex

我想从字符串中删除一个单词，如果它包含 3 个或更多连续数字并且它是字符串中的第一个单词？

我想我需要 replaceFirst() 函数，但我不确定正则表达式

例如。

你好世界一二。--> 没有变化

**H931llo世界一二。--> 世界一二**。

你好世界 112 一二 --> 没有变化

**编辑：**连续数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:07:22.763

如果该单词包含至少三个连续数字，则以下正则表达式将仅匹配字符串开头的单词：

```
^\w*\d{3}\w* 
```

`\w`匹配`[a-zA-Z0-9_]`，如果启用了 Unicode 选项，通常是来自其他语言的字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:06:26.777

正则表达式：

```
^[A-Za-z]*\d{3}\d*[A-Za-z]* 
```

# php - 在闭包中使用数组元素

> ID：10839670
> 
> 赞同：4
> 
> 时间：2012-05-31T19:02:36.623
> 
> 标签：php, closures

PHP 5.3 添加了对闭包的支持，我想知道您是否可以关闭特定的数组元素而不是整个数组。

例如，您可以这样做：

```
$a = array('a', 'e', 'i', 'o', 'u');
$f = function($b) use($a){
    echo $a[2].$b;
};
$f('!'); // echos "i!" 
```

但是有没有办法只关闭周围`$a[2]`？可能是这样的：

```
$f = function($b) use($a[2] as $c){
    echo $c.$b;
}; 
```

这不起作用，它给出：

> 解析错误：语法错误，意外的 '['，期待 ',' 或 ')'

显然，我可以这样做：

```
$c = $a[2];
$f = function($b) use($c){
    echo $c.$b;
}; 
```

但是，我认为必须有比这更好的方法。那么，有没有办法只关闭数组中的特定变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:31:41.470

正如评论员已经提到的：不。

目前`use`只需要 T_Variable ($var) 或 Reference T_Variable (&$var)。
但是有一个补丁`as`可以像您的示例一样使用。它可以在[gist](https://gist.github.com/2367913)上找到。

也许这将在一段时间内合并到 master 中，以便在未来的版本中成为可能。

但我真的不认为这是一个巨大的功能:-)

所以你必须同时使用你的替代解决方案。

# python - Problems with web.py and webopenid

> ID：10839672
> 
> 赞同：3
> 
> 时间：2012-05-31T19:02:45.863
> 
> 标签：python, openid, web.py

I'm having a problem with the webopenid module for an application I'm working on.

The code thus far is:

```
import web

from web import template, webopenid
from cms import database

urls = (
    "/", "index",
    "/openid", "webopenid.host"
)

render = template.render("templates", base="base")

class index():
    def GET(self):
        oid = webopenid.status()

        if not oid:
            form = webopenid.form("/openid")
            return render.account_login(form)
        else:
            return render.account_home

app = web.application(urls, globals())

if __name__ == "__main__":
    app.run() 
```

When I try to submit a login (in the form of: [https://openid.domain.com/user](https://openid.domain.com/user)), I'm presented with this:

```
<type 'exceptions.ValueError'> at /openid
need more than 1 value to unpack

Python  /Library/Python/2.6/site-packages/web.py-0.36-py2.6.egg/web/application.py in _match, line 415
Web POST http://account.dev.s92.org:8080/openid 
```

I've checked against other examples of webopenid usage, which indicates that my code is just fine - any ideas what the problem may be?

# c++ - 从 WPF 窗口内的托管 DLL 启动 WNDProc

> ID：10839675
> 
> 赞同：1
> 
> 时间：2012-05-31T19:02:54.273
> 
> 标签：c++, wpf, winapi

我试图让一个托管 DLL 与我的 WPF 应用程序一起工作，这让我很难过。这个想法是从 WPF MainWindow 后面的代码中调用该函数（这样我就可以获得窗口句柄）并传递它和另一个指针，该指针最终是 wchar_t 类型的指针。

我可以调用 dll，但是 WNDProc 没有启动，我认为它与应用程序的实例甚至句柄有关，但我不能把手指放在它上面。该项目成功构建，只是不运行 WNDProc。

该应用程序的想法是使用 WPF 并调用 c++ 来启动一个服务器实例，该实例调用 Windows 中内置的远程协助 API。

这是我所拥有的：

```
#pragma once

#include "stdafx.h"
#include <winsock2.h>
#include <tchar.h>
#include "RDP.h"

#pragma warning(disable : 4996)
#pragma warning(disable : 4267)
#pragma comment(lib,"ws2_32.lib")

namespace RDPServerSession
{
RAS::SERVER* s = 0;
HWND MainWindow = 0;
HWND hL = 0;
HINSTANCE hAppInstance = 0;
wchar_t* password;

enum
{
    MESSAGE_NOTIFY = WM_USER + 2,
};

public ref class Server
{
public:
    void StartServer(System::IntPtr id, System::IntPtr handle)
    {
        password = reinterpret_cast<wchar_t*>(id.ToPointer());

        WSADATA wData;
        WSAStartup(MAKEWORD(2, 2), &wData);
        CoInitializeEx(0,COINIT_APARTMENTTHREADED);
        /*INITCOMMONCONTROLSEX icex = {0};
        icex.dwICC = ICC_LISTVIEW_CLASSES | ICC_DATE_CLASSES | ICC_WIN95_CLASSES;
        icex.dwSize = sizeof(icex);
        InitCommonControlsEx(&icex);*/
        //InitCommonControls();
        //PrepareDoMatchTable();

        hAppInstance = GetModuleHandle(NULL);

        WNDCLASSEX wClass = {0};
        wClass.cbSize = sizeof(wClass);

        wClass.style = CS_DBLCLKS | CS_HREDRAW | CS_VREDRAW | CS_PARENTDC;
        wClass.lpfnWndProc = (WNDPROC)Main_DP;
        wClass.hInstance = hAppInstance;
        wClass.hCursor = LoadCursor(0, IDC_ARROW);
        wClass.hbrBackground = (HBRUSH) GetStockObject(WHITE_BRUSH);
        wClass.lpszClassName = _T("CLASS");
        RegisterClassEx(&wClass);

        /*MainWindow = CreateWindowEx(0,
            _T("CLASS"),
            ttitle,
            WS_OVERLAPPEDWINDOW | WS_CLIPSIBLINGS |
            WS_CLIPCHILDREN, CW_USEDEFAULT, CW_USEDEFAULT,
            500, 600, 0,LoadMenu(h,_T("MENU_1")), h, 0);*/

        ShowWindow(MainWindow,SW_SHOW);

        MSG msg;

        while(GetMessage(&msg,0,0,0))
        {
            TranslateMessage(&msg);
            DispatchMessage(&msg);
        }
        return;
    }

    static void StartS(HWND hh)
{
if (!s)
    {
    s = new RAS::SERVER;
    int ty = 0,po = 0,col = 16;
    bool dy = 0;

    bool Rev = false;
    if (GetKeyState(VK_CONTROL) >> 15)
        Rev = true;

    s->CreateVirtualChannel(L"test",true,CHANNEL_PRIORITY_MED);
    s->Open();
    s->SetWindowNotification(hh,MESSAGE_NOTIFY);

    vector<int> pids;
    vector<wstring> names;
    vector<int> ST;
    s->GetShareableApplications(pids,names,ST);

    RAS::S_INVITATION* inv = s->Invite(0,password,L"group",3);
    if (inv)
        {
        const wchar_t* password = inv->GetTicket().c_str();
        }

    return;
    }
else
    {
    delete s;
    s = 0;
    }
}

static LRESULT CALLBACK Main_DP(HWND hh,UINT mm,WPARAM ww,LPARAM ll)
{
switch(mm)
    {
    case WM_COMMAND:
        {
        int LW = LOWORD(ww);
        if (LW == 100)
            StartS(hh);
        return 0;
        }

    case WM_CLOSE:
        {
        if (s)
            StartS(hh);
        DestroyWindow(hh);
        return 0;
        }

    case WM_DESTROY:
        {
        PostQuitMessage(0);
        return 0;
        }
    }
return DefWindowProc(hh,mm,ww,ll);
}

    void StopServer() { delete s; }
    ~Server() { }
}; 
```

}

关于为什么 Wndproc 不运行的任何想法或建议？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:21:41.730

窗口过程`Main_DP`与窗口类相关联`CLASS`。但是您没有使用该类创建窗口（代码已注释掉），因此不使用窗口过程。

**更新**

您想处理现有主窗口的消息，但不能将新窗口类与现有窗口相关联。相反，您需要[子类化 window](http://blogs.msdn.com/b/oldnewthing/archive/2003/11/11/55653.aspx)。（正如 Ben Voigt 所说，您不应该使用该`SetWindowLong`技术。）

将窗口子类化后，您就不需要自己的消息循环了。只需返回 WPF 代码。（请注意，可能无法用您自己的可靠地替换 WPF 的消息循环。它可能不仅仅是一个简单的`TranslateMessage/DispatchMessage`.）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:25:36.190

您可以使用资源来创建表单并使用**CreateDialogParam()**

# android - Android app displaying a gif

> ID：10839676
> 
> 赞同：0
> 
> 时间：2012-05-31T19:03:05.873
> 
> 标签：android, eclipse, gif

[Display Animated GIF](https://stackoverflow.com/questions/3660209/android-display-animated-gif)

I was reading that link above and some others butI can't get mine to work. I wither wanted it to run just the gif image in a view or something like that or have it split into frames and it goes threw each frame. Is there a video or something on this or can someone post there xml, and java file and the pictures they used. I need a really detailed tuturial for this one.

Also is it possible to send users messages on here?

* * *

This is the java class (FrenchSilk)

```
import android.app.Activity;
import android.os.Bundle;
import android.view.SurfaceView;

public class FrenchSilk extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.frenchsilk);

        SurfaceView v = (SurfaceView) findViewById(R.id.surfaceView1);
        GifRun w = new GifRun();
        w.LoadGiff(v, this, R.drawable.rotating_planet);

    }
} 
```

This is the XML class (frenchsilk)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:ignore="HardcodedText" >

<!--    <TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:gravity="center"
    android:text="Words"
    android:textSize="25dp" />  
-->

<SurfaceView
    android:id="@+id/surfaceView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

</LinearLayout> 
```

I have a gif file in the Drawable-hdpi folder called rotating_planet

I was following that youtube video but I don't no whats supposed to be in the GifRun class or if theres a different way to show a animated gif.

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-14T00:11:18.857

从这里下载 GifRun .....

[https://www.dropbox.com/s/hij2gztuitz2lbn/TheGif.zip](https://www.dropbox.com/s/hij2gztuitz2lbn/TheGif.zip)

# javascript - $("123").ready (fn(){}) 无论如何都会触发

> ID：10839678
> 
> 赞同：0
> 
> 时间：2012-05-31T19:03:13.647
> 
> 标签：javascript, jquery, asp.net

我有一个问题，无论我在参数中输入什么，$().ready 都会触发，这意味着它实际上是在页面准备好之前触发的。我正在使用与 EXT.NET 混合的 ASP.NET，并希望实现 jQuery 来增加一些趣味性。正如描述所说，无论如何它都会触发，所以如果我将“123”放入参数中，它无论如何都会向我显示 alart() 。这是正在运行的代码：

```
 $("123").ready(function () {
        var $kids = $("x-column-inner").children();
        alert($(".x-column-inner").height());
    }); 
```

结果“.x-column-inner”为空，因为它还没有完成页面编译并且已经在执行javascript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:05:31.877

该`.ready`方法完全忽略选择器中的内容。它仅`DOMContentLoaded`在浏览器触发事件​​时触发。

但是请注意，DOMContentLoaded 可能会在图像和 css 表单加载完成之前触发，从而导致高度和宽度测量不准确。如果这对您来说是个问题，您需要使用`$(window).load();`

如果`DOMContentLoaded`事件已经被触发，ready 回调将立即执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:07:34.403

您在第一个选择器中缺少句点：

```
$(function () {
    var $kids = $(".x-column-inner").children();
    alert($(".x-column-inner").height());
}); 
```

# c# - Grid and Listbox have some Border i cannot get rid of

> ID：10839679
> 
> 赞同：3
> 
> 时间：2012-05-31T19:03:15.280
> 
> 标签：c#, wpf, xaml, listbox, styles

I'm quite new to WPF. I just try some layouting with Grid and Listbox, but I have some padding / spacing / margin / border (just call it border for shortness) that I can not get away.

The border is around the four elements, the elements themselves have no problems and there is no space between them.

Also tried the WPF Inspector, but I can't find out where this comes from. Nothing to see in it.

Here is my XAML:

```
<Window x:Class="WpfElements.FourElements"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="FourElements" Height="701" Width="351">
<Grid Background="Red" Margin="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <ListBox Margin="0" BorderThickness="0" Padding="0" Grid.Row="0" Grid.Column="0" Background="Lime" SelectionMode="Single" ItemsSource="{Binding Path=Texts}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" ScrollViewer.VerticalScrollBarVisibility="Disabled" VerticalContentAlignment="Stretch" HorizontalContentAlignment="Stretch">
        <ListBox.ItemsPanel>
            <ItemsPanelTemplate>
                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                </Grid>
            </ItemsPanelTemplate>
        </ListBox.ItemsPanel>
        <ListBox.ItemTemplate>
            <DataTemplate>
                <TextBox Text="{Binding ItemText}" Grid.Row="{Binding Path=Row}" Grid.Column="{Binding Path=Col}" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0"></TextBox>
            </DataTemplate>
        </ListBox.ItemTemplate>
        <ListBox.ItemContainerStyle>
            <Style>
                <Setter Property="Grid.Column" Value="{Binding Path=Col}"/>
                <Setter Property="Grid.Row" Value="{Binding Path=Row}"/>
                <Setter Property="ContentControl.HorizontalContentAlignment" Value="Stretch"/>
                <Setter Property="ContentControl.VerticalContentAlignment" Value="Stretch"/>
                <Setter Property="ContentControl.Margin" Value="0"/>
                <Setter Property="ContentControl.Padding" Value="0"/>
                <Setter Property="Control.BorderThickness" Value="0"/>
            </Style>
        </ListBox.ItemContainerStyle>
    </ListBox>
</Grid> 
```

Hope someone can help me get rid of this border. Thank you so much!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T19:45:34.233

问题是第一个`Border`里面的`ListBox` `Template`，它已经`Padding`设置到了`1,1,1,1`。
看起来像这样

```
<Style TargetType="{x:Type ListBox}" ...>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ListBox}">
                <Border x:Name="Bd"
                        Padding="1">
                <!-- ... --> 
```

正如您在 中看到的`Template`，`Border`名称是 Bd。

在事件中更改`Template`for`ListBox`或将其设置为 0`Loaded`

*Xaml*

```
<ListBox ...
         Loaded="ListBox_Loaded"> 
```

*背后的代码*

```
private void ListBox_Loaded(object sender, RoutedEventArgs e)
{
    ListBox listBox = sender as ListBox;
    Border Bd = listBox.Template.FindName("Bd", listBox) as Border;
    Bd.Padding = new Thickness(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:10:09.690

您是否尝试过为 ListBox 或 Grid 设置 ControlTemplate。您应该能够通过编写自己的模板来摆脱边界。

# ruby-on-rails-3 - Rails Production Log - Sometimes requests are logged and sometimes not

> ID：10839684
> 
> 赞同：1
> 
> 时间：2012-05-31T19:03:43.643
> 
> 标签：ruby-on-rails-3, caching, logging

I am having troubles finding out the reason my application won't work. I am using apache + passenger.

```
# config/environments/production.rb
config.log_level = :debug 
```

The problem is sometimes request are logged and sometimes not.

I.E.

```
Request: GET /a/b

# tail -f /var/log/httpd/error_log
cache: [GET /a/b] miss

# tail -f log/production.l
Started GET "/a/b" for 189...

ActionController::RoutingError (No route matches [GET] "/a/b"):
[... stack trace ...] 
```

Nice. That is exactly what I expected to see in my log. But the second time I try the same request (from another browser so I rule out any local cache), I see the same output in the apache error log, but the production.log is unchanged.

If I try a different request, I can see the output in both logs.

```
Request: GET /a/b/c

# tail -f /var/log/httpd/error_log
cache: [GET /a/b/c] miss

# tail -f log/production.l
Started GET "/a/b/c" for 189...

ActionController::RoutingError (No route matches [GET] "/a/b/c"):
[... stack trace ...] 
```

Looks like there is a cache that won't log "redundant" warnings and errors.

Well, the question is, how do I log everything?

TIA.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T21:00:05.540

也许这就是原因： [https ://github.com/rails/rails/issues/4277](https://github.com/rails/rails/issues/4277)

# wordpress - tinymce“从单词中粘贴”不剥离 Calibri

> ID：10839685
> 
> 赞同：2
> 
> 时间：2012-05-31T19:03:43.827
> 
> 标签：wordpress, ms-word, tinymce

在 wordpress 3.3.2 中使用 tinymce 从 word 功能粘贴对我的用户来说非常有用，但我遇到了一个问题，每当有人从 Calibri 中设置的 word 文档中粘贴内容时，Calibri 仍然存在，所有其他字体都会被删除。

任何人都经历过这种情况或知道可能导致这种情况的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:44:18.677

这可能对您有帮助：[TinyMCE 粘贴为纯文本](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text)

您可能需要修改代码以保留特殊标签或属性。

# html - Div positioning not working properly

> ID：10839692
> 
> 赞同：1
> 
> 时间：2012-05-31T19:04:21.557
> 
> 标签：html, css

I have 4 `div` elements, one after the other. The 1st, 2nd, and 4th are working fine, but the 3rd `div` is not positioning properly. I am setting its position, but it's not following ...my code ..

`.mid_table` `div` is left aligned, but I want it to follow the coordinates given in CSS.

[jsFiddle Example](http://jsfiddle.net/FKk29/)

## CSS

```
#top_table {
    background-image: url(images/Round%20corner);
    background-repeat: no-repeat;
    background-position: center top;
    height: 25px;
}
#bottom_table {
    background-image: url(images/Round%20corner);
    background-repeat: no-repeat;
    background-position: center bottom;
    height: 25px;
}
#mid_table {
    background-color: #09F;
    left: 54px;
    width: 449px;
    height: 200px;
    position: relative;
} 
```

## HTML

```
<body>
<div id="logo" >
 <center>
  <h1><b> Portal</b></h1>
 </center>
</div>
<div id="top_table">
 <!-- empty -->
</div>
<div id="mid_table">
 Content for  id "mid_table" Goes Here
</div>
<div id="bottom_table">
 Content for  id "bottom_table" Goes Here
</div>
<div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:11:40.003

你有没有尝试过

```
position: relative 
```

? position: absolute 仅在对其他事物“绝对”时才有效。所以需要定位父母的祖先，例如 position: relative

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:18:56.630

与 position: relative 应该工作。（你的css中已经有了相对位置，所以我猜是编辑的人）

你在哪个浏览器上测试？如果它不适合您，则可能是浏览器问题。

你可以在这里查看。

[jsfiddle](http://jsfiddle.net/fgiust/Kabba/)

同样在您的 html 中，底部有一个未闭合的 div 标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:33:30.027

我没有看到可能破坏第三个 div 显示的错误。只有 /body 标记之前未关闭的 div。你的浏览器是什么？坐标使用给定的属性相对位置。

# netty - Netty Game Server

> ID：10839696
> 
> 赞同：1
> 
> 时间：2012-05-31T19:04:33.033
> 
> 标签：netty

I am trying to build a generic server for always on connected clients.

The architecture consists of 4 main components

*   Stateful App Servers
*   Stateless Gateway Servers
*   Clients Queueing
*   Systems and brokers

**Process flow**

1.  Client connects to a gateway
2.  Gateway accepts as sends a session id back to client
3.  Client sends a message to gateway
4.  The Gateway writes the request to a Message / Task Queue
5.  A daemon reads the messages on the Queue and forwards them to the App Server(s)'s listening socket
6.  The App Servers runs the message through its business logic
7.  The App Server then at a later point sends a related message to the client into the gateway queue
8.  A thread on the gateway reads the messages in its inbound queue and then sends messages back to clients as identified in the message.
9.  The gateway maintains a map of Client Session Id to the Client Socket object to forward incoming messages to the Client Sockets

I am using Java Netty for gateway. App server is also in Java.

I am tempted to say that the design is like Mongrel2 but I am not completely sure. I would say this is more on the lines of the Helium edge server design of Urban Airship (http://urbanairship.com/blog/2010/08/24/c500k-in-action-at-urban-airship/)

My question is: - Is using a thread for reading messages from the inbound queue and then forwarding them to clients a good idea? Is there a better way to handle this? How do i ensure that the messages go to the respective client socket without using another thread?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T17:56:18.973

您可以使用虚拟机内消息传递。这是一个[netty游戏服务器](https://github.com/menacher/java-game-server)（小心！我写的！）已经使用了这种actor模型。它使用 JetLang 进行事件分派和会话来**记住**与客户端的每个连接。虽然您的用例可能无法直接得到满足，但如果您查看 jetserver 的源代码并衍生出您自己的逻辑，您肯定会得到一些想法。

如果您注意到，即使是无状态的 UDP 也与会话相关联。

# ruby-on-rails - 在 attr_encrypted 使用所述虚拟属性作为加密密钥之前未设置虚拟属性

> ID：10839699
> 
> 赞同：1
> 
> 时间：2012-05-31T19:04:50.480
> 
> 标签：ruby-on-rails, virtual-attribute, attr-accessible, attr-accessor, attr-encrypted

何时`encryption_key`由 调用`attr_encrypted`，`:passphrase`尚未设置。加密密钥最终是盐的 sha1 散列；它*应该*是密码和盐的 sha1 哈希。

salt 在创建时生成并保存在数据库中。

如何`:passphrase`在加密密钥中使用虚拟属性？

有什么建议么？

为简洁起见，我省略了一堆代码。

```
class Employee < ActiveRecord::Base
    require 'digest/sha1'
    attr_accessor :passphrase, :ssn
    attr_accessible :passphrase, :ssn
    attr_encrypted :ssn, :key => proc { |employee| "#{employee.encryption_key}" }

    def encryption_key
        unless salt?
            self.salt = Digest::SHA1.hexdigest(generate_salt)
        end

        Digest::SHA1.hexdigest([passphrase, self.salt].join)
    end
end

class EmployeesController < ApplicationController
    def create
        @employee = @parent.employees.new(params[:employee])
        if @employee.save
            redirect_to @parent
        else
            render action: "new"
        end
    end
end 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T23:28:00.830

尝试在密码和其他属性之后设置 ssn

```
class EmployeesController < ApplicationController
  def create
    ssn = params[:employee].delete(:ssn)
    @employee = @parent.employees.new(params[:employee])
    @employee.ssn = ssn
    if @employee.save
        redirect_to @parent
    else
        render action: "new"
    end
  end
end 
```

# python - Time-weighted average with Pandas

> ID：10839701
> 
> 赞同：10
> 
> 时间：2012-05-31T19:04:59.530
> 
> 标签：python, time-series, pandas

What's the most efficient way to calculate the time-weighted average of a TimeSeries in Pandas 0.8? For example, say I want the time-weighted average of `df.y - df.x` as created below:

```
import pandas
import numpy as np
times = np.datetime64('2012-05-31 14:00') + np.timedelta64(1, 'ms') * np.cumsum(10**3 * np.random.exponential(size=10**6))
x = np.random.normal(size=10**6)
y = np.random.normal(size=10**6)
df = pandas.DataFrame({'x': x, 'y': y}, index=times) 
```

I feel like this operation should be very easy to do, but everything I've tried involves several messy and slow type conversions.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T19:15:41.527

You can convert `df.index` to integers and use that to compute the average. There is a shortcut `asi8` property that returns an array of int64 values:

```
np.average(df.y - df.x, weights=df.index.asi8) 
```

# jquery - jQuery Mobile: load dialog box if inputbox(s) are empty

> ID：10839702
> 
> 赞同：0
> 
> 时间：2012-05-31T19:05:05.783
> 
> 标签：jquery, jquery-mobile

I know how to load a dialog box with `<a href="alert.html" data-rel="dialog">test</a>` what I would like to do is have the dialog box load if any of the form values are blank. This would be triggered/checked when the **Next** (page15.html) link is clicked. Any suggestion on how to accomplish this?

```
<a data-role="button" href="page15.html" data-icon="arrow-r" data-iconpos="right">
  Next
</a>
    <form action="#" method="POST">
        <div data-role="fieldcontain" class="no-field-separator">
            <fieldset data-role="controlgroup">
                <label for="textinput2">
                    <span class="c_404040 f_bold">Body Fat Measurements</span>
                </label>
                <input id="textinput2" placeholder="Subsc (mm)" value="" type="number" />
            <br />
                <label for="textinput3">
                </label>
                <input id="textinput3" placeholder="Supra Crest (mm)" value="" type="number" />
            <br />
                <label for="textinput4">
                </label>
                <input id="textinput4" placeholder="Bic (mm)" value="" type="number" />
            <br />
                <label for="textinput5">
                </label>
                <input id="textinput5" placeholder="Tri (mm)" value="" type="number" />
            </fieldset>
        </div>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:21:59.857

这样的事情将是一种方式：

```
var missingBox = 0;
$('a[href="page15.html"]').click(function(e) {
    e.preventDefault();
    $.each($('form input'),function() {
        if($(this).val() == 0) {
            missingBox += 1;
        } else {
        }
    });
        if(missingBox > 0) {
        console.log('alert');
    }
}); 
```

# javascript - 使用 KineticJS 移动形状

> ID：10839709
> 
> 赞同：4
> 
> 时间：2012-05-31T19:05:22.007
> 
> 标签：javascript, canvas, kineticjs

[这是一个 jsfiddle](http://jsfiddle.net/HZPSU/4/)，其形状应在鼠标拖动事件中移动。我可以在 javascript 控制台中看到 shape.move() 以适当的值调用，但形状不会移动。

为什么形状不动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:26:38.207

调用后`stage.draw()`，形状移动。

# iphone - Issue on search arabic words using FastPdfKit

> ID：10839710
> 
> 赞同：2
> 
> 时间：2012-05-31T19:05:24.257
> 
> 标签：iphone, objective-c, ios, ipad

I'm using `fastPdfKit` to open pdf files in my iPhone app, it is a great kit do search, get bookmarks, go to specific pages and zooming but when I opened an arabic pdf document and tried to search for an arabic word, I found that it searches for just 1 separated character is there any solution for this problem ??

# selenium - 如何从下拉列表中选择元素

> ID：10839717
> 
> 赞同：0
> 
> 时间：2012-05-31T19:05:45.700
> 
> 标签：selenium, webdriver

好吧，这听起来太笼统了。我已经能够在其他领域做到这一点，我不确定这里有什么不同。

我在被测系统的页面中有这段 html 小片段：

```
<select id="TransferUnit" name="TransferUnit">
<option value="GB" selected="selected">GB</option>
<option value="TB">TB</option>
</select> 
```

很简单，对。在 selenium 中，我可以通过在选择元素上发出 .click() 来打开下拉菜单。我可以使用 .is_displayed() 检查这两个选项是否可见。我可以用 .is_selected() 检查它是否被选中。但我无法让 .click() 更改选择列表中的哪个元素。

当然，这在我手动尝试时有效。但是我在自动化它时遇到了很多麻烦。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:24:11.267

在 IDE 中，使用如下定位器单击元素：

```
xpath="//option[@value='TB']" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T00:17:34.113

根据[此文档](http://seleniumhq.org/docs/03_webdriver.html#user-input-filling-in-forms)，您可以执行以下操作之一：

任何一个

```
// even when the drop down is not expanded
driver.find_element_by_xpath("//option[@value='TB']").click(); 
```

或者

```
select = Select(driver.find_element_by_tag_name("select"))
select.deselect_all()
select.select_by_visible_text("TB") 
```

[用于`Select`.](http://selenium.googlecode.com/svn/trunk/docs/api/py/webdriver_support/selenium.webdriver.support.select.html)

如果两者都不起作用，请更新您的 Selenium 版本（当前版本是 2.22.0）和浏览器，如果可能的话 - 例如完全支持的 Firefox 是 3.6.*、10、11、12。

如果仍然没有任何效果，请寻找令人讨厌的 Javascript 来破坏我们的努力。

# python - 如何在 matplotlib python 2.6.6 中的图中在 X 轴上设置“步长”？

> ID：10839719
> 
> 赞同：27
> 
> 时间：2012-05-31T19:05:46.830
> 
> 标签：python, matplotlib

我有一些代码：

```
#!/usr/bin/env python

import matplotlib
matplotlib.use("Agg")       
import matplotlib.pyplot as plt

x = [1,2,3,4,5]
y = [1.2,1.9,3.1,4.2,4.8]

plt.plot(x,y)
plt.xlabel('OX')
plt.ylabel('OY')
plt.savefig('figure1.png')
plt.close() 
```

它给了我这个数字：[我的数字](https://i.stack.imgur.com/b7bjY.png)

如您所见，X 轴上的“步长”为 0.5，但我想将其设置为 1。如何制作？

当我使用`plt.xticks(1)`它时，它会给我错误：

> 回溯（最后一次调用）：文件“overflow.py”，第 13 行，在 plt.xticks(1) 文件“/usr/lib/pymodules/python2.6/matplotlib/pyplot.py”，第 998 行，在 xticks locs = ax.set_xticks(args[0]) File "/usr/lib/pymodules/python2.6/matplotlib/axes.py", line 2064, in set_xticks return self.xaxis.set_ticks(ticks, minor=minor) 文件“/usr/lib/pymodules/python2.6/matplotlib/axis.py”，第 1150 行，在 set_ticks 如果 len(ticks) > 1: TypeError: 'int' 类型的对象没有 len()

我在 Ubuntu 10.10 上使用 Python 2.6.6 ....

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-31T19:10:26.273

```
plt.xticks([1, 2, 3, 4, 5]) 
```

[xticks 文档。](http://matplotlib.sourceforge.net/api/pyplot_api.html?highlight=xticks#matplotlib.pyplot.xticks)

![五个 X 标记。](../Images/837df4793955ed90d175ecb9231f9baf.png)

# javascript - Android上的html5视频标签给出黑屏

> ID：10839730
> 
> 赞同：0
> 
> 时间：2012-05-31T19:06:08.163
> 
> 标签：javascript, android, html

我正在尝试设置移动网站并测试 Android 设备。我可以加载和播放 h264 视频，但我有一个黑屏。代码很简单：

```
<video id='myfileplayer2' src='mysite/mobile/video.mp4' width='280' height='200'  controls></video> 
```

有任何想法吗？

我还按照一些搜索的建议尝试了一些 javascript：

```
var video = document.getElementById('myfileplayer2');
  video.addEventListener('click',function(){
  video.play();
},false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T19:52:27.240

这对我有用：

```
<style type="text/css">       
    #Video1
    {
     position:fixed;
     top: 0px;
     left:0px;        
     width: 100%;       
     border:0px;
     display:block;
     }

    </style>
</head>
    <body>        
       <video id="Video1" preload="metadata" autobuffer autoplay>
        <source src="5xyz.mp4" type="video/mp4" />
        <source src="//5xyz.webm" type="video/webm"/>
<source src="//5xyz.ogv" type="video/ogg"/>
       </video>

<script>
var Video1 = document.getElementById('Video1');
Video1.addEventListener('click',function(){
  Video1.play();
},false);
</script> 
```

这对我有用，只需单击黑屏。我的问题和你的一样，如何为一些“播放按钮”图像更改这个黑屏....有人吗？

# c++ - 如何在 C 中映射继承的 C++ 结构？

> ID：10839731
> 
> 赞同：1
> 
> 时间：2012-05-31T19:06:22.533
> 
> 标签：c++, c, inheritance, typedef

我尝试访问从最初设计为具有结构继承的 C++ 库接收的 C 程序数据：

例子：

```
// C++ data structures
typedef struct _Base
{
public:
    int id;
    wchar_t* name;
} Base;

typedef struct _Struct1 : Base
{
public:
    int valueCount;
} Struct1;

typedef struct _Struct2 : Base
{
public:
    int parentID;
    int amount;
} Struct2; 
```

我尝试在 C 中使用以下数据结构进行映射。

```
typedef struct _Base
{
    int id;
    wchar_t* name;
} Base;

typedef struct _Struct1
{
    // Base struct data
    int id;
    wchar_t* name;

    int valueCount;
} Struct1;

typedef struct _Struct2
{
    // Base struct data
    int id;
    wchar_t* name;

    int parentID;
    int amount;
} Struct2; 
```

但是打印数据，看起来我得到了错误的值。

我是否遗漏了什么，关于 C++ 如何在内部表示继承结构的任何参考？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:18:26.103

POD 的 C++11 规则（[什么是聚合和 POD 以及它们如何/为什么特别？](https://stackoverflow.com/questions/4178175/what-are-aggregates-and-pods-and-how-why-are-they-special/7189821#7189821)）~~指定~~ *不允许将具体的基类与数据成员混合，但实际上对于大多数编译器来说*，只有一个 POD 基类相当于将该类封装为第一个成员。

尝试指定封装基本结构的 C 结构：

```
typedef struct _Struct1
{
    Base base;
    int valueCount;
} Struct1; 
```

请注意，如果 C++ 类不是 POD（例如具有虚拟方法），这将不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:15:04.227

您可能能够欺骗您的 C 编译器以生成具有与 C++ 类相同的内存布局的结构，并且在许多情况下这将起作用，但这是一个相当不稳定的构建基础。

可移植的方法是编写访问器函数。请务必将它们声明为`extern "C"`.

头文件的说明性示例（不一定干净；在 Web 表单中编写代码的典型警告适用:-)）：

```
#ifdef __cplusplus

// C++ declarations go here

class Foo
{
public:
   int bar;
};

// C calling conventions follow

extern "C" {

#else

// Make it so your C code can work with Foo* as an incomplete/not-dereferencable
// type.
typedef void Foo;

#endif

// Declare this in a C++ source file to return fooptr->bar
int foo_get_bar(Foo *fooptr);

#ifdef __cplusplus
} // extern "C"
#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:25:57.920

调查的一种可能性是您定义的结构是正确的，但编译器使用的对齐方式不匹配。看：

[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

通常您可以使用编译器开关或#pragma 指令设置对齐方式。您必须阅读编译器文档才能了解这一点。如果您无法联系 C++ 代码的作者，您可能必须使用调试器查看您收到的原始内存，以计算出结构中不同值之间的对齐/填充是什么。

如果一个程序是为 64 位机器编译的，而另一个程序是为 32 位机器编译的，就会出现这种问题。或者它可能取决于不同的编译器实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T19:14:54.370

您可以尝试在用于将来自 C++ 的值输出到 C 的 C++ 库上使用包装层，而不是直接使用来自 C++ 端的值。如果额外层的开销不会很大，那可能会起作用。

转换 C++ 类可能并不总是有效，因为它将成员和虚拟方法指针保留在类结构中。

# php - PHPUnit 依赖注入到测试用例中

> ID：10839744
> 
> 赞同：4
> 
> 时间：2012-05-31T19:07:19.250
> 
> 标签：php, dependency-injection, phpunit, dependency-management

我想知道是否可以将依赖项注入到`PHPUnit_Framework_TestCase`通过例如某些上下文测试套件派生的类中 - 以一种 PHPUnit 可以处理的方式，无论它是手动调用的，还是使用`phpunit.xml`配置文件还是其他方式？

请考虑以下示例：

```
<?php
interface AnyGreeter {   
    public function greet($recipient);
}   

class FriendlyGreeter implements AnyGreeter {   
    public function greet($recipient) {   
        return "Hello {$recipient}!";
    }   
}   

class DorkGreeter implements AnyGreeter {
    public function greet($recipient) {   
        return "Get lost, {$recipient}!";
    }   
} 
```

现在我想为实现的类提供一些通用测试`AnyGreeter`，例如：

```
<?php
class GeeterTest extends PHPUnit_Framework_TestCase {

    public function testGreet() {   
        $greeter = $this->getGreeter();
        $message = $greeter->greet("world");
        $this->assertContains("world", $message);
    }   

    public function setGreeter(AnyGreeter $greeter) {   
        $this->greeter = $greeter;
    }   

    public function getGreeter() {   
        if (null === $this->greeter) {
            $this->markTestSkipped("No greeter provided");
        }   
        return $this->greeter;
    }

    private $greeter;
} 
```

这可能会被我自己以及任何未来的实现（我无法控制）重新使用。

这怎么可能，尤其是在一个严重依赖接口的项目中？我不想为每一个实现编写抽象测试并扩展它们——

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:21:42.797

我认为您最好的方法是使用 Glen 提到的提供者：

```
class GreeterTestCase extends PHPUnit_Framework_TestCase
{
    protected function getGreeter()
    {   
    }   

    /** 
     * @dataProvider providerGreeter
     */
    public function testGreet(AnyGreeter $greeter)
    {   
        $message = $greeter->greet('world');
        $this->assertType('string', $message, 'AnyGreeter::greet() must return string');
        $this->assertContains('world', $message);
    }   

    public function providerGreeter()
    {   
        return array(array($this->getGreeter()));
    }   
} 
```

这样，库的其他部分可以扩展这个测试用例来测试他们自己的实现是否符合基本接口规范。他们的任何特定于该实现的自定义单元测试都包含在扩展测试用例中。

现在您可以选择测试单个实现（可能有自己的单元测试），或者只是将一组实现组合在一起以获得默认测试：

```
class AnyGreeterTestCase extends GreeterTestCase
{
    public function providerGreeter()
    {
        return array(
            array(new FriendlyGreeter()),
            array(new DorkGreeter()),
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:35:22.963

我从未见过这样做过，文档中也没有任何内容。测试似乎有点复杂。我会通过使用数据提供者将欢迎者对象传递给 testGreeter 方法来解决您的问题，然后您所要做的就是在提供者中维护一组具体的欢迎者类。

请参阅此处的“数据提供者”部分：[http ://www.phpunit.de/manual/3.2/en/writing-tests-for-phpunit.html](http://www.phpunit.de/manual/3.2/en/writing-tests-for-phpunit.html)

# c - gcc/clang 优化 uint8_t* 数组中 uint16_t 的 little-endian 加载

> ID：10839745
> 
> 赞同：2
> 
> 时间：2012-05-31T19:07:20.617
> 
> 标签：c, gcc, clang, compiler-optimization

鉴于以下情况：

```
#include <stdint.h>
#include <stdio.h>

uint16_t foo(uint8_t* x)
{
  uint16_t r = (x[1] << 8) | x[0];
  return r;
}

uint16_t bar(uint8_t* x)
{
  uint16_t r = ((uint16_t*) x)[0];
  return r;
} 
```

在 x86_64 上，GCC 和 Clang 都生成类似于以下内容的代码：

```
foo:                                    # @foo
        .cfi_startproc
# BB#0:                                 # %entry
        movzbl  (%rdi), %ecx
        movzbl  1(%rdi), %eax
        shll    $8, %eax
        orl     %ecx, %eax
        movzwl  %ax, %eax
        ret

bar:                                    # @bar
        .cfi_startproc
# BB#0:                                 # %entry
        movzwl  (%rdi), %eax
        ret 
```

是否有任何理由不将 foo 优化为等同于 bar （即执行单个 16 位加载）？负载对齐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:22:29.300

我不编写编译器，但我可以很好地猜测：

编译器使用的标准优化技术都不会影响`foo`. 要检测到它是否等效，`bar`需要进行特定的优化来发现这个特定的模式，并输出“改进的”代码。

那么，为什么没有对此进行特定的优化呢？可能是通常的原因：

> “投资回报不足”

换句话说，编码、调试和维护优化所花费的时间——以及检查该模式的每一行源代码所花费的额外编译时间——将淹没从中获得的任何好处。

而且，你当然已经`htons/ntohs`有了。我就用那些。

> 负载对齐？

这是一个有趣的，我不得不查一下。如果您的传入指针“x”不是字对齐的，那么`bar`会在许多架构上崩溃，但`foo`仍然可以工作。

然而，x86 架构允许未对齐的负载，因此即使对于未对齐的 x 值，这两个函数也应该工作。

# c++ - istream 与内存映射文件？

> ID：10839747
> 
> 赞同：13
> 
> 时间：2012-05-31T19:07:25.013
> 
> 标签：c++

我正在尝试将文件映射到内存，然后逐行解析-我应该使用 istream 吗？

istream 与将文件映射到 Windows 上的内存相同吗？我很难找到将文件映射到内存的完整示例。

我看到人们从 MSDN 链接内存映射文章，但如果有人可以推荐一个小的（~15 行？）示例，我将非常感激。

我一定是在搜索错误的东西，但是在 Google 上搜索“C++ 内存映射示例”时，我找不到包含迭代的示例。

这些是最接近的结果（只是让人们意识到我*看过*）：

*   [http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2044.html#ClassSharedMemoryObjectExample](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2044.html#ClassSharedMemoryObjectExample)
*   [http://msdn.microsoft.com/en-us/library/dd997372.aspx](http://msdn.microsoft.com/en-us/library/dd997372.aspx)（无 C++ 代码）
*   [https://beej.us/guide/bgipc/html/multi/mmap.html](https://beej.us/guide/bgipc/html/multi/mmap.html)（我相信是 Unix，不是 Windows）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T19:11:55.627

`std::istream`是一种抽象类型——你不能直接使用它。您应该使用自定义数组支持从它派生`streambuf`：

```
#include <cstddef>
#include <string>
#include <streambuf>
#include <istream>

template<typename CharT, typename TraitsT = std::char_traits<CharT>>
struct basic_membuf : std::basic_streambuf<CharT, TraitsT> {
    basic_membuf(CharT const* const buf, std::size_t const size) {
        CharT* const p = const_cast<CharT*>(buf);
        this->setg(p, p, p + size);
    }

    //...
};

template<typename CharT, typename TraitsT = std::char_traits<CharT>>
struct basic_imemstream
: virtual basic_membuf<CharT, TraitsT>, std::basic_istream<CharT, TraitsT> {
    basic_imemstream(CharT const* const buf, std::size_t const size)
    : basic_membuf(buf, size),
      std::basic_istream(static_cast<std::basic_streambuf<CharT, TraitsT>*>(this))
    { }

    //...
};

using imemstream = basic_imemstream<char>;

char const* const mmaped_data = /*...*/;
std::size_t const mmap_size = /*...*/;
imemstream s(mmaped_data, mmap_size);
// s now uses the memory mapped data as its underlying buffer. 
```

至于内存映射本身，我建议为此目的使用[Boost.Interprocess ：](http://www.boost.org/libs/interprocess/)

```
#include <cstddef>
#include <string>
#include <boost/interprocess/file_mapping.hpp>
#include <boost/interprocess/mapped_region.hpp>

namespace bip = boost::interprocess;

//...

std::string filename = /*...*/;
bip::file_mapping mapping(filename.c_str(), bip::read_only);
bip::mapped_region mapped_rgn(mapping, bip::read_only);
char const* const mmaped_data = static_cast<char*>(mapped_rgn.get_address());
std::size_t const mmap_size = mapped_rgn.get_size(); 
```

* * *

^(代码`imemstream`取自[Dietmar Kühl](https://stackoverflow.com/users/1120273/)的[这个答案](https://stackoverflow.com/a/13059195/636019)。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:22:07.110

> istream 与将文件映射到 Windows 上的内存相同吗？

不完全是。它们在同一意义上是不同的，“流”不是“文件”。

将文件视为存储的序列，将流视为“通道”（stream_buffer）的接口，该序列在从其存储移动到接收变量时流动。

将内存映射文件视为“文件” - 而不是存储在处理单元之外 - 同步存储在内存中。它的优点是作为文件的原始内存缓冲区可见。如果您想将其作为流读取，最简单的方法可能是使用具有该原始缓冲区作为读取位置的 istringstream。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-02T20:10:05.053

抽象地说，顺序读取文件不会通过使用内存映射文件或首先将其读入内存来加速。如果顺序读取文件不可行，则内存映射文件是有意义的。像在另一个答案中一样预先缓存文件，或者只是通过将文件复制到一个大字符串中，然后您可以通过其他方式处理 - 再次 - 只有在按顺序读取文件不可行并且您拥有 RAM 时才有意义它。这是因为操作中最慢的部分实际上是从磁盘上获取数据。无论您是将文件复制到 RAM 还是让操作系统在您可以访问它之前映射数据，或者当您让 std::iostream 逐行读取它并让它从文件中缓存时，都必须这样做足以使这项工作顺利进行。

在实践中，您可以通过制作缓冲区范围的浅拷贝来潜在地消除使用映射或缓存版本从 ram 到 ram 的一些复制。这仍然不会有太大变化，因为这是 RAM->RAM，因此与磁盘->RAM 相比可以忽略不计。

因此，在像您这样的情况下，最好的建议是不要太担心，只需使用 std::iostream。

[此答案用于存档目的，因为正确答案埋在评论中]

# c# - ASP.Net HTTPHandler 以匹配具有指定段数的路径

> ID：10839751
> 
> 赞同：1
> 
> 时间：2012-05-31T19:07:42.493
> 
> 标签：c#, asp.net, url-routing

目前在我的解决方案中，我有一个 HttpHandler 响应在 url 中包含“数据”的请求。

```
 <handlers>
  <remove name="UrlRoutingHandler" />
  <add name="MyHandler" verb="GET,POST" path="data/**" type="org.myorg.MyHandler" resourceType="Unspecified"/>      
</handlers> 
```

如何匹配包含“数据”但在匹配段之后有定义数量的段的 URL；说5？

> 数据/firstSeg/secondSeg/thirdSeg/forthSeg/fifthSeg

这可以在 web.config 中配置吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:21:36.867

我相信我已经找到了我的问题的答案。我正在使用：

```
> path = data/**/**/**/**/** 
```

双'**'的意思是'一切都在右边'。当我需要的是：

```
> path = data/*/*/*/*/*/ 
```

# c++ - QStreamData：如何使用 writeRawData 检测磁盘已满

> ID：10839756
> 
> 赞同：1
> 
> 时间：2012-05-31T19:07:57.507
> 
> 标签：c++, qt

以下行：

```
qDebug() << "Result writeData : " << stream.writeRawData((const char *)&header, sizeof(header_t)); 
```

即使我的磁盘已满，它也总是返回一个正值。为什么？我需要检测 writeRawData 何时因磁盘已满而失败。

因为它似乎永远不会失败，所以我的文件已损坏，因为 writeRawData 无法在整个磁盘上写入！

所以问题：如何使用 QStreamData 检测磁盘已满问题（顺便说一句，状态总是返回 OK！）

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:19:27.097

您应该检查写入的字节数是否符合您的要求。

除此之外，您在那里无能为力。底层操作系统/文件系统可以“撒谎”，即说写入通过（保存在缓存中）但后来发现它没有更多空间来扩展该文件。在底层文件描述符关闭或强制同步之前，该错误可能不会报告给应用程序。

调用`flush()`并检查其结果可能会有所帮助。如果这还不够，您可能至少需要使用系统特定的调用自己处理打开/关闭文件。

# java - HDFS 0.22.0 中的 java.io.EOFException

> ID：10839758
> 
> 赞同：0
> 
> 时间：2012-05-31T19:08:01.703
> 
> 标签：java, file-io, hadoop, hdfs

我正在使用以下文件从文件中读取字节：

```
FileSystem fs = config.getHDFS();
            try {

                Path path = new Path(dirName + '/' + fileName);

                byte[] bytes = new byte[(int)fs.getFileStatus(path)
                        .getLen()];
                in = fs.open(path);

                in.read(bytes);
                result = new DataInputStream(new ByteArrayInputStream(bytes));
            } catch (Exception e) {
                e.printStackTrace();
                if (in != null) {
                    try {
                        in.close();
                    } catch (IOException e1) {
                        e1.printStackTrace();
                    }
                }
            } 
```

我正在读取的目录中有大约 15,000 个文件。在某一点之后，我在 in.read(bytes) 行上得到了这个异常：

```
2012-05-31 14:11:45,477 [INFO:main] (DFSInputStream.java:414) - Failed to connect to /165.36.80.28:50010, add to deadNodes and continue
java.io.EOFException
        at java.io.DataInputStream.readShort(DataInputStream.java:298)
        at org.apache.hadoop.hdfs.protocol.DataTransferProtocol$Status.read(DataTransferProtocol.java:115)
        at org.apache.hadoop.hdfs.BlockReader.newBlockReader(BlockReader.java:427)
        at org.apache.hadoop.hdfs.DFSInputStream.getBlockReader(DFSInputStream.java:725)
        at org.apache.hadoop.hdfs.DFSInputStream.blockSeekTo(DFSInputStream.java:390)
        at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:514)
        at java.io.DataInputStream.read(DataInputStream.java:83) 
```

抛出的另一个异常是：

```
2012-05-31 15:09:14,849 [INFO:main] (DFSInputStream.java:414) - Failed to connect to /165.36.80.28:50010, add to deadNodes and continue
java.net.SocketException: No buffer space available (maximum connections reached?): connect
    at sun.nio.ch.Net.connect(Native Method)
    at sun.nio.ch.SocketChannelImpl.connect(SocketChannelImpl.java:507)
    at org.apache.hadoop.net.SocketIOWithTimeout.connect(SocketIOWithTimeout.java:192)
    at org.apache.hadoop.net.NetUtils.connect(NetUtils.java:373)
    at org.apache.hadoop.hdfs.DFSInputStream.getBlockReader(DFSInputStream.java:719)
    at org.apache.hadoop.hdfs.DFSInputStream.blockSeekTo(DFSInputStream.java:390)
    at org.apache.hadoop.hdfs.DFSInputStream.read(DFSInputStream.java:514)
    at java.io.DataInputStream.read(DataInputStream.java:83) 
```

请告知可能是什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:11:43.303

您忽略了 from 的返回值`in.read`，并假设您可以一口气读取整个文件。不要那样做。循环直到`read`返回 -1 或者您已经读取了尽可能多的数据。我不清楚你是否真的应该`getLen()`像这样信任 - 如果文件在两个调用之间增长（或缩小）会发生什么？

我建议创建一个`ByteArrayOutputStream`要写入的和一个小的（16K？）缓冲区作为临时存储，然后循环循环 - 读入缓冲区，将那么多字节写入输出流，起泡，冲洗，重复直到`read`返回 -1 表示流的末端。然后，您可以从您的数据中取出数据`ByteArrayOutputStream`并像以前一样将其放入`ByteArrayInputStream`。

编辑：快速代码，未经测试 - 在[Guava](http://guava-libraries.googlecode.com)中有类似（更好）的代码，顺便说一句。

```
public static byte[] readFully(InputStream stream) throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    byte[] buffer = new byte[16 * 1024];
    int bytesRead;
    while ((bytesRead = stream.read(buffer)) > 0) {
        baos.write(buffer, 0, bytesRead);
    }
    return baos.toByteArray();
} 
```

然后只需使用：

```
in = fs.open(path);
byte[] data = readFully(in);
result = new DataInputStream(new ByteArrayInputStream(data)); 
```

另请注意，您应该在一个`finally`块中关闭您的流，而不仅仅是在异常情况下。我也建议不要`Exception`自己抓住。

# android - 如何以这种格式在android中获取文本字段？

> ID：10839759
> 
> 赞同：-1
> 
> 时间：2012-05-31T19:08:07.617
> 
> 标签：android, xml, android-layout, android-widget

我需要这样的文本字段：“”E-mail *Example@gmail.com* “”

上面的全部内容必须在文本字段中，当我们在字段中输入数据时，电子邮件必须存在并且提示：Example@gmail.com 必须去。

我可以在文本字段上方获得“电子邮件”一词，但如何将其放入其中并让它始终存在，不像提示那样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:19:33.077

这是您有一个带有标签的小布局的地方，表示该字段用于电子邮件。无需将其永久嵌入。

# sql-server - 如何计算日期范围之间的差距总和

> ID：10839766
> 
> 赞同：1
> 
> 时间：2012-05-31T19:08:35.293
> 
> 标签：sql-server

```
t_no.    eff_date         term_date
65803   2011-01-01        2011-06-30
65803   2011-09-01        2011-11-30
65804   2012-02-01        NULL
65805   2011-02-01        2011-06-30 
```

我想要计算具有相同 t_no 的 2 个不同记录之间的差距的 sql 代码。（例如 65803 为 2 个月）。

同一 t_no 数据可能有一个或多个记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:37:00.603

```
WITH    q AS
        (
        SELECT  *, ROW_NUMBER() OVER (PARTITION BY t_no ORDER BY term_date) rn
        FROM    mytable
        )
SELECT  qp.t_no, SUM(DATEDIFF(day, qp.term_date, qn.eff_date))
FROM    q qp
JOIN    q qn
ON      qn.t_no = qp.t_no
        AND qn.rn = qp.rn + 1
GROUP BY
        qp.t_no 
```

# javascript - jQuery ajax:error 即使响应正常也会运行 200

> ID：10839771
> 
> 赞同：10
> 
> 时间：2012-05-31T19:09:17.347
> 
> 标签：javascript, ajax, ruby-on-rails-3, jquery

我有一个通过 AJAX 提交表单的表单：remote => true。查看服务器日志和 FireBug，我得到响应 200 OK，它以以下形式返回 JSON：

```
{ "email": "test@test.com"} 
```

然后我有这两个处理程序：

```
$('#new_invitation').bind("ajax:success", function(event, data, status, xhr) {
    alert('test');
});

$('#new_invitation').bind("ajax:error", function() {
    alert('error');
}); 
```

即使我得到一个 200OK，它也是触发的错误处理程序。我唯一一次设法使成功处理程序工作是当我发送一个标头中包含 200 的空响应时。

我不知道为什么这不起作用:-S

编辑 1------------ 进行这些更改后：

```
$('#new_invitation').bind("ajaxSuccess", function(event, data, status, xhr) {
    alert('test');
});

$('#new_invitation').bind("ajaxError", function(jqXHR, textStatus, errorThrown) {
alert('error');
    console.log(jqXHR.responseText);
    console.log(textStatus.responseText);
    console.log(errorThrown.responseText);
}); 
```

我仍然遇到同样的错误。日志内容给了我：

```
undefined
my_email@test.com
undefined 
```

这是表单的代码（标准 Rails 的东西）：

```
<%= form_for @shoot.invitations.new, :url=>shoot_invitations_path(@shoot), :remote => true, :html => {:class => 'form-inline'} do |f| %>
    <%= f.text_field :email, :'placeholder' => 'ex: test@test.com' %>
    <%= f.text_field :role, :'placeholder' => 'ex: Photographer' %>
    <%= f.submit "Invite", :class => 'btn btn-success' %>
<% end %> 
```

编辑 2 ---------

我做了一些更改，现在看来我的错误是解析错误。我不明白，因为这是我从服务器返回的 JSON（data.responseText），看起来一切都很好：

```
{"email":"zxxczxc@test.com"} 
```

回答 --------- 当我将 :'data-type' => :json 放入表单选项时，我设法让一切正常。我之前尝试过，但没有成功，因为我把它放在 form_tag 选项而不是 html 选项中......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-08T22:44:23.407

如果服务器返回的不是有效的 JSON，例如单个空格，jQuery 将生成一个解析错误并认为它是一个失败的请求，即使状态码是 200。

从 jQuery 1.9 开始，当类型设置为 JSON 时，一个完全空的响应被认为是一个失败的请求，因为空字符串是无效的 JSON。请参阅[http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string](http://jquery.com/upgrade-guide/1.9/#jquery-ajax-returning-a-json-result-of-an-empty-string)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-01T00:56:54.473

1.  检查 $.ajax 的数据类型是否设置为 jsonp

2.  尝试回复{电子邮件:"ahsgah@ahsgh.com"}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-01T22:01:56.573

JSON.parse('') 抛出错误。对我来说，这很愚蠢，它应该返回未定义。我将此代码添加到我的应用程序

```
#HACK JSON.parse('') should return undefined, not throw an error
_parse = JSON.parse
JSON.parse = (str) =>
  unless str == ''
    _parse.apply JSON, arguments 
```

或者对于不使用咖啡脚本的穷人（未经测试）

```
//HACK JSON.parse('') should return undefined, not throw an error
var _parse = JSON.parse
JSON.parse = function(str) {
  if (str !== '')
    return _parse.apply(JSON, arguments);
  else
    return undefined;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T19:22:30.217

使用`ajaxSuccess`而不是`ajax:success`，而`ajaxError`不是`ajax:error`为您的事件类型。

见这里：[http ://docs.jquery.com/Ajax_Events](http://docs.jquery.com/Ajax_Events)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-01T12:29:06.163

（在 Rails 5.2 和 jQuery 2 上）我花了一个小时并排比较两位 UJS 代码无济于事：两者都返回类似格式的 Javascript 函数调用（以更新前端），状态为 200 但一个触发`ajax:error`，另一个不触发。我能够通过在**application.js清单中从****jquery_ujs**切换到**rails-ujs**来消除这个问题：

 **```
//= require jquery2
// require jquery_ujs  # Removed this by taking away '='
//= require rails-ujs 
```

注意连字符与下划线！

现在两个调用的行为方式相同（正确）。我希望这对其他人有帮助。**

# r - 如果其他列中的值> x，则计算列的值并创建新数据框

> ID：10839774
> 
> 赞同：1
> 
> 时间：2012-05-31T19:09:28.443
> 
> 标签：r, dataframe

我有以下数据结构（实际上是通过使用 ddply 计算“结果”的出现来创建的）：

```
Experiment Result Count
         A      1   123
         A      2   30
         A      3   5
         B      1   120
         B      2   20
         B      3   5
         B      4   1
         B      5   1
         C      1   130
         C      2   21
... 
```

我想创建一个类似的数据框，对大于 2 的所有结果进行分组（计算总和）。

预期结果：

```
Experiment Result Count
         A      1   123
         A      2    30
         A     >2     5
         B      1   120
         B      2    20
         B     >2     7
         C      1   130
         C      2    21
... 
```

可能 plyr 可以做到这一点，但我是 R 新手，不知道如何使用自定义条件（即结果 1,2，>2），而不仅仅是列的不同值。

注意：我不介意新 bin 的名称（即，可能是 != '<2'）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:37:01.973

```
data <- data.frame(Experiment = c("a","a","a","b","b","b"), 
                   Result = c(1,2,3,1,4,5), Count = c(1,4,6,5,3,6))
part1 <- subset(data, Result<=2)
part2 <- cbind(ddply(data, .(Experiment), summarise, 
               Count = sum(Count[Result>2])), Result = ">2")
final <- rbind(part1,part2)
final[with(final, order(Experiment, rev(Result))),]
   Experiment Result Count
1           a      1     1
2           a      2     4
41          a     >2     6
4           b      1     5
5           b     >2     9
data
  Experiment Result Count
1          a      1     1
2          a      2     4
3          a      3     6
4          b      1     5
5          b      4     3
6          b      5     6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:43:25.263

这是基础：

**#读入你的数据：**

```
dat <- read.table(text="Experiment Result Count
         A      1   123
         A      2   30
         A      3   5
         B      1   120
         B      2   20
         B      3   5
         B      4   1
         B      5   1
         C      1   130
         C      2   21", header=T) 
```

**＃编码：**

```
dat$bp <- factor(cut(dat$Result, c(0,2, Inf)), 
    labels=c(NA, "> 2"))                            #bin dat > 2
LS1 <- split(dat, dat$bp)                           #split by bins
LS2 <- aggregate(Count~Experiment, LS1[[2]], sum)   #sum by experiment 
LS2$Result <- LS2$bp <- unique(LS1[[2]]$bp)         #get columns ready for bind
LS2 <- LS2[, names(LS1[[1]])]                               
DF <- do.call(rbind, list(LS1[[1]], LS2))[, -4]     #bind it together & drop bp
DF$Result <- factor(DF$Result, 
    levels = unique(DF$Result))                     #reorder factor
DF[order(DF$Experiment, DF$Result), ]               #order dataframe 
```

**哪个产生：**

```
 Experiment Result Count
1           A      1   123
2           A      2    30
7           A    > 2     5
4           B      1   120
5           B      2    20
8           B    > 2     7
9           C      1   130
10          C      2    21 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:49:14.023

谢谢您的回答。与此同时，我想出了这个解决方案：

```
data2 <- ddply(data[data$Result>2,],c('Experiment'), function(x) c(Result='>2', Count=sum(x$sum)))
data3 <-rbind(data[data$Result<=2,], data2) 
```

（结果仍然需要重新排序。）

# php - 我们可以使用 php 为 apache web 服务器创建一个 gui 吗？

> ID：10839775
> 
> 赞同：0
> 
> 时间：2012-05-31T19:09:33.543
> 
> 标签：php, user-interface, apache2, webserver

对于我们的大学课程作业，我们被要求创建一个 GUI 来管理（编辑 httpd.conf、创建 .htaccsess 文件、创建证书等）Apache Web 服务器。它必须是基于网络的。所以我们打算用PHP。我只想知道这是可以做到（完全使用 php）还是不能做到（不使用任何其他本地语言支持）？谢谢...！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:18:07.567

已经有很多基于 Web 的管理工具。例如，[Webmin 浮现](http://www.webmin.com/)在脑海中。

当然，如果你决定自己动手，PHP 有大量的[文件系统支持](http://php.net/manual/en/book.filesystem.php)和[exec 类型的特性](http://php.net/manual/en/function.exec.php)，应该允许你管理你喜欢的任何类型的系统配置。

# ruby-on-rails-3.2 - wicked_pdf / wkhtml - 支持使用 tr.odd 和 tr.even 更改背景颜色的 css 表

> ID：10839778
> 
> 赞同：2
> 
> 时间：2012-05-31T19:09:45.730
> 
> 标签：ruby-on-rails-3.2, wkhtmltopdf, wicked-pdf

wicked_pdf gem/plugin 和底层 wkhtmltopdf 是否支持使用 tbody、tr.even 和相应 tr.odd 的 css 对交替列进行条带化？

我的 css 文件中有这个（在公共文件夹中），但它没有正确渲染颜色。

```
table {
width: 90%;
border: 1px solid #999999;
}

th, td {
    padding: 7px 10px 10px 10px;
}

th {
    border-bottom: 2px solid #111111;
    border-top: 1px solid #999999;
    font-size: 90%;
/*  letter-spacing: 0.1em;
*/  text-align: left;
    text-transform: uppercase;  
}

tbody, tr.even {
    background-color: green;
}

tbody, tr.odd {
    background-color: yellow;
} 
```

目前我在所有单元格中只得到黄色。

![css中的交替颜色不渲染](../Images/53c3f5c0acdb344bcd31bdb168e8a893.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:12:04.577

尝试

```
tr.even {
    background-color: green;
}

tr.odd {
    background-color: yellow;
} 
```

# image - 当用户滚动时，如何防止 div/图像滚动？

> ID：10839780
> 
> 赞同：0
> 
> 时间：2012-05-31T19:09:56.177
> 
> 标签：image, html, scroll, position, visible

我构建的解决方案在大多数浏览器中运行良好，但在 IE 中不行。我正在寻找适用于所有浏览器的解决方案。最好不需要 jQuery。这是我到目前为止所做的工作：

[https://www.casemodo.com/order_fabric_01_pick_design.asp](https://www.casemodo.com/order_fabric_01_pick_design.asp) <--单击面料选项，然后在下一页单击“ipad2”，然后您将进入左侧有我想要保持可见的图像的页面当用户滚动时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:12:03.500

`position: fixed`与 类似`absolute`，但与视口相关

# entity-framework - GetAllItems 时，同一张表上的关系会出错

> ID：10839783
> 
> 赞同：0
> 
> 时间：2012-05-31T19:10:07.037
> 
> 标签：entity-framework, entity-relationship

我在同一张表上创建了一个关系，该关系在 OnModelCreating 中声明。请参阅下面的代码。

尝试使用以下代码获取所有项目时，出现`var allitems = MyContext.WallItems` 以下错误：“/”应用程序中的服务器错误。无法将“WallItem”类型的对象转换为“System.Collections.Generic.List`1[WallItem]”类型。

我是否以错误的方式定义了我的关系，还是有更好的方式？

```
[Table("WallItems")]
public class WallItem
{
    public WallItem() { Id = Guid.NewGuid(); }

    /// <summary>
    /// Item Id
    /// </summary>
    [Key]
    public Guid Id { get; set; }

    /// <summary>
    /// Enables replies on wall items. Links to the root item.
    /// </summary>
    public Guid? ThreadRoot { get; set; }

    /// <summary>
    /// Collection of replies
    /// </summary>
    public virtual List<WallItem> Comments { get; set; }

}

public class MyContext : DbContext
{
    public DbSet<WallItem> WallItems { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<WallItem>()
                            .HasOptional(c => c.Comments)
                            .WithMany()
                            .HasForeignKey(c => c.ThreadRoot);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:57:51.050

您的 Fluent API 配置有误。这将起作用：

```
modelBuilder.Entity<WallItem>()
    .HasMany(c => c.Comments)
    .WithOptional()
    .HasForeignKey(c => c.ThreadRoot); 
```

# python - 用于侦听来自 Apache 的 WSGI 请求的 Python 模块？

> ID：10839784
> 
> 赞同：0
> 
> 时间：2012-05-31T19:10:07.923
> 
> 标签：python, apache, mod-wsgi, wsgi

据我了解，Apache mod_wsgi 实现了一个与 Apache 一起运行并提供 CGI 请求的 python 解释器，但是 WSGI 和 CGI​​ 之间的区别在于，对于 WSGI，只要 Apache 服务器正在运行，Python 会话就会一直运行，而对于 CGI 它每次服务器收到 CGI 请求时都必须重新启动。

我想知道的是，是否有一个 Python 模块可以与 Apache 分开运行，例如在交互式 Python 会话中，它将监听来自 Apache 的 CGI 请求？因此，例如，您可以让 Apache 运行而 WSGI 中间件不运行，然后您可以启动一个交互式 Python 会话并导入您的 WSGI 中间件模块，然后它将为来自 Apache 的 CGI 请求提供服务，您也可以在不运行的情况下将其关闭关闭 Apache。所以它是一个类似于 Apache mod_wsgi 的单一会话，但它不必总是与 Apache 并发运行，您可以从交互式 Python 会话中运行它。

编辑1：

例如，我有这个烧瓶应用程序 myapp.py：

```
from flask import Flask

app = Flask(__name__)
app.debug = True

app.apples = 0

@app.route('/')
def hello():
    app.apples += 1
    return 'blah: %d' % app.apples

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=8080) 
```

我可以通过键入 python myapp.py 来运行它，但它会启动自己的 Web 服务器。相反，我希望 Apache 成为 Web 服务器，但我希望能够打开一个交互式 python shell 并键入`from myapp import *`并让应用程序监听来自 Apache 的请求，因为我有我的交互式 shell，所以我可以做一些事情喜欢`print app.apples`或`app.apples = 50`什么的。我说我希望我的网络应用程序与网络服务器分开，并与 python shell 交互。

我的意思`app.apples`是它是一个全局变量，就像访问次数的命中计数`'/'`一样，只要应用程序正在运行，它就会一直存在。

编辑2：

这是另一个例子。

我的应用程序.py：

```
import web

def add_global_hook():
    g = web.storage({"counter": 0})
    def _wrapper(handler):
        web.ctx.globals = g
        return handler()
    return _wrapper

class Hello:
    def GET(self):
        web.ctx.globals.counter += 1
        return "<h1>Counter: %d</h1>" % web.ctx.globals.counter

urls = ("/", "Hello")
app = web.application(urls, globals())
app.add_processor(add_global_hook())
app.run() 
```

在这里，我可以打开一个 python 解释器并输入`from myapp import *`，它会启动 Web 服务器，但是当 Web 服务器运行时，我无法使用交互式 shell。有没有办法以非阻塞方式运行服务器，以便我可以使用交互式 shell？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T02:18:56.637

您是否考虑过使用 Apache 作为前端代理运行 gunicorn WSGI 服务器？

如果你想要调试一个实时的 Python Web 应用程序而不需要做任何太复杂的事情，还可以看看：

[https://github.com/GrahamDumpleton/wsgi-shell](https://github.com/GrahamDumpleton/wsgi-shell)

如果使用 mod_wsgi，您只想确保在默认的单个守护进程中使用 mod_wsgi 守护模式。

顺便说一句，您对 mod_wsgi 工作原理的理解有点错误，但与其尝试和纠正，不如说它只会帮助您更好地解释为什么要做您想做的事情。也许从提出实际问题而不是您认为的解决方案开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T15:34:24.020

我正在考虑同样的问题，因为我无法弄清楚为什么某些 DLL 在 Windows+Apache 2.2+mod_wsgi 下无法加载。（在我的情况下，当 Python 的 Shapely 库尝试加载“geos_c.dll”时出现问题。）

我正在考虑的解决方法是运行一个独立的 WSGI 应用程序，比如在端口 81 上，该应用程序对于直接发送到该端口的所有请求都可以正常工作。然后，将 Apache 配置为代理该端口，例如：

```
ProxyPass /wsgi/myapp http://127.0.0.1:81
ProxyPassReverse /wsgi/myapp http://127.0.0.1:81 
```

有一些你担心的事情：

*   内置的 WSGI 服务器不是多线程的（所以你放弃了在 Apache 后面使用 WSGI 的一大优势）
*   您的独立 Python WSGI 服务器需要在控制台中启动（意外关闭它会杀死您的应用程序 - 消除 Apache WSGI 的另一个优势，它将应用程序作为服务提供，无需控制台且没有人登录）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T04:45:52.980

Python 在模块中有一个内置的 wsgi 服务器`wsgiref`，适用于开发和测试目的，但可能不适合生产用途。例如，使用还提供的示例 wsgi 应用程序：

```
>>> import wsgiref.simple_server
>>> server = wsgiref.simple_server.make_server('0.0.0.0', 8888, wsgiref.simple_server.demo_app)
>>> server.serve_forever()
127.0.0.1 - - [21/Jul/2016 00:44:04] "GET / HTTP/1.1" 200 2664
127.0.0.1 - - [21/Jul/2016 00:44:05] "GET /favicon.ico HTTP/1.1" 200 2615
127.0.0.1 - - [21/Jul/2016 00:44:05] "GET /favicon.ico HTTP/1.1" 200 2675
^CTraceback (most recent call last):
  File "<ipython-input-5-30934a6743d8>", line 1, in <module>
    server.serve_forever()
  File "/usr/local/Cellar/python/2.7.10_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 236, in serve_forever
    poll_interval)
  File "/usr/local/Cellar/python/2.7.10_2/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 155, in _eintr_retry
    return func(*args)
KeyboardInterrupt

>>> 
```

# objective-c - iOS 低电量警告会触发哪些事件？它正在重置我的应用程序

> ID：10839799
> 
> 赞同：3
> 
> 时间：2012-05-31T19:11:07.857
> 
> 标签：objective-c, ios

我有一个敏感的应用程序，客户端在进入后台时想要注销并在进入前台时显示登录屏幕。当用户收到 20%、10% 和 5% 的低电量警告时，似乎会让用户重新登录。有没有人遇到过这个或围绕它编码？在显示低电量警告时发生的所有事件的搜索中，我都是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:15:52.747

看来您需要将注销逻辑从App Delegate 移出[`-applicationWillResignActive:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationWillResignActive%3a)或移入 App Delegate或移入App Delegate。`-applicationDidBecomeActive`[`-applicationDidEnterBackground:`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/applicationDidEnterBackground%3a)`applicationWillEnterForeground`

如果您的应用不需要支持后台，那么最好的选择可能是通过在应用的 plist 中设置[`UIApplicationExitsOnSuspend`](http://developer.apple.com/library/ios/documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW23)为来禁用它。`YES`

# javascript - 删除网站移动版本的部分标记

> ID：10839800
> 
> 赞同：0
> 
> 时间：2012-05-31T19:11:09.107
> 
> 标签：javascript, jquery, html, dom

# 问题

我在网站顶部使用了一个旋转木马，它使用 html 和 js 的组合构建。对于网站的移动访问者，我希望省略该部分标记，以便不必加载图像，例如对于小于 800 像素宽的视口。我所做的是在页面底部创建了一个脚本，该脚本使用 jquery 获取浏览器宽度，如果宽度足够大，则使用 .prepend() 将轮播的整个标记放置在我的 body 元素的顶部. 显然，这个解决方案是有效的，但看起来并不漂亮，尤其是在轮播标记需要更改的情况下。

# 轮播的标记

```
<div class="row">
<div class="span12 columns">
<div id="myCarousel" class="carousel slide">
  <div class="carousel-inner">
    <div class="active item">
      <img src="img/1.jpg">
      <div class="carousel-caption"><h4>Hello</h4></div>
    </div>
    <div class="item">
      <img src="img/2.jpg">
      <div class="carousel-caption"><h4>World</h4></div>
    </div>
  </div><!-- Carousel inner-->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">prev</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">next</a>
</div>  <!--Carousel outer-->
</div><!--span-->
</div><!--row--> 
```

# javascript然后看起来像......

```
if (windowWidth >= 800) {
    $('.content').prepend('...all the markup for the carousel no spaces or returns...');
} 
```

# 问题

这充其量只能是一个粗略的解决方案，有没有人知道这种事情的好做法？js/jquery 是我最好的选择吗？理想情况下，我只想绕过较低屏幕尺寸的轮播，但将所有内容保留在一个页面上，而不是为手机设计一个单独的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:41:55.297

您可以进行媒体查询，如果浏览器宽度低于某个大小，则在轮播中显示：无。或者类似于下面的内容，您可能需要修改它。

```
@media only screen and (max-width: 767px) {
  #myCarousel { display: none; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:45:09.510

通过检查屏幕宽度属性并相应地运行代码，您可以在页面加载**后将**轮播的 HTML 附加到 DOM （而不是隐藏/删除它）。

您可以将其作为来自 JavaScript 的字符串注入，或者通过选择性地通过 AJAX 加载它来使其对移动用户更加轻量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:46:56.280

看看[这些脚本](http://detectmobilebrowsers.com/)；他们无需测试屏幕尺寸即可检测移动浏览器。您可以根据结果重定向到没有轮播的不同版本，或者您也可以使用名为[modernizr](http://modernizr.com/)的 JS 插件来测试触摸事件并仅在它们存在时加载轮播：

```
if (Modernizr.touch){
   // Load Carousel
} else {
   // Hide Carousel or Load Alternative Content
} 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T23:13:00.323

您是否有理由必须在客户端执行此操作？将条件放在服务器端将节省大量数据传输。用 php 或 jsp 之类的东西做起来是微不足道的。

当然，您无法在服务器端获取浏览器详细信息，但您可以获得用户代理，它可以让您大部分时间到达那里。

所以我要做的是结合上述建议 -

1) 从服务器端检查开始。如果您获得了适用于 iOS/Android/Blackberry/其他随机移动平台的用户代理，请完全绕过轮播标记。

2）假设你没有得到那个用户代理，然后走 Modernizr 路线，但在 $(document).ready 之后才为轮播加载任何资产 - 那时你应该知道屏幕尺寸和浏览器的功能——此时您可以开始加载资产和处理轮播脚本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T19:56:22.420

最好是在页面大于 800px 时插入标记。

例如：

@media screen and (min-width: 800px;)

# myCarousel{显示：块；和所有其他 nessecary 风格}

}

然后，如果需要，您可以像使用 jQuery 一样添加标记。

# http - 如何让我的 ColdFusion 网络服务使用 UTF-8？

> ID：10839807
> 
> 赞同：0
> 
> 时间：2012-05-31T19:11:52.260
> 
> 标签：http, unicode, utf-8, coldfusion

我有一个非常简单的 ColdFusion Web 应用程序，它采用一个 URL 参数并将其打印到页面上。但它似乎没有收到 UTF-8 编码的值，即使它是以这种方式发送的。

这是一个来自 Fiddler 的 HTTP 请求：

```
POST http://blahblahwebservice/getme.htm HTTP/1.1
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
User-Agent: unicode_post
Host: miscmsuatsw
Content-Length: 14  
Pragma: no-cache
Cookie: CFID=247445; CFTOKEN=305db8322d5cecfb-627BD26F-BC91-0EC2-25E9745308EF96F7

sysopts=ΠΣΩ 
```

这是十六进制的样子（URL 和 HTTP/1.1，带有 2 个 CRLF 和主机剥离）：

```
43 6F 6E 74 65 6E 74 2D 54 79 70 65 3A 20 61 70     Content-Type: ap
70 6C 69 63 61 74 69 6F 6E 2F 78 2D 77 77 77 2D     plication/x-www-
66 6F 72 6D 2D 75 72 6C 65 6E 63 6F 64 65 64 3B     form-urlencoded;
20 63 68 61 72 73 65 74 3D 55 54 46 2D 38 0D 0A      charset=UTF-8..
55 73 65 72 2D 41 67 65 6E 74 3A 20 75 6E 69 63     User-Agent: unic
6F 64 65 5F 70 6F 73 74 0D 0A 48 6F 73 74 3A 20     ode_post..Host: 
-- -- -- -- -- -- -- -- -- -- -- 0D 0A 43 6F 6E     .............Con
74 65 6E 74 2D 4C 65 6E 67 74 68 3A 20 31 34 0D     tent-Length: 14.
0A 50 72 61 67 6D 61 3A 20 6E 6F 2D 63 61 63 68     .Pragma: no-cach
65 0D 0A 43 6F 6F 6B 69 65 3A 20 43 46 49 44 3D     e..Cookie: CFID=
32 34 37 34 34 35 3B 20 43 46 54 4F 4B 45 4E 3D     247445; CFTOKEN=
33 30 35 64 62 38 33 32 32 64 35 63 65 63 66 62     305db8322d5cecfb
2D 36 32 37 42 44 32 36 46 2D 42 43 39 31 2D 30     -627BD26F-BC91-0
45 43 32 2D 32 35 45 39 37 34 35 33 30 38 45 46     EC2-25E9745308EF
39 36 46 37 0D 0A 0D 0A 73 79 73 6F 70 74 73 3D     96F7....sysopts=
CE A0 CE A3 CE A9                                   Î Î£Î© 
```

具体来说，**`ΠΣΩ`**是**`CE A0 CE A3 CE A9`**。

渲染时，我只得到“？？？”。我知道该页面可以呈现 utf-8，我认为它是在接收这些字节，因为当我将 UTF-8 十六进制字符设置为`U+03A0`等时，它呈现得很好。

为了处理 UTF-8，我的 CF 网页是否缺少某些内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:18:38.717

试试`<cfprocessingdirective pageEncoding="utf-8">`你的 CFM 的第一行。

如果它有效，您应该切换到像 CF Builder 这样的编辑器，BOM 标记将在其中处理该问题，并且不需要处理指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:58:11.250

[`setEncoding`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec1fb12-7fcb.html)您可以尝试让 ColdFusion 通过使用该功能“更加努力地思考”它们是否为 utf-8 。

```
<cfscript>
    SetEncoding("url", "utf-8");
    SetEncoding("form", "utf-8");
</cfscript> 
```

除非您正在做一些特别专业的事情，否则这两行应该始终在您的`Application.cfm/c`.

仅当文件本身`cfprocessingdirective`包含 utf-8 字符时，该标签才有用。`.cfm`来自 url/form/cookie/database 等的 UTF-8 编码字符串不属于该类别，因此不会受到该标签的影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T22:52:39.723

此外，每个应用程序/系统都有自己的设置或默认编码 - 这包括您的 Web 服务器、您的数据库服务器、您的浏览器、您的数据库前端、您的编辑器。在排除明显的情况之前，需要检查所有这些事情。

也试试这个看看你得到了什么。

```
<cfscript>
    ....
    charencode=CharsetEncode(yourstuffgoeshere, "UTF-8");
    WriteOutput("<br />" & charencode);
</cfscript> 
```

我很好奇您的数据是否实际上是二进制数据。如果是这样，这将为您编码。但推荐的方法是检查您的浏览器、服务器等

信仰斯隆

# php - 如何保存 mysqli_result 对象的内容？

> ID：10839808
> 
> 赞同：1
> 
> 时间：2012-05-31T19:11:53.700
> 
> 标签：php, mysqli

嘿伙计们，我目前正在尝试为 mysqli 封装类调试一些代码。我遇到了[这里](http://www.php.net/manual/en/class.mysqli-result.php#100530)描述的问题，尝试了一些解决方案，这是最新的迭代并且（似乎不起作用）：

```
$this->result = new stdClass();
foreach($res = $this->conn->query($sql) as $key => $value) {
    $this->result->$key = $value;
} 
```

如果有人知道以某种方式存储结果或使用指针和 $result->free_result() 创建系统的方法；有时会打电话给它，将不胜感激。我有点难过，时间很短。

提前致谢！

编辑截至目前，我的原始实现似乎正在工作，不确定这是否会通过测试成立。目前我有一个自定义的 $this->query() 函数调用 mysqli->query 并将结果存储在 $this->result 中，但是在某些情况下似乎 $this->result 变得未设置。继续测试/调试我拥有的东西，看看它是否会再次发生。感谢那些回答的人:)

编辑 2 通过相当多的反复试验，我将我遇到的问题追溯到 SQL 查询的异常行为。似乎不可能在没有问题（？）的情况下存储来自 mysqli::query() 的结果对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:14:29.950

您的示例编码没有获取行。您需要这样做，其中一个选项是[作为对象获取](http://www.php.net/manual/en/mysqli-result.fetch-object.php)：

```
$this->rows = array();

$res = $this->conn->query($sql);

while ($obj = $res->fetch_object()) {
    $this->rows[] = $obj;
}

echo $this->rows[0]->id; // assuming you have a column named id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:23:55.460

您不必提前在 PHP 类中声明属性。只需动态分配它：

```
foreach($res = $this->conn->query($sql) as $key => $value) {
    $this->result->$key = $value;
} 
```

这将创建一个与 $key 的值同名的属性。请记住，如果 $key 名称中有空格，您将无法以通常的方式访问该属性。例如：

```
$key = 'Hello World';
$this->result->$key = 'Hi!';
// now this won't work even though Hello World is the property name:
echo $this->result->Hello World;
// instead do:
echo $this->result->$key;
// or access it like an associative array
echo $this->result['Hello World']; 
```

# c# - 将数据从 php Web 应用程序推送到 C# windows 窗体应用程序

> ID：10839819
> 
> 赞同：1
> 
> 时间：2012-05-31T19:12:45.013
> 
> 标签：c#, php, .net, web-services

我有一个服务器客户端应用程序。服务器是用 php 开发的，客户端是 C# windows forms 在服务器上我分配一些任务给在它上面注册的客户端。在客户端，我有大约 60 秒的时间间隔，之后我的客户端连接到服务器并请求客户端必须执行的任务。目前我正在使用 WSDL SOAP 在我的服务器端（即在 php 中）执行此操作，我的客户端每 60 秒调用一次此 Web 服务。现在我想使用推送技术，以便当用户为客户端服务器分配任务时，会将 xml 字符串推送到客户端。

我用谷歌搜索了很多，但没有找到任何 php 可以将内容推送到 c# 桌面应用程序的地方。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:18:22.290

您需要对客户端进行编码以接受来自服务器的信息。它们需要可从服务器在网络上访问。在 PHP/服务器端，有很多方法可以连接到其他网络实体：套接字、cURL 等。

# java - 运行已构建的 jar 时出现 ClassNotFoundException

> ID：10839821
> 
> 赞同：0
> 
> 时间：2012-05-31T19:12:59.843
> 
> 标签：java

我为 com.drew.* 添加了 jar，它是：-

```
metadata-extractor-2.4.0-beta-1.jar 
```

我还能够在 Eclipse 中构建我的应用程序而不会出现任何错误。但是当我运行我的应用程序的 jar（包括所有必需的 jar 包，包括上面的 jar 包）时，我收到以下错误：

```
Error: java.lang.ClassNotFoundException: com.drew.imaging.jpeg.JpegMetadataReader 
```

有什么建议么？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:17:14.740

打开可执行 jar（使用`7z`/`WinRAR`等）并查看是否`metadata-extractor`包含您的 jar - 还打开您的 Manifest 并查看此 jar 是否在类路径中。

如果上述一切都很好，我认为可能存在 jar 依赖版本不匹配。

您是否使用 Eclipse File->Export->Runnable JAR 文件导出可执行 jar？它应该像在 Eclipse 中一样工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:17:27.747

您需要在 MANIFEST.MF 文件中提供类路径。您可以使用任何提取器工具查看此文件。如果依赖 jar 在文件夹中，则在类路径条目中提供文件夹名称应如下所示

```
 Class-Path: folder/jarfilename 
```

这将帮助您进一步[http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T20:55:13.390

看起来，在构建 jar 时，您[必须选择要包含哪些资源](http://help.eclipse.org/helios/index.jsp?topic=/org.eclipse.jdt.doc.user/tasks/tasks-33.htm)。也许你没有选择那个罐子？

# jqgrid - 如何从 Jqgrid 子网格中删除表格列标题

> ID：10839824
> 
> 赞同：0
> 
> 时间：2012-05-31T19:13:11.703
> 
> 标签：jqgrid, html-table, jtableheader

我有以下 jqgrid 子网格：http:
[//jsfiddle.net/mojarame/uDd9J/34/](http://jsfiddle.net/mojarame/uDd9J/34/)

我正在尝试将其配置为具有 jExpander 插件 [http://jsfiddle.net/mojarame/S5V6C/12/的以下 html 表](http://jsfiddle.net/mojarame/S5V6C/12/)

但是 jqgrid 上子网格的第一个 JS Fiddle Demo 中的列标题是可见的。我怎样才能删除它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:39:43.863

在我看来，带有 jExpander 插件的演示不显示任何子网格。它在下面的行中显示常见的 HTML 片段。我想您根本不需要创建子网格。取而代之的是，您可以显示您需要的*任何*常见 HTML 片段。

看看[很老的答案](https://stackoverflow.com/a/4115481/315935)。我主要使用当前jqGrid 4.3.3的对应[demo显示如下](http://www.ok-soft-gmbh.com/jqGrid/SubGrid1.htm)

![在此处输入图像描述](../Images/9cf86ee02602881266e7bb93d56d1727.png)

jqGrid 只是为子网格数据创建行并将其放置`div`在具有`colSpan`整行的单元格中。您`id`将 div 作为 的`subgrid_id`参数`subGridRowExpanded`。因此，您可以在 div 中放置**您想要的任何 HTML 片段**。它必须不仅仅是另一个网格。如果我理解您的要求正确，那么使用数据创建您的自定义 HTML 片段将解决您的问题。

# intellij-idea - 从命令行运行 Intellij 静态分析工具

> ID：10839825
> 
> 赞同：8
> 
> 时间：2012-05-31T19:13:12.170
> 
> 标签：intellij-idea, static-analysis

我听说 IntelliJ 有非常好的静态分析工具来检测死代码、未正确初始化的变量等。但是我真的不想要编辑器的包袱，所以我正在寻找一种在我的源代码上运行 IntelliJ 的静态分析工具的方法直接从命令行。

这可能吗？是否有从命令行运行 IntelliJ 的静态分析工具的界面？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T22:06:30.573

是的，可以[在 IDE 之外运行代码检查](http://www.jetbrains.com/idea/webhelp/running-inspections-offline.html)。您还可以考虑使用[TeamCity](http://www.jetbrains.com/teamcity/)产品，该产品将自动完成并生成可在浏览器中查看的精美 HTML 报告。

# xcode - 我的自定义单元格以前出现在 tableview 中，现在没有

> ID：10839829
> 
> 赞同：1
> 
> 时间：2012-05-31T19:13:39.360
> 
> 标签：xcode, tableview, custom-cell

这是我的问题。我有一个带有标识符“tweetCell”的自定义单元格，我已将其导入到 mt tableviewcontroller.h 文件中。我已将该类链接到情节提要中的原型单元。所有的 UILabel 都连接到单元格，但我无法让 tableview 显示单元格。它起作用了吗？然后一夜之间停了？！！谁能在这里发现我的错误？提前致谢......

```
- (void)fetchTweets
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        NSData* data = [NSData dataWithContentsOfURL:
                        [NSURL URLWithString: @"http://search.twitter.com/search.json?q=%23mysearchhashtag"]];

        NSError* error;

        tweets = [NSJSONSerialization JSONObjectWithData:data
                                                 options:kNilOptions
                                                   error:&error];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self.tableView reloadData];
        });
    });
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return tweets.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"tweetCell";

    customCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[customCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSDictionary *tweet = [tweets objectAtIndex:indexPath.row];

    NSString *tweetText = [tweet valueForKey:@"text"];

    NSArray *tweetComponents = [tweetText componentsSeparatedByString:@":"]; 

    cell.firstDetail.text = [tweetComponents objectAtIndex:0];
    cell.secondDetail.text = [tweetComponents objectAtIndex:1];
    cell.thirdDetail.text = [tweetComponents objectAtIndex:2];

    return cell;
} 
```

# django - Django中信号的性能

> ID：10839834
> 
> 赞同：5
> 
> 时间：2012-05-31T19:14:01.887
> 
> 标签：django, performance, signals

我已经创建了一些`post_save`信号，但我想知道以后是否会出现性能问题。例如，我有这样的事情：

```
def my_signal(sender, **kwargs):
  # some minimal processing
  posts = len(MyPosts.objects.filter(date__gte=variable))
  if entries == "20":
    # crate an object and assign it to the post's author.

post_save.connect(my_signal, sender=MyPosts) 
```

假设我有一个非常繁忙的网站，每次创建帖子时都会触发。性能太差了吗？有没有办法以更慢节奏的方式触发信号（可能每天一次或每隔几个请求）？

**更新**：

另一个问题：Django 是否足够聪明，可以将`.save()`带有`post_save`信号的调用组合到一个数据库请求中，还是在这里执行几个请求？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T19:55:57.753

信号处理程序的性能影响当然取决于它们的功能。但是你应该知道当信号被触发时它们是同步执行的，所以如果处理程序中有很多动作（例如很多数据库调用），执行就会被延迟。

Django 本身并没有为您提供另一个集成信号处理程序的机会，但如果有必要，您应该查看[django-celery](http://ask.github.com/django-celery/)，它应该使您能够从信号处理程序中*异步调用任务，例如......*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-05T18:13:25.810

鉴于信号是同步执行的，信号的性能将在很大程度上取决于您连接的处理程序数量以及调用时执行的代码。`post_save`当信号触发时，原始插入/更新查询将已经执行。如果您想在查询执行之前对模型数据进行一些更改，那么您可以在`pre_save`处理程序中执行此操作。某些情况也可以由数据库触发器处理。

不，Django 不够“聪明”，无法将可能在任意数量的附加 Python 函数中执行的查询组合成单个查询。当更新/插入可能插入到您的用例描述的多个表中时，它也无法将更新/插入组合到单个查询中。然而，Django 可以在单个事务中处理这些。

django-celery、django-ztask、taskmaster 等是为需要在请求/响应周期之外处理的更复杂的任务而设计的。对于每天只需要运行一次或两次的任务，您也可以编写自定义管理命令并使用 cron。

# maven - 将生成的 jar 或 war 文件复制到目标目录

> ID：10839835
> 
> 赞同：0
> 
> 时间：2012-05-31T19:14:03.337
> 
> 标签：maven, jar, maven-3, war

下面是我的maven项目结构： Main-Project Module1, Module2, Module3

以上所有模块在每个模块的目标目录中生成 jar 或 war 文件我需要将所有生成的 jar 或 war 文件复制到任何目录例如：{base.dir}

任何人都可以帮助我使用 mvn 命令和 POM 文件配置来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T09:06:48.823

我认为做这样的事情的最好方法是使用[maven-antrun-plugin](http://maven.apache.org/plugins/maven-antrun-plugin/)。这样，您可以使用标准 Ant 任务将文件复制到任何方向。

# python - 在python中获取方阵的上三角或下三角的所有元素

> ID：10839836
> 
> 赞同：3
> 
> 时间：2012-05-31T19:14:03.743
> 
> 标签：python, numpy

numpy/scipy 中是否有一个函数可以返回方阵的一个三角形（上或下）的所有元素？

例如：

```
matrix = [[1,  2,  3],
          [4,  5,  6],
          [7,  8,  9]] 
```

三角形（上和下）：

```
up = [1,2,3,5,6,9]
down = [1,4,5,7,8,9] 
```

或者

```
up = [1,2,5,3,6,9]
down = [1,4,7,5,8,9] 
```

谢谢！

**编辑：**

是的，有两个函数可以帮助您做到这一点：（`np.triu_indices(n)`对于上三角）和`np.tril_indices(n)`（对于下三角）。

谢谢卡特里拉克斯！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T19:27:08.310

元素的顺序重要吗？

通常，矩阵的上下三角形是围绕*另一个*对角线（左上角到右下角）取的。要解决这个问题，您需要在两条对角线之间“翻转”，您可以使用`np.fliplr(matrix)`. 这将为您提供正确的元素，但以“自然”顺序（逐行，每一行变得更短）。`np.flipud`您还可以通过翻转另一种方式 ( )来获得逐列的顺序。但是我不知道有什么方法可以得到你正在使用的“按较小的对角线读取”顺序，而不是一次读取一个对角线的矩阵。

要获取对角线元素，您可以使用`np.triu_indices`（或者，对于下三角形，`np.tril_indices`）获取它们的索引，然后按它们索引。

```
>>> matrix
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
>>> np.fliplr(matrix)[np.triu_indices(3)]
array([3, 2, 1, 5, 4, 7]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-28T13:52:06.147

以下代码提取包括对角线的下三角形：

```
hstack(mat[i][:i+1] for i in xrange(mat.shape[0])) 
```

这将提取没有对角线的下三角形：

```
hstack(mat[i][:i] for i in xrange(mat.shape[0])) 
```

# c# - 我写了一个 C# 程序。我可以把它放在我的 WP7 手机上吗？

> ID：10839837
> 
> 赞同：1
> 
> 时间：2012-05-31T19:14:05.890
> 
> 标签：c#, silverlight, windows-phone-7

我想将我的程序转换为 WP7 应用程序。它是用 C# 编写的，基本上只存储我的血糖读数，它还可以显示基于该数据的图表。

我假设我必须在 Silverlight 中重新编写程序，但我想知道是否有其他人尝试过这样的事情（将 C# 程序变成 WP7 应用程序）以及他们可以提供什么建议？例如，一个谈论将 .Net 程序转换为 WP7 格式的网站？

感谢您的任何建议！

编辑：现有界面是 WinForm。如果需要，我可以将其更改为 WPF。我只是不确定这个过程，并认为也许这里有人曾经经历过它并可以提供建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:20:39.483

您可以将其转换为在 Windows Phone 上运行，但这需要付出很大的努力，因为当前程序是使用 Windows 窗体开发的。Windows Phone 使用 Silverlight 的一个版本——这可能意味着您的逻辑将按原样工作，但需要重写用户界面。

话虽如此，通常情况下，桌面开发的应用程序总是需要相当多的工作才能以手机的形式和形状正确且有意义地运行。通常必须修改整体界面尺寸和设计。

# php - Zend Framework：视图 baseUrl() 返回一个空字符串，而控制器的 getRequest()->getBaseUrl() 工作正常

> ID：10839839
> 
> 赞同：1
> 
> 时间：2012-05-31T19:14:29.237
> 
> 标签：php, zend-framework, model-view-controller, view-helpers

我正在将 Zend Framework 用于 MVC 应用程序。

当我需要视图中的基本 URL 时，它总是返回`""`（空字符串）；在我的控制器中，如果我使用`$this->getRequest()->getBaseUrl()`，它会返回正确的基本 URL。

例如，我通过`index.dev.php`（生产是`index.php`）使用开发应用环境；在生产`""`环境中，我希望我所有的 URL 都以 baseUrl 开头，但在开发环境中，使用 index.dev.php，我希望我所有的 URL 都以`"/index.dev.php"`.

正如我之前所说，视图的`baseUrl()`帮助器返回一个空字符串，即使在开发环境中也是如此。但是`$this->getRequest()->getBaseUrl()`在相同的环境中使用，返回正确的基本 URL。

为了解决这个问题，我将所有视图的`$this->baseUrl()`调用更改为`$this->baseUrl`，并在自定义基控制器类中定义了这个视图变量。但这不是我期望的解决方案。

这是一个模块化应用程序，我正在使用路由，在 Bootstrap 时间添加如下：

```
protected function _initRoutes(){

    $objFrontController = Zend_Controller_Front::getInstance();
    $objRouter = $objFrontController->getRouter();

    $arrAppRoutes = Service_Route::getAllActiveApplicationRoutes();

    if( is_array($arrAppRoutes) && count($arrAppRoutes) > 0 ){

        $objRouter->addRoutes($arrAppRoutes);

        // Add the default routes in the end
        $objRouter->addDefaultRoutes();
    }
} 
```

这些路由都是`Zend_Controller_Router_Route`类的实例，当我在这样的视图中使用它们时：`$this->url(array(), 'admin_dashboard');`，`baseUrl`总是正确的（甚至在使用`baseUrl`view var 解决方案之前）。

如果有人知道这件事，请帮忙。如果您需要有关我的应用程序设置的更多信息，我会尽可能多地提供。

**编辑**

实际上，似乎有一个问题：空字符串`baseUrl`，在视图中可以正常工作，包括 JS 和 CSS 脚本；但有时我需要使用 Ajax，而 Base URL 应该有`/index.dev.php`一部分，以保持应用程序环境。我不知道最后一部分是否应该在同一个问题中，还是在一个新问题中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:27:27.963

由于视图中的 baseUrl 会删除脚本名称，因此附加`$_SERVER['SCRIPT_NAME']`应该可以修复它。

# java - java中的最小值不起作用

> ID：10839840
> 
> 赞同：1
> 
> 时间：2012-05-31T19:14:31.330
> 
> 标签：java, arrays, loops, for-loop

我需要帮助，因为我的脑细胞无法发现这个程序有什么问题！这是代码

```
 import java.util.*;
      public class student{
      public static void main (String []args)

    { 
        Scanner sc=new Scanner(System.in);
        System.out.println("enter number elements");  //asking the user to enter the number of integer items 
        int num=sc.nextInt();
        int []myArray= new int[num];
        int maxValue=myArray[0];
        int minValue=myArray[0];
        int i;
        for( i=0; i<myArray.length;i++)
        {System.out.print("Enter element"+(i+1));  //asking the user to enter the items 
           myArray[i]=sc.nextInt();
        }

        for(i=0; i<myArray.length;i++)
        {System.out.print(myArray[i]);    //displaying the elements 
        }
        System.out.println(" ");
        for( i=myArray.length-1; i>=0;i--)
        {System.out.print(myArray[i]);      //displaying the elements in a backward order
        }
        System.out.println(" ");
        for( i=0; i<myArray.length;i++)
        {if(i%2==1)

           System.out.println(myArray[i]);               //displaying the elements in odd indices

        }

      for( i=0; i<myArray.length-1;i++)
        { if(myArray[i]>maxValue)
            {
                maxValue= myArray[i];           //finding the maximum

            }

        }
        System.out.println(maxValue+" "+(i+1));

        for( i=1; i<myArray.length-1;i++)
        { if( myArray[i]<minValue)
            {minValue= myArray[i];                //finding the minimum

            }
        }
       System.out.println(+minValue+" "+(i+1));

        System.out.println(myArray[0]);                          //displaying first item
        System.out.println( myArray[myArray.length-1]);          //displaying last item

        for( i=0; i<myArray.length;i++)
        {if(i%2==0)

          {  myArray[i]= myArray[i]*-1;                    //multiplying items in even indices by -1

        System.out.print( myArray[i]);}
    }
  }

} 
```

该程序执行评论中的内容，但即使我不输入最小值也始终为零......我无法弄清楚问题出在哪里，所以非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:20:35.140

你初始化你的数组。然后给出默认值（每个 int 初始化为 0）

```
 int []myArray= new int[num];
   int minValue=myArray[0]; 
```

它将是 0

所以如果你输入正整数，没有比零更小的东西了

**解决方案** 首先用用户输入填充你的数组然后做

```
 int minValue=myArray[0]; 
```

或者使用 Integer.MIN_VALUE。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T19:22:56.980

当您通过查找一组值的最小值或最大值时，最好假设所有值都大于默认最大值（即将最大值设置为可能的最小整数），并且所有值将小于默认最小值（即将最小值设置为可能的最大整数）。

以上听起来违反直觉，但是当您遍历数组时，如果您遇到一个比最大值“更大”的值，您将更新您的最大值。同样的想法也适用于最小值（即，如果您发现一个小于最小值的值）。由于两者都会从逻辑极端开始，您将能够更容易地找到真正的最小值/最大值。

编码

```
int maxValue=myArray[0];
int minValue=myArray[0]; 
```

意味着`maxValue`和`minValue`都是 0，因为原始整数数组总是用零填充自己。相反，你应该试试这个：

```
int maxValue=Integer.MIN_VALUE;
int minValue=Integer.MAX_VALUE; 
```

有关这些常量的一些说明，`Integer`请查看API。[`Integer.MAX_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MAX_VALUE)[`Integer.MIN_VALUE`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#MIN_VALUE)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T19:23:57.607

```
int minValue=myArray[0]; 
```

由于这一行，您的 minValue 设置为 0。因此，仅当以下代码中的 myArray[i] 小于 0 时，才会在此方法中重置最小值。否则它保持为 0。

```
 for( i=1; i<myArray.length-1;i++) 
        { 
           if( myArray[i]<minValue) 
            {
              minValue= myArray[i];                

            } 
        } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-31T19:18:09.347

```
int []myArray= new int[num]; 
```

int 数组默认元素为 0

# linux - 获取命令的输出并将其插入到 bash 脚本中

> ID：10839842
> 
> 赞同：0
> 
> 时间：2012-05-31T19:14:37.353
> 
> 标签：linux, bash, scripting

我有一个相当简单的 bash 脚本，我需要让它变得更复杂一些，但我不确定如何去做。到目前为止，脚本是这样的：

```
 #!bin/bash

    if rails -v | grep -q "3.2"
     then
    echo "Rails 3.2 installed. Uninstalling and adding Rails 3.1.4."
    gem uninstall rails -v=$version
    gem install rails -v=3.1.4
     else
    echo "Rails 3.2 not installed. Exiting."
    exit 1
 fi 
```

如您所见，它并不完整且非常基本。该脚本的总体目标是查看所述服务器是否安装了 rails 3.2.x，如果是，则卸载它并安装 rails 3.1.4。除了将所需版本实际插入“gem卸载”部分之外，我已经涵盖了所有内容。$version 部分应替换为服务器上 rails -v 输出的版本号。

对此的任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:06:43.050

就像是

```
gem uninstall rails -v=$(rails -v | grep -o "3.2.*") 
```

定制您的正则表达式以仅匹配版本号，grep 将仅输出该版本号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T20:16:17.553

尝试用引号括起来，如下所示：`gem uninstall rails -v="$( rails -v | sed 's/.* //' )"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:17:11.030

```
 gem uninstall rails -v=$( rails -v ) 
```

# cakephp - Cakephp 2.1：将功能从非 Cakephp 类导入新的 Cakephp 控制器

> ID：10839843
> 
> 赞同：0
> 
> 时间：2012-05-31T19:14:45.520
> 
> 标签：cakephp, cakephp-2.1

我正在为我工​​作的实验室构建一个小型本地应用程序。长话短说，我编写了一个类（称为 MailParser），它可以登录到共享的 Gmail 帐户并检索/解析始终以标准化格式到达。课堂效果很好。我希望它的界面内置在 Cake 中。我不知道如何将两者适当地结合在一起，而且我非常有信心我正在做的事情，虽然是功能性的，但可以得到很大的改进。

这些电子邮件是我们大学托管的注册表的自动回复；他们通知研究人员已经报名参加实验的学生。

Cake 站点基本上是一个允许实验室成员管理数据库的 UI。MailParser 类需要数据库；它将从这些电子邮件中解析的信息与数据库中的信息进行比较，以随后更新各种 Google 日历（例如，一封电子邮件为“Participant_X 已注册 Experiment_Y”；数据库将知道“Experiment_Y”正在运行通过“Experimenter_Z”并将其发布到他们的日历中）。

Cake 应用程序小而简单；“实验”、“实验者”、“日历”。

我已经这样做了：

```
<?php 

App:users('AppController', 'Controller');
/**
 * Personas Controller
 *
 * @property Persona $Persona
 */
class MailparsersController extends AppController {
    function index($getMail=false) {
    //bunch o' code
    }

 //bunch o' functions
}
?> 
```

文件名为`MailparsersController.php`. 没有模型或视图，但我不希望有；最终，这个类将被一个小的 Python 应用程序调用，我想定期向它发出一个 http 请求`mylabserver.com/Mailparsers`（可以使用 javascript，只是不想让浏览器一直打开）。我的`index()`函数在被调用时会做它应该做的一切，但会返回一个错误页面。有没有办法让 Cakephp 控制器安静地完成它的工作而不返回视图？

基于蛋糕的 UI 允许实验室成员“注册”他们的实验和相应的日历，从而使部分工作流程自动化；考虑到它的有限用途，我可以自己编写这个 php，但我是 Cakephp 的忠实粉丝，并且一直在寻找将它的用处扩展到我的目的的方法。

谁能建议一种适当的方法将我的 Mailparser 功能带入我的 Cake 应用程序？这会更适合作为插件（我以前从未做过）吗？在这里，我将非常感谢您的任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T08:24:02.557

由于您使用的是 cake 2.x，因此我将建议您这样做：

1.  将您的课程存储在[Lib 文件夹中](http://book.cakephp.org/2.0/en/getting-started/cakephp-folder-structure.html#the-app-folder)
2.  创建一个新[组件](http://book.cakephp.org/2.0/en/controllers/components.html#creating-a-component)，例如 MailparserComponent，您可以在其中加载您的类，如下所示：`App::uses('Mailparser', 'Lib');`
3.  使用您的组件方法创建一个干净的“蛋糕式”API，并让您的类对应用程序的其余部分隐藏。

或者，您可以将您的类更改为组件。无论哪种方式，您都可以在应用程序的任何控制器中使用您的类，而不会出现任何问题。

此外，如果您真的打算将来在其他应用程序中使用此代码，则可以使用插件。

# mysql - 将 MySQL 十进制转换为可接受的格式，以便能够对其进行序列化

> ID：10839844
> 
> 赞同：4
> 
> 时间：2012-05-31T19:14:53.877
> 
> 标签：mysql, sql

> **可能重复：**
> [Python JSON 序列化 Decimal 对象](https://stackoverflow.com/questions/1960516/python-json-serialize-a-decimal-object)

我有以下 SQL：

```
SELECT 
    concat(UNIX_TIMESTAMP(date), '000') as datetime, 
    SUM(royalty_price) as sales 
FROM 
    sales_raw 
GROUP BY 
    datetime 
```

结果看起来像：

```
datetime        sales
1337151600000   1045.71 (decimal)
1337238000000   478.04
1337324400000   300.96
1337410800000   289.02 
```

由此我得到以下错误：

```
Exception Type: TypeError at /ajax/graph/
Exception Value: Decimal('1045.71') is not JSON serializable 
```

我如何将小数转换为 mysql 中可接受的格式以便能够序列化这些数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:02:02.390

如果你*必须*在 MySQL 中做，只[`CAST`](http://dev.mysql.com/doc/en/cast-functions.html#function_cast)需要一个字符串：

```
SELECT 
    CONCAT(UNIX_TIMESTAMP(date), '000') AS datetime, 
    CAST(SUM(royalty_price) AS CHAR)    AS sales
FROM 
    sales_raw 
GROUP BY 
    datetime 
```

# svg - SVG 字体在 Safari 中损坏？

> ID：10839846
> 
> 赞同：0
> 
> 时间：2012-05-31T19:14:56.847
> 
> 标签：svg, safari

[演示](http://jsfiddle.net/JgS4T)

这是一些生成几行文本的简单 JS。它在 FF、Chrome、Opera 和 IE9 中呈现良好，而在 Safari（在 Win7 上）中呈现不佳：文本有各种伪像，并且通常看起来像是被遮蔽了。它实际上在我的生产站点上看起来比这更糟糕，但它是安全的，所以我不能发布链接。

该站点最初有一些有限的文本和许多复杂的图形，并且在所有 5 种浏览器上都可以很好地呈现。我添加了更多文本，但现在无法在 Safari 中使用。我认为转换可能会更糟 - 尝试缩放 jsfiddle，您会看到伪影根据缩放出现和消失。

有任何想法吗？Safari刚刚坏了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:46:40.230

对文本进行描边比仅填充文本要重，因此 Safari 很可能在此处采取了一些捷径（可能出于性能原因）并因此导致渲染质量受损。但这也可能只是一个正常的错误。

无论如何，删除文本上的笔划，事情应该会更好看。

# sql - 在 Oracle 中使用 SQL LOADER 导入 CSV 文件

> ID：10839856
> 
> 赞同：6
> 
> 时间：2012-05-31T19:15:18.987
> 
> 标签：sql, csv, oracle11g, database-connection

我对数据库和编程很陌生。我不太擅长计算机术语，所以坚持我。我有一个`csv`文件正在尝试加载到我的`Oracle`数据库中。它包含我已安装的帐户信息，例如姓名、电话号码、服务日期等`Oracle 11g Release 2`。这是我到目前为止一步一步做的。

1) 运行 SQL 加载器

我用我需要的列创建了一个新表。例如

```
create table Billing ( TAP_ID char(10), ACCT_NUM char(10), MR_ID char(10), HOUSE_NUM char(10), STREET char(30), NAME char(50) 
```

2）它提示我创建了表。接下来，我为记事本中的数据创建了一个控制文件，该文件与我的 Billing 表位于同一目录中，并具有 .ctl 扩展名。GIS.csv 是我从中获取数据的文件，它也在同一目录中，并将其命名为 Billing.ctl，看起来像这样..

```
load data
infile GIS.csv
into table Billing
fields terminated by ','
(TAP_ID, ACCT_NUM, MR_ID, HOUSE_NUM, STREET, NAME) 
```

3) 从命令行运行 sqlldr 以使用控制文件

```
sqlldr myusername/mypassword  Billing.ctl 
```

这就是我卡住的地方。我已经看过我正在做什么的视频教程，但我收到了这个错误：

```
SQL*Loader-522: lfiopn failed for file (Billing.log) 
```

关于我在这里可能做错的任何想法？

**更新**

我只是将文件移动到一个单独的目录中，我想我已经克服了之前的错误。顺便说一句，是的 Billing.ctl 和 GIS.csv 在同一个目录中。

但现在我有另一个错误：

```
'SQL*Loader-350: Syntax error at line 1. 
```

期望关键字 LOAD，找到“SERV TAP ID”。"SERV TAP ID","ACCT NUMBER","MTR ID","SERV HOUSE","SERV STREET","SERV ^'

我不明白为什么它会出现这个错误。我的 billing.ctl 有负载。

```
LOAD data
infile GIS.csv
into table Billing
fields terminated by ','
(TAP_ID, ACCT_NUM, MTR_ID, SERV_HOUSE, SERV_STREET, SERV_TOWN, BIL_NAME, MTR_DATE_SET, BIL_PHONE, MTR_SIZE, BILL_CYCLE, MTR_RMT_ID) 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T20:01:54.470

Sqlldr 想在控制文件所在的同一目录中写入一个日志文件。但显然不能。它可能没有所需的权限。

如果您使用的是 Linux 或 Unix，请尝试以与运行 sqldr 相同的方式运行以下命令：

```
touch Billing.log 
```

它会显示你是否有权限。

**更新**

正确的命令行是：

```
sqlldr myusername/mypassword control=Billing.ctl 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T09:50:57.117

我有一个名为 FAR_T_SNSA.csv 的 csv 文件，我想直接将其导入 oracle 数据库。为此，我已经完成了以下步骤，并且效果非常好。以下是您需要遵循的步骤：

如何在 ORACLE 数据库中导入 CSV 文件？

1.  获取一个 .csv 格式的文件，该文件将被导入到 oracle 数据库中。这里命名为“FAR_T_SNSA.csv”</li>
2.  在 sql 中创建一个与 .csv 文件具有相同列名的表。创建表计费 (iocl_id char(10), iocl_consumer_id char(10));

3.  创建一个包含 sql*loder 脚本的控制文件。在记事本中键入如下脚本并将其保存为 .ctl 扩展名，选择文件类型为所有类型（*）。这里控制文件被命名为Billing。脚本如下：

    ```
    LOAD DATA
    INFILE 'D:FAR_T_SNSA.csv'
    INSERT INTO TABLE Billing
    FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
    TRAILING NULLCOLS
    (
    iocl_id,
    iocl_consumer_id
    ) 
    ```

4.  现在在命令提示符下运行命令：

    ```
    Sqlldr UserId/Password
    Control = “ControlFileName” 
    --------------------------------
    Here ControlFileName is Billing. 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-04T08:23:48.710

尝试这个

将文件中的数据“数据文件位置”加载到表模式中。表名字段以“，”结尾，可选地用“|”括起来 （字段 1、字段 2、字段 3....）

在命令提示符下：

```
sqlldr system@databasename/password control='control file location' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-11T15:53:21.453

调用 sql loader 时需要指定日志文件名。

```
sqlldr myusername/mypassword control=Billing.ctl log=Billing.log 
```

当我从 python 内部调用 sql loader 时遇到了这个问题。以下文章捕获了调用sql loader时可以指定的所有参数[http://docs.oracle.com/cd/A97630_01/server.920/a96652/ch04.htm](http://docs.oracle.com/cd/A97630_01/server.920/a96652/ch04.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-22T13:17:23.777

您可以使用以下控制文件并确保允许 sql*loader 在同一目录中写入两个文件（results.log 和错误文件）所需的权限。

```
options  ( 
skip=1,
PARALLEL=true,
DIRECT=true,
MULTITHREADING=false
)
load data
infile              'dataset.csv'           
APPEND INTO TABLE   XX_DUMMY_DATA_CSV
FIELDS TERMINATED BY ","       
optionally enclosed by '"' 
( 
   CASE_NUMBER,
   NASA_CENTER,
   SRA_DATE DATE "mm/dd/YYYY HH24:MI",
   SRA_FINAL,
   NTR_TITLE
) 
```

来源：[使用 SQL*Loader 将数据从 CSV 文件导入到 oracle 数据库表](https://www.oraask.com/2022/02/import-data-from-csv-file-into-oracle-database-table-using-sqlloader.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-31T17:30:01.967

-- 第一步：创建临时表。创建表计费 (TAP_ID char(10), ACCT_NUM char(10));

```
SELECT * FROM BILLING; 
```

-- 第二步：创建控制文件。

将文件 IN_DATA.txt 中的数据加载到以“，”结尾的表帐单字段（TAP_ID，ACCT_NUM）

-- 第三步：创建输入数据文件。IN_DATA.txt 文件内容：100,15678966

-- 第 4 步：从运行中执行命令：..client\bin>sqlldr username@db-sis__id/password control='Billing.ctl'

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-05-30T20:22:06.643

如果你的文字是：乔说，“弗雷德和他的“妻子”在这里。
这在 CSV 中保存为：
“乔说，”“弗雷德和他的“妻子”“”“在这里。”
（规则是双引号环绕整个字段，双引号转换为两个双引号）。因此，需要一个简单的 Optionally Enclosed By 子句，但还不够。由于这条规则，CSV 很难。您有时可以在该字段的加载器中使用 Replace 子句，但根据您的数据，这可能还不够。通常需要对 CSV 进行预处理才能加载到 Oracle 中。或者将其保存为 XLS 并使用 Oracle SQL Developer 应用程序导入到表中 - 非常适合一次性工作，但不适合编写脚本。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T12:31:40.510

“第 1 行” - 也许是关于 windows 与 unix 换行符的东西？（正如我看到上面提到的 Windows 7）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-03T16:45:30.450

将数据输入文件“D:\CertificationInputFile.csv”加载到表 CERT_EXCLUSION_LIST 字段中以“|”终止 可选地由 '"' 封闭（证书名称，证书版本）

# ios - 在 iOS 5 Core Image Filters 中显示从 CIImage 获得的 UIImage

> ID：10839858
> 
> 赞同：1
> 
> 时间：2012-05-31T19:15:25.630
> 
> 标签：ios, core-image

我正在开发图像过滤器应用程序。我使用以下代码创建了过滤器：

```
context = [CIContext contextWithOptions:nil];

    beginImage = [[CIImage alloc] initWithImage:[UIImage imageNamed:@"biscus_small.png"]];

    filter = [CIFilter filterWithName:@"CISepiaTone" 
                                  keysAndValues: kCIInputImageKey, beginImage, 
                        @"inputIntensity", [NSNumber numberWithFloat:0.8], nil]; 
```

然后，当用户选择过滤器时，我只需在应用过滤器并分配给 UIImageView 后获取 CIImage。出于某种原因，setImage 之后的 UIImageView 显示白色（无）。

```
CIImage *outputImage = [filter outputImage];

   // CGImageRef cgimg = 
   // [context createCGImage:outputImage fromRect:[outputImage extent]];

    UIImage *finalImage = [UIImage imageWithCIImage:outputImage];

    [self.imageView setImage:finalImage]; 
```

如果我使用 CIContext 的 createCGImage 方法，那么它可以正常工作并使用过滤器显示图像，但使用 createCGImage 非常慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T19:33:13.743

CIImage`-createCGImage:fromRect:`之所以这么慢，是因为这实际上触发了光栅位图的处理和输出。将输出 CIImage 分配给 UIImage 不会导致图像被处理和输出渲染。通过 Core Image 过滤图像时，您将无法避免此步骤。

正如我在[这个答案](https://stackoverflow.com/a/6628208/19679)中所说，Core Image 在 iOS 上的表现在 iOS 5.1 上有点令人失望。如果我可以提出建议，我已经构建[了一个开源框架](https://github.com/BradLarson/GPUImage)，它可以进行 GPU 加速的图像处理，并且在我测试过的几乎所有情况下都超过了 Core Image 的性能。对于图像过滤，我比 iPhone 4 上的 Core Image 快 4 倍。

但是，在过滤时往返 UIImage 仍然存在一些开销，因此如果您能够处理原始图像字节，我的原始数据输入和输出比处理 UIImage 快得多。我将在这个框架中添加一些直接的 JPEG 和 PNG 输入和输出，以提供比通过 UIImage 更快的路径。

# c - 一个客户端停止后，Unix ipc 服务器停止

> ID：10839864
> 
> 赞同：0
> 
> 时间：2012-05-31T19:15:54.897
> 
> 标签：c, queue, ipc

我有一个简单的 ipc 程序。服务器生成一个随机数，并从标准输入读取多个客户端。每个客户端向服务器发送随机数，直到他们猜出服务器的号码。当超过 n/2 个客户端猜到这个数字时，服务器停止。我的问题是服务器在第一个客户端猜到数字后停止。

服务器代码：

```
int i=0; // the number of clients who guessed the number
srand(getpid()); 
numarul = rand() % 20;
printf("Numarul generat este %d \n",numarul);
for(;;){
   if(msgrcv(coadaId,&mesg,sizeof(Mesaj),1,0)<0) // read the mesage from queue
       printf("Eroare la receptionarea mesajului.");
   else{
       printf("Am primit numarul %d \n", mesg.nr); 
   if(mesg.nr == numarul){
                         i++; // is the number is guessed
                         printf("S-a ghicit numarul de la %d clienti \n",i);
                         mesg.val=1;} // msg.val = 1 if number is guessed
   mesg.tip=2; // change the message type
   msgsnd(coadaId,&mesg,sizeof(Mesaj),0); // send the msg.val . if 1 client stops
   mesg.val=0;
   if(i>n/2)break; // the loop ends when i is bigger than half number of clients
  }
  } 
```

客户端代码：

```
mesg1.val=0;
srand(getpid()); 
while(mesg1.val!=1){
    mesg1.nr = rand() % 20; // generates number
    mesg1.tip=1;  // type = 1 
    if(msgsnd(coadaId,&mesg1,sizeof(Mesaj),0)<0) // sends message to queue
      printf("Eroare la trimiterea mesajului:");
    msgrcv(coadaId,&mesg1,sizeof(Mesaj),2,0); // reads message from the server
    if(mesg1.val==1)exit(0); // if the number is guessed quit 
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:04:09.420

即使算术运算符优先于等式运算符，使用括号来提高清晰度仍然是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T08:54:30.520

`i`在第一个客户端猜到数字之前等于 0，之后等于 1。服务器循环在`i>n/2`. 正如您所说，当`i`等于 1 时会发生这种情况。由此得出 0 ≤ n/2 < 1 ⇔ 0 ≤ n < 2，因此，如果`n`是整数，则为 0 或 1。如果您不相信，请显示`n`循环之后。

# php - 如何使用 php 检测重定向中的所有页面？

> ID：10839865
> 
> 赞同：4
> 
> 时间：2012-05-31T19:15:58.860
> 
> 标签：php, redirect, http-headers

我在知乎上发现了这个问题，不知道怎么解决

设想 -

用户在 one.php 上并单击指向 two.php 的链接

Two.php 将标头重定向到 three.php

如果我们检查 three.php 上的引用 URL，$_SERVER 显示 one.php 而不是 two.php

我们如何发现 two.php 是一个进行标头重定向的中间页面？

请注意，我不能对 one.php 或 two.php 做任何可以包含任何参数的事情，比如重定向中包含的 two.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:17:34.600

### 使用会话保存记录

您可以将堆栈保存在会话变量中。只需保持不移动值到`$_SESSION["history"]`，当集合增长到一定大小时，从数组末尾删除项目。

例如：

```
// Need to do this if we wish to store data
session_start();

// Set the history array if it doesn't exist
isset( $_SESSION["history"] ) || $_SESSION["history"] = array();

// Push current URI onto history
array_unshift( $_SESSION["history"], $_SERVER["REQUEST_URI"] );

// Prevent history from exceeding 5 values
array_splice( $_SESSION["history"], 5 ); 
```

### 将其加载到所有 PHP 文件中

这需要添加到每个文件的顶部，或者添加到全局标题模板包含（如果有的话）。或者，如果你敢，你可以使用全局加载它`auto_prepend_file`：

> 指定在主文件之前自动解析的文件的名称。该文件被包含，就好像它是用 require 函数调用的一样，因此使用了 include_path。-[文档](http://www.php.net/manual/en/ini.core.php#ini.auto-prepend-file)

### 检查历史

您可以通过访问显示整个历史记录`$_SESSION["history"]`：

```
// Output history array
var_dump( $_SESSION["history"] ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:31:10.657

因为您无权访问 one.php 或 two.php，所以这里没有变通方法。由于 two.php 提供了重定向，因此浏览器会传递引荐来源网址，屏蔽 two.php。这在 RFC 中没有指定，但它是客户端的约定。

如果您确实有访问权限，则可以在查询中传递引荐来源网址，同时仍使用 301。添加哈希或签名可用于验证 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:19:20.280

您可以使用会话或 cookie。您可能希望用时间标记条目，并且只考虑时间戳非常接近的条目。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-04T02:30:40.833

您可以在从 two.php 到 three.php 的重定向中使用 GET 参数。

所以在两个.php中：

header('位置：三个.php?source=two.php');

然后在three.php中检查 $_GET['source'];

# regex - 正则表达式匹配 1 个或 2 个字母，后跟 1 个或 2 个数字

> ID：10839866
> 
> 赞同：2
> 
> 时间：2012-05-31T19:16:01.340
> 
> 标签：regex

我需要帮助形成一个正则表达式来检查输入字符串是否仅是模式 1 或 2 个字母（可以是小写或大写），后跟 1 个或 2 个数字。有效的字符串是 d1,d15,ha1,ha20 等等。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T19:17:11.463

以下应该做你想要的：

```
\A[a-zA-Z]{1,2}\d{1,2}\z 
```

`[a-zA-Z]`是匹配任意字母的字符类，`\d`等价`[0-9]`并匹配任意数字，`{1,2}`意思是“重复前一个元素1或2次”。

`\A`和`\z`是锚点，它们仅分别匹配字符串的开头和结尾（它们不匹配任何字符，它们只需要字符串在它们处开始或结束以允许匹配）。

您通常还会看到锚点`^`和`$`，我使用`\A`和`\z`因为`$`将在字符串末尾的换行符之前匹配，并且可以通过选项修改其行为，而`\z`始终表示字符串的末尾。

以下页面对正则表达式语法进行了很好的总结：
[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# c# - C#如何使用特殊主机名制作正则表达式

> ID：10839869
> 
> 赞同：0
> 
> 时间：2012-05-31T19:16:12.367
> 
> 标签：c#, regex, hostname

我无法找到适用于我的域名的正则表达式。我不知道我是否有一个特殊的域名，但我找到的例子都没有为我工作。

这是我的主机名：

```
81-232197-178.cust.bluewin.ch 
```

这是我的正则表达式：

```
^(([a-zA-Z]|[a-zA-Z][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z]|[A-Za-z][A-Za-z0-9\-]*[A-Za-z0-9])$ 
```

但它不匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:06:05.700

如果句点数（。）不可变，您可以使用以下模式：

```
([0-9]*-[0-9]*-[0-9]*).([0-9A-Za-z]*).([0-9A-Za-z]*).([0-9A-Za-z]*) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T21:24:58.837

如果您正在对该网站进行屏幕抓取，您可能会更好地查找相邻文本并将字符串从 DOM 中的下一个元素中取出，而不是尝试查找仅与页面中的该文本匹配的正则表达式。

# c++ - C++：具有硬编码派生类的 ADT 基类与从文件输入构建的包罗万象的类

> ID：10839871
> 
> 赞同：1
> 
> 时间：2012-05-31T19:16:21.810
> 
> 标签：c++, class-design

哪个设计更好：具有硬编码、具体派生类和实例的 ADT 基类，还是其实例从文件输入构建的包罗万象的类？

**例子：**

```
class ADTSpell {
    ADTSpell(std::string name, int min_damage, int max_damage);
    virtual ~ADTSpell()=0;
    //...
};

class Fire : public ADTSpell {
    Fire() : ADTSpell("Fire", 14, 15) { }
    //...
};

/* Other concrete derived classes */ 
```

- 或者 -

```
class Spell {
    Spell(std::string name, int min_damage, int max_damage, /*...*/ )
    //...
};

File: Spells.txt
Fire 14 15
Heal -3 -5
Ice 5 8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:20:30.080

KISS（保持简单）原则建议您只使用

```
struct Spell
{
   std::string Type;
   int MinDamage;
   int MaxDamage;
}; 
```

要点很简单：你已经概括了所有的咒语。原则上，它们仅在名称上有所不同。参数（最小值/最大值）很容易存储为字段。所有这些都不需要高级多态性。

这些“咒语”的加载/保存代码不会比基于类的解决方案更困难。

如果您需要更多参数（如射弹类型），它可能仍会作为该结构的一个字段包含在内。

更重要的是，如果您要通过网络传递此“类”的实例或尝试将它们编组到 Lua/Python/.NET/whatever，您将考虑通过 char Type[FIXED_SIZE] 甚至更改 std::string到 int 类型（带有一些枚举）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:01:54.993

我实际上会做类似于第二个的事情，但是如果您需要更多功能，请扩展它。

```
class MultiTargetSpell : public Spell {
    public MultiTargetSpell(std::string name, int min_damage,
        int max_damage, TargetData targets) :
        Spell(name, min_damage, max_damage) { ... }
    ...
};

...
Spell fire = Spell("Fire", 14, 15);
Spell firestorm = MultiTargetSpell("Firestorm", 25, 30, everyone); 
```

# powershell - 是否可以异步更新 PowerShell 提示符？

> ID：10839873
> 
> 赞同：6
> 
> 时间：2012-05-31T19:16:23.743
> 
> 标签：powershell

我喜欢在我的 PowerShell 提示符中包含 Mercurial/Git 存储库状态。有时这会大大减慢`prompt()`函数的运行速度，导致等待很长时间，直到您可以开始在 shell 中输入。我想知道，是否可以更新提示异步？

理想情况下，它会：

1.  `Write-Host`当前目录（典型提示）
2.  开始在后台收集回购状态。
3.  收集到 repo 状态后，假设`prompt`没有再次调用，将 repo 状态插入到提示中。

有没有人这样做过？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T23:18:08.167

不是本身。

您不能异步更新提示，因为提示只返回文本，并且只要完成顶级命令，就会在主机中调用它。

您可以重写提示来执行诸如检查数据源或异步更新的变量之类的操作。因此，在命令运行时提示不会不断变化，但它不会挂起一段时间，因为它只是在查找数据。

更棘手的是，它进入了试图在事后偷看执行结果的游戏。PowerShell 不会保留它们，除非它们被分配给某些东西。因此，要正确执行此操作，必须覆盖 Out-Default（仅适用于 ISE、PowerGUI 等，而不适用于 powershell.exe）。覆盖它并不难，但它需要了解很多 PowerShell 巫术，即使按照我令人印象深刻的标准。

从*好的*方面来说，我显然一直在思考这个问题，并且有一个模块可以做很多这样的事情，我只是在确定我要如何处理它以及它是否保留在自己的模块中或加入我们构建的其他模块之一。

我会在外出时更新它，但这个路线图应该会有很大帮助。

简短的回答是您无法更新提示异步，但您可以让它变得更快，并且这样做所需的技巧打开了许多更酷的门。

希望这可以帮助

# c# - 有什么可以模拟静态界面的吗？

> ID：10839875
> 
> 赞同：2
> 
> 时间：2012-05-31T19:16:36.317
> 
> 标签：c#, asp.net

我想确保一堆类都有这个具有相同名称的特定静态函数被调用。最好的方法是让每个类都实现我的接口。但是，唉，界面不做静态，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:36:22.860

**扩展方法**呢？

[http://msdn.microsoft.com/en-us/library/bb383977.aspx](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

# c# - 如何获取网页的txt内容？

> ID：10839877
> 
> 赞同：0
> 
> 时间：2012-05-31T19:16:38.607
> 
> 标签：c#, httpwebrequest, webbrowser-control, webclient

我已经浪费了 2 天的时间来发现，WebBrowser 控件中存在已知的内存泄漏（自 2007 年左右以来，他们仍然没有修复它）所以我决定在这里简单地问一下，如何做我需要的事情。

到现在为止，（使用WebBrowser ...），我一直在访问一个站点，（ctrl+a），将其粘贴到一个字符串中，仅此而已。我的字符串中有网页的文本内容。工作得很好，直到我发现一段时间后它需要 1 GB 的内存。是否有可能通过 HttpWebRequest、httpwebclient 或其他任何东西来做到这一点？

感谢您的回复，没有任何这样的线程（或者我还没有找到任何线程，搜索并没有真正带我太多，因为我现在真的很生气：P）

忘记补充：我不想要 HTML 代码，我知道很容易得到它。就我而言，html 代码是无用的。我确实需要用户在使用 Internet 浏览器打开页面时看到的文本。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T19:21:03.570

```
using (WebClient client = new WebClient())
{
    string html = client.DownloadString("http://stackoverflow.com/questions/10839877/how-to-get-a-txt-content-of-a-web-page");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:19:27.677

你可以使用这个：

```
string getHtml(string url) {
   HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);
   request.Method = "GET";
   HttpWebResponse response = (HttpWebResponse)request.GetResponse();
   StreamReader source = new StreamReader(myWebResponse.GetResponseStream());
   string pageSourceStr = string.Empty;
   pageSourceStr= source.ReadToEnd();
   response.Close();
   return pageSourceStr;
} 
```

您仍然需要进行一些子字符串替换以将其从 html 减少为文本。如果您只想要来自某个 div 的文本，这还不错。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T19:22:45.417

这将从任何网页下载 html 内容。

```
WebClient client = new WebClient ();
string reply = client.DownloadString ("http://www.google.com"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T19:25:10.493

**为什么不使用像Ncrawler**这样的免费开源 HTML抓取工具。

它是用 C# 编写的。

[ncrawler.codeplex.com](http://ncrawler.codeplex.com/)

[您可以在此处](http://ncrawler.codeplex.com/wikipage?title=Getting%20Started&referringTitle=Documentation)获取有关如何使用它的示例。

# android - Python SL4A 开发

> ID：10839879
> 
> 赞同：8
> 
> 时间：2012-05-31T19:16:47.370
> 
> 标签：android, python, sl4a

好吧——我感觉自己像个沮丧的白痴。我想先声明一下。

我正在尝试进行 Python/Android 设置，以便为 Android 开发 Python 应用程序。我在我的 Android 设备上安装了 SL4A 和 Python 解释器，并且可以在运行的手机上编写应用程序。

问题是如何继续在我的 PC 上进行开发并与我的 Android 设备进行交互。我已经解压了 extras 包并将其放在 $PYTHONPATH/site-packages/ 中。我已经将 Ecplise 与 PyDev 和 Android 包集成并设置了 AP_PORT 和 AP_HOST 环境变量。

当我运行以下代码时：

```
import android
droid = android.Android()
droid.makeToast("Hello") 
```

我在 Eclipse 中收到错误，包括“com.googlecode.android_scripting.rpc.RpcError: Unknown RPC”。坏魔术数字。

当我通过 CLI 进入 Python 并输入

```
import android 
```

我得到以下输出

```
com.googlecode.android_scripting.rpc.RpcError: Unknown RPC. 
```

任何帮助或初学者教程将不胜感激。

我知道我一定做错了什么，因为我看到其他人开始接受，看起来，相对轻松。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-05T08:37:37.703

# 1.启动服务器

## 在设备上

首先，用 USB 连接您的设备。然后为了远程调试，你需要在你的设备上启动一个服务器：

```
SL4A -> Interpreters -> Menu -> Start Server 
```

*私人*的更可取。

然后您可以在 Android 通知区域中查找服务器的端口（使用 SL4A r5 您可以在设置中指定一个固定端口）。

## 从电脑

`adb`或者，您可以使用特定端口（设置端口需要 r5）从 PC 启动服务器：

```
$ adb shell am start -a com.googlecode.android_scripting.action.LAUNCH_SERVER \
  -n com.googlecode.android_scripting/.activity.ScriptingLayerServiceLauncher \
  --ei com.googlecode.android_scripting.extra.USE_SERVICE_PORT 51943 
```

# 2.指定连接

现在您需要使用 adb 转发您的端口（假设查找值为 51943）：

```
$ adb forward tcp:51943 tcp:51943
$ export AP_PORT=51943 
```

# 3.启动脚本

之后，您应该能够在本地运行您的脚本：

```
$ python my_script.py 
```

# 无线网络连接

如果你想通过 wifi 去，你不需要转发你的端口`adb`。相反，您必须使用*公共*服务器并另外指定您的主机：

```
$ export AP_HOST=192.168.0.100 
```

# 参考

如需更多帮助，请参阅[解决此主题的 Wiki 页面](http://code.google.com/p/android-scripting/wiki/RemoteControl)。

# asp.net - 如何比较两个集合之间的值并仅使用 asp.net 在列表框中呈现不同的值

> ID：10839880
> 
> 赞同：1
> 
> 时间：2012-05-31T19:16:51.357
> 
> 标签：asp.net, linq

在表单中，我有两个列表框控件，这些控件用于将用户映射到角色。在左侧的列表框中（可用用户），我需要显示与当前部门关联的所有用户的列表。右侧的列表框显示部门中已映射到该角色的用户列表。 ![在此处输入图像描述](../Images/746ccd87891c0e40dd31fba9b9ba155d.png)

每个列表框都映射到它自己的集合。我想做的是在列表框最初加载时从可用用户集合中过滤掉可能出现在映射用户集合中的名称。在查看插图时，右侧的列表框应仅显示 1 个可映射到此角色的可用用户（在插图中它将是 alguser4）

我最初的想法是创建一个新集合（avaialbleuserscoll）并尝试使用 linq 进行过滤。我卡住的地方是一个用户可能被映射到多个角色，因此我不能采用当前的方法，只测试计数 = 0。我需要做的是测试以确保计数 == 0 或角色 ID 不等于当前角色 ID。

对于如何仅让未映射到当前角色的用户显示在 listAllUsers 列表框中的任何指导，我将不胜感激

```
 private void EditMappedUserDetails(int agencyid, int roleid)
    {
        List<SecurityUser> allUserColl;
        List<SecurityUser> mappedUserColl;
        List<SecurityUser> availableUserColl;
        allUserColl = AdminFactory.GetUsersAndRoles(agencyid).OrderByDescending(n => n.UserName).ToList();

        mappedUserColl = SelectedRoleData.FirstOrDefault().SecurityUserRoles.Select(r => r.SecurityUser).OrderByDescending(n => n.UserName).ToList();

        availableUserColl = allUserColl.Except(mappedUserColl).ToList();

        listAllUsers.DataTextField = "UserName";
        listAllUsers.DataValueField = "SecurityUserId";

        listMappedUsers.DataTextField = "UserName";
        listMappedUsers.DataValueField = "SecurityUserId";

        listAllUsers.DataSource = availableUserColl;
        listMappedUsers.DataSource = mappedUserColl;
        listAllUsers.DataBind();
        listMappedUsers.DataBind();
        editUserUpdatePanel.Update();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:21:51.780

您可以在 linq 中使用 except 函数来删除重复项，这是一个示例

```
 var m = availableUserColl.Except(mappedUserColl).ToList(); 
```

# jquery-mobile - jQuery 移动快捷方式

> ID：10839882
> 
> 赞同：0
> 
> 时间：2012-05-31T19:16:57.673
> 
> 标签：jquery-mobile

我最近一直在学习 jQuery Mobile，但很难记住所有可能的参数和所有组件的一般结构。有没有什么可以帮助解决这个问题而不是纯粹的记忆？（我正在使用 Visual Studio。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:26:38.913

1.  [http://jquerymobile.com/demos/1.1.0/docs/api/data-attributes.html](http://jquerymobile.com/demos/1.1.0/docs/api/data-attributes.html)
2.  [http://www.cheatography.com/danielschmitz/cheat-sheets/jquery-mobile/](http://www.cheatography.com/danielschmitz/cheat-sheets/jquery-mobile/)

我只是为文档添加书签并经常参考它们，直到它被记住。Dreamweaver cs 5.5 + 还为 jquery mobile 提供了一些有用的代码完成和提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T14:23:45.480

我为此创建了自己的代码片段。这很不错。您只需键入几个字符（jqmPage、jqmToggle 等）即可获得整个结构。

**博客文章**

我最近一直在学习 jQuery Mobile，并且对这项技术印象深刻。它是一款功能强大且功能强大的工具，可快速为移动设备创建内容。然而，由于它对我来说如此新并且如此强大，我发现很难记住你可以用它做的许多不同事情的所有语法。我突然想到代码片段可能是减轻这种负担的好方法，所以我开始创建自己的代码片段来做这件事。

例如，使用我的 jqmPage 代码片段（通过键入

```
<div id="PAGENAME" data-role="page" data-theme="THEME">

    <div data-role="header" data-position="fixed" data-theme="a">
        <h1>HEADER</h1>
    </div>

    <div data-role="content" data-theme="a">
    </div>

    <div data-role="footer" data-position="fixed" class="ui-bar" data-theme="a">
        <h4>FOOTER</h4>
    </div>

</div> 
```

要下载所有代码片段，请查看[jQuery Mobile 代码片段](http://www.foliotek.com/devblog/jquery-mobile-code-snippets-for-visual-studio/)

# c# - 数据绑定后 ASP 中继器未更新

> ID：10839883
> 
> 赞同：0
> 
> 时间：2012-05-31T19:16:59.033
> 
> 标签：c#, asp.net, custom-controls, updatepanel, repeater

有点复杂的问题，但我有一个自定义用户控件（“名册列表”），其中包含一个 ASP 中继器。此控件有一个名为 RefreshRosterList 的方法，该方法在控件的 Page_Load 上调用。此控件被动态插入到 UpdatePanel 中。

母版页包含两个更新面板 - 一个用于我的花名册列表，一个用于其他控件。

我有一个导致回发的单独控件。此控件（“合并课程”）将新记录插入数据库并调用我的 RefreshRosterList 方法。

在我的 RefreshRosterList 方法结束时，调用了将我的中继器与新数据进行数据绑定的调用。我知道数据在绑定到中继器时是正确的。

我说它没有更新，但我发现如果我提交第二个帖子，Repeater 将显示新项目。我的意思是如果我创建一个名为 CIS161 的 CIS161-01 和 CIS161-02 的合并，它不会显示。合并之后，如果我创建 CIS171-01 和 CIS171-02 的第二次合并，称为 CIS171，那么 CIS161 合并将显示，但 CIS171 合并不会。

如何让我的第一个合并显示在数据绑定上？

我希望这是有道理的。我可以尝试提供任何必要的代码，但它分布在许多不同的文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:38:47.670

您需要将控件设置为花名册列表所在的更新面板的触发器或自己触发更新。

# linux - 在写入文件期间拒绝写入权限

> ID：10839886
> 
> 赞同：1
> 
> 时间：2012-05-31T19:17:08.540
> 
> 标签：linux, unix, file-permissions

`chmod -R -w filename`将删除写权限，但如果程序在拒绝权限之前打开文件，即使我们删除写权限，程序也可以继续写入文件。

有解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:43:39.673

您可以使用[强制锁定](http://kernel.org/doc/Documentation/filesystems/mandatory-locking.txt)，但写入不会因错误而失败，而是被无限期阻止。

但不要忽视第一段：“为什么要避免强制锁定”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:24:36.130

您可以使用`fuser`或`lsof`查看打开文件的进程并杀死它们

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:25:42.063

尝试复制它并使用新名称而不是旧版本的副本。这可以防止程序更改您可能不想再更改的数据。但是，显而易见的解决方案是简单地终止该程序。

# android - Android 在后台重启应用

> ID：10839888
> 
> 赞同：3
> 
> 时间：2012-05-31T19:17:11.667
> 
> 标签：android, background-foreground

经过一些研究，我发现只有一种方法可以重新启动应用程序并将其从后台移至前台。他们说我应该使用服务来做到这一点。但是所有的答案都是针对 developer.android。而且我还不能使用developer.android。不要问为什么。

**我想要的是？**
当用户以某种方式离开我的应用程序（转到另一个应用程序、菜单或转到设置）时，使用 BroadcastReceiver 或服务收听它。然后**将我的应用程序带回前台**。

**到目前为止我做了什么？**
我尝试了一些代码片段，但他们没有给我解决方案。我想我不了解服务和广播接收器的基础知识。这是我坚持的唯一一点。

我敢肯定这将是几行代码。我在等你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:13:12.480

这绝对是可能的（Surelock 做到了）。但我想你不能使用它，`BroadcastReceiver`因为启动应用程序时系统没有发送广播。

您可以通过从您的服务启动您的活动的意图来将您的活动带到前台。但是您的挑战是确定何时应该开始您的活动。

如果您想“始终在顶部”运行单个活动，则可以使用[此](https://stackoverflow.com/a/9076796/925202)技术。它甚至不需要服务实现。

希望这能解决您的一些问题。

# python - python 语法 - self._setup 的含义

> ID：10839891
> 
> 赞同：0
> 
> 时间：2012-05-31T19:17:17.943
> 
> 标签：python

我是 python 新手，并试图理解以下基本的 python 语法。提前致谢。

```
foo = self._setup['bar'] 
```

更新：修复了我之前的代码段中的错字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:19:40.770

这不是有效的 Python，因为`python`它不是关键字：

```
>>> foo = python self._setup['bar']
  File "<stdin>", line 1
    foo = python self._setup['bar']
                    ^
SyntaxError: invalid syntax 
```

有效的 Python 代码如下所示

```
foo = self._setup['bar'] 
```

其构造如下：

```
self                     # Get the value of self (typically the current object)
self._setup              # Get the attribute "_setup" of that value
self._setup['bar']       # Get the item "bar" of the attribute value
foo = self._setup['bar'] # Assign the result to the variable foo 
```

这些都是非常基本的结构。有关详细信息，请参阅[Python 教程](http://docs.python.org/tutorial/index.html)。

# ios - 如何使用 Instruments 中的 UIAutomation 在应用程序窗口中访问 UIATableCell？

> ID：10839895
> 
> 赞同：1
> 
> 时间：2012-05-31T19:17:50.203
> 
> 标签：ios, automated-tests, functional-testing, ios-ui-automation

我有这个应用程序，我正在使用苹果提供的 UIAutomation 框架编写自动化测试脚本。在我的应用程序中，我想点击一个按钮，该按钮是 a 的子级，而该按钮`UIATableCell()`又是`mainWindow()`我的应用程序的子级。当我运行命令时`logElementTree()`，会显示以下内容： ![在此处输入图像描述](../Images/9017d5dcca8554f74b32cfec2680c817.png)

但是我尝试无法访问此按钮。谁能帮助我如何访问此按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:37:55.780

试试这个：

```
 var buttonToTap = mainWindow().cells()[0].buttons()[0].tap();
    if ( buttonToTap.checkIsValid() )
        buttonToTap.tap(); 
```

如果您尝试点击的单元格中的文本在应用程序运行期间不会更改，您可以尝试使用对象名称而不是索引：

```
var textInCell = "You have not talked to anyone named 'Bugles'";    
var buttonToTap = mainWindow().cells()[textInCell].buttons()[textInCell].tap();
if ( buttonToTap.checkIsValid() )
    buttonToTap.tap(); 
```

# c# - 没有动作的 ASP MVC 路由

> ID：10839896
> 
> 赞同：3
> 
> 时间：2012-05-31T19:17:52.870
> 
> 标签：c#, asp.net-mvc

我想省略 url 中的操作，因为我不认为这是一种平静的方法。默认路由应该是：

```
"{controller}/{id}" 
```

然后调用与使用的 HTTP 方法对应的操作。例如，我正在装饰一个 PUT 动作，如下所示：

```
[HttpPut]
public ActionResult Change()
{
    return View();
} 
```

但是，当卷曲这个时，我得到一个 404。所以我做错了什么，以前有人尝试过这种方法吗？

我正在使用 MVC4 测试版。

这就是我为设置路线所做的一切：

```
 routes.MapRoute(
        name: "Default",
        url: "{controller}/{id}",
        defaults: new { controller = "Home", action = "Index", id = RouteParameter.Optional }
    ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T19:27:49.533

```
[HttpPut]
[ActionName("Index")]
public ActionResult Change()
{
    return View();
} 
```

MVC 中的操作方法选择器只允许您最多有 2 个用于同名方法的操作方法重载。我了解您希望仅使用 {controller}/{id} 作为 URL 路径的来源，但您可能会以错误的方式进行操作。

如果您的控制器只有 2 个操作方法，例如 1 用于 GET，1 用于 PUT，那么您可以将两个操作命名为 Index，就像我在上面所做的那样，或者像这样：

```
[HttpPut]
public ActionResult Index()
{
    return View();
} 
```

如果控制器上有超过 2 个方法，则可以为其他操作创建新的自定义路由。您的控制器可能如下所示：

```
[HttpPut]
public ActionResult Put()
{
    return View();
}

[HttpPost]
public ActionResult Post()
{
    return View();
}

[HttpGet]
public ActionResult Get()
{
    return View();
}

[HttpDelete]
public ActionResult Delete()
{
    return View();
} 
```

...如果您的 global.asax 看起来像这样：

```
routes.MapRoute(null,
  "{controller}/{id}", // URL with parameters
  new { controller = "Home", action = "Get", id = UrlParameter.Optional },
  new { httpMethod = new HttpMethodConstraint("GET") }
);

routes.MapRoute(null,
  "{controller}/{id}", // URL with parameters
  new { controller = "Home", action = "Put", id = UrlParameter.Optional },
  new { httpMethod = new HttpMethodConstraint("PUT") }
);

routes.MapRoute(null,
  "{controller}", // URL with parameters
  new { controller = "Home", action = "Post", id = UrlParameter.Optional },
  new { httpMethod = new HttpMethodConstraint("POST") }
);

routes.MapRoute(null,
  "{controller}/{id}", // URL with parameters
  new { controller = "Home", action = "Delete", id = UrlParameter.Optional },
  new { httpMethod = new HttpMethodConstraint("DELETE") }
);

routes.MapRoute(
  "Default", // Route name
  "{controller}/{id}", // URL with parameters
  new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

...这些新的 4 条路由都具有相同的 URL 模式，除了 POST（因为您应该 POST 到集合，但 PUT 到特定的 id）。但是，不同的 HttpMethodConstraints 告诉 MVC 路由只匹配 httpMethod 对应的路由。所以当有人向 /MyItems/6 发送 DELETE 时，MVC 不会匹配前 3 个路由，但会匹配第 4 个。同样，如果有人向 /MyItems/13 发送 PUT，MVC 将不会匹配前 2 个路由，但会匹配第 3 个。

一旦 MVC 匹配路由，它将使用该路由定义的默认操作。因此，当有人发送 DELETE 时，它将映射到控制器上的 Delete 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:31:59.170

考虑使用[AttributeRouting](https://github.com/mccalltd/AttributeRouting/wiki) nuget 包。它支持[宁静的约定](https://github.com/mccalltd/AttributeRouting/wiki/Convention-Based-Routing)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:23:13.247

如果您使用的是 MVC4 Beta，为什么不也使用 WebAPI？

除此之外，我不认为路由引擎能理解各种 HTTP 动词......所以，你有点卡住了。除非您为所有这些重载一个 Action 方法并执行此操作：

```
routes.MapRoute(
  "Default", // Route name
  "{controller}/{id}", // URL with parameters
  new { controller = "Home", action = "Restifier", id = UrlParameter.Optional }
); 
```

# ruby-on-rails - 如何使用 activerecord-informix-adapter 编写准备好的语句

> ID：10839899
> 
> 赞同：1
> 
> 时间：2012-05-31T19:18:05.537
> 
> 标签：ruby-on-rails, database, prepared-statement, informix

使用[activerecord-informix-adapter](http://rubyforge.org/projects/rails-informix/) (1.1.1) 及其[文档](http://rubydoc.info/gems/activerecord-informix-adapter/1.1.1/frames)，我试图创建一个准备好的语句，但得到一个错误。

```
ActiveRecord::StatementInvalid 

Informix::DatabaseError: Prepared statement is not a cursor specification: 
```

我的查询如下所示：

```
@resource=Client.connection.execute("select * from sample where username=?;",'John') 
```

# c# - 如何在 WPF 中显示单击（按下）按钮？

> ID：10839902
> 
> 赞同：13
> 
> 时间：2012-05-31T19:18:10.593
> 
> 标签：c#, wpf

鼠标向上按钮应显示背景边框

我创造了一个简单的风格

```
<UserControl.Resources>
        <Style TargetType="Button" x:Key="TransparentButton">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="Transparent">
                            <ContentPresenter/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources> 
```

和按钮

```
<Button  Height="20" Width="20"  Padding="0,0,0,0" DockPanel.Dock="Top" Grid.Row="0" Grid.Column="1" Click="button_click"  Style="{StaticResource TransparentButton}"
                    BorderBrush="Transparent" BorderThickness="0" Background="Transparent">
            <Button.Content>
                <Image Source="../Resources/Help_icon.png" Stretch="UniformToFill" />
            </Button.Content>
            </Button> 
```

但在这种情况下，当按下按钮时，它不会显示在 UI 中。用户应该感觉到按钮被按下。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T19:37:44.983

我不确定您在视觉上想要什么，但是如果您希望在按下按钮时边框改变颜色，您可以像这样修改您的模板：

```
<Style TargetType="Button" x:Key="TransparentButton">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Border Name="border" Background="Transparent" BorderThickness="1" BorderBrush="Black">
                    <ContentPresenter/>
                </Border>

                <ControlTemplate.Triggers>
                    <Trigger Property="Button.IsPressed" Value="True">
                        <Setter TargetName="border" Property="BorderBrush" Value="Transparent" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T19:28:03.450

当您重新创建按钮的 ControlTemplate 时，您将失去 Windows 按钮感觉的所有默认功能。您需要使用触发器重新创建它们，或者不使用您自己的控件模板。

```
<ControlTemplate.Triggers>
   <Trigger Property="IsPressed" Value="True">
       <Setter ....behavior you want
   </Trigger>
</ControlTemplate.Triggers> 
```

这是一个按钮具有的 MSDN 默认控件模板的链接，您可以将其用作参考，通过定义自己的行为来重新创建您丢失的一些行为。

[http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-06-11T09:46:07.603

[这里](https://coderanch.com/t/677940/visual-basic/languages/WPF-button-appearance-change-pressed)有一篇很好的文章，解释了发生了什么以及如何解决它。基本上，MS 确实在标准按钮中包含了此功能，但他们为“鼠标按下”和“按下”选择的颜色非常接近，以至于您不会注意到差异。

右键单击设计器中的按钮，然后选择“编辑模板/编辑副本...”，然后更改颜色，直到您看到不同之处。简单的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-06T11:00:11.147

```
Try this one...

<Style x:Key="PressedButtonEffect" TargetType="Button">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Name="border" Background="Transparent" BorderThickness="1" BorderBrush="Gray">
                        <ContentPresenter/>
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="Button.IsPressed" Value="True">
                            <Setter TargetName="border" Property="BorderBrush" Value="DarkGray" />
                            <Setter TargetName="border" Property="BorderThickness" Value="2" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# java - 如何将 JSON 数组传递给 Spring-MVC？

> ID：10839904
> 
> 赞同：0
> 
> 时间：2012-05-31T19:18:15.150
> 
> 标签：java, ajax, json, spring, spring-mvc

如何将 JSON 数组传递给 Spring-MVC？

我正在尝试找到一种方法将 JSON 中的对象数组传递给 Spring-MVC(Java)..

下面是我的 javascript 设置两个数组并进行调用：

```
function doAjaxPost() {  

      var inData = {};

      inData.name = ['kurt','johnathan'];
      inData.education = ['GSM','HardKnocks'];

      htmlStr = JSON.stringify(inData);
      alert(htmlStr);

      $.post( contexPath + "/AddUser.htm", inData, function(outData, outStatus){
          alert(outStatus);

      });
}; 
```

这是我的 Java (Spring-MVC) 控制器：

```
@RequestMapping(value="/AddUser.htm",method=RequestMethod.POST)
    public @ResponseBody JsonResponse addUser(@ModelAttribute(value="user") User user, BindingResult result ){
        JsonResponse res = new JsonResponse();
        ValidationUtils.rejectIfEmpty(result, "name", "Name can not be empty.");
        ValidationUtils.rejectIfEmpty(result, "education", "Educatioan not be empty");
        if(!result.hasErrors()){
            userList.add(user);
            res.setStatus("SUCCESS");
            res.setResult(userList);
        }else{
            res.setStatus("FAIL");
            res.setResult(result.getAllErrors());
        }

        return res;
    } 
```

这是我正在使用的 bean：

```
public class User {

    private String name = null;
    private String education = null;

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getEducation() {
        return education;
    }
    public void setEducation(String education) {
        this.education = education;
    }

} 
```

请让我知道正确的方法是什么让这个工作......这是我得到的错误......严重：servlet Spring MVC Dispatcher Servlet 的 Servlet.service() 抛出异常 org.springframework.beans.InvalidPropertyException: Invalid property 'education bean 类 [com.raistudies.domain.User] 的 []'：在索引属性路径“education[]”中引用的属性既不是数组也不是 List 也不是 Map；返回值为 [[Ljava.lang.String;@6fef3212]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:27:13.000

似乎您的 JSON 中的 Education 属性是一个数组，但在您的 POJO 中它是一个字符串

如果你改变

```
private String education = null 
```

至

```
private List<String> education = null 
```

它应该可以工作，您还必须为名称做同样的事情。

# asp.net-mvc-3 - Jquery UI 选项卡打开提交事件（asp.net MVC 3）将 JSON 返回到最终选项卡

> ID：10839908
> 
> 赞同：1
> 
> 时间：2012-05-31T19:18:35.017
> 
> 标签：asp.net-mvc-3, jquery-ui

我有一个带有 jqueryUI 选项卡的页面。我有 3 个标签。前两个选项卡有两个单独的表单 您可以提交一个或另一个，但不能同时提交。当您提交一个表单时，第三个选项卡会打开，其中包含来自回发的提交结果。我有点不确定我会怎么做？到目前为止，这是我的标签控件...

```
<script type="text/javascript">
    $(function () {
        $("#searchPatient").tabs();
    });
</script>
<div id="searchPatient" style="display:inline; float:inherit">
    <ul>
        <li><a href="#searchByMRN">Search By MRN</a></li>
        <li><a href="#searchByDemographics">Search By Demo</a></li>
        <li><a href="#retTable">Return Table</a></li>
    </ul>
    @Html.Partial("_SearchByMRN")
    @Html.Partial("_SearchByDemographic")
    @Html.Partial("_RetTable")

</div> 
```

如您所见，我的设置很简单。这些 Partial 调用中的每一个都有部分视图，其中包含选项卡的 div。我猜在这个页面上的脚本中，我需要禁用传统的提交功能，而只显示第三个选项卡（retTable）。不确定我需要寻找什么活动？关于如何开始这方面的任何想法？有类似的例子吗？

更新：下午好，先生。这个选项卡控件工作得很好，但我正在尝试扩展它......我想将 JSON 数据发送回 retTable，并在最后一个选项卡中附加一个表......我想如果我改变我的 Controller 方法以返回 JSON回到页面...

```
public ActionResult SearchByMRN(SearchByMRNModel searchByMRN)
        {

            //Have to flesh this out more... Will return JSON result set back to SearchPatient View
            //Can pull right out of old project... Shouldn't be a major problem...
            //ImportPopulationManagementDLL's      
            string UID = HttpContext.User.Identity.Name;
            DataRepository dr = new DataRepository();
            List<SelectListItem> retVal = dr.SearchByMRN(searchByMRN, UID);
            return Json(DataRepository.searchPatientJSonStr(retVal), JsonRequestBehavior.AllowGet);// PartialView("_RetTable");
        } 
```

我在渲染的原始视图中有这个脚本（调用 .tabs() 函数的那个

```
<script type="text/javascript">
    $(function () {
        $("#searchPatient").tabs();
    });
    function switchToResultTab(data) {
        $('a[href="#retTable"]').click();
        debugger;
        $("#list").setGridParam({
            datatype: 'jsonstring',
            datastr: data,
            caption: 'Patient Search Result'
        }).trigger("reloadGrid");
    }

    function failToTab(data) {
        alert("");
        $("list").setGridParam({
        datatype:'jsonstring',
        caption: 'Patient Search Result',
        datastr:data
        }).trigger("reloadGrid");
    }
</script> 
```

我认为这会很简单，但不知何故，ajax 函数只是一直要求我保存 JSON 文件......我觉得这只是一个痛苦。另外，在调用 Ajax.BeginForm 时，您将如何获得加载 gif... 我敢打赌有一个加载字段。让我仔细检查...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T09:50:43.223

将您的两个表单放在 Ajax.BeginForm 中：

```
@using (Ajax.BeginForm("SearchByMRN",
                       "SearchController",
                       new AjaxOptions
                       {
                           HttpMethod = "POST",
                           InsertionMode = InsertionMode.Replace,
                           UpdateTargetId = "retTable",
                           OnSuccess = "switchToResultTab()"
                       },
                       new
                       {
                           id = "formSearchByMRN"
                       }))
{
    @*Form content goes here*@
    <button id="btnFormSearchByMRN" type="submit">Search<button>
} 
```

**编辑**

这将呈现以下 HTML 输出：

```
<form method="post" id="formSearchByMRN" data-ajax-update="#retTable" data-ajax-success="switchToResultTab()"
data-ajax-mode="replace" data-ajax-method="POST" data-ajax="true" action="/SearchController/SearchByMRN" novalidate="novalidate">...</form> 
```

当帖子成功完成时，将调用 OnSuccess-Method。

控制器动作：

```
[HttpPost]
public ActionResult SearchByMRN(Searchmodel searchmodel)
{
    /* Perform serach */

    return PartialView("_RetTable");
} 
```

再次为您的第二个搜索表单执行上述操作。

MVC 会将结果标签内容替换为搜索结果，然后您需要一个 javaScript 函数来成功切换标签：

```
function switchToResultTab() {
    $('a[href="#retTable"]').click();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T23:14:19.257

如果我没记错的话，您可以从 URL 中选择 jQuery UI 选项卡。如果您浏览到同一页面，但在页面 URL 中添加了哈希 #retTable，则将选择“返回表”选项卡。因此，如果页面 URL 是 localhost/Patient/Search，则可以使用 localhost/Patient/Search#retTable 打开第三个选项卡。

由于您需要在回发中执行此操作，因此表单的操作应包含哈希。这是一个关于如何做到这一点的示例：[ASP.NET MVC - 将表单发布到 html 书签？](https://stackoverflow.com/questions/4397203/asp-net-mvc-post-form-to-html-bookmark/4397268#4397268)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:19:42.433

**第二个答案**

将您的两个表单放在 Html.BeginForm 中：

```
@using (Html.BeginForm("SearchByMRN",
                       "SearchController",
                       FormMethod.Post,
                       new
                       {
                           id = "formSearchByMRN"
                       }))
{
    @*Form content goes here*@
    <button id="btnFormSearchByMRN" type="submit">Search<button>
} 
```

控制器动作：

```
[HttpPost]
public ActionResult SearchByMRN(Searchmodel searchmodel)
{
    /* Perform serach */

    return PartialView("_RetTable");
} 
```

再次为您的第二个搜索表单执行上述操作。

通过ajax提交表单：

```
$('#formSearchByMRN, #searchByDemographics').submit(function () {
    if ($(this).valid()) {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                $('#retTable').html(result);
                switchToResultTab();
            }
        });
    }
    return false;
});

function switchToResultTab() {
    $('a[href="#retTable"]').click();
} 
```

但我更喜欢我之前使用 Ajax.BeginForm 的答案，这对我来说似乎更舒服。

# netbeans - Netbeans“取消搁置更改”不使用内部冲突解决程序？

> ID：10839910
> 
> 赞同：2
> 
> 时间：2012-05-31T19:18:37.730
> 
> 标签：netbeans

通常（或默认情况下）当 Netbeans 中的文件之间存在冲突时，您可以选择使用其内部冲突解决程序，这是比较两个文件以及移动和确认更改的绝佳界面。

Netbeans 的“搁置”功能也很酷，它使将未提交的更改放在一边以处理其他问题变得轻而易举，而不是通过克隆/拉取/等过程。每次您想暂时搁置工作更改并做其他事情时。

问题是，当您取消搁置更改，而 Netbeans 无法 100% 合并取消搁置的更改和新更改时，它只会提示类似于“只能部分取消搁置更改”的内容，仅此而已。我真的希望它会提示冲突解决程序，让您轻松合并更改。=(

有谁知道我是否只是想念它？或者我可以使用搁置更改创建的 .patch 文件强制冲突解决程序吗？

# c# - 在 RepeaterItemCommand 上访问 DataItem 对象

> ID：10839913
> 
> 赞同：1
> 
> 时间：2012-05-31T19:18:55.320
> 
> 标签：c#, asp.net

触发按钮命令时如何访问我的中继器数据项？我可以看到 DataItem 返回 null。

有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:37:07.687

在按钮的 CommandArgument 中设置对象的 id。然后在按钮命令事件中，您可以从 e.CommandArgument 访问 id。然后，您可以查询域/数据库以获取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:35:25.683

您应该确保它不是标题行，您看到的`DataItem`是`null`.

您可以通过使用`if`语句封装您的代码来做到这一点，只需检查是否`DataItem`不是`null`或者它是否属于您用于将数据分配给该的指定类型`Repeater`。

或者，您可以按照此处所述检查项目的[ListItemType ：http:](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listitemtype.aspx) [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)或此处：[ASP.Net 中继器项目。数据项为空](https://stackoverflow.com/questions/4649192/asp-net-repeater-item-dataitem-is-null)。

然后，您应该能够通过访问对象来访问与[ItemDataBound](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.itemdatabound.aspx)事件中的每个项目关联的数据。`e.Item.DataItem`

如果您想访问从控件绑定调用的另一个事件分配给转发器的数据（即像您提到的那样单击按钮），您可以`CommandArgument`为每个项目和句柄使用并为其分配适当的值`ButtonCommand`。

# django - 分布式设置中的 Django SECRET_KEY

> ID：10839917
> 
> 赞同：9
> 
> 时间：2012-05-31T19:19:17.997
> 
> 标签：django

如果我在负载均衡器后面设置多个 django 服务器，我是否希望 SECRET_KEY 相同、不同或根本不重要？文档对这个值的确切用途有点薄。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T19:27:23.370

我想应该是一样的。这是相关问题：[Django SECRET_KEY](https://stackoverflow.com/questions/7382149/django-secret-key)。

基本上，密钥用于验证发送给客户端或放入会话的各种内容。因此，如果您的节点具有不同的密钥，则每次将客户端会话路由到新节点时都会清除它（这很糟糕）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T19:26:05.477

`SECRET_KEY`用于会话中间件等各个地方。如果所有节点都必须有权访问会话信息，那么它们必须共享相同的密钥。

# jquery - Gmap 缺少 XMLHttpRequest 标头

> ID：10839921
> 
> 赞同：1
> 
> 时间：2012-05-31T19:19:28.620
> 
> 标签：jquery, ajax, google-maps, symfony1, symfony-1.4

我正在使用 symfony 框架来开发网站。**Symfony 通过XMLHttpRequest 标头**识别 ajax 调用 。

我已经在我的页面上集成了 Gmap。Gmap 在没有 XMLHttpRequest 标头的情况下发出 ajax 请求。因此 symfony 无法识别 ajax 请求。

正常的 jquery ajax 调用有这个标头。

```
X-Requested-With XMLHttpRequest 
```

但是 Gmap 没有添加这个。

```
GDownloadUrl(searchUrl, function(data) {
  var xml = GXml.parse(data); 
  ... 
} 
```

GDownloadUrl**进行**此 ajax 调用。我怎样才能用它添加这个标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:32:36.077

我通过用 jquery.get 函数替换 GDownloadUrl 函数解决了**我**的**问题**。

 **```
jQuery.get('searchUrl',function(data) {
  var xml = GXml.parse(data); 
  ... 
} 
```

此函数附加**XMLHttpRequest 标头****

# extjs - EXT JS 在 btn Click 上打开表单

> ID：10839922
> 
> 赞同：0
> 
> 时间：2012-05-31T19:19:30.443
> 
> 标签：extjs

相对 EXTJS 的新手，我有一个编辑表单，我想在用户单击编辑按钮时显示该表单。

以前我一直这样做：

```
edit_window_xtype: 'window name', 
```

效果很好，在这种情况下，我只需要在单击按钮时调用表单，而不是在用户双击网格中的字段时调用表单。（这就是 edit_window_xtype: 'window name' 会完成的）

我有

```
btnEdit_onClick: function (btn) {
    Ext.create('window name').show();
}, 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:28:42.173

当我这样做时，我正在声明我自己的 xtype，如下所示：

```
Ext.define('MyApp.view.dialog.MyEditDialog', {
    'extend' : 'Ext.window.Window',
    'alias' : 'widget.MyEditDialog',
    'autoShow' : true,//dont have to call .show()
    'title' : 'Edit',
    'items' : [{
         'xtype' : 'form',
         'bodyPadding' : 5,//my "Default"
         'flex' : 1,//scale childs to fit parent
         'defaultType' : 'textfield',//we're lazy ;-)
         'items' : [{
             'name' : 'surename',
             'fieldLabel' : 'Surename'  
          }, {
             'name' : 'lastname',
             'fieldLabel' : 'Lastname'
          }]
     }],
     'buttons' : [{
         'text' : 'Save',
         'iconCls' : 'button-save'//declared CSS Background somewhere
     }, {
         'text' : 'Cancel',
         'iconCls' : 'button-cancel',
         'handler' : function(btn){
              btn.up('window').close();//query selector is your friend ;-)
         }
     }]
}); 
```

最后，说： Ext.widget('MyEditDialog');' 足够的。玩得开心！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:03:33.870

看来我有很多东西要学习 Extjs。这是我想出的，如果有人有更好的解决方案，请告诉我。一直在寻找更好的方法来完成某事。:)

```
btnEdit_onClick: function (btn) {
    var config = {
        xtype: 'MyWindow_Name',
        mode: 'edit',
        title: 'Edit Window',
        editId: this.id
    };
    var win = Ext.ComponentMgr.create(config);
    win.show();
}; 
```

# c# - 将 UserControl DependencyProperty 绑定到其他 UserControl DependencyProperty

> ID：10839926
> 
> 赞同：1
> 
> 时间：2012-05-31T19:20:01.503
> 
> 标签：c#, silverlight, dependency-properties

我有两个用户控件：

```
public partial class MKSelectMonthUC : UserControl
{
    public static readonly DependencyProperty CurrentYearProperty = DependencyProperty.Register("CurrentYear", typeof(int), typeof(MKSelectMonthUC), new PropertyMetadata(0));
    public int CurrentYear
    {
        get { return (int)GetValue(CurrentYearProperty); }
        set
        {
            SetValue(CurrentYearProperty, value);
        }
    }

    public static readonly DependencyProperty ChatRoomIdProperty = DependencyProperty.Register("ChatRoomId", typeof(int), typeof(MKSelectMonthUC), new PropertyMetadata(0));
    public int ChatRoomId
    {
        get { return (int)GetValue(ChatRoomIdProperty); }
        set
        {
            SetValue(ChatRoomIdProperty, value);
            if(value > 0)
                GetChatReport(ChatRoomId);
        }
    } 
```

}

和

```
public partial class MKSelectPeriodForChatReportCW : ChildWindow
{
    public static readonly DependencyProperty ChatRoomIdProperty = DependencyProperty.Register("ChatRoomId", typeof(int), typeof(MKSelectPeriodForChatReportCW), new PropertyMetadata(0));
    public int ChatRoomId
    {
        get { return (int)GetValue(ChatRoomIdProperty); }
        set
        {
            SetValue(ChatRoomIdProperty, value);
        }
    }

    public static readonly DependencyProperty CurrentYearProperty = DependencyProperty.Register("CurrentYear", typeof(int), typeof(MKSelectPeriodForChatReportCW), new PropertyMetadata(0));
    public int CurrentYear
    {
        get { return (int)GetValue(CurrentYearProperty); }
        set
        {
            SetValue(CurrentYearProperty, value);
        }
    } 
```

}

在 MKSelectPeriodForChatReportCW 的 XAML 中，我想将它的 DependencyProperties 绑定到 MKSelectMonthUC DependencyProperties，如下所示：

```
<controls:ChildWindow x:Class="XX.mkControls.MKSelectPeriodForChatReportCW"
       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
       xmlns:controls="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls"
       xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit" 
       xmlns:mk="clr-namespace:XX.mkControls.MKSelectPeriodForChatReport"
       Name="mainControl"
       >
<Grid x:Name="LayoutRoot" Margin="2">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <mk:MKSelectMonthUC CurrentYear="{Binding CurrentYear, ElementName=mainControl}" ChatRoomId="{Binding ChatRoomId, ElementName=mainControl}" />

</Grid> 
```

MKSelectPeriodForChatReportCW 上的属性确实（从它们的绑定中）获取值，但 MKSelectMonthUC 上的值没有。所以请帮我找到解决方案。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T08:17:58.250

我没有你所有的源代码，也无法重现你的问题，所以我所能做的就是根据你上面提供的代码风格提出一些建议。

1.  正如 HiTechMagic 所说，setter 中的`GetChatReport`方法调用不会像您预期的那样频繁调用。如果您希望每次依赖属性更改时都调用一个方法，请使用. [MSDN 上的这个页面](http://msdn.microsoft.com/en-us/library/cc903933%28v=vs.95%29.aspx#metadata)有一个如何使用 PropertyChangedCallback 的示例。 `ChatRoomId``MKSelectMonthUC``PropertyChangedCallback`

    对于依赖属性支持的属性，getter 应该只包含对的调用，`GetValue`而 setter 应该只包含对 的调用`SetValue`。

2.  使用绑定`ElementName`可能会很尴尬，因为如果出现问题（例如，没有找到具有给定名称的元素），它们会保持沉默。大概您在视图模型中的某处有您的`CurrentYear`和`ChatRoomId`属性的值，如果是这样，我建议将这两个`CurrentYear`和两个`ChatRoomId`依赖属性都绑定到您的视图模型中的数据。

3.  两个依赖属性之间的绑定最好与表示层信息一起使用。例如，您可以使用两个依赖属性之间的绑定来确保两个控件的宽度相同。这些控件的宽度是表示层数据，因为它不是*您*要展示的数据，而是您展示它的*方式。*您的`CurrentYear`和`ChatRoomId`属性是您正在显示的数据，而不是您显示它的方式，因此它们不是表示层数据。

我还建议不要给顶级元素 a`Name`或 an`x:Name`然后在绑定中使用该名称。诚然，您显示的唯一 XAML 是您的`ChildWindow`，所以我不知道您的`MKSelectMonthUC`用户控件是否也这样做。尽管如此，为了将来的参考，以及其他阅读此答案的人，我将给出两个原因，说明这是一个坏主意。

假设我们有以下内容`UserControl`：

```
<UserControl x:Class="XYZ.MyUserControl"
             ....
             x:Name="myUc">
    <TextBlock Text="{Binding Path=MyProperty, ElementName=myUc}" />
</UserControl> 
```

如果我们然后尝试使用这个控件并给它一个不同的`x:Name`，例如

```
<xyz:MyUserControl x:Name="abc123" /> 
```

我们最终将控件的名称从 更改`myUc`为`abc123`，这会破坏绑定。

此外，如果我们尝试使用这些用户控件中的两个或更多，例如

```
<StackPanel>
    <xyz:MyUserControl />
    <xyz:MyUserControl />
</StackPanel> 
```

然后我们得到一个关于`x:Name`s 不是唯一的错误，因为两个`MyUserControl`元素都有一个`x:Name`of `myUc`。

# jquery - 来自选择框的动态 addClass()

> ID：10839927
> 
> 赞同：2
> 
> 时间：2012-05-31T19:20:03.143
> 
> 标签：jquery, css, dynamic, drop-down-menu

希望这不是一个重复的问题，但如果是，只需发布​​链接作为您的回复。

我需要创建一个网站，顶部有一个选择下拉列表，上面有几个选项，下面有几个 div，里面有几个链接。

根据您在选择框中选择的选项，适当标记的链接将突出显示。

这是基本结构：

```
<select>
  <option value="o1">Option 1</option>
  <option value="o2">Option 2</option>
  <option value="o3">Option 3</option>
  <option value="o4">Option 4</option>
</select> 

<div>
  <a href="#" class="o1">Link A</a>
  <a href="#" class="o2">Link B</a>
  <a href="#" class="o3">Link C</a>
  <a href="#" class="o4">Link D</a>
</div>

<div>
   <a href="#" class="o1">Link A</a>
   <a href="#" class="o2">Link B</a>
   <a href="#" class="o3">Link C</a>
   <a href="#" class="o4">Link D</a>
</div> 
```

我知道这个过程将包括 .addClass() .removeClass() 和 .change()，我只是不确定如何将它们放在一起，以便它在所有 div 中动态工作。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:25:37.010

链接如下：

```
$('select').on('change', function(){
    var klass = this.value;
    $('.highlight').removeClass('highlight');
    $('a.'+klass).addClass('highlight');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:25:08.963

```
$('select').on('change', function() {      // binding change event for select
                                           // fires when select box change

  var mycls = this.value;                  // getting the value of select 
                                           // box after change

  $('a:not(".'+ mycls +'")')               // select <a> tag that has no 
                                           // class same as select box value
              .removeClass('some_class');  // and remove highlight 
                                           // class form that <a>

  $('a.' + mycls)                          // select the <a> with class 
                                           // same as select box value
             .addClass('some_class');      // and adding highlight class
}); 
```

最初使链接突出显示只需触发初始更改

```
$('select').on('change', function() {
  var mycls = this.value;
  $('a:not(".'+ mycls +'")').removeClass('some_class');
  $('a.' + mycls).addClass('some_class');
}).change(); // here the initial change event triggered 
```

**[演示](http://jsfiddle.net/thecodeparadox/dQYK6/4/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:30:27.690

假设您为选择列表提供了一个 id，例如 selectid，并且您有一个名为 .highlight 的类，您可以执行以下操作：

```
$('#selectid').change(function(){

  $('*').removeClass('highlight');

  $('.'+$(this).val()).addClass('highlight'); 

}); 
```

我没有测试过上述内容，但它应该让你走上正轨。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T19:27:50.353

似乎您已经回答了最后一句中的问题，但这是下一步。

您必须将 .change() 事件处理程序添加到您的选择框。

```
$("select").change(function () {

}); 
```

然后，即使发生这种情况，请读取所选值，并且由于您将它们命名为相同，因此将样式应用于该类。

```
$("select").change(function () {
    $( "." + $(this).attr("value") ).css("background", "#ccc");
} 
```

# java - 来自 pfx 证书的 Java 密钥库

> ID：10839928
> 
> 赞同：0
> 
> 时间：2012-05-31T19:20:08.877
> 
> 标签：java, encryption, ssl, certificate, pfx

**语境**

我需要在 Windows Server 2008 上的 IIS 7.5（http 端口 80，https 443）后面放置一个 Java 应用服务器（http 端口 8080，https 8181）。

**脚步**

我使用`IIS ARR`了启用代理的模块，以便将一些请求路由到 Java 应用程序服务器。为此，我还制定了一些`URL Rewrite`规则。使用`http`，一切正常。

使用的规则规定，当请求的 URL 与 pattern 匹配时`(MyAppContextRoot.+)`，要采取的操作是 Rewrite: `http://localhost:8080/{R:0}`。

对于另一个使用 https 的应用程序，重写规则是：`https://localhost:8181/{R:0}`。

为了路由 https 请求，我在某处读到我需要在 IIS 和 Java 之间共享相同的证书，因为 IIS 加密/解密请求/答案。如果我错了，请纠正我。

由于我仍处于开发阶段，我决定共享一个自签名证书。我已经创建了它，并使用以下方法`SelfSSL7`导入了 java ：`keystore``keytool`

```
selfSSL7 /Q /T /I "Default web site" /N cn=myDomain.com /X /F MyCertificate.pfx /W myPassword

keytool -importkeystore -srckeystore C:\myPath\MyCertificate.pfx -srcstoretype pkcs12 -srcalias my -deststoretype jks -deststorepass myPassword -destalias MyAlias 
```

**问题**

两个证书都完成了它们的工作：`https://myDomain.com`并且`https://myDomain.com:8181`已经启动并运行，但是在尝试路由时，我得到了错误：

```
502 - Web server received an invalid response while acting as a gateway or proxy server.

There is a problem with the page you are looking for, and it cannot be displayed. When the Web server (while acting as a gateway or proxy) contacted the upstream content server, it received an invalid response from the content server. 
```

然而，查看证书，在以下方面存在差异：颁发给、颁发者、有效性、签名算法、密钥大小。特别是SelfSSL7创建的算法是sha1RSA（1024 Bits key），keytool创建的算法是sha256RSA（2048 Bits key）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T21:50:15.953

It sounds like what you're trying to do is a reverse proxy setup, not a redirection to the Java server, in which case the Java server should never be accessed directly, but only via IIS. It would therefore be "invisible" to the client (so you shouldn't even see a different URL with a different port). It sounds like your rewrite rules are just redirections (not reverse proxy rewrite rules).

*   If you don't need the connection between IIS and your Java container to be protected with SSL/TLS (only the connection from external clients to IIS), you don't need to configure the Java container for SSL/TLS. IIS will be a client for your Java container, using plain HTTP.

*   If you want the connection between IIS and your Java container to be protected with SSL/TLS, you'll need the certificate to be valid for the host where the Java container is hosted, as seen by IIS. This is unlikely to be the same certificate as the one used on IIS, since the one used by IIS is a public facing certificate, whereas the one for the Java container would only be for internal use (you could probably use a self-signed certificate or your own CA, depending on what the IIS reverse proxy module can be configured to accept).

# delphi - Delphi 7 OnTypeChange 未更新

> ID：10839931
> 
> 赞同：0
> 
> 时间：2012-05-31T19:20:17.260
> 
> 标签：delphi, delphi-7, topendialog

我正在使用 TOpenDialog 来允许用户打开 3 种不同类型的文件。当显示初始目录时，它只列出与当前选择的扩展类型匹配的文件，这是我想要的。但是，当用户选择其他类型之一时，与该类型匹配的文件名永远不会出现。如果我在文件名框中键入 *.ext，那么该扩展名的所有文件名都会显示。当用户更改文件类型时，如何获得该结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:55:43.483

如果在编辑框中输入了通配符掩码，则对话框仅显示与该掩码匹配的文件，无论在下拉列表中选择了哪种文件类型。当用户从列表中选择不同的文件类型时，掩码不会自动更新为新的文件扩展名。您必须在`OnTypeChange`事件中手动执行此操作，例如：

```
uses
  ..., Dlgs, Commdlg;

procedure TForm1.OpenDialog1TypeChange(Sender: TObject);
const
  Extensions : array[1..4] of PChar = ('', 'ext1', 'ext2', 'ext3');
var
  s : String;
  i : Integer;
begin
  OpenDialog1.DefaultExt := Extensions[OpenDialog1.FilterIndex];
  if OpenDialog1.FilterIndex = 1 then Exit;
  i := SendMessage(GetParent(OpenDialog1.Handle), CDM_GETSPEC, 0, 0);
  if i > 1 then
  begin
    SetLength(s, i-1);
    SendMessage(GetParent(OpenDialog1.Handle), CDM_GETSPEC, i, LPARAM(PChar(s)));
    s := ChangeFileExt(s, '.' + Extensions[OpenDialog1.FilterIndex]);
    SendMessage(GetParent(OpenDialog1.Handle), CDM_SETCONTROLTEXT, edt1, LPARAM(PChar(s)));
  end;
end; 
```

# java - Java drawString 在边界之上绘制字符串

> ID：10839940
> 
> 赞同：1
> 
> 时间：2012-05-31T19:20:52.200
> 
> 标签：java, swing, jpanel, graphics2d, drawstring

我有一个 Jpanel，例如宽度为 500，高度为 100。我有计算屏幕中心垂直（y）和水平（x）的公式。我用它来绘制字符串（myText，x，y），但它将文本写入 jpanel 的边界之上。这是我正在使用的paintComponent 代码。

```
 protected void paintComponent(Graphics g) {
        Graphics2D g2d = (Graphics2D)g;
        String MenuString = Menu.get(MenuChannel);
        fontMetrics = g2d.getFontMetrics(realFont);
        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
        g2d.setBackground(Color.PINK);
        g2d.fillRect(0,0,getWidth(),getHeight());
        g2d.setColor(Color.WHITE);
        g2d.setFont(realFont);

        java.awt.geom.Rectangle2D rect = fontMetrics.getStringBounds(MenuString, g2d);
        int textHeight = (int)rect.getHeight();
        int textWidth = (int)rect.getWidth();
        int panelHeight = getHeight();
        int panelWidth = getWidth();
        int x = (panelWidth - textWidth) / 2;
        int y = (panelHeight - textHeight) / 2;
        System.out.println("tH:" + textHeight + "\ntW:" + textWidth + "\npH:" + panelHeight + "\npW:" + panelWidth);
        g2d.drawString(MenuString,x,y);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:23:59.463

是的-这很痛苦-`drawString`将您的`String`使用`y`作为底线（或基本文本行）。如果你想在 Rectangle 中居中字符串，你应该使用它来实现它`FontMetrics`

# java - 更改 Tomcat 默认日志严重性

> ID：10839942
> 
> 赞同：0
> 
> 时间：2012-05-31T19:20:55.483
> 
> 标签：java, tomcat, logging

我的 Tomcat 7 在标准输出中记录了这样的消息：

```
INFO: Stopping service Catalina
31/05/2012 15:58:59 org.apache.coyote.http11.Http11AprProtocol destroy 
```

但我只需要记录 WARN 和 ERROR 消息。

无论如何设置这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:26:15.313

${catalina.base}/conf/logging.properties <-- 改变这个文件，我猜你需要这个设置

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = INFO

# oracle - 昂贵的 Oracle 窗口函数

> ID：10839953
> 
> 赞同：0
> 
> 时间：2012-05-31T19:21:52.003
> 
> 标签：oracle, oracle10g

我正在使用窗口函数来计算序列号：

```
SELECT  R.ENCOUNTER_ID,
        M.MEASURE_ID,
        M.TAKEN_TIME,
        M.VALUE,
        row_number() OVER(PARTITION BY R.ENCOUNTER_ID, M.MEASURE_ID ORDER BY R.ENCOUNTER_ID, M.MEASURE_ID, TAKEN_TIME ASC) AS SEQ

FROM RECORD R 
INNER JOIN MEASURE M ON R.ABC_ID=M.ABC_ID 
```

RECORD 表在 ABC_ID 上有一个唯一索引，在 ENCOUNTER_ID 上有一个非唯一索引。

MEASURE 表在 ABC_ID 和 LINE 上具有唯一索引（未在查询中使用）。

没有 row_number() 的查询的解释计划给出以下内容：

```
HASH JOIN                 119702
TABLE ACCESS RECORD FULL  278
TABLE ACCESS MEASURE FULL 50696 
```

带有 row_number() 的查询的解释计划给出以下内容：

```
WINDOW                    377871
HASH JOIN                 119702
TABLE ACCESS RECORD FULL  278
TABLE ACCESS MEASURE FULL 50696 
```

似乎跨表索引会有所帮助（在 R.ENCOUNTER_ID 和 M.MEASURE_ID 上），但我不确定它是否受支持。

我不知道表格统计信息的更新频率。

有没有办法在我的窗口函数上获得更好的性能？每个表都可以从额外的索引中受益吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:35:00.397

散列连接后的高成本表明您的散列连接正在溢出到磁盘，因为它通常会增加可以忽略不计的成本。使用 DBMS_Xplan 来估计所需的临时空间。

如果您在哈希连接上受到内存限制，那么窗口函数也将遭受内存不足的困扰。监视 v$sql_workarea 以查看您是否进行了多遍排序，并考虑在此查询期间增加内存分配。

至于索引，我怀疑您可以做很多事情。

# c++ - 返回多个值

> ID：10839957
> 
> 赞同：0
> 
> 时间：2012-05-31T19:22:03.430
> 
> 标签：c++, parameters, arduino

我是一名 Java 开发人员，试图在有限的 Arduino 环境中编写 C++ 代码。由于内存限制，异常和动态对象不可用或必须避免。

我的任务是创建一个解析字符缓冲区（十六进制半字节）并返回布尔值以指示成功以及实际结果的方法。到目前为止我的尝试（避免了不相关的东西）：

```
class Parser {
   unsigned char buffer[SIZE];
   unsigned char index;

   void parse();
   bool parseHexNibble(unsigned char &result);
};

void Parser::parse() {
  unsigned char result = 0;
  if (!parseHexNibble(result)) {
    return;
  }

  // do some work with result
}

bool Parser::parseHexNibble(unsigned char &result) {
  unsigned char chr = buffer[index];
  if (chr >= '0' && chr <= '9') {
    result = chr - '0';
  }
  else if (chr >= 'A' && chr <= 'F') {
    result = chr - 'A' + 10;
  }
  else {
    return false;
  }

  index++;
  return true;
} 
```

这行得通吗？我不确定何时使用`*`以及何时使用`&`. 有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T19:27:19.987

是的，这应该可行，但请注意，这不考虑小写字符，但请注意您忘记返回`true`成功。

此外，您的方法和成员默认标记为`private`。

您还应该`result`在失败的情况下进行初始化，否则如果您忘记检查返回类型，您将面临使用未初始化变量的风险。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:44:16.573

有几种方法：

你这样做的方式就是其中之一，虽然我建议使用指针而不是引用（`*`而不是`&`），因为使用引用，函数调用看起来像你正在传递一个值（`p.parseHexNibble(c)`），而指针版本更清楚你可以想要存储在其中的东西（`p.parseHexNibble(&c)`）。

另一种选择（这是我个人最喜欢的）与此相同`getc`：返回`int`包含`char`值 ( `0 <= i < 256`) 或`-1`发出错误信号的 an。在没有错误的情况下，`int`可以安全地进行类型转换和/或存储到`char`. （这假设它是`char`您想要返回的事实。）

第三种方法是返回一个包含布尔值和字符的结构（通过自己制作或使用`std::pair`等）。

在不相关的说明中，您应该使用`char`而不是`unsigned char`存储实际的字符值。`unsigned char`只能用于任意原始数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T19:37:09.593

首先，除非您需要 * 的特殊功能，否则请始终使用 &。在这种情况下，你不需要 pResult++ 来指向另一个字符，所以你不需要 *. 引用“就像一个已经打开间接的指针”（带有一长串微妙的异常），所以如果你只说 *pResult，就说 result。

接下来，我不想考虑当引用位于未分配的变量上时会发生什么。只需使用 unsigned char 结果 = 0; 让每个人都开心。健康的 C++ 编码风格总是会有一些额外的冗长。

接下来，像其他响应者所暗示的那样，*也在**parseHexNibble* () 中初始化结果（例如为 0），因此如果该方法没有找到可解析的字符，则它具有健康的非值。

接下来， chr - '0' 的结果是一个整数，然后您将其默默地向下转换为无符号字符。在某些情况下，结果应该是一个整数，即使您确实从不使用它的高位。

而且我怀疑您的最后一行应该返回 true。

*现在我的一般建议 A>现在*学习单元测试，而不是以后，并且 B> 还学习一门软语言，例如 Ruby，所以你知道*为什么*C++ 如此挑剔，但有充分的理由。

（顺便说一句，即使您的平台启用了异常，*也不要*使用它们来表示“此方法返回错误或带外结果”。这种方式很疯狂......）

# ios - iOS：无法编译连接：单元格中的 UIImageView

> ID：10839967
> 
> 赞同：0
> 
> 时间：2012-05-31T19:22:36.953
> 
> 标签：ios, xcode, uiimageview, cell

我正在使用 NSXMLParser 解析 XML 文件。单元格的数量取决于 XML 文件有多少条目。这一切都很好。

现在我向我的原型单元添加了一个 UIImageView，我想在其中加载我的 URL（在 XML 文件中声明）。

**我的情节提要错误：无法编译连接..**

我知道这是由于原型细胞。但是如何将 UIImageView 添加到所有单元格，其中可以显示来自 XML 的不同图像？

编辑：

这是我的代码，但这并不重要..每次我在界面生成器中连接 UIImageView 时，都会出现错误..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"productCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

XMLProductView *listedProduct = [appDelegate.products objectAtIndex:indexPath.row];

/*
NSOperationQueue *queue = [NSOperationQueue new];
NSInvocationOperation *operation = [[NSInvocationOperation alloc] init];
[queue addOperation:operation];
*/

NSString *imageURL = listedProduct.image;

NSData *imageData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:imageURL]];

UIImage *image = [UIImage imageWithData:imageData];

[imageView setImage:image];

cell.textLabel.text = listedProduct.name;
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

return cell; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:35:13.257

也许你的 imageView 是一个出口？它不应连接到原型单元。您可以在程序中添加 imageView：

```
 [cell addSubview:imageView]; 
```

或在情节提要中创建 imageView 并通过：

```
 [cell viewWithTag:theTagOfImageView]; 
```

编辑 2

我认为这确实是您所需要的。祝你好运！

[懒表图像](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009394)

# sql - 使用嵌套的 where 子句优化查询

> ID：10839969
> 
> 赞同：2
> 
> 时间：2012-05-31T19:22:53.977
> 
> 标签：sql, nested, firebird, where

我正在使用这种布局（Firebird 2.1）开发呼叫/服务台软件：

1.  通过选择一个区域和该区域中的一种呼叫类型来打开呼叫（表呼叫、区域和类型）

2.  为用户分配了配置文件，其中说明了他们可以查看或编辑呼叫的区域和类型（表用户和表配置文件）

3.  根据配置文件，用户可能能够查看或编辑某个区域的所有类型（表 profile_areas），或者只查看或编辑选定类型的呼叫（表 profile_types）

4.  用户可能有特殊权限，除了能够查看他们的配置文件中分配的区域外，还可以查看他们打开的任何呼叫（表配置文件上的布尔列）

我发布了一个精简的、列重命名的主要结构版本。我不认为我将能够发布真正的表格，它跨越了 300 多个字段和更多的 FK 表格。

这是关于调用和用户权限的最低限度的结构。

```
CREATE TABLE CALLS (
    CALLID INTEGER, /* PK */
    AREAID INTEGER, /* FK  ON TABLE AREAS */
    TYPEID INTEGER, /* FK  ON TABLE TYPES */
    USERID_OPENED_BY, /* FK  ON TABLE USERS */
    STATUS CHAR(1)
);

CREATE TABLE AREAS (
    AREAID INTEGER, /* PK */
    AREA_NAME VARCHAR(50),
);

CREATE TABLE TYPES (
    TYPEID INTEGER, /* PK */
    AREAID INTEGER, /* FK  ON TABLE AREAS */
    TYPE_NAME VARCHAR(50),
);

CREATE TABLE USERS (
    USERID INTEGER, /* PK */
    PROFILEID INTEGER, /* FK  ON TABLE PROFILES */
    USER_NAME VARCHAR(50),
);

CREATE TABLE PROFILES (
    PROFILEID INTEGER, /* PK */
    PROFILE_NAME VARCHAR(50),
    VIEW_ALL_CALLS_OPENED CHAR(1) /* if true, user can always view any calls he opened, regardless of area or type */
);

CREATE TABLE PROFILES_AREAS (
    PAREA_ID INTEGER, /* PK */
    PROFILEID INTEGER, /* FK  ON TABLE PROFILES */
    AREAID INTEGER (FK),
    CAN_VIEW_AREA CHAR(1), /* can view any calls on this area, regardless of types */
    CAN_EDIT_AREA CHAR(1) /* can edit any calls on this area, regardless of types */
);

CREATE TABLE PROFILES_TYPES (
    PTYPE_ID INTEGER, /* PK */
    PROFILEID INTEGER, /* FK  ON TABLE PROFILES */
    TYPEID INTEGER, /* FK  ON TABLE TYPES */
    CAN_VIEW_TYPE CHAR(1), /* can view any calls of this type */
    CAN_EDIT_TYPE CHAR(1) /* can edit any calls of this type */
); 
```

我们开始看到我们的第一批客户达到了 10+ 百万次呼叫，并且任何主要的简单查询都开始变得非常缓慢。

在分析查询计划时，所有似乎都正确索引，但索引读取的数量几乎总是显示 1000 万左右，即使查询总共返回 5 个左右的结果。

问题似乎是我们没有成功地使用连接来构建 where 子句，因为配置文件可能有许多不同的变体，这反过来又产生了我们必须处理的大量不同的 OR 子句。

最坏的情况是：

1.用户可以查看他打开的所有电话

2.用户可以查看部分区域，但不能查看全部

3.用户可以查看部分类型，但不是全部

这给我们留下了这样的东西（假设用户ID是“1”）：

```
SELECT CALLID FROM CALLS 
WHERE
    CALLS.USERID_OPENED_BY = 1 /* .User can view all calls he opened */
    OR  (
         CALLS.AREAID IN (1,2,3) /* areas the user can view, in his profile. we tried using a subselect here and things just went from bad to much, much worse */
         OR
         CALLS.TYPEID IN (1,2,3) /* types the user can view, in his profile. we tried using a subselect here and things just went from bad to much, much worse */
         ) 
```

而那种 where 子句正在扼杀性能。

有人建议我们尝试将 OR 拆分为不同的查询并与 union 相加，但许多其他因素使得这非常麻烦。

理想情况下，我们试图阻止我们的客户使用如此广泛的配置文件权限，但趋势似乎是对配置文件类型的更新和更模糊的需求（这就是实施“查看他打开的所有呼叫”的原因，因为例子）。

我们应该遵循什么更好的策略？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:20:06.073

这似乎太长了，无法发表评论。我的猜测是“或”正在扼杀当前索引结构的性能。

一种可能性是将查询分解为联合语句：

```
SELECT CALLID FROM CALLS
WHERE CALLS.USERID_OPENED_BY = 1 
union
SELECT CALLID FROM CALLS
WHERE CALLS.AREAID IN (1,2,3)
union 
SELECT CALLID FROM CALLS
WHERE CALLS.TYPEID IN (1,2,3) 
```

通常，我讨厌这种变化，但你可以看看它是否改进了执行计划。请注意，我在这里使用“联合”而不是“全部联合”来消除重复项。

但是，你说这是不可能的。

另一种想法是将区域和类型组合到同一个参考表中。这会将 WHERE 子句中的索引数量减少到两个，从而可能使连接更加优化。否则，您能否训练您的用户不要同时选择所有三个？应用程序真的需要这个功能吗？

# javascript - 输入字段内的标签在聚焦时消失

> ID：10839972
> 
> 赞同：0
> 
> 时间：2012-05-31T19:23:10.710
> 
> 标签：javascript, html, css, forms, styles

如何获取格式如下的标签：

```
<label for="email"> Email Address *</label>
<input id="email" type="text" name="email" value="" size="18"> 
```

在输入文本框内显示并在输入元素处于焦点或完整时消失？

我找到的解决方案需要我更改 html 代码，我不能这样做，因为它来自第三方小部件。我可以让标签显示在输入字段的顶部，但我不知道如何让它对输入字段发生的事情做出反应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:28:47.357

你想要的是一个占位符。它是一个 HTML5 属性，但 IE 和旧版浏览器尚不支持。要填写，那里有几个图书馆。我使用了[jquery.enablePlaceholder](https://github.com/marioizquierdo/enablePlaceholder)并且效果很好。

使用 JQuery，您将能够轻松隐藏/删除当前标签并使用其内容填充占位符属性（如果需要，插件将使用该属性）。

```
$(document).ready(function() {
    // Fetch the label and its text
    var placeholderText = $("label[for='email']").text();

    // Remove the unnecessary label
    $("label[for='email']").remove();

    // Set the placeholder attribute
    // and enable the plugin for broswer not supporting it
    $("#email").attr('placeholder', placeholderText).enablePlaceholder(); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:35:46.043

有没有办法覆盖输入`onFocus`功能？

如果是肯定的，有两种方法：

*   尝试`return false;`
*   在该函数上设置标签`display`属性。`inline`（不建议）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:56:12.533

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T20:14:51.063

如果您能够使用 jQuery：

```
$("#yourForm input[type='text']").each(function(){
    $(this).attr("placeholder", $(this).prev("label").text());
} 
```

# sql-server - 使用 SQL Server 服务代理的加密错误

> ID：10839974
> 
> 赞同：0
> 
> 时间：2012-05-31T19:23:14.863
> 
> 标签：sql-server, sql-server-2008, service-broker

我们有一个 Service Broker 应用程序，我们在其中在两台独立的非域计算机上的两个 SQL Server 实例之间进行通信。我们的一个测试配置在我们以前从未见过的模式下失败。类似配置的系统似乎工作正常，SSBDiagnose 没有表示任何问题。

以下是我们看到的错误：

一侧记录此错误：

> 接收数据时出错：'10054（现有连接被远程主机强行关闭。）'。

系统的另一端在 SQL Server 日志中记录这些错误：

> ```
>  2012-04-24 10:45:52.58 spid17s     Error: 9650, Severity: 16, State: 5.
>  2012-04-24 10:45:52.58 spid17s     A system cryptographic call failed during a Service Broker or Database Mirroring operation: system error '5(Access is denied.)'.
>  2012-04-24 10:45:52.59 spid17s     Error: 9641, Severity: 16, State: 12.
>  2012-04-24 10:45:52.59 spid17s     A cryptographic operation failed. This error indicates a serious problem with SQL Server. Check the SQL Server error log and the Windows event logs for further information.
>  2012-04-24 10:45:52.59 Logon       Service Broker login attempt failed with error:  Connection handshake failed. An OS call failed: (0) (null). State 87.'.  [CLIENT: 192.168.220.3] 
> ```

我们猜测问题出在我们的证书配置上，但是重新安装证书就像我们从头开始重建系统一样并没有帮助。

有没有人见过这些错误，或者知道他们指的是什么失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:32:08.490

我以前见过这种情况，它始终是一些流氓应用程序限制对 RSA 密钥库的访问的问题。我一直无法找到更改权限的罪魁祸首……这不是特定于 Service Broker 的，其他应用程序也遇到了同样的问题，例如。[RSA 密钥存储权限](https://stackoverflow.com/questions/1024834/rsa-key-store-permissions)

解决方案是授予 SQL Server 服务帐户对该目录`\ProgramData\Microsoft\Crypto\RSA\MachineKeys`和所有包含文件的读写权限。

如果问题仍然存在，请联系产品支持。

更新。是的，我记得：有一篇关于该问题的知识库文章，[Error message when you use Service Broker or database mirroring to connect to an instance of SQL Server 2005: "Connection handshake failed"](http://support.microsoft.com/kb/912412)。我应该记得，我为那个 KB 写了存根 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-18T09:48:33.030

这可能对某人有帮助。我们遇到了这样的问题（传输状态`sys.transmission_queue`为`Connection handshake failed. An OS call failed: (0) (null). State 87.`。原因是磁盘空间不足。

# java - 具有所有子对象的深拷贝 java 对象

> ID：10839975
> 
> 赞同：3
> 
> 时间：2012-05-31T19:23:31.233
> 
> 标签：java, clone, deep-copy

我想找到一种有效的方法来克隆一个大系统对象（在我的例子中是行星系统）及其所有子对象。子对象有坐标和类似的东西，行星等。所以我猜是深拷贝..

我尝试克隆和一些可序列化的黑客攻击，似乎没有工作，副本的子对象属性并没有保持不变，因为我在制作副本之后尝试打印副本的某些行星坐标并且行星继续绕行。

我的主要目标是保存整个系统对象位置、状态等的当前状态，并在复制完成后的任何给定时间恢复到它。希望我没有误会什么。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:26:39.810

我使用的一种方法是使用 Codehaus ( [http://x-stream.github.io/](http://x-stream.github.io/) ) 中的 xstream 包直接序列化/反序列化。就像是：

```
XStream xs = new XStream();
MyObjectTree to;

 ///from is an instance of MyObjectTree
to = (MyObjectTree)xs.fromXML(xs.toXML(from)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:28:23.800

如果您必须在以后保留对象并恢复状态，您应该使用 java 序列化或例如[db4o](http://www.db4o.com/)（这真的很容易使用）。

序列化也应该起作用——你在“universe”（和“universe”本身）中聚合的每个类都应该实现 Serializable 接口，并且你不想序列化的任何字段都应该标记为`transient`.

# silverlight - Silverlight - 扩展用户（或 AuthenticationService）

> ID：10839979
> 
> 赞同：0
> 
> 时间：2012-05-31T19:23:55.907
> 
> 标签：silverlight, authentication, extend

我需要访问我的用户的 UserId，所以我想这可以通过扩展 user.shared 和 AuthenticationService 来完成。我的目标是在客户端访问 UserId（这是一个“Guid”），默认情况下这是不可能的。

@User.shared 我添加了这些行：

```
/// <summary>
/// Gets the UserId of the user.
/// </summary>
public Guid UserId { get; private set; } 
```

这里是 AuthenticationService 类 - 我需要在这里插入什么才能返回 UserId ？

```
[EnableClientAccess]
public class AuthenticationService : AuthenticationBase<User> 
{ 
    //adapt GetAuthenticatdUser in order to be able to retrieve the UserId @ the client !
    protected override User GetAuthenticatedUser(System.Security.Principal.IPrincipal principal)
    {

        return base.GetAuthenticatedUser(principal);
        //what does this line above actually do ?!!?

        //INSERT statement which returns the UserId (Guid)
    }
} 
```

THX 给你们所有人——在这个话题上已经浪费了至少 1 个小时:-(。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T10:57:34.703

嗯...是的，我可以找到返回字符串的 FriendlyName。但是，我真的不明白这对用户 id 有何帮助？在这里我能找到：

```
 public partial class User
    {
        /// <summary>
        /// Returns the user display name, which by default is its FriendlyName.
        /// If FriendlyName is not set, the User Name is returned.
        /// </summary>
        public string DisplayName
        {
            get
            {
                if (!string.IsNullOrEmpty(this.FriendlyName))
                {
                    return this.FriendlyName;
                }
                else
                {
                    return this.Name;
                }
            }
        }

        /// <summary>
        /// Gets the UserId of the user.
        /// </summary>
        public Guid UsrId { get; private set; } //I added this line
        //this doesnt really work yet - don't know how to access the actual guid :-(
    }

/// <summary>
    /// Class containing information about the authenticated user.
    /// </summary>
    public partial class User : UserBase
    {
        //// NOTE: Profile properties can be added for use in Silverlight application.
        //// To enable profiles, edit the appropriate section of web.config file.
        ////
        //// public string MyProfileProperty { get; set; }

        /// <summary>
        /// Gets and sets the friendly name of the user.
        /// </summary>
        public string FriendlyName { get; set; }

    } 
```

Web.config 仅包含：

```
<properties>
        <add name="FriendlyName" />
      </properties> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T22:49:50.983

如果您查看 Silverlight 业务应用程序模板，就会发现有一个名为 FriendlyName 的 UserProfile。您可以在配置文件中填充 Guid。

# .net - .net 列表（列表（对象））扩展

> ID：10839983
> 
> 赞同：1
> 
> 时间：2012-05-31T19:24:02.727
> 
> 标签：.net, vb.net, extension-methods

为什么这个扩展：

```
<Extension()> _
    Public Function GetLastItem(ByVal l As List(Of Object)) As Object
        Return l(l.Count - 1)
    End Function 
```

为 type 的实例工作，`List(of Object)`但不是 type 的实例`List(Of List(Of Object))`？

Object 是 .net 中最通用的类​​型，那么`List(of Object)`an`Object`和扩展应该可以工作吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T19:25:43.513

不， a`List(Of List(Of Object))`不是 a `List(Of Object)`。例如，您可以向后者添加新`Object()`的，但不能向前者添加。

或者，正如我喜欢说的那样：一束香蕉和一个水果碗不一样。

不过，尚不完全清楚你为什么要写这个——为什么不直接使用[`Last()`](http://msdn.microsoft.com/en-us/library/bb358775.aspx)扩展方法`IEnumerable(Of T)`呢？（如果您担心的话，[那已经对 进行了优化。）`IList(Of T)`](http://msmvps.com/blogs/jon_skeet/archive/2010/12/29/reimplementing-linq-to-objects-part-11-first-single-last-and-the-ordefault-versions.aspx)

您*可以*使您的方法具有通用性-理想情况下是定位`IList(Of T)`而不是仅仅`List(Of T)`-但我建议您`Last()`改用...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:32:50.443

> Object 是 .net 中最通用的类​​型，所以 List(of Object) 是一个 Object 并且扩展应该可以工作......？

不，这需要协方差，[IEnumerable(Of Out T)](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx#Y0)支持但不支持`List(Of T)`。（注意“Of **Out** T”）有关详细信息，请参阅 MSDN 关于[泛型中的协变和逆变](http://msdn.microsoft.com/en-us/library/dd799517.aspx)的页面。

请注意，在这种情况下，LINQ 中已经有一个扩展方法：[Enumerable.Last](http://msdn.microsoft.com/en-us/library/bb358775.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T19:26:48.953

因为 a`List(Of List(Of Object))`不是`Object`.

像这样重写你的扩展：\

```
<Extension()>_
Public Function GetLastItem(ByVa l As List(Of T) As T
  Return l(l.Count - 1)
End Function 
```

事实上，这更笼统：

```
<Extension()>_
Public Function GetLastItem(ByVa l As IEnumerable(Of T) As T
  Return l.ElementAt(l.Count() - 1)
End Function 
```

当然，你应该只使用 Linq：

```
someListOfThings.Last(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-29T15:40:19.280

```
<Extension()> _
Public Function GetLastItem(Of T)(ByVal l As List(Of T)) As T
    Return l(l.Count - 1)
End Function 
```

在将其作为分机调用时，您无需指定 T。

# php - 在 MODx 革命中使用 1 个图像电视上传多个图像

> ID：10839984
> 
> 赞同：0
> 
> 时间：2012-05-31T19:24:24.690
> 
> 标签：php, content-management-system, modx-revolution

我想在资源页面上列出图像并显示为缩略图。现在我知道有一台可以上传图像的电视是“Image TV”，您可以在其中上传图像并在资源模板上调用电视名称。但是我想在一个资源上显示多个图像，这可能是动态的，就像要显示 4 个或更多图像一样。MODx 革命有没有办法使用单个图像电视上传多个图像？我发现了 MIGX，但它不允许上传，只需输入图像 URL。

答案非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T16:28:25.220

或者您可以创建 TV 并设置为*RichText*，输出*String*。

接下来，您将图像作为列表元素上传，在 css 中您需要设置此列表的样式并在具有 uniq id 的 div 中显示电视内容。

例如，我有带有动态图像数量的幻灯片，在 jQuery 中我添加了白框、阴影等。

这是jQuery代码：

```
<script>
$(document).ready(function () {
        /*  Images: rotate, frame, shadow  */
        $('.rotation ul li img').each(function() {
            var mleft = 0;
            var mtop = 0;
            if ($(this).is(":first-child")) {
            }
            else {
                mleft = parseInt($(this).prev().attr("width"), 10) + parseInt($(this).prev().css('margin-left'), 10);
                if (parseInt(mleft, 10) + parseInt($(this).attr("width"), 10) > 430) {
                    mleft = 0;
                    mtop = 250 - parseInt($(this).attr("height"), 10);
                }
            }
            var rand = Math.floor(Math.random() * 16) - 8;
            $(this).css({'border': '5px #ffffff solid', 'border-radius':'10px', 'transform': 'rotate(' + rand + 'deg)', '-moz-transform': 'rotate(' + rand + 'deg)', '-webkit-transform': 'rotate(' + rand + 'deg)', '-ms-transform': 'rotate(' + rand + 'deg)', 'box-shadow': '4px 4px 10px -3px #000000', 'float': 'left', 'margin': '-30px 0 0 -20px'});
        });
    });
</script> 
```

添加我需要旋转图像的类：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.rotation ul').addClass('image_rotation');
        $('.image_rotation').css("display","block");
        $('.image_rotation').innerfade({
            speed: 'slow',
            timeout: 10000,
            type: 'sequence'
        });
    });
</script> 
```

电视的html输出：

```
 <ul>
        <li><img src="assets/images/4.jpg" alt="" width="210" height="139" /><img src="assets/images/5.jpg" alt="" width="117" height="169" /><img src="assets/images/6.jpg" alt="" width="149" height="114" /></li>
        <li><img src="assets/images/2.jpg" alt="" width="184" height="187" /><img src="assets/images/3.jpg" alt="" width="167" height="179" /></li>
        <li><img src="assets/images/1.jpg" alt="" width="400" height="232" /></li>
    </ul> 
```

电视

```
<div class="rotation">[[TV]]
</div> 
```

所以我将图片上传为列表，每个 li 标签都是单独的图片组来旋转。您可以上传任意数量的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:39:07.823

您可以额外使用图库，并在您的电视中，指向您要显示的一组图像的图库 ID，然后使用前端的图库片段 [将 tv 值传递给模板] 进行显示。

# facebook - 这个 Facebook 功能的名称是什么？

> ID：10839985
> 
> 赞同：0
> 
> 时间：2012-05-31T19:24:26.090
> 
> 标签：facebook

我已经看到一些网站有一个 Facebook 框（非常像 likebox），当我登录 Facebook 时，它会显示使用该网站或网站应用程序的朋友。

我找不到有关此框的任何文档（例如[http://developers.facebook.com/docs/plugins/](http://developers.facebook.com/docs/plugins/)）。有谁知道它的名字是什么，我在哪里可以找到有关它的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T20:03:42.420

我认为这个名字是[Facepile](http://developers.facebook.com/docs/reference/plugins/facepile/)。

# wpf - 版本兼容的 XML 序列化

> ID：10839986
> 
> 赞同：0
> 
> 时间：2012-05-31T19:24:35.003
> 
> 标签：wpf, xml, serialization, xml-serialization

Reader C# 项目需要将 ~POCO 保存到文件中。但我们刚刚出道，变化经常发生。我们的软件已经被少数客户使用（坚持使用）。出于多种原因，我更喜欢使用 XML。

我检查了许多 xml 序列化库。

*   许多库存储特定的类型和版本。我不需要那个。
*   许多库不给我们自己序列化的可能性：即我们需要一个自定义加载/保存数据的接口（我看到很多优点**）
*   一些库迫使我们有空的构造函数
*   一些库只管理公共属性
*   一些库对类型有很多限制（不支持字典，...）

**（加载/保存数据界面的优势）

*   更容易管理多个版本
*   如果需要，可以进行硬编码转换（x 类 -> y 类，...）
*   更容易不保留旧代码

我强烈认为，根据我的需要，我们最好使用旧方法来服务：有点像 C++ 中的反序列化。我认为我们会更好地服务于使我们能够手动添加字段和字段名称而不是使用属性的东西。

有点儿：

```
void XmlDeserialize(XmlReader xmlReader)
{
  xmlReader.Load((n)=>Version(n)); // or just: _version = xmlReader.LoadInt("Version"); 
  xmlReader.Load((n)=>Name(n));
  xmlReader.Load((n)=>EmployeeId(n));

    if (Version ==2)
                    …

    If (version == 3)
                    … 
```

我发现最能满足我的需求的是：支持 IExtensibleDataObject 的 DataContractSerializer，但使用起来很麻烦。

我问自己，我是不是到处都错了？我不可能是唯一有这种需求（或这种愿景）的人。为什么没有人为此编写任何库，而我在某个地方错过了什么？

我想错了什么？你有什么建议吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T22:05:52.847

你必须为此使用 XML reader.load 吗？创建代表您的 XML 数据的业务对象，然后反序列化该对象要容易得多，如下所示（抱歉，我只找到了我的 vb.net 版本）：

```
Public Shared Function ReadFromString(ByVal theString As String, ByVal encoding As System.Text.Encoding, ByVal prohibitDTD As Boolean) As T
        Dim theReturn As T = Nothing
        Dim s As System.Xml.Serialization.XmlSerializer
        s = New System.Xml.Serialization.XmlSerializer(GetType(T))

        Dim theBytes As Byte() = encoding.GetBytes(theString)
        Using ms As New IO.MemoryStream(theBytes)
            Using sTr As New StreamReader(ms, encoding)
                Dim sttng As New XmlReaderSettings
                'sttng.ProhibitDtd = prohibitDTD
                If Not prohibitDTD Then
                    sttng.DtdProcessing = DtdProcessing.Ignore
                    sttng.XmlResolver = Nothing
                Else
                    sttng.DtdProcessing = DtdProcessing.Prohibit
                End If
                Using r As XmlReader = XmlReader.Create(sTr, sttng)
                    theReturn = CType(s.Deserialize(r), T)
                End Using
            End Using
        End Using

        Return theReturn
    End Function 
```

如果您愿意，您可以删除 xmlreadersettings 和编码。但是通过这种方式，您可以为您拥有的每个版本保留不同的业务对象吗？此外，如果您只是添加（而不是更改/删除）对象，您仍然可以为所有版本使用最新的业务对象，而忽略缺少的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T19:17:34.813

我最终决定像这种 [用法](https://stackoverflow.com/questions/19054730/does-xmlserializer-support-property-name-changes-version-tolerant)一样使用 XmlSerialization，但我讨厌被迫创建默认构造函数并且无法序列化成员（私有或公共）。

我还决定在需要非常高的速度时使用 ProtoContract。

但我更喜欢的是 DataContractSerializer，它提供 xml 格式（更易于调试），不需要默认构造函数并且可以序列化任何成员。

# java - 我正在尝试填充一个三角形

> ID：10839988
> 
> 赞同：-1
> 
> 时间：2012-05-31T19:24:37.780
> 
> 标签：java, geometry, shape, fill

我正在尝试填充一个三角形。我尝试自己使用

```
g.fillPolygon(Triangle.x1, Triangle.x2, Triangle.x3, Triangle.y1, 
         Triangle.y2, Triangle.y3); 
```

但我遇到了一些错误。谁能帮我这个？

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.applet.*;

public class Vehicle extends JFrame

 {
    final int WIDTH = 900; int HEIGHT = 650;

public Vehicle()
    {
        //the following code creates the JFrame
        super("Radical Racing");
        setSize(WIDTH,HEIGHT);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

}
public void paint(Graphics g)
{

    g.setColor(Color.DARK_GRAY);
    g.fillRect(0,0,WIDTH,HEIGHT);

    int x1, y1 ,x2, y2, x3,y3;
    x1 = x2 = x3 = 200;
    y1 = y2 = y3 = 390;

    {
          triangle (g, x1=174, y1, x2=204, y2, x3=189, y3=360);

    }
    g.setColor(Color.green);
    g.fillPolygon(Triangle.x1, Triangle.x2, Triangle.x3, Triangle.y1, Triangle.y2, Triangle.y3);
    triangle(g,x1,y1,x2,y2,x3,y3);
}

void triangle(Graphics g,int x1,int y1,
        int x2, int y2, int x3, int y3){
      g.drawLine (x1, y1, x2, y2);
      g.drawLine (x2, y2, x3, y3);
      g.drawLine (x3, y3, x1, y1);
}

public static void main(String[]args)
    {
        new Vehicle();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T20:08:50.893

不客气，我建议有时使用 oracle java api。它对开发人员非常友好。:)

您没有任何带有静态 x1... 字段的 Triangle 类，那么为什么是 Triangle.x1...？:) 为什么自己的块来调用三角形（）？

```
import javax.swing.*;
import javax.swing.event.*;
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
public class Vehicle extends JFrame {

    final int WIDTH = 900;
          int HEIGHT = 650;

    public Vehicle() {
        // the following code creates the JFrame
        super("Radical Racing");
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setVisible(true);

    }
    public void paint(Graphics g) {

        g.setColor(Color.DARK_GRAY);
        g.fillRect(0, 0, WIDTH, HEIGHT);

        int x1, y1, x2, y2, x3, y3;
        x1 = x2 = x3 = 200;
        y1 = y2 = y3 = 390;
        triangle(g, x1 = 174, y1, x2 = 204, y2, x3 = 189, y3 = 360);

        g.setColor(Color.green);
        g.fillPolygon(new int[] {x1, x2, x3}, new int[] {y1, y2, y3}, 3);
        triangle(g, x1, y1, x2, y2, x3, y3);
    }

    void triangle(Graphics g, int x1, int y1, int x2, int y2, int x3, int y3) {
        g.drawLine(x1, y1, x2, y2);
        g.drawLine(x2, y2, x3, y3);
        g.drawLine(x3, y3, x1, y1);
    }

    public static void main(String[] args) {
        new Vehicle();
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T20:47:41.373

nvrfrgt 答案有效并修复了您遇到的任何错误（给了他+1），但是您可以清理一些其他值得牢记的事情（并且评论太长了）。

首先，我认为你的意思`HEIGHT`是最终？否则将其设为小写。

如果您正在绘制一堆赛车三角形或其他东西，那么稍后可能会产生影响的性能事物 - 您正在绘制相同的三角形两次（永远不要更改您的 x 和 y 值），因此其中一个被浪费了。

```
triangle (g, x1=174, y1, x2=204, y2, x3=189, y3=360);
...
triangle(g, x1, y1, x2, y2, x3, y3); 
```

你如何初始化你的 x 和 y 值也不是最干净的。您将它们全部设置为特定数字，然后转身并在下一行中更改它们。为什么要有初始值？无论如何，下面的代码片段对我来说更有意义（尽管它看起来还是有点[太神奇了](http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Unnamed_numerical_constants)）

```
int x1 = 174; int x2 = 204; int x3 = 189;
int y1 = 390; int y2 = 390; int y3 = 360;
triangle(g, x1, y1, x2, y2, x3, y3); 
```

如果您要绘制三角形并用相同的颜色填充它，那么绘制线条对您来说可能是不必要的（产生 1 个像素的差异？）。如果是这种情况，您可以删除 triangle() 调用，或者将您的三角形实现替换为填充多边形。最后，像这样的东西更圆滑（尽管仍然可以使用）：

```
public class Vehicle extends JFrame {

  final int WIDTH = 900;
  final int HEIGHT = 650; // Made this final

  public Vehicle() {
      // the following code creates the JFrame
      super("Radical Racing");
      setSize(WIDTH, HEIGHT);
      setDefaultCloseOperation(EXIT_ON_CLOSE);
      setVisible(true);
  }

  public void paint(Graphics g) {

    g.setColor(Color.DARK_GRAY);
    g.fillRect(0, 0, WIDTH, HEIGHT);

    int x1 = 174; int x2 = 204; int x3 = 189;
    int y1 = 390; int y2 = 390; int y3 = 360;
    g.setColor(Color.green);
    // Got rid of redundant drawing
    triangle(g, x1, y1, x2, y2, x3, y3);
  }

  void triangle(Graphics g, int x1, int y1, int x2, int y2, int x3, int y3) {
    // Left both the lines and the fill so you could play with color or something.
    g.drawLine(x1, y1, x2, y2);
    g.drawLine(x2, y2, x3, y3);
    g.drawLine(x3, y3, x1, y1);
    g.fillPolygon(new int[] {x1, x2, x3}, new int[] {y1, y2, y3}, 3);
  }

  public static void main(String[] args) {
    // Want to save this as something so you can move it around later
    Vehicle greenTriangle = new Vehicle();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-23T08:14:32.227

第一组颜色：

```
g.setColor(R, G, B); 
```

然后填写：

```
g.fillTriangle(x1, y1, x2, y2, x3, y3); 
```

# javascript - 为什么我不能将“window.location.reload”作为参数传递给 setTimeout？

> ID：10839989
> 
> 赞同：51
> 
> 时间：2012-05-31T19:24:43.053
> 
> 标签：javascript, cross-browser

我希望通过以下代码行深入了解我在 Safari 和 Chrome 中看到的错误：

`setTimeout(window.location.reload, 250);`

铬报告：
`Uncaught TypeError: Illegal invocation`

和野生动物园：
`TypeError: Type error`

在 FireFox 中，代码运行良好。此外，这段代码在三种浏览器中都运行良好：

```
setTimeout((function() {
  window.location.reload();
}), 250); 
```

Chrome 和 Safari 对此代码没有任何问题：

```
var say_hello = function () { alert("hello") };  
setTimeout(say_hello, 250); 
```

`window.location.reload`导致此错误的特别之处是什么？

（不确定它是否有用，但这里有一个[jsfiddle](http://jsfiddle.net/goggin13/SQ7az/5/)说明了这一点）

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-31T19:29:33.373

因为`reload()`需要`window.location`作为`this`. 换句话说 - 它是一种方法`window.location`。当你说：

```
var fun = window.location.reload;

fun(); 
```

您正在调用`reload()`没有任何`this`引用（或隐式`window`引用）的函数。

这应该有效：

```
setTimeout(window.location.reload.bind(window.location), 250); 
```

该`window.location.reload.bind(window.location)`部分的意思是：获取`window.location.reload`函数并返回一个函数，该函数在调用时将`window.location`用作`this`内部引用`reload()`。

# 也可以看看

*   [如何将参数传递给使用 setTimeout 调用的函数？](https://stackoverflow.com/questions/10572673)
*   [为什么console.log 在作为参数传递给forEach 时不起作用？](https://stackoverflow.com/questions/9639167)
*   [在 javascript 原型事件处理程序中保留“this”引用](https://stackoverflow.com/questions/8100469)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-09-24T06:51:04.787

还有另一种方法可以做到这一点，非常简单，不需要额外的步骤、绑定或类似的东西。当你在 JS 中使用箭头函数而不是常用函数时，`this`上下文是包括在内的。因此，您可以轻松地执行以下操作：

```
setTimeout(() => window.location.reload(), 250); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T19:31:14.080

因为在调用时`this`必须绑定。这与尝试相同：`location``reload`

```
var reload = window.location.reload;
reload(); 
```

`this`将`window`处于非严格模式和`undefined`严格模式，两者均无效。

在非旧浏览器中，您可以改为：

`reload.call( location )`

或在您的示例中：

`setTimeout( window.location.reload.bind( window.location ), 1000 )`

不过，较旧的 IE 不支持对主机对象的显式绑定。

您还可以为一些非通用的本机方法获得此信息，例如：

```
var a = function(){}.toString;
a();
TypeError: Function.prototype.toString is not generic 
```

有些是通用的：

```
var fakeArray = {0:1,1:2,length:2};
fakeArray.join = [].join;
fakeArray.join( " " );
"1 2" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T19:33:12.097

这失败了，因为您在传递时缺少`location`上下文（函数的`this`）。您必须先`bind`了解上下文，然后才能像这样使用它，例如使用[underscore.js 绑定方法](http://underscorejs.org/#bind)

```
var boundReload = _.bind(window.location.reload, window.location);
setTimeout(boundReload, 500) 
```

这与通常从包含对象调用的任何其他函数相同`console.log`

# jquery - jQuery Fancybox 不适用于第一个 ajax 请求

> ID：10839993
> 
> 赞同：0
> 
> 时间：2012-05-31T19:25:14.077
> 
> 标签：jquery, ajax, fancybox

我正在使用 jQuery fancybox 来显示和隐藏 ajax 请求的加载动画。

```
$(function(){
  $.ajaxSetup({
    beforeSend: function() {
      $.fancybox.showLoading();
    },
    complete: function(){
      $.fancybox.hideLoading();
    }
  });
}); 
```

它不适用于第一个 ajax 请求。但它适用于后续请求。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:30:41.770

我建议使用正确的全局 ajax 事件。

```
$(document).ajaxStart(function(){
    $.fancybox.showLoading();
}).ajaxStop(function(){
    $.fancybox.hideLoading();
}); 
```

# opengl - 线性/非线性纹理映射扭曲的四边形

> ID：10839998
> 
> 赞同：8
> 
> 时间：2012-05-31T19:25:32.943
> 
> 标签：opengl, textures, texture-mapping

在我[之前的问题](https://stackoverflow.com/questions/10832909/quad-strip-texturing-distortion)中，确定在对四边形进行纹理处理时，面部被分解为三角形，并且纹理坐标以仿射方式插值。

不幸的是，我不知道如何解决这个问题。提供的[链接](http://www.xyzw.us/~cass/qcoord/)很有用，但没有达到预期的效果。作者总结道：“请注意，图像看起来好像是一个延伸到远处的长矩形四边形......它可能会变得相当混乱......因为这会产生“错误的深度感知”。”

我想做的是让纹理保留纹理的原始缩放。例如，在梯形情况下，我希望纹素的垂直间距相同（使用绘图程序创建的示例）：
![](../Images/5c69a5c12b794dd63a392b174163f69a.png)
请注意，由于垂直间距相同，但四边形的明显变形，纹理中的直线空间不再是世界空间中的直线。因此，我认为所需的映射是非线性的。

问题是：这在*固定功能*管道中是否可能？我什至不确定更一般的四边形的“正确答案”是什么。我想插值函数会很快变得非常复杂，我意识到“保留原始缩放”并不完全是一种算法。世界空间三角形在纹理空间中不再是线性的。

顺便说一句，我不太*了解*第 3^和第 4^(纹理)坐标；如果有人可以将我指向一个资源，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T10:26:44.707

可以在 Nathan Reed 的博客上找到使用现代 gpu-api 的解决方案的最佳方法

[http://www.reedbeta.com/blog/2012/05/26/quadrilateral-interpolation-part-1/](http://www.reedbeta.com/blog/2012/05/26/quadrilateral-interpolation-part-1/)

但是您最终会遇到与透视图的原始问题类似的问题:(我尝试解决它，并在获得解决方案后发布解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T20:56:21.480

哇，这是一个相当复杂的问题。基本上，您并没有将观点带入方程式。您最终的 x,y 坐标除以旋转时获得的 z 值。这意味着距离相机越远，纹理空间 (s,t) 的变化就越小。

但是，通过这样做，您可以有效地随着 z 的增加进行线性插值。我在 1997 年写了一个[ANCIENT 演示](http://www.trueharmoniccolours.co.uk/DXcoding.htm)，这就是所谓的“仿射”纹理映射。

事情是因为您将 x 和 y 除以 z，您实际上需要使用“1/z”插入您的值。这适当地考虑了正在应用的透视（当您将 x 和 y 除以 z 时）。因此，您最终会得到[“透视正确”的纹理映射](http://en.wikipedia.org/wiki/Texture_mapping#Perspective_correctness)。

我希望我能比这更详细，但在过去 15 多年的酗酒中，我的记忆变得有点模糊；）其中一天我很想重新访问软件渲染，因为我确信OpenCL 之类的东西即将起飞，它很快就会成为编写渲染引擎的更好方法！

无论如何，希望那是一些帮助和道歉，我不能提供更多帮助。

（顺便说一句，当我在 15 年前弄清楚所有这些渲染时，我很想拥有现在可用的所有资源，互联网使我的工作和生活变得如此轻松。从第一原则解决所有问题非常痛苦. 我记得最初尝试过 1/z 插值，但随着它越来越近，它变得越来越小，当我应该颠倒一些东西时我放弃了它......直到今天，随着我的知识成倍增加，我仍然非常希望我写了一个“慢”但完全正确的渲染器......有一天我会解决它;））

祝你好运！

# php - PHP/Apache - 构建一个不同的 URL，可以吗？

> ID：10839999
> 
> 赞同：0
> 
> 时间：2012-05-31T19:25:35.370
> 
> 标签：php, mod-rewrite

我正在研究如何构建不同的 URL，我想知道是否可以替换 PHP 在 URL 中使用的查询字符串/问号符号“？” 变成别的东西？例如感叹号“！”

www.example.com!foo=1

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:39:57.807

当然可以，但是您需要重写规则来告诉服务器如何为它们提供服务。而且 PHP 不会为您自动解析它们，因此 $_GET/$_POST/$_REQUEST 变量不会被设置，您必须自己从 $_SERVER['REQUEST_URI'] 解析它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:55:31.353

您不必为此使用 mod_rewrite，因为您仍然可以根据您的配置使用 $_SERVER["PATH_INFO"] 或 $_SERVER["REQUEST_URI"] 解释 url。只需在 ! 用[爆炸](http://de.php.net/manual/de/function.explode.php)并用[parse_str](http://php.net/manual/de/function.parse-str.php "parse_str")解析它。如果这有意义，这是您的决定。

您也应该可以用 htaccess 替换它，但我无法测试它，因为我没有运行 atm 的 apache。一定是这样的。

```
RewriteEngine on
RewriteBase /
RewriteRule ^!(.*)$ http://domain.com/?$1 [R,NC] 
```

如果可行，请从规则中删除“R”。