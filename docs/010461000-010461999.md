# StackOverflow 问答 10461000-10461999

# objective-c - 如何更改导航项（按钮）的背景图像？

> ID：10461004
> 
> 赞同：1
> 
> 时间：2012-05-05T10:34:16.460
> 
> 标签：objective-c, xcode, uinavigationitem

我想为每个导航项（按钮）（通用）设置背景图像。

这些图像应该看起来如何？

是否有固定尺寸或可以创建重复的背景图像？

那么如何以编程方式更改此背景图像？

感谢帮助

更新：

我找到了用于更改此按钮背景的代码，但它不起作用。

```
UIImage *barButton = [UIImage imageNamed:@"button_background.png"];
    [[UIBarButtonItem appearance] setBackgroundImage:barButton forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

而且我不知道应该是哪个维度。

PS我想改变按钮的背景，就像你可以改变背景颜色（self.navigation.controller.nvigationBar.tintColor..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:53:38.583

下面的代码可能会解决您的问题

```
UIButton *backBtn     = [UIButton buttonWithType:UIButtonTypeCustom];  
UIImage *backBtnImage = [UIImage imageNamed:@"button_background.png"]  ;  
[backBtn setBackgroundImage:backBtnImage forState:UIControlStateNormal];  
[backBtn addTarget:self action:@selector(goback) forControlEvents:UIControlEventTouchUpInside];  
backBtn.frame = CGRectMake(0, 0, 54, 30);  
UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithCustomView:backBtn] ;  
self.navigationItem.leftBarButtonItem = cancelButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:50:28.503

恐怕你需要创建自定义后退按钮

检查此代码

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] 
                               initWithImage:[UIImage imageNamed:@"yourImage.png"]
                                       style:UIBarButtonItemStyleBordered 
                                      target:nil 
                                      action:nil];

self.navigationItem.backBarButtonItem = backButton;
[backButton release]; 
```

让我知道它是否有效

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T13:45:40.330

类别呢？例如，您可以这样做：

```
@interface UIBarButtonItem(JFAdditions)

- (id)initWithTitle:(NSString *)title image:(UIImage*)img;//add target and action if need

@end

 @implementation UIBarButtonItem(JFAdditions)

 - (id)initWithTitle:(NSString *)title image:(UIImage*)img
 {
        UIButton * btn = [UIButton buttonWithType:UIButtonTypeCustom];
        //add background image and text on button, target and action if need, also
    self = [self initWithCustomView:btn];

    return self;
} 
```

# android - 如何从不同的线性布局中对 RadioButton 进行分组？

> ID：10461005
> 
> 赞同：101
> 
> 时间：2012-05-05T10:34:17.960
> 
> 标签：android, radio-button, android-linearlayout, radio-group

我想知道是否可以将每个单曲分组`RadioButton`到一个独特的`RadioGroup` 维护相同的结构中。我的结构如下所示：

*   线性布局_main
    *   线性布局_1
        *   单选按钮1
    *   线性布局_2
        *   单选按钮2
    *   线性布局_3
        *   单选按钮3

如您所见，现在每个`RadioButton`都是不同的孩子`LinearLayout`。我尝试使用下面的结构，但它不起作用：

*   无线电集团
    *   线性布局_main
        *   线性布局_1
            *   单选按钮1
        *   线性布局_2
            *   单选按钮2
        *   线性布局_3
            *   单选按钮3

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-07T16:25:12.027

似乎 Google/Android 的优秀人士认为，当您使用 RadioButtons 时，您不需要 Android UI/布局系统的所有其他方面所带来的灵活性。简单地说：他们不希望您嵌套布局和单选按钮。叹。

所以你必须解决这个问题。这意味着您必须自己实现单选按钮。

这真的不太难。在您的 onCreate() 中，使用自己的 onClick() 设置 RadioButton，以便在激活它们时，它们 setChecked(true) 并对其他按钮执行相反的操作。例如：

```
class FooActivity {

    RadioButton m_one, m_two, m_three;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        ...
        m_one = (RadioButton) findViewById(R.id.first_radio_button);
        m_two = (RadioButton) findViewById(R.id.second_radio_button);
        m_three = (RadioButton) findViewById(R.id.third_radio_button);

        m_one.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                m_one.setChecked(true);
                m_two.setChecked(false);
                m_three.setChecked(false);
            }
        });

        m_two.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                m_one.setChecked(false);
                m_two.setChecked(true);
                m_three.setChecked(false);
            }
        });

        m_three.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                m_one.setChecked(false);
                m_two.setChecked(false);
                m_three.setChecked(true);
            }
        });

        ...     
    } // onCreate() 

} 
```

是的，我知道——老派。但它有效。祝你好运！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-01-13T23:04:36.303

使用我创建的这个类。它将在您的层次结构中找到所有可检查的孩子。

```
import java.util.ArrayList;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Checkable;
import android.widget.LinearLayout;

public class MyRadioGroup extends LinearLayout {

private ArrayList<View> mCheckables = new ArrayList<View>();

public MyRadioGroup(Context context) {
    super(context);
}

public MyRadioGroup(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public MyRadioGroup(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
public void addView(View child, int index,
        android.view.ViewGroup.LayoutParams params) {
    super.addView(child, index, params);
    parseChild(child);
}

public void parseChild(final View child)
{
    if(child instanceof Checkable)
    {
        mCheckables.add(child);
        child.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                for(int i = 0; i < mCheckables.size();i++)
                {
                    Checkable view = (Checkable) mCheckables.get(i);
                    if(view == v)
                    {
                        ((Checkable)view).setChecked(true);
                    }
                    else
                    {
                        ((Checkable)view).setChecked(false);
                    }
                }
            }
        });
    }
    else if(child instanceof ViewGroup)
    {
        parseChildren((ViewGroup)child);
    }
}

public void parseChildren(final ViewGroup child)
{
    for (int i = 0; i < child.getChildCount();i++)
    {
        parseChild(child.getChildAt(i));
    }
}
} 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-17T22:35:37.680

好吧，我写了这个简单的类。

像这样使用它：

```
// add any number of RadioButton resource IDs here
GRadioGroup gr = new GRadioGroup(this, 
    R.id.radioButton1, R.id.radioButton2, R.id.radioButton3); 
```

或者

```
GRadioGroup gr = new GRadioGroup(rb1, rb2, rb3);
// where RadioButton rb1 = (RadioButton) findViewById(R.id.radioButton1);
// etc. 
```

例如，您可以在 Activity 的 onCreate() 中调用它。无论`RadioButton`您单击哪个，其他都将变为未选中状态。另外，没关系，如果其中一些`RadioButtons`在 some 内部`RadioGroup`，或者不在。

这是课程：

```
package pl.infografnet.GClasses;

import java.util.ArrayList;
import java.util.List;

import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewParent;
import android.widget.RadioButton;
import android.widget.RadioGroup;

public class GRadioGroup {

    List<RadioButton> radios = new ArrayList<RadioButton>();

    /**
     * Constructor, which allows you to pass number of RadioButton instances,
     * making a group.
     * 
     * @param radios
     *            One RadioButton or more.
     */
    public GRadioGroup(RadioButton... radios) {
        super();

        for (RadioButton rb : radios) {
            this.radios.add(rb);
            rb.setOnClickListener(onClick);
        }
    }

    /**
     * Constructor, which allows you to pass number of RadioButtons 
     * represented by resource IDs, making a group.
     * 
     * @param activity
     *            Current View (or Activity) to which those RadioButtons 
     *            belong.
     * @param radiosIDs
     *            One RadioButton or more.
     */
    public GRadioGroup(View activity, int... radiosIDs) {
        super();

        for (int radioButtonID : radiosIDs) {
            RadioButton rb = (RadioButton)activity.findViewById(radioButtonID);
            if (rb != null) {
                this.radios.add(rb);
                rb.setOnClickListener(onClick);
            }
        }
    }

    /**
     * This occurs everytime when one of RadioButtons is clicked, 
     * and deselects all others in the group.
     */
    OnClickListener onClick = new OnClickListener() {

        @Override
        public void onClick(View v) {

            // let's deselect all radios in group
            for (RadioButton rb : radios) {

                ViewParent p = rb.getParent();
                if (p.getClass().equals(RadioGroup.class)) {
                    // if RadioButton belongs to RadioGroup, 
                    // then deselect all radios in it 
                    RadioGroup rg = (RadioGroup) p;
                    rg.clearCheck();
                } else {
                    // if RadioButton DOES NOT belong to RadioGroup, 
                    // just deselect it
                    rb.setChecked(false);
                }
            }

            // now let's select currently clicked RadioButton
            if (v.getClass().equals(RadioButton.class)) {
                RadioButton rb = (RadioButton) v;
                rb.setChecked(true);
            }

        }
    };

} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2018-03-22T11:46:55.667

这是我基于[@lostdev 解决方案](https://stackoverflow.com/questions/10461005/how-to-group-radiobutton-from-different-linearlayouts/14309274#14309274)和实现的解决方案`RadioGroup`。它是一个经过修改的 RadioGroup，可与嵌套在子布局内的 RadioButtons（或其他 CompoundButtons）一起使用。

```
import android.content.Context;
import android.os.Build;
import android.support.annotation.IdRes;
import android.support.annotation.Nullable;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CompoundButton;
import android.widget.LinearLayout;
import android.widget.RadioButton;

import java.util.concurrent.atomic.AtomicInteger;

/**
 * This class is a replacement for android RadioGroup - it supports
 * child layouts which standard RadioGroup doesn't.
 */
public class RecursiveRadioGroup extends LinearLayout {

    public interface OnCheckedChangeListener {
        void onCheckedChanged(RecursiveRadioGroup group, @IdRes int checkedId);
    }

    /**
     * For generating unique view IDs on API < 17 with {@link #generateViewId()}.
     */
    private static final AtomicInteger sNextGeneratedId = new AtomicInteger(1);

    private CompoundButton checkedView;

    private CompoundButton.OnCheckedChangeListener childOnCheckedChangeListener;

    /**
     * When this flag is true, onCheckedChangeListener discards events.
     */
    private boolean mProtectFromCheckedChange = false;

    private OnCheckedChangeListener onCheckedChangeListener;

    private PassThroughHierarchyChangeListener mPassThroughListener;

    public RecursiveRadioGroup(Context context) {
        super(context);
        setOrientation(HORIZONTAL);
        init();
    }

    public RecursiveRadioGroup(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    public RecursiveRadioGroup(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    private void init() {
        childOnCheckedChangeListener = new CheckedStateTracker();
        mPassThroughListener = new PassThroughHierarchyChangeListener();

        super.setOnHierarchyChangeListener(mPassThroughListener);
    }

    @Override
    public void setOnHierarchyChangeListener(OnHierarchyChangeListener listener) {
        mPassThroughListener.mOnHierarchyChangeListener = listener;
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();

        // checks the appropriate radio button as requested in the XML file
        if (checkedView != null) {
            mProtectFromCheckedChange = true;
            setCheckedStateForView(checkedView, true);
            mProtectFromCheckedChange = false;
            setCheckedView(checkedView);
        }
    }

    @Override
    public void addView(View child, int index, ViewGroup.LayoutParams params) {
        parseChild(child);

        super.addView(child, index, params);
    }

    private void parseChild(final View child) {
        if (child instanceof CompoundButton) {
            final CompoundButton checkable = (CompoundButton) child;

            if (checkable.isChecked()) {
                mProtectFromCheckedChange = true;
                if (checkedView != null) {
                    setCheckedStateForView(checkedView, false);
                }
                mProtectFromCheckedChange = false;
                setCheckedView(checkable);
            }
        } else if (child instanceof ViewGroup) {
            parseChildren((ViewGroup) child);
        }
    }

    private void parseChildren(final ViewGroup child) {
        for (int i = 0; i < child.getChildCount(); i++) {
            parseChild(child.getChildAt(i));
        }
    }

    /**
     * <p>Sets the selection to the radio button whose identifier is passed in
     * parameter. Using -1 as the selection identifier clears the selection;
     * such an operation is equivalent to invoking {@link #clearCheck()}.</p>
     *
     * @param view the radio button to select in this group
     * @see #getCheckedItemId()
     * @see #clearCheck()
     */
    public void check(CompoundButton view) {
        if(checkedView != null) {
            setCheckedStateForView(checkedView, false);
        }

        if(view != null) {
            setCheckedStateForView(view, true);
        }

        setCheckedView(view);
    }

    private void setCheckedView(CompoundButton view) {
        checkedView = view;

        if(onCheckedChangeListener != null) {
            onCheckedChangeListener.onCheckedChanged(this, checkedView.getId());
        }
    }

    private void setCheckedStateForView(View checkedView, boolean checked) {
        if (checkedView != null && checkedView instanceof CompoundButton) {
            ((CompoundButton) checkedView).setChecked(checked);
        }
    }

    /**
     * <p>Returns the identifier of the selected radio button in this group.
     * Upon empty selection, the returned value is -1.</p>
     *
     * @return the unique id of the selected radio button in this group
     * @attr ref android.R.styleable#RadioGroup_checkedButton
     * @see #check(CompoundButton)
     * @see #clearCheck()
     */
    @IdRes
    public int getCheckedItemId() {
        return checkedView.getId();
    }

    public CompoundButton getCheckedItem() {
        return checkedView;
    }

    /**
     * <p>Clears the selection. When the selection is cleared, no radio button
     * in this group is selected and {@link #getCheckedItemId()} returns
     * null.</p>
     *
     * @see #check(CompoundButton)
     * @see #getCheckedItemId()
     */
    public void clearCheck() {
        check(null);
    }

    /**
     * <p>Register a callback to be invoked when the checked radio button
     * changes in this group.</p>
     *
     * @param listener the callback to call on checked state change
     */
    public void setOnCheckedChangeListener(RecursiveRadioGroup.OnCheckedChangeListener listener) {
        onCheckedChangeListener = listener;
    }

    /**
     * Generate a value suitable for use in {@link #setId(int)}.
     * This value will not collide with ID values generated at build time by aapt for R.id.
     *
     * @return a generated ID value
     */
    public static int generateViewId() {
        for (; ; ) {
            final int result = sNextGeneratedId.get();
            // aapt-generated IDs have the high byte nonzero; clamp to the range under that.
            int newValue = result + 1;
            if (newValue > 0x00FFFFFF) newValue = 1; // Roll over to 1, not 0.
            if (sNextGeneratedId.compareAndSet(result, newValue)) {
                return result;
            }
        }
    }

    private class CheckedStateTracker implements CompoundButton.OnCheckedChangeListener {

        @Override
        public void onCheckedChanged(CompoundButton view, boolean b) {
            if (mProtectFromCheckedChange) {
                return;
            }

            mProtectFromCheckedChange = true;
            if (checkedView != null) {
                setCheckedStateForView(checkedView, false);
            }
            mProtectFromCheckedChange = false;

            int id = view.getId();
            setCheckedView(view);
        }
    }

    private class PassThroughHierarchyChangeListener implements OnHierarchyChangeListener {

        private OnHierarchyChangeListener mOnHierarchyChangeListener;

        @Override
        public void onChildViewAdded(View parent, View child) {
            if (child instanceof CompoundButton) {
                int id = child.getId();

                if (id == View.NO_ID) {
                    if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR1) {
                        child.setId(generateViewId());
                    } else {
                        child.setId(View.generateViewId());
                    }
                }

                ((CompoundButton) child).setOnCheckedChangeListener(childOnCheckedChangeListener);

                if (mOnHierarchyChangeListener != null) {
                    mOnHierarchyChangeListener.onChildViewAdded(parent, child);
                }
            } else if(child instanceof ViewGroup) {
                // View hierarchy seems to be constructed from the bottom up,
                // so all child views are already added. That's why we
                // manually call the listener for all children of ViewGroup.
                for(int i = 0; i < ((ViewGroup) child).getChildCount(); i++) {
                    onChildViewAdded(child, ((ViewGroup) child).getChildAt(i));
                }
            }
        }

        @Override
        public void onChildViewRemoved(View parent, View child) {
            if (child instanceof RadioButton) {
                ((CompoundButton) child).setOnCheckedChangeListener(null);
            }

            if (mOnHierarchyChangeListener != null) {
                mOnHierarchyChangeListener.onChildViewRemoved(parent, child);
            }
        }
    }

} 
```

您可以像使用常规一样在布局中使用它，`RadioGroup`但它也适用于嵌套`RadioButton`视图：

```
<RecursiveRadioGroup
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="16dp"
    android:layout_marginBottom="16dp"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    android:orientation="horizontal">

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="vertical">

        <RadioButton
            android:id="@+id/rbNotEnoughProfileInfo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Not enough profile information"/>

        <RadioButton
            android:id="@+id/rbNotAGoodFit"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Not a good fit"/>

        <RadioButton
            android:id="@+id/rbDatesNoLongerAvailable"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Dates no longer available"/>

    </LinearLayout>

    <LinearLayout
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:orientation="vertical">

        <RadioButton
            android:id="@+id/rbOther"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Other"/>

        <android.support.v7.widget.AppCompatEditText
            android:id="@+id/etReason"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_below="@+id/tvMessageError"
            android:textSize="15sp"
            android:gravity="top|left"
            android:hint="Tell us more"
            android:padding="16dp"
            android:background="@drawable/edit_text_multiline_background"/>
    </LinearLayout>

</RecursiveRadioGroup> 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-08-08T18:50:22.190

唉。。真怪安卓缺少这样的基本功能。

改编自@ScottBiggs 的回答，这可能是使用 Kotlin 的最短方法：

```
var currentSelected = button1
listOf<RadioButton>(
    button1, button2, button3, ...
).forEach {
    it.setOnClickListener { _ ->
        currentSelected.isChecked = false
        currentSelected = it
        currentSelected.isChecked = true
    }
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-05-02T10:28:55.593

此解决方案尚未发布，因此发布：

步骤 0：创建一个`CompoundButton previousCheckedCompoundButton;`作为全局变量。

第 1 步：`OnCheckedChangedListener`为单选按钮创建

```
CompoundButton.OnCheckedChangeListener onRadioButtonCheckedListener = new CompoundButton.OnCheckedChangeListener() {
        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            if (!isChecked) return;
            if (previousCheckedCompoundButton != null) {
                previousCheckedCompoundButton.setChecked(false);
                previousCheckedCompoundButton = buttonView;
            } else {
                previousCheckedCompoundButton = buttonView;
            }
        }
    }; 
```

第 3 步：将侦听器添加到所有单选按钮：

```
radioButton1.setOnCheckedChangeListener(onRadioButtonCheckedListener);
radioButton2.setOnCheckedChangeListener(onRadioButtonCheckedListener);
radioButton3.setOnCheckedChangeListener(onRadioButtonCheckedListener);
radioButton4.setOnCheckedChangeListener(onRadioButtonCheckedListener); 
```

而已！！你完成了。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-02-18T17:34:34.310

您可以使用这个简单的 RadioGroup 扩展代码。将其中的任何布局/视图/图像与 RadioButtons 一起删除，它就会起作用。

它包含选择回调，它返回选定的 RadioButton 及其索引，您可以通过索引或 id 以编程方式设置选择：

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.RadioButton;
import android.widget.RadioGroup;

import java.util.ArrayList;

public class EnhancedRadioGroup extends RadioGroup implements View.OnClickListener {

    public interface OnSelectionChangedListener {
        void onSelectionChanged(RadioButton radioButton, int index);
    }

    private OnSelectionChangedListener selectionChangedListener;
    ArrayList<RadioButton> radioButtons = new ArrayList<>();

    public EnhancedRadioGroup(Context context) {
        super(context);
    }

    public EnhancedRadioGroup(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        if (changed) {
            getRadioButtons();
        }
    }

    private void getRadioButtons() {
        radioButtons.clear();
        checkForRadioButtons(this);
    }

    private void checkForRadioButtons(ViewGroup viewGroup) {
        if (viewGroup == null) {
            return;
        }
        for (int i = 0; i < viewGroup.getChildCount(); i++) {
            View v = viewGroup.getChildAt(i);
            if (v instanceof RadioButton) {
                v.setOnClickListener(this);
                // store index of item
                v.setTag(radioButtons.size());
                radioButtons.add((RadioButton) v);
            }
            else if (v instanceof ViewGroup) {
                checkForRadioButtons((ViewGroup)v);
            }
        }
    }

    public RadioButton getSelectedItem() {
        if (radioButtons.isEmpty()) {
            getRadioButtons();
        }
        for (RadioButton radioButton : radioButtons) {
            if (radioButton.isChecked()) {
                return radioButton;
            }
        }
        return null;
    }

    public void setOnSelectionChanged(OnSelectionChangedListener selectionChangedListener) {
        this.selectionChangedListener = selectionChangedListener;
    }

    public void setSelectedById(int id) {
        if (radioButtons.isEmpty()) {
            getRadioButtons();
        }
        for (RadioButton radioButton : radioButtons) {
            boolean isSelectedRadioButton = radioButton.getId() == id;
            radioButton.setChecked(isSelectedRadioButton);
            if (isSelectedRadioButton && selectionChangedListener != null) {
                selectionChangedListener.onSelectionChanged(radioButton, (int)radioButton.getTag());
            }
        }
    }

    public void setSelectedByIndex(int index) {
        if (radioButtons.isEmpty()) {
            getRadioButtons();
        }
        if (radioButtons.size() > index) {
            setSelectedRadioButton(radioButtons.get(index));
        }
    }

    @Override
    public void onClick(View v) {
        setSelectedRadioButton((RadioButton) v);
    }

    private void setSelectedRadioButton(RadioButton rb) {
        if (radioButtons.isEmpty()) {
            getRadioButtons();
        }
        for (RadioButton radioButton : radioButtons) {
            radioButton.setChecked(rb == radioButton);
        }
        if (selectionChangedListener != null) {
            selectionChangedListener.onSelectionChanged(rb, (int)rb.getTag());
        }
    }
} 
```

在布局 xml 中使用它：

```
 <path.to.your.package.EnhancedRadioGroup>
       Layouts containing RadioButtons/Images/Views and other RadioButtons
    </path.to.your.package.EnhancedRadioGroup> 
```

注册回调：

```
 enhancedRadioGroupInstance.setOnSelectionChanged(new EnhancedRadioGroup.OnSelectionChangedListener() {
            @Override
            public void onSelectionChanged(RadioButton radioButton, int index) {

            }
        }); 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-11-16T20:04:29.490

我创建了这两种方法来解决这个问题。您所要做的就是传递 RadioButtons 所在的 ViewGroup（可能是 RadioGroup、LinearLayout、RelativeLayout 等），并且它专门设置 OnClick 事件，也就是说，只要其中一个 RadioButtons 是 ViewGroup 的子项（在任何嵌套级别）被选中，其他未被选中。它适用于您想要的任意数量的嵌套布局。

```
public class Utils {
    public static void setRadioExclusiveClick(ViewGroup parent) {
        final List<RadioButton> radios = getRadioButtons(parent);

        for (RadioButton radio: radios) {
            radio.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    RadioButton r = (RadioButton) v;
                    r.setChecked(true);
                    for (RadioButton r2:radios) {
                        if (r2.getId() != r.getId()) {
                            r2.setChecked(false);
                        }
                    }

                }
            });
        }
    }

    private static List<RadioButton> getRadioButtons(ViewGroup parent) {
        List<RadioButton> radios = new ArrayList<RadioButton>();
        for (int i=0;i < parent.getChildCount(); i++) {
            View v = parent.getChildAt(i);
            if (v instanceof RadioButton) {
                radios.add((RadioButton) v);
            } else if (v instanceof ViewGroup) {
                List<RadioButton> nestedRadios = getRadioButtons((ViewGroup) v);
                radios.addAll(nestedRadios);
            }
        }
        return radios;
    }
} 
```

活动内部的用法是这样的：

```
ViewGroup parent = findViewById(R.id.radios_parent);
Utils.setRadioExclusiveClick(parent); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-10-11T14:27:39.827

我编写了自己的单选组类，允许包含嵌套单选按钮。一探究竟。如果您发现错误，请告诉我。

```
import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CompoundButton;
import android.widget.LinearLayout;

/**
 * This class is used to create a multiple-exclusion scope for a set of compound
 * buttons. Checking one compound button that belongs to a group unchecks any
 * previously checked compound button within the same group. Intially, all of
 * the compound buttons are unchecked. While it is not possible to uncheck a
 * particular compound button, the group can be cleared to remove the checked
 * state. Basically, this class extends functionality of
 * {@link android.widget.RadioGroup} because it doesn't require that compound
 * buttons are direct childs of the group. This means you can wrap compound
 * buttons with other views. <br>
 * <br>
 * 
 * <b>IMPORTATNT! Follow these instruction when using this class:</b><br>
 * 1\. Each direct child of this group must contain one compound button or be
 * compound button itself.<br>
 * 2\. Do not set any "on click" or "on checked changed" listeners for the childs
 * of this group.
 */
public class CompoundButtonsGroup extends LinearLayout {

 private View checkedView;
 private OnCheckedChangeListener listener;
 private OnHierarchyChangeListener onHierarchyChangeListener;

 private OnHierarchyChangeListener onHierarchyChangeListenerInternal = new OnHierarchyChangeListener() {

  @Override
  public final void onChildViewAdded(View parent, View child) {
   notifyHierarchyChanged(null);
   if (CompoundButtonsGroup.this.onHierarchyChangeListener != null) {
    CompoundButtonsGroup.this.onHierarchyChangeListener.onChildViewAdded(
      parent, child);
   }
  }

  @Override
  public final void onChildViewRemoved(View parent, View child) {
   notifyHierarchyChanged(child);
   if (CompoundButtonsGroup.this.onHierarchyChangeListener != null) {
    CompoundButtonsGroup.this.onHierarchyChangeListener.onChildViewRemoved(
      parent, child);
   }
  }
 };

 public CompoundButtonsGroup(Context context) {
  super(context);
  init();
 }

 public CompoundButtonsGroup(Context context, AttributeSet attrs) {
  super(context, attrs);
  init();
 }

 public CompoundButtonsGroup(Context context, AttributeSet attrs, int defStyle) {
  super(context, attrs, defStyle);
  init();
 }

 private void init() {
  super.setOnHierarchyChangeListener(this.onHierarchyChangeListenerInternal);
 }

 @Override
 public final void setOnHierarchyChangeListener(OnHierarchyChangeListener listener) {
  this.onHierarchyChangeListener = listener;
 }

 /**
  * Register a callback to be invoked when the checked view changes in this
  * group.
  * 
  * @param listener
  *            the callback to call on checked state change.
  */
 public void setOnCheckedChangeListener(OnCheckedChangeListener listener) {
  this.listener = listener;
 }

 /**
  * Returns currently selected view in this group. Upon empty selection, the
  * returned value is null.
  */
 public View getCheckedView() {
  return this.checkedView;
 }

 /**
  * Returns index of currently selected view in this group. Upon empty
  * selection, the returned value is -1.
  */
 public int getCheckedViewIndex() {
  return (this.checkedView != null) ? indexOfChild(this.checkedView) : -1;
 }

 /**
  * Sets the selection to the view whose index in group is passed in
  * parameter.
  * 
  * @param index
  *            the index of the view to select in this group.
  */
 public void check(int index) {
  check(getChildAt(index));
 }

 /**
  * Clears the selection. When the selection is cleared, no view in this
  * group is selected and {@link #getCheckedView()} returns null.
  */
 public void clearCheck() {
  if (this.checkedView != null) {
   findCompoundButton(this.checkedView).setChecked(false);
   this.checkedView = null;
   onCheckedChanged();
  }
 }

 private void onCheckedChanged() {
  if (this.listener != null) {
   this.listener.onCheckedChanged(this.checkedView);
  }
 }

 private void check(View child) {
  if (this.checkedView == null || !this.checkedView.equals(child)) {
   if (this.checkedView != null) {
    findCompoundButton(this.checkedView).setChecked(false);
   }

   CompoundButton comBtn = findCompoundButton(child);
   comBtn.setChecked(true);

   this.checkedView = child;
   onCheckedChanged();
  }
 }

 private void notifyHierarchyChanged(View removedView) {
  for (int i = 0; i < getChildCount(); i++) {
   View child = getChildAt(i);
   child.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
     check(v);
    }
   });
   CompoundButton comBtn = findCompoundButton(child);
   comBtn.setClickable(comBtn.equals(child));
  }

  if (this.checkedView != null && removedView != null
    && this.checkedView.equals(removedView)) {
   clearCheck();
  }
 }

 private CompoundButton findCompoundButton(View view) {
  if (view instanceof CompoundButton) {
   return (CompoundButton) view;
  }

  if (view instanceof ViewGroup) {
   for (int i = 0; i < ((ViewGroup) view).getChildCount(); i++) {
    CompoundButton compoundBtn = findCompoundButton(((ViewGroup) view)
      .getChildAt(i));
    if (compoundBtn != null) {
     return compoundBtn;
    }
   }
  }

  return null;
 }

 /**
  * Interface definition for a callback to be invoked when the checked view
  * changed in this group.
  */
 public interface OnCheckedChangeListener {

  /**
   * Called when the checked view has changed.
   * 
   * @param checkedView
   *            newly checked view or null if selection was cleared in the
   *            group.
   */
  public void onCheckedChanged(View checkedView);
 }

} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-02-26T21:44:14.240

你需要做两件事：

1.  利用`mListView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);`
2.  使您的自定义行视图实现`Checkable`。

所以我认为更好的解决方案是在你的内部 LinearLayout 中实现 Checkable ：（感谢 daichan4649，来自他的链接，[https](https://gist.github.com/daichan4649/5245378) ://gist.github.com/daichan4649/5245378 ，我把下面粘贴的所有代码）

CheckableLayout.java

```
package daichan4649.test;

import android.content.Context;
import android.util.AttributeSet;
import android.view.View;
import android.widget.Checkable;
import android.widget.LinearLayout;

public class CheckableLayout extends LinearLayout implements Checkable {

    private static final int[] CHECKED_STATE_SET = { android.R.attr.state_checked };

    public CheckableLayout(Context context) {
        super(context, null);
    }

    public CheckableLayout(Context context, AttributeSet attrs) {
        super(context, attrs, 0);
    }

    public CheckableLayout(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    private boolean checked;

    @Override
    public boolean isChecked() {
        return checked;
    }

    @Override
    public void setChecked(boolean checked) {
        if (this.checked != checked) {
            this.checked = checked;
            refreshDrawableState();

            for (int i = 0; i < getChildCount(); i++) {
                View child = getChildAt(i);
                if (child instanceof Checkable) {
                    ((Checkable) child).setChecked(checked);
                }
            }
        }
    }

    @Override
    public void toggle() {
        setChecked(!checked);
    }

    @Override
    protected int[] onCreateDrawableState(int extraSpace) {
        final int[] drawableState = super.onCreateDrawableState(extraSpace + 1);
        if (isChecked()) {
            mergeDrawableStates(drawableState, CHECKED_STATE_SET);
        }
        return drawableState;
    }
} 
```

inflater_list_column.xml

```
<?xml version="1.0" encoding="utf-8"?>
<daichan4649.test.CheckableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/check_area"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_vertical">

    <TextView
        android:id="@+id/text"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical"
        android:layout_weight="1"
        android:gravity="center_vertical" />

    <RadioButton
        android:id="@+id/radio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="false"
        android:focusable="false"
        android:focusableInTouchMode="false" />

</daichan4649.test.CheckableLayout> 
```

测试片段.java

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    View view = inflater.inflate(R.layout.fragment_test, container, false);

    // 表示データ
    List<String> dataList = new ArrayList<String>();

    // 初期選択位置
    int initSelectedPosition = 3;

    // リスト設定
    TestAdapter adapter = new TestAdapter(getActivity(), dataList);
    ListView listView = (ListView) view.findViewById(R.id.list);
    listView.setAdapter(adapter);
    listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
    listView.setItemChecked(initSelectedPosition, true);

    listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // 選択状態を要素(checkable)へ反映
            Checkable child = (Checkable) parent.getChildAt(position);
            child.toggle();
        }
    });
    return view;
}

private static class TestAdapter extends ArrayAdapter<String> {

    private LayoutInflater inflater;

    public TestAdapter(Context context, List<String> dataList) {
        super(context, 0, dataList);
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.inflater_list_column, null);
            holder = new ViewHolder();
            holder.text = (TextView) convertView.findViewById(R.id.text);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        // bindData
        holder.text.setText(getItem(position));
        return convertView;
    }
}

private static class ViewHolder {
    TextView text;
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-04-21T09:39:36.790

我遇到了同样的问题，因为我想在两个不同的线性布局中放置 4 个不同的单选按钮，这些布局将是单选组的子项。为了实现 RadioGroup 中的期望行为，我重载了 addView 函数

这是解决方案

```
public class AgentRadioGroup extends RadioGroup
{

    public AgentRadioGroup(Context context) {
        super(context);
    }

    public AgentRadioGroup(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void onViewAdded(View child) {
        if( child instanceof ViewGroup)
        {
            ViewGroup viewGroup = (ViewGroup) child;
            for(int i=0; i<viewGroup.getChildCount(); i++)
            {
                View subChild = viewGroup.getChildAt(i);
                if( subChild instanceof ViewGroup )
                {
                    onViewAdded(subChild);
                }
                else
                {
                    if (subChild instanceof RadioButton) {
                        super.onViewAdded(subChild);
                    }
                }
            }
        }
        if (child instanceof RadioButton)
        {
            super.onViewAdded(child);
        }
    }
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-05-05T10:53:55.463

没有什么可以阻止您实现该布局结构（`RadioGroup`实际上是 的子类`LinearLayout`），但您不应该这样做。首先，您创建一个 4 层深的结构（使用另一种布局结构，您可以对其进行优化），其次，如果您`RadioButtons`不是 a 的直接子级`RadioGroup`，*则在组中选择的唯一一项*将不起作用。这意味着如果您`Radiobutton`从该布局中选择一个，然后选择另一个`RadioButton`，您最终会选择两个`RadioButtons`而不是最后一个选择。

如果您解释您想在该布局中做什么，也许我可以向您推荐一个替代方案。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-05-09T00:42:05.040

```
 int currentCheckedRadioButton = 0;
    int[] myRadioButtons= new int[6];
    myRadioButtons[0] = R.id.first;
    myRadioButtons[1] = R.id.second;
    //..
    for (int radioButtonID : myRadioButtons) {
        findViewById(radioButtonID).setOnClickListener(
                    new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if (currentCheckedRadioButton != 0)
                    ((RadioButton) findViewById(currentCheckedRadioButton)).setChecked(false);
                currentCheckedRadioButton = v.getId();

            }
        });
    } 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-08-03T07:08:47.447

我的 0.02 美元基于 @infografnet 和 @lostdev（也感谢 @Neromancer 的 Compound Button 建议！）

```
public class AdvRadioGroup {
    public interface OnButtonCheckedListener {
        void onButtonChecked(CompoundButton button);
    }

    private final List<CompoundButton> buttons;
    private final View.OnClickListener onClick = new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            setChecked((CompoundButton) v);
        }
    };

    private OnButtonCheckedListener listener;
    private CompoundButton lastChecked;

    public AdvRadioGroup(View view) {
        buttons = new ArrayList<>();
        parseView(view);
    }

    private void parseView(final View view) {
        if(view instanceof CompoundButton) {
            buttons.add((CompoundButton) view);
            view.setOnClickListener(onClick);
        } else if(view instanceof ViewGroup) {
            final ViewGroup group = (ViewGroup) view;
            for (int i = 0; i < group.getChildCount();i++) {
                parseView(group.getChildAt(i));
            }
        }
    }

    public List<CompoundButton> getButtons() { return buttons; }

    public CompoundButton getLastChecked() { return lastChecked; }

    public void setChecked(int index) { setChecked(buttons.get(index)); }

    public void setChecked(CompoundButton button) {
        if(button == lastChecked) return;

        for (CompoundButton btn : buttons) {
            btn.setChecked(false);
        }

        button.setChecked(true);

        lastChecked = button;

        if(listener != null) {
            listener.onButtonChecked(button);
        }
    }

    public void setOnButtonCheckedListener(OnButtonCheckedListener listener) { this.listener = listener; }
} 
```

用法（包含监听器）：

```
AdvRadioGroup group = new AdvRadioGroup(findViewById(R.id.YOUR_VIEW));
group.setOnButtonCheckedListener(new AdvRadioGroup.OnButtonCheckedListener() {
    @Override
    public void onButtonChecked(CompoundButton button) {
        // do fun stuff here!
    }
}); 
```

奖励：您可以获得最后检查的按钮，整个按钮的列表，并且您可以通过索引检查任何按钮！

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-02-28T20:41:13.053

已经有 20 个答案，但我敢说我认为我有最好的一个。

这使用视图数据绑定，因此您要做的第一件事就是将其添加到*模块的* `build.gradle`.

```
android {
    dataBinding {
        enabled = true
    }
} 
```

然后，您可以使用所需的视图层次结构进行布局，例如：

### fancy_radio_button.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android">

    <data>
        <variable name="title" type="String"/>
        <variable name="description" type="String"/>
        <variable name="checked" type="boolean"/>
        <variable name="buttonId" type="int"/>
    </data>

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="wrap_content"
        android:layout_height="match_parent">

        <!--  clickable=false since we implement the click listener on the whole view  -->
        <RadioButton
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:clickable="false"
            android:text="@{title}"
            android:checked="@{checked}"/>

        <TextView
            android:text="@{description}"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <View
            android:layout_width="match_parent"
            android:layout_height="24dp" />

    </LinearLayout>

</layout> 
```

这可以看起来像您想要的那样，只需确保在`android:clickable="false"`上进行设置`RadioButton`，并在需要的地方使用数据绑定变量。

该布局由此类处理：

### FancyRadioBroup.java

```
package com.example.app;

import android.content.Context;
import android.util.AttributeSet;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.RadioGroup;

import com.example.app.FancyRadioButtonBinding;

import java.util.ArrayList;

public class FancyRadioGroup extends RadioGroup implements View.OnClickListener {

    private final ArrayList<FancyRadioButtonBinding> radioButtons = new ArrayList<>();
    private OnSelectionChangedListener selectionChangedListener;

    public FancyRadioGroup(Context context) {
        super(context);
    }

    public FancyRadioGroup(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    public void setOnSelectionChangedListener(OnSelectionChangedListener selectionChangedListener) {
        this.selectionChangedListener = selectionChangedListener;
    }

    public int addOption(String title, String description) {
        // inflate view and get binding
        FancyRadioButtonBinding buttonBinding = FancyRadioButtonBinding.inflate(LayoutInflater.from(getContext()), this, true);
        // set title and description
        buttonBinding.setTitle(title);
        buttonBinding.setDescription(description);
        // give the button an id (just use the index)
        buttonBinding.setButtonId(radioButtons.size());
        // set the root view's tag to the binding, so we can get the binding from the view
        View root = buttonBinding.getRoot();
        root.setTag(buttonBinding);
        // set click listener on the whole view, so we can click anywhere
        root.setOnClickListener(this);
        radioButtons.add(buttonBinding);
        // return button id to caller, so they know what was clicked
        return buttonBinding.getButtonId();
    }

    @Override
    public void onClick(View v) {
        for (FancyRadioButtonBinding binding : radioButtons) {
                binding.setChecked(v.getTag() == binding);
        }
        if (selectionChangedListener != null) {
            selectionChangedListener.onSelectionChanged(getSelected());
        }
    }

    public int getSelected() {
        for (FancyRadioButtonBinding binding : radioButtons) {
            if (binding.getChecked()) {
                return binding.getButtonId();
            }
        }
        return -1;
    }

    public interface OnSelectionChangedListener {
        void onSelectionChanged(int buttonId);
    }

} 
```

要使用，只需添加`FancyRadioGroup`到您的视图中：

### activity_foo.xml

```
<com.example.app.FancyRadioGroup android:id="@+id/radio_group"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" /> 
```

然后添加您的选项：

### FooActivity.java

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    FancyRadioGroup radioGroup = findViewById(R.id.radio_group);
    radioGroup.addOption("The First One", "This option is recommended for users who like the number one.");
    radioGroup.addOption("The Second One", "For advanced users. Larger than one.");
    radioGroup.setOnSelectionChangedListener(this::doSomething);
}

private void doSomething(int id) {
    Toast.makeText(this, "selected: "+id, Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-02-18T00:10:51.423

如答案所示，解决方案是一个简单的自定义黑客。这是我在 Kotlin 中的简约版本。

```
import android.widget.RadioButton

class SimpleRadioGroup(private val radioButtons: List<RadioButton>) {

    init {
        radioButtons.forEach {
            it.setOnClickListener { clickedButton ->
                radioButtons.forEach { it.isChecked = false }
                (clickedButton as RadioButton).isChecked = true
            }
        }
    }

    val checkedButton: RadioButton?
        get() = radioButtons.firstOrNull { it.isChecked }
} 
```

那么您只需要在活动的 onCreate 或片段的 onViewCreated 中执行类似的操作：

```
SimpleRadioGroup(listOf(radio_button_1, radio_button_2, radio_button_3)) 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-02-04T03:47:29.267

虽然这可能是一个较老的话题，但我想快速分享我编写的简单 hacky 代码。它并不适合所有人，也可以做一些改进。

**使用此代码的情况？**
此代码适用于具有原始问题或类似问题布局的人，在我的情况下如下所示。这个人是针对我正在使用的对话框的。

*   LinLayout_Main
    *   LinLayout_Row1
        *   图像视图
        *   单选按钮
    *   LinLayout_Row2
        *   图像视图
        *   单选按钮
    *   LinLayout_Row3
        *   图像视图
        *   单选按钮

**代码自己做什么？**
此代码将枚举“LinLayout_Main”的所有子级，并且对于每个“LinearLayout”的子级，它将为任何 RadioButtons 枚举该视图。

简单地说，它会查看父“LinLayout_Main”并找到任何子 LinearLayouts 中的任何 RadioButtons。

**MyMethod_ShowDialog**
将显示一个带有 XML 布局文件的对话框，同时查看它以为找到的每个 RadioButton 设置“setOnClickListener”

**MyMethod_ClickRadio**
将以与“MyMethod_ShowDialog”相同的方式循环每个 RadioButton，但不是设置“setOnClickListener”，而是“setChecked(false)”以清除每个 RadioButton，然后作为最后一步将“setChecked(false)”到 RadioButton称为点击事件。

```
public void MyMethod_ShowDialog(final double tmpLat, final double tmpLng) {
        final Dialog dialog = new Dialog(actMain);
        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
        dialog.setContentView(R.layout.layout_dialogXML);

        final LinearLayout tmpLayMain = (LinearLayout)dialog.findViewById(R.id.LinLayout_Main);
        if (tmpLayMain!=null) {
            // Perform look for each child of main LinearLayout
            int iChildCount1 = tmpLayMain.getChildCount();
            for (int iLoop1=0; iLoop1 < iChildCount1; iLoop1++){
                View tmpChild1 = tmpLayMain.getChildAt(iLoop1);
                if (tmpChild1 instanceof LinearLayout) {
                    // Perform look for each LinearLayout child of main LinearLayout
                    int iChildCount2 = ((LinearLayout) tmpChild1).getChildCount();
                    for (int iLoop2=0; iLoop2 < iChildCount2; iLoop2++){
                        View tmpChild2 = ((LinearLayout) tmpChild1).getChildAt(iLoop2);
                        if (tmpChild2 instanceof RadioButton) {
                            ((RadioButton) tmpChild2).setOnClickListener(new RadioButton.OnClickListener() {
                                public void onClick(View v) {
                                    MyMethod_ClickRadio(v, dialog);
                                }
                            });
                        }
                    }
                }
            }

            Button dialogButton = (Button)dialog.findViewById(R.id.LinLayout_Save);
            dialogButton.setOnClickListener(new Button.OnClickListener() {
                public void onClick(View v) {
                    dialog.dismiss();
                }
            });
        }
       dialog.show();
}

public void MyMethod_ClickRadio(View vRadio, final Dialog dDialog) {

        final LinearLayout tmpLayMain = (LinearLayout)dDialog.findViewById(R.id.LinLayout_Main);
        if (tmpLayMain!=null) {
            int iChildCount1 = tmpLayMain.getChildCount();
            for (int iLoop1=0; iLoop1 < iChildCount1; iLoop1++){
                View tmpChild1 = tmpLayMain.getChildAt(iLoop1);
                if (tmpChild1 instanceof LinearLayout) {
                    int iChildCount2 = ((LinearLayout) tmpChild1).getChildCount();
                    for (int iLoop2=0; iLoop2 < iChildCount2; iLoop2++){
                        View tmpChild2 = ((LinearLayout) tmpChild1).getChildAt(iLoop2);
                        if (tmpChild2 instanceof RadioButton) {
                            ((RadioButton) tmpChild2).setChecked(false);
                        }
                    }
                }
            }
        }

        ((RadioButton) vRadio).setChecked(true);
} 
```

**可能有错误，从项目中复制并重命名为 Voids/XML/ID**

您还可以运行相同类型的循环来找出检查了哪些项目

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-12-10T11:25:59.067

**MixedCompoundButtonGroup**为您完成！

[MixedCompoundButtonGroup 要点](https://gist.github.com/avisper/4a7da16294add0a96a722f6a97c0a5cd)

```
fun setAll() {
    for (i in 0 until childCount) {
        val child = getChildAt(i)
        setCompoundButtonListener(child)
    }
}  

private fun setCompoundButtonListener(view: View?) {
    if (view == null) return
    if (view is CompoundButton) {
        view.setOnCheckedChangeListener(compoundButtonCheckedChangedListener)
    } else if (view is ViewGroup && view !is RadioGroup) { // NOT RadioGroup!
        for (i in 0 until view.childCount) {
            setCompoundButtonListener(view.getChildAt(i))
        }
    }
}

private fun initCompoundButtonListener() {
    compoundButtonCheckedChangedListener = CompoundButton.OnCheckedChangeListener { compoundButton, isChecked ->
        setChecked(compoundButton, isChecked)
    }
}

private fun setChecked(compoundButton: CompoundButton, isChecked: Boolean) {
    if (isChecked.not()) return
    if (currentCompoundButton != null) {
        currentCompoundButton!!.isChecked = false
        currentCompoundButton = compoundButton
    } else {
        currentCompoundButton = compoundButton
    }
    checkedChangedListener?.onCheckedChanged(currentCompoundButton!!)
} 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-07-17T13:59:14.357

我遇到了同样的问题，我必须使用单选按钮来表示性别，而且都带有图片和文字，所以我尝试使用以下方式解决它。

xml文件：

```
<RadioGroup
       android:layout_marginTop="40dp"
       android:layout_marginEnd="23dp"
       android:id="@+id/rgGender"
       android:layout_width="match_parent"
       android:layout_below="@id/tvCustomer"
       android:orientation="horizontal"
       android:layout_height="wrap_content">

       <LinearLayout
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:orientation="vertical"
           android:gravity="center_horizontal"
           android:layout_weight="1">
       <RadioButton
           android:id="@+id/rbMale"
           android:layout_width="80dp"
           android:layout_height="60dp"
           android:background="@drawable/male_radio_btn_selector"
           android:button="@null"
           style="@style/RadioButton.Roboto.20sp"/>

           <TextView
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="Male"
               style="@style/TextView.RobotoLight.TxtGrey.18sp"
               android:layout_margin="0dp"
               android:textSize="@dimen/txtsize_20sp"/>
       </LinearLayout>
       <LinearLayout
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:orientation="vertical"
           android:gravity="center_horizontal"
           android:layout_weight="1">
       <RadioButton
           android:layout_weight="1"
           android:gravity="center"
           android:id="@+id/rbFemale"
           android:layout_width="80dp"
           android:layout_height="60dp"
           android:button="@null"
           android:background="@drawable/female_radio_btn_selector"
           style="@style/RadioButton.Roboto.20sp"
           android:textColor="@color/light_grey"/>
           <TextView
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:text="Female"
               android:layout_margin="0dp"
               style="@style/TextView.RobotoLight.TxtGrey.18sp"
               android:textSize="@dimen/txtsize_20sp"/>
       </LinearLayout>
       <LinearLayout
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:orientation="vertical"
           android:gravity="center_horizontal"
           android:layout_weight="1">
       <RadioButton
           android:layout_weight="1"
           android:gravity="center"
           android:id="@+id/rbOthers"
           android:layout_width="80dp"
           android:layout_height="60dp"
           android:button="@null"
           android:background="@drawable/other_gender_radio_btn_selector"
           style="@style/RadioButton.Roboto.20sp"/>
          <TextView
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:text="Other"
              android:layout_margin="0dp"
              style="@style/TextView.RobotoLight.TxtGrey.18sp"
              android:textSize="@dimen/txtsize_20sp"/>
      </LinearLayout>
   </RadioGroup> 
```

在java文件中：我在所有3个单选按钮和覆盖方法上设置了setOnCheckedChangeListener，如下所述，它对我来说工作正常。

```
@Override
    public void onCheckedChanged(CompoundButton compoundButton, boolean b) {
   switch (compoundButton.getId()){
       case R.id.rbMale:
           if(rbMale.isChecked()){
               rbMale.setChecked(true);
               rbFemale.setChecked(false);
               rbOther.setChecked(false);
           }
           break;
       case R.id.rbFemale:
           if(rbFemale.isChecked()){
               rbMale.setChecked(false);
               rbFemale.setChecked(true);
               rbOther.setChecked(false);
           }
           break;
       case R.id.rbOthers:
           if(rbOther.isChecked()){
               rbMale.setChecked(false);
               rbFemale.setChecked(false);
               rbOther.setChecked(true);
           }
           break;

   }
    } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-10-23T07:13:35.320

这是@Infografnet 解决方案的修改版本。它简单易用。

`RadioGroupHelper group = new RadioGroupHelper(this,R.id.radioButton1,R.id.radioButton2); group.radioButtons.get(0).performClick(); //programmatically`

只需复制和粘贴

```
package com.qamar4p.farmer.ui.custom;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.view.View;
import android.widget.CompoundButton;
import android.widget.RadioButton;

public class RadioGroupHelper {

    public List<CompoundButton> radioButtons = new ArrayList<>();

    public RadioGroupHelper(RadioButton... radios) {
        super();
        for (RadioButton rb : radios) {
            add(rb);
        }
    }

    public RadioGroupHelper(Activity activity, int... radiosIDs) {
        this(activity.findViewById(android.R.id.content),radiosIDs);
    }

    public RadioGroupHelper(View rootView, int... radiosIDs) {
        super();
        for (int radioButtonID : radiosIDs) {
            add((RadioButton)rootView.findViewById(radioButtonID));
        }
    }

    private void add(CompoundButton button){
        this.radioButtons.add(button);
        button.setOnClickListener(onClickListener);
    }

    View.OnClickListener onClickListener = v -> {
        for (CompoundButton rb : radioButtons) {
            if(rb != v) rb.setChecked(false);
        }
    };
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-03-27T04:11:59.300

这是我在 Kotlin 上使用 RadioButton 进行自定义布局的解决方案。

```
tipInfoContainerFirst.radioButton.isChecked = true

var prevSelected = tipInfoContainerFirst.radioButton
prevSelected.isSelected = true

listOf<RadioButton>(
    tipInfoContainerFirst.radioButton,
    tipInfoContainerSecond.radioButton,
    tipInfoContainerThird.radioButton,
    tipInfoContainerForth.radioButton,
    tipInfoContainerCustom.radioButton
).forEach {
    it.setOnClickListener { _it ->
    if(!it.isSelected) {
        prevSelected.isChecked = false
        prevSelected.isSelected = false
        it.radioButton.isSelected = true
        prevSelected = it.radioButton
    }
  }
} 
```

# html - 如何使用 960.gs 将 div 置于屏幕中央

> ID：10461011
> 
> 赞同：2
> 
> 时间：2012-05-05T10:34:36.587
> 
> 标签：html, css, 960.gs

我想知道，我们如何使用 CSS 和 960.gs 将 div 置于屏幕中心，水平和垂直

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:59:10.377

960.gs 不是相对居中（即使用百分比）。这是关于选择页面的宽度（在本例中为 960 像素）并将其分割。您可以通过选择要开始的网格并选择宽度来“居中”div（总网格 - 起始网格）。

对于网格本身的简单水平居中，您可以执行 960.gs 演示中的操作：

```
.container_12 {
  margin-left: auto;
  margin-right: auto;
  width: 960px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:48:53.973

```
div { 
    position:absolute;
    left: 50%;
    top: 50%;
    width:""px;
    height:""px;
    margin:half the length of width; half the length of height; 
} 
```

# python - 软件设计与开发专业：Pygame Smudge Trails

> ID：10461013
> 
> 赞同：5
> 
> 时间：2012-05-05T10:34:56.687
> 
> 标签：python, pygame, blit, trail

首先，我在网上搜索了这个网站的解决方案，而我尝试过的那些都不起作用，所以我决定发布我的个人问题和代码。该程序是使用 Python 3.2.2 和对应的 pygame 兼容版本创建的。我还意识到一种更有效的方法是使用精灵、精灵组和“脏矩形”更新，但我无法转换程序，所以我将继续没有这些功能的额外好处。

问题：留下“小行星”移动的污迹痕迹。
假设：背景被粘贴到屏幕上，而小行星被粘贴到背景上。

请回复-顺便说一句，我是来自澳大利亚的高中生：D

```
import pygame
import random
import math
pygame.init()

height = 550
width = 750
screen = pygame.display.set_mode((width, height))
background = pygame.image.load("Planet.jpg")
Clock = pygame.time.Clock()

class asteroid(pygame.sprite.Sprite):
    def __init__(self, x, y, size):
        pygame.sprite.Sprite.__init__(self)
        self.x = x
        self.y = y
        self.size = 15
        self.speed = 0.0
        self.angle = 0
        self.colour = (171, 130, 255)
        self.thickness = 0

def display(self):
     pygame.draw.circle(background, self.colour, (int(self.x),int(self.y)), self.size, self.thickness)

     pygame.draw.circle(background, (255, 255, 255), (int(self.x),int(self.y)), self.size, 1)

def move(self):
    self.x += math.sin(self.angle) * self.speed
    self.y -= math.cos(self.angle) * self.speed

def boundaries(self):
    if self.x > width - self.size:
        self.x = 0 + self.size
    elif self.x < self.size:
        self.x = width - self.size
    if self.y > height - self.size:
        self.y = 0 + self.size
    elif self.y <self.size:
        self.y = height - self.size

num_target = 5
my_particles = []
num_particles = len(my_particles)
while num_particles < 5:
    for n in range(num_target):
        size = 20
        x = random.randint(size, height - size)
        y = random.randint(size, width - size)
        target = asteroid(x, y, size)
        target.speed = random.uniform(1.0, 1.0)
        target.angle = random.uniform(0, math.pi*2)
        my_particles.append(target)
        num_particles = num_particles + 1

def main():
    pygame.display.set_caption("Anyu's Game")
    screen.blit(background, (0,0))
    pygame.display.update()
    score = (pygame.time.get_ticks()/1000)
    print (score)

while True:
    pygame.display.update()
    screen.blit(background, (0,0))
    MouseP = pygame.mouse.get_pos()
    frames = Clock.get_fps
    pygame.mouse.set_visible
    score = (pygame.time.get_ticks()/1000)
    print (score)
    print (MouseP)
    for target in my_particles:
        target.move()
        target.boundaries()
        target.display()
        pygame.display.update()

    for event in pygame.event.get():

        if event.type == pygame.QUIT:
            pygame.quit();

if __name__=='__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T12:30:39.347

基本上，你是对的！圆圈直接绘制到背景上，每次绘制新圆圈时，旧圆圈仍然存在。导致污迹/痕迹。

您可以在您的方法中更改`background`为。**这将解决它。**`screen``draw`

 **但确实值得`Sprite`按预期使用这些类。我对您的代码进行了一些更改，以便为您切换。通过这些更改，它可以毫无痕迹地运行 :)

以下是更改和说明：

在顶部附近添加：

```
#Create a new `pygame.Surface`, and draw a circle on it, then set transparency:
circle = pygame.Surface((30,30))
circle = circle.convert()
pygame.draw.circle(circle, (171, 130, 255), (int(15),int(15)), 15, 0)
circle.set_colorkey(circle.get_at((0, 0)), pygame.RLEACCEL) 
```

将此添加到`asteroid`,`__init__`方法中：

```
#Sets the asteroid image, and then the asteroids co-ords (these are in `rect`)
        self.image = circle
        self.rect = self.image.get_rect() 
```

将此添加到末尾`def move(self):`

```
 self.rect[0] = self.x
        self.rect[1] = self.y 
```

改变：

```
my_particles = [] 
```

到：

```
#This is a special pygame container class, it has a draw() method that tracks changed areas of the screen.
my_particles = pygame.sprite.RenderUpdates() 
```

改变：

```
my_particles.append(target) 
```

到：

```
my_particles.add(target) 
```

改变：

```
while True:
    pygame.display.update()
    screen.blit(background, (0,0))
    MouseP = pygame.mouse.get_pos()
    frames = Clock.get_fps
    pygame.mouse.set_visible
    score = (pygame.time.get_ticks()/1000)
    print (score)
    print (MouseP)
    for target in my_particles:
        target.move()
        target.boundaries()
        target.display()
        pygame.display.update() 
```

到：

```
#initial screen draw:
screen.blit(background, (0,0))
pygame.display.update()
while True:
    #remove previous drawn sprites and replaces with background:
    my_particles.clear(screen, background)
    MouseP = pygame.mouse.get_pos()
    frames = Clock.get_fps
    pygame.mouse.set_visible
    score = (pygame.time.get_ticks()/1000)
    print (score)
    print (MouseP)
    for target in my_particles:
        target.move()
        target.boundaries()
    #draws changed sprites to the screen:
    pygame.display.update(my_particles.draw(screen)) 
```

删除`display`不再需要的方法。

这也将比您之前的代码运行得更快，因为绘制某些东西所花费的时间与绘图区域的大小成正比，并且以前它每次都绘制整个背景 - 现在它只绘制精灵和更改背景！

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-26T07:53:15.090

这已经有了答案，但这可能比其他方法有用。确保当您将图像传送到屏幕上时，在传送完所有内容后翻转显示。我会考虑制作一个 draw() 函数，如下所示：

```
def draw(self):

    # Blit images
    self.screen.blit(image)

    # Flip display
    pygame.display.flip() 
```

这将每帧翻转显示，然后绘制没有轨迹的下一帧。

还有快速注意事项，记得在添加更多图像后做`image = pygame.image.load(image).convert or .convert_alpha()`其他事情，游戏会变慢。此外，如果您这样做，`import pygame as pg`您不必`pygame`每次都输入，而是只需输入`pg`.**

# jquery - 如何将值绑定到网格视图中下拉选择更改的列+Telerik+Mvc3

> ID：10461014
> 
> 赞同：1
> 
> 时间：2012-05-05T10:34:58.727
> 
> 标签：jquery, asp.net-mvc, razor, telerik-mvc

我在我的项目中使用 Telerik Controls，我想将值绑定到在 Telerik Grid 视图的 BatchEditing 中更改的下拉选择中的列。

示例：我有product_cd，product_description，其中product_cd是一个下拉列表，在选择更改时，我必须在下一列中填写product_description。

在这种情况下帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:26:41.867

为此，您需要结合使用[saveCell 和 editCell](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-grid-client-api-and-events.html#ClientMethods)方法。在您要实现的逻辑中，始终将只有单个单元格的网格保持在编辑模式。此外，您可能需要处理 DropDownList [OnChange](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-combobox-client-api-and-events.html#OnChange)事件。

# node.js - 在 nodejs 中为 oAuth 调用设置带有 sessionid 的 cookie

> ID：10461016
> 
> 赞同：1
> 
> 时间：2012-05-05T10:35:05.633
> 
> 标签：node.js, cookies, oauth

我正在使用 nodejs 登录，因为这个页面[http://cloud.appcelerator.com/docs/api/v1/users/login](http://cloud.appcelerator.com/docs/api/v1/users/login)解释了。

```
var util= require('util');
var oauth = require('oauth');
var querystring = require('querystring');

var configuration = {
  api_url: "https://api.cloud.appcelerator.com",
  consumer_key: "KEY",
  consumer_secret: "SECRET",
  access_token: "",
  access_secret: ""
}

var oauth_client = new oauth.OAuth(
  "",
  "",
  configuration.consumer_key,
  configuration.consumer_secret,
  "1.0",
  "https://api.cloud.appcelerator.com",
  "HMAC-SHA1");

var post_data = {
       "login":"USER",
       "password":"PASS" 
    };

oauth_client.post(configuration.api_url+'/v1/users/login.json?key=iCvdsr03TuL4h4Ryf59xPSkSB3kdehRU',    
configuration.access_token, configuration.access_secret,
    post_data, "application/json", 
  function(error, data, response) {
  }
  ); 
```

接下来，我应该获取 sessionid 并将其传递给需要用户登录的新请求（发布或推送），例如：

> [http://cloud.appcelerator.com/docs/api/v1/users/update](http://cloud.appcelerator.com/docs/api/v1/users/update)

问题是我得到了错误

> “您需要先登录或注册才能继续”

，这很可能意味着我没有将 sessionid 作为 cookie 传递，如此处所述

> [http://cloud.appcelerator.com/docs/rest](http://cloud.appcelerator.com/docs/rest)

如何保留 cookie 以便我可以将其用于下一个请求？

# github - Github API v3：从日期到日期获取事件

> ID：10461023
> 
> 赞同：5
> 
> 时间：2012-05-05T10:35:21.373
> 
> 标签：github, github-api

Github API v3 是否可以从日期到日期获取事件？文档中没有任何内容：http: [//developer.github.com/v3/events/](http://developer.github.com/v3/events/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T18:37:57.647

您不能指定结束日期，但是，由于结果是分页的，您可以在某个日期之后自行停止请求事件。

# python - 从脚本运行 Scrapy，需要帮助理解它

> ID：10461024
> 
> 赞同：2
> 
> 时间：2012-05-05T10:35:22.477
> 
> 标签：python, scrapy

我对 Python 比较陌生，因此感谢您提供任何帮助/建议。

我正在尝试构建一个将运行 Scrapy 蜘蛛的脚本。到目前为止，我有下面的代码，

```
from scrapy.contrib.loader import XPathItemLoader
from scrapy.item import Item, Field
from scrapy.selector import HtmlXPathSelector
from scrapy.spider import BaseSpider
from scrapy.crawler import CrawlerProcess

class QuestionItem(Item):
"""Our SO Question Item"""
    title = Field()
    summary = Field()
    tags = Field()

    user = Field()
    posted = Field()

    votes = Field()
    answers = Field()
    views = Field()

class MySpider(BaseSpider):
    """Our ad-hoc spider"""
    name = "myspider"
    start_urls = ["http://stackoverflow.com/"]

    question_list_xpath = '//div[@id="content"]//div[contains(@class, "question-    summary")]'

    def parse(self, response):
        hxs = HtmlXPathSelector(response)

        for qxs in hxs.select(self.question_list_xpath):
            loader = XPathItemLoader(QuestionItem(), selector=qxs)
            loader.add_xpath('title', './/h3/a/text()')
            loader.add_xpath('summary', './/h3/a/@title')
            loader.add_xpath('tags', './/a[@rel="tag"]/text()')
            loader.add_xpath('user', './/div[@class="started"]/a[2]/text()')
            loader.add_xpath('posted', './/div[@class="started"]/a[1]/span/@title')
            loader.add_xpath('votes', './/div[@class="votes"]/div[1]/text()')
            loader.add_xpath('answers', './/div[contains(@class,  "answered")]/div[1]/text()')
            loader.add_xpath('views', './/div[@class="views"]/div[1]/text()')

            yield loader.load_item()     

class CrawlerWorker(Process):
    def __init__(self, spider, results):
        Process.__init__(self)
        self.results = results

        self.crawler = CrawlerProcess(settings)
        if not hasattr(project, 'crawler'):
            self.crawler.install()
        self.crawler.configure()

        self.items = []
        self.spider = spider
        dispatcher.connect(self._item_passed, signals.item_passed)

    def _item_passed(self, item):
        self.items.append(item)

    def run(self):
        self.crawler.crawl(self.spider)
        self.crawler.start()
        self.crawler.stop()
        self.results.put(self.items)

def main():
results = Queue()
crawler = CrawlerWorker(MySpider(BaseSpider), results)
crawler.start()
for item in results.get():
   pass # Do something with item 
```

我在下面收到此错误，

```
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (157, 0))
...
C:\Python27\lib\site-packages\twisted\internet\win32eventreactor.py:64: UserWarn
ing: Reliable disconnection notification requires pywin32 215 or later
  category=UserWarning)
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (157, 0))
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "C:\Python27\lib\multiprocessing\forking.py", line 374, in main
    self = load(from_parent)
  File "C:\Python27\lib\pickle.py", line 1378, in load
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (157, 0))
    return Unpickler(file).load()
  File "C:\Python27\lib\pickle.py", line 858, in load
    dispatch[key](self)
  File "C:\Python27\lib\pickle.py", line 1090, in load_global
    klass = self.find_class(module, name)
  File "C:\Python27\lib\pickle.py", line 1124, in find_class
    __import__(module)
  File "Webscrap.py", line 53, in <module>
    class CrawlerWorker(Process):
NameError: name 'Process' is not defined
ERROR: An unexpected error occurred while tokenizing input
The following traceback may be corrupted or invalid
The error message is: ('EOF in multi-line statement', (157, 0))
...
"PicklingError: <function remove at 0x07871CB0>: Can't pickle <function remove at 0x077F6BF0>: it's not found as weakref.remove". 
```

我意识到我在做一些逻辑错误的事情。作为新手，我无法发现它。谁能给我一些帮助以使此代码运行？

最终，我只想要一个脚本，它可以运行、抓取所需的数据并将其存储在数据库中，但首先我想让抓取工作。我以为这会运行它，但到目前为止还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:22:43.627

我假设你想要一个独立的蜘蛛/爬虫......这实际上很简单，虽然我没有使用自定义`Process`.

```
class StandAloneSpider( CyledgeSpider ):
    #a regular spider

settings.overrides['LOG_ENABLED'] = True
#more settings can be changed...

crawler = CrawlerProcess( settings )
crawler.install()
crawler.configure()

spider = StandAloneSpider()

crawler.crawl( spider )
crawler.start() 
```

# assembly - x86 程序集 (masm32) - 如何将多位数据拆分为单个字符

> ID：10461025
> 
> 赞同：0
> 
> 时间：2012-05-05T10:35:56.223
> 
> 标签：assembly, x86, masm32

我仍然对 x86 程序集有所了解，因此我制作了这个将 6 和 7 相乘的小程序，将数据移动到 EAX，然后打印结果。它编译良好，运行良好，但不是打印 42，而是打印 40 秒 ASCII 字符。我在这个论坛上有如何打印单字符数字，但现在我需要弄清楚如何打印多位数字。这是我的代码：

```
.386
.model flat, stdcall
option casemap :none
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib
.data
    adrs dd 0
.code
start:
    mov eax, 6
    mov ebx, 7
    imul eax, ebx
    add eax, 48
    mov adrs, eax
    invoke StdOut, addr adrs
    invoke ExitProcess, 0
end start 
```

所以总而言之，我需要了解如何将数据拆分为单个字符，以便我可以打印它们。任何帮助都会很棒。

问候，

程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T00:58:40.470

反复将您的数字除以 10。收集剩余物。添加 '0' 的 ASCII 码，打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T02:43:35.173

这是一个代码片段，它接受一个数字（var sum）并通过将总和除以 100、10 和余数是单位来找到该总和中有多少百、十和单位。`ARRAY`它在向其添加 30H 后存储所有这些值。现在 ARRAY 是 sum 中数字的 ASCII 等价物。

```
 :
 ARRAY   Db  4 dup(?),0
 sum DW  253D
 :
     mov esi, offset ARRAY
     mov ax, word ptr sum2
     mov bl,100D
     div bl      ; ah - R and al - Q    
     mov bh, ah    
     add al,30h
     mov [esi], al
     add esi,1

     mov ah,00
     mov al,bh
     mov bl,10D
     div bl
     mov bh, ah
     add al,30h
     mov [esi], al
     add esi,1

     mov dl,bh
     add dl,30h
     mov [esi],dl

     lea dx,offset RESULT2
     mov ah,09
     int 21h
     mov esi, offset ARRAY
     mov cl,04
loopdisplay1:
     mov dl,[esi]
     mov dh,00
     mov ah,02
     int 21h
     add esi,1
     dec cl
     jnz loopdisplay1 
```

# c++ - 符号“A”无法解析

> ID：10461031
> 
> 赞同：2
> 
> 时间：2012-05-05T10:36:26.927
> 
> 标签：c++, eclipse, oop, header, eclipse-cdt

我有这个问题 Symbol 'A' could not be resolved in file Bh ，我正在为 C/C++ 开发人员使用 Eclipse IDE：

```
//B.h file

#ifndef __B_H__
#define __B_H__

#include "A.h"

class B:  public cs::A{

};

#endif 
```

包括 Ah 文件：

```
//A.h file

#ifndef A_H_
#define A_H_
namespace cs{
class A {

};
}

#endif 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T10:41:09.750

您将类`A`放在命名空间中，在使用它时应该保持命名空间解析：

```
class B:  public cs::A{

}; 
```

或者

```
//B.h file

#ifndef __B_H__
#define __B_H__

#include "A.h"

using namespace cs;

class B:  public A{

};

#endif 
```

不建议这样做（查看 Als 的评论）。

您也可以这样做以避免每次使用时都保留整个命名空间限定`A`（您应该在第一个解决方案中这样做）和`using`所有命名空间：

```
//B.h file

#ifndef __B_H__
#define __B_H__

#include "A.h"

using cs::A;

class B:  public A{

};

#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T10:40:27.610

```
class B: public cs::A{ };
                ^^^^^^ 
```

您需要提供 class 的完全限定名称`A`。

请注意，该类`A`是在命名空间内定义的`cs`，因此您不能在`A`没有命名空间限定的情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:42:27.087

您正在使用命名空间 cs，请记住在声明 B 类时再次使用它。

```
//B.h file

#ifndef __B_H__
#define __B_H__

#include "A.h"

class B:  public cs::A{

};

#endif 
```

# regex - Pawn 语言的 mysql_real_escape_string 等价物是什么？

> ID：10461033
> 
> 赞同：-3
> 
> 时间：2012-05-05T10:36:29.923
> 
> 标签：regex, escaping, mysql-real-escape-string, pawn

我需要[Pawn](http://www.compuphase.com/pawn/pawn.htm)的正则表达式代码。我也需要一个可以与 preg_replace 一起使用的代码。

还有我用的，更差...

所以，我的代码是。

```
$text = preg_replace('/([\\\\\|\'|"])/', '\\\$1', $text); 
```

这是正确的吗？此代码将替换 PHP 文档中给定字符等。但它也替换了所有 \ :/ \n 等！

你有一个只替换以下字符的代码吗？ [http://de3.php.net/manual/de/function.mysql-real-escape-string.php](http://de3.php.net/manual/de/function.mysql-real-escape-string.php)

\x00、\n、\r、\、'、" 和 \x1a

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T21:54:45.027

请记住，直到现在我还没有听说过 Pawn，十分钟的网络搜索发现[了这个](http://pastebin.com/VTyARFn1)和[这个](http://forum.sa-mp.com/showthread.php?t=56564)- 我认为这两个都回答了你的问题。这是假设您正在寻找一种在 Pawn 语言中转义字符串的方法。

正如@Corbin 所说，除非您的语言/库不提供转义功能，否则自己进行转义通常不是一个好主意。但是这个库似乎提供`mysql_real_escape_string`了，就像 PHP 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T13:00:36.417

你创建 Pawn 脚本是为了什么？如果是[SA-MP](http://www.sa-mp.com/)，您应该简单地使用[mysql_real_escape_string](http://wiki.sa-mp.com/wiki/MySQL#mysql_real_escape_string)函数，该函数由所有已发布的 MySQL 插件提供。

使用正则表达式转义 MySQL 是一个非常糟糕的主意，因为不同的 MySQL 服务器有不同的要求。也会慢一些。

# windows-phone-7 - 列表框的文本框项的双向数据绑定上的 Windows 手机异常

> ID：10461034
> 
> 赞同：0
> 
> 时间：2012-05-05T10:36:48.707
> 
> 标签：windows-phone-7, xaml, listbox

我在将文本框绑定到字符串时遇到问题（StringBuilder 也有同样的问题）。

这是xaml：

```
<ListBox x:Name="MyList" ItemsSource="{Binding ListOfBullets, Mode=TwoWay, Converter=StaticResourcedebugConverter}}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                            <local:TaskStepControl Text="{Binding  Mode=TwoWay}" AddHnadler="{Binding DelegateForHandlingAddTaskStep, ElementName=uc}"></local:TaskStepControl>                          
                    </DataTemplate>
                </ListBox.ItemTemplate> 
```

ListBox 的项目是：

```
public ObservableCollection<StringBuilder> ListOfBullets{get{....} set{....}} 
```

我也试过：

```
public ObservableCollection<string> ListOfBullets{get{....} set{....}} 
```

如果我运行该应用程序，我会得到一个未停止的异常“参数不正确。”如果我删除 Mode=TwoWay 那么它可以工作，但正如预期的那样，编辑文本框不会更改 ListOfBullets 中的文本绑定对象；

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:27:02.053

[MSDN 说](http://msdn.microsoft.com/en-us/library/cc189874%28v=vs.95%29.aspx)您不能使用空属性路径进行双向绑定。

我猜绑定引擎只能对特定属性执行双向绑定，而不是对对象本身。

*我对为什么不允许这样做的想法：*

为简单起见，您可以认为 TwoWay 绑定的“写入”部分只是在数据源对象上设置提供的值。所以这个标记`Text={Binding Name, Mode=TwoWay}` 类似于 C# 代码：`dataSource.Name = textBox.Text`文本更新（当然，整个绑定工作流程要复杂得多，并且在幕后做其他事情，但现在这无关紧要）。

您的示例尝试执行类似的操作`listItem = textBox.Text`，但不会更新您的*ListOfBullets*的实际项目。请记住，我已经大大简化了绑定的工作方式，只是为了让您了解正在发生的事情。

*你能做什么：*

创建一个包装*模型*类，它将包含您的字符串值并绑定到

`public ObservableCollection<Model> ListOfBullets {get; set;}`

和`<local:TaskStepControl Text={Binding Value, Mode=TwoWay} />`

# c# - “2012-05-04T19:36:30.5+00:00”是否代表 UTC 时间？巴基斯坦的标准化时间是多少？

> ID：10461035
> 
> 赞同：0
> 
> 时间：2012-05-05T10:37:06.103
> 
> 标签：c#, silverlight, windows-phone-7

这应该相当简单，但在时区方面我是最糟糕的。我正在从 Web 服务中获取生成的事件的值，如下所示，

*   土耳其东部：2012-05-04T19:36:30.5+00:00
*   希腊南部：2012-05-04T19:33:32.6+00:00
*   波兰：2012-05-04T19:09:36.3+00:00

上述值是否代表 UTC 的日期时间？（我从土耳其东部开始，但与 UTC/GMT 相差 +2:00，这让我很困惑）。

我的确切问题是我需要将以上日期时间转换为 WP7 设备上的本地时区，那么下面的代码是正确的方法吗？

```
//Convert first To UTC Date Time
DateTime convertedDate = DateTime.SpecifyKind( DateTime.Parse(elementTimeValue.Value),
                                DateTimeKind.Utc);

//Now to local time
convertedDate.ToLocalTime(); << Will this return me with time adjusted to that of operating device (WP7) 
```

这就是我得到的每一个（当设备在巴基斯坦时），

*   2012 年 5 月 4 日下午 7:36:30 < 土耳其东部
*   2012 年 5 月 4 日下午 12:33:32 < 希腊南部
*   2012 年 5 月 4 日下午 12:9:36 < 波兰

这些是正确的吗？如果没有，我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T10:51:49.603

这些**不是**UTC 时间，因为它们具有时区规范，即使它是`00:00`. UTC 时间的示例是`2012-11-05T13:15:30Z`（不是`Z`最后的）。[在这里](http://www.w3.org/TR/NOTE-datetime)查看更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:23:41.607

如果您要去当地时区，到目前为止，最简单的方法应该是使用[DateTimeOffset 的 Parse](http://msdn.microsoft.com/en-us/library/bb351654.aspx)，然后只需访问[LocalDateTime 属性](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.localdatetime.aspx)（如果您只需要 DateTime）或使用[ToLocalTime](http://msdn.microsoft.com/en-us/library/system.datetimeoffset.tolocaltime.aspx)将其转换。

这是一个使用您的字符串之一的示例

```
C:\Users\James » [datetimeoffset]::parse('2012-05-04T19:36:30.5+00:00').tostring()
5/4/2012 7:36:30 PM +00:00
C:\Users\James » [datetimeoffset]::parse('2012-05-04T19:36:30.5+00:00').tolocaltime().tostring()
5/4/2012 3:36:30 PM -04:00
C:\Users\James » 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:56:58.060

UTC 与时区无关。你只有一个日期和时间戳，就是这样。然后，您可以将此时间戳转换为相关时区。因此，例如要将其转换为土耳其东部时间，您需要使用操作系统的日期库为时间戳添加两个小时。

UTC 时区以偏移量的“Z”结尾。您发布的是格林威治标准时间 (+00:00)。这与 UTC 类似，因为它具有零偏移，但在技术上并不相同。

**编辑：** 以下网站非常有助于确认您的时区转换/日期算术是否正确（查看时区计算器）：[http ://www.timeanddate.com/](http://www.timeanddate.com/)

对于您的问题，您需要使用*TimeZone.CurrentTimeZone*从用户的计算机/移动设备获取时区，以便您知道要转换的内容。我认为您可以使用 TimeZoneInfo.ConvertTime() 进行转换。

# android - MonoDroid 中的 Android Contextual ActionBar 和 ListView 多选支持：ChoiceMode.MultipleModal 在哪里？

> ID：10461036
> 
> 赞同：0
> 
> 时间：2012-05-05T10:37:16.500
> 
> 标签：android, android-listview, xamarin.android, android-actionbar

要启用对 ListView 的 CAB 支持，我需要将 ListView.ChoiceMode 设置为 ChoiceMode.MultipleModal，这在 MonoDroid 的 ChoiceMode 枚举中不存在。在这种情况下如何启用 CAB 支持？等待下一个版本的 MonoDroid 还是别的什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:48:44.490

看起来它在 Android.Widget.AbsListViewChoiceMode 中。

所以你需要：

`myList.ChoiceMode = (ChoiceMode)AbsListViewChoiceMode.MultipleModal`

# extjs4 - ExtJs：发送 Radigroup 名称和值作为参数

> ID：10461037
> 
> 赞同：0
> 
> 时间：2012-05-05T10:37:27.470
> 
> 标签：extjs4

在我的表单中，我使用如下文本字段和单选组和按钮，

```
var radiogroup = new Ext.form.RadioGroup({
                fieldLabel: 'Specimen ?',
                allowBlank: false,
                name:'isSpecimen',
                anchor: '85%',
                items: [
                    {
                    boxLabel: 'Yes',
                    name: 'radio',
                    inputValue: 'Y'
                 },
                {
                    boxLabel: 'No',
                    name: 'radio',
                    inputValue: 'N',
                    checked:true
                }
                ]                   
            });

var createOrderForm = new Ext.FormPanel({               
                renderTo: "createOrder",
                frame: true,                
                width: 500,                 
                items: [
                {
                    xtype: 'textfield',
                    fieldLabel: 'Instruction',
                    name: 'instruction',
                    width: 300,
                    allowBlank:false
                },
                radiogroup,                     
                {
                            xtype : "textfield",
                            id : 'textfield1',
                            fieldLabel : "Type",
                            name : "type",
                            hidden:true,
                            width: 300,
                            disabled:true
                        }],
                        buttons:[{ 
                            text:'Create',
                            formBind: true,  
                            listeners: {
                                click: function(){
                                    Ext.Ajax.request({
                                        url : url+'/lochweb/loch/order/persist',
                                        params : createOrderForm.getForm().getValues(),
                                        success : function(response){
                                             console.log(response.responseText); //<--- the server response
                                             window.location = url+'/lochportal/viewSuccessForm.do';
                                        }
                                    });
                                }
                            }
                            }]
            }); 
```

当我单击**创建按钮**时，单选组名称和值未作为参数传递给 url，但其他控件名称和值正确传递。如何将单选组名称和输入值作为参数传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:45:16.867

当然会发送所选无线电的名称和值（在这里您将它们指定为“Y”/“N”）。我建议你删除`name`RadioGroup 并将里面的收音机名称设置为“isSpecimen”。

# c# - 是否可以将某个文件夹中的所有图像添加到列表或其他内容中？

> ID：10461039
> 
> 赞同：2
> 
> 时间：2012-05-05T10:38:08.343
> 
> 标签：c#, wpf

例如，我的项目中的“图像”文件夹中有 100 张图像。决定定义 100 次新图像并将它们添加到我的列表中，这太疯狂了。我想一定有更简单的方法..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T11:35:20.830

列出您的图像扩展名：

```
public static readonly List<string> ImageExtensions = new List<string> {
   ".jpg",
   ".jpe",
   ".bmp",
   ".gif",
   ".png"
}; 
```

要制作图像列表，您可以遍历文件夹文件，根据它们的扩展名区分它们：

```
string YourDir = "Images\\";
List<Image> MyImgList = new List<Image>();
string[] images = System.IO.Directory.GetFiles(YourDir);
images = images.Where(F => ImageExtensions.Contains(System.IO.Path.GetExtension(F))).ToArray();

foreach (string Img in images) {
   BitmapImage bmp = new BitmapImage();
   bmp.BeginInit();
   bmp.UriSource = new Uri(Img, UriKind.Relative);
   bmp.EndInit();
   MyImgList.Add(new Image { Source = bmp });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:42:54.887

```
Directory.GetFiles(@"c:\images", ". jpg") 
```

# jsf - 使用谷歌地图显示车辆在谷歌地图上移动的实时车辆跟踪

> ID：10461040
> 
> 赞同：2
> 
> 时间：2012-05-05T10:38:08.607
> 
> 标签：jsf, richfaces, javabeans, ajax4jsf

我正在从事实时车辆跟踪项目。

我每 6 秒获取一次车辆位置，并且每次都将 lat 和 long 存储在静态变量中。

我想在使用 ajax 更改位置后在谷歌地图上显示车辆移动。
我已将代码编写为：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="f" uri="http://java.sun.com/jsf/core"%>
<%@ taglib prefix="h" uri="http://java.sun.com/jsf/html"%>
<%@ taglib uri="http://richfaces.org/a4j" prefix="a4j"%>
<%@ taglib uri="http://richfaces.org/rich" prefix="rich"%>
<%@ taglib uri="http://code.google.com/p/gmaps4jsf/" prefix="m"%>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<META HTTP-EQUIV=" " CONTENT="6">
<title>Insert title here</title>

<script
src="http://maps.google.com/maps?file=api&amp;v=2&amp;key=ABQIAAAAtRLgopSfFn_inKV4Mb4dwRQrh986W3YN5ROngdOVRv-81htxfBSHsTcVUm4HRkCt9bSp5mP_3_snrw"
type="text/javascript">
</script>

</head>

<body>

<f:view>
    <h:form id="aaaa">
        <h:panelGrid columns="2">
            <m:map id="mp" width="500px" height="500px" latitude="  #{mp3.lat} "
                longitude=" #{mp3.lon}" zoom="15">
                <m:mapControl name="GMapTypeControl" />
                <m:mapControl name="GLargeMapControl"
                    position="G_ANCHOR_BOTTOM_RIGHT" />

                <m:marker id="m" latitude="  #{mp3.lat} " longitude=" #{mp3.lon}">

    <m:htmlInformationWindow htmlText="Start<br>  " />

               <a4j:support event="onchange" action="  " reRender="m"></a4j:support>

                </m:marker>
            </m:map>
        </h:panelGrid>
        <h:commandButton value="Start" action="#{mp3.meth}" />
        <h:commandButton value="Path Map" action="pathmp" />
    </h:form>

</f:view>
</body>
</html> 
```

我的问题是如何在不重新加载所有页面的情况下使用 ajax a4j 在谷歌地图上移动车辆标记？

我使用的技术是
- jsf
- richfaces
- a4j
- javaBean

谢谢

# python - 如何使 tkinter 标签背景透明？

> ID：10461045
> 
> 赞同：7
> 
> 时间：2012-05-05T10:39:17.423
> 
> 标签：python, colors, tkinter, label, transparent

我有一个带有标签的窗口作为我的框架。我这样做是因为我想要背景中的图像。但现在我在使用其他标签时遇到了麻烦。我用来实际标记事物的其他标签没有透明背景。有没有办法让这些标签的背景透明？

```
import Tkinter as tk

root = tk.Tk()
root.title('background image')

image1 = Tk.PhotoImage(file='image_name.gif')

# get the image size
w = image1.width()
h = image1.height()

# make the root window the size of the image
root.geometry("%dx%d" % (w, h))

# root has no image argument, so use a label as a panel
panel1 = tk.Label(root, image=image1)
panel1.pack(side='top', fill='both', expand='yes')

# put a button/label on the image panel to test it
label1 = tk.Label(panel1, text='here i am')
label1.pack(side=Top)

button2 = tk.Button(panel1, text='button2')
button2.pack(side='top')

# start the event loop
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-09-01T12:19:32.430

我认为它可以帮助，所有黑色将是透明的

```
root.wm_attributes('-transparentcolor','black') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-05T10:59:22.343

Tk 中的透明背景不支持它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-04T13:23:49.273

如果您正在处理图像并将文本放在它们上面，最方便的方法是 - 我认为 - 使用`Canvas`小部件。

`tkinter Canvas`小部件具有方法`.create_image(x, y, image=image, options)`和`.create_text(x, y, text="Some text", options)`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-23T20:59:45.197

用这个 ：

```
from tkinter import *

main=Tk()
photo=PhotoImage(file='test.png')
Label(main,image=photo,bg='grey').pack()
#your other label or button or ...
main.wm_attributes("-transparentcolor", 'grey')
main.mainloop() 
```

如果使用这项工作，`bg='grey'`您可以在第 7 行更改它

祝你好运 ：）

# jquery - Jquery 包含选择器、正则表达式

> ID：10461047
> 
> 赞同：0
> 
> 时间：2012-05-05T10:39:48.517
> 
> 标签：jquery, regex, jquery-selectors, contains

这是我的代码：
假设`name`设置为`john`

```
$("#first_table").append($('#second_table').find("tr:contains(" + name + ")")); 
```

基本上我的网站上有 2 张桌子。我想将元素从第一个移动到第二个，但前提是它们完全匹配。我怎样才能做到这一点？

现在，如果我有（例如）`john` `john #1`，`john #2`在我的桌子上，它们都会被移动。我只想搬家`john`离开`john #1`，`john #2` 谢谢！编辑：我希望代码能够完全匹配变量`name`。所以如果`name`是`JOHN`它必须只得到`JOHN`。如果是`JOHN #1`，它必须只有 get`JOHN #1`等等。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:11:27.740

这可能是缺少引号的情况。尝试添加单引号`name`，如下所示。

```
$("#first_table").append($('#second_table').find("tr:contains('" + name + "')")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:50:52.163

由于每个名称大小写都对`:contains(" + name +")`语句有效，因此它匹配所有名称。

试试这个，用 a`:not`省略带“#”的那个

```
$("#first_table").append($('#second_table').find("tr:contains(" + name + "):not(:contains('#'))")); 
```

更新：

如果您想准确了解里面的值。然后使用这样的东西

```
$("#second_table tr td").each(function() {
   if($(this).text() == 'John') { 
     $(this).closest("tr").appendto($("#first_table")); //find the cotaining tr and append to another table
   }
}); 
```

# iphone - 让后台线程等到另一个后台线程在iphone中完成

> ID：10461049
> 
> 赞同：0
> 
> 时间：2012-05-05T10:39:51.370
> 
> 标签：iphone, ios, multithreading, background-process

如何使背景线程在另一个后台线程完成之前不工作，以及如何使其在第一个后台线程完成后启动它的线程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:48:20.947

使用标志来处理此类事件，如下所示...

```
BOOL isYourthreadexecuting = NO;

- (void)beginThread {   
    isYourthreadexecuting = YES;

    [self performSelectorInBackground:@selector(backgroundThread) withObject:nil];
}
- (void)backgroundThread {
    [myClass performLongTask];

    // Done!
    isYourthreadexecuting = NO;
}
- (void)waitForThread {
    if (! isYourthreadexecuting) {
        // Thread completed
        [self callyourmethod];
    }
} 
```

**已编辑>>根据使用注释添加**

我建议您使用[NSOperationQueue](http://www.icodeblog.com/2010/03/04/iphone-coding-turbo-charging-your-apps-with-nsoperation/)进行多线程处理。

希望，这会让你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-04T13:51:31.173

正如我的评论中所述，您可以使用 GCD 的串行调度队列。这是一个示例代码来演示：

```
- (IBAction)buttonSerialQ2Pressed:(id)sender 
{
    dispatch_queue_t serialdQueue;
    serialdQueue = dispatch_queue_create("com.mydomain.testbed.serialQ2", NULL);
    dispatch_async(serialdQueue, ^{
        //your code here
        [self method1];
    });
    dispatch_async(serialdQueue, ^{
        //your code here
        [self method2];
    });
    dispatch_async(serialdQueue, ^{
        //your code here
        [self method2];
    });
    dispatch_async(serialdQueue, ^{
        //your code here
        [self method3];
    });
}

-(void)method1
{
    for (int i=0; i<1000; i++) 
    {
        NSLog(@"method1 i: %i", i);
    }
}

-(void)method2
{
    for (int i=0; i<10; i++) 
    {
        NSLog(@"method2 i: %i", i);
    }
}

-(void)method3
{
    for (int i=0; i<100; i++) 
    {
        NSLog(@"method3 i: %i", i);
    }
} 
```

# c++ - HLSL 和 DX Skybox 问题（创建接缝）

> ID：10461052
> 
> 赞同：2
> 
> 时间：2012-05-05T10:40:24.930
> 
> 标签：c++, directx, direct3d, hlsl

我正在（重新）学习 DirectX 并已进入 HLSL 编码。在使用我的自定义 .fx 文件之前，我为带有四边形顶点缓冲区的游戏创建了一个天空盒。一切正常...纹理映射和精美包装。然而，现在我已经设置了 HLSL 来管理顶点，四边形相交的地方有独特的接缝。纹理都正确排列我只是无法摆脱这个该死的接缝！

我倾向于认为问题出在 texCube 上……或者更确切地说是这里的所有纹理信息。我正在 DX 中对四边形进行纹理处理……可能只是我仍然不太了解两者之间的联系……不确定。无论如何，提前感谢您的帮助！

这是 .fx 文件：

```
float4x4 World;
float4x4 View;
float4x4 Projection;

float3 CameraPosition;

Texture SkyBoxTexture; 

samplerCUBE SkyBoxSampler = sampler_state 
{ 
   texture = <SkyBoxTexture>; 
   minfilter = ANISOTROPIC; 
   mipfilter = LINEAR; 
   AddressU = Wrap; 
   AddressV = Wrap;
   AddressW = Wrap;
};

struct VertexShaderInput
{
    float4 Position : POSITION0;
};

struct VertexShaderOutput
{
    float4 Position : POSITION0;
    float3 TextureCoordinate : TEXCOORD0;
};

VertexShaderOutput VertexShaderFunction(VertexShaderInput input)
{
    VertexShaderOutput output;

    float4 worldPosition = mul(input.Position, World);
    float4 viewPosition = mul(worldPosition, View);
    output.Position = mul(viewPosition, Projection);

    float4 VertexPosition = mul(input.Position, World);
    output.TextureCoordinate = VertexPosition - CameraPosition;

    return output;
}

float4 PixelShaderFunction(VertexShaderOutput input) : COLOR0
{
    return texCUBE(SkyBoxSampler, normalize(input.TextureCoordinate));
}

technique Skybox
{
    pass Pass1
    {
        VertexShader = compile vs_2_0 VertexShaderFunction();
        PixelShader = compile ps_2_0 PixelShaderFunction();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:26:00.977

您需要使用 setsampler 状态钳制纹理坐标以消除接缝。这个[玩具制造商](http://www.toymaker.info/Games/html/skybox.html)页面解释了这一点。Toymaker 是学习 Direct3D 的绝佳网站，如果您有任何问题，请查看教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T19:34:29.157

您可能希望仅使用一个四边形来绘制天空盒。您需要的一切都是 World*View*Proj 矩阵的逆矩阵，即 (World*View*Proj)^(-1)。

四边形的顶点应该是：(1, 1, 1, 1), (1, -1, 1, 1), (-1, 1, 1, 1), (-1, -1, 1, 1 ）。

然后在 VS 中计算纹理坐标：

```
float4 pos = mul(vPos, WorldViewProjMatrixInv);
float3 tex_coord = pos.xyz / pos.w; 
```

最后在 PS 中对纹理进行采样：

```
float4 color = texCUBE(sampler, tex_coord); 
```

不用担心任何接缝！:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T21:08:16.033

为了避免接缝，您需要在单个 DrawIndexedPrimitive 调用中绘制天空盒，最好使用三角形条。不要将每个面绘制为用单独的矩阵或类似的东西转换的单独的图元 - 你会得到接缝。如果您出于某种无法解释的原因不想对天空盒部件使用单个 DrawIndexedPrimitive 调用，那么您必须确保使用相同的矩阵（每次调用中使用相同的世界 + 视图 + 投影矩阵）和相同的角坐标值绘制所有面顶点 - 即“顶”面应该对“侧面”使用的角使用完全相同的向量（位置）。

另一件事是您应该将天空盒存储为

1.  立方体贴图（看起来就是你正在做的） - 只为天空盒制作 8 个顶点，将它们绘制为索引图元。
2.  或者一个未包装的“地图集”纹理，其中填充了未使用的区域。带边框颜色。

或者 - 如果你对着色器很好，你可以使用着色器“光线追踪”天空盒。

# python - 执行python程序

> ID：10461054
> 
> 赞同：4
> 
> 时间：2012-05-05T10:40:32.897
> 
> 标签：python, bash, path, executable

我已经在网上搜索了很长一段时间的答案，但这让我非常头疼：

我正在使用 Ubuntu 12.04，我想在不使用完整路径的情况下从终端执行 Python 脚本。所以我通过将以下内容放入 ./bashrc 将 /home/kyril/python/scripts/ 添加到 PATH 变量中：

```
kyrilpathvariable="/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/home/kyril/Python/scripts/:/home/kyril/Bash/scripts"

if [ "$kyrilpathvariable" = "$PATH" ]; then
    echo PATH already exported

else

PATH=$PATH:/home/kyril/Python/scripts/
PATH=$PATH:/home/kyril/Bash/scripts/
export PATH

fi 
```

（我知道 if 子句不是必需的，但如果我键入 exec bash，我不喜欢在我的 PATH 中包含两次所有内容。）

现在的问题是：这对我的 Bash 脚本非常有效，所以在通过 chmod 使它们可执行后，我只需键入`$ script.sh`并执行它。但是，如果我键入`$ python3 script.py`以下错误，则会引发：`python3: can't open file 'script.py': [Errno 2] No such file or directory`

如果我输入脚本的完整路径，它就可以工作。有人知道我做错了什么吗？我必须将目录添加到 PYTHONPATH 吗？（据我了解，这仅有助于导入模块）。

多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T11:02:13.730

直接调用时`python3`，python 会运行您告诉它的脚本文件，而不使用`$PATH`查找它。 `PYTHONPATH`无关紧要——用于搜索 Python 模块。

我猜你在自己运行时遇到了错误的解释器被调用的问题`script.py`。我不知道你脚本的第一行是什么，但应该是这样的：

```
#!/usr/bin/env python3 
```

或者，如果您需要更精细的控制：

```
#!/usr/bin/env python3.2 
```

对于 Python 2 脚本：

```
#!/usr/bin/env python2 
```

或者：

```
#!/usr/bin/env python2.7 
```

在尝试使用它们之前，您应该检查这些可执行文件是否存在于您的系统中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:38:43.777

为避免路径中出现重复条目​​，您可以执行以下操作：

```
for dir in Python Bash; do
  dir_to_add="$HOME/$dir/scripts"
  case ":$PATH:" in
    *:"$dir_to_add":*) ;; # path already contains dir, do nothing
    *) PATH+=":$dir_to_add" ;;
  esac
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:52:41.373

我猜想当 python 搜索输入文件时路径变量会被忽略。Python 开始在当前目录中搜索“script.py”，但不知道该文件声明了一个路径变量，因此无法找到它。

不幸的是，我不确定如何解决它，但也许对变量更有经验的人可以启发我们？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T11:13:43.563

```
python3 $(type -P script.py) 
```

告诉 Bash 在 中查找`PATH`可执行文件并提供其位置和名称。

例如：

```
$ type -P script.py
/usr/local/bin/script.py 
```

# regex - 如何仅在小数分隔符之前插入千位分隔符

> ID：10461055
> 
> 赞同：2
> 
> 时间：2012-05-05T10:40:41.697
> 
> 标签：regex, string, vim, replace

我使用这个正则表达式将千位分隔符放在一个字符串中：

```
while matchstr(mystr, '\(\d\)\(\d\{3}\)\(\D\|\s\|$\)') != ''
    let mystr = substitute(mystr, '\(\d\)\(\d\{3}\)\(\D\|\s\|$\)', '\1.\2\3', 'g')
endwhile 
```

为了

```
let mystr = '2000000' 
```

上面的代码给出

```
2.000.000 
```

问题是当有小数分隔符时，它还会在小数分隔符后面的数字的小数部分放置千位分隔符（以下是逗号）。

例如，

```
let mystr = '2000000,2346' 
```

导致

```
2.000.000,2.346 
```

虽然我希望它是

```
2.000.000,2346 
```

我试图调整上面的代码，但没有找到令人满意的解决方案。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T02:09:04.380

使用以下对`substitute()`函数的调用，而不是问题中列出的整个循环。

```
substitute(s, '\(\d,\d*\)\@<!\d\ze\(\d\{3}\)\+\d\@!', '&.', 'g') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:45:11.527

**试试这个（仅适用于正整数）：**

**查找**

```
(?<=[0-9])(?=(?:[0-9]{3})+(?![0-9])) 
```

**用。。。来代替**

```
, 
```

* * *

我还没有尝试过`vim`它是否有效。但该模式与 PCRE 兼容。

* * *

**解释**

```
<!--
(?<=[0-9])(?=(?:[0-9]{3})+(?![0-9]))

Options: case insensitive; ^ and $ match at line breaks

Assert that the regex below can be matched, with the match ending at this position (positive lookbehind) «(?<=[0-9])»
   Match a single character in the range between “0” and “9” «[0-9]»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=(?:[0-9]{3})+(?![0-9]))»
   Match the regular expression below «(?:[0-9]{3})+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
      Match a single character in the range between “0” and “9” «[0-9]{3}»
         Exactly 3 times «{3}»
   Assert that it is impossible to match the regex below starting at this position (negative lookahead) «(?![0-9])»
      Match a single character in the range between “0” and “9” «[0-9]»
--> 
```

# loops - 增加表单字段名称中的值

> ID：10461059
> 
> 赞同：0
> 
> 时间：2012-05-05T10:41:14.473
> 
> 标签：loops, coldfusion

我需要验证 X 个字段。每个字段都被命名为“testFieldX”，其中 X 是任何大于 1 的实数。

所以基本上我在表单中拥有的是带有名称的字段：

```
testField1
testField2
testField3 
```

等等

我需要遍历所有这些并进行验证。

假设我有 5 个字段。

然后

```
<cfloop index="i" from="1" to="5">
    <cfif form.testField & i EQ "">
        Show error
    </cfif>
</cfloop> 
```

但是它不起作用。我收到一个错误，字段名称“testField”不存在，这是真的（只有 testField1+）存在。似乎事情没有串联。它仅适用于字符串吗？

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:03:53.017

你所追求的语法是：

```
<cfif form["testfield" & i] EQ ""> 
```

这将按照您的预期连接字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:05:57.803

```
<cfif structKeyExists(form,"test1")>
    <cfloop from="1" to="3" index="i">
        <cfif form["test" & i] eq ''>
            Error : <cfoutput>#i#</cfoutput><br />
        </cfif>
    </cfloop>
</cfif>

<form name="sub" method="post">
    Test1: <input type="text" name="test1" id="test1" /><br />
    Test2: <input type="text" name="test2" id="test2" /><br />
    Test3: <input type="text" name="test3" id="test3" /><br />
    <input type="submit" value="Submit" />
</form> 
```

# zend-framework - 如何使用 Zend_Loader_Autoloader

> ID：10461060
> 
> 赞同：0
> 
> 时间：2012-05-05T10:41:16.330
> 
> 标签：zend-framework

我认为这是一个相当简单的问题，但是我只是没有在 Zend 框架中自动加载。

基本上，我有标准的 Zend 项目布局，包括应用程序/模型、应用程序/控制器、应用程序/视图目录。我还添加了一个 application/forms 目录，它包含的类将被命名为 Application_Form_*

如何使用自动加载器注册新目录？

谢谢...

金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:59:06.853

您不需要使用自动加载器注册新目录。如果您创建一个表单，它应该看起来像这样：-

应用程序/forms/Myform.php

```
class Application_Form_Myform extends Zend_Form
{
    public function init()
    {
        //Put your code here
    }
} 
```

然后，您可以像这样实例化您的表单（例如在您的控制器中）：-

```
$myform = new Application_Form_Myform(); 
```

Zend Framework 将为您自动加载该类。

[http://framework.zend.com/manual/en/learning.quickstart.create-form.html](http://framework.zend.com/manual/en/learning.quickstart.create-form.html)

[手册中有关于Zend Framework 中 Autoloading](http://framework.zend.com/manual/en/learning.autoloading.html)的说明。

从中摘录：-

> Zend Framework 借鉴了 » PEAR 的一个想法，即类名与文件系统具有 1:1 的关系。简单来说就是为了解析文件的路径，把下划线（“_”）换成目录分隔符，然后加上后缀“.php”。例如，类“Foo_Bar_Baz”将对应于文件系统上的“Foo/Bar/Baz.php”。假设还可以通过 PHP 的 include_path 设置解析类，这允许 include() 和 require() 通过 include_path 上的相对路径查找来查找文件名。

这基本上意味着文件夹并不都需要在自动加载器中注册。只要您遵循命名约定和正确的大小写，它就可以很高兴地在应用程序或库/Zend 文件夹下的任何文件夹中找到文件。

application/ 下以 's' 结尾的默认文件夹是专门处理的特殊情况`Zend_Application_Module_Autoloader::initDefaultResourceTypes()`，不应与主要的自动加载机制混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T10:53:41.090

使用`$resourceLoader`：

```
$resourceLoader->addResourceTypes(array(
    'acl' => array(
        'path'      => 'acls/',
        'namespace' => 'Acl',
    ),
    'form' => array(
        'path'      => 'forms/',
        'namespace' => 'Form',
    ),
    'model' => array(
        'path'      => 'models/',
        'namespace' => 'Model',
    ),
)); 
```

请参阅：http: [//framework.zend.com/manual/en/zend.loader.autoloader-resource.html](http://framework.zend.com/manual/en/zend.loader.autoloader-resource.html)

# android-layout - 在gridview中使用xml中图像的整数数组

> ID：10461061
> 
> 赞同：1
> 
> 时间：2012-05-05T10:41:21.543
> 
> 标签：android-layout

我尝试在 gridview.bt 中使用我无法获得的整数值图像。

这是我的价值观/string.xml

```
<integer-array name="anim">
    <item >@drawable/goat1</item>
    <item >@drawable/lamb1</item>
    <item>@drawable/bear</item>
    <item>@drawable/lion</item>
</integer-array> 
```

这是我的java代码：

公共类 GridViewActivity 扩展 Activity {

```
 **int[] anim=getResources().getIntArray(R.array.anim);**

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));
} 
```

}

公共类 ImageAdapter 扩展 BaseAdapter { 私有上下文 mContext;

```
public ImageAdapter(Context c) {
    mContext = c;
}

public int getCount() {
    return mThumbIds.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) { 
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(anim[position]);
    return imageView;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T10:36:01.910

```
use TypedArray,
TypedArray icons;
Resources res = getResources();
icons = res.obtainTypedArray(R.array.img); 
```

然后在图像适配器中，而不是`imageView.setImageResource(anim[position]);`：

```
Drawable drawable = icons.getDrawable(position);
imageview.setImageDrawable(drawable); 
```

# osgi - 开源 OSGi DMT 管理实现

> ID：10461062
> 
> 赞同：1
> 
> 时间：2012-05-05T10:41:27.920
> 
> 标签：osgi

是否有 OSGi DMT 管理服务的开源实现？[维基百科](http://en.wikipedia.org/wiki/OSGi_Specification_Implementations)列出了两种实现，似乎都不是开源的，但也许它缺少一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:59:44.360

我不相信 DMT Admin 规范有开源实现。顺便说一句，它已在即将发布的 Residential 4.3 和 Compendium 4.3 规范中更新到 2.0 版。

# android - 如何在 onCreate() 活动方法中创建 FlurryAgent.logEvent？

> ID：10461063
> 
> 赞同：1
> 
> 时间：2012-05-05T10:41:35.020
> 
> 标签：android, flurry

文件说，那

> onStartSession 应该从相关活动的 onStart 方法中调用。

*在这种情况下，如何从onCreate()*方法进行logEvents() ？如果我将 onStartSession() 放到*onCreate()*方法中或者有另一种方法可以解决我的问题，库会正常工作吗？

**更新**

在里面`onCreate()`，我通过对服务器的 web 请求启动 AsyncTask，所以`onPreExecute()`我想把`FlurryAgent.logEvent`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T18:52:49.117

由于 Activity 生命周期的性质，我不建议调用`FlurryAgent.onStartSession()`from 。`onCreate()`如果用户离开某个 Activity 一段时间（接听电话、发短信等）然后返回，`onStart()`将调用但不会调用`onCreate()`。如果不调用`onStartSession()`from `onStart()`，您将不会跟踪此新会话，并且您可能会遇到 Activity 中发生的事件的错误。

您要在其中跟踪的事件的性质是什么`onCreate()`？通常你想在这个方法中设置 UI 和 Activity 的任何其他组件，但此时不会有用户交互，所以我认为你可以在`onStart()`不进行大量重构的情况下跟踪 Activity 的状态。

（免责声明：我在 Flurry 开发 Android SDK）

# android - 如何从 Android 设备中获取音频文件的路径或 uri？

> ID：10461065
> 
> 赞同：9
> 
> 时间：2012-05-05T10:41:47.693
> 
> 标签：android, audio

我正在创建一个简单的应用程序，我想在其中播放声音。在应用程序上按下按钮播放时，它将播放声音。为了播放我正在使用的声音：

```
MediaPlayer mediaPlayer;
        mediaPlayer = MediaPlayer.create(this, R.raw.test_cbr);
        mediaPlayer.setOnCompletionListener(new OnCompletionListener()
        {
            @Override
            public void onCompletion(MediaPlayer mp)
            {
                // TODO Auto-generated method stub
                Toast.makeText(getApplicationContext(), "Completed",
                   Toast.LENGTH_LONG).show();

            }
        });
mediaPlayer.start(); 
```

它工作正常。

但是现在我希望用户应该能够从设备中选择一个音频文件，这样当他或她按下播放按钮时，应该播放所选的声音。

我没有得到任何意图操作，例如可以选择图像。

```
Intent photo_picker_intent = new Intent(Intent.ACTION_PICK);
photo_picker_intent.setType("image/*");
startActivityForResult(photo_picker_intent, PHOTOS_FROM_GALLERY); 
```

在上面的代码中，用户只是去画廊。单击任何图像后，他或她将获得一个图像 URI，可用于在应用程序中显示图像。除了音频文件选择之外，我也想做同样的事情。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-05T10:49:05.973

只需使用这两行，

```
Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI);
startActivityForResult(Intent.createChooser(intent, "Gallery"), reqCode); 
```

或者，

```
 Intent intent = new Intent();
        intent.setType("audio/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(Intent.createChooser(intent,"Select Audio "), reqCode); 
```

# iphone - 以字符串格式对包含数字的 NSMutableArray 进行排序

> ID：10461070
> 
> 赞同：0
> 
> 时间：2012-05-05T10:42:46.703
> 
> 标签：iphone, nsmutablearray, sorting

我在对包含 int 的 NSStrings 的 NSMUtableArray 进行排序时遇到了一个小问题。我是这样排序的

```
 scoreString=[NSString stringWithFormat:@"%lld",GameScore];
    [scorearr addObject:scoreString];
    NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];
    NSArray *scoreArray= [scorearr sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]];
    scorearr =(NSMutableArray *)ary; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:15:39.767

您正在使用可变数组，因此最好编写

```
NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];
[scorearr sortUsingDescriptors:[NSArray arrayWithObject: sortOrder]]; 
```

这样你就不会在排序时创建新数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:06:37.067

好的，我已经完成了，

```
 NSNumber *inrank=[NSNumber numberWithInt:GameScore];
    scoreString=[NSString stringWithFormat:@"%lld",GameScore];
    [scorearr addObject:inrank];
    NSLog(@"%@",scorearr.description);
    //sorting array
    sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)];
    NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];
    NSArray *scoreArray= [scorearr sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]];
    scorearr =(NSMutableArray *)scoreArray;
    NSLog(@"%@",scoreArray.description); 
```

# php - 剥离字符串的最后一个空行？

> ID：10461073
> 
> 赞同：0
> 
> 时间：2012-05-05T10:42:59.473
> 
> 标签：php, regex

我知道`^`and `$`，但我想删除字符串的最后一个空行，而不是每个。

```
$s = 'Foo

Bar

Baz
'; 
```

应该返回为

```
$s = 'Foo

Bar

Baz; 
```

使用正则表达式如何在 PHP 中完成？

你可以在这里试试：http: [//codepad.viper-7.com/p3muA9](http://codepad.viper-7.com/p3muA9)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:47:27.967

```
<?php

$s = 'Foo

Bar

Baz
';

$s_replaced = preg_replace('//', '', $s);

$s_replaced = rtrim($s_replaced);
$out = '<textarea cols=30 rows=10>'.$s_replaced.'</textarea>';

echo $out;

?> 
```

使用`rtrim()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T10:48:14.750

利用：

```
$s_replaced = preg_replace("/".PHP_EOL."$/", '', $s); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T10:48:39.047

**尝试这个：**

**查找：**

```
(?s)\s+$ 
```

**用。。。来代替：**

```
none 
```

**解释：**

```
<!--
(?s)\s+$

Options: case insensitive; ^ and $ match at line breaks

Match the remainder of the regex with the options: dot matches newline (s) «(?s)»
Match a single character that is a “whitespace character” (spaces, tabs, and line breaks) «\s+»
   Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert position at the end of a line (at the end of the string or before a line break character) «$»
--> 
```

# objective-c - ObjC 程序中对象的自动释放

> ID：10461077
> 
> 赞同：0
> 
> 时间：2012-05-05T10:43:24.600
> 
> 标签：objective-c

这里我们有一些[关于内存管理的例子](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

在第一个例子中

```
- (NSString *) fullName {
    NSString *string = [[[NSString alloc] initWithFormat:@"%@ %@", self.firstName,       self.lastName] autorelease];
    return string;
} 
```

在这个例子中是如何调用上述方法

```
{
   Person *aPerson = [[Person alloc] init];
   NSString *name = aPerson.fullName;
   [aPerson release];
} 
```

所以我假设 *name 在代码流到达右花括号后自动释放。

真的吗？

通常，对象的自动释放取决于引用该对象的变量的范围和生命周期。

是否有任何标准可以管理 Objective-C 程序中的对象自动释放池？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T13:57:39.953

当对象被推送到的自动释放池被**显式**`autorelease`释放/排空时，自动释放对象的释放发生，前提是此时对象的保留计数为 0+（即，除了自动释放池之外没有其他人保留它）。

 **一个对象不会因为超出范围而自动释放。在您的示例中，我们只能肯定地说它不会在右花括号**之前被释放，但正如 H2CO3 所说，如果没有相关的源代码，我们无法预测它何时真正被清理。**在 Cocoa (Touch) 应用程序中，带有 runloop 的线程有一个循环级别的自动释放池，它们在每次 runloop 迭代结束时耗尽。如果你的方法是从 runloop 调用的（例如作为事件处理程序回调的一部分），自动释放的对象将在处理程序代码返回后不久被释放；否则没有这样的保证。

请注意，上述内容适用于非 ARC 环境；其他人可能会在使用 ARC 时确认它是否仍然有效。**

# actionscript-3 - 如何在 FLEX 中将 externalXML 转换为 arraylist

> ID：10461080
> 
> 赞同：0
> 
> 时间：2012-05-05T10:44:01.967
> 
> 标签：actionscript-3, apache-flex, flex4.5

只有那些具有数据的 xml 标记需要放置在 arraylist 中，这将充当数据组的数据提供者。

任何人都可以帮助完成这项任务...在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T11:40:47.413

```
for each (var x:XML in myXML.item) { 
    if (x.children().length() > 0)
        myList.push(x);
} 
```

# android - 安卓闹钟立即响起

> ID：10461083
> 
> 赞同：0
> 
> 时间：2012-05-05T10:44:14.917
> 
> 标签：android, alarm

为什么警报会立即响起，而不是指定时间？

```
Intent myIntent = new Intent(Notepad.this, MyAlarmService.class);
PendingIntent pendingIntent = PendingIntent.getService(Notepad.this, 0, myIntent, 0);

AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
         Calendar calendar = Calendar.getInstance();
         calendar.setTimeInMillis(System.currentTimeMillis());
         calendar.set(Calendar.YEAR, 2012);
         calendar.set(Calendar.MONTH, 4);
         calendar.set(Calendar.DAY_OF_MONTH, 5);
         calendar.set(Calendar.HOUR_OF_DAY, 10);
         calendar.set(Calendar.MINUTE, 30);
         calendar.set(Calendar.SECOND, 4);
     alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), pendingIntent); 
```

如果我只使用`calendar.add(Calendar.SECOND, 5);`，它会在 5 秒后启动。

**基于尼古拉斯回答的解决方案**

```
 Date dat  = new Date();//initializes to now
        Calendar cal_alarm = Calendar.getInstance();
        Calendar cal_now = Calendar.getInstance();
        cal_now.setTime(dat);
        cal_alarm.setTime(dat);
        cal_alarm.set(Calendar.HOUR_OF_DAY,Integer.valueOf(h));
        cal_alarm.set(Calendar.MINUTE, Integer.valueOf(m));
        cal_alarm.set(Calendar.SECOND,0);

        if(cal_alarm.before(cal_now)){
            cal_alarm.add(Calendar.DATE,1);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:55:11.397

对我来说，您似乎正在将日历时间和日期设置为闹钟时间。也许设置两个不同的日历，一个用于当前时间，另一个用于闹钟时间。那有意义吗？

# java - JTextPane 不显示 JScrollPane 并且不换行文本

> ID：10461087
> 
> 赞同：5
> 
> 时间：2012-05-05T10:45:11.833
> 
> 标签：java, swing, jtextpane

我需要显示链接，所以我将 JTextPane 与 setContentType 一起使用。但是，内容不换行，也没有滚动。JTextPane 的内容将从 RSS 提要中返回。这是完整的代码：

```
import java.awt.*;
import javax.swing.*;

class Main extends JFrame
{
    JFrame frame;
    JTabbedPane tabbedPane;
    JPanel home, news;      

    public Main()
    {
        setTitle("My Title" ); 
        setSize( 900, 600 ); 
        setLocationRelativeTo(null); 
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 

        home(); 
        news(); 

        tabbedPane = new JTabbedPane(); 
        tabbedPane.addTab( " Home", home ); 
        tabbedPane.addTab( "News", news ); 

        JPanel framePanel = new JPanel();
        framePanel.setLayout(new BorderLayout());       
        framePanel.add( tabbedPane, BorderLayout.CENTER );
        getContentPane().add( framePanel );     

    }

    public void home() 
    {       
        home = new JPanel();
        // some stuffs here
    }

    public void news()
    {
        news = new JPanel();

        JTextPane newsTextPane = new JTextPane(); 
        newsTextPane.setContentType("text/html");
        newsTextPane.setEditable(false); 

        JScrollPane scrollPane = new JScrollPane(newsTextPane);     
        scrollPane.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
        news.add(scrollPane);   

        RSS reader = RSS .getInstance();
        reader.writeNews();             

        String rssNews = reader.writeNews();
        newsTextPane.setText(rssNews);
    }   

    public static void main( String args[] )
    {

        RSS reader = RSS.getInstance();
        reader.writeNews();

        Main mainFrame  = new Main();
        mainFrame.setVisible( true );   
        mainFrame.setDefaultCloseOperation( EXIT_ON_CLOSE );
        }
} 
```

我的结果： ![截屏](../Images/4d458fe2bc3c8749d2daa0e46d921fe4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:23:17.893

我刚刚使用了您的代码，它不会引起任何问题：

```
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities

public class TestScrolling {

    public static void main(String[] args) {
            SwingUtilities.invokeLater(new Runnable() {
                 public void run() {
                  initUI();
                 });
    }

    public static void initUI() {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 100; i++) {
            sb.append("loads loads loads loads of text here ");
        }
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextPane newsTextPane = new JTextPane();
        newsTextPane.setContentType("text/html");
        newsTextPane.setEditable(false);
        newsTextPane.setText(sb.toString());

        JScrollPane scrollPane = new JScrollPane(newsTextPane);
        scrollPane.setVerticalScrollBarPolicy(
                  javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
        frame.add(scrollPane);
        frame.setSize(300, 200);
        frame.setVisible(true);
     }
} 
```

编辑：

* * *

您必须以某种方式强制滚动窗格的宽度。在我的示例中，它是通过将滚动窗格添加到框架的内容窗格来隐式完成的，默认情况下使用 BorderLayout。在您的情况下，您使用了 FlowLayout，它分配了滚动窗格的首选大小，这大约是 JTextPane 的首选大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:45:10.823

您在 JScrollPane 周围使用面板或其他东西吗？

以大小不合适的@Guillaume Polet 的 sscc 为例，该示例不起作用：

```
import java.awt.Dimension;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;

public class TestScrolling {

    public static void main(String[] args) {
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 100; i++) {
            sb.append("loads loads loads loads of text here ");

        }
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JTextPane newsTextPane = new JTextPane();
        newsTextPane.setContentType("text/html");
        newsTextPane.setEditable(false);
        newsTextPane.setText(sb.toString());
        JScrollPane scrollPane = new JScrollPane(newsTextPane);
        scrollPane.setVerticalScrollBarPolicy(javax.swing.ScrollPaneConstants.VERTICAL_SCROLLBAR_AS_NEEDED);
        JPanel pan = new JPanel();
        pan.setMinimumSize(new Dimension(500,500));
        pan.add(scrollPane);
        frame.add(pan);
        frame.setSize(500, 500);
        frame.setVisible(true);
    }
} 
```

我看到您将 JscrollPane 添加到`panel`. 您能否提供您在该面板上所做的创建/修改以及该面板的使用位置？

# php - 使用 php 抓取数据

> ID：10461088
> 
> 赞同：-5
> 
> 时间：2012-05-05T10:45:19.307
> 
> 标签：php, ip, whois

这是我的代码

```
 $ip=$_SERVER['REMOTE_ADDR'];

    $url=file_get_contents("http://whatismyipaddress.com/ip/$ip");

    preg_match_all('/<th>(.*?)<\/th><td>(.*?)<\/td>/s',$url,$output,PREG_SET_ORDER);

    $isp=$output[1][2];

    $city=$output[9][2];

    $state=$output[8][2];

    $zipcode=$output[12][2];

    $country=$output[7][2];

    ?>
    <body>
    <table align="center">
    <tr><td>ISP :</td><td><?php echo $isp;?></td></tr>
    <tr><td>City :</td><td><?php echo $city;?></td></tr>
    <tr><td>State :</td><td><?php echo $state;?></td></tr>
    <tr><td>Zipcode :</td><td><?php echo $zipcode;?></td></tr>
    <tr><td>Country :</td><td><?php echo $country;?></td></tr>
    </table>
    </body> 
```

如何找出查看 PHP 页面的人的 ISP 提供商？

是否可以使用 PHP 来跟踪或揭示它？

错误：http: [//i.imgur.com/LGWI8.png](http://i.imgur.com/LGWI8.png)

**卷曲刮痧**

```
<?php
$curl_handle=curl_init();
curl_setopt( $curl_handle, CURLOPT_FOLLOWLOCATION, true );
$url='http://www.whatismyipaddress.com/ip/132.123.23.23';
curl_setopt($curl_handle, CURLOPT_URL,$url);
curl_setopt($curl_handle, CURLOPT_HTTPHEADER, Array("User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.15) Gecko/20080623 Firefox/2.0.0.15") );
curl_setopt($curl_handle, CURLOPT_CONNECTTIMEOUT, 2);
curl_setopt($curl_handle, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($curl_handle, CURLOPT_USERAGENT, 'Your application name');
$query = curl_exec($curl_handle);

curl_close($curl_handle);
preg_match_all('/<th>(.*?)<\/th><td>(.*?)<\/td>/s',$url,$output,PREG_SET_ORDER);
echo $query;
$isp=$output[1][2];

$city=$output[9][2];

$state=$output[8][2];

$zipcode=$output[12][2];

$country=$output[7][2];
?>
<body>
<table align="center">
<tr><td>ISP :</td><td><?php echo $isp;?></td></tr>
<tr><td>City :</td><td><?php echo $city;?></td></tr>
<tr><td>State :</td><td><?php echo $state;?></td></tr>
<tr><td>Zipcode :</td><td><?php echo $zipcode;?></td></tr>
<tr><td>Country :</td><td><?php echo $country;?></td></tr>
</table>
</body> 
```

**错误：http:** [//i.imgur.com/FJIq6.png](http://i.imgur.com/FJIq6.png)

我的代码有什么问题？我可以在这里使用的任何替代代码。

我无法按照此处所述刮取该数据。[http://i.imgur.com/FJIq6.png](http://i.imgur.com/FJIq6.png)

`P.S.`请发布完整代码。我会更容易理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:53:30.663

[未经事先书面许可，您不得使用脚本、代理、应用程序或以其他方式自动查询本网站。](http://whatismyipaddress.com/terms-of-use)

# parsing - 解析数学方程

> ID：10461089
> 
> 赞同：0
> 
> 时间：2012-05-05T10:45:19.687
> 
> 标签：parsing, math, haskell

只是为了好玩，我正在尝试创建一个可以简化、分解和扩展代数方程的应用程序。如果我可以将方程式转换成一个很好的可行格式，那么对规则进行编程似乎会很简单。解析方程被证明是一件麻烦事，目前正在使用 Python，但我并不反对必须学习新东西。

是否有任何库（适用于任何语言）可以使这个项目变得非常简单，或者这是一个白日梦？

[用 Haskell 标记这个，因为我觉得这就是“简单”的地方]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:04:45.183

是的，Haskell 有许多库可以使编写解析器相当容易。[Parsec](http://www.haskell.org/haskellwiki/Parsec)是一个好的开始，它甚至有[其他语言的克隆](http://www.haskell.org/haskellwiki/Parsec#Parsec_clones_in_other_languages)，包括[Python](http://www.valuedlessons.com/2008/02/pysec-monadic-combinatoric-parsing-in.html)（该文章还链接到[pyparsing](http://pyparsing.wikispaces.com/)，看起来它也可以工作）。

[我的这个答案](https://stackoverflow.com/questions/10408046/implementing-read-for-a-left-associative-tree-in-haskell/10410178#10410178)是一个例子（注意，它可能不是一流的 Parsec 或 Haskell）：它表明了 Haskell 解析库的强大功能，恰好 4 行代码实现了整个解析器。

您还可以浏览旧问题和答案以了解各种库和技术，例如[parsec](/questions/tagged/parsec "显示标记为“秒差距”的问题")、[parsing+haskell](https://stackoverflow.com/questions/tagged/parsing+haskell)和[parsing+python](https://stackoverflow.com/questions/tagged/parsing+python)。

为大型项目制定攻击路线的最佳方法是从小处着手，然后尝试一些东西，直到您对自己的工具感到满意：选择一个库并尝试实现一个相对简单的解析器，例如解析只有数字的表达式, `+`and `*`, 甚至只是解析数字和`+`括号......一些小东西（但不是太小；这两个例子都有重要意义，第一个具有运算符优先级，第二个具有递归嵌套）。如果您不太喜欢该库，请尝试使用其他库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T13:10:36.117

几乎所有语言都已完成。

Python 有一个可以解析代数方程和符号数学的库：

[http://code.google.com/p/sympy/](http://code.google.com/p/sympy/)

我建议重用，除非您的目的是学习如何编写这样的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:04:53.790

Python 或 matlab 将是我的建议。您是否打算将整个方程式存储在一个字符串中，然后将其拆分，以进行分解和简化？

提供更多信息，这是一个很酷的项目。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-10T13:28:51.893

这是一个老问题，但我想向您推荐 MathParseKit。

这是一个 C++ 库，它给定一个类似“2*3/4”的字符串，为您提供定义表达式的函数/变量/常量树。

您可以解决它，但您甚至可以更改它并以字符串格式重新放置它。

您可以在以下位置找到它：

[https://github.com/B3rn475/MathParseKit](https://github.com/B3rn475/MathParseKit)

# c# - 如何获得我的 wav 文件相对于时间的声音幅度？

> ID：10461091
> 
> 赞同：1
> 
> 时间：2012-05-05T10:45:21.947
> 
> 标签：c#, audio, fft

我有一个 wav 文件，我所需要的只是在播放非常强烈的声音时执行一个功能。

例如：如果正在播放强度级别 10（假设）的声音，所以我希望当声音强度级别从 10 增加时，应该触发一个事件来告诉我有一个非凡的声音。

我试图用谷歌搜索它，发现如果我们读取 wav 文件的字节并读取数据块（第 44 个字节之后），我们会得到用户数据（声音数据）。但是当我分析这些数据时，我感到很困惑，因为也有相同的数据没有声音。

我希望我的问题很清楚。所以请我需要你的建议/想法和参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:09:40.533

您不需要 FFT - 您只需计算短期 RMS 功率，当它超过预定阈值时，您就会听到“响亮”的声音。

```
power_RMS = sqrt(sum(x^2) / N) 
```

其中 x 是样本值，N 是您要计算 RMS 功率的样本数 - 我建议使用 10 ms 的周期，以 44.1 kHz 的采样率给出 N = 441 个样本。

# windows-phone-7 - Windows Phone 日历 - 月视图

> ID：10461092
> 
> 赞同：1
> 
> 时间：2012-05-05T10:46:03.243
> 
> 标签：windows-phone-7, calendar

我想为 Windows Phone 创建一个小应用程序，它将基于日历，因此人们可以输入日期等。但我找不到提供日历月视图的控件。我只看到有 DatePicker，但这并不是我想要的。

Windows Phone 有这样的控制吗？

谢谢，内德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:52:04.067

看起来这可能是满足您需求的一个很好的日历控件：[https ://wpcontrols.codeplex.com/](https://wpcontrols.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T07:12:32.857

也许更复杂但不是免费的（99 美元）：Telerik 的控件 [http://www.telerik.com/products/windows-phone/overview/all-controls.aspx](http://www.telerik.com/products/windows-phone/overview/all-controls.aspx)

但是会从一个来源中获得很多控制；）

# unicode - 发生系统间缓存意外错误：

> ID：10461093
> 
> 赞同：1
> 
> 时间：2012-05-05T10:46:08.890
> 
> 标签：unicode, intersystems-cache, widechar, intersystems

我正在尝试将旧的 CACHE.DAT 数据库加载到 Intersystems Cache（2012.1.1 win32 评估）中。我设法创建了一个命名空间和数据库，并且能够查询一些数据库表。

但是，对于其他表，我收到以下错误：

```
ERROR #5540: SQLCODE -400 Message: Unexpected error occurred: <WIDE CHAR> 
```

文档告诉我，这意味着在需要一个字节字符的地方读取一个多字节字符。我怀疑这可能意味着原始数据库是 UTF-16，而我的新安装使用的是 UTF-8。

我的问题是：有没有办法转换数据库，配置缓存以便它可以处理，或者以另一种方式处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:13:57.660

也许原始数据库是在 unicode 安装和当前安装 8 位中创建的

Caché 在需要 1 字节字符的地方读取多字节字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T20:24:50.693

您可以从 mgr 目录发送您的 cboot.log 吗？
例如我的 cboot.log 中的第一行

```
Start of Cache initialization at 02:51:00PM on Apr 7, 2012  
Cache for Windows (x86-64) 2012.2 (Build 549U) Sun Apr 1 2012 17:34:18 EDT  
Locale setting is rusw  
Source directory is c:\intersystems\ensemble12\mgr\utils\ 
```

# android - 后退按钮事件在后台移动应用程序

> ID：10461095
> 
> 赞同：17
> 
> 时间：2012-05-05T10:46:31.510
> 
> 标签：android

当我们单击android中的设备后退按钮时，是否可以在后台移动应用程序？

背景意味着应用程序从它启动的位置移动到屏幕（应用程序）？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-05T11:10:48.110

尝试使用

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    switch(keyCode)
    {
        case KeyEvent.KEYCODE_BACK:

            moveTaskToBack(true);

            return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-03-22T21:13:42.003

```
@Override
public void onBackPressed() {
    moveTaskToBack(true);
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-17T08:09:30.483

我更喜欢使用下面的代码在后台移动应用程序

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) 
    {
        switch(keyCode)
        {
            case KeyEvent.KEYCODE_BACK:
              if(isTaskRoot()) {
               Intent homeIntent = new Intent(Intent.ACTION_MAIN);
               homeIntent.addCategory(Intent.CATEGORY_HOME);
               homeIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
               startActivity(homeIntent);
               return true;
                }
            else {
             super.keyDown(keyCode,event);
             return false;      
        }

    default: 
    super.keyDown(keyCode,event);
           return false;
 }

} 
```

# java - 我的 java 函数抛出空指针异常？

> ID：10461100
> 
> 赞同：0
> 
> 时间：2012-05-05T10:47:35.413
> 
> 标签：java, android, achartengine

我试图在另一个函数中调用一个函数，但我得到一个 nullpointerException 以及许多其他错误..

```
public float maxFat() {

    SharedPreferences customSharedPreference = getSharedPreferences(
            "myCustomSharedPrefs", Activity.MODE_PRIVATE);

    float cals = customSharedPreference.getFloat("calpref", 0f);
    float maxfat = cals / 36;

    return maxfat;
} 
```

这就是我所说的

```
public XYMultipleSeriesDataset getFatDataset() {

    XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
    Cursor c = database.rawQuery("select * from dailystats;", null);
    float i = 1.0f;

    c.moveToFirst();
    XYSeries seriesFat = new XYSeries("Fat");
    XYSeries seriesMaxFat= new XYSeries("Maximum Fat");
    while (!c.isAfterLast()) {
        seriesFat.add(i++, c.getDouble(2));
        StatsActivity stats= new StatsActivity();
        seriesMaxFat.add(i, stats.maxFat());
        c.moveToNext();
    }
    dataset.addSeries(seriesFat);
    dataset.addSeries(seriesMaxFat);
    return dataset;
} 
```

这是日志文件

```
05-05 11:39:22.737: E/AndroidRuntime(31282): java.lang.NullPointerException
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.content.ContextWrapper.getSharedPreferences(ContextWrapper.java:153)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at com.nutriapp.StatsActivity.maxFat(StatsActivity.java:183)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at com.nutriapp.DatabaseAdapter.getFatDataset(DatabaseAdapter.java:396)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at com.nutriapp.FatActivity.getIntent(FatActivity.java:52)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at com.nutriapp.StatsActivity$1.onClick(StatsActivity.java:127)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.view.View.performClick(View.java:3511)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.view.View$PerformClick.run(View.java:14105)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.os.Handler.handleCallback(Handler.java:605)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.os.Looper.loop(Looper.java:137)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at java.lang.reflect.Method.invokeNative(Native Method)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at java.lang.reflect.Method.invoke(Method.java:511)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-05 11:39:22.737: E/AndroidRuntime(31282):    at dalvik.system.NativeStart.main(Native Method)
05-05 11:39:22.937: D/dalvikvm(31282): GC_CONCURRENT freed 135K, 3% free 9633K/9863K, paused 17ms+29ms
05-05 11:39:23.047: E/SQLiteDatabase(31282): close() was never explicitly called on database '/data/data/com.nutriapp/databases/nutriwellness.db' 
05-05 11:39:23.047: E/SQLiteDatabase(31282): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at com.nutriapp.DatabaseAdapter.open(DatabaseAdapter.java:215)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at com.nutriapp.FatActivity.getIntent(FatActivity.java:49)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at com.nutriapp.StatsActivity$1.onClick(StatsActivity.java:127)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.view.View.performClick(View.java:3511)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.view.View$PerformClick.run(View.java:14105)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.os.Handler.handleCallback(Handler.java:605)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.os.Looper.loop(Looper.java:137)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at java.lang.reflect.Method.invokeNative(Native Method)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at java.lang.reflect.Method.invoke(Method.java:511)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-05 11:39:23.047: E/SQLiteDatabase(31282):    at dalvik.system.NativeStart.main(Native Method)
05-05 11:39:23.047: E/System(31282): Uncaught exception thrown by finalizer
05-05 11:39:23.098: E/System(31282): java.lang.IllegalStateException: Don't have database lock!
05-05 11:39:23.098: E/System(31282):    at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
05-05 11:39:23.098: E/System(31282):    at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
05-05 11:39:23.098: E/System(31282):    at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
05-05 11:39:23.098: E/System(31282):    at android.util.LruCache.trimToSize(LruCache.java:197)
05-05 11:39:23.098: E/System(31282):    at android.util.LruCache.evictAll(LruCache.java:285)
05-05 11:39:23.098: E/System(31282):    at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
05-05 11:39:23.098: E/System(31282):    at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
05-05 11:39:23.098: E/System(31282):    at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
05-05 11:39:23.098: E/System(31282):    at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
05-05 11:39:23.098: E/System(31282):    at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
05-05 11:39:23.098: E/System(31282):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:11:03.603

类是否`StatsActivity`扩展`Activity`？如果是这样，您不能使用`new`关键字来创建该类的新实例，并且您需要重新考虑您的应用程序设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:21:05.477

您没有关闭游标，这就是您获得数据库未关闭异常的原因。做就是了

`c.close()`

完成光标后，在 XYMultipleSeriesDataset 函数中。

# c - C：编写 RPC 低级应用程序：从客户端获取 IP 地址

> ID：10461102
> 
> 赞同：1
> 
> 时间：2012-05-05T10:47:56.257
> 
> 标签：c, client-server, rpc

我已将服务器-客户端应用程序编程为 RPC（低级）。

这是我的服务器功能来验证我的 IP 地址（这里，只是必要的信息）：

```
 int *checkip_1_svc(ip_adress *argp, struct svc_req *rqstp)
 {
     static int  result;
     struct sockaddr_in test_ip;

     result =1;

     return(&result);
 } 
```

现在我想从连接的客户端打印 IP 地址。

我试过：

```
printf("Clientadress:%s", rqstp->rq_xprt->xp_raddr.sin_addr.s_addr); 
```

这不起作用。我得到一个分段错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T19:07:38.057

`s_addr`最可能是一个无符号的 32 位整数，所以你可以使用`%u`but `%s`：

```
printf("client address: %u", rqstp->rq_xprt->xp_raddr.sin_addr.s_addr); 
```

`a.b.c.d`要将其以您可能使用的符号打印：

```
#define SPLIT_S_ADDR_INTO_BYTES( \
    s_addr) \
    ((s_addr) >> 24) & 0xFF, \
    ((s_addr) >> 16) & 0xFF, \
    ((s_addr) >>  8) & 0xFF, \
    ((s_addr)      ) & 0xFF

...

printf(
  "client address: %hu.%hu.%hu.%hu", 
  SPLIT_S_ADDR_INTO_BYTES(ntohl(rqstp->rq_xprt->xp_raddr.sin_addr.s_addr)));

... 
```

有关详细信息，`ntohl()`请参阅`man ntohl()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T10:32:13.690

它很简单：

```
printf("Clientadress:%s", inet_ntoa(rqstp->rq_xprt->xp_raddr.sin_addr.s_addr)); 
```

# php - 是否可以将 ftp_connect() 用于多个页面？

> ID：10461103
> 
> 赞同：0
> 
> 时间：2012-05-05T10:47:58.063
> 
> 标签：php, session

我的网站有 3-4 个页面使用 ftp_connect()，目前我在每个页面加载时都连接，加载页面需要时间。

是否可以做一个 ftp_connect 并在所有页面上使用它？就像将它存储在会话中或其他什么？

不知道是不是 ftp_connets() 的错，有时加载一个页面需要 5-10 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:02:42.877

不，不可能`ftp_connect`在一个页面上进行并将其传递到其他页面。

是的，4 秒的延迟很可能是`ftp_connect`连接到远程服务器。

# oracle - Oracle 程序中的 if-else 太多，性能好还是坏？

> ID：10461111
> 
> 赞同：2
> 
> 时间：2012-05-05T10:49:00.107
> 
> 标签：oracle, procedure, database-performance, chain-of-responsibility

在一个过程中，我需要使用许多 if-else 条件来确定列的值。脚本以

> FOR **rec** IN (SELECT....) 循环开始

并决定**rec**子记录在每次迭代中可以获得的许多不同值。在某些情况下，可能只有 2 或 3 个变量赋值，而某些情况包括运行单独的过程或执行 INSERT 操作。

如果循环的 SELECT 语句的结果有很多记录，这种方法是从性能方面进行决策的最佳方法，还是可能有更好的选择？如果我在编写此程序时采用责任链模式怎么办？这种方法会提高性能还是只会让事情变得更糟？

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:11:56.073

如果可能，请留在 SQL 中。对于更大的卷，请避免使用“if”，因为您将在 PL/SQL 端进行序列化。如果可能的话，最好把它作为你的 SELECT 里面的 CASE 。例如，在 SQL 并行化的情况下，它可以由多个进程同时处理不同的行。

希望它有帮助，伊戈尔

# d3.js - D3.js - 布局 - 值访问器

> ID：10461118
> 
> 赞同：0
> 
> 时间：2012-05-05T10:50:17.650
> 
> 标签：d3.js

我刚开始使用[D3.js](https://github.com/mbostock/d3/wiki/)。我使用[这个例子](http://bl.ocks.org/1346395)创建了一个足够简单的圆环图。我的问题是，如果我有一个对象数组作为我的数据源 - ex 的数据点。将是[1](https://github.com/mbostock/d3/wiki/) .foo 或[1](https://github.com/mbostock/d3/wiki/) .bar - 我想在它们之间切换，我该怎么做呢？我当前的解决方案看起来很丑陋，而且它不是正确的方法 - 下面的代码。

```
//Call on window change event
//Based on some parameter, change the data for the document
//vary d.foo to d.bar and so on

var donut = d3.layout.pie().value(function(d){ return d.foo})
arcs = arcs.data(donut(data)); // update the data 
```

除了定义一个新的饼函数之外，有没有办法`value`在运行时设置访问器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T19:33:45.500

通常，要切换正在显示的数据，您将创建一个`redraw()`函数，然后更新图表的数据。在重绘中，您需要确保处理这三种情况 - 修改数据元素时应该做什么，添加新数据元素时应该做什么，以及删除数据元素时应该做什么。

它通常看起来像这样（此示例通过平移更改数据集，但这并不重要）。[请参阅http://bl.ocks.org/1962173](http://bl.ocks.org/1962173)上的完整代码。

```
function redraw () {

    var rects, labels
      , minExtent = d3.time.day(brush.extent()[0])
      , maxExtent = d3.time.day(brush.extent()[1])
      , visItems = items.filter(function (d) { return d.start < maxExtent && d.end > minExtent});

    ...

    // upate the item rects
    rects = itemRects.selectAll('rect')
        .data(visItems, function (d) { return d.id; })   // update the data
        .attr('x', function(d) { return x1(d.start); })
        .attr('width', function(d) { return x1(d.end) - x1(d.start); });

    rects.enter().append('rect') // draw the new elements
        .attr('x', function(d) { return x1(d.start); })
        .attr('y', function(d) { return y1(d.lane) + .1 * y1(1) + 0.5; })
        .attr('width', function(d) { return x1(d.end) - x1(d.start); })
        .attr('height', function(d) { return .8 * y1(1); })
        .attr('class', function(d) { return 'mainItem ' + d.class; });

    rects.exit().remove(); // remove the old elements
} 
```

# java - 在android中播放视频

> ID：10461119
> 
> 赞同：2
> 
> 时间：2012-05-05T10:50:19.060
> 
> 标签：java, android

我在 android 中实现了一个视频播放，我对 android 来说是全新的，这是我迄今为止收集的一些代码。

根据它应该播放视频的逻辑。不知道我在哪里做错了。

```
package com.themetanoia.readfilefromsdc;

import java.io.File;

import android.app.ListActivity;
import android.content.Context;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.MediaController;
import android.widget.TextView;
import android.widget.Toast;
import android.widget.VideoView;
import android.widget.AdapterView.OnItemClickListener;

public class ReadFileFromSDCActivity extends ListActivity {
    /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

        //Get the file path for external storage
        String a = Environment.getExternalStorageDirectory().getAbsolutePath();
        final String finalPath = a+"/Videos";
        //Define new file function
        File f=new File(finalPath);

        if(f.isDirectory()){              
        //Define arrayadapter
            setListAdapter(new ArrayAdapter<String>(this, R.layout.listview,files));
           //Define listview
            ListView listview = getListView();
            listview.setTextFilterEnabled(true);

           //Onclick list item event
            listview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {

                    //get selected items
                    String selectedValue = (String) getListAdapter().getItem(position);         
                    Uri uri =  Uri.parse(finalPath);

                    MediaController mediaController = new MediaController(getBaseContext());
                    mediaController.setAnchorView(mVideoView);

                    Uri video = Uri.parse(finalPath+"/"+selectedValue);
                    mVideoView.setMediaController(mediaController);
                    mVideoView.setVideoURI(video);
                    mVideoView.start();

                }

            });             

        }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T10:56:10.323

```
<VideoView
  android:id="@+id/videoView1"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
   />

VideoView vv = (VideoView) findViewById(R.id.videoView1);
uri = "your video uri";
vv.setVideoURI(Uri.parse(uri));
vv.start();

vv.setOnCompletionListener(new OnCompletionListener() {
    @Override
    public void onCompletion(MediaPlayer mp) {
           finish();
  }
}); 
```

# opengl - 为什么 Derelict3 中的帧缓冲区会冻结？

> ID：10461123
> 
> 赞同：1
> 
> 时间：2012-05-05T10:51:58.667
> 
> 标签：opengl, d, fbo

我正在使用 Derelict3，它使用特定的 openGL3 标准，如果调用 glEnable(GL_DEPTH_TEST)，我会遇到屏幕冻结（不更新）的问题，如果不是，深度缓冲区不起作用。我注意到设置清除颜色和启用深度测试的调用如果在设置 SDL_GL 上下文和重新加载 Derelict3 之前进行，则会被忽略。我必须按以下顺序制作它们：

```
win=SDL_CreateWindow("3Doodle", SDL_WINDOWPOS_CENTERED, SDL_WINDOWPOS_CENTERED, w, h,     flags); 
if(!win){ 
       writefln("Error creating SDL window"); 
      SDL_Quit(); 
} 

context=SDL_GL_CreateContext(win); 
SDL_GL_SetSwapInterval(1); 

glVersion=DerelictGL3.reload(); 

glEnable(GL_DEPTH_TEST); 
glEnable(GL_CULL_FACE); 

glClearColor(0.0, 0.0, 0.0, 1.0); 
glClearDepth(1.0); 

glCullFace(GL_BACK); 
glFrontFace(GL_CCW); 
```

虽然这在写入标准双缓冲区时解决了深度剔除，但当我使用 renderBuffer 作为新的深度缓冲区实现帧缓冲区对象时，我得到了冻结...程序编译并运行时没有警告，但渲染图像到屏幕对齐的四边形保持固定。如果我注释掉 glEnable(GL_DEPTH_TEST); 相机自由移动，但渲染图像不考虑深度测试，只是按顺序绘制对象。

帧缓冲初始化代码为：

```
//fbo 
glEnable (GL_FRAMEBUFFER_SRGB); 
glGenFramebuffers(1, &fbo); 
assert(fbo > 0); 
glBindFramebuffer(GL_FRAMEBUFFER, fbo); 

glGenRenderbuffers(1, &rbo); 
assert(rbo > 0); 
glBindRenderbuffer(GL_RENDERBUFFER, rbo); 
glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT, projMat.w, projMat.h); 
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, rbo); 
glBindRenderbuffer(GL_RENDERBUFFER, 0); 

glGenTextures(1, &fbon); 
assert(fbon > 0); 
glActiveTexture(GL_TEXTURE0); 
glBindTexture(GL_TEXTURE_2D, fbon); 
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, projMat.w, projMat.h, 0, GL_RGBA,     GL_UNSIGNED_BYTE, null); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);    
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, fbon, 0); 
glBindTexture(GL_TEXTURE_2D, 0); 

 glGenTextures(1, &fboc); 
assert(fboc > 0); 
glActiveTexture(GL_TEXTURE1); 
glBindTexture(GL_TEXTURE_2D, fboc); 
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, projMat.w, projMat.h, 0, GL_RGBA,     GL_UNSIGNED_BYTE, null); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);    
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT1, GL_TEXTURE_2D, fboc, 0); 
glBindTexture(GL_TEXTURE_2D, 0); 

glGenTextures(1, &fbop); 
assert(fbop > 0); 
glActiveTexture(GL_TEXTURE2); 
glBindTexture(GL_TEXTURE_2D, fbop); 
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA32F, projMat.w, projMat.h, 0, GL_RGBA,     GL_UNSIGNED_BYTE, null); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); 
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);    
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE); 
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT2, GL_TEXTURE_2D, fbop, 0); 
glBindTexture(GL_TEXTURE_2D, 0); 

int status=glCheckFramebufferStatus(GL_FRAMEBUFFER); 
assert(status == GL_FRAMEBUFFER_COMPLETE); 

buffs=[GL_COLOR_ATTACHMENT0, GL_COLOR_ATTACHMENT1, GL_COLOR_ATTACHMENT2]; 
glDrawBuffers(3, buffs.ptr); 
glBindFramebuffer(GL_FRAMEBUFFER, 0); 
```

在 draw() 中调用 fbo 的代码是：

```
glBindFramebuffer(GL_FRAMEBUFFER, fbo); 
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); 

glUseProgram(shad); 
glUniformMatrix4fv(viewLoc, 1, GL_TRUE, player.mat.ptr); 

current.draw(); 

glUseProgram(0); 
glBindFramebuffer(GL_FRAMEBUFFER, 0); 

rend.draw(); 
```

我很茫然，因为相同的代码在 c# 中正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T09:23:37.313

我的愚蠢。忘记指定 glDepthFunc

# objective-c - Objective-c 上的指针

> ID：10461125
> 
> 赞同：4
> 
> 时间：2012-05-05T10:52:05.313
> 
> 标签：objective-c, pointers, nsstring, dereference

据我了解（如果我错了，请纠正我）：

```
int x, count = 10;
int *hello;
hello = &count;
x = *hello; 
```

这里变量 x 和 count 被声明为整数类型。此外，变量 count 被赋值为 10。

hello 是一个指向整数类型的指针。hello 然后被分配了 count 的地址。为了访问count的值，hello前面必须有一个星号，即*hello。

因此，x 被赋值为 count 中的任何值，在本例中为 10。

然而...

```
Fraction *myFraction = [[Fraction alloc] init];
[myFraction someMethod]; 
```

在这里，如果我理解正确的话，myFraction 是一个指向 Fraction 类实例的指针。

myFraction 指向（或者更确切地说是分配地址）一个已分配内存并初始化的对象。

当然，为了访问 myFraction 指向的对象，我应该写：

```
 [*myFraction someMethod]; 
```

鉴于 x 访问 count 值的方式，当然为了访问对象，应该写这个而不是：

```
[myFraction someMethod]; 
```

另外，如果我有

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
NSString *str = @"Programming can be a headache";
NSLog (@"%@\n", str); 
```

为什么 str 被视为上面的对象？或者 str 是一个对象，在这种情况下，我为什么要让它指向一个 NSString 类的实例？当然，我应该能够将一个对象分配给 str？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T10:58:39.200

目标 c 中对象的所有使用都是通过对象引用完成的，例如指针。

*   Objective C 语法允许您在不取消引用的情况下处理对象，这与 C / C++ 不同。
*   `str`是类型`NSString`(as `myFraction`)`@"Programming can be a headache"`的对象引用，也是类型的对象引用`NSString`，因此您可以将其分配给`str`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:40:23.693

除了宾亚明

*   括号 [ ] 内的所有内容都是 Objective-C 而不是简单的 C（所以 [*object message] 不常用）
*   [对象消息]，您将“消息”发送给您的对象，对象会做出响应（他可以返回某事，也可以做某事而无需任何回报）。
*   左边带 * 的都是指针。所以 *str 是一个指针。它在哪里？到一个对象 NSString。@"blabla" 返回由编译器直接生成的一个 CONSTANT 字符串的地址。
*   NSLog (@"%@\n", str); 这里 %@ 调用了名为 str 的 NSString 对象的**+Description 类**方法。默认情况下，NSString 对象的描述返回字符串（文本）的值。%@ 不是像 %d 那样用数字（int、double 等）进行简单替换。所有对象都有从 NSObject 继承的 +Description 方法（注意是 Class 方法而不是即时方法）。

***描述***

返回一个表示接收类内容的字符串。

*   (NSString *) 描述

# nhibernate - NHibernate QueryOver 投影、枚举和 aliastobean 转换器

> ID：10461126
> 
> 赞同：4
> 
> 时间：2012-05-05T10:52:20.623
> 
> 标签：nhibernate

如何使用 QueryOver 和 AliasToBean 将枚举值转换为字符串值？我有以下内容，但在尝试转换 Enum 时出现错误：

```
 SomeDTO someDTO = null;
        SomeReferenceAlias someReferenceAlias = null;
        var jobs = query
            .JoinAlias(x => x.SomeReference, () => someReferenceAlias, JoinType.InnerJoin)
            .SelectList(list => list
                .Select(p => p.SomeStatusEnum).WithAlias(() => someDTO.SomeStatus)//problem here
                .Select(p => someReferenceAlias.Name).WithAlias(() => someDTO.Name)
                )
            .TransformUsing(Transformers.AliasToBean<SomeDTO>())
            .Take(100)
            .List<SomeDTO>(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:30:37.397

假设您的枚举在您的数据库中存储为 int ，我会尝试将字符串只读属性设置为自定义字符串类型：

```
public enum SomeStatus {up=1,right=2,down=3,left=4}

public class SomeStatusNhString : NHibernate.Type.AbstractStringType
{
    public SomeStatusNhString()
          : base(new StringSqlType())
       {
       }

    public SomeStatusNhString(StringSqlType sqlType)
          : base(sqlType)
       {
       }

    public override string Name
    {
        get { return "SomeStatusNhString"; }
    }

    public override object Get(System.Data.IDataReader rs, int index)
    {
        var x = base.Get(rs, index);
        return ((SomeStatus)int.Parse((string)x)).ToString();
    }
} 
```

然后你的映射

```
public virtual String StatusAsString{ get; set; }

<property name="StatusAsString" column="YOUR_COLUMN" not-null="true" insert="false" update="false" type="YourNameSpace.SomeStatusNhString, YourDll" access="property"></property> 
```

希望这可以帮助

# c# - 如何在 spritefont 中突出显示部分文本

> ID：10461137
> 
> 赞同：1
> 
> 时间：2012-05-05T10:54:01.457
> 
> 标签：c#, textbox, xna, highlight, spritefont

我在 xna 工作，我的问题如下。我得到一个文本，其中“ ***_* __ *_* ____** ”的第一次出现应该以某种方式突出显示给用户。这可以通过使这部分的字体更大、突出显示或其他方式来完成，如果有人有一个好主意的话。

```
public void DrawStringWithStyle(SpriteBatch batch, SpriteFont thisFont, Vector2 pos, string thisText, SpriteFont BoldFont)
    {
        string[] paragraphs = Regex.Split(thisText, @"\\(c[a-fA-F0-9]{6})|\\(b)|\\(o)|\\(l)");
        SpriteFont CurrentFont = font;
        float tempPosX = pos.X;

        for (int i = 0; i < paragraphs.Length; i++)
        {
            batch.DrawString(CurrentFont, paragraphs[i], new Vector2(tempPosX, pos.Y), Color.Black);

            if (i + 1 < paragraphs.Length)
            {
                tempPosX += CurrentFont.MeasureString(paragraphs[i]).X;

                i++;

                switch (char.ToLower(paragraphs[i][0]))
                {
                    case 'o': CurrentFont = font; break;
                    case 'b': CurrentFont = BoldFont; break;
                    case 'l':
                        paragraphs[i+1] = paragraphs[i+1].Insert(0, Environment.NewLine);
                        tempPosX = pos.X;
                        break;
                }
            }
        }
    } 
```

所以我遇到了两个新问题，你可能会说出来。其中之一是 2 个命令不能连续出现，因为那样会搞砸大事，需要能够检查下一个命令是命令还是正常段落。另一个问题需要一个类似的解决方案，因为我的 (l) 命令仅在以下段落不是命令时才有效。关于如何解决我的 2 个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T13:38:01.013

拆分具有不同样式的文本...并以其样式绘制每个部分。

您可以使用 \c 更改颜色：“我的 \cFF5566favaourite \cFFFFFFgame is \c444444warcraft 3”，或 \b 使用粗体...

```
public static void DrawStringWithStyle( this SpriteBatch batch, SpriteFont font, Vector2 pos, string text, Color color, SpriteFont BoldFont=null )
{
    string[] paragraphs = Regex.Split( text, @"\\(c[a-fA-F0-9]{6})|\\(b)|\\(n)" );
    Color CurrentColor = color;
    SpriteFont CurrentFont = font;

    for ( int i=0; i< paragraphs.Length; i++ )
    {
        batch.DrawString( CurrentFont, paragraphs[i], pos, CurrentColor );

        if ( i+1<paragraphs.Length )
        {
            pos.X += CurrentFont.MeasureString( paragraphs[i] ).X;
            i++;

            switch (char.ToLower(paragraphs[i][0]))
            {
                case 'c':
                    CurrentColor.R = byte.Parse( paragraphs[i].Substring( 1, 2 ) );
                    CurrentColor.G = byte.Parse( paragraphs[i].Substring( 3, 2 ) );
                    CurrentColor.B = byte.Parse( paragraphs[i].Substring( 5, 2 ) );
                    break;
                case 'n': CurrentFont = font; break;
                case 'b': CurrentFont = BoldFont; break;
            }
        }
    }
} 
```

# javascript - 如何正确地将数据传递给 contentscript？

> ID：10461139
> 
> 赞同：0
> 
> 时间：2012-05-05T10:54:30.087
> 
> 标签：javascript, jquery, google-chrome-extension

我想解决以下问题：我有一个弹出窗口，`popup.html`里面有一个选择标签：

```
<select id="chart_select">
                                <option id="chart_0" value="default">Select One</option>
                                <option id="chart_1" value="table_1">DISPLAY CLIENT VERSION USAGE CHART</option>
                                <option id="chart_2" value="table_2">DISPLAY MOST ACTIVE REALMS CHART</option>
                                <option id="chart_3" value="table_3">DISPLAY MOST ACTIVE USERS CHART</option>
                                <option id="chart_4" value="table_4">DISPLAY AVERAGE USER FRAMERATE CHART</option>
                                <option id="chart_5" value="table_5">DISPLAY AVERAGE REALM FRAMERATE CHART</option>
                                <option id="chart_6" value="table_6">DISPLAY USER LOGGED IN '' TIMES CHART</option>
                                <option id="chart_7" value="table_7">DISPLAY LOGINS per ORGANISATION</option>
                            </select> 
```

所以，我保存到`localStorage['thetable']`所选值。例如，我选择`DISPLAY LOGINS per ORGANISATION`，然后我保存`"table_7"`到本地存储。

然后，`background.html`我想将数据从本地存储传递到我的内容脚本，如下所示：

```
if(localStorage.getItem('thetable') != ""){
    chrome.tabs.getSelected(null, function(tab) {
        chrome.tabs.sendRequest(tab.id, {thetable: localStorage.getItem('thetable') }, function(response) {
            if(response.dom != ""){
                localStorage.setItem('thedom',response.dom);
            }
        });
    });
} 
```

在此之后，我的 contentscript 应该捕获请求，并用存储在 localStorage('thetable') 中的 id 指定的 dom 发送回响应。

```
contentscript.js:

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if (request.thetable != "") {
        sendResponse({dom: document.getElementById(request.thetable).innerHTML});
    }
}); 
```

**注意：** `request.thetable`应该是“table_7”。dom 应该是`<table id="table_7">`站点的 innerHTML。它存在，我制作了所有这些元素。

还有一个额外的信息，我将选择值保存在另一个文件中`popup.js`，我将“table_7”保存到此文件中的 localStorage。但是 localStorage 也可以从 background.html 获得，所以我认为这不应该是一个问题。

* * *

流量：

*   我选择了一些东西（fe: DISPLAY LOGINS per ORGANISATION）
*   我点击`"Save Btn"`，`popup.html`然后`popup.js`将“table_7”保存到localStorage
*   然后我单击“运行 Btn” `popup.html`，然后`popup.js`重新加载当前选项卡：

    chrome.tabs.getSelected(null, function(tab) { chrome.tabs.reload(tab.id); });

    我这样做，因为我的 contentscript 仅在重新加载选项卡时收集信息。

*   重新加载后，我认为`background.html`应该将请求发送到 `contentscript`信息（“table_7”）

*   contentscript 从站点 fe: 获取 DOM，`document.getElementById("table_7").innerHTML`并将其发送回后台页面。

问题是，当我运行流程时，我会收到此警报： ![在此处输入图像描述](../Images/bc25a5f4532308bf59d8d3ea2566e65d.png)

有人可以帮助我，如何解决这个问题？：/ 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:14:07.547

我找到了一个解决方案：

**popup.js：** 使用保存按钮，我保存选择值 (="*table_7*")，然后重新加载选定的选项卡：

```
$("#save_btn").click(function(){
        if($("#chart_select :selected").val()!="default"){
            var sel_val = $("#chart_select :selected").val();
            localStorage.setItem('thetable',sel_val);
            chrome.tabs.getSelected(null,function(tab){
                chrome.tabs.reload(tab.id);
            });
        }
    }); 
```

*   一旦网站重新加载，content_script.js 就会获得焦点：

**content_script.js：**

```
// SEND DOM structure to the background page
chrome.extension.sendRequest({ action: "waiting" },function(response){
    if(response){
        chrome.extension.sendRequest({ dom: document.getElementById(response.thetable).innerHTML });
    }
}); 
```

*   此代码向后台页面发送“等待”请求，并等待响应，即响应已到来，代码获取页面 DOM，并将其发送回来。所以它是一个嵌套的 sendRequest。

**背景.html：**

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if(request.action=="waiting"){
        sendResponse({thetable:localStorage.getItem('thetable')});
        chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
            if(request.dom){
                localStorage.setItem('thedom',request.dom);
            }
        }); 
    }   
}); 
```

*   如果等待请求到来，**注意**：等待是由内容脚本发送的，发回 id ("table_7")**注意**：table_7 由 popup.js 保存到 localStorage，发回 id(thetable) 后，代码监听响应，如果响应已经到来，请将其保存到 localStorage。在此之后，“table_7”的 DOM 被保存。

完成工作，我在 popup.js 中处理数据。**注意**：数据现在在`localStorage('thedom')`

# git - 将凌乱的 svn 存储库转换为 git

> ID：10461142
> 
> 赞同：2
> 
> 时间：2012-05-05T10:54:52.643
> 
> 标签：git, svn, merge

我正在尝试将一个稍微凌乱的 svn 存储库转换为 git。我尝试阅读一些指南和其他 SO 问题，但对于什么是最好的遵循方式有点迷茫。

SVN 存储库具有包含文件夹的顶级文件夹结构，例如：

```
 |- client
 |- server
 |- website
 |- misc 
```

这些文件夹中的大多数都具有“标准”svn 结构：即`trunk`，`branches`和`tags`。然而，有些只是平面文件夹。

```
 |- client
    |- trunk
    |- branches
    |- tags
 |- server
    |- trunk
    |- branches
    |- tags
 |- website
 |- misc 
```

不同文件夹之间的分支和标签可能具有相同的名称。例如，客户端和服务器文件夹都可能有一个名为`1.0`.

我设法使用[svn2git](https://github.com/nirvdrum/svn2git)转换了单个文件夹，它似乎获得了历史记录以及分支。我可以设法为每个文件夹创建一个单独的 git 存储库。但是，我希望最终将所有内容都保存在*一个存储库*中。

将这些文件夹（现在是 git 存储库）合并为一个，同时维护每个文件夹的分支、标签和历史记录的最佳方法是什么？使用[这种方法](https://stackoverflow.com/a/1426163)，我似乎丢失了来自合并存储库的提交历史和分支......或者我只是错过了一些重要步骤或做错了什么？

否则，也许`svn2git`单独在每个文件夹上使用不是从 svn 迁移到 git 的最佳方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T18:45:04.200

我最终选择了[这个答案](https://stackoverflow.com/a/2139427)的方法。

本质上：

*   为 svn 存储库中的每个子文件夹创建一个 git 项目（使用 svn2git）
*   创建一个新的 git 存储库，将所有存储库合并到
*   将每个项目（包括所有分支）添加为远程：

    ```
    git remote add alpha <url/path-to-alpha-repo>
    git remote add bravo <url/path-to-bravo-repo>
    git remote add charlie <url/path-to-charlie-repo>
    for r in $(git remote); do
      git config remote.$r.fetch \
      "$(git config remote.$r.fetch | sed -e 's.remotes.heads/all.')"
      git config --add remote.$r.fetch \
      "$(git config remote.$r.fetch | sed -e 's.heads.tags.g')"
      git config remote.$r.tagopt --no-tags
    done
    git remote update 
    ```

*   将合并的存储库推送到远程存储库（从现在开始，这将是“官方”存储库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:14:46.147

在转换为 Git*之前*，我会将 svn 存储库重写为以下结构：

```
- trunk
  |-client
  |-server
  |-website
  `-misc
- branches
  |-client
  |-server
  |-website
  `-misc
- tags
  |-client
  |-server
  |-website
  `-misc 
```

要重组您的 svn 存储库，您必须将`svnadmin dump`存储库转换为一个文件，更新该文件中的所有路径，然后`svnadmin load`将更新的转储文件放入一个新的存储库。

查看转储文件的结构 - 可以使用支持搜索/替换的编辑器轻松完成实际重组。它需要是二进制安全的，因为除了 ascii 元数据之外，转储文件还包含原始二进制数据（存储库中的二进制文件）。

# eclipse - Eclipse CDT 不会创建 C++ 项目（Eclipse 抛出 java.lang.NullPointerException）

> ID：10461149
> 
> 赞同：2
> 
> 时间：2012-05-05T10:56:07.810
> 
> 标签：eclipse, eclipse-plugin, eclipse-cdt

我刚刚在 Eclipse Indigo 上安装了 CDT，但它无法创建项目。当我双击 C++ 项目按钮时，它给了我一个 java.lang.NullPointerException。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:52:29.047

这是一个错误，很可能是由于您没有指定任何源文件夹，请在新建项目向导的第一步中检查源文件夹路径...

# javascript - 单击按钮时如何滚动到顶部？

> ID：10461152
> 
> 赞同：12
> 
> 时间：2012-05-05T10:56:26.590
> 
> 标签：javascript, jquery

我在页面上有一个按钮，我希望当它被点击时，页面滚动到 0 位置。

HTML

```
<button id="button">Back to top </button> 
```

jQuery

```
$(document).scroll(function(){

        var scroll_pos = $(window).scrollTop()
    if(scroll_pos > 10){

        $('#button').click(function(){

        // what code to enter here??

        });

    }
    }); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-05T10:57:37.837

试试这个代码：

```
$("#button").on("click", function() {
    $("body").scrollTop(0);
}); 
```

方法将事件`on`绑定`click`到按钮并将`scrollTop`您滚动`body`到 0 位置。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-11T07:13:23.900

你可以使用`scrollTop`jquery的窗口函数

```
 $("#button").click( function() {
   $(window).scrollTop(0);
 }); 
```

当您单击按钮时，此页面将滚动到该位置的顶部。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-12-29T13:10:50.127

***尝试一下***

```
$("#button").click(function() {
        $("html").scrollTop(0);
        }); 
```

**或者**

```
$("#button").click(function() {
        $("html").animate({ scrollTop: 0 }, "slow");
        }); 
```

# c# - ip 代替 localhost - 使用 paypal 沙箱

> ID：10461153
> 
> 赞同：0
> 
> 时间：2012-05-05T10:56:36.057
> 
> 标签：c#, asp.net-mvc-2, ip, localhost, paypal-sandbox

我想在我的网站上测试贝宝交易。

问题是他们想使用 IP 而不是我机器的 localhost。

如何将 localhost 更改为一些静态 IP 地址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:28:58.087

localhost 的 ip 是 127.0.0.1 ，使用它

**编辑**

顺便说一句，您可以调用 cmd ipconfig -all 并查看您的 ip

另外你可以在这里查看[我的 IP](http://whoer.net/)

# asp.net-mvc - 在我的实体框架 CF 中有一个模型，其数据类型的内存消耗比 int 和 string 少

> ID：10461154
> 
> 赞同：0
> 
> 时间：2012-05-05T10:56:48.000
> 
> 标签：asp.net-mvc

我首先使用实体​​框架代码。

这里我有一个模型：

```
public class Stop
{
    [Key]
    public int StopID { get; set; }
    public string StopCode { get; set; }
    public string StopText { get; set; }
    public string Street { get; set; }
} 
```

1.  是否可以让键不是 int 但内存消耗更少？字节？整数16？

2.  是否可以减少字符串的内存消耗？字符串[20]？

我遇到的问题是我使用 WCF 服务来传输数据并且超出了合理的大小。

谢谢

* * *

更新

以下是传输的典型数据的屏幕截图：

![在此处输入图像描述](../Images/c30d8f625c6f866775cdda6f97c4f95d.png)

可以肯定的一件事：我有 2116 项与屏幕截图类似的转移。让我们尝试计算传输数据的大小。我每个项目的字符少于 20 个。我有 2116 个项目，所以 20 * 2116 = 42320 >> 远远少于我的 web.config (maxBufferPoolSize) 中配置的 600000！

这是我的配置：

```
 <binding name="WSHttpBinding_IRequestService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="600000" maxReceivedMessageSize="600000" messageEncoding="Text"
      textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Windows" negotiateServiceCredential="true"
          algorithmSuite="Default" />
      </security>
    </binding> 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:18:38.510

拥有不同的数据类型对您没有帮助。

数据在传输时被序列化为文本，因此类中的整数字符串与类中的字节`"42"`字符串完全相同。`"42"`发送的只是变量中的实际值，因此字符串可以包含多达 2 GB 的事实并不意味着每次发送字符串时都会发送 2 GB。

所以，你应该看看究竟是什么让你的数据如此庞大。例如，您传输的对象是否比您想象的要多得多？

# linux - 如何使 Perl Tk::Frame 看起来像 LCD？

> ID：10461157
> 
> 赞同：2
> 
> 时间：2012-05-05T10:56:57.853
> 
> 标签：linux, perl, fonts, perl-module

我想要一个[Tk::Frame](http://p3rl.org/Tk%3a%3aFrame)看起来像 LCD。在框架内，我有一个[Tk::Label](http://p3rl.org/Tk%3a%3aLabel)和一个[Tk::Entry](http://p3rl.org/Tk%3a%3aEntry)。有谁知道字体名称或方法来做到这一点，也许是 Perl 模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:48:11.760

我曾使用 Steve Lidie 的[Tk::LCD](http://search.cpan.org/~lusol/Tk-LCD-1.3/LCD.pm)制作闹钟，但不得不修改一些缺失的功能。 ![在此处输入图像描述](../Images/8bb0b037eddb676bf5902a5ba98d9da1.png)

# c# - 在 Release 构建中编组具有重叠的 LayoutKind.Explicit 结构失败

> ID：10461160
> 
> 赞同：3
> 
> 时间：2012-05-05T10:57:34.780
> 
> 标签：c#, marshalling, layoutkind.explicit

我有一个结构，它有一个报告为重叠的*非重叠*字段。

```
[FieldOffset(8)]
Int32 X;

[MarshalAs(UnmanagedType.ByValTStr, SizeConst = 16)]
[FieldOffset(12)]
string Y;

[FieldOffset(28)]
int Z; 
```

报告的错误是：

> 无法加载类型“XXX”...它包含偏移 12 处的对象字段，该对象字段未正确对齐或被非对象字段重叠。

它只发生在发布配置中（启用了跟踪、调试标志和不安全代码，关闭了优化），猜测 - 它会发生什么？

*UPD*：感谢@svick。确认 x64 构建不是人们想要的编组。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T13:04:31.757

注释@svick 的正确答案，这里的问题是您的结构声明违反了 CLR 使对象分配是原子的硬承诺。这不能在 64 位模式下工作，偏移量为 12 时，对象指针可以跨越高速缓存行的末尾。访问这样一个未对齐的成员总是需要两次读取或写入，并且永远不会是原子的。我认为这实际上是 CLR 类型验证器中的一个错误，但这不会帮助您克服这个难题。

当然，您这样做是为了与 32 位代码互操作，并且您正确更改了调试版本的平台目标设置，但忘记为发布版本这样做。这是每个配置的设置。轻松修复，只需更改发布配置的设置即可。

如果你真的需要它在 64 位模式下工作，那么你需要将它声明为`fixed char[16]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T11:33:13.420

首先，Release 配置与此无关。影响它的是平台目标：如果将其设置为 x64，则会出现此异常，但如果将其设置为 x86，它将正常工作。

我*认为*这种行为的原因`FieldOffset`是用于指定`struct`托管内存中的布局（即使文档没有这样说），但`MarshalAs`不在托管内存中使用。

因此，托管内存中的对象包含偏移量 12 处的引用。由于所有引用都必须在 .Net 中对齐（在 32 位应用程序中对齐 4 个字节，在 64 位应用程序中对齐 8 个字节），您会得到异常如果您将应用程序作为 64 位运行。

因此，问题不在于您有重叠的字段，而是错误消息的另一部分：该字段未正确对齐。

简单的解决方法是将应用程序编译为 x86。如果这对你来说不可能，我不知道如何解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:32:59.577

我认为系统中数据字段的默认对齐方式为 8 个字节。您必须为 Y 使用偏移 16。

# iphone - 设置值 NSMutableDictionary？

> ID：10461165
> 
> 赞同：2
> 
> 时间：2012-05-05T10:58:15.327
> 
> 标签：iphone, objective-c, ios, ipad, nsmutabledictionary

我无法保存 NSMutableDictionary。我正在尝试将其保存到 NSUserDefaults，然后加载并更改为蓝色，然后再次保存。

所以我最初是这样写的：

```
NSMutableDictionary *d = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                              firstNameLbl, @"firstName",
                              lastNameLbl, @"lastName", 
                              nil];
    [[NSUserDefaults standardUserDefaults] setObject:d forKey:@"youDict"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

然后我加载它并尝试更改如下值：

```
NSMutableDictionary *d = [[NSUserDefaults standardUserDefaults] objectForKey:@"youDict"];
    [d setObject:textField.text forKey:key];
    [[NSUserDefaults standardUserDefaults] setObject:d forKey:@"youDict"];
    [[NSUserDefaults standardUserDefaults] synchronize]; 
```

但是，这行 ,`[d setObject:textField.text forKey:key];`导致应用程序崩溃，我收到此错误：

`'NSInternalInconsistencyException', reason: '-[__NSCFDictionary setObject:forKey:]: mutating method sent to immutable object'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T11:03:37.230

objectForKey 为 NSUserDefaults 返回一个不可变的值。为了完成这项工作，将第二个代码块的第一行替换为：

```
 NSMutableDictionary *d = [NSMutableDictionary dictionaryWithDictionary: [[NSUserDefaults standardUserDefaults] objectForKey:@"youDict"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:10:46.137

尝试使用此代码，我认为我们会对您有所帮助。

```
 NSMutableDictionary *d = [NSMutableDictionary dictionaryWithDictionary: [[NSUserDefaults standardUserDefaults] ValueForKey:@"youDict"]]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:04:04.433

NSUserDefaults 不区分可变对象和不可变对象，因此当您取回它时，它将是不可变的：

如果你想要一个可变字典，只需使用 mutableCopy：

```
NSMutableDictionary *d = [[[NSUserDefaults standardUserDefaults] objectForKey:@"youDict"] mutableCopy]; 
```

希望对你有帮助...

# mysql - 如何将超过 10 mb 的视频存储到 MySql 数据库中？

> ID：10461166
> 
> 赞同：4
> 
> 时间：2012-05-05T10:58:19.317
> 
> 标签：mysql, video, size, store

我需要在 MySQL 数据库中插入超过 10 MB 大小的视频。怎么做？
我尝试以下查询。

```
{  
  insert into mscit_video values(1,'bcg',LOAD_FILE('c:\\abc\\xyz.mpg') 
} 
```

使用此查询，我成功地将 1 MB 视频存储到数据库中，但如果我尝试
插入超过 10 MB 大小的视频，则会出现以下错误。

```
"java.sql.SQLException: Result of load_file() was larger than max_allowed_packet (1048576) - truncated" 
```

是否可以在数据库中存储超过 10 MB 的视频？如果是，那怎么办？
给我任何参考或提示。
提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T11:06:13.710

请注意，这里的问题不是数据库/表/字段的容量，而是数据包发送（我之前在发送很长的连接查询时遇到过这个问题，从客户端到服务器）。您是否拥有 MySQL 数据库的管理员权限？您可能想要增加[最大允许数据包大小](http://dev.mysql.com/doc/refman/5.5/en/packet-too-large.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:06:28.677

您需要指定`longblob`电影列的数据类型。它最多可以存储 4 GB

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T11:07:45.660

我个人不会将视频存储在数据库中。您最好将文件位置（元数据）存储在查找视频文件的数据库中。然后您可以将文件存储在文件系统或一些分布式文件系统中，例如 S3。

如果您仍然真的想存储在数据库中，请尝试使用[LONGBLOB](http://dev.mysql.com/doc/refman/5.0/en/blob.html)字段，该字段最多可为您提供[4GB](http://dev.mysql.com/doc/refman/5.6/en/innodb-restrictions.html)的存储空间。

# android - 动态pickerRow Titanium Studio

> ID：10461169
> 
> 赞同：0
> 
> 时间：2012-05-05T10:58:26.073
> 
> 标签：android, ios, windows-mobile, dynamic-data, titanium-mobile

我是一个绝对的初学者，我正在尝试开发我的第一个应用程序。我经历了 Lynda.com.Titanium.Mobile.App.Development.Essential.Training。

之后，我画出我想要实现的目标，基本上是一个多选择器，其中主要字段是：

大陆、国家、州、机场、纬度、液化天然气

动态链接

所以我开始四处搜索，发现以下代码和平：

> var win = Ti.UI.createWindow();
> {//选择器
> 
> ```
> var picker = Ti.UI.createPicker({
>     selectionIndicator: true
> });
> 
> var data = [
>     {country: 'US', cities: ['Miami', 'Orlando', 'LA', 'Ny']}, 
>     {country: 'Canada', cities: ['Toronto', 'Ottawa', 'Quebec']}, 
>     {country: 'UK', cities: ['London', 'York', 'Oxford', 'Bath']}
> ];
> var rows = [];
> for (var i = 0; i < data.length; i++){
>     var row = Ti.UI.createPickerRow({
>         title: data[i].country,
>         cityArray: data[i].cities
>     });
> 
>     rows.push(row);
> 
> }
> picker.add(rows);
> 
> picker.addEventListener('change', function(e){
>     Ti.API.info(e.row.title);
>     Ti.API.info(e.row.cityArray);
> }) 
> ```
> 
> win.add(选择器);
> }
> win.open();

但我认为它没有按应有的方式工作，它不显示第二个选择器、任何帮助、任何建议、指针？

干杯

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-07T17:35:43.333

您的代码有一些语法错误。

```
var win = Ti.UI.createWindow();

var picker = Ti.UI.createPicker({
    selectionIndicator: true
});
var column1 = Ti.UI.createPickerColumn();
var column2 = Ti.UI.createPickerColumn();

var data = [
    {country: 'US', cities: ['Miami', 'Orlando', 'LA', 'Ny']}, 
    {country: 'Canada', cities: ['Toronto', 'Ottawa', 'Quebec']}, 
    {country: 'UK', cities: ['London', 'York', 'Oxford', 'Bath']}
];

for (var i = 0; i < data.length; i++){
    var row1 = Ti.UI.createPickerRow({
        title: data[i].country,

    });
    column1.addRow(row1);
}

for (x in data[0])
{
    var row2 = Ti.UI.createPickerRow({
        title: data[0][x].val,

    });
    column2.addRow(row2)
 }

picker.add([column1,column2]);

picker.addEventListener('change', function(e){
    Ti.API.info(e.row.title);
    Ti.API.info(e.row.cityArray);
});

win.add(picker);

win.open(); 
```

我稍微修改了代码。

这应该返回完整的左侧选择器，以及第二个选择器中第一个城市的选项。

当第一个更改时，您的事件侦听器必须更改第二个选择器。

注意添加了“列”。

我还清理了一些语法错误。

我还没有测试过这段代码，但它应该会引导你朝着正确的方向前进。

此外，这应该有帮助：[http ://docs.appcelerator.com/titanium/2.0/#!/api/Titanium.UI.Picker](http://docs.appcelerator.com/titanium/2.0/#!/api/Titanium.UI.Picker)

# authentication - Vista+ 中的 Winlogon/RDP：有什么方法可以替换 RDP 会话选择提示？

> ID：10461174
> 
> 赞同：1
> 
> 时间：2012-05-05T10:59:16.917
> 
> 标签：authentication, windows-server-2008, rdp, winlogon

当有人登录到 RDP 服务器（不是 Citrix，不是特殊的终端服务器，而是 Windows Server 中可用的标准 RDP 访问）时，会显示一个带有会话列表的**Windows 登录窗口。**

![带有 RDP 会话列表的 RDP 访问屏幕截图](../Images/be4d3a704a60cf4f3597a491206d8f7e.png)

令人吃惊的是，这个会话提示是在授权**后**显示的，最多可以有三个会话，而通过查看“登录”时间，仍然无法通过其他方式区分它们。

*没关系[确实存在](https://serverfault.com/a/153509)控制台工具来附加正确的会话，检查会话内容等；我们已经采用了它们；还有可能围绕固定会话 ID 做很多事情（例如，管理控制台的第一个会话，应用程序测试的第二个会话）。*- 我想用更自定义的东西替换那个会话列表。

在较早的 Windows 版本中，可以编写 GINA 模块来篡改授权；不确定是否可以覆盖上述功能；现在看来，当前的 API 更加[受限](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756900.aspx)。

**问题：** 您能否提供有关为这部分登录过程创作完全替换的任何建议/示例？

# postgresql - PostGIS中的K最近邻查询

> ID：10461179
> 
> 赞同：15
> 
> 时间：2012-05-05T11:01:01.617
> 
> 标签：postgresql, postgis, indexing, nearest-neighbor

我在 PostGIS 中使用以下最近邻查询：

```
SELECT g1.gid g2.gid FROM points as g1, polygons g2   
WHERE g1.gid <> g2.gid
ORDER BY g1.gid, ST_Distance(g1.the_geom,g2.the_geom)
LIMIT k; 
```

现在，我已经在两个表的 the_geom 和 gid 列上创建了索引，这个查询比其他涉及空间连接 b/w 两个表的空间查询花费更多的时间。

有没有更好的方法来找到 K 近邻？我正在使用 PostGIS。

而且，尽管在几何列上创建了索引，但另一个查询却花费了异常长的时间：

```
select g1.gid , g2.gid from polygons as g1 , polygons as g2
where st_area(g1.the_geom) > st_area(g2.the_geom) ; 
```

我相信，这些查询并没有从 gist 索引中受益，但为什么呢？

而这个查询：

```
select a.polyid , sum(length(b.the_geom)) from polygon as a , roads as b  
where st_intersects(a.the_geom , b.the_geom); 
```

尽管涉及比多边形或点表大得多的“道路”表并且还涉及更复杂的空间运算符，但一段时间后返回结果。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-13T23:11:14.843

自[2011 年 9 月下旬](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)以来，PostGIS 通过可用于 ORDER BY 子句的特殊运算符支持索引最近邻查询：

```
SELECT name, gid
FROM geonames
ORDER BY geom <-> st_setsrid(st_makepoint(-90,40),4326)
LIMIT 10; 
```

...将以可扩展的方式返回`geom`最近的 10 个对象。`-90,40`该公告[帖子](http://blog.opengeo.org/2011/09/28/indexed-nearest-neighbour-search-in-postgis/)中提供了更多详细信息（选项和警告），并且[<->](http://postgis.refractions.net/documentation/manual-2.0/geometry_distance_centroid.html)和[<#> 运算符](http://postgis.refractions.net/documentation/manual-2.0/geometry_distance_box.html)的使用现在也记录在官方 PostGIS 2.0 参考中。（两者之间的主要区别在于`<->`比较形状质心并`<#>`比较它们的边界 - 点没有区别，其他形状选择适合您查询的形状。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-05T12:11:49.550

关于您的问题的一些想法：

st_distance 和 st_area 不能使用索引。这是因为这两个功能都不能归结为“a 在 b 中吗？”之类的问题。或“a 和 b 是否重叠？”。更具体的是：GIST 索引只能对两个对象的边界框进行操作。

有关这方面的更多信息，您可以查看[postgis 手册](http://postgis.refractions.net/documentation/manual-1.5/ch04.html#id2628347)，其中说明了 st_distance 的示例以及如何改进查询以更好地执行。

但是，这并不能解决您的 k 最近邻问题。为此，现在我不知道如何提高查询的性能。我看到的唯一机会是假设 k 最近的邻居总是在 x 米以下的距离内。然后您可以使用与 postgis 手册中类似的方法。

您的第二个查询可能会加快一点。目前，您计算表 1 中每个对象的区域的频率与表具有行的频率一样 - 策略是首先连接数据，然后根据该函数进行选择。您可以通过预先计算区域来显着减少区域计算的数量：

```
WITH polygonareas AS (
    SELECT gid, the_geom, st_area(the_geom) AS area
    FROM polygons
)
SELECT g1.gid, g2.gid
FROM polygonareas as g1 , polygonareas as g2 
WHERE g1.area > g2.area; 
```

您的第三个查询可以使用边界框进行显着优化：当两个对象的边界框不重叠时，对象就没有办法重叠。这允许使用给定的索引，从而获得巨大的性能提升。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-09-06T14:54:22.497

您可以使用 KNN 索引和横向连接来完成。

```
SELECT v.gid, v2.gid,st_distance(v.the_geom, v2.the_geom)
  FROM geonames v, 
       lateral(select * 
                 from geonames v2
                where v2.id<>v.id
                ORDER BY v.the_geom <-> v2.the_geom LIMIT 10) v2
where v.gid in (...) - or other filtering condition 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T23:00:59.517

您可能需要的是 KNN 索引，它有望很快在 PostGIS 2.x 和 PostgreSQL 9.1 中可用：参见[http://blog.opengeo.org/tag/knn/](http://blog.opengeo.org/tag/knn/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T20:48:12.440

假设您有 p 点和 g 多边形，您的原始查询：

```
SELECT g1.gid, g2.gid FROM points as g1, polygons g2   
WHERE g1.gid <> g2.gid
ORDER BY g1.gid, ST_Distance(g1.the_geom,g2.the_geom)
LIMIT k; 
```

正在返回 pxg 集中的 k 个最近邻居。该查询可能正在使用索引，但它仍然必须对整个 pxg 集进行排序才能找到距离最小的 k 行。您想要的是以下内容：

```
SELECT g1.gid, 
      (SELECT g2.gid FROM polygons g2   
       --prevents you from finding every nearest neighbour twice
       WHERE g1.gid < g2.gid 
       --ORDER BY gid is erroneous if you want to limit by the distance
       ORDER BY ST_Distance(g1.the_geom,g2.the_geom)
       LIMIT k)
FROM points as g1; 
```

# php - PHP问题中的指针

> ID：10461183
> 
> 赞同：1
> 
> 时间：2012-05-05T11:01:41.050
> 
> 标签：php, pointers

> **可能重复：**
> [foreach 的](https://stackoverflow.com/questions/4969243/strange-behavior-of-foreach)
> [奇怪行为 循环引用后的奇怪行为 - 这是 PHP 错误吗？](https://stackoverflow.com/questions/8220399/strange-behaviour-after-loop-by-reference-is-this-a-php-bug)

谁能解释一下为什么这段代码：

```
<pre>
<?php

$a = array('page', 'email', 'comment');
$b = array('page' => 'realpage', 'email' => 'reaLmail', 'comment' => 'c');
$c = array();

foreach ($a as &$item) {
        if (isset($b[$item])) {
               $item =  $b[$item];
        }
}

foreach ($a as $item) {
        $c[] = $item;
}

print_r($c); 
```

输出

```
 Array
(
    [0] => realpage
    [1] => reaLmail
    [2] => reaLmail
) 
```

？？？为什么在第二个循环 a 之前是（通过 var_dump）

```
array(3) {
  [0]=>
  string(8) "realpage"
  [1]=>
  string(8) "reaLmail"
  [2]=>
  &string(1) "c"
} 
```

但在第一次迭代中，a 是

```
 array(3) {
  [0]=>
  string(8) "realpage"
  [1]=>
  string(8) "reaLmail"
  [2]=>
  &string(8) "realpage"
} 
```

并且在第二个和第三个 [1] 和 [2] 索引上是相同的“realmail”，而 [2] 是指针？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:08:29.707

如果您使用`foreach (... as &..)`, then`unset`是必需的，如 php 手册中所述：

```
foreach ($a as &$item) {
        if (isset($b[$item])) {
               $item =  $b[$item];
        }
}
unset($item); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:05:44.437

您不需要`&`在第一个循环中，这使它成为一个参考。删除它，您的示例应该可以正常工作。

```
foreach ($a as &$item) 
```

# ruby-on-rails-3 - Rails，实时音频/视频流，推荐？

> ID：10461184
> 
> 赞同：4
> 
> 时间：2012-05-05T11:02:04.593
> 
> 标签：ruby-on-rails-3, video-streaming

构建一个使用麦克风和摄像头流式传输音频/视频并被所有订阅用户观看的 ruby​​ on rails 应用程序的推荐解决方案是什么？10 到 50 个用户

推荐使用哪些服务？需要什么工具？Rails 应用程序世界中是否有可用于此目的的知名媒体服务器？

任何信息都非常感谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-07T00:26:34.037

我们使用熊猫进行视频流。这是[将其与导轨集成的指南](http://www.pandastream.com/docs/integrate_with_rails)

# asp.net - Tridion 页面中的这些 ASP.Net 用户控件 (.ascx) 有什么作用？

> ID：10461190
> 
> 赞同：4
> 
> 时间：2012-05-05T11:02:37.850
> 
> 标签：asp.net, tridion

我从与在页面上呈现 ASP.Net 用户控件相关的 SDL Tridion 站点获得此代码。

我理解的是body标签菜单，内容，搜索结果都是.ascx文件。但我不明白他们使用的其他控件。谁能解释一下这个代码片段？

```
<%@ Page Language="C#" %>
<html>
  <head>
    <title>
      <tridion:content ExpectXmlContent="true" XPath="//tcm:Content/tridion:Content/tridion:title" runat="server"/>
    </title>
    <tridion:content templateuri="tcm:47-3016-32" runat="server"/>
    <tridion:track runat="server" xpath="//tcm:Metadata/tridion:Metadata/tridion:category" pageuri="tcm:47-2966-64" />
    <tridion:secure issecured="false" redirecturl="~/login/login.aspx" runat='server'/>
  </head>
  <body>
    <tridion:menu menutype="topnav" runat="server"/>
    <tridion:content templateuri="tcm:47-3052-32" runat="server"/>
    <tridion:searchresults Category="Categories" templateuri="tcm:47-3058-32" runat="server"/>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T11:24:46.017

正如您已经得出的结论，这些确实是 ASP.NET 用户控件。但据我所知，这些控件不是标准 Tridion 安装的一部分。这意味着它们可能是由原始实施者专门为您的网站创建的。我建议与该实施者联系以获取文档和源代码。

也就是说，从简单地浏览一下片段，它看起来像：

*   第一个`tridion:content`从页面 XML 中查找页面标题
*   第二个`tridion:content`呈现页面上使用指定组件模板的所有组件演示
*   调用 Tridion的`tridion:track`个性化和分析模块来跟踪对该页面的访问
*   使用`tridion:secure`Tridion Professional Service 的 Secure Content Delivery 模块来确保只有经过适当授权的用户才能访问此页面
*   然后`tridion:menu`呈现一个菜单，看似与 Tridion 中的任何项目无关
*   然后另一个`tridion:content`控件呈现更多的组件表示，这次是具有另一个组件模板的那些
*   最后`tridion:searchresults`查询 Tridion Broker 以显示相关组件演示的列表

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-05T11:36:27.513

检查项目 web.config 文件，应该有一个`<controls>`标签，其中将引用使用“tridion”标签前缀的程序集。

然后，您可以使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)之类的工具来反编译程序集并更清楚地了解正在发生的事情。

# java - 如何将 jar 文件输出返回给 ProcessBuilder？

> ID：10461192
> 
> 赞同：1
> 
> 时间：2012-05-05T11:02:42.660
> 
> 标签：java, jar, processbuilder

我正在使用进程构建器执行一个简单的 jar 文件。jar 文件通过要求用户输入一个数字来简单地计算一个数字的平方。我可以在控制台输入一个数字，但程序挂起。如何将此（数字）传递回进程构建器，以便由 jar 文件计算其平方？

这是我的代码：

```
public static void executeSystemCommand(String... args) {
try {
    ProcessBuilder pb = new ProcessBuilder(args);

    pb.redirectErrorStream(true);           
    Process proc = pb.start();
    Reader reader = new InputStreamReader(proc.getInputStream());

    int ch;
    while ((ch = reader.read()) != -1) {
        System.out.print((char) ch);    
    }

    reader.close();
    Scanner scan = new Scanner(System.in);

    int k = scan.nextInt();
    proc.getOutputStream().write(k);
    proc.getOutputStream().close();

    while ((ch = reader.read()) != -1) {
        System.out.print((char) ch);    
    }

    reader.close();
} catch (IOException e) {
    e.printStackTrace();
    System.exit(-1);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:46:48.387

这是一个将字符串 b 输入到 jar 文件并根据从 jar 文件接收到的输出返回布尔数组列表的代码。

```
public ArrayList<Boolean> pro(String b) throws IOException, Exception {
        ArrayList<Boolean> ar = new ArrayList<Boolean>();
        try {
            ProcessBuilder pb = new ProcessBuilder("java", "-jar",
                    "myjar.jar");

            pb.directory(new File("path to myjar"));
            Process proc = pb.start();

            Scanner in = new Scanner(proc.getInputStream());
            PrintWriter out = new PrintWriter(proc.getOutputStream());

            // Read user input
            out.println(b);
            out.flush();
            String response = new String();

            // Read the response
            for (int i = 0; i < b.length(); i++)
                response = in.nextLine();

            in.close();
            out.close();

            StringTokenizer st = new StringTokenizer(response);
            while (st.hasMoreTokens()) {
                String bol = st.nextToken();

                if (bol.equals("true"))
                    ar.add(true);
                else
                    ar.add(false);

            }

        } catch (IOException e) {
            e.printStackTrace();
        }
        return ar;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T07:41:28.363

[这](http://pastie.org/4602094)是我尝试并开始工作的一些示例代码。

该程序使用`ProcessBuilder`. 它还产生了两个新线程：

1.  新进程的读取`output`和`error`流并将其写入程序的`System.out`
2.  将程序上写入的所有内容复制到新进程`System.in`的流中`input`

这很好用，但是我遇到了一些麻烦，无法停止从读取`System.in`到正常关闭的线程。我找不到中断读取时阻塞的线程的方法`System.in`，因此我通过将线程设置为守护进程来解决它。

以下是关于这些主题的一些很好的资源：

1.  [中断 Java 线程](http://www.techrepublic.com/article/interrupting-java-threads/5144546)
2.  [当 Runtime.exec() 不会](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=4)

# jquery - jQuery.cycle 寻呼机分隔符

> ID：10461194
> 
> 赞同：1
> 
> 时间：2012-05-05T11:03:00.123
> 
> 标签：jquery, cycle, pager

这是我的第一篇文章，希望我不会犯很多错误......

我在我的网站上使用美妙的 jquery.cycle 插件作为新闻滑块模块。现在我想添加一个如下所示的寻呼机：

01 / 02 / 03 / 04

这意味着我必须在除最后一个之外的每个寻呼机号码之后添加“分隔符”（=“/”一个正斜杠）。但我不知道我怎么可能做到这一点。

这就是我所拥有的：

```
// redefine Cycle's updateActivePagerLink function 
$.fn.cycle.updateActivePagerLink = function(pager, currSlideIndex) {
    $(pager)
        .find('a')
        .removeClass('active') 
        .filter('a:eq('+currSlideIndex+')')
        .addClass('active'); 
};

$('div.teaser-news')
    .after('<div class="pager-news"></div>')
    .cycle({ 
        fx:     'scrollRight',
        rev:        1,
        speed:  'slow', 
        timeout: 6000,
        pager:'.pager-news', 
        pagerAnchorBuilder: function(idx, slide) {

            var numSlides = $("div.teaser-news").length;

            if( idx < 10){
                idx += '<a href="#">0' + idx + '</a><span class="divider">&nbsp;&#47;&nbsp;</span>';
            } else {
                idx += '<a href="#">' + idx + '</a><span class="divider">&nbsp;&#47;&nbsp;</span>';
            }

            return idx; 
        }
}); 
```

有人可以帮我摆脱最后一个斜线吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:08:00.493

我宁愿只使用 pad 功能：

```
function zeroPad(num, places) {
  var zero = places - num.toString().length + 1;
  return Array(+(zero > 0 && zero)).join("0") + num;
} 
```

然后您可以删除 if/then 并执行以下操作：

```
var slash = "/";
if (idx=(numSlides-1))
    slash = "";

return zeroPad(idx+slash, 2); 
```

还有几个例子[如何在 JavaScript 中输出带前导零的整数](https://stackoverflow.com/questions/2998784/how-to-output-integers-with-leading-zeros-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T12:31:22.717

lucuma 添加的零填充功能对我来说很方便，尽管经过一些实验后，我发现输出不喜欢在包装器之外添加。因此，当我尝试这样做`return <a href='#'>" + zeroPad(n,2) + "</a>&nbsp;/&nbsp;`时，在关闭后忽略了标记`</a>`

为了解决这个问题，我必须添加一个包装`<li>`，这样我就可以在包装内添加正斜杠。我已经修改了我的代码以匹配

```
$('.carousel .images').cycle({
   timeout: 5000,
   pager : '.pager-news',
   pagerAnchorBuilder: function(idx, slide) {
     var n = idx+1;
     var wrapper = $("div.teaser-news");
     if(n != wrapper.children().length){
       return "<li><a href='#'>" + zeroPad(n,2) + "</a>&nbsp;/&nbsp;</li>";  
     }else{
       return "<li><a href='#'>" + zeroPad(n,2) + "</a></li>"; 
     }
   }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:30:05.327

```
if( idx < 10){
   idx += '<a href="#">0' + idx + '</a>';
   if (idx+1 != numSlides) {
      idx += '<span class="divider">&nbsp;&#47;&nbsp;</span>';
   }
} else {
   idx += '<a href="#">' + idx + '</a>';
   if (idx+1 != numSlides) {
      idx += '<span class="divider">&nbsp;&#47;&nbsp;</span>';
   }
} 
```

恕我直言

# jquery-jscrollpane - 图像填充内容上的 jScrollPane

> ID：10461196
> 
> 赞同：0
> 
> 时间：2012-05-05T11:03:12.170
> 
> 标签：jquery-jscrollpane

在我的网站上：www.industria.be/verkiezingen/infinity/www/

我在屏幕中间制作了一个内容窗格。我正在调用 jScrollPane 来处理有意的溢出。这在主页/团队和日历页面上运行顺利，但是赞助商页面有问题。此赞助商页面包含相同的容器，但这里是填充图像。jScrollPane 函数调用虽然是一样的，但在这里不能正常工作。有时滚动条不会出现或无法滚动到容器底部。

我使用的 jQuery 代码：

```
$(document).ready(function(){
 $('#content').jScrollPane({
    scrollbarWidth: 10,
    scrollbarMargin: 10,
    dragMinHeight: 50,
    dragMaxHeight: 100,
    showArrows: false   
});}); 
```

的HTML：

```
<div id="content">
    <h1>Our sponsors:</h1>
    <a href="http://www.mydigipass.com/"
       target="_blank"><img src="img/myDIGIPASS-logo.png"
           alt="" width="650" height="152" class="sponsorbalk"/></a></br>
    <a href="http://www.dvs-entertainment.be"
       target="_blank"><img src="img/DVS-entertainment.png"
           alt="" width="250" height="125" class="sponsor"></a>
    <a href="http://winter.skikot.be/"
       target="_blank"><img src="img/skikot.png"
           alt="" width="284" height="140" class="sponsor"></a>
    <a href="http://www.imec.be/"
       target="_blank"><img src="img/imec.png"
           alt="" width="250" height="172" class="sponsor"></a>
    <a href="http://www.poweruser.be/"
       target="_blank"><img src="img/poweruser_black.jpg"
           alt="" width="400" height="217" class="sponsor"></a>
    <a href="http://www.delibere.be/new_design/index.php"
       target="_blank"><img src="img/de.png" alt=""
          width="225" height="50" class="right sponsor"></a>
    <a href="http://www.groept.be/www/"
       target="_blank"><img src="img/GroepT.png"
           alt="" width="180" height="180" class="left sponsor"></a>
    <a href="http://guldendraak.be/"
       target="_blank"><img src="img/gulden-draak.png"
           alt="" width="106" height="106" class="sponsor"></a> 
    <div id="sponsors">
      <p>We would like to thank all of the above sponsors for their co-operation and support to our team.</p>                   
    </div>
</div> 
```

我希望有人能解释我为什么这不能正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T20:02:12.580

根据您的描述，我建议您在加载图像后使用 $(window).load() 而不是 $(document).ready() 初始化滚动窗格。

不久前，我自己也遇到了这个问题的一个变体。

# asp.net-mvc - Html.EditorFor 与 shortDateTostring

> ID：10461198
> 
> 赞同：1
> 
> 时间：2012-05-05T11:03:34.573
> 
> 标签：asp.net-mvc

我想在我的 HTML.editorFor 中只显示日期而不是日期和时间。我尝试了两种不同的方法，但不起作用。她是我的代码与不同的试验：

```
<%: Html.EditorFor(model => model.Dd.ToShortDateString())%>
        <%: Html.ValidationMessageFor(model => model.Dd) %>
    <br />
        <%: Html.LabelFor(model => model.Df) %>
    <br />
        <%: Html.EditorFor(model => model.Df, Model.Df.ToShortDateString()) %>
        <%: Html.ValidationMessageFor(model => model.Df) %> 
```

有人知道我怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T18:33:55.987

您可以使用以下属性装饰您的视图模型[`[DisplayFormat]`](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayformatattribute.aspx)属性：

```
[DisplayFormat(ApplyFormatInEditMode = true, DataFormatString = "{0:dd/MM/yyyy}")]
public DateTime Df { get; set; } 
```

这允许您指定在视图中显示和编辑属性时希望使用的格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:51:18.723

`[DataType(DataType.Date)]` 只需在您的视图中使用 Then装饰您的 ViewModel 属性`@Html.EditorFor(m = > m.YourProperty)`

***更新：***

我的意思是这样的：

```
public class YourModel{
   [DataType(DataType.Date)]
   public DateTime YourProperty{get;set;}
} 
```

然后只需使用默认的 EditorTemplate ：

```
Html.EditorFor(model => model.YourProperty) 
```

# ruby-on-rails - 目前将 Omniauth 与 Google 凭据一起使用的正确方法是什么？

> ID：10461200
> 
> 赞同：3
> 
> 时间：2012-05-05T11:03:46.883
> 
> 标签：ruby-on-rails, omniauth

目前使用 Google 凭据授权 Rails 应用程序用户的最佳方式是什么？

在过去一年左右的时间里，谷歌对其服务进行了一些重大更改。同时，据我所知，关于 Omniauth 和 Google 的信息相当稀少。所以我想知道人们认为目前最好的方法是什么。

我正在使用设计 + Omniauth。我希望用户能够使用他们的 Google 凭据登录（我已经了解如何为其他提供商执行此操作）。但我还需要一个 oauth 令牌，使用户能够与他们的 Google+ 流和其他服务进行交互（我知道 API 目前是只读的，但我正在为未来做计划）。

所以我的具体问题是：

1) 我看到了使用 open-id 或 omniauth-google-oauth2 gem 的参考。这两种方法之间是否有任何显着差异，现在认为什么是“正确”的方法？

2) 谷歌生态系统有多“围墙”？例如，让用户在我的应用程序中与他们的 G+ 流*、*他们的 Picassa 相册*和*他们的 YouTube 视频等进行交互是否相对简单？还是这些完全独立的生态系统？我之所以这样问，是因为我看到的信息似乎表明，在初始化omniauth for google 时，必须将特定服务定义为一个范围。但目前尚不清楚用户通过身份验证后服务的集成度如何。

感谢您提供任何有助于我掌握 Google 的提示或建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:08:42.703

[open-id gem](https://github.com/intridea/omniauth-openid)只是一种使用 gmail 帐户进行身份验证的快速而肮脏的方法。而对于 Twitter，你必须注册一个应用程序，设置一些回调 url，获取你的密钥和秘密......有了这个 gem，你所需要的就是：

```
# Gemfile
gem 'omniauth-openid'

# Using pure omniauth
# omniauth.rb
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :openid, :store => OpenID::Store::Filesystem.new('/tmp'), :name => 'google', :identifier => 'https://www.google.com/accounts/o8/id'
end

# Using devise
# devise.rb
Devise.setup do |config|
  config.omniauth :open_id, :store => OpenID::Store::Filesystem.new('/tmp'), :name => 'google', :identifier => 'https://www.google.com/accounts/o8/id'
end 
```

你甚至不需要钥匙和秘密！这种易用性的缺点是，由于您不注册应用程序，因此无法自定义身份验证提示，例如选择应用程序的名称、描述和徽标。你得到的只是一个（相当丑陋的）提示。看看[这个网站](http://250.s-anand.net/)，例如，看看我的意思。或者检查 StackOverflow，他们也使用它。

但更重要的是，您只能访问用户的电子邮件地址和关联名称。

所以，我很确定[omniauth-google-oauth2](https://github.com/zquestz/omniauth-google-oauth2)是适合您的方式。您需要在[Google 的 Cloud Console](https://cloud.google.com/console)中注册您的应用，并在那里获取您的 API 密钥和密钥。

我同意你的观点，关于 Google Oauth 的文档很少（或者我们可能搜索得不够努力）。如果你写了一篇关于如何访问你谈到的所有信息（G+ 流、youtube 视频，..）的教程，当你让它工作时，我当然会读它啊！

# c++ - C++ DLL 崩溃（我认为读/写崩溃相关）

> ID：10461206
> 
> 赞同：0
> 
> 时间：2012-05-05T11:04:06.620
> 
> 标签：c++

有点奇怪的情况。我有一个为我制作的 C++ dll，它注入到第 3 方应用程序并检索信息。这个 dll 最初只会输出信息，但我需要在我制作的 VB 应用程序中使用它。

所以我制作了另一个 C++ dll，它具有来自原始 C++ dll 的 2 个回调函数 .. 这是发送信息的地方。并且具有我的 VB 应用程序可以调用以检索该信息的功能。

我对 C++ 不是很好。我一直在搞砸这个问题并降低了崩溃的发生率，但它仍然会发生（虽然很少）。我认为在某些时候 2 个不同的部分正在读取或写入导致崩溃的同一地址。这是代码：

这是一个全局 cstring，我用它来存储来自回调函数的信息并发送到 VB

```
class Global
{
public:

    static CString &  get_allstacks() {
        static CString allstacks; return allstacks; }
}; 
```

这是我从 VB 调用的向我发送信息的函数。

```
BSTR _stdcall vbFunction()
{
    BSTR Message;
    int len = Global::get_allstacks().GetLength();
    Message = SysAllocStringByteLen ((LPCTSTR)Global::get_allstacks(), len+1 );
    return Message;

} 
```

这是回调函数之一。还有另一个函数也将信息放入相同的全局 cstring 中。在此函数中，它还会在 cstring 长度达到 >100k 时调整其大小。请注意，调整大小的代码仅在 1 个回调中。

```
HANDLE OnInfo(SendInfo* info)
{
    strcpy_s(tempID,200,info->GameId);
    CString stringTempID="";
    stringTempID=tempID;

    CString tempRound="";
    strcpy_s(round,200,info->round);
    tempRound=round;

    // get a reference to global string
    CString & allstacks= Global::get_allstacks();
    // add new info
    allstacks+=  stringTempID + tempRound + "\n";

    //resize cstring
    int len =allstacks.GetLength();
    if  (len > 100000)
    {
        int nstart = 0;
        int npos  = 0;

        while ((npos = allstacks.Find(_T('\n'), nstart)) < len - 50000) {
            nstart = npos+1;
        }   

        allstacks= allstacks.Right(nstart);
    }

    return 0;
} 
```

万一这是需要的

```
char* tempID =new char[255];
char* round=new char[255]; 
```

无论如何，崩溃是非常罕见的，它在调用 vbFunction 时发生了几次，但大多数时候它没有调用 vbFunction 就发生了，所以我认为问题也发生在回调函数中。

# asp.net - Sharepoint 2010 从事件接收器重定向（创建站点后）

> ID：10461207
> 
> 赞同：1
> 
> 时间：2012-05-05T11:04:16.087
> 
> 标签：asp.net, sharepoint, redirect, sharepoint-2010, eventreceiver

我的问题是：在用户创建站点后的 Sharepoint 2010 中，首先我需要将用户重定向到我的自定义页面，而不是将用户重定向到新站点的 url。

我为网络创建了事件接收器，并在使用 SPUtility.Redirect() 在我的页面上创建重定向后尝试了站点：

```
public class MySiteEventReceiver : SPWebEventReceiver
{
    public override void WebProvisioned(SPWebEventProperties properties)
    {
        var web = properties.Web;
        base.WebProvisioned(properties);

        string url = web.Site.Url + "/_LAYOUTS/MyPage.aspx";
        SPUtility.Redirect(url, SPRedirectFlags.CheckUrl, HttpContext.Current);
    }
} 
```

但始终 HttpContext.Current 为空。

我在 intrnet 中寻找我的问题的解决方案。我找到了它：[http ://www.sharepointkings.com/2008/05/httpcontext-in-eventhandler.html](http://www.sharepointkings.com/2008/05/httpcontext-in-eventhandler.html)

我做的：

```
public class MySiteEventReceiver : SPWebEventReceiver
{
    private static HttpContext oContext;

    public SubSiteEventReceiver() : base()
    {
        if (oContext == null)
        {
            oContext = HttpContext.Current;
        }
    }
    public override void WebProvisioned(SPWebEventProperties properties)
    {
        var web = properties.Web;
        base.WebProvisioned(properties);

        string url = web.Site.Url + "/_LAYOUTS/MyPage.aspx";
        SPUtility.Redirect(url, SPRedirectFlags.CheckUrl, oContext);
    }
} 
```

之后 HttpContext 不为空（我为 WebProvisioned 属性设置了同步）

```
<Synchronization>Synchronous</Synchronization> 
```

但在这种情况下，我收到错误*“无法评估表达式，因为代码已优化或本机框架位于调用堆栈之上*”。

我还尝试采用另一种方式进行重定向。 [http://sharesilver.wordpress.com/2011/07/24/sharepoint-bugs-1-item-deleting-event-receiver/](http://sharesilver.wordpress.com/2011/07/24/sharepoint-bugs-1-item-deleting-event-receiver/)

但在这种情况下，也没有什么是行不通的。

我将不胜感激任何尝试提供帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T16:57:22.063

您需要添加一个构造函数来检索当前的 httpcontext，否则您的上下文将始终为空。

请参阅以下示例：[http ://social.technet.microsoft.com/Forums/en-US/sharepoint2010programming/thread/8cfcb299-9a55-4139-86ec-0b53b2922a54/](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010programming/thread/8cfcb299-9a55-4139-86ec-0b53b2922a54/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:13:02.590

嗨，你可以试试这个从事件接收器重定向到你的自定义页面

```
 properties.Status = SPEventReceiverStatus.CancelWithRedirectUrl;
    properties.RedirectUrl = "/_layouts/EventReceiver/CustomError.aspx"; 
```

有关更多详细信息，请查看此网址

[http://www.c-sharpcorner.com/uploadfile/anavijai/how-to-redirect-to-a-custom-page-for-event-receiver-in-sharepoint-2010/](http://www.c-sharpcorner.com/uploadfile/anavijai/how-to-redirect-to-a-custom-page-for-event-receiver-in-sharepoint-2010/)

让我知道是否工作。谢谢

# sql - 如何编写这个 SQL 子查询？

> ID：10461209
> 
> 赞同：2
> 
> 时间：2012-05-05T11:04:31.957
> 
> 标签：sql, subquery

我有这个运行完美的查询

从这个查询中，我选择了距离我所在位置 3 公里的所有餐厅，这是我的第一张桌子。

```
SELECT foodjoint_id,foodjoint_name,open_hours,cont_no,address_line,city ( 3959 * acos( cos( radians('".$userLatitude."') ) * cos( radians( foodjoint_latitude) ) * cos( radians( foodjoint_longitude) - radians('".$userLongitude."') ) + sin( radians('".$userLatitude."') ) * sin( radians( foodjoint_latitude) ) ) ) AS distance
FROM provider_food_joints
HAVING distance < '3' ORDER BY distance LIMIT 0 , 20 
```

但我需要从这 3 公里内的那些食品联合中选择 AVG 等级。

查询也运行良好：

```
select AVG(customer_ratings) from customer_review where foodjoint_id=".$foodjoint_id 
```

但我需要添加这两个查询，通过它我可以选择所有这些食品联合及其评级 AVG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:14:55.513

只需放置子查询，您就会得到结果：

```
`SELECT foodjoint_id,foodjoint_name,open_hours,cont_no,address_line,city ( 3959 * acos( cos( radians('".$userLatitude."') ) * cos( radians( foodjoint_latitude) ) * cos( radians( foodjoint_longitude) - radians('".$userLongitude."') ) + sin( radians('".$userLatitude."') ) * sin( radians( foodjoint_latitude) ) ) ) AS distance,

(select AVG(customer_ratings) from customer_review where customer_review.foodjoint_id=provider_food_joints.foodjoint_id) as Customer_Reviews

 FROM provider_food_joints 

HAVING distance < '3' ORDER BY distance LIMIT 0 , 20` 
```

# dart - 在 Dart 中读取文件

> ID：10461211
> 
> 赞同：2
> 
> 时间：2012-05-05T11:04:51.297
> 
> 标签：dart, dart-html, dart-io

我正在尝试在 Dartium 浏览器上使用 Dart 从机器读取文件（为此目的在我的桌面上制作了一个简单的 .txt 文件）。

我有一个输入字段，向它添加了一个侦听器，它的外观如下：

```
 void _onFileSelect(event) {
    dom.File file = _fileInput.files.item(0);

    dom.FileReader reader = new dom.FileReader();
    //reader.readAsBinaryString(file);

    reader.addEventListener('load', (event) {
      print(reader.result); // This is the line I am having the problem with.
    });

    reader.readAsText(file);
  } 
```

当我选择文件时，我收到错误：

> 堆栈跟踪：0。功能：'Object.noSuchMethod' url：'bootstrap' line:717 col:3

在我使用内联注释标记的行上。

我还设置了一个脚本来执行带有所需标志的 Dartium：

```
#!/bin/sh
cd /opt/DartEditor/dart-sdk/chromium
./chrome.exe --allow-file-access-from-files $@ 
```

任何人都可以提供任何可能出现问题的提示吗？

PS 我正在使用 Ubuntu Precise x64。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:17:46.733

抱歉，你不能在 Dartium 中使用 dart:io 库。这些库仅适用于命令行上的 Dart VM。

您可能希望使用 XMLHttpRequest 从 HTTP 服务器读取文件。

# git - 为什么使用 git push gerrit HEAD:refs/for/master 而不是 git push origin master

> ID：10461214
> 
> 赞同：162
> 
> 时间：2012-05-05T11:05:05.380
> 
> 标签：git, gerrit

我刚开始使用gerrit，我想知道为什么我们需要做`git push gerrit HEAD:refs/for/master`而不是做`git push origin master`

如果我这样做，`git push origin master`我会收到错误消息`! [remote rejected] master -> master (prohibited by Gerrit)`

* * *

## 回答 #1

> 赞同：274
> 
> 时间：2012-05-05T12:05:08.260

Gerrit 的文档，特别是[“推送更改”](https://gerrit-review.googlesource.com/Documentation/user-upload.html)部分，解释了您推送到“`refs/for/'branch'`使用任何 Git 客户端工具的神奇引用”。

下图取自[Intro to Gerrit](https://gerrit-review.googlesource.com/Documentation/user-upload.html)。当你推送到 Gerrit 时，你会这样做`git push gerrit HEAD:refs/for/<BRANCH>`。这会将您的更改推送到*暂存区域*（在图中，“待更改”）。Gerrit 实际上并没有一个名为`<BRANCH>`;的分支。它对 git 客户端说谎。

在内部，Gerrit 有自己的 Git 和 SSH 堆栈实现。这允许它提供“神奇的”`refs/for/<BRANCH>`参考。

> 当接收到在这些命名空间之一中创建 ref 的推送请求时，Gerrit 会执行自己的逻辑来更新数据库，然后就操作结果向客户端撒谎。成功的结果会使客户相信 Gerrit 创建了 ref，但实际上 Gerrit 根本没有创建 ref。[[链接 - Gerrit，“坚韧不拔的细节”](https://gerrit-review.googlesource.com/Documentation/user-upload.html) ]。

![Gerrit 工作流程](../Images/376e2378010ab5bc6288f85412a8c02f.png)

补丁成功后（即补丁已经推送到Gerrit，【放入“Pending Changes”暂存区]，经过审核，审核通过），Gerrit将变更从“Pending Changes”推送到“ Authoritative Repository”，根据你推送到`refs/for/<BRANCH>`. 这样，可以直接从`Authoritative Repository`.

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2015-04-12T03:10:57.013

为了避免必须完全指定 git push 命令，您也可以修改 git 配置文件：

```
[remote "gerrit"]
    url = https://your.gerrit.repo:44444/repo
    fetch = +refs/heads/master:refs/remotes/origin/master
    push = refs/heads/master:refs/for/master 
```

现在您可以简单地：

```
git fetch gerrit
git push gerrit 
```

这是根据[Gerrit的说法](https://gerrit-documentation.storage.googleapis.com/Documentation/2.12.2/user-upload.html)

# android - 如何从网络将数据加载到android

> ID：10461221
> 
> 赞同：1
> 
> 时间：2012-05-05T11:06:14.823
> 
> 标签：android, eclipse, parsing, sqlite

我最近开始了 Android 开发，我正在构建随机项目，以便了解更多信息。我正在做的一个项目是用户输入电影的名称，然后应用程序从网络加载一些关于电影的数据（例如评级、导演、演员等）。我正在考虑使用 IMDb 来获取电影的详细信息。但我对如何从网页获取特定数据并将其加载到应用程序中感到困惑。我研究过 SQLiteDatabases、JSON Parsing 以及 SAX Parsing，但仍然不清楚如何从 IMDb 网站获取数据。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:14:45.220

你需要一个 Http 客户端。

这是一个快速而肮脏的实现： [http ://www.remwebdevelopment.com/dev/a20/Android-A-Quick-and-Dirty-Http-Client.html](http://www.remwebdevelopment.com/dev/a20/Android-A-Quick-and-Dirty-Http-Client.html)

您需要类 HttpRequest 和 HttpResponse [http://developer.android.com/reference/org/apache/http/HttpResponse.html](http://developer.android.com/reference/org/apache/http/HttpResponse.html) http://developer.android.com/reference/org/apache/http/HttpRequest.html

# javascript - 正则表达式否定关闭/打开标签

> ID：10461229
> 
> 赞同：1
> 
> 时间：2012-05-05T11:06:46.597
> 
> 标签：javascript, regex

找到了很多相关的链接，但在我想要的方面却一无所获。我想要一个正则表达式来匹配一个否定的打开和关闭标签。以这个字符串为例：

```
<p>This <em>is</em> <span>a</span> <b>sentence</b>.</p> 
```

我使用正则表达式来匹配`<em>`，`<b>`而离开`<p>`和`<span>`独自一人。我使用以下正则表达式执行此操作：

```
<(?!p|span)[^>]*> 
```

问题是，上面将匹配`</p>`and `</span>`。我也想留下那些结束标签。我试过了：

```
<(/)?(?!p|span)[^>]*> 
```

以及它的不同组合，但我没有尝试过任何工作。希望我能得到一些帮助。如何在*不*执行以下操作的情况下设置正则表达式来匹配这些：（`<(?!p|span)[^>]*>(.*?)</(?!p|span)[^>]*>`看起来很糟糕，可能需要更多资源）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:18:22.573

**试试这个：**

```
(?:<(em|b)[^<>]*?>)([^<>]+)(?=</\1>) 
```

**解释：**

```
<!--
(?:<(em|b)[^<>]*?>)([^<>]+)(?=</\1>)

Options: case insensitive; ^ and $ match at line breaks

Match the regular expression below «(?:<(em|b)[^<>]*?>)»
   Match the character “&lt;” literally «<»
   Match the regular expression below and capture its match into backreference number 1 «(em|b)»
      Match either the regular expression below (attempting the next alternative only if this one fails) «em»
         Match the characters “em” literally «em»
      Or match regular expression number 2 below (the entire group fails if this one fails to match) «b»
         Match the character “b” literally «b»
   Match a single character NOT present in the list “&lt;>” «[^<>]*?»
      Between zero and unlimited times, as few times as possible, expanding as needed (lazy) «*?»
   Match the character “&gt;” literally «>»
Match the regular expression below and capture its match into backreference number 2 «([^<>]+)»
   Match a single character NOT present in the list “&lt;>” «[^<>]+»
      Between one and unlimited times, as many times as possible, giving back as needed (greedy) «+»
Assert that the regex below can be matched, starting at this position (positive lookahead) «(?=</\1>)»
   Match the characters “&lt;/” literally «</»
   Match the same text as most recently matched by capturing group number 1 «\1»
   Match the character “&gt;” literally «>»
--> 
```

* * *

*此模式用于将整个标记数据与打开和关闭对匹配。*

但如果您只想删除标签，可以使用：

```
</?(em|b)[^<>]*?> 
```

* * *

# objective-c - 如何在 iPad 上检测“中途”四指捏合的结束

> ID：10461231
> 
> 赞同：1
> 
> 时间：2012-05-05T11:07:01.317
> 
> 标签：objective-c, gestures, touches

我被困在这个问题上：当我使用四指捏合（如主页按钮）关闭应用程序时，但只“中途”执行（应用程序窗口变小等）然后释放它使其不会关闭但保持打开状态。似乎`touchesBegan`我已经实现了该方法被调用，但该`touchesEnded`方法在任何时候都没有被调用。也`viewDidAppear`等不会被调用。问题是`userInteraction`设置为`NO`in `touchesBegan`，因此应用程序被卡住了，因为`touchesEnded`没有被调用。

有没有其他方法可以检测“中途”捏的结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:11:55.350

这是因为触摸被取消。如果您订阅，`touchesEnded:withEvent:`您也应该始终订阅`touchesCancelled:withEvent:`，因为触摸可能会被取消的原因还有很多，您应该适当地处理这些原因。

# java - Eclipse Helios: Java EE Perspective: How to have jars added to build path under one hood like referenced library

> ID：10461233
> 
> 赞同：0
> 
> 时间：2012-05-05T11:07:28.977
> 
> 标签：java, eclipse

我有一个 GWT+Spring+Hibernate 项目，所以我在 WEB-INF/lib 目录中有几个 jar。所有这些 jar 都被添加到构建路径中。我在构建路径中看到不方便的 jar 视图，例如

```
MY_Project
|->src
|->resource
|->JRE System Library[jdk1.6]
|->ant.jar   //from here on jars in build path
|->asm-common.jar
|->asm-util.jar
|->c3p0.jar
|->commons-collections.jar
 .
 .
 . 
```

这个列表还有 40 多个罐子，以覆盖全屏长度。因此，我无法轻松导航到其他依赖项目。

我想在这里得到类似于我切换到弹簧视角时得到的东西：

```
--------------------------------------------------------------------------------
MY_Project
|->src
|->resource
|->JRE System Library[jdk1.6]
|->Referenced Libraries //<-- here goes all that 40 jars under on hood
|->war
--------------------------------------------------------------------------------- 
```

所以有什么建议。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:37:01.483

1.  转到`Window`-> `Preferences`。
2.  那里选择`Java`-> `Build Path`-> `User Libraries`。
3.  输入库的名称。
4.  添加所有相关的罐子。

从那时起，可以通过以下方式为任何特定项目添加库：`right click on your project`-> `Build Path`-> `Configure`。选择`Libraries`选项卡 -> `Add Library`-> `User Library`。

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:45:55.263

试试这个：

1.  切换到包资源管理器视图（而不是项目资源管理器视图）
2.  如果在 Package Explorer 视图中没有显示“Referenced Libraries”，请单击视图中的向下三角形并确保勾选“Show 'Referenced Libraries' Node”。

# php - 使用 jquery validate 插件来：必须选择一些选择框选项值

> ID：10461234
> 
> 赞同：1
> 
> 时间：2012-05-05T11:07:42.087
> 
> 标签：php, jquery, jquery-validate

首先，我有一个必须选择所有选项值的数组，例如

```
$require=array('volvo','saab'); 
```

然后 ，

> 我有 x 个选择框，x 是一个小于或等于选项值数量的数字

然后我有选择框，例如

```
<select name ="car" id="0">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>

<select name ="car" id="1">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select>

<select name ="car" id="2">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
</select> 
```

在这种情况下，我需要检查：

1）没有重复的选择值

2）数组中的值必须选择一个且只有一个。

我可以弄清楚在选择框中检查 unqiue 值，但是第二个条件呢？

谢谢

```
Using the above case as an example

id = 0 , value = volvo
id = 1 , value = Mercedes
id = 2 , value = Audi

Not valid

id = 0 , value = saab
id = 1 , value = Audi
id = 2 , value = volvo

valid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:21:39.487

第一个建议，请不要为多个 HTML 元素使用相同的名称，因为它是无效的 html。如果您只是为了选择器的目的而这样做，请改用类属性。

我继续采用“分而治之”的方法，它没有得到很好的优化，但它确实有效。

好吧，我尝试将您的解决方案分为两个步骤：

第 1 步：检查唯一性

```
//val is the array of values from each select box
function checkUnique(val){
    var cnt = val.length;
    for(i = 0; i < cnt; i++){
        for(j = i+1; j < cnt; j++){
            if(val[i] == val[j]){
                return false;
            }
        }
    }
    return true;
} 
```

第 2 步：检查验证所需的值

```
// array of required values:
var required = ['saab', 'volvo'];
function validate(){
    var val = [];
    $("select[name=car]").each(function(){
        val.push(this.value);
    });
    if(checkUnique(val)){
        var cnt = required.length;
        var cnt2 = val.length;
        for(k = 0; k < cnt; k++){
            var flag = false;
            for(l = 0; l < cnt2; l++){
                if(required[k] == val[l]){
                    flag = true;
                }
            }
            if(flag){
                return true;
            }
        }
    }else{
        return false;
    }
} 
```

我在文档加载和选择框更改事件的所有事件上调用验证函数：

```
function showMsg(){
    var msg = (validate())?'OK':'NOT OK';
    // added html DIV tag with id="result" to show the status on change events
    $("#result").html(msg);
}
$(document).ready(function(){
    showMsg();
});
$("select[name=car]").change(function () {
        showMsg();
}); 
```

您可以在 jsfiddle 上查看完整示例：http: [//jsfiddle.net/LCxJw/](http://jsfiddle.net/LCxJw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:49:06.347

这是jQuery的方式：

```
$('select[name=car]').change(function () {
    var id = $(this).attr('id');
    var selected = $(this).val();
    console.log( id + ' ' + selected );
    $('select[name=car] option').each(function () {
        $(this).removeAttr('selected');
    });
    $('#'+id).find('option[value='+selected+']').attr('selected', 'selected');
}); 
```

我建议您从第一个选项开始您的选择，例如：

```
<option>Select</option> 
```

# jqgrid - 网格中的实时数据 - 更好的方法

> ID：10461237
> 
> 赞同：18
> 
> 时间：2012-05-05T11:08:05.700
> 
> 标签：jqgrid

在网格中显示实时数据（证券交易所、天气……）的更好方法是什么？
我使用这种方法：

```
setInterval(function(){
      jQuery("#list1").trigger('reloadGrid');
}, 5000); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-05T12:45:13.703

我觉得你的问题很有趣。我认为这个问题对于许多其他用户来说可能很有趣。所以我+1。

在常见的独立于浏览器的情况下，使用`setInterval`接缝是最好的方法。应该将结果保存`setInterval`在一个变量中以便能够使用`clearInterval`它来停止它。

另一个小的改进是使用`[{current:true}]`（有关详细信息，请参阅[答案](https://stackoverflow.com/a/3808014/315935)）作为 的第二个参数`trigger`：

```
var $grid = jQuery("#list1"), timer;

timer = setInterval(function () {
    $grid.trigger('reloadGrid', [{current: true}]);
}, 5000); 
```

它将在重新加载网格期间保存选择。

许多新的网络浏览器现在支持[WebSocket](http://en.wikipedia.org/wiki/WebSocket)。因此，如果网络浏览器支持它，最好使用这种方式。如果数据没有在服务器上更改并防止服务器永久池化，则可以跳过不必要的网格重新加载。

在我看来，一种更常见的方式也很有趣。如果可以使用网格数据最后更改的某种时间戳，则可以验证数据是否已更改。为此，可以在服务器上使用[ETag](http://en.wikipedia.org/wiki/HTTP_ETag)或一些通用的附加方法。

当前填充 jqGrid 的[jQuery.ajax的](http://api.jquery.com/jQuery.ajax/)[成功](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L1778-1791)回调允许您使用实现回调来*修改*服务器响应，但它*不允许您*根据值停止 jqGrid 刷新（它将在当前的 jqGrid 代码中）。[对 jqGrid 代码行](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L1780)的小修改将允许您在服务器上的数据未更改的情况下停止 jqGrid 刷新。可以测试（在 jqGrid 的当前代码中）或测试（在当前 jqGrid 代码中）[304](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)。重要的是要使用该场景，您应该使用option 和 set和`beforeProcessing`**`jqXHR.satus``xhr.status``textStatus``st``"notmodified"``jqXHR.satus``xhr.status``prmNames: { nd:null }``ETag``Cache-Control: private, max-age=0`（有关更多信息，请参见[此处](https://stackoverflow.com/a/9269567/315935)、[此处](https://stackoverflow.com/a/3885956/315935)和[此处](https://stackoverflow.com/a/2960874/315935)）。**

 ****更新**：我尝试根据我最后的建议创建演示项目，并发现它并不像我上面描述的那么容易。尽管如此，我还是让它工作了。困难在于无法从 jQuery.ajax 内部的服务器响应中看到 304 代码。原因是[XMLHttpRequest 规范中的以下位置](http://www.w3.org/TR/XMLHttpRequest/#the-send-method)

> 对于作为用户代理生成的条件请求的结果的**304 Not Modified**响应，用户代理必须像服务器给出具有适当内容的**200 OK响应一样行事。**用户代理必须允许作者请求标头覆盖自动缓存验证（例如**If-None-Match**或**If-Modified-Since**），在这种情况下， 必须传递**304 Not Modified响应。**

因此，人们在处理程序内部看到**200 OK**状态，而不是从服务器响应中看到**304 Not Modified 。**似乎只从缓存中获取完整响应，包括所有 HTTP 标头。所以我决定改变对缓存数据的分析，只是从最后一个 HTTP 响应中保存为新的 jqGrid 参数，并用保存的数据测试新响应的。`success``$.ajax`**`XMLHttpRequest``ETag``ETag`**

 **我看到你使用 PHP（我不使用 :-()。不过我可以阅读和理解 PHP 代码。我希望你能以同样的方式阅读 C# 代码并理解主要思想。所以你将能够在 PHP 中实现相同的功能。

现在我描述我做了什么。首先，我修改了使用回调的 jqGrid 源代码[行](https://github.com/tonytomov/jqGrid/blob/v4.3.2/js/grid.base.js#L1779-1781)`beforeProcessing`

```
if ($.isFunction(ts.p.beforeProcessing)) {
    ts.p.beforeProcessing.call(ts, data, st, xhr);
} 
```

到

```
if ($.isFunction(ts.p.beforeProcessing)) {
    if (ts.p.beforeProcessing.call(ts, data, st, xhr) === false) {
        endReq();
        return;
    }
} 
```

它将允许从返回 false`beforeProcessing`跳过数据刷新 - 跳过数据处理。我在演示中使用的实现`beforeProcessing`基于用法`ETag`：

```
beforeProcessing: function (data, status, jqXHR) {
    var currentETag = jqXHR.getResponseHeader("ETag"), $this = $(this),
        eTagOfGridData = $this.jqGrid('getGridParam', "eTagOfGridData");
    if (currentETag === eTagOfGridData) {
        $("#isProcessed").text("Processing skipped!!!");
        return false;
    }
    $this.jqGrid('setGridParam', { eTagOfGridData: currentETag });
    $("#isProcessed").text("Processed");
} 
```

div 中的线条`$("#isProcessed").text("Processed");`或线条`$("#isProcessed").text("Processing skipped!!!");`集`"Processed"`或`"Processing skipped!!!"`文本，我用来直观地指示来自服务器的数据用于填充网格。

在演示中*，我显示了两个具有相同数据的网格*。我用来编辑数据的第一个网格。第二个网格每秒从服务器中提取数据。如果服务器上的数据未更改，则 HTTP 流量如下所示

HTTP 请求：

```
GET http://localhost:34336/Home/DynamicGridData?search=false&rows=10&page=1&sidx=Id&sord=desc&filters= HTTP/1.1
X-Requested-With: XMLHttpRequest
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://localhost:34336/
Accept-Language: de-DE
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; LEN2)
Host: localhost:34336
If-None-Match: D5k+rkf3T7SDQl8b4/Y1aQ==
Connection: Keep-Alive 
```

HTTP 响应：

```
HTTP/1.1 304 Not Modified
Server: ASP.NET Development Server/10.0.0.0
Date: Sun, 06 May 2012 19:44:36 GMT
X-AspNet-Version: 4.0.30319
X-AspNetMvc-Version: 2.0
Cache-Control: private, max-age=0
ETag: D5k+rkf3T7SDQl8b4/Y1aQ==
Connection: Close 
```

因此，如果数据未更改，则不会**从服务器传输任何数据。**如果数据发生更改，HTTP 标头将开始`HTTP/1.1 200 OK`并包含`ETag`新修改的数据以及数据页本身。

可以使用导航器的“刷新”按钮手动刷新网格数据，也可以使用每秒执行的“开始自动刷新”按钮刷新网格数据`$grid1.trigger('reloadGrid', [{ current: true}]);`。页面看起来像

![在此处输入图像描述](../Images/c64ddac0fc0c6e0464db1ab321af2fb2.png)

我用颜色框在页面底部标记了最重要的部分。如果有一个`loadui: "disable"`选项，那么在拉动服务器期间根本看不到网格上的任何变化。如果有人评论了一个选项，即会在很短的时间内看到“正在加载...” div，但**没有网格包含会闪烁**。

启动“自动刷新”后，主要会看到如下图

![在此处输入图像描述](../Images/d38948c0a4f7244a56446d98288d425a.png)

如果要更改第一个网格中的某些行，则第二个网格将在一秒钟内更改，并且将看到`"Processed"`文本，该文本将在一秒钟内更改为`"Processing skipped!!!"`文本。

服务端对应的代码（我用的是ASP.NET MVC）大多如下

```
public JsonResult DynamicGridData(string sidx, string sord, int page, int rows,
                                  bool search, string filters)
{
    Response.Cache.SetCacheability (HttpCacheability.ServerAndPrivate);
    Response.Cache.SetMaxAge (new TimeSpan (0));

    var serializer = new JavaScriptSerializer();
    ... - do all the work and fill object var result with the data

    // calculate MD5 from the returned data and use it as ETag
    var str = serializer.Serialize (result);
    byte[] inputBytes = Encoding.ASCII.GetBytes(str);
    byte[] hash = MD5.Create().ComputeHash(inputBytes);
    string newETag = Convert.ToBase64String (hash);
    Response.Cache.SetETag (newETag);
    // compare ETag of the data which already has the client with ETag of response
    string incomingEtag = Request.Headers["If-None-Match"];
    if (String.Compare (incomingEtag, newETag, StringComparison.Ordinal) == 0) {
        // we don't need return the data which the client already have
        Response.SuppressContent = true;
        Response.StatusCode = (int)HttpStatusCode.NotModified;
        return null;
    }

    return Json (result, JsonRequestBehavior.AllowGet);
} 
```

我希望代码的主要思想对于不仅使用 ASP.NET MVC 的人来说也很清楚。

**[您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/jqGridAutorefresh.zip)下载该项目。**

**更新**：我发布[了功能请求](http://www.trirand.com/blog/?page_id=393/feature-request/allow-beforeprocessing-to-return-false-for-skipping-processing-of-the-server-response/#p26517)以允许通过返回值`beforeProcessing`来中断服务器响应的处理。`false`相应的更改已经包含在主 jqGrid 代码中（参见[此处）。](https://github.com/tonytomov/jqGrid/commit/1d26922bddabff65f17f0807511a3adb6ca85b7b)所以 jqGrid 的下一个版本将包含它。****

# java - h:inputText -Field 是可见的吗？

> ID：10461238
> 
> 赞同：0
> 
> 时间：2012-05-05T11:08:21.627
> 
> 标签：java, jsf, netbeans, jsf-2

我正在使用 netbeans 开发一个 jsf Web 应用程序。

```
 <fieldset>
        <div>
           <h:inputText id="firstname" value="#{loginCtrl.customer.name}" label="Name">
                  <f:validateLength minimum="3" maximum="8"/>
           </h:inputText>
        <div>
... 
```

我编写了该代码，但是当我将它部署到 apache tomcat 服务器时，没有显示任何字段？为什么？h:input 没有可见性元素？

提前问候和谢谢

PS.：我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>faces/register.jsf</welcome-file>
    </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:37:57.377

确保您在浏览器地址栏中看到的请求 URL`FacesServlet`与`web.xml`. 您可以通过在浏览器中右键单击页面并查看生成的 HTML 源来验证这一点。如果`<h:inputText>`仍然存在，则意味着`FacesServlet`根本没有调用 。

If you open the page by `/page.xhtml`, then the `FacesServlet` is apparently not mapped on `*.xhtml`, but on `*.jsf` or something else. You'd need to change the URL in browser's address bar accordingly to match exactly the specified URL pattern, or to fix the mapping accordingly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:21:40.313

`h:input has no visibility element?`

是的，该`h:inputText`元素具有`rendered`属性：

```
<h:inputText id="firstname" rendered="true" value="#{loginCtrl.customer.name}" 
    label="Name">
      <f:validateLength minimum="3" maximum="8"/>
</h:inputText> 
```

但是默认值是正确的，所以问题不在于...

# magento-1.6 - magento 1.6.2 - 购物篮价格规则

> ID：10461240
> 
> 赞同：0
> 
> 时间：2012-05-05T11:08:36.537
> 
> 标签：magento-1.6

重新 magento 购物篮价格规则 - 我可以在 1.6 商店设置一个有效的 - 所以我知道“方法”是正确的，但是在 1.6.2 商店，优惠券不起作用

我收到一条消息“优惠券代码“NOWSAVE20”无效。这可能是因为它已过期或您未达到此优惠券的最低消费额。”

该代码正在应用于 SKU - 在操作选项卡中 - 因为它需要仅应用于该 sku 而不是整个购物篮内容

正如我所说 - 这是在其他商店工作，所以它不是方法。

我注意到 1.7 的发行说明提到了一些购物车价格规则修复，但有没有人有修复的经验，或者如何跟踪这个问题？

感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:31:46.480

凭证代码区分大小写 - 尝试 nowsave20 而不是 NOWSAVE20。

# c++ - 我的 Visual Studio 项目需要的 dll 文件列表

> ID：10461242
> 
> 赞同：3
> 
> 时间：2012-05-05T11:08:55.280
> 
> 标签：c++, visual-studio-2010, dll

有没有办法在 Visual Studio 2010 中查看我的可执行文件需要哪些 dll 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:11:12.507

不，但您可以使用 DependencyWalker (depends.exe)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T11:11:19.647

您可以使用**[Dependency Walker](http://www.dependencywalker.com/)**实用程序查看 Windows 应用程序需要（或依赖）的所有 DLL。

您可以从链接的网站下载 32 位 (x86) 或 64 位 (x64) 版本的应用程序。

但是，一般来说，您将依赖于一堆系统 DLL，**这些是 Windows 附带的东西，您不应该自己重新分发**。只要它们出现在列表中，请随意忽略它们。用户将拥有它们（如果她拥有适当版本的 Windows），或者不会拥有它们（如果他们拥有未提供这些库中包含的功能的早期版本的 Windows），在这种情况下，您的应用程序将不跑。您需要编写回退代码来处理这些情况。尝试重新分发系统 DLL*将不起作用*。您不能仅通过将 DLL 粘贴在 Windows 文件夹中来为早期版本的 Windows 添加功能。

如果您使用 Microsoft 的编译器之一进行编译，例如与 Visual Studio 捆绑的编译器，您还将依赖 CRT 库。您可以在 MSDN 上下载适用于 CRT 版本的可再发行安装程序。

我强烈建议您创建一个安装程序（安装程序），您可以使用它来部署您的应用程序。这*大大*减轻了最终用户的安装痛苦，也使您作为程序员的工作更轻松。

# oracle - ORACLE - 已授予创建过程但无法创建过程

> ID：10461245
> 
> 赞同：2
> 
> 时间：2012-05-05T11:09:38.490
> 
> 标签：oracle, stored-procedures, privileges, ora-01031

数据库中有一个被授予 CREATE PROCEDURE 特权的用户。但是当该用户试图创建一个简单的过程时，会抛出以下错误： ORA-01031: 权限不足 01031\. 00000 - “权限不足” *原因：试图在没有适当权限的情况下更改当前用户名或密码。如果尝试在没有必要操作系统权限的情况下安装数据库，也会出现此错误。

这是该过程的 DDL：

```
 CREATE OR REPLACE PROCEDURE TOTALBASE.ROUNDUP 
          (CUR OUT SYS_REFCURSOR  ) 
 AS 
 BEGIN
  OPEN CUR FOR
   SELECT * FROM TOTALBASE.ABONENT; 
 END ROUNDUP; 
```

我还应该考虑做些什么来完成这项工作？我怀疑即使授予特权，任何不在管理员或 ORA_DBA 组中的人也无法创建过程。但我不确定。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T12:11:44.143

要在您自己的模式以外的模式中创建过程，您需要`CREATE ANY PROCEDURE`特权。

作为一般规则，不应轻易授予此特权，因为它很容易被用来规避数据库安全性。

希望有帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T17:01:30.650

在下面的几条评论之后，我再试一次。

不要在另一个模式中创建过程；只让每个用户在自己的模式中创建对象。

这样，您就没有理由`GRANT`访问其他模式对象了。然后，`TOTALBASE`用户可以`EXECUTE`将该过程的特权授予当前用户。

当前用户需要从表中获取一些数据，当他具有函数或过程`TOTALUSER`的权限时，不需要创建或访问其他对象。`EXECUTE`

Looking from another angle, this way it's also easier to maintain: `TOTALUSER` provides sort of an API in how it exposes data to the current user, hiding implementation details which can change in the future, being transparent to current user.

# gwt - ExtGwt 动态改变 ContentPanel 的大小

> ID：10461247
> 
> 赞同：1
> 
> 时间：2012-05-05T11:09:40.613
> 
> 标签：gwt, layout, alignment, gxt

在 ExtGwt 中创建一个小应用程序时，我遇到了这样的问题：

有什么方法可以将 ContentPanel 的内容水平（并且仅水平）居中？

我知道一种解决方案是使用：

```
ContentPanel panel = new ContentPanel();
panel.setLayout(new CenterLayout());
//but here is the problem, I MUST set the size of panel
panel.setSize(400, 200); 
```

但是，我需要这个面板具有动态计算的高度，因为它在不同的地方有不同的内容。

另一件事是使用 UIBinder，但这也不是一个好主意。

任何人都知道如何实现这样的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:30:43.963

用 .布局`ContentPanel`其容器内部`FitLayout`。这样，`ContentPanel`' 的大小总是被管理的，你不必指定它的尺寸。

```
public class ContentPanelContainer extends LayoutContainer {

    @Override
    protected void onRender(Element parent, int index) {
        super.onRender(parent, index);

        setLayout(new FitLayout());

        ContentPanel panel = new ContentPanel();
        panel.setLayout(new CenterLayout());

        add(panel);
    }    
} 
```

# asp.net - 静态类的内存管理

> ID：10461249
> 
> 赞同：0
> 
> 时间：2012-05-05T11:10:00.797
> 
> 标签：asp.net, class, memory, static

在asp中，如何为静态类和方法管理内存？

例如，我有一个在用户会话中使用的公共方法。此方法及其类是静态的。当我首先使用这个类和方法时，它的构造函数会触发。

我想知道这个类在内存中保留多长时间：

1.  结束任何会话
2.  结束最后一个会话
3.  结束申请

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:28:48.743

> 我想知道这个类在内存中保留多长时间：

直到重新启动 IIS。（应用域重启）

只要应用程序正在调整，asp.net 中的静态类/变量就会一直存在。

删除它们的唯一方法是重新启动 II。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:41:44.780

静态类在内存中，直到应用程序重新启动，这意味着重新启动网站正在使用的 IIS 应用程序池。

请注意，应用程序池的重新启动将重新启动所有正在使用该池的站点。

# java - JDOFatalUserException : Illegal argument (debug as google web application)

> ID：10461251
> 
> 赞同：0
> 
> 时间：2012-05-05T11:10:27.853
> 
> 标签：java, google-app-engine, jsp, jdo

我得到一个非法的论点，但我不知道为什么。这是我的代码的一部分（modifynews.jsp）：

```
<%  
String newsid=request.getParameter("newsid");

String query = "select from " + news.class.getName()+" where id =="+newsid;
PersistenceManager pm = pmf.get().getPersistenceManager();
List<news> news1 = (List<news>) pm.newQuery(query).execute();
news newsItem = news1.get(0); //to get the first item.
%>

<div><label for="title">Title</label>
<input type="text" name="title" id="title" value="<%=newsItem.getTitle()%>"/>
<br>

  <br>
  Guest:
  <textarea name="content" id="editor1" rows="5" cols="60">
  <%=newsItem.getContent()%></textarea>
  <br>

<input type="submit" value="Update News"/>
<input type="hidden" name="newsid" id="newsid" value="<%=newsItem.getId()%>"/>
</div> 
```

* * *

## 这就是我在调试为 Web 应用程序时所看到的。

```
HTTP ERROR 500

Problem accessing /newsmodify.jsp. Reason:

    Illegal argument
Caused by:

javax.jdo.JDOFatalUserException: Illegal argument
    at org.datanucleus.jdo.NucleusJDOHelper.getJDOExceptionForNucleusException(NucleusJDOHelper.java:344)
    at org.datanucleus.store.appengine.query.QueryExceptionWrappers$2.get(QueryExceptionWrappers.java:90)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator.hasNext(RuntimeExceptionWrappingIterator.java:105)
    at org.datanucleus.store.appengine.query.LazyResult.get(LazyResult.java:76)
    at org.datanucleus.store.appengine.query.StreamingQueryResult.get(StreamingQueryResult.java:107)
    at org.apache.jsp.newsmodify_jsp._jspService(newsmodify_jsp.java:113)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
NestedThrowablesStackTrace:
java.lang.IllegalArgumentException: __key__ filter value must be a Key
    at com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:36)
    at com.google.appengine.api.datastore.DatastoreApiHelper$1.convertException(DatastoreApiHelper.java:76)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:106)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java:72)
    at com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:33)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.peekQueryResultAndIfFirstRecordIndexList(QueryResultsSourceImpl.java:172)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.loadMoreEntities(QueryResultsSourceImpl.java:108)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.loadMoreEntities(QueryResultsSourceImpl.java:95)
    at com.google.appengine.api.datastore.QueryResultIteratorImpl.ensureLoaded(QueryResultIteratorImpl.java:161)
    at com.google.appengine.api.datastore.QueryResultIteratorImpl.hasNext(QueryResultIteratorImpl.java:65)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator$1.get(RuntimeExceptionWrappingIterator.java:50)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator$1.get(RuntimeExceptionWrappingIterator.java:46)
    at org.datanucleus.store.appengine.query.QueryExceptionWrappers$1.get(QueryExceptionWrappers.java:51)
    at org.datanucleus.store.appengine.query.QueryExceptionWrappers$2.get(QueryExceptionWrappers.java:86)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator.hasNext(RuntimeExceptionWrappingIterator.java:105)
    at org.datanucleus.store.appengine.query.LazyResult.get(LazyResult.java:76)
    at org.datanucleus.store.appengine.query.StreamingQueryResult.get(StreamingQueryResult.java:107)
    at org.apache.jsp.newsmodify_jsp._jspService(newsmodify_jsp.java:113)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Caused by:

java.lang.IllegalArgumentException: __key__ filter value must be a Key
    at com.google.appengine.api.datastore.DatastoreApiHelper.translateError(DatastoreApiHelper.java:36)
    at com.google.appengine.api.datastore.DatastoreApiHelper$1.convertException(DatastoreApiHelper.java:76)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:106)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java:72)
    at com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:33)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.peekQueryResultAndIfFirstRecordIndexList(QueryResultsSourceImpl.java:172)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.loadMoreEntities(QueryResultsSourceImpl.java:108)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.loadMoreEntities(QueryResultsSourceImpl.java:95)
    at com.google.appengine.api.datastore.QueryResultIteratorImpl.ensureLoaded(QueryResultIteratorImpl.java:161)
    at com.google.appengine.api.datastore.QueryResultIteratorImpl.hasNext(QueryResultIteratorImpl.java:65)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator$1.get(RuntimeExceptionWrappingIterator.java:50)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator$1.get(RuntimeExceptionWrappingIterator.java:46)
    at org.datanucleus.store.appengine.query.QueryExceptionWrappers$1.get(QueryExceptionWrappers.java:51)
    at org.datanucleus.store.appengine.query.QueryExceptionWrappers$2.get(QueryExceptionWrappers.java:86)
    at org.datanucleus.store.appengine.query.RuntimeExceptionWrappingIterator.hasNext(RuntimeExceptionWrappingIterator.java:105)
    at org.datanucleus.store.appengine.query.LazyResult.get(LazyResult.java:76)
    at org.datanucleus.store.appengine.query.StreamingQueryResult.get(StreamingQueryResult.java:107)
    at org.apache.jsp.newsmodify_jsp._jspService(newsmodify_jsp.java:113)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:97)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at com.google.appengine.tools.development.PrivilegedJspServlet.access$101(PrivilegedJspServlet.java:23)
    at com.google.appengine.tools.development.PrivilegedJspServlet$2.run(PrivilegedJspServlet.java:59)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.google.appengine.tools.development.PrivilegedJspServlet.service(PrivilegedJspServlet.java:57)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:35)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:60)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:122)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:78)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:369)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
Powered by Jetty:// 
```

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:12:30.343

news.class.getSimpleName() 并使用参数进行查询

```
Query q = pm.newQuery( clazz);
q.setFilter("id== idParam");
q.setOrdering("id");
q.declareParameters("String idParam");

q.execute(newsid); 
```

# c# - 试图以访问权限禁止的方式访问套接字。为什么？

> ID：10461257
> 
> 赞同：109
> 
> 时间：2012-05-05T11:11:25.213
> 
> 标签：c#, sockets, video, streaming

```
 private void StartReceivingData(string ipAddress, int iPort)
    {
        try
        {
            if (!_bContinueReciving)
            {
                //initializeMainSocket(ipAddress, iPort);
                _mSocket = new Socket(AddressFamily.InterNetwork, SocketType.Raw, ProtocolType.IP);//<------HERE IS RAISED THE EXCEPTION
                _mSocket.Bind(new IPEndPoint(IPAddress.Parse(ipAddress), iPort));
                //  _mSocket.Bind(new IPEndPoint(IPAddress.Loopback, iPort));
                _mSocket.SetSocketOption(SocketOptionLevel.IP, SocketOptionName.HeaderIncluded, true);
                _mSocket.IOControl(IOControlCode.ReceiveAll, new byte[4] { 1, 0, 0, 0 }, new byte[4] { 0, 0, 0, 0 });
                //var 1
                _mSocket.BeginReceive(_buffReceivedData, 0, _buffReceivedData.Length, SocketFlags.None,
                                     new AsyncCallback(OnReceive), null);
                initializeLocalSocket();
            }
            else
            {
                _bContinueReciving = false;
                _mSocket.Close();
            }
        }
        catch (Exception exception)
        {
            Debug.WriteLine(exception);
        }
    } 
```

我不明白为什么......它工作了，现在它没有。有人可以帮助我吗？我正在使用 vlc 进行流式传输，我不想接收数据包，做一些报告，然后在本地重新流式传输到播放器

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2021-05-07T22:13:51.147

我重新启动了此服务：`Host Network Service`在 Windows`Services`程序上。它奏效了。

您可以在 Windows 终端中运行这些命令，正如评论部分中提到的 @admin ：

```
net stop hns
net start hns 
```

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-05-05T12:46:46.853

套接字很可能由某个进程持有。用于`netstat -o`查找哪一个。

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2015-03-03T17:31:26.973

使用管理员权限重新加载 Visual Studio。Windows 套接字 (WinSock) 不允许您在没有本地管理员的情况下创建 SocketType.RAW 套接字。请记住，您的解决方案将需要提升的权限才能按预期运行！

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2015-11-22T19:41:29.520

好吧，我什至不明白这个问题的罪魁祸首。但就我而言，问题完全不同。我尝试运行`netstat -o`或`netstat -ab`，两者都表明当前没有任何应用程序正在侦听端口 62434，这是我的应用程序尝试侦听的端口。所以这对我来说真的很困惑。

我只是试着想想我做了什么，所以它停止了工作（它以前确实工作过）。然后我想到了我在以太网适配器上使用私有虚拟 LAN 进行的 Internet 共享（在 Windows 10 中使用 Hyper-v）。我只需要关闭共享，它就可以再次正常工作。

希望这可以帮助其他有同样问题的人。当然，如果有人可以解释这一点，请在您自己的答案中添加更多细节，或者作为对我的答案的一些评论。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2020-11-15T06:42:36.420

IIS 是我的主要罪犯。我的 IIS 正在运行，它会阻止任何新的套接字连接打开。通过运行命令“ `iisreset -stop`”停止 IIS 为我解决了这个问题

除此之外，如果您使用 docker，Docker 可能是导致此问题的原因。如果是这样，您必须通过执行以下命令重新启动**主机网络服务。**您可能需要提升访问权限才能执行此命令“ `net stop hns && net start hns`”

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-09-10T10:50:06.553

我在尝试绑定到端口时尝试使用 dotnet run 启动 dotnet Core 项目时遇到了这个问题。

问题是由在项目打开的情况下运行 Visual Studio 2017 实例引起的 - 我之前通过 VS 启动项目进行调试，它似乎一直在保留端口，即使调试已经完成并且应用程序似乎已关闭.

关闭 Visual Studio 实例并再次运行“dotnet run”即可解决问题。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-12-27T06:36:11.710

我遇到了类似的问题，但我通过对防火墙设置进行了一些更改来解决它。

您可以按照以下步骤

1.  转到“开始”->“控制面板”

2.  点击“Windows防火墙” [![在此处输入图像描述](../Images/8e3463af81d11c9a0ca2ba8aeac825a6.png)](https://i.stack.imgur.com/xsQGs.jpg)

3.  在 Windows 防火墙中，单击“允许程序或功能通过 Windows 防火墙” [![在此处输入图像描述](../Images/bb66c11f92a1852a237b4e20b967ef54.png)](https://i.stack.imgur.com/8l2rA.jpg)

4.  现在在允许程序中，单击“更改设置”按钮。单击更改设置按钮后，将启用“允许另一个程序...”按钮。 [![在此处输入图像描述](../Images/463a261555b8237bbe5588cd3251cd4e.png)](https://i.stack.imgur.com/7TQy6.jpg)

5.  当您单击“允许另一个程序...”按钮时，将出现一个新对话框。选择要获得套接字异常的程序或应用程序，然后单击“添加”按钮。

[![在此处输入图像描述](../Images/672387f5147523d3267275e5dfc1f8bc.png)](https://i.stack.imgur.com/HVGdp.jpg)

6.  单击确定，然后重新启动计算机。

7.  尝试使用管理权限运行您的应用程序（有一个例外）。

我希望这有帮助。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-05-09T15:29:24.253

这是 Windows 防火墙阻止端口（传出）时返回的错误。我们有一个严格的 Web 服务器，因此默认情况下会阻止传出端口。我所要做的就是创建一个规则以允许 wf.msc 中的 TCP 端口号。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-10-11T18:57:24.993

尝试连接到 Blob 存储时，我在 Azure 上的 Web 应用程序中遇到了这个问题。问题原来是我错过了为 blob 存储部署连接字符串，所以它仍然指向存储模拟器。客户端中必须有一些重试逻辑，因为我看到了大约 3 次尝试。这`/devstorageaccount1`是一个死的赠品。

[![在此处输入图像描述](../Images/1a5b6a5b24361d68c53a05a1da245124.png)](https://i.stack.imgur.com/ZqZjV.png)

通过在 Azure 中正确设置连接字符串来修复。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-05-29T07:36:42.890

我正在开发一个连接到 LAN 中的 MQTT 代理的 UWP 应用程序。我遇到了类似的错误。

```
MQTTnet.Exceptions.MqttCommunicationException: 'An attempt was made to access a socket in a way forbidden by its access permissions [::ffff:xxx.xxx.xxx.xxx]:1883'

ExtendedSocketException: An attempt was made to access a socket in a way forbidden by its access permissions [::ffff:xxx.xxx.xxx.xxx]:1883 
```

原来我忘了给应用程序正确的功能...... [![在此处输入图像描述](../Images/2e1ae7cae598d6db58fa7a30e0ebb130.png)](https://i.stack.imgur.com/y1Qz8.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-10-15T14:35:09.837

在命令窗口中运行`iisreset`为我修复了它。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-10-15T20:06:51.093

我刚刚遇到了一个类似的问题，来自一个 Xamarin Forms 应用程序，它通过 HttpClient 对 Azure 进行出站调用。

就我而言，问题的根本原因是我的安全套件 BitDefender 阻止了我的应用程序的出站访问，因为它认为这是一种威胁。

我已经为此应用程序的防火墙添加了一个例外，它已经解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-05-10T02:34:59.000

当我在两个不同的 Visual Studio 实例中有两个不同的 ASP.net 项目时，我遇到了同样的错误。
关闭其中一个解决了这个问题。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-14T07:03:56.387

当一个进程使用一个端口时，它不能被另一个进程使用。`netstat -o`显示进程正在使用的端口。

或者，也可以从使用中排除端口。在这种情况下，没有进程可以使用它们。您可以通过以下方式查看列表`netsh interface ipv4 show excludedportrange protocol=tcp`

# asp.net-mvc - MVC：如何使用（渲染）父（主）视图（布局视图）中的部分？

> ID：10461259
> 
> 赞同：9
> 
> 时间：2012-05-05T11:11:39.607
> 
> 标签：asp.net-mvc

给定视图层次结构： Index.cshtml -> _Layout.cshtml -> _MasterLayout.cshtml ：

**_MasterLayout.cshtml** - 我想在主布局中使用的部分集（下）

```
@section javascriptLinks {
<script src="~/client/vendor/require-jquery.js" data-main="~/client/main.js" type="text/javascript"></script>
}
@RenderBody() 
```

**_Layout.cshtml** - 实际的站点主布局

```
@{
  Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

<!doctype html>
<html>
<!-- actual site layout here -->
<body>
@RenderBody()
@RenderSection("javascriptLinks")
</body>
</html> 
```

**Index.cshtml** - 一些具体的页面特定标记

拆分_Layout.cshtml和_MasterLayout.cshtml的想法是代码共享。我有一种库/框架，_MasterLayout 属于这个库。而_Layout.cshtml 是一个具体的应用站点主布局。

不幸的是，这个模式不起作用。在渲染过程中，_Layout.cshtml 不会看到 _MasterLayout.cshtml 中的部分。

在这种情况下有什么方法可以使用部分（从父视图而不是子视图中获取它们）？

我可以看到的一种可能的解决方案是为我的_MasterLayout.cshtml 中的每个部分创建单独的页面，并在_Layout 中调用@RenderPage。但是，我想要一个共享资产（_MasterLayout.cshtml）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:00:48.540

尝试反转操作。我的意思是这样的：

你的**_MasterLayout.cshtml：**

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    @RenderSection("HeadSection", true)
    <title>@ViewBag.Title</title>
</head>
<body>
@RenderBody()

// ...... 
// You could put your general scripts here
<script src="~/client/vendor/require-jquery.js" data-main="~/client/main.js" type="text/javascript"></script>
// Put true to enforce the sub layout to define Scripts section
    @RenderSection("Scripts", true)
</body>
</html> 
```

你的**_Layout.cshtml：**

```
@{ Layout = "~/Views/_Shared/_LayoutMain.cshtml"; }
@section HeadSection{
    // any thing you want
    @RenderSection("HeadSection", false)
}
    @RenderBody()
// ...... 
// Put false to make Scripts section optional
@section Scripts{
    @RenderSection("Scripts", false)
} 
```

# android - 这段代码有什么问题？

> ID：10461261
> 
> 赞同：0
> 
> 时间：2012-05-05T11:11:57.537
> 
> 标签：android, xml, admob

我试图只制作一个小应用程序，但它的布局文件有问题。

在我将广告放入代码后，我的布局和背景都发生了变化。编辑文本下降了，两个按钮也下降了。我不知道如何使我的布局在广告放置后也一样。你能帮我吗？

```
Here's the code:

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:background="@drawable/background">

 <RelativeLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >
<com.google.ads.AdView
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adSize="BANNER"
    ads:adUnitId="MY_AD_ID"
    android:layout_alignParentTop="true"
    />

  <EditText 
    android:id="@+id/et_text"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="135dp"
    />

 <RelativeLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

 <Button
    android:text="Send"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/btn_post"
    android:layout_gravity="right"
    android:layout_alignParentRight="true"/>

 <Button 
    android:text="Clear"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/btn_clear"/>
 </RelativeLayout>  
 </LinearLayout> 
```

更新：现在我可以解决布局下降的问题，但我不知道如何制作我的应用程序，如果我点击编辑文本，键盘就会出现，而不是推开背景。感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:19:03.757

你还没有关闭你的第一个 RelativeLayout

```
 </RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:22:38.260

如果您不希望它发生，请将 admob 放在应用程序的末尾。

# java - Button setOnClickListener causing application crash

> ID：10461263
> 
> 赞同：0
> 
> 时间：2012-05-05T11:12:11.947
> 
> 标签：java, android, xml, button

So I have 2 XML layout files.
One is the menu and the other is the app.
So, now I have some buttons on the one XML file and some other buttons on the other file.

So this code works:

```
 setContentView(R.layout.main);
    start = (Button) findViewById(R.id.button1);

    start.setOnClickListener(this); 
```

But if I change the view and write this:

```
 setContentView(R.layout.random);
    add_person = (Button) findViewById(R.id.add);

    add_person.setOnClickListener(this); //crash here 
```

The app crashes!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:15:53.823

`add_person` is null so get Nullpointer Exception and you have Button in random.xml which has add as id?

if not then add

```
<Button android:id="@+id/add" ... /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:34:56.593

try after cleaning current project from *Project->Clean*.

or you can use

```
(Button)random.findViewById(R.id.add); 
```

instead of

```
(Button) findViewById(R.id.add); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:48:07.800

You should implement the class as `onClickListner` like this:

```
public class <ClassName> extends Activity implements OnClickListener{

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.main);
            start = (Button) findViewById(R.id.button1);
            start.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
           switch (v.getId()) {
               case R.id.button1:
                   //Hear Yor Logic on Click Event.
                   break;       
           }        
    }
} 
```

# sql-server - T-SQL XML Query，如何将匹配节点分成单独的行？第二部分

> ID：10461264
> 
> 赞同：2
> 
> 时间：2012-05-05T11:12:18.103
> 
> 标签：sql-server, xml, tsql, xquery

这个问题紧随这个很好的答案：[T-SQL XML Query, how to separate nodes into individual rows？](https://stackoverflow.com/questions/2596904/t-sql-xml-query-how-to-seperate-matching-nodes-into-individual-rows/10451753#10451753) 如果值在哪里：

```
 <child>
    <name>Fred</name>
    <sname>Flintstone</name>
   </child>
   <child>
    <name>Bill</name>
    <sname>Gates</name>
   </child> 
```

我希望输出如下：

```
Fred
Flintstone
Bill
Gates 
```

或者更好的是，这个：

```
name: Fred
sname: Flintstone
name: Bill
sname: Gates 
```

（全部在一列中）

-->由于在接下来的 3 小时内我无法回答自己的问题，我将按照 stackoverflow 的建议编辑我的问题。这是我对自己问题的回答：

我想通了！:-) 所以我有义务分享我自己的解决方案。这里是：

```
SELECT
  distinct childs.value('fn:local-name(.)', 'nvarchar(50)') + '=' + childs.value('(text())[1]', 'varchar(50)') as Children
FROM  
  #t CROSS APPLY
  data.nodes('//parent/child/*') AS Children(childs) 
```

感谢任何人看我的问题！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:45:05.490

```
declare @XML xml
set @XML = 
'<child>
  <name>Fred</name>
  <sname>Flintstone</sname>
 </child>
 <child>
   <name>Bill</name>
   <sname>Gates</sname>
 </child>'

select N.value('concat(local-name(.),": ",.)', 'varchar(max)')
from @XML.nodes('/child/*') as T(N) 
```

结果：

```
name: Fred 
sname: Flintstone 
name: Bill 
sname: Gates 
```

**更新：**
使用表格和保证`order by`

```
declare @XML xml
set @XML = 
'<child>
  <name>Fred</name>
  <sname>Flintstone</sname>
 </child>
 <child>
   <name>Bill</name>
   <sname>Gates</sname>
 </child>'

declare @T table (ID int identity primary key, XMLColumn xml)
insert into @T values(@XML)
insert into @T values(@XML)

select ID,
       Names
from
  (
    select ID,
           N.value('concat(local-name(.),": ",.)', 'varchar(max)') as Names,
           row_number() over(partition by ID order by T.N) as rn
    from @T
      cross apply XMLColumn.nodes('/child/*') as T(N)
  ) T
order by ID, rn 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:18:29.400

`<child>`这为您提供了每个输出的两列：

```
DECLARE @input XML = '<child>
    <name>Fred</name>
    <sname>Flintstone</sname>
   </child>
   <child>
    <name>Bill</name>
    <sname>Gates</sname>
   </child>'

SELECT
    'name: ' + child.value('(name)[1]', 'varchar(50)'),
    'sname: ' + child.value('(sname)[1]', 'varchar(50)')
FROM @input.nodes('/child') AS nodes(child) 
```

输出是：

```
name: Fred  |  sname: Flintstone
name: Bill  |  sname: Gates 
```

如果你只想要一列，你可以使用它来代替：

```
SELECT
    'name: ' + child.value('(name)[1]', 'varchar(50)')
FROM @input.nodes('/child') AS nodes(child)

UNION

SELECT
    'sname: ' + child.value('(sname)[1]', 'varchar(50)')
FROM @input.nodes('/child') AS nodes(child) 
```

这给了你这个输出：

```
(No column name)
name: Bill
name: Fred
sname: Flintstone
sname: Gates 
```

# c# - 即使选中复选框，流程也不会进入 if 循环

> ID：10461266
> 
> 赞同：-1
> 
> 时间：2012-05-05T11:12:31.323
> 
> 标签：c#, asp.net

```
<div>
                <asp:GridView ID="gdvReceivedLetter" runat="server" AllowPaging="True" AutoGenerateColumns="False"
                    CellPadding="3" DataKeyNames="ID" GridLines="Horizontal" EmptyDataText="No Records Found"
                    PageSize="10" Width="95%" BackColor="White" BorderColor="#E7E7FF" BorderStyle="None"
                    Font-Names="Arial" Font-Size="10.5" BorderWidth="1px" OnSelectedIndexChanged="gdvReceivedLetter_SelectedIndexChanged"
                    OnPageIndexChanging="gdvReceivedLetter_PageIndexChanging">

                    <FooterStyle BackColor="#B5C7DE" ForeColor="#4A3C8C" />
                    <RowStyle BackColor="#E7E7FF" ForeColor="#4A3C8C" />
                    <Columns>
                        <asp:BoundField DataField="ID" HeaderText="ID" Visible="False"></asp:BoundField>
                        <asp:TemplateField Visible="true">
                            <HeaderTemplate>
                                <input type="CheckBox" id="chkSelect" runat="server"  />
                            </HeaderTemplate>
                            <ItemTemplate>
                                <asp:CheckBox runat="server" ID="chkDelete"  />   
                            </ItemTemplate>
                            <HeaderStyle Width="9px" />
                            <ItemStyle Width="9px" />
                        </asp:TemplateField>

        <asp:BoundField DataField="FileName" HeaderText="फाईल नाव/क्र.">
                            <HeaderStyle CssClass="GridItemHeaderLarge" />
                            <ItemStyle CssClass="GridItemLarge" />
                        </asp:BoundField>                            

                    </Columns>
                    <PagerStyle BackColor="#E7E7FF" ForeColor="#4A3C8C" HorizontalAlign="Right" />
                    <SelectedRowStyle BackColor="#738A9C" Font-Bold="True" ForeColor="#F7F7F7" />
                    <HeaderStyle BackColor="#4A3C8C" ForeColor="#F7F7F7" />
                    <AlternatingRowStyle BackColor="#F7F7F7" />
                </asp:GridView>
            </div>

<table width="100%">
                <tr>
                    <td width="80%">
                    </td>
                    <td width="20%" style="padding-top: 18px">
                        <asp:Button runat="server" ID="btnDelete" Text="काढून टाका" Font-Bold="true" OnClientClick="return Delete();"
                            Enabled="true" OnClick="btnDelete_Click" />
                    </td>
                </tr>
            </table> 
```

* * *

> //////这里是问题 //// exen 复选框被选中光标永远不会出现在这里！！！为什么！！？？？？///问题出在哪里？？//请让我出去这个plzzzzzzzzz问题在哪里？
> 
> 我是这门语言的新手
> 
> 这是点击事件...

```
foreach (GridViewRow chkrow in gdvReceivedLetter.Rows)
            {
                CheckBox chk = (CheckBox)chkrow.FindControl("chkDelete");
                if (chk != null && chk.Checked)
                {
                    Page.ClientScript.RegisterStartupScript(this.GetType(), "", "alert('CHECKEDDDDD');", true);   
                }
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:24:11.897

你在哪里

```
DataGridView1.EndEdit(); 
```

因为曾经，用户检查过它，在发出 EndEdit() 之后，它会保存到数据源中......

# java - 更新 Java 中的 JFrame。重复的对象

> ID：10461267
> 
> 赞同：2
> 
> 时间：2012-05-05T11:12:36.610
> 
> 标签：java, swing, jframe, repaint

我在 BlueJ 中开发一个简单的游戏，它就像一个“太空侵略者”。我的问题是，当我移动一个物体时，比如带有 的不明飞行物`KeyListener`，旧的不明飞行物不会消失！

要更新我做的框架：

```
public static void updateJframe()
{
  SwingUtilities.updateComponentTreeUI(canvas);
} 
```

`canvas`是我的类`Canvas`中扩展的变量`JFrame`。

如果需要更多代码，我可以毫无问题地发布它。

好的，抱歉在评论中发布代码，我也是菜鸟：$

```
public class Inout 
{

    private static Canvas canvas;
    private Motor motor;

    public Inout()
    {
        motor = new Motor(); //in class "Motor" is the logic of the game
       canvas = new Canvas();
    }

    public static void actualizar() //this is the method where i'm trying to update the                     frame
    {
        canvas.removeAll();
        SwingUtilities.updateComponentTreeUI(canvas);
    }

    public class Canvas extends JFrame implements KeyListener 
    {

        public Canvas ()
        {
            addKeyListener(this);
            setFocusable(true);
            setFocusTraversalKeysEnabled(false);
            setTitle("Space Invaders");
            setSize(1200,600);
            setVisible(true);
            setDefaultCloseOperation(EXIT_ON_CLOSE);
        }

        public void paint(Graphics g)
        {
            int i = 0;
            int j = 0;
            for (i = 0; i < 30 ; i++)
            {
                for (j = 0; j < 50; j++)
                {
                    if (Motor.cuadricula[i][j].esUfo())    
                    {
                        g.setColor (Color.blue);
                        g.fillRect(i*40,j*20,20,15);   
                    }
                    else if (Motor.cuadricula[i][j].esDef())    
                    {
                        g.setColor (Color.red);
                        g.fillRect(i*40,j*20,20,15);}
                    }
                }
            }
        }   
        public void keyPressed(KeyEvent e)
        {}

        public void keyReleased(KeyEvent e)
        {
            int keyCode = e.getKeyCode();
            if(keyCode == KeyEvent.VK_P){
                Motor.moverDef(1);//mover una casilla a la derecha

            }
            else if(keyCode == KeyEvent.VK_O){
                Motor.moverDef(0);//mover una casilla a la izquierda
                Inout.actualizar();
            } 
        }

        public void keyTyped (KeyEvent e){}
    }
} 
```

我无法理解的主题是：如果我使用“actualizar）；” 任何其他方法中的方法都可以正常工作，但是如果从 KeyListener 中执行，则会出现错误。

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:50:29.123

**好方法：**使用paintComponent方法而不是paint，你不会遇到旧对象不消失@repaint的问题。

**坏方法：**每次调用paint时填充背景（在方法开始时） - 它会覆盖您之前绘制的所有内容。

# css - 如何在 SASS 中使用 VOID 变量

> ID：10461268
> 
> 赞同：0
> 
> 时间：2012-05-05T11:12:48.723
> 
> 标签：css, sass

你好世界 ：）

我正在尝试使用 SASS 为 BOX-SHADOW 属性编写 MIXINS，如下面的代码。

```
@mixin simpleBoxShadow ($inset, $xoffset, $yoffset, $blur, $spread, $color ) {
    -webkit-box-shadow: $inset $xoffset $yoffset $blur $spread $color;
            box-shadow: $inset $xoffset $yoffset $blur $spread $color;
    ...
} 
```

而且我坚持使用 INSET 值。有时它应该是插图，有时只是无效。我在使用这个 MIXIN 的时候应该写什么？

```
@include simpleBoxShadow ( -what's there?- , 10px, 10px, 10px, 10px, #000000 ); 
```

或者我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:37:50.120

这些以空格分隔的值在 SASS中被视为[列表。](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#lists)您可以使用[join()](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#join-instance_method)函数将列表连接在一起。所以一种方法是做这样的事情：

```
@mixin simpleBoxShadow ( $xoffset, $yoffset, $blur, $spread, $color, $inset: false ) {
    $shadow: $xoffset $yoffset $blur $spread $color;

    @if ($inset) {
        $shadow: join(inset, $shadow, space);
    }

    -webkit-box-shadow: $shadow;
            box-shadow: $shadow;
} 
```

然后你可以像这样使用你的mixin：

```
// with inset
@include simpleBoxShadow( $inset: true, 10px, 10px, 10px, 10px, #000000 );
// without inset
@include simpleBoxShadow( 10px, 10px, 10px, 10px, #000000 ); 
```

**更新：**您可能还想考虑使用[Compass](http://compass-style.org/) - 它是一个建立在 SASS 之上的框架，提供许多便利功能和 mixin，包括一些用于[box-shadow](http://compass-style.org/reference/compass/css3/box_shadow/)的功能。

# ruby-on-rails - 未初始化的常量 SessionsController - 路由错误 + 设计 + Ruby on Rails 3.1

> ID：10461269
> 
> 赞同：2
> 
> 时间：2012-05-05T11:13:00.947
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, devise

我已经覆盖了设计的会话控制器和注册控制器，并给出了自定义路径。我在过去的几个项目中一直在这样做，并且工作正常，我不知道为什么我现在收到此错误。

以下是路线：-

```
devise_for :users, :controllers => {:sessions =>
"sessions", :passwords => "passwords", :registrations =>
"registrations"} do
   get "signup", :to => "registrations#new"
   get "login", :to => "sessions#new"
   post "login", :to => "sessions#new"
   get "logout", :to => "devise/sessions#destroy"
 end 
```

这些路线以前有效，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-24T07:38:46.107

也可能是 session_controller.rb 文件名不正确造成的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T06:44:20.860

这对我来说是一个非常愚蠢的错误，我在覆盖 session_controller 时拼错了 session_controller。

# ruby-on-rails - 适用于 Ruby 的 AWS S3 开发工具包“多部分复制”

> ID：10461281
> 
> 赞同：2
> 
> 时间：2012-05-05T11:14:08.703
> 
> 标签：ruby-on-rails, ruby, amazon-s3

我正在寻找 SDK 的这一部分（Multipart Copy Part）的 Ruby 组件

我在最新的 ruby​​ aws-sdk 上找不到对它的引用。

[http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadUploadPartCopy.html](http://docs.amazonwebservices.com/AmazonS3/latest/API/mpUploadUploadPartCopy.html)

问题是我似乎找不到它，SDK 是全面的还是我必须手动编写这部分？我将如何提出一个安静的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-07-07T16:07:05.593

我知道这来得太晚了......但我找到了你的问题，所以其他人也可能会找到它。

在 API 的第 3 版中，您可以在此处找到文档：[https ://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/MultipartUpload.html](https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/S3/MultipartUpload.html)

# iphone - 如果 Xcode Archiving Utility 显示错误的应用程序进行验证怎么办？

> ID：10461282
> 
> 赞同：9
> 
> 时间：2012-05-05T11:14:17.737
> 
> 标签：iphone, ios, xcode, app-store-connect, archive

我的 Mac 上有两个应用程序项目。因为懒得重新配置我的项目，我只是复制了我的第一个应用程序的整个项目文件夹并重命名了项目。项目中的所有文件始终与项目本身相关。所以效果非常好。

但今天我想构建和存档我的第一个应用程序的更新。这一切都没有抱怨。但是当 Xcode 的存档实用程序完成时，我选择我的存档并单击“验证”，Xcode 会询问我的 iTunes 连接凭据。然后我输入它们，在“请选择您的应用程序记录和签名身份”对话框中，Xcode 只提供一个应用程序供选择。仅限新的（不同的）应用程序。但不是我想在 App Store 上更新的应用程序。

在 iTunes 连接中，我的旧应用程序仍然在线，显然它有一个应用程序 ID。但是 Xcode 不提供选择这个应用程序。

但是有一件奇怪的事情：我为新应用创建的新 App ID 与我的旧应用具有相同的 Bundle Seed ID，它已经在 App Store 上。这是一个问题吗？这就是 Xcode 为我提供错误应用程序选择的原因吗？

什么会导致这个问题？为什么 Xcode 存档验证器不会检测到我的应用程序已经在应用商店中，并将其提供给存档验证选择？

我没有更改我的应用程序或捆绑 ID 或任何东西。我上次所做的只是将一个新应用程序添加到 iTunes 连接，但它具有不同的应用程序 ID/捆绑包 ID。

非常感谢帮助。谢谢你们。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-05T11:38:20.143

我想通了为什么。当我创建我的新应用程序时，我去 iTunes 连接并添加了一个新的应用程序 ID 和应用程序，然后单击“**准备上传二进制文件**”。Xcode 可以识别应用程序并提交它的强制性步骤。

所以这是很久以前的事了，我完全忘记了我做了这个。然后我很惊讶为什么 Xcode 只在验证器中列出了一个错误的应用程序可供选择。当然，Xcode 只提供 iTunes 连接中标记为“准备上传二进制文件”的内容，这只是我的新应用程序。

现在我去那里并为我的旧应用程序的新版本和VOILLA单击“准备上传二进制文件”。Xcode 提供了它。

所以：简单的错误，大头疼。希望它对处于相同情况的其他人有所帮助。

# javascript - 创建一个 JavaScript 文字对象——在 XPath 2.0 中

> ID：10461284
> 
> 赞同：0
> 
> 时间：2012-05-05T11:14:28.280
> 
> 标签：javascript, json, xslt, xslt-2.0, xpath-2.0

**背景：**我需要在 Web 浏览器中使用 XSLT 2.0 来执行另一个 XSLT 2.0 转换 - 这将用于 XSLT 处理器的测试驱动程序。处理器的 JavaScript API 允许您构建一个文字*命令*对象，该对象作为参数传递给*运行*函数以执行转换。

从 JavaScript 构建命令对象非常简单，但是从 XSLT 我需要使用内置的 JavaScript 扩展和用户定义的 JavaScript 函数来将 XSLT 数据转换为 JavaScript 对象。XPath 2.0 使用项目序列存在一个问题，但不允许使用序列序列。我当前使用的方法显示在以下 XSLT 片段中，它声明了一个变量*cmd*：

![用于创建 JavaScript 对象的 XSLT 代码](../Images/ad99dc1054f65bba3f2abb259831a3f8.png)

等效的 JavaScript 如下所示，供参考：

```
var cmd= {
            initialTemplate: initialTemplate,
            stylesheet:      stylesheet,
            source:          'uk-maps.xml',
            parameters:      {
                                            country:    'UK',
                                            city:       'Cheltenham',
                                            color:       [28, 329, 767]
                             }
}; 
```

跨入 JavaScript 时，XSLT 处理器将序列转换为 JavaScript 对象数组。用户定义的 JavaScript 函数*js:object*处理数组并为奇数项创建属性，并从相应的偶数项中分配属性值。可以递归调用*js:object*函数将JavaScript 对象分配给新对象的属性。我的另一个解决方法是用户定义的 js:array 函数，它将 XPath 序列包装在 JavaScript 对象中，以允许将其作为序列项嵌入。*js:object*函数必须检测并解开这些 js:array 对象。

**所以，问题是：**这是在 XSLT 2.0 中构建 JavaScript 文字对象的一种方法，但它涉及一些可能并不适合所有人的变通方法。还可以使用哪些其他方法？也许我应该使用现有的将 XML 转换为文字 JavaScript 对象的 JavaScript 库函数？XSLT 3.0 映射（此处理器中尚不可用）会提供更好的解决方案吗？提议的 JSON / XSLT 兼容性功能取得了哪些进展？如果*js:object*和*js:array*是处理器内置的扩展函数会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T18:06:45.713

**这是处理此类任务的一种方法**：

给定以下 XML 文档：

```
<t xmlns:js="js:aux">
 <initialTemplate>
   <js:var>initialTemplate</js:var>
 </initialTemplate>
 <stylesheet>
   <js:var>stylesheet</js:var>
 </stylesheet>
 <source>uk-maps.xml</source>
 <parameters>
  <js:object>
          <country>UK</country>
          <city>Cheltenham</city>
          <colours>
            <js:array>
                   <js:num>28</js:num>
                   <js:num>329</js:num>
                   <js:num>767</js:num>
           </js:array>
          </colours>
  </js:object>
 </parameters>
</t> 
```

**这种转变**：

```
<xsl:stylesheet version="2.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
        xmlns:js="js:aux">
        <xsl:output omit-xml-declaration="yes" indent="yes"/>
        <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  {
    <xsl:apply-templates/>
   }
 </xsl:template>

 <xsl:template match="*/*[not(self::js:*)]">
   <xsl:variable name="vNotLast" select="exists(following-sibling::*[1])"/>

         <xsl:sequence select="name(), ':&#9;'"/>
         <xsl:apply-templates/>

         <xsl:sequence select="','[$vNotLast], '&#xA;'"/>
 </xsl:template>

 <xsl:template match="*[not(self::js:*)]/text()">
  <xsl:sequence select='concat("&apos;", ., "&apos;")'/>
 </xsl:template>

 <xsl:template match="js:object">
  {
    <xsl:apply-templates/>
  }
 </xsl:template>

 <xsl:template match="js:array">
  [
    <xsl:apply-templates/>
  ]
 </xsl:template>

 <xsl:template match="js:array/*">
  <xsl:next-match/>

  <xsl:variable name="vNotLast" select="exists(following-sibling::*[1])"/>
  <xsl:sequence select="','[$vNotLast]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**产生**：

```
 {
    initialTemplate :   initialTemplate, 
 stylesheet :   stylesheet, 
 source :    'uk-maps.xml' , 
 parameters :   
  {
    country :    'UK' , 
 city :  'Cheltenham' , 
 colours :  
  [
    28,329,767
  ]

  }

   } 
```

然后这个结果只需要提供给 Javascript`eval()`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:31:31.303

我目前的想法是最初使用问题中概述的带有 XPath 2.0 的原始解决方案。然后，当处理器支持 XPath 3.0 映射时，可以使用新的[映射构造函数，因此等效代码为：](http://www.saxonica.com/documentation/expressions/xpath30maps.xml)

```
<xsl:variable
name="cmd"
select="
map {
       'initialTemplate' := $initialTemplate;
       'stylesheet'      := $stylesheet;
       'source'          := 'uk-maps.xml';
       'parameters'      := map {
                                    'country'  := 'UK';
                                    'city'     := 'Cheltenham';
                                    'color'    := (28, 329, 767);

                                };
};
"/> 
```

我假设映射可以将序列作为值项处理，它还可以将其他映射作为值项包含在内，因此对 JavaScript 函数的调用将是唯一的非标准部分：

```
<xsl:variable name="result" as="document-node()" select="js:run($cmd)"/> 
```

# windows-7 - 重新启动/恢复窗口后 DNS 查找的长时间延迟

> ID：10461286
> 
> 赞同：3
> 
> 时间：2012-05-05T11:14:35.523
> 
> 标签：windows-7, dns, delay, request-timed-out

因为我有一个新的 Cisco 路由器，所以在恢复或启动我的笔记本电脑后我无法浏览网页。我做了一些调试，似乎我有一个网络连接，但是 DNS 有一段时间失败了（比如说；超过 50 秒）。

**您可以在下面的ping**和**nslookup**输出中看到我的意思。我用谷歌域名服务器和我的互联网提供商的 DNS 服务器尝试了这个，但两者都有相同的结果。一切都启动了一段时间后，一切正常。（意思是，互联网可以正常工作，并且所有尝试过的名称服务器都回复得非常快）。

如果有人知道如何解决这个问题会很好。

额外信息：windows7，宽带连接，wifi 和有线连接都有这个问题。

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Windows\system32>ping 8.8.8.8

Pinging 8.8.8.8 with 32 bytes of data:
Reply from 8.8.8.8: bytes=32 time=18ms TTL=54
Reply from 8.8.8.8: bytes=32 time=21ms TTL=54
Reply from 8.8.8.8: bytes=32 time=16ms TTL=54
Reply from 8.8.8.8: bytes=32 time=18ms TTL=54

Ping statistics for 8.8.8.8:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 16ms, Maximum = 21ms, Average = 18ms

C:\Windows\system32>nslookup
DNS request timed out.
    timeout was 2 seconds.
Default Server:  UnKnown
Address:  8.8.8.8

> www.google.com
Server:  UnKnown
Address:  8.8.8.8

DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
*** Request to UnKnown timed-out
> www.google.com
Server:  UnKnown
Address:  8.8.8.8

DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
*** Request to UnKnown timed-out
> www.google.com
Server:  UnKnown
Address:  8.8.8.8

DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
*** Request to UnKnown timed-out
> www.google.com
Server:  UnKnown
Address:  8.8.8.8

--------8<------after a while---------

C:\Windows\system32>ping 8.8.8.8

Pinging 8.8.8.8 with 32 bytes of data:
Reply from 8.8.8.8: bytes=32 time=18ms TTL=54
Reply from 8.8.8.8: bytes=32 time=21ms TTL=54
Reply from 8.8.8.8: bytes=32 time=16ms TTL=54
Reply from 8.8.8.8: bytes=32 time=18ms TTL=54

Ping statistics for 8.8.8.8:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 16ms, Maximum = 21ms, Average = 18ms

C:\Windows\system32>nslookup
DNS request timed out.
    timeout was 2 seconds.
Default Server:  [8.8.8.8]
Address:  8.8.8.8

> www.google.com
Server:  [8.8.8.8]
Address:  8.8.8.8

DNS request timed out.
    timeout was 2 seconds.
DNS request timed out.
    timeout was 2 seconds.
Non-authoritative answer:
Name:    www.l.google.com
Addresses:  173.194.66.99
          173.194.66.106
          173.194.66.147
          173.194.66.103
          173.194.66.104
          173.194.66.105
Aliases:  www.google.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-20T08:37:06.143

有同样的问题。这对我有用，在 Cisco EPC3925（有线 ISP）后面。

在 Windows 7/8 中打开网络和共享中心 > 管理适配器设置。您可能需要按住 ALT 按钮才能看到 Advanced > Advanced Settings Options 。在适配器和绑定中，检查绑定是否在 TCP/IPv6 之前列出 TCP / *IPv4*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T21:44:54.110

节日。多年来，我在 Cisco EPC-3925 上遇到过类似的问题，有一次我什至尝试过 IPv4 和 6 设置（无济于事）。我发现我让路由器运行的时间越长，ping 越长，我的互联网连接越慢。

这是您可以尝试的测试：重新启动 3925 并从 speedtest.net 获取结果（重新启动后我的速度接近 120Mbps）。在不重启路由器的情况下，12 小时后再次尝试 speedtest，然后 24 小时、48、72 等（您可以更频繁地测试，但结果不会那么好）。记录你所有的速度测试值，看看你的路由器是否随着时间的推移而变慢。有传言称网络地址转换表 (NAT) 不知何故损坏了，但我发现解决该问题的任何建议也都失败了（对我而言）。

我尝试了各种方法来修复它，最后我在墙上使用了一个电源插座定时器，路由器插入其中。计时器每天凌晨 3:30 重新启动路由器 - 这为我解决了问题。它很粗糙，但很有效。不能解决根本问题，而是回避。

同样的事情可能对您有用...通过强制您的 PC 进入睡眠状态进行测试，将其唤醒，然后运行上述测试以查看会发生什么。

只是一个想法，但可能对你有用。

当然可能还有其他问题...例如，您是否使用无线连接到路由器 - WIFI 频道是否有任何干扰等。

问候，格雷格。

# iphone - 为什么解卷 iOS 部分卷曲仅在单击卷曲的有限部分时才有效？

> ID：10461287
> 
> 赞同：1
> 
> 时间：2012-05-05T11:14:38.093
> 
> 标签：iphone, objective-c, ios5, page-curl

我在 iPhone iOS 5 应用程序上有部分卷曲，并注意到当使用部分卷曲过渡撤消（取消卷曲）时，仅在单击页面“卷曲”的某些有限区域时才会发生 - 而不是最接近右下角的部分。这意味着需要一些时间才能意识到它确实确实有效 - 为什么这看起来完全违反直觉？我需要做些什么来使整个“卷曲”可点击吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:49:35.740

好吧，有一个技巧.. 在第二个视图中，您在要关闭的地方放置了一个隐藏按钮。然后只需使用这样的代码：

```
- (IBAction)toDismiss:(id)sender {
    [self dismissModalViewControllerAnimated:YES];
} 
```

# ruby-on-rails - 观察者未运行

> ID：10461300
> 
> 赞同：0
> 
> 时间：2012-05-05T11:15:59.203
> 
> 标签：ruby-on-rails, activerecord, console, migration

我有一个观察者，当记录（预订）的状态发生变化时，他会创建一些记录（票证）。运行应用程序时它工作正常。但不会在迁移期间或在 rails 控制台中运行。我能理解，它应该

这是在 application.rb

```
# Activate observers that should always be running.
config.active_record.observers = :booking_observer 
```

这是观察者（booking_observer.rb）

# 编码：utf-8

```
class BookingObserver < ActiveRecord::Observer
  require 'logger'

  def create_ticket(booking, passenger, leg)
    ticket = Ticket.factory(booking, passenger, leg)
    begin
      ticket.save!
    rescue Exception => e
      booking.logger.error "Can't save #{leg} ticket: #{e}"
    end
  end

  def after_update(booking)
    if booking.changed? && booking.changed_attributes()["status"]!=Booking::CONFIRMED && booking.status==Booking::CONFIRMED.to_sym
      passengers = booking.passengers.all
      passengers.each do |passenger|
        booking.logger.error "Passenger: #{passenger}"
        create_ticket(booking, passenger, Booking::DEPARTURE_LEG)
        create_ticket(booking, passenger, Booking::RETURN_LEG) if booking.booking_type.to_sym != :ow
      end
    end
  end
end 
```

这是一个示例迁移

```
class CreateTicketsForValidBookings < ActiveRecord::Migration
  def up
    bookings = Booking.where("departure_date < ?", 1.minute.ago).where(status: "confirmed")
    bookings.each do |booking|
      booking.status="migrating"
      booking.save
      booking.status="confirmed"
      booking.save
    end
  end

  def down
    bookings = Booking.where("departure_date < ?", 1.minute.ago).where(status: "migrating")
    bookings.each do |booking|
      booking.status="confirmed"
      booking.save
    end
  end
end 
```

在我发现的每一个帖子中，人们都试图禁用观察者。好吧，就我而言，它是倒退的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:24:36.250

事实证明，您必须在每个环境的基础上启用观察者。这三个文件

```
config/enviroments/development.rb
config/enviroments/test.rb
config/enviroments/production.rb 
```

必须激活应该始终运行的观察者。

```
config.active_record.observers = :booking_observer 
```

# java - Java: Sockets - DataStream 真的很慢

> ID：10461302
> 
> 赞同：5
> 
> 时间：2012-05-05T11:16:03.480
> 
> 标签：java, performance, sockets

我在线程中只使用普通的 DataInputStream 和 DataOutputStream 来接收、发送（在服务器上接受）来制作游戏，但它真的很慢。> 5 秒延迟。

这是我的制作方法（大部分看起来像这样）：

（dos 是 DataOutputStream）

```
dos = new DataOutputStream(socket.getOutputStream());
dos.writeFloat(dp.x);
dos = new DataOutputStream(socket.getOutputStream());
dos.writeFloat(dp.y);
dos = new DataOutputStream(socket.getOutputStream());
dos.writeUTF(dp.username); 
```

对于输入（这个在服务器中），我使用：

（dis 是 DataInputStream，它在 for 循环中，所以 i 是针对每个玩家的）

```
dis = new DataInputStream(list_sockets.get(i).getInputStream());
x = dis.readFloat();
dis = new DataInputStream(list_sockets.get(i).getInputStream());
y = dis.readFloat();
dis = new DataInputStream(list_sockets.get(i).getInputStream());
username = dis.readUTF(); 
```

所以它真的很慢，但我不知道为什么:(请帮忙？

编辑：每个操作（发送、接受、接收）都有自己的守护线程。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T12:57:01.837

重复创建`DataOutputStream`和`DataInputStream`实例不利于性能。

但是，我怀疑**更重要的**性能问题是您在没有任何 Java 端缓冲的情况下进行读写。这意味着每个读/写调用都会进行一次（可能还有多次）系统调用来读取数据。系统调用比普通的 Java 方法调用慢几个数量级。

您需要将 Socket 输入流包装在 a 中`BufferedInputStream`，将输出流包装在 a`BufferedOutputStream`中，然后将它们包装在 Data 流中。`flush`（请注意，当您执行此操作时，在每条消息或一系列消息的`DataOutputStream`末尾添加变得更加重要。

* * *

> 我是否写了一些信息，然后在每次写入后刷新？

就像我上面所说的，您在每条消息或每个消息序列的末尾刷新。假设缓冲区中有要刷新的数据，缓冲输出流上的每次刷新都会导致系统调用。如果您在每次写入时都刷新，那么您（可能）正在执行不必要的系统调用。

由您决定协议的消息边界应该在哪里。这完全取决于您发送/接收的数据的详细信息以及处理方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:38:37.680

就像您说的那样，您有一个 for 循环，并为循环中的每次迭代创建一个新的数据输入/输出流。这将导致巨大的开销。

您应该为每个客户端（在单独的线程上）有 1 个数据输入和输出流，然后通过循环构建输入的流来获取用户输入，直到输入流为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:35:59.520

当“慢”仅表示网络滞后时，您应该“刷新”您的流以强制传输非完整缓冲区。

添加：

即使这样你也会得到一个像这样的“工作草案”，考虑到一个设计良好的通信协议包含围绕简单命令的各种花里胡哨..问题出现

*   异常处理
*   测序
*   验证
*   完整性检查（避免作弊、重放……）
*   可扩展性（新命令，使用显式命令对象）
*   实时处理
*   当然还有很多其他人......

有一些框架可以让你摆脱这种负担。

# java - 两个for循环，内部for循环增加1000倍，而速度只增加100倍？

> ID：10461306
> 
> 赞同：0
> 
> 时间：2012-05-05T11:16:37.227
> 
> 标签：java, algorithm, complexity-theory

我正在分析算法的计算复杂度，我有两个 for 循环。

```
 short i=0;
    short j=0;
    short ii=0;
    short[] counts = new short[2];

    int label_size  = MapRedUtils.label_size;
    int max_index=0;                        
    int sample_size =data.getSampleSize();

    float max_ig = 0;
    float totalVar=0;
    float var=0;
    float cov_ig;

    float[] tocopy = new float[label_size];        
    float[][] sums = new float[2][];
    float[] totalSum = new float[label_size];

    byte value;
    ByteBuffer label = ByteBuffer.allocate(label_size*4); 

    for( j=0; j<2; j++ )        
        sums[j] = new float[label_size];

    for( ii=0; ii<3; ii++)// 3 ways of split the current node
    {          
          long startTime;
    long endTime;
    long totalTime;
    startTime = System.currentTimeMillis();
        counts[0]=0;
        counts[1]=0;

        System.arraycopy(tocopy,0,totalSum,0,label_size);
        System.arraycopy(tocopy,0,sums[0],0,label_size);
        System.arraycopy(tocopy,0,sums[1],0,label_size);

        for ( i = 0; i < sample_size; i++) 
        {
            OneSample instance = data.get(i);
            value = (byte) instance.getTheGenoytpe(snpid);

            label = instance.getPhenotype();                                                                          

            if( value==ii)
            {   
                counts[0]++;
                for(j=0; j< label_size; j++)
                     sums[0][j] += label.getFloat(j*4);
            }
            else
            {
                counts[1]++;                    
                for(j=0; j< label_size; j++)
                    sums[1][j] += label.getFloat(j*4);                    
            }

            for(j=0; j< label_size; j++)  
                totalSum[j] += label.getFloat(j*4);
        }                                              

          totalVar=0;
          var=0;
         for(i=0; i< label_size; i++)
         {
           totalVar += totalSum[i]*totalSum[i];          
         } 

        totalVar = totalVar/sample_size;//it is averaged by sample size

        for(j=0; j< 2; j++)
           //var += sumSquared(sums[j],  MapRedUtils.inverse_covariance , counts[j]);  
             var += sumSquared(sums[j], counts[j]);

        cov_ig = var- totalVar;

        if(cov_ig > max_ig)
        {
            max_ig=cov_ig;
            max_index=ii;
        } 
        endTime = System.currentTimeMillis();                    
        totalTime = (endTime - startTime);
        System.out.println(totalTime); 
```

我从 label_size=1 和 label_size=1000 增加了内部 label_size，我预计运行时间应该增加 1000 倍，而实际上不同运行的运行时间只增加 40-100 倍。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:34:39.083

当 label = 1 时，外部循环的大部分时间都用于“在这里做某事”并设置内部循环，因为只在循环中运行一次“也在这里做某事”只是工作的一小部分。假设“在这里做某事”并设置内部循环需要 100 个单位的时间，而“在这里也做一些事情”只需要 10 个单位的时间。程序的总运行时间为 110 * sample_size。现在将标签增加到 1000。100 + 10 * 1000 = 10100。因此总运行时间为 10100 * sample_size。10100 / 110 = 91.8。因为“在这里做点什么”花了一些时间，所以大大减少了增加标签的影响。您必须考虑“在这里做某事”与“也在这里做某事”的比例，

# html - PlayN-canvas 对象不在页面顶部

> ID：10461310
> 
> 赞同：1
> 
> 时间：2012-05-05T11:17:14.653
> 
> 标签：html, playn

我没有找到解决这个问题的方法：我想在 html-iframe 中显示我的 playN-game：

```
<iframe src="../playn-showcase-html/Showcase.html"
    width="640" height="480" name="Showcase" scrolling="no" marginwidth="0px" marginheigth="0px" frameborder="0" align="top">
</iframe> 
```

我想无边界地嵌入它。但正如您在下图中看到的那样，在 iframe 顶部有一个 15 像素的黑色“矩形”，我不想拥有。

可以看到的是 Showcase.html 的背景（黑色）。

正如我在 Mozilla Firebug 中看到的，黑色的“矩形”是 body-element 的一部分。画布对象位于顶部下方 15 像素处。

如何更改代码以使画布对象从顶部开始？

下面是 Showcase.html 的代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>PlayN Showcase</title>
    <style>
      @font-face {
        font-family: "Museo";
        src: url(showcase/text/Museo.ttf);
      }
    </style>
  </head>
  <body bgcolor="black">
    <script src="showcase/showcase.nocache.js"></script>
  </body>
</html> 
```

![在此处输入图像描述](../Images/e03b7c8f73cbfdc120bc80df19141130.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T19:58:00.107

您是否尝试将 style="margin:0; padding:0" 添加到 body 元素？

# design-patterns - 数据有模式吗？

> ID：10461312
> 
> 赞同：3
> 
> 时间：2012-05-05T11:17:38.843
> 
> 标签：design-patterns, data-structures

数据经常以“表格”的形式传输，例如在 CSV 文件或 HTML`<table>`元素中，但尽管这些看起来相似，但它们可能具有不同的隐式结构。例如：

```
 Height(cm) Weight (kg)
Pat    180       70
Sue    160       40
Jo     164       50 
```

可以被解释为对象的无序列表（人，具有高度和体重属性），在具有同质数据列的矩形表中。

相比之下，这不是一张长方形桌子，尽管它看起来很像。

```
Dist(m)/Time(m)      Hull  Leeds London
Hull                   0.0   69    229
Leeds                  59    0.0   218
London                 186   201   0.0 
```

它实际上是英国城市之间的两个相关三角矩阵（距离和旅行时间）的印刷组合。

是否有数据模式（以有代码模式的方式）？其他示例可能是诸如时间序列、相关矩阵、直方图等。如果这些被声明或什至可以凭经验发现，它将使阅读和分析它们变得更加容易。

更新：@Kathiravel 和@Jordão 都给出了更广泛（和有价值的观点）。我最初的问题是潜意识里关于数据的，没有参考计算机程序或数据库。所以我想问的是“哪些类型的隐含数据结构/模式在具有显着不同抽象结构的代码/数据库之外常用”？

@Kathiravel 的指针主要指向管理数据的过程，这很有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T22:46:10.703

找到正确的[*数据结构*](http://en.wikipedia.org/wiki/Data_structure)与找到在设计中使用的正确*设计模式*同样重要。根据您想要访问或存储数据的方式，您会发现无数的数据结构，从平面列表到四叉树；这会对算法的性能和可维护性产生重大影响。

您会[在 Wikipedia 上](http://en.wikipedia.org/wiki/List_of_data_structures)找到一个很好的数据结构列表。您的第一个表似乎代表了一个简单的结构化数据列表（如关系表），而您的第二个示例更类似于用于表示图形的[邻接矩阵。](http://en.wikipedia.org/wiki/Adjacency_matrix)

另外，请查看[此答案](https://stackoverflow.com/a/145714/31158)以获取与数据库相关的一些指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:12:32.083

数据模式确实存在。因此，存在数据挖掘和模式识别技术，以找到给定数据的模式。

[http://msdn.microsoft.com/en-us/library/ff648420.aspx](http://msdn.microsoft.com/en-us/library/ff648420.aspx)不再维护，但提供了一些有关数据模式的信息。

# php - 如何编辑使用 file_get_contents 抓取的内容

> ID：10461320
> 
> 赞同：2
> 
> 时间：2012-05-05T11:18:55.383
> 
> 标签：php, html-parsing, simple-html-dom

我使用 file_get_contents 抓取了一些网址和标题。现在我想编辑它们并显示在我的页面中。但我不认为这是可能的。

```
$html = file_get_html($gg_url);
// find all div tags with id=s
$ttt = $html->find('div.s'); 
```

结果是：

```
www.example.com and bla bla bla under that DIV 
```

但是那个网址是这样标记的`<cite>www.exaple.com</cite>`。

我所需要的只是结果中的 url，但整个内容（url + 其他文本）都在一个变量中。有没有办法得到那个网址？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:25:15.550

```
$html = file_get_html($gg_url);
$ttt = $html->find('cite')->innertext;
echo $ttt; 
```

# python - Python中用于提取数据的正则表达式

> ID：10461323
> 
> 赞同：0
> 
> 时间：2012-05-05T11:19:05.460
> 
> 标签：python, regex

我正在尝试从网页中提取一些联系方式，并使用 Beautiful Soup 成功提取了一些信息。

但我无法提取一些数据，因为它没有正确构造（html）。所以我使用正则表达式。但是最后几个小时我正在尝试学习正则表达式，我有点震惊。

```
 InstanceBeginEditable name="additional_content" 
<h1>Contact details</h1>
<h2>Diploma coordinator</h2>

                                Mr. Matthew Schultz<br />
<br />
                                    610 Maryhill Drive<br />

                                Green Bay<br />
                                WI<br />
                                United States<br />
                                54303<br />
Contact by email</a><br />
                                Phone (1) 920 429 6158          
                                <hr /><br /> 
```

我需要提取，

马修·舒尔茨先生

610 Maryhill Drive 绿湾 WI 美国 54303

和电话号码。我尝试了从谷歌搜索中找到的东西。但是没有一个有效（因为我的知识很少，但这是我最后的努力。

```
con = ""
for content in contactContent.contents:
    con += str(content)

print con

address = re.search("Mr.\b[a-zA-Z]", con)

print str(address) 
```

有时我没有。

请帮助伙计们！

PS。内容在网络上免费提供 没有侵犯版权。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:58:05.143

好的，使用您的数据，**编辑**将解析例程嵌入函数中

```
def parse_list(source):
    lines = ''.join( source.split('\n') )
    lines = lines[ lines.find('</h2>')+6 : lines.find('Contact by email') ]                   
    lines = [ line.strip()
              for line in lines.split('<br />')
              if line.strip() != '']
    return lines

# Parse the page and retrieve contact string from the relevant <div>
con = ''' InstanceBeginEditable name="additional_content" 
<h1>Contact details</h1>
<h2>Diploma coordinator</h2>

                                Mr. Matthew Schultz<br />
<br />
                                    610 Maryhill Drive<br />

                                Green Bay<br />
                                WI<br />
                                United States<br />
                                54303<br />
Contact by email</a><br />
                                Phone (1) 920 429 6158          
                                <hr /><br />'''

# Extract details and print to console

details = parse_list(con)
print details 
```

这将输出一个列表：

```
['Mr. Matthew Schultz', '610 Maryhill Drive', 'Green Bay', 'WI', 'United States', '54303'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:16:08.310

你问过用正则表达式来做这件事。假设您为每个 div 获得了一个包含此数据的新多行字符串，您可以像这样提取数据：

```
import re

m = re.search('</h2>\s+(.*?)<br />\s+<br />\s+(.*?)<br />\s+(.*?)<br />\s+(.*?)<br />\s+(.*?)<br />\s+(.*?)<br />', con )
if m:
    print m.groups() 
```

输出：

```
('Mr. Matthew Schultz', '610 Maryhill Drive', 'Green Bay', 'WI', 'United States', '54303') 
```

我看到你已经开始使用正则表达式了。正则表达式的关键是记住您通常要定义一个数字或一组数字，然后是一个数量表达式，告诉它​​您希望表达式重复多少次。在这种情况下，我们`</h2>`以 which 开始，然后`\s+`告诉正则表达式引擎我们需要一个或多个空格字符（包括换行符）。这里唯一的其他细微差别是下一个表达式，它`(.*?)`是一个惰性捕获所有 - 它会抓取任何东西，直到它遇到下一个表达式，即下一个`<br />`。

编辑：此外，您应该能够利用名称之后的所有地址信息都采用统一格式这一事实来清理正则表达式。我玩了一点，但没有得到它，所以如果你想改进它，那将是一种方法。

# c++ - 从 jpeg 内存缓冲区创建 HBITMAP？

> ID：10461324
> 
> 赞同：2
> 
> 时间：2012-05-05T11:19:07.553
> 
> 标签：c++, windows, winapi, mfc, hbitmap

我想从 JPEG 格式的字节数组创建 HBITMAP。

我已经搜索过，但我只能从位图文件创建它

```
HBITMAP hbm = (HBITMAP)LoadImage(NULL,"fileName",IMAGE_BITMAP,0,0,LR_LOADFROMFILE|LR_CREATEDIBSECTION); 
```

有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T11:35:42.370

只需使用 GDIplus。它支持加载 JPEG，其他一些东西感觉更合乎逻辑

[http://msdn.microsoft.com/en-us/library/ms533830%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms533830%28v=vs.85%29.aspx)

使用“位图”类。当您在缓冲区中有 jpeg 时，您需要通过流读取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:36:17.843

MFC 提供了一个封装位图对象的[`CImage`类。](http://msdn.microsoft.com/en-us/library/bwea7by5.aspx)它提供了以多种格式加载和保存图像的便捷方法，包括 JPEG、GIF、BMP 和 PNG。

因此，首要任务是获取`CImage`代表您的`HBITMAP`. 您可以通过调用[`Attach`方法](http://msdn.microsoft.com/en-us/library/b15ctcha.aspx)并传递句柄来做到这一点。

但在这种情况下，您似乎可以完全跳过它，只需让`CImage`对象直接从文件中加载您的图像。使用该[`Load`方法](http://msdn.microsoft.com/en-us/library/tf4bytf8.aspx)。

一旦你有了一个`CImage`代表你的图像的对象，只需调用该`Save`方法并使用适当的扩展名指定所需的文件名。根据文档：

> 如果`guidFileType`不包含该参数，则将使用文件名的文件扩展名来确定图像格式。如果没有提供扩展名，图像将以 BMP 格式保存。

**示例代码：**

```
CImage img;
img.Load(TEXT("fileName.bmp"));  // load a bitmap (BMP)
img.Save(TEXT("fileName.jpg"));  // and save as a JPEG (JPG) 
```

您也可以反转此模式，使用`Load`加载 JPEG 文件的`Save`方法和保存 BMP 文件的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-09T21:34:45.967

我找到了以下代码 // [http://katahiromz.web.fc2.com/win32/loadjpeg.html](http://katahiromz.web.fc2.com/win32/loadjpeg.html)

红色和蓝色被交换了，所以这里是一个修正了颜色的修正版本。它使用 jpeglib，所以你必须先编译它。如果你只需要转换一个缓冲区，那么你可以跳过加载文件的那一行——转换的细节应该是一样的。

```
extern "C" {         
#include <jpeglib.h> 
#include <jerror.h>
}
#pragma comment(lib, "jpeg.lib")
HBITMAP LoadJpegAsBitmap(const std::string & filename)
{ 

    struct jpeg_decompress_struct decomp{};
    struct jpeg_error_mgr jerror{};
    BITMAPINFO bi = {};
    LPBYTE lpBuf, pb = NULL;
    HBITMAP hbm{};
    JSAMPARRAY buffer{};
    INT row = 0;

    decomp.err = jpeg_std_error(&jerror);
    jpeg_create_decompress(&decomp);
    FILE* file = fopen(filename.c_str(), "rb");
    if (file == nullptr)
    {   
        return NULL;
    }

    jpeg_stdio_src(&decomp, file);

    jpeg_read_header(&decomp, TRUE); // read jpeg file header
    jpeg_start_decompress(&decomp);  // decompress the file

    row = ((decomp.output_width * 3 + 3) & ~3);
    buffer = (*decomp.mem->alloc_sarray)((j_common_ptr)&decomp, JPOOL_IMAGE,
        row, 1);

    ZeroMemory(&bi.bmiHeader, sizeof(BITMAPINFOHEADER));
    bi.bmiHeader.biSize = sizeof(BITMAPINFOHEADER);
    bi.bmiHeader.biWidth = decomp.output_width;
    bi.bmiHeader.biHeight = decomp.output_height;
    bi.bmiHeader.biPlanes = 1;
    bi.bmiHeader.biBitCount = 24;
    bi.bmiHeader.biCompression = BI_RGB;
    bi.bmiHeader.biSizeImage = row * decomp.output_height;

    hbm = CreateDIBSection(NULL, &bi, DIB_RGB_COLORS, (void**)&lpBuf, NULL, 0);
    if (hbm == NULL)
    {
        jpeg_destroy_decompress(&decomp);
        fclose(file);
        return NULL;
    }

    pb = lpBuf + row * decomp.output_height;
    while (decomp.output_scanline < decomp.output_height)
    {
        pb -= row;
        jpeg_read_scanlines(&decomp, buffer, 1);

        if (decomp.out_color_components == 1)
        {
            UINT i;
            LPBYTE p = (LPBYTE)buffer[0];
            for (i = 0; i < decomp.output_width; i++)
            {    
                pb[3 * i + 0] = p[i];
                pb[3 * i + 1] = p[i];
                pb[3 * i + 2] = p[i];  
            }
        }
        else if (decomp.out_color_components == 3)
        {
            // There was talk on Internet about one being RGB and another BGR. 
            // If colors appear swapped, then swap the bytes, and update this comment.
            //CopyMemory(pb, buffer[0], row);

            // Updated color correction
            UINT i;
            LPBYTE p = (LPBYTE)buffer[0];
            for (i = 0; i < row; i += 3)
            {
                pb[i + 0] = p[i + 2]; // Blue   
                pb[i + 1] = p[i + 1]; // Green  
                pb[i +2] = p[i + 0];  // Red    
            }
        }
        else
        {
            jpeg_destroy_decompress(&decomp);
            fclose(file);
            DeleteObject(hbm);
            return NULL;
        }
    }

    SetDIBits(NULL, hbm, 0, decomp.output_height, lpBuf, &bi, DIB_RGB_COLORS);

    jpeg_finish_decompress(&decomp);
    jpeg_destroy_decompress(&decomp);

    fclose(file);

    return hbm;
} 
```

# iphone - 是否可以在没有 iPhone 签名的情况下以编程方式发送电子邮件？

> ID：10461325
> 
> 赞同：1
> 
> 时间：2012-05-05T11:19:11.497
> 
> 标签：iphone, email, mfmailcomposeviewcontroller

我正在创建一个应用程序，该应用程序将启动邮件编写器以发送电子邮件。有可能不显示签名吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T15:36:03.787

不，签名保留。

但是，您可以实现自己的电子邮件编辑并通过您自己的后端发送。虽然听起来不太引人注目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T14:18:30.883

不，您不能，它是您无法覆盖的操作系统系统设置的一部分。

# php - 500 内部服务器错误 php - ajax

> ID：10461326
> 
> 赞同：0
> 
> 时间：2012-05-05T11:19:15.510
> 
> 标签：php, ajax

当我想在服务器上测试我的文件时，我收到了一个错误（500 内部服务器错误）。mamp（本地）一切正常，我没有收到任何错误。这是有错误的代码。

```
<?php
    include_once('../classes/places.class.php');
try
{
    $oPlace = new Places();
    $oPlace->Street = $_POST['place'];
    $oPlace->HouseNumber = $_POST['number'];
    $oPlace->Name = $_POST['Name'];
    if($oPlace->placeAvailable())
    {
        $feedback['status'] = "success";
        $feedback['available'] = "yes";
        $feedback["message"] = "Go ahead, street is available";
    }   
    else
    {
        $feedback['status'] = "success";
        $feedback['available'] = "no";
        $feedback["message"] ="De zaak " . "'" . $_POST['name'] . "'". " is reeds op dit adres gevestigd." ;;
    }
}
catch(exception $e)
{
    $feedback['status'] = "error";
    $feedback["message"] =$e->getMessage();

}
header('Content-type: application/json');
echo json_encode($feedback);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:28:56.543

它是什么版本的 PHP？

如果在 5.2 之前，您需要安装 JSON PECL 包。

如果是 5.20 或更高版本，您必须检查 PHP 是否在没有该`--disable-json`选项的情况下编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:24:01.347

```
$feedback["message"] ="De zaak " . "'" . $_POST['name'] . "'". " is reeds op dit adres gevestigd." ;; 
```

应该更像

```
$feedback["message"] ="De zaak " . "'" . $_POST['name'] . "'". " is reeds op dit adres gevestigd." ; 
```

添加过多的分号有时会引发错误

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T11:29:39.570

```
<?php
include_once('../classes/places.class.php');
/* This if for debugging */
foreach ($_GET as $k => $v) $_POST[$k] = $v;
// Access in your browser: pathToFilePHPCalled.php?place=SomePlace&number=14&Name=MyName
$feedback['data'] = $_POST;
/* This if for debugging */

$feedback = array();
try
{
    $oPlace = new Places();
    $oPlace->Street = $_POST['place'];
    $oPlace->HouseNumber = $_POST['number'];
    $oPlace->Name = $_POST['Name']; // Make sure this is $_POST['Name'] and not $_POST['name'] this might be your error
    if($oPlace->placeAvailable())
    {
        $feedback['status'] = "success";
        $feedback['available'] = "yes";
        $feedback["message"] = "Go ahead, street is available";
    }   
    else
    {
        $feedback['status'] = "success";
        $feedback['available'] = "no";
        $feedback["message"] ="De zaak " . "'" . $_POST['name'] . "'". " is reeds op dit adres gevestigd." ;
    }
}
catch(Exception $e)
{
    $feedback['status'] = "error";
    $feedback["message"] =$e->getMessage();

}
header('Content-type: application/json');
echo json_encode($feedback);
?> 
```

# c++ - C(99) 和 C++(11) 有什么不兼容的区别？

> ID：10461331
> 
> 赞同：56
> 
> 时间：2012-05-05T11:19:44.273
> 
> 标签：c++, c, c++11, c99

[这个问题是由对Herb Sutter](http://herbsutter.com/2012/05/03/reader-qa-what-about-vc-and-c99/)的帖子的回复引发的，他在帖子中解释了 MS 决定不支持/制作 C99 编译器，而只是使用 C++(11) 标准中的 C(99) 功能。

一位[评论者回答](http://herbsutter.com/2012/05/03/reader-qa-what-about-vc-and-c99/#comment-5446)：

> (...) C 很重要，至少值得关注。
> 
> 有很多现有的代码是有效的 C 但不是有效的 C++。该代码不太可能被重写（...）

因为我只用 MS C++ 编程，所以我真的不太了解“纯”C，即我没有现成的图片了解我使用的 C++ 语言的哪些细节不在 C(99) 中，而且我几乎没有一些 C99 代码在 C++ 编译器中无法按原样工作的线索。

请注意，我知道 C99 only`restrict`关键字对我来说*似乎*具有非常狭窄的应用和可变长度数组（我不确定它们的广泛性或重要性）。

此外，我对是否存在任何重要的语义差异或陷阱非常感兴趣，即 C(99) 代码将在 C++(11) 下*编译，但使用 C++ 编译器的操作与使用 C 编译器不同。*

* * *

快速链接：来自答案的外部资源：

*   [维基百科页面](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C++)
*   [David R. Tribble 的比较](http://david.tribble.com/text/cdiffs.htm)（从 2001 年开始）
*   C++11 标准：[http](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf) ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf （C.1 节）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-05T12:49:24.400

有一堆不兼容问题已经存在了很长时间（C90 或更早版本），以及 C99 和 C11 中的一堆非常好的特性。这些都在我的脑海中。

```
// Valid C
int *array = malloc(sizeof(*array) * n);

// Valid C and valid C++, extra typing, it's always extra typing...
int *array = (int *) malloc(sizeof(*array) * n);

// Valid C++
int *array = new int[n]; 
```

# C99 很好，所有的 C 程序员都应该使用它

C99 中的新特性非常适合一般编程。VLA 并且`restrict`（在我看来）不是针对一般用途的，而是主要用于将 FORTRAN 和数值程序员带到 C 中（尽管`restrict`有助于自动矢量化器）。由于如果您在文件的顶部，任何使用的符合标准的程序`restrict`仍然会以完全相同的方式工作（但可能不会那么快）`#define restrict`，这没什么大不了的。VLA 似乎在野外非常罕见。

**灵活的数组成员可以很好。** 请注意，这些与可变长度数组不同！多年来人们一直在使用这个技巧，但官方支持意味着更少的输入，它还允许我们在编译时创建常量。（旧的方法是有一个大小为 1 的数组，但是计算分配大小真的很麻烦。）

```
struct lenstr {
    unsigned length;
    char data[];
};
// compile time constant
const struct lenstr hello = { 12, "hello, world" }; 
```

**指定的初始化器。** 节省大量打字。

```
struct my_struct { int a; char *b; int c; const char *d; };
struct my_struct x = {
    .a = 15,
    .d = "hello"
    // implicitly sets b = NULL and c = 0
};
int hex_digits[256] = { ['0'] = 0, ['1'] = 1, ['2'] = 2, /* etc */ ['f'] = 15 }; 
```

**`inline`关键字的**行为不同，您可以通过向该单元添加 extern 声明来选择哪个翻译单元获得内联声明的函数的非内联版本。

**复合字面量。**

```
struct point { float x; float y; };
struct point xy_from_polar(float r, float angle)
{
    return (struct point) { cosf(angle) * r, sinf(angle) * r };
} 
```

~~**该`snprintf`函数**可能是我在 C 语言中最有用的 10 个库函数。它不仅在 C++ 中缺失，而且 MSVC 运行时仅提供了一个名为 的函数`_snprintf`，不能保证将 NUL 终止符添加到字符串中。~~（`snprintf`在 C++11 中，但在 MSVC C 运行时中仍然明显不存在。）

**匿名结构和~~联合~~**（C11，但 GCC 永远扩展）（匿名联合显然在 C++03 中，在 C 模式下不支持 MSVC）：

```
struct my_value {
    int type;
    union {
        int as_int;
        double as_double;
    }; // no field name!
}; 
```

如您所见，其中许多功能只是为您节省大量输入（复合文字），或使程序更易于调试（灵活的数组成员），更容易避免错误（指定初始化程序/忘记初始化结构字段）。这些都不是剧烈的变化。

对于语义差异，我确信别名规则是不同的，但是现在大多数编译器都足够宽容，我不确定您将如何构建一个测试用例来演示。C 和 C++ 之间的区别是每个人都能找到的旧`sizeof('a')`表达式，对于 C++，它始终为 1，但在 32 位 C 系统上通常为 4。但没人关心到底`sizeof('a')`是什么。但是，C99 标准中有一些保证将现有实践编入法典。

采取以下代码。它使用一个常用技巧在 C 中定义联合类型，而不会浪费额外的存储空间。我*认为*这是语义上有效的 C99，我*认为*这在语义上是可疑的 C++，但我可能错了。

```
#define TAG_FUNKY_TOWN 5
struct object { int tag; };
struct funky_town { int tag; char *string; int i; };
void my_function(void)
{
    struct object *p = other_function();
    if (p->tag == TAG_FUNKY_TOWN) {
        struct funky_town *ft = (struct funky_town *) p;
        puts(ft->string);
    }
} 
```

**不过，这很可惜。** MSVC 代码生成器很好，可惜没有 C99 前端。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-05T12:56:24.290

如果您从 C 和 C++ 的公共子集开始，有时称为干净 C（不完全是 C90），则必须考虑 3 种类型的不兼容性：

1.  **使合法 C 变为非法 C++ 的其他 C++ 功能**

    这方面的示例是 C++ 关键字，可用作 C 中的标识符或在 C 中隐含但需要在 C++ 中显式转换的转换。

    这可能是微软仍然发布 C 前端的主要原因：否则，必须重写不能编译为 C++ 的遗留代码。

2.  **不属于 C++ 的其他 C 功能**

    在 C++ 分叉之后，C 语言并没有停止发展。一些示例是可变长度数组、指定的初始值设定项和`restrict`. 这些功能可能非常方便，但不是任何 C++ 标准的一部分，其中一些可能永远不会进入。

3.  **在 C 和 C++ 中都可用但具有不同语义的功能**

    一个例子是`const`对象或`inline`函数的链接。

[可以在此处找到](http://david.tribble.com/text/cdiffs.htm)C99 和 C++98 之间的不兼容列表（Mat 已经提到过）。

尽管 C++11 和 C11 在某些方面更加接近（C++ 中现在可以使用可变参数宏，可变长度数组现在是可选的 C 语言功能），但不兼容的列表也在增加（例如 C 中的泛型选择和`auto`C++ 中的类型说明符）。

顺便说一句，虽然微软对放弃 C 的决定（这不是最近的决定）采取了一些态度，但据我所知，开源社区中没有人真正采取措施对此采取措施：这将是很可能通过 C-to-C++ 编译器提供现代 C 的许多功能，特别是如果您认为其中[一些功能实现起来很简单](http://herbsutter.com/2012/05/03/reader-qa-what-about-vc-and-c99/#comment-5446)。这实际上现在可以使用支持 C99 的 Comeau C/C++。

然而，这并不是一个真正紧迫的问题：就我个人而言，我对在 Windows 上使用 GCC 和 Clang 非常满意，而且还有一些专有的 MSVC 替代方案，例如 Pelles C 或 Intel 的编译器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T15:05:15.997

在 C++ 中，设置联合的一个成员并访问不同成员的值是未定义的行为，而在 C99 中它不是未定义的。

[维基百科页面](http://en.wikipedia.org/wiki/Compatibility_of_C_and_C%2B%2B)上列出了许多其他差异。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-06T14:36:03.240

我将提到[C++11 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3376.pdf)的“C.1 C++ 和 ISO C” 。该文件对每一个差异及其对发展的影响进行了逐一阐述。

# java - JodConverter 抛出 NoClassDefFoundError

> ID：10461338
> 
> 赞同：2
> 
> 时间：2012-05-05T11:20:01.467
> 
> 标签：java, noclassdeffounderror, jodconverter

我有 JODConverter 问题，NoClassDefFoundError .. 我使用 netbeans 7.1.2 ， jdk 1.7 ， jodconverter2.2.2.jar 和 openoffice 3.3.0 .. 我正在构建一个 java 企业应用程序，在 ejb 部分我我正在添加 jodconverter2.2.2.jar 库（右键单击 ejb 项目、属性、库添加 jar/文件夹）。但是当我运行应用程序并且我想转换一个 .doc 文件时：

```
javax.ejb.EJBException: message-driven bean method public abstract void javax.jms.MessageListener.onMessage(javax.jms.Message) system exception
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1134)
at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:81)
at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:171)
at $Proxy271.onMessage(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:260)
at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:114)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.NoClassDefFoundError: com/sun/star/lang/XEventListener
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:756)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:756)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at managers.ElaboraDisp.converteInPdf(ElaboraDisp.java:145)
at managers.ElaboraDisp.onMessage(ElaboraDisp.java:100)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1099)
... 7 more
Caused by: java.lang.ClassNotFoundException: com.sun.star.lang.XEventListener
at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)
at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:696)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 42 more

Avvertenza: MDB00037: [UploadMultiplo:ElaboraDisp]: Message-driven bean invocation exception: [javax.ejb.EJBException]
Avvertenza: javax.ejb.EJBException
javax.ejb.EJBException
at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
at com.sun.ejb.containers.MessageBeanContainer.afterMessageDeliveryInternal(MessageBeanContainer.java:1211)
at com.sun.ejb.containers.MessageBeanContainer.afterMessageDelivery(MessageBeanContainer.java:1186)
at com.sun.ejb.containers.MessageBeanListenerImpl.afterMessageDelivery(MessageBeanListenerImpl.java:86)
at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:143)
at $Proxy271.afterDelivery(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:328)
at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:114)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.NoClassDefFoundError: com/sun/star/lang/XEventListener
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:756)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:791)
at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:756)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
at java.lang.ClassLoader.loadClass(ClassLoader.java:410)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at managers.ElaboraDisp.converteInPdf(ElaboraDisp.java:145)
at managers.ElaboraDisp.onMessage(ElaboraDisp.java:100)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1099)
at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:81)
at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:171)
at $Proxy271.onMessage(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:260)
... 3 more
Caused by: java.lang.ClassNotFoundException: com.sun.star.lang.XEventListener
at com.sun.enterprise.loader.ASURLClassLoader.findClassData(ASURLClassLoader.java:808)
at com.sun.enterprise.loader.ASURLClassLoader.findClass(ASURLClassLoader.java:696)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 42 more

Avvertenza: MQJMSRA_MR2001: run:Caught Exception from onMessage():Redelivering:
javax.ejb.EJBException: message-driven bean method public abstract void javax.jms.MessageListener.onMessage(javax.jms.Message) system exception
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1134)
at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:81)
at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:171)
at $Proxy271.onMessage(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:260)
at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:114)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.NoClassDefFoundError: com/artofsolving/jodconverter/openoffice/connection/SocketOpenOfficeConnection
at managers.ElaboraDisp.converteInPdf(ElaboraDisp.java:145)
at managers.ElaboraDisp.onMessage(ElaboraDisp.java:100)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1099)
... 7 more

Informazioni: MQJMSRA_MR1101: run:Message returned & marked for routing to the DMQ
Avvertenza: MDB00037: [UploadMultiplo:ElaboraDisp]: Message-driven bean invocation    exception: [javax.ejb.EJBException]
Avvertenza: javax.ejb.EJBException
javax.ejb.EJBException
at com.sun.ejb.containers.BaseContainer.processSystemException(BaseContainer.java:5215)
at com.sun.ejb.containers.BaseContainer.completeNewTx(BaseContainer.java:5113)
at com.sun.ejb.containers.BaseContainer.postInvokeTx(BaseContainer.java:4901)
at com.sun.ejb.containers.MessageBeanContainer.afterMessageDeliveryInternal(MessageBeanContainer.java:1211)
at com.sun.ejb.containers.MessageBeanContainer.afterMessageDelivery(MessageBeanContainer.java:1186)
at com.sun.ejb.containers.MessageBeanListenerImpl.afterMessageDelivery(MessageBeanListenerImpl.java:86)
at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:143)
at $Proxy271.afterDelivery(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:328)
at com.sun.enterprise.connectors.work.OneWork.doWork(OneWork.java:114)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.performWork(ThreadPoolImpl.java:497)
at com.sun.corba.ee.impl.orbutil.threadpool.ThreadPoolImpl$WorkerThread.run(ThreadPoolImpl.java:540)
Caused by: java.lang.NoClassDefFoundError: com/artofsolving/jodconverter/openoffice/connection/SocketOpenOfficeConnection
at managers.ElaboraDisp.converteInPdf(ElaboraDisp.java:145)
at managers.ElaboraDisp.onMessage(ElaboraDisp.java:100)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:49)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
at com.sun.ejb.containers.MessageBeanContainer.deliverMessage(MessageBeanContainer.java:1099)
at com.sun.ejb.containers.MessageBeanListenerImpl.deliverMessage(MessageBeanListenerImpl.java:81)
at com.sun.enterprise.connectors.inbound.MessageEndpointInvocationHandler.invoke(MessageEndpointInvocationHandler.java:171)
at $Proxy271.onMessage(Unknown Source)
at com.sun.messaging.jms.ra.OnMessageRunner.run(OnMessageRunner.java:260)
... 3 more 
```

转换的代码是标准的：

```
 File inputFile=new File("document.doc");
    File outputFile=new File("document.pdf");
    OpenOfficeConnection connection = new SocketOpenOfficeConnection(8100);
    connection.connect();

    // convert
    DocumentConverter converter = new OpenOfficeDocumentConverter(connection);
    converter.convert(inputFile, outputFile);

    // close the connection
    connection.disconnect(); 
```

进入终端：

```
soffice -headless -accept="socket,host=127.0.0.1,port=8100;urp;" -nofirststartwizard 
```

我不明白为什么我有例外:(

PS。进入战争部分，我在库中添加了一个文件夹“lib”（jodconverter2.2.2.jar）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:30:58.523

当在类路径中找不到类时，会引发 NoClassDefFoundError 异常。因此，如果您尝试在 ejb 中访问此类，则必须对其可用。

如果您在 .war 文件中添加了 lib 文件夹，则 ejb .jar 无法看到放置在 .war 文件下的 lib 文件夹。

您需要在 .ear 文件中创建 lib 文件夹，并在 application.xml 文件中指定库目录同时用于：您的 Web 应用程序 .war 和 ejb .jar。

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns="http://java.sun.com/xml/ns/javaee"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/application_6.xsd"
             version="6">
    <display-name>yourapp</display-name>
    <module>
        <ejb>yourapp-ejb.jar</ejb>
    </module>
    <module>
        <web>
            <web-uri>yourapp.war</web-uri>
            <context-root>/</context-root>
        </web>
    </module>
    <library-directory>lib</library-directory>
</application> 
```

此行`<library-directory>lib</library-directory>`指定您的 lib 目录在 .ear 存档中。您还需要从 .war 文件中删除 lib 文件夹。

# jquery - 为所有图像应用 PrettyPhoto

> ID：10461341
> 
> 赞同：0
> 
> 时间：2012-05-05T11:20:27.200
> 
> 标签：jquery, html, image, prettyphoto

我有一个 PrettyPhoto 附带的 HTML 模板，但我不知道 js/jquery。我想为我网站中的所有图像应用漂亮的照片。jquery-prettyphoto.js 包含在所有页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:28:43.413

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:27:59.320

您需要对图像应用任何类或 rel 属性。并且可能会在顶部添加类似下面的内容。

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
    $("a[rel^='prettyPhoto']").prettyPhoto();
  });
</script> 
```

如果您可以发布任何一页，那将更加清晰。

# iphone - iOS Draw Circle 是可点击的

> ID：10461348
> 
> 赞同：2
> 
> 时间：2012-05-05T11:22:03.393
> 
> 标签：iphone, geometry

我正在使用“CGContextAddEllipseInRect”方法画一个圆圈。之后，我想通过单击圆圈来处理一些事件。

没有得到任何方法。

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T03:48:23.573

我知道这个问题很老，但我还是想把我的两分钱扔在那里。正如建议的那样，我认为使用按钮要容易得多`Jennis`。但是，他的按钮不是很圆。

需要更改以使按钮变为圆形的属性是`.cornerRadius`。以下是使用 Jennis 的代码示例可以做到这一点的方法：

```
 UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.layer.backgroundColor = [UIColor colorWithWhite:0.2f alpha:.5f].CGColor;   
    button.frame = CGRectMake(x, y, width, height);
    button.layer.cornerRadius = 20; //key to rounded button
    [[self view] addSubview:button];
    [button addTarget:self action:@selector(yourEventTobeFired) forControlEvents:UIControlEventTouchUpInside]; 
```

以及此代码的结果输出：

![在此处输入图像描述](../Images/4999613c4a2fd60e0fdef21ba6a0ec9d.png)

这个按钮是可点击的，点击后会调用方法`yourEventTobeFired`

如果您拒绝使用按钮，那么我建议`gesture recognizer`您在自定义绘图中添加一个，因为我不相信您可以添加`action`一个按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:26:41.133

假设您在 UIView 中绘制这个圆圈，您可以创建自定义按钮并将其添加到您的视图中。

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
button.frame = CGRectMake(100, 100, 100, 30);
[yourView addSubView:button];
[button addTarget:self action:@selector(yourEventTobeFired) forControlEvents:UIControlEventTouchUpInside]; 
```

而已。

# c# - 直接打印asp.net报表查看器

> ID：10461349
> 
> 赞同：0
> 
> 时间：2012-05-05T11:22:09.790
> 
> 标签：c#, asp.net, visual-studio-2010, reportviewer

我在我的**网络应用程序**中使用 .rdlc 报告，将报告导出为 pdf 并打印效果很好，但现在我想自动打印报告（即点击打印按钮。）

```
Is it possible to print rdlc report automatically? 
```

请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:47:50.767

> 是否可以自动打印 rdlc 报告？

如果你可以在页面上呈现它，你可以使用 javascript window.print()，它打印当前窗口。因此，正如 sinni800 所说，在单独的页面上呈现报告。

~~像这样的东西，~~

在包含其他内容的页面上添加此按钮：

```
<a href="javascript:window.open('/print-content.html','_blank');">print report</a> 
```

打开窗口的第一个参数是带有报表查看器的页面，在该页面中，您可以在加载事件时开始打印，如下所示：

```
<body id="top" onload="window.print();">
    rendered report here
</body> 
```

~~但如果你问我最好坚持你目前的解决方案。~~

您可以将报告另存为 PDF 格式在磁盘上，使用 Javscript 打开它然后打印它，代码项目中有一个示例完全符合您的情况，正如我所了解的那样：

[http://www.codeproject.com/Tips/376300/Custom-Print-functionality-for-Microsoft-Report-Vi](http://www.codeproject.com/Tips/376300/Custom-Print-functionality-for-Microsoft-Report-Vi)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T12:46:00.147

实际上，当您在 Internet Explorer 中打开 rdlc 报告时，报告必须有一个按钮来执行该打印作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:16:06.303

如果您的目标是启用 Active-X 的浏览器（例如 IE），则以下解决方案应该可以工作：

```
<script language="javascript"> 
     function PrintReport() { 
         var viewerReference = $find("ReportViewer1");

         var stillonLoadState = viewerReference.get_isLoading();

         if (!stillonLoadState ) { 
             var reportArea = viewerReference .get_reportAreaContentType(); 
             if (reportArea == Microsoft.Reporting.WebFormsClient.ReportAreaContent.ReportPage) { 
                 $find("ReportViewer1").invokePrintDialog(); 
             } 
         } 
     } 
 </script> 
```

[http://blogs.msdn.com/b/selvar/archive/2011/04/09/invoking-the-print-dialog-for-report-viewer-2010-control-using-the-javascript-api.aspx](http://blogs.msdn.com/b/selvar/archive/2011/04/09/invoking-the-print-dialog-for-report-viewer-2010-control-using-the-javascript-api.aspx)

请注意，此解决方案不适用于不支持 Active-X 的浏览器

# objective-c - cocoa:按下按钮时，移动鼠标，不要拖动窗口

> ID：10461350
> 
> 赞同：0
> 
> 时间：2012-05-05T11:22:10.420
> 
> 标签：objective-c, macos, cocoa, osx-lion

按下按钮时，移动鼠标，不要拖动窗口。

按下按钮移动时，不要移动窗口

代码下载。[http://code.google.com/p/kacperwangbuttontab/downloads/detail?name=buttonTab.zip&can=2&q=#makechanges](http://code.google.com/p/kacperwangbuttontab/downloads/detail?name=buttonTab.zip&can=2&q=#makechanges)

按钮添加一个类**ButtonStyle**。按下鼠标改变背景图像。

```
-(void)mouseDown:(NSEvent *)theEvent{
            [self setImage:[NSImage imageNamed:@"closeDown.png"]];
} 
```

![在此处输入图像描述](../Images/683b85ac253d4428fa4fe0da45627ceb.png)

**这是拖动窗口的代码**

```
- (void)mouseDown:(NSEvent *)theEvent
{ 
    NSRect  windowFrame = [self frame];
    initialLocation = [NSEvent mouseLocation];

    initialLocation.x -= windowFrame.origin.x;
    initialLocation.y -= windowFrame.origin.y;   
}
- (void)mouseDragged:(NSEvent *)theEvent
{
    NSPoint currentLocation;
    NSPoint newOrigin;

    NSRect  screenFrame = [[NSScreen mainScreen] frame];
    NSRect  windowFrame = [self frame];

    currentLocation = [NSEvent mouseLocation];
    newOrigin.x = currentLocation.x - initialLocation.x;
    newOrigin.y = currentLocation.y - initialLocation.y;
    if( (newOrigin.y+windowFrame.size.height) > (screenFrame.origin.y+screenFrame.size.height) ){
        newOrigin.y=screenFrame.origin.y + (screenFrame.size.height-windowFrame.size.height);
    }
    [self setFrameOrigin:newOrigin];
} 
```

![在此处输入图像描述](../Images/4305ffdca241f0207150c59e903b57ef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:59:01.510

我仍然不确定您想要什么，但是如果您希望在单击并拖动按钮时不拖动窗口，请在 ButtonStyle 中的 mouseDown 方法中添加一行 [super mouseDown:theEvent];班级似乎做到了。

```
-(void)mouseDown:(NSEvent *)theEvent{
    switch (self.tag) {
        case 2:
            [self setImage:[NSImage imageNamed:@"closeDown.png"]];
            [super mouseDown:theEvent];
            break;
        default:
            break;
    }
} 
```

# .net-4.0 - MSDTC 在尝试与系统“ServerName”建立安全连接时遇到错误 (HR=0x80000171)

> ID：10461354
> 
> 赞同：5
> 
> 时间：2012-05-05T11:22:33.193
> 
> 标签：.net-4.0, transactions, sql-server-2008-r2, windows-server-2008-r2, msdtc

我有一个使用 Microsoft Data Transactions 的网站应用程序，它基于 .NET Framework 4.0 和用于数据库的 SQL Server 2008 R2 Express Edition，部署在虚拟服务器 Windows 2008 Server R2 上。数据库和 IIS 都在同一台服务器上。

问题是服务器事件日志中发生的错误如下：- MSDTC 在尝试与系统“ZEPHYR”建立安全连接时遇到错误 (HR=0x80000171)。Zephyr 是我的服务器的名称。

我已经完成了两个论坛问题中包含的几乎所有事情：- [http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/eb8835d9-5f5b-4df2-8c68-4a61d5e44d6b/](http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/eb8835d9-5f5b-4df2-8c68-4a61d5e44d6b/)
[http： //social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/13586ca7-f645-4ed7-96e8-ba03f66ef38b](http://social.msdn.microsoft.com/Forums/en-US/sqlgetstarted/thread/13586ca7-f645-4ed7-96e8-ba03f66ef38b)

一切正常，但是使用 SUBINACL 工具执行以下命令时：-

```
C:\Program Files (x86)\Windows Resource Kits\Tools>subinacl /service msdtc /grant="Network Service"=QSETIL
msdtc - OpenService Error : 5 Access is denied.

Elapsed Time: 00 00:00:00
Done:        1, Modified        0, Failed        1, Syntax errors        0
Last Done  : msdtc
Last Failed: msdtc - OpenService Error : 5 Access is denied.
subinacl /service msdtc /grant="Network Service"=QSETIL 
```

但是后来我使用以下 ICACLS 命令通过使用 ICACLS 命令来访问它：-

```
icacls c:\windows\system32\msdtc\msdtc.log /grant admin:(d,wdac) 
```

注意：“管理员”是我的服务器用户。但同样它并没有解决问题。通过以下命令访问 msdtc.log 文件的权限：-

```
{“icacls c:\windows\system32\msdtc\msdtc.log”} are as follows:-
C:\>icacls c:\windows\system32\msdtc\msdtc.log
c:\windows\system32\msdtc\msdtc.log NT AUTHORITY\NETWORK SERVICE:(F)
                                    ZEPHYR\Administrator:(D,WDAC)
                                    ZEPHYR\admin:(D,WDAC)
                                    BUILTIN\Administrators:(F)
                                    ZEPHYR\admin:(I)(F)
                                    NT AUTHORITY\SYSTEM:(I)(F)
                                    BUILTIN\Administrators:(I)(F)
                                    NT SERVICE\KtmRm:(I)(F)
                                    NT SERVICE\MSDTC:(I)(F)

Successfully processed 1 files; Failed processing 0 files 
```

据我所知，很少有论坛发布有关此类错误的问题。

我想问一下，我将如何解决这个问题，因为这个错误导致了瓶颈，并且无论在哪里实现，这些 .aspx 页面中的事务都不起作用。这个问题有什么解决方法吗？

# python - 如何从 EC2 实例导航到 S3 存储桶文件夹？

> ID：10461356
> 
> 赞同：2
> 
> 时间：2012-05-05T11:22:41.430
> 
> 标签：python, amazon-s3, amazon-ec2, amazon-web-services, boto

我想在我的 EC2 实例上安装一些 Python 模块。我有在 S3 存储桶上安装所需的文件。我还可以通过 Python boto 从我的 EC2 实例连接到 S3 存储桶，但我无法访问存储桶内容来获取我需要安装的源文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:17:11.123

以防万一您想通过 boto 获取 Python 中的文件，这是一个简单的示例：

[https://gist.github.com/1925584](https://gist.github.com/1925584)

如果您不喜欢以下链接：

```
import boto
import os

def download_keys(bucket_name, dst_dir):
    """
    Very simple example showing how to download all keys in a bucket.
    Assumes key names don't include path separators.  Also assumes that
    you don't have zillions of objects in the bucket.  If you have a lot
    you would want to get several download operations going in parallel.
    """
    s3 = boto.connect_s3()
    bucket = s3.lookup(bucket_name)
    for key in bucket:
        path = os.path.join(dst_dir, key.name)
        key.get_contents_to_filename(path) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T11:42:03.290

使用 s3cmd 工具 (http://s3tools.org/s3cmd) 可以下载/上传存储在存储桶中的文件。

# c - 带有“NULL”指针的转换说明符“p”的行为是什么？

> ID：10461360
> 
> 赞同：12
> 
> 时间：2012-05-05T11:23:03.023
> 
> 标签：c, null, printf

我想知道是否：

```
void *ptr = NULL;
printf("%p\n", ptr); 
```

总是会给出`(nil)`输出吗？

它依赖于标准库实现，还是 C99 标准规范？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T11:25:10.370

在我的系统上它会产生`(null)`，所以我猜它是定义的实现。更一般地说，`%p`打印的所有内容都是实现定义的：

> 7.21.6.1
> 
> 参数应该是一个指向 void 的指针。指针的值以实现定义的方式转换为打印字符序列。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T11:24:57.410

> 总是给（零）？

一点也不。在我的机器（带有 的 Mac `i686-apple-darwin11-llvm-gcc-4.2`）上打印`0x0`.

# php - 将 Joomla 与其他站点连接

> ID：10461362
> 
> 赞同：1
> 
> 时间：2012-05-05T11:23:16.767
> 
> 标签：php, session, cookies, joomla

我想使用 COOKIE 将我的 Joomla 站点与其他站点连接，这样当一些用户登录到我的站点时，他/她将通过检查 COOKIE/SESSION 自动访问其他站点的私人页面

这可能吗，可以通过一些现成的扩展来完成吗？或者如果有任何其他更好的方法来完成这个

请告诉我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:54:55.707

可以使用第三方 API

例如使用 [twittter] (http://www.matpal.com/2010/12/login-with-twitter-api-in-php.html) 登录

# java - 对 rowHeader 和数据进行排序的 RowHeader 样式表

> ID：10461373
> 
> 赞同：0
> 
> 时间：2012-05-05T11:25:05.517
> 
> 标签：java, swing

我最近通过这个例子实现了rowHeader Jtable：http: [//www.chka.de/swing/table/row-headers/JTable.html](http://www.chka.de/swing/table/row-headers/JTable.html)

现在一切都很好。但是，当我尝试使用此函数使数据可排序时：table.setAutoCreateRowSorter(true)，这就是它出错的地方。

rowHeader 的排序方式与表数据的排序方式不同。有没有人有解决这个问题的经验？数据和 rowHeader 必须一起排序！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:45:12.620

[*或者，按照如何使用表格：将表格添加到容器*](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#show)中的建议，将表格标题添加到布局的不同部分。

# xml - 为什么 XML 元素未附加在文件末尾

> ID：10461379
> 
> 赞同：1
> 
> 时间：2012-05-05T11:25:57.577
> 
> 标签：xml, silverlight, windows-phone-7, isolatedstorage

我正在尝试将 Element 添加到 IsolatedStorage 中的 XML 文件中，但不是将其添加到根目录，而是复制文件并在末尾添加：

```
<?xml version="1.0" encoding="utf-8"?>
<root>
    <lampe id="1" nom="lampe1" content="Tables" header="Lampes de la cuisine" adresse="A1" />
    <lampe id="2" nom="lampe2" content="Porte et garage" header="Lampe du jardin" adresse="C3" />
</root><?xml version="1.0" encoding="utf-8"?>
<root>
    <lampe id="1" nom="lampe1" content="Tables" header="Lampes de la cuisine" adresse="A1" />
    <lampe id="2" nom="lampe2" content="Porte et garage" header="Lampe du jardin" adresse="C3" />
    <child attr="1">data1</child>
</root> 
```

这是我正在使用的代码：

```
_xdoc = new XDocument();

using (var store = IsolatedStorageFile.GetUserStoreForApplication())
{
    using (IsolatedStorageFileStream isoStore = new IsolatedStorageFileStream("lampes.xml", FileMode.Open, store))
    {
        _xdoc = XDocument.Load(isoStore);
        int nextNumber = _xdoc.Element("root").Elements("lampe").Count() + 1;

        XElement newChild = new XElement("lampe", "data" + nextNumber);
        newChild.Add(new XAttribute("attr", nextNumber));
        _xdoc.Element("root").Add(newChild);

        _xdoc.Save(isoStore);
    }
} 
```

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:43:24.367

读取和写入同一个文件不是一个好主意。您的 XML*构造*正确，只是*编写*不正确。

一种可行的方法是将文件写入不同的位置（例如），使用的API`"lampe_tmp.xml"`关闭并删除原始文件，然后使用API 复制到。`"lampe.xml"`[`IsolatedStorageFile`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.aspx)[`DeleteFile`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.deletefile.aspx)`"lampe_tmp.xml"``"lampe.xml"`[`MoveFile`](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.movefile.aspx)

```
using (IsolatedStorageFileStream isoStore = new IsolatedStorageFileStream("lampes_tmp.xml", FileMode.Open, store)) {
    // the code from your post that modifies XML goes here...
}
IsolatedStorageFile.DeleteFile("lampes.xml");
IsolatedStorageFile.MoveFile("lampes_tmp.xml", "lampes.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:34:23.840

您正在写入您从中读取的同一流。当您开始写入时，文件位置将位于文件末尾，因此它将附加到文件中。

要么在写入之前重置流的位置，要么关闭流并打开一个新的流进行写入。

# java - 数组逻辑错误

> ID：10461381
> 
> 赞同：-2
> 
> 时间：2012-05-05T11:26:27.547
> 
> 标签：java, arrays

我编写了以下代码来解决问题，但它不起作用。问题的链接在[**这里**](http://codingbat.com/prob/p134022)。

```
 public boolean linearIn(int[] outer, int[] inner) {

    boolean result = false;

        if(inner.length == 0)
            return true;

        index: for(int x: inner) {
                    for(int y: outer) {
                        if(x==y) {
                            result = true;
                            break;
                        }
                        else {
                            result = false;
                            break index;
                        }
                    }
                }
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T11:30:36.570

问题出在 else 部分。***因为如果只有一次比较失败***，您不能断定该元素不在内部数组中：

```
if(x==y) {
 result = true;  // ele present.
 break;
} else { 
 result = false; // can't conclude ele is absent..you might find it later.
 break index;
} 
```

要解决此问题，您可以这样做：

```
public boolean linearIn(int[] outer, int[] inner) {

        for(int x: inner) {
                // assume x is absent.
                boolean result = false;
                for(int y: outer) {
                        // x found in outer.
                        if(x==y) {
                                // make result positive.
                                result = true;
                                // no need to look any further.
                                break;
                        }
                }
                // at this point not all elements of inner are 
                // tested for presence in outer. But one missing ele
                // would mean we return false.
                if(result == false) return false;
        }
        // all ele of inner are present in outer..return true.
        return true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:39:55.233

如果复杂度应该是 O(n)，假设代码：

```
public boolean linearIn (int[] outer, int[] inner) {

 int in=0;
    for(int i :outer){
        if(in==inner.length) return true;
        if(inner[in]==i)
            in++;}
    if(in==inner.length)return true;
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:37:11.710

您必须制定一个 O(n) 解决方案，您的解决方案是 O(n ² )。你只需要三行（好吧，有点作弊）：

```
int j = 0;
for (int in : inner) while (outer[j] != in) if (++j == outer.length) return false;
return true; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:01:43.003

这个想法是在外部循环并在外部循环内部，如果在你看到它违反规则的方式上，如果最后循环遍历所有数组的内部索引返回 true，则立即返回 false，否则返回 false。

```
public boolean linearIn(int[] outer, int[] inner) {
    int i, j;
    // loop over the outer
    for(i = 0, j =0; i < outer.length && j < inner.length; i++) {
       // move to the last same value on the outer
       while(i < outer.length-1 && outer[i] == outer[i+1]) {
           i++;
       }
       // move to the last same value on the inner
       while(j < inner.length-1 && inner[j] == inner[j+1]) {
           j++;
       }
       // immediate false
       if(inner[j] < outer[i]) {
           return false;
       }
       // match - move to the next inner
       if(inner[j] == outer[i]) {
           j++;
       }
    }
    if(j == inner.length) {
        return true;
    }
    return false;
} 
```

# php - cakephp中同一页面上单个模型和控制器的多个ajax分页

> ID：10461386
> 
> 赞同：1
> 
> 时间：2012-05-05T11:26:58.403
> 
> 标签：php, cakephp, cakephp-1.3, cakephp-1.2, pagination

我制作了一种方法，将使用 ui tab jquery 调用

```
function debate_view_commenttab_content(){
        $this->autoRender = false;  
        $this->layout=null;     
        if($this->RequestHandler->isAjax())
        {   

                if (!empty($this->passedArgs['debateId'])) {
                    $debateId=$this->passedArgs['debateId'];
                    $this->set('debateId',$debateId);
                    $this->DebatePost->recursive = 0;                   

                    if (!empty($this->passedArgs['greensideupdateId'])) {
                        $this->set('greensideupdateId', $this->passedArgs['greensideupdateId']);
                    }else{
                        $this->set('greensideupdateId', 'greensideupdateId');
                    }   
                    if (!empty($this->passedArgs['redsideupdateId'])) {
                        $this->set('redsideupdateId', $this->passedArgs['redsideupdateId']);
                    }else{
                        $this->set('redsideupdateId', 'redsideupdateId');
                    }   

                $arrfavdebatecomment=$this->get_infavour_records($debateId);                            
                $this->set('arrfavdebatecomment',$arrfavdebatecomment);                                 

                $arragndebatecomment=$this->get_against_records($debateId);                 
                $this->set('arragndebatecomment',$arragndebatecomment);                                 

                 if(!empty($this->passedArgs['paginatedrecord']) && $this->passedArgs['paginatedrecord']==1 && $this->passedArgs['greensideupdateId']=='greensideupdateId' ){

                        $this->render('/elements/debate_posts/append_page_record');

                }else if(!empty($this->passedArgs['paginatedrecord']) && $this->passedArgs['paginatedrecord']==1 && $this->passedArgs['redsideupdateId']=='redsideupdateId' ){

                        $this->render('/elements/debate_posts/append_page_record_against');

                }else{

                    $this->render('/elements/debate_posts/commnts_tab_content');        
                }     

                }
        }
    } 
```

现在通过上述方法，我调用了两个函数，如下所示：

```
function get_infavour_records($debateId=Null){

        $this->DebateComment->recursive = 0;                                                                
        $favconditions = array('DebateComment.debate_id'=>$debateId,'DebateComment.debate_type'=>'in favour','DebateComment.status'=>'Active');
        $this->paginate['DebateComment'] = array(
            'limit' => 1,//Configure::read('CommentSetting.show_no_default_comments'),                  
            'recursive'=>-1
            );
        $arrfavdebatecomment=$this->paginate('DebateComment',$favconditions);   

        $this->helpers['Paginator'] = array('ajax' => 'Ajax');
        return $arrfavdebatecomment;

    }

      function get_against_records($debateId=Null){
            $this->DebateComment->recursive = 0;                                                                
            $agnconditions = array('DebateComment.debate_id'=>$debateId,'DebateComment.debate_type'=>'against','DebateComment.status'=>'Active');

                $this->paginate['DebateComment'] = array(
                'limit' => Configure::read('CommentSetting.show_no_default_comments'),
                'recursive'=>-1
                );                  
                $arragndebatecomment=$this->paginate('DebateComment',$agnconditions);
                $this->helpers['Paginator'] = array('ajax' => 'Ajax');  
                return  $arragndebatecomment;
    } 
```

现在在 append_page_record.ctp 的视图方面我写过：

```
<?php       $this->Paginator->options(array(
            'update' => '#'.$greensideupdateId,
            'evalScripts' => true,
            'before' => $this->Js->get('#spinner')->effect('fadeIn', array('buffer' => false)),
            'complete' => $this->Js->get('#spinner')->effect('fadeOut', array('buffer' => false)),
            'url' => array('controller' => 'debate_posts','action'=>'debate_view_commenttab_content','debateId'=>$debateId,'greensideupdateId' => $greensideupdateId,'paginatedrecord' => 1),
        ));

        echo '<div class="members_prew_next_area cf"><div class="pagination_area">'.$this->Paginator->first('first').$this->Paginator->prev('<<', array('escape' => false), null, array('class'=>'disabled','escape' => false)).$this->Paginator->numbers(array('before'=>'','after'=>'','model'=>'','modulus'=>'','separator'=>'')).$this->Paginator->next( '>>', array('escape' => false), null, array('class' => 'disabled','escape' => false)).$this->Paginator->last('last');
        echo $js->writeBuffer();
        echo ' </div></div>';

              if($arrfavdebatecomment){          
                echo '<div class="clear"><ul class="cf">';
                $i = 0;                     
                foreach ($arrfavdebatecomment as $favrecord):

                echo '<li>'.'<h2>'.($favrecord['DebateComment']['debate_comment_title']).'</h2></li>';

                endforeach;
                echo '</ul>';
                echo '</div>';
              }else{
                    __l("No record");
              }

        ?> 
```

并在 append_page_record_against.ctp

```
<?php   $this->Paginator->options(array(
            'update' => '#'.$redsideupdateId,
            'evalScripts' => true,
            'before' => $this->Js->get('#spinner')->effect('fadeIn', array('buffer' => false)),
            'complete' => $this->Js->get('#spinner')->effect('fadeOut', array('buffer' => false)),            
            'url' => array('controller' => 'debate_posts','action'=>'debate_view_commenttab_content','debateId'=>$debateId,'redsideupdateId' => $redsideupdateId,'paginatedrecord' => 1),
        ));

        echo '<div class="members_prew_next_area cf"><div class="pagination_area">'.$this->Paginator->first('first').$this->Paginator->prev('<<', array('escape' => false), null, array('class'=>'disabled','escape' => false)).$this->Paginator->numbers(array('before'=>'','after'=>'','model'=>'','modulus'=>'','separator'=>'')).$this->Paginator->next( '>>', array('escape' => false), null, array('class' => 'disabled','escape' => false)).$this->Paginator->last('last');
        echo $js->writeBuffer();
        echo ' </div></div>';

              if($arragndebatecomment){          
                echo '<div class="clear"><ul class="cf">';
                $i = 0;                     
                foreach ($arragndebatecomment as $record):

                echo '<li>'.'<h2>'.($record['DebateComment']['debate_comment_title']).'</h2></li>';

                endforeach;
                echo '</ul>';
                echo '</div>';
              }else{
                    __l("No record");
              }

        ?> 
```

现在，当我运行我的选项卡方法时，它为两个结果显示相同的分页栏两次，而不是不同的我不能使用分页和分页器在同一页面上显示分页吗？如果你能帮助我，请做必要的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T00:48:09.897

如果我没记错的话，当您对模型进行分页时，它会将默认值/选项/设置保存在：

```
$this->params['paging'][<ModelName>] 
```

因此，如果您对同一个模型进行两次分页，它会覆盖之前模型的默认值/选项/设置。

我目前正在处理一个类似的问题，到目前为止我想到的唯一解决方法是最初动态更新（通过 Ajax）每个 div，以便每个请求都有可用的索引 $this->params['paging '] 来存储默认值/选项/设置。

# android - Android背景图片拉伸

> ID：10461389
> 
> 赞同：1
> 
> 时间：2012-05-05T11:27:41.083
> 
> 标签：android, android-layout, background-image, android-imageview

我的 Android 应用背景图片有问题。它足够大：800 x 470 像素，但问题是 - 当我将它用作布局背景属性时（顺便说一下，我使用线性布局），它会被拉伸到屏幕尺寸。我找到了一个使用 ImageView（使用 centerCrop scaleType）的解决方案，但它裁剪了图像的最中心，我想裁剪它的 LEFT 部分。X 轴偏移有帮助，但如果我切换到水平布局 - 它看起来像废话。是否有任何解决方案可以帮助我不使用两个单独的背景图像？或者这是不可能的。

非常感谢您的回答。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:56:14.650

Android 设备有许多不同的屏幕尺寸，因此最好不要有固定尺寸的背景。

您可以使用 9-patch 图像并在图像中定义应该拉伸的区域，您可以在此处了解这一点[http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

当然，使用 9-patch 可能会影响背景图像设计，因此您必须进行调整以使其对 9-patch 友好。

希望有帮助。

# c - 编译器无法理解 '_FILE_' 为什么？

> ID：10461391
> 
> 赞同：-1
> 
> 时间：2012-05-05T11:27:57.407
> 
> 标签：c, file, macros

我在 C 中使用 Code::Blocks 和 C 代码并且有一些错误..

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

#define SQRT(num)    \
((num>0)    ?\
(sqrt(num)): \
(printf("the number is negative")))

int main() {
    printf("The file %s is executeD \n", _FILE_);
    printf("the sqrt of number %d is %f \n",8,SQRT(8));
    printf("the sqrt of number %d is %f \n",9,SQRT(9));
    printf("the sqrt of number %d is %f \n",-9,SQRT(-9));

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T11:29:24.310

它是`__FILE__`，不是`_FILE_`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:29:33.023

宏是`__FILE__`（每边双下划线）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:29:47.357

尝试使用双下划线，例如：`__FILE__`

# mpi - 为 MPICH 配置 valgrind：使用了错误的 libmpi*.so 文件

> ID：10461393
> 
> 赞同：2
> 
> 时间：2012-05-05T11:28:01.100
> 
> 标签：mpi, valgrind, mpich, memcheck

运行 valgrind 以检测 mpi 应用程序中的错误时，我收到以下错误：

```
libmpi.so.0: cannot open shared object file: No such file or directory 
```

我发现了以下内容： [Valgrind 文档](http://www.valgrind.org/docs/manual/mc-manual.html#mc-manual.mpiwrap)（第 4.9.1 节）指出“假定要包装的 MPI 函数位于与 soname 匹配 libmpi.so* 的 ELF 共享对象中。这至少对于 Open 来说是正确的MPI 和 Quadrics MPI，可以根据需要轻松更改。”

因此，由于我使用的是 mpich2，它实际上应该使用 libmpich.so.1.0。

这可以在 libmpiwrap.c 中看到：

```
#include "mpi.h"

/* Where are API symbols?
Open MPI      lib/libmpi.so,   soname = libmpi.so.0
Quadrics MPI  lib/libmpi.so,   soname = libmpi.so.0
MPICH         libmpich.so.1.0, soname = libmpich.so.1.0

A suitable soname to match with is therefore "libmpi*.so*". 
```

我的问题是：我在哪里以及如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-18T17:37:54.393

我自己也遇到过这个问题。希望这可以为您指明正确的方向。不幸的是，众所周知，MPI 很难与 valgrind 和 gdb 一起使用。

**选项 1**：找到合适的包。

在 Fedora/RHEL/（基于 rpm）系统上，您可以在软件包中找到 OpenMPI 共享库`valgrind-openmpi`。我找不到 MPICH 版本。我使用 MVAPICH，所以这对我没有帮助。如果您找到 MPICH/MVAPICH 版本，请发表评论，以便我可以在此处添加。

*   [Valgrind OpenMPI](http://rpm.pbone.net/index.php3/stat/4/idpl/30706044/dir/fedora_20/com/valgrind-openmpi-3.9.0-9.fc20.x86_64.rpm.html)

PBone 将内容显示为具有 libmpiwrapper 共享对象。

**选项 2**：从源代码构建库。（我为 MVAPICH 做了什么）

我求助于从源代码编译 valgrind，然后复制共享库。我想保留包管理器的 valgrind 版本，所以我只是匹配源代码的版本并使用默认的 GCC 以确保安全。你或许可以使用最新最好的，但我怀疑你能得到多少。

在构建 Valgrind 时，您需要确保它找到正确的 MPI 安装。检查输出以验证正确的共享库和头文件。我有在一个系统上安装多个 MPI 的习惯，所以这是我很难学到的东西。花一些时间在 autoconf/automake 输出上。幸运的是，Valgrind 维护人员在保持构建非常简单方面做得很好，所以我在编译时没有遇到任何重大问题。

**源代码** [http://valgrind.org/downloads/](http://valgrind.org/downloads/)

拥有它后，关键是设置文档中提到的 env 变量。

**附加说明** - [https://wiki.mpich.org/mpich/index.php/Support_for_Debugging_Memory_Allocation](https://wiki.mpich.org/mpich/index.php/Support_for_Debugging_Memory_Allocation) - [https://fs.hlrs.de/projects/marmot/publications/paralleldebugging-ppt.pdf](https://fs.hlrs.de/projects/marmot/publications/paralleldebugging-ppt.pdf)

# php - mvc中类外的php语言变量

> ID：10461395
> 
> 赞同：1
> 
> 时间：2012-05-05T11:28:21.867
> 
> 标签：php, model-view-controller, variables

我正在尝试解决一个棘手的问题。

我正在创建一个需要不止一种语言的项目。因此，我为所有语言创建了文件，其中包含语言数组。

现在的问题是，我正在使用我自己的 MVC 系统。

基本上，在我的初始化文件中，我想包含一个语言文件，其中包含正确的语言，它可以完美运行。

当我想在视图中显示它时，问题就出现了。

当我让我的控制器调用视图类并渲染视图时，它在一个类中，使类外的变量不可用。

我可以通过在视图渲染器类中包含我的语言文件来解决这个问题，但是由于我有时需要在模型中设置变量，所以它不起作用。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:38:39.800

您可以尝试当前所选语言的会话。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-05T11:36:08.987

可能最简单的方法是使语言变量全局化：在包含的语言文件中，使用

```
global $LANGUAGE;
$LANGUAGE=array(
  ...
); 
```

并开始你的视图方法`global $LANGUAGE;`。

# windows-phone-7 - wp7中是否有任何bumbers或snapinto视图概念？

> ID：10461396
> 
> 赞同：2
> 
> 时间：2012-05-05T11:28:25.640
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1

我正在设计一个应用程序，它以水平方向的纵向模式显示 10 个宽度和高度为 1400 x 800 的图像。我已经使用堆栈面板在滚动查看器中添加了图像。当我滑动或轻弹图像时，图像会在视图中滚动并停在某个位置。如果它停在第 6 和第 7 个图像之间，并且第 7 个图像在 75% 视图中，我希望将第 7 个图像移动到屏幕的左侧。如果第 6 个图像占据最大视图，则第 7 个图像到移到右侧。我在 windows phone 的图片库中看到了这个，但图像只在左侧移动。Android、html5 和 ios 可以选择 snap 和 bumber coccepts 来实现这一点。wp7中是否有任何库可以实现。见下图

![在此处输入图像描述](../Images/c2789eecacfbb26f2b5a8f09c6a92280.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:36:10.177

Windows Phone的`SlideView`Teleriks RadControls 库 ( [http://www.telerik.com/products/windows-phone.aspx](http://www.telerik.com/products/windows-phone.aspx) ) 具有这样的捕捉功能。

或者，您可以查看`LoopingSelector`工具包 ( [http://phone.codeplex.com/](http://phone.codeplex.com/) ) 中的 并对其进行更改，使其水平滚动而不是垂直滚动。

# node.js - 使用 node-couchdb-api 在 couchdb 中删除文档时出错

> ID：10461414
> 
> 赞同：1
> 
> 时间：2012-05-05T11:30:23.567
> 
> 标签：node.js, couchdb

```
var couchdb = require("couchdb-api");
var server = couchdb.srv(localhost, 5984, false, false);
var db = server.db("test");
var doc = db.doc("d5e1d042d579fcb1b3d4df07bc001f74");
doc.del(function (err, response) {
console.log(response);
console.log(err);
}); 
```

之后我面临的问题，

```
null
{ error: 'bad_request', reason: 'Invalid rev format' } 
```

但相应的文件具有正确的修订，如 1-135dc47e3492a980fa45b3af9eb22a97 和正确的数据。

请给我解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T14:23:49.773

我是这个模块的创建者。这里的问题是您试图删除没有修订号的文档。`_rev`（您的文档上有一个数字，但`couchdb-api`没有该信息）在这些情况下，任何其他写入尝试也会触发此错误。

你现在有几个选择：

**在尝试写入/删除之前获取当前文档**

```
doc.get(function (err, body) {
    doc.del(function (err, results) {
        // the delete will be successful
    });
}); 
```

**在尝试写入/删除之前明确设置您的修订号**

```
doc.body._rev = "1-myrevisionnumber";
doc.del(...); 
```

我将在这里添加一条更好的错误消息，并且我正在考虑添加一个特殊标志，`couchdb-api`即使它没有最新的修订号，它也会告诉“强制”删除。（即它会`get`在之前调用`del`以避免 MVCC）

# c#-4.0 - 使用 WMI 查询的 perfmon 计数器值问题

> ID：10461415
> 
> 赞同：2
> 
> 时间：2012-05-05T11:30:31.780
> 
> 标签：c#-4.0, wmi, performancecounter, wmi-query, perfmon

我正在构建 EXE，并通过它获取应用程序的 perfmon 计数器以使用 WMI 查询对其进行监视。我正在用我的本地机器测试它，似乎我的代码逻辑给了我一些计数器的错误值。

下面是我的计数器之一的代码（**CacheTotalHitRatio**） ![在此处输入图像描述](../Images/eecb278d4c24406990f97c5d7e0c4bd8.png)

**当我在我的系统中使用perfmon exe**查看它时，它会显示一些不同的东西，如下所示。

![在此处输入图像描述](../Images/ca38432b0aaf2f40054dd0403bde10d7.png)

我认为 **CacheTotalHitRatio**是百分比，不应超过 100，但我的代码给出了更高的值。这里有什么问题或者我在这里做错了什么？

如果有人对 WMI 查询有经验，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T05:58:28.050

存在两种类型的[性能计数器类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392738%28v=vs.85%29.aspx)

*   [格式化的性能计数器类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392738%28v=vs.85%29.aspx#_hmm_formatted_performance_counter_classes)
*   [原始性能计数器类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa392738%28v=vs.85%29.aspx#_hmm_raw_performance_counter_classes)

该类`Win32_PerfRawData_ASPNET_ASPNETApplications`返回**原始性能**计数器值，这些值必须转换（使用根据属性和类的公式）才能显示，如果您使用`Win32_PerfFormattedData_ASPNET_ASPNETApplications`该类，您将获得**计算数据**，就像性能监视器中显示的那样。

# .net - 在 F# 中显式实现接口

> ID：10461421
> 
> 赞同：2
> 
> 时间：2012-05-05T11:31:19.247
> 
> 标签：.net, interface, f#, explicit-interface, explicit-implementation

好的，C# 有[显式接口实现](http://msdn.microsoft.com/en-us/library/ms173157%28v=vs.110%29.aspx) 我想在 F# 中做类似的事情。

我有一些接口（和类）

```
type IState = interface
    abstract member Update : IAction-> IState
    ...
end
type IEnviroment = interface
    abstract member Update : IAction-> IEnviroment
    ...
    end

type IBoard  = 
    inherit IState
    inherit IEnviroment
    abstract member Update : Move -> IBoard
    ...

[<AbstractClass>]
and Move ()= 
    abstract member Apply : IBoard -> IBoard
    interface IAction with        
        override this.Cost = 1M 
```

所以我遇到的问题是 Update 的定义有 3 次不同。所以我需要 C# 的[Explicitit Interface Implementation](http://msdn.microsoft.com/en-us/library/ms173157%28v=vs.110%29.aspx)的等价物，我想我会在接口中实现它（因为这在 F# 中是合法的）——它只包含一些类型转换。

我的理解是，F# 中的所有接口实现都是显式的，在类中，但是一旦一个接口从另一个接口继承，那么你只能（显式地）实现那个接口。（所以我的 Board 课程只实现了 I Board）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:46:52.837

`member this.IState.Update`我在 的实现中尝试了语法`IBoard`，但编译器拒绝了它。

我在[规范](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997189)中看不到做你想做的事的方法。

这是针对此类名称冲突的解决方法，使用抽象类将调用转发到每个接口。

```
type I1 =
    interface
        abstract F : unit -> unit
    end

type I2 =
    interface
        abstract F : unit -> unit
    end

type II =
    interface
        inherit I1
        inherit I2
        abstract F : unit -> unit
    end

[<AbstractClass>]
type III() =
    abstract F1 : unit -> unit
    abstract F2 : unit -> unit
    abstract F3 : unit -> unit
    interface I1 with
        member this.F() = this.F1()
    interface I2 with
        member this.F() = this.F2()

type Works() =
    inherit III()
    override this.F1() = printfn "F1"
    override this.F2() = printfn "F2"
    override this.F3() = printfn "F3"

type Fails() =
    interface II with
        member this.F() = () 
```

# android - Android 上的 min3d：如何设置背景图像

> ID：10461422
> 
> 赞同：1
> 
> 时间：2012-05-05T11:31:23.503
> 
> 标签：android, opengl-es, 3d, glsurfaceview

我需要为我的 3d 场景设置背景图像。我在我的 GLSurfaceView 上使用了 setZOrderOnTop(true)，这很好：在我的 3d 图形下可以看到底层视图背景。但是现在我需要在我的 3d 图形上添加一些视图，这让我使用了 setZOrderOnTop(false)，所以现在 z 索引很好，但是背景是黑色的。我试图在 GLSurfaceView 上设置可绘制的背景，但在这种情况下，3d 场景呈现在 GLSurfaceView 的背景**后面**......所以，我认为有一个选项可以在我的场景后面绘制带有背景纹理的矩形。但我不知道怎么做。

# random - 随机匹配查找

> ID：10461423
> 
> 赞同：0
> 
> 时间：2012-05-05T11:31:24.807
> 
> 标签：random, array-difference

假设我有两个文件或数组，类型无关紧要，大小为 184x184。我尝试使用如下代码找出这些项目是否不同：

```
for(i=0; i<N; i++) {
    x = r.nextInt(184);
    y = r.nextInt(184);
    if(item1[x,y] != item2[x,y]) {
        break;
    }
} 
```

我的问题是，*N*的值应该是多少？*我应该运行测试， N*和*size*之间是否存在事实上的比率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T08:09:15.920

当程序在找到相同索引的不同值时退出循环：

*   可以给 N 一个大数字，循环不会使计算机疲劳，因为循环最多会在第 10-20 步被打破。

因为在非常低的“i”值中会发现差异：

*   不需要更大的 N 值。

所以根据我的实验，N 的实际值为 20。对于图片中的相似或背景占主导地位，该值可以增加到 100。

# sharepoint-2010 - 我应该坚持为开发机器获取静态 IP 地址吗？

> ID：10461424
> 
> 赞同：0
> 
> 时间：2012-05-05T11:31:38.693
> 
> 标签：sharepoint-2010, 64-bit, iis-7.5, development-environment, remote-desktop

我获得了对虚拟机 (VM) 的远程（通过 Internet）桌面的访问权限，以开发（或者更确切地说是原型设计）Sharepoint 2010 解决方案（ASP.NET 4.0、Windows Server 2008 R2 64 位、SMTP、IIS7.5、 MS SQL Server 2008 R2）在 MS Visual Studio 2010 中。
我无法访问（或了解）VM 之外的内容......

安装和预配置所有东西......
有点......因为，我无法在 VS2010 中开发甚至创建任何 Sharepoint 项目，我只获得了与我连接的 AD 域用户的凭据，直到我设法更改机器/本地管理员密码（因为我没有被告知），将其连接到机器，所以我自己解决了这个问题。

我还是觉得别扭：

*   以前，我总是针对静态 IP 地址（主要是 127.0.0.1）进行开发。现在我的开发机器的 IP 地址是动态的（DHCP 客户端），并且每次我连接到它时都是不同的。
*   以前，我总是在 32 位环境中开发......主机文件在哪里以及为什么我被拒绝访问[http://localhost](http://localhost)（试图连接到公共外部域）以及本地管理员凭据不被[http接受://127.0.0.1](http://127.0.0.1)？

在具有动态（总是变化的）IP地址的机器中开发或针对这种开发环境的参数以要求为开发机器获取静态IP地址有哪些可能的陷阱？
或者。在具有动态（可变）IP地址的隔离（对于开发人员，内部有所有服务器）机器上进行开发是完全可以的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:39:21.747

不得不担心 rc 到 IP 的变化非常烦人。每次PC重新启动时，它可能会更改IP。因此，如果您不能 rc，您就无法完成所需的工作。

因此，当您 rc 时，您仍将使用 (127.0.0.1/localhost)，但是当您想将其部署为 rc'ed to machine 的服务器时。然后，您可以最小化 rc 屏幕并使用该 DHCP IP 来测试您用于 rc 的机器（192.168.xxx.xxx）的内容。

一种解决方法是让他们将 DHCP 的 DNS 放到您正在使用的机器上。这样，您只需 rc 即可，它应该重定向到同一台机器。

就我个人而言，我只需要 SVN 用户名\密码就可以了。如果这些工具像 Netbeans 一样免费且易于查找\使用，但 VS 并非如此。

# magento - Mage::app()->getStore()->getWebsiteId();

> ID：10461426
> 
> 赞同：3
> 
> 时间：2012-05-05T11:32:05.087
> 
> 标签：magento

Mage::app()->getStore()->getWebsiteId(); 在某些块中不起作用（从实例化模型调用）。

如果我没记错的话，它在购物车块中工作，但在购物车项目块中不起作用。

我认为这是一个有趣的问题。我还注意到 Mage::getModel('customer/session')->getCustomer()->getGroupId();

在相同的情况下也不起作用。

它在名为 Mage_Checkout_Block_Cart 的块中的模板内工作

但它在一个名为：OrganicInternet_SimpleConfigurableProducts_Checkout_Block_Cart_Item_Renderer 的块中不起作用，它扩展了 Mage_Checkout_Block_Cart_Item_Renderer

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T15:42:34.280

这是什么版本的magento？

我从来没有见过你调用的特定方法来获取网站 ID。我只用过`Mage::app()->getStore()->getWebsite()->getId();`

如果`getWebsiteId`可行，那么我会想象它是存储数据数组的数据集，而不是实际的方法。像这样的数据可能是可变的，我无法告诉你在哪里或何时设置它。

至于在客户会话中获取客户的组 id，如果您调用客户会话，`getModel()`您将获得一个新会话，而不是 magento 将实际存储会话数据的“单例”会话。您需要用 . 调用所有会话对象`Mage::getSingleton('customer/session')`。

如果客户已登录，您的会话中只会有一个客户。

# javascript - 如何优化通过数字开关创建的集合？

> ID：10461428
> 
> 赞同：0
> 
> 时间：2012-05-05T11:32:33.897
> 
> 标签：javascript

我需要根据用户选择的下拉列表创建一定数量的对象。现在我有这个代码。

```
var driversFunc = function () {

var driversCount = osagoViewModel.fields.driversCount.selectedValue();

switch (driversCount) {

    case "many":
        return [];
    case "1":
        return [new driver()];
    case "2":
        return [new driver(), new driver()];
    case "3":
        return [new driver(), new driver(), new driver()];
    case "4":
        return [new driver(), new driver(), new driver(), new driver()];
    case "5":
        return [new driver(), new driver(), new driver(), new driver(), new driver()];
    }
}; 
```

（使用knockout.js）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:42:53.960

您的交换机可能可以替换为：

```
if (driversCount === "many") {
  return [];
} else {
  var count = parseInt(driversCount, 10);
  var l = [];
  while (count--) l.push(new driver());
  return l;
} 
```

我不明白为什么`many`映射到`[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:44:15.913

我不知道上下文，但您的代码可以使用 for 循环重写：

```
var driversFunc = function () {
    var driversCount = osagoViewModel.fields.driversCount.selectedValue();
    var result = [];
    if (driversCount != "many") {
        for (var i = 0; i < (+driversCount || 0); i++) {
            result.push(new driver());
        }
    }
    return result;
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:49:50.240

试试这个：

```
return Number(driversCount) 
        ? ( function add(i){ 
             return i ? add(i-1).concat(new driver) : [] 
            }(driversCount) 
           )
        : []; 
```

或者^(**1**)

```
return Number(driversCount) 
        ? String(new Array(driversCount))
          .split(',')
          .map(function(){return new driver})
        : []; 
```

^(**1**)`String(new Array([n])).split ...`语法是强制应用该`map`方法的一个小技巧（不起作用`new Array([n]).map(...)`）。

# c# - DropDownListFor 中的“新...”替代方案

> ID：10461429
> 
> 赞同：1
> 
> 时间：2012-05-05T11:32:34.497
> 
> 标签：c#, asp.net-mvc-3

我有`DropDownListFor`一个表格，其中列出了所有当前可用的选项。现在，我想提供一个“新...”替代方案。选择此项将显示一个新文本框，可以在其中创建新的替代项。

我添加了替代方案，绑定了一些 javascript 以显示附加表单（使用 生成`EditorFor`）。剩下的就是如何验证输入。我是否必须为此场景创建自定义模型绑定器？基本上我想要的是从下拉列表中选择现有值，*或者*根据验证规则填写附加字段中的所有属性。

我使用 C# 作为后端，但我怀疑这很重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:34:43.807

当您使用 ajax 获取下一个下拉列表时，您需要将该输入绑定到 jquery 验证框架

```
$.validator.unobtrusive.parse("#myform"); 
```

# ruby-on-rails-3 - Rails 3.2.1 的 ActiveSupport 有什么问题？

> ID：10461432
> 
> 赞同：2
> 
> 时间：2012-05-05T11:33:02.037
> 
> 标签：ruby-on-rails-3, unicorn

当我使用 unicorn 启动 rails 3.2.1 myapp 时，总是会记录以下类型的错误/异常。谷歌搜索并试图解决它，但无法解决它。

```
==> log/unicorn_err.log <==
Exception `NameError' at
 /myapp/releases/c2c1e8f50b31eede21692692cf6dac28a
 d85177e/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/act
 ive_support/core_ext/module/remove_method.rb:4 - method `_routes'
  not defined in Class
Exception `NameError' at
 /myapp/releases/c2c1e8f50b31eede21692692cf6dac28a
 d85177e/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.1/lib/act
 ive_support/core_ext/module/remove_method.rb:4 - method `helpers'
  not defined in Class 
```

还有其他很多`NameError'`错误，比如这个别人的要点[https://gist.github.com/1353923](https://gist.github.com/1353923)

# css - 无法成功应用css

> ID：10461433
> 
> 赞同：0
> 
> 时间：2012-05-05T11:33:02.787
> 
> 标签：css

```
body{
    background:#eff3f6;
  border: 1px solid #C3D4DB;
}
.content{margin-top:1px;
margin-right:200px;
margin-left:200px;
background:#fefefe;}
.box
{
    background:#fefefe;
    border: 1px solid #C3D4DB;
    border-top:1px;
    -webkit-border-radius:5px;
    -moz-border-radius:5px;
    border-radius:5px;
    -moz-box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    -webkit-box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    color:#444;
    font:normal 12px/14px Arial, Helvetica, Sans-serif;
    margin:0 auto 30px ;
    overflow:hidden;
} 
```

我将内容选择器应用于父`<div>`类，将框选择器应用于子`<div>`类。现在它正确应用了。但是每当内容超过一定数量时，整个身体内容就会消失。那么我需要照顾哪些财产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:38:03.963

您可以像下面的示例一样删除`overflow: hidden`或添加`height: auto`以扩展 .box div 以覆盖其所有内容。

```
.box {
    background:#fefefe;
    border: 1px solid #C3D4DB;
    border-top:1px;
    -webkit-border-radius:5px;
       -moz-border-radius:5px;
            border-radius:5px;
    -webkit-box-shadow:rgba(0,0,0,0.15) 0 0 1px;
       -moz-box-shadow:rgba(0,0,0,0.15) 0 0 1px;
            box-shadow:rgba(0,0,0,0.15) 0 0 1px;
    color:#444;
    font:normal 12px/14px Arial, Helvetica, Sans-serif;
    margin:0 auto 30px ;
    overflow:hidden;
    height: auto; /* This will expand the height of the container to contain all of its contents */
    } 
```

# java - 关于静态方法覆盖

> ID：10461437
> 
> 赞同：0
> 
> 时间：2012-05-05T11:33:23.483
> 
> 标签：java, static-methods, overriding

在静态方法覆盖的情况下..我已经开发了下面的代码

```
class Ab {  
    static void getF() {
        System.out.println("I am saral");
    }
}

class Ham extends Ab {
    static void getF() {
        System.out.println("I am saral saxena");
    }
    public static void main(String[] args) {
        // Ham h = new Ham();
        // h.getF(); //Ham
        Ab a = new Ham();
        a.getF(); // Ab class
    }
} 
```

现在我的问题是，如果我在使用多态行为时覆盖静态方法，`Ab a = new Ham();`在这个阶段我仍然得到`getF();`类的方法`Ab`，请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T11:35:50.647

您*不能*覆盖静态方法。

静态方法属于类。您可以致电`Ab.getF()`或`Ham.getF()`- 您在编码时选择了哪个。

在类层次结构中将静态方法命名为相同没有任何影响（除了可能对程序员造成混淆）。静态方法是属于类而不是实例的浮动代码。只有实例方法对覆盖敏感。

出于这个原因，在实例上调用静态方法（正如您所拥有的）是一种糟糕的风格，因为它使该方法看起来是一个实例方法。它在语言中是允许的，但会导致程序员混淆，从而导致错误，特别是如果静态方法的名称类似于实例方法 - 例如，发现名为`setName(String)`静态方法的方法可能是正当杀人的理由。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T11:35:17.450

在编译时，实例调用的静态方法与声明变量的类一起编译，而不是实际实例化的类，因此`a.getF();`结果是 is`Ab.getF();`和 not `Ham.getF();`。

通常使用实例而不是类名调用静态方法是一种非常糟糕的做法。（我认为最好的例子是对实例的调用`Thread.sleep()`，`thread`假设它会导致实例线程休眠，但实际上当前线程会）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:45:21.290

覆盖静态函数是不可能且无用的（我避免使用术语方法，因为方法与对象相关）。

当需要根据对象的类调用不同的静态函数时，这样做

```
class Ab {  
 private static void getF() {
    System.out.println("I am saral");
 }
 public void doit () {
   getF ();
 }
}
class Ham extends Ab {
 private static void getF() {
    System.out.println("I am saral saxena");
 }
 @Override
 public void doit ()
 {
    getF ();
 }
 public static void main(String[] args) {
    Ab a = new Ham();
    a.doit(); // Ham class
} 
```

}

顺便说一句，将**get**用于函数 return **void**很奇怪

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T13:31:56.697

首先，您不能将派生类中具有名称和签名的静态方法与基类中的静态方法称为覆盖的情况相同。

这是因为在重写的情况下，编译器不会为函数调用生成字节码，因为在运行时会根据引用变量的多态行为来解析将调用哪个实际方法。

覆盖实际上是由编译器的这种动态行为定义的（而不是由具有相同签名方法的基类和子类定义，这些只是覆盖的先决条件）。

静态方法是类实体，因此绑定到引用变量而不是运行时对象，因此方法调用仅在编译时解析（基于引用变量的类型或类名，如果由它引用。

同样，如果您在超类和子类中都有具有相同名称和类型的公共实例变量或静态变量，则将选择具有变量类型的变量而不是运行时对象。

# delphi - 第二次执行 SQL 时出现 TADOQuery 错误

> ID：10461440
> 
> 赞同：1
> 
> 时间：2012-05-05T11:34:08.093
> 
> 标签：delphi, tadoquery

我`TADOQuery`在 Windows XP 和 Windows7 操作系统上的 Delphi 7 中的组件出现了奇怪的行为。以下问题在 Windows7 操作系统上运行良好，但在 XP 操作系统上出现错误。

让我解释一下这个场景，我有一个 TADOConnection 组件和两个 TADOQuery 组件。TADOConnection 组件的`ConnectionString`属性值如下：

```
ADOConnection1.ConnectionString := 'Provider = MSDASQL.1; Password = My Password; User ID = My User ID; Data Source = My Data Source'; 
```

我已经将角色/授予的权限应用于我登录到应用程序的用户 ID/密码。

`Connection`我已经使用属性将 TADOConnection 组件连接到 TADOQuery 组件。

当我执行第一个 sql 时，它可以正常工作，没有任何错误，但是当我执行第二个 sql 时，我在 Windows XP 操作系统上遇到以下错误。

> [Microsoft] [SQL Server Native Client 10.0] [SQL Server] 对对象“我的表名”、数据库“我的数据库名”、架构“dbo”的 SELECT 权限被拒绝

如果我在 Windows7 操作系统上执行相同的代码，它可以正常工作，没有任何错误。

任何人都可以关注可能缺少的内容或可能是什么问题吗？

* * *

我添加了“Persist Security Info = False;” 连接字符串如下：

```
ADOConnection1.ConnectionString := 'Provider = MSDASQL.1; Persist Security Info = False; Password = My Password; User ID = My User ID; Data Source = My Data Source'; 
```

现在，每当我使用 TADOQuery 组件执行 sql 时，我每次都需要编写以下语句，即使我在开始时已经设置了 TADOQuery 的“Connection”属性，但每次执行 sql 时仍然需要设置该属性。

```
ADOQuery1.Connection := ADOConnection1; 
```

但正如我所说，在 Windows7 上，无需更改 TADOConnection 组件的“ConnectionString”属性，也无需设置任何 TADOQuery 组件的“Connection”属性。

任何人都可以告诉你究竟要做什么？

如果您的应用程序太大并且需要在很多地方进行编码更改，有人会同意吗？那么测试工作呢？在所有地方都必须进行测试，对吗？

所以，我仍在寻找合适的解决方案。这个问题仍然没有答案。

如果有人有任何线索或提示或适当的解决方案，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T14:31:36.253

1.  您必须使用 SQL Profiler 检查发生了什么。
2.  我敢打赌，ADO 会在内部克隆一个连接或使用一个连接池，然后下一个查询会获取另一个物理连接。所以，你得到了错误。要禁用池添加`OLE DB Services=-4`到您的连接字符串。

# android - SMS加密在解密时出现异常

> ID：10461442
> 
> 赞同：1
> 
> 时间：2012-05-05T11:34:23.170
> 
> 标签：android, sms, encryption

我正在开发一个处理 SMS 的 android 应用程序。
我已经完成了应用程序，但最后一件事仍未解决：加密。

我怎样才能解决这个问题来加密传入的短信？

```
public class enc {

        private String iv = "fedcba9876543210";
        private IvParameterSpec ivspec;
        private SecretKeySpec keyspec;
        private Cipher cipher;

        private String SecretKey = "0123456789abcdef";

        public enc()
        {
            ivspec = new IvParameterSpec(iv.getBytes());

            keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

            try {
                cipher = Cipher.getInstance("AES/CBC/NoPadding");
            } catch (NoSuchAlgorithmException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (NoSuchPaddingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

        public String encrypt(String text) throws Exception
        {
            if(text == null || text.length() == 0)
                throw new Exception("Empty string");

            byte[] encrypted = null;

            try {
                cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

                encrypted = cipher.doFinal(padString(text).getBytes());
            } catch (Exception e)
            {           
                throw new Exception("[encrypt] " + e.getMessage());
            }
            String s = new String(encrypted);
            Log.v("TAG", s);

            return s;
        }

        public String decrypt(String code) throws Exception
        {
            if(code == null || code.length() == 0)
                throw new Exception("Empty string");

            byte[] decrypted = null;

            try {
                cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

                decrypted = cipher.doFinal(hexToBytes(code));
            } catch (Exception e)
            {
                throw new Exception("[decrypt] " + e.getMessage());
            }
            Log.v("TAG", decrypted.toString());
            String s = new String(decrypted);
            Log.v("TAG", s);
            return s;
        }

        public static String bytesToHex(byte[] data)
        {
            if (data==null)
            {
                return null;
            }

            int len = data.length;
            String str = "";
            for (int i=0; i<len; i++) {
                if ((data[i]&0xFF)<16)
                    str = str + "0" + java.lang.Integer.toHexString(data[i]&0xFF);
                else
                    str = str + java.lang.Integer.toHexString(data[i]&0xFF);
            }
            return str;
        }

        public static byte[] hexToBytes(String str) {
            if (str==null) {
                return null;
            } else if (str.length() < 2) {
                return null;
            } else {
                int len = str.length() / 2;
                byte[] buffer = new byte[len];
                for (int i=0; i<len; i++) {
                    buffer[i] = (byte) Integer.parseInt(str.substring(i*2,i*2+2),16);
                }
                return buffer;
            }
        }

        private static String padString(String source)
        {
          char paddingChar = ' ';
          int size = 16;
          int x = source.length() % size;
          int padLength = size - x;

          for (int i = 0; i < padLength; i++)
          {
              source += paddingChar;
          }

          return source;
        }
    } 
```

我试过这个，但它在解密时给出了一个异常，它无法解析“A字符”。
我所说的字符是指显示无法解析的字母 a、b、c。

有什么帮助吗？

```
04-24 13:56:17.191: V/(2031): Message Recieved
04-24 13:56:22.811: V/TAG(2031): [B@44ebb318
04-24 13:56:22.811: V/Encrypted(2031): [B@44ebb318
04-24 13:56:22.931: W/System.err(2031): java.lang.Exception: [decrypt] unable to parse '[B' as integer
04-24 13:56:22.941: W/System.err(2031):     at sms.app.enc.decrypt(enc.java:86)
04-24 13:56:22.951: W/System.err(2031):     at sms.app.SMSReceiver.onReceive(SMSReceiver.java:86)
04-24 13:56:22.961: W/System.err(2031):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
04-24 13:56:22.961: W/System.err(2031):     at android.app.ActivityThread.access$3200(ActivityThread.java:125)
04-24 13:56:22.970: W/System.err(2031):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
04-24 13:56:22.981: W/System.err(2031):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-24 13:56:22.981: W/System.err(2031):     at android.os.Looper.loop(Looper.java:123)
04-24 13:56:22.991: W/System.err(2031):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-24 13:56:23.001: W/System.err(2031):     at java.lang.reflect.Method.invokeNative(Native Method)
04-24 13:56:23.001: W/System.err(2031):     at java.lang.reflect.Method.invoke(Method.java:521)
04-24 13:56:23.011: W/System.err(2031):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-24 13:56:23.021: W/System.err(2031):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-24 13:56:23.021: W/System.err(2031):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:59:07.113

您可能想要发布完整的堆栈跟踪。就目前而言，您的代码存在三个问题：

*   你的密钥很弱：你应该只用一些 ASCII 字符构造一个密钥。这严重限制了密钥空间，并且很容易暴力破解密钥
*   不要使用非标准的填充。用于`Cipher.getInstance("AES/CBC/PKCS5Padding")`获得适当的填充
*   不要使用固定的 IV，为每个加密操作生成一个随机的 IV

此外，使用`getBytes()`可能会产生奇怪的结果，因为编码是未定义的（使用平台默认值）。它可能在 Android 上是一致的，但用于`getBytes("UTF-8")`确保从同一个字符串中获得相同的字节。

# html - 我可以将我的 XHTML 页面更改为 HTML - 我只是更改标题上方的引用吗？

> ID：10461445
> 
> 赞同：0
> 
> 时间：2012-05-05T11:34:42.343
> 
> 标签：html, xhtml

当我在我的网站上创建页面时，我是根据一个用 XHTML 编写的免费模板来做的。因此，我所有的页面都是 XHTML。

据我了解，XHTML 实际上只是 HTML 的更严格版本。我不是程序员，我认为不那么严格的版本对我来说会更好。此外，看起来浏览器很聪明，可以处理违规行为，所以更严格的 XHTML 似乎真的没有必要。

在我的页面顶部，我有这些参考资料：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

我可以将这些换成纯 html 引用（有人知道我需要的确切文本吗？）还是会导致一些不可预见的问题？

顺便说一下，当我使用 SSI 时，我的大多数文件都是 shtml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:10:53.413

不同的 HTML 版本是不同的，doctype 声明应该反映你使用的版本，或者打算使用的版本。原因是验证器使用 doctype 声明来确定要验证的语法。

如果您不验证，那么您使用哪种 doctype 声明并不重要，只要它是在浏览器中触发“标准模式”的声明即可。那你为什么要改呢？

与流行的看法相反，doctype 声明不会影响浏览器的行为，除了一些 doctype 字符串以相当复杂的方式触发“标准模式”、一些触发“怪癖模式”和一些触发“几乎标准模式”的意义上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:40:58.703

您可以将 DOCTYPE 换成`<!DOCTYPE html>`（官方 HTML 5 文档类型），它应该可以工作。HTML5 允许格式良好的 XML 语法以及 HTML4 样式的标签汤语法（其中某些标签不必显式关闭）。

该`xmlns`属性不再是必需的，但如果您离开它，用户代理应该忽略它。

附带说明一下，确保您的 HTML 是“正确的”仍然是一个好主意，因为如果不是，用户代理将进行补偿，并且它们可能不会以相同的方式进行补偿，因此您可能会看到不同的行为不同的浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:41:19.407

您可以简单地将其更改为 HTML 5 文档类型，并且应该可以正常工作：

```
<!DOCTYPE html>
<html> 
```

# c++ - 模板实例

> ID：10461462
> 
> 赞同：0
> 
> 时间：2012-05-05T11:36:40.547
> 
> 标签：c++, templates

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

我需要通过以下方式实现模板类

要求：您必须提供代码来实现名为 的排序“比较器” `SensibleLessThan`，它能够对文本字符串进行排序。

它将以下列方式调用。

```
SensibleLessThan<String> comparer;
  String lhs = "Aadvark";
  String rhs = "Zygote";
  comparer(lhs, rhs); 
```

我应该编写`SensibleLessThan`类并创建对象吗？但他们正在调用类似函数的比较器。谁能给我一些想法，我该如何做到这一点？

如果我需要提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:48:11.403

提示：查找`operator()`. 它允许您在对象上应用函数调用运算符。

# java - Java 处理自定义事件

> ID：10461469
> 
> 赞同：1
> 
> 时间：2012-05-05T11:37:57.867
> 
> 标签：java, events, listener

我目前正在开发一个简单的 2d 游戏库，仅用于自学。直到知道一切都按预期工作。

现在我正在计划由“游戏流程”（例如计时器）或实体本身触发的运动和事件。我想知道是否可以有像“EntityEventListener”和“EntityMotionListener”这样的自定义事件。然后我看了一下 MouseListener 及其父类。然后我为每个侦听器编写了一个侦听器接口和一个适配器类，如下所示：

```
public interface AppEntityEventListener extends EventListener
{
    void onCreated(Event e);
    void onDeleted(Event e);
    void onStepped(Event e);
    void onSelected(Event e);
}

public abstract class AppEntityEventAdapter implements AppEntityEventListener
{
    @Override public void onCreated(Event e) { } 
    @Override public void onDeleted(Event e) { } 
    @Override public void onStepped(Event e) { } 
    @Override public void onSelected(Event e) { }
} 
```

我检测到我只能将侦听器添加到`Components`并且`Entity`该类不是`Component`分别从 a 派生的`JComponent`。

我读了一些关于 Listeners 的文章，但我不明白如何处理它，因为我现在需要它们。

考虑到我现在的问题是：

*   这些课程有什么不好的地方吗？
*   如何将这些听众以最好/最简单的方式添加到我的`Entity`班级？

提前致谢。

**编辑：**

我已经添加了你说的所有方法。所以现在我`List`调用了两个对象`eventListeners`，`motionListeners`每个对象都有自己的添加和删除功能。

我有一个关于迭代的进一步问题，使用以下代码：

```
private void iterateListeners()
{
    for (Object obj : eventListeners.toArray())
    {
        AppEntityEventListener l = (AppEntityEventListener) obj;
        Event e = new Event(this, Event.ACTION_EVENT, this);

        l.onCreated(e);
        l.onDeleted(e);
        l.onSelected(e);
        l.onStepped(e);
    }

    // ... other listener ...
} 
```

此时如何处理Event？这是正确的方法吗？我真的不知道……上面的代码很直观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:44:54.660

您可以将侦听器添加到您喜欢的任何对象，前提是该对象具有允许添加（和删除）侦听器的方法。只需将`addXxxListener()/removeXxxListener()`方法添加到您的对象。

这些方法应该简单地将监听器添加到监听器集合/从监听器集合中删除，并且对象应该遍历这个集合并`onXxx()`在适当的时候调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-30T10:00:21.840

看看框架潮[http://abyu.github.io/tide/](http://abyu.github.io/tide/)能不能帮到你。使用潮汐您可以创建自己的事件，引发和处理这些事件。

# c++ - unordered_set 与 boost 和 standard 的区别

> ID：10461471
> 
> 赞同：1
> 
> 时间：2012-05-05T11:38:28.720
> 
> 标签：c++, boost, unordered-set

我正在尝试将来自 boost 和标准的 unordered_set 用于应用程序，目的是找到位置，即该集合中某些元素的索引。结果之间存在细微差别。根据这个简单的程序，对 boost 中的元素进行了反转。问题出在哪里？

简单的“假设”代码：

```
#include <iostream>
#include <iterator>
#include <unordered_set>
#include <boost/unordered_set.hpp>

//using boost::unordered_set;
using std::unordered_set;
using std::distance;

int main()
{
  unordered_set<int> Set;
  int sz = 10;
    for(int k=0;k<sz;k++)
        Set.insert(k);
  unordered_set<int>::iterator ind_searched = Set.find(8);
  unordered_set<int>::size_type indx = distance( Set.begin(),
                                                 ind_searched );
  std::cout << " Index of element is "
            << indx << std::endl;
  return 0;
} 
```

有了提升，我得到了

```
Index of element is 1 
```

并使用标准的 unordered_set 我得到

```
Index of element is 8 
```

我编译两者

```
g++ sgi_stl_1.cc -I /home/utab/external_libraries/boost_1_48_0/ -std=c++0x 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:41:49.350

您不应该对 , 的任何实现中的排序进行任何假设`unordered_map`，`unordered_set`它们的`multi`对应物或等效的 or `hash_set`or `hash_maps`。考虑将元素存储为完全实现定义的位置，并且容易随时间变化。排序不仅`boost`在`C++11`标准之间有所不同，而且在不同硬件平台和不同 C++ 实现之间也会有所不同。任何依赖特定顺序的代码都是有缺陷的。所以，你回答你的问题

> 问题出在哪里？

问题仅在于假设无序数据结构中的某些数据排序。

# php - 如何使用 FQL 和 Facebook PHP SDK 获取每个朋友的事件数

> ID：10461472
> 
> 赞同：1
> 
> 时间：2012-05-05T11:38:28.900
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql, fql.multiquery

我想知道是否有一种简单的方法可以获取您的朋友创建/被邀请的活动数量。我只需要知道有多少事件。我愿意

```
$fql = "SELECT name, id, pic FROM profile WHERE id IN (SELECT uid2 FROM friend WHERE uid1 = me() )";
$user_profiles = $facebook->api( array(
        'method' => 'fql.query',
        'query' => $fql,
) );

$fql = array();
// Select '' to minimize xml output
foreach ( $user_profiles as $user ) {
    $id = $user['id'];
    $fql[$id] = "select '' FROM event WHERE eid in (select eid from event_member where uid = $id)";
}
$user_events = $facebook->api( array(
        'method' => 'fql.multiquery',
        'queries' => $fql,
) ); 
```

抛出异常，错误消息为`An unknown error occurred`. 由于我有 1311 个朋友，我可能会遇到一些限制，所以我只测试了两个值（我也测试了 54 和 106 并且工作）并且没有问题，你看到另一种方法吗？你知道什么是限制？

编辑 - 限制在 250 左右。但是使多查询的数量似乎不可靠，坚持 200 更好我认为。我将查询剥离到

```
$fql[$id] = "select '' from event_member where uid = $id LIMIT 1"; 
```

所以我只知道用户实际上有任何邀请。

# c++ - WaitForSingleObject - 线程等待形成队列吗？

> ID：10461473
> 
> 赞同：8
> 
> 时间：2012-05-05T11:38:34.257
> 
> 标签：c++, windows, multithreading, mutex

如果我设置 3 个线程等待互斥锁被释放，它们是根据请求的顺序形成队列还是未定义的行为（即我们不知道哪个线程会先获取它）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T12:37:04.720

它在[SDK 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684266%28v=vs.85%29.aspx)中明确记录：

> 如果多个线程在互斥体上等待，则选择一个等待线程。不要假设先进先出 (FIFO) 顺序。内核模式 APC 等外部事件可以更改等待顺序。

这类事件完全不受您的控制。所以“未定义的行为”是描述它的合适方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T17:32:54.147

互斥对象大多是公平的。APC 案例可能会发生，但并不常见。特别是如果线程不执行 I/O 或正在使用完成端口或同步执行 I/O。

大多数 Windows 用户模式锁（SRWLock、CriticalSection）如果您可以在不阻塞的情况下获取它们，则它们是不公平的，但如果您必须在内核中进行阻塞则公平。这样做的原因是为了避免锁定车队。当公平锁被争用时，每个获取者都必须经过调度程序和上下文切换路径才能获得锁。没有人可以“跳过”而只是拿锁，因为他们碰巧正在运行。因此，队列中最后一个线程的锁获取时间增加了队列中每个先前线程的调度和上下文切换时间。直到外部负载大部分被移除，系统才会从这种状态恢复，因为这是一个稳定的状态。

出于性能考虑，我建议使用上述用户模式锁之一，因为如果它们适合您的场景，它们比内核互斥锁快得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:44:34.067

唤醒顺序未定义，请参见

[单个 SetEvent() 能否触发多个 WaitForSingleObject()](https://stackoverflow.com/questions/621707/can-a-single-setevent-trigger-multiple-waitforsingleobject)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-05T12:14:28.797

对此似乎有非常不同的意见，并且在任何地方都没有明确的信息。在这个线程中：[http](http://us.generation-nt.com/answer/are-events-fair-help-38447612.html) ://us.generation-nt.com/answer/are-events-fair-help-38447612.html有些人似乎建议使用忽略优先级的简单fifo队列来实现事件的公平性，而其他人则说不应该假设公平。

底线，我认为你最好不要将你的逻辑建立在公平之上，或者用你自己的实现来包装一个事件来保证公平。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T11:48:46.630

是的，只有一个线程会被唤醒并锁定互斥锁。但是顺序是不确定的。

# error-handling - Tapestry 5 中的类型强制错误处理

> ID：10461476
> 
> 赞同：0
> 
> 时间：2012-05-05T11:38:41.263
> 
> 标签：error-handling, tapestry, type-coercion

有时用户输入无法正确强制转换的文本。例如字符串-> 钱。'123 USD' 可以正确强制，但 '123 ZZZ' 或 'dwerss' 不能。其中一个示例可以通过客户端的正则表达式进行检查，但其他示例不能。我应该如何处理这些错误并向用户显示正确的消息？它在任何教程中都有描述吗？任何链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T00:29:53.900

尝试使用由[jumpstart](http://jumpstart.doublenegative.com.au/jumpstart/examples/input/creatingtranslators1)和[wiki](http://wiki.apache.org/tapestry/CreatingCustomTranslators)描述的[翻译器](http://tapestry.apache.org/tapestry5/apidocs/org/apache/tapestry5/Translator.html)。

如果输入完全不可用，您可以在 parseClient 实现中抛出 ValidationException。

# c++ - A' 无法解决

> ID：10461482
> 
> 赞同：0
> 
> 时间：2012-05-05T11:39:22.403
> 
> 标签：c++, eclipse, eclipse-cdt

I have this problem Symbol 'A' could not be resolved in file B.h , I'm using Eclipse IDE for C/C++ Developers:

```
//B.h file

#ifndef __B_H__
#define __B_H__

#include "A.h"

class B:  public cs::A{

};

#endif 
```

that include A.h file:

```
//A.h file

#ifndef A_H_
#define A_H_
namespace cs{
class A {

};
}

#endif 
```

What I'm missing here ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:05:55.920

代码没有错。很可能您的包含路径不正确。

```
#pragma message ("Parsing A.h") 
```

# git - 如何让 Git/Subversion 1.7 在 AIX 6.1 上运行？

> ID：10461483
> 
> 赞同：1
> 
> 时间：2012-05-05T11:39:33.290
> 
> 标签：git, svn, aix

我已经从[http://www.perzl.org/aix/index.php](http://www.perzl.org/aix/index.php)下载了 git 1.7.10 和 subversion 1.7.4 RPM ，但是当我尝试运行 git svn 时，我遇到了这个问题：

```
multi/auto/SVN/_Core/_Core.so'
for module SVN::_Core: rtld: 0712-001 Symbol svn_handle_warning was
referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
rtld: 0712-001 Symbol svn_handle_warning2 was referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
rtld: 0712-001 Symbol svn_error_clear was referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
rtld: 0712-001 Symbol svn_error_compose was referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
rtld: 0712-001 Symbol svn_swig_pl_make_pool was referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
rtld: 0712-001 Symbol svn_diff_hunk_reset_modified_text was referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
rtld: 0712-001 Symbol svn_diff_hunk_reset_original_text was referenced
     from module
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/auto/SVN/_Core/_Core.so(),
but a runtime definition
           of the symbol was not found.
Additional errors occurred but are not reported. at
/opt/freeware/lib/perl5/5.8.8/ppc-thread-multi/DynaLoader.pm line 227.
 at /opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/SVN/Base.pm
line 59
BEGIN failed--compilation aborted at
/opt/freeware/lib/perl5/vendor_perl/5.8.8/ppc-thread-multi/SVN/Core.pm
line 5.
Compilation failed in require at /opt/freeware/libexec/git-core/git-svn line 41.
-bash-3.2$ nm -g _Core.so | grep svn_handle_warning
._wrap_svn_handle_warning T   268581888         808
._wrap_svn_handle_warning2 T   268582696        1048
.svn_handle_warning  T   268469632
.svn_handle_warning2 T   268469672
_wrap_svn_handle_warning D   536899412
_wrap_svn_handle_warning2 D   536899400
svn_handle_warning   U           -
svn_handle_warning2  U           - 
```

所以，在我看来 Core.so 没有正确构建。

谁能概述我如何调试解决此类问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:12:04.620

如果您的系统上有 Java，我建议您将[SubGit](http://subgit.com)安装到您的 SVN 服务器中并使用任何 SVN 或 Git 接口。SubGit 将即时同步 Git 和 SVN 存储库。同步时存储库和阻塞（几秒钟），所以这个解决方案是并发安全的。

如果您需要仅限客户端的解决方案，您可以尝试[SmartGit](http://www.syntevo.com/smartgit/index.html)。它也是基于 java 的，所以不会受到 git-svn/perl 问题的影响。

两种解决方案都执行更好的 SVN<->Git 翻译，保留 EOL、忽略、标签等概念（git-svn 没有）。

# html - 布局问题（内容 3 张图片）

> ID：10461488
> 
> 赞同：1
> 
> 时间：2012-05-05T11:39:58.710
> 
> 标签：html, css

当我尝试在内容（中间）部分使用 p 元素时，我得到了以下结果。我对拥有空间和破坏布局不感兴趣。

![在此处输入图像描述](../Images/5e9d1a6938d270c899967b3f5ca1d9ea.png)

**HTML**

```
<div id="main">
    <div id="content_top">
        <h1>Welcome</h1>
    </div>
    <div id="content_mid">
        <h2>Welcome</h2>
        <p>Text</p>
    </div>
    <div id="content_bot"></div>
</div> 
```

**CSS**

```
#content_top {
    width: 560px;
    height: 92px;
    background: url(../images/content_top.png);
    padding: 70px 70px 0px 70px;
}

#content_mid {
    width: 560px;
    padding: 0px 70px 0px 70px;
    background: url(../images/content_mid.png);
}

#content_bot {
    width: 700px;
    height: 344px;
    background: url(../images/content_bot.png);
}
#main {
    width: 700px;
    margin-right: 10px;
    float: left;
} 
```

如何确保#content_mid（我将放置所有内容）中的任何元素都不会破坏布局？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:59:44.457

解决方案是`overflow:hidden;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:40:25.153

段落元素 -

引入了一个小边距。清除它 - clearfix，即

```
p {
padding:0; 
margin:0;
} 
```

Havnt 对其进行了测试，但这应该可以修复您的布局。

# jquery - 将图像随机发送到 div

> ID：10461489
> 
> 赞同：0
> 
> 时间：2012-05-05T11:40:02.293
> 
> 标签：jquery, html, jquery-ui, jquery-plugins

我有一个 html5 项目，我也使用 jquery。这个项目是一个排序游戏。我想对这些图像进行洗牌。例如我有 3 张牌，当我开始游戏时，我的牌顺序是 1-2-3。当我实现对这个订单进行排序时，我想下订单，例如 2-3-1。有什么解决方案可以做到这一点吗？

```
<div id="source1" class="block">1</div> 
<div id="source2" class="block">2</div>
<div id="source3" class="block">3</div>
<br>
<div id="dest1" class="dest">1</div>
<div id="dest2" class="dest">2</div>
<div id="dest3" class="dest">3</div> 
```

这是一个示例，我想将图像发送到这些 div 中，并且我还根据此图像编号制作 div id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:51:56.130

你为什么不这样做：

*   获取所有图像
*   打乱图像（列表，例如数组）
*   循环 divs，将图像设置为列表中的第 n 个图像（已经洗牌）。
*   根据第 n 个图像设置您正在循环的 id foreach div

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:34:58.087

在[AR-labs.org 上](http://ar-labs.org/)，我们希望将我们的图像打乱，使其具有随机顺序。为了存档，我们收集了所有图像（使用共享类），循环遍历所有元素，并用任何容器内容随机替换它的内容（它也可以替换自己）。

我们的代码：

```
var persons = document.getElementsByClassName("person");
var personNum = persons.length;
for( var i = 0; i < personNum; i++ ){
    var b = Math.floor( Math.random() * personNum );
    persons[i].outerHTML = [persons[b].outerHTML, persons[b].outerHTML = persons[i].outerHTML][0];
} 
```

它非常基本（不是最漂亮的代码），但它可以工作。

当您想使用 jQuery 时，只需将 DOM 访问替换为相应的 jQuery 函数即可。

# java - 为什么Java中没有（123 == 0123）？

> ID：10461490
> 
> 赞同：24
> 
> 时间：2012-05-05T11:40:18.087
> 
> 标签：java, integer, operators, equality-operator

我正在使用 Eclipse 在 Android 中开发应用程序。我编写了以下代码并在测试中第一个和第三个“ **if** ”块不可访问。为什么？

当我将前导零添加到数字时，等号运算符返回 false。

```
int var = 123;
if (var == 0123) {
    //not reachable
}
if (var == 123) {
    //reachable
}
if (var == (int)0123) {
    //not reachable
}
if (var == (int)123) {
    //reachable
} 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-05T11:41:06.963

`0123`是八进制数（[前导 0](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.1)），而`123`是十进制数。

所以 0123 实际上等于 83。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-05T11:42:47.867

> 任何以零开头的整数都是八进制数（以 8 为基数）。

`0123`是八进制数并且`123`是十进制数

```
 0123 = (3*8^0) +(2*8^1)+(1*8^2)+(0*8^4)
        =3+16+64+0
        =83 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-05T11:43:25.927

因为 0123 不是十进制数字，它的八进制（以 8 为底）所以这等于 83

要将数字 k 转换为十进制，请使用定义其 base-8 表示的公式：

![在此处输入图像描述](../Images/f59e2d091041c33f34543cc1a7f6a9ad.png)

```
0123 base-8 = 83 decimal

0123 = (3*8^0) +(2*8^1)+(1*8^2)+(0*8^4)
     =3+16+64+0
     =83 
```

> 八进制数字由一个 ASCII 数字 0 后跟一个或多个 ASCII 数字 0 到 7 组成，可以表示正整数、零整数或负整数。

**注意：**八进制值在 java 中用前导零表示，普通十进制数不能有前导零

# javascript - 值/占位符 - 不同的文字样式

> ID：10461491
> 
> 赞同：4
> 
> 时间：2012-05-05T11:40:47.970
> 
> 标签：javascript, jquery, css, placeholder

我在使用占位符时遇到问题。我想问一下，是否有可能在输入字段中设置值的样式，但是以不同的方式设置该值的单词。

例如，如果我们的输入字段具有`"First Name"`我想要的初始值`green color`for`"First"`和`red color`for `"Name"`（这只是一个示例）。

这甚至可能吗？

注意：我使用值作为“占位符”（而不是占位符 html 属性），因为 ie。

```
<input type="text" value="First Name" onFocus="if (this.value == 'First Name') {this.value = '';}" onBlur="if (this.value == '') {this.value = 'First Name';}" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:16:06.197

不幸的是，这是不可能的。当涉及到表单元素的样式时，有很多障碍，可以为元素而不是字符设置颜色，试试这个：

[http://jsfiddle.net/Fgd2e/1/](http://jsfiddle.net/Fgd2e/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:23:36.143

`color`您可以使用style 属性更改输入的颜色。为每个单词设置不同的颜色要困难得多。您需要有一个显示正确颜色的叠加层。此外，光标会消失，使用户不知道他当前在哪里。

# bash - 让 bash 回显执行命令的最终形式，可以吗？

> ID：10461496
> 
> 赞同：1
> 
> 时间：2012-05-05T11:41:22.557
> 
> 标签：bash, echo

我有一个小的 bash 脚本`build1c.sh`。

```
if [ "$1" = "" ]; then
    echo "You must give a .c file to compile."
    exit 1
fi

cfile=$1
stem=${cfile%.*}

set -o verbose

gcc -c -g -Wall $cfile
gcc -o $stem $stem.o common.o reentrant.o -lssl -lcrypto

set +o verbose # optional here 
```

目的是仅回显正在执行的 gcc 命令。我在某种程度上工作。当我打电话时`build1c.sh client2.c`，我看到了输出

```
gcc -c -g -Wall $cfile
gcc -o $stem $stem.o common.o reentrant.o -lssl -lcrypto

set +o verbose # optional here 
```

还是很古怪，对吧？那些 var reference( `$cfile`, `$stem`) 没有得到它们的最终形式，所以回显变得非常无用。

你知道，我喜欢看的是

```
gcc -c -g -Wall client2.c
gcc -o client2 client2.o common.o reentrant.o -lssl -lcrypto 
```

有没有正确而简洁的方法来解决这个问题？

顺便说一句：小请求：我可以抑制`set +o verbose`自身的回声吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:53:49.920

替换`set -o verbose`为`set -x`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T12:42:21.920

```
function echo_and_execute {
    echo "$@"
    "$@"
}

echo_and_execute gcc -c -g -Wall $cfile
echo_and_execute gcc -o $stem $stem.o common.o reentrant.o -lssl -lcrypto 
```

# c# - Sharepoint 2010 上的 aspx 页面中长时间运行的任务在浏览器中显示“页面无法显示”

> ID：10461498
> 
> 赞同：0
> 
> 时间：2012-05-05T11:41:31.683
> 
> 标签：c#, asp.net, sharepoint, sharepoint-2010

我们在 Sharepoint 2010 中部署的 aspx 页面上有一个长时间运行的进程。假设该进程是 Thread.Sleep（10 分钟），并在 EventViewer 中记录该进程成功完成。

在域 A 和 B 服务器中部署代码，一切正常。但是在Domain C SharePoint服务器中部署代码后，页面在两分钟后完全准确地在浏览器中显示“页面无法显示”。

附加 HTTPWatch/Fiddler 显示服务器重置连接。检查 IIS 日志显示连接已中止/终止。

奇怪的是，即使客户端看到上述错误，服务器进程也会完成。服务器日志显示长时间运行的过程已完成。

这可能是网络问题吗？防火墙问题或 Sharepoint 2010 服务器问题？我们尝试在 Templates\Layouts\web.config 文件中更改执行超时，但仍然没有用。更改了 IIS 中 AppPool 帐户的超时值。更改浏览器的 KeepConnectionAlive 设置。似乎没有任何效果。

非常感谢任何帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T11:54:49.377

这可能是与不正确的 DNS/代理设置、MOSS 管理中心中的 AlternateMapping 设置有关的问题。

# iphone - UITableview iPhone中的多个复选框

> ID：10461504
> 
> 赞同：0
> 
> 时间：2012-05-05T11:41:55.803
> 
> 标签：iphone, uitableview

我是 iOS 的新手，我在我的 tableview 中创建动态按钮我已经在按钮上设置了一个图像以进行检查和取消选中我要做的是当我点击（或检查）按钮时，indexpath 行上的数据将添加到我的数组中。如果我取消选择它，数据将从我的数组中删除。请帮我

```
-(void)btnForCheckBoxClicked:(id)sender
{

UIButton *tappedButton = (UIButton*)sender;

indexForCheckBox= [sender tag];

if([tappedButton.currentImage isEqual:[UIImage imageNamed:@"checkbox_unchecked.png"]]) 
{

    [sender  setImage:[UIImage imageNamed: @"checkbox_checked.png"] forState:UIControlStateNormal];
    strinForCheckBox= [ApplicationDelegate.ArrayForSearchResults objectAtIndex:indexForCheckBox];
    [arrForCheckBox addObject:strinForCheckBox];
    NSLog(@"Sender Tag When Add %d", indexForCheckBox);
    NSLog(@"Array Count Check Box %d",[arrForCheckBox count]);

}

else
{

        [sender setImage:[UIImage imageNamed:@"checkbox_unchecked.png"]forState:UIControlStateNormal];
        [arrForCheckBox removeObjectAtIndex:indexForCheckBox];
        NSLog(@"Sender Tag After Remove %d", indexForCheckBox);
        NSLog(@"Array Count Uncheck Box %d",[arrForCheckBox count]);

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T11:54:41.357

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }

    if ([selectedRowsArray containsObject:[contentArray objectAtIndex:indexPath.row]) {
        cell.imageView.image = [UIImage imageNamed:@"checked.png"];
    }
    else {
       cell.imageView.image = [UIImage imageNamed:@"unchecked.png"];
    }
    UITapGestureRecogniser *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleChecking:)
    [cell.imageView addGestureRecognizer:tap];
    [tap release];

    cell.textLabel.text = [contentArray objectAtIndex];
    return cell;
}

- (void) handleChecking:(UITapGestureRecognizer *)tapRecognizer {
    CGPoint tapLocation = [tapRecognizer locationInView:self.tableView];
    NSIndexPath *tappedIndexPath = [self.tableView indexPathForRowAtPoint:tapLocation];

    if (selectedRowsArray containsObject:[contentArray objectAtIndex:tappedIndexPath.row]) {
        [selectedRowsArray removeObject:[contentArray objectAtIndex:tappedIndexPath.row]];
    }
    else {
        [selectedRowsArray addObject:[contentArray objectAtIndex:tappedIndexPath.row]];
    }
    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:tappedIndexPath] withRowAnimation: UITableViewRowAnimationFade];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:48:48.547

我想这个问题已经回答了一段时间了！先检查一下，然后告诉我们这是否是您要找的？

[如何向 UITableViewCell 添加复选框？](https://stackoverflow.com/questions/3666629/iphone-sdk-how-to-add-checkboxes-to-uitableviewcell)

[图片 http://img208.yfrog.com/img208/6119/screenshotkmr.png](http://img208.yfrog.com/img208/6119/screenshotkmr.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:48:24.307

您可以在按钮单击方法中添加它。

首先设置布尔值，单击时设置为“是”，第二次单击设置为否，当您第一次单击时，使用数组 addobject 属性和其他单击 removeobject 属性在数组中添加该索引值。

```
-(void)list
{

if(isCheck==YES)
{
    //add array object  here
    isCheck=NO;
}
else if(isCheck==NO)
{
  //remove array object here
   isCheck=YES;
}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T10:01:02.680

我找到了另一种方法。[从@The Saad](https://stackoverflow.com/a/10461589/940096)提取的代码而且，我刚刚使用键/值对修改为有用的，如下面的代码 -

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [self.tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier] autorelease];
    }

    if ([[selectedRowsArray objectAtIndex:indexPath.row] containsObject:@"YES"])
        cell.imageView.image = [UIImage imageNamed:@"checked.png"];
    else
       cell.imageView.image = [UIImage imageNamed:@"unchecked.png"];

    UITapGestureRecogniser *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleChecking:)
    [cell.imageView addGestureRecognizer:tap];
    [tap release];

    cell.textLabel.text = [contentArray objectAtIndex];
    return cell;
}

- (void) handleChecking:(UITapGestureRecognizer *)tapRecognizer {
    CGPoint tapLocation = [tapRecognizer locationInView:self.tableView];
    NSIndexPath *tappedIndexPath = [self.tableView indexPathForRowAtPoint:tapLocation];

    if ([[selectedRowsArray objectAtIndex:tappedIndexPath.row] containsObject:@"YES"])
        [selectedRowsArray replaceObjectAtIndex:tappedIndexPath.row withObject:[NSSet setWithObject:@"NO"]];
    else
        [selectedRowsArray replaceObjectAtIndex:tappedIndexPath.row withObject:[NSSet setWithObject:@"YES"]];

    [self.tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:tappedIndexPath] withRowAnimation: UITableViewRowAnimationFade];
} 
```

添加以下对象`selectedRowsArray`以及您`self.tableView`的行数。因此，您需要添加 bool 值，如下所示

```
for ( int i = 0; i < tableViewRowCount; i++ ) { // tableViewRowCount would be your tableView's row count
    ....
    ....
    ....
    [selectedRowsArray addObject:[NSSet setWithObject:@"NO"]];
    ....
    ....
} 
```

希望这可以帮助！干杯!

**更新**

通过使用更新的代码，您不需要保留键/值对`NSMutableDictionary`来过度使用它。`NSSet`为您提供更好的方法。

# jquery - 如何通过 jquery 刷新其他 div？

> ID：10461508
> 
> 赞同：0
> 
> 时间：2012-05-05T11:42:24.103
> 
> 标签：jquery

我通过 iframe 在一个页面中调用了两个不同的页面。一个用于添加记录，另一个用于显示所有记录。在这里，当我从第一个 iframe 添加任何记录时，我想重新加载第二个 iframe。

```
<div style="float:left">
    <iframe src="dial_card.php" width="300" height="400" scrolling='no' seamless="no" frameborder="0"></iframe> </div>
<div style="float:left; margin-left:40px" id="dial_list1">
    <iframe src="dial_list.php" width="500" height="400" scrolling='no' frameborder="1" id="dial_list"></iframe>
</div> 
```

# ios - iOS Game Center 的“注册”屏幕 - 以编程方式更改方向

> ID：10461511
> 
> 赞同：0
> 
> 时间：2012-05-05T11:42:39.283
> 
> 标签：ios, orientation, landscape, game-center

出于某种原因，我不能使用任何自动功能来处理设备上的旋转（如 shouldAutorotateToInterfaceOrientation）。我总是不得不使用这个手动完成：

```
SOMETHING.view.transform = CGAffineTransformMakeRotation( angle * M_PI ); 
```

我真的不介意——我什至喜欢手动旋转所有东西。这工作正常，除了游戏中心。

我对旋转媒人没有任何问题——你可以在其中寻找人玩的窗口。

我会提到这一点以防万一，因为我在这里看到过类似的问题——但这*不是*我遇到的问题：

```
GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];    
    mmvc.matchmakerDelegate = self;

    [presentingViewController presentModalViewController:mmvc animated:YES];
    mmvc.view.transform = CGAffineTransformMakeRotation( angle * M_PI ); 
```

这可以完美地旋转 Game Center 的媒人，但是我不知道如何为媒人之前的实际“登录”屏幕做同样的事情。我没有创建视图控制器，调用“身份验证”功能时，一切似乎都是自动完成的。而且由于它是自动完成的，我不知道如何控制结果视图。

```
- (void)authenticateLocalUser { 

if (!gameCenterAvailable) return;

NSLog(@"Authenticating local user...");
if ([GKLocalPlayer localPlayer].authenticated == NO) {     

     [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {

     if ([GKLocalPlayer localPlayer].isAuthenticated)

     {

         // Perform additional tasks for the authenticated player.
          [[GCHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:2 viewController:nil];

     }

     }];  
} else {
    NSLog(@"Already authenticated!");
} 
```

}

在这一点上，我已经得到了一个“登录”屏幕，我不知道如何控制它。

**如何在不使用任何自动功能的情况下以编程方式更改该屏幕（以及输入 Apple ID 和密码的下一个屏幕）的方向？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T10:40:16.123

最新版本的 SDL 2.0 大大改进了方向支持。我在这里将它与 Game Center 应用程序一起使用，该应用程序可以显示并旋转到任何方向，并且运行良好。

[http://www.libsdl.org/tmp/SDL-2.0.zip](http://www.libsdl.org/tmp/SDL-2.0.zip)

# php - 结合 SELECT 和 UPDATE 以避免重复选择

> ID：10461514
> 
> 赞同：3
> 
> 时间：2012-05-05T11:42:56.457
> 
> 标签：php, mysql, sql, mysqli

我想结合 SELECT 和 UPDATE 查询，以避免重复选择行。

这是我的示例代码：

```
private function getNewRCode() {

    $getrcodesql = "SELECT * FROM `{$this->mysqlprefix}codes` WHERE `used` = 0 LIMIT 1;";
    $getrcodequery = $this->mysqlconn->query($getrcodesql);

    if(@$getrcodequery->num_rows > 0){

        $rcode = $getrcodequery->fetch_array();

        $updatercodesql = "UPDATE `{$this->mysqlprefix}codes` SET `used` =  '1' WHERE `id` = {$rcode['id']};";
        $this->mysqlconn->query($updatercodesql);

        $updateusersql = "UPDATE `{$this->mysqlprefix}users` SET `used_codes` =  `used_codes`+1, `last_code` =  '{$rcode['code']}', `last_code_date` =  NOW() WHERE `uid` = {$this->uid};";
        $this->mysqlconn->query($updateusersql);

        $output = array('code' => $rcode['code'],
                        'time' => time() + 60*60*$this->houroffset,
                        'now' => time()
                        );

        return $output;

    }

} 
```

我想立即执行`$getrcodesql`，`$updatercodesql`以避免将相同的代码用于不同的用户。

我希望您了解我的问题并知道解决方案。

问候，弗雷德里克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:17:57.407

如果你反过来做会更容易。
关键是您的客户可以在您执行and**之前**生成唯一值。`UPDATE``SELECT`

将列的类型更改为`used`其他类型，以便您可以在其中存储 GUID 或时间戳，而不仅仅是 0 和 1。
*（我不是 PHP/MySQL 专家，所以您可能比我更清楚到底是什么使用）*

然后你可以这样做（在伪代码中）：

```
// create unique GUID (I don't know how to do this in PHP, but you probably do)
$guid = Create_Guid_In_PHP();

// update one row and set the GUID that you just created
update codes
set used = '$guid'
where id in
(
    select id 
    from codes
    where used = ''
    limit 1
);

// now you can be sure that no one else selected the row with "your" GUID
select *
from codes
where used = '$guid'

// do your stuff with the selected row 
```

# c++ - c++：按成员分配是如何工作的？

> ID：10461518
> 
> 赞同：12
> 
> 时间：2012-05-05T11:43:32.213
> 
> 标签：c++, variable-assignment

> **可能重复：**
> [复制控制函数中如何处理 C 数组成员？](https://stackoverflow.com/questions/4164279/how-are-c-array-members-handled-in-copy-control-functions)

如果我不覆盖`operator =`类的，它将使用默认的成员分配。

但是这是什么意思？

```
struct A {
    int array[100];
};
A a;
A b=a; 
```

没有错误。怎么`b`应付`a`的`array`？通常`array_b = array_a`是无效的。

另一个例子：

```
struct A {
    vector<int> vec;
};
A a;
A b=a; 
```

怎么`b`应付`a`的`vec`？通过assignment( `vec_b = vec_a`)、constructor( `vec_b = vector<int>(vec_a)`)还是其他神秘的方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T11:52:11.907

```
A b=a; 
```

不是赋值，它被称为**[Copy Initialization](http://www.gotw.ca/gotw/036.htm)**。

`b`调用隐式生成的复制构造函数以从现有对象创建新对象`a`。
隐式生成的复制构造函数制作`array`成员的副本。

为了完整起见，我将在此处添加来自标记副本的标准引用。

**C++03 标准：12.8（复制类对象）**

> 每个子对象都以适合其类型的方式复制：
> 
> *   如果子对象是类类型，则使用该类的复制构造函数；
> *   **如果子对象是一个数组，则以适合元素类型的方式复制每个元素；**
> *   如果子对象是标量类型，则使用内置赋值运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:54:00.783

如果成员具有复制构造函数，则它们会被调用。如果没有，默认的复制构造函数相当于 memcpy。请参阅[成员分配和初始化](http://msdn.microsoft.com/en-us/library/x0c54csc%28v=vs.80%29.aspx)。

在非指针数组的情况下，每个元素都被复制。

# javascript - Get property name by id

> ID：10461519
> 
> 赞同：0
> 
> 时间：2012-05-05T11:44:12.543
> 
> 标签：javascript, spidermonkey

I'm using this code to iterate over the properties passed to a native function:

```
JSObject *iter = JS_NewPropertyIterator(cx, jsargs);
jsid id;
while(JS_NextProperty(cx, iter, &id) && id != JSID_VOID) {
        jsval vp;
        if(!JS_GetPropertyById(cx, jsargs, id, &vp)) {
                continue;
        }
        // ...
} 
```

This works fine to get the *value* of the property, however, I need the *name* of that property, too.

I couldn't find any of the various property-related `...ById()` functions which give me the property name.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:06:45.827

Looking at existing code which needs this behavior (the json encoder) helped.

[`JS_IdToValue`](https://developer.mozilla.org/en/SpiderMonkey/JSAPI_Reference/JS_IdToValue) is the function I was looking for.

# java-me - 设备重启时自动启动 MIDlet？

> ID：10461521
> 
> 赞同：7
> 
> 时间：2012-05-05T11:44:17.703
> 
> 标签：java-me, nokia, midp, s60

我在 J2ME 中工作。我希望我的应用程序必须**在我的设备重新启动时自动启动**。

我已经按照建议在我的 JAD 文件中创建了**Nokia-MIDlet-auto-start: yes条目**

[http://library.developer.nokia.com/index.jsp?topic=/Java_Developers_Library/GUID-C22F1733-6877-42EC-A610-40F9E592C92D.html](http://library.developer.nokia.com/index.jsp?topic=/Java_Developers_Library/GUID-C22F1733-6877-42EC-A610-40F9E592C92D.html)

MIDlet 目前未签名，我正在使用诺基亚手机进行测试（特别是诺基亚 S60）。如上所述，无论我采取了哪些步骤，当我重新启动设备时，应用程序都不会自动启动。

请建议我应该怎么做才能在设备启动时自动重新启动我的 MIDLet。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T23:13:39.367

从您的链接：

“您可以将在制造商或运营商域中运行的 MIDlet 设置为在设备启动时自动启动”

这意味着它只有在诺基亚或手机运营商信任您用来签署 MIDlet 的证书时才有效。

该属性不适用于未签名的 MIDlet。

[此问题](https://stackoverflow.com/questions/1710423/privileged-operations-in-netbeans-mobility)包含有关域的更多信息。

# user-interface - 进行全球化和本地化时调整文本按钮大小的最佳实践

> ID：10461525
> 
> 赞同：2
> 
> 时间：2012-05-05T11:44:59.183
> 
> 标签：user-interface, localization, web, ellipsis

假设我们在一个网页上有一个覆盖 DHTML 面板，该面板在顶部包含两个按钮，占据了对话框的整个宽度，如下所示：

![控制板](../Images/f3712c7bdabd1e724ac0e6aeffba0134.png)

Button 1 和 Button 2 的文本应本地化。复选框组的内容是静态的，不应本地化。

不同语言的按钮文本宽度可能存在很大差异（与英文版本相比，大约有 100% 的额外空间）。

问题是根据文本内容的长度应用哪种策略来调整 Button 1 和 Button 2 的大小：

1.  使按钮固定宽度并用省略号截断文本内容。
2.  使按钮固定宽度并在后续行中换行文本内容，从而使按钮的高度增加。
3.  使按钮宽度固定，但使其宽度足以容纳所有语言的文本，而无需截断或换行。
4.  使按钮动态调整宽度并使面板随其大小水平增长。

根据发现的几个 UI 本地化最佳实践，我倾向于使用第三个或第四个选项：

*   [为本地化准备用户界面](http://msdn.microsoft.com/en-us/library/aa292162(v=vs.71).aspx?ppud=4)
*   [全球化和本地化的最佳实践](http://msdn.microsoft.com/en-us/library/aa291552(v=vs.71).aspx)
*   [逐步全球化 - UI 注意事项](http://msdn.microsoft.com/en-us/goglobal/bb688120)

我们仍然在团队中进行一些辩论，讨论最佳选择，听到社区有意识的外部声音会很有趣。

我对这个特定案例的最佳方法以及解决与本地化有关的 Web UI 大小问题的一般指南感兴趣。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:39:08.007

您可能知道，用省略号（或单点）缩短的文本可能难以理解：

> 如何压缩。是吗？

你应该在移动领域（手机，平板电脑等）看到很多这样的员工，这样的翻译看起来**很难**看。好的，在较低的屏幕分辨率下，您实际上别无选择（除非您可以创建一些自动滚动文本）。但如果是 Web 界面，您当然可以选择。

通常，有两种解决方案对应于您的第 3 点和第 4 点。就个人而言，我倾向于＃4 - 使按钮自动调整大小。这当然会导致按钮大小不一致，但我们对此无能为力。

如果您不能使用解决方案#4（即UI 设计师是这种技术的强烈反对者），您可以稍微修改解决方案#3。基本上，我在过去的项目中使用的是，我有固定大小的按钮，默认大小能够适应大多数语言（当然波兰语和俄语除外），但我也有几个定义更宽按钮的 CSS 类。当本地化成“太长”的语言时，我只是使用了最宽的按钮类。如果文本仍然不合适，那么我要求翻译人员缩短它（通常重新措辞并用一个点缩短文本作为最后的手段）。
但是，请记住，它会增加本地化成本。这就是我不推荐这种方法的原因。

至于解决方案#2，你最终会得到丑陋的 UI。您根本无法控制浏览器如何包装文本，并且您将有很多文本超出按钮剪切矩形（重叠）。

至于解决方案#1，使用省略号是一个坏主意，原因有两个。第一个是，省略号在许多语言中都无效（尤其是亚洲语言）。第二个是，据我了解，您想*自动*执行此操作。在这种情况下，您将无法测量字符串——它们在屏幕上的实际大小，使用***后备字体编写***. 在 Web UI 的情况下，您不知道用户是否安装了特定的字体，因此您将猜测大小（好吧，使用 Dojo，您理论上可以在客户端测量它）。这当然会导致文本重叠（如果您决定动态缩短所选字体）或完全无法理解的文本（如果您决定在说 8 个字符后缩短）。我有一个开始使用静态缩短的项目，这完全是一团糟。然后我们切换到动态，它仍然不够好。
为了反驳潜在的 UI Designer 论点“我们没有字符串扩展的空间”，我只能说***这意味着你设计的界面不正确，因为它太拥挤了***. 这就是 I18n 与 UI 设计最佳实践齐头并进的一点：力求简单（在 UI 设计中）。结果将易于使用且易于本地化应用程序。

# python - 两个字典的合并和求和

> ID：10461531
> 
> 赞同：75
> 
> 时间：2012-05-05T11:45:52.343
> 
> 标签：python, dictionary

我在下面有一个字典，我想添加到另一个字典，其中不一定有不同的元素并合并它的结果。是否有任何内置功能，或者我需要自己制作？

```
{
  '6d6e7bf221ae24e07ab90bba4452267b05db7824cd3fd1ea94b2c9a8': 6,
  '7c4a462a6ed4a3070b6d78d97c90ac230330603d24a58cafa79caf42': 7,
  '9c37bdc9f4750dd7ee2b558d6c06400c921f4d74aabd02ed5b4ddb38': 9,
  'd3abb28d5776aef6b728920b5d7ff86fa3a71521a06538d2ad59375a': 15,
  '2ca9e1f9cbcd76a5ce1772f9b59995fd32cbcffa8a3b01b5c9c8afc2': 11
} 
```

字典中的元素数量也是未知的。

在合并考虑两个相同的键的情况下，这些键的值应该相加而不是覆盖。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2012-05-05T12:38:47.177

你没有说你想如何合并，所以选择：

```
x = {'both1': 1, 'both2': 2, 'only_x': 100}
y = {'both1': 10, 'both2': 20, 'only_y': 200}

print {k: x.get(k, 0) + y.get(k, 0) for k in set(x)}
print {k: x.get(k, 0) + y.get(k, 0) for k in set(x) & set(y)}
print {k: x.get(k, 0) + y.get(k, 0) for k in set(x) | set(y)} 
```

结果：

```
{'both2': 22, 'only_x': 100, 'both1': 11}
{'both2': 22, 'both1': 11}
{'only_y': 200, 'both2': 22, 'both1': 11, 'only_x': 100} 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-06-20T04:08:15.120

您可以执行`+`, `-`, `&`, and `|`(intersection and union) with [`collections.Counter()`](https://docs.python.org/2/library/collections.html#collections.Counter)。

我们可以执行以下操作（注意：只有正计数值会保留在字典中）：

```
from collections import Counter

x = {'both1':1, 'both2':2, 'only_x': 100 }
y = {'both1':10, 'both2': 20, 'only_y':200 }

z = dict(Counter(x)+Counter(y))

print(z)
[out]:
{'both2': 22, 'only_x': 100, 'both1': 11, 'only_y': 200} 
```

要解决结果可能为零或负数的加法问题，请使用[`Counter.update()`](https://docs.python.org/2/library/collections.html#collections.Counter.update)加法和[`Counter.subtract()`](https://docs.python.org/2/library/collections.html#collections.Counter.subtract)减法：

```
x = {'both1':0, 'both2':2, 'only_x': 100 }
y = {'both1':0, 'both2': -20, 'only_y':200 }
xx = Counter(x)
yy = Counter(y)
xx.update(yy)
dict(xx)
[out]:
{'both2': -18, 'only_x': 100, 'both1': 0, 'only_y': 200} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-02-28T23:47:56.113

基于[georg](https://stackoverflow.com/a/10461916/1112586)、[NPE](https://stackoverflow.com/a/10461952/1112586)、[Scott](https://stackoverflow.com/a/30950164/1112586)和[Havok](https://stackoverflow.com/a/46128481/1112586)答案的附加说明。

我试图对 2 个*或更多*词典的集合执行此操作，并且有兴趣查看每个词典所花费的时间。因为我想在任意数量的字典上这样做，我不得不稍微改变一些答案。如果有人对他们有更好的建议，请随时编辑。

这是我的测试方法。我最近对其进行了更新，以包含使用更大字典的测试，并再次包含 Havok 和 Scott 的新方法：

首先，我使用了以下数据：

```
import random

x = {'xy1': 1, 'xy2': 2, 'xyz': 3, 'only_x': 100}
y = {'xy1': 10, 'xy2': 20, 'xyz': 30, 'only_y': 200}
z = {'xyz': 300, 'only_z': 300}

small_tests = [x, y, z]

# 200,000 random 8 letter keys
keys = [''.join(random.choice("abcdefghijklmnopqrstuvwxyz") for _ in range(8)) for _ in range(200000)]

a, b, c = {}, {}, {}

# 50/50 chance of a value being assigned to each dictionary, some keys will be missed but meh
for key in keys:
    if random.getrandbits(1):
        a[key] = random.randint(0, 1000)
    if random.getrandbits(1):
        b[key] = random.randint(0, 1000)
    if random.getrandbits(1):
        c[key] = random.randint(0, 1000)

large_tests = [a, b, c]

print("a:", len(a), "b:", len(b), "c:", len(c))
#: a: 100069 b: 100385 c: 99989 
```

现在每个方法：

```
from collections import defaultdict, Counter
from functools import reduce

def georg_method(tests):
    return {k: sum(t.get(k, 0) for t in tests) for k in set.union(*[set(t) for t in tests])}

def georg_method_nosum(tests):
    # If you know you will have exactly 3 dicts
    return {k: tests[0].get(k, 0) + tests[1].get(k, 0) + tests[2].get(k, 0) for k in set.union(*[set(t) for t in tests])}

def npe_method(tests):
    ret = defaultdict(int)
    for d in tests:
        for k, v in d.items():
            ret[k] += v
    return dict(ret)

# Note: There is a bug with scott's method. See below for details.
# Scott included a similar version using counters that is fixed
# See the scott_update_method below
def scott_method(tests):
    return dict(sum((Counter(t) for t in tests), Counter()))

def scott_method_nosum(tests):
    # If you know you will have exactly 3 dicts
    return dict(Counter(tests[0]) + Counter(tests[1]) + Counter(tests[2]))

def scott_update_method(tests):
    ret = Counter()
    for test in tests:
        ret.update(test)
    return dict(ret)

def scott_update_method_static(tests):
    # If you know you will have exactly 3 dicts
    xx = Counter(tests[0])
    yy = Counter(tests[1])
    zz = Counter(tests[2])
    xx.update(yy)
    xx.update(zz)
    return dict(xx)

def havok_method(tests):
    def reducer(accumulator, element):
        for key, value in element.items():
            accumulator[key] = accumulator.get(key, 0) + value
        return accumulator
    return reduce(reducer, tests, {})

methods = {
    "georg_method": georg_method, "georg_method_nosum": georg_method_nosum,
    "npe_method": npe_method,
    "scott_method": scott_method, "scott_method_nosum": scott_method_nosum,
    "scott_update_method": scott_update_method, "scott_update_method_static": scott_update_method_static,
    "havok_method": havok_method
} 
```

我还写了一个快速函数来查找列表之间的任何差异。`Counter()`不幸的是，那时我在 Scott 的方法中发现了问题，即，如果您的字典总数为 0，则由于添加时的行为方式，字典根本不会被包含在内。

测试设置：

*   MacBook Pro（15 英寸，2016 年末），2.9 GHz Intel Core i7，16 GB 2133 MHz LPDDR3 RAM，运行 macOS Mojave 版本 10.14.5
*   Python 3.6.5 通过 IPython 6.1.0

最后，结果：

## 结果：小测试

```
for name, method in methods.items():
    print("Method:", name)
    %timeit -n10000 method(small_tests)
#: Method: georg_method
#: 7.81 µs ± 321 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: georg_method_nosum
#: 4.6 µs ± 48.8 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: npe_method
#: 3.2 µs ± 24.7 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: scott_method
#: 24.9 µs ± 326 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: scott_method_nosum
#: 18.9 µs ± 64.8 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: scott_update_method
#: 9.1 µs ± 90.7 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: scott_update_method_static
#: 14.4 µs ± 122 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each)
#: Method: havok_method
#: 3.09 µs ± 47.9 ns per loop (mean ± std. dev. of 7 runs, 10000 loops each) 
```

## 结果：大型测试

自然，不能在尽可能多的循环附近运行

```
for name, method in methods.items():
    print("Method:", name)
    %timeit -n10 method(large_tests)
#: Method: georg_method
#: 347 ms ± 20 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: georg_method_nosum
#: 280 ms ± 4.97 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: npe_method
#: 119 ms ± 11 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: scott_method
#: 324 ms ± 16.8 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: scott_method_nosum
#: 289 ms ± 14.3 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: scott_update_method
#: 123 ms ± 1.94 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: scott_update_method_static
#: 136 ms ± 3.19 ms per loop (mean ± std. dev. of 7 runs, 10 loops each)
#: Method: havok_method
#: 103 ms ± 1.31 ms per loop (mean ± std. dev. of 7 runs, 10 loops each) 
```

## 结论

```
╔═══════════════════════════╦═══════╦═════════════════════════════╗
║                           ║       ║    Best of Time Per Loop    ║
║         Algorithm         ║  By   ╠══════════════╦══════════════╣
║                           ║       ║  small_tests ║  large_tests ║
╠═══════════════════════════╬═══════╬══════════════╬══════════════╣
║ functools reduce          ║ Havok ║       3.1 µs ║   103,000 µs ║
║ defaultdict sum           ║ NPE   ║       3.2 µs ║   119,000 µs ║
║ Counter().update loop     ║ Scott ║       9.1 µs ║   123,000 µs ║
║ Counter().update static   ║ Scott ║      14.4 µs ║   136,000 µs ║
║ set unions without sum()  ║ georg ║       4.6 µs ║   280,000 µs ║
║ set unions with sum()     ║ georg ║       7.8 µs ║   347,000 µs ║
║ Counter() without sum()   ║ Scott ║      18.9 µs ║   289,000 µs ║
║ Counter() with sum()      ║ Scott ║      24.9 µs ║   324,000 µs ║
╚═══════════════════════════╩═══════╩══════════════╩══════════════╝ 
```

重要的。YMMV。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2012-05-05T12:43:32.950

你可以用[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)这个：

```
from collections import defaultdict

def dsum(*dicts):
    ret = defaultdict(int)
    for d in dicts:
        for k, v in d.items():
            ret[k] += v
    return dict(ret)

x = {'both1':1, 'both2':2, 'only_x': 100 }
y = {'both1':10, 'both2': 20, 'only_y':200 }

print(dsum(x, y)) 
```

这产生

```
{'both1': 11, 'both2': 22, 'only_x': 100, 'only_y': 200} 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-09-09T07:59:58.570

使用reduce函数的另一个选项。这允许对任意字典集合进行求和：

```
from functools import reduce

collection = [
    {'a': 1, 'b': 1},
    {'a': 2, 'b': 2},
    {'a': 3, 'b': 3},
    {'a': 4, 'b': 4, 'c': 1},
    {'a': 5, 'b': 5, 'c': 1},
    {'a': 6, 'b': 6, 'c': 1},
    {'a': 7, 'b': 7},
    {'a': 8, 'b': 8},
    {'a': 9, 'b': 9},
]

def reducer(accumulator, element):
    for key, value in element.items():
        accumulator[key] = accumulator.get(key, 0) + value
    return accumulator

total = reduce(reducer, collection, {})

assert total['a'] == sum(d.get('a', 0) for d in collection)
assert total['b'] == sum(d.get('b', 0) for d in collection)
assert total['c'] == sum(d.get('c', 0) for d in collection)

print(total) 
```

执行：

```
{'a': 45, 'b': 45, 'c': 3} 
```

好处：

*   简单，清晰，Pythonic。
*   无模式，只要所有键都是“可计算的”。
*   O(n) 时间复杂度和 O(1) 内存复杂度。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-02T19:37:29.567

```
d1 = {'apples': 2, 'banana': 1}
d2 = {'apples': 3, 'banana': 2}
merged = reduce(
    lambda d, i: (
        d.update(((i[0], d.get(i[0], 0) + i[1]),)) or d
    ),
    d2.iteritems(),
    d1.copy(),
) 
```

也有非常简单的替换`dict.update()`：

```
merged = dict(d1, **d2) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-25T03:01:09.167

```
class dict_merge(dict):
def __add__(self, other):
    result = dict_merge({})
    for key in self.keys():
        if key in other.keys():
            result[key] = self[key] + other[key]
        else:
            result[key] = self[key]
    for key in other.keys():
        if key in self.keys():
            pass
        else:
            result[key] = other[key]
    return result

a = dict_merge({"a":2, "b":3, "d":4})
b = dict_merge({"a":1, "b":2})
c = dict_merge({"a":5, "b":6, "c":5})
d = dict_merge({"a":8, "b":6, "e":5})

print((a + b + c +d))

>>> {'a': 16, 'b': 17, 'd': 4, 'c': 5, 'e': 5} 
```

那就是运算符重载。使用`__add__`，我们已经定义了如何使用继承自内置 python的运算`+`符。您可以继续使用类似的方式来使其更灵活，以在同一类中定义其他运算符，例如用于乘法，或用于除法，甚至使用用于取模，并用相应的运算符替换in ，如果您发现你自己需要这样的合并。我只是在没有其他运营商的情况下对此进行了测试，但我预计其他运营商不会出现问题。只是通过尝试来学习。`dict_merge``dict``*``__mul__``/``__div__``%``__mod__``+``self[key] + other[key]`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-04T18:01:48.140

一个相当简单的方法：

```
from collections import Counter
from functools import reduce

data = [
  {'x': 10, 'y': 1, 'z': 100},
  {'x': 20, 'y': 2, 'z': 200},
  {'a': 10, 'z': 300}
]

result = dict(reduce(lambda x, y: Counter(x) + Counter(y), data)) 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2016-01-22T20:33:13.857

如果要创建一个新`dict`的 as`|`使用：

```
>>> dict({'a': 1,'c': 2}, **{'c': 1})
{'a': 1, 'c': 1} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-10-01T20:16:27.087

Scott 使用的方法`collections.Counter`很好，但它的缺点是不能用于`sum`; 当您只想按组件添加值时，处理负值或零值的需要对我来说有点违反直觉。

所以我认为，为此编写一个自定义类可能是个好主意。这也是约翰穆图马的想法。但是，我想添加我的解决方案：

我创建了一个行为非常类似于 a 的类`dict`，基本上将所有成员调用传递给**getatrr**方法`_data`中的底层。唯一不同的是：

 **1.  它有一个`DEFAULT_VALUE`（类似于`collections.defaultdict`），用作不存在的键的值。
2.  它实现了一个`__add__()`方法，该方法（连同该`__radd__()`方法）负责逐个添加字典。

```
from typing import Union, Any

class AddableDict:
    DEFAULT_VALUE = 0

    def __init__(self, data: dict) -> None:
        self._data = data

    def __getattr__(self, attr: str) -> Any:
        return getattr(self._data, attr)

    def __getitem__(self, item) -> Any:
        try:
            return self._data[item]
        except KeyError:
            return self.DEFAULT_VALUE

    def __repr__(self):
        return self._data.__repr__()

    def __add__(self, other) -> "AddableDict":
        return AddableDict({
            key: self[key] + other[key]
            for key in set(self.keys()) | set(other.keys())
        })

    def __radd__(
        self, other: Union[int, "AddableDict"]
    ) -> "AddableDict":
        if other == 0:
            return self 
```

这样我们就可以添加两个对象和这些对象`sum`的可迭代对象：

```
>>> alpha = AddableDict({"a": 1})
>>> beta = AddableDict({"a": 10, "b": 5})
>>> alpha + beta
{'a': 11, 'b': 5}

>>> sum([beta]*10)
{'a': 100, 'b': 50} 
```

在我看来，这个解决方案的优点是为开发人员提供了一个简单易懂的界面供使用。当然，您也可以继承 from`dict`而不是使用组合。**

# android - 部分顺序：AsyncTask.get() 和 onPostExecute()？

> ID：10461533
> 
> 赞同：3
> 
> 时间：2012-05-05T11:46:17.037
> 
> 标签：android, android-asynctask, oncreate

我正在从我的 UI 线程（在我的 Activity 的 onCreate() 处理程序中）实例化并执行一个 AsyncTask。我保证 Activity 不会由于配置更改而重新启动（例如，它会忽略方向更改）。

在我的 Activity.onCreate() 中：我使用 asynctask.execute()，然后 UI 线程做一些工作，然后在 Activity.onCreate() 结束之前调用 asynctask.get(...) 进行同步。

根据日志，我的 asynctask.onPostExecute() 在 asynctask.get() 返回后被调用*了* 很长时间。更准确地说，在 Activity.onResume (!) 返回后调用 onPostExecute。（所以它确实被调用了，我的方法定义没问题，我也使用@Override。）

我在某处读到，由于 onPostExecute() 在 UI 线程的处理程序中发布，UI 线程必须为它做好准备——为什么在这种情况下它还没有准备好？我的应用程序从方向更改开始，但由于我在清单中的设置，它不会导致任何配置更改。

是否有任何保证何时会*相对于*asynctask.get() 调用 onPostExecute() ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:01:27.603

> 根据日志，我的 asynctask.onPostExecute() 在 asynctask.get() 返回后被调用了很长时间。更准确地说，在 Activity.onResume (!) 返回后调用 onPostExecute。

`get()``doInBackground()`根据我对源代码的阅读，只等待完成。

> 是否有任何保证何时会相对于 asynctask.get() 调用 onPostExecute() ？

`onPostExecute()``get()`根据我对源代码的阅读，将在返回后的某个时间调用。但是，这不是“保证”，因为这种行为是无证的，因此可能会发生变化。

# css - css-动画/动画方向/反向

> ID：10461535
> 
> 赞同：0
> 
> 时间：2012-05-05T11:46:48.363
> 
> 标签：css, css-animations

```
#div {
position: absolute; top: 50px;
width: 100px; height: 100px; background: blue;
    -webkit-animation-name: shift;
    -webkit-animation-duration: 10s;
    -webkit-animation-iteration-count: 2;
    -webkit-animation-direction: reverse;
  }
 @-webkit-keyframes shift{
    from{
        top: 50px;
        left: 0px;    
    }
    20% {
        top: 150px;
        left: 100px;
    }
    to {
        top: 400px;
        left: 300px;
    }   
 } 
```

[http://jsfiddle.net/uVv65/2/](http://jsfiddle.net/uVv65/2/) 为什么反向动画方向和正常一样？我以为它会从

```
top: 400px;
left: 300px; 
```

至

```
top: 50px;
left: 0px; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-15T23:51:16.470

“反向”直到最近才成为一个方向。但是，“替代”一直是一个方向，因此要实现“反向”，人们会将迭代计数设为 2，然后给动画一个迭代的负开始偏移量（在您的情况下为 -10 秒），以便动画将从“交替”部分开始。希望“反向”很快渗透到浏览器！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:03:02.423

还有另一种方法可以做到这一点。

```
@-webkit-keyframes shift{
    from{
        top: 50px;
        left: 0px;    
    }
    10% {
        top: 150px;
        left: 100px;
    }
    50% {
        top: 400px;
        left: 500px;     
    }
    to {
        top: 50px;
        left: 0px;
    }   
 } 
```

[演示](http://jsfiddle.net/uVv65/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T20:50:20.340

该`animation-direction`属性定义动画是否应在交替循环中反向播放。

**试试这个**

```
-webkit-animation-direction:alternate; /* Safari and Chrome */
        animation-direction:alternate; 
```

# jquery - 如何在 Mvc3+Razor 中使用单选按钮

> ID：10461537
> 
> 赞同：0
> 
> 时间：2012-05-05T11:46:53.653
> 
> 标签：jquery, asp.net-mvc-3, razor

我正在使用 Mvc3+Razor，如何在我的视图中嵌入单选按钮。示例：当我单击第一个第二个选项时，我有两个选项应该被禁用，我还有另一个查询是我们如何在 Throw Jquery 中获取单选按钮值。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T08:06:39.393

```
<td style="background-color:#FFE4B5;color:#008080">
<label>@Html.RadioButton("Gender","True")Male</label></td>
<td style="background-color:#FFC0CB;color:#FF6347"><label>@Html.RadioButton("Gender",  
"False")Female</label></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T13:04:06.547

您可以使用枚举来保存选定的值。

```
 public enum Selection
 {
   Option1,
   Option2
 }

 public class ViewModel
 {
   public Selection SelectedValue {get;set;}
 }

 View:
   @Html.RadioButtonFor(m => m.SelectedValue, "Option1")
   @Html.RadioButtonFor(m => m.SelectedValue, "Option2") 
```

# java - VASCO 数字证书

> ID：10461540
> 
> 赞同：0
> 
> 时间：2012-05-05T11:47:36.483
> 
> 标签：java, security, certificate, digital-certificate, pkcs#11

如何读取 vasco 数字证书。

我在下面的配置文件中使用

```
name="VASCO DP CertiID PKCS#11 V2.20"
library="C:\Program Files\VASCO\DIGIPASS CertiID\VdsPKCS1132.dll" 
```

我收到此错误：

```
java.security.KeyStoreException: KeyStore instantiation failed
    at java.security.KeyStore$Builder$2.getKeyStore(Unknown Source)
    at eTokenApplet.initializeCard(eTokenApplet.java:417)
    at eTokenApplet.getCertificates(eTokenApplet.java:1952)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.plugin.javascript.JSInvoke.invoke(Unknown Source)
    at sun.reflect.GeneratedMethodAccessor3.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.plugin.javascript.JSClassLoader.invoke(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass$MethodInfo.invoke(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass$MemberBundle.invoke(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass.invoke0(Unknown Source)
    at sun.plugin2.liveconnect.JavaClass.invoke(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$DefaultInvocationDelegate.invoke(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo.doObjectOp(Unknown Source)
    at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.security.KeyStoreException: PKCS11 not found
    at java.security.KeyStore.getInstance(Unknown Source)
    at java.security.KeyStore$Builder$2$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    ... 21 more
Caused by: java.security.NoSuchAlgorithmException: no such algorithm: PKCS11 for provider SunPKCS11-VASCO DP CertiID PKCS#11 V2.20
    at sun.security.jca.GetInstance.getService(Unknown Source)
    at sun.security.jca.GetInstance.getInstance(Unknown Source)
    at java.security.Security.getImpl(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:51:22.867

您是否使用 -Djava.library.path= 以便 java 可以找到您的 dll？

# mongodb - MongoDB $where 操作员可以像那样奇怪地工作吗？

> ID：10461542
> 
> 赞同：0
> 
> 时间：2012-05-05T11:47:56.530
> 
> 标签：mongodb, find, where, mongodb-query

我正在测试 MongoDB，这里有一个让我大吃一惊的例子：

```
> function compare(a,b) { return (a==b); } 
```

然后列出我的收藏：

```
> db.myCol.find()
{ "_id:" : ObjectId("..."), "name" : "mongo" }
{ "_id:" : ObjectId("..."), "x" : 3 }
{ "_id:" : ObjectId("..."), "name" : "mongo", "notName" : "wow" } 
```

和 - 完全确定：

```
> compare('mongo','mongo')
true 
```

和奇怪的部分：

```
> db.myCol.find( { $where : "compare(this.name,'mongo')" } )
{ "_id:" : ObjectId("..."), "x" : 3 }
> db.myCol.find( { $where : "this.name=='mongo'" } )
{ "_id:" : ObjectId("..."), "name" : "mongo" }
{ "_id:" : ObjectId("..."), "name" : "mongo", "notName" : "wow" } 
```

我希望查询具有完全相反的设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:32:31.690

您得到奇怪结果的原因是因为您实际上并没有运行您定义的比较函数。它是在本地定义的，但您是在 mongodb 实例上远程执行命令。真正发生的是正在使用内置比较：

```
> compare
function (l, r) {
    return l == r ? 0 : l < r ? -1 : 1;
}

> compare('mongo', 'mongo')
0 
```

你可以这样说：

```
> function compare1(a,b) {return a==b}

> db.myCol.find( { $where : "compare1(this.name,'mongo')" } )
error: {
    "$err" : "error on invocation of $where function:\nJS Error: ReferenceError: compare1 is not defined nofile_a:0",
    "code" : 10071
} 
```

[Server-side Code Execution](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)上有一个文档页面，它解释了如何在服务器上存储函数。但是，它还解释了尽可能不使用服务器端功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:12:06.100

使用 $where 运算符简单地*忘记*服务端代码执行，因为这很慢，不会使用索引，并且会在执行时锁定服务器进程。

# android - 安卓布局建议

> ID：10461543
> 
> 赞同：1
> 
> 时间：2012-05-05T11:47:59.567
> 
> 标签：android

我目前有这个复杂的屏幕来实现 XML 代码。 ![在此处输入图像描述](../Images/0dbe2f1a5d3d6f6052abda04ff111471.png)

我想用 tablelayout 构建，但我仍然不知道如何将项目放在架子上以及后面的木制背景。谁能提示我一些方法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T05:27:52.150

将位图设置为活动的背景可绘制对象。从那里，你有几种可能性。两个应该工作的是

1) 使用 AbsoluteLayout 在活动上放置透明按钮。

2) 有几个人编写了类似于 HTML 图像地图构造的解决方案，并将它们发布在公共论坛上。谷歌“imagemap android”并借用。

# c# - CanRead 和 CanWrite 对 PropertyInfo 意味着什么？

> ID：10461547
> 
> 赞同：4
> 
> 时间：2012-05-05T11:48:21.810
> 
> 标签：c#, reflection

我正在编写一个类，该类根据其可访问性为属性生成 WPF 绑定。下面是关键方法：

```
static Binding getBinding(PropertyInfo prop)
{
    var bn = new Binding(prop.Name);
    bn.UpdateSourceTrigger = UpdateSourceTrigger.PropertyChanged;
    if (prop.CanRead && prop.CanWrite)
        bn.Mode = BindingMode.TwoWay;
    else if (prop.CanRead)
        bn.Mode = BindingMode.OneWay;
    else if (prop.CanWrite)
        bn.Mode = BindingMode.OneWayToSource;
    return bn;
} 
```

但是，这并没有按预期工作。`CanWrite`是`true`什么时候应该是假的。例如，对于这个属性：

```
abstract class AbstractViewModel {
    public virtual string DisplayName { get; protected set; }
}

class ListViewModel : AbstractViewModel {
    //does not override DisplayName
} 
```

我发现 a 的`DisplayName`属性`ListViewModel`是`CanRead`and `CanWrite`。但是，如果我调用`prop.GetAccessors()`，则仅`get_DisplayName()`列出访问者。

这里发生了什么？如果不是财产的保护级别，做什么`CanRead`和指示？`CanWrite`我的方法的正确实现是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-05T11:52:24.207

> CanRead 和 CanWrite 表示什么？

如果您有类似的问题，您应该首先查看文档。

[`CanRead`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.canread.aspx)：

> 如果属性没有`get`访问器，则无法读取。

[`CanWrite`](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.canwrite.aspx)：

> 如果该属性没有`set`访问器，则无法写入。

因此，这些属性表示是否存在一个`get`和`set`访问器，而不是它们的保护级别。造成这种情况的一个原因是 Reflection 不知道您从哪里调用它，因此它不知道您是否可以实际访问访问器。

您可以做的是找出您是否可以访问访问器是调用[`GetGetMethod()`](http://msdn.microsoft.com/en-us/library/e17dw503.aspx)和[`GetSetMethod()`](http://msdn.microsoft.com/en-us/library/2ef4d5h3.aspx)。如果该属性没有公共`get`/`set`访问器，它们将返回`null`.

# java - Java FileOutputStream 对已签名小程序的访问被拒绝

> ID：10461548
> 
> 赞同：0
> 
> 时间：2012-05-05T11:48:21.920
> 
> 标签：java, file-io, applet, filenotfoundexception

我正在开发一个必须访问访问者文件系统的 Java Applet，因此当我使用浏览器打开文件时（文件位于HTML 标签的位置），我将文件压缩`.class`为`.jar`带有自签名证书的文件，我接受安全弹出窗口然后我在 Java 控制台中收到此错误：`call.html``<applet>`

> java.security.AccessControlException：访问被拒绝（java.io.FilePermission output.txt 写入）

我正在使用 a`FileInputStream`和 a `FileOutputStream`。`FileInputStream`有效但无效 `FileOutputStream`，为什么？

这是我的代码：

```
try {
      AccessController.doPrivileged(
          new PrivilegedExceptionAction() {              
              @Override 
              public Object run() throws FileNotFoundException {
                  outFile = new FileOutputStream("output.txt");
                  inFile = new FileInputStream("input.txt");
                  return "test";
              }
          }
      );
} catch (PrivilegedActionException e) {
    throw (FileNotFoundException) e.getException();
} 
```

我尝试了很多方法来进行特权操作，`FileInputStream`总是有效，`FileOutputStream`但不是。`output.txt`不是只读文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:00:00.567

使用策略文件授予访问权限，并使用要用于正在查看的小程序的策略文件启动 appletviewer。

创建策略文件

策略工具是用于创建策略文件的 Java 2 平台安全工具。Controlling Applets 上的 Java Tutorial trail 详细解释了如何使用 Policy Tool。这是运行小程序所需的策略文件。您可以使用策略工具来创建它或将下面的文本复制到 ASCII 文件中。

```
grant {
       permission java.util.PropertyPermission 
   "user.home", "read";
       permission java.io.FilePermission 
   "${user.home}/text.txt", "read,write";
     }; 
```

这是小程序权限的完整链接 [http://java.sun.com/developer/onlineTraining/Programming/BasicJava1/data.html](http://java.sun.com/developer/onlineTraining/Programming/BasicJava1/data.html)

# facebook - 从画布应用私下联系/通知用户的最佳方式？

> ID：10461549
> 
> 赞同：1
> 
> 时间：2012-05-05T11:48:23.363
> 
> 标签：facebook, facebook-graph-api, notifications, facebook-canvas

我有一个代表用户执行操作的画布应用程序。有时这些操作会在后台失败。通知用户失败而不以任何方式在他们的墙上等分享的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:55:55.663

我将在这里回答我自己的问题，因为没有任何活动，简单的答案是目前不可能：

[通过 Facebook API 发送私人消息](https://stackoverflow.com/questions/4363515/sending-private-messages-through-facebook-api)

# ruby-on-rails - Heroku rake db：迁移不起作用

> ID：10461552
> 
> 赞同：0
> 
> 时间：2012-05-05T11:48:35.087
> 
> 标签：ruby-on-rails, ruby, deployment, heroku

当我尝试将我的 ruby​​ on rails 应用程序部署到 heroku 时遇到了这个问题，我在这里查看了不同的帖子，因为我之前看到过这个问题，但我无法修复它。当我尝试运行时：

```
$ heroku rake db:migrate 
```

我得到了很多这样的`DEPRECATION WARNING`：：

接着：

```
rake aborted!
Please install the postgresql adapter: `gem install activerecord-postgresql-adapter` (pg is not part of the bundle. Add it to Gemfile.)

Tasks: TOP => db:migrate => db:load_config
(See full trace by running task with --trace) 
```

我试图用 'pg' 和我的组 :assets 将我的 Gemfile 更改为 :production，我知道我错过了一些东西，但我不知道是什么。

一些想法？

另外，当我转到应用程序网址时，我得到了这个：

```
Application Error
An error occurred in the application and your page could not be served. Please try again in a few moments.
If you are the application owner, check your logs for details. 
```

在此先感谢您的任何建议和帮助！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:18:42.127

您必须在 Heroku 上使用 Postgres，不能使用 sqlite3，因为 Heroku 禁止您保存到文件系统。因此，将 pg gem 添加到您的生产包并重新部署，然后您的迁移应该运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:28:27.377

`production`这里的答案很简单，在您的 gemfile 中添加以下内容：

```
group :production do
  gem 'pg'
end 
```

你的本地机器不能用于这个生产，所以我们现在必须通过忽略 PostgreSQL gem 来捆绑它，可以这样做：

```
bundle install --without production 
```

在此之后，尝试`heroku rake db:migrate`. 必须工作。

祝你好运

# iphone - 无法从外部 xib 加载视图？

> ID：10461558
> 
> 赞同：0
> 
> 时间：2012-05-05T11:49:20.307
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, interface-builder

我正在使用的项目是Apple提供的名为[“Tabster”](https://developer.apple.com/library/ios/#samplecode/Tabster/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011213)的示例代码。

我可以通过以下方式从外部 xib 加载视图：

1.  在 MainWindow.xib 中，将视图控制器拖到选项卡栏控制器。
2.  File -> New -> File，添加一个名为“NewTabItemA”的新类，它是 UIViewController 的子类，带有“With XIB for User Interface”。选择。
3.  在 MainWindow.xib 中，在 Identity Inspector 中将新视图控制器的 Class 更改为“NewTabItemA”，并在 Attributes Inspector 中将 NIB Name 更改为“NewTabItemA”。

我无法从外部**xib**加载视图，而只有第二步不同。

1.  在 MainWindow.xib 中，将视图控制器拖到选项卡栏控制器。
2.  File -> New -> File，添加一个名为“NewTabItemB”的新类，UIViewController 的子类，留下“With XIB for User Interface”。未选中。
3.  File -> New -> File，从“View”模板中添加一个新的xib文件，命名为“NewTabItemB”。
4.  在 NewTabItemB.xib 中，将文件所有者更改为“NewTabItemB”。
5.  控制拖拽文件所有者到视图，设置为文件所有者的出口。
6.  在 MainWindow.xib 中，在 Identity Inspector 中将新视图控制器的 Class 更改为“NewTabItemB”，并在 Attributes Inspector 中将 NIB Name 更改为“NewTabItemB”。

我错过了什么？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:10:41.660

您是否尝试过更改 xib 的标识符？在界面生成器中单击窗口并在属性中进行设置。（3d 选项卡）

# java - 为什么我的正则表达式在输入数据中找不到子字符串

> ID：10461559
> 
> 赞同：0
> 
> 时间：2012-05-05T11:49:47.670
> 
> 标签：java, regex

这是我的代码：

```
Pattern p = Pattern.compile(":\\s(.+)\\s[cfs]");
Matcher m1 = p.matcher("Seat 9: -FACERAPE- folded before Flop");
String name = null;
while(m1.find()){
    name = m1.group(1);
}
System.out.println(name); 
```

[我在这里](http://www.regexplanet.com/advanced/java/index.html)尝试了这个正则表达式模式，它在那里工作，但在我的 IDE 中它不起作用。我使用 Eclipse 和 jdk 1.6。我的正则表达式也适用于这些例子：Seat 7: Goldball31 folded before Flop, Seat 4: <*{{{><collected (3.09)。如您所见，问题在于连字符，但我没有得到什么问题。
哦抱歉忘记它打印“null”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:01:55.020

我没有发现任何问题，但是您的正则表达式应该是：

```
:\\s(.+?)\\s[cfs] 
```

或者

```
:\\s(\\S+)\\s[cfs] 
```

# java - Postgresql 的格式化日期

> ID：10461562
> 
> 赞同：2
> 
> 时间：2012-05-05T11:50:42.837
> 
> 标签：java, postgresql, date

我有以下

```
DateFormat dformat = new SimpleDateFormat("yyyy-M-d");
            dformat.setLenient(false);
            Date cin = dformat.parse(cinDate); 
```

和sql函数

```
create or replace function search(_checkIn date, _checkOut date) returns setof Bookings as $$
declare
    r Bookings;
begin
    for r in
    select * from Bookings
    loop
        if ((_checkIn between r.checkIn and r.checkOut) or (_checkOut between r.checkIn and r.checkOut)) then
            return next r;
        end if;
    end loop;
    return;
end;
$$ language plpgsql; 
```

postgresql 的日期格式是标准的（默认）

```
create table Bookings (
    id          serial,
    status      bookingStatus not null,
    pricePaid   money not null,
    firstName   text,
    lastName    text,
    address     text,
    creditCard  text,
    checkOut    date not null,
    checkIn     date not null,
    room        integer not null,
    extraBed    boolean not null default false,

    foreign key (room) references Rooms(id),
    primary key (id)
); 
```

我正在尝试将日期解析到函数中，以便它可以为我返回一个表，我似乎遇到了日期格式的问题（这就是我认为我收到此错误的原因）

`org.postgresql.util.PSQLException: ERROR: syntax error at or near "Feb"`

所以我想知道如何解决这个问题，我不知道如何正确格式化日期

编辑：

我正在调用这样的查询

```
 try {
                String searchQuery = "SELECT * FROM Rooms r where r.id not in (select * from search(" + cin +", " + cout +"))";
                PreparedStatement ps = conn.prepareStatement(searchQuery);
                rs = ps.executeQuery();
            } catch (SQLException e) {
                e.printStackTrace();
            } 
```

所以我认为出现错误是因为我格式化日期的方式是错误的，postgres 不会读取它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:59:56.940

听起来您通过将参数直接连接到字符串中来传递参数。这是一个非常糟糕的主意，因为它可能导致 SQL 注入。始终[将`PreparedStatement`s](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)与`?`占位符一起使用来传递参数，切勿通过将它们直接连接到查询字符串中来直接传递它们（更重要的是，您需要`'`周围的分隔符）。

你可以有类似的东西：

```
 PreparedStatement stmt
     = con.prepareStatement("SELECT id FROM Bookings WHERE checkIn=?")
 stmt.setDate(1, new java.sql.Date(cin.getTime()));
      // ? parameters are indexed from 1
 ResultSet results = stmt.executeQuery(); 
```

或者，PostgreSQL 内部日期转换通常相当好和灵活。您可以使用 PostgreSQL 将字符串参数转换为日期：

```
 PreparedStatement stmt
     = con.prepareStatement("SELECT id FROM Bookings WHERE checkIn=CAST(? AS DATE)");
 stmt.setString(1, cinDate);
 ResultSet results = stmt.executeQuery(); 
```

这是灵活的，但可能不会导致您需要的确切结果，具体取决于日期格式（您可以查看 PostgreSQL 手册以获取有关日期转换格式的详细信息）。不过，您使用的输入格式应该可以正常工作（`SELECT CAST('2012-05-01' AS DATE)`例如，直接在 PostgreSQL 中尝试，这将返回正确的 PostgreSQL 日期。）

请注意，使用 时`new java.sql.Date(cin.getTime())`，您可能会遇到时区问题。你也可以用`java.sql.Date.valueOf(...)`。

为了澄清，在您的编辑之后：

这不起作用，因为日期将是 SQL 语法本身的一部分，而不是字符串或日期：`"SELECT * FROM Rooms r where r.id not in (select * from search(" + cin +", " + cout +"))"`

您至少需要使用`'`引号：~~`"SELECT * FROM Rooms r where r.id not in (select * from search("' + cin +"', '" + cout +"'))"`~~. 在这里，在某种程度上，您可以期望参数格式正确，但不要这样做。此外，仍然需要使用`CAST('...' AS DATE)`or来转换字符串`'...'::DATE`。

最简单的方法当然是：

```
String searchQuery = "SELECT * FROM Rooms r where r.id not in (select SOMETHING from search(CAST(? AS DATE), CAST(? AS DATE)))";
PreparedStatement ps = conn.prepareStatement(searchQuery);
ps.setString(1, cinDate);
ps.setString(2, coutDate); 
```

（正如 a_horse_with_no_name 在评论中指出的那样，由于您的内部选择，一般查询无论如何都不起作用。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T14:19:10.310

您已经获得了有关准备好的陈述和正确格式的建议。

您还可以在很大程度上简化您的 PostgreSQL 函数：

```
CREATE OR REPLACE FUNCTION search(_checkin date, _checkout date)
  RETURNS SETOF bookings AS
$BODY$
BEGIN
    RETURN QUERY
    SELECT *
    FROM   bookings
    WHERE  _checkin BETWEEN checkin AND checkout
       OR  _checkiut BETWEEN checkin AND checkout;

END;
$BODY$ language plpgsql; 
```

甚至：

```
CREATE OR REPLACE FUNCTION search(_checkin date, _checkout date)
  RETURNS SETOF bookings AS
$BODY$
    SELECT *
    FROM   bookings
    WHERE  _checkin BETWEEN checkin AND checkout
       OR  _checkiut BETWEEN checkin AND checkout;
$BODY$ language sql; 
```

将加号条件重写`LOOP`为更快的普通 SQL 语句。

*   从**plpgsql**函数返回[`RETURN QUERY`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)- 比循环更简单、更快。
*   或者使用普通的**sql**函数。

任何一种变体都有其优点。

*   在没有双引号的情况下使用[混合大小写标识符](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-IDENTIFIERS)是没有意义的。改为使用全部小写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T11:59:26.137

根据[this page](http://publib.boulder.ibm.com/infocenter/idshelp/v10/index.jsp?topic=/com.ibm.esqlc.doc/esqlc126.htm)，SQL中日期/时间字符串的标准格式是：

```
YYYY-MM-DD HH:MM:SS 
```

当然，对于您可以使用的日期

```
YYYY-MM-DD 
```

PostgreSQL 接受其他格式（有关详细信息，请参见[此处](http://www.postgresql.org/docs/current/interactive/datetime-input-rules.html)），但没有理由不遵守标准。

*但是*，由于您遇到*语法*错误，因此听起来您将日期字符串注入 SQL 语句而没有正确的引用/转义。仔细检查您是否正确地转义了您的输入。

# php - php代码不适用于ie上的表单提交（但在chrome，ff上工作正常）

> ID：10461563
> 
> 赞同：0
> 
> 时间：2012-05-05T11:50:49.257
> 
> 标签：php, html, forms, form-submit

我做了一个登录/注册页面。它在 chrome 和 firefox 上运行良好，但在 Internet Explorer (8、9) 上不起作用。单击任何提交按钮后，即重定向到索引页面。基于此代码，我在另一个页面上遇到了同样的问题。

这是html代码：

```
<?php

$log_in=false;
$token_sent=0;
$errors1 = array();
$missing1 = array();
$errors = array();
$missing = array();

if(isset($_POST['submit'])){
     $expected = array('login', 'email', 'pwd');
     $required = array('login', 'email', 'pwd');
     require('./rejestracja.inc.php');
}

if ($token_sent) {
    header('Location: (..) '); 
    exit;
}

if(isset($_POST['submit1'])) {
    $expected=array('login1','pwd1');
    $required=array('login1','pwd1');
    require('./login.inc.php');

    if($log_in) {
        if (isset($_SESSION['name']) && !empty($_SESSION['name'])) {
            unset($_SESSION['login1']);
            if (isset($_COOKIE[session_name()])) {
                setcookie(session_name(), '', time()-86400, '/');
            }
            session_destroy();
        }

        if (isset($_POST['login1'])) {
            session_start();
            $_SESSION['name'] = $login1 ;
        }
        header('Location: http:// (...) ');  
        exit;
    }
}

?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title></title>
    <meta name="description" content="">
    <meta name="copyright" content="Copyright (c) 2012 k">
    <meta name="author" content="">
    <link href="style.css" rel="stylesheet" type="text/css" media="screen">
    <link href="login.css" rel="stylesheet" type="text/css" media="screen"> 
</head>

<body>
<div id="wrap">
    <?php include('./login_menu.inc.php');?>
    <div id="header">
        <h1></h1>
    </div>
    <?php include('./fb.inc.php');?>
    <?php include('./menu.inc.php');?>
    <?php include('./w_budowie.inc.php');?>

    <div id='left'>
        <div id='info'>
            <h1 class='title'>LOGIN</h1> <br/>
            <form class='form' name="login1" action=" " method="post">

                <?php if ($missing1) { ?>
            <span class="warning">...</span><br/>
            <?php } ?>

            <?php if(isset($errors1['wrong'])){ ?>
            <span class="warning">...</span><br/>
            <?php } ?>

            <?php if(isset($errors1['not_verified'])){ ?>
            <span class="warning">...</span><br/>
            <?php } ?>

            <label for="login1">Login: </label>
            <input type="text" name="login1" 
            <?php if ($missing1 || $errors1) {
            echo 'value="' . htmlentities($login1, ENT_COMPAT, 'UTF-8') . '"';
            } ?>
            />

            <br/>           
            <label for="pwd1">Password:</label>
            <input type="password" name="pwd1" /> <br/>

            <br/>           
            <span class='submit'><input name="submit1" type="submit" value="LOGIN" /></span>
            </form> 

            <br/>
        </div>  
    </div>

    <div id='right'>
        <div id='info'>
            <h1 class='title'>REGISTRATION</h1> <br/>
            <form class='form' name="register" action=" " method="post">

                <label for="login">Login: </label>
                <input type="text" name="login" 
                <?php if ($missing || $errors) {
                echo 'value="' . htmlentities($login, ENT_COMPAT, 'UTF-8') . '"';
                } ?>
                /> 
                      <?php if ($missing && in_array('login', $missing)) { ?>
                      <span class="warning">...</span>
                      <?php 
                       } elseif(isset($errors['login_mini'])){ ?>
                      <span class="warning">...</span>
                      <?php 
                       } elseif(isset($errors['login_maxi'])){ ?>
                      <span class="warning">...</span>
                       <?php
                       } elseif(isset($errors['login'])){ ?>
                      <span class="warning"> A-Z, a-z, 0-9.</span>
                      <?php 
                       } elseif(isset($errors['login_exist'])){ ?>
                      <span class="warning">...</span>
                       <?php } ?>

                <br/>

                <label for="email">Email: </label>
                <input type="text" name="email"
                <?php if ($missing || $errors) {
                echo 'value="' . htmlentities($email, ENT_COMPAT, 'UTF-8') . '"';
                } ?>
                /> 
                    <?php if ($missing && in_array('email', $missing)) { ?>
                      <span class="warning">...</span>
                      <?php } elseif(isset($errors['email'])){ ?>
                      <span class="warning">...</span>
                      <?php } elseif(isset($errors['email_exist'])){ ?>
                      <span class="warning">...</span>
                       <?php } ?>

                <br/>

                <label for="pwd">Password:</label>
                <input type="password" name="pwd" />
                <?php if ($missing && in_array('pwd', $missing)) { ?>
                      <span class="warning">...</span>
                      <?php 
                       } elseif(isset($errors['pwd_mini'])){ ?>
                      <span class="warning">...</span>
                      <?php 
                       } elseif(isset($errors['pwd_maxi'])){ ?>
                      <span class="warning">...</span>
                       <?php } ?>       
                <br/>
                <span class='submit'><input type="submit" name="submit" value="REGISTER" /></span>          
            </form>
            <br/>
        </div>  
    </div>
    <?php include('./footer.inc.php'); ?>
</div>
</body>
</html> 
```

这是'login.inc.php'代码：

```
<?php

$login1 = "";
$pwd1 = "";
$salt = "(...)";

/*---------------con------------------------*/
include('./sql_connect.inc.php');

/*---------------------------------------------*/
foreach ($_POST as $key => $value) {
     $temp = is_array($value) ? $value : trim($value);
     if (empty($temp) && in_array($key, $required)) {
          $missing1[] = $key;
     } elseif (in_array($key, $expected)) {
          ${$key} = $temp;
     }
}

if(!$missing1){
     $login1 = mysql_real_escape_string($login1); 
     $hash = $salt . $pwd1;
     for ( $i = 0; $i < 100; $i ++ ){
         $hash = hash('sha256', $hash);
     }

/*---------------COMPARE-----------------*/
      $result = mysql_query("SELECT user_nick='$login1' FROM users WHERE user_password='$hash'") or die('Sorry, we could not count the number of results: ' . mysql_error());
     if($result){
          if(mysql_result($result, 0)){

/*-------IS ACTIVATED?------------------------------*/
              $verified =  mysql_query("SELECT user_verified='yes' FROM users WHERE user_nick='$login1'");
              if($verified){
                  if(mysql_result($verified, 0)){
                      $log_in=true;          
                  }else{
                       $errors1['not_verified'] = true; 
                  }
               }
          }else{
               $errors1['wrong'] = true;    
          }
     }
}
mysql_close($con);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:12:52.563

你真的在用`<form class='form' name="register" action=" " method="post">`吗？它可以来自这里，试试`action="#"`

PHP不会有任何跨浏览器问题，它来自HTML（生成与否）

# message - 如何告诉对象执行消息

> ID：10461571
> 
> 赞同：4
> 
> 时间：2012-05-05T11:52:04.057
> 
> 标签：message, smalltalk, squeak

我有一个对象和一个包含我想发送给它的消息的字符串。

例如，字符串“+ 5”，我想将其发送给某个整数对象。

如果它在工作区中，那么我只会写“obj + 5”，但我需要在运行时完成它而不事先知道字符串......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T13:46:07.970

如果您可以将消息的参数与消息本身分开，那么您可以“执行”消息发送：

```
obj := 3.
msg := '+'.
arg := 5.
result := obj perform: msg asSymbol with: arg. 
```

否则，您将不得不使用编译器，它将字符串转换为编译后的代码并执行它：

```
obj := 3.
msg := 'self + 5'.
result := Compiler evaluate: msg for: obj logged: false. 
```

避免重复编译的常用技术是编译一个块，可以更有效地评估它：

```
obj := 3.
msg := '[:x | x + 5]'.
block := Compiler evaluate: msg.
result := block value: obj. 
```

顺便说一句，上面（和下面）的代码是针对 Squeak 的，其他 Smalltalks 可能有不同的方式来访问编译器。

还有一种更骇人听闻的方法可以让您直接从字符串中访问变量。这是通过在“thisContext”中执行编译的代码（在这种情况下，即使在工作区中您也需要声明临时变量）：

```
| obj msg result |
obj := 3.
msg := 'obj + 5'.
result := Compiler new evaluate: msg in: thisContext to: nil. 
```

但是，我不推荐最后一种技术。执行通常比涉及编译器更安全。也就是说，它可以用来实现一些严肃的元数据。例如：

```
| obj |
obj := 3.
'The result is {obj + 5}.' expand 
```

“expand”方法的实现留给好奇的读者；）

# javascript - Django 上的 js/css 文件上的 Gzip

> ID：10461573
> 
> 赞同：0
> 
> 时间：2012-05-05T11:52:12.983
> 
> 标签：javascript, django, gzip

我知道最好将 AWS 之类的东西用于静态文件，但我正处于开发阶段，我更喜欢在 localhost 上拥有 javascript/css 文件。

如果我能让 gzip 对我的 javascript 文件进行测试，那就太好了。我正在使用默认的 gzip 中间件，但它只是压缩视图请求。

我的模板看起来像：

```
<script src='file.js' type='application/javascript'></script> 
```

django-based-server 应该有一个类似于 Nginx 的文件类型列表。如何为 gzip 压缩添加应用程序/javascript、文本/javascript 等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:02:39.083

您应该阅读[GZipMiddleware](https://docs.djangoproject.com/en/dev/ref/middleware/#module-django.middleware.gzip)文档，其中解释了当“Content-Type 标头包含 javascript 或以 text/ 以外的任何内容开头”时，中间件不会压缩响应。

编辑：

为了澄清文档所说的内容，如果`Content-Type`标头值包含`javascript`或不以 开头`text/`，则不会压缩响应。这意味着两者都`text/javascript`将`application/javascript`是无效响应，因为它们匹配`javascript`。

这些限制是中间件本身故意施加的，但您仍然可以通过使用`gzip_page()`装饰器包装静态文件视图处理程序并将其手动添加到您的 URL 配置来规避这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:03:57.100

在开发过程中，您使用的是 Django 内置网络服务器，该服务器非常简单，除了您可以看到的以外，没有任何其他选项`./manage.py help runserver`

您可以选择设置真正的网络服务器或使用`staticfiles`自定义的应用程序`StaticFilesStorage`

但老实说，这太过分了，为什么要测试 gzip 压缩？

# java - 向下舍入（即使之前的计算结果 < .5）

> ID：10461577
> 
> 赞同：3
> 
> 时间：2012-05-05T11:52:28.560
> 
> 标签：java, android

尽管有小数点后的值，但我正在尝试将数字四舍五入。然后，目的是从整数中减去四舍五入的数字，以将小数隔离为新值。

```
DecimalFormat decfom = new DecimalFormat("#.##");
String splitter1 = decfom.format(newdecihole);

DecimalFormat df = new DecimalFormat("##."); 
String splitter2 = df.format(newdecihole);
double split1 = Double.parseDouble(splitter1);
double split2 = Double.parseDouble(splitter2);

double splitdeci = split1 - split2;
double finfracti = splitdeci * 8; 
```

我想做的是把结果变成整数和八分之一。我尝试过的一切都很好，直到我得到一个向上而不是向下取整的结果（然后给 splitdeci 一个负值）。

我试过将 split 2 设为 int 但它只是将其四舍五入

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:54:05.433

你在寻找

```
Math.floor 
```

?

[http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#floor(double](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#floor(double) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T11:55:15.963

```
double splitDecimal = split1 - Math.floor(split2);
int eightFraction = Math.round(splitDecimal) * 8; 
```

# c - 如何使用 EOF 结束 scanf 循环？

> ID：10461581
> 
> 赞同：0
> 
> 时间：2012-05-05T11:53:57.260
> 
> 标签：c, scanf

我需要接收数字，直到按回车键，我试图将 scanf 的返回值与 EOF 进行比较，但它一直要求我输入更多数字（无限循环）：

```
int fail=0, late=0, avg=0, i=0, last=0, current, permission, difference;
while(scanf(" %d", &current) != EOF)
{
    permission = (current < last);
    difference = ((last - current) >= 30);
    fail += difference*permission;
    late += permission;
    avg += (last - current)*(permission);
    last = last*(permission) + current*(!permission);
} 
```

有什么建议么。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T20:20:59.313

One issue you are having is that the documentation for scanf says that most format conversions skip whitespace. (This includes carriage return and newline.)

One option is to read a character at a time and then make some numbers. In this way you could catch any bogus input. You could also differentiate between inline whitespace (space and tabs) and line terminating whitespace (CR and NL).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T13:41:33.460

如果您使用的是 linux，您可以在输入时停止您的 while 循环`CTRL+D`

EOF = `CTRL`+ `D`（对于 Linux）

EOF = `CTRL`+ `Z`（对于 Windows）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T01:57:11.713

好吧，scanf 规范说它将读取并忽略任何空白字符。此外，规范说只有在输入失败的情况下才会返回 EOF，然后才能成功读取任何数据。你可以[在这里](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)自己阅读。

我建议使用其他答案中提到的其他阅读功能。尽管如此，如果您必须在该 scanf 循环中生存和死亡，也许您可​​以在底部添加以下代码：

```
if (getchar() == '\n') break; 
```

如果您的输入只是数字，它应该可以工作，并且它只是使其工作的一种方法。

# sql - Oracle WHERE 子句（ AND ， OR 运算符）

> ID：10461584
> 
> 赞同：4
> 
> 时间：2012-05-05T11:54:08.143
> 
> 标签：sql, oracle11g

在 Oracle SQL 中执行 where 子句时的朋友假设我有

```
UPDATE schema1.TBL_SCHEMA1_PROCESS_FEED F
                 SET F.TBL_SCHEMA1_PROCESS_LINE_ID      = V_LINE_ID,
                     F.TBL_SCHEMA1_PROCESS_LINE_TYPE_ID = V_LINE_TYPE_ID,
                     F.TBL_SCHEMA1_PROCESS_LINE_SUB_TYPE_ID = V_SUB_TYPE_ID,
               WHERE F.CURR_DATE = V_CURR_DATE  
               AND   F.NEXT_DATE = V_NEXT_BUSINESS_DATE OR F.NEXT_DATE IS NULL; 
```

如何针对条件优化此代码

```
F.NEXT_DATE = V_NEXT_BUSINESS_DATE OR F.NEXT_DATE IS NULL 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:05:20.323

那是你的实际`where`条款吗？你的意思是：

```
WHERE F.CURR_DATE = V_CURR_DATE  
  AND ( F.NEXT_DATE = V_NEXT_BUSINESS_DATE 
        OR F.NEXT_DATE IS NULL ) 
```

如果是这样，那么您*需要*一个索引，如果可能的话是唯一的，在`curr_date`.

如果您不满意这在执行时间上提供了足够大的改进，那么请考虑将其扩展为`curr_date, next_date`. 如果不需要，不要创建更大的索引。

你也可以考虑稍微改变你的条件，尽管我怀疑它会产生很大的不同，如果有的话。

```
WHERE F.CURR_DATE = V_CURR_DATE  
  AND NVL(F.NEXT_DATE, V_NEXT_BUSINESS_DATE) = V_NEXT_BUSINESS_DATE 
```

最好的选择是使用[`rowid`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns008.htm#SQLRF00254). 如果没有更多信息，就不可能知道您是否处于可能的情况，但由于`rowid`它是表中的唯一地址，因此在更新单行时它*总是比索引更快。*如果您要从此表中收集数据，然后在写回表之前填充变量，那么这是可能的。

这些是您的实际架构和表名吗……如果是，那么为什么不考虑选择更具描述性的东西呢？

# python - 如何将值传递给龙卷风中的模板

> ID：10461585
> 
> 赞同：5
> 
> 时间：2012-05-05T11:54:21.097
> 
> 标签：python, templates, python-2.7, tornado

我有一个模板，它显示了许多从服务器传递的值，我的问题是如何将这些值传递给模板文件。我的处理程序代码如下： class AdminHandler(tornado.web.RequestHandler): def get(self, *args, **kwargs): #respond to a get method #self.write("AdminHandler:: Inside GET function")

```
 userName = "Alwin Doss"
    welcomeMessage = "Good evening are you enjoying kids dance"
    items = {}
    items["userName"] = userName
    items["welcomeMessage"] = welcomeMessage

    self.render("web/admin.html", title="Admin Page", items=items) 
```

我的模板代码如下： {% items['userName'] %} {% items['welcomeMessage'] %} {% end %}

问题是我无法在模板文件中访问这些值。我收到以下错误：

raise ParseError("unknown operator: %r" % operator) ParseError: unknown operator: "items['userName']" ERROR:root:500 GET /admin (127.0.0.1) 3.27ms

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T14:21:30.120

这是一个类似于您似乎正在做的演示。查看模板的语法并查看块的不同`{% %}`用途`{{ }}`。这段代码：

```
from tornado import template

t = template.Template('''\
{% for user in users %} 
    {{ user['userName'] }} 
    {{ user['welcomeMessage'] }} 
{% end %}
''')

# create first user and append to a user list
users = []
user = { "userName" : "Alwin Doss",
        "welcomeMessage" : "Good evening are you enjoying kids dance"}
users.append(user)

# create and append second user
user = { "userName" : "John Smith",
        "welcomeMessage" : "Good evening, JS"}
users.append(user)

# render the template and output to console
print t.generate(users = users) 
```

产生这个输出：

```
Alwin Doss 
Good evening are you enjoying kids dance 

John Smith 
Good evening, JS 
```

有关 Tornado 模板的更多信息，请查看[本教程](https://carlosgabaldon.wordpress.com/articles/tornado-templates/)，当然还有[Tornado 模板文档](http://www.tornadoweb.org/en/latest/template.html)。

# mysql-workbench - Mysql Workbench：有什么方法可以强制关系直线？

> ID：10461587
> 
> 赞同：2
> 
> 时间：2012-05-05T11:54:24.977
> 
> 标签：mysql-workbench

如您所知，当在模式图中创建两个表之间的关系时，会在它们之间绘制一条线。你知道有什么方法可以让这些线变直吗？

诉 5.2.34

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-16T16:44:51.093

不幸的是，唯一的方法是手动编辑表格位置：选择表格，然后在属性编辑器中调整顶部/左侧属性，直到达到对齐>

![在此处输入图像描述](../Images/035c8c85fa12110dbc74ee00238c2c51.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T12:00:34.600

好的，有一个名为“将对象与网格对齐”的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-08T23:02:08.697

我发现将缩放比例更改为 200% 可以让您在大多数情况下调整线条并使它们笔直。

# c - 程序仅在被跟踪时崩溃

> ID：10461588
> 
> 赞同：-1
> 
> 时间：2012-05-05T11:54:36.840
> 
> 标签：c, gdb, stack

*有时，当我有一个带有很多堆栈变量的 C 函数（比如 struct mystruct m[1000]）时，程序只有在使用 gdb 调试时才会在*进入该函数时崩溃。

你能解释一下那里发生了什么吗？对不起，如果这不是一个“真正的”问题，但我想我可以从答案中学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:02:45.593

你能检查一下ulimit -s吗？您能否在此处发布您的程序，以便我们可以看到您在该功能中要做什么。

# python - PIP 安装和 Python 路径

> ID：10461590
> 
> 赞同：13
> 
> 时间：2012-05-05T11:54:43.960
> 
> 标签：python, macos, installation, pip

我在 Mac 上使用 pip install 来获取 django 网站的 python 要求。

我从 MacPorts 得到了点子

```
port install pip-2.7 
```

现在的问题是 pip 将软件包安装在我的 python sys.path 中没有的位置。

我刚刚复制了这个虚假的位置

```
/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/) 
```

到我的 sys.path 中的某个位置

```
/Library/Python/2.7/) 
```

当然，这没问题，但我将来会使用 pip，所以我需要一个持久的解决方案。

问题是如何更改我的 sys.path 以识别该垃圾位置，或者如何告诉 pip 在其他地方安装依赖项？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T13:42:04.863

经过几次尝试，设置 PYTHONPATH 环境变量起作用了。

实现此目的的最佳方法是将以下内容添加到 ~/.bash_profile：

```
export PYTHONPATH=<bogus path here> 
```

更改后不要忘记打开新终端。

# java - 如何在Java中将字节数组写入文件

> ID：10461592
> 
> 赞同：0
> 
> 时间：2012-05-05T11:54:50.340
> 
> 标签：java, file, bytearray

我想将一个字节数组写入文件。这是网络[http://allmybrain.com/2012/03/16/quick-convert-raw-g711-ulaw-audio-to-a-au-file/中的代码](http://allmybrain.com/2012/03/16/quick-convert-raw-g711-ulaw-audio-to-a-au-file/)

```
 import struct
    header = [ 0x2e736e64, 24, 0xffffffff, 1, 8000, 1 ]
    o=open('out.au','wb')
    o.write ( struct.pack ( ">IIIIII", *header ) )
    raw = open('in.raw','rb').read()
    o.write(raw)
    o.close() 
```

我转换为 java ：

```
 byte []  header= {   0x2e736e64, 24, 0xffffffff, 1, 8000, 1 };
        FileOutputStream out = new FileOutputStream(file);
        out.write(header); 
```

但这是错误的。你能帮我修一下吗。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T14:30:44.263

在您的 python 代码中，您正在编写 32 位整数而不是 8 位字节；您可以使用此代码获得相同的结果：

```
 byte []  header= {   0x2e, 0x73, 0x6e, 0x64,
                      0x0,  0x0,  0x0,  24,
                      -1,  -1,    -1,   -1,
                      0,   0,     0,    1,
                      0,   0,     0x1f, 0x40,
                      0,   0,     0,    1 };
 FileOutputStream out = new FileOutputStream(file);
 out.write(header); 
```

# jquery - 按钮单击计数重置和重复

> ID：10461595
> 
> 赞同：1
> 
> 时间：2012-05-05T11:55:02.603
> 
> 标签：jquery, html, css, onclick, click

有没有人可以帮助我解决这个问题。我正在玩一个小按钮项目。

我正在使用 css 按钮，但让我们从这里说一个按钮。“例如：[http](http://www.cssbuttongenerator.com/) ://www.cssbuttongenerator.com/ ”

现在让我们说，当有人点击按钮时，它会在按钮 1 下方写下...如果有人再次点击，它将写下 2... 不管谁会点击。我，你或第三者。它将计算并记住点击次数。

现在假设它数到 100，所以 100 人可以点击它。之后它重置为 0 并再次开始计算点击次数。

这一定是可能的。Jquery 或任何需要的东西，请帮助这个新手（我）。

甚至使用输入按钮或图像或其他任何东西......只是为了计算和记住点击次数。谢谢，等待一些好的答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T11:58:54.520

您可以使用 cookie 使用 javascript 设置它们，然后单击按钮读取该 cookie 的值，以获取有关使用 javascript 操作 cookie 的更多信息，请通过[此](http://www.w3schools.com/js/js_cookies.asp)。 [这里](http://www.htmlgoodies.com/beyond/javascript/article.php/3470821/So-You-Want-To-Set-A-Cookie-Huh.htm)还有另一个链接，解释了如何使用 javascript 将值存储在 cookie 中

**更新**

如果您不想在对页面的不同请求之间保留计数器并且对于单个用户我做了一个小提琴，那么您的解决方案也可以在没有 cookie 的情况下进行，请看[**这里**](http://jsfiddle.net/FB8xA/4/) 我希望它会有所帮助

**更新 2**

您的

```
No matter who will click 
```

这只有在您使用任何服务器端技术（如 asp.net、Java/jsp/PHP）时才有可能，因为在这种情况下，基于 cookie 的解决方案将无法满足您的需求。如果您希望任何人点击并且每次都应该增加计数器无论谁点击它，你**都必须使用**服务器端会话。

**更新**

在 jquery 中，onDOMReady 的意思是当文档/页面完全加载时，只有脚本才会运行，因此无论如何都使用页面注册脚本的错误安全方式我使用 jquery 样式的按钮单击处理程序，如果你不使用 jquery，那么你可以简单的调用计数按钮 onclick 事件上的功能

如果您使用的是 jquery，那么您可以这样编写

```
 $(document).ready(function(){
    var x = 0;    
    function resetcounter() {
    x = 0;
    document.getElementById("counting").value = x;
    }

   function count() {
   if(x<50)
    {
      x += 1;
    }
    else
    {
        x=0;
    }
    document.getElementById("counting").value = x;
   }
   $('#btn').click(

         function() {
         count();
    });

    $('#reset').click(

    function() {
           resetcounter();
    });  
}); 
```

# javascript - location.href 和 window.location.href 之间的性能差异

> ID：10461598
> 
> 赞同：2
> 
> 时间：2012-05-05T11:55:18.400
> 
> 标签：javascript

我已经读过 location.href 比 window.location.href 快。但是在内部 location.href 被读取为 window.location.href 对吗？那么它将如何提高显着的性能呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T12:02:04.583

> 我已经读过 location.href 比 window.location.href 快。

它可能会***快得多***，但在现实生活中你不会注意到。原因如下：

这是引擎在看到时所做的（理论上）`location.href`：

*   `location`在当前范围内查找；如果没有找到，则转到包含范围，依此类推，最终到达全局范围。
*   在全局范围内，`location`作为全局对象的属性被发现。
*   然后它查找对象的`href`属性`location`。

这是引擎在看到时所做的（理论上）`window.location.href`：

*   `window`在当前范围内查找；如果没有找到，则转到包含范围，依此类推，最终到达全局范围。
*   在全局范围内，`window`作为全局对象的属性被发现；它是全局对象用来引用*自身*的属性。
*   然后它查找`location`该对象的属性。
*   然后它查找对象的`href`属性`location`。

因此，`window.location.href`它需要更多的属性查找`location.href`——除非 JavaScript 引擎可以应用任何优化。但是 JavaScript 的性能因*引擎*而异。你的旅费可能会改变。[这是FB55 放在一起](https://stackoverflow.com/a/10461710/157247)[的基准](http://jsperf.com/window-vs-direct-access)，表明上述理论得到了实验结果的证实；确实更快。在那个特定的测试中。`location.href`

![无偿的基准截图](../Images/c14fcf87e58d551846c3d3b1b531bed1.png)

（蓝色 = `location.href`，红色 = `window.location.href`；更长的行 = 更快的性能。）

更重要的是：**这真的重要吗？不在现实世界中，不。**你必须这样做数百万次才能有任何人类可感知的差异。但这就是为什么您会看到人们对全局变量`location`（或任何其他全局变量，内置或由您自己的代码添加）这样说的解释。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T11:59:43.080

document.location 被弃用，取而代之的是 window.location，它可以通过 location 访问，因为它是一个全局对象。

位置对象有多个属性和方法。如果您尝试将其用作字符串，则其行为类似于 location.href。为了安全起见，最好始终使用 location.href

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T12:09:55.417

对此的一些想法：

*   在浏览器中，`window`是全局对象，因此分配给它的所有属性都可以在不引用它的情况下访问。在这两种情况下，都需要在每个周围的范围内搜索变量（阅读：甚至需要搜索窗口对象）。
*   为了避免昂贵的搜索，大多数现代浏览器都实现了一种称为“内联缓存”（IC）的技术。简而言之，这意味着您始终指向正确的对象。

无论如何，我创建了一个[简单的 benchmark](http://jsperf.com/window-vs-direct-access)。显然，直接访问更快（至少在 Chrome 中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:01:10.597

乍一看，它们做同样的事情，如果您使用框架，它们可能会有不同的行为。

在这种情况下，它们可能会返回不同的值，根据您的框架嵌套复杂性可能会有一些性能差异，但忽略框架的东西，它们会在同一时间做同样的事情。

请说明您在哪里读到这方面的信息。

高温高压

# android - 通过 ContentProvider 游标呈现后台加载数据

> ID：10461605
> 
> 赞同：0
> 
> 时间：2012-05-05T11:56:07.430
> 
> 标签：android, multithreading, android-ui

我目前正在重构一个 Android 项目，该项目在一些地方在后台线程上加载数据以更新列表视图。被调用来收集数据的 API 有一个回调机制，所以当返回大量数据（需要很长时间）时，我可以异步处理结果。

在旧代码中，此数据被打包为适当的对象并传递到 UI 线程上的句柄中，以插入到列表视图的适配器中。这很有效，但我决定通过 ContentProvider 呈现数据将使项目更易于维护和扩展。

这意味着当通过查询方法请求时，我需要将数据作为 Cursor 对象提供。

到目前为止，我在重新调整光标后无法更新光标中的数据。这是否意味着在返回 Cursor 之前需要收集所有数据？Android [LoaderThrottleSupport](http://developer.android.com/resources/samples/Support4Demos/src/com/example/android/supportv4/app/LoaderThrottleSupport.html)示例表明我没有，但我还没有让它适用于 SQL 后端以外的任何东西。

有没有其他人尝试过以这种方式呈现非 SQL 支持的异步数据？

# java - OpenJDK 项目的有效 RSS 更改在哪里？

> ID：10461611
> 
> 赞同：1
> 
> 时间：2012-05-05T11:57:19.347
> 
> 标签：java, openjdk, java-8

我想通过 RSS 收到有关 JDK 项目的最新更改的通知，例如 lambda 项目。[http://hg.openjdk.java.net/lambda/lambda/jdk/rss-log](http://hg.openjdk.java.net/lambda/lambda/jdk/rss-log)似乎不是有效的 RSS 输出，那么 OpenJDK 项目的有效 RSS 在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:04:10.427

让我猜猜。您使用的是 Chrome 浏览器吗？它对 RSS 一致性很挑剔......

我建议你现在切换 Firefox 来阅读这个 RSS 提要。Firefox 对我来说很好。如果它真的让您感到困扰，请查看您是否可以找出此提要的问题并将其报告给站点维护人员。

回答您的问题：我不知道是否还有其他 RSS 提要，但我很怀疑没有。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-13T07:27:25.933

2012：OpenJDK Mercurial rss feed 输出似乎存在一些错误。

2021 年更新：显然现在已修复，[http](http://hg.openjdk.java.net/lambda/lambda/jdk/rss-log) ://hg.openjdk.java.net/lambda/lambda/jdk/rss-log虽然我曾经用谷歌阅读器检查过它，但它自 2013 年以来就消失了！

# php - 使用按钮 onclick 将 php while 循环中的值传递给 javascript

> ID：10461612
> 
> 赞同：2
> 
> 时间：2012-05-05T11:57:19.547
> 
> 标签：php, javascript, jquery, onclick

我有一个巨大的表格，在表格的一部分我想使用 js 向数据库插入一些值。我可能不清楚如何提出这个问题，但我的需求是：假设我在数据库 table1 和 table2 中有两个表。以 html 形式：

```
<select name="tab1" id="tab1">  
<?php   while($row = fetch from table 1){   ?>  
        <option value"<?=$row['name']?>" name="option1"><?=$row['name']?></option>  
<?php  }  ?>  
</select>  
<input type="file" name="file">  
<input type="button" name="button" onclick="submit_form(true,'');"> 
```

现在，我想将 $row['name'] 值传递给 javascript 中的 submit_form() 函数。javascript 代码将检查该值并将其返回到表单以提交它。我的问题是由于 table1 中的 $row['name'] 在 while 循环内，我无法将值传递给 javascript。如果表单很小，我可以使用提交按钮并检查 $_POST('submit') 类型。我想以这种形式将 $row['name'] 插入到 table2 作为与名称关联的文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:25:29.917

据我了解，您想将选定的值从表单传递到`submit_form()`函数？

```
function submit_form(param1, param2){

    var passedValue = document.getElementById('tab1').value;

     // here is your old submit_form() function. passedValue contains 
     // your selected $row['name']

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:03:15.940

@Jhilke Dai，首先，您的 php 代码有点小错误，'=' 符号必须在 html 中而不是在 php 中，正确的代码是

```
<select name="tab1" id="tab1"> 
<?php while($row = fetch from table 1) { ?> 
<option value="<? echo $row['name'] ?>" name="option1"><? echo $row['name'] ?></option> 
<?php } ?> 
</select> 
<input type="file" name="file"> <input type="button" name="button" onclick="submit_form(true,'')"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T12:41:29.567

您可以使用通用函数甚至 jQuery 迭代来获取表单值

请参阅类似的问题答案：[Get selected value/text from Select on change](https://stackoverflow.com/questions/5416767/javascript-selected-value)

```
function getDomValueByID( id ) {
    return document.getElementById(id).value;
}

function submit_form( a, b ) {
    var formValue = getDomValueByID( 'tab1' );
    //OR
    var jQueryFormValue = jQuery( "#tab1" ).val();
    //Do what u want here.
} 
```

事实上，有些人认为通过 javaScript 传递选项数据是一个非常糟糕的主意，如果它已经在页面上生成，原因如下

1.  重复数据，浪费带宽。
2.  可移植性较差的代码，非 OOP。
3.  更难维护，更改您的 php 代码需要更改您的 JavaScript 代码。

另外，如果您真的很感兴趣（这种做法有时不受欢迎）。您可以在标题中的某处将以下内容用作 PHP 代码。将 PHP 变量传递给 JavaScript。然而，有很多更好的方法可以做到这一点，从 JSONS 到 XML。

```
<?php optList = ['one', 'two', 'three']; ?>
<script type="text/javascript">
     //Window represents the global variable space, and doing this is really bad practice as listed above.
     window.optionList = [ <?php echo( implode(' , ', optList) );?> ];
</script> 
```

# javascript - 添加自动播放 jquery 幻灯片

> ID：10461613
> 
> 赞同：1
> 
> 时间：2012-05-05T11:57:29.913
> 
> 标签：javascript, jquery

我有以下代码，无法在滑块上添加自动播放。谁能帮我这个？

jQuery

```
<script type="text/javascript">
            $(function() {
                $(".slider").jCarouselLite({
                    btnNext: ".next",
                    btnPrev: ".prev",
                    visible: 5
                });
            });

            $(document).ready(function(){
                $('img.captify').captify({                  
                    speedOver: 'fast',
                    speedOut: 'normal',                     
                    hideDelay: 500,                     
                    animation: 'slide',                     
                    prefix: '',                     
                    opacity: '0.7',                     
                    className: 'caption-bottom',                        
                    position: 'bottom',                     
                    spanWidth: '100%'
                });
            });

        </script> 
```

如何在此滑块上添加自动播放

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:06:40.963

```
$(function() { 
  $(".slider").jCarouselLite({
    auto:500,
    speed:800,
    btnNext: ".next",                     
    btnPrev: ".prev",                     
    visible: 5                 
  });             
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:15:53.687

```
$(".slider .jCarouselLite").jCarouselLite({
    auto: 800,
    speed: 1000
}); 
```

# android - 单击按钮删除sqlite数据库中的一行

> ID：10461614
> 
> 赞同：-2
> 
> 时间：2012-05-05T11:57:34.880
> 
> 标签：android, database, sqlite, delete-row

dhelper.java- deleteshowById2 函数在单击活动类函数名称删除行中的按钮时调用，在此函数中传递类上下文并传递名称。

```
public static int deleteShowById2(String name, Context ctx) {

    DBHelper dbHelper = new DBHelper(ctx);
    SQLiteDatabase db = dbHelper.getReadableDatabase();

    String where = "showId='"+name+"'";
    return db.delete(TableName, where, null);

} 
```

活动课

```
public void deleteRow()
{
    name=e1.getText().toString();
    MyfirstPojo ob=new MyfirstPojo();
    ob.setName(name);
    int i=0;
    i=dheloper.deleteShowById2(name,this);
    if(i>0){
        Toast.makeText(this, "One Row Deleted", Toast.LENGTH_LONG).show();
    }

}
Button deletebutton=(Button)findViewById(R.id.button3);
    deletebutton.setOnClickListener(this);

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.button1 :
        gettext();
        break;
    case R.id.button2 :
        Intent i=new      Intent(MyfirstdatabaseActivity.thiViewDetailsActivity.class);
        startActivity(i);
        finish();
    case R.id.button3 :
        deleteRow();
    default:
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:02:26.480

改变这个

```
SQLiteDatabase db = dbHelper.getReadableDatabase(); 
```

对此

```
SQLiteDatabase db = dbHelper.getWritableDatabase(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:01:27.907

```
SQLiteDatabase db = dbHelper.getReadableDatabase(); 
```

您不能删除以只读状态打开的数据库中的行。改用这个：

```
SQLiteDatabase db = dbHelper.getWritableDatabase(); 
```

# java - 一个对象的创建和分配没有 new 或声明

> ID：10461615
> 
> 赞同：0
> 
> 时间：2012-05-05T11:57:41.000
> 
> 标签：java, object, webots

我正在尝试理解 Webots（机器人模拟程序）中的示例代码。

我遇到过这段代码：

```
Servo rightShoulderPitch = getServo("RShoulderPitch");
rightShoulderPitch.setPosition(1.5); 
```

我不明白第一行是什么肉。看起来“rightShoulderPitch”是Servo类的一个对象，但它没有像往常一样创建，以及“getServo”（我认为它是一种方法）如何出现在这里。

如果有帮助，此类的标题是：

```
public class FieldPlayer extends Robot { 
```

参考手册中也有公司的描述，但我不明白它们的意思。可以在[这里](http://www.cyberbotics.com/reference/section3.40.php)搜索**getservo**找到它。

--- RShoulderPitch：是机器人肩部的名称

我会非常感谢您的帮助。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T11:59:27.750

这一行：

```
Servo rightShoulderPitch = getServo("RShoulderPitch"); 
```

...调用该`getServo`方法，传入字符串值“RShoulderPitch”。返回值作为`rightShoulderPitch`变量的初始值，类型为`Servo`。（请注意，这`rightShoulderPitch` *不是*一个对象 - 它是一个变量。它有一个值，可以是 null 或对对象的引用。）

我们不知道返回类型`getServo`是什么，但它必须是可以隐式转换的东西`Servo`——所以要么是`Servo`它自己，要么是某个子类。

`getServo`可以：

*   创建一个新对象，并返回对它的引用
*   返回对现有对象的引用（例如从缓存中）
*   返回空
*   抛出异常

如果这些都没有帮助，请*准确*说明您不了解的内容。听起来您可能是 Java 新手——在这种情况下，不使用 Webbots API 学习“仅 Java”可能是一个好方法；仅当您对语言本身有信心时才学习 Webbots。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T12:06:44.197

为了补充乔恩的出色回答，我将尝试用更笼统的术语向您解释。

当你想要一个三明治时，你有两种解决方案：

*   自己准备三明治。这将相当于代码`Sandwich s = new Sandwich()`
*   去小吃店问他们要三明治。这将相当于代码`Sandwich s = snackBar.getSandwich("Ham & Cheese")`。

在后一种情况下，snackBar 对象的`getSandwich()`方法将使用您想要的三明治的名称（“Ham & Cheese”）来准备三明治并将其返回给您。因此，此方法可能会在内部调用 new `Sandwich()`。但它也可以委托给另一个对象并调用，例如：`cook.prepareSandwich("Ham & Cheese")`. 在这种情况下，将调用`new Sandwich()`. 或者，snackBar 对象也可以只获取一个预先准备好的三明治并存储在某个缓存中：`fridge.getSandwich("Ham & Cheese")`。

# java - JMX 2.0 的现状如何？

> ID：10461617
> 
> 赞同：9
> 
> 时间：2012-05-05T11:57:58.493
> 
> 标签：java, jmx

它应该与 Java 7 一起发布，但状态是[Dorman](http://jcp.org/en/jsr/detail?id=255)。另一方面，同一页说

> 在 JMX API 中使用泛型，例如有`MBeanServer.queryNames`return`Set<ObjectName>`而不仅仅是`Set`.

这确实发生[在 Java 6](http://docs.oracle.com/javase/6/docs/api/javax/management/MBeanServer.html#queryNames%28javax.management.ObjectName,%20javax.management.QueryExp%29)中。那么，是否有一些变化？Java 6 和 Java 7 JMX 实现之间是否存在显着差异？查看 Javadocs，我没有注意到任何内容，但这仅涵盖 API。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T19:08:41.453

不久前（2011 年 9 月），我也向 Oracle 的现任 JMX 产品经理[Tuva Palm](https://plus.google.com/118308589850181935930/posts)提出了这个问题，她向我保证，JMX 2.0 并没有消亡，2012 年第一季度会有技术路线图。

然而，直到现在什么都没有发生，更糟糕的是，[JSR-255](http://jcp.org/en/jsr/detail?id=255)，JMX 2.0 规范（还有[JSR-262](http://jcp.org/en/jsr/detail?id=262)，WebService 连接器的东西）自 2016 年以来被标记为[撤回，原因如下：](https://jcp.org/en/introduction/glossary#status)

> JSR 255 指定了对 javax.management.* 的更改，这些更改随后由于缺乏资源而被放弃，并且未包含在 Java SE 6 或 7 平台中。（这些更改与 JSR 3、160 和 336 为包含在 Java SE 6 和 7 平台中指定的 javax.management.* 的其他更改不同。）2014 年确定将直接指定对 JMX 技术的未来更改由 Java SE 平台的伞形 JSR 提供​​。

因此，原始形式的 JMX 2.0 实际上已经死了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T14:58:40.723

显然，[它被推迟到 JDK 8](http://weblogs.java.net/blog/emcmanus/archive/2009/06/jsr_255_jmx_api.html)，并且所有已经进行的更改都恢复了，所以 JDK 7 最终实现应该与 JDK 6 相同。

# jquery - JSP 甚至在单击按钮之前重定向到另一个页面

> ID：10461618
> 
> 赞同：0
> 
> 时间：2012-05-05T11:57:59.343
> 
> 标签：jquery, jsp

我有一个 JSP 页面，我用它来重定向到另一个 url（跨域），所以使用 jQuery 我放置了一个按钮单击事件，在该事件下 response.sendRedirect 应该触发，但是一旦页面加载它就会重定向它甚至不等待为警觉。这里有什么问题？请帮忙。

在身体负载上，它调用 load()

```
<script language="JavaScript">
    function load(){
        <%
        String message=(String)request.getAttribute("error");
        if(message != null){
            out.println("alert(\"" + message + "\");");
        }
        %>

    }

    /*a range of options (products) based on which it decides redirection or form submission
    * will lead to the new webapp*/
    var productArray=["iirDefault","ilmDefault","mdmDefault"];
    $(document).ready(function(){       

    });

    /*Button event handler for the intermediate screen for product selection after login*/
    $('#btnLaunchCSM').click(function(event){
        event.preventDefault();

        var selectedProduct=$('input[name=product_name]:checked').val();
        if(jQuery.inArray(selectedProduct, productArray)!=-1)
        {
            e_add=$("#emailaddress").val();
            p_id=$('input[name=project_id]:checked').val();
            alert(e_add+", "+p_id);
            <% 
            String e_add=request.getParameter("email_id");
            String p_id=request.getParameter("project_id");
            response.sendRedirect("http://abhishek:9090/abc/view/loginProxy.jsp?email_id="+e_add+"&project_id="+p_id); 
            %>

        }
        else
        {
            $("#launchSSO").submit();
        }

    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:01:06.057

您似乎期望 JSP *scriptlet*和 JavaScript 在您编写代码时同步运行。这不是真的。Java/JSP 在网络服务器中运行并生成 HTML。HTML/JS 在浏览器中运行。在浏览器中右键单击页面并*查看源代码*。如果 Java/JSP 正确地完成了它的工作，那么在生成的 HTML/JS 输出中应该看不到任何一行。

您需要向您的服务器发送（ajax）HTTP 请求。您可以为此使用 jQuery 或仅使用普通表单提交。或者您可以完全在 JS 中执行重定向。用以下方式替换那个臭`<% %>`块：

```
window.location = "http://abhishek:9090/abc/view/loginProxy.jsp?email_id="+e_add+"&project_id="+p_id; 
```

# python - Python - 更新数据库

> ID：10461621
> 
> 赞同：1
> 
> 时间：2012-05-05T11:58:53.987
> 
> 标签：python, sqlite

如何使用 sqlite3 更新数据库中已经存在的条目？

我试过了：

```
db_curs.execute("INSERT INTO `database` (cID) VALUES ('Updated')") 
```

但这当然会创建一个新条目。我可以获得（条目的）（行（？））编号，更新数据库而不是创建新条目的命令是什么？

编辑：

说得好一点，当我将 SQL 条目转换为 python 列表时，我得到以下信息，

```
(1, u'GGS-04', u'John', u'Smith', 9, u'0') 
```

我需要能够在最后一项中添加一个数字。这就是我所拥有的。

```
info = (1, u'GGS-04', u'John', u'Smith', 9, u'0')

for result in info:
    ln           = str(result[0])
    ggs          = str(result[1])
    first_name   = str(result[2])
    last_name    = str(result[3])
    dob          = str(result[4])
    spend        = str(result[5])
while True:
    res = raw_input("Enter points to add: ")
    try:
        int(res)
        break
    except:
        print "Please enter a number..."
        pass
spend = str(int(spend) + int(res))
db_curs.execute("UPDATE `" + db_name + "` (cID, first_name, last_name, date_of_birth, spend) VALUES ('" + srce + "', '" + first_name + "', '" + last_name + "', '" + dob + "' WHERE '" + spend + "')")
db_connection.commit() 
```

有人可以解释一下这个命令的正确语法吗？如果我可以只更新“支出”列而不是从前缀变量中全部更新它们，那就太棒了。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T14:54:18.777

这应该有效：

```
db_curs.execute("UPDATE database SET spend =`" + spend + "` WHERE cID="+ cID) 
```

另请参见[SQL 更新语法](http://www.w3schools.com/sql/sql_update.asp)

顺便说一句，“数据库”不是数据库表的有用名称。“用户”或“花费时间”或更具描述性的东西呢？

# mysql - hibernate 设置属性来触发数据库更新

> ID：10461622
> 
> 赞同：1
> 
> 时间：2012-05-05T11:58:54.207
> 
> 标签：mysql, hibernate, jakarta-ee

### 我刚刚在 Hibernate 中发现了一个奇怪的问题。

在 Hibernate 框架和 json-plugin 中的 My Java EE web 项目中。我的代码是这样的

```
private User user;
get(),set()....

public String getUser(){
   if(findUser(...) != null){
       user = findUser(...);
       user.setPasssword("")//!important for the purpose of  does not transmit the password to the front
       return "success";
   } else {
       return "error";
   }
} 
```

当代码执行数据库中的用户密码被清除时出现问题，我确定不会触发任何更新和插入功能。

我想知道为什么？谁能弄清楚，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:14:07.750

这是像 Hibernate 这样的 ORM 的基本原则：您操作映射到数据库表并附加到持久会话的对象，您对这些对象所做的每一次更改都会自动透明地记录在数据库中。

如果您希望对 User 对象的更改不记录在数据库中，您需要首先使用`session.evict(user)`.

您似乎没有掌握 Hibernate 的基本（也是非常重要的）原则。阅读其[出色的文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/)。

# ios - 用新对象更新 UIview

> ID：10461624
> 
> 赞同：0
> 
> 时间：2012-05-05T11:59:05.193
> 
> 标签：ios, xcode, view, refresh, reload

我有一个方法 makeButtons（在此处发布），它删除屏幕中的所有按钮并再次添加它们。这在 viewDidLoad 和 viewDidAppear 中运行良好。我正在从一个告诉我我需要一个新按钮的网络服务访问信息。当我从该方法调用 [self makebuttons] 时，什么都没有发生，直到我使用 NavigationController 来回移动，迫使 viewDidAppear 再次完成工作。我的问题是为什么？我做的完全一样，除非它不是从 viewDidAppear 调用的，而是从 doneGettingInformation 调用的。

```
- (void) viewDidAppear:(bool) animated {
    [self makebuttons]; // Works great!
}

- (void) doneGettingInformation : (ASIFormDataRequest *) request {
    NSString *response = [request responseString];
    [[self.temp.userInfo objectForKey:@"spillider"] addObject:response];
    [self makebuttons]; // This gets called, but nothing changes in the view itself.
}

- (void) makeButtons {
    NSLog(@"kjort");
    int newAntall = [[self.temp.userInfo objectForKey:@"spillider"] count];
    for (UIButton * button in gameButtons) {
        NSString *tag = [NSString stringWithFormat:@"%i",button.tag];
        [button removeFromSuperview];
        if ([webviews objectForKey:tag]) {
            [[webviews objectForKey:tag] removeFromSuperview];
            [webviews removeObjectForKey:tag];
        }
    }
    [gameButtons removeAllObjects];
    scroller.contentSize = CGSizeMake(320, 480);
    if (newAntall > 3) {
        CGSize scrollContent = self.scroller.contentSize;
        scrollContent.height = scrollContent.height+((newAntall-3)*BUTTON_HEIGTH);
        self.scroller.contentSize = scrollContent;
    }
    int y = 163;
    self.nyttSpillKnapp.frame = CGRectMake(BUTTON_X, y, BUTTON_WIDTH, 65);
    for (int i=0; i<newAntall; i++) {
        UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
        [button setBackgroundImage:[UIImage imageNamed:@"knapp_midt"] forState:UIControlStateNormal];
        [button setBackgroundImage:[UIImage imageNamed:@"knapp_midt"] forState:UIControlStateHighlighted];
        [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [button.titleLabel setFont:[UIFont systemFontOfSize:15]];
        button.frame = CGRectMake(BUTTON_X, y, BUTTON_WIDTH, BUTTON_HEIGTH);
        button.enabled = YES;
        UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc] initWithTarget:self
                                                                                    action:@selector(deleteButton:)];
        swipe.direction = UISwipeGestureRecognizerDirectionRight;
        [button addGestureRecognizer:swipe];
        button.tag = [[[self.temp.userInfo objectForKey:@"spillider"] objectAtIndex:i] intValue];
        NSString * tittel = [NSString stringWithFormat:@"spill %@",[[self.temp.userInfo objectForKey:@"spillider"] objectAtIndex:i]];
        [button setTitle:tittel forState:UIControlStateNormal];
        UIButton *subButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
        subButton.transform = CGAffineTransformMakeRotation(M_PI_2);
        subButton.tag = i;
        CGRect subframe = CGRectMake(230, 5, subButton.frame.size.width, subButton.frame.size.height);
        subButton.frame = subframe;
        CGRect myframe = self.nyttSpillKnapp.frame;
        myframe.origin.y = myframe.origin.y+BUTTON_HEIGTH;
        self.nyttSpillKnapp.frame = myframe;
        [subButton addTarget:self action:@selector(clickGameButton:) forControlEvents:UIControlEventTouchUpInside];
        [button addSubview:subButton];
        [gameButtons addObject:button];
        [self.scroller addSubview:button];
        y += BUTTON_HEIGTH;
    }
} 
```

总而言之，它仅在我来回更改视图控制器导致 viewWillAppear 被调用时才有效。这是为什么？

我为我凌乱的方法感到抱歉。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:25:07.683

如果您在初始视图出现过程或布局更改之外更改视图的内容，则您有责任调用 setNeedsDisplay 并通知运行循环它需要重新绘制。

系统将要求视图在最初或在布局更改期间绘制其内容，这就是为什么它作为首先显示视图的过程的一部分。在初始过程中，将调用 viewWill/DidAppear 代表。

从[UIView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)：

> **视图绘图周期**
> 
> 视图绘图根据需要进行。当视图首次显示时，或者由于布局更改而使其全部或部分可见时，**系统会要求视图绘制其内容**。对于包含使用 UIKit 或 Core Graphics 的自定义内容的视图，系统会调用视图的 drawRect: 方法。此方法的实现负责将视图的内容绘制到当前图形上下文中，该上下文由系统在调用此方法之前自动设置。这会创建视图内容的静态视觉表示，然后可以在屏幕上显示。
> 
> 当您的视图的实际内容发生变化时，您有责任通知系统您的视图需要重绘。为此，您可以调用视图的 setNeedsDisplay 或 setNeedsDisplayInRect: 方法。这些方法让系统知道它应该在下一个绘图周期更新视图。因为它要等到下一个绘图周期才更新视图，所以可以在多个视图上调用这些方法同时更新它们。

编辑：

此外，请确保在后台线程上未调用完成获取图像。您不能在后台线程上编辑视图。如果是，您可以在 bg 线程上准备所有数据，然后在主线程上调用 makeButtons（performSelectorOnMainThread 或使用块。

请参阅[GCD、线程、程序流程和 UI 更新](https://stackoverflow.com/questions/7290931/gcd-threads-program-flow-and-ui-updating/7291056#7291056)

# objective-c - cocoa：如何获得View above all 按钮？

> ID：10461634
> 
> 赞同：0
> 
> 时间：2012-05-05T12:00:38.767
> 
> 标签：objective-c, cocoa, xcode4.2, osx-lion

我想获取View above all button，Button设置背景。以下代码错误当程序打开时，设置按钮背景。

```
NSButton *button = [(AppWindow *)self.window button];

if (button.tag==5) {
    [button setImage:[NSImage imageNamed:@"menuBtnDown.png"]];
} 
```

# objective-c - 如何在 xcode 中调整我的应用程序音效的音量

> ID：10461635
> 
> 赞同：-1
> 
> 时间：2012-05-05T12:00:43.597
> 
> 标签：objective-c, xcode, ios5, audio

我的应用中有一些按钮点击音效。至少可以说他们有点吵。我想把它调低一点。我已经在 Audacity 中调整了 Wav 文件的音量，但是当在应用程序中以全音量播放时，我可以在我的代码中调整音量吗？

```
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"btn2", CFSTR 
                                          ("wav"), NULL);
UInt32 soundID;
AudioServicesCreateSystemSoundID (soundFileURLRef, &soundID);
AudioServicesPlaySystemSound (soundID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:39:39.073

使用[setVolume：](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSSound_Class/Reference/Reference.html) NSSound 类的方法。

> *   (void)setVolume:(float)volume
>     有效范围在 0.0 到 1.0 之间。
>     此方法不会影响系统范围的卷。

# jquery - Ajax POST 返回空字符串

> ID：10461638
> 
> 赞同：0
> 
> 时间：2012-05-05T12:00:48.327
> 
> 标签：jquery, ajax

我一直在尝试通过 ajax 从另一个站点访问数据，但失败了。这种情况是，如果我通过表单将数据发布到站点，那么我将被重定向到该站点并显示正确的数据。我想要做的是我希望我的脚本使用 ajax 获取该数据。我想澄清一件事，我不能修改服务器端的脚本，以便我可以添加`Access-Control-Allow-Origin`标题。

他们有什么诡计或黑客行为让我得到数据？？？

```
$(document).ready(function(){
                $.ajax({
                    type: 'POST',
                    url: 'http://somedomain.com/FlightStatus.aspx',
                    data: {ArrFltStatus:'KDU',DepFltStatus:'ISB',DropDownDay:'today',Submit:'Proceed'},
                     success: function(data){
                        alert(data);
                    },
                    error:function(xhr,err){
                        alert("readyState: "+xhr.readyState+"\nstatus: "+xhr.status);
                        alert("responseText: "+xhr.responseText);
                    }
                });
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:08:27.837

如果他们有 JSONp 接口，请使用它（但不适用于 POST）。

否则，您需要在服务器上执行远程访问的代理脚本，以便您的 JavaScript 可以访问同一域上的资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:06:13.923

请求跨域资源时，您应该在 ajax 选项中使用 dataType: 'jsonp' 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T12:27:45.800

当我使用脚本在本地 macine 上检索数据时，我也遇到了同样的问题，但是当我将调用脚本上传到请求数据的服务器上时，我得到了这个正常工作......

这是因为域安全，这不允许我从托管服务器检索数据..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:40:57.777

跨域请求只能用JSONP，而JSONP只支持GET，而$.ajax默认是GET，所以根本不需要设置类型：

```
$.ajax({
   url: 'http://somedomain.com/FlightStatus.aspx',
   data: {ArrFltStatus:'KDU',DepFltStatus:'ISB',DropDownDay:'today',Submit:'Proceed'},
   dataType : 'jsonp',
}).done(function(data) {
     alert(data);
}); 
```

JSONP 不会触发错误处理程序，因此也不需要使用它。

如果您请求数据的服务不支持 JSONP，您可以使用 Yahoo 的 YQL 设置一个管道，让您以 JSONP 格式获取数据。

# android - 正在添加 TableRow 但不显示

> ID：10461639
> 
> 赞同：1
> 
> 时间：2012-05-05T12:00:53.790
> 
> 标签：android, android-layout

我有一个小应用程序，它定期需要将表格行添加到表格布局中。根据 getChildCount() 方法，正在添加行但不显示。任何建议将不胜感激

```
 TableLayout tbl = (TableLayout)findViewById(R.id.mytbl);
    TableRow row = new TableRow(this);
    LinearLayout ll = new LinearLayout(this);
    TextView txtView = new TextView(this);

    row.setId(1234);
    row.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.WRAP_CONTENT,TableRow.LayoutParams.WRAP_CONTENT));
    row.setGravity(Gravity.CENTER);
    row.setBackgroundResource(android.R.color.darker_gray);

    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT,1.0f);
    ll.setId(1589);
    ll.setLayoutParams(lp); 
    ll.setOrientation(LinearLayout.VERTICAL);
    ll.setBackgroundResource(R.color.header_background);
    ll.setGravity(Gravity.CENTER);

    String msg = "Sample Text";

    txtView.setId(657);
    txtView.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.WRAP_CONTENT));
    txtView.setTextColor(R.color.a_color);
    txtView.setBackgroundResource(R.drawable.border_a);
    txtView.setGravity(Gravity.TOP | Gravity.LEFT);
    txtView.setText(msg);

    ll.addView(txtView);
    row.addView(ll);
    tbl.addView(row,new TableLayout.LayoutParams(TableLayout.LayoutParams.FILL_PARENT, TableLayout.LayoutParams.WRAP_CONTENT));//maybe add this with layout params tl.addView(tr,new TableLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)); 
```

我试过 tbl.RequestLayout() 和 tbl.Invalidate() 但没有帮助。该表被包裹在一个滚动视图中，这是我对问题所在的最佳猜测。我已经修改了几个小时，所以朝正确的方向轻推肯定会有所帮助

```
 <ScrollView
    android:id="@+id/scrVw_lst"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
     >

    <TableLayout
        android:id="@+id/mytbl"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" 
        android:stretchColumns="*"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T07:35:01.000

您是否运行了在您的 中添加一行的代码`TableLayout`？我模拟了单击 a 添加一行，`Button`但遇到了一个尴尬的`Divide by 0` 异常。

无论如何，`LayoutParams` 将封闭的更改`Linearlayout`为`TableRow.LayoutParams`（其父级是`TableRow`）：

```
 TableRow.LayoutParams lp = new TableRow.LayoutParams(
            TableRow.LayoutParams.FILL_PARENT,
            TableRow.LayoutParams.WRAP_CONTENT, 1.0f);
    ll.setId(1589);
    ll.setLayoutParams(lp) 
```

Also, if this doesn't solve the problem, try to add:

```
android:fillViewport="true" 
```

to the `ScrollView` tag in the xml layout.

# ruby-on-rails - 带有限制和特殊字符的元关键字中的正则表达式红宝石

> ID：10461649
> 
> 赞同：1
> 
> 时间：2012-05-05T12:01:43.343
> 
> 标签：ruby-on-rails, ruby, regex, ruby-on-rails-3

我有这个 ruby​​ 正则表达式来验证用户是否输入了以逗号分隔的元关键字。

```
validates_format_of :tags, :with => /^\s*[A-Za-z0-9]+(\s*,\s*[A-Za-z0-9]+)*\s*$/u 
```

我想在这个正则表达式中再添加 2 个条件：

*   将关键字限制为 4 个关键字。

*   添加西班牙语字符，例如`ñáéíóú`with`p{L}\s\p{N}`

**如何将这 2 个条件添加到此正则表达式中？谢谢**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T00:05:52.060

嘿，我认为这个正则表达式可以解决问题。

```
/^(([^,]+),){0,3}([^,]+)$/ 
```

您可以像这样进行验证：

```
validates_format_of :tags, :with => /^(([^,]+),){0,3}([^,]+)$/ 
```

或者用`validates`方法

```
validates :tags, format: {with: /^(([^,]+),){0,3}([^,]+)$/} 
```

两者都会做同样的事情

注意：你应该检查[Rubular](http://rubular.com)，它是一个很棒的 Ruby 正则表达式在线编辑器

# php - 每次我尝试导入 Drupal 数据库时，MySQL 服务器都会消失

> ID：10461657
> 
> 赞同：0
> 
> 时间：2012-05-05T12:02:41.323
> 
> 标签：php, mysql, drupal, mysqldump

我正在尝试使用现有站点在我的 PC 中构建开发环境。我复制了所有数据并导出了 Drupal DB，没有缓存 * 和看门狗表，以使脚本变小。当我尝试导入大约 12MB 的脚本时，出现“MySQL 服务器消失”错误并且不知道为什么或如何修复它。我已经尝试过 phpMyAdmin、服务器中的 MySQL 命令行等等。有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T12:10:59.877

编辑 mySql 配置文件 my.ini 并添加以下 2 行，重新启动服务器并检查。

```
max_allowed_packet= 64M

wait_timeout= 6000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:07:37.620

12MB 不会造成任何问题。请重新启动您的计算机。之后尝试启动mysql。

请通过两行更新mysql配置文件

```
max_allowed_packet= 64M

wait_timeout= 6000 
```

# android - 如何在 Android 中显示基于 lat 和 lang 的 Google 地图和地点？

> ID：10461662
> 
> 赞同：2
> 
> 时间：2012-05-05T12:03:03.110
> 
> 标签：android, google-maps, latitude-longitude, android-mapview

我想在 Android 中显示谷歌地图基于用户编辑文本值 lat 和 lang 和地名，然后我最后点击搜索按钮，地图显示在 Android 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:31:27.837

你需要创建一些像这样的对象。

```
MapView mapView; 
MapController mc;
GeoPoint p;
String add = "";
double lattitude ;
double longitude; 
```

按名称搜索位置并显示地图。

```
 AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("Search Location");
        alert.setMessage("Enter Location Name: ");

        // Set an EditText view to get user input 
        final EditText input = new EditText(this);
        alert.setView(input);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
          String value = input.getText().toString();
          // Do something with value!
          Log.d("value", value);

          Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault());    
            try {
                List<Address> addresses = geoCoder.getFromLocationName(
                    value, 5);
                String add = "";
                if (addresses.size() > 0) {
                    p = new GeoPoint(
                            (int) (addresses.get(0).getLatitude() * 1E6), 
                            (int) (addresses.get(0).getLongitude() * 1E6));
                    mc.animateTo(p);    
                    mapView.invalidate();
                }    
            } catch (IOException e) {
                e.printStackTrace();
            }

          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
          }
        });

        alert.show();

    } 
```

通过输入纬度和经度搜索位置并显示地图..

```
 searchUsingLangLat()
    {       

        LayoutInflater factory = LayoutInflater.from(this);            
        final View textEntryView = factory.inflate(R.layout.latlong, null);

        AlertDialog.Builder alert = new AlertDialog.Builder(this);

        alert.setTitle("Search Location");
        alert.setMessage("Enter Lattitude and Longitude: ");

        alert.setView(textEntryView); 
        // Set an EditText view to get user input
        AlertDialog latLongPrompt = alert.create();

        final EditText lat = (EditText) textEntryView.findViewById(R.id.lat);
        final EditText longi = (EditText) textEntryView.findViewById(R.id.longi);
    //alert.setView(lat);
        //alert.setView(longi);

        alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {

            Toast.makeText(getBaseContext(), "clicked ok ", Toast.LENGTH_SHORT).show();
          Double value1 = Double.parseDouble(lat.getText().toString());
          Double value2 = Double.parseDouble(longi.getText().toString());
          // Do something with value!
         // Log.d("value1", value1);
          //Log.d("value2", value2);

          p = new GeoPoint(
                    (int) (value1 * 1E6), 
                    (int) (value2 * 1E6));

                mc.animateTo(p);
                mc.setZoom(17); 
                mapView.invalidate();

          }
        });

        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
          public void onClick(DialogInterface dialog, int whichButton) {
            // Canceled.
          }
        });

        alert.show(); 
```

最后你需要显示地图。在 onCreate() 方法中编写以下代码。

```
mapView = (MapView) findViewById(R.id.mapView);
    LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
    View zoomView = mapView.getZoomControls(); 

    zoomLayout.addView(zoomView, 
        new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, 
            LayoutParams.WRAP_CONTENT)); 
    mapView.displayZoomControls(true);

    mc = mapView.getController();
    String coordinates[] = {"1.352566007", "103.78921587"};
    double lat = Double.parseDouble(coordinates[0]);
    double lng = Double.parseDouble(coordinates[1]);

    p = new GeoPoint(
        (int) (lat * 1E6), 
        (int) (lng * 1E6));

    mc.setCenter(p);
    mc.setZoom(17); 

    //---Add a location marker---
    MapOverlay mapOverlay = new MapOverlay();
    List<Overlay> listOfOverlays = mapView.getOverlays();
    listOfOverlays.clear();
    listOfOverlays.add(mapOverlay);      

    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000L, 500.0f, this); 
```

试试这个代码......如果你有任何错误可以免费询问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:36:36.427

如果您将一堆位置的纬度和经度存储在 SQLite 数据库中，您可以检索这些值并将它们分别放在一个 OverlayItem 类中，以便在 Google 的地图代码中使用！！

1.  数据库名称：数据库
2.  表名：地点

字段到位表：

1.  id 标题 描述 纬度 经度

你会想做这样的查询：

```
SELECT title, description, latitude, longitude
FROM place 
```

这可以像这样在Android中完成：

```
 // get your database object here using your DbHelper object and the
    // method getReadableDatabase();
    ArrayList<OverlayItem> items = new ArrayList<OverlayItem>();
    Cursor locationCursor = databaseObject.query("place", new String[] {
            "title", "description", "latitude", "longitude" }, null, null,
            null, null, null);

    locationCursor.moveToFirst();
    do {
        String title = locationCursor.String(locationCursor
                .getColumnIndex("title"));
        String description = locationCursor.String(locationCursor
                .getColumnIndex("description"));
        int latitude = (int) (locationCursor.getDouble(locationCursor
                .getColumnIndex("latitude")) * 1E6);
        int longitude = (int) (locationCursor.getDouble(locationCursor
                .getColumnIndex("longitude")) * 1E6);

        items.add(new OverlayItem(new GeoPoint(latitude, longitude), title,
                description));
    } while (locationCursor.moveToNext()); 
```

您需要将双精度值乘以 1e6，因为 Android 使用 lat/long 值的整数表示。如果您在填充数据库时已经考虑到这一点，请跳过乘法并使用 locationCursor.getInt(...)。

# php - 如何在 php 中替换 url

> ID：10461667
> 
> 赞同：-3
> 
> 时间：2012-05-05T12:04:04.580
> 
> 标签：php, url

有人可以帮我替换这个网址吗

[http://www.izlesene.com/video/arabic-shkira-belly-dance/200012](http://www.izlesene.com/video/arabic-shkira-belly-dance/200012)

至：200012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:07:17.087

使用[基本名称](http://tr.php.net/basename)

```
$video_id = basename($url); 
var_dump($video_id); 
```

或者

尝试[爆炸](http://tr.php.net/explode)并[获得最后一个项目](http://tr.php.net/end)。

```
$url = "http://www.izlesene.com/video/arabic-shkira-belly-dance/200012";
$segments = explode("/",$url);
$video_id = end($segments);

var_dump($video_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:09:11.053

```
$url = 'http://www.izlesene.com/video/arabic-shkira-belly-dance/200012';
$out = preg_replace("/[^0-9]/i","",$url); 
```

或者

```
preg_match("/\/([0-9]+)/i",$url,$m);
$out = $m[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T12:17:00.103

尝试：

```
$number = basename($url); 
```

提示：正则表达式并不总是最好的解决方案（即使非常强大但也很复杂）。请参阅[`basename`^(*文档*)](http://php.net/basename)。

如果您真的需要正则表达式，请从最后开始：

```
$url = "http://www.izlesene.com/video/arabic-shkira-belly-dance/200012";
$number = preg_replace('~.*/([^/]+)$~', '$1', $url);
                                   ^ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:07:12.100

如果事情像在 JS 中一样工作，你可以这样做：

```
$url = "http://www.izlesene.com/video/arabic-shkira-belly-dance/200012";
$a = explode("/", $url);
$number = array_pop($a); 
```

也许像这样：

```
$url = "http://www.izlesene.com/video/arabic-shkira-belly-dance/200012";
$number = array_pop( explode("/", $url) ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T12:11:27.473

或者你可以在没有数组和正则表达式的情况下更快地完成它：

```
$url = "http://www.izlesene.com/video/arabic-shkira-belly-dance/200012";
$url = substr($url, strrpos($url, "/") + 1); 
```

`strrpos`搜索字符串中最后一次出现的位置，`/`并`substr`返回由该位置指定的字符串部分。

# javascript - 在 html5 视频中寻找一个点

> ID：10461669
> 
> 赞同：53
> 
> 时间：2012-05-05T12:04:12.783
> 
> 标签：javascript, html, html5-video, seek

`html5 video`是否可以搜索到网页中显示的特定点？我的意思是，我可以输入一个特定的时间值（比如说`01:20:30:045`）并让玩家控制（滑块）移动到那个点并从那个点开始播放吗？

在旧版本的 mozilla 中，`vlcplugin`我认为这可以通过方法实现。`seek(seconds,is_relative)`但我想知道这在 html 视频中是否可行。

**编辑：**

我用视频创建了页面并添加了如下的javascript。当我点击链接时，它会显示点击时间..但它不会增加播放位置..但会继续正常播放。

视频播放位置不应该改变吗？

html

```
<video id="vid" width="640" height="360" controls>
       <source src="/myvid/test.mp4" type="video/mp4" /> 
</video>
<a id="gettime" href="#">time</a>
<p>
you clicked at:<span id="showtime"> </span> 
</p> 
```

javascript

```
$(document).ready(function(){
    var player = $('#vid').get(0);
    $('#gettime').click(function(){
            if(player){
                current_time=player.currentTime;
                $('#showtime').html(current_time+" seconds");
                player.currentTime=current_time+10;
            }
        });
}
); 
```

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-05-05T12:09:37.260

您可以使用`v.currentTime = seconds;`来寻找给定的位置。

参考：[https ://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/currentTime](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/currentTime)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-01-21T06:40:47.397

不幸的是，某些电影元素的行为似乎与其他元素不同。例如，对于亚马逊 video_element，您似乎必须先调用 pause，然后才能在任何地方搜索，然后再调用 play。但是，如果您在设置后调用“播放太快”，`currentTime`则它不会粘住。奇怪的。

这是我目前的工作：

```
function seekToTime(ts) {
  // try and avoid pauses after seeking
  video_element.pause();
  video_element.currentTime = ts; // if this is far enough away from current, it implies a "play" call as well...oddly. I mean seriously that is junk.
    // however if it close enough, then we need to call play manually
    // some shenanigans to try and work around this:
    var timer = setInterval(function() {
        if (video_element.paused && video_element.readyState ==4 || !video_element.paused) {
            video_element.play();
            clearInterval(timer);
        }       
    }, 50);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-23T00:26:58.460

最佳答案已过时。

您仍然可以使用：

```
this.video.currentTime = 10 // seconds 
```

但现在你也有：

```
this.video.faskSeek(10) // seconds 
```

文档提供了有关该`fastSeek`方法的以下警告：

> 实验性：这是一项实验性技术，在生产中使用之前请仔细检查浏览器兼容性表。HTMLMediaElement.fastSeek() 方法通过精确权衡快速将媒体搜索到新时间。如果您需要精确查找，则应改为设置 HTMLMediaElement.currentTime。

[https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/fastSeek](https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement/fastSeek)

基于上述情况，如果跨浏览器兼容性和性能是您的首要任务，我猜以下是最好的：

```
const seek = secs => {
  if (this.video.fastSeek) {
    this.video.fastSeek(secs)
  } else {
    this.video.currentTime = secs
  }
}
seek(10) 
```

如果您更喜欢准确性而不是性能，请坚持：

```
this.video.currentTime = secs 
```

在撰写本文时，`faskSeek`仅向 Safari 和 Firefox 推出，但预计这种情况会发生变化。查看上述链接中的兼容性表，了解有关浏览器兼容性的最新信息。

# iphone - 如何将数组中的子视图添加到uiview？

> ID：10461670
> 
> 赞同：3
> 
> 时间：2012-05-05T12:04:16.400
> 
> 标签：iphone, xcode

我将我的子视图存储在一个数组中......我想要将这些子视图从数组中放置到我的主视图中......

```
for(int i=0;i<[imageViewArray count];i++)
    {
        NSLog(@" image array count is %d",[imageViewArray count]);
       // countlayers= countlayers+1;
      //  [canvasView insertSubview:[imageViewArray objectAtIndex:i] atIndex:countlayers];
        [canvasView addSubview:[imageViewArray objectAtIndex:i]];
    } 
```

你能告诉我我做错了什么吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:16:04.527

*如果* `imageViewArray`确实包含已初始化的视图，并且如果这些视图已经具有正确的`frame`属性，那么您没有做错任何事情（即使您的代码可能更优雅）。

此外，当然，我们必须确保 canvasView 确实已初始化并且在屏幕上可见。尝试将其 backgroundColor 设置为明显的：

```
canvasView.backgroundColor = [UIColor greenColor]; 
```

一旦您确定 canvasView 实际正在显示，我建议使用快速枚举，这使得通过数组更好，并记录您的新子视图以确保它们的框架与您想要的一样。

```
for (UIView *imageView in imageViewArray) //this is fast enumeration. You can get it through code completion by typing forin
{
    NSLog(@"%@", imageView); //let's take a look at the imageView. What is its frame?
    [canvasView addSubview:imageView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:24:18.890

使用枚举使用 imageViewArray 在画布视图上添加图像，并且可能您也缺少图像的设置框架。

```
for (UIImageView *imageView in imageViewArray) //enumeration. 
{
    //let's set frame for image view before adding to canvasView
    [imageView setFrame:CGRectMake(x,y,w,h)]; 
    //Also make sure imageView has image or not
    if(imageView.image)
    [canvasView addSubview:imageView];
}
```

# android - 如何将新的列表活动设置为选项卡视图中的视图

> ID：10461672
> 
> 赞同：1
> 
> 时间：2012-05-05T12:04:35.453
> 
> 标签：android, listactivity, tabview

我是安卓新手。我的问题是我有一个选项卡视图，它由两个选项卡组成，一个显示自定义视图，另一个显示地图视图。在地图视图中，我有一个用于搜索的文本视图和一个按钮，当用户单击该按钮时，它将显示用户在自动完成文本视图中键入的位置的列表视图。当这个新视图上的用户地图按钮时，它将关闭这个列表视图并再次显示地图视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:14:50.613

我无法理解你的问题。但是，如果您的问题是设置当前选项卡使用`tabHost.setCurrentTabByTag(myTab.getTag())`.

# javascript - 通过 AJAX 获取 BD 数据并在 acents 的数组原因中获取 null

> ID：10461675
> 
> 赞同：0
> 
> 时间：2012-05-05T12:05:10.210
> 
> 标签：javascript, jquery, ajax, post

嗨，我正在使用 ajax 来获取 bd 的数据数组：

```
$.post
(
"lib/php/load_food.php",
{f:Base64.encode("primeros")},
function(data)
{
firsts = data;
},
"json"
); 
```

但是在数组第一次中，具有acent 字符的字符串显示为“null”。

我正在寻找信息或帮助，但没有找到任何线索。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:49:09.540

尝试使用 PHP [rawurlencode()](http://php.net/manual/en/function.rawurlencode.php)对 PHP 文件中的数据进行编码，并使用[unescape()](http://www.w3schools.com/jsref/jsref_unescape.asp)和 JQUERY [.text()](http://api.jquery.com/text/)对其进行解码和正常显示：

*简单的例子：*

* * *

**PHP文件：**

```
<?php

$arr = array(
  "title" => rawurlencode("thís ís grêãt!")
);

echo $arr;

?> 
```

* * *

**查询：**

```
<script type="text/javascript">

$.ajax({
  type    : "POST",
  url     : "path_to_my_file.php",
  data    : "&action=example",
  success : function(response) {
    // Parse PHP Array to Javascript Array
    var arr = $.parseJSON(response);

    // Populate the Title
    $("#my_element_id").html(unescape(arr['title'])).text();
  }
});

</script> 
```

* * *

**结果：** 这太棒了！

# silverlight - 当我在解决方案资源管理器中单击 .EDMX 文件时，Silverlight 实体框架不加载模型？

> ID：10461677
> 
> 赞同：0
> 
> 时间：2012-05-05T12:05:53.893
> 
> 标签：silverlight, entity-framework, wcf-data-services

我正在尝试使用**实体框架**和**WCF 服务将数据加载到 SilverLight 的数据网格中。** 为此，我在这里关注了这篇文章[http://geekswithblogs.net/PeterTweed/archive/2009/07/01/a-simple-silverlight-crud-application--part-1-putting-the.aspx](http://geekswithblogs.net/PeterTweed/archive/2009/07/01/a-simple-silverlight-crud-application--part-1-putting-the.aspx)

1.  但问题是当我添加 .edmx 文件并在解决方案资源管理器中单击“Model.edmx”时，它不会显示模型，而是显示如下图所示的消息。 ![在此处输入图像描述](../Images/a99860076d41a353fed4164aaf4a9c31.png)

2.  在**Mapping Detail**窗口中显示如下图所示的消息……而不是我的数据库表字段和类的映射。 ![在此处输入图像描述](../Images/8688db5aad3dc24de9180102d28c3a88.png)

太感谢了........

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:24:05.163

**检查您创建的表是否具有主键，因为如果不为表创建 PK，EDMX 可能不会显示表模型或映射...**

# javascript - 使用 Phonegap 访问文件

> ID：10461680
> 
> 赞同：5
> 
> 时间：2012-05-05T12:06:10.343
> 
> 标签：javascript, iphone, ios5, cordova

我正在尝试使用 Phonegap [cordova 1.7.0] 在 IOS 上处理文件。我阅读了如何访问文件并在电话间隙的[API 文档中阅读它们。](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#File)但我不知道，当文件被读取时，它会被写入哪里？& 我如何在 iPhone 屏幕上输出文本、图像或文本包含的任何内容？

这是我正在使用的代码：

```
 function onDeviceReady() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
}

function gotFS(fileSystem) {
    fileSystem.root.getFile("readme.txt", null, gotFileEntry, fail);
}

function gotFileEntry(fileEntry) {
    fileEntry.file(gotFile, fail);
}

function gotFile(file){
    readDataUrl(file);
    readAsText(file);
}

function readDataUrl(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as data URL");
        console.log(evt.target.result);
    };
    reader.readAsDataURL(file);
}

function readAsText(file) {
    var reader = new FileReader();
    reader.onloadend = function(evt) {
        console.log("Read as text");
        console.log(evt.target.result);
    };
    reader.readAsText(file);
}

function fail(evt) {
    console.log(evt.target.error.code);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-20T16:55:03.610

从 Cordova 3.5 开始（至少），`FileReader`对象只接受`File`对象，而不是`FileEntry`对象（我不确定以前的版本）。

这是一个将本地文件内容输出`readme.txt`到控制台的示例。这里与 Sana 示例的不同之处在于调用`FileEntry.file(...)`. 这将提供`File`调用函数所需的对象`FileReader.readAs`。

```
function readFile() {
    window.requestFileSystem(window.LocalFileSystem.PERSISTENT, 0, function(fileSystem) {
        fileSystem.root.getFile('readme.txt', 
            {create: false, exclusive: false}, function(fileEntry) {
                fileEntry.file(function(file) {
                    var reader = new window.FileReader();
                    reader.onloadend = function(evt) {console.log(evt.target.result);};
                    reader.onerror = function(evt) {console.log(evt.target.result);};
                    reader.readAsText(file);
                }, function(e){console.log(e);});
            }, function(e){console.log(e);});
    }, function(e) {console.log(e);});
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-08T12:32:20.150

如果有人需要，这对我有用：

```
function ReadFile() {
  var onSuccess = function (fileEntry) {
    var reader = new FileReader();
    reader.onloadend = function (evt) {
      console.log("read success");
      console.log(evt.target.result);
      document.getElementById('file_status').innerHTML = evt.target.result;
    };
    reader.onerror = function (evt) {
      console.log("read error");
      console.log(evt.target.result);
      document.getElementById('file_status').innerHTML = "read error: " + evt.target.error;
    };

    reader.readAsText(fileEntry); // Use reader.readAsURL to read it as a link not text.
  };

  console.log("Start getting entry");
  getEntry(true, onSuccess, { create: false });
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T12:58:15.980

如果您使用的是 phonegap(Cordova) 1.7.0，以下页面将在 iOS 中工作，替换 index.html 中的以下模板

```
<!DOCTYPE html>
<html>
  <head>
    <title>FileWriter Example</title>
    <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for Cordova to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Cordova is ready
    //
    function onDeviceReady() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    }

    function gotFS(fileSystem) {
        fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.createWriter(gotFileWriter, fail);
    }

    function gotFileWriter(writer) {
        writer.onwriteend = function(evt) {
            console.log("contents of file now 'some sample text'");
            writer.truncate(11);  
            writer.onwriteend = function(evt) {
                console.log("contents of file now 'some sample'");
                writer.seek(4);
                writer.write(" different text");
                writer.onwriteend = function(evt){
                    console.log("contents of file now 'some different text'");
                }
            };
        };
        writer.write("some sample text");
    }
    function fail(error) {
        console.log(error.code);
    }
    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Write File</p>
  </body>
</html>
```

# php - Symfony2 的 Doctrine 并没有为我创建一对多的结构

> ID：10461685
> 
> 赞同：4
> 
> 时间：2012-05-05T12:06:44.157
> 
> 标签：php, symfony, doctrine-orm

我有两张桌子。第一个表是`users`，第二个是`datas`。Datas 的`useridx`列与`user`'s是外来的`idx`。（*主唯一键*）。

这些是表结构：

桌子`users`

```
CREATE TABLE public.users (
  idx       bigint NOT NULL,
  "name"    varchar(250) DEFAULT NULL::character varying,
  surname   varchar(250) DEFAULT NULL::character varying,
  isactive  boolean NOT NULL DEFAULT false,
  /* Keys */
  CONSTRAINT users_pkey
    PRIMARY KEY (idx), 
  CONSTRAINT users_idx_key
    UNIQUE (idx)
) WITH (
    OIDS = FALSE
  ); 
```

表`datas`：

```
CREATE TABLE public.datas (
  idx       bigint NOT NULL,
  useridx   bigint,
  phrase    varchar(100) DEFAULT NULL::character varying,
  response  varchar(100) DEFAULT NULL::character varying,
  /* Keys */
  CONSTRAINT datas_pkey
    PRIMARY KEY (idx), 
  CONSTRAINT datas_idx_key
    UNIQUE (idx),
  /* Foreign keys */
  CONSTRAINT fk_cf180c1a262768b5
    FOREIGN KEY (useridx)
    REFERENCES public.users(idx)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION
) WITH (
    OIDS = FALSE
  ); 
```

现在当我运行这些命令时：

```
app/console doctrine:mapping:convert yml
./src/Acme/DemoBundle/Resources/config/doctrine/metadata/orm
--from-database
--force 
```

和;

```
app/console doctrine:mapping:import AcmeDemoBundle annotation
app/console doctrine:generate:entities AcmeDemoBundle 
```

我得到了这个结果：

**数据.php**

```
namespace Acme\DemoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Acme\DemoBundle\Entity\Datas
 *
 * @ORM\Table(name="datas")
 * @ORM\Entity
 */
class Datas
{
    /**
     * @var bigint $idx
     *
     * @ORM\Column(name="idx", type="bigint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="SEQUENCE")
     * @ORM\SequenceGenerator(sequenceName="datas_idx_seq", allocationSize="1", initialValue="1")
     */
    private $idx;

    /**
     * @var string $phrase
     *
     * @ORM\Column(name="phrase", type="string", length=100, nullable=true)
     */
    private $phrase;

    /**
     * @var string $response
     *
     * @ORM\Column(name="response", type="string", length=100, nullable=true)
     */
    private $response;

    /**
     * @var Users
     *
     * @ORM\ManyToOne(targetEntity="Users")
     * @ORM\JoinColumns({
     *   @ORM\JoinColumn(name="useridx", referencedColumnName="idx")
     * })
     */
    private $useridx;

    /**
     * Get idx
     *
     * @return bigint 
     */
    public function getIdx()
    {
        return $this->idx;
    }

    /**
     * Set phrase
     *
     * @param string $phrase
     */
    public function setPhrase($phrase)
    {
        $this->phrase = $phrase;
    }

    /**
     * Get phrase
     *
     * @return string 
     */
    public function getPhrase()
    {
        return $this->phrase;
    }

    /**
     * Set response
     *
     * @param string $response
     */
    public function setResponse($response)
    {
        $this->response = $response;
    }

    /**
     * Get response
     *
     * @return string 
     */
    public function getResponse()
    {
        return $this->response;
    }

    /**
     * Set useridx
     *
     * @param Acme\DemoBundle\Entity\Users $useridx
     */
    public function setUseridx(\Acme\DemoBundle\Entity\Users $useridx)
    {
        $this->useridx = $useridx;
    }

    /**
     * Get useridx
     *
     * @return Acme\DemoBundle\Entity\Users 
     */
    public function getUseridx()
    {
        return $this->useridx;
    }
}
?> 
```

**用户.php**

```
<?php

namespace Acme\DemoBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
/**
 * Acme\DemoBundle\Entity\Users
 *
 * @ORM\Table(name="users")
 * @ORM\Entity
 */
class Users
{
    /**
     * @var bigint $idx
     *
     * @ORM\Column(name="idx", type="bigint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="SEQUENCE")
     * @ORM\SequenceGenerator(sequenceName="users_idx_seq", allocationSize="1", initialValue="1")
     */
    private $idx;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=250, nullable=true)
     */
    private $name;

    /**
     * @var string $surname
     *
     * @ORM\Column(name="surname", type="string", length=250, nullable=true)
     */
    private $surname;

    /**
     * @var boolean $isactive
     *
     * @ORM\Column(name="isactive", type="boolean", nullable=false)
     */
    private $isactive;

    /**
     * Get idx
     *
     * @return bigint 
     */
    public function getIdx()
    {
        return $this->idx;
    }

    /**
     * Set name
     *
     * @param string $name
     */
    public function setName($name)
    {
        $this->name = $name;
    }

    /**
     * Get name
     *
     * @return string 
     */
    public function getName()
    {
        return $this->name;
    }

    /**
     * Set surname
     *
     * @param string $surname
     */
    public function setSurname($surname)
    {
        $this->surname = $surname;
    }

    /**
     * Get surname
     *
     * @return string 
     */
    public function getSurname()
    {
        return $this->surname;
    }

    /**
     * Set isactive
     *
     * @param boolean $isactive
     */
    public function setIsactive($isactive)
    {
        $this->isactive = $isactive;
    }

    /**
     * Get isactive
     *
     * @return boolean 
     */
    public function getIsactive()
    {
        return $this->isactive;
    }
}
?> 
```

我也有 yml 文件，但我认为它们在这里没有必要，只有我在此处发布的 PHP 文件。

现在，当我在控制器内部运行此命令时：

```
<?php

$user = $this->getDoctrine()
->getRepository('AcmeDemoBundle:Users')
->find(24);

$phrase = $user->getDatas()->getPhrase();

?> 
```

我得到一个错误说`Call to a member function getDatas() on a non-object...`。我知道这很清楚。在Users.php 中我没有getDatas()。

但我从 Symfony2 和 Doctrine 文档中读到的是它应该在那里，因为它们是相关的。我想做的就是在用户内部获取数据。

我的错误是什么？我缺少什么？

**更新**：我将此行添加到`Users.php`

```
<?php
/**
     * @var \Acme\DemoBundle\Entity\Datas
     *
     * @ORM\OneToMany(targetEntity="Datas", mappedBy="datas", cascade={"all"})
     */
     private $datas;
public function __construct()
    {
        $this->datas = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * Add phrases
     *
     * @param Acme\DemoBundle\Entity\Datas $datas
     */
    public function addPhrases(\Acme\DemoBundle\Entity\Datas $datas)
    {
        $this->datas[] = $datas;
    }

    /**
     * Get datas
     *
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getDatas()
    {
        return $this->datas;
    }
?> 
```

而这些线`Datas.php`

```
<?php
/**
     * @ORM\ManyToOne(targetEntity="Users", inversedBy="users", cascade={"all"})
     */
    protected $users;
/**
     * Set users
     *
     * @param Acme\DemoBundle\Entity\Users $users
     */
    public function setUsers(\Acme\DemoBundle\Entity\Users $users)
    {
        $this->users = $users;
    }

    /**
     * Get users
     *
     * @return Acme\DemoBundle\Entity\Users 
     */
    public function getUsers()
    {
        return $this->users;
    }
?> 
```

现在`getDatas()`正在工作，但内部却没有。( `$user->getDatas()->getPhrase();`) 我收到此错误：

```
Call to undefined method Doctrine\ORM\PersistentCollection::getPhrase() 
```

**结论**：我收到了集合错误，因为它返回了一个集合——当然——。迭代（如 foreach）它，您将访问数据。（如果你遇到这样的问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T13:06:30.707

如果查看[文档](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/annotations-reference.html#annref-joincolumn)`@JoinColumn`

*此注释**用于@ManyToOne、@OneToOne 字段中的关系**上下文**以及嵌套在@ManyToMany 内的@JoinTable 的上下文中**。此注释不是必需的。如果未指定属性名称和referencedColumnName，则从表和主键名称推断。*

因此，当您使用`ManyToOne`关系时，您的关系定义将是，

```
/**
 * @var Users
 *
 * @ORM\ManyToOne(targetEntity="Users")
 * @ORM\JoinColumn(name="useridx", referencedColumnName="idx")
 */
private $useridx; 
```

**编辑：**

如果要从用户端获取数据，则必须创建[OneToMany](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/association-mapping.html#one-to-many-bidirectional)关系。例如

在 Datas.php 中

```
/**
 * @var Users
 *
 * @ORM\ManyToOne(targetEntity="Users", inversedBy = "datas")
 * @ORM\JoinColumn(name="useridx", referencedColumnName="idx")
 */
private $useridx; 
```

在 Users.php 中添加以下行，

```
/**
 * @ORM\OneToMany(targetEntity="Datas", mappedBy="useridx", cascade={"persist"})
 */
protected $datas; 
```

然后做一个`doctrine:generate:entities`命令。要对关系进行操作，请检查[此](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html)文档条目。

# amazon-ec2 - Rabbitmq 镜像队列性能

> ID：10461688
> 
> 赞同：4
> 
> 时间：2012-05-05T12:06:47.667
> 
> 标签：amazon-ec2, scalability, message-queue, rabbitmq, middleware

我将为我的网络应用程序使用 rabbitmq 集群。当我使用 AWS 的 AutoScaling 服务实现自动扩展时，我计划使用镜像队列。我已经阅读了rabbitmq 镜像队列的[这篇](http://www.rabbitmq.com/ha.html)文章。考虑到性能我想知道是否建议在rabbtimq集群中实现镜像队列？即与非持久队列相比，性能会下降吗？

我还没有找到任何带有镜像队列的好的基准测试文章。有人可以分享他们的建议吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-04-06T21:26:28.657

请参阅我最近写的关于这个主题的这篇[博文。](https://www.boffbowsh.co.uk/2014/04/03/rabbitmq-from-the-front-line.html)这篇文章中链接了一些 vagrant 定义，可以帮助您轻松地对工作量进行基准测试。

# php - 从父抽象类调用抽象方法

> ID：10461689
> 
> 赞同：2
> 
> 时间：2012-05-05T12:07:03.207
> 
> 标签：php, oop, class, abstract

看了[这个问题](https://stackoverflow.com/questions/1944827/php-how-to-call-function-of-a-child-class-from-parent-class)后，我自己尝试了选择的答案！所以基本上我写的是`

```
abstract class person
{

  function __construct()
  {
    // some code here
  }

  function myfunc()
  {
    $this->test();
  }

  abstract function test();
}

class employee extends person
{
  function __construct()
  {
    parent::__construct();
  }

  function test()
  {
    echo "So you managed to call me !!";
  }

}

$employee = new employee();
$employee->myfunc();` 
```

当我运行这个脚本时，我得到了一个常见的错误 **致命错误：**在第 7 行的不在对象上下文中使用 $this。

那么，如何从父类调用摘要？

*   编辑

我真正想做的是创建一个 DatabaseObject 类，它包含不同数据库对象的所有常用方法，并使类扩展它。

```
abstract class DatabaseObject {
   abstract protected function getTableName();

   public static function find_by_id($id = 0){
        global $database;
        $class = get_called_class();

        $result_array = self::find_by_sql("SELECT * FROM ". $this->getTableName() ." WHERE _id = {$id} LIMIT 1");
        echo $result_array . "<br />";
        return !empty($result_array) ? array_shift($result_array) : false;
    }

    public static function find_by_sql($sql=""){
        global $database;
        $result_set = $database->query($sql);
        $object_array = array();
        while ($row = $database->fetch_array($result_set)){
            $object_array[] = self::instantiate($row);
        }
        return $object_array;
    }
   }
} 
```

所以这是我的 DatabaseObject 类的一部分。我的用户类如下

```
class User extends DatabaseObject {
    protected static $table_name = "users";

    protected function getTableName(){
        global $table_name;
        return $table_name;
    }
} 
```

现在，每当我这样做

```
$user = new User();
$user->findById(1); 
```

我收到错误 Fatal error: Using $this when not in object context on the line that point to

```
$this->getTableName(); 
```

我希望这可能有助于清理一些东西。有什么办法可以做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:43:33.263

您的代码示例工作得很好，我不明白您的问题[Demo](http://codepad.org/ip0ERfwR)。

因此，您共享的代码不是您谈论的带有错误的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:48:22.900

您不能将变量当作类的成员来调用，因为您将其声明为静态的。调用静态变量看起来与调用静态函数时相同，使用 :: 运算符。

```
class User extends DatabaseObject {
    protected static $table_name = "users";

    protected function getTableName(){
        return self::$table_name;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T12:15:26.473

您无法访问同一抽象类中的抽象函数。

无论您需要什么，您都必须只在子类中调用该方法，抽象超类不会调用子类函数。

**编辑：**

因为该类中存在函数dosent。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T12:21:22.990

第一件事是你不能在同一个类中调用抽象函数。您正在调用 test(); 在 oops 不允许的 myfunc() 侧。

# php - 在 Doctrine 2 中使用映射的超类

> ID：10461693
> 
> 赞同：1
> 
> 时间：2012-05-05T12:07:34.763
> 
> 标签：php, doctrine-orm, mappedsuperclass

对于学校，我正在制作一个与 ORM 一起使用的 php 项目。教义 2\. 它必须有继承。我做了以下设置，我想在屏幕上打印客户。

由于需要继承，我将在客户和用户上扩展类人。现在是这样定义的

```
/** @MappedSuperclass */
class Person {

/** @Id @Column(type="integer") */
protected $id;
protected $name;
protected $email;

protected $bar;

public function getId()
{
    return $this->id;
}

public function getName()
{
    return $this->name;
}

public function setName($name)
{
    $this->name = $name;
}

public function getEmail()
{
    return $this->email;
}

public function setEmail($email)
{
    $this->email = $email;
}

public function getBar()
{
    return $this->bar;
}

public function setBar($bar)
{
    $this->bar = $bar;
} 
```

}

```
/** @Entity */
class Customer extends Person
{
protected $photo;
protected $facebook;
protected $orders = null;

public function __construct()
{
    $this->orders = new ArrayCollection();
}

public function getPhoto()
{
    return $this->photo;
}

public function setPhoto($photo)
{
    $this->photo = $photo;
}

public function getFacebook()
{
    return $this->facebook;
}

public function setFacebook($facebook)
{
    $this->facebook = $facebook;
} 
```

}

我可以创建数据库并且所有查询都在工作，但是如果我尝试运行客户查询，我会收到错误消息。不涉及继承的所有其他查询都可以正常工作。因此，问题不是查询或视图。

这是查询的结果

```
Fatal error: Uncaught exception 'PDOException' with message 'SQLSTATE[HY000]: General error: 1 no such column: p0_.id' in /Users/arcooverbeek/doctrine2-orm/lib/vendor/doctrine-dbal/lib/Doctrine/DBAL/Connection.php:633
Stack trace: #0 /Users/arcooverbeek/doctrine2-orm/lib/vendor/doctrine-dbal/lib/Doctrine/DBAL/Connection.php(633): PDO->query('SELECT p0_.id A...')
#1 /Users/arcooverbeek/doctrine2-orm/lib/Doctrine/ORM/Query/Exec/SingleSelectExecutor.php(46): Doctrine\DBAL\Connection->executeQuery('SELECT p0_.id A...', Array, Array, NULL)
#2 /Users/arcooverbeek/doctrine2-orm/lib/Doctrine/ORM/Query.php(260): Doctrine\ORM\Query\Exec\SingleSelectExecutor->execute(Object(Doctrine\DBAL\Connection), Array, Array) #3 /Users/arcooverbeek/doctrine2-orm/lib/Doctrine/ORM/AbstractQuery.php(733): Doctrine\ORM\Query->_doExecute()
#4 /Users/arcooverbeek/doctrine2-orm/lib/Doctrine/ORM/AbstractQuery.php(535): Doctrine\ORM\AbstractQuery->execute(Array, 1)
#5 /Applications/MAMP/htdocs/doc/repositories/CustomerRepository.php(13): Doctrine\ORM\Ab in /Users/arcooverbeek/doctrine2-orm/lib/vendor/doctrine-dbal/lib/Doctrine/DBAL/Connection.php on line 633 
```

创建的数据库看起来很整齐，并具有在 Person 中定义的字段。一件事我注意到还有一个人的桌子，我认为这是不合时宜的？

我仔细查看了文档。谷歌搜索了这个错误，但它并没有让我更进一步。

# java - 对 Iterable 的迭代 在 ui:repeat 内失败

> ID：10461697
> 
> 赞同：1
> 
> 时间：2012-05-05T12:08:00.377
> 
> 标签：java, jsf, jsf-2, facelets, el

`ui:repeat`我正在尝试使用标签迭代实体对象的集合。在迭代实体对象的集合时，可迭代对象会给出 type 的 entityIds `java.lang.Integer`。我能够成功地在我的 java 类中迭代，但是当我在具有'属性`Iterable<Integer>`的 EL（表达式语言）中使用这个可迭代时，页面渲染失败，给出了这个异常：`ui:repeat``value`

```
SEVERE: Error Rendering View[/channelPages.xhtml]
javax.el.ELException: /channelPages.xhtml: Cannot convert px10.BusinessLayer.DBExecutions.ColNames_Iterable@4ae65b of type class px10.BusinessLayer.DBExecutions.ColNames_Iterable to class java.lang.Long
    at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:96)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:54)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
    at org.primefaces.component.datalist.DataListRenderer.encodeList(DataListRenderer.java:148)
    at org.primefaces.component.datalist.DataListRenderer.encodeMarkup(DataListRenderer.java:85)
    at org.primefaces.component.datalist.DataListRenderer.encodeEnd(DataListRenderer.java:49)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at org.primefaces.renderkit.CoreRenderer.renderChild(CoreRenderer.java:61)
    at org.primefaces.renderkit.CoreRenderer.renderChildren(CoreRenderer.java:45)
    at org.primefaces.component.panel.PanelRenderer.encodeContent(PanelRenderer.java:185)
    at org.primefaces.component.panel.PanelRenderer.encodeMarkup(PanelRenderer.java:108)
    at org.primefaces.component.panel.PanelRenderer.encodeEnd(PanelRenderer.java:55)
    at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1763)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:401)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1539)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:343)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at px10.Security.AuthenticationFilter.doFilter(AuthenticationFilter.java:48)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:256)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:217)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.IllegalArgumentException: Cannot convert px10.BusinessLayer.DBExecutions.ColNames_Iterable@4ae65b of type class px10.BusinessLayer.DBExecutions.ColNames_Iterable to class java.lang.Long
    at com.sun.el.lang.ELSupport.coerceToNumber(ELSupport.java:293)
    at com.sun.el.lang.ELSupport.equals(ELSupport.java:154)
    at com.sun.el.lang.ELSupport.compare(ELSupport.java:77)
    at com.sun.el.parser.AstLessThan.getValue(AstLessThan.java:62)
    at com.sun.el.parser.AstChoice.getValue(AstChoice.java:60)
    at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:214)
    at com.sun.faces.facelets.compiler.AttributeInstruction.write(AttributeInstruction.java:89)
    ... 58 more 
```

这是我`Iterable`在迭代实体集合中 entityObjects 的 id 时使用的实现。

```
public class ColNames_Iterable<N> implements Iterable<N> {
    private List<HColumn> columnsList;

    public ColNames_Iterable(List<HColumn> columnsList) {
        this.columnsList = columnsList;
    }

    @Override
    public Iterator<N> iterator() {
        return new ColNamesIterator(columnsList.iterator());
    }

    public int getSize() {
        return columnsList.size();
    }

    public class ColNamesIterator<K, N, V> implements Iterator<N> {
        private Iterator<HColumn<N, V>> original;

        public ColNamesIterator(Iterator<HColumn<N, V>> original) {
            this.original = original;
        }

        @Override
        public N next() {
            return original.next().getName();
        }

        @Override
        public boolean hasNext() {
            return original.hasNext();
        }

        @Override
        public void remove() {
            original.remove();
        }
    }
} 
```

但是我发现另一个Iterable（实际上是一个Arraylist）正在成功迭代。但是对我的可迭代对象的迭代在 java 类中也是成功的，但在 EL 中却没有。

## 使用 ：

Glassfish 3.1 上的 JSF 2.1.6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T12:14:20.667

根据[标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/repeat.html)，该`<ui:repeat>`值仅支持以下类型：

> 集合可以是`List`、数组、`java.sql.ResultSet`或单独的 java `Object`。如果集合是`null`，则此标签不执行任何操作。

你需要把它变成一个`List`.

# android - 位图和相机

> ID：10461699
> 
> 赞同：0
> 
> 时间：2012-05-05T12:08:24.237
> 
> 标签：android, memory, bitmap, android-camera

我没有成功解决这个错误：

> java.lang.OutOfMemoryError：位图大小超出 VM 预算。

我的代码是：

```
BitmapFactory.Options op = new BitmapFactory.Options();
myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath(),op);
ImageView _image = (ImageView)view.findViewById(R.id.imageCarte);

int width = myBitmap.getWidth();
int height = myBitmap.getHeight();
int halfWidth = width/2;
int halfHeight = height/2;
Bitmap bmHalf = Bitmap.createScaledBitmap(myBitmap, halfWidth, halfHeight, false);
_image.setImageBitmap(bmHalf); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:58:26.153

[这](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)是在 Android 中处理位图的必读内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T11:03:14.543

您可以在实例上指定[inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)`BitmapFactory.Options`：

> 如果设置为大于 1 的值，则请求解码器对原始图像进行二次采样，返回较小的图像以节省内存。

例如：

```
BitmapFactory.Options op = new BitmapFactory.Options();
op.inSampleSize = 2
myBitmap = BitmapFactory.decodeFile(file.getAbsolutePath(),op);
ImageView _image = (ImageView)view.findViewById(R.id.imageCarte);
_image.setImageBitmap(myBitmap); 
```

# javascript - 一切都与函数原型相关联吗？

> ID：10461700
> 
> 赞同：4
> 
> 时间：2012-05-05T12:08:24.763
> 
> 标签：javascript

我在没有 js 知识的情况下阅读 JavaScript The Good Parts，这让我感到困惑。我想我需要澄清一下。

> JavaScript 允许扩充语言的基本类型。在第 3 章中，我们看到将方法添加到 Object.prototype 使该方法可用于所有对象。这也适用于函数、数组、字符串、数字、正则表达式和布尔值。例如，通过扩充 Function.prototype，我们可以使一个方法可用于所有函数：

然后继续这个例子：

```
Function.prototype.method = function (name, func) {
     this.prototype[name] = func;
     return this;
}; 
```

现在每个基本类型都有一个“方法”方法，因此可以为它们定义新函数，例如：

```
Number.method('integer', function () {
    return Math[this < 0 ? 'ceiling' : 'floor'](this);
}); 
```

但是这本书之前指出所有链接都指向对象而不是函数！这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:13:32.483

不，只有函数有`Function.prototype`. `Number`是一个构造*函数*，因此它“链接”到该原型。

这是 nodejs/V8 shell 所说的`Number`：

```
> Number
[Function: Number]
> typeof Number
'function' 
```

# java - 使用 IntelliJ IDEA 部署到 Tomcat 时，我的应用程序放在哪里？

> ID：10461702
> 
> 赞同：41
> 
> 时间：2012-05-05T12:08:38.697
> 
> 标签：java, tomcat, intellij-idea

我正在将一个应用程序从 IntelliJ IDEA 部署到本地 Tomcat 服务器。我以为您部署的应用程序放在`webapps`文件夹中，但它没有出现在那里。

这个对吗？它在哪里？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-06-06T22:18:41.190

仅供参考，mac（用于 IntelliJ 13）上的相应文件夹是：

```
/Users/<username>/Library/Caches/IntelliJIdea13/tomcat/ 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-05T12:15:21.230

是的，如果您使用 IntelliJ IDEA，应用程序不会出现在 Tomcat`webapps`目录中。您的工件在目录中，例如：

```
${dir.to.idea.project}\YourWebApp\out\artifacts 
```

这是 IntelliJ 创建的默认目录。

Tomcat 配置位于不同的文件夹中。我正在使用 Windows 7。所以它是：

```
C:\Users\User\.IntelliJIdea10\system\tomcat\YourApplicationName 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-03-29T14:53:19.140

如果您使用 Intellij IDEA，则您的工件直接从输出目录部署：`${project.dir}\${web.module}\out\artifacts`或者`${project.dir}\${web.module}\target`如果您使用 Maven 并遵循[Standard Directory Layout](https://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)。

Tomcat 配置位于不同的文件夹中。

```
Mac：/Users/${user}/Library/Caches/IntelliJIdea${version}/tomcat/  
Linux：/home/${user}/.IntelliJIdea${version}/system/tomcat/
Windows：C:\Users\${user}\.IntelliJIdea${version}\system\tomcat\

```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-10-02T08:44:17.837

从 IntelliJ 2020 起，它已移至：

```
C:\Users\${user}\AppData\Local\JetBrains\IntelliJIdea${version}\tomcat 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-06-20T15:55:40.557

如果您遵循强烈推荐的标准 maven 方法，那么您的输出将转到`target`目录，而不是`out`. 使用 maven 方法，您的项目根`target`目录下可能会有多个模块，并且可以在每个模块下找到该目录。然后将 Web 应用程序构建到以模块命名的展开目录中，但`.war`作为扩展。所以你有了：

```
project/module/target/webapp.war 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-28T03:39:43.543

我是 IntelliJ IDEA 的新手。在我的配置中。我添加了一个本地 tomcat 服务器。我的 tomcat 容器正在运行项目的目标文件夹。

> **${您的项目路径}\target\ ${您的项目名称}**

在此路径中，您将找到 IDEA 已构建的文件。Tomcat 服务器将运行此文件夹。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-21T11:30:12.787

服务器日志输出环境变量“CATALINA_BASE”，其中包含已加载的位置

# python - 在 Django 中导入全局/应用程序库文件夹

> ID：10461705
> 
> 赞同：2
> 
> 时间：2012-05-05T12:09:08.290
> 
> 标签：python, django

我有一个这样的 Django 结构（仅显示库）：

```
project/lib/ # Global libraries that will be used cross apps
project/lib/global_stuff.py
project/apps/app1/lib/special_for_app1.py
project/apps/app2/lib/special_for_app2.py 
```

某些应用程序没有 lib 文件夹。

`from apps.app1.lib import special_for_app1`工作正常。但是，当我在已经包含本地 lib 文件夹的文件夹中时，如何从全局 lib 文件夹中导入？

从其中一个应用程序的应用程序 views.py 文件中：

* * *

```
from lib import global_stuff 
```

给我`ImportError: cannot import name global_stuff`

* * *

从 .lib 导入 global_stuff

给我`ImportError: cannot import name global_stuff`

* * *

```
from ..lib import global_stuff 
```

给我`ImportError: No module named lib`

* * *

```
from ...lib import global_stuff 
```

给我`ValueError: Attempted relative import beyond toplevel package`

* * *

```
from project.lib import global_stuff 
```

有效，但我真的不想在导入中使用项目名称本身。

* * *

有没有办法解决这个问题，不使用导入中的项目名称，或者改变整个lib的想法。

还是有其他好的做法来存储代码的主要部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:00:25.203

您不想将项目名称与导入相关联是正确的，因此有一个通用模式：

```
project/
  |__/source/
  |     |__/lib/
  |     |__/app/
  |__/deployment/  # code for your production deployment maybe
  |
  |__/docs/   
  |__/tests/
  |__README
  |__requirements.txt 
```

并将 /path/to/project 放在你的 virtualenv 路径中（你使用 virtualenv 对吗？）。

然后你可以在你的代码中做

```
from source.lib.blah import foo
from source.app.baz import bar 
```

编辑：当然，如果您不将代码作为开源发布，这才是最佳选择。仅当您有一个内部项目时，管理层不断更改项目名称：D

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T12:23:41.900

> 我真的不想在导入中使用项目名称本身

为什么不？这是最好的方法。请注意，“非常不鼓励对包内导入进行相对导入”，如[PEP-8 中所述](http://www.python.org/dev/peps/pep-0008/#imports)。

# java - 显示我的 pdf 报告的正确名称

> ID：10461711
> 
> 赞同：2
> 
> 时间：2012-05-05T12:10:15.387
> 
> 标签：java, spring, jasper-reports, ireport

我正在使用*iReport 4.5.0*，*Spring 3.0.5 Release*。我使用[此链接](http://chathurangat.blogspot.in/2012/02/jasperreport-with-spring-mvc-fully.html)作为我项目的示例，因为它完全符合我的要求。

我的代码流程与此完全相同。但问题是，当我显示 pdf 报告时，它给出了下载提示，并且它作为打开 pdf 给出，但我想要报告名称而不是那个 pdf。

我怎么才能得到它？我对 csv 文件也有同样的情况。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T15:31:49.660

如果修改响应对象，会得到：Corrupted Content Error。您必须在 jasper-view.xml 中设置值，如下所示：

```
<bean id="pdfReport"
      class="org.springframework.web.servlet.view.jasperreports.JasperReportsPdfView"
      p:url="classpath:chathuranga-sample-report.jrxml"
      p:reportDataKey="datasource"> 

      <property name="headers">
        <props>
            <prop key="Content-Disposition">
                 attachment; filename=pdffilename.pdf
            </prop>
        </props>
  </property>
</bean> 
```

希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:36:41.657

您可能只需要将 Content-disposition 标头设置为响应：

```
response.setHeader("Content-disposition", "attachment; filename=" + fileName); 
```

`fileName`是浏览器将为 PDF 报告显示的文件的名称。

# spring - 弹簧 xslt 视图

> ID：10461713
> 
> 赞同：1
> 
> 时间：2012-05-05T12:10:16.573
> 
> 标签：spring, xslt, spring-mvc

我想将 xslt 视图添加到我的 Spring Web 应用程序中。但是我的 web 应用程序使用 spring 注释配置，因此它没有任何明确声明的视图解析器。我尝试专门为 xslt 添加视图解析器，但我的应用程序的其余部分变得无法解析。是否可以仅使用注释来配置 xslt 视图？或者可能有另一种解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:25:11.897

我猜想编写一个 ViewResolver 类并将其注释为 就足够了`@Component`，前提是您`<mvc:annotation-driven />`在 xml 上下文中有。

# facebook - 打开图形标签 - 类型=位置。不验证

> ID：10461715
> 
> 赞同：0
> 
> 时间：2012-05-05T12:10:57.653
> 
> 标签：facebook, facebook-opengraph, meta-tags

我的页面中有一组 og 元标记。当我去 Facebook 调试器并给它报告的 URL 时：

```
Meta Tag <meta property="og:type" content="landmark" />
Meta Tag <meta property="og:locale" content="en_GB" />
Meta Tag <meta property="og:latitude" content="51.5410881042" />
Meta Tag <meta property="og:longitude" content="-0.145712554455" />
Meta Tag <meta property="og:locality" content="London" />
Meta Tag <meta property="og:region" content="Greater London" />
Meta Tag <meta property="og:postal-code" content="NW1 7HY" />
Meta Tag <meta property="og:country-name" content="United Kingdom" /> 
```

但返回一个对象属性：

og：类型网站

然后抱怨：

```
Extraneous Property Objects of this type do not allow properties named 'og:latitude'.
Extraneous Property Objects of this type do not allow properties named 'og:longitude'.
Extraneous Property Objects of this type do not allow properties named 'og:locality'.
Extraneous Property Objects of this type do not allow properties named 'og:region'.
Extraneous Property Objects of this type do not allow properties named 'og:postal-code'.
Extraneous Property Objects of this type do not allow properties named 'og:country-name'. 
```

如果我输入一个愚蠢的 og:type，例如“beercan”，它会将其报告为无效的 og 类型。因此，Landmark 被识别为有效类型，但随后被忽略（并假定为网站）。

任何人都知道发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T15:38:26.817

我刚刚查看了开放图形协议的 rdf（在[http://ogp.me/ns](http://ogp.me/ns)上），您上面提到的所有这些标签确实都有以 [DEPRECIATED] 开头的注释。似乎所有最初包含并在其他本体中定义的标签现在都已贬值。例如，纬度也在[http://www.w3.org/2003/01/geo/wgs84_pos#lat](http://www.w3.org/2003/01/geo/wgs84_pos#lat)中定义。我在尝试查找 'og:upc' 对象时遇到了这个问题，该对象现在也已折旧。

# java - 部署到已经在 IntelliJ IDEA 之外运行的 Tomcat 服务器

> ID：10461717
> 
> 赞同：6
> 
> 时间：2012-05-05T12:11:16.493
> 
> 标签：java, jakarta-ee, tomcat, intellij-idea

我已经在我的 PC 上安装了 Tomcat 服务器，并`service`在 Windows 中添加了它。所以现在每次我启动我的电脑时它都会启动。现在，在 IntelliJ 中，我配置了一个应用程序服务器，这就是我的 Tomcat 服务器，但是当尝试“运行”该应用程序时，它说该端口已在使用中......当然这是因为 Tomcat 在启动时启动. IntelliJ 是否有可能部署到已经运行的 Tomcat 服务器而不是尝试重新启动？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T12:22:17.330

如果要部署到在 IDEA 之外启动的 Tomcat，请使用[Tomcat 远程](https://www.jetbrains.com/idea/help/run-debug-configuration-tomcat-server.html)运行/调试配置类型。

**远程**配置的不同之处在于它不会启动服务器，请确保您创建**远程**配置，而不是本地：

![Tomcat 远程](../Images/b930eac61c117a9e6b19de2771445cda.png)

可以在不重新启动服务器的情况下更新应用程序，请参阅[更新应用程序服务器上](https://www.jetbrains.com/idea/help/updating-applications-on-application-servers.html)的应用程序帮助部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-19T21:10:54.377

您可以使用**Jrebel**插件。在不重新启动服务器的情况下更新应用程序会很有帮助。

# twitter-bootstrap - Twitter bootstrap - 字段顺序错误

> ID：10461720
> 
> 赞同：2
> 
> 时间：2012-05-05T12:11:47.803
> 
> 标签：twitter-bootstrap

我喜欢 Bootstrap，但我似乎无法解决的一个烦恼是，当构建一个以简单文本输入框开头的表单时，我在右侧放置了一些单选按钮（不是传统类型，但 Bootstrap 指的是作为“按钮组”）。可悲的是输入框庄严地拒绝向左移动，总是跳到堆栈的右侧。为什么哦为什么？任何帮助表示赞赏。

这是表单的外观图片： ![我的表格与阅读障碍控件](../Images/04aabbee1e992799aa66cad9dd4d6dda.png)

这是导致这种突变灾难的代码：

```
<div class="control-group">
    <label class="control-label" for="appendedInput">Weight recorded:</label>
    <div class="controls">
        <div class="input">
            <input class="input-small" id="weight" size="16" type="text" placeholder="weight" ready-for-history></input>
            <span class="btn-group" data-toggle="buttons-radio">
                <button class="btn active">lbs</button>
                <button class="btn">kg</button>
                <button class="btn">stone</button>
            </span>
        </div>
        <p class="help-block">What weight were you?</p>
    </div>
</div> 
```

希望这是人们帮助我排除故障的足够信息；如果您需要更多，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-06T15:43:40.963

埃赛利亚是正确的。按钮是向左浮动的，所以如果你想浮动输入框也是如此。你可以用一些简单的 CSS 来做到这一点：

```
#weight{float:left} 
```

或者

```
.input-small{float:left} 
```

或者

您可以使用 Twitter Bootstrap`form-inline`类来确保所有控件组元素都内联显示（以正确的顺序）。通过将`form-inine`类添加到您的`<form>`标签或将表单字段包装在`<div class="form-inline"> ... </div>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T15:19:57.187

一旦 Esailija 和 Eterps 帮助我专注于正确的轨道，我就添加了两个 CSS 类来解决这个问题。它们如下：

```
.padded-left-form {
    float: left;
    margin-right: 3px;
}

.clear-left-form {
    clear:both;
    float:left;
} 
```

我将 .padded-left-form 附加到文本输入框以将其浮动到单选按钮的左侧，然后您需要将 .clear-left-form 附加到以下“帮助块”以将其垂直带到正确的位置.

最后是它的样子：

![用 CSS 更新](../Images/df19dbae0df4ab8fdbc61b3ab47f13fa.png)

# java - Maven、GWT 和托管模式

> ID：10461724
> 
> 赞同：0
> 
> 时间：2012-05-05T12:12:21.857
> 
> 标签：java, gwt

当我尝试使用官方网站上[记录](http://mojo.codehaus.org/gwt-maven-plugin/user-guide/hosted.html)`gwt:run`的 gwt-maven-plugin ( )运行托管模式时，出现错误：

```
The parameters 'runTarget' for goal org.codehaus.mojo:gwt-maven-plugin:2.4.0:run are missing or invalid 
```

如何解决这个问题呢？
**更新：**这是在我的 POM 中：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>gwt-maven-plugin</artifactId>
            <version>${gwt.version}</version>
            <executions>
                <execution>
                    <configuration>
                        <module>ff.ff.dd.Archiving</module>
                        <runTarget>Archiving.html</runTarget>

                        <draftCompile>true</draftCompile>
                    </configuration>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:37:08.280

您需要指明该[目标](https://gwt-maven-plugin.github.io/gwt-maven-plugin/run-mojo.html)的所有强制配置选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T12:18:00.663

在 netbean 中制作目标 gwt:debug

在属性中 -Dgwt.module=UR 模块名称 -Dgwt.extraJvmArgs=-Xmx2048m -Dgwt.extraJvmArgs=-XX:PermSize=32m -Dgwt.extraJvmArgs=-XX:MaxPermSize=512m war:exploded gwt:debug

现在在控制台上运行它你会看到监听端口现在进入调试菜单并选择“附加调试器”并告诉端口和主机.....现在你的 GWT 开发模式现在在 GWT 调试中启动你

# sql - 查找表中的新索引

> ID：10461730
> 
> 赞同：0
> 
> 时间：2012-05-05T12:13:19.430
> 
> 标签：sql, indexing

这是我的 2 个 SQL 表：

1.  **tblElevators** ElevatorID (int, pk); 位置（nvarchar）；制造商（nvarchar）；

*该表有近 7000 条记录，制造商字段包含来自下面查找表的值（一些值为 Null）*

1.  **tblManufacturers** 制造商 (nvarchar, pk);

现在我想在第二个表（tblManufacturers）中插入一个 ID 列，它将是 Integer 和 PrimaryKey。由于它只有40行，我将手动放置PK（1,2,3...40）

我的问题是-如何将 tblElevators 中的所有现有制造商值更改为新的整数值，而不需要手动查看所有数据并找出现在的“制造商名称”是 ManufacturerID。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:21:16.457

我不确定你想要什么。但听起来你想要这样的东西：

```
UPDATE tblElevators 
SET tblElevators.ManufacturerID=tblManufacturers.ManufacturerID
FROM tblElevators 
JOIN tblManufacturers
   ON tblElevators.Manufacturer = tblManufacturers.Manufacturer 
```

# python - Python中的字符串到整数比较

> ID：10461733
> 
> 赞同：3
> 
> 时间：2012-05-05T12:13:53.813
> 
> 标签：python

> **可能重复：**
> [Python 如何比较字符串和整数？](https://stackoverflow.com/questions/3270680/how-does-python-compare-string-and-int)

我在 Python 中进行了一些比较。我很惊讶地发现我可以将字符串与整数进行比较。然后我做了一个 id 并发现实际上 string 的 id 大于 int 的 id ，我认为这就是我得到这个输出的原因。

```
In [19]: 'a' < 3
Out[19]: False

In [20]: 'a'>3
Out[20]: True

In [17]: id('a')
Out[17]: 140414909035824

In [18]: id(3)
Out[18]: 23119752 
```

请确认我正确地解释了这种行为（Python 在 id 级别上进行比较）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T12:16:42.260

Python 2.x 的跨类型比较是历史性的意外。从[文档](http://docs.python.org/reference/expressions.html#not-in)中：

> (...) 不同类型的对象总是比较不相等，并且顺序一致但任意

在 Python 3.x 中，这是固定的 - 这些比较会引发类型错误。

# iphone - 是否存在真正的 iPhone/iPad 模拟器？

> ID：10461735
> 
> 赞同：1
> 
> 时间：2012-05-05T12:14:11.917
> 
> 标签：iphone, html, css, ipad

我正在寻找用于 Web 开发的真正的 iPhone 和 iPad 模拟器。显然网站喜欢：

*   [http://alexw.me/ipad2/](http://alexw.me/ipad2/)
*   [http://iphone4simulator.com/](http://iphone4simulator.com/)
*   [http://ipadpeek.com/](http://ipadpeek.com/)
*   Adobe AIR 版 iPad

不会成功，因为他们甚至不支持`meta="viewport"`，他们不向网站发送正确的用户代理，他们不支持触摸事件，并且他们的代码解析器与真正的 iPhone/iPad 解析器不同。

在标准浏览器上从未观察到 iPad/iPhone 上出现的错误，唯一存在部分相同问题的浏览器是 IE7。这就是我想测试的原因。

**它们是真正的 iPhone/iPad/Android 模拟器吗？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T12:25:05.600

是的; 它带有 Xcode IDE（仅限 Mac）。

我想这可能不是你想听到的，但这是事实。

恕我直言，最好的选择是购买便宜的二手 iPad（和 iPod Touch）。您无法从模拟器中获得对触摸交互的良好感觉。

# ruby-on-rails - 呈现 json 错误

> ID：10461738
> 
> 赞同：0
> 
> 时间：2012-05-05T12:14:29.723
> 
> 标签：ruby-on-rails, ruby

```
 def tag_autocomplete
        @tags = Tag.find_by_sql("SELECT tag_name as id,tag_name as label,tag_name as value FROM tags ")
        render :json => @tags.to_json
     end 
```

渲染 json 不工作我收到以下错误

```
ArgumentError (wrong number of arguments (0 for 2)):
    /app/controllers/tags_controller.rb:32:in `to_json' 
```

我正在使用 ruby​​ 1.8.6 和 rails 2.3.5

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:18:07.767

检查这是否有帮助

```
format.json { render json: @tags } 
```

**编辑**

它可能是 sql 语句或类成员命名。请您发布您的标签课程。

尝试这个。如果它有效，则意味着类和变量名称与 db 列不匹配。您可以在 module\class 处修复它以指示列名。

```
@tags = Tag.all
render :json => @tags 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:34:47.440

实际上，您不需要 to_json。render :json => @tags 就足够了

# python - XML - python：插入未闭合的标签

> ID：10461751
> 
> 赞同：0
> 
> 时间：2012-05-05T12:16:03.093
> 
> 标签：python, xml-parsing

我在 REST 服务上使用 POST 和 PUT 方法执行测试。

基本上我在这两种情况下都使用这个xml：

```
xml = \
"""<?xml version="1.0" encoding="utf-8" ?>
<quser xmlns="http://user" xmlns:atom="http://www.w3.org/2005/atom">
<username>a_username</username>
<password>blablabla</password>
<first_name></first_name>
<last_name></last_name>
<email>anemail@gogle.com</email>
<degree></degree>
<institution></institution>
<fields>
    <role>reader</role>
</fields>
<research_areas></research_areas>
</quser>""" 
```

要发布此 xml，我使用以下代码：

```
def post_resource(url, xml, content_type='application/xml'):
    try:
        request = urllib2.Request(url=url, data=xml)
        request.add_header(key='content-type', val=content_type)
        response = opener.open(request)
        print_response(response)
    except HTTPError, e:
        print "Error: %s\n%s" % (e, e.read()) 
```

要执行更改（PUT），我使用以下代码：

```
def put_resource(url, xml, username=None, password=None):
    try:
        if username and password:
            str = "%s:%s" % (username, password)
            b64 = str.encode('base64')
        request = urllib2.Request(url=url, data=xml)
        request.add_header(key='content-type', val='application/xml')
        request.add_header(key='Authorization', val='Basic %s' % b64)
        request.get_method = lambda: 'PUT'
        response = opener.open(request)
        print_response(response)
    except HTTPError, e:
        print "Error: %s\n%s" % (e, e.read()) 
```

问题：

当我发布数据时，一切正常。但是当我尝试使用 PUT 对资源进行更改时，我发送了相同的 xml，只更改了电子邮件地址，并且 XML 解析器返回：

`insert unclosed token: line 14, column 4`

我不知道在 PUT 情况下而不是在 POST 情况下类似的 xml 是如何导致解析错误的。欢迎任何建议！谢谢

**编辑**

更多细节可能会有所帮助......我可以访问服务实现，并且解析如下：

```
from xml.etree.ElementTree import XML

try:
    node_tree = XML(data.strip())
    return self._parse_xml_node_to_dict(node_tree)
 except ParseError, e: 
```

当我调试时，使用参数调用 XML 构造函数时抛出的异常`data.strip()`。@thebjorn：我没有任何 xml 架构

@mzjn：谢谢！所以我必须追查它发生的地方，但它的内容在`data`某处被截断。以下是内容：

```
<?xml version="1.0" encoding="utf-8" ?>
<quser xmlns="http://user" xmlns:atom="http://www.w3.org/2005/atom">
<username>victorinox2</username>
<password>42b564oq</password>
<first_name></first_name>
<last_name></last_name>
<email>gosdfsdfsddacyer@gmail.com</email>
<degree></degree>
<institution></institution>
<fields>
    <role>reader</role>
</fields>
<research_areas></research_areas>
</quse 
```

我使用 Django，似乎 request.raw_post_data 已经包含截断的数据。但是当我 ste内容中`urllib2.Request(url=url, data=xml)`的数据`xml`没有被截断时......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:40:17.660

如果您有您正在使用的服务的架构，您总是可以尝试自己验证 xml...可能会给您提供更多信息的错误消息..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:41:56.570

显然，正如我在之前的编辑中所说，传输的字符串在到达服务端时会被截断。我无法确定它是与 Django 相关还是与 urllib2 相关。

无论如何，我通过在变量中包含的字符串末尾添加两行新行来解决这个问题`xml`。一条新线还不够，还有`>`截断的。

# java - LibreOffice SDK 引导程序

> ID：10461760
> 
> 赞同：0
> 
> 时间：2012-05-05T12:18:06.233
> 
> 标签：java, libreoffice

我将标准 jar 文件 + juh-2.4.1.jar 和 ridl-3.2.1.jar（导入时出错）作为我项目中的引用库。[当我从http://api.libreoffice.org/examples/DevelopersGuide/examples.html#FirstSteps](http://api.libreoffice.org/examples/DevelopersGuide/examples.html#FirstSteps)获取示例代码时，我总是遇到此错误：

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/sun/star/comp/loader/JavaLoader
    at com.sun.star.comp.helper.Bootstrap.createInitialComponentContext(Bootstrap.java:118)
    at com.sun.star.comp.helper.Bootstrap.bootstrap(Bootstrap.java:241)
    at TextDocuments.getRemoteServiceManager(TextDocuments.java:410)
    at TextDocuments.storePrintExample(TextDocuments.java:378)
    at TextDocuments.runDemo(TextDocuments.java:152)
    at TextDocuments.main(TextDocuments.java:142)
Caused by: java.lang.ClassNotFoundException: com.sun.star.comp.loader.JavaLoader
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 6 more 
```

在引导程序上总是出现 NoClassDefFoundError .. 正在搜索但找不到太多.. 有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:43:51.173

在我的 LibreOffice 安装中，缺少的类位于文件**jurt.jar**

# android - 禁用Android上退格按钮的长按操作？

> ID：10461768
> 
> 赞同：3
> 
> 时间：2012-05-05T12:19:05.290
> 
> 标签：android, input, android-edittext

我有一个搜索区域（edittext），我想禁用退格（删除）按钮的长按操作。用户必须单击此按钮才能删除每个字符。我该怎么做？

我是新手。你能编辑评论行吗？在短按时，我想要默认操作；在长按时，我希望它做它在短按时所做的事情。

```
 @Override
  public boolean onKeyDown( int keyCode, KeyEvent event ) {
    if( keyCode == KeyEvent.KEYCODE_DEL ) {
      event.startTracking();
      return true; 
    }
    return super.onKeyDown( keyCode, event );
  }

  @Override
  public boolean onKeyUp( int keyCode, KeyEvent event ) {
    if( keyCode == KeyEvent.KEYCODE_DEL ) {
      //Handle what you want on short press.      
      return true; 
    }

    return super.onKeyUp( keyCode, event );
  }

  @Override
  public boolean onKeyLongPress( int keyCode, KeyEvent event ) {
    if( keyCode == KeyEvent.KEYCODE_DEL ) {
      //Handle what you want in long press.
      return true;
    }
    return super.onKeyLongPress( keyCode, event );
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:20:14.487

你的活动的override [`onKeyDown`](http://developer.android.com/reference/android/view/View.html#onKeyDown%28int,%20android.view.KeyEvent%29)() 方法。您需要检查[KEYCODE_DEL](http://developer.android.com/reference/android/view/KeyEvent.html#KEYCODE_DEL)键。

# asp.net - window.open 用 ASP.net

> ID：10461772
> 
> 赞同：0
> 
> 时间：2012-05-05T12:19:44.397
> 
> 标签：asp.net

在我的 Asp.net 应用程序中，我试图从超链接显示文件，超链接在 GridView 内部，我的脚本是

```
<a href="javascript:window.open('<%# Eval("Url") %>');">View Attachment</a> 
```

这个 Url 的值是这样的，`localhost:1010/Attachments/test.jpg`

当我单击此链接时，它会在新窗口中显示图像，没问题。

但是我的应用程序页面只显示`"[object]"`，除此之外什么都没有。

我只在 IE 上遇到这个问题，在 chrome 中它的显示完美......

我该如何解决这个问题，任何人都可以在这里帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:07:47.730

我在 IE9 中发现，通过将返回引用设置`window.open`为变量，您描述的行为将不会发生。

```
<a href="javascript:var w1=window.open('<%# Eval("Url") %>');">View Attachment</a> 
```

# python - IPython.parallel 命名空间

> ID：10461774
> 
> 赞同：1
> 
> 时间：2012-05-05T12:19:53.613
> 
> 标签：python, ipython, starcluster

我想使用 IPython.parallel 并行化一个函数，当我在 IPython shell 中定义它时，它可以完美地工作：

```
Type:       function
Base Class: <type 'function'>
String Form:<function gradient at 0x3ae0398>
Namespace:  Interactive
File:       /root/<ipython-input-30-cf7eabdfef84>
Definition: gradient(w) 
Source:
def gradient(w):
    s = (1.0 + exp(y * (X * w)))**-1
    return C*X.T*((1 - s) * y)

rc = Client() 
rc[:].apply_sync(gradient, w)
... 
```

但是，当我在模块中定义它并使用导入时：

```
Type:       function
Base Class: <type 'function'>
String Form:<function gradient at 0x3933d70>
Namespace:  Interactive
File:       /root/mv.py
Definition: mv.gradient(w)
Source:
def gradient(w):
    s = (1.0 + exp(y * (X * w)))**-1
    return C*X.T*((1 - s) * y)

import mv 
rc = Client()
rc[:].apply_sync(mv.gradient, w)

CompositeError: one or more exceptions from call to method: gradient
[0:apply]: NameError: global name 'y' is not defined
[1:apply]: NameError: global name 'y' is not define 
```

此外，它在运行 Python 2.7.2/IPython 0.12 的本地系统上运行良好，而使用最新的 Starcluster Ubuntu AMI 在 Python 2.7.2+/IPython 0.12 上崩溃。

这里发生了什么？

更新：我从 github 安装了 IPython 0.13.dev 版本，现在它可以工作了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T18:54:22.517

不同之处在于模块全局变量。在模块中定义函数时，全局命名空间就是模块的命名空间（即`mv.y`）。例如，当该模块是`__main__`交互式定义的函数时，全局命名空间是引擎上的 user_ns，并受`execute("y=5")`.

IPython 提供了一个装饰器，如果你想在模块中定义函数，这些函数应该表现得好像它们是交互式定义的（可以作为全局变量访问用户命名空间）：

```
# 我的模组

从 IPython.parallel.util 导入交互式

@交互的
定义 by_a(b):
    """a 乘 b"
    返回 a*b

```

并且以交互方式，您可以执行以下操作：

```
从 mymod 导入 by_a

e0 = rc[0]
e0.execute("a=5")
打印 e0.apply_sync(by_a, 10) # 50
e0.execute("a=10")
打印 e0.apply_sync(by_a, 10) # 100

```

# objective-c - NSString 长度 - 特殊字符

> ID：10461781
> 
> 赞同：8
> 
> 时间：2012-05-05T12:21:04.193
> 
> 标签：objective-c, nsstring, uitextfield, special-characters

我有一个`UITextField`用户将在其中输入字符。它很简单，我怎样才能返回它的实际长度？当字符串包含 AZ 1-9 个字符时，它按预期工作，但任何表情符号或特殊字符都会被重复计算。

在它最简单的格式中，这只是为一些特殊字符（如表情符号）分配了 2 个字符：

```
NSLog(@"Field '%@' contains %i chars", myTextBox.text, [myTextBox.text length] ); 
```

我尝试使用`characterAtIndex`,`substringFromIndex`等循环遍历每个字符，但一无所获。

根据下面的答案，用于计算字符的确切代码（希望这是正确的方法，但它有效..）：

```
NSString *sString = txtBox.text;

__block int length = 0;
[sString enumerateSubstringsInRange:NSMakeRange(0, [sString length]) 
                        options:NSStringEnumerationByComposedCharacterSequences
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {

                            length++;                                
                        }];

NSLog(@"Total: %u", length ); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-05T13:17:12.327

返回 unichars的`[myTextBox.text length]`计数，而不是字符串的可见长度。`é = e+´`这是2个unichars。表情符号字符应包含更多的 1 unichar。

下面的示例枚举字符串中的每个字符块。这意味着如果您记录它的范围`substringRange`可以长于 1。

```
__block NSInteger length = 0;
[string enumerateSubstringsInRange:range
                           options:NSStringEnumerationByComposedCharacterSequences
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop) {
    length++;
}]; 
```

你应该去观看 2011 年 WWDC 的 Session 128 - Advance Text Processing。他们解释了为什么会这样。真的很棒！

我希望这对您有所帮助。
干杯!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T01:42:13.623

我们也可以考虑以下选项作为解决方案

```
const char *cString = [myTextBox UTF8String];

int textLength = (int)strlen(cString); 
```

这将适用于特殊字符和表情符号

# jquery - 第一张图片后的 div

> ID：10461783
> 
> 赞同：0
> 
> 时间：2012-05-05T12:21:06.953
> 
> 标签：jquery, css, blogger

我需要一些帮助，我正在寻找一种在帖子中的第一张图片之后放置 div 的方法。我想在图像被动态包含并放置在图像上方之后放置的 div，图像具有固定的宽度和高度（640 x 350px）。我正在为我的博客使用博客平台。

我不擅长解释事情，所以这就是为什么我创建了一个粗略的设计我想要完成的事情。

请看一下这张图片

[http://i.stack.imgur.com/XbYrn.jpg](http://i.stack.imgur.com/XbYrn.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:24:25.473

在你的 dom 中试试这个

```
myp = $("#photo_gallery").prev().clone();
$("#photo_gallery").prev().remove()
$("#photo_gallery .separator:first").after(myp) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:35:33.443

选择第一张图片，然后将元素放在该图片之后？

```
$('img:first').after('<div>Hello Kitty</div>'); 
```

在另一个元素中查找第一张图片：

```
$('img:first', '#postID').after('<div>Hello Kitty</div>'); 
```

# objective-c - 将 /n 替换为 br

> ID：10461787
> 
> 赞同：1
> 
> 时间：2012-05-05T12:21:58.293
> 
> 标签：objective-c, xcode, cocoa-touch, ios5

我正在加载一个文本， `[WebView loadHTMLString:html baseURL:nil ];` 但在他们使用的 XML 中，`/n`而不是`<br />`我如何替换一个`/n`to， `<br />`以便我可以在文本之间输入？

**文本现在类似于：**

> Lorem Ipsum /n dolar blabla

需要是

> Lorem Ipsum Dolar blabla

```
 NSString *Display = [NSString stringWithFormat:@"%@", Message];
    NSString *html = [NSString stringWithFormat:@"<html><head><!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01//EN\" \"http://www.w3.org/TR/html4/strict.dtd\"><meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />></head><body>%@</body></html> ",Display];  

    [WebView loadHTMLString:html baseURL:nil ]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:25:30.107

在你的字符串上试试这个：

```
myNSString = [myprevstring stringByReplacingOccurrencesOfString:@"\n" withString:@"<br/>"]; 
```

# grails - grails中的自定义连接表

> ID：10461788
> 
> 赞同：0
> 
> 时间：2012-05-05T12:22:05.143
> 
> 标签：grails, many-to-many, grails-orm, jointable

我有以下域

1.  用户（在称为用户管理的数据库中）和
2.  帐户（在另一个数据库 xyz 中）

它是一个旧系统，所以我不能真正改变系统的架构。我被分配了一个任务来实现一个特定用户只能访问特定帐户的系统。这是多对多关系的经典案例，但问题在于这两个域位于两个不同的数据库中。如果可能的话，我用谷歌搜索，但我意识到这是不可能的。所以我现在正在考虑创建一个自定义连接表来存储允许哪些用户访问哪些帐户的信息。该表可以有两列“accountId”和“userId”。因此，为此，我是否必须在 grails 中创建一个新域，或者有什么更简洁的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:12:35.887

如果您创建 joinTable 您将在哪个数据库中创建它，以及您将如何处理主（帐户，用户）表中的更新并更新您的连接表 up2date ？

我认为（对于这种情况）您不需要连接表，您需要在应用程序级别处理业务逻辑。

你可以有 2 个域类，每个类指向不同的数据源（数据库）。

[http://grails.org/doc/latest/guide/conf.html#multipleDatasources](http://grails.org/doc/latest/guide/conf.html#multipleDatasources)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T16:27:34.997

当我寻找解决方案时，我没有找到任何可持续的解决方案。我最终将可能的解决方案缩小到两个： 1\. （仅）使用 sql 创建一个域表，某种补丁并使用 grails 中的硬编码查询来写入和访问表中的数据。2\. 创建一个域类，如 AccountUser 具有属性 clientId 和 userId

我选择了第二个选项，我写了一些额外的方法并创建了一个服务来返回用户和客户端实例，我就完成了！无论如何，谢谢各位。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-05T13:44:27.540

如果数据库对彼此“可见”（在同一台服务器上或它们之间存在 db 链接），您应该能够使用映射中的完全限定表名（'schema.tablename'）来映射域类关闭。

伪代码：

```
class User {

static mapping = {
    table "usermanagement.user"
}

static hasMany = [Account:accounts]

}

class Account {

static mapping = {
    table "xyz.account"
}

} 
```

[http://grails.org/doc/latest/guide/GORM.html#tableAndColumnNames](http://grails.org/doc/latest/guide/GORM.html#tableAndColumnNames)

# c# - 分配和方法调用顺序

> ID：10461795
> 
> 赞同：2
> 
> 时间：2012-05-05T12:23:00.790
> 
> 标签：c#, c#-4.0, call, normalize

我写了这样一个属性（代表我的 XNA 游戏对象的方向）：

```
public Vector2 Direction
{
    get { return direction; }
    protected set
    {
        (direction = value).Normalize(); // ***
        angle = MathHelper.WrapAngle((float)Math.Atan(direction.X / direction.Y));
    }
} 
```

**set**设置两个等效场，它们以角度表示对象的方向，同时以归一化向量表示。

开始游戏失败，因为*******标记的行失败。它不会对向量进行归一化。
我将此行更改为：

```
direction = value;
direction.Normalize(); 
```

它工作正常......为什么？
我假设在*******标记的行中，第一个操作是分配**值**，然后是规范化**方向**。但事实并非如此。

***_* __*******__ *_*** ***_* ___**
**Normalize()**是**Vector2**类的方法。***

 ***```
//
// Summary:
//     Turns the current vector into a unit vector. The result is a vector one unit
//     in length pointing in the same direction as the original vector.
public void Normalize(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T13:07:07.570

我假设 Vector2 是一个结构或值类型，这意味着它是按值传递的，而不是通过引用传递的。当您将值分配给方向时，您将方向设置为值的副本。此外，表达式 (direction = value) 返回的对象是一个副本，而不是方向上的同一个实例。您正在对从未存储在 setter 块之外的对象调用 Normalize。

出于同样的原因，您不能在从类的属性获取器返回的结构上调用方法或设置属性。例如，如果您示例中的属性位于名为 Monkey 的类中，请注意：

```
Monkey m = new Monkey();
m.Direction = new Vector2(...);
m.Direction.X = 2; // This will not compile.
m.Direction.Normalize(); // This will not do what you expect. 
```***

# assembly - 包含 %0 的 asm 代码，这是什么意思？

> ID：10461798
> 
> 赞同：4
> 
> 时间：2012-05-05T12:23:13.073
> 
> 标签：assembly, linux-kernel, x86, inline-assembly

我的asm知识太有限了，需要知道以下代码：

```
movl %%esp %0 
```

是否`%0`代表寄存器、内存地址或其他内容？是什么`%0`意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T12:27:34.500

它代表一些[输入/输出操作数](http://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html)。它允许您在汇编代码中使用 C 变量。[这个页面](http://wiki.osdev.org/Inline_Assembly)有一些很好的例子。

`%0`只是代码中定义的第一个输入/输出操作数。实际上，这可能是堆栈变量、堆变量或寄存器，具体取决于编译器如何生成汇编代码。

例如：

```
int a=10, b;
asm ("movl %1, %%eax; 
      movl %%eax, %0;"
     :"=r"(b)        /* output */
     :"r"(a)         /* input */
     :"%eax"         /* clobbered register */
     ); 
```

`%0``b`在这种情况下是并且`%1`是`a`。

# javascript - 使用新选项扩展 jquery-ui-datepicker

> ID：10461804
> 
> 赞同：0
> 
> 时间：2012-05-05T12:24:12.833
> 
> 标签：javascript, jquery-ui, jquery-ui-datepicker

在这里需要你的帮助。

我试图弄清楚如何使用新选项正确扩展 datepicker。例如，我想要“setDate”选项。

**这里应该是什么样子：**

```
$('#datepicker').datepicker({
  setDate: function(){
    return new Date().getTime(); // or any timestamp value
  }
}); 
```

因此，我的**日期选择器应该默认初始化这个日期值。**

我知道我可以这样做：

```
var curr_date = new Date().getTime();
$('#datepicker').datepicker('setDate', curr_date); 
```

但**我真正想要的是**使用自定义选项扩展日期选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:06:21.410

你看过这个[SO question](https://stackoverflow.com/questions/7733904/how-can-i-extend-jqueryui-datepicker-to-accept-an-additional-argument)吗？这似乎对您的事业有用。

# google-api - 无法谷歌 Google-API 目录

> ID：10461806
> 
> 赞同：0
> 
> 时间：2012-05-05T12:24:19.903
> 
> 标签：google-api, gdata, gdata-api, google-api-java-client

我知道这很愚蠢，但以前这个 URL 用来向我显示所有可用的谷歌开源 API 的[Pervious 工作 API 链接](http://code.google.com/intl/en/)，但现在它显示了一些其他页面。我厌倦了搜索完整的 API 目录。我想挑一个来学习。我设法找到了一个类似的页面，它只显示了部分 API 的目录。[Google API 目录](https://developers.google.com/gdata/docs/directory)谁能给我正确的 URL 来查看完整的目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:56:53.487

尝试在此页面上找到它：http: [//www.programmableweb.com/apis/directory/1?company=Google](http://www.programmableweb.com/apis/directory/1?company=Google)

或者您可以在这里探索一些 api：（我不知道是否仅此而已） [http://code.google.com/apis/explorer/](http://code.google.com/apis/explorer/)

或者只是搜索您需要的内容：http: [//developers.google.com](http://developers.google.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T19:57:14.530

我必须承认，如果你重新开始，那就是一团糟。

访问 Google API 基本上可以通过两种方式完成。

1.  **旧方式**：Google Data Java 客户端库（又名“gdata-java-client”）：[此处的文档](http://code.google.com/p/gdata-java-client/)。可以在[Google Api Docs](https://developers.google.com/gdata/docs/directory)（您所指的链接）中找到已实施的服务。

2.  **新方法**：Java 的 Google API 客户端库（又名“google-api-java-client”）：[此处的文档](http://code.google.com/p/google-api-java-client/)。[Api 资源管理](http://code.google.com/apis/explorer/)器显示使用新基础架构生成的客户端库。或者这个[列表](http://code.google.com/p/google-api-java-client/wiki/APIs)。

这两个库都适用于不同的语言和不同的 Google 服务。GData 是最成熟的库，支持的[服务最多](https://developers.google.com/gdata/docs/directory)。

然而，新方法更加灵活：客户端库甚至文档都可以为任何准备好过渡到新基础架构的**Google 服务自动生成。**不利的一面是，[并非所有 Google 服务](http://code.google.com/p/google-api-java-client/wiki/APIs)都为新的基础架构（例如联系人）准备好客户端库。您可以访问尚未转换的服务，但您必须编写[自己的 XML 模型](http://javadoc.google-api-java-client.googlecode.com/hg/1.4.1-beta/com/google/api/client/googleapis/xml/atom/package-summary.html)。

有一个从 GData 迁移到新基础架构的[迁移指南。](http://code.google.com/p/gdata-java-client/wiki/MigratingToGoogleApiJavaClient)

# amazon-ec2 - 如何在 RabbitMQ 集群中进行负载分配？

> ID：10461808
> 
> 赞同：7
> 
> 时间：2012-05-05T12:24:26.750
> 
> 标签：amazon-ec2, amazon-web-services, rabbitmq, cluster-computing, autoscaling

嗨，我创建了三个在 EC2 上的集群中运行的 RabbitMQ 服务器

我想根据 CPU 利用率扩展 RabbitMQ 集群，但是当我发布消息时，只有一台服务器使用 CPU，而其他 RabbitMQ 服务器不使用 CPU

那么如何在 RabbitMQ 集群中分配负载

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T13:02:34.253

RabbitMQ 集群旨在提高可扩展性，但系统并不是完全自动化的。

当您在集群中的某个节点上声明队列时，**该队列仅在该节点上创建**。因此，如果您有一个队列，则无论您发布到哪个节点，消息都会最终到达队列所在的节点。

要正确使用 RabbitMQ 集群，您需要确保执行以下操作：

*   有多个队列分布在节点上，这样工作分配得有点均匀，
*   将您的客户端连接到不同的节点（否则，您最终可能会通过一个节点汇集所有消息），并且
*   如果可以，请尝试让发布者/消费者连接到保存他们正在使用的队列的节点（以最大程度地减少集群内的消息传输）。

或者，看看[High Availability Queues](http://www.rabbitmq.com/ha.html)。它们就像普通队列，但队列内容在多个节点上镜像。因此，在您的情况下，您将发布到一个节点，RabbitMQ 会将发布镜像到另一个节点，消费者将能够连接到任一节点，而不必担心因内部传输而使集群陷入困境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-12T10:05:50.363

这不是真的。查看有关该主题的文档。

> 发布到队列的消息被复制到所有镜像。无论消费者连接到哪个节点，消费者都连接到主节点，镜像会丢弃主节点已确认的消息。因此，队列镜像增强了可用性，但不会在节点之间分配负载（所有参与的节点各自完成所有工作）。

# php - 带 GET 参数的 mod_rewrite

> ID：10461813
> 
> 赞同：0
> 
> 时间：2012-05-05T12:25:17.017
> 
> 标签：php, mod-rewrite, get

我正在尝试使用获取参数制作 RewriteRule。这是一个简单的例子，但仍然不起作用。

```
RewriteRule ^/?localhost/([0-9]+) test.php?id=$1 [QSA] 
```

所以如果我去`localhost/123`我想要 test.php 脚本中的`123`as `$_GET`。

知道为什么这会失败吗？所有其他“正常”的 RewriteRules 都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:29:22.370

是`localhost`域，不属于`RewriteRule`. 而且我已将您的更改`[QSA]`为，`[L,QSA]`因此不会执行进一步的规则。

```
RewriteRule ^([0-9]+) test.php?id=$1 [L,QSA] 
```

如果需要对此进行限制，以便*仅*在域为 localhost 时重写，那么您将使用`RewriteCond`类似：

```
RewriteCond %{HTTP_HOST} ^localhost$
RewriteRule ^([0-9]+) test.php?id=$1 [L,QSA] 
```

如果您仅在开发中执行重写，而不是在部署到生产服务器时执行，那将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:30:31.213

试试这个：

```
RewriteBase /localhost
RewriteRule ^(\d+)$ test.php?id=$1 [QSA] 
```

\d 代表 [0-9]

希望这可以帮助。

# java - JPA 之上的模型框架

> ID：10461816
> 
> 赞同：1
> 
> 时间：2012-05-05T12:25:33.807
> 
> 标签：java, jpa, orm, frameworks

到目前为止，我已经使用 eclipse EMF 技术和在 hibernate 之上的 teneo 开发了我的业务层。

虽然 teneo 很好且完整，但它的许多功能在服务器层上并不需要，所以我正在评估是否基于 JPA 规范（hibernate 或 eclipselink）启动新项目。

我从 EMF 思想中缺少的是反向关系修复，或实体创建时的关系集合初始化。

是否有任何轻型框架可以填补这一空白？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T17:08:30.753

[Texo](http://wiki.eclipse.org/Texo)可以在没有 EMF 依赖的情况下生成模型、持久性和 Web 服务代码。进一步阅读：[EMFT Texo：与 EMF 代码生成不同？](http://martintaal.wordpress.com/2011/12/06/emft-texo-different-from-emf-code-generation/),[仅生成实体 - 无 EMF 依赖项](http://wiki.eclipse.org/Texo/Code_Generation_Patterns#Only_Generate_Entities_-_No_EMF_dependencies)。

# php - 安装 Magento CE 1.7：安装数据库时出错

> ID：10461821
> 
> 赞同：2
> 
> 时间：2012-05-05T12:26:04.127
> 
> 标签：php, magento

在我的开发服务器上安装新的 Magento CE 1.7 时出现一个奇怪的错误。我已经在 1.5、1.6 和 1.6.1 版本中成功运行了测试安装。

解压 tar（根据[SSH 安装指南](http://www.magentocommerce.com/wiki/1_-_installation_and_configuration/installing_magento_via_shell_ssh#installing_magento_with_the_full_download)正确设置权限）后，我正在运行安装程序。我填写了我的 mysql 凭据并点击了继续按钮。Magento 尝试运行所有查询以安装新数据库，但几秒钟后失败并出现错误

> 致命错误：在第 133 行的 /var/www/html/magento/1.7/app/code/core/Mage/Core/Model/Resource/Resource.php 中的非对象上调用成员函数 insert()

我已经清除了整个 webroot 并再次解压所有内容，运行安装程序。但每次我得到同样的错误。

我能做些什么？

谢谢，阿诺

* * *

作为参考，包括调用堆栈的完整错误：

```
Fatal error: Call to a member function insert() on a non-object in /var/www/html/magento/1.7/app/code/core/Mage/Core/Model/Resource/Resource.php on line 133

Call Stack
#   Time    Memory  Function    Location
1   0.0002  341476  {main}( )   ../index.php:0
2   0.0034  685872  Mage::run( '', 'store', ??? )   ../index.php:87
3   0.0128  1810524 Mage_Core_Model_App->run( array ('scope_code' => '', 'scope_type'     => 'store', 'options' => array ()) )  ../Mage.php:683
4   0.5342  4244156 Mage_Core_Controller_Varien_Front->dispatch( )  ../App.php:354
5   0.5386  4728048 Mage_Core_Controller_Varien_Router_Standard->match( class     Mage_Core_Controller_Request_Http { protected $_originalPathInfo = '/install/wizard/installDb/'; protected $_storeCode = NULL; protected $_requestString = '/install/wizard/installDb/'; protected $_rewritedPathInfo = NULL; protected $_requestedRouteName = NULL; protected $_routingInfo = array (); protected $_route = 'install'; protected $_directFrontNames = array ('api' => '', 'xmlconnect' => ''); protected $_controllerModule = 'Mage_Install'; protected $_isStraight = FALSE; protected $_beforeForwardInfo = array (); protected $_paramSources = array (0 => '_GET', 1 => '_POST'); protected $_requestUri = '/index.php/install/wizard/installDb/'; protected $_baseUrl = '/index.php'; protected $_basePath = ''; protected $_pathInfo = '/install/wizard/installDb/'; protected $_params = array (); protected $_rawBody = NULL; protected $_aliases = array (); protected $_dispatched = TRUE; protected $_module = 'install'; protected $_moduleKey = 'module'; protected $_controller = 'wizard'; protected $_controllerKey = 'controller'; protected $_action = 'installDb'; protected $_actionKey = 'action' } )   ../Front.php:176
6   0.5502  5886736 Mage_Core_Controller_Varien_Action->dispatch( 'installDb' ) ../Standard.php:250
7   0.5669  6692776 Mage_Install_WizardController->installDbAction( )   ../Action.php:419
8   0.6027  7141188 Mage_Install_Model_Installer->installDb( )  ../WizardController.php:344
9   0.6046  7362904 Mage_Core_Model_Resource_Setup::applyAllUpdates( )  ../Installer.php:161
10  0.6052  7366236 Mage_Core_Model_Resource_Setup->applyUpdates( ) ../Setup.php:235
11  0.6062  7421544 Mage_Core_Model_Resource_Setup->_installResourceDb( '1.6.0.2' ) ../Setup.php:327
12  0.6091  7421736 Mage_Core_Model_Resource_Resource->setDbVersion( 'core_setup', '1.6.0.2' )  ../Setup.php:423 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T18:27:00.350

如果安装程序没有写入权限，则可能会发生这种情况`app/etc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T09:30:32.290

删除您的 var 文件夹。

我有同样的问题，删除 var 文件夹后，Magento 安装顺利..

希望这对您有所帮助。

# javascript - 使用 dnode 从服务器向客户端发送消息

> ID：10461824
> 
> 赞同：5
> 
> 时间：2012-05-05T12:26:28.373
> 
> 标签：javascript, node.js, nowjs-sockets, dnode

几个月前，我发现了 nowjs 和 dnode，最后使用 nowjs（和[https://github.com/Flotype/nowclient](https://github.com/Flotype/nowclient)）进行客户端/服务器双向通信。

nowclient 在 2 个节点进程之间启用 nowjs 通信（而不是在一个节点进程和一个开箱即用的 nowjs 浏览器之间）。然后我能够将数据从客户端发送到服务器，然后从服务器发送到客户端。我现在使用节点 0.6.12，使用节点 0.4.x 运行客户端有点痛苦。

我正在仔细研究 dnode，但我不确定服务器到客户端的通信是如何工作的。服务器是否有可能向客户端发送直接消息？这个想法是让一个客户端在服务器上注册（在第一次连接时），并使服务器能够在需要时联系客户端。

据我了解，如果客户端首先从服务器请求某些内容，则可以在服务器上调用方法。那是对的吗 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-08T13:22:48.037

dnode 使用对称协议，因此任何一方都可以定义对方可以调用的函数。您可以采取两种基本方法。

第一种方法是在服务器端定义一个注册函数，并从客户端传入一个回调。

**服务器：**

```
var dnode = require('dnode');

dnode(function (remote, conn) {
    this.register = function (cb) {
        // now just call `cb` whenever you like!
        // you can call cb() with whichever arguments you like,
        // including other callbacks!

        setTimeout(function () {
            cb(55);
        }, 1337);
    };
}).listen(5000) 
```

**客户：**

```
var dnode = require('dnode');

dnode.connect('localhost', 5000, function (remote, conn) {
    remote.register(function (x) {
        console.log('the server called me back with x=' + x);
    });
}); 
```

或者，一旦方法交换完成，您可以直接从服务器以对称方式调用客户端：

**服务器：**

```
var dnode = require('dnode');

dnode(function (remote, conn) {
    conn.on('ready', function () {
        remote.foo(55);
    });
}).listen(5000); 
```

**客户：**

```
var dnode = require('dnode');
dnode(function (remote, conn) {
    this.foo = function (n) {
        console.log('the server called me back with n=' + n);
    };
}).connect('localhost', 5000); 
```

# iphone - self.property 和 property 的用法有什么区别

> ID：10461834
> 
> 赞同：3
> 
> 时间：2012-05-05T12:28:01.400
> 
> 标签：iphone, ios, properties

> **可能重复：**
> [在objective-c中通过“propertyname”与“self.propertyname”访问属性之间的区别？](https://stackoverflow.com/questions/5251600/difference-between-accessing-a-property-via-propertyname-versus-self-property)

在我的课堂上，我不确定是否使用 self.property 的属性，例如

```
 dateFormatter = [[NSDateFormatter alloc] init];
  //or
  self.dateFormatter = [[NSDateFormatter alloc] init]; 
```

他们似乎都工作得很好。这两种用法有什么区别吗？我很困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:56:20.530

属性是你的方法getter和setter，当你通过self.dateformator调用它时，如果你合成了对象和自生成的getter和setter命名（setProperty和getProperty），它将调用属性，

在您的情况下，您的第一行不是属性，您正在直接访问类的 iVar，而在代码的第二行中，您正在使用属性 getter 和 setter 方法，

现在你的问题有什么区别，

不同之处在于，在 iVar 访问（您的第一行）中，您将不得不手动释放对象，并且保留计数会增加 1，并且分配的内存将被分配给它。而在 self.property 中，分配了一个内存，但一个新的块将分配给变量，因为苹果属性管理会这样做。但保留计数将再次相同。

所以一块内存会丢失。

现在我想告诉一些有益的事情，好的方法是使用对象的属性，因为如果你在接口文件的属性中写了保留，那么你的内存管理将在编译器结束，但记得写在 dealloc 方法中释放。对于您在此处编写的代码行，例如

```
self.someProperty = [[NSArray alloc] init]; 
```

用它作为

```
NSArray* arr = [[NSArray alloc] init];
 self.someProperty = arr;
 [arr release]; 
```

现在您的保留计数将与您想要的相同，并且不关心在哪里释放它，如果您编写它，它将在 dealloc 方法中自动释放。

对于您之前编写的那个，您将必须跟踪您必须释放对象的位置

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T12:39:43.060

如果你想使用它的 setter 和 getter 函数，你实际上可以使用**self.property 。**这是属性的主要功能，它们为您创建 setter 和 getter 方法，而无需您自己编写代码。现在，如果你离开 sel。并且只使用你的**property**，那么你就不会访问它的任何 getter oder setter 方法。但这在您的情况下并不重要，因为分配和初始化对象不使用 steer 或 getter 方法。这就是为什么这两种方式都为你工作的原因。

' **self.property** ' 访问属性的 setter 和 getter 方法。

“**属性**”访问属性的实例变量。

# objective-c - 我可以在 xCode 中创建一个指向随机视图控制器的按钮链接吗？

> ID：10461839
> 
> 赞同：3
> 
> 时间：2012-05-05T12:28:39.193
> 
> 标签：objective-c, xcode, ipad, random, ios-simulator

我对此很陌生......提前抱歉。我在 xCode 中创建了一个包含 10 个视图控制器的应用程序。每个视图控制器都有一个图像视图和一个圆形矩形按钮。

我想对其进行设置，以便按下视图上的按钮将转到其他 9 个视图之一，但加载的视图需要是随机的。

到目前为止我所做的：

-我在情节提要上放置了 10 个视图控制器，并将每个视图控制器的类设置为场景 1-10

-我创建了 10 个名为 scene1-10 的 Objective-C 类视图控制器（.h 和 .m 文件）

-我在这个时尚场景1-->scene2-->scene3-->scene4-->scene5-->scene6-->7scene-->scene8-->scene9-->scene10-->中创建了它们之间的segues场景1

-我已经将每个segue的类设置为segue1-10，以他们要去的场景命名（scene1和scene2之间的segue是segue2）

-我让所有的.h文件看起来像这样（场景#根据文件而变化）：

```
#import <UIKit/UIKit.h>

@interface scene1 : UIViewController

- (IBAction) randomButton;

@end 
```

-我让所有的.m文件看起来像这样（场景#根据视图而变化

```
#import "scene1.h"

@interface scene1 ()

@end

@implementation scene1

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
- (IBAction) randomButton : (id) sender
{
    int i = arc4random() % 10;
    if(i == 1)
    {
        [self performSegueWithIdentifier: @"segue1" 
                                  sender: self];
    }
    else if(i == 2)
    {
        [self performSegueWithIdentifier: @"segue2" 
                              sender: self];
    }
    else if(i == 3)
    {
        [self performSegueWithIdentifier: @"segue3" 
                                  sender: self];
    }
    else if(i == 4)
    {
        [self performSegueWithIdentifier: @"segue4" 
                                  sender: self];
    }
    else if(i == 5)
    {
        [self performSegueWithIdentifier: @"segue5" 
                                  sender: self];
    }
    else if(i == 6)
    {
        [self performSegueWithIdentifier: @"segue6" 
                                  sender: self];
    }
    else if(i == 7)
    {
        [self performSegueWithIdentifier: @"segue7" 
                                  sender: self];
    }
    else if(i == 8)
    {
        [self performSegueWithIdentifier: @"segue8" 
                                  sender: self];
    }
    else if(i == 9)
    {
        [self performSegueWithIdentifier: @"segue9" 
                                  sender: self];
    }
    else
    {
        [self performSegueWithIdentifier: @"segue10" 
                                  sender: self];
    }
}
- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

-我将每个视图控制器列出的接收到的动作“randomButton”链接到视图控制器上的按钮

怎么了：

我在每个 .m 文件的“@implementation scene1”行上收到“不完整的实现”警告，但该应用程序确实构建和加载。

一旦加载，如果我按下按钮，应用程序就会冻结，xCode 的调试窗口会弹出以下内容：

```
2012-05-05 07:11:11.789 randomTester[2448:f803] -[scene1 randomButton]: unrecognized                     selector sent to instance 0x686d370
2012-05-05 07:11:11.792 randomTester[2448:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[scene1 randomButton]: unrecognized selector sent to instance 0x686d370'
*** First throw call stack:
(0x13cc022 0x155dcd6 0x13cdcbd 0x1332ed0 0x1332cb2 0x13cde99 0x1914e 0x190e6 0xbfade 0xbffa7 0xbed8a 0x3e2cf 0x3e5e6 0x24dc4 0x18634 0x12b6ef5 0x13a0195 0x1304ff2 0x13038da 0x1302d84 0x1302c9b 0x12b57d8 0x12b588a 0x16626 0x1f5d 0x1ec5)
terminate called throwing an exception(lldb) 
```

我意识到我可能做错了。我已经搜索了所有内容，但找不到我需要的确切内容，因此我不得不将类似代码中的部分拼凑在一起。

感谢您宝贵的时间和帮助！

* * *

* * *

***更新***

**好的，第二轮：**

你们太棒了，我完全没有意识到我已经通过 IBAction 的声明和实施做到了这一点。这修复了所有实施错误。但是，我似乎有一个潜在的问题。

我的 .h 文件现在看起来像这样：

```
#import <UIKit/UIKit.h>

@interface scene1 : UIViewController

- (IBAction) randomButton;

@end 
```

我的 .m 苍蝇现在看起来像这样：

```
#import "scene1.h"

@interface scene1 ()

@end

@implementation scene1

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
- (IBAction)randomButton
{
    int i = arc4random() % 10 + 1;
    NSString *segueIdentifier = [NSString stringWithFormat:@"segue%d", i];
    [self performSegueWithIdentifier:segueIdentifier sender:self];

}- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

没有实现错误，它构建得很好，但是当我按下按钮加载时，应用程序会冻结，并且 xCode 的调试窗口会弹出以下内容：

```
2012-05-05 13:00:09.236 randomTester[2699:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:     'Receiver (<scene1: 0x6868f90>) has no segue with identifier 'segue5''
*** First throw call stack:
(0x13cb022 0x155ccd6 0xdd61b 0x2592 0x13cce99 0x1814e 0x180e6 0xbeade 0xbefa7 0xbdd8a 0x3d2cf 0x3d5e6 0x23dc4 0x17634 0x12b5ef5     0x139f195 0x1303ff2 0x13028da 0x1301d84 0x1301c9b 0x12b47d8 0x12b488a 0x15626 0x224d 0x21b5)
terminate called throwing an exception(lldb) 
```

很明显，应用程序正在查看scene1 视图控制器并且没有看到“segue5”（这是新的IBAction 调用的随机segue）。这是因为scene1视图控制器上没有segue5，因为它只有一个segue去scene2，如我上面问题的第一部分所述。

为了尝试解决这个问题，我在 scene1 上创建了 10 个 segue1-10 类。我将 segues 2-10 分别连接到场景 2-10。按钮可以调用 segue1 似乎是合乎逻辑的，因为它是随机的，因此指向自身。由于我无法创建从场景 1 到场景 1 的转场，因此我创建了到场景 2 的第二个转场，并且只给了它一个 segue1 类。

没有错误并且应用程序加载但点击按钮导致应用程序冻结这次在调试中显示：

```
2012-05-05 13:45:04.467 randomTester[2803:f803] -[scene1 randomButton:]: unrecognized selector sent to instance 0x68b3760
2012-05-05 13:45:04.479 randomTester[2803:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason:     '-[scene1 randomButton:]: unrecognized selector sent to instance 0x68b3760'
*** First throw call stack:
(0x13cb022 0x155ccd6 0x13cccbd 0x1331ed0 0x1331cb2 0x13cce99 0x1814e 0x180e6 0xbeade 0xbefa7 0xbdd8a 0x3d2cf 0x3d5e6 0x23dc4     0x17634 0x12b5ef5 0x139f195 0x1303ff2 0x13028da 0x1301d84 0x1301c9b 0x12b47d8 0x12b488a 0x15626 0x224d 0x21b5)
terminate called throwing an exception(lldb) 
```

**问题一：** 任何想法需要如何设置这些 segues 才能使这项工作？

**问题二：** 会不会更好：

- 创建 10 个名为 scene1-10 的视图控制器，每个控制器都有一个图像视图和一个按钮

-将每次启动segue的按钮设置为名为sceneRandomizer的第11个视图控制器（我不会给这些segues类）

- 连接从 sceneRandomizer 回到场景 1-10 的 10 个 segue（类将是 segue1-10）

- 在“sceneRandomizer”中编写代码以自动从 1-10
组中启动随机序列，非常类似于重定向（我不知道如何编写......只是把它扔在那里）

从理论上讲，这将减轻我遇到的第二个错误，即调用它的视图控制器上不存在调用的 segue。

如果这种替代设置可行，它会产生从一个转场到另一个转场的任何重大滞后吗？

* * *

* * *

* * *

**更新**

**现在正在工作**

终于让这个工作了。这似乎是一种“迂回”的方法，我相信有一种更有效和更可接受的方法来做到这一点，但这就是我所做的：

.h 和 .m 中的代码与上次尝试的代码相同，但我将重申它只是为了清楚：

我的 .h 文件如下所示：

```
#import <UIKit/UIKit.h>

@interface scene1 : UIViewController

- (IBAction) randomButton;

@end 
```

我的 .m 文件如下所示：

```
#import "scene1.h"

@interface scene1 ()

@end

@implementation scene1

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}
- (IBAction)randomButton
{
    int i = arc4random() % 10 + 1;
    NSString *segueIdentifier = [NSString stringWithFormat:@"segue%d", i];
    [self performSegueWithIdentifier:segueIdentifier sender:self];

}- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

***我做的不同：***

好的，这次我将 11 个视图控制器拖到情节提要上

*   我将一个命名为“startPage”并将其他命名为“scene1-10”

*   我创建了 1 个 .h 和一个 .m 文件（编码如上所示）并将它们命名为 StartPage.h 和
    StartPage.m

*   我将故事板上的所有 11 个视图类设置为一个视图控制器（StartPage）

*   我做了10个segues，1个从StartPage到10个场景中的每一个

*   我从场景 1 制作了 10 个转场，从场景 1 到其他 9 个场景中的每一个，并给了他们 segue2-10 的类（以他们去的场景命名）**请
    注意**因为我无法创建从场景 1 到场景 1 的转场，所以我从scene1到scene2进行了第二次segue，并简单地给它一个segue1类。

*   我为其他 9 个场景重复了最后一步

这确实有效。它构建并运行没有错误。StartPage 首先出现。点击按钮将加载组中的随机视图（场景 1-10），点击结果视图上的按钮将随机加载组中的另一个视图，依此类推。

这样做的不利方面是设置所有转场所需的时间。这个故事板现在有 110 个 segue，控制仅 11 个视图之间的移动。.....那是我生命中的一个小时，我再也回不去了。

**对于像我这样的新手：**

如果您选择使用此方法，在命名您的 segue 标识符时要**非常小心。**假设您为场景 5 布置了 segues，并且您错误地将 2 个 segues 命名为 segue2，而忘记命名一个 segue3。如果最终用户在scene5 并且随机按钮调用segue3，则应用程序将崩溃，因为scene5 没有名为segue3 的segue。我只提到这一点是因为在测试过程中很难发现这样的错误，因为一切看起来都很好，除非你在场景 5 时碰巧调用了 segue3。

如果有人发现使用这种方法有任何我不知道的缺点，请提出来。如果你有更好的方法，我会全力以赴:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:41:24.970

错误和编译器警告告诉你，即使你说你实现了 randomButton 但实际上并没有。

您正在实施

`-(void)randomButton:(id)sender;`这与`-(void)randomButton;`

两个不同的签名。让任何一方匹配另一方，它应该工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:40:25.023

方法的声明和实现`randomButton`应该具有相同的签名。`.h`所以，你应该在文件中这样声明它：

```
- (IBAction)randomButton:(id)sender; 
```

**或**像这样在`.m`文件中更改它：

```
- (IBAction)randomButton
{
    int i = arc4random() % 10;
    // ...
} 
```

* * *

作为旁注，您可以通过使用以下值生成 segue 标识符来简化代码`i`：

```
- (IBAction)randomButton
{
    int i = arc4random() % 10 + 1;
    NSString *segueIdentifier = [NSString stringWithFormat:@"segue%d", i];
    [self performSegueWithIdentifier:segueIdentifier sender:self];
} 
```

另外，请注意，我将`i`生成值的行从`1`更改为`10`。您的原始代码产生从`0`to 的值`9`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-06T22:07:52.980

我曾经使用来自单亲的模态视图控制器来做这样的事情。按下按钮会告诉 parentView dismissModalViewController，然后在 parent 的 viewWillAppear 中，生成一个随机数并 pushModalViewController。我用 xibs 完成了这一切，所以我不确定你将如何使用模态 segues 来处理它。如果你弄清楚了，请告诉我们。

# wix - WiX - 通过检查修订来防止降级

> ID：10461840
> 
> 赞同：6
> 
> 时间：2012-05-05T12:28:53.227
> 
> 标签：wix, windows-installer, custom-action

我正在寻找一种方法来防止我的应用程序降级。但“问题”是，我必须检查修订号

例如：安装 1.0.0.1 时应该可以安装 1.0.0.2 - 但安装 1.0.0.2 时应该无法安装 1.0.0.1。

我知道，Element MajorUpgrade 只检查前三个标记。也许有人可以给我一个想法，如何做到这一点？我可以写一个 CustomAction 来做到这一点吗？- 如果是，我如何在 CustomAction 中检查应该安装哪个版本以及安装哪个版本？我必须在哪里调用 CustomAction，如何显示消息并阻止从 CustomAction 安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T11:58:48.230

这是一个常见的要求。以下模式经常使用：

```
<Upgrade Id="THE-PRODUCT-GUID">
  <UpgradeVersion Property="PREVIOUSVERSIONINSTALLED" Minimum="1.0.0.0" Maximum="$(var.packageVersion)"
          IncludeMinimum="yes" IncludeMaximum="no" MigrateFeatures="yes" />
          IncludeMinimum="yes" IncludeMaximum="yes" />
  <UpgradeVersion Property="NEWERVERSIONINSTALLED" Minimum="$(var.packageVersion)" Maximum="99.0.0.0"
          IncludeMinimum="no" IncludeMaximum="yes" />
</Upgrade>

<InstallExecuteSequence>
  <Custom Action="PreventDowngrading" After="FindRelatedProducts">NEWERVERSIONINSTALLED&lt;&gt;"" AND NOT Installed</Custom>
  <RemoveExistingProducts After="InstallInitialize">PREVIOUSVERSIONINSTALLED&lt;&gt;""</RemoveExistingProducts>
</InstallExecuteSequence> 
```

`PreventDowngrading`自定义操作本质上是一个破坏性错误：

```
<CustomAction Id="PreventDowngrading" Error="Newer version already installed." /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T15:37:17.767

WIX 网站上的[本教程对我有用。](http://wix.tramontana.co.hu/tutorial/upgrades-and-modularization/checking-for-oldies)

总结一下，您必须在升级标签中添加 UpgradeVersion 标签，该标签应该在您的产品中。然后添加一个自定义操作并有条件地安排它 - 在 FindRelatedProducts 之前并测试是否已经安装了新版本。

代码可能类似于：

```
<Product ...>
 <Upgrade Id="YOUR-UPGRADE_GUID">  
  <UpgradeVersion OnlyDetect="yes" Property="NEWERFOUND" Minimum="{CURRENTVERSION}}" IncludeMinimum="no" />
 </Upgrade>
 <CustomAction Id="NoDowngrade" Error="Error Message" />
 <InstallExecuteSequence>
  <Custom Action="NoDowngrade" After="FindRelatedProducts">NEWERFOUND</Custom>
  <RemoveExistingProducts Before="InstallInitialize" />
 </InstallExecuteSequence>
</Product> 
```

将 CURRENTVERSION 替换为您的产品的版本号。

# php - 如何将 html 元素值提交给 Kohana 中的相应控制器

> ID：10461848
> 
> 赞同：1
> 
> 时间：2012-05-05T12:29:47.460
> 
> 标签：php, javascript, jquery, kohana

我在我的项目中使用的是 kohana 2x 版本，我在视图中选择了框，如下

```
<select id='type'>
<option value='type1'>Type1</option>
<option value='type2'>Type2</option>
</select> 
```

默认情况下，加载页面时会选择 Type1。但是当用户选择 type2 时，它会将那个值提交给它的控制器。这里的问题是我没有在这里使用表单，即使我需要将选定的值提交给控制器而不使用表单和提交按钮。当用户从选择框中选择 Type2 时，我只需要将其值提交给它的控制器。我怎样才能通过使用 Jquery 和 Ajax 来实现这一点。我不太擅长 Jquery 和 Ajax，即使我可以管理这个问题的一些答案。

提前致谢

问候， Mahesh.D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:51:21.623

```
$("#type").change(function() {
    var input = $(this).val();

    // If you want to reload the page, use javascript to redirect
    // Or you can use ajax to send the selection dynamicly
}); 
```

您可以找到有关使用 ajax 发送的信息：[jQuery Ajax](http://api.jquery.com/category/ajax/)

# c# - 获取 PropertyInfo 名称和值

> ID：10461849
> 
> 赞同：0
> 
> 时间：2012-05-05T12:29:54.377
> 
> 标签：c#, reflection, dynamic, expression-trees, typedescriptor

我已经看到了执行此操作的各种方法，包括反射、组件模型类型描述符、表达式树和方面，但我仍然不确定下面的代码是否使用 .Net 4.0 或更高版本实现了以下所有目标：

1.  类型安全、重构友好（没有魔法字符串）和可读性
2.  最大化多个调用的性能
3.  提供属性的名称
4.  提供财产的价值

如何改进代码？

```
protected void NotifyOfPropertyChanging<TProperty>(Expression<Func<TProperty>> property) {
    var memberExpression = (MemberExpression)property.Body;
    var prop = (PropertyInfo) memberExpression.Member;

    var propertyName = prop.Name;
    var value = prop.GetValue(this, null);

    // fire INPC using propertyName
    // use value and name to do IsDirty checking
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T17:25:30.733

您*可以*通过编译表达式树并将其缓存以供将来使用而不是`GetValue`每次都调用来提高性能。但是，只有在您当前的实现导致瓶颈时才应该进行此类优化。

```
void NotifyOfPropertyChanging<TProperty>(Expression<Func<TProperty>> property)
{
    var memberExpression = (MemberExpression) property.Body;
    var prop = (PropertyInfo) memberExpression.Member;

    Func<TProperty> accessor;
    if (!TypedAccessorCache<TProperty>.Cache.TryGetValue(prop, out accessor))
    {
        accessor = property.Compile();
        TypedAccessorCache<TProperty>.Cache[prop] = accessor;
    }
    var value = accessor();

    // ...
}

static class TypedAccessorCache<TProperty>
{
    public static readonly IDictionary<PropertyInfo, Func<TProperty>> Cache =
        new Dictionary<PropertyInfo, Func<TProperty>>();
} 
```

请注意，我使用了一个通用静态类型来保存缓存字典实例。这是为每种不同的属性类型有效地创建单独的类型化缓存的便捷方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:54:29.530

这是一个漫长的故事，我想仍然没有比其他方法更好的单一方法。我认为在大多数常见的业务场景中，表达式不会成为性能瓶颈（如果你需要的话，你可以优化一小段需要更快通知的代码），所以这种方法应该没问题。

请记住，创建表达式树比解析它更耗时，因此请确保您只执行一次（即使用静态类级表达式变量）。但是，在这种情况下，您的模型代码会变得有点臃肿。

我个人更喜欢使用基于字符串的 INPC 处理。在重构方面，ReSharper 可以很好地处理字符串，因此我可以称它为相对安全的。据我所知，这是最快的方法。并且使用 VS 或 ReSharper 代码段，您可以轻松地通过几次击键来编写您的属性。

*关于属性值 - INotifyPropertyChanging*和*INotifyPropertyChanged*接口都没有使用它。你为什么需要它？

# java - 等距图形深度处理 Java

> ID：10461851
> 
> 赞同：1
> 
> 时间：2012-05-05T12:30:10.287
> 
> 标签：java, user-interface, 2d, depth, isometric

在 2D 中绘制图形时，如何处理帧中图片的深度？例如，地面深度为-1，玩家深度为0？

另一个问题是如何实现这种外观？当我说实现时，我的意思只是理论上的方法，而不是实际的源代码，但源代码可以提供帮助。

[图片是一个链接，因为我没有足够的声誉 http://desmond.imageshack.us/Himg268/scaled.php?server=268&filename=92772230.jpg&res=landing](http://desmond.imageshack.us/Himg268/scaled.php?server=268&filename=92772230.jpg&res=landing)。

我的游戏已经是基于 Tile 的，它已准备好以等距绘制。我在游戏的引擎部分有 xy 和 z 坐标。我读到您只需要将其翻译成 x 和 y 以进行等距绘图，但我不确定我要如何或为什么要这样做。

[这是](http://img853.imageshack.us/img853/152/testge.png)我现在的游戏图片。硬币是玩家，方块是瓷砖。

最后一件事我的 Tiles 存储在一个数组中，即`Tile[] tileList`. 这是一种有效的存储方式吗？因为我想要最好的表现，我可以从我的比赛中得到最好的表现。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T08:34:36.887

你需要看看做自定义绘图。要获得一个简单的等距游戏，您需要做的就是以正确的顺序在每个图块上绘制项目。在上面的示例中，顶部正方形将是数组中 [0][0] 处的图块，需要首先绘制该图块的内容。之后你需要绘制[0][1]和[1][0]，依此类推..

有关详细信息，请参见此处：[绘制等距游戏世界](https://stackoverflow.com/questions/892811/drawing-isometric-game-worlds)

# oracle - 在 SQL PLUS ORACLE 11gr1 上使用 DATABASE 命令

> ID：10461861
> 
> 赞同：24
> 
> 时间：2012-05-05T12:31:23.887
> 
> 标签：oracle, oracle11g

在Windows7 32bit平台上成功安装ORACLE 11gR1后，我可以进入SQL PLUS里面，也可以创建数据库，但是我仍然不知道如何使用数据库。

在 MySQL 中，使用数据库的命令应该是：

```
USE MYDATBASENAME; 
```

在 SQL SERVER 中也完全一样：

```
USE [DATABASE]; 
```

但我不知道如何通过 SQLPLUS 在 ORACLE 11gR1 中使用数据库，任何人有任何想法吗？

我打算在成功使用`USE`命令后创建一个表。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-05T12:59:29.133

即使它们都使用相同的名词，术语“数据库”在 MySQL (SQL Server) 和 Oracle 之间是完全不同的。

通常 MySQL 数据库映射到 Oracle 中的模式/用户。在 Oracle 中，模式和用户之间存在 1:1 的关系。

Oracle 中的“数据库”是指完整的安装（也称为“实例”）。由于通常只有一个实例/安装，因此在 Oracle 中“切换数据库”是没有意义的。

Oracle 中最接近“USE mydatabase”的方法是切换当前模式：

```
ALTER SESSION SET current_schema = other_user; 
```

然后，您可以访问所有表，`other_user`而无需为其添加前缀。这当然要求您当前的用户至少对其他用户的表具有选择权限（即模式）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-05T12:36:03.853

您可以使用登录到 oracle `sqlplusw username/password@connect-string`，然后执行`select * from v$database`

用于`select instance_name from v$instance;`找出您当前连接到的数据库

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T12:33:39.470

TNSNAMES.ora 包含有关您连接到哪个数据库的详细信息。

# java - 来自 Star SDK 的 starIOport.jar 上的 java.lang.VerifyError

> ID：10461869
> 
> 赞同：1
> 
> 时间：2012-05-05T12:32:33.987
> 
> 标签：java, android, import, jar, verifyerror

我已将 .jar 导入到我的 Eclipse Android 项目中（将其导入 libs 文件夹并将 jar 添加到 Java Build Path 中的库中），但是当我尝试使用它时，我得到一个 java.lang.VerifyError。我使用的 JAR 库是 starIOport.jar。它来自用于在 Android 手机上使用移动打印机的 SDK。它由 Star Micronics 公司制造。我的打印机是 SM-T300，但这可能没关系，因为我什至无法与打印机通信。每次我到达对象时都会收到错误，该对象的类从 jar 中导入类。有谁知道，该怎么办？我在互联网上的任何地方都没有发现有人用这个罐子解决这个特定问题。我不认为其中有一些与 android 不兼容的东西，因为它是为 android 设备制作的。也不适用于我朋友的安卓手机。甚至在模拟器中也没有。

链接到 SDK。它是较新的版本，但我对这个版本也有同样的问题。：http: [//www.starmicronics.com/absolutefm/absolutefm/? f=174](http://www.starmicronics.com/absolutefm/absolutefm/?f=174)

这是我的日志

```
05-05 14:26:46.032: E/AndroidRuntime(3006): Caused by: java.lang.VerifyError: com.StarMicronics.StarIOSDK.PrinterFunctions
05-05 14:26:46.032: E/AndroidRuntime(3006):     at com.StarMicronics.StarIOSDK.StarIOSDKActivity.GetStatus(StarIOSDKActivity.java:71) 
```

这就是导致它的原因。它不是唯一的，每一行对类 PrinterFunctions 做一些事情，它导入 jar 类，都会导致错误。

```
PrinterFunctions.CheckStatus(this, portName, portSettings); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:17:22.967

假设您使用的是此 ADT 版本或更高版本，库处理自 r17 版本以来已更改。

您也可以这样做来解决问题：

1.  项目属性 > Java 构建路径 > 排序和导出
2.  将 JAR 置于列表顶部

这是从 r16 升级后参考 JAR 问题的好文章：[http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# git - 我可以/应该如何处理这个 git gc 错误？（rm：无法取消链接包权限被拒绝）

> ID：10461870
> 
> 赞同：34
> 
> 时间：2012-05-05T12:32:34.103
> 
> 标签：git, garbage-collection, permission-denied

运行 git gc 时，我不断看到此错误：

```
rm: cannot unlink 'pack-30b1ff2[reset of hash].pack': Permission denied 
```

我可以/应该如何处理这个错误？

**更新**

抱歉，我应该提供更多信息。是的，我已尝试重新启动。事实上，reboots 之前已经为我解决了 gc 问题。

我只注意到这个问题，因为当我打开 Git Gui 时，它会不时提示我压缩数据库。我最终注意到，在打开 Git Gui 几次之后，它一直在提示我，即使我点击了是，它又回来了“成功”。

于是我尝试使用 Git EXT 的设置 - Git 维护 - 压缩 git 数据库命令来运行它。这个命令告诉我有一个错误（Git EXT 中的红灯，而 Git Gui 中的绿灯）。

然而，我在上面发布的错误是直接从 git bash 运行 git gc 造成的。

我应该安排磁盘扫描吗？坏扇区会导致这种情况吗？我希望这是一个快速的答案:(

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-05T18:06:40.730

Windows 上的“权限被拒绝”通常是由正在运行的进程锁定引起的。很可能有一个停滞的 Git EXT 线程打开了包文件。

尝试`git gc`在安全模式下进行。

另一种选择是将存储库克隆到新位置并删除旧位置。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-19T07:15:51.197

就我而言，它是 TortoiseGit。为了解决这个问题，我打开了 TortoiseGit Settings->Icon Overlays 并将状态缓存设置为“None”。现在进程 TGitCache 结束了，这样所有的对象都是“空闲”的，可以被 git gc 处理。

![在此处输入图像描述](../Images/28d5070231308e2146d61bbd01ad9978.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-04T16:04:00.167

您需要关闭发生锁定命令的命令的控制台。这可能是锁定文件的 VI 或任何被杀死的命令。最简单的解决方案是关闭所有内容并重新打开。您应该能够毫无问题地执行该命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-14T16:52:06.897

Git 2.23（2019 年第三季度）应该避免`gc`由于提交图（[在 Git 2.18 中引入](https://stackoverflow.com/a/50275501/6309)）而导致的权限被拒绝问题，该提交图会预先计算并将祖先遍历所需的信息存储在单独的文件中以优化图遍历。

在 Git 2.23 中，提交图文件是“运行时可能保持打开文件描述符打开的文件，所有这些文件在使用对象存储完成后都需要关闭”的一部分，并且文件描述符是现有提交的图形文件现在在“gc”最终确定一个新实例以替换它*之前关闭。*

参见[Derrick Stolee ( ) 的](https://github.com/derrickstolee)[commit 2d511cf](https://github.com/git/git/commit/2d511cfc0bfe1d2b98ba8b272ddd9ba83e84e5f8)、[commit 5472c32](https://github.com/git/git/commit/5472c32c3724e1404c3d80368edc28910969c29a)、[commit c3a3a96](https://github.com/git/git/commit/c3a3a964b29221a9b5fa305a08037c90b9f74be0)（2019 年 5 月 17 日[）](https://github.com/derrickstolee)。^(（由)^([Junio C Hamano 合并](https://github.com/gitster))^([——](https://github.com/gitster))^在^([提交 5cb7c73](https://github.com/git/git/commit/5cb7c73589059b557f0d690ed6bcfde46ef2d234))^(中，2019 年 7 月 9 日）)[`derrickstolee`](https://github.com/derrickstolee)
^([`gitster`](https://github.com/gitster))

> ## `packfile`: 关闭提交图`close_all_packs`
> 
> 该`close_all_packs()`方法用于在运行“”之前关闭所有对打包文件和多包索引的读取句柄`git gc --auto`。
> 这在 Windows 平台上尤为重要，其中读取句柄会阻止对这些文件的任何写入。
> 在这种情况下，用 a 替换其中一个文件`rename()`将失败。
> 
> 提交图还执行重命名，因此很容易出现这个问题。在写入之前，我们会小心关闭提交图，但是当“ ”（或类似的）进程运行“ ”
> 时，这将不起作用，这可能会写入提交图。`git fetch``git gc --auto`
> 
> 在这里，关闭提交图作为`close_all_packs()`.

# android - 隐藏菜单以在 android 中包含进度条

> ID：10461872
> 
> 赞同：0
> 
> 时间：2012-05-05T12:32:39.697
> 
> 标签：android, android-layout, android-widget, android-menu, android-progressbar

嗨，我创建了一个用于下载和上传的活动。我使用了一个菜单（项目：下载、上传、删除、退出）。但是当我按下下载按钮时，下载工作开始了，但菜单按钮在此任务完成之前不会消失。没有任何通知的用户会感到沮丧。如何在按下菜单后立即隐藏菜单以及如何包含进度条，通知用户下载和上传任务。

嗨我有方法：

```
 void downloadFile(SmbFile file,String desPath)
 void downloadFolder(SmbFile folder,String tempStore)
 void uploadFile(File file,SmbFile destination)
 void uploadFolder(File f,SmbFile destination) 
```

请告诉我在下面扩展异步任务的代码中在哪里添加这些方法...

```
 class helper extends AsyncTask
{

@Override
protected Object doInBackground(Object... arg0) {
    // TODO Auto-generated method stub
    return null;
}

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:29:02.970

因为你使用了2个不同类型的参数，所以你可以使用构造函数（或者你要传递的参数使用getter、setter）：

```
public class Helper extends AsyncTask<Integer, Void, Void> {

//The filed you want to pass
private SmbFile file;
private String desPath;
private SmbFile folder;
private String tempStore;
private File file;
private SmbFile destination;

//Create setter

public void setFile(SmbFile file) {
    this.file = file;
}

public void setDesPath(String desPath) {
    this.desPath = desPath;
}

public void setFolder(SmbFile folder) {
    this.folder = folder;
}

public void setTempStore(String tempStore) {
    this.tempStore = tempStore;
}

public void setFile(File file) {
    this.file = file;
}

public void setDestination(SmbFile destination) {
    this.destination = destination;
}

@Override
protected Void doInBackground(Integer... params) {
    //check flag to excute exactly method
    switch (params[0]) {
    case 0:
                    //Call your download file method
        downloadFile(file,desPath);
        break;
    case 1:
                   //Call your download folder method
        downloadFolder(folder,tempStore);
   //etc...
    default:
        break;
    }
    return null;
} 
```

}

按下下载菜单时，您可以调用异步任务：

```
//Download the file
Helper helper = new Helper();
//set file and des path for download file
helper.setFile(your_file);
helper.setDesPath(your_despath);
//Excute the download file method
helper.excute(0);

//Download the folder
 //set file and des path for download file
helper.setFolder(your_folder);
helper.setTempStore(your_tempStore);
//Excute the download folder method
helper.excute(1);

//etc... 
```

*注意*：请仔细阅读[此链接](http://developer.android.com/reference/android/os/AsyncTask.html)以了解如何使用 AsyncTask。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:36:29.110

我认为您的 UI 被阻止，因为下载发生在 UI 线程中。因此，将您的下载过程移至后台线程。它解决了你的问题。

# javascript - 选择 Maya 到 JSON 库

> ID：10461873
> 
> 赞同：0
> 
> 时间：2012-05-05T12:32:41.263
> 
> 标签：javascript, json, maya

我一直在寻找可以将场景从 Maya 编码为 JSON 的 JS 库，并找到[了 Inka3D](http://www.inka3d.com/)、[CopperLicht](http://www.ambiera.com/copperlicht/index.html)和[GLGE](http://www.glge.org/)。我需要一个库，因为我对 JS 不太擅长，事实上我所做的几乎都是使用 PHP 和一些 jQuery。我无法导出场景、使用用户交互映射关键帧等。哪一个最适合有 PHP 背景的人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:34:57.217

作为 Inka3D 的创建者，我推荐使用它，因为它旨在解决您的问题。您可以使用 maya 参数名称控制从 js 导出的场景。导出关键帧和 mel 表达式，以及着色网络

# sql - SQL Server 连接 GROUP BY

> ID：10461874
> 
> 赞同：4
> 
> 时间：2012-05-05T12:32:42.457
> 
> 标签：sql, sql-server

我有一个看起来像这样的查询

```
SELECT J.JobID,T.Title FROM JobsTagMap J
Left Join Tags T
ON J.TagID=T.TagID 
```

这将返回以下数据集（简化，JobID 实际上是一个 UniqueIdentifier）

```
JobID    Title
1        Tag1
1        Tag2
2        Tag2
2        Tag5
2        Tag9 
```

现在，我想按 JobID 列对它进行分组并连接标题，所以结果如下

```
JobID    Title
1        Tag1,Tag2
2        Tag2,Tag5,Tag9 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-05T12:40:57.743

如果您使用的是 sql server 2005+。然后你可以这样做：

```
SELECT 
    JobsTagMap.JobID,
    STUFF
    (
        (
            SELECT 
                ',' +Title
            FROM
                Tags
            WHERE
                Tags.TagID=JobsTagMap.TagID
            FOR XML PATH('')
        )
    ,1,1,'') AS Title
FROM JobsTagMap 
```

**编辑**

因为您没有向我们展示表结构和不同表中的数据。这有点难以知道。所以我假设你的表结构看起来像这样：

```
CREATE TABLE JobsTagMap
(
    JobID INT,
    TagID INT
)

CREATE TABLE Tags
(
    TagID INT,
    Title VARCHAR(100)
) 
```

有了这些数据：

```
INSERT INTO JobsTagMap
VALUES(1,1),(1,2),(2,2),(2,4),(2,5)

INSERT INTO Tags
VALUES(1,'Tag1'),(2,'Tag2'),(3,'Tag2'),(4,'Tag5'),(5,'Tag9') 
```

如果您正在获取所显示的数据，`JobID`则不能是唯一的。您可能在`Job`某个地方拥有一张桌子，它是独一无二的。如果您只想使用正在显示的这些表格，那么您需要执行以下操作：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY JobID ORDER BY JobID) AS RowNbr,
        JobsTagMap.*
    FROM
        JobsTagMap
)
SELECT
    *,
    STUFF
    (
        (
            SELECT 
                ',' +Title
            FROM
                Tags
                JOIN JobsTagMap
                    ON Tags.TagID=JobsTagMap.TagID
            WHERE
                JobsTagMap.JobID=CTE.JobID
            FOR XML PATH('')
        )
    ,1,1,'') AS Title
FROM
    CTE
WHERE
    CTE.RowNbr=1 
```

这将为您提供以下结果：

```
1   1   1   Tag1,Tag2
1   2   2   Tag2,Tag5,Tag9 
```

所以以后总是显示什么**表结构**和它的**数据**。这会给你更好的答案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T12:44:30.720

为此，我使用了一个标量函数。将会有一些纯粹主义者认为 decry 永远不应该使用基于行的操作，但是嘿，这是可行的，如果您只返回几行，那么响应时间就可以了。

```
CREATE FUNCTION [dbo].[JoinMVText]

(

  @sID int,

  @fieldID tinyint

)

RETURNS VARCHAR(MAX)

AS 

BEGIN

   DECLARE @MVtextList varchar(max)

   SELECT @MVtextList = COALESCE(@MVtextList + '; ', '') + docMVtext.value

   FROM docMVtext with (nolock) 

   WHERE docMVtext.sID = @sID and fieldID = @fieldID

   RETURN @MVtextList

END 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-01-29T12:08:28.120

我遇到了和你一样的问题，我想出了如何解决缓慢的子选择。

使用**GROUP BY**：

```
(70500 rows affected)

 SQL Server Execution Times:
   CPU time = 94 ms,  elapsed time = 833 ms. 
```

使用**子选择**：

```
(70500 rows affected)

 SQL Server Execution Times:
   CPU time = 1469 ms,  elapsed time = 2323 ms. 
```

**子选择慢了 4 倍以上......**

这是解决方案：

```
SELECT 
    J.JobID,
    STRING_AGG(ISNULL(T.Title, ''), ',') as Title
FROM JobsTagMap J
LEFT JOIN Tags T ON J.TagID = T.TagID
GROUP BY J.JobID; 
```

*如果有什么不够清楚，请告诉我:)*

# java - 在单独的 jsp 或 html 页面中显示内部版本号？

> ID：10461875
> 
> 赞同：0
> 
> 时间：2012-05-05T12:32:56.447
> 
> 标签：java, maven, hudson

我正在使用 Hudson 进行持续集成。我正在使用 Maven。我的是一个网络应用程序。它制造了一场战争。我想显示内部版本号。构建号可以使用 maven-war 插件包含在战争中，因为 hudson 支持环境变量 BUILD_NUMBER。内部版本号将在清单文件中提供。我的要求是我需要从清单文件中检索内部版本号并显示在 jsp/html 文件中。我怎样才能实现它？请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-04-17T16:39:05.767

在进行 Maven 构建时，您可以将构建号作为命令行参数传递。例如：

```
mvn clean install -DskipTests=true -DciVersion=appversion.1 
```

其中**appversion.1**由您的 CI 工具生成。您可以在资源中创建一个文件，例如**version.txt**，其中包含以下内容。

```
 build.version=${ciVersion} 
```

在 pom.xml 中，您可以将版本指定为

```
<version>${ciVersion}</version> 
```

同样在 POM 中添加资源过滤，请参阅[Resource pulgin](https://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)，它在 version.txt 中替换您的版本并将文件复制到最终构建文件中。

现在，您可以在 JSP/类中读取此文件以获取版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:56:37.040

读取清单可能会很棘手，因为可能有很多已加载的 JAR，每个都有自己的清单。也许你可以做类似[这里](http://matthew.mceachen.us/blog/how-to-add-a-version-number-to-your-maven-webapp-482.html)描述的事情？

# c# - 窗体最大化时自动缩放子控件

> ID：10461876
> 
> 赞同：2
> 
> 时间：2012-05-05T12:33:07.663
> 
> 标签：c#, .net, winforms

有没有办法在最大化屏幕或更改分辨率时让所有内容在 windowsFrom 上自动缩放。

我发现手动缩放它是正确的，但是在切换分辨率时，我每次都必须更改它。

```
this.AutoScaleDimensions = new System.Drawing.SizeF(96F, 96F);
this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Dpi; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:38:51.450

没有简单的开关可以让您自动执行此操作。自动缩放是为了解决一个非常不同的问题。您需要考虑到这个设计目标来布置您的表单及其控件。

特别是，最好的方法是使用停靠的[`TableLayoutPanel`控件](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)来“填充”整个表单——将其[`Dock`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)设置为`DockStyle.Fill`. 这将基本上成为您用来布置您希望出现在表单上的子控件的“布局网格”。

然后，将每个常规控件放置在该控件的“单元格”内`TableLayoutPanel`。设置子控件的[`Anchor`属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)以指示您希望它们在窗体展开（或缩小）时如何增长。例如：

*   如果您希望控件在窗体最大化时水平增长，您需要将其锚定到其容器单元格的左右边缘。
*   要垂直增长，您需要将其锚定到单元格的顶部和右侧边缘。
*   如果将其锚定到*所有*边缘，它将通过向各个方向增长而变大。
*   如果你将它锚定到*任何*边缘，控件将保持相同的大小，并简单地在单元格内居中。

这需要~~一些~~麻烦才能正确。例如，您有时必须在控件内部设置[控件](http://msdn.microsoft.com/en-us/library/ms171687.aspx)[的`ColumnSpan`和/或`RowSpan`属性，`TableLayoutPanel`](http://msdn.microsoft.com/en-us/library/ms171687.aspx)以确保它们按照您希望的方式排列，尤其是相对于窗体上显示的其他控件。

但这只是做你想做的事的唯一方法，而且一旦你设置好它就可以很好地工作*。*

# javascript - jquery，ajax，从博主 json feed 创建标签数组

> ID：10461877
> 
> 赞同：0
> 
> 时间：2012-05-05T12:33:09.673
> 
> 标签：javascript, jquery, ajax, arrays

我有以下 jQuery（来自这里的信息[http://www.threelas.com/2012/02/basic-blogger-json-feed-api.html](http://www.threelas.com/2012/02/basic-blogger-json-feed-api.html)）。我遇到的问题是返回上面网站上所说的标签数组， `json.feed.entry[i].category[];`那么我怎样才能返回一个数组？

## [http://jsfiddle.net/Pd2cp/](http://jsfiddle.net/Pd2cp/)

```
$.ajax({
    url: 'http://www.blogger.com/feeds/2814965631975331659/posts/default?alt=json-in-script&max-results=8',
    type: 'get',
    dataType: "jsonp",
    success: function(data){
        for (var i = 0; i < data.feed.entry.length; i++){
        var categories = data.feed.entry[i].category[];
        $('#blogContainer').append(categories);
        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:57:59.870

我[编辑了](http://jsfiddle.net/MUk6S/)你的 JSFiddle。以下是更改：

*   `callback`在查询中使用值为 的参数来`?`告诉 jQuery 在此处分配它的回调。
*   使用方括号 ( ) 时需要插入一些`[]`内容，否则会出现语法错误。由于您想拥有整个阵列，因此我删除了括号。
*   你应该缓存 jQuery 调用
*   我将行为更改为循环遍历所有类别并将其`term`值附加到容器中。

剩下的“问题”是结尾的逗号，可能可以删除。

* * *

编辑：我创建了[第二个 fork](http://jsfiddle.net/D9hJA/)，它还删除了重复项，对所有类别进行排序并仅访问 DOM 一次。此外，没有重叠的逗号。

# scala - Scala 中的非方法局部变量是什么？

> ID：10461881
> 
> 赞同：5
> 
> 时间：2012-05-05T12:33:42.783
> 
> 标签：scala

在对[Scala Sink 或 Swim](http://zeroturnaround.com/blog/scala-sink-or-swim-part-1/)的评论中， Josh Sureth 指出非方法本地变量是 Scala 代码出现问题的原因。

该页面是该短语的唯一谷歌命中`non-method-local vars`，那么它是什么意思，有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T12:36:47.313

方法局部变量是在方法范围内声明的局部变量。

因此，*非方法局部变量*应该是具有更广泛范围的变量，例如类范围。

无法确定为什么有人会说它们有问题。也许这仅仅是因为它们在对象中引入了可变状态。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-05T16:21:00.777

非方法局部变量的问题在于它们将可变状态引入类/对象。这是你应该尽可能避免的事情，因为 scala 也是一种函数式语言。（在纯函数式语言中，像 Haskell 变量是被禁止的。）当你开始并行工作时，这些变量开始产生更多的问题。

# c# - c# Linq's - GroupedEnumerable 的用法？

> ID：10461882
> 
> 赞同：4
> 
> 时间：2012-05-05T12:33:43.237
> 
> 标签：c#, linq, .net-4.0, ienumerable

```
 Fruit[] data = new[] {
                new Fruit {Name = "Gala",Type = "Apple",Price = 0.75m,Quantity = 10}, 
                new Fruit {Name = "Granny Smith",Type = "Apple",Price = 0.80m,Quantity = 7},
                new Fruit {Name = "Tasty",Type = "Strawberries",Price = 1.90m,Quantity = 20}
                       };

 var grouped = from fruit in data
                          group fruit by fruit.Type; 
```

`grouped`类型是：`System.Linq.GroupedEnumerable<ConsoleApplication15.Fruit,string,ConsoleApplication15.Fruit>`

看看它：![在此处输入图像描述](../Images/f390abf9660885427fd0307d4313ee01.png)

我的问题 ：

如果分组包含项目（实现 ienumerable） - 为什么它的类型是`GroupedEnumerable`

而**不是**

```
IEnumerable <System.Linq.IGrouping<string,ConsoleApplication15.Fruit>> 
```

他们为什么要创建一个新的 Type aka `GroupedEnumerable`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T12:44:59.457

如果您在.Net 中有一个*对象*，它必须是某种具体类型，它不能是接口。因此，例如，`new IList<int>()`无效，您必须执行类似`new List<int>()`.

如果你有一个*变量*，它的类型可以是一个接口，所以你可以写，例如，`IList<int> list = new List<int>()`。

这正是这里发生的事情。*变量* 的类型`grouped`是`IEnumerable<IGrouping<string,Fruit>>`（尽管从代码中不清楚，因为您使用的是`var`）。该变量引用的*对象*的类型是`GroupedEnumerable<Fruit, string, Fruit>`，它是 的实现使用的内部类型`GroupBy()`。不可能`IEnumerable`，因为您不能拥有接口的实例。

Visual Studio 调试器向您显示对象的运行时类型，因为这就是调试器的用途：向您显示运行时信息。

# android - Draw9patch 在最新版本中无法正确显示

> ID：10461885
> 
> 赞同：0
> 
> 时间：2012-05-05T12:34:27.363
> 
> 标签：android, nine-patch

我有一个问题，我将 EditText 背景设置为 draw9patch，但它似乎不起作用。希望能得到一些帮助以使其正常工作。

问题是 - -9patch 文件像常规 png 一样运行 - 没有正确拉伸 - 黑色像素在屏幕上可见

我用来显示editText的代码是：

```
<EditText
    android:id="@+id/ed_confsms_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/tv_sms_conf_toNum"
    android:layout_marginTop="32dp"
    android:background="@drawable/speechbubble"
    android:padding="0dp"
    android:inputType="textMultiLine"
      android:gravity="center_horizontal|center" 
      android:imeOptions="actionNone" 
      android:isScrollContainer="true" 
      android:lines="10"
       android:scrollbars="vertical"/> 
```

它看起来像：

（见左图） ![示例输出](../Images/f25ef6153477ab31c33b02dba9f57b19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:10:46.330

我尝试更新，但似乎没有修复它。然后我注意到在其他一些绘制 9 个补丁上，您需要有一个大的内容区域，而不仅仅是用单个像素标记轮廓。这使得 9 补丁有效且有效！哇！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:41:33.043

我以前见过这个，我怀疑这可能是 Android 工具中的一个错误。尝试：

1.  升级到 r19 工具

2.  完全干净的重建

不能说绝对是旧的工具版本，但我以前经常看到这个问题，现在根本没有。

# android - P2P通信/LLCP NFC读卡器-NFC手机

> ID：10461889
> 
> 赞同：1
> 
> 时间：2012-05-05T12:35:04.477
> 
> 标签：android, nfc, nexus-s, nfc-p2p

我所知道的所有 USB/RS232 NFC 读卡器都有 SDK，它允许在 NFC 读/写模式下对其进行编程，这在与手机通信时通常无法使用，因为他们的手机必须使用卡模拟模式，这意味着使用安全元件，这要么根本不可能，要么很难。

您是否有任何使用对等通信/LLCP 与移动设备进行通信的 NFC 读卡器编程经验（NFC 堆栈 + 具体的 NFC 读卡器）？

问候， STeN

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T21:55:22.133

我已经尝试过（早期版本的）[nfcpy](http://nfcpy.readthedocs.org/en/latest/index.html)和[ismb-npp-java](http://code.google.com/p/ismb-npp-java/wiki/NppFromACR122ToPhone)。我知道[nfctools](http://www.grundid.de/nfc/) ( [source](https://github.com/grundid/nfctools) )，但没有经验。

# java - 如何在 Ubuntu 上安装 JavaFx？

> ID：10461890
> 
> 赞同：4
> 
> 时间：2012-05-05T12:35:10.580
> 
> 标签：java, ubuntu, javafx

我从 oracle 主页下载了 JavaFx 预览版。这是一个 zip 文件，我想知道如何在 Ubuntu 12.04 电脑上安装它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T17:13:50.693

请参阅适用于 Linux 的 JavaFX 2 发行说明中的​​安装说明。 [http://docs.oracle.com/javafx/2/release_notes_linux/jfxpub-release_notes_linux.htm](http://docs.oracle.com/javafx/2/release_notes_linux/jfxpub-release_notes_linux.htm)

安装：从[http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html下载 JavaFX SDK zip 文件](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)

将 SDK 文件从 zip 文件解压缩到本地文件系统的目录中。

如果您需要，这些博客文章中有更详细的信息。

[http://www.weiqigao.com/blog/2012/01/26/javafx_2_1_sdk_developer_preview_comes_to_linux.html](http://www.weiqigao.com/blog/2012/01/26/javafx_2_1_sdk_developer_preview_comes_to_linux.html)

[http://www.weiqigao.com/blog/2012/02/03/running_32_bit_javafx_2_1_beta_sdk_on_64_bit_ubuntu_11_10.html](http://www.weiqigao.com/blog/2012/02/03/running_32_bit_javafx_2_1_beta_sdk_on_64_bit_ubuntu_11_10.html)

博客文章还提到了如何确保安装了正确的媒体播放编解码器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-24T10:52:03.557

我发现在 Ubuntu 上安装一个普通的 Oracle 非 GPL Java 1.8 JDK 更简单，JavaFX 包含在其中并且可以自动运行。

# c++ - C ++如何直接调用类中定义的方法，其中仅对该类的引用由另一个函数返回

> ID：10461893
> 
> 赞同：0
> 
> 时间：2012-05-05T12:36:02.763
> 
> 标签：c++, class, reference, compiler-errors

在我的程序中，我有一个网格类（例如`myGrid`），我可以通过重载`operator()`. 我的问题是每次我调用`myGrid(x, y)`它返回对单元格的引用时，我都需要声明一个单元格引用。

```
 cell& myCell = myGrid(x,y);
 myCell.status = currentStatus; 
```

这样做我得到了一个错误：

```
(myGrid(x,y)).status = currentStatus; 
```

我需要非常频繁地使用单元格中定义的函数。因此，每次我需要声明一个单元格引用，这使得我的代码看起来很紧急。有什么优雅的方法来解决这个问题吗？非常感谢。干杯!

对不起。有一个错字。假设 status 是单元格中的公共变量，并假设 currentStatus 是与 status 类型相同的变量。

Grid 是一个预定义的类，我无权修改它。它返回对单元格的引用。例如 cell& operator()(int x, int y)

对混乱感到抱歉。myGrid(x,y).status 有效。我之前在某个地方犯了一个错误。当我遵守它时，错误发生在这一行。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:10:33.100

function-myGrid(x,y) 返回的对象，可能超出范围。我的意思是，您返回的对象可能是一个局部变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:11:14.727

你怎么`operator()`定义（签名）？签名是`status`什么？它们应该是`cell& operator() (int x, int y);`和`int& status();`。提供不起作用的最小示例。

最好的方法和优雅的方法是使用显式方法：

```
myGrid.GetCell(x, y).SetStatus(s); 
```

这更具可读性和可支持性。此外，使用 getter/setter 而不是返回引用可以让您控制值更改的点 - 您可以在那里记录或设置断点。返回参考是不好的做法 - 您可能永远无法确定它会被更改或仅在之后阅读。

# html - css链式过渡动画

> ID：10461897
> 
> 赞同：20
> 
> 时间：2012-05-05T12:36:32.770
> 
> 标签：html, css, css-animations

页面加载后，我想一个接一个地“出现”三个 DIV。

我怎样才能做到这一点？

我知道如何使单个div出现在鼠标悬停但没有任何触发的情况下，一个接一个地使用css，我怎样才能实现这样的平滑过渡？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-05T12:42:35.467

诀窍是首先执行动画以隐藏所有元素（当页面加载时），然后将其链接到将显示元素的动画。这是**纯 CSS 和 HTML 中的一个工作示例：**

```
div.slideIn { 
          position: absolute; 
          top: 200px; 
          width: 100px; 
          height: 100px; 
          border: 1px solid black; 
          animation-name: hide, slideIn;
          animation-duration: 5s;
          animation-timing-function: ease-in;
          animation-iteration-count: 1; 
          -moz-animation-name: hide, slideIn;
          -moz-animation-duration: 5s;
          -moz-animation-timing-function: ease-in;
          -moz-animation-iteration-count: 1; 
          -webkit-animation-name: hide, slideIn;
          -webkit-animation-duration: 5s;
          -webkit-animation-timing-function: ease-in;
          -webkit-animation-iteration-count: 1; 
          -o-animation-name: hide, slideIn;
          -o-animation-duration: 5s;
          -o-animation-timing-function: ease-in;
          -o-animation-iteration-count: 1; 
          opacity: 1;
      } 
      div.slideIn.first {
          left: 50px; 
          animation-delay: 0s, 0s;
          -moz-animation-delay: 0s, 0s;
          -webkit-animation-delay: 0s, 0s;
          -o-animation-delay: 0s, 0s;
      }
      div.slideIn.second {
          left: 150px;
          animation-delay: 0s, 2s;
          -moz-animation-delay: 0s, 2s;
          -webkit-animation-delay: 0s, 2s;
          -o-animation-delay: 0s, 2s;
      }
      div.slideIn.third {
          left: 250px;
          animation-delay: 0s, 4s;
          -moz-animation-delay: 0s, 4s;
          -webkit-animation-delay: 0s, 4s;
          -o-animation-delay: 0s, 4s;
      }
      @keyframes hide
      { 
          from { opacity: 0; } to { opacity: 0 }
      }
      @-moz-keyframes hide
      { 
          from { opacity: 0; } to { opacity: 0 }
      }
      @-webkit-keyframes hide
      { 
          from { opacity: 0; } to { opacity: 0 }
      }
      @-o-keyframes hide
      { 
          from { opacity: 0; } to { opacity: 0 }
      }
      @keyframes slideIn
      { 
            0% { opacity: 0; top: -100px; }
            1% { opacity: 1; top: -100px; }
          100% { opacity: 1; top:  200px; } 
      } 
      @-moz-keyframes slideIn
      { 
            0% { opacity: 0; top: -100px; }
            1% { opacity: 1; top: -100px; }
          100% { opacity: 1; top:  200px; } 
      } 
      @-webkit-keyframes slideIn
      { 
            0% { opacity: 0; top: -100px; }
            1% { opacity: 1; top: -100px; }
          100% { opacity: 1; top:  200px; } 
      } 
      @-o-keyframes slideIn
      { 
            0% { opacity: 0; top: -100px; }
            1% { opacity: 1; top: -100px; }
          100% { opacity: 1; top:  200px; } 
      } 
] 
```

```
<div class="slideIn first">I slid in</div> 
    <div class="slideIn second">I'm 2nd</div> 
    <div class="slideIn third">I'm 3rd</div> 
```

注意：从 slideIn 动画中删除 1% 的线以在滑入时淡入。
注意：IE 尚不支持 CSS3 动画。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-05T12:51:43.980

您可能正在寻找的是CSS 过渡的**动画回调**。Fabrizio Stelluto 写[了一篇](http://gotofritz.net/blog/howto/css3-transitions-callbacks/)关于这个主题的精彩文章，展示了解决这个问题的几种方法。

如果您使用 jQuery，则可以避免特征检测（嗅探）的开销，因为已经为此目的编写了一个[插件（当然......）。](https://gist.github.com/435054)您可以使用它来链接 CSS 过渡，就像您通常在 jQuery 下使用 JavaScript 动画调用所做的那样，即使用动画回调来调用额外的回调。

此外，在 StackOverflow 上发布了几个问题，您可能会发现它们有用：

*   [CSS过渡回调](https://stackoverflow.com/questions/2087510/callback-on-css-transition)
*   [CSS3动画完成时是否有回调](https://stackoverflow.com/questions/6186454/is-there-a-callback-on-completion-of-a-css3-animation)
*   [CSS3 过渡完成时的回调](https://stackoverflow.com/questions/9255279/callback-when-css3-transition-finishes)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-22T14:57:51.430

使用诸如[jQuery Transit](http://ricostacruz.com/jquery.transit/)之类的框架，您可以通过以下方式完成此操作：

**Javascript：**

```
$(document).ready(function () {

    showDiv($('div:first'));

    function showDiv(div) {
        div.transition({
            opacity: 1
        }, 1000, function () {
            //call back
            showDiv(div.next("div"));
        });
    }
}); 
```

**HTML：**

```
<div></div>
<div></div>
<div></div> 
```

**CSS：**

```
div {
    margin: 20px;
    width: 100px;
    height: 100px;
    background-color: black;
    float: left;
    opacity: 0;
} 
```

## [JS 小提琴演示](http://jsfiddle.net/57uGQ/)

# ruby-on-rails - Rails - 模型不通过方法保存属性，但如果手动分配（在控制台中）

> ID：10461899
> 
> 赞同：0
> 
> 时间：2012-05-05T12:36:40.550
> 
> 标签：ruby-on-rails, activerecord, activemerchant

我有一个模型`Payment`，用于跟踪信用卡交易。现在我试图让它映射一些 PayPal 在成功的信用卡交易中返回的值。这是由一个`notify = ActiveMerchant::Billing::Integrations::Paypal::Notification.new(raw_post)`（哎呀，很长）处理的

但是，我写的方法在控制台中不起作用。但是，如果我直接分配它们，它就可以工作。

**例如 Rails 控制台**

```
notify = ActiveMerchant::Billing::Integrations::Paypal::Notification.new(raw_post)
# Works
payment = Payment.new    
payment.raw_response = notify.raw
save! # Save is successful

# Does not work
payment = Payment.new
payment.map_paypal_return(notify) # save! call in this method does not trigger errors. 
```

**请看看我的课。**

```
class Payment < ActiveRecord::Base
  belongs_to :order

  def map_paypal_return(notify)
    puts "in mapping" => Outputted
    raw_response = notify.raw
    payment_status = notify.status

    order_identifier = notify.item_id # Map ID to ID as a safety check bah.

    payer_email = notify.params["payer_email"]
    receiver_account = notify.account
    auth_mode = notify.params["payment_type"]

    transaction_identifier = notify.invoice
    currency = notify.currency
    amount = notify.gross
    puts self.attributes # Returns attributes without the above assignments

    save! # No errors triggered =(
  end
end 
```

**控制台中的方法调用**

```
1.9.2p318 :032 > notify.invoice # This should have been mapped to transaction_identifier
 => "2012-146" 

1.9.2p318 :031 > p.map_paypal_return(notify)
in mapping
{"id"=>nil, "order_id"=>nil, "order_identifier"=>nil, "card_holder_name"=>nil, "auth_mode"=>nil, "amount"=>nil, "amount_string"=>nil, "currency"=>nil, "merchant_reference"=>nil, "transaction_identifier"=>nil, "status"=>nil, "other_errors"=>nil, "received_date"=>nil, "deleted"=>nil, "created_at"=>nil, "updated_at"=>nil, "state"=>"checkout", "payment_type"=>nil, "raw_response"=>nil, "receiver_account"=>nil, "payer_email"=>nil}
  SQL (47.4ms)  INSERT INTO "payments" ("amount", "amount_string", "auth_mode", "card_holder_name", "created_at", "currency", "deleted", "merchant_reference", "order_id", "order_identifier", "other_errors", "payer_email", "payment_type", "raw_response", "received_date", "receiver_account", "state", "status", "transaction_identifier", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["amount", nil], ["amount_string", nil], ["auth_mode", nil], ["card_holder_name", nil], ["created_at", Sat, 05 May 2012 20:32:33 SGT +08:00], ["currency", nil], ["deleted", nil], ["merchant_reference", nil], ["order_id", nil], ["order_identifier", nil], ["other_errors", nil], ["payer_email", nil], ["payment_type", nil], ["raw_response", nil], ["received_date", nil], ["receiver_account", nil], ["state", "checkout"], ["status", nil], ["transaction_identifier", nil], ["updated_at", Sat, 05 May 2012 20:32:33 SGT +08:00]]
 => true 
```

我不知道我是否在某个地方对 Ruby/Rails 产生了愚蠢的基本误解。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:54:04.060

我注意到你有你的`map_paypal_return`方法

```
raw_response = notify.raw 
```

when`raw_response`是对象属性之一。要在相应类的方法中分配 ActiveRecord 提供的属性，您需要执行

```
self.raw_response = notify.raw 
```

对于方法中属性的其他分配也是如此。

这是红宝石的限制。属性方法是通过定义`attribute=`方法（例如`raw_response=`）来实现的，并且没有限定符（`obj.`或`self.`），ruby 假定该语句只是一个局部变量赋值。

# objective-c - 所有类 ios 中的 appdelegate 访问中的字典

> ID：10461903
> 
> 赞同：-1
> 
> 时间：2012-05-05T12:36:59.013
> 
> 标签：objective-c, ios

如何在所有类都可以使用的应用程序委托中放置一个静态字典？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T12:47:32.000

您可以使用 NSUserDefaults，因为您可以在应用程序的任何地方访问它们。

您将值设置为常规字典，唯一的区别是您应该强制保存它们：

```
defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:@"someValue" forKey:@"someKey"];
[defaults synchronize];//FORCESAVE 
```

您还可以以字典方式访问它们：

```
[defaults objectForKey:@"someKey"]; //will give you someValue 
```

# asp.net-mvc-3 - 我们可以在没有回发或 Ajax 调用的情况下更新 MVC 视图中的模型属性吗？(ASP.Net MVC 3)

> ID：10461906
> 
> 赞同：2
> 
> 时间：2012-05-05T12:37:12.077
> 
> 标签：asp.net-mvc-3, model-view-controller

只是想知道我们是否可以在服务器标签内的视图中更新模型属性，然后在用户输入输入后是否可以在 Java 脚本函数中更新它们。

此代码运行良好，在模型绑定的帮助下，我能够在 Dialog 控制器中检索以下硬编码信息。"（在 CallingModalDialogView2 动作方法中）

```
@Html.TextBoxFor(m => m.empname)
@Html.TextBoxFor(m => m.salary, new { @class = "homeSearchBy" })

 @{ MvcApp3.Models.employee emp = new MvcApp3.Models.employee();
    emp.empid = 12121;     //Hard coded some information 
    emp.empname = "Biki";
    emp.empid = 23;
    emp.salary = 111111111;
  }

@Html.MyFramework().Button("ok", Url.Action("CallingModalDialogView2", "Dialog", emp), "title1", "OK") 
```

但是当我试图在文本框中输入一些信息并将它们分配给模型属性时，它不起作用。我做错了什么或者这在 MVC 中是不允许的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T15:13:13.440

您的问题的简短回答：否

Razor 代码全部在服务器端呈现。当您在浏览器中看到该页面时，服务器端操作已完成。

您的型号：

```
@Html.TextBoxFor(m => m.empname)
@Html.TextBoxFor(m => m.salary, new { @class = "homeSearchBy" })

@Html.HiddenFor(m=> m.empid )
@Html.HiddenFor(m=> m.empname )
@Html.HiddenFor(m=> m.salary ) 
```

或者：

```
@Html.Hidden("empid", 1212 )
@Html.Hidden("empname", "Biki" )
@Html.Hidden("salary", 100000 ) 
```

然后：

```
<input type="button" id="change-button" value="change" /> 
```

使用 JQuery 更改数据非常容易：

```
<script>
$(function(){ 
  $("#change-button").click(function(){
    $("#empid").val(12);
    $("#empname").val("Morteza");

    // submit form without ajax
    $("form").submit(); 

    // submit form with ajax
    $.ajax({
      url: "Address of your action method",
      type: "Post", // "Get"
      data:  $("form").serialize(),
      success: function(){
        //...
      }
    });        
  });
});
</script> 
```

我在许多项目中使用这个解决方案并且对我来说工作得很好！

# asp.net - 会话超时仅适用于当前请求

> ID：10461908
> 
> 赞同：0
> 
> 时间：2012-05-05T12:37:23.573
> 
> 标签：asp.net, session-state

我想知道一些事情，在我的网站上完全依赖于 wcf 服务。当用户长时间保持网站打开然后单击任何按钮时，服务将他的asp.net会话视为空，但如果他刷新页面一切恢复正常，是否有任何属性处于会话状态或需要做些什么即使用户空闲，该网站也一直在工作？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:49:29.550

您的会话将在 web.config 中配置的时间间隔后到期。在 web.config 中将 SessionState 标记中的超时更改为 60，现在它将在一小时后过期。阅读有关会话状态的信息，[请单击此处](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28v=vs.71%29.aspx)

```
<sessionState mode="InProc" cookieless="true" timeout="60"/> 
```

# c# - 如何创建返回泛型实例的泛型方法？

> ID：10461909
> 
> 赞同：1
> 
> 时间：2012-05-05T12:37:34.563
> 
> 标签：c#, generics, methods

我想创建实现如下接口的简单工厂类：

```
IFactory 
{
   TEntity CreateEmpty<TEntity>(); 
} 
```

在这个方法中，我想返回一个 TEntity 类型（泛型）的实例。例子：

```
TestClass test = new Factory().CreateEmpty<TestClass>(); 
```

可能吗？界面是否正确？

我试过这样的事情：

```
private TEntity CreateEmpty<TEntity>() {
   var type = typeof(TEntity);
   if(type.Name =="TestClass") {
      return new TestClass();
   }
   else {
     ...
   }
} 
```

但它不编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T12:40:28.773

您需要`new()`在泛型类型参数上指定约束

```
public TEntity CreateEmpty<TEntity>() 
    where TEntity : new()
{
    return new TEntity();
} 
```

新约束规定所使用的具体类型必须具有公共默认构造函数，即没有参数的构造函数。

```
public TestClass
{
    public TestClass ()
    {
    }

    ...
} 
```

如果您根本不指定任何构造函数，则默认情况下该类将具有公共默认构造函数。

您不能在`new()`约束中声明参数。如果需要传递参数，则必须为此目的声明专用方法，例如通过定义适当的接口

```
public interface IInitializeWithInt
{
     void Initialize(int i);
}

public TestClass : IInitializeWithInt
{
     private int _i;

     public void Initialize(int i)
     {
         _i = i;
     }

     ...
} 
```

在您的工厂

```
public TEntity CreateEmpty<TEntity>() 
    where TEntity : IInitializeWithInt, new()
{
    TEntity obj = new TEntity();
    obj.Initialize(1);
    return obj;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T12:41:10.313

```
interface IFactory<TEntity> where T : new()
{
   TEntity CreateEmpty<TEntity>(); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T12:43:49.787

此方法将帮助您按顺序传递参数，它们在构造函数中：

```
private T CreateInstance<T>(params object[] parameters)
{
    var type = typeof(T);

    return (T)Activator.CreateInstance(type, parameters);
} 
```

# php - 检查日期是否为空

> ID：10461928
> 
> 赞同：13
> 
> 时间：2012-05-05T12:40:43.853
> 
> 标签：php, html

在`while`循环中，如何*仅*在该日期存在时才显示日期？

例如：如果日期为`0000-00-00`，则不显示任何内容。

我目前正在阅读如下日期，但我得到的`01-01-1970`是`0000-00-00`：

```
date('d-m-Y', strtotime($row['date'])) 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-05T12:45:43.607

您应该首先检查日期字段中的内容是否包含日期或其 NULL。根据结果​​，您可以阅读 date 。

```
while ($row = mysql_fetch_array($result)) {

    if (strtotime($row['date']) != '0000-00-00') {

        mydate = date('d-m-Y', strtotime($row['date']));

    } else {
        mydate = '';
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-15T08:22:26.027

试试这个，它对我有用

```
while($row = mysql_fetch_array($result)){ 
 if(strtotime($row['date']) > 0){
   echo date('d-m-Y', strtotime($row['date']));
 }else{
   echo 'Date not valid or null';
 }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-11-29T09:18:39.563

当前接受的答案是错误的。

日期“0000-00-00”被解析为“-0001-11-30”。[PHP 手册的日期格式](http://php.net/manual/en/datetime.formats.date.php)部分对此进行了解释：

> dd 和 DD 格式可能上溢和下溢。第 0 天表示上个月的最后一天，而溢出计入下个月。这使得“2008-08-00”等价于“2008-07-31”，“2008-06-31”等价于“2008-07-01”（六月只有30天）。
> 
> 请注意，从 PHP 5.1.0 开始，日期范围被限制为 0-31，如上面的正则表达式所示。因此，例如，“2008-06-32”不是有效的日期字符串。
> 
> 也可以使用值为 0 的 mm 和 MM 格式下溢。月份值为 0 表示上一年的 12 月。例如“2008-00-22”等价于“2007-12-22”。
> 
> 如果您结合前两个事实并下溢日期和月份，则会发生以下情况：“2008-00-00”首先转换为“2007-12-00”，然后转换为“2007-11-30” . 字符串“0000-00-00”也会发生这种情况，它会转换为“-0001-11-30”（ISO 8601 日历中的 -1 年，即预测公历中的公元前 2 年）。

如果您使用的是旧版本的 PHP 或 32 位操作系统，strtotime("0000-00-00") 将返回 false，但不是因为它认为它没有被设置，而是因为解析的日期（11 月30th, -0001) 超出了它可以处理的日期。在具有较新版本的 PHP 的 64 位系统上调用相同的函数将返回一个类似于 -62169984000 的整数（略有差异，具体取决于系统的时区）。这是因为该系统可以处理提供的日期并正确返回 1970 年 1 月 1 日到 11 月 30 日 -0001 之间的秒数。

因此，在字符串“0000-00-00”上使用 strtotime() 来确定它是否已被设置是对该函数的不当使用，并且不会返回所需的结果。由于字符串“0000-00-00”被视为此问题中的默认未设置值，因此简单的字符串比较就足够了：

```
while($row = mysql_fetch_array($result)){
    if($row['date'] != '0000-00-00'){ // string comparison to see if set or not
        echo date('d-m-Y', strtotime($row['date']));
    }
} 
```

请注意，在 32 位系统和较旧的 PHP 版本上，这仅适用于 1901 年 12 月 13 日至 2038 年 1 月 19 日之间的日期。在此之外的日期将导致 strtotime($row['date']) 返回 false，其中 date( ) 函数将解释为 0 并返回“01-01-1970”，因为这是自 1970 年 1 月 1 日以来的 0 秒。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-04-24T07:52:46.607

一个简单的方法是将 $row['date'] 评估为整数并测试该值，如下所示：

```
if(!empty((int)$row['date']))
{
  echo "NOT empty";
}
else echo "EMPTY"; 
```

或短版：

```
!empty((int)$row['date']) ? echo "NOT empty" : echo "EMPTY"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-05T13:35:46.777

试试这个

```
foreach($row As $rows){
 if(strtotime($rows['date']) == ''){
    echo "N/A";
  }else{
echo date('d-m-Y', strtotime($rows['date']));
 }
echo "<br/>"; 
```

}

`strtotime of "0000-00-00" AND "" is equal to "".`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-07-30T08:08:02.943

您可以做的是替换日期或日期时间字符串中的所有`0`、和值`-`，并检查它是否为空。`:`

 ````
if (empty(str_replace(array("0", "-", ":", " "), "", $mydate)))
{
  echo "empty date";
}
else
{
  echo "not empty date";
} 
````

# opencv - Opencv：背景减法：访问冲突

> ID：10461936
> 
> 赞同：3
> 
> 时间：2012-05-05T12:41:25.653
> 
> 标签：opencv, background-subtraction

```
#include "opencv/cvaux.h"
#include "opencv2/opencv.hpp"
#include "opencv2/opencv_modules.hpp"
#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include "opencv2/video/background_segm.hpp"
#include "opencv2/video/tracking.hpp"
#include "opencv2/video/video.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "ctype.h"
#include "stdio.h"

int main(int argc, char* argv[])
{

    /* Start capturing */
    CvCapture* capture = 0;

    /*//Capture from CAM
    if( argc == 1 || (argc == 2 && strlen(argv[1]) == 1 && isdigit(argv[1][0])))
    capture = cvCaptureFromCAM( argc == 2 ? argv[1][0] - '0' : 0 );
    else if( argc == 2 )*/

    capture = cvCaptureFromAVI( "pool.avi"  );

    if( !capture )
    {
        fprintf(stderr,"Could not initialize...\n");
        return -1;
    }

    /* Capture 1 video frame for initialization */
    IplImage* videoFrame = NULL;

    videoFrame = cvQueryFrame(capture);

    if(!videoFrame)
    {
        printf("Bad frame \n");
        exit(0);
    }

    // Create windows
    cvNamedWindow("BG", 1);
    cvNamedWindow("FG", 1);
    //cvNamedWindow("Blobs", 1);
    //cvNamedWindow( "Contours",1);

    // Select parameters for Gaussian model.
    CvFGDStatModelParams* params = new CvFGDStatModelParams;
    params->Lcc=64; /* Quantized levels per 'color co-occurrence' component.  Power of two, typically 16, 32 or 64\.         */
    params->N1cc=25; /* Number of color co-occurrence vectors used to model normal background color variation at a given pixel. */
    params->N2cc=40; /* Number of color co-occurrence vectors retained at given pixel.  Must be > N1cc, typically ~ 5/3 of N1cc.    */
    /* Used to allow the first N1cc vectors to adapt over time to changing background.              */
    params->is_obj_without_holes=TRUE; /* If TRUE we ignore holes within foreground blobs. Defaults to TRUE.                        */ 
    params->perform_morphing=1;/* Number of erode-dilate-erode foreground-blob cleanup iterations.                      */
    /* These erase one-pixel junk blobs and merge almost-touching blobs. Default value is 1\.            */
    params->alpha1=0.1; /* How quickly we forget old background pixel values seen.  Typically set to 0.1                */
    params->alpha2=0.005; /* "Controls speed of feature learning". Depends on T. Typical value circa 0.005\.                 */
    params->alpha3=0.1; /* Alternate to alpha2, used (e.g.) for quicker initial convergence. Typical value 0.1\.             */
    params->delta=2; /* Affects color and color co-occurrence quantization, typically set to 2\.                 */
    params->T=0.9; /* "A percentage value which determines when new features can be recognized as new background." (Typically 0.9).*/
    params->minArea=15; /* Discard foreground blobs whose bounding box is smaller than this threshold.                  */

    CvBGStatModel* bgModel = cvCreateFGDStatModel(videoFrame ,params);

    //Write FG in a file
    CvVideoWriter *writer = 0;
    int isColor = 1;
    int fps     = 25;  
    int frameW  = 640; 
    int frameH  = 480; 
    writer=cvCreateVideoWriter("out.avi",CV_FOURCC('D', 'I', 'V', 'X'),
                           fps,cvSize(frameW,frameH),isColor); 

    int key=-1;
    while(key != 'q')
    {
        // Grab a fram
        videoFrame = cvQueryFrame(capture);

        if( !videoFrame )
            { 
            break;}

        // Update model
        cvUpdateBGStatModel(videoFrame,bgModel);

        // Display results
        cvShowImage("BG", bgModel->background);
        cvShowImage("FG", bgModel->foreground);

    // Write foreground in AVI formet
    cvWriteFrame(writer,bgModel->foreground);

        key = cvWaitKey(10);
    }

    cvDestroyWindow("BG");
    cvDestroyWindow("FG");
    //cvDestroyWindow("Blobs");
    //cvDestroyWindow("Contours");

    cvWaitKey(0);

    cvReleaseBGStatModel( &bgModel );
    cvReleaseCapture(&capture);
    cvReleaseVideoWriter(&writer);

    return 0;
} 
```

我正在使用 opencv2.3.1 和 Visual Studio 2010

我正在尝试实现用于背景减法/前景提取的 FGD 算法。

我已经成功实现了 MOG 算法。然后我只是将函数和参数从 MOG 更改为 FGD。

该项目在visual studio上成功编译，但功能：cvShowImage("BG", bgModel->background); 它给出了以下错误：

**hello_opencv_231.exe 中 0x000007feef085d09 处的未处理异常：0xC0000005：访问冲突写入位置 0xfffffffcc40b40e0。**

我不知道这是什么......**有什么想法吗？**

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T07:57:54.803

当您尝试访问不存在的位置时，会出现错误访问冲突。例如，当您访问 Mat(3,1,CV_32FC1) 的位置 4 时，就会发生这种情况。或者当您将两个大小不兼容的矩阵 Mat(3,1,CV_32FC1)x Mat(3,1,CV_32FC1) 相乘时。

逐步调试代码（Visual Studio 中的 F10），当它崩溃时，您将知道确切的行，因此您可以分析导致访问冲突的确切原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-26T15:23:20.290

我不能 100% 确定，但是我认为您的 PC 中可能没有 CUDA 兼容设备，或者您没有设置支持 CUDA 的 OpenCV。

FGD 算法似乎只有 CUDA 实现，没有 CPU 实现。

# 3g - 如何通过 3G 网络访问网络服务器？

> ID：10461937
> 
> 赞同：0
> 
> 时间：2012-05-05T12:41:28.520
> 
> 标签：3g, embeddedwebserver

我有一个公共 IP 和许多通过 3G 网络的设备。所有设备都有一个运行的网络服务器，它提供状态并且可以控制。他们可以看到公共 IP，但我无法从 Internet 访问网页。有什么方法可以将这些页面中继到公共 IP，然后客户端可以通过公共 IP 访问网页。换句话说，我如何将网页推送到公共 IP ？这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:53:42.443

虽然我同意这不是一个编程问题，但我想给出一个答案，因为这可能是一个考虑因素：

3G 运营商（与其他一些运营商一样，数量可能在不久的将来增加）使用 NAT 对其设备进行网络访问。这具有设备本身无法从外部接触到的重要含义。

对于我们程序员来说，这意味着 IP 端到端模型的崩溃，我们的软件必须处理好这一点。以下是一些随机输入：

*   反向服务器和客户端角色：让设备访问 C&C 服务器，而不是相反
*   使用 VPN - 也许将它们集成到您的应用程序中以便于设置

# java - bean验证默认参数的顺序？

> ID：10461945
> 
> 赞同：9
> 
> 时间：2012-05-05T12:43:02.000
> 
> 标签：java, spring, spring-mvc, internationalization, bean-validation

我目前正在尝试使用 bean 验证提供自定义验证消息。

目前使用 spring mvc 3.1.1 + apache bean 验证。

在我的 bean 中，我指定：

```
@Size(min=1, max=50)
private String title; 
```

在我的 messages.properties 中：

```
Size.addForm.title=The title must not be empty and must not exceed {1} characters. 
```

从实验中，我发现：

*   {0} 指的是“标题”
*   {1} 表示最大值，即 50
*   {2} 指的是最小值，即 1

它会显示为`The title must not be empty and must not exceed 50 characters.`正确的。

但所有这些都来自实验。我想知道**是否有文件说明默认约束的参数顺序**？

我希望`Size.addForm.title=The title must not be empty and must not exceed {max} characters.`基于默认的 ValidationMessages.properties 尝试使用，但最终在`{max}`. 我认为这与插值有关？

* * *

## 更新

因此，这些中的每一个都因 NumberFormatException 而独立失败`{max}`：

*   *messages.properties* : Size.addForm.title=标题不能为空且不能超过**{max}**个字符。
*   *messages.properties* : Size=标题不能为空且不能超过**{max} 个**字符。
*   *messages.properties* : javax.validation.constraints.Size.message=标题不能为空且不能超过**{max}**个字符。
*   *ValidationMessages.properties* : Size.addForm.title=标题不能为空且不能超过**{max}**个字符。
*   *ValidationMessages.properties* : Size=标题不能为空并且不能超过**{max} 个**字符。

这是堆栈跟踪：

```
java.lang.NumberFormatException: For input string: "max"
    at java.lang.NumberFormatException.forInputString(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.lang.Integer.parseInt(Unknown Source)
    at java.text.MessageFormat.makeFormat(Unknown Source)
    at java.text.MessageFormat.applyPattern(Unknown Source)
    at java.text.MessageFormat.<init>(Unknown Source)
    at org.springframework.context.support.MessageSourceSupport.createMessageFormat(MessageSourceSupport.java:151)
    at org.springframework.context.support.ResourceBundleMessageSource.getMessageFormat(ResourceBundleMessageSource.java:281)
    at org.springframework.context.support.ResourceBundleMessageSource.resolveCode(ResourceBundleMessageSource.java:188)
    at org.springframework.context.support.AbstractMessageSource.getMessageInternal(AbstractMessageSource.java:205)
    at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:146)
    at org.springframework.context.support.AbstractApplicationContext.getMessage(AbstractApplicationContext.java:1214)
    at org.springframework.web.servlet.support.RequestContext.getMessage(RequestContext.java:571)
    at org.springframework.web.servlet.support.BindStatus.initErrorMessages(BindStatus.java:177)
    at org.springframework.web.servlet.support.BindStatus.getErrorMessages(BindStatus.java:273)
    at org.springframework.web.servlet.tags.form.ErrorsTag.exposeAttributes(ErrorsTag.java:173)
    at org.springframework.web.servlet.tags.form.AbstractHtmlElementBodyTag.writeTagContent(AbstractHtmlElementBodyTag.java:48)
    at org.springframework.web.servlet.tags.form.AbstractFormTag.doStartTagInternal(AbstractFormTag.java:102)
    at org.springframework.web.servlet.tags.RequestContextAwareTag.doStartTag(RequestContextAwareTag.java:79) 
```

这是唯一与命名参数一起使用的参数，它**必须是 ValidationMessages.properties，并且它必须完全是 jsr 303 实现的默认资源包中存在的键**：

*   **ValidationMessages.properties** : javax.validation.constraints.Size.message=你知道wad，大小必须在**{min}**和**{max}之间**

基本上目前的结论是，默认情况下，我不能在我的特定消息上使用命名参数。命名参数**仅**在我使用相同的默认 jsr303 资源包文件名（即*ValidationMessages.properties* ）覆盖默认 jsr303 资源包**&&上***的确切键时才有效*

 ***我现在更喜欢避免使用插值，因此关于如何找出 {0} 或 {1} 或 {2} 的原始问题是指文档中的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T17:49:25.933

[JSR 303 规范](http://download.oracle.com/otndocs/jcp/bean_validation-1.0-fr-oth-JSpec/)，4.3.1.1。“默认消息插值算法”

> *   4 - 从消息字符串中提取消息参数。那些与约束的属性名称匹配的那些将替换为约束声明中该属性的值。

我是这样读的：您应该为消息参数使用注释属性的名称，而不是数字。

规范的附录 B“标准 ResourceBundle 消息”显示了一些示例：

```
javax.validation.constraints.Min.message=must be greater than or equal to {value}
javax.validation.constraints.Max.message=must be less than or equal to {value}
javax.validation.constraints.Size.message=size must be between {min} and {max}
javax.validation.constraints.Digits.message=numeric value out of bounds (<{integer} digits>.<{fraction} digits> expected) 
```

所以看起来命名参数是你应该使用的方式。（这似乎是一个实现“功能”） -但最后`{0}`，*这只是默认消息插值器的行为，标准定义了一种如何用您自己的方式替换它们的方法。*`{1}``{2}`

 ** * *

更新

Hibernate Validation 实现接缝具有格式化值的附加功能`${validatedValue:<format>}`。-- 也许这对你有帮助`java.lang.NumberFormatException`

@参见[Hibernate 验证器参考，第 5.3 章。消息内插器](http://docs.jboss.org/hibernate/validator/4.3/reference/en-US/html/validator-bootstrapping.html#section-message-interpolator)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-05T12:42:13.080

更好的使用：

```
 @Size(max=99)
    @NotBlank
    private String title; 
```

因为`@Size`允许空白字符，如空格（）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T14:46:56.003

*   带有名称的`Size.foo.bar`插值不起作用
*   但是 for`size.foo.bar`并且`baz.foo.bar`确实如此（当不使用验证注释名称时；检查区分大小写）

使用扩展`message.properties`中添加的文件进行检查，例如：`WebAppConfig``WebMvcConfigurerAdapter`

```
 @Bean
  public MessageSource messageSource() {
    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
    messageSource.setBasename("messages");
    return messageSource;
  }

  @Override
  public Validator getValidator() {
    LocalValidatorFactoryBean bean = new LocalValidatorFactoryBean();
    bean.setValidationMessageSource(messageSource());
    return bean;
  } 
```****

# javascript - [] + {} 等于 [object Object]，在 Javascript 中？如何？

> ID：10461946
> 
> 赞同：2
> 
> 时间：2012-05-05T12:43:08.487
> 
> 标签：javascript, arrays

> **可能重复：**
> [CodeMash 2012 的“Wat”演讲中提到的这些奇怪的 JavaScript 行为的解释是什么？](https://stackoverflow.com/questions/9032856/what-is-the-explanation-for-these-bizarre-javascript-behaviours-mentioned-in-the)

我对 JavaScript 很陌生。我有这样的代码：

```
<script type="text/javascript">
console.log( []  + {} );
</script> 
```

在我的 Google chrome 浏览器日志中：

```
[object Object] 
```

它看起来对我来说是有线的！并做这样的事情：

```
<script type="text/javascript">
console.log( {} + {} );
</script> 
```

确实产生：

```
[object Object][object Object] 
```

在这两种情况下，这里到底发生了什么？怎么会`[]`，`{}`将这两个结果相加成一个数组`objects`？

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-05T12:45:25.950

当您将[`+`运算符](http://es5.github.com/#x11.6.1)与非数字一起使用时，您正在执行字符串连接，因此操作数将转换为字符串。一个空数组[变成一个空字符串](http://es5.github.com/#x15.4.4.2)，因为它是对 的隐式调用`join`，并且没有条目，`join`返回一个空字符串；一个对象[变成`"[object Object]"`](http://es5.github.com/#x15.2.4.2).

所以

```
console.log( [] + {} ); 
```

...归结为

```
console.log( String([]) + String({}) ); 
```

...归结为

```
console.log( "" + "[object Object]"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T12:45:53.933

您正在将对象添加到数组 - 所以它被放在最后。当您对 2 个对象应用 + 时，唯一有意义的操作是将其转换为字符串并将其连接起来

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T12:47:28.273

`[]`是一个空数组，它被转换为一个字符串（因为连接运算符）。`{}`是一个空对象。

# jquery - 返回时间敏感函数

> ID：10461947
> 
> 赞同：0
> 
> 时间：2012-05-05T12:43:27.790
> 
> 标签：jquery, function, if-statement

如果我这样调用 if 语句：

```
if(someRandomFunction()){
    //do stuff
} 
```

如果被调用函数返回 true 但经过各种调用延迟和定时动画，这是否会导致 if 语句失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:51:41.733

这取决于函数的工作方式，如果 this 总是显式返回`true`条件 is `true`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:04:10.337

当您说“各种调用的延迟和定时动画”时，我想您是在谈论对`window.setTimeout()`等的调用。

当一个函数像这样注册一个延迟事件时，该函数在注册事件后继续执行，并且事件稍后触发，通常在注册函数完成执行之后。

后面执行的也是函数。它们可以返回值，但由于这些函数实际上是由浏览器调用的（当它知道是时候调用它们时），所以这些值会返回给浏览器。至少在 的情况下`setTimeout()`，返回值被忽略。`setInterval()`

当您调用一个函数时，您可以（至少在 javascript 中）指望该函数是向您返回值的函数。

# ruby-on-rails - 您可以编辑/更新也是嵌套属性的多态模型吗？

> ID：10461949
> 
> 赞同：3
> 
> 时间：2012-05-05T12:43:29.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-forms, nested-attributes, polymorphic-associations

我正在构建一个相册，其中用户有很多相册，每个相册都有很多照片。

专辑类

```
Class Album < ActiveRecord::Base

 attr_accessible :photos_attributes, :name
 has_many photos, :as => imageable
 accepts_nested_attributes_for :photos

end 
```

照片课

```
Class Photo < ActiveRecord::Base

 attr_accessible :description, :location
 belongs_to :imageable, :polymorphic => true

end 
```

专辑控制器方法

```
def create
  @album = current_user.albums.build(params[:album])
  if @album.save
    redirect_to @album, :notice => "Successfully created album."
  else
    render :action => 'new'
  end
end

def edit
  @album = Album.find(params[:id])
end

def update
  @album = Album.find(params[:id])
  if @album.update_attributes(params[:album])
    redirect_to @album, :notice  => "Successfully updated album."
  else
    render :action => 'edit'
  end
end 
```

编辑专辑表格

```
<%= form_for @album do |f| %>
    <%= f.label :album_name %><br />
    <%= f.text_field :name %>

  <%= f.fields_for :photos do |photo| %>
    <%= photo.label :photo_description %>
    <%= photo.text_field :description %>

    <%= photo.label :photo_location %>
    <%= photo.text_field :location %>
  <% end %>

<% end %> 
```

问题是，当编辑表单提交时，photos_attributes 以哈希的形式出现，并且 rails 没有正确更新它。

```
 Parameters: { "album"=>{"user_id"=>"1", "name"=>"Lake Tahoe", 
                "photos_attributes"=>{"1"=>{"description"=>"Top of the Mountain!", "id"=>"2"}, 
                                      "2"=>{"description"=>"From the cabin", "id"=>"5"}}}, 
                "commit"=>"Update Ablum", "id"=>"10"} 
```

与 photos_attributes 散列一起发送的 ID 是数据库中照片表中的实际 ID。无论出于何种原因，如果用户编辑照片描述或位置，rails 不会更新它们。我相信这与照片是多态的事实有关。

有人可以请帮忙吗？我已经尝试了几个小时并在整个网络上搜索并无法找到解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:25:41.427

这可能取决于您使用的是什么版本的导轨。我相信 < 3.2 需要 has_many 关联的 autosave 属性。您可能只想添加以确保安全，看看是否可以解决问题。

此外，请检查您的日志以确保您在请求期间没有收到任何警告。

# asp.net-mvc - 已超出传入邮件的最大邮件大小配额 (400000)

> ID：10461951
> 
> 赞同：0
> 
> 时间：2012-05-05T12:43:32.427
> 
> 标签：asp.net-mvc, wcf, wcf-binding

我使用 DTO 对象从我的 WCF 服务传输数据。

这是 DTO 对象：

```
[DataContract]
public class MatrixDTO : BaseDTO<MatrixDTO, Matrix>
{
    [DataMember]
    public int MatrixID { get; set; }

    [DataMember]
    public int OriginStopID { get; set; }

    [DataMember]
    public string OriginStopCode { get; set; }

    [DataMember]
    public int DestinationStopID { get; set; }

    [DataMember]
    public string DestinationStopCode { get; set; }

    [DataMember]
    public int NumberOfDays { get; set; }
} 
```

我知道我的服务返回了 2116 件物品。这是返回的典型信息：

![在此处输入图像描述](../Images/3cf4f14bedca3ad2bfe430ac466cb231.png)

如您所见，每个返回的项目中没有很多数据。但我不知道为什么我必须调整我的 web.config 绑定缓冲区以允许 750000 字节！

这是我的 web.config：

```
 <binding name="WSHttpBinding_IRequestService" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
      bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
      maxBufferPoolSize="750000" maxReceivedMessageSize="750000" messageEncoding="Text"
      textEncoding="utf-8" useDefaultWebProxy="true" allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
        enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
          realm="" />
        <message clientCredentialType="Windows" negotiateServiceCredential="true"
          algorithmSuite="Default" />
      </security>
    </binding> 
```

这是我的服务：

```
 public List<MatrixDTO> GetMatrices()
    {
        using (var unitOfWork = UnitOfWorkFactory.Create())
        {
            var matrixRepository = unitOfWork.Create<Matrix>();                
            var matrices = matrixRepository.GetAll();

            var dto = new List<MatrixDTO>();
            AutoMapper.Mapper.Map(matrices, dto);
            return dto;
        }            
    } 
```

**有人可以解释我吗？**如果我将缓冲区从 750000 减少到 400000，则会收到错误消息：*已超出传入消息的最大消息大小配额 (400000)。要增加配额，请在适当的绑定元素上使用 MaxReceivedMessageSize 属性。*

我跟踪 WCF 日志文件，发现从我的 WCF 传输的数据约为 721K。20 个字符以下的 2116 个项目怎么可能传输这么多数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:09:11.370

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

> Windows Communication Foundation (WCF) 默认使用称为 Data Contract Serializer 的序列化引擎来序列化和反序列化数据（将其转换为 XML 或从 XML 转换）

从 DataContractSerializer 出来后，您的“小”对象如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<MatrixDTO xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/SORepros.Tests">
    <DestinationStopCode>A-ANT</DestinationStopCode>
    <DestinationStopID>3</DestinationStopID>
    <MatrixID>3</MatrixID>
    <NumberOfDays>0</NumberOfDays>
    <OriginStopCode>PAO</OriginStopCode>
    <OriginStopID>1</OriginStopID>
</MatrixDTO> 
```

这是 344 字节。如果您有 2116 个对象，则为 2116 * 344 = 727904 字节，即 710.8 KB。

# php - 地图上的正则表达式和 Xpath

> ID：10461958
> 
> 赞同：1
> 
> 时间：2012-05-05T12:44:20.767
> 
> 标签：php, regex, xpath, map

我正在尝试使用 xpath 从地图中抓取一些信息，我需要以下信息纬度和经度。到目前为止，这是我的代码

```
foreach($xpath->query('//script[@type="text/javascript"]') as $table5)
 {
$src= $xpath->query('.//text()', $table5)->item(0)->nodeValue;
preg_match('/latitude\/=\([\d.-]+)/', $src, $m);
list(, $lat, $lng) = $m;
} 
```

我要报废的网站有这个部分，我需要纬度和经度

```
<script type="text/javascript">
var latitude = -1.283; ///a need regular expression to get this value -1.283
var longitude = 36.817;
var zoom = 12;
$(document).ready(function(){
if (GBrowserIsCompatible()) {
var map = new GMap2(document.getElementById("map"));
map.setCenter(new GLatLng(latitude, longitude), zoom);
map.addControl(new GSmallMapControl());
map.addControl(new GMapTypeControl()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:17:40.940

您的正则表达式不太正确（您需要考虑空格，并且您不小心转义了左括号）。试试这个（使用[在线正则表达式测试器](http://www.functions-online.com/preg_match.html)）：

```
/latitude = ([\d.-]+)/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T15:28:20.343

**纯 XPath**：

**对于纬度**：

```
substring-before(substring-after(., 'var latitude = '), ';') 
```

当计算这个 XPath 表达式时（假设提供的`script`元素是上下文节点），这个计算的结果是：

```
-1.283 
```

**对于经度**：

```
substring-before(substring-after(., 'var longitude = '), ';') 
```

当计算这个 XPath 表达式时（假设提供的`script`元素是上下文节点），这个计算的结果是：

```
36.817 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
  <xsl:copy-of select=
  "substring-before(
        substring-after(/*/head/script[1], 'var latitude = '),
        ';'
                    )"/>

=======
<xsl:text/>

  <xsl:copy-of select=
  "substring-before(
        substring-after(/*/head/script[1], 'var longitude = '),
        ';'
                    )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<html>
  <head>
      <script type="text/javascript">
    var latitude = -1.283; ///a need regular expression to get this value -1.283
    var longitude = 36.817;
    var zoom = 12;
    $(document).ready(function(){
    if (GBrowserIsCompatible()) {
    var map = new GMap2(document.getElementById("map"));
    map.setCenter(new GLatLng(latitude, longitude), zoom);
    map.addControl(new GSmallMapControl());
    map.addControl(new GMapTypeControl());
      </script>
  </head>

  <body>Hello</body>
</html> 
```

**计算两个 XPath 表达式并将结果复制到输出**：

```
-1.283

=======
36.817 
```

# java - Cmd 错误 - 没有足够的存储空间来处理此命令

> ID：10461960
> 
> 赞同：2
> 
> 时间：2012-05-05T12:44:23.200
> 
> 标签：java, windows, batch-file

我为我的文凭开发了一个应用程序，在某些时候我必须从 java 源文件运行一个批处理文件。问题是每次我尝试执行该批处理文件时都会收到此错误：“没有足够的存储空间来处理此命令”。

这个批处理文件只是运行 cvs **log**命令。如果我直接从 cmd 运行命令，一切正常，但如果我尝试运行包含此命令的批处理文件，我会收到该错误:(

我使用这个例子来运行一个批处理文件：

```
// --------------
Process process = Runtime.getRuntime().exec(cmd);
process.waitFor();
// -------------- 
```

其中，cmd 是这样的字符串：“cmd /c start \"\" absolute_path_of_batch_file”。

有谁知道我该如何解决这个问题？这个错误到底是什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T14:04:55.453

从 java 运行将在自己的进程中运行命令，因此它应该与从命令行运行命令完全相同。可能不同的是您运行批处理文件的目录（或环境变量）。批处理文件中是否有任何相对路径？

否则，`sysout`对该`cmd`字符串执行 a 并在`cmd`终端中准确执行该字符串，看看它是否有效。并发布确切的错误。

# php - 使用特征绑定动态创建类

> ID：10461965
> 
> 赞同：1
> 
> 时间：2012-05-05T12:45:15.543
> 
> 标签：php, class, eval, traits

我想在我的项目中使用特征，而对于多重继承，我想使用特征。

所以我创建了一些要使用的特征，例如：tItem_Epic、tItem_Weapon、Item_Driver

当我为 Sword 创建新类时，我想我可以使用 eval 来创建类：

```
<?php
function new_item_class($type)
{
    eval('class Item_'.ucfirst($type).' extends Item_Driver { use tItem_Epic, tItem_Weapon; }');
}
?> 
```

这是一个例子。还有一些参数会改变评估的过程（例如：项目质量等）。

这会减慢进度吗？或者我应该为每种项目类型创建一个文件并在需要时调用它们？哪个会更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:55:56.230

您可以在磁盘上生成文件，这可能对 IDE 有好处，因为它们也可以解析这些文件，而且没有那么神奇。

`eval`对于 PHP， （您的代码示例）和`include`（磁盘上的文件示例）之间没有太大区别。所以做我想说的让你高兴的事。

我个人更喜欢文件，因为它比那些魔术类更直接。而且我不会寻找“性能”的理由来决定这一点。你谈论的那种性能是短视的，因为它仍然不确定你谈论哪种性能，特别是因为你还没有遇到瓶颈。

# java - 我的系统无法运行任何 servlet 我该如何解决？

> ID：10461966
> 
> 赞同：-1
> 
> 时间：2012-05-05T12:45:21.517
> 
> 标签：java, html, servlets, resources, compilation

我的系统有tomcat 7，所有的填充物都在webapp下。文件结构为

webapps/WelcomeForm/web/WelcomeForm.html WEB-INF/web.xml lib/classes/hello/HelloWorldServlet.java HelloWorldServlet.class

Web 文件夹包含 WelcomeForm.html。WEB-INF 保存 web.xml。lib 包含 servlet-api.jar 和 classes 包含 HelloWorldServlet.java。hmtl 文件运行良好，但我无法运行 java 文件，因为它返回消息：

HTTP 状态 404 - /你好

类型状态报告

留言/你好

描述 请求的资源 (/hello) 不可用。

文件的代码如下：

WelcomeForm.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Welcome Form</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body>
           <form method="POST" action="<%=request.getContextPath()%>/hello">
        <font size="10" color="red">Hello World!</font><BR>

     Type your first name and click submit button <input TYPE=TEXT NAME="username" SIZE=20>
            <P><input type="submit" value="Submit">

       </form> 

    </body>
</html> 
```

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <servlet>
        <servlet-name>HelloWorld</servlet-name>
        <servlet-class>hello.HelloWorldServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>HelloWorld</servlet-name>
        <url-pattern>/hello</url-pattern>
    </servlet-mapping>
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
</web-app> 
```

HelloWorldServlet.java

```
package hello;

import java.io.IOException; 
import javax.servlet.ServletException; 
import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.*;
import javax.servlet.http.*;
import javax.servlet.http.HttpServlet; 
import javax.servlet.http.HttpServletRequest; 
import javax.servlet.http.HttpServletResponse; 
import java.io.PrintWriter;

public class HelloWorldServlet extends HttpServlet {
  public void doGet(HttpServletRequest request, HttpServletResponse response)
      throws ServletException, IOException {
response.setContentType("text/html");

      doPost(request,response);
      }

   public void doPost(HttpServletRequest request, HttpServletResponse response)
  throws ServletException, IOException {
    String name = request.getParameter("username");
    PrintWriter out = response.getWriter();
    out.write("Your Name is :" );
    out.print(name);

  }    
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:01:26.310

你的树不正确。webapp 的文件夹（或war）必须放在Tomcat 的webapps 文件夹中。

直接在 webapp 的根文件夹下（`Welcome form`在你的情况下，但你真的应该避免文件夹名称中的空格，因为它们必须在 URL 中编码并且使事情变得更加困难），必须有一个名为`WEB-INF`.

servlet-api.jar 不得位于 WEB-INF/lib 文件夹中。Tomcat 显然已经在其类路径中包含了这个 jar。

如果 webapp 的文件夹名称是`Welcome form`，为什么要使用 URL `/labs/lab10/WelcomeForm/`。网址应该是`/Welcome form/...`

在 web.xml 文件中，`<servlet-class>`元素必须是 servlet 类的完全限定名。因此，如果该类名为 HelloWorldServlet 并且位于 com.foo.bar 包中，则该元素必须包含`com.foo.bar.HelloWorldServlet`.

当然，该`<servlet-mapping>`元素用于将给定的 servlet 映射到 URL（或一组 URL）。因此，您应该使用此 URL 来调用您的 servlet：[http://hostname/Welcome](http://hostname/Welcome) form/HelloWorldServlet。

简而言之，你错了。您应该重新阅读有关 servlet 和 Web 应用程序的书籍或教程。这是给你的： http: [//docs.oracle.com/javaee/5/tutorial/doc/bnadp.html](http://docs.oracle.com/javaee/5/tutorial/doc/bnadp.html)

# android - Eclipse Android 中的验证错误

> ID：10461975
> 
> 赞同：0
> 
> 时间：2012-05-05T12:46:23.233
> 
> 标签：android, android-layout, android-ndk, verifyerror

我配置了eclipse Helios Service Release 2，eclipse正确下载并配置了ADT和SDK，我将旧项目导入新配置的开发环境，没有显示错误。在一项活动中，我正在创建另一个类的对象，该对象给我一个异常为 "VerifyError" ，我在项目中检查了我的 JDK 并 Eclipse 它的 2.2 ，我还检查了我的项目库也有 "Android.jar" ，但不要'不知道我做错了什么，我第一次遇到这种类型的问题，当我调试我的代码和控制到达我正在创建另一个类的对象的行时，我按 f6 它卡住并说“找不到源代码”，请指导我在哪里编码错误。. . 我将不胜感激，有关错误的详细信息，请参见附件图片。. .![在此处输入图像描述](../Images/6e4a45e31ee1f8e078618f61165cabfb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:14:14.987

在进行 Android ADT 和 Java 更新后，我的项目也遇到了类似的问题。

尝试以下步骤：

1.  在您的 Android 项目中删除指向您的外部库的链接。
2.  将所有外部库（包括 Google Ad 库）移动到 Android 项目中的 \libs 文件夹。
3.  重新链接您的库，这些库现在存在于 Project\libs 目录中。

希望这会有所帮助。

# css - 无情地为网络压缩大图像？

> ID：10461976
> 
> 赞同：1
> 
> 时间：2012-05-05T12:46:26.897
> 
> 标签：css, image, html, optimization, photoshop

我有一个非常大的背景图像（大约 940x940 像素），我想知道是否有人有压缩比 Photoshop 可以处理的这么大的文件的提示？Photoshop 中没有严重质量损失的最佳压缩格式是 PNG 8 (250 KB)；有谁知道比这更进一步压缩图像的方法（也许在保存PNG后压缩它）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T16:10:06.977

它是什么图像，这会影响你应该如何压缩它？

如果是通过 jpegmini.com 运行照片，如果是更多基于图标的 PNG 是更好的选择，并且有许多工具可以提供帮助，例如 ImageOptim、pngmini.com、pngquant，（这里有一些其他的 - [http://www. phpied.com/png-优化工具/](http://www.phpied.com/png-optimization-tools/)）

如果它是矢量，您可以将其转换为 SVG - 这对于某些浏览器来说将是一个问题，但您可以优雅地降级。

最后，如果它是类似渐变的东西，你可以用 CSS 替换它并为其他浏览器降级吗？

给我们看图片，我们可以给你更好的提示

# cocoa - 使自定义 NSSegmentedCell 看起来被抑制

> ID：10461977
> 
> 赞同：1
> 
> 时间：2012-05-05T12:46:39.720
> 
> 标签：cocoa, interface-builder

我已经子类化`NSSegmentedCell`和覆盖`-(void)drawSegment:(NSInteger)segment inFrame:(NSRect)segmentFrame withView:(NSView *)controlView`，并且能够为选定和未选定的单元格绘制单元格内容。

然而，根据 Interface Builder，“Capsule 风格”在 Lion 中已被弃用，我将其更改为下一个最好的**“纹理圆形”。模式是“选择任何”。现在无论是在 IB 还是在代码中，我似乎都无法在选择时使该段看起来被抑制。** 我在这里讨论背景，自定义图标本身切换得很好。

（我试图模仿 Xcode 4 中“视图”分段控件的确切外观）。

# android - 如何在 Android 中以图形方式显示数量？

> ID：10461981
> 
> 赞同：0
> 
> 时间：2012-05-05T12:46:58.280
> 
> 标签：android, graphics, colorbox, draw

我正在开发一个要在矩形中显示数量的应用程序。以下是我需要的。我有 2 个值，比如 totalMoney 和 usedMoney。我想在 2 种颜色的矩形框中显示剩余的钱（即 totalMoney - 花的钱）。

像这样：

```
|======================| 
|///////////|          |
|////50%////|          |   
|///////////|          |
|======================| 
```

这个矩形将在自定义视图中，与其他组件（如 textview 等）协作。

我如何在 Android 中获得这个？我正在使用 Android 2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T12:49:18.113

你需要一个[ProgressBar](http://developer.android.com/reference/android/widget/ProgressBar.html)。

这是一个自定义示例。

```
 <ProgressBar style="?android:attr/progressBarStyleHorizontal"
      android:layout_width="fill_parent"
   android:layout_height="7dip"
  android:id="@+id/pop1000Bar"
  android:max="1000"
  android:progress="500"
  android:progressDrawable="@drawable/progressbarlayers"
  >
  </ProgressBar> 
```

progressbarlayers 是一个 xml 文件，它定义了我希望进度条的外观。这是我的设置方式。

```
<?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

<item android:id="@android:id/background">
    <shape>
        <corners android:radius="5dip" />
        <gradient
                android:startColor="#ff9d9e9d"
                android:centerColor="#ff5a5d5a"
                android:centerY="0.75"
                android:endColor="#ff747674"
                android:angle="270"
        />
    </shape>
</item>

<item
    android:id="@android:id/progress"
>
    <clip>
        <shape>
            <corners
                android:radius="5dip" />
            <gradient
                android:startColor="#A9F505"
                android:endColor="#FFF700"
                android:angle="270" />
        </shape>
    </clip>
</item>

<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
        <size android:height="3dip"/>

            <gradient
                    android:startColor="#80ffd300"
                    android:centerColor="#80ffb600"
                    android:centerY="0.75"
                    android:endColor="#a0ffcb00"
                    android:angle="270"
            />
        </shape>
    </clip>
</item>
<item
    android:id="@android:id/progress"
>
    <clip>
        <shape>
            <corners
                android:radius="5dip" />
            <gradient
                android:startColor="#A9F505"
                android:endColor="#FFF700"
                android:angle="270" />
        </shape>
    </clip>
</item>

</layer-list> 
```

它看起来像这样：

![在此处输入图像描述](../Images/3756d54d00e0879de0a83490e31e76b2.png)

但是你可以让它看起来像你需要的任何东西。

**编辑：**有很多方法可以让你获得文字。如果您的父布局是RelativeLayout，您可以在进度条顶部堆叠一个TextView，并在每次更新进度时在文本视图上调用setText。可能更好的方法是子类 ProgressBar 为您绘制它。[这是一个例子](http://colintmiller.com/2010/10/how-to-add-text-over-a-progress-bar-on-android/)。他们只是创建了一个扩展 ProgressBar 的新视图，并覆盖 onDraw 以每次在画布上绘制一些文本以及绘制条形图和背景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:09:29.950

最灵活的方法是做一个CustomView。

使用 ImageView 作为基类并覆盖**onDraw**

onDraw 给你一个画布，你可以画你喜欢的东西。

# c# - Silverlight 与 Java Applet 在 32 位 / 64 位机器上的互操作性

> ID：10461982
> 
> 赞同：0
> 
> 时间：2012-05-05T12:47:05.833
> 
> 标签：c#, silverlight, applet, java

从 write-once deploy 的角度来看，是否可以为 silverlight 进行一次开发，并且能够在 32 位和 64 位用户机器上毫无问题地部署？

Java applet 的同样问题，虽然我可以在这里读到它是不可能的：[Force java applet to run in 32-bit instead of 64-bit JRE](https://stackoverflow.com/questions/7714102/force-java-applet-to-run-in-32-bit-instead-of-64-bit-jre)

那么是否可以使用 Silverlight 但不能使用 Java 小程序，只是因为这个限制不能选择 Java 小程序？你能否确认这个选择？

更新：有人建议 JWS/JNLP ？但是他们不需要管理员权限来安装吗？小程序在浏览器中运行，不需要管理员权限，这是我项目的重要要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T13:15:47.167

我从未遇到过不能在 32 位或 64 位机器上使用相同 Java 代码的问题。主要区别在于，在 64 位 JVM 中，您可以使用更多内存，但除非您需要，否则这无关紧要。可能有一个只在一个平台上显示而不在另一个平台上显示的错误，但即使它没有出现，它仍然是一个错误。正确编写的纯 Java 应用程序没有理由不能在 32 位或 64 位平台上运行。

我可以告诉你，自从几家电影供应商改用银光后，我不得不取消订阅，因为他们都不能在 ubuntu 上工作。

# php - 刷新的横幅张

> ID：10461986
> 
> 赞同：0
> 
> 时间：2012-05-05T12:47:36.677
> 
> 标签：php, banner-ads

每次用户刷新页面时，我都会尝试显示随机横幅。我面临的问题是要再次显示第一个横幅并从数据库中获取横幅。我是 php..so 中的比格纳，因此建议了横幅刷新的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T12:58:18.887

您可以使用 PHP 的[rand](http://php.net/manual/en/function.rand.php)函数，将最小值设置为 0，将最大值设置为行数 - 1，这将用于随机选择横幅。

假设您使用的是 MySQL 数据库（显然您需要用自己的参数替换 MySQL 参数），我会这样做：

```
$conn = mysql_connect("localhost", "username", "password");
$db = mysql_select_db("database_name_here", $conn);
$query = mysql_query("SELECT * from banner_table);
$max = mysql_num_rows($query) - 1;
$image = mysql_result($query, rand(0, $max), "Image_Url_Column"); 
```

然后无论您的图像包含在哪里：

```
<img src="<?php echo $image; ?>" alt="Banner image" /> 
```

或者，如果您在 PHP 中输​​出整个元素：

```
echo "<img src=\"" . $image . "\" alt=\"Banner image\" />"; 
```

**更新：**如果同时显示 3 个横幅，也许你可以这样做：

```
$conn = mysql_connect("localhost", "username", "password");
$db = mysql_select_db("database_name_here", $conn);
$query = mysql_query("SELECT * from banner_table);
$rows = mysql_num_rows($query);

$bannerToRetrieve; //the banner (database row number) to be retrieved from database
$alreadyRetrieved = array(); //holds values of previous numbers generated by rand() so the same banner isn't output again

for($i = 0; $i < 3; $i++)
{

    //Only set $bannerToRetrieve to a row that hasn't already been called (stored in $alreadyRetrieved)
    do
    {
        $bannerToRetrieve = rand(0, $rows - 1);
    }
    while(in_array($bannerToRetrieve, $alreadyRetrieved)); //if number is in array, it will generate another number

    $image = mysql_result($query, $bannerToRetrieve, "Image_Url_Column");
    echo "<img src=\"" . $image . "\" alt=\"Banner image\" />";

    $alreadyRetrieved[] = $bannerToRetrieve;
} 
```

$image 变量表示要加载的图像文件的文件名或 URL，例如“banner1.png”。你是这样设计系统的吗？

# vim - vim：如何删除空格直到第一个字符？

> ID：10461987
> 
> 赞同：8
> 
> 时间：2012-05-05T12:47:37.477
> 
> 标签：vim

我有这样的一行：

```
 foobar 
```

如您所见，第一列和“foobar”之间有很多空格。如果我在第一列中有光标，是否有任何键绑定可以删除空格直到'foobar'？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-05T12:50:58.347

`d``w`

如果您在第一列，将删除所有空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-05T12:50:03.053

```
dtf 
```

删除直到 F

~~没有其他简单的命令。您可以使用正则表达式，但这样写起来会更痛苦。~~

我的错，@Mat 的回答更好（`dw`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-05T12:56:29.560

简单的答案是

```
dw 
```

...执行 [d]elete [w]ord。如果要在所有“foobar”出现之前删除整个文档中的所有空格：

```
:%s/^\s*foobar/foobar/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T16:01:58.807

采用`:%s/\s\+$//e`

\s 代表空格和制表符+查找一个或多个出现

[您可以在删除不需要的空格](https://vim.fandom.com/wiki/Remove_unwanted_spaces)中找到更多详细信息

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-05T12:52:09.847

方式1：去线，然后`:s/^ *//g`

方式2：转到该行的第一个空格并按`dw`

# asp.net - 在没有代码隐藏文件的情况下调试 ASP.NET

> ID：10461988
> 
> 赞同：0
> 
> 时间：2012-05-05T12:47:48.817
> 
> 标签：asp.net

我想知道如何在不使用 ASP.NET 中的 C# 或 VB 等代码的情况下完成与数据库的任何接口？

实际上，我正在尝试调试需要进一步更新/增强的应用程序，但似乎 aspx 页面没有 .cs 或 .vb 文件。在标题中，只提到继承某种功能，如“user_changepass”，但是当我在 VS 中使用搜索功能（对于整个解决方案）时，我找不到特定的功能，以便更好地编辑/理解。

在文件夹中也只包含 JS 脚本、CSS 文件、图像、配置文件等。没有关于查询脚本等的内容。

希望有一些想法可以阐明。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T20:53:50.717

我知道答案为时已晚，但由于这篇文章仍然开放，我认为这可能会帮助遇到此类问题的其他人。在上述情况下，您最好的选择是使用反射器或任何其他反编译工具（如 dotpeek）来反编译 DLL 以重新创建源代码。类似的帖子[如何在没有代码的情况下调试 asp.net 程序？](https://stackoverflow.com/questions/13386273/how-do-i-debug-an-asp-net-program-without-code-behind)

# jquery - 根据条件启用/禁用按钮显示警报两次

> ID：10461991
> 
> 赞同：1
> 
> 时间：2012-05-05T12:48:19.813
> 
> 标签：jquery

我连续有两个输入字段和两个按钮。就像在一个页面中有 3 行或更多行一样。对于每一行，只有当两个输入字段具有任何值时，我才需要启用这两个按钮。我为这样的两个按钮提供了 id。

```
<a href="#" style="margin: auto;" id="first_link"></a>
<a href="#" style="margin: auto;" id="second_link"></a> 
```

在jquery中，我给出如下：

```
$('#first_link').click(function() {alert("Some info will come soon")});
$('#second_link').click(function() {alert("new info will come soon")}); 
```

但是，所有行都会发出此警报（显示三行 3 个警报）。我怎样才能在该页面中为整个表格只显示一次警报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:11:17.853

试试`preventdefault`or `return false`，那是因为事件在冒泡：

```
$('#first_link').click(function(e) {
  e.preventDefault();
  alert("Some info will come soon")
 }); 
```

[http://www.quirksmode.org/js/events_order.html](http://www.quirksmode.org/js/events_order.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:12:04.613

```
$('#first_link').click(function(e) {
    e.preventDefault(); // will prevent the link's default behavior
    e.stopPropagation(); // will stop event bubbling
    alert("Some info will come soon");
});

$('#second_link').click(function(e) {
    e.preventDefault(); // will prevent the link's default behavior
    e.stopPropagation(); // will stop event bubbling
    alert("new info will come soon");
}); 
```

[**一个不同的例子。**](http://jsfiddle.net/heera/DqLwx/2/)

# java - 将图像旋转到“点”到鼠标位置

> ID：10461993
> 
> 赞同：2
> 
> 时间：2012-05-05T12:48:27.867
> 
> 标签：java, slick2d

我在坦克图像之上有一个枪图像。我希望枪指向鼠标位置，以便可以使用鼠标瞄准。原始枪图像将指向上方。我正在使用 Slick2D，它的图像类有一个旋转函数，它需要一个角度。我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-05T13:15:39.950

您可以通过询问 Input 对象来找到用户鼠标的位置。这是通过向 GameContainer 询问输入来完成的。

```
Input userInput = gameContainer.getInput();
float mouseX = userInput.getMouseX();
float mouseY = userInput.getMouseY(); 
```

鼠标和枪的位置可以用来确定枪需要面对的角度。我们可以想象在枪和鼠标之间画一条线并找到这条线的角度。这个角度是枪需要面对的角度才能“指向”鼠标。

```
Vector2f gunLocation = gun.getLocation();
float xDistance = mouseX - gunLocation.x;
float yDistance = mouseY - gunLocation.y;
double angleToTurn = Math.toDegrees(Math.atan2(yDistance, xDistance));
gunImage.setRotation((float)angleToTurn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T13:03:32.273

**瞄准是这样完成的：**

从坦克到鼠标的方向是这样的：

```
float deltaX = mouse.x - tank.x;
float deltaY = mouse.y - tank.y;

// The resulting direction
return (int) (360 + Math.toDegrees(Math.atan2(deltaY, deltaX))) % 360; 
```

只需将坦克的方向更新为当前鼠标位置，例如在`mouseMoved`事件中。

**旋转图像：**

查看堆栈溢出或 java doc: `"Graphics2D", "affine transform", "translation"`。也许你的引擎已经提供了一些库函数。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-17T03:37:44.017

以上述答案为基础..

因为 y 轴正在减少尝试：

```
float deltaX = mouse.x - tank.x;
float deltaY = tank.y - mouse.y; 
```

# web - Mozilla是否有任何扩展用于模拟拨号？

> ID：10461994
> 
> 赞同：1
> 
> 时间：2012-05-05T12:48:45.867
> 
> 标签：web, firefox-addon, google-chrome-devtools, development-environment

我想在低速互联网连接中模拟我的项目，所以我搜索一个扩展或

软件 ...

Mozilla 或 chrome 是否有任何扩展来测试低速互联网的网站...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:04:11.010

我不知道任何扩展，但是您不能只使用应用程序来限制您的浏览器速度吗？例如：[网络限制器](http://www.netlimiter.com/)。