# StackOverflow 问答 11411000-11411999

# autoconf - 如何在命令行中处理空格？如：GOMAKE=${GOGO}(white space here) build

> ID：11411003
> 
> 赞同：0
> 
> 时间：2012-07-10T10:08:02.453
> 
> 标签：autoconf

## 我想编译 thrift 0.8 以支持 go1(golang version 1)。在 go1 之前，有两个命令：goinstall 和 gomake，所以配置脚本中的行如下：

```
GOMAKE=${GOBIN}/gomake
GOINSTALL=${GOBIN}/goinstall 
```

* * *

## 但是从 go1 开始，“go install”和“go build”替换了“goinstall”和“gomake”，我发现有些人将 thrift 配置脚本更改为：

```
GOGO=${GOBIN}/go
GOMAKE=${GOGO} build
GOINSTALL=${GOGO} install 
```

* * *

## 但是当我尝试使用以下命令运行脚本时：./configure，我得到了：

```
./configure: line 18067: build: command not found 
install: missing file operand
Try `install --help' for more information.
checking for 6g... /6g
checking for 6l... /6l 
```

* * *

不确定，但我认为

```
"./configure: line 18067: build: command not found" 
```

意味着“GOMAKE=${GOGO} build”中的空白无法处理，对吗？任何人都可以帮助完成这项工作吗？谢谢

* * *

## 我尝试从以下位置编辑 configure.ac：

```
 GOGO=${GOBIN}/go
 GOMAKE=${GOGO} build
 GOINSTALL=${GOGO} install 
```

* * *

## 至

```
GOGO=${GOBIN}/go
GOMAKE="${GOGO} build"
GOINSTALL="${GOGO} install" 
```

* * *

然后重新生成配置脚本，并运行它。似乎修改的行被直接忽略了：

* * *

```
checking for go... /home/alex/go/bin/go
(*************checking goinstall and gomake should be here,but not)
checking for an ANSI C-conforming const... yes 
```

# android - 删除 webView 中的边距

> ID：11411009
> 
> 赞同：3
> 
> 时间：2012-07-10T10:08:15.837
> 
> 标签：android, webview

我的 web 视图有问题。正如您在图片上看到的那样，有白边。我想把那张照片填满我的屏幕。我怎么能这样做？这是图片： ![在此处输入图像描述](../Images/de22710a15624ae97bb315a585170dd4.png)

这是代码：

```
 WebView web = new WebView(getContext());
web.getSettings().setJavaScriptEnabled(true);
web.getSettings().setBuiltInZoomControls(true);

String imagePath = id;
String html = "<html><body><img src=\""+ imagePath + "\"></body></html>";
web.loadDataWithBaseURL("file:///mnt/sdcard/DinEgen/", html, "text/html","utf-8",null);
web.setPadding(0, 0, 0, 0);

web.setInitialScale(1);
web.getSettings().setJavaScriptEnabled(true);
web.getSettings().setLoadWithOverviewMode(true);
web.getSettings().setUseWideViewPort(true);
web.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
web.setScrollbarFadingEnabled(false); 
```

XML 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:weightSum="100">

        <android.support.v4.view.ViewPager
        android:id="@+id/presentation_viewPager"
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="95"

        />
    <LinearLayout
        android:id="@+id/presentation_indicatorLayout"
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="5"
        android:gravity="center"
        android:background="@drawable/choose_small_normal"
        >
    </LinearLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-10T11:11:29.040

用这个替换你的标签：

```
<body style='margin:0;padding:0;'> 
```

这是 web 视图中图像的另一个提示：添加适合屏幕宽度的图像的样式。适用于所有屏幕尺寸：

```
<style type='text/css'>
       img {max-width: 100%;height:initial;} div,p,span,a {max-width: 100%;}
       </style> 
```

# silverlight - 是否可以在silverlight5中显示IsolatedStorage路径

> ID：11411010
> 
> 赞同：3
> 
> 时间：2012-07-10T10:08:21.513
> 
> 标签：silverlight, silverlight-5.0, isolatedstorage

您能否告诉我是否有任何方法可以使用浏览器内类型的 silverlight5 应用程序显示隔离存储路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T14:53:18.757

隔离存储的完整路径通常无法以编程方式检索，至少在 Silverlight 中无法检索。

无法通过反射访问实例`m_AppFilesPath`中的成员，因为该字段是. 如果您尝试这样做，您很可能会收到.`IsolatedStorageFile``private``FieldAccessException`

如果您正在寻找隔离存储文件和目录的文件系统位置，请阅读[此 SO 答案](https://stackoverflow.com/a/9473343/650012)。

如果您想在运行应用程序时找出相对于隔离存储根目录的文件路径，AFAIK在[IsolatedStorageFile类中只有](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile%28v=vs.95%29.aspx)[GetFileNames 方法](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.getfilenames%28v=vs.95%29.aspx)，最好与[GetDirectoryNames](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.getdirectorynames%28v=vs.95%29.aspx)结合使用。

[原则上，也可以通过访问IsolatedStorageFileStream对象的](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.getdirectorynames%28v=vs.95%29.aspx)[Name](http://msdn.microsoft.com/en-us/library/system.io.filestream.name%28v=vs.95%29.aspx)属性来请求特定文件的相对文件路径，但是该属性仅在受信任的应用程序中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-17T22:30:17.607

是否可以在 WPF 应用程序中获取隔离的存储位置？我遇到了使用 VDI（虚拟桌面基础架构）的客户的问题。有时隔离存储会起作用，有时则不起作用。似乎它是随机的，我想尝试调试它。
他们正在使用漫游用户帐户。

# c# - ContentControl.Template 为空，即使它在 XAML 中

> ID：11411021
> 
> 赞同：0
> 
> 时间：2012-07-10T10:08:54.543
> 
> 标签：c#, wpf, controltemplate

也许标题让你感到困惑，但问题具体在这里：我有文件`XAML`（继承自）。并且我设置它是这样的：`ControlTemplate``MyType``ContentControl``Template``DataContext`

```
DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}" 
```

当我想从中获取`DataContext`时，`MyType`它第一次显示为 null。单击它（它是窗口中的矩形）后，它会变为我需要的对象。我搜索了所有的东西，我正在做的所有事件`LeftButtonDown`都没有`ApplyTemplate(),UpdateLayout()`方法。即使我称这些方法也无济于事。需要做什么？PS这`DataContext`是`Parent`这个项目的，我可以发送一个参数但必须有其他解决方案

这是`XAML`模板所在的一部分：

```
<Style TargetType="{x:Type s:Connector}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type s:Connector}">
                <Grid Name="grid" DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}}">
                    <Border BorderBrush="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, 
                        Path=BorderBrush}" x:Name="border" BorderThickness="2" Background="Transparent">        
                        <Image Source="/DiagramDesigner;component/Resources/1337238611_port.png"/>
                    </Border>
                    <Rectangle Fill="Transparent" Margin="-2"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这就是我想要获取 DataContext 的地方：

```
public DesignerItem ParentDesignerItem // 
    {
        get
        {

            if (parentDesignerItem == null)
            {

                parentDesignerItem = this.DataContext as DesignerItem;
               // if (parentDesignerItem==null) parentDesignerItem = (this.Template.FindName("grid", this) as Grid).DataContext as DesignerItem;
            }

            return parentDesignerItem;
        }
        set
        {

            parentDesignerItem = value;
        }
    } 
```

不得不说，这`Style`是在哪`XAML`也。`Style``DesignerItem`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:50:22.793

问题出在我的算法 PS 中，我从中恢复了一些信息`SQL`，并添加了 2 倍`Connectors`的空参数，当我想访问它时，它给了我这些空对象。

# java - 如何检查当前线程是否不是主线程

> ID：11411022
> 
> 赞同：437
> 
> 时间：2012-07-10T10:09:00.187
> 
> 标签：java, android, multithreading

我需要检查运行某段代码的线程是否是主（UI）线程。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：779
> 
> 时间：2012-07-10T10:12:18.473

```
Looper.myLooper() == Looper.getMainLooper() 
```

如果返回 true，那么你就在 UI 线程上！

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-07-10T10:14:04.973

您可以使用下面的代码来了解当前线程是否是 UI/主线程

```
if(Looper.myLooper() == Looper.getMainLooper()) {
   // Current Thread is Main Thread.
} 
```

或者你也可以使用这个

```
if(Looper.getMainLooper().getThread() == Thread.currentThread()) {
   // Current Thread is Main Thread.
} 
```

[这是类似的问题](https://stackoverflow.com/a/8714032/519718)

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2015-12-02T20:42:23.867

最好的方法是最清晰、最稳健的方法：*

```
Thread.currentThread().equals( Looper.getMainLooper().getThread() ) 
```

或者，如果运行时平台是 API 级别 23 (Marshmallow 6.0) 或更高：

```
Looper.getMainLooper().isCurrentThread() 
```

请参阅[Looper API](http://developer.android.com/reference/android/os/Looper.html)。请注意，调用`Looper.getMainLooper()`涉及同步（请参阅[源代码](https://android.googlesource.com/platform/frameworks/base.git/+/android-6.0.0_r1/core/java/android/os/Looper.java#112)）。您可能希望通过存储返回值并重用它来避免开销。

   **归功于[greg7gkb](https://stackoverflow.com/a/3273018/2402790)和[2cupsOfTech](https://stackoverflow.com/a/34052602)*

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2016-12-22T10:02:55.980

总结解决方案，我认为这是最好的一个：

```
boolean isUiThread = VERSION.SDK_INT >= VERSION_CODES.M 
    ? Looper.getMainLooper().isCurrentThread()
    : Thread.currentThread() == Looper.getMainLooper().getThread(); 
```

而且，如果你想在 UI 线程上运行一些东西，你可以使用这个：

```
new Handler(Looper.getMainLooper()).post(new Runnable() {
    @Override
    public void run() {
       //this runs on the UI thread
    }
}); 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-27T10:24:02.083

**你可以检查**

```
if(Looper.myLooper() == Looper.getMainLooper()) {
   // You are on mainThread 
}else{
// you are on non-ui thread
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-08-27T13:47:00.587

请允许我以此作为开头：我承认这篇文章有“Android”标签，但是，我的搜索与“Android”无关，这是我的最佳结果。为此，对于登陆这里的**非 Android** SO Java 用户，不要忘记：

```
public static void main(String[] args{
    Thread.currentThread().setName("SomeNameIChoose");
    /*...the rest of main...*/
} 
```

设置好这个之后，在代码的其他地方，你可以很容易地检查你是否要在主线程上执行：

```
if(Thread.currentThread().getName().equals("SomeNameIChoose"))
{
    //do something on main thread
} 
```

在记住这一点之前我已经搜索过有点尴尬，但希望它可以帮助其他人！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-10T10:18:09.077

you can verify it in android ddms logcat where process id will be same but thread id will be different.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-01-16T08:00:38.063

`Xamarin.Android`端口： ( *`C#`*)

```
public bool IsMainThread => Build.VERSION.SdkInt >= BuildVersionCodes.M
    ? Looper.MainLooper.IsCurrentThread
    : Looper.MyLooper() == Looper.MainLooper; 
```

用法：

```
if (IsMainThread) {
    // you are on UI/Main thread
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2022-01-09T10:07:56.897

**首先检查它是否是主线程**

> 在科特林

```
fun isRunningOnMainThread(): Boolean {
    return Thread.currentThread() == Looper.getMainLooper().thread
} 
```

> 在 Java 中

```
static boolean isRunningOnMainThread() {
  return Thread.currentThread().equals(Looper.getMainLooper().getThread());
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2022-03-01T08:21:13.320

只需记录这一行，它应该打印“main”。

**Thread.currentThread().name**

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-01-19T14:41:27.477

一条简单的 Toast 消息也可以作为快速检查。

* * *

## 回答 #12

> 赞同：-6
> 
> 时间：2016-11-29T13:36:23.203

你可以试试 Thread.currentThread().isDaemon()

# manpage - 要转换为联机帮助页的有效 Asciidoc（使用 a2x）

> ID：11411024
> 
> 赞同：4
> 
> 时间：2012-07-10T10:09:04.333
> 
> 标签：manpage, asciidoc

我想用 Asciidoc 为我的 CLI 脚本编写手册页并将其转换为

```
a2x --doctype manpage --format manpage MYMANPAGE.ASCIIDOC 
```

我找不到任何可以使用此命令成功转换为联机帮助页的 Asciidoc 示例。你能给我举个例子或提供一个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T10:28:10.097

找到了一个例子——来自 Asciidoc 源代码本身：

[http://code.google.com/p/asciidoc/source/browse/doc/asciidoc.1.txt](http://code.google.com/p/asciidoc/source/browse/doc/asciidoc.1.txt)

（不过，欢迎提供更多 Ascii-doc 格式的联机帮助页示例！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T01:29:45.973

除了提供了一个非常有用的示例的@ifischer 答案中的链接之外，我还想将读者引导至 asciidoc 文档中的以下页面：[http://www.methods.co.nz/asciidoc/chunked/ch24。 .html](http://www.methods.co.nz/asciidoc/chunked/ch24.html) _

它特别提到：

*   标题需要正确格式化（例如：PROGRAM(1)）

*   文档类型需要是“manpage”（例如：“:doctype: manpage”）

*   第一部分必须是“名称”。此部分的内容也必须正确格式化（例如：“program - ...”）

*   第二部分需要是“概要”。这部分的内容似乎可以是任何内容，尽管标准的联机帮助页做法是列出所有程序调用选项。

*   该文档当然必须是格式正确的 asciidoc 文档。

可以通过文档标题中的“：directives：”为手册页设置*可选*信息。

运行时`a2x`，它会根据名称部分和标题的内容自动命名输出的手册页。我相信它总是被命名为“name.x”，其中名称来自名称部分，x 是标题中的数字。

# java - 没有反向代理的 Jetty/Tomcat

> ID：11411028
> 
> 赞同：2
> 
> 时间：2012-07-10T10:09:22.530
> 
> 标签：java, tomcat, nginx, jetty

直接通过 Jetty 或 Tomcat 处理请求是否安全？还是只有反向代理（如 nginx）才能防止滥用（故意缓慢数据传输等）？

PS：ofcouse 我用 nginx 提供静态内容 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T21:58:49.117

是的，jetty 或 tomcat 都可以安全地暴露给整个世界，几年前被要求在它们面前部署 apache 的日子已经消失了。

话虽如此，您仍然需要设计您的应用程序并配置好任何容器以处理规模、防止滥用等。

jetty 用于许多地方，在生产环境中，服务大量请求而不会出现问题并且占用空间小

哎呀，码头甚至在安卓手机上运行良好

# asp.net - ASP.Net Web API 和 KnockoutJS

> ID：11411029
> 
> 赞同：0
> 
> 时间：2012-07-10T10:09:27.953
> 
> 标签：asp.net, knockout.js, asp.net-web-api

我正在开发一个 ASP Web API 项目并使用 KnockoutJS 作为客户端技术。据我所知，互联网上还没有这两种技术的示例项目或任何类型的资源。如果有人使用这两种技术进行开发，如果您能在此处提供一些链接（如果有在线资源），那就太好了。我提出这不是一个问题，而是将一些关于这些技术的在线资源放在一个地方（因为据我所知，还没有在线资源）。如果有人知道在架构中使用这两种技术的项目的任何来源，那对我来说将是一个很大的帮助（因为没有在线资源）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T17:35:50.323

您应该检查 upshot.js，Steve Sanderson 的用于与 WebAPI REST 服务交互的库。它旨在在构建单页应用程序时补充 knockout.js，促进视图模型 (knockout) 和后端 (WebAPI) 之间的通信。

这是一个相关的 SO 帖子： [我在哪里可以找到 Upshot.js 示例和文档？](https://stackoverflow.com/questions/9348165/where-can-i-find-upshot-js-examples-and-documentation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T16:29:54.107

我真的没有任何链接可以分享，但在服务器端 WebAPI 默认输出 JSON，而客户端/KnockoutJS 端你只是在使用 JSON。我使用 jQuery 的 .getJson() 方法并使用返回数据更新我的 KO 视图模型。

查看[John Petersen 的博客](http://codebetter.com/globalsearch/?cx=005178204031477491434:2bg5jtwgsfe&cof=FORID:9&ie=UTF-8&q=Web%20API&x=0&y=0&siteurl=codebetter.com/johnvpetersen/&ref=www.bing.com/search?q=john%2bv%2bpetersen%2bblog&go=&qs=n&form=QBRE&pq=john%2bv%2bpetersen%2bblog&sc=2-16&sp=-1&sk=&ss=2103j674291j9)，了解一些优秀的 Web API 示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T16:35:49.420

从技术上讲，Knockout.js 对访问 REST API 没有帮助，特别是[使用 JSON 的 Knockout](http://knockoutjs.com/documentation/json-data.html)。所以，是的，它工作得很好，而且我已经习惯了使用 Web API 没问题。有一个 Mapping 插件可帮助将数据映射到您的视图模型，这可能对您有用：http: [//knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

Backbone.js 旨在与 REST API（如 Web API）一起使用，并且有一个项目可以让 Knockout 与 Backbone 一起使用（https://groups.google.com/forum/?fromgroups#!topic/knockoutjs/SAESwAqjfK4）。我没用过，不知道好不好用。

# git - 在 Git 中添加一些文件并提交

> ID：11411030
> 
> 赞同：0
> 
> 时间：2012-07-10T10:09:29.817
> 
> 标签：git, github

我有一些文件

> 1、2、3、4、5、6、7、8、9、10

我只想提交文件 1-5，所以我添加了文件 1-5

> 要提交的更改：
> 
> （使用“git reset HEAD ...”取消暂存）
> 
> 1、2、3、4、5

并将文件 6-10 留在更改“未暂存以进行提交”列表中。

但是，当我想提交使用

> git 提交 -a

我也看到那些文件 6-10

> 要提交的更改：
> 
> （使用“git reset HEAD ...”取消暂存）

我认为当我手动添加文件 1-5 时，文件 6-10 也不会添加到“要提交的更改”列表中，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:12:42.763

```
git commit -a 
```

添加文件以及提交。它相当于：

```
git add -u .
git commit 
```

从手册页：

> OPTIONS -a, --all 告诉命令自动暂存已修改和删除的文件，但您没有告诉 git 的新文件不受影响。

你只想：

```
git commit 
```

仅提交已暂存的文件。

# powershell - Powershell 文档站点根目录

> ID：11411032
> 
> 赞同：0
> 
> 时间：2012-07-10T10:09:33.450
> 
> 标签：powershell, msdn, technet

我发现了一页 2010 年为 Powershell 版本 2 编写的 Powershell 文档。

[http://technet.microsoft.com/en-us/library/dd315303.aspx](http://technet.microsoft.com/en-us/library/dd315303.aspx)

该页面用于特定命令。我在哪里可以阅读版本 2 的其余文档？左侧边栏仅显示“TechNet 库”并且没有 Powershell 链接。

* * *

我找到了 Powershell 版本 1 的文档[http://technet.microsoft.com/en-us/library/hh848793](http://technet.microsoft.com/en-us/library/hh848793)

和版本 3 的预发布文档[http://technet.microsoft.com/en-us/library/bb978526](http://technet.microsoft.com/en-us/library/bb978526)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:34:29.533

在 v2 中，您可以使用 Get-Help -Online 参数获取任何给定 cmdlet 的帮助：

```
Get-Help <cmdletName> -Online 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:59:34.257

预发布的 Windows PowerShell 3.0 文档涵盖了 Windows PowerShell 2.0 和 3.0。新的 cmdlet 和参数以及新的行为都被清楚地标记。这在 Get-Command 之类的 cmdlet 的帮助主题中非常明显，它在 2.0 和 3.0 之间发生了显着变化。

我们将在每个页面的主题中添加一个“适用于”字段，以显示每个主题中涵盖的 Windows PowerShell 版本。

我认为这比去两个不同的文档集并比较它们更方便。让我知道这是否适合您！

谢谢，六月

June Blender [MSFT] 高级编程作家 Windows PowerShell 博客：http: [//blogs.msdn.com/PowerShell](http://blogs.msdn.com/PowerShell) Twitter：@juneb_get_help

# python - 在scrapy中刮擦后发送电子邮件

> ID：11411033
> 
> 赞同：5
> 
> 时间：2012-07-10T10:09:34.653
> 
> 标签：python, email, scrapy

**pipeline.py 代码**

```
class Examplepipeline(object):

    def __init__(self):
        dispatcher.connect(self.spider_opened, signal=signals.spider_opened)
        dispatcher.connect(self.spider_closed, signal=signals.spider_closed)

    def spider_opened(self, spider):
        log.msg("opened spider  %s at time %s" % (spider.name,datetime.now().strftime('%H-%M-%S')))

    def process_item(self, item, spider):
            log.msg("Processsing item " + item['title'], level=log.DEBUG)

    def spider_closed(self, spider):
        log.msg("closed spider %s at %s" % (spider.name,datetime.now().strftime('%H-%M-%S'))) 
```

在上面的爬虫代码中，会显示爬虫的开始时间和结束时间，但是现在爬虫完成后，我想收到来自scrapy的“爬取完成”的邮件。是否有可能做到这一点。如果可能的话，我们可以在 spider_closed 方法中编写该代码，任何人都可以分享一些有关如何执行此操作的示例代码。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T10:16:31.000

您是否查看过文档：

[http://doc.scrapy.org/en/latest/topics/email.html](http://doc.scrapy.org/en/latest/topics/email.html)

文档中的基本用法

```
from scrapy.mail import MailSender

mailer = MailSender()
mailer.send(to=["someone@example.com"], subject="Some subject", body="Some body", cc=["another@example.com"]) 
```

你也可以自己实现一些自定义的东西。例如，如果您想使用 gmail：

```
def send_mail(self, message, title):
    print "Sending mail..........."
    import smtplib
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEText import MIMEText
    gmailUser = 'mail_you_send_from@gmail.com'
    gmailPassword = 'password'
    recipient = 'mail_to_send_to'

    msg = MIMEMultipart()
    msg['From'] = gmailUser
    msg['To'] = recipient
    msg['Subject'] = title
    msg.attach(MIMEText(message))

    mailServer = smtplib.SMTP('smtp.gmail.com', 587)
    mailServer.ehlo()
    mailServer.starttls()
    mailServer.ehlo()
    mailServer.login(gmailUser, gmailPassword)
    mailServer.sendmail(gmailUser, recipient, msg.as_string())
    mailServer.close()
    print "Mail sent" 
```

就像这样称呼它：

```
send_mail("some message", "Scraper Report") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-18T19:40:45.353

我为自我推销道歉，但我最近创建了[yagmail](https://github.com/kootenpv/yagmail)：一个努力使发送 gmail 消息（文本、html、图像等）变得容易的包。

这是您需要连接的代码：

```
import yagmail
yag = yagmail.SMTP('mail_you_send_from@gmail.com', 'password') 
```

然后你用它来发送电子邮件：

```
yag.send('mail_to_send_to', 'Scraper Report', 'some message') 
```

好的是您不必将设置保留为文本，但您可以依靠操作系统的密钥环来获得真正安全和舒适的感觉。

它甚至可以是一个班轮（自动关闭）：

```
SMTP('mail_you_send_from').send('mail_to_send_to', 'Scraper Report', 'some message') 
```

# iphone - UITableView 为什么调用 UIScrollView 的委托方法？

> ID：11411034
> 
> 赞同：7
> 
> 时间：2012-07-10T10:09:39.410
> 
> 标签：iphone, objective-c, ios, uitableview

我有一个应用程序，其中我有一个`UITableView`内部 a `UIView`，它又在内部 a `UIScrollView`，所以层次结构变成这样：

`UIScrollView`-> `UIView`->`UITableView`

my里面的数据`UITableView`是正确填写的。

现在，我的问题是，当我滚动我`UITableView`的`UIScrollView's`委托方法`scrollViewDidEndDecelerating:`并被`scrollViewDidEndDragging::`调用时。

我不想要这种行为，我应该怎么做才能阻止这种行为？

请哪位大神帮忙，先谢谢了！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T10:19:03.527

UITableViewDelegate extends UIScrollViewDelegate. Hence the calling of the delegate methods.

To stop this you can set `tableView.tag = 1000;` when you alloc the tableView and in the UIScrollViewDelegate methods ( `scrollViewDidEndDecelerating: and scrollViewDidEndDragging::` )add this at the very begining:

```
if(scrollView.tag == 1000)
    return; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T10:19:27.090

Because UITableView inherits from UIScrollView. So it shows all the properties and behaviours of UIScrollView. If you dont want this then please do one thing.

Assuming you have another scrollview in your page.

in the `viewDidLoad` or from the `XIB` (if you have your tableview in the XIB), set a tag for your tableview.

in code,

```
self.objYourTableView.tag = 101; 
```

then in the scroll view delegate

```
- (void)scrollViewWillBeginDecelerating:(UIScrollView *)scrollView
  {
       if(!(scrollView.tag == 101))
       {
          // Go for your code to run.
       }
  } 
```

So that your code will skip if it called by the table view. Other cases it works perfect. Hope this will help you.

# c# - Oracle：无法从实体框架连接

> ID：11411036
> 
> 赞同：1
> 
> 时间：2012-07-10T10:09:44.943
> 
> 标签：c#, .net, oracle, entity-framework

我有一个 oracle 服务器，已经安装在远程服务器上。

我已经安装了 oracle 最新的提供程序，以便在带有实体框架的 Visual Studio 中使用它们。

但是当我尝试连接到服务器时，我得到了这个异常：

ORA-12560: TNS: 协议适配器错误。

我对甲骨文世界真的很陌生，我找不到问题所在，甚至找不到如何调试它。

`lsnrctl status`通过在端口 1521 上执行我的侦听器，我看到侦听器正在上升。

但是，我看到我有这样的安全性：“ `Security ON: Local OS Authentication`”，但是由于我在服务器和客户端之间没有共同的用户，这会造成一些麻烦吗？

我应该对我的用户拥有一些特殊权限吗？在本地，我可以将自己与 sqldeveloper 工具连接起来。

任何帮助将不胜感激

**编辑**

更多信息：服务器在 Windows 下运行，它启动了 OracleXETNSListener 服务。我忘了提，但服务器防火墙已关闭。

**编辑 2**

我试图在我的工作站上下载 oracle sql developer，并用完全相同的信息连接自己。（我刚刚看到实际上 sql developer 使用“base”连接而不是“TNS”，这似乎被英孚？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:59:24.020

我最后使用了 devart 连接器：http: [//www.devart.com/dotconnect/oracle/](http://www.devart.com/dotconnect/oracle/)

它在所有模式下（直接或正常）直接对我有用。如果我今天早上确实尝试过，我会浪费更少的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:31:12.787

您是通过 AD 使用您的 tns 名称还是在您的机器上本地使用？如果它是本地的，那么您需要确保在位于默认位置的 tns 名称文件中列出了正确的连接描述符 - 这取决于 Oracle 版本。

实体框架和连接到远程实例存在已知问题，但可以通过 al

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T12:42:23.143

使用 Oracle Provider，您的连接字符串应如下所示：

> 数据源 = *{serverAddress}* /xe;用户 ID = *{用户名}* ;密码 = *{密码}* ;

例子：

> 数据源=localhost/xe；用户ID=scott；密码=tiger

我建议您始终提及 Oracle 实例标识符（在 Express Edition 中始终为**xe**），因此您不必依赖 tns 配置设置。

# javascript - iPhone中的phonegap存储

> ID：11411041
> 
> 赞同：0
> 
> 时间：2012-07-10T10:09:56.440
> 
> 标签：javascript, iphone, ios5, jquery-mobile, cordova

我正在尝试保存一些数据并从数据库中获取该数据。

我已经从[这里](http://coenraets.org/blog/2011/10/sample-app-using-the-phonegap-database-api/#comment-92635)完成了所有工作。但我在这里没有得到列表视图。只是标题正在出现。

我希望我的应用程序是

![在此处输入图像描述](../Images/e6078214704f2e24d1be20db92349e78.png) 我得到的是这个！![在此处输入图像描述](../Images/6418224cfd073275b499f4cfc063213a.png)

不知道为什么，但控件不在 OnDeviceReady() 方法中！

编辑：这是我的 .js 文件的代码

```
var db;
var dbCreated = false;

alert("Hello 1 " );

var scroll = new iScroll('wrapper', { vScrollbar: false, hScrollbar:false, hScroll: false });

alert("Hello 2" );

document.addEventListener("deviceready", onDeviceReady, false);

alert("Hello 3" );

function onDeviceReady() 
{
 alert("Hello 4" );

db = window.openDatabase("EmployeeDirectoryDB", "1.0", "PhoneGap Demo", 200000);
if (dbCreated)
    db.transaction(getEmployees, transaction_error);
else
    db.transaction(populateDB, transaction_error, populateDB_success);
} 
```

这是我的html代码

```
 <!DOCTYPE HTML>
<html>
<head>
    <title>Employee Directory</title>

    <meta name="viewport" content="width=device-width,initial-scale=1"/>

    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/jquery.mobile-1.0rc1.min.css" />

  </head>

<body>

<div id="header" class="header">
    <h1>Employee Directory</h1>
</div>
<div id="header2">
    <h2>Employee List</h2>
</div>

<div id="wrapper">
    <ul id="employeeList" class="icon-list"></ul>
</div>

<div id="busy"/>Loading...</div>

    <SCRIPT >
        alert('Saving !!');
        </script>

    <script src="js/jquery.js"></script>
    <script src="js/jquery.mobile-1.0rc1.min.js"></script>
    <script src="js/employeelist.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-1.8.1.js">    </script>
    <script src="js/phonegap.js"></script>
    <script src="js/employeedetails.js"></script>
    <script src="js/reportlist.js"></script>
    <script src="js/iscroll.js"></script>

    <!--
<script src="js/phonegap.js"></script>
<script src="js/jquery.js"></script>
<script src="js/iscroll.js"></script>
<script src="js/employeelist.js"></script>

     -->
</body>

</html> 
```

M 只得到一个弹出窗口 - 你好 1。

之后没有弹出窗口出现！

我试过使用

```
 <script src="js/iscroll.js"></script> 
```

并且还评论 var 滚动控件未进入设备就绪方法....

请帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:21:34.257

要么在`<script src="js/iscroll.js"></script>`嵌入的 .js 文件上方添加，..

或删除`var scroll = new iScroll()`

# sql - DB2 唯一约束、唯一索引和性能

> ID：11411042
> 
> 赞同：2
> 
> 时间：2012-07-10T10:09:59.613
> 
> 标签：sql, indexing, db2, unique, unique-constraint

我有一个需要两行唯一的表。他们可能会定期加入，所以我可能需要这些行的索引。

我检查了有关[Unique 约束](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.dbobj.doc/doc/c0020151.html)和[Unique Index](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=%2Fcom.ibm.db2.luw.sql.ref.doc%2Fdoc%2Fr0000919.html)的信息中心。

我想知道差异和性能影响。两者似乎都创建了一个索引。唯一索引允许一个空值。还有其他重要的区别吗？

这些索引是提高查询性能还是只是强制执行唯一性？出于性能原因，我应该添加一个额外的索引还是唯一索引足够好？不幸的是，我还没有足够的测试数据来尝试它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:01:53.700

唯一约束或唯一索引没有性能差异，任何一个都足够了。在查询处理期间，DB2 优化器会自动选取为维护唯一约束而创建的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:17:46.437

您将在本主题中找到解释：http: [//bytes.com/topic/db2/answers/185707-difference-between-unique-constraint-unique-index](http://bytes.com/topic/db2/answers/185707-difference-between-unique-constraint-unique-index)

一句话解释：

> 唯一索引是物理事物，而唯一约束是数据建模构造。如前所述，唯一约束是通过添加唯一索引来实现的（并且还需要 NOT NULL 条件）。

# postgresql - 在 postgres 数据库之间复制数据

> ID：11411050
> 
> 赞同：0
> 
> 时间：2012-07-10T10:10:27.387
> 
> 标签：postgresql, postgresql-9.0

我需要一次性将数据从 PostgreSQL 数据库中的一个表复制到另一个数据库中的相应表。没有那么多数据：大约 2500 行，8 列（一些数字，一些 varchar）。

我的第一个想法是简单地`pg_dump -a -t table -f output.file`然后`pg_restore`在另一个数据库上。然而，事实证明，`pg_dump`和源服务器的版本不匹配 - 我无法控制版本，所以升级不是一种选择：

```
pg_dump: server version: 9.1.2; pg_dump version: 9.0.5
pg_dump: aborting because of server version mismatch 
```

不幸的是，在 Postgres 版本 9 中，选项`-i`（忽略版本）不再可用。我**确实**知道我在做什么，但它仍然不会让我（自然地）。

我还有什么其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:20:11.700

我会使用[`COPY TO`](http://www.postgresql.org/docs/current/interactive/sql-copy.html)and `COPY FROM`。适用于任何一个版本，是实现此目的的最佳工具。

如果要使用`pg_dump`，则必须使用适当的版本。每个版本都有单独的可执行文件。在 Linux 上，您可以使用`which pg_dump`.

# ruby-on-rails - 在 Ruby on Rails 中获取模型及其关联的 JSON

> ID：11411051
> 
> 赞同：1
> 
> 时间：2012-07-10T10:10:30.197
> 
> 标签：ruby-on-rails, json, associations, has-many

我有 3 个模型。

```
 Venue :has_many :events
 Events :has_many :event_dates 
```

我吐了

```
 events: <%= venue.events.to_json.html_safe %> 
```

哪个工作正常。但我还需要每个事件中的事件日期数组。我确定有一种非常冗长的方法来比较 id，但我正在寻找一个优雅的解决方案。

致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:14:55.113

调用`to_json`模型时，您可以传递`:include`选项以包含关联（请参阅[文档](http://apidock.com/rails/ActiveRecord/Serialization/to_json)）：

```
venue.events.to_json(:include => :event_dates) 
```

# javascript - 类似于 css3 转换的 Javascript

> ID：11411053
> 
> 赞同：6
> 
> 时间：2012-07-10T10:10:39.160
> 
> 标签：javascript, jquery, css, css-transitions

我想做一些类似`-moz-transition`效果的东西，给我一个动画旋转图片。或将图片从包装底部移动到顶部。

为了澄清我想看看[这个链接](http://demo.scripteers.com/expressive/)，看看滑块下的四张图片。

它使用`-moz-transition`CSS3 效果，但我想用 js 或 jQuery 来制作动画，即使在 IE 中也是如此。

有什么插件吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T18:34:55.507

jQuery`.animate()`将以跨浏览器的方式执行此操作。

```
$( '.button' ).animate( { top: '-=50' }, 400 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:15:21.920

[本教程](http://www.impressivewebs.com/css3-transitions-javascript/)似乎完全符合您的需求。

# html - 渲染 HTML 页面

> ID：11411062
> 
> 赞同：1
> 
> 时间：2012-07-10T10:10:51.407
> 
> 标签：html

这是我的html页面。

```
<body>
<div id="form1">
    <root xmlns:NS='www.yembi.com'>
    <NS:ENTRY Action='Users'>
    <div class="colm1">
        <NS:DISPLAY datafield="FirstName"></NS:DISPLAY>             
    </div>
    <div class="colm2">
        <NS:Text datafield='FirstName'/>
    </div>
    <div class="colm1">
        <NS:DISPLAY datafield="MiddleName"></NS:DISPLAY>
    </div>
    <div class="colm2">
        <NS:Text datafield='MiddleName'/>
    </div>
    <div class="colm1">
        <NS:DISPLAY datafield="LastName"></NS:DISPLAY>
    </div>
    <div class="colm2">
        <NS:Text datafield='LastName'/>
    </div>
    <div class="colm1">
        <NS:DISPLAY datafield="Phone"></NS:DISPLAY>
    </div>
    <div class="colm2">
       <NS:Text datafield='Phone'/>
    </div>
    <div class="colm3">
        <NS:BUTTON ></NS:BUTTON>
    </div>
    </NS:ENTRY>
    </root>
</div> 
```

我想把这个 html 放到一个临时变量中。所以尝试如下

```
var Text = $("#form1").html(); 
```

我得到了完整的 html 内容，但有一些例外。它不显示 div 属性中的双引号。

我得到以下输出：

```
<ROOT xmlns:NS='www.yembi.com'>
    <NS:ENTRY Action='Users'>
    <DIV class=colm1>
        <NS:DISPLAY datafield="FirstName"></NS:DISPLAY>             
    </DIV>
    <DIV class=colm2>  // Here it automatically removes the double quotes. how to retain this double quotes ?
        <NS:Text datafield='FirstName'/>
    </DIV>
    <DIV class=colm1>
        <NS:DISPLAY datafield="MiddleName"></NS:DISPLAY>
    </DIV>
    <DIV class=colm2>
        <NS:Text datafield='MiddleName'/>
    </div>
    <DIV class=colm1>
        <NS:DISPLAY datafield="LastName"></NS:DISPLAY>
    </DIV>
    <DIV class=colm2>
        <NS:Text datafield='LastName'/>
    </DIV>
    <DIVclass=colm1>
        <NS:DISPLAY datafield="Phone"></NS:DISPLAY>
    </DIV>
    <DIV class=colm2>
       <NS:Text datafield='Phone'/>
    </DIV>
    <DIV class=colm3>
        <NS:BUTTON ></NS:BUTTON>
    </DIV>
    </NS:ENTRY>
    </ROOT> 
```

如上所述，它会自动删除 DIV 中的双引号。如何保留这个双引号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:14:07.437

我怀疑您使用的是 jQuery 或等效的：

请参阅文档中的此处：“此方法使用浏览器的 innerHTML 属性。某些浏览器可能不会返回与原始文档中的 HTML 源完全相同的 HTML。例如，如果属性值仅包含字母数字，Internet Explorer 有时会省略属性值的引号人物。”

[http://api.jquery.com/html/](http://api.jquery.com/html/)

所以这真的取决于浏览器。您可以使用 javascript 正则表达式来确保引号在您需要的位置： [Regex to put quotes for html attributes](https://stackoverflow.com/questions/6622483/regex-to-put-quotes-for-html-attributes)

# java - DB2 中的 ERRORCODE=-4461，SQLSTATE=42815

> ID：11411066
> 
> 赞同：13
> 
> 时间：2012-07-10T10:10:55.603
> 
> 标签：java, sql, db2

我已经将一些数据从模式 A（表 x）导出到`XML`，我正在读取`XML`数据并将数据插入到模式 B（表 y）中。在 20000 条记录之后插入数据时，它说

```
com.ibm.db2.jcc.am.SqlSyntaxErrorException: [jcc][t4][20111][11366][3.63.75] The value of a host variable is too large for its corresponding use.  Host variable=1\. ERRORCODE=-4461, SQLSTATE=42815
com.ibm.db2.jcc.am.BatchUpdateException: [jcc][t4][102][10040][3.63.75] Batch failure. 
```

该批次已提交，但该批次的单个成员至少发生了一次异常。

我比较了表 x 和表 y 中对应列的数据类型，它们是相同的。对于源和目标中的标识（自动增量）col 和 LONG VARCHAR，它是 BIGINT。

请帮助解决此问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-04T13:05:41.390

我曾经遇到过类似的问题。我解决了将队列大小添加到 XML 中的问题。在我的情况下是这样的：

```
<task>
   <name>Ventas MCC</name>
   <queueSize>100</queueSize>
   <queueNames>trashQueue</queueNames>
   <queryTasks>
     <queryTask>...</queryTask>
   </queryTasks>
</task> 
```

使用 queueSize 可以批量启动查询。

# c# - 记事本在幕后的作用与 PRINT 命令有何不同？

> ID：11411067
> 
> 赞同：5
> 
> 时间：2012-07-10T10:11:05.487
> 
> 标签：c#, .net, printing

`PRINT`我需要以与命令相同的方式将内容发送到 C# .NET 中的打印机。

我有捆绑了[QLabel软件的 Godex 热敏打印机。](http://www.godexintl.com/product_content.aspx?id=9&cid=4)现在它可以选择将标签另存为命令，您可以使用命令提示符`PRINT`命令将其传递给打印机。该文件如下所示：

```
^Q80,3
^W100
^H10
^P1
^S3
^AD
^C1
^R2
~Q+0
^O0
^D0
^E35
~R200
^L
Dy2-me-dd
Th:m:s
AH,0,0,1,1,0,0,X
AH,744,0,1,1,0,0,X
AH,746,560,1,1,0,0,X
AH,0,550,1,1,0,0,X
AG,160,208,1,1,0,0,
AA,234,283,1,1,0,0,Haloo
E 
```

当我做这样的事情时，这有效：

```
net use LPT2 \\localhost\godexUsbPrinter /yes
print /D:LPT2 label.cmd 
```

它可以很好地打印出我的标签。

现在，如果我在记事本中打开它并打印，它只会打印我这个文本。

我想知道`PRINT`命令在幕后做了什么，我如何编写基于 C# 的程序来复制行为？因为当我实现打印逻辑时，它只是像记事本一样打印纯文本。

我知道我可以`PRINT`从 C# 调用带有 Process.Start 的命令，但我需要一直替换标签模板中的一些占位符值。我可以在磁盘上创建一个临时文件并打印它，但我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:15:33.270

老实说，问题标题是错误的。`PRINT`根本没有做任何壮观的事情，它只是将所有输入刷新到打印机。它是记事本，通过 Windows 的打印系统，发送各种命令用于分页和行结尾以及诸如此类的东西，最终发送您要打印的数据。您显示的代码是原始打印机数据，因此您必须将其“原始”而不是作为文本发送。[所以从技术上讲，它是这个问题](https://stackoverflow.com/questions/123154/sending-raw-data-to-fedex-label-printer)的副本。

[此处](http://support.microsoft.com/kb/322091/en-us)解释了如何执行此操作。它使用 P/Invokes 来`winspool.Drv`.

# facebook - Facebook 未在身份验证对话框中显示电子邮件 ID 信息

> ID：11411074
> 
> 赞同：0
> 
> 时间：2012-07-10T10:11:39.020
> 
> 标签：facebook, permissions, authorization

我已将 Facebook 与我的 Web 应用程序集成。

当 Facebook 授权对话框显示给用户时，它仅显示基本信息详细信息。没有显示电子邮件 ID。

它也用于更早地显示电子邮件 ID。它停止显示电子邮件 ID。

我错过了什么？FB 是否在身份验证对话框中进行了任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:12:51.493

You need to ask for 'email' permission. Check it out here:

[https://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

# php - 声音云错误

> ID：11411076
> 
> 赞同：1
> 
> 时间：2012-07-10T10:11:43.023
> 
> 标签：php, audio, soundcloud

这是我的redirect.php，我总是得到'HTTP 错误500（内部服务器错误）：服务器试图满足请求时遇到了意外情况。'

php代码：

```
require_once 'Services/Soundcloud.php';

// create client object with app credentials 
$client = new Services_Soundcloud('xxxxxxxxxxxxxxxxxxxxxxx');
$client->setAccessToken($_GET['code']);

// make an authenticated call
$current_user = json_decode($client->get('me'));
print $current_user->username; 
```

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:31:40.347

初始化时需要设置`clientID`,`clientSecret`和参数。`redirectURI``new Services_Soundcloud`

您的代码应如下所示：

```
index.php
<?php

// create client object with app credentials
include('Services/Soundcloud.php');
$client = new Services_Soundcloud('....', '....', 'http://my.redirect.com/url.php');
$authorizeUrl = $client->getAuthorizeUrl();

?>

<a href="<?php echo $authorizeUrl; ?>">Connect with SoundCloud</a> 
```

和重定向网址：

```
<?php

require_once('Services/Soundcloud.php');

// create client object with app credentials
$client = new Services_Soundcloud('.....', '.....', 'http://my.redirect.com/url.php');

try {
    $accessToken = $client->accessToken($_GET['code']);
    try {
        $me = json_decode($client->get('me'), true);
        var_dump($me);
    } catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
        var_dump($e->getMessage());
        exit();
    }

} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
    var_dump($e->getMessage());
    exit();
}

?> 
```

您可以从[开发人员页面](http://soundcloud.com/you/apps)`clientId`获取and`clientSecret`

您还可以查看[文档](http://developers.soundcloud.com/docs#server-side)以获取 PHP、Python、Ruby 和 JS 中的正确示例

您可以在此链接上查看上面的代码：
[soundcloud.itnews-bg.com/](http://soundcloud.itnews-bg.com/)

# jquery - 为什么执行此悬停的 mouseenter 部分，而不是 mouseleave？

> ID：11411085
> 
> 赞同：3
> 
> 时间：2012-07-10T10:12:14.357
> 
> 标签：jquery, hover, mouseevent

我正在为 jquery hover 使用[这个语法选项](http://api.jquery.com/hover/#example-1)。

这是我的代码：

```
$('mySelector')
    .hover(
        function(){
            $(this).html('<img src="images/myImage2.png" height="23" width="24" />');
        },
        function(){
            $(this).html('<img src="images/myImage1.png" height="23" width="24" />');
        }
    ); 
```

mySelector 引用的元素的原始文本是 mouseleave 选项 -`$(this).html('<img src="images/myImage1.png" height="23" width="24" />');`

mouseenter/mouseover 的第一个处理程序工作正常。但是第二个处理程序，用于 mouseleave/mouseout（应该恢复原始图像），永远不会执行。当我在 firebug 中跟踪它时，触发了 mouseover 事件，但没有达到第二个“function()”。

**编辑：**

为了清楚起见，我的 html 代码是这样的：

```
<div id="results">
   <span class="imageClass"><img src="images/myImage1.png" height="23" width="24" /</span>
</div> 
```

然后我的选择器是`"#results .imageClass"`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:16:41.540

这个问题的原因可能是**触发**事件的元素`mouseenter`（即`<img>`节点）在触发事件之前从 DOM 中移除`mouseleave`。事件由`mySelector`的事件处理程序捕获和处理，但`<img>`是事件的实际来源。因此，`mouseleave`事件不是由 new 触发是有道理的`<img>`，因为鼠标一开始就没有进入它。

澄清一下：事件处理程序绑定到的 DOM 节点（`mySelector`）与首先触发事件的节点（`<img>`）不同。因为`<img>`没有自己的事件处理程序，所以事件将[在 DOM 树中冒泡，](https://developer.mozilla.org/en/Gecko_DOM_Reference/Examples#Example_5:_Event_Propagation)直到遇到一个节点（在本例中为`mySelector`）。

事实证明，[adeno 的解决方案](https://stackoverflow.com/a/11411151/990877)确实有效，尽管他/她的回答不准确。这是一个工作示例：**[jsbin.com/ikolog](http://jsbin.com/ikolog/edit)**。

有用的资源：

*   [DOM 事件](https://developer.mozilla.org/en/DOM_Client_Object_Cross-Reference/DOM_Events)(MDN)
*   [事件传播示例](https://developer.mozilla.org/en/Gecko_DOM_Reference/Examples#Example_5:_Event_Propagation)(MDN)
*   如何[停止事件传播](https://developer.mozilla.org/en/XUL_Tutorial/More_Event_Handlers#Stop_Event_Propagation)(MDN)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:15:48.410

您正在替换整个元素，并且新元素没有绑定事件处理程序，并且不会与您的悬停功能一起使用，因为它与您最初绑定的元素不同，请尝试：

```
$('mySelector').hover(function(){
        $('img', this).prop('src', 'images/myImage2.png');
    },
    function(){
        $('img', this).prop('src', 'images/myImage1.png');
    }
); 
```

或者，如果这不是一个选项，请使用`on()`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T10:23:09.250

我同意 PPvG，他在[回答](https://stackoverflow.com/a/11412148/19679)中说：

> 这个问题的原因是触发 mouseenter 事件的元素（即节点）从 DOM 中删除。事件将 DOM 冒泡到 mySelector，在那里它被捕获和处理，但它是事件的源。因此，mouseleave 事件不是由 new 触发的（鼠标从一开始就没有进入它）是有意义的。

因此，作为解决方案，您可以使用`.attr('src','full_url_here')`. adeneo 在[他们的回答](https://stackoverflow.com/a/11411151/19679)中建议使用以下代码：

```
$('#myImg').hover(function()
    {
        $(this).attr("src","http://cdn1.iconfinder.com/data/icons/dellios_system_icons/png_128/css-grey.png");
    },
    function(){
        $(this).attr("src","http://cdn1.iconfinder.com/data/icons/dellios_system_icons/png_128/css.png");
    }
); 
```

附加的 HTML 代码：

```
<div id="mySelector">
    <img id="myImg" src="http://cdn1.iconfinder.com/data/icons/dellios_system_icons/png_128/css.png" />
</div> 
```

最后来个demo：http: [//jsbin.com/elofoc/7/edit#preview](http://jsbin.com/elofoc/7/edit#preview)

# c# - 如何将 .net 类序列化到磁盘

> ID：11411091
> 
> 赞同：2
> 
> 时间：2012-07-10T10:12:28.920
> 
> 标签：c#, .net

我正在尝试将对象缓存序列化到磁盘，以便下次加载程序时可以加载它。正在保存的类的特征之一是它包含对其他对象的引用。例如：我有一个存储远程 url、本地文件路径、是否已下载等的图像类列表。然后我将可见性绑定到下载的文件并将源绑定到本地文件路径。其他对象具有对此图像的引用，因此当下载图像时，它会更新一次，并且所有指向它的项目的所有绑定都会更新。

作为快速修复，我实现了一个二进制格式化程序，并且一切正常。我的所有列表都序列化到磁盘，当我重新加载它们时，所有引用都保留（创建了 IE 1 图像对象，并且使用它的所有内容都有一个引用，而不是反序列化，每次出现时都会创建一个新的 Image 实例）

我的问题是我应该使用什么样的 Serialier 来存储到磁盘而不破坏我的引用？我读过 BinaryFormatter 对于序列化到磁盘并期望它在不同版本中工作是一个糟糕的选择。尽管到目前为止我没有遇到任何问题，但我不想在一年后遇到问题并强迫我的所有用户重新获取他们所有缓存的元数据。

我不是 100% 确定所有不同的序列化程序是如何工作的，但我想如果我要使用 XML，我可能需要编写某种转换器。如果有帮助，我的所有图像对象都分配了一个 GUID，所以我对每个对象都有一些独特的东西。

更新：我刚刚发现了以下问题，它看起来类似于[通过 Serialize/Deserialize 维护对象引用](https://stackoverflow.com/questions/473182/maintain-object-references-through-serialize-deserialize) 谁能告诉我 Datacontractserializer 是否是跨不同版本的应用程序的长期序列化存储的好选择与 binaryformatter 的缺点相比？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:15:32.787

不需要任何转换器和东西，只需检查一下：

[http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T10:16:06.327

**MongoDb**可能有用。[有关C#](http://www.mongodb.org/display/DOCS/CSharp+Language+Center) 或其他类型的数据库，请参阅MongoDB： **[DB4Object](http://www.db4o.com/s/csharpdb.aspx)**

并且似乎对 SQLite 很有用。使用 blob 将图像存储为二进制。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-10T10:18:46.670

[SqlLite](http://system.data.sqlite.org/index.html/doc/trunk/www/index.wiki)可能会有所帮助，它易于使用。

# zend-framework - $_SERVER['ZEND_PHPUNIT_TESTS_LOCATION'] 在 Zend Studio 中未正确设置

> ID：11411095
> 
> 赞同：0
> 
> 时间：2012-07-10T10:13:00.713
> 
> 标签：zend-framework, phpunit, zend-studio

上周我在 Zend Studio 中设置了单元测试，它工作正常.. 直到经过一些重构后，我收到一个错误，在 ZendPHPUnit.php 中找不到以下文件：

```
/var/folders/Td/Tdnh++2KEdWAsk8Y0O4N0k+++TI/-Tmp-/zend.phpunit.UserMapperTest.php.2428213892936827201.php 
```

文件路径存储在 ZendPHPUnit.php 中的 $_SERVER['ZEND_PHPUNIT_TESTS_LOCATION'] 中

我检查了文件夹，发现zend.phpunit.UserrMapperTest.php.6031927106542896607.php（编号不同）

我有点绝望，所以我强迫它工作

```
$_SERVER['ZEND_PHPUNIT_TESTS_LOCATION'] = '/var/folders/Td/Tdnh++2KEdWAsk8Y0O4N0k+++TI/-Tmp-/zend.phpunit.UserMapperTest.php.6031927106542896607.php'; 
```

最终，在我处理了一些其他测试用例之后，问题自行解决了。现在，我再次重构了一些代码，问题又回来了。我的测试用例都不起作用。

重新启动 comp 没有帮助，Project -> Clean 没有帮助。我在运行 Snow Leopard 的 Mac 上。

关于造成这种情况的任何见解？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T14:57:19.973

问题是 PHPUnit 不能处理文件本身，而是处理**它动态创建的文件副本**并存储在动态创建的目录中。这些文件被修改为包含 PHPUnit 逻辑。这适用于测试文件本身以及**php.ini**（这会强制您在测试的主 php.ini 文件中加载扩展名，因为忽略了额外的 .ini 文件）。每次运行测试时，这些文件都将使用新的唯一名称（原始名称加上唯一标识符）**重新创建。**

我发现解决此问题的最佳方法是为测试创建启动配置并将它们保存为项目中的 .launch 文件（**右键单击 -> 运行为 -> 创建新的 PHPUnit 配置 -> 选择“共享文件”在通用选项卡中**）。一旦你有了启动配置，你可以通过在编辑器上打开并单击运行按钮来运行它。您会看到，每次运行它们后，每个已更改的启动文件上都会有如下一行（很容易查看配置是否在版本控制中）：

```
<mapEntry key="ZEND_PHPUNIT_TESTS_LOCATION" value="/var/folders/my/ph9spb0s45z5_11l9tqw256r0000gn/T/DefaultWorkspace.phpunit.AssignmentRequestControllerDateCriteriaTest.php.4951739174960507380.php"/> 
```

我通常只是将这个更改与我当时正在进行的任何其他更改一起提交。

文件更改并因此启动配置仍然有点烦人，但至少以这种方式，您的测试将始终运行，您不必担心必须手动重新运行，或清理项目或任何事情像那样。

# swing - 防止 JPanel 切断子组件

> ID：11411096
> 
> 赞同：1
> 
> 时间：2012-07-10T10:13:01.117
> 
> 标签：swing, jpanel, jython

我试图防止 JPanle 变得如此之小以至于它会切断它的子组件，是否有强制执行此操作？读完[这篇](https://stackoverflow.com/questions/849684/jpanel-size-by-inner-components)文章后，我尝试了（在 jython 中）：

```
frame= JFrame('example', size=(200,200))

pan = JPanel()
pan.add(JLabel('beer'))
pan.add(JButton('get one', actionPerformed=printer))
pan.setMinimumSize(panel.getPreferredSize())

frame.add(pan)
frame.visible = True 
```

但是，即使我将最小尺寸应用于框架，面板仍然可以缩小到它切断其组件（在 JFrame 或[此处）。](https://stackoverflow.com/questions/11408971/use-button-as-renderer-for-list)如何防止这种情况发生？（我假设我得到的首选大小不是我想要的，因为使用默认布局管理器它似乎是最大子组件的大小，但如果我将它更改为例如`GridBagLayout`它似乎变得更小 9apply minsize to frame 并尝试）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T13:17:44.500

您可以在您的 JFrame 上使用它（对不起，它是 Java，我不熟悉 Jython）：

```
frame.setMinimumSize(frame.getPreferredSize()); 
```

如果强制执行最小尺寸`LayoutManager`的内容窗格，您的代码可以工作。`JFrame`但是，默认情况下你会得到一个`BorderLayout`which 没有。如果您使用`frame.setMinimumSize(pan.getPreferredSize());`，它将不起作用，因为框架的大小包括其插图（即框架边框的大小），因此您设置的最小尺寸实际上太小了。

这是一个小演示，展示了如何使最小尺寸在 JFrame 上工作：

```
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestMinimumSizeOnFrame {

    protected void initUI() {
        JFrame frame = new JFrame("example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200, 200);

        JPanel pan = new JPanel();
        pan.add(new JLabel("Some nice beer"));
        pan.add(new JButton("get one"));
        frame.add(pan);
        frame.setVisible(true);
        frame.setMinimumSize(frame.getPreferredSize());

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestMinimumSizeOnFrame().initUI();
            }
        });
    }

} 
```

# macos - 光标在 Xcode 中移动太慢

> ID：11411097
> 
> 赞同：0
> 
> 时间：2012-07-10T10:13:07.780
> 
> 标签：macos, xcode4.3

我使用 XCode 4.3.2。移动插入符号非常慢，以至于当我需要到达屏幕上的给定位置时，我不得不使用鼠标。

其他应用程序运行正常。键盘灵敏度设置为最大速度。在 XCode 中，走 70 行需要 10 秒；在 TextEdit 中，需要 2.5 秒。

看起来它与上下文帮助有关。

这是 XCode 中的一个已知问题，有没有办法解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-21T15:16:08.630

它发生在 XCode 中打开的项目太多的地方。

# c++ - C++ double* 数组，测试分配

> ID：11411101
> 
> 赞同：1
> 
> 时间：2012-07-10T10:13:30.107
> 
> 标签：c++, arrays, pointers, null

我有一些疑问：我想测试在函数调用之前是否已经分配了一些数组，低和高。该函数从这个测试开始：

```
bool myMgr::compute(myInput *solvInput, double* low, double* high)
{
   if(high==NULL||low==NULL)
        return false;

   //...
} 
```

我在测试什么，我测试对了吗？

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:18:17.717

您正在测试这两个指针是否不为 NULL，如果堆分配器无法分配足够的内存，则将返回该指针，但除此之外您不能做出其他假设：

*   它们可以是`!= NULL`，但由用户初始化： double* ptr = (double*)5;
*   它们可能是也可能不是“数组”：您没有关于分配的元素数量的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:35:57.067

你提到分配。这是误导；通常的分配器*从不*返回空指针。`std::bad_alloc`如果没有足够的内存，它们会引发异常。

如果您提供某种可选行为，则使用这样的指针很有用；客户端代码可以传递一个空指针来指示它不需要您提供的功能。（当然，客户端代码可以自己进行测试，并且只有在两个指针不为空时才调用您的函数。哪种解决方案更可取很大程度上取决于上下文。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:18:50.257

是的，你所做的是正确的。但是您必须确保在声明期间（在调用方法中）已将指针初始化为 NULL - 否则，它们可能具有会通过此测试的垃圾值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T10:23:12.463

如果您有最新版本的 c++（来自 c++11），您应该使用`nullptr`而不是`NULL`：

```
if(high==nullptr || low==nullptr) 
```

而且您必须确保将指针设置为`nullptr`而不是`NULL`.

如果`nullptr`不可用，那么您正在做的事情很好，或者，您可以按照*SingerOfTheFall*在他的评论中写的那样做。

此外，您可以使用 user ，而不是使用数组并且必须依赖指针，`std::vector`这将允许您获得有关数组当前状态的更多信息，例如其当前大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T10:23:29.597

您无法检查指针是否指向有效的东西。

相反，您可以将数组作为引用传递，这可以确保函数将至少接收初始化参数，但最好是使用向量：

```
compute(std::vector<myInput> &solvInput, std::vector<double> &low, std::vector<double> &high) 
```

如果他们是 1:1 的话，甚至更好地在一个班级中分低

```
compute(std::vector<myInput> &solvInput, std::vector<minmax> &lowhigh) 
```

# python - 我希望我的 Django 项目使用 Python 2.7 而不是 2.6.8

> ID：11411115
> 
> 赞同：2
> 
> 时间：2012-07-10T10:13:54.597
> 
> 标签：python, django

我希望我的 Django 项目使用 Python 2.7 而不是 2.6.8。我安装了 2.7 和 Django 1.5。但我的项目使用默认的 Python 2.6.8。我怎样才能改变它？

**更新**：

这是我的配置：

```
<Directory "/var/www/html/a/">
 SetHandler python-program
 PythonPath "['/var/www/html/'] + sys.path"
 PythonHandler django.core.handlers.modpython
 SetEnv DJANGO_SETTINGS_MODULE a.settings
 PythonDebug On
</Directory> 
```

似乎`sys.path`获得了 2.6.8 的路径。这是 Django 看到的 Python 路径：

> ['/usr/lib/python2.7/', '/var/www/html/', '/usr/lib/python2.6/site-packages/pip-1.1-py2.6.egg', '/ usr/lib/python2.6/site-packages/django_transmeta-0.6.7-py2.6.egg', '/usr/lib64/python26.zip', '/usr/lib64/python2.6', '/usr /lib64/python2.6/plat-linux2'、'/usr/lib64/python2.6/lib-tk'、'/usr/lib64/python2.6/lib-old'、'/usr/lib64/python2\. 6/lib-dynload'、'/usr/lib64/python2.6/site-packages'、'/usr/lib64/python2.6/site-packages/gtk-2.0'、'/usr/lib/python2.6 /site-packages', '/usr/lib/python2.6/site-packages/setuptools-0.6c11-py2.6.egg-info']

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:53:22.987

尝试使用 VirtualEnv， [http ://pypi.python.org/pypi/virtualenv/](http://pypi.python.org/pypi/virtualenv/)

这将通过创建虚拟环境使您的任务易于管理，您可以在其中使用一个 python 版本进行 django 安装，而不会破坏依赖于其他 python 版本的其他应用程序。

# tcp - 如何确保端口是开放的

> ID：11411118
> 
> 赞同：1
> 
> 时间：2012-07-10T10:14:07.850
> 
> 标签：tcp

如何检查端口是否在 Windows 中打开。是否可以看到正在访问它的内容或在过去一段时间内访问过的内容？

# php - 不同语言的wordpress侧边栏内容

> ID：11411121
> 
> 赞同：2
> 
> 时间：2012-07-10T10:14:11.150
> 
> 标签：php, wordpress, web

我正在使用 wordpress 开发一个网站。我希望该网站的特定页面使用四种不同的语言（英语、西班牙语、法语和荷兰语）。我使用了一个名为**WP Native Dashboard**的插件。使用它我可以获取页面内容四种不同的语言。我使用组合框来选择语言并显示内容。这很好用...

我正在创建一个新页面，选择语言，并在其中编写内容。对于不同语言的相同内容，我只是在语言名称之外编写页面 ID，如下所示：

![在此处输入图像描述](../Images/11567d2491cd9270d495db85046f56f4.png)

主要问题是关于侧边栏、页脚和页眉内容。我有一组英语侧边栏、页脚和页眉。当我选择不同的语言（例如法语）时，侧边栏、页脚和页眉内容以英语显示。

如果我尝试用其他语言创建另一组侧边栏、页脚和页眉，并尝试创建一个名为法语左侧边栏的不同页面。在法语内容中，如果我选择如下所示的页面：

![在此处输入图像描述](../Images/c13e3b568d6e1173b284f95ccce6dba2.png)

.and 在网站上，当我选择语言作为以法语显示的英语侧边栏内容时。

所以我的问题是如何在选择来自组合框的不同语言时获得不同语言的侧栏内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:52:17.397

创建一个加载自定义侧边栏的新页面模板。还结帐[http://wpml.org/2011/06/how-to-build-different-sidebars-per-language/](http://wpml.org/2011/06/how-to-build-different-sidebars-per-language/)

# c# - 更改 IEnumerator 的属性 。当前的

> ID：11411122
> 
> 赞同：10
> 
> 时间：2012-07-10T10:14:14.573
> 
> 标签：c#, ienumerable

今天我非常惊讶地观察到以下行为：给定一个类

```
class Foo
{
    prop int FooNumber { get; set; }
} 
```

和这段代码

```
IEnumerable<Foo> foos = Enumerable.Range(0,3).Select(new Foo());

foreach (var foo in foos)
    foo.Bar = 5;

foreach (var foo in foos)
   Console.Write(foo.Bar);  // Writes 000 
```

初始化`foos`时`new List<Foo>{ new Foo(), new Foo(), new Foo() }`使循环写入“555”。

我的问题：为什么会发生这种情况，有没有办法在不使用的情况下规避这种情况`.ToList()`（需要评论，因为这里似乎不需要它）。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-10T10:16:57.803

发生这种情况是因为`foos`每次枚举它时都会动态生成。因此，在第一次迭代期间，您将在迭代结束后不再被任何对象引用的对象上设置属性值。第二次迭代适用于具有默认属性值的新构建的对象。

初始化`foos`到“持久”对象列表会改变事情，使用`.ToList()`也是出于同样的原因（构建“固定”列表并迭代两次；原始动态生成`IEnumerable`的列表仅迭代一次）。

确定你应该`.ToList()`在这里使用：一般来说，我觉得它*不需要*评论，因为不习惯多次迭代动态生成的序列（我相信许多代码分析工具都会警告这一点），但无论如何都要这样做写一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T10:18:50.723

发生的事情似乎很明显：每次枚举时，您都在实例化新的 Foo 对象。

如果您希望保留属性值 ( `Foo.Bar`)，那么您将不得不将 Foo 保留在*某处*，而 ToList() 是一种简单的方法。

# php - 为什么我的 php 文件在使用 RewriteRule 时无法找到外部文件（图像、css...）？

> ID：11411131
> 
> 赞同：0
> 
> 时间：2012-07-10T10:14:46.017
> 
> 标签：php, mod-rewrite

我正在使用以下 RewriteRules ：

```
RewriteRule ^([a-zA-Z0-9]+)$ page.php?p=$1
RewriteRule ^e/([a-zA-Z0-9]+)$ edit.php?p=$1 
```

第一个工作正常：输入 mysite.com/id 时，它会在服务器端加载 mysite.com/page.php?p=id。

第二个也可以：当我输入 mysite.com/e/id 时，它会加载 mysite.com/edit.php?p=id （如预期的那样）。但在这种情况下，edit.php 无法找到任何外部文件，例如我的 css 文件。

```
<link rel="stylesheet" type="text/css" href="style.css" /> 
```

执行以下任一操作时：

```
<link rel="stylesheet" type="text/css" href="../style.css" /> 
```

或者简单地删除 RewriteRule 中的目录，例如：

```
RewriteRule ^e_([a-zA-Z0-9]+)$ edit.php?p=$1 
```

它解决了这个问题。

现在我不明白为什么我的edit.php无法找到外部文件，即使它加载在服务器端（mysite.com/）的正确路径上，而不是像在额外目录中显示的url（在本例中为mysite 。来/ ）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:17:37.223

您可以为所有站点的路径使用基本 url，如下所示：

```
<base href="http://yoursite.com/blog/" /> 
```

或者

```
<base href="/blog/" /> 
```

然后从基础编写相对路径：

```
<a href="rule/foo/">...</a> 
```

另外，您必须格外小心那些“全部接受”模式，因为如果使用不当，它们可能会与样式表、图像和其他媒体发生冲突。将扩展名附加到模式或排除媒体可能是可能的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:15:40.103

使用时必须写完整路径而不是相对路径`mod_rewite`

**参考**

[apache mod rewrite 又](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)
[一个](http://www.workingwith.me.uk/articles/scripting/mod_rewrite)
[初学者指南](http://www.icewarp.com/support/online_help/1870.htm)

# iphone - 如何在可可应用程序中将击键发送到连接蓝牙的 iPhone

> ID：11411133
> 
> 赞同：0
> 
> 时间：2012-07-10T10:14:53.460
> 
> 标签：iphone, cocoa, bluetooth

我需要从可可应用程序向蓝牙连接的 iPhone 发送击键，就像“TypeToPhone”应用程序正在做的那样。请让我知道我该怎么做。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:58:32.847

这不是一件容易的事。我知道，因为我是 Type2Phone 背后的开发者之一。

不过，Type2Phone 确实支持 AppleScript。根据您的需要，您可以通过 Type2Phone 将字符汇集到您的 iPhone。

# iphone - 保存在 NSDocumentDirectory

> ID：11411135
> 
> 赞同：2
> 
> 时间：2012-07-10T10:14:56.937
> 
> 标签：iphone, ios, xcode

`NSDocumenDirectory`我的储蓄有奇怪的问题。这是一个预览：首先我选择图像（在我的`imagePickerViewController`）：

![在此处输入图像描述](../Images/f74cbfd685aa9504f4810b9f99624b44.png)

在我的`PreviewController`：

![在此处输入图像描述](../Images/a0ddffa740953adb60e1066a783e8305.png)

所以第一次尝试，没问题。

然后我重新访问`imagePickerViewController`添加另一个图像：

![在此处输入图像描述](../Images/535e301c4abd0993d9f9ccc53421f209.png)

在我的`PreviewController`：

![在此处输入图像描述](../Images/e93597049bb8bb1e5a4719f16004e313.png)

这就是问题发生的地方。在上图中，它从旧预览中重新复制了最后一张图像（如副本）。我不知道我在我的代码中做错了什么。但是当文件存在时我会保存它。请看：

```
for (int i = 0; i < info.count; i++) {
    NSLog(@"%@", [info objectAtIndex:i]);
    NSArray *paths = NSSearchPathForDirectoriesInDomains( NSDocumentDirectory,    NSUserDomainMask ,YES );
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"firstSlotImages%d.png", i]];
        if ([[NSFileManager defaultManager] fileExistsAtPath:savedImagePath]) {

            NSLog(@"file doesnt exist");

        } else {
            ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
            UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];
            //----resize the images
            image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)];

            NSData *imageData = UIImagePNGRepresentation(image);
            [imageData writeToFile:savedImagePath atomically:YES];

            NSLog(@"saving at:%@",savedImagePath);
        }
} 
```

我需要的是用新的图像重新添加相同的图像。和上次预览一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:28:19.603

这四张图像按它们在预览中显示的顺序传递，因此在第一个示例中，橙色猫排在第三位，在第二个示例中，橙色猫排在第四位。新图像没有保存，因为它是第三个，并且您已经有一个名为“firstSlotImages2.png”的文件。如果您在不检查文件是否存在的情况下重新保存每个图像，您应该得到您正在寻找的结果。

媒体信息中有一个键： `UIImagePickerControllerMediaURL`它返回一个 NSURL，将其转换为字符串并获取`lastPathComponent`. 使用它作为文件名保存到您要保存的目录。然后，您可以通过将相同的文件名保存在 NSMutableArray 或 NSMutableDictionary 中来保存对这些图像的引用

# php - 使用 php 网站进行分析跟踪

> ID：11411136
> 
> 赞同：5
> 
> 时间：2012-07-10T10:14:59.013
> 
> 标签：php, google-analytics

我最近将我的网站格式更改为 php（而不是 html），即我用 .php 扩展名重命名了所有 HTML 页面，并用我的 .htaccess 文件修复了链接。

我需要使用 Google 分析跟踪我的新 php 页面，因此我创建了一个单独的 php 文件，其中包含 Google 的 javascript 片段。我将它放在我网站的根目录，并在标签后使用以下代码将我的每个 php 标签链接到它`<body>`：

```
<?php include_once("analyticstracking.php") ?> 
```

我的问题是这似乎只适用于我的 index.php 页面。我的所有其他页面都找不到`analyticstracking.php`（在 Dreamweaver 中它说“'analyticstracking.php'不在本地磁盘上。获取”）

如果我将链接（通过添加“/”）更改为：

```
<?php include_once("/analyticstracking.php") ?> 
```

然后我的所有页面都可以找到该文件，但谷歌分析似乎没有跟踪我的活动。

我正在使用“分析 - 实时”来测试这一点。

这是我的网址 www.brp-architects.com。（目前使用

```
<?php include_once("/analyticstracking.php") ?> 
```

因为此代码带有“/”，允许我的所有页面找到我的跟踪代码 php 文件）。

我这样做的全部原因是我可以使用一段 PHP 代码通过获取代理服务器 ip 来检索我的网站访问者的 IP 地址：

```
<?
if (getenv(HTTP_X_FORWARDED_FOR)) {
    $ip_address = getenv(HTTP_X_FORWARDED_FOR);
} else {
    $ip_address = getenv(REMOTE_ADDR);
} 
```

?>

感谢您的回复！

这是我的 analyticstracking.php 文件中的跟踪片段：

```
<script type="text/javascript">

var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5434990-2']);
  _gaq.push(['_trackPageview']);
  setTimeout('_gaq.push([\'_trackEvent\', \'NoBounce\', \'Over 30 seconds\'])',30000);

(function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我的跟踪代码的链接直接位于开始的正文标签下：

```
<?php include_once("/analyticstracking.php") ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:23:23.897

如果它适用于**index.php**，那么**analyticstracking.php**脚本就可以了。

可能导致这种情况的原因是您将其包含在其他脚本中的方式。

只需确保该脚本的路径在其他脚本上是正确的。
确保包括这样的：

```
include($_SERVER['DOCUMENT_ROOT'].'PATH-TO-SCRIPT/analyticstracking.php'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:22:03.727

您可以通过多种方式解决此问题。首先，您可以更改 include_path 变量 [http://il.php.net/manual/en/ini.core.php#ini.include-path](http://il.php.net/manual/en/ini.core.php#ini.include-path)

[其次，您可以使用getcwd()](http://php.net/manual/en/function.getcwd.php)在 index.php 中初始化自己的全局变量

# git - 从其他开发人员本地 GIT 获取文件并添加到主存储库

> ID：11411140
> 
> 赞同：1
> 
> 时间：2012-07-10T10:15:11.710
> 
> 标签：git

我需要做一件简单的事情，但我找不到正确的方法......

我和其他开发人员正在云存储库上使用相同的 GIT 分支。他添加了一些文件，其中包含格式不正确并在本地提交但没有推送到云端的代码。

我想通过使用直接连接到他的`.git`文件夹来获取这些文件`git pull`。我知道在这个阶段，GIT 将为我创建一个远程分支和一个本地分支来保存这些文件。

我无法理解的是：

1.  我可以只提取特定文件吗？

2.  **如何将此文件添加到我正在处理的主分支'编辑它们然后将它们推送到服务器？**

顺便说一句：我想正确的方法是创建一个临时分支，从我的朋友机器推送到它，拉上我的机器，然后将其推送到云端，但是在我的工作场所提交格式不正确的代码是有问题的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:57:24.097

假设您可以连接到他的机器和`git clone`他的本地存储库，您将想要获取他的分支并创建一个本地跟踪分支。听起来您已经涵盖了这一点，但是为了后代：

```
git remote add <repo> <his_repo_path> 
```

您不能只提取特定文件。您可以做的就是将您的分支版本称为独特的，并且只需挑选您希望最终在您的服务器上的提交：

```
git fetch <repo> <his_branch>:throwaway ;# this would call your branch 'throwaway' 
```

假设他的历史（即 的历史`throwaway`）看起来像`A-B-C-D-E-F`。如果你只是想要提交`B`和`D`，你可以用cherry-pick把它们抓到主分支：

```
git checkout <main_branch> ;# checkout your main branch
git cherry-pick `B`
git cherry-pick `D` 
```

你完成了。

还有一个我不推荐的“快速而肮脏”的解决方案，因为这是不好的做法，但如果你真的只需要一两个文件，它就能完成工作，而且你是从不智能大小的人那里拉出来的提交：

1.  `git checkout -B trashme master ;# or whatever your main branch is`
2.  把文件复制过来。从字面上制作副本或通过电子邮件将它们发送给您。
3.  `trashme`在签出分支时将它们移动到存储库中。
4.  在暂存和提交它们之前进行编辑。
5.  那些`cherry-pick`提交或`git merge trashme`.

# lotus-notes - 将 Domino Web 应用程序转换为 HTML

> ID：11411143
> 
> 赞同：-1
> 
> 时间：2012-07-10T10:15:31.330
> 
> 标签：lotus-notes, lotus-domino

是否可以将 .nsf Domino Web 应用程序转换为 HTML？我需要在不使用 Domino 服务器的情况下使应用程序脱机可用。为了详细说明这一点，我们有一家外部公司为我们托管一个多米诺骨牌应用程序，一个文档管理系统。他们很快就会拔掉服务器上的插头并向我们发送一个 .nsf 文件。如果我们有一个多米诺骨牌服务器那就太好了，我们可以把文件放在服务器上。但问题是我们没有。这就是为什么我希望如果有一种方法可以提取所有内容，这样它就可以在没有多米诺服务器的情况下运行，就像一堆 HTML 文件一样，我们不需要 DMS 的功能，我们只需要能够查看内容。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:37:32.970

如果它是基于 Domino 编程框架构建的具有逻辑和操作的应用程序，而不仅仅是一组静态页面，那么答案是否定的。首先，因为 HTML 只是一种标记语言，而不是一种编程语言或框架。其次，因为构建工具以将 Domino 应用程序迁移到其他框架的各种尝试通常都不是很成功。GBS 具有将传统 Domino 应用程序迁移到 XPage 的工具，但这可能不是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:25:21.030

如果站点是静态的，您可以使用 HTTrack 之类的网站复制工具进行复制：http: [//www.httrack.com/](http://www.httrack.com/)

该工具抓取整个站点并生成 HTML 页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T19:17:52.683

使用 Notes 客户端，创建数据库的本地副本。在 Notes 中打开该数据库后，单击顶部菜单中的操作，然后在 Web 浏览器中预览，然后选择 Internet Explorer。您可能需要更改 ACL 以允许 Anonymous 拥有 Reader 访问权限。如果数据需要安全，请创建一个本地副本，这样您就可以修改 ACL 而不会将生产副本置于风险之中。

您可以无限制地[从 IBM](http://www.ibm.com/developerworks/downloads/ls/dominodesigner/?S_CMP=LSDL)下载 Notes 设计器客户端以及具有 90 天评估期的[Notes 和管理员客户端。](http://www.ibm.com/developerworks/downloads/ls/lsndad/index.html)

# java - 如何在android中创建字典？

> ID：11411147
> 
> 赞同：1
> 
> 时间：2012-07-10T10:15:33.583
> 
> 标签：java, android

正在开发一个马拉雅拉姆语-> android 中的英语词典应用程序。我该怎么做？任何人都可以帮助我。这是创建字典的最佳方法？..所有答案都非常感谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:16:58.893

对于`Map`字典来说，实现似乎是显而易见的选择，其中键是马拉雅拉姆语单词，值是英语单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:30:08.763

您可以使用 hashmap 或字典类。它使用键/值对概念。要了解更多信息，请单击下面的链接-

[点击这里](http://developer.android.com/reference/java/util/Dictionary.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T22:28:58.367

您的数据库是否适合设备的有限内存？如果是这样，那么按照上面的建议使用某种地图。

否则，它会变得复杂。我会将您的字典放入 sqlite3 数据库并从您的应用程序访问该数据库。为了提高性能，一旦查找到每个单词，我会在 HashMap 中本地缓存它。您可以变得聪明并改用 Wea​​kHashMap，它会在内存紧张时从缓存中清除条目。（警告：Android 是否实现了 WeakHashMap？）

最后，考虑实现一个由上述 sqlite3 数据库备份的内容提供程序。然后，您的字典可以很容易地被多个客户端访问，并且数据库只需要由内容提供者打开一次。

# php - 如何使用 PHP SDK 获取使用特定应用程序的所有用户的详细信息？

> ID：11411149
> 
> 赞同：0
> 
> 时间：2012-07-10T10:15:37.890
> 
> 标签：php, facebook, facebook-php-sdk

我在 facebook 中创建了一个应用程序。如何获取此应用程序的所有用户的详细信息，甚至

如果他们不是我的 Facebook 朋友。我需要一个 PHP SDK 查询

有人能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:37:26.723

您可以将 FQL 与 PHP sdk 一起使用：

[http://developers.facebook.com/docs/reference/php/facebook-api/](http://developers.facebook.com/docs/reference/php/facebook-api/)

以下是应该为您提供所需结果的查询。

```
$config = array(
'appId' => 'YOUR_APP_ID',
'secret' => 'YOUR_APP_SECRET',
);

$facebook = new Facebook($config);
$facebook->api(array('method' => 'fql.query', 'query' => "SELECT uid FROM user WHERE is_app_user = '1'")); 
```

对于用户表，您可以查看：http: [//developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)

虽然它没有经过测试，但我希望它能为您指明正确的方向。

# symfony - 清除推进缓存（实例池）

> ID：11411153
> 
> 赞同：4
> 
> 时间：2012-07-10T10:15:55.300
> 
> 标签：symfony, propel

我需要在一次 php 执行中使用 propel 强制从 DB 重新读取数据。我已经有一个有点老套的解决方案：为相应的类调用 init%modelName%，但想要更好的东西。

是否有任何单一的呼叫或服务配置选项？就像杀死整个实例池一样。

关于服务：我们使用 symfony2 并且仅在一种特定情况下不需要缓存，因此我们甚至可以为此创建单独的环境。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T17:53:29.233

您可以通过调用全局禁用实例池：（`Propel::disableInstancePooling()`对于`Propel::enableInstancePooling()`启用实例池很有用）。

否则，您可以依赖包含生成方法的 PEER 类，如`clearInstancePool()`, 和`clearRelatedInstancePool()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T16:03:20.857

我需要更新相关的对象，发现`clear%modelName%`应该被调用。

`init%modelName%`删除所有条目，相关条目永远无法读取。`clear[Related]InstancePool`不要帮忙。

```
$foo = FooQuery->create()->findOne();
// meanwhile somebody else updated DB and Propel don't know about that:
mysql_query("INSERT INTO `foo_bars`, (`foo_id`, `bar_id`) VALUES (".$foo->getId().", 1)");
// here we need some magic to force Propel re-read relation table.
$foo->clearFooBars();
// now entries would be re-read
$foo->getFooBars(); 
```

# android - Android - 使用解析的 xml 数据更新 SQLite

> ID：11411160
> 
> 赞同：1
> 
> 时间：2012-07-10T10:16:15.330
> 
> 标签：android, multidimensional-array, xml-parsing

只是提醒一下我是菜鸟，所以也许我的问题相当愚蠢...

无论如何，我正在使用 SAX 解析 XML 文件，我可以正确地循环遍历这些项目并将它们的内容打印到日志中。我需要的是让这个解析器返回一个多维关联数组，我可以遍历它并随后用于更新 SQLite 数据库......

**问题：** Android中是否存在这样的事情？我应该改用其他数据类型吗？它是如何完成的？

我将包含一些解析器的代码（endElement 方法进行打印以记录，到目前为止它每个项目都有一个元素，但会改变，因此需要多维）：

```
private boolean in_image = false;
private boolean in_homeimage = false;
StringBuilder sb;

@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {

        for (int i=start; i<start+length; i++) {
            sb.append(ch[i]);
        }

    //super.characters(ch, start, length);
}

@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    if( localName.equals("image") && this.in_homeimage ){
        this.in_homeimage = false;
        Log.i("Extra", "Found homeimage: " + sb);
    }
    else if( localName.equals("image") ){
        this.in_image = false;
        Log.i("Extra", "Found image: " + sb);
    }

    //super.endElement(uri, localName, qName);
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    sb = new StringBuilder();

    if( localName.equals("image") && attributes.getValue("name") == "home" )
        this.in_homeimage = true;
    else if( localName.equals("image") )
        this.in_image = true;

    //super.startElement(uri, localName, qName, attributes);
} 
```

提前致谢

# c# - 使用 C# 在 Selenium Webdriver 中使用 Excel 进行参数化

> ID：11411161
> 
> 赞同：0
> 
> 时间：2012-07-10T10:16:26.097
> 
> 标签：c#, excel, webdriver, parameterization

我应该使用哪些 C# 代码在使用 Excel 的 webdriver 中进行参数化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:08:06.520

按照下面的链接。

[http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/8ce4dcaf-2a2c-4134-94f4-d48501908446/](http://social.msdn.microsoft.com/Forums/en-US/vststest/thread/8ce4dcaf-2a2c-4134-94f4-d48501908446/)

[http://blog.decaresystems.ie/2008/07/01/data-driven-unit-testing-and-excel-in-visual-studio/](http://blog.decaresystems.ie/2008/07/01/data-driven-unit-testing-and-excel-in-visual-studio/)

# java - Bump API Android 崩溃

> ID：11411169
> 
> 赞同：2
> 
> 时间：2012-07-10T10:16:51.757
> 
> 标签：java, android, crash, bump

我对 Android 上的 Bump API 有很大的问题。我设置了示例中的所有内容，第一次启动包含凹凸代码的活动时效果很好，现在如果我返回并再次启动它，它就会由于致命信号错误而崩溃......它发生在我打电话后凹凸 API 的配置。

我可以不用再打电话了吗？但是没有什么可以检查它是否已经配置。

```
public class BumpActivity extends Activity {
    private IBumpAPI api;
    private ProgressDialog mDialog;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.bump);
        mDialog = ProgressDialog.show(BumpActivity.this, "Preparing bump", "Loading");
        bindService(new Intent(IBumpAPI.class.getName()), connection,
                Context.BIND_AUTO_CREATE);

        IntentFilter filter = new IntentFilter();
        filter.addAction(BumpAPIIntents.CHANNEL_CONFIRMED);
        filter.addAction(BumpAPIIntents.DATA_RECEIVED);
        filter.addAction(BumpAPIIntents.NOT_MATCHED);
        filter.addAction(BumpAPIIntents.MATCHED);
        filter.addAction(BumpAPIIntents.CONNECTED);
        registerReceiver(receiver, filter);

    }

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }

    @Override 
    public void onBackPressed(){
        Intent resultIntent = new Intent();
        setResult(Activity.RESULT_CANCELED, resultIntent);
        super.onBackPressed(); 
    }
    private final ServiceConnection connection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName className, IBinder binder) {

            Log.i("BumpTest", "onServiceConnected");
            api = IBumpAPI.Stub.asInterface(binder);
            new Thread() {
                public void run() {
                    try {
                        api.configure("9b17d663752843a1bfa4cc72d309339e",
                                "Bump User");
                    } catch (RemoteException e) {
                        Log.w("BumpTest", e);
                    }

                }
            }.start();
            Log.d("Bump Test", "Service connected");
        }

        @Override
        public void onServiceDisconnected(ComponentName className) {
            Log.d("Bump Test", "Service disconnected");
        }
    };

    private final BroadcastReceiver receiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            final String action = intent.getAction();
            try {
                if (action.equals(BumpAPIIntents.DATA_RECEIVED)) {
                    getUserDetailFromBump(new String(
                            intent.getByteArrayExtra("data")));
                } else if (action.equals(BumpAPIIntents.MATCHED)) {
                    long channelID = intent
                            .getLongExtra("proposedChannelID", 0);
                    Log.i("Bump Test",
                            "Matched with: "
                                    + api.userIDForChannelID(channelID));
                    api.confirm(channelID, true);
                    Toast toast = Toast.makeText(
                            getApplicationContext(),
                            "Matched with: "
                                    + api.userIDForChannelID(channelID),
                            Toast.LENGTH_SHORT);
                    toast.show();
                } else if (action.equals(BumpAPIIntents.CHANNEL_CONFIRMED)) {
                    long channelID = intent.getLongExtra("channelID", 0);
                    api.send(channelID, CurrentUserManager.getSharedManager()
                            .getCurrentUser().getUserId().toString().getBytes());
                } else if (action.equals(BumpAPIIntents.NOT_MATCHED)) {
                    Toast toast = Toast.makeText(getApplicationContext(),
                            "No match", Toast.LENGTH_SHORT);
                    toast.show();
                } else if (action.equals(BumpAPIIntents.CONNECTED)) {
                    mDialog.dismiss(); 
                    api.enableBumping();
                }
            } catch (RemoteException e) {
            }
        }
    };

    public void getUserDetailFromBump(String data) {
        Log.i("User Id", data); 
        LoginRequest login = new LoginRequest(getApplicationContext());
        Log.i("Token", login.getArchivedToken()); 
        AsyncHttpClient restRequest = new AsyncHttpClient();
        PersistentCookieStore cookie = new PersistentCookieStore(getApplicationContext()); 
        restRequest.setCookieStore(cookie); 
        RequestParams params = new RequestParams();
        params.put("auth_token", login.getArchivedToken()); 
        params.put("user_id", data); 
        Log.i("Request", "Preparing"); 
        restRequest.get(Constantes.API_URL + "users/show.json", params, new AsyncHttpResponseHandler(){
            public void onSuccess(String response) {
                Log.i("Reponse", response); 
                try {
                    User user = new User(new JSONObject(response));
                    Log.i("User", user.toString()); 
                    //Driver
                    if (CurrentUserManager.getSharedManager().getCurrentUser().getType() == 1){
                        CurrentRouteManager.getSharedManager().getCurrentRoute().addPassanger(user); 
                        Intent resultIntent = new Intent(BumpActivity.this, DriverActivity.class);
                        resultIntent.putExtra("PASSENGER_ADDED", true); 
                        setResult(1, resultIntent);
                        finish(); 
                    }
                    else{
                        Intent p = new Intent(BumpActivity.this, RoutePassenger.class); 
                        p.putExtra("driver", user); 
                        startActivity(p); 
                    }
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
            }

            @Override
            public void onFailure(Throwable e) {
                Log.i("Error", e.toString()); 
            }

        }); 

    }

    public void onStart() {
        Log.i("BumpTest", "onStart");
        super.onStart();
    }

    public void onRestart() {
        Log.i("BumpTest", "onRestart");
        super.onRestart();
    }

    public void onResume() {
        Log.i("BumpTest", "onResume");

        super.onResume();
    }

    public void onPause() {
        Log.i("BumpTest", "onPause");
        try {
            api.disableBumping();

        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        super.onPause();
    }

    public void onStop() {
        Log.i("BumpTest", "onStop");
        try {
            api.disableBumping();

        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        super.onStop();
    }

    public void onDestroy() {
        Log.i("BumpTest", "onDestroy");
        try {
            api.disableBumping();

        } catch (RemoteException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } 
        unbindService(connection);
        unregisterReceiver(receiver);
        super.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T15:58:41.757

几天前我终于解决了。由于我不是 JAVA 专家，我认为该错误位于 Bump 库中。如果你在已经配置好的时候执行 api.configure，它只会崩溃。所以我最终制作了一个单例，确保它只被调用一次

这是代码

```
public class BumpConnection {

    protected Context context; 
    private IBumpAPI api;
    private static BumpConnection sharedManager;
    public static synchronized BumpConnection getSharedManager(Context context) {
        if (sharedManager == null) {
            sharedManager = new BumpConnection(context);
        }
        return sharedManager;
    }

    private BumpConnection(Context context){
        this.context = context; 
        context.bindService(new Intent(IBumpAPI.class.getName()), connection,
                Context.BIND_AUTO_CREATE);
    }

    public IBumpAPI getApi() {
        return api;
    }

    public void setApi(IBumpAPI api) {
        this.api = api;
    }

    private final ServiceConnection connection = new ServiceConnection() {
        @Override
        public void onServiceConnected(ComponentName className, IBinder binder) {

            Log.i("BumpTest", "onServiceConnected");
            api = IBumpAPI.Stub.asInterface(binder);
            new Thread() {
                public void run() {
                    try {
                        api.configure("9b17d663752843a1bfa4cc72d309339e",
                                "Bump User");
                    } catch (RemoteException e) {
                        Log.w("BumpTest", e);
                    }

                }
            }.start();
            Log.d("Bump Test", "Service connected");
        }

        @Override
        public void onServiceDisconnected(ComponentName className) {
            Log.d("Bump Test", "Service disconnected");
        }
    };
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-18T07:57:21.457

使用 git hub 上提供的最新的 bump api，仔细阅读 README.md 文件。有明确提到，通过使用 .aidl 文件（在 src 文件夹中可用）首先使用命令编译它

android 更新项目 -t android-15 -l path_to/bump-api-library -p path_to_your_project/

在您的终端中.. 如果您是 Linux 用户，则将路径设置为平台工具，然后将此命令与 ./adb 一起使用。

然后刷新项目，将此库项目设置为您的测试凹凸项目中的库。同时替换您通过电子邮件收到的凹凸 API 密钥

# blackberry - 收听收到的短信时手机死机

> ID：11411172
> 
> 赞同：-2
> 
> 时间：2012-07-10T10:16:59.593
> 
> 标签：blackberry, sms

为什么下面的代码会冻结手机上的所有操作？该应用程序读取传入的短信，但该应用程序没有打开。单击应用程序后，手机立即冻结。我究竟做错了什么。我将不胜感激任何帮助。

```
try {  
   //A DatagramConnection is created to listen for any incoming sms's.
   DatagramConnection _dc =
      (DatagramConnection)Connector.open("sms://"); 

   Datagram d = _dc.newDatagram(_dc.getMaximumLength());  

   _dc.receive(d);                             
   byte[] bytes = d.getData();
   String address = d.getAddress(); //The address of the sms is put on a string.
   String msg = new String(bytes); //The body of the sms is put on a string. 
} catch (Exception me) {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:51:05.907

在线程内运行你的代码（这是我写的最糟糕的代码）：

```
new Thread() {
    public void run() {
        DatagramConnection _dc =
        (DatagramConnection)Connector.open("sms://"); //A DatagramConnection is created to listen for any incoming sms's.

        Datagram d = _dc.newDatagram(_dc.getMaximumLength());  

        _dc.receive(d);                             
        byte[] bytes = d.getData();
        String address = d.getAddress(); //The address of the sms is put on a string.
        String msg = new String(bytes); //The body of the sms is put on a string.
    }
}.start(); 
```

# iphone - 无需用户交互 iPhone 发送短信

> ID：11411174
> 
> 赞同：0
> 
> 时间：2012-07-10T10:17:07.740
> 
> 标签：iphone, mfmessagecomposeview

我看过一个名为“Glympse”的应用程序。在此应用程序中，无需用户交互即可发送短信，这对于 iPhone 来说是不可能的。我在设备日志中显示“Glympse”应用程序调用 mfmessagecontroller。

```
Jul 10 16:24:13 unknown Glympse[3004] <Warning>: GlympseAppDelegate::sendViaSMSWithMessage:toRecipient:withDelegate:
Jul 10 16:24:13 unknown Glympse[3004] <Warning>: 0
Jul 10 16:24:13 unknown Glympse[3004] <Warning>: presentModalViewController
Jul 10 16:24:14 unknown Glympse[3004] <Warning>: messageComposeViewController:didFinishWithResult:
Jul 10 16:24:14 unknown CommCenter[57] <Notice>: queuing sms message with id 584
Jul 10 16:24:14 unknown SpringBoard[52] <Error>: mms: queued messageId 584 
```

在我的应用程序中，我也需要它，所以我如何实现它？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T10:21:05.593

**`MFMessageComposerViewController`**没有用户交互就无法发送。

您必须采用 SMS 网关并实现自己的 SMS 发送方式，这不仅仅是可能的。就像您必须创建 Web 服务并接受来自 iPhone 的参数（如电话号码和消息），然后使用 SMS 网关发送 SMS。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:25:04.077

Glympse 不发送 SMS，它向其服务器发起 Web 请求。服务器有一个 SMS 引擎，它根据请求中的参数发送 SMS。否则无法实现此功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T19:06:31.417

**更新**：以下答案仅适用于 iOS 5.1 及更早版本。看起来 Apple 已经阻止了这种行为在 iOS 6 中的工作，实际上 Glympse 已经恢复到他们早期的策略，即通过用户交互发送文本。

使用 Glympse 确认了 ios 在问题中描述的行为。尽管 Glympse 在无法直接从设备发送文本时确实使用自己的服务器来生成 SMS 消息，但当功能存在时，它将直接从设备发送文本（使用 iMessage 或 SMS）。您可以通过发送请求然后查看生成的文本消息显示在您的消息历史记录中来验证这一点。

尽管**`MFMessageComposeViewController`**看起来需要用户交互，但 Glympse 留下的日志消息非常强烈地表明他们正在使用它并抑制 UI。我进行了实验，发现做一些行为相同的事情并不太难：我只是替换了 MFMessageComposeViewController 的视图（以避免显示 UI），然后在调用之后**`presentViewController`**我设置了一个计时器事件以在控制器启动后触发和运行。计时器事件向**`send:`**控制器发送一条消息，该消息模拟用户单击“发送”按钮。

我无法回答的是这是否符合 iOS 开发者程序许可协议的条款——它可能与“以 Apple 规定的方式使用记录的 API”（3.3.1）或一般的“不干涉苹果试图向用户提供警告”（3.3.14）。Glympse 正在利用这种行为来造福于用户——它非常明显地改善了用户体验并避免在用户不知情/同意的情况下发送消息。我也想利用这种行为。但你也可以看到，这种行为可能被不正当的应用程序用来冒充用户、发送垃圾邮件等。如果这成为常见做法，Apple 很可能会开始寻找这种行为并拒绝使用它的应用程序（甚至 Glympse 都必须拉出行为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-25T13:00:49.693

我发现这里存在这样做的方法：[`https://github.com/0xced/Stealth-Messenger`](https://github.com/0xced/Stealth-Messenger)

但是您可以让开发人员清楚地说：

> 不使用！这些东西仅用于教育目的，根本不适合 App Store。

在底部。但仅出于“教育目的”，您可以检查一下。

# php - 你知道一个简单的 php 脚本在 ip 检查后抛出 403 吗？

> ID：11411175
> 
> 赞同：4
> 
> 时间：2012-07-10T10:17:08.603
> 
> 标签：php, arrays, security, http-status-code-403

我有一个脚本，其中付款处理器带有付款确认。为了使页面安全，因为它可以访问订单信息和其他与用户相关的东西，我必须通过 ip(/24) 限制访问，如下所示：

```
$ipAllowed = array(
'192.192.192',
'172.172.172'
);
$ipAllowed = str_replace(".", "\.", implode("|", $ipAllowed));

if(!preg_match("/^($ipAllowed)\.[0-9]{1,3}$/", $_SERVER['REMOTE_ADDR'])){
     header('HTTP/1.0 403 Forbidden');
     die('You are not allowed to access this file.');
} 
```

*IP只是作为一个例子

**在我使用之前：**

```
if(!in_array(@$_SERVER['REMOTE_ADDR'], array('ips here'))); //only works with full ip 
```

!in_array 比我现在使用的要整洁得多，但我需要一些适用于 /24 ips 的东西，甚至两者都适用！

你知道一些更好/更快、更可靠、更整洁的东西吗？

@rap-2-h 正如你所说，这是使用完整 ip、/24 甚至 /16 的更简洁的版本

```
$ipAllowed = array( '192.168.1.153' '172.172.172'); 
$allowed = false; 

foreach($ipAllowed as $ip): 
    if(strpos($_SERVER['REMOTE_ADDR'], $ip) === 0) $allowed = true; 
endforeach; 

if (!$allowed) { 
    header('HTTP/1.0 403 Forbidden'); 
    die('You are not allowed to access this file.'); 
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T10:27:48.830

你可以尝试这样的事情：

```
$ipAllowed = array('192.192.192', '172.172.172');

$allowed = false;
foreach($ipAllowed as $ip) {
     if (strpos($_SERVER['REMOTE_ADDR'], $ip) !== false) {
         $allowed = true;
     }
}
if (!$allowed) {
    header('HTTP/1.0 403 Forbidden');
    die('You are not allowed to access this file.');     
} 
```

`$ipAllowed`所以你的数组中只能有 ip 片段。它不是很优雅，但它应该可以工作......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:20:10.653

使用此功能检查您的 ip 是否在指定网络中：

例如：在网络 192.168.1.0/24 中是 192.168.1.25

```
<?php

/*
 * ip_in_range.php - Function to determine if an IP is located in a
 *                   specific range as specified via several alternative
 *                   formats.
 *
 * Network ranges can be specified as:
 * 1\. Wildcard format:     1.2.3.*
 * 2\. CIDR format:         1.2.3/24  OR  1.2.3.4/255.255.255.0
 * 3\. Start-End IP format: 1.2.3.0-1.2.3.255
 *
 * Return value BOOLEAN : ip_in_range($ip, $range);
 *
 * Copyright 2008: Paul Gregg <pgregg@pgregg.com>
 * 10 January 2008
 * Version: 1.2
 *
 * Source website: http://www.pgregg.com/projects/php/ip_in_range/
 * Version 1.2
 *
 * This software is Donationware - if you feel you have benefited from
 * the use of this tool then please consider a donation. The value of
 * which is entirely left up to your discretion.
 * http://www.pgregg.com/donate/
 *
 * Please do not remove this header, or source attibution from this file.
 */

// decbin32
// In order to simplify working with IP addresses (in binary) and their
// netmasks, it is easier to ensure that the binary strings are padded
// with zeros out to 32 characters - IP addresses are 32 bit numbers
Function decbin32 ($dec) {
  return str_pad(decbin($dec), 32, '0', STR_PAD_LEFT);
}

// ip_in_range
// This function takes 2 arguments, an IP address and a "range" in several
// different formats.
// Network ranges can be specified as:
// 1\. Wildcard format:     1.2.3.*
// 2\. CIDR format:         1.2.3/24  OR  1.2.3.4/255.255.255.0
// 3\. Start-End IP format: 1.2.3.0-1.2.3.255
// The function will return true if the supplied IP is within the range.
// Note little validation is done on the range inputs - it expects you to
// use one of the above 3 formats.
Function ip_in_range($ip, $range) {
  if (strpos($range, '/') !== false) {
    // $range is in IP/NETMASK format
    list($range, $netmask) = explode('/', $range, 2);
    if (strpos($netmask, '.') !== false) {
      // $netmask is a 255.255.0.0 format
      $netmask = str_replace('*', '0', $netmask);
      $netmask_dec = ip2long($netmask);
      return ( (ip2long($ip) & $netmask_dec) == (ip2long($range) & $netmask_dec) );
    } else {
      // $netmask is a CIDR size block
      // fix the range argument
      $x = explode('.', $range);
      while(count($x)<4) $x[] = '0';
      list($a,$b,$c,$d) = $x;
      $range = sprintf("%u.%u.%u.%u", empty($a)?'0':$a, empty($b)?'0':$b,empty($c)?'0':$c,empty($d)?'0':$d);
      $range_dec = ip2long($range);
      $ip_dec = ip2long($ip);

      # Strategy 1 - Create the netmask with 'netmask' 1s and then fill it to 32 with 0s
      #$netmask_dec = bindec(str_pad('', $netmask, '1') . str_pad('', 32-$netmask, '0'));

      # Strategy 2 - Use math to create it
      $wildcard_dec = pow(2, (32-$netmask)) - 1;
      $netmask_dec = ~ $wildcard_dec;

      return (($ip_dec & $netmask_dec) == ($range_dec & $netmask_dec));
    }
  } else {
    // range might be 255.255.*.* or 1.2.3.0-1.2.3.255
    if (strpos($range, '*') !==false) { // a.b.*.* format
      // Just convert to A-B format by setting * to 0 for A and 255 for B
      $lower = str_replace('*', '0', $range);
      $upper = str_replace('*', '255', $range);
      $range = "$lower-$upper";
    }

    if (strpos($range, '-')!==false) { // A-B format
      list($lower, $upper) = explode('-', $range, 2);
      $lower_dec = (float)sprintf("%u",ip2long($lower));
      $upper_dec = (float)sprintf("%u",ip2long($upper));
      $ip_dec = (float)sprintf("%u",ip2long($ip));
      return ( ($ip_dec>=$lower_dec) && ($ip_dec<=$upper_dec) );
    }

    echo 'Range argument is not in 1.2.3.4/24 or 1.2.3.4/255.255.255.0 format';
    return false;
  }

}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:30:02.730

```
<?php

$ips = array(
    '192.160.0',
    '172.0.0'
);

/** 
 * Strip off the last number.
 */
$_SERVER['REMOTE_ADDR'] = '192.160.0.254';
$ip = preg_replace( '~\.(\d+)$~', '', $_SERVER['REMOTE_ADDR'] );

if( in_array( $ip, $ips ) ) {
    var_dump( 'allowed' );
} 
```

# python - 如何在 python 中为 web 应用程序找到滑块的 x 和 y 偏移量

> ID：11411182
> 
> 赞同：0
> 
> 时间：2012-07-10T10:17:20.313
> 
> 标签：python, webdriver

谁能告诉我如何使用 python for selenium webdriver 在网页中找到 Slider 的 x-offset 和 y-offset 默认值。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:14:49.093

您可以在 web 元素上使用 get_attribute(name) 方法来检索属性。

# symfony - 在 Symfony 2 / Doctrine 2 中有一个与实体没有关联的自定义存储库？

> ID：11411183
> 
> 赞同：12
> 
> 时间：2012-07-10T10:17:29.310
> 
> 标签：symfony, doctrine, doctrine-orm

是否有可能在 Symfony 2 和 Doctrine 2 中拥有一个不与实体关联的自定义存储库？我想在其中放入一些不适合其他存储库的本机 SQL（它可能引用抽象或实体层次结构）。

`$this->getDoctrine()->getRepositoty(/* ??? */)`应该如何替换控制器代码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-10T10:27:11.470

您可以拥有任意数量的存储库。但是，只有一个存储库可以与实体管理器链接。

您需要定义一些服务来添加自定义存储库。

```
<!-- My custom repository -->
<service id="acme.repository.my_entity" class="Acme\FQCN\MyEntityRepository" >
    <argument type="service" id="doctrine.orm.entity_manager" />
    <argument type="service" id="acme.metadata.my_entity" />
</service>

<!-- MyEntity metadata -->
<service id="acme.metadata.my_entity" class="Doctrine\ORM\Mapping\ClassMetaData">
    <argument>Acme\FQCN\MyEntity</argument>
</service> 
```

存储库类必须继承自`EntityRepository`.

```
namespace Acme\FQCN;

use Doctrine\ORM\EntityRepository;

class MyEntityRepository extends EntityRepository
{
    /** 
     * If you want to inject any custom dependencies, you'd have either have to
     * add them to the construct or create setters. I'd suggest using setters
     * in which case you wouldn't need to use the constructor in this class.
     *
     * public function __construct($em, Doctrine\ORM\Mapping\ClassMetadata $class, $custom_dependency)
     * {
     *     parent::__construct($em, $class);
     * }
     *
     */
} 
```

不幸的是，您将无法通过学说服务检索它。相反，直接从容器中检索它：

```
$this->get('acme.repository.my_entity'); 
```

* * *

**编辑**

如果您正在创建不应链接到任何实体的存储库，只需创建一个服务并注入必要的依赖项。

```
<!-- Repository for misc queries -->
<service id="acme.repository.misc" class="Acme\FQCN\MiscRepsitory">
    <argument type="service" id="database_connection" />
</service> 
```

由于您没有在自定义存储库中使用任何 Doctrine 的 ORM 功能，因此无需扩展`EntityManager`.

```
namespace Acme\FQCN;

use \Doctrine\DBAL\Connection;

class MiscRepository
{
    protected $conn;

    public function __construct(Connection $conn)
    {
        $this->conn = $conn;
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-28T15:04:19.410

我采用了一个稍微不同的解决方案，使用 Symfony2 父服务。

首先，我创建了一个父服务，一个`GenericRepository`公开了几个方法的类，如果我们想在将来重构我们的代码，它会让生活变得更轻松。

`services.yml`

```
acme_core.generic_repository:
    abstract: true
    class: Acme\Bundle\CoreBundle\Repository\GenericRepository
    arguments: [@doctrine.orm.entity_manager] 
```

`Acme\Bundle\CoreBundle\Repository\GenericRepository`

```
<?php

namespace Acme\Bundle\CoreBundle\Repository;

use Doctrine\ORM\EntityManager;

/**
 * Class GenericRepository
 * @package Acme\Bundle\CoreBundle\Repository
 */
abstract class GenericRepository {
    /**
     * @var EntityManager
     */
    private $entityManager;

    /**
     * @param EntityManager $entityManager
     */
    public function __construct(EntityManager $entityManager) {
        $this->entityManager = $entityManager;
    }

    /**
     * @return EntityManager
     */
    public function getEntityManager() {
        return $this->entityManager;
    }

    /**
     * @return \Doctrine\DBAL\Connection
     */
    public function getConnection() {
        return $this->getEntityManager()->getConnection();
    }

    /**
     * @return string
     */
    abstract function getTable();
} 
```

现在我们要定义一个新的存储库：

`services.yml`

```
# Repositories
acme_product.repository.product_batch:
    parent: acme_core.generic_repository
    class: Acme\Bundle\ProductBundle\Repository\ProductBatchRepository 
```

`Acme\Bundle\ProductBundle\Repository\ProductBatchRepository`

```
<?php

namespace Acme\Bundle\ProductBundle\Repository;

use Acme\Bundle\CoreBundle\Repository\GenericRepository;

/**
 * Class ProductBatchRepository
 * @package Acme\Bundle\ProductBundle\Repository
 */
class ProductBatchRepository extends GenericRepository {
    /**
     * @param int $batchId
     * @return integer The number of affected rows.
     */
    public function deleteBatch($batchId) {
        $table = $this->getTable();

        return $this->getConnection()->delete($table, [
            'id' => $batchId
        ]);
    }

    /**
     * {@inheritdoc}
     */
    public function getTable() {
        return 'product_batch';
    }
} 
```

该`deleteBatch()`方法创建并执行以下查询：

`DELETE FROM product_batch WHERE id = ?`

最后在我们的控制器中：

```
public function deleteAction() {
    $batchId = $this->getRequest()->get('batchId');

    $affectedRows = $this->get('acme_product.repository.product_batch')->deleteBatch($batchId);

    return $this->render(/**/);
} 
```

For further information and **entity manager** / **connection** usage please refer to the official documentation: [http://doctrine-orm.readthedocs.org/en/latest/reference/native-sql.html](http://doctrine-orm.readthedocs.org/en/latest/reference/native-sql.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:26:55.117

我的建议是在构造函数中创建一个带有所需依赖项的普通 PHP 类，并通过服务容器获取它。

# javascript - StackOverflow 如何在你写答案时关闭标签页之前实现一个弹出框？

> ID：11411188
> 
> 赞同：1
> 
> 时间：2012-07-10T10:17:46.070
> 
> 标签：javascript, jquery

> **可能重复：**
> [如果网络用户真的想离开页面，我如何要求他确认？](https://stackoverflow.com/questions/3998603/how-can-i-ask-a-web-user-for-confirmation-if-he-really-wants-to-leave-the-page)

当我在 SE 上写一个答案时，我通常会偶然发现我的后退按钮（烦人地位于我的箭头键旁边），它让我回到其他网站上的一个选项卡，丢失了我刚刚输入的所有文本。

但是在 SE 上，当我要离开页面时，它会创建一个**弹出窗口**来询问我是否真的打算这样做，这非常有用。

这是如何实施的？

# abap - 类 alv 和函数 alv 有什么区别

> ID：11411199
> 
> 赞同：1
> 
> 时间：2012-07-10T10:18:21.537
> 
> 标签：abap, alv

我们正在使用类 alv 和函数 alv，这些选项之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:08:13.453

*   一些不同之处：

    *   您可以使用功能模块创建屏幕，但是类必须调用单独的程序来生成屏幕。
    *   类比 FM 更安全。
    *   类类型提高了性能。
    *   类类型是面向对象的，它允许更大的灵活性。一个屏幕中可以有多个 ALV。
    *   类将允许比 FM 更好的可重用性，因为它是面向对象的。
    *   类是可实例化的，而函数组则不是。
    *   对象是类的实例，但 FM 不是功能组的实例。
    *   功能模块可以异步执行，也可以被其他系统远程调用。
    *   一个程序可以同时处理多个功能组的实例，但它不能处理单个功能组的多个实例。

*此[参考资料](http://help.sap.com/saphelp_nw04/helpdata/en/c3/225b5954f411d194a60000e8353423/content.htm)也可能会有所帮助。

希望对您有所帮助

塔尔哈

# magento - Magento 1.4 - PayPal Payments Standard sometimes won't charge shipping

> ID：11411201
> 
> 赞同：0
> 
> 时间：2012-07-10T10:18:22.240
> 
> 标签：magento, paypal, magento-1.4, shipping

I have a UK based website running Magento 1.4.0.1 and recently added PayPal Payments Standard as a payment option. It works as expected for the most part, but recently I've had 2 overseas orders come through that haven't been charged shipping (one to Germany and one to Sweden).

When viewing the orders in the backend, Magento seems to think that shipping was charged, but when PayPal is checked, it confirms that no shipping was charged. Obviously, the figure charged in PayPal is the Magento figure minus the shipping figure.

I have absolutely no idea why this is happening, but my client is worried about it understandably. This question has been [asked before](https://stackoverflow.com/questions/11176208/magento-paypal-payment-missing-shipping-fee-but-only-sometimes) but there were no replies.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T13:59:05.657

这个版本（1.4.0.1）似乎有一个非常具体的错误。幸运的是，其他人遇到了这个问题并[设法解决](http://www.boostingecommerce.com/fix-for-magento-1-4-0-1-paypal-and-shipping-costs)了它。

# android - Search does not link to the correct location for local Android SDK documentation

> ID：11411206
> 
> 赞同：2
> 
> 时间：2012-07-10T10:18:37.733
> 
> 标签：android

After updating the Android SDK and corresponding documentation on my Mac the search results for the locally stored documentation stopped linking to the correct locations. The search results link to root ("/") instead of the local documentation directory (ANDROID_SDK_DIRECTORY/docs/).

"Documentation for Android SDK" is for API version 16 and is revision 1.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T02:55:43.573

似乎搜索框只是将查询提供给 Google 的服务器，后者以[https://developer.android.com](https://developer.android.com)上的 URL 进行回复。为了在本地 SDK 上搜索和打开页面，我使用了这个 shell 脚本：

```
#!/bin/sh

if [ -z $SDK_BASE ]; then
    SDK_BASE=/opt/android-sdk
fi

launched_new_window="false"

for f in `find $SDK_BASE/docs/ -iname \*$1\*.html`; do
    if [ $launched_new_window = "false" ]; then
        /usr/bin/chromium-browser --new-window $f
        launched_new_window=true
    else
        /usr/bin/chromium-browser $f
    fi
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:28:20.060

作为一种解决方法，我编辑了一个文档 Javascript 文件。编辑后的函数是文件 ANDROID_SDK_DIRECTORY/docs/assets/js/search_autocomplete.js 中的 search_changed（大约第 174 行）。在函数的开头添加了以下内容：

```
var cur_loc = window.location.pathname;
var slash_doc_slash = cur_loc.indexOf("/docs/");
if ( slash_doc_slash >= 0) {
    var after_bit = cur_loc.substr(slash_doc_slash + "/docs/".length);
    var after_bit_length = after_bit.length;
    var up_dots = "";
    for ( var i = 0; i < after_bit_length; i++) {
        var test_ch = after_bit.charAt(i);
        if ( test_ch == "/") {
            up_dots += "../";
        }
    }

    toroot = up_dots;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T15:47:36.897

阅读 js 文件后`ANDROID_SDK_DIRECTORY/docs/assets/js/search_autocomplete.js`，在我看来搜索结果是由 google web search api 绘制的。如果我们想修改搜索结果，我们必须重写搜索引擎部分的代码。

# android - BitmapFactory.decodeStream cannot decode png type from ftp

> ID：11411209
> 
> 赞同：3
> 
> 时间：2012-07-10T10:18:48.427
> 
> 标签：android, ftp, png, imageview

*   What was my mistake? How I show png from FTP?

I'm newby for android and try to show image from difference connection/source. Then I already show image which load from drawable and HTTP.

Now, I'm try to show from FTP, I get message "--- decoder->decode returned false" when I use..`BitmapFactory.decodeStream(ins, null, options);`

Then I found solution..

```
static class FlushedInputStream extends FilterInputStream {
    public FlushedInputStream(InputStream inputStream) {
        super(inputStream);
    }

    @Override
    public long skip(long n) throws IOException {
        long totalBytesSkipped = 0L;
        while (totalBytesSkipped < n) {
            long bytesSkipped = in.skip(n - totalBytesSkipped);
            if (bytesSkipped == 0L) {
                int b = read();
                if (b < 0) {
                    break; // we reached EOF
                } else {
                    bytesSkipped = 1; // we read one byte
                }
            }
            totalBytesSkipped += bytesSkipped;
        }
        return totalBytesSkipped;
    }
} 
```

Then it can load/decode file type "Jpeg, jpg", there are show completely.

But log cat say "--- decoder->decode returned false" when bitmap load file type "PNG" again.

Thank for advice...

```
 ImageView bmImage = (ImageView) findViewById(R.id.faceImageView);
    BitmapFactory.Options bmOptions;
    bmOptions = new BitmapFactory.Options();
    bmOptions.inSampleSize = 1;
    Bitmap bm = LoadImage(image_URL, bmOptions);
    bmImage.setImageBitmap(bm); 
```

...

```
private Bitmap LoadImage(String URL, BitmapFactory.Options options) {
    Bitmap bitmap = null;
    InputStream in = null;
    FlushedInputStream fIns = null;

    try {
        if (isFTP) {
            in = downloadFile("");
            if (remoteFile.toLowerCase().contains(".png")) {
                fIns = new FlushedInputStream(in);
                bitmap = BitmapFactory.decodeStream(fIns, null, options);
                // byte[] bMapArray = new byte[buf.available()];
                // buf.read(bMapArray);
                // bitmap = BitmapFactory.decodeByteArray(bMapArray, 0,
                // bMapArray.length);
            } else {
                fIns = new FlushedInputStream(in);
                bitmap = BitmapFactory.decodeStream(fIns);
            }

        } else { // HTTP
            in = OpenHttpConnection(URL);
            fIns = new FlushedInputStream(in);
            bitmap = BitmapFactory.decodeStream(fIns);
        }

        in.close();
    } catch (IOException e1) {
    }
    return bitmap;
}
public synchronized InputStream downloadFile(String localfilename) {
        InputStream inputStream = null;
        String user = "aaa";
        String pass = "8888";
        String host = "xxx.xxx.xxx.xxx";

        try {

            FTPClient mFTPClient = new FTPClient();
            mFTPClient.connect(host);
            mFTPClient.login(user, pass);
            mFTPClient.enterLocalPassiveMode();
            mFTPClient.changeWorkingDirectory("/DroidPic");
            String[] aa = mFTPClient.listNames();
            String strTmp = "";
            do {
                strTmp = aa[(new Random()).nextInt(aa.length)];
            } while (remoteFile == strTmp);
            remoteFile = strTmp;
            inputStream = mFTPClient.retrieveFileStream(remoteFile);
        } catch (Exception ex) {
            Toast.makeText(this, "Err:" + ex.getMessage(), Toast.LENGTH_LONG)
                    .show();
        }
        return inputStream;
    } 
```

# java - How to listen(speech) text in java

> ID：11411214
> 
> 赞同：3
> 
> 时间：2012-07-10T10:18:59.353
> 
> 标签：java

Does anyone know any good API or LIBRARY that can listen(speech) text. I try to listen(speech) text in three languages and I would like to know where and how is best to start. Can I use general voice for all three languages? I will use `eclipse` and `java` for language.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-18T06:48:04.160

Oracles JRE，[Java Speech API](http://www.oracle.com/technetwork/java/jsapifaq-135248.html)中包含一个。

您可能想尝试使用[Free Text-to-speech](http://freetts.sourceforge.net/docs/index.php)，以获得独立的实现。

# css - CSS停止图像下的文本换行

> ID：11411219
> 
> 赞同：87
> 
> 时间：2012-07-10T10:19:09.967
> 
> 标签：css, css-float, word-wrap

我有以下标记：

```
<li id="CN2787">
  <img class="fav_star" src="images/fav.png">
  <span>Text, text and more text</span>
</li> 
```

我想要它，这样如果文本换行，它就不会进入图像的“列”。我知道我可以用（我正在做的）来做到这一点，但由于[这个原因](https://stackoverflow.com/questions/11406964/jquery-counting-visible-elements-efficiency-speed-problems)`table`这是不可行的。

我尝试了以下但没有成功：

```
li span {width: 100px; margin-left: 20px}
.fav_star {width: 20px} 
```

我也试过了`float: right`。

谢谢。

编辑：我希望它看起来像这样：

```
IMG   Text starts here and keeps going... and
      wrap starts here. 
```

不像这样：

```
IMG   Text starts here and keeps going... and 
wrap starts in the space left for the image. 
```

* * *

## 回答 #1

> 赞同：260
> 
> 时间：2013-03-14T22:17:12.573

这个问题的非常简单的答案似乎吸引了很多人：

```
<img src="url-to-image">
<p>Nullam id dolor id nibh ultricies vehicula ut id elit.</p>

    img {
        float: left;
    }
    p {
        overflow: hidden;
    } 
```

见例子：http: [//jsfiddle.net/vandigroup/upKGe/132/](http://jsfiddle.net/vandigroup/upKGe/132/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-10T10:51:03.870

> ### 由于这个问题获得了很多意见并且这是公认的答案，我觉得有必要添加以下免责声明：
> 
> 这个答案特定于 OP 的问题（在示例中设置了宽度）。虽然它有效，但它要求您在每个元素、图像和段落上都有一个宽度。除非这是您的要求，否则我建议使用[Joe Conlin 的解决方案](https://stackoverflow.com/a/15421257/535122)，该解决方案作为该问题的另一个答案发布。

该`span`元素是内联元素，您不能在 CSS 中更改其宽度。

您可以将以下 CSS 添加到您的跨度中，以便您能够更改其宽度。

```
display: block; 
```

另一种通常更有意义的方法是使用`<p>`元素作为`<span>`.

```
<li id="CN2787">
  <img class="fav_star" src="images/fav.png">
  <p>
     <span>Text, text and more text</span>
  </p>
</li> 
```

由于`<p>`它是一个`block`元素，因此您可以使用 CSS 设置其宽度，而无需更改任何内容。

但是在这两种情况下，由于您现在有一个块元素，您需要浮动图像，以便您的文本不会全部低于图像。

```
li p{width: 100px; margin-left: 20px}
.fav_star {width: 20px;float:left} 
```

PS 除了`float:left`在图像上，您也可以戴上`float:right`，`li p`但在这种情况下，您还需要`text-align:left`正确地重新对齐文本。

PSS 如果您继续使用不添加`<p>`元素的第一个解决方案，您的 CSS 应该如下所示：

```
li span{width: 100px; margin-left: 20px;display:block}
.fav_star {width: 20px;float:left} 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-10-31T23:49:00.773

对于那些想要一些背景信息的人，这里有[一篇简短的文章](http://www.stubbornella.org/content/2009/07/23/overflow-a-secret-benefit/)解释了为什么`overflow: hidden`有效。它与所谓的**块格式化上下文**有关。这是 W3C 规范的一部分（即不是 hack），基本上是由具有块类型流的元素占据的区域。

每次应用时，`overflow: hidden`都会创建一个*新*的块格式化上下文。但它并不是唯一能够触发该行为的属性。引用 Sydney Web Apps Group 的 Fiona Chan 的[演讲](http://www.youtube.com/watch?v=8YtQwv1cUVs)：

> *   浮动：左/右
> *   溢出：隐藏/自动/滚动
> *   显示：表格单元格和任何与表格相关的值/内联块
> *   位置：绝对/固定

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-10T10:37:08.737

如果你想`margin-left`在一个`span`元素上工作，你需要制作它`display: inline-block`或`display:block`同样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-10-02T13:52:59.387

文本的设置`display:flex`对我有用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-21T19:42:07.117

在图像和跨度周围包裹一个 div 并将以下内容添加到 CSS 中，如下所示：

HTML

```
 <li id="CN2787">
          <div><img class="fav_star" src="images/fav.png"></div>
          <div><span>Text, text and more text</span></div>
        </li> 
```

CSS

```
 #CN2787 > div { 
                display: inline-block;
                vertical-align: top;
            }

            #CN2787 > div:first-of-type {
                width: 35%;
            }

            #CN2787 > div:last-of-type {
                width: 65%;
            } 
```

较少的

```
 #CN2787 {
            > div { 
                display: inline-block;
                vertical-align: top;
            }

            > div:first-of-type {
                width: 35%;
            }
            > div:last-of-type {
                width: 65%;
            }
        } 
```

# android-emulator - Android APK resign.jar is getting hanged

> ID：11411223
> 
> 赞同：0
> 
> 时间：2012-07-10T10:19:21.013
> 
> 标签：android-emulator

Actually i am working on android platform,I am using robotium for automation testing.In my scenario i dont have the code i only have the apk file of an application which i can resign it and do my automation testing.For resigning of signature of apk i am using resign.jar ,i got stuck up over here.

Actually i have set Android_Home and every other variables are set but when i drop the apk file and save it by some name the .jar file is getting hanged up.

What might be the issue.!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:51:32.387

如果您从开发人员那里获得必须测试的 apk 文件，请执行以下步骤以使用您的密钥库对其进行签名：

*   将apk文件重命名为zip文件

*   解压压缩文件

*   删除 META-INF 文件夹

*   再次将文件夹重新压缩为 zip 文件

*   再次将 zip 文件重命名为 apk 文件

*   打开终端并按照 Android SDK 开发者指南[http://developer.android.com/guide/publishing/app-signing.html](http://developer.android.com/guide/publishing/app-signing.html)

而已！之后，您应该能够针对 apk 文件进行测试！

# objective-c - Display image in a cocoa status app

> ID：11411231
> 
> 赞同：9
> 
> 时间：2012-07-10T10:19:53.450
> 
> 标签：objective-c, cocoa, nsimage, nsstatusitem

Hi I developed a cocoa status app. when I put a long title for example , it can't be shown and if i put an image as icon too it can't be shown , but if i put a small title it works correctly. How can I fix this problem and make the image shown?

```
statusItem = [[[NSStatusBar systemStatusBar] 
    statusItemWithLength:NSSquareStatusItemLength] retain];    

[statusItem setMenu:menu]; 
//[statusItem setTitle:@"Notif "]; 
[statusItem setImage:[NSImage imageNamed:@"image"]]; 
[statusItem setHighlightMode:YES]; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T11:45:41.203

基本上

```
NSStatusItem *statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
NSImage* icon = [NSImage alloc] initWith ...]
[statusItem setImage:icon]; 
```

但是您的图像必须具有正确的尺寸（小于 20*20）

# datagrid - How to highlight edited cell in a datagrid

> ID：11411232
> 
> 赞同：0
> 
> 时间：2012-07-10T10:19:59.057
> 
> 标签：datagrid, cell, wpf-4.0

How can I highlight a cell in DataGrid that has been edited? XAML solution through some style using triggers is preferable. But if not possible, then a code behind approach would be good enough.

I am not posting any code as I did not have any break through with the problem.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T23:23:44.420

答案是简单地创建一个针对 DataGridCell 的样式并通过绑定触发条件，希望以下步骤易于遵循：

```
//lets say you bind datagrid to 
List<RowValues> RowsView {get;}
//were RowValues is
List<RowValue> RowValues
// and RowValue is 
public class RowValue
{
   public bool IsEdited 
   {
      get {return _isEdited;}
      set
      {
         if(_isEdited== value) return;
         _isEdited= value;
          RaisePropertyChanged(()=>IsEdited);
      }
   }
   public string Value 
   { 
      get {return _value;}
      set
      {
         if(_value == value) return;
         _value = value;
       //check if the value is edited
       IsEdited = _value == _originalValue;
       RaisePropertyChanged(()=>Value);
      }
   }

}

//so in code accessing the structure would look like:
var row = RowView[0];
var cell = row[1];
 cell.IsEdited... just to make it easier to see the XAML bindings below..

<DataGrid ItemsSource="{Binding RowsView}">
    <DataGridTemplateColumn>
        <DataGridTemplateColumn.CellStyle>
          <Style TargetType="{x:Type DataGridCell}">
            <Setter Property="Background" Value="Transparent" />
          <Style.Triggers>
          <DataTrigger Binding="{Binding RowValues[0].IsEdited}" Value="True">
             <Setter Property="Background" Value="{StaticResource MissingDataBrush}"/>
           </DataTrigger>
      </Style.Triggers>
    </Style>
</DataGridTemplateColumn.CellStyle>
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <TextBlock Text="{Binding RowValues[0].Value}"/>
    </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
    <DataTemplate>
            <TextBox Text="{Binding RowValues[0].Value}"/>
        </DataTemplate>
</DataGridTemplateColumn.CellEditingTemplate> 
```

……

# android - Android: FrameLayout squeezes View

> ID：11411233
> 
> 赞同：0
> 
> 时间：2012-07-10T10:20:00.480
> 
> 标签：android, android-framelayout

I am using the following layout:

![enter image description here](../Images/a63ccf82ffb5ac7b7327399e5dc395e4.png)

FrameLayout fills the entire Viewport, i.e. width and height are set to MATCH_PARENT

Width and height of RelativeLayout are set to WRAP_CONTENT

View1 to View5 have fixed dimensions e.g. width = 500, height = 50

View 5 lies near the border of FrameLayout and is squeezed by Android, so that it lies fully within FrameLayout. The height of View5 should be 50 but unfortunately Android changes it to a smaller value.

How can I avoid, that Android changes the height of View5 ?

When I scroll RelativeLayout, the error is still existing.

A similar behavior is described here: [button is squeezed when it exceeds layout](https://stackoverflow.com/questions/10760011/button-is-squeezed-when-it-exceeds-layout)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-14T22:30:33.383

解决此问题的“*更好*”方法是使用`ScrollView`类似

```
<ScrollView
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <RelativeLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content" >
         <View
             android:id="@+id/view1"
             android:layout_width="match_parent"
             android:layout_height="50dp"
             android:layout_alignParentTop="true" />
         <View
             android:id="@+id/view2"
             android:layout_width="match_parent"
             android:layout_height="50dp"
             android:layout_below="@+id/view1" />
         <View
             android:id="@+id/view3"
             android:layout_width="match_parent"
             android:layout_height="50dp"
             android:layout_below="@+id/view2" />
 <!-- YOU GET THE IDEA -->

    </RelativeLayout> 
</ScrollView> 
```

# c++ - 在 Qt 中搜索具有 zimage 文件扩展名的文件

> ID：11411234
> 
> 赞同：0
> 
> 时间：2012-07-10T10:20:01.583
> 
> 标签：c++, linux, qt

我正在编写一个程序来使用闪存驱动器升级固件。我需要使用闪存设备中存在的映像升级内核。但我不知道如何在目录中找到带有 zimage 文件扩展名的文件。我是 Qt 和 Linux 的新手。所以我不知道是否可以找到特定格式的文件。任何人都可以帮助解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:52:06.533

在 Qt 中，没有通用的方法可以访问整个文件系统上的操作系统搜索索引服务。因此，如果这就是您想要的，那么像@BЈовић 提供的特定于操作系统的解决方案将是必要的。

*（注意：当程序让我明确指出某些东西的位置时，我实际上更喜欢它，而不是搜索整个文件系统......但如果它能够注意到必要的文件何时与可执行文件位于同一目录中，那就更好了。 )*

无论如何...如果您知道要搜索的目录，那么[QDir](http://doc.qt.nokia.com/4.7-snapshot/qdir.html)抽象将允许您设置过滤器并枚举与目录中该过滤器匹配的文件名：

```
QDir dir (zimagePath);
QStringList filters;
filters << "*.zimage";

foreach (QString file, dir.entryList(filters, QDir::Files)) {
    // ...
} 
```

您可以阅读 QDir 文档以了解更多查看方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T12:04:35.093

[您可以使用system()](http://linux.die.net/man/3/system)执行下一个脚本，并解析输出：

```
#!/bin/bash

find / -name '*.zimage' | grep .zimage > /tmp/zimage_files.txt 
```

请注意，上面的脚本将搜索所有文件和所有路径，并将输出放到`/tmp/zimage_files.txt`. 如果您需要不同的东西，则需要对其进行一些修改。

# scala - 有人可以解释使用 SBT 的正确方法吗？

> ID：11411242
> 
> 赞同：101
> 
> 时间：2012-07-10T10:20:16.470
> 
> 标签：scala, sbt

*我要在这件事上出柜了！我不明白 SBT。在那里，我说过了，现在请帮助我。*

条条大路通罗马，SBT 也是如此：开始`SBT`有`SBT`, `SBT Launcher`,`SBT-extras`等，然后有不同的方法来包含和决定存储库。**有没有“最好”的方法？**

我问是因为有时我有点迷路。SBT 文档非常彻底和完整，但我发现自己不知道何时使用`build.sbt`or`project/build.properties`或`project/Build.scala`or `project/plugins.sbt`。

然后它变得有趣，有`Scala-IDE`和`SBT`-*一起使用它们的正确方法是什么？*先有鸡还是先有蛋？

**最重要的可能是，您如何找到正确的存储库和版本以包含在您的项目中？**我是否只是拔出一把砍刀并开始向前迈进？我经常找到包括所有东西和厨房水槽的项目，然后我意识到 - 我不是唯一一个有点迷路的人。

举个简单的例子，现在，我正在开始一个全新的项目。我想使用 and 的最新功能，`SLICK`这`Scala`可能需要最新版本的 SBT。*什么是开始的理智点，为什么？*我应该在哪个文件中定义它以及它应该看起来如何？我知道我可以做到这一点，但我真的很想就一切应该去哪里（为什么应该去那里会有奖金）获得专家意见。

我已经使用`SBT`小项目一年多了。我使用了`SBT`然后`SBT Extras`（因为它让一些头痛神奇地消失了），但我不确定为什么我应该使用其中一个。我只是因为不了解事物如何组合在一起（`SBT`和存储库）而感到有些沮丧，并且认为如果可以用人类的术语来解释的话，它将为下一个以这种方式出现的人省去很多困难。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T07:52:47.740

> *最重要的可能是，您如何找到正确的存储库和版本以包含在您的项目中？我是否只是拔出一把砍刀并开始向前迈进？我经常发现包括所有东西和厨房水槽的项目*

对于基于 Scala 的依赖项，我会采用作者推荐的方式。例如：[http](http://code.google.com/p/scalaz/#SBT) ://code.google.com/p/scalaz/#SBT表示使用：

```
libraryDependencies += "org.scalaz" %% "scalaz-core" % "6.0.4" 
```

或者[https://github.com/typesafehub/sbteclipse/](https://github.com/typesafehub/sbteclipse/)有关于在哪里添加的说明：

```
addSbtPlugin("com.typesafe.sbteclipse" % "sbteclipse-plugin" % "2.1.0-RC1") 
```

对于基于 Java 的依赖项，我使用[http://mvnrepository.com/](http://mvnrepository.com/)来查看其中的内容，然后单击 SBT 选项卡。例如[http://mvnrepository.com/artifact/net.sf.opencsv/opencsv/2.3](http://mvnrepository.com/artifact/net.sf.opencsv/opencsv/2.3)表示使用：

```
libraryDependencies += "net.sf.opencsv" % "opencsv" % "2.3" 
```

然后拔出砍刀，开始前进。如果幸运的话，您最终不会使用依赖于某些相同 jar 但版本不兼容的 jar。鉴于 Java 生态系统，您通常最终会包含所有内容和厨房水槽，并且需要付出一些努力来消除依赖关系或确保您不会丢失所需的依赖关系。

> *举个简单的例子，现在，我正在开始一个全新的项目。我想使用 SLICK 和 Scala 的最新功能，这可能需要最新版本的 SBT。什么是开始的理智点，为什么？*

我认为理智的一点是[逐渐建立对 sbt 的免疫力](http://www.imdb.com/title/tt0093779/quotes#qt0482733)。

确保您了解：

1.  范围格式`{<build-uri>}<project-id>/config:key(for task-key)`
2.  3 种设置风格（`SettingKey`, `TaskKey`, ） - 阅读[http://www.scala-sbt.org/release/docs/Getting-Started/Basic-Def](http://www.scala-sbt.org/release/docs/Getting-Started/Basic-Def)`InputKey`中名为“任务键”的部分

始终保持这 4 页打开，以便您可以跳转并查找各种定义和示例：

1.  [http://www.scala-sbt.org/release/docs/Getting-Started/Basic-Def](http://www.scala-sbt.org/release/docs/Getting-Started/Basic-Def)
2.  [http://www.scala-sbt.org/release/docs/Detailed-Topics/index](http://www.scala-sbt.org/release/docs/Detailed-Topics/index)
3.  [http://harrah.github.com/xsbt/latest/sxr/Keys.scala.html](http://harrah.github.com/xsbt/latest/sxr/Keys.scala.html)
4.  [http://harrah.github.com/xsbt/latest/sxr/Defaults.scala.html](http://harrah.github.com/xsbt/latest/sxr/Defaults.scala.html)

最大限度地利用`show`and`inspect` *和 tab 补全*来熟悉设置的实际值、它们的依赖关系、定义和相关设置。我不相信你会发现使用的关系在`inspect`任何地方都有记录。如果有更好的方法我想知道它。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-10T20:34:58.170

我使用 sbt 的方式是：

1.  使用[sbt-extras](https://github.com/paulp/sbt-extras) - 只需获取 shell 脚本并将其添加到项目的根目录
2.  创建一个包含用于设置 sbt`project`的文件的文件夹。`MyProject.scala`我更喜欢这种`build.sbt`方法 - 它是 scala 并且更灵活
3.  创建一个`project/plugins.sbt`文件并为您的 IDE 添加适当的插件。sbt-eclipse、sbt-idea 或 ensime-sbt-cmd，以便您可以为 eclipse、intellij 或 ensime 生成项目文件。
4.  在项目的根目录中启动 sbt 并为您的 IDE 生成项目文件
5.  利润

我不会费心检查 IDE 项目文件，因为它们是由 sbt 生成的，但可能有你想要这样做的原因。

[您可以在此处](https://github.com/fly-object-space/fly-scala)看到这样设置的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T07:49:25.807

使用 Typesafe Activator，一种调用 sbt 的奇特方式，它带有项目模板和种子：[https ://typesafe.com/activator](https://typesafe.com/activator)

```
Activator new

Fetching the latest list of templates...

Browse the list of templates: http://typesafe.com/activator/templates
Choose from these featured templates or enter a template name:
 1) minimal-java
 2) minimal-scala
 3) play-java
 4) play-scala
(hit tab to see a list of all templates) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-07T14:38:30.047

## 安装

`brew install sbt`或类似的安装 sbt 从技术上讲包括

*   sbt 启动器脚本（bash 脚本）[https://github.com/sbt/sbt-launcher-package](https://github.com/sbt/sbt-launcher-package)
*   sbt 启动器 jar (sbt-launcher.jar) [https://github.com/sbt/launcher](https://github.com/sbt/launcher)
*   核心 sbt (sbt.jar) [https://github.com/sbt/sbt](https://github.com/sbt/sbt)

当您`sbt`从终端执行时，它实际上运行 sbt 启动器 bash 脚本。就个人而言，我从来不用担心这三位一体，只需将 sbt 当作一个单一的东西来使用。

## 配置

`.sbtopts`为项目根目录下的特定项目保存文件配置 sbt 。配置 sbt 系统范围的 modify `/usr/local/etc/sbtopts`。执行`sbt -help`应该告诉你确切的位置。例如，给 sbt 更多的内存作为一次性执行`sbt -mem 4096`，或者保存`-mem 4096`在内存中`.sbtopts`或`sbtopts`使内存增加永久生效。

##  项目结构

`sbt new scala/scala-seed.g8`创建一个最小的 Hello World sbt 项目结构

```
.
├── README.md  // most important part of any software project
├── build.sbt  // build definition of the project
├── project    // build definition of the build (sbt is recursive - explained below)
├── src        // test and main source code
└── target     // compiled classes, deployment package 
```

## 常用命令

```
test                                                // run all test
testOnly                                            // run only failed tests
testOnly -- -z "The Hello object should say hello"  // run one specific test
run                                                 // run default main
runMain example.Hello                               // run specific main
clean                                               // delete target/
package                                             // package skinny jar
assembly                                            // package fat jar
publishLocal                                        // library to local cache
release                                             // library to remote repository
reload                                              // after each change to build definition 
```

## 无数的贝壳

```
scala              // Scala REPL that executes Scala language (nothing to do with sbt)
sbt                // sbt REPL that executes special sbt shell language (not Scala REPL)
sbt console        // Scala REPL with dependencies loaded as per build.sbt
sbt consoleProject // Scala REPL with project definition and sbt loaded for exploration with plain Scala langauage 
```

## 构建定义是一个合适的 Scala 项目

这是关键的惯用 sbt 概念之一。我会试着用一个问题来解释。假设您要定义一个 sbt 任务，该任务将使用 scalaj-http 执行 HTTP 请求。直觉上，我们可能会在里面尝试以下内容`build.sbt`

```
libraryDependencies +=  "org.scalaj" %% "scalaj-http" % "2.4.2"

val fooTask = taskKey[Unit]("Fetch meaning of life")
fooTask := {
  import scalaj.http._ // error: cannot resolve symbol
  val response = Http("http://example.com").asString
  ...
} 
```

但是，这会出错，说 missing `import scalaj.http._`。当我们在上面添加`scalaj-http`到时，这怎么可能`libraryDependencies`？此外，为什么当我们将依赖项添加到时它会起作用`project/build.sbt`？

```
// project/build.sbt
libraryDependencies +=  "org.scalaj" %% "scalaj-http" % "2.4.2" 
```

答案是它`fooTask`实际上是与您的主项目*不同的 Scala 项目的一部分。*这个不同的 Scala 项目可以在`project/`具有自己`target/`的编译类所在目录的目录下找到。事实上，下面`project/target/config-classes`应该有一个类可以反编译成类似的东西

```
object $9c2192aea3f1db3c251d extends scala.AnyRef {
  lazy val fooTask : sbt.TaskKey[scala.Unit] = { /* compiled code */ }
  lazy val root : sbt.Project = { /* compiled code */ }
} 
```

我们看到它`fooTask`只是一个名为 的常规 Scala 对象的成员`$9c2192aea3f1db3c251d`。显然`scalaj-http`应该是项目定义`$9c2192aea3f1db3c251d`的依赖项，而不是正确项目的依赖项。因此它需要在`project/build.sbt`而不是声明`build.sbt`，因为`project`它是构建定义 Scala 项目所在的位置。

为了说明构建定义只是另一个 Scala 项目，请执行`sbt consoleProject`. 这将使用类路径上的构建定义项目加载 Scala REPL。您应该会看到一个类似于以下内容的导入

```
import $9c2192aea3f1db3c251d 
```

所以现在我们可以直接与构建定义项目进行交互，方法是使用 Scala 而不是`build.sbt`DSL 来调用它。例如，以下执行`fooTask`

```
$9c2192aea3f1db3c251d.fooTask.eval 
```

`build.sbt`root 项目下是一个特殊的 DSL，它帮助定义 Scala 项目下的构建定义`project/`。

并且构建定义Scala项目，可以有自己的构建定义下的Scala项目`project/project/`等等。我们说[sbt 是递归的](https://www.scala-sbt.org/1.x/docs/Organizing-Build.html#sbt+is+recursive)。

## sbt 默认是并行的

sbt 从任务中构建[DAG](https://www.scala-sbt.org/1.x/docs/Task-Graph.html#Task+graph)。这允许它分析任务之间的依赖关系并并行执行它们，甚至执行重复数据删除。`build.sbt`DSL 的设计考虑到了这一点，这可能会导致最初令人惊讶的语义。您认为以下代码段中的执行顺序是什么？

```
def a = Def.task { println("a") }
def b = Def.task { println("b") }
lazy val c = taskKey[Unit]("sbt is parallel by-default")
c := {
  println("hello")
  a.value
  b.value
} 
```

直觉上，人们可能会认为这里的流程是先打印`hello`然后执行`a`，然后是`b`任务。然而，这实际上意味着执行`a`和**并行**，并且`b`在此**之前** ****`println("hello")`****

 ****```
a
b
hello 
```

或者因为`a`and`b`的顺序不能保证

```
b
a
hello 
```

也许自相矛盾的是，在 sbt 中并行比串行更容易。如果您需要串行订购，则必须使用特殊的东西，例如`Def.sequential`or`Def.taskDyn`模仿*for-comprehension*。

```
def a = Def.task { println("a") }
def b = Def.task { println("b") }
lazy val c = taskKey[Unit]("")
c := Def.sequential(
  Def.task(println("hello")),
  a,
  b
).value 
```

类似于

```
for {
  h <- Future(println("hello"))
  a <- Future(println("a"))
  b <- Future(println("b"))
} yield () 
```

我们看到组件之间没有依赖关系，而

```
def a = Def.task { println("a"); 1 }
def b(v: Int) = Def.task { println("b"); v + 40 }
def sum(x: Int, y: Int) = Def.task[Int] { println("sum"); x + y }
lazy val c = taskKey[Int]("")
c := (Def.taskDyn {
  val x = a.value
  val y = Def.task(b(x).value)
  Def.taskDyn(sum(x, y.value))
}).value 
```

类似于

```
def a = Future { println("a"); 1 }
def b(v: Int) = Future { println("b"); v + 40 }
def sum(x: Int, y: Int) = Future { x + y }

for {
  x <- a
  y <- b(x)
  c <- sum(x, y)
} yield { c } 
```

我们看到的地方`sum`取决于并且必须等待`a`和`b`。

换句话说

*   对于*应用*语义，使用`.value`
*   对于*一元*语义使用`sequential`或`taskDyn`

考虑[另一个](https://stackoverflow.com/a/61445196/5205022)语义上令人困惑的片段，因为 的依赖构建性质`value`，而不是

```
`value` can only be used within a task or setting macro, such as :=, +=, ++=, Def.task, or Def.setting.
val x = version.value
                ^ 
```

我们必须写

```
val x = settingKey[String]("")
x := version.value 
```

请注意，语法`.value`是关于 DAG 中的关系，并不意味着

> “现在就给我价值”

相反，它意味着类似

> “我的调用者首先取决于我，一旦我知道整个 DAG 是如何组合在一起的，我将能够为我的调用者提供请求的值”

所以现在可能更清楚为什么`x`还不能赋值；在关系建立阶段还没有可用的价值。

我们可以清楚地看到 Scala 本身和`build.sbt`. 这里有一些对我有用的经验法则

*   DAG 由类型表达式组成`Setting[T]`
*   在大多数情况下，我们只使用`.value`语法，而 sbt 将负责建立它们之间的关系`Setting[T]`
*   有时我们必须手动调整 DAG 的一部分，为此我们使用`Def.sequential`或`Def.taskDyn`
*   一旦处理了这些排序/关系语法上的奇怪问题，我们就可以依靠通常的 Scala 语义来构建任务的其余业务逻辑。

##  命令与任务

命令是摆脱 DAG 的一种懒惰方式。使用命令可以很容易地改变构建状态并根据需要序列化任务。代价是我们松散了 DAG 提供的任务的并行化和重复数据删除，哪种方式的任务应该是首选。您可以将命令视为一种可能在内部进行的会话的永久记录`sbt shell`。例如，给定

```
vval x = settingKey[Int]("")
x := 13
lazy val f = taskKey[Int]("")
f := 1 + x.value 
```

考虑下届会议的输出

```
sbt:root> x
[info] 13
sbt:root> show f
[info] 14
sbt:root> set x := 41
[info] Defining x
[info] The new value will be used by f
[info] Reapplying settings...
sbt:root> show f
[info] 42 
```

尤其不是我们如何用`set x := 41`. 命令使我们能够永久记录上述会话，例如

```
commands += Command.command("cmd") { state =>
  "x" :: "show f" :: "set x := 41" :: "show f" :: state
} 
```

我们还可以使用`Project.extract`和使命令类型安全`runTask`

```
commands += Command.command("cmd") { state =>
  val log = state.log
  import Project._
  log.info(x.value.toString)
  val (_, resultBefore) = extract(state).runTask(f, state)
  log.info(resultBefore.toString)
  val mutatedState = extract(state).appendWithSession(Seq(x := 41), state)
  val (_, resultAfter) = extract(mutatedState).runTask(f, mutatedState)
  log.info(resultAfter.toString)
  mutatedState
} 
```

## 范围

当我们尝试回答以下类型的问题时，作用域就会发挥作用

*   如何定义一次任务并使其可用于多项目构建中的所有子项目？
*   如何避免在主类路径上有测试依赖？

sbt 有一个多轴作用域空间，可以使用[斜杠语法](https://stackoverflow.com/a/59868453/5205022)进行导航，例如，

```
show  root   /  Compile         /  compile   /   scalacOptions
        |        |                  |             |
     project    configuration      task          key 
```

就个人而言，我很少发现自己不得不担心范围。有时我只想编译测试源

```
Test/compile 
```

或者可能从特定子项目执行特定任务，而无需先导航到该项目`project subprojB`

```
subprojB/Test/compile 
```

我认为以下经验法则有助于避免范围界定的并发症

*   在根项目下没有多个`build.sbt`文件，但只有一个主文件，它控制所有其他子项目
*   通过自动插件共享任务
*   将通用设置分解为普通 Scala`val`并将其显式添加到每个子项目中

## 多项目构建

而不是每个子项目的多个 build.sbt 文件

```
.
├── README.md
├── build.sbt                  // OK
├── multi1
│   ├── build.sbt              // NOK
│   ├── src
│   └── target
├── multi2
│   ├── build.sbt              // NOK
│   ├── src
│   └── target
├── project                    // this is the meta-project
│   ├── FooPlugin.scala        // custom auto plugin
│   ├── build.properties       // version of sbt and hence Scala for meta-project
│   ├── build.sbt              // OK - this is actually for meta-project 
│   ├── plugins.sbt            // OK
│   ├── project
│   └── target
└── target 
```

有一个主人`build.sbt`来统治他们

```
.
├── README.md
├── build.sbt                  // single build.sbt to rule theme all
├── common
│   ├── src
│   └── target
├── multi1
│   ├── src
│   └── target
├── multi2
│   ├── src
│   └── target
├── project
│   ├── FooPlugin.scala
│   ├── build.properties
│   ├── build.sbt
│   ├── plugins.sbt
│   ├── project
│   └── target
└── target 
```

在多项目构建中[分解出通用设置](https://stackoverflow.com/questions/4334534/how-to-set-default-dependencies-for-all-subprojects-in-sbt#comment31469407_20951900)是一种常见做法

> 在 val 中定义一系列常用设置并将它们添加到每个项目中。以这种方式学习的概念更少。

例如

```
lazy val commonSettings = Seq(
  scalacOptions := Seq(
    "-Xfatal-warnings",
    ...
  ),
  publishArtifact := true,
  ...
)

lazy val root = project
  .in(file("."))
  .settings(settings)
  .aggregate(
    multi1,
    multi2
  )
lazy val multi1 = (project in file("multi1")).settings(commonSettings)
lazy val multi2 = (project in file("multi2")).settings(commonSettings) 
```

项目导航

```
projects         // list all projects
project multi1   // change to particular project 
```

## 插件

请记住，构建定义是一个适当的 Scala 项目，位于`project/`. 这是我们通过创建`.scala`文件来定义插件的地方

```
.                          // directory of the (main) proper project
├── project
│   ├── FooPlugin.scala    // auto plugin
│   ├── build.properties   // version of sbt library and indirectly Scala used for the plugin
│   ├── build.sbt          // build definition of the plugin
│   ├── plugins.sbt        // these are plugins for the main (proper) project, not the meta project
│   ├── project            // the turtle supporting this turtle
│   └── target             // compiled binaries of the plugin 
```

这是一个最小的自动[插件](https://stackoverflow.com/questions/28521226/how-to-share-sbt-plugin-configuration-between-multiple-projects/28522496#28522496)`project/FooPlugin.scala`

```
object FooPlugin extends AutoPlugin {
  object autoImport {
      val barTask = taskKey[Unit]("")
  }

  import autoImport._

  override def requires = plugins.JvmPlugin  // avoids having to call enablePlugin explicitly
  override def trigger = allRequirements

  override lazy val projectSettings = Seq(
    scalacOptions ++= Seq("-Xfatal-warnings"),
    barTask := { println("hello task") },
    commands += Command.command("cmd") { state =>
      """eval println("hello command")""" :: state
    }   
  )
} 
```

覆盖

```
override def requires = plugins.JvmPlugin 
```

应该有效地为所有子项目启用插件，而无需显式`enablePlugin`调用`build.sbt`.

## IntelliJ 和 sbt

请启用以下设置（[默认情况下](https://youtrack.jetbrains.com/issue/SCL-12850)应该真正启用）

```
use sbt shell 
```

在下面

```
Preferences | Build, Execution, Deployment | sbt | sbt projects 
```

## 主要参考资料

*   [sbt - 声明式 DSL](https://jazzy.id.au/2015/03/04/sbt-declarative-dsl.html)
*   [任务图](https://www.scala-sbt.org/1.x/docs/Task-Graph.html#Task+graph)
*   [如何在多个项目之间共享 sbt 插件配置？](https://stackoverflow.com/questions/28521226/how-to-share-sbt-plugin-configuration-between-multiple-projects/28522496#28522496)
*   [使用 sbt shell 构建和导入](https://stackoverflow.com/questions/49213653/use-sbt-shell-for-build-and-import/60706327#60706327)****

# gwt - GWT background image

> ID：11411243
> 
> 赞同：2
> 
> 时间：2012-07-10T10:20:16.660
> 
> 标签：gwt

I am using gwt for showing a dynamic image inside a td and the image is coming from a imagebundle but its showing the whole big image, which gwt makes during compilation, inside that td rather than showing specific part from that big image. I don't know what I am missing here... The problem is the image will be added and selected dynamically and I can't define a css everytime I add an image. If anyone of you can help me regarding it. Here is my code

My table cell is defined inside the UiBinder something like....

```
 <ui:style>
          .colourPickerCell {
             background-repeat:no-repeat;
          }
    </ui:style>

         <tr>
            <td class="{style.colourPickerCell}" ui:field="colourPreviewSlot" rowspan="3" width="50%"></td>
        </tr> 
```

Function inside the presenter class:

```
 public void newColorSelected(Image patternImage) { 
            Style patternImageStyle = patternImage.getElement().getStyle();
            Style style = getColourPreviewSlot().getStyle();
            style.setWidth(patternImage.getWidth(), Unit.PX);
            style.setBackgroundImage(patternImageStyle.getBackgroundImage());
            style.setLeft(-patternImage.getOriginLeft(), Unit.PX);
            style.setTop(-patternImage.getOriginTop(), Unit.PX);
            style.setHeight(patternImage.getHeight(), Unit.PX);

        } 
```

When I debug my code I get the html for patternImage object as:

```
 <img id="..." style="backgrond:url(....) no-repeat -149px 12px;"/> 
```

Best regards,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:28:19.417

如果您将此图像用作背景精灵，它认为您必须使用[background-position](http://www.w3schools.com/cssref/pr_background-position.asp) css 属性将图像“移动”到 td“后面”。

“left”和“top”属性与您设置样式的元素相关，而不是其底层背景图像。

# javascript - Google Maps API V3 - 防止 ImageMapType 换行

> ID：11411246
> 
> 赞同：9
> 
> 时间：2012-07-10T10:20:29.113
> 
> 标签：javascript, google-maps, google-maps-api-3, imagemap

**请注意：**

这个问题与我在 stackoverflow 上找到的这个问题非常相似。

[谷歌地图 v3 ImageMapType 防止包装](https://stackoverflow.com/questions/10898279/google-maps-v3-imagemaptype-prevent-wrapping)

但是，上述问题和答案不适用于我的示例/问题，因为我需要能够以任何缩放级别查看我的所有图像，更重要的是我需要绘图工具才能正常工作。

* * *

**我的场景：**

我有一个自定义的谷歌地图`ImageMapType`，它也有`DrawingManager`库和工具。

**我的问题：**

乍一看，一切都很好，但是如果您要绘制任何标记或多边形，然后平移地图，则标记/多边形会重复或在视图中的地图区域内移动。

在地图上绘制大多边形时也会出现同样的问题，当您绘制多边形时，您会注意到您正在绘制的线会突然捕捉到多边形的错误一侧。

**我的问题：**

如何防止包装问题，以使所有标记都不会移动或重复，并且绘图工具可以在不捕捉到多边形的另一侧的情况下工作？

* * *

**在线示例：**

[http://jsbin.com/ecujug/5/edit#javascript,live](http://jsbin.com/ecujug/5/edit#javascript,live)

**问题视频：**

[https://dl.dropbox.com/u/14037764/Development/stackoverflow/map-drawing/issue.html](https://dl.dropbox.com/u/14037764/Development/stackoverflow/map-drawing/issue.html)

**期望的效果：**

[http://www.maplib.net/map.php?id=1236](http://www.maplib.net/map.php?id=1236)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-22T10:03:40.880

您应该在更高的级别上工作，而不是`1-3`缩放级别，并`(0,0)`为图像选择其他原点而不是平铺。您需要的只是简单的**数学**。默认情况下，您的地图将以`LatLng(0,0)`点为中心（正如您在 中提到的`MapOptions`），计算将围绕该点执行。

# 理论

在任何缩放中，完全有`2^zoom x 2^zoom`瓷砖：

```
 zoom
  _______________________ 2
  |_|_|_|_|_|_|_|_|_|_|_|
  |_|_|_|_|_|_|_|_|_|_|_|
  |_|_|_|_|_|_|_|_|_|_|_|          
  |_|_|_|_|_|_|_|_|_|_|_|          
  |_|_|_|_|_|_|_|_|_|_|_|
  |_|_|_|_|_|_|_|_|_|_|_|          
  |_|_|_|_|_|_|_|_|_|_|_|
  |_|_|_|_|_|_|_|_|_|_|_|
  |_|_|_|_|_|_|_|_|_|_|_|
  |_|_|_|_|_|_|_|_|_|_|_| 
  zoom
 2 
```

与`LatLng(0,0)`中心 GPS 点一样，包含该点的图块应该是 的中心图块`tile-sheet`：

```
 zoom
  _______________________ 2
  |                     |
  |                     |
  |                     |           zoom
  |                     |          2         zoom-1
  |          o----------|-------*  ------ = 2
  |          |_|        |            2
  |          |          |
  |          |          |
  |          |          |
  |__________|__________| 
  zoom       |
 2           |  zoom-1
             * 2 
```

因此，在任何`zoom`级别，中心图块都有`(2^(zoom-1), 2^(zoom-1))`坐标。该图块将是`origin`映射的。通过*从当前图块的坐标中减去原点坐标*，我们将得到这样的结果，例如`coordinate-space`当我们在`1-3`缩放级别中工作时以及原点是`(0,0)`图块时。

# 执行

首先，选择更高的缩放级别，例如：

```
var MIN_ZOOM = 11,
    MAX_ZOOM = 13; 
```

映射将由`getNormalizedCoord`函数完成：

```
function getNormalizedCoord(coord, zoom) {
    //Amount of total tiles:
    // MIN_ZOOM    ->     1 tile
    // MIN_ZOOM+1  ->     2 tiles
    // MIN_ZOOM+2  ->     4 tiles
    var totalTiles = 1 << (zoom - MIN_ZOOM),
        y = coord.y,
        x = coord.x;
    var originx = 1 << (zoom-1),
        originy = 1 << (zoom-1);

    if(y < originx || y >= originx + totalTiles ||
        x < originx || x >= originx + totalTiles){
        return null;
    }

    x -= originx;
    y -= originy;

    return { x:x, y:y };
 } 
```

最后，`ImageMapOptions`应该是：

```
var siteMapOptions = {
    getTileUrl: function (coord, zoom) {
         var normalizedCoord = getNormalizedCoord(coord, zoom);
         if (normalizedCoord) {
             return 'https://edocstorage.blob.core.windows.net/siteimages/2fa9fc72-23a7-41ed-86a1-b83a3ba04790/_siteTiles/tile_' + 
                    (zoom-MIN_ZOOM) + '_' + 
                    normalizedCoord.x + '-' + 
                    normalizedCoord.y + '.png';
         } else {
             return 'content/tilecutter/empty.jpg';
         }
    },
    tileSize: new google.maps.Size(256, 256),
    maxZoom: MAX_ZOOM,
    minZoom: MIN_ZOOM,
    radius: 1738000,
    name: "Site Plan"
}; 
```

# [现场演示](http://jsbin.com/iwepuq/2/edit#preview)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T17:39:00.800

似乎很明显 - 谷歌地图认为这是一个完整的地球，所以它是圆形的。为什么要在最小（地球范围）缩放级别上工作？让谷歌地图认为这只是一小块土地，不超过 1°，你就完成了。

# android - Android NdefFormattable tag write error

> ID：11411247
> 
> 赞同：3
> 
> 时间：2012-07-10T10:20:42.103
> 
> 标签：android, nfc

```
07-10 15:27:48.158: W/System.err(1300): java.io.IOException
07-10 15:27:48.158: W/System.err(1300):     at android.nfc.tech.BasicTagTechnology.connect(BasicTagTechnology.java:85)
07-10 15:27:48.158: W/System.err(1300):     at android.nfc.tech.NdefFormatable.connect(NdefFormatable.java:47) 
```

The above error is what i get when i try writing an NdefFormattable fresh empty tag using

```
NdefFormatable nf = NdefFormatable.get(localTag);
nf.connect();
nf.format(nm); 
```

where nm is a correctly formatted `NdefMessage`.

I have no idea why this error is coming. This is android api-15.

Also, i know IO has got to do with the actual writing process. But the tag i'm trying to write is in the same place as when it is read!

# winforms - 希腊字符不显示在 winform 组合框中

> ID：11411249
> 
> 赞同：1
> 
> 时间：2012-07-10T10:20:50.450
> 
> 标签：winforms, unicode, datagrid, .net-2.0

我正在开发一个 winform 应用程序，在该应用程序中，我有一个带有显示某些长度测量单位的列的网格。我已经定义了一个列，如下所示。

```
var unitColumn = new DataGridViewComboBoxColumn {
    Name = "UnitColumn",
    HeaderText = "UnitColumnHeader",
    Width = 80,
    DataSource = new[] { "nm", "mm", "μm" },
};
_calibGrid.Columns.Add(unitColumn); 
```

如您所见，组合框中的第二项应该显示`μm`，但它显示`m`. 在我选择正确显示的单元格中的项目文本后。我对winform开发很陌生，有人可以建议修复/解决方案吗？

![在此处输入图像描述](../Images/c4e074c046247cc427100a80bb149de0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T16:13:02.470

`Try - Console.WriteLine("\u00b5");`

![在此处输入图像描述](../Images/cea27a43ad3ea55f75d595c29f6a562f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T06:30:27.557

我遇到了同样的问题（但还有其他一些字符）。不知道为什么会这样。

实现 DrawItem 事件并正确绘制文本非常简单。我们使用类似这样的方法： [https ://stackoverflow.com/a/857232/417721](https://stackoverflow.com/a/857232/417721)

# sencha-touch-2 - 对于选项卡面板 iconCls 不适用于 Android

> ID：11411250
> 
> 赞同：0
> 
> 时间：2012-07-10T10:20:54.047
> 
> 标签：sencha-touch-2

我创建了选项卡面板，并使用 iconCls 属性在选项卡按钮上显示不同的图标。这适用于桌面上的 chrome 浏览器和 iPad 上的 safari。但是这些图标图像没有显示在 andorid 选项卡上，而是显示为空白方块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:14:49.370

检查 chrome 中的元素并查看控制台日志。如果您正在调试，那么它可能在 Web 浏览器中工作，但会告诉您发生了什么错误。

否则，请确保您的样式表在 android 中正确链接，并尝试使用默认的 iconCls 类来查看它们是否有效。如果您正在创建一个自定义的而不使用 sass，那么您可能没有正确链接实际的图标文件。

否则，如果您正在使用任何自定义 CSS，请提供选项卡按钮的代码。

# jquery - 使用 jQuery 验证重新定位错误标签

> ID：11411251
> 
> 赞同：8
> 
> 时间：2012-07-10T10:20:54.850
> 
> 标签：jquery, jquery-validate

所以我正在使用[jQuery 验证](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)并且已经管理（尽管有一些过时的文档）来让一组必需的单选框工作。问题是插件直接在第一个无线电之后附加错误标签（该组中具有所需类的第一个）。

考虑到这一点，是否可以为每个错误标签设置自定义位置？

作为参考，这是 HTML：

```
<tr>
    <td width="200">
        <label>Title2 *</label>
    </td>
    <td width="505">
>>>     <label><input type="radio" class="required" name="Title2" value="Mr" /> <!-- ERROR APPEARS HERE -->Mr</label>
        <label><input type="radio" class="required" name="Title2" value="Miss" />Miss</label>
        <label><input type="radio" class="required" name="Title2" value="Mrs" />Mrs</label>
        <label><input type="radio" class="required" name="Title2" value="Ms" />Ms</label>
        <!-- I WANT ERROR LABEL HERE -->
    </td>
</tr> 
```

在标记的行上滚动`>>>`，您会看到显示插件正在放置错误标签的注释，就在关闭之前，`</td>`您会看到我想要标签的位置。

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T10:38:35.913

尝试在您想要的位置添加标签标签：

```
<label class="error" for="Title2" generated="true"></label> 
```

插件将使用这个标签来显示错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:26:23.853

为什么你不能把css像

```
span.error{
  position:absolute;
  right:0;
} 
```

这会将您的跨度放在右侧，并且看起来也不错。如果您感到困惑，请将您的代码放入 jsfiddle。我会在那里做的。

或查看如何放置错误容器的示例 [http://jquery.bassistance.de/validate/demo/errorcontainer-demo.html](http://jquery.bassistance.de/validate/demo/errorcontainer-demo.html)

# excel - 使用 OpenXML 将 xml 数据导出到 Excel

> ID：11411252
> 
> 赞同：0
> 
> 时间：2012-07-10T10:20:55.960
> 
> 标签：excel, openxml, export-to-excel, xmldatasource

该文件正在下载一个 xlsx 文件，但是当我尝试打开该文件时，它说**文件已损坏**。这是我尝试使用的代码，如果需要对以下内容进行任何更改，请告诉我。

```
private void button1_Click(object sender, EventArgs e)
{
    ArrayList DataNode = new ArrayList();
    XmlDocument xmlobj = new XmlDocument();
    ArrayList FinalXML = new ArrayList();
    XslCompiledTransform xXslt = new XslCompiledTransform();
    xmlobj.Load(@"D:\ExcelImport\Input.xml");
    xXslt.Load(@"D:\ExcelImport\demoxsl.xslt");
    XmlNodeList DN ;
    DN = xmlobj.DocumentElement.GetElementsByTagName("Data");
    for (int i = 0; i < DN.Count; i++)
    {
        DataNode.Add("<ShaleDataExport><Data Flag = '" + i + "' >" + DN.Item(i).InnerXml + "</Data></ShaleDataExport>");    
    }
    string ShaleDataExportXML;
    int k = 0 ;
    while (k < DN.Count)
    {
        ShaleDataExportXML = DataNode[k].ToString();
        XmlDocument xml =  new XmlDocument();
        xml.LoadXml(ShaleDataExportXML);
        StringWriter sw = new StringWriter();  
        xXslt.Transform(xml, null, sw);
        FinalXML.Add(sw);
        sw.Close();
        k++;
    }
    using (SpreadsheetDocument doc = SpreadsheetDocument.Create(@"D:\ExcelImport\OutPut\OutPut.xlsx", DocumentFormat.OpenXml.SpreadsheetDocumentType.Workbook))
    {
        WorkbookPart workbook = doc.AddWorkbookPart();
        string XML;
        string WorbookXML;
        WorbookXML = @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><workbook xmlns=""schemas.openxmlformats.org/.../main"" xmlns:r=""schemas.openxmlformats.org/.../relationships""><sheets>";
        for (int j = 0; j < DN.Count; j++)
        {
            WorksheetPart[] sheet = new WorksheetPart[DN.Count];
            sheet[j] = workbook.AddNewPart<WorksheetPart>();
            string sheetId = workbook.GetIdOfPart(sheet[j]);
            XML = @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><worksheet xmlns=""schemas.openxmlformats.org/.../main"" >";
            XML += FinalXML[j].ToString() + "</worksheet>";
            string SheetXML = XML.ToString();
            XmlDocument SXML = new XmlDocument();
            SXML.LoadXml(SheetXML);
            byte[] byteArray = Encoding.ASCII.GetBytes(SXML.OuterXml);
            MemoryStream stream = new MemoryStream(byteArray);
            StreamReader reader = new StreamReader(stream);
            string text = reader.ReadToEnd();
            WorbookXML += "<sheet name="+ AddPartXml(sheet[j], text) + " sheetId=" + j.ToString() + "  r:id=" + sheetId.ToString() + " />";
        }
        WorbookXML += "</sheets></workbook>";
        AddPartXml(workbook, WorbookXML);
        doc.Close();
    }
}
public string  AddPartXml(OpenXmlPart part, string xml)
{
    Uri uri = part.Uri;
    String[] sheetNames = uri.OriginalString.Split('/');
    string sheetName = sheetNames[sheetNames.Length - 1].Split('.')[0];
    using (Stream stream = part.GetStream())
    {
        byte[] buffer = (new UTF8Encoding()).GetBytes(xml);
        stream.Write(buffer, 0, buffer.Length);
    }
    return sheetName;
} 
```

提前致谢

维内特曼格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T06:04:14.710

```
 private void button1_Click(object sender, EventArgs e)
        {
            XmlDocument xmlobj = new XmlDocument();
            xmlobj.Load(@"C:\Excel Import\\Input.xml");
            XslCompiledTransform xXslt = new XslCompiledTransform();
            xXslt.Load(@"C:\ExportToexcel\Data.xslt");

            StringWriter sw = new StringWriter();

            xXslt.Transform(xmlobj, null, sw);
            richTextBox2.Text = sw.ToString();
            sw.Close();
            XmlDocument Xdoc = new XmlDocument();
            Xdoc.LoadXml(sw.ToString());
            Xdoc.Save(@"c:\temp\output.xml");
            StreamReader sr = File.OpenText(@"c:\temp\output.xml");

            string strSheetData = sr.ReadToEnd();
            ArrayList DataNode = new ArrayList();
            ArrayList FinalXML = new ArrayList();
            XmlNodeList DN;
            DN = xmlobj.DocumentElement.GetElementsByTagName("Data");
            for (int i = 0; i < DN.Count; i++)
            {
                DataNode.Add("<ShaleDataExport><Data Flag = '" + i + "' >" + DN.Item(i).InnerXml + "</Data></ShaleDataExport>");

            }
            string ShaleDataExportXML;
            int k = 0;
            while (k < DN.Count)
            {
                ShaleDataExportXML = DataNode[k].ToString();
                XmlDocument xml = new XmlDocument();
                xml.LoadXml(ShaleDataExportXML);
                StringWriter sw1 = new StringWriter();
                xXslt.Transform(xml, null, sw1);
                FinalXML.Add(sw1);
                sw.Close();
                k++;
            }

            using (SpreadsheetDocument doc = SpreadsheetDocument.Create(@"c:\\temp\\output.xlsx", DocumentFormat.OpenXml.SpreadsheetDocumentType.Workbook))
            {
                WorkbookPart workbook1 = doc.AddWorkbookPart();
                string XML;
                string WorbookXML;
                WorbookXML = @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><workbook xmlns=""http://schemas.openxmlformats.org/spreadsheetml/2006/main"" xmlns:r=""http://schemas.openxmlformats.org/officeDocument/2006/relationships""><sheets>";
                for (int j = 0; j < DN.Count; j++)
                {
                    WorksheetPart[] sheet = new WorksheetPart[DN.Count];
                    sheet[j] = workbook1.AddNewPart<WorksheetPart>();
                    string sheetId = workbook1.GetIdOfPart(sheet[j]);
                    XML = @"<?xml version=""1.0"" encoding=""UTF-8"" standalone=""yes""?><worksheet xmlns=""http://schemas.openxmlformats.org/spreadsheetml/2006/main"" >";
                    XML += FinalXML[j].ToString() + "</worksheet>";
                    string SheetXML = XML.ToString();
                    XmlDocument SXML = new XmlDocument();
                    SXML.LoadXml(SheetXML);
                    byte[] byteArray = Encoding.ASCII.GetBytes(SXML.OuterXml);
                    MemoryStream stream = new MemoryStream(byteArray);
                    StreamReader reader = new StreamReader(stream);
                    string text = reader.ReadToEnd();
                    **WorbookXML += "<sheet name=" + "\"sheet" + (j + 1).ToString() + "\" " + " sheetId=\"" + (j + 1).ToString() + "\"  r:id=\"" + sheetId.ToString() + "\" />";
                    AddPartXml(sheet[j], text);**
                }
                WorbookXML += "</sheets></workbook>";
                AddPartXml(workbook1, WorbookXML);
                doc.Close();
            }

        }

        public void AddPartXml(OpenXmlPart part, string xml)
        {
            **using (Stream stream = part.GetStream())
            {
                byte[] buffer = (new UTF8Encoding()).GetBytes(xml);
                stream.Write(buffer, 0, buffer.Length);
            }**
        } 
```

# android - MAdView 中 onTouchEvent 上的 NPE

> ID：11411261
> 
> 赞同：0
> 
> 时间：2012-07-10T10:21:24.717
> 
> 标签：android, android-layout, nullpointerexception, touch-event

我已按照[此处描述的所有步骤进行操作](http://wiki.millennialmedia.com/index.php/Android)

添加没有出现，但是当我触摸添加区域时，它给了我 NPE

```
07-10 15:37:20.564: E/AndroidRuntime(715): FATAL EXCEPTION: main
07-10 15:37:20.564: E/AndroidRuntime(715): java.lang.NullPointerException
07-10 15:37:20.564: E/AndroidRuntime(715):  at com.millennialmedia.android.MMAdView.onTouchEvent(MMAdView.java:631)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.View.dispatchTouchEvent(View.java:3766)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:897)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:936)
07-10 15:37:20.564: E/AndroidRuntime(715):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
07-10 15:37:20.564: E/AndroidRuntime(715):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
07-10 15:37:20.564: E/AndroidRuntime(715):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.os.Looper.loop(Looper.java:123)
07-10 15:37:20.564: E/AndroidRuntime(715):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-10 15:37:20.564: E/AndroidRuntime(715):  at java.lang.reflect.Method.invokeNative(Native Method)
07-10 15:37:20.564: E/AndroidRuntime(715):  at java.lang.reflect.Method.invoke(Method.java:521)
07-10 15:37:20.564: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-10 15:37:20.564: E/AndroidRuntime(715):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-10 15:37:20.564: E/AndroidRuntime(715):  at dalvik.system.NativeStart.main(Native Method) 
```

从 onCreate 调用我的添加

```
Hashtable<String, String> map = new Hashtable<String, String>();
        map.put("age", "45");
        map.put("zip", "90210");
        map.put("income", "50000");
        LinearLayout myLayout = (LinearLayout) findViewById(R.id.layoutadd);
        adview = new MMAdView(Result.this, MYAPID, MMAdView.BANNER_AD_BOTTOM, 30,map);//(Result.this, MYAPID,"MMBannerAdBottom", 30,false);
         adview.setId(MMAdViewSDK.DEFAULT_VIEWID + 1);
         myLayout.addView(adview, new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
         MMAdListener listener = new MyAdListener();
          adview.setListener(new com.millennialmedia.android.BasicMMAdListener());//listener);
          adview.callForAd(); 
```

注意：这种情况只发生在最新的千禧年媒体上。旧版本说在 logcat 中没有添加返回并继续工作。

**编辑：**经过很多事情，我搬到了 xml，它就像冠军一样工作。现在我认为java代码的问题是没有添加adview来正确查看，因此触摸广告空间给了NPE。任何人都可以详细说明这一点吗？

# asp.net - 为什么 DataContext 类会创建一个新的数据库？

> ID：11411265
> 
> 赞同：0
> 
> 时间：2012-07-10T10:21:33.517
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

伙计们，我是 asp .net mvc 3 的新手。

在 MS Visual Web Developer Express 2010 中，我使用表单身份验证模板使用 Visual C# / Web / ASP .net MVC 3 Web App 创建了一个新项目。我删除了所有控制器和视图文件并添加了我自己的。我在文件夹中添加了一个新`sample.mdf`数据库`App_Data`并相应地更改了连接字符串并创建了国家模型。

但是当我为国家模型创建 CRUD 控制器时，它会询问我的`DataContext`类。它不接受空，我不得不提`DataContext`类。当我创建一个`DataContext`类时，它会创建一个与该类同名的新数据库`DataContext`。它不使用我在`web.config`文件中指定的数据库。

我希望将 Country 模型数据添加到`sample.mdf`文件中而不是上下文数据库中。

请帮忙...谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:02:58.437

数据上下文类只是一个将模型类映射到数据库中的表的类。在 Web 配置中，连接字符串名称应与您的上下文类 (datacontext.cs) 相同：

```
<add name="datacontext" connectionString="[connectionstringhere]" /> 
```

如果连接字符串指向一个不存在的 SQL CE 数据库...当您运行应用程序时，EF 会检测到该数据库不存在，并根据数据上下文类中设置的模型自动创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T14:34:26.760

您可以传入连接字符串以在上下文构造函数中使用。这样你就可以使用任何你想要的数据库。

# javascript - 单击时更改按钮和 div

> ID：11411267
> 
> 赞同：0
> 
> 时间：2012-07-10T10:21:39.010
> 
> 标签：javascript, jquery, html, css

您好，我需要使用“查看 360”按钮来模仿此网站功能：http: [//www.designrattan.co.uk/daybed/apple](http://www.designrattan.co.uk/daybed/apple)

我已经完成了 360 脚本，只是我无法解决的按钮？

我在这里尝试过：http: [//designliving.tk/winchester-rattan-garden-round-table-set](http://designliving.tk/winchester-rattan-garden-round-table-set)

但如您所见，有几件事是错误的。

单击按钮时我需要更改 DIV，但每次单击时我也需要更改按钮（从“查看 360”到“查看图像”）。

除此之外，我需要照片选项卡中的图像才能将 div 和按钮更改回“查看 360”

我想我有 JavaScript，但我不知道如何将它与 HTML 结合使用

```
$('.yourButton').bind('click',function(){
if (!$('.yourButton').hasClass('dragMode')) {
    $('.yourButton').addClass('dragMode');
    $('.yourButton').attr('value')="Drag [...]";
} else { // if in drag mode
    $('.yourButton').removeClass('dragMode');
    $('.yourButton').attr('value')="View 360";
}
});

$('.yourTabImages').bind('click',function(){
if ($('.yourButton').hasClass('dragMode')) {
    $('.yourButton').removeClass('dragMode');
    $('.yourButton').attr('value')="View 360";
}
}); 
```

我希望这一切都有意义！

感谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:39:35.007

如果您使用 jquery，则可以通过以下方式轻松实现：

```
$('.yourButton').bind('click',function(){
    if (!$('.yourButton').hasClass('dragMode')) {
        $('.yourButton').addClass('dragMode');
        $('.yourButton').attr('value')="Drag [...]";
    } else { // if in drag mode
        $('.yourButton').removeClass('dragMode');
        $('.yourButton').attr('value')="View 360";
    }
});

$('.yourTabImages').bind('click',function(){
    if ($('.yourButton').hasClass('dragMode')) {
        $('.yourButton').removeClass('dragMode');
        $('.yourButton').attr('value')="View 360";
    }
}); 
```

这样，您可以在处理单击事件时选择要调用的方法时验证按钮处于哪种模式。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:31:53.137

不要实现你自己的代码，这需要时间。使用您喜欢的任何插件： [http ://www.jquery4u.com/plugins/jquery-360-degrees-image-display-plugins/#.T_wDU5GFp9g](http://www.jquery4u.com/plugins/jquery-360-degrees-image-display-plugins/#.T_wDU5GFp9g)

# silverlight - Silverlight 背景图片

> ID：11411274
> 
> 赞同：1
> 
> 时间：2012-07-10T10:21:54.507
> 
> 标签：silverlight, image, xaml

我的问题是图像只显示在设计器中。无论我尝试什么方法，它总是显示在那里，但是一旦我真正启动程序，它就只是白色的。

我的 XAML 代码：

```
<Grid.Background>
<ImageBrush ImageSource="C:\Users\Martin Clemens Bloch\Desktop\Mappe of 
Text\DTU\Bachelor\Silverlight\OrgOS\OrgOS\Data\BackgroundS.jpeg"/>
</Grid.Background> 
```

有问题的网格位于最前面，因此背景图像不应有任何“阻挡视图”，

图像已添加到项目中，我尝试了不同的构建操作，包括“资源”、“内容”和“嵌入资源”以及“始终复制”和“不复制”。

我还尝试了“/BackgroundS.jpg”的相对路径，同时将图像放在带有 XAP 文件的 clientbin 和其他地方。

我还尝试通过将 xap 重命名为 zip 并在放置图像后将图像放回 XAP 文件中。

我也重新启动了VS2011。

有些是我自己尝试的，有些是在大量教程和 stackoverflow 问题之后尝试的。

现在我们在这里谈论一个图像，我做错了什么！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:25:21.380

您需要将您的图像作为*资源*包含在 silverlight 项目中，并像这样引用它：

```
<ImageBrush ImageSource="/The.Assembly.With.Images;component/the/path/to/the/images/myimage.png"/> 
```

# git - git 从存储库和旧提交中删除文件

> ID：11411277
> 
> 赞同：0
> 
> 时间：2012-07-10T10:22:15.283
> 
> 标签：git, repository

我有一个包含私人数据的文件。目前没关系，因为存储库是私有的。

我想将其公开，但我不希望此文件保持公开。

是否可以修改此文件的提交以从整个存储库中删除此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:23:20.307

[我找到了答案： https](https://help.github.com/articles/remove-sensitive-data) : //help.github.com/articles/remove-sensitive-data :p

# javascript - 使用 D3.js 加载本地数据进行可视化

> ID：11411280
> 
> 赞同：13
> 
> 时间：2012-07-10T10:22:25.427
> 
> 标签：javascript, json, d3.js

我正在做一个需要我可视化相当复杂类型的数据的项目（请参阅[这个较早的问题](https://stackoverflow.com/q/11297061/328725)）。简而言之，我有大量数据可以导出为 JSON、CSV 或其他任意平面格式，尽管我更愿意尽可能避免使用 XML（有关基础数据的详细说明，请参阅上面的链接问题）。

我已经开始使用 D3 进行可视化，到目前为止，当我使用一些非常简单的数据进行测试时，我编写的布局似乎工作正常，这些数据我在 Javascript 中硬编码为数组。我在 D3 中阅读的有关数据绑定的教程有点令人困惑，因为有些使用 JSON，有些使用 TXT/CSV 格式，而另一些使用硬编码的数组/矩阵。

对于 JSON，我观看了一个教程，其中叙述者强烈建议将 JSON 文件托管在网络服务器上，并使用 HTTP 请求而不是读取本地文件来获取它。我意识到这是由于跨域请求限制，我相信我必须以某种方式解决。在这一点上，我不确定如何进行，因为：

1.  D3 驱动的可视化将出现在一系列 HTML 报告中，这些报告是作为我编写的分析工具的结果创建的。分析在用户计算机上完成，HTML 报告也在客户端本地创建。

2.  目标用户绝对不是精通技术的，因此不能指示他们在他们的计算机上运行网络服务器以便能够通过 localhost 提供 JSON 或任何其他类型或资源

作为记录，我尝试运行 python SimpleHTTPServer 模块进行尝试，一切正常。然后我尝试在生成的 HTML 报告中对数据进行硬编码，然后从使用 D3 的脚本中调用 JSON 对象，

```
//d3.json("mydata.json", function(json){
d3.json(myjson, function(json){
    nodeData = json.elements;
....
} 
```

这失败了，因为在这种情况下，我最终发送了一个 JSON 对象，而 D3.js 期待一个 URL。

我能做些什么来避免/解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T04:41:16.620

要在不使用服务器的情况下加载数据本地文件，请将脚本标记附加到正文，并将源数据分配给您期望的变量或对象元素。在下面的示例中，我从 [COUNTRY_ISO3CODE].js 文件加载某个国家/地区的数据。具体来说，阿富汗数据文件可能具有以下格式的内容：

```
data[AFG] = {"name": "Afghanistan", "estimate": 9.003, ... } 
```

调用文件将具有以下内容：

```
if (!data[iso3]) { //only load the needed data-script as needed

    // if using jQuery
    $('body').append("<script type='text/javascript' src='jdb/"+ iso3 +".js'></script>")

    //If not using jQuery
    /*var script   = document.createElement("script");
    script.type  = "text/javascript";
    script.src   = "jdb/"+iso3+".js"; //?_="+ (new Date()); URL might have to be randomized to avoid cached data
    document.body.appendChild(script);
    */

    // call the data-handling function only after 
    // the desired data has fully loaded
    // in this case, I check every 100 milliseconds
    var intervalId = setInterval( function () {
        if (data[iso3]) {    //once data is detected, process data
            clearInterval(intervalId); //stop checking for data
            prepData(mainWrapper, iso3)
            drawCharts(mainWrapper, iso3)
        }
    }, 100)
}
else drawCharts(mainWrapper, iso3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-07T18:28:12.757

对于 JSON：

```
var data = JSON.parse(JavascriptStringVariableThatContainsJSON); 
```

对于 CSV：

```
 var data = d3.csv.parseRows(JavascriptStringVariableThatContainsMyCSVdata); 
```

//然后将数据添加到图形并调用回车，例如：

```
 var dataEnter = svg.selectAll("rect").data(data).enter(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-16T11:55:55.170

因此，您想通过 FileReader 调用加载本地数据，以下内容取自[Reading local files in JavaScript](http://www.html5rocks.com/en/tutorials/file/dndfiles/ "用 JavaScript 读取本地文件")。但是，在上面的示例的基础上，此代码将图像文件加载到 svg 中，而不链接文件，而是实际将栅格数据插入到 svg 中。并随意用*任何*其他数据替换栅格数据，只需为其添加正确的处理...

首先关闭该`<body>`部分中的支持 html 元素：

```
<input type="file" id="files" name="files[]" multiple /> 
```

然后，您想将该`<input ... />`元素链接到该部分中的某些代码`<script>`：

```
document.getElementById('files').addEventListener('change', handleFileSelect, false); 
```

现在在事件处理代码中读取文件背后的代码（现在在这种情况下，我想将本地图像加载到 D3JS svg 中）：

```
function handleFileSelect(evt) {
    reader = new FileReader();
    reader.onabort = function(e) {alert('File read cancelled');};
    var imageObj = new Image();  //image object to hold the local file contents.

    //and given the asynchronous nature, set up the event so that when the image is loaded, do something with it:
    imageObj.onload = function() {image.datum(imageObj.src).attr("xlink:href", function(d) {return d})};

    //similarly for the file reading:
    reader.onload = function(e) {imageObj.src = reader.result};

    //With all the events set up, lets start reading the file in.
    //the secret sauce is the DataURL
    reader.readAsDataURL(evt.target.files[0]);
} 
```

为了完整起见，图像背后的 D3JS 酱汁：

```
var svg = d3.select("body").append("svg");

var image = svg.append("defs")
    .append("pattern")
    .attr("id", "venus")
    .attr('patternUnits', 'userSpaceOnUse')
    .attr("width", 200)
    .attr("height", 200)
    .append("image")
    .attr("width", 200)
    .attr("height", 200);

var image2 = svg.append("rect")
    .attr("x", "0")
    .attr("y", "0")
    .attr("width", 200)
    .attr("height", 200)
    .attr("fill", "url(#venus)"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T02:06:08.270

如果您每次都生成 HTML，您可以将数据作为 JSON 放入您的 HTML 或您可以从 HTML 引用的 .js 文件中，可能通过生成的唯一 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T00:02:30.330

D3 有一些很棒的工具用于导入数据和操作它。过去一直提供 json 服务（有时创建起来很麻烦）我更倾向于提供 csv 并在 javascript/d3 中操作它，但有兴趣看看其他人如何回答你的问题。

这是一个简单的例子，在这里显示 csv 到嵌套的 json：[https ://gist.github.com/3053667](https://gist.github.com/3053667)

还有很多用于操作数据的工具： [https ://github.com/mbostock/d3/wiki/Arrays](https://github.com/mbostock/d3/wiki/Arrays)

如果你想切片和切块，还有交叉过滤器。看起来很值得掌握，但我正在等待假人指南出来！ [http://square.github.com/crossfilter/](http://square.github.com/crossfilter/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-15T16:21:07.350

d3.json 通过 ajax 调用加载外部 json 文件 -`myjson`您示例中的变量已经是一个 javascript 对象，因此您无需加载它，只需在您的`nodeData`作业中直接使用它即可。

```
nodeData = myjson.elements; 
```

# c - strtok 返回太多字符串

> ID：11411285
> 
> 赞同：0
> 
> 时间：2012-07-10T10:22:39.967
> 
> 标签：c, strtok

我正在开发一个程序，它是一种设计用于在各种服务器上运行的心跳。下面复制的有问题的函数检索“朋友”列表，并且对于列表中的每个“朋友”，它执行握手操作（通过 ping_and_report，未显示）。

问题是，在第一次调用这个例程时，strtok_r 似乎返回的字符串比源中的字符串多，我无法确定原因。编码：

```
void pingServerList(int dummy) {
    char *p ;
    char *my_friends ;
    char *nextSvr, *savePtr ; ;
    char  *separators = ",; \t" ;
    server_list_t *ent = NULL ;
    static long round_nbr = 0  ;
    unsigned int len ;
    time_t now ;
    char   message[4096] ;
    char   *hex ;

    round_nbr++ ;
    p = get_server_list() ;
    if (p) {
        len =strlen(p) ;
        my_friends = malloc(len+1) ;
        strncpy(my_friends, p, len) ;
        }
    nextSvr = strtok_r(my_friends, separators, &savePtr) ;
    while (nextSvr) {
        // Ensure that nobody messes with nextSvr. . .
        char *workSvr = malloc(strlen(nextSvr) + 1) ;
        strcpy(workSvr, nextSvr) ;
        if (debug) {
            len = strlen(workSvr) * 2 + 3 ;
            hex = malloc(len) ;
            get_hex_val(workSvr, hex, len) ;
            write_log(fp_debug
                    , "Server: %s (x'%s')"
                    , workSvr, hex) ;
            free(hex) ;
            }
        ping_and_report(workSvr, round_nbr) ;
        free(workSvr) ;
        nextSvr = strtok_r(NULL, separators, &savePtr) ;
        } 
```

......我认为在这一点上并不太复杂。而且我看不出有任何与价值观打交道的余地。但是日志文件在这里揭示了问题：

```
2012-07-09 23:26 Debug activated...
2012-07-09 23:26 get_server_list() returning velmicro, stora-2 (x'76656C6D6963726F2C2073746F72612D32')
2012-07-09 23:26 Server: velmicro (x'76656C6D6963726F')
2012-07-09 23:26 Server: stora-2 (x'73746F72612D32')
2012-07-09 23:26 Server: re (x'726519') 
```

疯狂的是（至少从代码的几次执行中）这只会在第一次调用时失败。调用 2-n（其中 n 为数百）不会出现此问题。

你们中有人看到我明显缺少什么吗？（顺便说一句：这在​​具有 linux 版本的四个不同系统上以完全相同的方式失败。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:26:33.107

当你写这个

```
strncpy(my_friends, p, len) ; 
```

您不能确保`my_friends`以 \0 结尾

尝试

```
strncpy(my_friends, p, len)[len-1] = '\0'; 
```

alt。使用 calloc 分配 my_friends

# xcode - Xcode 更精确地移动 Storyboard 元素

> ID：11411297
> 
> 赞同：0
> 
> 时间：2012-07-10T10:23:35.100
> 
> 标签：xcode, storyboard

是否有可能以比按键盘上的箭头键更小的步骤移动情节提要元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:42:38.127

否。箭头键将项目移动一个点。没有在子点边界上定位元素的选项。

# asp.net - Windows Azure 上的 HTTP 处理程序中是否会出现 ThreadAbortException？

> ID：11411298
> 
> 赞同：4
> 
> 时间：2012-07-10T10:23:36.903
> 
> 标签：asp.net, azure, httphandler

我有一个托管在 Windows Azure 上的“小型”计算实例中的 ASP.NET HTTP 处理程序。它处理大型二进制文件的下载和上传。该 Web 角色内没有其他任何运行，并且根据指南配置了 2 个实例。当从连接速度较慢的计算机完成下载并且我尝试一次执行多个下载以阻塞客户端的带宽时，有时我会`ThreadAbortException`在处理程序中得到一个，最常见的是在 a `.Write`to the `Response.OutputStream`（我`Response.BufferOutput = false`事先设置）期间。堆栈跟踪如下：

```
System.Threading.ThreadAbortException: Thread was being aborted.
   at System.Web.Hosting.UnsafeIISMethods.MgdExplicitFlush(IntPtr context)
   at System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()
   at System.Web.HttpResponse.Flush(Boolean finalFlush)
   at System.Web.HttpWriter.WriteFromStream(Byte[] data, Int32 offset, Int32 size)
   at MyHandler.ProcessGetRequest(HttpContext context)
   at MyHandler.ProcessRequest(HttpContext context) 
```

（该`Stream.Write`调用显然是内联的，因此它不会显示在堆栈跟踪中）。

为什么线程被中止？我猜我遇到了某种超时（可能是套接字写入超时），中止线程是 ASP.NET 运行时处理它的正常方式吗？

请注意，它是单个 HTTP 处理程序，而不是 .aspx/.cshtml 页面或MVC 控制器`Response.End`，并且在我的代码中我没有触及.`Response.Redirect``Server.Transfer`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-29T08:45:59.797

当您上传大文件时，IIS 会尝试读取请求流，如果它阻塞超过 5 分钟，则会导致 IIS 最终抛出 ThreadAbortException。

尝试使用这条线：

```
<httpRuntime maxRequestLength="2097150" executionTimeout="3600"/> 
```

也试试这些建议：[http ://cutesoft.net/forums/permalink/77440/77438/ShowThread.aspx#77438](http://cutesoft.net/forums/permalink/77440/77438/ShowThread.aspx#77438)

# java - 由于 jpct 游戏引擎中未捕获的异常，线程主退出

> ID：11411301
> 
> 赞同：2
> 
> 时间：2012-07-10T10:23:50.460
> 
> 标签：java, android, jpct

我正在尝试运行 JPCT 的演示。但是正在发生运行时错误。我的代码如下。

```
//////////////////////////////////////////////////////
//////////////////////////////////////////////////////

package com.JPCTDemo;

import java.lang.reflect.Field;

import javax.microedition.khronos.egl.EGL10;
import javax.microedition.khronos.egl.EGLConfig;
import javax.microedition.khronos.egl.EGLDisplay;
import javax.microedition.khronos.opengles.GL10;

import android.app.Activity;
import android.content.res.Resources;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.MotionEvent;

import com.threed.jpct.Camera;
import com.threed.jpct.Config;
import com.threed.jpct.FrameBuffer;
import com.threed.jpct.Light;
import com.threed.jpct.Loader;
import com.threed.jpct.Logger;
import com.threed.jpct.Object3D;
import com.threed.jpct.RGBColor;
import com.threed.jpct.SimpleVector;
import com.threed.jpct.Texture;
import com.threed.jpct.TextureManager;
import com.threed.jpct.World;
import com.threed.jpct.util.MemoryHelper;

public class JPCTDemo extends Activity {

// Used to handle pause and resume...
private static JPCTDemo master = null;

private GLSurfaceView mGLView;
private MyRenderer renderer = null;
private FrameBuffer fb = null;
private World world = null;
private int move = 0;
private float turn = 0;
private RGBColor back = new RGBColor(50, 50, 100);

private float touchTurn = 0;
private float touchTurnUp = 0;

private float xpos = -1;
private float ypos = -1;

private Texture planeReplace = null;

private Object3D plane = null;
private Object3D tree2 = null;
private Object3D tree1 = null;
private Object3D grass = null;
private Texture font = null;

private Object3D box = null;
private Object3D rock = null;

private Light sun = null;

protected void onCreate(Bundle savedInstanceState) {
    Logger.log("onCreate");

    if (master != null) {
        copy(master);
    }

    super.onCreate(savedInstanceState);
    mGLView = new GLSurfaceView(getApplication());

    mGLView.setEGLConfigChooser(new GLSurfaceView.EGLConfigChooser() {
        public EGLConfig chooseConfig(EGL10 egl, EGLDisplay display) {
            // Ensure that we get a 16bit framebuffer. Otherwise, we'll fall
            // back to Pixelflinger on some device (read: Samsung I7500)
            int[] attributes = new int[] { EGL10.EGL_DEPTH_SIZE, 16, EGL10.EGL_NONE };
            EGLConfig[] configs = new EGLConfig[1];
            int[] result = new int[1];
            egl.eglChooseConfig(display, attributes, configs, 1, result);
            return configs[0];
        }
    });

    renderer = new MyRenderer();
    mGLView.setRenderer(renderer);
    setContentView(mGLView);
}

@Override
protected void onPause() {
    Logger.log("onPause");
    super.onPause();
    mGLView.onPause();
}

@Override
protected void onResume() {
    Logger.log("onResume");
    super.onResume();
    mGLView.onResume();
}

protected void onStop() {
    Logger.log("onStop");
    super.onStop();
}

private void copy(Object src) {
    try {
        Logger.log("Copying data from master Activity!");
        Field[] fs = src.getClass().getDeclaredFields();
        for (Field f : fs) {
            f.setAccessible(true);
            f.set(this, f.get(src));
        }
    } catch (Exception e) {
        throw new RuntimeException(e);
    }
}

public boolean onTouchEvent(MotionEvent me) {
    if (me.getAction() == MotionEvent.ACTION_DOWN) {
        xpos = me.getX();
        ypos = me.getY();
        return true;
    }

    if (me.getAction() == MotionEvent.ACTION_UP) {
        xpos = -1;
        ypos = -1;
        touchTurn = 0;
        touchTurnUp = 0;
        return true;
    }

    if (me.getAction() == MotionEvent.ACTION_MOVE) {
        float xd = me.getX() - xpos;
        float yd = me.getY() - ypos;

        xpos = me.getX();
        ypos = me.getY();

        touchTurn = xd / 100f;
        touchTurnUp = yd / 100f;
        return true;
    }

    try {
        Thread.sleep(15);
    } catch (Exception e) {
        // Doesn't matter here...
    }

    return super.onTouchEvent(me);
}

public boolean onKeyDown(int keyCode, KeyEvent msg) {

    if (keyCode == KeyEvent.KEYCODE_DPAD_UP) {
        move = 2;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_DOWN) {
        move = -2;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {
        turn = 0.05f;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {
        turn = -0.05f;
        return true;
    }

    return super.onKeyDown(keyCode, msg);
}

public boolean onKeyUp(int keyCode, KeyEvent msg) {
    if (keyCode == KeyEvent.KEYCODE_DPAD_UP) {
        move = 0;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_DOWN) {
        move = 0;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT) {
        turn = 0;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_RIGHT) {
        turn = 0;
        return true;
    }

    if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
        TextureManager.getInstance().replaceTexture("grassy", planeReplace);
        return true;
    }

    return super.onKeyUp(keyCode, msg);
}

protected boolean isFullscreenOpaque() {
    return true;
}

class MyRenderer implements GLSurfaceView.Renderer {

    private int fps = 0;
    private int lfps = 0;

    private long time = System.currentTimeMillis();

    private boolean stop = false;

    private SimpleVector sunRot = new SimpleVector(0, 0.05f, 0);

    public MyRenderer() {
        Config.maxPolysVisible = 500;
        Config.farPlane = 1500;
        Config.glTransparencyMul = 0.1f;
        Config.glTransparencyOffset = 0.1f;
        Config.useVBO=true;

        Texture.defaultToMipmapping(true);
        Texture.defaultTo4bpp(true);
    }

    public void stop() {
        stop = true;
    }

    public void onSurfaceChanged(GL10 gl, int w, int h) {
        if (fb != null) {
            fb.dispose();
        }

        fb = new FrameBuffer(gl, w, h);

        if (master == null) {
            world = new World();
            Resources res = getResources();

            TextureManager tm = TextureManager.getInstance();

            Texture grass2 = new Texture(res.openRawResource(R.raw.grassy));
            Texture leaves = new Texture(res.openRawResource(R.raw.tree2y));
            Texture leaves2 = new Texture(res.openRawResource(R.raw.tree3y));
            Texture rocky = new Texture(res.openRawResource(R.raw.rocky));
            Texture planetex = new Texture(res.openRawResource(R.raw.planetex));

            planeReplace = new Texture(res.openRawResource(R.raw.rocky));
            font = new Texture(res.openRawResource(R.raw.numbers));
            font.setMipmap(false);

            tm.addTexture("grass2", grass2);
            tm.addTexture("leaves", leaves);
            tm.addTexture("leaves2", leaves2);
            tm.addTexture("rock", rocky);
            tm.addTexture("grassy", planetex);

            plane = Loader.loadSerializedObject(res.openRawResource(R.raw.serplane));
            rock = Loader.loadSerializedObject(res.openRawResource(R.raw.serrock));
            tree1 = Loader.loadSerializedObject(res.openRawResource(R.raw.sertree1));
            tree2 = Loader.loadSerializedObject(res.openRawResource(R.raw.sertree2));
            grass = Loader.loadSerializedObject(res.openRawResource(R.raw.sergrass));

            grass.translate(-45, -17, -50);
            grass.rotateZ((float) Math.PI);
            rock.translate(0, 0, -90);
            rock.rotateX(-(float) Math.PI / 2);
            tree1.translate(-50, -92, -50);
            tree1.rotateZ((float) Math.PI);
            tree2.translate(60, -95, 10);
            tree2.rotateZ((float) Math.PI);
            plane.rotateX((float) Math.PI / 2f);
            plane.setName("plane");
            tree1.setName("tree1");
            tree2.setName("tree2");
            grass.setName("grass");
            rock.setName("rock");

            world.addObject(plane);
            world.addObject(tree1);
            world.addObject(tree2);
            world.addObject(grass);
            world.addObject(rock);

            plane.strip();
            tree1.strip();
            tree2.strip();
            grass.strip();
            rock.strip();

            grass.setTransparency(10);
            tree1.setTransparency(40);
            tree2.setTransparency(40);

            RGBColor dark = new RGBColor(100, 100, 100);
            tree1.setAdditionalColor(dark);
            tree2.setAdditionalColor(dark);
            grass.setAdditionalColor(dark);

            world.setAmbientLight(20, 20, 20);
            world.buildAllObjects();

            sun = new Light(world);
            sun.setIntensity(250, 250, 250);

            Camera cam = world.getCamera();
            cam.moveCamera(Camera.CAMERA_MOVEOUT, 250);
            cam.moveCamera(Camera.CAMERA_MOVEUP, 100);
            cam.lookAt(plane.getTransformedCenter());

            SimpleVector sv = new SimpleVector();
            sv.set(plane.getTransformedCenter());
            sv.y -= 300;
            sv.x -= 100;
            sv.z += 200;
            sun.setPosition(sv);

            MemoryHelper.compact();

            if (master == null) {
                Logger.log("Saving master Activity!");
                master = JPCTDemo.this;
            }
        }
    }

    public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        Logger.log("onSurfaceCreated");
    }

    public void onDrawFrame(GL10 gl) {

        try {
            if (!stop) {
                Camera cam = world.getCamera();
                if (turn != 0) {
                    world.getCamera().rotateY(-turn);
                }

                if (touchTurn != 0) {
                    world.getCamera().rotateY(touchTurn);
                    touchTurn = 0;
                }

                if (touchTurnUp != 0) {
                    world.getCamera().rotateX(touchTurnUp);
                    touchTurnUp = 0;
                }

                if (move != 0) {
                    world.getCamera().moveCamera(cam.getDirection(), move);
                }

                fb.clear(back);
                world.renderScene(fb);
                world.draw(fb);
                blitNumber(lfps, 5, 5);

                fb.display();

                if (box != null) {
                    box.rotateX(0.01f);
                }

                if (sun != null) {
                    sun.rotate(sunRot, plane.getTransformedCenter());
                }

                if (System.currentTimeMillis() - time >= 1000) {
                    lfps = fps;
                    fps = 0;
                    time = System.currentTimeMillis();
                }
                fps++;
            } else {
                if (fb != null) {
                    fb.dispose();
                    fb = null;
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
            Logger.log("Drawing thread terminated!", Logger.MESSAGE);
        }
    }

    private void blitNumber(int number, int x, int y) {
        if (font != null) {
            String sNum = Integer.toString(number);

            for (int i = 0; i < sNum.length(); i++) {
                char cNum = sNum.charAt(i);
                int iNum = cNum - 48;
                fb.blit(font, iNum * 5, 0, x, y, 5, 9, FrameBuffer.TRANSPARENT_BLITTING);
                x += 5;
            }
        }
    }
}

 } 
```

我的 logcat 错误是

```
07-10 16:01:48.679: E/dalvikvm(1417): Could not find class 'com.threed.jpct.RGBColor', referenced from method com.JPCTDemo.JPCTDemo.<init>
07-10 16:01:48.690: E/AndroidRuntime(1417): Uncaught handler: thread main exiting due to uncaught exception
07-10 16:01:48.699: E/AndroidRuntime(1417): java.lang.VerifyError: com.JPCTDemo.JPCTDemo
07-10 16:01:48.699: E/AndroidRuntime(1417):     at java.lang.Class.newInstanceImpl(Native Method)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at java.lang.Class.newInstance(Class.java:1472)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.app.Instrumentation.newActivity(Instrumentation.java:1097)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2316)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2417)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.app.ActivityThread.access$2100(ActivityThread.java:116)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1794)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.os.Looper.loop(Looper.java:123)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at android.app.ActivityThread.main(ActivityThread.java:4203)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at java.lang.reflect.Method.invokeNative(Native Method)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at java.lang.reflect.Method.invoke(Method.java:521)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:791)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:549)
07-10 16:01:48.699: E/AndroidRuntime(1417):     at dalvik.system.NativeStart.main(Native Method)
07-10 16:01:48.709: E/dalvikvm(1417): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

感谢提前帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:21:41.517

你的主要问题是，它找不到类`com.threed.jpct.RGBColor`。我建议检查您的构建路径配置以查看是否`jpct_ae.jar`已检查。

重建您的应用程序并重试。

# java - 在 jmonkeyengine 中加载第三方 Ogre 3D xml 模型？

> ID：11411303
> 
> 赞同：0
> 
> 时间：2012-07-10T10:23:55.597
> 
> 标签：java, eclipse, ubuntu, jmonkeyengine

我正在尝试加载 WorldForge 3d 模型附带的模型。但是，当我这样做时，我得到了这个异常，我怀疑程序找不到模型或纹理：

```
com.jme3.asset.AssetNotFoundException: objects/creatures/goblin/goblin.mesh.xml
    at com.jme3.asset.DesktopAssetManager.loadAsset(DesktopAssetManager.java:277)
    at com.jme3.asset.DesktopAssetManager.loadModel(DesktopAssetManager.java:410)
    at com.jme3.asset.DesktopAssetManager.loadModel(DesktopAssetManager.java:420)
    at adventure.Main.simpleInitApp(Main.java:110)
    at com.jme3.app.SimpleApplication.initialize(SimpleApplication.java:225)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.initInThread(LwjglAbstractDisplay.java:129)
    at com.jme3.system.lwjgl.LwjglAbstractDisplay.run(LwjglAbstractDisplay.java:205)
    at java.lang.Thread.run(Thread.java:679) 
```

我要运行的应该导入地精的代码是 1

```
Spatial model3 = assetManager.loadModel("objects/creatures/goblin/goblin.mesh.xml"); 
```

绝对路径也不起作用。你能帮助我吗？

## 更新

我发现在eclipse中将assets文件夹添加到src路径解决了assetnotfoundexception。现在我可以加载网格，但它缺少纹理和材质：

![在此处输入图像描述](../Images/2096a32d398a99b7298475aa2be90702.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T17:16:21.117

你在Eclipse下正确配置项目了吗？检查“设置依赖项”部分。[在 Eclipse 中设置 JME3](http://hub.jmonkeyengine.org/wiki/doku.php/jme3%3asetting_up_jme3_in_eclipse)

# mysql - 从另一个表按计数排序

> ID：11411304
> 
> 赞同：1
> 
> 时间：2012-07-10T10:23:56.037
> 
> 标签：mysql, count, sql-order-by, left-join

我希望发布此内容是合法的，因为我知道有关此主题的其他类似帖子。但我无法让其他解决方案发挥作用，因此尝试发布我自己的方案。几乎像这样的其他示例，我不确定他们如何使用表名和行。是通过标点符号吗？

```
 SELECT bloggers.*, COUNT(post_id) AS post_count
    FROM bloggers LEFT JOIN blogger_posts 
    ON bloggers.blogger_id = blogger_posts.blogger_id
    GROUP BY bloggers.blogger_id
    ORDER BY post_count 
```

我有一个包含文章的表，以及一个每次阅读文章时都会获取新记录的统计表。我正在尝试通过计算统计表中该文章 ID 的记录数来对我的文章表进行排序。像“按视图排序”功能。

我的 2 张桌子：

**文章**

```
id 
```

**统计数据**

```
pid <- same as article id 
```

查看其他缺少左连接的示例。只是想不通如何工作。我目前的查询如下所示： $query = "SELECT *, COUNT(pid) AS views FROM statistics GROUP BY pid ORDER BY views DESC";

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:16:15.753

```
SELECT article.*, COUNT(statistics.pid) AS views
FROM article LEFT JOIN statistics ON article.id = statistics.pid
GROUP BY article.id
ORDER BY views DESC 
```

想法：

*   使用连接合并两个表
*   如果一篇文章没有统计信息，用 填充`NULL`，即使用左连接
*   `COUNT`只计算非`NULL`值，因此按右表计算以给出正确的零结果
*   `GROUP BY`为每篇文章准确获取一个结果行，即分别统计每篇文章的统计数据

# powershell - Powershell：Foreach 输入

> ID：11411305
> 
> 赞同：1
> 
> 时间：2012-07-10T10:23:57.257
> 
> 标签：powershell, foreach, ram

我被困在我知道很简单但我一生无法弄清楚的事情上。

我正在尝试导入带有主机名列表的 .txt 文件，一旦检索到该列表，脚本就会返回安装的总物理内存量。

到目前为止，我有这个：

```
function get
{
$boxes = Get-Content C:\Temp\hostnamesforRAM.txt
foreach($box in $boxes)
{
Get-WmiObject Win32_ComputerSystem | select TotalPhysicalMemory
}
}
get 
```

但是，它只是简单地返回：

```
4151570432
4151570432
4151570432
4151570432
4151570432 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T10:28:27.883

您需要将当前主机名 ($box) 传递给 computerName 参数，如果没有它，您将从自己的计算机获取值。

```
function get
{
$boxes = Get-Content C:\Temp\hostnamesforRAM.txt
foreach($box in $boxes)
{
Get-WmiObject Win32_ComputerSystem -ComputerName $box | select TotalPhysicalMemory
}
}

get 
```

另一种更短的方法是将文件的内容传递给 ComputerName 参数。ComputerName 参数接受名称的集合：

```
Get-WmiObject Win32_ComputerSystem -ComputerName (Get-Content C:\Temp\hostnamesforRAM.txt) | 
Select-Object Name,TotalPhysicalMemory 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:32:07.583

这是以`TotalPhysicalMemory`字节为单位，以获取特殊的计算机信息添加`computername`到`Get-WmiObject`具有正确变量名的命令（在您的情况下为 $box）：

`Get-WmiObject -computername $box Win32_ComputerSystem`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:31:50.987

尝试

```
 function get
    {
    $boxes = Get-Content C:\Temp\hostnamesforRAM.txt
    foreach($box in $boxes)
    {
    "$box -> $((Get-WmiObject Win32_ComputerSystem -computername $box).TotalPhysicalMemory)"
    }
    } 
```

# java - java.lang.ClassCastException：oracle.sql.BLOB 无法转换为 oracle.sql.BLOB

> ID：11411306
> 
> 赞同：4
> 
> 时间：2012-07-10T10:23:58.717
> 
> 标签：java, oracle, blob

我在使用 jdbc 将 blob 对象从 oracle DB 检索到 java API 时遇到问题。问题是当我使用 db 中的函数执行 Collable 语句时，它返回一个 blob 字段，此异常被抛出：

`tempBlob = (oracle.sql.BLOB)cstmt.getObject(1);`

带有此错误消息：

```
java.lang.ClassCastException: oracle.sql.BLOB cannot be cast to oracle.sql.BLOB. 
```

我从数据库中得到的对象是`oracle.sql.BLOB`. tempBlob 变量是一个对象`oracle.sql.BLOB`。哪里有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:51:16.023

您的类路径中可能有两个 oracle jar 文件。请移除一个 jar 并重新部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T12:03:21.463

有时一个 JAR 在应用程序类路径中，另一个在应用程序*服务器*类路径中（例如：在 Tomcat 中`$CATALINA_HOME/lib`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-23T03:09:51.460

不要再像：

```
BLOB tempBlob = (oracle.sql.BLOB)cstmt.getObject(1); 
```

解决方案 ：

```
OutputStream outstrm =(rs.getBlob(1)).setBinaryStream(1L); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-17T13:13:49.770

生成碧玉报告时出现此错误。

我在该报告的 jrxml 文件中替换了`class=oracle.jdbc.OracleBlob` with `class=java.sql.Blob`。它对我有用。

# android - Android中的用户界面设计

> ID：11411308
> 
> 赞同：0
> 
> 时间：2012-07-10T10:24:04.270
> 
> 标签：android

我想以编程方式设计布局，这意味着根据项目要求没有 xml 文件。但是以编程方式使用的术语与 xml 文件完全不同。它们是否有任何有用的以编程方式学习的教程，这意味着没有 xml 文件。引导我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:43:14.307

你可以创建任何你想要的视图

*   线性布局

    ```
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.FILL_PARENT,
            LinearLayout.LayoutParams.WRAP_CONTENT); 
    ```

*   文本视图

    ```
    final TextView tv = new TextView(this);
        tv.setBackgroundColor(0xFFFF00FF);
        tv.setTextColor(0xFF000000);
        tv.setTypeface(null, Typeface.BOLD);
        tv.setText("Where is Fred?");
        tv.setGravity(Gravity.CENTER_HORIZONTAL); 
    ```

和其他任何东西。

[来源](http://mainerrors.blogspot.in/2011/02/programmatically-creating-layout-part-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:53:39.727

我建议您花一些时间了解`View`该类及其流行的子类，例如`LinearLayout`、`RelativeLayout`等。（另外，花点时间看一下`Drawables`。）

当您使用 XML 创建布局时，您使用 XML 定义`View`对象的层次结构，在运行时，这些对象层次结构“膨胀”成XML 布局文件描述的*真实*对象层次结构。`View`例如，您的第一个 XML 布局文件可能很简单`LinearLayout`，其中包含一个`TextView`（注意，为了简洁起见，我正在简化它）：

```
<LinearLayout ... >
    <TextView ... />
</LinearLayout> 
```

在您的`Activity`情况下，您将使用`setContentView()`.

XML 文件所做的只是提供一个*规范*（如果您愿意的话），关于`View`系统需要为您构建（或*膨胀*）的结构。最终结果是会有一个真实的`LinearLayout`对象（它是 的子类`View`），它有一个引用的子`TextView`类（也是 的子类`View`）以及合适的布局参数。

要以编程方式执行上述操作（即通过创建对象实例并使用它们的方法，而不是从 XML 膨胀），您可能会执行以下操作（再次简化）：

```
LinearLayout container = new LinearLayout(this);
TextView tv = new TextView(this);
tv.setText("hello");
container.addChild(tv);  // Simple example - usually you'd specify layout parameters
setContentView(container); 
```

我要说的基本观点是，用非常简单的术语来说，布局 XML 文件可以被认为是一种“脚本”，您可以使用它来告诉系统如何创建`Views`. `View`您可以通过以编程方式创建对象实例并在它们上调用适当的方法来创建完全相同的结果。无论您采用哪种方式，最终结果都是一样的：`View`内存中的一堆对象代表一个视图层次结构。

您会发现 XML 布局属性名称不一定与相应的方法名称相同，但您可以使用相关的 API 文档查看给定方法对应的 XML 属性字符串是什么。例如，API 文档`LinearLayout`详细介绍了所有方法以及 XML 属性。

# c++ - OpenCV 图像处理

> ID：11411309
> 
> 赞同：0
> 
> 时间：2012-07-10T10:24:09.027
> 
> 标签：c++, opencv, machine-learning, computer-vision, image-manipulation

我正在尝试找出 2 张图像的区别。

场景：假设我有 2 张图像，一张是背景，另一张是背景前面的人，我想将两张图像相减，得到人的位置，即程序可以检测人站在哪里，并将减去的图像作为输出。

我设法想出的代码是从相机中获取两张图像并重新调整它们的大小，并将两张图像都转换为灰度。我想知道这之后该怎么做。我检查了 OpenCV 提供的减法函数，但它以数组作为输入，所以我不知道如何进行。

我写的代码是：

```
cap>>frame; //gets the first image
cv::cvtColor(frame,frame,CV_RGB2GRAY); //converts it to gray scale
cv::resize(frame,frame,Size(30,30));  //re-sizes it

cap>>frame2;//gets the second image
cv::cvtColor(frame2,frame2,CV_RGB2GRAY); //converts it to gray scale
cv::resize(frame2,frame2,Size(30,30)); //re-sizes it 
```

现在我是否只需使用减法函数，例如：

```
cv::subtract(frame_gray,frame,frame); 
```

还是我先应用一些过滤器然后使用减法功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:23:56.397

正如其他人所注意到的那样，这是一个棘手的问题：很容易想出一个有时会奏效的 hack，很难想出一个在大部分时间都可以在最少人为干预的情况下工作的解决方案。此外，如果您可以严格控制背景的材质和照明，则更容易做到。专业应用被称为“chromakeying”（特别是在电视行业）、“bluescreening”、“matting”或“traveling matte”（在电影摄影中）、“背景去除”在计算机视觉中。

消光准均匀背景的开创性工作是多年前由[Petro Vlahos完成的。](http://en.wikipedia.org/wiki/Petro_Vlahos)其基本算法的专利已经过期，所以你可以带着他们去城里（并找到各种质量的开源实现）。毋庸置疑，IANAL，请做好专利主题的功课。

消除更复杂的背景仍然是一个活跃的研究领域，尤其是在没有 3D 信息可用的情况下。您可能想查看几篇 MS Research 近期发表的研究论文（A. Criminisi 在该领域做了一些工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:30:13.070

使用减法是不合适的，因为它可能会导致某些值变为负数，并且只有在您尝试查看是否存在差异时才会起作用（布尔值真/假）。

如果您需要获取不同的像素，您应该逐像素进行比较 - 例如：

```
int rows = frame.rows;
int cols = frame.cols;
cv::Mat diffImage = cv::Mat::zeros(rows, cols, CV_8UC1);
for(int i = 0; i < rows; ++i)
{
    for(int j = 0; j < cols; ++j)
    {

        if(frame.at<uchar>(i,j) != frame2.at<uchar>(i,j))
            diffImage.at<uchar>(i, j) = 255;
    }
} 
```

现在，您可以显示或保存 diffImage。所有不同的像素都将是白色，而相似的像素将是黑色

# objective-c - 从 NSNumberformater numberFromString 获取 nil

> ID：11411311
> 
> 赞同：1
> 
> 时间：2012-07-10T10:24:16.217
> 
> 标签：objective-c, nsnumberformatter

我正在尝试将来自 es_US 语言环境（x，xxx.xx）的 .txt 文件中的一个数量格式化为我当前的语言环境，使用的是 es_ES（x.xxx，xx）。我希望 [NSNumberFormater numberFromString] 只会重新格式化字符串，但是我只能从这个方法中得到一个 nil 值。

从这里检查答案后，我还尝试了另一种方法，但是如果字符串有千位分隔符，则 NSDecimalnumber 不起作用，所以如果有人能告诉我我做错了什么，请......

```
 - (void) setSaldo_sap:(NSString *)saldo_sap
 {
    NSNumberFormatter *numFormatter = [[NSNumberFormatter alloc] init];

    [numFormatter setLocale:[NSLocale currentLocale]];
    [numFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
    [numFormatter setNumberStyle:NSNumberFormatterDecimalStyle];
    [numFormatter setNegativeFormat:@"-¤#,##0.00"];

    //saldo_sap = @"         -324,234.55"
    NSString * tmpString = [saldo_sap stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSNumber *num = [numFormatter numberFromString:tmpString];
    NSDecimalNumber *tempNumber = [NSDecimalNumber decimalNumberWithString:tmpString];  

    _saldo_sap = [numFormatter stringFromNumber:tempNumber];        
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:47:23.130

我认为您误解了 NSNumberFormatter 的目的：它不会“重新格式化”，而是“格式化”和“解析”按照设定规则格式化的数字。因此，如果您有来自“es_US”语言环境的数字，但想使用“es_ES”对其进行格式化，您将需要两个 NSNumberFormatter：每个语言环境一个。

使用“es_US”解析传入的数字并使用“es_ES”进行格式化，简化一点（我不知道这两个语言环境和数字的确切格式，所以你可能需要稍微调整一下）：

```
NSString * tmpString = ...

NSNumberFormatter *usFormatter = [[NSNumberFormatter alloc] init];
[usFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier: @"es_US"] autorelease]];
[usFormatter setHasThousandSeparators: YES];

NSNumberFormatter *esFormatter = [[NSNumberFormatter alloc] init];
[esFormatter setLocale:[[[NSLocale alloc] initWithLocaleIdentifier: @"es_ES"] autorelease]];
[esFormatter setHasThousandSeparators: YES];

// this assignment looks also somewhat weird: is it an instance variable? 
// 'cause if it is and you assign an autoreleased string you'll have a bad pointer there
_saldo_sap = [esFormatter stringFromNumber: [usFormatter numberFromString: tmpString]];

// And unless you use ARC you leak your formatter on each call, so at the end
[usFormatter release];
[esFormatter release]; 
```

**编辑** 如果输入字符串包含前缀/后缀字符，这可能会阻止 NSNumberFormatter 工作（它通常使用非常严格），请使用`setLenient:`：

“设置接收者是否将使用启发式方法来猜测字符串所指的数字。”

如果你有多个数字要转换，不要为每个数字创建格式化程序，这只是浪费内存和cpu。使它们成为实例变量并重用。这将比仅拥有一个格式化程序并在解析一种格式和格式化另一种格式之间重新配置它要清晰得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T12:14:41.413

```
NSString *_saldo_sap = @"         -324234.55";
//NSString *_saldo_sap = @"         324,234.55";

NSString * tmpString = [_saldo_sap stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
//tmpString = @"-324,234.55"

NSNumberFormatter *numFormatter = [[NSNumberFormatter alloc] init];
NSNumber *num = [numFormatter numberFromString:tmpString];

[numFormatter setLocale:[NSLocale currentLocale]];
[numFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
[numFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[numFormatter setNegativeFormat:@"-¤#,##0.00"];

_saldo_sap = [numFormatter stringFromNumber:num]; 
```

首先，为了从 NSString 获取 NSNumber，字符串必须是正确的可读格式，即它不能包含任何字符，如“,”。其次，您必须首先将字符串转换为 NSNumber，然后对其进行相应的格式化。

# iphone - obj-c 连接 int 问题

> ID：11411313
> 
> 赞同：-1
> 
> 时间：2012-07-10T10:24:32.907
> 
> 标签：iphone, objective-c, cocoa, concatenation

我是 obj-c 的新手，我正在尝试编写一个简单的 IBAction，其中一旦单击按钮就会更改其标签。它适用于图像背景和静态字符串，但是当它崩溃时：

```
int i = (arc4random()%90);
NSString *lab = [NSString stringWithFormat:@"%d", i];
[sender setText:lab]; 
```

为什么？提前ty

编辑：这是整个方法

```
-(IBAction) toggleUIButtonImage:(id)sender{
    NSString *img = @"bulldog-cute-tom-bancroft.jpg";
    NSString *imgSel = @"kitten-cute-tom-bancroft.jpg";
    UIImage *unselectedImage = [UIImage imageNamed:img];
    UIImage *selectedImage = [UIImage imageNamed:imgSel];
    if ([sender isSelected]) {
        [sender setBackgroundImage:unselectedImage forState:UIControlStateNormal];
        [sender setSelected:NO];
    }else {
        [sender setBackgroundImage:selectedImage forState:UIControlStateSelected];
        [sender setSelected:YES];
    }

    int i = (arc4random()%90);
    NSString *lab = [NSString stringWithFormat:@"%d", i];
    [sender setTitle:lab forState: UIControlStateNormal];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:32:05.147

这不是随机 int 或 int2str 转换。这是您设置按钮文本的方式。使用它，它应该可以工作：

```
[sender setTitle: lab forState: UIControlStateNormal]; 
```

（当然，如果 sender 实际上是 UIButton 的话）

编辑：

```
UIButton *button = (UIButton *)sender; 
```

为此，还建议您使用从发送者到 UIButton*（或您想要响应该方法的任何其他特定类）的强制转换，以确保您使用正确的类方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:33:11.130

您正在尝试设置 UIButton 的标题。为此，您需要使用`setTitle:forState:`而不是`setText`.

```
[sender setTitle:lab  forState:UIControlStateNormal]; 
```

UIButton 参考：[UIButton](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIButton_Class/UIButton/UIButton.html)

编辑：如果`sender`是**id**类型，将其更改为 UIButton ，如：

```
UIButton *b = (UIButton *)sender; 
```

或简单地更改方法签名，例如：

```
-(IBAction) toggleUIButtonImage:(UIButton *)sender 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-18T15:50:01.933

您应该通过 Interface Builder 设置对按钮的引用，例如： `@property (strong, nonatomic) UIButton *buttonName;`

或从 IBAction 方法获取按下它的按钮： `UIButton *buttonName = (UIButton *)sender;`

无论哪种方式，您都可以使用以下语法设置 UIButton 的标题文本： `[buttonName setTitle:lab forState:UIControlStateNormal];`

# php - 加入 MySQL 进行 PHP 和 MySQL 中的休假管理

> ID：11411314
> 
> 赞同：-5
> 
> 时间：2012-07-10T10:24:44.400
> 
> 标签：php, mysql, join

我有 4 个表格，如下所示

表：请假请求

```
+------------+----------+--------------+------------+----------------------+
| request_id | staff_id | applied_from | applied_to | status               |
+------------+----------+--------------+------------+----------------------+
|      1     |   10     | 01-07-2012   | 02-07-2012 | approved             |
|      2     |   12     | 02-07-2012   | 02-07-2012 | awaiting HR approval |
+------------+----------+--------------+------------+----------------------+ 
```

表：leave_approval

```
+-------------+-------------+---------------+-------------+
| request_id  | approved_by | approved_from | approved_to |
+-------------+-------------+---------------+-------------+
|    1        |      1      |  01-07-2012   |  02-07-2012 |
|    1        |      2      |  01-07-2012   |  02-07-2012 |
|    2        |      1      |  02-07-2012   |  02-07-2012 | 
+-------------+-------------+---------------+-------------+ 
```

表：员工

```
+-----------+-------+----------+
| staff_id  | name  | group_id |
+-----------+-------+----------+
|    1      | jack  |     1    |
|    2      | jill  |     2    |
|    10     | sam   |     3    | 
|    12     | david |     3    |
+-----------+-------+----------+ 
```

表：组

```
+-----------+------------+
| group_id  | group_name |
+-----------+------------+
|    1      |    admin   |
|    2      |     HR     |
|    3      |    staff   | 
+-----------+------------+ 
```

我需要通过加入这些表格来制作报告，它应该如下所示：

```
+----------+------------+----------+-------------+-----------+--------------+-----------+
|applied_by|applied_from|applied_to|approved_from|approved_to|approved_admin|approved_hr|
+----------+------------+----------+-------------+-----------+--------------+-----------+
|   sam    | 01-07-2012 |02-07-2012|01-07-2012   |02-07-2012 | Jack         | Jill      |
|   david  | 02-07-2012 |02-07-2012|02-07-2012   |02-07-2012 | Jack         | null      |
+----------+------------+----------+-------------+-----------+--------------+-----------+ 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:01:16.000

让我们一步一步来...

首先，您选择的实体在`leave_request`表中。所以让我们从那里开始：

```
SELECT leave_request.* FROM leave_request 
```

现在，您需要知道`applied_by`所需结果中列的数据。所以你加入`staff`表格：

```
SELECT
  applied_staff.name AS applied_by
FROM
  leave_request
  INNER JOIN staff AS applied_staff ON leave_request.staff_id = applied_staff.staff_id 
```

（请注意，我使用别名作为表名。稍后会派上用场。）

现在您需要知道`applied_from`and `applied_to`，您已经拥有了：

```
SELECT
  applied_staff.name AS applied_by,
  leave_request.applied_from,
  leave_request.applied_to
FROM
  leave_request
  INNER JOIN staff AS applied_staff ON leave_request.staff_id = applied_staff.staff_id 
```

现在您需要知道`approved_from`和`approved_to`，它们在`leave_approval`表中：

```
SELECT
  applied_staff.name AS applied_by,
  leave_request.applied_from,
  leave_request.applied_to,
  admin_approval.approved_from,
  admin_approval.approved_to
FROM
  leave_request
  INNER JOIN staff AS applied_staff ON leave_request.staff_id = applied_staff.staff_id
  INNER JOIN leave_approval AS admin_approval ON leave_request.request_id = admin_approval.request_id 
```

哦，现在我们有一个问题。存在一对多的关系，所以现在我们在结果中重复了请假请求。我们需要以某种方式过滤掉它。你没有具体说明如何，所以我要做几个假设：*你想知道“管理员”批准的`approved_from`和`approved_to`只有一个“管理员”批准。*

让我们在表连接中反映这些假设：

```
SELECT
  applied_staff.name AS applied_by,
  leave_request.applied_from,
  leave_request.applied_to,
  admin_approval.approved_from,
  admin_approval.approved_to
FROM
  leave_request
  INNER JOIN staff AS applied_staff ON leave_request.staff_id = applied_staff.staff_id
  INNER JOIN leave_approval AS admin_approval ON leave_request.request_id = admin_approval.request_id
  INNER JOIN staff AS approved_staff ON admin_approval.approved_by = approved_staff.staff_id
  INNER JOIN group AS approved_staff_group on approved_staff.group_id = approved_staff_group.group_id
WHERE
  approved_staff_group.group_name = 'admin' 
```

那应该更好。请注意，表别名在这里派上用场，因为我们现在`staff`在同一个查询中有两个用于两个不同目的的表实例。所以我们需要区分它们。（请记住，我在这里盲目飞行，实际上无法测试任何这些。如果在此过程中遇到任何问题，请纠正我。我也是徒手编写这段代码，因为我没有 MySQL方便，所以如果还有语法错误，请告诉我。）

现在让我们将`approved_admin`字段添加到结果中，该字段已经可用：

```
SELECT
  applied_staff.name AS applied_by,
  leave_request.applied_from,
  leave_request.applied_to,
  admin_approval.approved_from,
  admin_approval.approved_to,
  approved_staff.name AS approved_admin
FROM
  leave_request
  INNER JOIN staff AS applied_staff ON leave_request.staff_id = applied_staff.staff_id
  INNER JOIN leave_approval AS admin_approval ON leave_request.request_id = admin_approval.request_id
  INNER JOIN staff AS approved_staff ON admin_approval.approved_by = approved_staff.staff_id
  INNER JOIN group AS approved_staff_group on approved_staff.group_id = approved_staff_group.group_id
WHERE
  approved_staff_group.group_name = 'admin' 
```

最后，我们需要知道`approved_hr`. 并且`null`被允许？那么，我们将为此使用不同的连接。我也在做出与上述类似的假设。让我们试试这个：

```
SELECT
  applied_staff.name AS applied_by,
  leave_request.applied_from,
  leave_request.applied_to,
  admin_approval.approved_from,
  admin_approval.approved_to,
  approved_staff.name AS approved_admin,
  hr_staff.name AS approved_hr
FROM
  leave_request
  INNER JOIN staff AS applied_staff ON leave_request.staff_id = applied_staff.staff_id
  INNER JOIN leave_approval AS admin_approval ON leave_request.request_id = admin_approval.request_id
  INNER JOIN staff AS approved_staff ON admin_approval.approved_by = approved_staff.staff_id
  INNER JOIN group AS approved_staff_group on approved_staff.group_id = approved_staff_group.group_id
  LEFT OUTER JOIN leave_approval AS hr_approval ON leave_request.request_id = hr_approval.request_id
  LEFT OUTER JOIN staff AS hr_staff ON hr_approval.approved_by = hr_staff.staff_id
  LEFT OUTER JOIN group AS hr_staff_group ON hr_staff.group_id = hr_staff_group.group_id
WHERE
  approved_staff_group.group_name = 'admin'
  AND hr_staff_group.group_name = 'HR' 
```

我不*完全*确定后者`LEFT OUTER JOIN`。第一个肯定需要是允许`null`值的连接，但我不确定查询引擎如何处理除此之外的连接。我希望它们`INNER JOIN`在 initial 的范围内`LEFT OUTER JOIN`。但我想所有这一切也确实取决于数据的完整性，我无法保证。

还值得注意的是，`"Jack"`当值为`"jack"`. 我没有在这段代码中进行任何字符串操作来实现这一点。如果值应该在数据中大写，则在数据中将其大写。

同样，我不能*保证*这个代码。但作为一个演练，它应该让你朝着正确的方向前进。正如我在对该问题的评论中提到的，如果您要编写 MySQL 代码，我真的建议您拿起一本关于 MySQL 的书。

**编辑：**我可以给出的一项建议是数据本身的结构。具体来说，`leave_approval`那张桌子感觉有点乱，只有那张桌子引起了混乱。我有几个建议：

1.  `approval_type`在`leave_approval`表中添加一个。至少这将表明它是管理员批准、人力资源批准还是任何其他类型的批准。（甚至还有其他类型吗？会有吗？）然后您还可以使用`request_id`and`approval_type`作为组合主键，或者至少是组合唯一约束，以加强数据完整性并防止重复批准。
2.  如果只有两种批准并且可能不会改变，请将它们都反映在`leave_approval`表格中。有一组用于 的列`admin_approval_*`，一组用于`hr_approval_*`。（每组都将包括`staff_id`批准的相关日期。）然后`request_id`它本身可能是`leave_approval`使其与 . 一对一的主键`leave_request`。这将极大地简化关系数据，实质​​上将记录转换为`leave_approval`记录的一组可选附加信息`leave_request`。连接会变得更简单，数据会更清楚地表达自己。

# tridion - Tridion UI - “错误请求”

> ID：11411315
> 
> 赞同：7
> 
> 时间：2012-07-10T10:24:47.440
> 
> 标签：tridion

我已经按照文档安装了 Tridion UI 2012，一切似乎都很好，我可以使用 UI 功能，例如创建新页面、修改现有页面等，但时不时地（我无法限制何时或为什么）单击“更新预览”时收到“错误请求”错误。详细错误显示在事件查看器中：

```
Log Name:      Tridion
Source:        Tridion Publishing
Date:          10/07/2012 12:03:37
Event ID:      100
Task Category: None
Level:         Error
Keywords:      Classic
User:          N/A
Computer:      ZZZZZ

Description:
Unable to update or add Binaries using OData Service.
An error occurred while processing this request.
BadRequest

Component: Tridion.SiteEdit.FastTrackPublishing
Errorcode: 1003
User: NT AUTHORITY\NETWORK SERVICE

StackTrace Information Details:
   at System.Data.Services.Client.DataServiceContext.SaveResult.<HandleBatchResponse>d__1e.MoveNext()
   at System.Data.Services.Client.DataServiceContext.SaveResult.HandleBatchResponse()
   at System.Data.Services.Client.DataServiceContext.SaveResult.EndRequest()
   at System.Data.Services.Client.DataServiceContext.SaveChanges(SaveChangesOptions options)
   at Tridion.SiteEdit.FastTrackPublishing.ServiceImplementation.SaveBinaries(RenderedItem renderedItem, ContentDeliveryService service)
   at Tridion.SiteEdit.FastTrackPublishing.ServiceImplementation.SaveBinaries(RenderedItem renderedItem, ContentDeliveryService service)
   at Tridion.SiteEdit.FastTrackPublishing.ServiceImplementation.Preview(IEnumerable`1 publishedItemsInfo, TcmUri publishingTargetId)
   at Tridion.SiteEdit.FastTrackPublishing.ServiceImplementation.Preview(IEnumerable`1 publishedItemsInfo, TcmUri publishingTargetId)
   at SyncInvokePreview(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)
   at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

你以前见过这个错误吗？任何想法如何避免/修复它？

问候艾玛

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-02T15:28:15.450

聚会有点晚了，但就我而言，这是由太大的二进制文件引起的。您可以按照以下步骤更详细地查明问题：（Tridion 2011、SP1、HR2，但我认为这对 2013 年也有效）

1.  在 CMS 服务器上，打开 TcmServiceHost.exe.config 并取消注释以下标记的正文：

    `<system.diagnostics><sources>`

2.  找到标签并创建属性`<sharedListeners>`中提到的目录（或更新此设置）`initializeData`

3.  重新启动 TcmServiceHost 服务并单击“更新预览”。日志文件显示出来，您可以在 SvcTraceViewer 中打开它

找到红色入口，然后从那里走。

要允许更大的二进制文件（考虑性能成本！），请转到您的 OData 会话预览服务并执行以下操作：

1.  打开 web.config 并找到`<bindings><webHttpBinding>`（当然是相关的绑定，但通常是`webHttpBinding`.）

2.  添加具有以下属性的绑定（在`<webHttpBinding>`元素内）：

    `<binding name="AdustedBindingConfiguration" maxReceivedMessageSize="2097152000" maxBufferSize="2097152000"> <readerQuotas maxArrayLength="81920" maxBytesPerRead="5120" maxDepth="32" maxNameTableCharCount="81920" maxStringContentLength="2097152" /> </binding>`

3.  找到`<services><service>`标签并找到相关服务（'Tridion.ContentDelivery.Webservice.ODataService' 并更新`bindingConfiguration`属性以匹配新添加的绑定的名称（在本例中为 AdjustedBindingConfiguration）

4.  再次点击“更新预览”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:43:58.950

我还没有看到这个，但是当我的会话预览内容交付端点 URL 配置错误时，类似的东西。

阅读错误描述，我猜您的端点 URL（会话预览 oData 服务）已启动并正在运行，但它可能还有其他一些问题。我会检查您是否可以手动浏览该 oData 服务，如果看起来不错，请查看其日志文件以获取更多详细信息。

在 IIS 上，这通常意味着正确的 jar 和 DLL 存在问题，请检查以下步骤：

1.  对于 oData 网站，确保从用户界面文件夹 \Content Delivery\roles\webservice\dotNET\webapp\x86_64.zip\bin 复制 DLL，并从 \Content Delivery\roles\webservice\dotNET\webapp\x86_64 更新 jar。压缩\bin
2.  对于 oData 网站，验证 web.config 节点“bindingConfiguration”属性是否正确
3.  对于预览网站，确保从用户界面文件夹 \Content Delivery\roles\web\dotNET\webapp\x86_64.zip\bin 复制 DLL，并将所有 jar 替换为用户界面文件夹 \Content Delivery\roles\web\ 中的内容dotNET\webapp\x86_64.zip\bin\lib

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-02T10:47:19.103

对我来说，解决方案是在会话预览 Web 服务的标准 web.config 中将 maxReceivedMessageSize 增加到“524288000”，将 maxBufferSize 增加到“524288000”

```
<webHttpBinding>
                <binding name="HttpBinding" maxReceivedMessageSize="524288000" maxBufferSize="524288000">
                    <readerQuotas maxArrayLength="81920" maxBytesPerRead="5120" maxDepth="32" maxNameTableCharCount="81920" maxStringContentLength="2097152" />
                    <security mode="TransportCredentialOnly">
                        <transport clientCredentialType="None" />
                    </security>
                </binding>
```

# iphone - 显示警报视图后如何移动到下一个视图控制器

> ID：11411316
> 
> 赞同：4
> 
> 时间：2012-07-10T10:24:47.467
> 
> 标签：iphone, xcode

我有 iPhone，我希望何时`AlertView`显示并且用户在该视图应该更改后按下**OK按钮，但它没有发生。**

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Thank you" message:@"" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
  [alert show];
  [alert release];
  return;
  [self moveToView];

-(void)moveToView
{
    MainViewController*targetController=[[MainViewController alloc]init];
    [self.navigationController pushViewController:targetController animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:28:59.410

请用`UIAlertViewDelegate`

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // Code to move to next view
    [self moveToView];
} 
```

**注意**：`UIAlertViewDelegate`在你的接口声明中实现。此外，在声明 UIAlertView 时，将委托设置为 self。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T10:30:26.993

这很简单。实现 UIAlertViewDelegate 并将代码放在那里。

```
- (void) alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex
{
   MainViewController*targetController=[[MainViewController alloc]init];
   [self.navigationController pushViewController:targetController animated:YES];
   [targetController release];
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T10:31:55.577

在 .h 中，实现了 UIAlertViewDelegate

```
 @interface ClassName : ParentClassName <UIAlertViewDelegate> 
```

在 .m 中，添加这个方法，

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

      [self moveToView];

} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-10T10:32:46.337

实现警报视图的委托：

在 yourClass.h 文件中：

```
@interface yourClass : UIViewController<UIAlertViewDelegate>{

}
@end 
```

在 yourClass.m 文件中：

```
@implementation yourClass

- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex{
    [self moveToView];
}
@end 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-10T10:29:42.140

好吧，您将 self 设置为 UIAlertView 的代表。这是正确的，这是您必须采取的第一步。之后继续实现这个方法：

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    [self moveToView];
} 
```

您还可以在此处进行 switch 语句以查看按下了哪个按钮。但是由于您在 AlertView 上只有 OK 按钮，因此没有必要。

希望这可以帮助。

干杯!

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-10T10:30:01.450

`- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`在方法中实现您的代码， 并`UIAlertViewDelegate`在您的类 .h 文件中添加。

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{
        NSLog(@"The index: %d",buttonIndex);
        MainViewController*targetController=[[MainViewController alloc]init];
        [self.navigationController pushViewController:targetController animated:YES];
        [targetController release];
    } 
```

我想这会对你有所帮助。

# javascript - 如何像 HTML 编辑器一样自动着色代码

> ID：11411317
> 
> 赞同：0
> 
> 时间：2012-07-10T10:24:51.750
> 
> 标签：javascript, html, css

我有一个博客，当我在 HTML/CSS/Javascript/Jquery 等中发布内容时，我想对其代码进行自动着色。就像 Stackoverflow 我知道我是一个最糟糕的解释者，让我试试吧.. 像这样，它自动着色脚本..

```
<style type='text/css'>
img.opacity {
    opacity: 0.5;
    filter: alpha(opacity=50);
    -webkit-transition: opacity 1s linear;
}
img.opacity:hover {
    opacity: 1;
    filter: alpha(opacity=100);
    -webkit-transition: opacity 1s linear;
}
</style> 
```

我想在我的博客上使用这个功能，你能帮帮我吗？这是我的博客： http: [//kownleg.blogspot.com/](http://kownleg.blogspot.com/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:46:05.710

我总是使用[Google Code Prettify](http://code.google.com/p/google-code-prettify/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:26:54.570

您将需要解析文本，并根据关键字、语法等使用 css 为您的代码着色。

这方面的一个例子是 JavaToHTML，它使用 Java 将 Java 文件转换为 HTML。这可能值得阅读并了解它是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:53:49.563

你应该看看[CodeMirror](http://www.codemirror.net/)。它工作得非常好，我很确定 Stack Overflow 使用它。

**编辑：**我错了。Stack Overflow[使用其他东西](https://meta.stackexchange.com/questions/10369/which-tools-and-technologies-build-the-stack-exchange-network)。无论如何，CodeMirror 非常受欢迎，你应该看看它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T10:43:42.747

看看这个[http://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/](http://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/)

# java - 转换从 URL 中提取的字符串获取 JSON 对象

> ID：11411318
> 
> 赞同：0
> 
> 时间：2012-07-10T10:25:03.910
> 
> 标签：java, android, json

我正在尝试从我从 URL 中提取的数据创建的字符串中获取 JSON 数据。到目前为止，这就是我的代码中的内容：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final TextView tv = (TextView)findViewById(R.id.result);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);

        String username = "username";
        String password = "password";
        String url = "http://www.example.com/api/core/v1/my/";
        String unp = username+":"+password;

        class MyUser {
              public String firstName;
              public String lastName;
        }

        try {
            HttpClient client = new DefaultHttpClient();
            HttpGet header = new HttpGet(url);
            String encoded_login = Base64.encodeToString(unp.getBytes(), Base64.NO_WRAP);
            header.setHeader(new BasicHeader("Authorization", "Basic "+encoded_login));
            HttpResponse response = client.execute(header);
            HttpEntity entity = response.getEntity();

            BufferedReader reader = new BufferedReader(new InputStreamReader(entity.getContent()));
            for (String line; (line = reader.readLine()) != null;line.replaceAll("throw 'allowIllegalResourceCall is false.';", "")) {
                Vector<Object> vector = new Vector<Object>();
                vector.add(line);
                String result = vector.toString();

                JSONObject json = (JSONObject)new JSONParser().parse(result);
                System.out.println("name=" + json.get("name"));
                System.out.println("width=" + json.get("width"));

                System.out.println(line);
            }       

        } catch (Exception e) {
            e.printStackTrace();
            Log.d(MY_APP_TAG, "Error e: " + e);
        }

        } 
```

这是将正确的 json 数据拉下来，但每次我尝试解析数据时，我都会得到以下信息：

```
E/AndroidRuntime(923): FATAL EXCEPTION: main
E/AndroidRuntime(923): java.lang.NoClassDefFoundError: org.json.simple.parser.JSONParser
E/AndroidRuntime(923): at basic.authentication.BasicAuthenticationActivity.onCreate(BasicAuthenticationActivity.java:85)
E/AndroidRuntime(923): at android.app.Activity.performCreate(Activity.java:4465)
E/AndroidRuntime(923): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
E/AndroidRuntime(923): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
E/AndroidRuntime(923): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
E/AndroidRuntime(923): at android.app.ActivityThread.access$600(ActivityThread.java:123)
E/AndroidRuntime(923): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
E/AndroidRuntime(923): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(923): at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(923): at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime(923): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(923): at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(923): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime(923): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime(923): at dalvik.system.NativeStart.main(Native Method) 
```

我是 JSON 新手，因此弄清楚这一点是一个真正的巨大挑战，因此非常感谢任何帮助。

此外，JSON 数据是这样通过的：

```
{
  "enabled" : true,
  "email" : "example@gmail.com",
  "firstName" : "example firstname",
  "lastName" : "example lastname",
  "name" : "example fullname",
  "level" : { 
```

我知道这些是 JSON 对象而不是 JSON 数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:33:11.657

你得到了一个`java.lang.NoClassDefFoundError`，因为 JVM 在运行时找不到`org.json.simple.parser.JSONParser`。检查该库是否包含在正确的目录中并已添加到您的类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:34:17.693

为什么不使用字符串创建一个 JSON 对象，如下所示：

```
 JSONObject jsonObject = new JSONObject(result); 
```

现在，像这样获得所需的值：

```
 String name = jsonObject.getString("name"); 
```

# php - 如果不在表 1 中，则从表 2 中删除，基于 2 个字段

> ID：11411320
> 
> 赞同：0
> 
> 时间：2012-07-10T10:25:06.070
> 
> 标签：php, mysql

他们都有 fileId 和 userId 字段

表 1：fileId userId

表2：fileId userId

如果它们不在表 1 中，我想删除表 2 中的所有行，基于它们的 fileId 和 userId .. 不仅仅是一个字段，而是两个字段......

亲切的问候，J

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:27:52.713

```
delete from table2 
where fileid not in (select fileid from table1)
and userId not in (select userId from table1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:35:27.840

看看这个方法。测试工作。

```
CREATE table table1(field varchar(10),userid varchar(20));
CREATE table table2(field varchar(10),userid varchar(20));

insert into table1 values('10','vish');
insert into table1 values('11','atul');
insert into table1 values('12','nish');

insert into table2 values('10','vish');
insert into table2 values('11','atul');
insert into table2 values('13','paul');
insert into table2 values('14','ganesh');

DELETE from table2
WHERE NOT exists 
(select field+userid from table1 t1 where t1.field+userid = table2.field+userid);

SELECT * FROM table2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:29:45.943

```
DELETE FROM table2 WHERE userId NOT IN (SELECT userId from table1) AND 
                         fileId NOT IN (SELECT fileId from table1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T10:28:20.013

TRY（假设`id`是两个表的主键）

```
DELETE FROM table2
WHERE id NOT IN ( 
        SELECT 'id' FROM table1 t1 
        INNER JOIN table2 t2 ON ( t1.field=t2.filed AND t1.userid = t2.userid)
        ) 
```

# android - Android处理多个列表的有效方法

> ID：11411321
> 
> 赞同：0
> 
> 时间：2012-07-10T10:25:06.477
> 
> 标签：android

我的应用程序允许用户与朋友聊天（如 Skype 或 whatsapp），所以我有一个 Activity 用于显示“对话”（列表）。

用户可以从一个对话切换到另一个对话。因此，问题是从一个列表更改为另一个列表，或者“更新”整个消息列表。

最好的方法是什么？（性能和内存） - 从列表中删除所有元素并添加新消息？- 使用多个 ListViews 和适配器？...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:29:01.970

我想说这完全取决于您如何存储消息，以及许多其他参数围绕着它。

但是，我可能会在本地缓存消息，这样当用户选择新对话时，他们首先会在加载新消息时看到旧消息。一个 ListView、一个某种 ListAdapter 和一个我在对话之间切换时清除的 List。

这可能不是最理想的方法，但这就是我在给定场景中的做法。

# web-services - Axis2 故障 Pojo Web 服务

> ID：11411324
> 
> 赞同：0
> 
> 时间：2012-07-10T10:25:11.737
> 
> 标签：web-services, axis2, pojo, fault

我创建了一个 pojo，如下所示。

```
package demo;
public class HelloWorld {
    public String sayHello(String name) {
        return "Hello " + name;
    }
} 
```

我把它放在axis2战争中并打开

```
http://localhost:8080/axis2/services/listServices. 
```

轴 2 将其指示为故障服务

```
Faulty Services
<TOMCAT-DIR>\webapps\axis2\WEB-INF\pojo\demo\HelloWorld.class 
```

但是当我删除包声明语句并将其放在下面的位置时，一切正常

```
<TOMCAT-DIR>\webapps\axis2\WEB-INF\pojo\HelloWorld.class 
```

现在有两种可能

*   pojo 中不允许进行包声明（我不相信这一点）。
*   我错过了一些东西。

谁能指导我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:21:48.437

在“Apache Axis Web Services, 2nd Edition”一书中，作者描述了当通过放入 pojo 文件夹将 pojo 类公开为 Web 服务时，必须在默认包中定义 pojo 类。

当 pojo 类被定义一些包时，下面的链接很有帮助。

[http://axis.apache.org/axis2/java/core/docs/pojoguide.html](http://axis.apache.org/axis2/java/core/docs/pojoguide.html)

感谢 shashankaholic 分享此链接。

# android - Android：具有硬件加速的WebView仅显示白屏

> ID：11411330
> 
> 赞同：1
> 
> 时间：2012-07-10T10:25:27.167
> 
> 标签：android, android-webview, hardware-acceleration

我注意到`WebView`在 Android 3.x 中加载包含大量 javascript 内容（如 JQuery）的页面会导致性能非常缓慢。我搜索并发现设置`android:hardwareAccelerated`为true会更好。

但是，这样做之后，webview 只显示白屏，什么都没有。以下是我用来测试的内容：

```
public class TestWebViewWithHAActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        WebView webView = (WebView) findViewById(R.id.web);
        webView.getSettings().setJavaScriptEnabled(true);
        webView.getSettings().setDomStorageEnabled(true);
        webView.getSettings().setRenderPriority(RenderPriority.HIGH);
        webView.getSettings().setPluginState(PluginState.ON_DEMAND);
        webView.loadUrl("http://www.google.com");        
} 
```

并`android:hardwareAccelerated="true"`在清单中的应用程序级别设置

一些日志显示渲染错误：

```
07-10 17:30:44.847 D/libEGL  (2417): loaded /system/lib/egl/libGLES_android.so
07-10 17:30:44.857 D/libEGL  (2417): loaded /system/lib/egl/libEGL_VIVANTE.so
07-10 17:30:44.877 D/libEGL  (2417): loaded /system/lib/egl/libGLESv1_CM_VIVANTE.so
07-10 17:30:44.907 D/libEGL  (2417): loaded /system/lib/egl/libGLESv2_VIVANTE.so
07-10 17:30:44.947 I/        (2417): visual ID: 1
07-10 17:30:44.947 D/OpenGLRenderer(2417): Creating OpenGL renderer caches
07-10 17:30:44.947 D/OpenGLRenderer(2417): Enabling debug mode 0
07-10 17:30:44.947 D/OpenGLRenderer(2417): Layers will be composited as regions
07-10 17:30:45.067 I/ActivityManager(121): Displayed com.example.testwebviewwithha/.TestWebViewWithHAActivity: +705ms
07-10 17:30:45.567 I/dalvikvm-heap(202): Clamp target GC heap from 48.338MB to 48.000MB
07-10 17:30:45.587 D/dalvikvm(202): GC_EXPLICIT freed 219K, 4% free 47342K/48839K, paused 3ms+5ms
07-10 17:30:46.447 D/ShaderProgram(2417): could not compile shader 35632:
07-10 17:30:46.447 D/ShaderProgram(2417): (1:0) : warning : Extension : GL_OES_EGL_image_external is not provided by this compiler.
07-10 17:30:46.447 D/ShaderProgram(2417): (2:0) : error : Extension GL_OES_EGL_image_external do not support 'require'.
07-10 17:30:46.447 D/ShaderProgram(2417): (2:0) : error : Error in parsing.
07-10 17:30:46.447 D/ShaderProgram(2417): (8:0) : error : syntax error
07-10 17:30:46.447 D/ShaderProgram(2417): 
07-10 17:30:46.447 D/ShaderProgram(2417): couldn't load the pixel shader!
07-10 17:30:46.457 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.467 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.487 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.517 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.527 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.537 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.557 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.577 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.607 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.617 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.647 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.657 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.677 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.687 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.707 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.737 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.747 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.767 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.777 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.807 D/GLUtils (2417): GL ERROR - after glBindTexture() glError (0x501)
07-10 17:30:46.817 D/OpenGLRenderer(2417): GL error from OpenGLRenderer: 0x501
07-10 17:30:46.837 D/GLUtils (2417): GL ERROR - after glBindTexture() glError (0x501)
07-10 17:30:46.837 D/GLUtils (2417): GL ERROR - after drawQuad() glError (0x501) 
```

造成这种情况的原因是什么？

当然，如果我不使用硬件加速，它工作正常。但这与我的目的相矛盾。

我还在 Android 3.0 设备的模拟器上进行了测试。我工作得很好，但我怀疑它是否`android:hardwareAccelerated="true"`真的生效。只是我的设备不支持吗？我正在使用 Ainol Novo 7 Basic 平板电脑（Android 3.2）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-06T08:43:02.783

在您的活动中添加这样的检查：

```
if (Build.VERSION.SDK_INT >= 19) {
    // chromium, enable hardware acceleration
    webView.setLayerType(View.LAYER_TYPE_HARDWARE, null);
} else {
    // older android version, disable hardware acceleration
    webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

# emmet - 第n个元素

> ID：11411334
> 
> 赞同：1
> 
> 时间：2012-07-10T10:25:44.163
> 
> 标签：emmet

我一直在使用禅宗编码，我喜欢它。只有一件事我不知道该怎么做（或者甚至可能。）

假设我输入了：

`ul#navigation>li*3`

这将输出：

`<ul id="navigation"> <li></li> <li></li> <li></li> </ul>`

如何将类应用于特定编号的元素？比如在第二个中添加一个名为 'hello' 的类`<li>?`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T18:22:51.230

在这种情况下，您不能将特定类应用于重复元素。

*但是，您可以通过使用 abbreviation 包装文本*来插入特定的类名（或任何其他属性）。例如，您可以换行此文本：

```
one
two
three 
```

使用以下缩写：`ul#navigation>li[class=$#]*`. 它将产生以下输出：

```
<ul class="navigation">
    <li class="one"></li>
    <li class="two"></li>
    <li class="three"></li>
</ul> 
```

阅读更多[https://github.com/sergeche/zen-coding/wiki/Release-Notes](https://github.com/sergeche/zen-coding/wiki/Release-Notes)

# javascript - 在 HTML5 画布中的多个边界内拖放图像

> ID：11411337
> 
> 赞同：4
> 
> 时间：2012-07-10T10:25:55.520
> 
> 标签：javascript, html, css

我是 HTML5 新手。我必须实现这样的功能，即我希望将图像从外部拖放到画布中，然后画布内有可见的边界，并且图像可以从一个边界移动到另一个边界。与以下链接相同， [http://custom.case-mate.com/diy?bypassLandingPage =true](http://custom.case-mate.com/diy?bypassLandingPage=true)

因为，在站点中，用户选择模式并将图像拖入其中。然后他可以在边界之间拖动图像。请提供一些解决方案来实现这样的功能。

这是我尝试过的，

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      canvas {position:relative;
        left:150%;
        border: 10px solid #9C9898;
        background-color: grey;
      }
    </style>
    <script src="http://www.html5canvastutorials.com/libraries/kinetic-v3.10.0.js"></script>
    <script>
      window.onload = function() {
        var stage = new Kinetic.Stage({
          container: "container",
          width: 300,
          height: 400,
        });

        var layer = new Kinetic.Layer();

        var redLine = new Kinetic.Line({
          points: [150, 0, 150, 400],
          stroke: "white",
          strokeWidth: 2,
        });

        var blueLine = new Kinetic.Line({
          points: [150, 0, 150, 120, 300, 120],
          stroke: "white",
          strokeWidth: 2,
        });

        var thirdLine = new Kinetic.Line({
          points: [300, 120, 150, 120, 150, 400],
          stroke: "white",
          strokeWidth: 2,
        });

        var imageObj = new Image();
        imageObj.onload = function() {
          var image = new Kinetic.Image({
            x: stage.getWidth() / 2 - 50,
            y: stage.getHeight() / 2 - 60,
            image: imageObj,
            width: 100,
            height: 120,

          }); 
           image.draggable(true);   
          layer.add(image);

          // add the layer to the stage
          stage.add(layer);
        };
        imageObj.src = "images/212.png";
        layer.add(redLine);
        layer.add(blueLine);
        layer.add(thirdLine);
        stage.add(layer);
};

    </script>
  </head>
  <body>
    <div id="container"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:32:16.647

这是一个关于 HTML5 原生拖放的不错教程：http: [//www.html5rocks.com/en/tutorials/dnd/basics/](http://www.html5rocks.com/en/tutorials/dnd/basics/)

基本上，您可以在 HTML5 中使用 draggable 属性将项目声明为可拖动

```
<div class="draggable" draggable="true">A</div>
<div class="draggable" draggable="true">B</div> 
```

...然后使用 Javascript 处理一些事件，例如：

```
var items = document.querySelectorAll('.draggable');
[].forEach.call(items, function(item) {
  item.addEventListener('dragstart', function(){ /*handle drag start*/ }, false);
  item.addEventListener('dragenter', function(){ /*handle drag enter*/ }, false)
  item.addEventListener('dragover',  function(){ /*handle drag over*/ }, false);
  item.addEventListener('dragleave', function(){ /*handle drag leave*/ }, false);
  item.addEventListener('drop',      function(){ /*handle drop*/ }, false);
  item.addEventListener('dragend',   function(){ /*handle drag end*/ }, false);
}); 
```

# spring-mvc - 如何使输入字段接受依赖于区域设置的数字格式？

> ID：11411338
> 
> 赞同：0
> 
> 时间：2012-07-10T10:26:00.670
> 
> 标签：spring-mvc, localization, jstl

我正在开发一个 Spring MVC 项目，并遇到了表单国际化的问题，尤其是数字格式。

我已经使用 fmt:formatNumber 根据当前选择的语言环境来格式化数字。

```
<fmt:formatNumber value="${object[field]}"/> 
```

像这样，当我显示数字时，数字格式效果很好。但是表格呢？

目前，应该接收浮点值的输入字段预填充 0.0 并希望我使用“。” 作为小数点分隔符，无论选择什么语言环境。服务器拒绝包含“，”的值（...无法将字符串转换为所需的浮点类型...）。

如何使我的输入字段也使用并接受适当的数字格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:30:49.237

你看过了[`@NumberFormat`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/annotation/NumberFormat.html)吗？如果您注释输入字段绑定到的属性，这应该会导致正确的格式。就像是：

```
@NumberFormat(style = Style.NUMBER)
private BigDecimal something; 
```

这种风格是[“当前语言环境的通用数字格式”](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/format/annotation/NumberFormat.Style.html#NUMBER)。我猜，当前的语言环境是从[`LocaleContextHolder`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/i18n/LocaleContextHolder.html).

您的应用程序需要是[注释驱动的](http://blog.springsource.org/2009/12/21/mvc-simplifications-in-spring-3-0/)，另请参阅文档中的[“注释驱动格式”部分。](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/validation.html#format-CustomFormatAnnotations)

您可能想看看[这个答案](https://stackoverflow.com/a/4713217/95033)[`DecimalFormatSymbols`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormatSymbols.html)中建议的内容。

# tcsh - 在 tcsh 中，如何在反引号中获取命令的退出状态？

> ID：11411346
> 
> 赞同：1
> 
> 时间：2012-07-10T10:26:41.763
> 
> 标签：tcsh

我的 tcsh 启动脚本中有以下代码：

```
set _color_count = `sh -c "tput -T${TERM}-256color colors 2>/dev/null"`
if ($? == 0) then  # check if it was a valid terminal type
    if ($_color_count != 256) then  # sanity-check
        echo "Warning: Color count '$_color_count' for '${TERM}-256color' is not 256"
    endif
    setenv TERM "${TERM}-256color"
endif 
```

我的问题是退出状态（$？）*始终*为零，即使`tput`命令由于终端类型无效而返回非零退出状态也是如此。如果我不捕获命令的输出，检查退出状态工作正常：

```
sh -c "tput -T${TERM}-256color colors 2>/dev/null" 
```

鉴于命令在反引号中，我如何确定该`tput`命令是否返回非零退出状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:26:42.247

事实证明，这是 tcsh 版本 6.17.05 中引入的行为更改（请参阅[原始错误报告](https://bugzilla.redhat.com/show_bug.cgi?id=638955)）。从 tcsh 版本 6.18.00 开始，它看起来会被恢复（参见[回归错误报告](https://bugzilla.redhat.com/show_bug.cgi?id=759132)），但它显然已经流行起来了。

但是，对于受影响的版本，您可以在反引号中运行命令之前设置变量 $anyerror：

```
set anyerror
set _color_count = `sh -c "tput -T${TERM}-256color colors 2>/dev/null"` 
```

根据我的 tcsh 手册页的特殊 shell 变量**状态**：

> **status** 最后一个命令返回的状态，除非设置了变量 anyerror，并且管道中的任何错误或反引号扩展都将被传播（这是默认的 csh 行为）。

# mysql - Mysql 2 Tables join Limit 结果从两个表返回

> ID：11411354
> 
> 赞同：0
> 
> 时间：2012-07-10T10:27:11.717
> 
> 标签：mysql, join

我一直在尝试这个要求几个小时，但我一无所知，因为我没有得到想要的结果。

我有两张桌子。

```
**Main Comment Table
----------------------------------------------------------------------------
id | comments | date_commented | comment_owner | commented_by 
1    hello world  **********        321             123

Child Comment Table
----------------------------------------------------------------------------
id | mainpostID| child_comment_data           | commented_by |  date_commented** 
1     1          child comment of hello world    456             ******** 
```

我的要求：
我想为每个主要评论检索前 10 条主要评论以及 Chilcomments。我想将每个主要评论的子评论数量限制为 5 个。

我尝试了什么：

```
SELECT maincomment.comments, childcomment.child_comment_data 
FROM maincomment
LEFT JOIN childcomment ON maincomment.id = childcomment.mainpostID
AND maincomment.comment_owner = childcomment.commented_by
WHERE maincomment.id = childcomment.mainpostID
ORDER BY dateposted DESC
LIMIT 10 
```

结果：我只得到 10 个主要评论，但每个主要评论的子评论数量只有 1 个。我需要为每个 Maincomment 返回 5 个子评论。

有人请在这里提供一些建议/查询。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:50:46.150

您可以使用此解决方案：

```
SELECT a.*, b.*
FROM
(
    SELECT *
    FROM maincomment
    ORDER BY dateposted DESC
    LIMIT 10
) a
LEFT JOIN
(
    SELECT a.*
    FROM childcomment a
    INNER JOIN childcomment b ON a.mainpostID = b.mainpostID AND a.id <= b.id
    GROUP BY a.id
    HAVING COUNT(1) <= 5
) b ON a.id = b.mainpostID
ORDER BY a.dateposted DESC, b.date_commented DESC 
```

这将获得 10 个最新的主要评论中最多 5 个最新的子评论。如果特定主评论没有子评论，则子评论数据将包含`NULL`值。

# iis-6 - 过滤入站请求 http

> ID：11411356
> 
> 赞同：1
> 
> 时间：2012-07-10T10:27:15.863
> 
> 标签：iis-6, filtering

我在 Windows 2003 上的 IIS6 上有一些网站。我想只允许一个网站来自某些 IP 地址的 http 连接。是否可以通过对 IIS 的配置进行操作来做到这一点？谢谢

奥龙佐

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:46:55.230

因此，您想根据用户的 IP 地址授予或拒绝对网站的访问权限吗？

这是一组 Microsoft Technet 文章，告诉您如何限制对 IIS 6 的访问。

[使用 IP 地址限制保护站点 (IIS 6.0)](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/128d26dd-decb-42f9-8efb-30724d1a2f29.mspx?mfr=true)
它提供了保护单个 IP、域和 ip 子网的说明。

# c# - 对列表进行排序以将元素放在顶部

> ID：11411357
> 
> 赞同：0
> 
> 时间：2012-07-10T10:27:16.190
> 
> 标签：c#

我有一个`List<Vehicles>`包含 4 个项目：

我的`Vehicles`对象有 2 个属性：`VehId`,`VehName`

我列表中的 4 项是：

1)`VehId : "LOR", VehName : "Lorry"`

2)`VehId : "CAR", VehName : "Car"`

3)`VehId : "BOA", VehName : "Boat"`

4)`VehId : "PLN", VehName : "Plane"`

我想做的是将`Car`车辆放在列表的顶部。我该怎么做？通过使用`.OrderBy()`或`.Sort()`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:34:46.897

一种方法是使用`Enumerable.OrderBy:`

```
var ordered = vehicles
        .OrderByDescending(v => v.VehId == "CAR")
        .ThenBy(v => v.VehName); 
```

这是一个演示：http: [//ideone.com/QAgzd](http://ideone.com/QAgzd)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:31:12.267

`IComparable<Vehicle>`使用您想要的标准实施，然后使用排序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:32:57.597

像这样的东西应该工作：

```
vehicles.Sort((a,b) => -(a.VehId == "CAR").CompareTo(b.VehId == "CAR")); 
```

如果需要，您可以通过`IComparable<Vehicle>`以下方式为实现应用相同的逻辑：

```
class Vehicle : IComparable<Vehicle>
{
    public int CompareTo(Vehicle other)
    {
        int c = (this.VehId == "CAR").CompareTo(this.VehId == "CAR");
        return c;
    }
    // other class code...
} 
```

然后你可以`vehicles.Sort()`在开始时简单地打电话来取车。

# php - 如何在没有 javascript 的情况下获取父窗口的 URL？

> ID：11411366
> 
> 赞同：4
> 
> 时间：2012-07-10T10:27:54.903
> 
> 标签：php

我有一个 HTML 文件*http://mydomain.com/page1.html*：

```
<!doctype html>
<html>
  <iframe src="http://mydomain.com/page2.php"></iframe>
</html> 
```

在*page2.php*中，我想获取“容器页面”的 url，在本例中是 string `page1.html`。

无论如何，**没有 javascript**可以这样做吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:31:13.820

浏览器*可能会*在 HTTP 请求中将父级的 URL 作为 Referer 发送，因此请查看`$_SERVER['HTTP_REFERER']`. 但这并不能保证。因此，没有 100% 万无一失的方法。如果客户端没有在请求中提供信息，那么您在服务器端没有任何其他可以做的事情，除非在 URL 中显式传递参数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T10:30:57.820

为什么不将一些未经处理的 GET 参数传递给内页？

```
<iframe src="http://mydomain.com/page2.php?outerPageURL=<URL_ENCODED_CURRENT_URL>></iframe> 
```

然后内页可以执行以下操作：

```
$_GET['outerPageURL']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T10:30:42.563

你可以简单地使用`$_SERVER ['HTTP_REFERER']`它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T10:30:53.750

您可以使用`$_SERVER['HTTP_REFERER']`，但有时它可能不起作用。据我所知，没有其他方法，没有使用 javascript。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T10:32:59.160

您可以在 PHP 中使用[$_SERVER 。](http://us2.php.net/manual/en/reserved.variables.server.php)

要获取您案例中的 URL `base url`：

```
<?php echo "http://" . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; ?> 
```

# jira - 在 Jira 中搜索标签！=

> ID：11411367
> 
> 赞同：29
> 
> 时间：2012-07-10T10:28:00.120
> 
> 标签：jira, labels

我为我的一些问题设置了标签。在搜索标签 =“ab”时，我得到了相关的，但我似乎找不到询问标签的正确语法！ =“ab”。如何查询不等于 ab 的？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-10T13:54:21.710

!= 对我有用，虽然它只显示有标签的问题如果我想显示所有没有特定标签的问题，我必须做

```
(labels is EMPTY OR labels != 'mylabel') 
```

这种行为目前是 Jira 团队的意图。更改它的建议已发布在[Developer-Jira](https://jira.atlassian.com/browse/JRA-23030)中并且可以投票。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T10:39:27.690

```
labels != 'ab' 
```

将显示与“ab”不同的标签的所有问题，**但不是空标签**。

也显示那些带有空标签的人：

```
labels != 'ab' OR labels is empty 
```

# iphone - 下载文件时立即更新 ULabel

> ID：11411373
> 
> 赞同：0
> 
> 时间：2012-07-10T10:28:29.303
> 
> 标签：iphone, objective-c, cocoa-touch, uilabel, performselector

我正在使用 NSURLConnection 下载文件。我的视图中有一个 UILabel，它必须显示当前下载的文件。UILabel 在开始和结束时都会更新。假设我正在下载 10 个文件。我可以在开始下载之前和完成下载之后设置标签文本。

我可以理解，我试图调用的方法没有在主线程中运行，

所以我用下面的代码让它在主线程中运行，

```
[_myHome performSelectorOnMainThread:@selector(updateLabel) withObject:nil waitUntilDone:YES]; 
```

方法是

```
- (void) updateLabel
 {
         _fileName.text =[NSString stringWithFormat:@"%@",fileName];
 } 
```

这似乎也不起作用。我在这里做错什么了吗？

谁能告诉我如何立即更新标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:11:45.673

已解决：我使用 NSNotificationCenter 向其他类发送通知，这将立即更新标签。我尝试使用 performSelectorOnMainThread，即使 updateProgress 和 performSelectorOnMainThread 都在同一个类中。

任何为什么它没有成功的原因，都是最受欢迎的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-10T10:38:12.480

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    //update your label 
} 
```

# java - 设置器仅在设置器范围内更改字段的值

> ID：11411374
> 
> 赞同：0
> 
> 时间：2012-07-10T10:28:33.653
> 
> 标签：java, hibernate

我有一个接收消息的应用程序。在消息中有可以编辑的字段。更改字段时，应将其保存到数据库中。不幸的是，setter 仅在 setter 的范围内更改给定字段的值。知道为什么会这样吗？这是 getter 和 setter 代码：

```
public String getSenderCharges() {
    Tag tag = swiftMessage.getBlock4().getTagByName("71F");
    String value = tag.getValue();
    Field71F field = new Field71F(value);           
    String senderCharges = field.getValue();
    return senderCharges; 
}

public void setSenderCharges(String senderCharges) {
    Tag tag = swiftMessage.getBlock4().getTagByName("71F");
    String value = tag.getValue();
    if(value.equals(senderCharges)){
        tag.setValue(value);
    }else{
        tag.setValue(senderCharges);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:33:10.327

当您`creating a new object of Tag in setter method`在诸如 e 之类的方法中更新 Tag 值时，您`tag.setValu`不会反映在 setter 方法之外。

标记对于 setter 方法是本地的，并且在 setter 方法之外没有范围。

试试这个方法——

```
public void setSenderCharges(String senderCharges) {
    String value = swiftMessage.getBlock4().getTagByName("71F").getValue();
    if(!value.equals(senderCharges)){
       swiftMessage.getBlock4().getTagByName("71F").setValue(senderCharges);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:39:54.397

我注意到的一件事是多余的`tag.setValue(value)`. 为什么要设置你刚刚从中得到的值？您的整个 set-method 等效于`swiftMessage.getBlock4().getTagByName("71F").setValue(senderCharges)`.

为什么您没有从其他代码中观察到这种变化，这在您迄今为止发布的代码中并不明显。也许是并发问题？

# debugging - 通过 webkit-devtools-agent 调试 node.js，如何查看堆中对象的内容？

> ID：11411376
> 
> 赞同：5
> 
> 时间：2012-07-10T10:28:40.397
> 
> 标签：debugging, node.js, memory-leaks

[我正在重新尝试通过 webkit-devtools-agent ( https://github.com/c4milo/node-webkit-agent](https://github.com/c4milo/node-webkit-agent) )调查我的 nodejs 程序中的内存泄漏问题。

通过拍摄堆快照，我可以看到堆大小不断增加。但是由于我的代码结构复杂。似乎很难挖掘​​出哪些代码生成了这些对象。

在个人资料页面中，我只能看到如下内容：

```
(Array)
[] @28631
[] @31853
(map descriptors)[] @44687
function NativeModule() @35997 
```

有没有办法找出这些对象的内容以及生成这些对象的来源？

我读了一篇关于 node.js 调试的文章（[http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/](http://dtrace.org/blogs/bmc/2012/05/05/debugging-node-js-memory-leaks/)）。这是相当惊人的。但不幸的是，我认为它在 linux 服务器中不可用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-24T07:02:05.603

您可以随时尝试[node-inspector](https://github.com/node-inspector/node-inspector)。幸运的是，我昨天为 node-inspector 拍了一个 install .gif 来回答一个不同的 SO 问题。

[![](../Images/928c0d735364bef4e824b9562471bea2.png)](https://i.imgur.com/N0MsHj1.gif)

PS - node-inspector 在所有平台上运行并使用 webkit 调试器。

# android - android自动生成带有.out的xml文件

> ID：11411380
> 
> 赞同：1
> 
> 时间：2012-07-10T10:28:49.833
> 
> 标签：android, xml, android-xml

您好，我发现大多数时候一个 xml 文件是使用 filename.out.xml 自动生成的，例如我的文件名为 example.xml 但是当我编辑并保存它时，会自动创建 example.out.xml 文件。不知道是怎么回事？请帮我找到这个。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:40:26.527

这是一个已知问题：[http ://code.google.com/p/android/issues/detail?id=3767](http://code.google.com/p/android/issues/detail?id=3767)

为避免将来发生这种情况，请单击：

*   窗口->
*   首选项->
*   运行/调试->
*   启动 ->
*   启动操作 ->
*   始终启动先前启动的应用程序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T10:34:57.083

```
what i have do with this file? 
```

**删除它。**

您编译了您的`example.xml`文件，以便它创建`example.out.xml`.Delete`example.out.xml`并清理您的项目。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T10:31:17.007

我认为问题在于您不小心尝试编译 XML 文件，这导致它创建了一个`example.xml.out`. 当您想要运行您的应用程序时，请确保您在左侧的浏览器中选择了一个源文件，或者在点击运行时正在查看一个源文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T10:39:34.743

嘿，几个月前当我更新我的 Eclipse 时，我遇到了这个问题。我通常做的是删除这个自动生成的文件并转到像 ABC .JAVA 这样的类，然后我运行我的项目，它对我来说很好。不要从任何 xml 资源运行您的应用程序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T10:40:17.960

当 xml 文件具有焦点并且您运行项目时会发生此错误，当您遇到此类错误时，请按照以下步骤操作：

1.  您必须删除 xxx.out.xml
2.  清理您的项目项目->清理...->选择您的项目->确定
3.  将光标设置在 /src 文件夹中的 *.java 或项目全局文件夹中并运行它

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T17:38:12.970

在 android 中，您通常使用打开的 java 文件运行您的应用程序，如果任何 .xml 文件已打开并且您尝试运行您的应用程序，那么有时会自动生成 filename.out.xml 文件。

首先你需要删除这个 out.xml 文件并清理你的项目。它对我有用。我认为它对你有帮助。

# ruby - 在 Azure 上运行 ruby gem（中间人）

> ID：11411383
> 
> 赞同：1
> 
> 时间：2012-07-10T10:29:06.630
> 
> 标签：ruby, azure, middleman

我刚刚在 Azure 上注册了一个试用帐户，看看它是否对我来说是一个长期可行的平台。

使用具有各种 CMD 和启动脚本的网络工作者角色，我设法让 ruby​​ 在云上工作 - 一个简单的“Hello world”消息！

但是，我无法让[Middleman](https://github.com/middleman/middleman)自动启动，并且在日志中看不到任何内容来指示问题所在。当我导航到应用程序时，我只是得到一个“页面不可用”。

也许我以错误的方式使用 Azure。有任何想法吗？Azure 上还有什么东西可以让我通过 RDC 或类似工具来调试问题吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:12:23.883

如果你让 Ruby 以你的 worker 角色运行，你绝对可以和它一起运行 Middleman。可能存在很多问题，例如 Worker Role 中缺少特定内容、正确的网络设置等，您可以通过 RDP 对您的 Windows Azure Worker Role 解决大多数此类问题。您可以使用您的角色启用 R​​DP 访问，如下所述，一旦您进入虚拟机，您就可以轻松找出可能存在的问题：

[http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg443832.aspx)

如果您直接从 Windows Azure SDK 工具创建包（不使用 VS2010），那么您可能需要做一些额外的工作以在您的部署中包含 RDP 特定设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T04:45:35.813

Middleman 旨在生成静态网站，然后您可以直接使用任何类型的服务器为其提供服务。没有理由使用 Ruby 或任何特殊服务器来部署您的站点 - 只需复制静态文件！

# qt - 如何在手机内存中创建新文件夹诺基亚 Qt

> ID：11411384
> 
> 赞同：0
> 
> 时间：2012-07-10T10:29:09.683
> 
> 标签：qt, directory, createfile

我正在使用以下代码在现有的“游戏”文件夹中创建一个新文件夹，但它并没有创建该文件夹。

```
QDir dir("C:/Games/MyGame");
if(!dir.exists())
{
    dir.mkdir("C:/Games/MyGame");
}
else
{
    qDebug()<<dir.absolutePath() + " exists";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:13:32.963

确保您在`C:/`[以编程方式检查 QDir().exists("C:/Games/) 是否返回 true ] 中有 Games 文件夹。

并确保您的`C:/`文件夹`doesn't have any file named Games, Because if you have file with same name, the exists function will return false even if the folder is present!`. 并且`mkdir`会返回false！！！

如果不存在以下代码，则应创建指定的目录。

```
if (QDir().exists("C:/Games/MyGame"))
{
   qDebug()<<dir.absolutePath() + " exists";
}

else
{
   QDir().mkdir("C:/Games/MyGame");
} 
```

# android - TargetApi 注释不是 API 级别 16（Android 4.1）的一部分吗？

> ID：11411387
> 
> 赞同：1
> 
> 时间：2012-07-10T10:29:20.307
> 
> 标签：android

所以我更新到最后一个 v0.8，似乎我在 android.annotation.TargetApi 导入时遇到错误。这似乎属于尚未发布的 Api level 16。或者有一些包裹可以得到这个吗？

问候，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:38:03.923

首先，API Level 16 已经发布了不到两周。

其次，`@TargetApi`已经存在至少几个月了。确保您使用的是最新版本的 Android 开发人员工具（至少 R17），因为这更多是工具问题而不是构建目标问题 AFAIK。

# c# - 使用注册表和上下文菜单调用文件时的编码路径

> ID：11411391
> 
> 赞同：0
> 
> 时间：2012-07-10T10:29:53.103
> 
> 标签：c#, registry, arguments, contextmenu, console-application

在将字符串作为参数的**c# 控制台应用程序**中，我有一个用于图像的上下文菜单项，它调用`"myexe.exe %1"`，因此文件路径成为应用程序的参数。即使文件路径包含空格，当我观看时，我的应用程序采用什么参数，我可以看到类似的`"VISUAL~3/...."` *内容（例如，当文件路径包含“visual stuido”时，它有空间）*。

但是我的应用程序应该了解给出了多少参数，所以如果从上下文菜单中调用它，一切正常，因为结果参数没有空格。

但我需要从其他应用程序调用**exe 文件**，并提供带空格的字符串参数。当我只给出带空格的参数时，我的应用程序会拆分它，所以我不知道如何在参数中编码空格以将其提供给 exe 文件，就像上下文菜单一样。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:51:59.860

你应该双引号你的命令行参数，例如，

```
string args = "\"arg 1\" \"arg 2\""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T09:27:46.890

**路径**和**变量**都必须单独引用，例如**"myexe.exe" "%1"**。这将防止带有空格的参数产生无效路径：

“myexe.exe %1”变成“myexe.exe ar gument”，一个**“**没有意义的可执行文件**”**，而

**"myexe.exe" "%1"**变成 "myexe.exe" "argument" *，*一个*带有单个参数的***"** executable **"** **"**。

# android - 如何在android中获取当前的前台活动上下文？

> ID：11411395
> 
> 赞同：195
> 
> 时间：2012-07-10T10:30:01.730
> 
> 标签：android, android-activity

每当我的广播被执行时，我想对前台活动显示警报。

* * *

## 回答 #1

> 赞同：223
> 
> 时间：2012-12-21T17:32:06.620

（**注：** API 14 中添加了官方 API：请参阅此答案[https://stackoverflow.com/a/29786451/119733](https://stackoverflow.com/a/29786451/119733)）

不要使用以前的（waqas716）答案。

由于对活动的静态引用，您将遇到内存泄漏问题。有关更多详细信息，请参阅以下链接[http://android-developers.blogspot.fr/2009/01/avoiding-memory-leaks.html](http://android-developers.blogspot.fr/2009/01/avoiding-memory-leaks.html)

为避免这种情况，您应该管理活动引用。在清单文件中添加应用程序的名称：

```
<application
    android:name=".MyApp"
    ....
 </application> 
```

您的应用程序类：

```
 public class MyApp extends Application {
        public void onCreate() {
              super.onCreate();
        }

        private Activity mCurrentActivity = null;
        public Activity getCurrentActivity(){
              return mCurrentActivity;
        }
        public void setCurrentActivity(Activity mCurrentActivity){
              this.mCurrentActivity = mCurrentActivity;
        }
  } 
```

创建一个新活动：

```
public class MyBaseActivity extends Activity {
    protected MyApp mMyApp;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        mMyApp = (MyApp)this.getApplicationContext();
    }
    protected void onResume() {
        super.onResume();
        mMyApp.setCurrentActivity(this);
    }
    protected void onPause() {
        clearReferences();
        super.onPause();
    }
    protected void onDestroy() {        
        clearReferences();
        super.onDestroy();
    }

    private void clearReferences(){
        Activity currActivity = mMyApp.getCurrentActivity();
        if (this.equals(currActivity))
            mMyApp.setCurrentActivity(null);
    }
} 
```

因此，现在不要为您的活动扩展 Activity 类，只需扩展 MyBaseActivity。现在，您可以像这样从应用程序或活动上下文中获取当前活动：

```
Activity currentActivity = ((MyApp)context.getApplicationContext()).getCurrentActivity(); 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2015-04-22T02:05:06.563

我扩展了@gezdy 的答案。

`Application`在每个活动中，我们可以使用从级别 14 开始的以下 API ，而不是必须通过手动编码“注册”自身，以帮助我们以更少的手动编码实现类似的目的。

```
public void registerActivityLifecycleCallbacks (Application.ActivityLifecycleCallbacks callback) 
```

[http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29](http://developer.android.com/reference/android/app/Application.html#registerActivityLifecycleCallbacks%28android.app.Application.ActivityLifecycleCallbacks%29)

在`Application.ActivityLifecycleCallbacks`中，您可以获得哪个`Activity`“附加”到或“分离”到 this `Application`。

**但是，此技术仅从 API 级别 14 开始可用。**

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2012-07-10T10:50:37.340

**更新 3**：为此添加了一个官方 api，请改用[ActivityLifecycleCallbacks](https://developer.android.com/reference/android/app/Application.ActivityLifecycleCallbacks.html)。

* * *

## 回答 #4

> 赞同：53
> 
> 时间：2015-02-10T03:06:23.130

**@lockwobr**感谢您的更新

> 这在 api 版本 16 中 100% 都不起作用，如果您阅读 github 上的代码，Kitkat 中的“currentActivityThread”函数发生了变化，所以我想说的是 19 版本，很难将 api 版本与 github 中的版本相匹配.

访问电流`Activity`非常方便。`getActivity`让一个静态方法返回当前 Activity 而没有不必要的问题不是很好吗？

`Activity`课堂非常有用。它允许访问应用程序的 UI 线程、视图、资源等等。许多方法都需要一个`Context`，但是如何获取指针呢？这里有一些方法：

*   使用覆盖的生命周期方法跟踪应用程序的状态。您必须将当前活动存储在一个静态变量中，并且您需要访问所有活动的代码。
*   使用 Instrumentation 跟踪应用程序的状态。在清单中声明 Instrumentation，实现它并使用它的方法来跟踪 Activity 的变化。将活动指针传递给活动中使用的方法和类。使用代码注入库之一注入指针。**所有这些方法都相当不方便**；**幸运的是，有一种更简单的方法可以获取当前的 Activity。**
*   似乎系统需要访问所有活动而没有上述问题。因此，很可能有一种方法可以仅使用静态调用来获取活动。我花了很多时间在 grepcode.com 上挖掘 Android 资源，并找到了我想要的东西。有一个类叫`ActivityThread`. 这个类可以访问所有的活动，而且更好的是，它有一个静态方法来获取当前的`ActivityThread`. 只有一个小问题——活动列表具有包访问权限。

使用反射很容易解决：

```
public static Activity getActivity() {
    Class activityThreadClass = Class.forName("android.app.ActivityThread");
    Object activityThread = activityThreadClass.getMethod("currentActivityThread").invoke(null);
    Field activitiesField = activityThreadClass.getDeclaredField("mActivities");
    activitiesField.setAccessible(true);

    Map<Object, Object> activities = (Map<Object, Object>) activitiesField.get(activityThread);
    if (activities == null)
        return null;

    for (Object activityRecord : activities.values()) {
        Class activityRecordClass = activityRecord.getClass();
        Field pausedField = activityRecordClass.getDeclaredField("paused");
        pausedField.setAccessible(true);
        if (!pausedField.getBoolean(activityRecord)) {
            Field activityField = activityRecordClass.getDeclaredField("activity");
            activityField.setAccessible(true);
            Activity activity = (Activity) activityField.get(activityRecord);
            return activity;
        }
    }

    return null;
} 
```

这种方法可以在应用程序的任何地方使用，它比所有提到的方法都方便得多。此外，它似乎并不像看起来那么不安全。它不会引入任何新的潜在泄漏或空指针。

上面的代码片段缺少异常处理，并且天真地假设第一个运行的 Activity 就是我们正在寻找的那个。您可能想要添加一些额外的检查。

[博客文章](https://androidreclib.wordpress.com/2014/11/22/getting-the-current-activity/)

* * *

## 回答 #5

> 赞同：41
> 
> 时间：2012-09-08T05:02:30.400

知道**ActivityManager**管理**Activity**，所以我们可以从**ActivityManager**获取信息。我们通过以下方式获取当前前台运行的Activity

```
ActivityManager am = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
ComponentName cn = am.getRunningTasks(1).get(0).topActivity; 
```

更新 2018/10/03
[getRunningTasks](https://developer.android.com/reference/android/app/ActivityManager#getRunningTasks(int)) () 已弃用。请参阅下面的解决方案。

此方法在 API 级别 21 中已弃用。从 Build.VERSION_CODES.LOLLIPOP 开始，此方法不再可用于第三方应用程序：引入以文档为中心的最新消息意味着它可以将人员信息泄露给调用者。为了向后兼容，它仍然会返回其数据的一小部分：至少是调用者自己的任务，可能还有其他一些已知不敏感的任务，例如 home。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2018-12-21T17:50:01.567

**我在 Kotlin 中做了以下事情**

1.  创建应用程序类
2.  编辑应用程序类如下

    ```
    class FTApplication: MultiDexApplication() {
    override fun attachBaseContext(base: Context?) {
        super.attachBaseContext(base)
        MultiDex.install(this)
    }

    init {
        instance = this
    }

    val mFTActivityLifecycleCallbacks = FTActivityLifecycleCallbacks()

    override fun onCreate() {
        super.onCreate()

        registerActivityLifecycleCallbacks(mFTActivityLifecycleCallbacks)
    }

    companion object {
        private var instance: FTApplication? = null

        fun currentActivity(): Activity? {

            return instance!!.mFTActivityLifecycleCallbacks.currentActivity
        }
    }

     } 
    ```

3.  创建 ActivityLifecycleCallbacks 类

    ```
    class FTActivityLifecycleCallbacks: Application.ActivityLifecycleCallbacks {

    var currentActivity: Activity? = null

    override fun onActivityPaused(activity: Activity?) {
        currentActivity = activity
    }

    override fun onActivityResumed(activity: Activity?) {
        currentActivity = activity
    }

    override fun onActivityStarted(activity: Activity?) {
        currentActivity = activity
    }

    override fun onActivityDestroyed(activity: Activity?) {
    }

    override fun onActivitySaveInstanceState(activity: Activity?, outState: Bundle?) {
    }

    override fun onActivityStopped(activity: Activity?) {
    }

    override fun onActivityCreated(activity: Activity?, savedInstanceState: Bundle?) {
        currentActivity = activity
    }

    } 
    ```

4.  您现在可以通过调用以下命令在任何类中使用它：`FTApplication.currentActivity()`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-12-07T22:04:25.397

getCurrentActivity() 也在 ReactContextBaseJavaModule 中。
（由于最初提出这个问题，许多 Android 应用程序也有 ReactNative 组件 - 混合应用程序。）

ReactNative 中的 ReactContext 类具有维护在 getCurrentActivity() 中返回的 mCurrentActivity 的一整套逻辑。

注意：我希望 getCurrentActivity() 在 Android Application 类中实现。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-04-30T15:46:15.247

为了向后兼容：

```
ComponentName cn;
ActivityManager am = (ActivityManager) getApplicationContext().getSystemService(Context.ACTIVITY_SERVICE);
if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.M) {
    cn = am.getAppTasks().get(0).getTaskInfo().topActivity;
} else {
    //noinspection deprecation
    cn = am.getRunningTasks(1).get(0).topActivity;
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2016-07-29T04:52:59.213

我找不到我们的团队会满意的解决方案，所以我们推出了自己的解决方案。我们`ActivityLifecycleCallbacks`用来跟踪当前活动，然后通过服务公开它。更多细节在这里：[https ://stackoverflow.com/a/38650587/10793](https://stackoverflow.com/a/38650587/10793)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-02-12T16:38:16.180

我个人按照“卓仁诚”所说的做了，但我用一个“列表”来对我所有的活动进行“Backstack”。

> 如果您想检查当前活动是哪个，您只需要获取列表中的最后一个活动类。

创建一个扩展“应用程序”的应用程序并执行以下操作：

```
public class MyApplication extends Application implements Application.ActivityLifecycleCallbacks,
EndSyncReceiver.IEndSyncCallback {

private List<Class> mActivitiesBackStack;
private EndSyncReceiver mReceiver;
    private Merlin mMerlin;
    private boolean isMerlinBound;
    private boolean isReceiverRegistered;

@Override
    public void onCreate() {
        super.onCreate();
        [....]
RealmHelper.initInstance();
        initMyMerlin();
        bindMerlin();
        initEndSyncReceiver();
        mActivitiesBackStack = new ArrayList<>();
    }

/* START Override ActivityLifecycleCallbacks Methods */
    @Override
    public void onActivityCreated(Activity activity, Bundle bundle) {
        mActivitiesBackStack.add(activity.getClass());
    }

    @Override
    public void onActivityStarted(Activity activity) {
        if(!isMerlinBound){
            bindMerlin();
        }
        if(!isReceiverRegistered){
            registerEndSyncReceiver();
        }
    }

    @Override
    public void onActivityResumed(Activity activity) {

    }

    @Override
    public void onActivityPaused(Activity activity) {

    }

    @Override
    public void onActivityStopped(Activity activity) {
        if(!AppUtils.isAppOnForeground(this)){
            if(isMerlinBound) {
                unbindMerlin();
            }
            if(isReceiverRegistered){
                unregisterReceiver(mReceiver);
            }
            if(RealmHelper.getInstance() != null){
                RealmHelper.getInstance().close();
                RealmHelper.getInstance().logRealmInstanceCount("AppInBackground");
                RealmHelper.setMyInstance(null);
            }
        }
    }

    @Override
    public void onActivitySaveInstanceState(Activity activity, Bundle bundle) {

    }

    @Override
    public void onActivityDestroyed(Activity activity) {
        if(mActivitiesBackStack.contains(activity.getClass())){
            mActivitiesBackStack.remove(activity.getClass());
        }
    }
    /* END Override ActivityLifecycleCallbacks Methods */

/* START Override IEndSyncCallback Methods */
    @Override
    public void onEndSync(Intent intent) {
        Constants.SyncType syncType = null;
        if(intent.hasExtra(Constants.INTENT_DATA_SYNC_TYPE)){
            syncType = (Constants.SyncType) intent.getSerializableExtra(Constants.INTENT_DATA_SYNC_TYPE);
        }
        if(syncType != null){
            checkSyncType(syncType);
        }
    }
    /* END IEndSyncCallback Methods */

private void checkSyncType(Constants.SyncType){
    [...]
    if( mActivitiesBackStack.contains(ActivityClass.class) ){
         doOperation()     }
}

} 
```

就我而言，我使用“Application.ActivityLifecycleCallbacks”来：

*   绑定/取消绑定 Merlin 实例（用于在应用丢失或连接时获取事件，例如当您关闭移动数据或打开它时）。在禁用“OnConnectivityChanged”意图操作后它很有用。有关 MERLIN 的更多信息，请参阅：[MERLIN INFO LINK](https://github.com/novoda/merlin)

*   关闭应用程序时关闭我的最后一个 Realm 实例；我将在 BaseActivity 中对其进行初始化，该 BaseActivity 是从所有其他活动扩展而来的，并且具有私有 RealmHelper 实例。有关 REALM 的更多信息，请参阅：[REALM INFO LINK](https://realm.io/blog/realm-for-android/) 例如，我的“RealmHelper”类中有一个静态“RealmHelper”实例，该实例在我的应用程序“onCreate”中实例化。我有一个同步服务，我在其中创建了新的“RealmHelper”，因为 Realm 是“线程链接的”，并且 Realm 实例不能在不同的线程中工作。因此，为了遵循领域文档“您需要关闭所有打开的领域实例以避免系统资源泄漏”，为了完成这件事，我使用了“Application.ActivityLifecycleCallbacks”，如您所见。

*   最后我有一个接收器，当我完成同步我的应用程序时会触发它，然后当同步结束时，它将调用“IEndSyncCallback”“onEndSync”方法，在该方法中我查看我的 ActivityBackStack 列表中是否有特定的 Activity 类，因为我需要如果同步更新了视图上的数据，我可能需要在应用同步后执行其他操作。

就是这样，希望这会有所帮助。再见 ：）

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-03-26T06:49:18.897

您可以使用此类[进行](https://github.com/tamimattafi/tools/blob/master/ActivityLifeCycleHandler.kt)灵活的生命周期处理

**用法：**

```
 //Initialization
    val lifeCycleHandler = ActivityLifeCycleHandler<Activity>()

    //Detect only a specific type of activities
    val lifeCycleHandler = ActivityLifeCycleHandler<MainActivity>()

    //Get current activity
    val instance = lifeCycleHandler.currentReference

    //Get current activity state
    val state = lifeCycleHandler.currentState

    //Use listeners
    lifeCycleHandler.addStateChangeListener { newState ->
        //TODO: handle new state
    }

    lifeCycleHandler.addSpecificStateChangeListener(ActivityLifeCycleHandler.ActivityState.STARTED) {
        //TODO: handle new state
    }

    //Removable listeners
    val listener = { newState: Int ->

    }

    lifeCycleHandler.addStateChangeListener(listener)
    lifeCycleHandler.removeStateChageListener(listener)

    //Start listening
    App.app.registerActivityLifecycleCallbacks(lifeCycleHandler)

    //Stop listening
    lifeCycleHandler.releaseListeners()
    App.app.unregisterActivityLifecycleCallbacks(lifeCycleHandler) 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-10-31T09:24:02.690

*[waqas716](https://stackoverflow.com/users/870218/waqas716)*的回答很好。我为需要更少代码和维护的特定案例创建了一种解决方法。

通过让静态方法从我怀疑处于前台的活动中获取视图，我找到了一个特定的解决方法。您可以遍历所有活动并检查您是否愿意或从*马丁的*答案中获取活动名称

```
ActivityManager am = (ActivityManager)context.getSystemService(Context.ACTIVITY_SERVICE);
ComponentName cn = am.getRunningTasks(1).get(0).topActivity; 
```

然后我检查视图是否不为空并通过 getContext() 获取上下文。

```
View v = SuspectedActivity.get_view();

if(v != null)
{
    // an example for using this context for something not 
    // permissible in global application context. 
    v.getContext().startActivity(new Intent("rubberduck.com.activities.SomeOtherActivity"));
} 
```

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2015-04-28T23:41:06.450

我不喜欢任何其他答案。ActivityManager 并不意味着用于获取当前活动。超级分类和依赖于 onDestroy 也是脆弱的，不是最好的设计。

老实说，到目前为止我想出的最好的方法就是在我的应用程序中维护一个枚举，它在创建活动时设置。

另一个建议可能是尽可能避免使用多项活动。这可以通过使用片段或在我的偏好自定义视图中完成。

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2016-06-10T17:09:25.283

一个相当简单的解决方案是创建一个单例管理器类，您可以在其中存储对一个或多个活动的引用，或者您希望在整个应用程序中访问的任何其他内容。

调用`UberManager.getInstance().setMainActivity( activity );`主活动的 onCreate。

在您的应用程序中的任何位置调用`UberManager.getInstance().getMainActivity();`以检索它。（我正在使用它来使用非 UI 线程中的 Toast。）

确保`UberManager.getInstance().cleanup();`在您的应用程序被销毁时添加调用。

```
import android.app.Activity;

public class UberManager
{
    private static UberManager instance = new UberManager();

    private Activity mainActivity = null;

    private UberManager()
    {

    }

    public static UberManager getInstance()
    {
        return instance;
    }

    public void setMainActivity( Activity mainActivity )
    {
        this.mainActivity = mainActivity;
    }

    public Activity getMainActivity()
    {
        return mainActivity;
    }

    public void cleanup()
    {
        mainActivity = null;
    }
} 
```

* * *

## 回答 #15

> 赞同：-7
> 
> 时间：2016-05-03T10:40:51.540

我迟到了 3 年，但无论如何我都会回答，以防有人像我一样发现这个问题。

我通过简单地使用这个解决了这个问题：

```
 if (getIntent().toString().contains("MainActivity")) {
        // Do stuff if the current activity is MainActivity
    } 
```

请注意，“getIntent().toString()”包括一堆其他文本，例如您的包名称和您的活动的任何意图过滤器。从技术上讲，我们正在检查当前的意图，而不是活动，但结果是相同的。只需使用例如 Log.d("test", getIntent().toString()); 如果您想查看所有文本。这个解决方案有点老套，但它在你的代码中更干净，功能也是一样的。

# android - 表格布局中的行之间的分隔

> ID：11411421
> 
> 赞同：20
> 
> 时间：2012-07-10T10:31:19.340
> 
> 标签：android, tablelayout

我正在显示一个表格布局，因为我想要表格中的行之间的分隔线。也可以在表格布局中按列分隔。请帮助我。

以下是我的 xml 表格布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:paddingBottom="6dip"
    android:paddingTop="4dip">

    <TableLayout
        android:id="@+id/tablelayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="2dip">

        <TableRow>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Income"></TextView>

            <TextView
                android:layout_width="150px"
                android:layout_height="wrap_content"
                android:layout_marginLeft="150dp"
                android:text="Expense"></TextView>
        </TableRow>

        <TableRow android:layout_marginTop="30px">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Household:"></TextView>

            <TextView
                android:id="@+id/text50"
                android:layout_width="150px"
                android:layout_height="wrap_content"
                android:text="Household:"></TextView>
        </TableRow>

        <TableRow android:layout_marginTop="40px">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="2"
                android:text="Travel:"></TextView>

            <TextView
                android:id="@+id/text51"
                android:layout_width="150px"
                android:layout_height="wrap_content"
                android:layout_marginLeft="-250dp"
                android:text="Travel"></TextView>
        </TableRow>

        <TableRow android:layout_marginTop="40px">

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_span="2"
                android:text="Education:"></TextView>

            <TextView
                android:id="@+id/text52"
                android:layout_width="150px"
                android:layout_height="wrap_content"
                android:layout_marginLeft="-250dp"
                android:text="Education"></TextView>
        </TableRow>

    </TableLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-10T11:04:47.607

检查这个。它会起作用的。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/white"
    android:orientation="vertical"
    android:paddingBottom="6dip"
    android:paddingTop="4dip" >

    <TableLayout
        android:id="@+id/tablelayout"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingRight="2dip" >

        <TableRow>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Income" >
            </TextView>

            <TextView
                android:layout_width="150px"
                android:layout_height="wrap_content"
                android:layout_marginLeft="150dp"
                android:text="Expense" >
            </TextView>
        </TableRow>

        <TableRow
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <View
                android:id="@+id/line1"
                android:layout_width="match_parent"
                android:layout_height="1dip"
                android:layout_weight="1"
                android:background="#FF909090"
                android:padding="2dip" />
        </TableRow>

        <TableRow android:layout_marginTop="30px" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Household:" >
            </TextView>

            <TextView
                android:id="@+id/text50"
                android:layout_width="150px"
                android:layout_height="wrap_content"
                android:text="Household:" >
            </TextView>
        </TableRow>
       </TableLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-06-21T01:43:45.527

如果您只想在行之间添加分隔符，那么[TableRow 划分](https://stackoverflow.com/questions/10542852/tablerow-division)有一个很好的解决方案。

```
<TableLayout    
     android:divider="?android:attr/dividerHorizontal"
     android:showDividers="middle"
    ... 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-05-04T09:20:57.410

`TableLayout`扩展，`LinearLayout`以便您可以在 xml 中添加分隔符。我认为这会在那时起作用：

```
 <TableLayout
        android:id="@+id/basket_summary_table"
        android:showDividers="middle"
        android:divider="@drawable/divider_list"
        android:padding="@dimen/element_large_spacing"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="0">
    </TableLayout> 
```

我的分隔线如下所示：

**分隔器列表.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<shape android:shape="rectangle" xmlns:android="http://schemas.android.com/apk/res/android">
    <size android:height="1dp" />
    <solid android:color="@color/list_divider" />
</shape> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-10T10:36:19.843

```
View v = new View(this);
v.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, 1));
v.setBackgroundColor(Color.rgb(51, 51, 51));
tr.addView(mTvDate);
tr.addView(mTvResult);

tl.addView(tr); 
tl.addView(v); 
```

[从这里。](https://stackoverflow.com/questions/5092116/how-can-i-add-separating-lines-between-my-tablerows-that-are-created-programmati)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T10:40:26.290

我认为您必须使用行的背景`TableLayout`和边缘...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T10:48:50.843

我对您的代码进行了一些更改，并认为这会对您有所帮助...

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="vertical">    
<TableLayout 
   android:id="@+id/tablelayout"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:paddingRight="2dip">

    <TableRow  >
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Income">
     </TextView>            
        <TextView             
            android:layout_width="150px" android:layout_height="wrap_content" android:text="Expense" android:layout_marginLeft="150dp">
     </TextView>   
    </TableRow>
<View   android:id="@+id/firstDivider"
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:background="#FFFFFF" />

    <TableRow  android:layout_marginTop="30px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Household:" >
     </TextView>            
        <TextView             
            android:id="@+id/text50" android:layout_width="150px" android:layout_height="wrap_content" android:text="Household:">
     </TextView>   
    </TableRow>
<View   android:id="@+id/firstDivider"
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:background="#FFFFFF" />

 <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Travel:" android:layout_span="2">
     </TextView>     
      <TextView
           android:id="@+id/text51"
           android:layout_width="150px" android:layout_height="wrap_content" android:text="Travel" android:layout_marginLeft="-250dp">
     </TextView>  

 </TableRow>

 <View   android:id="@+id/firstDivider"
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:background="#FFFFFF" />

     <TableRow  android:layout_marginTop="40px">
 <TextView android:layout_width="wrap_content" android:layout_height="wrap_content" android:text="Education:" android:layout_span="2">
     </TextView>     
      <TextView
           android:id="@+id/text52"
           android:layout_width="150px" android:layout_height="wrap_content" android:text="Education" android:layout_marginLeft="-250dp">
     </TextView> 

 </TableRow>

<View   android:id="@+id/firstDivider"
        android:layout_height="2dp"
        android:layout_width="fill_parent"
        android:background="#FFFFFF" />

</TableLayout>
</LinearLayout> 
```

谢谢....

# codeigniter - 在控制器和视图之间创建和发送参数

> ID：11411423
> 
> 赞同：-1
> 
> 时间：2012-07-10T10:31:30.503
> 
> 标签：codeigniter, php

我是 CodeIgniter 的初学者。我试图理解 MVC 模式，当我继续使用 CodeIgniter 时，它变得有点棘手。这就是我的控制器的样子，即 hello.php ：

```
<?php
    class hello extends CI_Controller
    {
        var $name;
        var $color; 
        function hello()
        {
            parent::Controller();
            $this->name  ='Leroy';
            $this->color ='red';
        }

        function show()
        {   
            $data['name'] =$this->name;
            $data['color']=$this->color;    
            $this->load->view('show_message',$data);
        }
    }
?> 
```

视图即show_message.php

```
<p align="center">Hello <font color="<?=$color?>"><?=$name?></font>..!!!!.</p> 
```

当我运行这个脚本时，它给出了这个错误

```
Fatal error: Call to undefined method CI_Controller::Controller() in C:\xampp\htdocs\CodeIgniter\application\controllers\hello.php on line 8 
```

PS 我使用的是 CodeIgniter 2.0 版，所以我将类名更改为 CI_Controller

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:32:57.723

```
 function hello()
        {
            parent::__construct();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:36:30.053

```
function hello()
    {
        parent::Controller();
        $this->name  ='Leroy';
        $this->color ='red';
    } 
```

用这个替换你的构造函数代码

```
 function __construct()
    {
        parent::__construct();
        $this->name  ='Leroy';
        $this->color ='red';
    } 
```

# python - 快速知道文件是否在 Linux 上打开的方法？

> ID：11411428
> 
> 赞同：2
> 
> 时间：2012-07-10T10:31:54.107
> 
> 标签：python, linux

有没有一种快速的方法（即最小化回答时间）来确定文件是否在 Linux 上打开？

假设我有一个进程在目录中写入大量文件，另一个进程在完成写入后读取这些文件，**后**一个进程能否知道前一个进程是否仍在写入文件？

如果可能的话，基于 Python 的解决方案将是理想的。

**注意：**我知道我可以使用基于 FIFO / 队列的解决方案，但我正在寻找其他东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-10T10:35:53.947

你当然可以使用 Linux 的 INOTIFY 功能，但避免这种情况更安全：让写入过程创建读取过程肯定会忽略的文件（比如 data.tmp）。当作者完成时，它应该为读者重命名文件（比如.dat）。重命名操作保证不会有误会。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T10:36:21.457

如果您知道写入过程的 PID，则在 Linux 中您可以简单地查询 /proc/{PID}/fd/ 并查看在那里找到的链接之一是否指向您的文件之一。

你要做的是，扫描目录，归档 fd 5（比如说）指向 /var/data/whatever/file1.log 的事实。然后将指向的文件存储到一个数组中。

此时，如果文件名在数组中，则该进程正在使用它。

所以：

```
import os
# Here I use PID = 31824
path="/proc/%d/fd" % 31824
openfiles   = [ os.readlink("%s/%s" % (path, fname)) for fname in os.listdir(path) ]

if whatever in openfiles:
    # whatever is used by pid 31824. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T10:38:39.973

`lsof | grep filename`立刻浮现在脑海。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-10T10:36:35.163

我会使用 psutil ( [https://github.com/giampaolo/psutil](https://github.com/giampaolo/psutil) )，它还具有跨平台的优势并提供许多其他有用的系统功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-10T10:36:40.443

如果您可以更改“第一个”流程逻辑，那么简单的解决方案是将数据写入临时文件并在写入所有数据后重命名该文件。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-10T10:41:11.860

您有多种选择：

*   [Inotify](http://en.wikipedia.org/wiki/Inotify)是一项允许您监视文件操作的功能
*   写入过程在完成写入后重命名文件
*   程序[fuser](http://en.wikipedia.org/wiki/Fuser_%28Unix%29)将让您查询文件是否正在使用
*   知道 writer 的 PID 可以让您查询`/proc/PID/fd`打开的文件描述符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-10T10:45:25.927

如果您知道（或可以找到）编写进程的进程 ID，则可以使用 psutil 库。`sudo pip install psutil`去图书馆。文档在这里： http: [//pythonhosted.org/psutil/](http://pythonhosted.org/psutil/)

```
>>> import psutil
>>> import os
>>> p = psutil.Process(os.getpid())
>>> p.open_files()
[]
>>> f = open('foo.txt', 'w')
>>> p.open_files()
[openfile(path='/Users/mariaz/Downloads/foo.txt', fd=3)] 
```

如果您无权访问编写过程，则需要以 root 身份运行 lsof 并自己解析输出。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-10T10:50:32.873

这是使用 inotify 的解决方案。在写入操作后，您将收到关于目录中每个文件被关闭的通知。

```
import os
import pyinotify

def Monitor(path):
    class PClose(pyinotify.ProcessEvent):
        def process_IN_CLOSE(self, event):
            f = event.name and os.path.join(event.path, event.name) or event.path
            print 'close event: ' + f

    wm = pyinotify.WatchManager()
    notifier = pyinotify.Notifier(wm, PClose())
    wm.add_watch(path, pyinotify.IN_CLOSE_WRITE)

    try:
        while 1:
            notifier.process_events()
            if notifier.check_events():
                notifier.read_events()
    except KeyboardInterrupt:
        notifier.stop()
        return

if __name__ == '__main__':
    path = "."
    Monitor(path) 
```

但是，由于您是控制编写文件的进程的人，因此我会投票支持涉及进程之间某种通信的不同解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-10T10:36:01.687

可以查看文件的修改时间，看看是否有一段时间没有被修改。由于文件可以在更新模式下打开并随时修改，因此您不能 100% 确定它永远不会被修改。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-07-10T10:40:23.820

您可以将**lsof**与**子进程一起使用**

```
(output,error) = subprocess.Popen("lsof #absolute_file_path").communicate() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-10T11:00:44.457

您可以使用 fcntl 模块，afaik，它具有与 C 函数相同的 fcntl 函数，所以类似的东西`fcntl(fd, F_GETFL)`可能有用，但我不确定。您可以通过以写入模式打开目标文件来检查目标文件是否被阻止写入？

# .net - 使用 teamcity 在多台服务器上自动部署哪个更好的章鱼或 msdeploy

> ID：11411436
> 
> 赞同：12
> 
> 时间：2012-07-10T10:32:13.183
> 
> 标签：.net, msbuild, teamcity, msdeploy, octopus-deploy

我已经调查过了。希望您对哪一个更适合在多台服务器上进行自动化 Web 部署提出建议。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-24T07:24:20.810

我认为您绝对应该尝试一下 TeamCity 和 Octopus。我们使用 TeamCity 创建 Octopus (NuGet) 包，并使用 Octo 工具在每次成功构建后自动触发部署到测试环境。之后，我们使用 Octopus 门户将部署推广到其他环境。

我们使用以下 Octo 命令行从 TeamCity 触发部署：

`Octo.exe create-release --apiKey=YourOctopusAPIKey --server=http://YourOctopusServer:9015/api --project=YourOctopusProjectName --deployto=YourOctopusEnvironment`

Octo 创建-发布步骤需要位于单独的 TeamCity 项目中，否则 NuGet 将不会使用生成的包进行更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T11:39:36.310

MSDeploy 可用于部署从 Web 应用程序到数据库的所有内容，Web Farm Framework 可用于从主服务器同步到辅助服务器（如果您愿意，也可以使用不同的设置参数手动执行此操作）。

您所描述的是“部署管道”。我不确定您如何将其集成到 Team City 中，但基本前提是：

1.  构建应用程序，测试并打包它（声明需要设置的任何参数）。将包（以及未来步骤所需的任何文件）推送到工件存储库（可能是 Team City，如果它支持的话）
2.  （自动触发）从工件存储库中获取包并通过调用将其部署到dev`msdeploy -verb:sync -source:package.zip -dest:auto,computerName=http://server:8172/msdeploy.axd -setParamFile:dev.xml`
3.  （手动触发）部署包到stage
4.  （手动触发）部署包上线

MSDeploy 支持数量惊人的功能，包括在 Windows 凭据管理器中存储凭据以及对部署的几乎所有方面进行参数化。我强烈建议您检查一下。（它也是免费的，除了 Windows Server 许可证）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T06:53:09.567

这取决于。（让我印象深刻的是这个问题还没有被标记）。但无论如何，可能值得问自己这些：

1.  您是否正在开发一个需要 QA 签署和推广的网站，或者是否有自动测试套件来验证每个构建？
2.  您是否正在部署到多个环境（QA、UAT、演示、生产）并希望看到哪个版本在哪里的漂亮仪表板？
3.  您是否要求某些用户具有推送生产的权限？
4.  您是否需要部署其他类型的组件（Windows 服务、数据库等）
5.  在开始部署之前，您是否需要在每台服务器上进行一些额外的设置（例如，调用 Chocolatey 来安装和设置 Mongo）。又名有限的服务器配置。
6.  是否需要对促销生命周期进行控制（例如，只有通过 QA 才能投入生产）。

如果您对以上大部分内容都说“是”，我会说 Octopus Deploy 赢得了部署。猜猜看，它最多可免费用于 5 个项目，并且可以轻松启动和运行。

对于需要最终用户进行简单 CMS 管理的简单网站或不需要开发人员维护的网站，我想说所有 Azure 的东西和 MSDeploy 都是完成这项工作的好工具。正如 Richard Szalay 所提到的，如今它有很棒的命令行工具可以定期发布。

就构建服务器而言，这并不重要，因为它应该用于为您创建人工制品。不过，Team City 对我来说是赢家，因为它与 Octopus 有很好的集成。IMO，这是一个单独的讨论。

# jsf - JSF h:outputText 中的输出花括号

> ID：11411438
> 
> 赞同：0
> 
> 时间：2012-07-10T10:32:19.667
> 
> 标签：jsf, el

我想在自定义组件中使用以下 EL：

```
<ui:param name="valueAfter"
    value="#{not empty valueAfter ? valueAfter : false}" />
<h:outputText
    value="#{x.label}#{valueAfter == true ? {x.value} : ''}" /> 
```

这不起作用，因为我无法输出花括号，`x.value`但现在我正在寻找一种实际输出它们的好方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:16:30.173

尝试这个：

```
<h:outputText value="#{x.label"}/>
<h:outputText value="{#{x.value}}" rendered="#{valueAfter}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:40:49.487

给你 - 如果你使用的是*EL 2*（我认为），`h:outputText`由于`.concat()`

```
<h:outputText value="#{x.label}#{valueAfter == true?'{'.concat(x.value).concat('}'):''}" /> 
```

# bash - 使用包含空格的变量作为单个参数

> ID：11411440
> 
> 赞同：1
> 
> 时间：2012-07-10T10:32:38.247
> 
> 标签：bash

假设您有一个变量，其中包含一串文本，中间有空格，并且您想将其用作另一个脚本的输入参数。您将如何在不担心空格字符的情况下传递变量内容？

以下不起作用：

```
VAR1=hello\ world
#... do something else
./a_script.sh $VAR1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:34:36.857

使用双引号：

```
VAR1=hello\ world
#... do something else
./a_script.sh "$VAR1" 
```

# web-services - Delphi webservice调用不是并行的

> ID：11411441
> 
> 赞同：1
> 
> 时间：2012-07-10T10:32:42.437
> 
> 标签：web-services, delphi, parallel-processing

我开发了一个应用程序，它通过 TCP 服务器并行获取消息并从另一个 Web 服务器应用程序调用 Web 服务。

我注意到 webservice 服务器串行处理的并行请求。

我强迫网络服务器延迟响应以增强情况。

我跟踪并发现webservice调用是由低级Delphi webserivce调用序列化调用并行的。

我嗅了嗅，发现只打开了一个连接，HTTP请求在得到响应后一一发送。

我的基本网络服务调用如下

```
var  
  HTTPRIO: THTTPRIO;  
  WS: TelephoneDispachServerSoap;  
begin  
  try  
    HTTPRIO := THTTPRIO.Create(nil);  
    WS := GetTelephoneDispachServerSoap(false, '',HTTPRIO);  
    CoInitialize(nil);  
    r := WS.MaxMethod(10,20);  
  finally  
    CoUninitialize;  
  end;  
end; 
```

我应该怎么做才能并行发送 Web 服务调用？
谢谢

# ruby-on-rails - 带有多行文本的 Rails button_to

> ID：11411445
> 
> 赞同：0
> 
> 时间：2012-07-10T10:32:48.863
> 
> 标签：ruby-on-rails, yaml, button-to

我正在编写一个 Rails 应用程序，我创建的按钮如下：

```
<%= button_to t('.upload_html'), ... %> 
```

其中 ... 代表其他选项。所以按钮应该有 .upload_html 指向的文本，它确实如此。现在我希望该文本有两行。在我的 YAML 文件中

```
upload_html: "turn off" 
```

现在我想要

```
upload_html: "turn<br>off" 
```

在按钮标签文本内有一个换行符。但这不起作用。它按字面意思显示包含 HTML 标记的字符串，而无需换行。我该怎么做才能强制换行？

谢谢！！最好的，帕特里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:36:17.473

你试过了`"turn<br>off".html_safe`吗？

# http - 在 Netty Http 中发布或获取的大请求

> ID：11411448
> 
> 赞同：1
> 
> 时间：2012-07-10T10:32:55.993
> 
> 标签：http, post, netty

我主要使用 Netty 进行套接字连接。但我也想使用 netty 来处理一些 http 连接。问题是：post方法中发送到Netty Http Server的数据太大了。所以 Netty 提出了异常：Long Frame Exception。任何人请告诉我如何配置 Netty 接受更大的 Post 参数值。非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:11:35.030

我怀疑你正在`HttpChunkAggregator`筹备中。请取下并自行处理`HttpChunk`。

# php - 在 centos 上使用 freetds 从 php 连接到 ms sql 2005

> ID：11411453
> 
> 赞同：4
> 
> 时间：2012-07-10T10:33:06.353
> 
> 标签：php, sql-server, centos, freetds

我在从 PHP 连接到 MS SQL 2005 时遇到问题。

我可以从外壳连接，使用...

```
tsql -S 10.0.0.134 -p 1433  -U gareth 
```

输入一个简单的查询按预期工作......

```
1> SELECT @@VERSION AS MSSQL_VERSION
2> go
MSSQL_VERSION   
Microsoft SQL Server 2005 - 9.00.4035.00 (Intel X86) 
Nov 24 2008 13:01:59 
Copyright (c) 1988-2005 Microsoft Corporation
Express Edition on Windows NT 6.1 (Build 7601: Service Pack 1) 
```

但是，从 PHP 脚本尝试此操作不起作用...

```
$test = mssql_connect('10.0.0.134:1433', 'gareth', 'mypass'); 
```

...并产生一个 mssql_connect() [function.mssql-connect]: Unable to connect to server 错误。

我可以在 /usr/lib/php/modules 中看到 mssql.so 模块，并且 phpinfo() 显示模块已加载。

如果有人可以向我展示 freetds.conf 和 odbc.conf 的示例配置，我会很乐意使用 odbc_connect

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T10:56:58.000

这是我在[PHP.net](http://www.php.net/manual/en/function.mssql-connect.php#85676)上可以找到的关于您的问题的内容。也许它会帮助你解决它。

```
This might be obvious to some, but here is a quick tidbit that might save you some time if you are using FreeTDS in Linux:
Be sure that you have these two lines in freetds.conf:
dump file = /tmp/freetds.log
dump file append = yes

so you can tail -f it in the background of debugging the problem.  This helped me find my issue on on CentOS Linux: 

1) tsql test works

2) php-mssql connection in php also works WHEN RUN FROM THE SHELL

3) running PHP through apache does NOT work.

my /tmp/freetds.log file told me: 
net.c:168:Connecting to MYDBSERVER port MYDBPORT
net.c:237:tds_open_socket: MYDBSERVER:MYDBPORT: Permission denied

and the answer was my firewall/SELinux was denying the Apache processes access to connect to the remote MSSQL DB port, but my shell accounts were fine. 
```

# php - php disk_total_space() 减去 disk_free_space() 不等于占用空间

> ID：11411454
> 
> 赞同：4
> 
> 时间：2012-07-10T10:33:06.833
> 
> 标签：php, filesystems, size, hp-ux

我想检查存储上的可用空间，我正在存储用户的附件。我和[`disk_free_space()`](http://php.net/disk_free_space/)和一起去了[`disk_total_space()`](http://php.net/disk_total_space/)。结果是：

> 可用空间：5.47 GB
> 总空间：5.86 GB

所以占用的空间= **0.39 GB**。

我还循环浏览了文件以使用[`filesize()`](http://php.net/filesize/). 这些文件总共占用**18.34 GB**。（最大文件大小为 4 MB，因此 PHP 手册中关于 2GB 的注释适用）

所以：

> 总空间 - 可用空间**！=**占用空间

为什么？

文件系统位于 HP-UX 上。我使用同一个帐户测量了所有的值 - 我通过使用 Internet 浏览器执行脚本从 php 脚本运行所有命令。

我还检查了 Windows 中的功能。结果没问题。

我经历了一些与功能相关的其他问题（[如何获取服务器上的磁盘空间？](https://stackoverflow.com/questions/2425841/how-to-get-the-disk-space-on-a-server)，[如何确定服务器上有多少可用空间？（php）](https://stackoverflow.com/questions/2806866/how-to-determin-how-much-space-is-freeon-your-server-php)，[如何检测是否有足够的服务器空间来上传文件?](https://stackoverflow.com/questions/7199513/how-to-detect-the-server-space-enough-for-the-uploaded-file-or-no)，[如何获取服务器上的磁盘空间？](https://stackoverflow.com/questions/2425841/how-to-get-the-disk-space-on-a-server)，[是否可以从PHP获取特殊的Local Disk信息？](https://stackoverflow.com/questions/4713893/is-it-possible-to-get-special-local-disk-information-from-php)，[php disk_total_space](https://stackoverflow.com/questions/466140/php-disk-total-space)），但没有找到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:37:00.547

根据操作系统和使用的文件系统，这在很大程度上取决于您调用函数的目录。原因是，Linux 将几个驱动器安装到一棵大树中。您不能只调用`disk_total_space('/')`，因为这只会为您提供根分区的大小。试试`disk_total_space($attachmentFolder);`。

# validation - JSF2，RichFaces 4，rich:select，如果没有改变则返回 null

> ID：11411467
> 
> 赞同：0
> 
> 时间：2012-07-10T10:33:59.227
> 
> 标签：validation, jsf-2, combobox, richfaces

我使用 JSF2、RichFaces 4、rich:select。允许手动输入，用户可以输入与任何预定义项目标签不对应的内容。在这种情况下如何设置 value = null （如果没有选择任何项目）？

```
<rich:select id="select"  valueChangeListener="#{comboBoxBean.valueChangedGo}"
        enableManualInput="true" required="false">
    <f:selectItem itemValue="0" itemLabel="Russia" />
    <f:selectItem itemValue="1" itemLabel="Ukraine" />
    <f:selectItem itemValue="2" itemLabel="Norway" />
    <f:selectItem itemValue="3" itemLabel="Sweden" />
    <f:selectItem itemValue="4" itemLabel="Finland" />
    <f:selectItem itemValue="4" itemLabel="Belarus" />
    <f:ajax render="count2"/>

</rich:select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T15:50:04.283

像这样使用自定义[JSF 转换器](http://www.ibm.com/developerworks/java/library/j-jsf3/)：

```
package com.whatever.conveters;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;

// If you are using spring...
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

// Again, if you are using spring...
@Component("testConverter")
@Scope("request")
public class TestConverter implements Converter {

    // Resolve this collection either by injection or another method
    private Map<Country> countries;

    @Override
    public Object getAsObject(FacesContext facesContext, UIComponent uiComponent, String value) {
        // Check if the "value" is in the collection of items  
        //
        // Here I'm using a map, but you can inject a service 
        // an check if the value is contained in by one of the service methods
        if (countries.contains(value)) { 
            return value;
        } else {
            return null;
        }
    }

    @Override
    public String getAsString(FacesContext facesContext, UIComponent uiComponent, Object value) {
        // Here, just return the toString of the item
        return value.toString();
    }
} 
```

它应该有帮助

# ruby-on-rails - Rails 3.1 - 数据导入时拆分列？

> ID：11411469
> 
> 赞同：2
> 
> 时间：2012-07-10T10:34:06.490
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用以下方法成功地从 iTunes 导入销售数据：

```
FasterCSV.parse(uploaded_io, {:headers => true, :col_sep =>"\t"}).each do |row_data|

        new_record = AppleSale.new(
            'provider' =>  row_data[0],
            'provider_country' => row_data[1],
            'vendor_identifier' => row_data[2],
            'upc' => row_data[3],
            'isrc' => row_data[4],
            'artist_show' => row_data[5],
            'title' => row_data[6],
            'label_studio_network' => row_data[7],
            'product_type_identifier' => row_data[8],
            'units' => row_data[9],
            'royalty_price' => row_data[10],                    
            'download_date' => row_data[11],
            'order_id' => row_data[12],
            'postal_code' => row_data[13],
            'customer_identifier' => row_data[14],
            'report_date' => row_data[15],
            'sale_return' => row_data[16],
            'customer_currency' => row_data[17],
            'country_code' => row_data[18],
            'royalty_currency' => row_data[19],
            'preorder' => row_data[20],
            'isan' => row_data[21],
            'customer_price' => row_data[22],
            'apple_identifier' => row_data[23],
            'cma' => row_data[24],
            'asset_content_flavor' => row_data[25],
            'vendor_order_code' => row_data[26],
            'grid' => row_data[27],
            'promo_code' => row_data[28],
            'parent_identifier' => row_data[29]

        )
        new_record.save
    end 
```

但是，“vendor_order_code”包含像“0711297494143_CADE70900648”这样的值，我想在下划线上拆分并存储在两个单独的（新）列中。并非所有条目都有这样的值，有些只包含第一部分（UPC）。我意识到已经提供了 UPC 和 ISRC 列，但是这些列并没有以对我有用的方式填充，拆分 vendor_order_code 是我可以做我需要做的唯一方法。

谁能建议这样做的正确方法？我知道以下内容完全是胡说八道，但我正在考虑以下内容：

```
'vendor_order_code' => row_data[26],
'vendor_order_code_UPC' => row_data[26].split("_")...and save just the first half regardless of whether split occurred.
'vendor_order_code_ISRC' => row_data[26].split("_")..and save just the second half if it exists 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:09:36.127

不需要多个拆分和/或条件；`match`每行只有一次。

```
FasterCSV.parse(uploaded_io, {:headers => true, :col_sep =>"\t"}).each do |row_data|

    full, upc, _discard, isrc = row_data[26].match(/^([^_]+)(_(.+))?/).to_a

    new_record = AppleSale.new(
        'provider' =>  row_data[0],
        'provider_country' => row_data[1],
        'vendor_identifier' => row_data[2],
        'upc' => row_data[3],
        'isrc' => row_data[4],
        'artist_show' => row_data[5],
        'title' => row_data[6],
        'label_studio_network' => row_data[7],
        'product_type_identifier' => row_data[8],
        'units' => row_data[9],
        'royalty_price' => row_data[10],                    
        'download_date' => row_data[11],
        'order_id' => row_data[12],
        'postal_code' => row_data[13],
        'customer_identifier' => row_data[14],
        'report_date' => row_data[15],
        'sale_return' => row_data[16],
        'customer_currency' => row_data[17],
        'country_code' => row_data[18],
        'royalty_currency' => row_data[19],
        'preorder' => row_data[20],
        'isan' => row_data[21],
        'customer_price' => row_data[22],
        'apple_identifier' => row_data[23],
        'cma' => row_data[24],
        'asset_content_flavor' => row_data[25],
        'vendor_order_code' => full,
        'vendor_order_code_UPC' => upc,
        'vendor_order_code_ISRC' => isrc,
        'grid' => row_data[27],
        'promo_code' => row_data[28],
        'parent_identifier' => row_data[29]

    )
    new_record.save
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:05:49.063

你可以试试：

```
'vendor_order_code' => row_data[26],
'vendor_order_code_UPC' => row_data[26].split("_").first
'vendor_order_code_ISRC' => row_data[26].split("_").last if row_data[26].match(/_/) 
```

# c# - 更改程序集名称会破坏我的 XAML 设计器

> ID：11411471
> 
> 赞同：3
> 
> 时间：2012-07-10T10:34:10.580
> 
> 标签：c#, .net, wpf, visual-studio-2010

当我在 VS2010 项目属性中更改我的程序集名称时，我的所有视图都停止在设计器中工作，并声明找不到我的 clr 命名空间。重建解决方案并不能解决此问题，但我可以通过更改程序集名称来构建、运行和安装解决方案。他们是我必须采取的另一个步骤来解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T10:37:27.643

正如评论中所建议的

*   确保在项目属性中正确设置默认命名空间

和

*   确保所有 Xaml 文件在 clr 命名空间中都有更新的程序集名称
*   关闭visual studio，遍历整个项目结构，删除bin、obj目录、*.suo、*.user文件，
*   重新打开视觉工作室并重建

# android - 项目的android gridviews行高最大值

> ID：11411472
> 
> 赞同：4
> 
> 时间：2012-07-10T10:34:16.960
> 
> 标签：android, gridview, row

我有简单的gridview。它的元素有不同的高度。例如，在行中有一个小元素和一个更大的元素，下一行将与较小的元素对齐，并且较大元素的一部分在第二行下方。如何将gridview的每一行的高度设置为行中最大元素的高度？

我的网格视图

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
                android:id="@+id/new_small_list"
                android:layout_width="fill_parent" 
                android:layout_height="wrap_content"
                android:numColumns="2"
                android:verticalSpacing="3dp"
                android:horizontalSpacing="3dp"
                android:stretchMode="columnWidth"
                android:gravity="center"
                android:cacheColorHint="@android:color/transparent"
            /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T14:41:12.150

用于设置单元格高度，在GridViewAdapter中编写时，例如：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {

        if(convertView == null){

            LayoutInflater cellLayout = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);             
            convertView = cellLayout.inflate(R.layout.gridcell_layout, null);
        }

        TextView cell_title = (TextView) convertView.findViewById(R.id.gridview_cell_text);         
        ImageView cell_icon = (ImageView) convertView.findViewById(R.id.griview_cell_image);
        .... 
```

只需替换这一行：

```
convertView = cellLayout.inflate(R.layout.gridcell_layout, null); 
```

有了这个：

```
convertView = cellLayout.inflate(R.layout.gridcell_layout, gridView, false); 
```

通过这种方式，在“inflate”中设置父引用，单元格的宽度和高度将设置！在这里你可以找到原因：

[按钮边距的布局问题](https://stackoverflow.com/questions/5315529/layout-problem-with-button-margin)

# java - 如何使用 DES 加密 Java 中的数据并将该数据解密为 Object-c

> ID：11411475
> 
> 赞同：1
> 
> 时间：2012-07-10T10:34:31.337
> 
> 标签：java, objective-c, encryption

这是我的java代码使用des

```
public class DES {

    public static String encode(String str, String key) throws Exception {
        byte[] rawKey=Base64.decode(key);
        IvParameterSpec sr=new IvParameterSpec(rawKey);
        DESKeySpec dks=new DESKeySpec(rawKey);
        SecretKeyFactory keyFactory=SecretKeyFactory.getInstance("DES");
        SecretKey secretKey=keyFactory.generateSecret(dks);

        javax.crypto.Cipher cipher=Cipher.getInstance("DES/CBC/PKCS5Padding");
        cipher.init(Cipher.ENCRYPT_MODE, secretKey, sr);

        byte data[]=str.getBytes("UTF8");
        byte encryptedData[]=cipher.doFinal(data);
        return Base64.encode(encryptedData).trim();
    }

    public static String decode(String str, String key) throws Exception {
        byte[] rawKey=Base64.decode(key);
        IvParameterSpec sr=new IvParameterSpec(rawKey);
        DESKeySpec dks=new DESKeySpec(rawKey);
        SecretKeyFactory keyFactory=SecretKeyFactory.getInstance("DES");
        SecretKey secretKey=keyFactory.generateSecret(dks);
        Cipher cipher=Cipher.getInstance("DES/CBC/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, secretKey, sr);
        byte encryptedData[]=Base64.decode(str);
        byte decryptedData[]=cipher.doFinal(encryptedData);
        return new String(decryptedData, "UTF8").trim();
    }
} 
```

我是objective-c的新手，在Ojbective-c DES中遇到了一些麻烦，上面的代码是使用java，我想加密或解密一个字符串，最终在Object-c中得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:57:32.137

CommonCrypto 库（它是 C 语言，因此可以从 Objective-C 中使用，并且是 Mac OS X 和 iOS 的一部分）实现了 DES 算法。例如，参见这个问题：[Encryption for Objective-C](https://stackoverflow.com/questions/3234391/encryption-for-objective-c)

# jquery - 在不使用 jQuery 中的 ID 属性的情况下获取另一个 div 中的 div

> ID：11411476
> 
> 赞同：0
> 
> 时间：2012-07-10T10:34:33.637
> 
> 标签：jquery

我需要`formErrorContent`使用 id 的 div 内的类访问 div`emailMsg`而不为内部 div 放置 ID 属性。我怎样才能做到这一点？

```
<div id="emailMsg" class="formError" style="opacity: 0.80; margin-top: 0px;display:none;" onclick="this.style.display='none';">
  <div class="formErrorContent">* This field is required<br>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:35:58.143

使用[类选择器](http://api.jquery.com/class-selector/)。

```
$('#emailMsg').find('.formErrorContent'); 
```

这也可以这样写；

```
$('#emailMsg .formErrorContent'); 
```

..取决于哪个最适合您。

如果你可以保证它`.formErrorContent`永远是一个孩子，考虑使用`children()`和孩子[选择器来代替](http://api.jquery.com/child-selector)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:36:45.587

使用类选择器...

```
$("#emailMsg div.formErrorContent"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:37:31.457

```
var text = $('#emailMsg .formErrorContent').text(); 
```

# c# - 如何获取本地机器的 IPv4 和 IPv6 地址？

> ID：11411486
> 
> 赞同：4
> 
> 时间：2012-07-10T10:35:20.813
> 
> 标签：c#, .net, windows-applications

我正在开发一个 Windows 应用程序，我需要找到本地机器的 IPv4 和 IPv6 地址。操作系统可以是 XP 或 Windows 7。

我有一个获取 MAC 地址的解决方案，例如，

```
string GetMACAddress()
{
    var macAddr =
        (
            from nic in NetworkInterface.GetAllNetworkInterfaces()
            where nic.OperationalStatus == OperationalStatus.Up
            select nic.GetPhysicalAddress().ToString()
        ).FirstOrDefault();

    return macAddr.ToString();
} 
```

这适用于所有操作系统。

获取适用于 XP 和 WINDOWS 7 的 IPv4 和 IPv6 地址的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:37:37.037

```
string strHostName = System.Net.Dns.GetHostName();;
IPHostEntry ipEntry = System.Net.Dns.GetHostEntry(strHostName);
IPAddress[] addr = ipEntry.AddressList;
Console.WriteLine(addr[addr.Length-1].ToString());
if (addr[0].AddressFamily == System.Net.Sockets.AddressFamily.InterNetworkV6)
            {
                Console.WriteLine(addr[0].ToString()); //ipv6
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T07:21:57.230

要获取所有 IP4 和 IP6 地址，这是我的首选解决方案。请注意，它还会过滤环回 IP 地址，例如 127.0.0.1 或 ::1

```
public static IEnumerable<IPAddress> GetIpAddress()
        {
            var host = Dns.GetHostEntry(Dns.GetHostName());
            return (from ip in host.AddressList where !IPAddress.IsLoopback(ip) select ip).ToList();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:42:09.297

这是我仅获取所有 IPv4 地址的方法。

```
 /// <summary>
    /// Gets/Sets the IPAddress(s) of the computer which the client is running on.
    /// If this isn't set then all IPAddresses which could be enumerated will be sent as
    /// a comma separated list.  
    /// </summary>
    public string IPAddress
    {
        set
        {
            _IPAddress = value;
        }
        get
        {
            string retVal = _IPAddress;

            // If IPAddress isn't explicitly set then we enumerate all IP's on this machine.
            if (_IPAddress == null)
            {
                // TODO: Only return ipaddresses that are for Ethernet Adapters

                String strHostName = Dns.GetHostName();
                IPHostEntry ipEntry = Dns.GetHostEntry(strHostName);
                IPAddress[] addr = ipEntry.AddressList;

                List<string> validAddresses = new List<string>();

                // Loops through the addresses and creates a list of valid ones.
                for (int i = 0; i < addr.Length; i++)
                {
                    string currAddr = addr[i].ToString();
                    if( IsValidIP( currAddr ) ) {
                        validAddresses.Add( currAddr );
                    }
                }

                for(int i=0; i<validAddresses.Count; i++)
                {
                    retVal += validAddresses[i];
                    if (i < validAddresses.Count - 1)
                    {
                        retVal += ",";
                    }
                }

                if (String.IsNullOrEmpty(retVal))
                {
                    retVal = String.Empty;
                }

            }

            return retVal;
        }
    } 
```

# ruby - Ruby 正则表达式应排除“125af”子字符串

> ID：11411497
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:03.073
> 
> 标签：ruby, regex

我有以下正则表达式：

```
/^(\d{1,11})((?:(?:c?o|co?).*)?.*)$/i 
```

匹配字符串，如：

```
125******* or 125co****** or 125CO******* 
```

我想排除以下开头的子字符串：

```
125af***** or 125AF****** or 125f****** or 125AF******** 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:55:40.960

试试这个

```
^(?>\d{1,11})(?!af|a|f)((?:(?:c?o|co?).*)?.*)$ 
```

[在 regexr 上](http://regexr.com?31g6i)查看

我对您的正则表达式进行了两项更改：

1.  我通过在开头添加了第一组[原子](http://www.regular-expressions.info/atomic.html)（ ）。这是为了避免回溯到已经匹配的数字，`(?>\d{1,11})``?>`

2.  我添加了一个[负前瞻](http://www.regular-expressions.info/lookaround.html) `(?!af|a|f)`，以确保没有 af、a 或 f 跟随。为此，我需要第一组是原子的，以确保它真正照顾前面的最后一个数字。（否则它会回溯，看到前面最后一个数字，认为一切都很好，并将字符串的其余部分与最后一个匹配`.*`）

# opencv - 轮廓或凸包上的约束延迟训练opencv

> ID：11411498
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:16.420
> 
> 标签：opencv, constraints, triangulation, delaunay

我想知道在轮廓或凸包上使用 opencv C++ / C api 进行 CDT（约束延迟三角测量）的方法。

我的问题类似于

[C++-ObjC OpenCV 约束 Delaunay](https://stackoverflow.com/questions/8236201/c-objc-opencv-constrained-delaunay)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:19:58.457

不确定它是否适用于您的具体问题，但有一个类似的问题。似乎 OpenCV Delaunay 函数可用但没有记录。

[OpenCV中是否有用于Delaunay三角剖分的C++ API？](https://stackoverflow.com/questions/11170564/is-there-c-api-for-delaunay-triangulation-in-opencv)

# unit-testing - 测试 Sencha touch 2 应用程序

> ID：11411500
> 
> 赞同：3
> 
> 时间：2012-07-10T10:36:17.597
> 
> 标签：unit-testing, testing, tdd, sencha-touch-2

我正在寻找测试 Sencha Touch 2 应用程序的最佳实践。理想情况下，我想自动化测试集的执行（例如通过 CI）。

我一直在寻找像 Jasmine、JSTestdriver 这样的测试框架。关于在 ST2 中使用这些框架的反馈并不多。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T18:09:21.100

为了测试我的 Sencha Touch 应用程序，我将 Ruby 与宝石 Cucumber 和 Capybara 一起使用。

它基本上允许您单击应用程序。

这里基本上是如何设置你的环境。它说“在 Windows 上”，但它在 mac 上也能正常工作。

[http://www.richardlawrence.info/2011/08/20/getting-started-with-ruby-cucumber-and-capybara-on-windows/](http://www.richardlawrence.info/2011/08/20/getting-started-with-ruby-cucumber-and-capybara-on-windows/)

您可以在文末下载一个入门项目。

# javascript - 将 Colorbox.js Ajax 请求与 Google 地图一起使用

> ID：11411501
> 
> 赞同：1
> 
> 时间：2012-07-10T10:36:18.277
> 
> 标签：javascript, jquery, google-maps, colorbox

我希望有一个人可以帮助我。

单击链接时，我想使用[Colorbox.js](http://www.jacklmoore.com/colorbox)动态加载 Google 地图。因此，除非用户决定查看更大的地图，否则不需要预加载地图。

我的 HTML 测试如下所示

```
<!DOCTYPE html>
<html>
  <head>
    <title>Map</title>
  </head>
  <body>
    <a href="#googlemap" id="launch_map">Check out park on Google Maps</a>
    <div id="location">
      <div class="map"></div>
    </div>

  <!-- Google Maps API -->
  <script src="https://maps.googleapis.com/maps/api/js?sensor=false"
type="text/javascript"></script>

  <!-- Colorbox Ajax Request -->
  <script type="text/javascript">

    $("#launch_map").colorbox({
      inline: true,
      width:300,
      height:200,
      html:$("#location").html()
    });

    var googleMap = $("#cboxLoadedContent").find("div.map")[0];
    var latlng = new google.maps.LatLng(44.537266, 123.250760);
    var myOptions = { zoom: 8, center: latlng, mapTypeId: google.maps.MapTypeId.ROADMAP };
    var map = new google.maps.Map(googleMap, myOptions);
  </script>

  </body>
</html> 
```

我的问题是它没有在 Colorbox 中加载 Google 地图。我希望有人可以就如何解决这个问题提供一些见解。

这是我创建的 JSFilddle：http: [//jsfiddle.net/xLGyQ/1/](http://jsfiddle.net/xLGyQ/1/)

非常感谢，WD

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:30:43.337

您是否尝试过在没有彩盒的情况下让事情正常工作？无论是否使用颜色框，它似乎都不起作用：http: [//jsfiddle.net/em6Rz/](http://jsfiddle.net/em6Rz/)

# java - Java 泛型和通配符

> ID：11411503
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:20.967
> 
> 标签：java, generics, wildcard

假设我有这些课程：

```
class A<T> {
  void set(T t) {}
}

class B<T> {
  T get() { return null; }
}

class C extends A<String> { }
class D extends B<String> { }

class E extends A<Long> { }
class F extends B<Long> { } 
```

还有这些变量：

```
A<?> a1 = new C();
B<?> b1 = new D();

A<?> a2 = new E();
B<?> b2 = new F(); 
```

我可以以某种方式做到这些（用一些魔法吗？）：

```
a1.set(b1.get());
a2.set(b2.get()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:43:01.733

不，但你可以

```
A<String> a1 = new C();
B<String> b1 = new D();

A<Long> a2 = new E();
B<Long> b2 = new F();

a1.set(b1.get());
a2.set(b2.get()); 
```

`A<?>`表示*某个类的 A，但我不知道是哪一个*。所以你不能调用它的`set()`方法，因为编译器不知道参数的类型是否与 A 的实际泛型类型匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T10:41:28.973

你不能因为你有

```
A<?> a1 = new C();
B<?> b1 = new D(); 
```

是相同的

```
A<? extends Object> a1 = new C();
B<? extends Object> b1 = new D(); 
```

所以泛型类型`a`是通配符或未知数。b1.get() 是一个`Object`，a1.set() 采用 Object 的未知子类。

```
A<String> a1 = new C();
B<String> b1 = new D();
a1.set(b1.get()); // is okay as the type is `String` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:40:50.823

您想将一种对象转换为另一种对象。尝试[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)。请查看 wiki 链接以了解更多关于适配器模式的内容。

创建一个适配器类，将您的对象 B 转换为对象 A。

```
class MyAdapter
{

public static A adaptTo(B b)
{
//your code to transform B to A

}

} 
```

现在，当您想将 B 转换为 A 时，只需调用

```
A a = Adapter.adaptTo(b); 
```

# jquery - codeigniter dompdf ajax不保存pdf

> ID：11411506
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:23.183
> 
> 标签：jquery, codeigniter-2, dompdf

我遇到了一个问题，我已经成功地使用 dompdf 生成了 PDF 文件，但它没有显示到浏览器窗口中，当我尝试使用 firebug 进行调试时，它显示了以下 pdf 格式数据

```
%PDF-1.3 1 0 obj << /Type /Catalog /Outlines 2 0 R /Pages 3 0 R >> endobj 2 0 obj << /Type /Outlines /Count 0 >> endobj 3 0 obj << /Type /Pages /Kids [6 0 R ] /Count 1 /Resources << /ProcSet 4 0 R /Font << /F1 8 0 R >> /XObject << /I1 9 0 R >> >> /MediaBox [0.000 0.000 612.000 792.000] >> endobj 4 0 obj [/PDF /Text /ImageC ] endobj 5 0 obj << /Creator (DOMPDF) /CreationDate (D:20120710102754+00'00') /ModDate (D:20120710102754+00'00') >> endobj 6 0 obj << /Type /Page /Parent 3 0 R /Contents 7 0 R >> endobj 7 0 obj << /Length 400 >> stream 0.000 0.000 0.000 rg BT 34.016 719.095 Td /F1 24.0 Tf [(Darksiders II)] TJ ET BT 34.016 683.969 Td /F1 14.0 Tf [(Panda)] TJ ET BT 34.016 653.268 Td /F1 12.0 Tf [(2012-07-04)] TJ ET q 48.000 0 0 48.000 34.016 586.457 cm /I1 Do Q 0.500 0.500 0.500 rg BT 34.016 627.257 Td /F1 8.0 Tf [(Image not readable or empty)] TJ ET BT 34.016 617.257 Td /F1 8.0 Tf [(media/stats/images/a:2:{i:0;s:36:)] TJ ET endstream endobj 8 0 obj << /Type /Font /Subtype /Type1 /Name /F1 /BaseFont /Times-Bold /Encoding /WinAnsiEncoding >> endobj 9 0 obj << /Type /XObject /Subtype /Image /Width 64 /Height 64 /Filter /FlateDecode /DecodeParms << /Predictor 15 /Colors 3 /Columns 64 /BitsPerComponent 8>> /ColorSpace /DeviceRGB /BitsPerComponent 8 /Length 929>> stream h�՚�n�@���T�R�#���.�"Z!�����P���\!W[M�.����]�,��*@ș��������3�����6��n�O�M]�#����|֯/����D4�I��Ǉ�pEQ�$UUM\UU�e�l6�O~C�8��|��DD��>�cD�&gt;5��������k�~�gߴZ� ���bQŤ4QY���g����$��"*�b�X�Z�ડ,���#'I�N�O�� b����nD?Q�睑����Q���j+��z�6Xfp�����{��3w@#��k�!�&lt;�&lt;�TU�~�����r��R�y�{���`/��1˲p9��k�8��~�slp�W?��4ǽ��3VI܂�LY� �ӮY���"��|���@p�&gt;9=,k[��;�� u]ߝsl�M��%p����fE��^`\�%=��["�e^b�-�|CHcS[뺶��,���õ��O�n�K�Tv�����}a�5/��N �M��x�7 "��y\���� ���������L(Dt:��,��wQ�$��T����C��(���cs� �3����9�vƒ�R���}�6��XL�R�t:%Ib�!v�2������M�@峷���1H�V_(��C�NS�����\sV�ՀS���a����i��~i`��b�c��0D����N<w���w��r)x�������#���c>8�I��k}�Ӷ���}����Y�Ŵ�ug|_��}������>��M�L��b9/�z�k��Ͼ�ͼ�-����c��i����;B�{�#�֌�O�����`�����*�BvΑ����k}���%�9kǪ���yi>������i�N�z���������f�a�O�`�ݎg�/��� endstream endobj xref 0 10 0000000000 65535 f 0000000008 00000 n 0000000073 00000 n 0000000119 00000 n 0000000299 00000 n 0000000336 00000 n 0000000450 00000 n 0000000513 00000 n 0000000964 00000 n 0000001072 00000 n trailer << /Size 10 /Root 1 0 R /Info 5 0 R >> startxref 2241 %%EOF 
```

但它不会将其保存为 pdf 文件，我正在使用以下代码生成 pdf 文件。

```
$('#get_pdf').live('click', function(e) {
    e.preventDefault();
    c_id = $('#ca_id').val();
    c_st = $('#ca_start').val();
    c_ed = $('#ca_end').val();              

    $.ajax({
        url: 'get_pdf',
        type: 'POST',
        data: {ca_id: c_id, ca_start: c_st, ca_end: c_ed},
        success: function(data) {
            console.log(data);
        }
    });
}); 
```

没有ajax它工作正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:04:06.907

不知道你有没有考虑过，但是可以用get_pdf强制下载吗？ [http://codeigniter.com/user_guide/helpers/download_helper.html](http://codeigniter.com/user_guide/helpers/download_helper.html)

另一种选择是使用 dompdf 创建一个临时文件，然后为该文件创建一个锚点。在你的 get_pdf 中： echo json_encode('html'=>$anchor);

然后您的 .ajax 成功处理程序可以具有以下内容：

```
success: function (data){
  try{
    var json = $.parseJSON(data);
    if(typeof(json.html)==='string'){
        $(<selector>).html(json.html);
    }
    catch(err){
    .. handle errors ...;
  }
} 
```

我使用的另一种方法是 fancybox.net 插件，它使用 iframe 来显示 pdf。此代码可能会有所帮助：

```
function setup_fancybox()
{
    $('a.fancybox').unbind('click');
    /* Apply fancybox to multiple items */
    $("a.fancybox").fancybox({
        'transitionIn'  :   'none',
        'transitionOut' :   'none',
        'speedIn'       :   200, 
        'speedOut'      :   200, 
        'overlayShow'   :   false,
        'width'         :   650,
        'height'        :   800,
        'onComplete'    :   function() { parent.$.fancybox.resize();},
        'type'          :   'iframe'
    });

    $('a.fancybox').click(function(){
        return false;
    });
} 
```

# actionscript-3 - Flash 'wMode'，AS3，箭头键专注于 Internet Explorer，堆叠顺序和可能的解决方案

> ID：11411510
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:31.903
> 
> 标签：actionscript-3, internet-explorer, focus, wmode

当启动“wmode”并且用户正在玩需要箭头键的 Flash 游戏时，Internet Explorer 上的浏览​​器窗口也会移动。看来，解决这个问题的唯一方法是删除“wmode”。但是，如果删除了“wmode”，Flash 游戏将上升到堆叠顺序的顶部，并且所有其他元素（例如可扩展横幅或下拉菜单）都位于 Flash 后面。没有多少 iFrame 或 CSS 可以解决这个问题。

我找到了一个解决方案，它可以保留“wmode”，同时还可以让 Flash 游戏在单击后获得键盘焦点，因此 Internet Explorer 浏览器窗口不会移动。这个解决方案意味着其他 Dom 元素可以超越 Flash。

我已将下面的 AS3 代码放入一个简单的示例中，它似乎可以工作。它基本上在内容中放置了一个滚动窗格，然后将其设为不可见。

作为一名 PHP 开发人员而不是 AS3 开发人员，我的问题是 - 任何 AS3 开发人员是否可以看到将以下代码放入基于 Flash/AS3 构建的游戏中的问题或不利影响。这同样可以在 AS2 中工作吗？

非常感激

```
_scrollPane = new ScrollPane();
_scrollPane.setSize(stage.stageWidth, stage.stageHeight);
_scrollPane.horizontalScrollPolicy = ScrollPolicy.OFF;
_scrollPane.verticalScrollPolicy = ScrollPolicy.OFF;
_scrollPane.alpha=0;
stage.addChild(_scrollPane); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:20:32.160

经过更多测试后，这似乎不是一个切实可行的选择。虽然 swf 文件在单击后获得焦点，并且需要箭头键控制的精灵可以在不影响浏览器窗口的情况下移动，但由于 scrollPane 的子索引，阻止了单击或拖动与精灵的交互。

我一直在玩 IE10 的预发布版本，无论 wMode 处于（或删除）何种状态，浏览器窗口仍然受到与 swf 的箭头键交互的影响。如果其他人遇到此问题或找到答案，将不胜感激。

# android - 如何使用 Android 应用程序在 Google+ 上发布图像

> ID：11411512
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:38.010
> 
> 标签：android, google-plus

我已将 google+ 与 android 集成。但我无法在那里张贴图片。在 google api docs **ShareCompat**类用于此。但它在 api 级别 16 中找到。

请帮助..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:41:42.207

您需要包含 Android 支持库才能在 API 级别 4 及更高级别中使用 ShareCompat 类。

[http://developer.android.com/tools/extras/support-library.html#SettingUp](http://developer.android.com/tools/extras/support-library.html#SettingUp)

# jquery - 如何在 mvc 3 EditorFor 中使用 datepicker？

> ID：11411515
> 
> 赞同：3
> 
> 时间：2012-07-10T10:36:43.933
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, jquery-ui

我有两个重要的问题。

1) DateTimePicker 运行良好，`<input type="text" name="date" id="date"/>` 但没有 css 效果和颜色。2）`<%Html.EditorFor(m => m.StartDateTime, new { @class = "datepicker" })%>`不工作。没有显示日期时间选择器。

如何制作 jquery datetimepicker。我的参考文章是： http: [//geekswithblogs.net/michelotti/archive/2010/02/05/mvc-2-editor-template-with-datetime.aspx](http://geekswithblogs.net/michelotti/archive/2010/02/05/mvc-2-editor-template-with-datetime.aspx)

```
 <link rel="stylesheet" href="../../Styles/jquery.ui.all.css"  type="text/css" />
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery-1.7.2.min.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery-ui.js") %>"></script>
<script type="text/javascript" src="<%= Url.Content("~/Scripts/jquery.ui.datepicker.js") %>"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('.datepicker').datepicker({});
        $('#date').datepicker({});

    });
</script>

<table>
<tr><td><input type="text" name="date" id="date" /></td></tr>
<tr><td><%:Html.LabelFor(m=>m.StartDateTime) %></td><td><%:Html.EditorFor(m => m.StartDateTime, new { @class = "datepicker" })%></td></tr>
</table 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:16:10.137

对于第二个问题，使用 Html.TextBoxFor 而不是 EditorFor 来获取 html 属性。

```
Html.TextBoxFor(model => model.Date, new { @class = "datePick", Value = Model.Date.ToString("MM/dd/yyyy") }) 
```

对于您的第一个问题，您的路径是否正确？我使用 Url.Content 来获取它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T11:16:10.300

程序员，这就是我前一阵子的做法。

使用名称 DateTime.aspx 创建模板编辑器：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<DateTime?>" %>

<%string name = ViewData.TemplateInfo.HtmlFieldPrefix;%>
<%string id = name.Replace(".", "_");%>

<div class="editor-label">
    <%= Html.LabelFor(model => model) %>
</div>
<div class="editor-field">
    <%= Html.TextBox("", (Model.HasValue ? Model.Value.ToString("dd-MM-yyyy") : string.Empty), new { @class = "date" }) %>
    <%= Html.ValidationMessageFor(model => model)%>
</div>      

<script type="text/javascript">
    $(document).ready(function() {
        $("#<%=id%>").datepicker({
            dateFormat: 'dd-mm-yy',
            changeMonth: true,
            changeYear: true,
            showOn: 'button', 
            buttonImage: '<%=Url.Content("~/Content/images/calendar.gif") %>'
        });
    });
</script> 
```

然后在您看来简单地这样称呼它：

```
<%= Html.EditorFor(m => m.StartDate) %> 
```

干杯...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:10:51.353

**尝试使用 Html.TextBoxFor 而不是 Html.EditorFor：**

```
<%:Html.TextBoxFor(m => m.StartDateTime, new { @class = "datepicker" })%> 
```

对于 CSS 问题，请使用：

```
<link rel="stylesheet" href="<%= Url.Content("~/Styles/jquery.ui.all.css") %>"  type="text/css" /> 
```

# php - 使用灯箱将图片放到网站上

> ID：11411520
> 
> 赞同：0
> 
> 时间：2012-07-10T10:36:59.383
> 
> 标签：php, performance, lightbox

我正在为一个学校团体制作一个网站，该网站将有很多关于其活动的图片。我正在使用灯箱，因此图片将显示为幻灯片，并且我更改了图片的尺寸，因此幻灯片上的“当前”图片没有原始图片那么大。我仍然发现打开图片或转到下一张图片大约有 5 秒的延迟。我想知道是否有一种方法可以实现更快的加载时间，甚至是我没有考虑过的另一种方法。

我在我的网站上使用 xhtml、css 和 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:49:50.930

很抱歉回答，但我现在不能写评论......

我正在做其他方式，上传后，我将图片重新采样为大图片和缩略图。

当然，您可以每次都重新采样图片，但这可能是您必须等待这么长时间的原因，而且如果您同时有很多访客，服务器的工作量很大。

所以对我来说最好的说法是，大图像最大为640x480，然后上传后保存图片到这个大小，当然以相同的比例重新采样。

**编辑：**从您的帖子中，我不知道您是否在 HTML 中通过设置高度和宽度或在 PHP 中调整图像大小/重新采样，以及在哪里调整图像的大小以及频率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:27:14.267

假设您在服务器上有一张图片，其大小为 8000x6000。它的大小可能是 10 MB。

现在假设您想在网页中显示此图像并执行以下操作：

```
<img src="largeImage.jpg" width="800" height="600"/> 
```

浏览器将下载大图像（10 MB），这需要很长时间，然后将其在内存中调整为 800x600 以显示在网页上（这会消耗内存和 CPU 时间）。总时间：25秒。

现在假设您将此图像调整为 800x600 并将此调整大小的图像放在服务器上。然后你显示图像

```
<img src="smallImage.jpg" width="800" height="600"/> 
```

小图像看起来与访问您网页的用户相同，但浏览器只需要下载一个小图像，大小大约为 100 KB（比大图像小 100 倍）。下载图像所需的时间也将除以 100（0.25 秒），并且浏览器不必在内存中加载和调整巨大图像的大小（更少的内存，更少的 CPU 时间）。您的图像几乎立即可见。

有很多工具（我自己使用 Irfanview）可以拍摄大量图像并一次调整它们的大小。你应该这样做。

# vba - 使用 Excel 数据和可能的宏更新 Access 数据库中的 2 个字段

> ID：11411522
> 
> 赞同：0
> 
> 时间：2012-07-10T10:37:05.047
> 
> 标签：vba, ms-access, ms-access-2007, excel-2007

在我的主数据库中，我有一个包含两个日期和 ID 号的小表。我使用此表来更新查询并进行一些分析。该表如下所示：

```
Number   | Date  
1        | 09.07.2012\.  
2        | 10.07.2012. 
```

我想做的是有一个excel文件，启动后会弹出一个表单。

该表单应包含 2 个字段和 2 个按钮。在这些字段中，我输入 2 个日期（使用日期选择器或其他），并使用第一个按钮，我使用新数据更新 Access 中提到的表（删除旧日期并使用新日期更新），另一个我在该 Access 数据库中启动一个预定义的宏.

这有多复杂？你能指导我解决问题吗？一些示例代码会很棒。

```
Command25_Click() 
CurrentDb.Execute "DELETE * FROM Datumi" 
Dim tbl As Recordset 

Set tbl = CurrentDb.OpenRecordset("Datumi") 
tbl.AddNew tbl!brojka = "1" 
tbl!datum = Text8.Value 
tbl.Update 
tbl.AddNew tbl!brojka = "2" 
tbl!datum = Text10.Value 
tbl.Update 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:13:53.843

这在一定程度上会走很长的路，因为我正在使用日期的更新来演示您如何还可以运行保存的查询。

```
'SQL for stored query, this assumes you
'will be updating based on some key
UPDATE DatesTable t
SET t.Date1 = [@Date1], t.Date2 = [@Date2]
WHERE t.aAuto=[@Key]

'Code for Excel
'You could set a library reference to 
'Microsoft ActiveX Data Objects x.x Library
Dim cmd As Object
Dim cn As Object

Set cmd = CreateObject("ADODB.Command")
Set cn = CreateObject("ADODB.Connection")

'Connection string, see also http://connectionstrings.com
strCon = "Provider=Microsoft.ACE.OLEDB.12.0; " & _
"Data Source=z:\docs\test.accdb"

cn.Open strCon

'Name of the saved query
cmd.CommandText = "UpdateDates"
cmd.CommandType = adCmdStoredProc
cmd.ActiveConnection = cn

'Some parameters.
'http://www.w3schools.com/ADO/met_comm_createparameter.asp
'Make sure you get the type right, you will find details here:
'http://www.w3schools.com/ADO/ado_datatypes.asp
'You will find direction here:
'http://www.w3schools.com/ado/prop_para_direction.asp

'Make sure you get the order right
'adDate = 7, adInteger = 3, adParamInput = 1
cmd.Parameters.Append cmd.CreateParameter("@Date1", 7, 1, , txtDate1)
cmd.Parameters.Append cmd.CreateParameter("@Date2", 7, 1, , txtDate2)
cmd.Parameters.Append cmd.CreateParameter("@Date2", 3, 1, , MyUniqueKey)

'recs : return for records affected
'adExecuteNoRecords = 128 : no records are returned by this query, 
'so this increases efficiency
'http://www.w3schools.com/ADO/ado_ref_command.asp

cmd.Execute recs,,128

'Did it work?
MsgBox "Records updated: " & recs 
```

# javascript - 可触摸区域上的悬停按钮状态 (iPad)

> ID：11411524
> 
> 赞同：0
> 
> 时间：2012-07-10T10:37:09.550
> 
> 标签：javascript, jquery, ipad, touch

当我按下按钮更改视图时，我想找到在按钮（如原生 iOS 和浏览器按钮）上悬停效果的通用解决方案。在我的情况下，按钮是或标签。当我按下按钮时，它应该更改为按下按钮状态。此外，如果我在按钮外部触摸屏幕并将手指移入按钮，则按钮的状态应更改为按下。反之亦然。任何解决方案或提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:48:28.523

由于没有光标，触摸小工具没有悬停效果。所以你必须使用

```
button{background:#fff;}
button:active{background:#ccc;} 
```

并且`if I touched screen outside of the button and move finger into button the button's state should be changed to pressed.`您将需要一些客户端脚本。

# .net - 如何以格式化的方式在网页上显示html？

> ID：11411525
> 
> 赞同：1
> 
> 时间：2012-07-10T10:37:13.487
> 
> 标签：.net, html

我必须显示一些应该采用格式化方式的 html 内容。实际上我比较了两个 html 文件，现在我想在我的页面中显示这两个文件内容，但问题是我显示的内容不是格式化的。那么是否有任何第三方控制或类似的东西来做这些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:48:34.817

试试这些：

[如何在 JavaScript 中格式化/整理/美化](https://stackoverflow.com/questions/3913355/html-formatter-tidy-beautifier-for-javascript)

[Javascript 中的 HTML 格式化程序](https://stackoverflow.com/questions/5212987/html-formatter-in-javascript)

# c# - 使用数据视图将数据行导入数据表

> ID：11411529
> 
> 赞同：1
> 
> 时间：2012-07-10T10:37:31.880
> 
> 标签：c#, asp.net, datatable

我想从数据视图插入一行到数据表。我正在使用以下代码将数据视图插入数据表，但它返回错误。

```
Unable to cast object of type 'System.Data.DataRowView' to type 'System.Data.DataRow'. 
```

这是我的部分代码：

```
string empid= lbxempname.Items[i].Text.Substring(0,8);
DataView dv = new DataView();
dv = DS.DefaultView;
dv.RowFilter = "fldempid='" + empid + "'";
foreach (DataRow Dr in dv) {
  DST.ImportRow(Dr);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:45:43.513

A `DataView`contains`DataRowViews`并且 this 有一个[`Row`](http://msdn.microsoft.com/en-us/library/system.data.datarowview.row.aspx)引用`DataRow`.

```
foreach (DataRowView drv in dv)
{
    DataRow dr = drv.Row;
} 
```

但是，如果该行属于另一个 DataTable，则不能将该行导入 DataTable。我会用它`LINQ-To-DataSet`来过滤你的行并[`CopyToDataTable`](http://msdn.microsoft.com/en-us/library/bb396189.aspx)从中创建一个新行`DataTable`。

例如：

```
DataTable tblFiltered = DS.AsEnumerable()
                          .Where(r => r.Field<string>("fldempid") == empid)
                          .CopyToDataTable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:50:40.950

尝试这个：

```
DST = dv.ToTable(); 
```

这行代码在您为 DataView 设置过滤器之后执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:48:09.770

这可能有帮助吗？

```
foreach (DataRow row in dv)
{
    dt.LoadDataRow(row.ItemArray);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:41:52.823

尝试这个

```
DataView dview = new DataView();
DataTable dtable = new DataTable();
dtable = dview.Table.Clone();
foreach(DataRowView drowview in dview)
dtable.ImportRow(drowview.Row); 
```

# .net - 有两个与一个 ObservableCollection 关联的视图

> ID：11411532
> 
> 赞同：1
> 
> 时间：2012-07-10T10:37:44.323
> 
> 标签：.net, observablecollection

我有一个 Windows Phone 7 应用程序，它有一个全景控件，它在一个面板上显示所有新闻文章，在另一个面板上显示未读文章。是否可以从 RangeObservableCollection 生成相同数据的两个视图？它目前通过为这两个列表设置两个单独的 ObservableCollections 来工作。

# c# - SharpPDF 中的特殊字符

> ID：11411535
> 
> 赞同：0
> 
> 时间：2012-07-10T10:37:56.160
> 
> 标签：c#, character, special-characters, sharppdf

我正在使用 sharpPDF dll ( [http://sharppdf.sourceforge.net](http://sharppdf.sourceforge.net) ) 在 C# 中创建 PDF。一切都很好，但我的输出中没有任何特殊字符（实际上这些是波兰语字母，例如“ą，ć，ł，Ó...”）。我正在那个 PDF 中保存字符串。

有没有办法让它工作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T08:02:15.490

不幸的是，SharpPDF 有很多特殊字符问题，并且没有计划改进特殊字符问题。

对不起。

# asp.net - ASP.NET 强制用户默认使用 IE

> ID：11411543
> 
> 赞同：0
> 
> 时间：2012-07-10T10:38:25.320
> 
> 标签：asp.net, internet-explorer, browser

我有一个内置在 asp.net/vb 中的网络应用程序。该站点上的脚本仅适用于 IE。有没有办法强制用户在网站上一直使用 IE？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:41:41.650

你不应该。你真的愿意忽略 75% 的流量吗？或者你是由微软支付的并且有一个非常酷的网站创意？任何方式，您都可以通过使用 javascript 并检测浏览器来做到这一点，如果它不是 IE，则不显示任何内容（让您成为主 div `"display:none"`）。这是一个检测浏览器的示例[http://www.w3schools.com/js/js_browser.asp 。](http://www.w3schools.com/js/js_browser.asp)再一次，这些方法用于自定义浏览器的样式，而不是您想要的样式。

```
function detectIE()
{
   var isIE=navigator.userAgent.toString().indexOf("IE") != -1
   if(isIE)
   {
      document.getElementById("main").style.display="block";
   }
   else
   alert("This website can only be accessed using Internet Explorer");
}
<body onload="detectIE">
<div id="main" style="display:none;">
//Everything inside this div
</div>
</body> 
```

另一种方法是使用条件

```
<!--[if gte IE 6]>
<div id="main" style="display:none;">
    //Everything inside this div
    </div>
<![endif]--> 
```

请记住，这不是 100% 的解决方案，浏览器可以在那里更改用户代理字符串并将自己显示为 IE 或 javascript 可以关闭。您应该考虑添加对其他浏览器的支持，而不是完全忽略它们。

# python - 查找离网格位置最近的 n 个数据点

> ID：11411549
> 
> 赞同：1
> 
> 时间：2012-07-10T10:38:39.453
> 
> 标签：python

我正在解决一个问题，我有大量（> 400 万）数据点位于三维空间中，每个数据点都有一个标量函数值。这由四个数组表示：XD、YD、ZD 和 FD。元组 (XD[i], YD[i], ZD[i]) 指的是数据点 i 的位置，其值为 FD[i]。

我想在与我的数据相同的空间中叠加一个直线网格，例如 100x100x100 点。该网格设置如下。

```
[XGrid, YGrid, ZGrid] = np.mgrid[Xmin:Xmax:Xstep, Ymin:Ymax:Ystep, Zmin:Zmax:Zstep]
XG = XGrid[:,0,0]
YG = YGrid[0,:,0]
ZG = ZGrid[0,0,:] 
```

XGrid 是网格中每个点的 x 值的 3D 数组。XG 是从 Xmin 到 Xmax 的 x 值的一维数组，相隔 XStep 的距离。

我想使用插值算法，我必须根据周围的数据在每个网格点找到函数的值。在这个算法中，我需要 20 个最接近（或至少接近）我感兴趣的网格点的数据点。也就是说，对于网格点 (XG[i], YG[j], ZG[k]) 我想找到最近的 20 个数据点。

我能想到的唯一方法是让一个 for 循环遍历每个数据点，然后再嵌入一个 for 循环遍历所有（这么多！）数据点，计算欧几里德距离，并挑选出 20 个最接近的数据点。

```
for i in range(0,XG.shape):
  for j in range(0,YG.shape):
    for k in range(0,ZG.shape):

      Distance = np.zeros([XD.shape])

      for a in range(0,XD.shape):
        Distance[a] = (XD[a] - XG[i])**2 + (YD[a] - YG[j])**2 + (ZD[a] - ZG[k])**2

      B = np.zeros([20], int)
      for a in range(0,20):
        indx = np.argmin(Distance)
        B[a] = indx
        Distance[indx] = float(inf) 
```

这会给我一个数组，B，最接近网格点的数据点的索引。我觉得这需要很长时间才能遍历每个网格点的每个数据点。

我正在寻找任何建议，例如如何在计算距离之前组织数据点，这可以减少计算时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:46:59.000

看看一个看似相似但 2D 的[问题](http://en.wikipedia.org/wiki/Closest_pair_of_points_problem)，看看你是否不能用那里的想法来改进。

从我的脑海中，我在想你可以根据它们的坐标（三个独立的数组）对点进行排序。当您需要最接近`[X, Y, Z]`网格点的点时，您将快速定位这三个数组中的点并从那里开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:51:40.357

此外，您实际上并不需要欧几里得距离，因为您只对相对距离感兴趣，这也可以描述为：

```
abs(deltaX) + abs(deltaY) + abs(deltaZ) 
```

并节省昂贵的功率和平方根...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T13:57:44.380

无需为每个网格位置迭代您的数据点：您的网格位置本质上是有序的，因此只需迭代*一次*数据点，并将每个数据点分配给围绕它的八个网格位置。完成后，某些网格位置的数据点可能太少。检查相邻网格位置的数据点。如果您有大量数据点要处理（这取决于您的数据分布方式），您已经可以在初始通道中选择 20 个最近的邻居。

*附录：*您可能还想重新考虑算法的其他部分。您的算法是一种分段线性插值，并且有很多相对简单的改进。与其将空间划分为均匀分布的立方体，不如考虑分配多个中心点并动态重新定位它们，直到数据点与最近中心点的平均距离最小化，如下所示：

1.  将每个数据点分配到其最近的中心点。
2.  将每个中心点重新定位到可以最小化从“其”点（到数据子集的“质心”）的平均距离的坐标。
3.  一些数据点现在具有不同的最近中心点。重复步骤 1\. 和 2\. 直到收敛（或足够接近）。

# shell - 如何使用 sed 替换以下文本？

> ID：11411556
> 
> 赞同：0
> 
> 时间：2012-07-10T10:39:04.227
> 
> 标签：shell, sed, replace

你好我想换`document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));`

和

`(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();`

在所有情况下...

所以我使用了下面的代码。

```
find /cygdrive/c/xampp/htdocs/news -type f -exec sed -i s#document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));#(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();#g {} \; 
```

但它并没有取代。逃跑有问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:48:19.907

> sed -i "s/^document.write(unescape(.*;$/(function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true ;ga.src = ('https:' == document.location.protocol ?'https://ssl':'http://www') + '.google-analytics.com/ga.js';var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);})();/" example.txt

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:48:20.353

好吧，第一步是`sed`单独检查命令：

> bash：意外标记'（'附近的语法错误

您必须将 sed 命令放在单引号或双引号中，以便将其作为单个参数传递给 sed 应用程序`'s#docum....'`。如果单引号中有单引号，或者双引号中有双引号，则必须对其进行转义。

请注意，该命令看起来很丑陋，不是真正可读或可维护的，我会使用 python 或 ruby​​ 有特殊引号的地方，这将有助于克服字符串转义的问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:16:37.690

您需要将参数引用到 sed，并转义任何嵌套引号。否则这个：

```
s#document.write(unescape("%3Cscript src='" + gaJsHost +  ... 
```

将被 shell 分解成单独的单词，而不是作为单个参数传递给 sed。

您需要将整个 sed 脚本（`s#from#to#`部分）括在引号中，我会选择单引号，然后将`'`脚本中的每个替换为`\'`.

（另外，你为什么使用`find -exec`而不是我[建议](https://stackoverflow.com/a/11392128/981959)的？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T10:47:24.260

即使不是直接答案，也可以使用“rpl”工具进行此类替换。看起来你正在使用 cygwin，因此你可以[在这里](http://gnuwin32.sourceforge.net/packages/rpl.htm)找到一个 win32 端口。

# asp.net - 通过单击 radtabstrip 中子页面内的按钮更改父页面中标签的文本

> ID：11411565
> 
> 赞同：0
> 
> 时间：2012-07-10T10:39:35.053
> 
> 标签：asp.net, events, tabs, rad

我的应用程序包含一个带有 radtabstrip 的页面“PageA.aspx”。其中一个选项卡与 contenturl 为“PageB.aspx”的 radpageview 相关联，这意味着如果我选择该特定选项卡，我将在选项卡下方看到 PageB 的内容。pageA中有一个标签，pageB中有一个按钮。当我按下页面 B 内的按钮时，我想更改页面 A 中标签的文本。谁能告诉这是否可能？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:29:13.353

是的...在javascript中是可能的...使用Window.parent属性...您可以从中获取该标签对象，您可以更改标签文本...

# blackberry - 如何使用 Blackberry 应用程序附加 rtf 或 doc 文件

> ID：11411566
> 
> 赞同：0
> 
> 时间：2012-07-10T10:39:40.783
> 
> 标签：blackberry

我需要以我的项目源代码作为资源附加 doc 文件或 .rtf 文件。我想在保存权限后在应用程序安装时调用它。我正在开发一个背景应用程序而不是 Ui 应用程序。

我不知道如何将这些文件与源代码附加并使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:33:31.303

您可以将这些文件视为项目的资源，并将它们放在资源文件夹中并打包项目。

谢谢

纳文 M

# css - 在 CSS id 或类中使用 camelCase 是否可以？

> ID：11411568
> 
> 赞同：33
> 
> 时间：2012-07-10T10:39:44.540
> 
> 标签：css, camelcasing

问题在标题中。我习惯于在开发中使用驼峰式，并且由于设计中有交叉，我想知道是否有任何技术原因（不管意见如何）反对在 HTML 中使用它。提前感谢您的回复。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-07-19T19:46:47.487

如果您在 CSS 中使用 camelCase 标识符 -`|=`选择器说明符，则存在一个技术限制：

```
<form class="registration"></form>
<form class="search-movies"></form>
<form class="search-actress"></form> 
```

要仅匹配搜索表单，您可以编写：

```
[class|="search"] { font-size: 150% } 
```

你不能用 camelCase 类名来做到这一点。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-10T10:42:33.107

从技术上讲，不，不存在技术问题。你喜欢什么。

不过，请尝试遵循一个好的风格指南，[比如这个](https://google.github.io/styleguide/htmlcssguide.html#ID_and_Class_Naming)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-13T14:57:04.537

今天之前我一直在使用 camelCasing，让我讲个故事：我通过用 camelCasing 编写的 id 名称创建了一个引导模式。我无法使用引导程序自己的 JQuery 函数来操作它。经过几天的搜索，我的同事终于发现是camelCasing造成的。JavaScript 区分大小写可能很棘手且不可预测。所以我建议你使用连字符。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-10T10:48:45.727

好问题。我个人在类/ID名称中使用camelCase。没有技术上的原因你不能。

然而，在对意见进行了一些快速阅读之后，似乎很多其他开发人员/设计师使用连字符而不是驼峰式，因为它具有更好的可读性。

使用您喜欢的编码。我使用 camelCase 很好，我在团队环境中工作，并且从未遇到过其他开发人员可读性的问题。

**我一直在阅读的对此的意见可以在这里找到：** [http ://css-tricks.com/new-poll-hyphens-or-dashes/](http://css-tricks.com/new-poll-hyphens-or-dashes/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-10T10:46:23.877

可以，是的，但请注意有一些一般技术上的区分大小写的[问题](https://stackoverflow.com/questions/1547986/can-i-use-camel-case-in-css-class-names)需要注意。从技术角度来看，如果您的 css 和 html 保持一致，您应该没问题。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-05T07:10:05.127

Twitter 甚至使用 Pascal Case。

[![Twitter PascalCase CSS 类名](../Images/be4c2527efcfeac60a56905dde3d609f.png)](https://i.stack.imgur.com/r0U3x.png)

# php - 在 PHP 脚本之间传递上传的文件

> ID：11411573
> 
> 赞同：3
> 
> 时间：2012-07-10T10:40:12.017
> 
> 标签：php, html, file-upload

我有一个页面，用户可以在其中上传 HTML 文件以用作主题。在向用户显示某些选项之前，HTML 文件对其执行了一些检查。用户填写与 HTML 文件相关的表单，并提交表单。但是，由于脚本结束后临时文件夹中的文件被销毁，我不知道一旦填写并重新提交表单后如何获取 HTML 文件，而不是让用户重新上传文件，这依赖于他们上传相同的文件，并且还使他们上传两次，这是违反直觉的，并且可能是大文件的问题。
这是代码（减少以使其更易于阅读/理解）。表单提交给自己，因此两个“步骤”使用相同的 PHP 文件。

```
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    // Form has been submitted
    $files = $_FILES['file'];
    <form method="POST">
        /* Options about the uploaded HTML file are generated using PHP and displayed here */
        <input type="submit">
    </form>
} else {
    ?>
    <form method="POST" enctype="multipart/form-data">
        <label for="file">Theme File(s)</label>
        <input type="file" name="file[]" multiple="multiple">
        <input type="submit">
    </form>
    <?php
} 
```

我尝试使用`<input type="file" name="file[]" multiple="multiple" value="<?php echo $files; ?> >`，但这不起作用，并且还需要用户重新上传文件，如果文件太大，这可能是任何问题。
我在想可能有一种方法可以在内部传递文件，并检查文件是否已上传或传递给脚本而不是`<input type="file" name="file[]" multiple="multiple">`，但我找不到这样做的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:49:36.433

您需要创建自己的临时文件，并在两个脚本之间传递名称。

因此，例如，在您的“第一个脚本”（即文件首次上传时）中，您将：

```
$uniqName = uniqid('upload_', TRUE);
$tmpFile = "/tmp/$uniqName.html";
move_uploaded_file($_FILES['file']['tmp_name'][0], $tmpFile); 
```

然后当你从这个上传的结果生成表单时，你会添加

```
<input type="hidden" name="uniqName" value="<?php echo $uniqName; ?>" /> 
```

...这样当您进入“第二个脚本”时（提交调查表后），您可以通过以下方式访问该文件：

```
$tmpFile = "/tmp/".basename($_REQUEST['uniqName']).".html"; 
```

当然，这取决于人们未能提交第二个表单的可能性，因此您最终会在临时目录中乱扔“孤立文件”，因此您需要实施某种形式的检查，以在文件处于非活动状态后删除文件一定的时间 - 您可以基于文件的最后修改时间。

**编辑**

这是一个示例，说明如何在`/tmp`没有 cron 作业的情况下随机运行作业以保持目录整洁：

```
$probabilityDivisor = 10; // 1/10 chance of running
$uploadTTLSecs = 1800; // 30 minutes

if (mt_rand(1, $probabilityDivisor) / $probabilityDivisor == 1) {
  foreach (glob('/tmp/upload_*') as $file) {
    // Iterate files matching the uniqids you generate
    if (time() - filemtime($file) >= $uploadTTLSecs) {
      // If file is older than $uploadTTLSecs, delete it
      unlink($file);
    }
  }
} 
```

[这与 PHP会话垃圾收集器](http://www.php.net/manual/en/session.configuration.php#ini.session.gc-divisor)的操作方式类似。由于操作的简单性，这不应以任何有意义的方式对用户体验产生不利影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:47:53.360

您可以尝试以下方法：

1.  使用**move_uploaded_file()**并将文件从临时位置移动到服务器上的永久位置。请务必为您的移动文件指定一个唯一的名称，例如 'file-' 。时间（） 。'.jpg' 什么的。

2.  上传后不久，注册一个 Session 变量并将文件名放入其中。

3.  一切都结束后，您可以使用 unset() 删除文件

现在该文件安全地位于您的服务器上，您也可以通过会话访问它。

希望这可以帮助 ：）

# ubuntu - USB闪存驱动器上的Ubuntu

> ID：11411574
> 
> 赞同：0
> 
> 时间：2012-07-10T10:40:15.553
> 
> 标签：ubuntu, usb, development-environment

我想在 Linux 上运行一个可移植的 Ruby on Rails 开发环境。所以我可以与我的 Windows 相关活动并行工作。

我正在寻找可靠的 USB 闪存驱动程序。我应该寻找什么尺寸？

有什么建议吗？

有没有人设法实现这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:05:47.963

检查[这个](http://www.pendrivelinux.com/)。

所以你想要的是一个功能齐全的 Ubuntu/Linux 环境，它设置在 USB 上，你可以在你的计算机上插入和使用，对吗？

基本上步骤很简单：

1.  下载你想要的 ubuntu/linux 风格。
2.  制作一个可启动的 USB 驱动器并使用[通用 USB 安装程序进行安装。](http://www.pendrivelinux.com/universal-usb-installer-easy-as-1-2-3/)如果您愿意，您也可以直接从程序本身下载您的 .iso。
3.  确保选择足够大的持久文件大小以将更改存储在 USB 上。这样您就不会在重新启动后丢失任何数据等。

更多信息：[如何创建持久的可启动 Ubuntu USB 闪存驱动器](http://www.howtogeek.com/howto/14912/create-a-persistent-bootable-ubuntu-usb-flash-drive/)

如果您不想启动它并想同时使用您的 Windows 操作系统，请考虑使用[VirtualBox](https://www.virtualbox.org/)并检查上一个关于[使用 virtualbox 从 USB 启动 ubuntu 的问题](https://stackoverflow.com/q/1044241/465082)

# ruby - ActiveModel::MassAssignmentSecurity::ApiUsersController#create 中的错误

> ID：11411581
> 
> 赞同：0
> 
> 时间：2012-07-10T10:40:27.803
> 
> 标签：ruby, ruby-on-rails-3

我无法创建新的 api_user。每次我尝试创建它时，我都会得到

```
Can't mass-assign protected attributes: utf8, authenticity_token, api_user, commit, action, controller 
```

这是我的模型`api_user.rb`

```
class ApiUser < ActiveRecord::Base
 attr_accessible :api_key, :count, :email, :name, :organization
end 
```

控制器`api_users_controller.rb`

```
class ApiUsersController < ApplicationController
 #skip_before_filter :verify_authenticity_token

 def new
  @api_user = ApiUser.new
 end

 def create
    @api_user=ApiUser.create(params)
    render :text=>"#{@api_user.id}"
end

def destroy
    @api_user=ApiUser.find(params[:id])
    @api_user.destroy
    render :text=>"Deleted successfully"
end
 end 
```

我正在使用 Ruby 1.9.2 和 Rails 3.2.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:09:20.497

为了创建 ApiUser，您应该只使用正确的参数：

```
@api_user=ApiUser.create(params[:api_user]) 
```

不是所有的`params`哈希

# html - 为什么我们需要针对不同的浏览器使用不同的 CSS，特别是在 IE 的情况下（IE6、IE7、8、9 的差异）

> ID：11411582
> 
> 赞同：0
> 
> 时间：2012-07-10T10:40:30.750
> 
> 标签：html, css

我只是想知道为什么默认 css 不适用于所有浏览器，特别是它对 IE 浏览器（6、7、8、9）不起作用。所以通常我们需要为不同的浏览器（主要是IE）创建不同的css文件，这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:44:31.243

我不喜欢创建特定于浏览器的 CSS，并且通常会尝试使用适用于所有浏览器的解决方案。有些东西在不同的浏览器中不起作用的原因是：

*   错误
*   造型的不同诠释
*   使用以前版本中未实现的东西

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:44:34.317

一些浏览器不支持 CSS 必须提供的所有功能。[此外，在某些情况下，由于“ css 框模型](http://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)” ，您需要专门为 IE“微调” css 。您可能还需要它来启用以前版本的向后兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:42:28.077

当您实现并非在所有浏览器中提供的某些 css 功能时需要它。

然后有人需要各种 css 文件作为后备。

假设您`position:fixed;`在 css 中使用，并且如果您希望您的网站在 ie6 中完美，那么您将需要一些其他 css 文件进行回调，因为`position:fixed;`ie6 不支持

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T10:47:22.727

CSS 是一个可怕的技术，没有*官方*实现，只有官方规范。这意味着没有标准解释器来定义应该如何解释语言，只有指导解释器制造商的文档。结果是许多解释器，每个都有自己的怪癖和故障。

...

*然后是IE*

...

微软长期以来一直坚定地站在“让我们按照自己的方式行事”的圈子中。造成这种情况的原因有很多，从实现 WC3 CSS 标准尚不支持的功能（例如，他们有一个非常早期的现代`opacity`命令版本）到更险恶的原因，比如试图强制遵守他们的标准为他们的浏览器带来利基吸引力。

无论哪种方式，如果你要进入 web-dev，IE 将成为你存在的祸根。如果您认为 CSS 不好，请等到接触 JS。

# regex - 正则表达式匹配特定字符串后跟数字？

> ID：11411584
> 
> 赞同：22
> 
> 时间：2012-07-10T10:40:38.233
> 
> 标签：regex

我可以使用什么正则表达式来找到它？

```
&v=15151651616 
```

Where`&v=`是静态字符串，数字部分可能会有所不同。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-10T10:45:49.527

`"^&v=[0-9]+$"`如果您想要至少 1 个号码，或者`"^&v=[0-9]*$"`没有号码也必须匹配。

如果您希望它在另一个序列中匹配，只需删除`^`and `$`，这意味着序列以开头`(^)`和以结尾的序列`($)`

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-07-10T10:41:58.910

您可以使用以下正则表达式：

```
&v=\d+ 
```

这匹配`&v=`，然后是一个或多个数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-17T13:29:28.990

我尝试了其他解决方案，但那些对我不起作用，但以下工作。

```
NAME(column):
    dbbdb
    abcdef=1244
    abc =123sfdafs
    abc= 1223 adsfa
    abc = 1323def
    abcasdafs =adfd 1323def 
```

要查找 'bc' 后跟一个数字，代码：
。-> 匹配任何字符
？-> 可选（即使没有字符也显示）
+ -> 除了搜索关键字

```
where regexp_like (NAME, 'bc.?+[0-9]');
Output:
abcdef=1244
abc =123sfdafs
abc= 1223 adsfa
abc = 1323def
abcasdafs =adfd 1323def 
```

要查找 'bc' 后跟 '=' 和一个数字，无论空格如何，代码：

```
where regexp_like (NAME, 'bc ?+[=] ?+[0-9]');
Output:
abc =123sfdafs
abc= 1223 adsfa
abc = 1323def 
```

# javascript - 对象的作用域不符合预期

> ID：11411587
> 
> 赞同：0
> 
> 时间：2012-07-10T10:40:46.877
> 
> 标签：javascript, scope

我正在尝试改掉一个长期存在的编码坏习惯：将小部件写入全局范围。

我已经为网页上的新闻滚动制作了一个大型的、大部分是独立的脚本，并且在我将整个东西塞进一个函数之后，它的运行效果令人惊喜……事实上太好了。

为了确保我没有作弊，我编写了以下代码以确保我的范围是正确的：

```
var story_count = "THIS IS NOT A NUMBER";

console.log(story_count);

touch_roll = function()
{
    this.story_count = 0;
}

console.log(story_count);

touch_roll();

console.log(story_count); 
```

完全期望这会在控制台中产生以下响应

```
THIS IS NOT A NUMBER
THIS IS NOT A NUMBER
THIS IS NOT A NUMBER 
```

我完全惊讶地发现输出实际上是**这样**的：

```
THIS IS NOT A NUMBER
THIS IS NOT A NUMBER
0 
```

不`this`就是我想的那样吗？研究并没有真正帮助，但我有点筋疲力尽，所以完全有可能我读错了。如果不是这样，那么我如何将我的所有命名空间完全保留在该功能的范围内，以免与网站上的现有位混淆？

* * *

根据下面马特的回答，这里是更正的代码：

```
var story_count = "THIS IS NOT A NUMBER";

console.log(story_count);

var touch_roll = new function()
{
    this.story_count = 0;
    console.log(story_count);
}

console.log(story_count); 
```

通过声明`touch_roll`为 a`var`并将函数实例化为`new`Javascript 将所述函数评估为运行时对象（因此我们也可以删除`touch_roll()`底部的调用）。

修正后的输出如下：

```
THIS IS NOT A NUMBER
0
THIS IS NOT A NUMBER 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:43:15.913

因为您没有调用`touch_roll`,`new`是对象（这是浏览器环境中的全局变量所属的）`this`。`window`

If you were to use `new`, then you'd get:

```
THIS IS NOT A NUMBER
THIS IS NOT A NUMBER
THIS IS NOT A NUMBER 
```

Additionally, you're declaring `touch_roll` as a implicit global variable. Either use [function declaration syntax](https://developer.mozilla.org/en/JavaScript/Reference/Statements/function), or add a `var` to it.

# sql - 类似 SQL 的查询没有返回正确的结果

> ID：11411589
> 
> 赞同：0
> 
> 时间：2012-07-10T10:40:58.280
> 
> 标签：sql, sql-server, tsql, sql-like

我正在使用 sql 服务器。我有一张桌子

```
Company
 ABC
 XYZ
 ABC,XYZ 
```

当我运行类似查询时`where company like '%ABC%'`，我得到的记录只包含`ABC`而不包含`ABC,XYZ`

如何获得这两个记录？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:44:43.713

首先，您不应在一列中包含逗号分隔的列表。这样做，您将在尝试查询数据时遇到问题。

其次，您的代码应该可以工作：

```
select *
from t
where company like '%ABC%' 
```

查看[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/e2498/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:43:39.380

您的查询应该有效。看[这个例子](http://sqlfiddle.com/#!3/51af9/1)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:15:33.960

从表名中选择公司，其中公司喜欢 '%ABC%'

无论是否存在逗号或任何其他字符，它都会起作用

# jvm - 从 WebSphere JVM 获取有用的数据

> ID：11411593
> 
> 赞同：1
> 
> 时间：2012-07-10T10:41:18.623
> 
> 标签：jvm, websphere, jmx

我想附加到 WebSphere JVM 并获取有用的数据，例如垃圾收集器的名称及其收集计数、线程计数、堆/非堆内存使用情况、JVM 正常运行时间等。但是，此链接提供了可用的 MBean 列表WebSphere JVM -

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.wsfep.doc%2Fweb%2FmbeanDocs%2Findex.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=%2Fcom.ibm.websphere.javadoc.wsfep.doc%2Fweb%2FmbeanDocs%2Findex.html)

这些 MBean 似乎没有提供我需要的任何数据。有没有其他方法可以获取数据？我将使用 JMX 来收集它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T10:51:58.167

如果您是一家有钱可以花钱的公司，我建议您使用像 Wily Introscope 这样的产品，它与您的 JVM 一起运行一个代理来收集您所追求的所有指标。我已经将它与 Websphere 服务器一起使用。寻找开源替代品 我遇到了[GlassBox](http://glassbox.sourceforge.net/glassbox/Home.html)，它可能为您提供低成本的替代品。

我不知道有任何默认 MBean 会提供您所追求的覆盖范围。通常是大型 Java 供应商提供此类功能。

**[更新]**

[最近使用VisualVM](http://visualvm.java.net/)和 Websphere 7做了一些事情，出于实时监控/故障排除的目的，我想我会分享我的知识。VisualVM 带有标准的 Sun JDK，你会发现它安装在这里：`JAVA_HOME\bin\jvisualvm.exe`

要在 Websphere 中启用 JRE 以允许 VisualVM 连接，您必须使用 Websphere 管理控制台添加以下 JVM 参数

转到：应用程序服务器 > [server_name] > Java 和进程管理 > 进程定义 > Java 虚拟机 > 通用 JVM 参数

```
-Djavax.management.builder.initial= 
-Dcom.sun.management.jmxremote 
-Dcom.sun.management.jmxremote.authenticate=false 
-Dcom.sun.management.jmxremote.ssl=false 
-Dcom.sun.management.jmxremote.port=1099 
-Dcom.sun.management.jmxremote.local.only=false 
```

确保您在上面选择的端口号尚未使用

```
netstat -ap | grep 1099 
```

重新启动服务器，您将能够使用 VisualVM 连接以查看正常运行时间、线程、堆和 GC 配置文件。

我看到 Sun 还记录了如何[编写自己的 Java JMX 客户端](http://docs.oracle.com/javase/tutorial/jmx/remote/custom.html)来读取这些值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T04:02:25.733

您可以接受 Brad 和 Andreas 提供的建议。

我想向您介绍一些应该探索的工具

(1) Tivoli 性能查看器。这应该提供一些关于 JVM 的信息。

(2) IBM 健康中心 -> [http://www.ibm.com/developerworks/java/jdk/tools/healthcenter/](http://www.ibm.com/developerworks/java/jdk/tools/healthcenter/)

这两个都应该为您提供您需要的大量信息。

试试看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T20:21:44.577

The JVM statistics are provided by the platform MXBeans. If you need to collect this data over a short period of time, then you could use a tool such as VisualVM. It's a bit tricky to configure this to connect to a WebSphere instance, but it is possible. One way to do that (there are other options) is described here:

[http://code.google.com/p/xm4was/wiki/VisualVMHowTo](http://code.google.com/p/xm4was/wiki/VisualVMHowTo)

If you want to collect the data over a longer period of time, then you need a monitoring system. At work, I wrote a plugin for the Open Source [RHQ enterprise management system](http://www.jboss.org/rhq/) that adds support for WebSphere. I'm in the process of releasing this plugin as an [Open Source project](http://code.google.com/p/rhq-websphere-plugin/), but at the time of writing, I have not yet published the documentation and there is also no downloadable release yet. Only the source code is available right now. I will try to complete that in the next weeks. If you are interested in this project, please let me know.

# ajax - 响应文本为字符串时，jquery ajax调用返回错误

> ID：11411595
> 
> 赞同：0
> 
> 时间：2012-07-10T10:41:26.587
> 
> 标签：ajax, jquery

我正在使用以下详细信息发出 ajax 请求：

```
Request URL:http://localhost:8080/MyWebService/cars/70ced046-3061-4d9d-b9ce-7d1291d5b5c0
Request Method:DELETE
Status Code:200 OK

Request Headers
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:no-cache
Content-Type:application/json
Host:localhost:8080
Origin:http://localhost:8080
Pragma:no-cache
Proxy-Connection:keep-alive
Referer:http://localhost:8080/MyWebService/
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko)     Chrome/20.0.1132.47 Safari/536.11
X-Requested-With:XMLHttpRequest

Response Headers
Content-Length:36
Content-Type:application/json
Date:Tue, 10 Jul 2012 10:18:45 GMT
Server:Apache-Coyote/1.1 
```

但随后 ajax 调用返回带有以下 xhr、status 和错误对象的错误：

```
function(request, status, error) 

>status
"parsererror"

>error
SyntaxError
arguments: Array[0]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "unexpected_token_number"
__proto__: Error

>request
Object
abort: function ( statusText ) {
always: function () {
complete: function () {
done: function () {
error: function () {
fail: function () {
getAllResponseHeaders: function () {
getResponseHeader: function ( key ) {
isRejected: function () {
isResolved: function () {
overrideMimeType: function ( type ) {
pipe: function ( fnDone, fnFail, fnProgress ) {
progress: function () {
promise: function ( obj ) {
readyState: 4
responseText: "44550569-871d-49ae-8583-f07ee3a07832"
setRequestHeader: function ( name, value ) {
state: function () {
status: 200
statusCode: function ( map ) {
statusText: "OK"
success: function () {
then: function ( doneCallbacks, failCallbacks, progressCallbacks ) {
__proto__: Object 
```

如果响应是整数或任何其他 json，则调用可以正常进入成功函数。但如果响应是字符串 (44550569-871d-49ae-8583-f07ee3a07832) 则会出错。对于如何解决这个问题，有任何的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:52:58.730

因为您期望响应是 JSON

```
Content-Type:application/json 
```

粘贴您的 ajax 调用 javascript 部分，以便我可以为您提供更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:24:50.310

问题出在服务器端，我强制服务器返回应用程序/json：

```
@RequestMapping(method = RequestMethod.DELETE, value = "/cars/{id}", produces="application/json") 
```

这会产生以下响应标头：

```
Response Headers
Content-Length:36
Content-Type:application/json
Date:Tue, 10 Jul 2012 10:18:45 GMT
Server:Apache-Coyote/1.1 
```

现在我删除了“produces="application/json"”部分，它返回以下标题：

```
Content-Length:36
Content-Type:text/plain;charset=ISO-8859-1
Date:Wed, 11 Jul 2012 06:08:00 GMT
Server:Apache-Coyote/1.1 
```

# android - UnsatisfiedLinkError：使用 APV 解析文件（PDF 查看器）

> ID：11411598
> 
> 赞同：0
> 
> 时间：2012-07-10T10:41:33.530
> 
> 标签：android, parsing, android-ndk, apvpdf

我正在使用这个 PDF 查看器，如果我使用他的目录，它可以完美运行，但是当我将它添加到我的项目时包含错误。

```
07-10 10:37:55.541: W/dalvikvm(8425): No implementation found for native Lcom/sdos/viewPDF/PDF;.parseFile (Ljava/lang/String;ILjava/lang/String;)I
07-10 10:37:55.551: D/AndroidRuntime(8425): Shutting down VM
07-10 10:37:55.571: W/dalvikvm(8425): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-10 10:37:55.601: E/AndroidRuntime(8425): FATAL EXCEPTION: main
07-10 10:37:55.601: E/AndroidRuntime(8425): java.lang.UnsatisfiedLinkError: parseFile
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.sdos.viewPDF.PDF.parseFile(Native Method)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.sdos.viewPDF.PDF.<init>(PDF.java:218)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.sdos.viewPDF.OpenFileActivity.getPDF(OpenFileActivity.java:532)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.sdos.viewPDF.OpenFileActivity.startPDF(OpenFileActivity.java:491)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.sdos.viewPDF.OpenFileActivity.onCreate(OpenFileActivity.java:208)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.os.Looper.loop(Looper.java:123)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at android.app.ActivityThread.main(ActivityThread.java:4627)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at java.lang.reflect.Method.invokeNative(Native Method)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at java.lang.reflect.Method.invoke(Method.java:521)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-10 10:37:55.601: E/AndroidRuntime(8425):     at dalvik.system.NativeStart.main(Native Method) 
```

我试图通过我自己的项目在 pdfview2.c 文件中更改旧目录，但仍然出现相同的错误。有什么解决办法？？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:21:47.560

I guess it uses native functions, so you also need to include folder with native code to you project and build it using NDK.

# java - 从 XML 文件 java 程序中删除节点

> ID：11411604
> 
> 赞同：3
> 
> 时间：2012-07-10T10:42:00.253
> 
> 标签：java, xml

当我尝试从 java 程序中的 XML 节点中删除一个节点时，它给了我一个奇怪的问题。它正在删除备用节点。在插入新节点之前，我必须删除现有节点。我的 xml 文件是：

```
<?xml version="1.0" encoding="windows-1252" ?>
<chart>
<categories>
 <category label="3 seconds"/>
 <category label="6 seconds"/>
 <category label="9 seconds"/>
 <category label="12 seconds"/>
</categories>

</chart> 
```

我的java程序是：

```
 DocumentBuilderFactory  docFactory  = DocumentBuilderFactory.newInstance();
      DocumentBuilder docBuilder = docFactory.newDocumentBuilder();

      Document doc = docBuilder.parse(filePath);

      Node categories = doc.getElementsByTagName("categories").item(0);

      NodeList categorieslist = categories.getChildNodes();

      // if exists delete old data the insert new data.

      for (int c = 0; c < categorieslist.getLength(); c++) {

        Node node = categorieslist.item(c);
        categories.removeChild(node);
      }
    for(int i=1;i<20;i++){

    Element category = doc.createElement("category");
    category.setAttribute("label",3*i+" seconds");
    categories.appendChild(category);
  } 
```

这段代码正在删除我不知道为什么的替代节点。生成的 XML 如下所示：

```
<categories>
 <category label="6 seconds"/>
 <category label="12 seconds"/>
 <category label="3 seconds"/>
 <category label="6 seconds"/>
 <category label="9 seconds"/>
      .....
      .....
 </categories> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T14:41:57.827

每次删除一个孩子时，列表都会变短，列表不是静态集合，因此每次调用 getLength() 时都会得到实际大小

```
Node categories = doc.getElementsByTagName("categories").item(0);
NodeList categorieslist = categories.getChildNodes();
while (categorieslist.getLength() > 0) {
    Node node = categorieslist.item(0);
    node.getParentNode().removeChild(node);
} 
```

# java - Android - 如何禁用虚拟键盘中的某些键

> ID：11411608
> 
> 赞同：2
> 
> 时间：2012-07-10T10:42:37.150
> 
> 标签：java, android, keyboard

如何禁用 Android 虚拟键盘中的某些键（比如数字/符号键）？

具体来说，当用户关注标准的 android EditText 小部件时，当虚拟键盘出现时，我希望用户不能输入双引号 ( " ) 字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T12:09:00.567

> 如何禁用 Android 虚拟键盘中的某些键（比如数字/符号键）？

你不能，对不起。毕竟，输入法编辑器可能一开始就没有“按键”。

> 具体来说，当用户关注标准的 android EditText 小部件时，当虚拟键盘出现时，我希望用户不能输入双引号 ( " ) 字符。

然后，您将不得不通过 阻止输入`EditText`，`InputFilter`如下所述：[How do I use InputFilter to limit characters in an EditText in Android?](https://stackoverflow.com/questions/3349121/how-do-i-use-inputfilter-to-limit-characters-in-an-edittext-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:45:22.520

你为什么不使用`android:inputType="..."`你的 EditText

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)

# asp.net - 如何在不同线程中更新 ASP.NET 中文本框中的值？

> ID：11411613
> 
> 赞同：0
> 
> 时间：2012-07-10T10:43:09.920
> 
> 标签：asp.net, multithreading

我正在使用 asp.net 中的串行端口设备。它在与 UI 线程不同的线程中工作。在这种情况下，我想访问我的文本框并更改其值。

```
void posInfo(string smth)
{
txtUI.text = smth;
} 
```

这给了我例外。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:46:16.897

HTTP 是断开连接的协议，您的线程将发送数据的时间将不会连接到客户端您将不得不使用一些池解决方案，使用**[带有 Ajax 的 javascript 计时器](http://ajax.net-tutorials.com/controls/timer-control/)**来更新文本框 asp.net。或者您可以使用**[Web scoket](https://stackoverflow.com/questions/9119900/websockets-tutorial-on-asp-net)**来更新 GUI

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T20:53:44.310

页面已呈现后，您将无法更改文本框的值。您必须使用 ajax 或类似 signalr 之类的东西来完成。

# c# - 如何在 Windows 应用程序中获取 shift+tab 的键码？

> ID：11411618
> 
> 赞同：-3
> 
> 时间：2012-07-10T10:43:21.373
> 
> 标签：c#, winforms, textbox

嗨，有一个 Windows 应用程序，当按下`shift`+时，它应该聚焦到前一个文本框，背景颜色会发生变化。`tab`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:48:36.683

```
e.Modifiers == Keys.Shift && e.KeyCode == Keys.Tab 
```

在事件处理程序方法中，可能使用 if 条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:50:23.750

尝试这个，

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Tab && e.Shift)
    {

    }
} 
```

# css - css - webkit 下的字母间距 - 任何解决方法？

> ID：11411620
> 
> 赞同：3
> 
> 时间：2012-07-10T10:43:33.467
> 
> 标签：css, webkit, letter-spacing

我正在努力解决像 safari 这样的 webkit 浏览器不支持小于 1 像素的字母间距的事实。有什么解决办法吗？我正在考虑转换我的字体并将字母间距直接添加到该新字体中：如果有支持它的转换器，这会起作用吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:46:56.880

你总是可以使用`em`'s.

`letter-spacing: 0.5em;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:54:22.487

我在 Safari 和 Chrome（Win 7）上测试了以下内容：

```
<style>
.foo { letter-spacing: 0.7px; }
</style>
Hello world! This is sample text.
<div class=foo>Hello world! This is sample text.</div> 
```

最初差异几乎不明显，但如果您按 Ctrl + 缩放，您会看到第二个文本明显变宽，因为字母间距略大。

实施的质量可能会引起争论，但支持是存在的。

另一方面，如果您不喜欢字体的自然外观，因为间距是设计师的决定，请使用不同的字体。机械地增加文本中的所有字母间距表示对字体设计的不信任，并且是一种粗略的工具。不过，在特殊情况下，短文本可能需要字母间距——但小于一个像素在那时几乎没有用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T10:50:19.763

他们当然会。尝试`0`,`-1px`等。

演示：http: [//jsbin.com/ovepan/edit#html,live](http://jsbin.com/ovepan/edit#html,live)

输出：

![](../Images/10fe4b095464fb6aa27b7a5e16703859.png)

HTML：

```
<p id="one">Letter spacing 1px</p>
<p id="zero">Letter spacing 0px</p>
<p id="negative-one">Letter spacing -1px</p> 
```

CSS：

```
#one {letter-spacing: 1px }
#zero {letter-spacing: 0px }
#negative-one {letter-spacing: -1px } 
```

# django - 在 admin.py 中为搜索字段添加 help_text

> ID：11411622
> 
> 赞同：14
> 
> 时间：2012-07-10T10:43:39.907
> 
> 标签：django, django-admin

如何在 django 中为我在 admin.py 中使用的搜索字段添加 help_text：

```
class ProfileAdmin(admin.ModelAdmin):

    list_display = ('First_Name','Last_Name','Registeration_No','University','Batch','Sex')

    search_fields = ('First_Name','Last_Name','Registeration_No','University','Batch') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2018-10-30T14:49:03.497

您可以在 ModelAdmin 中添加此 javascript

```
window.onload = function() {
    document.getElementById("searchbar").placeholder = "search with ";
}; 
```

ModelAdmin 会像

```
class SomeModelAdmin(admin.ModelAdmin):

    class Media:
        js = ('js/admin/custom_admin.js',)
        # css = { 'all': ('css/admin/custom_admin.css',)} 
```

`static/js/admin`在目录中添加 custom_admin.js 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T14:14:26.857

您可以覆盖管理模板`admin/search_form.html`以添加帮助文本；
或者加载一个javascript文件，它可以找到插入帮助文本的dom节点，在`ProfileAdmin.Media`，检查[文档](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#modeladmin-media-definitions)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-22T19:03:06.750

最简单的解决方案是使用 jquery：

$("#searchfield_id").attr('title', "点击这里搜索某人")

或者，您可以直接将其添加到 HTML 本身。将鼠标悬停在搜索字段上时会显示标题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-12-24T14:16:56.280

只为我自己回答！

1.  为我的子类添加一个`attr`命名。`search_fields_hint``ModelAdmin`
2.  编辑 admin.templates.admin.search_form.html
3.  将属性添加`placeholder="{{ cl.search_fields_hint }}`到`<input>`.
4.  编辑 admin.views.main.py，ChangeList 类
5.  添加`self.search_fields_hint=search_fields_hint`到`__init__`.
6.  编辑 admin.options.py，大约第 1468 行，将参数添加`self.search_fields_hint`到 ChangList。

# algorithm - 具有自定义成本函数的最小成本最大流量算法

> ID：11411624
> 
> 赞同：0
> 
> 时间：2012-07-10T10:43:44.930
> 
> 标签：algorithm, graph, flow

最小成本最大流量算法可以使用什么样的成本函数？

是否有可能具有类似于以下的成本函数：

*   如果边上的流在 [1, X] 之间，则成本 = FixedCost + C1 + flow * cost_per_flow[C1]
*   如果边上的流在 [X + 1, Y] 之间，则成本 = FixedCost + C2 + flow * cost_per_flow[C2]
*   等等

这会以任何方式改变算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:52:50.107

您可以将固定成本相加，然后将其从等式中删除。然后，您将每条边分成 2 条边，每条边都有适当计算的成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:01:23.177

最小成本最大流量算法只是特定类型线性程序的求解器。

使线性规划有效求解的是凸性：在这种情况下，如果您有两个可行的流 F 和 G，那么对于 [0, 1] 中的所有 t，流 tF + (1-t)G 是可行的并且具有成本（ tF + (1-t)G) ≤ t 成本(F) + (1-t) 成本(G)。对于您的目标，这基本上意味着 [1, X] 中的 FixedCost 为 0，C1 ≤ C2，[X + 1, Y] 中的 FixedCost 为 (C1 - C2)X ≤ 0。看起来像这样：

```
6|        .
5|       .
4|      .
3|     .
2|   .
1| .
0.----------
 0 1   X 
```

对您来说，[1, X] > 0 中的 FixedCost 可能很重要，但这会使问题成为 NP 难题。图中的 Steiner 树的一个缩减是使每个边的容量无限，并花费由 Steiner 树问题为第一个单元指定的权重，然后为 0。使 k - 1 个 Steiner 终端中的一个成为容量为 k - 1 的源，其他为容量为 1 的接收器。请求最便宜的 k - 1 单位流量。

# java - 如何将属性值保留在会话范围内？

> ID：11411625
> 
> 赞同：0
> 
> 时间：2012-07-10T10:43:51.120
> 
> 标签：java, spring, jakarta-ee

我正在使用弹簧。我有一个外部化的属性文件。我正在加载它，如下所示。

```
 <context:property-placeholder location="file:///C:/some.properties"/> 
```

现在如何将会话中的属性保留为键值对？

我尝试编写一个扩展 ServletContextListener 的侦听器。

```
public class Sample implements ServletContextListener {
@Override
    public void contextInitialized(ServletContextEvent event) {
//here i tried to get the values of properties file as below.
InputStream stream = event.getServletContext().getResourceAsStream("C:\\some.properties");
//But here stream is coming as null

}

} 
```

我在这里错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:48:15.597

`SetvletContext`'s`contextInitlalized()`在应用程序成功加载时初始化 servlet 上下文时调用，

如果您想将其属性文件存储在应用程序上下文中，您可以将其放入

```
 event.getServletContext().setAttribute("global_properties", propertiesInstance); 
```

如果您希望每个会话都使用它，那么您需要将其挂接到[`HttpSessionListener`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html)'s [`sessionCreated()`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSessionListener.html#sessionCreated%28javax.servlet.http.HttpSessionEvent%29)方法中

所以把经常使用和跨应用程序共享`applicationscope`的数据放在里面，把限制在一个会话但经常使用的数据放在里面`session`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:06:26.647

我建议使用与 ServletContextListner 通信的 PropertyPlaceHolderConfigurer。此类 PropertyPlaceHolderConfigurer 有一个方法调用 processProperties，您可以在其中获取所有属性的映射。

```
 @Override
  protected void processProperties(ConfigurableListableBeanFactory beanFactoryToProcess,
  Properties props) throws BeansException {
  super.processProperties(beanFactoryToProcess, props);
  resolvedProps = new HashMap<String, String>();
  for (Object key : props.keySet()) {
      String keyStr = key.toString();

      resolvedProps.put(keyStr, parseStringValue(props.getProperty(keyStr), props,
              new HashSet()));
  }
} 
```

在侦听器 contextInitialized() 中，您可以这样做：

```
ServletContext servletContext = sce.getServletContext();
  WebApplicationContext context = WebApplicationContextUtils
          .getRequiredWebApplicationContext(servletContext);
  ExposablePropertyPlaceHolder configurer =(ExposablePropertyPlaceHolder)context.getBean(propertiesBeanName);
  sce.getServletContext().setAttribute(contextProperty, configurer.getResolvedProps()); 
```

其中 ExposablePropertyPlaceHolder 是扩展 PropertyPlaceHolderConfigurer 的类。

# jquery - jquery属性控制和按钮点击

> ID：11411626
> 
> 赞同：4
> 
> 时间：2012-07-10T10:43:56.660
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-3-areas

```
 <script type="text/javascript">
        $(function () {
            $('form').submit(function () {
                $.ajax({

                    url: this.action,
                    type: this.method,
                    data: $(this).serialize(),
                    success: function (result) {
                        $('#popUp').html(result);
                    }
                });
                return false;
            });
        });
</script>
 <script type="text/javascript">
     $(function () {
         $('form').submit(function () {
             $("#popUp").dialog(
             {
                title: $(this).attr("data-dialog-title"),
                 minWidth: 500,

             );

         });
     });

    </script> 
```

上面的代码在插入页面中给出了一个按钮单击的弹出框，但是如何控制弹出框的属性，例如可调整大小，modal：true，false，以及如何通过单击另一个按钮来关闭此弹出框局部视图称为 _error。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:56:51.263

```
<script type="text/javascript">

 $(function () {
     $('form').submit(function () {
         $("#popUp").dialog(
         {
            title: $(this).attr("data-dialog-title"),
             minWidth: 500,
             modal: true/false,
             resizable: true/false,
             buttons: { "Ok": function() { $(this).dialog("close"); }
         );
     });
 });

</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:03:27.070

这应该可以，就像对我一样，在您的页面中输入此脚本或创建一个测试页面，以便您可以使用它：

```
<script>
        $("#dialog-confirm").dialog({
            resizable: true,
            height: 340,
            width: 600,
            autoOpen: false,
            modal: true,

            buttons: {
                Cancel: function () {
                    $(this).dialog("close");
                }
            }
        });

</script> 
```

哪个应该操作类似于应该在您的页面中的 div：

```
<div id="dialog-confirm" title="Confirm?">
    <p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span>
        Confirm.<br />
        <div class="preview">
            Message...

        </div>
        <br />Confirm?</p>
</div> 
```

我使用[http://www.jquery.com上的](http://www.jquery.com)[对话框](http://docs.jquery.com/UI/Dialog)文档找到了这个

您可以更改按钮的名称，将其替换为您认为合适的名称，如下所示：

```
Cancel: function () {
    $(this).dialog("close");
} 
```

变成：

```
"New value here": function () {
    $(this).dialog("close");
}); 
```

# xml-parsing - 使用 JDOM 将文本解析为 XML

> ID：11411627
> 
> 赞同：0
> 
> 时间：2012-07-10T10:43:58.233
> 
> 标签：xml-parsing, jdom

我是新手，需要你的帮助。

我正在将文本转换为 XML（带有一些额外的属性）

我的文字是 SPLINE(N, -1.151,1.002, -0.161,0.997, 0.840,-0.004, OUTLINED)

我需要在 XML 中使用 JDOM，如下所示

```
 <SPLINE n="3" x1="0.840" y1="-1.004" x2 ="-0.161" y2 ="0.997"  x3 ="0.840" y3"-0.004"  prim_style="OUTLINED" /> 
```

如果 N 是固定的，我可以简单地转换，在上面的例子中 N= 3 ，因此有 3 个 x 和 3 个 y 坐标。但是，如果我使用下面的 for 循环，则结果并不例外。任何帮助都会很棒

```
 root.addContent(child);
                document.setContent(root);

                            int i = Integer.parseInt(temp_token[2]);
                            int count = i * 2 + i + 4;

                            for (int j = 0; j <= count - 5; j = j + 3) {

                                String x = null;
                                String y = null;

                                Element SPLINE = new Element("SPLINE")
                                        .setAttribute("n", temp_token[2])
                                        .setAttribute("x", temp_token[j + 4])
                                        .setAttribute("y", temp_token[j + 5])
                                        .setAttribute("prim_style",
                                                temp_token[count]);

child.addContent(SPLINE); 
```

从上面的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:28:45.497

你不应该在循环内创建 SPLINE 元素，它应该在外面......（变量名应该是小写的）

```
root.addContent(child);
document.setContent(root);

int i = Integer.parseInt(temp_token[2]);
int count = i * 2 + i + 4;

Element spline = new Element("SPLINE");
child.addContent(SPLINE);
spline.setAttribute("n", temp_token[2]);

int pair = 0;
for (int j = 0; j <= count - 5; j = j + 3) {
    pair++;
    spline.setAttribute("x" + pair, temp_token[j + 4]);
    spline.setAttribute("y" + pair, temp_token[j + 5]);
}
spline.setAttribute("prim_style",temp_token[count]); 
```

# tomcat - JNDIRealm/Tomcat 组/角色搜索为经过身份验证的用户

> ID：11411629
> 
> 赞同：1
> 
> 时间：2012-07-10T10:43:59.437
> 
> 标签：tomcat, jndi

如何使 tomcat/jndi 使用身份验证用户绑定到 ldap 以进行组搜索？

问题：

*   servlet 的简单的基于 FORM 的 Tomcat/jndiRealm/ldap 身份验证
*   *已设置，*以便用户正确进行身份验证（绑定模式）
*   但是，ldap 服务器不允许匿名绑定查看我感兴趣的组。current-authenticating-user 可以查看这些组
*   我不想使用 connectionName 和 connectionPassword

我希望由当前正在进行身份验证的用户完成角色搜索，但即使在绑定模式下，wireshark 也会显示在初始用户身份验证之后完成了匿名绑定。

可行的解决方法，但不是我想要的：

*   使用可以查看组的用户的 connectionName 和 connectionPassword
*   为领域设置一个 commonRole

（我**无法**控制 ldap 服务器）

从我的（非工作）server.xml

```
<Realm className="org.apache.catalina.realm.JNDIRealm"
   connectionURL="ldap://localhost:389"
   userPattern="cn={0},ou=people,o=myO,dc=myDc,dc=com"
   roleBase="ou=groups,o=myO,dc=myDc,dc=com"
   roleName="cn"
   roleSearch="member={0}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T12:54:59.373

如果您对 LDAP 服务器没有任何控制权并且 Tomcat 的 JNDIRealm 确实如此，那么您似乎别无选择，只能使用连接名称/密码。检查 JNDIRealm 源代码很容易：它不是一个大文件。

# c# - 无法从设置文件中读取

> ID：11411630
> 
> 赞同：0
> 
> 时间：2012-07-10T10:44:02.177
> 
> 标签：c#, application-settings, settings.settings

我创建了一个控制台应用程序，并通过 Add -> New Item -> Settings 文件添加了一个 Settings1.settings 文件。当我尝试访问 Properties.Settings 时，智能感知无法识别属性。

但是当我尝试通过属性 -> 设置 -> 创建设置文件添加设置文件时，智能感知显示属性。

此外，手动创建的设置文件出现在我的解决方案资源管理器中，但通过属性 -> 设置 -> 创建设置文件创建的文件出现在单独的路径“属性 -> 设置”中。

两者有什么区别？？？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:51:18.503

设置作为子项存在于 Properties 命名空间下，因此您可以让智能感知正常工作

在设置中，您可以为范围创建类型变量，例如用户或应用程序

一个巨大的例子是我可以将我的应用程序设置保存在一个变量中

# symfony - 为 Symfony2 表单域设置默认显示值

> ID：11411632
> 
> 赞同：0
> 
> 时间：2012-07-10T10:44:18.810
> 
> 标签：symfony, symfony-forms

我有一个表格，里面有一些只显示的字段。这些字段通常是 ​​DateTime 值...但是当为空/null 时，我想显示字符串“从不”。

编辑：
更明确地说：该字段应显示数据库中的 DateTime 值，如果为 null，则应显示字符串“从不”。

我该怎么做？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:36:58.203

您可以使用[Symfony2 数据转换](http://symfony.com/doc/current/cookbook/form/data_transformers.html)器：

*   在`transform()`函数中，您可以检查您的日期是否是`null`，然后返回“从不”字符串。否则返回您的日期的**字符串表示形式。**
*   在`reverseTransform()`函数中，您可以检查字符串是否为“从不”，然后构造一个`null` `DateTime`对象。否则，你将给定的字符串转换成一个有效的`DateTime`对象，比如 'strtotime()` PHP 函数。

# mysql - 此任务的正确数据库设计

> ID：11411633
> 
> 赞同：-1
> 
> 时间：2012-07-10T10:44:21.890
> 
> 标签：mysql, database, database-design

好的，所以我将有至少 2 张桌子，可能是 3 张。

数据将如下所示：

首先，搜索词列表。这些搜索词与程序中的任何其他内容无关（仅涉及获取输出，根本不处理此数据），因此我计划将它们分别存储在自己的表中。

然后事情变得更加棘手。我有一个单词列表，每个单词都可以属于多个类别。例如，如果你有“悲伤”，它可能属于“焦虑”和“悲剧”，就像“快乐”可能属于“快乐”和“满足”一样。

设置一个包含三列的表会更好：一个 UID、一个单词和一个类别，还是设置两个表更好：两者都有 UID，一个带有单词，一个带有类别，并将它们设置为外键？

最终的作用是在给定的时间段内生成给定类别中的单词数量。

如果对任何人有帮助，我将使用 MySQL 和 Python (MySQLdb)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:51:19.780

忽略您的“搜索词”表（因为它似乎与问题没有任何相关性），我可能会这样做类似于此

```
words (w_id int, w_word varchar(50))

categories (c_id int, c_category)

wordcategories (wc_wordid int, wc_catid int) 
```

将 wordcategories 中的 id 中的外键约束添加到 word 和 categories 表中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:49:21.323

在没有大量细节的情况下，我将按以下方式进行设置：

```
Word Table
id int PK
word varchar(20)

Category Table
id int PK
category varchar(20)

Word_Category Table
wordId int PK
categoryId int PK 
```

第三个是单词和类别之间的连接表。该表将包含单词和类别表的外键约束。

# java - 将字符串转换为泛型类中的数字

> ID：11411640
> 
> 赞同：1
> 
> 时间：2012-07-10T10:44:44.090
> 
> 标签：java, generics, casting, javafx-2

我有一个类用于保存用户可以通过 GUI 更改的数值。GUI 有一个 TextField（JavaFX 的），他们可以在其中写入所需的值。

因为我希望这个类是灵活的，所以我使用这样的泛型来实现它：

```
public class ConfigurableNumericField <T extends Number> {

    private T value;
    //...
    public void setValue(T value){ 
        this.value = value;
    }
} 
```

我创建了一个这样的对象：

```
ConfigurableNumericField <Integer> foo = new ConfigurableNumericField <> ( /*...*/ ); 
```

问题是 TextField 返回 a `CharacterSequence`（可以转换为`String`）。但是，即使所有继承自的类`Number`都有该`valueOf`方法，`Number`也没有它。

因此，当我尝试`setValue()`从`String`TextField 到类本身时。我得到一个`java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Number`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:50:10.517

当泛型时，您可以使事物变得如此通用以至于它们不再有意义。

在您的情况下，您需要一个 setValue ，它将采用 String 以便您可以将其转换为适当的类型。这样做的问题是没有办法通用地做到这一点，因为通用类型`foo`在运行时不可用。

我将有两个子类，一个用于使用 a 的整数，`Long`另一个用于使用 a `Double`or `BigDecimal`。这将支持您可能需要的大多数数字类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T10:47:27.183

你真的不能。所有可能的方法最终都涉及每种数字类型的特殊情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T10:47:57.413

这可能有问题的原因是未来/自定义`Number`实现可能不提供此方法，因为它不是合同的一部分。

以下是我想到的两个选项：

*   使用反射来调用`setValue`方法。

*   使用一些`instanceof`检查和强制转换来覆盖您需要支持的数字。

# java - hibernate中查询参数为null或为空如何处理？

> ID：11411641
> 
> 赞同：9
> 
> 时间：2012-07-10T10:44:51.287
> 
> 标签：java, hibernate, jpa

我正在使用 JPA，休眠 3。

```
String sqlQuery = " FROM TraceEntityVO  where lotNumber =:lotNumber and mfrLocId=:mfrLocId and mfrDate=:mfrDate and qtyInitial=:qtyInitial and expDate=:expDate";
Query query = entityManager.createQuery(sqlQuery)
                .setParameter("lotNumber", traceEntityVO.getLotNumber())
                .setParameter("mfrLocId", traceEntityVO.getMfrLocId())
                .setParameter("mfrDate", traceEntityVO.getMfrDate())
                .setParameter("qtyInitial", traceEntityVO.getQtyInitial())
                .setParameter("expDate", traceEntityVO.getExpDate()); 
```

当没有空值或空值时，此查询就像一个魅力。***但是对于traceEntityVO.getLotNumber()、traceEntityVO.getMfrLocId()、traceEntityVO.getExpDate()，***可能存在 null 或空值。

 *在这种情况下，值 'null' 或 '' 会根据变量而不是**null**条件进行检查。当我不确定参数值是空还是空时，我该如何处理？

***我不想根据值为空或 null 的值动态构造查询。***

这可能吗？

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:19:27.767

我认为如果没有动态查询，您真的无法做到这一点。

[但是，使用标准 API ( hibernate](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/querycriteria.html) ) ( [JPA](http://docs.oracle.com/javaee/6/tutorial/doc/gjitv.html) )构建这样的查询很容易，您考虑过吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T22:02:35.223

我希望以下代码可以解决您的问题。假设 getMfrDate 和 getExpDate 将返回 Date 对象和其他 Number 或 String 对象。但是您可以根据返回类型修改 IsEmpty。

```
String sqlQuery = " FROM TraceEntityVO  where lotNumber :lotNumber 
and mfrLocId :mfrLocId and mfrDate :mfrDate and qtyInitial :qtyInitial and 
expDate :expDate";

Query query = entityManager.createQuery(sqlQuery)
            .setParameter("lotNumber", isEmpty(traceEntityVO.getLotNumber()))
            .setParameter("mfrLocId", isEmpty(traceEntityVO.getMfrLocId()))
            .setParameter("mfrDate", isEmpty(traceEntityVO.getMfrDate()))
            .setParameter("qtyInitial", isEmpty(traceEntityVO.getQtyInitial()))
            .setParameter("expDate", isEmpty(traceEntityVO.getExpDate()));

private String isEmpty(Object obj) {

    if(obj!=null) {

        if (obj instanceof java.util.Date) {
            return " = to_date('"+obj.toString()+"') ";
        } else if(obj instanceof String) { 
            return " = '"+obj.toString()+"' ";
        } else if (obj instanceof Integer) {
            return " = "+obj.toString()+" ";
          }
    } 

    return new String(" is null ");
 } 
```*

# c# - 迁移到 .Net 4：在 xaml 中添加事件时引发空引用异常

> ID：11411642
> 
> 赞同：7
> 
> 时间：2012-07-10T10:44:56.070
> 
> 标签：c#, xaml, .net-4.0

在我的工作地点，我们最近一直在将我们的代码库从 .Net 3.5 升级到 .Net 4 (C#)。遇到的大多数问题都已解决，但是我无法弄清楚这一问题。我们通过混合 xaml 和后面的代码（基于开发人员的偏好）来初始化控件和页面，但是一个页面在打开时会抛出*NullReferenceException 。*这是（许多控件之一）抛出的代码片段。

**所有抛出异常的代码都在 DataTemplate**中（*我认为这可能是相关*的）

```
<TextBox x:Name="Values" Grid.Column="1" Grid.Row="0" Margin="5,2,5,2"
  Text="{Binding ElementName=Descriptions, Path=SelectedValue, UpdateSourceTrigger=PropertyChanged,
  Mode=TwoWay,        
  Converter={StaticResource EmptyConverter}}"
  GotFocus="Column_GotFocus"
  MinWidth="100"
  CharacterCasing="Upper"
  Visibility="{Binding Path=IsValueVisible, Converter={StaticResource VisibilityConverter}}" 
/> 
```

现在在这里，抛线是：

```
GotFocus="Column_GotFocus" 
```

Column_GotFocus 在代码隐藏文件中。更多事实：在迁移之前我们没有任何问题，异常不断抛出，并且有三个不同的事件导致了这个问题。

抛出的三个事件是：

```
GotFocus="Column_GotFocus"
SelectionChanged="Descriptions_SelectionChanged"
Click="Search_Click" 
```

删除这些可以完全解决我们的问题，但显然会导致软件出现功能问题。有谁知道可能导致这些问题的原因是什么？

**编辑：**

抱歉，澄清一下：从不调用事件处理程序，添加的 xaml 事件处理程序（例如，GotFocus="Column_GotFocus"）似乎是引发异常的地方。

例外是：

```
System.NullReferenceException occurred
  Message=Object reference not set to an instance of an object.
  Source= <assembly/namespace>
  StackTrace:
       at <assembly/namespace>.<Class>.System.Windows.Markup.IStyleConnector.Connect(Int32 connectionId, Object target) in <XamlFilePath>:line 291
  InnerException: 
```

**编辑2：**

方法处理程序是：

```
 private void Column_GotFocus(object sender, RoutedEventArgs e)
    {
        ContentPresenter columnContentPresenter =(DependencyObject)sender).FindParent<ContentPresenter>();

        Column column = (Column)columnContentPresenter.Content;

        string message = string.Format("{0} ({1})", column.Name, column.Field);

        ModuleDescriptor.UpdateStatusBar(message);
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T08:05:45.380

This is a framework bug and it is already fixed, please download the hot fix to overcome the issue!!

[http://support.microsoft.com/kb/2464222](http://support.microsoft.com/kb/2464222)

Bug report is here:

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/629bfcc5-2005-4947-a001-993524798b52](http://social.msdn.microsoft.com/Forums/en/wpf/thread/629bfcc5-2005-4947-a001-993524798b52)

Download the file here

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-10T11:48:36.270

我认为问题是您正在尝试在样式设置器中添加事件处理程序。这是禁止的（出于晦涩的原因）...您应该改用 EventSetters

例如：

```
<Style x:Key="YourSyleName" TargetType="{x:Type CtrlType}">
    <EventSetter Event="PreviewMouseLeftButtonDown" Handler="dgClient_PreviewMouseLeftButtonDown"/>
    <EventSetter Event="Loaded" Handler="GridContent_Loaded"/>
</Style> 
```

# php - GregorianCalendar 的 Json DateTime 对象

> ID：11411646
> 
> 赞同：1
> 
> 时间：2012-07-10T10:45:17.893
> 
> 标签：php, android, json, datetime, jackson

我有一个使用杰克逊库将 Json API 回调转换为自定义对象的映射问题。

我有我的用户自定义类：

```
public class User {
    protected String id;
    protected GregorianCalendar registredAt;
    protected String username;
    protected Team team;

    public User() {

    }

    public User(String id, GregorianCalendar registredAt, String username, Team team) {
        this.id = id;
        this.registredAt = registredAt;
        this.username = username;
        this.team = team;
    }

    public User(HashMap<String, Object> attributes) {
        this.id = (String) attributes.get("id");
        this.registredAt = (GregorianCalendar) attributes.get("registredAt");
        this.username = (String) attributes.get("username");
        this.team = (Team) attributes.get("team");
    }
} 
```

这是我的回调：

```
{
    id: "4feab37c5600bbd56f000132",
    registredAt: {
        date: "2012-06-27 09:17:15",
        timezone_type: 3,
        timezone: "Europe/Paris"
    },
    username: "John Doe",
    team: {
        id: "4feab37c5600bbd56f000130",
        indice: 1,
        name: "John Doe's Team",
        score: 200
    }
} 
```

然后，我尝试初始化一个用户对象：

```
// Code from a doInBackground() method of a custom AsyncTask.
URL completePath = new URL(apiBaseURL + "api/user/4feab37c5600bbd56f000132/show");
APIconnection = (HttpURLConnection) completePath.openConnection();
APIconnection.setDoInput(true);
APIconnection.connect();
callbackParser = jsonFactory.createJsonParser(APIconnection.getInputStream());
response = objectMapper.readValue(callbackParser, User.class);
// Catch a JsonMappingException :
Can not deserialize instance of java.util.Calendar out of START_OBJECT token at [Source: org.apache.harmony.luni.internal.net.www.protocol.http.FixedLengthInputStream@4082c7a0; line: 1, column: 33] (through reference chain: classes.models.User["registredAt"]) 
```

我认为问题在于回调 registredAt 对象是 json_encoded PHP \DateTime 实例...我应该更改 registredAt Java User 对象的类型吗？或者我的构造函数中缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T19:48:52.507

您应该使用标准的 ISO-8601 字符串表示日期和日历；`JsonDeserializer`或者，如果您想使用 JSON 对象，请为`GregorianCalendar`类型编写自己的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:40:08.810

最后，我做了这样的事情来解决我的问题：

```
public User(HashMap<String, Object> attributes) {
    this.id = (String) attributes.get("id");
    HashMap <String, Object> registredAt = (HashMap<String, Object>) attributes.get("registredAt");
    IMDateFormatter formatter = new IMDateFormatter();
    this.registredAt = formatter.getCalendarFromJson((String) registredAt.get("date"));
    [...]
} 
```

和 IMDateFormatter 以简单的方式格式化我的日期：

```
public class IMDateFormatter extends DateFormat {
    public IMDateFormatter() {
    }

    @Override
    public StringBuffer format(Date arg0, StringBuffer arg1, FieldPosition arg2) {

        return null;
    }

    @Override
    public Date parse(String dateFromJson, ParsePosition arg1) {

        return null;
    }

    public GregorianCalendar getCalendarFromJson(String dateFromJson) {
        GregorianCalendar calendarFromJson = null;

        try {
            GregorianCalendar tmpCalendar = new GregorianCalendar();
            SimpleDateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.FRANCE);
            tmpCalendar.setTime(df.parse(dateFromJson));
            calendarFromJson = tmpCalendar;
        }
        catch (NullPointerException NPE) {
            NPE.printStackTrace();
        }
        catch (ParseException PE) {
            PE.printStackTrace();
        }

        return calendarFromJson;
    }
} 
```

# c# - 为什么asp.net中的ReportViewer没有RenderingComplete事件？

> ID：11411650
> 
> 赞同：0
> 
> 时间：2012-07-10T10:45:29.953
> 
> 标签：c#, asp.net, reporting-services, report-viewer2010

我在 ASP.NET 中使用 ReportViewer。在 msdn 中，它说 ReportViewer 有一个 RenderingComplete 事件。这是文档：http: [//msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.reportviewer.renderingcomplete](http://msdn.microsoft.com/en-us/library/microsoft.reporting.winforms.reportviewer.renderingcomplete)

但我在 Visual Studio 2010 的 ReportViewer 事件列表中找不到它。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T21:52:39.000

没有真正的“问题”。此事件仅存在于 ReportViewer 的*WinForms*版本。对于*WebForms*版本，[没有类似的成员](http://msdn.microsoft.com/en-us/library/microsoft.reporting.webforms.reportviewer_members)。由于您提到您使用的是 ASP.NET，因此您使用的是后者 ReportViewer

WebForms 有一个没有意义，因为 WebForms 中的事件的[工作方式与 WinForms 中的有所不同](http://msdn.microsoft.com/en-us/library/at2tetf6%28v=vs.80%29.aspx)。

# c# - 通过 SqlBulkCopy c# 保存 UTF8 字符串

> ID：11411653
> 
> 赞同：1
> 
> 时间：2012-07-10T10:45:49.450
> 
> 标签：c#, sql, utf-8, sqlbulkcopy, nvarchar

我有这个 Sql 查询：

```
INSERT INTO myTable (myField) VALUES (N'Thermal Oxide: 0 Å to 40 μm') 
```

我想通过 SqlBulkCopy 像这样执行它：

```
DataTable myDataTable=myDb.getData("select top 1* from myTable").Clone();
DataRow dr = myDataTable.NewRow();  
dr["myField"] ="N'Thermal Oxide: 0 Å to 40μm'";
myDataTable.Rows.Add(dr);
this.openCon();
using (SqlBulkCopy bulkCopy = new SqlBulkCopy(con))   {
    bulkCopy.DestinationTableName = dt.TableName;
    bulkCopy.BulkCopyTimeout = 100;
    bulkCopy.WriteToServer(myDataTable);
}   this.closeCon(); 
```

它工作完美，但我的问题是：我在哪里可以初始化“N”前缀？也许没有必要？

谢谢，陈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:19:40.377

只是：

```
dr["myField"] = "Thermal Oxide: 0 Å to 40μm"; 
```

`N'...'`仅TSQL中的**文字需要；**但是由于您正在获取*数据*（不是 TSQL），因此您无需担心。在 的情况下`SqlBulkCopy`，它将以原始格式传输到服务器，而不是直接作为 TSQL。

在适配器或 ORM 更常见的情况下，库要么（很可能）使用参数，要么担心自身的转义。

也许还应该注意，添加 1 行过孔`SqlBulkCopy`是多余的。但它应该工作。

# extjs - Extjs 自定义 TreeGrid 行 CSS

> ID：11411656
> 
> 赞同：2
> 
> 时间：2012-07-10T10:45:59.687
> 
> 标签：extjs, extjs4, extjs4.1

有没有办法在树网格的子级别上应用替代行 css？

目前treePanel viewConfig 上的stripeRows 配置只是使所有内容变为灰色和白色，但很难区分子行和父行。

理想情况下，我想让父对象以一种方式交替颜色，而子行以另一种方式交替颜色。

我正在考虑使用“getRowClass”方法编写一个函数来手动更新行类。我想知道是否有更清洁的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-14T20:33:31.797

getRowClass 看起来很适合执行行属性更改。您可以使用 getDepth() 函数获取节点的深度：

```
var grid = Ext.create ('Ext.tree.Panel', {
    xtype: 'tree-grid',
    viewConfig: {
        getRowClass: function(record, rowIndex, rowParams, store) {
            return 'node-depth-' + record.getDepth()
        }
    }
... 
```

并使用 css：

```
.node-dept-1 .x-grid-cell { 
    background-color: white; 
}
.node-depth-2 .x-grid-cell { 
    background-color: #dddddd;
}
... 
```

[在这里](http://skirtlesden.com/articles/styling-extjs-grid-cells)找到的解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T01:15:00.800

我在模型上使用 iconCls 属性通过图标区分行。这不仅具有分离父/子行而且还分离子行本身的额外好处。

我使用模型映射技巧为我提供了不同的行类型值，如下所示：

```
{name:'iconCls', mapping:'type.name'} 
```

然后还添加了一个 css 类来支持不同的类型名称：

```
.cables, .Cable {
    background-image: url(../images/silk/cables.jpg) !important;
} 
```

希望这可以帮助。

# android - 如何在按钮按下时查看通话记录？

> ID：11411664
> 
> 赞同：0
> 
> 时间：2012-07-10T10:46:34.223
> 
> 标签：android, calllog

我在我的 XML 文件上创建了一个按钮。我想单击该按钮，以便显示 Android 设备的通话记录。

*   我已经检查[了 how-make-call-log-app-in-android](https://stackoverflow.com/questions/10970732/how-make-call-log-app-in-android?rq=1)但我仍然不确定如何在单击按钮时显示通话记录，

*   谁能告诉我如何去做。

这是我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:baselineAligned="true"
    android:orientation="horizontal" >  

    <Button
        android:id="@+id/btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="SEARCH" />
</LinearLayout> 
```

在我的代码下面，但有一些错误。我还没有设置我的按钮`OnClickListener`：

```
import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.CallLog;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.provider.ContactsContract.Contacts;
import android.provider.ContactsContract.CommonDataKinds.Email;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class CallLogActivity extends Activity {
/** Called when the activity is first created. */
@Override
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
String[] projection =     newString[{CallLog.Calls.NUMBER,CallLog.Calls.DATE,CallLog.Calls.CACHED_NAME};
Uri contacts =  CallLog.Calls.CONTENT_URI;

Cursor managedCursor = managedQuery(contacts,     projection,null,null,                     CallLog.Calls.DATE + " ASC");
getColumnData(managedCursor);
}
     private void getColumnData(Cursor cur){
    try{
   if (cur.moveToFirst()) {
     String name;
     String number;
     long date;
     int nameColumn = cur.getColumnIndex(CallLog.Calls.CACHED_NAME);
     int numberColumn = cur.getColumnIndex(CallLog.Calls.NUMBER);
     int dateColumn = cur.getColumnIndex(CallLog.Calls.DATE);

     System.out.println("Reading Call Details: ");
     do {
         name = cur.getString(nameColumn);
         number = cur.getString(numberColumn);
         date = cur.getLong(dateColumn);
         System.out.println(number + ":"+ new Date(date) +":"+name);

            } while (cur.moveToNext());
          }
      }

      finally{
    cur.close();
      }
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:52:36.357

按下按钮获取 cal 日志后，您必须查询 cal 日志内容提供程序

```
Cursor c = contentResolver.query(CallLog.Calls.CONTENT_URI,DataQuery.PROJECTION, DataQuery.SELECTION, new String[]String.valueOf(rawContactId)}, null); 
```

# azure - 在 Windows Azure 网站上运行的 ASP.Net API

> ID：11411665
> 
> 赞同：3
> 
> 时间：2012-07-10T10:46:44.140
> 
> 标签：azure, asp.net-web-api, azure-web-app-service

我在 Visual Studio 2012 RC 中有一个 MVC 项目，它托管一个 MVC 网站和一个 ASP.NET API。我使用路由将请求委托给正确的控制器。

在我的本地开发机器上，网站和 api 都可以正常工作。但是，当我将更改推送到 Azure 网站时，该网站可以正常工作，但 ASP.NET Web api 返回 HTTP 500 错误。

基础站点是：[http](http://salaahtime.azurewebsites.net) ://salaahtime.azurewebsites.net 其中一个网站页面是[http://salaahtime.azurewebsites.net/website/login](http://salaahtime.azurewebsites.net/website/login)

API 的一个使用示例是[http://salaahtime.azurewebsites.net/api/salaahtime/testestablishment/2012/1](http://salaahtime.azurewebsites.net/api/salaahtime/testestablishment/2012/1)

但是，这会返回 HTTP 500。

我有

*   更新了我的项目以使用 .net 4.0。默认情况下，它设置为 .net 4.5，它不适用于 Azure 网站
    *   删除了仅适用于 .net 4.5 的 Entity Framework 5.0 参考

任何想法为什么 api 在 Azure 网站中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:25:25.273

使用 Visual Studio 2012 的 RC 版本将项目从 4.5 备份到 4.0 时存在一个已知问题。我知道听到这会有点痛苦，但最好创建一个新项目并设置项目的框架版本到 4 而不是 4.5。这是一个应该在产品发布之前解决的问题。

希望这可以帮助。相信我，我们知道这一点，并且在我们自己的开发工作中不得不使用 4 框架重新创建项目。

此外 - 一旦 4.5 框架正式发布，Windows Azure 网站将支持 4.5 框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:26:28.160

请尝试关闭自定义错误 (http://msdn.microsoft.com/en-us/library/h0hfz6fc.aspx)，这可能会提供更详细的信息。如果您正在使用数据库，请确保您已更新连接字符串以使用 Windows Azure SQL 数据库而不是本地数据库。Web API 也有可能不被网站所支持。网站名称表明它用于构建网站，而不是网络平台。与 Web 角色和虚拟机相比，网站的功能有限。如果是这种情况，请使用 Web 角色或虚拟机。

此致，

明旭。

# ios - 如何使用适用于 iOS 的 Google Analytics SDK 跟踪引荐？

> ID：11411671
> 
> 赞同：2
> 
> 时间：2012-07-10T10:47:11.683
> 
> 标签：ios, google-analytics, tracking, referrals

在这里我可以看到如何传递跟踪值：[https ://developers.google.com/analytics/devguides/collection/ios/devguide#campaigns](https://developers.google.com/analytics/devguides/collection/ios/devguide#campaigns)

我不明白的是如何通过广告系列的链接传递推荐信息，以及当我下载应用程序时应用程序如何检索这些参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T22:43:00.670

据我所知，谷歌分析目前不支持 iOS 的推荐跟踪。Apple 应用商店是沙盒的，无法将带有引用参数的 url 传递到应用商店，然后再传递到下载的 iOS 应用。但是，有几个 sdk 通过 cookie 跟踪（Apsalar、MDotM、Flurry）和其他 sdk 通过设备标识符（Mixpanel、hasOffers）进行推荐跟踪。

# c# - C#窗体应用程序，如何在窗体上高效创建动态面板

> ID：11411676
> 
> 赞同：3
> 
> 时间：2012-07-10T10:47:29.363
> 
> 标签：c#, .net, visual-studio-2010, window

我想在我的窗口窗体应用程序中动态创建一些面板。每个面板将包含 3 个标签、一个文本框和一个按钮。现在我知道我可以通过每次声明每个变量来一次硬编码这一切，但这需要大量编码，而且显然根本没有效率。所以我的问题是：有没有一种方法可以动态地创建预定义面板，每次创建面板时都会有预定义的布局设置。所以我需要做的就是添加一个面板，每次都添加它的位置和大小，并且面板内的所有内容（如标签、文本框和按钮）都已经设置好了，它们的位置与面板本身相关联。我真的必须为此创建一个类吗？

提前感谢您阅读并抽出宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:53:23.110

创建 Windows 窗体控件或用户控件，请参阅[http://msdn.microsoft.com/en-us/library/6hws6h2t.aspx](http://msdn.microsoft.com/en-us/library/6hws6h2t.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:08:29.153

创建一个用户控件，并在其上放置您喜欢的任何内容（您的标签）。公开该控件的公共方法/属性，以便您可以控制它的内容。将尽可能多的那些放在表单上，​​它们的外观和行为都相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T11:18:51.310

这是一个你可以玩的例子......

```
for (int i = 1; i < 5; i++)
{
    var panel1 = new Panel() { Size = new Size(90, 80), Location = new Point(10, i * 100), BorderStyle = BorderStyle.FixedSingle };
    panel1.Controls.Add(new Label() { Text = i.ToString(), Location = new Point(10, 20) });
    panel1.Controls.Add(new Label() { Text = i.ToString(), Location = new Point(10, 40) });
    panel1.Controls.Add(new Label() { Text = i.ToString(), Location = new Point(10, 60) });
    Controls.Add(panel1);
} 
```

# android - 从存储在 sdcard (Android) 中的 png 文件创建位图

> ID：11411677
> 
> 赞同：3
> 
> 时间：2012-07-10T10:47:44.747
> 
> 标签：android, bitmap, png

我试图从存储在 SD 卡上的 Png 文件创建位图，然后在 imageView 中设置该位图。但它不起作用。

这是代码：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.MalformedURLException;
import java.net.URL;

import com.pxr.tutorial.xmltest.R;

import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Environment;
import android.widget.ImageView;

public class Getbackground {
    URL url;

    public static long downloadFile(URL url2) {
    try {

        URL url = new URL ("http://oranjelan.nl/oranjelan-bg.png");
        InputStream input = url.openStream();{
        try {

            File fileOnSD=Environment.getExternalStorageDirectory();    
            String storagePath = fileOnSD.getAbsolutePath();
            OutputStream output = new FileOutputStream (storagePath + "/oranjelanbg.png");
                try {

                    byte[] buffer = new byte[1024];
                    int bytesRead = 0;
                    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                    output.write(buffer, 0, bytesRead);
                    }
                    } finally {
            output.flush();
            output.close();
//----------------------------------------------------------------------------------------------------------
            Bitmap BckGrnd = BitmapFactory.decodeFile(storagePath + "/oranjelanbg.png");
            ImageView BackGround=(ImageView)findViewById(R.id.imageView1);
            BackGround.setImageBitmap(BckGrnd);
//----------------------------------------------------------=-----------------------------------------------
            }
            } catch (IOException e) {
            throw new RuntimeException(e);
    } finally {
        try {
            input.close();
            } catch (IOException e) {
            throw new RuntimeException(e);
     }
   }    
 }    
        } catch (MalformedURLException ex) {
         throw new RuntimeException(ex);
    } catch (IOException e) {
      throw new RuntimeException(e);
    }

        return 0;
    }
//-----------------------------------------------------------------------------------------
    private static ImageView findViewById(int imageview1) {
        // TODO Auto-generated method stub
        return null;
    }
//-----------------------------------------------------------------------------------------
} 
```

文件确实成功加载到 SD 卡上，但我似乎无法在视图中看到 img。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:56:07.190

你不能..

```
ImageView BackGround=(ImageView)findViewById(R.id.imageView1);
BackGround.setImageBitmap(BckGrnd); 
```

您如何获得`ImageView`非活动课程的参考`Getbackground`？

您只能在 MainUI 线程中更新 UI 组件，如果它在非 Activity 类中，则只能使用该调用 Activity 类的引用（上下文）。

因此，请在 Getbackground 完成后将此代码放入您的 Activity 类中。

# iphone - MBProgress HUD 在 tableView 上的 reloadData 上崩溃应用程序

> ID：11411680
> 
> 赞同：0
> 
> 时间：2012-07-10T10:47:54.400
> 
> 标签：iphone, objective-c, ios, uitableview, mbprogresshud

当我从 Web 服务下载数据时，我正在使用这段代码在我的一个视图的顶部显示 MBProgressHUD，唯一的问题是偶尔这段代码会导致应用程序挂起，而 HUD 显示时什么也不做“正在下载”，屏幕被锁定。此外，如果我在按下刷新按钮（刷新按钮执行下载）时向用户显示键盘之类的东西，那么应用程序将在线崩溃：

```
 [self.tableView reloadData]; 
```

我的代码：

```
//Checks for network connection then displays HUD while executing pullAndDisplayData method
- (IBAction) update {
    UIAlertView *errorView;

    if([[Reachability reachabilityForInternetConnection] currentReachabilityStatus] == NotReachable) {
        errorView = [[UIAlertView alloc] 
                     initWithTitle: @"Network Error" 
                     message: @"No Network connection availible!" 
                     delegate: self 
                     cancelButtonTitle: @"OK" otherButtonTitles: nil]; 
        [errorView show];
    }
    else
    {
        HUD = [[MBProgressHUD alloc] initWithView:self.navigationController.view];
        [self.navigationController.view addSubview:HUD];

        HUD.delegate = self;
        HUD.labelText = @"Downloading";
        HUD.minSize = CGSizeMake(135.f, 135.f);

        [HUD showWhileExecuting:@selector(pullAndDisplayData) onTarget:self withObject:nil animated:YES];
    }
}

//Downloads this users data from the web-service
- (void) pullAndDisplayData{
    // Indeterminate mode
    ExpensesDataDownloader *downloader = [[ExpensesDataDownloader alloc] init];
    [downloader pullAndDisplayData];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([[defaults objectForKey:@"canExportCSVServer"] isEqualToString:@"1"])
    {

    }

    [self.tableView reloadData];

    // Switch to determinate mode
    HUD.mode = MBProgressHUDModeDeterminate;
    HUD.labelText = @"Updating";
    float progress = 0.0f;
    while (progress < 1.0f)
    {
        progress += 0.01f;
        HUD.progress = progress;
        usleep(15000);
    }
    // The sample image is based on the work by www.pixelpressicons.com, http://creativecommons.org/licenses/by/2.5/ca/
    // Make the customViews 37 by 37 pixels for best results (those are the bounds of the build-in progress indicators)
    HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
    HUD.mode = MBProgressHUDModeCustomView;
    HUD.labelText = @"Completed";
    sleep(2);
} 
```

任何帮助将非常感激。

杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T10:58:24.327

`pullAndDisplayData`方法在单独的线程上运行。这样就`MBProgressHUD`可以使用 UI 线程来展示自己。您应该始终从主 (UI) 线程更新您的 UI。使用`performSelectorOnMainThread:`方法来调用`[self.tableView reloadData];`和其他 UI 的东西。我假设这`[downloader pullAndDisplayData];`是同步调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:03:59.587

来自`MBprogressHUD`API

```
/** 
 * Shows the HUD while a background task is executing in a new thread, then hides the HUD.
 *
 * This method also takes care of autorelease pools so your method does not have to be concerned with setting up a
 * pool.
 *
 * @param method The method to be executed while the HUD is shown. This method will be executed in a new thread.
 * @param target The object that the target method belongs to.
 * @param object An optional object to be passed to the method.
 * @param animated If set to YES the HUD will (dis)appear using the current animationType. If set to NO the HUD will not use
 * animations while (dis)appearing.
 */
- (void)showWhileExecuting:(SEL)method onTarget:(id)target withObject:(id)object animated:(BOOL)animated; 
```

由于您使用的是此方法，因此您`pullAndDisplayData`将在新线程中执行。这可能会导致您遇到的奇怪问题（我想）。您正在从后台线程更新 UI 元素，这并不好。UI 元素将从主线程中更新。仅使用后台线程下载数据。

使用它的Insetad，尝试使用GCD（Grand Central Dispatch）

```
[MBProgressHUD showHUDAddedTo:self.view animated:YES];
dispatch_async(dispatch_get_global_queue( DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{
    // download operation here...
    dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];
        // reload data here...
    });
}); 
```

有关详细信息，请[参阅](https://github.com/jdg/MBProgressHUD).`MBProgressHUD`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:01:19.007

该问题可能是由于某些内存问题而发生的，您尝试使用`SVProgressHUD`它，它是以下的扩展版本`MBProgressHUD`：

你只需要这样做：

```
- (void) pullAndDisplayData{

    [SVProgressHUD showWithStatus:@"Downloading..."];

    // Indeterminate mode
    ExpensesDataDownloader *downloader = [[ExpensesDataDownloader alloc] init];
    [downloader pullAndDisplayData];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([[defaults objectForKey:@"canExportCSVServer"] isEqualToString:@"1"])
    {

    }

    [self.tableView reloadData];

    // Switch to determinate mode
    HUD.mode = MBProgressHUDModeDeterminate;
    HUD.labelText = @"Updating";
    float progress = 0.0f;
    while (progress < 1.0f)
    {
        progress += 0.01f;
        HUD.progress = progress;
        usleep(15000);
    }
    // The sample image is based on the work by www.pixelpressicons.com, http://creativecommons.org/licenses/by/2.5/ca/
    // Make the customViews 37 by 37 pixels for best results (those are the bounds of the build-in progress indicators)
    HUD.customView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]];
    HUD.mode = MBProgressHUDModeCustomView;
    HUD.labelText = @"Completed";
    sleep(2);

    [SVProgressHUD dismiss];
} 
```

无需分配或释放任何东西。它就像那样工作！！！

一切顺利！！！

# python - 使用 sqlalchemy 选择解压（文本）

> ID：11411681
> 
> 赞同：1
> 
> 时间：2012-07-10T10:47:57.077
> 
> 标签：python, sqlalchemy, mysql-python

我存储 MySQL Compress 函数以将压缩的 blob 数据插入数据库。

在上一个问题中，我被指示使用

```
func.compress 
```

( [mysql Compress() 与 sqlalchemy](https://stackoverflow.com/questions/10894706/mysql-compress-with-sqlalchemy) )

现在的问题是我还想从数据库中读取数据。在mysql中我会做

```
SELECT UNCOMPRESS(text) FROM ... 
```

可能我应该在课堂上使用吸气剂。我试图做类似的事情：

```
get_html(self):
    return func.uncompress(self.text) 
```

但这不起作用。它返回一个 sqlalchemy.sql.expression.Function 而不是字符串。

此外，我找不到哪些函数包含 sqlalchemy 的函数。

关于如何在对象中编写吸气剂的任何想法，以便我取回未压缩的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:27:58.977

`func`实际上是一个非常花哨的工厂对象，用于在查询时呈现给 SQL 的特殊函数对象 - 您无法在 Python 中评估它们，因为 Python 不知道您的数据库是如何实现的`compress()`。这就是为什么它不起作用。

SQLAlchemy 允许您将[SQL 表达式映射到映射的类属性](http://docs.sqlalchemy.org/en/rel_1_0/orm/mapped_sql_expr.html#using-column-property)。如果您使用的是声明性语法，请像这样扩展您的类（它未经测试，但我相信这是要走的路）：

```
from sqlalchemy.orm import column_property

class Demo(...):
    data_uncompressed = column_property(func.uncompress(data)) 
```

现在，每当 SQLAlchemy 从数据库加载实例时，SELECT 查询将包含`SELECT ..., UNCOMPRESS(demotable.data), ... FROM demotable`.

Giorgos Komninos 编辑：我使用了

[http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#using-a-plain-descriptor](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#using-a-plain-descriptor)

它奏效了。

# java - 当用户访问内部 URL 时创建一个 html 响应

> ID：11411686
> 
> 赞同：0
> 
> 时间：2012-07-10T10:48:16.883
> 
> 标签：java, spring, servlets

当用户点击特定的内部 URL 时，我需要返回一些动态创建的 html。

将调用一些后端服务来生成一个键列表，然后使用该列表生成一个显示给用户的 html href 链接列表。

为此，我正在考虑使用 servlet。这是一个好的方法吗？由于 servlet 已经存在了一段时间，也许有更新/更好的方法来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T10:58:40.403

Servlet 是为 HTTP 请求公开简单接口的 Java 方式。

这也可以通过像[Jersey](http://jersey.java.net/)这样的 REST 框架来实现，但它有点复杂，所以如果你需要一个简单的操作接口，我会选择 servlet。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:59:20.413

有很多解决方案，其中大多数（在 Java 中）基于 servlet API。如果您已经使用 Spring，那么 Spring 有一个名为 Spring MVC 的模块，它是一个基于 servlet API 的框架，用于创建基于 MVC 模式的 Web 应用程序：

*   模型保存数据库中的数据
*   视图（大部分时间使用 JSP 实现）根据模型中包含的数据生成标记
*   控制器从数据库中获取数据，并分派到适当的视图

这是大多数 Web 框架使用的一种很好的模式，但每个框架都有自己的做事方式、优点和缺点。

您可以使用简单的 servlet，但从 servlet 生成标记很难看。这就是为什么 servlet 通常与 JSP 结合使用，遵循 MVC 模式。您可以自己实现一个微型 MVC 框架，只使用 servlet 和 JSP，但是 Spring-MVC 和其他框架提供了许多额外的优势，因此投资是值得的。我个人非常喜欢 Stripes，而且非常简单。

# video - 保持模式打开时视频不会暂停

> ID：11411687
> 
> 赞同：1
> 
> 时间：2012-07-10T10:48:18.003
> 
> 标签：video, mode, pausing-execution

我将我的应用程序提交给了三星市场，但他们拒绝了它，说保持模式打开时视频不会暂停。

有没有人帮助我理解我必须添加什么代码？这是我的剪辑视频活动

```
 import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.Window;
import android.view.WindowManager;
import android.widget.MediaController;
import android.widget.Toast;
import android.widget.VideoView;

public class Clipvideo1 extends Activity {

    @Override
     protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN); 
setContentView(R.layout.clip1);

VideoView videoView = (VideoView) findViewById(R.id.videoView1);

Uri videoPath = Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.fiordi6);

videoView.setVideoURI(videoPath);
videoView.setMediaController(new MediaController(this));
videoView.requestFocus();
videoView.start();
Toast.makeText(this, "Regia di Angelo Giammarresi", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T04:44:05.377

您必须通过实现 onPause 和 onResume 方法来处理活动周期的暂停/恢复状态。当然，您在 onPause 方法中停止视频（并且可能保存视频跟踪信息）并在 onResume 方法中重新启动它（使用存储的跟踪信息使视频从停止的位置继续）。

# javascript - 动态绑定 onclick 事件为 for 循环中的所有按钮提供相同的值

> ID：11411694
> 
> 赞同：1
> 
> 时间：2012-07-10T10:48:40.280
> 
> 标签：javascript, jquery, html, button, dynamic

我正在尝试动态创建按钮并在单击事件上为每个按钮设置一个警报功能。这是 javascript 函数：

```
function GetTabs(tabObj) {
   for (var t = 0; t < tabObj.views.view.length; t++) {               
        var podObjlen = '';
        var element = document.createElement('input');
        element.id = "btn" + t;
        element.setAttribute("type", "button");
        element.setAttribute("value", "Click");
        element.setAttribute("name", "button");
        podObjlen = tabObj.views.view[t].pod.length;
        document.body.appendChild(element);
        document.getElementById('btn' + t).onclick = (this, "onclick", function {
           alert(podObjlen);                    
        });                
    }
} 
```

无论我单击哪个按钮，警报总是向我显示所有按钮的循环中的最后一个值，即长度值被分配给所有警报。它没有为按钮的每个警报分配独立的值。我尝试了几种方法，例如：

```
element.getElementById('btn' + t).onclick = (this, "onclick", function {
    alert(podObjlen);                    
}); 
element.getElementById('btn' + t).onclick = new function () {
    alert(podObjlen);
} 
```

（这里它在警报框中显示了正确的值，但我一个接一个地得到警报，但是当我实际单击按钮时警报未能触发，即警报在我的按钮呈现时触发。希望我很清楚。我想要什么我是否需要在循环运行时获取要分配的实际值以提醒每个按钮。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T10:52:10.010

Adnan 您正在观察的是 javascript 中臭名昭著的循环问题。发生这种情况是由于对 javascript 如何工作的了解较少，它也已在上一篇文章中讨论过

[Javascript臭名昭著的循环问题？](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)

# windows - Windows 窗体 - 面板中的自定义用户控件

> ID：11411700
> 
> 赞同：1
> 
> 时间：2012-07-10T10:49:02.830
> 
> 标签：windows

我有一个面板控件，可以在其中加载用户控件。面板的自动滚动属性设置为 true。用户可以从菜单中选择一个选项，并根据哪个面板被清除并加载新的用户控件。此用户控件包含一个 Infragistics 网格。基础网格的长度根据行数而变化，因此有时它会超出面板的高度。我一直面临的问题是，一旦用户使用面板滚动向下滚动，然后从菜单中选择另一个选项来加载带有网格的新用户控件，网格的大小就会减小。面板的滚动位置设置为开始，但是 UC 的上部（内部有网格）丢失了。我也无法向上滚动查看它。

我一直在尝试根据控件在面板中的加载和绘制方式以及面板的滚动方式来弄清楚这一点，以达成一些理解，但到目前为止还没有成功。请帮忙。

# java - 程序不会运行，因为变量“可能未初始化”？

> ID：11411701
> 
> 赞同：-3
> 
> 时间：2012-07-10T10:49:04.233
> 
> 标签：java, android, multithreading, compiler-errors

我正在尝试创建一个新线程来从 rss 提要解析 xml。当我单击运行时，它说有错误，请更正它们等。我的项目中有 2 个类。另一个类没有错误，下面的这个类只有警告，try/catch 语句中的很多东西可能未初始化。我理解这一点，并认为我仍然应该能够运行该程序，我希望它们能够被初始化，如果它们不是很好，我想知道它。这真的是怎么回事还是我错过了什么？我认为如果某些东西可能未初始化但它不一定未初始化，它会编译。

```
public class RssParse extends Thread  {
    Thread th=new Thread() {
            public void run(){
              System.out.println("1");
              URL iotd;
            try {
                iotd = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("2");
            BufferedReader in;

                try {
                    in = new BufferedReader(new InputStreamReader(iotd.openStream()));
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

            System.out.println("3");
            XmlPullParserFactory factory;
            try {
                factory = XmlPullParserFactory.newInstance();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            factory.setNamespaceAware(true);
            System.out.println("4");
            XmlPullParser xpp;
            try {
                xpp = factory.newPullParser();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("5");
            try {
                xpp.setInput(in);
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("6");

            int eventType;
            try {
                eventType = xpp.getEventType();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println(eventType+"!!!!!!!!!!!!!!!!");
            while(eventType!=XmlPullParser.END_DOCUMENT){
                if(eventType==XmlPullParser.START_DOCUMENT){
                    System.out.println("start");
                }
            }

            try {
                in.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }//method
        };//thread

}//class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T10:59:09.100

例如，看看这个 try/catch 块：

```
 URL iotd;
    try {
        iotd = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } 
```

如果`iotd = new URL("...")`失败，`iotd`将保持未初始化状态。

有两种方法可以解决这个问题：

*   为 分配一个默认值`iotd`，例如：`URL iotd = null;`但是，这很糟糕，因为如果您`iotd`稍后使用它的值可能为 null 并且可能引发 NullPointerException。
*   如果出现故障，则停止执行您的函数，而不仅仅是打印堆栈跟踪。例如，您可以在块中添加一条`return`语句：`catch`

    ```
    URL iotd;
    try {
        iotd = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return;
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T11:03:07.223

您收到的所有警告都是因为您的所有`catch`块根本没有处理异常（只是将堆栈跟踪打印到标准输出）。

让我们通过一个例子来看看：

```
URL iotd;
try {
   iotd = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
} catch (MalformedURLException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
} 
```

在那剪断时，您将`iotd`变量声明为 URL，但没有对其进行初始化（不分配任何值），而是在`try`块内执行此操作 - 顺便说一句，这并没有错。但是，如果由于任何原因，`try`块内的语句抛出异常，程序流将转到`catch`块，使`iotd`变量保留其初始值（未分配）。

因此，在这种情况下，程序的执行将继续，当到达此语句时：

```
in = new BufferedReader(new InputStreamReader(iotd.openStream())); 
```

它会发现没有分配给`iotd`变量的值。

要删除有关未初始化值的警告，您可以`null`在声明变量时为其赋值或在`catch`块内重新引发另一个异常，从而停止程序流。

另一方面，您在此处发布的片段不仅仅是一个类，实际上是两个类，因为您正在扩展`Thread`该类，然后在其主体中创建一个匿名类。使用线程比在 Java 中更容易，只需实现`Runnable`接口，然后从该接口实例化一个新线程：

```
public class MyRunnable implements Runnable {
    public void run() {
        // do stuff
    }
} 
```

进而：

```
new Thread(new MyRunnable()).start(); 
```

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:05:00.467

您需要初始化块上方的变量，或者在或块`try catch`中给它们一个值`catch``finally`

在这里找到更新的代码

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;

import org.xmlpull.v1.XmlPullParser;
import org.xmlpull.v1.XmlPullParserException;
import org.xmlpull.v1.XmlPullParserFactory;

public class RssParse extends Thread  {
    Thread th=new Thread() {
            public void run(){
              System.out.println("1");
              URL iotd=null;
            try {
                iotd = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("2");
            BufferedReader in=null;

                try {
                    in = new BufferedReader(new InputStreamReader(iotd.openStream()));
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

            System.out.println("3");
            XmlPullParserFactory factory=null;
            try {
                factory = XmlPullParserFactory.newInstance();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            factory.setNamespaceAware(true);
            System.out.println("4");
            XmlPullParser xpp=null;
            try {
                xpp = factory.newPullParser();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("5");
            try {
                xpp.setInput(in);
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("6");

            int eventType=-1; // set to a default value of your choice
            try {
                eventType = xpp.getEventType();
            } catch (XmlPullParserException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println(eventType+"!!!!!!!!!!!!!!!!");
            while(eventType!=XmlPullParser.END_DOCUMENT){
                if(eventType==XmlPullParser.START_DOCUMENT){
                    System.out.println("start");
                }
            }

            try {
                in.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            }//method
        };//thread

}//class 
```

# java - javascript - ajax - 在 JAVA 中关闭浏览器时关闭会话

> ID：11411703
> 
> 赞同：2
> 
> 时间：2012-07-10T10:49:10.537
> 
> 标签：java, javascript, ajax

在我的网络应用程序中

1.1当用户突然关闭浏览器时，我必须关闭会话。

1.2\. 当用户尝试“在新选项卡中打开”时 - 用户应被转发到新选项卡中的“登录页面”

我打算使用 JAVASCRIPT 和 AJAX 在 JSPX 中实现这一点。

由于我是 javascript/ajax 的新手，任何人都可以分享任何示例代码来实现他的上述功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T19:41:18.640

这可以通过在 HTML 的 HEAD 中添加以下 META 标记来实现。这些标签将在窗口关闭时清除 cookie。因此用户下次需要重新登录。

```
<meta http-equiv='cache-control' content='no-cache'>
<meta http-equiv='expires' content='0'>
<meta http-equiv='pragma' content='no-cache'> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-10T10:53:18.837

> 1.1当用户突然关闭浏览器时，我必须关闭会话。

没有可靠的方法来跟踪它，您可以使用 AJAX 不断轮询服务器，如果您停止接收 ajax 调用，则认为浏览器已关闭

或者调用一个 javascript 方法来通知您的服务器关闭，但这不适用于奇怪的关闭/崩溃

> 1.2\. 当用户尝试“在新选项卡中打开”时 - 用户应被转发到新选项卡中的“登录页面”

如果用户已登录，并且您想管理浏览器的新选项卡的另一个会话，这是不可能的，因为浏览器集中管理 cookie（在所有选项卡和窗口中）。因此，当它发送请求时，它将在标头中添加 cookie，因此您的应用程序将无法识别，

如果您使用其他技术（如`jSessionId`url 参数）管理会话，则可以这样做但不是 100% 确定的方式，因为用户可以使用 sessionID

# batch-file - 使用 FTP 将文件上传到远程服务器中的特定文件夹的批处理脚本

> ID：11411705
> 
> 赞同：0
> 
> 时间：2012-07-10T10:49:17.447
> 
> 标签：batch-file, ftp

我正在使用[此脚本](http://www.howtogeek.com/50359/upload-files-to-an-ftp-site-via-a-batch-script/)通过 FTP 上传文件。但是，它正在上传到服务器的根文件夹。
谁能告诉我将文件上传到远程服务器上的特定路径，比如“/CurrentQA”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:33:07.460

在此行之前：

```
ECHO binary >> %Commands% 
```

尝试添加这一行：

```
ECHO cd /some/directory >> %Commands% 
```

这应该在远程服务器中输入所需的目录（虽然我还没有测试过）。

# javascript - 为什么这个小书签不能转换为用户脚本？

> ID：11411708
> 
> 赞同：1
> 
> 时间：2012-07-10T10:49:29.757
> 
> 标签：javascript, bookmarklet, userscripts

我正在尝试转换[书签](http://www.456bereastreet.com/archive/200608/light_text_on_dark_background_vs_readability/)：

```
javascript:(function(){var newSS, styles='* { background: white ! important; color: black !important } :link, :link * { color: #0000EE !important } :visited, :visited * { color: #551A8B !important }'; if(document.createStyleSheet) { document.createStyleSheet(%22javascript:'%22+styles+%22'%22); } else { newSS=document.createElement('link'); newSS.rel='stylesheet'; newSS.href='data:text/css,'+escape(styles); document.getElementsByTagName(%22head%22)[0].appendChild(newSS); } })(); 
```

到与 Opera 和 Midori 一起使用的用户脚本。我按照[如何将小书签转换为 Greasemonkey 用户脚本](https://stackoverflow.com/questions/6906025/how-to-convert-a-bookmarklet-into-a-greasemonkey-userscript)中的步骤进行操作，但运气不佳。这是我想出的代码，但似乎不起作用：

```
// ==UserScript==
// @name          Darklooks
// @description   Eye-friendly colorscheme attempting to emulate Darklooks
// @include       http://*
// @include       https://*
// @include       about:blank*
// ==/UserScript==

(function() {
var newSS, styles='* { background: #555753 ! important; color: #D3D7CF !important } :link, :link * { color: #00008B !important } :visited, :visited * { color: #551A8B !important }'; if(document.createStyleSheet) { document.createStyleSheet("javascript:'" styles "'"); } else { newSS=document.createElement('link'); newSS.rel='stylesheet'; newSS.href='data:text/css,' escape(styles); document.getElementsByTagName("head")[0].appendChild(newSS); 
} 
})(); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:38:23.693

看起来`javascript:`代码中嵌入了一个流浪者。

无论如何，试试这个。它可以工作，但我只在我的主要浏览器（Firefox 和 Chrome）上进行了测试：

```
(function () {
    var newSS;
    var styles = '* { background: white ! important; color: black !important } :link, :link * { color: #0000EE !important } :visited, :visited * { color: #551A8B !important }';
    if (document.createStyleSheet) {
        document.createStyleSheet(styles);
    }
    else {
        newSS = document.createElement('link');
        newSS.rel = 'stylesheet';
        newSS.href = 'data:text/css,' + escape(styles);
        document.getElementsByTagName("head")[0].appendChild(newSS);
    }
} ) (); 
```

# wcf - 如何强制启动 WCF 服务

> ID：11411712
> 
> 赞同：0
> 
> 时间：2012-07-10T10:49:44.103
> 
> 标签：wcf

我有一个 IIS 托管的 WCF 服务和一个客户端 Windows 应用程序，在当天第一次使用时，它需要一段时间来响应第一个服务调用。我认为这是因为 IIS 关闭了一段时间内未使用的服务*（延迟是服务的重新启动时间）*。我想知道是否可以通过在我的应用程序启动时进行异步调用来缓解这种情况*（只是为了让服务启动）*。因此，在应用程序启动时，我创建了一个“即发即忘”的后台线程，它只是打开了与服务的连接。目的是当我的应用程序完成自己的启动并想要使用 WCF 服务时，线程将*（可能）*已经完成并且用户不会遇到服务启动延迟。

这合理吗？单独打开 WCF 服务的通道是否足以启动服务，还是我需要编写一些虚拟方法并调用它？

谢谢

罗斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:13:28.827

检查您是否真的希望您的应用程序处理此任务并检查 IIS 的[AppWarm-Up 模块](http://blogs.iis.net/steveschofield/archive/2012/04/03/app-warm-up-module-released-for-windows-server-2008-r2.aspx)，也许您可​​以在不向服务中添加代码的情况下使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:26:14.757

> 这合理吗？

这听起来对我来说不是一个好方法。如果您可以控制服务的托管方式，我建议您自行托管。

# infowindow - 外部链接 subgurim 谷歌地图 打开信息窗口

> ID：11411717
> 
> 赞同：0
> 
> 时间：2012-07-10T10:50:02.480
> 
> 标签：infowindow, subgurim-maps

此代码不起作用

protected void Page_Load(object sender, EventArgs e) { if (!IsPostBack) { InitializeServerSide(); 配置客户端（）；} }

```
private void InitializeServerSide()
{
    GLatLng latlng = new GLatLng(39, -0.5);

    GMarker marker = new GMarker(latlng);

    GMap1.Add(marker);
    InitializeClientSide(marker.ID);
}

private void InitializeClientSide(string markerId)
{
    btnGInfoWindow.Attributes.Add("onclick", string.Format("windowMe("+ markerId +");"));
}

private void ConfigureClientSide()
{
    string js = string.Format(@"function windowMe(markerId){{var marker = getGMapElementById(subgurim_GMap1,markerId);  marker.openInfoWindowHtml('Hello world!'); }}", GMap1.GMap_Id);

    GMap1.addCustomJavascript(js);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T10:19:30.253

尝试这个，

```
private void InitializeServerSide()
    {
        GMap1.addInfoWindow(GetInfoWindow(new GLatLng(7.225261, 80.198994)));
    }

protected GInfoWindow GetInfoWindow(GLatLng loc)
    {
        GIcon icon = new GIcon();
        icon.image = "http://localhost:9477/icons/red.png";
        icon.shadow = "http://localhost:9477/icons/shadow.png";
        icon.iconSize = new GSize(50, 50);
        icon.shadowSize = new GSize(0, 0);
        icon.iconAnchor = new GPoint(6, 18);
        icon.infoWindowAnchor = new GPoint(0, 0);
        GMarkerOptions mOpts = new GMarkerOptions();
        mOpts.icon = icon;
        GMarker marker = new GMarker(loc, mOpts);
        GInfoWindow infoWindow = new GInfoWindow(marker, "Line ID: <a href=\"http://google.com\" target=\"_blank\">sachinda</a>", GListener.Event.click);
        return infoWindow;
    } 
```

# iphone - UIWebView 错误

> ID：11411725
> 
> 赞同：0
> 
> 时间：2012-07-10T10:50:35.723
> 
> 标签：iphone, ios, uiwebview

我正在开发一个应用程序。在第一页有一个`UIWebView`。我为那个创建了一个属性。我在另一个类中为该类创建了一个对象，并为该 webview 提供了 html 数据，如下所示。但它没有显示数据`UIWebView`。请告诉我该怎么做。

```
ViewController *view=[[ViewController alloc]init];
 NSString *result1 = [[NSString alloc] initWithData:_data encoding:NSUTF8StringEncoding];
NSString *htmldata=[NSString stringWithFormat:@"<html>%@</html>",result1];
[view.web loadHTMLString:htmldata baseURL:nil]; 
```

这个 result1 字符串包含没有 html 标签的 html 数据。这就是为什么我要添加该标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:04:07.367

希望您已经调用`pushViewController`或`popViewController`呈现视图或将视图对象的视图添加为当前视图的子视图。然后确保分配 webview，给定一个框架并添加为`ViewController`. 您没有使用该方法`initWithNibName:`，因此，如果 webview 是从 xib 创建的，则不会。

# objective-c - 使 UITableView 可移动和可选择

> ID：11411729
> 
> 赞同：0
> 
> 时间：2012-07-10T10:50:42.997
> 
> 标签：objective-c, ios, uitableview

我知道 UITableView 有一个“编辑”属性，它将其置于编辑模式（单元格是可移动的和/或可删除的），但是如何使 UITableView 既可以以正常方式选择又可以移动呢？

因此，如果用户点击并按住，他可以上下移动单元格..但如果他只是点击，那么单元格就会被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:04:46.547

检查一些东西[https://github.com/shusta/ReorderingTableViewController](https://github.com/shusta/ReorderingTableViewController)

它是开源的，因此您可以检查实现，但基本思想（我假设从我完成此操作时开始，上面的链接可能略有不同）是

1.  向表格视图添加长按手势识别器
2.  当识别出长按时，创建一个 UIView 代表您正在拖动的单元格，并在拖动单元格时从其下方移动单元格

# opengl - DirectX/OpenGL 中的三角形绘制顺序

> ID：11411730
> 
> 赞同：8
> 
> 时间：2012-07-10T10:50:44.427
> 
> 标签：opengl, opengl-es, 3d, direct3d

在 3D API 中绘制三角形的顺序是否保证与它们​​在索引缓冲区中的顺序相同？

例如，如果我在一个绘图调用中有两个重叠的三角形，并且深度测试被禁用，那么第一个或第二个三角形最终会可见吗？

还是我需要发出单独的绘图调用以确保第二个三角形出现在第一个三角形的顶部？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-10T10:59:20.180

在 OpenGL 中，确实保留了顺序，因此可以使用画家算法，例如在渲染半透明几何体时。

Direct3D 我不确定，但我想说这同样适用。

# image - 谷歌用地址映射静态标记 api

> ID：11411734
> 
> 赞同：2
> 
> 时间：2012-07-10T10:50:56.833
> 
> 标签：image, geolocation, google-maps-markers

我在这里有点新手，但我知道如果你问一个问题，你必须选择一个答案。

我正在尝试将谷歌地图添加到带有`<img>`PHP 标记的站点。地图上可能有多个与地址一致的标记。我的问题是标记没有出现。有人可以指出我做错了什么并帮助我找到解决方案的正确方向。我已通读 google maps api 上的文档，但不清楚如何使用地址执行此操作。

我的代码：

```
 <?php

        $markers = "&markers=color:green%7CAustralia";

        $mapUrl = "http://maps.googleapis.com/maps/api/staticmapsize=550x200".$markers."&sensor=true";

        echo "<img src='$mapUrl' />";

    ?> 
```

理论上，这应该向我展示一张澳大利亚地图，上面有一个标记，但它似乎不起作用。是否可以通过地址以这种方式向地图动态添加标记？

```
 eg. $markers = "&markers=color:green%7CAustralia";
         $markers =  $markers."&markers=color:green%7CAmerica"; 
```

有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-08T23:53:58.160

```
<img class='group-google-maps-preview' src='http://maps.googleapis.com/maps/api/staticmap?center=" . urlencode($this->address) . "&zoom={$this->zoom}&size=600x300&sensor=true&markers=color:red|" . urlencode($this->address) . "'> 
```

# git - 使用 TeamCity 管理多个 SSH 密钥

> ID：11411744
> 
> 赞同：2
> 
> 时间：2012-07-10T10:51:20.000
> 
> 标签：git, github, teamcity, ssh-keys

我们有一个 GitHub Enterprise 服务器，它正在处理一个 TeamCity 实例，该实例在许多服务器上都有构建代理。

为了进行身份验证，我们目前正在手动添加 ssh 密钥并引用它们，但这不是一个可扩展的解决方案，因为我们需要将密钥添加到所有构建代理框。

谁能想到更好的方法来管理这个？

注意：我们不能在 github 中创建“构建”用户，然后将其添加到我们的每个项目中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:38:26.537

如果我考虑[GitHub Enterprise FAQ](https://enterprise.github.com/faq#faq-4)，我会看到：

> 我可以使用我组织的 LDAP 目录来管理用户访问吗？
> 
> 是的。GitHub Enterprise 支持通过外部 LDAP 或 CAS 服务进行用户身份验证。设置过程包括配置组织的 LDAP/CAS 服务器信息的步骤。
> 
> 默认情况下，GitHub Enterprise 以独立身份验证模式运行，用户信息存储在 GitHub Enterprise 数据库中。

如果您不能“在 github 中创建一个“构建”用户，然后将其添加到我们的每个项目中”，这意味着您不能（或不想）在每个构建服务器上重用相同的公共/私有 ssh 密钥。

这将使您使用基于 LDAP 的凭据进行 https 访问而不是 ssh 地址。
在 GitHub 企业服务器上发布/注册没有 ssh 密钥，因此这是一种可能的“解决方案/解决方法”。但这会给您带来另一组问题：

*   您将在每台服务器上使用哪个（实际 LDAP）帐户？
*   您将如何管理对上述 LDAP 帐户通常每 x 个月强制执行的密码更新？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T13:44:25.767

将 .ssh 文件夹放在共享上？

# c# - pos explorer 在 C# 中找不到任何连接到系统的设备

> ID：11411745
> 
> 赞同：2
> 
> 时间：2012-07-10T10:51:25.583
> 
> 标签：c#, pos-for-.net

嗨，我已经在我的系统中安装了 Star TSP100 Cutter (TSP143) 打印机驱动程序并测试了打印机，它打印了所有内容。但是现在我想通过 c# 中的代码来处理打印机，例如剪纸、打开打印机、正常打印等。我使用下面的代码来实例化打印机。当我查询打印机时，它返回 null。

如果我走错路，有任何建议或帮助。谢谢

```
public static DeviceCollection GetPrinters()
    {
        PosExplorer explorer = new PosExplorer();
        return explorer.GetDevices(DeviceType.PosPrinter, DeviceCompatibilities.OposAndCompatibilityLevel1);
    }

    public static DeviceInfo GetPrinter(string name)
    {
        if (String.IsNullOrEmpty(name))
            return null;

        PosExplorer explorer = new PosExplorer();
        return explorer.GetDevice(DeviceType.PosPrinter, name);
    }
PosExplorer explorer = null;
                DeviceInfo device = null;
                PosPrinter printer = null;
                DeviceCollection printers = GetPrinters();

                DeviceInfo printers2 = GetPrinter("Star TSP100 Cutter (TSP143)"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:20:28.927

听起来好像正在发送不正确的命令。TSP100 与 Star 产品线中的其他打印机不同。它需要接收光栅命令。其他打印机一般默认接受行模式。

在此处参考他们的编程手册：http: [//www.starmicronics.com/support/Mannualfolder/linemode_cm_en.pdf](http://www.starmicronics.com/support/Mannualfolder/linemode_cm_en.pdf)

第 87 页：向您展示如何初始化光栅模式

第 90 页：钱箱

第 92 页：进给/剪切

# unicode - 使用 PIL 绘制多语言文本

> ID：11411746
> 
> 赞同：18
> 
> 时间：2012-07-10T10:51:29.797
> 
> 标签：unicode, fonts, python-imaging-library, cjk, imaging

我在使用 PIL 绘制多语言文本时遇到问题。假设我要绘制文本 - “ひらがな - 平假名，히라가나”。但是 PIL 的 ImageDraw.text() 函数一次只需要一种字体，所以我无法正确绘制这个文本，因为它需要英文、日文和韩文字体。

到目前为止，我还没有找到一个简单的解决方案，比如将多种字体传递给 PIL，以便它可以为每个 Unicode 字符选择合适的字体（就像现代 SDK 或 Web 浏览器一样）。

我在想的是，我应该遍历每个字符，并自己确定每个字符使用哪种字体。但我不禁想到必须有一种更简单的方法来做到这一点。

我是否朝着正确的方向前进？没有更简单的方法吗？

PS）如果有更好的解决方案，可以使用其他语言或其他图像库。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-12T18:37:44.433

您只需要选择一个 Unicode 字体。例子：

```
import Image
import ImageFont, ImageDraw
image=Image.new("RGB",[320,320])
draw = ImageDraw.Draw(image)
a=u"ひらがな - Hiragana, 히라가나"
font=ImageFont.truetype("/Library/Fonts/Arial Unicode.ttf",14)
draw.text((50, 50), a, font=font)
image.save("a.png") 
```

![输出这个](../Images/926460f85aa31a12cf16afc9ee3b550c.png)

# java - 推荐的 JScrollPane 导航小部件

> ID：11411753
> 
> 赞同：3
> 
> 时间：2012-07-10T10:51:50.130
> 
> 标签：java, swing, jscrollpane

任何人都可以推荐一个体面的 Swing 小部件来导航 JScrollPanes 吗？我指的是您在 CAD 应用程序中经常看到的导航窗口类型，它允许您通过在较大的框（底层组件）内拖动小框（视口）的位置来重新定位视口。

到目前为止，我已经找到[了这个](http://www.javalobby.org/java/forums/t21355.html)，但想知道是否还有其他东西，也许是 UI 库的一部分？

理想情况下，我还想在导航窗口中呈现组件的缩放版本。

**编辑**

为了解决 mKorbel 的一些问题：

*   我正在开发的应用程序是基于 Swing 的。
*   JScrollPane 中的组件是一个 JPanel，为此我重写了 paintComponent 方法，以便使用 Java 2D 绘制形状。
*   因此，我有效地混合了 Java 2D 和 Swing。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T13:07:25.827

[Swinglabs 孵化器](http://java.net/projects/jdnc-incubator)有一个 JXScrollMap，未来添加的候选者。它[在滚动图下的 Karl Schaefer 部分](http://java.net/projects/jdnc-incubator/sources/svn/show/trunk/src/kschaefe?rev=3378)（他正在重组，所以不完全确定后一个链接有多稳定）。

# c# - 从堆栈跟踪创建错误号

> ID：11411758
> 
> 赞同：0
> 
> 时间：2012-07-10T10:52:14.943
> 
> 标签：c#, java, php, android, cryptography

我在 Android 平台上使用 Java 进行编码，但这对于特定的编程语言来说并不是一个真正的问题。

所以......如果我的程序中发生错误，我会在 try-catch 语句中捕获它，并且我想创建一个错误号，我将显示给用户，让他有机会向我发送这个错误号。

问题是我想以这样的方式对错误进行编码，以便我得到一个小数字（比如说最多 5 位数字），我稍后可以解码，并且可以准确地找出哪个类，哪个方法和在发生错误的行号。

我猜这更像是一个密码学问题，所以有人对我应该如何做这件事有任何想法吗？

**编辑**

我正在考虑给每个文件，每个方法一个数字，并以某种方式使用这些值来创建错误号，但我不确定如何计算实际的错误号，以便它可以反过来工作（正确解码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:55:25.750

我会说，这是调试问题的可怕方法。您要做的是设置一个指示错误代码+描述的枚举。这类似于微软[的做法](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)

```
ERROR_SUCCESS

    0 (0x0)

    The operation completed successfully 
```

等等等等。这样您就可以将这些内容发布给您的用户，从而减少您收到的电子邮件/投诉的数量（在某种程度上）。混淆堆栈跟踪对您来说将是一场噩梦，因为您似乎将自己锁定在一个无法管理的报告系统中。随着您的代码库增长和/或您添加更多自定义异常，您将很快破坏您的设计。此外，这是一个通过默默无闻实现安全的强有力案例，其中有人可能会对您的流程进行逆向工程并开始编写针对您的恶意代码。

更好的方法：

获取一个 JIRA 帐户，技术更精通的用户可以在其中发布错误和描述。我相信 FogBugz 也有这个功能，你可以上传这些类型的东西，它允许用户裁剪图像以专注于你正在寻找的东西。

# android - 拖放列表

> ID：11411759
> 
> 赞同：1
> 
> 时间：2012-07-10T10:52:17.573
> 
> 标签：android, listview

我能否创建一个支持拖放属性且没有任何处理程序（处理拖动属性）的 ListView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T18:31:27.797

这是我们的拖放列表。它是 ListView 的直接替代品，并且非常易于使用。在其 github 页面上有如何使用的示例。它确实有一个处理程序，但是您可以将整个列表视图行设置为一个处理程序，然后无论您触摸到哪里都可以拖动它。

[https://github.com/terlici/DragNDropList](https://github.com/terlici/DragNDropList)

# android - 录音开始时的意图过滤器

> ID：11411767
> 
> 赞同：0
> 
> 时间：2012-07-10T10:52:53.963
> 
> 标签：android, broadcastreceiver, intentfilter, audiorecord

是否存在指示录音何时开始的意图过滤器，还是我必须创建一个？我正在构建一个在后台线程中记录的应用程序，并且我希望在记录开始或停止时更新活动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:34:19.697

我最终通过广播我生成的意图解决了这个问题。

# linux - Linux 控制台输出被 ASCII 字符损坏

> ID：11411771
> 
> 赞同：0
> 
> 时间：2012-07-10T10:52:58.750
> 
> 标签：linux, console, debian, console-application

我正在 Debian 上使用 C++ 实现一个软件项目。当我在 debian 机器上执行独立二进制文件时，程序运行良好至少 15-20 分钟，但过了一会儿控制台输出损坏。对于大多数字符，我看到很多 ASCII 字符，但有些字符显示正常，因此输出变得几乎不可读。如果我 CTRL+C 并停止执行，我在命令行上输入的任何内容也会显示为奇怪的 ASCII 字符。如果我重新启动盒子并重新开始，再过 15-20 分钟一切正常，然后同样的事情会发生。有人知道这里会发生什么吗？Debian 盒子只有命令行支持，没有 GUI。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T10:58:12.247

听起来您在某些时候打印了一些不需要的字符。我认为您在管理用于字符串的内存时可能会遇到问题。尝试在 valgrid 下运行您的程序。您可以按照[本教程](http://cs.ecs.baylor.edu/~donahoo/tools/valgrind/)进行操作。您应该期待有关从未初始化的内存中读取的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:57:30.817

我认为您在这里没有正确使用“ASCII”。考虑到 ASCII 在 0-127 范围内的事实，该范围内没有太多“奇怪”的东西。我以前见过这种情况，通常是由于转义字符被解释为显示代码。我对此有点模糊——我很久没有做过控制台的事情了。但我很确定它与实际超出 ASCII 范围的东西的原始输出有关。

# vba - 将公式插入到可变数量的行中

> ID：11411773
> 
> 赞同：1
> 
> 时间：2012-07-10T10:53:16.550
> 
> 标签：vba, excel

到目前为止，我已经设法创建了一个搜索功能，可以扫描一列并收集数组中的行。然后我在另一张纸上打印数组以形成一个表格。我使用许多标准来做到这一点，这意味着我得到了不同大小的不同数组。

对于我的问题。我想为每一行做一个计算。`ActiveCell.FormulaR1C1 =" = TRUNC ((RC [-5], RC [-1]) / 7) "`. 如何制作一个适应有多少行的循环。一些地方也有差距。

以下是如何打印一个数组的示例：

```
For i = 1 To nS - 1
        Sheets("DataSheet").Select
        Union(Sheets("raw_list").Cells(arrStart(i), NameCol), Sheets("raw_list").Cells(arrStart(i), PhaseCol), Sheets("raw_list").Cells(arrStart(i), ToStartCol), Sheets("raw_list").Cells(arrStart(i), ToDefineCol), Sheets("raw_list").Cells(arrStart(i), ToMeasureCol), Sheets("raw_list").Cells(arrStart(i), ToAnalyseCol), Sheets("raw_list").Cells(arrStart(i), ToImproveDevCol), Sheets("raw_list").Cells(arrStart(i), ToImproveIndCol), Sheets("raw_list").Cells(arrStart(i), ToControlCol), Sheets("raw_list").Cells(arrStart(i), ToClosedCol)).Copy
        Cells(r, 1).Select
        ActiveSheet.Paste
        With Selection.Interior
            .Pattern = xlNone
            .TintAndShade = 0
            .PatternTintAndShade = 0
        End With
        r = r + 1
    Next 
```

感谢您的帮助！

编辑：添加了一张图片以显示它的外观。 ![在此处输入图像描述](../Images/080273bc74134d726afddd9a16ee6894.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:15:35.433

如果有间隙，我们在工作中使用的是一种简单但不那么优雅的解决方案，即在相邻列中添加某种类型的标记。例如，我们将在同一行的单元格中添加“END”或类似的内容，但 col + 1 或 col - 1 到您要比较的列。

另一种解决方案是查看下一个元素是否也是空白，但这仅在您有单个间隙时才有效。

最后，我看到的最后一个解决方案是，当您处于空白状态时，使用 xlDown 并且如果您在 2003 年位于最后一个单元格 65535 并且在 2007 年接近 100 万个单元格，如果我没记错的话，那么您就完成了。

# ruby - 在 osx 10.7 上运行 Vagrant/Puppet 的问题

> ID：11411778
> 
> 赞同：5
> 
> 时间：2012-07-10T10:53:29.947
> 
> 标签：ruby, virtualbox, puppet, vagrant

我刚刚开始使用[Vagrant](http://vagrantup.com/)和[Puppet](http://puppetlabs.com/)。我能够让 Virtualbox 运行，但现在我想自动化安装在上面的软件。

在我的 Vagrantfile 中，我有：

```
Vagrant::Config.run do |config|

    config.vm.box = "precise64"

    config.vm.forward_port 80, 9090
    config.vm.forward_port 27017, 27017

    config.vm.provision :puppet do |puppet|
     puppet.manifests_path = "manifests"
     puppet.manifest_file  = "default.pp"
    end

end 
```

在 manifests/default.pp 我有：

```
Exec { path => [ "/bin/", "/sbin/" , "/usr/bin/", "/usr/sbin/" ] }

class php5{
    package { "php5":
        ensure => present,
    }
}

include php5 
```

但是，当我运行时，出现`vagrant up`以下错误（片段）。

```
[default] Running Puppet with /tmp/vagrant-puppet/manifests/default.pp...
stdin: is not a tty
No LSB modules are available.
warning: Could not retrieve fact fqdn
err: /Stage[main]/Php5/Package[php5]/ensure: change from purged to present failed: Execution of '/usr/bin/apt-get -q -y -o DPkg::Options::=--force-confold install php5' returned 100: Reading package lists... 
```

我不太确定错误在哪里，所以这里有一些可能有用的进一步信息

红宝石版本

```
$ ruby -v 
ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0] 
```

宝石来源

```
$ gem sources 
*** CURRENT SOURCES ***

http://rubygems.org/ 
```

**更新1：**在这篇[文章](http://trevmex.com/post/850520511/bootstrapping-puppet-on-mac-os-x#default)之后，我安装了facter，puppet现在运行正常，但主要问题仍然存在。

**更新 2：**标记了正确答案，但我想分享我的整个清单文件[http://pastebin.com/LGNhVPV7](http://pastebin.com/LGNhVPV7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:12:40.920

'apt-get install' 错误可能正在发生，因为在 Puppet 尝试执行 'apt-get install' 之前 VM 尚未完成 'apt-get update'。当您请求安装软件包时，Puppet 不会自行处理“apt-get update”，但您可以很容易地说明它应该在您的清单中发生。

[尝试添加 Leach 先生在他的http://johnleach.co.uk/words/771/puppet-dependencies-and-run-stages](http://johnleach.co.uk/words/771/puppet-dependencies-and-run-stages)帖子中提到的 apt 类。这应该确保在安装任何软件包之前运行“apt-get update”。

# java - 多模块应用架构

> ID：11411782
> 
> 赞同：0
> 
> 时间：2012-07-10T10:53:55.100
> 
> 标签：java, modularity

我想设计一个核心和核心之上的多个模块的应用程序。核心将负责从网络接收消息，解析传入的消息并将消息分发到注册的模块。

有多种类型的消息，一些模块可能有兴趣只接收其中的一些类型。模块可以并行执行，也可以顺序执行（例如，当模块以明确定义的执行顺序相互依赖时）。

此外，即使核心已启动，如果模块可以部署/取消部署，那就太好了。

这对我来说是全新的，我曾经编写模块化应用程序，但多个部分是静态连接的。

对于这样的设计，我应该采取哪个方向（即框架、模式……）？我不知道它是否与我的问题有关，但我确切地说我将使用 Java。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:13:25.190

*   You has a very good approach at the `architecture level`. But it will be beneficial only when your application `layers/tire` will be at separate instance, so that you can shut down one `module/server` and while other part will still be running. Point is will you run the modules on separate instances?

*   Secondly, I would like to suggest you to build the application core architecture using [Web-Service](http://www.oracle.com/technetwork/java/index-jsp-137004.html) either [REST](http://www.oracle.com/technetwork/articles/javase/index-137171.html)/[SOAP](http://www.ibm.com/developerworks/webservices/tutorials/ws-understand-web-services1/) as it will automatic achieve your thought that follows [Service Oriented Architecture (SOA)](http://en.wikipedia.org/wiki/Service-oriented_architecture). That will be `producer - consumer` relation and you can run on separate instance. And while deploying/undeploying you can still run the services part to support other client instances.

*   Using Web service will also provide you a global information exchange system that will likely to communicate with several application views/front end.

# r - R 求和因子

> ID：11411783
> 
> 赞同：-3
> 
> 时间：2012-07-10T10:53:59.303
> 
> 标签：r, sum, r-factor

我根据以下因素拆分了一些数据：

```
 a <- factor(data$fact)
 b <- split(data,a) 
```

现在我想将一些因素加在一起，例如

```
tot <- b$A+b$B 
```

但我收到以下错误，

```
"sum" not meaningful for factors 
```

任何帮助都会很棒。

aaa val1 val2 ...
aaa
bbb
bbb
ccc
ccc

现在，如果我分成因素，我有三个。但我希望例如 aaa 和 ccc 一起考虑。这意味着应将另一列中的值相加。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:38:46.760

在拆分之前创建一个新的因子变量：

```
# Make up some data
df = data.frame(Cases = sample(LETTERS[1:5], 10, replace=TRUE),
                Set1 = 1:10, Set2 = 11:20)
# Duplicate your cases column
df$Cases_2 = df$Cases
# Create a new set of factor levels
levels(df$Cases_2) <- ifelse(levels(df$Cases_2) %in% c("A","B"), 
                             "AB", levels(df$Cases_2))
temp = split(df[-c(1, 4)], df$Cases_2)
temp
# $AB
#   Set1 Set2
# 3    3   13
# 5    5   15
# 6    6   16
# 8    8   18
# 
# $C
#   Set1 Set2
# 4    4   14
# 9    9   19
# 
# $D
#    Set1 Set2
# 2     2   12
# 7     7   17
# 10   10   20
# 
# $E
#   Set1 Set2
# 1    1   11 
```

然后使用`lapply`计算`colSums`：

```
lapply(temp, colSums)
# $AB
# Set1 Set2 
#   22   62 
# 
# $C
# Set1 Set2 
#   13   33 
# 
# $D
# Set1 Set2 
#   19   49 
# 
# $E
# Set1 Set2 
#    1   11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:10:46.100

您可能希望使用以下方法组合生成的数据帧`rbind`：

```
tot <- rbind(b$A, b$B) 
```

# android - 在另一个活动中触发一个事件

> ID：11411787
> 
> 赞同：0
> 
> 时间：2012-07-10T10:54:14.663
> 
> 标签：android, android-event

有没有办法在堆栈中的当前活动下方触发另一个活动中的事件（当前活动下方的活动不是我的应用程序的一部分）

例如：如果应用程序'A'的活动'Act1'启动应用程序'AB'的活动'Act12'，那么'Act12'是否有办法触发'Act1'的事件（如a`backButtonPressed()`或`onPause()`等）？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:19:12.443

如果您可以通过`intent-filter`隐藏应用程序中的 访问两个应用程序的源代码，或者如果第二个应用程序已经指定了一个意图过滤器来执行您希望它执行的操作，则您只能执行此操作。`onPause()`无论如何都会在 an`Activity`被隐藏时被调用

# io - 如何让 Y.io 的全局事件跨实例广播

> ID：11411789
> 
> 赞同：2
> 
> 时间：2012-07-10T10:54:19.150
> 
> 标签：io, yui

我想监听我所有网页中的所有 io 请求，但是，当我使用下面的语法时，我只能用 yui 实例监听 io。

Y.on('io:success', myCallBack);

如何编写自定义方法/事件或其他东西来实现这一点？

我的问题实际上与以下 URL 相同：

[http://yuilibrary.com/forum/viewtopic.php?p=26009](http://yuilibrary.com/forum/viewtopic.php?p=26009)

我用谷歌搜索了一段时间，但没有找到实际的答案，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T15:47:48.863

尝试

```
(Y.io._map['io:0'] || new Y.IO()).publish({
    'io:success': { broadcast: 2 },
    'io:complete': { broadcast: 2 },
    etc.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:57:39.923

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>io.jsp</title>
<script src="/spring-test/scripts/yui_3.5.1/build/yui/yui-min.js"></script>
</head>
<body>
test

<script>

YUI().use("io-base", function(Y){

    function onSuccess(transactionid,response,arguments){
        alert('start!');
    }
    Y.Global.on('io:start',onSuccess);

});

Y1 = YUI().use("io-base", "node", function(Y1){

    Y1.publish('io:start',{broadcast : 2});
    Y1.io("http://www.yahoo.com.hk");   

});

</script>
</body> 
```

最后我得到了一个例子，但它只适用于 FF、Chrome，但在 IE 中失败：

有没有改进的请指教，谢谢。

# java - 动态创建对象

> ID：11411790
> 
> 赞同：0
> 
> 时间：2012-07-10T10:54:22.287
> 
> 标签：java

我有一个接收字符串数组的方法，我需要创建具有适当名称的对象。

例如：

```
public class temp {    
   public static void main(String[] args){

    String[] a=new String[3];
    a[0]="first";
    a[1]="second";
    a[2]="third";
    createObjects(a);

   }
   public static void createObjects(String[] s)
   {
    //I want to have integers with same names
    int s[0],s[1],s[2];
   }
} 
```

如果我收到 ("one","two") 我必须创建：

```
Object one;
Object two; 
```

如果我收到 ("boy","girl") 我必须创建：

```
Object boy;
Object girl; 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T10:55:57.837

在java中无法做到这一点。您可以改为创建`Map`谁的键是字符串，值是对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:13:08.623

First create `Map` which contains the key as String representation of `Integers`.

```
public class Temp {

static Map<String, Integer> lMap;

static {

    lMap = new HashMap<String, Integer>();
    lMap.put("first", 1);
    lMap.put("second", 2);
    lMap.put("third", 3);
}

public static void main(String[] args) {
    Map<String, Integer> lMap = new HashMap<String, Integer>();
    String[] a = new String[3];
    a[0] = "first";
    a[1] = "second";
    a[2] = "third";

    Integer[] iArray=createObjects(a);
    for(Integer i:iArray){

        System.out.println(i);
    }

}

public static Integer[] createObjects(String[] s) {
    // I want to have integers with same names
    Integer[] number = new Integer[s.length];
    for (int i = 0; i < s.length; i++) {
        number[i] = lMap.get(s[i]);
    }
    return number;
}

} 
```

# android - Android SDK - 来自 URL 的媒体播放器视频

> ID：11411792
> 
> 赞同：14
> 
> 时间：2012-07-10T10:54:24.773
> 
> 标签：android, android-mediaplayer, android-video-player

我试图找到一个简单的教程，它解释了如何将视频从 URL 加载到 android 媒体播放器中，但不幸的是我找不到任何内容！

我已经尝试了几件事来尝试让它工作，但仍然没有运气。

让 MediaPlayerActivity 仅从 URL 加载视频的最佳方法是什么？

谢谢

编辑：

我已按照建议尝试了以下代码：

```
VideoView videoView = (VideoView) findViewById(R.id.your_video_view);
MediaController mediaController = new MediaController(this); 
mediaController.setAnchorView(videoView);
videoView.setMediaController(mediaController);
videoView.setVideoURI(Uri.parse("url-here"));
videoView.start(); 
```

当我参加这项活动时，它就崩溃了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-10T11:05:16.890

您可以使用[VideoView](http://developer.android.com/reference/android/widget/VideoView.html)。这是一个例子：

```
VideoView videoView = (VideoView) findViewById(R.id.videoView);
//Use a media controller so that you can scroll the video contents
//and also to pause, start the video.
MediaController mediaController = new MediaController(this); 
mediaController.setAnchorView(videoView);
videoView.setMediaController(mediaController);
videoView.setVideoURI(Uri.parse(videoUrl));
videoView.start(); 
```

**编辑**

您应该使用此代码提供 URI（有一个`String url`变量，其中有视频的 url）`Uri.parse(url)`。并且还要确定网址是否合适。此外，您是否按照 AkashG 的建议为您的应用提供了适当的权限（因为它使用互联网，您需要`<uses-permission android:name="android.permission.INTERNET" >`在您的应用中添加`Manifest.xml`）？最后，您应该`MediaPlayerActivity`在应用程序的`Manifest.xml`

**编辑结束**

您也可以使用[MediaPlayer](http://developer.android.com/reference/android/media/MediaPlayer.html)。Android 开发者网站在[这里](http://developer.android.com/guide/topics/media/mediaplayer.html)有一个很好的教程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-10T11:02:58.463

您可以从 url 加载视频：

```
VideoView videoView = (VideoView) findViewById(R.id.view);
MediaController controller = new MediaController(this);
videoView.setVideoPath("url of the video");
videoView.setMediaController(controller);
videoView.start(); 
```

在清单文件中添加**互联网权限。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:07:59.090

我认为您可以在这里找到有用的[想法……](http://www.41post.com/3024/programming/android-loading-and-playing-videos-from-different-sources)关于从不同来源播放视频。

如果您使用模拟器，首先，不要使用模拟器来测试视频播放。它处理视频播放的能力非常有限。使用实际的 Android 设备。

其次，当您遇到多媒体问题时，请务必检查 LogCat（Eclipse 中的 adb logcat、DDMS 或 DDMS 透视图）是否有警告。OpenCORE——Android 使用的多媒体引擎——倾向于将错误级别的情况记录为警告。

例如，您的视频文件可能未设置为渐进式下载，而这是 HTTP 流式传输所必需的。在 Linux 上，您可以通过安装 MP4Box 并运行 MP4Box -hint 来修补 MP4 视频以进行渐进式下载。

希望这个解释对你有用..

# html - 如何热点可调整大小的图像？

> ID：11411793
> 
> 赞同：2
> 
> 时间：2012-07-10T10:54:32.837
> 
> 标签：html, css, resize

我想热点到 html 页面上显示的图像中的区域。但是，此图像会根据显示屏幕更改宽度和高度：

```
<img height="100%" width="100%" src="img.png"/> 
```

我该如何热点呢？我正在考虑一个将原始坐标映射到调整大小图像的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:05:30.587

您可以将图像和热点放置在相对定位的元素中，然后使用百分比绝对定位热点：

**CSS**

```
.hotspotted {
    position: relative;
}

.hotspot {
    display: block;
    position: absolute;
}

#hotspot1 {
   height: 81%;
   left: 9%;
   top: 16%;
   width: 45%;
}

#hotspot2{
    height: 18%; 
    right: 11%;
    top: 20%;
    width: 11%;
} 
```

**HTML**

```
<div class="hotspotted">
    <img height="100%" width="100%" src="img.png"/>
    <a href="#" id="hotspot1" class="hotspot"></a>
    <a href="#" id="hotspot2" class="hotspot"></a>
</div> 
```

**更新**

如果您要使用地图，那么我建议您计算新坐标而不是使用百分比。这可以很容易地使用以下等式完成：

```
new_x = (orginal_x / original_image_width) * new_image_width
new_y = (orignal_y / original_image_height) * new_image_height 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:02:40.087

您需要将坐标 (x,y) 转换为百分比。

例如，如果您的图像是 200px 宽和 200px 高，并且您的坐标是 x=50px,y=100px，那么在转换后您会得到

```
x = 50/200*100 = 25%
y = 100/200*100 = 50% 
```

所以现在你知道你的坐标总是在屏幕左侧的 25% 和顶部的 50%，假设图像占据整个屏幕。这是你问的吗？:)

# tsql - SELECT 0 表示多行连接

> ID：11411794
> 
> 赞同：3
> 
> 时间：2012-07-10T10:54:33.453
> 
> 标签：tsql

我有`invoices`一张`payments`桌子。

对于每条`invoice`记录（包含一个`OriginalInvoiceValue`字段），付款表中可以关联多个付款。在`select`连接两个表的 a 中，每个记录当然会针对关联记录`invoice`的每次出现重复。`payment`

不过，我想要的是让每个`OriginalInvoiceValue`字段只返回一次`invoice`，然后让它为每一个额外出现的关联记录返回`0`（或）。（因此，如果我要将数据导出到 Excel 并对该列求和，我实际上会得到所有发票的真实总数，而不是让它乘以每次额外发生的付款）。`NULL``payment``OriginalInvoiceValue`

这在 T-SQL 中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:08:16.520

如果是 Sql Server 2005 或更高版本，您可以将行号分配给发票的各个付款，并留下连接到发票，仅选择第一次付款的实际发票记录。部分按您的要求下订单`row_number()`；我选择了 PaymentID，但付款日期可能更合适。

```
; with p as (
  select *,
         row_number() over (partition by InvoiceID
                            order by PaymentID) rn
    from payments
)
select *
  from p
  left join invoices i
    on p.InvoiceID = i.InvoiceID
   and p.rn = 1
order by p.InvoiceID, rn 
```

[这是带有示例的 SQL FIDDLE](http://sqlfiddle.com/#!3/aaaf9/1)。

# arrays - 消除有界类型的 Haskell 数组边界检查？

> ID：11411797
> 
> 赞同：15
> 
> 时间：2012-07-10T10:54:39.780
> 
> 标签：arrays, haskell, ghc, bounds-check-elimination

我正在制作很多数组，其索引类型为`Bounded`，其索引范围为`(minBound, maxBound)`. 对于这样的数组，边界检查应该是不必要的。如何说服 GHC 取消边界检查？

我的特定应用程序同时使用装箱和未装箱的不可变数组，但我对所有类型的 Haskell 数组都感兴趣。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-10T11:18:46.210

导入`Data.Array.Base`，计算`Int`所需元素的索引，然后使用

```
someArray `unsafeAt` computedIndex 
```

避免范围检查（`unsafeRead`和`unsafeWrite`可变数组）。如果*您*. `Int`_ _ _ _*`unsafeIndex``Ix``import GHC.Arr`*

 *如果`Ix`您的索引类型的实例不提供快速的未检查`unsafeIndex`功能，则您必须自己编写它。无论如何，这可能更可取，因为您的范围`(minBound, maxBound)`是恒定的并且不需要传递给索引计算。*

# objective-c - 全屏如何遮挡热点

> ID：11411801
> 
> 赞同：3
> 
> 时间：2012-07-10T10:55:21.130
> 
> 标签：objective-c, xcode, cocoa, fullscreen, quartz-2d

游戏全屏时如何遮挡热点？当系统中启用了热角并且游戏处于全屏状态时，当我将光标移动到任何角落时，游戏被最小化。

我像这样更改为全屏：

```
fullscreenWindow = [[NSWindowFullscreen alloc] initWithContentRect:frame styleMask:NSBorderlessWindowMask backing:NSBackingStoreBuffered defer: NO];
mainWindow = [self window];
[mainWindow setAcceptsMouseMovedEvents:NO];
[mainWindow orderOut:nil];

// Set the options for our new fullscreen window     
[fullscreenWindow setReleasedWhenClosed: YES];
[fullscreenWindow setLevel: NSFloatingWindowLevel];
[fullscreenWindow setHidesOnDeactivate:YES];            
[fullscreenWindow setContentView: self];
[fullscreenWindow makeKeyAndOrderFront:self];    
[fullscreenWindow makeFirstResponder:self];         
[fullscreenWindow setAcceptsMouseMovedEvents:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-29T04:51:31.367

当鼠标位置在顶部时，您可以更改的鼠标位置。

```
- (void)mouseMoved:(NSEvent *)theEvent
    {
        NSPoint mouseLoc;
        mouseLoc = [NSEvent mouseLocation]; //get current mouse position
        //mouse position change
        CGEventSourceRef source = CGEventSourceCreate(kCGEventSourceStateCombinedSessionState);
        int Height = (int)ScrnRect.size.height;
       // NSLog(@"Height::%d,MouSe.Y::%f",Height,mouseLoc.y);
        if(Height < mouseLoc.y+5 ){
            CGEventRef mouse = CGEventCreateMouseEvent (NULL, kCGEventMouseMoved, CGPointMake( mouseLoc.x, 5), 0);
            CGEventPost(kCGHIDEventTap, mouse);
            CFRelease(mouse);
            CFRelease(source);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T02:18:26.963

**在setLevel**中尝试更高级别： 您不仅限于 NSWindow 类参考中的级别。这些只是#define 为 Quartz/Core Graphics 中的一部分命名的其他名称。在**常量中查看它们** [https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/Quartz_Services_Ref/Reference/reference.html)

# network-programming - RFB 参考实现？

> ID：11411804
> 
> 赞同：1
> 
> 时间：2012-07-10T10:55:36.607
> 
> 标签：network-programming, rfb-protocol

我正在编写一个 RFB 服务器。我想知道是否有人知道 RFB 参考客户端。

目前，我运行 RealVNC 并要求它连接到我的 RFB 服务器，它工作正常。但是，RealVNC 旨在提供良好的最终用户体验。它*并不*打算测试协议功能的每一种可能的有效组合。所以我知道 RealVNC 使用的功能是正确实现的，但我不知道 RealVNC 不使用的功能是否完全有效。但是，如果我能以某种方式进行检查，那将非常有用。

有什么建议么？

（当然，我也可以编写自己的 RFB 客户端。但这并不能证明任何事情。如果某些东西不起作用，我无法判断是客户端还是服务器坏了。如果一切正常工作，这*仍然*不意味着两端都正确实现了 RFB，只是每个都有与另一个相同的错误。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T07:36:14.103

这可能会对您有所帮助。我曾经使用 TCP/IP builder 来制作各种十六进制代码消息（指针事件、键事件、剪切文本）将它们存储在文本文件中。现在我用来连接 tcp/ip builder 和我的 rfb/vnc 服务器。

您编写的 RFB 服务器现在将像任何 RFB 客户端一样响应此 TCP/IP 构建器，您现在可以验证每个场景（不完整的有效负载、错误的消息编号、额外的有效负载、消息乱序等）

> 如果您的服务器在连接到服务器后没有响应 rfb 版本号信息，请确保选择“Parse Ascii”选项。

为了生成初始消息，您可以记录 Wireshark 日志，以便在您的 rfb 服务器和真正的 vnc 之间成功进行正确的 rfb 会话，然后使用这些消息通过 TCP/IP 构建器测试您的 RFB 服务器。

> RFB 版本信息可以像这样 "RFB 003.008" 发送，但是对于消息的其余部分，您将不得不使用十六进制符号，就像看到的网络日志 (pcap/wireshark)
> 
> 示例：这是如何将帧缓冲区请求消息发送到您的服务器（800 x 480 非增量）
> 
> 0x030x000x000x000x000x000x030x200x010xe0

# css - 具有多个图像的CSS背景渐变

> ID：11411807
> 
> 赞同：0
> 
> 时间：2012-07-10T10:55:43.680
> 
> 标签：css, background-image

我想创建一个带有纹理背景、渐变和左对齐图标的按钮。这是我拥有的代码，但没有显示背景渐变。

```
background:#B1D521;
background-image: url(../images/icon-heart.png), url(../images/bg-tile.png), linear-gradient(bottom, rgb(152,185,32) 42%, rgb(177,213,33) 71%);
background-image: url(../images/icon-heart.png), url(../images/bg-tile.png), -o-linear-gradient(bottom, rgb(152,185,32) 42%, rgb(177,213,33) 71%);
background-image: url(../images/icon-heart.png), url(../images/bg-tile.png), -moz-linear-gradient(bottom, rgb(152,185,32) 42%, rgb(177,213,33) 71%);
background-image: url(../images/icon-heart.png), url(../images/bg-tile.png), -webkit-linear-gradient(bottom, rgb(152,185,32) 42%, rgb(177,213,33) 71%);
background-image: url(../images/icon-heart.png), url(../images/bg-tile.png), -ms-linear-gradient(bottom, rgb(152,185,32) 42%, rgb(177,213,33) 71%);
background-repeat:no-repeat, repeat;
background-position:10% center; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T15:02:03.367

我最终想出了答案。这是一种解决方法，但我在按钮内添加了一个具有相同宽度和高度的跨度并将其设置为透明，然后在将鼠标悬停在按钮上时，我对按钮的不透明度进行了转换。这样我就可以用多个背景和渐变来伪造过渡。

[http://jsfiddle.net/gBDAy/](http://jsfiddle.net/gBDAy/)

# arrays - jquery/ajax- 将数组（非空）发布到 ac# webservice 的函数

> ID：11411810
> 
> 赞同：0
> 
> 时间：2012-07-10T10:56:03.167
> 
> 标签：arrays, web-services, jquery

我尝试将包含两个整数的数组传递给 web 服务的函数：

```
[WebMethod]
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)]
public bool sample(int number, int[] numbers)
{
    return (numbers.Sum() > number);
} 
```

我用 jquery.ajax 来做：

```
var arr = ['20', '89'];

$.ajax({ url: "Registration.asmx/sample",
    data: jQuery.param({ 'number': '300', 'numbers[]': arr }),
    type: "POST",
    success: function (data) {
        $('#result').html(data.toString());
    },
    error: function (xhr, ajaxOptions, thrownError) {
        $('#result').html(jQuery.param({ 'number': '300', 'numbers': arr }) + "<br/><br/>" +
                      thrownError + "<br/><br/>" +
                      xhr.responseText);
    }
}); 
```

但我总是收到关于空数组的服务器内部错误（我认为）![没有任何](../Images/2fe987a00feb457c694935d9c5dff9a7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:10:52.727

try changing :

```
data: jQuery.param({ 'number': '300', 'numbers[]': arr }), 
```

to:

```
data: jQuery.param({ 'number': '300', 'numbers': arr }), 
```

**EDIT:**

You are stating that the method accepts GET requests:

```
[ScriptMethod(UseHttpGet = true, ResponseFormat = ResponseFormat.Json)] 
```

But in the javascript you are using POST:

```
type: "POST", 
```

change it to:

```
type: "GET", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:35:52.560

现在我看到我必须以某种方式创建以下网址：Registration.asmx/sample?number=30&numbers=55&numbers=88 (numbers:30, numbers[55,88])

我只知道一种方法：创建一个字符串：/你知道可以处理这个问题的 js/jquery 方法吗？（jquery.param 创建一个类似 Registration.asmx/sample?number=30&numbers[]=55&numbers[]=88 的 url，这是不可接受的..）

# iphone - 使用私钥的 iPhone 解密 - 用 Ja va 加密的数据

> ID：11411815
> 
> 赞同：0
> 
> 时间：2012-07-10T10:56:29.990
> 
> 标签：iphone, rsa, private-key, encryption-asymmetric

任何人都可以帮助代码如何使用私钥解密，因为在服务器端他们使用的是 OAEP 加密方法。我尝试使用私钥解密，但解密后的文本为 Null，我得到的错误代码为 -9809 作为解密代码结果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:01:13.457

当您说“使用私钥”时，我假设您的意思是您正在使用`SecKeyDecrypt()`非对称加密而不是 CommonCryptor 进行对称加密。

`SecKeyDecrypt()`不支持OAEP。它仅支持 PKCS1 v1.5 填充 ( `kSecPaddingPKCS1`)。它还可以在技术上处理 ASN.1 填充 + PKCS1 填充，但这通常与解密无关。当您传递 SecPadding 参数时，您应该已经注意到这一点。你通过了什么？

该错误号是`errSSLCrypto`通用的“加密出现问题”消息。

# java - Spring Controller 返回未格式化的 json

> ID：11411816
> 
> 赞同：0
> 
> 时间：2012-07-10T10:56:32.610
> 
> 标签：java, json, model-view-controller, spring-mvc, jackson

我已将我的应用程序配置为返回 html、json 或 xml 视图。html 和 xml 视图很好，但 json 视图有问题。

返回的 json 总是以“{} &&”为前缀

例子

```
{} && {"asd":{"name":"Practical Spring LDAP","isbn":"978-1475265453","author":"Balaji Varanasi"}} 
```

我渲染视图的弹簧配置是

```
<bean class="org.springframework.web.servlet.view.ContentNegotiatingViewResolver">
      <property name="mediaTypes">
        <map>
          <entry key="html" value="text/html"/>
          <entry key="json" value="application/json"/>
          <entry key="xml" value="application/xml"/> 
        </map>
      </property>
      <property name="viewResolvers">
        <list>
          <bean class="org.springframework.web.servlet.view.UrlBasedViewResolver">
            <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
            <property name="prefix" value="/WEB-INF/jsp/"/>
            <property name="suffix" value=".jsp"/>
          </bean>
        </list>
      </property>
      <property name="defaultViews">
        <list>
          <bean class="org.springframework.web.servlet.view.json.MappingJacksonJsonView">
            <property name="prefixJson" value="true"/>
          </bean>

          <bean class="org.springframework.web.servlet.view.xml.MarshallingView">  
             <constructor-arg>  
                 <bean class="org.springframework.oxm.jaxb.Jaxb2Marshaller">  
                     <property name="classesToBeBound">  
                         <list>  
                             <value>com.sam.beans.Book</value>  
                          </list>  
                     </property>  
                 </bean>  
             </constructor-arg>  
         </bean>  
        </list>
      </property>
    </bean> 
```

样品控制器

```
@RequestMapping("/getBook")
public String showBook(Model model)  
{  
    model.addAttribute("book", new Book("Practical Spring LDAP", "978-1475265453", "Balaji Varanasi"));  

    return "book";  
} 
```

需要帮助...

更新：为 Book 添加类定义

```
@XmlRootElement(name="book")  
public class Book  
{  
    private String name;  
    private String isbn;  
    private String author;  

    public Book()  
    {  

    }  

    public Book(String name, String isbn, String author)  
    {  
        this.name = name;  
        this.isbn = isbn;  
        this.author = author;  
    }  

    public String getName() {  
        return name;  
    }  
    public void setName(String name) {  
        this.name = name;  
    }  
    public String getIsbn() {  
        return isbn;  
    }  
    public void setIsbn(String isbn) {  
        this.isbn = isbn;  
    }  
    public String getAuthor() {  
        return author;  
    }  
    public void setAuthor(String author) {  
        this.author = author;  
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T13:34:53.483

`@ResponseBody`与服务请求的函数的返回类型一起使用。

```
@RequestMapping("/getBook")
public @ReponseBody 
String showBook(Model model)  
{  
    model.addAttribute("book", new Book("Practical Spring LDAP", "978-1475265453", "Balaji Varanasi"));  

    return "book";  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:44:10.910

固定的

现在正在使用 ModelAndView，在视图中我给了 MappingJacksonJsonView。

```
ModelAndView modelAndView = new ModelAndView(new MappingJacksonJsonView(),"book", new Book("Practical Spring LDAP", "978-1475265453", "Balaji Varanasi")); 
```

不知道只使用模型有什么问题。

# iphone - 如何使 NSManagedObject NSString 属性使用“复制”而不是“保留”？

> ID：11411824
> 
> 赞同：6
> 
> 时间：2012-07-10T10:57:05.670
> 
> 标签：iphone, objective-c, core-data

默认情况下，当从数据模型创建 NSManagedObject 子类文件时，Core Data 会为字符串类型的列创建 NSString（非原子，保留）类型的属性。出于性能考虑，我可能会完成，但是，我正在实现数据映射器模式，其中核心数据 NSManagedObject 子类与模型类分开。因此，当将模型类转换为核心数据 NSManagedObject 子类时，retain 只分配一个指针而不是一个副本。从架构的角度来看，它打破了核心数据访问和模型类之间的逻辑分离，所以我需要使用复制而不是保留。

唯一的方法是手动更改 NSManagedObject 子类中的属性吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:00:09.157

这样做的唯一方法是更改​​ NSManagedObject 子类中的属性声明。值得庆幸的是，Core Data 会自动处理其余部分。

# javascript - 通过 jquery 损坏的轮播添加 css 样式

> ID：11411826
> 
> 赞同：1
> 
> 时间：2012-07-10T10:57:10.340
> 
> 标签：javascript, jquery, html, css

这是所有的javascript代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="assets/templates/default/_scripts/jquery.innerfade.js"></script>
<script type="text/javascript">
    $(document).ready( function(){
        $('.rotation ul').addClass('image_rotation');
        $('.image_rotation').css("display","block");
        $('.image_rotation').innerfade({
            speed: 'slow',
            timeout: 10000,
            type: 'sequence'
        });
    });
</script>
<script type="text/javascript">
 var save_url = "background-font-size-save.html"
 $(document).ready(function () {
  /*  Images: rotate, frame, shadow  */
  $('.rotation ul li img').each(function() {
    if ($(this).is(":first-child")) {
      var m_left=0;
      var m_top=0;
    }
    else {
      var m_left=0;
      var m_top=0;
      m_left = parseInt($(this).prev().attr("width")) + parseInt($(this).prev().css('margin-left'));
      if (parseInt(m_left)+parseInt($(this).attr("width")) > 430) {
        m_left=0;
        m_top=250-parseInt($(this).attr("height"));
      }
    }
    var r_rand = Math.floor(Math.random() * 10) - 5;
    $(this).css({'border':'5px #ffffff solid','border-radius':'10px','transform':'rotate('+r_rand+'deg)','-moz-transform':'rotate('+r_rand+'deg)','-webkit-transform':'rotate('+r_rand+'deg)','-ms-transform':'rotate('+r_rand+'deg)','box-shadow':'4px 4px 10px -3px #000000','position':'absolute','margin':m_top+'px 0 0 '+m_left+'px'});
  });
  /*  images end  */
  background(5);
  $('html').css('font-size', 14);
  var originalFontSize = $('html').css('font-size');
 });
 function background(n) { $('.wrap').css("background","url(assets/templates/default/images/bg"+n+".jpg)"); $.ajax({ type: "POST", url: save_url, data: { background: n } }); return false; }
 function big_font() {
  var currentFontSize = $('html').css('font-size');
  var currentFontSizeNum = parseFloat(currentFontSize, 10);
  var newFontSize = currentFontSizeNum*1.1;
  $('html').css('font-size', newFontSize);
  $.ajax({ type: "POST", url: save_url, data: { font_size: newFontSize } });
  return false;
 }
 function small_font() {
  var currentFontSize = $('html').css('font-size');
  var currentFontSizeNum = parseFloat(currentFontSize, 10);
  var newFontSize = currentFontSizeNum*0.9;
  $('html').css('font-size', newFontSize);
  $.ajax({ type: "POST", url: save_url, data: { font_size: newFontSize } });
  return false;
 }
</script> 
```

我有几个图像，我想旋转，添加边框，阴影。但我也使用 jquery 插件来旋转 li 内容。html看起来像这样：

```
<div class="rotation">
 <ul>
  <li><img src=".." width=".." height=".." /></li>
  <li><img src=".." width=".." height=".." /><img src=".." width=".." height=".." /></li>
  <li><img src=".." width=".." height=".." /><img src=".." width=".." height=".." /><img src=".." width=".." height=".." /></li>
 </ul>
</div> 
```

我遇到的问题是，如果我添加到每个图像阴影，旋转它，边框，使用这个 jquery 代码，每个 li 标签的内容不会消失并且它一直显示。如果我删除添加阴影、边框等的代码，它会同时显示一个 li 内容。这是为什么？如何在不损坏轮播的情况下将所有样式添加到每个图像中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T17:30:50.140

您可能必须编辑插件并查找它如何/在何处生成元素的渲染并附加您的新样式。有些插件具有您可以传递的属性以进行自定义，有些则没有。

# android - 如何在没有 BROADCASTRECEIVER 的情况下以编程方式从通过广播发送意图的服务中获取附加信息？

> ID：11411827
> 
> 赞同：0
> 
> 时间：2012-07-10T10:57:16.170
> 
> 标签：android, android-intent, broadcastreceiver, android-activity, android-service

我想知道如何在没有广播接收器的情况下在服务和活动之间传递数据。

这是我做不到的：

1.  我有一个通过广播定期发送意图的服务。
2.  我想在需要时从活动中获取此意图的额外内容，而无需等待广播接收器。

我尝试使用此代码：

```
 \\Service
  String BROADCAST_ACTION = "ACTION";
  Intent sendToUI = new Intent(BROADCAST_ACTION);
  sendToUI.putExtra("key", "value");
  sendBroadcast(sendToUI);

  \\Activity
  IntentFilter iF = new IntentFilter(MyService.BROADCAST_ACTION);
  Intent intent = c.registerReceiver(null, iF);
  Bundle extras = intent.getExtras();
  if(extras != null){
      String string = intent.getStringExtra("key");
 } 
```

但我得到一个`nullpointerexception`因为`intent`总是`null`（我`nullpointerexception`不是在捆绑附加服务中，而是在`Intent intent`排队中）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:07:04.223

为了做到这一点，您定期发送的广播必须“闲逛”，以便活动可以在需要时获取它。

在您的服务中，您需要将此广播作为“粘性”发送，如下所示：

```
// Service
String BROADCAST_ACTION = "ACTION";
Intent sendToUI = new Intent(BROADCAST_ACTION);
sendToUI.putExtra("key", "value");
sendStickyBroadcast(sendToUI); 
```

您必须拥有 BROADCAST_STICKY 权限才能使用此 API。如果您不持有该权限，则会抛出 SecurityException。

**编辑：为 Activity 添加代码以读取它：**

```
// Activity
IntentFilter iF = new IntentFilter(MyService.BROADCAST_ACTION);
Intent intent = c.registerReceiver(null, iF);
if (intent != null && intent.hasExtra("key")) {
    String string = intent.getStringExtra("key");
    // Now do something with it...
} 
```

另外，我建议您更改用于“MyService.BROADCAST_ACTION”的字符串以包含您的完全限定包名称。这是因为如果您只使用“ACTION”，可能还有其他应用程序也在发送粘性使用该操作进行广播，您将无法确保获得您想要的那个（即：您的服务发送的那个）。使用这样的东西（在您的服务类中）：

```
String BROADCAST_ACTION = "com.mycompany.myapplication.ACTION"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T10:59:07.657

试试这个

```
extras.getStringExtra("key"); 
```

你用过吗

```
 @Override
    public void onReceive(Context context, Intent intent) {
    } 
```

# ios - 苹果会允许这种非公共方法吗？

> ID：11411828
> 
> 赞同：0
> 
> 时间：2012-07-10T10:57:16.060
> 
> 标签：ios, app-store, app-store-connect

我正在使用一些非公开的方法来更好地控制我的应用程序的幻灯片效果，例如：

```
[self dismissModalViewControllerWithTransition:2]; 
```

在尝试使用应用程序加载器上传我的应用程序后，我收到消息说我不能使用这种非公共方法。我在 stackoverflow 中找到了一个很好的解决方法：[Apple 如何知道您正在使用私有 API？](https://stackoverflow.com/questions/2842357/how-does-apple-know-you-are-using-private-api)

所以，我修改了我的代码：

```
int tvalue = 2;
objc_msgSend(self, sel_getUid("dismissModalViewControllerWithTransition:"), tvalue); 
```

更改代码后，Application Loader 确实接受了我的二进制文件。所以我的问题是：当应用程序被苹果修改时，我会遇到任何问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:15:52.260

你不能。您的应用程序没有被拒绝，因为 Apple 无法正确跟踪您的代码。跳过使用非公共方法。

# php - 将数据放入 URL

> ID：11411829
> 
> 赞同：0
> 
> 时间：2012-07-10T10:57:19.757
> 
> 标签：php, get

我的 PHP 代码有问题，我试图将从数据库中获取的一些信息放入 URL 中，以便稍后我可以使用 $_GET。

问题是使用以下代码：

```
foreach ($get_wh_list as $key => $value) 
{
    echo $value['id'] . "<br />";
    echo "<a href='?action=hot&&id='" . $value['id'] . "'>" . $value['wh_title'] . "</a><br />";
} 
```

正如您所看到的，我正在打印 id 值，当我运行此页面时，id 会显示出来，但是当我单击链接时，id 不会出现在 URL 中。有任何想法吗？我真的想不出为什么要为我的生活。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:00:16.753

去掉多余的“&”

```
foreach ($get_wh_list as $key => $value) 
{
  echo $value['id'] . "<br />";
  echo "<a href='?action=hot&id='" . $value['id'] . "'>" . $value['wh_title'] . "</a><br />";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:17:06.680

也许最好为这些东西使用经过测试和工作的功能

使用[http_build_query();](http://us.php.net/manual/en/function.http-build-query.php) 序列化数组以查询字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:07:16.087

在 url 中只放一个 '&' 而不是两个 '&&'

例子 ：

```
echo "<a href='?action=hot&id='" . $value['id'] . "'>" . $value['wh_title'] . "</a><br />"; 
```

# search - Solr 中 DataImportScheduler 的用途是什么？它可以在不更改架构的情况下处理增量导入吗？

> ID：11411832
> 
> 赞同：0
> 
> 时间：2012-07-10T10:57:28.977
> 
> 标签：search, solr

我在 Solr 中配置了 DataImportScheduler，它命中了属性文件中 params 属性中指定的 URL，它是否可以在不更改数据库架构的情况下处理增量导入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:24:48.860

如果没有表中最后修改的列，DIH 无法处理增量导入。
DIH delta 通过将构建的最后一个成功时间戳与最后修改的列进行比较来工作，并且只选择那些晚于最后一个成功构建的修改。

例如

```
<entity name="item" pk="ID"   query="SELECT * FROM item"   deltaImportQuery="SELECT * FROM item
    WHERE id = '${dataimporter.delta.id}'"   deltaQuery="SELECT id FROM item
    WHERE last_modified > '${dataimporter.last_index_time}'"> 
```

但是，如果表中没有指示符指示相同，则增量导入将无法识别新添加/更新的行。
此外，删除的行应该可能是软删除以启用识别。
如果您进行硬删除，即使从表中删除，文档仍会在您的索引中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:21:38.300

DataImportScheduler's sole purpose is to simply fire HTTP Post command with params and interval specified in its properties file to allow easy scheduling on Windows servers (where there are no cron jobs). It has nothing to do with db schema.

You're not allowed to add nullable [timestamp column](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html) in your tables?

# javascript - 拖动任何devexpress组件时如何防止其他元素突出显示？

> ID：11411840
> 
> 赞同：1
> 
> 时间：2012-07-10T10:58:13.503
> 
> 标签：javascript, jquery, asp.net, google-chrome, devexpress

刚刚将我的 devexpress 版本更新到 12.1，现在所有可拖动元素突出显示 Chrome 上的背景元素（20.0.1132.47 m）。

例如，当我拖动拆分器时，所有页面都在闪烁，当我拖动 ASPxPivotGrid 或 ASPxGridView 字段时，字段有时会突出显示，附近的元素会突出显示，然后我拖过它们。在 ASPxGridview 中，当我重新调整列的大小并且将鼠标向上或向下移动一点时，几乎所有标题突出显示。当我在 ASPxPivotGrid 自定义表单中拖动字段时，也有不需要的突出显示。

顺便说一句，在 IE9、FF11、Opera 11.6 中运行良好。

它是devexpress错误吗？如何修复它，以便拖动不会突出显示背景元素？也许某种全局 jquery 函数会有所帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T09:24:00.700

您可以使用以下方法防止在整个文档中进行选择：

```
$(document).on("selectstart", false); 
```

您可以通过删除该事件处理程序再次启用选择：

```
$(document).off("selectstart", false); 
```

您可以在元素上禁用选择`mousedown`，并在`mouseup`. 用户触发的位置无关紧要`mouseup`，因此请将其附加到：http `document`: [//jsfiddle.net/Wdj6w/](http://jsfiddle.net/Wdj6w/)。

```
$("div").on("mousedown", function() {
  $(document).on("selectstart", false);
});

$(document).on("mouseup", function() {
  $(document).off("selectstart", false);
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-10-22T16:12:26.107

您还可以通过 CSS 的`user-select`属性阻止选择。像这样：

```
 <div style="-webkit-user-select: none; -ms-user-select: none; -moz-user-select: none;">
   <p>I cannot be selected</p>
 </div> 
```

请参阅[这篇 css 技巧文章](https://css-tricks.com/almanac/properties/u/user-select/)

# iphone - 如何将一种货币价值转换为另一种货币价值

> ID：11411841
> 
> 赞同：0
> 
> 时间：2012-07-10T10:58:16.403
> 
> 标签：iphone, objective-c, ios, web-services

我是 iPhone 应用程序开发的新手。现在我正在开发 iPhone 应用程序。在我的应用程序中，我需要使用货币转换。如何将一种货币价值转换为另一种货币价值。如果有任何一个 API 实现了这个，请添加链接，或者有示例代码添加那个 url，这对开发很有帮助。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:01:18.943

转到 google.com，然后搜索可编程网络。它将为您列出所有不同类型的 Web 服务，然后您可以选择一种并在您的应用程序中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:10:43.540

使用免费的网络服务来检索货币汇率。这是你唯一需要的，剩下的就是数学。这是一个[免费的、每小时更新的汇率](http://openexchangerates.org/documentation/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:31:55.410

使用将返回 json 的 google rest api 服务

[http://www.google.com/ig/calculator?hl=en&q=1USD%3D%3FINR](http://www.google.com/ig/calculator?hl=en&q=1USD%3D%3FINR)

在这里将 1USD 转换为 INR

# html - 从表格到浮动布局

> ID：11411843
> 
> 赞同：-1
> 
> 时间：2012-07-10T10:58:19.100
> 
> 标签：html, css

据我所知，最好避免使用页表布局。

我有以下页面： http: [//leroma.org.ua/index0.html](http://leroma.org.ua/index0.html)

1.  我想要一个 15% 大小的视口标题 - 用 JS 解决，因为 body 没有 100% 的高度；我想在标题的左侧有一个按高度缩放的徽标（它的标题是高度，但宽度是按比例缩放的） - 通过添加 max-width, max-height:100% 来解决；现在壁纸位于图像下方。如何将它放在左图像和右边框之间？

2.  button_table 看起来不错，但我怎样才能不使用表格来做同样的事情呢？

    如果我的实施可以更好，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T12:57:41.127

1.  添加这个

    ```
    html,body,#page {height: 100%}
    #header {height: 15%}
    #header_wallpaper {overflow: hidden} 
    ```

    不需要 JS

2.  检查modernizr.com

    有一个社区插件 css-displaytable 使用

    ```
    display: table  
    display: table-row  
    display: table-cell 
    ```

# d3.js - 在 D3.js 可视化库中创建力布局

> ID：11411845
> 
> 赞同：1
> 
> 时间：2012-07-10T10:58:25.993
> 
> 标签：d3.js, force-layout

我正在做一个项目，该项目可视化书籍之间的引用。值得一提的是，我是 Javascript 的初学者。因此，我无法通过阅读 D3.js API 参考来走得更远。我使用[了这个示例代码](http://bl.ocks.org/2949937)，效果很好。

我的 CSV 文件的结构是这样的：

```
source,target
"book 1","book 2"
"book 1","book 3" 
```

等等

源和目标通过链接连接。这些是布局的要点：

1.  分别为源节点和目标节点创建两个不同的圆圈。

2.  为源节点和目标节点设置特定颜色。

3.  圆圈应由书籍信息标记，例如，源节点标记为“书籍 1”，目标节点标记为“书籍 2”。

4.  如果目标之间存在链接，则使此特定链接比从源到目标的其他链接更宽。

我希望你能通过创建这些点来帮助我。

提前致谢。

最好的问候埃涅阿斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T22:48:20.457

d3.js 处理 json 数据文件比处理 csv 文件要好得多，所以我建议以某种方式将你的 csv 数据转换为 json 格式。我最近编写了与此类似的代码，并且我将节点和链接作为字典存储在 json 文件中，格式如下：

```
{ 
'links': [{'source': 1, 'target': 2, 'value': 0.3}, {...}, ...],
'nodes': [{'name': 'something', 'size': 2}, {...}, ...]
} 
```

这允许您按如下方式初始化节点和链接（在启动视图之后）：

```
d3.json("data/nodesandlinks.json", function(json) {
var force = self.force = d3.layout.force()
    .nodes(json.nodes)
    .links(json.links)
    .linkDistance(function(d) { return d.value; })
    .linkStrength(function(d) { return d.value; })
    .size([width, height])
    .start();

var link = vis.selectAll("line.link")
    .data(json.links)
    .enter().append("svg:line")
    .attr("class", "link")
    .attr("source", function(d) { return d.source; })
    .attr("target", function(d) { return d.target; })
    .style("stroke-width", function(d) { return d.value; });

var node = vis.selectAll("g.node")
    .data(json.nodes)
    .enter().append("svg:g")
    .attr("class", "node")
    .attr("name", function(d) { return d.name; })
    .call(force.drag); 
```

希望这有帮助！

# .net - 无论如何可以在 Visual Studio 2010 中轻松移动整个方法块

> ID：11411846
> 
> 赞同：14
> 
> 时间：2012-07-10T10:58:28.937
> 
> 标签：.net, vb.net, visual-studio-2010

我有一个包含多种方法的程序，但是，当我添加了新方法时，其中一些在源代码文件中的逻辑顺序不正确。我在想：

*   有没有一种方法可以轻松地重新排序文件中的函数，而不必突出显示整个方法，并将其剪切并粘贴到正确的顺序？例如，是否有某种方法可以查看列表中的所有方法并将列表中的项目拖到新的顺序中？
*   是否有一种工具可以分析我的源代码并自动建议它认为对我的方法最合乎逻辑的顺序，然后为我重新排序？

我对此做了一些研究，我能找到的唯一答案是使用：

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vclinkertool.functionorder%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vclinkertool.functionorder%28v=vs.80%29.aspx)

但是此工具使用文本文档将方法按所需顺序排列。有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-10-06T13:28:55.160

我正在为 Visual Studio 2015 使用 Resharper，它使用键盘快捷键上下移动整个方法。

`ctrl`+ `alt`+ `shift`+ (`up-arrow`或`down-arrow`)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-10T12:19:25.757

如果您只是在寻找一种在代码编辑器窗口中剪切和粘贴/拖动整个方法的简单方法，您可以使用 Visual Studio 中的代码大纲功能来实现。

1.  在菜单中选择**编辑 > 大纲 > 折叠到定义**选项。这将导致所有方法和属性在编辑器窗口中显示为单行。
2.  然后，您可以轻松查看订单并将它们剪切并粘贴到正确的订单中。您也可以使用鼠标选择整个方法行并将其拖动到文件中的新位置。

我以前从未使用过 ReSharper，所以我无法谈论实际的功能，但是在快速搜索网络以获得比源代码大纲选项更好的解决方案时，我发现 ReSharper 可能会使用他们的“文件结构”来支持这一点对话：

[http://www.jetbrains.com/resharper/features/navigation_search.html#File_Structure](http://www.jetbrains.com/resharper/features/navigation_search.html#File_Structure)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T12:25:42.100

*是否有一种工具可以分析我的源代码并自动建议它认为对我的方法最合乎逻辑的顺序，然后为我重新排序？*

市场上没有任何东西可以为您做到这一点。

对于代码文件的手动操作，请查看[Resharper](http://www.jetbrains.com/resharper/)，其中包括用于在代码文件中向上/向下移动方法、属性或字段的[键盘快捷键。](http://www.jetbrains.com/resharper/webhelp/Reference__Keyboard_Shortcuts.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-28T14:43:54.760

Visual Studio的[CodeMaid](https://www.codemaid.net/)扩展具有 Reorganize Active Document 功能，该功能将移动 C# 代码块并按照 Microsoft 的 StyleCop 约定或您自己的偏好添加区域标签。

# python - 如何检索 LDAP 数据库的所有属性

> ID：11411847
> 
> 赞同：7
> 
> 时间：2012-07-10T10:58:31.930
> 
> 标签：python, ldap, python-ldap

我正在使用**python**的**ldap 模块**连接到**ldap 服务器**。我可以查询数据库但我不知道如何***检索数据库中存在的字段***，以便我可以提前通知用户查询数据库，告诉他他试图访问的字段不在数据库中.

 *****例如，如果存在的字段只是

```
cn
memberOf 
```

如果用户尝试使用过滤器查询数据库

```
cn and memberOf and notcontained 
```

我应该能够知道***notcontained***属性不在 dabase 模式中。

我怎样才能做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-15T05:10:57.217

您需要阅读 ldap 服务器的架构。

这段代码可能对你有用，就像模板一样

```
#!/usr/bin/env python
#coding:utf-8
# Author:  peter --<pjl@hpc.com.py>
# Purpose: Tareas comunes a utilizar con respecto a schemas ldap
# Created: 01/05/12
import ldap
import ldap.schema

########################################################################
class SchemasIPA(object):

    __ldaps = ldap.schema

    #----------------------------------------------------------------------
    def __init__(self, url):
        """Constructor"""
        ldap._trace_level = 0
        ldap.set_option(ldap.OPT_DEBUG_LEVEL,0)
        subschemasubentry_dn, self.schema = ldap.schema.urlfetch(url,ldap._trace_level)
        self.oc_tree = self.schema.tree(ldap.schema.ObjectClass)        
        self.at_tree = self.schema.tree(ldap.schema.AttributeType)        

    def getobjectclasses(self):
        """
        trae la listas de objectclasses de un servidor dado
        """
        allobjc = {}
        for a in self.oc_tree.keys():
            objc = self.schema.get_obj(ldap.schema.ObjectClass, a)

            if objc != None:
                allobjc[objc.oid] = (objc.names, objc.must, objc.may, objc.sup, objc.obsolete)

        return allobjc

    def getatributes(self):
        """
        trae la lista de atributos de un servidor dado
        """
        allatt= {}
        o = []
        for a in self.at_tree.keys():
            att = self.schema.get_obj(ldap.schema.AttributeType, a)

            if att != None:
                allatt[att.oid] = (att.names, att.syntax, att.syntax_len, att.desc, att.collective, att.equality, att.single_value)

        return allatt

    def getvalidoid(self, objects):
        """
        retorno un valor oid libre valida para la creacion de esquemas y atributos
        el proceso valido es pedirle a la iana un oid valido, pero se tarda mas de un mes
        los oid a utilizar son valores predefinidos al momento de la instalacion del servidor ldap
        """
        pass

if __name__ == '__main__':
    sch = SchemasIPA('ldap://localhost')
    #at = sch.getatributes()
    ob = sch.getobjectclasses()

    for a, b in ob.iteritems():
        print a
        print b[0] 
```

然后你可以像这样包装这个类

```
#a file contained the above class
import schemas

olschemas = schemas.SchemasIPA(url='ldap://192.168.1.81')

#here are, some magic :)
pa = olschemas.schema.get_obj(olschemas._SchemasIPA__ldaps.ObjectClass, 'posixaccount')
pa.must #going to print all the attributes that can't be null's
pa.may #going to print all the attributes that are optional's 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-10T12:37:45.747

### 模式的根 DSE 和可能的基本 DN

假设 LDAP 客户端只关心模式中定义的属性（见`extensibleObject`下文），要确定是否`attribute`在服务器模式中定义了 an，请检索模式。`subSchemaSubEntry`在许多目录服务器中，模式的基本 DN（或基本对象）在可能存在于根 DSE中的属性中定义。有关根 DSE 的更多信息，请参阅[LDAP：根 DSE](https://ff1959.wordpress.com/2011/04/11/the-root-dse-is-that-entry-with-zero-rdns-and-contains-information-about-the-directory-server/)。为了检索根 DSE 的内容，向服务器发送一个搜索请求，该请求由 的基础对象`''`和 的搜索范围以及由和`base`组成的请求属性列表组成。`*``+`

### 可扩展对象

请注意，objectClass 的存在`extensibleObject`允许 LDAP 客户端添加它们需要的任何属性名称和值，就像 FORTRAN 垃圾公共块一样，也就是说，属性可以存在于条目中但未在模式中定义。

### subSchemaSubEntry 不存在

如果该`subSchemaSubEntry`属性不存在，请联系服务器管理员并询问有关检索模式的信息以及足够的访问权限。

### subSchemaSubEntry 存在

如果该`subSchemaSubEntry`属性存在，则通过使用该`subSchemaSubEntry`属性的值作为基础对象、搜索范围`one`和请求的属性列表向服务器发送搜索请求来读取模式`*`和`+`。属性类型定义和 objectClass 定义包含在模式中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-10T13:01:43.603

> 我正在使用 python 的 ldap 模块连接到 ldap 服务器。我可以查询数据库但我不知道如何检索数据库中存在的字段，以便我可以提前通知用户查询数据库，告诉他他试图访问的字段不在数据库中.

一个简单的解决方案是搜索然后从结果中打印一个键列表。

```
import ldap

# connect to your ldap server

some_dn = '...' # Your base dn
some_lookup = '...' # your lookup attr

result = conn.search_s(some_dn,ldap.SCOPE_SUBTREE,some_lookup)
result[0][1].keys() 
```

例如，针对我的 AD 服务器，它返回以下内容：

```
['mailNickname',
 'publicDelegatesBL',
 'logonCount',
 'cn',
 'countryCode',
 'dSCorePropagationData',
 'objectClass',
 # ... many many more
'telephoneNumber',
'physicalDeliveryOfficeName',
'name',
'memberOf',
'codePage',
'userAccountControl',
'msExchMDBRulesQuota',
'lastLogon',
'protocolSettings',
'uSNChanged',
'sn',
'msExchVersion',
'mDBUseDefaults',
'givenName',
'msExchMailboxGuid',
'lastLogoff'] 
```*****

# javascript - 禁用默认工具提示

> ID：11411851
> 
> 赞同：0
> 
> 时间：2012-07-10T10:58:44.220
> 
> 标签：javascript, jquery

这是一个工具提示脚本，[http://www.alessioatzeni.com/blog/simple-tooltip-with-jquery-only-text/](http://www.alessioatzeni.com/blog/simple-tooltip-with-jquery-only-text/)。它适用于所有浏览器，但默认工具提示在 IE 中未禁用。

如何更新以下脚本以禁用默认工具提示？

```
<script type="text/javascript">
$(document).ready(function() {
   // Tooltip only Text
   $('.masterTooltip').hover(function(){
         // Hover over code
         var title = $(this).attr('title');
         $(this).data('tipText', title).removeAttr('title');
         $('<p class="tooltip"></p>').text(title).appendTo('body').fadeIn('slow');
    }, function() {
         // Hover out code
         $(this).attr('title', $(this).data('tipText'));
         $('.tooltip').remove();
    }).mousemove(function(e) {
          var mousex = e.pageX + 20; //Get X coordinates
          var mousey = e.pageY + 10; //Get Y coordinates
          $('.tooltip').css({ top: mousey, left: mousex })
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:03:18.780

我看不出有任何理由将`title`属性添加回模糊的元素中。您将其存储在 jQuery 元数据中。我的猜测是这就是为什么 IE 仍然显示它。删除线

```
 $(this).attr('title', $(this).data('tipText')); 
```

看看是否可以解决它。

* * *

编辑：这错过了一些要求。这是未经测试的，但可能有效：

```
$(document).ready(function() {
    $('.masterTooltip').each(function() {
        var title = $(this).attr('title');
        $(this).data('tipText', title).removeAttr('title');
    }).hover(function(){
        $('<p class="tooltip"></p>')
        .text($(this).data('tipText'))
        .appendTo('body')
        .fadeIn('slow');
    }, function() {
        $('.tooltip').remove();
    }).mousemove(function(e) {
        var mousex = e.pageX + 20;
        var mousey = e.pageY + 10;
        $('.tooltip')
        .css({ top: mousey, left: mousex })
    });
}); 
```

请注意，这是次优的，因为它`$(this)`在块中调用了两次`each`，但这应该很容易修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T06:24:08.027

我有一个简单的解决方案来禁用显示在 IE 或其他浏览器左/右底部的默认工具提示。[如果您的默认工具提示与我提到的相同]

只需编写一个简单的javascript函数

```
function GoToLink()
    {
        location.href = "mypage.htm";
    } 
```

在标签中调用这个函数

```
<a id="204" name="wow" class="SettPage" href="" onclick="GoToLink()"> 
```

# sql - 不允许从数据类型 nvarchar 到 varbinary(max) 的隐式转换

> ID：11411854
> 
> 赞同：17
> 
> 时间：2012-07-10T10:58:55.910
> 
> 标签：sql, insert, dbnull, varbinarymax

当我尝试将 DBNull.Value 插入可为**空**的varbinary(max) 字段时出现此异常：

> 不允许从数据类型 nvarchar 到 varbinary(max) 的隐式转换。使用 CONVERT 函数运行此查询。

这是我的代码：

```
insertCMD.Parameters.AddWithValue("@ErrorScreenshot", SqlDbType.VarBinary).Value = DBNull.Value; 
```

我知道在 SO 上存在重复的问题，但我不像其他人那样使用任何字符串。

我错了什么？

更新：

```
using (var insertCMD = new SqlCommand("INSERT INTO TestplanTeststep (TeststepId,TestplanId,CreatedAt,ErrorText,ErrorScreenshot,TestState) VALUES (@TeststepId, @TestplanId,@CreatedAt,@ErrorText,@ErrorScreenshot,@TestState)", con))
{
 var p1 = insertCMD.Parameters.Add("@TeststepId", SqlDbType.Int);
 var p2 = insertCMD.Parameters.Add("@CreatedAt", SqlDbType.DateTime);
 insertCMD.Parameters.AddWithValue("@TestplanId", testplan.Id);
 insertCMD.Parameters.AddWithValue("@ErrorText", (object) DBNull.Value);
 insertCMD.Parameters.AddWithValue("@ErrorScreenshot", (object) DBNull.Value);
 insertCMD.Parameters.AddWithValue("@TestState", (int)Teststep.TeststepTestState.Untested);

       foreach (Teststep step in teststeps)
        {
           p1.Value = step.Id;
           p2.Value = step.CreatedAt;
           insertCMD.ExecuteNonQuery();
        }
     } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-06T05:20:39.517

我在插入列时遇到`DBNull.Value`了同样的问题。`Varbinary(Max)`谷歌搜索后，我找到了一个可能对您也有帮助的解决方案：

在添加 sql 参数时，您需要设置 size **-1**这意味着`Max`varbinary 列的长度：

```
this.cmd.Parameters.Add("@Photo", SqlDbType.VarBinary, -1).Value = DBNull.Value; 
```

所以在你的情况下：

```
insertCMD.Parameters.Add("@ErrorScreenshot", SqlDbType.VarBinary,-1).Value = DBNull.Value; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-10T11:24:06.830

为什么不将您的 SQL 更改为：

```
INSERT INTO TestplanTeststep
(TeststepId,TestplanId,CreatedAt,ErrorText,ErrorScreenshot,TestState) 
VALUES 
(@TeststepId, @TestplanId,@CreatedAt,NULL,NULL,@TestState) 
```

要不就

```
INSERT INTO TestplanTeststep
(TeststepId,TestplanId,CreatedAt,TestState) 
VALUES 
(@TeststepId, @TestplanId,@CreatedAt,@TestState) 
```

...并省略这两个参数？

如果它始终为 NULL，那将具有相同的效果。

否则，请分两行尝试：

```
var binary1 = insertCMD.Parameters.Add("@ErrorScreenshot", SqlDbType.VarBinary, -1);
binary1.Value = DBNull.Value; 
```

否则，在原始 SQL 插入语句中，您没有定义参数类型，而是传入 varbinary，因此会出现错误。

# php - 从各种表中选择数据而无需多次查询

> ID：11411855
> 
> 赞同：0
> 
> 时间：2012-07-10T10:58:57.693
> 
> 标签：php, mysql, mysql-workbench

# MySQL - 工作台（PHP）：

表：

1.  TUsers（与 TCompanies 的一对多关系）：
    *   TUsers_CompanyID（外键）
    *   TUsers_UserName
    *   TUsers_UserPassword
    *   TUsers_ID（唯一）
2.  T公司：
    *   TCompanies_CompanyName
    *   TCompanies_CompanyContactNumber
    *   TCompanies_CompanyAddress
    *   TCompanies_ID（唯一）

是否可以在不使用 JOIN 或 INNER JOIN 查询命令的情况下链接关系数据库中的多个表，而无需在表中复制数据？

因此，甚至可以用另一种方式来创建使一个表“指向”另一个表的数据的关系。

这样人们就可以查询以下内容并一次成功地从**两个**表中检索**所有数据：**

 **`MySQL:`从 TUsers 中选择 *；

### 见上面的例子..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:02:34.737

您可以在不“出现”的情况下使用连接（即，单词 JOIN 不会出现在查询中），但 MySQL 仍将执行`JOIN`...

```
SELECT *
FROM TUsers, TCompanies 
WHERE TUsers_CompanyID=TCompanies_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:20:59.447

您将无法避免必须使用 a`JOIN`来显示数据，但您可能想要做的是创建所谓的[VIEW](http://en.wikipedia.org/wiki/View_%28database%29)，这样您实际上不必在`JOIN`任何时候输入命令您要查询用户数据：

```
CREATE VIEW UsersView AS
SELECT *
FROM TUsers a
INNER JOIN TCompanies b ON a.TUsers_CompanyID = b.TCompanies_ID 
```

然后，一旦定义了视图，您就可以`UsersView`像这样选择：

```
SELECT * FROM UsersView 
```

...它会返回用户信息***以及***加​​入的公司信息。您可以将视图视为简化（或“压缩”）更复杂查询的一种方式，因为在底层，它实际上与以下内容相同：

```
SELECT *
FROM
(
    SELECT *
    FROM TUsers a
    INNER JOIN TCompanies b ON a.TUsers_CompanyID = b.TCompanies_ID
) UsersView 
```**

# c# - 控制台应用程序或 Windows 服务或任何一般进程的 System.Windows.Forms.Application.ThreadException 等效项

> ID：11411864
> 
> 赞同：6
> 
> 时间：2012-07-10T10:59:33.030
> 
> 标签：c#, catch-all

在 WinForms 我使用：

*   System.Windows.Forms.Application.ThreadException
*   System.Windows.Application.UnhandledException

**我应该为非 Winforms 多线程应用程序使用什么？**

考虑以下 C# .NET 4.0 中的完整代码：

```
using System;
using System.Threading.Tasks;

namespace ExceptionFun
{
    class Program
    {
        static void Main(string[] args)
        {
            AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException);
            Task.Factory.StartNew(() =>
                {
                    throw new Exception("Oops, someone forgot to add a try/catch block");
                });
        }

        static void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
        {
            //never executed
            Console.WriteLine("Logging fatal error");
        }
    }
} 
```

我在 stackoverflow 上看到了大量类似的问题，但没有一个包含令人满意的答案。大多数答案都是类型：“您应该在代码中包含正确的异常处理”或“使用 AppDomain.CurrentDomain.UnhandledException”。

编辑：看来我的问题被误解了，所以我重新制定了它并提供了一个更小的代码示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-18T14:25:28.443

您不需要任何等效项，该`CurrentDomain.UnhandledException`事件在多线程控制台应用程序中运行良好。但由于您启动线程的方式，它不会在您的情况下触发。您问题中的处理程序不会在 Windows 和控制台应用程序中执行。但是如果你像这样开始你的线程（例如）：

```
new Thread(() => { 
     throw new Exception("Oops, someone forgot to add a try/catch block"); 
}).Start(); 
```

它会着火。

`Task.Factory.StartNew(...)`和`CurrentDomain.UnhandledException`问题在 SO 上的许多帖子中都有讨论。在这里查看一些建议：

[使用任务并行库时如何处理所有未处理的异常？](https://stackoverflow.com/questions/2707295/how-to-handle-all-unhandled-exceptions-when-using-task-parallel-library)

[在任务中捕获异常的最佳方法是什么？](https://stackoverflow.com/questions/12980712/what-is-the-best-way-to-catch-exception-in-task)

# php - 将 XML 字符串（节点值）放入服务器文本文件中并再次检索并回显它（PHP）

> ID：11411865
> 
> 赞同：0
> 
> 时间：2012-07-10T10:59:43.890
> 
> 标签：php, xml

这是我的问题。我正在尝试从 XML url（来自 last.fm api）中检索一个值。例如艺术家的传记。

我已经知道我可以像这样简单地做到这一点（例如对于阿黛尔）：

```
<?php           
    $xml = simplexml_load_file("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=adele&api_key=b25b959554ed76058ac220b7b2e0a026");      
    $info = $xml->artist->bio->summary;
    echo $info;  
?> 
```

这将返回：

```
Adele Laurie Blue Adkins, (born 5 May 1988), is a Grammy Award-Winning English <a href="http://www.last.fm/tag/singer-songwriter" class="bbcode_tag" rel="tag">singer-songwriter</a> from Enfield, North London. Her debut album, <a title="Adele - 19" href="http://www.last.fm/music/Adele/19" class="bbcode_album">19</a>, was released in January 2008 and entered the UK album chart at #1\. The album has since received four-times Platinum certification in the UK and has sold 5,500,000 copies worldwide. The album included the hugely popular song <a title="Adele &ndash; Chasing Pavements" href="http://www.last.fm/music/Adele/_/Chasing+Pavements" class="bbcode_track">Chasing Pavements</a>. 19 earned Adele two Grammy Awards in February 2009 for Best New Artist and Best Female Pop Vocal Performance. 
```

我现在想将该结果放在一个文本文件中并将其存储在我网站上的一个文件夹中，例如：“http://mysite.com/artistdescriptions/adele.txt”。

我已经尝试过：

```
<?php
    $file_path = $_SERVER['DOCUMENT_ROOT'].'/artistdescriptions/adele.txt';

    $xml = simplexml_load_file("http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=adele&api_key=b25b959554ed76058ac220b7b2e0a026");      
    $info = $xml->artist->bio->summary;  
    file_put_contents($file_path, serialize($info));

    $file_contents = file_get_contents($file_path);
    if(!empty($file_contents)) {
       $data = unserialize($file_contents);
    echo $data;
    }
?> 
```

但不幸的是，这并没有奏效。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:16:59.467

Echo 调用魔术方法 __toString()，但序列化没有，并且在 SimpleXMLElement 中不允许序列化，所以它抛出一个异常。但是您可以自己调用 __toString() 魔术方法，这可以解决您的问题。

用我的代替你的线

```
$info = $xml->artist->bio->summary->__toString(); 
```

# jquery - 按下输入按钮时如何向元素添加类

> ID：11411867
> 
> 赞同：0
> 
> 时间：2012-07-10T10:59:51.057
> 
> 标签：jquery, addclass, enter

我有一个模态形式：

```
<button class="float-right" type="submit">Login</button> 
```

```
<div class="block-footer align-right">
<button type="button">Submit</button>
<button type="button">Submit &amp; Close</button>
<button type="button">Close</button>
</div> 
```

我怎样才能做到这一点，当用户单击 Enter 键时，“提交”按钮中的第一个被“单击”。对于单击操作很重要，因为我希望用户在单击时可以直观地看到按钮的颜色变化。

请注意，我已经执行了以下操作并将函数的执行绑定到该按钮：

```
$('#modal button:contains("Submit")').click(function () {
    submitHandler(dObj.$link, $('#main-form'), false);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:09:04.120

你可以使用[`trigger()`](http://api.jquery.com/trigger/)方法：

```
$('body').on('keyup', function(e) {
   if(e.keyCode == 13) { // when Enter key is pressed trigger click event for first button 
      $('.block-footer button:first').addClass('active').trigger('click')
   }
}); 
```

# python - 如何删除文件名中的连字符并在名称中添加一些内容？Python

> ID：11411872
> 
> 赞同：-1
> 
> 时间：2012-07-10T11:00:04.703
> 
> 标签：python

我有一个文件夹，里面有很多这样的文件：

```
2012-05-09.txt
2012-05-10.txt
2012-05-11.txt
etc. 
```

现在我想删除连字符并添加“_PHOTOS_LOG”，它最终看起来像这样：

```
20120509_PHOTOS_LOG.txt
20120510_PHOTOS_LOG.txt
20120511_PHOTOS_LOG.txt
etc. 
```

怎么做 ？

这就是现在的代码：

```
//updated the code, now its working 

import os
import glob
import os.path
import sys

src = 'D:\\testing/hyphen1'

src = r'D:\testing\test'

for fn in os.listdir(src):
    new_filename = fn.replace('-','').replace('.txt', '_PHOTOS_LOG.txt')
    fn = os.path.join(src, fn)
    new_filename = os.path.join(src, new_filename)
    try:
        os.rename(fn, new_filename)
    except (WindowsError, OSError):
        print 'Error renaming "%s" to "%s"' % (fn, new_filename)
        print sys.exc_info()[1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:17:01.977

你可以做这样的重命名：

```
import os
for filename in os.listdir("."):
    if filename.endswith(".txt"):
        newFilename = filename.replace("-", "")
        os.rename(filename, newFilename[:7]+"_PHOTO_LOG.txt") 
```

os.listdir(".") 返回当前文件夹中条目的名称 filename.endswith(".txt") 验证文件名是否是您的文本文件之一，如果是，它会删除 - 并添加 _PHOTO_LOG结束

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:02:03.367

```
new_filename = old_filename.replace("-", "").replace(".txt", "_PHOTOS_LOG.txt") 
```

这将为您提供新的文件名，如果您想重命名所有文件，则：

```
import os
for old_filename in os.listdir("."):
    new_filename = old_filename.replace("-", "").replace(".txt", "_PHOTOS_LOG.txt")
    os.rename(old_filename, new_filename) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:02:47.207

对于*当前*目录中的所有文件：

```
import os

for fn in os.listdir('.'):
   new_filename = fn.replace('-','').replace('.txt', '_PHOTOS_LOG.txt')
   os.rename(fn, new_filename) 
```

使用[os.rename()](http://docs.python.org/library/os.html?highlight=os.rename#os.rename)更改文件名。

单个文件名最终会包含一系列字符串，因此虽然您通常希望使用[os](http://docs.python.org/library/os.html)模块中的方法，但您可以简单地将它们视为字符串*，因为您不是在查看路径，而是简单的文件名*并使用[replace(](http://docs.python.org/library/stdtypes.html?highlight=replace#str.replace) )创建新名称。

--

一个文件名显示转换的示例：

```
fn ='2012-05-09.txt' 
```

然后

```
fn.replace('-','').replace('.txt', '_PHOTOS_LOG.txt') 
```

将产生`'20120509_PHOTOS_LOG.txt'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:03:11.387

您需要遍历文件列表并根据需要重命名它们：

```
import os
import glob
for name in glob.glob('*.txt'):
  newname = "%s_PHOTOS_LOG.txt" % name.replace('-','')[:-4]
  os.rename(name, newname) 
```

该`glob.glob`函数生成`.txt`当前目录中的文件列表。

# bash - 带有 if 语句的 Grep 命令

> ID：11411875
> 
> 赞同：3
> 
> 时间：2012-07-10T11:00:10.430
> 
> 标签：bash, scripting, tags, grep

考虑以下日志文​​件，

```
FSDFFDSFFDSFDS VCXVCXVCX 3343022340 IT_ON FDSFR0W3EV VXDF03
DDSDS232323SD DSADFSDA SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3QZCD
DDSDS232323SD DSADFSDA SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3QZCD
DDSDSDEERWREF FSFDSDFFDS  SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3Q
DDSDS232323SD DSADFSDA SDA32323 SDADSDQ SDAFDSADSDA 
DSADSE3QZCD FFDSFDAREDFS 23FDSFDDS  IT_ON FDSFR0W3EV VXDF03ETRRT
FFDSFDAREDFS 23FDSFDDSFK 3343022340 IT_OFF FDSFR0W3EV VXDF03ETRRT
DDSDSDEERWREF FSFDSDFFDS  SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3QZCD
DDSDS232323SD DSADFSDA SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3QZCD
FFDSFDAREDFS 23FDSFDDSFK 3343022340 IT_ON FDSFR0W3EV VXDF03ETRRT
FFDSFDAREDFS 23FDSFDDSFK 3343022340 IT_OFF FDSFR0W3EV VXDF03ETRRF
DDSDSDEERWREF FSFDSDFFDS  SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3QZCD
DDSDS232323SD DSADFSDA SDA32323 SDADSDQ SDAFDSADS SDA DSADSE3QZCD
FFDSFDAREDFS 23FDSFDDSFK 3343022340 IT_ON FDSFR0W3EV VXDF03ETRRT
FFDSFDAREDFS 23FDSFDDSFK 3343022340 IT_OFF FDSFR0W3EV VXDF03ETRR
FFDSFDAREDFS 23FDSFDDSFK 3343022340 IT_OFF FDSFR0W3EV VXDF03ETRR 
```

我必须计算发生了多少 IT_ON 到 IT_OFF 和 IT_OFF 到 IT_ON 的转换，即

```
IT_ON to IT_OFF : 3
IT_OFF to IT_ON : 2 
```

我一直在尝试将 *grep "IT_ON"* 和 *grep "IT_OFF"* 与 IF 语句一起使用，但这有点复杂。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:25:58.940

这是另一种方法：

```
 grep -Po "IT_(ON|OFF)" inputFile \
 | uniq | paste - - \
 | awk 'NR==1 && NF==2{print;f=1}END{if(f)printf "%3d\t%3d\n", NR,NR-1}' 
```

输出格式：

```
IT_ON   IT_OFF
  3       2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T15:52:36.070

假设您的数据文件名为`data.log`：

```
grep -Eo 'IT_(ON|OFF)' data.log | uniq | tail -n +2 |sort |uniq -c 
```

输出：

```
3 IT_OFF
2 IT_ON 
```

注释：

```
grep -Eo 'IT_(ON|OFF)' data.log $(: -E for extended regex, -o to only print matching part ) \
  | uniq                        $(: deduplicate adjacent items ) \
  | tail -n +2                  $(: drop the first line )        \
  | sort | uniq -c              $(: sort , then give a count for each unique item ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T11:06:21.597

```
awk '/IT_ON/ {on = 1; if (off) {on_to_off++}; off = 0} /IT_OFF/ {off = 1; if (on) {off_to_on++}; on = 0} END {print "IT_ON to IT_OFF :", on_to_off; print "IT_OFF to IT_ON :", off_to_on}' inputfile 
```

分成多行：

```
awk '
    /IT_ON/ {
        on = 1; 
        if (off) {
            on_to_off++
        }; 
        off = 0
    } 
    /IT_OFF/ {
        off = 1; 
        if (on) {
            off_to_on++
        }; 
        on = 0
    } 
    END {
        print "IT_ON to IT_OFF :", on_to_off; 
        print "IT_OFF to IT_ON :", off_to_on
    }' inputfile 
```

如果您需要使用一个 ID 来跟踪每个 ID 的转换，那么您可以对数组使用相同的技术。此外，您可能需要在第一次看到它时使用标志来设置 ON 状态，以确保将初始 ON 计为从关闭到打开的转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:24:12.757

但是，不完全是您想要的，可能会起作用：

```
sed -n 's/.*\(IT_ON\|IT_OFF\).*/\1/p' input | uniq > input.tmp
grep $(head -1 input.tmp) input.tmp | uniq -c
expr $(grep $(head -2 input.tmp | tail -1) input.tmp | wc -l) - 1
rm input.tmp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-10T14:39:47.483

在 awk 中：

```
/IT_ON/        { on=1; }
on && /IT_OFF/ { offs++; on=0; off=1; }
off && /IT_ON/ { ons++; off=0; on=1; }
END {
  printf("ON to OFF: %d\nOFF to ON: %d\n", offs, ons);
} 
```

回报：

```
ON to OFF: 3
OFF to ON: 2 
```

你可以用任何语言实现相同的逻辑，包括 shell，但这对我来说似乎是最干净的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-10T12:52:55.800

这是 bash 中的一个 shell 脚本，可以满足您的要求：

```
#!/bin/bash

testfile="test.txt"

uniques=$(command grep -o IT_O. $testfile | uniq)
count=$(echo "$uniques" | paste - - | grep -c "IT_O.[[:space:]]IT_O.")

if [[ ${uniques:0:5} = "IT_ON" ]]; then
    echo "IT_ON  -> IT_OFF: $count"
    echo "IT_OFF -> IT_ON : $(($count-1))"
else
    echo "IT_ON  -> IT_OFF: $(($count-1))"
    echo "IT_OFF -> IT_ON : $count"
fi 
```

不幸的是，我不能在测试上花费太多时间——请运行一些试验，看看它是否足够健壮，适合您的用例。

# c# - 从其他文件夹加载 dll

> ID：11411877
> 
> 赞同：2
> 
> 时间：2012-07-10T11:00:13.050
> 
> 标签：c#, c

我的 c# 应用程序正在加载一个 C# dll。这个 c# dll 通过 DllImport 加载 ac dll。我希望这两个 dll 都存在于当前工作目录的其他文件夹中。但我不想修改它的环境变量。我尝试了 SetDllDirectory 但无法加载这些 dll。你知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:14:10.300

尝试将此添加到您的配置文件中：

```
 <?xml version="1.0"?>
    <configuration>
      <runtime>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
          <probing privatePath="FolderName;OtherFolderName"/>
        </assemblyBinding>
      </runtime>
    </configuration> 
```

这些文件夹需要是您的应用程序目录的子目录。

# python - 检查对象python的属性

> ID：11411882
> 
> 赞同：0
> 
> 时间：2012-07-10T11:00:21.127
> 
> 标签：python, attributes, inspect

我在 python 中有一个对象，例如`<Person at /project/persons/id>`. 现在我想查看这个人的所有属性，比如我有这个人的名字、姓氏和头衔。我想得到的是 `{'FirstName':'Anna', 'LastName': 'Perry', 'Title' : 'Ms.'}`.

我试过`object.__dict__`了，但它也给了我其他内置属性。我只想获取用户指定的属性。谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:06:24.163

没有直接的方法可以只获取用户定义的属性。人们通常会使用笨拙的名字作为信号：

```
attrs = {}
for k in dir(my_object):
    if k.startswith("__") and k.endswith("__"):
        continue
    attrs[k] = my_object[k] 
```

# sql-server - SQL Server 创建/修改/删除*仅*您的数据库的权限

> ID：11411887
> 
> 赞同：0
> 
> 时间：2012-07-10T11:00:50.737
> 
> 标签：sql-server, sql-server-2008, security

如何在 SQL Server 2008 R2 中设置权限，以便用户可以自由创建、修改和删除数据库，但*只能是*他们自己的 - 并且不能读取、查看或修改其他任何内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:11:10.587

This can be done I guess by creating new user and not mapping any DBs created by other users.Hence this user can have permission to do anything with DBs created by him or her.

# opencv - 在 OpenCV 中使用 k-means 进行颜色分类

> ID：11411889
> 
> 赞同：5
> 
> 时间：2012-07-10T11:00:57.443
> 
> 标签：opencv, computer-vision, cluster-analysis

我想用算法对很多图像进行`K-Means`聚类。我想设置集群，以便每个集群代表图像的主色或色调。我在[使用 K-Means 的彩色图像聚类论文中读到了一些关于此的内容](http://www.ijcst.com/icaccbie11/sp1/ksneha.pdf)

有人有想法在 OpenCV 中执行此操作吗？

也许我可以比较每个图像的直方图。但是如果我有很多照片需要很长时间

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-10T11:25:19.510

您可以对图像进行矢量化，使每一行都是一组 RGB，而不是用于`cv::kmeans`聚类，例如：

```
 std::vector<cv::Mat> imgRGB;
    cv::split(img,imgRGB);
    int k=5;
    int n = img.rows *img.cols;
    cv::Mat img3xN(n,3,CV_8U);
    for(int i=0;i!=3;++i)  
      imgRGB[i].reshape(1,n).copyTo(img3xN.col(i));
    img3xN.convertTo(img3xN,CV_32F);
    cv::Mat bestLables;
    cv::kmeans(img3xN,k,bestLables,cv::TermCriteria(),10,cv::KMEANS_RANDOM_CENTERS );
    bestLables= bestLables.reshape(0,img.rows);
    cv::convertScaleAbs(bestLables,bestLables,int(255/k));
    cv::imshow("result",bestLables);
    cv::waitKey(); 
```

# java - Java：如何使用 Executor 框架从 2 个单独的线程中打印奇数和偶数

> ID：11411890
> 
> 赞同：-8
> 
> 时间：2012-07-10T11:01:10.460
> 
> 标签：java, multithreading, algorithm, java.util.concurrent

我想要一个在单独的线程中打印奇数和偶数的算法。输出应该是顺序的`1,2,3.4 ,.....`Executor 框架可以在这里使用。我[在 SO 上看到了一个相关的问题，](https://stackoverflow.com/questions/2742520/program-to-print-odd-numbers-and-even-numbers-on-seperate-threads)但那是在 C 中。我想要一个 Java 实现在这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:28:06.813

它是 jasons 的修改版本：

```
import java.util.concurrent.Executor;
import java.util.concurrent.Executors;
import java.util.concurrent.atomic.AtomicInteger;

public class Test {

    public static void main(String[] args){
    final int max = 100;
    final AtomicInteger i = new AtomicInteger(0);
    Executor dd = Executors.newFixedThreadPool(2);

    final Object lock = new Object();

    dd.execute(new Runnable() {
        @Override
        public void run() {
            while (i.get() < max) {
                if (i.get() % 2 == 0) {
                    System.out.print(" " + i.getAndAdd(1));

                    synchronized(lock){
                        lock.notify();
                    }
                }else{
                    synchronized(lock){
                        try {
                            lock.wait();
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
    });
    dd.execute(new Runnable() {
        @Override
        public void run() {
            while (i.get() < max) {
                if (i.get() % 2 != 0) {
                    System.out.print(" " + i.getAndAdd(1));

                    synchronized(lock){
                        lock.notify();
                    }
                }else{
                    synchronized(lock){
                        try {
                            lock.wait();
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }
                }
            }
        }
    });
    do {
        try {
            Thread.currentThread().sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } while (i.get() != max);
    System.out.println("\nDone");
}
} 
```

免责声明：它不是最好的解决方案，当然也不是最快的，但它会产生正确的输出。

这就是输出：

```
 0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99
Done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:21:16.770

您的问题有点令人困惑，因为看起来您希望按顺序输出。

在这种情况下使用线程是没有意义的，因为它们会不断地相互协调以确定轮到谁输出它们的当前数字。

如果您不关心排序（例如，您可能会得到 1、2、3、5、4、6、8.7...），那么它可能是有意义的。

```
public class Test
{
    private static final int NOT_APPLICABLE = 1;

    private final ExecutorService executor;

    public Test()
    {
        BlockingQueue<Runnable> queue = new ArrayBlockingQueue<Runnable>(2);

        executor = new ThreadPoolExecutor(2, 2, NOT_APPLICABLE, TimeUnit.SECONDS, queue);
    }

    public void submitTask(Runnable task)
    {
        executor.submit(task);
    }

    private static class Counter implements Runnable
    {
        private int counter;

        public Counter(int start)
        {
            this.counter = start;
        }

        @Override
        public void run()
        {
            while (true)
            {
                System.out.println(counter);
                counter += 2;
            }
        }

    }
    public static void main(String[] args)
    {
        Runnable odd = new Counter(1);
        Runnable even = new Counter(2);
        Test app = new Test();
        app.submitTask(odd);
        app.submitTask(even);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:17:24.760

```
public static void main(String[] args) {
    final int max = 100;
    final AtomicInteger i = new AtomicInteger(0);
    new Thread(new Runnable() {
        @Override
        public void run() {
            while (i.get() < max) {
                if (i.get() % 2 != 0) {
                    synchronized (i) {
                        System.out.print(" " + i.getAndAdd(1));
                    }
                }
            }
        }
    }).start();
    new Thread(new Runnable() {
        @Override
        public void run() {
            while (i.get() < max) {
                if (i.get() % 2 == 0) {
                    synchronized (i) {
                        System.out.print(" " + i.getAndAdd(1));
                    }
                }
            }
        }
    }).start();
    do {
        try {
            Thread.currentThread().sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    } while (i.get() != max);
    System.out.println("\nDone");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T15:43:57.127

一些忙等待的代码，最简单的。

```
package t1;

import java.util.concurrent.atomic.AtomicInteger;

public class Redx implements Runnable{
    private final static int MAX = 99;
    final AtomicInteger next;
    final int odd;

    public Redx(AtomicInteger next, int odd) {
        super();
        this.next = next;
        this.odd = odd;
    }

    public void run(){
        for(;;){
            int n = next.get();
            if (n > MAX)
                break;
            if ((n&1)==odd)
                continue;           

            System.out.print(n+", ");
            if ((n & 0x1F)==0x1F)//new line can be skipped
                System.out.println();
            next.lazySet(n+1);

        }
    }
    public static void main(String[] args) {
        final AtomicInteger next = new AtomicInteger(0);
        Redx x0 = new Redx(next, 0);
        Redx x1 = new Redx(next, 1);
        new Thread(x0).start();
        new Thread(x1).start();
        for(;next.get()<=MAX;)
                Thread.yield();

        System.out.println();
        System.out.println("Done!");
    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-29T13:05:18.923

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class GenerateEvenOddNumberTest {

    public static void main(String[] args) {
        GenerateNumber GenNum = new GenerateNumber();
        ExecutorService es =    Executors.newFixedThreadPool(2);
        es.execute(GenNum);
        es.execute(GenNum);
    }

}

class GenerateNumber implements Runnable{

    private static final AtomicInteger nextId = new AtomicInteger(0);   

    // Thread local variable containing each thread's ID
    private static final ThreadLocal<Integer> count =
        new ThreadLocal<Integer>() {
            @Override protected Integer initialValue() {
                return nextId.getAndIncrement();
        }
    };

    private static final AtomicBoolean bool = new AtomicBoolean(true);  
      // Thread local variable containing each thread's ID
    private static final ThreadLocal<Boolean> even =
        new ThreadLocal<Boolean>() {
            @Override protected Boolean initialValue() {
                return bool.getAndSet(false)    ;
        }
    };  

    boolean isOdd = false;  
    Lock lock = new ReentrantLock();
    Condition checkOdd = lock.newCondition();
    Condition checkEven = lock.newCondition();

    public void printEvenNumber(){
        lock.lock();
        try {
            while(count.get()<500){
                while(isOdd){
                    try {
                        checkEven.await();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                System.out.println("Thread Name "+Thread.currentThread().getName()+" "+count.get());
                count.set(count.get()+2);
                isOdd = true;
                checkOdd.signal();
            }
        } finally {
            lock.unlock();
        }
    }

    public void printOddNumber(){
        lock.lock();
        try {       
            while(count.get()<500){
                while(!isOdd){
                    try {
                        checkOdd.await();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
                System.out.println("Thread Name "+Thread.currentThread().getName()+" "+count.get());
                count.set(count.get()+2);
                isOdd = false;
                checkEven.signal();
            }
        } finally {
            lock.unlock();
        }           
    }

    @Override
    public void run() {
        if(even.get()){
            printEvenNumber();
        }
        else{
            printOddNumber();
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-14T07:02:52.593

/* 使用 Semaphore 是打印奇偶数列的最简单方法 */

```
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.Semaphore;

class Even implements Runnable {

    private Semaphore s1;
    private Semaphore s2;
    private static volatile int num = 0;

    Even(Semaphore s1, Semaphore s2) {
        this.s1 = s1;
        this.s2 = s2;
    }

    @Override
    public void run() {
        synchronized (s2) {
            while (num < 99) {
                try {
                    s1.acquire();
                    System.out.print(" " + num);
                    num += 2;
                    s2.release();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}

class Odd implements Runnable {

    private Semaphore s1;
    private Semaphore s2;
    private static volatile int num = 1;

    Odd(Semaphore s1, Semaphore s2) {
        this.s1 = s1;
        this.s2 = s2;
    }

    @Override
    public void run() {
        synchronized (s1) {
            while (num < 100) {
                try {
                    s2.acquire();
                    System.out.print(" " + num);
                    num += 2;
                    s1.release();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}

public class ExecOddEvenPrint {

    public static void main(String[] args) {

        ExecutorService exec = Executors.newFixedThreadPool(2);
        Semaphore s1 = new Semaphore(1);
        Semaphore s2 = new Semaphore(0);

        exec.execute(new Even(s1, s2));
        exec.execute(new Odd(s1, s2));

    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-11T18:51:24.540

```
This will do:
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.atomic.AtomicInteger;

 public class Threads implements Runnable{

    static AtomicInteger  x=new AtomicInteger(1);
    public  void generate()
    {
        //System.out.println("In generate");
      synchronized(x){
        if(x.get()%2==0)
            System.out.println(x+" is EVEN");
        else
            System.out.println(x+" is ODD");
        x.incrementAndGet();
        }

    }
    @Override
    public synchronized void run() {        
        //System.out.println("In run");
        generate();
    }

    public static void main(String[] args) {
        //System.out.println("In generateThreads");
            ExecutorService pool=Executors.newFixedThreadPool(10);
            for(int i=0;i<2;i++) // two threads
            pool.submit(new Threads());
            pool.shutdown();
            while (!pool.isTerminated()) {

            }
         //   System.out.println("DONEs");

    }

} 
```

# objective-c - 0.10.1 中的 RestKit 对象映射问题

> ID：11411895
> 
> 赞同：1
> 
> 时间：2012-07-10T11:01:25.487
> 
> 标签：objective-c, xcode, restkit

作为[对象映射已解决问题](https://stackoverflow.com/questions/9318565/restkit-object-mapping-relationships-without-kvc)的以下问题，我已将 RestKit 升级到 0.10.1 并将数据模型扩展到以下内容。

一个**公司**可以有多个联系人和活动，一个**联系人**可以有多个活动但只有一个公司，一个**活动**只能有一个公司和一个联系人。

**有关系的实体**

```
 Company 
 - unitID 
 - companyID
 - matchcode
 - contacts* (Company -->> Contact | 1:n)
 - activities* (Company -->> Activity | 1:n)

 Contact
 - unitID
 - companyID
 - contactID
 - lastName
 - firstName
 - company* (Contact >--> Company | 1:1)
 - activities* (Contact -->> Activity | 1:n)

 Activity
 - unitID
 - activityID
 - companyID
 - contactID
 - subject
 - account* (Activity >--> Company | 1:1)
 - contact* (Activity >--> Contact | 1:1) 
```

**JSON（公司）**

```
 [
   {
      "unitID":"003CABD8DEB5DC13C",
      "companyID":"BSP-002999",
      "matchcode":"Testcompany"
   }
 ] 
```

**JSON（联系方式）**

```
 [
   {
      "unitID":"DAC2ACCC125795D00",
      "companyID":"BSP-002999",
      "contactID":"CLP-015468",
      "firstName":"Mister",
      "lastName":"Wayne"
   }
 ] 
```

**JSON（活动）**

```
 [
   {
      "unitID":"E123FlADAS2DASD2F",
      "activityID":"ACT-123912",
      "companyID":"BSP-002999",
      "contactID":"CLP-015468",
      "subject":"Testsubject",
   }
 ] 
```

**对象映射 - 设置连接**

```
 // Objects
 companyMapping.primaryKeyAttribute = @"companyID";
 ...
 contactMapping.primaryKeyAttribute = @"contactID";
 ...
 activityMapping.primaryKeyAttribute = @"activityID";

 // Connections
 [contactMapping mapRelationship:@"company" withMapping:companyMapping];
 [contactMapping connectRelationship:@"company" withObjectForPrimaryKeyAttribute:@"companyID"];

 [activityMapping mapRelationship:@"company" withMapping:companyMapping];
 [activityMapping connectRelationship:@"company" withObjectForPrimaryKeyAttribute:@"companyID"];

 [activityMapping mapRelationship:@"contact" withMapping:contactMapping];
 [activityMapping connectRelationship:@"contact" withObjectForPrimaryKeyAttribute:@"contactID"]; 
```

* * *

**问题**

前两个映射操作正常工作，但不知何故最后一个映射**活动 >--> 联系人**不起作用。

![无联系方式](../Images/363ee530a7b6cde13a078c64e6d7c759.png)

感谢您提供解决问题的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T09:38:44.670

由于Core Data的配置出错，我自己解决了这个问题。

**Contact -->> Activity**的关系没有设置为“可选”，Xcode 和 RestKit 没有显示明显的错误。将其设置为“可选”解决了问题，并且映射适用于所有关系。

# android - Android：使用不同数据结构的对齐/布局问题

> ID：11411897
> 
> 赞同：1
> 
> 时间：2012-07-10T11:01:37.413
> 
> 标签：android, android-layout, android-widget

我的应用程序中有一个自定义列表视图。用户的需求因他选择的选项而异，结果显示在列表视图中。我通过 using`ArrayList<String>`和其他时间代表同一个列表，同时使用 `ArrayList<HashMap<String,String>>`. 现在，在使用前一个 ie`ArrayList<String>`时，listView 行中的结果会完美对齐，但是在使用后一个 ie`ArrayList<HashMap<String,String>>`时，对齐会变得更糟。我不明白问题可能是什么。请帮忙！

下面我发布了在我的自定义 Listview 中用作一行的 XML 的图像、代码和源代码。

图片链接：（因为我是新用户，所以无法上传图片）

```
Using ArrayList<String> 
```

[http://i46.tinypic.com/2r2b0g5.jpg](http://i46.tinypic.com/2r2b0g5.jpg)

> `Using ArrayList<HashMap<String, String>>`

[http://i47.tinypic.com/11w7tqe.jpg](http://i47.tinypic.com/11w7tqe.jpg)

**代码：**

对于***Arraylist<HashMap<String,String>>***

```
ArrayList<HashMap<String,String>> searchList = new ArrayList<HashMap<String,String>>();
                  for(int i=0;i<productName.size();i++)
                        {

                         String currentListItem=productName.get(i).toString();

                         if(textLength<=currentListItem.length()){

                          //compare the String in EditText with Names in the ArrayList

                          if(searchText.equalsIgnoreCase(currentListItem.substring(0,textLength))){
                              HashMap<String,String> temp = new HashMap<String,String>();
                              temp.put("PRODUCTNAME",productName.get(i));
                              temp.put("PRODUCTID", productID.get(i));
                              temp.put("BRANDNAME", brandName.get(i));
                              temp.put("VENDORNAME", vendor.get(i));
                              temp.put("OPENINGSTOCK", openingStock.get(i));
                              temp.put("AVAILABLESTOCK", availableStock.get(i));
                              temp.put("ADDSTOCK", addStock.get(i));
                              temp.put("PURCHASRPRICE", purchasePrice.get(i));
                              temp.put("SALESPRICE", salesPrice.get(i));
                              searchList.add(temp);
                             }
                        }
                      }
                        SimpleAdapter aaadapter = new SimpleAdapter(
                                new_stock_io.this,
                                searchList,
                                R.layout.list_otcmain123,
                                new String[] {"PRODUCTID", "PRODUCTNAME", "BRANDNAME","VENDORNAME","OPENINGSTOCK","AVAILABLESTOCK","ADDSTOCK","SALESPRICE", "PURCHASEPRICE"},
                                new int[] {R.id.txt_id,R.id.txt_name, R.id.txt_bname, R.id.txt_vendor, R.id.txt_openingstock,R.id.txt_availablestock,R.id.txt_addstock,R.id.txt_salesprice,R.id.txt_purchaseprice}
                                );

                        lv.setAdapter(aaadapter); 
```

对于**ArrayList<字符串>**

```
List<String> vendorName = new ArrayList<String>(); 
    List<String> vendorID = new ArrayList<String>();
    List<Object> objectArray = new ArrayList<Object>();
     List<String> stockID = new ArrayList<String>();
     List<String> picture = new ArrayList<String>();
     List<String> productID = new ArrayList<String>();
     List<String> productName = new ArrayList<String>();
     List<String> brandName = new ArrayList<String>();
     List<String> vendor = new ArrayList<String>();
     List<String> openingStock = new ArrayList<String>();
     List<String> availableStock = new ArrayList<String>();
     List<String>  addStock= new ArrayList<String>();
     List<String>  purchasePrice= new ArrayList<String>();
     List<String>  salesPrice= new ArrayList<String>();
     List<String> subCategoryID = new ArrayList<String>();
     List<String> subCategoryName= new ArrayList<String>();
     List<String> productCategory= new ArrayList<String>();
     List<String> subCategoriesNameArray = new ArrayList<String>();
     List<String> subCategoriesIDArray= new ArrayList<String>();
    for (int i = 0; i < productID.size(); i++)
                {
                    Object obj = new Object();
                    objectArray.add(obj);   
                }

 adapter = new ListItemsAdapter(objectArray, 1);

            lv.setAdapter(adapter);
    //List Adapter for listView.
    public class ListItemsAdapter extends ArrayAdapter<Object> {
        ViewHolder holder1;

        public ListItemsAdapter(List<Object> items, int x) {
            super(new_stock_io.this,android.R.layout.simple_list_item_1, items);
        }

        public View getView(final int position, View convertView, ViewGroup parent) {

            LayoutInflater inflater = getLayoutInflater();
            convertView = inflater.inflate(R.layout.list_otcmain123, null);

            holder1 = new ViewHolder();

            holder1.tv_id=(TextView)convertView.findViewById(R.id.txt_id);
            holder1.tv_name=(TextView)convertView.findViewById(R.id.txt_name);

            holder1.tv_brandname=(TextView)convertView.findViewById(R.id.txt_bname);
            holder1.tv_openingstock=(TextView)convertView.findViewById(R.id.txt_openingstock);
            holder1.tv_availablestock=(TextView)convertView.findViewById(R.id.txt_availablestock);
            holder1.tv_addstock=(TextView)convertView.findViewById(R.id.txt_addstock);
            holder1.tv_addstock.setTag(position);

            holder1.tv_addstock.setOnFocusChangeListener(new OnFocusChangeListener() 
            {   
                public void onFocusChange(View v, boolean hasFocus) 
                {
                    // TODO Auto-generated method stub
                    Object o = (Object)holder1.tv_addstock.getTag();

                    Log.d("method focus", "call");
                    Log.d("position", position+"");
                    Log.d("edit text value", o.toString());
                    Log.d("value",":"+holder1.tv_addstock.getText().toString());
                    addStock.set(position, holder1.tv_addstock.getText().toString());
                }
            });
            holder1.tv_prizeperunit=(TextView)convertView.findViewById(R.id.txt_salesprice);
            holder1.tv_vendor=(TextView)convertView.findViewById(R.id.txt_vendor);
            holder1.tv_prizeperunitpurchase=(TextView)convertView.findViewById(R.id.txt_purchaseprice);

            convertView.setTag(holder1);
            if (checkboxClicked==0)
            {
                holder1.tv_addstock.setTag(objectArray.get(position));
                holder1.tv_id.setText(productID.get(position));
                holder1.tv_name.setText(productName.get(position));
                holder1.tv_brandname.setText(brandName.get(position));
                holder1.tv_openingstock.setText(openingStock.get(position));
                holder1.tv_availablestock.setText(availableStock.get(position));
                holder1.tv_addstock.setId(position);
                holder1.tv_addstock.setText(addStock.get(position));
                holder1.tv_prizeperunit.setText(salesPrice.get(position));
                holder1.tv_vendor.setText(vendor_Name);
                holder1.tv_prizeperunitpurchase.setText(purchasePrice.get(position));
            }
            else if (checkboxClicked==1)
            {
                //holder1.tv_addstock.setTag(objectArray.get(position));
                holder1.tv_id.setText(onCheckProductID.get(position));
                holder1.tv_name.setText(onCheckProductName.get(position));
                holder1.tv_brandname.setText(onCheckBrandName.get(position));
                holder1.tv_openingstock.setText(onCheckOpeningStock.get(position));
                holder1.tv_availablestock.setText(onCheckAvailableStock.get(position));
                holder1.tv_addstock.setId(position);
                holder1.tv_addstock.setText(onCheckAddStock.get(position));
                holder1.tv_prizeperunit.setText(onCheckSalesPrice.get(position));
                holder1.tv_vendor.setText(onCheckVendor.get(position));
                holder1.tv_prizeperunitpurchase.setText(onCheckPurchasePrice.get(position));
            }

            return convertView;
        }

    }

    //Simple holder class for above Adapter class.
    public class ViewHolder 
    {
        TextView tv_id,tv_name,tv_brandname,tv_vendor,tv_openingstock,tv_availablestock,tv_addstock,tv_prizeperunit,tv_prizeperunitpurchase;    
    } 
```

**XML:**

> ```
>  <LinearLayout
>      android:id="@+id/ll_list_header"
>      android:layout_width="fill_parent"
>      android:layout_height="wrap_content" >
> 
>                 <TextView
>                 android:id="@+id/txt_id"
>                 android:layout_width="0dp"
>                 android:layout_height="wrap_content"
>                 android:layout_weight="0.05"
>                 android:gravity="center"
>                 android:text="ID"
>                 android:textSize="6dip"
>                 android:textStyle="bold" />
> 
>             <View
>                 android:id="@+id/view1"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_name"
>                 android:layout_width="0dp"
>                 android:layout_height="wrap_content"
>                 android:layout_weight="0.07"
>                 android:gravity="center"
>                 android:text="Name"
>                 android:textSize="6dip"
>                 android:textStyle="bold"/>
> 
>             <View
>                 android:id="@+id/view2"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <View
>                 android:id="@+id/view3"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" /> -->
> 
>             <TextView
>                 android:id="@+id/txt_bname"
>                 android:layout_width="0dp"
>                 android:layout_height="wrap_content"
>                 android:layout_weight="0.12"
>                 android:gravity="center"
>                 android:text="Brand Name"
>                 android:textSize="6dip"
>                 android:textStyle="bold"/>
> 
>             <View
>                 android:id="@+id/view3"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_vendor"
>                 android:layout_width="0dp"
>                 android:layout_height="wrap_content"
>                 android:layout_weight="0.08"
>                 android:gravity="center"
>                 android:text="Vendor"
>                 android:textSize="6dip"
>                 android:textStyle="bold"/>
> 
>             <View
>                 android:id="@+id/view27"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_openingstock"
>                 android:layout_width="0dp"
>                 android:layout_height="wrap_content"
>                 android:layout_weight="0.09"
>                 android:gravity="center"
>                 android:text="Opening Stock"
>                 android:textSize="6dip"
>                 android:textStyle="bold"/>
> 
>             <View
>                 android:id="@+id/view26"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_availablestock"
>                 android:layout_width="0dp"
>                 android:layout_height="wrap_content"
>                 android:layout_weight="0.09"
>                 android:gravity="center"
>                 android:text="Available Stock"
>                 android:textSize="6dip"
>                 android:textStyle="bold"/>
> 
>             <View
>                 android:id="@+id/view25"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_addstock"
>                 android:layout_width="0dp"
>                 android:layout_height="20dp"
>                 android:layout_weight="0.10"
>                 android:gravity="center"
>                 android:hint="Rs."
>                 android:textSize="6dip"
>                 android:textStyle="bold" />
> 
>             <View
>                 android:id="@+id/view24"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_salesprice"
>                 android:layout_width="0dp"
>                 android:layout_height="20dp"
>                 android:layout_weight="0.10"
>                 android:gravity="center"
>                 android:hint="Rs."
>                 android:textSize="6dip"
>                 android:textStyle="bold" android:width="7dp" />
>             <View
>                 android:id="@+id/view24"
>                 android:layout_width="1dip"
>                 android:layout_height="fill_parent"
>                 android:background="#e5e5e5" />
> 
>             <TextView
>                 android:id="@+id/txt_purchaseprice"
>                 android:layout_width="0dp"
>                 android:layout_height="20dp"
>                 android:layout_weight="0.12"
>                 android:gravity="center"
>                 android:hint="Rs."
>                 android:textSize="6dip"
>                 android:textStyle="bold"  android:width="7dp"/>
>    </LinearLayout> </RelativeLayout> 
> ```

# java - 强制关闭错误预期不规则

> ID：11411905
> 
> 赞同：0
> 
> 时间：2012-07-10T11:02:24.260
> 
> 标签：java, android, android-layout, nullpointerexception

我有问题。我创建了一个从资源中加载随机布局的应用程序，但我遇到了问题，因为程序显示随机布局并关闭，有时在 2 次之后，有时在 12 次之后，我不知道问题出在哪里，我试图在我的手机上运行它并且我在清单中添加了 write_external_storage 权限，但仍然是同样的错误。请帮助我，并尝试解决此问题。

这是我的代码：

爪哇：

```
package ka.ka.ka;

import java.util.Random;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class KAMASActivity extends Activity implements OnClickListener {
Button button1;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
  button1 = (Button) findViewById(R.id.button1) ;
  button1.setOnClickListener(this);

}
@Override
public void onClick(View v) {

       int min = 1;
        int max = 6;
        int i1=0;       
        Random r = new Random();
        i1 = r.nextInt(max - min + 1) + min;
        if(i1==1){setContentView(R.layout.image1);
        button1 = (Button) findViewById(R.id.button1) ;
        button1.setOnClickListener(this);}
        if(i1==2){setContentView(R.layout.image2);
        button1 = (Button) findViewById(R.id.button1) ;
        button1.setOnClickListener(this);}
        if(i1==3){setContentView(R.layout.image3);
        button1 = (Button) findViewById(R.id.button1) ;
        button1.setOnClickListener(this);}
        if(i1==4){setContentView(R.layout.image4);
        button1 = (Button) findViewById(R.id.button1) ;
        button1.setOnClickListener(this);}
        if(i1==5){setContentView(R.layout.image5);
        button1 = (Button) findViewById(R.id.button1) ;
        button1.setOnClickListener(this);}
        if(i1==6){setContentView(R.layout.image6);
        button1 = (Button) findViewById(R.id.button1) ;
        button1.setOnClickListener(this);
        }
        } 
```

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="ka.ka.ka"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />
 <uses-permission android:name="android.permission.ACCESS_CHECKIN_PROPERTIES" />
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 

  <application
    android:icon="@drawable/ikona"
    android:label="@string/app_name" >
    <activity
        android:name=".KAMASActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

他是 logcat ：

```
07-10 10:58:51.062: D/ddm-heap(218): Got feature list request
07-10 10:58:51.311: D/dalvikvm(218): GC freed 506 objects / 46032 bytes in 122ms
07-10 10:59:30.081: D/AndroidRuntime(218): Shutting down VM
07-10 10:59:30.081: W/dalvikvm(218): threadid=3: thread exiting with uncaught exception     (group=0x4001b188)
07-10 10:59:30.081: E/AndroidRuntime(218): Uncaught handler: thread main exiting due to uncaught exception
07-10 10:59:30.102: E/AndroidRuntime(218): java.lang.NullPointerException
07-10 10:59:30.102: E/AndroidRuntime(218):  at   ka.ka.ka.KAMASActivity.onClick(KAMASActivity.java:32)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.view.View.performClick(View.java:2364)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.view.View.onTouchEvent(View.java:4179)
07-10 10:59:30.102: E/AndroidRuntime(218):  at  android.widget.TextView.onTouchEvent(TextView.java:6541)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.view.View.dispatchTouchEvent(View.java:3709)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-10 10:59:30.102: E/AndroidRuntime(218):  at    android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
0 7-10 10:59:30.102: E/AndroidRuntime(218):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
07-10 10:59:30.102: E/AndroidRuntime(218):  at  com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow. java:1659)
07-10 10:59:30.102: E/AndroidRuntime(218):  at   com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
07-10 10:59:30.102: E/AndroidRuntime(218):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.os.Looper.loop(Looper.java:123)
07-10 10:59:30.102: E/AndroidRuntime(218):  at android.app.ActivityThread.main(ActivityThread.java:4363)
07-10 10:59:30.102: E/AndroidRuntime(218):  at java.lang.reflect.Method.invokeNative(Native Method)
07-10 10:59:30.102: E/AndroidRuntime(218):  at java.lang.reflect.Method.invoke(Method.java:521)
07-10 10:59:30.102: E/AndroidRuntime(218):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-10 10:59:30.102: E/AndroidRuntime(218):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-10 10:59:30.102: E/AndroidRuntime(218):  at dalvik.system.NativeStart.main(Native Method)
07-10 10:59:30.121: I/dalvikvm(218): threadid=7: reacting to signal 3
07-10 10:59:30.121: E/dalvikvm(218): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
07-10 10:59:32.562: I/Process(218): Sending signal. PID: 218 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T16:20:22.023

其中一个 id`R.image.imageX`丢失了。它们可能拼写错误，或者您可能错过了命名它们，因此请检查它们。

您也可能指的是未在 main.xml 中声明的 id（此活动中引用的 xml 文件`setContentView(R.layout.main);`）。

希望你让它工作。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T15:16:39.203

您可能在布局文件中的某处缺少 id，这导致在单击方法中找不到按钮之一。如果您可以发布您的布局 xml 文件，我们可以告诉您确切的位置。

# java - 在哪些情况下最好使用无条件 AND（& 而不是 &&）

> ID：11411907
> 
> 赞同：48
> 
> 时间：2012-07-10T11:02:30.080
> 
> 标签：java, optimization

我想知道 Java 中的某些情况（或更一般地说：在编程中），当在布尔表达式中首选使用无条件`AND`( `&`) 而不是条件版本 ( `&&`) 时。

我知道它们是如何工作的，但我想不出一个`&`值得使用的情况。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-07-10T11:15:36.423

我在现实生活中发现了表达式的两边都非常便宜的情况，因此它缩短了一两纳秒以避免分支并使用无条件`&`而不是`&&`. （不过，这些都是非常高性能的数学实用程序；我几乎不会在其他代码中使用它，而且如果没有详尽的基准测试来证明它更好，我也不会这样做。）

（举个具体的例子，`x > 0`将是超级便宜且无副作用的。为什么还要冒着分支错误预测的风险来避免无论如何都会如此便宜的测试？当然，因为这是`boolean`最终结果将被使用无论如何在一个分支中，但`if (x >= 0 && x <= 10)`涉及两个分支，并且`if (x >= 0 & x <= 10)`只涉及一个。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-07-10T11:10:47.703

唯一的区别是一旦知道就停止评估`&&`。`||`例如：

```
if (a != null && a.get() != null) 
```

适用于`&&`，但`&`如果 a 为空，您可能会得到 NullPointerException。

我能想到的唯一情况是你想在哪里使用`&`第二个操作数是否有副作用，例如（可能不是最好的例子，但你明白了）：

```
public static void main(String[] args) {
    int i = 1;
    if (i == 0 & ++i != 2) {
    }
    System.out.println(i); //2
    i = 1;
    if (i == 0 && ++i != 2) {
    }
    System.out.println(i); //1
} 
```

但是，这对我来说看起来像是臭代码（在这两种情况下）。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-07-10T11:11:53.303

&& 允许 jvm 进行短路评估。也就是说，如果第一个参数为假，则不需要检查第二个参数。

一个 & 将在两边同时运行。

所以，作为一个人为的例子，你可能有：

```
if (account.isAllowed() & logAccountAndCheckFlag(account))
    // Do something 
```

在该示例中，您可能总是希望记录帐户所有者试图做某事的事实。

我不认为我曾经在商业编程中使用过单个 & 。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-07-10T11:23:34.490

维基百科很好地描述了[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)

*您更喜欢哪里的非短路运算符？*

从同一个链接：

*   未经测试的第二种情况会导致未执行的副作用
*   代码效率

> 短路会导致现代处理器的分支预测错误，并显着降低性能（一个显着的例子是高度优化的光线，光线追踪中的轴对齐框相交代码）[需要澄清]。一些编译器可以检测到这种情况并发出更快的代码，但由于可能违反 C 标准，这并不总是可行的。高度优化的代码应该使用其他方式来执行此操作（例如手动使用汇编代码）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-10T11:13:27.353

如果有必须发生的副作用，但这有点难看。

按位与 ( `&`) 主要用于按位数学。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2012-07-10T13:04:15.770

输入验证是一种可能的情况。您通常希望一次向用户报告表单中的所有错误，而不是在第一个错误之后停止并强制他们重复单击提交并且每次只得到一个错误：

```
public boolean validateField(string userInput, string paramName) {
   bool valid;
   //do validation 

   if (valid) {
       //updates UI to remove error indicator (if present)
       reportValid(paramName);   
   } else {
       //updates UI to indicate a problem (color change, error icon, etc) 
       reportInvalid(paramName);  
   }      
}

public boolean validateAllInput(...) {

   boolean valid = true;
   valid = valid & validateField(userInput1, paramName1);
   valid = valid & validateField(userInput2, paramName2);
   valid = valid & validateField(userInput3, paramName3);
   valid = valid & validateField(userInput4, paramName4);
   valid = valid & validateField(userInput5, paramName5);

   return valid;
}

public void onSubmit() {

   if (validateAllInput(...)) {
       //go to next page of wizard, update database, etc
       processUserInput(userInput1, userInput2, ... );
   } 

}

public void onInput1Changed() {
   validateField(input1.Text, paramName1);
}

public void onInput2Changed() {
   validateField(input2.Text, paramName2);
}

... 
```

`validateAllInput()`当然，您可以通过重构;`if (valid) { reportValid() ...`之外的逻辑来轻松避免短路评估的需要。`validateField()`但是每次调用 validateField() 时都需要调用提取的代码；至少为方法调用增加 10 行。与往常一样，这是哪种权衡最适合您的情况。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-07-10T11:39:15.623

`&`如果表达式很简单，您可以通过使用或`|`阻止分支来获得微优化。IE。

```
if(a && b) { }
if(!(a || b)) { } 
```

是相同的

```
if (a) if (b) { }
if (!a) if (!b) { } 
```

它有两个地方可以出现一个分支。

然而，使用无条件的`&`or `|`，只能有一个分支。

这是否有帮助很大程度上取决于代码在做什么。

如果您使用它，我建议对其进行评论，以非常清楚地说明为什么这样做。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-07-10T11:14:11.933

单个 & 没有任何特定用途，但您可以考虑以下情况。

```
if (x > 0 & someMethod(...))
{
  // code...
} 
```

考虑`someMethod()`正在执行一些操作，这些操作将修改实例变量或执行一些会影响稍后处理中的行为的操作。

因此，在这种情况下，如果您使用`&&`运算符并且第一个条件失败，它将永远不会进入`someMethod()`。在这种情况下，单个`&`运算符就足够了。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-07-11T03:11:41.860

因为`&`是按位运算符，您可以在单个操作中同时进行多达 32 次检查。对于这个非常具体的用例，这可以成为显着的速度增益。如果您需要检查大量条件，并且经常这样做并且装箱/拆箱条件的成本由检查次数分摊，或者如果您以该格式将数据存储在磁盘和 RAM 上（它在单个位掩码中存储 32 个条件更节省空间），`&`操作员可以在一系列 32 个单独的`&&`. 例如，如果您要选择所有可以移动、是步兵、有武器升级并由玩家 3 控制的单位，您可以执行以下操作：

```
int MASK = CAN_MOVE | INFANTRY | CAN_ATTACK | HAS_WEAPON_UPGRADE | PLAYER_3;
for (Unit u in allunits) {
    if (u.mask & MASK == MASK) {
        ...;
    }
} 
```

有关该主题的更多信息，请参阅我对相关问题的[其他答案。](https://stackoverflow.com/questions/7331686/why-and-not/7336620#7336620)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-10T11:14:27.837

我能想到的唯一好处是当您需要调用方法或执行代码时，无论第一个表达式被评估为`true`or `false`：

```
public boolean update()
{
    // do whatever you want here
    return true;
}

// ...

if(x == y & update()){ /* ... */} 
```

尽管您可以在没有以下情况下执行此操作`&`：

```
if(x == y){/* ... */}
update(); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-07-25T08:24:57.400

短路会导致现代处理器的分支预测错误，并显着降低性能（一个显着的例子是高度优化的光线，光线追踪中的轴对齐框相交代码）[需要澄清]。

# r - 熔体中的 R 错误（重塑） - 行数

> ID：11411910
> 
> 赞同：4
> 
> 时间：2012-07-10T11:02:37.363
> 
> 标签：r, reshape

看看这个包含五个观察值和两个因子变量的测试数据集。

```
test

  respid                  s2q1                      s2q2
1     32                     9          5 - V. satisfied
2     35       10 - Definitely          5 - V. satisfied
3    148       10 - Definitely          5 - V. satisfied
4    371                     3                         2
5    416       10 - Definitely          5 - V. satisfied 
```

当我运行以下`melt`命令时，我收到一个对我来说没有意义的错误。特别是，因为我之前成功使用过相同的命令。

```
require(reshape2)
qhist <- melt(test, id="respid")

Error in data.frame(ids, variable, value, stringsAsFactors = FALSE) : 
  arguments imply differing number of rows: 5, 10 
```

数据是用

```
spss.get("data.sav", lowernames=T, use.value.labels=T,max.value.labels=13)

dput(test)
structure(list(respid = structure(c(32L, 35L, 148L, 371L, 416L), label = structure("Serial Number", .Names = "respid"), class = "labelled"), 
    s2q1 = structure(c(10L, 11L, 11L, 4L, 11L), .Label = c("0 - Definitely not", 
    "1", "2", "3", "4", "5", "6", "7", "8", "9", "10 - Definitely", 
    "Don't know"), class = c("labelled", "factor"), label = structure("S2Q1 xxx?", .Names = "s2q1")), 
    s2q2 = structure(c(5L, 5L, 5L, 2L, 5L), .Label = c("1 - Not at all satisfied", 
    "2", "3", "4", "5 - V. satisfied", "Don't know"), class = c("labelled", 
    "factor"), label = structure("S2Q2 xxx?", .Names = "s2q2"))), .Names = c("respid", 
"s2q1", "s2q2"), row.names = c(NA, 5L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:53:25.637

它是由 的结构引起的`respid`，即因为它的类是“标记的”，但这有效：

```
library(reshape)
reshape::melt(test, id="respid")
   respid variable            value
1      32     s2q1                9
2      35     s2q1  10 - Definitely
3     148     s2q1  10 - Definitely
4     371     s2q1                3
5     416     s2q1  10 - Definitely
6      32     s2q2 5 - V. satisfied
7      35     s2q2 5 - V. satisfied
8     148     s2q2 5 - V. satisfied
9     371     s2q2                2
10    416     s2q2 5 - V. satisfied 
```

或者如果不使用`reshape`那么

```
class(test$respid) <- "factor"
reshape2::melt(test, id="respid") 
```

也可以。

# dynamic - 在运行时添加编译时不知道的 JSF 组件

> ID：11411911
> 
> 赞同：2
> 
> 时间：2012-07-10T11:02:39.337
> 
> 标签：dynamic, jsf-2, components

我在其他帖子中找不到解决方案，所以这是我的问题。（事先，我在 JBoss 7.1 AS 上使用 JSF 2 和 Mojarra 实现和 Primefaces 3.2）

我正在构建一个应该在运行时动态生成的搜索掩码。我从另一篇文章中知道我应该为此使用数据表。这就是我要做的。

但是搜索掩码由 3 部分组成，搜索标准（例如姓名、生日、...）、运算符（是、不是、大于、在范围内...）和操作数（用户将作为搜索输入）。

我的目标是动态生成搜索掩码，但输入字段的类型取决于用户选择的标准+运算符。

因此，如果用户从下拉框中选择标准：“名称”和运算符：“不是”，那么操作数的输入字段应该只是一个简单的 p:inputText。

但是如果用户选择标准“生日”和运算符：“之前”，那么输入字段应该是一个日期选择器，如 p:calendar。

我的想法是将 ap:dataTable 用于“SearchRow”对象列表，其中每个对象都有一组条件和操作数，以便在 ah:selectOneMenu 中使用它们。

然后我将 valueChangeListener 添加到 selectMenues 中，并在其中计算并创建我需要的正确类型的 UIComponent 作为输入字段。

但我不知道如何将该 UIComponent 添加为 dataTable 中的第三列。

那么我的想法有什么好处吗？有没有办法解决我的问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T17:33:01.490

[与此处](https://stackoverflow.com/questions/11558379/jsf-binding-with-setvalueexpression-read-only/)描述的问题相同的解决方案。@BalusC的[文章](http://balusc.blogspot.com.ar/2006/06/using-datatables.html#PopulateDatatable)很好地解释了如何从 bean 添加组件。

# matlab - 使用 MEX 编译 C++ 文件

> ID：11411915
> 
> 赞同：1
> 
> 时间：2012-07-10T11:02:49.370
> 
> 标签：matlab, mex

我想使用 MEX 在 MATLAB 上编译 C\C++ 文件。`mex -setup`那我先试了`mex xyz.cpp`。但我仍然收到错误

> E:\MATLAB~1\BIN\MEX.PL：错误：“xyz.cpp”编译失败。

键入此命令时

```
mex -v mexDiscreteFlow.cpp BPFlow.cpp Stochastic.cpp 
```

我得到以下输出

> 这是墨西哥，版权所有 1984-2007 The MathWorks, Inc.
> 
> -> 在 C:\Users\abc\AppData\Roaming\MathWorks\MATLAB\R2008b 中找到的默认选项文件名 --------------------------- -------------------------------------
> -> 选项文件 = C:\Users\abc\AppData \Roaming\MathWorks\MATLAB\R2008b\mexopts.bat
> MATLAB = E:\MATLAB~1
> -> 编译器 = lcc
> -> 编译器标志：
> COMPFLAGS = -c -Zp8 -I"E:\MATLAB~1\sys\lcc\包括” -DMATLAB_MEX_FILE -noregistrylookup
> OPTIMFLAGS = -DNDEBUG
> DEBUGFLAGS = -g4
> 参数 =
> 名称开关 = -Fo
> -> 预链接命令 =
> -> LINKER = lcclnk
> -> 链接指令：
> LINKFLAGS = -tmpdir "." -dll "E:\MATLAB~1\extern\lib\win32\lcc\mexFunction.def" -L"E:\MATLAB~1\sys\lcc\lib" -libpath "E:\MATLAB~1\extern\ lib\win32\lcc" "C:\USERS\abc\APPDATA\LOCAL\TEMP\MEX_JT~1\templib2.obj"
> LINKDEBUGFLAGS =
> LINKFLAGSPOST = libmx.lib libmex.lib libmat.lib
> 名称指令 = -o "mexDiscreteFlow.mexw32 "
> 文件链接指令 =
> Lib. 链接指令 =
> Rsp 文件指示符 = @
> -> 资源编译器 = lrc -I"E:\MATLAB~1\sys\lcc\include" -noregistrylookup -fo"mexversion.res"
> -> 资源链接器 =
> -------------------------------------------------- --------------
> 
> --> lcc -c -Zp8 -I"E:\MATLAB~1\sys\lcc\include" -DMATLAB_MEX_FILE -noregistrylookup -FoC:\USERS\abc\APPDATA\LOCAL\TEMP\MEX_JT~1\mexDiscreteFlow.obj - IE:\MATLAB~1\extern\include -IE:\MATLAB~1\simulink\include -DNDEBUG -DMX_COMPAT_32 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp
> 
> lcc 预处理器错误：C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\ImageProcessing.h:7 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\Image.h:7 C: \USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp:3 找不到包含文件
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\ USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 7 语法错误；找到`<' expecting`;'
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 7 跳过T' 期待>'期待>' 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 8 语法错误；找到)'`<'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 7 syntax error; found``;'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 7 syntax error; found``;'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 7 skipping`
> `*' expecting`
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 8 跳过`*'`pBuffer'
> 错误 C: \USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 10 undeclared identifier delete' 错误 C:\USERS \abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 非法表达式 错误 C:\USERS\abc\DOWNLO ~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 语法错误；发现]'`pBuffer'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 undeclared identifier`
> 
> `pBuffer' expecting`
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 类型错误：指针预期
> 警告C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 语句无效
> 错误 C: \USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 语法错误；找到`pBuffer' expecting`;'
> 警告 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 语句无效
> 警告 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 11 定义前删除的可能用法
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 15 语法错误；找到`<' expecting`;'
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 15 跳过T' 期待>'期待>' 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 16 语法错误；找到)'`<'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 15 syntax error; found``;'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 15 syntax error; found``;'
> Error C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 15 skipping`
> `*' expecting`
> 错误 C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\mexDiscreteFlow.cpp: C:\USERS\abc\DOWNLO~1\RELEASE\RELEASE\MEX\project.h: 16 错误太多
> 
> E:\MATLAB~1\BIN\MEX.PL：错误：“mexDiscreteFlow.cpp”编译失败。
> 
> ？？？在 213 处使用 ==> mex 时出错，
> 无法成功完成。

谁能提供一些建议？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T01:16:44.130

lcc 是Matlab 附带的**C编译器，但您正在尝试编译****C++**文件。您需要再次运行 mex -setup 并选择一个 C++ 编译器（但首先要获得一个 C++ 编译器，如果您还没有的话）

# visual-c++ - 如何在 Windows 中完全读取大于 4GB 的文件？

> ID：11411916
> 
> 赞同：4
> 
> 时间：2012-07-10T11:02:55.257
> 
> 标签：visual-c++

我需要在 Windows 中处理许多大于 4GB 的文件。我使用 FILE 和 fread() 读取一个文件（大约 40GB），并在 VS2010 Debug-x64 中编译我的代码，但无法完全读取该文件。

正如我在 C++ lib 的源文件中发现的那样，FILE 结构中的成员是 32 位（int），所以我找到了它失败的原因，但是我应该怎么做才能使文件被完全读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T14:45:53.480

如果您只关心在 Windows 上运行，您可以使用 CFile 对象。它的成员是 64 位的。

# mysql - 如何在一个预定事件中获取多个 MySQL 语句？

> ID：11411921
> 
> 赞同：4
> 
> 时间：2012-07-10T11:03:08.443
> 
> 标签：mysql

我正在尝试在一个预定事件中执行两个语句，但它不起作用。它不会做任何事情。你能帮我找出问题所在吗？

```
delimiter |
CREATE EVENT resetTimeClockTimeToday 
ON SCHEDULE EVERY 1 DAY STARTS '2012-07-10 00:00:00' DO 
BEGIN 
   UPDATE timeclock.employees SET timeToday = 0; 
   UPDATE timeclock.punches SET missedOut = 1 WHERE timeOUT IS NULL; 
END|
delimiter ; 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-03-05T13:12:49.540

您需要正确使用不同的分隔符，例如：

```
DROP EVENT IF EXISTS `Daily Event`;
DELIMITER $$
CREATE DEFINER=`root`@`localhost` EVENT `Daily event` ON SCHEDULE EVERY 1 DAY STARTS '2015-03-06 00:30:00' ON COMPLETION PRESERVE ENABLE DO
BEGIN

-- Newly due summary sheets
UPDATE          `summaries`
SET             `status` = 'DUE'
WHERE           `status` = 'OPEN'
AND             NOW() >= LAST_DAY(CONCAT(`year`, '-', `month`, '-01'));

-- Alert user that didn't clock out
INSERT INTO     `alerts` (`from`, `to`, `subject`, `message`)
SELECT          ....;

-- Alert manager that didn't clock out
INSERT INTO     `alerts` (`from`, `to`, `subject`, `message`)
SELECT          ....;

-- Alert for stale tickets
INSERT INTO     `alerts` (`from`, `to`, `subject`, `message`)
SELECT          ....;

END;
$$; 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-07-10T14:54:35.417

我重新启动了 MySQL 服务，它工作了！

# python - 在 Python 中绘制（纬度、经度、值）元组列表？

> ID：11411923
> 
> 赞同：4
> 
> 时间：2012-07-10T11:03:14.523
> 
> 标签：python, matplotlib, geocoding, matplotlib-basemap

我有一个（纬度、对数、值）-元组列表，我想使用 Basmap 显示。最简单的方法是什么？

```
data = [(1, 2, 0.12323),
        (2, 5, 0.23232),
        (4, 52,0.23131)
        .
        . tenthousand times this.
        .
       ] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:10:32.170

我没有使用底图，但看起来你想要的是 scatter() 方法：

[http://matplotlib.github.com/basemap/api/basemap_api.html#mpl_toolkits.basemap.Basemap.scatter](http://matplotlib.github.com/basemap/api/basemap_api.html#mpl_toolkits.basemap.Basemap.scatter)

它采用与 matplotlib.pyplot.scatter 方法相同的参数：

[http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter](http://matplotlib.sourceforge.net/api/pyplot_api.html#matplotlib.pyplot.scatter)

# php - PHP代码的过程语言插件

> ID：11411930
> 
> 赞同：0
> 
> 时间：2012-07-10T11:03:39.873
> 
> 标签：php, procedural-programming

我正在开发一个基于 Web 的应用程序，用于对某些制造过程进行建模和分析。我需要在我的 PHP 代码中使用类似 PL 语言的功能。有PHP的插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:10:33.237

PHP首先*是*一种过程语言，OOP 几乎是在它之上（不要恨我说其他 PHP 人！）。您可以在 PHP 中很好地编写程序代码，它不需要基础初始化/全局类，例如 C# 等语言。

您可以简单地打开一个新的 .php 文件并将所有代码放入其中。

是否推荐这是一个完全不同的讨论;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:17:59.547

我有一种感觉，您误解了过程编程的概念。你应该考虑多告诉自己一点，用正确的术语问一个更精确的问题。

阅读[本文](http://en.wikipedia.org/wiki/Procedural_programming)以获取有关过程编程的更多信息。

# ios - iPad 是否支持 file:// 协议？

> ID：11411931
> 
> 赞同：3
> 
> 时间：2012-07-10T11:03:43.987
> 
> 标签：ios, xcode, ipad, file-uri

我想知道 iPad 是否支持 file:// 协议。我想用 HTML 文件打包一个应用程序。运行时，应用程序将在其 web 视图中加载 HTML。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:05:43.887

是的，你看过phonegap吗？

# jquery - 在输入字段后更改文本

> ID：11411937
> 
> 赞同：0
> 
> 时间：2012-07-10T11:04:14.990
> 
> 标签：jquery, jquery-selectors

如何在不丢失输入字段的情况下将“2 年订阅”更改为“2 年：”

```
<div class="radioOption subscription1Col3">
<input class="buyNow" type="radio" name="product2" value="6_0" checked="">2 Year Subscription</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:14:14.857

这相对简单，我建议以下（尽管目前未经测试）：

```
var input = $('.radioOption.subscription1Col3 input'),
    text = input[0].nextSibling.nodeValue,
    newText = text.replace(/ subscription/i,': ');
input[0].nextSibling.nodeValue = newText; 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/x5SwP/)。

或者可能更喜欢这个版本，因为它将调整后的文本包裹在一个`label`元素中，这有助于 UI 并使将来更容易定位该文本内容：

```
var input = $('#inputID'),
    label = $('<label />',{'for' : 'inputID'})
    .text(input[0].nextSibling.nodeValue.replace(/ Subscription/i,': '));
input.parent().empty().append(input, label); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/x5SwP/1/)。

但是，这确实需要`input`具有`id`属性，以便在`label`语义上附加到`input`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-05T00:21:07.677

另一种方法是改变`textContent`

```
$('.buyNow')[0].nextSibling.textContent = "New Content" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:23:29.243

jQuery doesn't support accessing text nodes, only elements, so you would need to use the DOM methods in Javascript to access the text node:

```
var nodes = $('.radioOption')[0].childNodes;
nodes[nodes.length-1].nodeValue= '2 Year'; 
```

Demo: [http://jsfiddle.net/Guffa/PDqQW/](http://jsfiddle.net/Guffa/PDqQW/)

If you put an element around the text:

```
<div class="radioOption subscription1Col3">
  <input class="buyNow" type="radio" name="product2" value="6_0" checked="">
  <span>2 Year Subscription</span>
</div> 
```

Then you can use just jQuery to access it:

```
$('.radioOption span').text('2 Year'); 
```

Demo: [http://jsfiddle.net/Guffa/tRdYa/](http://jsfiddle.net/Guffa/tRdYa/)

# php - PDO + PHP lastInsertId() 问题

> ID：11411938
> 
> 赞同：3
> 
> 时间：2012-07-10T11:04:20.097
> 
> 标签：php, mysql, database, pdo, lastinsertid

如果例如当用户单击链接时，会自动插入新行，然后php代码请求最后插入的id，同时另一个用户插入另一行，这不会有问题，所以返回的 id 实际上不是我所期望的..？

我错了吗？没有那个“安全”漏洞，有没有办法做同样的事情？
（比如可能来自准备好的声明或其他东西......）

PS id 是自动生成的。

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T11:32:25.913

如[手册](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)中所述：

> [`LAST_INSERT_ID()`](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id)（不带参数）返回一个[`BIGINT`](http://dev.mysql.com/doc/en/integer-types.html)（64 位）值，该值表示由*最近执行*的语句为列设置的*第一个*自动生成的值，以影响这样的列。例如，插入产生值的行后，可以这样获取值：`AUTO_INCREMENT` *[`INSERT`](http://dev.mysql.com/doc/en/insert.html)`AUTO_INCREMENT`*
> 
>  *```
> mysql>SELECT LAST_INSERT_ID();
>     ->195 
> ```
> 
> 当前执行的语句不影响 的值 `LAST_INSERT_ID()`。假设您`AUTO_INCREMENT`使用一个语句生成一个值，然后`LAST_INSERT_ID()`在一个多行`INSERT`语句中引用，该语句将行插入到具有自己的`AUTO_INCREMENT`列的表中。的值`LAST_INSERT_ID()`将在第二个语句中保持稳定；它对第二行和后面的行的值不受早期行插入的影响。（但是，如果您混合对`LAST_INSERT_ID()`and的引用`LAST_INSERT_ID(expr)`，则效果是不确定的。）
> 
> 如果前面的语句返回错误，则 的值 `LAST_INSERT_ID()`未定义。对于事务表，如果语句由于错误而回滚，则 的值 `LAST_INSERT_ID()`未定义。对于手动ROLLBACK， `LAST_INSERT_ID()`不会恢复到交易前的值；它保持原样在[**ROLLBACK**](http://dev.mysql.com/doc/refman/5.5/en/commit.html)点。*

 *因此，`LAST_INSERT_ID()`始终是事务安全的（即使您不使用事务）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-10T12:35:08.197

`OK`MySQL 服务器在成功后将插入 ID 作为消息的一部分传输`INSERT`。此 ID 存储在 PDO 中，因此无需往返服务器 PDO 就可以安全地为您的连接返回正确的 ID。

参考： http: [//forge.mysql.com/wiki/MySQL_Internals_ClientServer_Protocol#OK_Packet](http://forge.mysql.com/wiki/MySQL_Internals_ClientServer_Protocol#OK_Packet)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-10T11:06:39.213

为了抵消这一点，您将使用[事务](http://php.net/manual/en/pdo.begintransaction.php)。

这基本上会将您的插入与其他插入隔离开来，因此只要您的插入/`lastInsertId()`调用在同一个事务中，它就可以正常工作。*

# macos - Ctrl + A 快捷方式在 Bash 中无法正常工作

> ID：11411941
> 
> 赞同：1
> 
> 时间：2012-07-10T11:04:42.137
> 
> 标签：macos, bash, unix

我刚刚在 OS X 中自定义了我的 Bash 命令提示符。简而言之，它现在允许我从新行开始输入命令：

```
alexey::machine { ~/rails/jutge } (git: static-pages) 12:55 PM
-> bundle exec rspec spec/requests/static_pages_spec.rb 
```

当我决定使用 Ctrl + A 快捷方式移动到行首时，我转到第 4 个字符，并删除它之前的所有三个字符（我用“$”符号标记了光标位置）：

```
-> bun$dle exec rspec spec/requests/static_pages_spec.rb 
```

我的意思是，前三个字符仍然显示，但不可访问且不可编辑。

我将不胜感激有关如何修复它的任何说明。谢谢你。

我的 .bash_profile 和 .bashrc 内容：

```
function parse_git_branch () {
   git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/'
}

PS1="\e[1;33m\u::\h\e[m \e[0;32m{ \w }\e[m\e[0;36m\$(parse_git_branch)\e[m\e[1;34m\@\e[m\e[1;35m\n->\e[m " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T12:45:32.423

您需要将 PS1 的非打印字符括在 \[ ... \] 中，以便 bash 可以正确计算提示符的大小。

```
PS1="\[\e[1;33m\]\u::\h\[\e[m\] \[\e[0;32m\]{ \w }\[\e[m\e[0;36m\]\$(parse_git_branch)\[\e[m\e[1;34m\]\@\[\e[m\e[1;35m\]\n->\[\e[m\] " 
```

# php - 将一堆代码包装到变量中的正确方法是什么

> ID：11411944
> 
> 赞同：-2
> 
> 时间：2012-07-10T11:04:54.970
> 
> 标签：php

我正在使用不允许我将 php 添加到模板文件的购物车脚本。使用的方法是`$GLOBALS`在类文件中创建并从 tpl 文件中调用它们。我需要做的是以下。

`$GLOBALS['DiscountedPrice']`需要等于后面的代码块。我尝试了一些语法选项来尝试将其包装起来，但它会中断，因为在代码块中使用了相同的语法。

```
$GLOBALS['DiscountedPrice'] =  $query = mysql_query("
             SELECT *
             FROM isc_customer_group_discounts
             WHERE `catorprodid` = '%%GLOBAL_ProductId%%'
             AND `customergroupid` = 1
             AND `discounttype` = 'PRODUCT'
             ");
$discounted_price = '';
while($proddisc = mysql_fetch_array($query)) {
    $discperc = $proddisc['4'];
    $discmeth = $proddisc['6'];
    if($discmeth = 'percent') {
        $discperc = $proddisc['4']/100;
        $discounted_price = $row['prodprice'] * $discperc;
        $GLOBALS['DiscountedPrice'] = $discounted_price;
    }elseif ($discmeth = 'price') {
        $discounted_price = $row['prodprice'] - $discperc;
        $GLOBALS['DiscountedPrice'] = $discounted_price;
    }elseif ($discmeth = 'fixed') {
        $discounted_price = $discperc;
        $GLOBALS['DiscountedPrice'] = $discounted_price;
    }}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:09:06.070

```
$GLOBALS['DiscountedPrice'] .= $discounted_price; 
```

随着循环的进行，使用点连接字符串。（. 和 = 之间没有空格）

编辑。

可能我还没有完全理解你的问题，但如果你想不断地加入字符串，这就是你要做的。

```
$discounted_price = ''; // you start with an empty string
while($proddisc = mysql_fetch_array($query)) {
$discperc = $proddisc['4'];
$discmeth = $proddisc['6'];
if($discmeth = 'percent') {
    $discperc = $proddisc['4']/100;
    $discounted_price = $row['prodprice'] * $discperc;
// and now you concat (join) it to the new value
    $GLOBALS['DiscountedPrice'] .= $discounted_price;
}elseif ($discmeth = 'price') {
    $discounted_price = $row['prodprice'] - $discperc;
    $GLOBALS['DiscountedPrice'] .= $discounted_price;
}elseif ($discmeth = 'fixed') {
    $discounted_price = $discperc;
    $GLOBALS['DiscountedPrice'] .= $discounted_price;
}}; 
```

# xcode4.2 - 无法识别的选择器在添加子视图时发送到实例

> ID：11411947
> 
> 赞同：3
> 
> 时间：2012-07-10T11:04:58.770
> 
> 标签：xcode4.2

我在运行我的应用程序时收到了这个线程。

```
2012-07-10 15:44:39.668 DSSAmple[447:f803] -[cell superview]: unrecognized selector sent       to instance 0x68b4080
2012-07-10 15:44:39.671 DSSAmple[447:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[cell superview]: unrecognized selector sent to instance 0x68b4080' 
```

“细胞”被称为我的子类。

在 cell.hi 中有

```
@interface cell : UIViewController
{
UIImage *MyImage;
int row;
int column;
CGRect frame;
}
@property(retain,nonatomic)UIImage *MyImage;
@property(assign,nonatomic)int row;
@property(assign,nonatomic)CGRect frame;
@property(assign,nonatomic)int column;
@end 
```

在我的呼叫课程中，我有 SIAViewcontroller.h

```
#import <UIKit/UIKit.h>
#import "cell.h"
@interface SIAViewController : UIViewController
-(void)PanelLoading;
@end 
```

在其实现 SIAViewController.m

```
-(void)PanelLoading
{
UIImage *myImage=[UIImage imageNamed:@"s.jpg"];
int x=20,y=50,r=1,c=1;
for (int i=1; i<=8; i++) 
{
    for (int j=1; j<=8; j++) 

    {
        cell *tank=[[cell alloc]init];
        tank.column=c;
        tank.row=r;
        tank.frame=CGRectMake(x, y, 35, 35);
        tank.MyImage=myImage;
        [self.view addSubview:tank];
        x+=35;
        r++;
    }
    r=1;
    c++;
    y+=35;
    x=20;
}

}

- (void)viewDidLoad
{
[super viewDidLoad];
[self PanelLoading];
// Do any additional setup after loading the view, typically from a nib.
} 
```

这会是什么原因？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:07:43.523

你的`cell`类应该扩展`UIView`而不是`UIViewController`.

```
@interface cell : UIView 
```

`UIView`提供一个`superview`属性，而`UIViewController`没有，触发“无法识别的选择器”崩溃。

# python - 嵌套的 Django 模板标签

> ID：11411949
> 
> 赞同：4
> 
> 时间：2012-07-10T11:05:02.140
> 
> 标签：python, django

我需要实现这样的东西：

`{% include "pay_forms/{{ pay_gw.name }}.html" %}`，`{{ pay_gw.name }}`标签在哪里。我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-10T11:09:36.537

```
"pay_forms/"|add:pay_gw.name|add:".html" 
```

（[如何在 Django 模板中连接字符串](https://stackoverflow.com/questions/4386168/how-to-concatenate-strings-in-django-templates)）

# awk - 将动作与模式分开

> ID：11411950
> 
> 赞同：2
> 
> 时间：2012-07-10T11:05:02.233
> 
> 标签：awk

考虑：

```
$ echo line1 | awk '1END{ print "line2"}'
line1
line2 
```

`1`注意和之间没有空格`END`。这是标准，还是我执行 awk 的一个怪癖？将动作与以下地址分开的语法规则是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:10:21.483

您可能使用的是旧版本的`awk`. 在原始`awk`语言中，没有必要在同一行用分号分隔规则。添加它是为了与操作中的语句处理保持一致。

我找到了这个：

[http://www.gnu.org/software/gawk/manual/html_node/Statements_002fLines.html](http://www.gnu.org/software/gawk/manual/html_node/Statements_002fLines.html)

这适用于我使用 GNU Awk 4.0.1：

```
$ echo line1 | awk '1; END { print "line2" }'
line1
line2 
```

如果我删除`;`我会收到语法错误。高温高压

# php - 不明白这个简单的 php 代码是如何工作的

> ID：11411951
> 
> 赞同：1
> 
> 时间：2012-07-10T11:05:05.073
> 
> 标签：php

> **可能重复：**
> [PHP 数学精度](https://stackoverflow.com/questions/3726721/php-math-precision)

下面的 php 代码输出 7，但我期望 8。为什么不同？

```
<?php echo (int)((0.1+0.7)*10); ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T11:06:59.517

因为由于浮点表示不准确，0.1+0.7 并不**完全**等于 0.8。它可能比这少一些。当您使用 时`int(..)`，它会将其截断为 7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:14:07.797

其他人已经指出了问题。如果您使用固定的小数位数（例如，使用货币时），您最好计算和存储美分，然后在向用户显示值时将它们转换回美元/欧元/任何值。

# c# - WPF 图像滑动以更改图像，就像在 iOS 中一样

> ID：11411955
> 
> 赞同：6
> 
> 时间：2012-07-10T11:05:24.940
> 
> 标签：c#, wpf, touchscreen

任何人都可以指出一些代码示例，说明我如何在 iOS 中实现一个画廊，在 Windows 7 上使用触摸屏显示器时，您可以左右滑动来更改图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:17:00.963

您将需要为此实现类似滑动的动画。

[WPF 应用程序中的触控指南](http://msdn.microsoft.com/en-us/library/dn742468.aspx)

我自己没有尝试过，但这里似乎是[一个 WPF 轮播](https://wpfcarousel.codeplex.com/SourceControl/latest#WPFDemo/CarouselControl.cs)的开源仓库，可能值得一看

~~[关于 WPF 中滑动动画的博客文章](http://bloggingabout.net/blogs/egiardina/archive/2010/11/23/adding-swipe-functionality-to-wpf-applications.aspx)~~

在所需的“滑动移动”上更改图像:)

[如果您不想自己创建动画，请使用免费动画库](https://stackoverflow.com/questions/1339708/any-free-animation-available-for-wpf)

希望能帮助到你！

这是（顺便说一下）第二个链接中的轮播控件，以防它像上一个一样丢失：

[迈克尔帕洛塔斯](https://www.codeplex.com/site/users/view/hiryu)的代码

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Threading;

namespace WPFDemo
{
    public class CarouselControl : Canvas
    {
        public CarouselControl()
        {
            _timer.Tick += new EventHandler(TimerTick);
            _timer.Interval = TimeSpan.FromMilliseconds(10);
        }

        public DateTime _previousTime;
        public DateTime _currentTime;

        public void ReInitialize()
        {
            Init();
        }

        protected override void OnInitialized(EventArgs e)
        {
            base.OnInitialized(e);
            Init();
        }

        public delegate void OnElementSelectedHandler(object sender);
        public event OnElementSelectedHandler OnElementSelected;

        public void SelectElement(FrameworkElement element)
        {
            if (element != null)
            {
                _previousTime = DateTime.Now;

                RotateToElement(element);

                if (OnElementSelected != null)
                    OnElementSelected(element);
            }
        }

        private const double DEFAULT_ROTATION_SPEED = 200;
        private const double MINIMUM_ROTATION_SPEED = 1;
        private const double MAXIMUM_ROTATION_SPEED = 1000;
        private double _rotationSpeed = DEFAULT_ROTATION_SPEED;
        public double RotationSpeed
        {
            get
            {
                return _rotationSpeed;

            }
            set
            {
                _rotationSpeed = Math.Min(Math.Max(value, MINIMUM_ROTATION_SPEED), MAXIMUM_ROTATION_SPEED);
            }
        }

        private const double DEFAULT_LOOKDOWN_OFFSET = 0;
        private const double MINIMUM_LOOKDOWN_OFFSET = -100;
        private const double MAXIMUM_LOOKDOWN_OFFSET = 100;
        private double _lookdownOffset = DEFAULT_LOOKDOWN_OFFSET;
        public double LookDownOffset
        {
            get
            {
                return _lookdownOffset;

            }
            set
            {
                _lookdownOffset = Math.Min(Math.Max(value, MINIMUM_LOOKDOWN_OFFSET), MAXIMUM_LOOKDOWN_OFFSET);
            }
        }

        private const double DEFAULT_FADE = 0.5;
        private const double MINIMUM_FADE = 0;
        private const double MAXIMUM_FADE = 1;
        private double _fade = DEFAULT_FADE;
        public double Fade
        {
            get
            {
                return _fade;

            }
            set
            {
                _fade = Math.Min(Math.Max(value, MINIMUM_FADE), MAXIMUM_FADE);
            }
        }

        private const double DEFAULT_SCALE = 0.5;
        private const double MINIMUM_SCALE = 0;
        private const double MAXIMUM_SCALE = 1;
        private double _scale = DEFAULT_SCALE;
        public double Scale
        {
            get
            {
                return _scale;

            }
            set
            {
                _scale = Math.Min(Math.Max(value, MINIMUM_SCALE), MAXIMUM_SCALE);
            }
        }

        private void element_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
        {
            SelectElement(sender as FrameworkElement);
        }

        private void RotateToElement(FrameworkElement element)
        {
            if (element != _currentlySelected)
            {
                _currentlySelected = element;
                int targetIndex = Children.IndexOf(element);

                double degreesToRotate = GetDegreesNeededToPlaceElementInFront(_currentRotation, targetIndex, TotalNumberOfElements);
                _targetRotation = ClampDegrees(_currentRotation - degreesToRotate);

                StartRotation(degreesToRotate);
            }
        }

        internal static double GetDegreesNeededToPlaceElementInFront(double currentRotation, int targetIndex, int totalNumberOfElements)
        {
            double rawDegrees = -(180.0 - (currentRotation + 360.0 * ((double)targetIndex / (double)totalNumberOfElements)));

            if (rawDegrees > 180)
                return -(360 - rawDegrees);

            return rawDegrees;
        }

        private double RotationAmount
        {
            get
            {
                return (_currentTime - _previousTime).TotalSeconds * _rotationSpeed;
            }
        }

        private const double INTERNAL_SCALE_COEFFICIENT = 0.6;
        private void Init()
        {
            _previousTime = _currentTime = DateTime.Now;

            X_SCALE = CenterX * INTERNAL_SCALE_COEFFICIENT;
            Y_SCALE = CenterY * INTERNAL_SCALE_COEFFICIENT;

            foreach (FrameworkElement element in Children)
            {
                element.MouseLeftButtonDown += new MouseButtonEventHandler(element_MouseLeftButtonDown);
                element.Cursor = Cursors.Hand;
            }

            SelectElement(GetChild(0));

            SetElementPositions();
        }

        private FrameworkElement _currentlySelected = null;
        public FrameworkElement CurrentlySelected { get { return _currentlySelected; } }
        protected double CenterX { get { return this.Width / 2.0; } }
        protected double CenterY { get { return this.Height / 2.0; } }

        protected double X_SCALE = 0;
        protected double Y_SCALE = 0;

        protected DispatcherTimer _timer = new DispatcherTimer();
        private double _rotationToGo = 0;

        private int TotalNumberOfElements { get { return Children.Count; } }
        protected double _currentRotation = 0;

        protected double _targetRotation = 0;

        protected virtual void TimerTick(object sender, EventArgs e)
        {
            _currentTime = DateTime.Now;

            if ((_rotationToGo < RotationAmount) && (_rotationToGo > -RotationAmount))
            {
                _rotationToGo = 0;

                if (_currentRotation != _targetRotation)
                {
                    _currentRotation = _targetRotation;
                }
                else
                {
                    _timer.Stop();
                    return;
                }
            }
            else if (_rotationToGo < 0)
            {
                _rotationToGo += RotationAmount;
                _currentRotation = ClampDegrees(_currentRotation + RotationAmount);
            }
            else
            {
                _rotationToGo -= RotationAmount;
                _currentRotation = ClampDegrees(_currentRotation - RotationAmount);
            }

            SetElementPositions();

            _previousTime = _currentTime;
        }

        protected double ClampDegrees(double rawDegrees)
        {
            if (rawDegrees > 360)
                return rawDegrees - 360;

            if (rawDegrees < 0)
                return rawDegrees + 360;

            return rawDegrees;
        }

        public void SetElementPositions()
        {
            for (int index = 0; index < TotalNumberOfElements; index++)
            {
                FrameworkElement element = GetChild(index);

                double elementWidthCenter = GetElementCenter(element.Width, element.ActualWidth);
                double elementHeightCenter = GetElementCenter(element.Height, element.ActualHeight);

                double degrees = 360 * ((double)index / (double)TotalNumberOfElements) + _currentRotation;

                double x = -X_SCALE * Math.Sin(ConvertToRads(degrees)) - (double.IsNaN(Y_SCALE) ? 0.0 : Y_SCALE / 100.0) * (Math.Cos(ConvertToRads(degrees)) * LookDownOffset);
                Canvas.SetLeft(element, x + CenterX - elementWidthCenter);

                double y = Y_SCALE * Math.Sin(ConvertToRads(degrees)) - (double.IsNaN(X_SCALE) ? 0.0 : X_SCALE / 100.0) * (Math.Cos(ConvertToRads(degrees)) * LookDownOffset);
                Canvas.SetTop(element, y + CenterY - elementHeightCenter);

                ScaleTransform scale = element.RenderTransform as ScaleTransform;
                if (scale == null)
                {
                    scale = new ScaleTransform();
                    element.RenderTransform = scale;
                }

                scale.CenterX = elementWidthCenter;
                scale.CenterY = elementHeightCenter;
                scale.ScaleX = scale.ScaleY = GetScaledSize(degrees);
                Canvas.SetZIndex(element, GetZValue(degrees));

                SetOpacity(element, degrees);
            }
        }

        private FrameworkElement GetChild(int index)
        {
            if (Children.Count == 0)
                return null;

            FrameworkElement element = Children[index] as FrameworkElement;

            if (element == null)
                throw new NotSupportedException("Carousel only supports children that are Framework elements");

            return element;
        }

        internal static double GetElementCenter(double elementDimension, double elementActualDimension)
        {
            return double.IsNaN(elementDimension) ? elementActualDimension / 2.0 : elementDimension / 2.0;
        }

        private void SetOpacity(FrameworkElement element, double degrees)
        {
            element.Opacity = (1.0 - Fade) + Fade * GetCoefficient(degrees);
        }

        private int GetZValue(double degrees)
        {
            return (int)(360 * GetCoefficient(degrees));
        }

        private double GetScaledSize(double degrees)
        {
            return (1.0 - Scale) + Scale * GetCoefficient(degrees);
        }

        private double GetCoefficient(double degrees)
        {
            return 1.0 - Math.Cos(ConvertToRads(degrees)) / 2 - 0.5;
        }

        private double ConvertToRads(double degrees)
        {
            return degrees * Math.PI / 180.0;
        }

        private void StartRotation(double numberOfDegrees)
        {
            _rotationToGo = numberOfDegrees;
            if (!_timer.IsEnabled)
            {
                _timer.Start();
            }
        }
    }
} 
```

XAML：

```
<UserControl
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
x:Class="WPFDemo.SphereControl"
x:Name="UserControl"
d:DesignWidth="50" d:DesignHeight="50">
<UserControl.Resources>
    <Storyboard x:Key="MouseOver">
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="1.3" KeySpline="0,0,0.5,1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="1"/>
            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="1.3" KeySpline="0,0,0.5,1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Offset)">
            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0"/>
            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.231"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Offset)">
            <SplineDoubleKeyFrame KeyTime="00:00:00" Value="0.312"/>
            <SplineDoubleKeyFrame KeyTime="00:00:00.1000000" Value="0.729"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="MouseLeave">
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleX)">
            <SplineDoubleKeyFrame KeyTime="00:00:00.5" Value="1" KeySpline="0,0,0.5,1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="LayoutRoot" Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[0].(ScaleTransform.ScaleY)">
            <SplineDoubleKeyFrame KeyTime="00:00:00.5" Value="1" KeySpline="0,0,0.5,1"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[2].(GradientStop.Offset)">
            <SplineDoubleKeyFrame KeyTime="00:00:00.5" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Storyboard.TargetName="Ellipse" Storyboard.TargetProperty="(Shape.Fill).(GradientBrush.GradientStops)[1].(GradientStop.Offset)">
            <SplineDoubleKeyFrame KeyTime="00:00:00.5" Value="0.312"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</UserControl.Resources>
<UserControl.Triggers>
    <EventTrigger RoutedEvent="Mouse.MouseEnter">
        <BeginStoryboard Storyboard="{StaticResource MouseOver}" x:Name="MouseOver_BeginStoryboard"/>
    </EventTrigger>
    <EventTrigger RoutedEvent="Mouse.MouseLeave">
        <BeginStoryboard Storyboard="{StaticResource MouseLeave}"  x:Name="MouseLeave_BeginStoryboard"/>
    </EventTrigger>
</UserControl.Triggers>

<Grid x:Name="LayoutRoot" RenderTransformOrigin="0.5,0.5">
    <Grid.RenderTransform>
        <TransformGroup>
            <ScaleTransform ScaleX="1" ScaleY="1"/>
            <SkewTransform AngleX="0" AngleY="0"/>
            <RotateTransform Angle="0"/>
            <TranslateTransform X="0" Y="0"/>
        </TransformGroup>
    </Grid.RenderTransform>
    <Ellipse Name="Ellipse" >
        <Ellipse.Fill>
            <RadialGradientBrush GradientOrigin="0.258,0.21">
                <GradientStop x:Name="OuterColor" Offset="0.9"/>
                <GradientStop x:Name="InnerColor" Offset="0.312"/>
                <GradientStop Color="#FFFFFFFF" Offset="0"/>
            </RadialGradientBrush>
        </Ellipse.Fill>
    </Ellipse>
</Grid> 
```

# linux - 为什么这个 awk 脚本看不到 shell 变量？

> ID：11411958
> 
> 赞同：1
> 
> 时间：2012-07-10T11:05:46.513
> 
> 标签：linux, awk

请告诉我为什么这个程序不起作用？帮我改进它。

```
for i in $(seq 2 30); do awk '{if ($i < 0.05) print $1,$i}' test.txt > phen_$i.txt; done 
```

文件 test.txt 如下所示：

```
name    phen1   phen2
rs549   0.02    0.02
rs699   0.03    0.03
rs701   1   1
rs751   0.449   0.449
rs884   1   1
rs923   0.9775  0.02
rs970   0.9836  0.03
rs1085  0.0001  0.99
rs1220  0.9316  0.9316 
```

输出文件预计是两个不同的文件，即 phen_2.txt 和 phen_3.txt，分别包含 col1 和 col2，以及 col1 和 col3，根据 if 条件。

phen_2.txt 的预期结果：

```
rs549 0.02
rs699 0.03
rs1085 0.0001 
```

phen_3.txt 的预期结果：

```
rs549 0.02
rs699 0.03
rs923 0.02
rs970 0.03 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T11:13:52.777

```
for ((i = 2; i <= 30; i++)); do awk -v i="$i" '$i < 0.05 {print $1, $i}' test.txt > "phen_$i.txt"; done 
```

使用变量传递 ( `-v`) 将 shell 变量放入 AWK 脚本。

你不需要`seq`。

**编辑：**

修正了我的一些过分热心和糟糕的错误。

以下是在 AWK 中完全执行相同操作的方法：

```
awk '{for (i = 2; i <= 30; i++) {if ($i < 0.05) {print $1, $i > "phen_" i ".txt"}}}' test.txt 
```

这只会遍历输入文件一次，但它会循环遍历每行输入的输出文件集。shell 版本重复读取输入文件，但写入每个输出文件一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T11:12:08.907

使用`$'$i'`代替`$`：

```
for i in $(seq 2 30)
do
  awk '{if ($'$i' < 0.05) print $1,$'$i'}' test.txt > phen_$i.txt
done 
```

问题是您`$i`的 bash 无法进入`' '`-string。所以你需要先关闭字符串，然后`$i`再打开它。

# php - Facebook CodeIgniter - 首次尝试无法登录

> ID：11411961
> 
> 赞同：0
> 
> 时间：2012-07-10T11:05:55.957
> 
> 标签：php, facebook, codeigniter, facebook-login

我正在使用 Facebook PHP 与 CodeIgniter 的集成。我有一个问题，我点击登录链接，它把我带到 Facebook 登录，我成功登录，当它重定向回我的页面时，没有任何 Facebook 信息通过。然后，如果我再次单击登录链接，它会立即让我登录，而无需 Facebook 登录表单。如果我要刷新页面而不是第二次单击登录链接，Facebook 信息仍然不会显示。

我觉得这与会话有关。

```
$facebook = $this->facebook;
$user = $facebook->getUser(); 
```

*$user*始终为 0，直到我第二次单击登录链接。这是登录流程：![在此处输入图像描述](../Images/482a1276f5976f11f3359c338248f53e.png)
我觉得它在*GET /oath/authorize*阶段失败了。

```
public function fb_login() {
    $facebook = $this->facebook;

    // Get User ID
    $user = $facebook->getUser();
    $this->session->set_userdata(array('user' => $user));

    var_dump($user);

    $profile = null;
    $logoutUrl = null;
    $loginUrl = null;

    try {
        $profile = $facebook->api('/me');
        $this->session->set_userdata(array('profile' => $profile));
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }

    if ($user) {
        $url = $this->uri->uri_string();
        $url = str_replace('/', '-', $url);
        $logoutUrl = $facebook->getLogoutUrl(array(
            'next' => site_url('[omitted]/fb_logout'.'/'.$url)));
        $this->session->set_userdata(array('logoutUrl' => $logoutUrl));
    } else {
        $loginUrl = $facebook->getLoginUrl(array('display' => 'touch'));
        $this->session->set_userdata(array('loginUrl' => $loginUrl));
    }

    $facebook_array = array(
        'user' => $user,
        'profile' => $profile,
        'logoutUrl' => $logoutUrl,
        'loginUrl' => $loginUrl
    );
    return $facebook_array;
}

public function view_events($organiser_type) {
    $this->load->helper('form');
    $organiser_type = urldecode($organiser_type);
    $data['organiser_type'] = $organiser_type;

    $data['title'] = $organiser_type.' Events';
    $data['events'] = $this->trinity_impulse_model->get_events_by_type(
            $organiser_type, 
            array('event_start_date', 'event_start_time'),
            array('asc', 'asc'));

    $i = 0;
    foreach ($data['events'] as $event) {
        $data['events'][$i]['event_start_date'] = format_timestamp_to('dateFromDB', $event['event_start_date']);
        $data['events'][$i]['event_end_date'] = format_timestamp_to('dateFromDB', $event['event_end_date']);

        $data['events'][$i]['event_start_date'] = humanise_date($data['events'][$i]['event_start_date']);
        $data['events'][$i]['event_end_date'] = humanise_date($data['events'][$i]['event_end_date']);
        $data['events'][$i]['event_start_time'] = format_timestamp_to('shorttime', $event['event_start_time']);
        $data['events'][$i++]['event_end_time'] = format_timestamp_to('shorttime', $event['event_end_time']);
    }        

    $facebook_array = $this->fb_login();

    var_dump($this->session->userdata('user'));
    // Get session values.
    /*$data['user'] = $this->session->userdata('user');

    $data['profile'] = $this->session->userdata('profile');
    $data['loginUrl'] = $this->session->userdata('loginUrl');

    $data['logoutUrl'] = $this->session->userdata('logoutUrl');
    */
    $data['user'] = $facebook_array['user'];

    $data['profile'] = $facebook_array['profile'];
    $data['loginUrl'] = $facebook_array['loginUrl'];

    $data['logoutUrl'] = $facebook_array['logoutUrl'];

    $this->load->view('[omitted]/view_events', $data);
} 
```

**编辑：**我的应用程序中的其他页面正常工作。登录会在第一次尝试时显示 Facebook 数据。其他页面没有什么不同。它们都以相同的方式使用*fb_login()*函数。

**EDIT2：**我做了*var_dump($facebook)*来查看登录失败时变量的不同之处。遇到问题时发现*状态已设置。*如果未设置，则登录没有问题。我仍然不知道如何解决这个问题。这是*var_dump()*：

```
["state":protected]=> string(32) "ac816d6fa8fba908b6bd01f3e7f0ec75" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:53:28.217

我已经解决了这个问题。
我不知道问题的原因是什么，但我修改了代码，现在它可以工作了。有问题的代码是：

```
try {
    $profile = $facebook->api('/me');
} catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
} 
```

我在它周围包裹了一个*if*，这样它只有在*$user*变量被实例化时才会被调用。代码是这样的：

```
if ($user) {
    try {
            $profile = $facebook->api('/me');
    } catch (FacebookApiException $e) {
        error_log($e);
        $user = null;
    }
} 
```

# c# - XNA 平铺引擎，放置比平铺更大的纹理

> ID：11411962
> 
> 赞同：1
> 
> 时间：2012-07-10T11:05:56.623
> 
> 标签：c#, xna

我正在使用 XNA 在 C# 中制作一个随机城市生成器，该生成器基于具有 16x16 瓷砖的瓷砖引擎。我已经以网格模式生成了道路，并将它们放置`List<T>`在像素位置以及平铺坐标中。所以我将道路使用的瓷砖设置为“Occupied = true”，并尝试用建筑物填充任何剩余的未使用瓷砖。

然而，困难在于我希望建筑纹理大于只有一块瓷砖。我的瓷砖被组织在另一个地方`List<T>`并且有一个被占用的财产，所以我可以检查天气它是否被填满。所以我需要检查 32x32 矩形中 4 个瓷砖的属性，以查看它们被占用的天气，如果没有在那里放置建筑物。

我已经实现了这一点，但是它非常缓慢且效率低下，因为它循环遍历每个图块并每次循环检查整个列表 4 次。所以我正在寻找一种更好的方法来做到这一点。我也知道我的整个系统可能有点愚蠢，但我是新手，正在尝试使用我有限的知识来实现​​这一点。

```
foreach (Tile Tile in Tiles) {
  Tile Tile1 = Tiles.Find(delegate(Tile T1) { return T1.TileCoords() ==
    new Vector2(X, Y) && T1.Occupied == false; });
  Tile Tile2 = Tiles.Find(delegate(Tile T1) { return T1.TileCoords() ==
    new Vector2(X + 1, Y) && T1.Occupied == false; });
  Tile Tile3 = Tiles.Find(delegate(Tile T1) { return T1.TileCoords() ==
    new Vector2(X, Y + 1) && T1.Occupied == false; });
  Tile Tile4 = Tiles.Find(delegate(Tile T1) { return T1.TileCoords() ==
    new Vector2(X + 1, Y + 1) && T1.Occupied == false; });
  if (Tile1 != null && Tile2 != null && Tile3 != null && Tile4 != null) {
    MyBuildings.Add(new Buildings(new Rectangle(Tile1.Rectangle.X,
    Tile1.Rectangle.Y, Engine.TileWidth * 2, Engine.TileHeight *  2)));
  Tile1.Occupied = true;
  Tile1.OccupiedWith = "Building";
  Tile2.Occupied = true;
  Tile2.OccupiedWith = "Building";
  Tile3.Occupied = true;
  Tile3.OccupiedWith = "Building";
  Tile4.Occupied = true;
  Tile4.OccupiedWith = "Building";
}
if (X > WorldSize.X / 16) {
  X = 0;
  Y++;
} else
  X++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:27:57.100

考虑将图块存储在二维数组中。这是基于图块的游戏非常常见（如果不是最常见的话）的做法。现在您将它们存储在数组中，这对于遍历非常低效，因为您必须遍历*整个*数组才能找到某个图块。使用二维数组，您可以通过以下方式搜索图块：

```
Tile T1 = Tiles[T1.X, t1.Y];
Tile T2 = Tiles[T1.X + 1, t1.Y];
Tile T3 = Tiles[T1.X, t1.Y + 1];
Tile T4 = Tiles[T1.X + 1, t1.Y + 1]; 
```

由于您的图块具有 16 像素的标准尺寸，您可以通过将图块的像素位置（绘图）和它们在数组中的位置轻松转换，方法是将它们除以或乘以 16

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:33:20.457

我建议改变你存储瓷砖的方式。

每个 tile 可以有`List<Tile>`一个 8x8 配置的邻居： ![在此处输入图像描述](../Images/ccd4d77a8f7707195b65943b14491311.png)

当你试图找到一个空闲空间时，你只需线性迭代 8 个邻居。

这种方式只有在创建地图时才需要计算邻居，并将它们存储在邻居列表中。

通过这种表示，您还可以发现使用特定模式（例如创建河流、道路等）更容易穿过网格。

# c++ - 传递枚举数组是什么意思？

> ID：11411967
> 
> 赞同：1
> 
> 时间：2012-07-10T11:06:15.830
> 
> 标签：c++, c

我们可以将枚举作为数组或指针传递吗？我在互联网的某个地方听到过这种类型的问题。所以我想检查一下这是什么意思。我们怎么能这样做？例子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:17:31.853

就像任何其他数组一样：

```
#include <stdio.h>

enum colour {
    WHITE,
    RED,
    ORANGE,
    YELLOW,
    GREEN,
    BLUE,
    INDIGO,
    VIOLET,
    BLACK
};

char *colour_names[] = {
    "WHITE",
    "RED",
    "ORANGE",
    "YELLOW",
    "GREEN",
    "BLUE",
    "INDIGO",
    "VIOLET",
    "BLACK"
};

void show_colours(enum colour colours[], int count) {
    int i;

    for (i = 0; i < count; ++i) {
        printf("%s ", colour_names[(int)colours[i]]);
    }
    printf("\n");
}

int main(int argc, char **argv) {
    enum colour estonia[] = {BLUE, BLACK, WHITE};
    show_colours(estonia, 3);
    return 0;
} 
```

输出：

```
BLUE BLACK WHITE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:18:14.200

你不能。我的意思是，如果你有

```
typedef enum {
    ALFA,
    BRAVO,
    CHARLIE,
    DELTA
} Alphabet; 
```

您无法按原样将该信息传递给函数。

您可以做的是，声明一个整数数组并将 Alphabet 的值*分配给该数组：*

字母 ab[26] = { ALFA, BRAVO, CHARLIE, ... }

此时，您将能够像传递任何其他指针一样传递“ab”。

# jquery - jQuery移动问题

> ID：11411968
> 
> 赞同：0
> 
> 时间：2012-07-10T11:06:18.357
> 
> 标签：jquery, mobile

在我的 PHP 站点上，我使用 jquery 在这里和那里做一些小事情，但特别是一个页面大量使用它。

我让人们告诉我“它不适用于手机”，这可能是代码或脚本问题的情况，还是只是某些手机不喜欢 jquery 脚本？

我的网站有一个侧边栏，它使用 jquery 每 10 秒刷新一次，没有人说过这不起作用，只是因为我添加了这个特定页面。我猜这是一个代码问题。

基本上我问是否有什么我可以做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T12:30:27.107

我最近一直在构建一个严重依赖 jquery 的移动混合应用程序。jquery在广义上可以在手机上运行良好，但存在一些具体问题。

动画片：

动画可能缓慢而跳跃，但正如我昨晚发现的那样，您可以强制 GPU 硬件加速与 jquery 以及 CSS 转换一起使用，并且性能改进是巨大的。我通过在所有 div 和图像上使用下面的 css 样式来强制硬件在渲染 3d 图形时考虑它来实现这一点：

```
div, img {-webkit-transform:translateZ(0); } 
```

效果延迟：

当调用 jquery 事件时，例如按钮“单击”，事件发生可能需要 1 秒，具体取决于事件是什么以及被调用的内容。

我什至不使用jquery mobile，只是普通的jquery，除了只有真正的挑剔者会抱怨的非常小的性能问题外，jquery 可以运行得很好。这只是优化代码并养成某些编码习惯以减少处理引擎负载的情况。

# vb.net-2010 - 如何更改 system.timespan 格式 VB.net？

> ID：11411972
> 
> 赞同：1
> 
> 时间：2012-07-10T11:06:30.590
> 
> 标签：vb.net-2010

我有以下代码 VB.net/asp.net：

```
Dim DT As Date = date value
Dim DIF As System.TimeSpan = DT.Subtract(Date.Now)
TextBox1.Text = DIF.ToString 
```

但是输出格式是 dd/mm/yyyy hh:mm:ms:nanoseconds，比如 10/07/2012 04:53:11.2812500。但我需要输出像 10/07/2012 04:53。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:14:03.763

你有没有看过

[TimeSpan.ToString 方法（字符串）](http://msdn.microsoft.com/en-us/library/dd992632.aspx#Y0)

[标准时间跨度格式字符串](http://msdn.microsoft.com/en-us/library/ee372286.aspx)

[自定义 TimeSpan 格式字符串](http://msdn.microsoft.com/en-us/library/ee372287.aspx)

# ios - UIAlertView 奇怪的角落显示

> ID：11411973
> 
> 赞同：0
> 
> 时间：2012-07-10T11:06:37.653
> 
> 标签：ios

我在 UIAlertView 中有一个 UITableView，现在它显示了一些非常丑陋的角落。我确实在 willPresentAlertView() 中放大了警报视图的大小。

```
#define ALERT_VIEW_WIDTH 750
#define ALERT_PADDING 20
- (void)willPresentAlertView:(UIAlertView *)alertView {
    {
        NSLog(@"%@", [[alertView class] description]);

        id thing;
        if ( [[[alertView class] description] isEqualToString:@"UIAlertTableView"]){ //change the alert view size
            NSLog(@"center: %f", alertView.center.x);

            int center=alertView.center.x-ALERT_VIEW_WIDTH/2;
            for (thing in alertView.subviews)
            {
                NSLog(@"%@", [[thing class] description]);
                if([[[thing class] description] isEqualToString:@"UITableView"])
                {
                    UIView* v=(UIView*)thing;
                    v.frame=CGRectMake(v.frame.origin.x+ALERT_PADDING, v.frame.origin.y, ALERT_VIEW_WIDTH-ALERT_PADDING*3, 250);
                }
                if([[[thing class] description] isEqualToString:@"UIAlertButton"])
                {
                    //UIView* v=(UIView*)thing;
                    //v.frame=CGRectMake(v.center.x, v.frame.origin.y, 100, v.frame.size.height-10);
                }
                if([[[thing class] description] isEqualToString:@"UILabel"])
                {
                    //UIView* v=(UIView*)thing;
                    //v.frame=CGRectMake(center-v.frame.size.width/2, v.frame.origin.y, v.frame.size.width, v.frame.size.height);
                }
            }
            alertView.frame=CGRectMake(center, alertView.frame.origin.y, ALERT_VIEW_WIDTH, 360);

        }        

    }
} 
```

如何解决这个问题？谢谢！ ![在此处输入图像描述](../Images/854e5ada42788a879a6935f3b0ffb6f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:11:51.170

It looks like it has just stretched itself, rather than redrawn its contents. You would need to tell it it needs redrawing (`[alertView setNeedsDisplay]`), or set its content mode to redraw, so that the frame change triggers a redraw.

As an aside, this navigation of private view hierarchies is pretty fragile stuff. It wouldn't take much of a change in iOS for this to mysteriously stop working.

# java - AJAX Post - 在 JSP 中执行，需要在 AJAX POST Success 函数中返回基于 java 的变量

> ID：11411983
> 
> 赞同：1
> 
> 时间：2012-07-10T11:07:22.743
> 
> 标签：java, ajax, jsp, spring-mvc

我在 JSP 中使用 ajax post，将 json 数据发送到 servlet java 类。在 servlet 控制器类中，我使用 getparameter 来获取从调用 JSP 发送的数据。

到目前为止，这一切都很好。然后我开始处理来自这个 servlet 类的数据，并且我需要制定一个数据响应以发送回调用 JSP。

有没有办法可以将数据保存在 servelt 类中的变量中，并作为成功函数的一部分（在我的 AJAX 帖子中）访问这些数据？

我的 AJAX 邮政编码：

```
 $.ajax({ 
        type:        "POST", 
        url:           url, 
        dataType:  "text",  // [text, xml, json, script, text, html]
        data:       {postData : myData, sendURL : postUrl}, 
        success:    function(data, textStatus, jqXHR) { 
            alert('Success post to URL entered \n\n The data returned the following: ' + data);
        }, 
        error:function (xhr, ajaxOptions, thrownError){ 
            alert('Error xhr : ' + xhr.status); 
            alert('Error thrown error: ' + thrownError); 
        }
        //complete: alert('complete')                   
    }); 
```

我的 Servlet 控制器代码：

```
 @RequestMapping("/postData")
    public String postData(Model model, HttpServletRequest request) throws Throwable{

        String postData = request.getParameter("postData");
        String sendURL= request.getParameter("sendURL");

        System.out.println(this.getClass() + " : postData   : " + postData);
        System.out.println(this.getClass() + " : gatewayURL : " + gatewayURL);

        /* Process data and formulate a response.... */

        String responseText = processedResponseText; // This processedResponseText was populated in the internal processing
        String responseCode = processedResponseCode; // This processedResponseCode was populated in the internal processing

        return "callingJSP";
    } 
```

作为我的 AJAX Post - Success 函数的一部分，如何将这两个变量（responseText 和 responseCode）返回给调用 JSP？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T11:11:37.393

还..

成功将返回响应

```
success:    function(data, textStatus, jqXHR) { 
       alert('Success post to URL entered \n\n The data returned the following: ' + data);
    }, 
```

成功函数中不需要 XHR 和 textStatus 应该是这样的：

```
success:    function(response) { 
       alert('Success post to URL entered \n\n The data returned the following: ' + response.responseText);
    }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T18:50:46.420

如果您知道传入数据的结构（您应该知道！），请创建一个可以将发布数据序列化为的对象（我假设 myData 是 json？...如果不是，它应该是！）由小服务程序。spring 框架提供了 @RequestBody 注解来将传入的 json 反序列化为你的对象。当 servlet 需要响应时，请执行@Jigar 建议的操作：将您的响应包装在一个对象中。spring 框架提供了@ResponseBody 注解来序列化你对json 的响应。它可能看起来像这样：

你的js：

```
var myData = { postId: 1, comment: "this is great!" };
 $.ajax({ 
        type:        "POST", 
        url:           url, 
        dataType:  "text",  // [text, xml, json, script, text, html]
        data:       {postData : myData, sendURL : postUrl}, 
        success:    function(data, textStatus, jqXHR) {
            var jsonRepsonse = JSON.parse(data);
            alert('Success post to URL entered \n\n The data returned the following: ' + jsonRepsonse.responseText + ", " + jsonRepsonse.responseCode);
        }, 
        error:function (xhr, ajaxOptions, thrownError){ 
            alert('Error xhr : ' + xhr.status); 
            alert('Error thrown error: ' + thrownError); 
        }
        //complete: alert('complete')                   
    }); 
```

您的 Java 对象：

```
class Comment {
  private long postId;
  private String comment;
  // getters & setters
} 
```

您包装的响应对象：

```
class AjaxResponse{
 private String responseText;
 private String responseCode;
 //other stuff
} 
```

控制器中的处理函数：

```
 @RequestMapping("/postData")
 public @ResponseBody postData(Model model, 
             @RequestBody Comment comment,
             HttpServletRequest request) throws Throwable{

    String sendURL= request.getParameter("sendURL");

    System.out.println(this.getClass() + " : comment : " + comment.toString());

    /* Process data and formulate a response.... */

    AjaxResponse ajaxResponse = new AjaxResponse(processedResponseText, processedResponseCode);

    return ajaxResponse;
 } 
```

理想情况下，您的 AjaxResponse 包含另一个对象而不是提供有关响应的更多信息的文本。例如，您可能希望按如下方式更改 AjaxResponse 对象：

```
class CommentResponse extends Comment {
   private long commentId;
   private Timestamp entryDateTime;
   // etc
}

class AjaxResponse{
 private CommentResponse commentResponse;
 private String responseCode;
 //other stuff
} 
```

在前端收到响应时，这样做会极大地帮助您，但这取决于您的需要。

# objective-c - 对存储为 NSString 的两个十六进制值进行异或？

> ID：11411986
> 
> 赞同：1
> 
> 时间：2012-07-10T11:07:47.617
> 
> 标签：objective-c, hex, xor

这是我的另一个愚蠢问题！

```
NSString *hex1 = @"50be4f3de4";
NSString *hex2 = @"30bf69a299";

/* some stuff like result = hex1^hex2;    */

NSString *result = @"6001269f7d"; 
```

我有一个十六进制值作为字符串，存储在两个差异中。变量。我需要对它们进行异或运算，结果应该在另一个字符串变量中？

我通过转换字符串-> NSData-->字节数组-> xor'ing它们来尝试它们......但我没有成功......提前谢谢你......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T06:30:28.930

您必须首先将每个字符转换为 Base16（十六进制）格式。然后您应该对这些字符进行异或运算。您可以使用 strtol() 函数来实现此目的。

```
NSString *hex1 = @"50be4f3de4";
NSString *hex2 = @"30bf69a299";

NSMutableArray *hexArray1 = [self splitStringIntoChars:hex1]; 
NSMutableArray *hexArray2 = [self splitStringIntoChars:hex2]; 

NSMutableString *str = [NSMutableString new];
for (int i=0; i<[hexArray1 count]; i++ )
{
    /*Convert to base 16*/
    int a=(unsigned char)strtol([[hexArray1 objectAtIndex:i] UTF8String], NULL, 16);
    int b=(unsigned char)strtol([[hexArray2 objectAtIndex:i] UTF8String], NULL, 16);

    char encrypted = a ^ b;
    NSLog(@"%x",encrypted);
    [str appendFormat:@"%x",encrypted];        
}
NSLog(@"%@",str); 
```

我用来分割字符串字符的实用方法

```
-(NSMutableArray*)splitStringIntoChars:(NSString*)argStr{
    NSMutableArray *characters = [[NSMutableArray alloc] 
                              initWithCapacity:[argStr length]]; 
    for (int i=0; i < [argStr length]; i++) 
    { 
        NSString *ichar = [NSString stringWithFormat:@"%c", [argStr characterAtIndex:i ]]; 
        [characters addObject:ichar]; 
    } 
    return characters;
} 
```

希望能帮助到你！！

# c++ - 使用 erlang 构建 C++ 编译器

> ID：11411987
> 
> 赞同：2
> 
> 时间：2012-07-10T11:07:49.953
> 
> 标签：c++, compiler-construction, erlang

您认为一个人（平均 C++ 经验）是否有可能使用 Erlang 构建非商业 C++ 编译器，可能专注于优化？

我不确定这是否完全不现实？人们有什么建议吗？

erlang 是最好用的语言吗？由于它的模式匹配，我认为它会很好。我不确定它的并发性是否有助于编写编译器？

编辑：原因是我没有在工作中编写 C++ 代码，我想了解更多关于这种语言的知识，因为我对低延迟工作感兴趣。我认为通过编写编译器了解来龙去脉是最好的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-10T11:12:41.900

A C++ compiler is a lot of work. No, really, a **lot** of work. C++ is one of the hardest (if not the hardest) production languages to parse. Even just the front-end. Just try reading the standard, it's more than one thousand pages of dense text.

What do you want to use it for? LLVM has the [Clang C/C++](http://clang.llvm.org/) front end and an extremely friendly and well-documented intermediate representation. I suggest you use something like this (from Erlang, appropriately adapted or otherwise) and concentrate on the optimisation stage - leaving the parsing to someone else.

Pattern matching does make for a nice compiler though. So Erlang/F#/Scala/Ocaml/Haskell will shine here.

# html - 如何设置输入类型复选框边框右？

> ID：11411989
> 
> 赞同：0
> 
> 时间：2012-07-10T11:07:51.407
> 
> 标签：html, css

我需要设置输入类型复选框右侧填充`10px`和`border-right:1px solid #000`. 我正在尝试这个，但复选框没有取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T11:09:46.537

```
input[type="checkbox"]{
   border-right:1px solid #000;
   padding-right:10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T11:13:25.737

You can't restyle the appearance of a check box. its fixed in the browser like radio buttons.

you could try [http://www.no-margin-for-errors.com/projects/prettycheckboxes/](http://www.no-margin-for-errors.com/projects/prettycheckboxes/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-10T11:13:31.160

阅读以下内容：[http](http://www.456bereastreet.com/lab/styling-form-controls-revisited/checkbox/)
://www.456bereastreet.com/lab/styling-form-controls-revisited/checkbox/这应该会给您以不同方式设置复选框样式的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T11:14:36.863

`Padding`在元素内部，如果您想要 10px 右侧间距，请改用`margin-right`

```
input[type="checkbox"]{
   border-right:1px solid #000; // dont know what use is this to the OP
   margin-right:10px;
} 
```

# eclipse - 子剪辑标签装饰不同步

> ID：11411991
> 
> 赞同：1
> 
> 时间：2012-07-10T11:07:57.127
> 
> 标签：eclipse, svn, subclipse, sts-springsourcetoolsuite

我使用 Eclipse 的 SpringSourceToolSuite (v2.9.2.201205071000-RELEASE) 版本和 Subclipse (v1.8.13)。签入代码时，我使用 Tortoise，然后返回 eclipse，在其中运行完整的项目清理，将颠覆装饰（即星号、十字、问号等）重置为正确状态。

这通常是我需要做的，但最近即使我（比如说）刚刚签入文件并与存储库进行比较，装饰也没有重置。

我可以通过添加和删除空格来编辑文件，然后正确重置装饰。事实证明这是一种痛苦，现在我有一个用 + 符号装饰的包裹，我无法摆脱它。

还有其他人遇到此问题或设法解决了吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T11:21:22.847

Please try: right click on project, Team-> Refresh/Cleanup

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T12:57:12.013

我必须在首选项/团队/SVN/标签装饰/文本装饰/项目中将{label_decoration}更改为{resource_url}。

所以我的项目条目是：{outgoing_flag} {name} {revision} [{resource_url}{root_prefix}: {first_branchOrTag_child}]

# delphi - Will the dcc32.exe compiler use project build configuration file when is called with --no-config parameter?

> ID：11411998
> 
> 赞同：6
> 
> 时间：2012-07-10T11:08:24.007
> 
> 标签：delphi, build, delphi-2009, buildconfiguration, dcc32

***Problem description:***

Consider the following command line call (called for Delphi 2009 compiler):

```
dcc32.exe --no-config --peflags:1 Project.dpr 
```

Will this call use the `Project.dproj` or `Project.dof` configuration files ?

*   If yes, will the command line options take precedence over the configuration file(s) ?
*   If not, where the build configuration will be taken from if the dcc32.cfg file is not loaded in this case ?

***Problem background:***

I know that MSBuild should be used since Delphi 2007 but in fact, it's the reason why I'm asking. I found that InnoSetup uses [`this batch file`](https://github.com/jrsoftware/issrc/blob/master/compile-unicode.bat) for building its projects and I have serious problems to link the JEDI JVCL library to it (it's a pure nightmare). So I'd like to configure the project settings to use MSBuild, but I'm not sure what build settings are used in the above command line call.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T11:50:35.233

`--no-config` means that dcc32.cfg is not loaded, neither from the compiler executable directory, nor from the project directory.

The rules for applying options specified in .dproj and .dof files are not affected. Those options are applied and any command line options take precedence.