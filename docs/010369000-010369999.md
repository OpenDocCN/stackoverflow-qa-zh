# StackOverflow 问答 10369000-10369999

# ruby-on-rails - 未初始化的常量 ImageUploader::CarrierWaveDirect

> ID：10369003
> 
> 赞同：3
> 
> 时间：2012-04-29T01:34:18.180
> 
> 标签：ruby-on-rails, ruby-on-rails-3, amazon-s3, carrierwave, image-uploading

我使用 RailsCasts 的 Carrierwave[教程](http://railscasts.com/episodes/253-carrierwave-file-uploads)来上传和显示我的图像，现在我想使用[CarrierWaveDirect](https://github.com/dwilkie/carrierwave_direct)让图像直接上传到 S3 ，但是“未初始化的常量 ImageUploader::CarrierWaveDirect”这个错误显示。（我真的不知道仅使用 CW 将图像存储在哪里，但我猜是在应用程序内部）

在 Railscasts 版本之后，

1.  我安装了 gem 'carrierwave_direct' 和 'fog'
2.  我在 config/initializers 中创建了一个 carrierwave.rb 文件（不确定这是否是正确的位置或正确的文件名，因为 CarrierWave 中的自述文件提到了有关 lib/carrierwave/storage/fog.rb 的内容）
3.  我将 image_uploader.rb 中的“storage:file”更改为“include CarrierWaveDirect::Uploader”
4.  在表单视图中，我将“form_for”更改为“direct_upload_form_for”

我还需要改变什么吗？我也不太明白原始 CW 自述文件中的“确保在加载 ORM 后加载 CarrierWave，否则您需要手动要求相关扩展，例如：需要 'carrierwave/orm/activerecord'”。

我只是对我需要做什么感到困惑，因为原始的 CarrierWave 和 CW_direct 自述文件都提到了 S3 上传，而我陷入了两者都给出的两个方向之间......

谁能帮我理解什么是错的，为什么它说'未初始化的常量 ImageUploader::CarrierWaveDirect'？我也有一个关于不真实的错误，我假设它与 Devise 有关 - 是因为图像被附加到由 Devise 生成的用户并且我需要配置一些东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-21T07:40:38.197

就我而言，安装carrierwave后我只是重新启动rails服务器，之后一切正常。

# java - Java Servlet Web XML URL 映射

> ID：10369007
> 
> 赞同：0
> 
> 时间：2012-04-29T01:35:07.263
> 
> 标签：java, servlets, web.xml, url-pattern

一段时间以来，我一直在为 Tomcat 处理这个 web xml 文件。

```
<context-param>
    <param-name>name</param-name>
    <param-value>Bob</param-value>
</context-param>

<servlet>
    <servlet-name>test</servlet-name>
    <servlet-class>TestServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>test</servlet-name>
    <url-pattern>/servlet/*</url-pattern>
</servlet-mapping> 
```

我知道这个文件正在被读取，因为当我测试使用

```
public class TestServlet extends HttpServlet{
public void doGet(HttpServletRequest req, HttpServletResponse res){
    res.setContentType("text/html");

    String name = getServletContext().getInitParameter("name");

    PrintWriter out = null;
    try{
        out = res.getWriter();
    }catch(Exception e){}

    out.println("<html><head></head><body><img src=\"/twitter.png\"><p>Hi my name is " + name + "</p></body></html>");
} 
```

}

我能够读取我放入上下文参数的名称。我对你们的问题是如何创建一个 URL 映射，这样我就不必通过 /servlet/ 来访问我在 URL 中的 servlet？当我尝试制作一个 url 模式时，例如

/test/*，即使我说 website/test/TestServlet，我也无法访问 servlet。我从浏览器收到 404 Not Found 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:58:58.913

将 servlet 类放在一个包中，不要依赖`InvokerServlet`. 它自 Tomcat 5.5 起被禁用，并在 Tomcat 7.0 中被删除。

请不要阅读 10~15 岁的教程/书籍。技术每年都在变化。

### 也可以看看：

*   [如何在没有映射 web.xml 的情况下调用 servlet？](https://stackoverflow.com/questions/5031018/how-to-invoke-a-servlet-without-mapping-in-web-xml)

# objective-c - Objective-C/Cocoa：检测所有按键

> ID：10369008
> 
> 赞同：7
> 
> 时间：2012-04-29T01:35:31.943
> 
> 标签：objective-c, macos, cocoa, keypress

每次用户按键时是否可以运行一个方法。基本上我想在按下一个键时发出类似 iPhone 或 iPad 上的声音。**我不想在我的窗口或某个控件中检测按键，我想检测所有按键（例如当他们在 Safari 中输入或其他内容时。**我不需要知道键是什么。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T01:45:17.883

使用`CGEventTapCreate`记录在这里：

[https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html](https://developer.apple.com/library/mac/#documentation/Carbon/Reference/QuartzEventServicesRef/Reference/reference.html)

或使用此处记录的 NSEvents `addGlobalMonitorForEventsMatchingMask:handler:`：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html)

NSEvent 示例：

```
[NSEvent addGlobalMonitorForEventsMatchingMask:(NSKeyDownMask) handler:^(NSEvent *event){
    [self keyWasPressedFunction: event];
    //Or just put your code here
}]; 
```

我会说 NSEvents 更容易......

笔记：

出于安全原因，Apple 要求您在“系统偏好设置”中打开“启用辅助设备访问”，以便使用上述方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T01:42:38.053

您可以使用 Quartz 事件点击非常接近，但为了安全起见，即使使用一个按键也无法检测到某些按键。

如果您告诉我们您心目中的更广泛目标，我们可以提出替代方案。您是否正在尝试为您的应用程序建立一个全局热键？您是在编写键盘记录程序还是恶意软件？什么？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T02:16:54.977

采用`NSEvents addGlobalMonitorForEventsMatchingMask:handler:`

`applicationDidFinishLaunching`添加以下代码，构建并开始！

```
[NSEvent addGlobalMonitorForEventsMatchingMask:(NSKeyDownMask) handler:^(NSEvent *event){
NSLog(@"%@", event.characters);
}]; 
```

Apple 要求您在“系统偏好设置”中打开“启用辅助设备访问”。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/nsevent_Class/Reference/Reference.html)

# bash - 无法匹配 bash select 语句中的任何选项

> ID：10369009
> 
> 赞同：3
> 
> 时间：2012-04-29T01:35:39.667
> 
> 标签：bash

我正在尝试将 bash`select`语句用于命令循环。select 语句中的变量始终为空。这是一个说明问题的简单脚本：

```
#!/bin/bash

select term in one two exit
do
  echo you selected $term
  case $term in
    one ) echo one; break;;
    two ) echo two; break;;
    exit ) echo will exit; return;;
  esac
done 
```

这是我运行此脚本时发生的情况：

```
$ ./test.sh 
1) one
2) two
3) exit
#? one
you selected
#? two
you selected
#? exit
you selected
#? ^D 
```

有谁知道我可能做错了什么？我在 Mac OS X 10.7.3 上。`/bin/bash --version`显示：GNU bash，版本 3.2.48(1)-release (x86_64-apple-darwin11)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T02:49:08.140

@jedwards 给了你直接的答案。但是，如果您想保护自己免受其他用户遇到相同错误的影响，您可以执行以下操作

```
select term in first second exit; do
  [[ -z $term ]] && casevar=$REPLY || casevar=$term. # or, shorter, casevar=${term:-$REPLY}
  case $casevar in
    1|first) echo "the first option"; break ;;
    2|second) echo "option no. 2"; break ;;
    3|exit) echo bye; break ;;
  esac
done 
```

请注意 bash 手册中的这一点：

> 从标准输入中读取一行。如果该行包含与显示的单词之一相对应的数字，则将 name 的值设置为该单词。如果该行为空，则再次显示单词和提示。如果读取 EOF，则选择命令完成。读取的任何其他值都会导致 name 设置为 null。读取的行保存在变量 REPLY 中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T01:44:44.043

如果您输入“1”或“2”而不是“一”或“二”，则该脚本有效。

# java - 如何让tomcat从我的Mac键盘上理解MacRoman（x-mac-roman）字符集？

> ID：10369014
> 
> 赞同：-2
> 
> 时间：2012-04-29T01:36:57.467
> 
> 标签：java, macos, tomcat, servlets, character-encoding

我的 Mac 键盘将 x-mac-roman 字符集发送到 Tomcat。有没有办法强制我的浏览器或 tomcat 以某种方式理解我在我的 mac 上输入的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T09:44:53.113

您需要确保每个组件在每个阶段都使用相同的字符集。

要强制 Tomcat 使用特定的字符编码，您需要在连接器上设置 URIEncoding。在这种情况下，您可能需要 URIEncoding="x-MacRoman"

您可能还会发现这很有用：[http ://wiki.apache.org/tomcat/FAQ/CharacterEncoding](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T19:41:20.523

Use UTF-8 instead. It's understood by every self-respected client side **and** server side operating system platform. It's also considered the standard character encoding these days. Tomcat still defaults to the old ISO 8859-1 charset as to decoding GET request parameters and to the server platform default encoding as to decoding POST request parameters.

To set the GET request encoding, edit the desired HTTP connector in Tomcat's `/conf/server.xml`:

```
<Connector ... URIEncoding="UTF-8"> 
```

To set the POST request encoding, create a servlet filter which basically does the following in the `doFilter()` method and map it on the URL-pattern matching all POST requests such as `*.jsp` or `/*`:

```
request.setCharacterEncoding("UTF-8");
chain.doFilter(request, response); 
```

To tell JSP to use the specified encoding on generating the response (you still need to make sure that you save the JSP files using the very same encoding) which will implicitly also tell the client to use UTF-8 to interpret the response and encode the subsequent request, set the following in top of every JSP:

```
<%@page pageEncoding="UTF-8"%> 
```

Or set the following configuration entry in webapp's `web.xml`, so that it get applied on every single JSP:

```
<jsp-config>
    <jsp-property-group>
        <url-pattern>*.jsp</url-pattern>
        <page-encoding>UTF-8</page-encoding>
    </jsp-property-group>
</jsp-config> 
```

If you happen to use a database, don't forget to set the proper encoding in there as well.

### See also:

*   [Unicode - How to get the characters right?](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:59:14.183

该问题与 POST 请求有关。Tomcat 对他们不好。修复：将此过滤器添加到您的所有请求中：[http ://wiki.apache.org/cocoon/SetCharacterEncodingFilter](http://wiki.apache.org/cocoon/SetCharacterEncodingFilter)

```
<filter>
<filter-name>SetCharacterEncoding</filter-name>
<filter-class>SetCharacterEncodingFilter</filter-class>
<init-param>
<param-name>encoding</param-name>
<param-value>UTF-8</param-value>
</init-param>
</filter>

<filter-mapping>
<filter-name>SetCharacterEncoding</filter-name>
<url-pattern>/*</url-pattern>
</filter-mapping> 
```

# php - 为什么大数组索引没有正确存储？

> ID：10369017
> 
> 赞同：1
> 
> 时间：2012-04-29T01:38:11.493
> 
> 标签：php, windows

我正在处理涉及非常大的主键（12 位）的数据。当我尝试将数据放入表单中的数组时`id => value`，索引未正确分配。

```
$test = array(190337172011 => 'Apple');
print_r($test); 
```

结果：

```
Array ( [1358610987] => Apple ) 
```

有时它甚至会导致负数。为什么会这样？它是一个错误吗？

我在 IIS 上运行 PHP 5.3.10。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:41:54.530

整数的大小取决于平台，尽管通常值约为 20 亿的最大值（即 32 位有符号）。64 位平台的最大值通常约为 9E18。PHP 不支持无符号整数。自 PHP 4.4.0 和 PHP 5.0.5 起，可以使用常量 PHP_INT_SIZE 确定整数大小，使用常量 PHP_INT_MAX 确定最大值。

来源： http: [//php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T11:10:57.197

您在可能是 32 位 Windows 操作系统（例如 Windows XP）上使用 32 位 PHP 版本。

对于数值数组索引，PHP 使用整数变量类型来存储键。这些是有限的。如果您选择的值大于限制，则此限制变得可见，这将根据 PHP 版本和操作系统触发最大值或周转。

您的系统上的整数类型的值`190337172011`太大，这就是为什么您通过往返获得上限，结果为`1358610987`. 往返意味着，在可能的最大正数之后，下一个数字是可能的最小数，即可以表示的“最大”负数。这就是为什么你也会得到负数。

您可以通过将值存储为需要一些预先修复的字符串键来解决此问题：

```
$test = array('ID' . 190337172011 => 'Apple');
print_r($test); 
```

这通常足以使您的代码更具可移植性。您可以根据需要选择任何字符串前缀，`ID`这只是示例，但您至少需要一个非数字字符。

# java - 在线程内执行 HTTP 请求 - 错误

> ID：10369021
> 
> 赞同：0
> 
> 时间：2012-04-29T01:40:16.297
> 
> 标签：java, android

以下是我用于在新线程中向服务器发送 HTTP 请求的活动代码。但是，有一个我无法弄清楚的语法错误。

以下是我得到的错误

```
 Multiple markers at this line
    - Syntax error, insert ")" to complete       ClassInstanceCreationExpression
    - Syntax error, insert ";" to complete BlockStatements 
```

我是 Java 新手。请帮忙。

```
public class RegisterActivity extends Activity {

    private static final String TAG = "RegisterActivity";

    /*
     * Event listener for registration button. This will load the loading view and fire up the HTTP request to the server
     */
    public OnClickListener registrationBtnListener = new OnClickListener() {
        public void onClick(View v) {

            Thread trd = new Thread(new Runnable(){
                @Override
                public void run(){

                    String urlParameters = "";

                    try {
                        urlParameters = "fName=" + URLEncoder.encode("John", "UTF-8") +
                        "&lName=" + URLEncoder.encode("Smith", "UTF-8");
                    } catch (UnsupportedEncodingException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Http.post("http://192.168.1.101/project/test.php", urlParameters);
                }
            }
            trd.run();
        }
    }; 
```

编辑 ：

通过添加 ) 修复；在 trd.run() 之前。但是现在，我得到了一个不同的错误：

```
Multiple markers at this line
    - The method run() of type new Runnable(){} must override a superclass 
     method
    - implements java.lang.Runnable.run 
```

以下是代码：

```
Thread trd = new Thread(new Runnable(){
                @Override
                public void run(){

                    String urlParameters = "";

                    try {
                        urlParameters = "fName=" + URLEncoder.encode("yash", "UTF-8") +
                        "&lName=" + URLEncoder.encode("desai", "UTF-8");
                    } catch (UnsupportedEncodingException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

                    Http.post("http://192.168.1.101/bworld/test.php", urlParameters);
                }
            }); 
```

错误在这一行：

```
public void run(){ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T01:43:59.803

你错过了关闭`)`。`new Thread(...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T02:00:22.907

重新第二个错误。我认为问题在于`@Override`注释。如果您使用 Java 1.5 作为源代码级别进行编译，则该注释意味着您需要覆盖超类中的方法。但是你（只是）在接口中实现一个方法。

删除注释，或者将源代码级别更改为 Java 1.6 或更高版本。

# javascript - javascript如何使用变量来引用对象

> ID：10369028
> 
> 赞同：0
> 
> 时间：2012-04-29T01:41:28.130
> 
> 标签：javascript, object

我有一个像这样的javascript对象

```
var obj={
    a:{x: "someValue", y:"anotherValue"},
    b:{x: "bValue", y:"anotherbValue"}
}; 
```

我试图像这样引用它

```
function(some_value){
    alert("some_value is " + some_value + " with type " + typeof some_value);
    // prints  some_value is a  with type  string 
    var t;
    t=obj[some_value]["x"];   // doesn't work   
    some_value="a";
    t=obj[some_value]["x"];  // this does work
    t=obj["a"]["x"];     // and so does this
} 
```

我真的很想了解这里发生了什么。理想情况下，我想用传递给函数的值来引用我的对象。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:46:37.457

我只能假设您的变量`some_value`不能包含 value `a`。它可能有额外的空白字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:47:06.637

在 JS 中，当一个属性不存在时，它会返回一个`undefined`. 在以下代码的情况下，如果变量中包含的值`some_value`不作为属性存在`obj`，`t`则未定义

```
//if some_value is neither a nor b
t = obj[some_value] // t === undefined 
```

如果你试图从一个`undefined`值中提取一个属性，浏览器会报错：

```
//if some_value is neither a nor b
t = obj[some_value]["x"] // error 
```

您可以在尝试使用`hasOwnProperty()`.

```
if(obj.hasOwnProperty(somevalue)){
    //exists
} else {
    //does not exist
} 
```

您可以进行“松散检查”，但它不可靠，因为任何“虚假”都会将其称为“不存在”，即使存在价值。

```
if(obj[somevalue]){
    //is truthy
} else {
    //obj[somevalue] either:
    //does not exist
    //an empty string
    //a boolean false
    //null
    //anything "falsy"
} 
```

# ruby-on-rails - ruby on rails 方法上的条件 - ruby on rails 2

> ID：10369030
> 
> 赞同：1
> 
> 时间：2012-04-29T01:41:41.987
> 
> 标签：ruby-on-rails, ruby-on-rails-2

我有一个小问题。在网址上我有这个链接 localhost:3000/reviews/displays/1 在我的方法上我有这个

> @reviews = Review.find(:all, :conditions => { :events_ID => params[:id]})

评论表上有一个名为 events_ID 的字段，我正在存储事件的 id。当我点击一个有评论的事件时，它显示该事件没有任何评论，换句话说@reviews 为空。我在条件上有什么错误吗？

![在此处输入图像描述](../Images/ee51a79016e1de6d5ce9e97dd6fe5006.png)

![在此处输入图像描述](../Images/6e02d059aacf78c9bcd70fe8ec720f3d.png) 谢谢乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T02:43:52.247

理想情况下，您有一个 Event 模型和一个 Review 模型。

```
class Event < ActiveRecord::Base
  has_many :reviews, :foreign_key => :events_ID
end
class Review < ActiveRecord::Base
  belongs_to :event, :foreign_key => :events_ID
end 
```

然后，您无需通过 event_ID 查找评论，而是使用关联：

```
@event = Event.find params[:id]
@reviews = event.reviews 
```

如果这不起作用，那么我们可能需要更多地了解您的架构。

# iphone - iOS 排行榜游戏中心

> ID：10369033
> 
> 赞同：1
> 
> 时间：2012-04-29T01:42:51.553
> 
> 标签：iphone, ios, ipad, monogame

我正在尝试将排行榜与我的 iOS 游戏集成。

我看到 GKScore 课程需要一个类别，但是，我只有一个排行榜。我在任何地方都看不到字段类别。我有一个排行榜 ID、一个排行榜参考名称和一个正在本地化的排行榜名称。如果有的话，我应该使用哪一个？

我正在提交两个帐户的分数，但是，我从未在排行榜上看到任何分数。我正在使用模拟器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:16:23.010

首先，不要使用模拟器。如果可以，请使用设备，因为向游戏中心提交分数等许多功能在模拟器上不起作用。您是否尝试过记录尝试的分数报告返回的错误？这将为您提供有关未来困难的更多详细信息。要回答您的问题，请使用排行榜 ID 作为类别。这是一个示例函数，您可以使用它来提交类别的分数：

在头文件中定义 isGameCenterAvailable bool 并使用以下代码设置其值：

```
Class gameKitLocalPlayerClass = NSClassFromString(@"GKLocalPlayer");        
bool isLocalPlayerAvailable = (gameKitLocalPlayerClass != nil);     

// Test if device is running iOS 4.1 or higher
NSString* reqSysVer = @"4.1";
NSString* currSysVer = [[UIDevice currentDevice] systemVersion];
bool isOSVer41 = ([currSysVer compare:reqSysVer options:NSNumericSearch] != NSOrderedAscending);

isGameCenterAvailable = (isLocalPlayerAvailable && isOSVer41);
NSLog(@"GameCenter available = %@", isGameCenterAvailable ? @"YES" : @"NO"); 
```

使用此方法提交分数：

```
-(void) submitScores:(int64_t)score category:(NSString*)category {

    if (!isGameCenterAvailable){
        return;
    }

    GKScore* gkScore = [[[GKScore alloc] initWithCategory:category] autorelease];
    gkScore.value = score;

    [gkScore reportScoreWithCompletionHandler:^(NSError* error) {
        bool success = (error == nil);
        if(!success){
            NSLog(@"Error Reporting High Score: %@", [[error userInfo] description]);
        }
        [delegate onScoresSubmitted:success];
    }];
} 
```

这段代码是由 Steffen Itterheim 编写的，他写了一本关于 cocos2d 游戏开发的好书。这是它和他的许多其他产品的链接：http: [//www.learn-cocos2d.com/](http://www.learn-cocos2d.com/)

# c - “初始化类型时不兼容的类型”在使用内部联合初始化结构后

> ID：10369034
> 
> 赞同：2
> 
> 时间：2012-04-29T01:43:06.070
> 
> 标签：c, data-structures, types

在实现了[这个线程](https://stackoverflow.com/questions/10273904/appropriate-data-structure-for-a-list-of-items-with-general-and-specific-propert)中建议的数据结构之后，我决定用一些测试值来填充它。

代码是

```
typedef enum {car, gun, bullet} itemtype;

typedef struct bullettype {
    unsigned short velocity;
    unsigned short kinetic_energy;
} Bullet;

typedef struct cartype {
    unsigned short maxspeed;
} Car;

typedef enum {handgun, shotgun, machinegun} weapontype;

typedef struct firearmtype {
    weapontype type;
    char capacity;
} Firearm;

typedef struct gameitem {
    itemtype type;
    char* name;
    unsigned short bulk; 
    unsigned short weight;
    union {
        Car c;
        Bullet b;
        Firearm f;
    };
} Item;

int main() {
    Item *objects = malloc(50 *sizeof(Item));
    objects[0] = (Item) {gun, "a gun", 500, 5000, (Firearm) {handgun, 10}};
    objects[1] = (Item) {car, "a car", 3500, 4000, (Car) {200}};
    objects[2] = (Item) {bullet, "a bullet", 200, 3000, (Bullet) {300, 5000}};
    free(objects);
    return 0;
} 
```

但是当我编译它时，我得到

```
itemlisttest.c:40:2: error: incompatible types when initializing type ‘short unsigned int’ using type ‘Firearm’
itemlisttest.c:42:3: error: incompatible types when initializing type ‘short unsigned int’ using type ‘Bullet’ 
```

这意味着该`car`项目工作正常。它在结构内的联合中首先列出。所以我决定像这样在联盟中交换Car和Bullet

```
union {
    Bullet b;
    Car c;
    Firearm f;
}; 
```

编译器错误现在是

```
itemlisttest.c:40:2: error: incompatible types when initializing type ‘short unsigned int’ using type ‘Firearm’
itemlisttest.c:41:2: error: incompatible types when initializing type ‘short unsigned int’ using type ‘Car’ 
```

这与我初始化结构的方式有关吗？我这样做是因为这将是一个很长的列表，而且 1000`object[a].name = "name"`行看起来一点也不漂亮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:56:33.057

使用 C99 之前的 C，您只能初始化联合的第一个成员。但是，如果您为联合成员提供名称，则从 C99 开始，您可以使用指定初始化程序的 C99 功能：

```
typedef struct gameitem {
    itemtype type;
    char* name;
    unsigned short bulk;
    unsigned short weight;
    union {
        Car c;
        Bullet b;
        Firearm f;
    }u;
} Item;

objects[0] = (Item) {gun, "a gun", 500, 5000, .u.f=(Firearm) {handgun, 10}};
objects[1] = (Item) {car, "a car", 3500, 4000, .u.c=(Car) {200}};
objects[2] = (Item) {bullet, "a bullet", 200, 3000, .u.b=(Bullet) {300, 5000}}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T01:49:27.990

您没有为联合字段提供名称：

```
union {
    Bullet b;
    Car c;
    Firearm f;
} field_name_in_gameitem_struct; 
```

# asp.net-mvc-3 - MVC3 razor 如何处理每个动态创建的按钮集的按钮点击

> ID：10369041
> 
> 赞同：1
> 
> 时间：2012-04-29T01:44:48.377
> 
> 标签：asp.net-mvc-3, razor

在我的 MVC3 razor 视图上，我有一个“GetRecords”按钮。单击此按钮后，它将回发并检索多组记录。根据记录集的数量，它将动态重新生成视图并显示每组记录。它还将针对每组记录生成“保存”和“删除”按钮，以便用户查看每个记录集并可以从这些记录集中“保存”或“删除”数据。

在这里我的问题是如何处理按钮点击。任何建议

```
[Httppost]
 public ActionResult GetRecords(ContentsViewModel vmodel)
        {
         vmodel.GetRecords();

       return view(vmodel);
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T13:15:08.863

我不太确定您要实现什么，但是如果您想处理表单中的多个按钮，那么在视图中您需要为每个按钮命名。例如：

```
@using (Html.BeginForm())
{
    ...
    <input type="submit" value="Get Records" name="getrecords"/>
    <input type="submit" value="Save" name="save"/>
    <input type="submit" value="Delete" name="delete"/>
} 
```

然后您可以使用以下命令在 post 操作中测试这些值：

```
[HttpPost]
public ActionResult AppropriateActionNameHere(ContentsViewModel vmodel)
{
    if (!string.IsNullOrEmpty(Request["getrecords"]))
    {
        vmodel.GetRecords();
    }
    else if(!string.IsNullOrEmpty(Request["save"]))
    {
        //save record processing here
    }
    else if(!string.IsNullOrEmpty(Request["delete"]))
    {
        //delete record processing here
    }
    return View(vmodel); //Or perform the appropriate redirect or whatever you need to perform
} 
```

另一种可能性是在视图上有多个表单，每个表单回发到不同的操作。

# mysql - 如何检查记录是否存在，如果不插入

> ID：10369042
> 
> 赞同：1
> 
> 时间：2012-04-29T01:44:58.223
> 
> 标签：mysql, if-statement, insert, exists

我正在制作一个博客网站，我需要在将标签插入 tblTag 之前检查标签是否存在

这就是我正在尝试的：

```
 $var_sqlTagsCheck = "IF (EXISTS(SELECT * FROM tblTag t WHERE t.tagName = '$var_tagCollectInsert'))
 BEGIN
    INSERT IGNORE INTO tblTag
 SET tagName = '$var_tagCollectInsert'
 END
 ELSE
 BEGIN
 INSERT INTO tblTag (tagId, tagName) VALUES ('', '$var_tagCollectInsert'))
 END
 "; 
```

但是工作不正常，有人可以在这里给我一些帮助吗？我哪里错了，这似乎是相当直接的 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:50:42.637

尝试在*WHERE*子句中使用*EXISTS*谓词：

 *```
 INSERT INTO tblTag (tagId, tagName)
 SELECT '', '$var_tagCollectInsert'
 WHERE NOT EXISTS(SELECT * FROM tblTag t
                  WHERE t.tagName = '$var_tagCollectInsert')); 
```

MySQL 的*INSERT INTO*的一般形式是：

```
INSERT [LOW_PRIORITY | HIGH_PRIORITY] [IGNORE]
    [INTO] tbl_name [(col_name,...)]
    SELECT ...
    [ ON DUPLICATE KEY UPDATE
      col_name=expr
        [, col_name=expr] ... ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T01:50:45.303

tagId 是主键吗？如果是，则无需向其插入 '' 或空值。如果不尝试将其设置为主键并启用其自动增量，那么您只需要提供 tagName 我很确定它确实是直截了当的。因此，您应该只检查所有插入项是否具有值或可用于插入查询。*

# wpf - 为什么这段代码不在 WPF 中创建 10 行代码？

> ID：10369043
> 
> 赞同：0
> 
> 时间：2012-04-29T01:45:03.493
> 
> 标签：wpf, shape

我是 WPF 的初学者，我将下面的代码放在按钮单击处理程序中，我希望单击按钮后会有 10 条垂直线，但只有一条，有什么想法吗？谢谢！而“spDrawPanel”是一个堆栈面板。

```
 double aw = this.spDrawPanel.ActualWidth;
        double ah = this.spDrawPanel.ActualHeight;
        for (int i = 1; i <= 10; i++)
        {
            Line ln = new Line();
            ln.Stroke = Brushes.Black;
            ln.X1 = aw / 10 * i;
            ln.Y1 = ah;
            ln.X2 = aw / 10 * i;
            ln.Y2 = ah - 15;
            ln.StrokeThickness = 1;
            this.spDrawPanel.Children.Add(ln);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:53:52.147

问题是您使用的`StackPanel`是默认情况下将每条线[垂直](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.orientation.aspx)堆叠在一起，并且您从**底部**开始，`StackPanel`因此您的房地产已经用完。尝试将 Y1 设置为 15 并将 Y2 设置为 0，您将获得 10 行。

# ios - 来自 UIWebview 的 PDF 发送到“打开方式...”菜单中的应用程序

> ID：10369053
> 
> 赞同：0
> 
> 时间：2012-04-29T01:47:27.350
> 
> 标签：ios

是否可以使用按钮将 UIWebview 中显示的文件发送到另一个应用程序以显示“打开方式...”菜单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:08:06.417

需要有文件的本地副本才能使用`UIDocumentInteractionController`显示“打开方式”菜单的方法，该菜单列出了注册该文件类型的任何应用程序。因此，您可以下载文件，使用本地显示文件，`UIWebView`然后准备好`UIDocumentInteractionController`查看其文档以获取更多信息[Apple Docs](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIDocumentInteractionController_class/Reference/Reference.html)

# ruby - 如何访问 sinatra 中的哈希数据？

> ID：10369055
> 
> 赞同：1
> 
> 时间：2012-04-29T01:47:58.047
> 
> 标签：ruby, sinatra

我正在尝试访问 sinatra 中的哈希数据：

```
require 'rubygems'
require 'sinatra'

class List 
   def self.items
   return items = {

   :something1 =>  { :attribute1 => "somestring1", :attribute2 => "somestring2" },
   :something2 =>  { :attribute1 => "somestring3", :attribute2 => "somestring4" }

   }
   end
end

list = List.items

get '/' do
   list.each do |name, meta|
      "#{name}<br>#{meta[:attribute1]}<br>#{meta[:attribute2]}<br><br>"
   end
end 
```

我希望 sinatra 打印每个散列的散列数据。但是，它只打印了哈希值（可能是因为我调用了`list.each`）。当我使用`puts`.

为了澄清，期望的结果是：

```
something1
somestring1
somestring2

something2
somestring3
somestring4 
```

如何让 sinatra 只打印变量？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:54:25.487

试试这个：

```
get '/' do
   s = ''
   list.each do |name, meta|
      s << "#{name}<br>#{meta[:attribute1]}<br>#{meta[:attribute2]}<br><br>"
   end
   return s
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T01:56:55.533

使用`map`而不是`each`，然后加入结果以返回一个字符串：

```
get '/' do
  list.map do |name, meta|
    "#{name}<br>#{meta[:attribute1]}<br>#{meta[:attribute2]}<br><br>"
  end.join
end 
```

`each`返回您调用它的数组。[`map`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-map)将返回一个新数组，根据您的块转换 Enumerable 中的每个条目。

# emgucv - Emgu SetCaptureProperty CV_CAP_PROP_POS_FRAMES 无法按预期工作

> ID：10369056
> 
> 赞同：1
> 
> 时间：2012-04-29T01:48:38.677
> 
> 标签：emgucv

```
 m_capture.SetCaptureProperty(CAP_PROP.CV_CAP_PROP_POS_FRAMES, frameID);
        double cap = m_capture.GetCaptureProperty(CAP_PROP.CV_CAP_PROP_POS_FRAMES); 
```

我正在使用 Emgu 2.3 (x64) 并且上面设置的捕获属性很奇怪。例如在上面我设置 frameID = 500 并检查捕获属性，它设置为返回值 3325。

有什么我做错了吗？

# javascript - 用 JavaScript 合成音乐

> ID：10369058
> 
> 赞同：4
> 
> 时间：2012-04-29T01:49:19.747
> 
> 标签：javascript, audio

是否可以在 JavaScript 中合成（不仅仅是播放 *.wav / *.mp3）文件？即编写javascript代码，（1）产生一些PCM波形和（2）管道它到扬声器？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T01:55:01.140

我想你可以。事实上，提交给 JS1k 竞赛的一个是[JavaScript 语音合成器](http://www.p01.org/releases/JS1K_Speech_Synthesizer/JS1K_Speech_Synthesizer.htm)。我认为这几乎证明了音乐也是可能的（尽管我不会在这里定义*音乐*）。可以在此处找到项目的细目：[http](http://www.p01.org/releases/JS1K_Speech_Synthesizer/) ://www.p01.org/releases/JS1K_Speech_Synthesizer/ 。

您可能还会对 riffwave.js 感兴趣：[http](http://codebase.es/riffwave/) ://codebase.es/riffwave/ 。它在演示页面上有一些非常令人印象深刻的例子。

Jasmid 是一个 MIDI 文件合成器，它已被证明可以创建一些可怕的复古 MIDI 文件，这些文件将我们带回到 Geocities 和`bgsound`. 您可以在 Github 上的[https://github.com/gasman/jasmid查看它，并在](https://github.com/gasman/jasmid)[http://jsspeccy.zxdemo.org/jasmid/](http://jsspeccy.zxdemo.org/jasmid/)听到几个演示 。

# asp.net-mvc - 验证消息

> ID：10369060
> 
> 赞同：0
> 
> 时间：2012-04-29T01:49:27.677
> 
> 标签：asp.net-mvc

这是我的表格：

```
<% using (Html.BeginForm("RepR", "Agence", FormMethod.Post, new { @class = "search_form" })) { %>
            <%: Html.ValidationSummary(true) %>
            <%: Html.Hidden("to", Model.mailc) %>
           <p>
            Sujet : <br />
            <%: Html.TextBox("sub")%> 

            <br />
             Message : <br />
            <%: Html.TextArea("msg")%> 

           </p>
            <input type="submit" value="Envoyer" class="button"/>
            <% } %> 
```

它工作得很好，但我想添加一些验证消息（我不能使用模型，因为这个表单在我使用另一个模型的页面上）。我已经尝试过这种方法但不起作用

```
<%: Html.ValidationMessage("sub","Requiered field") %> 
```

关于我应该使用什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:40:20.063

您可以使用局部视图和强类型模型。然后在主视图中调用这个局部视图。这是一个简单而高效的

其他解决方案是添加 ModelState.AddModelError("Field Name", "Error Message") 但这仅适用于服务器端。

如果你想要客户端验证，你可以使用 JQuery.valid 方法

# algorithm - 算法的时间复杂度

> ID：10369061
> 
> 赞同：1
> 
> 时间：2012-04-29T01:49:34.130
> 
> 标签：algorithm, big-o, time-complexity, hashset

在计算以下算法的时间复杂度时，我的解释是否正确？

*   一个 HashSet，moduleMarksheetFiles，用于添加包含指定 moduleName 的文件。

    ```
    for (File file: marksheetFiles){
         while(csvReader.readRecord()){
             String moduleName = csvReader.get(ModuleName);

             if (moduleName.equals(module)){
                   moduleMarksheetFiles.add(file);
             }
         }
     } 
    ```

*   设 m 为文件数

*   设 k 为每个文件的平均记录数。
*   因为每个文件只添加一次，因为 HashSet 不允许重复。HashSet.add() 平均为 O(1)，最坏情况为 O(n)。
*   搜索具有指定 moduleName 的记录涉及将文件中的每条记录与 moduleName 进行比较，需要 O(n) 步。

因此，平均时间复杂度为：O((m*k)^2)。

这个对吗？

另外，您将如何计算最坏的情况？

谢谢。

PS。这不是功课，只是分析我系统的算法来评估性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T12:11:38.013

不，它不是平方的，这是 O(nk)。（从技术上讲，这意味着它*也是*O((nk)²)，但我们不在乎。）

您的误解是 HashSet 的最坏情况性能在这里很重要。然而，即使一个哈希表可能有最坏情况的 O(n) 插入时间（如果它需要重新哈希每个元素），它的[*分摊*](http://en.wikipedia.org/wiki/Amortized_analysis)插入时间是 O(1) （假设你的哈希函数表现良好；`File.GetHashCode`大概是）。换句话说，如果你插入多个东西，那么其中很多都是 O(1)，以至于偶尔的 O(n) 插入无关紧要。

因此，我们可以将插入视为恒定时间操作，因此性能完全取决于通过内部循环体的迭代次数，即 O(nk)。

# json - WCF 无法反序列化 JSON 请求

> ID：10369064
> 
> 赞同：5
> 
> 时间：2012-04-29T01:49:39.817
> 
> 标签：json, wcf

我正在尝试编写一个 WCF 服务来响应 ajax 请求，但是当它尝试反序列化时我遇到了一个奇怪的错误。

这是jQuery：

```
$.ajax({
    type: 'POST', 
    url: 'http://localhost:4385/Service.svc/MyMethod',
    dataType: 'json',
    contentType: 'application/json',
    data: JSON.stringify({folder:"test", name:"test"})
}); 
```

这是 WCF 服务定义：

```
[OperationContract]
[WebInvoke(UriTemplate = "/MyMethod", 
    Method = "*", //Need to accept POST and OPTIONS
    BodyStyle = WebMessageBodyStyle.WrappedRequest, 
    RequestFormat = WebMessageFormat.Json, 
    ResponseFormat = WebMessageFormat.Json)]
string[] MyMethod(string folder, string name); 
```

我得到一个`SerializationException`说法：“OperationFormatter 无法反序列化 Message 中的任何信息，因为 Message 是空的 (IsEmpty = true)。”

它发生在`System.ServiceModel.Dispatcher.PrimitiveOperationFormatter.DeserializeRequest`指令的方法中`00000108 mov dword ptr [ebp-18h],0`

我看不出我做错了什么，但它拒绝为我工作。整天都在和这个争吵。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:20:40.987

明白了——答案就在我代码中唯一的注释中。我需要同时接受 POST 和 OPTIONS（对于 CORS）。OPTIONS 请求首先出现，当然 OPTIONS 请求没有附加任何数据。 *这*就是导致解析异常的原因；而 POST 甚至从未发生过。

解决方法：将 POST 和 OPTIONS 分成两个单独的方法，使用相同的 UriTemplate，但使用不同的 C# 名称（WCF 需要这样做）。

```
[OperationContract]
[WebInvoke(UriTemplate = "/MyMethod",
    Method = "POST",
    BodyStyle = WebMessageBodyStyle.WrappedRequest,
    RequestFormat = WebMessageFormat.Json,
    ResponseFormat = WebMessageFormat.Json)]
string[] MyMethod(string folder, string name);

[OperationContract]
[WebInvoke(UriTemplate = "/MyMethod", Method = "OPTIONS")]
void MyMethodAllowCors(); 
```

这实际上稍微清理了代码，因为您不必在所有函数中乱扔垃圾

```
if (WebOperationContext.Current.IncomingRequest.Method == "OPTIONS") {
    WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Origin", "*");
    WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Methods", "OPTIONS, POST");
    WebOperationContext.Current.OutgoingResponse.Headers.Add("Access-Control-Allow-Headers", "Content-Type, User-Agent");
    return new string[0];
} else if (WebOperationContext.Current.IncomingRequest.Method == "POST") { ... } 
```

# cakephp - 用于不同操作的 JS 帮助程序链接

> ID：10369065
> 
> 赞同：0
> 
> 时间：2012-04-29T01:49:42.360
> 
> 标签：cakephp, cakephp-2.0

我正在使用这个

```
 echo $this->Js->submit("Send", array(
                'before'=>$this->Js->get('#sending')->effect('fadeIn'),
                'success'=>$this->Js->get('#sending')->effect('fadeOut'),
                'update'=>'#success'                            
                    )); 
```

这是在 index.ctp 中，并且 onclick 它转到控制器中的索引操作。但我希望它采取不同的行动。我是怎么做到的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:05:52.633

搞定了

需要一个 url 数组来执行不同的操作

```
 echo $this->Js->submit("Send", array(
'before'=>$this->Js->get('#sending')->effect('fadeIn'),
'success'=>$this->Js->get('#sending')->effect('fadeOut'),
'update'=>'#success',
'url' => array(
     'action' => 'pp'
         ),                     
)); 
```

# java - Java 错误中的交集和并集

> ID：10369068
> 
> 赞同：-4
> 
> 时间：2012-04-29T01:50:13.240
> 
> 标签：java, arrays, union, intersection

我是 Java 新手，我被要求做交集和联合。我有这个代码，我不知道问题是什么。

我的代码在没有扫描仪输入的情况下工作 = new Scanner(System.in);

```
import java.util.*;    
import java.util.ArrayList;

public class Arrays{
    Scanner input=new Scanner(System.in);

    private static int[] array_one = new int[5];
    for(i=0;i<5;i++){
        array_one[i]=input.nextInt();
    }
    private static int[] array_two = new int[5];
    for(i=0;i<5;i++){
        array_two[i]=input.nextInt();
    }

    public static void main(String main[]){
        System.out.println("First Array");
        System.out.println(Arrays.toString(array_one));
        System.out.println("Second Array");
        System.out.println(Arrays.toString(array_two));

        int[] union = getUnion(array_one, array_two);

        System.out.println("--- Union of sets ---");

        for(int i=0; i<union.length; i++){    
            System.out.print(union[i] + " ");
        }    
        System.out.println("");    
        Integer[] intersection = getIntersection(array_one, array_two);    
        System.out.println("--- Intersection of sets ---");    
        for(int i=0; i<intersection.length; i++) {    
            System.out.print(intersection[i] + " ");    
        }    
        System.out.println("");    
        System.out.println("\nIs The Two Array Equal?");
        boolean check = Arrays.equals(array_one, array_two);
        if(check == false)
        System.out.println("= Arrays Are Not Equal");
        else
        System.out.println("= Arrays Are Equal");
    }        

    private static int[] getUnion(int[] a_one, int[] a_two){

        int i=0, j=0;    
        int value = -1;    
        int MAX_ELEM = 0;    
        int[] a_return = new int[a_one.length + a_two.length -1];

        try{    
            while(i<a_one.length || j<a_two.length){    
                if(a_one[i] < a_two[j]){
                    value = a_one[i];    
                    i++;    
                }else{    
                  value = a_two[j];    
                    j++;    
                }    
                if(!found(a_return, value, 0, MAX_ELEM)){    
                    a_return[MAX_ELEM++] = value;    
                }    
            }    
        } catch (IndexOutOfBoundsException ex){    
            if(i == a_one.length){    
                for(int k=j; k<a_two.length; k++){    
                    if(!found(a_return, a_two[k], 0, MAX_ELEM)){    
                        a_return[MAX_ELEM++] = a_two[k];    
                    }    
                }    
            } else {    
                for(int l=i; l<a_one.length; l++){

                    if(!found(a_return, a_one[l], 0, MAX_ELEM)){    
                        a_return[MAX_ELEM++] = a_one[l];    
                    }    
              }    
            }    
        }    
        return a_return;    
    }

    private static Integer[] getIntersection(int[] a_one, int[] a_two){    
        ArrayList<Integer> a_list = new ArrayList<Integer>();    
        int i=0, j=0;    
        while(i < a_one.length && j< a_two.length){    
            if(a_one[i] == a_two[j]){
                    a_list.add(a_one[i]);    
                i++;    
                j++;    
            }else if(a_one[i] < a_two[j]){    
                i++;    
            }else if(a_one[i] > a_two[j]){    
                j++;    
            }    
        }    
        Integer[] a_return = new Integer[a_list.size()];    
        a_list.toArray(a_return);    
        return a_return;    
    }

    /* -------- linear search --------- */    
    private static boolean found1(int[] array, int value,int start, int end){    
       for(int i=0; i<array.length; i++){    
            if( array[i] == value){    
                return true;    
            }    
        }    
        return false;    
    }

    /* ---------- binary search ------------- */
    private static boolean found(int[] array, int value, int start, int end){    
        if(end < 0 || start < 0){    
            return false;    
        }    
        if(array[start] == value || array[end] == value){    
            return true;
        }
        if(end-start == 1){    
            if(array[end] == value){    
                return true;    
            }    
            if(array[start] == value){    
                return true;    
            }    
        }else{    
            int mid = (start + end)/2;    
            if(array[mid] == value){    
                return true;    
            }else if(array[mid] < value){    
                return found1(array, value, mid+1, end);    
            }else if(array[mid] > value){    
               return found1(array, value, start, mid-1);    
            }    
        }    
       return false;    
    }    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:31:30.790

如果您可以使用[Java Collections](http://docs.oracle.com/javase/tutorial/collections/interfaces/set.html)，我曾在我的一项作业中使用它。

```
public static Set<Integer> union(Set<Integer> a, Set<Integer> b) {
    Set<Integer> union = new HashSet<>();
    union.addAll(a);
    union.addAll(b);
    return union;
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:25:54.203

你应该有这个代码

```
private static int[] array_one = new int[5];
for(i=0;i<5;i++){
    array_one[i]=input.nextInt();
}
private static int[] array_two = new int[5];
for(i=0;i<5;i++){
    array_two[i]=input.nextInt();
}

private static int[] array_one = new int[5];
for(i=0;i<5;i++){
    array_one[i]=input.nextInt();
}
private static int[] array_two = new int[5];
for(i=0;i<5;i++){
    array_two[i]=input.nextInt();
} 
```

在 main() 或任何方法或[静态块](http://www.jusfortechies.com/java/core-java/static-blocks.php)内。

[此](https://stackoverflow.com/questions/3590677/how-to-union-intersect-difference-and-reverse-data-in-java)链接可能会有所帮助。

# linear-algebra - 如何找到两个超平面相交的平面？

> ID：10369075
> 
> 赞同：2
> 
> 时间：2012-04-29T01:52:38.143
> 
> 标签：linear-algebra, intersection, plane

在找到两个平面相交的线的情况下，您需要取两个平面法线的叉积。这个叉积只是取矩阵的行列式：

```
i  j  k
x1 y1 z1
x2 y2 z2 
```

其中 (x, y, z) 是每个平面的法线向量。结果是一个平行于相交线的向量。从那里你需要找到一个位于两个平面上的点。这两个部分结合起来为您提供了一条完全定义的线。

如何将其扩展到与平面相交的超平面？我假设我需要采用类似矩阵的行列式，但我想到的矩阵：

```
h  i  j  k
w1 x1 y1 z1
w2 x2 y2 z2 
```

不是方阵。另外，我不知道如何找到位于两个超平面上的点。

谁能向我解释如何找到超平面的相交平面？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:17:39.007

您不必为此计算行列式，只需执行简单的变量替换即可获得相交平面。例如，如果您有两个超平面：

```
3x + 4y + 2z - 7w = 10
2x - 3y + 2z + 1w = 2 
```

然后您可以隔离`w`（或任何其他变量）：

```
w = 2 - 2x + 3y - 2z 
```

并在第一个等式中替换它：

```
3x + 4y + 2z - 7(2 - 2x + 3y - 2z) = 10 
```

结果是：

```
17x - 17y + 16z - 14 = 10 
```

现在你有了你的交叉平面。只是简单的数学。

完整的 4D 平面表示基于两个方程，首先您找到`(x, y, z)`求解的值，`17x - 17y + 16z - 14 = 10`然后`w`使用`w = 2 - 2x + 3y - 2z`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-15T21:38:20.390

简单变量替换的答案是不正确的。3x + 4y + 2z - 7(2 - 2x + 3y - 2z) = 10 本身就是四维空间中的一个三维超平面，并不代表四维空间中两个给定的三维超平面的交点. 方程少一个变量这一事实并不会降低对象的维度。

打个比方：y=7 仍然是 2d 中的一维线，就像 y=x+7 一样。而 z+y=5 仍然是 3d 中的 2d 平面，就像 x+y+z=5 一样。

变量替换在 3D 中不起作用，我们按照概述进行叉积，它在 4D 中不起作用。在 4D 中表示一个 2D 对象需要 2 个方程（两个 3D 超平面的交点是一个 2D 对象。）为了类比，告诉我在 2D 中映射为一个点的单个“方程”。y=5x+2 是一条线，y=x 是一条线，x=6 是一条线，y=0 是一条线。如果我们在 4D 中，即使是简单的方程 y=1 也是一个 3D 超平面。删除变量不是获得 2D 中 0D 点、3D 中 1D 线或 4D 中 2D 两 3D 超平面的 2D 交叉等式的方法。所有这些都需要两个同时为真的方程来定义它们。不能只替换变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T13:49:44.947

您需要设置一个与超平面相对应的矩阵系统 (Ax=b)，然后查看解决方案的秩。这将说明它是否有解决方案，如果有，是否是点/线/平面/等。

我有一个问题：“R^4 中有 n 个 3-dim 超车道，它们之间的交点是一个平面，对于所有正整数 n，是否真的如此？”

# c# - 组合多个 if 语句

> ID：10369076
> 
> 赞同：0
> 
> 时间：2012-04-29T01:53:22.273
> 
> 标签：c#, if-statement, visibility, multiple-instances

我有以下一段代码，用于在执行测试类型 2 时将一系列标签设置为不可见

```
 if ((int)testType == 2)
            indmetaL.Visible = false;
        if ((int)testType == 2)
            midmetaL.Visible = false;
        if ((int)testType == 2)
            rinmetaL.Visible = false;
        if ((int)testType == 2)
            litmetaL.Visible = false; 
```

我尝试过像这样构建这些语句：

```
 if ((int)testType == 2)
       indmetaL.Visible = false;
       midmetaL.Visible = false;
       rinmetaL.Visible = false
       litmetaL.Visible = false; 
```

但是当我做 midmetaL 时，rinmetaL 和 litmetaL 在 testtype 1 期间保持不可见

我确信有一种方法可以在一行中将所有这些“可见”属性设置为 false，但是我不确定语法，感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T01:56:14.507

```
if ((int)testType == 2)
{
       indmetaL.Visible = false;
       midmetaL.Visible = false;
       rinmetaL.Visible = false
       litmetaL.Visible = false;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T02:01:27.150

使用花括号创建代码块：

```
if ((int)testType == 2)
{
   indmetaL.Visible = false;
   midmetaL.Visible = false;
   rinmetaL.Visible = false
   litmetaL.Visible = false;
} 
```

或使用链分配：

```
if ((int)testType == 2)
   indmetaL.Visible = midmetaL.Visible = rinmetaL.Visible = litmetaL.Visible = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T01:56:38.957

您应该使用花括号为 定义一个[语句块](http://msdn.microsoft.com/en-us/library/ms173143.aspx)，`if`否则只有第一行属于它。所以这有效：

```
if ((int)testType == 2)
{
    indmetaL.Visible = false;
    midmetaL.Visible = false;
    rinmetaL.Visible = false
    litmetaL.Visible = false;
} 
```

[为什么省略花括号被认为是一种不好的做法？](https://stackoverflow.com/questions/359732/why-is-it-considered-a-bad-practice-to-omit-curly-braces)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T01:57:06.207

使用花括号将多个语句组合成一个块；

```
if ((int) testType == 2)
{
    indmetaL.Visible = false;
    midmetaL.Visible = false;
    rinmetaL.Visible = false;
    litmetaL.Visible = false;
} 
```

在 C# 中，`if`语句有条件地仅执行紧随其后的语句或块。因此，您需要花括号。其他流控制语句通常也是如此，例如`for`,`while`等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T02:30:45.717

使用 Switch 语句。它们比 if 语句更快，因为它们直接跳转到正确的大小写。

```
switch((int)testType)
{
    case 2:
        indmetaL.Visible = false;
        midmetaL.Visible = false;
        rinmetaL.Visible = false;
        litmetaL.Visible = false;
    break;
} 
```

或者如果你想要 if 语句，你可以将它写在一行中，而不需要像这样的花括号

```
if((int)testType==2)
    indmetaL.Visible = midmetaL.Visible = rinmetaL.Visible = litmetaL.Visible = false; 
```

# matlab - 如何将多个单元格写入文本文件

> ID：10369077
> 
> 赞同：1
> 
> 时间：2012-04-29T01:53:29.207
> 
> 标签：matlab

我编写了一个代码来从钻孔数据中提取岩性深度信息。

每个岩性有两个深度：顶部深度和底部深度。它们看起来像这样：

```
Sandstone '830.212' '828.222'
Siltstone '832.612' '830.922' 
```

每种类型的岩性都有不同尺寸的单元。

```
sandstone 12*2 cell
coal 1*2 cell
mudstone 14*2 cell etc. 
```

如何将这些信息写入文本文件？

似乎我可以使用 dmwrite，但我在形成数据矩阵时遇到了问题，因为每种类型的岩石都有两个深度。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:33:48.553

对于字符串元胞数组，我使用以下简单函数，该函数`C:\Users\NAME\Documents\MATLAB\@cell`位于您平台上的或等效的用户路径 ( `~/Documents/MATLAB/@cell`) 中。该`@cell`名称告知 MATLAB，其中的函数`@cell`只能用于元胞数组。

```
function csvwrite(fileName,cellArray)

fid = fopen(fileName,'w');
for i=1:size(cellArray,1)
    fprintf(fid,'%s,',cellArray{i,1:end-1});
    fprintf(fid,'%s\n',cellArray{i,end});
end
fclose(fid); 
```

`fprintf`如果您需要传统的 Windows/DOS 行结尾，请在第二次调用中将“\n”替换为“\n\r” 。如果您需要制表符，您也可以在第一次调用中将“,”替换为“\t”。

对于数值数组，您可以使用`csvwrite`MATLAB 附带的函数。

如果您必须使用具有混合数据类型的元胞数组，则必须修改函数以接受格式说明符的数组。

```
function csvwrite(fileName,cellArray,spec)

fid = fopen(fileName,'w');
for i=1:size(cellArray,1)
    fprintf([spec '\n'],cellArray{i,1:end});
end
fclose(fid); 
```

对于具有类似于以下行的数组：例如，`{ 1 3 5 'string1' string2' }`您将使用`spec = '%d,%d,%s,%s'`。

基于这些示例，您可以编写一个更复杂的函数来测试每个单元格中的数据类型并构造一个格式字符串以匹配，以防您将有完全未知的数组内容。

# google-drive-api - Google Drive 可以将文件从 Docs 传输到 Picasa 吗？

> ID：10369079
> 
> 赞同：7
> 
> 时间：2012-04-29T01:54:01.107
> 
> 标签：google-drive-api, picasa, google-picker

我知道您可以使用 Google Picker 打开网络相册，但您可以直接从云端硬盘转移到 Picasa 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T13:53:57.120

目前，我们无法在不下载文件并重新上传的情况下直接将数据传输到 Picasa 或从 Picasa 传输数据。

要下载并重新上传文件，请先[从 Drive API 下载](https://developers.google.com/drive/v1/reference/files/get)，然后使用[Picasa 网络相册数据 API](https://developers.google.com/picasa-web/docs/2.0/developers_guide)[将其上传到 Picasa](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#PostPhotos)。

# css - 将div的内容对齐到底部

> ID：10369081
> 
> 赞同：7
> 
> 时间：2012-04-29T01:54:46.177
> 
> 标签：css, html, positioning, alignment

我有一个包含 2 个段落的 div。我希望段落与 div 的右下角对齐。我能够使用 对齐参数`text-align: right`，但我正在努力让参数与 div 的底部对齐。

标记非常简单：

```
<div>
   <p>content 1</p>
   <p>content 2</p>
</div> 
```

CSS：

```
div{
    border: 1px red solid;
    height: 100px;
}

p{
    text-align: right;
} 
```

我尝试`position:absolute`在 paragrams 和 setting 上使用`bottom: 0`，但这使得段落由于绝对定位而相互重叠。

div 不跨越整个页面，因此段落文本应限制在 div 内。

有没有办法实现内容“自下而上”的效果？

我想要的效果是这样的（photoshopped）： ![在此处输入图像描述](../Images/a8e85daea64bca61277328d20e93db13.png)

上面的小提琴：http: [//jsfiddle.net/cbY6h/](http://jsfiddle.net/cbY6h/)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-29T02:12:41.307

HTML

```
<div class="box">
   <div class="content">
       <p>content 1</p>
       <p>content 2</p>
   </div>
</div>​​​​​​​​​​​​​​​​​​​​​ 
```

CSS

```
.box {
    border: 1px red solid;
    height: 100px;
    position: relative;
}

.content {
    position: absolute;
    bottom: 0;
    right: 0;
} 
```

将内容放置在 div 的右下角。[你可以在http://jsfiddle.net/cbY6h/1/](http://jsfiddle.net/cbY6h/1/)看到结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-12T19:59:50.080

我一直在寻找类似的东西，最终使用了 flexbox 布局。

给定以下结构

```
<div>
   <p>content 1</p>
    <p>another</p>
   <p>content 2</p>
</div> 
```

和这种风格

```
div {
    border: 1px red solid;
    height: 100px;

    display: flex;

    //align items from top to bottom 
    //[I've always thought the opposite, as rows are counted from top to bottom 
    //and columns are counted left to right. Any one have an explanation for this?]
    flex-direction: column;   

    //main axis align to the bottom, since we are using column for direction
    justify-content: flex-end; 

}

p { 
   //cross axis align towards the right. total outcome => bottom right
   align-self: flex-end; 
} 
```

您将从图片中获得布局。

编辑：不适用于旧版浏览器（[http://caniuse.com/flexbox](http://caniuse.com/flexbox)）。您可以使用 Modernizer 的钥匙

```
.flexbox .rest-of-your-selector { rule } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-21T06:12:39.437

要理解的关键说明。如果您要将“框”的高度更改为 100% 而不是 100px，那么它将不起作用。如果未将高度指定为特定的测量单位，则无法确定如何放置绝对子项。

```
.box {
border: 1px red solid;
height: 100%;
position: relative;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-18T00:00:25.543

.content 的位置使用相对而不是绝对。

# php - 如何在同一台机器上运行 ASP.NET 和 PHP？

> ID：10369082
> 
> 赞同：1
> 
> 时间：2012-04-29T01:54:57.627
> 
> 标签：php, asp.net, localhost

我已经在 PC 上运行了 asp.net，现在我已经在我的机器上安装了 PHP (xampp)，但它似乎无法正常工作。

有什么方法可以在我的机器上停止 ASP.NET 服务器（它有特殊名称吗？）？我现在有windows xp。

谢谢你。

* * *

编辑：谢谢大家。我收到 object not found 错误，但那是因为我将 php 文件放在 wwwroot 文件夹而不是 htdocs 中（使用 xampp 时必须将 php 文件放在这里）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:00:50.507

您应该为 IIS 安装 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T06:34:49.007

将 Web 服务器与运行您的代码的服务器分开一分钟。您安装的不是 PHP，而是一个包含 Apache（Web 服务器）、PHP（运行您的 PHP 代码）和 MySQL（数据库服务器）的完整软件包。

在 Windows 上，用于提供网页服务的常用服务器是 IIS。您可以同时将 ASP.NET 和 PHP 与 IIS 一起使用。虽然有[一些技巧可以让 ASP.NET 在 Apache 下工作](http://weblogs.asp.net/israelio/archive/2005/09/11/424852.aspx)，但我不推荐它，因为它可能会让你在试图让它工作时比它的价值更头疼。

这意味着您需要使用 IIS 作为您的 Web 服务器。此时您需要做的就是安装 PHP 并配置 IIS 以将其用作处理`.php`文件的 CGI 应用程序。

说明在这里： http: [//php.net/manual/en/install.windows.php](http://php.net/manual/en/install.windows.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T02:07:51.140

它称为 Internet 信息服务 (IIS)，您可以使用 IIS 管理器停止该服务，或者您可以通过转到添加或删除程序然后添加/删除 Windows 组件来完全删除 IIS。

但是，我发现为 IIS 安装 PHP 比使用 XAMPP 更容易。微软的[Web 平台安装程序](http://www.microsoft.com/web/downloads/platform.aspx)让它变得非常简单（虽然我不确定它是否适用于旧版本的 IIS）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T06:20:19.623

我发现这很有帮助：[http ://www.sitepoint.com/run-apache-iis-same-pc-2/](http://www.sitepoint.com/run-apache-iis-same-pc-2/)

# javascript - 数组 .each() 循环返回字符串而不是 jQuery 中的值

> ID：10369085
> 
> 赞同：3
> 
> 时间：2012-04-29T01:55:14.917
> 
> 标签：javascript, jquery, coffeescript

对不起，这可能是一个简单的，但它让我难住了。我试图遍历这个数组并注销每个值，但脚本正在注销一个字符串对象。

```
propertiesToSanitize = ["title", "description", "place_name"]
$.each propertiesToSanitize, ->
  console.log this 
```

转换为 jQuery 为

```
var propertiesToSanitize;
propertiesToSanitize = ["title", "description", "place_name"];
$.each(propertiesToSanitize, function() {
  return console.log(this);
}); 
```

正在返回：

```
String
  0: "t"
  1: "i"
  2: "t"
  3: "l"
  4: "e"
  length: 5 
```

知道为什么它返回这个而不是“标题”或任何其他值吗？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T01:56:09.783

每次迭代的索引和值作为回调中的参数提供。

```
$.each(propertiesToSanitize, function(index,value) {
    console.log(index + ':' + value);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T02:08:33.203

原因是因为`this`在 JavaScript 中非常复杂。回调中的`this`变量通常会引用您不应该依赖的范围堆栈深处的内容。使用[jQuery`each`](http://api.jquery.com/jQuery.each/)，“即使它是简单的字符串或数字值，Javascript 也会始终将`this`值包装为`Object`”，这就是您所看到的。

jQuery`each`将值作为第二个参数传递给您的回调。在你的 JavaScript 中，你可能想要这样：

```
$.each(propertiesToSanitize, function(idx, val) {
  return console.log(idx + ":" + val);
}); 
```

但也请注意，CoffeeScript 非常有能力在没有 jQuery 帮助的情况下循环遍历数组：

```
for propName in propertiesToSanitize
  console.log propName 
```

# nsbundle - URLForResource 在 Debug 中工作但不是在 Release 中工作？

> ID：10369091
> 
> 赞同：1
> 
> 时间：2012-04-29T01:56:33.740
> 
> 标签：nsbundle

遇到一个让我目瞪口呆的奇怪问题。我使用 URLForResource，在主包上调用它以获取捆绑在应用程序中的文件。这只是标准：

NSURL* fileURL = [[NSBundle mainBundle]URLForResource:@"myfile" withExtension:@"myext"];

我已经用了一百万次了……

问题是 - 在这个应用程序中，它可以在 Debug 中运行，但是如果我构建 Release 它返回 nil ？！这很奇怪，文件在那里，我可以在包中看到它，我不知道为什么它会这样。对于捆绑中的任何文件而不是特定文件也是如此。

有谁知道发生了什么或以前遇到过这种奇怪的行为？我在 Xcode 4.3.2 顺便说一句..

谢谢

# java - 使用 JGraphMenu 的菜单项的 ActionListener

> ID：10369098
> 
> 赞同：0
> 
> 时间：2012-04-29T01:57:42.307
> 
> 标签：java, swing, actionlistener

如何为列表中的每个按钮执行 ActionListener？我正在使用`JGraphMenu`并希望为每个项目显示警报。

这是我的代码：

```
public static void main(String[] args){
JFrame f = new JFrame();
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
List<String> MenuItem = new ArrayList<String>();
MenuItem.add("Choose The XML File");
MenuItem.add("Generate the tree");
MenuItem.add("Generate the latex code");
MenuItem.add("Generate automata");
List<ActionListener> listeners = new ArrayList<ActionListener();
for(int i=0; i<4; i++){
listeners.add(null);
}

JGraphMenu menu = new JGraphMenu(
ConstantesStyles.NOIR,
JGraphMenu.VERTICAL, 
MenuItem, listeners
);

JPanel panel = new JPanel();
panel.add(menu);
panel.setSize(50, 100);
f.add(panel, BorderLayout.WEST);
f.setSize(500, 400);
f.setLocationRelativeTo(null);
        f.setVisible(true);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:00:59.637

不要将`null`s 添加到`ActionListener`的列表中，而是添加侦听器（在我的示例中，相同的侦听器，但您明白了）：

```
List<ActionListener> listeners = new ArrayList<ActionListener()>;
ActionListener listener = new ActionListener() {
    @Override void actionPerformed(ActionEvent e) {
        // do something
    }
};
for(int i=0; i<4; i++){
    listeners.add(listener);
} 
```

# javascript - 在自执行函数中定义对象的原型

> ID：10369101
> 
> 赞同：1
> 
> 时间：2012-04-29T01:58:43.353
> 
> 标签：javascript, object, scope, prototype

我正在构建一个应用程序的命名空间，它看起来如下：

```
var app = {};
app.utils = {
    Expiration: function(){ // contructor
    ... // some code
    },
    init: (function(){
         app.utils.Expiration.prototype = function(){....}
      ())
}; 
```

但我得到一个错误：`TypeError: Cannot read property 'Expiration' of undefined`，实际上这是真的，因为 utils 仍在定义中，我知道我可以在 app 范围之外定义原型，我的问题是：我可以在 app 或 app.utils 中用 self 定义它吗执行功能或通过任何其他方式，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T02:09:50.273

您不能在静态声明中引用自己的变量名。您的自执行函数会导致在静态声明时对其进行评估和执行。因此`app.utils`尚未定义。

有替代方案。这是一个：

```
var app = {};
app.utils = {};

app.utils.Expiration = function(){ // contructor
    ... // some code
    };

app.utils.Expiration.prototype = ... 
```

由于这些连续语句中的每一个都添加了另一个级别的属性，因此这些语句必须按此顺序一个接一个地执行，以便前面的元素就位。

# r - 找出互相关最大的滞后 ccf( )

> ID：10369109
> 
> 赞同：15
> 
> 时间：2012-04-29T02:00:53.633
> 
> 标签：r, time-series, correlation

我有 2 个时间序列，我正在使用`ccf`它们来查找它们之间的互相关。 `ccf(ts1, ts2)`列出所有时间滞后的互相关。如何在不手动查看数据的情况下找到导致最大相关性的滞后？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T14:01:05.693

发布答案[http://r.789695.n4.nabble.com/ccf-function-td2288257.html](http://r.789695.n4.nabble.com/ccf-function-td2288257.html)

```
Find_Max_CCF<- function(a,b)
{
 d <- ccf(a, b, plot = FALSE)
 cor = d$acf[,,1]
 lag = d$lag[,,1]
 res = data.frame(cor,lag)
 res_max = res[which.max(res$cor),]
 return(res_max)
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-11-21T22:15:02.147

我想我会重做上述函数，但让它找到返回原始相关性（正或负）的绝对最大相关性。我还（几乎）最大化了滞后的数量。

```
Find_Abs_Max_CCF<- function(a,b)
{
 d <- ccf(a, b, plot = FALSE, lag.max = length(a)-5)
 cor = d$acf[,,1]
 abscor = abs(d$acf[,,1])
 lag = d$lag[,,1]
 res = data.frame(cor,lag)
 absres = data.frame(abscor,lag)
 absres_max = res[which.max(absres$abscor),]
 return(absres_max)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-04T18:47:31.490

因为 3 大于 4，所以我也尝试修改这个函数，这次是从[这里](http://www.r-bloggers.com/melbournes-weather-and-cross-correlations/)实现一个想法：

```
ccfmax <- function(a, b, e=0)
{
 d <- ccf(a, b, plot = FALSE, lag.max = length(a)/2)
 cor = d$acf[,,1]
 abscor = abs(d$acf[,,1])
 lag = d$lag[,,1]
 res = data.frame(cor, lag)
 absres = data.frame(abscor, lag)
 maxcor = max(absres$abscor)
 absres_max = res[which(absres$abscor >= maxcor-maxcor*e &
                        absres$abscor <= maxcor+maxcor*e),]
 return(absres_max)
} 
```

本质上添加了一个“错误”术语，因此如果有多个接近最大值的值，它们都会被返回，例如：

```
ayy <- jitter(cos((1:360)/5), 100)
bee <- jitter(sin((1:360)/5), 100)

ccfmax(ayy, bee, 0.02)
           cor lag
348  0.9778319  -8
349  0.9670333  -7
363 -0.9650827   7
364 -0.9763180   8 
```

如果没有`e`给定值，则将其视为零，并且该函数的行为就像发布的一个[nvogen](https://stackoverflow.com/a/20133091/4272725)一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-06T01:12:30.983

我也修改了原始解决方案，以便循环函数并输出与索引 (x) 的字符向量相对应的值：

```
abs.max.ccf <- function(x,a,b) {
  d <- ccf(a, b, plot=FALSE, lag.max=length(a)-5)
  cor <- d$acf[,,1]
  abscor <- abs(d$acf[,,1])
  lag <- d$lag[,,1]
  abs.cor.max <- abscor[which.max(abscor)]
  abs.cor.max.lag <- lag[which.max(abscor)]
  return(c(x, abs.cor.max, abs.cor.max.lag))
} 
```

我删除了`data.frame`函数中的部分，因为它不必要地慢。要遍历 a 中的每一列`data.frame`并将结果返回到 new `data.frame`，我使用以下方法：

```
max.ccf <- lapply(colnames(df), function(x) unlist(abs.max.ccf(x, df$y, df[x])))
max.ccf <- data.frame(do.call(rbind, max.ccf))
colnames(max.ccf) <- c('Index','Cor','Lag') 
```

# php - 带有标点行为的奇怪关联数组

> ID：10369111
> 
> 赞同：1
> 
> 时间：2012-04-29T02:01:18.517
> 
> 标签：php, associative-array

我有这个简单的代码来计算字符串中的标点符号。即“有 2 个逗号，3 个分号……”等。但是当它看到一个破折号 (—) 时，它就不起作用了。请注意，它不是连字符 (-)，我不在乎那些。

em-dash 有什么特别之处，使它在 PHP 字符串和/或数组键中变得奇怪吗？也许是一个奇怪的 unicode 问题？

```
$punc_counts = array(
    "," => 0,
    ";" => 0,
    "—" => 0, //exists, really!
    "'" => 0,
    "\"" => 0,
    "(" => 0,
    ")" => 0,
);

// $str is a long string of text

//remove all non-punctuation chars from $str (works correctly, keeping em-dashes)
$puncs = "";
foreach($punc_counts as $key => $value)
    $puncs .= $key;
$str = preg_replace("/[^{$puncs}]/", "", $str);

//$str now equals something like:
//$str == ",;'—\"—()();;,";

foreach(str_split($str) as $char)
{       
    //if it's a puncutation char we care about, count it
    if(isset($punc_counts[$char]))
        $punc_counts[$char]++;
    else
        print($char);
}

print("<br/>");
print_r($punc_counts);
print("<br/>"); 
```

上面的代码打印：

```
——
Array ( [,] => 2 [;] => 3 [—] => 0 ['] => 1 ["] => 1 [(] => 2 [)] => 2 ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:05:45.080

它可能不是多字节兼容的。PHP doc page 上有一条[有用的评论](http://nz.php.net/manual/en/function.str-split.php#107658)[`str_split`](http://php.net/manual/en/function.str-split.php)，建议如下：

```
function str_split_unicode($str, $l = 0) {
    if ($l > 0) {
        $ret = array();
        $len = mb_strlen($str, "UTF-8");
        for ($i = 0; $i < $len; $i += $l) {
            $ret[] = mb_substr($str, $i, $l, "UTF-8");
        }
        return $ret;
    }
    return preg_split("//u", $str, -1, PREG_SPLIT_NO_EMPTY);
} 
```

# php - 如何处理云中服务器实例之间的同步？

> ID：10369115
> 
> 赞同：0
> 
> 时间：2012-04-29T02:02:26.973
> 
> 标签：php, cloud

我想知道云实例的同步是如何完成的。有很多 PHP 云提供商，他们总是说您可以简单地设置一个灯堆栈并填充您的数据库并上传您的 php 文件，然后只需打开该服务器的另一个实例（在我看来就像 1:1 副本）处理峰值负载时间等。但是，它们如何同步？我的意思是，是否有实时数据库同步？还有一个实时文件系统同步？如果您的会话存储在服务器 A 上，但下一个网页浏览将您发送到服务器 B，那么 PHP SESSION 会怎样？

还是我在这里遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T04:34:51.917

老实说，这取决于主机和主机的云平台。

对于 PHP 会话，它基于域。会话可以通过 *.domain.com 转移到任何内容。

大多数主机使用软件负载平衡器来完成此任务。该软件将克隆虚拟机，将新虚拟机添加到软件负载平衡器，并编辑必要的配置以使其自动扩展。

至于 mysql 缩放，同样取决于主机，它可能是一个共享数据库。多个虚拟机可以连接到一个共享数据库并推/拉数据。

系统的很多工作方式都是基于主机的。每个主机都不一样。有些使用 OpenStack，它可以自动缩放。有些使用自动缩放的 OnApp。有些人使用 cloudstack，它有点自动缩放。一些主机建立了自己的自动缩放平台。这一切都取决于;)。我很想解释更多，但是网上有很多基于每个主机的资源告诉他们是如何做到的！

有关 onApp 是如何做到的更多信息，请查看[http://loadbalancer.org/virtual_appliance.php](http://loadbalancer.org/virtual_appliance.php)他们使用经过修改的这个软件来与多个管理程序一起工作。

# python - Flask 教程：样式表不起作用

> ID：10369116
> 
> 赞同：0
> 
> 时间：2012-04-29T02:02:29.903
> 
> 标签：python, html, css, flask

我有这个[flaskr 文件夹](https://github.com/mitsuhiko/flask/tree/master/examples/flaskr)的精确副本。我运行了应用程序。一切都按预期工作，但只有一件事。我的博客应用程序没有样式，即使我在文件夹名称静态中有一个“style.css”文件。

在模板文件夹的 .html 文件中，作者似乎忘记加引号了。所以我添加了引号，使得这些文件现在看起来像这样（[layout.html](http://pastebin.com/2dzedpnM)，[logout.html](http://pastebin.com/EKyUh5q0)和[show_entries.html](http://pastebin.com/z8ZAZpFr)。但它没有改变任何东西，仍然看到一个无样式的博客。有谁知道为什么不应用样式？

* * *

编辑：我重新启动了应用程序。突然间我得到一个`OperationalError: no such table exists: entries`（见[这里](http://pastebin.com/P6Jd6Hmu)）。昨天我在博客中填写了 1 个条目，但它工作正常并正确显示了条目，但样式除外。现在突然间我今天第一次运行应用程序时遇到了这个全新的错误。我再次重新复制了所有文件，就像在作者的文件夹中一样，以确保它与作者的完全相同的 flaskr 文件夹。我犯了同样的错误。

有人可以复制[作者的 flaskr 文件夹](https://github.com/mitsuhiko/flask/tree/master/examples/flaskr)并`python flaskr.py`在 flaskr 目录中运行以查看它是否适用于他们吗？所以至少我知道来源是否正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:14:19.793

对于编辑：我忘了运行：（ `>>> from flaskr import init_db; init_db()`请参阅自述文件）。

我不知道为什么上次没有应用该样式，但现在可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:12:41.133

样式表可能未加载

使用像 firebug 这样的工具来确保样式表确实被加载了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-28T15:01:16.253

我遇到了同样的问题，下面的解决方案对我有用。如果您转到`__init__.py`文件并更改

```
def create_app(test_config=None):
    app = Flask(__name__, instance_relative_config=True) 
```

至

```
def create_app(test_config=None):
    app = Flask(__name__, instance_relative_config=True, static_url_path="", static_folder="static") 
```

它应该工作。我的猜测是，如果没有附加参数，默认目录就无法正确设置。这会将静态 url 路径设置为其中的文件夹，`__init__.py`并将静态文件夹设置为同一目录中名为“static”的文件夹。如果您将文件夹放在其他地方或以不同的方式命名，则需要更改这两个参数。

# c# - 如何将控件 A 的底部停靠到可变大小控件 B 的位置

> ID：10369118
> 
> 赞同：0
> 
> 时间：2012-04-29T02:02:42.750
> 
> 标签：c#, .net, wpf, xaml, data-binding

在网格中，我有一个列表框，在列表框下，我有一个图像。当主窗口水平变小时，我的图像保持其比例但尺寸减小，因为它停靠在底部的网格上并且尺寸是自动的。

我的列表框底部是否可能等于图像位置？

就像是：

```
On image_resize 
{
    listbox.Height = image.Location;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T04:58:24.093

如果您正在寻找扩展列表框以填充剩余空间，那么您至少有两个解决方案。

使用 DockPanel：

```
<DockPanel LastChildFill="True">
    <Image Source="..." Dock.DockPanel="Bottom"/>
    <ListBox ItemsSource="{...}" DockPanel.Dock="Top"/>
</DockPanel> 
```

虽然 Image 是列出的第一个元素，但它停靠在底部，因此它位于 ListBox 下方。因为 ListBox 是 DockPanel 中的最后一个元素，它将拉伸以填充剩余空间。有关 DockPanel 的更多信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.dockpanel.aspx)。

使用网格：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
        <RowDefinition Height="Auto"/>
    </Grid.RowDefinitions>

    <ListBox Grid.Row="0"/>

    <Image Grid.Row="1"/>
</Grid> 
```

使用 Grid 您可以请求行自动调整大小以适合其内容，它可以调整自身大小以填充剩余空间，或者可以给定特定高度。`*`符号表示填充剩余空间。有关网格布局的更多信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)，有关快速教程的[此链接。](http://www.wpftutorial.net/gridlayout.html)

# c# - C#/WP7：使用包含 JSON 对象数组的 JSON 对象

> ID：10369119
> 
> 赞同：3
> 
> 时间：2012-04-29T02:02:49.617
> 
> 标签：c#, json, windows-phone-7, json.net

我是使用 JSON 和 JSON.net 的新手，我在处理 JSON 对象中的 JSON 对象数组时遇到了问题。我使用 JSON.net 作为我见过的其他示例，使它看起来很容易使用。

我正在从 Internet 下载以下 JSON 字符串：

```
{"count":2,"data":[{"modifydate":12345,"key":"abcdef", "content":"test file 1"},{"modifydate":67891,"key":"ghjikl", "content":"test file 2"}]} 
```

我知道它需要反序列化，为此我需要一个我编写的 JSON 类：

```
 public class NOTE
    {
        [JsonProperty(PropertyName = "count")]
        public int count { get; set; }

        [JsonProperty(PropertyName = "key")]
        public string key { get; set; }

        [JsonProperty(PropertyName = "modifydate")]
        public float modifydate { get; set; }

        [JsonProperty(PropertyName = "content")]
        public string modifydate { get; set; }

    } 
```

所以我反序列化它使用：

```
NOTE note = JsonConvert.DeserializeObject<NOTE>(e.Result); 
```

这很好用，因为我可以访问 count 属性并很好地读取它，但是 data 属性中的所有内容我都不能。在我看来，这是一个 JSON 对象数组，我遇到了麻烦，我希望能够获得一个列表，例如，所有“键”值或所有“内容”字符串。

我从这里尝试了很多方法，但似乎没有任何效果/我无法找到与我完全一样的情况，我可以与之比较。

如果有人能帮我一把，那就太好了:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:04:08.060

您的 JSON 具有嵌套对象，而您尝试反序列化的对象没有嵌套对象。您需要适当的层次结构才能正常工作：

```
public class Note
{
    [JsonProperty(PropertyName = "count")]
    public int Count { get; set; }

    [JsonProperty(PropertyName = "data")]
    public Data[] Data { get; set; }
}

public class Data
{
    [JsonProperty(PropertyName = "modifydate")]
    public float ModifyDate { get; set; }

    [JsonProperty(PropertyName = "key")]
    public string Key { get; set; }

    [JsonProperty(PropertyName = "content")]
    public string Content { get; set; }
} 
```

现在您应该能够正确反序列化事物：

```
var note = JsonConvert.DeserializeObject<Note>(e.Result);
// loop through the Data elements and show content

foreach(var data in note.Data)
{
    Console.WriteLine(data.content);
} 
```

# ubuntu - Xubuntu 或 Ubuntu

> ID：10369125
> 
> 赞同：-3
> 
> 时间：2012-04-29T02:05:10.330
> 
> 标签：ubuntu, xubuntu

事情就是这样。我忘了我安装了哪个。我使用过`cat /etc/lsb-release`并且`lsb_release -a`它们都显示 Ubuntu 11.10。好吧，但是 Xubuntu 和 Ubuntu 几乎是一回事，所以如果他们只是使用 Ubuntu 作为 Xubuntu 的别名，我不会感到惊讶。我怎样才能绝对确定我有哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:07:12.543

你有团结吗？

![在此处输入图像描述](../Images/6f84262b81c5e717939216f94568758b.png)

如果是这样，那就是Ubuntu。如果没有，那就是Xubuntu。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T02:14:56.730

dpkg -l | grep ubuntu-桌面

unname -a

猫 /etc/apt/sources.list

# php - cURL POST：400 内容长度无效

> ID：10369129
> 
> 赞同：3
> 
> 时间：2012-04-29T02:05:51.093
> 
> 标签：php, post, curl

我在 PHP 中使用 cURL 脚本发送 POST 请求时遇到问题。

我正在尝试制作一个代理，基本上，供我个人使用，它将通过服务器获取网页并在本地显示给我。

URL 如下所示：http://fetch.example.com/http: **//theurl.com/**

当我在该页面上的表单中发布时，它将转到表单的 ACTION（前面带有获取 URL）。我试图让它使用下面的代码处理这个 POST 请求，但是我发布的任何内容总是会带来 400 Bad Request 错误。

```
$chpg = curl_init();
curl_setopt($chpg, CURLOPT_URL, $_URL);
curl_setopt($chpg, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($chpg, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($chpg, CURLOPT_COOKIESESSION, true);
curl_setopt($chpg, CURLOPT_COOKIEJAR, "cookies/$_COOKIE_FILE.$_DOMAIN.txt");
curl_setopt($chpg, CURLOPT_COOKIEFILE, "cookies/$_COOKIE_FILE.$_DOMAIN.txt");
if($_POST) {
    $fields = array();
    foreach($_POST as $col => $val) {
        $fields[$col] = urlencode($val);
    }
    print_r($fields);
    curl_setopt($chpg, CURLOPT_POST, count($fields));
    curl_setopt($chpg, CURLOPT_POSTDATA, $fields);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:43:22.530

你有几个问题：

1.  `CURLOPT_POSTDATA`应该是`CURLOPT_POSTFIELDS`。

2.  您将`$fields` *PHP 数组*作为 `CURLOPT_POSTFIELDS`. 这实际上需要是格式中的字符串`name1=value1&name2=value2&...`。

    要解决这些问题，请按如下方式修改您的 PHP 代码：

    ```
    if($_POST) {
        $fields_str = http_build_query($_POST);

        curl_setopt($chpg, CURLOPT_POST, count($_POST));
        curl_setopt($chpg, CURLOPT_POSTFIELDS, $fields_str);
    } 
    ```

    正如[Lawrence Cherone](https://stackoverflow.com/users/661872/lawrence-cherone)指出的那样，您可以放弃`foreach`循环并[`http_build_query`](http://php.net/manual/en/function.http-build-query.php)改用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T03:08:40.633

尝试使用[http_build_query](http://php.net/manual/en/function.http-build-query.php)并修复`CURLOPT_POSTFIELDS`

```
$chpg = curl_init();
curl_setopt($chpg, CURLOPT_URL, $_URL);
curl_setopt($chpg, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($chpg, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($chpg, CURLOPT_COOKIESESSION, true);
curl_setopt($chpg, CURLOPT_COOKIEJAR, "cookies/$_COOKIE_FILE.$_DOMAIN.txt");
curl_setopt($chpg, CURLOPT_COOKIEFILE, "cookies/$_COOKIE_FILE.$_DOMAIN.txt");
if($_POST) {
    curl_setopt($chpg, CURLOPT_POST, count($_POST));
    curl_setopt($chpg, CURLOPT_POSTFIELDS, http_build_query($_POST));
} 
```

# qt - 如何在 Qt 中使用 QWidget::scroll ( int dx, int dy )？

> ID：10369131
> 
> 赞同：0
> 
> 时间：2012-04-29T02:06:27.540
> 
> 标签：qt

这是[API 文档](http://doc.qt.nokia.com/4.7/qwidget.html#scroll)：

我不知道如何使用它，它会有什么效果？我测试的代码如下：

```
#ifndef WIDGET_H
#define WIDGET_H

#include <QWidget>

class Widget : public QWidget
{
    Q_OBJECT
public:
    explicit Widget(QWidget *parent = 0);

signals:

public slots:

};

#endif // WIDGET_H 
```

> 小部件.cpp

```
#include "Widget.h"
#include<QPushButton>

Widget::Widget(QWidget *parent) :
    QWidget(parent)
{
    QPushButton* bt = new QPushButton(this);
    this->scroll(20, 0);
} 
```

**删除时没有任何变化`scroll(20, 0);`，您能帮帮我吗，谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:29:47.963

QWidget::scroll() 移动*已经*在屏幕上绘制的小部件像素。这意味着应该在显示小部件后调用该函数。换句话说，不在构造函数中。考虑这个例子：

头文件.h

```
#include <QtGui>

class Widget : public QWidget
{
public:
    Widget(QWidget *parent = 0) : QWidget(parent)
    {
        new QPushButton("Custom Widget", this);
    }
};

class Window : public QDialog
{
    Q_OBJECT
public:
    Window()
    {
        QPushButton *button = new QPushButton("Button", this);
        widget = new Widget(this);
        widget->move(0, 50); // just moving this down the window
        widget->scroll(-20, 0); // does nothing! widget hasn't been drawn yet

        connect(button, SIGNAL(clicked()), this, SLOT(onPushButtonPressed()));
    }

public slots:
    void onPushButtonPressed()
    {
        widget->scroll(-20, 0);
    }

private:
    Widget *widget;
}; 
```

主文件

```
#include "header.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Window w;
    w.show();
    return a.exec();
} 
```

# c# - MonoTouch：通过 GameKit 发送/接收 NSData

> ID：10369144
> 
> 赞同：3
> 
> 时间：2012-04-29T02:10:51.180
> 
> 标签：c#, ios, xamarin.ios, nsdata, gamekit

我正在尝试在我的 MonoTouch 游戏中实现匹配。我已经成功实现了通过 GameKit 连接玩家的系统，但我一直在发送和接收数据。

我如何将这个objective-c代码转换成c#？我想发送的数据类型是一个`Vector2`带有`X`和`Y`浮动组件的类。

```
NSError *error;
PositionPacket msg;
msg.messageKind = PositionMessage;
msg.x = currentPosition.x;
msg.y = currentPosition.y;
NSData *packet = [NSData dataWithBytes:&msg length:sizeof(PositionPacket)];
[match sendDataToAllPlayers: packet withDataMode: GKMatchSendDataUnreliable error:&error];

if (error != nil)
{
    // handle the error
} 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:29:35.573

*常用*的方法，因为`OpenTK.Vector2`用 装饰`[Serializable]`，将结构序列化为 a `Stream`（例如 a `MemoryStream`），然后从它初始化一个新`NSData`的，例如使用`NSData.FromStream`。这样做有相当多的开销，但它适用于任何结构。

一个更好的使用方法是`Stream`将你的值写入其中（例如使用 a `StreamWriter`）。这消除了序列化开销（反射）并允许您从不同的值构建流（无需创建结构）。

```
MemoryStream ms = new MemoryStream ();
using (StreamWriter sw = new StreamWriter (ms)) {
    sw.Write (v2.X);
    sw.Write (v2.Y);
}
ms.Position = 0;
var data = NSData.FromStream (ms); 
```

一种更*复杂*（但可能**更快**的方法）是使用`unsafe`代码并`NSData.FromBytes`接受`IntPtr`（指针）和数据的大小。如果您的所有数据都已经在一个结构中，那么这很容易做到。

hacky方法是转换为*已知*`Vector2`的类型`monotouch.dll`，例如`PointF`. 这将允许您使用`NSData.FromObject`. 此 API 适用于`NSObject`，最基本的值类型和一些由 支持`NSValue`或添加到内部的基本类型`monotouch.dll`，例如`RectangleF`, `PointF`, ...

```
var v2 = new OpenTK.Vector2 ();
var pt = new System.Drawing.PointF (v2.X, v2.Y);
var data = NSData.FromObject (pt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:49:43.853

好的，所以我想我大部分都想通了。对于任何感兴趣的人，这是我的解决方案。

```
unsafe
{
    NSError error = new NSError((NSString)"Test", 0);

    System.IntPtr pointer = Marshal.AllocHGlobal(sizeof(PointF));

    PointF packedData = new PointF(position.X, position.Y);

    Marshal.StructureToPtr(packedData, pointer, false);

    NSData packet = NSData.FromBytes(pointer, (uint)sizeof(PointF));

    currentMatch.SendDataToAllPlayers(packet, GKMatchSendDataMode.Unreliable, error.ClassHandle);

    Marshal.FreeHGlobal(pointer);
} 
```

所以我仍然不确定`NSError`应该是什么，尽管对于我的项目失败的数据包并不重要。这是接收数据包的代码。

```
PointF packedData = (PointF)Marshal.PtrToStructure(data.Bytes, typeof(PointF));

var recievedData = new Vector2(packedData.X, packedData.Y); 
```

# grails - grails maven集成

> ID：10369145
> 
> 赞同：0
> 
> 时间：2012-04-29T02:10:52.077
> 
> 标签：grails, maven, ivy

我在 grails 中从事的大多数项目都涉及在 eclipse 中使用 STS 插件。对于 grails 项目，使用 maven 是否常见？或者更常见的是使用 Ivy 之类的东西进行依赖管理并使用 grails 来构建/部署？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:24:25.283

我在 maven 中使用了 grails 项目，但它没有自己的依赖解析。没问题，但是命令行命令有问题（比如`mvn grails:run-app`代替`grails run-app`，当我们需要传递参数时更烦人）

但是当前的 Grails 可以从 Maven 或 Ivy 存储库下载所有依赖项。无需任何外部工具，仅将 Ivy 作为库，参见[http://grails.org/doc/latest/guide/conf.html#ivy](http://grails.org/doc/latest/guide/conf.html#ivy)

所以，我看不出有任何理由使用任何特殊的东西，比如外部 maven 或 ivy

# objective-c - 获取浮点小数点前的整数（Objective-c）

> ID：10369147
> 
> 赞同：4
> 
> 时间：2012-04-29T02:11:14.977
> 
> 标签：objective-c

我有一个像这样的花车`23.248500`。我可以单独获取`23`零件和零件吗？`0.248500`

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T02:13:15.260

对于正数，您可以使用[`floor(f)`](http://www.cplusplus.com/reference/clibrary/cmath/floor/)函数来获取`23`和`f - floor(f)`获取`0.248500`部分。

（我链接了 C++ 参考，但 C 库中存在相同的函数）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T02:26:48.170

正确的功能是[`modf()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/modf.3.html).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-29T02:13:14.060

怎么样：

```
float f = 23.248500;
int a = (int)f;
float f_minus_a = f - a; 
```

# google-app-engine - 如何将多个域名指向单个 Google App Engine 应用程序？

> ID：10369151
> 
> 赞同：3
> 
> 时间：2012-04-29T02:12:01.167
> 
> 标签：google-app-engine, google-apps, domain-name

让 GAE = Google App Engine，GA = Google Apps。假设我有一个带有一个应用程序的 GAE 帐户“exampleapp.appspot.com”和一个与名称“example1.com”成功关联的 GA 帐户，并且我还成功设置了“example1.com”指向“示例app.appspot.com'。

我的问题是如何设置“example2.com”来服务“exampleapp.appspot.com”？

从理论上讲，这个过程与原始设置类似，需要您 1\. 将域添加到 GA 并确认所有权，然后 2\. 将域添加到 GAE，以及 3\. 最后相应地调整名称的 CNAME。

但是，我在第 2 步的过程中卡住了。我可以将第二个域添加到 GA 并确认所有权就好了，但我不能将第二个域添加到 GAE。问题是，在我单击“添加域”后，GAE 将我重定向到通过“example2.com”登录到 GA，而 GA 不会让我这样做。

编辑：我能够在新域下创建一个新帐户，并从 GAE 使用该帐户登录。我猜这不是必需的！现在的问题是，当我尝试在 GA Cpanel 的“设置”选项卡上添加 example2.com URL 时，我收到**“我们目前无法处理您的请求。请稍后再试。（错误 #1000）”**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-01T07:25:33.347

试试[这个](https://cloud.google.com/appengine/docs/python/multitenancy)，它可能会有所帮助。（它对我有用）

# java - Java 使用 Swing 接收 CORBA 回调

> ID：10369152
> 
> 赞同：0
> 
> 时间：2012-04-29T02:12:05.307
> 
> 标签：java, callback, corba

我有一个扩展 Swing JFrame 的类。为了让此类接收回调并调用此类中的方法，该类应扩展 POA 类。我不知道该怎么做。多重继承呢？我应该创建另一个扩展 POA 类的类吗？

代码

```
public final class JFSECorbaClient extends javax.swing.JFrame {

//
// init and other method
//

public static void main(final String args[]) throws ClassNotFoundException, IllegalAccessException, InstantiationException{

        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                frame = new JFSECorbaClient().setVisible(true);
                try {

                    //initialize orb
                    Properties props = System.getProperties();
                    props.put("org.omg.CORBA.ORBInitialPort", "1050");
                    props.put("org.omg.CORBA.ORBInitialHost", "localhost");
                    ORB orb = ORB.init(args, props);
                    System.out.println("Initialized ORB");

                    //Instantiate Servant and create reference
                    POA rootPOA = POAHelper.narrow(
                            orb.resolve_initial_references("RootPOA"));
                    rootPOA.activate_object(this.frame); //this.frame should extends jfseCallbackPOA
                    ref = jfseCallbackHelper.narrow(
                            rootPOA.servant_to_reference(callbackListener));

                    //Resolve MessageServer
                    jfseServer = jfseORBHelper.narrow(
                            orb.string_to_object("corbaname:iiop:1.2@localhost:1050#MessageServer"));

                    //Activate rootpoa
                    rootPOA.the_POAManager().activate();
                    //thread for receive callback in other class thread
                    JFSECorrbaListener th = new JFSECorrbaListener();
                    th.setOrb(orb);
                    th.start();

                } catch (Exception e) {
                    System.out.println(e);
                }
            }
        });

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:30:33.993

如果您控制 IDL，则不必扩展 POA 类：您可以通过 RMI/IIOP 定义回调，在生成存根 (rmic -iiop) 时从远程接口生成 IDL，并使用 PortableRemoteObject。 exportObject() 将其导出。无需扩展任何特定的类。

说了这么多，这是错误的答案。您的 JFrame 扩展类不需要也是 CORBA 回调。将您的 CORBA 回调定义为一个完全独立的类，并在您的 JFrame 扩展类中为其提供挂钩，以便在回调发生时执行所需的任何操作。

# c# - Nancy Framework 的 Hello world 应用程序无法编译

> ID：10369153
> 
> 赞同：1
> 
> 时间：2012-04-29T02:12:26.577
> 
> 标签：c#, nancy

我正在尝试让 Nancy 运行一个 hello world web 应用程序。它不会编译并突出显示`Get["/"] = parameters => "Hello World";`并且无法识别此符号。

我一定遗漏了一些简单的东西，但在网上找不到关于这个问题的任何东西。

脚步：

1.  创建了一个新的 ASP.NET Web 应用程序
2.  使用 NuGet 获得并安装了 Nancy.Hosting.Aspnet
3.  检查 web.config 是否由 NuGet 配置并且看起来正确
4.  添加了一个具有以下代码的新类：

    ```
    using Nancy;

    namespace test2
    {
        public class MainModule : NancyModule
        {
            Get["/"] = parameters => "Hello World";
        }
    } 
    ```

    结果：`Get["/"] = parameters => "Hello World";`无法编译

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T06:11:38.587

您需要将路由声明放在 MainModule 的构造函数中。以无效的 C# 语法将声明直接放入类的主体中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-24T19:06:11.140

正如 TheCodeJunkie 提到的，`Get["/"] = parameters => "Hello World";`需要放置在类的构造函数中。

```
using Nancy;

namespace test2
{
    public class MainModule : NancyModule
    {
        public MainModule() {
            Get["/"] = parameters => "Hello World";
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-13T14:17:07.473

除上述内容外，请注意，较新版本的语法发生了变化，现在定义看起来像

```
Get("/", parameters => "Hello World"); 
```

# java - 我在这里违反了得墨忒耳法则吗？

> ID：10369154
> 
> 赞同：1
> 
> 时间：2012-04-29T02:12:30.983
> 
> 标签：java, jsp, el

这侵犯了`Law of Demeter`权利？见`${book.author.name}`及`${book.category.name}`下文。可以在带有表达式语言的 JSP 中执行此操作吗？

```
<c:set var="book" value="${book}" />

<table>
    <tr>
      <td>Title:</td><td><c:out value="${book.title}" /></td>
    </tr>   
    <tr>
        <td><c:out value="${book.description}" /></td>
    </tr>
    <tr>
        <td>Price: </td><td><c:out value="${book.price}" /></td>
    </tr>
    <tr>
        <td>Author: </td><td><c:out value="${book.author.name}" /></td>
    </tr>
    <tr>
        <td>Category: </td><td><c:out value="${book.category.name}" /></td>
    </tr>
</table>

</body>
</html> 
```

`${book}`属性是一个`Book`对象。`BookServlet`：

```
String id = request.getParameter("id");

BookService bookService = new BookService();
Book book = bookService.getBookById(Integer.valueOf(id));

request.setAttribute("book", book); 
```

`findBookById()`从`BookService -> BookDao`

```
public Book findBookById(int id) throws DaoException {

Book book = null;
Connection con = null;
PreparedStatement ps = null;
ResultSet rs = null;

try {
    con = this.getConnection();

    ps = con.prepareStatement(FIND_BOOK_BY_ID);
    ps.setInt(1, id);

    //Using a PreparedStatement to execute SQL...
    rs = ps.executeQuery();
    while (rs.next()) {
        int bookId = rs.getInt("book_id");
        String title = rs.getString("title");
        String desc = rs.getString("description");
        int authorId = rs.getInt("author_id");
        String authorName = rs.getString("author_name");
        int categoryId = rs.getInt("category_id");
        String categoryName = rs.getString("book_category_name");
        double price = rs.getDouble("price");

        book = new Book(bookId);
        book.setTitle(title);
        book.setDescription(desc);
        book.setPrice(price);

        Author author = new Author(authorId);
        author.setName(authorName);
        book.setAuthor(author);

        Category category = new Category(categoryId);
        category.setName(categoryName);                
        book.setCategory(category);
}
} catch (SQLException e) {
    throw new DaoException("findBookById() " + e.getMessage());
} finally {
    try {
        if (rs != null) {
            rs.close();
        }
        if (ps != null) {
            ps.close();
        }
        if (con != null) {
            freeConnection(con);
        }
    } catch (SQLException e) {
        throw new DaoException(e.getMessage());
    }
}
return book; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:02:57.553

严格来说，你违反[了得墨忒耳法则](http://en.wikipedia.org/wiki/Law_of_Demeter)：你在 Book 方法返回的对象上调用方法，暴露了 Author 和 Category 类的内部结构。

另一方面，我不认为你的代码是有害的，你违反了德米特法则似乎很天真。我在书籍和生产代码中多次看到像您这样的 JSP 文件，而且完全没有任何危害。

但是，如果您仍然想遵循法律，您可以使用类似于[数据传输对象](http://en.wikipedia.org/wiki/Data_transfer_object)的东西，它只具有您的 JSP 需要显示的属性。使用 Book 的信息填充 DTO 实例需要额外的工作，作者和类别类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:28:28.783

这是对 jsp 的完全有效的使用。以其他方式做到这一点需要更多的工作而不是它的价值。严格遵守在 COBOL 仍然流行时制定的编码原则只在学术界感兴趣。

# c++ - 从二叉搜索树中删除节点

> ID：10369159
> 
> 赞同：0
> 
> 时间：2012-04-29T02:13:19.863
> 
> 标签：c++, binary-search-tree

我正在尝试创建一个函数来从二叉搜索树中删除一个节点。我得到了第三种情况，节点有 2 个孩子在工作，但我的代码不起作用，因为节点有 1 个或没有孩子。

这是我直接从书中复制的代码。我从书中得到的这个代码错了吗？

```
template <class elemType>
void bSearchTreeType<elemType>::deleteFromTree
(nodeType<elemType>* &p)
{
nodeType<elemType> *current; //pointer to traverse the tree
nodeType<elemType> *trailCurrent; //pointer behind current
nodeType<elemType> *temp; //pointer to delete the node
if (p == NULL)
cout << "Error: The node to be deleted is NULL."
<< endl;
else if (p->lLink == NULL && p->rLink == NULL)
{
temp = p;
p = NULL;
delete temp;
}
else if (p->lLink == NULL)
{
temp = p;
p = temp->rLink;
delete temp;
}
else if (p->rLink == NULL)
{
temp = p;
p = temp->lLink;
delete temp;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:31:14.023

您确定您的代码与 2 个孩子完美配合吗？因为您提供的上述代码段仅处理 3 种情况：（1）没有孩子，（2）左 ptr 指向的 1 个孩子，（3）右 ptr 指向的 1 个孩子...最后一种情况，有 2 个孩子, 根本不存在...

因此，回答您的问题：是的，您提供的上述代码似乎是错误的（又名不完整）。

我设法找到了你使用的东西的来源。您在上面显示的函数中是否有以下代码（附加在您的流之后`else if`），还是不存在？

```
else
{
    current = p->llink;
    trailCurrent = NULL;

    while(current->rlink != NULL)
    {
        trailCurrent = current;
        current = current->rlink;
    } //end while

    p->info = current->info;

    if(trailCurrent == NULL) //current did not move; 
                             //current == p->llink; adjust p
        p->llink = current->llink;
    else
        trailCurrent->rlink = current->llink;

    delete current;
}//end else 
```

# objective-c - Xcode 在创建地图应用程序时在 Datepicker 上显示当前日期

> ID：10369160
> 
> 赞同：0
> 
> 时间：2012-04-29T02:13:24.747
> 
> 标签：objective-c, xcode, nsdatepicker

我是 Xcode 的新手，我正在使用 Xcode 创建一个相当简单的 Mac 应用程序，它有一个 DatePicker，它将选择保存到 Coredata 模型。

在 Interface Builder 中，在 DatePicker 的属性下，我可以设置显示的最小日期、最大日期和默认日期。但是，我希望将显示的默认日期标记为当前时间，以便我的用户不需要选择日期值，除非它是回溯日期的条目。

我打开 .xib 文件，发现以下代码可以更改显示的默认日期：

```
<object class="NSDate" key="NSContents">
    <double key="NS.time">354974400</double>
</object> 
```

可以通过更改 double key="NS.time" 和 /double 标签中的值来更改默认日期。而且这个值似乎也是自 1970 年以来的秒数。

我努力了：

```
NSDate *today = [NSDate date]; 
```

我知道我仍然需要将其转换为自 1970 年以来以秒数为单位的双精度值。

所以问题是，如何将当前日期更改为可以解析的值，以便显示的默认日期始终是当前日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:41:26.127

当视图加载时，调用`-setDateValue:`.`NSDatePicker`

# python - 解析 JSON 字符串时出错

> ID：10369162
> 
> 赞同：0
> 
> 时间：2012-04-29T02:14:10.800
> 
> 标签：python, json, parsing

我在解析似乎是有效 json 的 json 字符串时遇到了困难。

我的代码如下。我正在尝试从 URL 中获取一些简单的 json。

```
import urllib2    
import simplejson
req = urllib2.Request("http://www.rentrent.org/RENT/Ads.aspx?xmin=-118.01925659179687&ymin=33.71948521132481&xmax=-117.68142700195314&ymax=33.85644642218431&bd=&ba=&pets=-1&type=2&throwErrorIfOverLimit=false&callback=xxx")  

opener = urllib2.build_opener()    
f = opener.open(req)    
content = f.read();    
print "content = " + content   # Appears to print valid json string
json = simplejson.loads(content) 
```

我收到一个错误`simplejson.loads(content)`：

```
raise JSONDecodeError("No JSON object could be decoded", s, idx) 
simplejson.decoder.JSONDecodeError: No JSON object could be decoded: line 1 column 0 (char 0) 
```

这很令人困惑，因为它`content`似乎是一个非常好的 json 字符串。

我需要将这些数据作为单个元素获取。任何想法如何摆脱这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:22:16.960

这是一个 jsonp api 网址。它期望返回一个包含在函数调用 xxx() 中的响应。研究如何处理 jsonp。您目前得到的实际上不是有效的 jsonp。它的有效javascript。

这里还有一个关于区别的问题：
[JSON 和 JSONP 有什么区别？](https://stackoverflow.com/questions/2887209/what-are-the-differences-between-json-and-jsonp)

您可以从您的 url 中删除回调参数并取回纯 json：
[http ://www.rentrent.org/RENT/Ads.aspx?xmin=-118.01925659179687&ymin=33.71948521132481&xmax=-117.68142700195314&ymax=33.85644642218&431&bd=s =-1&type=2&throwErrorIfOverLimit=false](http://www.rentrent.org/RENT/Ads.aspx?xmin=-118.01925659179687&ymin=33.71948521132481&xmax=-117.68142700195314&ymax=33.85644642218431&bd=&ba=&pets=-1&type=2&throwErrorIfOverLimit=false)

**更新**

我忽略了从 url 中删除回调参数实际上并没有告诉这个 api 返回 JSON。它只是防止它被包装到一个函数中。返回值仍然不是 json。它是 JavaScript。具体来说，这里是一个例子：

*Javascript 从返回值*

```
{Status:'Success', 
```

*JSON*

```
{'Status':'Success', 
```

所有的键都需要被引用。您的选择是：

1.  查看api是否支持json返回值而不是jsonp
2.  对输出进行正则表达式修复以在解码之前引用所有键

# c++ - C++：使用 std::vector::reserve 减少保留空间

> ID：10369163
> 
> 赞同：1
> 
> 时间：2012-04-29T02:14:25.187
> 
> 标签：c++, memory-management, stdvector

> **可能重复：**
> [如何缩小 std::vector 的大小？](https://stackoverflow.com/questions/253157/how-to-downsize-stdvector)

根据 cppreference，在 std::vector::reserve(size_t n) 中，n 是“作为已分配存储容量所需的最小数量。”。我的问题是：如何避免只知道最大值的任何重新分配？

例如，假设我有一个整数列表，但我不知道这个列表的大小（例如，这个列表来自文件的读取）。但是我知道这个列表的最大大小是 1000。假设列表的实际大小是 800。

目前，我使用 std::reserve(1000)，然后使用 push_back() 循环。使用储备我防止任何重新分配。但是如何释放 push_backs 末尾的额外空间？（在示例的情况下，如何释放 1000-800=200 额外空间？）

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:28:53.980

您可以使用`std::vector::shrink_to_fit()`

```
std::vector<int> v;
v.reserve(1000);
for(int i=0;i<800;++i)
    v.push_back(10);

v.shrink_to_fit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:20:45.370

您基本上需要以正确的大小创建一个新向量并交换两个向量的内容。幸运的是，在 STL 中，这是单行的。下面是示例：[如何缩小 std::vector 的大小？](https://stackoverflow.com/questions/253157/how-to-downsize-stdvector)

# objective-c - 块没有被解雇

> ID：10369165
> 
> 赞同：0
> 
> 时间：2012-04-29T02:14:46.927
> 
> 标签：objective-c

我有以下代码，由于某种原因，我的块没有被触发。

```
int main (int argc, const char * argv[])
{

    @autoreleasepool {

        return 0; 

        HttpRequestHelper *requestHelper = [[HttpRequestHelper alloc] init];

        [requestHelper processRequest:@"www.yahoo.com" callback:^(NSString * response) {

            NSLog(@"%@",response);

        }];

    }

}

@implementation HttpRequestHelper

-(void) processRequest:(NSString *)url callback:(void (^)(NSString *))block
{
    block(url); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:30:39.353

好吧，首先，你`return 0;`在 的开头是正确的`main()`，所以它会立即退出。

即使在那之后，从它的界面，我收集到的不是`HttpRequestHelper`异步的。它将开始处理请求，但不会立即调用回调。相反，它只会在处理请求后调用回调。问题是，您没有给它处理请求的机会。一旦你发起了请求，你就允许`main`退出，这会终止程序。

您可能必须运行运行循环，直到调用回调。

# java - 服务器消失时强制断开 TCP 连接

> ID：10369167
> 
> 赞同：0
> 
> 时间：2012-04-29T02:14:55.010
> 
> 标签：java, http, tcp, jersey, tcp-ip

我的应用程序使用 Jersey 在循环中对另一台服务器执行 HTTP 长轮询。它依赖于服务器在 30 秒内返回。问题在于，有时服务器会死机，并被具有不同 IP 地址的另一台服务器替换。这会导致最后一个 HTTP 调用永远不会返回并且永远不会超时，因此我的应用程序中的轮询循环会一直卡住，直到我重新启动我的应用程序。

如何强制我的应用程序中断 HTTP 调用或检测服务器已消失？它是一个使用 Jersey 客户端的 Java 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:21:58.210

使用 HttpURLConnection.setReadTimeout() 设置读取超时。

# https - Facebook 通过 HTTPS 取消授权回调

> ID：10369169
> 
> 赞同：4
> 
> 时间：2012-04-29T02:15:27.053
> 
> 标签：https, facebook-canvas

我已经为我的画布应用程序实现了取消授权回调。Facebook 似乎无法通过 https ping 取消授权回调，但它对 http 没有问题。我正在记录所有连接，并且没有从 Facebook ping 回调的记录，但如果我自己 ping 它，它会被记录。此外，如果我通过 URL 调试工具 (https://developers.facebook.com/tools/debug) 让 Facebook ping 回调，则它是成功的。

鉴于 https 不起作用，我假设 Facebook 的服务器不关心我的证书的颁发者/授权机构。是否有可与 Facebook 的后端流程一起使用的证书颁发机构的明确列表？或者，有没有办法向 Facebook 提交新的授权以包含在他们接受的证书授权列表中？

编辑：我的 SSL 证书由“Starfield Technologies”颁发，我认为这是 GoDaddy 的简单 DBA。我通常避免使用 GoDaddy，但这种 SSL 很便宜。也许我得到了我付出的代价，因为它是。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-16T21:58:27.373

我终于弄清楚了问题所在，并想记录下来，以便其他人可以从我的愚蠢中受益。

我的能力在于软件开发。我不是一个熟练的网站管理员。我知道就够了。问题是由于我的 Web 服务器的 SSL 配置造成的。

两年前购买证书时，我安装不完整。我为我的域创建并安装了一个 PEM 文件，但从未将 Web 服务器配置为了解证书颁发机构捆绑包（在我的情况下为 sf_bundle.crt）。

这样做的直接后果是，如果您从 Web 浏览器访问安全 deauth 回调，并且您的 Web 浏览器配置了所有需要的根证书和中间证书，您将成功“deauth”应用程序。

但是，如果 Web 客户端（例如 ping 您的 deauth 回调的 Facebook 后端计算机）尝试访问有问题的 Web 服务器并且它还没有所有可用的中间证书，则 SSL 握手将失败，因为客户端不能验证证书一直返回到根 CA 证书。

我希望这是有道理的。正如我所说，网络管理不是我的强项，我错过了一步。如果您在 Web 服务器配置中正确安装 CA 包，Facebook 后端计算机将能够验证您的站点并成功 ping 您的 deauth 回调。

如果这里有任何不清楚的地方，请随时提问。如果可以的话，我会帮忙的。

# java - 使用变量访问多个对象

> ID：10369170
> 
> 赞同：-1
> 
> 时间：2012-04-29T02:15:33.920
> 
> 标签：java, variables, for-loop

我希望能够在 for 循环中访问对象，如下所示：

```
for (int i=0; i<5: i++)
{ object[i].doSomething(); } 
```

然而，这部分的语法`object[i]`让我无法理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:20:29.720

```
for (        // loop
int i = 0;   // initialize the variable i before starting to iterate
i < 5;       // perform the block below while i < 5
i ++ )       // increment i after performing the block below
{                      // start of block to execute in each iteration of the for-loop
    object[i]          // the i-th element of the array object
    .doSomthing();     // call this method on ^^ 
}                      // end block 
```

好的参考资料：

*   [Java数组教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)
*   [Java 控制流语句](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/flow.html)

# objective-c - iPhone计算器教程帮助，十进制样式..再次

> ID：10369173
> 
> 赞同：1
> 
> 时间：2012-04-29T02:16:13.763
> 
> 标签：objective-c, ios, xcode, math, xcode4.2

我正在研究 iPhone 计算器教程，但遇到了数字显示问题。

计算器屏幕在第一个操作数旁边“打印”第二个输入的操作数（数字），导致一些错误的计算，因为 currentNumber 输入了这个字符串。

我怎样才能让数字甚至运算符（+、-、*、/）全部显示出来并仍然正确执行计算？

```
- (IBAction)pressedDecimal:(id)sender {
    calculatorScreen.text = [calculatorScreen.text stringByAppendingString:@"."];
}
- (IBAction)pressedDigit:(id)sender  {
    calculatorScreen.text = [calculatorScreen.text stringByAppendingFormat:@"%d", [sender tag]];
    currentNumber = [calculatorScreen.text floatValue];
}
- (IBAction) pressedOperation: (id) sender {
    if (currentOperation == 0) result = currentNumber;
    else {
        switch (currentOperation) {
            case 1:
                result = result + currentNumber;
                break;
            case 2:
                result = result - currentNumber;
                break;
            case 3:
                result = result * currentNumber;
                break;
            case 4:
                result = result / currentNumber;
                break;
            case 5:
                currentOperation = 0;
                break;
        }
    }
    currentNumber = 0;
    calculatorScreen.text = [NSString stringWithFormat:@"%g", result];
    if ([sender tag] == 0) result = 0;
    currentOperation = [sender tag];
} 
```

好的，这是一个完全输入的字符串 1.11+2.22 - 注意它把它们放在一起..

![完整输入字符串 1.11+2.22 的屏幕截图](../Images/48617a78940aae6506c74efd91a8c2e7.png)

这是完成的计算，这是错误的..id 喜欢让字符串显示运算符 - 我应该使用 NSRange 来解决小数问题吗？

![计算完成截图二](../Images/41554648dbc19707118f3609c4db11e0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:30:07.360

只要按下相应的按钮，您就会尝试执行每个算术运算。如果你想一想，你会发现这不可能是正确的：例如，如果用户试图做 12+34，那么计算器所知道的只是当按下“+”时它需要添加*一些东西*到12.

现在，如果您正在使用构建计算器教程，那么几乎可以肯定编写它的人对此有解决方案，您应该遵循这一点，因为如果您尝试以不同的方式进行操作，那么它会令人困惑。但这就是我要做的。有一个简单的版本和一个更复杂的版本。

这是简单的版本。

仅仅记住一个数字，即当前显示的数字是不够的。假设您到目前为止按下了：`1 2 + 3`。计算器需要知道 (1) 您输入了数字 12，(2) 您要求它将其添加到某些东西，以及 (3) 您正在输入另一个数字并且到目前为止已经达到`3`. （它可能会变成 345 或其他东西。）

所以，计算器的状态由以下三点组成。(1) 按下操作键或“=”时显示的最后一个完整值。（如果您最近按下清除按钮，则为 0。） (2) 当前通过按下数字按钮构造的值。(3) 最后按下的操作键。（如果您最近按下“=”或清除按钮而不是其中之一，则为“无操作”。）

所有这一切的关键在于，这正是计算器执行您要求的操作所需的信息。我不会详细介绍，因为当你按下每个可能的键时，弄清楚状态如何变化对你的灵魂有好处。

如果你做这一切，你会发现有些情况下计算器可能没有做你想做的事，即使代码中没有错误。假设您输入 12+34*56。在算术书籍、计算机软件和更昂贵的计算器中，这意味着 12+(34*56) 而不是 (12+34)*56，因为乘法比加法具有“更高的优先级”。以我上面描述的方式实现的计算器将以另一种方式执行并计算 (12+34)*56。如果这让您感到困扰，您可以让计算器“正确地”执行它——但这会复杂得多，至少目前我强烈建议您不要打扰。

# iphone - iPhone app中显示N深度分层数据的示例代码

> ID：10369176
> 
> 赞同：2
> 
> 时间：2012-04-29T02:16:40.193
> 
> 标签：iphone, xcode4.2, uitableview

在我之前的问题中，我能够确认我确实需要 UITableViewController 来显示我的 iPhone 应用程序的分层数据（使用 XCode 4.2）。

[iOS开发——无限关卡的uitableview](https://stackoverflow.com/questions/10321478/ios-development-uitableview-with-infinite-levels)

现在我想看看执行此操作的示例代码，这将在 XCode 4.2 中工作。假设分层数据的深度可以在 2 到 300 层之间。

我在哪里可以看到这样的示例代码/示例项目？

**编辑**- 我发现的大多数教程似乎都适用于旧版本的 xcode。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T03:16:26.707

这个问题非常广泛，要完成这项工作有多个部分。如果您将其分解为谨慎的步骤，那么您可能已经可以在 SO 上找到每个步骤的示例代码，或者提出更具体的问题。如果您需要任何单个步骤的帮助，请发表评论，我可以为您提供指导，但这里有太多内容无法输入一个问题。

以下是我认为你需要处理这个项目的方式：

步骤 1\. 创建您的数据结构

您将要为每个级别使用 NSArray。NSArray 可以存储 NSDictionaries 列表或您自己的自定义 NSObject 类。两者都会起作用。如果有标准化的数据结构，那么我建议您创建自己的对象，然后为数组中的每个条目存储该对象。与每次访问都必须进行字典查找相比，它使访问对象的属性更容易。当然，您存储在数组中的对象将需要另一个 NSArray 的字段，该字段将是其下方的子数组。因此，例如，您可能有这样的事情：

```
@interface MyObject : NSObject {
    NSString *nodeTitle;
    NSString *nodeDescription;
    NSArray *childArray;
}

@property (nonatomic, copy) NSString *nodeTitle;
@property (nonatomic, copy) NSString *nodeDescription;
@property (nonatomic, copy) NSArray *childArray; 
```

然后，在类的 .m 文件中，您需要在 init 上将每个 ivar 设置为 nil，并在 dealloc 上释放每个 ivar。

步骤 2\. 加载您的数据

您的提要是在一个大批次中全部下降，还是您可以一次从服务器请求一个级别？理想情况下，如果可以避免的话，您不会将 300 个级别存储到内存深处（这听起来像是一个非常大的 xml 文件）。理想情况下，您在用户逐步进入层次结构时加载每个级别。但也许每个节点的数据量很少，您可以一步加载所有数据，而不会占用大量内存。您需要弄清楚加载例程（一次性或按需）。

步骤 3\. 展示您的数据

这实际上很简单。创建一个使用表视图的视图控制器（UITableViewController 或 UIViewController 嵌入了 UITableView）。在视图控制器上为这个 ivar 创建一个 NSArray 类型的 ivar 和一个属性（复制它）。然后，当您创建此视图控制器时，将当前级别的 NSArray 传递给它，然后再将其推送到导航堆栈。然后设置表视图以呈现作为属性传递给视图控制器的 NSArray ivar。因此，例如，当有人单击加载子级别的表中的一行时，请执行以下操作：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    int row = [indexPath row];
    MyViewController *childView = [[MyViewController alloc] init];
    childView.contentArray = ((MyObject *)[contentArray objectAtIndex:row]).childArray;
    [self.navigationController pushViewController:childView animated:YES]; 
    [childView release];     
} 
```

这假设您已经为数组中的每个条目创建了名为 MyObject 的标准对象，并且它有一个名为 childArray 的属性，它是下一级的数组。

这样就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T01:47:46.343

在实现 Joel 的答案时，您还需要设置导航项的标题，以便在每个嵌套视图的后退按钮上显示正确的文本：

```
[[childView navigationItem] setTitle:<Title from selected row>]; 
```

此外，如果您使用情节提要，而不是实例化视图控制器使用

```
[storyboard instantiateViewControllerWithIdentifier:@"myViewController"]; 
```

其中 myViewController 是分配给 MyViewController 的情节提要 ID

# php - php包含来自不同服务器的文件

> ID：10369177
> 
> 赞同：0
> 
> 时间：2012-04-29T02:17:28.457
> 
> 标签：php, function, include

我正在尝试运行托管在不同服务器上的 php 函数。以下是相关代码：

在 firstdomain.com/handler.php 中：

```
include 'http://www.seconddomain.com/functions.php';
$disp_keyword = doQuery( 0, $keyword, null ); 
```

在 seconddomain.com/functions.php 中：

```
function doQuery( $code, $arg1, $arg2 ) {
    mail( 'myemail@aol.com', 'doquery entered', 'test' );
} 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T02:50:16.380

分配的服务器默认设置将停止此操作，因为它非常不安全，但是如果您不 100% 信任源，使用 eval 可以轻松解决它同样不安全的问题。

而不是使用

```
include 'http://www.seconddomain.com/functions.php'; 
```

利用：

```
<?php 
//get file content, save it .txt on the serving server so its not interpreted,
// you could even encrypt it then base 64 it to keep it safe, then reverse the process
$content = file_get_contents('http://www.seconddomain.com/file.txt');
eval ("?>$content");
?> 
```

或者您可以使用 FGC 获取文件，将其保存，然后使用普通包含，您选择的任何方法都应该非常小心文件的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:23:34.927

第二台服务器上的文件需要输出 PHP 源代码，而不仅仅是运行它。当您包含一个远程文件时，就像在您的浏览器中进入那里，但随后显示的代码会运行。

所以，最简单的方法就是去掉`<?php`and`?>`标签。但是请记住，这会使您的源代码对外界可见 - 特别是任何安全性都会丢失。

# ruby-on-rails-3 - Rails 3，从模型中获取所有控制器名称的列表？

> ID：10369178
> 
> 赞同：0
> 
> 时间：2012-04-29T02:17:29.280
> 
> 标签：ruby-on-rails-3, routes, controllers

我的目标是为这个控制器的视图创建快速 url。有点像某些网站如何通过 domain/* 映射来查看用户的个人资料。除了简单地将这条规则放在文件末尾的路由 rb 中之外，我还想防止用户无意中（或故意将其 URL 命名为控制器）。所以我需要一种快速的方法来获取控制器的所有名称，然后我将在我的模型中编写一个自定义验证器来告诉用户指定的 url 是保留的。

那么如何获得所有控制器的列表呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:29:13.010

ActiveSupport 向 Class 对象添加了一个“子类”属性，因此您应该能够调用 ApplicationController.subclasses 并获取所有已定义控制器的列表。不保证这是可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:46:18.227

冒着听起来微不足道的风险，我想说也许您可以尝试在某个数组中添加控制器名称并在创建新用户之前进行检查？这样，应用程序就不会在每次需要创建用户时浪费资源列出目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T02:48:47.983

我找到了另一种方法。这是一个坏主意吗？我觉得，它比不必要地加载所有控制器更好？

```
controller_list = Array.new
Dir["app/controllers/*.rb"].each do |file|
    controller_list.push(file.split('/').last.sub!("_controller.rb",""))
end 
```

# java - 处理中的 Java 集成

> ID：10369181
> 
> 赞同：0
> 
> 时间：2012-04-29T02:18:06.920
> 
> 标签：java, processing

我有一个简单的单文件 Java 程序，它可以自己运行，但它只是命令行。我想尝试使用处理给它一个界面和一些动画。

那可能吗？

我在同一个文件夹中有 .pde 和 .java，这样当我打开我的草图时，我可以在另一个选项卡中看到 .java。在我的草图文件中，我加入了一些基本的 setup() 和 draw()，但是当我运行它时，我得到了一个 InstantiationException。有没有人成功地尝试过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:32:24.200

刚刚运行了一个基本测试，所有编译都可以使用 Processing 1.5.1 ：

```
void setup(){
  new Test();
}
//Test.java in separate tab
class Test{
  Test(){   System.out.println("Hello!"); }
} 
```

# java - Android：FileOutputStream 和 FileWriter 之间的区别

> ID：10369185
> 
> 赞同：8
> 
> 时间：2012-04-29T02:18:53.247
> 
> 标签：java, android, file-io

我想知道 Android 的 FileOutputStream 和 FileWriter 类之间的确切区别是什么。什么时候最适合使用每一个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T02:23:36.073

如果我没记错的话，FileOutputStream 是更通用的——它可以用于二进制数据或文本数据。FileWriter 仅用于文本。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileWriter.html)

> FileWriter 用于写入字符流。要写入原始字节流，请考虑使用 FileOutputStream。

# r - 在循环中使用对象名称

> ID：10369187
> 
> 赞同：0
> 
> 时间：2012-04-29T02:20:05.543
> 
> 标签：r, list, loops, for-loop, dataframe

我正在合并一些存储在列表中的数据框。为此，我正在使用带有`.df`命令的 for 循环。现在，我想`suffixes`在`paste`循环内部使用数据框的名称。

有没有办法，使用`for ( .df in [list]) {`我可以减去当前在`.df`循环内的数据框的名称的命令？

假设我有这个包含三个数据框的列表，

```
a <- list(A = data.frame(a=runif(2), b=runif(2)), 
          B = data.frame(a=runif(2), b=runif(2)), 
          C = data.frame(a=runif(2), b=runif(2)))
a

$A
          a         b
1 0.2833226 0.6242624
2 0.1741420 0.1707722

$B
           a         b
1 0.55073381 0.6082305
2 0.08678421 0.5192457

$C
           a         b
1 0.02788030 0.1392156
2 0.02171247 0.7189846 
```

现在，我想使用这个循环，

```
for ( .df in a) {
 print(['command I do not know about'])
                } 
```

然后让 [我不知道的命令] 打印出 A、B、C（即 中的数据框的名称`.df`）。

我可以这样做吗？

### 更新 2012-04-28 20:11:58 PDT

这是我使用上面的简单循环从我的输出中截取的部分，

```
for ( .df in a) {
 print(['command I do not know about'](a))
                }

[1] "A"
[1] "B"
[1] "C" 
```

我可以使用，

```
for (x in names(a)) {
    print(x)
    } 
```

但由于我正在做的事情的性质，我想`for ( .df in [list]) {`在我的 for 循环中使用该命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T03:41:42.597

要同时提取名称和值，您不能遍历这些值。您可以遍历索引或名称：

```
# Loop over indices (faster, more cumbersome)
ns <- names(a)
for(i in seq_along(a)) {
   v <- a[[i]]     # extract value
   n <- ns[[i]]    # extract name
   cat(n, ": \n")
   str(v)
}

# Loop over names (easy but slower)
for(n in names(a)) {
   v <- a[[n]]     # extract value
   cat(n, ": \n")
   str(v)
} 
```

...循环名称和提取值对于长向量可能非常慢（它具有 n^2 时间复杂度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T03:29:44.003

不是 for 循环，而是 lapply 但与 for 循环类似。也许这会有所帮助，尽管我很困惑，因为我认为 mrdwab 的答案就是这样。

```
FUN <-function(i){
    x <- a[[i]]
    data.frame(name=rep(names(a)[[i]], nrow(x)), x)
}

LIST <- lapply(seq_along(a), FUN)

do.call("rbind", LIST) 
```

产量：

```
 name          a         b
1    A 0.90139624 0.9739355
2    A 0.34311009 0.6621689
3    B 0.07585535 0.6010289
4    B 0.37292887 0.7260832
5    C 0.17814913 0.1433650
6    C 0.24586101 0.1741114 
```

# unit-testing - 用 Coffeescript 测试 Nodejs

> ID：10369199
> 
> 赞同：4
> 
> 时间：2012-04-29T02:22:46.633
> 
> 标签：unit-testing, node.js, tdd, coffeescript, acceptance-testing

我正在涉足 node.js 和 coffeescript，我想知道对于这些技术来说什么是好的单元测试和验收测试设置。项目的数据组件（后端/Web服务器/数据库）使用的是coffeescript和node.js，视图和组件将位于coffeescript/javascript中（使用钛appcelerator），它们是非常独立的，但如果它们可以使用相同的两者的测试框架会很酷。

经过一番搜索，我听到的名字是 Jasmine、Zombie 和 Mocha。

任何帮助将不胜感激谢谢。

更新：

我忘了补充一下，我习惯于使用 rails 进行开发，并使用 rspec 进行单元测试，使用 Cucumber 进行验收测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:50:19.430

[Mocha](http://visionmedia.github.com/mocha/)、[Vows](http://ariejan.net/2011/06/10/vows-and-coffeescript)和[Jasmine](http://pivotal.github.com/jasmine/)是最知名的。（我没听说过僵尸）。使用哪一个是一种意见问题。我们发现 Vows 非常重量级。Jasmine 朝着更好的方向发展，但 Mocha 目前正在做这项工作。我们在 Mocha 的 BDD 风格单元测试中取得了不错的成功。这是[一个例子](https://github.com/JosephJNK/Scout/blob/master/domain/scout/services/specs/getWhenConstructedWithStrategies.spec.coffee)：

```
Scout = require '../../Scout'
FilteringStrategy = require '../../models/filteringStrategies/FilteringStrategy'
FormattingStrategy = require '../../models/formattingStrategies/FormattingStrategy'
RetrievalStrategy = require '../../models/retrievalStrategies/RetrievalStrategy'
EchoInputStrategy = require '../../models/retrievalStrategies/EchoInputStrategy'
CdrStrategy = require './mocks/CdrStrategy'
EveryOtherStrategy = require './mocks/EveryOtherStrategy'
ArrayToStringStrategy = require './mocks/ArrayToStringStrategy'

require 'should'

describe 'When constructed with a custom retrieval technique', ->
  describe '#get', ->
    it 'should return results', (done)->
      data = [0..10]
      connectionScout = new Scout(CdrStrategy)

      connectionScout.get data, (results)->
        results.should.eql [1..10]
        done() 
```

似乎还没有任何完全集成的 Cucumber 式业务可读 DSL 类型的工具用于 NodeJS 和 Coffeescript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:48:06.030

我使用 Jasmine，它对我有用，你可以通过 coffeescript 编写所有测试用例。

# javascript - 存在哪些允许部分加载较大图像的 javascript 库？

> ID：10369200
> 
> 赞同：2
> 
> 时间：2012-04-29T02:22:47.523
> 
> 标签：javascript, image

我正在寻找一种方法来输出一系列具有特定区域的大图像，该区域在一段时间内发生变化。不必一次又一次地重新加载大图像，我正在寻找一种更有效的方法来用更新的图形换出特定的 (X,Y) 区域。我真的不知道这个方法叫什么或在谷歌中搜索什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:28:04.023

您可以将主图像分解成块，当它们彼此相邻布置时，看起来就像一个无缝图像。然后，您可以随时将一个或多个单独的块替换为不同的图像 URL。

一般概念有几个可能的名称。“图像平铺”和“图像切片”是我想到的几个短语。

这种技术有时也用于帮助更好地加载大图像（在比今天更慢的互联网时代更是如此）。部分谷歌地图曾经以这种方式加载。

# c++ - 仅使用 Win32 API 的线程屏障类

> ID：10369201
> 
> 赞同：0
> 
> 时间：2012-04-29T02:22:55.560
> 
> 标签：c++, multithreading, visual-studio

我正在尝试使用线程屏障同步一堆线程。我尝试使用 Boost::barrier 来做到这一点，但我遇到了一些链接问题：[Compiling Bullet Physics 和 Boost together as static library](https://stackoverflow.com/questions/10368992/compiling-bullet-physics-and-boost-together-as-static-libraries)

因此，虽然解决它可能需要一些时间，但我决定继续使用我自己的线程屏障类。屏障机制需要低延迟，因为我将它用于实时模拟器。我在这里查看了一些选项：

[使用 c++11 atomics 编写（旋转）线程屏障](https://stackoverflow.com/questions/8115267/writing-a-spinning-thread-barrier-using-c11-atomics)

但是它使用了我认为在 Visual Studio 2010 中还不够成熟的 C++ 原子。我正在尝试仅使用 win32 API 将我自己的线程屏障类组合在一起，我正在查看这个：

[http://adilevin.wordpress.com/category/multithreading/](http://adilevin.wordpress.com/category/multithreading/)

我想知道是否有人有更好的建议。我宁愿没有外部库依赖，现在只使用 C++ 和 win32 api。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:32:21.513

如果您可以直接使用 Win32 API（而且您似乎可以），那么您可以使用 Win32 atomics 滚动您自己的 atomic<> 模板：

InterlockedExchange InterlockedCompareExchange 等...

然后，当您在 IDE（Visual Studio 2011？）中对原子有更好的支持时，您可以将自己的模板换成标准库中的模板。

# android - 需要我的音乐播放器的想法

> ID：10369202
> 
> 赞同：0
> 
> 时间：2012-04-29T02:23:29.437
> 
> 标签：android, android-sdk-2.3

我一直在为 android 开发自己的音乐播放器（学习在 android 中编程）。

我的问题是当应用程序第一次启动时，它要求用户选择一个媒体文件夹来扫描文件。一切都很好，但我的文件夹中有大约 1200 首歌曲，扫描大约需要三分钟才能完成。扫描涉及的步骤是从文件夹中递归获取文件，然后我将每首歌曲的完整路径添加到数组列表中。然后将数组列表中的每个项目添加到数据库中。我添加到数据库的字段是路径、歌曲的标题（我使用 MediaMetadataReader 检索）、艺术家、专辑和唯一 ID。

有没有更好的方法来做到这一点？有什么办法可以优化这个？提前致谢。

编辑：

当我第一次运行任何其他音乐播放器时，它们的库包含我拥有的所有歌曲以及元数据。他们的扫描只需要几秒钟。他们是怎么做到的？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:36:00.030

当您的应用程序第一次被分配一个媒体文件夹时，您如何以您正在做的方式遍历所有文件并仅获取路径，

```
File dir = new File(dirPath);
File[] filelist = dir.listFiles(); 
```

然后在同一文件夹中创建具有与您的应用程序关联的唯一名称或 ID 的 XML 文件。

```
<Songs>
  <song>
   <name></name>
   <thumbnailpath></thumbnailpath>
   <filepath></filepth>
  </song>
</Songs> 
```

下次用户选择任何文件夹时，您会检查是否创建了列出的 xml 文件？如果没有，那么创建并在将来只使用这个到 xml 文件作为你的表的来源。

然而，诀窍是当用户更改媒体时，假设他们添加了新媒体，那么您必须编写一个逻辑来处理它。

# 在OP的评论之后

好吧，我没有，但谷歌总是在那里哈哈。但我记得要告诉你的另一件事是。让用户创建播放列表会更聪明，没有人喜欢一起浏览 1200 首歌曲，但是将列表分成几个不同的播放列表，这使您的算法更快地遍历少数文件:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:59:49.297

虽然 Craftero 的回答是正确的，但我建议不要使用 XML 文件来序列化文件系统的内容，而是使用 SQLite 数据库来缓存目录的内容。这将是一个足够灵活的解决方案，您可以安排后台服务偶尔更新数据库以查找新歌曲（或在打开应用程序时手动启动新扫描）。这使您可以两全其美，您可以最初快速显示到目前为止找到的所有内容（应用程序第一次运行时除外），然后使用新的更新数据库（和相应的视图）你找到的文件。请注意，您可能不希望在 Android 数组中保留 1200 首歌曲，这对于应用程序来说似乎是相当多的内存，

# sql - 如何在 SQL CE 中找到 int 和 string 数据类型的串联列的计数？

> ID：10369208
> 
> 赞同：1
> 
> 时间：2012-04-29T02:25:03.153
> 
> 标签：sql, sql-server-ce, string-concatenation

如何在 SQL 上合并不同数据类型的列？

我有一张桌子：

```
+-----------+-------------+
+ Column    + Data Type   +
+-----------+-------------+
+ Day       + Int         +
+ Time      + Varchar     +
+ Quota     + Int         +
+-----------+-------------+ 
```

我想合并该表上的所有列。

我试过这个但它不起作用：

```
SELECT Day + ' - ' + Time + ' : ' + Quota AS [Description], COUNT(*) AS [Total] 
FROM table
GROUP BY Day + ' - ' + Time + ' : ' + Quota 
```

错误信息：`Data Conversion Failed. [ OLE DB status value (if known) = 2 ]`

当我尝试仅合并相同的数据类型时，即：`Day`and `Quota`，它的工作。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:36:47.160

应将数据类型 int 的列转换或类型转换为字符串数据类型，例如`VARCHAR`执行字符串连接。

[**单击此链接以查看 SQL Fiddle 中的演示。**](http://sqlfiddle.com/#!6/b339c/2)

*脚本*：在 SQL Server 2012 中测试。

```
CREATE TABLE dbo.MyTable
(
    [Day] int NOT NULL
  , [Time] varchar NOT NULL
  , [Quota] int NOT NULL
);

INSERT INTO dbo.MyTable ([Day], [Time], [Quota]) VALUES
    (1, '2', 101),
    (1, '1', 101),
    (2, '3', 101),
    (2, '3', 101),
    (3, '4', 263);

SELECT  Description
    ,   COUNT(Description) AS DescriptionCount
FROM
(
    SELECT  CAST([Day] AS VARCHAR) 
            + ' - ' + Time 
            + ' : ' + CAST([Quota] AS VARCHAR) AS [Description] 
    FROM    dbo.MyTable
) T1
GROUP BY Description; 
```

*输出*：

```
DESCRIPTION DESCRIPTIONCOUNT
----------- ----------------
1 - 1 : 101        1
1 - 2 : 101        1
2 - 3 : 101        2
3 - 4 : 263        1 
```

# 更新

*SQL Compact Edition 版本的查询*：

```
SELECT      LTRIM(RTRIM(STR(Day)))  + ' - ' + 
            LTRIM(RTRIM(Time))      + ' : ' + 
            LTRIM(RTRIM(STR(Quota))) AS Description
        ,   COUNT(*) AS DescriptionCount
FROM        MyTable
GROUP BY    LTRIM(RTRIM(STR(Day)))  + ' - ' + 
            LTRIM(RTRIM(Time))      + ' : ' + 
            LTRIM(RTRIM(STR(Quota))) 
```

*输出*：

![sql ce 输出](../Images/7033b118708e3690a3f2b3bfffd4bcd0.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T03:08:10.130

这是我的答案和 Siva 的混搭，希望它能解决提问者的问题：

[SQL 小提琴链接](http://sqlfiddle.com/#!3/89451/1)

```
CREATE TABLE MyTable
(
    iDay int NOT NULL
  , sTime varchar(50) NOT NULL
  , iQuota int NOT NULL
);

INSERT INTO MyTable (iDay, sTime, iQuota) VALUES
    (1, '2', 101),
    (1, '1', 101),
    (2, '3', 101),
    (2, '3', 101),
    (3, '4', 263);

SELECT CAST(iDay AS VARCHAR) + ' - ' + sTime + ' : ' +
CAST(iQuota AS VARCHAR) AS Description
FROM MyTable
GROUP BY CAST(iDay AS VARCHAR) + ' - ' + sTime + ' : ' +
CAST(iQuota AS VARCHAR) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T02:34:42.147

*（假设 MySQL）*：

您正在尝试对字符串和整数执行加法。`+`不是 mysql 中的连接运算符。您得到的错误是告诉您无法将字符串转换为数字类型。

尝试这个：

```
SELECT concat(Day, ' - ', Time, ' : ', Quota) AS `[Description]`, COUNT(*) AS `[Total]`
FROM table
GROUP BY `[Description]` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T02:27:33.823

当您执行 GROUP BY 时，只需编写字段名称。所以...

SELECT Day + ' - ' + Time + ' : ' + Quota AS [Description], COUNT(*) AS [Total]
FROM table GROUP BY Day, Time, Quota

那样有用吗？

# c# - 客户矩形末端的标签截断

> ID：10369210
> 
> 赞同：3
> 
> 时间：2012-04-29T02:25:18.487
> 
> 标签：c#

*这目前适用于 WPF，但如果可能的话，我也需要 WinForms 的答案。*

我制作了一个包含.NET 标签的用户控件。

问题是：当标签足够长时，它会通过用户控件大小的结尾，这并不优雅，并且可能会误认为用户认为字符串结束了。

我想做什么，但不知道如何：

检查标签从客户尺寸中截断的位置，然后用 3 个点“...”替换最后 3 个字符。（所以用户可以知道字符串没有结束，等等）

有什么建议么？（以防万一：我不介意只为标签制作自己的用户控件）。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:31:34.960

在 Winforms 中：将标签上的 AutoSize 属性设置为 false，将 AutoElipses 属性设置为 true。

在 WPF 中，您可以使用 TextTrimming 属性集将内容设置为 TextBlock：

```
<Label Height="29"  Width="35" >
    <TextBlock TextTrimming="CharacterEllipsis">This is a really long string</TextBlock>
</Label> 
```

# javascript - 仅显示一个元素的 Bootstrap 折叠

> ID：10369215
> 
> 赞同：7
> 
> 时间：2012-04-29T02:26:21.297
> 
> 标签：javascript, css, twitter-bootstrap

我正在尝试使用 Bootstrap 的折叠组件。

它运作良好，但我注意到有时它不会关闭所有其他元素；当我按从第一个到第三个的顺序单击然后再次返回到第一个时，第三个保持打开状态。

我的标记与 Bootstrap 提供的示例代码相同，因为我现在只是在测试。

```
 <div class="accordion" id="accordion2"> 
        <div class="accordion-group"> 
          <div class="accordion-heading"> 
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne"> 
              Collapsible Group Item #1
            </a> 
          </div> 
          <div id="collapseOne" class="accordion-body collapse in"> 
            <div class="accordion-inner"> 
             Part 1
            </div> 
          </div> 
        </div> 

        <div class="accordion-group"> 
          <div class="accordion-heading"> 
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo"> 
              Collapsible Group Item #2
            </a> 
          </div> 
          <div id="collapseTwo" class="accordion-body collapse"> 
            <div class="accordion-inner"> 
             Part 2
            </div> 
          </div> 
        </div> 

        <div class="accordion-group"> 
          <div class="accordion-heading"> 
            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree"> 
              Collapsible Group Item #3
            </a> 
          </div> 
          <div id="collapseThree" class="accordion-body collapse"> 
            <div class="accordion-inner"> 
              Part 3
            </div> 
          </div> 
   </div> 
```

JavaScript 代码是这样的：

```
$(".collapse").collapse("#accordion2"); 
```

考虑到我正在考虑在菜单中使用这个组件，为了显示根据 PHP 变量值打开的组，我是否只需将类打印到**/**`div` `collapseOne`等等`collapseTwo`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T12:11:30.993

实际上，您不需要 javascript 部分 -**删除**它！正是这段代码导致了奇怪的行为——`accordion2`被初始化了两次，导致了一组“逻辑”。您的问题完全可以通过使用 javascript 或不使用来重现。

通常，关于 twitter 引导程序，当您可以将所有数据和绑定功能放入 中时`data attributes`，就像您在此处所做的那样，您将永远不必执行 javascript。当页面加载时，TB 通过查找那些`data attributes`.

当您无法通过简单地处理`data attributes`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T10:02:07.797

如果您根据[引导折叠文档](http://getbootstrap.com/2.3.2/javascript.html#collapse)进行标记，则可以使用以下 jQuery 代码实现此目的：

```
$(document).on('click', '.accordion-toggle', function(e) {
    event.preventDefault();

    $('#accordion2').find('.accordion-body').collapse('hide');
    $(this).parent().next().collapse('show');
}); 
```

# facebook - 如何在 iOS 版 Facebook sdk 中获取用户墙的实时更新？

> ID：10369217
> 
> 赞同：1
> 
> 时间：2012-04-29T02:26:32.373
> 
> 标签：facebook, facebook-graph-api, facebook-ios-sdk

我正在尝试在我的应用程序中实现实时（自动更新）墙提要，但我现在不知道 Facebook 网站如何要求您执行 GET 和 POST 命令。这是可能的，如果可以的话怎么办？

非常感谢提前:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T05:45:03.640

要使用[Facebook 实时更新](http://developers.facebook.com/docs/reference/api/realtime/)，您需要使用可公开访问的 URL 作为`callback`. 因此，仅在 iOS 上使用独立应用程序是不可能的，您需要使用某种 Web 应用程序/服务来处理实时订阅，然后将 em 传递给您的应用程序。

# python - 多处理模块显示每个子进程的内存与主进程相同。

> ID：10369219
> 
> 赞同：1
> 
> 时间：2012-04-29T02:26:55.770
> 
> 标签：python, linux, memory-management

我正在使用 python 的多处理模块并且对此有一些困惑。

基本上，我最初将一些数据存储在主进程中，如顶部命令所示，大约为 16GB（主内存大小）。我已将这些数据存储为全局变量。

然后对这些数据进行多重处理，并相应地进行不同的处理。

现在我看到多处理正在发生，即所有进程都有自己的 CPU 利用率，但是所有进程的内存每个 16 GB.. 为什么会这样.?? 难道它不应该使用我通过全局变量的引用传递的相同内存..请一些想法。

top 命令的输出如下：-

> PID 用户 PR NI VIRT RES SHR S %CPU %MEM TIME+ 命令 13908 管理员 20 0 16.7g 16g 848 R 100.0 17.3 0:32.92 python
> 13429 管理员 20 0 16.7g 16g 3336 S 0.0 17.3 15:06.97 python
> 16.7g 管理员16G 848 R 100.3 17.3 0：32.94 Python
> 13911 Admin 20 0 16.7G 16G 16G 840 R 100.0 17.3 0：33.02 Python
> 13912 Admin 20 0 16.7G 16.7G 16G 16G 16G 836 R 99.6 R 99.6 R 99.6 17.6 17.6 17.6 17.6 17.6 17.6 17.3 0：33.00 Python
> 13907 Adman 20 0 16.7G 16.7 G 16.7 G 796 6.66 6.66 r re 0:33.06 蟒蛇
> 13909 管理员 20 0 16.7g 16g 796 R 99.6 17.3 0:32.93 蟒蛇

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:53:36.633

模块产生的每个进程`multiprocessing`都在一个单独的地址空间中。在创建新进程后，原始进程拥有的所有物理和虚拟内存至少在*逻辑上*独立于新进程，但最初每个新进程都是旧进程的完全副本（好吧，请参见脚注）。因此，每个都将具有与原始大小相同的虚拟大小 (16.7 GB)。

使用“写时复制”尽可能多地共享实际的底层物理页面。随着各种副本的运行并对它们的虚拟内存进行更改，内核将根据需要复制底层物理页面。永远不会被写入的内存可以在所有副本之间共享。因此，即使每个进程似乎都在消耗大量 RAM，但实际上并非如此。但是，如果您写入其中的大部分——即，如果每个单独的进程更改了 16 GB 数据的大部分——那么它们都将拥有单独的副本，并使用更多的物理 RAM。

如果您希望它们共享修改，该`multiprocessing`模块确实提供了一些共享数据的方法（请参阅[http://docs.python.org/library/multiprocessing.html](http://docs.python.org/library/multiprocessing.html)中的“共享内存”部分）（但请考虑锁定的工作原理; 见文档）。

* * *

脚注：在 fork 或 clone 系统调用之后，原始版本和克隆版本之间有一个微小的区别：原始版本取回克隆的 ID，而克隆取回数字零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T02:53:34.087

将多处理模块视为 os.fork() 周围的语法糖。

现在什么是叉子？当一个进程分叉时，操作系统会创建一个具有新进程 ID 的新子进程，复制父进程的状态（内存、环境变量等）。

# java - Javasound 不通过 JAAD（一个 SPI）播放 .m4a 文件

> ID：10369221
> 
> 赞同：4
> 
> 时间：2012-04-29T02:27:48.410
> 
> 标签：java, audio, mp4, javasound, m4a

我正在尝试播放一些 .m4a 文件，并且我知道[JAAD](http://jaadec.sourceforge.net/index.php)仅支持解码 AAC，但是我可以从中获取 sourceDataLine 的歌曲，然后当我尝试播放它们时，我会得到类似的行为这个：

我们读到：1024 字节。

我们读到：512 字节。

我们读到：-1 个字节。

运行时：

```
// read from the input
bytesRead = audioInputStream.read(tempBuffer, 0, tempBuffer.length);

System.out.println("We read: " + bytesRead + " bytes."); 
```

直到 bytesRead == -1

对于这个特定的文件，我将 AudioFormat 基本格式设置为：MPEG1L1 48000.0 Hz，每个样本的未知位，单声道，未知帧大小，125.0 帧/秒。

然后 AudioFormat 解码格式为：PCM_SIGNED 48000.0 Hz, 16 bit, mono, 2 bytes/frame, little-endian

我使用这些代码行进行转换：

```
AudioFormat baseFormat = audioInputStream.getFormat();
AudioFormat decodedFormat = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, 
                baseFormat.getSampleRate(),
                16,
                baseFormat.getChannels(),
                baseFormat.getChannels() * 2,
                baseFormat.getSampleRate(),
                false); 
```

我在这里做错了吗？我不完全理解第二行确实如此，但它在使用[MP3SPI](http://www.javazoom.net/mp3spi/about.html)解码 MP3 文件时工作得很好。

我真的很感激这里的任何指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T03:16:28.250

问题是您的文件仅显示 1024 + 512 字节的长度吗？（这对于音频文件来说太短了！）或者是关于文件格式的问题？我看到有些人在尝试解码 .wav 文件的 mp3 时遇到问题，该文件恰好与 Java 支持的 wav 文件格式范围不兼容。

我假设您所指的“第二行”是创建新的文件格式，是吗？这只是根据从输入流中解码的格式创建新格式的行为。据推测，您将在播放中使用新格式。

新格式的重点可能是确保以与您的系统兼容的格式播放数据。它说：（1）无论传入的编码格式如何，都将使用Signed PCM。(2) 将使用相同的采样率（我的系统只支持 44100，很惊讶看到你的允许 48000）。(3) 16 位将是每个样本的新位数，与原始原始文件中使用的位数无关。(4) 将使用与原始文件相同数量的通道。(5) 通道数 * 2 将被视为帧大小（有意义，给定每个样本 16 位） (6) 每秒相同的帧速率 (7) 字节顺序将是 little-endian，无论输入文件顺序。

您可以在此链接的“构造函数详细信息”下查看此构造函数的 API（一些很好的文档）：http: [//docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioFormat.html](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioFormat.html)

如果您需要转换一些音频数据以允许播放，那么事情就会变得更加复杂。您是否已阅读有关音频文件和格式转换的本教程？ [http://docs.oracle.com/javase/tutorial/sound/converters.html](http://docs.oracle.com/javase/tutorial/sound/converters.html)

我希望这至少是部分帮助。我自己没有使用过 JAAD，所以如果这篇文章不是很有帮助，我可以理解。

# asp.net - 强制注销所有在线用户中的特定用户

> ID：10369225
> 
> 赞同：3
> 
> 时间：2012-04-29T02:28:37.717
> 
> 标签：asp.net, asp.net-membership, logout

在我的站点管理员可以查看所有其他在线用户的列表。

管理员还可以禁用该列表中的任何帐户。

到目前为止一切都很好。但现在我决定注销被禁用的用户。如何从上述指定的在线用户列表中为特定用户进行注销操作？

注意：我正在为我的 SQL Server 数据库使用默认成员模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:04:43.533

您不能从他们的会话之外注销用户。有关可能的解决方法，请参阅[以编程方式注销 ASP.NET 用户](https://stackoverflow.com/a/3098840/139917) 。

# javascript - 为什么我的 javascript 无法检测到移动设备？

> ID：10369234
> 
> 赞同：1
> 
> 时间：2012-04-29T02:30:32.743
> 
> 标签：javascript, html, function

我使用[`mdetect.js`](http://code.google.com/p/mobileesp/source/browse/JavaScript/mdetect.js)的是从 mobileesp.com 获得的。该文件看起来非常适合我的需要，并且我已将其保存在本地。然后在我的 HTML 页面上，我想调用其中一个函数，如果它返回 true（即用户在移动设备上），则在页面顶部显示一个表格，说明我们的网站目前不支持移动设备。但是，在到达那里之前，我已经失败了：

```
<html>
<head>
<script type="text/javascript" src="mdetect.js"></script>
</head>
<body>
<h1>header 1</h1>
<script type="text/javascript">
document.write(DetectIphoneOrIpod());
</script>
<p>this is normal body text</p>
</body>
</html> 
```

我究竟做错了什么？我什至没有接触过复杂的东西（至少对我来说）。为什么它不会根据从该函数返回的内容写入 true 或 false？任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T02:38:36.697

我不知道有什么问题，但是如果您将整个文件仅用于该功能，那就过分了。这是一个精简的版本，应该也更容易调试：

```
function isSmallIDevice() {
    return navigator.userAgent.search(/iPhone|iPod/i) > -1;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:45:59.087

我认为你想要做的是这样的：

```
<html>
<head>
<script type="text/javascript" src="mdetect.js"></script>
</head>
<body>
<h1>header 1</h1>
<script type="text/javascript">
    if (DetectIphoneOrIpod()) {
        document.write("<table>...</table>");
    }
</script>
<p>this is normal body text</p>
</body>
</html> 
```

但是，您可能希望使用`DetectSmartphone()`或`DetectMobileQuick()`功能来检测更多的移动设备，而不仅仅是 iPhone 和 iPod Touch。

# mips - MIPS 汇编器内存对齐问题（包括详细代码）

> ID：10369239
> 
> 赞同：1
> 
> 时间：2012-04-29T02:30:50.623
> 
> 标签：mips

我正在尝试将从用户读取的整数存储到数组中，但是当我尝试将其存储到我的数组中时，我的数据变得未对齐。

第一个代码块是我初始化所有数据的地方。（在 1\. 下是我试图存储整数的地方）

```
 ```
'#Constants
P_INT        = 1      #Syscall to print integer(value)
P_STRING     = 4      #Syscall to print a string(addr)
P_CHAR       = 11     #Syscall to print a char(char)
R_INT        = 5      #Syscall to read a integer(none)
EXIT         = 10     #Exit program(none)

'#Data
        .data
newline:
        .asciiz "\n"        

'#Space for the bored.

 1\. 
board_rep:
        .space     578

'#The current node to be read in
cur_node:
        .word      0 

'#Size of the bored
size:
        .space     4
'#Plus sign
plus:
        .asciiz "+"
'#dash
dash:
        .asciiz "-" 
``` 就在这里，它变得不对齐（2 之后的 sw。）。奇怪的是，我稍后（在第三个代码块中）做了完全相同的事情，只是我将它存储在 size 数组中。

```
 ```
'#Grabs user input for the bored and stores it
get_board_rep: 

        li       $v0,R_INT     '#Read next node and store it    
        syscall 
2.
        sw       $v0,0($s1)

        addi     $s1,$s1,4    ' #Increment next node addr

        lw       $a0,0($s1)
        j        prnt_node 
``` 在存储字（在 3\. 下）它以整数形式存储读取。

```
 ```
 la        $s0, size      ' #Store the variable addr's
        la        $s1, board_rep  

        li        $v0,R_INT      ' #Get user input(size of bored)
        syscall 
3.
        sw        $v0,0($s0)     ' #Store the size of bored

        jal       get_board_rep 
``` 我想也许数组太大了，但我把它改成了 4（与另一个有效的数组大小相同）。但它仍然没有对齐。

提前致谢 。这是一个项目，我知道有些人不喜欢帮助这样的事情。但是我已经完成了作业，我无法在任何地方找到答案。

            回答 #1

赞同：1

时间：2012-04-29T02:47:05.350

这看起来与我不一致，如果我错了，请尝试明确地对齐它。

```

```

```

# javascript - 在选择列表中使用 created 属性和 javascript

> ID：10369241
> 
> 赞同：1
> 
> 时间：2012-04-29T02:31:08.997
> 
> 标签：javascript

我试图访问我在选择列表中创建的属性。

```
<script language="JavaScript">
function updateUrl()
    {
        var newUrl=document.getElementById('test').car;
        alert(newUrl);
    }
</script>

<input type="text" id="test" car="red" value="create Attribute test" size="40"/> 
<input type="button" value="submit" onclick="updateUrl();"> 
```

它一直给我不确定。我如何从属性车中获取字符串红色？

编辑。我用它现在警报为空的选择列表尝试了它

```
<select name= "test" id= "test" onChange= "updateUrl()">
     <option value="1" selected="selected" car="red">1</option> 
     <option value="2" car="blue" >2</option> 
     <option value="3" car="white" >3</option> 
     <option value="4" car="black" >4</option>    
</select> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T02:32:59.577

尝试这个：

```
var newUrl = document.getElementById('test').getAttribute('car'); 
```

**编辑**

对于`<select>`，您必须查看所选`<option>`元素，而不是其`<select>`本身：

```
var select = document.getElementById('test');
select.options[select.selectedIndex].getAttribute('car'); 
```

# node.js - node.js 中的递归函数给出了意想不到的结果

> ID：10369245
> 
> 赞同：0
> 
> 时间：2012-04-29T02:31:52.503
> 
> 标签：node.js, recursion

那么结果至少对我来说是出乎意料的。我正在尝试搜索目录并获取所有文件和子文件夹，但是在处理子目录的子目录时遇到了一些问题。该函数本身旨在查找所有文件夹的所有内容以及给定文件夹中的所有文件，并在文件夹中的其中一个事物是文件夹时调用自身。

但是，它永远不会完成，它一直将同一个文件夹输入到自身中，并且从不对其进行任何操作，最终只是崩溃了。

```
var fs = require('fs');

var array = fs.readdirSync(__dirname);
function getAllSub(array){
for (i = 0; i < array.length; i++){
    if (array[i].indexOf(".") == (-1))
        {                     
            array = array.concat(array[i] + "/" + fs.readdirSync(__dirname + "/" +    array[i]));
        }
    if (array[i].indexOf("/") != (-1)){
        var foldcon = array[i].substr(array[i].indexOf("/") + 1);
        var folder = array[i].substr(0, array[i].indexOf("/"));
        foldcon = foldcon.split(",");
        for (n = 0; n < foldcon.length; n++){
            foldcon[n] = folder + "/" + foldcon[n]
            if (foldcon[n].indexOf(".") == (-1)){ 
                console.log([foldcon[n]]);
                foldcon[n] = getAllSub([foldcon[n]]);          

            }
        }
        array.splice(i, 1, foldcon);

    }

}

return array;
}
array = getAllSub(array);
console.log(array); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:36:32.007

您的代码有几个问题。您应该使用`fs.stat`调用来获取有关文件的信息以确定它们是目录还是文件，解析路径本身确实容易出错。此外，`readdir`只返回目录中文件的名称，而不是文件的完整路径。最后，我建议您使用 readdir 的异步版本，这样您在执行此操作时就不会锁定 node.js 线程。

下面是一些从起始路径获取所有文件夹和文件的示例代码：

```
var parseDirectory = function (startPath) {
  fs.readdir(startPath, function (err, files) {
    for(var i = 0, len = files.length; i < len; i++) {
      checkFile(startPath + '/' + files[i]);
    }
  });
};

var checkFile = function (path) {
  fs.stat(path, function (err, stats) {
    if (stats.isFile()) {
      console.log(path + ' is a file.');
    }
    else if (stats.isDirectory()) {
      console.log(path + ' is a directory.');
      parseDirectory(path);
    }
  });
};

parseDirectory(__dirname + '/../public'); 
```

# haskell - Hackage 是开源的吗？

> ID：10369251
> 
> 赞同：2
> 
> 时间：2012-04-29T02:33:37.743
> 
> 标签：haskell, open-source, licensing, package, hackage

我在 Hackage 上看到的大多数软件包都是使用开源许可证发布的库，我想我对一个缺少许可证字段的 hackage 上传有微弱的记忆，这引发了 hackage.haskell.org 关于不使用开源许可证的抨击.

1.  是否有*规定*要求在 Hackage 上托管的每个软件包都*必须*在开源许可下提供？

2.  如果您声称有这样的规则，那么[http://hackage.haskell.org/packages/archive/Cabal/1.14.0/doc/html/Distribution-License.html](http://hackage.haskell.org/packages/archive/Cabal/1.14.0/doc/html/Distribution-License.html)有什么关系？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T02:37:54.780

您可以使用任何您喜欢的许可证。这就是`OtherLicense`构造函数的`License`用途。也就是说，Hackage 是一个*源代码*分发中心，因此如果您不希望人们查看您的源代码，请记住这一点。

# python - 这些变量会在主机的整个生命周期中存在吗？

> ID：10369252
> 
> 赞同：0
> 
> 时间：2012-04-29T02:33:44.093
> 
> 标签：python, tkinter

我正在编写一个 Tkinter 程序。主要课程是`MainFrame()`

```
class MainFrame(Frame):

    def __init__(self, master=None):

        Frame.__init__(self, master)
        self.grid()

        # sets up the tab bar
        self.tabbar = TabBar(self, 'File Tabe Bar')
        self.tabs = []
        self.add_tab(self.tabbar, 'Hello Tab') # add a new tab to self.tabs
        self.tabbar.pack()  # make it visible

    def add_tab(self, parent, name='Default'):
        tab = Tab(parent, name)
        self.tabs.append(tab) 
```

`tab`通过调用创建的每个变量是否会`add_tab`在主框架的整个生命周期中持续存在（直到它被销毁）？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T02:39:32.937

每个变量都绑定到一个对象`Tab`。每个`Tab`人都有一个父母。一旦函数存在，函数的局部变量就会消失——也就是说，绑定丢失了，但是您`Tab`在列表中拥有对对象（每个对象）的引用，该引用在对象的`self.tabs`整个生命周期中都存在`MyFrame`。

每个对象`Tab`将一直存在，直到父类（和/或父类的父类）被销毁（或通过调用销毁方法`Tab`）

只是我的疯狂猜测::(

# r - 将 R 县地图叠加到州地图上

> ID：10369253
> 
> 赞同：4
> 
> 时间：2012-04-29T02:33:44.717
> 
> 标签：r, maps

R新手在这里。

如果我第一次使用`map('state')`，我该如何使用`map('county', ylim=..., xlim=...)`但像这样抵消它：

![覆盖](../Images/850f3ed6528b5baee40db0e857b97657.png)

现在，我正在使用 imagemagick`composite -gravity southwest ...`来组合 2 个 PNG 文件，但这似乎不太理想。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T05:45:47.923

您可以`fig`在图形参数调用中使用该选项来设置将要绘制图形的区域。

```
map("state")
par(fig=c(0.1,0.9,0,0.6), new=TRUE, xpd=NA)
map("county",regions="california",add=TRUE) 
```

关于其他代码，`xpd=NA`允许您在绘图的边缘绘图，同时`new=TRUE`确保在开始新绘图时不会废弃现有绘图。添加`add=TRUE`到该县的情节末尾的行为与`new=TRUE`调用类似。

![在此处输入图像描述](../Images/3ecb58d932da2de3147bf05278879ad3.png)

# trac - 我们什么时候会收到“AssertionError：HDF 数据集不可用。检查您的 clearsilver 安装”

> ID：10369256
> 
> 赞同：0
> 
> 时间：2012-04-29T02:33:58.810
> 
> 标签：trac

我正在尝试为 trac 安装一个 dbauth 插件。我知道我可能应该在其他 trac 和 trac-hacks 相关论坛上关注这个问题，但我仍然想知道，为什么会出现这个错误？到底发生了什么？

在我的例子中，dbauth 插件试图从 sqlite 或 mysql 数据库中读取类似：“trac_permissions”和“trac_users”的内容。我检查了数据库，值在那里，但它们都不起作用。clearsilver 也已安装并正在运行。

那么通常是什么导致了这个错误呢？是不是 HDF 解析器收到了错误的信息？请不要将此视为一个跟踪问题，只需向我解释为什么会发生这些类型的错误。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:50:55.150

[谷歌搜索](http://bit.ly/JnmU8g)应该让你开始。您还应该考虑另一种选择，因为不推荐使用[DbAuth](http://trac-hacks.org/wiki/DbAuthPlugin)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T00:11:11.897

你运行的是什么版本的 Trac？最近的版本使用 Genshi 而不是 Clearsilver，这意味着基于 Clearsilver 的插件可能无法正常工作（至少没有修改）。根据[Trac wiki](http://trac.edgewall.org/wiki/ClearSilver)，Trac 版本 0.11 仍然具有支持基于 Clearsilver 的插件的基础设施，版本 0.12 以不受支持的形式保留了这种支持（这意味着使用需要您自担风险，如果某些东西不起作用，您将自行承担） ，并且 0.13 版完全放弃了对基于 Clearsilver 的插件的支持。除非您仍在运行版本为 0.10 或 0.11 的旧版 Trac 安装，否则我倾向于说这个问题是由于 Clearsilver 支持的逐步淘汰造成的。

根据[这个 trac-hacks ticket](http://trac-hacks.org/ticket/3474)，您可能想尝试使用 Python 绑定重新编译 Clearsilver（这仅在您运行 Trac 0.11 或更早版本时才有用）。

# wordpress - 如何在 WordPress 中自定义类别列表

> ID：10369258
> 
> 赞同：1
> 
> 时间：2012-04-29T02:34:47.480
> 
> 标签：wordpress

我有以下 HTML，并希望我的 WordPress 列表的输出与它一致。没有孩子的类别将在一个`<li>`已经进入下拉菜单的孩子的类别中。HTML 和 JS 对所有这些工作都是完美的，但我不知道创建函数以这种格式返回 WordPress 类别。

```
 <ul class="nav">
        <li><a href="#">Categoria 1</a></li>
        <li><a href="#">Categoria 2</a></li>
        <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">Categoria 3<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="#">Categoria 3.1</a></li>
                <li><a href="#">Categoria 3.2</a></li>
            </ul>
        </li>
        <li><a href="#">Categoria 4</a></li>
        <li><a href="#">Categoria 5</a></li>
        <li class="dropdown">
            <a data-toggle="dropdown" class="dropdown-toggle" href="#">Categoria 6<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a href="#">Categoria 6.1</a></li>
                <li><a href="#">Categoria 6.2</a></li>
            </ul>
        </li>
    </ul> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T11:43:01.857

看看这个功能：[http](http://codex.wordpress.org/Template_Tags/wp_list_categories)
://codex.wordpress.org/Template_Tags/wp_list_categories 试试这个：

```
$args = array(
    'hierarchical' => true,
    'hide_empty' => 0,
    'title_li' =>''
);

echo'<ul>';
wp_list_categories($args);
echo '</ul>'; 
```

# sharepoint - 如何在 SharePoint 2010 的文档库中创建和新建文件夹时自动创建文件夹和子文件夹？

> ID：10369259
> 
> 赞同：0
> 
> 时间：2012-04-29T02:35:14.947
> 
> 标签：sharepoint

我是 SharePoint Server 2010 的新手，我需要实施此方案，我需要在此完成后在文档库中创建一个新的产品文件夹，必须在此文件夹中创建具有权限的子文件夹，这意味着这些子文件夹必须例如，具有允许用户组查看它的权限或完全控制权限。有可能实现这个场景吗？！！

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:32:10.313

您可以通过 Visual Studio 2010 创建 EventReceiver 项目。将其附加到新项目创建事件。您应该实现自定义逻辑以检查此项目是否是新产品的文件夹，然后创建所需的子文件夹并以编程方式为其设置权限。

# ruby - 在 Rails 中实现聊天

> ID：10369263
> 
> 赞同：0
> 
> 时间：2012-04-29T02:37:11.163
> 
> 标签：ruby, ruby-on-rails-3, juggernaut, faye

我正在尝试`chat module`在我的 rails 应用程序中实现 a 。我查看了这个 railscast [Faye](http://railscasts.com/episodes/260-messaging-with-faye "法耶")教程。在本教程中，Ryan 提到`broadcasting`了消息，但我想要的更像`private conversations`是客户端之间的消息，而不是广播。

有可能通过faye做到这一点吗？还是有更好的方法在 Rails 中实现聊天？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:24:40.253

有一个 gem 可以为您处理 faye 的 autentications，因此用户只能收听您订阅的频道。还有一个关于那个宝石的 railscast。 [https://github.com/ryanb/private_pub](https://github.com/ryanb/private_pub)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:05:25.000

我对 Faye 了解不多，但是假设原理与纯 node.js 和 websockets 之类的原理相同，您可以将可以订阅的频道划分为尽可能多的聊天，然后您在客户端订阅该频道之前需要某种身份验证，其中有多种方法，与大多数身份验证系统一样（例如共享密钥、用户名/密码、质询/响应等）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-31T02:38:53.210

我已经使用 Ryan 的教程`private_pub`来实现类似 Gmail 的即时消息功能。它实际上并不是很复杂。看看我是如何在本教程中实现的[http://goo.gl/l3e8zN](http://goo.gl/l3e8zN)

# zip - 有什么软件可以在 zip 文件中查找和替换？

> ID：10369265
> 
> 赞同：0
> 
> 时间：2012-04-29T02:37:57.017
> 
> 标签：zip, unzip

有没有什么软件可以搜索和替换槽压缩包、zip、tar 等？我资助了 PowerGrep 4，很高兴看到它可以找到字符串但替换失败，因为 zip 功能不好，这个也失败了 [http://www.funduc.com/search_replace.htm](http://www.funduc.com/search_replace.htm)

有什么办法可以做到这一点。

我有超过 200 个档案要更新，每个档案只有 2-3 个文件中的 1 个字符串

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:07:07.127

以下 Free Mac 软件将通过压缩文件搜索和替换，而无需解压缩/重新压缩：

来自 BareBones 的 TextWrangler ( [http://www.barebones.com/products/textwrangler/](http://www.barebones.com/products/textwrangler/) )

# stack - SET A，0x1E 与 SET A，0x1F

> ID：10369267
> 
> 赞同：1
> 
> 时间：2012-04-29T02:38:04.250
> 
> 标签：stack, dcpu-16

这是我第一次尝试 dpcu，我正在检查 dpcu-16 程序集生成的机器代码

我正在使用这个模拟器：[http ://dcpu.ru/](http://dcpu.ru/)

我正在尝试比较由

```
SET A, 0x1E
SET A, 0x1F 
```

生成的代码如下：

```
fc01 
7c01 001f 
```

我不明白为什么这两个值之间的操作数大小会发生变化

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:50:51.460

该模拟器似乎正在使用[DCPU-16 规范的下一版本，该规范](http://dcpu.com/highnerd/dcpu16.txt)指定`a`允许`0xFFFF`(-1) 到`0x1E`(30) 的值的同字文字值。这意味着要获取此范围之外的任何文字值，汇编器必须使用下一个字文字语法，这会使操作数大一个字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T08:51:11.727

0x1F (dec:31) 不再是短文字（值 -1 到 30），因此必须将其视为“下一个单词”参数。

因此操作码是：

```
SET A, 0x1E
SET =             00001
A   =        00000
1E  =  111111
op  =  1111110000000001 = fc01

SET A, 0x1F
SET =             00001
A   =        00000
NW  =  011111
op  =  0111110000000001 = 7c01 + 001f 
```

# android - 实现 Parcelable

> ID：10369269
> 
> 赞同：1
> 
> 时间：2012-04-29T02:38:07.553
> 
> 标签：android

我已经在我的许多只有 String 成员变量的类中实现了 parcelable。我不确定如何为具有 ArrayList 的类执行此操作。我在接受源（Parcel）的构造函数中做什么？

```
public class Schedule {

private ArrayList<Event> allEvents;

 public Schedule(Parcel source) {

    }

public Schedule(){
    allEvents = new ArrayList<Event>();
}

//Getter
public ArrayList<Event> getAllEvents(){
    return allEvents;
}

public void addEvent(Event newEvent){
    allEvents.add(newEvent);
}

  public int describeContents() {
        return 0;
    }

    public void writeToParcel(Parcel dest, int flags) {
        dest.writeList(allEvents);
    }

        public static final Parcelable.Creator<Schedule> CREATOR = 
        new Parcelable.Creator<Schedule>() {

            @Override
            public Schedule createFromParcel(Parcel source) {
                return new Schedule(source);
            }

            @Override
            public Schedule[] newArray(int size) {
                return new Schedule[size];
            }
        }; 
```

}

# mysql - 更改 MySQL 表以添加外键约束会导致错误

> ID：10369271
> 
> 赞同：13
> 
> 时间：2012-04-29T02:38:34.123
> 
> 标签：mysql

# 问题：

为什么在尝试更改具有外键约束的表时出现错误？

# 细节：

我有 1 个表，`HSTORY`我将其用作所有其他特定历史表（即，...）的`USER_HISTORY`基`BROWSER_HISTORY`表`PICTURE_HISTORY`。我还包括了`PICTURE`和`USER`表，因为它们也被调用了。

**历史表：**

```
CREATE TABLE IF NOT EXISTS HISTORY
(
   ID        INT NOT NULL AUTO_INCREMENT,
   VIEWERID  INT NOT NULL ,
   VIEWDATE  TIMESTAMP NOT NULL DEFAULT NOW(),

   PRIMARY KEY (ID),
   FOREIGN KEY (VIEWERID) REFERENCES USER(ID)
)
engine=innodb; 
```

**USER 表：（**以防有人好奇）

```
CREATE TABLE IF NOT EXISTS USER
(
   ID        INT NOT NULL AUTO_INCREMENT,

   PRIMARY KEY (ID)
)
engine=innodb; 
```

**图片表：（**以防有人好奇）

```
CREATE TABLE IF NOT EXISTS PICTURE
(
   ID        INT NOT NULL AUTO_INCREMENT,

   PRIMARY KEY (ID)
)
engine=innodb; 
```

**PICTURE_HISTORY 表：**

```
CREATE TABLE IF NOT EXISTS PICTURE_HISTORY LIKE HISTORY;

ALTER TABLE PICTURE_HISTORY
ADD FOREIGN KEY (FOREIGNID) REFERENCES PICTURE(ID); 
```

但是，当我这样做时，我得到：

```
Key column 'FOREIGNID' doesn't exist in table 
```

我认为这意味着我必须首先创建`FOREIGNID`，但在许多关于 SO 的示例中，上述内容应该有效。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-29T02:49:53.973

感谢[迈克尔](https://stackoverflow.com/users/541091/michael)指出我的错误。除非该列已经存在，否则我实际上无法创建外键。相反，如果我发出这两个命令，则会创建外键约束：

```
ALTER TABLE PICTURE_HISTORY
ADD COLUMN FOREIGNID INT NOT NULL;

ALTER TABLE PICTURE_HISTORY
ADD FOREIGN KEY (FOREIGNID) REFERENCES PICTURE(ID); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-20T23:33:10.633

您可以使用逗号组合 mysql 的命令，如下所示：

```
ALTER TABLE PICTURE_HISTORY
ADD COLUMN FOREIGNID INT NOT NULL,
ADD FOREIGN KEY (FOREIGNID) REFERENCES PICTURE(ID); 
```

# javascript - FB了解为发送对话框采取的行动

> ID：10369273
> 
> 赞同：1
> 
> 时间：2012-04-29T02:38:52.830
> 
> 标签：javascript, facebook, redirect

我正在编写一个应用程序，它将为 Facebook 提供一个[发送对话框](https://developers.facebook.com/docs/reference/dialogs/send/)，用于奖励用户积分。我想记录是否采取了“发送”操作。所以我认为redirect_uri 可能是一种方法，但是如果用户在重定向中单击取消或发送没有区别。关于如何最好地识别所采取的行动的任何建议？我还想知道他们是发给一位朋友还是 20 位朋友。

# c++ - Windows 安装程序可以像普通应用程序一样执行逻辑吗

> ID：10369277
> 
> 赞同：1
> 
> 时间：2012-04-29T02:40:23.990
> 
> 标签：c++, winapi, batch-file, installation, windows-installer

**Windows 安装程序可以像普通应用程序一样执行逻辑吗？**

例如：我正在创建一个安装程序，它将插件文件安装到 C 驱动器上的第 3 方应用程序的目录中。但如果用户拥有旧版本的 3rd 方应用程序，则目标目录会有所不同。

因此安装程序需要确定 C 盘上的 3rd Party Application 的版本。如果它是新版本，我将插件文件安装到 C://Program Files//3rdPartyApplication//，如果它是旧版本，我安装到 C://3rdPartyApplication//

*那么 Windows 安装程序可以执行逻辑吗？如果不能，它可以运行可以执行此操作的批处理文件吗？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:44:32.167

“安装程序”只是一个常规应用程序，旨在将其内容解压缩到个人硬盘上，并可能执行注册表修改等操作。

例如，如果您使用像 install shield 这样的安装程序，则必须查看该安装程序文档以了解它可以做什么。大多数安装程序应用程序都有某种区域来创建自定义脚本。

您也可以自己构建，这真的不是很难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T02:03:39.203

我想给出一个不同的观点。Windows Installer 是一种声明性域特定编程语言。它不是图灵完备的通用编程语言。它并不像任何其他应用程序一样。它可以通过用通用编程语言（如 C++/C#）编写的自定义操作进行扩展，但它仍应遵循相同的声明性方法，将“如何”做某事与“做什么”分开。

现在回答你问题的第二部分。Windows Installer 内置了搜索功能。阅读有关 AppSearch 标准操作和相关表（AppSearch、Signature、DrLocator、CompLocator、RegLocator）的 MSDN 主题您还可以对组件设置条件，并且可以动态设置目录目标，所以是的，有一些方法可以做您想做的事情.

需要更多信息来准确解释如何做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T09:18:57.123

是的，安装程序可以像常规应用程序一样执行逻辑。从这个角度来看，安装程序是一个常规应用程序。

您如何编写安装程序逻辑取决于您使用的安装程序套件。要检测应用程序是否存在于`C:\Program Files\3rdPartyApplication`或中`C:\3rdPartyApplication`，您可以使用[WiX 工具集](http://wix.sourceforge.net/)[`FileSearch`](http://wix.sourceforge.net/manual-wix3/wix_xsd_filesearch.htm)的元素，查看 Windows 安装程序文档：[*搜索现有应用程序、文件、注册表项或 .ini 文件项*](http://msdn.microsoft.com/ru-ru/library/aa371564.aspx)。[](http://msdn.microsoft.com/ru-ru/library/aa371564.aspx)

 *更复杂的逻辑可以通过[自定义操作](http://wix.sourceforge.net/manual-wix3/wix_xsd_customaction.htm)来实现。[自定义操作}(http://msdn.microsoft.com/en-us/library/aa368066.aspx) 可以用 JScript、VBScript、C/C++（DLL 或 EXE；但 EXE 无法与Windows 安装程序会话）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:09:40.877

是的，Windows Installer 可以像普通应用程序一样执行逻辑。

您可以按照 Alexey 的建议使用 WiX 工具集来完成工作。

您可以使用 FileSearch 元素 ( [http://wix.sourceforge.net/manual-wix3/wix_xsd_filesearch.htm](http://wix.sourceforge.net/manual-wix3/wix_xsd_filesearch.htm) ) 检查文件是否存在或 RegistrySearch 元素 ( [http://wix.sourceforge.net/manual-wix2 /wix_xsd_registrysearch.htm](http://wix.sourceforge.net/manual-wix2/wix_xsd_registrysearch.htm)）以防您想使用注册表项进行检查。

或者，如果搜索不像检查文件或注册表那么简单，自定义操作将允许您编写托管或非托管代码（根据您的偏好）来检查安装了哪个版本的第 3 方应用程序。

根据搜索结果，您可以在运行时更改安装目录。类型 35 自定义操作可让您更改安装目录：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa368093%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368093%28v=vs.85%29.aspx)*

# android - 如果扩展前一个组，扩展 ListView 的 setOnItemLongClickListener 会给出不正确的 itemIndex

> ID：10369281
> 
> 赞同：1
> 
> 时间：2012-04-29T02:42:30.050
> 
> 标签：android

我通过扩展 BaseExpandableListAdapter 来填充扩展列表视图。
ChildView 的代码：

```
public View getChildView(final int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

LayoutInflater in=getLayoutInflater();
convertView=in.inflate(R.layout.details, null);
//set text for various TextViews from ArrayList1 
return convertView;
} 
```

GroupView 的代码：

```
public View getGroupView(final int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
LayoutInflater li= getLayoutInflater();
convertView=li.inflate(R.layout.list, null);
//add data to ArrayList1 and set text for various TextViews
return convertView;
} 
```

如果一个组被展开并且我长按任何后续组，onItemLongClick 方法将获取参数 itemIndex 的（实际索引 + 1）值。因此，我得到 arrayindexoutofbounds 异常。

```
elview.setOnItemLongClickListener(new OnItemLongClickListener() {
public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                final int itemIndex, long arg3) {
Log.e("index selected", itemIndex+"");
return false;
}}); 
```

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T06:00:29.023

我没有看到您为上下文菜单注册适配器...

这是我如何毫无问题地完成它的部分：

**适配器创建**

```
 mAdapter = new MyExpandableListAdapter(mGroupsCursor, getActivity(),
            R.layout.explistlayout,
            R.layout.explistlayout1,
            new String[] { "_id" },
            new int[] { android.R.id.text1 },
            new String[] { child },
            new int[] { android.R.id.text1 });
    lv.setAdapter(mAdapter);
    registerForContextMenu(lv); 
```

**上下文菜单和操作**

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    ExpandableListView.ExpandableListContextMenuInfo info = (ExpandableListView.ExpandableListContextMenuInfo) menuInfo;
    int type = ExpandableListView.getPackedPositionType(info.packedPosition);
    if (type == 1) {
        menu.setHeaderTitle("Event Operations");
        menu.add(0, v.getId(), 0, "Edit Event");
        menu.add(0, v.getId(), 0, "Delete Event");
    }
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    ExpandableListContextMenuInfo info = (ExpandableListContextMenuInfo) item.getMenuInfo();
    if (item.getTitle() == "Edit Event") {
        mRowId = info.id;
        EventAddFragment eventadd = new EventAddFragment();
        getFragmentManager().beginTransaction()
                .replace(R.id.rightpane, eventadd).commit();
    } else if (item.getTitle() == "Delete Event") {
        mDbHelper.deleteEvent(info.id);
        mGroupsCursor.requery();
        return true;
    }
    return super.onContextItemSelected(item);
} 
```

您还可以查看[此 SO question](https://stackoverflow.com/questions/2353074/android-long-click-on-the-child-views-of-a-expandablelistview)以获取更多详细信息。

希望这可以帮助。

# postgresql - Postgresql小写比较数据

> ID：10369284
> 
> 赞同：11
> 
> 时间：2012-04-29T02:43:44.463
> 
> 标签：postgresql, lowercase

我想从 Postgresql 数据库中的一行中获取内容，并将其小写版本与用户输入的小写版本进行比较，以检查它是否存在于数据库中。

我试过：

```
"SELECT LOWER(name) FROM user_names WHERE name LIKE '%$search%' ORDER BY name ASC" 
```

但这使查询根本不起作用。

**编辑**

我正在尝试实现一个自动完成 Jquery UI，如下所示：http: [//jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote) 用于搜索框（用于名称）

使用 javascript 和 php。

**php代码：**

```
$search = ($_GET['term']);
       if (!$con)
        { die('Could not connect: ' . pg_last_error ());}

       else
        {

        $sql = "SELECT name FROM users_table WHERE name LIKE '%$search%' ORDER BY name ASC";
        $result = pg_query($sql);
        $json = '[';
        $first = true;
        while ($row = pg_fetch_array($result))
        {

        if (!$first) { $json .=  ','; } else { $first = false; }
        $json .= '{"value":"'.$row['name'].'"}';
    }
    $json .= ']';
    echo $json;

    exit();

    } 
```

**JavaScript 代码：**

```
 $(document).ready(function()
    {
        $('#auto').autocomplete(
        {
            source: "./file.php",
            minLength: 3

        })

}) 
```

以上所有工作都很好..就像这里的演示一样：http: [//jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote)

我的问题是数据库中的名称以大写形式存储（例如 LORI），当然用户更喜欢在搜索框中插入小写字母来搜索名称（例如 lori）。但由于它以大写形式存储，我需要对其进行转换。

我试过你的建议：

```
$sql = "SELECT LOWER(name) FROM users_table WHERE name ILIKE '%$search%' ORDER BY name ASC"; 
```

然后我得到一个空的下拉列表！很奇怪！

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T02:48:12.783

[谷歌是你的朋友](http://www.google.com.au/search?q=postgresql+like+case-insensitive)：

```
SELECT LOWER(name) FROM user_names 
WHERE name ILIKE '%$search%' ORDER BY name ASC 
```

# sql - 在 SQL 中需要从包含 NULL 值的 2 列中提取值

> ID：10369285
> 
> 赞同：0
> 
> 时间：2012-04-29T02:44:25.877
> 
> 标签：sql

我正在从表中提取记录，条件是

（status_code 不在 'A' 中）或（status_code 不在 'C' 中并且 SNbr 不在 '01'、'02'、'03 中）

两列都可以有重复的值，并且可以包含 NULL 值。

这是表格数据

```
status_code              SNbr
A                        01
A                        NULL
A                        04 
NULL                     NULL
NULL                     01
C                        NULL
C                        01
C                        04
B                        01
B                        NULL 
```

所需的 O/P 是

```
status_code              SNbr
NULL                     NULL
NULL                     01
C                        NULL
C                        04
B                        01
B                        NULL 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T02:52:55.203

```
select * from <tablename> where 
status_code != 'A' or status_code is null or SNbr is null or
(status_code !='C' and SNbr not in ('01','02','03')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T02:52:46.380

[更新]试试这个：

```
DECLARE @table TABLE (status_code varchar(4), snbr varchar(5))
INSERT INTO @table
SELECT 'A','01'
UNION SELECT 'A',NULL
UNION SELECT 'A','04' 
UNION SELECT NULL,NULL
UNION SELECT NULL,'01'
UNION SELECT 'C',NULL
UNION SELECT 'C','01'
UNION SELECT 'C','04'
UNION SELECT 'B','01'
UNION SELECT 'B',NULL

select * from @table where 
(ISNULL(status_code,'') IN ('C') AND ISNULL(SNbr,'') NOT IN ('01','02','03')) OR
(ISNULL(status_code,'') NOT IN ('C') AND ISNULL(status_code,'') != 'A') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T04:30:58.717

问题中条件的措辞具有误导性，因为这两个单独的子句不能通过 OR 连接并且仍然产生所需的输出。问题中显示的示例输出表明需要强制执行所有规则，而不仅仅是一个或另一个。这是 SQL 中 WHERE 子句的样子：

```
SELECT * FROM someTable
WHERE COALESCE( status_code, '' ) != 'A' 
AND
( COALESCE ( status_code, '' ) != 'C' 
  OR COALESCE( SNbr, '' ) NOT IN ( '01', '02', '03' )
)
; 
```

# facebook-graph-api - 来自 facebook api 的 user_id 是唯一的吗？

> ID：10369287
> 
> 赞同：0
> 
> 时间：2012-04-29T02:44:51.767
> 
> 标签：facebook-graph-api

当我有用户在我的网站上注册时，我会存储他们的 user_id，并在整个网站上使用它作为他们是谁的参考。（实际上还没有做只是计划）我想确保这个用户ID对于用户来说是唯一的并且不会改变？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:52:38.770

是的，facebook 中的 user_id 对于每个 facebook 用户都是唯一的。

您可以通过比较多个 facebook 用户帐户的用户 ID 来尝试。

# cakephp - 在我的应用程序中集成 RESTFUL api

> ID：10369288
> 
> 赞同：1
> 
> 时间：2012-04-29T02:44:55.620
> 
> 标签：cakephp, rest, cakephp-2.0

在我的应用程序中集成 RESTFUL api。

我必须在我的新项目中使用宁静的服务。我正在使用 CakePHP 2.0.6

我不想创建一个宁静的服务。我必须使用宁静的服务。

我想知道 CakePhp 中是否有任何现成的组件可用于读取 restful 服务。

我希望该组件通过在后台完成其余工作来根据我的服务为我提供输出。另外，如果组件能够记录它，那么它会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T09:24:28.400

REST API 与其说是一组标准协议，不如说是一个概念，因此没有统一的方式来与不同提供者的 API 交互。[Twitter 有自己的 REST API](https://dev.twitter.com/docs)，而[Facebook 提供了另一个](https://developers.facebook.com/docs/reference/api/)。

大多数大型 Web 服务都提供 PHP 类来简化与 API 的接口。[对于 Twitter，有一个名为TwitterOAuth](https://github.com/abraham/twitteroauth)的第三方库，而 Facebook 提供[了一个 PHP SDK](https://developers.facebook.com/docs/reference/php/)。这些可以在 CakePHP 中作为供应商文件加载。请参阅[我较早的](https://stackoverflow.com/questions/8994514/using-appuses-instead-of-appimport-in-a-cakephp-2-1-plugin)关于加载供应商文件的答案或与 Cake 的 1.3 分支相关的[旧帖子](http://www.gigapromoters.com/blog/2008/01/09/cakephp-vendors-what-are-they-and-why-are-they-used/)，但仍然相关。

一些 Cake 开发人员已经为 Cake 开发了插件，以便与流行的 web 服务进行交互，例如webtechnick[的 Facebook 插件](https://github.com/webtechnick/CakePHP-Facebook-Plugin)。加载供应商包相当于在框架中包含它们，就像您在普通的 PHP 脚本中一样，加载插件有点不同，可能会进一步简化事情（或使它们更抽象）。插件上的 Cake[手册条目](http://book.cakephp.org/2.0/en/plugins.html)有更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T05:01:05.577

我找到了一个 PHP 类，`http://www.phpclasses.org` 它看起来像是处理了大部分 REST API 部分，并且它对我的目的有用。它有很好的示例文件，它将演示如何使用该类。

我已将此类转换为 Cakephp 组件。这是下载课程的 URL。 [http://www.phpclasses.org/package/5480-PHP-Send-Web-services-requests-to-REST-servers.html](http://www.phpclasses.org/package/5480-PHP-Send-Web-services-requests-to-REST-servers.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T09:19:38.897

查看 CakePHP 的 HttpSocket 实用程序。我还没有使用它，但我认为它只是一个用于 cURL 的 API，听起来像你需要的。[http://book.cakephp.org/2.0/en/core-utility-libraries/httpsocket.html](http://book.cakephp.org/2.0/en/core-utility-libraries/httpsocket.html)

# java - 读入逗号分隔的文件列表，输出不带逗号，不迭代

> ID：10369293
> 
> 赞同：1
> 
> 时间：2012-04-29T02:46:40.337
> 
> 标签：java, regex, replace

我正在尝试从以下 txt 文件中删除逗号：

```
abcd,efgh,ijkl
mnop,qrst,uvwx
yzzz,0123,4567
8910 
```

我的代码是这样的：

```
public static ArrayList readFileByLine(ArrayList list, String fileName){
try{
    File file = new File(fileName);
    Scanner reader = new Scanner(file);
    reader.useDelimiter(",");
    while(reader.hasNext()){
      String s = reader.next();
      s= s.trim();
      s= s.replaceAll("," , "");
      list.add(s);
    }
    reader.close();
}
catch(FileNotFoundException e){ System.err.println("Error: " + e.getMessage());}

return list; 
```

}

除非绝对必要，否则我尽量不使用正则表达式，如果您建议我使用正则表达式，请解释它的作用！谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:29:41.857

您的代码运行良好。我认为您遇到了其他问题，我不确定是什么。这是我使用的代码（您的代码进行了一些修改）：

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;

public class Main {
    public static void main(String[] args){
        List<String> list = readFileByLine(new ArrayList<String>(), "/Users/hassan/Library/Containers/com.apple.TextEdit/Data/Desktop/file.text");
        for(String s : list){
            System.out.println(s);
        }
    }

    public static List<String> readFileByLine(ArrayList<String> list, String fileName){
        try{
            File file = new File(fileName);
            Scanner reader = new Scanner(file);
            reader.useDelimiter(",");
            while(reader.hasNext()){
              String s = reader.next();
              s= s.trim();
              s= s.replaceAll("," , "");
              list.add(s);
            }
            reader.close();
        }
        catch(FileNotFoundException e){ System.err.println("Error: " + e.getMessage());}

        return list;
    }
} 
```

此代码有效（试试看！）。我应该提到我使用这段代码的方式，将 ArrayList 作为第一个参数传递是没有用的，因为你可以在`readFileByLine`函数的开头创建一个新的 ArrayList。我不确定您是否这样做，因为您想稍后将字符串重新添加到数组中，所以我不理会它。

# html - HTML 中“名称”属性的有效值

> ID：10369295
> 
> 赞同：12
> 
> 时间：2012-04-29T02:46:48.923
> 
> 标签：html

我使用 PHP 从 HTML 页面获取单选按钮值。我的 HTML 如下所示：

```
<input type="radio" name="1.1" value="yes">
<input type="radio" name="1.1" value="no">

<input type="radio" name="1" value="yes">
<input type="radio" name="1" value="no"> 
```

结果是 $_POST['1'] 返回一个值，但 $_POST['1.1'] 什么也不返回。我检查了 HTML 4 规范，说*name*属性的值仅以字母开头，但 1 不是字母。为什么它会返回而 1.1 没有？还是这里发生了其他的魔法？我使用最新版本的 Chrome。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-29T05:46:17.750

根据 HTML 规则，`name`属性可以具有任何值：它以 CDATA 类型声明。不要将此属性与声明为具有 NAME 类型的属性的引用混淆。参见*[17.4 INPUT 元素，name = cdata [CI]](http://www.w3.org/TR/html4/interact/forms.html#adef-name-INPUT)*。

在 PHP 的使用中`$POST[...]`，需要注意这条 PHP 规则：“变量名中的点和空格转换为下划线。例如`<input name="a.b" />`变成`$_REQUEST["a_b"]`。” 请参阅*[来自外部来源的变量](http://www.php.net/manual/en/language.variables.external.php)*。

所以`$_POST['1']`应该按原样工作并且确实可以工作，但`$_POST['1.1']`你需要编写`$_POST['1_1']`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T02:54:51.037

尝试将句点替换为连字符之类的其他内容。在表单和 PHP 代码中。句点通常用于`.`扩展名中的 a。

当涉及到[GET](https://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol#Request_methods)或[POST](https://en.wikipedia.org/wiki/POST_%28HTTP%29)标头中参数的键名时，您只想使用字母数字字符，通常带有一些特殊字符。例如连字符、下划线等。如果需要，您也可以随时进行 URL 编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T03:00:18.717

你应该用文本而不是数字来命名你的输入项。它们不应包含任何字符，例如`.`、`,`、`!`和`?`。这可能会导致问题。有关提交数据的更多信息，请转到*[PHP 和 HTML 单选按钮](http://www.homeandlearn.co.uk/php/php4p10.html)*

# c++ - 在对象数组中查找最后使用的元素

> ID：10369296
> 
> 赞同：0
> 
> 时间：2012-04-29T02:46:58.013
> 
> 标签：c++, arrays

我有一个`Student`对象数组。我将数组长度设置为 100，但其中没有 100 个有效`Student`对象。我希望能够遍历数组并获取所有有效`Student`对象，然后在到达没有 Student 对象的数组单元格时停止。

我曾尝试`NULL`在最后一个学生之后放入数组单元格，然后检查`if (queriedStudents[i])`以及`if(queriedStudents[i] != NULL)`，但都没有为我工作。

找到数组中已用部分末尾的最佳方法是什么？

```
Student *Welcome::queryStudents(int *queries) {
    int query = 0;
    Student *matchedStudents[100];
    int matchedPos = 0;
    while (queries[query] > 0) {
        for (int i = 0; i < numStudents; i++) {
            if (allStudents[i]->id == queries[query]) {
                matchedStudents[matchedPos] = allStudents[i];
                matchedPos++;
            }
        }

        query++;
    }
    matchedStudents[matchedPos] = NULL;

    return *matchedStudents;
} 
```

我的代码块试图打印出每个`Student`的值：

```
 int i = 0;
        while (i < 100) {
            if (queriedStudents[i]) {
                cout << "ID:\t" << queriedStudents[i]->id << endl;
                cout << "Name:\t" << queriedStudents[i]->name << endl;
                cout << "Addr.:\t" << queriedStudents[i]->address << endl;
                cout << "Phone:\t" << queriedStudents[i]->phone << endl;
            } else {
                i = 100;
            }
            i++;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:27:43.303

你有一个更大的问题。`matchedStudents`您在函数的堆栈上声明数组`queryStudents`。当控制超出该函数时，数组超出范围。如果您稍后尝试使用它（通过它返回的指针，这是数组的第一个元素），那么您正在处理已释放的内存，这几乎肯定会导致未定义的行为。就好像您正在参观自从您上次到那里后已经更换了所有者的房子；不知道发生了什么变化，如果你闭着眼睛四处游荡，你可能会遇到麻烦。

您可以在堆上声明数组：

```
Student **Welcome::queryStudents(int *queries) {
  Student **matchedStudents = new *Student[100];
    ...
  return matchedStudents;
} 
```

或者通过引用传入：

```
void Welcome::queryStudents(int *queries, Student **&matchedStudents) {
    ...
} 
```

无论哪种方式，您都可以解决如何指示有效指针结束的问题。您的方法看起来可行，但请记住，正如@JerryCoffin 指出的那样，`std::vector`是可用的。数组是一种痛苦，而 STL 容器（例如`vector`）是为您处理这些肮脏的细节而设计的。如今，除了教学法之外，使用数组几乎没有任何目的。与它们一起玩，直到您理解这些概念，然后使用基于它们的更高级的容器。

# php - 无法让 .php 输出到浏览器

> ID：10369299
> 
> 赞同：3
> 
> 时间：2012-04-29T02:47:22.370
> 
> 标签：php

我对编码完全陌生，我目前的任务只是使用“此处文档”块。我为该程序提供的所有代码是：

```
<?php
$firstphpstring = <<<ONTOTHENEXTONE 
I have now coded my first block to be displayed
in my very first web page.I am excited to see what the 
next several weeks have in stored.
ONTOTHENEXTONE;

echo $firstphpstring;
?> 
```

但我不断收到以下错误：

> 解析错误：语法错误，第 2 行 > C:\wamp\www\php_foothill\Week2Lab_CIS052N_heredoc_gettype.php 中的意外 T_SL

我正在使用 Windows 7、WAMPServer 2.2，并将 .php 文件放在 C:\wamp\www 的文件夹中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T02:50:03.630

去掉后面的空格`<<<ONTOTHENEXTONE`。

# python - Python 排列

> ID：10369300
> 
> 赞同：3
> 
> 时间：2012-04-29T02:47:50.733
> 
> 标签：python

我将如何在 python 中完成以下操作：

```
first = ['John', 'David', 'Sarah']
last = ['Smith', 'Jones']

combined = ['John Smith', 'John Jones', 'David Smith', 'David Jones', 'Sarah Smith', 'Sarah Jones'] 
```

有没有组合所有排列的方法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T02:54:57.303

[`itertools.product`](http://docs.python.org/library/itertools.html#itertools.product)

```
import itertools
combined = [f + ' ' + l for f, l in itertools.product(first, last)] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T02:56:28.707

不确定是否有更优雅的解决方案，但这应该可行：

`[x + " " + y for x in first for y in last]`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T03:42:53.160

`product`from`itertools`会做的伎俩。

```
product(first, last) 
```

将返回一个包含 和 的所有可能组合的生成`first`器`last`。之后，您需要做的就是连接名字和姓氏。您可以在一个表达式中做到这一点：

```
combined = [" ".join(pair) for pair in product(first, last)] 
```

也可以通过字符串连接来做到这一点：

```
combined = [pair[0] + " " + pair[1] for pair in product(first, last)] 
```

但是，这种方法较慢，因为在解释器中进行了连接。始终建议使用该`"".join()`方法，因为此代码是在 C 中执行的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T02:59:33.003

我不知道有任何 python 实用程序方法，但是以下将实现相同的效果：

```
def permutations(first, second):
  result = []
  for i in range(len(first)):
    for j in range(len(second)):
      result.append(first[i] + ' ' + second[j])
  return result 
```

# c - opendir：打开的文件太多

> ID：10369309
> 
> 赞同：1
> 
> 时间：2012-04-29T02:50:13.880
> 
> 标签：c, linux, file, gnu, opendir

我编写此代码以`/home/keep`使用绝对路径打印所有文件：

```
#include <dirent.h>
#include <sys/stat.h>
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>

void catDIR(const char *re_path);

int main(int argc, char *argv[])
{
    char *top_path = "/home/keep";
    catDIR(top_path);
    return 0;
}

void catDIR(const char *re_path)
{
    DIR *dp;
    struct stat file_info;
    struct dirent *entry;

    if ((dp = opendir(re_path)) == NULL)
    {
        perror("opendir");
        return;
    }
    while (entry = readdir(dp))
    {
        if (entry->d_name[0] == '.')
            continue;

        //get Absolute path
        char next_path[PATH_MAX];
        strcpy(next_path, re_path);
        strcat(next_path, "/");
        strcat(next_path, entry->d_name);

        lstat(next_path, &file_info);

        if (S_ISDIR(file_info.st_mode))
        {
            catDIR(next_path);
        }
        else
        {
            printf("%s/%s\n", re_path, entry->d_name);
        }
    }
    free(dp);
    free(entry);
} 
```

当我运行它时。

不仅打印一些文件的路径，还打印一些错误信息：

`opendir: Too many open files`

我读了`man 3 opendir`，然后意识到，我打开了太多文件。

我想知道，怎么关闭？以及如何纠正这个程序

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T02:57:20.513

`closedir`当您完成对目录内容的迭代时，您可能应该使用它。

此外，您可能希望将目录列表读入数组，关闭目录，然后在数组上递归。这可能有助于遍历非常深的目录结构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:05:47.377

跑

> cat /proc/sys/fs/file-nr

它给了什么？
输出格式为：（分配的文件处理程序的数量）-（已分配但未使用的文件处理程序的数量）-（文件处理程序的最大数量）

如果您获得更多已分配但未使用的文件处理程序，则意味着您必须关闭@Matthew Iselin 提到的目录。
您还可以更改系统限制。

有关更改系统限制的更多信息[可以在这里找到](http://goo.gl/GU0DA "可以在这里找到")。

# xml - Simplify xml node using if-else condition by XSLT

> ID：10369330
> 
> 赞同：0
> 
> 时间：2012-04-29T02:54:09.033
> 
> 标签：xml, xslt

This is the input file:

```
<root> 
        <node id="N1">
            <fruit id="small_fruit" action="create">
                <orange id="1" action="create">
                    <attribute>
                        <color>yellow</color>
                    </attribute>
                </orange>
            </fruit>

            <fruit id="small_fruit" action="create">
                <orange id="1" action="destroy">
                    <attribute>
                        <color>green</color>
                    </attribute>
                </orange>
            </fruit>            
        </node>

        <node id="N2">
            <dog id="small_dog">    
                <poodle id="1" action="create">
                    <attribute>
                        <color>Yellow</color>    
                    </attribute>
                </poodle>       

                <terrier id="2" action="create">
                    <attribute>
                        <color>White</color>    
                    </attribute>
                </terrier>

                <poodle id="1" action="change">
                    <attribute>
                        <color>Brown</color>        
                    </attribute>
                </poodle>

                <terrier id="2" action="destroy">
                    <attribute>
                        <color>Blue</color>    
                    </attribute>
                </terrier>
            </dog>

            <dog id="small_dog" action="create">               
                <poodle id="1" action="destroy">
                    <attribute>
                        <color>Black</color>        
                    </attribute>
                </poodle>

                <terrier id="2" action="change">
                    <attribute>
                        <color>White</color>        
                    </attribute>
                </terrier>
                <terrier id="2" action="change">
                    <attribute>
                        <color>Grey</color>        
                    </attribute>
                </terrier>
            </dog>

            <dog id="large_dog">                
                <poodle id="1" action="create">
                    <attribute>
                        <color>Red</color>
                    </attribute>
                </poodle>
            </dog>
        </node>
    </root> 
```

This is the expected output:

```
<root> 
<node id="N1">
    <fruit id="small_fruit" action="create">

    </fruit>

    <fruit id="small_fruit" action="create">
        <orange id="1" action="destroy">
            <attribute>
                <color>green</color>
            </attribute>
        </orange>
    </fruit>            
</node>

<node id="N2">
    <dog id="small_dog">                           

    </dog>

    <dog id="small_dog" action="create">               
        <poodle id="1" action="destroy">
            <attribute>
                <color>Black</color>        
            </attribute>
        </poodle>

        <terrier id="2" action="change">
            <attribute>
                <color>White</color>        
            </attribute>
        </terrier>
        <terrier id="2" action="change">
            <attribute>
                <color>Grey</color>        
            </attribute>
        </terrier>
    </dog>

    <dog id="large_dog">                
        <poodle id="1" action="create">
            <attribute>
                <color>Red</color>
            </attribute>
        </poodle>
     </dog>
</node>
</root> 
```

The rule:

1.  if a node with the method 'destroy' appears at the end of the same parent (a fruit or an animal) we remove all the previous nodes.

2.  if NOT, we remove all the nodes including the one with 'destroy' method and leave the rest unchanged.

To simplify:

*   xxx/destroy -> destroy
*   xxx/destroy/aaa/bbb -> aaa/bbb

In summary we check the **node that has the same id and node name** (orange-id:1 or terrier-id:2 or poodle-id:1) **and it must be under the same parent** ex. (fruit or dog)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T10:20:11.603

I couldn't quite match up your expected results, with how you described the rules you wanted. However, from comparing your expected output with the input, I think this is the condition you may need:

```
<xsl:if test="not(following::*[../@id = current()/../@id][@action='destroy'])"> 
```

So, given the following XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:template match="node/*/*">
      <xsl:if test="not(following::*[../@id = current()/../@id][@action='destroy'])">
         <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
         </xsl:copy>
      </xsl:if>
   </xsl:template>

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

When applied on your current input XML, the following is output, which matches you current expected output:

```
<root>
   <node id="N1">
      <fruit id="small_fruit" action="create"/>
      <fruit id="small_fruit" action="create">
         <orange id="1" action="destroy">
            <attribute>
               <color>green</color>
            </attribute>
         </orange>
      </fruit>
   </node>
   <node id="N2">
      <dog id="small_dog"/>
      <dog id="small_dog" action="create">
         <poodle id="1" action="destroy">
            <attribute>
               <color>Black</color>
            </attribute>
         </poodle>
         <terrier id="2" action="change">
            <attribute>
               <color>White</color>
            </attribute>
         </terrier>
         <terrier id="2" action="change">
            <attribute>
               <color>Grey</color>
            </attribute>
         </terrier>
      </dog>
      <dog id="large_dog">
         <poodle id="1" action="create">
            <attribute>
               <color>Red</color>
            </attribute>
         </poodle>
      </dog>
   </node>
</root> 
```

# jquery - 在 IE8 及更早版本上支持 css3 旋转和缩放

> ID：10369337
> 
> 赞同：1
> 
> 时间：2012-04-29T02:56:05.050
> 
> 标签：jquery, internet-explorer, css, transform

我想在 IE8 上进行旋转和缩放，我使用了这个[库](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)，但它在 IE8 上中断并返回错误

```
 'undefined' is null or not an object and pints to line 62 of this script. 
```

是否有任何解决方案可以在 jquery 中进行缩放和旋转而不是使用转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:37:03.603

我认为您正在寻找的是[http://code.google.com/p/jqueryrotate/](http://code.google.com/p/jqueryrotate/)。[您可以在http://code.google.com/p/jqueryrotate/wiki/Examples](http://code.google.com/p/jqueryrotate/wiki/Examples)查看示例。JqueryRotate 在 IE6+ 中工作。

# javascript - 正则表达式匹配所有字符直到下一个匹配

> ID：10369341
> 
> 赞同：5
> 
> 时间：2012-04-29T02:57:55.177
> 
> 标签：javascript, regex, parsing

我正在解析一个简单模式的多次重复文本。文本采用剧本的格式，如下所示：

```
SAMPSON
I mean, an we be in choler, we'll draw.

GREGORY
Ay, while you live, draw your neck out o' the collar. 
```

我目前正在使用 pattern `([A-Z0-9\s]+)\s*\:?\s*[\r\n](.+)[\r\n]{2}`，它可以正常工作（下面的解释），除非角色的语音中有换行符。发生这种情况时，角色的名字被成功捕获，但只捕获语音的第一行。

打开单行模式（包括换行符`.`）只会创建一个巨大的匹配。

当它找到下一个字符名称并结束匹配时，我如何告诉`(.+)`它停止？
我正在单独迭代每个匹配项（JavaScript），因此该名称必须可用于下一个匹配项。

**理想情况下，我将能够匹配所有字符，直到整个模式被重复。**

* * *

模式解释：

第一组匹配一个字符的名称（允许大写字母、数字和空格），（尾随冒号和空格可选）。
第二组（角色的讲话）从一个新行开始并捕获任何字符（有问题的是，换行符和它们之后的字符除外）。
模式在空行之后结束（并重新开始）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:13:58.390

考虑采取不同的方向。您真的想在包含名称的任何行上拆分更大的对话。您仍然可以使用正则表达式来执行此操作（将正则表达式替换为与“扬声器”行匹配的任何内容）：

```
results = "Insert script here".split(/^([A-Z]+)$/) 
```

在符合标准的实现中，您的示例文本将最终出现在一个数组中，如下所示：

```
results[0] = ""
results[1] = "SAMPSON"      
results[2] = "I mean, an we be in choler, we'll draw.            
"
results[3] = "GREGORY"      
results[4] = "Ay, while you live, draw your neck out o' the collar. " 
```

需要注意的是，大多数浏览器在此处的标准上参差不齐。您可以使用库[XRegExp](http://xregexp.com/cross_browser/)来获得跨平台行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:02:50.630

好的，我做了一些修补，发现了一些有用的东西。它不是超级优雅，但它可以完成工作。

```
([A-Z0-9\s]+)\s*\:?\s*[\r\n]((.+[\r\n]?.*)+)[\r\n]{2} 
```

我修改了最后一个捕获组，以允许无限重复任意文本、新行和更多任意文本。由于不允许连续两个换行符，因此该模式在演讲后结束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T16:43:03.320

我终于设法让它只匹配你想要的，即
- 字符的名称，允许空格和冒号
- 以及可选的带换行符的多行，与人关联的文本

您需要`findAll`使用此正则表达式 - 它区分大小写：

```
((?:[A-Z]{2,}\s*:?\s*)+)\s+((?![A-Z]{2,}\s*:?\s*).+?[.?!]\s*)+ 
```

解释：

*   `((?:[A-Z]{2,}\s*:?\s*)+)`- 第一组捕获人的大写名称 - 它将匹配“GREGOR”以及“MANFRED THE GREATEST:”
*   `\s+`- 至少一个空格字符
    然后至少重复一次：

*   `(?![A-Z]{2,}\s*:?\s*)`- 向前看以检查下一个文本是否不是大写字符名称
*   `.+?[.?!]\s*`- 匹配所有内容，直到找到一个结束句子的字符`[.?!]`和可选的空格

# c# - WinRT 替换 System.Environment.TickCount

> ID：10369346
> 
> 赞同：10
> 
> 时间：2012-04-29T02:59:17.047
> 
> 标签：c#, timer, windows-8, windows-runtime

System.Environment.TickCount 的 WinRT 替代品是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T22:29:35.640

它应该可用，因为它[不是问题](http://msdn.microsoft.com/en-us/library/windows/apps/br205762.aspx)。但它不是，我猜是 [TypeForwardedTo] 挂断，因为 GetTickCount() 不在白名单上，而且 .NET 从未采用 GetTickCount64。标准回退工作正常，您可以使用 pinvoke 调用本机 Windows 函数。我验证了使用它的程序通过了 Windows 应用程序认证工具包测试。

```
 [System.Runtime.InteropServices.DllImport("kernel32.dll")]
    private static extern long GetTickCount64(); 
```

请注意，它返回一个 long，而不是 int。如果这在 C# 中很重要，您可以简单地转换为 int 来截断（但不是 vb.net，只是对返回类型撒谎）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T17:07:07.727

Windows 8 Windows 商店应用程序现在似乎支持 System.Environment.TickCount。

# php - 从 HTML 表格行列中提取数据

> ID：10369350
> 
> 赞同：1
> 
> 时间：2012-04-29T02:59:59.997
> 
> 标签：php, regex, dom, xpath

如何从 PHP 中的 HTML 表中提取数据。数据是这种格式

**表格1**

```
<tr><td class="body" valign="top"><a href="example"><b>DATA</b></a></td><td class="body" valign="top">Data_Text</td></tr> 
```

**表 2**

```
<tr><th><div id="Data">Data</div></th><td>Data_Text_1</td><td>Data_Text_2</td></tr> 
```

**表3**

```
<tr><td width="120"><a href="example" target="_blank">DATA</a></td><td>Data_Text</td></tr> 
```

我想从**3 个表中获取****Data** & **Data_Text 或 (Data_Text_1 & Data_Text_2)**。 我用过

 **```
$html = file_get_contents($link);
$doc = new DOMDocument();
@$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
$nodes  = $xpath->query('//td[]');
$nodes2 = $xpath->query('//td[]'); 
```

但它不能显示任何数据！

*我会在后天悬赏这个问题*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:39:31.540

使用[simplehtmldom.php](http://simplehtmldom.sourceforge.net/) ...

```
<?php

include 'simple_html_dom.php';

$html = file_get_html('thetable.html');

$rows = $html->find('tr');
foreach($rows as $row) {
    echo $row->plaintext;
}

?> 
```

或使用'td'...

```
<?php

include 'simple_html_dom.php';

$html = file_get_html('thetable.html');

$cells = $html->find('td');
foreach($cells as $cell) {
    echo $cell->plaintext;
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T03:59:51.577

给定一个`xpathTables.html`这样的 HTML 文档：

```
<html>
  <body>
    <table>
      <tbody>
        <tr><td class="body" valign="top"><a href="example"><b>DATA</b></a></td><td class="body" valign="top">Data_Text</td></tr>
      </tbody> 
    </table>

    <table>
      <tbody>
        <tr><th><div id="Data">Data</div></th><td>Data_Text_1</td><td>Data_Text_2</td></tr>
      </tbody>
    </table>

    <table>
      <tbody>
        <tr><td width="120"><a href="example" target="_blank">DATA</a></td><td>Data_Text</td></tr>
      </tbody>
    </table>
  </body>
</html> 
```

这个 PHP 脚本：

```
<?php

$link = "xpathTables.html";

$html = file_get_contents($link);
$doc = new DOMDocument();
$doc->loadHTML($html);
$xpath = new DOMXPath($doc);
$tables = $doc->getElementsByTagName('table');

$nodes  = $xpath->query('.//tbody/tr/td/a/b', $tables->item(0));
var_dump($nodes->item(0)->nodeValue);
$nodes  = $xpath->query('.//tbody/tr/td[@class="body"]', $tables->item(0));
var_dump($nodes->item(1)->nodeValue);

$nodes  = $xpath->query('.//tbody/tr/th/div[@id="Data"]', $tables->item(1));
var_dump($nodes->item(0)->nodeValue);
$nodes  = $xpath->query('.//tbody/tr/td', $tables->item(1));
var_dump($nodes->item(0)->nodeValue);
$nodes  = $xpath->query('.//tbody/tr/td', $tables->item(1));
var_dump($nodes->item(1)->nodeValue);

$nodes  = $xpath->query('.//tbody/tr/td/a', $tables->item(2));
var_dump($nodes->item(0)->nodeValue);
$nodes  = $xpath->query('.//tbody/tr/td', $tables->item(2));
var_dump($nodes->item(1)->nodeValue); 
```

你得到这个输出：

> string(4) "DATA"
> string(9) "Data_Text"
> string(4) "Data"
> string(11) "Data_Text_1"
> string(11) "Data_Text_2"
> string(4) "DATA"
> string(9) "Data_Text"

我没有很好地理解你的问题，所以我做了这个例子来显示你的表的所有文本节点。如果您只对其中一些节点感兴趣，您应该选择完成这项工作的 XPath 查询。

我包含了标签`table`和`tbody`，只是为了使示例更像 HTML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T04:39:28.843

**使用这个单一的 XPath 表达式**：

```
/*/table/tr//text()[normalize-space()] 
```

这将选择任何文本节点，它不仅包含 odf 空白字符，而且是作为文档顶部元素的子元素的子元素的任何`tr`元素的后代。`table`

**基于 XSLT 的验证**：

```
 <xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:copy-of select=
   "/*/table/tr//text()[normalize-space()]"/>

. . . . . . .
  <xsl:for-each select=
    "/*/table/tr//text()[normalize-space()]">
    "<xsl:copy-of select="."/>"
  </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<html>
 <table>
    <tr>
        <td class="body" valign="top">
            <a href="example">
                <b>DATA</b>
            </a>
        </td>
        <td class="body" valign="top">Data_Text</td>
    </tr>
 </table>

 <table>
    <tr>
        <th>
            <div id="Data">Data</div>
        </th>
        <td>Data_Text_1</td>
        <td>Data_Text_2</td>
    </tr>
 </table>

 <table>
    <tr>
        <td width="120">
            <a href="example" target="_blank">DATA</a>
        </td>
        <td>Data_Text</td>
    </tr>
 </table>
</html> 
```

**对 XPath 表达式求值并输出选定的文本节点**（两次——一次作为求值的结果，它们出现连接，第二次每个选定的节点在单独的行上输出并用引号括起来）：

```
DATAData_TextDataData_Text_1Data_Text_2DATAData_Text 
```

. . . . . . .

```
"DATA"

"Data_Text"

"Data"

"Data_Text_1"

"Data_Text_2"

"DATA"

"Data_Text" 
```**

# java - Appengine 上的 Twilio 客户端库

> ID：10369353
> 
> 赞同：4
> 
> 时间：2012-04-29T03:00:47.990
> 
> 标签：java, google-app-engine, https, twilio

我正在尝试在 appengine 上使用 Twilio 的 java 客户端库。它似乎没有按原样运行，需要对客户端库进行一些更改。我进行了以下更改，但不起作用：

```
public TwilioRestClient(String accountSid, String authToken, String endpoint) {

    validateAccountSid(accountSid);
    validateAuthToken(authToken);

    this.accountSid = accountSid;
    this.authToken = authToken;

    if ((endpoint != null) && (!endpoint.equals(""))) {
        this.endpoint = endpoint;
    }

/* origial code
 *  ThreadSafeClientConnManager connMgr = new ThreadSafeClientConnManager();
 *      connMgr.setDefaultMaxPerRoute(10);
 *      this.httpclient = new DefaultHttpClient(connMgr);
 */

 //my changes start HERE
    SchemeRegistry schemeRegistry = new SchemeRegistry(); 
    schemeRegistry.register(new Scheme("https", SSLSocketFactory.getSocketFactory(), 443)); 
    BasicHttpParams params = new BasicHttpParams(); 

    ThreadSafeClientConnManager connMgr = new  ThreadSafeClientConnManager(params,schemeRegistry);
    //my changes END HERE

    this.httpclient = new DefaultHttpClient();

    httpclient.getParams().setParameter("http.protocol.version",
            HttpVersion.HTTP_1_1);
    httpclient.getParams().setParameter("http.socket.timeout",
            new Integer(CONNECTION_TIMEOUT));
    httpclient.getParams().setParameter("http.connection.timeout",
            new Integer(CONNECTION_TIMEOUT));
    httpclient.getParams().setParameter("http.protocol.content-charset",
            "UTF-8");

    this.authAccount = new Account(this);
    this.authAccount.setSid(this.accountSid);
    this.authAccount.setAuthToken(this.authToken);

} 
```

这使它可以编译和运行，但是我得到了这个异常： 原因：org.apache.http.HttpException：Scheme 'https' 未注册。提出请求时。该请求位于此（未更改的）代码中：

```
public TwilioRestResponse request(String path, String method,
        Map<String, String> vars) throws TwilioRestException {

    HttpUriRequest request = setupRequest(path, method, vars);

    HttpResponse response;
    try {
        response = httpclient.execute(request);
        HttpEntity entity = response.getEntity();

        Header[] contentTypeHeaders = response.getHeaders("Content-Type");
        String responseBody = "";

        if (entity != null) {
            responseBody = EntityUtils.toString(entity);
        }

        StatusLine status = response.getStatusLine();
        int statusCode = status.getStatusCode();

        TwilioRestResponse restResponse = new TwilioRestResponse(request
                .getURI().toString(), responseBody, statusCode);

        // For now we only set the first content type seen
        for (Header h : contentTypeHeaders) {
            restResponse.setContentType(h.getValue());
            break;
        }

        return restResponse;

    } catch (ClientProtocolException e1) {
        throw new RuntimeException(e1);
    } catch (IOException e1) {
        throw new RuntimeException(e1);
    }
} 
```

有没有人使用过带有twilio的java appengine？我知道这只是一个使用基本身份验证的带有 XML 或 JSON 的 RESTful 请求。我希望使用客户端库而不是花时间自己编写请求编码......有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T23:49:57.377

最新的 Twilio Java 客户端库依赖于无法与 appengine (Apache HttpClient) 配合使用的外部库。Twilio 的原始 java 客户端代码只是使用 java.net.HttpURLConnection 并且没有外部依赖项。

我已将这个较旧的 Twilio java 客户端代码添加到[twilio4j](http://www.twilio4j.org)（修复了几个错误）。我在生产中使用它。

TODO：应该为 appengine 友好的官方 twilio-java 项目提供补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:36:07.957

基本问题是 Twilio-Java 使用[Apache HttpClient](http://hc.apache.org/httpcomponents-client-ga/index.html)连接到 Twilio 的服务器，并且开箱即用，它与 Google AppEngine 不兼容。

可以[在 Google AppEngine 上使用 Apache HttpClient](http://esxx.blogspot.com/2009/06/using-apaches-httpclient-on-google-app.html)。您必须[获取源代码](https://github.com/twilio/twilio-java)并根据这些说明修改 Twilio-Java 客户端库。

# python - 替换类似于文件系统的文件结构中的文件？

> ID：10369354
> 
> 赞同：1
> 
> 时间：2012-04-29T03:00:53.433
> 
> 标签：python, file, filesystems, file-structure

我正在编写一个程序来提取文件并将其添加到 xbox 360 的 STFS 文件中。STFS 结构是一个迷你文件系统，它有哈希表、文件表等。

提取文件很简单。我有文件的起始块和文件中的块数量，所以我只需要找到块偏移量，读取块长度，并将其作为文件发送出去。但是，当我需要替换或删除文件时会发生什么？我通常在 Windows 和计算机上读过，文件实际上并没有被删除，它们只是从文件表中删除，并在其他需要空间时被覆盖。那么，当我在写一个文件时，我如何找到一个足够大的未使用的块序列来容纳它呢？这些块的长度为 0x1000 字节，并用空字节填充剩余空间，因此一切都很好，但我想不出一种有效的方法来找到适合我要添加的文件的未使用的块范围。

我目前的计划是重写删除或添加文件的所有内容，这样我就没有大量未使用的空间，我无法弄清楚如何覆盖。是否有关于 NTFS 或 FAT32 等文件系统的很好的介绍，我可以阅读这些介绍，不需要几天时间就能理解，并且包含编写基本文件管理器所需的信息？

参考结构： http: [//free60.org/STFS](http://free60.org/STFS)

编辑：在第二个，我会为表中的每个文件创建一个范围列表。即基于大小的起始偏移量和结束偏移量。在寻找插入文件的开放范围时，我会从 0 开始并检查每个范围的结束开始或结束是否在要插入的文件所需的范围内。如果开始或结束在范围内，我将继续移动到另一个文件的结束偏移的末尾。这比我最初的想法要好，但似乎仍然效率低下。我必须对文件表中的每个文件进行多次比较。

# ruby-on-rails - form_for 在rails中构建，有人能推断出什么？

> ID：10369355
> 
> 赞同：0
> 
> 时间：2012-04-29T03:01:47.337
> 
> 标签：ruby-on-rails, form-for

当这样的代码运行时，我有一个普遍的问题：

```
<%= form_for(current_user.favorite_relationships.find_by_lesson_id(@lesson),
             html: {method: :delete},
             remote: true) do |f| %>
             <div><%= f.hidden_field :lesson_id %></div>
  <%= f.submit "Unfavorite", class: "btn btn-large" %>
<% end %> 
```

特别是第一行代码。我通常会看到某种形式的实例变量而不是

```
current_user.favorite_relationships.find_by_lesson_id 
```

我可以假设这将进入`FavoriteRelationship`控制器的销毁操作。还有其他人可以从上面的表格中推断出什么吗？比如什么将可用或在销毁操作中传递？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:08:50.813

据推测，控制器`Lesson`通过变量向视图提供了一个对象`@lesson`。您当前的用户，一个`User`对象，大概是`has_many :favorite_relationships`，这又`belongs_to :lesson`意味着`favorite_relationships`表中有一个名为的字段`lesson_id`。

Rails 为模型中包含的字段构建“神奇”查找器方法。如果一个模型有一个`lesson_id`字段，Rails 会提供一个`find_by_lesson_id`帮助器。Rails 足够聪明，可以`@lesson.id`在您将实际的课程对象而不是整数传递给它时进行提取。

最终结果是一个类型的对象`FavoriteRelationship`被传递到`form_for`帮助器中。这与在控制器中找到对象并通过（例如）`@favorite_relationship`变量将其传递给视图没有什么不同。

> 什么将可用或在销毁操作中传递？

在对收藏关系的销毁路由的后续请求中，控制器唯一可用的是要销毁的对象的 ID。您将能够通过`params[:id]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:11:01.020

1.  销毁操作是通过 AJAX（存在`remote: true`）
2.  通常，主要逻辑/代码被重构为控制器或辅助方法。

`@favorites = current_user.favorite_relationships.find_by_lesson_id(@lesson)`IMO 应放置在控制器内部而不是视图中，并且视图应位于`@favourites`部件中`form_for`。这就是您对实例变量进行观察的原因

# python - Python无法在模块中找到属性和奇怪的行为

> ID：10369357
> 
> 赞同：0
> 
> 时间：2012-04-29T03:02:21.840
> 
> 标签：python, module, attributes, sublimetext

好吧，假设我有 3 个文件，我们称它们为 a、b、c。我正在使用 sublime 来运行和构建这些脚本。

```
a imports and uses method from b
b imports and uses method from c
c imports and uses method from a 
```

使用 ctrl+b Sublime 2 将构建并运行我的代码。

使用激活**的**选项卡构建==>

```
Error: module b has no attribute 'x' 
```

**使用b**选项卡进行构建==>

```
Error: Module c has no attribute 'y' 
```

**使用c**选项卡进行构建==>

```
Success 
```

这是特定于 Sublime 的问题还是我的代码有问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:50:38.870

在进行循环导入时，Python 中有一个棘手的极端情况。如果你使用 import 语句的“import ...”形式，像这样：

```
# a.py
import b
def method_a():
    print "Method A called"
def call_b_from_a():
    b.method_b() 
```

```
# b.py
import c
def method_b():
    print "Method B called"
def call_c_from_b():
    c.method_c() 
```

```
# c.py
import a
def method_c():
    print "Method C called"
def call_a_from_c():
    a.method_a() 
```

然后你可以做这样的事情：

```
>>> import a
>>> a.call_b_from_a()
Method B called 
```

对于 b 和 c 也是如此；简而言之，一切正常。但是，如果您使用 import 语句的“from ... import ...”形式，如下所示：

```
# a.py
from b import method_b
def method_a():
    print "Method A called"
def call_b_from_a():
    method_b() 
```

```
# b.py
from c import method_c
def method_b():
    print "Method B called"
def call_c_from_b():
    method_c() 
```

```
# c.py
from a import method_a
def method_c():
    print "Method C called"
def call_a_from_c():
    method_a() 
```

然后你会得到这样的错误：

```
>>> import a
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "a.py", line 2, in <module>
    from b import method_b
  File "b.py", line 2, in <module>
    from c import method_c
      File "c.py", line 2, in <module>
    from a import method_a
ImportError: cannot import name method_a 
```

简而言之，可以使用循环导入，但它们确实会造成一些极端情况。在没有实际看到您的代码的情况下，我猜这可能与此有关。

为了将来参考，如果您发布您正在使用的实际代码，您几乎总能得到更好的答案。

# svn - 从 Linux、Win7 Tortoise 客户端到 Windows AD 的最终问题 w/LDAP 身份验证

> ID：10369362
> 
> 赞同：0
> 
> 时间：2012-04-29T03:02:58.163
> 
> 标签：svn, tortoisesvn, windows-authentication, sasl

我已经成功地配置了基于 PC 的 TortoiseSVN 和基于 Linux 的测试 Subversion 服务器，以执行基于 LDAP 的用户身份验证，返回到真正的 Windows Server 2008 R2 ldap 服务器。做了一些工作，特别是在克服我的域名的 FQDN 中的多个配置文件中的字母换位时:)，但它正在工作。

我有一个问题，我希望这个世界上有更多的人为我验证 - 最特别的是，即使这个 LDAP 设置正在工作，密码也会通过 PLAIN 机制在 SVN 和 saslauthd 之间以明文形式通过网络发送。目前，我的阅读和实验表明没有办法解决这个问题——这是正确的，还是我忽略了一些重要的部分？

提前感谢您的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T14:26:56.210

您应该使用 SSL 设置您的服务器（即通过 https，而不是 http 访问它）。这样你的密码也被加密了。

注意：Subversion 使用的默认 DAV 库 (neon) 对非 SSL 连接禁用了 SSPI（域身份验证的 Windows 实现）身份验证，它仅适用于 SSL 连接 - 正是出于这个原因。

# c# - 如何从 WPF MVVM 中的多个 ViewModel 将 UserControl 添加到 MainView 的 Canvas

> ID：10369366
> 
> 赞同：0
> 
> 时间：2012-04-29T03:04:01.877
> 
> 标签：c#, wpf, mvvm, view, viewmodel

我有一个带有 Canvas 的 MainWindowView(Window)，我在其中添加了我的 Views(UserControls)。

MainWindow 中的 Canvas 是从 Canvas 派生的自定义 Canvas，因此可以将其中的 Views 移动到这里和那里，并且可以将其带到前台或发送回。

我通过将命令绑定到按钮将视图添加到 MainWindowView 的画布。因此，当我单击按钮时，会在画布中添加一个视图。

但是，我的问题是，我想从已经在 MainViewModel 画布中的视图的 ViewModel 中将另一个视图添加到 MainViewModel 的同一画布中。

由于我用来绑定 Canvas 的 ObservableCollection 在 MainViewModel 中，因此我只能从 MainViewModel 添加 View。

当我尝试使用其他 ViewModel 中的 MainViewModel 时，我必须为其创建一个新对象，这使得 Canvas 中的旧视图被新视图替换。

有没有办法解决这个问题。如果不是，那么使用 MVVM 框架有什么用。请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:20:28.027

使用 Calibrum Micro，它将在这方面为您提供帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T13:13:41.980

我做对了吗：您的控件的 DataContext 与 Window 的不同，您需要从那里访问它吗？

基本上可以通过设计避免这种情况（使用依赖注入将 MainViewModel 实例放入命令中），但实际上有一种 WPF/MVVM 友好的方法可以解决这个问题：

使用命令将控件添加到 MainViewModels ObservableCollection

```
<Button Command="{Binding Path=CreateViewCommand}" CommandParameter="{Binding}" /> 
```

从您的控件（您称为视图）中，您必须使用祖先绑定：

```
<Button Command="{Binding Path=DataContext.CreateViewCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"
    CommandParameter="{Binding Path=DataContext, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type Window}}}"/> 
```

在您的命令中，您可以将参数转换为其原始类型 (MainViewModel) 并根据需要使用它。

# c++ - 我的计算两个动态数组乘积的函数不起作用

> ID：10369367
> 
> 赞同：0
> 
> 时间：2012-04-29T03:04:42.960
> 
> 标签：c++, arrays, dynamic, matrix, product

我写了一个函数来计算两个动态数组的乘积。我的函数给了我随机数而不是预期的结果。我有两个初始化动态矩阵 A 和 B 的函数。现在，当我尝试计算动态矩阵 C 使得 C=A*B 时，我的函数没有显示正确的结果。我检查了我的代码，似乎我在某个地方做错了，但我无法弄清楚问题到底出在哪里。下面，我粘贴了计算 C=A*B 的函数。我使用 Dev-C++ 用 C++ 编写了它。您的帮助将不胜感激。

```
void CalculateDynamicMatC( double *DynMatA, double *DynMatB, int n)
{
   int i, j, k, m=10; 
   double *DynMatC=new double [m*m] ;

   for(i=0; i<n; i++)
    for(j=0; j<n; j++)
     for( *DynMatC=k=0; k<n; k++)    
      *DynMatC = *(DynMatA)*(*DynMatB);  //where the problem is!!!

    for(int r=0; r<n; r++, cout<<endl)
      for(int c=0; c<n; c++)
        cout << setw(5) << *(DynMatC+n*r+c);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:10:10.813

*   您没有`i,j,k`在标记为“问题所在”的行上使用索引。
*   索引将取决于您的存储方式`DynMatA`和`DynMatB`（按行或按列）。
*   你不是在计算一个总和（就像你在做矩阵乘积时应该做的那样）。
*   当你的函数结束时，你也会有内存泄漏。
*   您应该使用更新的编译器。

# wpf - 调用在 xaml 中分配的 ICommand

> ID：10369370
> 
> 赞同：0
> 
> 时间：2012-04-29T03:05:29.777
> 
> 标签：wpf, silverlight, xaml, c#-4.0

我在视图中有一些重复的代码，它们是拖放操作的一部分。我在 ViewModelBase 上有一个 ICommand，它处理模型上所需的拖放操作。由于我试图避免将 UI 事件参数传递给 ViewModel，因此我需要创建自己的参数类型以传递给 DropCommand。所以基本上我在 View 后面的代码看起来是这样的：

```
// get data required for ordering operation
var args = MyHelperClass.OnDropCompleted(a); // where a is an argument from UI drop event

// execute command
if (args != null) ViewModel.DropCommand.Execute(args); 
```

这工作正常，但是，此代码在每个视图上重复。我的想法是将 DropCommand 添加到我的自定义 UI 控件中，这样我就可以在 xaml 中分配一个 ICommand 绑定

```
DropCommand={Binding DropSommand} <-- binds to ViewModel's DropCommand 
```

现在，我可以在我的自定义 UI 控件中处理 drop 事件，并在 viewmodel 上调用命令并将计算的参数传递给它。

问题：

1) 只有在 xaml 中设置了 DropCommand 的绑定时，我才想订阅 Drop 操作。我如何检查是否设置了此绑定？

2) 创建要传递给 ViewModel 的 ICommand 的参数后，我想从代码中调用此命令。我怎样才能做到这一点？

编辑：我也有以下绑定场景：

```
DropCommand={Binding DataContext.DropCommand, elementName=window} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:17:07.697

在自定义控件的代码隐藏中的 drop 事件处理程序中：

```
var bindingExpression = GetBindingExpression(DropCommandProperty);
if  (bindingExpression != null) 
{
    var command = (ICommand)bindingExpression.ParentBinding.Source;
    command.Execute(/* your special argument here */);
} 
```

a 的存在`BindingExpression`告诉您某些内容已绑定，您可以通过'属性获取`Source`该绑定的 。`BindingExpression``ParentBinding`

# php - 如何删除 SimpleXMLElement？

> ID：10369373
> 
> 赞同：1
> 
> 时间：2012-04-29T03:06:11.360
> 
> 标签：php, simplexml, xmldocument, xmldom

我之前发布了一个关于如何计算属性值的问题。即使我认为我无法删除具有此属性的元素。我尝试搜索，但仍然找不到合适的工作答案。我真的希望你能帮助我。这是我的代码。我通过 xml 文档查找属性值，然后尝试删除具有此属性值的节点的父节点。

```
 $xml = new SimpleXMLElement($xmlfile,0,true);

        $results = $xml->xpath("/presets/preset");

        foreach ($results as $result) {
        foreach ($result->children() as $second_gen) {
            if($second_gen->getName()=='name'){
                foreach($second_gen->attributes() as $a => $b) {
                    if($b==$preset_name){
                        echo($b);
                            echo($preset_name);
                            unset($result);
                        }

                }
            }

        }
        }
        $xml->asXML(); 
```

作为执行此代码的结果，我没有收到任何错误，并且我已经正确`$b`并`$preset_name`回显了。但是节点没有被删除。它仍然存在于文档中。

我的 xml 文件如下所示：

```
 <presets>
 <preset>
 <name code="default">Default</name>
  <createdBy>p</createdBy>
   <icons>q</icons>
 </preset>
 <preset>
   <name code="new_preset">New Preset</name>
    <createdBy>x</createdBy>
   <icons>y</icons>
 </preset>
 ...
 </presets> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T01:58:55.073

我在不使用 SimpleXMLElement 类的情况下找到了一个简单的答案。看看这个我的完整答案。 [如何在php中获取xml节点的属性值？](https://stackoverflow.com/questions/10347715/how-can-i-get-the-value-of-attribute-in-of-a-xml-node-in-php/10377658#10377658)

# java - 在 Java 中洗牌

> ID：10369375
> 
> 赞同：3
> 
> 时间：2012-04-29T03:06:28.760
> 
> 标签：java, poker

我还有另一个必须做的练习，我真的需要帮助。我什至不知道我的 isFlush 方法是否有效，因为我的牌组似乎没有洗牌和发牌，我完全被卡住了。有人可以帮助我或为我指明正确的方向吗？这是练习：

习题 12.5 这个习题的目的是编写一个程序，生成随机的扑克牌并对其进行分类，以便我们可以估计各种扑克牌的概率。如果您不玩扑克，请不要担心；我会告诉你你需要知道的一切。

一种。作为热身，编写一个程序，使用 shuffleDeck 和 subdeck 生成并打印四张随机扑克手，每手有五张牌。你有得到什么好东西吗？以下是可能的扑克牌，按价值递增顺序排列： 对：两张相同等级的牌 两对：两对相同等级的牌 三类：三张相同等级的牌 顺子：五张等级在同花顺：五张同花色 满堂：三张同花，两张同四张：四张同花顺 同花顺：五张同花顺

湾。编写一个名为 isFlush 的方法，该方法将 Deck 作为参数并返回一个布尔值，指示手牌是否包含同花。

C。编写一个名为 isThreeKind 的方法，该方法接受一只手并返回一个布尔值，指示该手是否包含同类之三。

d。编写一个生成几千手牌的循环，并检查它们是否包含同花或三手同花。估计得到其中一只手的概率。

e. 编写测试其他牌手的方法。有些比其他更容易。您可能会发现编写一些可用于多个测试的通用辅助方法很有用。

F。在一些扑克游戏中，玩家每人得到七张牌，他们与七张中最好的五张组成一手牌。修改您的程序以生成七张牌并重新计算概率。

这是我的代码：

```
public class Poker {

    public static void main(String[] args) {
        Deck deck = new Deck ();
        Deck.dealDeck (deck);
    }

}
class Card {

    int suit, rank;
    int index = 0;
    //Card[] deck = new Card [52];

    public Card () {
        this.suit = 0; this.rank = 0;
    }

    public Card (int suit, int rank) {
        this.suit = suit; this.rank = rank;
    }

    public static void printCard (Card c) {
        String[] suits = { "Clubs", "Diamonds", "Hearts", "Spades" };
        String[] ranks = { "narf", "Ace", "2", "3", "4", "5", "6",
        "7", "8", "9", "10", "Jack", "Queen", "King" };
        System.out.println (ranks[c.rank] + " of " + suits[c.suit]);
    }
}

class Deck {

    Card[] cards;

    public Deck (int n) {
        cards = new Card[n];
    }

    public Deck () {
        cards = new Card[52];
        int index = 0;
        for (int suit = 0; suit <= 3; suit++) {
            for (int rank = 1; rank <= 13; rank++) {
                cards[index] = new Card (suit, rank);
                index++;
            }
        }
    }

    public static Deck dealDeck(Deck deck){
        shuffle(deck);
        Deck hand1 = subDeck(deck, 0, 4);
        Deck hand2 = subDeck(deck, 5, 9);
        Deck hand3 = subDeck(deck, 10, 14);
        Deck hand4 = subDeck(deck, 15, 19);
        Deck pack = subDeck(deck, 20, 51);
        return deck;
    }

    public static Deck shuffle(Deck deck){
        for (int i = 0; i < 52; i++){
            int rand = (int)(Math.random()*(i + 1));
            **Deck[] temp = deck[i];
            deck[i] = deck[rand];
            deck[rand] = deck[temp];**
        }
        return deck;
    }

    public static Deck subDeck(Deck deck, int low, int high) {
        Deck sub = new Deck (high-low+1);
        for (int i = 0; i < sub.cards.length; i++) {
            sub.cards[i] = deck.cards[low+i];
        }
        return sub;
    }

    public static void printDeck (Deck hand) {
        for (int i = 0; i < hand.cards.length; i++) {
            Card.printCard (hand.cards[i]);
        }
    }

    public static boolean isFlush(Card[] x, int y) {
        int count = 0;
        for(int index = 0; index < y; index++){
            boolean comp = compareIfFlush(x[index], x[index + 1]);
            if (comp = true){
                count++;
            }
        }
        if (count >= 5){
            System.out.println("Congratulations! You have a flush!");
            return true;
        }
        else{
            System.out.println("Sorry, you do not have a flush.");
            return false;
        }
    }

    public static boolean compareIfFlush(Card c1, Card c2){
        if (c1.suit != c2.suit){
            return false;
        }
        return true;
    }
} 
```

我把我遇到麻烦的部分加粗。我收到错误消息：“需要数组，但找到了 exercise125poker.Deck”。我需要解决这个错误，因为我不知道如何修复它，所以我被卡住了。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:19:18.490

您的`Deck`类型不是数组类型。它里面有一个数组，但你不能像使用它一样使用它——这就是产生错误的原因。考虑一下这个......如果你`Deck`有两个`Card[52]`s 怎么办？那么如果你打电话给`deck[25]`它就没有任何意义。通常，当您将数组隐藏在对象中时，您会希望使用访问器方法公开数组，例如`public Card get(int i)`从内部数组中检索元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:21:49.143

为了解决您的问题，请将您突出显示的代码行更改为：

```
Card temp = deck.cards[i];
deck.cards[i] = deck.cards[rand];
deck.cards[rand] = temp; 
```

代码有2个问题。

*   第一个是 Deck 不是数组，您想访问其中的卡片数组（因此添加`.cards`到数组中）。
*   此外， Deck[] 期望得到一组牌组，而不是你试图给它的东西，一个`Card`.

希望这可以帮助，

李

# map - 如何转换HashMap 参数到地图 我想调用 JasperFillManager.fillReport(filePath+".jasper", param, con); 其中 param 应该接受类型 Map。有什么解决办法

> ID：10369384
> 
> 赞同：2
> 
> 时间：2012-04-29T03:09:57.023
> 
> 标签：map, jasper-reports, hashmap, type-conversion

我想调用 JasperFillManager.fillReport(filePath+".jasper", param, con); 其中 param 应该接受类型 Map。有什么解决办法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:21:58.457

只需使用将另一个地图作为参数的构造函数：

```
Map<String, Object> map2 = new HashMap<String, Object>(map); 
```

看这个例子：

```
import java.util.HashMap;
import java.util.Map;

public class Test5 {

    public static void main(String[] args) {
        HashMap<String, Integer> map = new HashMap<String, Integer>();
        map.put("1", 1);
        Map<String, Object> map2 = new HashMap<String, Object>(map);
        // etc...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T23:26:46.937

如果您有 a`HashMap<String,Integer>`并且需要将其转换为 a `HashMap<String,Object>`，那么以下应该可以工作：

```
HashMap<String, Object> objParams = new HashMap<String, Object>();
for (String key : intParams.keyValues()) {
    Integer intValue = intParams.get(key);
    objParams.put(key, intValue);
} 
```

你`intParams`的`HashMap<String,Integer>`.

那里可能有一些错别字，因为这纯粹是即兴表演。

然后你可以通过`objParams`to `fillReport`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T03:50:30.803

如果在 HashMap 中不指定值类型，Java 会隐式地给它一个对象类型。在这种情况下，您只需将原始地图声明为

HashMap objParams = new HashMap();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-07T19:31:26.657

你的 .java 文件

```
String url="jdbc:mysql://127.0.0.1:3306/database";
String username="root";
String password="";
String database="database";

Class.forName("com.mysql.jdbc.Driver").newInstance();
Connection con = DriverManager.getConnection(url, username, password);
JasperReport jc=JasperCompileManager.compileReport("F:\\pro\\report.jrxml"); //give your report.jrxml file path

//create hashmap to send data to report.key should same to report parameter
HashMap para = new HashMap();
para .put("name", "chamod");
para .put("email", "chamodck@gmail.com");

JasperPrint print = JasperFillManager.fillReport(jc,para,new JREmptyDataSource());
JasperViewer.viewReport(print);
con.close(); 
```

您的 report.jrxml 文件文本字段应该是这样的

```
<textFieldExpression class="java.lang.String"><![CDATA[$P{name}]]></textFieldExpression>
<textFieldExpression class="java.lang.String"><![CDATA[$P{email}]]></textFieldExpression> 
```

# c++ - 如何在 C++ 中保存大于 64 位的整数？

> ID：10369385
> 
> 赞同：1
> 
> 时间：2012-04-29T03:10:02.800
> 
> 标签：c++, integer, bitwise-operators, bitwise-and

我想存储长度大于 64 位的整数。随着每个条目添加到应用程序中，每个整数的位数可以达到数百万。然后对于 64 个这样的整数（等长），必须执行按位与操作。

那么，什么是最佳的 C++ 数据结构以使操作具有时间效率？早些时候我考虑过它的向量，因为它可以动态增加长度。其他选择是使用 std:bitset。

但我不确定如何使用这两种方法执行按位与运算，以便以最省时的方式完成。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:16:04.797

[GNU Multiprecision Library](http://gmplib.org/)是一个很好的任意精度整数库。它很可能会针对您的编译器/CPU 的具体细节进行大量优化，因此我会首先使用它，如果速度不够快，请推出您自己的特定实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:43:37.583

在获取大数据时为向量重新分配内存是相当昂贵的，所以我会定义

```
struct int_node{
    bitset<256> holder; 
    int_node *next_node;
} 
```

我认为这种方法可以节省内存管理的时间并节省一些按位运算的周期。

# php - 向数据库添加新值，没有错误但不输入

> ID：10369387
> 
> 赞同：0
> 
> 时间：2012-04-29T03:10:05.727
> 
> 标签：php, mysql

当团队名称不在数据库中时，如果不忽略它，我想输入它。但是我没有收到任何错误，我看到的只是回显语句，但它没有输入数据库。数据库是 MySQL，表名是 2012FallTeamstats 我有一个 team_id 列，它是自动递增的赢输和百分比字段。（表中共 4 个）

```
mysql_query("SELECT teamname FROM 2012FallTeamstats WHERE teamname = '$teamH'"); 
if (mysql_affected_rows() == 0) {
    mysql_query("INSERT INTO 2012FallTeamstats (teamname) VALUES ('$teamH')");
    echo "New: <strong>".stripslashes($teamH)."</strong> (home team) inserted into the database.<br>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:19:07.890

尝试 mysql_num_rows() 而不是 mysql_affected_rows。

像这样的代码。

```
$result_team =  mysql_query(.........); (your code) 
```

然后

```
if(mysql_num_rows($result_team) == 0)
{
//insert command
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T03:16:38.227

如果你剪切并粘贴打印出来的 SQL 并从命令行输入 MySQL 会发生什么？我怀疑您可能需要将表中的额外字段添加到您的 SQL 中，但是如果您运行现有的 SQL，您会看到该语句是否存在问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T03:16:48.900

您没有从查询中得到结果：

**注意：** `$result=`

加`mysql_num_rows()`&& `quoting column`_`or die(mysql_error());`

```
$result = mysql_query("SELECT `teamname` FROM `2012FallTeamstats` WHERE teamname = '$teamH'"); 
if (mysql_num_rows($result) == 0) {
    mysql_query("INSERT INTO `2012FallTeamstats` (teamname) VALUES ('$teamH')")or die(mysql_error());
    echo "New: <strong>".stripslashes($teamH)."</strong> (home team) inserted into the database.<br>";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T03:17:35.690

您的第二条语句可能没有被调用，因为 mysql_affected_rows() 没有为您提供 select 语句的计数 - 该函数仅适用于您的 CRUD 操作。尝试用 mysql_num_rows() 替换它

# sql - 在 SQL Server 中创建用户定义函数以转换日期

> ID：10369389
> 
> 赞同：4
> 
> 时间：2012-04-29T03:10:24.517
> 
> 标签：sql, sql-server, tsql

我知道如何在 SQL Server (T-SQL) 中转换为日期，但如何创建 UDF 以便每次在代码中调用它？

示例 1：下面的代码会将这个 20120428 格式化为 04/28/2012

```
SELECT CONVERT(CHAR(10), CONVERT(DATE, TEST_DATE), 101) AS MY_DATE
FROM
MEMBER
WHERE ISDATE(TEST_DATE) <> 0 
```

示例 2：下面的代码会将这个 20120428 格式化为 2012-04-28

```
SELECT CONVERT(DATE, TEST_DATE) AS MY_DATE
FROM
MEMBER
WHERE ISDATE(TEST_DATE) <> 0 
```

感谢您的输入！

盖伊

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T03:14:22.680

对于第二个示例，您可以这样做：

```
CREATE FUNCTION dbo.ConvertDate(@d CHAR(10))
RETURNS DATE
AS
BEGIN
    RETURN (SELECT CONVERT(DATE, @d));
END
GO 
```

但更灵活的方法可能是：

```
CREATE FUNCTION dbo.ConvertRegional
(
  @d CHAR(10),
  @style TINYINT
)
RETURNS CHAR(10)
AS
BEGIN
    RETURN (SELECT CONVERT(CHAR(10), CONVERT(DATE, @d), @style));
END
GO

DECLARE @d CHAR(10);
SELECT @d = '20120428';

SELECT 
 dbo.ConvertDate(@d),
 dbo.ConvertRegional(@d, 101),
 dbo.ConvertRegional(@d, 103),
 dbo.ConvertRegional(@d, 120); 
```

结果：

```
----------  ----------  ----------  ----------
2012-04-28  04/28/2012  28/04/2012  2012-04-28 
```

如果您不想继续从源表中过滤掉错误的非日期（在 WHERE 子句中保留 ISDATE() 应该可以防止函数必须处理这些行），您可以通过这种方式更改函数以避免错误，如果 NULL 可以作为替代：

```
CREATE FUNCTION dbo.ConvertRegional
(
  @d CHAR(10),
  @style TINYINT
)
RETURNS CHAR(10)
AS
BEGIN
    RETURN (SELECT CASE WHEN ISDATE(@d) = 1 THEN
      CONVERT(CHAR(10), CONVERT(DATE, @d), @style)
      END);
END
GO 
```

在 SQL Server 2012 中，您可以改为执行此操作，无需编写自己的 CASE 即可执行相同的操作：

```
CREATE FUNCTION dbo.ConvertRegional
(
  @d CHAR(10),
  @style TINYINT
)
RETURNS CHAR(10)
AS
BEGIN
    RETURN (SELECT CONVERT(CHAR(10), TRY_CONVERT(DATE, @d), @style));
END
GO 
```

(In fact in SQL Server 2012 you can also use FORMAT() so that you don't have to memorize the style numbers, but since I don't know what version you're using I'll leave that for another day.)

All that said, other than saving a few keystrokes in your queries, this encapsulation is actually going to make your queries perform worse (depending on where they are used). For simple conversions like this it is much better to just perform them inline in most cases.

# haskell - 与 Haskell 类型推断混淆

> ID：10369392
> 
> 赞同：5
> 
> 时间：2012-04-29T03:11:19.350
> 
> 标签：haskell, type-inference

我不明白为什么以下功能有效：

```
isLongerThanN :: Integral n => n -> [a] -> Bool
isLongerThanN n xs = length xs > fromIntegral n 
```

但以下没有：

```
isLongerThanN' :: Integral n => n -> [a] -> Bool
isLongerThanN' n xs = length xs > n 
```

引发错误

```
Could not deduce (n ~ Int)
    from the context (Integral n)
      bound by the type signature for
                 isLongerThanN' :: Integral n => n -> [a] -> Bool
      at blah.hs:140:1-35
      `n' is a rigid type variable bound by
          the type signature for
            isLongerThanN' :: Integral n => n -> [a] -> Bool
          at blah.hs:140:1
    In the second argument of `(>)', namely `n'
    In the expression: length xs > n
    In an equation for `isLongerThanN'':
        isLongerThanN' n xs = length xs > n 
```

（我可能误解了）

如果有的话，我希望它是相反的，因为**fromIntegral**有效地扩大了变量 n 的类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T03:24:06.667

考虑不起作用的表达式

```
isLongerThanN' :: Integral n => n -> [a] -> Bool
isLongerThanN' n xs = length xs > n 
```

`n`可以是任何整数-y 类型，因此可以传递`Integer`or`Word`或`Int`. `(>)`有类型`Ord a => a -> a -> Bool`，所以它的左操作数和右操作数必须是相同的类型。`length xs`返回一个`Int`所以这个类型必须是那个。但是，`n`可以是 any `Integral`，不一定是`Int`，所以我们需要某种方式来允许`n`转换为`Int`。这就是`fromIntegral`它的作用（事实上它也允许`n`是 any`Num`基本上是无关紧要的）。

我们可以将工作版本扩展为如下所示：

```
toInt :: Integral n => n -> Int
toInt = fromIntegral

isLongerThanN :: Integral n => n -> [a] -> Bool
isLongerThanN n xs = length xs > toInt n 
```

这更清楚地表明我们正在使用一个专门的`fromIntegral`.

（请注意，这`isLongerThanN n xs = fromIntegral (length xs) > n`也有效，因为它允许 的结果`length`与 的类型匹配`n`。）

# python - 需要一个 python 模块来提取文本文档

> ID：10369393
> 
> 赞同：19
> 
> 时间：2012-04-29T03:11:21.557
> 
> 标签：python, module, preprocessor, nlp, stemming

我需要一个好的 python 模块来在预处理阶段提取文本文档。

我找到了这个

[http://pypi.python.org/pypi/PyStemmer/1.0.1](http://pypi.python.org/pypi/PyStemmer/1.0.1)

但我在提供的链接中找不到文档。

我有人知道在哪里可以找到文档或任何其他好的词干算法，请帮忙。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-29T03:15:23.110

您可能想尝试[NLTK](http://www.nltk.org)

```
>>> from nltk import PorterStemmer
>>> PorterStemmer().stem('complications') 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-02T16:58:31.853

这里讨论的所有这些词干分析器都是算法词干分析器，因此它们总是会产生意想不到的结果，例如

```
In [3]: from nltk.stem.porter import *

In [4]: stemmer = PorterStemmer()

In [5]: stemmer.stem('identified')
Out[5]: u'identifi'

In [6]: stemmer.stem('nonsensical')
Out[6]: u'nonsens' 
```

要正确获取词根，需要一个基于字典的词干分析器，例如 Hunspell Stemmer。下面是它的 python[实现](https://pypi.python.org/pypi/hunspell)。示例代码在这里

```
>>> import hunspell
>>> hobj = hunspell.HunSpell('/usr/share/myspell/en_US.dic', '/usr/share/myspell/en_US.aff')
>>> hobj.spell('spookie')
False
>>> hobj.suggest('spookie')
['spookier', 'spookiness', 'spooky', 'spook', 'spoonbill']
>>> hobj.spell('spooky')
True
>>> hobj.analyze('linked')
[' st:link fl:D']
>>> hobj.stem('linked')
['link'] 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-29T06:50:53.207

Python 词干提取模块实现了各种词干提取算法，如 Porter、Porter2、Paice-Husk 和 Lovins。 [http://pypi.python.org/pypi/stemming/1.0](http://pypi.python.org/pypi/stemming/1.0)

```
 >> from stemming.porter2 import stem
    >> stem("factionally")
    faction 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-18T09:34:56.537

主题建模包附带了一个 Porter Stemmer 算法[`gensim`：](https://radimrehurek.com/gensim/)

```
>>> from gensim import parsing
>>> gensim.parsing.stem_text("trying writing nonsense")
'try write nonsens' 
```

PorterStemmer 是在`gensim`.

附注：我可以想象（无需进一步参考）大多数与文本挖掘相关的模块都有自己的实现，用于简单的预处理过程，如 Porter 的词干提取、空格删除和停用词删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-11T18:42:53.140

PyStemmer 是 Snowball 词干提取库的 Python 接口。

文档可以在这里找到： [https ://github.com/snowballstem/pystemmer/blob/master/docs/quickstart.txt](https://github.com/snowballstem/pystemmer/blob/master/docs/quickstart.txt) [https://github.com/snowballstem/pystemmer/blob/master/docs/quickstart_python3.txt](https://github.com/snowballstem/pystemmer/blob/master/docs/quickstart_python3.txt)

# sql - 这个使用条件的 case 表达式有什么问题？

> ID：10369395
> 
> 赞同：1
> 
> 时间：2012-04-29T03:12:00.777
> 
> 标签：sql, sql-server-2008

我试图在我的查询中的 CASE WHEN 中执行类似的操作，但它没有使用 AND 部分，它表示它的语法错误，它也不会使用 &&。我将不胜感激任何帮助，因为我不是 SQL 专家。

```
 Total =
               CASE Payment.ID
                    WHEN 1 THEN  mytable.Total
                    WHEN 4 AND trans.Amount IS NULL THEN mytable.Total
                    WHEN 4 AND trans.Amount IS NOT NULL THEN mytable.Total - trans.Amount
                    ELSE '0'
               END, 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T03:22:46.570

这是一种方法。将表达式更改为类似这样。

*脚本*：

```
Total = (CASE 
            WHEN Payment.ID = 1
                THEN  mytable.Total
            WHEN Payment.ID = 4 
                AND trans.Amount IS NULL 
                    THEN mytable.Total
            WHEN Payment.ID = 4 
                AND trans.Amount IS NOT NULL 
                    THEN mytable.Total - trans.Amount
            ELSE '0'
        END), 
```

CASE 表达式有两种类型，即`Simple`和`Searched`。您不能将 Simple 和 Searched 组合在同一个表达式中。

***简单***：

```
CASE input
    WHEN 1 THEN 'a'
    WHEN 2 THEN 'b'
    WHEN 3 THEN 'c'
    ELSE ''
END 
```

***搜索**-`Example 1`*：以最简单的形式。

```
CASE 
    WHEN input = 1 THEN 'a'
    WHEN input = 2 THEN 'b'
    WHEN input = 3 THEN 'c'
    ELSE ''
END 
```

***搜索**-`Example 2`*：涉及多个列。您可以在每个 WHEN 语句中添加多个列。

```
CASE 
    WHEN input = 1 AND second_column = 2 THEN 'a'
    WHEN input = 2 AND third_column  = 3 THEN 'b'
    WHEN input = 3 AND (second_column = 4 OR third_column = 6) THEN 'c'
    ELSE ''
END 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T03:27:29.963

我认为这是表达相同查询的一种更简单的方法：

```
Total = CASE Payment.ID
  WHEN 1 THEN myTable.Total
  WHEN 4 THEN myTable.Total - COALESCE(trans.Amount, 0)
  ELSE 0
END, 
```

我们只需要一个 for `Payment.ID`= 4 的条件，因为只有两种可能的结果（我们要么减，要么不减`trans.Amount`，我们可以使用`COALESCE`(or `ISNULL`) 来简化它）。当然还有其他的表达方式，各有千秋。如果 myTable.Total 实际上是一个更复杂的表达式，那么它可能更有效，至少在击键方面，只提及一次该表达式，您可以通过稍微调整逻辑来做到这一点：

```
Total = CASE WHEN Payment.ID IN (1,4)
  THEN myTable.Total - CASE WHEN Payment.ID = 4 THEN
    COALESCE(trans.Amount, 0) ELSE 0 END
  ELSE 0
END, 
```

与原始代码最接近的有效语法是：

```
Total = CASE 
  WHEN Payment.ID = 1 THEN 
    myTable.Total
  WHEN Payment.ID = 4 AND trans.Amount IS NULL THEN 
    myTable.Total
  WHEN Payment.ID = 4 AND trans.Amount IS NOT NULL NULL THEN
    mytable.Total - trans.Amount
  ELSE
    0
END, 
```

但在这种情况下，你有*很多*重复，你提到一个表达三遍。在某些情况下，这可能会损害性能（想象一下，如果该表达式的计算成本很高，例如子查询或 UDF 调用，并且查询逻辑导致它被计算多次）。有时引擎会做引擎会做的事情，不管你多么想超越它，但如果你不小心，你肯定会把它引向错误的道路。

关键是要理解这`CASE`是一个返回单个值的表达式。许多人来自其他语言并认为它是一个可用于控制流的语句。

# sql-server - 如何使用 Web 服务更新 ASP.NET 中的 TextBox 控件？

> ID：10369396
> 
> 赞同：0
> 
> 时间：2012-04-29T03:12:05.890
> 
> 标签：sql-server, ado.net, asmx, webmethod

我有一个网络表单，我需要在其中使用唯一 ID 添加、更新、删除和读取。到目前为止，我已经设法轻松地添加、更新和删除功能。

但是现在我无法让我的读取功能正常工作（了解我有一个包含四个文本字段的网络表单；ID、FIRSTNAME、SURNAME 和 ADDRESS）。基本上，当先前创建的 ID（使用添加按钮）输入到文本字段并单击读取按钮时，它应该根据输入的 ID 使用存储的条目更新其他 3 个文本字段。

这是我在网络表单上的背后代码（cs.）

```
protected void cmdRead_Click(object sender, EventArgs e)
{
   // Create a reference to the Web service
   DbWebService.WebService1 proxy = new DbWebService.WebService1();

   // Create a person details object to send to the Web service.
   string ADDRESS;
   string SURNAME;
   string FIRSTNAME;
   string ID;

   ADDRESS = txtAddress.Text;
   SURNAME = txtSurname.Text;
   FIRSTNAME = txtFirstname.Text;
   ID = txtID.Text;

   // Attempt to store in the Web service
   bool rsp = proxy.ReadPerson(int.Parse(ID), FIRSTNAME, SURNAME, ADDRESS);

   // Inform the user
   if (rsp)
   {
       lblOutcome.Text = "Successfully read data.";

       txtFirstname.Text = FIRSTNAME;
       txtSurname.Text = SURNAME;
       txtAddress.Text = ADDRESS;
   }
   else
   {
       lblOutcome.Text = "Failed to read data! Select a previously created ID!";
   }
} 
```

这是我在网络服务上的网络功能（这是 SQL Server Express 数据库所在的位置）

```
[WebMethod]
public bool ReadPerson(int ID, string FIRSTNAME, string SURNAME, string ADDRESS)
{
   // In case of failure failure first
   bool rtn = false;

   // Connect to the Database
   SqlConnection connection = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename='|DataDirectory|\Database.mdf';Integrated Security=True;User Instance=True");

   // Open the connection
   connection.Open();

   // Prepare an SQL Command
   SqlCommand command = new SqlCommand(String.Format("SELECT FIRSTNAME, SURNAME, ADDRESS FROM PersonalDetails WHERE ID = '{0}'", ID), connection);

   // Execute the SQL command and get a data reader.
   SqlDataReader reader = command.ExecuteReader();

   // Instruct the reader to read the first record.
   if (reader.Read())
   {
      // A record exists, thus the return value is updated
      FIRSTNAME = (string)reader["FIRSTNAME"];
      SURNAME = (string)reader["SURNAME"];
      ADDRESS = (string)reader["ADDRESS"];

      rtn = true;
   }

   // Close the connection
   connection.Close();

   // Return the result.
   return (rtn); 
```

}

现在的问题是，当我单击读取时，我收到一条成功消息（使用您在后面的代码中看到的标签）但字段没有更新，我认为这是因为 ( `rtn = true;`) 语句。因此，我认为这样的事情可能会奏效：

```
rtn = (bool)reader["ADDRESS"]; 
```

但是，有了这个，我得到一个指定的强制转换无效，所以我认为 bool 在这种情况下可能不起作用，我认为如果我使用字符串而不是它可能会起作用，但是我如何转换，我认为 rtn 需要一个值给读者吧？？

基本上，我只是在寻找一种可以更新 Web 表单中的文本字段的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:42:52.880

您的代码有几个问题。最明显的是您的代码永远无法从数据库中返回数据。您正在将`FIRSTNAME`等发送*到*Web 服务 - 您没有*从*Web 服务返回它们。

没有理由让`bool`服务返回来告诉您它是否成功。如果服务失败，让服务抛出异常。相反，您应该从数据库中返回字段作为服务的返回。

在服务中：

```
public class Person
{
    public string FIRSTNAME {get;set;}
    public string SURNAME {get;set;}
    public string ADDRESS {get;set;}
}

[WebMethod]        
public Person ReadPerson(int ID)        
{        
    // ...
    if (reader.Read()) 
    { 
        // A record exists, thus return the value
        Person p = new Person();
        p.FIRSTNAME = (string)reader["FIRSTNAME"]; 
        p.SURNAME = (string)reader["SURNAME"]; 
        p.ADDRESS = (string)reader["ADDRESS"]; 

        rtn = p;
   } 

    connection.Close();          

    return rtn; 
} 
```

此外，除非别无选择，否则不应使用 WebMethod 或 ASMX Web 服务。ASMX 是一种遗留技术，仅用于向后兼容。它不应该用于新的开发。您应该改用 WCF。

* * *

您的代码的其他问题在下面得到解决：

```
[WebMethod]
public Person ReadPerson(int id)
{
    using (
        var connection =
            new SqlConnection(
                @"Data Source=.\SQLEXPRESS;
        AttachDbFilename='|DataDirectory|\Database.mdf';
        Integrated Security=True;
        User Instance=True")
        )
    {
        connection.Open();

        using (
            var command =
                new SqlCommand(@"
SELECT FIRSTNAME, SURNAME, ADDRESS 
FROM PersonalDetails 
WHERE ID = @id",
                    connection))
        {
            var idParameter =
                command.Parameters.Add(
                    "@id", SqlDbType.Int);
            idParameter.Value = id;

            using (var reader = command.ExecuteReader())
            {
                if (!reader.Read())
                {
                    return null;
                }

                return new Person
                            {
                                Firstname =
                                    (string)
                                    reader["FIRSTNAME"],
                                Surname =
                                    (string)
                                    reader["SURNAME"],
                                Address =
                                    (string)
                                    reader["ADDRESS"]
                            };
            }
        }
    }
} 
```

主要问题是`SqlConnection`,`SqlCommand`和`SqlDataReader`all 需要在`using`块内实例化。这确保无论是否抛出异常，对象都被处理（关闭）。

其次，你不应该养成通过字符串操作来构建查询的习惯；甚至不使用 String.Format。这使您容易受到“SQL 注入”攻击。使用参数可以解决这个问题。请参阅 MSDN 中的“[命令和参数](http://msdn.microsoft.com/en-us/library/ms254953.aspx)”。

最后一个小问题：我建议你改掉对明显陈述发表评论的习惯。例如，不需要注释`Open`打开与数据库的连接或`return`返回值。

# objective-c - 加密消息，然后在 Objective-C 中对其进行解码

> ID：10369398
> 
> 赞同：1
> 
> 时间：2012-04-29T03:12:42.457
> 
> 标签：objective-c, xcode, encoding, cryptography

我想不出更好的方式来描述它，所以就在这里。

我正在开发一个程序，非常简单，你输入一个你想要编码的消息，它把它变成一个编码的消息，比如把'easy'翻译成'gcua'（实现通过将字母表中的每个字母向前移动两个）

然后，接收端的人可以将其粘贴到程序中，并将其带回原始文本。我显然在想一些比将字母上移两个或其他更复杂的事情，但是，我离题了。

我真的有一些.. 非常基本的代码。我遇到的问题是将消息的每个字母分解以应用编码，然后将其重新组合在一起。

我不是要程序，我更要问的是如何达到能够对消息进行编码的程度。（例如，将字符串转换为可以编码的格式）。它并不打算详细说明，只是非常简单，直截了当。

这是一个基本大纲（感谢帮助解决问题的人）：

```
int main (int argc, const char * argv[]) {
    @autoreleasepool {

        char choice, yes = 'y', no = 'n', buf[1024];

        NSString *plainText, *encrypted, *decoded;

        NSLog(@"Encode (Y) or Decode (N)");
        scanf("%c", &choice);
        choice = tolower(choice);

        if (choice == yes) {

            scanf("%1024s", buf);
            plainText = [NSString stringWithCString:buf encoding:NSUTF8StringEncoding];

        } else if (choice == no) {

        }

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:18:16.280

`%c`暗示一个`char*`论点，但你正在传递`char**`.

你应该让你的变量`char`，而不是`char*`：

```
char choice, yes = 'y', no = 'n'; 
```

在与and`choice`比较之前转换为小写也是有意义的，因为您要求最终用户输入*大写*或`y``n` *`Y``N`*

 *```
scanf("%c", &choice);
choice = tolower(choice); 
```

**编辑以回应问题的编辑：**您不能使用`%s`将值读入`NSString`. 您应该使用`char buf[MAX]`, 并限制`scanf`:

```
char buf[1024];
scanf("%1024s", buf);
plainText = [NSString stringWithCString:buf encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T03:30:15.777

`%s`规范告诉它读入您已经分配的`scanf`数组。`char`但是您正在传递一个 nil 指针`NSString`。

尝试这样的事情：

```
NSData *data = [[NSFileHandle fileHandleWithStandardInput] readDataToEndOfFile];
plainText = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding]; 
```*

# html - 每行中具有不同数量的单元格的 HTML 表格：如何在其行中均匀地排列单元格？

> ID：10369400
> 
> 赞同：2
> 
> 时间：2012-04-29T03:13:32.363
> 
> 标签：html, css, html-table

我有一个 HTML 表格，其中的列数可能因行而异。尽管如此，我希望这些列在它们的行中均匀分布。（例如，如果我的第一行包含 2 列，则每列应占表格总宽度的 50%；如果第二行有 3 列，则每列应占表格总宽度的约 33%。 )

此外，我希望表格具有容器的宽度（因此可能`width: 100%`在 CSS 中使用 a ；但问题是此属性告诉表格仅根据 forst 行中的内容平均拆分列）。容器宽度可能会有所不同，这就是我必须使用百分比的原因。

我还尝试使用 div 自己制作表格，并用百分比指定每个“cell-div”的宽度，但这种解决方案并不能在每个浏览器上提供良好的结果：有时，当没有更多空间时行，一行的最后一个“cell-div”在它下面。（我必须指定一些奇怪的宽度，例如`49.99998%`或`33.333233%`因为我的边框也需要一些空间。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T03:23:25.923

听起来您并没有真正使用该`table`元素来显示表格数据，只是为了进行一些对齐。获得所需结果的一种方法是将每一行设为自己的表格并设置宽度。每行将在表格宽度上均匀分布单元格。您可能需要添加更多 CSS 格式以使其按照您想要的方式运行。

[你可以在http://jsfiddle.net/RxSe5/1/](http://jsfiddle.net/RxSe5/1/)看到这个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T03:23:43.247

您可以在每个 TD 内添加表格：

```
 <table style="width:100%;text-align:center;">
        <tr>
            <td>
                <table style="width:100%">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table style="width:100%">
                    <tr>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
​ 
```

或者您可以添加新表：

```
<div>
    <table style="width:100%;text-align:center;">
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
    </table>
    <table style="width:100%;text-align:center;">
        <tr>
            <td>1</td>
            <td>2</td>
            <td>3</td>
        </tr>
    </table>
    <table style="width:100%;text-align:center;">
        <tr>
            <td>1</td>
            <td>2</td>
        </tr>
    </table>
</div>​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T04:30:17.083

您可以完全嵌套表格，也可以使用表格进行布局。或者，您可以使用标记应该如何使用它，并通过做正确的事情来享受它的所有劳动成果（可访问性、语义、可用性等）。您可以通过 td 元素上的 colspan="" 属性更改列。[http://www.w3.org/TR/html-markup/td.html](http://www.w3.org/TR/html-markup/td.html)

# objective-c - 如何在 Objective-C Xcode 包中的每个单元测试之前实现 setup() 和 teardown()？

> ID：10369406
> 
> 赞同：2
> 
> 时间：2012-04-29T03:14:54.303
> 
> 标签：objective-c, xcode, unit-testing, tdd, installation

我是 Objective-C 的新手，我正在尝试立即开始使用 TestDrivenDevelopment，因为我发现它确实很可靠，至少当*测试*通过时。

在此之前，我制作了一些 Java 教程，对 TDD 有了一些了解。[Brett Schucherts 视频教程](http://vimeo.com/album/205252)，他一步一步编写完整的 RPNCalculator 是一个金矿，可以通过观看他的操作来学习这些东西。

为了减少代码重复，例如，您可以这样做：

```
@Before
public void init() {
    /* Stuff that which will be set up before the call of each test method/*
} 
```

然后在您在 Java 中的 TestClass 中进行的每个测试之前调用它。

这是我想在 Objective-C + Xcode 中实现的。我应该提一下，我正在使用 Xcode 4.3（最新版本）并且我正在使用内置的 TestFramework。

我在网络上找到的唯一与我正在寻找的内容相近的是[SO 上的答案](https://stackoverflow.com/a/3641897/641514)。

不幸的是，我无法重现所描述的做事方式。一个最小的可运行示例和/或更详细的新手解释将非常棒，非常感谢！

顺便说一句，对不起英语不好。还在学习语言。:-)

**编辑：**

这是一个不起作用的最小示例。也许有人可以告诉我出了什么问题。Xcode 似乎无法识别`board`测试方法的主体内部。

```
#import <SenTestingKit/SenTestingKit.h>
@interface ABoardShould : SenTestCase
@end

#import "ABoardShould.h"
@implementation ABoardShould

- (void)setUp
{
    [super setUp];

    int rowCount = 6;
    int columnCount = 7;
    Board *board = [[Board alloc] initWithShapeRowCount:rowCount andColumnCount:columnCount];
}

- (void)tearDown
{
    // Tear-down code here.

    [super tearDown];
}

- (void)testHaveItsShapeSetWhenInitialised {
    STAssertEquals([board rowCount], rowCount, @"");
    STAssertEquals([board columnCount], columnCount, @"");
}

- (void)testHaveTheDimensionsOfItsBoardMatchTheGivenShape {        
    NSMutableArray *expectedFields = [[NSMutableArray alloc] initWithCapacity:columnCount*rowCount];
    for(int i=0; i < (rowCount*columnCount); i++) [expectedFields addObject: [NSNumber numberWithInt: 0]];

    STAssertEquals([expectedFields count], [[board fields] count], @"");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:34:13.217

必须调用测试用例类的 setup 和 teardown 方法，`setUp`并且`tearDown`. 这在[*Xcode 单元测试指南：编写测试用例方法*](https://developer.apple.com/library/ios/documentation/DeveloperTools/Conceptual/UnitTesting/03-Writing_Test_Case_Methods/writing_tests.html)中有所描述。

在您的示例中，`board`是`setUp`方法中的局部变量。您需要将其设为实例变量。

# objective-c - 一旦iOS中的系统日期更改，如何更改带有日期的标签？

> ID：10369416
> 
> 赞同：5
> 
> 时间：2012-04-29T03:16:55.153
> 
> 标签：objective-c, ios, uilabel, nsdate

我有一个简单的查询，但不知道该怎么做。

这就是我想要实现的目标：1）我有一个带有今天日期的 UILabel，即“29/04/12”2）在午夜我希望该标签自行更新为“30/04/12”而无需更改查看或按任何内容。

这是第2步，我不知道该怎么做。我知道如何完成它，例如可能会收到有关日期更改的系统通知（如果这甚至可能的话）或使用某种计时器作为触发器。

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T04:07:51.637

如果您只对在午夜到来时收到通知（或其他几种情况）感兴趣，那么您可以覆盖 UIApplicationDelegate 的`- (void)applicationSignificantTimeChange:(UIApplication *)application`方法，以便它导致您的标签更新。当然，您还需要在应用程序重新进入前台时更新标签，因为如果您的应用程序在日期更改时处于后台，则不会调用此方法。

# java - 无法将“”解析为整数，然后退出

> ID：10369417
> 
> 赞同：2
> 
> 时间：2012-04-29T03:16:56.630
> 
> 标签：java, parsing

我遇到以下崩溃...

```
04-27 03:19:08.858: E/AndroidRuntime(448): java.lang.RuntimeException: Unable to start activity ComponentInfo{walmart.namespace/walmart.namespace.WalmartActivity}: java.lang.NumberFormatException: unable to parse '' as integer. 
```

我不知道这里的问题是什么，特别是因为我的代码中什至没有`"`。

这是我的代码...

*   主要的java文件： http: [//pastebin.com/S76bgi7a](http://pastebin.com/S76bgi7a)
*   XML 文件： http: [//pastebin.com/5YJHaGBc](http://pastebin.com/5YJHaGBc)
*   字符串文件： http: [//pastebin.com/2sk1emgB](http://pastebin.com/2sk1emgB)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:37:36.850

您应该对您的字段进行输入验证。根据错误消息，您似乎正在尝试解析空字符串。相反，您应该检查字符串是否为空，然后尝试解析 int。

正如 Chin Boon 指出的那样，您应该使用[Integer.parseInt(String)](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)。

为了防止您的程序彻底崩溃，您还可以将该行包装在 try/catch 块中，捕获 NumberFormatException 并适当地处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T03:21:09.887

大概就在这条线上...

```
switch (new Integer(department.getText().toString()).intValue()) { 
```

我会建议在某处有一个字符`department`已经传入但没有打印到错误输出中，例如换行符、制表符或其他不可打印的空白字符？

不确定那里是否有字符是因为它是如何输入到该字段中的，或者可能是由于 unicode 或键盘输入了不寻常的值？

您能否检查一下，如果仍然无法正常工作，请在此处发布一些代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T05:34:08.147

在将字符串解析为整数之前修剪并切碎值。

怀疑可能有空格或换行符。

最好使用 Integer 类的 parseInt 方法，尽管 new Integer(mystery) 隐式使用 parseInt。

int a = Integer.parseInt(myStr);

# c# - 为什么添加局部变量会使 .NET 代码变慢

> ID：10369421
> 
> 赞同：44
> 
> 时间：2012-04-29T03:17:55.857
> 
> 标签：c#, .net, performance, compiler-construction, jit

为什么注释掉这个 for 循环的前两行并取消注释第三行会导致 42% 的加速？

```
int count = 0;
for (uint i = 0; i < 1000000000; ++i) {
    var isMultipleOf16 = i % 16 == 0;
    count += isMultipleOf16 ? 1 : 0;
    //count += i % 16 == 0 ? 1 : 0;
} 
```

时序背后是截然不同的汇编代码：循环中有 13 条与 7 条指令。该平台是运行 .NET 4.0 x64 的 Windows 7。启用了代码优化，并且测试应用在 VS2010 之外运行。[**更新：** [复制项目](https://github.com/breyed/PerfTest)，用于验证项目设置。]

消除中间布尔值是一项基本优化，是我 1980 年代[Dragon Book](http://en.wikipedia.org/wiki/Compilers:_Principles,_Techniques,_and_Tools)中最简单的优化之一。在生成 CIL 或 JITing x64 机器代码时，如何优化没有得到应用？

是否有“真正的编译器，我希望你优化这段代码，请”开关？虽然我对过早优化类似于[爱钱](http://www.biblegateway.com/passage/?search=1%20Timothy%206:10&version=ESV)的观点表示同情，但我可以看到尝试分析一个复杂算法时的挫败感，这种算法在其例程中散布着这样的问题。您将通过热点工作，但没有任何迹象表明可以通过手动调整我们通常认为编译器理所当然的内容来大大改善更广泛的温暖区域。我当然希望我在这里遗漏了一些东西。

**更新：** x86 也存在速度差异，但取决于方法的即时编译顺序。请参阅[为什么 JIT 顺序会影响性能？](https://stackoverflow.com/questions/10406796/why-does-jit-order-affect-performance)

**汇编代码**（根据要求）：

```
 var isMultipleOf16 = i % 16 == 0;
00000037  mov         eax,edx 
00000039  and         eax,0Fh 
0000003c  xor         ecx,ecx 
0000003e  test        eax,eax 
00000040  sete        cl 
    count += isMultipleOf16 ? 1 : 0;
00000043  movzx       eax,cl 
00000046  test        eax,eax 
00000048  jne         0000000000000050 
0000004a  xor         eax,eax 
0000004c  jmp         0000000000000055 
0000004e  xchg        ax,ax 
00000050  mov         eax,1 
00000055  lea         r8d,[rbx+rax] 
```

```
 count += i % 16 == 0 ? 1 : 0;
00000037  mov         eax,ecx 
00000039  and         eax,0Fh 
0000003c  je          0000000000000042 
0000003e  xor         eax,eax 
00000040  jmp         0000000000000047 
00000042  mov         eax,1 
00000047  lea         edx,[rbx+rax] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T09:46:59.077

问题应该是“为什么我在我的机器上看到这样的差异？”。我无法重现如此巨大的速度差异，并怀疑您的环境存在特定的问题。很难说它可能是什么。可以是您之前设置并忘记的一些（编译器）选项。

我已经创建了一个控制台应用程序，在发布模式（x86）下重建并在 VS 之外运行。结果几乎相同，两种方法均为 1.77 秒。这是确切的代码：

```
static void Main(string[] args)
{
    Stopwatch sw = new Stopwatch();
    sw.Start();
    int count = 0;

    for (uint i = 0; i < 1000000000; ++i)
    {
        // 1st method
        var isMultipleOf16 = i % 16 == 0;
        count += isMultipleOf16 ? 1 : 0;

        // 2nd method
        //count += i % 16 == 0 ? 1 : 0;
    }

    sw.Stop();
    Console.WriteLine(string.Format("Ellapsed {0}, count {1}", sw.Elapsed, count));
    Console.ReadKey();
} 
```

请任何有 5 分钟时间的人复制代码、重建、在 VS 外部运行并在此答案的评论中发布结果。我想避免说“它适用于我的机器”。

**编辑**

可以肯定的是，我创建了一个**64 位**Winforms 应用程序，结果与问题中的结果相似——**第一种方法**（1.57 秒）比第二种方法（1.05 秒）慢。我观察到的差异是 33% - 仍然很多。似乎 .NET4 64 位 JIT 编译器中存在错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T04:20:10.837

我无法谈论 .NET 编译器，或者它的优化，甚至它何时执行它的优化。

但是在这种特定情况下，如果编译器将该布尔变量折叠到实际语句中，并且您要尝试调试此代码，则优化后的代码将与编写的代码不匹配。您将无法单步执行 isMulitpleOf16 分配并检查它的值。

这只是可能关闭优化的一个例子。可能还有其他人。优化可能发生在代码的加载阶段，而不是来自 CLR 的代码生成阶段。

现代运行时非常复杂，特别是如果您在运行时投入 JIT 和动态优化。我很感激代码有时完全按照它所说的去做。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-30T11:39:18.830

这是 .NET Framework 中的一个错误。

好吧，我真的只是在猜测，但我在~~[Microsoft Connect](https://connect.microsoft.com/VisualStudio/feedback/details/739851/c-and-jit-optimizers-do-not-eliminate-local-variables)~~上提交了一份错误报告，看看他们怎么说。在微软删除该报告后，我在 GitHub 上的[roslyn](https://github.com/dotnet/roslyn/issues/6542)项目上重新提交了它。

**更新：**微软已将该问题移至[coreclr](https://github.com/dotnet/coreclr/issues/1993)项目。从对该问题的评论来看，称其为错误似乎有点强；这更像是一个缺失的优化。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T04:01:41.323

我认为这与您的另一个问题有关。当我如下更改您的代码时，多行版本获胜。

哎呀，仅在 x86 上。在 x64 上，多行是最慢的，并且条件轻松地击败了它们。

```
class Program
{
    static void Main()
    {
        ConditionalTest();
        SingleLineTest();
        MultiLineTest();
        ConditionalTest();
        SingleLineTest();
        MultiLineTest();
        ConditionalTest();
        SingleLineTest();
        MultiLineTest();
    }

    public static void ConditionalTest()
    {
        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();
        int count = 0;
        for (uint i = 0; i < 1000000000; ++i) {
            if (i % 16 == 0) ++count;
        }
        stopwatch.Stop();
        Console.WriteLine("Conditional test --> Count: {0}, Time: {1}", count, stopwatch.ElapsedMilliseconds);
    }

    public static void SingleLineTest()
    {
        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();
        int count = 0;
        for (uint i = 0; i < 1000000000; ++i) {
            count += i % 16 == 0 ? 1 : 0;
        }
        stopwatch.Stop();
        Console.WriteLine("Single-line test --> Count: {0}, Time: {1}", count, stopwatch.ElapsedMilliseconds);
    }

    public static void MultiLineTest()
    {
        Stopwatch stopwatch = new Stopwatch();
        stopwatch.Start();
        int count = 0;
        for (uint i = 0; i < 1000000000; ++i) {
            var isMultipleOf16 = i % 16 == 0;
            count += isMultipleOf16 ? 1 : 0;
        }
        stopwatch.Stop();
        Console.WriteLine("Multi-line test  --> Count: {0}, Time: {1}", count, stopwatch.ElapsedMilliseconds);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-06T19:23:06.143

我倾向于这样想：从事编译器工作的人每年只能做这么多事情。如果那时他们可以实现 lambdas 或许多经典优化，我会投票给 lambdas。**C# 是一种在代码读取和编写工作方面而不是在执行时间方面高效的语言。**

因此，团队专注于最大化读/写效率的特性是合理的，而不是在某个极端情况下（其中可能有数千个）的执行效率。

我相信最初的想法是 JITter 会做所有的优化。不幸的是，JITting 需要相当长的时间，任何高级优化都会使情况变得更糟。所以这并没有像人们希望的那样成功。

我发现在 C# 中编写真正快速的代码的一件事是，在您提到的任何优化都会产生影响之前，您经常会遇到严重的 GC 瓶颈。就像您分配数百万个对象一样。C# 在避免成本方面给您留下的余地很少：您可以改用结构数组，但相比之下，生成的代码真的很难看。我的观点是，关于 C# 和 .NET 的许多其他决定使得此类特定优化不如在 C++ 编译器之类的东西中有价值。哎呀，他们甚至[放弃了 NGEN 中特定于 CPU 的优化](http://blogs.msdn.com/b/davidnotario/archive/2005/08/15/451845.aspx)，用性能换取程序员（调试器）的效率。

说了这么多，我*喜欢*C#，它实际上利用了自 1990 年代以来 C++ 使用的优化。只是不以牺牲诸如异步/等待之类的功能为代价。

# android - Android振动器服务错误

> ID：10369424
> 
> 赞同：0
> 
> 时间：2012-04-29T03:18:49.820
> 
> 标签：android, android-vibration

有谁知道为什么我的振动服务在我单击时出现错误`Buttons`？它说`"....... force close"`。这是我的代码：

```
final Vibrator mVibrator = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);

public void onClick(View v) {
    Intent newgameIntent = new Intent(BodyPartsGameActivity.this,gamelevel.class);
    startActivity(newgameIntent);
    mp.start();
    mVibrator.vibrate(500);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T09:35:43.367

您必须指定使用振动器的权限。否则，安全框架将关闭您的应用程序。

```
<manifest>
    ...
    <uses-permission android:name="android.permission.VIBRATE"/>
    ...
</manifest> 
```

# javascript - 影响当前外部元素中的另一个元素

> ID：10369426
> 
> 赞同：0
> 
> 时间：2012-04-29T03:19:18.197
> 
> 标签：javascript, jquery

```
<div class="test">
 <button>Example</button>
 <div class="example" style="display:none;">Blah</div>
</div>

<div class="test">
 <button>Example</button>
 <div class="example" style="display:none;">Another</div>
</div> 
```

当`button`被点击时，我想要`.example`，`.show`但只有`.example`在当前的`.test`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T03:23:37.227

另一种适用于您的特定 HTML 的方法：

```
$('button').click(function(){
    $(this).next('.example').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:22:28.047

这将完全按照您所说的进行：

```
$('button').click(function(){
    $(this).closest('.test').find('.example').show();
}); 
```

`.example`这也适用于您发布的标记，但如果按钮并且不是兄弟姐妹，它将不起作用：

```
$('button').click(function(){
    $(this).siblings('.example').show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T03:26:57.880

Hiya在这里为您的案例**工作演示：http:** [//jsfiddle.net/4bLZF/](http://jsfiddle.net/4bLZF/)

这使用`slideToggle` [http://api.jquery.com/slideToggle/](http://api.jquery.com/slideToggle/)

**代码**

```
 $(document).ready(function () {

    // Watch for clicks on the "slide" link.
    $('button').click(function () {
        $(this).next(".example").slideToggle(400);
        return false;
    });

});​ 
```

# php - 使用 Jquery 传递带参数的链接

> ID：10369432
> 
> 赞同：0
> 
> 时间：2012-04-29T03:21:14.187
> 
> 标签：php, jquery, ajax

我有这个链接：

```
<a id='delete' href='/add/delete.php?iid=XXXXX'>#</a> 
```

我想通过 Jquery 传递它，这样页面就不会刷新。但是，我很难做到这一点。我用 Jquery 尝试过的所有点击事件和 ajax 都没有成功。

基本上，我希望 ajax 向 delete.php 发送 iid 参数中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:27:51.133

```
$(function(){
  $("#delete").click(function(e){
    e.preventDefault();
    $.post("../add/delete.php", { iid: "xxx" } ,function(data){
       //do whatever with the result which is in the variable data.
       alert(data)
    });
  });
}); 
```

由于是删除，所以使用 POST。否则一些爬虫会爬取你的删除页面，你会在一个晴朗的早晨看到你的表是空的。

**编辑**：您可以以某种方式将要传递的值与锚标记相关联。例如：将您的 id 标签更改为这种格式 del-YouIdTobe 已删除（例如：del-1、del-2 等）

```
<a id='delete' href='#' id="del-1>Delte 1 </a>
<a id='delete' href='#' id="del-2>Delte 2 </a>
<a id='delete' href='#' id="del-3>Delte 3 </a> 
```

脚本

```
$(function(){
  $("#delete").click(function(e){
    e.preventDefault();
    var val=$(this).attr("id").split("-")[0];
    $.post("../add/delete.php", { iid: val } ,function(data){
       //do whatever with the result which is in the variable data.
       alert(data)
    });
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:08:00.387

在这里试试这个`href='1'`是你要删除的id，也可以替换它找到的文本`id="d1"`：

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(function(){
  $(".delete").click(function(e){
    var del_id = $(this).attr('href');
    e.preventDefault();
    $.post("/add/delete.php", { iid: del_id } ,function(data){
        //change the link to deleted
        $('#d'+del_id).replaceWith('<a href="#">Deleted</a>');
    });
  });
});

</script>
</head>
<body>
 <a class='delete' id="d1" href='1'>Delete</a>
 <a class='delete' id="d2" href='2'>Delete</a>
 <a class='delete' id="d3" href='3'>Delete</a>
 <a class='delete' id="d4" href='4'>Delete</a>
</body>
</html> 
```

# c - 关于 typedef struct 和平均成绩的 2 个问题。我在C中正确地做吗？

> ID：10369434
> 
> 赞同：1
> 
> 时间：2012-04-29T03:21:50.293
> 
> 标签：c, arrays, loops, typedef

我需要两个问题的帮助，不是作业，而是为考试而学习。我需要有这些问题，因为我被允许为考试提供一整页的笔记。如果你能帮我解决这两个简单的问题，那就太好了。以下是问题：

1.  “写一个叫getGrades的函数。这个函数反复提示用户输入正整数，直到用户输入负值停止。该函数应该返回这些成绩的平均值和最高成绩。”

2.  “编写一个名为 Get_Info 的函数，该函数将一个指向学生结构的指针（具有三个字段：char 数组称为 name、一个 int id 和一个 double gpa）作为其唯一参数。该函数提示用户输入所需的信息以填充结构并将其存储在适当的字段中。”

到目前为止，让我知道它们是否正确以及是否需要添加任何内容。

1.

```
double getGrades() {
  double average;
  double i;
  For(i=1 ; i<i; i++)
  {
  printf("Enter Grade1:\n");
  scanf("%lf", &i);
  }
  if (i<0)
  {

  (double) average == (grade1 + grade2 + grade3) / 3;
  return average;
}
 } 
```

2.

```
typedef struct {
  int id;
  double gpa;
  char name[SIZE];
} student; 

void Get_Info(student list[], int num) {
  int i;
  for(i=0; i<num; i++) {
    printf("\nName:%s", list[i].name);
    printf("\nGPA:%lf", list[i].gpa);
    printf("\nID: %d\n", list[i].id);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:07:40.153

关于#1：要求是函数接受`int`s。您正在扫描`double`s。

要求是“函数应该返回这些成绩的平均值和最高成绩”。当需要两个不同的输出时，您只返回一个 double。

您的 for 循环写为“For”（C 区分大小写），并且基于 test `i<i`。我***什么时候***会比自己少？？

这是我的版本。

```
double getGrades(int* max)
{
    int sum = 0;
    int input;
    int i = 0;
    *max = 0;

    printf("Enter Grade #%d:\n", i+1);
    scanf("%d", &input);

    while (input > 0) {
        if (*max < input) {
            *max = input;
        }

        sum = sum + input;
        i++;

        printf("Enter Grade #%d:\n", i+1);
        scanf("%d", &input);
    }

    return i? ((double)sum / i) : 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:27:23.997

你的 #2 比你的 #1 好得多，但仍然有一些错误：

要求是该函数需要一个*指向*学生结构的指针，而不是一个数组。

然后它应该打印一系列提示，并得到一系列答案（就像你在 #1 中所做的那样）。
这是`printf`/的序列`scanf`。

使用 时`scanf`，您通常使用 传递变量的地址`&`。
*（但字符串是个例外）*

这是我的版本：

```
typedef struct {
  char name[SIZE];
  int id;
  double gpa;
} student; 

void Get_Info(student* ps) {
    printf("Enter Name\n");
    scanf("%s", ps->name);

    printf("Enter ID:\n");
    scanf("%d", &ps->id);

    printf("Enter GPA\n");
    scanf("%lf", &ps->gpa);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T04:06:56.153

尝试这个。它看起来应该足够直观：

```
double getGrades() {
double average;
double grade;
double total = 0;
int count = 0;
while (1) {
    printf("Enter grade: ");
    scanf("%d", &grade);
    if (grade < 0) {
        if (count == 0) {
              average = 0;
              break;
        }
        average = total/count;
        break;
    }
    count++;
    total += grade;
}
return average;
} 
```

# wcf - 如何从控制台客户端和浏览器客户端在 wcf 休息服务中实现 ssl

> ID：10369436
> 
> 赞同：0
> 
> 时间：2012-04-29T03:22:17.240
> 
> 标签：wcf, rest, console

我在启用了 ssl 的 iis 上托管了一个 wcf 休息服务。我有一个控制台应用程序和一个浏览器作为客户端。是否可以在控制台应用程序上实现 ssl？是可能的，任何想法或相关资源的链接都将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:54:35.670

如果您想在控制台应用程序中将双向 SSL 与 REST 服务一起使用，则可以使用`WebChannelFactory`该类。

[http://msdn.microsoft.com/en-us/library/bb908674.aspx](http://msdn.microsoft.com/en-us/library/bb908674.aspx)

使用该`WebChannelFactory.Credentials`属性设置客户端证书。这种方法的优点是您可以在配置中设置证书，以便以后可以更改它而无需重新编译。

或者，您可以使用`HttpWebRequest`该类及其`ClientCertificates`属性。

# javascript - 模拟退火

> ID：10369441
> 
> 赞同：3
> 
> 时间：2012-04-29T03:23:23.117
> 
> 标签：javascript

我想用 HTML 和 JavaScript 编写模拟退火代码。我想对其进行编码以进行放置，但为简单起见，我假设所有单元格都在一行中。我有大约 30 个细胞。我在网上找了一些材料，但我找不到开始的代码。

我的伪代码如下：

```
Simulated_Annealing{
  S = initial solution
  T = initial temperature (>0)
  while( T > 0 ) {
    S’ = pick a random neighbor to S
    C = cost of S – cost of S’
    if( C > 0 ){
      S = S’
    } else {
      r = random number in range [0…1]
      m = 1/e| C/T |
      if( r < m ) {
        S = S’
      }
    }
    T = reduced T;
  }
} 
```

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T03:32:20.113

在 GitHub 上快速搜索发现 h​​ttps [://github.com/ebobby/Jsqueens](https://github.com/ebobby/Jsqueens)使用模拟退火来解决 9 个皇后问题。以下是相关代码：

```
/**
 * @author Francisco Soto <ebobby@gmail.com>
 */
var SimulatedAnnealing = (function () {
    var coolingFactor            = 0.0,
        stabilizingFactor        = 0.0,
        freezingTemperature      = 0.0,
        currentSystemEnergy      = 0.0,
        currentSystemTemperature = 0.0,
        currentStabilizer        = 0.0,

        generateNewSolution      = null,
        generateNeighbor         = null,
        acceptNeighbor           = null;

    function _init (options) {
        coolingFactor            = options.coolingFactor;
        stabilizingFactor        = options.stabilizingFactor;
        freezingTemperature      = options.freezingTemperature;
        generateNewSolution      = options.generateNewSolution;
        generateNeighbor         = options.generateNeighbor;
        acceptNeighbor           = options.acceptNeighbor;

        currentSystemEnergy      = generateNewSolution();
        currentSystemTemperature = options.initialTemperature;
        currentStabilizer        = options.initialStabilizer;
    }

    function _probabilityFunction (temperature, delta) {
        if (delta < 0) {
            return true;
        }

        var C = Math.exp(-delta / temperature);
        var R = Math.random();

        if (R < C) {
            return true;
        }

        return false;
    }

    function _doSimulationStep () {
        if (currentSystemTemperature > freezingTemperature) {
            for (var i = 0; i < currentStabilizer; i++) {
                var newEnergy = generateNeighbor(),
                    energyDelta = newEnergy - currentSystemEnergy;

                if (_probabilityFunction(currentSystemTemperature, energyDelta)) {
                    acceptNeighbor();
                    currentSystemEnergy = newEnergy;
                }
            }
            currentSystemTemperature = currentSystemTemperature - coolingFactor;
            currentStabilizer = currentStabilizer * stabilizingFactor;
            return false;
        }
        currentSystemTemperature = freezingTemperature;
        return true;
    }

    return {
        Initialize: function (options) {
            _init(options);
        },

        Step: function () {
            return _doSimulationStep();
        },

        GetCurrentEnergy: function () {
            return currentSystemEnergy;
        },

        GetCurrentTemperature: function () {
            return currentSystemTemperature;
        }
    };
})(); 
```

# operating-system - entry() 从我在 Elf 中设置的入口点进入不同的地址

> ID：10369447
> 
> 赞同：1
> 
> 时间：2012-04-29T03:24:22.657
> 
> 标签：operating-system, elf, osdev

最近我正在学习操作系统。我想写一个简单的引导加载程序，将实模式更改为保护模式，然后加载简单的内核。
但我无法弄清楚入口地址问题。
起初我将引导加载程序放在 OS.img(qemu) 的第一个扇区，然后内核从第二个扇区开始。
这是我的内核的 readelf 结果： ![在此处输入图像描述](../Images/4541b2c1277462a57de7a93b0d284ae8.png)
入口点地址是 0x800c。
而LMA和VMA如下：
![在此处输入图像描述](../Images/b1d8696cfb37961681291ea41ddc18d7.png)
bootloader的一部分，它读取elf类型的内核，然后进入entry()，也就是入口点地址。
![在此处输入图像描述](../Images/ee0b5a0a5f9d93fa1308fe4b12395989.png)
但是，当我反汇编引导加载程序时，entry() 如下： ![在此处输入图像描述](../Images/63f9244e6fc2b7ef8db19014c9254aa0.png)
调用 *0x8018，而不是 *0x800c。
我不知道为什么会这样。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:42:27.053

`call *0x8018`执行对存储在的地址的调用`0x8018`，这是正确的，因为标头中的`ELFHDR`is`0x8000`和偏移量是.`e_entry``0x18`

真正的问题在于将段加载到内存中的方式。每个段都应该`p_vaddr`从文件偏移地址加载`p_offset`。请注意，在您的情况下`p_vaddr`，`0x8000`您将 elf 标头加载到内存中的同一位置，这就是`ELFHDR->e_entry`被覆盖的原因。最简单的解决方案是在不同的地址加载 elf 标头。

资料来源：[http ://www.skyfree.org/linux/references/ELF_Format.pdf](http://www.skyfree.org/linux/references/ELF_Format.pdf)

# git - 将代码推送到 Heroku 时出错

> ID：10369452
> 
> 赞同：4
> 
> 时间：2012-04-29T03:25:56.577
> 
> 标签：git, heroku

在将我的代码推送到 Heroku 时，我收到了这些错误

有人能告诉我我在这里缺少什么吗，这是版本问题还是其他问题？

```
git push heroku master

-----> Heroku receiving push
-----> Ruby/Rails app detected
-----> Detected Rails is not set to serve static_assets
       Installing rails3_serve_static_assets... done
-----> Configure Rails 3 to disable x-sendfile
       Installing rails3_disable_x_sendfile... done
-----> Configure Rails to log to stdout
       Installing rails_log_stdout... done
-----> Gemfile detected, running Bundler version 1.0.7
       Unresolved dependencies detected; Installing...
       Using --without development:test
       Fetching source index for http://rubygems.org/
       Could not find multi_json-1.3.3 in any of the sources
       FAILED: http://devcenter.heroku.com/articles/bundler
 !     Heroku push rejected, failed to install gems via Bundler 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:43:30.770

同时 multi_json-1.3.3 已被删除。这就是为什么在 ruby​​gems 服务器上找不到它的原因。为了使它工作：

1.  从 Gemfile 中删除版本（或将其设置为 1.3.4）
2.  运行“捆绑更新 multi_json”
3.  将 Gemfile 和 Gemfile.lock 提交到存储库
4.  把它推到heroku

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:48:12.320

也有同样的问题。在 Gemfile 中添加下面的代码作为一行并将其推送到 Heroku 并且它工作。

```
gem 'multi_json', '1.3.4' 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T06:56:20.123

当我收到此错误时，我需要删除 Gemfile.lock

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T22:51:33.527

删除了 Gemfile.lock

将 gemfile 版本重置为 1.3.4

跑了捆绑

提交的 gemfile 和 gemfile 存储库

推到heroku

推送成功

# facebook - 如何从 Facebook 获取所有用户朋友的电子邮件？

> ID：10369454
> 
> 赞同：0
> 
> 时间：2012-04-29T03:26:09.363
> 
> 标签：facebook

我见过允许您“从 facebook 导入联系人”的 iphone 应用程序。他们以某种方式设法获取您朋友的电子邮件。

我尝试使用 FQL 查询 facebook 数据库，但我只收到了自己的电子邮件（我确实启用了电子邮件权限）。

iphone应用程序怎么也能收到我朋友的电子邮件？刮痧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:01:20.180

普通的 Facebook api 不支持这个。Facebook 本可以将一个应用程序列入白名单以允许这样做，但我猜他们为此将很少的应用程序列入白名单。

# ruby - 加载错误机架/测试

> ID：10369458
> 
> 赞同：16
> 
> 时间：2012-04-29T03:26:53.270
> 
> 标签：ruby

运行测试文件时出现以下错误。

```
$ruby test/test_gothonweb.rb
/Users/sony/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- rack/test (LoadError)
    from /Users/sony/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from test/test_gothonweb.rb:3:in `<main>' 
```

测试文件片段：

```
require_relative '../lib/gothonweb.rb'
require 'test/unit'
require 'rack/test'

ENV['RACK_ENV'] = 'test'

class GothonwebTest < Test::Unit::TestCase
    include Rack::Test::Methods

    def app
        Sinatra::Application
    end
end 
```

我认为 gem 已安装并且应该可用：

```
gem list

*** LOCAL GEMS ***

bundler (1.1.3)
rack (1.4.1)
rack-protection (1.2.0)
rake (0.9.2.2)
rubygems-bundler (0.9.0)
rvm (1.11.3.3)
sinatra (1.3.2)
tilt (1.3.3) 
```

为什么你认为的错误？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-29T03:36:43.583

`rack-test`是一个单独的宝石。将其包含在您的 Gem 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-30T13:43:32.217

这里有类似的问题，`gem uninstall rack-test`然后 bundle install 解决了这个问题。

[https://github.com/brynary/rack-test/issues/123](https://github.com/brynary/rack-test/issues/123)

# c# - 无法访问文件 - WebClient.DownloadFile

> ID：10369463
> 
> 赞同：7
> 
> 时间：2012-04-29T03:28:07.560
> 
> 标签：c#, file, download, webclient, access-denied

所以我已经多次寻找答案，并且插手许可的东西无济于事，但是这段代码仍然不允许我将文件下载到指定的路径。

```
WebClient client = new WebClient();
client.DownLoadFile("http://dl.dropbox.com/u/(My account)/Installer.jar", @"c:\Games\Name\libs");
client.DownLoadFile("http://dl.dropbox.com/u/(My account)/Name.zip", @"c:\Games\Name"); 
```

总是给我：“访问路径 'c:\Games\Name\libs' 被拒绝。”

另请注意，使用 windows XP SP3。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T23:16:23.680

嗨，我在本地尝试了上面的代码并得到了同样的错误“访问被拒绝”：

```
WebClient myWebClient = new WebClient();
    myWebClient.DownloadFile("http://localhost:1929/2.png", @"C:\Z\) 
```

**尝试在目录末尾指定文件名，运行时在本地保存没问题：**

```
WebClient myWebClient = new WebClient();
    myWebClient.DownloadFile("http://localhost:1929/2.png", @"C:\Z\FILENAME.jpg") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T03:41:01.297

该应用程序可能没有写入该文件夹的权限。如果这是客户端应用程序，请尝试以管理员身份运行它。否则，将 'c:\Games\Name\libs' 的权限更改为所有人的完全控制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T03:52:48.447

如果对那里的访问被拒绝，请尝试以管理员身份运行。

如果它不起作用，请导航到文件夹`C:\Games\Name\libs`，右键单击它并转到属性。选择“安全”选项卡，在顶部列表中选择将运行您的程序的用户组。（尝试使用`Users (YourName-PC\Users)`）。`Full control`选中它后，单击列表底部的编辑，然后在底部列表中选择`Allow`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T04:23:45.577

您可以使用下面的代码查看您是否对文件夹有写权限，如果没有在下载之前使用 setaccesscontrol 设置失败规则

```
 public static bool HaveWritePermissionsForFolder(string path)
    {
        var rules = Directory.GetAccessControl(Path.GetDirectoryName(Path.GetDirectoryName(path))).GetAccessRules(true, true, typeof(SecurityIdentifier));

        bool allowwrite = false;
        bool denywrite = false;
        foreach (FileSystemAccessRule rule in rules)
        {
            if (rule.AccessControlType == AccessControlType.Deny &&
                (rule.FileSystemRights & FileSystemRights.WriteData) == FileSystemRights.WriteData &&
                (groups.Contains(rule.IdentityReference) || rule.IdentityReference.Value == sidCurrentUser)
                )
            {
                denywrite = true;
            }
            if (rule.AccessControlType == AccessControlType.Allow &&
                (rule.FileSystemRights & FileSystemRights.WriteData) == FileSystemRights.WriteData &&
                (groups.Contains(rule.IdentityReference) || rule.IdentityReference.Value == sidCurrentUser)
                )
            {
                allowwrite = true;
            }
        }

        if (allowwrite && !denywrite)
            return true;

        return false;
    } 
```

# c++ - 模板函数给出“没有匹配的调用函数”错误

> ID：10369464
> 
> 赞同：0
> 
> 时间：2012-04-29T03:28:26.147
> 
> 标签：c++, templates, compiler-errors, function-calls, function-call

关于 stackoverflow 的第一个问题 :) 我对 C++ 比较陌生，并且从未使用过模板，所以如果我做了一些愚蠢的事情，请原谅我。我有一个模板函数，它梳理列表并检查通用类型的指定元素。这样我就可以指定它是在寻找一个字符串，还是一个 int，或者其他什么。

```
template <class T>   
bool inList(T match, std::string list)  
{
    int listlen = sizeof(list);
    for (int i = 0; i <= listlen; i++) {
        if (list[i] == match) return true;
        else continue;
    }
    return false;
}; 
```

这是我的呼吁`inList()`。`testvec`是一个包含几个元素的字符串向量，包括“test”：

```
if (inList<string>("test", testvec))
    cout << "success!";
else cout << "fail :("; 
```

令我沮丧和困惑的是，在编译时，我遇到了以下错误：

```
error: no matching function for call to 'inList(const char [5], std::vector<std::basic_string<char> >&)' 
```

我做错了什么？:(

[编辑] 我没有提到模板定义在全局命名空间中。（这是一个简单的测试程序，可以查看我的模板是否可以工作，但显然不能：（）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T03:44:50.617

那是因为没有办法从 std::vector 转换为 std::string。相反，您需要做的是对集合的概念进行抽象。

您这样做是为了让人们可以传入他们想要的任何集合类型。他们可以使用数组、向量、字符串、列表、双端队列……只要它符合集合的“概念”（希望 c++1x 带有概念！）。他们甚至可以使用自己内部特别优化的集合类型。这就是模板的美妙之处。

使用 C++11（适用于任何标准集合、原始数组和用户定义类型）：

```
template<class elem_t, class list_t>
bool in_list(const elem_t& elem, const list_t& list) {
   for (const auto& i : list) {
      if (elem == i) {
         return true;
      }
   }
   return false;
} 
```

编辑：将 std::initializer_list 推断为模板参数是一个非标准扩展，因此提供显式覆盖：

```
template<class elem_t>
bool in_list(const elem_t& elem, std::initializer_list<elem_t> list) {
   for (const auto& i : list) {
      if (elem == i) {
         return true;
      }
   }
   return false;
} 
```

使用这个版本，你可以这样称呼它：

```
int main() {
   std::vector<int> a = {1, 2, 3, 4, 5};
   std::cout << in_list(3, a) << std::endl;
   std::string b = "asdfg";
   std::cout << in_list('d', b) << std::endl;
   std::cout << in_list('d', "asdfg") << std::endl;
   std::cout << in_list(3, {1, 2, 3, 4, 5}) << std::endl;
   return 0;
} 
```

对于我们这些仍在使用 C++98 的人来说，这将适用于字符串和向量，以及一些用户定义的类型。但它不适用于原始数组。

```
template<class elem_t, class list_t>
bool in_list_98(const elem_t& elem, const list_t& list) {
   list_t::const_iterator end = list.end(); //prevent recomputation of end each iteration
   for (list_t::const_iterator i = list.begin(); i < end; ++i) {
      if (elem == *i) {
         return true;
      }
   }
   return false;
} 
```

或者，您可以采用 STL 风格：

```
template<class elem_t, class iterator_t>
bool in_list_stl(const elem_t& elem, iterator_t begin, iterator_t end) {
   for (iterator_t i = begin; i < end; ++i) {
      if (elem == *i) {
         return true;
      }
   }
   return false;
}
//call like std::string s = "asdf"; in_list_stl('s', s.begin(), s.end()); 
```

如果我犯了一个错误，对不起，我现在没有运行我的编译器......

# vb.net - 在 VB.net 中将数据设置为 DataGridView

> ID：10369467
> 
> 赞同：0
> 
> 时间：2012-04-29T03:29:18.330
> 
> 标签：vb.net, sql-server-2008

我在 windows 窗体上有一个 DataGridView，只是从工具中拖放。现在我想使用 DataSet 或 DataTable 将数据设置到这个 gridview。如何通过编码设置它。我正在使用 SQL Server 2008 和 VS 2010

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:35:57.047

这是一个简单的例子：

> Dim DS As New DataSet()
> Dim DA As New SqlDataAdapter()
> Dim SelectQ as String = Query
> Dim CN As New SqlConnection(ConnectionString)
> DA.SelectCommand = New SqlClient.SqlCommand(SelectQ) DACustomers.SelectCommand.Connection =
> CN.Open
> DA .fill(DS, "diseredTable")
> CN.Close
> Dim BS As New BindingSource
> BS.DataSource = DS
> BS.DataMember = ”desiredTable”<br> DataGridView1.DataSource = BS

# android - 如何查看安卓应用在其他国家的下载量？

> ID：10369476
> 
> 赞同：2
> 
> 时间：2012-04-29T03:30:46.813
> 
> 标签：android, google-play, region

我刚刚在美国的 google play 上上传了一个应用程序。我在日本有朋友说他下载了我的应用程序并发表了一些评论。但我在开发人员控制器中看不到这一点。仍然 0 次下载，在我的谷歌播放页面上没有评论是美国的。有没有办法查看其他国家的google play，并获得其他国家的下载次数？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T05:51:08.010

统计数据每天更新。（请看[这个问题](https://stackoverflow.com/q/10350312/1321873)）您应该能够在发布应用后 24 小时内看到下载次数。**Android 开发者控制台**统计页面将显示有关应用程序的所有详细信息，包括国家/地区的下载次数。

# text - 词干会损害文本分类的精度吗？

> ID：10369479
> 
> 赞同：3
> 
> 时间：2012-04-29T03:31:50.093
> 
> 标签：text, nlp, classification, stemming

我读过词干会损害精度，但会提高文本分类的召回率。这是怎么发生的？当您停止时，您会增加查询和示例文档之间的匹配数，对吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T12:19:33.937

它总是一样的，如果你提高回忆，你做一个概括。因此，您正在失去精确度。词干将单词合并在一起。

> 一方面，应该合并在一起的词（例如“adhere”和“adhesion”）在词干后可能保持不同；另一方面，真正不同的词可能会被错误地混为一谈（例如，“实验”和“经验”）。这些分别称为提取不足错误和过度提取错误。

Overstemming 会降低准确率，understemming 会降低召回率。因此，由于根本没有词干意味着没有过度但最大的词干不足错误，因此您的召回率很低，精度很高。

顺便说一句，精度意味着您找到的“文档”中有多少是您正在寻找的。召回意味着您收到了多少正确的“文件”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T03:38:19.637

从 Query_expansion 上的维基百科条目：

> 通过对用户输入的词进行词干处理，可以匹配更多的文档，因为用户输入的词的替代词形式也被匹配，从而增加了总召回率。这是以降低精度为代价的。通过扩展搜索查询来搜索用户输入术语的同义词，召回率也会以牺牲精度为代价来增加。这是由于计算精度等式的性质，考虑到召回因素是分母的一部分，更大的召回隐含地导致精度下降。还可以推断，更大的召回会对整体搜索结果质量产生负面影响，因为许多用户不希望梳理更多结果，而不管精度如何。

# c++ - 通过空格将字符串解析为向量

> ID：10369483
> 
> 赞同：5
> 
> 时间：2012-04-29T03:33:39.413
> 
> 标签：c++, string, vector

假设我有一串数字

```
"1 2 3 4 5 6" 
```

我想拆分此字符串并将每个数字放入向量中的不同插槽中。解决此问题的最佳方法是什么

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T05:06:54.760

使用 istringstream 将字符串引用为流，使用`>>`运算符获取数字。如果字符串包含换行符和制表符，它也可以工作。这是一个例子：

```
#include <vector>
#include <sstream>  // for istringstream
#include <iostream>  // for cout

using namespace std;  // I like using vector instead of std::vector

int main() 
{
  char *s = "1 2 3 4 5";
  istringstream s2(s);
  vector<int> v;
  int tmp;

  while (s2 >> tmp) {
    v.push_back(tmp);
  }

  // print the vector
  for (vector<int>::iterator it = v.begin(); it != v.end(); it++) {
    cout << *it << endl;
  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T09:55:21.610

尝试：

```
#include <sstream>
#include <string>
#include <algorithm>
#include <iterator>
#include <vector>

int main()
{
    // The data
    std::string data = "1 2 3 4 5 6";

    // data in a stream (this could be a file)
    std::stringstream datastream(data);

    // Copy the data from the stream into a vector.
    std::vector<int>  vec;
    std::copy(std::istream_iterator<int>(datastream), std::istream_iterator<int>(),
              std::back_inserter(vec)
             );

    // We can also copy the vector to the output (or any other stream).
    std::copy(vec.begin(), vec.end(),
              std::ostream_iterator<int>(std::cout, "\n")
             );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T06:09:31.780

```
#include <vector>
#include <string>
#include <sstream>
int str_to_int(const string& str){
    stringstream io;
    int out;
    io<<str;
    io>>out;
    return out;
};

vector<int> Tokenize(string str, string delimiters = " ")
{   
    vector<int> tokens;
    string::size_type nwpos; //position of first non white space, which means it is     first real char
    nwpos = str.find_first_not_of(delimiters, 0); //ignore the whitespace before the first word

    string::size_type pos = str.find_first_of(delimiters, nwpos);

    while (string::npos != pos || string::npos != nwpos)
    {
        // Found a token, add it to the vector.
        tokens.push_back(str_to_int(str.substr(nwpos, pos - nwpos)));
        // Skip delimiters.  Note the "not_of"
        nwpos = str.find_first_not_of(delimiters, pos);
        // Find next "non-delimiter"
        pos = str.find_first_of(delimiters, nwpos);
    }
    return tokens;
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T03:59:08.153

```
#include <iostream>
#include <string>
#include <algorithm>
#include <cstdlib>

std::vector<std::string> StringToVector(std::string const& str, char const delimiter);

int main(){

    std::string str{"1 2     3 4  5 6    "};
    std::vector<std::string> vec{StringToVector(str, ' ')};

    //print the vector
    for(std::string const& item : vec){
        std::cout << "[" << item << "]";
    }

    return EXIT_SUCCESS;
}

std::vector<std::string> StringToVector(std::string const& str, char const delimiter){

    std::vector<std::string> vec;
    std::string element;

    //we are going to loop through each character of the string slowly building an element string.
    //whenever we hit a delimiter, we will push the element into the vector, and clear it to get ready for the next element
    for_each(begin(str),end(str),[&](char const ch){
        if(ch!=delimiter){
            element+=ch;
        }
        else{
            if (element.length()>0){
            vec.push_back(element);
            element.clear();
            }
        }
    });

    //push in the last element if the string does not end with the delimiter
    if (element.length()>0){
        vec.push_back(element);
    }

    return vec;
} 
```

> g++ -std=c++0x -o main main.cpp

这具有永远不会将空字符串推入向量的优点。
你也可以选择你想要的分隔符。
也许你可以写一些其他的：一个用于字符向量，或者分隔符可能是一个字符串？:)
祝你好运！

# python - webapp2，Jinja2：如何将大的html文件切割成多个html文件

> ID：10369486
> 
> 赞同：2
> 
> 时间：2012-04-29T03:34:27.690
> 
> 标签：python, django-templates, jinja2, webapp2

当我写博客时，我喜欢将每篇博文分成自己的 .html 文件（可以吗？）

这可以防止文件变得太大，并且可以在需要时轻松返回并编辑以前编写的博客文章。

有时，博客文章会包含 css/js/ajax/template 变量。

但是在我的网站上，我喜欢一页上的所有博客文章（所以我可以滚动浏览它们，而不是为每篇文章转到单独的页面）

这是一个包含两篇博文的 html 文件：

```
{% extends "base.html" %}
{% block blog_posts %}
    <!-- links/targest for the side menu to jump to a post -->
    <li><a href="#post2">Post2 - April 2012</a></li>
    <li><a href="#post1">Post1 - Feb 2012</a></li>
{% endblock %}

{% block content %}

<div id="post1">
spam1 blah blah
</div>

<div id="post2">
spam2
</div>
{% endblock %} 
```

在 base.html 我有类似的东西：

```
<div id="content-container">
        <div id="section-navigation">
            <ul>
                {% block blog_posts %}
                {% endblock %}
            </ul>
        </div>
        <div id="content">
            {% block content %}{% endblock %}
        </div>
</div> 
```

使用 webapp2 和 jinja2 将这些博客文章拆分为单独文件的最佳方法是什么？

例如 blog1.html 可能看起来像：

```
{% block blog_posts %}
        <!-- links/targest for the side menu to jump to a post -->
        <li><a href="#post1">Post1 - Feb 2012</a></li>
    {% endblock %}

{% block content %}

    <div id="post1">
    spam1 blah blah
    </div>
{% endblock %} 
```

（我希望链接和博客文章在网站上以正确的顺序显示）

我可以想到一种方法，post2 扩展 post1.html，post3 扩展 post2.html 等，但我更愿意扇出更多

“Henry 和 Kafura 在 1981 年 [2] 引入了基于信息流的软件结构度量，它测量复杂性作为扇入和扇出的函数。”

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T07:19:49.570

@robert king，您的设计中直接嵌入了模板中的数据。模板应该只包含视图的蓝图，并且每次都应该使用从主代码生成的新数据来呈现它们。我在这里模拟这个过程（**编辑以说明使用循环来提取帖子标题，以及单个帖子的显示。**）：

```
import jinja2

# NOTE: in this template there is no data relating to specific posts.
# There are only references to data structures passed in from your main code
page_template = jinja2.Template('''
    <!-- this is a navigation block that should probably be in base.html -->
    {% block blog_posts %}
        <!-- links/targets for the side menu to jump to a post -->
        {% for post in posts %}
          <li><a href="{{ post.url }}">{{ post.title }} 
                                       - {{ post.date }}</a></li>
        {% endfor %}
    {% endblock %}

    <!-- this is a content block that should probably be in page.html -->
    {% block content %}
        <div id="post">
            <h1>{{ current.title }}</h1>
            <h2>{{ current.date }}</h2>
            <p>{{ current.content }}</p>
        </div>
    {% endblock %}
''')

# NOTE your main code would create a data structure such as this 
# list of dictionaries ready to pass in to your template
list_of_posts = [
         { 'url' : '#post1',
          'title' : 'My first post',
          'date' : 'Feb 2012',
          'content' : 'My first post is about Hello World.'},

         { 'url' : '#post2',
          'title' : 'My second post',
          'date' : 'Apr 2012',
          'content' : 'My second post is about Foo Bar.'}
         ]

# Pass in a full list of posts and a variable containing the last
# post in the list, assumed to be the most recent. 
print page_template.render(posts = list_of_posts,
                           current = list_of_posts[-1]) 
```

希望这可以帮助。

**编辑另请参阅我对**[“网站片段 - 复合视图”](https://stackoverflow.com/a/10371710/1290420)的问题的回答

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-01T01:06:56.863

我刚刚在 jinja2 教程中找到了另一个选项。我认为我的处理程序将博客文章的文件名列表传递给我的模板，然后包含博客文章更有意义。

[include](http://jinja.pocoo.org/docs/templates/#include) - 将该文件的渲染内容返回到当前命名空间：

```
{% include 'header.html' %}
    <div ...
{% include 'footer.html' %} 
```

默认情况下，包含的模板可以访问活动上下文的变量。有关导入和包含的上下文行为的更多详细信息，请参阅[导入上下文行为](http://jinja.pocoo.org/docs/templates/#import-visibility)。

从 Jinja 2.2 开始，您可以将包含标记为忽略缺失，在这种情况下，如果要忽略的模板不存在，Jinja 将忽略该语句。当结合有或没有上下文时，它必须放在上下文可见性语句之前。这里有一些有效的例子：

```
{% include "sidebar.html" ignore missing %}
{% include "sidebar.html" ignore missing with context %}
{% include "sidebar.html" ignore missing without context %} 
```

2.2 版中的新功能。

您还可以提供在包含之前检查是否存在的模板列表。将包含第一个存在的模板。如果给出了ignore missing，如果模板不存在，它将回退到不渲染，否则将引发异常。例子：

```
{% include ['page_detailed.html', 'page.html'] %}
{% include ['special_sidebar.html', 'sidebar.html'] ignore missing %} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T02:18:59.827

当我读取原始 html 文件 (file.read()) 并将数据传递给我的模板时，它转义了所有 html。

而不是 {{data}} 我不得不使用允许原始 html 的 {{data|safe}}。

就像是：

```
class HomeHandler(BaseHandler):
    def get(self):
        file_names = sorted(os.listdir('blog_posts'))
        html = [open('blog_posts/%s' % fn).read() for fn in file_names]
        templates = {'html': enumerate(html)}
        self.render_template('home.html', **templates)

{% block content %}

    {% for num,data in html %}
        <div id="post{{num}}">
            {{data|safe}}
        </div>
        <br />
        <img src="http://www.sadmuffin.net/screamcute/graphics/graphics-page-divider/page-divider-007.gif" border=0>
        <br />
    {% endfor %}

{% endblock %} 
```

（确保目录不是静态目录）

# android - sdp 文件内容，用于在 Android 应用中广播电视频道

> ID：10369490
> 
> 赞同：1
> 
> 时间：2012-04-29T03:35:44.920
> 
> 标签：android, streaming, video-streaming, rtsp

嗨，我正在尝试创建一个将直播电视频道的 android 应用程序。我在互联网[http://gillbinder.wapka.mobi/site_174.xhtml](http://gillbinder.wapka.mobi/site_174.xhtml)上找到了一些 sdp 文件。当我运行这段代码

```
VideoView view=new VideoView(this);
setContentView(view);
 view.setMediaController(mediaController);

             view.setVideoURI(Uri.parse("rtsp://simplelive.nexg.tv:554/starplus_mpeg.sdp"));

             view.start(); 
```

我可以在手机中查看明星加频道的直播。我读到 SDP（会话描述协议）用于描述流内容。我看到了一些 sdp 文件示例，用于在 vlc 媒体服务器中流式传输视频和流式传输视频。我不知道广播电视频道的 sdp 文件代码应该是什么。

例如，我想知道 rtsp://simplelive.nexg.tv:554/starplus_mpg.sdp 中 starplus_mpeg.sdp 文件的代码，这样我就可以为 aajtak 等其他电视频道制作自己的 sdp 文件（[http ://aajtak.intoday.in/livetv.php](http://aajtak.intoday.in/livetv.php)）。有人可以帮我制作这些 sdp 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T03:38:19.637

使用任一方法制作您的 SDP 文件[curl](http://snipplr.com/view/57846/curl--rtsp-to-get-sdp-descriptor-for-media-stream/)或[openrtsp](http://mailman.videolan.org/pipermail/streaming/2004-November/001917.html)在 rtsp 协议上调用“DESCRIBE”来制作您的 SDP 文件并解析响应以获取您的 sdp 文件。

[http://mailman.videolan.org/pipermail/streaming/2004-November/001917.html](http://mailman.videolan.org/pipermail/streaming/2004-November/001917.html)

# .net - 解析匹配运算符和重构 switch 案例

> ID：10369491
> 
> 赞同：0
> 
> 时间：2012-04-29T03:35:52.203
> 
> 标签：.net, design-patterns, refactoring, switch-statement, strategy-pattern

我需要一个将操作数/运算符作为参数并提供评估结果的函数。我面临的问题是如何优雅地解析运算符。

示例代码如下

```
internal static bool Evaluator(double operand1, double operand2, string operation)
{
    bool evaluation = false;
    switch (operation)
    {
        case "<":
            evaluation = operand1 < operand2;
            break;

        case ">":
            evaluation = operand1 > operand2;
            break;

        case "<=":
            evaluation = operand1 <= operand2;
            break;

        default:
            break;
    }

    return evaluation;
} 
```

我可以将运算符放在枚举（或可扩展枚举）中，并使用策略模式来删除开关盒。问题仍然存在，我无法解析运算符。例子

```
 op1="<";
     var operation = Operation.Parse(op1);
     var result = operand1 <--  operation should come here --> operand2. 
```

请建议如何优雅地重构上面的代码（Evaluator 函数）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:50:36.900

我想你可能正在寻找这样的东西：

```
public static Func<double, double, bool> ParseOperation(string operation)
{
    switch (operation)
    {
        case "<":
            return (x, y) => x < y;

        case ">":
            return (x, y) => x > y;

        case "<=":
            return (x, y) => x <= y;

        default:
            throw new Exception();
    }
} 
```

你可以像这样使用它：

```
var op = ParseOperation("<");
Console.WriteLine(op(1, 2)); // true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T04:45:06.680

switch 语句是责任链模式的最简单实现，其目的是将您的问题路由到正确的处理程序。经典的 GoF 实现是链表。 [Wikipedia](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern "维基百科")有一篇很好的文章，[NetObjectives](http://www.netobjectivestest.com/PatternRepository/index.php?title=TheChainOfResponsibilityPattern "网络目标")也有。

另一个很好的实现是注册表实现。这在这里有效，因为规则总是相同的——将给定的键与操作匹配。填写这个抽象，用字典支持它。使用您知道的操作预加载字典。

```
public abstract class OperationRegistry
{
   public abstract void RegisterOperation(string symbol, Func<double, double, bool> operation);
   public abstract Func<double, double, bool> GetOperation(string symbol);
} 
```

FWIW，我更愿意看到一个新课程而不是 Func，但也许这只是我。

# java - 如何将 JLabel 添加到 JUNG 图中？

> ID：10369492
> 
> 赞同：0
> 
> 时间：2012-04-29T03:36:09.810
> 
> 标签：java, swing, jlabel, jung

我正在尝试向我的图表添加标签，但无法将其从默认中心位置移出。这就是我现在在我的更新方法中所拥有的（它刷新了显示）：

```
Graph<String, String> graph = getGraph();
BasicVisualizationServer<String, String> vv = getViewer(graph);
frame.getContentPane().removeAll();
frame.getContentPane().add(vv);
JLabel label = new JLabel("<html>ndp: blue<br>mdp: dark green</html>", JLabel.LEFT);
vv.add(label);
frame.pack(); 
```

它显示了标签，但无论我将标签附加到什么或我如何指定它应该离开它都不会把它放在左边......我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:13:21.960

只是一个想法，但尝试编程距离顶部、底部、左侧和右侧多远，然后从那里进行调整。如果您使用的是 Eclipse 和 WindowBuilder，您将看到关于它如何为初学者编程事物位置的代码。我相信它使用 NORTH、SOUTH、EAST、WEST 而不是以前的方向来放置组件。从那里，您应该能够（以编程方式）调整值并将 JLabel 放置在您想要的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T13:47:03.857

这很难看，但我通过在标签内容的一行（Alt + 0160）中添加大量不间断空格来修复它，这将标签的宽度扩展为大致窗口的大小，因此当它居中时，文本左对齐。setSize() 不起作用。

# java - 从另一个服务中的意图启动服务会出现运行时错误

> ID：10369494
> 
> 赞同：2
> 
> 时间：2012-04-29T03:36:37.077
> 
> 标签：java, android

尝试使用 Android 2.3.3 项目中另一个服务的意图启动服务时出现错误。错误是：Unable to start service with Intent{ act=(class name) cmp=(class name)/.(android name) }: java.lang.IllegalArgumentException:provider==null

方法调用：

```
private void startLocationService(){
    intent = new Intent("com.example.Android.LocationService");
    intent.setClass(MainService.this.getApplicationContext(), LocationService.class);
    startService(intent);
} 
```

显现：

```
<service android:name=".LocationService">
        <intent-filter>
            <action android:name="com.example.Android.LocationService"/>
        </intent-filter>
    </service>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:49:41.427

问题是 LocationService.class 中的提供者吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:27:59.403

你可以在你的调试中设置一个断点，`LocationService.onCreate()`看看它是否可以去那里。也许问题不是你在这里给出的。

附言。

如果只需要使用显式 Intent（应用程序内部使用），那么`action`Java 代码和 Manifest 的部分都是多余的。

# python - 如何将 Gtk.StatusIcon 设置为文本

> ID：10369496
> 
> 赞同：6
> 
> 时间：2012-04-29T03:36:46.847
> 
> 标签：python, gtk, gtk3, pygobject

我想用自定义文本创建一个 Gtk.StatusIcon 。理想情况下，我想将其附加到现有图像中，但纯文本也可以。我怎样才能做到这一点？

我看过一些关于获取 Gtk.Label 的 pixbuf 的帖子，但这些方法似乎已从 Gtk3 中删除（pixbuf_get_from_drawable）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T22:02:35.853

我不认为这是可能的。状态图标不是小部件，图标将由窗口管理器缩放。即使您使用`Cairo`或`PIL`动态生成图像以用作图标 pixbuf，它也不会具有系统托盘中嵌入标签的效果。取而代之的是，它会变成其他图标大小的微小、不可读的文本。

# php - 编辑 PHP 页面？

> ID：10369498
> 
> 赞同：1
> 
> 时间：2012-04-29T03:37:14.787
> 
> 标签：php

我想做一个脚本，它可以自动编辑一个 PHP 文件。例如，在 PHP 文件**abc.php**我有这个脚本

```
<?php
/* 
Data : 'Valid Data'
Method : 'Yes'
*/
?> 
```

我想要这样，当我通过另一个页面**data.php上的****$_GET**或**$_POST**将数据获取到页面时，**abc.php**文件将使用新**Data**进行编辑。**替换abc.php**中旧值的标识是**单冒号*****(Data : 'Valid Data')***。

 ******我已经尝试过[http://www.hotscripts.com/listing/simple-php-file-editor/](http://www.hotscripts.com/listing/simple-php-file-editor/)，但它没有提供任何在我的情况下使用它的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:46:10.843

```
//Read the text of abc.php into an array, one line per entry
$lines = file('abc.php');

//Replace the third line with the new text, including your new data
$lines[2] = "Data : '" . $some_data . "'\n";

//Write the new lines into abc.php
file_put_contents('abc.php', implode($lines)); 
```

*   [http://us.php.net/manual/en/function.file.php](http://us.php.net/manual/en/function.file.php)

*   [http://us.php.net/manual/en/function.file-put-contents.php](http://us.php.net/manual/en/function.file-put-contents.php)

*   [http://us.php.net/manual/en/function.implode.php](http://us.php.net/manual/en/function.implode.php)******

# f# - 为什么 F# 推断我的函数实现了 IComparable？

> ID：10369499
> 
> 赞同：3
> 
> 时间：2012-04-29T03:37:42.337
> 
> 标签：f#, type-inference

我是一名业余程序员（职业厨师），目前正在尝试自学 F# 和一般的函数式编程。

无论如何，我在鬼混`DeflateStream`，写了以下两个函数：

```
let Compress compressMe =
    let ds = new DeflateStream(File.Create("compressed.txt"), CompressionMode.Compress)
    File.OpenRead(compressMe).CopyTo(ds)
    ds.Close()

let Decompress =
    let ds = new DeflateStream(File.OpenRead("compressed.txt"), CompressionMode.Decompress)
    ds.CopyTo(File.Create("decompressed.txt"))
    ds.Close() 
```

在 main 函数的主体中，它们被一个接一个地调用，如下所示：

```
Compress args.[0]
Decompress 
```

但是，如果在程序运行时compressed.txt 不存在，则会`Decompress`抛出 a `FileNotFoundException`，这令人惊讶，因为唯一可以抛出这个的是对`File.OpenRead("compress.txt")`. 大约一个小时后，我发现它`Decompress`正在实现`IComparable`并且在主函数中调用它之前正在执行。我发现通过将其定义更改为 `let Decompress () = [...]`不再实现`IComparable`，并且我的代码按预期执行。谁能告诉我为什么 F# 进行推断`IComparable`以及为什么这样的推断会导致函数在标有 的主函数之前执行`[<EntryPoint>]`？另外，请原谅我的代码的命令风格，我对此非常陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T03:44:52.980

我不完全确定 IComparable 位，但是您遇到的问题是，如果没有括号，编译器会将`Decompress`其视为*value*而不是*function*。这将类似于如果你写了。

```
let compressedName = "compressed.txt" 
```

在这种情况下，`compressedName`现在是一个值。添加括号告诉编译器这是一个函数，每次调用该函数时都必须调用其代码，而不是由您编写的代码初始化一次（在入口点之前）的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T04:20:09.617

当你写类似的东西时

```
let value = 
    //some long calculation
[<Entrypoint>]
let main args = ... 
```

编译器在之前执行长计算`main`。这是因为您稍后可能会在代码中使用该值。如您所见，要抑制这种情况，您需要使用`let value() = ...`.

我不确定`Icomparable`来自哪里，但这是正在发生的事情的关键。

Note, if you write

```
let a = ...
let b = ... 
```

The compiler will gurantee `a` is calculated before `b` executes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T15:12:56.580

As others have pointed out, the absence of parentheses in the declaration is significant.

```
let Decompres = ... 
```

declares a variable of type `unit`. This type is used to represent "data" (even if this data doesn't encode much information), and it implements IComparable like any other data-oriented type.

```
let Decompress() = ... 
```

declares a function, and functions in F# are not comparable, probably because there is no universally accepted notion of equality on functions.

I can't see that the "IComparable-ness" of `Decompress` had anything to do with the exception you got.

# php - 以一种形式多次编辑数据库表

> ID：10369501
> 
> 赞同：-2
> 
> 时间：2012-04-29T03:38:13.773
> 
> 标签：php, javascript, mysql, forms, user-interface

好的继承人我的问题。我有一个数据库表，我想使用一个表单来编辑多行。

我正在寻找一种能够显示表单的方法，在该表单中我将能够编辑行并将条目以网格视图的方式保存。

这可以通过动态地让用户选择他想要编辑的字段或提供一个 excel 表类型的界面来完成，在该界面中进行更改并将其保存到这个已经存在的数据库表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T03:47:07.543

使用 PHP，如果您将表单字段命名为`nameoffield[]`它们将在请求中以数组的形式返回服务器。只需确保空字段在被发送回服务器时有一些占位符，并根据需要一一解析它们执行更新/插入。

# android - 我应该设置什么值才能将手机切换到横向模式？

> ID：10369505
> 
> 赞同：0
> 
> 时间：2012-04-29T03:40:06.513
> 
> 标签：android

在 android 中，我们可以将值 0/1 设置为方向加速度计，以将手机锁定为纵向模式或根据传感器状态旋转。我在网上进行了不同的搜索，但我找不到我应该设置什么值来将手机锁定在横向模式。有人可以帮助我吗？

```
 android.provider.Settings.System.putInt( getContentResolver(),
                                                 android.provider.Settings.System.ACCELEROMETER_ROTATION,
                                                 isLocking ? 0 : 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:43:35.423

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

在您的 setContentView(view) 之后设置上面的行；这会将您该活动的设备方向设置为横向

# c# - Url.Action 没有弄清楚实际的 url

> ID：10369507
> 
> 赞同：0
> 
> 时间：2012-04-29T03:41:41.570
> 
> 标签：c#, asp.net-mvc-3

我正在尝试使用 Url.Action 根据这样的控制器操作生成正确的 HTTP URL： `$.post('@Html.Raw(Url.Action("Delete", new { id = "1" }))')`

但是，它没有按预期工作。触发的实际网址（从开发工具获得）是 `http://localhost:60223/CordBlood/@Html.Raw(Url.Action(%22Delete%22,%20new%20%7B%20id%20=%20%224%22%20%7D))`

而我想要这样的东西： `http://localhost:60223/CordBlood/Delete/1`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:09:25.593

我认为您正在尝试实现与此类似的目标

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.js")" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $("#dropdown").change(function () {
                var id = $("#dropdown").val();

                if (id == "")
                { id = 0; }
                var dataToSend = {
                    Id: id

                };
                RedirectToPage(id);
            });
            function RedirectToPage(id) {
                var url = '@Url.Action("Delete", "yourController", new { Id = "__id__" })';

                window.location.href = url.replace('__id__', id);
            }
        });

    </script> 
```

希望这会给你一些想法

# gcc - 通过 Windows cgo->gcc->ld 的 DLL 链接给出“未定义的引用到（函数）”错误

> ID：10369513
> 
> 赞同：24
> 
> 时间：2012-04-29T03:42:59.883
> 
> 标签：gcc, mingw, go, glfw, cgo

（非常详细的问题报告——tl;dr 在底部！）

我真的更喜欢 GLFW 而不是 Glut，并且希望它的[Golang 绑定](https://github.com/jteeuwen/glfw)在 Windows 64 位和 Go 1.0.1 64 位下工作。在 Linux 下，它的绑定工作完美无缺。这在 Windows 下原则上是可行的——GitHub 用户 chsc[已经设法](https://github.com/chsc/gogl/issues/5)做到[了](https://github.com/chsc/gogl/tree/master/examples/gopher)，但他在 Win32 上，他的提示还没有解决我的问题。但是我确实有一个基于 tdm64-gcc-4.6.1 的完整而干净的 Mingw64 设置。

现在奇怪的是——让 freeglut 绑定在 64 位 Windows 下工作，64 位 Go 1.0.1**工作**——glfw 绑定对我来说**失败**了。我想弄清楚为什么，因为它们*本质上都使用相同的 cgo 特性和技术*。

注意我目前有一个自制的半生不熟但基本上可以工作的替换包，它使用 LoadLibrary/GetProcAddress 调用在 Go 中公开 glfw.dll。这可行，但我认为硬链接的编译 CGO 绑定比无数的 Syscall()、Syscall6()、Syscall9()、Syscall12() 等 Go func 调用更可取。如果 Win32 和 Linux gophers 可以拥有这个，为什么我们 Win64 的人不能呢？

所以这是我到目前为止的设置：

1.  我有一个带有[三个补丁的 Golang 构建，以使 lib 链接与 cgo](http://groups.google.com/group/golang-nuts/browse_thread/thread/b98c3677ec716379)应用一起工作
2.  我已经使用 MinGW64 成功地将最新的 freeglut 和 GLFW 库编译为 64 位 DLL。
3.  头文件glut.h、freeglut*.h和glfw.h放在\MinGW64\x86_64-w64-mingw32\include\GL（gl.h、glaux.h、glu.h旁边）
4.  Lib 文件 libfreeglut.a 和 libglfwdll.a 放在 \MinGW64\x86_64-w64-mingw32\lib （在 libglu32.a、libopengl32.a 旁边）
5.  64 位 DLL glfw.dll 和 freeglut64.dll 被放置在 \windows 和 \windows\system32 中（在 opengl32.dll、glu32.dll 旁边）
6.  我相信freeglut64.dll 和 glfw.dll*都可以工作*——至少他们的大多数示例程序在安装 DLL 后都可以工作。

一切都应该到位，对吧？现在首先要成功绑定（我不需要），freeglut - 当我**去 get -x github.com/zombiezen/Go-GLUT/glut**时，一切都构建得很好，我可以成功创建一个过剩窗口和在从 .go 源文件编译的 Windows test.exe 中显示一个三角形。感谢 -x，go get 显示了它的构建功能：

```
WORK=C:\Users\roxor\AppData\Local\Temp\go-build292908674
mkdir -p $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\
cd C:\Go\src\pkg\github.com\zombiezen\Go-GLUT\glut
C:\Go\pkg\tool\windows_amd64\cgo.exe -objdir $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -- -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ glut.go
C:\Go\pkg\tool\windows_amd64\6c.exe -FVw -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -I C:\Go\pkg\windows_amd64 -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_defun.6 -DGOOS_windows -DGOARCH_amd64 $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_defun.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_main.o -c $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_main.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_export.o -c $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_export.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\glut.cgo2.o -c $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\glut.cgo2.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\support.o -c .\support.c
gcc -I . -g -O2 -m64 -mthreads -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_main.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_export.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\glut.cgo2.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\support.o -lfreeglut
C:\Go\pkg\tool\windows_amd64\cgo.exe -objdir $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -dynimport $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_.o -dynout $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_import.c
C:\Go\pkg\tool\windows_amd64\6c.exe -FVw -I $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\ -I C:\Go\pkg\windows_amd64 -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_import.6 -DGOOS_windows -DGOARCH_amd64 $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_import.c
gcc -I . -g -O2 -m64 -mthreads -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_all.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_export.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\glut.cgo2.o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\support.o -Wl,-r -nostdlib -lgcc -lmingwex -lmingw32
C:\Go\pkg\tool\windows_amd64\6g.exe -o $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_go_.6 -p github.com/zombiezen/Go-GLUT/glut -D _/C_/Go/src/pkg/github.com/zombiezen/Go-GLUT/glut -I $WORK $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_gotypes.go $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\glut.cgo1.go
C:\Go\pkg\tool\windows_amd64\pack.exe grc $WORK\github.com\zombiezen\Go-GLUT\glut.a $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_go_.6 $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_import.6 $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_cgo_defun.6 $WORK\github.com\zombiezen\Go-GLUT\glut\_obj\_all.o
mkdir -p C:\Go\pkg\windows_amd64\github.com\zombiezen\Go-GLUT\
cp $WORK\github.com\zombiezen\Go-GLUT\glut.a C:\Go\pkg\windows_amd64\github.com\zombiezen\Go-GLUT\glut.a 
```

为了达到这一点，我不得不稍微修改一下 glut.go 如下：

```
// # include <GL/glut.h>
// #cgo windows LDFLAGS: -lfreeglut
// #include <stdlib.h>
// #include "support.h"
import "C" 
```

因此，总而言之，这构建得很好，可以从 Go 导入和链接并在代码中使用。

现在为 GLFW。GO 文件的内容与 glut.go 极为相似：

```
//#cgo windows LDFLAGS: -lglfwdll -lglu32 -lopengl32
//#include <stdlib.h>
//#define GLFW_DLL
//#include <GL/glfw.h>
import "C" 
```

#define GLFW_DLL[不会发生静态链接](https://github.com/chsc/gogl/issues/5)。这是**go get -x github.com/jteeuwen/glfw**的输出：

```
WORK=C:\Users\roxor\AppData\Local\Temp\go-build499107422
mkdir -p $WORK\github.com\jteeuwen\glfw\_obj\
cd C:\Go\src\pkg\github.com\jteeuwen\glfw
C:\Go\pkg\tool\windows_amd64\cgo.exe -objdir $WORK\github.com\jteeuwen\glfw\_obj\ -- -I $WORK\github.com\jteeuwen\glfw\_obj\ callback.go glfw.go image.go vidmode.go
C:\Go\pkg\tool\windows_amd64\6c.exe -FVw -I $WORK\github.com\jteeuwen\glfw\_obj\ -I C:\Go\pkg\windows_amd64 -o $WORK\github.com\jteeuwen\glfw\_obj\_cgo_defun.6 -DGOOS_windows -DGOARCH_amd64 $WORK\github.com\jteeuwen\glfw\_obj\_cgo_defun.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\_cgo_main.o -c $WORK\github.com\jteeuwen\glfw\_obj\_cgo_main.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\_cgo_export.o -c $WORK\github.com\jteeuwen\glfw\_obj\_cgo_export.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\callback.cgo2.o -c $WORK\github.com\jteeuwen\glfw\_obj\callback.cgo2.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o -c $WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o -c $WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\vidmode.cgo2.o -c $WORK\github.com\jteeuwen\glfw\_obj\vidmode.cgo2.c
gcc -I . -g -O2 -m64 -mthreads -I $WORK\github.com\jteeuwen\glfw\_obj\ -o $WORK\github.com\jteeuwen\glfw\_obj\callback.o -c .\callback.c
gcc -I . -g -O2 -m64 -mthreads -o $WORK\github.com\jteeuwen\glfw\_obj\_cgo_.o $WORK\github.com\jteeuwen\glfw\_obj\_cgo_main.o $WORK\github.com\jteeuwen\glfw\_obj\_cgo_export.o $WORK\github.com\jteeuwen\glfw\_obj\callback.cgo2.o $WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o $WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o $WORK\github.com\jteeuwen\glfw\_obj\vidmode.cgo2.o $WORK\github.com\jteeuwen\glfw\_obj\callback.o -lglfwdll -lglu32 -lopengl32
# github.com/jteeuwen/glfw
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetNumberOfProcessors':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:39: undefined reference to `__imp_glfwGetNumberOfProcessors'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetKey':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:51: undefined reference to `__imp_glfwGetKey'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSetTime':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:60: undefined reference to `__imp_glfwSetTime'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwExtensionSupported':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:71: undefined reference to `__imp_glfwExtensionSupported'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwPollEvents':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:80: undefined reference to `__imp_glfwPollEvents'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetMousePos':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:90: undefined reference to `__imp_glfwGetMousePos'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetJoystickParam':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:102: undefined reference to `__imp_glfwGetJoystickParam'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetProcAddress':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:112: undefined reference to `__imp_glfwGetProcAddress'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetGLVersion':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:123: undefined reference to `__imp_glfwGetGLVersion'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSetMouseWheel':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:133: undefined reference to `__imp_glfwSetMouseWheel'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetJoystickPos':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:148: undefined reference to `__imp_glfwGetJoystickPos'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwOpenWindow':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:168: undefined reference to `__imp_glfwOpenWindow'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSetMousePos':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:178: undefined reference to `__imp_glfwSetMousePos'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSwapInterval':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:188: undefined reference to `__imp_glfwSwapInterval'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetMouseButton':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:209: undefined reference to `__imp_glfwGetMouseButton'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSetWindowTitle':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:218: undefined reference to `__imp_glfwSetWindowTitle'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetVideoModes':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:231: undefined reference to `__imp_glfwGetVideoModes'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetJoystickButtons':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:246: undefined reference to `__imp_glfwGetJoystickButtons'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwRestoreWindow':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:255: undefined reference to `__imp_glfwRestoreWindow'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwInit':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:265: undefined reference to `__imp_glfwInit'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSwapBuffers':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:274: undefined reference to `__imp_glfwSwapBuffers'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetMouseWheel':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:284: undefined reference to `__imp_glfwGetMouseWheel'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwIconifyWindow':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:293: undefined reference to `__imp_glfwIconifyWindow'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwWaitEvents':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:302: undefined reference to `__imp_glfwWaitEvents'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSetWindowPos':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:312: undefined reference to `__imp_glfwSetWindowPos'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetWindowSize':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:322: undefined reference to `__imp_glfwGetWindowSize'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwDisable':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:332: undefined reference to `__imp_glfwDisable'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetWindowParam':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:344: undefined reference to `__imp_glfwGetWindowParam'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwCloseWindow':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:353: undefined reference to `__imp_glfwCloseWindow'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwOpenWindowHint':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:363: undefined reference to `__imp_glfwOpenWindowHint'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSleep':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:372: undefined reference to `__imp_glfwSleep'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwEnable':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:382: undefined reference to `__imp_glfwEnable'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwSetWindowSize':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:392: undefined reference to `__imp_glfwSetWindowSize'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwTerminate':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:411: undefined reference to `__imp_glfwTerminate'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetDesktopMode':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:420: undefined reference to `__imp_glfwGetDesktopMode'
$WORK\github.com\jteeuwen\glfw\_obj\glfw.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwGetTime':
C:\Go\src\pkg\github.com\jteeuwen\glfw/glfw.go:429: undefined reference to `__imp_glfwGetTime'
$WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwFreeImage':
C:\Go\src\pkg\github.com\jteeuwen\glfw/image.go:38: undefined reference to `__imp_glfwFreeImage'
$WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwReadImage':
C:\Go\src\pkg\github.com\jteeuwen\glfw/image.go:52: undefined reference to `__imp_glfwReadImage'
$WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwLoadTextureImage2D':
C:\Go\src\pkg\github.com\jteeuwen\glfw/image.go:65: undefined reference to `__imp_glfwLoadTextureImage2D'
$WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwLoadMemoryTexture2D':
C:\Go\src\pkg\github.com\jteeuwen\glfw/image.go:78: undefined reference to `__imp_glfwLoadMemoryTexture2D'
$WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwLoadTexture2D':
C:\Go\src\pkg\github.com\jteeuwen\glfw/image.go:91: undefined reference to `__imp_glfwLoadTexture2D'
$WORK\github.com\jteeuwen\glfw\_obj\image.cgo2.o: In function `_cgo_680190d759a2_Cfunc_glfwReadMemoryImage':
C:\Go\src\pkg\github.com\jteeuwen\glfw/image.go:107: undefined reference to `__imp_glfwReadMemoryImage'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setWindowSizeCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:9: undefined reference to `__imp_glfwSetWindowSizeCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setWindowCloseCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:14: undefined reference to `__imp_glfwSetWindowCloseCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setWindowRefreshCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:19: undefined reference to `__imp_glfwSetWindowRefreshCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setMouseButtonCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:24: undefined reference to `__imp_glfwSetMouseButtonCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setMousePosCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:29: undefined reference to `__imp_glfwSetMousePosCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setMouseWheelCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:34: undefined reference to `__imp_glfwSetMouseWheelCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setKeyCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:39: undefined reference to `__imp_glfwSetKeyCallback'
$WORK\github.com\jteeuwen\glfw\_obj\callback.o: In function `setCharCB':
C:/Go/src/pkg/github.com/jteeuwen/glfw/callback.c:44: undefined reference to `__imp_glfwSetCharCallback'
collect2: ld returned 1 exit status 
```

是的，这是一个拗口——但基本上总是同样的错误，而且在构建过程中相当晚。请注意，如果未定义#define GLFW_DLL，我将得到基本相同的输出，除了没有 __imp_ 前缀——静态链接既不鼓励 Go，也不适合这个特定用例。

现在，当 gcc 抱怨“未定义的引用”时，从我的谷歌搜索来看，可能有各种原因......

*   找不到 DLL 不可能是失败的——它们在适当的位置，对于 freeglut64.dll 它可以工作
*   不可能找不到 .a 库——它们位于适当的位置，并且 libfreeglut.a 有效，如果我将 -lglfwdll 更改为 -lblafoobar 则 gcc 会更早失败并正确地抱怨“找不到 blafoobar”——所以它*确实*找到了 libglfwdll.a。
*   lib依赖的顺序？我尝试将 -lglfwdll 作为第一个库（在 -lglu32 -lopengl32 之前）和作为最后一个库（在这两个库之后），没有区别。
*   Golang glfw 绑定有问题吗？不这么认为，适用于其他人，包括在 Windows 下用于 chsc（虽然是 32 位）

TL;DR——在 Windows 64 位、Go 1.0.1 64 位完全修补下，CGO 成功生成内容以供freeglut 和 glfw**输入GCC。**然后 GCC 很高兴地吃掉这些东西来构建 freeglut 绑定，*但*拒绝它来构建 glfw 绑定，所有 C.funcs() 都有“未定义的引用”。libfreeglut 和 libglfwdll 都正确构建并安装为 64 位 DLL 和正确定位的 .h/.a 库。可能是什么原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T13:34:34.497

我已经有一段时间遇到完全相同的问题了，每次我解决上次尝试的挫败感时，我都在研究它。为 go 编译 32 位 glfw 没问题，但 64 位版本让我望而却步。

今天，在阅读了 kneo 的评论后，我尝试了他的解决方案，但无法让它发挥作用。但这让我看到了 libglfwdll.a 有 @nn stdcall 后缀，而 libglfw.a 没有它们。尝试各种 LDFLAGS (-Wl,--kill-at, -Wl,--enable-stdcall-fixup) 没有产生成功的结果，我研究了[http://www.willus.com/mingw/yongweiwu_stdcall.html](http://www.willus.com/mingw/yongweiwu_stdcall.html)但不能不要让它工作。

当我决定查看是否有带有以下错误修复的新版本 glfw (2.7.6) 时，我正要放弃：

```
[Win32] Bugfix: A .def file using __stdcall naming conventions was used for the 64-bit DLL on MinGW-w64 
```

so long story short, compiling the new glfw version and installing it fixed the issue and `go get github.com/jteeuwen/glfw` now works without any problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T19:36:18.517

No longer an issue with the newest releases of Go, GLFW and Mingw-w64.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-30T21:35:03.773

我能想到两种可能：

1.  这些符号实际上不存在于库中。您可以使用`nm`. 确保符号类型是大写字母；如果只有小写代码，则库构建不正确。

2.  你有一个循环依赖。即库 A 依赖于库 B，而库 B 又依赖于 A。您可以再次将库添加到命令中或使用链接器组（请参阅 参考资料`ld --help`）来解决这个问题。

请注意，命令行中库的顺序非常重要：链接器依次读取每个库，按照它们出现的顺序，搜索当时需要的符号，然后继续。如果符号首先由后期库引用，则链接器将不会重新访问早期库以查找定义。这就是为什么循环依赖是一个问题的原因。

# android - Titanium android键盘隐藏，当软键盘可见时

> ID：10369516
> 
> 赞同：0
> 
> 时间：2012-04-29T03:44:30.890
> 
> 标签：android, titanium-mobile

我在那里创建了一个聊天应用程序，一切正常。但有2个问题。第一：我的聊天窗口包含一个标题视图和一个表格视图，其中包含带有聊天标签（文本）的行、一个文本字段和用于键入单词的按钮。

现在假设当聊天表中没有任何内容时，只有一行带有聊天标签。，当我尝试在键盘上键入任何内容时，聊天标签会离开视图，我的意思是当窗口打开时，表视图会自行向上推..打开键盘时如何调整表格视图的大小。

第二：奇怪的问题。当我加载旧聊天并循环浏览它们并附加到表格视图时。它有时会根据循环对其自身进行索引.. 一些表行超出前一行

例子 。一个 tableview 行的聊天时间为上午 11:52，其他时间为 12:00，有时 12:00 超过 11:52 行。虽然我在循环中附加了行..请任何建议都会有所帮助。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T03:51:07.183

```
TextField.blur(); 
```

将隐藏键盘。

下面的示例是 DONE 按钮的事件侦听器。单击按钮时，键盘消失。

```
done.addEventListener('click',function(){ nameTxt.blur(); }); 
```

# c# - RazorEngine 字符串布局和部分？

> ID：10369519
> 
> 赞同：19
> 
> 时间：2012-04-29T03:44:44.143
> 
> 标签：c#, embedded-resource, razorengine

我像这样使用剃须刀引擎：

```
public class EmailService : IService
{
    private readonly ITemplateService templateService;

    public EmailService(ITemplateService templateService)
    {
        if (templateService == null)
        {
            throw new ArgumentNullException("templateService");
        }
        this.templateService = templateService;
    }

    public string GetEmailTemplate(string templateName)
    {
        if (templateName == null)
        {
            throw new ArgumentNullException("templateName");
        }
        Assembly assembly = Assembly.GetAssembly(typeof(EmailTemplate));
        Stream stream = assembly.GetManifestResourceStream(typeof(EmailTemplate), "{0}.cshtml".FormatWith(templateName));
        string template = stream.ReadFully();
        return template;
    }

    public string GetEmailBody(string templateName, object model = null)
    {
        if (templateName == null)
        {
            throw new ArgumentNullException("templateName");
        }
        string template = GetEmailTemplate(templateName);
        string emailBody = templateService.Parse(template, model, null, null);
        return emailBody;
    }
} 
```

我使用的模板服务是注入的，尽管它只是一个默认实现：

```
 internal ITemplateService InstanceDefaultTemplateService()
    {
        ITemplateServiceConfiguration configuration = new TemplateServiceConfiguration();
        ITemplateService service = new TemplateService(configuration);
        return service;
    } 
```

因为在这种情况下，我将特别从这些模板构建电子邮件。我希望能够将`@section`s 用于 email'a 主题和电子邮件正文的不同部分，同时使用我指定整个电子邮件结构共有的样式的布局（看起来像[MailChimp](http://mailchimp.com/resources/html-email-templates/)的一个大概）。

那么问题是双重的：

*   如何在 中指定布局`RazorEngine`？
*   如何从字符串（或流）中指定这些布局？如您所见，我使用嵌入式资源来存储剃刀电子邮件模板。

# 更新

也许我不清楚，但我指的是[**RazorEngine**](http://razorengine.codeplex.com/)库。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-12T18:13:35.670

经过一番挖掘后发现支持布局，我们只需要声明它们`_Layout`而不是`Layout`

至于嵌入式资源问题，我实现了以下`ITemplateResolver`

```
using System;
using System.IO;
using System.Reflection;
using Bruttissimo.Common;
using RazorEngine.Templating;

namespace Website.Extensions.RazorEngine
{
    /// <summary>
    /// Resolves templates embedded as resources in a target assembly.
    /// </summary>
    public class EmbeddedTemplateResolver : ITemplateResolver
    {
        private readonly Assembly assembly;
        private readonly Type type;
        private readonly string templateNamespace;

        /// <summary>
        /// Specify an assembly and the template namespace manually.
        /// </summary>
        /// <param name="assembly">The assembly where the templates are embedded.</param>
        /// <param name="templateNamespace"></param>
        public EmbeddedTemplateResolver(Assembly assembly, string templateNamespace)
        {
            if (assembly == null)
            {
                throw new ArgumentNullException("assembly");
            }
            if (templateNamespace == null)
            {
                throw new ArgumentNullException("templateNamespace");
            }
            this.assembly = assembly;
            this.templateNamespace = templateNamespace;
        }

        /// <summary>
        /// Uses a type reference to resolve the assembly and namespace where the template resources are embedded.
        /// </summary>
        /// <param name="type">The type whose namespace is used to scope the manifest resource name.</param>
        public EmbeddedTemplateResolver(Type type)
        {
            if (type == null)
            {
                throw new ArgumentNullException("type");
            }
            this.assembly = Assembly.GetAssembly(type);
            this.type = type;
        }

        public string Resolve(string name)
        {
            if (name == null)
            {
                throw new ArgumentNullException("name");
            }
            Stream stream;
            if (templateNamespace == null)
            {
                stream = assembly.GetManifestResourceStream(type, "{0}.cshtml".FormatWith(name));
            }
            else
            {
                stream = assembly.GetManifestResourceStream("{0}.{1}.cshtml".FormatWith(templateNamespace, name));
            }
            if (stream == null)
            {
                throw new ArgumentException("EmbeddedResourceNotFound");
            }
            string template = stream.ReadFully();
            return template;
        }
    }
} 
```

然后你只需像这样连接它：

```
 internal static ITemplateService InstanceTemplateService()
    {
        TemplateServiceConfiguration configuration = new TemplateServiceConfiguration
        {
            Resolver = new EmbeddedTemplateResolver(typeof(EmailTemplate))
        };
        ITemplateService service = new TemplateService(configuration);
        return service;
    } 
```

您传递的类型仅用于引用嵌入资源的程序集和命名空间。

```
namespace Website.Domain.Logic.Email.Template
{
    /// <summary>
    /// The purpose of this class is to expose the namespace of razor engine templates in order to
    /// avoid having to hard-code it when retrieving the templates embedded as resources.
    /// </summary>
    public sealed class EmailTemplate
    {
    }
} 
```

最后一件事，为了让我们的解析器解析模板，我们必须像这样解析它们：

```
ITemplate template = templateService.Resolve(templateName, model);
string body = template.Run();
return body; 
```

`.Run`只是一个简单的扩展方法，因为我找不到`ViewBag`.

```
public static class ITemplateExtensions
{
    public static string Run(this ITemplate template)
    {
        ExecuteContext context = new ExecuteContext();
        string result = template.Run(context);
        return result;
    }
} 
```

# 更新

这是缺少的扩展

```
 public static string FormatWith(this string text, params object[] args)
    {
        return string.Format(text, args);
    }

    public static string ReadFully(this Stream stream)
    {
        using (StreamReader reader = new StreamReader(stream))
        {
            return reader.ReadToEnd();
        }
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-07T07:57:29.823

我需要以字符串或文件名的形式提供我自己的布局。这是我解决这个问题的方法（基于[这篇博文](https://docs.microsoft.com/en-gb/archive/blogs/hongyes/using-razor-template-engine-in-web-api-self-host-application)）

```
public static class RazorEngineConfigurator
{
    public static void Configure()
    {
        var templateConfig = new TemplateServiceConfiguration
            {
                Resolver = new DelegateTemplateResolver(name =>
                    {
                        //no caching cause RazorEngine handles that itself
                        var emailsTemplatesFolder = HttpContext.Current.Server.MapPath(Properties.Settings.Default.EmailTemplatesLocation);
                        var templatePath = Path.Combine(emailsTemplatesFolder, name);
                        using (var reader = new StreamReader(templatePath)) // let it throw if doesn't exist
                        {
                            return reader.ReadToEnd();
                        }
                    })
            };
        RazorEngine.Razor.SetTemplateService(new TemplateService(templateConfig));
    }
} 
```

然后我在 Global.asax.cs 中调用 RazorEngineConfigurator.Configure() 并准备就绪。

我的模板的路径在 Properties.Settings.Default.EmailTemplatesLocation

在我看来，我有这个：

```
@{ Layout = "_layout.html";} 
```

_layout.html 在 emailsTemplatesFolder 中

这是一个非常标准的 HTML，中间有一个 @RenderBody() 调用。

据我了解，RazorEngine 使用模板名称（在本例中为“_layout.html”）作为其缓存的键，因此我的配置器中的委托每个模板仅调用一次。

我认为它对它不知道的每个模板名称（还）使用该解析器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-08T19:46:16.587

看起来有人为你解决了它。

[https://github.com/aqueduct/Appia/blob/master/src/Aqueduct.Appia.Razor/RazorViewEngine.cs](https://github.com/aqueduct/Appia/blob/master/src/Aqueduct.Appia.Razor/RazorViewEngine.cs)

您想要的代码在第二个 ExecuteView 方法中。尽管他们正在创建自己的视图引擎，但您可以创建自己的自定义模板解决方案并使用类似的东西。基本上他们正在寻找模板的布局属性，如果它存在，则搜索和替换布局中的内容。

这是 RazorEngine 的自定义模板的链接：

[http://razorengine.codeplex.com/wikipage?title=Building%20Custom%20Base%20Templates&referringTitle=Documentation](http://razorengine.codeplex.com/wikipage?title=Building%20Custom%20Base%20Templates&referringTitle=Documentation)

这是我找到您的解决方案的地方：

[.NET Razor 引擎 - 实现布局](https://stackoverflow.com/questions/5937000/net-razor-engine-implementing-layouts)

# actionscript-3 - actionscript 奇怪的 getter/setter 访问

> ID：10369520
> 
> 赞同：0
> 
> 时间：2012-04-29T03:44:45.727
> 
> 标签：actionscript-3, interface, getter-setter

根据“工厂”设计模式构想一个库，我需要区分被认为是“只读”的接口和那些也可以具有写入权限的接口。因此，我开发了以下架构：

```
public interface IReadOnly {
    function get value (): Number;
}
public interface IReadWrite extends IReadOnly {
    function set value (v:Number): void;
}
internal class ReadWrite implements IReadWrite {
    public function get value (): Number {
        return m_value;
    }
    public function set value (v:Number): void {
        m_value = v;
    }
    protected var m_value:Number;
} 
```

所以问题是：我无法访问类实例上的 getter。Flex 将拒绝编译以下代码：

```
function doSomething (rw:IReadWrite): void {
    var num:Number = rw.value;
} 
```

Flex 告诉我：“1178：试图通过静态类型 IReadWrite 的引用访问不可访问的属性值。”
当我用一个简单的函数替换 setter 时，比如`function setValue (v:Number): void;`一切顺利。

有人已经遇到过这种情况吗？它是编译器错误吗？任何可以解决问题的编译器参数？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:04:57.407

您的 IReadWrite 接口错误地扩展了 ReadWrite 类；它需要扩展 IReadOnly 接口。

我很惊讶编译器甚至允许您声明一个扩展类的接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T18:33:02.550

不确定您是否曾经设法解决此问题，但我找到了解决方法。您需要将调用 getter 的对象转换为实际定义 getter 方法的接口。所以函数调用看起来像这样：

```
 function doSomething (rw:IReadWrite): void {
    var num:Number = IReadOnly(rw).value;
} 
```

它看起来很丑，但它可以完成工作。

# python - 如何制作一个创建要在同一表单上使用的新相关模型对象的表单？

> ID：10369524
> 
> 赞同：0
> 
> 时间：2012-04-29T03:45:19.797
> 
> 标签：python, django, forms, models

好的，我确定这个问题令人困惑。想象一下我们有这个模型：

```
class Phone(models.Model):
    serial = models.CharField(max_length=13, unique=True)
    model = models.CharField(max_length=4, choices=MODELOS)

class Contract(models.Model):
    number = models.IntegerField()
    phone = models.OneToOneField(Phone)
    notes = models.TextField(blank=True, null=True)
    sign = models.BooleanField(default=False) 
```

我需要制作一个可以输入这些模型中所有字段的表单。在一个页面中，我需要指定手机的序列号和型号以及合同编号、注释和签名。电话字段应该是在同一时刻创建的字段。我将如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:25:55.410

正如 ilvar 建议的那样，定义两个[模型形式](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)

```
class PhoneForm(forms.ModelForm):
    class Meta:
        model = Phone

class ContractForm(forms.ModelForm):
    class Meta:
        model = Contract
        exclude = ('phone',)

def add(request):
   ...
   if request.method == 'POST':
       phone_form = PhoneForm(request.POST)
       contract_form = ContractForm(request.POST)
       if phone_form.is_valid() and contract_form.is_valid():
           phone = phone_form.save()
           contract = contract_form.save(commit=False)
           contract.phone = phone
           contract.save()
   ... 
```

另外，只是好奇你为什么使用`OneToOneField`而不是`ForeignKey`or `ManyToManyField`，无论如何。

# php - PHP Image Resize 代码在 FIreFox 上不起作用

> ID：10369526
> 
> 赞同：0
> 
> 时间：2012-04-29T03:46:31.460
> 
> 标签：php, firefox, image-resizing

在[http://pastebin.com/te7gAhWq](http://pastebin.com/te7gAhWq)上的图像调整 PHP 代码适用于 Internet Explorer 和 chrome，但不适用于 firefox，不知道为什么，我使用的是最近升级到 firefox 12 的 firefox 4.0。我将这个测试代码写回2011 然后我使用的是 firefox 3，它在 firefox 3 上工作。有没有人经历过这个。知道为什么会这样吗？

# visual-studio - Visual Studio 单元测试在启动时挂起

> ID：10369530
> 
> 赞同：4
> 
> 时间：2012-04-29T03:47:22.213
> 
> 标签：visual-studio, unit-testing, freeze

我在 C# 中创建了简单的“HelloWorld”控制台应用程序。然后右键单击-> 创建模块测试...然后开始此测试。当我按下停止测试时，“结果”列永远显示“等待”并保持相同的状态。此外，它不会在测试的第一次中风时遇到断点。为什么会发生这个问题？我已经重新安装了 .net 和 Visual Studio，但没用；

# java - 空对象/类实例 28 个字节？

> ID：10369532
> 
> 赞同：6
> 
> 时间：2012-04-29T03:48:33.860
> 
> 标签：java

我做了一些基准测试，比较了 int 与 Integer、long 与 Long、空类实例与具有 long 值的类实例的性能。

我有几个问题我自己无法回答：

1.  为什么实例化空类或对象需要 28 个字节？
2.  Long 对象的实例化需要 29 个字节，原始 long 8 个字节，那么为什么与空类的差异只有 1 个字节？JVM做了什么样的优化？

我在 MacOS 上使用了 JDK1.6.0_30，代码可在 [https://github.com/mousator/benchmarks/blob/master/src/sk/emandem/michal/AutoboxingTypeBenchmark.java](https://github.com/mousator/benchmarks/blob/master/src/sk/emandem/michal/AutoboxingTypeBenchmark.java)获得 （您可以查看整个项目）

感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T03:56:59.463

1.  我不会相信你的记忆测量技术。只是打电话`runtime.gc()`并不一定会做任何事情。使用[MemoryMeasurer 之](http://code.google.com/p/memory-measurer/)类的工具。
2.  数组会产生自己的开销：通常大约为 12 个字节；八个用于对象头，四个用于数组长度，然后每个数组条目四个字节用于引用。（这是在 32 位 VM 上。）

# x86 - （写内核）如何修改中断描述符表？

> ID：10369536
> 
> 赞同：13
> 
> 时间：2012-04-29T03:49:34.733
> 
> 标签：x86, kernel, interrupt-handling, osdev, context-switch

我正在编写一个小内核，只是为了稍微了解一下低级的东西。现在，它在 Virtual Box 中启动，我可以在屏幕上显示文本、分配一些内存以及其他非常基本的事情。它是用 C++ 和一点 asm 编写的。

我想探索的一件事是多任务处理背后的机制。据我了解，它是这样的：

1.  内核初始化中断描述符表，以便周期性地（例如毫秒）发出中断并调用内核中定义的例程。
2.  当例程被调用时，它可以决定将代码/数据段和堆栈指针设置为另一个程序的上下文，即“上下文切换”。

所以，它在概念上似乎很简单，但我知道细节会变得更加复杂。我在网上找到了一些东西，但术语变化很大，而且这些例子似乎来自我没有的上下文（比如来自 Linux 内核）。

但是，设置描述符表的方式似乎是这样的：

1.  将一些数据发送到 PIC（`outb`以及其他）以对其进行初始化。
2.  在内存中准备一个中断表，其中包含指向所需例程的函数指针，注意这些函数能够成为信号处理程序。
3.  用 加载表`lidt`。

但是，我找不到太多关于专门做这些事情的信息，或者这是否正确。有没有人有困惑的内核编写者的资源？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T05:00:34.957

当您的 PC 启动时，BIOS 对 PIC 进行编程，使 IRQ0 到 IRQ15 绑定到 int 8 到 int 0Fh 和 int 70h 到 int 77h。这对于 BIOS 运行和 MSDOS 运行的实地址模式是可以的。

但是您需要在切换到保护模式时更改此映射，因为一些重要的异常发生在 int 8 到 int 0Fh 上（最值得注意的是，#GP、#SS、#PF）。您希望这样做是因为您希望能够轻松地区分这些异常和来自定时器和实时时钟、键盘和鼠标、磁盘和 I/O 端口（串行和并行）的硬件中断。

这可能是您概述的第一步。所以，在网上查找“PIC中断重新映射”或类似的东西。此外，下载 8259 芯片（PIC）的一些规格，以便更好地了解您在做什么以及它是如何工作的。“HelpPC”是一个很好的旧参考资料，其中包含有关各种 PC 硬件的一些信息。

还有“PCGPE”（PC 游戏编程百科全书）和“RBIL”（Ralf Brown 的中断列表）可能会有很大帮助。

IVT/IDT 设置在 Intel 和 AMD CPU 文档中进行了描述。这一切都在那里。不是最愉快的阅读，而是最详细和最权威的。

有许多自制操作系统爱好者的网站等，您可以在其中找到更多详细信息和代码片段。

# python - 在 Python 中使用字典代替 Case/Switch 语句

> ID：10369537
> 
> 赞同：8
> 
> 时间：2012-04-29T03:50:20.927
> 
> 标签：python, random, dictionary, rubiks-cube

我想随机化一个初始化为完整的魔方（所有颜色都在正确的一边）。我有旋转立方体的移动功能。我想连续随机选择 50 个函数来正确随机化它。

我正在做这个项目来了解更多关于 Python 的知识，因为我主要使用 C++ 并且我看到 Python 没有大小写/开关，所以我正在尝试字典。当我制作字典时，代码似乎出于某种原因执行：

```
def random_cube(self):
    scramble = {    0 : self.up_turn(),
                    1 : self.down_turn(),
                    2 : self.left_turn(),
                    3 : self.right_turn(),
                    4 : self.front_turn(),
                    5 : self.back_turn(),
                    6 : self.up_turn("inverted"),
                    7 : self.down_turn("inverted"),
                    8 : self.left_turn("inverted"),
                    9 : self.right_turn("inverted"),
                    10: self.front_turn("inverted"),
                    11: self.back_turn("inverted")
                }
    for x in range(50):
        i = random.randint(0,11)
        scramble[i] 
```

所以当我制作这本字典时，它似乎出于某种原因运行并执行了所有 11 个条目（我认为）。我似乎找不到更好的方法，至少比长长的 if/elif 语句更优雅。

！编辑：实现这两个建议，函数的（“倒置”）标志都没有被任何一个建议设置。例如，调用 1 和 7 都给了我 down_turn，但输出显示该标志本应位于编号 7 上时未设置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-29T03:58:13.967

当您定义字典时，它实际上是在调用函数，并将返回值存储在字典中。要让字典存储对函数的引用，您需要删除尾括号。所以像：

```
scramble = {  0: self.up_turn,
              1: self.down_turn,
              etc. 
```

然后，在底部，调用`scramble[i]()`。

这将调用不带参数的函数。要处理将“反转”作为参数传递的情况，您可以定义单独的函数，如 up_turn_inverted() 等，或者您可以让字典存储由函数和参数组成的 2-ple，然后调用喜欢的东西`scramble[i][0](scramble[i][1])`

从评论中的建议更新：您还可以使用 lambda 表达式来定义函数，尤其是那些需要参数的函数。这基本上等同于定义一个 up_turn_inverted 函数，但作为匿名函数就地完成。它看起来像这样：

```
6: lambda: self.up_turn("inverted")
7: lambda: self.down_turn("inverted") 
```

等等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T03:59:59.383

我相信这被称为“作为一等值的函数”，这意味着最重要的是，您可以将引用函数的标识符作为参数传递给其他函数。

当您定义字典时，Python 解释器会评估函数并将值存储在字典中。要将其推迟到生成随机数之前，请尝试通过省略括号将对函数本身的引用存储在字典中：

```
def random_cube(self):
    scramble = {    0 : self.up_turn,
                    1 : self.down_turn,
                    2 : self.left_turn,
                    3 : self.right_turn,
                    4 : self.front_turn,
                    5 : self.back_turn,
                    6 : self.up_turn,
                    7 : self.down_turn,
                    8 : self.left_turn,
                    9 : self.right_turn,
                    10: self.front_turn,
                    11: self.back_turn
                } 
```

然后，在 for 循环中调用函数时，您必须区分您传递的参数的正常情况和反转情况：

```
 for x in range(50):
        i = random.randint(0,11)
        if i <= 5:
            scramble[i]()
        else:
            scramble[i]("inverted") 
```

或更简单地说：

```
 for x in range(50):
        i = random.randint(0,11)
        scramble[i]( () if i < 6 else ("inverted")) 
```

# node.js - 我可以要求“要求”从我的应用程序根目录中搜索模块吗？

> ID：10369538
> 
> 赞同：2
> 
> 时间：2012-04-29T03:50:23.797
> 
> 标签：node.js

我有一个带有目录的应用程序，这些目录中的文件通过`require`. 我可能会移动它们，所以我讨厌使用相对路径。有没有办法使用相对于我的应用程序根目录的路径？

我有

```
/home/robert/src/application/
  |\ routes
  |    \ foo.js
  |\ models
       \ bar.js
// foo.js
var bar = require('../models/bar')
  , stuff = require('../other_stuff/stuff'); 
```

我想

```
/home/robert/src/application/
  |\ routes
  |    \ foo.js
  |\ models
       \ bar.js
// foo.js
var bar = require('/models/bar')
  , stuff = require('/other_stuff/stuff'); 
```

除了路径被附加到`/home/robert/src`而不是自行评估之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:28:01.713

很多人已经开始创建一个`index.js`文件，从一个地方导出他们所有的模块。然后，模块只需要索引文件中的这些导出，而不是实际定义模块的位置。如果您移动任何东西，您只需要更新这个文件。此外，它还使得创建代码覆盖构建变得更加容易。

Index.js 只是以一堆这样的行结束：

```
module.exports.app = process.env.EXPRESS_COV ?
    require('./lib-cov/app') : require('./lib/app'); 
```

基本上，这`app`会根据变量使用标准模块或代码覆盖版本导出任何需要它的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:33:53.947

关于什么

```
require(__dirname + '/models/bar'); 
```

请参阅：[http ://nodejs.org/docs/latest/api/globals.html#globals_dirname](http://nodejs.org/docs/latest/api/globals.html#globals_dirname)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-29T06:29:16.433

将您的应用程序放入应用程序根目录中的一个文件夹（例如，`./app`），然后将此代码段包含到您的`package.json`：

```
"scripts": {
  "postinstall": "ln -sf ../app ./node_modules"
} 
```

并运行命令。`app`这会将文件夹软链接到您的 .Node 中`node_modules`，从而允许 Node`require`做它最擅长的事情。您将能够像这样要求您的模块：

```
require('app/routes/foo') 
```

（Windows 用户需要手动完成；不确定它是否可以在 Windows 上运行。）

# php - 转换网络掩码 php

> ID：10369539
> 
> 赞同：-1
> 
> 时间：2012-04-29T03:50:34.337
> 
> 标签：php, cidr, netmask

如何将网络掩码转换为特定的网络掩码。

示例：127.0.0.0/16 转换为 /24 网络掩码。

它应该输出如下内容：

```
127.0.0.0/24
127.0.1.0/24
127.0.2.0/24
127.0.2.0/24 
```

等一直到 127.0.255.0/24。

这如何通过 PHP 来实现？我找到了这个工具： http: [//jodies.de/ipcalc](http://jodies.de/ipcalc)它是用 PERL 编码的。如何使用 PHP 获得类似的功能？

我发现了这个：http: [//jasonkolpin.com/classes/ipcalc/demo.php](http://jasonkolpin.com/classes/ipcalc/demo.php)虽然它似乎坏了.. 可能会尝试修复它。

**更新已解决：**我基本上运行：`$exec = shell_exec("/usr/local/bin/ipcalc 127.0.0.0/16 24 -b -n");`并解析出 Network: 字段。这基本上将 127.0.0.0/16 转换为所有 /24s。

确保在主机上安装了 ipcalc 以完成此操作。您可以通过`yum install ipcalc`在 CentOS、`apt-get install ipcalc`Ubuntu 或`cd /usr/ports/net-mgmt/ipcalc/ && make install clean`FreeBSD 中使用来做到这一点 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T21:59:10.213

我已经构建了一个库来[在纯 PHP 中进行 IP 地址操作](https://github.com/leth/PHP-IPAddress)。

你必须这样做：

```
<?php
use Leth\IPAddress\IP;
$current_cidr = 16;
$desired_cidr = 24;
$net = IP\NetworkAddress::factory('127.0.0.0', $current_cidr);
$subnets = $net->split($desired_cidr - $current_cidr); 
```

# mysql - 选择合适的数据类型大小？

> ID：10369543
> 
> 赞同：0
> 
> 时间：2012-04-29T03:51:31.750
> 
> 标签：mysql, sql

例如，在 varchar 数据类型上，我允许用户名的最大字符数为 25。这是否意味着最佳列是`varchar(25)`？

* * *

**编辑**：这是否也意味着字符串的长度=字符串的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:21:20.177

MySQL 中 VARCHAR 列的大小实际上并不那么重要！在大多数（全部？）存储引擎下，每行所需的存储量**不会随着**列的大小增加到最大值`VARCHAR(255)`. 使用 a`VARCHAR(256)`或更大将每行使用一个额外的字节，这仍然不是很多。（此时您可能仍想考虑使用`TEXT`列。）

因此，请慷慨地使用您的列大小。避免将非技术限制（例如用户名中的 25 个字符的限制）硬编码到数据库中——如果您稍后改变主意，那么仅更改验证代码比更改可能非常大的表要容易得多。例如，对于用户名，我只需将列大小设置为中等荒谬的`VARCHAR(64)`值，以便将来扩展。只要确保，如果相同的“数据类型”（例如，用户名）出现在数据库的其他地方，您始终使用相同的大容量。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T03:56:19.003

或者只是 char(25) 任何一种方式。但是 varchar(25) 听起来不错。

# c++ - 调用复制构造函数没有匹配的函数

> ID：10369544
> 
> 赞同：4
> 
> 时间：2012-04-29T03:52:03.490
> 
> 标签：c++, no-match

我有一个类 Graph，其复制构造函数在 Graph.h 中声明，如下所示：

```
template<typename Object,typename Weight>              
Graph<Object,Weight>::Graph(Graph<Object,Weight>& G) 
```

在其他地方，我尝试使用它：

```
Graph<double,double> G = make_graph("dense.g"); 
```

...但它给了我以下错误：

```
time_trialsALIST.cpp:37: 错误: 没有匹配函数调用 `Graph::Graph(Graph)'
Graph.h:142：注意：候选人是：Graph::Graph(Graph&) [with Object = double, Weight = double]

```

我不明白为什么会发生这种情况；make_graph 函数只返回一个图形：

```
Graph<double,double>  make_graph(string filename){...} 
```

我需要在某处使用“&”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T04:04:11.067

[在这里阅读答案](https://stackoverflow.com/questions/1602058/why-is-the-copy-constructor-argument-const)。换句话说，您缺少 a `const`，而不是`&`. 做了：

```
template<typename Object,typename Weight>              
Graph<Object,Weight>::Graph(const Graph<Object,Weight>& G) 
```

您不能将临时对象绑定到非常量引用。

# sql - 如何使用更新语句将列值从 0 切换到 1，反之亦然？

> ID：10369545
> 
> 赞同：17
> 
> 时间：2012-04-29T03:52:18.643
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有一张`Table1`如下表

```
col1 col2
---- ----
 A    1
 B    1
 C    1
 D    0
 E    0
 F    0 
```

我希望结果表应该如下（通过 using`Update`语句）

```
col1 col2
---- ----
 A    0
 B    0
 C    0
 D    1
 E    1
 F    1 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-29T04:00:51.187

***脚本 1***： [SQL Fiddle 的演示](http://sqlfiddle.com/#!6/fba8a/1)

```
UPDATE dbo.Table1 SET col2 = (CASE col2 WHEN 1 THEN 0 ELSE 1 END); 
```

***脚本 2***：如果值始终为 0 或 1，则可以使用*按位异或运算符*。[SQL Fiddle 上的演示](http://sqlfiddle.com/#!6/6a7db/2)

```
UPDATE dbo.Table1 SET col2 = (col2 ^ 1); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-29T06:40:24.520

既然您提到您正在使用 INT，那么如何：

```
update dbo.Table1 set col2 = 1 - col2; 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-04-29T03:59:51.437

我敢肯定有一种更优雅的方式，但这应该可行：

```
UPDATE Table1
SET col2 = CASE col2 WHEN 0 THEN 1 WHEN 1 THEN 0 ELSE col2 END 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-29T04:20:04.447

如果您在 SQL Server 上使用正确的布尔 (BIT)，则可以使用：[http ://sqlfiddle.com/#!6/0ed3c/1](http://sqlfiddle.com/#!6/0ed3c/1)

```
UPDATE dbo.Table1 SET col2 = ~col2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-02T09:55:00.727

非常简单的查询

```
update table set col= (col-1)* -1; 
```

解释：

*   0的情况：

    ```
    update table set col= (0-1)* -1; // return 1; 
    ```

*   案例1：

    ```
    update table set col= (1-1)* -1; // return 0; 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-23T11:03:09.907

你可以这样做 ：

```
UPDATE table SET col = 1-col 
```

# module - 在 OCaml 中，是否可以根据 Set 定义 Map？

> ID：10369546
> 
> 赞同：5
> 
> 时间：2012-04-29T03:52:29.317
> 
> 标签：module, ocaml, functor

我已经在 OCaml 中实现了集合（平衡搜索树）的表示。`Make`它实际上是签名的函子

```
module Make :
  functor (T : ORDERED_TYPE) ->
sig
  type elt = T.t
  type t
  val empty : t
  val cons : elt -> t -> t
  val delete : elt -> t -> t
  val mem : elt -> t -> bool
  val cardinal : t -> int
end 
```

在哪里

```
 module type ORDERED_TYPE = sig type t val compare : t -> t -> int end 
```

现在我想`Map`在标准库中实现一个字典。它必须有一个像这样的签名

```
 module Make: functor (T : ORDERED_TYPE) -> sig
    type key = T.t
    type +'a t
    ...
 end 
```

哪里`t`是字典的类型。

再次实现平衡搜索树并不优雅，所以我想根据上面实现为仿函数的集合来定义字典。我可以这样做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T07:53:25.017

正如 Jeffrey 所指出的，您`Set`的接口不够富有表现力，无法`Map`在其之上方便地实现。通过将集合定义为从键到单位值的映射，实现`Set`from会更简单。`Map`

我建议的另一种可能性是，首先公开一个*没有封装*的平衡搜索树模块，其唯一目的是提供一个完全由接口显示的有效数据结构。然后，您可以自由地将它重用于您喜欢的任何数据结构，包括`Map`and `Set`，而无需玩游戏来定义另一个。在这种情况下，这可能不是非常重要（`Set`从`Map`大多数情况下定义是合理的），但在我看来，在一般情况下这是一个更好的设计。

简而言之：如果你想重用实现，那么暴露“实现模块”，并在它们之上定义你的“接口模块”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T06:21:15.507

在我看来，地图是一个（部分）函数，它是一组有序对。如果您正确定义比较函数，我认为可以完成。您可能必须向 Set 接口添加一个函数，以说明两个值可以出于成员资格比较相等但实际上不是相等的值这一事实。使用当前界面似乎无法定义地图的查找功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T09:36:39.577

正如其他人已经指出的那样，您不能在给定集合之上实现请求的映射函子至少有两个原因：

1.  集合签名无法在给定集合中*找到*“相等”元素。
2.  即使它这样做了，你也不能像类型`'a map`似乎需要的那样多态地在其中存储值。

您确定该任务需要您在集合*之上实现地图吗？*也许您应该*像*集合一样实现它们？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:08:28.393

好吧，实际上有一个**相等**的运算符——来自有序类型的**比较函数。**

因此，为仅比较键部分的键/值类型定义您自己的模块：

```
module Keyvalue = struct
   type t = ('a * 'b)
   let compare x y = Pervasives.compare (fst x) (fst y)
end 
```

你就完成了。现在的问题是，您的*Set*不允许您获取其值；没有*get*也没有*fold*函数——恕我直言，这确实限制了这种数据结构。如果允许您摸索*Set*实现，则需要添加一个*get*函数：

```
module Set = sig
   ...
   get : t -> elt -> elt
end 
```

这将返回刚刚要求的元素。如果您获取返回元组的第二个元素，您将获得来自原始*键/值**对*的值。

# linux - Amazon EC2 丢失私钥，如何访问服务器？

> ID：10369547
> 
> 赞同：20
> 
> 时间：2012-04-29T03:52:41.120
> 
> 标签：linux, ubuntu, ssh, amazon-ec2, private-key

我的电脑前天被偷了，我把我的一个服务器私钥放在里面，这个密钥是密码保护的，所以应该没问题。但问题是现在我无法访问服务器。

服务器是 Ubuntu，Amazon EC2，**根设备：Instance Store。**我已经搜索了一整天，看起来如果服务器是EBS，那么创建一个图像并启动一个新实例会更容易。但不幸的是我的不是。

我真的希望有人能给我一个关于如何访问服务器的建议，我的用户类型是 root，所以没有其他人可以为我修改密钥。

我不知道您是否可以从公钥创建私钥，也不知道您是否真的可以从 Amazon EC2 获取公钥。请帮忙。

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T04:16:03.160

尝试这样做：

登录到您的[AWS 管理控制台](https://console.aws.amazon.com)，在`EC2`选项卡视图中，您会找到类似的`1 key Pair`内容，单击它，删除旧密钥对，然后创建新密钥对。

* * *

编辑：

有一个相关的问题在[这里](https://console.aws.amazon.com)

> 您可以做的是将您的弹性 IP 之一分配给实例并正常通过该实例路由流量。对实例进行快照并使用新的密钥对生成副本。将弹性 IP 切换到新实例。

和[这里](https://stackoverflow.com/questions/2181691/on-amazon-ec2-is-it-possible-to-reassign-a-keypair-to-an-already-running-instanc)

> 我们能够提出的最佳解决方案是从正在运行的实例中刻录一个 AMI，并使用新的密钥对从该 AMI 启动一个新实例。

如何创建自己的 AMI？[在这里](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/creating-an-ami.html?r=8284)。;)

# macos - 如何从 USB mac osx 启动应用程序？

> ID：10369549
> 
> 赞同：0
> 
> 时间：2012-04-29T03:53:25.337
> 
> 标签：macos

我正在开发一个mac应用程序。应用程序需要从可移动设备运行。另外，我想知道是否可以制作 RAM 的副本（当时正在使用）？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:24:54.310

> 我正在开发一个mac应用程序。应用程序需要从可移动设备运行。

那么将应用程序放在可移动设备上，然后呢？请注意，没有用户交互（“自动运行”）无法使其运行。

> 另外，我想知道是否可以制作 RAM 的副本（当时正在使用）？

这真的没有多大意义。当然，您的应用程序可以自由地复制自己的内存，但这不太可能很有趣。但是，如果没有一些相当深奥的魔法（和管理员授权），您将无法读取其他应用程序内存的内容。

你到底想在这里做什么？

# actionscript-3 - 什么是 Box2d，我如何使用它来制作 Flash 游戏？

> ID：10369551
> 
> 赞同：2
> 
> 时间：2012-04-29T03:53:39.570
> 
> 标签：actionscript-3, flash-cs5, box2d

听说是个物理引擎，可以用来模拟扔球。它到底是什么，我将如何将它与 AS3 和 Flash CS5.5 一起使用？教程？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:08:26.533

Box2D 是一个物理引擎，因此基本上它与您的代码一起运行并进行纯粹的抽象模拟。每一帧（或您希望的任何时候）您都会在物理世界中执行一个“步骤”，通过一个步骤更新模拟，然后在您的代码中您可以读取这些值并将它们应用到您的电影剪辑或您想要的任何东西喜欢将这些数据用于。

就教程而言，我认为它们的最佳来源是[http://www.emanueleferonato.com/category/box2d/](http://www.emanueleferonato.com/category/box2d/)。请注意，当涉及到闪存时，您可以选择实现。您拥有标准的纯 AS3 实现和更快的 Alchemy 实现。炼金术版本之一称为 WCK 或世界构建工具包。您可以将其设置为使用 Flash CS 作为一种插件，它允许您使用 IDE 而不是代码来直观地构建您的物理世界。[在这里](http://www.sideroller.com/wck/)查看。您还可以在[此处](http://gotoandlearn.com/play.php?id=135)找到 WCK 的视频教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:31:56.840

您可以在以下位置下载用于 flash 的 box2d：

[http://sourceforge.net/projects/box2dflash/](http://sourceforge.net/projects/box2dflash/)

下载后，您可以看到示例包含在“示例”文件夹中。有一个“HelloWorld.fla”，您可以从这里开始。

Box2d 是一个有点复杂但非常著名的 2d 闪存引擎。一个简单的谷歌搜索可以为您提供许多有关 box 2d flash 教程的网站。例如：我得到了一个有趣的：http: [//plasticsturgeon.com/2010/08/making-an-as3-game-in-box2d-flash-version-2-0-hello-world-box2d/](http://plasticsturgeon.com/2010/08/making-an-as3-game-in-box2d-flash-version-2-0-hello-world-box2d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T17:44:41.120

可能已经有 Box2D Air Native Extension 了（但我不确定它是否有效：[https](https://github.com/mnem/box2d_ane/) ://github.com/mnem/box2d_ane/ ）。我很想收到你的来信。（抱歉无法评论您的参赛作品）

# android - 在 Android 模拟器上安装孟加拉语字体

> ID：10369552
> 
> 赞同：3
> 
> 时间：2012-04-29T03:53:40.440
> 
> 标签：android, fonts, android-emulator

当我在模拟器中使用孟加拉语字符时，它们显示为框。如何安装必要的字体？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T03:56:14.980

每当 android 找不到特定字符时，它会查找 DroidSansFallback.ttf，因此您需要做的是通过将 Bangla ttf 字体重命名为 DroidSansFallback.ttf 来替换模拟器的 DroidSansFallback.ttf。执行以下步骤。

1.获取市场支持的root android模拟器。你可以在这里找到一个： [Rooted Market Enabled AVD](http://www.ehalm.at/avd-2.2-market.php?l=en)

2.然后抓一个资源管理器应用程序，我更喜欢rootexplorer。

3.将免费的Bangla ttf字体重命名为DroidSansFallback.ttf。

4.从您在步骤 1 中下载的图像创建一个 AVD。

5.通过DDMS中的文件资源管理器将rootexplorer和DroidSansFallback.ttf推送到模拟器的sdcard（我使用的是Eclipse Indigo IDE）。

6.安装rootexplorer（您可以使用通过市场下载的其他资源管理器）。

7.打开rootexplorer，点击mount r/w。

8.然后转到sdcard并复制DroidSansFallback.ttf，然后转到系统，单击mount r/w。

9.然后转到字体并覆盖现有的 DroidSansFallback.ttf。

10.然后从权限选项中将所有权限授予新的 DroidSansFallback.ttf。

就是这样，您现在可以在模拟器中的任何地方使用孟加拉语，但无法正确显示复杂的字形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T13:43:24.717

Android 上的孟加拉语 在有根的 Android 2.2 (Froyo) 上工作。替换 2 个skia 文件并添加自定义字体以获得系统范围的孟加拉语渲染支持。

详情：[http ://androidbangladesh.wordpress.com/2012/05/15/bangla-on-android/](http://androidbangladesh.wordpress.com/2012/05/15/bangla-on-android/)

# python - 为什么 sys.getsizeof(numpy.int8(1)) 返回 12？

> ID：10369553
> 
> 赞同：6
> 
> 时间：2012-04-29T03:53:48.080
> 
> 标签：python, numpy

我想创建一个小的 NumPy 整数来节省内存。但是，我注意到

```
import numpy,sys
print sys.getsizeof(numpy.int8(1)) 
```

prints `12`，所以它似乎`numpy.int8()`生成了 12 个字节而不是 1 个字节的数据。为什么是这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T05:52:00.143

Numpy 标量具有与 CPython 数据类型类似的实现，例如 python 浮点或整数类型。换句话说，它是一个包含三个变量的结构：

*   类型的[引用计数器](http://docs.python.org/extending/extending.html#reference-counts)`int`

*   指向其对象类型实例的指针

*   变量的值

在 32 位架构中，引用计数器和指针通常各为 4 个字节。value 字段原则上可以是任意大小，但[结构填充](http://en.wikipedia.org/wiki/Data_structure_alignment#Data_structure_padding)将导致结构分配 4 个字节，即使 value 需要更少。

如果您正在使用 64 位架构，请将“4 字节”替换为“8 字节”。

因此，32 位系统上的所有 numpy 整数都由（有效地）三个 4 字节变量组成，并`sys.getsizeof(numpy.int8(1))`给出 12。在 64 位系统上，它将返回 24。

大多数 numpy 标量的大小相同。一个例外是`numpy.complex`类型，它通常需要双重存储。由于这在内存中与其他两个变量对齐，因此您可以忽略填充并简单地将分配给该值的字节加倍，分别在 32 位和 64 位中给出 16 和 32 字节。类似的规则适用于更奇特的类型（`complex256`,`float80`等）

# javascript - 在 jQuery 中获取当前元素的类

> ID：10369556
> 
> 赞同：3
> 
> 时间：2012-04-29T03:55:41.330
> 
> 标签：javascript, jquery

```
​&lt;button id="test" class="example whatever">Show classes</button>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​

$('button').click(function(){
  var classes = $(this).attr('class');
  alert(classes);
});​ 
```

上面的代码返回`class`属性的内容。我怎样才能让它返回格式化的类？

例如，在这种情况下，我希望变量`classes`的值是 ，`.example.whatever`而不是`example whatever`。

我已经搜索过，似乎提供的唯一解决方案是我上面演示的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T03:58:27.107

我对此真的很不安，因为用句点替换空格将给出堆叠类的表示，当类并没有真正堆叠时，但是你去：

```
// class="foo bar fiz buz" -> .foo.bar.fiz.buz
this.className.replace( /^|\s/g , "." ); 
```

演示：http: [//jsbin.com/avitef/edit#javascript,html](http://jsbin.com/awitef/edit#javascript,html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T03:59:10.883

```
$('button').click(function(){
  var classes = $(this).attr('class');
  alert("." + classes.split(" ").join(".") );
}); 
```

在这里摆弄：http: [//jsfiddle.net/wxDEh/3/](http://jsfiddle.net/wxDEh/3/)

# c++ - 寻找更高效的位域解码算法

> ID：10369558
> 
> 赞同：0
> 
> 时间：2012-04-29T03:56:09.740
> 
> 标签：c++, algorithm

我有一个 Visual Studio 2008 C++ 应用程序，我在其中收到一个位图（不是图像）。翻转的每个位对应于解码图上的一个位置。

```
typedef unsigned char BYTE;
const unsigned int COL_COUNT = 8;
const unsigned int ROW_COUNT = 4;

static char g_decode_map[ ROW_COUNT ][ COL_COUNT ] = 
{
    { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h' },
    { 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p' },
    { 'q', 'r', 's', 't', 'u', 'v', 'w', 'x' },
    { 'y', 'z', ',', '.', ' ', ':', '-', '+' }
};

// current implementation
void Decode( const BYTE bitmap[ ROW_COUNT ], 
             const char decode_map[ ROW_COUNT ][ COL_COUNT ], 
             char decoded[ ROW_COUNT * COL_COUNT ] )
{
    int found = 0;
    for( int i = 0; i < ROW_COUNT; ++i )
    {
        for( int j = 0; j < COL_COUNT; ++j )
        {
            if( std::bitset< COL_COUNT >( bitmap[ i ] ).test( j ) )
            {
                decoded[ found++ ] = g_decode_map[ i ][ COL_COUNT - j - 1 ];
            }
        }
    }
}

int main( int argc, char* argv[] )
{
    BYTE bitmap[ ROW_COUNT ] = { 0x01, 0x80, 0x00, 0x00 };
    // expected output { 'h', 'i' } or { 'i', 'h' } order is unimportant

    char decoded[ ROW_COUNT * COL_COUNT + 1 ] = { };
    Decode( bitmap, g_decode_map, decoded );
    printf( "Decoded: %s\r\n", decoded );
    return 0;
} 
```

我当前的解码实现工作正常，但让我感到震惊的是，可能有一种更有效的方法来做到这一点。任何人都可以提出更高效的算法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:36:35.547

您正在执行 64 次条件检查。for 循环中有 32 个，for 循环中有 32 个。如果您无法摆脱 for 循环中的 32，您可以做的最好的事情是循环展开以减少 forloop 正在执行的条件语句的数量。将行和列长度定义为常量。您可以展开循环并对索引的一些数字进行硬编码。您可以编写 8 个 if 语句，而不是使用内部 for 循环，如下所示。

这就留下了一个问题，如果有人改变了常数值怎么办？然后代码中断。那是对的。如果您需要它足够健壮以承受这种情况，您可以使用编译时递归来展开循环（下面的链接）。此外，任何看到你的代码的人都会害怕地畏缩并认为你是神。:P 另外，Jason 的解决方案也会加快速度。

```
if( std::bitset< COL_COUNT >( bitmap[ i ] ).test( 0 ) )  
if( std::bitset< COL_COUNT >( bitmap[ i ] ).test( 1 ) )  
if( std::bitset< COL_COUNT >( bitmap[ i ] ).test( 2 ) )  
if( std::bitset< COL_COUNT >( bitmap[ i ] ).test( 3 ) )  
...
if( std::bitset< COL_COUNT >( bitmap[ i ] ).test( 7 ) ) 
```

[编译时间循环（答案#1）](https://stackoverflow.com/questions/6872919/compile-time-loops "编译时间循环")
[模板元编程](http://en.wikipedia.org/wiki/Template_metaprogramming "模板元编程")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:33:30.300

测试每个位是否使用按位操作设置会更快，而不是为每个被测试的位创建一个位集。尝试这样的事情：

```
for( int i = 0; i < ROW_COUNT; ++i ) {
    for( int j = 0; j < COL_COUNT; ++j ) {
        if(bitmap[i] & (1 << j)) {
            ... 
```

`1 << j`生成一个只有您想要测试的位的掩码。仅当该位设置在`bitmap[i]`. 这个条件的结果应该和你的条件的结果是等价的，而且应该快很​​多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T08:01:50.803

这是如何快速做到这一点，假设`COL_COUNT == 8`（要做到*非常*快，使用内联汇编器）：

```
for( int i = 0; i < ROW_COUNT; ++i )
    {
        unsigned char next_byte = bitmap[i] ;
        for( int j = 0; j < COL_COUNT; ++j )
        {
            if (next_byte & 0x80)
            {
                decoded[ found++ ] = g_decode_map[ i ][ j ];
            }
            next_byte <<= 1 ;
        }
    } 
```

我已经对其进行了编码以重现您的程序的行为——但是您确定您做对了吗？我希望您`found`每次都增加，而不仅仅是在`1`找到 -bit 时。

# algorithm - O(n) 和 O(log(n)) 之间的区别 - 哪个更好，O(log(n)) 到底是什么？

> ID：10369563
> 
> 赞同：78
> 
> 时间：2012-04-29T03:57:42.563
> 
> 标签：algorithm, data-structures, complexity-theory, big-o, logarithm

这是我的第一门数据结构课程，也是我们谈论的每一堂课/助教课`O(log(n))`。这可能是一个愚蠢的问题，但如果有人能向我解释这到底是什么意思，我将不胜感激！？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-04-29T04:01:45.820

这意味着有问题的事物（通常是运行时间）以与其输入大小的对数一致的方式缩放。

[Big-O 表示法](http://en.wikipedia.org/wiki/Big_oh)并不意味着一个*精确的*方程，而是一个*bound*。例如，以下函数的输出都是 O(n)：

```
f(x) = 3x
g(x) = 0.5x
m(x) = x + 5 
```

因为随着 x 的增加，它们的输出都会线性增加 - 如果 和 之间的比率为 6:1 ，则`f(n)`和之间的比率`g(n)`也约为 6:1 `f(10*n)`，`g(10*n)`依此类推。

* * *

至于是否`O(n)`更好`O(log n)`，请考虑： if `n = 1000`, then `log n = 3`（对于 log-base-10）。您希望算法运行哪个：1000 秒还是 3 秒？

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2019-02-11T10:58:06.630

简而言之，O(log n) 优于 O(n)

**现在 O(log n) 到底是什么？**

通常，当提到大 O 表示法时，**log n**是指以 2 为底的对数，（同样的方式**ln**表示以 e 为底的对数）。这个以 2 为底的对数是指数函数的倒数。指数函数**增长**非常迅速，我们可以直观地推断出它的反函数会完全相反，即**增长**非常缓慢。

例如

x = **O(log n)**

我们可以将 n 表示为 ,

n = **2 ^x**

和

2 ^(10) = 1024 → lg(1024) = 10

2 ^(20) = 1,048,576 → lg(1048576) = 20

2 ^(30) = 1,073,741,824 → lg(1073741824) = 30

**n**的大增量只会导致 log(n) 的非常小的增加

另一方面，对于 O(n) 的复杂度，我们得到线性关系

log [2] n 的因数应随时超过 n 的因数。

[为了进一步巩固这一点，我在Thomas Cormen 解锁](https://rads.stackoverflow.com/amzn/click/com/0262518805)的算法中遇到了一个例子

考虑 2 台计算机：A 和 B

两台计算机都有一个任务是在数组中搜索一个值让我们假设数组有 1000 万个元素要搜索

计算机 A——这台计算机每秒可以执行 10 亿条指令，预计使用复杂度为 O(n) 的算法执行上述任务。我们可以将这台计算机完成任务所需的时间近似为

n/(指令 p 秒) → 10 ⁷ /10^9 = 0.01 秒

计算机 B - 这台计算机要慢得多，每秒只能执行 1000 万条指令。计算机 B 预计将使用复杂度为 O(log n) 的算法执行上述任务。我们可以将这台计算机完成任务所需的时间近似为

log(n) /(指令 p 秒) → log(10 ⁷ )/10 ⁷ = 0.000002325349

通过这张图，我们可以看到，尽管计算机 A 比计算机 B 好得多，但由于 B 使用的算法，它完成任务的速度要快得多。

我认为现在应该很清楚为什么 O(log(n)) 比 O(n) 快得多

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-04-29T04:08:56.867

对于 size 的输入`n`，一个算法`O(n)`会按比例执行步骤`n`，而另一个算法`O(log(n))`会大致执行步骤`log(n)`。

显然`log(n)`小于`n`因此复杂度算法`O(log(n))`更好。因为它会快得多。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-04-29T04:08:55.723

O(logn) 表示算法的最大运行时间与输入大小的对数成正比。O(n) 表示算法的最大运行时间与输入大小成正比。

基本上，O(something) 是算法指令数量（原子指令）的上限。因此，O(logn) 比 O(n) 更严格，并且在算法分析方面也更好。但是所有 O(logn) 的算法也是 O(n)，但不是倒退...

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-29T04:04:28.587

[http://en.wikipedia.org/wiki/Big_oh](http://en.wikipedia.org/wiki/Big_oh)

O(log n) 更好。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-05T15:13:24.887

正式定义：

g(x) = O(f(x)) <=> 有 x0 和常数 C，对于每个 x > x0，|g(x)| <= C|f(x)|。

因此，如果你发现问题 P 的算法 A 的复杂度为 O(f(n))，你可以说你的算法将执行的步骤数渐近地小于或等于 f(n)，而 n 通常是输入大小。（n 可以是任何东西）

进一步阅读：http://en.wikipedia.org/wiki/Big_O_notation。

# javascript - PhoneGap 应用程序中的 jQuery 问题

> ID：10369566
> 
> 赞同：1
> 
> 时间：2012-04-29T03:58:13.920
> 
> 标签：javascript, jquery, cordova, mobile-application

似乎无法包含它。我正在使用这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

然后有这个：

```
<script type="text/javascript">

function initialize(){

 $(document).ready(function() {
   $("a").click(function() {
     alert("Hello world!");
   });
 });

}

</script>

....

<body onload="initialize()">
<a href="">Link</a>
</body> 
```

但是当我点击链接时，什么也没有发生。我无法知道 jQuery 是否正确包含。我对 jQuery 完全陌生，所以就我所知，我在这里犯了一个明显的错误，但它直接来自 jQuery 初学者指南，所以我认为它至少很接近。任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:02:53.263

您可以删除该功能。这是没用的。

```
$(function(){
    $("a").click(function(){
        alert("Hello world!");
    });
}); 
```

PS：您的工作代码：http: [//jsfiddle.net/DerekL/h4dmF/](http://jsfiddle.net/DerekL/h4dmF/)

# c++ - 在这种情况下，如何从向量中删除项目？

> ID：10369568
> 
> 赞同：0
> 
> 时间：2012-04-29T03:58:24.287
> 
> 标签：c++, vector, erase

我尝试的所有内容都会出现语法错误。有人可以告诉我用什么代替评论吗？这是我第一次使用向量。

EntityList 是 Entity 类的静态向量。

```
for(int i = 0;i < (int)Entity::EntityList.size();i++) {
    if(!Entity::EntityList[i]) continue;

    if(Entity::EntityList[i]->isDead){
        //Erase from vector
        //Decrement i?
    }

    Entity::EntityList[i]->OnLoop();
} 
```

我应该用什么代替评论？我已经尝试了一些东西，但没有任何效果。例如，Entity::EntityList.erase(i); 不起作用。我收到以下错误，我不明白：

无法将参数 1 从“int”转换为“std::_Vector_const_iterator<_Myvec>”

我看到的所有示例都使用整数作为参数，所以我不知道该怎么做。

另外，由于向量中的元素在删除后向下移动，我应该在删除一个项目后减少 i 以便它再次执行具有相同值的循环吗？还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:15:59.247

你可以试试：

```
Entity::EntityList.erase(Entity::EntityList.begin() + i); 
```

是的，你应该减少 i。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T04:40:15.303

我建议使用[Erase/Remove idiom](http://en.wikibooks.org/wiki/More_C++_Idioms/Erase-Remove)。您可以将[std::remove_if](http://www.cplusplus.com/reference/algorithm/remove_if/)的结果提供给[vector::erase](http://www.cplusplus.com/reference/stl/vector/erase/)，您应该已准备就绪。它看起来像这样：

```
entityList.erase(
    std::remove_if(entityList.begin(), entityList.end(), isEntityDead)); 
```

这是一个例子：

```
#include <algorithm>
#include <vector>

class Entity {
public:
    bool isDead;
};

// Need this since isDead isn't a member function of Entity
bool isEntityDead(Entity& entity) {
    return entity.isDead;
}

int main(int argc, char** argv) {
    Entity ent1 = Entity();
    ent1.isDead = false;
    Entity ent2 = Entity();
    ent2.isDead = true;
    Entity ent3 = Entity();
    ent3.isDead = false;

    std::vector<Entity> entityList;
    entityList.push_back(ent1);
    entityList.push_back(ent2);
    entityList.push_back(ent3);

    std::cout << "Before removing anything: " << entityList.size() << std::endl;

    entityList.erase(std::remove_if(entityList.begin(), entityList.end(), isEntityDead));

    std::cout << "After remove/erase: " << entityList.size() << std::endl;

    return 0;
} 
```

如果可以提供帮助，我建议*不要在循环遍历向量时修改它的内容。*如果您需要在游戏循环结束时删除已死亡的实体，那么您最好弄清楚哪些实体“已死亡”，将它们放入“死亡列表”，然后从您的“死亡列表”中删除任何内容一次所有的实体列表。

# django - Django 中的 get_list_display

> ID：10369570
> 
> 赞同：0
> 
> 时间：2012-04-29T03:58:40.453
> 
> 标签：django, django-admin, django-admin-filters, django-admin-tools

在我的模型管理员中，我想修改`get_list_display`.

```
class PhotoAdmin(admin.ModelAdmin):

      ordering = ['-date']

      def get_list_display(self, request):
           b[0] #<-just to crash it to see if it is getting called 
```

但是，它似乎永远不会被调用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T22:01:17.740

`get_list_display`仅从 1.4 开始可用，也许您使用的是旧版本？

# mysql - 具有可变参数列表的 MySQL 存储过程

> ID：10369574
> 
> 赞同：12
> 
> 时间：2012-04-29T03:59:28.967
> 
> 标签：mysql

我做了一个存储过程。我希望它通过不同的参数过滤数据。如果我传递一个参数，它应该被一个过滤；如果我通过两个，它应该被两个过滤，依此类推，但它不起作用。

任何人都可以帮助我吗？

```
DROP PROCEDURE IF EXISTS medatabase.SP_rptProvince2;
CREATE PROCEDURE medatabase.`SP_rptProvince2`(
 IN e_Region VARCHAR(45)
  )
BEGIN

 DECLARE strQuery VARCHAR(1024);
 DECLARE stmtp   VARCHAR(1024);
  SET @strQuery = CONCAT('SELECT * FROM alldata where 1=1');
  IF e_region IS NOT NULL THEN
   SET @strQuery = CONCAT(@strQuery, ' AND (regionName)'=e_Region);
  END IF;

 PREPARE  stmtp FROM  @strQuery;
 EXECUTE  stmtp;
END; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T04:22:22.837

AFAIK，你不能有这样的变量参数列表。您可以做以下几件事之一：

1.  采用固定的最大参数数量，并在连接之前检查它们是否为空：

    ```
    CREATE PROCEDURE SP_rptProvince2(a1 VARCHAR(45), a2 VARCHAR(45), ...)

    ...

      IF a1 IS NOT NULL THEN
        SET @strQuery = CONCAT(@strQuery, ' AND ', a2);
      END IF; 
    ```

    如果您需要参数中的条件适用的预定字段（如`e_Region`现有代码中的参数），那么您可以适当地修改 CONCAT 操作。

    可能的调用：

    ```
    CALL SP_rptProvince2('''North''', 'column3 = ''South''') 
    ```

2.  获取一个远大于 45 个字符的参数，然后简单地将其附加到查询中（假设它不为空）。

    显然，这使用户有责任提供正确的 SQL 代码。

    可能的调用：

    ```
    CALL SP_rptProvince2('RegionName = ''North'' AND column3 = ''South''') 
    ```

两者之间没有太多选择。任何一个都可以工作；两者都不完全令人满意。

您可能会注意到需要用额外的引号保护参数中的字符串；这就是造成问题的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-07-26T10:49:59.990

我发现了一种基于 JSON 的方法，它适用于最新的 MySQL/MariaDB 系统。检查下面的链接（原作者是 Federico Razzoli）：[https://federico-razzoli.com/variable-number-of-parameters-and-optional-parameters-in-mysql-mariadb-procedures](https://federico-razzoli.com/variable-number-of-parameters-and-optional-parameters-in-mysql-mariadb-procedures)

基本上，您采用一个实际上是 JSON 对象的 BLOB 参数，然后根据需要执行***JSON_UNQUOTE(JSON_EXTRACT(json object, key))***。

在这里提取了一段摘录：

```
CREATE FUNCTION table_exists(params BLOB)
    RETURNS BOOL
    NOT DETERMINISTIC
    READS SQL DATA
    COMMENT '
Return whether a table exists.
Parameters must be passed in a JSON document:
* schema (optional). : Schema that could contain the table.
                       By default, the schema containing this procedure.
* table              : Name of the table to check.
'
BEGIN
    DECLARE v_table VARCHAR(64)
        DEFAULT JSON_UNQUOTE(JSON_EXTRACT(params, '$.table'));
    DECLARE v_schema VARCHAR(64)
        DEFAULT JSON_UNQUOTE(JSON_EXTRACT(params, '$.schema'));

    IF v_schema IS NULL THEN
        RETURN EXISTS (
            SELECT TABLE_NAME
                FROM information_schema.TABLES
                WHERE
                    TABLE_SCHEMA = SCHEMA()
                    AND TABLE_NAME = v_table
        );
    ELSE
        RETURN EXISTS (
            SELECT TABLE_NAME
                FROM information_schema.TABLES
                WHERE
                    TABLE_SCHEMA = v_schema
                    AND TABLE_NAME = v_table
        );
    END IF;
END; 
```

# ruby-on-rails - 在一台机器上运行许多具有第三方依赖项的 Rails 应用程序实例

> ID：10369578
> 
> 赞同：0
> 
> 时间：2012-04-29T04:00:16.100
> 
> 标签：ruby-on-rails, deployment

我正在尝试为我工作的公司的开发人员建立一个本地“测试平台”。有几个开发人员在开发单个服务器应用程序，并且经常需要部署他们的分支以进行客户端测试。目前，所有这些部署都发生在异地服务器上，每次部署都有一个单独的应用程序实例。

我想创建一个自制的解决方案，并一直在寻找诸如[pow.cx 之](http://pow.cx)类的服务。这很好，但服务器应用程序需要多个外部服务，例如 redis 和 memcached，它们都需要单独的端口。原则上，我可以为每个单独的实例手动创建额外的配置文件，但这在实践中很困难，并且在杂耍环境方面需要更多的簿记。

作为一个糟糕的系统管理员，我想知道是否有一种更简单的方法（即虚拟主机）可以让我以相同的方式部署每个实例，但在不同的子域之后？

我意识到这个问题相当苛刻，我当然会很感激我能得到的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:27:38.207

听起来最简单的事情就是在该服务器上拥有一堆虚拟机，每个应用程序实例一个。如果您愿意，您可以在您的应用程序实例之间共享一些东西（例如您的数据库服务器）。

[您可以使用vagrant](http://vagrantup.com)之类的东西自动完成很多工作。这样做的一个好处是，如果需要，可以很容易地将一个特定的 VM 移动到专用机器上，或者让新开发人员使用该 VM 进行开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T06:05:30.503

根据我的经验。我在一台主机上有一些简单的应用程序。我使用简单的可配置工具：[passenger + nginx](http://www.modrails.com/install.html)作为服务器（要添加新服务器，您需要添加 5 行代码），用于部署[的 Vlad Deployer ，用于不同 ruby​​ 版本的](http://rubyhitsquad.com/Vlad_the_Deployer.html)[rbenv](https://github.com/sstephenson/rbenv)，作为分离 rails gem 的工具的 bundler。

我有一些服务器：生产、开发、测试。它们被放置在 vps 上的不同硬盘上，并拥有自己的域以排除服务器之间的任何影响。

# amazon-s3 - 安装 aws-sdk 后出错

> ID：10369579
> 
> 赞同：2
> 
> 时间：2012-04-29T04:00:41.057
> 
> 标签：amazon-s3, paperclip

我正在尝试让回形针与 S3 一起使用，但我的观点抛出了一个错误：

```
cannot load such file -- aws-sdk (You may need to install the aws-sdk gem) 
```

我以这种方式配置了导轨：

宝石文件

```
...
gem "paperclip", "~> 3.0"
gem 'aws-sdk'
... 
```

模型

```
user.rb

...
has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" },
                         :storage => :s3,
                         :bucket => ENV['lumeo-dev'],
                         :s3_credentials => "lumeot/config/aws.yml",
                         :path => "/:style/:id/:filename"
... 
```

配置/aws.yml

```
development:
  bucket: lumeo-dev
  access_key_id: #
  secret_access_key: #
test:
  bucket: lumeo-test
  access_key_id: #
  secret_access_key: #
production:
  bucket: lumeo-pro
  access_key_id: #
  secret_access_key: # 
```

用“#”表示正确的 id/key

模板：

```
 <%= simple_form_for(resource, :as => resource_name, :url =>
  registration_path(resource_name), :html => { :method => :put, :multipart => true }) do |f| %>
     <%= f.error_notification %>
            <div class="inputs">
               <p>
                    <% if current_user.avatar.present? %>
                        Change Photo
                        <%= image_tag @user.avatar.url(:thumb) %>
                    <% else %>
                        Upload New Photo 
                        <%= gravatar_for current_user %>
                    <% end %>
               </p>
               <%= f.file_field :avatar %>
.... 
```

如果您发现任何可能有帮助的不正确之处，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:40:35.570

尝试重新启动您的服务器。我有同样的错误，这对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:24:58.280

您是否还包括 s3 gem？

```
gem 'aws-s3' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T14:10:18.943

安装 imageMagick 后，该错误现已解决：[https ://github.com/thoughtbot/paperclip/blob/master/README.md](https://github.com/thoughtbot/paperclip/blob/master/README.md)

并放置：

```
 Paperclip.options[:command_path] = "/usr/local/bin/" 
```

在 config/environments/development.rb 中，它让回形针知道在哪里寻找 imageMagick

# mysql - mysqldump 输出中视图定义不正确前的 DROP TABLE

> ID：10369581
> 
> 赞同：0
> 
> 时间：2012-04-29T04:00:50.307
> 
> 标签：mysql, view, mysqldump

我在共享网络主机上有一个 mysql 数据库。有些表相当大，我们的夜间转储进程被杀死了。所以我制作了一个脚本，在数据库中查询所有表名，并将它们单独转储，将它们全部连接到一个文件中。

```
mysql -uusername -ppassword -hhostname dbname < <(echo 'SHOW TABLES') | xargs -I TableName sh -c 'nice -19 mysqldump --opt -uusername -ppassword -hhostname dbname TableName >> /path/to/dump.sql' 
```

我现在有一个问题，其中一个视图定义（据我所知，MySQL 在其转储文件中有特殊的视图创建语句）导致错误

```
ERROR 1146 (42S02) at line 5182: Table 'dbname.vView' doesn't exist 
```

我在转储文件中查找了第 5182 行，这是第一行，它开始创建视图：

```
/*!50001 DROP TABLE `vView`*/;
/*!50001 DROP VIEW IF EXISTS `vView`*/;
/*!50001 CREATE ALGORITHM=UNDEFINED */ 
```

然而，无论出于何种原因，转储文件中的其他视图都有

```
/*!50001 DROP TABLE IF EXISTS `vOtherView`*/; 
```

他们被创造得很好。

在这个[问题](https://stackoverflow.com/questions/6128286/innodb-tables-exist-in-mysql-but-says-they-do-not-exist-after-copying-database-t)之后，我在导入转储时尝试过`mysql -f`，但 mysql 仍然因错误而停止。

如何让转储文件具有格式正确的视图创建语句（除了对转储文件进行一些后处理）？或者无论如何我怎样才能让mysql继续前进？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T02:42:43.393

从来不明白问题出在哪里，但我的解决方法是首先使用 .dump 仅转储表定义`--no-data`，然后使用 xargs 使用`--no-create-table`.

# asp.net-mvc-3 - 回发时绑定 TinyMCE 模型

> ID：10369587
> 
> 赞同：1
> 
> 时间：2012-04-29T04:02:52.427
> 
> 标签：asp.net-mvc-3, tinymce, model-binding

我正在尝试在我的 MVC3 项目中使用 TinyMCE 编辑器。我让它在浏览器中显示并正常工作，但无法将其中的数据与表单一起回发。

我的观点（片段）：

```
<div  class="formRow">
    <div class="formFieldFull">
        <div class="editor-label">
            @Html.LabelFor(model => model.Conditions)
        </div>
        <div class="large-multiline-field" style="width:396px;">
            @Html.EditorFor(model => model.Conditions)
        </div>
        <div class="validationMsg">
            @Html.ValidationMessageFor(model => model.Conditions)
        </div>
    </div>
</div> 
```

如果没有 TinyMCE，条件字段将呈现为文本区域。使用 TinyMCE，它会用自己的东西覆盖文本区域，这似乎就是问题所在。原来的 textarea 在那里，但它已设置为 display:none。TinyMCE 在一些标签之间制作了字段内容的副本，这似乎是编辑内容所在的位置。当我发回表单时，原始文本区域仍然包含来自原始响应的字段内容，而不是应该传回的编辑内容。

这是使用 TinyMCE 渲染的代码（在 Firebug 中）的样子：

```
<div class="large-multiline-field" style="width:396px;">
    <textarea id="Conditions" rows="2" name="Conditions" data-val-length-max="2000" data-val-length="Conditions must be under 2000 characters." data-val="true" cols="20" length="40" style="display: none;" aria-hidden="true">
---->   ACTUAL CONTENT GOES HERE
    </textarea>
    <span id="Conditions_parent" class="mceEditor defaultSkin" role="application" aria-labelledby="Conditions_voice">
        <span id="Conditions_voice" class="mceVoiceLabel" style="display:none;">Rich Text Area</span>
        <table id="Conditions_tbl" class="mceLayout" cellspacing="0" cellpadding="0" role="presentation" style="width: 404px; height: 222px;">
            <tbody>
                <tr class="mceFirst" role="presentation">
                    TinyMCE Toolbars go here
                </tr>
                <tr class="mceLast">
                    <td class="mceIframeContainer mceFirst mceLast">
                        <iframe id="Conditions_ifr" frameborder="0" src="javascript:""" allowtransparency="true" title="Rich Text AreaPress ALT-F10 for toolbar. Press ALT-0 for help" style="width: 100%; height: 153px; display: block;">
                            <html>
---->                           EDITED CONTENT GOES HERE
                            </html>
                        </iframe>
                    </td>
                </tr>
            </tbody>
        </table>
    </span>
</div> 
```

我应该做些什么来让 TinyMCE 在回发之前用编辑过的内容更新原始文本区域？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T09:02:17.683

解决方案很简单。您需要发出一小段 javascript，以便将内容从编辑器写回到根 html 元素（文本区域）。通常有一些浏览器事件会触发回写功能，但看起来这些事件不会因任何原因被触发。这是在将表单发送到服务器之前需要调用的简单 js 代码片段：

```
tinymce.triggerSave(); 
```

# jsf - 如何将文本字段中的数据转换为格式化的 html？

> ID：10369591
> 
> 赞同：1
> 
> 时间：2012-04-29T04:03:54.653
> 
> 标签：jsf, jsf-2, icefaces-3

我有一个包含以下内容的数据库列：

```
 <p><span style="color: #ff0000"><strong>$9,500,000.00</strong></span></p>
    <p>$11,000,000.00</p> 
```

在 JSF 1.2 和 Icefaces 1.8.2 中，该数据可以正常输出。在 JSF 2.1 和 Icefaces 3.0 下，我得到了你所看到的 - 只是纯文本。

这是一段代码，值在金额字段中：

```
 <ice:column>
            <f:facet name="header">
                <ice:outputText value="Amount"/>
            </f:facet>
            <ice:outputText value="#{offDoc.amount}"/>
        </ice:column> 
```

我试图用标签包装 ice:outputText 标签，但没有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T04:30:12.227

你需要这样的东西来关闭 HTML 转义：

```
<ice:outputText value="#{offDoc.amount}" escape="false"/> 
```

见这里：[http ://res.icesoft.org/docs/latest/tld/ice/outputText.html](http://res.icesoft.org/docs/latest/tld/ice/outputText.html)

> 如果“escape”属性不存在，或者它存在并且其值为“true”，则在将“value”属性的值呈现为组件的值时，所有尖括号都应转换为 & xx 分号语法。如果存在“escape”属性并且为“false”，则组件的值应呈现为文本而不进行转义。

# java - 无法创建实现 Runnable 接口的类对象

> ID：10369593
> 
> 赞同：2
> 
> 时间：2012-04-29T04:04:05.503
> 
> 标签：java, multithreading

我正在尝试创建一个在 main 方法中实现 Runnable 接口的类的对象，并将这些对象传递给线程池。但是 IDE 显示读取**非静态变量的错误，这不能从静态上下文中引用，**即，我一开始就无法创建对象。我无法弄清楚这段代码到底有什么问题。其他一切正常，但只有这行代码显示编译错误。有人可以帮忙吗？？

```
package threads;

import java.util.concurrent.*;

public class Tut5 {

    public static void main(String[] args) {

        ExecutorService exe = Executors.newFixedThreadPool(2);

        for(int i=0; i<5; i++) {
            Runner5 r5 = new Runner5(i);
            exe.submit(r5);
        }

        exe.shutdown();

        System.out.println("All tasks submitted.");

        try {
            exe.awaitTermination(1, TimeUnit.DAYS);
        }
        catch(InterruptedException e) {
            e.printStackTrace();
        }

        System.out.println("All tasks completed.");
    }

    class Runner5 implements Runnable {

        private int id;

        public Runner5(int id) {
            this.id = id;
        }

        public void run() {

            System.out.println("Starting thread: " + id);

            try{
                Thread.sleep(3000);
            }
            catch(InterruptedException e) {
                e.printStackTrace();
            }

            System.out.println("Ending thread: " + id);
        }
    }
} 
```

你去@jtahlborn

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:17:20.640

*   非静态变量 this 不能从静态上下文中引用 -

当您在静态方法或块中使用非静态实例或方法时会出现此错误。

**主要方法是静态** 的，`public static void main(String[] args)`所以它很简单，它会填充错误。

在这里，您的`class Runner5 implements Runnable`类是您在静态 main 方法中访问的内部类，因此它生成 -

```
No enclosing instance of type Tut5 is accessible.
Must qualify the allocation with an enclosing instance of type Tut5
(e.g. x.new A() where x is an instance of Tut5). 
```

您可以在您的类之外定义这个内部类`Tut5`或将其标记`Runner5`为静态。或创建一个类的实例`Tut5`并创建一个方法并放置其余代码。

谢谢

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T08:11:48.337

正如其他人所回答的那样*，*`Runner5`该类是. 因此，它需要一个外部*实例*来实例化。*`Tut5`*

 **如果您使 Runner5 成为静态类，它就会成为不需要外部实例的*静态嵌套类。*

```
static class Runner5 implements Runnable {
...
} 
```

但是，正如其他人所指出的，您应该将该类放在它自己的类文件中，除非您正在对嵌套类进行练习，或者您确定该类仅与类 Tut5 结合使用，并且只会被引用从那个班级。

有关一些见解，请参见[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T07:28:02.600

这里的问题是您无意中创建了一个内部类。看来您是 Java 的初学者，并且由于内部类是 Java 的一个相当高级的功能，我认为您最好暂时避免使用它们。

在您对 Java 更有信心之前，我建议您将每个类放入一个单独的文件中。将你的`Runner5`类的代码移动到一个单独的文件中，创建类`public`并命名它`Runner5.java`。然后你应该会发现你的代码编译得很好。

就目前而言，您的代码定义了一个`Runner5`属于`Tut5`您创建的每个实例的类。但是您永远不会创建 的任何实例`Tut5`，因此您无法创建任何`Runner5`属于它们的 s。如果您将`static`修饰符添加到您的`Runner5`类，那么您的内部类`Runner5`将属于`Tut5`该类而不是该类的实例。然后，您将能够`Runner5`从您的`main`方法中创建 s。但是，由于您仍在学习 Java，我建议您暂时保持简单并坚持每个文件一个类的规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T07:29:00.207

最简单的解决方案，只需将 Runner5 类复制到自己的文件中即可。

除非您有充分的理由，否则我不明白为什么必须在这种情况下使用嵌套类，它不会改变任何东西（在您显示的代码中）。**

# android - 用于更新 TextView 的 Json 字符串

> ID：10369599
> 
> 赞同：0
> 
> 时间：2012-04-29T04:05:10.333
> 
> 标签：android, json, android-layout, android-intent, android-emulator

我想从数据库中提取一个 JSON 字符串并更新一个 textview。我的 Json 字符串如下所示：

```
[
    {
        "meaning": "A boy or young man (often as a form of address)",
        "examples": [
            "I read that book when I was a <em>lad</em>",
            "come in, <em>lad</em>, and shut the door"
        ]
    },
    {
        "meaning": "A group of men sharing recreational, working, or other interests",
        "examples": [
            "she wouldn't let him go out with the <em>lads</em> any more"
        ]
    },
    {
        "meaning": "A man who is boisterously macho in his behavior or actions, esp. one who is interested in sexual conquest",
        "examples": [
            "Tony was a bit of a <em>lad</em>âalways had an eye for the women"
        ]
    },
    {
        "meaning": "A stable worker (regardless of age or sex)",
        "examples": []
    }
] 
```

我只想提取“意义”。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:09:34.467

首先，这是一个 JSON 数组，`meaning`里面有很多 s。

你可以像这样迭代它：

```
JSONArray jarr = new JSONArray(theJsonString);
for (int i = 0; i < jarr.length(); ++i)
{
    JSONObject jCell = jarr.getJSONObject(i);
    String meaning = cell.getString("meaning");
    // set it as text? concatenate the strings?
} 
```

笔记：

*   为了保持代码清晰，我没有处理异常，请在您的代码中进行。
*   阅读有关[JSON 格式](http://json.org/)的更多信息。
*   以下类是 android 的一部分：[JSONArray](http://developer.android.com/reference/org/json/JSONArray.html)，[JSONObject](http://developer.android.com/reference/org/json/JSONObject.html)。
*   值得一读，下次不用问了：）

# c++ - constexpr 指针值

> ID：10369606
> 
> 赞同：35
> 
> 时间：2012-04-29T04:07:47.900
> 
> 标签：c++, pointers, c++11, clang, constexpr

我正在尝试声明一个初始化为某个常量整数值的 constexpr 指针，但是 clang 正在挫败我的所有尝试：

尝试1：

```
constexpr int* x = reinterpret_cast<int*>(0xFF);

test.cpp:1:20: note: reinterpret_cast is not allowed in a constant expression 
```

尝试2：

```
constexpr int* x = (int*)0xFF;

test.cpp:1:20: note: cast which performs the conversions of a reinterpret_cast is not allowed in a constant expression 
```

尝试 3：

```
constexpr int* x = (int*)0 + 0xFF;

test.cpp:1:28: note: cannot perform pointer arithmetic on null pointer 
```

我试图做的事情是设计不允许的吗？如果是这样，为什么？如果没有，我该怎么做？

注意：gcc 接受所有这些。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-29T22:31:16.530

*正如 Luc Danton 所指出的，您的尝试被 [expr.const]/2 中的规则阻止了，这些规则说核心常量表达式*中不允许使用各种表达式，包括：

> -- a `reinterpret_cast`
> -- 具有未定义行为的操作 [注意：包括 [...] 某些指针算术 [...] -- 结束注释]

第一个项目符号排除了您的第一个示例。第二个示例被上面的第一个项目符号排除，加上 [expr.cast]/4 中的规则：

> [...] a `reinterpret_cast`[...] 执行的转换可以使用显式类型转换的强制转换表示法执行。相同的语义限制和行为适用。

第二个项目符号由[WG21 核心问题 1313](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1313)添加，并阐明在常量表达式中不允许对空指针进行指针运算。这排除了您的第三个示例。

即使这些限制不适用于核心常量表达式，仍然无法使用`constexpr`通过转换整数产生的值来初始化指针，因为 constexpr 指针变量必须由*地址常量表达式*初始化，通过 [expr .const]/3，必须计算为

> 具有静态存储持续时间的对象的地址、函数的地址或空指针值。

转换为指针类型的整数不是这些。

g++ 还没有严格执行这些规则，但是它最近的版本已经越来越接近它们，所以我们应该假设它最终会完全实现它们。

如果您的目标是声明一个对其执行静态初始化的变量，您可以简单地删除`constexpr`--clang 和 g++ 都会为此表达式发出一个静态初始化程序。如果出于某种原因需要将此表达式作为常量表达式的一部分，则有两种选择：

*   重构代码，以便传递 intptr_t 而不是指针，并在需要时将其转换为指针类型（在常量表达式之外），或者
*   使用`__builtin_constant_p((int*)0xFF) ? (int*)0xFF : (int*)0xFF`. 这种精确的表达式形式（`__builtin_constant_p`在条件运算符的左侧）禁用了条件运算符中严格的常量表达式检查，并且是一个鲜为人知但[记录在案](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html#index-g_t_005f_005fbuiltin_005fconstant_005fp-3262)的不可移植的 GNU 扩展，两者都支持gcc 和 clang。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T08:47:33.177

原因是（一次，非常有帮助的）错误消息给出的原因：`reinterpret_cast`在常量表达式中是不允许的。它被列为 5.19（第 2 段）中的显式例外之一。

将 the 更改`reinterpret_cast`为 C 风格的转换仍然会以语义等效的 a 结束`reinterpret_cast`，因此这无济于事（而且消息再次非常明确）。

如果你有办法获得一个带有值的指针，`0`你确实可以使用`p + 0xff`，但我想不出一种方法来获得这样一个带有常量表达式的指针。您可以依赖空指针值（`0`在您所做的指针上下文中，或者`nullptr`）在您的实现中具有值，`0`但正如您所看到的那样，您的实现拒绝这样做。我认为这是允许的。（例如，允许实现对大多数常量表达式进行保释。）

# google-app-engine - 无法将应用程序部署到 App 引擎

> ID：10369607
> 
> 赞同：0
> 
> 时间：2012-04-29T04:07:49.890
> 
> 标签：google-app-engine

我一直在尝试使用 Google Plugin for eclipse 部署我曾经部署到 App 引擎云的应用程序，现在我无法部署它。

我收到此错误：

```
An internal error occurred during: Deploying <myapp> to Google 
      schedule every 1 second failed to parse 
```

但是，我的应用程序编译正确并在 localhost App 引擎中正常工作。应用程序无法部署的原因可能是什么？

该错误没有提供有关错误内容的太多信息...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T05:38:19.103

您是否尝试每 1 秒安排一次 cron 任务？Cron 作业的最小间隔为一分钟。

# iphone - “必须明确描述对象数组参数的预期所有权”是什么意思，我该如何解决？

> ID：10369618
> 
> 赞同：4
> 
> 时间：2012-04-29T04:10:08.950
> 
> 标签：iphone, objective-c

以下函数定义的第一行有问题：

```
void draw(id shapes[], int count)
{   
    for(int i = 0;i < count;i++) {
        id shape = shapes[i];
        [shape draw];
    }
} 
```

编译失败并出现错误“必须明确描述对象数组参数的预期所有权”。

错误的确切原因是什么？我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T04:22:38.747

[您在ARC](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)环境中传递一个指针数组。您需要指定以下内容之一：

*   __强的
*   __虚弱的
*   __unsafe_unretained
*   __自动释放

我认为在你的情况下`__unsafe_unretained`应该可以工作，假设你不对你`draw()`同时传递的形状做任何事情。

```
void draw(__unsafe_unretained id shapes[], int count)
{
    for(int i = 0;i < count;i++) {
        id shape = shapes[i];
        [shape draw];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-26T20:23:09.953

我遇到了同样的问题，阅读这篇文章我解决了我的问题，我尝试了属性 __unsafe_unretained 但对我不起作用，编译器告诉我，你正试图将一个强 var 传递给 unsafe_unretained。因此，在本书样本中使用 __strong 可以正常工作。

```
void draw(__strong id shapes[], int count)
{
    for(int i = 0;i < count;i++) {
        id shape = shapes[i];
        [shape draw];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-22T21:36:28.487

另一种简单的方法是在 Xcode 中禁用 ARC。

选择您的项目或目标，然后转到**Build Settings**并在**Apple LLVM compiler 8.1 - Language**部分下，您将看到选项**Objective-C Automatic Reference Counting**。将其设置为**NO**。

# php - 如何从行号和一些标识符编辑 PHP 页面？

> ID：10369620
> 
> 赞同：0
> 
> 时间：2012-04-29T04:11:22.010
> 
> 标签：php

我想将**Data :** value 从**Some Data**替换为**Some Other Data**，**Method : ** 从 **Yes**到**No**。标识符只有**：（**冒号），之后是新行。

```
<?php
/* 
Data : Some Data
Method : Yes
*/
?> 
```

PHP中是否有任何方法可以做到这一点？

我尝试了**substr**函数，但它只将值与字符长度分开，并不适合我想要的。

# java - 如何从此 XML 文件中检索多个属性值 - 使用 SimpleXML/Android

> ID：10369621
> 
> 赞同：3
> 
> 时间：2012-04-29T04:11:26.817
> 
> 标签：java, android, xml-deserialization, simple-framework

我已经尝试了很多小时，并且浏览了 Google 上所有可能的示例，但我无法弄清楚如何在 Android 上使用 simplexml 从这个 XML 文件中获取属性。

XML 文件：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Service>
<Facture FactNo="" 
 NoAppel="6" 
 ProjDate="2012-04-01"
 NomProj="MR. H. BLOOM"
 AddProj="20, GARDEN ROAD" 
 VilleProj="WESTMOUNT, QC."
 CPProj="" ContProj="M. BLOOM" 
 TelProj="(555) 555-9571" 
 SysMarque="" 
 SysMod="" 
 SysType="" 
 SysSerie="" 
 SysNo=""
 SysTemp=""
 Tension=""
 Phase="0"
 Halo="False"
 POFact=""
 NomFact=""
 AdrsFact="" 
 VilleFact=""
 CPFact=""
 TelFact=""
 FaxFact=""
 Trouble=""
 TbLock="False"
 TDesc=""
 TRec=""
 Depl="False"
 TM="False" 
 NoTM=""
 TPA="False"
 NoTPA=""
 CS="False"
 NoCS=""
 Estim="False"
 NoEstim=""
 Proj="False"
 NoProj=""
 Term="True" 
 Incompl="False"
 Garant="False"
 NoGarant=""
 Annexe="False"
 NoAnnexe=""
 NoContrat="00007"
 MainDoeuvre="0,0000" 
 Materiel="0,0000"
 SousTot=""
 TPS="0,0000"
 TPSTaux="0.05"
 TVQ="0,0000"
 TVQTaux="0.085"
 Total="0,0000" />
<Pieces>
<Piece Qty="10" Desc="test" PO="12345678" PrixUnit="0.0000" Montant="0.0000" />
<Piece Qty="25" Desc="testitem2" PO="33333" PrixUnit="22.0000" Montant="220.0000"            />
<Piece Qty="35" Desc="testitem3" PO="44444" PrixUnit="33.0000" Montant="440.0000"     />
</Pieces>
<Techs>
<Tech Nom="Bobby" Reg="1" TD="2" Taux="3.5000" Montant="0.0000" Lock="False" Date="2012-04-01   
10:49:00" />
</Techs>
<Sign />
<Pics />
</Service> 
```

XML 文件是第三方的，所以我无法修改它。

服务等级（仅显示 Piece）：

```
 //Liste Pieces
    @ElementList(name="Piece", inline=true)
    @Path("Pieces")
    private List<PieceXML> pieces;

    public List<PieceXML> getpieces()
    {
        return pieces;
    } 
```

片断类：

```
@Root(name="Piece")
public class PieceXML 
{

@Attribute
private Double Qty;
@Attribute
private String Desc;
@Attribute
private String PO;
@Attribute
private Double PrixUnit;
@Attribute
private Double Montant;
 ...} 
```

我真正需要的是从 Piece 中的属性值构建一个数组，但真的不知道该怎么做。任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T13:24:31.823

好的，终于自己动手了。发现这很简单。我一直有它但无法让它工作，因为我遇到了节点的问题，这些节点的名称与我的应用程序的现有类完全相同，这导致在读取我返回的对象列表时获得空值。在那种情况下，我不得不使用

```
@Path(pathname) 
```

使用完整路径调用，即

```
@Path("Service/Pieces"). 
```

然后我可以得到我的

```
List<PieceXML> 
```

对象并填充我的 ArrayLists。

# php - 如果表中的行数小于限制，则返回行数 - 1

> ID：10369623
> 
> 赞同：0
> 
> 时间：2012-04-29T04:12:29.560
> 
> 标签：php, mysql

我有一个 53 行的表。我的 sql 语句如下所示：

`SELECT * FROM table LIMIT 1 , 100`

它向我显示 52 行而不是 53 行。什么给出了？当然，当我运行时：

`SELECT * FROM table`

它应该返回 53 行。

解决此问题的最佳方法是什么，以便在需要时可以有限制？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T04:15:53.990

使用时`LIMIT x, y`，第一个值是*偏移量*。所以`LIMIT 1, 100`意味着*跳过*前 1 条记录，并显示第 2 行到第 101 行。要在不跳过任何内容的情况下获取前 100 行，请编写`LIMIT 0, 100`或简单地`LIMIT 100`.

# android - Android 空指针

> ID：10369624
> 
> 赞同：0
> 
> 时间：2012-04-29T04:12:48.573
> 
> 标签：android

这里到底发生了什么？试图找到空值但到目前为止无法找到....我确定这很愚蠢

```
04-29 06:04:03.845: E/AndroidRuntime(392): FATAL EXCEPTION: main
04-29 06:04:03.845: E/AndroidRuntime(392): java.lang.RuntimeException: Unable to instantiate application com.adamwhiles.tw33tz.appliaction.Tw33tzApplication: java.lang.ClassNotFoundException: com.adamwhiles.tw33tz.appliaction.Tw33tzApplication in loader dalvik.system.PathClassLoader[/data/app/com.adamwhiles.tw33tz-2.apk]
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.LoadedApk.makeApplication(LoadedApk.java:466)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3260)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.ActivityThread.access$2200(ActivityThread.java:117)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:969)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.os.Looper.loop(Looper.java:123)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-29 06:04:03.845: E/AndroidRuntime(392):  at java.lang.reflect.Method.invokeNative(Native Method)
04-29 06:04:03.845: E/AndroidRuntime(392):  at java.lang.reflect.Method.invoke(Method.java:507)
04-29 06:04:03.845: E/AndroidRuntime(392):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-29 06:04:03.845: E/AndroidRuntime(392):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-29 06:04:03.845: E/AndroidRuntime(392):  at dalvik.system.NativeStart.main(Native Method)
04-29 06:04:03.845: E/AndroidRuntime(392): Caused by: java.lang.ClassNotFoundException: com.adamwhiles.tw33tz.appliaction.Tw33tzApplication in loader dalvik.system.PathClassLoader[/data/app/com.adamwhiles.tw33tz-2.apk]
04-29 06:04:03.845: E/AndroidRuntime(392):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-29 06:04:03.845: E/AndroidRuntime(392):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-29 06:04:03.845: E/AndroidRuntime(392):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.Instrumentation.newApplication(Instrumentation.java:942)
04-29 06:04:03.845: E/AndroidRuntime(392):  at android.app.LoadedApk.makeApplication(LoadedApk.java:461)
04-29 06:04:03.845: E/AndroidRuntime(392):  ... 11 more 
```

这是我的应用程序的应用程序类....

```
package com.adamwhiles.tw33tz.application;

import oauth.signpost.OAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;
import twitter4j.Twitter;
import android.app.Application;

public class Tw33tzApplication extends Application {

    private Twitter twitter;

    /** @return the twitter */
    public Twitter getTwitter() {
        return twitter;
    }

    /** @param twitter
     *            the twitter to set */
    public void setTwitter(Twitter twitter) {
        this.twitter = twitter;
    }

    private OAuthProvider provider;
    private CommonsHttpOAuthConsumer consumer;

    /** @param provider
     *            the provider to set */
    public void setProvider(OAuthProvider provider) {
        this.provider = provider;
    }

    /** @return the provider */
    public OAuthProvider getProvider() {
        return provider;
    }

    /** @param consumer
     *            the consumer to set */
    public void setConsumer(CommonsHttpOAuthConsumer consumer) {
        this.consumer = consumer;
    }

    /** @return the consumer */
    public CommonsHttpOAuthConsumer getConsumer() {
        return consumer;
    }
} 
```

这是我的应用程序的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.adamwhiles.tw33tz"
      android:versionCode="1"
      android:versionName="1.0">
      <uses-sdk android:minSdkVersion="10" />
      <uses-permission android:name="android.permission.INTERNET" /> 

    <application android:label="Tw33tz" android:name=".appliaction.Tw33tzApplication">
        <activity android:name=".AuthActivity" android:label="Tw33tz">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />
                <data android:scheme="callback" android:host="tw33tz" />
            </intent-filter>
        </activity>
        <activity android:name=".Tw33tzActivity"></activity>
    </application>
</manifest> 
```

希望这可以帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:20:48.080

它找不到一个它被引导相信它应该能够的类。我怀疑您在清单和代码中的拼写不一致：

未找到的类 com.adamwhiles.tw33tz。应用程序**.Tw33tzApplication**

来自清单

```
android:name=".appliaction.Tw33tzApplication" 
```

与来源提供

```
package com.adamwhiles.tw33tz.application; 
```

# memory - 内存内容为 ASCII 字符串，小端格式

> ID：10369625
> 
> 赞同：0
> 
> 时间：2012-04-29T04:12:55.890
> 
> 标签：memory, ascii, endianness

我必须使用 little endian 格式将以下内存内容转换为 ASCII 码：

```
0x6A636162 0x64726177 0x00002173 
```

我得到了“jcab draw!s”，这是错误的（当然，完全是胡说八道）。你应该如何使用小端格式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:41:27.487

应该是“倒退”！您首先将前两个最右边的十六进制值作为一个 ascii 字符读取，然后将注意力集中在其左侧的一对上，直到您到达最左边的最左边的十六进制值。

# sql-server - SQL Server 中的树结构数据查询

> ID：10369634
> 
> 赞同：19
> 
> 时间：2012-04-29T04:16:44.773
> 
> 标签：sql-server, database, sql-server-2008

我有一个`Person`有 3 列的表：父行的`Id, Name, ParentId`在哪里。`ParentId``Id`

目前，要显示整个树，它必须遍历所有子元素，直到没有更多子元素。似乎效率不高。

有没有更好更有效的方法来查询这些数据？

另外，有没有更好的方法在 SQL Server 数据库中表示这种树状结构？我的表/数据库的替代设计？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-29T04:28:50.633

假设您的亲子关系水平有限，我认为设计没有任何问题。下面是一个使用递归 CTE 检索关系的快速示例：

```
USE tempdb;
GO

CREATE TABLE dbo.tree
(
    ID INT PRIMARY KEY,
    name VARCHAR(32),
    ParentID INT FOREIGN KEY REFERENCES dbo.tree(ID)
);

INSERT dbo.tree SELECT 1, 'grandpa', NULL
UNION ALL SELECT 2, 'dad', 1
UNION ALL SELECT 3, 'me', 2
UNION ALL SELECT 4, 'mom', 1
UNION ALL SELECT 5, 'grandma', NULL;

;WITH x AS
(
    -- anchor:
    SELECT ID, name, ParentID, [level] = 0
    FROM dbo.tree WHERE ParentID IS NULL
    UNION ALL
    -- recursive:
    SELECT t.ID, t.name, t.ParentID, [level] = x.[level] + 1
    FROM x INNER JOIN dbo.tree AS t
    ON t.ParentID = x.ID
)
SELECT ID, name, ParentID, [level] FROM x
ORDER BY [level]
OPTION (MAXRECURSION 32);
GO 
```

不要忘记清理：

```
DROP TABLE dbo.tree; 
```

[这可能是一篇有用的文章。](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.100%29.aspx)另一种选择是[`hierarchyid`](http://msdn.microsoft.com/en-us/library/bb677290%28v=sql.100%29.aspx)，但我发现它在大多数情况下过于复杂。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T10:25:56.650

Aaron Bertrands 的回答非常适合一般情况。如果您只需要一次显示整个树，您可以只查询整个表并在内存中执行树构建。这可能更方便和灵活。性能也会稍微好一些（无论如何都需要下载整个表，并且 C# 进行此类计算比 SQL Server 更快）。

如果您只需要树的一部分，则不建议使用此方法，因为您会下载比需要更多的数据。

# ruby-on-rails-3.1 - 带有 Rails 3.1 的 Favicon 没有显示？

> ID：10369636
> 
> 赞同：11
> 
> 时间：2012-04-29T04:17:15.957
> 
> 标签：ruby-on-rails-3.1

我无法显示我的网站图标。它被称为`favicon.ico`公共目录（文件夹）内部。我的开发日志显示 favicon 没有问题。我将链接放在我的应用程序布局中：

```
<!DOCTYPE html>
<html>
    <head>
        <%= csrf_meta_tag %>
        <%= favicon_link_tag "/favicon.ico" %>
        <%= stylesheet_link_tag "application" %>
        <%= javascript_include_tag "application" %>
    </head>
    <body>
        <%= yield %>
    </body>
</html> 
```

但它仍然没有出现在 Firefox 中。我用 Firefox 清除了我的缓存，我也尝试`<%= favicon_link_tag %>`过。我还没有尝试过生产，但你甚至可以在 localhost 中看到它吗？我错过了什么？

**更新**

所以它出现在 Chrome 而不是 Firefox 中。知道为什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-29T02:25:02.130

如果您怀疑缓存是问题所在，您还可以通过向文件路径添加参数来欺骗浏览器加载新图标。

代替

`favicon_link_tag "/favicon.ico"`

采用

`favicon_link_tag "/favicon.ico?1"`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T05:16:28.430

在 Firefox 中再次清除缓存（我通常只是清除所有内容），然后在加载页面时检查网络流量。确保正在请求 favicon.ico。如果没有，那么它可能被缓存在某个地方。前几天我遇到了很多问题，但是在清除了几次缓存后，它突然开始工作了。

# c++ - 为什么 (c++)*(c++) 在 C++ 中是未定义的行为？

> ID：10369638
> 
> 赞同：4
> 
> 时间：2012-04-29T04:17:28.340
> 
> 标签：c++

我对此代码的输出感到困惑：

```
int c=3;
cout<<(c++)*(c++); 
```

我使用 gcc 并且输出是`9`，但是有人说这是未定义的行为，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T04:20:37.550

问题是“序列点”：

[http://en.wikipedia.org/wiki/Sequence_point](http://en.wikipedia.org/wiki/Sequence_point)

> 命令式编程中的顺序点定义了计算机程序执行中的任何点，在该点处，可以保证先前评估的所有副作用都已执行，并且尚未执行后续评估的副作用。
> 
> 当同一个变量在一个表达式中被多次修改时，序列点也会起作用。一个经常被引用的例子是 C 表达式 i=i++，它显然既赋予 i 其先前的值并增加 i。i 的最终值是不明确的，因为根据表达式求值的顺序，增量可能发生在赋值之前、之后或与赋值交错。特定语言的定义可能会指定一种可能的行为，或者简单地说该行为是未定义的。在 C 和 C++ 中，评估这样的表达式会产生未定义的行为。 [1]

碰巧的是，我在 MSVC（Windows）和 gcc（Linux）上都得到了完全相同的答案——“9”。无论我使用 gcc ("C") 还是 g++ (C++) 编译，我都会收到警告：

```
$ g++ -o tmp -Wall -pedantic tmp.cpp
tmp.cpp: In function "main(int, char**)":
tmp.cpp:7: warning: operation on "c" may be undefined
$ ./tmp
c=9... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T04:20:46.297

未定义的行为意味着**任何事情都**可能发生。

输出是`9`，但使用不同的编译器或不同的编译器开关，它也可能是`12`，`0`或`2147483647`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T04:20:42.207

C规范留下了许多未定义的东西，它们几乎由实现该语言的人（即编写编译器）自行决定。在这些未定义的事物中，有表达式的各个部分的求值顺序。

例如，是先计算乘法，然后再计算两个`++`es，还是`++`先计算一个，然后计算乘法，然后再计算另一个`++`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T04:22:05.420

根据编译器的编写方式、编译时使用的标志、月相等，答案可能是 9、16、20，也可能会产生[鼻恶魔](http://www.catb.org/jargon/html/N/nasal-demons.html)。始终尽量避免混淆代码和未定义的行为。查找有关如何避免这种情况的序列点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T10:01:51.347

考虑序列点以及为什么您的示例同时具有这两者的一种方法`unspecified behavior`是`undefined behavior`考虑首先引入临时变量的实现：

这样的实现可能会按如下方式处理后增量：

```
tmp_1=c;              // read 'c'
tmp_2 = tmp_1 + 1;    // calculate the incremented value
c = tmp_2;            // write to 'c'
tmp_1;                // the result of the expression 
```

原始表达式`(c++)*(c++)`有两个序列：

```
lhs_1=c;              // read 'c'
lhs_2 = lhs_1 + 1;    // calculate the incremented value
c = lhs_2;            // write to 'c'
lhs_1;                // the resulting value of the expression

rhs_1=c;              // read 'c'
rhs_2 = rhs_1 + 1;    // calculate the incremented value
c = rhs_2;            // write to 'c'
rhs_1;                // the resulting value of the expression 
```

顺序可能是：

```
lhs_1=c;              // read 'c'
lhs_2 = lhs_1 + 1;    // calculate the incremented value
c = lhs_2;            // write to 'c'

rhs_1=c;              // read 'c'
rhs_2 = rhs_1 + 1;    // calculate the incremented value
c = rhs_2;            // write to 'c'

lhs_1 * rhs_1         // (3 * 4) new value of 'c' is 5 
```

或者：

```
lhs_1=c;              // read 'c'
rhs_1=c;              // read 'c'

lhs_2 = lhs_1 + 1;    // calculate the incremented value
c = lhs_2;            // write to 'c'

rhs_2 = rhs_1 + 1;    // calculate the incremented value
c = rhs_2;            // write to 'c'

lhs_1 * rhs_1         // (3 * 3) new value of 'c' is 4 
```

或者：

```
rhs_1=c;              // read 'c'
rhs_2 = rhs_1 + 1;    // calculate the incremented value
c = rhs_2;            // write to 'c'

lhs_1=c;              // read 'c'
lhs_2 = lhs_1 + 1;    // calculate the incremented value
c = lhs_2;            // write to 'c'

lhs_1 * rhs_1         // (4 * 3) new value of 'c' is 5 
```

....ETC。

`unspecified behavior`就是它可以先评估 lhs 或 rhs 。就是我们在没有中间序列点的情况下`undefined behavior`进行读写。`c`

# asp.net-mvc - MVC 是否有可能在某个地方缓存我的数据？

> ID：10369641
> 
> 赞同：1
> 
> 时间：2012-04-29T04:18:10.103
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下控制器操作：

```
public ActionResult Details(string pk)
        {
            IEnumerable<ContentDetail> model = null;
            try
            {
                model = _content.Details(pk);
                if (model.Count() > 0)
                {
                    return PartialView(getView(pk) + "Details", model);
                }
            }
            catch (Exception e)
            {
                log(e);
            }
            return Content("No records found");
        } 
```

我用以下例程调用它：

```
$.ajax({
        cache: false,
        url: "/Administration/" + table + "s/Details",
        data: { pk: partitionKey },
        dataType: 'html',
        success: function (responseText) {
            $('#detailData').html(responseText);
            $(".updatable")
                .change(function (e) {
                    var type = $(this).attr('id').split('_')[0];
                    updateField(table, $(this), type);
                });
            $('.dialogLink')
                .click(function () {
                    dialogClick(this);
                    return false;
                });
        },
        error: function (ajaxContext) {
            ajaxOnFailure(ajaxContext)
        }
    }); 
```

我注意到的是，有时当我在控制器操作的第一行放置一个断点时，它似乎并没有在断点处停止。结果是否可能被 MVC 缓存，我如何在调试时阻止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T17:26:51.487

加载提琴手并查看请求是否甚至从浏览器返回。理想情况下，您会希望我通过此处提到的众多方法之一不写出缓存标头 [禁用整个 ASP.NET 网站的浏览器缓存](https://stackoverflow.com/questions/1160105/asp-net-mvc-disable-browser-cache/5546328#5546328)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T04:35:07.533

检查[`OutputCache`](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute.aspx)在控制器本身上设置的任何变化，或者，如果存在，所有控制器都可以继承的基本控制器。

我还注意到 IE 喜欢缓存东西，并发现缓解这种情况的唯一方法是对开发人员窗口执行操作并清除缓存（或`ctrl`++ `shift`）`del`

~~尝试添加`cache:false`到您的`.ajax`调用中，看看是否有任何影响（jQuery 将附加一个时间戳变量，使每个调用都是唯一的）。~~没关系，只是注意到你有它。一定要迟到了——当我想念这样的事情时，一定要签字。

# math - 在 Sass 中舍入数字并调整小数位数

> ID：10369643
> 
> 赞同：12
> 
> 时间：2012-04-29T04:19:01.717
> 
> 标签：math, sass, numbers, rounding

他们是在 sass 中更改舍入发生的数字的一种方式，我想停止将 2.0242914979757085% 这样的数字舍入到 2.024%。我想调整输出 css 中的小数位数

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2016-07-19T04:20:40.897

没有任何额外功能的快速选择是将数字乘以 1000，然后将其四舍五入，然后除以 1000。

```
round($percent * 1000) / 1000; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-29T04:52:05.800

从 SASS 更改日志中：

现在可以使用`--precision`命令行选项设置 Sass 中数字的数值精度。此外，现在可以通过将 Sass::Script::Number.precision 设置为整数（默认为 3）来更改 Sass 输出中的默认精度位数。由于现在可以更改此值，因此不推荐使用 Sass::Script::Number 中的 PRECISION 常量。万一您在代码中使用它，您现在应该改用 Sass::Script::Number.precision_factor。

这是在 SASS 3.1.8 中添加的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-24T23:02:51.387

您可以使用以下函数，这是对[Takeru Suzuki 创建的函数](https://gist.github.com/terkel/4373420)的轻微改进：

```
@function decimal-round ($number, $digits: 0, $mode: round) {
    $n: 1;
    // $number must be a number
    @if type-of($number) != number {
        @warn '#{ $number } is not a number.';
        @return $number;
    }
    // $digits must be a unitless number
    @if type-of($digits) != number {
        @warn '#{ $digits } is not a number.';
        @return $number;
    } @else if not unitless($digits) {
        @warn '#{ $digits } has a unit.';
        @return $number;
    }
    @if $digits > 0 {
        @for $i from 1 through $digits {
            $n: $n * 10;
        }
    }
    @if $mode == round {
        @return round($number * $n) / $n;
    } @else if $mode == ceil {
        @return ceil($number * $n) / $n;
    } @else if $mode == floor {
        @return floor($number * $n) / $n;
    } @else {
        @warn '#{ $mode } is undefined keyword.';
        @return $number;
    }
} 
```

**输出 ：**

```
decimal-round(0.333)    => 0
decimal-round(0.333, 1) => 0.3
decimal-round(0.333, 2) => 0.33
decimal-round(0.666)    => 1
decimal-round(0.666, 1) => 0.7
decimal-round(0.666, 2) => 0.67 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-14T16:15:49.577

您还可以执行以下操作：

```
@function ceilHundredths($numbers) {
    $numbers: $numbers * 10000;

    @if ($numbers < 1) {
        $numbers: $numbers - 1;

    } @else {
        $numbers: $numbers + 1;
    }

    @return round($numbers)/ 100#{"%"};

}

.test--regular {
    margin-left: percentage( -1 / 3 );
}

.test {
    margin-left: ceilHundredths( -1 / 3 );
}

.test--regular--2 {
    margin-left: percentage( 1 / 3 );
}

.test--2 {
    margin-left: ceilHundredths( 1 / 3 );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-28T17:56:56.747

严格来说，这不是您问题的答案，但如果您只想**去除**小数位，您不妨这样做：

```
font-size: round(12.5); /* => 12 */ 
```

它可能适用于不需要高精度的值**，**例如字体大小。

# c# - Longs & 不同的架构

> ID：10369644
> 
> 赞同：0
> 
> 时间：2012-04-29T04:19:07.107
> 
> 标签：c#

一个简单的问题：longs 是否因架构而异？我似乎记得不久前，当我们从 32 位机器转到 64 位机器时，长整数可能会有所不同，但是当我现在检查时，它们似乎是相同的（一个 64 位整数，实际上）。

我问，因为我正在编写一些代码，这些代码在 Int64s (C#) 中使用，虽然 longs 和 Int64s 目前看起来是相同的，但该死的自动完成喜欢使用 longs 而不是 Int64s，它认为它是一样的。为了节省自己的时间，我应该让它自动完成 longs，然后睡得很香，因为如果明天有人推出 128 位 CPU，它们不会改变，还是我现在应该付出额外的努力来确保它们是上述代码中的 int64s？是的，我知道 Int64 = long，就目前的实现而言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:22:35.647

虽然在 C 中大小`long`可能会有所不同，但[在 C#](http://msdn.microsoft.com/en-us/library/ms173104%28v=vs.80%29.aspx)中明确指定为 64 位整数。

# ubuntu - Error compiling the tesseract-ocr gem with ruby ffi-inliner

> ID：10369653
> 
> 赞同：3
> 
> 时间：2012-04-29T04:20:59.727
> 
> 标签：ubuntu, bundler, tesseract, ruby-1.9.3, ruby-ffi

When I try and run the following code,

```
require 'rubygems'
require 'bundler/setup'
Bundler.require(:default) 
```

I get the errors below

```
$ bundle exec ruby test.rb 
/home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/compilers/gcc.rb:19:in `compile': compile error: see logs at /tmp/.ffi-inliner-1000/69ee9294901b6113c67c891236ec7fc55128281d.log (CompilationError)
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders/c.rb:101:in `shared_object'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders.rb:80:in `block in build'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders.rb:77:in `instance_eval'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders.rb:77:in `build'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/inliner.rb:44:in `singleton_inline'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/inliner.rb:29:in `inline'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/c/baseapi.rb:30:in `<module:BaseAPI>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/c/baseapi.rb:27:in `<module:C>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/c/baseapi.rb:25:in `<module:Tesseract>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/c/baseapi.rb:25:in `<top (required)>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/c.rb:83:in `require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/c.rb:83:in `<top (required)>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/api.rb:26:in `require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract/api.rb:26:in `<top (required)>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract-ocr.rb:35:in `require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/tesseract-ocr-0.1.3/lib/tesseract-ocr.rb:35:in `<top (required)>'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `each'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/runtime.rb:66:in `block in require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `each'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler/runtime.rb:55:in `require'
    from /home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/bundler-1.1.3/lib/bundler.rb:119:in `require'
    from test.rb:4:in `<main>' 
```

The log file mentioned contains the following:

```
$ cat /tmp/.ffi-inliner-1000/69ee9294901b6113c67c891236ec7fc55128281d.log
/home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders/cpp.rb: In function ‘void read_config_file(tesseract::TessBaseAPI*, const char*, bool)’:
/home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders/cpp.rb:26:44: error: no matching function for call to ‘tesseract::TessBaseAPI::ReadConfigFile(const char*&, bool&)’
/home/cameron/.rvm/gems/ruby-1.9.3-p194/gems/ffi-inline-0.0.3/lib/ffi/inliner/builders/cpp.rb:26:44: note: candidate is:
/usr/include/tesseract/baseapi.h:242:8: note: void tesseract::TessBaseAPI::ReadConfigFile(const char*)
/usr/include/tesseract/baseapi.h:242:8: note:   candidate expects 1 argument, 2 provided 
```

My Gemfile.lock contains the following:

```
GEM
  remote: https://rubygems.org/
  specs:
    call-me (0.0.2.2)
      refining
    ffi (1.0.11)
    ffi-extra (0.0.5)
      ffi
    ffi-inline (0.0.3)
      ffi (>= 0.4.0)
    iso-639 (0.0.3)
    refining (0.0.5.5)
    tesseract-ocr (0.1.3)
      call-me
      ffi-extra
      ffi-inline
      iso-639

PLATFORMS
  ruby

DEPENDENCIES
  tesseract-ocr 
```

The tesseract version (at least, that provided by Ubuntu) is 3.02.01-2

How do I get this to compile?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:50:18.867

Turns out Tesseract changed their public api in v 3.02 compared to 3.01, so the ReadConfigFile method only takes one parameter. Workaround: delete the second parameter in lib/tesseract/c/baseapi.rb:159 as per [https://github.com/cwalsh/ruby-tesseract-ocr/commit/58d5d17d8c98feaaceacf78ae7dec67ea8c4a963](https://github.com/cwalsh/ruby-tesseract-ocr/commit/58d5d17d8c98feaaceacf78ae7dec67ea8c4a963).

Meh is committing a fix that works for both 3.01 and 3.02.

Update: Fixed in tesseract-ocr v0.1.5

# javascript - 每行带有 1 个下拉列表的动态表（经典 ASP [VBScript] 和 JavaScript）

> ID：10369654
> 
> 赞同：0
> 
> 时间：2012-04-29T04:21:00.273
> 
> 标签：javascript, loops, asp-classic, vbscript

我在 ASP/VBScript 中创建了一个动态表，它从记录集中填充一个表。使用 DO LOOP 为每个新的 EmployeeID 创建一个新行。下拉列表有 2 个选项：“签入”和“签出”。如果选择“签入”，则评论框将保持禁用状态，如果选择“签出”项，则将启用评论框；选择时，这两个选项都会生成一个日期。

问题是下拉列表仅适用于第一行。

我知道我需要重写代码，以便每次有新行时它都会调用**test()函数。**

那么有什么方法可以克隆函数并让它为每一行执行吗？我已经尝试通过在 ID 名称中添加 rowCount 来使函数名称和 ID 动态化（例如：“id="TestCmt<%=rowTest%>)

也许有人可以指出我正确的方向？我已经花了几个小时在这上面，我想自己弄清楚（有点）:)

这是一些代码：

```
 <html xmlns:ntb>
 <head>
  <script language="javascript" type="text/javascript">

  function enable() {
  document.getElementById("TestCmt").readOnly = false;
  document.getElementById("TestCmt").style.backgroundColor = "#FFFFFF";
  document.getElementById("TestCmt").innerHTML = "";
  document.getElementById("TestCmt").style.color = "#000000";
  }

  function disable() {
  document.getElementById("TestCmt").readOnly = true;
  document.getElementById("TestCmt").style.backgroundColor = "#DCDCDC";
  document.getElementById("TestCmt").innerHTML = "";
  }

  function test() {
  <%  if (StoreID > 0) AND (rsTest.bof=FALSE) then %> //Make sure there are employees

  var selectMenuT = document.getElementById("TestStatus");
  selectMenuT.onchange = function () {

    var chosenOptionT = parseInt(this.options[this.selectedIndex].value);
    var textDateT = document.getElementById("TestDate");
    var cmtsT = document.getElementById("TestCmt");

    switch (chosenOptionL) {

    case 0:
    disable();
    textDateT.innerHTML = "";
    cmtsT.innerHTML = <%=rsTest("TestCmt")%>
    break;

    case 1:
    disable();
    var approve = getReviewDate(); //excluded this function from here but it works fine
    textDateT.innerHTML = approve;
    break;

    case 2:
    enable();
    var reject = getReviewDate();
    textDateL.innerHTML = reject;
    break;
    }
   }
   <% end if %>
  } 
  </script>
 </head>

<body>

<%  if (StoreID > 0) and rsTest.BOF=FALSE then %> 

 <span class="header">Test Playground - Store# <%=rsStore("StoreNo")%></span>

 <table class="table" name="StoreTable" cellpadding="1" cellspacing="0">
  <tr>
   <td class="TestHeader">Store No.</td>
   <td class="TestHeader">Check-In Status</td>
   <td class="TestHeader">Date</td>
   <td class="TestHeader">Comments</td>
 </tr>

<%         
  dim i3, iStr3
  dim rowTest
  rowTest = 0

  do until rsTest.EOF 
  i3=clng(rsTest("EmployeeID"))
  iStr3=right("000"+cstr(i3),4)
  rowTest = rowTest + 1
%>

 <tr>
   <!-- Store No.-->
   <td>
    <% if StoreID > 0 then %>
    <label id="TestRN<%=rowTest%>"></label>
   </td>

  <!-- Check-In Status-->
  <td class="TestData" valign="top">
    <select id="TestStatus<%=rowTest%>" style="width:100%" **onchange="test()"**>
      <option value="0">&lt;Select one&gt;</option>
      <option value="1">Check-In</option>
      <option value="2">Check-Out</option>
    </select>
  </td>

  <!--Date-->
  <td valign="top">
    <input type="hidden" name="Sequence<%=iStr3%>" id="Sequence<%=iStr3%>">
    <label ID="TestDate<%=rowTest%>" class="TestData"><%=rowTest%></label>
  </td>

  <!--Comments-->
  <td valign="middle">
    <textarea id="TestCmt<%=rowTest%>" rows="2" style="textarea" ReadOnly ></textarea>
  </td>
  <% end if %>
</tr>

 <%
 rsTest.MoveNext
 loop 
 %>

 </table>
 <% end if %>

 </body>
</html> 
```

* * *

任何帮助表示赞赏。

签名：学习菜鸟

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:57:22.917

只需向 javascript 函数添加一个参数，您可以从中查看哪个下拉列表已更改。

例子：

```
function test(elem) {
    // elem is the dom element (the select)
    // get selected value:
    switch( elem.value ) {

    }
}

<select id="TestStatus<%=rowTest%>" style="width:100%" onchange="test(this)">
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:27:25.913

谢谢您的帮助。

我最终将 <%=rowTest%> 计数器放在我的每个 ID 和函数名称中。这又为每个行 ID 生成一个 test() 函数（例如，“test_1 ()”、“test_2 ()”）。

例子：

```
function test()_<%=rowTest%> {
...
}

...
<select id="TestStatus<%=rowTest%>" style="width:100%" onchange="test()_<%=rowTest%>">  
  <option value="0">&lt;Select one&gt;</option>  
  <option value="1">Check-In</option>  
  <option value="2">Check-Out</option>  
</select> 
```

# php - 来自文本文件的 PHP 加密/解密

> ID：10369655
> 
> 赞同：2
> 
> 时间：2012-04-29T04:21:06.013
> 
> 标签：php, encryption

这真的把我难住了......

我正在使用 PHP 进行加密。

使用内存，一切都很好....

```
//encrypt the sensitive data
$encryptedData = encrypt($senstiveData, $theKey);

//decrypt the data
$decryptedData = decrypt($encryptedData, $theKey);

//print decrypted string
echo "<br>Decrypted String:" . $decryptedData; 
```

即解密的字符串：包含正确的值。

但是，如果我将信息写入文件......它会中断。

```
$orderFile = "orders.dat";
$fh = fopen($orderFile, 'a') or die("can't open file");
fwrite($fh, $keyCode . "\n");
$serializedArray = serialize($encryptedData); 
fwrite($fh, $serializedArray . "\n");
fclose($fh); 
```

* * *

```
$file = fopen("orders.dat","r");

//key is first line in 'orders.dat'
$theKey = fgets($file);

//serialised array is second line...
$unserializedArray = unserialize(fgets($file));

$decryptedData2 = decrypt($unserializedArray, $theKey);

//print decrypted string
echo "<br>Decrypted String:" . $decryptedData2 . "<br>"; 
```

而且……答案不正确。

我已经验证了两个版本中使用的键和数组是相同的（即重建的未序列化数组包含与序列化之前相同的值），当我写入文件时可能会丢失一些东西吗？

我应该开始寻找调试的任何想法？

任何建议将不胜感激，米奇。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T04:55:12.680

从您的`fwrite()`. 即，不要这样做：

```
fwrite($fh, $keyCode . "\n"); 
```

`\n`可以搞砸加密/解密程序。

这应该足够了：

```
fwrite($fh, $keyCode); 
```

# java - 建议压缩库在不考虑 cpu 费用的情况下尽可能小地获得 byte[]？

> ID：10369660
> 
> 赞同：4
> 
> 时间：2012-04-29T04:22:33.640
> 
> 标签：java, compression

如果我接近这个错误，请纠正我，但我有一个队列服务器和一堆我在集群中运行的 java 工作者。我的队列中的工作单元非常小，但数量很多。到目前为止，我的基准测试和对工人的审查表明，我的速度约为 200mb/秒。

所以我试图弄清楚如何通过我的带宽获得更多的工作单位。目前我的 CPU 使用率不是很高（40-50%），因为它处理数据的速度比网络发送它的速度要快。我想通过队列获得更多的工作，并愿意通过昂贵的压缩/解压缩来支付它（因为每个核心的一半现在是空闲的）。

我已经尝试过 java LZO 和 gzip，但想知道是否有更好的（即使 cpu 更贵）？

更新：数据是一个字节[]。基本上队列只接受这种格式，所以我`ByteArrayOutputStream`用来将两个 int 和一个 int[] 写入 byte[] 格式。int[] 中的值都是 0 到 100（或 1000 但绝大多数数字为零）之间的整数。列表非常大，从 1000 到 10,000 个项目（同样，多数为零.. int[] 中的非零数字不要超过 100 个）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T04:47:35.470

听起来使用利用数据结构的自定义压缩机制可能非常有效。

首先，使用`short[]`（16 位数据类型）而不是`int[]`将发送的数据量减半（！），您可以这样做，因为数字很容易介于`-2^15`(-32768) 和`2^15-1`(32767) 之间。这非常容易实现。

其次，您可以使用类似于游程编码的方案：正数从字面上表示该数字，而负数表示那么多零（在取绝对值之后）。例如

```
[10, 40, 0, 0, 0, 30, 0, 100, 0, 0, 0, 0] <=> [10, 40, -3, 30, -1, 100, -4] 
```

这更难实现，只是替换`short`，`int`但在最坏的情况下会提供约 80% 的压缩（1000 个数字，100 个非零，没有一个是连续的）。

我只是做了一些模拟来计算压缩比。我测试了上面描述的方法，以及 Louis Wasserman 和 sbridges 建议的方法。两人的表现都非常好。

假设数组的长度和非零数字的数量都在它们的界限之间，这两种方法平均节省了大约 5400`int`秒（或`short`秒），压缩大小约为原始的 2.5%！游程编码方法似乎额外节省了大约 1 个`int`（或平均压缩大小小 0.03%），即基本上没有区别，因此您应该使用最容易实现的一种。以下是 50000 个随机样本的压缩率直方图（它们非常相似！）。

![直方图](../Images/f0e25365cbbb30d6cb93092b8e4adb75.png)

**摘要**：使用`short`s 代替`int`s 和其中一种压缩方法，您将能够将数据压缩到其原始大小的 1% 左右！

对于模拟，我使用了以下 R 脚本：

```
SIZE <- 50000

lengths <- sample(1000:10000, SIZE, replace=T)
nonzeros <- sample(1:100, SIZE, replace=T)

f.rle <- function(len, nonzero) {
  indexes <- sort(c(0,sample(1:len, nonzero, F)))
  steps <- diff(indexes)
  sum(steps > 1) + nonzero # one short per run of zeros, and one per zero
}

f.index <- function(len, nonzero) {
  nonzero * 2
}

# using the [value, -1 * number of zeros,...] method
rle.comprs <- mapply(f.rle, lengths, nonzeros)
print(mean(lengths - rle.comprs)) # average number of shorts saved

rle.ratios <- rle.comprs / lengths * 100
print(mean(rle.ratios)) # average compression ratio

# using the [(index, value),...] method
index.comprs <- mapply(f.index, lengths, nonzeros)
print(mean(lengths - index.comprs)) # average number of shorts saved

index.ratios <- index.comprs / lengths * 100
print(mean(index.ratios)) # average compression ratio

par(mfrow=c(2,1))
hist(rle.ratios, breaks=100, freq=F, xlab="Compression ratio (%)", main="Run length encoding")
hist(index.ratios, breaks=100, freq=F, xlab="Compression ratio (%)", main="Store indices") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T04:56:17.190

尝试将您的数据编码为两个[varint](https://developers.google.com/protocol-buffers/docs/encoding)，第一个 varint 是序列中数字的索引，第二个是数字本身。对于为 0 的条目，什么也不写。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T00:00:39.967

我写了一个 RLE 算法的实现。这对字节数组进行操作，因此可以用作现有代码的内联过滤器。如果您的数据将来发生变化，它应该可以安全地处理大值或负值。

它将零序列编码为 {0}{qty}，其中 {qty} 在 1..255 范围内。所有其他字节都存储为字节本身。您在发送之前压缩字节数组，并在接收时将其膨胀回完整大小。

```
public static byte[] squish(byte[] bloated) {
    int size = bloated.length;
    ByteBuffer bb = ByteBuffer.allocate(2 * size);
    bb.putInt(size);
    int zeros = 0;
    for (int i = 0; i < size; i++) {
        if (bloated[i] == 0) {
            if (++zeros == 255) {
                bb.putShort((short) zeros);
                zeros = 0;
            }
        } else {
            if (zeros > 0) {
                bb.putShort((short) zeros);
                zeros = 0;
            }
            bb.put(bloated[i]);
        }
    }
    if (zeros > 0) {
        bb.putShort((short) zeros);
        zeros = 0;
    }
    size = bb.position();
    byte[] buf = new byte[size];
    bb.rewind();
    bb.get(buf, 0, size).array();
    return buf;
}

public static byte[] bloat(byte[] squished) {
    ByteBuffer bb = ByteBuffer.wrap(squished);
    byte[] bloated = new byte[bb.getInt()];
    int pos = 0;
    while (bb.position() < bb.capacity()) {
        byte value = bb.get();
        if (value == 0) {
            bb.position(bb.position() - 1);
            pos += bb.getShort();
        } else {
            bloated[pos++] = value;
        }
    }
    return bloated;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T04:49:12.947

与 7z 和 gzip 相比，我对 BZIP2 印象深刻。我没有亲自尝试过这个 Java 实现，但看起来很容易用你的 GZIP 调用代替这个并验证结果。

[http://www.kohsuke.org/bzip2](http://www.kohsuke.org/bzip2)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T04:50:21.500

您可能应该在数据流上尝试所有主要的，看看哪个效果最好。您还应该考虑到某些算法将需要更长的时间来运行，从而增加队列的延迟。这可能是也可能不是问题，具体取决于您的应用程序。

如果您对数据有所了解，有时可以获得更好的压缩。（dbaupp 的回答很好地涵盖了这种方法）

这种[压缩算法的比较](http://blog.terzza.com/linux-compression-comparison-gzip-vs-bzip2-vs-lzma-vs-zip-vs-compress/)可能很有用。来自文章：

![流行压缩算法的压缩比](../Images/c6cbcf2dc125e5fd3abc7394e5498ff8.png)

# jquery - Django Ajax Jquery 调用

> ID：10369667
> 
> 赞同：7
> 
> 时间：2012-04-29T04:25:12.260
> 
> 标签：jquery, python, ajax, django

这可能是基本的，但我已经花了两天时间，阅读了无数的教程，但我仍然无法让它工作。简单地说，我试图完成一项基本任务只是为了看到它工作。我想向我的捐赠视图发送一个 ajax 调用。我看到它成功通过了，但我希望我的模板也会更新为“TRUE”，但它仍然是“FALSE”。我感谢任何帮助或建议。

我的jQuery ...

```
$.ajax({
    type: "POST",
    url:"/donate/",
    data: {
    'test': 'success',
    },
    success: function(){
      alert('test')
     },
    error: function(){
        alert("Error");
}); 
```

这是我的看法...

```
def donate(request):
    if request.is_ajax():
        test = "TRUE"

    if request.method == 'POST':
        form = DonateForm(request.POST)
        if form.is_valid():
            form.save()
    else:
        form = DonateForm()
        test = "FALSE"

    return render_to_response('donate_form.html', {'form':form,'test':test}, context_instance=RequestContext(request)) 
```

我的模板包括这个...

```
<h1>{{ test }}</h1> 
```

## 更新/解决方案

就像在这个问题的评论中提到的那样，我没有对返回的数据做任何事情。我将我的成功调用更新为以下内容并且它有效

```
 $.ajax({
    type: "POST",
    url:"/donate/",
    data: {
    'zip': zip,
    },
    success: function(data){            

        results = $(data).find('#results').html()               
        $("#id_date").replaceWith("<span>" + results + "</span >");

    },
    error: function(){
        alert("Error");
    }, 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T09:03:05.303

我认为问题在于您传递数据的位置。你用`Firebug`吗？一个很好的检查你是否传入任何东西`POST`的工具，一般来说它是一个很好的 web 开发工具。

这是一个从表单发送 Ajax 调用的工作示例

```
$("#form").submit(function(event) {
        var $form = $(this),
        $inputs = $form.find("input, select, button, textarea"),
        serializedData = $form.serialize();

        $.ajax({
            url: "/donate/",
            type: "post",
            data: serializeData,
            success: function(response) {
                alert(response)
            }
        })
        event.preventDefault();
    }); 
```

然后你的视图看起来像这样

```
if request.is_ajax() or request.method == 'POST':
        form = DonateForm(data=request.POST)
        if form.is_valid():
            return HttpResponse("Success")
        else:
            return HttpResponse("Fail") 
```

顺便说一句，除非你真的需要`$.ajax()`我建议你使用的所有额外功能，否则`$.post()`它看起来更直接使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T00:48:25.887

我认为您的代码很少有问题...

1.  您在没有 csrf_token 的情况下向 django 发送 POST 请求 => django 不会为此请求返回成功。您需要使用 POST 请求发送 csrf_token。检查萤火虫。

2.  即使 django 没有给出任何错误，那么您也不会在任何地方更改页面的内容（在浏览器上）...... djang 会发回这个字符串 - >“成功”......就是这样。

您需要像这样更改代码，

将 'django.core.context_processors.csrf' 添加到 settings.py 中的 TEMPLATE_CONTEXT_PROCESSORS 以访问所有模板中的 csrf 令牌。

您当前的模板：

```
<html>
    <script type="text/javascript">
    $("#form").submit(function(e) {
        e.preventDefault();
        serializedData = $("#form").serialize();

        $.ajax({
           url: "/donate/",
           type: "post",
           data: serializeData,
           cache: 'false',
           dataType: "json",
           async: 'true',

           success: function(data) {
               alert(data)
           },
           error:function(data) {
               alert("error in getting from server")
           },
        });
    });  
    </script>
    <body>
        <form id="form">
            {% csrf_token %}
            {% for field in form %}
                {{ field }}
            {% endfor %}
        </form>
    <body>
</html> 
```

捐赠观点：

```
def donate(request):
    if request.method == 'POST':
        form = DonateForm(data=request.POST)
        if form.is_valid():
            form.save()
            return HttpResponse("SuccessFully Saved")
        else:
            return HttpResponse("Error in saving") 
```

现在，您将看到：

*   SuccessFully Saved -> 如果成功保存数据。
*   保存时出错 -> 如果由于某种原因未保存数据。
*   从服务器获取错误 -> 如果服务器响应一些错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T04:40:12.523

该`request.is_ajax()`测试检查 HTTP_X_REQUESTED_WITH 标头是否存在，JQuery 在发送您的请求之前应该设置它。（如果您手动使用 XMLHttpRequest，您也必须手动添加该标头。）我个人喜欢采用不同的路线，因为它更容易测试并且不依赖 HTTP 标头：向 URL 添加查询参数，例如 '?类型=ajax'。

然后，您将更`request.is_ajax()`改为`request.GET.get('type', null) == 'ajax'`并在您的 JavaScript 中更改`url:"/donate/"`为`url:"/donate/?type=ajax"`.

这种方法的好处是您可以在不使用 AJAX 的情况下测试这些调用，只需将该`?type=ajax`字符串添加到任何请求中即可。

# php - 在 PHP 中编写大型 elseif 语句的简单方法

> ID：10369668
> 
> 赞同：4
> 
> 时间：2012-04-29T04:25:18.087
> 
> 标签：php, html

我从电子邮件表单中获取帖子值，并将所有选项值设置为数字，并尝试将它们转换为实际字符串以在电子邮件中发送。我需要让这段代码更容易使用。

```
if ($subject == "1") {
$sub = "General Questions"; 
} elseif($subject == "2") {
$sub = "Membership";
} elseif($subject == "3") {
    $sub = "Club Fees";
} elseif($subject == "4") {
    $sub = "Proshop &amp; Lessons";
} elseif($subject == "5") {
    $sub = "Events"; 
} elseif($subject == "6") {
    $sub == "Leagues &amp; Programs";
} elseif($subject == "7") {
    $sub == "Resturant &amp; Bar";
}; 
```

也许我可以将 设置`value=''`为实际值并一起跳过这部分。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T04:28:47.017

为什么不做一个关联数组？

```
$subs = array(
  1 => 'General Questions',
  2 => 'Membership',
  3 => 'Club Fees',
  4 => 'Proshop &amp; Lessons',
  // others.
);

$sub = isset($subs[$subject]) ? $subs[$subject] : 'Default Value'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T04:27:51.187

重写的一种方法是使用`switch`PHP 中的语句。你可以[在这里阅读更多关于它的信息](http://php.net/manual/en/control-structures.switch.php)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T04:28:58.840

使用`switch`语句，或将潜在结果映射到它们各自的值：

```
switch ( $subject ) {
  case 1:
    $sub = 'foo';
    break;
  case 2:
    $sub = 'bar';
    break;
} 
```

或者

```
$values = array( "Foo", "bar" );
$sub = $values[ --$subject ]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-29T04:30:38.577

尝试这个

```
<?php
switch ($subject)
{
case "1":
  $sub = "General Questions";
  break;
case "2":
  $sub = "Membership";
  break;
case "3":
  $sub = "Club Fees";
  break;
case "4":
  $sub = "Proshop &amp; Lessons";
  break;
case "5":
  $sub = "Events";
  break;
case "6":
  $sub = "Leagues &amp; Programs";
  break;
case "6":
  $sub = "Resturant &amp; Bar";
  break;
default:
  $sub = "";
}
?> 
```

# apache - 打开图层 GetFeatureInfo 代理设置

> ID：10369669
> 
> 赞同：0
> 
> 时间：2012-04-29T04:25:21.830
> 
> 标签：apache, tomcat, proxy, openlayers

我对这条线有疑问， ***OpenLayers.ProxyHost = "proxy.cgi?url=";***

除了在开放层代码集中写上一行之外应该做什么？

我的信息我尝试使用 WMSGetFeatureInfo 命令获取 WMS 图像的特征信息。我正在使用 openlayer 2.10、geoserver 和 apache-tomcat-6.0.35。我可以使用 localhost:8080 运行 tomcat，使用 localhost:8080/geoserver 运行 geoserver。

我是开放层的新手，我看到了关于 OpenLayers 项目的常见问题解答，但仍然无法找出答案。您的任何答案对我很有帮助吗？

感谢您宝贵的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T15:10:11.547

这个链接可能有用：[Openlayers Proxy path usage](http://trac.osgeo.org/openlayers/wiki/FrequentlyAskedQuestions#ProxyHost)

OpenLayers 执行的一些任务（包括 WFS 请求）需要使用代理脚本，因为 JavaScript 中限制使用 XMLHTTPRequest 向远程服务器发出请求。在设置地图之前添加该特定声明。

从这里开始：http: [//openlayers.org/dev/examples/](http://openlayers.org/dev/examples/) [2](http://openlayers.org/dev/examples/)

代码示例：

```
 /*
     * Fix for OpenLayers using 900913 for web mercator and AGS using 102113 (it must run before map init)
    OpenLayers.Layer.WMS.prototype.getFullRequestString = function(newParams,altUrl) {
        try {
            var projectionCode=typeof this.options.projection == 'undefined' ? this.map.getProjection() : this.options.projection;
        } catch(err){
            var projectionCode=this.map.getProjection();
        }
        this.params.SRS = projectionCode=="none" ? null : projectionCode;
        return OpenLayers.Layer.Grid.prototype.getFullRequestString.apply(this,arguments);
    }

*/

    OpenLayers.ProxyHost = proxyPath;

    var options = {
        projection: mercator, //EPSG:3785/900913
        displayProjection: geographic, //EPSG:4326
        theme: null,
        maxExtent: new OpenLayers.Bounds(-20037508.34, -20037508.34, 20037508.34, 20037508.34),
        maxResolution: 156543.0339,
        units: 'm',
        controls: [],
        numZoomLevels: MAX_ZOOM_LEVEL,
        allOverlays: true
    };
    OpenLayers.Util.DEFAULT_PRECISION = 18;

    mp = new OpenLayers.Map('map', options);
    addMaps();
    addControls();
    mp.addLayers([googlePhysical, googleSatellite, googleStreets, googleHybrid]);
    //Enabling the preferred layers with a delay of 450 to be able to load the external backgrounds
    setTimeout(setInitialLayersDiv, 450);

    if (!mp.getCenter()) {
        if (document.getElementById('userMapExtent').value != '') {
            var sExtent = document.getElementById('userMapExtent').value.split(',');
            mp.zoomToExtent(new OpenLayers.Bounds(sExtent[0], sExtent[1], sExtent[2], sExtent[3]), true);
        } else {
            mp.zoomToExtent(europeGoogleExtent);
        }
    }
    J('#google_loading').hide('slow'); 
```

# c# - C#：如何将对象转换为 ItemSource 数据类型？

> ID：10369670
> 
> 赞同：0
> 
> 时间：2012-04-29T04:25:24.107
> 
> 标签：c#, wpf, data-binding, user-controls, wpf-controls

我正在尝试开发自定义用户控件。在我的用户控件中，我使用两个控件一个列表框和一个文本框。文本框用于过滤列表框中的项目。为此，我的过滤方法遇到了问题。在我的过滤器方法中，我需要将对象转换为 ItemSource 类型。但我不明白我该如何投射它。这是我尝试的代码：

```
 public static readonly DependencyProperty ItemSourceProperty = DependencyProperty.Register("ItemSourrce", typeof(IEnumerable), typeof(SSSearchListBox), new PropertyMetadata(new PropertyChangedCallback(OnItemsSourcePropertyChanged)));

    private static void OnItemsSourcePropertyChanged(DependencyObject sender, DependencyPropertyChangedEventArgs e)
    {
        var control = sender as SSSearchListBox;
        if (control != null)
            control.OnItemsSourceChanged((IEnumerable)e.OldValue, (IEnumerable)e.NewValue);

    }

    private void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
    {
        // Remove handler for oldValue.CollectionChanged 
        var oldValueINotifyCollectionChanged = newValue as INotifyCollectionChanged;

        if (null != oldValueINotifyCollectionChanged)
        {
            oldValueINotifyCollectionChanged.CollectionChanged -= new NotifyCollectionChangedEventHandler(newValueINotifyCollectionChanged_CollectionChanged);
        }
        // Add handler for newValue.CollectionChanged (if possible) 
        var newValueINotifyCollectionChanged = newValue as INotifyCollectionChanged;
        if (null != newValueINotifyCollectionChanged)
        {
            newValueINotifyCollectionChanged.CollectionChanged += new NotifyCollectionChangedEventHandler(newValueINotifyCollectionChanged_CollectionChanged);
        }
    }

    void newValueINotifyCollectionChanged_CollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        //Do your stuff here. 

    } 

    public IEnumerable ItemSourrce
    {
        get { return (IEnumerable)this.GetValue(ItemSourceProperty); }
        set { this.SetValue(ItemSourceProperty, value); }
    }
public void TextFiltering(ICollectionView filteredview, DevExpress.Xpf.Editors.TextEdit textBox)
    {
        string filterText = "";
        filteredview.Filter = delegate(object obj)
        {

            if (String.IsNullOrEmpty(filterText))
            {
                return true;
            }
            string str = obj as string; // Problem is here.
                                        // I need to cast obj to my ItemSourrce Data Type.
            if (String.IsNullOrEmpty(obj.ToString()))
            {
                return true;
            }

            int index = str.IndexOf(filterText, 0, StringComparison.InvariantCultureIgnoreCase);
            return index > -1;
        };
        textBox.EditValueChanging += delegate
        {
            filterText = textBox.Text;
            filteredview.Refresh();
        };
    }

    private void textEdit1_GotFocus(object sender, RoutedEventArgs e)
    {

        ICollectionView view = CollectionViewSource.GetDefaultView(ItemSourrce);
        TextFiltering(view, textEdit1);
    } 
```

调用此使用控制：

```
 List<testClass> myList = new List<testClass>();
    public void testMethod()
    {
        for (int i = 0; i < 20; i++)
        {
            myList.Add(new testClass { testData=i.ToString()});
        } 
        myTestControl.ItemSourrce = myList;
    }

    public class testClass
    {
      public string testData { get; set; }
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:31:17.150

好吧，您想要分配给 ItemSource（或 ItemsSource 以保持命名一致性）的所有内容都必须实现 IEnumerable 接口。这意味着基本上所有你可以通过 foreach 迭代的东西（简单地说）。所以每一个List、array、collection、Dictionaries等等。

Normaly 你不能迭代一个普通的开箱即用的字符串！

因此，如果您的对象确实是一个字符串（在调试时使用断点检查它），您必须以某种方式拆分它。

ps：顺便说一下这段代码

```
if (String.IsNullOrEmpty(obj.ToString()))
{
   return true;
} 
```

从不（除了一些罕见的无意义的示例，其中您为 ToStirng() 显式返回空字符串）返回 true，因为 obj.ToString() 永远不会为 null 或 Empty。在 Object 类型（每个 .net 类型都基于）的标准实现中，它返回命名空间和类型的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:53:29.253

如果我理解得很好，您的对象是 type`testClass`而不是`string`.

所以你的代码应该是你尝试进行强制转换的地方。

```
string str = string.Empty;

testClass myObject = obj as testClass;

if (myObject == null)
    return true;
else
    str = myObject.testData;

if (string.IsNullOrEmpty(str))
    return true;

return str.IndexOf(filterText, 0, StringComparison.InvariantCultureIgnoreCase) > -1; 
```

# android - 如何读/写布尔首选项

> ID：10369671
> 
> 赞同：6
> 
> 时间：2012-04-29T04:25:42.237
> 
> 标签：android, preferences, sharedpreferences

编辑：此代码实际上有效。我在使用它的代码中有问题。无论如何都要留下它，以防有人发现它有用。

我有一个类有两种方法来编写和读取布尔持久首选项。但是，如果我写入一个新值然后尝试读取它，我仍然会得到旧值。只有当我杀死应用程序并重新启动它时，我才会获得新的价值。知道问题是什么吗？

```
 Context mContext;

 ....
 public void writeFlag(boolean flag) {
        SharedPreferences sharedPreferences = PreferenceManager
                .getDefaultSharedPreferences(mContext);
        Editor editor = sharedPreferences.edit();
        editor.putBoolean("mykey", flag);
        editor.commit();
}

public boolean readFlag() {
        SharedPreferences sharedPreferences =
               PreferenceManager.getDefaultSharedPreferences(mContext);
        return sharedPreferences.getBoolean("mykey", false);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T04:27:09.083

```
public static boolean getBooleanFromSP(String key) {
// TODO Auto-generated method stub
    SharedPreferences preferences = getApplicationContext().getSharedPreferences(" SHARED_PREFERENCES_NAME ", android.content.Context.MODE_PRIVATE);
    return preferences.getBoolean(key, false);
}//getPWDFromSP()

public static void saveBooleanInSP(String key, boolean value){
    SharedPreferences preferences = getApplicationContext().getSharedPreferences(" SHARED_PREFERENCES_NAME ", android.content.Context.MODE_PRIVATE);
    SharedPreferences.Editor editor =      preferences.edit();
    editor.putBoolean(key, value);
    editor.commit();
}//savePWDInSP() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-28T10:44:06.227

```
public static boolean getBooleanFromSP(String key) {
// TODO Auto-generated method stub
SharedPreferences preferences = 
getApplicationContext().getSharedPreferences(" SHARED_PREFERENCES_NAME ", 
  android.content.Context.MODE_PRIVATE);
 return preferences.getBoolean(key, false);
  }//getPWDFromSP()

 public static void saveBooleanInSP(String key, boolean value){
SharedPreferences preferences = getApplicationContext().getSharedPreferences(" SHARED_PREFERENCES_NAME ", android.content.Context.MODE_PRIVATE);
SharedPreferences.Editor editor =      preferences.edit();
editor.putBoolean(key, value);
editor.commit();
 }//savePWDInSP() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-28T10:55:28.670

```
public class SharePref {
private static final String TAG = SharePref.class.getSimpleName();
private static SharePref mThis;
private Context mContext;
private SharedPreferences mPreference;

private SharePref() {

}

public static void init(Context context) {
    if (mThis == null) {
        mThis = new SharePref();
        mThis.setData(context);
    }
}

private void setData(Context context) {
    mThis.mContext = context;
    mPreference = mContext.getSharedPreferences(TAG, Context.MODE_PRIVATE);
}

public static SharePref getInstance() {
    return mThis;
}

public void writeString(String tag, String data) {
    SharedPreferences.Editor editor = mPreference.edit();
    editor.putString(tag, data).apply();
}

public String readString(String tag) {
    if (mPreference == null)
        mPreference = mContext.getSharedPreferences(TAG, Context.MODE_PRIVATE);
    return mPreference.getString(tag, null);
}

public void writeBoolean(String tag, boolean data) {
    SharedPreferences.Editor editor = mPreference.edit();
    editor.putBoolean(tag, data).apply();
}

public boolean readBoolean(String tag) {
    return mPreference.getBoolean(tag, false);
}

public void clear(String tag) {
    mPreference.edit().remove(tag).apply();
}

} 
```

//在活动中

```
 SharePref.init(this);       
 SharePref.getInstance().writeString("key","value"); 
```

# vim - Vim 插件：跟随光标下的符号

> ID：10369676
> 
> 赞同：1
> 
> 时间：2012-04-29T04:27:34.900
> 
> 标签：vim

是否有一个 vim 插件允许您将光标放在一个函数上并让一个插件运行一个脚本来搜索标签或其他实体以查找该函数的定义位置。或者它可能提供了定义该函数的位置列表？具体来说，我正在寻找一个基于 C/C++ 的插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T04:30:36.813

您需要[ctags](http://ctags.sourceforge.net/)，它支持 C 以外的许多语言。它将向您显示光标下的函数或变量的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T23:38:44.030

cscope 与 Vim 很好地集成，可以做到这一点以及更多。定义函数的位置，调用函数的位置等。您可能还需要带有 cscope 的标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T04:33:42.323

vim 网站上有很多插件，你可能真的想去那里看看。此外，您并没有真正指定您希望它适用于哪些语言，所以这是一个非常广泛的问题（很难找到真正的答案）。

您的问题的另一种选择是，与其将查找功能放入 vim 中，不如将其放入已经拥有它的其他东西中？为什么不是日食？有一个名为 vrapper 的 eclipse 插件，它在 eclipse 中提供了类似 vim 的功能。然后，您可以使用 eclipse 来执行您想要执行的引用和查找，因为它已经支持许多语言。

**编辑**：[这不能解决吗？](https://stackoverflow.com/questions/635770/jump-to-function-definition-in-vim)

我想你想知道你必须做什么才能解决问题，就好像你知道这个功能在那里但不知道如何使用它一样。该链接解释了它。如果这是您问题的解决方案，请记得投票和检查XD

# entity-framework - EF 代码优先相关实体根本不加载

> ID：10369678
> 
> 赞同：2
> 
> 时间：2012-04-29T04:28:03.257
> 
> 标签：entity-framework, mapping, foreign-keys, ef-code-first

我一直无法找到专门解决此问题的其他人，所以就到这里。

我有一个简单的模型，其中一个实体简单地将另一个实体引用为父子关系或一对多关系，定义如下：

```
public class Parent
{
    public int ID { get; private set; }
    public string Name { get; private set; }
}

public class Child
{
    public int ID { get; private set; }
    public string Name { get; private set; }
    public virtual Parent Parent { get; private set; }
} 
```

我正在为每个创建特定的映射文件，这些文件对除相关实体之外的所有正常属性都非常有用。它总是出现空值。无论我是否在属性上有虚拟/私有访问器，它都不会加载，除非我先从上下文中单独提取父级的副本。我的映射如下所示：

```
HasRequired(t => t.Parent).WithMany().Map(t => t.MapKey("ParentID")).WillCascadeOnDelete(); 
```

我做错了什么吗？我一生都无法弄清楚这一点。就这样我涵盖了所有基础，我正在加载这样的实体：

```
Context.Set<Child>().FirstOrDefault(x => x.ID == 1); 
```

最后，我有一些限制：

1.  我不能将模型中的外键作为属性。
2.  我不能从父母那里收集孩子。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T17:37:25.047

我终于弄明白了。经过多次试验和错误，我注意到将无参数构造函数标记为内部，EF 无法创建您的类型的动态代理类，因此禁用所有延迟加载。我有两个构造函数，一个用于 EF 水合对象，另一个带有参数要求调用者创建我的实体。一旦我将签名更改为受保护的内部，它就开始工作了。所以我改变了这个：

```
internal Child() {} 
```

至

```
protected internal Child() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:30:56.430

可能是你没有启用延迟加载。试试这个，

```
Context.Set<Child>().FirstOrDefault(x => x.ID == 1).Include(c=>c.Parent); 
```

# http - HTTP 代理服务器会修改请求数据包吗？

> ID：10369679
> 
> 赞同：16
> 
> 时间：2012-04-29T04:28:08.467
> 
> 标签：http, http-headers, httprequest, http-proxy

在代理服务器转发到服务器之前，是否向 HTTP 请求添加或修改了任何请求标头？

如果是这样，是否对相同的数据包进行了更改，或者内容是否用于创建带有修改的新请求数据包？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-29T06:19:22.997

There are a few different types of proxy servers. Because you've mentioned request headers, I'm going to assume that you're talking about HTTP proxy servers, which forward HTTP requests, not packets.

**NOTE:** In the special case of [HTTPS requests](http://en.wikipedia.org/wiki/HTTP_Secure) (TLS/SSL via [`CONNECT`](http://en.wikipedia.org/wiki/HTTP_tunnel#HTTP_CONNECT_Tunneling)), proxy servers *will* just forward the content of the TCP packets (and are unable to inspect the packets unless acting as a [man-in-the-middle](http://en.wikipedia.org/wiki/Man-in-the-middle_attack) proxy).

* * *

Of course it depends on the proxy software and its configuration, but HTTP proxies are *expected* to follow the W3C **[Guidelines for Web Content Transformation Proxies](http://www.w3.org/TR/ct-guidelines/)**, which states many things, but most relevantly:

*   Other than to convert between `HEAD` and `GET` proxies must not alter request methods.

*   If the request contains a `Cache-Control: no-transform` directive, proxies must not alter the request other than to comply with transparent HTTP behavior defined in RFC 2616 HTTP sections section 14.9.5 and section 13.5.2 and to add header fields as described in [4.1.6 Additional HTTP Header Fields](http://www.w3.org/TR/ct-guidelines/#sec-additional-headers).

*   Other than the modifications required by RFC 2616 HTTP proxies should not modify the values of header fields other than the `User-Agent`, `Accept`, `Accept-Charset`, `Accept-Encoding`, and `Accept-Language` header fields and must not delete header fields.

*   Proxies should add the IP address of the initiator of the request to the end of a comma separated list in an [`X-Forwarded-For`](http://en.wikipedia.org/wiki/X-Forwarded-For) HTTP header field.

*   Proxies must (in accordance with RFC 2616) include a `Via` HTTP header field.

* * *

In summary, you can generally expect these HTTP headers to be changed/added by a standards-compliant proxy:

*   `User-Agent`
*   `Accept`
*   `Accept-Charset`
*   `Accept-Encoding`
*   `Accept-Language`
*   `X-Forwarded-For`
*   `Via`

# python - 如何并排绘制具有相同 X 坐标的条形图（“躲避”）

> ID：10369681
> 
> 赞同：47
> 
> 时间：2012-04-29T04:28:36.320
> 
> 标签：python, matplotlib, bar-chart

```
import matplotlib.pyplot as plt

gridnumber = range(1,4)

b1 = plt.bar(gridnumber, [0.2, 0.3, 0.1], width=0.4,
                label="Bar 1", align="center")

b2 = plt.bar(gridnumber, [0.3, 0.2, 0.2], color="red", width=0.4,
                label="Bar 2", align="center")

plt.ylim([0,0.5])
plt.xlim([0,4])
plt.xticks(gridnumber)
plt.legend()
plt.show() 
```

目前 b1 和 b2 相互重叠。我如何像这样分别绘制它们：

![在此处输入图像描述](../Images/b14c67e0f56ebd5fbe932b8fd6ce37c4.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-29T05:32:21.733

matplotlib 站点中有一个[示例](http://matplotlib.sourceforge.net/examples/api/barchart_demo.html)。基本上，您只需将`x`值移动`width`. 这是相关的位：

```
import numpy as np
import matplotlib.pyplot as plt

N = 5
menMeans = (20, 35, 30, 35, 27)
menStd =   (2, 3, 4, 1, 2)

ind = np.arange(N)  # the x locations for the groups
width = 0.35       # the width of the bars

fig = plt.figure()
ax = fig.add_subplot(111)
rects1 = ax.bar(ind, menMeans, width, color='royalblue', yerr=menStd)

womenMeans = (25, 32, 34, 20, 25)
womenStd =   (3, 5, 2, 3, 3)
rects2 = ax.bar(ind+width, womenMeans, width, color='seagreen', yerr=womenStd)

# add some
ax.set_ylabel('Scores')
ax.set_title('Scores by group and gender')
ax.set_xticks(ind + width / 2)
ax.set_xticklabels( ('G1', 'G2', 'G3', 'G4', 'G5') )

ax.legend( (rects1[0], rects2[0]), ('Men', 'Women') )

plt.show() 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2019-12-20T07:00:21.457

下面的答案将以最简单的方式解释每一行代码：

```
# Numbers of pairs of bars you want
N = 3

# Data on X-axis

# Specify the values of blue bars (height)
blue_bar = (23, 25, 17)
# Specify the values of orange bars (height)
orange_bar = (19, 18, 14)

# Position of bars on x-axis
ind = np.arange(N)

# Figure size
plt.figure(figsize=(10,5))

# Width of a bar 
width = 0.3       

# Plotting
plt.bar(ind, blue_bar , width, label='Blue bar label')
plt.bar(ind + width, orange_bar, width, label='Orange bar label')

plt.xlabel('Here goes x-axis label')
plt.ylabel('Here goes y-axis label')
plt.title('Here goes title of the plot')

# xticks()
# First argument - A list of positions at which ticks should be placed
# Second argument -  A list of labels to place at the given locations
plt.xticks(ind + width / 2, ('Xtick1', 'Xtick3', 'Xtick3'))

# Finding the best position for legends and putting it
plt.legend(loc='best')
plt.show() 
```

[![在此处输入图像描述](../Images/54b2a1f648d67404606da7601658ecac.png)](https://i.stack.imgur.com/CupR5.png)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2016-11-15T09:38:49.670

有时可能很难找到合适的条形宽度。我通常使用这个[np.diff](https://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.diff.html)来找到正确的维度。

```
import numpy as np
import matplotlib.pyplot as plt

#The data
womenMeans = (25, 32, 34, 20, 25)
menMeans = (20, 35, 30, 35, 27)
indices = [5.5,6,7,8.5,8.9]
#Calculate optimal width
width = np.min(np.diff(indices))/3

fig = plt.figure()
ax = fig.add_subplot(111)
# matplotlib 3.0 you have to use align
ax.bar(indices-width,womenMeans,width,color='b',label='-Ymin',align='edge')
ax.bar(indices,menMeans,width,color='r',label='Ymax',align='edge')

ax.set_xlabel('Test histogram')
plt.show()
# matplotlib 2.0 (you could avoid using align)
# ax.bar(indices-width,womenMeans,width,color='b',label='-Ymin')
# ax.bar(indices,menMeans,width,color='r',label='Ymax') 
```

这是结果：

[![在此处输入图像描述](../Images/052a6cb5b00f889eeb0e9a89871a0eca.png)](https://i.stack.imgur.com/D5WrQ.png)

# 如果我在 x 轴上的索引是名义值（如名称）怎么办：

```
#
import numpy as np
import matplotlib.pyplot as plt

# The data
womenMeans = (25, 32, 34, 20, 25)
menMeans = (20, 35, 30, 35, 27)
indices = range(len(womenMeans))
names = ['Asian','European','North Amercian','African','Austrailian','Martian']
# Calculate optimal width
width = np.min(np.diff(indices))/3.

fig = plt.figure()
ax = fig.add_subplot(111)
ax.bar(indices-width/2.,womenMeans,width,color='b',label='-Ymin')
ax.bar(indices+width/2.,menMeans,width,color='r',label='Ymax')
#tiks = ax.get_xticks().tolist()
ax.axes.set_xticklabels(names)
ax.set_xlabel('Test histogram')
plt.show() 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2020-07-10T22:07:10.430

以下是在组中有两个以上“类别”时创建并排条形图的两个示例。

## 手动方法

手动设置每个条的位置和宽度。

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib import ticker

coins = ['penny', 'nickle', 'dime', 'quarter']
worth = np.array([.01, .05, .10, .25])

# Coin values times *n* coins
#    This controls how many bars we get in each group
values = [worth*i for i in range(1,6)]

n = len(values)                # Number of bars to plot
w = .15                        # With of each column
x = np.arange(0, len(coins))   # Center position of group on x axis

for i, value in enumerate(values):
    position = x + (w*(1-n)/2) + i*w
    plt.bar(position, value, width=w, label=f'{i+1}x')

plt.xticks(x, coins);

plt.ylabel('Monetary Value')
plt.gca().yaxis.set_major_formatter(ticker.FormatStrFormatter('$%.2f'))

plt.legend() 
```

[![在此处输入图像描述](../Images/41a5bb8acbef1cdcb21e67a97db4a906.png)](https://i.stack.imgur.com/PdODq.png)

* * *

## 熊猫方法

如果您将数据放入 pandas DataFrame 中，pandas 将为您完成困难的工作。

```
import pandas as pd
coins = ['penny', 'nickle', 'dime', 'quarter']
worth = [0.01, 0.05, 0.10, 0.25]
df = pd.DataFrame(worth, columns=['1x'], index=coins)
df['2x'] = df['1x'] * 2 
df['3x'] = df['1x'] * 3 
df['4x'] = df['1x'] * 4 
df['5x'] = df['1x'] * 5 
```

[![在此处输入图像描述](../Images/d1fc6829a5ae5a41312038640b4a6e09.png)](https://i.stack.imgur.com/YrAfb.png)

```
from matplotlib import ticker
import matplotlib.pyplot as plt

df.plot(kind='bar')

plt.ylabel('Monetary Value')
plt.gca().yaxis.set_major_formatter(ticker.FormatStrFormatter('$%.2f'))
plt.gca().xaxis.set_tick_params(rotation=0) 
```

熊猫创造了一个类似的人物......

[![在此处输入图像描述](../Images/954a587c542be4b79d1f651ef1beeb41.png)](https://i.stack.imgur.com/zvpjG.png)

# wordpress - .htaccess 上的 301 重定向不适用于 Wordpress

> ID：10369686
> 
> 赞同：2
> 
> 时间：2012-04-29T04:29:05.197
> 
> 标签：wordpress, .htaccess, mod-rewrite

我已经低于 301 重定向底部的一个我想让它工作，但它目前不工作。

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
Options +FollowSymLinks
Options +Indexes
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress
RewriteCond %{HTTP_HOST} ^domain.com.au$
RewriteRule ^/?$ "http\:\/\/www\.domain\.com\.au\/" [R=301,L]
RewriteRule ^author/privacy?$ privacy [R=301,L] 
```

有什么原因吗？

我想将作者/隐私重定向到隐私...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T16:19:01.273

规则的顺序在这里是有问题的。这是固定版本：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>

Options +FollowSymLinks +Indexes
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^domain\.com\.au$ [NC]
RewriteRule ^$ http://www.domain.com.au/ [R=301,L]

RewriteRule ^author/(privacy)/?$ /$1 [R=301,L,NC]

RewriteRule ^index\.php$ - [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]

</IfModule>
# END WordPress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T15:09:25.217

刚刚遇到同样的问题，但这就是答案.....使用相对 URL 不完整的 http:// 等。剪切下面的代码并添加到您的 .htaccess 文件并添加到您的根目录

```
Redirect 301 /page1.php /page2.html
Redirect 301 /page3.php /page4.html

 <IfModule mod_rewrite.c>
 RewriteEngine On
 RewriteBase /
 RewriteRule ^index\.php$ - [L]
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule . /index.php [L]
 </IfModule> 
```

# java - 将 META-INF/services/java.sql.Driver 放在 Web 应用程序的哪个位置

> ID：10369695
> 
> 赞同：2
> 
> 时间：2012-04-29T04:30:42.390
> 
> 标签：java, web-applications, jpa, jdbc

[javadoc](http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html)说“要加载 my.sql.Driver 类，META-INF/services/java.sql.Driver 文件将包含条目：my.sql.Driver”。

webapps 通常没有 META-INF 文件夹作为 WEB-INF 的兄弟吗？但是，JPA 规范正在 WEB-INF/classes/META-INF/ 中寻找 persistence.xml。

哪个地方适合 services/java.sql.Driver？

顺便说一句，我在这两个地方都遇到了[“没有合适的驱动程序”](https://stackoverflow.com/questions/1911253/the-infamous-no-suitable-driver-exception-for-tomcat-5-5-postgres-and-jdbc)异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T04:42:12.107

您不应该自己提供。JDBC 驱动程序 JAR 文件应该已经包含它。至少，如果它是符合 JDBC 4.0 的驱动程序的话。[这在javadoc 中`DriverManager`](http://docs.oracle.com/javase/6/docs/api/java/sql/DriverManager.html)也明确提到：

> 这些`DriverManager`方法`getConnection`得到`getDrivers`了增强，以支持 Java 标准版[服务提供者](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html#Service%20Provider)机制。**JDBC 4.0 驱动程序**必须包含该文件`META-INF/services/java.sql.Driver`。此文件包含 JDBC 驱动程序实现的名称`java.sql.Driver`。例如，要加载`my.sql.Driver`类，`META-INF/services/java.sql.Driver`文件将包含以下条目：
> 
> ```
> my.sql.Driver 
> ```
> 
> 应用程序不再需要使用`Class.forName()`. 当前加载 JDBC 驱动程序使用的现有程序`Class.forName()`将继续工作而无需修改。

如果您没有，那么它显然不是符合 JDBC 4.0 的驱动程序。您需要自己显式加载驱动程序，或者升级到符合 JDBC 4.0 的驱动程序，或者只使用托管容器`DataSource`（这也提供了更多优势，例如连接池）。

# git - 合并冲突 Git

> ID：10369701
> 
> 赞同：6
> 
> 时间：2012-04-29T04:31:50.737
> 
> 标签：git, egit

我和我的朋友从主存储库（上游）分叉。昨晚，我们在本地机器上有了相同版本的这个存储库。然后我添加了一个新功能，我的朋友也添加了另一个新功能。我的朋友将请求拉到主存储库，我已将此拉取请求与上游存储库合并，没有冲突。当我从上游获取并与我的主分支合并时，它会发生冲突。在这种情况下我应该怎么做才能解决冲突？（解决冲突后上游仓库应该有 2 个新特性）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T11:29:16.483

请注意，您也可以直接从 Eclipse/Egit 本身解决合并冲突：
请参阅“ [Egit：解决合并冲突](http://www.vogella.com/articles/EGit/article.html#team_mergeconflicts)”：

> 您可以手动编辑左侧的文本或使用从右到左复制当前更改按钮从右到左复制冲突的更改。
> 
> 下一步是从文件的上下文菜单中选择 Team -> Add to index。比提交。

![在 EGit 中合并冲突解决](../Images/952d1f52d88fb09d20d2210d4c6db9ae.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T06:49:57.250

只需浏览标记为冲突的文件`git status`并找到冲突标记（您可以`====`在文件中搜索）。协调它们之间的更改，确定代码组合是否破坏了其他意外情况，运行测试，然后像往常一样使用`git add`and`git commit`进行提交，将您朋友的新功能与您的新功能合并。

```
Upstream: original                 with friend's feature            with both
               \  \               /                \               /
                \  -- Friend's --/                  \             /
                 \                                   \           /
                  ---- Yours ------------------------- your merge 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T20:07:13.377

您可以`git difftool path/filename`在控制台中键入以使用解决冲突的工具或使用内置冲突解决的 Git 软件。我非常喜欢 SmartGit（来自 SmartSVN 的制造商）和 TortoiseGit（非常类似于 TortoiseSVN）。

# android - Android：使用来自 Web 服务的坐标不断更新地图

> ID：10369702
> 
> 赞同：0
> 
> 时间：2012-04-29T04:32:05.177
> 
> 标签：android, android-service

您好，我正在编写一个使用来自网络服务器的坐标的应用程序。我知道如何从网络服务中检索坐标，但是一旦我得到它们，我怎么能不断地在地图上显示它们。有点像位置监听器在位置管理器的位置更改时更新地图上的点。我想不断更新我从网络服务收到的积分。这是通过服务完成的吗？如果有怎么办？

```
 public class GeoUpdateHandler implements LocationListener {  

        @Override  
        public void onLocationChanged(Location location) {  
            ...
                GeoPoint point = new GeoPoint(lat, lng);  
            createMarker();  
            mapController.animateTo(point); // mapController.setCenter(point);  
        } 
```

更新： Createmarker 的代码

```
private void createMarker() {  
        GeoPoint p = mapView.getMapCenter();  
        OverlayItem overlayitem = new OverlayItem(p, "", "");  
        itemizedoverlay.addOverlay(overlayitem);  
        mapView.getOverlays().add(itemizedoverlay);  
    } 
```

更新：从 web 服务获取坐标的代码...

```
HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(".../android/serverFile.php");
        JSONObject json = new JSONObject();
        try {
            JSONArray postjson=new JSONArray();
            postjson.put(json);
            // Execute HTTP Post Request
            System.out.print(json);
            HttpResponse response = httpclient.execute(httppost);
            // for JSON:
            if(response != null)
            {
                InputStream is = response.getEntity().getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                StringBuilder sb = new StringBuilder();
                String line = null;
                try {
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                } finally {
                    try {
                        is.close();
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                }
                String jsonStr = sb.toString();
                JSONObject jsonObj = new JSONObject(jsonStr);
                String longitudecord = jsonObj.getString("lon");
                String latitudecord = jsonObj.getString("lat"); 
```

}

用定时器更新：

```
public void startService(){
    timer.scheduleAtFixedRate(new TimerTask(){
        @Override
        public void run() {
                 //Call the method that contacts the server and  
                 //adds the coordinates to a list. Get those values from the list.  
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("http://www.kre8tiveinspired.com/android/serverFile.php");
            JSONObject json = new JSONObject();

            try {
                // JSON data:
                JSONArray postjson=new JSONArray();
                postjson.put(json);
                // Execute HTTP Post Request
                System.out.print(json);
                HttpResponse response = httpclient.execute(httppost);
                // for JSON:
                if(response != null)
                {
                    InputStream is = response.getEntity().getContent();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
                    StringBuilder sb = new StringBuilder();
                    String line = null;
                    try {
                        while ((line = reader.readLine()) != null) {
                            sb.append(line + "\n");
                        }
                    } catch (IOException e) {
                        e.printStackTrace();
                    } finally {
                        try {
                            is.close();
                        } catch (IOException e) {
                            e.printStackTrace();
                        }
                    }
                    String jsonStr = sb.toString();
                    JSONObject jsonObj = new JSONObject(jsonStr);
                    // grabbing the menu object 
                    String longitudecord = jsonObj.getString("lon");
                    String latitudecord = jsonObj.getString("lat");
                    latcord = latitudecord;
                    loncord = longitudecord;
                }

            }catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                 Handler handler = new Handler();
                 handler.post(new Runnable(){  
                       public void run(){

                        double aDouble = Double.parseDouble(loncord);
                    double bDouble = Double.parseDouble(latcord);

                    int lat = (int) (aDouble * 1E6);  
                        int lng = (int) (bDouble * 1E6);  
                        GeoPoint point = new GeoPoint(lat, lng);  
                        createMarker();  
                        mapController.animateTo(point); // mapController.setCenter(point);
                            //add the overlays to the map
                            // and call invalidate for the mapview.
                             mapView.invalidate();

                       }
                 });
            }

    }, 0, 1000); // Here im calling the timer every 10 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:12:47.213

那么你可以做的是使用 a`timer`来填充地图。基本上，您可以使用一种方法来联系服务器，获取坐标并将它们添加到数组列表中。现在可以从计时器内部调用此方法（可以每隔几秒运行一次，具体取决于您的需要）。此外，在这个计时器类中，您可以重新填充地图。为此的一些代码：

```
timer=new Timer();  // Refresh map via timer task.
    timer.scheduleAtFixedRate(new TimerTask(){
        @Override
        public void run() {
                 //Call the method that contacts the server and  
                 //adds the coordinates to a list. Get those values from the list.  
                 Handler handler = new Handler();
                 handler.post(new Runnable(){  
                       public void run(){
                            //add the overlays to the map
                            // and call invalidate for the mapview.
                       }
                 });
            }

    }, 0, 10000); // Here im calling the timer every 10 seconds 
```

如果您想查看使用此想法的示例项目，请前往[此处](https://github.com/Alok-Sharma/BargeTracker/blob/master/src/com/social/FullMap.java)，并查看内部的计时器`onResume()`。它使用另一个名为`FetchParse`的类来联系服务器并获取更新的坐标列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:01:52.547

```
GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
Drawable srcdrawable = getApplicationContext().getResources().getDrawable(R.drawable.pin_blue);
CustomItemizedOverlay srcitemizedOverlay = new CustomItemizedOverlay(srcdrawable, getApplicationContext());
OverlayItem srcoverlayitem = new OverlayItem(p, "Hello!", "This is your Location.");
srcitemizedOverlay.addOverlay(srcoverlayitem);
mapView.getOverlays().clear();
mapView.getOverlays().add(srcitemizedOverlay); 
```

在创建标记中尝试此代码

# c# - 如何根据鼠标的移动绘制一个矩形？

> ID：10369704
> 
> 赞同：0
> 
> 时间：2012-04-29T04:33:01.453
> 
> 标签：c#, winforms, drawing, mouseevent

我在这里找到了用于在表单上绘图的示例代码：

[http://msdn.microsoft.com/en-us/library/aa287522(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa287522(v=vs.71).aspx)

作为此要求的后续措施（发现哪些控件位于用户拖动鼠标描述的矩形下方）：

[我的控件位置与 MouseDown 和 -Up 事件的位置之间似乎不匹配](https://stackoverflow.com/questions/10342291/there-seems-to-be-a-mismatch-between-the-location-of-my-controls-and-the-locatio)

...我想向用户提供关于他们将要选择的内容的即时/持续反馈（何时/如果他们释放鼠标按钮）。我不仅想在鼠标移动之后画一条线，还想画出他们的鼠标争吵所描述的矩形。

我在想 MouseMove 事件，再加上上面两个链接中的代码，可以解决问题，但是触发太频繁/会对性能产生恶意影响吗？如果是这样，什么是更可取的挂钩事件，或者计时器会是去这里的方式吗？

## 更新

这段代码改编自下面 John 的示例（唯一的区别是 StackOverflow 引发的对 base.* 的调用被注释掉了，我将颜色从红色更改为黑色（不打算参考 Stendahl）），*除了*之前绘制的矩形松开鼠标后再次显示。IOW，第一个矩形绘制完美 - 它随着鼠标向上单击而消失（如预期的那样）。但是，当我通过按下鼠标左键并向下和向右拖动来描述第二个矩形时，第*一个*矩形再次显示！并且这种情况继续发生 -*每个*先前绘制的矩形都会被记住并在绘制新矩形时重新出现。

公共部分类Form1：表格{私人点？_开始; 私人矩形_previousBounds；

```
public Form1()
{
    InitializeComponent();
}

private void Form1_MouseDown(object sender, MouseEventArgs e)
{
    _start = e.Location;
    //base.OnMouseDown(e); 

}

private void Form1_MouseMove(object sender, MouseEventArgs e)
{
    if (_start.HasValue)
        DrawFrame(e.Location);

    //base.OnMouseMove(e); 

}

private void Form1_MouseUp(object sender, MouseEventArgs e)
{
    ReverseFrame();
    _start = null;
    //base.OnMouseUp(e); 
}

private void ReverseFrame() 
{ 
    ControlPaint.DrawReversibleFrame(_previousBounds, Color.Black, FrameStyle.Dashed); 
} 

private void DrawFrame(Point end) 
{ 
    ReverseFrame(); 

    var size = new Size(end.X - _start.Value.X, end.Y - _start.Value.Y); 
    _previousBounds = new Rectangle(_start.Value, size); 
    _previousBounds = this.RectangleToScreen(_previousBounds); 
    ControlPaint.DrawReversibleFrame(_previousBounds, Color.Black, FrameStyle.Dashed); 
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:46:03.227

`ControlPaint.DrawReversibleFrame()`会做你想做的。性能通常不是问题 - 只需保持小而干净。

-- 编辑：添加了一个代码示例。StackOverflowException 表示有问题 - 但没有看到你的，无法直接回答。

```
private Point? _start;
private Rectangle _previousBounds;

protected override void OnMouseDown(MouseEventArgs e)
{
    _start = e.Location;
    base.OnMouseDown(e);
}

protected override void OnMouseMove(MouseEventArgs e)
{
    if( _start.HasValue ) {
        ReverseFrame();
        DrawFrame(e.Location);
    }

    base.OnMouseMove(e);
}

protected override void OnMouseUp(MouseEventArgs e)
{
    ReverseFrame();
    _start = null;
    base.OnMouseUp(e);
}

private void ReverseFrame()
{
    ControlPaint.DrawReversibleFrame(_previousBounds, Color.Red, FrameStyle.Dashed);

}
private void DrawFrame(Point end)
{
    ReverseFrame();

    var size = new Size(end.X - _start.Value.X, end.Y - _start.Value.Y);
    _previousBounds = new Rectangle(_start.Value, size);
    _previousBounds = this.RectangleToScreen(_previousBounds);
    ControlPaint.DrawReversibleFrame(_previousBounds, Color.Red, FrameStyle.Dashed);
} 
```

# java - 为什么要避免在 Java 中大量使用 ByteStream

> ID：10369708
> 
> 赞同：3
> 
> 时间：2012-04-29T04:34:51.217
> 
> 标签：java, io, stream

我们不应该像 Sun Doc 所说的那样使用字节流 -

> 实际上它代表了一种你应该避免的低级 I/O。

什么是真正的低级 I/O，什么是使用字节流的确切问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T04:48:11.110

所以[Java文档](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)说：

> CopyBytes 看起来像一个普通程序，但它实际上代表了一种您应该避免的低级 I/O。由于 xanadu.txt 包含字符数据，因此最好的方法是使用字符流，如下一节所述。还有更复杂的数据类型的流。字节流应该只用于最原始的 I/O。

字节流使您可以按原样访问文件。只是字节。没有任何形式的解释。这意味着不进行字符集转换，不处理二进制或 ascii 表示的整数或浮点数，不处理字节顺序，或任何其他。更高级别的流提供了其中的一些。

当然，复制文件的程序实际上是需要原始字节流的一个很好的例子，因为它不需要或不想对数据进行任何类型的解释；它只是想逐字复制它。

所以真正的意思是，如果您认为需要字节流，请使用它们，但请确保您知道自己在做什么 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T04:45:50.597

该建议是在阅读本教程中讨论的文本文件的背景下进行的。为此，最好使用字符流来正确处理字符集转换：

> Java 平台使用 Unicode 约定存储字符值。字符流 I/O 自动将此内部格式与本地字符集进行转换。
> 
> 使用字符流代替字节流的程序会自动适应本地字符集并为国际化做好准备——这一切都不需要程序员额外的努力。

# haskell - 将包上传到hackages时没有生成黑线鳕

> ID：10369710
> 
> 赞同：3
> 
> 时间：2012-04-29T04:34:52.243
> 
> 标签：haskell, cabal, hackage

在我将我的包上传到 hackages 后，它并没有像其他包那样生成黑线鳕。

我错过了什么？

**我所做的是：**

1.  `cabal dist`以及在 dist 目录下生成的包。
2.  打开[hackage web上传](http://hackage.haskell.org/packages/upload.html)界面，上传包。
3.  打开[网址](http://hackage.haskell.org/package/hoauth2)，发现包上传成功，但没有黑线鳕。（该软件包确实有一些文档）

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T04:39:00.623

生成文档需要一点时间。我相信他们在格林威治标准时间午夜运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:42:59.293

除了 Thomas 的回答之外，`cabal haddock`在您的包目录中运行并查找任何错误。

根据我的经验，黑线鳕非常挑剔，尤其是 wrt。代码块。如果您遇到解析错误，请开始删除评论，直到可以生成文档。我通常使用一些广泛记录的包作为参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T23:29:19.830

看起来文档丢失了，因为您的包没有正确构建。[我在构建日志](http://hackage.haskell.org/packages/archive/hoauth2/0.1.2/logs/failure/ghc-7.4)的末尾发现了这个：

```
src/Network/OAuth2/HTTP/HttpClient.hs:18:8:
    Could not find module `Control.Monad.Trans.Resource'
    It is a member of the hidden package `resourcet-0.3.2.1'.
    Perhaps you need to add `resourcet' to the build-depends in your .cabal file.
    Use -v to see a list of the files searched for. 
```

为避免此类问题，请确保在上传之前*使用 Cabal在本地构建您的包。*直接使用 GHC 构建通常会掩盖这些问题，因为它会愉快地使用您安装的任何软件包，无论您是否在`.cabal`文件中提到它们。

# c# - 如何确定 InputBox 的高度？

> ID：10369713
> 
> 赞同：1
> 
> 时间：2012-04-29T04:35:09.127
> 
> 标签：c#, winforms, inputbox

我正在使用 VB .dll 中的 InputBox。当我显示它时，我想将它放在相对于它会产生影响的控件的特定位置（不碍事）。所以我有这个用于显示 InputBox 的伪代码（“selectionStart”是在 MouseDown 上分配的一个点）：

```
int HeightOfInputBox = ? <- What is this value?
int XPos = selectionStart.X;
int YPos = selectionStart.Y - HeightOfInputBox; 
Interaction.InputBox("Prompt", "Title", "DefaultResponse", XPos, YPos); 
```

我的问题是：InputBox 的高度是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:01:18.583

您无权访问该对象以获取`Height`或`Width`信息。唯一可用的属性是您在初始化时设置的属性。如果你需要，`Height`你需要自己动手。这篇 CodeProject[文章](http://www.codeproject.com/Articles/10181/InputBox-in-C)是一个示例，您可以添加另一个初始化器来设置 InputBox 的宽度和高度。

IE `InputBox("Prompt", "Title", "DefaultResponse", XPos, YPos, Width, Height);`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T05:05:15.383

您可以将 Me.ActiveControl 用于当前控件

# php - 恢复中断的脚本

> ID：10369714
> 
> 赞同：1
> 
> 时间：2012-04-29T04:35:53.223
> 
> 标签：php, file, fgets

再会！

我有一个读取一个非常大的`XML`文件的 PHP 脚本。我曾经`fgets`逐行阅读。在某些时候，我们需要停止上述脚本以检查某些数据完整性。我的问题是如何恢复该运行状态（我的意思是脚本停止的行）。我们不想重新开始脚本，因为它需要几天才能完成。

有没有这样的方法可以做到这一点？任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T04:39:31.607

[多文档](http://php.net/manual/en/class.domdocument.php)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:49:10.047

还有 PHP 的 SimpleXML 库，在您的应用程序中使用它之前需要安装它，但是在您使用它的任何功能之前，它会将所有 XML 文档加载到它的缓存中。

还有 XMLReader 库，它用于读取 XML 文件而无需将所有文件加载到缓存中，是这种情况下使用的更好方法。

在这里您可以找到有关这两个库的信息：

[http://us.php.net/manual/en/book.xmlreader.php](http://us.php.net/manual/en/book.xmlreader.php)

[http://us.php.net/manual/en/book.simplexml.php](http://us.php.net/manual/en/book.simplexml.php)

以及使用它们的示例：

[http://us.php.net/manual/en/simplexml.examples-basic.php](http://us.php.net/manual/en/simplexml.examples-basic.php)

这里有更详细的解释：

[如何在 PHP 中使用 XMLReader？](https://stackoverflow.com/questions/1835177/how-to-use-xmlreader-in-php)

# java - 我正在将字符串写入文本文件。但 null 正在打印

> ID：10369715
> 
> 赞同：2
> 
> 时间：2012-04-29T04:36:12.713
> 
> 标签：java, string, file, null

我已经声明并初始化了一个 String temp = null;

通过程序我改变了 temp 的值

temp = temp + 文件夹 [i] + 换行符；

然后将此字符串临时写入文本文件。

现在的问题是，每次我将它写入文件时，也会打印出“NULL”这个词。

请建议我解决方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T04:37:53.150

将 temp 初始化为 "" 而不是 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T04:38:56.317

```
temp = temp + folders[i] + newline; 
```

是

```
temp = null + folders[i] + newline; 
```

所以它会在文件中打印 null 使用 "" 代替

# php - 访问 iCloud 文件的 URL

> ID：10369718
> 
> 赞同：1
> 
> 时间：2012-04-29T04:38:04.743
> 
> 标签：php, objective-c, macos, icloud

我对 Apple 打算如何将 iCloud 用于网络应用程序感到非常困惑。他们表示将支持 Web 应用程序，但似乎没有 API 可以从 Mac 或 iOS 应用程序以外的任何设备访问 iCloud 文件。

我要做的是从基于 php 的应用程序访问 .md iA Writer 文件。我已经搜索和搜索，但似乎没有简单的方法可以访问给定应用上传的文件。

有什么很明显的我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:16:17.347

还没有 Web API。如果您的 PHP 脚本可以在没有开发人员的文件类型文档的情况下访问由其他应用程序编写的文件，那么您一定会创建不兼容的更改。（我知道 Markdown 是一种开放格式，但我说的更笼统。）能够查看和编辑其他应用程序数据的应用程序可能会导致用户体验问题或可能的安全问题。

# c# - 无法绑定零引用的运行时

> ID：10369720
> 
> 赞同：0
> 
> 时间：2012-04-29T04:38:10.577
> 
> 标签：c#, asp.net-mvc

我自己得到的不是一个已知的错误，另一个动作中的这段代码通常可以工作

```
Unable to bind the runtime of the zero reference
  Description: An unhandled exception occurred during the execution of the current web request. Examine the stack trace for more information about this error and where it originated in the code.

  Exception Details: Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: Unable to bind the runtime of the zero reference

Source Error:

Line 169:@for (int i = 1; i < 10; i++)
Line 170:{
Line 171:    <span>@Ajax.ActionLink((i * 5).ToString(), "Start", new { cost = (i * 5), gameId = Model.IdGame }, AjaxStart)</span> 
Line 172:}
Line 173: 
```

> [RuntimeBinderException：Неудаетсявыполнитьпривязкиисполняющейсредыпонулевой ссылке ] CallSite.Target（封闭，调用点，对象）66
> System.Dynamic.UpdateDelegates.UpdateAndExecute1（调用点站点，T0为arg0）438 ASP._Page_Views_Kamikaze2_TestGamePlay_cshtml.Execute（c）中:\Users\User\Documents\Visual Studio 2010\Projects\Igrok56\Web\Views\Kamikaze2\TestGamePlay.cshtml:171
> System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +272
> System.Web.Mvc.WebViewPage.ExecutePageHierarchy( ) +67
> System.Web.WebPages.StartPage.RunPage() +58
> System.Web.WebPages.StartPage.ExecutePageHierarchy() +94
> System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) +172
> System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) +574
> System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) +360
> System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext上下文) +409 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) +39
> System.Web.Mvc.<>c_ *DisplayClass1c.b* _19() +60 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter过滤器，ResultExecutingContext preContext，Func 1 继续）+391 System.Web.Mvc.<> *c_DisplayClass1e.b*`1 continuation) +391
> System.Web.Mvc.<>c__DisplayClass1e.<InvokeActionResultWithFilters>b__1b() +61 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`
> *_1b() +61 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList 1.b__7(IAsyncResult *) +42 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +141 System.Web.Mvc。 Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +54* *System.Web.Mvc.Async.AsyncResultWrapper.End(IAsyncResult asyncResult, Object tag) +40* *System.Web.Mvc.<>c* _DisplayClasse.b_d *() + 61* *System.Web.Mvc.SecurityUtil.b* _0（动作 f）+31 System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust（动作动作）+56 System.Web.Mvc.MvcHandler.EndProcessRequest（IAsyncResult asyncResult）+110`1 filters, ActionResult actionResult) +285
> System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +830
> System.Web.Mvc.Controller.ExecuteCore() +136
> System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +232 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +39
> System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +68
> System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +44
> System.Web.Mvc.Async.<>c__DisplayClass8`
> System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult 结果) +38
> System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8967757 System.Web.HttpApplication.ExecuteStep(IExecutionStep 步骤, 布尔值和同步完成）+184*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:18:31.167

发生此错误是因为 Model 为空*

# java - 找到最小值但为零

> ID：10369724
> 
> 赞同：4
> 
> 时间：2012-04-29T04:39:16.537
> 
> 标签：java, arrays, double, min

如何在双精度数组中找到最小的正数（非零）？例如，如果数组包含`0.04`、`0.0001`和`0.0`，我想返回`0.0001`。

下面的函数很好，但它会返回零作为最小值，这不是我的兴趣。

```
static double[] absOfSub = new double[100];
...

private static double compare(double[] ds) {
  double min = absOfSub[0];

  for (double d : ds) {
    min = Math.min(min, d);
  }
  return min;
} 
```

我怎样才能让它忽略零？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T04:42:57.163

您可以检查零：

```
double min = Double.MAX_VALUE;
for (double d : ds) 
{
    min = (d == 0) ? min : Math.min(min, d);
} 
```

# javascript - 在选择列表中使用 javascript 获取属性值

> ID：10369727
> 
> 赞同：2
> 
> 时间：2012-04-29T04:39:44.533
> 
> 标签：javascript

> **可能重复：**
> [在选择列表中使用创建的属性和 javascript](https://stackoverflow.com/questions/10369241/use-created-attribute-with-javascript-in-select-list)

我试图访问我在选择列表中创建的属性。

```
<script language="JavaScript">
function updateUrl()
    {
        var newUrl = document.getElementById('test').getAttribute('car');
        alert(newUrl);
    }
</script>

<select name= "test" id= "test" onChange= "updateUrl()">
     <option value="1" selected="selected" car="red">1</option> 
     <option value="2" car="blue" >2</option> 
     <option value="3" car="white" >3</option> 
     <option value="4" car="black" >4</option>    
</select> 
```

它一直给我null。我如何从属性汽车中获取价值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T04:47:09.720

如果您的意思是从`car`所选选项的属性中获取值：

```
//get the option's car attribute at selectedIndex
var car = document.getElementById('test').options[select.selectedIndex].car; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T04:43:24.917

此属性不在选择中。这是第一个选项：

```
document.getElementById('test').options[0].getAttribute('car') 
```

# node.js - 在 NodeJS 中调整大小和上传图像流

> ID：10369730
> 
> 赞同：0
> 
> 时间：2012-04-29T04:40:25.113
> 
> 标签：node.js

全部，

我有一个尺寸数组，例如 size = [20,40,60,80]

我需要遍历这些，将 src 图像调整为每个大小并适当地命名它们。

然后，使用 knox 将它们上传到 s3，然后删除调整大小的图像。

这是我所拥有的：

[http://jsfiddle.net/bpoppa/ZAcA7/](http://jsfiddle.net/bpoppa/ZAcA7/)

问题是流量控制。当 knox 尝试 putFile 时，我收到一条错误消息，指出它不存在，这意味着 knox 要么在调整大小完成之前运行，要么在此时已被删除。

有小费吗？感谢所有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T05:10:22.900

您需要记住 node.js 代码是异步运行的。在您的原始代码中，`knox`代码在完成之前运行`image.resize`（回调用于告诉您操作何时完成，而不仅仅是处理错误）。Node 不会等待回调，而是继续执行函数中的代码。您还需要小心在 for 循环中使用匿名回调而不创建闭包。

通常，您希望使用回调来控制程序流程，如下面的代码，以便您仅在前面的操作完成时才执行以下操作。

```
var src = name + '.jpg';

for (var i = sizes.length - 1; i >= 0; i--) {
    var k = i;

    var dest = sizes[k] + '.jpg';
    var s3   = sizes[k] + '.jpg';
    resizeAndPut(src, dest, s3, sizes[k]);
}
fs.unlink(src);​  /* delete the source file now */

var resizeAndPut = function (src, dest, s3, size) {
    easyimage.resize(
    {
        src:    src,
        dst:    dest,
        width:  size,
        height: size
    }, function(err, image) {
            if (err) throw err;
            knox.putFile(dest, s3, function(err, res) {  /* does image contain the path?, if so, might want to use image.path or the like instead of dest here */
                if (err) throw err;
                fs.unlink(dest); /* delete the local file*/
            });

    });
}; 
```

# c# - ListView Drag&Drop，如何检查我是否将项目放在同一个列表视图中？

> ID：10369735
> 
> 赞同：1
> 
> 时间：2012-04-29T04:41:10.990
> 
> 标签：c#, winforms, listview, drag-and-drop

我有两个列表视图 [listView1，listLocal]，它们是本地 PC 和远程 PC 的两个文件资源管理器，
如果我将项目拖放到我从中拖动它们的同一个列表视图中，它应该复制/移动。否则，如果我将项目放入另一个列表视图，那么它应该发送/接收。

所以让 listLocal 是本地 PC 的文件资源管理器，而 listView1 是远程 PC。
所以我需要一个条件来检查我是否将拖动的项目放到另一个列表视图中。

```
private void listLocal_ItemDrag(object sender, ItemDragEventArgs e)
    {
        if (_currAddress == null) return;   //if the current address is My Computer
        _DraggedItems.Clear();
        foreach (ListViewItem item in listLocal.SelectedItems)
        {
            _DraggedItems.Add((ListViewItem)item.Clone());
        }
        // if ( some condition )   call the same listview **listLocal.DoDragDrop**
        listLocal.DoDragDrop(e.Item, DragDropEffects.All);
        // else                    call the other listview
        listView1.DoDragDrop(e.Item, DragDropEffects.All);
    } 
```

同样，当一个列表视图 DragDrop 被触发时，我需要检查拖动的项目是否来自同一个列表视图。

```
private void listView1_DragDrop(object sender, DragEventArgs e)
    {
        Point p = listView1.PointToClient(MousePosition);
        ListViewItem targetItem = listView1.GetItemAt(p.X, p.Y);
        // if ( some condition )     
        //here i need to check if the dragged item came from the same listview or not
        {
            if (targetItem == null)
            {
                PreSend(currAddress);          //send to the current address
            }
            else
            {
                PreSend(targetItem.ToolTipText);        //send to the target folder
            }
            return;
        }
        //otherwise

        if (targetItem == null) { return; }          //if dropped in the same folder return

        if ((e.Effect & DragDropEffects.Move) == DragDropEffects.Move)
        {
            Thread thMove = new Thread(unused => PasteFromMove(targetItem.ToolTipText, DraggedItems));
            thMove.Start();
        }
        else
        {
            Thread thCopy = new Thread(unused => PasteFromCopy(targetItem.ToolTipText, DraggedItems));
            thCopy.Start();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T11:19:05.477

您需要实现 DragEnter 事件以验证是否正在拖动正确的对象。您可以使用 ListViewItem.ListView 属性来验证它是否来自另一个 ListView。像这样：

```
 private void listView1_DragEnter(object sender, DragEventArgs e) {
        // It has to be a ListViewItem
        if (!e.Data.GetDataPresent(typeof(ListViewItem))) return;
        var item = (ListViewItem)e.Data.GetData(typeof(ListViewItem));
        // But not one from the same ListView
        if (item.ListView == listView1) return;
        // All's well, allow the drop
        e.Effect = DragDropEffects.Copy;
    } 
```

在 DragDrop 事件处理程序中不需要进一步检查。

# xslt - XSL - 基于元素属性的组

> ID：10369736
> 
> 赞同：2
> 
> 时间：2012-04-29T04:41:16.753
> 
> 标签：xslt, xslt-grouping

如何使用“insref”和“pref”对下面的元素进行分组我曾尝试在 xslt 版本 1 中使用生成密钥 ID。

## XML：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<catalog>
   <mylist>
    <cd id="1" insref="#10">
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
    <cd id ="2" insref="#20" pref="#1">
        <title>Hide your heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd id="3" insref="#520" pref="#1">
        <title>Lonly heart</title>
        <artist>Bonnie Tyler</artist>
        <country>UK</country>
        <company>CBS Records</company>
        <price>9.90</price>
        <year>1988</year>
    </cd>
    <cd id="4" insref="#56" pref="#1">
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
    <cd id="5" insref="#56" pref="#2">
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
    <cd id="6" insref="#56" pref="#2">
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
    <cd id="7" insref="#56" pref="#2">
        <title>Still got the blues</title>
        <artist>Gary Moore</artist>
        <country>UK</country>
        <company>Virgin records</company>
        <price>10.20</price>
        <year>1990</year>
    </cd>
    <cd id="8" insref="#78" pref="#2">
        <title>Maggie May</title>
        <artist>Rod Stewart</artist>
        <country>UK</country>
        <company>Pickwick</company>
        <price>8.50</price>
        <year>1990</year>
    </cd>
    <cd id="9" insref="#45" pref="#1">
        <title>Romanza</title>
        <artist>Andrea Bocelli</artist>
        <country>EU</country>
        <company>Polydor</company>
        <price>10.80</price>
        <year>1996</year>
    </cd>

    <cd id="10" insref="#45" pref="#2">
        <title>Romanza</title>
        <artist>Andrea Bocelli</artist>
        <country>EU</country>
        <company>Polydor</company>
        <price>10.80</price>
        <year>1996</year>
    </cd>
 </mylist>  
</catalog> 
```

* * *

期望的结果：

```
TITLE               ARTIST          ID  INSREF  PREF    Qty
Empire Burlesque    Bob Dylan       1   10      
Hide your heart     Bonnie Tyler    2   20      1       1   
Lonly heart         Bonnie Tyler    3   520     1       1       
Still got the blues Gary Moore      4   56      1       1   
Still got the blues Gary Moore      4   56      2       3   
Maggie May          Rod Stewart     8   78      2       1   
Romanza             Andrea Bocelli  9   45      1       1
Romanza             Andrea Bocelli  10  45      2       1 
```

* * *

这就是我所拥有的。我也在使用密钥生成功能。知道这个 xslt 有什么问题。至于计数，我正在考虑获得唯一键计数。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="by-accessRefs" match="cd" use="concat(@insref,@pref)"/>

<xsl:template match="/">
  <html>
  <body>
    <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
        <th>INSREF</th>
         <th>PREF</th>
      </tr>
      <xsl:for-each select="catalog/mylist/cd[generate-id(.) = generate-id(key('by-accessRefs',concat(@insref,@pref)[1])]">

         <tr>
        <td><xsl:value-of select="title"/></td>
        <td><xsl:value-of select="artist"/></td>
        <td><xsl:value-of select="@insref"/></td>
        <td><xsl:value-of select="@pref"/></td>
      </tr>
      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T14:33:21.447

**这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kCDByProps" match="cd" use=
  "concat(title,'+',artist,'+',@insref,'+',@pref)"/>

 <xsl:template match="/*">
     <table>
       <thead>
         <tr>
           <td>TITLE</td><td>ARTIST</td><td>ID</td><td>INSREF</td><td>PREF</td><td>Qty</td>
         </tr>
       </thead>
       <xsl:apply-templates select=
        "mylist/cd
            [generate-id()
            =
             generate-id(key('kCDByProps', 
                               concat(title,'+',artist,'+',@insref,'+',@pref)
                              )[1])
            ]
        "/>
     </table>
 </xsl:template>

 <xsl:template match="cd">
  <xsl:variable name="vGroup" select=
    "key('kCDByProps', concat(title,'+',artist,'+',@insref,'+',@pref))"/>

  <tr>
    <td><xsl:value-of select="title"/></td>
    <td><xsl:value-of select="artist"/></td>
    <td><xsl:value-of select="@id"/></td>
    <td><xsl:value-of select="substring(@insref, 2)"/></td>
    <td><xsl:value-of select="substring(@pref, 2)"/></td>
    <xsl:variable name="vCount" select=
           "count($vGroup[@pref = current()/@pref])"/>
    <td>
        <xsl:if test="$vCount"><xsl:value-of select="$vCount"/></xsl:if>
    </td>
  </tr>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<catalog>
    <mylist>
        <cd id="1" insref="#10">
            <title>Empire Burlesque</title>
            <artist>Bob Dylan</artist>
            <country>USA</country>
            <company>Columbia</company>
            <price>10.90</price>
            <year>1985</year>
        </cd>
        <cd id ="2" insref="#20" pref="#1">
            <title>Hide your heart</title>
            <artist>Bonnie Tyler</artist>
            <country>UK</country>
            <company>CBS Records</company>
            <price>9.90</price>
            <year>1988</year>
        </cd>
        <cd id="3" insref="#520" pref="#1">
            <title>Lonly heart</title>
            <artist>Bonnie Tyler</artist>
            <country>UK</country>
            <company>CBS Records</company>
            <price>9.90</price>
            <year>1988</year>
        </cd>
        <cd id="4" insref="#56" pref="#1">
            <title>Still got the blues</title>
            <artist>Gary Moore</artist>
            <country>UK</country>
            <company>Virgin records</company>
            <price>10.20</price>
            <year>1990</year>
        </cd>
        <cd id="5" insref="#56" pref="#2">
            <title>Still got the blues</title>
            <artist>Gary Moore</artist>
            <country>UK</country>
            <company>Virgin records</company>
            <price>10.20</price>
            <year>1990</year>
        </cd>
        <cd id="6" insref="#56" pref="#2">
            <title>Still got the blues</title>
            <artist>Gary Moore</artist>
            <country>UK</country>
            <company>Virgin records</company>
            <price>10.20</price>
            <year>1990</year>
        </cd>
        <cd id="7" insref="#56" pref="#2">
            <title>Still got the blues</title>
            <artist>Gary Moore</artist>
            <country>UK</country>
            <company>Virgin records</company>
            <price>10.20</price>
            <year>1990</year>
        </cd>
        <cd id="8" insref="#78" pref="#2">
            <title>Maggie May</title>
            <artist>Rod Stewart</artist>
            <country>UK</country>
            <company>Pickwick</company>
            <price>8.50</price>
            <year>1990</year>
        </cd>
        <cd id="9" insref="#45" pref="#1">
            <title>Romanza</title>
            <artist>Andrea Bocelli</artist>
            <country>EU</country>
            <company>Polydor</company>
            <price>10.80</price>
            <year>1996</year>
        </cd>
        <cd id="10" insref="#45" pref="#2">
            <title>Romanza</title>
            <artist>Andrea Bocelli</artist>
            <country>EU</country>
            <company>Polydor</company>
            <price>10.80</price>
            <year>1996</year>
        </cd>
    </mylist>
</catalog> 
```

**产生以下 HTML 输出：**

```
<table>
   <thead>
      <tr>
         <td>TITLE</td>
         <td>ARTIST</td>
         <td>ID</td>
         <td>INSREF</td>
         <td>PREF</td>
         <td>Qty</td>
      </tr>
   </thead>
   <tr>
      <td>Empire Burlesque</td>
      <td>Bob Dylan</td>
      <td>1</td>
      <td>10</td>
      <td/>
      <td/>
   </tr>
   <tr>
      <td>Hide your heart</td>
      <td>Bonnie Tyler</td>
      <td>2</td>
      <td>20</td>
      <td>1</td>
      <td>1</td>
   </tr>
   <tr>
      <td>Lonly heart</td>
      <td>Bonnie Tyler</td>
      <td>3</td>
      <td>520</td>
      <td>1</td>
      <td>1</td>
   </tr>
   <tr>
      <td>Still got the blues</td>
      <td>Gary Moore</td>
      <td>4</td>
      <td>56</td>
      <td>1</td>
      <td>1</td>
   </tr>
   <tr>
      <td>Still got the blues</td>
      <td>Gary Moore</td>
      <td>5</td>
      <td>56</td>
      <td>2</td>
      <td>3</td>
   </tr>
   <tr>
      <td>Maggie May</td>
      <td>Rod Stewart</td>
      <td>8</td>
      <td>78</td>
      <td>2</td>
      <td>1</td>
   </tr>
   <tr>
      <td>Romanza</td>
      <td>Andrea Bocelli</td>
      <td>9</td>
      <td>45</td>
      <td>1</td>
      <td>1</td>
   </tr>
   <tr>
      <td>Romanza</td>
      <td>Andrea Bocelli</td>
      <td>10</td>
      <td>45</td>
      <td>2</td>
      <td>1</td>
   </tr>
</table> 
```

**在浏览器中查看时似乎是想要的正确结果**：

![在此处输入图像描述](../Images/e279927abcb866c2c600e655fa14208c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:46:03.747

**我假设您需要的输出是一个 HTML 表：**

**样式表文件**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:xd="http://www.oxygenxml.com/ns/doc/xsl"
    exclude-result-prefixes="xs xd"
    version="2.0">

    <xsl:output method="html" indent="yes"/>

    <xsl:key name="kTitle" match="title" use="text()"/>

    <xsl:template match="/">
        <table>
            <thead>
                <tr>
                    <th>TITLE</th>
                    <th>ARTIST</th>
                    <th>ID</th>
                    <th>INSREF</th>
                    <th>PREF</th>
                    <th>Qty</th>
                </tr>
            </thead>
            <tbody>
                <xsl:for-each-group select="//cd" group-by="@id">
                    <tr>
                        <td><xsl:value-of select="title"/></td>
                        <td><xsl:value-of select="artist"/></td>
                        <td><xsl:value-of select="@id"/></td>
                        <td><xsl:value-of select="substring-after(@insref,'#')"/></td>
                        <td><xsl:value-of select="substring-after(@pref,'#')"/></td>
                        <td><xsl:value-of select="count(key('kTitle',title/text()))"/></td>
                    </tr>
                </xsl:for-each-group>
            </tbody>
        </table>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

**结果文件：**

```
<table>
   <thead>
      <tr>
         <th>TITLE</th>
         <th>ARTIST</th>
         <th>ID</th>
         <th>INSREF</th>
         <th>PREF</th>
         <th>Qty</th>
      </tr>
   </thead>
   <tbody>
      <tr>
         <td>Empire Burlesque</td>
         <td>Bob Dylan</td>
         <td>1</td>
         <td>10</td>
         <td></td>
         <td>1</td>
      </tr>
      <tr>
         <td>Hide your heart</td>
         <td>Bonnie Tyler</td>
         <td>2</td>
         <td>20</td>
         <td>1</td>
         <td>1</td>
      </tr>
      <tr>
         <td>Lonly heart</td>
         <td>Bonnie Tyler</td>
         <td>3</td>
         <td>520</td>
         <td>1</td>
         <td>1</td>
      </tr>
      <tr>
         <td>Still got the blues</td>
         <td>Gary Moore</td>
         <td>4</td>
         <td>56</td>
         <td>1</td>
         <td>4</td>
      </tr>
      <tr>
         <td>Still got the blues</td>
         <td>Gary Moore</td>
         <td>5</td>
         <td>56</td>
         <td>2</td>
         <td>4</td>
      </tr>
      <tr>
         <td>Still got the blues</td>
         <td>Gary Moore</td>
         <td>6</td>
         <td>56</td>
         <td>2</td>
         <td>4</td>
      </tr>
      <tr>
         <td>Still got the blues</td>
         <td>Gary Moore</td>
         <td>7</td>
         <td>56</td>
         <td>2</td>
         <td>4</td>
      </tr>
      <tr>
         <td>Maggie May</td>
         <td>Rod Stewart</td>
         <td>8</td>
         <td>78</td>
         <td>2</td>
         <td>1</td>
      </tr>
      <tr>
         <td>Romanza</td>
         <td>Andrea Bocelli</td>
         <td>9</td>
         <td>45</td>
         <td>1</td>
         <td>2</td>
      </tr>
      <tr>
         <td>Romanza</td>
         <td>Andrea Bocelli</td>
         <td>10</td>
         <td>45</td>
         <td>2</td>
         <td>2</td>
      </tr>
   </tbody>
</table> 
```

# c++ - 为什么在 g++ 中编译时会出现符号引用错误？

> ID：10369739
> 
> 赞同：5
> 
> 时间：2012-04-29T04:42:07.243
> 
> 标签：c++, g++

```
aludra.usc.edu(25): g++ -o final.out final.cpp
未定义的第一个引用
 文件中的符号
数据::Get_Networth() /var/tmp//ccUz9c59.o
数据::Set_Networth(double) /var/tmp//ccUz9c59.o
数据::Get_Heightfeet() /var/tmp//ccUz9c59.o
数据::Get_Lettergpa() /var/tmp//ccUz9c59.o
数据::Set_Weight(int) /var/tmp//ccUz9c59.o
数据::Get_Weight() /var/tmp//ccUz9c59.o
数据::Get_Major() /var/tmp//ccUz9c59.o
数据::Set_Gpa(double) /var/tmp//ccUz9c59.o
数据::Get_GPA() /var/tmp//ccUz9c59.o
数据::Set_Age(int) /var/tmp//ccUz9c59.o
数据::Get_Age() /var/tmp//ccUz9c59.o
data::Set_Major(std::basic_string, std::allocator >)/var/tmp//ccUz9c59.o
data::Set_Data(std::basic_string, std::allocator >, int, int, int, double, std::basic_string, std::allocator >, double)/var/tmp//ccUz9c59.o
数据::Get_Heightfeetremainder() /var/tmp//ccUz9c59.o
数据::Set_Heightinches(int) /var/tmp//ccUz9c59.o
数据::数据() /var/tmp//ccUz9c59.o
数据::Get_Name() /var/tmp//ccUz9c59.o
数据::Get_Heightinches() /var/tmp//ccUz9c59.o
ld：致命：符号引用错误。没有输出写入 final.out
collect2: ld 返回 1 个退出状态

```

这就是我在 Solaris 中编译时在 g++ 中不断得到的内容。该代码在 VS2010 中完美编译。所以我无法弄清楚出了什么问题。

这是我的类文件的代码data.h：

```
 #include <string>

using namespace std;
class data{
private:
string name;
int age;
int heightinches, heightfeet ,heightfeetremainder;
int weight;
double gpa;
char lettergpa;
string major;
double networth;

public:
//constructors
data();
//service functions
void Calc_heightfeet();
void Calc_lettergpa();
//Getter/Accessor functions
string Get_Name();
int Get_Age();
int Get_Heightinches();
int Get_Heightfeet();
int Get_Heightfeetremainder();
int Get_Weight();
double Get_GPA();
char Get_Lettergpa();
string Get_Major();
double Get_Networth();
//Setter/modifier functions
void Set_Data(string ,int , int ,int , double,string,double);
void Set_Age(int );
void Set_Heightinches(int );
void Set_Weight(int );
void Set_Major(string );
void Set_Gpa(double );
void Set_Networth(double );
}; 
```

数据.cpp：

```
#include "data.h"
using namespace std;

//constructors
data::data(){;}
//service functions
void data::Calc_heightfeet()
{
    heightfeet= heightinches/12;
    heightfeetremainder= heightinches%12;
}
void data::Calc_lettergpa()
{
    if (gpa > 3.5)
            lettergpa= 'A';
    else if (gpa > 2.5)
            lettergpa= 'B';
    else if (gpa > 1.5)
            lettergpa= 'C';
    else if (gpa > .5)
            lettergpa= 'D';
    else
            lettergpa= 'F';
}
//Getter/Accessor functions
string data::Get_Name()
{
    return name;
}
int data::Get_Age()
{
    return age;
}
int data::Get_Heightinches()
{
    return heightinches;
}
int data::Get_Heightfeet()
{
    return heightfeet;
}
int data::Get_Heightfeetremainder()
{
    return heightfeetremainder;
}
int data::Get_Weight()
{
    return weight;
}
double data::Get_GPA()
{
    return gpa;
}
char data::Get_Lettergpa()
{
    return lettergpa;
}
string data::Get_Major()
{
    return major;
}
double data::Get_Networth()
{
    return networth;
}

//Setter/modifier functions
void data::Set_Data(string n,int a, int h,int w, double g,string m,double net)
{
    name=n;
    age=a;
    heightinches=h;
    weight=w;
    major=m;
    networth=net;
    gpa=g;
    Calc_heightfeet();
    Calc_lettergpa();   
}
void data::Set_Age(int a)
{
    age=a;  
}
void data::Set_Heightinches(int h)
{
    heightinches=h; 
    Calc_heightfeet();
}
void data::Set_Weight(int w)
{
    weight=w;
}
void data::Set_Major(string m)
{
    major=m;
}
void data::Set_Gpa(double g)
{
    gpa=g;
    Calc_lettergpa();   
}
void data::Set_Networth(double net)
{
    networth=net;
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T04:53:08.943

您似乎没有在编译或链接`data.cpp`. 尝试

```
g++ -o final.out final.cpp data.cpp 
```

# android - 错误：在 Eclipse 中构建 Android 源代码

> ID：10369741
> 
> 赞同：7
> 
> 时间：2012-04-29T04:42:23.340
> 
> 标签：android, eclipse, eclipse-indigo, android-source

在尝试将 android 源添加到 eclipse 时，我收到以下错误。

```
Project 'android' is missing required library: 'out/target/common/obj/JAVA_LIBRARIES/gsf-client_intermediates/javalib.jar'
Project 'android' is missing required library: 'out/target/common/obj/JAVA_LIBRARIES/google-common_intermediates/javalib.jar' 
```

仅供参考，在将其添加到 Eclipse 之前，我已经使用 full_maguro-userdebug 配置（用于 Galaxy Nexus）成功构建了源代码。由于在 Eclipse Indigo 中找不到“从现有源创建项目”，我将项目的位置更改为源的根目录。我多次刷新项目并出现相同的错误。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T11:54:19.937

你应该去`Project -> Properties -> Java Build Path`。

有打开选项卡`Libraries`。

在此选项卡`out/target/common/obj/JAVA_LIBRARIES/google-common_intermediates/javalib.jar`中，应`out/target/common/obj/JAVA_LIBRARIES/android-common_intermediates/javalib.jar`通过从 google-common_intermediates 中选择 javalib.jar，按 Edit 并选择 android-common_intermediates 来更改此选项卡。

可以简单地删除带有 gsf-client_intermediates javalib.jar 的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T05:51:19.820

更全面的答案在这里：[https ://groups.google.com/forum/?fromgroups=#!topic/android-platform/XIbR8ZKe7Tw](https://groups.google.com/forum/?fromgroups=#!topic/android-platform/XIbR8ZKe7Tw)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-29T06:07:52.313

我不建议将 eclipse 用于 android 源代码。Android 不是一个单一的项目，对于像 eclipse 这样的 IDE 来说它太大了。

使用更简单的纯文本编辑器，如 vim、emacs 来浏览代码

# java - 如何使用 java 获取动态网页内容？

> ID：10369759
> 
> 赞同：-1
> 
> 时间：2012-04-29T04:46:32.693
> 
> 标签：java, fetch, weather

我已经用 java 编程了一段时间，但我什至没有找到真正接近这个目标的方法。我的谷歌搜索也没有结果。

我正在寻找一种方法来基本上下载当前天气（或其他，但我想天气是一个好的开始）并将这些数字的当前温度/湿度/露点/第二天预测保存到字符串数组中

我不知道从哪里开始，但我认为这将是开始学习如何使用 java 获取的好地方。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T05:03:52.403

您将如何用其他语言处理这项任务？

在天气的情况下，您可能会寻找一些由您试图从中获取天气的站点公开的 API。这里有一些线索： 1\. 如果您只想发出 HTTP 请求，获取结果（类似于 ajax 样式）并解析网页，您可以使用 java.net 包，或者如果您想要（更强大的）第三方lib，使用 Apache HTTP 客户端。2\. 如果您正在寻找通过 WebServices 公开的 API（我认为这是一种更好的方法），那么它们与语言无关，因此您只需像使用任何其他语言一样使用 Java 中的 Web 服务（SOAP/Rest）。

我知道，答案有点“常见”，所以请澄清“你打算如何”解决这个问题（即使是任何其他语言）......

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:42:12.317

气象信息的一个很好的来源是[METAR](http://en.wikipedia.org/wiki/METAR)。还有一个可用的 Java 库[jweather](http://sourceforge.net/projects/jweather/)，它应该将所有网络/协议/api 问题封装到一组有限的方法中，以检索所需的天气信息

# c++ - 私有构造函数实现

> ID：10369761
> 
> 赞同：1
> 
> 时间：2012-04-29T04:47:35.117
> 
> 标签：c++, constructor, private

在阅读 C++ Primer 第 4 版时，我被一个特定的代码片段弄糊涂了。有一个类定义如下：

```
// handle class to manage the Query_base inheritance hiearchy
class Query {
    // these operators need access to the Query_base* constructor
    friend Query operator~(const Query&);
    friend Query operator|(const Query&, const Query&);
    friend Query operator&(const Query&, const Query&);
public:
    Query(const std::string&);    // builds a new WordQuery
    // copy control to manage pointers and use counting 
    Query(const Query &c) : q(c.q), use(c.use) { ++*use; }
    ~Query() { decr_use(); }
    Query &operator=(const Query&);
    // interface functions: will call corresponding Query_base operations
    std::set<TextQuery::line_no>
      eval(const TextQuery &t) const {return q->eval(t); }
    std::ostream &display(std::ostream &os) const 
                            { return q->display(os); } 
private:
    Query(Query_base &query) : q(query),
                               use(new std::size_t(1)) { }
    Query_base *q;
    std::size_t *use;
    void decr_use()
    { if (--*use == 0) { delete q; delete use; }
}; 
```

我的困惑是关于私有构造函数。为什么会在那里？我认为这是为了防止使用 Query_base 对象初始化 Query 对象，但是他们为什么要定义构造函数呢？有人请澄清一下，谢谢。

注意：如果你想看书中的课程，它在第 614 页。

# mysql - MySQL 基于正则表达式的选择

> ID：10369765
> 
> 赞同：0
> 
> 时间：2012-04-29T04:48:12.247
> 
> 标签：mysql, sql

在 MySQL 中，我需要选择字段不是 IP 地址的所有行（例如 12.32.243.43）。这只能用 MySQL 完成吗？

例如：我尝试了以下但不匹配。

```
select * from mytable where field not like '%.%.%.%' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:10:25.577

如果不需要使用正则表达式，这将提供解决方案：

```
select stringBasedIp from x
where inet_aton(stringBasedIp) is null;

select stringBasedIp, (inet_aton(stringBasedIp) is null) as isInvalidIp
from x; 
```

样本数据：

```
create table x(stringBasedIp varchar(16));

insert into x values
('255.255.255.255'),
('0.0.0.0'),
('0.0.0.300'),
('0.0.0.-1'),
('0.0.0.A'),
('192.168.0.1'),
('400.168.0.1'),
('12.32.243.43'),
('12.32.243.430'); 
```

以下是无效ip列表：

```
STRINGBASEDIP
0.0.0.300
0.0.0.-1
0.0.0.A
400.168.0.1
12.32.243.430 
```

现场测试：[http ://www.sqlfiddle.com/#!2/2a4ec/1](http://www.sqlfiddle.com/#!2/2a4ec/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T05:03:17.820

当然可以。你会寻找类似的东西：

```
SELECT * FROM `table` WHERE NOT( some_field REGEXP '^[0-9+]\.[0-9]+\.[0-9+]\.[0-9+]') 
```

# objective-c - UITableViewController 分组属性不起作用

> ID：10369766
> 
> 赞同：0
> 
> 时间：2012-04-29T04:48:46.093
> 
> 标签：objective-c, uitableview

我有两个 UITableViewControllers。在第一个 UITableView 中，一旦用户选择了一个单元格，就会推送一个新的 UITableViewController。我在 IB 中将两个 UITableViews 都设置为“分组”。但是，当推送第二个 UITableViewController 时，它会显示为“普通”UITableView。有没有办法解决这个问题？

作为一个健全的检查，我更改了代码，以便第二个 UITableViewController 不是从第一个 UITableViewController 推送的，而且它似乎是“分组的”。发生这种情况有原因吗？

来自 UITableViewController 的代码正在推送第二个 UITableViewController：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

   if ([cell.text isEqualToString:@"Long Term Disability"]) { 
    LongDisabilityTableView *ldvc = [LongDisabilityTableView alloc]; 
    [self.navigationController pushViewController:ldvc animated:YES];
   }
    if ([cell.textLabel.text isEqualToString:@"Short Term Disability"]) {

        ShortDisabilityTableView *sdvc = [ShortDisabilityTableView alloc]; 
        [self.navigationController pushViewController:sdvc animated:YES];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:02:27.350

如果您要推送到`UITableViewController`，则可以通过执行以下操作之一来强制对表进行分组：

## 在里面

```
MyTableController *grouped = [[MyTableController alloc] initWithStyle:UITableViewStyleGrouped]; 
```

## 极好的

这需要添加到`UITableViewController`.

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:UITableViewStyleGrouped]; /* This is where the magic happens */
    if (self) {
        self.title = @"My Grouped Table";
    }
    return self;
} 
```

## 再确认一次

确保您没有将您的设备`UITableView`放在`UIViewController`.

确保您在代码中调用了正确的控制器（来自`didSelectRowAtIndexPath:`）

## 更新，代码后添加

那么有一个原因，你没有使用init。请参阅上面的第一个示例。

您还应该将代码更改为：

```
/*  This assumes that your Long Term Disability cell is at index 0
    and that your Short Term Disability cell is at index 1\. 
 */
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch ( indexPath.row )
    {
        case 0: /* @"Long Term Disability" */

            LongDisabilityTableView *ldvc = [[LongDisabilityTableView alloc] initWithStyle:UITableViewStyleGrouped]; 
            [self.navigationController pushViewController:ldvc animated:YES];
            break;

        case 1: /* @"Short Term Disability" */

            ShortDisabilityTableView *sdvc = [[ShortDisabilityTableView alloc] initWithStyle:UITableViewStyleGrouped];
            [self.navigationController pushViewController:sdvc animated:YES];
            break;
    }
} 
```

# r - 在循环中合并时专门标记 y 的变量

> ID：10369771
> 
> 赞同：1
> 
> 时间：2012-04-29T04:49:45.367
> 
> 标签：r, for-loop, merge, customization

作为[这个问题](https://stackoverflow.com/questions/10369187/use-object-name-in-a-loop)的延续，我现在正在寻找一种方法来在合并时仅标记 y 数据框中的非唯一变量。

的默认值`suffixes`是查找长度为 2 的向量。

假设我有这个清单，

```
a <- list(A = data.frame(id = c(01, 02), a=runif(2), b=runif(2)), 
          B = data.frame(id = c(01, 02), b=runif(2), c=runif(2)),
          C = data.frame(id = c(01, 02), c=runif(2), d=runif(2)))
a
$A
  id         a         b
1  1 0.6922513 0.9966336
2  2 0.9216164 0.8256744

$B
  id         b         c
1  1 0.2242940 0.7058331
2  2 0.4474754 0.9228213

$C
  id        c         d
1  1 0.969796 0.1761250
2  2 0.633697 0.6618188 
```

然后我进行一些*自定义*，将一些数据帧一个接一个地合并在一起，这里以取出一个数据帧为例，

```
df <- a[[1]]
a <- a[setdiff(names(a), names(a[1]))] 
```

然后我以这种方式合并列表，

```
for(i in seq_along(a)) {
   v <- a[[i]]     # extract value
   ns <- names(a)
   n <- ns[[i]]    # extract name
   df <-merge(df, v, by.x="id", by.y="id", all.x=T, 
              suffixes=paste(".", n, sep = ""))
}
df
  id         a       b.B       bNA       c.C      cNA         d
1  1 0.6922513 0.9966336 0.2242940 0.7058331 0.969796 0.1761250
2  2 0.9216164 0.8256744 0.4474754 0.9228213 0.633697 0.6618188 
```

问题是，如上所示，R 为两个非唯一变量添加了一个标记，但由于我只提供了一个名称，`n`所以我`NA`在“其他”变量上得到了一个标记。在上面的示例中，我从 A 数据帧中获得了变量的 .B 后缀。

有没有一种方法可以将正确的数据框名称添加到两个变量中，或者（首选）在合并时专门标记 y 的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:36:21.757

这是一个有趣的小谜题。**我在reshape**包中从 Hadley 的`merge_recurse`功能中大量欺骗和“借用”了：

 **```
merge_recurse1 <- function (dfs, ...) 
{
    n <- length(dfs)
    if (!is.null(names(dfs))){

    }
    if (length(dfs) == 2) {
        merge(dfs[[1]], dfs[[2]],all = TRUE,sort = FALSE,
            suffixes = c('',names(dfs)[2]), ...)
    }
    else {
        merge(Recall(dfs[-n],...), dfs[[n]],all = TRUE,sort = FALSE,
            suffixes = c('',names(dfs)[n]),...)
    }
}

> merge_recurse1(a,by = "id")
  id         a         b        bB         c        cC         d
1  1 0.2536158 0.6083147 0.3060572 0.1428531 0.6403072 0.4621454
2  2 0.9839910 0.7256161 0.2203161 0.6653415 0.1496376 0.8767888 
```

除了我所做的后缀更改之外，我发现我需要添加一个`...`参数才能`Recall`以`merge_recurse`我认为应该的方式开始工作。不知道这是一个错误还是我只是误解了这个功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T16:41:16.573

抱歉……我花了一点时间才明白你的问题。但是，你......就像...... 99％在那里。

改变论点：

```
suffixes = paste(".", n, sep = "") 
```

到：

```
suffixes = c("", paste(".", n, sep = "")) 
```

你应该没事。通过这样做，我得到了一个`df`看起来像这样的：

```
> df
  id          a           b        b.B         c        c.C           d
1  1 -0.6039805  0.08297807 0.06426459  2.787147 -0.9566280 -0.36054991
2  2 -0.1694382 -0.95296450 0.37144139 -1.346691  0.7072892  0.09239593 
```

顺便说一句，您是否尝试过早期 Stackoverflow 帖子中的其他一些建议，而不是所有这些？我记得在某个地方看到了一些东西，`Reduce`它让我得到了这个部分解决方案（使用你原来的“a”数据）：

```
Reduce(function(x, y) merge(x, y, by="id", all=TRUE, suffixes=c("", "_2")), 
       a, accumulate=FALSE) 
```

它为您提供如下输出：

```
 id          a           b        b_2         c        c_2           d
1  1 -0.6039805  0.08297807 0.06426459  2.787147 -0.9566280 -0.36054991
2  2 -0.1694382 -0.95296450 0.37144139 -1.346691  0.7072892  0.09239593 
```

这些中的任何一个更有用或更接近您正在寻找的东西吗？**

# java - 无法让 else if 语句在 Java 中工作

> ID：10369772
> 
> 赞同：4
> 
> 时间：2012-04-29T04:49:58.750
> 
> 标签：java, if-statement

好的，我正在尝试做这个简单的事情，但它不起作用。我是 Java 初学者，需要一些帮助。每次我运行下面的代码时，我都会得到输出*That is not a valid option*。我究竟做错了什么？

```
 package test;

 import java.util.Scanner;

 public class options {
     public void options() {
         Scanner scnr = new Scanner(System.in);
         String slctn;

         System.out.println("What would you like to do?");
         System.out.println("a) Travel the expedition");
         System.out.println("b) Learn more about the expedition");

         slctn = scnr.nextLine();
         if (slctn == "a"){
             travel exeTravel = new travel();
             exeTravel.travel();
         }else if (slctn=="b"){
             learn exeLearn = new learn();
             exeLearn.learn();
         }else{
             System.out.println("That is not a valid option");
         }
     } 
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T04:58:15.363

好吧，首先，== 是语言中的基本运算符。表达式的结果类型是布尔值。为了比较布尔类型，它比较相同真值的操作数。对于比较引用类型，它比较相同引用值的操作数（即，引用同一个对象或都为空）。对于数字类型，它比较相同整数值或等效浮点值的操作数。请参阅[Java 语言规范](http://download.oracle.com/otn-pub/jcp/jls-7-mr3-fullv-oth-JSpec/JLS-JavaSE7-Full.pdf?AuthParam=1335675571_06f2e12ad9304928aed2408ec284dd66)。

相反，equals() 是一个实例方法，它基本上由 java.lang.Object 类定义。按照惯例，此方法指示接收器对象是否“等于”传入的对象。Object 类中此方法的基本实现检查引用是否相等。其他类，包括您编写的类，可能会覆盖此方法以执行更专业的等价测试。请参阅[Java 语言规范](http://download.oracle.com/otn-pub/jcp/jls-7-mr3-fullv-oth-JSpec/JLS-JavaSE7-Full.pdf?AuthParam=1335675571_06f2e12ad9304928aed2408ec284dd66)。

对于大多数人来说，典型的“陷阱”是在他们真正应该使用 String 类的 equals() 方法时使用 == 来比较两个字符串。从上面可以看出，只有当两个引用都指向同一个实际对象时，运算符才会返回“true”。但是，对于字符串，大多数用户想知道两个字符串的值是否相同——因为两个不同的 String 对象可能都具有相同（或不同）的值。

```
 slctn = scnr.nextLine();
     if (slctn.equals("a")){
         travel exeTravel = new travel();
         exeTravel.travel();
     }else if (slctn.equals("b")){
         learn exeLearn = new learn();
         exeLearn.learn();
     }else{
         System.out.println("That is not a valid option");
     } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T04:51:19.410

`slctn.equals("a")`将工作。

阅读本文以了解原因： [Java 中 == 和 equals() 有什么区别？](http://tech-read.com/2009/03/19/what-is-difference-between-and-equals-in-java/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T04:58:08.203

在 Java 中，当您需要比较两个对象是否*相等*（即确定它们是否具有相同的值）时，您必须使用`equals()`. 该`==`运算符用于测试两个对象是否*相同*，即：它们是否在内存中完全相同。在您的代码中，将其替换为：

```
slctn == "a"
slctn == "b" 
```

有了这个：

```
"a".equals(slctn)
"b".equals(slctn) 
```

另请注意，最好颠倒比较的顺序（`"a"`before `slctn`），以防万一`slctn`为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T05:00:11.597

在 java 中，当匹配任何对象时，== 运算符只会匹配这两个对象的引用。

如果我们以你的例子 slctn == "a"。假设 slctn 在 abc123 有其参考值，您的其他 sting "a" 将具有不同的参考值，因为它不是同一个对象。

.equals 方法检查字符串对象中的字母是什么，并匹配两个字符串中字母的值。因此，如果您的对象 slctn 包含“a”，它将与字符串“a”匹配

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T05:02:15.433

在 java`==`运算符中比较两个对象的引用，例如：

```
String s_1 = new String("Sample");
String s_2 = new String("Sample");

System.out.println(s_1 == s_2); 
```

结果将是：

`false`

发生这种情况是因为 s_1 是内存中的引用，而 s_2 也是内存中的差异引用。为了解决这个问题，你必须按`equals`方法比较两个对象。样品

```
String s_1 = new String("Sample");
String s_2 = new String("Sample");

System.out.println(s_1.equals(s_2)); 
```

结果将是：

`true`

# c++ - 正态分布的随机数会挂掉程序吗？

> ID：10369773
> 
> 赞同：3
> 
> 时间：2012-04-29T04:50:05.843
> 
> 标签：c++, random, c++11

当我运行这段代码时，它只是挂在 for 循环中，你能解释一下为什么吗？

```
#include<iostream>
#include<random>
#include<ctime>

int main()
{
    using std::cout;
    using std::endl;
    using std::cin;
    using std::mt19937;
    using std::minstd_rand;
    using std::uniform_int;
    using std::normal_distribution;

    // engines
    mt19937 rng;
    minstd_rand gen;

    // distributions
    uniform_int<int> dist(0, 37);
    normal_distribution<short> norm(4, 3);

    // initializaiton
    rng.seed(static_cast<unsigned int>(time(false)));
    gen.seed(static_cast<unsigned short>(time(false)));

    // generate numbers
    for(int i = 0; i < 10; ++i)
        std::cout << dist(rng) << "     " << norm(gen) << endl; // This is as far as this code goes

    cin.get();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T05:29:49.277

`std::uniform_int`不是 C++11。你应该使用`std::uniform_int_distribution`. 并且`std::normal_distribution<T>`要求`T`是浮点类型（C++11 标准 26.5.8.5.1）。

事实上，如果你的 gcc >= 4.5 你应该得到一个错误，比如：

```
/opt/local/include/gcc47/c++/bits/random.h: In instantiation of 'class std::normal_distribution<short int>':
my_random.cpp:21:36:   required from here
/opt/local/include/gcc47/c++/bits/random.h:1982:7: error: static assertion failed: template argument not a floating point type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:07:01.927

这个对我有用。

这些函数可能会尝试从 中获取随机数据`/dev/random`，如果没有高质量的随机数据可用，则会阻塞。我注意到这在廉价的 VPS 托管服务提供商中很常见。

**编辑：**如果我们分享开发环境的详细信息，也许会有所帮助。为我工作：

*   Ubuntu 10.10
*   g++ 4.4.5
*   提升 1.40
*   编译`g++ main.cpp -std=c++0x -o tst`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:40:59.880

我想我能猜到。您应该为正态分布生成器提供一个引擎，该引擎可以生成 0..1 范围内的浮点数。相反，它被错误地喂食了整数饮食。正态分布的常用算法成对消耗这些数字，然后循环直到找到一对，被视为 2 空间中的点，其笛卡尔范数小于 1 且不等于 0。由于该算法只提供整数，因此永远不会发生这种情况。但它从不放弃。

# jquery - 添加一个 jquery 插件选项

> ID：10369778
> 
> 赞同：0
> 
> 时间：2012-04-29T04:50:52.410
> 
> 标签：jquery, plugins, option

我正在使用 jquery 选项卡插件，并试图为幻灯片效果添加延迟，当您单击选项卡时，它会向上滑动，然后延迟，然后向下滑动。

目前上/下滑动是插件的功能，但我一直无法弄清楚如何添加延迟选项。

您可以在此处查看文件：

[http://pastebin.com/km5k9fDx](http://pastebin.com/kM5k9fDx)

在顶部下方，您可以看到我添加了“delayClose”选项的位置，但这就是我所拥有的。

如果有人不介意看一看，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:07:12.900

您需要替换此代码（第 82-86 行）：

```
case "slideDown":{             
  visibleEl.hide();
  hndl.open(nextEl);                             
  break;
} 
```

用下面的一个来添加延迟：

```
case "slideDown":{   
  setTimeout(function(){
    visibleEl.hide();
    hndl.open(nextEl);   
  }, options.delayClose);                          
  break;
} 
```

# c# - 字符串解析时间

> ID：10369781
> 
> 赞同：1
> 
> 时间：2012-04-29T04:51:35.963
> 
> 标签：c#, asp.net, string

我需要获取格式为“07:30 am”的时间（不区分大小写）。我正在阅读一个格式为“07:30am”的文件。最终我将从这个构造一个 DateTime，所以我只需要在 am/pm 部分之前用一个空格来取回它。

我可以使用以下方法检测 a 或 p 的出现：

```
if(startString.IndexOfAny("ap".ToCharArray()) != -1)
{

} 
```

最好的方法是什么？我猜我最终会得到两个可以用空格连接的字符串？可以将拆分与上述代码段一起使用来实现这一点吗？

**更新：**

我需要在分钟和 AM/PM 之间的 DateTime 中有一个空格，并且我不想使用正则表达式。到目前为止，我在这里尝试过的任何东西都没有给我...

我必须处理的实际输入是这种格式：

记录日期：“2012 年 4 月 30 日”

录制时间：“早上 5 点 30 分”

我需要从这些创建一个新的 DateTime 对象，在 am/pm 部分之前有一个空格。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T05:01:53.467

您有两个简单的选择：

1.  使用 RegEx 修复格式：

    字符串 newTime = Regex.Replace(startString, @"(?<=[01]\d:[0-5]\d)(?=[ap]m)", "");

2.  使用 DateTime.ParseExact 按原样导入时间：

    DateTime newValue = DateTime.ParseExact(startString, "hh:mmtt", CultureInfo.InvariantCulture);

我偏爱第二种方法。

您需要使用 Invariant Culture，因为格式中的`mm`and之间没有定义分隔符。`tt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:04:58.537

为什么你不为此使用正则表达式？（[http://msdn.microsoft.com/de-de/library/system.text.regularexpressions.regex(v=vs.80).aspx](http://msdn.microsoft.com/de-de/library/system.text.regularexpressions.regex(v=vs.80).aspx)）对于正则表达式向导来说应该是一件容易的事（我不是)

# php - 在存储之前加密用户的 IP 地址

> ID：10369783
> 
> 赞同：4
> 
> 时间：2012-04-29T04:51:45.663
> 
> 标签：php, mysql, ip, ipv6, ipv4

我正在使用[PHP](http://www.php.net/)和[MySQL](http://www.mysql.com/)，并且我想将用户的 IP 地址存储到数据库中以进行*比较*（例如，每个 IP 只允许一个线程使用一个标志）。可以按照以下方式进行吗？

在 PHP 中检索它：

```
$ipAddress = md5($_SERVER["REMOTE_ADDR"]); 
```

然后将其作为`VARCHAR(32)`.

如果我必须更全面地使用 IP，我猜这不是正确的方法，但如果只是为了确保同一个 IP 没有做两次事情，那么使用[`md5`](http://en.wikipedia.org/wiki/MD5)加密是可以的简化事情（将[IPv4](http://en.wikipedia.org/wiki/IPv4)和[IPv6](http://en.wikipedia.org/wiki/IPv6)地址统一为一个）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T04:54:55.317

是的，这很好，尽管您的术语是错误的：这是散列，而散列不是加密。

您还应该解析`X-FORWARDED-FOR`和`Client-IP`标头，除非您想阻止代理后面的每个人，就好像他们是单个用户一样（例如，大公司、高中的每个人等）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T14:22:26.723

您可能需要考虑将 IP 转换为数字。查找速度快一点，因为它是数字数据，您可以在查询中使用 INET_ATON() 和 INET_NTOA()。

[http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-aton](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-aton)

```
mysql> SELECT INET_ATON('10.0.5.9');
        -> 167773449 
```

[http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-ntoa](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_inet-ntoa)

```
mysql> SELECT INET_NTOA(167773449);
        -> '10.0.5.9' 
```

PHP转换为数字

```
$ipA = $_SERVER["REMOTE_ADDR"];
$octets = split ("\.", $ipA);
$ipN = ($octets[3] + $octets[2] * 256 + $octets[1] * pow(256,2) + $octets[0] * pow(256,3); 
```

此外，您可能需要考虑与此功能一起使用的 IP 地址：

```
/* Get Actual IP Address, in spite of proxy server */
function getRealIpAddr() {
    if (!empty($_SERVER['HTTP_CLIENT_IP']))   //check ip from share internet
    {   $ip=$_SERVER['HTTP_CLIENT_IP']; }
    elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR']))   //to check ip is pass from proxy
    {   $ip=$_SERVER['HTTP_X_FORWARDED_FOR']; }
    else
    {   $ip=$_SERVER['REMOTE_ADDR']; }
    return $ip;
} 
```

***重新****编辑 IPv6*：

原则仍然适用，但 IPv6 Conversions 已经在[How to convert IPv6 from binary for storage in MySQL 中得到解答](https://stackoverflow.com/questions/1120371/how-to-convert-ipv6-from-binary-for-storage-in-mysql)

# java - 关于构造函数

> ID：10369784
> 
> 赞同：1
> 
> 时间：2012-04-29T04:52:00.410
> 
> 标签：java

我正在开发以下代码....

```
class P {
    //public P(){}
    public P(int i) {

    }
}

class D extends P {
    public D(){ // default constructor must be defined in super class

    }
}

public class agf {      
    public static void main(String[] args) {

    }
} 
```

现在在 p 类中定义了显式参数化构造函数，在 D 类中定义了默认构造函数，但它仍然显示编译时错误，请解释

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T04:56:23.023

您的父类 P 显式定义了一个构造函数，因此不会自动添加无参数构造函数。当您为类 D 编写无参数构造函数时，没有使用如下所述的 super 关键字为类 P 调用特定构造函数时，

```
Class D extends P {
    public D() {
        super(10);        
    }
} 
```

您正在指示它调用 P 的无参数构造函数。由于 P 只有您定义的构造函数，它不能调用 P 的无参数构造函数。

简单来说，D 的每个对象都将具有 P 的一部分。但是它不知道如何初始化/构造该 P 部分，因为它没有无参数构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T04:56:29.203

在这个构造函数里面：

```
public D()
{ 
    // no call to super?? implicit call to super()
} 
```

对超类的空构造函数有一个隐式调用（在您的情况下不存在）

要么在超类中实现一个空构造函数，要么显式调用参数化构造函数，例如：

```
public D()
{ 
    super(1);
} 
```

我建议您也阅读[本教程](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T04:56:34.517

在子类中，如果您不显式调用超类构造函数，则必须有 VM 可以为您调用的默认超类构造函数。

在超类中，如果显式*定义*构造函数，则编译器不会生成默认的无参数构造函数。

因此，在您展示的情况下，您在超类中定义了一个非默认构造函数，这阻止了编译器生成默认的无参数构造函数。然后在子类中，您没有显式调用超类中的构造函数。编译器试图生成一个无参数的超类构造函数调用，但没有找到合适的构造函数来调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T05:03:03.217

在创建类 D 的实例时，首先调用 P 的构造函数（因为 D 也是 P）。问题是不能调用 P 的构造函数，因为必须向它提供一个值，而这是你目前没有做的事情。为了解决这个问题，D 的构造函数中的第一行必须是 super( **value** )，而 value 可以是发送给 D 的构造函数的参数，或者..任何你想要的东西（如果你想把 D 的构造函数保留为默认值）。

您可以在调试中逐步完成它，它可以帮助清除问题。

# c++ - 在函数声明中，传递固定大小的数组意味着什么？

> ID：10369791
> 
> 赞同：10
> 
> 时间：2012-04-29T04:54:30.597
> 
> 标签：c++, arrays, arguments

这感觉像是一个非常愚蠢的问题，但我有人在上编程课时向我寻求一些作业帮助，我在他们的代码中看到了这一点（请不要对匈牙利符号发表评论）：

```
void read_dictionary( string ar_dictionary[25], int & dictionary_size ) {... 
```

作为一名 C# 程序员（我在大学里学习了 C 和 C++），我什至不知道你能做到。我总是被告知，并且从那以后就读过你应该有

```
void read_dictionary( string ar_dictionary[], int ar_dictionary_size, int & dictionary_size ) {... 
```

我被告知教授给了他们这个并且它有效，那么像这样声明一个固定大小的数组意味着什么？C++ 没有本地方式知道传递给它的数组的大小（即使我认为在最新的规范中可能已经改变了）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T04:57:58.167

在一维数组中它没有意义，被编译器忽略。在二维或多维数组中它可能很有用，并被函数用作确定矩阵（或多维数组）行长的一种方式。例如 ：

```
int 2dArr(int arr[][10]){
   return arr[1][2];
} 
```

这个函数会`arr[1][2]`根据指定的长度知道地址，并且编译器不应该为这个函数接受不同大小的数组 -

```
int arr[30][30];
2dArr(arr); 
```

是不允许的，这将是一个编译器错误（g++）：

```
error: cannot convert int (*)[30] to int (*)[10] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-29T05:27:08.843

编译器`25`会忽略参数声明中的 。就像你写的一样`string ar_dictionary[]`。这是因为数组类型的参数声明被隐式调整为指向元素类型的指针。

所以下面三个函数声明是等价的：

```
void read_dictionary(string ar_dictionary[25], int& dictionary_size)
void read_dictionary(string ar_dictionary[],   int& dictionary_size)
void read_dictionary(string *ar_dictionary,    int& dictionary_size) 
```

即使在第一个函数的情况下，显式声明了数组的大小，`sizeof(ar_dictionary)`也将返回与`sizeof(void*)`.

[在键盘上](http://codepad.org/0gofqsnf)查看此示例：

```
#include <string>
#include <iostream>

using namespace std;

void read_dictionary(string ar_dictionary[25], int& dictionary_size)
{
    cout << sizeof(ar_dictionary) << endl;  
    cout << sizeof(void*) << endl;  
}

int main()
{
    string test[25];
    int dictionary_size = 25;
    read_dictionary(test, dictionary_size);

    return 0;
} 
```

输出（当然，确切的值取决于实现；这纯粹是为了举例）：

```
4
4 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-28T09:21:53.923

我一直认为传递固定大小的 C++ 数组是 C++ 的“半生不熟”的特性。例如，忽略大小匹配或只能指定第一个索引大小等......直到最近我才学会这个成语：

```
template<size_t N1, size_t N2> // enable_if magic can be added as well
function(double(&m)[N1][N2]){
  ... do something with array m...knowing its size!
} 
```

参考：[有人可以解释这个给我数组大小的模板代码吗？](https://stackoverflow.com/questions/437150/can-someone-explain-this-template-code-that-gives-me-the-size-of-an-array)

# android - Android 设备是否支持指纹？

> ID：10369799
> 
> 赞同：4
> 
> 时间：2012-04-29T04:56:51.120
> 
> 标签：android, fingerprint

我想知道我是否可以开发一个用户触摸屏幕并注册他们的指纹的应用程序。如果可能，是否有任何库可以存储、检索和检测指纹？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T04:59:01.113

这是不可能的，当前的消费者触摸屏无法以该级别的细节“看到”。使用相机你可能会更幸运，但我不知道以前有任何项目这样做过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-29T06:37:56.077

请检查以下链接：

[http://www.diamondfortress.com/sdk](http://www.diamondfortress.com/sdk)

付费 SDK，但我们可以试用它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-04T14:50:34.153

[看起来它现在是 Android 6.0 的一部分](http://developer.android.com/about/versions/marshmallow/android-6.0.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T04:58:48.460

我认为这还不存在。

[http://www.talkandroid.com/51754-fingerprint-scanner-sdk-available-for-android-courtesy-of-xda/](http://www.talkandroid.com/51754-fingerprint-scanner-sdk-available-for-android-courtesy-of-xda/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-07T05:48:07.953

遇到了这个[http://www.diamondfortress.com/sdk](http://www.diamondfortress.com/sdk)。这是一个付费 SDK，它使用相机。但我没有亲自尝试过。

# iphone - 背景音乐播放器和 cocos2d SimpleAudioEngine

> ID：10369812
> 
> 赞同：0
> 
> 时间：2012-04-29T04:59:02.710
> 
> 标签：iphone, cocos2d-iphone, audio-player, mute, simpleaudioengine

我在我的游戏中提供了静音功能。但是，如果音乐播放器在后台运行，并且当我以正常模式（非静音模式）开始游戏时，音乐播放器不会暂停

我曾经使用 [[SimpleAudioEngine sharedEngine] playBackgroundMusic:audiofilename loop:YES];`[[SimpleAudioEngine sharedEngine] stopBackgroundMusic];`停止背景音乐并播放我的游戏音乐。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:30:44.957

课堂上有`pauseBackgroundMusic`and`resumeBackgroundMusic`的方法`SimpleAudioEngine`。所以试试这些方法，而不是每次都停下来玩。希望这可以帮助.. ：）

# html - 无法调整表格大小以适合 div 内容

> ID：10369813
> 
> 赞同：0
> 
> 时间：2012-04-29T04:59:10.357
> 
> 标签：html, css

希望您能提供帮助，问题是我有一个无法设置其最大宽度的表格，并且它与 div 重叠。我试图在 CSS 中更改它的 div 但徒劳无功。

repairs 表是该表的 div，我也尝试将其包含在另一个名为 tableholder 的 div 中，但又是徒劳的。

```
.repairstable {
     margin-left: 10px;
     margin-right: 10px;        
     table-layout:fixed;
     overflow:hidden;
     max-height:125px;
     max-width:75px;
}
#tableholder {
    width 300px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:23:50.630

表格总是展开到最小宽度，以使每行中的所有单元格都能正确显示。如果您将表格限制为 300 像素，并且您有两个单元格，每个单元格都包含一些非常长的单词（例如 160 像素），那么表格将是 320 像素宽。

因此，您必须确保表格内容适合您的最大宽度。

# webkit - 如何描述或进一步隔离这个明显的 Webkit SVG 错误？

> ID：10369815
> 
> 赞同：0
> 
> 时间：2012-04-29T04:59:44.123
> 
> 标签：webkit, svg

我减少了我在 SVG 中遇到的一些奇怪行为，并提出了[这个测试用例](http://jsfiddle.net/vXGm7/)：

```
<circle  r="10" />
<rect    width="18" height="18" />
<polygon points="10,20 30,30 40,15 25,10" />
<script>
var svg = document.querySelector('svg'),
    els = document.querySelectorAll('svg *');
for (var i=els.length;i--;){
  var el = els[i];
  el._dragXForm = el.transform.baseVal.appendItem(svg.createSVGTransform());
  setInterval((function(el){
    return function(){
      var tx = el._dragXForm.matrix;
      tx.e += Math.random()*2-1;
      tx.f += Math.random()*2-1;        
    }
  })(el),50);
}
</script> 
```

在 OS X 上的 Safariv5 和 Chromev18 中，圆形和多边形都抖动，但矩形没有。它什么也不做。正在获得一个新值，但屏幕上的`SVGMatrix`外观没有更新。（在 Firefox 中，它按预期工作。）

如果我将脚本更改为`_dragXForm` [像这样](http://jsfiddle.net/vXGm7/1/)删除：

```
for (var i=draggables.length;i--;){
  var el = draggables[i];
  el.transform.baseVal.appendItem(svg.createSVGTransform());
  setInterval((function(el){
    return function(){
      var tx = el.transform.baseVal.getItem(0).matrix;
      tx.e += Math.random()*2-1;
      tx.f += Math.random()*2-1;        
    }
  })(el),50);
} 
```

......然后`<rect>`与其他人一起移动。

除了看起来像一个疯狂的错误（这怎么可能只影响一个`<rect>`？！）我觉得这还没有隔离错误的来源。

**可以重现这种奇怪行为的最简单的代码是什么？**（如果已经为此提交了一个错误，我很想知道它。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:11:22.007

[这段代码](http://jsfiddle.net/vXGm7/2/)似乎越来越接近问题的核心：

```
var svg = document.querySelector('svg'),
    els = document.querySelectorAll('svg *');
for (var i=els.length;i--;){
  var el = els[i],
      tx = el.transform.baseVal.appendItem(svg.createSVGTransform());
  console.log( el.tagName, tx===el.transform.baseVal.getItem(0) );
  setTimeout((function(el,tx){
    return function(){
      console.log( el.tagName, tx===el.transform.baseVal.getItem(0) );
    }
  })(el,tx),1);
} 
```

输出：

```
polygon true  // The return value of appendItem is the same as the first item
rect true     // The return value of appendItem is the same as the first item
circle true   // The return value of appendItem is the same as the first item

polygon true  // The returned value is STILL the same as the first item
rect false    // The returned value is NO LONGER the same as the first item
circle true   // The returned value is STILL the same as the first item 
```

# r - 快速重新创建嵌套频率表

> ID：10369816
> 
> 赞同：3
> 
> 时间：2012-04-29T05:00:06.777
> 
> 标签：r

我发现自己使用矩阵和重新创建表的文章一遍又一遍地重新创建嵌套频率表（或者有时放弃并使用`rep`并制作完整的数据集，这非常耗时。我正在寻找最快的方法（最少的代码）在 R 中重新创建这个嵌套频率表（我认为这是一个许多人都可以从中受益的问题）。

```
 gender female male
hs.grad race                    
no      asian             3    4
        black             5   10
        white            17   11
yes     asian             5    7
        black             1    9
        white            11   17 
```

如果有帮助，这是使用创建`ftable`的。

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T05:23:56.823

你的意思是这样的吗？

```
file = tempfile()
cat (text='              gender female male
hs.grad race                    
no      asian             3    4
        black             5   10
        white            17   11
yes     asian             5    7
        black             1    9
        white            11   17
', file=file)
ft = read.ftable(file) 
```

或者

```
> read.ftable(textConnection("              gender female male
+ hs.grad race                    
+ no      asian             3    4
+         black             5   10
+         white            17   11
+ yes     asian             5    7
+         black             1    9
+         white            11   17")) 
```

# c++ - 代码块 10.05 中的程序参数文本框内容不可见

> ID：10369819
> 
> 赞同：3
> 
> 时间：2012-04-29T05:01:17.120
> 
> 标签：c++, debugging, ubuntu, codeblocks

重复：[代码块 10.05 中的程序参数文本框不可见](https://stackoverflow.com/questions/8004759/the-program-arguments-text-box-in-codeblocks-10-05-is-not-visible)

我想使用 Codeblock IDE 调试在 C++ 中采用命令行参数的代码。我用谷歌搜索并读到“Project-> Set program's aregumnets”可以用来传递命令行参数。但是当我选择该选项时，文本框不可编辑。请参阅下面的快照以供您参考。

![在此处输入图像描述](../Images/54c73ebd03ec8d84b0dffa3fe12a6c17.png)

关于如何解决这个问题的任何想法。

**编辑：** 我在 Ubuntu 上。我可以添加标签`Program arguments`但无法增加文本框的大小。即使最大化窗口也没有任何帮助。我可以看到我可以打字。

重新安装没有帮助。

我发现这个链接 [http://ubuntuforums.org/showthread.php?t=1906791](http://ubuntuforums.org/showthread.php?t=1906791) 谈到了黑客“我可以通过破解 project.cbp 文件并添加一行来解决问题，但这很混乱。” 有人可以详细说明这种解决方法如何对我有用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-06T13:21:55.657

我在这里找到解决方案[我不知道如何使用 Project->Set programs' arguments 来为](http://forums.codeblocks.org/index.php/topic,15376.0.html).

基本上，您需要做的是将 /usr/share/codeblocks/manager_resources.zip 中的 select_target.xrc 文件替换为附件 select_target.zip 中的文件。附件仅在您登录论坛时可用。

# iphone - 在 iOS 5 中使用谓词搜索嵌套数组

> ID：10369821
> 
> 赞同：3
> 
> 时间：2012-04-29T05:01:25.687
> 
> 标签：iphone, ios, ios5, nspredicate, predicate

我有一个地址簿联系人字典数组，每个名称的字典都包含一个名称字符串和一个电子邮件地址数组。这是我记录联系人数组时 NSLog 输出的片段：

```
{
    emails =         (
        "something@yahoo.com"
    );
    name = "Some Name";
},
{
    emails =         (
        "john.public@gmail.com",
        "john@public.name"
    );
    name = "John Q. Public";
},
[etc.] 
```

我想使用谓词按电子邮件地址搜索这些词典，返回至少有一个与搜索词匹配的电子邮件地址的所有条目。

到目前为止，我已经尝试了[这个问题](https://stackoverflow.com/questions/4997720/nspredicate-with-sub-array)中描述的方法，只是使用了 CONTAINS，如下所示：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"emails CONTAINS[c] %@", searchString]; 
```

但任何搜索都只返回一个空数组。如果我改为搜索名称字段，就像这样，它可以正常工作：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"name CONTAINS[c] %@", searchString]; 
```

所以我很确定它专门用于搜索数组。想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T01:58:28.400

我想通了。这有效：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"ANY emails CONTAINS[c] %@",currentString]; 
```

谢谢你成为我的橡皮鸭，所以。

# c++ - 由于从结构头创建向量数组而出现错误 LNK2019？

> ID：10369825
> 
> 赞同：0
> 
> 时间：2012-04-29T05:01:57.993
> 
> 标签：c++, vector, error-handling, lnk2001

我正在尝试从输入文件创建一个数组向量，然后将该向量加载到我的主文件中。我也尝试在整个程序中使用相同的向量。然而，当我编译时，我得到了一堆错误 LNK2019。我想我知道这发生在哪里，但我不确定为什么。有人可以帮忙或解释一下吗？谢谢！

```
 #include <iostream>
     #include <string>
     #include <vector>
     #include "Database.h"
     #include "Registration.h"
     #include "Competition.h"
     #include "Events.h"
     #include "CompPop.h"
     #include "PushRegistration.h"
     using namespace std;

     void main()
     {
         vector<Competition> myVector = CompPop();
         vector<Registration> myRegistration = PushRegistration();
         Database home(myVector, myRegistration);

         home.Menu();

         system("pause");
     } 
```

似乎发生在：1.vector< Competition> myVector 2.vector<Registration> myRegistration

这些是我收到的错误消息

错误 LNK2001：未解析的外部符号“公共：__thiscall Registration::~Registration(void)”(??1Registration@@QAE@XZ)

和

错误 LNK2001：未解析的外部符号“公共：__thiscall Database::~Database(void)”(??1Database@@QAE@XZ)

我的 Compop 标头，从文件中读取并将内容存储到 Competition 的向量中（类似于我的 PushRegistration 标头）

```
 #pragma once

     #include <fstream>
     #include <sstream>
     #include <iostream>
     #include <string>
     #include <vector>
     #include "LogIn.h"
     #include "Registration.h"
     #include "Events.h"
     #include "Competition.h"
     using namespace std;

     vector<Competition> CompPop()
     {
         ifstream myfile("PSU Results.txt");

         string line, tcomp, tleader, tfollower, tevents, tplacement;
         vector<Competition> info;
         if(myfile.is_open())
         {
             int i = 0; // finds first line
             int n = 0; // current vector index
             int space;
             while(!myfile.eof())
             {
                 getline(myfile,line);

                 if(line[i] == '*')
                 {
                     space = line.find_first_of(" ");

                     tleader = line.substr(0+1, space);
                     tfollower = line.substr(space + 1, line.size());

                 }
                 else
                 {
                     if(line[i] == '-')
                     {
                         tcomp = line.substr(1, line.size());
                         Competition temp(tcomp, tleader, tfollower);
                         info[n] = temp;
                     }
                     else
                     {
                         if(!line.empty())
                         {
                             line = line;

                             space = line.find_first_of(",");
                             tevents = line.substr(0, space);
                             tplacement = line.substr(space + 2, line.size());
                             info[n].pushEvents(tevents,tplacement);
                         }
                         if(line.empty())
                         {
                             n++;
                         }
                     }
                 }
             }
         }
         else
         {
             cout << "Unable to open file";
        }

         myfile.close();

         return info;
     } 
```

我的比赛标题（类似于我的注册标题）：

```
 #pragma once

     #include <fstream>
     #include <sstream>
     #include <iostream>
     #include <string>
     #include <vector>
     #include "LogIn.h"
     #include "Registration.h"
     #include "Events.h"
     using namespace std;

     struct Competition
     {
     public:

        Competition(string compName, string lead, string follow)
         {
            Name = compName;
            Leader = lead;
             Follower = follow;
         }

         void pushEvents(string name, string place)
         {
             Events one(name, place);
             Eventrandom.push_back(one);
         }

         string GetName()
         {
            return Name;

         }

         string GetLeader()
         {
            return Leader;
         }

         string GetFollow()
         {
            return Follower;
         }

         string GetEvent()
         {
            return Event;
         }

         string GetScore()
         {
            return Score;
         }

         void Print()
         {
             cout << "Leader: " << Leader << endl;
             cout << "Follower: " << Follower << endl;
            cout << "Competition: " << Name << endl;
             cout << "Events and Placement: " << endl;

             for(vector<Events>::iterator pos = Eventrandom.begin(); pos !=                      Eventrandom.end(); ++pos)
             {
                 cout << pos->eventName << " " << pos->Placement << endl;
             }

             cout << endl;
         }

         ~Competition();

     private:
        string Name, Leader, Follower, Event, Score;

         vector<Events> Eventrandom;
     }; 
```

我的注册标题：

```
 #pragma once

     #include <iostream>
     #include <string>
     #include <fstream>
     using namespace std;

     #define MAX_LENGTH 7 
     #define MAX_DANCES 9

     class Registration
     {
     public:

         Registration();

         Registration(string confirmationCode, string follower, string leader, string comp, string level, string dance);

         void FirstTime();

         void infoFollower();

         void infoLeader();

         string gen_random(const int len);

         string Levels();

         string Dances();

         void Print();

              void print2Confirmation();

         ~Registration();

     private:

         string CCode, Follower, Leader, Name;
         string Level, Dance;

     }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:22:29.123

错误消息非常清楚。

> 未解析的外部符号“public：__thiscall Registration::~Registration(void)”

`Registration::~Registration(void)`是`Registration`类的析构函数。你定义了一个吗？

# qt - 如何使用 Qt 禁用 Alt + F4 窗口关闭？

> ID：10369826
> 
> 赞同：14
> 
> 时间：2012-04-29T05:02:06.227
> 
> 标签：qt, qt4, keypress, qdialog, qkeyevent

我使用以下行从我的对话框中禁用了 Qt 中的 X 按钮：

```
myDialog->setWindowFlags(Qt::Dialog | Qt::Desktop) 
```

但我无法检测`Alt`+`F4`使用此代码：

```
void myClass::keyPressEvent(QKeyEvent *e)
{
    if ((e->key()==Qt::Key_F4) && (e->modifiers()==Qt::AltModifier))
        doSomething();
} 
```

我应该怎么做才能在 Qt中检测`Alt`+或禁用它？`F4`

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-29T05:26:25.077

按下`Alt+F4`会导致关闭事件被发送到您的顶级窗口。在您的窗口类中，您可以覆盖`closeEvent()`以忽略它并阻止您的应用程序关闭。

```
void MainWindow::closeEvent(QCloseEvent * event)
{
    event->ignore();
} 
```

如果您让关闭按钮 (X) 可见，此方法也会禁止它关闭您的应用程序。

这通常用于让应用程序有机会决定是否要关闭或通过显示“您确定吗？”来询问用户。消息框。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-25T08:27:39.617

下面的代码防止在按下 Alt+F4、[X] 或 Escape 时关闭对话框，但不是通过调用 SomeDialog::close() 方法。

```
void SomeDialog::closeEvent(QCloseEvent *evt) {
    evt->setAccepted( !evt->spontaneous() );
}   

void SomeDialog::keyPressEvent(QKeyEvent *evt) {
    // must be overridden but empty if the only you need is to prevent closing by Escape
} 
```

祝我们所有人好运；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-17T13:47:04.130

您还可以在对话框的类中处理事件（至少如果它是模态 dlg）：

```
void MyDialog::closeEvent(QCloseEvent* e)
{
    if ( condition )
       e->ignore();
    else
       __super::closeEvent(e);
} 
```

# php - PHP str_replace 每次都有不同的值？

> ID：10369829
> 
> 赞同：1
> 
> 时间：2012-04-29T05:02:37.553
> 
> 标签：php, str-replace

我想为 HTML 字符串做一个 str_replace，每次找到一个匹配项，值也会增加。

```
$link = 1;

$html = str_replace($this->link, $link, $html); 
```

这将一次性替换所有内容，并且使用相同的字符串 $link，我希望每次找到匹配项时 $link 都会增加。是否可以？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:09:00.640

您可以使用正则表达式来返回它做了多少替换。

```
<?php
$string = "red green green blue red";

preg_replace('/\b(green)\b/i', '[removed]', $string, -1 , $results);
echo $results; // returns '2' as it replaces green twice with [removed]
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:16:05.760

如果我对您的理解正确（您希望将每个匹配替换为不断增长的整数），那么关于鼓励您使用的问题的评论似乎`preg_replace_callback`是正确的：

```
$str = 'Hello World';
$cnt = 0;

function myCallback ( $matches ) {
  global $cnt;
  return ++$cnt;
}

// He12o Wor3d
echo preg_replace_callback( '/\l/', 'myCallback', $str ); 
```

# mongodb - 在搜索结果中查找 A & C

> ID：10369830
> 
> 赞同：3
> 
> 时间：2012-04-29T05:02:54.137
> 
> 标签：mongodb, math, indexing, tagging, database

我希望能够向数据库 (MongoDB) 中的记录添加最多 10 个标签，但我不想在每个列上添加 10 个带有相关索引的列。所以我想我会添加这些标签的唯一总和。

例如（有 6 个标签）

```
|------------|
|value | tag |
|------------|
|1     |a    |
|2     |b    |
|4     |c    |
|8     |d    |
|16    |e    |
|32    |f    |
|------------| 
```

例如

a + b = 3

b + c + d = 14

然后我只将值的总和存储在 Mongo 中。

这些组合始终是唯一的，当使用迭代从持久存储中提取时，我可以将它们“重构”回标签。

```
int tagSum
for each (tag in tagCollection.OrderDescending)
{
    if (tagSum >= (int)tag)
    {
        TagProperty.Add(targetAge);
        tagSum -= (int)tag;
    }
} 
```

然而，我的问题是我认为必须有一个数学公式可以用来查询特定标签，例如通过传入值 4 来查找“c ​​标签”。我错了，或者我找不到它。

我很高兴在 Mongo 中使用 Multikeys 解决方案，但我还有很多其他数据要索引，使用 1 个索引而不是 10 个索引会更好‽</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:40:02.103

Multikeys 是解决这个问题的正确方法，因为它可以从数组上的单个索引中找到任何文档，而无需进行表扫描。在您的情况下，您可以将代表标签的适当字母选择放入数组中：`["a", "d", "e"]`.

在更复杂的情况下，每个字段都可以包含相同的标签值，例如歌曲名称、专辑名称、艺术家姓名……我有时会添加两次标签短语：一次单独添加，一次在字段名称前添加，例如`"artist:Hello"`。现在我可以搜索出现在任何字段中的标签词或出现在特定字段中的标签词，无论哪种方式，它都会使用索引来查找匹配的记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:13:25.360

将标签 af 转换为整数 0-5，调用它`tagValue`，那么你想要的数字就是`1<<tagValue`。

# java - 替换java中的字符序列

> ID：10369837
> 
> 赞同：8
> 
> 时间：2012-04-29T05:04:05.993
> 
> 标签：java

我正在解析一个结构不佳的 rss 提要，并且其中包含一些正在返回的数据`<p>at`。如何`<p>at`使用 java 将所有实例替换为空白？

我熟悉`.replace`String 类的方法，但我不确定正则表达式的外观。我试过`inputString.replace("<p>at", "")`了，但没有用。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T05:07:00.897

试试这个：

```
inputString = inputString.replace("<p>at", ""); 
```

请注意，该[`replace()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)方法不会*就地*`String`修改（与类中的**所有**方法一样`String`，因为它是不可变的），而是返回一个`String`带有修改的新方法 - 您需要将返回的字符串保存在某处。

此外，上述版本`replace()`不接收正则表达式作为参数，只接收要替换的字符串及其替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:12:57.947

```
inputString.replace("<p>at", "") // this will replace all match's with second parameter charsequence
inputString.replaceAll("<p>at", "") //  Replaces each substring of this string that matches the given regular expression with the given replacement. 
```

你可以使用任何人。

```
String newInputString = inputString.replaceAll("<p>at", ""); 
```

谢谢

# c - 指针参数上的 Malloc 失败

> ID：10369838
> 
> 赞同：1
> 
> 时间：2012-04-29T05:04:10.773
> 
> 标签：c, pointers, struct, scope, malloc

我有以下代码行：

```
struct c_obj_thing *object = NULL;
c_obj_initalizer(object);
// at this point, (object == NULL) is 'true'
printf("Value: %d\n", object->value); // this segfaults 
```

这是 c_obj_initializer 的定义：

```
int c_obj_initalizer(struct c_obj_thing *objParam) {
  objParam = malloc(sizeof(struct c_obj_thing));
  objParam->pointerThing = NULL;
  objParam->value = 0;
  return 0;
} 
```

为什么 c_obj_initializer 方法中的 malloc 在方法返回时不与作为参数传递的指针保持连接？似乎对初始化程序的调用没有做任何事情。我意识到传递一个实际的 c_obj_thing 不是作为指针将意味着在 initalizer 中所做的更改不会返回，但我认为动态内存会在整个程序中永久存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T05:06:40.490

因为当您调用函数时，它会发送指针的副本，当您在函数中更改它时，您不会在调用方法中更改。您需要在初始化程序之前对其进行 malloc。

例如：

```
struct c_obj_thing *object = malloc(sizeof(struct c_obj_thing));
c_obj_initalizer(object);
printf("Value: %d\n", object->value); // this segfaults

int c_obj_initalizer(struct c_obj_thing *objParam) {  
  objParam->pointerThing = NULL;
  objParam->value = 0;
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T05:11:28.377

如果出于某种原因需要在函数中进行分配，则`c_obj_initalizer`必须将指针传递给指向该函数的指针：

```
int c_obj_initalizer(struct c_obj_thing ** objParam) {
  *objParam = malloc(sizeof(struct c_obj_thing));
  *objParam->pointerThing = NULL;
  *objParam->value = 0;
  return 0;
} 
```

而不是这样调用：

```
struct c_obj_thing *object = NULL;
c_obj_initalizer(&object); 
```

# javascript - 无法返回 xmlhttp.responseText？

> ID：10369839
> 
> 赞同：2
> 
> 时间：2012-04-29T05:04:17.757
> 
> 标签：javascript, xml, responsetext

对这里的问题有任何见解吗？运行时，代码不会产生任何结果。页面上不显示任何文本。如果我取消注释注释行，则会出现 xml 结果。为什么我不能将它作为变量传递？（我确实收到了警报，仅供参考，因此正在调用该函数。）

```
 <script type="text/javascript">
           function loadXMLDoc(parameterString)
               {
                   alert("loadXMLDoc has been called.");
                   var xmlhttp = new XMLHttpRequest();

                   xmlhttp.onreadystatechange=function()
                   {
                       if (xmlhttp.readyState==4 && xmlhttp.status==200)
                       {

                  //document.getElementById("xmlResults").innerHTML = xmlhttp.responseText;
                               alert("Got the response!");
                               return xmlhttp.responseText;
                           }
                           else document.getElementById("xmlResults").innerHTML = "No results."
                       }

                       var url =  "http://metpetdb.rpi.edu/metpetwebsearchIPhone.svc?" + parameterString;
                   xmlhttp.open("GET",url,true);
                   xmlhttp.send();
               }
        </script>

        <script type="text/javascript">

       $(function(){

        //left out irrelevant code which creates the var "parameters"

         var results = loadXMLDoc(parameters);

         document.getElementById("xmlresults").innerHTML = results;

       });

       </script>

<body>
<div id="xmlResults"></div>
</body> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T07:36:53.670

根据定义，异步调用执行实际工作，而不会使调用者等待结果。您确实需要使用回调函数，例如：

```
<script type="text/javascript">
  function loadXMLDoc(parameterString, onComplete, onError) {
    alert("loadXMLDoc has been called.");
    var xmlhttp = new XMLHttpRequest();

    xmlhttp.onreadystatechange=function() {
      if (xmlhttp.readyState==4) {
        if(xmlhttp.status==200) {
          //document.getElementById("xmlResults").innerHTML = xmlhttp.responseText;
          alert("Got the response!");
          onComplete(xmlhttp.responseText);
        } else {
          onError();
        }
      }
    };

    var url =  "http://metpetdb.rpi.edu/metpetwebsearchIPhone.svc?" + parameterString;
    xmlhttp.open("GET",url,true);
    xmlhttp.send();
  }
</script>

<script type="text/javascript">
  $(function(){
    //left out irrelevant code which creates the var "parameters"
    loadXMLDoc(parameters, function(results) {
      // this function will be called if the xmlhttprequest received a result
      document.getElementById("xmlresults").innerHTML = results;
    }, function() {
      // this function will be called if xhr failed
      document.getElementById("xmlResults").innerHTML = "No results.";
    });
  });
</script> 
```

顺便说一句，由于您已经在使用 jQuery，您应该只使用[其内置的 AJAX 功能](http://api.jquery.com/category/ajax/)，而不是构建您的自定义 xmlhttprequest。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:08:22.970

一方面，你有大小写问题，即`xmlresults`与。`xmlResults`

# database - 如何使数据库结构可扩展用于回合制游戏？

> ID：10369842
> 
> 赞同：0
> 
> 时间：2012-04-29T05:04:47.887
> 
> 标签：database, structure, effects

我正在开发一个幻想回合基础游戏。我现在必须为我的法术创建数据库结构。问题是我真的不知道如何创建它。也许那些咒语的效果不应该存储在数据库中？

例如，效果可能是；增加攻击，拉敌人，治疗，传送，隐藏，放地雷等等......效果是完全不同的，我希望数据库结构是可扩展的。

## 编辑：

这是一款回合制游戏，时间与回合相同，距离代表方块。我在下面的意思的一些例子。

假设我们有焚化：

*   它只能瞄准 1 个敌人（不是盟友）
*   它可以在 3 个方格的距离处施放
*   每回合造成5点伤害
*   它持续3圈

现在我们可以使用冲击波：

*   它排成一行行进 4 个方格
*   它从施法者附近的一个广场开始
*   它会伤害它击中的第一个目标（盟友或敌人）
*   它对目标造成 5 点伤害并将其击退 1 格

最后一个 Rain Call：

*   它可以在任何距离投射
*   它是一个 5x5 正方形大小的云
*   它可以瞄准盟友和敌人
*   只有火生物受到伤害
*   施法时施法者无法移动，每回合损失 5 点法力

正如你所看到的，有很多可能的列：它行进的距离、转弯、施法距离、类型（伤害、治疗、护甲等）、价值（+2）、目标（敌人、盟友、两者）、大小、等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T10:44:07.253

我不会使用关系数据库来存储咒语。关系数据库适用于以下大多数情况：

*   你有大量的数据，
*   数据可以在逻辑上组织为 n 元关系（表、行、列），
*   您有许多用户同时访问数据，
*   你需要[ACID 属性](http://en.wikipedia.org/wiki/ACID)，
*   等等

数据库就像卡车。他们很大。它们很难使用。它们是昂贵的。（在所需的专业知识、维护时间、运行时间效率等方面，如果不是金钱上的）他们非常擅长他们擅长的事情，但不擅长其他任何事情。当自行车足够时，不要使用卡车。

让我们来解决你的问题。不同*类型*的法术的数量肯定是有界的，在编译时就知道了，为什么不定义一个接口ISpell，让每个法术类型都是一个实现ISpell的类呢？（您也可以为公共代码定义一个抽象类）然后一个 SpellFactory 可以在程序启动时构造并提供对所有法术的访问。您真的需要独立于您的代码从外部访问这些咒语吗？

如果硬编码 SpellFactory 对您的目的不够灵活，您可以使用 xml 配置文件。`<spell type="blind" description="bla bla" picture="file.jpg"> <effects> <effect .. /> .. </effects> <range>5</range>`等等。我对电脑游戏知之甚少，但这就是他们在 sid meier 文明游戏中所做的，例如。然后，您可以让它在启动时从配置文件中读取它们，而不是在 SpellFactory 中对不同的法术进行硬编码。

据我所知，使用配置文件而不是数据库具有以下优点：

*   这是一个快速、简单、轻量级的解决方案，
*   它比让所有法术都具有相同的列集要灵活得多（其中大部分对特定法术没有意义）
*   同时拥有多个版本的一组法术要容易得多，用于实验、变化等，
*   您可以让最终用户访问和操作用于自定义游戏的 xml 文件，而无需让他们访问也包含敏感数据的数据库，
*   等等。

缺点：

*   比 xml 格式了解关系数据库的人更多，因此您可能需要几个小时来学习如何读取和操作 xml“元素”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:42:35.260

你的问题很大。这取决于很多事情，您是否要在运行时加载咒语？也许你会在游戏开始时加载它们？您将使用什么数据库？

[Amit Bhargava](https://stackoverflow.com/users/1219487/amit-bhargava)的建议很好，并且具有*用户可以理解*的优点。但是字符串非常慢，所以你可以做的是**在你的拼写表中使用标志**。然后，根据标志，您知道它是哪种类型的咒语。

# ios - NSUserDefaults 与应用程序状态的核心数据

> ID：10369845
> 
> 赞同：4
> 
> 时间：2012-04-29T05:05:12.530
> 
> 标签：ios, core-data, nsuserdefaults

我有一个使用 plists 来存储其数据的现有大型应用程序。我在用户默认值中存储指示当前选择的项目、当前用户和各种其他当前选择的应用程序状态。当数据在 plist 中时，这工作得很好。现在我正在重构以使用核心数据而不是 plist。我想将对象实例的引用存储为当前查看的对象。我知道 sqlite 和 Core Data 在数据库中有这个对象的 ID，但我不确定在用户默认值中存储什么。想到三个选项：

1.  生成我自己的顺序 ID，将其与我想记住的对象一起存储为“当前”，将该 ID 存储在用户默认值中。
2.  尝试使用 NSManagedObjectID 并存储在用户默认值中。我“认为”我可以将其转换为字符串，如下所示。这行得通吗？

    NSString *stringID = [[[managedObject objectID] URIRepresentation] absoluteString];

3.  我可以在 Core Data 中创建一个当前状态实体，它是一个单例，只有一行。该实体可能与我要跟踪的当前对象具有一对一的关系。

对于具有最佳设计考虑的方法的建议表示赞赏。

从评论中重复，方法＃2的缺点是什么？我在网上阅读了相互冲突的帐户。有人说对象 ID 在迁移中不一致，但 Apple 本身似乎建议将此作为解决方案。

在 NSManagedObjectID 的 Apple 类参考中，他们讨论了这种情况并讨论了将 ID 保存在用户默认值中。它说，“对象 ID 可以转换为 URI 表示形式，以后可以归档和重新创建以引用给定对象（使用 managedObjectIDForURIRepresentation: (NSPersistentStoreCoordinator) 和 objectWithID: (NSManagedObjectContext)。例如，在应用程序可以通过组对象的 ID 存储在用户默认值中。”

这是否意味着对象 ID URI 表示始终保持有效，即使跨迁移也是如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:20:21.990

您应该为您的对象使用您自己的唯一标识符（理想情况下，它不会仅用于此问题的目的），并使用此标识符从 Core Data 检索对象并将此标识符存储在 NSUserDefaults 中。所以，你的 1\. 解决方案是正确的，尽管它不需要是顺序的。

3\. 解决方案也可以，但不是很干净。

# android - listview 与 listactivity 有何不同

> ID：10369847
> 
> 赞同：0
> 
> 时间：2012-04-29T05:06:20.337
> 
> 标签：android, listview, android-activity

我想知道什么是 diff b/w listview 和 listactivity。根据我的理解，如果我们在屏幕中只有列表，那么最好使用 listactivity 对吗？如果我们想在列表底部添加简单按钮或在列表顶部包含搜索，那么我们应该在布局文件中使用 listview 对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:14:35.693

列表活动是默认情况下具有列表视图作为其布局的活动......您甚至可以通过使用布局充气器并添加视图来自定义 ListActivity 中的列表视图......是的......对于简单的列表视图使用列表活动......并添加此类组件在布局中使用列表视图。 [要自定义列表中的行，请使用这样的列表活动。](http://www.tutorialforandroid.com/2009/08/custom-view-in-your-listactivity-and.html)

# linq - EF 4.1，数据库优先和多对多关系 - 如何获取所有子对象？

> ID：10369855
> 
> 赞同：0
> 
> 时间：2012-04-29T05:08:51.747
> 
> 标签：linq, entity-framework-4, repository, many-to-many, database-first

假设我在形成多对多关系的数据库中有以下表。在使用 EF 4.1 的 ASP.Net MVC 项目中，我有相应的 POCO 实体和一个存储库层来访问数据库。

```
People: PersonId PK, Firsname, Lastname
FavoriteRestaurants: ID PK, PersonId, RestaurantId
Restaurants: ResaurantId PK, Name 
```

如果我有 PersonId，列出此人最喜欢的所有餐厅名称的最佳方式是什么？

或者我将如何使用存储库层根据人员的 Id 初始化此 Enumerable？

IEnumerable MyFavoriteRestaurants = ???

我知道我可以使用 foreach 在 Person.FavoriteRestaurants 集合上循环并逐个检索每个 FavoriteRestaurant.Restaurant，但我想知道是否有更优雅的方法可以在一行代码中执行此操作。

**更新**

这是我项目中 Person POCO 实体类的示例。此代码由从此处下载的 Microsoft 模板生成：

[http://visualstudiogallery.msdn.microsoft.com/23df0450-5677-4926-96cc-173d02752313/](http://visualstudiogallery.msdn.microsoft.com/23df0450-5677-4926-96cc-173d02752313/)

```
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated from a template.
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;

namespace UpDir.Domain
{
    public partial class Person : EntityBase
    {
        #region Primitive Properties

        public virtual int PersonId
        {
            get;
            set;
        }

        public virtual string Firstname
        {
            get;
            set;
        }

        public virtual string Middlename
        {
            get;
            set;
        }

        public virtual string Lastname
        {
            get;
            set;
        }

        public virtual string Nickname
        {
            get;
            set;
        }

        public virtual string EncryptedEmail
        {
            get;
            set;
        }

        public virtual string Photo
        {
            get;
            set;
        }

        public virtual short StatusId
        {
            get { return _statusId; }
            set
            {
                if (_statusId != value)
                {
                    if (Status != null && Status.StatusId != value)
                    {
                        Status = null;
                    }
                    _statusId = value;
                }
            }
        }
        private short _statusId;

        #endregion
        #region Navigation Properties

        public virtual ICollection<Member> Members
        {
            get
            {
                if (_members == null)
                {
                    var newCollection = new FixupCollection<Member>();
                    newCollection.CollectionChanged += FixupMembers;
                    _members = newCollection;
                }
                return _members;
            }
            set
            {
                if (!ReferenceEquals(_members, value))
                {
                    var previousValue = _members as FixupCollection<Member>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupMembers;
                    }
                    _members = value;
                    var newValue = value as FixupCollection<Member>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupMembers;
                    }
                }
            }
        }
        private ICollection<Member> _members;

        public virtual ICollection<Message> Messages
        {
            get
            {
                if (_messages == null)
                {
                    var newCollection = new FixupCollection<Message>();
                    newCollection.CollectionChanged += FixupMessages;
                    _messages = newCollection;
                }
                return _messages;
            }
            set
            {
                if (!ReferenceEquals(_messages, value))
                {
                    var previousValue = _messages as FixupCollection<Message>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupMessages;
                    }
                    _messages = value;
                    var newValue = value as FixupCollection<Message>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupMessages;
                    }
                }
            }
        }
        private ICollection<Message> _messages;

        public virtual ICollection<Notification> Notifications
        {
            get
            {
                if (_notifications == null)
                {
                    var newCollection = new FixupCollection<Notification>();
                    newCollection.CollectionChanged += FixupNotifications;
                    _notifications = newCollection;
                }
                return _notifications;
            }
            set
            {
                if (!ReferenceEquals(_notifications, value))
                {
                    var previousValue = _notifications as FixupCollection<Notification>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupNotifications;
                    }
                    _notifications = value;
                    var newValue = value as FixupCollection<Notification>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupNotifications;
                    }
                }
            }
        }
        private ICollection<Notification> _notifications;

        public virtual Status Status
        {
            get { return _status; }
            set
            {
                if (!ReferenceEquals(_status, value))
                {
                    var previousValue = _status;
                    _status = value;
                    FixupStatus(previousValue);
                }
            }
        }
        private Status _status;

        public virtual ICollection<UpDirEmail> FromEmails
        {
            get
            {
                if (_fromEmails == null)
                {
                    var newCollection = new FixupCollection<UpDirEmail>();
                    newCollection.CollectionChanged += FixupFromEmails;
                    _fromEmails = newCollection;
                }
                return _fromEmails;
            }
            set
            {
                if (!ReferenceEquals(_fromEmails, value))
                {
                    var previousValue = _fromEmails as FixupCollection<UpDirEmail>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupFromEmails;
                    }
                    _fromEmails = value;
                    var newValue = value as FixupCollection<UpDirEmail>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupFromEmails;
                    }
                }
            }
        }
        private ICollection<UpDirEmail> _fromEmails;

        public virtual ICollection<UpDirEmail> ToEmails
        {
            get
            {
                if (_toEmails == null)
                {
                    var newCollection = new FixupCollection<UpDirEmail>();
                    newCollection.CollectionChanged += FixupToEmails;
                    _toEmails = newCollection;
                }
                return _toEmails;
            }
            set
            {
                if (!ReferenceEquals(_toEmails, value))
                {
                    var previousValue = _toEmails as FixupCollection<UpDirEmail>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupToEmails;
                    }
                    _toEmails = value;
                    var newValue = value as FixupCollection<UpDirEmail>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupToEmails;
                    }
                }
            }
        }
        private ICollection<UpDirEmail> _toEmails;

        public virtual ICollection<UpDirEvent> UpDirEvents
        {
            get
            {
                if (_upDirEvents == null)
                {
                    var newCollection = new FixupCollection<UpDirEvent>();
                    newCollection.CollectionChanged += FixupUpDirEvents;
                    _upDirEvents = newCollection;
                }
                return _upDirEvents;
            }
            set
            {
                if (!ReferenceEquals(_upDirEvents, value))
                {
                    var previousValue = _upDirEvents as FixupCollection<UpDirEvent>;
                    if (previousValue != null)
                    {
                        previousValue.CollectionChanged -= FixupUpDirEvents;
                    }
                    _upDirEvents = value;
                    var newValue = value as FixupCollection<UpDirEvent>;
                    if (newValue != null)
                    {
                        newValue.CollectionChanged += FixupUpDirEvents;
                    }
                }
            }
        }
        private ICollection<UpDirEvent> _upDirEvents;

        #endregion
        #region Association Fixup

        private void FixupStatus(Status previousValue)
        {
            if (previousValue != null && previousValue.People.Contains(this))
            {
                previousValue.People.Remove(this);
            }

            if (Status != null)
            {
                if (!Status.People.Contains(this))
                {
                    Status.People.Add(this);
                }
                if (StatusId != Status.StatusId)
                {
                    StatusId = Status.StatusId;
                }
            }
        }

        private void FixupMembers(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (Member item in e.NewItems)
                {
                    item.Person = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (Member item in e.OldItems)
                {
                    if (ReferenceEquals(item.Person, this))
                    {
                        item.Person = null;
                    }
                }
            }
        }

        private void FixupMessages(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (Message item in e.NewItems)
                {
                    item.Person = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (Message item in e.OldItems)
                {
                    if (ReferenceEquals(item.Person, this))
                    {
                        item.Person = null;
                    }
                }
            }
        }

        private void FixupNotifications(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (Notification item in e.NewItems)
                {
                    item.Person = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (Notification item in e.OldItems)
                {
                    if (ReferenceEquals(item.Person, this))
                    {
                        item.Person = null;
                    }
                }
            }
        }

        private void FixupFromEmails(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (UpDirEmail item in e.NewItems)
                {
                    item.FromPerson = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (UpDirEmail item in e.OldItems)
                {
                    if (ReferenceEquals(item.FromPerson, this))
                    {
                        item.FromPerson = null;
                    }
                }
            }
        }

        private void FixupToEmails(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (UpDirEmail item in e.NewItems)
                {
                    item.ToPerson = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (UpDirEmail item in e.OldItems)
                {
                    if (ReferenceEquals(item.ToPerson, this))
                    {
                        item.ToPerson = null;
                    }
                }
            }
        }

        private void FixupUpDirEvents(object sender, NotifyCollectionChangedEventArgs e)
        {
            if (e.NewItems != null)
            {
                foreach (UpDirEvent item in e.NewItems)
                {
                    item.Person = this;
                }
            }

            if (e.OldItems != null)
            {
                foreach (UpDirEvent item in e.OldItems)
                {
                    if (ReferenceEquals(item.Person, this))
                    {
                        item.Person = null;
                    }
                }
            }
        }

        #endregion
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:18:03.830

您无需考虑太多，如果您以这样的正确方式定义了实体类，EF 会为您完成，

```
Public class Person{
   public int  PersonId {get;set;}
   public string Firsname{get;set;}
....
   public virtual IList<Resturent> Resturents {get;set;}
}

Public class Restaurant{
   public int  ResaurantId {get;set;}
   public string Name{get;set;}
....
   public virtual IList<Resturent> People{get;set;}

} 
```

然后，您可以简单地访问 `person.Restaurants`获得所有餐厅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:15:02.467

我终于弄明白了。这就是我的做法：

```
IEnumerable<Restaurants> MyFavoriteRestaurants = person.FavoriteRestaurants.Select(m => m.Restaurants); 
```

# jquery - 将表格单元格值复制到另一个单元格 - jQuery

> ID：10369856
> 
> 赞同：0
> 
> 时间：2012-04-29T05:08:55.270
> 
> 标签：jquery, html

我有一个简单的 HTML 表格。我想要一个按钮，允许用户将值从现有单元格复制到另一个单元格，例如单击按钮将值从第 1 行/第 3 列复制到第 3 行/第 3 列。

这是一个简单的 HTML 表格：

[http://jsfiddle.net/XF9BD/1/](http://jsfiddle.net/XF9BD/1/) 当用户单击“从最近的活动复制”的链接时，它将从同一列中的单元格 3 行中复制值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:27:51.683

如果我理解正确，那么认为最简单的方法是将所选的克隆插入`<tr>`表中，然后修改克隆。

HTML：

```
<table id="scores" width="358" border="1">
  <tbody id="recentActivities">
  <tr>
    <td width="104">Recent Activity</td>
    <td width="69">Result</td>
    <td width="163"></td>
  </tr>
  <tr>
    <td class="title">Activity 1</td>
    <td class="result">100</td>
    <td class="action_status"><button class="copy">Copy</button></td>
  </tr>
  <tr>
    <td class="title">Activity 2</td>
    <td class="result">300</td>
    <td class="action_status"><button class="copy">Copy</button></td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  </tbody>
  <tbody id="copiedActivities"></tbody>
</table> 
```

JavaScript：

```
var $copiedActivities = $("#copiedActivities");
$("button.copy").on('click', function() {
    var clone = $(this).closest("tr").clone(true).appendTo($copiedActivities);
    var titleCell = clone.find(".title");
    titleCell.text('Projection' + titleCell.text());
    clone.find(".action_status").empty().text('Copy of Recent Activity');
}); 
```

查看[您的小提琴的更新](http://jsfiddle.net/XF9BD/2/)

编辑：或者对于一些想法如何[？](http://jsfiddle.net/XF9BD/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:01:55.047

我最终在目标单元格中​​使用了以下内容，因为我需要它始终可见，并允许用户在需要时手动输入值：

```
<td class="action"><button class="copy" onclick="$('#projectmodvalue').val( $('#totalmod').val() )" value="Set Value">Copy from Recent Activity</button></td> 
```

# php - 在此使用 preg_replace？

> ID：10369859
> 
> 赞同：1
> 
> 时间：2012-04-29T05:10:12.247
> 
> 标签：php, regex

嗨，我想替换单引号内的文本

```
$key = 'ABC'; 
```

我写了这段 PHP 代码：

```
$data = '$key = \'ABC\'';
preg_match($data, '/s$key = \'(.*)\'\;/s', $security_key);
print_r($security_key); 
```

但它会发出警告，例如 Warning: preg_match() [function.preg-match]: No ending matching delimiter '>'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:29:52.060

```
$data = '$key = \'ABC\'';
$replacement = 'CBA';
$data = preg_replace("/'[^']*'/", "'$replacement'", $data);
var_dump($data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:15:52.070

[正则表达式必须以分隔符](http://php.net/manual/en/regexp.reference.delimiters.php)开头和结尾- %,/,$,#,~...

试试这个：

```
$data = '%$key = \'ABC\'%';
preg_match($data, '/s$key = \'(.*)\'\;/s', $security_key);
print_r($security_key); 
```

# java - FOP - 从数据库数据生成 PDF 时出现 OutofMemoryError

> ID：10369861
> 
> 赞同：-1
> 
> 时间：2012-04-29T05:11:03.047
> 
> 标签：java, database, pdf-generation, apache-fop

我是一个新的软件开发人员，真的需要一些帮助。我的任务是使用 FOP 从数据库中的数据生成 PDF。我编写了该程序并且它可以工作，但并非在所有情况下都可以。只要我检索的数据行数相当小，一切都可以正常工作——最多不到 10000 行。当我尝试为大于 10000 行的数据集生成报告时，出现内存不足错误（Java 堆空间）。

从数据库读取的代码：

```
while (rs.next()) {
   EMP_ID = rs.getString("EMP_ID");
   EMP_NAME = rs.getString("EMP_NAME");
   EMP_SALARY = rs.getString("EMP_SALARY");
   EMP_PROJECT = rs.getString("EMP_PROJECT");
   EMP_POSITION = rs.getString("EMP_POSITION");
   team.addMember(d.DataGetSet(EMP_ID, EMP_NAME, EMP_SALARY, EMP_PROJECT,
         EMP_POSITION));
} 
```

我将程序的内存增加到 2GB，但仍然出现错误。解决此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:41:54.437

If you are running out of memory and you don't know where to start, I suggest a divide-and-conquer approach to steer you to the right area. For example, comment out the code that creates the PDF then test again. Does it run out of memory? If so, comment out the part adding to the array (but keep the call to `d.DataGetSet`) and test again. This will hopefully let you know where to attack without having to learn how to profile Java memory (which has it's own learning curve).

If you still aren't getting anywhere, try using JVisualVM (part of the JDK). Connect it to your application as it is running and do a "heap dump". This might help you spot what's hanging on to so much memory.

Finally - are you sure you upped the memory and that took effect? Just a double-check.

# android - 位置附近的通知

> ID：10369864
> 
> 赞同：0
> 
> 时间：2012-04-29T05:11:22.410
> 
> 标签：android, gps

我想知道是否有任何方法可以在用户靠近特定位置时通知他。
当用户靠近该位置时，他的手机会收到一条通知，提醒他自己的位置。

我正在尝试以下代码，但它不起作用。

`public class NotifyuserActivity extends Activity {
LocationManager locMan;
double lat;
double lon;
NotificationManager notMan;`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    locMan=(LocationManager) getSystemService(LOCATION_SERVICE);
    locMan.requestLocationUpdates(LocationManager.GPS_PROVIDER,1000,10, mylistener);
} 
```

LocationListener mylistener=new LocationListener() {

```
 @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        lat = location.getLatitude();
        lon = location.getLongitude();
        CharSequence from = "AlarmManager - Time's up!";
        CharSequence message = "This is your alert";        
        Location tasklocation=new Location(LocationManager.GPS_PROVIDER);
        double dis1 = location.distanceTo(tasklocation);
        tasklocation.setLatitude(22.727733);
        tasklocation.setLongitude(75.886079);
        if(dis1 < 200.00)
        {

            notMan = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
            Notification n = new Notification(R.drawable.ic_launcher, "Click here for details", System.currentTimeMillis());

            Intent notificationIntent = new Intent(NotifyuserActivity.this,NotifyuserActivity.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(NotifyuserActivity.this, 0, notificationIntent, 0);

         n.setLatestEventInfo(NotifyuserActivity.this, from,message, pendingIntent);
           notMan.notify(10001, n);
           Toast.makeText(NotifyuserActivity.this,"Distance to location is: " + dis1, Toast.LENGTH_LONG).show();
        }
    }
}; 
```

`}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:41:32.597

这里位置更改代码..试试这个。

```
@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub
    if (location != null) {
        System.out.println("in onlocationchanged");
         String locationString=location.convert(location.getLatitude(),1);
         Toast.makeText(this,"locationString=="+locationString, Toast.LENGTH_LONG).show();
        double lat = location.getLatitude();
        double lng = location.getLongitude();
        String currentLocation = "The location is changed to Lat: " + lat + " Lng: " + lng;
        Toast.makeText(this,currentLocation, Toast.LENGTH_LONG).show();
        p = new GeoPoint((int) lat * 1000000, (int) lng * 1000000);

        // check in database if we have same lattitude & longitude

        MySQLiteHelper m=new MySQLiteHelper(getBaseContext());
        Log.d("Reading: ", "Reading all contacts..");
        List<LocWiseProfileBeans> LocWiseProfile= m.getAllLocWiseProfile();       

        for (LocWiseProfileBeans cn : LocWiseProfile) {
            String log = "Loc Name: "+cn.getLocname()+" ,Lattitude: " + cn.getLattitude()+ " ,Longitude: " + cn.getLongitude()+ " , Selected Profile :"+cn.getSelectedprofile();
                // Writing Contacts to log
            double distance2=00.00;

      GeoPoint storedLocation=new GeoPoint(
      (int) cn.getLattitude() * 1000000,(int) cn.getLongitude() * 1000000);    

        Location locationB = new Location("point B");  

        locationB.setLatitude((int) cn.getLattitude() * 1000000);  
        locationB.setLongitude((int) cn.getLongitude() * 1000000);  

        distance2=distFrom(lat,lng,cn.getLattitude(),cn.getLongitude());

        if(distance2>1 )
        {
            Log.d("Name: ", log);
            Toast.makeText(this, "Loc Name:"+log, Toast.LENGTH_SHORT).show();
            Toast.makeText(this,"identical", Toast.LENGTH_LONG).show();
            Toast.makeText(this,"distance2======"+distance2, Toast.LENGTH_SHORT).show();
sendnotification("Locale Notifications","You visited location " + cn.getLocname());

        } 
```

此代码用于通知用户。

```
protected void sendnotification (String title, String message) {
       String ns = Context.NOTIFICATION_SERVICE;
       NotificationManager mNotificationManager = (NotificationManager) getSystemService(ns);

       int icon = R.drawable.icon;
       CharSequence tickerText = message;
       long when = System.currentTimeMillis();

       Notification notification = new Notification(icon, tickerText, when);

       Context context = getApplicationContext();
       CharSequence contentTitle = title;
       CharSequence contentText = message;
       Intent notificationIntent = new Intent(this, GoogleMapsActivity.class);
       PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);

       notification.flags = Notification.FLAG_AUTO_CANCEL;
       notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
       mNotificationManager.notify(1, notification);
    } 
```

这是将经度和纬度转换为英里的功能。

```
public static double distFrom(double lat1, double lng1, double lat2, double lng2) { 
      double earthRadius = 3958.75; 
      double dLat = Math.toRadians(lat2-lat1); 
      double dLng = Math.toRadians(lng2-lng1); 
      double a = Math.sin(dLat/2) * Math.sin(dLat/2) + 
               Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) * 
               Math.sin(dLng/2) * Math.sin(dLng/2); 
      double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
      double dist = earthRadius * c; 

      return dist; 
    } 
```

您需要根据您的代码在需要的地方进行更改....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:45:31.980

答案是肯定的。

您可以注册一个带有一些时间或距离间隔设置的`LocationListener`to `LocationManager`，然后当位置更改时，可以将其与您设置的内容进行比较，以决定是否通知用户。

GPS消耗大量电池电量，因此您最好先使用Network Location Provider，然后在距离该位置不远时启动GPS。

* * *

正如评论所说，你应该先行动

```
tasklocation.setLatitude(22.727733);
tasklocation.setLongitude(75.886079); 
```

以上

`double dis1 = location.distanceTo(tasklocation);`

（更好的是，您可以将这些位置设置移出`onLocationChanged()`而不是硬编码纬度/经度。）

这可能无法解决您的问题，但不这样做将永远无法解决问题。所以不要留下这样的错误。

* * *

然后，我应该说这段代码对我有用（在我的模拟器中），我看不出你给出的其他错误可能会让你“不工作”。

您可以检查您的权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

或者可以显示`Toast`结果或`Logcat`输出。

毕竟，有关您的“不工作”的更多详细信息。

# sdl - SDL_SetVideoMode 忽略标志 & SDL_Flip 很慢

> ID：10369866
> 
> 赞同：0
> 
> 时间：2012-04-29T05:11:55.937
> 
> 标签：sdl, sdl-1.2

我正在初始化

```
SDL_Init(SDL_INIT_VIDEO);
screen = SDL_SetVideoMode(800, 600, 32, SDL_SWSURFACE|SDL_DOUBLEBUF); 
```

然后在调用睡眠之间循环调用，只是

```
SDL_LockSurface(screen);
// Will eventually twiddle pixels here...but not yet
SDL_UnlockSurface(screen);
SDL_Flip(screen); 
```

并且调用翻转需要不同的时间，但大约 10 毫秒，这是很多白费。

所以这让我想知道我是否正在导致从视频内存复制到系统内存或其他东西，我应该以不同的方式创建表面。但是，另外，无论我传递给什么标志，`screen->flags`它总是等于`SDL_ASYNCBLIT`并且没有设置其他位`SDL_SetVideoMode`。所以无论如何我都无法制作任何其他类型的表面。

我是否应该创建另一个屏幕外表面，渲染到该表面，然后将其传送到屏幕上？我究竟做错了什么？

编辑：删除 SDL_Lock 和 SDL_Unlock 对并不能加快速度。SDL_Flip 很慢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:42:49.260

我使用 Win7、Codeblocks/MingW、SDL 1.2.14。格鲁姆德里格 说：

> 为了有一天可能会看到这个问题的两三个人，我认为 SDL_Flip 需要这么长时间的原因是它等待 vsync，因此调用 SDL_Flip 的繁忙循环必然会受到 vsync 速率的限制。
> 
> 如果这是正确的，那么 SDL_Flip 需要这么长时间的事实并不是一个实际问题，因为如果我正在努力渲染事物，那么等待 vsync 的时间就会更少。

不，有什么不对劲。我的程序直到最近才运行良好，今天我自己花了一段时间寻找自己的瓶颈的原因，结果是 SDL_Flip() 和你的一样，这让我通过谷歌搜索找到了你的问题。有趣的是，在我的旧版 WinXP 单核上性能更好，所以我猜测问题是由友好的 Win7 自动更新引起的。也许微软无意中对 GDI 进行了去优化！

无论如何，SDL_Flip 不应该花这么长时间来解决自己，如果有人想知道，我在 SDL_Flip() 上方放置了一个 Uint32 SDL_Getticks() 计时器，如果超过 5 毫秒，则输出下面的长度。结果是不时出现像 27、59 和 88 毫秒这样的数字，这并不好。当然，无论我使用 SWSURFACE 还是 HWSURFACE 作为 SetVideoMode 的标志，问题都是一样的。

在我在 SDL 网站上发表评论之前，我可能会尝试使用 SDL 1.2.15 进行重建，尽管这可能需要重建 SpriG，所以我并不着急。但总的来说，我坚持我所说的：很可能，这是 Win7 的东西，如果那是你的操作系统的话。

附录 5:17 PM EST：我刚刚编译并运行了一个使用 SDL 1.2.15 的较小的、不相关的项目，但问题是一样的：正常的平滑运动，然后偶尔出现抖动。仅在 SDL_Flip() 花费超过 5 毫秒时进行测试，输出包括从 30 到超过 60 毫秒的值，大约每两秒发生一次。

附录 5-8-12：5-4-12 有大雷雨，我不得不关闭并拔下电脑，结果第二天 SDL_Flip() 总是不到 5ms，所以现在问题解决了.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:42:23.283

为了有一天可能会看到这个问题的两三个人，我认为 SDL_Flip 需要这么长时间的原因是它等待 vsync，因此调用 SDL_Flip 的繁忙循环必然会受到 vsync 速率的限制。

如果这是正确的，那么 SDL_Flip 需要这么长时间的事实并不是一个实际问题，因为如果我正在努力渲染事物，那么等待 vsync 的时间就会更少。

# java - 为什么这里会出现 javax.naming.NamingException？

> ID：10369867
> 
> 赞同：7
> 
> 时间：2012-04-29T05:12:03.490
> 
> 标签：java, jdbc, naming

当我运行以下命令时：

```
package NonServletFiles;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.sql.DataSource;
import javax.naming.*;

public class GetTagsFromDatabase {

public GetTagsFromDatabase() {

}

public String[] getTags() {

    String tags[] = null;
    try {
        Context context = new InitialContext();
        DataSource ds = (DataSource)context.lookup("java:comp/env/jdbc/photog"); // <<----- line 23
        Connection connection = ds.getConnection();
        String sqlQuery = "select NAMEOFTHETAG from tagcollection";
        PreparedStatement statement = connection.prepareStatement(sqlQuery);
        ResultSet set = statement.executeQuery();

        int i = 0;
        while(set.next()) {
            tags[i] = set.getString("NameOfTheTag");
            System.out.println(tags[i]);
            i++;
        }
    }catch(Exception exc) {
        exc.printStackTrace();
    }

    return tags;
}

public static void main(String args[]) {
    new GetTagsFromDatabase().getTags(); // <<----- line 43
}
} 
```

我得到以下例外：

```
javax.naming.NamingException: Lookup failed for 'java:comp/env/jdbc/photog' in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory, java.naming.factory.url.pkgs=com.sun.enterprise.naming, java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl} [Root exception is javax.naming.NamingException: Invocation exception: Got null ComponentInvocation ]
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:518)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:455)
at javax.naming.InitialContext.lookup(InitialContext.java:411)
at NonServletFiles.GetTagsFromDatabase.getTags(GetTagsFromDatabase.java:23)
at NonServletFiles.GetTagsFromDatabase.main(GetTagsFromDatabase.java:43)

Caused by: javax.naming.NamingException: Invocation exception: Got null ComponentInvocation 
at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.getComponentId(GlassfishNamingManagerImpl.java:873)
at com.sun.enterprise.naming.impl.GlassfishNamingManagerImpl.lookup(GlassfishNamingManagerImpl.java:742)
at com.sun.enterprise.naming.impl.JavaURLContext.lookup(JavaURLContext.java:172)
at com.sun.enterprise.naming.impl.SerialContext.lookup(SerialContext.java:498)
... 4 more 
```

我不知道此异常的原因，所有其他需要使用 url 连接到数据库的 servlet 都可以`java:comp/env/jdbc/photog`正常工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T05:29:05.740

stacktrace 提示您正在使用 Glassfish。拆下`java:comp/env/`零件。它已经是默认的 JNDI 上下文根。只有在 Tomcat 中，您才需要明确指定它。此外，您应该在 webapp 上下文中调用它，而不是作为带有`main()`.

* * *

**与具体问题无关**，你真的需要`DataSource` *每次*都得到吗？我会创建一个助手类，它只在 webapp 的启动或静态初始化程序中获取一次。它的应用程序广泛且线程安全。每次需要触发 SQL 查询时，只`Connection`需要获取（并关闭！您没有关闭它，因此您正在泄漏数据库资源）。

# objective-c - Objective-c，将 NSURLConnection 结果传递给视图控制器

> ID：10369868
> 
> 赞同：3
> 
> 时间：2012-04-29T05:12:10.447
> 
> 标签：objective-c, ios, design-patterns, nsurlconnection

长期读者，第一次在这里发布海报。

我正在创建一个测试应用程序，它创建一个 NSURLConnection，然后在 UILabel 上显示结果。

我目前正在使用通知中心观察者，它会从 connectionDidFinishLoading 中触发通知以等待连接成功完成，然后再查找结果。

但是，我正在努力概念化的是存储响应数据的位置，以便我可以从我的视图控制器访问它并将结果发布到 UILabel。（或者从我的连接类的实例以外的任何地方，就此而言。）

我不想从 connectionDidFinishLoading 直接发布到 UILabel。我需要一种方法来决定稍后我将如何处理响应 - 所以我的连接类保持通用化。

我需要一种更好的方法将响应数据保存在某处，以便在连接类的实例终止后可以在其中引用它。

理想情况下，它应该在某个地方我可以打开连接类的多个实例，并在需要时依次访问每个响应。这消除了在我的视图控制器或其他更全局的地方创建一个变量并将响应转储到它的可能性。

任何关于在这里可以/应该使用什么设计模式的想法都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T08:12:06.940

我对您的建议是：

1.  做一个单例类。我将有一个属性 NSDictionary * info 或 NSArray *infoList; 您可以从应用程序的任何位置访问相同的数据。更新属性，发布通知，从 viewController 访问属性。
2.  将信息存储到 plist/文件中。序列化信息，或保存纯流。无论您喜欢什么。因此，在您完成对文件的写入后，发布通知，从应用程序内的任何位置读取文件。

在这两种情况下，如果您想要多个连接，我建议您使用工厂设计模式。

# assembly - x86 程序集 (masm32) - 内置宏的替代品

> ID：10369871
> 
> 赞同：1
> 
> 时间：2012-04-29T05:12:53.100
> 
> 标签：assembly, macros, x86, masm32

我一直想知道在文件开头使用所有这些*包含*语句是否只会降低程序的运行速度，因为它必须找到文件，打开它，初始化代码，然后运行它。我正在使用所有这些：

```
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib 
```

所以我一直在想，既然宏本质上是调用一个代码函数来节省你自己编写的，我想使用实际的代码，以节省我的程序必须在开始时查找、初始化和调用所有这些文件我的程序。

实际问题：

既然我已经告诉你我在想什么，我可以告诉你我的问题。有人可以为我提供*StdOut*、*invoke*和*ExitProcess*宏的实际代码，因为它们是我大部分时间使用的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:37:58.957

.inc 文件是汇编程序包含文件，只会减慢编译速度。通常，只有您使用的宏才会以任何方式影响您的代码。

.lib 文件包含许多小块代码（`.obj`文件），只有包含您使用的函数的块才会链接到您的程序中。因此，在大多数情况下，担心它没有什么意义。

仅供参考，[MASM32](http://www.masm32.com/)安装程序安装*并编译*库源代码。查看根目录下的`include`and目录（可能是）。`m32lib``C:\MASM32`

请注意，您可能无法简单地从源文件中复制代码，但您可以了解代码的作用，然后自己重​​新实现功能，这不会很难，因为它们都很小。

# javascript - 为什么 Brazen Careerist 中的图标会在 Internet Explorer 中触发 SCRIPT1014 错误？

> ID：10369873
> 
> 赞同：1
> 
> 时间：2012-04-29T05:13:18.203
> 
> 标签：javascript, internet-explorer, html-validation

我在我的网页 (www.ctrlaltm.com) 上将此链接添加到我在 Brazeen Careerist 上的个人资料。每当我在任何版本的 IE 中加载此页面时，都会出现以下错误：

SCRIPT1014：无效字符 widget_tracking.1.js，第 6 行字符 39

该图标的代码来自 Brazen Careerist (http://www.brazencareerist.com/help/badges/icon)，如下所示：

```
<a id="sicon-bclink" name="My Brazen Careerist Social Resume" href="http://www.brazencareerist.com/profile/maggiet?utm_source=22088&utm_medium=single&utm_campaign=icon"><img border="0" alt="My Brazen Careerist Social Resume" src="http://static.brazencareerist.com/v6/ui_widget/icons/icon_bc.png"/></a>
<script type="text/javascript">var bctrk_cat = "icon";var bctrk_act = "SingleView";var bctrk_uid = "22088";</script> 
<script src="http://static.brazencareerist.com/v6/ui_widget/widget_tracking.1.js" type="text/javascript"></script> 
```

我在 IE9 的开发人员工具中检查了调试器，但是当我检查错误发生的位置时，它只说问题出在第 6 行，字符 39 指向左引号。这对我来说没有任何意义。我能想到的唯一潜在问题是当我将`&`& amp ; （仅在此处添加空格以显示字符实体）在原始链接中以在 HTML 4.01 Strict 下进行验证它以某种方式弄乱了 JS，但我不确定为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:29:18.483

这不是 Internet Explorer 的问题，也不是 Internet Explorer 独有的*问题*。在 Chrome 中打开相同的页面会在我们的控制台中显示以下内容：

```
Uncaught SyntaxError: Unexpected token ILLEGAL ... widget_tracking.1.js:6
```

您在 IE 控制台中也收到相同的消息。当我们查看本节时，我们发现双引号前有斜线，这是错误的。

```
var bcPageTracker = _gat._getTracker(\"UA-3762378-1\"); 
```

改成：

```
var bcPageTracker = _gat._getTracker("UA-3762378-1"); 
```

当然，一旦你解决了这个问题，你将遇到下一个错误：`SCRIPT5009: '_gat' is undefined`. 这是因为您试图将两个脚本标签合并到一个 .js 文件中。我的建议是让您再次下载您的跟踪代码，将其粘贴到您网站的页脚中，并且不要再对其进行篡改。

这就是您应该使用此代码的方式：

```
 <!-- Google Analytics Code -->
  <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
    var pageTracker = _gat._getTracker("UA-3762378-1");
    pageTracker._initData();
    pageTracker._trackPageview();
  </script>
  <!-- End Google Analytics Code -->
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:24:49.477

这是第 6 行，如果你仔细看，你会看到无效字符
`var bcPageTracker = _gat._getTracker(\"UA-3762378-1\");`

# ruby - ruby 模块 self.included 和 self.extended 行为记录在哪里？

> ID：10369876
> 
> 赞同：11
> 
> 时间：2012-04-29T05:13:47.810
> 
> 标签：ruby, mixins

我正在查看[ruby​​ mixin](http://juixe.com/techknow/index.php/2006/06/15/mixins-in-ruby/)博客文章，它说当一个模块包含在一个类中时，它的`self.included()`方法被调用。

我的问题是，这种行为在哪里正式记录？我似乎无法在 ruby​​-docs.org 网站或镐上找到它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T06:19:47.610

While it's not on [Ruby Doc](http://ruby-doc.org) for some reason, `included` actually is documented. Running `ri Module.included` in the terminal provides this:

> ```
> included( othermod ) 
> ```
> 
> * * *
> 
> Callback invoked whenever the receiver is included in another module or class. This should be used in preference to `Module.append_features` if your code wants to perform some action when a module is included in another.
> 
> ```
> module A
>   def A.included(mod)
>     puts "#{self} included in #{mod}"
>   end
> end
> module Enumerable
>   include A
> end 
> ```

This documentation can be found in the [Ruby source in `object.c`](https://github.com/ruby/ruby/blob/v1_9_3_194/object.c#L719). Sadly, `Module.extended` is not documented.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:26:03.177

我怀疑它不在 RubyDoc 网站上，因为它是一个私有方法，并且私有方法当前没有显示。

人们意识到了这个问题，但他们还没有弄清楚如何处理私有方法，即使它们不是实现细节。

我在[http://bugs.ruby-lang.org/issues/6381创建了一个错误报告](http://bugs.ruby-lang.org/issues/6381)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:39:16.160

两者都记录在 pickaxe 第二版的第 556 页（涵盖 Ruby 1.8）。那里的文档看起来就像`ri Module.included`Andrew Marshall 发布的结果，所以我怀疑这本书的部分是自动生成的。如果它已从更高版本的 pickaxe 中删除，则可能是由于相同的错误导致它无法显示在[ruby​​-doc.org](http://www.ruby-doc.org/)上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T22:31:26.530

似乎只记录了公共方法

# .net - 如果使用 RemoteWebDriver，如何访问 HtmlUnit 特定功能？

> ID：10369879
> 
> 赞同：1
> 
> 时间：2012-04-29T05:14:18.983
> 
> 标签：.net, selenium, webdriver, htmlunit

正[如此链接](https://stackoverflow.com/questions/5094605/is-there-an-htmlunitdriver-for-net)中提到的，我们必须使用 RemoteWebDriver 才能在 .Net 环境中使用 HtmlUnitDriver。使用 RemoteWebDriver 我只能使用 IWebDriver 特定的功能。但我想访问由 HtmlUnitDriver 实现的一些功能（即 getWebClient()），以便能够使用 HtmlUnit 的所有高级功能。我怎样才能做到这一点？

具体来说，我想要实现的是在 HtmlUnitDriver 上设置 HtmlUnit 的区域设置，这需要我在 HtmlUnit 中设置 HTTP 标头，但 RemoteWebDriver 不允许我这样做。有任何想法吗？

# prolog - 在 swpl 中应用约束

> ID：10369882
> 
> 赞同：0
> 
> 时间：2012-04-29T05:15:00.590
> 
> 标签：prolog

我需要在 SWI-Prolog 中编写自己的 all_different 版本。我写了一个谓词，它在我提供的输入上返回与 all_diff 相同的真/假，但是我在网上找不到一种方法来实际应用这个谓词作为约束。这是我的 all_diff 版本.

```
distinct([]).
distinct([X|Xs]) :-
  different(X,Xs),
  distinct(Xs).

different(_,[]).
different(X,[Y|Ys]) :-
  (nonvar(X), nonvar(Y) -> X \= Y
   ;
   true
  ),
  different(X,Ys). 
```

我需要将它应用于整数列表和_。是的，这就是数独程序项目。对不起，如果这是一个愚蠢的问题，但我对 Prolog 还是很陌生，我发现很难在网上找到足够的文档。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T07:54:32.460

你写了一个谓词而不是一个约束。简而言之，谓词要么成功，要么失败，而约束仅表示对可能值的限制。约束的求解器正在记录约束，该求解器使用一些黑魔法来简化它们并指示所涉及变量的可能值范围。因此，您不能将谓词用作约束。

您可以重新考虑原始问题并检查是否需要约束，或者按如下方式修改上面的实现（我使用的是 SWI-Prolog）：

```
different(X,[Y|Ys]) :-
  X#\= Y,
  different(X,Ys). 
```

`#\=`表示不等式表达式是一个约束。

您可能想查看[http://www.swi-prolog.org/man/clpfd.html](http://www.swi-prolog.org/man/clpfd.html)`all_different/1` ，特别是和之间的区别`all_distinct/1`。

# ruby-on-rails - formtastic-bootstrap 安装

> ID：10369883
> 
> 赞同：4
> 
> 时间：2012-04-29T05:15:16.190
> 
> 标签：ruby-on-rails, twitter-bootstrap, formtastic

我刚刚为 Ruby on Rails 和 Twitter Bootstrap 安装了 formatastic-bootstrap gem。根据自述文件，我添加 `*= require formtastic-bootstrap`到 application.css，创建了一个名为`config/initializers/formtastic.rb`其内容的文件`Formtastic::Helpers::FormHelper.builder = FormtasticBootstrap::FormBuilder`，然后运行 ​​bundle install。当我现在尝试启动我的 rails 服务器时，我收到以下错误。

> /Users/wrightgd/.rvm/gems/ruby-1.9.3-p0/gems/formtastic-bootstrap-1.1.1/lib/formtastic-bootstrap/helpers/buttons_helper.rb:5:in `': 无法加载此类文件--formtastic/helpers/buttons_helper (LoadError)

我在这里做错了什么？预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T07:05:29.553

根据[这个](https://stackoverflow.com/questions/10098801/formastic-bootstrap-rails-error-no-such-file-to-load-buttonshelpers)最新版本的formtastic与formtastic-bootstrap不兼容。尝试旧版本`gem 'formtastic', " ~> 2.1.1"`

# android - android模拟器不显示显示。.

> ID：10369885
> 
> 赞同：0
> 
> 时间：2012-04-29T05:15:42.150
> 
> 标签：android

在 AVD 管理器中，如果我单击启动 AVD，则会显示启动状态并在任务管理器中创建模拟器进程。但 AVD 不显示。eclipse也有同样的问题。Eclipse 控制台显示：

[2012-04-29 10:33:53 - HelloAndroid] 使用虚拟设备“DeployAVD”启动新模拟器

之后什么也没有发生。这里有什么问题？？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T06:09:13.463

确保你有足够的内存..

你在 AVD 管理器中创建了一个虚拟设备吗？尝试创建一个新的...

并且通常 avd 需要相当长的时间来加载....

# c - Storing user data for a C-based Native Client instance

> ID：10369895
> 
> 赞同：0
> 
> 时间：2012-04-29T05:18:39.363
> 
> 标签：c, google-chrome, google-nativeclient

I have been working on C-based Native Client module for Google Chrome. Many of the module functions that are called by the NaCl system have a parameter of PP_Instance which uniquely identifies the module instance.

My question: Is there any way to associate user data with this instance handle?

The C API specifies that it is an opaque handle. It provides no functions for linking user data to the handle. Right now, I have to use a bunch of global variables within the module to share state among the functions. It doesn't feel like the right solution. I'm not sure if more than one instance will ever share the process space but I'm not making any assumptions here.

I suppose I could implement some sort of look up table to map instances to unique contexts that happen to live in the global scope. But that also seems like it should be unnecessary for a C-based API. The C++ API avoids this by virtue of its classes.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:06:05.523

PP_Instance should be used as a key to lookup state / object associated with the plugin instance. More than one plugin instance may be instantiated in a module as per the API, when, for example, multiple embed tags are present in the containing frame. Currently the NaCl implementation of Pepper does not do this -- instead, multiple processes each containing a single module each instantiating a single pepper plugin instance is created. However, this is an implementation detail (or maybe bug?) that is subject to change, and it would be better to defensively program and be able to handle multiple DidCreate events.

Of course, if your NaCl module is guaranteed to never be used by anyone else and you know you won't ever have two embeds of the same module, then it *might* be okay to assume singleton instance and use global state, but doing things the "right" way isn't that hard, so why not?

See [native-client-discuss thread](http://groups.google.com/group/native-client-discuss/browse_thread/thread/ef485783700009e1) for more discussion on this topic.

# ruby-on-rails-3 - 具有祖先问题的多态注释

> ID：10369896
> 
> 赞同：1
> 
> 时间：2012-04-29T05:19:24.863
> 
> 标签：ruby-on-rails-3, polymorphic-associations, ancestry

我正在尝试将两个 Railscast 组合在一起：[http](http://railscasts.com/episodes/262-trees-with-ancestry) ://railscasts.com/episodes/262-trees-with-ancestry和[http://railscasts.com/episodes/154-polymorphic-association](http://railscasts.com/episodes/154-polymorphic-association)在我的应用程序上。

我的模型：

```
class Location < ActiveRecord::Base
  has_many :comments, :as => :commentable, :dependent => :destroy
end

class Comment < ActiveRecord::Base
  belongs_to :commentable, :polymorphic => true
end 
```

我的控制器：

```
class LocationsController < ApplicationController
      def show
        @location = Location.find(params[:id])
        @comments = @location.comments.arrange(:order => :created_at)

        respond_to do |format|
          format.html # show.html.erb
          format.json { render json: @location }
        end
      end
end

class CommentsController < InheritedResources::Base

  def index
    @commentable = find_commentable
    @comments = @commentable.comments.where(:company_id => session[:company_id])
  end

  def create
    @commentable = find_commentable
    @comment = @commentable.comments.build(params[:comment])
    @comment.user_id = session[:user_id]
    @comment.company_id = session[:company_id]
    if @comment.save
      flash[:notice] = "Successfully created comment."
      redirect_to :id => nil
    else
      render :action => 'new'
    end
  end

  private

  def find_commentable
    params.each do |name, value|
      if name =~ /(.+)_id$/
        return $1.classify.constantize.find(value)
      end
    end
    nil
  end

end 
```

在我的位置显示视图中，我有以下代码：

```
<%= render @comments %>
<%= render "comments/form" %> 
```

哪个输出正确。我有一个`_comment.html.erb`呈现每个评论等的`_form.html.erb`文件和一个为新评论创建表单的文件。

我遇到的问题是，当我尝试时，`<%= nested_comments @comments %>`我得到了`undefined method 'arrange'`.

我做了一些谷歌搜索，常见的解决方案是`subtree`在安排之前添加，但这也会引发和未定义的错误。我猜多态关联是这里的问题，但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T03:20:37.547

愚蠢的错误......忘记添加祖先宝石并需要我认为我已经完成的迁移。我检查的最后一个地方是我的模型，我最终发现了我的错误。

# java - Java：在网格上填充矩形

> ID：10369899
> 
> 赞同：5
> 
> 时间：2012-04-29T05:20:35.780
> 
> 标签：java

我想首先说这是一项任务。我不想把答案勺喂给我，但我想知道是什么导致了我的问题。

我目前正在实施康威的生命游戏。单击单元格应更改颜色，以表示该单元格正在切换到活动状态。如果再次单击，它应该返回默认颜色。

当我单击窗口中的任意位置时，程序会在第 56 行抛出空指针异常。在最后一天左右一直坚持这一点，因此感谢您的帮助。谢谢！

继承人的代码：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;

public class VisibleGrid extends JPanel implements MouseListener, KeyListener{ 

  CellGrid cellGrid;
  Graphics rect;

  public VisibleGrid(){
    addMouseListener(this);
    cellGrid = new CellGrid();
  }

  //Draw the grid of cells, 7px wide, 75 times to create 75x75 grid
  public void paint(Graphics g){
    for(int i=0; i<525;i=i+7){
      for(int j = 0; j<525; j=j+7){
        g.drawRect(i ,j,7,7);       
      }
    }   
  }

  //auxillary method called to fill in rectangles
  public void paint(Graphics g, int x, int y){
    g.fillRect(x, y, 7, 7);
    repaint();

  }

  //main method, adds this JPanel to a JFrame and sets up the GUI  
  public static void main(String[] args){
    JFrame j = new JFrame("Conway's Game of Life");
    j.setLayout(new BorderLayout());
    j.add(new VisibleGrid(), BorderLayout.CENTER);
    JTextArea info = new JTextArea("Press S to Start, E to End");
    info.setEditable(false);
    j.add(info, BorderLayout.SOUTH);
    j.setSize(530,565);
    j.setVisible(true);
  }

  //these methods are to satisfy the compiler/interface
  //Begin Mouse Events
  public void mouseExited(MouseEvent e){}
  public void mouseEntered(MouseEvent e){}
  public void mouseReleased(MouseEvent e){}
  public void mousePressed(MouseEvent e){}
  public void mouseClicked(MouseEvent e){
    //fill the selected rectangle
    rect.fillRect(e.getX(), e.getY(), 7,7); 
    repaint();

    //set the corresponding cell in the grid to alive
    int row = e.getY() /7;
    int column = e.getX() /7;
     cellGrid.getCell(row, column).setAlive(true);
  } 
  //End Mouse Events

//These methods are to satisfy the compiler/interface
//Begin KeyEvents
  public void keyReleased(KeyEvent e){}
  public void keyPressed(KeyEvent e){}
  public void keyTyped(KeyEvent e){}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T08:53:55.587

这里的问题是您的`rect` 字段从未设置为任何内容，因此它保持为`null`. 调用`rect.drawRect`将导致您看到的 NullPointerException。

如果我没记错的话，Swing`Graphics`对象并不真正喜欢你在它们上绘画，因为它们并不期望你在做任何绘画。因此，我建议不要将`Graphics`您在调用期间获得的对象存储`paint()`在诸如`rect`. 如果你想重绘窗口的一部分，最好告诉 Swing 窗口的哪一部分需要重绘，然后让它调用你的`paint()`方法。

在您的`mouseClicked()`方法中，我删除了对的调用`rect.fillRect()`并将调用移至`repaint()`方法的末尾。我还修改了`paint()`方法，如果单元格是活动的，则绘制一个填充的矩形，否则绘制一个未填充的矩形。完成此操作后，您的代码似乎可以工作，因为我可以单击一些单元格，它们会变黑。

我有一些改进您的代码的建议。我将把最后两个作为练习留给你：

*   我建议将行添加`j.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);`到`main()`. 此行使应用程序在您关闭窗口时正确退出。
*   目前，每次单个单元格更改时，您的代码都会重新绘制整个 75 × 75 网格。应该可以更改您的代码，以便它仅重新绘制更改的单元格。您可以[将 a 传递`Rectangle`给 repaint() 方法](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#repaint%28java.awt.Rectangle%29)，该方法告诉 Swing '只有我的组件的这一部分需要重新绘制'。在该`paint`方法中，您可以使用[类](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#getClipBounds%28%29)[的`getClipBounds()`方法`Graphics`](http://docs.oracle.com/javase/6/docs/api/java/awt/Graphics.html#getClipBounds%28%29)获取此矩形，并使用它来确定要重新绘制哪个或哪些单元格。
*   `drawRect`仅绘制矩形的轮廓。如果一个单元格死亡，您的`paint`方法不会从网格中清除现有的黑色矩形。您可以通过将死细胞绘制为顶部带有黑色轮廓矩形的白色填充矩形来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T05:37:20.690

您确定`CellGrid`对象已被单元格填充吗？我不是 Java 专家，但我没有在你的代码中看到这个初始化......

# javascript - 使用 JavaScript 打开记录集时出现 IE8 ADO 警告

> ID：10369900
> 
> 赞同：2
> 
> 时间：2012-04-29T05:20:59.877
> 
> 标签：javascript, sql, database, internet-explorer-8, ado

我有一些使用 javascript 运行 sql 查询等的 HTML 页面。这些 html 文件是从网络上的共享驱动器访问的。这在 IE6 中完美运行。我的工作场所正在更新到 IE8，我现在收到以下警告：

“此网站使用的数据提供者可能不安全。如果您信任该网站，请单击确定，否则单击取消。”

这很烦人，因为每次 sql 交互都会导致此警告。

我花了很多时间研究，解决方案似乎是我需要将该站点添加到我的受信任站点列表中。但是，由于组策略禁止访问 IE 设置，我无法这样做，而且我的 IT 部门表示他们不会更改受信任的站点列表。

还有其他选择吗？如果我能以某种方式获得受信任的证书会有所帮助吗？我还研究了其他方法来尝试在没有 javascript 和没有 Web 服务器的情况下运行 sql，但我没有太多运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:11:55.040

您收到跨域警报是因为您在不同的服务器上访问数据。您可以将它们放在同一台服务器上，这应该可以解决您的问题。

无论如何，我的意思是真诚的，你需要与你的 IT 部门一起起床，并有一点心连心；他们会对你保持警惕，并且很可能不屑一顾……不要让他们劝阻你。要有礼貌，但要固执。如果你真的想成为一个混蛋，当他们高高在上时告诉你不，你应该质疑他们的专业知识......尤其是在用户代理方面。如果他们在 2012 年从 ie6 转换......他们无法描述可以接受的情况。我假设您的 Intranet 是专门为 ie6 构建的，这将是他们的主要借口.....老兄 ie7 于 2007 年问世。他们的借口已有 5 年历史。此外....它仍然是弱酱。

如果您在安装中添加镀铬框架，您和您的所有同事都可以享受镀铬。查一下。哇，你的 IT 部门。

最后....您是不允许选择浏览器的开发人员，而他们授予您访问权限的浏览器甚至没有完全功能？a) 退出 b) 退出 c) 退出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T07:35:50.527

[阿尔伯特](https://stackoverflow.com/users/401672/albert)已经和你谈过了（*以及他是多么正确*）。否则，解决方案可能是在客户端和数据库之间放置一个通过服务器（在您的网络中的某处），例如使用带有 odbc 库（如[node-tds](http://cretz.github.com/node-tds/)或[tedious](http://pekim.github.com/tedious/) ）的[node.js。](http://nodejs.org/)

# java - 线程未运行

> ID：10369901
> 
> 赞同：-2
> 
> 时间：2012-04-29T05:21:07.677
> 
> 标签：java, multithreading

我有一个实现可运行的java程序。在正文中，我有`Thread animator = new Thread();`then`animator.start();`问题是`run()`我的程序的方法没有执行。**我错过了什么**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:44:36.510

正如你所说的实现可运行的java程序。

在你写的那个类（名字说动画师）身上

```
Thread animator = new Thread();
animator.start(); 
```

如果我没有错

通过可运行的类实例，我认为它会`this`在创建线程时

```
Thread animator = new Thread(this);
animator.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:54:14.587

你可以这样试试

```
public class BackgroundActivity {

/**
 * Attempts to execute the user activity.
 * 
 * @return The thread on which the operations are executed.
 */
public Thread doWork() {
    final Runnable runnable = new Runnable() {
        public void run() {
            System.out.println("Background Task here");
        }
    };

    // run on background thread.
    return performOnBackgroundThread(runnable);
}

/**
 * Executes your requests on a separate thread.
 * 
 * @param runnable
 *            The runnable instance containing mOperations to be executed.
 */
private Thread performOnBackgroundThread(final Runnable runnable) {
    final Thread t = new Thread() {
        @Override
        public void run() {
            try {
                runnable.run();
            } finally {
            }
        }
    };
    t.start();
    return t;
} 
```

}

最后是 main 方法中的 doWork() 方法

```
 /**
 * @param args
 */
public static void main(String[] args) {
    BackgroundActivity ba = new BackgroundActivity();
    Thread thread = ba.doWork();

    //You  can manages thread here
} 
```

希望，它会帮助你。

# r - 找到属于每个区间的向量值

> ID：10369903
> 
> 赞同：2
> 
> 时间：2012-04-29T05:21:38.347
> 
> 标签：r

我在 R 中有两个长度不同的向量，我可以组合这两个向量。我想找到属于每个区间的向量值：

```
x = c(1, 2, 3.5, 4, 6, 7.5, 8, 9, 10, 11.5, 12) 
y = c(2.5, 6.5) 

w = sort(c(x, y)) 
```

我想找到小于 2.5 的向量值 x 和向量值 x 属于区间 (2.5, 6.5) 和向量值 x 大于 6.5？

实际上，向量 y 的值在我的算法的每次迭代中都会发生变化，例如，我可能有长度为 4 的向量 y，那么如何在每次迭代中找到向量值属于每个区间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T06:27:47.247

尝试：

```
> split(x, findInterval(x, y))
$`0`
[1] 1 2

$`1`
[1] 3.5 4.0 6.0

$`2`
[1]  7.5  8.0  9.0 10.0 11.5 12.0 
```

这是我们改变时会发生的事情`y`

```
> y = c(2.5, 6.5, 10.5)
> split(x, findInterval(x, y))
$`0`
[1] 1 2

$`1`
[1] 3.5 4.0 6.0

$`2`
[1]  7.5  8.0  9.0 10.0

$`3`
[1] 11.5 12.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T10:41:56.843

使用函数`cut()`将向量划分为区间：

```
cut(x, breaks=c(-Inf, y, Inf))

 [1] (-Inf,2.5] (-Inf,2.5] (2.5,6.5]  (2.5,6.5]  (2.5,6.5]  (6.5, Inf] (6.5, Inf] (6.5, Inf] (6.5, Inf] (6.5, Inf] (6.5, Inf]
Levels: (-Inf,2.5] (2.5,6.5] (6.5, Inf] 
```

# firefox - 有什么方法可以自定义 Chrome 或 Firefox 快速拨号拇指？

> ID：10369905
> 
> 赞同：9
> 
> 时间：2012-04-29T05:22:10.523
> 
> 标签：firefox, google-chrome, safari, opera, preview

对于一个有趣的项目，我一直在一个网站上实现一个小型缩略图页面，该页面为新标签页上的小型站点预览提供了一个特别适合的视图。最终目标是在用户需要访问网站之前向他们展示相关信息。（例如：一个经常访问的天气网站，有一个显示今天天气的缩略图页面，以便用户一目了然地看到相关信息）。

* * *

Opera 这是通过检测

```
X-Purpose: preview 
```

同样，Safari 使用相同的标题，但需要额外的 JS 来保持一致的缩略图。

```
//On primary page
if (window.navigator.loadPurpose === 'preview') { /* go to thumbnail page */ }

//On thumbnail page
if (window.navigator.loadPurpose !== 'preview') { /* return to main page */ } 
```

* * *

我很好奇是否可以在 Chrome 或 Firefox 中复制这种效果（Aurora 版本中提供的新快速拨号）？

**注意：**大约 2 个版本之前的 Chrome 中的`X-Purpose: preview`标头是一个错误，它本来就是为了`X-Purpose: instant`这个目的而不是为了这个目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T10:17:03.220

据我所知，Chrome 和 Firefox 快速拨号缩略图仅在您访问页面时才会填充 - 即它们取自正常浏览上下文，带有正常标题，而不是独立查询。

您可以通过多种方式对此进行测试——我没有花很长时间测试它，而且您可能拥有与我不同的 Firefox/Chrome 版本，因此您可能会看到不同的结果。

1.  在**Chrome**中 - 在快速拨号中固定一个或两个选项卡，然后清空您的浏览器历史记录。在您重新访问固定页面之前，缩略图应该会消失。
2.  在**Firefox中 - 上述方法有效，但您也可以直接使用***moz-page-thumb://* URL 协议尝试生成缩略图：

    moz-page-thumb://thumbnail?url=http%3A%2F%2Fstackoverflow.com%2Fq%2F10369905%2F210865"

（请在您正在运行的任何版本中进行测试，因为我也对这个问题感到好奇 - 我的研究到目前为止令人失望，但可能在未来......）

其他参考：

*   [用于将缩略图添加到 FF 快速拨号的原始 bugzilla 条目](https://bugzilla.mozilla.org/show_bug.cgi?id=497543)
*   [关于修复缩略图协议安全问题的另一个 bugzilla 条目](https://bugzilla.mozilla.org/show_bug.cgi?id=721398)
*   [相关超级用户问题](https://superuser.com/q/205178)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-19T14:16:18.977

尝试在 Firefox 上使用快速拨号插件，效果非常好。它具有书签备份等功能，您可以添加大量书签来自定义每个书签选项卡。

[火狐快速拨号链接](https://addons.mozilla.org/en-US/firefox/addon/speed-dial/)

[链接到 chrome 的快速拨号](https://chrome.google.com/webstore/detail/speed-dial/dgpdioedihjhncjafcpgbbjdpbbkikmi?hl=en)

# c++ - 使用继承和运算符重载或异常处理的通讯簿

> ID：10369906
> 
> 赞同：0
> 
> 时间：2012-04-29T05:22:11.213
> 
> 标签：c++, inheritance

我必须使用 C++ 制作地址簿，并且应该包含类和继承的类。主类包含姓名和地址，继承的教师类包含教师电话号码和 CNIC，员工类包含电话和 CNIC，学生类包含学生 ID 和电话。我用 C++ 编写了一个程序，但这总是会覆盖以前的数据。我被困在这里。我需要一个头骨程序或简单的算法来引导我前进。

这是我的代码。

```
 // new.cpp : Defines the entry point for the console application.

            // Address Book.cpp : Defines the entry point for the console application.
            //

            #include "stdafx.h"
            #include<iostream>
            #include<string>
            #include <conio.h>
            #include <fstream>
            #include <sstream> 
            #include <iomanip>

            using namespace std;

            class Main
            {
                private:
                string Name;
                string Address;
                char test;

                public:
                virtual void getdata()
                {
                    ofstream outfile("TEMP.txt");
                    cout <<"Enter Name: " ;
                    cin>>test;
                    getline(cin, Name); //cin >> Name;
                    cout << endl;
                    cout << "Enter Address: ";
                    getline(cin, Address);// cin >> Address;

                    outfile << Name
                    << endl
                    << Address;
                }
                virtual void setdata()
                    {
                    cout << "\n\nName: " << test+Name;
                    cout << "\nAddress: " << Address;
                    }

                virtual void remove()
                {

                }
                };

            //----------------------------------------------------------

            class Teacher : public Main
            {
            private:

                int T_Number;
                string T_CNIC;

            public:
                void getdata()
                {
                ofstream outfile("Teacher.txt");
                Main::getdata();
                cout << "Enter CNIC: ";
                getline(cin,T_CNIC);//cin >> T_CNIC;
                cout << "Enter Contact Number: " << endl;
                cin >> T_Number;

                outfile << T_CNIC
                    << endl
                    << T_Number;

                cout << "Data entered" << endl;

                }

                void setdata()
                {
                    Main::setdata();
                    cout << "\nTeacher CNIC: " << T_CNIC;
                    cout << "\nTeacher Contact Number: " << T_Number;
                    }
                };
            //------------------------------------------------------------

            class Student : public Main
            {

            private:

            int S_Number;
            int S_ID;
            public:
            void getdata()
            {
                ofstream outfile("Student.txt");
                Main::getdata();
                cout << "Enter ID: ";
                cin >> S_ID;
                cout << "Enter Contact Number: ";
                cin >> S_Number;

                outfile << S_ID
                    << endl
                    << S_Number;

                cout << "Data entered" << endl;

            }
            void setdata()
            {
                Main::setdata();
                cout << "\nStudent Unique ID: " << S_ID;
                cout << "\nStudent Contact Number: " << S_Number;
            }

            };

            class Employee : public Main
            {
            private:
            int E_Number;
            string E_CNIC;
            public:
            void getdata()
            {
                ofstream outfile("Employee.txt");
                Main::getdata();
                cout << "Enter Employee CNIC: ";
                getline(cin,E_CNIC);//cin >> E_CNIC;
                cout << "Enter Contact Number: ";
                cin >> E_Number;

                outfile << E_CNIC
                    << endl
                    << E_Number;

                cout << "Data entered" << endl;

                ;}
            void setdata()
            {
                Main::setdata();
                cout << "\nEmployee Unique ID: " << E_CNIC;
                cout << "\nEmployee Contact Number: " << E_Number;

            }
            };

            //-----------------------------------------------------------------------------------------

            int _tmain(int argc, _TCHAR* argv[])
            {
            Main* myarr[100];

            int var = 0;

            int choice;
                char input;
            start:
                printf("===============MAIN MENU===============");
                printf("\n[1]Insert\n[2]Search\n[3]Delete\n[4]Exit\n");
                printf("=======================================");
                printf("\n\nEnter Your Choice: ");
                cin >> choice;

                switch(choice)
                {

                case 1:
                    cout << "\nEnter data for Student or Teacher or Employee (s/t/e)? ";
                    cin >> input;
                do 
                {

                    if( input=='t' )
                    myarr[var] = new Teacher;
                    else if (input == 'e')
                    myarr[var] = new Employee;
                    else
                    myarr[var] = new Student;
                    myarr[var++]->getdata();
                    cout << " Enter another (y/n)? ";
                    cin >> input;
                    if(input == 'n')
                    {
                        goto start;
                    }
                }
                while( input =='y');
                    for(int j=0; j<var; j++)
                    myarr[j]->setdata(); 
                    cout << endl;
                    break;

                case 2:
                    return 0;
                    break;

                case 3:
                    return 0;
                    break;

                case 4:
                    cout << "Are you sure you want to quit? " << endl;
                    getch();
                    break;

                default:
                    cout << "Choose from 1 - 4 ONLY!!" << endl;
                    goto start;
                    break;  

                }   
            return 0;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T07:05:57.150

然后我会尝试声明它受保护，而不是调用 main::getdata()，而是直接将数据写入文件。看看这是否有效。

# c# - “没有为一个或多个必需参数提供值。” 尝试删除记录时出错

> ID：10369907
> 
> 赞同：0
> 
> 时间：2012-04-29T05:22:12.460
> 
> 标签：c#, ms-access-2010

我看到有很多这样的问题，但我仍然无法通过查看它们来弄清楚我的错误。我正在尝试从 Access 中的表中删除一条记录。这是代码：

//删除记录的方法 public static void DeleteProject(Project aProject) {

```
 {
            String sSQLProjectDeleteCommand = "Delete * from Project where JobNo=" + aProject.JobNo;

            // Create the command object
            if (aConnection.State == ConnectionState.Closed)
                aConnection.Open();

            OleDbCommand Cmd = aConnection.CreateCommand();
            //Delete project
            Cmd.CommandText = sSQLProjectDeleteCommand;
            // Execute the SQL command
            Cmd.ExecuteNonQuery();
            aConnection.Close();
        }
        catch (System.Exception exc)
        {
            Console.WriteLine(exc.Message);
        }
    } 
```

我正在使用 3 层架构，错误发生在“Cmd.ExecuteNonQuery();”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:44:01.543

你不是`DELETE * FROM`你`DELETE FROM`

删除`*`它应该可以工作。

--

**更新**：另外，如果`JobNo`是一个字符串，你应该在参数中添加引号：

```
String sSQLProjectDeleteCommand = "Delete * from Project where JobNo='" + aProject.JobNo + "'"; 
```

不过，最好使用参数来完成：

```
String sSQLProjectDeleteCommand = "Delete * from Project where JobNo=?";
...
Cmd.Parameters.Add(aProject.JobNo);
Cmd.ExecuteNonQuery(); 
```

**更新 2**：修改参数，因为 OleDbCommand 不允许命名参数，似乎

# wpf - 客户端计算机上的 EndpointNotFoundException

> ID：10369909
> 
> 赞同：0
> 
> 时间：2012-04-29T05:23:02.150
> 
> 标签：wpf, wcf, nettcpbinding

我的 WCF 服务托管在 net.tcpbinding 下，如果客户端调用它的方法时它没有运行，但让我告诉你我们的一些客户端可以访问，而有些则不能。我什至检查了每个客户端的防病毒设置和防火墙设置，但没有找到正确的答案，客户端收到 EndpointNotFoundException 并显示以下消息：

没有端点监听...

我检查了服务路径，路径没有错误。并且在我的基于窗口凭据类型的 nettcp 服务中， enabletcpportsharing 也已打开。

仍在寻找正确的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:38:58.217

尝试 telnet 后（应用服务器的 IP 地址）端口。所以我可以理解它被窗口防火墙或路由器防火墙阻止。如果 telnet 从客户端机器打开窗口，这意味着它正在工作，如果没有在窗口中打开，则调用网络管理员打开该端口

例如。telnet xxx.xx.xx.xx 80 在命令提示符下

# c - 为什么没有调用函数？

> ID：10369913
> 
> 赞同：0
> 
> 时间：2012-04-29T05:23:44.470
> 
> 标签：c

我正在用 C 编写以下程序。

这个程序是一个邻接矩阵，它要求用户设置节点之间的连接，然后检查节点 A 和节点 B 之间是否存在连接。

```
# include <stdio.h>
# include <stdlib.h>

#define N 11
#define FALSE 0
#define TRUE 1

typedef int adj_mat[N][N]; /*defining adj_mat */

int path (adj_mat A, int u, int v); 
```

主要功能要求用户制作有向图，然后要求用户输入两个节点以检查它们是否存在节点 A 和节点 B 之间的连接。

```
int main()
{
    adj_mat Matrix; /*intializing a new graph adjacency matrix. 
                     on this moment nodes are disconnected every cell contains zero */
    int dadnode, sonnode; /*intializing dad node and son node*/

    printf("Hello. Enter now the pairs of connected nodes.\n");    
    printf("enter EOF after finishing of connecting all the nodes\n");

    do {  /*here user enter the nodes to connect */
        printf("Enter the number of first node\n"); 
        scanf("%d", &dadnode);
        printf("Enter the number of second node\n");
        scanf("%d", &sonnode);

        if ((dadnode < sonnode) && (sonnode <= N) && (dadnode > 0)) /*checking if nodes are legal*/
            Matrix[dadnode][sonnode] = 1; /*if legal - connect*/
    } while ( (dadnode != EOF ) && (sonnode != EOF)); /*until user enter EOF */

    printf("Now enter u and v nodes to check if exists way from u node to we node\n");
    /*here user enter the nodes to check */
    printf("Enter the number of u node\n"); 
    scanf("%d", &dadnode);
    printf("Enter the number of v node\n");
    scanf("%d", &sonnode);

    if ((dadnode < sonnode) && (sonnode <= N) && (dadnode > 0)) /*checking if nodes are legal*/ {
        if( path(Matrix,dadnode,sonnode) == TRUE ) /*if exisits way from u to v*/
            printf ("Exists way from node u to node v ");  
    }
    else printf ("Not exists way from node u to node v ");         
} 
```

如果存在从 u(dad node) 到 v(son node) 的方式，则以下函数返回 TRUE，否则返回 FALSE

```
int path (adj_mat A, int u, int v) {
    if (v >= u) /*no sense to check if dad node yonger than son node or dad of himself */
        return FALSE; 
    int nodenum; /*number of node*/
    /* "nodenum = v - 1" because node v cannot be son of node >= v */
    for(nodenum = v - 1; nodenum > 0; nodenum-- ) {
        if (A[nodenum][v] == TRUE) /*dad detected*/
        {
            if (nodenum == u) {
                return TRUE; //complete
            } else if (path (A, u, nodenum)) {
                return TRUE; //maybe dad is a node that we are looking for (recursion)
            }
        }
    }  
    return FALSE; /*all parents of v node were cheked and noone of them isnt u node*/
} 
```

最后，我在 gdb (ubuntu) 中运行它。

```
do {  /*here user enter the nodes to connect */
    printf("Enter the number of first node\n"); 
    scanf("%d", &dadnode);
    printf("Enter the number of second node\n");
    scanf("%d", &sonnode);

    if ((dadnode < sonnode) && (sonnode <= N) && (dadnode > 0)) {/*checking if nodes are legal*/
        Matrix[dadnode][sonnode] = 1; /*if legal - connect*/
    }
} while ( (dadnode != EOF ) && (sonnode != EOF)); /*until user enter EOF */ 
```

为什么当我试图通过按 Ctrl+d 来停止这个循环（从 main 函数）时，只有在找到其中一个数字为 -1 的一对数字后，循环才会继续并停止？

好的，输入“-1”然后主函数应该调用path()函数来检查节点a和节点b是否连接。如果是，那么它应该根据路径（Matrix，dadnode，sonnode）的结果输出一条消息。

但是，我收到消息“程序正常退出”，而不是这种行为。为什么我会收到此消息？

main 函数甚至调用 path() 函数吗？我不确定我的代码中的错误是什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:47:52.033

`EOF`在 中定义为 ( `-1`) `stdio.h`，但是当您使用`Ctrl`+`D`发送`EOF`消息时，您发送的是不同的字符值 ( `4`)。( )的`EOF`定义`-1`意味着是由于文件结束或其他错误而失败的函数的返回值。因此，与其将输入值（`dadnode`或`sonnode`）与`EOF`进行比较，不如将其返回值与`scanf()`to进行比较`EOF`。

的返回值`scanf()`是读取的项目数（在您的情况下，它应该只是`1`），或者`EOF`如果用户发送`Ctrl`+ `D`（Windows 用户将必须发送`Ctrl`+ `Z`）。

例子：

```
int dadnode, sonnode;
int result;

while (true)
{
    result = scanf("%d", &dadnode);
    if (result < 1) break;

    result = scanf("%d", &sonnode);
    if (result < 1) break;
} 
```

# java - EJB：解释如果服务器使用 IIOP 协议，为什么没有窄转换会破坏客户端代码

> ID：10369916
> 
> 赞同：0
> 
> 时间：2012-04-29T05:23:57.790
> 
> 标签：java, jakarta-ee, ejb

```
Context ic = new InitialContext();
Object o = ic.lookup("EJB");
AdviceHome home = (AdviceHome) PortableRemoteObject.narrow(o, AdviceHome.class); 
```

以上是使用 Narrow Cast 的代码。在我的书中，他们解释说使用窄转换来假设服务器正在使用 IIOP（尽管服务器实际上只是使用 RMI）。

这本书仍然说：

> 客户端代码不会独立于供应商！换句话说，如果你不使用narrow，你将不会有一个可移植的应用程序，因为在使用IIOP 的服务器上重新部署bean 会破坏客户端

我有两点不明白：

1) IIOP 协议比普通的奇数 RMI 协议大：所以，我们已经将一个小对象转换为大对象，对吧？

2）我真的不明白为什么客户端代码会破坏这么多。为什么在这种情况下使用 IIOP 的服务器会破坏客户端的代码？因为客户端只是调用了一些在 EJBObject 接口中定义的方法。而且我无法想象客户端代码将如何依赖于服务器使用的协议。

请用清晰的解释和简单的例子帮助我。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T08:08:40.177

该`narrow`方法类似于downcast。文档所说的是不要使用向下转换，即使在执行普通 RMI 时这将始终有效。所以这个词的意思`narrow`是类型理论意义上的——从一般类型缩小到特定类型`PortableRemoteObject`。

# mysql - 升级到 ubuntu 12.04 后无法在 Rails 中运行我的服务器

> ID：10369918
> 
> 赞同：17
> 
> 时间：2012-04-29T05:24:32.073
> 
> 标签：mysql, ruby-on-rails, ruby

我刚刚将 ubuntu 从 11.10 升级到 12.04，之后当我在我的 rails 项目中运行我的服务器时，我收到了这个错误

```
$ rails s
/usr/share/ruby-rvm/gems/ruby-1.9.3-p125/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require': 
libmysqlclient_r.so.16: cannot open shared object file: No such file or directory - 
/usr/share/ruby-rvm/gems/ruby-1.9.3-p125/gems/mysql2-0.3.11/lib/mysql2/mysql2.so (LoadError) 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-29T05:37:47.350

转到您的项目并按照步骤操作，

```
rvm gemset empty <gemset name>
gem install bundler
bundle install 
```

它会解决你的问题。

如果这不起作用，或者如果您没有使用 rvm，请使用

```
gem uninstall mysql2
bundle install 
```

从您使用 mysql2 的 Rails 项目目录之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T06:00:02.597

好吧，我建议仔细检查 ruby​​ 和 rails 版本，并确保它们与您创建项目时使用的相同。也许您必须使用 rvm 更改版本：

*   `rvm use 'Version'`

也许您可以再次卸载并重新安装 mysql 软件包，也可以尝试安装：

*   `sudo apt-get install mysql-client mysql-server libmysqlclient16-dev`

或者

*   `sudo apt-get install mysql-client mysql-server libmysqlclient-dev`

还可以尝试卸载并重新安装您的 mysql gem。[这篇博客文章](http://tomcopeland.blogs.com/juniordeveloper/2009/07/libmysqlclientso16-cannot-open-shared-object-file.html)也有解决这个错误的方法，尽管这个错误是在不同的时间引起的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T17:37:26.230

我按照他发布[的 Babak 的](https://stackoverflow.com/users/1220118/babak-basseri) [指示](https://stackoverflow.com/a/10370084/1382738)进行操作，稍作改动后它就起作用了。

我的系统是 Ubuntu 12.04 服务器，它安装了 Ruby1.9.3，所以我这样做了

```
sudo apt-get install mysql-server libmysqlclient-dev 
```

似乎 libmysqlclient16-dev 现在在 Ubuntu 12.04 中重命名为 libmysqlclient-dev

后来我跑了

```
gem install mysql2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-05T08:07:42.833

对我来说，那里没有任何工作。然后我找到[了这个](https://stackoverflow.com/questions/9609985/please-install-mysql-adapter-gem-install-activerecord-mysql-adapter)并尝试**删除并再次创建 database.yml**文件。它有效！

# ruby-on-rails - 在 Rails 中寻找两级身份验证的好方法

> ID：10369920
> 
> 赞同：1
> 
> 时间：2012-04-29T05:25:21.663
> 
> 标签：ruby-on-rails, authentication, devise

我需要在 Rails 应用程序中使用相同的用户名进行两级身份验证。一键登录，二键查看更敏感的区域，例如账单和信用卡信息。第一级是用 Devise 实现的。对于第二级，我可以再次使用设计一个不同的模型，比如设置吗？Cancan 需要单独的登录。

不确定最好的方法。

任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T11:04:15.120

这个问题非常规，似乎无法使用现成的解决方案。在我看来，这种情况下不需要双重授权（第二个密码通常用于确认某些操作，而不是用于第二次授权），但有时我们不会选择这样的东西。

肮脏的解决方案是持有另一个加密密码，当您进入第二级时，暂时给用户一个不同的角色。这个角色将在康康检查。该角色会在一段时间内或下次登录时重置（因此攻击者无法同时访问计费）。我认为这很粗糙，但可以快速解决。

这只是我的 50 美分，我怀疑这是一个好的解决方案。

# php - 将变量转换为数组

> ID：10369922
> 
> 赞同：0
> 
> 时间：2012-04-29T05:25:37.260
> 
> 标签：php, arrays, variables

我在将变量转换为数组时遇到问题。我正在运行 foreach 循环以从我的多维数组 $images 中获取值。$images 数组包含图像名称，例如：“Item Blue.png”或“Item Light Oak.png”以及每个图像的 id。

```
foreach ($images['images'] as $image) {
    $image_name = explode(" ", substr_replace($image->filename ,"",-4));
    if(!empty($image_name[2])) {
        $colour = ucfirst($image_name[1] . " " . $image_name[2]);
    }
    else {
        $colour = ucfirst($image_name[1]);
    }
} 
```

$colour 变量给了我颜色名称，$image->id 可以给我图像 id。

我想用上面的变量构建 $colors 数组，它看起来像这样：

```
$colors = array(
    'Blue' => 1620,
    'Green' => 1467,
); 
```

有点像这样：

```
$colors = array(
    '$colour' => $image->id,
); 
```

我不知道如何做到这一点，我将不胜感激任何帮助，至少给我一些方向。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:41:37.563

这应该很简单......要做两件事：

首先在你的 foreach 之外初始化颜色数组：

```
 $colors=array();   //<-- add this
 foreach ($images['images'] as $image) {
     $image_name = explode(" ", substr_replace($image->filename ,"",-4));
     ... 
```

然后只需在 if/else 之后添加一行，仍在您的 foreach 循环内，它将向 $colors 数组中插入一个新项目。

```
 ...
    else {
        $colour = ucfirst($image_name[1]);
    }
    $colors[$colour]=$image->id;  //<-- add this
} 
```

这将创建一个颜色数组，其中包含您正在寻找的内容。我假设 $image 迭代器中有一个 'id' 键。你需要创建一个吗？

尽管如此，您并没有检查这些问题：

1.  带空格的颜色名称，例如“浅橡木”
2.  带有空格的项目名称，例如“大型项目轻橡木.png”
3.  具有不同 ID 的重复颜色

希望有帮助

# ruby - gem 中的连接池，可打开与网络服务的连接

> ID：10369923
> 
> 赞同：0
> 
> 时间：2012-04-29T05:25:58.690
> 
> 标签：ruby, connection-pooling

我正在研究一系列用于处理 Sphinx 2 和实时索引、独立、Datamapper 和 ActiveRecord 的 gem。为了做到这一点，它（显然）打开了与 Sphinx 的连接。

[https://github.com/d11wtq/oedipus](https://github.com/d11wtq/oedipus)

```
Oedipus.connection("sphinxql.host.tld:9306") 
```

现在我并没有对管理连接做任何花哨的事情……如果 gem 的用户建立了连接，就会打开一个新的连接，就是这样。管理该连接是用户的责任。但是，其他 gem 似乎带来了池的概念，而我在单线程环境中从未真正理解这一点。

有人可以告诉我*为什么*需要池化，我的 KISS 方法的后果是什么，以及如何添加池化？池化是否仅在多线程应用程序中才真正有意义，其中每个线程有效地存在一个连接，还是有其他有效的用例？如果它只是用于多线程应用程序，那么这不是用户可能比 gem 做出假设更好地管理的东西吗？

我猜对于线程实现，一个简单的“无限连接”方法是：

```
def connection
  Thread.current[:oedipus_connection] ||= connect(args)
end 
```

因此，当线程消失时，连接也会消失（释放资源时会发生清理）。

它一直在我脑海中浮现，我想知道如果没有内置的连接池/管理会回来困扰我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T06:15:20.247

Generally only multithreaded apps need multiple connections. It's theoretically possible for a single-threaded app to make use of multiple connections but there probably isn't a good reason for that.

The main benefit of a connection pool is to keep database connections for re-use, to minimise the overhead of setting up new database connections. This can matter in a typical request-per-connection scenario like rails where each request may result in just one or a few database queries. Then the connection setup becomes a significant portion of the request time.

But it's a bit of a PITA to set up a proper connection pooling system. You have connection timeouts and cleanups to worry about. Check the [ActiveRecord connection pooling code](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb) for an example.

You can defer having to worry about connection pooling by creating an using the right interface. It would go something like

```
class MyConnection
    def self.get1(args)
        # establish a connection and return it
    end

    def close
        # close the connection
    end
end 
```

Or maybe

```
def use_connection
  connection = nil
  begin
    connection = open_a_connection
    yield connection
  ensure
    connection and connection.close
  end
end 
```

And then you can make the interface more sophisticated later on, without having to touch the rest of the app.

# c# - 使用按钮编辑 WPF 数据网格单元格

> ID：10369931
> 
> 赞同：0
> 
> 时间：2012-04-29T05:28:54.880
> 
> 标签：c#, .net, wpf

我已将数字键复制为 WPF 窗口中的按钮。现在我想用这些按钮编辑 Selected WPF datagrid 单元格。如何获取焦点单元格并通过单击按钮替换字段值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T05:36:18.380

您可能希望使用 EventTriggers 或类似的组合来查看 DataTemplates 以执行此操作。

# r - R：使用 bigmemory 库与 randomForest 进行分类

> ID：10369933
> 
> 赞同：5
> 
> 时间：2012-04-29T05:29:13.080
> 
> 标签：r, machine-learning, data-mining, r-bigmemory

有没有人能够使用 randomForest 和 bigmemory 库建立分类（不是回归）。我知道不能使用“公式方法”，我们不得不求助于“x=predictors，y=response 方法”。看来大内存库无法处理具有分类值的响应向量（毕竟它是一个矩阵。就我而言，我有两个级别，都表示为字符。

根据 bigmemory 文档...“数据帧将字符向量转换为因子，然后将所有因子转换为数字因子级别”

有什么建议的解决方法可以让 randomForest 分类与 bigmemory 一起使用吗？

```
#EXAMPLE to problem
library(randomForest)
library(bigmemory)
# Removing any extra objects from my workspace (just in case)
rm(list=ls())

#first small matrix
small.mat <- matrix(sample(0:1,5000,replace = TRUE),1000,5)
colnames(small.mat) <- paste("V",1:5,sep = "")
small.mat[,5] <- as.factor(small.mat[,5]) 
small.rf <- randomForest(V5 ~ .,data = small.mat, mtry=2, do.trace=100)
print(small.rf)
small.result <- matrix(0,1000,1)
small.result <- predict(small.rf, data=small.mat[,-5])

#now small dataframe Works!
small.mat <- matrix(sample(0:1,5000,replace = TRUE),1000,5)
colnames(small.mat) <- paste("V",1:5,sep = "")
small.data <- as.data.frame(small.mat)

small.data[,5] <- as.factor(small.data[,5]) 
small.rf <- randomForest(V5 ~ .,data = small.data, mtry=2, do.trace=100)
print(small.rf)
small.result <- matrix(0,1000,1)
small.result <- predict(small.rf, data=small.data[,-5])

#then big matrix Classification Does NOT Work :-(
#----------------****************************----
big.mat <- as.big.matrix(small.mat, type = "integer")
#Line below throws error, "cannot coerce class 'structure("big.matrix", package = "bigmemory")' into a data.frame"
big.rf <- randomForest(V5~.,data = big.mat, do.trace=10)

#Runs without error but only regression
big.rf <- randomForest(x = big.mat[,-5], y = big.mat[,5], mtry=2, do.trace=100)
print(big.rf)
big.result <- matrix(0,1000,1)
big.result <- predict(big.rf, data=big.mat[,-5]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T17:26:24.093

[bigrf](http://cran.r-project.org/web/packages/bigrf)包可能会有所帮助。目前，它支持具有有限数量特征的分类。

# asp.net-mvc - 如何在我的视图中将 HTML 从 MVC 控制器返回到 div

> ID：10369936
> 
> 赞同：8
> 
> 时间：2012-04-29T05:29:21.947
> 
> 标签：asp.net-mvc, jquery, razor

我正在尝试将生成的 HTML 字符串返回到视图以动态生成带有结果的 HTML 表。我无法获得返回的 HTML 字符串，非常感谢任何建议和帮助。

这是我的控制器代码

```
 public ActionResult ValidateTrams()
    {
        string html = "";
        if (Request.Files.Count == 0 || Request.Files[0].ContentLength == 0)
        {
        }

        else
        {
            html = ProcessTextFile(Request.Files[0].InputStream);
        }

        return View(html);
    } 
```

我正在尝试像这样在 jquery 中获取返回的结果

```
$('#tramsView').live('click', function () {

$.ajax({
    url: '/Booking/ValidateTrams',
    type: 'POST',
    dataType: 'jsonp',
    success: function (data) {
        alert(data);
        $('#TramsViewFrame').html(data);
    },
    error: function (jqxhr, textStatus, errorThrown) {
        $(window).hideWaitScreen();
        if (confirm(errorThrown)) { window.location.reload(); }
    }
}); 
```

});

最后下面是表单的 CSHTML。在这里，我正在从带有按钮类型提交的表单中读取文件

```
<form action="#" method="post" enctype="multipart/form-data" class="forms" name="form"
            id="frmvalidate">
            <table>
                <tr>
                    <td>
                        <input type='file' name='trams' id='ValidatetramsFile' />
                    </td>
                </tr>
                <tr>
                    <td>
                        <br />
                        <input name="cbDisplayUmatched" id="cbDisplayUmatched" type="checkbox" value="" checked="true" />
                        <label style="text-decoration: none; outline: none; font-size: 1.1em; padding: 3px 0 0px 0;">
                            Display rows that were <strong>NOT</strong> parsed</label>
                    </td>
                </tr>
                <tr>
                    <td>
                        <br />
                        <div class="buttons">
                            <button type="submit" value="VIEW" class="ui-state-default ui-corner-all" id="tramsView">VIEW</button>
                        </div>
                    </td>
                </tr>
            </table>
            </form> 
```

感谢您的宝贵时间，非常感谢您的帮助。亲切的问候！！！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T05:35:58.347

你可以从这样的动作中返回 HTML，

```
return Content(html, "text/xml"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T09:22:56.993

听起来好像您的表单仍在提交正常的回发，因此您正在进行的任何异步调用都将丢失。

尝试使用以下方法阻止默认表单提交：

```
$('#tramsView').live('click', function (evt) {

    evt.preventDefault();

    // ... rest of your code 

}); 
```

顺便说一句，在这种情况下，如果您所做的只是更新 html 上的 html `#TramsViewFrame`，您可以使用稍微简单的[$.load()](http://api.jquery.com/load/) 方法：

```
$('#tramsView').live('click', function (evt) {
    evt.preventDefault();
    $('#TramsViewFrame').load('/Booking/ValidateTrams');
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T09:22:32.680

进行这些更改

在控制器顶部提供属性 HttpPost

```
[HttpPost]
public ActionResult ValidateTrams() 
```

从控制器返回字符串作为 Json 像这样。

```
return Json(new { success = html }); 
```

最后将您的 dataType 从更改~~`jsonp`~~为`json`

```
$('#tramsView').live('click', function() {
    $.ajax({
        url: '/Booking/ValidateTrams',
        type: 'POST',
        dataType: 'json',
        success: function(data) {
            alert(data.success);
            $('#TramsViewFrame').html(data.success);
        },
        error: function(jqxhr, textStatus, errorThrown) {
            $(window).hideWaitScreen();
            if (confirm(errorThrown)) {
                window.location.reload();
            }
        }
    });
});​ 
```

PS：如果您使用的是最新版本的jQuery（1.7+），请将处理程序更改为`.live`处理`.on`程序。不是强制性的 ：）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T05:37:57.943

在您的控制器中，因为您使用的是 ajax 帖子，您需要以 JSON 格式返回，它会是这样的

```
return Json(html); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T08:27:32.757

我认为这是与您的场景相关的另一种方式`How can I return the HTML from MVC controller to a div in my view` [http://mazharkaunain.blogspot.com/2011/02/how-to-use-aspnet-mvc-javascriptresult.html](http://mazharkaunain.blogspot.com/2011/02/how-to-use-aspnet-mvc-javascriptresult.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-07T06:48:26.923

而不是存储在“字符串”中，而是以以下格式存储 html 代码：

```
 HtmlString s = new HtmlString("<html coding/>");
        ViewData["Id_as_per_your_choice"] = s;
        return View("page_you_want to_respond"); 
```

然后将 "<%: ViewData["Id_Same_as_that_in_above_code"] %>" 放置在您希望该 html 代码出现的任何位置......简单......但在 "index()" 中将 Viewdata 的初始值设为 null方法，以便代码不会出现在页面加载....

# ruby-on-rails - 在具有正确 SSL 的 Facebook 应用程序上“收到空响应”

> ID：10369938
> 
> 赞同：0
> 
> 时间：2012-04-29T05:29:24.453
> 
> 标签：ruby-on-rails, facebook, heroku

尝试访问我的 facebook 应用程序[1] 时出现以下错误：

```
Error while loading page from Testapp
Empty response received. 
```

我的应用程序由 Heroku 托管并有一个静态页面[2]，我正在使用 Rails。当我尝试连接 facebook 时，日志上没有显示任何内容。从其 URL 访问该页面时，我在日志中得到了这个：

```
2012-04-29T04:07:16+00:00 heroku[router]: GET cold-fire-1208.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=4ms status=304 bytes=0 
```

我没有在我的 facebook 应用程序上使用任何命名空间，并且 SSL 似乎配置正确，您可以查看我的 URL。它似乎也通过了 SSL 安全测试。

为了创建应用程序，我在 facebook 上启动它，选择了 heroku 和 ruby​​，然后我得到了一个 sinatra 应用程序。之后，我删除了 sinatra 应用程序并启动了一个新的 rails 应用程序，将数据库配置为 pg。

以下是我的 heroku 配置 --long

```
DATABASE_URL        => postgres://cantsee
FACEBOOK_APP_ID     => id
FACEBOOK_SECRET     => secret
GEM_PATH            => vendor/bundle/ruby/1.9.1
LANG                => en_US.UTF-8
PATH                => vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin:bin
RACK_ENV            => production
SHARED_DATABASE_URL => postgres://cantsee 
```

[1] [http://apps.facebook.com/testapp/](http://apps.facebook.com/testapp/)

[2] [https://cold-fire-1208.herokuapp.com/](https://cold-fire-1208.herokuapp.com/)

**回答：**

我可以通过它的 ID 访问我的应用程序，例如[https://apps.facebook.com/360273344020802/](https://apps.facebook.com/360273344020802/)而不是它的名称。还不知道为什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T19:02:57.033

我可以通过它的 ID 访问我的应用程序，例如[https://apps.facebook.com/360273344020802/](https://apps.facebook.com/360273344020802/)而不是它的名称。还不知道为什么。

# c++ - boost::ptr_vector 问题

> ID：10369941
> 
> 赞同：1
> 
> 时间：2012-04-29T05:29:53.497
> 
> 标签：c++, boost, ptr-vector

我想要一个`boost::ptr_vector`指向对象的多态指针（这部分大部分都在工作），但是我在使用它的某些功能时遇到了麻烦。

我想加载`ptr_vector`使用 case 开关来确定要指向的子类型，这样我就不必让多个指针浮动，但是当我覆盖类型时，指针多态地指向它会覆盖其中的所有`ptr_vector`内容使用相同的指针推送（我认为这与它存储确切的指针有关）我认为可以通过给它对象的副本/[克隆](http://www.parashift.com/c++-faq-lite/abcs.html#faq-22.5)而不是指针来解决，但我看不到在哪里，或者如何告诉它如何做到这一点。

我遇到的另一个问题是，当指针存在的范围结束时`ptr_vector`停止存在的所有对象（我觉得这可以通过解决问题来解决是第 2 段）

我的另一个问题是如何在示例中删除特定对象，`ptr_vector`例如我发现当其中有 30 多个对象时我需要删除对象 5 `ptr_vector`（请记住，我将搜索要删除的对象)

编辑：我已经实现了这些`clone`方法，并且它们工作正常

编辑：示例代码

```
#include <iostream>
#include <string>
#include <vector>
#include <boost/ptr_container/ptr_vector.hpp> 
```

gameObject（多态类型）

```
class GameObject {
public :
    bool toBeRemoved;
    char Type;
    int name;

    virtual ~GameObject(){}
    virtual void updateObject(float duration){}
    virtual GameObject * clone(void)const = 0;
};

class Entity : public GameObject{
public:
    Entity(int _name){
        Type = 'e'; name = _name;
        toBeRemoved = false;
    }
    Entity(const Entity & _o){
        toBeRemoved = _o.toBeRemoved;
    }
    ~Entity(){}
    void updateObject(float duration){
        if(!toBeRemoved){
//          perform update work
      }
    }
    Entity * clone(void)const{return new Entity(*this);}
};

class Wall:public GameObject{
public:
    bool destroyable;

    Wall(bool destroy, int _name){
        Type = 'w'; name = _name;
        destroyable = destroy;
        toBeRemoved = false;
    }
    Wall(const Wall & _o){
        destroyable = _o.destroyable;
    }
    void updateObject(float duration){
        if((duration > 10)&&(destroyable)){
            toBeRemoved = true;
        }
    }
    ~Wall(){}
    Wall * clone(void)const{return new Wall(*this);}
}; 
```

对象管理器（举例说明范围）

```
typedef boost::ptr_vector<GameObject*> things; // not sure how to tell this how to clone the objects, or if I have to do it manually

class ObjectMgr{
    things objects;
public:
    ObjectMgr(){
        int entityCount = 0;
        int wallCount = 0;

        std::vector<std::vector<char>> map;
        map.resize(3);
        for(int ii = 0; ii <3 ; ii++){map[ii].resize(6);}

        for(int ii = 0; ii<6; ii++){map[0][ii] = 'w';}
        map[1][0] = 'w'; map[1][1] = 'E';
        map[1][2] = '.'; map[1][3] = 'D';
        map[1][4] = 'E'; map[1][5] = 'D';
        for(int ii = 0; ii<6; ii++){map[2][ii] = 'w';}

        GameObject* currentObject;
        for(int zz = 0; zz < map.size(); zz++){
            for(int xx = 0; xx < map[zz].size(); xx++){

                switch(map[zz][xx]){
                case 'w':   // undestroyable wall
                    currentObject = new Wall(false,wallCount++);
                    objects.push_back(&currentObject);
                    break;
                case 'E':   // entity
                    currentObject = new Entity(entityCount++);
                    objects.push_back(&currentObject);
                    break;
                case 'D':   // destroyable wall
                    currentObject = new Wall(true,wallCount++);
                    objects.push_back(&currentObject);
                    break;
                case '.':   // empty space
                    break;
                }
            }
        }
        print();
    }

    void clean(){    // thinking that might need to do some kind of swapping, and then maybe pop_back()
        bool removed;
        do{
            removed = false;
            things::iterator ii = objects.begin();
//              for(int jj = 0; ii != objects.end(); ii++, jj++){
//                  if(objects[jj]->toBeRemoved == true){
//                      removed = true;
//                      // remove item here
//                      break;
//                  }
//              }
        } while(removed);
    }

    void print(){
        int count = 0;
        things::iterator reg = objects.begin();
        std::cout << "entities" << std::endl << "===================" << std::endl;
        for(int ii = 0; reg!=objects.end(); ii++, reg++){
            std::cout << count++ << ": " << objects[ii]->Type << objects[ii]->name << " " << std::endl;
        }
        std::cout << "====================" << std::endl << "/entities" << std::endl;
    }
}; 
```

主要的

```
int _tmain(int argc, _TCHAR* argv[]){
    ObjectMgr manager;
    std::cout << "constructed now displaying" << std::endl;
    manager.print();
    std::cout << "cleaning" << std::endl;
//  manager.clean();
    std:: cout << "displaying after cleaning" << std::endl;
//  manager.print();
    return 0;
} 
```

# android - 如何将 onclickListener 放在列表视图上

> ID：10369942
> 
> 赞同：0
> 
> 时间：2012-04-29T05:29:54.827
> 
> 标签：android, listview, listadapter

如何在 Listview wordList 上设置 onclickListener 以检索列表中显示的文本？另外我应该在哪里写那个函数？我是一个天真的 Android 开发人员，找不到合适的例子！

```
@Override  
protected void onActivityResult(int requestCode, int resultCode, Intent data)  
{  
    if (requestCode == REQUEST_CODE && resultCode == RESULT_OK)  
    {  
        // Populate the wordsList with the String values the recognition engine thought it heard  
        matches = data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);            
        wordsList.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,matches));  
    }  
    super.onActivityResult(requestCode, resultCode, data);  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:38:18.783

在您的`onActivityCreated`使用中

```
ListView lv = getListView();
lv.setOnClcikListener(); 
```

如果`ListActivity,ListFragment`其他明智的做法`getListView()`行不通，那么您必须`findViewById`这样做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T06:06:06.087

对于项目点击，使用这个：

```
 listView = (ListView) findViewById(R.id.list_view);
    // Set adapter here
    listView.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
        }
    }); 
```

如果要添加上下文菜单：

```
 listView.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {
        public void onCreateContextMenu(ContextMenu menu, View v, ContextMenu.ContextMenuInfo menuInfo) {
            menu.add(0, 1, 0, "View");
            menu.add(0, 2, 0, "Edit");
            menu.add(0, 3, 0, "Delete");
        }
    });

public boolean onContextItemSelected(MenuItem item) {
    AdapterView.AdapterContextMenuInfo menuInfo;
    switch (item.getItemId()) {
    case 1:
        //  Do something
        break;
    case 2:
        //  Do something        
        break;
    case 3:
        //  Do something
    default:
        return super.onContextItemSelected(item);
    }
    return true;
} 
```

# ssis - 如何在同一个事务中并行运行多个数据流任务？

> ID：10369943
> 
> 赞同：4
> 
> 时间：2012-04-29T05:30:19.007
> 
> 标签：ssis

我有一个在序列容器中添加了 3 个并行数据流任务的包。我需要实现事务，如果所有 3 个数据流任务都成功执行，则事务完成。如果任何数据流任务失败，则事务应该回滚。

我正在测试这个包，但它不工作。

*   我拿了一个`sequence container`拖放 `data flow task 1`，`data flow task 2`并`data flow task 3`配置了所有三个数据流任务。

*   在 sequencee 容器的属性中，我设置了以下属性

    **`Transaction: supported`**

    **`Isolation: readcommited`**

*   在三个数据流任务的属性上，我设置了以下属性

    **`Transaction: supported`**

    **`Isolation: readuncommited`**

*   当我运行包时，数据流任务 1 失败，但数据流任务 2 中的数据仍在插入和提交中。

即使其中一个数据流任务失败，如何防止数据流任务提交事务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T18:56:07.403

我同意其他答案，您的问题要求您将封闭容器上的事务范围设置为`Required`. 除非您更改了内部对象，否则它们的默认事务级别是`Supported`这意味着它们将在可用时加入事务。一个`Required`设置将启动一个事务并为了完整性，`NotSupported`指示可执行文件/容器将忽略任何可能导致死锁的现有事务，具体取决于您的设计。

我构建了一个示例包，它删除并重新创建目标表以验证事务是否按预期运行。包中有 3 个数据流，每个数据流向表 (1、2、4) 添加一个唯一值，这样这样的查询将指示值是否到达目标表。

```
SELECT count(1) AS rc, sum(T.col1) AS Total FROM dbo.TrxTest T 
```

如您所见，有 7 个变量，3 个成对出现。FailDataFlow 命名的是允许任何唯一数据流失败/成功的布尔值。这是通过在相应查询的 where 子句中导致除以 0 异常来实现的。

![数据流描述](../Images/4de90979fa188e9eb0f5f3b8eb2820a9.png)

序列容器的 TransactionOption 为`Required`。各个数据流保留其默认的 TransactionOption`Supported.`

第一次执行导致无法与分布式事务协调器通信，因为它被设置为在此 VM 上手动启动。更正该问题导致程序包正确失败，因为“DFT 值 2”产生了除以零异常。尽管“DFT 值 1”上有一个绿色框，但运行上面的查询方式在我的表中什么也没有显示。

![在此处输入图像描述](../Images/e06dd056d4406744310f6aadcb854f76.png)

将 FailDataFlow1 的值切换为 False 并重新运行在我的查询中分别显示值 3 和 7，这表明所有行都已到达。

您可以通过更改各种容器/可执行文件上的事务选项来进一步探索，以确保它们按照其他受访者的指示工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T18:18:13.727

你做的几乎所有事情都是正确的。

首先，忽略事务隔离级别，它在 readcommited 上有一个错误，如果你想这样做，你必须手动进行，请参阅我在[这篇](https://stackoverflow.com/questions/10298315/workarounds-for-readuncommitted-isolation-level-in-an-ssis-package/10353835#10353835)文章中的回答作为示例。

但是我不明白为什么要配置隔离级别，您的问题显然可以通过隔离级别解决。您缺少的是在序列容器上将事务设置为 required 。将它们设置为 Supported 意味着任务不会启动事务，但会加入由其父容器启动的任何事务（如果它退出）。

因此，通过在序列容器上将事务设置为 required 并在您的数据流上受支持，它应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T07:13:12.523

您必须为序列容器设置事务选项 =required 并为所有数据流任务设置 =supported 才能实现所需。

我总是做的是设置事务选项=包级别所需并支持所有其他任务。所以如果任何任务失败，事务就会回滚..

# ios - Iphone presentLocalNotificationNow 在后台应用程序时不会触发警报和声音

> ID：10369945
> 
> 赞同：2
> 
> 时间：2012-04-29T05:30:52.890
> 
> 标签：ios, uialertview, uilocalnotification

我有一个应用程序注册位置更新，运行测试，有时当我在应用程序处于后台时进入一个区域时，我会收到带有声音的警报通知。有时我只在通知中心看到通知，而我没有收到任何声音和警报...您如何做才能始终收到声音和警报通知？

这就是我的看法

```
 UILocalNotification *localNotif = [[UILocalNotification alloc] init];
 localNotif.fireDate             = nil;
 localNotif.hasAction            = YES;
 localNotif.alertBody            = fbName;
 localNotif.alertAction          = @"View";
 localNotif.soundName            = UILocalNotificationDefaultSoundName;

[[UIApplication sharedApplication]presentLocalNotificationNow:localNotif]; 
```

这是应用程序委托

```
- (void)application:(UIApplication *)application didReceiveLocalNotification (UILocalNotification *)notification
{
if (notification) 
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                    message:notification.alertBody
                                                   delegate:self cancelButtonTitle:@"OK"
                                          otherButtonTitles:nil];

    [alertView show];

}

}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

{

```
facebook = [[Facebook alloc] initWithAppId:kAppId andDelegate:self];

UILocalNotification *notification = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];

if (notification) 
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert"
                                                        message:notification.alertBody
                                                       delegate:self cancelButtonTitle:@"OK"
                                              otherButtonTitles:nil];

    [alertView show];

}

return YES;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:19:15.457

如果应用程序在后台运行，本地通知将不会收到警报或声音，因为它是由您的应用程序直接接收的。在这种情况下，您需要使用`presentLocalNotificationNow`.

```
- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification
{
    UIApplicationState applicationState = application.applicationState;
    if (applicationState == UIApplicationStateBackground) {
        [application presentLocalNotificationNow:notification];
    }
} 
```

# objective-c - 通过类名 vs self 调用类方法

> ID：10369946
> 
> 赞同：23
> 
> 时间：2012-04-29T05:30:54.877
> 
> 标签：objective-c, class-method

假设我们有一个名为`Calculator`. 其中有一个类方法，称为`runProgram`. 如果我想在类的实现中调用这个类方法，这两者之间的区别是什么：

```
[Calculator runProgram] 
```

或者

```
[self runProgram] 
```

这两个是一样的吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-04-29T05:36:27.463

如果在实例方法中：

```
[self runProgram] 
```

在此，`self`表示对象实例本身，因此会产生运行时错误。你想用

```
[[self class] runProgram] 
```

反而。

但是，如果您从另一个类方法调用此方法，则

```
[self runProgram] 
```

是正确的，因为 now`self`指的是类本身。我不鼓励使用

```
[Calculator runProgram] 
```

因为类的子类会错误地调用超类的 ( `Calculator`'s) 方法，而不是可能被覆盖的方法。

# php - Joomla 不会使用正确的重定向参数重定向到登录页面

> ID：10369949
> 
> 赞同：0
> 
> 时间：2012-04-29T05:31:20.380
> 
> 标签：php, joomla, joomla1.5, joomla1.6

我已经将 Joomla 与 vBulletin 和使用 jFusion 的 CPG 集成到我即将推出的癌症患者网站中。

我已将 vB 和 CPG 的登录链接设置为[http://fakesite.com/site/index.php?option=com_user&view=login&return=Zm9ydW0ucGhw](http://fakesite.com/site/index.php?option=com_user&view=login&return=Zm9ydW0ucGhw)，这样当用户从该链接登录 Joomla 时，他将被重定向回来成功登录后到vB或CPG。

当我使用正确的用户凭据组合登录时，这种情况会正确发生，但是当我使用错误的用户名和密码登录时，它只会重定向回 vB 或 CPG，而不会发出任何警告，或提示尝试再次登录。

正确的行为应该是 =

1.  用户使用错误的用户名/密码登录

2.  使用正确的登录重定向参数重定向到 Joomla 登录页面也就是说，如果他使用此 (index.php?option=com_user&view=login&return=Zm9ydW0ucGhw) 访问登录表单，他应该使用正确的返回参数值重定向到它。

3.  登录成功后，他应该会去vB或CPG。

我正在使用最新的 Joomla 1.5.x 版本。

我怎样才能解决这个问题 ？请帮帮我，我上过很多论坛，但没有人回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:58:43.553

为什么不创建一个带有外部 url 类型的菜单并将其指向 forum.php ？然后让这个菜单只对注册用户可见。

# c# - 我们可以创建一个所有组合框都引用的组合框事件吗？

> ID：10369954
> 
> 赞同：0
> 
> 时间：2012-04-29T05:32:17.773
> 
> 标签：c#, wpf, visual-studio-2010, xaml

我必须使用一个预览文本输入事件，我必须将其应用于我的应用程序中的所有组合框。

例子

```
 private void cmbClass_PreviewTextInput(object sender, TextCompositionEventArgs e)
 {
    cmbClass.IsDropDownOpen = true;
 } 
```

无论如何我可以使用标题（任何可能的方式），这样我就不必在我的所有组合框（总共 98 个）中输入预览文本输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:36:39.407

在 app.xaml 中创建样式。这将应用于您应用程序的所有组合框，但如果您希望在特定窗口的组合框中使用它，则将其写入标签中`<Window.Resources>`

```
<Application.Resources>
    <Style x:Key="key1" TargetType="ComboBox">
        <Setter Property="IsDropDownOpen" Value="True"/>
    </Style>
</Application.Resources> 
```

或者

```
<Window.Resources>
   ...
</Window.Resources> 
```

或者

您可以为所有组合框分配一个公共事件。将此代码写入您的 .cs 文件并选择所有组合框并将此事件分配给 PreviewTextInput 事件。

```
private void cmboxes_PreviewTextInput(object sender, TextCompositionEventArgs e)
{
    ((ComboBox)sender).IsDropDownOpen = true;
} 
```

# javascript - 如何在 jQuery 中编写函数？

> ID：10369958
> 
> 赞同：0
> 
> 时间：2012-04-29T05:32:53.483
> 
> 标签：javascript, jquery

我将编写一个使用 jQuery 的可调用函数。但是我找不到任何对 jQuery 普通函数声明的引用；这都是关于元素操作功能的。我基本上可以只声明一个普通的 javascript 函数，然后在其中使用 jQuery，还是我需要做一些特别的事情？这个可以吗？

```
function useJQ(xml)
{
    var groups = {};
    $('resultGroups', $(xml)).each(function() {
    var count = $('results', this).length;
    var name = $('name',this).text();
    groups[name] = count;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T05:38:42.753

你不需要扩展 jQuery 来完成这些任务。你可以使用普通函数来做你需要做的事情。只需确保您不会通过设置自己的命名空间来污染全局命名空间。

但是，如果只想使用 jQuery 命名空间而不是您自己的命名空间，这里有一个快速添加它们的方法：

```
$.fn.functionName = function(){
   //do what your function does
   //"this" in here is the jQuery object you preceded the function
   //to allow chaining, you must return a jQuery object
}; 
```

效果是这样的：

```
$(selector).functionName() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:35:33.683

jQuery 只是帮助函数的集合。它不会影响您定义函数的方式。所以你现在的代码可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T05:40:04.823

jQuery 不是关于构建您的 javascript 代码，因为您应该使用 Javascript 封装、对象和原型。有许多构建 Javascript 代码的建议方法。

您还可以查看定义[jQuery 插件创作](http://docs.jquery.com/Plugins/Authoring)，以帮助您使代码更有条理。

# orchardcms - orchard cms：如何将媒体选择器字段添加到新模块

> ID：10369967
> 
> 赞同：4
> 
> 时间：2012-04-29T05:36:08.743
> 
> 标签：orchardcms, asp.net-mvc

我正在为果园 cms 构建一个模块。我想在我的模块中使用 mediapiker 模块。

通过果园后端接口，可以将模块添加到内容项。尚不清楚的是如何在另一个模块中使用一个模块。

如何将 mediapiker 字段添加到 Visual Studio 中的剃刀视图？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T20:23:21.260

你应该看看 MediaPickerFieldDriver.cs 和 MediaPicker.Edit.cshtml。他们都在 Orchard.Fields。那应该给你你需要的一切。再说一次，你要做什么并不完全清楚。如果您只是尝试从代码中将媒体选择器字段添加到您的内容类型，那么您应该从迁移中执行此操作，如下所示：

```
ContentDefinitionManager.AlterPartDefinition("Product",
    builder => builder.WithField("ProductImage",
        fieldBuilder => fieldBuilder
            .OfType("MediaPickerField")
            .WithDisplayName("Product Image"))); 
```

更新：正如@ed13 在他的回答中指出的那样，对于 Orchard 1.x (1.10+) 的更新版本，字段类型是`MediaLibraryPickerField`而不是`MediaPickerField`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-27T11:17:34.570

如果它对使用更高版本的 Orchard (v1.10.+) 的任何人有所帮助，添加媒体选择器字段所需的代码如下：

```
ContentDefinitionManager.AlterPartDefinition("YourContentPart", builder =>
                builder.WithField("BackgroundImage",
                    fieldBuilder => fieldBuilder
                        .OfType("MediaLibraryPickerField")
                        .WithDisplayName("Background Image"))); 
```

希望对某人有所帮助。

# ffmpeg - 将原始 H264 NALU 流包装到 MP4 等容器中

> ID：10369971
> 
> 赞同：2
> 
> 时间：2012-04-29T05:36:28.473
> 
> 标签：ffmpeg, directshow, x264, ms-media-foundation, dxva

我有一个应用程序，它使用 x264 x264_encoder_encode 即时发送编码生成的原始 h264 NALU。我通过普通的 TCP 获取它们，所以我不会丢失任何帧。我需要能够使用 Windows 中的硬件加速 (DXVA2) 在客户端中解码这样的流。我一直在努力寻找一种使用 FFMPEG 使其工作的方法。也许尝试 Media Foundation 或 DirectShow 可能更容易，但它们不会采用原始​​ H264。我要么需要：

1.  更改服务器应用程序的代码以返回 mp4 流。我对x264没有那么有经验。我可以通过调用 x264_encoder_encode 来获取原始 H264，方法是遵循以下问题的答案：[如何使用 x264 C API 将一系列图像编码为 H264？](https://stackoverflow.com/questions/2940671/how-does-one-encode-a-series-of-images-into-h264-using-the-x264-c-api)我怎样才能从这个转到 MP4 中包装的东西，同时仍然能够实时流式传输它

2.  我可以在接收器处用 mp4 头文件将其包装起来，然后将其输入到可以使用 DXVA 播放的东西中。我不知道该怎么做

3.  我可以找到另一种方法来使用带有 FFMPEG 的 DXVA 或其他以原始格式获取它的东西来加速它。

一个重要的限制是我需要能够在显示每个解码帧之前对其进行预处理。任何一步完成解码和显示的解决方案都不适合我

两种解决方案我都可以

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T04:58:59.620

我相信您应该能够通过 Media Foundation 使用 H.264 数据包。这本书的第 298 页上有一个示例[http://www.docstoc.com/docs/109589628/Developing-Microsoft-Media-Foundation-Applications#](http://www.docstoc.com/docs/109589628/Developing-Microsoft-Media-Foundation-Applications#)使用带有媒体基础的 HTTP 流。

我自己只是在学习 Media Foundation，并且正在尝试对您做类似的事情，在我的情况下，我想使用 RTP 数据包中的 H.264 有效负载，并且据我所知，这将需要自定义[IMFSourceReader](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374655%28v=vs.85%29.aspx)。从我读过的内容中也应该可以访问解码的帧，因为将组件链接在一起形成拓扑似乎具有完全的灵活性。

# python - Pygame 或 Python 中的透明窗口

> ID：10369973
> 
> 赞同：2
> 
> 时间：2012-04-29T05:36:51.140
> 
> 标签：python, linux, transparency, pygame

我试图为我的游戏制作一个透明窗口作为启动画面。图像具有透明度，但我无法使窗口透明（如查看屏幕、桌面等。）我发现所有的 pygame 都是不行的。有没有我可以从中提取的外部库来实现这一点？顺便提一句。这完全是一个 Linux 项目。所以特定于操作系统也可以。

```
#Splash Screen
screen = pygame.display.set_mode((680,300), NOFRAME)
splashbg = pygame.image.load("Images/SplashBG.png")
font = pygame.font.Font(None, 36)

pygame.mixer.music.load("OriginalEnd.mp3")
pygame.mixer.music.play(-1)

screen.blit(splashbg,(0,0))
loadingtext = font.render("Loading...", 1, (255,255,255))
screen.blit(loadingtext, (200,250))
pygame.display.flip()
pygame.time.delay(4000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T15:18:03.763

你总是可以用*假装*透明的方式来修改它。无论如何，这不是一个理想的解决方案，但它可能会奏效..

在启动屏幕之前，使用 PIL 对桌面进行快照，首先对其进行 blit，然后在其上绘制透明图像。这样，它至少会给人一种透明的*错觉*。

有点像：

```
import ImageGrab, Image 

im = Imagegrab.grab()
im.save('faux_trans.png','png')

for_trans = pygame.image.load('faux_trans.png').convert()

splash = pygame.image.load.... 

screen.blit(for_trans, (0,0))

# and so on. 
```

就像我说的那样，这不是最好的解决方案，但是如果您启动游戏 NOFRAME 或全屏，您也许可以侥幸逃脱！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-02T15:14:13.973

对于跨平台解决方案，您可以使用[Raylib-Python-CFFI](https://github.com/electronstudio/raylib-python-cffi)库。

Raylib 具有 2D、3D、字体绘图以及在透明窗口上无法绘制的更多功能：

[跨平台透明窗](https://i.stack.imgur.com/OulYM.png)

以上示例的源代码：

```
from raylib.dynamic import raylib as rl, ffi

rl.SetConfigFlags(rl.FLAG_WINDOW_TRANSPARENT | rl.FLAG_WINDOW_RESIZABLE)
rl.InitWindow(800, 600, b'Transparency Test')

CLEAR = [0] * 4
GREEN = [140, 189, 72, 255]

font_size = 60
camera = ffi.new("struct Camera3D *", [[18.0, 16.0, 18.0], [0.0, 0.0, 0.0], [0.0, 1.0, 0.0], 45.0, 0])

rl.SetCameraMode(camera[0], rl.CAMERA_ORBITAL)

while not rl.WindowShouldClose():
    rl.UpdateCamera(camera)
    rl.BeginDrawing()
    rl.ClearBackground(CLEAR)
    rl.BeginMode3D(camera[0])
    rl.DrawGrid(20, 1)
    rl.DrawCube([0, 0, 0], 2, 2, 2, GREEN)
    rl.EndMode3D()
    rl.DrawText(b'Hello World', 64, 64, font_size, GREEN)
    rl.EndDrawing() 
```

# c - 在 C 中，通用容器还是安全容器？

> ID：10369976
> 
> 赞同：9
> 
> 时间：2012-04-29T05:37:28.783
> 
> 标签：c, containers, idioms, void-pointers, generic-programming

在 C++ 中，您可以使用模板同时拥有通用容器和类型安全容器。但是在 C 中，如果你想要通用容器，你必须（afaik） use `void*`，这意味着你失去了类型安全。要拥有类型安全的容器，您必须为要保存的每种类型的数据重新实现它们。

鉴于 C 遵循比 C++ 更多*的程序员知道他在做什么的*哲学，那么在 C 中更惯用的做法是：使用带有 的通用容器`void*`，或者为每种类型的数据制作自定义容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T06:19:21.087

我的目标是通用容器：

1.  一旦你习惯了它，`void *`当我不在乎它的类型时，你只会想到它的类型。就像`Object`在 Java 中一样——很长一段时间以来，通用容器也没有类型安全性。

2.  你只有一个地方可以改进。

3.  你没有得到类型安全；但是随着类型安全容器的重复实现，您将面临复制和粘贴错误的风险。这也可能导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:58:22.677

所以我快速搜索了一下，看看在 C 容器领域是否出现了任何新的聪明想法。

我找到[了这个](http://code.google.com/p/ccl/)。这是对完整 C 容器库的一次相当彻底的尝试。

它传递要包含在`void *`指针中的元素。没有尝试指定特定类型的结构。

为了类型安全，您可以为每个容器编写一个“包装器”宏，它定义了一个主机 if 内联函数，该函数环绕无类型版本并提供类型安全。希望它们会被编译器优化掉，但这并不总是可能的。而且宏会*很丑*。

我想这就是为什么更多（应用程序）程序是用 C++ 而不是 C 编写的原因之一。用 C 创建复杂抽象的能力是有限的。您可以这样做，但通常会牺牲其他方面，例如性能或可维护性（例如，查看 C GTK 程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T05:39:09.253

要创建一个在 C 中处理通用数据的类型，您可以使用 a`void*`来传递数据。为每种可能的类型定义新算法是不切实际的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T05:53:57.463

`void*`作为成员使用并没有真正的好处（除非编译时间是最重要的），您始终可以`void*`在适当的地方强制转换，然后在必要时对无类型数据块进行操作。

我已经在 C 中实现了这样的接口（例如，具有不同类型的命名字段的多个变体）。我倾向于拥有类型安全性，并且在这些实现中很少发现强制转换为`void*`一件好事。

……再说一次，我花在写 c++ 上的时间比写 c 的时间要多 :)

# java - 带有 GridLayout JFrame 的 JPanel 内的 JButton

> ID：10369982
> 
> 赞同：9
> 
> 时间：2012-04-29T05:37:55.433
> 
> 标签：java, eclipse, swing, user-interface, layout

我有一个设置为 NxN 大小的 GridLayout 的 JFrame。N 由用户在程序开始时作为命令行给出。NxN 模式中的 JButton 被添加到 JPanel 的窗口中，由 GridLayout 设置（我认为）。

每个 JButton 是否需要自己的 JPanel 才能使用 GridLayout？我的印象是，您可以为所有按钮设置一个 JPanel，并将 JPanel 设置为 JButtons 的 GridLayout。我想在按钮数组的左侧添加另一个 JPanel 以显示按钮单击（JLabel）和同一左侧 JPanel 中的重置按钮。

这是（一点）我的代码，其中 N 由用户给出，system 是我的后台进程类，ButtonEvent 是 ActionListener/actionPerformed 的类：

```
JFrame window = new JFrame("");
GridLayout layout = new GridLayout(N,N);
window.setLayout(layout);

for (int row = 0; row < N; row++){
    for (int col = 0; col < N; col++){
        JPanel panel = new JPanel();
        JButton b = new JButton ("("+row+","+col+")");
        window.add(b).setLocation(row, col);
        panel.add(b);
        b.addActionListener(new ButtonEvent(b, system, row, col));
        window.add(panel);
    }
}

window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.pack();
window.setVisible(true); 
```

这就是我所拥有的（N = 4）：

[http://i.imgur.com/nbQoM.png](https://i.imgur.com/nbQoM.png)

这是（大约）我正在寻找的（N = 4）：

[http://i.imgur.com/SiVWO.png](https://i.imgur.com/SiVWO.png)

我需要/想要的只是两个（或更多）JPanels，它们的设置大致类似于上面，而且我尝试过的所有布局管理器都不能很好地与 GridLayout 布局 JFrame 配合使用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-29T12:07:33.193

这里试试这个代码示例：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class LayoutExample extends JFrame
{
    private static final String INITIAL_TEXT = "Nothing Pressed";
    private static final String ADDED_TEXT = " was Pressed";
    private JLabel positionLabel;
    private JButton resetButton;
    private static int gridSize = 4;

    public LayoutExample()
    {
        super("Layout Example");
    }

    private void createAndDisplayGUI()
    {       
        setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        JPanel contentPane = new JPanel();
        contentPane.setLayout(new FlowLayout(FlowLayout.LEFT, 20, 20));
        contentPane.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 2));

        JPanel leftPanel = new JPanel();
        leftPanel.setBorder(BorderFactory.createLineBorder(Color.DARK_GRAY, 2));
        leftPanel.setLayout(new BoxLayout(leftPanel, BoxLayout.Y_AXIS));    
        JPanel labelPanel = new JPanel();
        positionLabel = new JLabel(INITIAL_TEXT, JLabel.CENTER);
        JPanel buttonLeftPanel = new JPanel();
        resetButton = new JButton("Reset");
        resetButton.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                positionLabel.setText(INITIAL_TEXT);
            }
        });
        labelPanel.add(positionLabel);
        buttonLeftPanel.add(resetButton);
        leftPanel.add(labelPanel);
        leftPanel.add(buttonLeftPanel);

        contentPane.add(leftPanel);

        JPanel buttonPanel = new JPanel();
        buttonPanel.setLayout(new GridLayout(gridSize, gridSize, 10, 10));
        for (int i = 0; i < gridSize; i++)
        {
            for (int j = 0; j < gridSize; j++)
            {
                JButton button = new JButton("(" + i + ", " + j + ")");
                button.setActionCommand("(" + i + ", " + j + ")");
                button.addActionListener(new ActionListener()
                {
                    public void actionPerformed(ActionEvent ae)
                    {
                        JButton but = (JButton) ae.getSource();
                        positionLabel.setText(
                            but.getActionCommand() + ADDED_TEXT);                           
                    }
                });
                buttonPanel.add(button);
            }
        }
        contentPane.add(buttonPanel);

        setContentPane(contentPane);
        pack();
        setLocationByPlatform(true);
        setVisible(true);
    }

    public static void main(String[] args)
    {
        if (args.length > 0)
        {
            gridSize = Integer.parseInt(args[0]);
        }
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new LayoutExample().createAndDisplayGUI();
            }
        });
    }
} 
```

**输出 ：**

![开始](../Images/fadbb0229ab58ef7cc7d1e989d7420a8.png) ![点击后](../Images/cc0a6a927c405ca4a1a0cfeaf9808ebe.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-29T06:27:59.253

> 每个 JButton 是否需要自己的 JPanel 才能使用 GridLayout？

不。 JFrame 上的 Add 和 setLayout 不会像它们看起来那样做。JFrame 是顶级容器，最好在 JPanel 中组织您的内容。

您应该以这种形式组织您的面板：

```
----JPanel----------------------------|
| ---LeftPanel---  ---ButtonsPanel--- |
| |             |  |                | |
| |             |  |                | |
| |             |  | GridLayout(N,N)| |
| |             |  |                | |
| |             |  |                | |
| ---------------  ------------------ |
--------------------------------------- 
```

然后将 JPanel 添加到 JFrame。还将面板放在单独的类中：

```
class BPanel extends JPanel {
    public BPanel() {
        GridLayout layout = new GridLayout(N,N, hgap, vgap);
        setLayout(layout);
        for (int row = 0; row < N; row++){
            for (int col = 0; col < N; col++){
                JButton b = new JButton ("("+row+","+col+")");
                add(b).setLocation(row, col);
                b.addActionListener(new ButtonEvent(b, system, row, col));
            }
        }
    }
}
class LeftPanel extends JPanel {
....
}

class MainFrame extends JFrame {
    public MainFrame() {
        JPanel p = new JPanel();
        p.add(new LeftPanel());
        p.add(newButtonsPanel());
        add(p);
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T17:03:44.777

为每个按钮（或按钮组）提供自己的面板的一个优点是嵌套面板可以具有不同的布局。在此[示例](https://stackoverflow.com/a/3420431/230513)中，每个嵌套`ButtonPanel`都有默认值`FlowLayout`，因此按钮的大小在调整封闭容器的大小时保持不变。

# android - “null”附近的 SQLiteException：语法错误：，编译时：INSERT OR REPLACE INTO

> ID：10369986
> 
> 赞同：1
> 
> 时间：2012-04-29T05:38:30.860
> 
> 标签：android, sqlite, sqliteopenhelper

我正在尝试配置一个简单的 DbHelper，并在执行时出错。

错误是：

```
 SQLiteException near "null": syntax error: , while compiling: INSERT OR REPLACE INTO 
```

我无法弄清楚是什么问题？

DbHelper 类是：

```
 package com.sqlite.test1;

    import android.content.Context;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteOpenHelper;

    public class DbHelper extends SQLiteOpenHelper{

    public static final int DB_VERSION = 1;
    public static final String DB_NAME = "time_storage";
    public static final String DB_TABLE = "timer_data";

    public static final String C_ID = "iderty_id";
    public static final String C_DATE = "date";
      Context context;

    public DbHelper(Context context) {
        super(context, DB_NAME, null, DB_VERSION);
        this.context = context;
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("create table if not exists " + DB_TABLE + " (" + C_ID + "integer primary key autoincrement, " 
                    + C_DATE + " text not null );");

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS " + DB_TABLE);
        this.onCreate(db);      
    }} 
```

主要课程是：

```
package com.sqlite.test1;

import android.app.Activity;
import android.content.ContentValues;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;

public class SQlite_test1Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    DbHelper dbHelper = new DbHelper(SQlite_test1Activity.this);
    SQLiteDatabase db = dbHelper.getWritableDatabase();

    String variable1 = "this is the first text to database";
    ContentValues values = new ContentValues();
    db.insertWithOnConflict(DbHelper.DB_TABLE, null, values,
            SQLiteDatabase.CONFLICT_REPLACE);
    values.put(DbHelper.C_DATE, variable1);

    db.close();
    dbHelper.close();

}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T05:45:19.140

您需要在插入之前输入值，而不是之后，否则您不会插入任何内容。改变这个：

```
ContentValues values = new ContentValues();
db.insertWithOnConflict(DbHelper.DB_TABLE, null, values,
        SQLiteDatabase.CONFLICT_REPLACE);
values.put(DbHelper.C_DATE, variable1); 
```

对此：

```
ContentValues values = new ContentValues();
values.put(DbHelper.C_DATE, variable1);
db.insertWithOnConflict(DbHelper.DB_TABLE, null, values,
        SQLiteDatabase.CONFLICT_REPLACE); 
```

**编辑**

发现另一个问题：

```
db.execSQL("create table if not exists " + DB_TABLE + " (" + C_ID + "integer primary key autoincrement, " + C_DATE + " text not null );"); 
```

上面的代码正在创建一个名为`iderty_idinteger`. 它应该是这样的：

```
db.execSQL("create table if not exists " + DB_TABLE + " (" + C_ID + " integer primary key autoincrement, " + C_DATE + " text not null );"); 
```

注意之前插入的空格`integer primary`...

# java - 关于 long 和 float

> ID：10369989
> 
> 赞同：3
> 
> 时间：2012-04-29T05:39:03.387
> 
> 标签：java

我正在开发以下代码

```
static String m(float i) {
    return "float";
}

static String m(double i) {
    return "double";
}

public static void main(String[] args) {
    int a1 = 1;
    long b1 = 2;
    System.out.print(m(a1) + "," + m(b1));
} 
```

两者都导致输出 float, float ，请告知背后的原因以及如何调用 double 请告知非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T07:11:48.317

**简短回答：** Java 可以自动将`int`s 和`long`s 扩大到`float`s 和`double`s，但 Java 会选择扩大到 a `float`，因为它比 a 更小（就内存占用而言）`double`。您可以`double`通过将参数显式转换为 a 来调用该方法的版本`double`：

```
System.out.print(m((double)a1) + "," + m((double)b1)); 
```

**长答案：** Java 中的每种原始数据类型都有一个大小（以字节为单位），它决定了给定原始数据可以容纳多少信息（或者更确切地说，是什么*范围的值）。*下表显示了一些 Java 原始数据类型的大小：

```
byte     1 byte
short    2 bytes
char     2 bytes
int      4 bytes
float    4 bytes
long     8 bytes
double   8 bytes 
```

在某些情况下，Java 会自动为您“扩展”值，遵循[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/index.html)中一些[明确定义的规则](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.2)。以下扩展原语转换由 Java 自动执行：

*   `byte`到`short`, `int`, `long`, `float`, 或`double`
*   `short`到`int`, `long`, `float`, 或`double`
*   `char`到`int`, `long`, `float`, 或`double`
*   `int`到`long`, `float`, 或`double`
*   `long`到`float`或`double`
*   `float`到`double`

适用于这种情况的其他规则是：

1.  加宽不会丢失有关数值整体*大小的信息。*
2.  从一个整数类型扩大到另一个整数类型根本不会丢失任何信息；数值被完全保留。
3.  `int`将 a或值扩大`long`到 a`float`或将`long`值扩大到 a`double`可能会导致*精度损失*。

例如，Java 可以安全地将 an`int`扩展为 a`long`而根本不改变数值，因为两者都是整数类型并且 a`long`大于 an `int`（参见规则 2）。Java 也可以将 a 扩大`int`到 a `float`，但可能会损失*精度*。下面的示例代码演示了这种精度损失。

```
public static void foo(float f) {
    System.out.println(f);
}

public static void main(String[] args) {
    int a = 123;
    int b = 1234567890;
    foo(a);
    foo(b);
} 
```

第一次调用`foo(float)`按预期打印“123.0”。值“ `int`123”被扩大到`float`值“123.0”。第二个调用打印“1.23456794E9”，当您考虑规则 3 时，这是有道理的。值“1234567940”与“1234567890”的*量级*相同，但*精度*较低。

另一条关键信息：当存在多个重载方法时，Java 通过选择具有**最小**参数类型（就内存占用而言）的方法来确定调用哪个方法，以便给定参数能够扩展为参数类型。换句话说，你传递给方法的数量必须能够扩大到方法的参数类型，*如果*多个重载方法满足该要求，Java 将选择参数类型最小的方法。

在您的情况下，您将 an`int`和 a传递`long`给两个重载方法之一。Java 将查看方法`m(float)`并`m(double)`确定调用哪个方法。an`int`可以扩大到 a`float` *和*a `double`，但是 a `float`（4 个字节）小于 a `double`（8 个字节），所以 Java 会选择调用`m(float)`. 当您使用`long`参数调用方法时也是如此：`float`选择它是因为它是 a`long`可以扩展到的最小数据类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T05:43:35.887

如果要调用`double`版本，请将其明确设为双精度： `m((double)a1)`

看看[JLS §8.4.9 - 方法重载](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.9)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T05:43:27.930

尝试

```
 System.out.print(m(1f)+","+ m(2d)); 
```

你为什么要创建一个 int 和 long 来测试它？好吧，实际发生的是默认情况下这两个参数都转换为浮点数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T05:43:58.267

> 我怎么能叫双重？

使用`double`变量

```
double d = 3.3;
m(d); 
```

# java - NoSuchMethodError javax.faces.application.StateManager.saveView(Ljavax/faces/context/FacesContext;)Ljava/lang/Object;

> ID：10369990
> 
> 赞同：0
> 
> 时间：2012-04-29T05:39:05.790
> 
> 标签：java, jsf, jasper-reports

我目前正在使用 Icefaces 1.8.2、JSF 1.1、JasperReports 4.5.1 和 weblogic 10.3.2 我尝试在单击 excel 图像时创建一个功能，它将尝试使用 Jasper Report 将结果获取到 excel 文件中。我可以编译以下代码。

```
public String downloadToExcel(javax.faces.event.ActionEvent event)
{
    InputStream reportStream = null;
    try
    {

        FacesContext context = FacesContext.getCurrentInstance();  
        ExternalContext ext = context.getExternalContext();  
        //reportStream = ext.getResourceAsStream("resources/jasper/PreviousBookings.jasper"); 
        reportStream = JRLoader.getResourceInputStream("resources/jasper/PreviousBookings.jasper");
        //JasperReport jasperReport = JasperCompileManager.compileReport(fis);
        Object[] previousBooking = new Object[newOpportunityByPreviousBookingDTOList.size()];
        int i = 0;
        for(NewOpportunityDTO previousBookingDTO:newOpportunityByPreviousBookingDTOList)
        {
            previousBooking[i] = previousBookingDTO;
            i++;
        }

        /*
        reportStream = JRLoader.getResourceInputStream("resources/jasper/PreviousBookings.jasper");
        JasperPrint jprint1 = JasperFillManager.fillReport(reportStream, new HashMap(), new JRBeanArrayDataSource(previousBooking));
        JRXlsxExporter exporterXLS = new JRXlsxExporter();
        exporterXLS.setParameter(JRXlsExporterParameter.JASPER_PRINT, jprint1);
        exporterXLS.setParameter(JRXlsExporterParameter.OUTPUT_FILE_NAME, "c:/test1/test.xlsx");
        exporterXLS.exportReport();
        */
        JasperPrint jasperPrint = JasperFillManager.fillReport(reportStream, new HashMap(), new JRBeanArrayDataSource(previousBooking)); 
        HttpServletResponse resp = (HttpServletResponse) ext  
                .getResponse();  

        resp.setContentType("application/vnd.ms-excel");  
        String filename = new StringBuffer("previousBookings").append(  
                ".xls").toString();  
        resp.setHeader("Content-Disposition", "inline;filename="  
                + filename);  

        JExcelApiExporter exporterXLS = new JExcelApiExporter();  

        exporterXLS.setParameter(  
            JRXlsExporterParameter.JASPER_PRINT,  
            jasperPrint);  
        exporterXLS.setParameter(  
            JRXlsExporterParameter.IS_DETECT_CELL_TYPE,  
            Boolean.TRUE);  
        exporterXLS.setParameter(  
            JRXlsExporterParameter.IS_WHITE_PAGE_BACKGROUND,  
            Boolean.FALSE);  
        exporterXLS.setParameter(  
            JRXlsExporterParameter.IS_REMOVE_EMPTY_SPACE_BETWEEN_ROWS,  
            Boolean.TRUE);  
        exporterXLS.setParameter(  
            JRXlsExporterParameter  
                .IS_REMOVE_EMPTY_SPACE_BETWEEN_COLUMNS,  
            Boolean.TRUE);  
         exporterXLS.setParameter(  
        JRXlsExporterParameter.IS_IGNORE_CELL_BORDER,  
         Boolean.TRUE);  
        exporterXLS.setParameter(JRXlsExporterParameter.OUTPUT_STREAM, 
                resp.getOutputStream());  
        exporterXLS.exportReport();
        //byte[] reportPDF = JasperRunManager.runReportToPdf(reportStream, parameterMap, connection); 

        //context.getApplication().getStateManager().saveView(context);  
        context.getApplication().getStateManager().saveSerializedView(context);  
        ServletOutputStream out;
        out = resp.getOutputStream();

        BufferedOutputStream bos = new BufferedOutputStream(out);
        bos.flush();
        bos.close();

        context.responseComplete();  

    }
    catch(Exception e)
    {
        Utility.setTab(AirFreightConstants.AIRFREIGHT_OPPORTUNITIES);
        log.error(StringUtil.exceptionToString(e));
        setErrorMessage("operation.failed.error.message", "Error Detail:"+StringUtil.exceptionToString(e));
        return null;
    }
    return "success";
} 
```

我尝试使用“saveView”，但出现以下错误：

```
Caused By: java.lang.NoSuchMethodError: javax.faces.application.StateManager.saveView(Ljavax/faces/context/FacesContext;)Ljava/lang/Object;
    at com.cta.web.beans.OpportunitiesBean.downloadToExcel(OpportunitiesBean.java:321)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    Truncated. see log file for complete stacktrace 
```

所以从下面的 url (https://jira.springsource.org/browse/SWF-1112) 它告诉我使用 saveSerializedView 我可以编译但是在执行时得到以下错误：

```
23:38:22,002 ERROR ViewRootStateManagerImpl:145 - Exception finding JSF1.2 saveView method on delegate
java.lang.NoSuchMethodException: org.apache.myfaces.application.jsp.JspStateManagerImpl.saveView(javax.faces.context.FacesContext)
    at java.lang.Class.getMethod(Class.java:1605)
    at com.icesoft.faces.application.ViewRootStateManagerImpl.initializeParameters(ViewRootStateManagerImpl.java:143)
    at com.icesoft.faces.application.ViewRootStateManagerImpl.saveView(ViewRootStateManagerImpl.java:157)
    at com.icesoft.faces.application.ViewRootStateManagerImpl.saveSerializedView(ViewRootStateManagerImpl.java:193)
    at com.cta.web.beans.OpportunitiesBean.downloadToExcel(OpportunitiesBean.java:322)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.sun.el.parser.AstValue.invoke(AstValue.java:130)
    at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
    at com.sun.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:68)
    at com.sun.facelets.el.LegacyMethodBinding.invoke(LegacyMethodBinding.java:69)
    at javax.faces.component.UICommand.broadcast(UICommand.java:89)
    at com.icesoft.faces.component.panelseries.UISeries$RowEvent.broadcast(UISeries.java:633)
    at com.icesoft.faces.component.panelseries.UISeries.broadcast(UISeries.java:295)
    at com.icesoft.faces.component.paneltabset.PanelTabSet.broadcast(PanelTabSet.java:318)
    at javax.faces.component.UIViewRoot._broadcastForPhase(UIViewRoot.java:97)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:171)
    at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:32)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:95)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:70)
    at com.icesoft.faces.webapp.http.core.JsfLifecycleExecutor.apply(JsfLifecycleExecutor.java:50)
    at com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.renderCycle(ReceiveSendUpdates.java:171)
    at com.icesoft.faces.webapp.http.core.ReceiveSendUpdates.service(ReceiveSendUpdates.java:112)
    at com.icesoft.faces.webapp.http.core.RequestVerifier.service(RequestVerifier.java:65)
    at com.icesoft.faces.webapp.http.servlet.BasicAdaptingServlet.service(BasicAdaptingServlet.java:48)
    at com.icesoft.faces.webapp.http.servlet.SessionVerifier.service(SessionVerifier.java:58)
    at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:55)
    at com.icesoft.faces.webapp.http.servlet.SessionDispatcher.service(SessionDispatcher.java:77)
    at com.icesoft.faces.webapp.http.servlet.PathDispatcher.service(PathDispatcher.java:55)
    at com.icesoft.faces.webapp.http.servlet.MainServlet.service(MainServlet.java:192)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at com.icesoft.faces.webapp.xmlhttp.BlockingServlet.service(BlockingServlet.java:67)
    at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:227)
    at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:125)
    at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:292)
    at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:26)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at com.fedex.login.filter.WssoAuthenticationFilter.doFilter(WssoAuthenticationFilter.java:188)
    at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:56)
    at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3592)
    at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:321)
    at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:121)
    at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2202)
    at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2108)
    at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1432)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:201)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:173) 
```

这是`JasperReport.jxml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report3" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="Table Dataset 1"/>
    <subDataset name="Table Dataset 2"/>
    <field name="awb" class="java.lang.String"/>
    <field name="departureDate" class="java.lang.String"/>
    <field name="destination" class="java.lang.String"/>
    <field name="statusDescription" class="java.lang.String"/>
    <field name="owner" class="java.lang.String"/>
    <field name="comments" class="java.lang.String"/>
    <field name="flight" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="61" splitType="Stretch">
            <staticText>
                <reportElement x="6" y="28" width="80" height="30"/>
                <textElement/>
                <text><![CDATA[Departure Date]]></text>
            </staticText>
            <staticText>
                <reportElement x="91" y="28" width="50" height="30"/>
                <textElement/>
                <text><![CDATA[AWB]]></text>
            </staticText>
            <staticText>
                <reportElement x="215" y="28" width="100" height="30"/>
                <textElement/>
                <text><![CDATA[Destination]]></text>
            </staticText>
            <staticText>
                <reportElement x="330" y="28" width="73" height="30"/>
                <textElement/>
                <text><![CDATA[Status]]></text>
            </staticText>
            <staticText>
                <reportElement x="417" y="28" width="54" height="30"/>
                <textElement/>
                <text><![CDATA[Owner]]></text>
            </staticText>
            <staticText>
                <reportElement x="481" y="28" width="73" height="30"/>
                <textElement/>
                <text><![CDATA[Comments]]></text>
            </staticText>
            <staticText>
                <reportElement x="145" y="28" width="50" height="30"/>
                <textElement/>
                <text><![CDATA[Flight]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch">
            <textField>
                <reportElement x="7" y="13" width="70" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{departureDate}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="92" y="13" width="50" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{awb}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="145" y="15" width="50" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{flight}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="211" y="17" width="100" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{destination}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="332" y="13" width="72" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{statusDescription}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="418" y="15" width="54" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{owner}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="482" y="13" width="100" height="30"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{comments}]]></textFieldExpression>
            </textField>
        </band>
        <band height="50"/>
        <band height="50"/>
        <band height="50"/>
        <band height="50"/>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T05:51:13.500

该方法是在 JSF 1.2 中引入的，因此在 JSF 1.1 中不可用。您需要升级 WebLogic 以使用 JSF 1.2 并重新声明`faces-config.xml`您的 webapp 符​​合 JSF 1.2 规范。

* * *

**与具体问题无关**，此时需要保存 JSF 视图是很奇怪的。它不会像您想象的那样包含生成的 Jasper 报告（仅仅是因为这不是 JSF 视图......）。但那是另一回事了。顺便说一句，您不会以任何方式将报告写入响应正文。也许那是你*真正的*问题？

# php - PHP 文件名和文件大小输出

> ID：10369991
> 
> 赞同：0
> 
> 时间：2012-04-29T05:39:09.097
> 
> 标签：php, file, directory, filesize

如何使用 PHP 在文件名旁边添加文件大小？？？

目前使用这个：

```
<?php
# Configuration
$show_path = 0;   # Show local path.
$show_dotdirs = 1;   # Show '.' and '..'.

$path = substr($_SERVER['SCRIPT_FILENAME'], 0,
    strrpos($_SERVER['SCRIPT_FILENAME'], '/') + 1);
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link rel="stylesheet" type="text/css" href="style.css"/>
</head>

<body>
<div id="menu">
  <div id="menualign"><a href="index.php"><img src="images/home.png" onmouseover="src='images/homed.png'" onmouseout="src='images/home.png'"/></a><img src="images/moviesa.png"/><a href="tvguide.php"><img src="images/tv.png" onmouseover="src='images/tvd.png'" onmouseout="src='images/tv.png'"/></a></div>
</div>
<div id="container">
  <div id="fleft">
    <table cellspacing="1">
      <tr>
        <th><?php if ($show_path == 1) { echo $path; } else { echo 'Current Movies'; } ?></th>
      </tr>
      <tr>
        <td align="left"><?php
$dirs = array();
$files = array();

$dir = dir('../Movies/');
while ($entry = $dir->read()) {
    if (($entry != '.') and (substr($entry, -4) != '.php')) {
        if (is_dir($entry)) {
            if (($entry != '..') or $show_dotdirs){
                $dirs[] = $entry;
            }
        } else {
            $files[] = $entry;
        }
    }
}
$dir->close();

sort($dirs);
foreach ($dirs as $dir) {
    printf('<strong>&lt;</strong> <a href="%s">%s</a> <strong>&gt;</strong><br />' . "\n", $dir, $dir);
}

sort($files);
foreach ($files as $file) {
    printf('<hr />%s<br />' . "\n", $file, $file);
}
?></td>
      </tr>
    </table>
  </div>
  <div id="fright">TEST
  </div>
</div>
</body>
</html> 
```

输出如下：[http ://downunderpctech.com/output.png](http://downunderpctech.com/output.png)

我想为文件大小添加一个部分

可能使用相同的代码，但收集文件大小信息作为文件名但在它旁边的一个新的

我不太关心文件大小输出，但更喜欢只输出 KB

谢谢，亚当

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T05:58:39.900

[`filesize`](http://php.net/filesize)您应该在变量上使用该函数`$file`。

然后你可以用[这个小函数](http://snipplr.com/view/4633/)输出一个人类可读的大小：

```
function file_size($size)
{
  $filesizename = array(" Bytes", " KB", " MB", " GB", " TB", " PB", " EB", " ZB", " YB");
  return $size ? round($size/pow(1024, ($i = floor(log($size, 1024)))), 2) . $filesizename[$i] : '0 Bytes';
} 
```

在 the 之前定义函数`# Configuration`，然后在 foreach 中调用它：

```
echo file_size(filesize('../Movies/'.$file)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T05:58:17.060

您可以写入文件，然后使用 filesize 函数获取文件大小并使用文件名中的大小重命名文件。

[http://php.net/manual/en/function.filesize.php](http://php.net/manual/en/function.filesize.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T05:58:34.783

您可以将其添加到您的 foreach

```
echo '<span>'.round(filesize ('../Movies/'.$file)/1024, 1).' Kb</span>'; 
```

# javascript - jquery - 根据来自单击的过滤器选项和容器元素值的匹配值过滤元素

> ID：10369994
> 
> 赞同：0
> 
> 时间：2012-04-29T05:39:16.663
> 
> 标签：javascript, jquery, each

**更新 2：**

非常感谢你们的帮助。虽然所有三种解决方案都有效，但我喜欢 Bill 的可读性和性能。与往常一样，我对这里的专业水平和帮助感到惊讶。非常感谢您的帮助。

**更新：**

将演示放在 jsfiddle 上：http: [//jsfiddle.net/FC4QE/17/](http://jsfiddle.net/FC4QE/17/)

我需要创建一个过滤器。用户单击品牌名称链接，如果匹配，则我需要过滤掉其他产品。品牌包含在产品名称中，因此我正在搜索匹配项，如果有一个或多个，我需要隐藏其他产品。

我有以下 javascipt/jquery 代码：

```
$(function(){   
    $('#filter-by-brand li a').click(function(){
        // get html string of clicked item
        var brandNameSelected = $(this).html();
        var productContainer = $('#product-collection div.productBoxWrapper');

        // reset products in the view
        if (brandNameSelected == 'All Brands'){
            productContainer.fadeIn("slow");
        }
        // for each product title (a tag)
        $("#product-collection h4 a").each(function(){
            var productTitle = jQuery(this).html();

            // if item clicked is contained inside product title, hide all 
            // products and only show the ones where the title matched
            if(productTitle.indexOf(brandNameSelected) != -1){
                // hide container of all products, this hides all products
                productContainer.fadeOut("slow");
                // then show only ones that match. the problem is that only the one product is 
                // displayed since we're inside the .each. How can I show all  products where product title contains the item clicked? 
                $(this).parent().parent().parent().parent().fadeIn("slow");
            }
        });
    });
}); 
```

我在代码内的注释中解释了所有内容，但基本上，当代码有效时，因为我显示的产品单击的项目包含在 .each 方法中，它只显示匹配的最后一个项目。如何在 .each 中显示所有匹配的，或者这是不可能的，还有其他方法吗？

希望这是有道理的，并且有人可能会有一些建议！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T07:05:06.623

我从中得到了最好看的结果：

```
$('#filter-by-brand li a').click(function() 
{
    var brandNameSelected = $(this).html();
    var productContainer = $('#product-collection .product-container');

    if (brandNameSelected == 'All Brands')
    {
        productContainer.fadeIn("slow");
    }
    else {
        $(".product-container")
            .fadeOut(100)
            .delay(100)
            .filter(function() {
              return $(this).html().indexOf(brandNameSelected) > -1;  
            })
            .each(function(index, item) {
                $(item).fadeIn("slow");
            });

    }
}); 
```

[你可以在http://jsfiddle.net/tu8tc/1/](http://jsfiddle.net/tu8tc/1/)玩它；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T06:51:47.237

对于“所有品牌”，请退出。对于特定品牌名称，无条件隐藏所有productContainers，然后选择性淡入符合条件的那些。

```
$(function() {
    $('#filter-by-brand li a').click(function() {
        var brandNameSelected = $(this).html();
        var productContainer = $('#product-collection .product-container');
        if (brandNameSelected == 'All Brands') {
            productContainer.fadeIn("slow");
            return;
        }
        productContainer.hide();
        $("#product-collection h4 a").each(function() {
            var productTitle = $(this).html();
            if(productTitle.indexOf(brandNameSelected) != -1) {
                $(this).closest(".product-container").stop().fadeIn("slow");
            }
        });
    });
}); 
```

查看[您的小提琴的更新](http://jsfiddle.net/FC4QE/20/)

注意 jQuery 是如何`.closest()`避免丑陋的`.parent().parent().parent()`.

`.stop()`是预防性的，以防 a`fadeout()`已经在元素上运行。如果这是使 productContainers 动画的唯一代码，则不需要。

编辑...

或者为了简洁和更高效，明智地使用 jQuery，`.filter`您可以在一个语句中完成几乎所有事情（尽管可读性受到影响）：

```
$(function() {
    $('#filter-by-brand li a').click(function() {
        var brandNameSelected = $(this).html();
        $('#product-collection').find('.product-container').hide().end().find('h4 a').filter(function() {
            return (brandNameSelected == 'All Brands') || ($(this).html().indexOf(brandNameSelected) != -1);
        }).closest(".product-container").stop().fadeIn("slow");
    });
}); 
```

请参阅[小提琴的进一步更新](http://jsfiddle.net/FC4QE/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T06:34:04.543

为什么不简单地隐藏您想要过滤掉的产品呢？

```
if(productTitle.indexOf(brandNameSelected) == -1)
{
    $(this).parent().parent().parent().fadeOut("slow");
} 
```

请参阅[http://jsfiddle.net/2Sduq/1/](http://jsfiddle.net/2Sduq/1/)。