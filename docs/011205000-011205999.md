# StackOverflow 问答 11205000-11205999

# javascript - jQuery .click() 在自定义函数之前执行默认动作

> ID：11205002
> 
> 赞同：2
> 
> 时间：2012-06-26T10:06:47.287
> 
> 标签：javascript, jquery

这是我的代码，我有两个复选框，并希望保持一个禁用状态，直到另一个启用：

```
$(function(){
    $('#remember').live('click', function(event){
        if($('#remember').is(':checked')){
            $('#keepIn').removeAttr('disabled');
        }
        else
            $('#keepIn').attr('disabled', 'disabled');
    });
}); 
```

问题是这个函数在默认操作之前执行，当我点击第一个`$('#remember').is(':checked')`时返回 false（旧值）而不是 true。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:07:46.567

您可以改用`change`事件：

```
$('#remember').live('change', function(event) {
    if (this.checked) {
        $('#keepIn').removeAttr('disabled');
    } else {
        $('#keepIn').attr('disabled', 'disabled');
    }
}); 
```

**演示：http:** [//jsfiddle.net/jP3NY/](http://jsfiddle.net/jP3NY/)

* * *

**注意：** `live`方法已弃用。你最好使用`on`or `delegate`。

对于较新版本的 jQuery，解决方案可能如下：

```
$('body').on('change', '#remember', function(event) {
    $('#keepIn').prop('disabled', !this.checked);
}); 
```

您`body`可以使用`#remember`.

# javascript - 硬币滑块：$ 未定义

> ID：11205007
> 
> 赞同：0
> 
> 时间：2012-06-26T10:07:14.637
> 
> 标签：javascript, jquery, slider

我正在尝试在我的网站上实现 Coin Slider (http://workshop.rs/2010/04/coin-slider-image-slider-with-unique-effects/)。但是，我无法让它工作。Firefox 错误控制台显示“$ 未定义”。

我只真正了解 HTML 和 CSS，并认为这只是复制和粘贴代码的情况。如果修复起来很简单，那就太好了，但我可能咬得比我能咀嚼的多！

谢谢你的帮助。

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <script type="text/javascript" src="jquery-1.4.2.js"></script>
    <script type="text/javascript" src="coin-slider.min.js"></script>
    <link rel="stylesheet" type="text/css" href="../style.css" />
<style type="text/css">
</style>
    </head>
    <body>
    <div id="wrapper">
<!-- Begin Content -->
     <div id="content">
    <div id='coin-slider'>
     <a href="" target="">
    <img src='../portfoliopages/Funpets/splashpresliced.jpg' >
      <span>
      Description for img01
    </span>
    </a>
    <a href="" target="">
      <img src='../portfoliopages/Funpets/eggprespliced.jpg' >
     <span>
     Description for imgN
     </span>
     </a>
    <a href="" target="">
    <img src='../portfoliopages/Funpets/baby.jpg' >
      <span>
      Description for img01
    </span>
    </a>
    <script type="text/javascript">
    $(document).ready(function() {
    $('#coin-slider').coinslider({ width: 550,
    height: 220,
    spw: 7,
    sph: 5,
    delay: 3000,
    sDelay: 30,
    opacity: 0.7,
    titleSpeed: 500,
    effect: '',
    navigation: true,
    links : true,
    hoverPause: true });
    });
    </script
    </div>
    </div>
     <!-- End Content -->
    </div>
    </div>
<!-- Begin Footer --></div> </div>
     <!-- End Footer -->
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:12:38.033

这意味着`$`没有定义 jQuery 变量。我猜你只是复制粘贴而没有下载 jQuery。

这段特定的代码要求您下载 jQuery，命名文件`jquery-1.4.2.js`并将其定位在与此文件相同的位置。你也应该去`coin-slider.min.js`那里。您可能会在教程中找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:09:46.737

当页面找不到 jQuery 或在加载之前引用了 jQuery 时，错误 $ 未定义是典型的。在您的实例中，首先加载 jQuery，所以我假设您的 jQuery 路径是错误的。仔细检查 jquery 的路径，您可以浏览到 jquery JS 文件 jquery-1.4.2.js

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:15:24.303

确保在加载页面时没有 404 错误。在 firefox 中启用 FireBug 并进入网络设置，重新加载页面并检查您的 http 响应（或任何其他调试器/检查工具）

您可以尝试将脚本源替换为完整的 URL 以测试您的代码是否正常工作：

对于 Jquery：[http ://workshop.rs/projects/coin-slider/jquery-1.4.2.min.js](http://workshop.rs/projects/coin-slider/jquery-1.4.2.min.js)

对于硬币滑块：[http ://workshop.rs/projects/coin-slider/coin-slider.min.js](http://workshop.rs/projects/coin-slider/coin-slider.min.js)

我从 Coin Slider 示例/演示页面获得了完整的 url。您可以打开链接并将其下载到本地计算机。

# ruby - 路由错误没有路由匹配 [GET] "/salesforce/MerchandiseCs"

> ID：11205010
> 
> 赞同：0
> 
> 时间：2012-06-26T10:07:22.543
> 
> 标签：ruby, salesforce

我正在尝试与salesforce建立联系当我尝试打开网页时使用abanta这是我所拥有的

> 路由错误
> 
> 没有路线匹配 [GET] "/salesforce/MerchandiseCs"
> 
> 尝试运行 rake 路线以获取有关可用路线的更多信息。

我不明白这有什么帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:14:22.360

打开终端并写下：“rake routes”。您将看到可用的路线。该错误是因为“/salesforce/MerchandiseCs”不在列表中。

# ember.js - ember.js #每个按属性排序

> ID：11205013
> 
> 赞同：3
> 
> 时间：2012-06-26T10:07:30.373
> 
> 标签：ember.js, handlebars.js

我有一个`Ember.Object`s 数组，它由 Handlebars`{{#each}}`助手显示，我希望在每次数组更改时按这些对象的属性进行排序。

所以是这样的：

```
var arr = [
    Ember.Objects.create({
        position:0,
        label:"foo"
    }),
    Ember.Objects.create({
        position:1,
        label:"bar"
    }),
]; 
```

还有车把

```
{{#each arr}}
    <div class="label">{{label}}</div>
{{/each}} 
```

因此，如果我更新位置并且`bar`对象成为第一个，我希望更新视图。我可以依赖`{{#each}}`帮助者的财产吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:17:08.383

您必须对数据使用`ArrayController`代理，并设置`sortProperties`属性。然后，使用控制器作为`each`数据源。

示例[@http://jsfiddle.net/MikeAski/Epjqp/](http://jsfiddle.net/MikeAski/Epjqp/)

使用控制器作为数据源提供了排列好的内容。注意不要直接使用控制器的`content`，因为它是原始源数据......

# c - Matlab/C/Java 中的正弦函数或数字系统中的任何其他程序

> ID：11205018
> 
> 赞同：2
> 
> 时间：2012-06-26T10:07:58.050
> 
> 标签：c, matlab, math, digital, trigonometry

Matlab/C 如何生成正弦波，我的意思是它们是否存储每个角度的值？但如果他们这样做，那么需要存储无限的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:11:27.690

仅使用任何现代数字计算机上可用的基本算术运算符来计算角度正弦的例程有很多很多。[CORDIC 算法](http://en.wikipedia.org/wiki/CORDIC)就是其中之一，但仅是一个示例。我不知道 Matlab 对三角函数使用什么算法。

计算机不会简单地在存储的值表中查找三角函数的值，尽管当前使用的一些算法确实会在存储的表中查找临界值。这些表包含的内容是特定于算法的，可能不符合对三角表的天真期望。

请注意，这个问题已经在 SO 上被问过很多次，[这个答案](https://stackoverflow.com/questions/345085/how-do-trigonometric-functions-work/345117)似乎是他们的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:12:20.007

不，他们通常不会。即使他们这样做了，不，没有“无限价值”。数字有限（真实）计算机不能很好地处理无限，但这同样适用于角度（正弦函数的输入）。您不能要求“每个”角度，因为角度本身必须以有限的位集表示。

我认为使用[泰勒级数](http://en.wikipedia.org/wiki/Taylor_series)很常见，或者其他基于插值的解决方案。

此外，现代 CPU：s 具有计算正弦的指令，但这当然只是将它如何实现的问题推低了一个或三个级别。

有关更多详细信息，另请参阅[这个非常相似的问题](https://stackoverflow.com/questions/2284860/how-does-c-compute-sin-and-other-math-functions)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:59:53.057

在 90 年代之前，计算机会使用基本函数加、减、乘和除，以数值方式计算正弦函数和其他三角函数。计算它们的算法通常包含在基本编译器库中。在某些时候，可以添加一个称为浮点处理器 ( [FPU](http://en.wikipedia.org/wiki/Floating-point_unit) ) 的可选硬件处理器。我对 FPU 的理解是它确实存储了三角函数的硬值。随着 FPU 的加入，计算三角函数的速度将显着提高。然而，自 90 年代以来，FPU 已与 CPU 捆绑在一起。

我似乎找不到任何关于 FPU 如何准确实现正弦和其他三角函数的明确描述，通常这是留给设计芯片的电气工程师的实现细节。然而，实际上只需要知道从 0 到 pi/2 的值。其他一切都可以从这些值轻松计算出来。

编辑：好的，这是 FPU 上使用的实现：[CORDIC](http://en.wikipedia.org/wiki/Cordic)，我在这个[答案](https://stackoverflow.com/a/2284932/126541)中找到了。

# android - 如何检测 Android 在我的应用程序中选择了哪个布局？

> ID：11205020
> 
> 赞同：71
> 
> 时间：2012-06-26T10:08:06.787
> 
> 标签：android, android-layout, resources

假设我在不同的资源文件夹中有一个具有三种不同布局的活动。例如：

> `layout-land/my_act.xml`
> `layout-xlarge/my_act.xml`
> `layout-xlarge-land/my_act.xml`

在不同的设备和不同的位置，其中之一是由 Android 选择的。
如何找出以*编程*方式选择了哪一个？

Android 是否有任何 API 可以将这些布局返回给程序？

* * *

**编辑**：[Graham Borland 的解决方案](https://stackoverflow.com/a/11205220/779408)在我在评论中提到的某些情况下存在问题。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-26T10:19:59.583

您可以[`android:tag`](http://developer.android.com/reference/android/view/View.html#attr_android%3atag)在每个不同资源文件中的视图上设置不同的属性，并在运行时使用[`View.getTag()`](http://developer.android.com/reference/android/view/View.html#getTag%28%29).

例子：

**布局-xlarge-land/my_act.xml**

```
<View
    android:id="@+id/mainview"
    android:tag="xlarge-landscape"
/> 
```

**布局-xlarge/my_act.xml**

```
<View
    android:id="@+id/mainview"
    android:tag="xlarge-portrait"
/> 
```

**我的活动.java**

```
String tag = view.getTag();
if (tag.equals("xlarge-landscape") {
    ...
} 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-07-26T13:32:24.873

`values-<config>`您可以为每个受支持的配置创建一个目录。在每个目录中，使用描述当前配置`strings.xml`的单个字符串创建一个。`selected_configuration`在运行时，使用标准`getString`方法获取字符串，这将为您进行配置解析并为配置返回正确的字符串。这是未经测试的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-03T17:04:56.353

您可以尝试重复此算法[“Android 如何找到最佳匹配资源”](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch) - 这很简单，特别是如果您仅针对不同的屏幕使用不同的布局。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-26T10:34:49.473

我的答案是从@Graham Borland 实施的

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
        DisplayMetrics metrics = new DisplayMetrics();
        getWindowManager().getDefaultDisplay().getMetrics(metrics);
        switch(metrics.densityDpi){
             case DisplayMetrics.DENSITY_LOW:

             if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
             {
               Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
               String tag = view.getTag();
               if (tag.equals("small-landscape") {
                .....
              }
             } 
            else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) 
            {
            Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
             String tag = view.getTag();
               if (tag.equals("small-potrait") {
                .....
              }
            }
            break;

             case DisplayMetrics.DENSITY_MEDIUM:

             if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
             {
               Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
               String tag = view.getTag();
               if (tag.equals("medium-landscape") {
                .....
              }
             } 
            else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) 
            {
            Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
             String tag = view.getTag();
               if (tag.equals("medium-potrait") {
                .....
              }
            }
             break;

             case DisplayMetrics.DENSITY_HIGH:

               if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE)
             {
               Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
               String tag = view.getTag();
               if (tag.equals("large-landscape") {
                .....
              }
             } 
            else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) 
            {
            Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
             String tag = view.getTag();
               if (tag.equals("large-potrait") {
                .....
              }
            }
             break;
        } 
```

这将在 API lavel 4 或更高版本中工作。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-29T20:14:37.057

我假设您正在使用`setContentView(int resID)`来设置活动的内容。

* * *

**方法1** *（这是我的答案）*

现在在您的所有布局中确保根视图始终具有正确的标签：

例子：

`layout-xlarge/main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:tag="xlarge-landscape"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

`layout-small/main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:tag="small"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

现在让您的活动扩展此活动：

```
package shush.android.screendetection;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class SkeletonActivity extends Activity {

    protected String resourceType;

    @Override
    public void setContentView(int layoutResID) {
        LayoutInflater inflater = getLayoutInflater();
        View view = inflater.inflate(layoutResID, null);
        resourceType = (String)view.getTag();
        super.setContentView(view);
    }
} 
```

在这种情况下，您可以使用`resourceType`来了解所使用的资源标识符。

* * *

**方法2** *（这是我的答案，但在发布之前我想到了更好的答案）*

现在在您的所有布局中确保根视图始终具有正确的标签：

例子：

`layout-xlarge/main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:tag="xlarge-landscape"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

`layout-small/main.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:tag="small"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

现在让您的活动扩展此活动：

```
package shush.android.screendetection;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class SkeletonActivity extends Activity {

    @Override
    public void setContentView(int layoutResID) {
        LayoutInflater inflater = getLayoutInflater();
        View view = inflater.inflate(layoutResID, null);
        fix(view, view.getTag());
        super.setContentView(view);
    }

    private void fix(View child, Object tag) {
        if (child == null)
            return;

        if (child instanceof ViewGroup) {
            fix((ViewGroup) child, tag);
        }
        else if (child != null) {
            child.setTag(tag);
        }
    }

    private void fix(ViewGroup parent, Object tag) {
        for (int i = 0; i < parent.getChildCount(); i++) {
            View child = parent.getChildAt(i);
            if (child instanceof ViewGroup) {
                fix((ViewGroup) child, tag);
            } else {
                fix(child, tag);
            }
        }
    }
} 
```

在这种情况下，层次结构中的所有视图都将具有相同的标签。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-11-24T13:52:43.760

您可以从`Resources`对象获取有关屏幕方向和大小的信息。从那里您可以了解使用了哪种布局。

`getResources().getConfiguration().orientation;`- 返回`Configuration.ORIENTATION_PORTRAIT`或`Configuration.ORIENTATION_LANDSCAPE`。

`int size = getResources().getConfiguration().screenLayout;`- 返回屏幕大小的掩码。您可以针对 Small、Normal、Large、xLarge 尺寸进行测试。例如：

```
if ((size & Configuration.SCREENLAYOUT_SIZE_XLARGE)==Configuration.SCREENLAYOUT_SIZE_XLARGE) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-26T10:22:52.847

我不知道找到它的确切方法。但我们可以通过不同的方式找到它。

在所有布局中添加一个文本视图。（隐藏可见性）。相应地分配 xlarge、land、xlarge-land 等值。

在程序中，从 textview 中获取值。不知怎的，我们可以像这样了解。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-24T17:07:30.190

您的问题与[如何获取布局 xml 文件路径相同？](https://stackoverflow.com/q/11315111/1008278)
您可以在 xml 中添加一个具有相应文件夹名称的隐藏文本视图通过以下方式获取文本视图中的字符串

```
TextView path = (TextView)findViewbyid(R.id.hiddentextview); 
 String s =  path.gettext().tostring(); 
```

确保文本视图的所有 id 都相同。

**例子**

```
if your xml is in `normal-mdpi` in hidden textview hard code `normal-mdpi`
if your xml is in `large-mdpi` in hidden textview hard code `large-mdpi` 
```

# matlab - imregionalmax matlab函数在opencv中的等价物

> ID：11205025
> 
> 赞同：3
> 
> 时间：2012-06-26T10:08:37.443
> 
> 标签：matlab, opencv

我有一个连接组件的图像（圆圈填充）。如果我想分割它们，我可以使用分水岭算法。我更喜欢为分水岭编写自己的函数，而不是使用 OPENCV 中的内置函数。我成功了如何找到 regionmax使用opencv的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-02T18:36:07.593

我自己写了一个函数。我的结果与 MATLAB 非常相似，尽管不准确。此功能已实现，`CV_32F`但可以轻松修改为其他类型。

1.  我通过检查所有邻居来标记所有不属于最小区域的点。其余区域是最小值、最大值或拐点区域。
2.  我使用连接的组件来标记每个区域。
3.  我检查每个区域是否有属于最大值的任何点，如果是，那么我将该标签推入向量中。
4.  最后，我对坏标签进行排序，删除所有重复项，然后将输出中的所有点标记为非最小值。
5.  剩下的就是最小值区域。

这是代码：

```
//  output is a binary image
//  1: not a min region
//  0: part of a min region
//  2: not sure if min or not
//  3: uninitialized
void imregionalmin(cv::Mat& img, cv::Mat& out_img)
{
    // pad the border of img with 1 and copy to img_pad
    cv::Mat img_pad;
    cv::copyMakeBorder(img, img_pad, 1, 1, 1, 1, IPL_BORDER_CONSTANT, 1);

    //  initialize binary output to 2, unknown if min
    out_img = cv::Mat::ones(img.rows, img.cols, CV_8U)+2;

    //  initialize pointers to matrices
    float* in = (float *)(img_pad.data);
    uchar* out = (uchar *)(out_img.data);

    //  size of matrix
    int in_size = img_pad.cols*img_pad.rows;
    int out_size = img.cols*img.rows;

    int x, y;
    for (int i = 0; i < out_size; i++) {
        //  find x, y indexes
        y = i % img.cols;
        x = i / img.cols;

        neighborCheck(in, out, i, x, y, img_pad.cols);  //  all regions are either min or max
    }

    cv::Mat label;
    cv::connectedComponents(out_img, label);

    int* lab = (int *)(label.data);

    in = (float *)(img.data);
    in_size = img.cols*img.rows;

    std::vector<int> bad_labels;

    for (int i = 0; i < out_size; i++) {
        //  find x, y indexes
        y = i % img.cols;
        x = i / img.cols;

        if (lab[i] != 0) {
            if (neighborCleanup(in, out, i, x, y, img.rows, img.cols) == 1) {
                bad_labels.push_back(lab[i]);
            }
        }
    }

    std::sort(bad_labels.begin(), bad_labels.end());
    bad_labels.erase(std::unique(bad_labels.begin(), bad_labels.end()), bad_labels.end());

    for (int i = 0; i < out_size; ++i) {
        if (lab[i] != 0) {
            if (std::find(bad_labels.begin(), bad_labels.end(), lab[i]) != bad_labels.end()) {
                out[i] = 0;
            }
        }
    }
}

int inline neighborCleanup(float* in, uchar* out, int i, int x, int y, int x_lim, int y_lim)
{
    int index;
    for (int xx = x - 1; xx < x + 2; ++xx) {
        for (int yy = y - 1; yy < y + 2; ++yy) {
            if (((xx == x) && (yy==y)) || xx < 0 || yy < 0 || xx >= x_lim || yy >= y_lim)
                continue;
            index = xx*y_lim + yy;
            if ((in[i] == in[index]) && (out[index] == 0))
                return 1;
        }
    }

    return 0;
}

void inline neighborCheck(float* in, uchar* out, int i, int x, int y, int x_lim)
{   
    int indexes[8], cur_index;
    indexes[0] = x*x_lim + y;
    indexes[1] = x*x_lim + y+1;
    indexes[2] = x*x_lim + y+2;
    indexes[3] = (x+1)*x_lim + y+2;
    indexes[4] = (x + 2)*x_lim + y+2;
    indexes[5] = (x + 2)*x_lim + y + 1;
    indexes[6] = (x + 2)*x_lim + y;
    indexes[7] = (x + 1)*x_lim + y;
    cur_index = (x + 1)*x_lim + y+1;

    for (int t = 0; t < 8; t++) {
        if (in[indexes[t]] < in[cur_index]) {
            out[i] = 0;
            break;
        }
    }

    if (out[i] == 3)
        out[i] = 1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-09T21:57:10.997

下面的清单是一个类似于 Matlab 的“imregionalmax”的函数。它最多查找高于**threshold的****nLocMax**局部最大值，其中找到的局部最大值至少**相隔 minDistBtwLocMax**像素。它返回找到的局部最大值的实际数量。请注意，它使用 OpenCV 的**minMaxLoc**来查找全局最大值。它是“opencv-self-contained”的，除了（易于实现）函数**vdist**，它计算点（r，c）和（row，col）之间的（欧几里德）距离。

 ********输入**是单通道 CV_32F 矩阵，**位置**是 nLocMax（行）乘 2（列）CV_32S 矩阵。

```
int imregionalmax(Mat input, int nLocMax, float threshold, float minDistBtwLocMax, Mat locations)
{
    Mat scratch = input.clone();
    int nFoundLocMax = 0;
    for (int i = 0; i < nLocMax; i++) {
        Point location;
        double maxVal;
        minMaxLoc(scratch, NULL, &maxVal, NULL, &location);
        if (maxVal > threshold) {
            nFoundLocMax += 1;
            int row = location.y;
            int col = location.x;
            locations.at<int>(i,0) = row;
            locations.at<int>(i,1) = col;
            int r0 = (row-minDistBtwLocMax > -1 ? row-minDistBtwLocMax : 0);
            int r1 = (row+minDistBtwLocMax < scratch.rows ? row+minDistBtwLocMax : scratch.rows-1);
            int c0 = (col-minDistBtwLocMax > -1 ? col-minDistBtwLocMax : 0);
            int c1 = (col+minDistBtwLocMax < scratch.cols ? col+minDistBtwLocMax : scratch.cols-1);
            for (int r = r0; r <= r1; r++) {
                for (int c = c0; c <= c1; c++) {
                    if (vdist(Point2DMake(r, c),Point2DMake(row, col)) <= minDistBtwLocMax) {
                        scratch.at<float>(r,c) = 0.0;
                    }
                }
            }
        } else {
            break;
        }
    }
    return nFoundLocMax;
}
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:07:25.173

我不知道这是否是您想要的，但在我对[这篇文章](https://stackoverflow.com/questions/10313602/reshaping-noisy-coin-into-a-circle-form/10324759#10324759)的回答中，我给出了一些代码来查找灰度图像中的局部最大值（峰值）（由距离变换产生）。该方法依赖于从膨胀图像中减去原始图像并找到零像素）。希望对你有帮助，祝你好运

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-06-26T11:27:40.717

前段时间我也遇到过同样的问题，解决方法是在OpenCV/Cpp中重新实现imregionalmax算法。它并不复杂，因为您可以在 Matlab 发行版中找到该函数的 C++ 源代码。（工具箱中的某处）。您所要做的就是仔细阅读并理解那里描述的算法。然后重写它或删除特定于 matlab 的检查，你就会拥有它。******

# html - 防止页面容器上的水平滚动条

> ID：11205027
> 
> 赞同：0
> 
> 时间：2012-06-26T10:08:45.053
> 
> 标签：html, css

我正在为我的网站使用 960 像素的固定宽度容器。

但是，我想添加一个包装器，为页面添加一个盒子阴影并增加左右边距的大小。

[您可以在http://jsfiddle.net/2QqxB/5/embedded/result/](http://jsfiddle.net/2QqxB/5/embedded/result/)看到想要的效果。

问题是在 1024 x 768 时我得到一个水平滚动条，因为包装器是 1020 像素。

那么如何在不使用背景图像和不使用水平滚动条的情况下达到相同的效果。

代码（也在[http://jsfiddle.net/2QqxB/5/](http://jsfiddle.net/2QqxB/5/)）：

HTML：

```
<div id="wrap">
    <div id="container">
        <p>
            Lorem ipsum dolor sit amet...
        </p>
    </div>
</div>​ 
```

CSS：

```
html, body {
 height: 100%;   
}

body {
 background-color: #f3a450;   
}

#wrap {
 width: 1020px;
 box-shadow: 0px 0px 9px 1px rgba(0, 0, 0, 0.4);
 margin: 0 auto;
 min-height: 100%;
 background-color: #fff;
}

#container {
 width: 960px;
 margin: 0 auto;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:17:45.087

您可以通过使用正常/最小/最大宽度使其工作`#wrap`：

*   `min-width`必须是 960px，因为内部内容是那么宽
*   `max-width`必须是 1020px 因为它是白色区域的默认宽度
*   `width`设置为 100% 以始终触摸窗口边缘

见例子：http: [//jsfiddle.net/2QqxB/7/](http://jsfiddle.net/2QqxB/7/)

```
#wrap {
  max-width: 1020px;
  min-width: 960px;
      width: 100%;
}

#container {
  width: 960px;
} 
```

# asp.net-mvc - 当用户错误键入数据类型字符串的查询字符串 PM 的名称时，如何引发异常？

> ID：11205029
> 
> 赞同：0
> 
> 时间：2012-06-26T10:09:17.130
> 
> 标签：asp.net-mvc, asp.net-mvc-3, query-string, handleerror

我正在使用 MVC 3 和 vs2010 和 VB.NET。我在我的控制器上使用了“HandleError”，它工作得很好而且很简单，它会自动检测未处理的异常并将用户重定向到我选择的错误页面。但是，有一个问题。

这是我正在使用的操作方法的示例：

```
 <HandleError>
    Public Function ReportAProblem(DespatchNoteNo As String, DespatchNoteItemId As Long) As ActionResult
        Dim uiview As New PickingReportAProblemVM(DespatchNoteNo, DespatchNoteItemId)

        ' Get the data for ReportAProblem
        GetDataForReportAProblem(uiview)

        Return View(uiview)
    End Function 
```

当用户通过以下方式操作 URL 时，会自动抛出异常，并将用户重定向到我的错误页面：

*   .../?DespatchNoteNo=DN1234&DespatchNoteItemId=A（DespatchNoteItemId 的数据类型不正确）
*   .../?DespatchNoteNo=DN1234&DespatchNoteItem=1（DespatchNoteItemId 的参数名称不正确）

似乎自动抛出了一个异常（如果我错了，请纠正我），它被 HandleError 拾取并且用户被重定向到我的错误页面。

但是，如果用户键入以下内容：

*   .../?DespatchNote=DN1234&DespatchNoteItemId=1（DespatchNote 的参数名称不正确）

似乎没有抛出异常（如果我错了，请纠正我）并且用户没有被重定向到我的错误页面，而是代码继续。

据我所见，当我在调试时，当调用 action 方法时，在上述所有场景中，参数的值都设置为 Nothing。同样，不同之处似乎在于，对于除 String 类型之外的任何类型的参数，都会引发异常，而这似乎不是 String 类型的参数。

我显然稍后会在我的应用程序的服务层再次检查变量的内容，但在上述情况下（即用户一直在操作查询字符串并且应该将他/她的手指砍掉）我不想要代码完全进入服务层，而是将用户重定向到我的错误页面（就像非字符串数据类型发生的情况一样）。

如果用户操纵字符串类型查询字符串参数的名称，有谁知道引发异常的方法？还是我走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:59:40.173

这是我想出的解决方法。它并不完美，因为我仍然需要为每个要在操作方法中检查的 String 类型参数编写 1 行代码，但如果这是最接近完美的，我会接受它。

我创建了以下动作过滤器：

```
Public Class CheckStringParam
    Inherits ActionFilterAttribute

    Public Property Parameter As String
    Public Property InputValue As String

    Public Overloads Overrides Sub OnActionExecuting(filterContext As ActionExecutingContext)
        If Parameter <> String.Empty AndAlso filterContext.ActionParameters.ContainsKey(Parameter) Then
            If filterContext.ActionParameters.TryGetValue(Parameter, InputValue) Then
                If InputValue Is Nothing Then
                    Throw (New ArgumentException)
                End If
            End If
        End If

    End Sub

End Class 
```

它基本上是用参数名称调用的。如果您提供了参数名称并且它存在于操作的上下文中，它将尝试获取其值。如果成功，它会检查它是否设置为Nothing。如果是这样，它会引发异常。然后这将被“HandleError”自动拾取，并且用户被重定向到用户屏幕。

动作方法现在看起来像这样：

```
<CheckStringParam(Parameter:="DespatchNoteNo")>
<HandleError>
Public Function ReportAProblem(DespatchNoteNo As String, DespatchNoteItemId As Long) As ActionResult
    Dim uiview As New PickingReportAProblemVM(DespatchNoteNo, DespatchNoteItemId)

    ' Get the data for ReportAProblem
    GetDataForReportAProblem(uiview)

    Return View(uiview)
End Function 
```

不需要其他代码，如果他/她确实操纵了 URL 并输入了不正确的参数名称，它将导致用户被重定向。

我很想听听人们的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:35:13.310

这很可能是因为`DispatchNoteNo`变量是一个字符串。由于 URL 中未提供它，因此它现在是一个空字符串。这里不会抛出异常。所以你有几个选择。

1.  在您的控制器中检查`String.IsNullOrEmpty(DispatchNoteNo)`，如果为真则重定向。
2.  使用路由对您有利 -> 使用这些值创建路由。如果缺少一个，则该路线将失败。最后是一个例子，因为我今天早上在语法标记上失败了......

在这里，如果其中一个或两个参数没有定义，或者如果有人删除了其中一个路由约束，则该路由将与请求不匹配。只要您没有将进一步匹配的路由，服务器将返回“没有路由与提供的等等等等匹配”（对不起，不记得确切的措辞）错误

```
routes.MapRoute("Dispatches",
                    "Controller/ReportAProblem/{DispatchNoteNo}/{DespatchNoteItemId}",
                    new { controller = "Controller", action = "ReportAProblem" }
                ); 
```

# php - ckeditor 中的附加正文标记

> ID：11205030
> 
> 赞同：1
> 
> 时间：2012-06-26T10:09:21.030
> 
> 标签：php, mysql, ckeditor

我正在使用 ckeditor ，但如果我试图从 iphone 输入数据，它会在数据库中插入一个额外的正文标签，但它在计算机中工作正常。我怎样才能避免这个额外的正文标签。

我正在使用 editor.getData() 从 ckeditor 获取数据。

任何人请帮助我

# php - PHP 在图像上嵌入文本

> ID：11205033
> 
> 赞同：0
> 
> 时间：2012-06-26T10:09:27.610
> 
> 标签：php

我正在尝试在图像上嵌入文本。我正在使用这个脚本[http://www.phpjabbers.com/put-watermark-on-images-using-php-php20.html](http://www.phpjabbers.com/put-watermark-on-images-using-php-php20.html)

这适用于一个文本。例如：我想要这样的文本

textone
texttwo
textthree

我希望它们低于一个。如何实现。我尝试使用

```
<p>$handlerData = "textone"; ?></p><p>$handlerData = "texttwo"; ?></p><p>$handlerData = "textthree"; ?></p> 
```

但这只是嵌入第一个文本。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:19:35.143

你可以使用\n

```
$handlerData = 'textone'."\n".'texttwo'."\n".'textthree'; 
```

或者你可以改变这样的功能：

```
function watermarkImage ($source, $text, $destination, $x = 10, $y = 20) { 
   list($width, $height) = getimagesize($source);
   $image_p = imagecreatetruecolor($width, $height);
   $image = imagecreatefromjpeg($source);
   imagecopyresampled($image_p, $image, 0, 0, 0, 0, $width, $height, $width, $height); 
   $black = imagecolorallocate($image_p, 0, 0, 0);
   $font = 'arial.ttf';
   $font_size = 10; 
   imagettftext($image_p, $font_size, 0, $x, $y, $black, $font, $text);
   if ($DestinationFile<>'') {
      imagejpeg ($image_p, $destination, 100); 
   } else {
      header('Content-Type: image/jpeg');
      imagejpeg($image_p, null, 100);
   };
   imagedestroy($image); 
   imagedestroy($image_p); 
}; 
```

您现在可以使用 $x 和 $y 来定位文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:16:10.217

您将为您的操作系统使用返回字符（\r、\n 或 \r\n）。PHP/GD 不会呈现 HTML。

[编辑]您发布的代码不会做任何与在图像上覆盖文本相关的事情，但您希望您的变量（在本例中为 $handlerData）包含回车符以换行：

```
$handlerData = "textone \r\n"
.              "texttwo \r\n"
.              "textthree \r\n"; 
```

这甚至可能有效：

```
$handlerData = "textone
texttwo
textthree "; 
```

但是由于制表符之类的，您将有杂散的空白。如果这不起作用，您将需要发布您的实际代码

# javascript - jQuery 自动完成结果到自定义下拉列表（在选择选项标签处）

> ID：11205034
> 
> 赞同：1
> 
> 时间：2012-06-26T10:09:30.000
> 
> 标签：javascript, jquery, autocomplete, jquery-ui-autocomplete, drop-down-menu

我想在选择选项标签中显示我的自动完成结果，而不是默认的 ul li 添加了一些 jquery 类（我真的不想要）。

我在堆栈溢出中使用来自相关帖子的代码：http: [//jsfiddle.net/naveen/yRwH7/](http://jsfiddle.net/naveen/yRwH7/)作为示例。

它实际上第一次正确加载，但在那之后，什么也没有。有什么建议么？还有其他方法吗？代码在这里[http://jsfiddle.net/yRwH7/1/](http://jsfiddle.net/yRwH7/1/)

Javascript

```
 $("input#selectedInput").bind("autocompleteselect", function (event, ui) {
      alert("Sel item " + JSON.stringify(ui.item.json));
 }).autocomplete({
 appendTo: "#list",
 source: function (request, response) {

     $.ajax({
         url: "http://itunes.apple.com/search?term=jack+johnson&entity=musicTrack",
         dataType: "jsonp",
         data: {
             featureClass: "P",
             style: "full",
             maxRows: 12,
             name_startsWith: request.term
         },

         success: function (data) {
             response($.map(data.results, function (item) {
                 itunesJson = item;
                 return {
                     label: "<option>" + item.trackName + "</option>",
                 }
             }));
             var elm = $("#list");
             elm.html(elm.text());
         },
     });
 }
 })​ 
```

HTML

```
<input type="text" id="selectedInput"/>
<select id="list"></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:24:37.113

我尝试了演示并对其进行了修改

我正在使用火狐

这是链接[工作演示](http://jsfiddle.net/sssonline2/NdMB9/2/)

看起来它在 div 之后需要一个空格可能是浏览器兼容性问题

# asp.net-mvc - 如何将从 DispatchMessageInspector 中的消息头获取的信息传递给 ServiceContract？

> ID：11205035
> 
> 赞同：1
> 
> 时间：2012-06-26T10:09:30.450
> 
> 标签：asp.net-mvc, wcf, wcf-endpoint, servicebehavior

我正在尝试将用户信息从控制器传递到服务层。

`IClientMessageInspectors`并且`IDispatchMessageInspectors`似乎是最有可能的解决方案。

在完成了[构建 HTTP 用户代理消息检查器](http://msmvps.com/blogs/paulomorgado/archive/2007/04/27/wcf-building-an-http-user-agent-message-inspector.aspx) 和 [编写 WCF 消息检查器](http://weblogs.asp.net/paolopia/archive/2007/08/23/writing-a-wcf-message-inspector.aspx)之后，我对如何将信息添加到消息头以及如何读取它有了一个很好的了解。

我想不通的是：

> **如何获取用户信息`IClientMessageInspector`？**
> 
> 在我曾经起诉过的控制器内部`User.Identity.Name`。但 User 对象在消息检查器中不可用。在消息检查器中获取此信息的一种方法是将其传递到构造函数中，但我从未显式创建 MessageInspector 对象，因此如何在其构造函数中传递用户信息。
> 
> **编辑**：我找到了第一个问题的答案。用户信息可以通过 System.Threading.Thread.CurrentPrincipal.Identity.Name 获取。仍然坚持第二部分。

**如何在服务方法中提供用户信息？**

我可以浏览标头并从 DispatchMessageInspector 中的消息标头中获取用户信息，但是如何在我的操作合同中提供这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:14:44.117

创建具有与用户信息相关的属性的类。使用此方法覆盖标头中的对象`BeforeSendRequest(ref Message request, IClientChannel channel);`方法设置值 -`MessageHeader _messageHeader = MessageHeader.CreateHeader();`并放入使用信息类的对象。

```
// Summary:
//     Creates a new message header with the specified data.
//
// Parameters:
//   name:
//     The local name of the header XML element.
//
//   ns:
//     The namespace URI of the header XML element.
//
//   value:
//     The content of the header to be created.
//
// Returns:
//     A System.ServiceModel.Channels.MessageHeader.
public static MessageHeader CreateHeader(string name, string ns, object value); 
```

在服务端获取它——MessageHeaders 类方法——

```
// Summary:
//     Finds a message header in this collection by the specified LocalName and
//     namespace URI of the header element.
//
// Parameters:
//   name:
//     The LocalName of the header XML element.
//
//   ns:
//     The namespace URI of the header XML element.
//
// Type parameters:
//   T:
//     The message header.
//
// Returns:
//     A message header.
public T GetHeader<T>(string name, string ns); 
```

# python - 未知来源检测周期

> ID：11205037
> 
> 赞同：7
> 
> 时间：2012-06-26T10:09:35.820
> 
> 标签：python, algorithm, math, floyd-cycle-finding

如何检测无限序列中的重复数字？我尝试了**Floyd & Brent**检测算法，但一无所获……我有一个生成器，它产生的数字范围从 0 到 9（含），我必须识别其中的一个句点。

示例测试用例：

```
import itertools

# of course this is a fake one just to offer an example
def source():
    return itertools.cycle((1, 0, 1, 4, 8, 2, 1, 3, 3, 1))

>>> gen = source()
>>> period(gen)
(1, 0, 1, 4, 8, 2, 1, 3, 3, 1) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T15:01:08.660

# 经验方法

这是一个有趣的问题。您的问题的更一般形式是：

> 给定一个未知长度的重复序列，确定信号的周期。

确定重复频率的过程称为[傅立叶变换](http://en.wikipedia.org/wiki/Fourier_transform)。在您的示例中，信号是干净且离散的，但即使使用连续的噪声数据，以下解决方案也适用！[FFT](http://en.wikipedia.org/wiki/Fast_Fourier_transform)将尝试通过在所谓的“波空间”或“傅立叶空间”中逼近输入信号的频率来复制它们。基本上，该空间中的峰值对应于重复信号。信号的周期与达到峰值的最长波长有关。

```
import itertools

# of course this is a fake one just to offer an example
def source():
    return itertools.cycle((1, 0, 1, 4, 8, 2, 1, 3, 3, 2))

import pylab as plt
import numpy as np
import scipy as sp

# Generate some test data, i.e. our "observations" of the signal
N = 300
vals = source()
X = np.array([vals.next() for _ in xrange(N)])

# Compute the FFT
W    = np.fft.fft(X)
freq = np.fft.fftfreq(N,1)

# Look for the longest signal that is "loud"
threshold = 10**2
idx = np.where(abs(W)>threshold)[0][-1]

max_f = abs(freq[idx])
print "Period estimate: ", 1/max_f 
```

这给出了这种情况下的正确答案，`10`但如果`N`没有干净地划分周期，你会得到一个接近的估计。我们可以通过以下方式可视化：

```
plt.subplot(211)
plt.scatter([max_f,], [np.abs(W[idx]),], s=100,color='r')
plt.plot(freq[:N/2], abs(W[:N/2]))
plt.xlabel(r"$f$")

plt.subplot(212)
plt.plot(1.0/freq[:N/2], abs(W[:N/2]))
plt.scatter([1/max_f,], [np.abs(W[idx]),], s=100,color='r')
plt.xlabel(r"$1/f$")
plt.xlim(0,20)

plt.show() 
```

![在此处输入图像描述](../Images/45be1414dc24fd6ffd9d0c15a80eb6c1.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T14:43:04.093

[Evgeny Kluev](https://stackoverflow.com/a/11206061/246207)的答案提供了一种获得**可能**正确答案的方法。

## 定义

假设您有一些`D`重复序列。那就是有一些`d`长度序列`L`：`D_i = d_{i mod L}`，其中`t_i`是从 0 开始编号`i`的序列的第`t``d``D`

## 定理

给定一个`D`你知道的序列是由某个有限序列生成的`t`。给定一些`d`，不可能在有限时间内决定它是否生成`D`.

### 证明

由于我们只被允许有限的时间，我们只能访问有限数量的元素`D`。让我们假设我们访问 的第一个`F`元素`D`。我们选择第一个`F`是因为如果我们只被允许访问一个有限数，那么包含我们访问过的元素的索引的集合是有限的，因此有一个最大值。让那个最大值为`M`。然后我们可以让`F = M+1`，它仍然是一个有限的数字。

设`L`为`d`和`D_i = d_{i mod L}`的长度`i < F`。有两种可能，`D_F`要么相同，要么`d_{F mod L}`不一样。在前一种情况下`d`似乎有效，但在后一种情况下则无效。在我们访问之前，我们无法知道哪种情况是正确的`D_F`。然而，这将需要访问`F+1`元素，但我们仅限于`F`元素访问。

因此，对于任何人来说，`F`我们都没有足够的信息来决定是否`d`生成`D`，因此不可能在有限时间内知道是否`d`生成`D`。

## 结论

可以在有限时间内知道序列`d`不会生成，但这对您没有帮助**。**`D`由于您想找到一个`d`生成的序列`D`，但这涉及到能够证明某个序列生成的其他事情`D`。

除非你有更多关于`D`这个问题的信息是无法解决的。`d`使这个问题可判定的一点信息是生成的最短长度的某个上限`D`。如果您知道生成的函数`D`仅具有已知数量的有限状态，则可以计算此上限。

因此，我的结论是，除非您稍微更改规范，否则您无法解决此问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T15:37:48.593

我不知道在此处应用适当的算法，但我的理解也是，如果您只使用了有限数量的术语，您永远无法确定您已经检测到一个周期。无论如何，这就是我想出的，这是一个非常幼稚的实现，更多的是从评论中教育而不是提供一个好的解决方案（我猜）。

```
def guess_period(source, minlen=1, maxlen=100, trials=100):
    for n in range(minlen, maxlen+1):
        p = [j for i, j in zip(range(n), source)]
        if all([j for i, j in zip(range(n), source)] == p
               for k in range(trials)):
            return tuple(p)
    return None 
```

然而，这个“忘记”了初始顺序并返回一个元组，它是实际周期的循环排列：

```
In [101]: guess_period(gen)
Out[101]: (0, 1, 4, 8, 2, 1, 3, 3, 1, 1) 
```

为了弥补这一点，您需要跟踪偏移量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:10:31.913

由于您的序列不是 X [n+1] = f(X [n] ) 的形式，因此弗洛伊德或布伦特的算法并不直接适用于您的情况。但它们可能会被扩展来完成任务：

1.  使用 Floyd 或 Brent 算法找到序列中的一些重复元素。
2.  查找具有相同值的下一个序列元素。这些元素之间的距离是一个假定的周期 ( `k`)。
3.  记住`k`序列的下一个元素
4.  查找此`k`元素子序列的下一个匹配项。
5.  如果子序列之间的距离大于`k`，则更新`k`并继续执行步骤 3。
6.  重复步骤 4 几次以验证结果。如果重复子序列的最大长度是先验已知的，则使用适当的重复次数。否则使用尽可能多的重复，因为每次重复都会增加结果的正确性。

如果序列循环从第一个元素开始，则忽略第 1 步并从第 2 步开始（找到与第一个元素相等的下一个序列元素）。

如果序列循环不是从第一个元素开始的，那么 Floyd 或 Brent 的算法可能会找到不属于循环的序列的某些重复元素。所以限制步骤 2 和步骤 4 的迭代次数是合理的，如果超过这个限制，则继续步骤 1。

# c# - 关于 DotNetNuke 6.2 的问题

> ID：11205044
> 
> 赞同：0
> 
> 时间：2012-06-26T10:09:57.090
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, dotnetnuke, dotnetnuke-6

我需要有关 DotNetNuke 6.2 的一些问题的帮助......

1）如果营销主管等外行登录网站，那么他应该能够根据他的设计要求通过移动内容块来更改页面布局。

例如，左侧内容块需要移动到右侧。左下角的内容块需要移动到底部。

此任务不会由开发人员完成。是否有不需要更改/修改皮肤文件的示例...请提供代码示例...

2) 是否可以在自定义 MVC 4 应用程序下托管 DotNetNuke 站点，并且它们之间是否可以进行通信？

例如...交换令牌，登录用户信息等

请提供一个代码示例....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:29:54.483

1.  这一切都与您使用的皮肤有关。例如，如果您有一个 LeftPane 和一个 ContentPane。任何对页面具有编辑权限的用户都可以将模块从 LeftPane 移动到 ContentPane，或者相对于窗格中的其他模块向上/向下移动模块。
2.  是的，你可以，但是在将两者嵌套在同一个应用程序结构中时，你必须要小心一点。

# c++ - 单线程 C++ 函数调用中不可调试的非确定性 heisenbug

> ID：11205046
> 
> 赞同：2
> 
> 时间：2012-06-26T10:10:08.950
> 
> 标签：c++, debugging, object-lifetime, heap-corruption, non-deterministic

我已经走到了尽头：我有一个单线程 C++ 程序。这里是一些经验数据和背景信息，我试图突出最重要的关键词；

*   我正在谈论的整个部分**没有任何系统调用**，除了**标准 C++ 库**可能执行的内存（取消）分配调用（`std::set`涉及 s）。这是一个纯粹的逻辑算法。
*   这个行为**应该是确定性**的，取决于输入，我不会改变。
*   如果 bug 出现，程序就会陷入看起来像是**无限循环**的状态，它似乎开始**分配超出任何界限的内存**。
*   该错误不会**以****可预测**的方式表现出来，我可以从命令行运行程序，有时（可能 30%-50%）该错误会表现出来，否则，据我所知，一切运行顺利且正确。
*   一旦我不是直接从提示符运行程序，而是在**gdb 或 valgrind 中运行程序，错误就消失了**，程序永远不会死。
*   现在是最好的部分：我将问题追溯到（模板化的）**非虚拟成员函数调用**。就**在通话之前**，我向 打印一条消息`std::cout`，**我可以**在终端中看到该消息。函数内的**第一行**还有一条调试消息，它**从未显示**。

我再也看不到任何合理的解释了。也许你可以想出一个如何进行的想法。

* * *

编辑：重要的代码行，我更改了行号，以便我们可以参考它们并省略不相关的部分，因此并非所有内容似乎都是最有意义的。

a.cpp

```
 10     std::set<Array const*>* symbols;
 11     std::set<Array const*> allSymbols;
 12     symbols = &allSymbols;
 //  ... allSymbols are populated with std::inserter
 15     std::cout << "eval; cd = " << &cd << ", cg = " << &cd.cg << std::endl;
 16     senderConstraints = cd.cg.eval(*symbols); 
```

b.cpp

```
 31     template <typename ArrayContainer>
 32     ConstraintList eval(ArrayContainer const request) {
 33       std::cout << "inside eval ... going to update graph now" << std::endl; 
```

最后一行输出是：

```
eval; cd = 0x2e6ebb0, cg = 0x2e6ebc0 
```

然后它被困在无限循环中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T11:22:07.657

我敢打赌，当您更改时，将打印第二行

```
ConstraintList eval(ArrayContainer const request) 
```

到

```
ConstraintList eval(ArrayContainer const & request) 
```

如果是这样，要么`allSymbols`在第 12 行和第 15 行之间的状态已损坏，要么您的代码看起来更像这样：

```
std::set<Array const*>* symbols;
{
    std::set<Array const*> allSymbols;
    symbols = &allSymbols;
    //  ... allSymbols are populated with std::inserter
}
std::cout << "eval; cd = " << &cd << ", cg = " << &cd.cg << std::endl;
senderConstraints = cd.cg.eval(*symbols); 
```

这是 UB，因为符号指的是已经破坏的对象。

# shell - 无法在 exec dir 中执行 shell 脚本

> ID：11205047
> 
> 赞同：1
> 
> 时间：2012-06-26T10:10:14.290
> 
> 标签：shell, php4, safe-mode

我们有一个运行 PHP 4.3.9 的服务器，其中 safe_mode ON 和 safe_mode_exec_dir 设置为 /usr/local/bin/php/

所以，因为它是写在[php.net](http://fr.php.net/manual/fr/function.exec.php#refsect1-function.exec-notes)上的，我们不能执行任何不在 safe_mode_exec_dir 中的脚本。

我想调用 /usr/bin 中的 unzip 系统命令（没有 zip 库）。所以我不能通过 PHP 脚本调用。

我创建了一个放置在 /usr/local/bin/php 中的 shell 脚本来执行解压缩功能。所以基本上，它需要 2 个参数（存档文件和文件目标）。

*   当我用简单的用户在命令行中调用它时，它工作正常。
*   当我用 PHP 脚本调用它时，它没有运行（错误代码 127）

Shell 脚本具有以下权限：-rwxr-xr-x 所以它可以由 apache 用户运行。

我不明白为什么它不运行。

外壳脚本：

```
#!/bin/bash
DIR=$1
FILE=$2

# Write to file to check if shell script is running
echo "BANANA" > /my/path/to/app/banana-log.txt

# If file exists, run unzip
if [ -a $FILE ];
    then
        /usr/bin/unzip -u $FILE -d $DIR >> /my/path/to/app/banana-log.txt
else
    echo "FILE_NOT_FOUND $1"  >> /my/path/to/app/banana-log.txt;
fi 
```

PHP 脚本：

```
$output = array();
$return_value = -1;

//-- Get safe_mode_exec_dir value
$shell_script = ini_get('safe_mode_exec_dir') . "/myscript.sh";
$shell_cmd = sprintf("sh %s %s %s", $shell_script, escapeshellarg('/my/destination/path'), escapeshellarg('my/path/to/archive/file.zip'));

//-- Execute command
echo "COMMAND IS : ", $shell_cmd;
$output = exec($shell_cmd, $output, $return_value);
echo "RESPONSE IS : ", implode("<br />",$output);
echo "RETURN CODE IS : ",$return_value; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:25:01.697

检查 apache 错误日志后，我看到以下消息：

> sh: /usr/local/bin/php/sh: 没有这样的文件或目录

所以，目前尚不清楚，但 exec 已经调用了 shell 命令。我的命令以 sh 开头。因此，php 执行以下命令：

> sh sh /usr/local/bin/php/myscript.sh '/my/destination/path' '/my/path/to/archive/file.zip'

/usr/local/bin/php/ 中不存在 sh 文件

为了纠正这个问题，我刚刚从 exec 命令中删除了“sh”，它工作正常！

# php - Codeigniter 中具有多个结果集的存储过程

> ID：11205050
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:19.983
> 
> 标签：php, codeigniter, stored-procedures, amfphp

我一直在研究 AMFPHP + codeigniter + flash，一切正常，但是，当我创建一个存储过程时，问题就开始了。我能够从 AMF 浏览器调用具有多个结果集的存储过程，但是每当从 flash 本身调用该函数时，它都会引发`Bad Version error`.

下面是{来自 CI 论坛}的库，用于遍历正在使用的多个结果集

```
class Mydb
{
   private $CI, $Data, $mysqli, $ResultSet;

   /**
   * The constructor
   */

   function __construct()
   {
     $this->CI =& get_instance();
     $this->Data = '';
     $this->ResultSet = array();
     $this->mysqli = $this->CI->db->conn_id;
   }

    public function GetMultiResults($SqlCommand)
    {
    /* execute multi query */
    if (mysqli_multi_query($this->mysqli, $SqlCommand)) {
        $i=0;
        do
        {

             if ($result = $this->mysqli->store_result()) 
             {
                while ($row = $result->fetch_assoc())
                {
                    $this->Data[$i][] = $row;
                }
                mysqli_free_result($result);
             }
            $i++; 
        }
        while ($this->mysqli->next_result());
    }
    return $this->Data;

   }   
} 
```

并这样称呼它：

```
$this->load->library('mydb');
$this->mydb->GetMultiResults("CALL test()"); 
```

我注意到库加载行在`Bad Version`闪存结束时引发了错误，就好像我注释掉这行它可以工作{就像没有错误但 SP 不执行一样工作}

关于如何解决这个奇怪问题的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T09:11:00.587

我一直致力于在 codeigniter 的存储过程中执行多个查询，我创建了一个名为 SP.php 的库。这是配置中的代码也更改为 database = mysqli

```
if (!defined('BASEPATH'))
    exit('No direct script access allowed');

    class CI_SP {
        private $CI;

        function __construct() {
            $this->CI = & get_instance();
        }

        public function GetResults($SqlCommand) {
            $k = 0;
            $arr_results_sets = array();
            /* execute multi query */
            if (mysqli_multi_query($this->CI->db->conn_id, $SqlCommand)) {
                do {
                    $result = mysqli_store_result($this->CI->db->conn_id);
                    if ($result) {
                        $l = 0;
                        while ($row = $result->fetch_assoc()) {
                            $arr_results_sets[$k][$l] = $row;                        
                            $l++;
                        }
                    }
                    $k++;
                } while (mysqli_next_result($this->CI->db->conn_id));

                return $arr_results_sets;
            }
        }

} 
```

型号代码是

```
 $result = $this->sp->GetResults("call function(parameters);  
    $result1 = $this->sp->GetResults("call function(parameters));  

    print_r($result);        
    print_r($result1);          
    exit;   
    return $query->result_array(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-21T11:09:15.043

尽管 CodeIgniter 使用 mysqli 驱动程序，但在 DB_driver 中没有设置 next_result() 方法。 **[在这里](https://phpsmith.wordpress.com/2012/02/16/callback_procedure-problem-with-mysql-in-codeigniter/)**和[**这里**](http://forum.codeigniter.com/archive/index.php?thread-63754.html)您可以找到更多详细信息。这个想法是：

1.  *在system/database/DB_driver.php*中定义***next_result()***方法：

     *`function next_result() { if (is_object($this->conn_id)) { return mysqli_next_result($this->conn_id); } }`* 

 *（请务必将其推送到您的笔记堆中以进行 CI 系统核心升级）

2.  确保您使用的是***mysqli***驱动器 (application/config/database.php)
3.  在您调用存储过程和 BETWEEN 每次获取结果之后在您的模型中使用`$query_or_somethig-else->next_result();`（并`$query_or_somethig-else->free_result();`在最终使用）*

# database - 数据库设计（许多不同项目的列表，带有自定义字段）

> ID：11205051
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:23.527
> 
> 标签：database, performance, forms, database-design, referential-integrity

我正在开展一个项目，您可以在其中处理各种项目。它是什么并不重要，这是我担心的数据库设计。如果有人能给我一些关于我应该如何为此创建数据库布局的见解，或者只是指出我正确的方向，我将不胜感激。

**一个列表中的所有类型的项目**
假设您有项目列表。你可以有一个 CD 列表、一个 DVD 列表和一个书籍列表。这意味着 1 个列表在数据库术语中有许多项目，列表的 id 在项目行中。
但是，如果您想列出所有与超级马里奥相关的东西，包括原声 DVD、那部可怕的真人电影和一些基于水管工生活的同人小说，该怎么办。
我突然意识到，在绘制我的数据库时，那些属于同一个列表的项目不能在同一个表中，因为它们都有不同的列来支持艺术家/专辑标题、导演/电影标题、作者/小说标题等。我不可能把所有东西都放在一张大桌子上。
最重要的是，我想在我的数据库中拥有原声专辑的曲目标题和电影的演员。如果我只有 CD，我可以轻松地将专辑曲目表附加到我的项目表，但我不能只是将各种不同的表附加到我的项目表，因为如果我这样做对性能来说不会太好想要获取某个列表的所有项目及其所有详细信息。该程序必须搜索所有附加的表格以查找列表的引用，即使该列表不包含任何书籍、黑胶唱片、漫画、电视剧、植物、家具等……</p>

我现在拥有的是以下布局（但我无法想象这是最好的方法）：

```
t_list (id) --> t_item (id, id_list, image)

t_item --> t_cd (id, id_item, artist, title)
t_item --> t_dvd (id, id_item, director, title)
t_item --> …

t_cd --> t_cd_track (id, id_cd, track_title, length)
t_dvd --> t_dvd_actors (id, id_dvd, actor_name, image)
… 
```

**自定义列**
现在，假设要将这些项目添加到 cd 列表，您将有一个带有输入字段的表单，根据表 t_cd 中的列（艺术家、专辑标题、流派……）。我希望能够添加一个自定义输入字段，例如专辑的平均价格。
这是为特定列表的特定用户设置的。这不是在项目级别上设置的，因为这意味着它将添加到每个人的表单中。我只想将该字段添加到我自己的 CD 列表中。
但是，它仍然需要与项目相关，因为需要在数据库中填写该值。

我正在考虑这样的事情：

```
t_list (id) --> t_extra_field (id, description, id_list)
t_extra_field --> t_field_value (id, id_extra_field, value) 
```

但我不完全确定在我的数据库方案中将其附加到何处。

这种结构也能回答我之前的问题吗？( `t_field --> t_field_value`) 如果是这样，我也不知道该附在哪里。也许要列出，就像我在上面的例子中建议的那样？
这意味着某个项目的所有详细信息都在一个表中，但值一个值，而不是单个记录，根据某种类别的 ID，来自另一个表，附加到项目。那将是一个有很多记录的表，这再次提出了我的问题：这对性能不是很糟糕..？

我真诚地希望有人能给我一些关于此事的见解..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:45:27.700

完全通用的数据库可能是个坏主意——这通常意味着您必须在应用程序级别完全强制执行数据一致性。当您想在运行时避免 DDL 时，这对于高度“非类型化”或“易失性”数据可能是合理的，但您在此处描述的数据对于更传统的数据库设计而言看起来足够“类型化”。

根据您的描述，您需要类似以下内容：

![在此处输入图像描述](../Images/732af222b6f1974639659e4895e0170e.png)

该![在此处输入图像描述](../Images/3d3faf90f3df7d40c16da8f503ba25bb.png)符号表示“类别”（又名继承、子类型、泛化层次结构等）。

对于我们确切知道项目应该如何连接的特定情况，我们可以直接通过特定子类型之间的链接（也称为联结）表进行建模，例如 TRACK 表。

此外，我们可以通过 GROUP 和 GROUP_ITEM 对不同类型的项目进行分组（例如，马里奥原声带、电影和书籍可以分组在一起，在同一个 GROUP_ID 下）。

艺术家的处理方式也相当笼统，因此我们可以轻松地表示（例如）同一个人同时写一首歌和一本书的情况。

* * *

至于诸如“专辑平均价格”之类的东西，理想情况下你根本不应该存储它们——你应该在需要时根据现有数据计算它们，这样就消除了结果过时的可能性。

如果这在性能方面出现问题，则：

*   定期执行此操作，缓存结果并使用有些过时的结果。
*   或在修改数据时缓存结果（通过触发器），但要非常小心以避免**并发**环境中的异常。

    例如...

    ```
    SELECT AVG(PRICE) FROM TABLE1;
    INSERT TABLE2 (AVERAGE_PRICE) VALUES (result_of_the_previous_query); 
    ```

    ...几乎可以肯定是不安全的，但取决于 DBMS 甚至...

    ```
    INSERT TABLE2 (AVERAGE_PRICE) VALUES (SELECT AVG(PRICE) FROM TABLE1); 
    ```

    ...如果没有适当的锁定，可能不会完全安全。您需要了解 DBMS 的事务隔离和锁定。

    在计算平均值的特定情况下，您可能会考虑其他技巧，例如通过每个 INSERT/UPDATE/DELETE 触发器分别递增/递减 COUNT 并添加/减去价格的 SUM，然后计算 AVG苍蝇。SQL 保证诸如此类的东西`UPDATE MY_COUNT = MY_COUNT + 1`将是“原子的”。

# android - ExpandableListView 中的一行中的按钮

> ID：11205052
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:24.663
> 
> 标签：android, android-listview, expandablelistview, expandablelistadapter

我有一个具有三个级别的 ExpandableListView。在第一级的适配器中，我有呈现 TextView 的 getGroupView，它工作正常。

```
@Override
        public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
             TextView tv = new TextView(context);
             tv.setText(mCountries.get(groupPosition).getName());
             tv.setBackgroundColor(Color.BLUE);
             tv.setPadding(10, 7, 7, 7);
             return tv;
        } 
```

但现在我想把它提升到一个新的水平.. 只是膨胀一个 XML 并且不仅仅是一个 TextView，还有一个 Button；尽管如此，它还是不起作用，因为当我单击一行时它不会展开。这是改编的方法，当然，在构造函数中，我初始化了inflater：

```
@Override
    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        View v = mInflater.inflate(R.layout.countries_row, null, false);
        mCountryName = (TextView) v.findViewById(R.id.CountryTextView);
        mCountryName.setText(mCountries.get(groupPosition).getName());
        mCountryName.setBackgroundColor(Color.BLUE);
        mCountryName.setPadding(10, 7, 7, 7);
        mCountryExpandButton = (Button) v.findViewById(R.id.CountryExpandButton);
        return v;
    } 
```

`mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);`

任何人都可以请说明为什么它不起作用，以及如何解决它？这真的很奇怪，因为它只是将 TextView 更改为 View ..

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:32:00.007

我这样做：

在活动课上：

```
public void expandGroup(int groupPosition)
{
    if(expandableListView.isGroupExpanded(groupPosition))
        expandableListView.collapseGroup(groupPosition);
    else
        expandableListView.expandGroup(groupPosition);
} 
```

在类中扩展 BaseExpandableListAdapter：

```
public View getGroupView(final int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

    LayoutInflater inflater=LayoutInflater.from(acti);
    View rtnview=inflater.inflate(R.layout.XXX, null);
    TextView text=(TextView)rtnview.findViewById(R.id.tvinfo1);
    text.setText(groupArray.get(groupPosition));
    text.setTextColor(acti.getResources().getColor(R.color.blackcolor));
    text.setTextSize(EDEnv.EEfontSize+3);
    text.setOnClickListener(new OnClickListener(){
        public void onClick(View v) {
            acti.expandGroup(groupPosition);
        }
    });

    Button btn1=(Button)rtnview.findViewById(R.id.button1);
    btn1.setId(groupPosition);
    btn1.setOnClickListener(new Button.OnClickListener(){
        public void onClick(View v)
        {
            acti.showDialog(1);
        }
    });

    if (convertView == null) {
        convertView = rtnview;
    }

    return convertView;
} 
```

通过这种方式，您可以展开组项目，同时在组项目上有一个按钮来做其他事情。必须有更好的方法来做到这一点。但是我没有时间研究它。

# flash - 有什么方法可以在不使用 SDK 扩展的情况下在我的 Flash Air 应用程序中获取 ADS？

> ID：11205053
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:24.777
> 
> 标签：flash, air, sdk, ads

有什么方法可以在不使用 SDK 扩展的情况下在我的 Flash Air 应用程序中获取 ADS？

是否有任何网站可以轻松地在 Flash APP 中实现广告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T00:55:38.207

[http://lilili87222.github.com/admob-for-flash/](http://lilili87222.github.com/admob-for-flash/)

用户可以展示 admob 的所有类型的横幅广告和全屏（插页式广告）广告

用户可以在 actionscript 3 移动应用程序中显示横向和纵向广告

用户可以设置广告位置

便于使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:52:00.450

您可以`StageWebView`用来显示普通的 HTML 广告（横幅等）。尝试[将 adMob](http://www.google.com/ads/admob/)作为提供商。

# android - 图像旋转动画循环在android上不起作用

> ID：11205056
> 
> 赞同：7
> 
> 时间：2012-06-26T10:10:35.600
> 
> 标签：android

我想在android上连续循环旋转imageview。我的代码旋转在没有设置重复模式的情况下工作得很好。如果我设置重复模式重复动画不起作用但是，imageview静态旋转一些角度，我想要循环旋转动画任何人都可以帮助我非常感谢！

这是动画xml

```
<?xml version="1.0" encoding="utf-8"?>
<rotate
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromDegrees="45"
  android:toDegrees="45"
  android:pivotX="50%"
  android:pivotY="50%"
  android:duration="100"
  android:startOffset="0"
/> 
```

这是我的java类

```
import android.app.Activity;
import android.os.Bundle;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;

public class AnimationActivity extends Activity {
    /** Called when the activity is first created. */
    ImageView my_image;
    AnimationListener listener;
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        listener = new AnimationListener() {
            @Override public void onAnimationStart(Animation animation) {}
            @Override public void onAnimationRepeat(Animation animation) {}
            @Override
            public void onAnimationEnd(Animation animation) {
                System.out.println("End Animation!");
                //load_animations();
            }
        };

        my_image=(ImageView)findViewById(R.id.my_img);
        load_animations();

    }
    void load_animations()
    {
        new AnimationUtils();
        Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotation);
        rotation.setRepeatCount(-1);
        rotation.setRepeatMode(2);
        rotation.setAnimationListener(listener);
        my_image.startAnimation(rotation);
    }

} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T10:41:58.970

最后，我得到了解决方案尝试下面的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:fromDegrees="0"
  android:toDegrees="360"
  android:pivotX="50%"
  android:pivotY="50%"
  android:duration="2000"
  android:repeatMode="reverse"
  android:repeatCount="infinite"
  android:startOffset="0"
/> 
```

这是我的课

```
import android.app.Activity;
import android.os.Bundle;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.ImageView;

public class AnimationActivity extends Activity {
    /** Called when the activity is first created. */
    ImageView my_image;
    AnimationListener listener;
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        listener = new AnimationListener() {
            @Override public void onAnimationStart(Animation animation) {}
            @Override public void onAnimationRepeat(Animation animation) {}
            @Override
            public void onAnimationEnd(Animation animation) {
                System.out.println("End Animation!");
                //load_animations();
            }
        };

        my_image=(ImageView)findViewById(R.id.my_img);
        load_animations();

    }
    void load_animations()
    {
        new AnimationUtils();
        Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotation);
        rotation.setAnimationListener(listener);
        my_image.startAnimation(rotation);
    }

} 
```

那就是代码运行良好！

我的问题解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T08:49:19.007

在通过互联网的答案进行研究后，我找到了一个非常适合我的解决方案。（是的，repeatCount 和 repeatMode 与 animationSet 一起使用时非常错误）。

anim_rotate_fade.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/accelerate_decelerate_interpolator"
    android:ordering="together" >

    <objectAnimator
        android:duration="3000"
        android:propertyName="rotation"
        android:repeatCount="1"
        android:valueTo="360"
        android:valueType="floatType" />

    <objectAnimator
        android:duration="3000"
        android:propertyName="alpha"
        android:repeatCount="1"
        android:repeatMode="reverse"
        android:valueFrom="0.0"
        android:valueTo="0.3"
        android:valueType="floatType" />

    <objectAnimator
        android:duration="3000"
        android:propertyName="y"
        android:repeatCount="1"
        android:repeatMode="reverse"
        android:valueFrom="380"
        android:valueTo="430"
        android:valueType="floatType" />

</set> 
```

在活动中：（通过在动画结束后引入轻微延迟来解决它）。

```
ImageView starlightImageView = new ImageView(this);
starlightImageView.setImageResource(R.drawable.starlight);
final AnimatorSet animate = (AnimatorSet) AnimatorInflater.loadAnimator(this, R.anim.anim_rotate_fade);
AnimatorListenerAdapter animatorListener = new AnimatorListenerAdapter() {
    @Override
    public void onAnimationEnd(Animator animation) {
        super.onAnimationEnd(animation);
        new Handler().postDelayed(new Runnable() {
            @Override public void run() {
                animate.start();
            }
        }, 1000);
    }
};
animate.setTarget(starlightImageView);
animate.addListener(animatorListener); 
```

您想研究很多类，但目前我正在使用高度灵活的 objectAnimator。我不建议使用 Animation 或 AnimationUtils：

*   动画
*   动画工具
*   动画师
*   AnimatorInflater
*   动画监听器
*   AnimatorListenerAdapter

# c - 数组对齐/sizeof() 返回额外值

> ID：11205057
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:40.763
> 
> 标签：c, sizeof

以下代码...

```
void foo(char* x)
{
        int i;
        int len = sizeof(x)/sizeof(x[0]);

        printf("len: %d\n", len);
        for(i=0; i<len; i++){
                printf("i: %d, v: %x\n", i, x[i]);
        }
} 
```

...当被称为：

```
 char bar[] = {0xDE, 0xAD, 0xBE, 0xEF};
        foo(bar); 
```

...输出：

```
len: 8
i: 0, v: ffffffde
i: 1, v: ffffffad
i: 2, v: ffffffbe
i: 3, v: ffffffef
i: 4, v: ffffffff
i: 5, v: 7f
i: 6, v: 0
i: 7, v: 0 
```

不完全确定它是否适用于此，但通读 SO 上的类似帖子，这似乎是一个对齐问题（我在 64 位机器上）。

任何指针？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:12:21.613

这与对齐无关。

```
int len = sizeof(x)/sizeof(x[0]); 
```

`x`是指针而不是数组。`sizeof (x)`计算 64 位机器上 8 个字节的指针大小。

现在它打印`ffffffde`insteas of`de`因为整数提升（执行符号扩展）。为避免这种情况，`ffffff`您可以使用`unsigned char`type 代替`char`或将`printf`参数转换为`unsigned int`：

```
printf("i: %d, v: %x\n", i, (unsigned int) x[i]); 
```

# c++ - if语句中的C ++ QList，默认值是什么？

> ID：11205061
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:55.443
> 
> 标签：c++, qt, if-statement, qlist

我找到了一些带有这些奇怪行的代码示例

```
QList<TDataXml *> *newXMLData = input->getValue<QList<TDataXml *>>();
    if(newXMLData) 
    {
        // do things
    } 
```

我不明白`if(newXMLData)`。这是一个 QList。什么时候陈述应该是真的还是假的？为什么不使用 Qt isEmpty() 方法呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:16:25.210

`if(newXMLData)` 检查空值，因为`newXMLData`它是一个指针，因此它可以不指向任何对象，在这种情况下它的值是`nullptr`（或`NULL`在 C++03 中）。

如果`newXMLData`不是，**那么** `nullptr`它将是`true`并且*if-block*将执行，否则`false`并且*if-block*将不会执行。

与 (C++11) 相同：

```
if(newXMLData != nullptr) //or if(newXMLData != NULL) in pre C++11
{
  //your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:15:54.077

`newXMLData`是指向的*指针*，`QList`因此可以初始化为 NULL。通过在布尔上下文中测试指针，您可以避免取消引用 NULL 指针，这将是未定义的行为。

所以换句话说，if 语句不是用来检查列表是否为空，而是用来检查对`getValue()`方法的调用是否返回了一个有效的指针。仅当指针不为 NULL 时，该语句才会评估为 true。只有这样，您才能可靠地调用`isEmpty()`指针指向的类的任何其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:16:33.090

if(newXMLData) 表示指针 newXMLData 是否指向有效对象。如果指针指向空（NULL），则不能调用对象的方法。所以你需要测试指针是否有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:19:39.323

检查`newXMLData`是`NULL`或`0`。但是，`newXMLData`需要在 if 语句之前初始化 0 或 NULL。

# mysql - 简单的Mysql查询运行缓慢

> ID：11205064
> 
> 赞同：0
> 
> 时间：2012-06-26T10:10:59.397
> 
> 标签：mysql, sql

我有一个`MySQL`非常简单但运行速度非常慢的查询。我有两个表`corporate_main_member`，`corporate_main_corporate_membership`并且正在运行以下查询：

```
SELECT m.gender FROM corporate_main_member m, corporate_main_corporate_membership cm where m.id = cm.FK_member_ID and cm.FK_corporation_id = 6 
```

当我不包括第二个条件`(cm.FK_corporation_id = 6)`时，查询运行正常......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:13:42.823

在查询中使用`JOIN`关键字并在 FK_corporation_id 上创建索引。

```
SELECT m.gender 
FROM   corporate_main_member m 
       INNER JOIN corporate_main_corporate_membership cm 
               ON m.id = cm.fk_member_id 
WHERE  cm.fk_corporation_id = 6 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:14:19.533

这是上述查询的更有效形式。

```
SELECT 
m.gender 
FROM corporate_main_member m,
 corporate_main_corporate_membership cm on(m.id = cm.FK_member_ID)
where cm.FK_corporation_id = 6 
```

虽然您可以在corporate_main_corporate_membership 上创建索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:53:49.293

```
SELECT
  m.gender
FROM corporate_main_member AS m
  LEFT JOIN corporate_main_corporate_membership AS cm
ON m.id = cm.FK_member_ID
    AND cm.FK_corporation_id = 6 
```

# spring - 使用 crudRepositoy 来自 DAO 的 NullPointerException

> ID：11205070
> 
> 赞同：2
> 
> 时间：2012-06-26T10:11:20.047
> 
> 标签：spring, spring-data, spring-data-jpa

我使用 CrudRepository 得到了 java.lang.NullPointerException

我的项目如下所示：

strut2 动作

服务

存储库

领域

```
class Action {
  @Autowired MyService service;
  public String execute(){
    service.getList();
    return "ok";
  }
}

interface Service {
   List getList();
}

@org.springframework.stereotype.Service
class ServiceImpl implements Service {
  @Autowired MyRepository repo;
  List getList(){
    return (List)repo.findAll();
  }
}
package com.mycompany.repositories;
interface MyRepository extends CrudRepository<MyPojo, String>{} 
```

这是配置：

```
 <?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jpa="http://www.springframework.org/schema/data/jpa"
       xsi:schemaLocation=" http://www.springframework.org/schema/beans 
                            http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
                            http://www.springframework.org/schema/context
                            http://www.springframework.org/schema/context/spring-context-3.1.xsd
                            http://www.springframework.org/schema/tx
                            http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
                            http://www.springframework.org/schema/data/jpa 
                            http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <jpa:repositories base-package="com.mycompany.repositories" />

    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager" >
        <property name="entityManagerFactory" ref="entityManagerFactory" />
        <property name="jpaDialect">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
        </property>
    </bean>
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource" />
        <property name="persistenceUnitName" value="unit-name" />
        <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
                <property name="database" value="POSTGRESQL"/>
            </bean>
        </property>
    </bean>
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="username" value="root" />
        <property name="password" value="root" />
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql://127.0.0.1:5432/mydb" />
    </bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor"></bean>  

    <tx:annotation-driven transaction-manager="transactionManager" />
</beans> 
```

我是新来的，每次调用 Action 类时，都会注入服务，但 MyRepository 始终为空。

有人可以帮我吗，如果您需要更多信息，请告诉我，谢谢！

**编辑 1**

堆栈跟踪：

```
2012-06-26 15:33:32,041 INFO  - com.myproject.action.project.preparation.ApplicationAction - listing application...
java.lang.NullPointerException
    at com.myproject.service.impl.ApmProjectPreparationServiceImpl.getAllApplications(ProjectPreparationServiceImpl.java:41)
    at com.myproject.action.project.preparation.ApplicationAction.listAction(ApplicationAction.java:67)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292) 
```

我也尝试过自己调试。我在 ServiceImpl 类上发现**@Autowired MyRepository 存储库**为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:15:03.200

[似乎我找到了答案，感谢Spring Forum](http://forum.springsource.org)的@MartenDeinum 。

这里是技巧：

1.  我使用struts2做GUI，所以我需要struts2 spring插件来重写struts2对象工厂，这样spring才能找到struts动作。

2.  我为@Service 添加了这个配置

    ```
    <context:component-scan base-package="com.myproject" /> 
    ```

    基本上我也需要

    ```
    <jpa:repositories base-package="com.myproject.repository" /> 
    ```

    找到 CrudRepository。

希望这可以帮助别人。

# java - System.getProperty("path.separator") 没有按预期工作

> ID：11205071
> 
> 赞同：0
> 
> 时间：2012-06-26T10:11:23.393
> 
> 标签：java, string, split

导入java.lang.System；

```
public class Splitter{

 public static void main(String args[]){

  String path_separator = "Path separator is: " + System.getProperty("path.separator");

  String str = "abc:def:gha";

  System.out.println(path_separator);

  String[] temp;

  temp = str.split(path_separator);

  for(int i=0; i<temp.length; i++)
    System.out.println(temp[i]);

 }
} 
```

java拆分器

路径分隔符是：：

abc:def:gha

当我写

```
temp = str.split(":"); 
```

反而

java拆分器

路径分隔符是：：

abc def gha

那么“：”与“：”有何不同，或者我错过了什么？

同样的事情：

```
System.getProperty("line.separator") 
```

谢谢托马斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:14:31.690

您初始化`path_separator`不正确，因此在第一次运行中，您尝试按 拆分`str`，`"Path separator is: :"`而不是按拆分`":"`。

正确的代码应该是

```
String path_separator = System.getProperty("path.separator");

...

System.out.println("Path separator is: " + path_separator); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:16:44.587

您正在拆分`str.split(path_separator);`，路径分隔符是

```
String path_separator = "Path separator is: " + System.getProperty("path.separator"); 
```

这是一个完整的句子。

尝试：

```
str.split(System.getProperty("path.separator")); 
```

# php - 打开网页，获取其内容并点击其中的链接

> ID：11205074
> 
> 赞同：0
> 
> 时间：2012-06-26T10:11:34.667
> 
> 标签：php, javascript, jquery

我想使用脚本语言（Javascript，PHP）来完成以下任务。

1）我需要在另一个窗口中打开一个新网页，给定一个 URL。

2）在其内容中找到特定链接并在同一窗口中打开它。

Javascript可以做到这一点吗？如果是，这怎么可能？

PS：第一个链接是动态的，所以我只能点击一次才能打开它并阅读它。我注意到，如果我打开它然后阅读它，使用 PHP 的 get_contents，内容会有一些差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:39:43.503

您可以使用[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)打开页面并找到您需要的链接。

查找所有链接的示例：

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

// Find all links 
foreach($html->find('a') as $element) 
       echo $element->href . '<br>'; 
```

'find' 方法有类似的 jQuery sintax。并且 PHP Simple HTML DOM Parser 有很好的文档和示例。

希望这有帮助！

# html - CSS3中的垂直对齐

> ID：11205076
> 
> 赞同：1
> 
> 时间：2012-06-26T10:11:38.033
> 
> 标签：html, css, alignment

我正在尝试创建一个带有子菜单的导航菜单，并在今天摆弄它。但我坚持让父菜单的子菜单对齐它的链接。

我的 HTML

```
<!-- navigation menu -->
<div class="MenuContainer">
        <ul class="menu">
                <li><a href="#">Home</a></li>
                <li><a href="#">About</a></li>
                <li>
                        <a href="#">Projects</a>
                        <ul class="sub">
                                <li><a href="#">Project1</a></li>
                                <li><a href="#">Project2</a></li>
                                <li><a href="#">Project3</a></li>
                        </ul>
                </li>
        </ul>
</div> 
```

我的 CSS

```
.MenuContainer {
    width:100%;
    height:50px;
    border:1px solid;
    position:relative;
}

ul {
    margin:0;
    padding:0;
}

/*Main menu*/
li.menu {
    height:50px;
    float:left;
}

ul.menu li {
    list-style:none;
    float:left;
    height:49px;
    text-align:center;
}

ul.menu li a {
    display:block;
    padding:0 20px;
    text-align:center;
    font-size:17px;
    line-height:49px;
    text-decoration:none;
    color:#5d5d5d;
}

ul.menu li:hover > a {
    color:#fdfdfd;
}

ul.menu li:hover > ul {
    display:block;
}

/*sub menu*/
li.sub {
    height:40px;
    float:left;
}

ul.sub li {
    list-style:none;
    float:left;
    height:39px;
    text-align:center;
}

ul.sub li a {
    display:block;
    padding:0 20px;
    text-align:center;
    font-size:17px;
    line-height:39px;
    text-decoration:none;
    color:#5d5d5d;
} 
```

如果有人能告诉我我哪里出错了，请做。第一次尝试从头开始创建。

此外，如果有人知道一个好的 HTML5/CSS3 论坛/论坛，请不要犹豫发布链接。我试图找到一些但都不是认真的或没有活跃用户。

这也是我在 stackoverflow 上的第一篇文章，所以如果我在这里犯了初学者的错误，请指出。

提前感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:17:10.603

嘿，我想你想要这个做太阳课`position relative`和 sub ul 给`position absolute`

```
.sub{
position:absolute;
}

ul.menu li {
    position:relative;
} 
```

**现场演示** [http://jsfiddle.net/HVk4G/](http://jsfiddle.net/HVk4G/)

* * *

垂直菜单 更新了演示[http://jsfiddle.net/HVk4G/1/](http://jsfiddle.net/HVk4G/1/)

# c# - 我正在创建 CRUD 函数，当我单击“删除”按钮时不断收到错误消息，我的 SQL 代码是否正确？

> ID：11205079
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:12:03.587
> 
> 标签：c#, wpf, visual-studio-2010, crud

//如果你点击一行，它将被删除

```
 string sqlStr = "DELETE from Members MemberID, FirstName, LastName, Phone, Mobile, Email, Address, Suburb, City, PostalCode, DateJoined;";
 sqlStr += "WHERE rowid=@Rowid;"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:15:02.750

```
string sqlStr = "DELETE from Members WHERE rowid=@Rowid"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:20:06.893

DELETE 操作的语法不需要包含列名。

```
DELETE FROM <table_name> WHERE <condition> 
```

在你的情况下，

```
string sqlStr = "DELETE from Members WHERE rowid=@Rowid"; 
```

我假设您已经`@Rowid`声明并指定为`SqlParameter`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:16:54.697

根据您的代码，您应该这样做：

```
string sqlStr = "DELETE from Members";
 sqlStr += " WHERE rowid=@Rowid;"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:15:16.223

我认为您应该删除`;`第一行的 at 和。并删除这些字段名称。
只需使用

```
"delete from members where rowid=@Rowid" 
```

# .net - String.Format 带符号小数，固定小数位数，无小数分隔符

> ID：11205084
> 
> 赞同：3
> 
> 时间：2012-06-26T10:12:23.103
> 
> 标签：.net, vb.net, decimal, string.format

什么是最干净、最易读的 String.Format 具有以下标准的小数的方法

*   以符号（+ 或 -）开头
*   固定数量的小数位数
*   没有小数分隔符
*   右对齐
*   预填充“0”

例如

*   123,45 将变为“+0012345”
*   -1123,45 将变为“-0112345”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:50:55.957

您几乎肯定希望将[自定义数字格式字符串](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)传递给[String.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)方法。

自定义格式字符串可以包含 2 个部分（第一个用于正格式，第二个用于负格式），您可以为其提供文字`+`或`-`. 因此，要使用 7 个字符的零填充格式化，这类似于：

```
String.Format("{0:'+'0000000;'-'0000000}",yourValue); 
```

但是，这会截断小数，因此您的输入给出

```
123.45 --> +0000123
-1123.45 --> -0001123 
```

一个简单的解决方案是将您的数字乘以 100（将小数位数固定为 2），然后再将其传递给上面

现场示例：[http](http://rextester.com/SZR8690) ://rextester.com/SZR8690 （C# - 对不起，但只有演示的想法）

然后可以将其包装到扩展方法中：

```
<Extension()> 
Public Function ToFixedFormat(ByVal value As Decimal, ByVal numFractionalDigits As Integer)
    Return String.Format("{0:'+'0000000;'-'0000000}",value * Math.Pow(10,numFractionalDigits))
End Function 
```

现场示例：[http](http://rextester.com/LSAAA60214) ://rextester.com/LSAAA60214 (VB.NET)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:49:36.503

也许有更好的东西，因为它看起来有点笨拙，但它确实有效。

我指定正负格式以强制正数和固定大小字符串的加号。然后我使用`InvariantCulture`来强制该点作为小数分隔符（我也可以使用其他文化）。最后一步是删除点。

```
Dim value = -1123.45
Dim formatted = value.ToString(
        "+00000.00;-00000.00",
        System.Globalization.CultureInfo.InvariantCulture)
formatted = formatted.Replace(".", "") 
```

如您所见，我不知道如何指定**无**小数分隔符。

# android - postExec 的 Android 任务 AsyncTask 问题

> ID：11205086
> 
> 赞同：0
> 
> 时间：2012-06-26T10:12:29.657
> 
> 标签：android, android-asynctask

我遇到的问题是 PostExecute 没有触发。我看到了背景的日志标签，但 PE 从不触发。

我正在从这样的计时器调用此任务：

```
 findViewById(R.id.buttonstart).setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                try {
                    openFile("FeedTimerTask.html");
                    Timer t = new Timer("FeedTimerTask", true);
                    timerTask = new FeedTimerTask();
                    t.schedule(timerTask, 2000, 20000);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });

Runnable runme = new Runnable() {

        @Override
        public void run() {
            timestart = Calendar.getInstance().getTimeInMillis(); 
            provider.refreshNoCache();

        }
    };

     class FeedTimerTask extends TimerTask{

        @Override
        public void run() {
            try{Looper.prepare();}catch(Exception e){};
            runme.run();

        }

     } 
```

这是使用“provider.refreshNoCache();”调用的 dataprovider 类内部的主要任务本身 多于：

```
// threaded rteftesh tasks
@SuppressWarnings("rawtypes")
public class RefreshTask extends SupportAsyncTask {

    private int errorcodecode = 0;
    private ProgressDialog dialog=null;
    private Exception mainExeption=null;
    protected  String waitMessage = "Laddar ner information..";
    private boolean useCache;

    public RefreshTask(boolean useCache) {
        this.useCache = useCache;
    }

    public void onPreExecute() {
        data = null;
        if (showSpinnerOnRefresh){
            dialog = ProgressDialog.show(context, "", waitMessage , true);
            dialog.show();
        }
    }

    protected Object doInBackground(Object... params) {
        errorcodecode = 1;
            try {
                invokeFeedRead();
                Log.e("DataProvider", "Bkgtask...");
                errorcodecode = 0;
            } catch (BrJSONException e) {
                Log.e("[ERROR]","PROVIDER "+e.getMessage());
                mainExeption = e;
                errorcodecode = 1;
            } catch (IOException e) {
                Log.e("[ERROR]","PROVIDER "+e.getMessage());
                mainExeption = e;
                errorcodecode = 2;
            } catch (Exception e) {
                Log.e("[ERROR]","PROVIDER "+e.getMessage());
                mainExeption = e;
                errorcodecode = 3;
            }

        if (errorcodecode==0){ 
        }
        return null;
    }

    @Override
    protected void onCancelled() {

        super.onCancelled();
        Log.e("DataProvider", "Cancelled...");

        if (dialog != null)
            try{dialog.dismiss();}catch(Exception e){}
        BrAlert.Show(context, "Obs", BrAppConfig.ServerError+" (timeout)", 0);
        onError_IO(new IOException("Timeout!"));
        errorcodecode=2;

    }

    @Override
    protected void onPostExecute(Object result) {
        // super.onPostExecute(result);
        Log.e("DataProvider", "PostExec...");

        if (dialog != null)
            try{dialog.dismiss();}catch(Exception e){}

        switch (errorcodecode) {
        case 0:
            onFeedLoaded();             
            cacheAge = System.currentTimeMillis();
            break;
        case 1:
            onError_DataFormat(mainExeption);
            break;
        case 2:
            onError_IO(mainExeption);
            break;
        default:
            onError_GeneralExeption(mainExeption);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:43:39.997

您的任务甚至在到达 onPostExecte 方法之前就被取消了。如果任务在到达 onPostExecute 方法之前被取消。它不会触发 onPostExecute 而是触发 onCancelled 方法。请提供足够的时间来完成任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T08:43:45.933

我最终发现了问题所在。这与范围有关。我需要一个处理程序来调用另一个线程。

以下是对其他人可能有用的解决方案：

在创建：

```
 tickHandler = new Handler();
                tickTimer = new Timer();
                tickTimer.schedule(new FeedTimerTask(),
                               0,
                               50000);  //FPS 
```

处理程序类。

```
 class FeedTimerTask extends TimerTask{
    private Runnable runable;

    public FeedTimerTask(){
        super();
        runable = new Runnable(){

            @Override
            public void run() {
                timestart = Calendar.getInstance().getTimeInMillis(); 
                provider.refreshNoCache();

            }

        };
    }
    @Override
    public void run() {
        tickHandler.post(runable);

    }

} 
```

# node.js - Mongoose：如何建模对象层次结构？

> ID：11205088
> 
> 赞同：1
> 
> 时间：2012-06-26T10:12:31.433
> 
> 标签：node.js, mongoose

我正在使用带有 node.js 的 Mongoose 2.7.0。

如何用单个嵌入对象来描述模式？

实际上，我想最终使我的模式与 JSON 结构匹配，例如：

```
{
    title: "",
    position: {
       loc: [0, 0],
       street: "",
       zip: 1234,
       town: "Name"
    }
} 
```

到目前为止，我最终得到了一个解决方案，例如：

```
var MySchema = new mongoose.Schema({
  title: { type: String },
  position: {}
}); 
```

此解决方案中的问题是它不验证`position`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T12:50:42.690

最简单的方法是执行以下操作：

```
var MySchema = new mongoose.Schema({
  title: { type: String },
  position: {
    loc: [Number],
    street: String,
    zip: Number,
    town: String
  }
}); 
```

# aptana - Aptana eclipse插件离线安装

> ID：11205091
> 
> 赞同：3
> 
> 时间：2012-06-26T10:12:36.350
> 
> 标签：aptana

我有一组无法连接到互联网的特定电脑。我如何在它们上安装 aptana eclipse 插件？非常感谢弗朗切斯科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T07:56:15.223

只需转到以下链接并下载插件并在 eclipse->Help>Install New Software->work with textfield 中提供已安装插件的路径

[http://d1iwq2e2xrohf.cloudfront.net/tools/studio/plugin/install/studio3/3.0.8.201201201626/com.aptana.feature.studio-3.0.8.201201201626-7E37L7HFGQGNJXIW3R_Iz0JjtqJe.zip](http://d1iwq2e2xrohf.cloudfront.net/tools/studio/plugin/install/studio3/3.0.8.201201201626/com.aptana.feature.studio-3.0.8.201201201626-7E37L7HFGQGNJXIW3R_Iz0JjtqJe.zip)

# mysql - 对具有少量固定值但值占总行数不到 25% 的列进行索引

> ID：11205093
> 
> 赞同：2
> 
> 时间：2012-06-26T10:12:40.810
> 
> 标签：mysql, select, indexing

我有一个领域`table_name`在表中有一个字段，它只能有 20 个不同的值。表中的总记录约为几万行。如果我做这样的查询：

```
SELECT * FROM table WHERE table_name = 'adasd'; 
```

返回的记录最多为总行数的 25%。大多数情况下，我只得到总记录的 10%。这里有索引字段的范围`table_name`吗？我听说要使索引正常工作，它需要该字段中的值是唯一的或接近它。就我而言，它根本不是独一无二的。但我也听说，如果返回的行数与总行数相比较少，则可以很好地建立索引。

我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:27:31.260

不，它们不必是唯一的才能从使用索引中受益，但是需要一些时间来考虑 DBMS 在处理查询时会做什么：

全表扫描 - 顺序读取数据（即很少的查找操作）

索引查找 - 在索引上进行几次查找以查找所选数据的开头，然后进行顺序读取（几次查找）以识别基础表中的行，然后进行多次查找以从表中获取行

寻求是昂贵的。

（全表扫描的次要影响是它们更容易将热数据从缓存中刷新 - 但您应该首先解决主要问题）。

在这种情况下，如果索引存在，DBMS 不太可能使用索引，即使这样做，它也可能比全表扫描慢。作为一个（非常）粗略的经验法则，只有当谓词识别的行少于大约 5% 时，您才会从索引中受益（但它会根据索引和数据的相对大小而有所不同） ）。

即不要单独在该字段上添加索引。

我认为您可能会从花一些时间思考为什么需要运行返回这么多行的查询中受益？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:43:38.843

# 修订答案

我刚刚了解到创建索引并不意味着 MySQL 会使用它。记住这一点，我将重新表述我的答案：

如果（一般或您自己的）实践建议您这样做，您应该在该列上创建索引。MySQL 将使用启发式算法；其中包括查看可用索引及其各自的基数，以确定使用或根本不使用索引的最佳索引。

关于这个主题的有趣阅读[在这里](http://webmonkeyuk.wordpress.com/2010/09/27/what-makes-a-good-mysql-index-part-2-cardinality/)。

# android - R无法在新创建的项目中解决

> ID：11205094
> 
> 赞同：1
> 
> 时间：2012-06-26T10:12:40.890
> 
> 标签：android, eclipse, project

我对 Android 编程完全陌生，这件事已经困扰着我了。我`R cannot be resolved`在新创建的项目中遇到错误！因为它是新创建的，所以我根本没有编辑它，所以我确定它没有错误，它应该只是一个 hello world 程序。我查了，没有

```
import android.R; 
```

在那里，我不知道还有什么可能导致这种情况。由于这个错误，我什至无法尝试练习布局......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:16:56.160

清理android项目....

```
Window -> Preferences -> General -> Keys (**Ctrl+Shift+L**) 
```

在类型过滤器文本中写入构建干净。

在这里你可以绑定密钥。例如**Ctrl+Shift+L**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:25:44.860

尝试更改项目的 API 级别，应用更改，然后恢复到旧的 API 级别，然后清理您的项目。我不确定如何，但这有时对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:51:23.337

另一种解决方案。创建项目后，我将目标 sdk 更改为 2.1。Android 显示布局中没有错误，所以我重新启动了 eclipse（清理没有帮助），然后 Android 用红色 x 标记了布局。它无法识别 match_parent 参数，因为它是在 Android 2.2 中引入的。解决方案是将目标sdk更改为2.2或使用fill_parent或wrap_content而不是match_parent。

# mysql - 如何在 django 中检索过去几周的记录

> ID：11205096
> 
> 赞同：13
> 
> 时间：2012-06-26T10:12:45.523
> 
> 标签：mysql, django, django-orm

我在 django 中遇到了如何从上周（不是 7 天前）检索数据的问题。使用`date.isocalendar()[1]`会很棒。然而，一些stackoverflow浏览导致我没有满意的结果。

无论如何，我可以在没有可移植性的情况下使用 mysql 的`INTERVAL`功能。这是我想使用 django 的 ORM 进行的查询。

`SELECT id, user_id, CAST(timestamp AS Date), WEEK(timestamp,3), WEEK(CURDATE(), 3) FROM main_userstats WHERE week(timestamp, 3) = WEEK(DATE_SUB(CURDATE(), INTERVAL 1 WEEK ), 3)`

我如何使用`extra`django 中的函数来做到这一点（如果不可能以任何其他更简单的方式做到这一点）？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-01T22:48:12.513

我假设您要查找的是属于前一周同一日历周的所有条目。

这应该可以解决问题：

```
class Entry(models.Model):
    pub_date = models.DateField([...]) 
```

要获取对象：

```
from datetime import timedelta
from django.utils import timezone
some_day_last_week = timezone.now().date() - timedelta(days=7)
monday_of_last_week = some_day_last_week - timedelta(days=(some_day_last_week.isocalendar()[2] - 1))
monday_of_this_week = monday_of_last_week + timedelta(days=7)
Entry.objects.filter(created_at__gte=monday_of_last_week, created_at__lt=monday_of_this_week) 
```

请注意，我添加了 7 天来获取本周的星期一，而不是添加 6 天来获取上周的星期日，并且我使用了 created_at__lt=monday_of_this_week（而不是 __lte=）。我这样做是因为如果您的 pub_date 是 DateTimeField，则它不会包含星期日对象，因为使用 now().date() 时的时间是 00:00:00。

这可以很容易地调整为将星期日视为一周的第一天，但​​ isocalendar() 认为它是最后一天，所以我同意了。

如果使用 Django < 1.4，请使用以下内容：

```
from datetime import date, timedelta
some_day_last_week = date.today() - timedelta(days=7) 
```

代替：

```
from datetime import timedelta
from django.utils import timezone
some_day_last_week = timezone.now().date() - timedelta(days=7) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-26T10:36:56.163

看Django ORM的[过滤](https://docs.djangoproject.com/en/1.4/topics/db/queries/#retrieving-specific-objects-with-filters)方法。

基本示例：

```
class Entry(models.Model):
  pub_date = models.DateField([...])

Entry.objects.filter(pub_date__year=2006) 
```

但是您可以使用过滤器进行更复杂的查询，例如：

```
Entry.objects.filter(pub_date__gte=datetime.now()) 
```

如您所见，您可以使用`datetime`和其他 python 库来定义特定日期。[查看有关字段查找](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#field-lookups)的文档，以了解您有哪些可能性。

在您的情况下，您可以执行以下操作（[受此 Stackoverflow 帖子的启发](https://stackoverflow.com/questions/441147/how-can-i-subtract-a-day-from-a-python-date)）：

```
from datetime import date, timedelta

d=date.today()-timedelta(days=7)
Entry.objects.filter(pub_date__gte=d) 
```

我不是 100% 确定这种查找是否有效，但这是正确的方向。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-20T12:52:02.460

可以按周数week和iso_year查询数据

```
import datetime
date = datetime.datetime.today()
week = date.strftime("%V")

Entry.objects.filter(pub_date__week=week)
from django.utils.the timezone import now
year, week, _ = now().isocalendar()

Entry.objects.filter(pub_date__iso_year=year, pub_date__week=week) 
```

# graph - Neoclipse 的替代品

> ID：11205100
> 
> 赞同：5
> 
> 时间：2012-06-26T10:13:13.767
> 
> 标签：graph, neo4j

我正在玩 neo4j 来用 JAVA 存储一些数据。我想有一个很好的方法来可视化我的 neo4j 数据库并查看属性等，主要是为了获得反馈并了解我在数据库中放入的内容。

我尝试过 Neoclipse，但到目前为止它非常有问题，并且通常不会加载图表。有替代的图形可视化程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-08T12:38:17.783

有一种新的解决方案可以使用称为[Linkurious](http://linkurio.us/)的 Web 浏览器来探索 Neo4j 图形数据库的内容。

它允许您轻松搜索和可视化节点和边缘。

您可以在 Neo4j 网站上看到[一些替代解决方案。](http://www.neo4j.org/develop/visualize)

这些替代方案包括： - D3js：用于可视化的开源库 - Gephi：关于图形可视化的开源项目 - KeyLines：用于可视化网络的 JavaScript 工具包

免责声明：我是 Linkurious 和 Gephi 的联合创始人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:56:38.720

最简单的方法是启动 neo4j 服务器并通过 webAdmin 查看您的图表：http: [//docs.neo4j.org/chunked/stable/tools-webadmin.html](http://docs.neo4j.org/chunked/stable/tools-webadmin.html)

其他选项是 neo4j 的 Gephi 插件：[https](https://gephi.org/plugins/neo4j-graph-database-support/) ://gephi.org/plugins/neo4j-graph-database-support/ GraphViz 上有一个 neo4j 博客条目：http: [//blog.neo4j.org/2012/05/图这个渲染你的图with.html](http://blog.neo4j.org/2012/05/graph-this-rendering-your-graph-with.html)

# c# - 如何将hovermenuextender控件绑定到动态gridview中具有多列的行？

> ID：11205102
> 
> 赞同：0
> 
> 时间：2012-06-26T10:13:15.597
> 
> 标签：c#, asp.net, asp.net-ajax

我希望将悬停菜单弹出到从数据源动态填充的网格视图的行。我尝试在发生 rowdatabound 事件时将 hovermenuextender 控件的 TargetcontrolId 属性设置为行唯一 ID。但是弹出窗口不是出现在每一行的右侧，而是出现在标题行的右侧。有人可以帮我解决这个问题吗？我使用下面的代码相同

代码隐藏：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    try
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            HoverMenuExtender hoverMenu =(HoverMenuExtender)e.Row.FindControl("hme2");
            if (hoverMenu != null)
            {
                hoverMenu.TargetControlID = hoverMenu.Parent.Parent.UniqueID;

            } 
        }
    }
} 
```

页面：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <ContentTemplate>

    <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" BackColor="White" ShowFooter="false" ShowHeader="false"
      OnRowEditing="GridView1_RowEditing" OnRowCommand="GridView1_RowCommand" OnRowUpdating="GridView1_RowUpdating"
      GridLines="None"  OnRowDataBound="GridView1_RowDataBound">

      <AlternatingRowStyle BackColor="White" />
      <Columns>
        <asp:TemplateField HeaderText ="Talk Title">
          <ItemTemplate>
            <asp:Label Font-Bold="true" ID="lbltalktitle"  runat="server" Text='<%#Eval("Talk_Title") %>' />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText ="Brand">
          <ItemTemplate>
            <asp:Label ID="lblBrand" runat="server" Text='<%# Eval("Brand") %>' /></td>
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText ="Franchise">
          <ItemTemplate>
            <asp:Label ID="lblFranchise" runat="server" Text='<%# Eval("Franchise") %>' />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText ="programmetype">
          <ItemTemplate>
            <asp:Label ID="lblprg" runat="server" Text='<%# Eval("programmetype") %>' />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText ="programmetype">
          <ItemTemplate>
            <asp:Label ID="lblsaledforce" runat="server" Text='<%# Eval("salesforce") %>' />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText ="Start_Date">
          <ItemTemplate>
            <asp:Label ID="lblstartdate" runat="server" Text='<%# Eval("Start_Date") %>' />
          </ItemTemplate>
        </asp:TemplateField>

        <asp:TemplateField HeaderText ="End_Date">
          <ItemTemplate>
            <asp:Label ID="lblenddate" runat="server" Text='<%# Eval("End_Date") %>' />
          </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
          <ItemTemplate>
            <cc1:HoverMenuExtender ID="hme2" runat="server" TargetControlID="lblenddate"
              PopupControlID="PopupMenuX" HoverCssClass="popupHover" PopupPosition="Right"/>

            <asp:Panel CssClass="popupMenu" ID="PopupMenuX" runat="server">
              <asp:LinkButton ID="LinkButton1" runat="server" CommandName="Edit" Text="Edit" /><br />
              <asp:LinkButton ID="LinkButton2" runat="server" CommandName="Delete" Text="Delete" />
            </asp:Panel>
          </ItemTemplate>
        </asp:TemplateField>

      </Columns>

      <FooterStyle BackColor="#C6C3C6" ForeColor="Black" />
      <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#E7E7FF" />
      <PagerStyle BackColor="#C6C3C6" ForeColor="Black" HorizontalAlign="Right" />
      <RowStyle  ForeColor="Black"  />
      <SortedAscendingCellStyle BackColor="#F1F1F1" /> 
      <SortedAscendingHeaderStyle BackColor="#594B9C" />
      <SortedDescendingCellStyle BackColor="#CAC9C9" />
      <SortedDescendingHeaderStyle BackColor="#33276A" />
    </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:51:26.347

```
protected void gv_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        AjaxControlToolkit.HoverMenuExtender ajxhovermenu = (AjaxControlToolkit.HoverMenuExtender)e.Row.FindControl("ahm_1");
        e.Row.ID = e.Row.RowIndex.ToString();
        ajxhovermenu.TargetControlID = e.Row.ID;
    }
} 
```

Give TargetControlID of the HoverMenuExtender in RowCreated event of GridView and set it as the RowID

# drools - Drools：使用 Session 与 WorkingMemory 的触发规则

> ID：11205104
> 
> 赞同：1
> 
> 时间：2012-06-26T10:13:22.353
> 
> 标签：drools, rule-engine

Drools 中这两者有什么区别？意味着我们可以根据

**从加载的规则规则库和触发规则创建 WorkingMemory，如下所示：**

```
WorkingMemory  workingmemory = rulebase.newWorkingMemory();
workingmemory.fireAllRules(); 
```

**对比**

**使用 Session (Stateful . Stateless ) 触发规则，如图所示**

```
KnowledgeBase knowledgebase = createKnowledgeBase();
StatefulKnowledgeSession session = knowledgebase.newStatefulKnowledgeSession();
session.insert(Object);
session.fireRules(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:33:58.403

使用*knowledge-api-* .jar 的KnowledgeBASE 和KnowledgeSession。RuleBase 和 WorkingMemory 是遗留接口，将来会被删除。

# python - 如何在 python 2.5 中将 UTF8 字符串转换为 HTML 字符串以正确显示重音？

> ID：11205105
> 
> 赞同：3
> 
> 时间：2012-06-26T10:13:23.870
> 
> 标签：python, html, utf-8

我的字符串 UFT8 来自数据库（以 UTF8 编码的 CSV 文件）在带有我的 main.py 代码的浏览器上显示如下：`value ="roulement \u00e0 billes"`

=> 如何将任何此类字符串转换为 HTML 实体，例如 value="roulement à billes" 以便像`roulement à billes`浏览器一样正确显示。

我试图添加：

```
 # -*- coding: utf-8 -*- 
```

在我文件的第一行，还有：

```
 self.response.headers['Content-Type'] = 'text/html;charset=UTF-8' 
```

但它不会改变任何东西

=> 所以，可能另一种方式是将其翻译成 html 实体？如何 ？

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T10:25:57.050

首先，您应该确保`value`是 unicode 类型而不是字符串

```
value.encode('ascii', 'xmlcharrefreplace') 
```

应该为您提供 HTML 实体

[Python Unicode 文档](http://docs.python.org/howto/unicode.html)

```
>>> value = u"roulement \u00e0 billes"
>>> print value
roulement à billes
>>> print value.encode('ascii', 'xmlcharrefreplace')
roulement &#224; billes
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:32:00.170

要在代码中嵌入 unicode 字符串文字：

a) 确保您的源文件采用 UTF-8 格式（并添加该`# -*- coding`行），然后直接使用文字：

```
u'Zażółć gęślą jaźń' 
```

b) 以 unicode 文字转义它们：

```
u"roulement \u00e0 billes" 
```

在这两种情况下，您都需要使用`unicode`类型，而不是`str`类型，因此在您的文字前加上`u`.

```
>>> type("kos")
<type 'str'>
>>> type(u"kos")
<type 'unicode'> 
```

* * *

> 如何将任何此类字符串转换为 HTML 实体，例如 value="roulement à billes" 以便在浏览器中正确显示为 roulement à billes。

你不应该这样做，除了那些干扰 HTML 本身的东西，比如`<`or`>`和更多。

只需将您的 HTML 文件编码为 UTF-8 并确保浏览器会选择编码（响应内容类型很酷，您也可以放入`<meta charset="UTF-8">`或`<meta http-equiv="content-type" content="text/html; charset=UTF-8">`inside `<head>`。区域字符应该很容易被浏览器理解。

# c# - 将图像作为多边形内容插入

> ID：11205109
> 
> 赞同：1
> 
> 时间：2012-06-26T10:13:35.170
> 
> 标签：c#, wpf, image, polygon

我想`Image`在我的内部插入一个`Polygon`，可能在`Polygon`. 是否可以？我能怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:20:43.790

您可以`ImageBrush`用作多边形的`Fill`. 像这样：

```
<Polygon.Fill>
    <ImageBrush ImageSource="sampleImages\berries.jpg"
                AlignmentX="..." AlignmentY="..." />
</Polygon.Fill> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:55:54.947

可能是“点”属性帮助你：

```
<Polygon Points="40,0 150,100 10,100" >
   <Polygon.Fill>
       <ImageBrush ImageSource="C:\Users\Public\Pictures\Sample Pictures\Penguins.jpg" Stretch="Uniform" AlignmentX="Left" />
   </Polygon.Fill>
</Polygon> 
```

# c# - C# .net 中 fo-FO 文化的 TimeSeparator

> ID：11205113
> 
> 赞同：2
> 
> 时间：2012-06-26T10:13:51.843
> 
> 标签：c#, .net, datetime, localization, datetime-format

我已经用（法罗群岛）文化实例化了这个`CultureInfo`类。`fo-FO`但是，`CultureInfo.CurrentCulture.DateTimeFormat.TimeSeparator`显示为：（冒号） not 。（点）。如何修复此错误？

下面是代码：

```
CultureInfo ci = new CultureInfo("fo-FO");
Thread.CurrentThread.CurrentCulture = ci;
Thread.CurrentThread.CurrentUICulture = ci;

Console.WriteLine(DateTime.Now.ToString()); 
```

输出

```
26-06-2012 15:15:17 
```

令人惊讶的是，仅 Time stamp 没有被转换，但它确实转换了 Date 部分。

通过设置`CultureInfo.CurrentCulture.DateTimeFormat.TimeSeparator = "."`将解决问题。但是我们支持多个`culture`，所以我不认为设置是一个好主意`TimeSeparator`。

非常感谢任何指向正确方向的指针。

# .net - .NET 内存泄漏分析

> ID：11205114
> 
> 赞同：2
> 
> 时间：2012-06-26T10:14:00.693
> 
> 标签：.net, memory-leaks, red-gate-ants, dmp

我试图在我们的一个应用程序中找到内存泄漏，但是它非常难以捉摸。

我已经使用 Ants 内存分析器分析了该程序，发现泄漏发生在非托管代码中，而 Ants 内存分析器不适合：[http ://www.red-gate.com/supportcenter/content/ANTS_Memory_Profiler/help/ 7.4/amp_unmanaged_use](http://www.red-gate.com/supportcenter/content/ANTS_Memory_Profiler/help/7.4/amp_unmanaged_use)我检查了“图形缓冲区”和“非托管代码中的对象处理问题”部分中的内容，但没有给出任何结果。

然后我使用了 Windows 调试诊断工具并进行了内存压力分析。大部分内存使用在本机堆中：heap 6 0x01ee0000（不是默认进程堆）。虚拟分配摘要内存低，泄漏分析中未完成的分配摘要内存低：没有一个模块具有高内存使用率。

我现在如何找到内存泄漏的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:46:30.143

内存泄漏诊断是 Microsoft CRT 的内置功能，_CrtDumpMemoryLeaks() 函数提供报告。使用它需要在本机代码中编写单元测试，以便您可以启用调试分配器以使此功能工作。这反过来要求您必须为此非托管代码提供源代码，以便您可以使用`<crtdbg.h>`头文件启用调试分配器并构建单元测试。基本指南[在这里](http://msdn.microsoft.com/en-us/library/e5ewb1h3%28v=vs.90%29.aspx)。

通常的症结是您无权访问本机源代码。在这种情况下，您需要与此代码的供应商或作者合作以解决此问题。通过向他提供一个演示问题的小型重现项目来让球滚动起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T18:09:55.753

如果您想要一个真正的内存分析器工具，请查看[http://memprofiler.com/support.aspx](http://memprofiler.com/support.aspx)。到目前为止，这是我用过的最好的内存泄漏工具之一。.NET 与各处的非托管代码互操作。仅仅因为泄漏出现在非托管代码中并不意味着您的代码中没有保留引用问题。如果您提供一些您认为存在内存泄漏问题的详细信息以及有关您的解决方案的更多信息，也许我们可以提供更多解决方案。

# iphone - 如何在多个 iPhone 上使用相同的 sqlite 数据

> ID：11205116
> 
> 赞同：0
> 
> 时间：2012-06-26T10:14:13.773
> 
> 标签：iphone, ios, database, sqlite

我已经实现了一个使用 SQLite 数据库的应用程序，现在如果我在设备上运行该应用程序，那么数据库只存在于该设备中，现在我想在多个设备上使用相同的数据，我可以这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:26:24.413

您可以使用 iCloud 在设备之间复制您的数据库。您可以通过三种方式做到这一点。

1.  手动实现所有文件展示器协调代码。这会很困难，但您现有的读/写代码将保持不变。

2.  将您的数据库包装在 UIDocument 中。这会容易得多，但是您现有的保存和加载 sqlite 文件的代码需要更改。冲突将在每个数据库级别解决。

3.  移植您的 DB 代码以使用 Core Data 并使用 UIManagedDocument。您的整个代码库会发生变化，但冲突会在低得多的级别上得到解决。

我衷心推荐 Ray Wenderlich 的 iCloud 教程系列，[开始 iCloud](http://www.raywenderlich.com/6015/beginning-icloud-in-ios-5-tutorial-part-1)和[iCloud 和 UIDocument：超越基础](http://www.raywenderlich.com/12779/icloud-and-uidocument-beyond-the-basics-part-1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:07:34.497

您需要一个数据库服务器来存储您的数据和一个 Web 服务，该服务应该具有从数据库服务器存储/获取数据并返回到数据库服务器的逻辑。您可以使用该 Web 服务在数据库服务器和 Android 设备之间进行通信。

在 Android 端，您可以使用 KSoap 来使用 Web 服务。[请在此处查看此示例。](https://stackoverflow.com/questions/3730312/how-to-call-a-php-webservice-from-android-using-ksoap2)

# iphone - 我怎样才能去appdelegate类

> ID：11205117
> 
> 赞同：-2
> 
> 时间：2012-06-26T10:14:17.027
> 
> 标签：iphone

我正在开发一个应用程序。我在 viewcontroller1 中设置了通知。并关闭应用程序。

收到通知后，我将直接转到 viewcontroller1 xib 而不是 main xib。我写了这样的代码。但我的问题是在进入 viewcontroller1 xib 之后，它包含取消按钮。当我点击取消按钮时，我需要去 appdelegate 类。但它不去。当我来自 appdelegate 类时，那个取消按钮正在工作。但是当我直接来这堂课时它不起作用。

该取消方法包含`[self.view dismissviewcontroller];`，所以请告诉我当我单击取消按钮时如何进入 appdelegate 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:27:49.153

```
AppDelegate *appDelegate = (AppDelegate*) [[UIApplication sharedApplication] delegate]; 
```

获取 appdelegate 对象

# ios - 通过按钮单击以全屏模式加载嵌入 youtube 视频 - iOS

> ID：11205122
> 
> 赞同：0
> 
> 时间：2012-06-26T10:14:27.407
> 
> 标签：ios, video, youtube

所以问题是：

我可以通过单击按钮以全屏模式加载加载嵌入 youtube 视频，跳过中间 UIWebView 吗？

谷歌搜索只给了我一个答案——可能没有，但希望还活着。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:07:01.130

您是否尝试过将视频嵌入为全屏页面？就像是：

```
<object style="height: 768px; width: 1024px">
<param name="movie" value="http://www.youtube.com/v/gPLb9FVKoqI?version=3&feature=player_detailpage">
<param name="allowFullScreen" value="true">
<param name="allowScriptAccess" value="always">
<embed src="http://www.youtube.com/v/gPLb9FVKoqI?version=3&feature=player_detailpage" type="application/x-shockwave-flash" allowfullscreen="true" allowScriptAccess="always" width="1024" height="768"> 
```

...然后在全屏 UIWebView 中呈现它？

这是假设您以某种方式自己生成嵌入页面（如果您知道视频 ID，这应该不难）

除此之外，我看不出您还有什么其他选择。

# android - 得到 .asmx Web 服务的 Soap 响应，但无法将响应链接到 listview

> ID：11205125
> 
> 赞同：1
> 
> 时间：2012-06-26T10:14:36.877
> 
> 标签：android, json, parsing, soap

我对android真的很陌生，我有一个任务来解析.asmx webservise * *（返回JSON* *）并在listview中获取它的内容。我从网上查了几个例子，但它不适合我。

**这是我的代码：**

```
package com.Parsing.SOAPParsing;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONObject;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.SimpleAdapter;
import android.widget.TextView;

public class MainActivity extends ListActivity {

    private static final String SOAP_ACTION = "http://tempuri.org/GetMyTest";

    private static final String METHOD_NAME = "GetMyTest";

    private static final String NAMESPACE = "http://tempuri.org/";
    private static final String URL = "http://www.beyyondcareers.com/webservice.asmx";

    TextView tv;
    ArrayList<HashMap<String, String>> testList = new ArrayList<HashMap<String, String>>();

    private String result;

    private JSONArray JSONArr;

    private static final String TAG_TEST_ID = "TestId";
    private static final String TAG_ORG_ID = "OrgId";
    private static final String TAG_TEST_TYPE = "TestType";
    private static final String TAG_TEST_NAME = "TestName";
    private static final String TAG_NO_OF_SECTION= "NoOfSection";
    private static final String TAG_TEST_TIME = "TestTime";
    private static final String TAG_TEST_SCORE = "TestScore";
    private static final String TAG_DIRECTION = "Direction";
    private static final String TAG_DISPLAY = "Display";
    private static final String TAG_CREATE_ON = "CreateOn";
    private static final String TAG_CREATED_BY = "CreatedBy";
    private static final String TAG_SHOW_CALCULATOR = "ShowCalculator";
    private static final String TAG_COURSE_ID = "CourseId";
    private static final String TAG_STANDARD_ID = "StandardId";
    private static final String TAG_SUBJECT_ID = "SubjectId";
    private static final String TAG_IS_CONCEPTE_BUILDER = "IsConceptBuilder";
    private static final String TAG_CATEGORY = "TestCategory";   
    private static final String TAG_TEST_TYPE_ONE = "testTyp";
    private static final String TAG_STUDENT_ID = "StudentId";
    private static final String TAG_REF_ID = "ReferenceId";
    private static final String TAG_REF_TYPE = "ReferenceType";
    private static final String TAG_GROUP_ID = "GroupId";    
    private static final String TAG_DATE_ALLOCATION = "DateOfAllocation";
    private static final String TAG_ATTENDED = "Attended";
    private static final String TAG_ATTENDED_ON = "AttendedOn";
    private static final String TAG_ATTENDED_NO_OF_TIME = "AttendedNoOfTime";
    private static final String TAG_STUDENT_TYPE = "StudentType";   

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        tv = (TextView) findViewById(R.id.textview);

        try {

            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            request.addProperty("StudentId",10);

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
                    SoapEnvelope.VER11);
            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapPrimitive response = (SoapPrimitive) envelope.getResponse();
                result=response.toString();
                //JSONObject json = new JSONObject(response.toString());
                //JSONArray jArray = json.getJSONArray("Test0");
                JSONArr = new JSONArray(result);

                for(int i = 0; i < JSONArr.length(); i++){
                    JSONObject c = JSONArr.getJSONObject(i);

                    String testid = c.getString(TAG_TEST_ID);
                    String orgid = c.getString(TAG_ORG_ID);
                    String testtype = c.getString(TAG_TEST_TYPE);
                    String testname = c.getString(TAG_TEST_NAME);
                    String noofsection = c.getString(TAG_NO_OF_SECTION);
                    String testtime = c.getString(TAG_TEST_TIME);
                    String testscore = c.getString(TAG_TEST_SCORE);
                    String direction = c.getString(TAG_DIRECTION);
                    String display = c.getString(TAG_DISPLAY);
                    String createdon = c.getString(TAG_CREATE_ON);
                    String createdby = c.getString(TAG_CREATED_BY);
                    String showcalc = c.getString(TAG_SHOW_CALCULATOR);
                    String courseid = c.getString(TAG_COURSE_ID);
                    String standardid = c.getString(TAG_STANDARD_ID);
                    String subjectid = c.getString(TAG_SUBJECT_ID);
                    String isconceptbuilder = c.getString(TAG_IS_CONCEPTE_BUILDER);
                    String testcatag = c.getString(TAG_CATEGORY);
                    String testtyp = c.getString(TAG_TEST_TYPE_ONE);
                    String studendid = c.getString(TAG_STUDENT_ID);
                    String refid = c.getString(TAG_REF_ID);
                    String reftype = c.getString(TAG_REF_TYPE);
                    String groupid = c.getString(TAG_GROUP_ID);
                    String dateofallocation = c.getString(TAG_DATE_ALLOCATION);
                    String attended = c.getString(TAG_ATTENDED);
                    String attendedon = c.getString(TAG_ATTENDED_ON);
                    String attendednooftime = c.getString(TAG_ATTENDED_NO_OF_TIME);
                    String studenttype = c.getString(TAG_STUDENT_TYPE);

                    HashMap<String, String> map = new HashMap<String, String>();

                    map.put(TAG_TEST_ID, testid);
                    map.put(TAG_TEST_TYPE, testtype);
                    map.put(TAG_TEST_NAME, testname);

                    testList.add(map);
                }
        } catch (Exception e) {
            tv.setText(e.getMessage());
        }

        ListAdapter adapter = new SimpleAdapter(this, testList,
                R.layout.list_item,
                new String[] { TAG_TEST_ID, TAG_TEST_TYPE, TAG_TEST_NAME }, new int[] {
                        R.id.testid, R.id.type, R.id.testname});

        setListAdapter(adapter);                
    }

} 
```

使用此代码，我只是获取 JSON 文件，但现在我想解析它并获取存储在 listview 中的一些字段。

**我的 JSON 输出是这样的：**

```
{
 "Test0": [
        5,              - TestId
        1,              - OrgId
        6,              - TestType
        "a",                - TestName
        1,              - NoOfSection
        5,              - TestTime
        1,              - TestScore
        "",             - Direction
        "Y",                - Display
        "\/Date(1316416540330)\/",  - CreatOn
        1,              - CreatedBy
        "N",                - ShowCalculator
        0,              - CourseId
        0,              - StandardId
        0,              - SubjectId
        "N",                - IsConecptBuilder
        "Word Test",            - TestCategory
        "Prospect Test",        - TestTyp
        19,             - StudentId
        5,              - ReferenceId
        "Test",             - ReferenceType
        0,              - GroupId
        "\/Date1332924520530)\/",   - DataOfAllocation
        "Y",                - Attended
        null,               - AttendedOn
        13,             - AttendedNoOfTime
        "Prospect"          - StudentType
      ]
} 
```

任何人都可以帮我修改代码，以便我可以使用上述字段中的 3 个填充列表视图。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:22:27.737

Test0 只是一个 JSONArray。您可以通过 id 访问项目。应该是这样的

```
JSONArray c = JSONArr.getJSONObject(i); 
```

然后访问像

```
int TestId=0;
c.getString(TestId); 
```

# javascript - Heroku 上的 Hook.io

> ID：11205127
> 
> 赞同：1
> 
> 时间：2012-06-26T10:14:44.310
> 
> 标签：javascript, node.js, heroku, hook.io

我正在 Heroku 上创建一个 Node.js 应用程序并遇到了问题。我正在尝试在我的应用程序中使用[Hook.io](https://github.com/hookio/hook.io)，但由于 Hook 使用端口 5000，因此从 Heroku 收到“Bad Bind”错误。有谁知道解决这个问题的方法，也许是通过某种方式告诉 Heroku 我需要另一个 Hook 端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T00:58:37.873

您所描述的要求 hook.io 有权绑定到多个 TCP 端口。我不确定你会在 Heroku 上找到多少成功。

您还会注意到`hook.io-webserver`已弃用，请参阅：[https](https://github.com/hookio/webserver) ://github.com/hookio/webserver支持最新的核心 hook.io API，该 API 允许原生 HTTP 和 Websocket 支持挂钩。

有关新的 HTTP 网络服务器 API，请参阅：[https ://github.com/hookio/hook.io/blob/master/examples/webserver/server.js](https://github.com/hookio/hook.io/blob/master/examples/webserver/server.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T22:36:08.220

Hook.io 默认使用端口 5000，但在 Heroku 上，您需要使用 Heroku 动态分配您的应用程序的端口。

```
var hook = hookio.createHook({
  hook-port: process.env.PORT || 5000
}); 
```

[以下](https://github.com/hookio/hook.io/wiki/Documentation%3a-Configuration)是 Hook.io 可用的配置。

# python - 来自 csv.Sniffer 的 has_header 为具有相同布局的文件提供不同的结果

> ID：11205128
> 
> 赞同：9
> 
> 时间：2012-06-26T10:14:53.787
> 
> 标签：python, csv

我有以下代码片段：

```
import csv

def has_header(first_lines):
    sniffer = csv.Sniffer()
    return sniffer.has_header(first_lines) 
```

`first_lines`文件的前 2048 个字节在哪里。该函数在大多数情况下运行良好，并返回`True`一个像这样开头的文件：

```
SPEC#: 1, SIZE: 18473, TIME: 0.000000
1998.304312 2.15686
1998.773585 3.13725
1999.242914 3.13725
1999.712298 2.7451
2000.181736 2.94118
2000.651230 2.94118
2001.120780 2.15686
2001.590384 2.35294
2002.060043 2.94118
2002.529758 3.13725
2002.999527 2.54902
2003.469352 3.13725
2003.939232 1.96078
2004.409167 1.76471
2004.879158 2.94118
2005.349203 3.72549
2005.819304 3.33333
2006.289459 2.35294
2006.759670 1.76471
2007.229936 3.13725
2007.700258 3.52941
2008.170634 3.92157
2008.641065 3.92157
2009.111552 3.52941
2009.582094 4.70588
2010.052691 3.52941
2010.523343 3.33333
2010.994050 1.37255
2011.464812 2.35294
2011.935630 2.15686
2012.406502 3.52941
2012.877430 3.13725
2013.348413 2.15686
2013.819451 1.96078
2014.290544 1.56863
2014.761693 3.13725
2015.232896 1.76471
2015.704155 1.96078
2016.175469 3.33333
2016.646838 4.90196
2017.118262 3.52941
2017.589741 2.94118
2018.061275 1.96078
2018.532865 1.76471
2019.004510 4.11765
2019.476210 3.72549
2019.947965 2.35294
2020.419775 1.56863
2020.891640 2.15686
2021.363560 0.784314
2021.835536 1.37255
2022.307567 2.94118
2022.779653 2.15686
2023.251794 4.11765
2023.723990 4.5098
2024.196241 2.7451
2024.668548 2.54902
2025.140909 1.56863
2025.613326 2.94118
2026.085798 2.35294
2026.558325 2.94118
2027.030907 3.33333
2027.503545 3.52941
2027.976237 3.72549
2028.448985 5.09804
2028.921788 4.11765
2029.394645 3.92157
2029.867559 3.13725
2030.340527 2.15686
2030.813550 2.35294
2031.286629 5.09804
2031.759762 3.33333
2032.232951 3.52941
2032.706195 3.13725
2033.179494 4.70588
2033.652849 4.31373
2034.126258 3.92157
2034.599723 3.33333
2035.073242 3.72549
2035.546817 2.54902
2036.020447 2.35294
2036.494132 2.15686
2036.967873 2.94118
2037.441668 2.7451
2037.915519 2.15686
2038.389425 2.54902
2038.863385 2.54902
2039.337401 2.35294
2039.811473 3.52941
2040.285599 3.52941
2040.759781 4.11765
2041.234017 3.52941
2041.708309 3.72549
2042.182656 3.33333
2042.657058 2.54902
2043.131515 4.11765
2043.606028 3.52941
2044.080595 4.11765
2044.555218 2.35294
2045.029896 1.96078 
```

但是，该函数会返回`False`具有相同整体结构的以下文件：

```
SPEC#: 1, SIZE: 18474, TIME: 0.000000
1998.228113 36.8627
1998.697368 30.1961
1999.166679 35.8824
1999.636044 41.3726
2000.105465 38.6275
2000.574941 39.0196
2001.044473 41.9608
2001.514059 37.8431
2001.983701 35.098
2002.453397 37.2549
2002.923149 36.4706
2003.392956 40.5882
2003.862818 39.0196
2004.332735 36.6667
2004.802708 33.3333
2005.272735 37.8431
2005.742818 35.098
2006.212955 33.3333
2006.683148 39.0196
2007.153397 41.3726
2007.623700 41.7647
2008.094058 39.4118
2008.564472 40.7843
2009.034940 44.1176
2009.505464 42.1569
2009.976043 40
2010.446677 38.2353
2010.917366 39.2157
2011.388111 39.2157
2011.858910 36.2745
2012.329765 38.0392
2012.800675 42.3529
2013.271640 44.7059
2013.742660 38.0392
2014.213735 40
2014.684866 39.8039
2015.156051 44.902
2015.627292 41.7647
2016.098588 44.3137
2016.569939 43.9216
2017.041345 50.1961
2017.512806 51.5686
2017.984323 46.4706
2018.455894 44.7059
2018.927521 41.9608
2019.399203 46.6667
2019.870940 41.3726
2020.342732 45.8824
2020.814579 45.2941
2021.286482 45.2941
2021.758439 49.2157
2022.230452 42.1569
2022.702520 45.2941
2023.174643 45.4902
2023.646821 40.5882
2024.119054 47.0588
2024.591343 42.1569
2025.063686 43.7255
2025.536085 46.0784
2026.008539 45.098
2026.481048 44.902
2026.953612 50
2027.426231 48.4314
2027.898906 45.098
2028.371636 49.2157
2028.844420 47.8431
2029.317260 51.7647
2029.790155 49.4118
2030.263105 45.8824
2030.736111 51.1765
2031.209171 47.6471
2031.682287 52.549
2032.155458 50.7843
2032.628684 45.6863
2033.101965 48.6275
2033.575301 49.4118
2034.048692 48.2353
2034.522139 49.0196
2034.995641 51.9608
2035.469197 51.3726
2035.942809 50.1961
2036.416476 54.3137
2036.890199 50
2037.363976 48.8235
2037.837809 49.4118
2038.311696 51.9608
2038.785639 55.098
2039.259637 56.2745
2039.733690 50.7843
2040.207798 55.2941
2040.681962 58.2353
2041.156180 56.8627
2041.630454 60
2042.104783 61.1765
2042.579167 64.3137
2043.053606 60.5882
2043.528100 64.3137
2044.002650 62.1569
2044.477254 60.1961
2044.951914 68.2353
2045.426629 62.1569
2045.901399 62.7451 
```

这是失败`has_header`的启发式方法中的错误还是某些边缘情况`has_header`？

我注意到的一些差异：

*   [csv.py](http://svn.python.org/view/python/trunk/Lib/csv.py?revision=78384&view=markup)`header`中第 394 行的变量是（长​​度为 1 的列表），用于正确确定标头的第一个文件，以及（长度为 2 的列表）用于第二个文件。`['SPEC#: 1, SIZE: 18473, TIME: 0.000000']``['SPEC#: 1, SIZE: 184', '4, TIME: 0.000000']`

*   在为每列创建数据类型字典后，变量`columnTypes`用于`{0: None}`第一个文件和`{}`第二个文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-28T11:43:41.810

当我尝试这个时（`data1`作为你的第一个和`data2`第二个样本：

```
for data in (data1, data2):
    s=csv.Sniffer()
    d = s.sniff(data)
    print(repr(d.delimiter)) 
```

我得到：

```
' '
'7' 
```

这意味着问题实际上是分隔符的检测。正如您[在 _guess_delimiter](http://hg.python.org/cpython/file/0bacbab678ed/Lib/csv.py#l279)的文档字符串中看到的那样，嗅探器使用频率分析来确定分隔符的最佳候选者，在这种情况下恰好是`'7'`而不是空格。

如果您将第二个样本视为带有分隔符的 csv，`'7'`您将得到：

```
[['SPEC#: 1, SIZE: 184', '3, TIME: 0.000000'],
 ['1998.304312 2.15686'],
 ['1998.', '', '3585 3.13', '25'],
 ['1999.242914 3.13', '25'],
 ['1999.', '12298 2.', '451'],
 ['2000.181', '36 2.94118'],
 ['2000.651230 2.94118'], ...] 
```

其中第一行将是完全可接受的数据行而不是标题。

不幸的是`has_header`，不允许您手动指定使用的方言，但您可以修补嗅探器的`sniff`方法以返回具有正确分隔符的方言`' '`。

# .net - 如何解决在.net中将父类转换为子类的困难？

> ID：11205129
> 
> 赞同：0
> 
> 时间：2012-06-26T10:14:54.797
> 
> 标签：.net, casting, parent-child

我有这个：

```
public class ClientSession : TcpClient
{
    public int SessionGUID = 0;
} 
```

在服务器线程的某个地方：

```
ClientSession client = (ClientSession)tcpListener.AcceptTcpClient(); //cast failure 
```

好的，我知道要这样转换，右侧对象必须是 ClientSession 的实例（可能存储在指向基类的指针中）但是......在这种情况下如何构造 ClientSession？

我不想让 ClientSession 像这样：

```
public class ClientSession
{
    public int SessionGUID = 0;
    public TcpClient client;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:28:26.537

`TcpListener.AcceptTcpClient`将返回一个`TcpClient`对象，仅此而已。对象的类型不能在运行时更改，因此无法进行直接转换（保留对象身份和数据）。

我认为组合（类似于您的上一个代码片段）将是最好的方法。您可以通过实现自定义转换运算符来使用强制转换语法启用转换，但我宁愿建议使用带 a 的构造函数`TcpClient`：

```
public ClientSession(TcpClient client) { /* ... */ } 
```

所以你可以这样做：

```
ClientSession client = new ClientSession(tcpListener.AcceptTcpClient()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:29:30.310

所有`ClientSession`都是类型`TcpClient`，但不是所有`TcpClient`类型`ClientSession`。`tcpListener.AcceptTcpClient()`返回 的对象`TcpClient`，不能用作`ClientSession`。或者，您可以按如下方式调整您的课程，

```
class ClientSession
{
    public ClientSession(TcpClient client) 
    {
        this.client = client;
    }
    public TcpClient client {get; set;}
    // your stuff here...
} 
```

# web-services - 当 WSDL 没有为操作定义它时，我是否应该为故障做好准备？

> ID：11205132
> 
> 赞同：1
> 
> 时间：2012-06-26T10:15:08.470
> 
> 标签：web-services, input, wsdl, fault

我想知道当 WSDL 没有为操作定义错误时，我是否应该为错误做好准备。更具体地说，有一个仅使用输入定义的操作的 WSDL（见下文）。对我来说，这意味着我不应该为任何错误消息做好准备，并且在发送请求后，我可能会更进一步而无需查看 HTTP 响应。我说得对吗？

```
<wsdl:operation name="someOperationName">
  <wsdl:input message="someOperationMessage" name="someOperationRequest"></wsdl:input>
</wsdl:operation> 
```

最好的问候，塞尔登

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T04:30:34.700

您应该始终为从 Web 服务返回的故障做好准备。是否在 WSDL 文档中声明故障取决于服务提供者和调用的性质。理想情况下，如果可以合理预期故障情况并且可以由客户端解决（例如验证异常），则应声明生成的故障，并且客户端应用程序可以针对该故障定制响应。

对于客户端不太可能解决的情况（例如后端数据库故障），在 WSDL 中包含故障声明的价值在文档中（很高兴知道可能会返回哪些类型的故障）而不是功能。

在任何一种情况下，HTTP 响应都应该添加到任何故障消息提供的信息中，并且可能仍然存在一些情况，其中可能通过 HTTP 响应代码指示故障而根本不返回故障（例如服务器故障）。

# vim - 如何在vim中重新打开缓冲区？

> ID：11205133
> 
> 赞同：11
> 
> 时间：2012-06-26T10:15:11.047
> 
> 标签：vim

XPTemplate vim 插件有一些问题。有时它会产生错误，并且无法编辑文件。我通过以下步骤治愈它：

1.  删除缓冲区
2.  查找关闭的文件
3.  再次打开文件

我怎样才能自动化这个过程？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T10:32:03.767

根据情况，强制重新加载`:edit!`可能已经足够了。否则，您可以尝试`:bdelete | edit #`.

如果您怀疑这是由于插件本身的错误，我也会通知插件作者。

# c# - 获取从 .msg 文件打开的 MailItem 的 RDOMail

> ID：11205135
> 
> 赞同：2
> 
> 时间：2012-06-26T10:15:15.270
> 
> 标签：c#, vsto, outlook-addin, outlook-2003, outlook-redemption

有没有办法为从文件打开的 Outlook 消息创建一个[`RDOMail`](http://www.dimastr.com/redemption/RDOMail.htm)实例？[`MailItem`](http://msdn.microsoft.com/en-us/library/aa210946%28v=office.11%29.aspx)`.msg`

我常用的方法是[`CurrentItem`](http://msdn.microsoft.com/en-us/library/aa211820%28v=office.11%29.aspx)从中获取`Inspector`，将其转换为`MailItem`，检索其`EntryID`和`StoreID`值，最后[`RDOSession`](http://www.dimastr.com/redemption/rdosession.htm)通过`GetMessageFromID`方法从 中加载它。

但是，对于从 a 打开的消息`.msg`，该`EntryID`属性返回`null`。还有其他方法吗？我假设我可以改用该`GetMessageFromMsgFile`方法，但是如何从`MailItem`?

PS 该解决方案应理想地与 Outlook 2003 对象模型一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:22:48.683

你可以在这里做两种方法......

1.  使用 .将文件保存`MailItem`到磁盘[`_MailItem.SaveAs()`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook._mailitem.saveas.aspx)。然后使用`GetMessageFromMsgFile`.
2.  将 保存`MailItem`到`Folder`（存储）以将其持久化，并为其提供`EntryID`and `StoreID`。使用[`MailItem.Save()`](http://msdn.microsoft.com/en-us/library/ff866979.aspx)和[`MailItem.Move(tempFolder)`](http://msdn.microsoft.com/en-us/library/ms268996%28v=vs.110%29.aspx)将 MSG 保存到文件夹中。[我通常为此存储交换](https://stackoverflow.com/a/10175091/175679)使用隐藏文件夹。您需要在启动时或定期清除此交换文件夹（*Outlook 有挥之不去的锁，因此您最好使用 try/catch*）。

# structuremap - 指定要检索的具体类型

> ID：11205143
> 
> 赞同：1
> 
> 时间：2012-06-26T10:15:39.950
> 
> 标签：structuremap

我正在将结构图视为 IOC/DI 工具。看这个例子：

[http://docs.structuremap.net/QuickStart.htm](http://docs.structuremap.net/QuickStart.htm)

唯一没有意义的是，如果我有一个接口并从中派生几个具体类型，在代码中：

public class ClassThatGetsAnIValidator { public void SaveObject(object objectToSave) { // 从 StructureMap 中获取正确的 IValidator IValidator validator = ObjectFactory.GetInstance();

```
 var notification = validator.Validate(objectToSave);
        if (notification.IsValid())
        {
            // save the object
        }
    }
} 
```

我怎么知道我得到了哪个验证器？IE 我可能有一个 AlphaBetValidator、NumericValidator 等，有不同的方法体等等.....

我认为这是重点：

注册“什么”和“如何” StructureMap 应该构建或找到那些请求的服务（繁琐的部分，但多年来它变得更好了）

我很难掌握。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:08:33.367

从[文档](http://docs.structuremap.net/RetrievingServices.htm)中：

> 如果注册的 PluginType 只有一个 Instance，则该 Instance 将被假定为 PluginType 的默认值。否则，如果 PluginType 有多个 Instance，则必须明确告知 StructureMap 哪个 Instance 是默认的，否则对 GetInstance() 的调用将引发异常 (202)。

要解析到特定实例，您可以使用命名机制。从同一文档页面：

> 有时检索一个类型的“命名”实例是有利的。假设您正在构建一个需要连接到多个外部运输系统接口的系统。您已经为您的系统设计了一个名为 IshippingSystem 的接口，该接口将每个外部运输的详细信息隐藏在适配器后面。您的其余代码应该只“知道”如何与 IshippingSystem 交互，但在某些时候，某些类需要知道如何选择和检索正确的 IshippingSystem 实例。在诸如 StructureMap 之类的 IoC 容器出现之前，您可能已经手动编写了一个 Factory 类和一个 Builder 类来进行构建。使用 StructureMap，此代码只是对 ObjectFactory.GetNamedInstance(Type, string) 方法的调用。

```
IShippingService internationalService = ObjectFactory.GetNamedInstance<IShippingService>("International");

IShippingService domesticService = ObjectFactory.GetNamedInstance<IShippingService>("Domestic"); 
```

# php - 如何使用正则表达式从字符串中获取“参数”列表？

> ID：11205156
> 
> 赞同：0
> 
> 时间：2012-06-26T10:16:36.737
> 
> 标签：php

我有带有参数的字符串，例如

> “你好，%{user}。请给%{client}一把刀”。

所以，拜托，我不熟悉正则表达式，我需要有可以从字符串中获取参数列表的 php 构造。请帮帮我，我希望你能。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:22:11.030

```
$str = "Hello, %{user}. Please, give %{client} a knife".
preg_match_all("/%\{(.*?)\}/", $str, $matches);
print_r($matches); 
```

# html - html 链接或参考标签

> ID：11205161
> 
> 赞同：0
> 
> 时间：2012-06-26T10:16:48.633
> 
> 标签：html, tags

是否有任何标签可以创建链接或引用另一个 html 标签？

例如

```
<form>
    <label>Email</label><input name="email" type="text" /><span class="required">*</span> 
    <label>Password</label><input name="password" type="text" /><reference selector=".required" />
</form> 
```

用户实际上会看到：

```
<form>
    <label>Email</label><input name="email" type="text" /><span class="required">*</span> 
    <label>Password</label><input name="password" type="text" /><span class="required">*</span> 
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:24:28.847

尝试使用 jQuery。您应该能够找到一种模式（在本例中为参考标记），然后将其替换为特定的 HTML 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:19:46.523

在 HTML5 中，您可以使用 required 属性，如果这有助于您在这种特定情况下...

不过，我不确定您的参考标签！

[W3Schools 资源在这里](http://www.w3schools.com/html5/att_input_required.asp)

# android - android postDelayed 和 removeCallbacksAndMessages 同步

> ID：11205167
> 
> 赞同：1
> 
> 时间：2012-06-26T10:17:06.383
> 
> 标签：android, multithreading, handler, sync, runnable

我的问题是：我使用 Handler.postDelayed() 在 500 毫秒后运行动画。稍后在代码中我使用 Handler.removeCallbacksAndMessages() 因为有时我想运行另一个动画。问题是有时第一个动画开始但没有完成，我认为这是同步问题。

有没有办法检查是否启动了给 postDelayed() 的 Runnable，在这种情况下取​​消 removeCallbacksAndMessages()？

如果这个 Runnable 中的 run() 被启动，removeCallbacksAndMessages 有什么效果吗？

代码是这样的：

```
Handler hand = new Handler();
if (counter==2) {
    one = (ImageView) findViewById(img_id);
    two = im;
    hand.postDelayed(new Runnable() {
        public void run() {
    applyAnim(0, 90, one, false);
    applyAnim(0, 90, two, false);
    counter = 0;
        }
    }, 750);
} else (counter == 3) {
    im.setClickable(false);
    hand.removeCallbacksAndMessages(null);
    counter = 1;
    applyScndAnim(0, 90, one, false);
    applyScndAnim(0, 90, two, false);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:46:02.587

每次您发布一些任务或发送一些消息时，这些对象都会添加到队列中。当您调用 removeCallbacksAndMessages 时，此队列将被清除。但是当您调用 removeCallbacksAndMessages 时正在调度的任务或消息（已经从队列中拉出）不会被取消。如果要停止任务，请作为线程执行：

```
public class DrawableTask implements Runnable{
    private boolean cancel = false;
    private boolean isBeingDispatched = false;
    public void cancel(){
        if (this.isBeingDispatched())
            this.cancel = true;
    }
    public boolean isBeingDispatched(){ return isBeingDispatched;}
    public void run(){
        isBeingDispatched = true;
        while(!cancel){
            //refresh 
        }
        cancel = false;
        isBeingDispatched = false;
    }
} 
```

编辑：

```
private boolean cancel = false;
private boolean isBeingDispatched = false;

public void cancel(){
    if (this.isBeingDispatched())
        this.cancel = true;
}
public boolean isBeingDispatched(){ return isBeingDispatched;}

public void setHandlers(){
    Handler handler = new Handler(){
        public void handleMessage(Message msg){
             YourClassName.this.cancel = false;
             YourClassName.this.isBeingDispatched = true;
             while(! YourClassName.this.cancel){

                  //refresh
             }
             YourClassName.this.cancel = false;
             YourClassName.this.isBeingDispatched = false;
        }
    };
} 
```

因此，您可以将此取消选项添加到您的处理程序中。当消息到达时，处理程序将执行此代码，如果在执行期间您调用 cancel() 方法，处理程序将暂停他正在执行的任何操作。

# c# - VB 集合 - 转换为现代集合

> ID：11205172
> 
> 赞同：2
> 
> 时间：2012-06-26T10:17:10.593
> 
> 标签：c#, vb.net, collections, key

我需要将 VB 集合转换为现代集合，例如 Dictionary 或 Hashtable。对于我的方法，我需要 Collection 的 KEYS。谷歌搜索告诉我这是不可能的。

使用新集合重写整个应用程序不是一种选择，因为该应用程序确实又旧又大（从 VB6 转换为 VB.Net）。使用旧的 Collection 也不好——因为有新的组件正在开发中。

将 - 例如 - Hashtable 转换为 Collection 工作：

```
 using VBCollection = Microsoft.VisualBasic.Collection;
 public static VBCollection ToVBCollection(this Hashtable table)
    {
        var collection = new VBCollection();
        foreach (DictionaryEntry  pair in table)
        {
            collection.Add(pair.Value, pair.Key as string);
        }
        return collection;
    } 
```

转换 VBCollection 不会，因为我不知道如何检索密钥：

```
 using VBCollection = Microsoft.VisualBasic.Collection;
  public static Hashtable ToHashtable(this VBCollection Collection)
    {
        var table = new Hashtable();

        foreach (var pair in Collection)
        {
            table.Add(pair.Key, pair.Value); //I need the key and the corresponding value
        }
        return table;
    } 
```

有什么建议吗？如果确实不可能检索密钥（谢谢，Microsoft），那么我应该如何将 VB COllection 转换为现代的东西？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:52:24.110

如果要求对现有代码库的影响尽可能小，我会为 Collection 编写一个替代品。编写自己的类会很容易（如果不是有点乏味的话），该类公开所有与 VB 集合相同的方法，但还包括返回键的其他方法。您可以从一些内置的 .NET 集合类型继承，也可以只使用 compisition 来包装 Hashtable。然后，您可以在转换后的 VB.NET 应用程序中更改 Imports 子句，以包含 Microsoft.VisualBasic.Collection 的 Collection intsead。

* * *

无论如何，我将发布一个替代但更复杂的解决方案。您可以使用反射来获取 VB 集合对象在内部使用的私有字典。有了它，您可以迭代密钥。这比其他方法更像是一种 hack，但应该同样有效。一个警告是，如果 MS 更改类的内部结构，访问类的私有成员很容易被破坏。

# android - 是否需要为具有活动 LocationListener 的 Android 服务获取唤醒锁？

> ID：11205177
> 
> 赞同：0
> 
> 时间：2012-06-26T10:17:25.123
> 
> 标签：android, service, geolocation, wakelock, locationlistener

在我的应用程序中，我有一个具有活动 LocationListener 并通过无线方式发送位置的服务。当服务运行时，手机永远不会进入睡眠状态，它会不断发送位置，即使我没有唤醒锁。这正是我想要的，但我想知道这是否是预期的行为。我在 SDK 文档中找不到这方面的任何信息。我可以依靠它，还是自己获得唤醒锁更安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:35:00.077

连续运行定位服务是消耗电池的。用户不喜欢消耗电池的应用程序，他们在删除应用程序之前不会三思而后行。最好的想法是仅在需要时唤醒服务。 [请查看此链接以获取有关电池使用权衡的更多信息](http://developer.android.com/guide/topics/location/strategies.html)

# iphone - NSTimer 如何修复我的代码

> ID：11205182
> 
> 赞同：1
> 
> 时间：2012-06-26T10:17:32.823
> 
> 标签：iphone, ios5, xcode4.3

如何编写代码如果 timer1Elapsed 完成倒数计时器然后转到下一个 timer2Elapsed，完成倒数后返回 timer1Elapsed 进行倒数等等重复过程 5 次。在条件 A 和 B 中似乎 (A -> B -> A -> B ... 5 次) 有固定时间，只需说 A 计数 1 分钟和 B 计数 30 秒。请帮助，请不要拼写错误，因为我是初学者。如果我的代码错误，请纠正我。请大方。

```
- (void) timer2Elapsed:(id)timer
{
    ...

    if (remainingTime <= 0)
    {
        [timer invalidate];
        [NSTimer scheduledTimerWithTimeInterval:0.99 target:self selector:@selector(timer3Elapsed:) userInfo:nil repeats:YES];
    }

    myDisplay.text = [NSString stringWithFormat:@"%d : %d : %d", hour , minute, second];
}

- (void) timer1Elapsed:(id)timer
{
    ...

    if (remainingTime <= 0)
    {
        [timer invalidate];
        [NSTimer scheduledTimerWithTimeInterval:0.99 target:self selector:@selector(timer2Elapsed:) userInfo:nil repeats:YES];
    }

    myDisplay.text = [NSString stringWithFormat:@"%d : %d : %d", hour , minute, second];
} 
```

这是我的按钮

```
- (IBAction)startBtn:(id)sender {
        [NSTimer scheduledTimerWithTimeInterval:0.99 target:self selector:@selector(timer1Elapsed:) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:29:40.373

如果您需要一个计时器来调用另一个计时器，您可以使用以下代码

```
+ (void) timer2Elapsed:(id)timer
{
    static int numberOfTimes = 0;
    if(numberOfTimes >= 5)
    {
        numberOfTimes = 0;
        return;
    }
    numberOfTimes ++;

    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(timer1Elapsed:) userInfo:nil repeats:NO];
}

- (void) timer1Elapsed:(id)timer
{
    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(timer2Elapsed:) userInfo:nil repeats:NO];
}

- (void)startTimers
{
    [NSTimer scheduledTimerWithTimeInterval:2 target:self selector:@selector(timer1Elapsed:) userInfo:nil repeats:NO];
} 
```

# android - 集成zxing条码扫描器

> ID：11205183
> 
> 赞同：0
> 
> 时间：2012-06-26T10:17:34.087
> 
> 标签：android, zxing

我想将 zxing 条码扫描器集成到我的应用程序中。我已按照此处描述的步骤[http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/](http://damianflannery.wordpress.com/2011/06/13/integrate-zxing-barcode-scanner-into-your-android-app-natively-using-eclipse/)。但是导入的项目不会构建我收到错误，我应该删除 @Override 注释，当我删除它时说我应该覆盖。所以很混乱。图书馆项目有这些错误，我不明白为什么，因为我按照教程中描述的步骤操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:39:12.357

看来你有不同的 JAVA 编译器。可能是 1.5 或 1.7

Zxing 使用 1.6 Java 编译器。

试试这个

1.  右键单击项目
2.  属性 > Java 编译器 > 启用项目特定设置（选中它）
3.  在“编译器合规级别”前面选择了 1.6
4.  清理项目
5.  再次运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:24:35.373

您可以从这里下载[ZXing 条码扫描器](http://code.google.com/p/zxing/downloads/list)代码。

导航到Android **Zxing Scanner 源的****android**文件夹.. 导入 Android 项目后，如果导航到，某些 Class 文件将显示为丢失

 **```
core ->src->com->google->Zxing 
```**

# iphone - 图像缩放、滚动视图、裁剪

> ID：11205184
> 
> 赞同：0
> 
> 时间：2012-06-26T10:17:39.020
> 
> 标签：iphone, ios, image, scrollbar

我只是通过将 imageView 放在 ScrollView 上来缩放图片。我想裁剪图像部分，它显示在 imageView 中（缩放后）并保存为新图像。

谢谢

代码在这里

```
CGRect frame = CGRectMake(0,0,190,210);

scroll = [[UIScrollView alloc] initWithFrame:frame];

scroll.contentSize = CGSizeMake(240, 260);

scroll.showsHorizontalScrollIndicator = YES;

scroll.showsVerticalScrollIndicator = YES;  

[scroll addSubview:imageView]; 
```

并且滚动视图委托方法是

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{    
    return self.imageView;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:25:27.290

```
-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event{
// get touch event
UITouch *touch = [[event allTouches] anyObject];
StartPoint = [touch locationInView:touch.view];

}

 - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
// get touch event
UITouch *touch = [[event allTouches] anyObject];
EndPoint = [touch locationInView:touch.view];
[self finishedTouchInside];

}

 -(void)finishedTouchInside{

CGFloat width=EndPoint.x-StartPoint.x;
CGFloat hieght=EndPoint.y-StartPoint.y;
CGRect myImageRect = CGRectMake(StartPoint.x, StartPoint.y, width, hieght);
Img_Screen= [[UIImageView alloc] initWithFrame:myImageRect];

CGImageRef imageRef = CGImageCreateWithImageInRect([imgView.image CGImage], myImageRect);
// or use the UIImage wherever you like
UIImage *newImage =[UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);

} 
```

这可以帮助你裁剪图像。

# php - foreach 语句重写最后一个元素？

> ID：11205185
> 
> 赞同：0
> 
> 时间：2012-06-26T10:17:40.270
> 
> 标签：php, foreach

我使用 foreach 如下

```
 foreach($album as $a) { 

$string .= $a['value'].', ';

 }

 echo $string; 
```

它返回类似的东西

```
 1, 2, 3, 
```

ETC

现在我如何从最后一个循环中删除 , 。

所以 $string 返回 1, 2, 3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:20:11.403

你可以使用[`implode()`](http://php.net/manual/en/function.implode.php)：

```
$values = array();
foreach ($album as $a){
  $values[] = $a['value'];
}

$string = implode(',', $values); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:19:37.383

也许你可以做这样的事情：

```
$value = array();
foreach($album as $a) { 
    array_push($value, $a['value']);
 }

echo join(',', $value); // join by comma 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T10:19:24.397

您可以使用它[`rtrim()`](http://php.net/manual/en/function.rtrim.php)来执行此操作

```
rtrim($string, ',');
echo $string; 
```

应该做的工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:19:59.823

```
$first = TRUE;
$string = '';
foreach($album as $a) {  
    if ($first) {
        $first = FALSE;
    } else {
        $string .= ', ';
    }
    $string .= $a['value']; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T10:20:16.313

在这种情况下，for 循环会更适合，这样您就可以避免为最后一个元素添加它。

但是您可以将字符串修剪到右侧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T10:24:51.077

如果您不想使用`implode()`，这是最好的方法，您可以创建一个临时变量：

```
foreach($album as $a){ 
    $string .= $addStr . $a['value'];
    $addStr = ',';
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-26T10:21:04.573

尝试：

```
$string = preg_replace('#, $#', '', $string); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-06-26T10:21:16.303

**最简单的方法：**

```
foreach($album as $a){ 
    $string .= $a['value'].', ';
}

$string = substr($string, 0, -2);
echo $string; 
```

更多关于 substr[这里](http://php.net/manual/en/function.substr.php)

# c++ - 将 C cstyle 数组视为 std::array

> ID：11205186
> 
> 赞同：30
> 
> 时间：2012-06-26T10:17:40.550
> 
> 标签：c++

是否有任何安全且符合标准的方法可以将 C 样式数组视为 std::array 而无需将数据复制到新的 std::array 中？

这显然无法编译，但这是我想要的效果（我的实际使用更复杂，但这个简短的示例应该显示我想要做什么）。我猜 reinterpret_cast 会“工作”，但可能不安全？

```
#include <array>

int main()
{
    int data[] = {1, 2, 3, 4, 5};

    // This next line is the important one, treating an existing array as a std::array
    std::array<int, 5>& a = data;
} 
```

感觉应该是可能的，因为数据应该以相同的方式存储。

**编辑：**要清楚我不想清除新的 std::array，我想将现有数据称为一个。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-29T08:21:21.297

正如这篇文章中所讨论的， [如果 T 是 POD，则 std::array<T, S> 是否保证是 POD？](https://stackoverflow.com/questions/3674247/is-stdarrayt-s-guaranteed-to-be-pod-if-t-is-pod)

`std::array<int, N>`是 POD，因此是标准布局。据我了解标准布局要求，这意味着指向对象的指针与指向第一个成员的指针相同。由于 std::array 没有私有/受保护成员（根据[http://en.cppreference.com/w/cpp/container/array](http://en.cppreference.com/w/cpp/container/array)），这应该与包装数组中的第一个元素一致。因此像

`reinterpret_cast< std::array<int, 5>* >( &data )`

在我看来，可以保证按标准工作。不过，我不得不承认，有时我在解释标准语言方面有困难，所以如果我错了，请纠正我。

问候克拉斯

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-26T10:21:25.457

你不能这样做。这`std::array`是一个聚合并保存自己的数据块（与指向可以轻松重新分配的数据块的指针相反）。所以没有办法避免所有元素的副本。在 C++11 中，这一点尤为重要，因为数组的数据无法移动，因此没有高效的`std::swap`函数。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-26T10:24:38.157

您可以使用**reinterpret_cast**，但请注意，这是一个丑陋的肮脏黑客，您不应该在您的真实发布代码中做这样的事情：

```
std::array<int, 5> &a = reinterpret_cast<std::array<int, 5>&>(data); 
```

**如果std::array**的内部实现发生变化，可能会出现问题（例如，在 STL 的调试版本中将添加一些额外的字段来进行一些运行时检查）。然后此代码将在没有任何信息性消息的情况下开始崩溃（因为它基于一个隐含的假设，即 std::array 对象和 C 数组具有相同的内存布局）。

如果您仍然决定使用丑陋的脏 hack，至少添加一个编译时大小检查：

```
 C_ASSERT(sizeof(a) == sizeof(data)); 
```

如果 std::array<> 的大小不再匹配 C 数组的大小（由于 STL 实现中的一些更改），这将产生错误。

# data-structures - 复杂排列/组合

> ID：11205191
> 
> 赞同：0
> 
> 时间：2012-06-26T10:18:00.607
> 
> 标签：data-structures, permutation, combinations

摘要：
您选择您注册的模块。
每个模块都有许多组。
每个组代表给定模块的讲座。
每个组合应仅包含每个模块中的一个组。

示例：
COS 121 -3 组
COS 132 -2 组

这将为您提供 6 个选项：[1,1]、[1,2]、[2,1]、[2,2]、[3,1]、[3,2]

我的角度：我需要使用每个组合来生成时​​间表，所以我使用一个数组来存储当前正在使用的组和组的总数：`arrSubjects[subject,currentGroup,maxGroups]`

从逻辑上讲，您应该能够遍历此数组以利用每个组组合。

我只是无法掌握这个解决方案，可能是因为我使用了错误的角度。任何帮助/建议将不胜感激。

我目前的实现：我对此感到很尴尬，因为它需要很多时间，但它确实有效。这是伪代码的基本内容：

```
for (all the groups multiplied with eachother) do {
  for (all the modules selected) do {
    Select a random group between 1 and the nmr of groups 
  }
} 
```

之后我必须摆脱所有重复项。

提前致谢

我目前正在处理的代码：

```
arrPermutations[0,0]:=1;//Current group for 1st module
arrPermutations[0,1]:=3;//Max groups for 1st module
arrPermutations[1,0]:=1;
arrPermutations[1,1]:=3;
arrPermutations[2,0]:=1;//Current group for 3rd module
arrPermutations[2,1]:=3;//Max groups for 3rd module
iCurrent:=iMax; //2
while (arrPermutations[0,0]<=arrPermutations[0,1]) do
begin
//Display arrPermutations
if arrPermutations[iCurrent,0]=arrPermutations[iCurrent,1] then
begin
  Inc(arrPermutations[iCurrent-1,0]);
  for i := iCurrent to iMax do
    arrPermutations[i,0]:=1;
  iCurrent:=iMax;
end else
begin
  Inc(arrPermutations[iCurrent,0]);
end;
end; 
```

目前我只遍历最后两组。这是我检查时得到的输出：
============运行 1==============
模块，当前组，最大组
1,1,3
2， 1,3
3,1,3
============运行 2==============
模块,当前组,最大组
1,1,3
2, 1,3
3,2,3
============运行 3==============
模块,当前组,最大组
1,1,3
2, 1,3
3,3,3
============运行 4==============
模块,当前组,最大组
1,1,3
2, 2,3
3,1,3
============运行 5==============
模块,当前组,最大组
1,1,3
2, 2,3
3,2,3
============运行 6==============
模块,当前组,最大组
1,1,3
2,2,3
3,3,3
============运行 7==============
模块,当前组,最大组
1,1,3
2,3,3
3,1,3
============运行 8==============
模块,当前组,最大组
1,1,3
2,3,3
3,2,3
============运行 9==============
模块,当前组,最大组
1,1,3
2,3,3
3,3,3
============运行10==============/////这里是问题
模块,当前组,最大组
1,1,3
2,4,3
3,1,3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:48:48.877

新答案：

首先，可能组合的数量是每个模块中组数的乘积。例如，如果有 3 个模块，分别包含 5、2 和 7 组，那么就有 5*2*7 = 70 种可能的组合。将此称为 TOTALCOMBOS。

所以，如果你想遍历所有可能的组合，你可以从 0 循环到 TOTALCOMBOS-1。

```
for I in 0..TOTALCOMBOS-1 do
    COMBO = (convert I to a combination)
    (do something with COMBO) 
```

现在，要将索引转换为组合，将整数索引视为从右到左的“数字”列表会有所帮助。这最容易看出每个模块是否有十个组，并且组号是否从 0 而不是 1 开始。然后可以将整数 468 读取为列表 (8,6,4)，这意味着来自模块 1 的组 8，模块 2 中的第 6 组，模块 3 中的第 4 组。在伪代码中，将索引转换为组合类似于

```
DIGITS = I
for M in 1..(number of modules) do
   D = DIGITS mod (number of groups in module M)
   DIGITS = DIGITS / (number of groups in module M)
   (add group D from module M to the current combination) 
```

如果您希望组号从 1 而不是 0 开始，那么只需在最后一行使用组 D+1，而不是组 D。

旧答案：

使用递归。递归函数可以获取一个模块列表，并返回一个组合列表。每个组合将包含来自输​​入列表中每个模块的一组。

作为基本情况，如果模块列表为空，则返回一个空的组合列表。

否则，令 M 为第一个模块，让 REST 为其余模块。调用 REST 上的递归函数以获取其余模块的所有组合（调用此组合列表 COMBOS）。请注意，COMBOS 中的这些组合**不**包含来自 M 的组。

现在，我们将列出所有组合，这次包括来自 M 的组。将列表 ANSWERS 初始化为空。使用两个嵌套循环。对于 M 中的每个组 G，以及 COMBOS 中的每个组合 C，将 G 添加到 C，并将此扩展组合添加到 ANSWERS。

返回答案。

（假设：没有组出现在一个以上的模块中，或者在同一个模块中出现两次。没有模块出现在模块列表中超过一次。如果你愿意，你可以放宽这些假设，但你需要定义你想要的在这些情况下的行为。）

（评论 1：我在上面说“列表”，但所有这些列表都可以很容易地成为数组或其他类型的容器。）

（评论2：在我说“将G添加到C”的地方，重要的是C本身不要被改变，因为它会被重复使用很多次，M中的每个组一次。）

# css - TinyMCE 编辑器内容边距

> ID：11205192
> 
> 赞同：0
> 
> 时间：2012-06-26T10:18:07.120
> 
> 标签：css, editor, tinymce, margin

除了 FF，我在几个浏览器上都有问题。我有带有默认文本的 ap 元素，我将此元素转换为 tinyMCE 编辑器。问题是内容没有显示在编辑器的顶部，我没有找到解决方案。

这是问题的屏幕截图：

[http://www.casimages.com/img.php?i=120626123025897245.png](http://www.casimages.com/img.php?i=120626123025897245.png)

右边部分是不在顶部的默认内容。左边部分是当我删除焦点内容并开始输入内容时。它回到顶部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T11:36:18.397

我仍然有这个问题，但这不是由于 tinyMCE。我自己在 javascript 中删除了一些样式。

# ruby-on-rails - 如何根据rails中的用户日期输入每周继续向用户发送电子邮件

> ID：11205195
> 
> 赞同：-2
> 
> 时间：2012-06-26T10:18:22.357
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

新的 Rails 和现在使用 Windows，我有用户插入姓名、日期和电子邮件的网页。根据他输入的日期，我想向他发送电子邮件（如果`@dop.date=date.now-7.days then send email`）。我怎么能实现它？我希望系统获取用户日期并检查用户是否插入日期，并且日期已经 7 天，然后向他发送电子邮件...

* * *

```
class UserMailer < ActionMailer::Base
  default from: "from@example.com"

  def welcome_email(dop)
    @dop = dop
    @url  = "http://example.com/login"
    mail(:to => dop.mail, :subject => "Welcome to My Awesome Site")
  end
end 
```

* * *

```
 def create
    @dop = Dop.new(params[:dop])

    respond_to do |format|
      if @dop.save
        UserMailer.welcome_email(@dop).deliver
        format.html { redirect_to @dop, notice: 'Dop was successfully created.' }
        format.json { render json: @dop, status: :created, location: @dop }
      else
        format.html { render action: "new" }
        format.json { render json: @dop.errors, status: :unprocessable_entity }
      end
    end
  end 
```

* * *

这是我的模型： class Dop < ActiveRecord::Base attr_accessible :date,:mail,:name validates_presence_of:name validates_presence_of:mail validates_uniqueness_of:mail

结尾

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:31:43.183

使用 cron 来安排重复的 rake 任务。如果您使用的是 heroku，则可以将 cron 作为附加组件。但首先，当然，您需要编写 rake 任务——提示：

[http://railscasts.com/episodes/66-custom-rake-tasks/](http://railscasts.com/episodes/66-custom-rake-tasks/)

[http://jasonseifer.com/2010/04/06/rake-tutorial](http://jasonseifer.com/2010/04/06/rake-tutorial)

Long and short - rake 是一个文件，允许您定义各种任务并在这些任务之间建立依赖关系。它非常适合管理/清理工具，或者在您的情况下，适用于您的应用程序实际执行之外的东西。

# qt - qt 静态链接到库 -> 未找到架构 x86_64 的符号

> ID：11205197
> 
> 赞同：0
> 
> 时间：2012-06-26T10:18:33.340
> 
> 标签：qt, xcode4, static, linker

我正在开发一个使用 qt 的静态库。到目前为止，我能够静态构建 qt 源并将它们链接到我的库。一旦我尝试将库包含到主应用程序中（我使用 xcode 4 进行开发，将 libNTFramework.a 添加到我的构建阶段“将二进制文件与库链接”并将用户头文件路径设置为框架头文件），我得到了几个

> 架构 x86_64 的未定义符号：“vtable for NI::NT::ScriptApi::Fields”，引用自：ScriptApi::Fields::Fields() in libNTFramework.a(Fields.o) ScriptApi::Fields::~Fields () in libNTFramework.a(Fields.o) 注意：缺少 vtable 通常意味着第一个非内联虚拟成员函数没有定义。(...) ld: 未找到架构 x86_64 的符号

错误。使用动态构建的 qt 时不会发生错误。通过使用检查我的图书馆

> lipo -info libNTFramework.a

输出告诉我，一切都为 x86_64 架构构建得很好：

> 非胖文件：libNTFramework.a 是架构：x86_64

任何想法我错过了什么？提前谢谢！

更新：这里有一些代码......字段是由朋友类 coponentmanager 创建和“管理”的单例对象。

```
class Fields : public QObject
 {
  Q_OBJECT
  friend class ComponentManager;

 public:
  QScriptValue scriptValue() const;  

 public slots:
  void bind(const QString name, QScriptValue control);
  void set(const QString name, const QVariant value);
  QVariant get(const QString name) const;

 private:
  Fields();
  virtual ~Fields();

  QScriptValue m_scriptValue;
  ComponentManager* const componentManager() const;

 }; 
```

和

```
Fields::Fields()
 {
 }

 Fields::~Fields()
 {
 }

 QScriptValue Fields::scriptValue() const
 {
  return m_scriptValue;
 }

void Fields::bind(const QString name, QScriptValue control)
{
    try {
        if (control.isQObject()) 
        {
            QWidget* widget = qobject_cast<QWidget*>(control.toQObject());
            componentManager()->scriptableWizard()->currentPage()->registerField(name, widget);         
        }
        else
        {
            throw new NonCriticalException(control.toString() + " does not represent a QObject");
        }   
    } catch (...) {

    }
}

void Fields::set(const QString name, const QVariant value)
{
    componentManager()->scriptableWizard()->setField(name, value);
}

QVariant Fields::get(const QString name) const
{
    return componentManager()->scriptableWizard()->field(name);
}
(...) 
```

和

```
ComponentManager::ComponentManager(QScriptEngine* const engine,
                                    ScriptableWizard* const wizard,
                                       Application* const application) :
  m_application(application),
  m_scriptEngine(engine),
  m_scriptableWizard(wizard)
 {
  s_instance = this;
  m_scriptApiFields = new ScriptApi::Fields();
(...)
 }

 //! Delete the ComponentManager and all singletons created by it.
 ComponentManager::~ComponentManager()
 {
  delete m_scriptApiFields;
  (...)
 }
(...) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:37:41.963

它与库的二进制架构无关。它告诉`NI::NT::ScriptApi::Fields`您库文件 ( `libNTFramework.a`) 中的类缺少其某些虚拟成员函数的定义（实现）。即您在标头中定义了一些虚拟成员函数，但没有实现它们。

# html - 在列表中的锚点中向右浮动图像

> ID：11205201
> 
> 赞同：0
> 
> 时间：2012-06-26T10:18:36.697
> 
> 标签：html, css

试图让我的箭头图像粘在锚点的右侧

```
<ul>
   <li><a class="linkchild" href="#"><img class = "arrow" src="Images/arrow.png" alt="&#9658;"> 3.1 jQuery</a> 
    <ul>
        <li><a class="linkchild" href="#">3.1.1 Download</a></li>
        <li><a class="linkchild" href="#">3.1.2 Tutorial</a></li>
    </ul>
   </li>
   <li><a  class="linkchild" href="#">3.2 Mootools</a></li>
   <li><a class="linkchild" href ="#">3.3 Prototype</a></li>
</ul> 
```

CSS：

```
img .arrow 
{
    float: right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:22:26.937

```
img .arrow 
```

-> 具有类的图像标记的子项`arrow`- 您当前的 css

```
img.arrow 
```

-> 一个班级的图片`arrow`- 可能是你真正想写的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:22:19.993

嘿现在像这样使用

```
img.arrow 
{
    float: right;
} 
```

**不是这个**

```
img .arrow 
{
    float: right;
} 
```

因为你用过

```
<img src="" class="arrow"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:27:16.817

假设您想要这种布局：

```
3.1 jQuery [IMG]
3.1.1 Tutorial
.... 
```

您可以`float:left`将锚标签收缩到其内容，包括`float:right`-ed 图像：

[http://jsfiddle.net/4REuw/](http://jsfiddle.net/4REuw/)

```
img.arrow {
    float: right;
}

a {
    border: 1px solid red;
    float: left;
    clear: left;
}
​ 
```

# python - Google App Engine 身份验证失败

> ID：11205204
> 
> 赞同：3
> 
> 时间：2012-06-26T10:18:55.273
> 
> 标签：python, google-app-engine, openid

在编写了一些开放 ID 身份验证的测试代码后，我休息了一下，当我回来时，发现自己面临着来自 GAE 的这个奇怪的警告信息：

```
Error: Unauthorized
Your client does not have permission to the requested URL /. 
```

这是我用于 .pl 代码和 .yaml 的代码

```
version: 1
runtime: python
api_version: 1

builtins:
- remote_api: on

handlers:
- url: /
  script: do_openid_login.py
  login: required
  auth_fail_action: unauthorized

- url: /_ah/login_required
  script: do_openid_login.py
  login: required
  auth_fail_action: unauthorized 
```

和

```
class MyLogin(webapp.RequestHandler):
    def get(self):
        user = users.get_current_user()
        if user:
            greeting = ("Welcome, %s %s %s! (<a href=\"%s\">sign out</a>)" %
                        (user.nickname(), user.email(), user.user_id(), users.create_logout_url("/")))
        else:
            greeting = ("<a href=\"%s\">Sign in or register</a>." %
                        users.create_login_url("/"))

        self.response.out.write("<html><body>%s</body></html>" % greeting)

application = webapp.WSGIApplication([
  ('/', MyLogin),
], debug=True)

def main():
  run_wsgi_app(application)

if __name__ == '__main__':
  main() 
```

有什么改变了吗？还是我做了一些愚蠢的事情？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:27:11.350

您设置`/`为`login: required`这意味着您必须先登录才能访问它。

很可能您是在没有登录的情况下进行测试，`login: required`并且`app.yaml`您已经登录。您添加了该行并且一切看起来都很好，但是一旦您注销或重新启动您的服务器，您就不再登录了，所以您得到了那个错误。

您应该重新考虑您的 URL 映射以及哪些 URL 应该具有该参数，哪些没有，以免破坏体验。如果用户未登录或显示不同的响应，也可以考虑使用重定向。

# silverlight - Windows Phone 7 未加载 Silverlight 控件

> ID：11205206
> 
> 赞同：0
> 
> 时间：2012-06-26T10:19:07.020
> 
> 标签：silverlight, windows-phone-7, xaml

我创建了一个新项目，Windows Phone 7.0

因为我想要 DockPanel，所以我从这个链接安装了 Silverlight SDK： [http://silverlight.codeplex.com/](http://silverlight.codeplex.com/)（Windows Phone 2011 年 11 月）

然后我添加了来自“C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Toolkit\Apr10\Bin\System.Windows.Controls.Toolkit.dll”的引用

然后我试着

1）将DLL中的控件添加到VS 2010工具箱中。但这没有用。我创建了一个新选项卡并选择导入，选择了 DLL，但是当我按下确定时，选项卡消失了。

2）然后我将它输入到主文件中，但这会导致以下错误：“未知命名空间[http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit](http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit)。[行：19 位置：6]”

这是 mainpage.xaml 文件中的代码。请注意，我没有添加任何内容。刚刚删除了控件并添加了停靠面板。

```
<phone:PhoneApplicationPage x:Class="TestProject.MainPage"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                            xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit"
                            mc:Ignorable="d"
                            d:DesignWidth="480"
                            d:DesignHeight="768"
                            FontFamily="{StaticResource PhoneFontFamilyNormal}"
                            FontSize="{StaticResource PhoneFontSizeNormal}"
                            Foreground="{StaticResource PhoneForegroundBrush}"
                            SupportedOrientations="Portrait"
                            Orientation="Portrait"
                            shell:SystemTray.IsVisible="True">

    <toolkit:DockPanel>
        <TextBlock toolkit:DockPanel.Dock="Bottom"
                   Text="Copyright 2012"></TextBlock>
    </toolkit:DockPanel>
</phone:PhoneApplicationPage> 
```

任何想法为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:17:18.470

除了 Hermit Dave 的回答：我想知道您为什么要为 Windows Phone 7.0 开发应用程序？微软已经停止了对 7.0 应用程序的支持。因此，如果您不知道，请检查一次。

我建议您使用 [Nuget] 软件包安装程序为您安装软件包。以下步骤可帮助您了解如何使用 Nuget。

1\. 将[Nuget 扩展](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c)添加到您的 Visual Studio 2010。

2\. 通过此链接了解[如何使用 Nuget 包管理器控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)

3\. 最后使用此链接中的命令安装[SilverlightToolkit](http://nuget.org/packages/SilverlightToolkitWP)

然后您上面显示的代码就像魔术一样工作。快乐编码:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:45:08.393

**前几行说明了一切**

> 因为我想要 DockPanel，所以我从这个链接安装了 Silverlight SDK：[http://silverlight.codeplex.com/](http://silverlight.codeplex.com/)（Windows Phone 2011 年 11 月）
> 
> 然后我添加了来自“C:\Program Files (x86)\Microsoft SDKs\Silverlight\v4.0\Toolkit\Apr10\Bin\System.Windows.Controls.Toolkit.dll”的引用

您需要下载并添加对 Silverlight light toolkit for Windows Phone 的引用。下载已编译的程序集并添加对其的引用。

现在您正在尝试添加对 SL 4 程序集的引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T17:32:25.410

请参阅这篇关于如何使用 DockPanel 的文章 [http://www.geekchamp.com/articles/using-dockpanel-in-wp7](http://www.geekchamp.com/articles/using-dockpanel-in-wp7) 并从那里下载示例代码（包括 DockPanel/WP7 的库，您也可以升级到 WP8在 Visual Studio 2013 中）

那篇文章虽然显示了一个错误的示例，但正确的示例 XAML 位于那里的用户评论中：

> 源代码中的按钮顺序会影响停靠。这个代码块没问题

```
<panel:DockPanel>
    <Button  Content="Bottom" panel:DockPanel.Dock="Bottom"/>
    <Button  Content="Top" panel:DockPanel.Dock="Top"/>
    <Button  Content="Right"  panel:DockPanel.Dock="Right"/>
    <Button  Content="Left"  panel:DockPanel.Dock="Left"/>
    <Button  Content="Middle" />
</panel:DockPanel> 
```

# c# - 有没有更简洁的方式来使用 JavaScriptSerializer.Deserialize(json)？

> ID：11205218
> 
> 赞同：0
> 
> 时间：2012-06-26T10:19:51.733
> 
> 标签：c#, .net

有没有更好的方法来做到这一点？

```
JavaScriptSerializer jss = new JavaScriptSerializer();
Dictionary<string, object> dic =
    jss.Deserialize<Dictionary<string, object>>(json);
Dictionary<string, object>.Enumerator enumerator = dic.GetEnumerator();
enumerator.MoveNext();
ArrayList arr = (ArrayList)enumerator.Current.Value;
foreach (Dictionary<string, object> item in arr)
{
    string compID = item["compID"].ToString();
    string compType = item["compType"].ToString();
} 
```

我想要的只是我的物品数组（即comp）

我正在发送这样的json：

```
{ "comps" : [ { compID : 1 , compType : "t" } , { ect. } ] } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T10:22:57.917

> 有没有更好的方法来做到这一点？

是的，通过定义模型：

```
public class MyModel
{
    public IEnumerable<Comp> Comps { get; set; }
}

public class Comp
{
    public int CompId { get; set; }
    public string CompType { get; set; }
} 
```

然后将 JSON 字符串反序列化为此模型，以便您可以使用强类型，而不是一些魔术字符串字典：

```
JavaScriptSerializer jss = new JavaScriptSerializer();
MyModel model = jss.Deserialize<MyModel>(json);
foreach (Comp comp in model.Comps)
{
    // Do something with comp.CompId and comp.CompType here
} 
```

# php - Magento 从可配置的下拉列表中删除含税

> ID：11205223
> 
> 赞同：0
> 
> 时间：2012-06-26T10:20:07.597
> 
> 标签：php, html, magento

我正在使用可配置产品，并且我在 Magento 的后端设置了选项以显示含税和不含税的价格。

我的问题是，在可配置产品选项的下拉列表中，它还显示了含税和不含税。

我需要它在产品页面的价格区域中显示这两个选项，但在下拉列表中仅显示不包括税，因此它删除了包含税我已附上屏幕截图，红色区域需要删除。

![在此处输入图像描述](../Images/947865b422b3fd381165ff9858490fc2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T11:58:04.660

我在这方面得到了一些外部帮助，并提出了解决方案。这是基于 Magento 1.5.1.0。

在 app/design/frontend/default/YOURTEMPLATE/template/catalog/product/view/type/options/ 中找到文件可配置的.phtml。

替换这个：

```
<script type="text/javascript">
    var spConfig = new Product.Config(<?php echo $this->getJsonConfig(); ?>);
</script> 
```

有了这个：

```
<?php
// get current drop down string
$currentstring = $this->getJsonConfig();

// create new string with true set to false using str_replace function (string replace)
$newstring = str_replace( '"showBothPrices":true,"', '"showBothPrices":false,"', $currentstring );

?>
<!-- render dropdown but with new var ($newstring) -->
<script type="text/javascript">
    var spConfig = new Product.Config(<?php echo $newstring ?>);
</script> 
```

这仅适用于可配置产品。如果你想对简单产品的自定义选项做同样的事情，只需改变这个：

```
<?php echo $this->getValuesHtml() ?> 
```

为了这：

```
<?php echo preg_replace("/\([^)]+\)/","", $this->getValuesHtml()); ?> 
```

在此文件中：app/design/frontend/default/YOURTEMPLATE/template/catalog/product/view/options/type/select.phtml

希望这可以帮助

# sql - 在 sql 中不使用关键字 DISTINCT 查找列中的不同元素

> ID：11205227
> 
> 赞同：2
> 
> 时间：2012-06-26T10:20:17.547
> 
> 标签：sql

在表中有一个属性（列）。它包含数字。有些重复（2 或 3 次等），有些只出现一次。编写尽可能多的查询以仅输出一次所有数字（除了使用在 SQL 查询中不同）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:22:07.830

```
select column from table group by column; 
```

**编辑：**实际上，`and some appears only one time.write as many queries to output all the numbers only once.`这让我想到了曾经发生的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T11:15:01.780

看来您不需要 HAVING 子句：

```
SELECT v1
FROM ztable
GROUP by v1
        ; 
```

HAVING 子句会让事情变得更糟：它只会列出只出现一次的值！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:23:17.583

`GROUP BY`列和使用`HAVING`

```
select columname
from tablename
group by columnname
having count(columnname) = 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T02:46:33.767

由于表中只有 1 列，因此无需放置任何有子句，因为它会影响大量数据（例如 1,000,000）的性能

所以尝试类似的东西

按 col从 tbl
组中选择col

# c++ - 虚拟继承和接口

> ID：11205230
> 
> 赞同：6
> 
> 时间：2012-06-26T10:20:39.073
> 
> 标签：c++, virtual-inheritance

```
class IA
{
public:
    virtual void a() = 0;
};

class A: virtual public IA
{
public:
    virtual void a()
    {
    }
};

class IB: virtual public IA
{
public:
    virtual void b() = 0;
};

class B: virtual public IB, public A
{
public:
    virtual void b()
    {
    }
}; 
```

你总是像我上面那样继承你的虚拟接口吗？如果没有，您将如何实现上述代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-29T10:11:43.190

在分离接口和实现层次结构时，将**多重继承**与**虚拟继承结合使用是一种合适的设计选择。**例如，参见：“[什么时候虚拟继承是一个好的设计？](https://stackoverflow.com/questions/4605556/when-virtual-inheritance-is-a-good-design) ”

* * *

优点：

*   更少的代码重复：接口实现可重用
*   在类的接口实现之间切换很容易
*   只看基类就可以了解很多关于具体实现的信息

缺点：

*   虚拟继承对调度性能的影响
*   不常见的模式，需要为外部/新人解释/记录

* * *

备择方案：

*   **如果需要接口层次结构，则**没有好的选择

***   否则，层次结构可以分解为单独的接口** 

 **它可能看起来像：

```
struct IA
{
    virtual ~IA() = default;
    virtual void a() = 0;
};

struct A: public IA
{
    virtual ~A() = default;
    virtual void a() {}
};

struct IB
{
    virtual ~IB() = default;
    virtual void b() = 0;
};

struct B: public IB
{
    virtual ~B() = default;
    virtual void b() {}
};

struct C: public A, public B
{
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T13:07:37.613

There is one relatively clean workaround. When you inherit **B** from **IB**, the compiler requires your provide an implementation of all abstract methods from **IB** including **IA**. As a() is already implemented in **A**, you can create a stub in **B** that simply invokes a method from **A**:

```
class IA
{
public:
    virtual void a() = 0;
};

class A: public IA
{
public:
    virtual void a()
    {
    }
};

class IB: public IA
{
public:
    virtual void b() = 0;
};

class B: public IB, public A
{
public:
    virtual void b()
    {
    }

    virtual void a()
    {
        A::a();
    }
}; 
```**

# sql-server - 在处理文件之前检查重复项

> ID：11205232
> 
> 赞同：0
> 
> 时间：2012-06-26T10:20:44.707
> 
> 标签：sql-server, stored-procedures, ssis

我正在使用 SSIS 遍历文件夹并将所有 txt 文件的内容读入数据库。首先，我正在检查文件是否已使用存储过程进行处理

```
ALTER PROC [dbo].[CheckForDuplicateFileEntry]
(
  @TaskID INT,
  @Filename VARCHAR(50),
  @FileAlreadyExists BIT OUTPUT
)AS 
BEGIN

    DECLARE @TaskTypeID INT
    SET @FileAlreadyExists = 0

    SELECT @TaskTypeID = TaskTypeID FROM Tasks WHERE TaskID = @TaskID

    IF EXISTS ( SELECT  TaskID
                FROM    TaskSteps
                WHERE   @Filename IN (
                        SELECT TOP ( 30 )
                                TaskSteps.Filename
                        FROM    TaskSteps
                                INNER JOIN Tasks ON TaskSteps.TaskID = Tasks.TaskID
                        WHERE   ( Tasks.TaskTypeID = @TaskTypeID
                                  AND [Filename] IS NOT NULL
                                )
                                AND IsValid = 1
                                AND ProcessStatusID = 2 ) ) 
        BEGIN              
            INSERT  INTO TaskSteps ( TaskID, StepDesc )
            VALUES  (
                      @TaskID,
                      'Duplicate filename. (' + @Filename + ') Already exists.' 
                    )                
            SET @FileAlreadyExists = 1                  
        END        
END 
```

我也试过

```
IF EXISTS (SELECT TOP 30 Filename
       FROM  TaskSteps  INNER JOIN Tasks ON TaskSteps.TaskID = Tasks.TaskID
       WHERE (SUBSTRING(TaskSteps.Filename,18,13) = SUBSTRING(@Filename,18,13))
             AND IsValid = 1                            
             AND ProcessStatusID = 2) 
```

但是当它遍历文件时，它处理的第一个声明下一个是重复的，处理第三个并声明第四个重复的文件等等文件名非常相似，即 Songs_120501_175535.txt 文件名保持不变，日期和时间部分是唯一改变的部分，可能只改变一位数，即 Songs_120502_175535.txt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:33:46.817

这就像我能得到的一样简单。我会检查 SSIS 进程或触发器等中的其他内容是否正在删除或更新 TaskSteps/Task 表，这导致它有时工作，有时不工作。还要检查`IsValid`和`ProcessStatusID`列，因为它们在查询中使用。尝试在 Management Studio 中使用相同的参数运行您的查询三、四、五次 - 并`@FileAlreadyExists`在每次之后打印出值。如果只是调用 proc 正常工作，那么问题出在 SSIS 的其他地方。

```
ALTER PROC [dbo].[CheckForDuplicateFileEntry]
(
  @TaskID INT,
  @Filename VARCHAR(50),
  @FileAlreadyExists BIT OUTPUT
)AS 
BEGIN

SET @FileAlreadyExists = 0

IF EXISTS( 
           SELECT     * 
           FROM       TaskSteps
           INNER JOIN Tasks 
           ON         TaskSteps.TaskID = Tasks.TaskID
           WHERE      Tasks.TaskTypeID = TaskSteps.TaskTypeID
           AND        Tasks.TaskID = TaskSteps.TaskID
           AND        IsValid = 1
           AND        ProcessStatusID = 2
           AND        TaskSteps.Filename = @FileName
         )
    BEGIN              
        INSERT  INTO TaskSteps ( TaskID, StepDesc )
        VALUES  (
                  @TaskID,
                  'Duplicate filename. (' + @Filename + ') Already exists.' 
                )                
        SET @FileAlreadyExists = 1                  
    END        
END 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:35:01.993

尝试这个

使用字符索引函数

```
IF EXISTS (SELECT TOP 30 Filename
           FROM  TaskSteps  INNER JOIN Tasks ON TaskSteps.TaskID = Tasks.TaskID
           WHERE (SUBSTRING(TaskSteps.Filename,CHARINDEX('_',TaskSteps.Filename),13) =    
                  SUBSTRING(@Filename,CHARINDEX('_',@Filename),13) ) 
                 AND IsValid = 1                            
                 AND ProcessStatusID = 2) 
```

# iphone - 从 GUID iOS 应用程序访问 URL

> ID：11205233
> 
> 赞同：0
> 
> 时间：2012-06-26T10:20:49.637
> 
> 标签：iphone, objective-c, ios, xml, json

我正在接收一个 XML 数据提要，其中附加了用于 iphone 应用程序的 GUID。此 GUID 表示 URL。我现在希望能够从给定的 GUID 访问 URL。这可能吗？

# hadoop - 从pig中的单行输入生成多行输出

> ID：11205235
> 
> 赞同：3
> 
> 时间：2012-06-26T10:20:54.323
> 
> 标签：hadoop, apache-pig

我的要求是通过在 pig 脚本中使用单行输入来生成多行输出。有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T15:02:36.547

这个想法是将您的输入线转换成一个袋子，然后将其展平。这里可能有两种情况：

阅读文字：

```
txt = load '/pig_fun/input/text.txt' using TextLoader();
words = foreach txt generate TOKENIZE($0);
pivoted = foreach words generate FLATTEN($0);
dump pivoted; 
```

**输入：**

```
My requirement is to generate multiple lines of output by using single line of input in pig scripting.
What are the possible solutions? 
```

**输出：**

```
(My)
(requirement)
(is)
(to)
(generate)
(multiple)
(lines)
(of)
(output)
(by)
(using)
(single)
(line)
(of)
(input)
(in)
(pig)
(scripting.)
(What)
(are)
(the)
(possible)
(solutions?) 
```

读取列，然后旋转它们，请参见[使用 Apache Pig 的数据透视表](https://stackoverflow.com/questions/11213567/pivot-table-with-apache-pig)

# windows-services - 如何在服务程序中调用exe程序？

> ID：11205236
> 
> 赞同：2
> 
> 时间：2012-06-26T10:20:57.730
> 
> 标签：windows-services, createprocess

我正在编写一个 Windows 服务程序，它会在启动时调用一个外部 exe 文件，例如`notepad.exe`. 但它总是失败`"unhandled win32 exception occured"`

我的步骤：

1.  将代码编译成一个`exe`文件：`MemoryStatus.exe`.
2.  使用命令安装服务：`sc create MemoryStatus binpath=c:\MyServices\MemoryStatus.exe`
3.  从 Windows 控制面板中找到该服务，然后单击`Start`。
4.  错误发生...

谁能帮忙指出我做错了什么？

```
void main()
{
    SERVICE_TABLE_ENTRY ServiceTable[2];
    ServiceTable[0].lpServiceName = _T("MemoryStatus_new_3");
    ServiceTable[0].lpServiceProc = (LPSERVICE_MAIN_FUNCTION)**ServiceMain**;

    ServiceTable[1].lpServiceName = NULL;
    ServiceTable[1].lpServiceProc = NULL;

    StartServiceCtrlDispatcher(ServiceTable);

}
void ServiceMain(int argc, char** argv)
{
    int error;
    ServiceStatus.dwServiceType =   SERVICE_WIN32;
    ServiceStatus.dwCurrentState =  SERVICE_START_PENDING;
    ServiceStatus.dwControlsAccepted =  SERVICE_ACCEPT_STOP |   SERVICE_ACCEPT_SHUTDOWN;
    ServiceStatus.dwWin32ExitCode = 0;
    ServiceStatus.dwServiceSpecificExitCode = 0;
    ServiceStatus.dwCheckPoint = 0;
    ServiceStatus.dwWaitHint = 0;
    hStatus = RegisterServiceCtrlHandler(   _T("MemoryStatus_new_3"),   (LPHANDLER_FUNCTION)ControlHandler);
    if (hStatus == (SERVICE_STATUS_HANDLE)0)
    {
        // Registering Control Handler failed
        WriteToLog("Registering Control Handler failed\n");
        return;
    }

    // We report the running status to SCM.
    ServiceStatus.dwCurrentState =  SERVICE_RUNNING;
    SetServiceStatus (hStatus, &ServiceStatus);

    // Initialize Service
        startSvc();

    return;
}

void startSvc()
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;
    ZeroMemory( &pi, sizeof(pi) );
    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    // Start the child process
    if(CreateProcess(_T("C:\\Program Files\\Source Insight 3\\Insight3.exe"), _T(""), NULL, NULL, FALSE, 0, FALSE, NULL, &si, &pi))
     {
      CloseHandle( pi.hProcess );
      CloseHandle( pi.hThread );
    }
     else 
     {
        hProcess = GetCurrentProcess();//get current process
        TerminateProcess(hProcess,0);         //close process
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T03:49:31.840

```
CreateProcess(_T("C:\\Program Files\\Source Insight 3\\Insight3.exe"), 
```

这里存在一个问题。

将进程名称存储在**一个可变数组**中。

```
TCHAR szAppName[MAX_PATH];
StringCchCat(szAppName, _countof(szAppName), _T("C:\\Program Files\\Source Insight 3\\Insight3.exe")); 
```

# windows-phone-7 - 我们如何在 windows phone 7 中实现应用购买

> ID：11205237
> 
> 赞同：4
> 
> 时间：2012-06-26T10:20:58.530
> 
> 标签：windows-phone-7, paypal, webbrowser-control, windows-phone-7.1

嗨，我正在创建一个 windows phone 7.1 应用程序，它需要在应用程序中购买

由于 WP7 没有像 iphone 那样的特定应用内购买 SDK，我们可以`paypal`用于应用内购买吗？

我是 Windows Phone 7 和 paypal API 的新手

`browsercontrol`就像当我点击支付按钮并让用户完成支付时打开一个移动贝宝网站，如果支付成功返回成功消息，或者如果失败返回失败消息。

我认为这不是`Movend`最好的选择，因为我们必须在他们的网站上维护产品数据库，这也是我不想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T06:23:27.563

这是我的问题的答案

Paypal 没有针对 WP7 的特定 sdk，所以我尝试通过以下方式解决上述问题

1.  创建一个网站，该网站将在查询字符串中获取项目价格/详细信息
2.  仅在该网站中实施 ExpressCheckout。我已经使用 paypal [Sandbox Web 服务实现了](https://www.sandbox.paypal.com/wsdl/PayPalSvc.wsdl)
3.  在 WP7 应用程序中放置一个浏览器控件并`BrowserControl_Navigated`为该控件添加一个事件
4.  为我们自己的网站创建 URL，例如`string.Format("http://localhost:62744/PaymentGateway/ExpressCheckout.aspx?ItemName={0}&Number={1}&Desc={2}&ItemPrice={3}&ItemUrl={4}", ItemName, ItemNumber, ItemDescription, ItemPrice, ItemUrl).Replace(" ", "+");`
5.  在我们的 WP7 应用程序代码中调用网站`BrowserControl.Navigate(new Uri(url));`
6.  支付完成后，paypal 服务会将应用程序重定向到我们提到的成功 url，否则会重定向到失败 url
7.  在`BrowserControl_Navigated`事件中添加条件以检查贝宝成功和失败的 url
8.  如果条件成功导航到 WP7 中的成功页面

    ```
    if (BrowserControl.Source.ToString().Contains( "http://localhost:62744/PaymentGateway/Success.html"))
         NavigationService.Navigate(new Uri("/Success.xaml", UriKind.Relative)); 
    ```

## 更新：

**上面的代码会将页面重定向到 PayPal 移动页面，它在外观和感觉上不如 iOS 登录页面。在windows phone 7中我们可以通过一个小技巧来获取PayPal iOS页面**

通过更改浏览器的标题（客户端的用户代理）将为我们提供 PayPal iPhone 页面

像下面

```
 string header = "User-Agent:Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_1 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8B117 Safari/6531.22.7";

  string url = string.Format("http://10.11.32.211:88/PaymentGateway/ExpressCheckout.aspx?ItemName={0}&Number={1}&Desc={2}&ItemPrice={3}&ItemUrl={4}", ItemName, ItemNumber, ItemDescription, ItemPrice, ItemUrl).Replace(" ", "+");

  BrowserControl.IsScriptEnabled = true;

  BrowserControl.Navigate(new Uri(url),null, header); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:23:18.500

使用 PayPal 在您的应用程序中进行付款是完全可以接受的，但请注意[Marketplace Application Policy 2.1](http://msdn.microsoft.com/en-us/library/hh184841%28v=vs.92%29)：

> 从 Windows Phone Marketplace 获取时，您的应用程序必须完全正常运行（除了下面允许的其他数据）。除非您与用户预先存在计费关系，否则您的应用程序可能不需要用户在应用程序体验中提供支付信息来激活、解锁或延长应用程序的使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T15:46:08.343

我们在 3 月份在游戏中实施了 IAP。为了让 PayPal 将 WP 上的 IE9 识别为移动浏览器，我们不得不通过修改初始浏览器请求中的主机标头来欺骗 PayPal，使其认为我们是 iPhone。这是非常痛苦的。我不知道他们是否已经解决了这个问题。

此外，PayPal 使用 IE9 不支持的带水印文本框，因此我们需要在结帐时包含帮助文本以显示未标记文本框的用途（用于使用 CC 结帐，而不是 PayPal 帐户。

这是一个非常痛苦的过程，但它现在正在发挥作用。从应用商店下载 QONQR 并查看最终结果。如果您想了解有关实施的更多详细信息，请发送电子邮件至我们的支持地址。如果您需要，很乐意提供帮助。

# coding-style - 为什么要避免点运算符链接

> ID：11205238
> 
> 赞同：1
> 
> 时间：2012-06-26T10:21:01.687
> 
> 标签：coding-style, refactoring

有两个代码片段：

```
someObject.getBla1().getBla2().performBlah(); 
```

第二个：

```
bla1=someObject.getBla1();
bla2=bla1.getBla2();
bla2.performBlah(); 
```

我总是被告知要避免第一个，并使用第二个，因为我觉得第二个只是一种痛苦。

第二个有什么好处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:35:18.757

避免这两种形式。在编写软件时[，得墨忒耳定律是一个重要的指导原则](https://en.wikipedia.org/wiki/Law_of_Demeter)

> 每个单元应该只对其他单元有有限的了解：只有与当前单元“密切”相关的单元。
> 
> 每个单位只应与其朋友交谈；不要和陌生人说话。
> 
> 只与您的直系朋友交谈。

你违反了这条法律，因为你`someObject`知道那是`bla2`有`performBlah`方法的。如果它确实需要这种方法，他们就会将它移到外部世界并`someObject`隐藏起来。`bla1``bla2`

`someObject.getBla1().getBla2().performBlah()`然后将成为`someObject.performBlah()`并且内部实现`someObject.performBlah`可能会委托给`bla1`后者，而后者又会委托给它`bla2`以获取实现。重要的是要确保每个对象只知道它的直接朋友并且不接触更广阔的世界（例如`someObject`只知道关于`bla1`，`bla1`只知道关于`bla2`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:27:24.907

您应该避免像您给出的第一个示例那样使用点链接，因为如果出现任何像异常这样的失败，您将得到它发生的行。因此，在第一种情况下，您在同一行中有很多电话。这样，您将无法知道哪些调用引发了异常（例如空指针异常）。在第二个示例中，尽管它看起来不那么“干净”，但实际上更容易发现失败，因为您将确切知道哪个调用失败了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:23:07.130

第二个可以更清楚地了解您正在做什么，但是只要您的对象和方法提供流畅的接口，我个人认为第二个没有问题。

# android - Android ADK 和 Arduino：mAccessory 为空

> ID：11205245
> 
> 赞同：0
> 
> 时间：2012-06-26T10:21:20.390
> 
> 标签：android, eclipse, arduino, adk, accessory

ADK Mega 没有连接到我的 Android 设备！Ainol Aurora Android 4.0.4 和 CyanogenMod 9（文件**com.android.future.usb.accessory.jar**存在）在 logcat 中我看到：**mAccessory 为空** 当我在端口监视器（Arduino IDE）中将我的 Arduino 板与 Android 平板电脑连接时，我看：

> 设备寻址... 请求设备描述符。找到可能的设备。切换到串行模式设备支持协议 1 或更高版本

但在 Android 平板电脑 DemoKit 应用程序中，我看到文本：**请连接 DemoKit 板。**但是当我插入它时没有任何反应。

我尝试使用 Google API 12 和 15 版本，但这不起作用。错误：**mAccessory 为空**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T01:53:49.130

我对 Galaxy Tab 有类似的问题。我更新了 touchwiz，但我仍然找到了可能的设备，然后断开连接状态并在其中循环。无论如何，我稍微修改了 AndroidAccessory.cpp 的代码，它切换到串行

```
switchDevice(1); 
```

至

```
connected = switchDevice(1); 
```

然后它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:56:19.450

您的 Arduino 固件是否宣传DemoKit可以[理解的签名？](http://developer.android.com/guide/topics/connectivity/usb/adk.html#firmware)

# linq - EXECUTE sp_executesql @SQL Linq 返回 VOID

> ID：11205248
> 
> 赞同：1
> 
> 时间：2012-06-26T10:21:27.997
> 
> 标签：linq, stored-procedures, void

我试过谷歌搜索但没有成功，唯一的问题是没有找到解决方案：[http ://social.msdn.microsoft.com/Forums/pl-PL/linqtosql/thread/cee9df70-f38d-40be -ab1a-6697fac461d8](http://social.msdn.microsoft.com/Forums/pl-PL/linqtosql/thread/cee9df70-f38d-40be-ab1a-6697fac461d8)

SP

```
@CustomerName varchar(150) = NULL

DECLARE @SQL nvarchar(2000)

SET @SQL =  'SELECT A.[id], A.[startTime], N.firstName AS CustomerForename, N.surname AS CustomerSurname, O.Email AS OfficerEmail, L.Description AS Location, AT.description AS Type, ATC.description AS Category,AD.cancelledById, A.Deleted
FROM [Calendar].[dbo].[Appointments] AS A
INNER JOIN [Calendar].[dbo].[Name] AS N ON A.Id = N.appointmentId 
INNER JOIN [Calendar].[dbo].[Officers] AS O ON A.Officer = O.Id
INNER JOIN [Calendar].[dbo].[Locations] AS L ON A.Location = L.Id
INNER JOIN [Calendar].[dbo].[AppointmentTypes] AS AT ON A.Type = AT.Id
INNER JOIN [Calendar].[dbo].[AppointmentTypeCategories] AS ATC ON AT.category = ATC.Id
INNER JOIN [Calendar].[dbo].[AppointmentDetails] AS AD ON A.Id = AD.appointmentId
WHERE A.[id] > 1'

IF @CustomerName IS NOT NULL
SET @SQL = @SQL + ' AND (CustomerForename LIKE % + @CustomerName + % OR CustomerSurname LIKE % + @CustomerName + %)'

EXECUTE sp_executesql @SQL 
```

LINQ

```
public IQueryable<Appointment> GetAppointmentsBySearchCriteria(int appointmentId, string customerName, int officer, int location, int type, DateTime to, DateTime from)
{
var data = _db.GetAppointmentsBySearchCriteria(appointmentId,customerName,officer,location,type,to,from);

foreach (var appointment in data)
{

}
} 
```

这是我收到的错误：无法将 void 分配给隐式类型的局部变量

我尝试添加以下内容：

```
RETURN EXECUTE sp_executesql @SQL

EXECUTE sp_executesql @SQL
RETURN 
```

当 SP 被拖入 DBML 时，我收到以下消息：无法检测到以下存储过程的返回类型。为每个存储过程设置返回类型

提前感谢您的帮助。

克莱尔:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T14:38:50.613

这里的问题似乎是这样一个事实，如果你传入一个 CustomerName 对象，在你的存储过程中生成的 SQL 就会变得无效（并且受到 SQL 注入的影响）：

```
'SELECT A.[id], A.[startTime], N.firstName AS CustomerForename, N.surname AS CustomerSurname, O.Email AS OfficerEmail, L.Description AS Location, AT.description AS Type, ATC.description AS Category,AD.cancelledById, A.Deleted 
FROM [Calendar].[dbo].[Appointments] AS A 
INNER JOIN [Calendar].[dbo].[Name] AS N ON A.Id = N.appointmentId  
INNER JOIN [Calendar].[dbo].[Officers] AS O ON A.Officer = O.Id 
INNER JOIN [Calendar].[dbo].[Locations] AS L ON A.Location = L.Id 
INNER JOIN [Calendar].[dbo].[AppointmentTypes] AS AT ON A.Type = AT.Id 
INNER JOIN [Calendar].[dbo].[AppointmentTypeCategories] AS ATC ON AT.category = ATC.Id 
INNER JOIN [Calendar].[dbo].[AppointmentDetails] AS AD ON A.Id = AD.appointmentId 
WHERE A.[id] > 1
 AND (CustomerForename LIKE % + @CustomerName + % OR CustomerSurname LIKE % + @CustomerName + %)' 
```

CustomerForename 永远不会像“% + @CustomerName + %”。您没有将参数传递到您的 sp_executeSQL 调用中。相反，在 CustomerName 参数前面加上 % 通配符，然后添加辅助 where 子句，如下所示：

```
IF @CustomerName IS NOT NULL   
SET @SQL = @SQL + ' AND (CustomerForename LIKE @CustomerName OR CustomerSurname LIKE @CustomerName)' 
```

然后调用 sp_ExecuteSql 如下：

```
EXECUTE sp_executesql @SQL, N'@CustomerName NVarChar(150)', @CustomerName 
```

现在，您实际上应该从您的 proc 中获得一个结果集。这可能会解决无法为存储过程确定返回类型的问题。如果没有，您将需要在 LINQ to SQL 设计器（或 DBML）中手动创建返回类型，然后将其显式设置为存储过程的返回类型。或者，您可以将存储过程从数据库中拖放到新创建的类型上，以直接通过设计器自动分配返回类型。

您也可以尝试使用 SqlMetal 生成 dbml，因为它可以比设计器更好地检测存储的 proc 返回类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T13:31:48.233

如果您使用 DBML 并在 MS SQL Studio 中手动创建 s/p。请执行以下操作。

1.  从数据库中删除存储过程，重新创建它。
2.  在 MS SQL Studio 中使用新创建的存储过程运行测试，确保返回数据。
3.  从 DBML 设计器中删除 s/p，保存，重新编译，重新启动 Visual Studio 并再次添加。
4.  如果您遇到问题，请发布屏幕截图和您的 dbml 文件以查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:03:56.703

如果您在存储过程中使用动态 SQL，那么当 Visual Studio 创建您的 linq 对象时，它无法判断响应是什么类型。（Linq 只喜欢在强类型环境中工作）您可以尝试在 Visual Studio 中手动更改它，这就是错误消息告诉您的操作；

*   在 Visual Studio 中，在设计器视图中打开您的 DBML 文件并正常添加 SP。
*   确定错误消息，然后从设计器的列表中选择 SP 的名称。右键单击并点击属性。
*   隐藏在属性对话框中，您会发现可以手动设置的“返回类型”。尝试一下，看看你能从中得到什么。

但是，我不推荐它。首先，如果您曾经删除并重新创建 linq 对象，则必须再次执行此操作，其次，它可能仍然不会给您想要的东西。我建议您回到绘图板并想出一种避免动态 SQL 的方法。查看 Scott Guthrie 的这篇关于 linq 中的动态 SQL 的[博客文章。](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)一旦您设置了扩展方法，这是一个更简洁的解决方案。

# jquery - jQuery：事件绑定

> ID：11205249
> 
> 赞同：0
> 
> 时间：2012-06-26T10:21:29.793
> 
> 标签：jquery, html, bind

我有一个大小为 4 的选择，问题是我可以单击任何选项，并且无需释放鼠标按钮，只需向上或向下移动光标，我就可以选择其他选项。如何将此事件与 jQuery 绑定？`.change()`事件完全正常。

**html代码**

```
<select name="test" size="4">
<option value="1">value 1</option>
<option value="2">value 2</option>
<option value="3">value 3</option>
<option value="4">value 4</option>
</select> 
```

**jQuery代码**

```
$('select[name="test"] option').each(function(){
     $(this).on("click",
       function() {
          //do
       });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:47:48.330

你不应该处理`<option>`标签上的事件。如果您处理标记`change`上的事件，则 jquery 事件处理程序可以正常工作。`<select>`

示例：http: [//jsfiddle.net/avall/YyHAD/4/](http://jsfiddle.net/avall/YyHAD/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:25:36.520

检查 Jquery 中的 mousedown 事件。此[链接](http://api.jquery.com/mousedown/)可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:40:23.737

您可以在选择上使用 change() ：

```
$('select[name="test"]').change(function(){
    alert($(this).val());
}); 
```

见[http://jsfiddle.net/xKDM6/](http://jsfiddle.net/xKDM6/)

# java - 使用 JAXB 解组 BPEL 文档

> ID：11205252
> 
> 赞同：0
> 
> 时间：2012-06-26T10:21:35.053
> 
> 标签：java, jaxb, bpel

我正在使用 JAXB 使用 BPEL 模式解组 BPEL 文档（由 Eclipse BPEL 插件生成）`xmlns:bpel="http://docs.oasis-open.org/wsbpel/2.0/process/executable"`。问题是文字值没有正确解组。如果我尝试使用以下代码访问以下 BPEL 代码，我会得到“null”结果。而“TFrom”和“TCopy”是 jaxb 生成的类。

```
List<TExtensibleElements> copy = exp.copyOrExtensionAssignOperation;
for(TExtensibleElements tex: copy){
if(tex instanceof TCopy){

TFrom from = ((TCopy) tex).getFrom();

if(from.getVariable() == null){ 
    List<Object> fromContent = from.getContent();
    for(Object obj: fromContent){
    if(obj instanceof TLiteral)
        System.out.println("from literal:"+ ((TLiteral)obj).toString() );

    }

}       
----------------------------------------------------------
<bpel:assign validate="no" name="AssignApproved">                                       
<bpel:copy>
   <bpel:from>
    <bpel:literal>
       <tns:BankLoanProcessResponse xmlns:tns="http://bankloanprocess"               xmlns:xsi=   "http://www.w3.org/2001/XMLSchema-instance">
        <tns:result>Approved</tns:result>

         </tns:BankLoanProcessResponse>
       </bpel:literal>
     </bpel:from>
    <bpel:to variable="output" part="payload"></bpel:to>
  </bpel:copy>

 </bpel:assign> 
```

谢谢，莫妮卡

# c# - 使用 Quartz.Net 进行作业调度 - 一些问题

> ID：11205253
> 
> 赞同：1
> 
> 时间：2012-06-26T10:21:44.790
> 
> 标签：c#, quartz.net

我想在我的 C# 项目中实现一个作业调度程序。我在谷歌上搜索，终于得到了有关 Quartz 的信息。

所以我尝试在我的项目中使用 Quartz。为此，我添加了`quartz.dll`文件并开发了一个简单的应用程序。

这是我的代码：

```
using Quartz;
using Quartz.Impl;

public partial class job_scheduling_in_c : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ISchedulerFactory schedFact = new StdSchedulerFactory();

        //Yeni bir zamanlayıcı oluşturulup çalıştırılıyor
        IScheduler sched = schedFact.GetScheduler();
        sched.Start();

        //Oluşturduğumuz görev(MyJob) hazırlanıyor

        JobDetail jobDetail = new JobDetail("myJob", null, typeof(MyJob));

        //Başlatıldıktan 20 sn sonra çalışacak bir SimpleTrigger oluşturuluyor. 
        //İlk çalışmadan sonra 10 sn arayla 5 kez daha tetiklenecek
        Trigger trigger = new SimpleTrigger("myFirstTrigger",
                                               null,
                                               DateTime.UtcNow.AddSeconds(20),
                                               null,
                                               5,
                                               TimeSpan.FromSeconds(10));

        //Görev tetikleyici ile zamanlanıyor
        sched.ScheduleJob(jobDetail, trigger);
        //Uygulama bekletiliyor
        ManualResetEvent resetEvent = new ManualResetEvent(false);
        resetEvent.WaitOne();

    } 
```

但在那

```
JobDetail jobDetail = new JobDetail("myJob", null, typeof(MyJob));
Trigger trigger = new SimpleTrigger("myFirstTrigger",
                                           null,
                                           DateTime.UtcNow.AddSeconds(20),
                                           null,
                                           5,
                                           TimeSpan.FromSeconds(10)); 
```

我没有得到`JobDetail`和`Trigger`类的相应参考。如果两者都是内置类或用户定义的类。如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T09:57:15.117

您是否添加了对`Quartz`命名空间的引用？

右键单击您的项目，从菜单中选择添加引用并选择 Quartz.dll。

# python - 为什么列表操作不返回结果列表？

> ID：11205254
> 
> 赞同：15
> 
> 时间：2012-06-26T10:21:52.147
> 
> 标签：python

我对导致这一点的思考过程感兴趣。对我来说，一个相对的新手，这似乎是一种阻碍，因为它阻止了列表处理的“链接”（例如`mylist.reverse().append('a string')[:someLimit]`）。我想这可能是“The Powers That Be”决定列表理解是一个更好的范例（一个有效的意见），因此不想鼓励其他方法 - 但阻止直观的方法似乎是不正当的，即使更好存在替代方案。

请注意，我不是在抱怨（我确信有*一个*合理的理由，我只是对它是什么感兴趣！），也不是在寻找解决方案（[这里](https://stackoverflow.com/questions/4280691/list-reverse-does-not-return-list)的评论很有启发性）——只是在寻找一些背景，并对语言的设计过程有更深入的了解。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-26T10:44:30.997

Python 中的一般设计原则是用于**将对象就地变异为 return 的函数`None`**。我不确定这会是我选择的设计选择，但它基本上是为了强调不会返回新对象。

（GvR（我们的 Python BDFL）在这里说明了设计选择：http: [//mail.python.org/pipermail/python-dev/2003-October/038855.html](http://mail.python.org/pipermail/python-dev/2003-October/038855.html)）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-26T10:40:04.930

我不能代表开发人员说话，但我发现这种行为非常直观。

如果一个方法对原始对象起作用并就地修改它，它不会返回任何东西，因为没有新信息——你显然已经有了对（现在已经变异的）对象的引用，那么为什么要再次返回它呢？

但是，如果一个方法或函数创建了一个新对象，那么它当然必须返回它。

所以`l.reverse()`什么都不返回（因为现在列表已被反转，但标识符`l`仍然指向该列表），但`reversed(l)`必须返回新生成的列表，因为`l`仍然指向旧的、未修改的列表。

编辑：我刚刚从[另一个答案](http://en.wikipedia.org/wiki/Command-query_separation)中了解到，这个原则称为[Command-Query 分离](http://en.wikipedia.org/wiki/Command-query_separation)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-26T10:39:03.150

有人可能会争辩说，签名本身清楚地表明该函数会改变列表而不是返回一个新列表：如果该函数返回一个列表，其行为将不那么明显。

# iphone - 了解 AurioTouch

> ID：11205259
> 
> 赞同：4
> 
> 时间：2012-06-26T10:22:11.250
> 
> 标签：iphone, ios, core-audio

在 iPhone 的 AurioTouch 示例中，以下代码用于将样本添加到绘制缓冲区中，该缓冲区在渲染到屏幕时使用

```
SInt8 *data_ptr = (SInt8 *)(ioData->mBuffers[0].mData);
for (int i=0; i<numFrames; i++)
{
    if ((i+drawBufferIdx) >= drawBufferLen)
    {
        cycleOscilloscopeLines();
        drawBufferIdx = -i;
    }

    drawBuffers[0][i + drawBufferIdx] = data_ptr[2];
    data_ptr += 4;
} 
```

我根本无法理解为什么会这样。实际的 mData 缓冲区包含定点 8.24 LPCM 中的*SInt32*样本。

但是，循环似乎将每个样本的第 3 个字节提取为 SInt8，并使用该值（范围从 -128 到 +127）来表示样本。

如果样本是 24 位值，那么这对样本来说如何是有效值？为什么它查看 SInt32 的第 3 个字节并转换为 SInt8？

我很迷茫。感谢任何可以向我解释的人！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T18:06:53.347

24 位数字的前 8 位是最重要的部分。相对于全尺寸，剩余的不太重要的部分太小，无法在 iPhone 显示器上显示。最高有效 8 位位于内存中 little-endian 24 位数据类型的第 3 个字节中。

# c# - 在这种情况下我可以避免反思吗？

> ID：11205266
> 
> 赞同：2
> 
> 时间：2012-06-26T10:22:34.627
> 
> 标签：c#

假设我有这些类层次结构：

```
public abstract class Parent {
}

public class A : Parent {
    public void Update() { }
}

public class B : Parent {
    public void Update() { }
}

public class C : Parent {
    public void Update() { }
    public void Update(bool force) { }

} 
```

正如你所看到的，所有的后代`Parent`都有一个更新方法，没有参数。

我想创建一个可以与任何类型的`Parent`对象一起使用并`Update`在进程结束时调用的实用程序类。我确信 Update 方法会被实现，所以我写了这段代码：

```
public class ParentUtilities {
    private static readonly Dictionary<Type, MethodInfo> g_UpdateMethods = new Dictionary<Type, MethodInfo>{
        { typeof(A), typeof(A).GetMethod("Update", new Type[] {})},
        { typeof(B), typeof(B).GetMethod("Update", new Type[] {})},
        { typeof(C), typeof(C).GetMethod("Update", new Type[] {})}
    };

    public static void DoSomething(Parent p)
    {
          CalculateTheMeaningOfTheLife(p);             

          g_UpdateMethods[p.GetType()].Invoke(p, null);
    }
} 
```

因为**我无法控制类层次结构（它来自第 3 方程序集）**。我只能更改实用程序类。我怎样才能避免这种调整？

由于我坚持使用 .Net 3.5 SP1，因此我无法使用动态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:26:35.833

您可以在不触及这些类的情况下做的一件事是创建自己的界面`IUpdateable`，然后创建自己的新并行层次结构，如

```
interface IUpdateable
{
    void Update();
}

public class A : Original.A, IUpdateable {} 
```

如果您随后可以使用自己的叶类而不是原始类，则可以将该方法编写为接受`IUpdateable`参数。但是，虽然使用您自己的类并不是很困难（`using` [别名指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.100%29.aspx)可以提供帮助），但*生成*它们并不是那么容易（您需要在每次调用创建原始类的任何实例的原始库之后插入自定义代码，如果该实例在`Parent`您回到第一格时输入）。

不要忘记在看到原始代码的作者时也对其进行迫害。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:42:53.337

您可以创建一个具有良好定义的接口实现的包装类。

**用法**

```
class Program
{
    static void Main(string[] args)
    {
        A a = new A();
        IUpdatable wrapper = new AWrapper(a);
        wrapper.Update(); // prints A.Update
    }
} 
```

**包装类和接口**

```
interface IUpdatable
{
    void Update();
}

public abstract class Parent { }

public class A : Parent
{
    public void Update()
    {
        Console.WriteLine("A.Update");
    }
}

public class AWrapper : IUpdatable
{
    public A Inner { get; private set; }
    public AWrapper(A a)
    {
        Inner = a;
    }

    public void Update()
    {
        Inner.Update();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:27:54.757

如果只有一组已知的（非常）小的子类，那么您可以执行以下操作：

```
public class ParentUtilities
{
    public static void DoSomething(Parent p)
    {
        CalculateTheMeaningOfTheLife(p);

        var a = p as A;
        if (a != null)
        {
            a.Update();
            return;
        }

        var b = p as B;
        if (b != null)
        {
            b.Update();
            return;
        }

        var c = p as C;
        if (c != null)
        {
            c.Update();
            return;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:27:56.170

创建一个名为 UpdatableParent 的临时类，其中包含一个 Update() 方法，并从中派生所有其他类。然后使用 UpdateableParent 作为 DoSomething() 参数的类型。

# .net - 如何在 Visual Studio 2010 中使用 xslt 2.0

> ID：11205268
> 
> 赞同：13
> 
> 时间：2012-06-26T10:22:50.180
> 
> 标签：.net, visual-studio-2010, xslt, .net-4.0, xslt-2.0

我正在使用 xslt 2.0 将一种 xml 格式转换为另一种 xml 格式。但 Visual Studio 2010 仅支持 xslt1.0。

所以，我参考了stackoverflow链接并按照他们说的程序进行操作。但它对我不起作用......

[http://zeetalks.wordpress.com/2011/07/26/vs2010-adding-xslt-to-visual-studio-2010/](http://zeetalks.wordpress.com/2011/07/26/vs2010-adding-xslt-to-visual-studio-2010/)

[Visual Studio 2010 中的 XSLT 2.0 智能感知 - 添加架构？](https://stackoverflow.com/questions/4116854/xslt-2-0-intellisense-in-visual-studio-2010-adding-a-schema)

当我在 VS-2010 中打开我的 xslt 2.0 xsl 文件时，它引发了 5 个错误。它们是...

1.  xpath-default-namespace 尚未实现
2.  xsl:function 尚未实现
3.  xsl:param/@as 尚未实现
4.  xsl:for-each-group 尚未实现
5.  xsl:sequence 尚未实现

* * *

感谢您的合作...我找到了来自[codeproject](http://www.codeproject.com/Articles/24766/Using-Saxon-XSL-2-0-and-XQuery-1-0-in-NET#_rating)的链接。在 .net 框架中使用 xslt2.0。现在我正在为我的开发寻找一个好的 xslt IDE。再次感谢大家...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T12:19:57.120

您*可以*将 XSLT 2.0 智能添加到 Visual Studio，如提供的链接中所述。

**但是，Visual Studio（从 2005 年起）与标准 .NET XSLT 1.0 处理器 XslCompiledTransform 紧密集成——并且 Visual Studio XSLT 调试器和执行子系统仅适用于该 XSLT 处理器**。

至于 Altova 的 VS 集成包，我从未使用过它，并且不会感到惊讶，它在过去按描述工作，但在 VS 2010 更新/服务包之一之后停止工作。我的猜测是你还没有购买/安装这个包。

**我建议使用专门为支持 XSLT 2.0 而设计的 XSLT IDE ——** **[oXygen](http://www.oxygenxml.com/xslt_editor.html)**就是一个这样的工具，还有许多其他人一直在使用，例如**[Stylus Studio](http://www.stylusstudio.com/xml_download.html?gclid=CKfF8J3067ACFSQbQgodryOWuQ)**。

# meteor - Meteor.http.call 方法

> ID：11205270
> 
> 赞同：5
> 
> 时间：2012-06-26T10:22:53.377
> 
> 标签：meteor

我正在尝试使用在 MongoLab 中插入数据

```
 if (Meteor.is_server) {
 Meteor.startup(function () {
// code to run on server at startup
 var result = Meteor.http.call("POST",  "url",
 {params:{"name" : "def"},headers:{"content-type":"application/json"}}, function      (error,result) {
              console.log(result);
            });

     }); 
```

}

我收到错误
数据：{ message: 'Could not parse JSON, please double check syntax and encoding: \nname=def\n ^' }

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T10:05:25.073

谢谢你。

通过用“数据”替换“参数”解决了这个问题。

# signalr - 在 IE7 中抛出但未捕获的异常（jquery.signalR-0.5.1.js，第 22 行字符 9）

> ID：11205277
> 
> 赞同：7
> 
> 时间：2012-06-26T10:23:18.987
> 
> 标签：signalr

```
if (!window.JSON) {
        // no JSON!
        throw "SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.";
    } 
```

我的 mvc 4 网页使用 signalR Hub 在 Firefox、IE8 和 Chrome 中运行良好，但在 IE7 中出现问题，有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:34:14.547

从 SignalR 常见问题解答[https://github.com/SignalR/SignalR/wiki/Faq](https://github.com/SignalR/SignalR/wiki/Faq)：

为什么 SignalR 在浏览器 IE6/IE7 中不起作用？

SignalR 需要 JSON 解析器和发送 xhr 请求的能力（用于长轮询）。如果您的浏览器没有，您需要在应用程序中包含 json2.js（SignalR 会抛出一个错误，告诉您也需要它）。你可以在 NuGet 上获得它。

# c# - excel导入方法中的DataGridView行初始化

> ID：11205278
> 
> 赞同：0
> 
> 时间：2012-06-26T10:23:20.250
> 
> 标签：c#, excel, datagridview, import, row

我是一个新的 2 周大的 C#“程序员”，所以请原谅我的错误（但指出它们:)）并且我对将 Excel 文档的第一张表导入数据网格视图的简单方法有疑问。这是我的代码 faar ：

```
public void OpenFile(string filePath)
    {   
        try 
        {
            //Clear data grid view and refresh. 
            gridData.Rows.Clear(); 
            gridData.Refresh();

            //Components declaration/initialization.
            Microsoft.Office.Interop.Excel.Application excelApp;
            Microsoft.Office.Interop.Excel.Workbook workbook;
            Microsoft.Office.Interop.Excel.Worksheet worksheet;
            Microsoft.Office.Interop.Excel.Range range;
            excelApp = new Microsoft.Office.Interop.Excel.ApplicationClass();
            DataGridViewRow draftRow = new DataGridViewRow();
            DataGridViewTextBoxCell draftCell;

            //Opening Excel file.
            workbook = excelApp.Workbooks.Open(filePath, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
            worksheet = (Microsoft.Office.Interop.Excel.Worksheet)workbook.Sheets.get_Item(1);

            //Geting range of excel file.
            range = worksheet.UsedRange;

            //Sheet extraction into 2-dimensional array.
            object[,] valueArray = (object[,])range.get_Value(XlRangeValueDataType.xlRangeValueDefault);

            //Loading values into data grid view from array without header.
            for(int row = 2; row < range.Rows.Count; row++)
            {   
                for(int column = 1; column < range.Columns.Count; column++)
                {
                    draftCell = new DataGridViewTextBoxCell();
                    draftCell.Value = valueArray[row,column].ToString();
                    draftRow.Cells.Add(draftCell);
                }
                //HERE IS THE PROBLEM :(
                gridData.Rows.Add(draftRow);
                draftRow = new DataGridViewRow();
            }
            //Closing excel app.
            workbook.Close(true, null, null);
            excelApp.Quit();
        } 
        catch (Exception ex) 
        {
            MessageBox.Show(ex.ToString());
            throw;
        }               
    } 
```

我的问题发生在我尝试将 DraftRow 添加到 gridData （我的 DataGridView 对象）时。我得到一个空异常“System.NullReferenceException：对象引用未设置为对象的实例。” ，但我不明白可能出了什么问题以及如何解决它。此时存在一个 DataGridView 对象。

我在事件 onClick 中有类似的代码，它不会产生任何问题。

对于此事的任何帮助，我将不胜感激。

**编辑：**由于我心不在焉，我完全忘记了在我的两个 for 循环中增加单元格和行的范围，最后保存了没有最后一个单元格的行，在这种情况下为空。总而言之，它应该是这样的：

```
//Loading values into data grid view from array without header.
        for(int row = 2; row <= range.Rows.Count; row++)
        {   
            for(int column = 1; column <= range.Columns.Count; column++)
            {
                draftCell = new DataGridViewTextBoxCell();
                draftCell.Value = valueArray[row,column].ToString();
                draftRow.Cells.Add(draftCell);
            }
            gridData.Rows.Add(draftRow);
            draftRow = new DataGridViewRow();
        } 
```

# c# - C#通过下拉列表设置网页中任何控件的语言

> ID：11205279
> 
> 赞同：0
> 
> 时间：2012-06-26T10:23:24.597
> 
> 标签：c#, asp.net-mvc-3, globalization, cultureinfo

我有一个 Web 表单，我想使用下拉菜单选择的语言更改每个控件的标题。

但我做不到。我搞砸了 json 和复杂的事情。

我在这里尝试过：

控制器

```
string newstr = db.Countries.Where(c => c.CountryTag.Contains(incoming)).Select(c => c.CountryTag).First().ToString();
System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo(newstr, false);
Resources.Global.Culture = ci; 
```

看法

```
<script type="text/javascript" language="javascript">
    function changeLang(chosen) {
        var lang = $("#Language").val();
        $.getJSON('@Url.Content("~/Home/Globalx/")', { incoming: lang }, function (data) {
            location.reload(false);
            $("#Language").options.selectedIndex = data;
        })
    }
</script>

<div>
    @Html.DropDownList("Language", (SelectList)ViewData["Language"], new { onchange = "changeLang(this)" })
</div>
<div>
     @Resources.Global.Wellcome
</div> 
```

但它不起作用。正如您在代码中看到的那样，我正在使用资源..

每当我从下拉列表中选择另一种语言时，我只想在页面上看到更改后的语言。

`System.Threading.Thread.CurrentThread.CurrentCulture = MyChosenCulture;`就像在活动中使用获胜表格一样`DropDown_Change`。但是在网络版本中。

那么我怎样才能做到这一点呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T15:25:07.883

该过程实际上与您提到的 WinForms 相同，但您查看的属性错误（`CurrentCulture`关于格式化和解析，`CurrentUICulture`您需要让 ResourceManager 使用资源的特定语言版本）。因此，您可以通过替换此行来实现您的目标：

```
Resources.Global.Culture = ci; 
```

有了这个：

```
Thread.CurrentThread.CurrentUICulture = ci; 
```

# sql - 如何计算字段值中存在的天数

> ID：11205280
> 
> 赞同：1
> 
> 时间：2012-06-26T10:23:31.693
> 
> 标签：sql, sql-server, datetime

我有一个名为的字段`CreatedOn`，其值如下：

```
2012-06-19 08:42:48.000
2012-06-19 08:43:05.000
2012-06-19 08:43:27.000
2012-06-19 08:53:22.000
...
2012-06-20 09:20:54.000
2012-06-20 09:21:13.000
...
2012-06-21 10:02:17.000
2012-06-21 11:43:19.000
...
2012-06-22 12:00:40.000
2012-06-22 12:11:56.000

... (weekend)

2012-06-25 13:00:13.000
2012-06-25 13:12:24.000
...
2012-06-26 13:41:27.000
2012-06-26 13:41:44.000
2012-06-26 13:42:01.000 
```

我希望输出显示—— `6`（天）。但这并不像不计算周末那么简单，因为可能还有其他日子不计算在内，最好的方法是根据数据来确定。

有任何想法吗？

我能够做到：`DATEDIFF(w, MIN(CreatedOn), MAX(CreatedOn))`但正如所说的不准确，它显示的日期没有相应的数据，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:26:28.913

假设 2008+

```
SELECT COUNT(DISTINCT (CAST (CreatedOn AS DATE))) AS NumberOfDays
FROM YourTable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:27:10.937

您想计算有任何活动的天数吗？下面比需要的稍微复杂一些：

```
select COUNT(*) from (
select DATEADD(day,DATEDIFF(day,0,CreatedOn),0) as dt,COUNT(*) as cnt
from Table
group by DATEADD(day,DATEDIFF(day,0,CreatedOn),0)
) dayCounts 
```

但是，如果您需要有关特定日期的更多详细信息，则可以重新使用内部查询。

# google-apps-script - 谷歌api脚本运行缓慢

> ID：11205283
> 
> 赞同：0
> 
> 时间：2012-06-26T10:23:35.540
> 
> 标签：google-apps-script

我有这个脚本运行非常缓慢，并且总是在其 15 小步舞触发时超时。它基本上是 Google 用于在门户网站 (https://developers.google.com/apps-script/articles/embedding_docslist_in_sites) 中显示驱动器文件夹内容的示例脚本，但在开头有一点，以便它只在办公时间真正运行，如果有新文件，它会发送电子邮件。驱动器中最多只有 10-15 个文件，因此不应花费太长时间。

我这样做是因为我们的传真机将收到的传真保存到服务器上的文件夹中，然后我将其与 Google 驱动器同步，我想在组织内共享它并发送警报电子邮件。

我输入了一些记录器条目，显示每个循环结束时的时间，它从每个循环 30 秒到 2-3 分钟不等。有任何想法吗

```
function officeHours(){
var nowH=new Date().getHours();
var nowD=new Date().getDay();
if(nowH>18||nowH<8||nowD==6||nowD==0){return}{ 
  var done = false; 
  var emaillist = "chris@ringtail.co.uk";
  var myDate=new Date();
  myDate.setMinutes(myDate.getMinutes()-15); 
  while(!done){
    try{
      var files = DocsList.getFolderById("0Byg20FZrPmcHUUhlOGVrZlRuM28").getFiles();     
      var page = SitesApp.getPageByUrl("https://sites.google.com/a/ringtail.co.uk/portal/fax-list");     
      var listItems = page.getListItems();     
      for(a in listItems){       
        listItems[a].deleteListItem();     
      }     
      for(i in files){     
        var title = "<a href=\'"+files[i].getUrl()+"\'>"+ files[i].getName() +"</a>";     
        var lastUpdatedinctime = files[i].getLastUpdated();     
        if (lastUpdatedinctime > myDate){
          MailApp.sendEmail(emaillist, "New Fax", "",{htmlBody:"<br/><br/>A new fax has arrived<br/><br/><a href='"+files[i].getUrl()+"'>Click to view</a><br/><br/><a href='https://sites.google.com/a/ringtail.co.uk/portal/fax-list'>Click to see full fax list"});
        }
        page.addListItem([title, files[i].getType(), Utilities.formatDate(files[i].getLastUpdated(), "GMT", "yyyy-MM-dd")]);
      }    
      done = true;    
    }     
    catch(e){ 
    } 
  }
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:40:50.787

我看到你已经把你的整个代码放在了一个 while 循环中。您有可能遇到异常并且 while 循环永远不会结束。您是否尝试过记录异常？如果是这样，您是否看到任何异常被抛出？

此外，还有多次调用 getType()、getUrl() 和 getLastUpdated()。如果您在第一次使用它们时将这些值缓存在局部变量中，那么您的脚本将运行得更快。话虽如此，无休止的while循环似乎是超时的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T21:17:48.890

我发现这很有趣，Srik 提出了非常相关的建议，所以我试了一下，使用电子表格作为“存储设备”，它会在几秒钟内执行；-) 我在我的项目下面显示你应该重新修改以适应你的需要正确的网址和列设置。（我添加了一些评论以使其清楚（希望））

```
 function officeHours(){
      var sh = SpreadsheetApp.getActiveSheet();
      var emaillist = "email@gmail.com";
          var files = DocsList.getFolderById("xxxxxxxxxxxxxxxxxxxxxxx").getFiles();  
          var page = SitesApp.getPageByUrl("https://sites.google.com/site/appsscriptexperiments/home/xxxxxxxx");     
          var listItems = page.getListItems();  
          Logger.log(listItems.length+"  =?  "+files.length )
          var siteList=new Array();
      for(a in listItems){ 
    //        Logger.log(listItems[a].getLastUpdated())
      siteList.push([listItems[a].getLastUpdated(),listItems[a].getValueByIndex(3)]);// choose what you save on the sheet  
          }     
      sh.getRange(1,1).setValue('Site List')  
      sh.getRange(2,1,siteList.length,siteList[0].length).setValues(siteList)

// ***************************************
        if(listItems.length<files.length){;// new file added in doc list , that is the main condition !!!
// ***************************************
          var fileList=new Array()
                for(var n in files){
                  fileList.push([files[n].getLastUpdated(),files[n].getName(),files[n].getId()]);// choose what you save on the sheet
                    }
          Logger.log(n) ;// n is the last index
      fileList.sort(function(x,y){
      var xp = x[0];// choose on which item to sort so that the last item is the last added to the folder
      var yp = y[0];
      return xp == yp ? 0 : xp < yp ? -1 : 1;// sort mode
    });
      sh.getRange(1,3).setValue('File List')  
      sh.getRange(2,3,fileList.length,fileList[0].length).setValues(fileList)
     //       MailApp.sendEmail(emaillist, "New Fax", "",{htmlBody:"<br/><br/>A new fax has arrived<br/><br/><a href='"+fileList[n][2]+"'>Click to view</a><br/><br/><a href='https://sites.google.com/a/ringtail.co.uk/portal/fax-list'>Click to see full fax list"});
            page.addListItem([fileList[n][0],'new',fileList[n][1],"<a href=\'"+fileList[n][2]+"\'>"+fileList[n][0]+"</a>"]);
                }   
       } 
```

请注意，我在此测试中删除了“计时器技巧”，您应该按原样添加它。（很高兴看到它很好地为您服务；-）

# javascript - 永久隐藏 CSS 类

> ID：11205284
> 
> 赞同：0
> 
> 时间：2012-06-26T10:23:36.740
> 
> 标签：javascript, jquery

我隐藏了 css 类 .pds-pd-link。此类设置链接 www.polldaddy.com 的样式。链接已隐藏。当用户投票并点击“返回投票”时，链接 www.polldaddy.com 再次可见。我认为没有任何方法可以在不修改 poll 的源代码的情况下永久隐藏它吗？

[http://jsfiddle.net/Wx5mM/2/](http://jsfiddle.net/Wx5mM/2/)

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        $(".pds-pd-link").hide();
        $(".a2a_dd.pds-share").hide();
      });
    </script>
    <script type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/6343621.js"></script>
<noscript><a href="http://polldaddy.com/poll/6343621/">New Poll</a></noscript> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T10:29:21.423

```
.pds-pd-link {
    display: none !important;
} 
```

似乎做的工作

[http://jsfiddle.net/Wx5mM/7/](http://jsfiddle.net/Wx5mM/7/)

# javascript - 在javascript中使用原型而不是innerHTML

> ID：11205285
> 
> 赞同：-6
> 
> 时间：2012-06-26T10:23:36.863
> 
> 标签：javascript, html, prototypejs

如何在将值分配给html页面的元素时使用原型而不是innerHTML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:30:55.520

`innerHTML`并且 `prototype`在 JavaScript 中用于两个完全不同的目的。没有可比性。

请参阅以下链接

**[内部HTML](http://www.google.com.pk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CFwQFjAD&url=http://msdn.microsoft.com/en-us/library/ie/ms533897%28v=vs.85%29.aspx&ei=bo_pT_eQMcXyrQes1LybDg&usg=AFQjCNELATOoGZR0N736YIaYN2ozWMTIUg)**

**[原型](http://yehudakatz.com/2011/08/12/understanding-prototypes-in-javascript/)**

# android-fragments - 隐藏/删除在 fragmenttabspager 中使用 tabsadapter 添加的片段

> ID：11205286
> 
> 赞同：2
> 
> 时间：2012-06-26T10:23:44.027
> 
> 标签：android-fragments, android-viewpager, android-tabs

我试图从 Google 的 support4 包中删除或至少隐藏在 FragmentTabsPager 示例中创建的片段和选项卡。我只能使用一项活动，因为我正在使用 webviews 并想使用相同的网页。不幸的是，Tabsadapter 类只包含一个 AddTab 方法而不是一个 removetab。这门课“依赖一个技巧”，我不太了解它..

这就是我创建标签/片段的方式：

```
mTabsAdapter.addTab(mTabHost.newTabSpec("workout").setIndicator("Workouts"),
            WorkoutFragment.class, null); 
```

我已经尝试过 mTab​​sAdapter.destroyItem，但没有任何运气。我也尝试通过 fragmentTransaction 删除，但没有任何运气：

`fragManager = getSupportFragmentManager(); fragTransaction = fragManager.beginTransaction(); fragTransaction.hide(mTabsAdapter.getItem(1)); fragTransaction.commit();`

我找到了仅删除选项卡的方法，但碎片仍然存在，导致 2 个选项卡上有 3 个碎片。我的其余代码与 Fragmenttabspager 示例基本相同。

有任何想法吗？

# php - 在 PHP Web 应用程序中检测已安装版本的最佳方法

> ID：11205288
> 
> 赞同：0
> 
> 时间：2012-06-26T10:23:48.667
> 
> 标签：php, version-control, version, updating

我们有一个定制的 PHP/MySQL Web 应用程序，它会定期更新和复制（使用 SFTP）到多个服务器。

对于其中一些更新，需要更改数据库或文件系统。通常这需要手动运行一个 update.php 脚本来检查和更新所有内容。

我希望能够让应用程序检查是否有新的更新来减少手动活动。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:34:43.897

你可能想多了？

在文件中记录最新版本，在您上传的脚本中记录当前版本。

您可以根据需要向版本解析添加尽可能多的复杂性。

最简单的例子：

```
define('CURRENT_VERSION', 2);

$lastVersion = (int)file_get_contents('VERSION');

if (CURRENT_VERSION > $lastVersion) {
    if (update()) {
        file_put_contents('VERSION', CURRENT_VERSION);
    }
} 
```

您还可以通过存在的事实来检测更新的`update.php`存在。如果它在那里，运行它并删除它。如果更新失败，显然添加您自己的错误检查和回退。

```
if (file_exists('update.php')) {
    require('update.php');
    unlink('update.php');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:31:35.257

您可以尝试将当前应用程序的版本（示例 XML 文件）和远程服务器中应用程序的最新版本存储到 XML 文件中，然后唯一要做的就是运行一个 cron 作业，例如每 4 天一次或每周执行一次 php 脚本，该脚本运行当前版本和从远程服务器获取的具有最新版本值的 XML 文件之间的比较，它应该通过电子邮件或应用程序上的消息通知您。您可以在 XML 文件中存储的其他信息、此更新的重要性或有关更新的信息。

希望它有所帮助！

# java - 在android中将数据从一个文件复制到另一个文件非常慢？

> ID：11205291
> 
> 赞同：2
> 
> 时间：2012-06-26T10:23:52.973
> 
> 标签：java, android

我正在将数据从一个文件复制到另一个文件。

这需要更多时间。什么原因？

我的代码在这里

```
    公共无效复制数据（输入流输入，输出流输出）抛出 IOException
    {
        尝试
        {
            in = new CipherInputStream(in, dcipher);
            int numRead = 0;
            字节[] buf = 新字节[512]；
            而 ( ( numRead = in.read( buf ) ) >= 0 )
            {
                out.write(buf, 0, numRead);
            }
            out.close();
            附寄（）;
        }
        捕获（java.io.IOException e）
        {
        }
    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:37:07.563

请检查代码，我所做的是增加缓冲区大小并在数据达到 1 MB 时立即刷新数据，这样您就不会遇到内存不足错误。

原因主要是由于缓冲区大小较小，写入小字节信息需要时间。最好一次放一大块。

您可以根据需要修改这些值。

```
public void copyData( InputStream in, OutputStream out ) throws IOException
{
    try
    {
        int numRead = 0;
        byte[] buf = new byte[102400];
        long total = 0;
        while ( ( numRead = in.read( buf ) ) >= 0 )
        {
            total += numRead;
            out.write( buf, 0, numRead );

            //flush after 1MB, so as heap memory doesn't fall short
            if (total > 1024 * 1024) 
             { 
                total = 0;
                out.flush();
             }
        }
        out.close();
        in.close();
    }
    catch ( java.io.IOException e )
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-28T00:43:40.340

> 我正在将数据从一个文件复制到另一个文件。

不，你不是。您正在解密输入流并将明文写入输出流。

> 这需要更多时间。

时间多于什么？

> 什么原因？

基本上你很小的缓冲区大小。将其提高到至少 8192 字节：如果继续有好处，则更多。

```
int numRead = 0; 
```

您不需要初始化此变量。

```
byte[] buf = new byte[512]; 
```

看上面。至少更改为 8192。

```
while ( ( numRead = in.read( buf ) ) >= 0 ) 
```

`read(byte[])`如果为零，则只能返回零`buf.length`，这是您不想永远循环的编程错误。将条件更改为`> 0`。

```
 catch ( java.io.IOException e )
    {
    } 
```

*永远不要*忽略异常。

> 我将操作用作加密/解密文件。这就是我使用缓冲区大小为 512 字节的原因。

不，不是。加密或解密不需要 512 字节的缓冲区。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-26T10:34:07.423

2 原因

1.  buffer太小了，4kb或者8kb，一直增加直到手机死机，然后后退1步
2.  阅读和写作需要在 2 个不同的线程上。读取完成后，将其放在 aq 上，写入完成后从 q 中读取。不要忘记同步 q 对象。

在编写此类代码时，您需要最大限度地使用 CPU 和内存。在线程和while循环上是如此学院C'ish .. :)

# c# - 无法让 WCF 休息服务通过 HTTPS 工作

> ID：11205295
> 
> 赞同：3
> 
> 时间：2012-06-26T10:24:30.500
> 
> 标签：c#, .net, wcf

我们有一个 ASP.NET 应用程序正在运行，我已经向它添加了一个 WCF Rest 服务。在本地以及在测试环境中部署时，这可以正常工作。问题是当我们部署到只有 HTTPS 的生产环境时。

我已经在网上搜索并阅读了大部分答案，并尝试了很多东西。一切都没有运气。

这是我们的简单代码

```
[ServiceContract]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class ReportingService
{
    public ReportingService()
    {
        Thread.CurrentPrincipal = HttpContext.Current.User;
    }

    [OperationContract]
    [WebGet(UriTemplate = "get/{id}", ResponseFormat = WebMessageFormat.Json)]
    [PrincipalPermission(SecurityAction.Demand)]
    public List<RawReportTable> GetReport(string id)
    {
        ...
    }
} 
```

在 Global.asax.cs 我们有

```
RouteTable.Routes.Add(new ServiceRoute("api/reporting", new WebServiceHostFactory(), typeof(ReportingService))); 
```

在我们的 web.config 中，我们为 system.serviceModel 定义了以下内容

```
<standardEndpoints>
  <webHttpEndpoint>
    <standardEndpoint name="api" helpEnabled="true" automaticFormatSelectionEnabled="true" maxBufferSize="500000" maxReceivedMessageSize="500000">          
      <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
      <security mode="Transport" />
    </standardEndpoint>
  </webHttpEndpoint>
</standardEndpoints>

<behaviors>
  <endpointBehaviors>
    <behavior name="api">
      <webHttp />
    </behavior>
  </endpointBehaviors>

  <serviceBehaviors>
    <behavior name="">
      <serviceCredentials>
          <serviceCertificate storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" findValue="d5 85 5b 37 89 47 6f 89 71 5b b7 5d 87 6f 2e e5 24 aa 57 b6" />
      </serviceCredentials>
    </behavior>
  </serviceBehaviors>
</behaviors>

<services>
  <service name="ReportingService">
    <endpoint address="api/reporting" behaviorConfiguration="api" binding="webHttpBinding" bindingConfiguration="webBinding" contract="WayfinderFM.Service.api.ReportingService" />
  </service>
</services>

<bindings>
  <webHttpBinding>
    <binding name="webBinding">
      <security mode="Transport" />
    </binding>
  </webHttpBinding>
</bindings> 
```

使用此设置，我收到以下错误：请求错误：服务器在处理请求时遇到错误。有关更多详细信息，请参阅服务器日志。

我认为（以及一些示例显示）我不再需要配置中的服务/端点内容，因为它已在路由中注册。

删除那部分我们仍然得到同样的错误。我尝试了很多不同的配置，但都没有运气。

奇怪的是 /api/reporting/help 实际显示。只是不能使用任何服务。

有人知道吗？我希望这是我错过的简单事情。

谢谢大家

**编辑**

我相信这与 [PrincipalPermission(SecurityAction.Demand)] 有关，我们使用它来确保用户经过身份验证并且我们可以访问令牌。[一旦 WCF 服务转移到 SSL](https://stackoverflow.com/questions/6085730/principalpermission-demand-failing-once-wcf-service-was-moved-to-ssl) ，我发现PrincipalPermission.Demand() 失败，遗憾的是没有答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T00:25:05.457

讨厌回答我自己的问题，但在阅读了 Rajesh 的消息后，我更多地查看了错误。正如我的编辑所说，它与 PrincipalPermission 属性有关。如果我删除它正在运行我的代码并且我的身份验证失败。

所以回到搜索互联网，我发现[http://forums.silverlight.net/t/34954.aspx/1](http://forums.silverlight.net/t/34954.aspx/1)

我刚刚添加到服务行为。所以看起来像

```
<serviceBehaviors>
    <behavior name="">
        <serviceDebug httpHelpPageEnabled="true" includeExceptionDetailInFaults="true" />
        <serviceAuthorization principalPermissionMode="None"/>
    </behavior>
</serviceBehaviors> 
```

现在它可以工作了，除非我经过身份验证等，否则我可以调用我的服务并被拒绝。是的

希望这可以帮助其他人解决这个问题

# android - Android sdk 剪切/修剪视频文件

> ID：11205299
> 
> 赞同：16
> 
> 时间：2012-06-26T10:24:39.070
> 
> 标签：android, video, media, trim

有没有办法在android上剪切视频（mp4或3gp），比如只使用电影的最后5秒......在iphone上这可以使用AVAssetExportSession但在android上我没有找到类似的东西，只是对 ffmpeg 库的一些引用似乎很复杂。有没有更简单的方法呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T23:08:50.417

你可以用我的[mp4parser](https://github.com/sannies/mp4parser)库来做到这一点。看一下[ShortenExample](https://github.com/sannies/mp4parser/blob/master/examples/src/main/java/com/googlecode/mp4parser/ShortenExample.java)，它的功能与名称所暗示的完全一样。由于库无法重新编码视频，它只能在 I 帧处剪切视频。因此，您可以进行切割的时间点非常粗糙。

在 Android 4.1 上，您可以通过 MediaCodec API 访问硬件编解码器，这可能是一个选项（但我还没有看到任何示例）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-20T06:21:18.773

我们可以在 Android 中使用 ffmpeg 剪切视频。

为了在 android 中集成 FFmpeg，我们可以使用像[ffmpeg-android](https://github.com/WritingMinds/ffmpeg-android)这样的预编译库。

**要剪切带有重新编码的视频，我们可以使用以下命令-**

```
String[] complexCommand = {"-ss", "" + startMs / 1000, "-y", "-i", inputFileAbsolutePath, "-t", "" + (endMs - startMs) / 1000, "-s", "320x240", "-r", "15", "-vcodec", "mpeg4", "-b:v", "2097152", "-b:a", "48000", "-ac", "2", "-ar", "22050", outputFileAbsolutePath}; 
```

这里，

-ss

寻求定位

-y

无需询问即可覆盖输出文件。

-一世

ffmpeg 从 -i 选项指定的任意数量的输入“文件”中读取

-t

限制从输入文件中读取数据的持续时间

-s

视频输出大小

-r

设置帧率

-vcodec

设置视频编解码器。

-b:v

设置视频比特率

-b:a

设置音频比特率

-ac

设置音频通道数。

-ar

如果已编码，则设置音频流的采样率

启动程序

视频的开始时间（以毫秒为单位），从您要剪切的位置开始

结束

您要剪切的视频的结束时间（以毫秒为单位）

**要在不重新编码的情况下剪切视频，我们可以使用以下命令 -**

```
String[] complexCommand = { "-y", "-i", inputFileAbsolutePath,"-ss", "" + startMs / 1000, "-t", "" + (endMs - startMs) / 1000, "-c","copy", outputFileAbsolutePath}; 
```

这里，

-c copy 将视频、音频和比特流从输入复制到输出文件而不重新编码。

我创建了一个使用 FFMpeg 编辑视频的示例 android 项目，其中包括剪切视频。检查一下-

[https://github.com/bhuvnesh123/FFmpeg-Video-Editor-Android](https://github.com/bhuvnesh123/FFmpeg-Video-Editor-Android)

及其教程在-

[https://androidlearnersite.wordpress.com/2017/03/17/ffmpeg-video-editor/](https://androidlearnersite.wordpress.com/2017/03/17/ffmpeg-video-editor/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-09-16T12:39:16.660

试试这个

```
Intent trimVideoIntent = new Intent("com.android.camera.action.TRIM");

// The key for the extra has been discovered from com.android.gallery3d.app.PhotoPage.KEY_MEDIA_ITEM_PATH
trimVideoIntent.putExtra("media-item-path",FilePath);
trimVideoIntent.setData(videoUri);

// Check if the device can handle the Intent
List<ResolveInfo> list = getPackageManager().queryIntentActivities(trimVideoIntent, 0);
if (null != list && list.size() > 0) {
    startActivity(trimVideoIntent); // Fires TrimVideo activity into being active
}else {
    Toast.makeText(this, "not supported",Toast.LENGTH_SHORT).show();
} 
```

它在 Gallery2 包安装设备上的工作

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-15T12:23:12.890

您可以尝试 INDE Media for Mobile - [https://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials](https://software.intel.com/en-us/articles/intel-inde-media-pack-for-android-tutorials)

它具有作为 MediaComposer 类的转码\remuxing 功能，并且可以为结果文件选择段。由于它在内部使用 MediaCodec API，因此对电池非常友好并且运行速度尽可能快

![在此处输入图像描述](../Images/02c05ac9b79fa93ec8fbd769e1549aca.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-20T08:30:23.513

使用这个[Android-video-](https://github.com/a914-gowtham/Android-video-trimmer) trimmer android library.which 使用 Exoplayer2 和 FFmpeg 进行视频修剪

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-20T16:41:10.153

你可以`MediaCodec`在android中使用API​​。

```
import android.media.MediaCodec.BufferInfo
import android.media.MediaExtractor
import android.media.MediaFormat
import android.media.MediaMetadataRetriever
import android.media.MediaMuxer
import java.io.IOException
import java.nio.ByteBuffer
import android.os.Handler
import android.os.Looper

class VideoUtils {
    companion object {
        /**
         * @param srcPath the path of source video file.
         * @param dstPath the path of destination video file.
         * @param startMs starting time in milliseconds for trimming. Set to
         * negative if starting from beginning.
         * @param endMs end time for trimming in milliseconds. Set to negative if
         * no trimming at the end.
         * @param useAudio true if keep the audio track from the source.
         * @param useVideo true if keep the video track from the source.
         * @throws IOException
         */
        @Throws(IOException::class)
        fun startTrim(
            srcPath: String, dstPath: String,
            startMs: Int, endMs: Int, useAudio: Boolean, useVideo: Boolean,
            listener: Listener
        ) {
            runOnUiThread {
                listener.onStart()
            }
            // Set up MediaExtractor to read from the source.
            val extractor = MediaExtractor()
            extractor.setDataSource(srcPath)
            val trackCount = extractor.trackCount
            // Set up MediaMuxer for the destination.
            val muxer = MediaMuxer(dstPath, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4)
            // Set up the tracks and retrieve the max buffer size for selected
            // tracks.
            val indexMap = HashMap<Int, Int>(trackCount)
            var bufferSize = -1
            for (i in 0 until trackCount) {
                val format = extractor.getTrackFormat(i)
                val mime = format.getString(MediaFormat.KEY_MIME)
                var selectCurrentTrack = false
                if (mime!!.startsWith("audio/") && useAudio) {
                    selectCurrentTrack = true
                } else if (mime.startsWith("video/") && useVideo) {
                    selectCurrentTrack = true
                }
                if (selectCurrentTrack) {
                    extractor.selectTrack(i)
                    val dstIndex = muxer.addTrack(format)
                    indexMap[i] = dstIndex
                    if (format.containsKey(MediaFormat.KEY_MAX_INPUT_SIZE)) {
                        val newSize = format.getInteger(MediaFormat.KEY_MAX_INPUT_SIZE)
                        bufferSize = if (newSize > bufferSize) newSize else bufferSize
                    }
                }
            }
            if (bufferSize < 0) {
                bufferSize = DEFAULT_BUFFER_SIZE
            }
            // Set up the orientation and starting time for extractor.
            val retrieverSrc = MediaMetadataRetriever()
            retrieverSrc.setDataSource(srcPath)
            val degreesString = retrieverSrc.extractMetadata(
                MediaMetadataRetriever.METADATA_KEY_VIDEO_ROTATION
            )
            if (degreesString != null) {
                val degrees = degreesString.toInt()
                if (degrees >= 0) {
                    muxer.setOrientationHint(degrees)
                }
            }
            if (startMs > 0) {
                extractor.seekTo((startMs * 1000).toLong(), MediaExtractor.SEEK_TO_CLOSEST_SYNC)
            }
            // Copy the samples from MediaExtractor to MediaMuxer. We will loop
            // for copying each sample and stop when we get to the end of the source
            // file or exceed the end time of the trimming.
            val offset = 0
            var trackIndex: Int
            val dstBuf = ByteBuffer.allocate(bufferSize)
            val bufferInfo = BufferInfo()
            val totalTimeMs = endMs - startMs
            try {
                muxer.start()
                while (true) {
                    bufferInfo.offset = offset
                    bufferInfo.size = extractor.readSampleData(dstBuf, offset)
                    if (bufferInfo.size < 0) {
                        runOnUiThread {
                            listener.onComplete()
                        }
                        bufferInfo.size = 0
                        break
                    } else {
                        bufferInfo.presentationTimeUs = extractor.sampleTime
                        if (endMs > 0 && bufferInfo.presentationTimeUs > endMs * 1000) {
                            runOnUiThread {
                                listener.onComplete()
                            }
                            break
                        } else {
                            bufferInfo.flags = extractor.sampleFlags
                            trackIndex = extractor.sampleTrackIndex
                            muxer.writeSampleData(
                                indexMap[trackIndex]!!, dstBuf,
                                bufferInfo
                            )
                            runOnUiThread {
                                listener.onProgress((bufferInfo.presentationTimeUs / 1000 - startMs).toFloat() / totalTimeMs)
                            }
                            extractor.advance()
                        }
                    }
                }
                muxer.stop()
            } catch (e: IllegalStateException) {
                runOnUiThread {
                    listener.onError("The source video file is malformed")
                }
            } finally {
                muxer.release()
            }
            return
        }
    }

    interface Listener {
        fun onStart()
        fun onProgress(value: Float)
        fun onComplete()
        fun onError(message: String)
    }
}

private val mHandler = Handler(Looper.getMainLooper())

fun runOnUiThread(closure: () -> Unit) {
    mHandler.post {
        closure()
    }
} 
```

参考资料：[https ://android.googlesource.com/platform/packages/apps/Gallery2/+/refs/heads/master/src/com/android/gallery3d/app/VideoUtils.java](https://android.googlesource.com/platform/packages/apps/Gallery2/+/refs/heads/master/src/com/android/gallery3d/app/VideoUtils.java)

# javascript - 如何在 window.open 中使用颜色框

> ID：11205300
> 
> 赞同：0
> 
> 时间：2012-06-26T10:24:39.807
> 
> 标签：javascript, jquery, .net, colorbox

我有这个使用 javascript 的弹出功能

```
 function BookingIDCancellation() {

        window.open("popup/BookingIDCancellation.aspx?field=BookingID|<%=txtBookingID.clientid%>", "mywindow", "menubar=0,resizable=1,scrollbars=1,width=500,height=450")

    } 
```

我在按钮上使用此功能，以便在单击它后它会弹出并从弹出页面中获取值。

```
<asp:Button ID="btnBrowse" CssClass="button" runat="server" Text="Browse" OnClientClick="BookingIDCancellation();return false;" /> 
```

如何将此 window.open 与 jquery colorbox 一起使用，以便弹出窗口看起来更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:46:59.700

您可以使用以下代码：

```
function BookingIDCancellation(){
     $.colorbox({href:"popup/BookingIDCancellation.aspx?field=BookingID|<%=txtBookingID.clientid%>", width:"500px", height:"450px"});
} 
```

请注意，如果“BookingIDCancellation.aspx”包含Postback函数，则需要在$.colorbox函数中添加“iframe:true”参数，并且需要在“BookingIDCancellation.aspx”页面设置Postback URL。

框架代码：

```
function BookingIDCancellation(){
     $.colorbox({href:"popup/BookingIDCancellation.aspx?field=BookingID|<%=txtBookingID.clientid%>", width:"500px", height:"450px", iframe:true});
} 
```

# ruby-on-rails - 如何保护所有字段免受 mongoid 应用程序中的大规模分配

> ID：11205301
> 
> 赞同：0
> 
> 时间：2012-06-26T10:24:40.280
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, mass-assignment

我已添加此修复程序[https://gist.github.com/2382288](https://gist.github.com/2382288)以保护所有字段免受 mongoid 应用程序中的大规模分配。

在我的`config/initializers/mongoid.rb`我添加了这个修复：

```
module Mongoid
  module MassAssignmentSecurity
    extend ActiveSupport::Concern

    included do
      attr_accessible nil
    end
  end

  module Document
    include MassAssignmentSecurity
  end
end 
```

我的问题是：

**此修复完全保护您的应用程序免受攻击批量分配？**

**还是建议** `attr_accessible` **在每个模型中添加所有属性？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-14T15:41:56.133

创建一个自动加载文件和以下内容：

```
module Mongoid
  module MassAssignmentSecurity
    extend ActiveSupport::Concern

    included do
      attr_accessible(nil)
      self.mass_assignment_sanitizer = :strict
    end
  end

  module Document
    include MassAssignmentSecurity
  end
end 
```

执行上述操作将导致适当的加薪，就像您使用 ActiveRecord 一样：

```
jordon@envygeeks:~/development/gryffindor$ rails c
Loading development environment (Rails 3.2.6)

[1] pry(main)> Page.new => #<Page _id: RANDOM_ID, _type: "Page", content: nil>
[2] pry(main)> Page.new(t: 't') => ActiveModel::MassAssignmentSecurity::Error 
```

如果没有对代码进行上述修复，您将只会收到缺少方法的 raises，这是毫无价值的，因为它是一个一般异常，甚至不会将您的应用程序指向正确的方向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T07:11:52.077

我建议尝试 strong_parameters gem [https://github.com/rails/strong_parameters](https://github.com/rails/strong_parameters) [http://railscasts.com/episodes/371-strong-parameters](http://railscasts.com/episodes/371-strong-parameters) （观看本集需要订阅）

strong_parameters 将包含（并且是默认值）在 rails 4 中。它已经合并到 rails 中。我在我的一个项目中使用了这个 gem，与 attr_accessible 相比，它提供了很大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T15:02:38.367

这将使所有 Mongoid::Documents 默认不接受任何字段进行批量分配。这可能不是您想要的，因为您将无法`@model.update(params[:model)`

您几乎肯定会想要进入文档并添加：

```
attr_accessible :first_name, :last_name 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-07T01:24:07.427

> 此修复完全保护您的应用程序免受攻击批量分配？

是的，这将防止对任何字段进行批量分配，并且在安全应用程序中是正确的默认设置。

> 还是建议在每个模型中添加 attr_accessible 的所有属性？

不是*"or"*而是*"and"*。您应该使用建议的代码默认值，强制所有文档使用白名单。然后在每个文档中明确声明哪些字段应该可以通过 attr_accessible 语句的批量赋值访问。

# php - CodeIgniter 设置 cookie，cookie 未设置

> ID：11205307
> 
> 赞同：0
> 
> 时间：2012-06-26T10:25:18.860
> 
> 标签：php, codeigniter

在问这个原因之前，我已经在这里和谷歌上搜索过，我看到它是一个受欢迎的问题，但我找到的答案我已经尝试过了，但我仍然失败了。

这是我设置 cookie 的尝试（注意助手是自动加载的）

```
$longlife = 60*60*24*60; //60 days
$shortlife = 60*60*24*10; //10 days
$this->input->set_cookie('AutoRemember', $user.'::'.$hashbrown, $shortlife, '.example.com', '/');
$this->input->set_cookie('LongRemember', $user.'::'.$hashbrown, $longlife, '.example.com', '/'); 
```

当我尝试在“$this->input->cookie()”上执行 var_dump 时，我得到 bool false 作为输出，这意味着没有找到 cookie。这是我第一次尝试在 CI 中使用 cookie，所以目前这个问题超出了我的范围。

另请注意，我将上面示例中的真实域更改为 example.com，因为我不希望该域现在出现在搜索中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T19:23:07.490

__***于 2013 年 10 月 3 日为清晰而编辑***__

好吧，我弄清楚我的问题是什么，我相信这也会帮助新来的人。因此，当您最初设置您的`application/config/config.php`

你会发现一行：

```
$config['cookie_prefix']    = ""; 
```

此设置虽然给人的印象是可选的，但事实证明这是一项要求。似乎有一个错误，其中并不总是可重现的，因此很难追踪是什么以及为什么。底线是，如果未设置此配置项。在很多情况下，当 cookie 设置/获取它时，它会在引擎盖下无声地破裂。让您觉得它在起作用，而实际上却在起作用。

想象一下那是多么令人沮丧。无论如何，我对原始问题的修复是设置上面提到的前缀行。任何事情都会做，程序员的选择。

无论如何，对于那些打算设置它的人来说，值得注意的是。当您设置 cookie 时，您通常按照文档/指南进行操作。

```
$this-input->set_cookie('myCookie'); 
```

但是，我注意到文档没有指定（或者我没有最后检查）是您设置的前缀

```
$config['cookie_prefix']    = "cmh_";//example 
```

当你调用它时不会得到你的 cookie 值，就像人们认为他们应该做的那样，即 doc 说：

```
$this->input->cookie('myCookie'); 
```

像这样调用这个值很可能会导致屏幕上什么也看不到。如果你做了一个`var_dump()`例子。你会得到`bool(false)`. 换句话说，这意味着它找不到您引用的 cookie。这是真的。它不可能不存在，记住你设置了一个前缀。要在那时获取您的 cookie，您需要执行类似的操作

```
$this->input->cookie('cmh_myCookie'); 
```

这将打印出 cookie 的实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:47:49.030

仅供参考，您不能在具有不同名称（如“yoursite.com”）的域（HTTP_HOST）中为域“example.com”设置 cookie。这是安全问题，浏览器会忽略它。使用 mozilla firebug 'NET' 选项卡检查响应标头，如果 cookie 存在且未设置，那么我是对的。

其次，设置 cookie 后，它将在服务器 (php) 上可用，仅在下一个请求中可用，因为当前 $_COOKIE 仍未更新。如果 CI 以不同的方式实现这一点，那么这是对概念的错误实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T14:38:18.907

我建议改用 CodeIgniter 的 Session 类。

[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-26T10:29:32.927

从文档：

```
This function is identical to the post function, only it fetches cookie data:
$this->input->cookie('some_data', TRUE); 
```

好吧，正如这表明的那样，您需要添加 cookie 的名称来获取它。尝试输出`$this->input->cookie('AutoRemember')`

# linux - 使用正则表达式从文本文件中提取多行数据的 shell 脚本

> ID：11205308
> 
> 赞同：3
> 
> 时间：2012-06-26T10:25:20.710
> 
> 标签：linux, shell, awk, grep

我正在尝试使用带有 shell 脚本的正则表达式从文本文件中提取一些特定数据

那是使用多行 grep .. 而我使用的工具是 pcregrep 以便我可以与 perl 的正则表达式兼容

```
 [58]Walid Chamoun Architects WLL
     * [59]Map
     * [60]Website
     * [61]Email
     * [62]Profile
     * [63]Display Ad

   Walid Chamoun Architects WLL

   PO Box:
          55803, Doha, Qatar

   Location:
          D-Ring Road, New Salata Shamail 40, Villa 340, Doha, Qatar

   Tel:
          (00974) 44568833

   Fax:
          (00974) 44568811

   Mob:
          (00974) 44568822

     * Accurate Budget Costing
     * Eco-Friendly Structural Design
     * Exclusive & Unique Design
     * Quality Architecture & Design

Company Profile

   Walid Chamoun Architects (WCA) was founded in Beirut, Lebanon, in 1992,
   committed to the concept of fully integrated design-build delivery of
   projects. In late '90s, company established in-house architectural and
   engineering services. As a full service provider, WCA expanded from
   multi-family projects to industrial and office construction, which
   added development services, including site acquisition and financing.
   In 2001, WCA had opportunity and facilities to experience European
   market and establish office in Puerto Banus, Marbella, Spain. By 2005,
   WCA refined its structure to focus on specific market segments and new
   office was opened in Doha, state of Qatar. From a solid foundation and
   reputation built over eighteen years, WCA continually to provide
   leadership in design-build through promotion of benefits and education
   to its practitioners.
   Project Planning: Project planning and investigation occurs before
   design begins has greatest impact on cost, schedule and ultimately the
   success of project. Creativity in Design: You can rely on our in-house
   designers for design excellence in all aspects of the project. Our
   designs have received recommendations and appreciations on national and
   international levels. Creativity in Execution: Experienced in close
   collaboration with the designers as part of the integrated team, our
   construction managers, superintendents and field staff create value
   throughout the project. Post Completion Services: Your needs can be
   served through our skills and experience long after the last
   construction crew has left the site. Performance: Corporate and
   institutional clients, developers and public agencies repeatedly select
   WCA on the basis of its consistent record of performance excellence.
   Serving clients throughout the Middle East and GCC, WCA provides
   complete planning for architectural, interior design and construction
   on a single-responsibility basis. Our expertise spans industrial,
   commercial, institutional, public and residential projects. Benefits of
   Design-Build: Design-build is a system of contracting under which one
   entity performs both design and construction. Benefits of design-build
   project delivery include: Single point responsibility Early knowledge
   of cost Time and Cost savings

   Classification:
          Architects - [64]Architects

   [65]Al Ali Consulting & Engineering
     * [66]Map
     * Website
     * Email
     * Profile
     * Display Ad

   Is this your company?
   [67]Upgrade this free listing here

   PO Box:
          467, Doha, Qatar

   Tel:
          (00974) 44360011

Company Profile

   Classification:
          Architects - [68]Architects

   [69]Al Gazeerah Consulting Engineering
     * [70]Map
     * Website
     * Email
     * Profile
     * Display Ad

   Is this your company?
   [71]Upgrade this free listing here

   PO Box:
          22414, Doha, Qatar

   Tel:
          (00974) 44352126

Company Profile

   Classification:
          Architects - [72]Architects

   [73]Al Murgab Consulting Engineering
     * [74]Map
     * Website
     * Email
     * Profile
     * Display Ad

   Is this your company?
   [75]Upgrade this free listing here

   PO Box:
          2856, Doha, Qatar

   Tel:
          (00974) 44448623

Company Profile

   Classification:
          Architects - [76]Architects
References

   Visible links
   1\. http://www.qatcom.com/useraccounts/login
   2\. http://www.qatcom.com/useraccounts/register
   3\. http://www.qatcom.com/
   4\. http://www.qatcom.com/
   5\. http://www.qatcom.com/qataryellowpages/map-of-doha
   6\. http://www.qatcom.com/qataryellowpages/about-qatcom
   7\. http://www.qatcom.com/qataryellowpages/advertise-with-qatcom
   8\. http://www.qatcom.com/qataryellowpages/advertiser_testimonials
   9\. http://www.qatcom.com/useraccounts/login
  10\. http://www.qatcom.com/useraccounts/register
  11\. http://www.qatcom.com/contact-qatcom
  12\. http://www.qatcom.com/qataryellowpages/companies
  13\. http://www.qatcom.com/classifications/index/A
  14\. http://www.qatcom.com/classifications/index/B
  15\. http://www.qatcom.com/classifications/index/C
  16\. http://www.qatcom.com/classifications/index/D
  17\. http://www.qatcom.com/classifications/index/E
  18\. http://www.qatcom.com/classifications/index/F
  19\. http://www.qatcom.com/classifications/index/G
  20\. http://www.qatcom.com/classifications/index/H
  21\. http://www.qatcom.com/classifications/index/I
  22\. http://www.qatcom.com/classifications/index/J
  23\. http://www.qatcom.com/classifications/index/K
  24\. http://www.qatcom.com/classifications/index/L
  25\. http://www.qatcom.com/classifications/index/M
  26\. http://www.qatcom.com/classifications/index/N
  27\. http://www.qatcom.com/classifications/index/O
  28\. http://www.qatcom.com/classifications/index/P 
```

对于这样的样本数据，我正在尝试获取公司的详细信息

```
company name
po box
Tel
fax
mobile
company profile 
```

进入 .csv 文件，我对正则表达式和 linux 也很陌生.. 我所能得到的就是这样的东西

```
\[\d*\][^\.]*[\(\d*\)\s\d*)] 
```

任何人都可以帮我解决这个问题..

改进：

我想出了这样的事情

```
$ awk '/^\[/ && ! /Upgrade this free listing/ {print $0} /:$/ && ! /Classification/ {printf $0 ;  getline x ; print x}' file 
```

但这仍然不是我想要的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T02:21:01.233

您可以在**awk**中执行此操作，但最好改为解析 HTML。使用[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)模块的**Python**是一个很好的工具。但这并不是很令人兴奋，所以这里是如何用尴尬（哈哈！）的方式来做到这一点：

```
#!/usr/bin/awk -f

function trim(s) {
    gsub(/(^ +)|( +$)/, "", s)
    return s
}

BEGIN {
    count = 0
    fields[0] = "company"
    fields[1] = "pobox"
    fields[2] = "tel"
    fields[3] = "fax"
    fields[4] = "mob"
    fields[5] = "profile"
}

# company name
/^ +\[[0-9]+\].*$/ {
    sub(/^ +\[[0-9]+\]/, "") # get rid of the Lynx reference
    # this is a bit naughty: our regex also matches this other link, but there's only one of them, so we just filter it
    if ($0 != "Upgrade this free listing here") data[count,"company"]=$0
}

# two line fields, easy!
/ +PO Box:$/ { getline; data[count,"pobox"]=$0 }
/ +Tel:$/ { getline; data[count,"tel"]=$0 }
/ +Fax:$/ { getline; data[count,"fax"]=$0 }
/ +Mob:$/ { getline; data[count,"mob"]=$0 }

# multi-line field, tricky because it can be empty
/^Company Profile$/ {
    getline # skip empty line

    # process lines until encountering Classification field
    s = ""
    do {
        s = s $0
        getline
    } while ($0 !~ / +Classification:$/)
    data[count,"profile"]=s
    count++ # the Classification field denotes the end of the company record
}

END {
    OFS=","

    # output CSV header row
    for ( key in fields ) {
        printf "\"" fields[key] "\","
    }
    printf "\n"

    # output data
    for ( i=0; i<count; i++ ) {
        for ( key in fields ) {
            printf "\"" trim(data[i,fields[key]]) "\","
        }
        printf "\n"
    }
} 
```

另存为**parse.awk**然后用`./parse.awk < sample.txt`. 输出一个 CSV，如下所示：

```
"tel","fax","mob","profile","company","pobox",
"(00974) 44568833","(00974) 44568811","(00974) 44568822","Walid Chamoun Architects (WCA) was founded in Beirut, Lebanon, in 1992,   committed to the blablabla","Walid Chamoun Architects WLL","55803, Doha, Qatar",
"(00974) 44360011","","","","Al Ali Consulting & Engineering","467, Doha, Qatar",
"(00974) 44352126","","","","Al Gazeerah Consulting Engineering","22414, Doha, Qatar",
"(00974) 44448623","","","","Al Murgab Consulting Engineering","2856, Doha, Qatar", 
```

有些评论应该有望解释正在发生的事情。这将在普通的旧 awk 中运行，不需要花哨的 gawk 功能。请记住，awk 数组是任意排序的。这很容易用不同的输入数据破坏一大堆，这只是您真正应该解析 HTML 而不是这种`lynx -dump`恶作剧的众多原因之一。

# c# - 在windows phone中打开PPT文件

> ID：11205318
> 
> 赞同：0
> 
> 时间：2012-06-26T10:26:10.013
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我想将一个 ppt 文件链接到 Windows phone 7 中的一个 XAML 页面。我有该文件在线存储。理想情况下，当用户单击应用栏图标时，它应该使用手机中的 PPT 查看器打开，类似于可用的启动器任务链接 ShareStatusTask、BingMapsTask 等，

```
private void appbarPresentationClick(object sender, EventArgs e)
{
  WebBrowserTask pptTask = new WebBrowserTask();
  pptTask.Uri = new Uri("http://www.fileden.com/files/2012/6/26/3320306/Emerging%20Technologies.pptx");
  pptTask.Show();
} 
```

这将打开 Web 浏览器，然后打开 ppt 文件。有没有更好的方法来直接启动他的PPT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:17:44.350

没有其他方法可以打开此类文件。

您使用的方法是唯一可用的方法。

# python - 如果我想在 Ubuntu 上将 Python 2 与 Django 一起使用，如何安装 Python 3

> ID：11205319
> 
> 赞同：0
> 
> 时间：2012-06-26T10:26:17.330
> 
> 标签：python, django, ubuntu, python-3.x

我有需要 Python 3 的程序，但我开发 Django 并且它使用 Python 2。怎么办，同时使用它们

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:28:18.547

安装两者。Python 3 使用不同的可执行文件名称，因此两者不会发生冲突，并且[Debian python 政策](http://www.debian.org/doc/packaging-manuals/python-policy/ch-python.html#s-versions)（由 Ubuntu 采用）规定两个主要版本将作为单独的体系结构保存。

Python 版本使用主要和次要版本号（python2.7、python3.2）安装，但 Ubuntu 将为您的 python 2 和 python 3 安装创建`python`和别名（分别链接到和）。`python3``python2.7``python3.2`

您的 Django 开发将继续使用`python`，您的 Python 3 程序将使用`python3`.

# java - 如何从服务器到任何客户端运行独立 Java 应用程序

> ID：11205326
> 
> 赞同：3
> 
> 时间：2012-06-26T10:26:42.227
> 
> 标签：java, client-server, localhost

我开发了一个在 Linux 环境下运行的独立应用程序 (.jar)，我想将此应用程序保留在服务器 (Linux) 上并希望通过其他系统访问。

请建议这是否可能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:37:35.213

你考虑过[Java Webstart](http://java.com/en/download/faq/java_webstart.xml)吗？它将允许客户端从网络服务器下载您的应用程序并在本地运行它。

它传统上与 GUI（Swing 等）应用程序一起使用，但我用它在本地运行守护程序和服务器进程。

它会自动处理应用程序更新，因此您的客户只会在需要时下载一个版本。否则，他们将访问其本地缓存的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:48:34.757

Linux 系统实现了 Berkeley 套接字 API，所以是的，您可以为其他机器打开通信。

为此，您可以使用包 java.net。对于套接字连接，我们可以使用：Socket、ServerSocket 和 SocketAddress。

Socket 用于客户端，ServerSocket 用于创建套接字服务器，而 SocketAddress 用于提供将用作目标套接字的信息。

如图所示，请找到以下项目：

第一个项目 SocketServerApp.java - 构建它然后运行 ​​java -jar SocketServerApp.jar

```
package socketserverapp;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.ServerSocket;
import java.net.Socket;

public class SocketServerApp {

    public static void main(String[] args) throws IOException {
        //we defines all the variables we need
        ServerSocket server = null;
        Socket client = null;
        byte[] receivedBuff = new byte[64];
        int receivedMsgSize;   

        try 
        {
            //activate port 8881 as our socket server
            server = new ServerSocket(8881);
            System.out.println("Server started");

            //receiving connection from client
            client = server.accept();
            System.out.println("Client connected");           
        } 
        catch (IOException e) 
        {
            System.out.println(e.getMessage());
            System.exit(-1);
        }

        //prepare data stream
        InputStream in = client.getInputStream();
        OutputStream out = client.getOutputStream();

        //greet user if there is a client connection
        String data;
        data = "Hello from the Server!";
        out.write(data.getBytes());

        //accepting data from client and display it in the console.
        java.util.Arrays.fill(receivedBuff, (byte)0);
        while (true) {
             receivedMsgSize = in.read(receivedBuff);
             data = new String(receivedBuff);

             //if client type "exit", then exit loop and close everything
             if (data.trim().equals("exit"))
             {
                 out.write(data.getBytes());
                 break;
             }

             java.util.Arrays.fill(receivedBuff, (byte)0);
             System.out.println ("Client: " + data);
        }

        //close all resources before exiting
        out.close();
        in.close();
        client.close();
        server.close();
    }
} 
```

第二个项目是 SocketClientApp.java - 构建它然后运行 ​​java -jar SocketClientApp.jar

```
package socketclientapp;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.Socket;
import java.net.UnknownHostException;

public class SocketClientApp {

    public static void main(String[] args) throws IOException {
        Socket client = null;
        InputStream in = null;
        OutputStream out = null;
        byte[] receivedMsg = new byte[64];

        try {
            client = new Socket("localhost", 8881);
            in = client.getInputStream();
            out = client.getOutputStream();
        } catch (UnknownHostException e) {
            System.err.println(e.getMessage());
            System.exit(1);
        } catch (IOException e) {
            System.err.println(e.getMessage());
            System.exit(1);
        }

        String fromServer;
        String fromUser;

        in.read(receivedMsg);
        fromServer = new String(receivedMsg);
        System.out.println("Server: " + fromServer);

        fromUser = "Hello from Client";
        System.out.println("Sent to server: " + fromUser);
        out.write(fromUser.getBytes());

        fromUser = "exit";
        out.write(fromUser.getBytes());
        System.out.println("Sent to server: " + fromUser);

        out.close();
        in.close();
        client.close();
    }
} 
```

简而言之，这是一种 TCP/IP 通信。这种通信方式在拥有多种软件的企业中非常常见。

希望有帮助。

# asp.net - 在 asp.net Web 应用程序中使用 lucene.net 进行 DB 和文件搜索的最佳实践

> ID：11205329
> 
> 赞同：0
> 
> 时间：2012-06-26T10:26:50.733
> 
> 标签：asp.net, lucene.net

我有需要开发站点搜索功能的站点。数据可能驻留在数据库表中，也可能在 aspx 页面中作为静态字。我搜索谷歌，发现 lucene.net 可能适合网站搜索功能。但我从不使用 lucene.net，所以我不知道如何创建 lucene.net 索引文件。我想在我的网站上开发 2 个实用程序，例如

1) 一个用于创建和更新从数据库表和物理 aspx 文件中读取数据的索引文件。2) 针对索引文件搜索多个单个或多个关键字的实用程序。

我发现了一些我只是不明白的代码片段

```
string indexFileLocation = @"C:\Index";
    string stopWordsLocation = @"C:\Stopwords.txt";
    var directory = FSDirectory.Open(new DirectoryInfo(indexFileLocation));
    Analyzer analyzer = new StandardAnalyzer(
        Lucene.Net.Util.Version.LUCENE_29, new FileInfo(stopWordsLocation)); 
```

什么是**Lucene.Net.Util.Version.LUCENE_29** 什么是 stopWordsLocation 数据需要如何存储在 Stopwords.txt 中

但没有开发上述2个实用程序的概念。所以请指导我如何使用 lucene.net 搜索我的数据库和 aspx 文件。如果有人在这里讨论一些示例代码，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T15:31:32.530

Lucene.Net.Util.Version.LUCENE_29 只是表示您正在使用的 Lucene 版本，您应该始终在新代码中使用最新的。如果您使用更改 StandardAnalyzer 的版本升级 Lucene，但您不想重新索引所有数据，则它可以向后兼容。

stopWordsLocation 是包含您的停用词（您不想索引的词）的文件的位置。

IE: it, he, she, the, or, and etc...

它是一个常规文本文件，每行应包含 1 个停用词，并用换行符分隔每一行。

[http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/WordlistLoader.html#getWordSet(java.io.Reader](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/analysis/WordlistLoader.html#getWordSet(java.io.Reader))

# javascript - 谷歌地图和GeoJSon：经纬度转换

> ID：11205333
> 
> 赞同：1
> 
> 时间：2012-06-26T10:27:03.870
> 
> 标签：javascript, google-maps-api-3, geojson

我正在使用 Google Maps API 使用 google.maps.Polygon 在地图上可视化一些标签。我使用此转换器[http://converter.mygeodata.eu/](http://converter.mygeodata.eu/)将它们转换为 GeoJSon 格式，但纬度和经度坐标出现错误。

他们应该以意大利佛罗伦萨为中心，但实际上我明白了：

```
 1680508.8375
 4847672.484 
```

我尝试将它们除以 10000，我得到：

```
 16.805088375
 48.47672484 
```

让我展示一些结果，但这不是我想要的结果（我让它们展示在奥地利而不是佛罗伦萨）

在网上冲浪时，我发现了这个[https://groups.google.com/forum/?fromgroups#!topic/d3-js/H0zE7slqV0g](https://groups.google.com/forum/?fromgroups#!topic/d3-js/H0zE7slqV0g)描述了我的问题并使用 d3 找到了解决方案。

有没有办法只使用谷歌地图 API 和/或使用一些转换来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-28T14:02:43.560

好的，我似乎发现了问题所在。有许多不同的方法来定位地图中的点。谷歌地图使用 WGS84 编码，但我得到的是 EPSG:3003 编码的数据。所以他们不匹配。

我能够找到一个 js 库，可以进行您需要的所有转换。

[http://trac.osgeo.org/proj4js/](http://trac.osgeo.org/proj4js/)

# android - 在 Html5 的帮助下将消息从一台设备发送到另一台设备

> ID：11205342
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:27:22.323
> 
> 标签：android, html, sms

我想在 html5 的帮助下将消息或短信从一个设备发送到另一个设备。消息应该在组中的多个设备上发送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:30:26.107

嗯。我认为你对你正在尝试做的事情有点困惑。

如果您想创建一个聊天室，在其中将信息从一台设备发送到许多不同的设备，您需要使用[PubNub](http://www.pubnub.com/)或创建自己的服务器来处理[C2DM](https://developers.google.com/android/c2dm/)。

# java - JAXB 构建不正确的 XML

> ID：11205344
> 
> 赞同：1
> 
> 时间：2012-06-26T10:27:26.000
> 
> 标签：java, jaxb

我在使用 JAXB 将我的 java 对象写入 XML 文件时遇到了一些问题。

我的方法如下所示：

```
public void printToXml(PNLExport export, String outputPath, boolean syso)throws Exception
{

    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(outputPath);
        JAXBContext contxt = JAXBContext.newInstance(PNLExport.class);
        Marshaller m = contxt.createMarshaller();
        m.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, Boolean.TRUE);
        m.setProperty(Marshaller.JAXB_ENCODING, "UTF-8");
        if(syso){
            System.out.println();
            m.marshal(export, System.out);
        }
        m.marshal(export, fos);     

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (fos != null) {
                fos.close();
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}//printToXml 
```

关闭根元素标签后，它显示了一些奇怪的行为：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
    <PNLExport version="">
        <Header>
            <RecType>0</RecType>
            <DateFormat>DD.MM.YY</DateFormat>
            <TimeFormat>HH:MM</TimeFormat>
            <TimeMode>L</TimeMode>
            <GenDate>25.06.12</GenDate>
            <GenTime>09:45</GenTime>
        </Header>
        <Records>
            <Record>
                <FlightRecord>
                    <RecType>21</RecType>
                    <Carrier>HG</Carrier>
                    <FlightNumber>8332</FlightNumber>
                    <FlightDate>30.06.12</FlightDate>
                    <Departure>VIE</Departure>
                    <Destination>OLB</Destination>
                    <DepTime>09:40</DepTime>
                    <DesTime>11:30</DesTime>
                </FlightRecord>
                <PaxRecord>
                    <RecType>32</RecType>
                    <BookingNumber>11632</BookingNumber>
                    <PaxNumber>1</PaxNumber>
                    <Name>SCHABAUER,Franz</Name>
                    <Salutation>MR</Salutation>
                    <BookingState>OK</BookingState>
                    <TicketType>T</TicketType>
                </PaxRecord>
                <PaxRecord>
                    <RecType>32</RecType>
                    <BookingNumber>11632</BookingNumber>
                    <PaxNumber>2</PaxNumber>
                    <Name>SCHABAUER,Vera</Name>
                    <Salutation>MRS</Salutation>
                    <BookingState>OK</BookingState>
                    <TicketType>T</TicketType>
                </PaxRecord>
            </Record>
        </Records>
    .
    .
    .
    </PNLExport>
    rrier>
            <FlightNumber>8332</FlightNumber>
            <FlightDate>02.07.12</FlightDate>
            <Departure>VIE</Departure>
            <Destination>OLB</Destination>
            <DepTime>09:15</DepTime>
            <DesTime>10:55</DesTime>
        </FlightRecord>
        <FlightRecord>
            <RecType>21</RecType>
            <Carrier>HG</Carrier>
            <FlightNumber>8333</FlightNumber>
            <FlightDate>02.07.12</FlightDate>
            <Departure>OLB</Departure>
            <Destination>VIE</Destination>
            <DepTime>11:40</DepTime>
            <DesTime>13:20</DesTime>
        </FlightRecord>
        <FlightRecord>
            <RecType>21</RecType>
            <Carrier>HG</Carrier>
            <FlightNumber>8333</FlightNumber>
            <FlightDate>29.06.12</FlightDate>
            <Departure>OLB</Departure>
            <Destination>VIE</Destination>
            <DepTime>14:00</DepTime>
            <DesTime>15:40</DesTime>
        </FlightRecord>
    </Record>
</Records>
   </PNLExport> 
```

这里出了什么问题？

有时xml完全正确也很奇怪......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:40:08.447

创建`FileOutputStream`这样的文件只是打开文件进行写入。它不会**删除**文件的先前内容，而是用新内容覆盖它。如果旧内容*比*新内容长，那么旧内容的后面部分仍然会留在文件中。这似乎正是这里发生的事情。

解决此问题的最简单方法可能是在写入文件之前删除文件（显然，仅当它存在时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:23:26.327

由于在所需内容之后出现在文件中的额外数据具有相同的结构但数据不同，因此您很可能有两个线程调用此方法，并且偶尔会同时写入同一个文件。

# sql - 如何在oracle中根据数据库名称创建用户

> ID：11205349
> 
> 赞同：0
> 
> 时间：2012-06-26T10:27:33.947
> 
> 标签：sql, database, oracle, oracle10g

我是新手`oracle`，我想`abc`在 oracle 数据库中创建一个名为 as 的用户，但我不知道该怎么做，请帮助我。我的数据库名称是`tom`. 我写了以下

`create user abc identified by abc.`但是我怎样才能将此用户链接到我的数据库`tom`？

创建用户后`I want to import a dmp file in that user`，如何在用户上导入`abc`？

任何帮助深表感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:56:38.937

你原来的说法是正确的。您可以像这样创建一个新用户（使用现有的管理员用户）：
**通过 password_p 标识创建用户 user_name_u；**

根据您使用的客户端类型，导入过程可能会有所不同。但是你肯定有一个 SQLPlus，所以这就足够了：
[http ://www.orafaq.com/wiki/Import_Export_FAQ](http://www.orafaq.com/wiki/Import_Export_FAQ)

# .net - 如何赋予程序比启动它的用户更多的权限

> ID：11205356
> 
> 赞同：2
> 
> 时间：2012-06-26T10:27:56.003
> 
> 标签：.net, windows, file-permissions

我正在编写一个应用程序（.Net）来创建一些必须写入特殊文件夹的报告。
问题是：我的应用程序的用户应该在这个文件夹中具有读取权限，但不允许写入或更改任何内容。如果程序继承了用户的权限，我如何在这个文件夹中创建文件？

我对 Windows 权限不是很坚定，所以我不知道他们是否可以处理。

有人可以指出我的大致方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:44:10.530

显而易见的方法是创建一个对文件夹具有写入权限的服务，因此它可以充当写入文件夹的请求的“代理”。您的流程将如下所示：

1.  [程序] 在临时文件路径中创建报告输出
2.  [PROGRAM] 通知 [SERVICE] 报告输出 X 在临时文件路径中可用
3.  [SERVICE] 将报告输出 X 从临时文件路径复制到适当的受限位置
4.  [SERVICE] 通知 [PROGRAM] 输出已被复制
5.  [程序] 从受限位置访问输出。

拥有一个单独的代理进程来调解对受限位置的访问现在非常普遍，并且是 Internet Explorer 采用的技术之一，除其他外，它允许它在默认情况下使用 UAC 和受限文件系统访问进行操作。

您可以对代理服务进行编码，使其仅允许（即公开 API），例如，在受限制的位置创建新文件，从而防止历史输出被删除/覆盖，并且无需向标准用户提供除读取之外的任何内容访问受限位置。

另一种方法大致相似，但无需编写 Windows 服务，将创建一个计划任务，该任务配置为在执行步骤 1 到 5 中的操作的“提升的用户”下运行，然后对其进行配置允许应用程序按需（而不是按计划）执行它（我*认为*这是可能的，但不是 100% 确定）。

# ruby - 计算和删除前导字符

> ID：11205360
> 
> 赞同：1
> 
> 时间：2012-06-26T10:28:05.707
> 
> 标签：ruby, regex

我的字符串包含可变数量的前导连字符，并且在字符串的主体中可能包含也可能不包含连字符。例如：

--xxx-xxx

-xxxx

---xxxxxx-xx

我如何在 Ruby 中 a) 计算前导连字符的数量和 b) 返回删除前导连字符的字符串？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:34:30.940

```
>> "--xxx-xxx"[/\A-+/].size
=> 2
>> "--xxx-xxx".sub(/\A-+/, '')
=> "xxx-xxx" 
```

编辑：@shime 的评论让我想展示`String#[]`or的其他相关功能`String#slice`：

```
>> "--xxx-xxx"[/\A-+(.+)/, 1]
=> "xxx-xxx" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:33:31.060

删除前导连字符：

```
.sub(/^-*/, "") 
```

通过减去删除前后字符串的长度来计算前导连字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:33:36.157

删除前导连字符：

```
str.sub(/^-+(.+)/, '\1') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:33:53.087

```
s = '---xx-x'
new_s = s.gsub(/\A-*/, '')
hyph_num = s.length - new_s.length 
```

gsub 删除前导连字符。s 和 new_s 长度之间的差异等于前导连字符的数量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T10:36:22.143

```
count = 0

"-----xxx---xxx---".each_char do |ch|
  break if ch != '-'
  count = count + 1
end

# => 5

"-----xxx---xxx---".sub(/^-+/, '')
# => "xxx---xxx---" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-26T10:29:27.627

阅读[Ruby 字符串去除定义的字符](https://stackoverflow.com/questions/3165891/ruby-string-strip-defined-characters)和[https://stackoverflow.com/a/3166005/284795](https://stackoverflow.com/a/3166005/284795)

然后比较裸字符串和原字符串的长度

# asp.net - 为什么动态添加的用户控件的按钮事件没有被触发？

> ID：11205364
> 
> 赞同：-2
> 
> 时间：2012-06-26T10:28:25.763
> 
> 标签：asp.net

我已经动态加载了一个 -user 控件，它有一些提交按钮代码，用户控件在运行时成功注册，但不要在按钮单击时触发它的提交按钮事件，我缺少什么会有人告诉我吗？

看到这里是我的代码

```
 switch (ContentTypeID)
        {
            case 1:
                myCtrl = Page.LoadControl("~/Controls/DocumentSpreadSheet.ascx");

                if (myCtrl != null)
                {
                    ((Controls_DocumentSpreadSheet)myCtrl).ddlList = int.Parse(ddlList.SelectedValue);
                    pnlDetails.Controls.Add(myCtrl);
                }
                break;
            case 2: 
```

现在在运行时注册的用户控件有一些按钮，它有以下事件

```
 protected void btnSave_Click(object sender, EventArgs e)
    {
        if (checkRequiredFields(true) == true)
        {
            saveContentDetails();
            btnCancel_Click(null, null);
            //   loadSummaryGrid(true);
        }
        else
        {
            showMessageBox("Invalid data; please correct all errors.");
        }

    } 
```

这个事件没有被触发，我已经附加了断点并观察了它。

渲染标记

```
<div id="MainContent_ctl00_divButtons">
    <table cellspacing="0" cellpadding="0" border="0" style="width: 97%;
        margin: 10px;" id="Table3">
        <tbody><tr>
            <td align="center" colspan="4">
                <input type="image" src="../images/submit_btn.png" id="MainContent_ctl00_btnInsert" name="ctl00$MainContent$ctl00$btnInsert">
                &nbsp;
                <input type="image" src="../images/cancel-btn.png" id="MainContent_ctl00_btnCancel" name="ctl00$MainContent$ctl00$btnCancel">
                &nbsp;
            </td>
        </tr>
        <tr>
            <td>

            </td>
        </tr>
    </tbody></table>
</div> 
```

实际加价    

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:03:43.263

简单的答案：您添加控件为时已晚。

如果您想接受按钮单击，则应在 loadComplete 之前添加您的用户控件。理想情况下，您应该添加它`Init`，或者如果它取决于某些输入，请将其添加到`Load`事件中。

如果您将控件添加到按钮单击事件之类的东西上，它会呈现得很好。但是您不会在该控件上收到任何事件。

您的事件目标（在 html 中的隐藏元素中设置）在 LoadComplete 之后进行评估。如果在评估时您的控件不存在，它将不会收到该事件。

你要明白的是，grid 的 ItemCommand 事件触发了一次，它不会在下一次触发`PostBack`。您需要记住您已经添加了该控件，并`PostBack`再次添加它，直到您需要它在那里。最好记住这一点的地方是`ViewState`.

您应该设置一个变量`ViewState`来指示您当前正在显示该特定控件并使用该变量将控件添加到`Load`. 你不能这样做，`Init`因为 ViewState 在 Init 上不可用。

# c# - Datagridview 无法从选定行特定的控制按钮字段中获取文本

> ID：11205366
> 
> 赞同：0
> 
> 时间：2012-06-26T10:28:29.887
> 
> 标签：c#, asp.net

我有以下aspx：

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
                BorderStyle="None" Font-Names="Verdana" Font-Size="12px" 
                OnSelectedIndexChanged="GridView1_SelectedIndexChanged" ShowHeader="False"                     
                GridLines="None" EnableModelValidation="True" Width="22%" >
                    <RowStyle BorderStyle="None"  Height="40px" HorizontalAlign="Left"/>                            
                        <Columns>                                           
                            <asp:HyperLinkField Text="&lt;img src='../Images/CMM/download.png'/&gt;"></asp:HyperLinkField>                                                                
                            <asp:ButtonField CommandName="Select" DataTextField="codigo" DataTextFormatString="{0:d}"
                                ItemStyle-HorizontalAlign="Left" ControlStyle-Font-Underline="true">
                                <ControlStyle Font-Underline="True" />
                            </asp:ButtonField>
                        </Columns>
                    <EditRowStyle BorderStyle="None" />
                    <AlternatingRowStyle BorderStyle="None" />
                 </asp:GridView> 
```

我有以下 apsx.cs 文件代码：

```
protected void GridView1_SelectedIndexChanged(object sender, EventArgs e)
{                  
        CallSaveAs(GridView1.SelectedRow.Cells[1].Text);   
} 
```

GridView1.SelectedRow.Cells[1].Text 是空的，但我可以在 Debug 上看到它

我也试过：

```
ButtonField bf = (ButtonField)GridView1.SelectedRow.Cells[1].Controls[0]; 
```

但我无法将类型“System.Web.UI.Control”转换为“System.Web.UI.WebControls.ButtonField”

**终于找到了解决办法：**

```
 protected void GridView1_SelectedIndexChanged(object sender, EventArgs)
    {        
        LinkButton lb = (LinkButton)GridView1.SelectedRow.Cells[1].Controls[0];              
        CallSaveAs(lb.Text);   
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:59:03.797

我认为 ButtonField 呈现为多个控件，而您想要的是 LinkBut​​ton 所以您需要做的是引用第二个控件并将其转换为 LinkBut​​ton 像这样 -

```
LinkButton btn = (LinkButton)GridView1.SelectedRow.Cells[1].Controls[1];
string text = btn.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:36:45.177

ButtonField bf = (ButtonField)GridView1.SelectedRow.Cells[2].Controls[0];

现在试试....

不同数据源的相同条件在这里工作....

# qt - 如何随时间更新 QTableWidget 中的 QTableWidgetItem？

> ID：11205368
> 
> 赞同：0
> 
> 时间：2012-06-26T10:28:37.173
> 
> 标签：qt, visual-c++, qtablewidget, qtablewidgetitem

我打算为通行证做一个倒计时。给出一个文件，我从中读取以字符串形式给出的时间，然后从系统时间中减去它以获得剩余时间。该值将在 QTableWidget 中显示为 QTableWidgetItem。

如何随时间更新表格中的那个单元格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-22T15:42:05.117

如果您希望每秒更新一次单元格，您可以使用 QTimer 并将 timeout() 信号连接到您的方法，然后将计时器设置为 1 秒长。这将每秒调用您的方法。

我怀疑这是解决这个问题的最好方法，但这是我所拥有的:)

它应该看起来像这样：

```
QTimer *timer = new QTimer(this);
connect(timer, SIGNAL(timeout()), this, SLOT(yourFunction()));
timer->start(1000) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:44:02.210

`QTableWidgetItem::setText(...)`将时间转换为字符串后使用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:44:14.680

如果你想写小时：分钟，你可以将新结果与以前的结果进行比较，如果使用时间发生变化，`QtGui.QApplication.processEvents()`这将刷新 GUI，因此你在 qtablewidget 单元格中的时间。这可能会慢几个小时：分钟：秒

# c++ - C++ - 具有多种参数类型的方法

> ID：11205369
> 
> 赞同：0
> 
> 时间：2012-06-26T10:28:42.597
> 
> 标签：c++, templates, parameters

我有很多 Java 经验，但对 C++ 很陌生。

我需要一个方法，简单的例子是 set union，它可以使用参数 of`set<int>`和 of `set<bool>`，但没有其他类型。

目前我已经重载了方法名，但它在方法体中重复了很多类似的代码。

有没有更好的办法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:30:03.513

您可以编写**[函数模板](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CGQQFjAC&url=http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/topic/com.ibm.xlcpp8l.doc/language/ref/function_templates.htm&ei=E4_pT9KBEobxrQedq_yaDg&usg=AFQjCNFHb1LeZKs06Y7blLluXdxAKHuVbQ)**。
但是，如果您执行类似的操作，而不管参数的类型如何，您都可以这样做。如果您对每种数据类型执行不同的操作，那么您将不得不专门化模板功能，这基本上会让您回到您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:33:21.060

```
template <typename T>
void func(const std::set<T> &param)
{
  // your staff
}

//....

int main()
{
  std::set<int> int_set;
  std::set<bool> bool_set;

  func(int_set);
  func(bool_set);
} 
```

# c# - 设置动态创建的 asp:button 的 OnClick 属性

> ID：11205374
> 
> 赞同：2
> 
> 时间：2012-06-26T10:28:58.017
> 
> 标签：c#, asp.net, button, onclick

我有一个需要动态创建的按钮，但问题是我无法设置它的 OnClick 属性以运行服务器端方法 btnSubmit_Click(object sender, EventArgs e)

如果我做：

```
btnSubmit.Attributes["OnClick"] = "btnSubmit_Click()"; 
```

它实际上将其添加到 OnClientClick 中。

```
btnSubmit.Click += new EventHandler(btnSubmit_Click); 
```

也从不开火。

如何设置实际的服务器 OnClick？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:38:54.503

Page_PreInit 中的绑定事件

```
 public Button btnSubmit; // Add the on class level as data member

Protected void Page_PreInit(object sender, EventArgs e)
{
       btnSubmit = new Button();        
       btnSubmit.Text = "Click me";           
       btnSubmit.Click +=new EventHandler(btnSubmit_Click);
       this.form1.Controls.Add(btnSubmit); 
} 
```

添加此事件。

```
void btnSubmit_Click(object sender, EventArgs e)
{
   throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:30:19.170

```
btnSubmit.Click += new EventHandler(btnSubmit_Click); 
```

//你的事件处理程序

```
void btnSubmit_Click(object sender, EventArgs e)
{
    throw new NotImplementedException();
} 
```

# javascript - 使用 DTrace 分析 Node.js

> ID：11205375
> 
> 赞同：6
> 
> 时间：2012-06-26T10:29:00.687
> 
> 标签：javascript, node.js, profiling, dtrace

我目前正在分析我的 node.js 应用程序。我发现了这个博客： http: [//blog.nodejs.org/2012/04/25/profiling-node-js/](http://blog.nodejs.org/2012/04/25/profiling-node-js/)建议我应该使用 Dtrace。我使用此处给出的步骤在 ubuntu 12.04 上安装了 dtrace：[https ://askubuntu.com/questions/60940/how-do-i-install-dtrace](https://askubuntu.com/questions/60940/how-do-i-install-dtrace)

但是，当我在节点应用程序运行时在终端中运行此命令时：

```
dtrace -o stacks.out -n 'profile-97/execname == "node" && arg1/{
@[jstack(100, 8000)] = count(); } tick-60s { exit(0); }' 
```

stacks.out 保持空白，除了：CPU ID FUNCTION:NAME 1 387695 :tick-60s

有什么建议可能是错的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T19:29:41.643

Linux DTrace 实现目前还很年轻，并且缺少许多重要功能（并且无论如何都没有准备好用于生产用途）。具体来说，您正在使用的 DTrace 实现（Paul Fox 的）并没有做太多工作来支持用户空间跟踪。因此，您将无法在 Linux 下（现在）执行此操作。

如果您想让它工作，您将需要使用具有更完整 DTrace 实现的操作系统。最好的办法是使用[Illumos](http://wiki.illumos.org)衍生产品之一（例如[OmniOS](http://omnios.omniti.com/)、[SmartOS](http://smartos.org/)或[OpenIndiana](http://openindiana.org/)）。

您应该重新阅读[您链接到的文章](http://blog.nodejs.org/2012/04/25/profiling-node-js/)的“先决条件”部分。它指出您还需要确保使用 32 位 NodeJS，并在编译时打开 DTrace 支持。

（Mac OS X 确实有一个很好的 DTrace 实现，但根据[文章](http://blog.nodejs.org/2012/04/25/profiling-node-js/)，它不支持此示例所需的 ustack 助手。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T20:49:31.167

@psanford 有一个很好的答案，具体涉及您与 DTrace 的问题，但从您的开场白来看，您*想要*的是能够跟踪您的 Node.js 应用程序，而 DTrace 只是如何做到这一点的一个示例。

在这种情况下，[node-inspector](https://github.com/dannycoates/node-inspector)和[v8-profiler](https://github.com/dannycoates/v8-profiler)的组合将为您提供对应用程序的所需内省。但是，我不确定它是否适用于 Node 0.6.x，因为我上次使用它是在 0.4.10 上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-09T16:53:37.463

Oracle[宣布DTrace 在](https://blogs.oracle.com/linux/entry/announcement_dtrace_for_oracle_linux)**Oracle Linux**上可用。[您可以在此处](https://edelivery.oracle.com/linux)下载此发行版。

# c# - Application.Session.Categories.Remove 不会一致地删除类别

> ID：11205382
> 
> 赞同：2
> 
> 时间：2012-06-26T10:29:33.140
> 
> 标签：c#, c#-4.0, interop, outlook, nunit

我正在编写的集成测试有问题。我需要在测试结束时通过删除测试期间添加的 Outlook 中的类别（从可用类别列表中）来执行清理。我对“归档”类别执行以下操作：

```
using Microsoft.Office.Interop.Outlook;

var outlookApplication = new Application();
outlookApplication.Session.Categories.Remove("Filed"); 
```

这未能删除该类别，但并非始终如一。当我调试代码时它可以工作，但在我运行测试时却不行。

**更新：** 这是所有测试代码：

```
[TestFixture]
public class BootstrapperTest
{
    private bool containsFiled;
    private bool containsPending;
    private Application outlookApplication = new Application();

    [Test]
    public void CanCreateFiledCategory()
    {
        var bootstrapper = new Bootstrapper();
        bootstrapper.LoadCategoriesIntoOutlook(outlookApplication); 
        var filedCategoryFound = outlookApplication.Session.Categories.Cast<Category>().Any(category => category.Name == "Filed");
        Assert.That(filedCategoryFound, Is.EqualTo(true));
    }

    [Test]
    public void CanCreatePendingCategory()
    {
        var bootstrapper = new Bootstrapper();
        bootstrapper.LoadCategoriesIntoOutlook(outlookApplication); 
        var pendingCategoryFound = outlookApplication.Session.Categories.Cast<Category>().Any(category => category.Name == "Pending");
        Assert.That(pendingCategoryFound, Is.EqualTo(true));
    }

    [SetUp]
    public void Setup()
    {
        containsFiled = DoesCategoryNameExist(outlookApplication.Session.Categories, "Filed");
        containsPending = DoesCategoryNameExist(outlookApplication.Session.Categories, "Pending");
    }

    [TearDown]
    public void TearDown()
    {
        RemoveAllCategoriesFromOutlook();
    }

    private bool DoesCategoryNameExist(Categories categoryList, string categoryName)
    {
        return categoryList.Cast<Category>().Any(category => category.Name == categoryName);
    }

    private void RemoveAllCategoriesFromOutlook()
    {
        var containsFiledNow = DoesCategoryNameExist(outlookApplication.Session.Categories, "Filed");
        var containsPendingNow = DoesCategoryNameExist(outlookApplication.Session.Categories, "Pending");
        if (!containsFiled && containsFiledNow) outlookApplication.Session.Categories.Remove("Filed");
        if (!containsPending && containsPendingNow) outlookApplication.Session.Categories.Remove("Pending");
    }
} 
```

以及它正在测试的方法：

```
public void LoadCategoriesIntoOutlook(Application outlookApplication)
{
    var categories = outlookApplication.Session.Categories;

    var filedCategoryNameExists = DoesCategoryNameAlreadyExist(categories, FiledCategoryName);
    var pendingCategoryNameExists = DoesCategoryNameAlreadyExist(categories, PendingCategoryName);
    var filedCategoryColourIsUsed = IsCategoryColorAlreadyUsed(categories, FiledCategoryColor);
    var pendingCategoryColourIsUsed = IsCategoryColorAlreadyUsed(categories, PendingCategoryColor);

    if (!filedCategoryNameExists)
    {
        if (filedCategoryColourIsUsed)
        {
            var categoryToBeChangedToFiled =
                    categories.Cast<Category>()
                              .Where(category => category.Color == FiledCategoryColor)
                              .FirstOrDefault();
            categoryToBeChangedToFiled.Name = FiledCategoryName;
        }
        else
        {
            categories.Add(FiledCategoryName, FiledCategoryColor);
        }
    }

    if (!pendingCategoryNameExists)
    {
        if (pendingCategoryColourIsUsed)
        {
            var categoryToBeChangedToPending =
                   categories.Cast<Category>()
                             .Where(category => category.Color == PendingCategoryColor)
                             .FirstOrDefault();
            categoryToBeChangedToPending.Name = PendingCategoryName;
        }
        else
        {
            categories.Add(PendingCategoryName, PendingCategoryColor);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:35:22.700

您应该记录是否`Categories.Remove`甚至调用（*通过`Trace.TraceInformation()`*）以查看在非调试模式下运行时分支条件是否存在错误。`Categories.Remove`确实可以可靠地工作，这一定是您的状况有误。如果是这样，您将看不到日志记录语句。

```
private void RemoveAllCategoriesFromOutlook()
{
        var containsFiledNow = DoesCategoryNameExist(outlookApplication.Session.Categories, "Filed");
        var containsPendingNow = DoesCategoryNameExist(outlookApplication.Session.Categories, "Pending");
        if (!containsFiled && containsFiledNow) 
        {
            outlookApplication.Session.Categories.Remove("Filed");
            Trace.TraceInformation("Deleted Filed Category!")
        }
        if (!containsPending && containsPendingNow) 
        {
            outlookApplication.Session.Categories.Remove("Pending");
            Trace.TraceInformation("Deleted Pending Category!")
        }
} 
```

此外，由于您`Categories`基于颜色（*请参阅`filedCategoryColourIsUsed`*）创建，`containsFiled`因此可能返回 FALSE，即使您是通过重命名（`Category.Name = "Filed"`）而不是通过`Categories.Add()`. 您的问题是在测试夹具`DoesCategoryNameExist`期间不考虑类别颜色。[`Setup`](http://www.nunit.org/index.php?p=setup&r=2.4)下面的`Setup()`代码应该可以解决这个问题......

```
[SetUp]
public void Setup()
{
    containsFiled = DoesCategoryNameExist(outlookApplication.Session.Categories, "Filed") || IsCategoryColorAlreadyUsed(categories, FiledCategoryColor);
    containsPending = DoesCategoryNameExist(outlookApplication.Session.Categories, "Pending") || IsCategoryColorAlreadyUsed(categories, PendingCategoryColor);
} 
```

# objective-c - 如何在动画 CABasicAnimation 时改变速度

> ID：11205383
> 
> 赞同：6
> 
> 时间：2012-06-26T10:29:33.440
> 
> 标签：objective-c, ios, cocoa-touch, ipad, cabasicanimation

在我的应用程序中，我使用 CABasicAnimation 制作动画。我想动态改变动画的速度，所以我添加了一个滑块来改变速度。以下是我的动画代码。但是我无法改变速度，当我改变速度的值时没有任何反应。

```
 CABasicAnimation * a = [CABasicAnimation animationWithKeyPath:@"position"];
    [a setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear]];

    CGPoint startPt = CGPointMake(self.view.bounds.size.width + displayLabel.bounds.size.width / 2,
                                  displayLabel.frame.origin.y);
    CGPoint endPt = CGPointMake(displayLabel.bounds.size.width / -2, displayLabel.frame.origin.y);

    [a setFromValue:[NSValue valueWithCGPoint:startPt]];
    [a setToValue:[NSValue valueWithCGPoint:endPt]];
    [a setAutoreverses:NO];
    [a setDuration:speeds];
    [a setRepeatCount:HUGE_VAL];
    [displayLabel.layer addAnimation:a forKey:@"rotationAnimation"];

    - (IBAction)speedSlider:(id)sender {

         speeds = slider.value;

   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-01-08T07:36:08.173

我认为改变速度的最好方法是改变你层的时间系统

```
displayLabel.layer.timeOffset =
     [displayLabel.layer convertTime:CACurrentMediaTime() fromLayer:nil]; 
displayLabel.layer.beginTime = CACurrentMediaTime(); 
displayLabel.layer.speed= slider.value; 
```

你可以提前看到这个。[https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW2](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:32:52.287

编辑：看起来你会有一个进一步的问题：[看起来](http://lists.apple.com/archives/cocoa-dev/2010/Nov/msg00860.html)你不能像在运行动画上那样改变值。您必须删除当前动画并添加一个具有更改值的新动画。当您添加新动画时，这可能需要小心以防止产生不和谐的效果。

从上面的线程中，您可以通过不重复动画来做到这一点，而是使用委托（[参见此处](http://lists.apple.com/archives/cocoa-dev/2010/Nov/msg00862.html)）继续重新添加动画，并为下一个动画周期设置新速度。

原帖：

您正在更改最初传递给动画的值。这不会影响正在运行的动画。您需要获取对它的引用，并更改动画对象的持续时间属性。在您的操作方法中是这样的：

```
CABasicAnimation *a = [displayLabel.layer animationForKey:@"rotationAnimation"];
a.duration = slider.value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T12:04:36.077

我认为 jrturton 是正确的，您不能更改已经运行的动画的属性。但是您可以做的是将动画分成短段，并在滑块值更改时更改下一段的速度。

不是从 A 点动画到 D 点，而是从 AB 动画，然后是 BC，然后是 CD。使用父类的 animationDidStop 检查当前点，检查滑块值，并开始下一个动画。

这可能会产生不平稳的运动，但如果您使用非常小的片段，您也许可以将其平滑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-12T08:27:26.777

你应该停止动画并以新的持续时间重新开始

但请记住记录 fromValue 和 toValue ，并使用旧的 toValue 作为新的 fromValue 来执行无缝更改

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T12:52:57.630

如果您只想要自动滚动文本，那么您也可以使用一类

[http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)

它也可能适用于你的情况，试试吧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T11:10:25.820

将速度设置为您需要的速度。

```
 a.duration=0.5; 
```

尝试这个...

# python - 使用 BeautifulSoup 根据 name 属性获取属性值

> ID：11205386
> 
> 赞同：112
> 
> 时间：2012-06-26T10:29:43.480
> 
> 标签：python, beautifulsoup

我想根据其名称打印属性值，例如

```
<META NAME="City" content="Austin"> 
```

我想做这样的事情

```
soup = BeautifulSoup(f)  # f is some HTML containing the above meta tag
for meta_tag in soup("meta"):
    if meta_tag["name"] == "City":
        print(meta_tag["content"]) 
```

上面的代码给出了一个`KeyError: 'name'`，我相信这是因为 name 被 BeatifulSoup 使用，所以它不能用作关键字参数。

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-06-26T10:51:26.533

这很简单，使用以下 -

```
>>> from bs4 import BeautifulSoup
>>> soup = BeautifulSoup('<META NAME="City" content="Austin">')
>>> soup.find("meta", {"name":"City"})
<meta name="City" content="Austin" />
>>> soup.find("meta", {"name":"City"})['content']
u'Austin' 
```

如果有任何不清楚的地方，请发表评论。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-03-12T17:56:56.417

*theharshest*回答了这个问题，但这是做同样事情的另一种方法。此外，在您的示例中，您的 NAME 大写，而在您的代码中，您的名称为小写。

```
s = '<div class="question" id="get attrs" name="python" x="something">Hello World</div>'
soup = BeautifulSoup(s)

attributes_dictionary = soup.find('div').attrs
print attributes_dictionary
# prints: {'id': 'get attrs', 'x': 'something', 'class': ['question'], 'name': 'python'}

print attributes_dictionary['class'][0]
# prints: question

print soup.find('div').get_text()
# prints: Hello World 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-04-10T15:53:15.757

派对迟到了 6 年，但我一直在寻找如何提取**html 元素的标签** *属性值*，因此：

```
<span property="addressLocality">Ayr</span> 
```

我想要“地址位置”。我一直被引导回到这里，但答案并没有真正解决我的问题。

我最终是如何做到的：

```
>>> from bs4 import BeautifulSoup as bs

>>> soup = bs('<span property="addressLocality">Ayr</span>', 'html.parser')
>>> my_attributes = soup.find().attrs
>>> my_attributes
{u'property': u'addressLocality'} 
```

因为它是一个字典，所以你也可以使用`keys`and 'values'

```
>>> my_attributes.keys()
[u'property']
>>> my_attributes.values()
[u'addressLocality'] 
```

希望它可以帮助别人！

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-26T12:18:24.797

theharshest 的答案是最好的解决方案，但仅供参考，您遇到的问题与 Beautiful Soup 中的 Tag 对象就像 Python 字典的事实有关。如果您在没有 'name' 属性的标签上访问 tag['name']，则会收到 KeyError。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-03-23T20:40:16.377

以下作品：

```
from bs4 import BeautifulSoup

soup = BeautifulSoup('<META NAME="City" content="Austin">', 'html.parser')

metas = soup.find_all("meta")

for meta in metas:
    print meta.attrs['content'], meta.attrs['name'] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-20T05:38:11.177

也可以尝试此解决方案：

查找值，该值写入表的范围内

**html内容**

* * *

```
<table>
    <tr>
        <th>
            ID
        </th>
        <th>
            Name
        </th>
    </tr>

    <tr>
        <td>
            <span name="spanId" class="spanclass">ID123</span>
        </td>

        <td>
            <span>Bonny</span>
        </td>
    </tr>
</table> 
```

**Python代码**

* * *

```
soup = BeautifulSoup(htmlContent, "lxml")
soup.prettify()

tables = soup.find_all("table")

for table in tables:
   storeValueRows = table.find_all("tr")
   thValue = storeValueRows[0].find_all("th")[0].string

   if (thValue == "ID"): # with this condition I am verifying that this html is correct, that I wanted.
      value = storeValueRows[1].find_all("span")[0].string
      value = value.strip()

      # storeValueRows[1] will represent <tr> tag of table located at first index and find_all("span")[0] will give me <span> tag and '.string' will give me value

      # value.strip() - will remove space from start and end of the string.

     # find using attribute :

     value = storeValueRows[1].find("span", {"name":"spanId"})['class']
     print value
     # this will print spanclass 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-06-17T16:40:41.643

```
If tdd='<td class="abc"> 75</td>'
In Beautifulsoup 

if(tdd.has_attr('class')):
   print(tdd.attrs['class'][0])

Result:  abc 
```

# c - 如何后修改 C 指针？

> ID：11205388
> 
> 赞同：9
> 
> 时间：2012-06-26T10:29:52.593
> 
> 标签：c, pointers, gcc

在现代处理器中，可以从内存中加载一个寄存器，然后将索引指针修改为所需的值。例如，在我们的嵌入式处理器中，这将通过以下方式完成：

```
ldr r0, [r1], +12 
```

这意味着 - 将 r1 指向的值加载到 r0 中，然后将 r1 增加 12：

```
r0 = [r1]
r1 = r1 + 12 
```

在 C 语言中，使用指针算法，可以使用指针赋值，然后将指针前移 1：

```
char i, *p, a[3]={10, 20, 30};

p = &(a[0]);
i = *p++;
// now i==10 and p==&(a[1]). 
```

我正在寻找一种方法来取消引用指针，同时通过一个非 1 的偏移量对其进行后期修改。这在 C 中是否可行，所以它可以很好地映射到类似的 asm 指令？

注意：

```
i = *p+=2; 
```

在不修改指针的情况下增加 a[0] 中的值，并且：

```
i = *(p+=2); 
```

预修改指针，所以在这种情况下`i==30`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T14:45:01.373

1.  **是的，这是可能的。**

2.  **你不应该做奇怪的指针数学来实现它。**

3.  不仅是关于优化设置，**你的 GCC 后端需要*告诉*GCC 它有这样的特性**（即当 GCC 本身被编译时）。基于这些知识，GCC 自动将相关序列组合成一条指令。

即如果你的后端写得对，甚至是这样的：

```
 a = *ptr;
 ptr += SOME_CONST; 
```

应该成为一个单一的修改后指令。

**编写后端时如何正确设置？**（请您友好的邻居 GCC 后端开发人员为您做这件事）：

如果您的 GCC 后端被调用`foo`：

1.  在 GCC 源代码树中，后端描述和挂钩将位于`gcc/config/foo/`.
2.  在那里的文件（与 GCC 一起编译）中，通常有一个标题`foo.h`，其中包含许多`#defines`描述机器特性的文件。
3.  GCC 期望支持后增量的后端将宏定义`HAVE_POST_INCREMENT`为真，如果它支持后修改，则将宏定义`HAVE_POST_MODIFY_DISP`为真。（后增量 => `ptr++`，后修改 => `ptr += CONST`）。也许还有一些其他的事情需要处理。

假设您的处理器的后端已经做到了这一点，让我们来**看看当您编译**包含所述修改后序列的代码时会发生什么：

*有一个特定的 GCC 优化过程*通过属于此类别的指令对并将它们组合起来。该通行证的来源是[这里](http://gcc.gnu.org/viewcvs/trunk/gcc/auto-inc-dec.c?view=markup)，并且对 GCC 将做什么以及如何让它去做有一个相当清晰的描述。

*但最终，这不是您作为 GCC 用户的控制范围。它由编写 GCC 后端的开发人员控制。正如最受好评的评论所说，您应该做的就是：*

```
 a = *ptr;
 ptr += SOME_CONST; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:56:20.743

你可以这样做，但不要这样做：

```
i = *((p += 2) - 2); 
```

（不完全是后期修改）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:59:54.090

我能想到的最接近的：

```
#define POST_INDEX_ASSIGN(lhs, ptr, index)  (lhs = *(ptr), (ptr) += (index))

POST_INDEX_ASSIGN(i, p, 2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T13:53:42.637

```
i = *p; 
p = (unsigned char*)p + 12; 
```

其中 i 是任何类型，p 是指向该类型的指针。

如果您不添加类型转换，则指针增量将使用 size == 逐步完成`sizeof(*p)`，这将使代码与发布的汇编程序完全不同。

例如，如果 p`int*`在 32 位系统上是 an，则指针将在没有类型转换的情况下增加 4*12 字节。

# wix - WiX 引导程序的示例应用程序（检查 .NET Framework 和 SQL Server 2005/2008）

> ID：11205390
> 
> 赞同：0
> 
> 时间：2012-06-26T10:30:08.967
> 
> 标签：wix, wix3.6

什么是[WiX](http://en.wikipedia.org/wiki/WiX)引导程序示例？

我正在使用 Visual Studio 2010 和 WiX 3.6 Beta。

我想进行设置以检查先决条件[.NET Framework](http://en.wikipedia.org/wiki/.NET_Framework) 4 和[SQL Server](http://en.wikipedia.org/wiki/Microsoft_SQL_Server)（任何版本）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:50:50.020

这里有一个非常简单的例子[http://wix.sourceforge.net/manual-wix3/install_dotnet.htm](http://wix.sourceforge.net/manual-wix3/install_dotnet.htm)

# ios - 在 mapview (iOS) 上动画精灵

> ID：11205397
> 
> 赞同：0
> 
> 时间：2012-06-26T10:30:59.447
> 
> 标签：ios, annotations, mapkit

我正在开发一个应用程序，它将显示火车在任何给定时间的位置。它将从火车接收 gpx 数据以获取其位置。

有没有办法让精灵沿着地图视图中的限制线移动？在我的例子中，一列火车沿着火车路线行驶。

我已将火车路线绘制为叠加层中的折线，而火车是注释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T12:05:57.023

我最终制作了一个可见的叠加层，然后用相同的坐标制作了一个单独的数组。

为了模拟运动，MKAnnotations 在迭代数组时使用了“setCoordinate”，这实际上与叠加层相同。

这使得注释看起来像是移动到了受限制的叠加层之上。

# cakephp - 在自定义验证规则中访问模型数据

> ID：11205398
> 
> 赞同：0
> 
> 时间：2012-06-26T10:31:00.580
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

我有自定义验证规则：

```
public function customRule($check)
{

} 
```

在此规则中，我想访问一些模型数据（在数据库中）。当然我可以这样做：

```
$this->id = 23; 
$this->read(); 
```

但是当前模型中的所有数据都将被`read`函数覆盖（我的意思`$this->data[$this->alias][...]`是被覆盖。

我怎样才能得到这些数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:54:23.760

使用常规

```
$result = $this->find('first', array('conditions' => array($this->alias . '.' . $this->primaryKey => $id)); 
```

在查找条件中使用 id。并使用结果，它不会覆盖数据属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T09:50:06.547

请注意，如果您想获取**当前正在验证的数据的完整记录，**则始终可以在`$this->data`验证规则中访问它，而不是 $check 仅包含**当前验证字段**中的数据。

如果您需要根据存储在数据库中的内容进行验证，您可以使用`$this->find()`模型中的任何功能，就像您在模型中一样。

我支持@burzum 的回答+1。

# jquery - 我想做一个精美的盒子

> ID：11205399
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:31:17.623
> 
> 标签：jquery, html, css, fancybox

我想做一个精美的盒子。

每当我点击小图像时，就会打开一个带有右侧大图像和左侧图像描述的精美框。

我已经尝试了很多例子，但我还没有成功。

建议我任何我想要的链接或fancybox相关的网站帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:13:47.167

试试这个： http: [//fancybox.net/](http://fancybox.net/)

# jquery-mobile - 将页面加载到 div jQuery Mobile

> ID：11205400
> 
> 赞同：4
> 
> 时间：2012-06-26T10:31:20.140
> 
> 标签：jquery-mobile

我想通过单击 jQuery Mobile 中的按钮为 div 容器加载另一个文件夹中的页面内容（例如：“files/pages/example.html”）！

怎么做？

```
<div data-role="page">
     <div id="container" data-role="content"><button id="clickButton">Click me!</button></div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:42:05.490

**$.mobile.loadPage**是您需要的方法。它允许您加载外部 html 文件并将其插入到 dom 中。此方法的默认设置是将其作为整个页面加载，因此您必须指定将其加载到 dom 元素中的选项。这是一个示例（未经测试）代码：

```
$('#clickButton').on("click",function(){
  $.mobile.loadPage("theURLofThePage",{pageContainer: $('#container')})
}); 
```

现在，不要忘记跨域安全问题。我设法通过添加以下内容在 Firefox 中完成这项工作：

```
$("#landingPage").live('pageinit', function() {
            jQuery.support.cors = true;
            $.mobile.allowCrossDomainPages=true;
        }); 
```

此外，您正在加载的页面必须包含在**data-role=page** div 中（假设它具有 id='secondPage'）。加载后，在**id=secondPage** div的**data-role=page**上触发：

 **```
$('#secondPage").trigger('pagecreate'); 
```**

# php - Magento 前端销售报告

> ID：11205403
> 
> 赞同：1
> 
> 时间：2012-06-26T10:31:30.030
> 
> 标签：php, zend-framework, magento

我正在开发一个内置于 Magento 的 B2B 网站，这与普通的 Magento 项目略有不同。

他们想把一些后端信息拉到前端。

所有查看该站点的公司个人，在查看前端站点之前登录，因此我可以设置角色/处理权限。

是否可以打印（在店面），我想所有信息都在后端只需要拉出来：

*   该产品已售出的数量
*   列出该产品的所有订单的页面，例如产品 1，在产品视图上有一个标题为“查看所有订单”的链接，它显示了该产品的所有订单，显示：
*   数量
*   用户邮箱
*   客户群

有没有人做过类似的事情或传递建议/疑虑。

谢谢

--

卡梅伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T13:27:00.390

我看到实现这一目标的方法之一是使用 Magento API

```
$model = Mage::getModel('catalog/product');
        $product_id = $model->load($productid);  

        $filters = array(
            'state'   => array('eq' => 'complete')
        );

        $orders = Mage::getModel('sales/order_api_v2')->items($filters); 
```

然而，问题在于 Magento 没有读取过滤器。

非常感谢帮助

# package - Nuget、源转换和 AssemblyInfo.cs

> ID：11205405
> 
> 赞同：2
> 
> 时间：2012-06-26T10:31:37.527
> 
> 标签：package, nuget, transformation, assemblyinfo

我目前正在开发一个 NuGet 包，它需要在 AssemblyInfo.cs 中配置一些东西。我已在 /content/Properties 中的包中添加了一个 AssemblyInfo.cs.pp 文件，但未执行转换。这不可能吗？

AssemblyInfo.cs.pp 的内容

```
using Client.Logging.Aspects;
using PostSharp.Extensibility;

[assembly: ProfileAspect(
   AttributeTargetTypes = "$id$*",
   AttributeTargetElements = MulticastTargets.Method,
   AttributeTargetMemberAttributes = MulticastAttributes.Public
 )] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:49:09.637

显然不可能 - [http://nuget.codeplex.com/discussions/360970](http://nuget.codeplex.com/discussions/360970)

# iphone - 如果出现键盘，UITableViewController 将不会滚动

> ID：11205406
> 
> 赞同：1
> 
> 时间：2012-06-26T10:31:38.893
> 
> 标签：iphone, ios, xcode, storyboard, uitableview

我有一些带有静态单元格和一些文本字段的 TableViewController。几天前，一切正常，TableViewController 管理“如果出现键盘，则滚动到单元格”、contentOffset 等，我不必使用`[self.tableView scrollToRowAtIndexPath:...]`或其他东西。

但是今天我注意到 Table 不会设置 contentOffset 和滚动。我不知道我改变了什么或在哪里导致了这种行为，我只是添加了一些标签并改变了起源。

那么，如果出现键盘，如何激活/停用自动滚动到单元格？

或者也许故事板文件坏了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:21:09.983

我发现了问题。

我添加了`viewWillDisappear`，但没有`[super viewWillDisappear:animated];`TableViewController 将不会滚动等。

# c++ - pthread_create 因 EAGAIN 失败 - 但仅在某个函数上

> ID：11205408
> 
> 赞同：1
> 
> 时间：2012-06-26T10:31:44.003
> 
> 标签：c++, pthreads

我有许多类在我的程序中注册了通知类。在特定的传入事件上，通知程序调用`update()`每个类中的一个函数。在其中两个被调用者中，我现在试图生成一个小的帮助线程，它将等待几秒钟，然后初始化一些外部硬件并返回。

辅助线程是使用该`PTHREAD_CREATE_DETACHED`属性创建的，因此我可以避免加入它们。

这适用于其中一个线程（从 class1 产生），但在另一个线程（来自 class2）中`pthread_create()`失败。`EAGAIN`根据`pthread_create()`文档，如果应用程序资源不足，就会发生这种情况。但是，如果我提供另一个传入事件，线程 1 可以再次创建它的辅助线程 - 而线程 2 仍然失败并出现相同的错误 - 我可以继续这样做并得到相同的结果。

我使用的代码在两个类中是相同的：

```
class class1_2 {
  public:
    void update();
  private:
    static void *init(void *self);
    pthread_t initThread;
    pthread_attr_t initThreadAttr;
}

void class1_2::update()
{
  printf("Class%d update()\n", classNumber);
  pthread_attr_setdetachstate(&initThreadAttr, PTHREAD_CREATE_DETACHED);
  int retval = pthread_create(&initThread, &initThreadAttr, init, this);
  printf("Class%d thread created = %d\n", classNumber, retval);
}

void *class1_2::init(void *self)
{
  printf("Class%d init()\n", self->classNumber);
  //wait 3 seconds, then do stuff (~1 additional second)
  return;
} 
```

在 gdb 中，我得到以下输出：

```
<incoming event>

Class1 update()
[New thread 1]
Class1 thread created=0

Class2 update()
Class2 thread created=11 (EAGAIN)

Class1 init()
[Thread 1 exited]

<incoming event>

Class1 update()
[New thread 2]
Class1 thread created=0

Class2 update()
Class2 thread created=11 (EAGAIN)

Class1 init()
[Thread 2 exited]

(...and so it goes on) 
```

我尝试在 class1 中注释掉线程创建（有效） - 但 class2 仍然失败，促使我认为类之间存在细微差别。但是，两个类中显示的代码是相同的，所以如果有人知道其他变量/函数/等可能会产生影响，或者可能会发生什么，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:03:51.970

出于代表妓女的目的，我会将我的评论推广到答案以防万一；）

确保在调用`pthread_attr_init`之前调用以初始化属性对象`pthread_attr_setdetachstate`，并且不要忘记再次销毁属性：

```
 void class1_2::update()
{
  printf("Class%d update()\n", classNumber);
 **pthread_attr_init(&initThreadAttr);**
  pthread_attr_setdetachstate(&initThreadAttr, PTHREAD_CREATE_DETACHED);
  int retval = pthread_create(&initThread, &initThreadAttr, init, this);
  printf("Class%d thread created = %d\n", classNumber, retval);
 **pthread_attr_destroy(&initThreadAttr);**
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:16:55.117

经过一番修修补补，我得到了它的工作。我没有在分离状态下创建线程，而是在使用`pthread_detach()`.

因此，我`update()`的已更改为：

```
void class1_2::update()
{
  printf("Class%d update()\n", classNumber);
  int retval = pthread_create(&initThread, &initThreadAttr, init, this);
  printf("Class%d thread created = %d\n", classNumber, retval);
  retval = pthread_detach(initThread);
  printf("Class%d thread detached = %d\n", classNumber, retval);
} 
```

如果有人经历过类似的事情，或者可以对此有所了解，我仍然很感兴趣。

# php - 将“图像另存为”链接到不同的图像？

> ID：11205409
> 
> 赞同：1
> 
> 时间：2012-06-26T10:31:49.513
> 
> 标签：php, javascript, html

我正在尝试保护带有水印的图像，但我不想在带有水印的网站上显示图像。我创建了一个动态地为图像添加水印的 php 脚本，但这是我想做的：

我希望每当有人右键单击并按“另存为”显示在我的网站上的图像时，它会链接到带有水印的不同图像。那可能吗？我应该以另一种方式解决这个问题吗？

非常感谢任何正确方向的回应。

下面是一个例子：[http://fatpita.net/?i=14453](http://fatpita.net/?i=14453) 当你保存这个图像时，保存的图像是水印的，但网站的图像不是......我认为他们实际上只是掩盖了网站上的水印。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:36:37.913

您试图以安全的方式实现的目标是不可能的。

如果浏览器获得无水印文件，用户可以保存该文件——可能不使用“将图像另存为”，而是通过 Firefox 的“包含完整媒体列表的页面信息对话框”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:36:46.003

你不能做任何用户不能伪造的事情。您提到的网站也没有 - 水印始终存在。

查看实际来源：

```
<div style="position:relative;width:768px;margin:9px auto 0;">
    <a href="http://fatpita.net/?i=4011" id="image">
        click on the image for another random funny picture<br>
        <img src="images/image (14453).jpg?4011">
    </a>
    <div id="jpgCover">
    </div>
</div> 
```

它们实际上覆盖了 HTML 中的水印。它仍然在那里，但有一个`div`障碍确保你看不到它。

请记住，用户始终可以通过简单的裁剪来删除此水印。

# opencv - opencv中的内存不足错误

> ID：11205410
> 
> 赞同：2
> 
> 时间：2012-06-26T10:31:50.613
> 
> 标签：opencv, out-of-memory

我正在尝试从视频的帧中制作训练数据集。

对于每个新帧，我都会找到特征向量（大小为`3300X1`）并与旧特征向量**连接**以制作训练数据集。但是在阅读了 2000 帧之后，我得到了低于指定的错误。

我在第二行的下面提到的代码中遇到错误，即

```
 cv::Mat frameFV = getFeatureVectorFromGivenImage(curFrame, width, height);
   cv::hconcat(trainingDataPerEmotion, frameFV, trainingDataPerEmotion); 
```

在出现错误时，大小`cv::Mat trainingDataPerEmotion`为`3300X2000(nearly)`

我正在使用发布旧视频

```
cvReleaseCapture(&capture); 
```

在处理新视频之前。错误是

```
OpenCV Error: Insufficient memory (Failed to allocate 3686404 bytes) in OutOfMemoryError, file /home/naresh/OpenCV-2.4.0/modules/core/src/alloc.cpp, line 52
terminate called after throwing an instance of 'cv::Exception'
  what():  /home/mario/OpenCV-2.4.0/modules/core/src/alloc.cpp:52: error: (-4) Failed to allocate 3686404 bytes in function OutOfMemoryError 
```

任何人都可以建议我如何解决这个问题，我必须保存大量的训练数据来训练我的系统。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T16:34:24.367

首先检查您是否有一些内存泄漏。据我记得，当发生一些分配问题时，实际上会引发 OpenCV OutOfMemory 错误。

如果您仍然无法弄清楚一些内存泄漏并找到案例，则必须提供更多代码。最好的是允许重现错误的代码。

# winforms - 如何在 Windows 中设置 msi 文件期间安装驱动程序

> ID：11205420
> 
> 赞同：1
> 
> 时间：2012-06-26T10:32:22.777
> 
> 标签：winforms, windows-installer, installation

我正在开发一个项目，它需要创建一个安装文件（.msi），在我安装 Windows 应用程序期间安装需要第三方驱动程序。

让我举例说明。我的应用程序安装文件 - “mysetup.msi” 其他第三方安装文件 - “installer.ini”

mysetup.msi 是否有可能自动为第三方执行设置，所以我的最终用户不需要担心第三方安装来使用我的软件？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T11:49:08.710

如果您要安装驱动程序，最好的办法是使用 DifXApp，即驱动程序安装框架的 MSI 版本。Wix 和 InstallShield 开箱即用。

# android - Android布局匹配根父级

> ID：11205422
> 
> 赞同：0
> 
> 时间：2012-06-26T10:32:47.797
> 
> 标签：android, layout, fullscreen

如何使布局“几乎全屏”？我的意思是我不想要那个图标和应用程序名称（“测试”）。我只想显示带有电池和信号状态的顶部区域，并且能够在屏幕的其余部分绘制我想要的任何内容

图片来自 Eclipse“图形布局”3.2 英寸 HVGA 滑块 (ADP1) - 纵向

![布局](../Images/47f01b0012fb505bb04627e12815709e.png)

我试图让我的布局填充父项并删除其他所有内容，但该图标和文本仍然存在

**布局xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     android:background="#131325" 
     >    
 </RelativeLayout> 
```

**清单 xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="myTests.homeSpace"
     android:versionCode="1"
     android:versionName="1.0" >

     <uses-sdk android:minSdkVersion="15" />
     <application
         android:icon="@drawable/ic_launcher"
         android:label="@string/app_name" >
         <activity
             android:name=".TestsActivity"
             android:label="@string/app_name" >
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />

                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>

         <activity
             android:name=".screen1" >
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>
     </application>
 </manifest> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:35:33.803

要删除图像和标题，您必须在`Theme`您的`AndroidManifest.xml`-

```
<?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="myTests.homeSpace"
     android:versionCode="1"
     android:versionName="1.0" >

     <uses-sdk android:minSdkVersion="15" />
     <application
         android:icon="@drawable/ic_launcher" android:theme="@android:style/Theme.NoTitleBar"
         android:label="@string/app_name" >
         <activity
             android:name=".TestsActivity" android:theme="@android:style/Theme.NoTitleBar"
             android:label="@string/app_name" >
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />

                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>

         <activity
             android:name=".screen1" android:theme="@android:style/Theme.NoTitleBar">
             <intent-filter>
                 <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
         </activity>
     </application>
 </manifest> 
```

看看[Theme_NoTitleBar](http://developer.android.com/reference/android/R.style.html#Theme_NoTitleBar)您也可以使用以下代码以编程方式执行此操作。

```
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
} 
```

你必须`requestWindowFeature(Window.FEATURE_NO_TITLE);`在调用`setContentView(R.layout.main);`唯一之前使用。如果您想将它用于所有活动，那么您必须在`setContentView(R.layout.main);`方法之前给每个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:40:01.653

或者在java中

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);//<----------- 
```

# javascript - 动画正在进行时在同一元素上触发 jquery 动画

> ID：11205423
> 
> 赞同：0
> 
> 时间：2012-06-26T10:32:50.050
> 
> 标签：javascript, jquery, css, html

我有 2 个带有这些代码的按钮：

```
$('#btn1').on('click',function() {
   $('#div1').animate({left:500},1000);
});

$('#btn2').on('click',function() {
   $('#div1').animate({left:0},1000);
}); 
```

我希望能够在 btn1 的事件仍在进行时触发 btn2 的事件。例如，当我快速单击两个按钮时，当前发生的情况是，我单击 btn1，div 在实际触发 btn2 事件之前完成 left:500。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:35:35.417

您想要[`.stop()`](http://api.jquery.com/stop/)在触发新动画之前完成所有动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:38:47.923

您必须使用 stop() 函数来完成此操作。像这样设计两个事件处理程序：

```
$('#btn1').on('click',function() {
  $('#div1').stop().animate({left:500},1000);
});

$('#btn2').on('click',function() {
  $('#div1').stop()animate({left:0},1000);
}); 
```

如果当前正在制作动画，这将停止 div 并在其上启动新动画。

# mysql - 使用 mysql 按标签名称选择查看次数最多的项目

> ID：11205424
> 
> 赞同：0
> 
> 时间：2012-06-26T10:32:52.480
> 
> 标签：mysql, select, union

我有 2 张桌子：`items`和`items_purchased`. `tag`名称和其他描述性信息在表`items`中，每个项目的购买次数保存在`items_purchased`表中。这些表是`JOIN`在 item_id 上编辑的。

到目前为止，这是我的查询：

```
(select *, sum(purchaseyesno) as tots from items join items_purchased on items.item_id=items_purchased.item_id where tag = 'History' and deleted!=1 and pub_priv!=1    order by tots desc limit 1)
UNION ALL
(select *, sum(purchaseyesno) as tots from items join items_purchased on items.item_id=items_purchased.item_id where tag = 'Medicine' and deleted!=1 and pub_priv!=1  order by tots desc limit 1)
UNION ALL
(select *, sum(purchaseyesno) as tots from items join items_purchased on items.item_id=items_purchased.item_id where tag = 'Biology' and deleted!=1 and pub_priv!=1  order by tots desc limit 1)
//... more tags (20 in all) would follow 
```

问题是尚未购买带有某些标签的商品，因此查询会抛出`Column "item_id" cannot be null`.

这是示例表：

```
 items              |     items_purchased   |   
  item_id   tag      title     | item_id  purchaseyesno|
    1     Biology  DNA is cool |    1         1        | 
    2     Medicine  Doctors    |    2         1        |  
    3      Law    Laws are cool|    4         1        |    
    4     Biology DNA NOT cool |    1         1        | 
```

样本结果：

```
item_id   tag       title      tots
  1      Biology   DNA is cool  2
  2      Medicine  Doctors      1
  3       Law   Laws are cool   0 
```

2个问题：

1.  如果结果是这样，我该如何排除这些`SELECT`语句之一`NULL`？
2.  有没有更好的方法来执行此查询，而不是 20 条选择语句由 19`UNION ALL`秒连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:54:00.060

你只是想对你的结果进行分组——没有比这更复杂的了（`UNION`看不到！）：

```
SELECT   items.*, SUM(purchaseyesno) AS tots
FROM     items JOIN items_purchased USING (item_id)
GROUP BY item_id 
```

* * *

**更新**

[在下面的评论和对 OP 问题的更新之后，很明显这个问题比最初想象的要复杂得多：事实上，它是分组最大](http://dev.mysql.com/doc/en/example-maximum-column-group-row.html)问题的一个特例。

但是，必须取最大值的列本身就是另一个分组聚合的结果（ 的总和`purchaseyesno`）。

因此，一个人的查询对于子查询变得相当不优雅：

```
SELECT *
FROM (
  SELECT   items.*, IFNULL(SUM(purchaseyesno),0) AS tots
  FROM     items LEFT JOIN items_purchased ON folder_id = item_id
  GROUP BY item_id
) AS t NATURAL JOIN (
  SELECT tag, MAX(tots) AS tots
  FROM (
    SELECT   items.*, IFNULL(SUM(purchaseyesno),0) AS tots
    FROM     items LEFT JOIN items_purchased ON folder_id = item_id
    GROUP BY item_id
  ) AS u
  GROUP BY tag
) AS v
GROUP BY tag 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ad7f5/2)上查看。

这里发生的情况是（使用[外连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)来包含表`Law`中没有引用的记录`items_purchased`），我们获取每个项目（物化表`u`）的购买总和，然后确定相同项目的最大购买数量标签名称。

然后，我们将结果（物化表）与标签名称和购买次数的`v`第一个表（`u`再次物化为表）连接起来。`t`

最后，我们再次对结果进行分组，`tag`以确保如果具有相同标签的多个项目具有相同的最大购买次数，则仅不确定返回其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:44:41.073

创建一个主表 tags ，并将其 id 存储在用作名称的表中。那么下面的查询将是您问题的解决方案..

```
select *, sum(purchaseyesno) as tots 
from items left join 
items_purchased ip on (items.item_id=items_purchased.item_id)
inner join tag_table on (tag_table.id=tagId)
where  deleted!=1 and pub_priv!=1 and not items.item_id is null group by tagID 
```

# bash - 使用 SED、AWK 或 GREP 检查多个文件中第一个字符的出现

> ID：11205427
> 
> 赞同：1
> 
> 时间：2012-06-26T10:33:10.007
> 
> 标签：bash, shell, sed, awk, grep

假设我有这样的文件：

```
 a  void measure()    
         {

      a  GPIOPinTypeADC(GPIO_PORTE_BASE, GPIO_PIN_7); // Pin assignment
         ADCSequenceConfigure(ADC0_BASE, 3, ADC_TRIGGER_PROCESSOR, 0);
         appended line for demonstration
         ADCSequenceStepConfigure(ADC0_BASE, 3, 0, ADC_CTL_CH0 | ADC_CTL_IE |ADC_CTL_END);
         ADCSequenceEnable(ADC0_BASE, 3);//sample sequence 3 is enabled.
         ADCIntClear(ADC0_BASE, 3);   // Clear the interrupt status flag.
         } 
```

当且仅当以空格作为分隔符的第一个列之前，我可以使用`SED`or来输出 true 。第一个字符始终是空格。`AWK``a``a`

截至目前我使用`GREP`：

```
 if grep -q "^a" file.c; then
       echo "The file is prepended"
       else
       echo "the file is clean"
   fi 
```

我在单独的文件中有几个函数，例如上面的第一个函数，并希望根据前面的`a`.

是否有可能使用它自己轻松地完成多个文件`GREP`。我真的更喜欢一个`SED`或`AWK`替代方案，避免使用`if`数百个结构。

建议或更好的算法总是受欢迎的:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:41:07.547

很难说出你在问什么，但听起来你可能想要这个

```
grep -q ^a file.c && echo 'The file is appended' || echo 'the file is clean' 
```

或者也许你真的想要这个：

```
grep -L ^a *.c 
```

每个生成的文件名都是一个“附加”文件。

对于多个文件，您可以这样做

```
for file in *.c ; do
   grep -q '^a ' file.c && echo 'The file is appended' || echo 'the file is clean'
done 
```

对于多个文件递归，尝试

```
find . -type f -name '*.c' -exec grep -q '^a ' {} \; -print 
```

尽管要获得“正确”的输出，您需要做更多的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:38:37.003

你为什么用`cat`？
您可以使用`grep`,`sed`或指定`awk`任意数量的文件，但我不清楚您是否希望每个文件都为“True”，如果任何文件包含此模式，则为 tru。让我们假设前者：

```
awk '/^a /{print FILENAME "is True"}' 'list-of-files' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T02:00:07.577

尝试以下命令：

```
awk 'FNR==1&&($1=="a") {printf "The file %s is prepended\n",FILENAME}' *.c 
```

# ios - 处理 PGN（便携式游戏符号）文件中的变化

> ID：11205428
> 
> 赞同：0
> 
> 时间：2012-06-26T10:33:13.120
> 
> 标签：ios, xcode

我已经在目标 c 中为 PGN 文件制作了一个解析器，并且已经完成了移动的所有验证和表示，但是我在变体和递归变体方面遇到了麻烦，我只解析了简单的 PGN 文件。我遇到了以下问题 1.如何处理变化哪种数据结构适合？2.应该支持多少递归变化？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:54:38.530

我使用树结构解决了这个问题。我使用链表和变体节点链接来创建变体分支。

# iphone - 有人知道如何在 iPad 上测试 iPhone Safari 尺寸吗？有模拟器应用吗？

> ID：11205429
> 
> 赞同：0
> 
> 时间：2012-06-26T10:33:15.557
> 
> 标签：iphone, ipad, mobile-safari

我只有一台 iPad，但我在一个 iPhone 网站上工作，我需要测试它的尺寸。有人知道为此制作的应用程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:34:50.647

iOS 开发工具，包括。Xcode、Interface Builder 等都有 iOS 设备模拟器。如果您是注册（免费）Apple 开发人员，则可以从 Apple 下载这些工具。（这些仅在 Mac OS X 上运行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:38:55.473

如果你没有 Mac，你可以下载一个内置浏览器的 iPhone 应用程序。尝试在 iPad 上安装 Dolphin iPhone App

或者在 Mac 上，您可以在 iPhone Simulator 上对其进行测试。

1.  打开iOS模拟器，
2.  在硬件 > 设备中选择 iPhone
3.  在模拟器上打开 Safari 并输入您的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:40:48.343

在线模拟器可以吗？

[http://iphone4simulator.com/](http://iphone4simulator.com/)或[http://transmog.net](http://transmog.net)也许？

# c# - Linq2Sql：即使返回单条记录，也始终执行 LEFT JOIN

> ID：11205430
> 
> 赞同：0
> 
> 时间：2012-06-26T10:33:15.893
> 
> 标签：c#, .net, linq, linq-to-sql, orm

我正在使用 Linq2Sql（我的客户卡在 3.5 上，所以我无法迁移到实体框架）来访问 SQL Server 数据库。

为了在某​​些情况下提高性能，我将 LoadOptions 附加到我的上下文中。当我使用编译查询时，我不能禁用它，当它们无用并且它们减慢请求时也不能。

但有时我想检索数据，就像没有附加到我的上下文的 LoadOptions 一样。

作为一种解决方法，我尝试返回的不是完整记录，而是它的投影。

例子 ：

```
DataLoadOptions dlo = new DataLoadOptions();
dlo.LoadWith<Product>(c => c.X);
dlo.LoadWith<Product>(c => c.Y);
context.LoadOptions = dlo;

return (from product in context.Products
        where ...
        select product).First(); 
```

这将执行如下查询：

```
Select product.*, X.*, Y.* from Product Left outer join X left outer join Y where.... 
```

在这种情况下，一切都很正常。

我的方法依赖于这样的东西：

```
return (from product in context.Products
        where ...
        select new MyType() { p = product.Field }).First(); 
```

执行类似的查询

```
Select product.Field from Product ->Left outer join X left outer join
Y<-- where.... 
```

请注意请求中的 LEFT OUTER JOIN。

虽然我期待类似的东西：

```
Select product.Field from Product where.... 
```

所以我想知道是否有办法避免这些连接？

非常感谢您的建议，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:28:14.983

这篇[博客文章](http://www.mrkwatkins.co.uk/Blog/2010/05/03/Improving-LINQ-To-SQL-Performance-Part-1---Changing-Load-Options)介绍了如何临时从 DataContext 实例中删除 DataLoadOptions。

> 您只需要更改 DataContext 上的私有 loadOptions 字段的值即可更改加载选项

* * *

如果您知道要发送的 sql，则可以跳过翻译步骤，直接使用`DataContext.ExecuteQuery<Product>`

# facebook - Facebook 连接循环 Internet Explorer

> ID：11205433
> 
> 赞同：1
> 
> 时间：2012-06-26T10:33:24.087
> 
> 标签：facebook, internet-explorer, loops, oauth

我正在使用 Nathan Totten C# SDK 和 Facebook SDK 使用 C# 开发 Facebook 应用程序。

我正在尝试通过使用在 SoF 或其他网站上创建的许多示例从用户那里获取访​​问令牌，并且效果很好：

```
FB.Event.subscribe('auth.authResponseChange', function (response) {
    if (response.status === 'connected') {
        var uid = response.authResponse.userID;
        var accessToken = response.authResponse.accessToken;

        var form = document.createElement("form");
        form.setAttribute("method", 'post');
        form.setAttribute("action", 'FacebookLoginHandler.ashx');

        var field = document.createElement("input");
        field.setAttribute("type", "hidden");
        field.setAttribute("name", 'accessToken');
        field.setAttribute("value", accessToken);
        form.appendChild(field);
        //Indicate the page where we are, to redirect here after data processing
        var field2 = document.createElement("input");
        field2.setAttribute("type", "hidden");
        field2.setAttribute("name", "pageUrl");
        alert(window.location.href);
        field2.setAttribute("value", window.location.href);
        form.appendChild(field2);
        document.body.appendChild(form);
        form.submit();

    } else if (response.status === 'not_authorized') {
    } else {
    }
}); 
```

在我的 FacebookLoginHandler 中，我将信息放在 Session 中，并在我的页面（field2）上重定向。

一切都适用于 Chrome 和 Firefox。但在 IE 上，我有一个循环：

转到我的页面 => authResponseChange 'connected' => FacebookLoginHandler => 重定向到我的页面 => authResponseChange 'connected' => FacebookLoginHandler 等...

我真的不明白为什么，仅在 IE 上（除了这是一个糟糕的浏览器：P），它不起作用。

# sql-server - 这是什么 SQL 语法？

> ID：11205438
> 
> 赞同：0
> 
> 时间：2012-06-26T10:33:46.020
> 
> 标签：sql-server, tsql, sql-server-2008r2-express

谁能告诉我这是什么 SQL 语法，其中 123 是传递给 SP 的参数吗？

```
EXECUTE sp_MyStoredProcedure = '123' 
```

执行此命令时，来自 MSSMS 的错误消息是

> 102，第 15 级，状态 1，第 6 行
> '=' 附近的语法。

我们需要配置数据库（SQL Server 2008 Express）以接受这种语法的 SQL，因为它是由我们无法更改的 Windows 服务生成的。尝试设置数据库兼容性不起作用...

```
ALTER DATABASE ABC SET Compatibility_Level = 80 / 90 / 100
EXECUTE sp_dbcmptlevel 'ABC', 80   --80,90, 100 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:39:16.157

根据[帮助主题](http://msdn.microsoft.com/en-us/library/ms188332.aspx)，这种语法是无效的，显然对 SQL Server 是无效的。看起来也很无厘头。它适用于其他一些 DBMS 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:40:20.197

```
EXECUTE sp_MyStoredProcedure '123' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T13:50:44.520

语法无效。Windows 服务中的 SQL 已过时。

# solr - 使用 SOLR 执行布尔运算

> ID：11205443
> 
> 赞同：0
> 
> 时间：2012-06-26T10:34:00.287
> 
> 标签：solr

我想使用 solr（AND、OR、'-'（禁止搜索））执行布尔运算。

我改变了这个参数：

```
<solrQueryParser defaultOperator="AND" /> 
```

早些时候它是OR。

此外，我尝试使用 q.op 并将其值设为 AND。因此，理想情况下，查询“abc def”应该被解释为“abc AND def”，但事实并非如此。它仍然被解释为“abc OR def”。那么如何实现 AND 功能呢？

# git - 将干净代码推送到 Mercurial 主分支的最佳实践是什么？

> ID：11205446
> 
> 赞同：3
> 
> 时间：2012-06-26T10:34:21.970
> 
> 标签：git, mercurial, dvcs

将干净代码推送到主分支的最佳实践是什么？

这是关于 Mercurial 的最佳实践问题，但是其他 DVCS/git 用户的想法也适用。如果有合适的网站请指点我。

拥有大量贡献者的大型项目如何保持主要开发分支的清洁？

我从中央存储库中*提取*源代码的副本，然后使用分支、标签、实验代码的本地合并和提交进行大量本地更改，直到所有内容都经过测试并正常工作。

现在我进行*最终提交*并将我的更改*推*送回主干 - 这会将我本地更改的***完整历史记录***发送到中央服务器。

这在概念上很好，但是这意味着执行最终构建的主管可以看到我所有的实验和错误代码都在朝着最终测试版本工作。

有没有一种最佳实践方法来减少我的推送，使其只包含干净的代码？清理我的代码（使用折叠或其他扩展）是我的责任，还是主管选择清理位并将它们复制到“最终版本”存储库？

非常感谢您的帮助，

史蒂夫

========================

**回答**：我已经接受了 Tims 下面的回答以及他给出的关于 github 的链接，特别是 [ [github.com/git/git/blob/master/Documentation/SubmittingPatches](http://github.com/git/git/blob/master/Documentation/SubmittingPatches) ]。所以是的 - 在将您的提交推送到中央存储库之前清理它！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T12:48:10.640

首先，您需要与您的主管讨论您项目的预期工作流程。以下一般建议对于大多数情况应该是好的，但您的项目可能有理由以不同的方式做事。

一般来说，您应该努力使您的存储库的发布历史尽可能干净。清洁度可以通过以下方式判断：

*   小而有凝聚力的变更集
*   清理或重构应与新功能分开提交。
*   每个提交都应通过测试（以允许使用诸如 等工具[`bisect`](http://www.selenic.com/hg/help/bisect)）

在所有 DVCS 中，都有*本地*与*已发布*历史的概念。在大多数工作流中，一旦变更集被推送到其他人克隆的公共存储库，它就被认为已*发布。*

关于编辑回购历史有两个基本规则：

1.  **发布变更集后，不应修改历史记录。**这意味着仅推送准备发布的变更集很重要。在 Mercurial 术语中，不要将`hg push`所有传出更改。相反，使用`hg push -b <branch>`or`hg push -r <rev>`执行特定更改的有针对性的推送。有关更具体的推理和建议，请参阅[`EditingHistory`](http://mercurial.selenic.com/wiki/EditingHistory)Mercurial wiki。

2.  **在发布变更集之前（即当它们在本地时），您可以根据需要自由修改、变基、折叠等，以创建“干净”的历史记录。**在 git 中，这是使用[`git commit --amend`](http://git-scm.com/docs/git-commit)or完成的[`git rebase`](http://git-scm.com/docs/git-rebase)。Mercurial 具有扩展名，例如[`queues (mq)`](http://mercurial.selenic.com/wiki/MqExtension/),[`histedit`](http://mercurial.selenic.com/wiki/HisteditExtension)和[`collapse`](http://mercurial.selenic.com/wiki/CollapseExtension).

在大多数项目中，开发人员需要在提交代码以供审查或发布之前清理自己的代码。这样可以避免审阅者/集成者将时间浪费在凌乱的工作上。

# ipad - iphone：企业帐户构建

> ID：11205450
> 
> 赞同：0
> 
> 时间：2012-06-26T10:34:39.787
> 
> 标签：ipad, enterprise

我的客户给我他的企业帐户，以便为他的公司构建内部应用程序。他想部署大约 200 台 ipad 设备。有没有一种方法可以在不知道这些设备的所有 UDID 的情况下构建最终版本。因为对于我的客户来说，收集超过 200 台 ipad 设备将是一项耗时的任务。

我想构建并将其上传到一个链接。所有 ipad 都将从该链接获取 ipa 并安装到每个设备。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:50:45.457

`TestFlight`提供 iOS 应用程序的无线 beta 分发，可能对您有用。Testflight 使用企业分发机制。

以下是testflight的链接-testflightapp.com

您可以在此线程中查看 Kerni 的答案以获取其他可用选项 - [TestFlight 是如何做到的？](https://stackoverflow.com/questions/4973244/how-does-testflight-do-it)

# php - 同一来源上的多个编码器

> ID：11205458
> 
> 赞同：1
> 
> 时间：2012-06-26T10:35:08.443
> 
> 标签：php, git, svn, fossil

我的编码器有问题，他们似乎会不时地覆盖彼此的工作，因为他们一直在处理重叠的文件。

我查了一下，似乎“化石”可能是我的解决方案（[http://www.fossil-scm.org](http://www.fossil-scm.org)）但我想知道是否有人有更好的主意，因为我很新这一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:47:47.017

源（版本）控制是要走的路。有许多不同的选项，每个选项都有正面和负面。也许看看这个问题可能会对您有所帮助：[所有不同类型的版本控制之间有什么区别？](https://stackoverflow.com/questions/3859/what-is-the-difference-between-all-the-different-types-of-version-control)

# android - PhoneGap - 从 iphone 到 android 的平台转换

> ID：11205459
> 
> 赞同：0
> 
> 时间：2012-06-26T10:35:08.457
> 
> 标签：android, iphone, html, cordova, cross-platform

我使用[此链接](http://docs.phonegap.com/en/1.8.1/index.html)开发了一个电话差距应用程序。

应用程序在 i Phone 上运行起来就像一个魅力。但现在我想在 android 上运行这个手机间隙应用程序。我用谷歌搜索但找不到任何东西。

我知道电话差距应用程序的平台转换必须有一种方法，但我不知道如何。

编辑：我在 [这里](https://stackoverflow.com/questions/5232375/by-using-phonegap-can-we-convert-iphone-app-to-android-app)和[这里](https://stackoverflow.com/questions/10038467/choosing-between-mobile-app-platform-i-e-phonegap-and-native-code-for-2d-game)搜索了平台转换。

我了解到的另一件事是 phonegap 提供了平台转换的便利。我们可以上传 iPhone 版本，他们会在转换后向我们发送 android 版本。相同的链接在[这里](https://build.phonegap.com/)，但我不知道如何使用这些文件。因为我有 mac 机器，所以我想创建一个 android 版本。

或者有没有其他方法来开发phonegap应用程序？？？

谁能告诉我如何进行平台转换？？？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:12:16.937

如果您开发了一个基于 html、jquery 和 css 的应用程序，您只需对代码进行最少的更改即可进行平台转换。

如果您与警报、通知、传感器、显示器等移动设备进行交互，则无法进行转换。

# ruby-on-rails - 无法安装 Rails (Windows)

> ID：11205460
> 
> 赞同：0
> 
> 时间：2012-06-26T10:35:09.857
> 
> 标签：ruby-on-rails, installation

整天看不懂。网上有很多提示，但我很困惑。也许编辑有误。

帮助我理解并找出错误。

Ruby 在这里下载：[http](http://rubyforge.org/frs/?group_id=167&release_id=46722) ://rubyforge.org/frs/?group_id=167&release_id=46722 成立。

然后安装gem：[http ://rubygems.org/pages/download](http://rubygems.org/pages/download)

然后尝试安装 Rails，- 在 concole 中写道： `gem install rails`

但有错误！-

错误：执行 gem 时...

无效参数 - C:/Documents and Settings/Neo/C:

这是我的concole：

`C:\Documents and Settings\Neo>_` - 不远吗？

也许我只需要：`C:\>_` ？？？我该怎么做？

我的 gem.bat：

```
@ECHO OFF
SET _HOMEDRIVE=%HOMEDRIVE%
SET _HOMEPATH=%HOMEPATH%
SET HOMEDRIVE=С:
SET HOMEPATH=/Ruby193
IF NOT "%~f0" == "~f0" GOTO :WinNT
@"ruby.exe" "С:/Ruby193/bin/gem" %1 %2 %3 %4 %5 %6 %7 %8 %9
GOTO :EOF
:WinNT
@"ruby.exe" "%~dpn0" %*
SET HOMEDRIVE=%_HOMEDRIVE%
SET HOMEPATH=%_HOMEPATH% 
```

我要么错过了什么，要么做了一些额外的事情......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:29:14.910

当您尝试单独安装每个部件时，在 Windows 上安装 RoR 可能是一个真正的挑战。[Rails 安装程序](http://railsinstaller.org/)可以安装您需要的一切。但是，如果您决定自己安装所有内容，则可以按照以下步骤操作：

*   安装[ruby​​ 语言](http://rubyinstaller.org/)。

*   通过检查其版本来检查安装是否成功：

    ```
    ruby -v 
    ```

*   然后你需要通过检查它的版本来检查你是否可以访问gem命令：

    ```
    gem -v 
    ```

*   更新 gem 版本：

    ```
    gem update --system 
    ```

*   有了 ruby​​ 语言和更新的 gem，您现在可以安装 Rails：

    ```
    gem install rails 
    ```

*   您可以检查 rails 版本：

    ```
    rails -v 
    ```

*   现在您需要 SQLite 数据库：

    ```
    gem install sqlite3-ruby 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-07T06:07:18.260

我在**windows**中安装 rails 时遇到错误>

**解决方案 ：**

下载 Ruby+Devkit exe 文件 安装 Ruby+Devkit

```
> ruby -v 
> gem -v
> gem install rails 
> rails -v 
```

一切正常！！！！

# regex - 正则表达式和阿拉伯语“Tanwin”

> ID：11205461
> 
> 赞同：3
> 
> 时间：2012-06-26T10:35:10.003
> 
> 标签：regex, vb.net, arabic

我正在尝试使用 VB .NET 在字符串输入中匹配从数据库驱动的单词我使用的语法非常简单：

```
Regex.Matches(ArticleBody, "\b" & TagLabel & "\b", RegexOptions.IgnoreCase) 
```

其中“TagLabel”是数据库中的变量，“ArticleBody”是用户输入。一切正常，但我有一个小问题：

让我们假设：

```
TagLabel = "مصر"
ArticleBody = "لكن الجنرال المدني مصرٌ على الأمل، ولو كان حزيران يشي بالعكس." 
```

请注意文章正文“ٌ”中第四个单词末尾的“مصر”中的“Tanwin”。Regex 函数匹配单词“مصر”，但它不应该匹配。我已经搜索了解决方案，但没有找到任何解决方案。

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:20:07.743

你应该试试：

```
Regex.Matches(ArticleBody, "\b" & TagLabel & "\b", 
  RegexOptions.IgnoreCase | RegexOptions.RightToLeft) 
```

* * *

**更新：**试试这个：

```
Regex.Matches(ArticleBody, "(?<=(?:\s|^))" & TagLabel & "(?=(?:\s|$))", 
  RegexOptions.IgnoreCase | RegexOptions.RightToLeft) 
```

# iphone - 如何更改键盘的返回类型，iPhone

> ID：11205462
> 
> 赞同：1
> 
> 时间：2012-06-26T10:35:10.283
> 
> 标签：iphone, ipad

我有 2 个文本字段。我正在检查两个文本字段的填充时间，然后，我将键盘返回按钮更改为“开始”。否则，它将保持为“返回”。它工作正常，只有当我点击文本字段时，键盘的返回类型才会改变。一旦两个文本字段都不为空，我想自动更改它。

我试着把我的代码

```
if ([txtEmail.text length] > 0 && [txtPass.text length] > 0) {
    // Set the return key here, e.g:
    txtEmail.returnKeyType = UIReturnKeyGo;
    txtPass.returnKeyType = UIReturnKeyGo;
}
else {
    // Set the return key here, e.g: 
    txtEmail.returnKeyType = UIReturnKeyDefault;
    txtPass.returnKeyType = UIReturnKeyDefault;
} 
```

在

```
- (void)textFieldDidBeginEditing:(UITextField *)textField{} 
```

但它不适合我。

任何想法，我如何将返回按钮从返回更改为 Go，当他的两个字段都不为空时，自动地，用户没有点击任何文本字段来更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:43:46.503

为两个文本字段设置委托。然后在创建 UItextFields 引用后将代码放入 viewDidLoad 一次

```
if ([txtEmail.text length] > 0 && [txtPass.text length] > 0) 
{
txtEmail.returnKeyType = UIReturnKeyGo;
txtPass.returnKeyType = UIReturnKeyGo;
}
else 
{

txtEmail.returnKeyType = UIReturnKeyDefault;
txtPass.returnKeyType = UIReturnKeyDefault;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:44:23.570

```
//have you set the delegate of your textField if not then please set it.. 

txtEmail.delegate = self;
txtPass.delegate = self; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:00:45.750

检查你的头文件`UITextFieldDelegate`协议和

不要忘记将委托设置为自我。

```
txtEmail.delegate = self;
txtPass.delegate = self; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T10:41:57.503

`textFieldDidBeginEditting`**在编辑开始之前**触发，所以显然文本在那里没有改变。

您需要做的是检测**按键**以发现更改并基于该更改 returnKey 类型。请参阅此问题：[如何在 UITextField 中检测 KeyPress 事件？](https://stackoverflow.com/questions/8044288/how-can-i-detect-a-keypress-event-in-uitextfield)- 它处理*按键*事件。

# jquery - 如何使用页面滚动制作 div 滚动？

> ID：11205467
> 
> 赞同：0
> 
> 时间：2012-06-26T10:35:17.440
> 
> 标签：jquery, css, html

> **可能重复：**
> [jQuery：在页面滚动时隐藏/显示](https://stackoverflow.com/questions/8662751/jquery-hide-show-divs-on-page-scroll)
> [Div](https://stackoverflow.com/questions/9404172/jquery-div-to-move-with-scrolling-motion-and-stick-position-to-top-and-bottom)

我希望我的添加随着用户上下滚动而上下滚动，就像在[fotbolti.net中一样](http://fotbolti.net)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:47:53.527

尝试这个

```
<div style="bottom: 0; right: 0px; position: fixed;" > 
```

根据您的要求通过上下左右位置更改您的位置。

# c++ - c预处理器中的宏危害

> ID：11205471
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:35:23.047
> 
> 标签：c++, c, macros, c-preprocessor

我已经定义了以下宏，

```
#define abss(a) a >= 0 ? a : -a 
```

在调用它时，

```
int b=-1;
int c = abss(b);
printf("%d\n",c); 
```

它应该以 b >= 0 的形式替换？b : --b，它应该输出 -2，但它在我的 Bloodshed/DevC++ 编译器 1 中输出。

我正在分析 C 语言以进行考试，所以我必须知道在 C 中上述情况实际发生了什么。输出结果 1 是针对我正在使用的 CPP 编译器还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:41:44.587

你的代码

```
int b=-1;
int c = abss(b);
printf("%d\n",c); 
```

被预处理器翻译成：

```
int b=-1;
int c = b >= 0 ? b : -b;
printf("%d\n",c); 
```

（`int b=-1`在 C 域中，而在`abss(b)`编译器到达之前由预处理器扩展`int b=-1`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T10:46:01.223

为什么你认为它应该输出-2？

```
#define abss(a) a >= 0 ? a : -a 
```

所以这个： int c = abss(b)

变成 int c = b >= 0 ？乙：-乙

b 为 -1，因此计算结果为 1

顺便说一句，您应该将宏参数的每次使用都括起来，因为您可能会传递诸如 x + 1 之类的东西。这会很奇怪。

更不用说 abss(++x) 的结果了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T18:32:45.287

这个宏

```
#define abss(a) a >= 0 ? a : -a 
```

确实是危险的，但危险并不在你认为的地方。你帖子里的表情

```
int c = abss(b); 
```

工作得很好。然而，考虑一下当表达式不是一个简单的变量，而是一个难以计算的函数，或者当它是一个有副作用的表达式时会发生什么。例如

```
int c = abss(long_calc(arg1, arg2)); 
```

或者

```
int c = abss(ask_user("Enter a value")); 
```

或者

```
int c = abss(b++); 
```

如果`abss`是一个函数，那么所有三个调用都会在可预测的时间内产生良好的结果。但是，该宏使第一次调用调用`long_calc`和`ask_user`两次（如果用户在再次提示时输入不同的数字怎么办？），并且它后增量`b`两次。

此外，考虑这个看似简单的表达式：

```
int c = abss(b) + 123; 
```

由于`+`具有比 更高的优先级`? :`，因此生成的扩展将如下所示：

```
int c = b >= 0 ? b : -b + 123; 
```

when`b`是肯定的，`123`不会加，所以表达的意思会发生巨大的变化！

最后一个缺点可以通过将表达式括在括号中来解决。您还应该将每个宏参数括在括号中，如下所示：

```
 #define abss(a) ((a) >= 0 ? (a) : -(a)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T10:44:09.880

宏处理器永远不会将两个相邻的标记连接在一起，即使它们之间没有空格，所以确实，正如其他海报所提到的，你的宏扩展为`- b`, 或`1.`

如果您*希望*两个标记在被预处理器扩展时变成一个，则必须使用*标记粘贴运算符* `##`，例如

```
#define abss(a) a >= 0 ? a : - ## a 
```

这确实会做你想做的事，因为负号和变量将形成一个标记。不幸的是（或幸运的是，取决于你如何看待它！）粘贴的标记“-b”将无效，并且扩展将无法编译。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-26T10:38:04.007

```
#define neg(a) -a

int b = -1;
neg(b); 
```

在上面的例子中，宏被`-b`预处理器扩展，这将导致值为 1。预处理器甚至不会*知道**内容*的符号`b`是负数，那么第二个应该`-`从哪里来形成前缀递减运算符？

即使你这样写：

```
 neg( -b ); 
```

宏替换是在*令牌*级别完成的，而不是作为文本搜索和替换。你会得到相当于`- ( -b )`，但*不是* `--b`。

**编辑：**您在其他评论中链接到的手册已经过时（甚至没有解决 C99 标准），而且*非常糟糕*。只是浏览了一下，我发现了半打陈述，如果你认为它们是正确的，它们会让你看起来*真的很愚蠢。*不要使用它，除了生火。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-26T10:40:15.337

您的宏扩展为

```
b >= 0 ? b : -b; 
```

不要`b >= 0 ? b : --(-b);`或任何你所期望的。

你是在暗示

```
int x = -4;
-x; 
```

应该减少`x`吗？

**底线**- 尽可能避免使用宏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-26T10:47:21.917

你得到这种行为的原因是预处理器只会用 b 替换 a ，所以你的代码在预处理后会很有效

```
b >= 0 ? b : -b 
```

并不是

```
b >= 0 ? b : --b 
```

因此，当 b = -1 时，它实际上将被视为 -(-1) 并因此变为 1。

您可以检查预处理器输出并亲自查看。

# cortex-m3 - 分析，如何在 VS pro 2008 或 2012RC 中避免 FPU（硬件）并使用模拟的 FPU 代码

> ID：11205479
> 
> 赞同：0
> 
> 时间：2012-06-26T10:36:03.640
> 
> 标签：cortex-m3

我需要为没有 FP 单元的**Cortex-M3处理器优化一些代码。**我对优化领域完全陌生。无论如何，我使用**VS 2012 Release Candidate在我的电脑（****英特尔酷睿 i5**，**Windows 7**作为操作系统）上本地编译代码，然后将它们移植到 Cortex_M3。我尝试将我的代码写在一种**尽可能少地使用浮点运算**的方法。但我仍然有一些。所以我知道当我将它嵌入到 Cortex_M3 中时，它将利用模拟的 FPU 代码（**软件 FPU**）。由于我无法**对 cortex_m3 进行分析**，我在我的电脑上使用 VS2012（仪器方法）来验证哪些功能需要更多时间并且必须进行更多优化。我认为如果我不使用我的 PC 的 FP 单元，我的 PC 上的分析结果可以与 COrtex_M3 的结果成正比。Visual Studio（2008 pro. 或 2012 RC）中是否有允许我跳过（硬件）FP 单元的关键字或方式？

非常感谢您的见解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:55:29.283

您的 PC 与 Cortex M3 非常不同，在那里执行的优化不太可能有任何相关性。一些不同之处：

*   PC每个周期可以发出多条指令
*   PC每秒有几十亿个这样的周期，而几千万
*   PC 的缓存可能比 M3 的 RAM 多
*   正如您所观察到的 - 浮点单元

M3 是一款嵌入式处理器 - 如果您无法以传统方式进行分析，要么获得更好的工具集，以便您*可以*使用设备中的硬件计时器来为您的功能计时，或者手动完成。或者切换一些端口引脚并将示波器挂在上面 - 这是正确嵌入的:)

编辑：

* * *

您*可以*在没有操作系统的情况下进行分析 - 高端嵌入式工具链可以检测代码、运行代码并将结果拉回以进行后处理

* * *

除了看门狗之外，还有其他硬件定时器。在最简单的级别上，在执行某些任务之前编写一些函数来读取值，然后读取值，减去结果并打印出来。还可以完成更复杂的方案，记录许多迭代并跟踪统计数据等。

* * *

如果您有几个端口引脚，只需在要分析的功能之前设置一个，完成后将其清除。

使用 4 通道范围，您可以一次查看 4 段代码的执行时间（以及它们相对于彼此发生的时间，如果有人中断另一段代码，这将很有用）。如果你有更多，得到一个逻辑分析仪，你可以做负载！

您还可以看到执行时间的抖动或变化，这可能具有指导意义。随着角度的变化，在 libc trig 函数上尝试一下，您会发现在某些角度下，sin/cos 函数（例如）运行时间比在其他角度上要长。这在实时系统中可能是一个重大问题。

# bash - 在 bash 脚本中睡觉

> ID：11205480
> 
> 赞同：0
> 
> 时间：2012-06-26T10:36:10.030
> 
> 标签：bash, sleep

我遇到了一个奇怪的问题；我有一个作为 wwwrun 运行的 bash 脚本，由浏览器中的按钮触发。脚本内部有一个睡眠，但经过多次试验后我意识到，如果我睡眠几秒钟/分钟，一切都很好，而超过 5 分钟，脚本会停止执行.. 有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:37:47.237

您的 php.ini 中有一个脚本超时设置正在被触发，请尝试扩展它。

max_execution_time 是您希望在 php.ini 中进行顶部更改的项目

# sql - Oracle SQL 连接查询

> ID：11205486
> 
> 赞同：0
> 
> 时间：2012-06-26T10:36:27.693
> 
> 标签：sql, oracle, join

```
TABLEA
LOGIN_ID ,COL1,COL2

TABLEB
LOGIN_ID, RESIGN_DATE, LAST_DATE, STATUS 
```

我想从 TABLEA 中为特定 login_id 选择 login_id、resign_date 和 last_date

Login_ID 是 TABLEA 和 TABLEB 之间的链接。在 TABLEB 中，同一个 login_id 可以有多个记录。我想选择满足以下条件的 resign_date 和 last_date。

```
1)if status is null for at least one of them
    it should identify that entry whose status is null
    System populate the resign_date and last_date of this entry 
2)if status is ‘Y’ for all of them
      resign_date = ’12/31/2050’ 
      last_date = ’12/31/2050’
3)If no entry in TABLEB
    resign_date = null
    last_date = null 
```

如何为此编写一个oracle sql查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T18:15:44.183

您可以使用[分析函数](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions004.htm)来执行此操作，其优点是只需访问每个表一次。

```
select distinct a.login_id,
    case when b.login_id is null then null
        when first_value(b.status) over (partition by b.login_id
            order by b.status nulls first) is null then b.resign_date
        when first_value(b.status) over (partition by b.login_id
            order by b.status nulls first) = 'Y' then date '2050-12-31'
    end as resign_date,
    case when b.login_id is null then null
        when first_value(b.status) over (partition by b.login_id
            order by b.status nulls first) is null then b.last_date
        when first_value(b.status) over (partition by b.login_id
            order by b.status nulls first) = 'Y' then date '2050-12-31'
    end as last_date
from tablea a
left join tableb b on b.login_id = a.login_id
order by a.login_id; 
```

相关部分是`case`语句 - 有两个但它们是相同的，除了从哪个列返回`TABLEB`。本案共有三个条款：

```
when b.login_id is null then null 
```

如果 中没有匹配的记录`TABLEB`，因为外连接`B.LOGIN_ID`会为空；这符合您的第三个标准。

```
when first_value(b.status) over (partition by b.login_id
    order by b.status nulls first) is null then b.resign_date 
```

该`first_value()`函数返回“最低”状态值，这`nulls first`意味着如果任何匹配`TABLEB`记录的状态为空，那将是首先看到的。因此，这符合您的第一个条件，并`TABLEB.RESIGN_DATE`用于该空状态行。

```
when first_value(b.status) over (partition by b.login_id
    order by b.status nulls first) = 'Y' then date '2050-12-31' 
```

与上一个子句相同，但这次如果第一个值是`Y`则不能有任何空值，因为`nulls first`再次。（这是假设状态只能是`null`或“Y”，这是您的问题所暗示的 - 如果有任何其他状态，那么您的标准中没有指定行为）。因此，如果中的所有匹配行都`TABLEB`具有 status `Y`，这将使用与您的第二个条件匹配的固定日期值。

请注意，我在这里使用了[日期文字](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements003.htm#sthref363)；如果您愿意，您可以使用`to_date('12/31/2050', 'MM/DD/YYYY')`，但不要使用隐式转换并假设特定的日期掩码将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:40:56.150

如果您使用的是 Oracle 9i rel 2 或更高版本，这应该可以...

```
with c  as (select * from tableb where status is null)

select * 
from tablea
left join 
(
        select login_id, resign_date, last_date from c
        union
        select login_id, '12/31/2050', '12/31/2050' from tableb 
                where login_id not in (select login_id from c)
) d on tablea.login_Id = d.login_Id 
```

我假设 tableB 中的状态是 Y 或 null

# c# - 将样式应用于多边形

> ID：11205488
> 
> 赞同：1
> 
> 时间：2012-06-26T10:36:30.003
> 
> 标签：c#, wpf, triggers, styles, polygon

我想将以下内容`Style`应用于我的`Polygon`：

```
<Style xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
   xmlns:s="clr-namespace:System;assembly=mscorlib" 
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   TargetType="{x:Type Polygon}">

<Style.Triggers>

    <Trigger Property="Shape.IsMouseOver" Value="True">

        <Setter Property="Shape.Stroke">
            <Setter.Value>
                <SolidColorBrush>#FF000000</SolidColorBrush>
            </Setter.Value>
        </Setter>

        <Setter Property="Shape.StrokeThickness">
            <Setter.Value>
                <s:Double>2</s:Double>
            </Setter.Value>
        </Setter>

    </Trigger>

    <Trigger Property="Shape.IsMouseOver" Value="False">

        <Setter Property="Shape.StrokeThickness">
            <Setter.Value>
                <s:Double>0</s:Double>
            </Setter.Value>
        </Setter>

    </Trigger>

</Style.Triggers>

<Setter Property="Shape.Fill" Value="{x:Null}"/>  

</Style> 
```

当光标在我的多边形上时，我想要一个黑色笔划，当光标不在我的多边形上时，我不想看到任何东西。为什么这种风格不起作用（我什么都没看到）？

## 编辑：

这是我的多边形：

```
var pol = new Polygon();

using (FileStream stream = new FileStream("myStyle.xaml", FileMode.Open))
       pol.Style = XamlReader.Load(stream) as Style; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:49:08.033

不要设置`Shape.Fill`to `Null`，试试这个：

```
<Setter Property="Shape.Fill" Value="Transparent"/> 
```

# android - 如何在所有应用程序中应用 Android Theme.DeviceDefault 自定义？

> ID：11205494
> 
> 赞同：2
> 
> 时间：2012-06-26T10:36:47.587
> 
> 标签：android, themes

我是 Android UI 自定义的新手。我需要修改 Theme.Holo 和 Theme.Holo.Light 的少量 actionMode 和 actionBar 资源，并且我需要将更改反映在所有应用程序（包括人、电子邮件、电话、彩信等基础应用程序）中。我正在使用 android 4.0.4 源。

从[http://android-developers.blogspot.in/2012/01/holo-everywhere.html](http://android-developers.blogspot.in/2012/01/holo-everywhere.html)，我了解到themes_device_defaults.xml 是自定义主题的地方。

但是在尝试了一段时间后，我意识到所有基础应用程序（例如联系人）活动都基于 Theme.Holo 或 Theme.Holo.Light 定义了它们的主题样式。

不应该所有基础应用程序活动都使用带有父 Theme.DeviceDefault.Light 或 Theme.DeviceDefault 的主题来支持通过 theme_device_default.xml 进行自定义。

我错过了什么吗？有没有办法自定义一个主题，该主题适用于所有应用程序，而无需更改每个应用程序的 res/style.xml

谢谢和问候， Anuj

# php - 将内容分成两列 - Wordpress

> ID：11205496
> 
> 赞同：1
> 
> 时间：2012-06-26T10:36:50.793
> 
> 标签：php, wordpress, function, split, implode

我有一个名为“list-two”的自定义元框（使用[高级自定义字段](http://www.advancedcustomfields.com/docs/functions/)），我想在编辑窗格中使用“更多”标签将文本/内容分成两列。到目前为止，这是我的代码，但只完成了我需要它做的一半：

在我的 functions.php 文件中：

```
function split_morecontent() {
global $morecontent;
$morecontent = true;
$copy = preg_split('/<span id="more-\d+"><\/span>/i', get_field('list_two'));
for($c = 0, $csize = count($copy); $c < $csize; $c++) {
    $copy[$c] = apply_filters('list_two', $copy[$c]);
}
return $copy;
} 
```

在我的帖子模板文件中：

```
<?php
 // split text into array
    $copy = split_morecontent();
 // output first content section in column1
echo '<section class="split">', array_shift($copy), '</section>';
 // output remaining content sections in column2
echo '<section class="split">', implode($copy), '</section>';
?> 
```

运行时输出以下 HTML（注意它实际上并没有将内容分成两个标签）：

```
<section class="split">
  <ul class="footnote">
     <li>Christopher Gray</li>
     <li>Jean Jullien<!--more--></li>
     <li>Nous Vous</li>
     <li>Liv Bargman</li>
     <li>Luke Drozd</li>
  </ul>
</section>

<section class="split">
     <!-- the last 3 <li> tags from the list above should be displayed within here.-->
</section> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T15:29:57.717

另一种简单的方法是通过 jQuery。这很简单。使用这个：[Columnizer jQuery 插件](http://welcome.totheinter.net/columnizer-jquery-plugin/)

它的工作原理是这样的：

```
$('.post-content').columnize({ columns: 2 }); 
```

在你的循环中，只需将 the_content() 放在 div post-content 中

```
<div class="post-content">
  <?php the_content() ?>
</div> 
```

希望这对其他人有帮助；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T23:58:25.137

SitePoint 上有一篇文章似乎可以帮助您。 [查看如何将 WordPress 内容拆分为两列或多列](http://www.sitepoint.com/split-wordpress-content-into-multiple-sections/)。基本上，它会告诉您执行以下操作：

添加到您的`functions.php`：

```
// split content at the more tag and return an array
function split_content() {
    global $more;
    $more = true;
    $content = preg_split('/<span id="more-\d+"><\/span>/i', get_the_content('more'));
    for($c = 0, $csize = count($content); $c < $csize; $c++) {
        $content[$c] = apply_filters('the_content', $content[$c]);
    }
    return $content;
} 
```

无论您希望这种划分发生在哪里（我假设`single.php`大多数主题默认情况下），您都需要将`the_content()`call 替换为新创建的`split_content()`，如下所示：

```
<?php
    // original content display
        // the_content();
    // split content into array
        $content = split_content();
    // output first content section in column1
        echo '<div id="column1">', array_shift($content), '</div>';
    // output remaining content sections in column2
        echo '<div id="column2">', implode($content), '</div>';
?> 
```

您现在将内容拆分为两个单独的 div。`<!--more-->`只需给它们每个宽度并对其应用浮点数，您就可以使用标签将您的内容分成两列。

# appharbor - 在 AppHarbor 上安装 RavenDB 包

> ID：11205498
> 
> 赞同：2
> 
> 时间：2012-06-26T10:36:58.320
> 
> 标签：appharbor, ravenhq

为了扩展 RavenDB 的功能，我想安装开箱即用的[捆绑包。](http://ravendb.net/docs/server/bundles)这在本地安装上很容易，但是当数据库由 AppHarbor 和 RavenHQ 托管时，如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:49:34.070

查看[RavenHQ 文档](https://ravenhq.zendesk.com/entries/21336716-what-ravendb-bundles-are-supported)，您可以通过编写将包添加到数据库中。

# windows-phone-7 - Windows Phone 平台和更新

> ID：11205500
> 
> 赞同：1
> 
> 时间：2012-06-26T10:37:02.247
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone

我接到了创建 Windows Phone 应用程序的任务，我想弄清楚我应该以 7.0 还是 7.1 为目标？

由于我没有 Windows Phone，我不知道更新如何以及是否适用于所有手机？

在此页面上阅读：http: [//msdn.microsoft.com/en-us/library/hh202996](http://msdn.microsoft.com/en-us/library/hh202996(VS.92).aspx) (VS.92).aspx只是表明 7.1 与 7.0 不兼容（没什么新东西）。

所以我的问题是，所有使用 Windows Phone 7.0 的手机都可以升级到 7.1 吗？还是像 Android（比如我的三星 Galaxy S）一样无法升级到 2.3.3 以上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:33:38.493

这是一个[官方的 Microsoft 博客文章](http://windowsteamblog.com/windows_phone/b/windowsphone/archive/2012/05/22/starting-today-you-need-windows-phone-7-5-to-use-marketplace.aspx)，其中清楚地表明，Microsoft 正式停止了对 7.0 设备的市场支持。

因此，您无需担心 Windows Phone 7.0 并继续为 7.1 开发

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:51:35.080

您应该以 7.1 为目标，这是绝大多数用户的目标。据我所知，所有运行 7.0 的设备都可以升级到 7.1，但不能 100% 确定这一点。

在我的一个应用程序中，来自 4000 多名用户的应用程序中，没有一个正在运行 Mango 之前的软件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T13:12:11.143

另一点需要注意的是，运行 7.0 的设备无法再连接到市场。

您可以构建一个使用 7.0 的应用程序，因为这些应用程序可以在 7.5 设备上正常运行，但 7.1 中有很多可爱的附加功能，您可能希望在您的应用程序中使用它们。
构建使用 SDK 7.1 版的应用不会影响谁可以使用您的应用。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T04:21:35.197

无需思考或担心。继续使用 7.1，因为所有现有的手机都支持 7.1 aka mango。7.0 的市场已经关闭，因此迫使用户更新他们的手机。

# google-chrome-os - Chromebook / Chrome OS 开发者模式能力

> ID：11205504
> 
> 赞同：7
> 
> 时间：2012-06-26T10:37:11.517
> 
> 标签：google-chrome-os, chromebook

我正在考虑给自己买一台 Chromebook（当然运行 Chrome 操作系统），但需要完全了解开发人员模式。我正在努力寻找有关开发人员模式能力的任何具体的最新信息。一旦我进入开发者模式并将 rootfs 安装为可写（两者都相对简单），Chromebook/Chrome OS 会相对正常运行吗？正常情况下，我的意思是我可以安装和运行标准的 Linux 二进制文件，假设它们已经针对目标架构进行了编译吗？我在某处读到实际上从 Chromebook/OS 上的源代码编译是不行的。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-22T07:13:03.413

进入开发者模式后，您可以自由地在 Chromebook（或任何其他 chromeOS 机器）上做很多事情。例如如果你拿这个项目：[https ://github.com/helloandre/cr48](https://github.com/helloandre/cr48)

并按照以下步骤操作：

*   将您的 CR-48 置于开发者模式下放入 shell (Ctrl+Alt+t)
*   使用 sudo mount -i -o remount,exec /home/chronos/user 使您的主分区可执行
*   将此[repo](https://github.com/helloandre/cr48)下载到另一台计算机，然后使用 scp 将其放入 /home/chronos/user/cr48 cd /home/chronos/user/cr48 && chmod +x install && ./install

您可以享受开发技术，例如：python、ruby、perl 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-27T10:44:43.727

一旦你将你的设备置于开发者模式，它本质上就是一个 Linux 机器，就像任何其他机器一样。根据您的“标准 linux 二进制文件”的重量级，它很可能会*正常工作*；您将遇到的问题将是您可能从任何其他发行版获得的“默认情况下未安装库 X”，而不是“ChromeOS 太*奇怪*以至于什么都不会工作”的那种。

除非您安装 GCC 和相关工具链，否则您不会在 Chromebook 本身上构建软件——您需要在单独的机器上设置开发环境；见： http: [//www.chromium.org/chromium-os](http://www.chromium.org/chromium-os)。您可能应该被告知这不是微不足道的，建议使用良好的“网络管道和开发机器”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T02:13:29.117

我将三星 ChromeBook 用作路上的 PC 和台式机上的 Linux。

一旦将 CB 置于开发者模式，它就可以像任何其他 Linux 服务器一样工作。安全扩展通常意味着您必须将可执行程序放入其中，`/usr/local/bin`否则可能不允许它们运行。

我在上面运行[Go 开发环境，](http://golang.org)它的运行速度与任何基于 Intel 的笔记本电脑一样快。有关在 CB 上运行 Go 的更多详细信息，[请参阅此答案。](https://superuser.com/a/641138/27110)

您还可以从其他系统交叉编译 Go，例如在 Intel 处理器上运行的 Mac 可以为 CB 生成代码，即在 ARM v7 上运行 Linux。有关更多详细信息，[Dave Cheney 的](http://dave.cheney.net/2013/07/09/an-introduction-to-cross-compilation-with-go-1-1)文章非常有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-09T19:10:30.980

我使用[crouton](https://github.com/dnschneid/crouton)在我的 (ARM) Chromebook 上安装 Ubuntu。对于需要完整图形桌面的工作，我使用`crouton -t xfce`. 否则我会使用`crouton -t cli-extra`，而我的“真正的”Linux 只是另一个浏览器选项卡。无论哪种方式，您都有 apt-get 并且可以轻松添加软件包。

一种奇怪的部分是你总是使用 Chrome OS 内核，所以（例如）如果你在一个操作系统中启动一些音频，当你切换到另一个操作系统时它会继续播放。

# solr - 搜索正确单词的 Solr 拼写检查问题

> ID：11205507
> 
> 赞同：1
> 
> 时间：2012-06-26T10:37:30.043
> 
> 标签：solr, plone

我已经为拼写检查建议实施了 Solr 1.4，但是当我搜索正确的单词时，我遇到了问题，即使 Solr 建议的是其他单词。相同的示例是：

我搜索“药物”而不是向我显示我不想要的建议“药物”，因为我已经输入了正确的单词。

我在此搜索“cimbalta 药物”的另一个示例第一个单词“cimbalta”拼写错误，第二个单词“medicine”拼写正确，但我得到以下建议 **，您的意思是：Cymbalta 药物** 。即使拼写正确，药物也会改变。

请建议我解决这个问题。

提前致谢

问候阿布舍克·迪克西特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T21:14:24.133

我遇到了同样的问题，我遇到了一篇帖子，有人说基于文件的拼写检查目前建议即使单词在字典中，您必须将字典转换为 solr 索引才能成为基于索引的拼写。

# sql-server - SQL Server 2005 中的波斯数字

> ID：11205509
> 
> 赞同：6
> 
> 时间：2012-06-26T10:37:37.097
> 
> 标签：sql-server, sql-server-2005, persian

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T11:27:40.867

If you insert string literals, be sure to mark Unicode strings with N'', such as

```
select N'سلام ۱۲۳۴‍‍‍' 
```

Next, make sure whether the question marks are only a display problem in SSMS:

```
declare @t nvarchar(50) = N'سلام ۱۲۳۴‍‍‍'
select unicode(substring( @t, 1, 1))
select unicode(substring( @t, 2, 2))
select unicode(substring( @t, 3, 3))
select unicode(substring( @t, 4, 4)) 
```

returns the Unicode values for each character:

```
1587
1604
1575
1605 
```

I remember that SSMS 2005 had problems displaying certain Unicode ranges in the results window.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:07:12.700

You Can Use Arabic_CI_AI collation and Solve this problem I hope that help you..

# sql - 使用 SSIS 将相同的数据值添加到两个单独的表中

> ID：11205513
> 
> 赞同：0
> 
> 时间：2012-06-26T10:37:46.210
> 
> 标签：sql, ssis

我正在通过将数据从 db1 中的 Table1 拉到 db2 中的 Table2 来复制表。

Table2 将包含一个额外的 TimeID 列，该列是在将数据拉入 Table2 时动态生成的。因此，在特定时间获取的每条记录都将在 Table2 中具有相同的 TimeID。此外，这个 TimeID 必须输入到一个单独的表中，比如 Table3，它将是主键。

我需要创建一个 NEWID() 并在两个单独的表中更新它。我如何在 SSIS 上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:45:36.253

可以只在存储过程或 SQL 语句中完成吗？

```
declare @guid uniqueidentifier, @processed datetime
select @guid = NEWID(), @processed = GETDATE()

insert into db2..table2 
select *, @processed as ProcessedDate
from db1..table1

insert into db2..table3
select @guid, @processed 
```

# android - 如何在Android中以横向模式从一个横向播放视频到另一个横向

> ID：11205516
> 
> 赞同：0
> 
> 时间：2012-06-26T10:37:51.823
> 
> 标签：android, video, orientation, landscape

在这里，我开发了一个仅以横向模式播放视频的应用程序。我在 AndroidManifest.xml 文件中将活动方向设置为“横向”。我的视频播放得很好，但问题是我在横向模式下握住我的设备我将我的设备旋转到 180 角度我的视频播放显示反向（从下到上）。它没有根据那个变化。

# c# - 覆盖 IEnumerable 以允许 SqlBulkCopy 进行更快的传输（在 LinqToSql 上）

> ID：11205517
> 
> 赞同：1
> 
> 时间：2012-06-26T10:37:51.917
> 
> 标签：c#, sql-server, linq-to-sql, reflection

我在 SQl 服务器中设置了许多表，我已将所有这些表转移到 dbml 文件中以供正常的 LinqToSql 使用。

我想知道是否可以将代码中的类更改为仅选择表的列而不选择链接表

即，如果我想将类传递给没有链接表属性的方法，我将如何去做

更多信息本质上我正在尝试使用我编写的扩展以使用 SQLbulkCopy 而不是 context.SubmitChanges 但由于额外的属性而遇到映射问题

我意识到我可以使用匿名类型，但认为这会覆盖扩展方法的任何好处。另一种选择是更改 ToDataTable 扩展。

```
 public static void SqlBulkInsert<T>(this IEnumerable<T> source, string connectionString, string tableName)
    {
        using (SqlConnection conn = new SqlConnection(connectionString))
        {
            var bulkCopy = new SqlBulkCopy(conn) {DestinationTableName = tableName};
            conn.Open();
            var item = source.ToDataTable();
            bulkCopy.WriteToServer(item);
            conn.Close();
        }
    }
    public static DataTable ToDataTable<T>(this IEnumerable<T> source)
    {
        using (var dt = new DataTable())
        {
            var toList = source.ToList();

            for (var index = 0; index < typeof(T).GetProperties().Length; index++)
            {
                var info = typeof(T).GetProperties()[index];
                dt.Columns.Add(new DataColumn(info.Name, info.PropertyType));
            }

            for (var index = 0; index < toList.Count; index++)
            {
                var t = toList[index];
                var row = dt.NewRow();
                foreach (var info in typeof(T).GetProperties())
                {
                    row[info.Name] = info.GetValue(t, null);
                }
                dt.Rows.Add(row);
            }

            return dt;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:38:14.873

对，所以我解决了

使用示例

```
_list = new List<Item>();
//Fill _list
_list.SqlBulkInsert(SettingsFile.ConnectionString,"Table"); 
```

我必须定义一个静态列表，并且只处理列表中包含的那些属性类型

一位同事建议在 propertyType 上使用 isclass 属性，但这当然有问题，如果有任何其他方法或我可能错过的东西，我会很高兴接受一些批评

希望这可以帮助某人！

即像这样

```
 private static List<Type> Types
    {
        get
        {
            return new List<Type>
                   {
                       typeof (String),
                       typeof (int?),
                       typeof (Guid?),
                       typeof (double?),
                       typeof (decimal?),
                       typeof (float?),
                       typeof (Single?),
                       typeof (bool?),
                       typeof (DateTime?),
                       typeof (int),
                       typeof (Guid),
                       typeof (double),
                       typeof (decimal),
                       typeof (float),
                       typeof (Single),
                       typeof (bool),
                       typeof (DateTime),
                       typeof (DBNull)
                   };
        }
    }

 public static DataTable ToDataTable<T>(this IEnumerable<T> source)
    {
        using (var dt = new DataTable())
        {
            var toList = source.ToList();

            for (var index = 0; index < typeof(T).GetProperties().Count(); index++)
            {
                var info = typeof(T).GetProperties()[index];
                if (Types.Contains(info.PropertyType))
                {
                    dt.Columns.Add(new DataColumn(info.Name, info.PropertyType));
                }
            }

            for (var index = 0; index < toList.Count; index++)
            {
                var t = toList[index];
                var row = dt.NewRow();
                foreach (var info in typeof(T).GetProperties())
                {
                    if (Types.Contains(info.PropertyType))
                    {
                        row[info.Name] = info.GetValue(t, null);
                    }
                }
                dt.Rows.Add(row);
            }

            return dt;
        }
    } 
```

# javascript - 无法理解 JavaScript 中的基本对象工作原理

> ID：11205518
> 
> 赞同：1
> 
> 时间：2012-06-26T10:37:55.440
> 
> 标签：javascript, object

我正在学习 JavaScript，我正在使用的书中有一个我不理解的示例。就像这样：

```
var chineseBox = {};
chineseBox.content = chineseBox; 
```

然后书中列出了两个表达式及其值。首先，`"content' in chineseBox;`返回`true`. 然后，我没有得到的`"content" in chineseBox.content`那个也返回`true`。我认为如果第二个表达式评估为`false`指向`chineseBox`前面定义的空对象会更自然。有理由这样工作吗？此功能的实际意义是什么？以及如何探索对象的更深层次？对吗`chineseBox.content.content`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:42:27.433

> 我认为如果第二个表达式评估为`false`指向`chineseBox`前面定义的空对象会更自然。

它不再是空的了。截至`chineseBox.content = chineseBox`，它现在有一个属性。

当您将对象引用分配给事物（变量、属性等）时，存储的值是对对象的*引用*，而不是对象的*副本*。所以`chineseBox`（变量）和`chineseBox.content`（属性）都指向**同一个**对象，它有一个名为 的属性`content`。

让我们在这里抛出一些 ASCII 艺术：

```
var chineseBox = {}; 
```

这给了我们：

```
+−−−−−−−−−−−−−−−−−−−−−−−−−−+
| chineseBox (变量) |
+−−−−−−−−−−−−−−−−−−−−−−−−−−+ +−−−−−−−−−−−−−−−−+
| 值 |−−−−−−−−−−>| （对象） |
+−−−−−−−−−−−−−−−−−−−−−−−−−−+ +−−−−−−−−−−−−−−−−+
                                   | |
                                   +−−−−−−−−−−−−−−−−−+

```

现在我们做

```
chineseBox.content = chineseBox; 
```

...我们有：

```
                                            /−−−−−−−−−−−−\
+−−−−−−−−−−−−−−−−−−−−−−−−−+ | |
| chineseBox (变量) | v |
+−−−−−−−−−−−−−−−−−−−−−−−−−−+ +−−−−−−−−−−−−−−−−+ |
| 值 |−−−−−−−−−−>| （对象） | |
+−−−−−−−−−−−−−−−−−−−−−−−−−−+ +−−−−−−−−−−−−−−−−+ |
                                   | 内容 |−−−−/
                                   +−−−−−−−−−−−−−−−−−+

```

只有一个对象。有两个参考文献指向它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:41:28.837

`chineseBox.content`是对`chineseBox`;的引用 重要的是它是一个参考，因为这意味着任何未来的更改`chineseBox`也**可以**在`chineseBox.content`参考中看到。

当你设置`chineseBox.content`为`chineseBox`时，`chineseBox`对象确实是空的；但是，因为`chineseBox`是参考，所以*一旦*您设置了`content`属性，它就会更新以反映这一点。

看`chineseBox.content === chineseBox // true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:41:56.253

`chineseBox.content = chineseBox;`表示`chinesesBox.content` **指向** `chineseBox`. 所以是的，你可以去`chineseBox.content.content.content`等，因为每次你要回到根元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:42:23.347

`'content' in chineBox.content`由于 指向**原始**对象 (chineseBox.content --> chineseBox) ，计算结果为**true 。**`content` **`chineseBox`**

 **`chineseBox.content.content`, `chineseBox.content.content....content`都是有效的，因为您指的是同一个对象。**

# html - 这些“区域”的正确名称？

> ID：11205520
> 
> 赞同：0
> 
> 时间：2012-06-26T10:38:03.613
> 
> 标签：html, css

内容分隔区域的正确名称是什么 - 通常通过 div 分隔的内容。例如，在这个站点上，侧边栏、主要内容区域、导航区域、标题区域。

我一直在页面内容部分的区域中使用“小部件”，我不确定这是否准确地描述了我的样式。建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:54:07.967

从技术上讲，如果您使用`div`'s 将它们分开，那么这些将是您网页布局的“分区”。

> 该`<div>`元素定义文档中的逻辑划分。

[http://webdesign.about.com/od/htmltags/p/bltags_div.htm](http://webdesign.about.com/od/htmltags/p/bltags_div.htm)

因此，我将区域称为“侧边栏划分”、“页眉划分”、“页脚划分”等。这为您所指的元素留下了更少的假设空间。

# assembly - 识别汇编中的有符号和无符号值

> ID：11205522
> 
> 赞同：12
> 
> 时间：2012-06-26T10:38:06.427
> 
> 标签：assembly, x86, reverse-engineering

当我查看用 C/C++ 编写的代码的反汇编时，我总是觉得这很令人困惑。

有一个具有某些值的寄存器。我想知道它是代表有符号数还是无符号数。我怎样才能找到这个？

我的理解是，如果它是一个有符号整数，如果它是负数，则设置 MSB，如果它是正数，则不设置。如果我发现它是一个无符号整数，则 MSB 无关紧要。这个对吗？

无论如何，这似乎无济于事：我仍然需要确定整数是否已签名，然后才能使用此信息。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T12:23:56.883

你最好的选择也是寻找比较和相关的动作/标志使用，比如一个分支。根据类型，编译器将生成不同的代码。由于大多数（相关）架构提供标志来处理有符号值。以 x86 为例：

```
jg, jge, jl, jle = branch based on a signed comparison (They check for the SF flag)
ja, jae, jb, jbe = branch based on a unsigned comparison (They check for the CF flag) 
```

CPU 上的大多数指令对于有符号/无符号操作都是相同的，因为这些天我们使用的是二进制补码表示。但也有例外。

让我们以右移为例。对于 X86 上的无符号值，您将使用 SHR 将某些内容向右移动。这将在左侧的每个“新创建的位”上添加零。

但是对于有符号值，通常会使用 SAR，因为它将 MSB 扩展到所有新位。这就是所谓的“符号扩展”，并且再次只有效，因为我们使用的是二进制补码。

最后但同样重要的是，有符号/无符号乘法/除法有不同的指令。

```
idiv or one-operand imul = signed
div or mul/mulx = unsigned 
```

正如评论中所指出的，[`imul`有 2 个或 3 个操作数](https://www.felixcloutier.com/x86/imul)并不意味着什么，因为像加法一样，非扩展乘法对于有符号和无符号是相同的。仅以`imul`一种不会浪费时间编写高半结果的形式存在，因此编译器（和人类）[不管有符号性如何都](https://stackoverflow.com/questions/42587607/why-is-imul-used-for-multiplying-unsigned-numbers)[使用`imul`](https://stackoverflow.com/questions/42587607/why-is-imul-used-for-multiplying-unsigned-numbers)，除非他们特别想要高半结果，例如优化`uint64_t = u32 * (uint64_t)u32`。唯一的区别在于设置的标志，这些标志很少被查看，尤其是编译器生成的代码。

此外， NEG 指令通常仅用于有符号值，因为它是二进制补码否定。（如果用作 的一部分`abs()`，结果可能被认为是无符号的，以避免在 INT_MIN 上溢出。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T10:43:18.813

一般来说，您将无法做到。整数值发生的许多事情对于有符号或无符号值的发生方式相同。以作业为例。唯一的判断方法是代码是否恰好在进行算术运算。您绝对无法通过查看价值来判断；无论哪种方式，所有可能的位模式都是有效的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T13:52:43.387

在大多数处理器中（至少那些使用二进制补码数学的处理器），存储在寄存器或内存中的整数没有固有的符号。解释取决于使用的说明。一个简短的总结：

1.  对于有符号数和无符号数，加法和减法产生完全相同的位模式，因此通常没有带符号的加法或减法。（但是，MIPS 有单独的指令，如果操作溢出会导致陷阱）。

2.  除法和乘法对于有符号数和无符号数确实会产生不同的结果，因此如果处理器支持它，它们会成对出现（x86：mul/imul，div/idiv）。

3.  条件分支也可能根据比较结果的解释而有所不同（通常以减法实现）。例如，在 x86 上，有`jg`for *signed greater*和`ja`for *unsigned above*。

请注意，浮点数（至少 IEEE 格式）使用显式符号位，因此上述不适用于它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:42:13.513

除了已经说过的内容之外，查看运行时值会有所帮助。

例如，在

```
add eax, edx    ; eax = 0xFFFFFFF0, edx = 100 
```

`eax`可能包含一个有符号变量。这里没有保证，但在任何地方都没有保证——代码总是有可能是错误的。存在（有意或无意的）无符号溢出的代码，但它实际上更有可能被解释为有符号的非溢出。

# android - 如何退出当前活动 返回

> ID：11205525
> 
> 赞同：-2
> 
> 时间：2012-06-26T10:38:27.017
> 
> 标签：android, android-activity

```
 protected void onListItemClick(ListView list, View view, int position, long id)   
    {
    super.onListItemClick(list, view, position, id);
    fname=r.get(position);
    fid=s1.get(position); 

    if(tid!=null)  
    {
     try{
          //http post
          HttpClient httpclient = new DefaultHttpClient();
          HttpPost httppost = new HttpPost("http://192.168.0.5/staging/android/add_playlist_songs.php?uid="+uid+"&tid="+tid+"&fid="+fid+"&action=add");
          System.out.println("addsongurl==="+ur);
          System.out.println(httppost);
          httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
          HttpResponse response = httpclient.execute(httppost);
          HttpEntity entity = response.getEntity();
          is = entity.getContent();
        }
    catch(Exception e){
          Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
        }
          //Convert response to string  
          try
          {
             BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
             sb = new StringBuilder();
             String line = null;
             while ((line = reader.readLine()) != null) 
             {
             sb.append(line + "\n");
             }
             is.close();
             result = sb.toString();
             // Toast.makeText(getBaseContext(),"Song successfully added.",Toast.LENGTH_LONG).show();
             }
             catch(Exception e)
             {
             Toast.makeText(getBaseContext(),e.toString() ,Toast.LENGTH_LONG).show();
             }          
             Toast.makeText(this, "Song Added",Toast.LENGTH_SHORT).show(); 
```

当我单击列表值时，意味着 url 被击中，当时我想退出此活动并返回 ho？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:23:45.737

试试这种方式..根据我的建议，尝试在 doInBackground() 中使用 Asynctask 完成所有 Web 服务代码，并在 onPostExecute() 中执行剩余过程，如下所示，

//在onItemclick()中

```
 new GetTask().execute(); 
```

// 获取任务类

```
 public class GetTask extends AsyncTask<Object, Void, String> {

             ProgressDialog progdialog;
              @Override
    protected void onPreExecute() {
        super.onPreExecute();

        progdialog = ProgressDialog.show(context, null,
                "loading..");

    }

            @Override
    protected String doInBackground(Object... params) {
         //webservice 

        return null;
    }

    @Override
    protected void onPostExecute(String result) {
        progdialog.dismiss();

                 // finish the activity..
                //   if you start this activity without finishing then call as 
                     finish();
                // if not 
                    Intent in=new Intent(currentclass.this,nextactivity.class);
                     startActivity(in);
                    finish();

        super.onPostExecute(result);
    }

          } 
```

警报对话框：

```
 new AlertDialog.Builder(AccountListActivity.this)
    .setTitle("Title")
    .setMessage(message))
    .setPositiveButton(ok), new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog,int which) {
    Intent in = new Intent(currentClass.this,nextactivity.class);
        startActivity(in);
    }
    }).show(); 
```

它可能会帮助你...

# jquery - JSON 处理 - 将 JSON 文本字符串发送到 JSP，如何在 JSP 中使用 JSONObject 或 GS ON 进行处理

> ID：11205531
> 
> 赞同：0
> 
> 时间：2012-06-26T10:38:41.490
> 
> 标签：jquery, ajax, json, jsp, gson

我正在将 json 数据发送到另一个 jsp 页面 - 真正用于测试。

您在我的 jsp 上的文本字段中输入 JSON 格式的字符串。我通过一个表单请求提交这个，由 jquery 处理处理。它被发送到接收者 JSP。我正在使用以下代码来执行此操作。

在我发送它之前，我使用以下方法获取数据：

```
jsonData = $form.find( 'textarea[name="jsonData"]' ).val(); 
```

然后我做：

```
var parsedJsonObject = $.parseJSON(jsonData); 
```

这是我的发送代码：

```
$.ajax({  
    type:       "POST",  
    url:        "receiver.jsp",  
    data:       "jsonData=" + parsedJsonObject, // This is an object, created using parseJSON
    success:    function(data, textStatus, jqXHR) {  
                    alert('Success : ' + data);  
                    alert('textStatus : ' + textStatus);  
                    alert('jqXHR : ' + jqXHR);  
                    var jsonJqXHR = JSON.stringify(jqXHR); 
                    alert('jsonJqXHR : ' + jsonJqXHR);  
    },  
    error:function (xhr, ajaxOptions, thrownError){  
        alert('Error xhr : ' + xhr.status);  
        alert('Error thrown error: ' + thrownError);  
    }, 
    //complete: alert('complete'), 
    dataType:   "text" // xml, json, script, text, html                         
}); 
```

在我的 JSP 中，我做了一个：

```
String jsonData = request.getParameter("jsonData");
System.out.println("jsonData : " + jsonData); 
```

这将返回以下输出： json : "[object Object]"

我如何反序列化它？我用gson做了一些事情，但是当我尝试过时：

```
Gson gson = new Gson();
String json = gson.toJson(obj);
System.out.println("json = " + json); // I still get an output of: json = "[object Object]"
gson.fromJson(json, MyClass.class); 
```

我收到一个错误：

```
servlet jsp threw exception: com.google.gson.JsonParseException: Expecting object found: "[object Object]" 
```

任何人都可以帮助我从对象中获取这些数据的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T11:00:51.250

在您的 AJAX 调用中，`data: "jsonData=" + parsedJsonObject`不执行您的意图：

它只是给你一个类似的字符串`[object Object]`，而不是你正在寻找的 JSON 表示。

使用`data: "jsonData=" + JSON.stringify(parsedJsonObject)`或一些 jQuery 等价物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T12:01:04.443

[http://www.kodejava.org/examples/585.html](http://www.kodejava.org/examples/585.html)

您需要一个类将其映射到相同的字段。您要发送哪些字段以及您尝试将其映射到的类中有哪些字段？

将 JSON 粘贴到此处并验证它是否正常且不是无效的，并且您的字段是否匹配。

[http://jsonformatter.curiousconcept.com/](http://jsonformatter.curiousconcept.com/)

[http://jsonviewer.stack.hu/](http://jsonviewer.stack.hu/)

[http://www.jsonviewer.com/](http://www.jsonviewer.com/)

或获取 JSON 插件

[https://addons.mozilla.org/en-US/firefox/addon/jsonview/](https://addons.mozilla.org/en-US/firefox/addon/jsonview/)

# bash - 将 awk 命令转换为脚本的问题

> ID：11205538
> 
> 赞同：1
> 
> 时间：2012-06-26T10:38:59.970
> 
> 标签：bash, awk

我在[http://centoshelp.org/security/securing-sshd/](http://centoshelp.org/security/securing-sshd/)
上找到了一些有用的命令， 即解析 /var/log/secure 以检查受攻击帐户/攻击 IP 的两个
我真的很想将它们转换为我可以使用 su 运行的更简单的命令，而不是试图记住它们。
我已经尝试过 shell 脚本以及直接的 awk 脚本，但我总是遇到各种错误，通常与看起来的单引号有关，有时是语法（取决于我使用或省略的双引号和单引号的组合） .

```
awk 'gsub(".*sshd.*Failed password for (invalid user )?", "") {print $1}' /var/log/secure* | sort | uniq -c | sort -rn | head -5

awk 'gsub(".*sshd.*Failed password for (invalid user )?", "") {print $3}' /var/log/secure* | sort | uniq -c | sort -rn | head -5 
```

我似乎无法正确组合，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:56:01.343

当无法直接进一步简化时，将其转换为简单命令的最佳方法是创建脚本或函数。将前者放在您的目录中，`PATH`或者将后者放在一个文件中，例如`~/bin/functions`您从`~/.bashrc`.

有时这是不可能的或不实用的，但是像[AutoKey](http://code.google.com/p/autokey/)这样的东西可以从您指定的快捷方式为您输入它，而无需记住完整的命令。

# java - 连接数据库失败（错误:`com.mysql.jdbc.Driver`）

> ID：11205544
> 
> 赞同：0
> 
> 时间：2012-06-26T10:39:53.903
> 
> 标签：java, tomcat, jdbc

大家好，感谢您查看我的帖子。我正在尝试使用 Mysql jdbc 驱动程序将我的 servlet 与我的数据库连接起来。我来自 mysql jdbc 驱动程序的**.jar位于文件夹****apache-tomcat-7.0.27/lib**中。MyServlet 是一个 servlet，我在必须建立连接的同一文件夹中有 SQL.java。

```
private static Connection conn = null;
Class.forName(driver).newInstance();
conn = (Connection) 
DriverManager.getConnection("jdbc:mysql://"+"localhost:3306"+"/"+ "ergasia3", "root" , "spiros");` 
```

不幸的是，当我尝试这样做时，我有一个**错误：**`com.mysql.jdbc.Driver`。

这是我的 web.xml

```
<web-app>
  <display-name>WebApp01</display-name>
  <welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>MyServlet</servlet-name>
    <servlet-class>com.srk.pkg.MyServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>MyServlet</servlet-name>
    <url-pattern>/MyServlet.do</url-pattern>
  </servlet-mapping>
  <resource-ref>
    <description>database</description>
    <res-ref-name>jdbc/ergasia3</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref> 
</web-app> 
```

现在我的 context.xml

```
<Context path="/ergasia3" docBase="ergasia3"
debug="5" reloadable="true" crossContext="true">
  <Resource name="jdbc/ergasia3" auth="Container"
  type="javax.sql.DataSource" 
  user="root" password="spiros"
  driverClassName="com.mysql.jdbc.Driver"
  url="jdbc:mysql://localhost:3306/ergasia3" 
  maxActive="15" maxIdle="3" /> 
</Context> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:50:14.163

不要将 .jar 放在 Tomcat 的库中，将其放在您的应用程序库文件夹中。所有外部 .jar 都应保留在此处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:24:07.733

将你的 jar 放在 WEB-INF\lib 下

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:25:15.673

由于您已经将数据库连接信息定义为 tomcat 中的资源，而不是使用驱动程序管理器来创建连接，因此使用类似于以下资源的资源会更简单

```
// context used to create a datasource
Context dataSourceContext = new InitialContext();
// when you need a connection to the database
DataSource ds = (DataSource)dataSourceContext.lookup("java:comp/env/jdbc/ergasia3");
Connection conn = ds.getConnection(); 
```

此外，正如 Soumyadip 之前所说，您应该将 mysql jdbc 驱动程序作为外部 jar 添加到 Web 应用程序，而不是在 tomcat lib 目录中，因为您的应用程序将在其 lib 目录中查找包含 jar 的而不是 tomcat lib 目录mysql jdbc 驱动程序。您如何做到这一点取决于您用于开发 Web 应用程序的 IDE。

# android - 异步任务问题

> ID：11205547
> 
> 赞同：1
> 
> 时间：2012-06-26T10:40:04.227
> 
> 标签：android

我的 AsyncTask 中有以下代码。我希望 AsyncTask 做的唯一一件事就是休眠 1000 毫秒，同时显示一个 ProgressDialog。

```
package something.something.Logic;

import android.R;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

public class DeviceScan extends AsyncTask<String, Void, String> {

ProgressDialog dialog;
Context _context; 

public DeviceScan(Context context) {    
    _context = context; 
    dialog = new ProgressDialog(_context);  
}

protected void onPreExecute() {

      dialog = new ProgressDialog(_context);
      dialog.setTitle("Please Wait");
      dialog.setMessage("Searching for devices..");
      dialog.setIndeterminate(true);
      dialog.setCancelable(false);
      dialog.show();    
}

@Override
protected String doInBackground(String... params) {

      for(int i=0;i<5;i++) {

        try {
            Thread.sleep(1000);

        } catch (InterruptedException e) {
            e.printStackTrace();
        }
      }

      return "";
}

 protected void onPostExecute(Integer result) {

     /*
      * When the background thread is finished, do something here
      */
     Toast.makeText(_context, "Done!!", Toast.LENGTH_LONG).show(); 
     dialog.dismiss(); 
 }
} 
```

然后我以这种方式调用 AsyncTask：

```
import something.something.Logic.*;

public void onClick(View view){

    switch(view.getId())    {

        case R.id.button1:
            new DeviceScan(getApplicationContext()).execute("");
      break;

    }
} 
```

但是当我点击按钮时我的应用程序崩溃了，我无法从调试器中找到任何信息。谁能给我一个提示？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:47:49.310

您正在创建`ProgressDialog`两次。从`onPreExecute`. 另一件事是，在的构造函数中传递 the 的`this`引用`Activity`作为`context``DeviceScan`

```
import something.something.Logic.*;

public void onClick(View view){

    switch(view.getId())    {

        case R.id.button1:
            new DeviceScan(MyActivity.this).execute("");
      break;

    }
} 
```

`onPostExecute`另外，按照其他答案的建议更改签名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:55:42.823

这样做....这样放异步..如果你不明白，请告诉我..问候

```
package something.something.Logic;

import android.R;
import android.app.ProgressDialog;
import android.content.Context;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.TextView;
import android.widget.Toast;

ProgressDialog dialog;

public void onClick(View view){

    switch(view.getId())    {

        case R.id.button1:
            new DeviceScan().execute("");
      break;

    }
}
public class DeviceScan extends AsyncTask<String, Void, String> {

protected void onPreExecute() {

      dailog=ProgressDialog.show(classname.this,"Please Wair..","Searching for devices..",false);
}

@Override
protected String doInBackground(String... params) {

    for(int i=0;i<5;i++) {
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    return "";
}

 protected void onPostExecute(Integer result) {

     /*
      * When the background thread is finished, do something here
      */
     dialog.dismiss();
     Toast.makeText(_context, "Done!!", Toast.LENGTH_LONG).show();  
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T10:43:42.370

尝试更改`onPostExecute(Integer result)`为`onPostExecute(String result)`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:44:16.863

无需在上下文中传递。它应该是`Activity`该类的一个字段，您所做的是从该`doInBackground`函数创建对话框。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T10:46:20.123

只是改变它。

```
 Toast.makeText(_context, "Done!!", Toast.LENGTH_LONG).show(); 
 dialog.dismiss(); 
```

到

```
 dialog.dismiss(); 
  Toast.makeText(_context, "Done!!", Toast.LENGTH_LONG).show(); 
```

您在dismiss() 对话框之前显示消息。

我认为这会造成问题。

谢谢

# javascript - 正则表达式 - 不介意顺序？

> ID：11205549
> 
> 赞同：0
> 
> 时间：2012-06-26T10:40:05.800
> 
> 标签：javascript, regex

我正在尝试创建一个可以接受一般 SQL / Js 日期的正则表达式，例如：

2012 年 2 月 31 日

我已经做了一个正则表达式：

```
(0[1-9]|[12]\d|3[01])[ ]+(JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC)[ ]+[12]\d{3}$ 
```

但我怎么能告诉正则表达式*忽略*项目的出现顺序：

所以它可以接受：

```
 Apr 31 2010
  2010 Apr 31 
  ...
  ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T10:46:58.187

使用前瞻断言的一种解决方案：

```
var myregexp = /^(?=.*(\b[A-Za-z]{3}\b))(?=.*(\b\d{1,2}\b))(?=.*(\b\d{4}\b))/;
var match = myregexp.exec(subject);
if (match != null) {
    month = match[1];
    days = match[2];
    year = match[3];
} 
```

**解释：**

```
^             # Start of string
(?=           # Look ahead to see if the following can be matched:
 .*           #  Any number of characters
 (            #  followed by (capturing this in group no. 1)
  \b          #  Start of word
  [A-Za-z]{3} #  Three ASCII letters
  \b          #  End of word
 )            # End of capturing group no. 1
)             # End of lookahead assertion.
(?=           # Look ahead to see if the following can be matched:
 .*           #  Any number of characters
 (            #  followed by (capturing this in group no. 1)
  \b\d{1,2}\b #  a one- or two-digit number
 )            # etc.
)
(?=           # Lookahead no. 3
 .*
 (
  \b\d{4}\b   #  a four-digit number
 )
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:42:48.657

您应该将字符分组，然后您可以使用 OR 以它们在字符串中出现的不同顺序接受它们。您无法构建可以处理任何订单的通用正则表达式 - 您必须清楚地指定它们发生的所有订单。

# mysql - Hibernate继承性能

> ID：11205550
> 
> 赞同：3
> 
> 时间：2012-06-26T10:40:09.930
> 
> 标签：mysql, performance, hibernate, inheritance, union-subclass

我正在使用带有 MySQL 数据库的 Hibernate 3（我尝试使用 Hibernate 4，但没有更多成功）。我已经实现了一个 table-per-concrete-class 继承策略（联合子类）。

除了多态查询之外，它完成了这项工作。Hibernate 生成一个基于 UNION 的查询，其中“where”子句位于高级查询中：

```
select primKey, param1, param2 from (
    select primKey, param1, param2 from Concrete1
    union
    select primKey, param1, param2 from Concrete2
)
where primKey == <value>
order by param1
limit 100 
```

当加载整个具体表内容时，这会导致性能非常差，而因为 pkey 是抽象父级的属性，所以可以在子选择中定义“where”子句。

所以目标是让 Hibernate 生成这种查询：

```
select primKey, param1, param2 from (
    select primKey, param1, param2 from Concrete1 where primKey == <value>
    union
    select primKey, param1, param2 from Concrete2 where primKey == <value>
)
order by param1
limit 100 
```

这样，查询会立即执行。

知道如何配置 Hibernate 来改变这种行为吗？

谢谢

Y。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T19:31:30.703

我曾经为类似的性能问题而苦苦挣扎，但发现唯一的解决方案是（至少在当时）将实现切换到[“每个类层次结构的表”](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html#inheritance-tableperclass)，因为它不需要联合或连接，所以性能要好得多。它不是那么简洁的模式，但如果你只有几个子类可能是一个不错的选择。

# javascript - 如何在不丢失比例的情况下缩放背景图像

> ID：11205553
> 
> 赞同：0
> 
> 时间：2012-06-26T10:40:21.917
> 
> 标签：javascript, html, css

我想创建一个填充整个背景的网页背景图像，而不会扭曲图像并改变它的比例。

你可以在 LaunchRock 的页面和他们的主页上看到一个很好的实现，[例如](http://launchrock.com/).

我[在 StackOverflow 上看到了这个问题，](https://stackoverflow.com/questions/1150163/stretch-and-scale-a-css-image-background-with-css-only)但是如果你玩弄它会产生什么，你会发现背景图像是 100% 的高度和 100% 的宽度，这意味着照片的原始比例没有保持并且图像被拉伸。

请注意，在 LaunchRock 示例中，如果您调整浏览器窗口的大小，图像会按比例增长并始终填满整个窗口（无论它们使用什么大小的窗口或背景图像）。

如果浏览器窗口不够宽，它会裁剪背景图像的两侧（保持图像居中并裁剪左右两侧），如果窗口不够高，它会裁剪背景图像的底部。

无论浏览器窗口大小，都保持图像的高宽比并填充整个背景。

我猜这不能用纯 CSS 完成，可能需要一些 JavaScript。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:43:20.973

它仅使用 CSS 完成，如下所示：

```
body {    
    background: black url(/images/back.jpg) no-repeat top center fixed;
    -webkit-background-size: cover;
    background-size: cover;
} 
```

使之成为可能的事情：

*   CSS 属性`background-size`设置为`cover`及其供应商前缀版本
*   使用`background-image`两侧逐渐变黑的a
*   位置设置为`top center`
*   使用`fixed`属性

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:44:38.297

如果你不介意使用 jQuery，你可以试试[http://srobbin.com/jquery-plugins/backstretch/ 。](http://srobbin.com/jquery-plugins/backstretch/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:45:55.503

示例：http: [//jsfiddle.net/rPhLa/](http://jsfiddle.net/rPhLa/)

你必须设置：

```
 html,body{ height:100%; width:100%; } 
```

所以他们占据了整个屏幕，然后作为背景：

```
body { background-image: url(http://launchrock.com/images/back.jpg); background-repeat: no-repeat; background-position:center center fixed; -webkit-background-size: cover; -moz-background-size: cover; -o-background-size: cover; background-size: cover; }​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:10:04.613

您作为示例使用的 LaunchRock 页面使用**CCS3**属性：`background-size`。这是发挥规模“魔力”的属性。

更多关于`background-size`：[http ://www.css3.info/preview/background-size/](http://www.css3.info/preview/background-size/)

*   不要忘记查看浏览器对此属性的支持。

这很可能可以使用 javascript 甚至仅使用 CSS2 来完成。抱歉，我现在手头没有例子。

# android - ViewPager 和片段：我如何知道片段何时不可见？

> ID：11205557
> 
> 赞同：0
> 
> 时间：2012-06-26T10:40:31.670
> 
> 标签：android, android-fragments, android-viewpager

我正在使用 android.support.v4 开发一个 Android 3.1 Tablet 应用程序。

我想知道当用户从一个片段滑动到另一个片段时是否触发了一个事件。

当一个片段被另一个片段隐藏时是否会触发事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:58:24.250

> 我想知道当用户从一个片段滑动到另一个片段时是否触发了一个事件。
> 
> 当一个片段被另一个片段隐藏时是否会触发事件？

我认为您正在寻找的是[`ViewPager.OnPageChangeListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html). 您只需设置该侦听器`ViewPager`即可侦听特定事件。

从该界面，[`onPageSelected`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html#onPageSelected%28int%29)将告诉您（使用`int`参数）哪个页面已成为可见页面，因此您知道您知道哪个片段可见或不可见。

将[`onPageScrolled`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html#onPageScrolled%28int,%20float,%20int%29)告诉您用户何时开始使用`ViewPager`的内容。

# mysql - #2002 -lampp phpmyadmin

> ID：11205558
> 
> 赞同：0
> 
> 时间：2012-06-26T10:40:33.673
> 
> 标签：mysql, phpmyadmin, lampp

我在另一个安装上运行 mysql。我下载了xampp并安装了它，它正在运行。我有这个错误 #2002 - 服务器没有响应（或者本地 MySQL 服务器的套接字配置不正确） 当我尝试运行 phpmyadmin 时，配置中定义的 controluser 连接失败 我有两个安装的 mysql 考虑到我有一个套接字设置为
/var/lib/mysql/mysql.sock，另一个位于/opt/lampp/etc/mysql/mysql.sock(xampp)。我需要让 phpmyadmin 使用这个套接字 /var/lib/mysql/mysql.sock。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T20:25:02.690

我已经解决了这个问题。

如果您使用的是 windows，那么您可以按照以下步骤尝试：

1.  在文本编辑器中转到 C:\xampp\mysql\bin\my.ini （默认安装位置，更改为适合）

2.  找出“bind-address”，然后取消注释这一行（从行首删除这个字符#），使它看起来像

    > 绑定地址=“127.0.0.1”

3.  保存文件并重新启动 Apache 和 MySQL。

# wordpress - 将用户导入新的 WordPress 站点

> ID：11205559
> 
> 赞同：4
> 
> 时间：2012-06-26T10:40:37.957
> 
> 标签：wordpress

我正在将现有网站迁移到 WordPress。现有站点有超过 6000 名成员，他们的密码使用 sha1 加密并保存到数据库中。如何将它们导入 WordPress 并保持相同的密码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T13:36:17.590

使用这个插件首先导出 [导出用户到 CSV](http://wordpress.org/extend/plugins/export-users-to-csv/)

然后导入

[从 CSV 导入用户](http://wordpress.org/extend/plugins/import-users-from-csv/)

您也可以通过导出 mysql wp_users & wp_usersmeta 表来做到这一点。

也[可以使用这个插件完成导入和导出](https://wordpress.org/plugins/users-customers-import-export-for-wp-woocommerce/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-25T09:19:52.183

要将用户导入新的 WordPress 网站，最好和最简单的方法是使用插件。为此，首先，您需要准备一个包含所有用户和用户数据的 CSV 文件。

插件[WordPress 用户和 WooCommerce 客户导入导出插件](https://www.webtoffee.com/product/wordpress-users-woocommerce-customers-import-export/)将帮助您轻松地将用户导入 WordPress 站点，并将 CSV 作为输入。

**您也可以迁移密码，以便在导入后用户也可以在新站点中使用他们的旧密码。**

如果您从不同的平台或 CMS 导入，则需要将 CSV 的列标题与 WordPress 中的用户数据字段进行映射。这将确保正确导入数据。映射后，所有数据将正确导入网站。

此外，您还可以使用该插件将用户数据从 WordPress 网站导出为 CSV 文件。

# php - 如何获取在我的网站上发帖的用户的地理区域并将其存储在数据库中

> ID：11205560
> 
> 赞同：0
> 
> 时间：2012-06-26T10:40:48.073
> 
> 标签：php, mysql, geolocation

我想知道可以让我在一个人访问我的网站时获取他的实际地址的代码。现在我的代码是用于获取 IP 地址。波纹管是我希望有人给我一个工作人员滚动我所拥有的代码

```
$ip=$_SERVER['REMOTE_ADDR']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:48:04.927

你需要获取ip。

在 php 中使用此代码段：

```
function GetUserIp() {
$ip = "";
if(isset($_SERVER)) {
    if (!empty($_SERVER['HTTP_CLIENT_IP'])) {
        $ip=$_SERVER['HTTP_CLIENT_IP'];
    } elseif (!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $ip=$_SERVER['HTTP_X_FORWARDED_FOR'];
    } else { $ip=$_SERVER['REMOTE_ADDR'];
    }
} else { if ( getenv( 'HTTP_CLIENT_IP' ) ) {
    $ip = getenv( 'HTTP_CLIENT_IP' );
} elseif ( getenv( 'HTTP_X_FORWARDED_FOR' ) ) {
    $ip = getenv( 'HTTP_X_FORWARDED_FOR' );
} else { $ip = getenv( 'REMOTE_ADDR' );
}
}
if(strstr($ip,',')){
    $ip = array_shift(explode(',',$ip));
}
return $ip;
} 
```

获得 IP 后，您必须与列表 ip-locations 进行比较才能获得位置。要获取此列表，请尝试谷歌搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:45:08.313

使用获取您的用户 IP 地址

```
$ip = $_SERVER["REMOTE_ADDR"]; 
```

那么最好的方法是使用 GeoIP 网络服务。您还可以使用本地 GeoIP 数据库。[ip2location](http://www.ip2location.com/developers/)运行一项已经存在很长时间的此类服务，您可以找到大多数流行语言的 api。

现代浏览器让您可以选择发送位置，但这是可选的，并且可能经常被您的用户禁用。

# c# - 在 Windows 8 中序列化 XML 数据（增量存储）

> ID：11205565
> 
> 赞同：1
> 
> 时间：2012-06-26T10:40:52.213
> 
> 标签：c#, windows, windows-8

如何在 Windows8 中序列化 XMl 数据。对于 Metro，方法是异步的。为了保存，可以传递一个操作，一旦保存操作完成，该操作将被调用。加载数据时，您需要传递一个接收加载数据的操作和一个在无法加载数据时将填充的异常参数。这怎么可能。

下面是在 wp7 中序列化的代码。在 windows 8 中它是如何实现的？

```
private void SaveProfileData(Profiles profileData)
    {
        XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
        xmlWriterSettings.Indent = true; 
        ProfileList = ReadProfileList();
        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile("profile.xml", FileMode.Create))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(List<Profiles>));
                using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
                {
                    serializer.Serialize(xmlWriter, GenerateProfileData(profileData));
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T23:29:16.310

## 将序列化的 XML 写入文件

在 Windows Phone 上使用独立存储序列化为 XML：

```
/// <summary>
/// Saves the given class instance as XML.
/// </summary>
/// <param name="fileName">Name of the xml file to save the data to.</param>
/// <param name="classInstanceToSave">The class instance to save.</param>
public static void SaveToXml(string fileName, T classInstanceToSave)
{
    using (IsolatedStorageFile isolatedStorage = GetIsolatedStorageFile)
    {
        using (IsolatedStorageFileStream stream = isolatedStorage.OpenFile(fileName, FileMode.Create))
        {
            XmlSerializer serializer = new XmlSerializer(typeof(T));
            using (XmlWriter xmlWriter = XmlWriter.Create(stream, new XmlWriterSettings() { Indent = true }))
            {
                serializer.Serialize(xmlWriter, classInstanceToSave);
            }
        }
    }
}

/// <summary>
/// Gets the Isolated Storage File for the current platform.
/// </summary>
private static IsolatedStorageFile GetIsolatedStorageFile
{
    get
    {
#if (WINDOWS_PHONE)
        return IsolatedStorageFile.GetUserStoreForApplication();
#else
        return IsolatedStorageFile.GetUserStoreForDomain();
#endif
    }
} 
```

您还需要在文件顶部添加“使用 System.IO.IsolatedStorage”。

以下是使用适用于 Windows 8 / RT 的 Windows 存储和异步编写的相同代码的外观：

```
/// <summary>
/// Saves the given class instance as XML asynchronously.
/// </summary>
/// <param name="fileName">Name of the xml file to save the data to.</param>
/// <param name="classInstanceToSave">The class instance to save.</param>
public static async void SaveToXmlAsync(string fileName, T classInstanceToSave)
{
    using (var stream = await ApplicationData.Current.LocalFolder.OpenStreamForWriteAsync(fileName, CreationCollisionOption.ReplaceExisting))
    {
        XmlSerializer serializer = new XmlSerializer(typeof(T));
        using (XmlWriter xmlWriter = XmlWriter.Create(stream, new XmlWriterSettings() { Indent = true }))
        {
            serializer.Serialize(xmlWriter, classInstanceToSave);
        }
    }
} 
```

这需要在文件顶部有“使用 Windows.Storage”。

* * *

## 从文件中读取序列化 XML

在 Windows Phone 上使用独立存储读取序列化 XML：

```
/// <summary>
/// Loads a class instance from an XML file.
/// </summary>
/// <param name="fileName">Name of the file to load the data from.</param>
public static T LoadFromXml(string fileName)
{
    try
    {
        using (IsolatedStorageFile isolatedStorage = GetIsolatedStorageFile)
        {
            // If the file exists, try and load it it's data.
            if (isolatedStorage.FileExists(fileName))
            {
                using (IsolatedStorageFileStream stream = isolatedStorage.OpenFile(fileName, FileMode.Open))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(T));
                    T data = (T)serializer.Deserialize(stream);
                    return data;
                }
            }
        }
    }
    // Eat any exceptions unless debugging so that users don't see any errors.
    catch
    {
        if (IsDebugging)
            throw;
    }

    // We couldn't load the data, so just return a default instance of the class.
    return default(T);
}

/// <summary>
/// Gets if we are debugging the application or not.
/// </summary>
private static bool IsDebugging
{
    get
    {
#if (DEBUG)
        // Extra layer of protection in case we accidentally release a version compiled in Debug mode.
        if (System.Diagnostics.Debugger.IsAttached)
            return true;
#endif
        return false;
    }
} 
```

以下是使用适用于 Windows 8 / RT 的 Windows 存储和异步读取的相同代码的外观：

```
/// <summary>
/// Loads a class instance from an XML file asynchronously.
/// </summary>
/// <param name="fileName">Name of the file to load the data from.</param>
public static async System.Threading.Tasks.Task<T> LoadFromXmlAsync(string fileName)
{
    try
    {
        var files = await System.Threading.Tasks.Task.Run(() => ApplicationData.Current.LocalFolder.GetFilesAsync(Windows.Storage.Search.CommonFileQuery.OrderByName));
        var file = files.GetResults().FirstOrDefault(f => f.Name == fileName);

        // If the file exists, try and load it it's data.
        if (file != null)
        {
            using (var stream = await ApplicationData.Current.LocalFolder.OpenStreamForReadAsync(fileName))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(T));
                T data = (T)serializer.Deserialize(stream);
                return data;
            }
        }
    }
    // Eat any exceptions unless debugging so that users don't see any errors.
    catch
    {
        if (IsDebugging)
            throw;
    }

    // We couldn't load the data, so just return a default instance of the class.
    return default(T);
}

/// <summary>
/// Gets if we are debugging the application or not.
/// </summary>
private static bool IsDebugging
{
    get
    {
#if (DEBUG)
        // Extra layer of protection in case we accidentally release a version compiled in Debug mode.
        if (System.Diagnostics.Debugger.IsAttached)
            return true;
#endif
        return false;
    }
} 
```

* * *

对我来说，这些是辅助函数，这就是为什么它们被标记为静态的，但它们不需要是静态的。此外，IsDebugging 函数仅用于糖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T12:17:39.667

我构建了一个数独应用程序，我遇到了同样的问题。我尝试在 Visual Studio 2012 中将代码从 wp7 更改为 win 8，但我的应用程序还没有工作。也许我的代码可以帮助你。

```
public void SaveToDisk()
        {           
             if (Windows.Storage.ApplicationData.Current.LocalSettings.Values.ContainsKey(key))
                {
                    if (Windows.Storage.ApplicationData.Current.LocalSettings.Values[key].ToString() != null)
                    { 
                        //do update
                        Windows.Storage.ApplicationData.Current.LocalSettings.Values[key] = value;
                    }
                }
             else 
                {   // do create key and save value, first time only.

                    Windows.Storage.ApplicationData.Current.LocalSettings.CreateContainer(key, ApplicationDataCreateDisposition.Always);
                    if (Windows.Storage.ApplicationData.Current.LocalSettings.Values[key] == null)
                    {
                        Windows.Storage.ApplicationData.Current.LocalSettings.Values[key] = value;
                    }

                 using (StreamWriter writer = new StreamWriter(stream))
                    {
                        List<SquareViewModel> s = new List<SquareViewModel>();
                        foreach (SquareViewModel item in GameArray)
                            s.Add(item);

                        XmlSerializer serializer = new XmlSerializer(s.GetType());
                        serializer.Serialize(writer, s);
                    }
                 }                

        } 
```

# iphone - 在 iOS 应用程序中添加自定义表情

> ID：11205567
> 
> 赞同：1
> 
> 时间：2012-06-26T10:40:58.683
> 
> 标签：iphone, objective-c, ios, xcode4.2, emoji

请让我知道我们是否可以在 iOS 中添加自定义表情符号？我有客户要求。如何在 iOS 中以编程方式实现此功能？提前致谢。

# java - 在python中设置语言环境编码

> ID：11205571
> 
> 赞同：2
> 
> 时间：2012-06-26T10:41:17.533
> 
> 标签：java, python, encoding, locale, subprocess

我通过以下方式从我的 python 代码中调用一个 java 程序：

```
subprocess.check_output(["java", "-classpath", "/Users/feralvam/Programas/semanticvectors-3.4/semanticvectors-3.4.jar:/Users/feralvam/Programas/lucene-3.5.0/lucene-core-3.5.0.jar:/Users/feralvam/Programas/lucene-3.5.0/contrib/demo/lucene-demo-3.5.0.jar:", "pitt.search.semanticvectors.CompareTerms", "-queryvectorfile","/Users/feralvam/termvectors.bin",term1,term2]) 
```

“term1”和“term2”是从 UTF-8 编码的文本文件中读取的字符串。

当我从 PyDev（Eclipse 3.7.2 中的 2.5 版）运行此命令时，我得到以下输出：（此处，“term1”=“Eles”和“term2”=“é”）

```
Jun 26, 2012 11:20:55 AM pitt.search.semanticvectors.CompareTerms main
INFO: Opened query vector store from file: /Users/feralvam/termvectors.bin
Jun 26, 2012 11:20:55 AM pitt.search.semanticvectors.CompareTerms main
INFO: Couldn't open Lucene index at 
Jun 26, 2012 11:20:55 AM pitt.search.semanticvectors.CompareTerms main
INFO: No Lucene index for query term weighting, so all query terms will have same weight.
Didn't find vector for 'Eles'
No vector for 'Eles'
Didn't find vector for '??'
No vector for '??'
Jun 26, 2012 11:20:55 AM pitt.search.semanticvectors.CompareTerms main
INFO: Outputting similarity of "Eles" with "??" ... 
```

但是如果我从终端运行相同的命令，我会得到：

```
Jun 26, 2012 11:30:26 AM pitt.search.semanticvectors.CompareTerms main
INFO: Opened query vector store from file: /Users/feralvam/termvectors.bin
Jun 26, 2012 11:30:26 AM pitt.search.semanticvectors.CompareTerms main
INFO: Couldn't open Lucene index at 
Jun 26, 2012 11:30:26 AM pitt.search.semanticvectors.CompareTerms main
INFO: No Lucene index for query term weighting, so all query terms will have same weight.
Didn't find vector for 'Eles'
No vector for 'Eles'
Found vector for 'é'
Jun 26, 2012 11:30:26 AM pitt.search.semanticvectors.CompareTerms main
INFO: Outputting similarity of "Eles" with "é" ... 
```

撇开 SemanticVector 的工作原理不谈，问题是在第二种情况下“term2”以正确的编码传递，但在第一种情况下不会发生这种情况。

现在，使用这个命令：

```
print locale.getpreferredencoding(), sys.getdefaultencoding() 
```

我得到以下信息：US-ASCII utf-8（在 PyDev 中）和 UTF-8 ascii（在终端中）

所以我认为正在发生的是它使用 US-ASCII 编码来传递参数，因此结果是错误的，因为单词没有正确的编码。顺便说一句，我使用的是 python 2.7。

有什么办法可以改变这个吗？

在此先感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:53:22.347

启动进程时，您可以在 LANG 环境变量中传递语言环境名称。做类似的事情：

```
env = os.environ.copy()
env['LANG'] = 'en_US.UTF-8'
subprocess.check_output( ..., env = env) 
```

# c# - 从 C# 将数据导出并格式化为 Excel

> ID：11205572
> 
> 赞同：1
> 
> 时间：2012-06-26T10:41:22.550
> 
> 标签：c#, excel

我知道这个话题已经讨论过了，但我认为它有一些不同之处。我有一些要复制到 Excel 的对象列表。如果可能的话，我还需要格式化电子表格的外观。有人说这是某种 Excel 自动化库，或者允许您从代码构建电子表格。这样我应该能够创建该文档并稍后打开它。关于这件事有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:49:20.747

如果您创建的典型 Excel 文档不使用 Excel 的高级功能，那么像 NPOI [http://npoi.codeplex.com/](http://npoi.codeplex.com/)或[http://code.google.com/p/npoi/](http://code.google.com/p/npoi/)这样的库可以很好地呈现。或者另一个叫做 ExcelLibrary。我个人非常轻松地使用了 NPOI 库。服务器端办公自动化存在已知的复杂性/问题：http: [//support.microsoft.com/kb/257757](http://support.microsoft.com/kb/257757)。NPOI 适用于生成 xls（2007 年之前的 Excel 版本）文件。如果您乐于制作 xslx（2007 年后 Excel 版本）文件，请使用 OpenXML - 它能够支持您在 xslx 文档中可能需要的几乎所有功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:01:27.587

您可以从 C# 将数据导出到 Excel，您能否向我们提供有关要从中导出的对象的更多信息，例如，如果您需要从 Listview 创建和打开一个 excel 文档，您可以这样做：

首先，您需要添加 Microsoft.Office.Interop.Excel 作为对项目的引用，并将以下程序集添加到您的代码中： using Excel = Microsoft.Office.Interop.Excel;

```
 //This would convert the listview1 content to Excel document and create the file in the given path        
    private void CreateExcelFromListview()
    {
        ListViewExport.ListViewToCsv(listView1, "C:\\test.csv", true);
        OpenInExcel("C:\\test.csv");
    }

    //This would open the document on screen
    public void OpenInExcel(string strFileName)
    {
        try
        {
            new Excel.Application {Visible = true}.Workbooks.Open(strFileName);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:06:12.547

如果您对 OpenXML 或到目前为止建议的其他库不满意，您可能会关心查看[Aspose.Cells](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default_original.aspx)。我已经在两个不同的项目中使用它，效果很好，没有问题（它确实有一些颜色格式的怪癖，但可以解决它们）。

它允许您读取和构建 Excel 文件（在所有版本中），在单元格和更多堆中声明公式，并且不需要在终端工作站上使用 Excel。

但是，对于您声明的需求来说，它可能有点过头了——它从 999 美元起**并不便宜**，而且随着您想要开发和部署的范围越广，它的价格就会迅速上涨。

# jquery - 在 jquery 中显示图像

> ID：11205573
> 
> 赞同：0
> 
> 时间：2012-06-26T10:41:26.413
> 
> 标签：jquery

我正在尝试通过以下方式提供静态路径来显示图像。但是图像没有显示。任何人都可以找出我哪里出错了。以下是我的代码

```
$("#p").live('click', function (event){var pathname = '';
$("input[type=file]").each(function () {

    var pathname = pathname+$(this).val();
    var f = pathname.replace(/^.*[\\\/]/, ''); 
    alert(f);
    $("#s").attr('src', f);
  }); 
```

html代码

```
 <img style="margin-top:0px; width:2in; height:2in;" id="s" class="imagePreview" />       
 <input type="button" value="Preview" class="k-button" id="p" /> 
 <div id="example" class="k-content"> 
    <div class="configuration k-widget k-header">  
    </div> 
    <form method="post" action="" style="width:45%"> 

    <div> <input name="files" id="files" type="file" onpropertychange="checkimage()"/> 

    <input type="button" value="Submit" class="k-button" id="sub"/> </div> 
    </form> 
  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:51:39.097

您只提供**src**属性，您需要**附加**它才能显示。

# sql - 列出表中不同的元组（SQL 查询）（10 种方式）

> ID：11205578
> 
> 赞同：3
> 
> 时间：2012-06-26T10:41:41.467
> 
> 标签：sql, database

在表中列出**不同元组的不同方法是什么，****高盛**的原始问题说列出 10 种不同的方法，其中一种方法是使用**DISTINCT**。任何人都可以帮助我更多..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T10:46:24.833

这里有四个。

`GROUP BY <all_columns>`

`SELECT * FROM T INTERSECT SELECT * FROM T`

`SELECT * FROM T UNION SELECT * FROM T`

`SELECT * FROM T EXCEPT SELECT * FROM T WHERE 1 = 0`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:50:05.167

这是另一个（ANSI SQL）

```
select *
from (
    select t.*,
           row_number() over (partition by <all_columns>) as rn
    from t
) t
where rn = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-30T06:12:58.023

```
Set @row:=0; 
select colname from (select colname,@row:=@row+1 as Row from tablename group by colname) as abc where Row>0; 
```

这是通过为条目提供行名称的另一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:55:42.707

1 使用计数和分组方式：

```
select f1,f2,count(*) from sample_table 
group by f1,f2 
having count(*) = 1; 
```

2 使用公用表表达式：

```
;WITH CTE (Col1,Col2,Col3,DuplicateCount)
AS
(
SELECT Col1,Col2,Col3,
ROW_NUMBER() OVER(PARTITION BY Col1,Col2,Col3 ORDER BY Col1) AS DuplicateCount
FROM MyTable)
Select * from CTE Where DuplicateCount=1 
```

# iphone - Objective C / IOS5 - 根视图 - 从空应用程序模板构建 (XCODE)

> ID：11205582
> 
> 赞同：-2
> 
> 时间：2012-06-26T10:41:54.307
> 
> 标签：iphone, objective-c, view, interface

出于学习目的，我正在尝试从头开始构建“SingleView”应用程序。

几乎 - 我使用“EmptyApp”模板。我这样做是为了了解视图在 iPhone 应用程序中的实例化方式。

到目前为止，我得到了以下信息：

*   AppDelegate.h
*   AppDelegate.m
*   StoryBoard（带有一个 ViewController 和一个嵌套视图。viewController 也绑定到我的类 ViewController）
*   视图控制器.h
*   视图控制器.m

我从“SingleViewApp 模板”复制了脚本。但是当我测试应用程序时，我的视图仍然没有显示。

看起来我错过了一些东西。它必须是绑定或类似的东西，因为脚本本身应该是相同的。控制台也给我以下消息：

> “应用程序在应用程序启动结束时应该有一个根视图控制器”

好的。我如何告诉我的应用程序，获取我的视图并将其用作根视图？

谢谢伙计们......感谢每一个帮助

莫吉奥

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:44:36.020

在您的项目 info.plist 中，您需要指定主情节提要文件

![在此处输入图像描述](../Images/d7667d43d97ec03c926bc36e73f08833.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:48:45.120

在您的 AppDelegate 的 didFinishLaunchingWithOption 中，您应该有类似的内容：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;
} 
```

还要检查你的 main.m

```
retVal = UIApplicationMain(argc, argv, nil, @"AppDelegate"); 
```

您应该设置实现 UIApplicationDelegate 协议的类名，通常是 AppDelegate

@interface AppDelegate : UIResponder < UIApplicationDelegate >

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-29T10:55:53.070

添加到 Omar Abdelhafith 的答案：

除了添加属性“主故事板文件基本名称”值之外，还有您的故事板文件名（不带扩展名 .storyboard）。

您需要像这样更改 AppDelegate：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /*self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];*/
    return YES;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T10:46:51.597

在情节提要中，您需要将视图控制器设置为“初始视图控制器”。它位于右侧的属性（属性检查器）中。

# mysql - SQLSTATE [42S02]：未找到基表或视图：1109 字段列表中的未知表 's0_'

> ID：11205583
> 
> 赞同：0
> 
> 时间：2012-06-26T10:41:54.333
> 
> 标签：mysql, doctrine-orm

使用 Doctrine 获得以下异常：`SQLSTATE[42S02]: Base table or view not found: 1109 Unknown table 's0_' in field list`

在 exeption 之前执行的查询在同一个表上工作得很好：请注意，在映射中，我必须在列名 ADR#A 中加上引号 '`' 因为列名中的 #

```
SELECT count(DISTINCT s0_.`ADR#A`) AS sclr0 FROM stadrp s0_ 
```

但是，此查询会弹出异常。

```
SELECT DISTINCT s0_.`ADR#A` AS ADR#A0, s0_.`ADR#A` AS ADR#A1 
FROM stadrp s0_ 
ORDER BY s0_.`ADR#A` ASC 
LIMIT 25 OFFSET 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:52:26.510

`#`用于注释 MySQL 中的语句。
如果您希望它成为标签的一部分，请使用引号将其括起来。

```
SELECT DISTINCT s0_.`ADR#A` AS 'ADR#A0', s0_.`ADR#A` AS 'ADR#A1' 
FROM stadrp s0_ 
ORDER BY s0_.`ADR#A` ASC 
LIMIT 25 OFFSET 0 
```

# javascript - 使用 Jquery 组合功能以在一组单选按钮中显示输入字段旁边的单选按钮

> ID：11205586
> 
> 赞同：0
> 
> 时间：2012-06-26T10:41:58.737
> 
> 标签：javascript, jquery, radio-button

我有一个广播**组**，其中包含 n 个选项。每个单选按钮都位于一个滑块旁边，我只想在选中组中的该单选选项时才显示该滑块。

我想我可以用一个 id 识别每个单选按钮 n 次，每个带有 id 的滑块在检查时显示它，例如：

```
if ($('#rToggle').is(':checked')) {
        $('#pSlider1').show(); } 
```

我只是想知道是否有更好的方法来尽可能少地使用 IF 语句。

**提议的代码（带有单独的 id）：**

```
 <tr>
        <td class="first-column">&nbsp;</td>
        <td>
          <div class="layout-slider layout-slider-radio">
            <input type="radio" id="rToggle" name="periodType" default>
          </div>
          <div class="layout-slider layout-slider-label">Day</div>
          <div id="pSlider1" class="layout-slider layout-slider-slider">
            <input id="Slider2" type="slider" name="day" value="2;15" />
          </div>
        </td>
      </tr> 
```

**实际代码（无 ID）：**

```
 <tr>
        <td class="first-column">&nbsp;</td>
        <td>
          <div class="layout-slider layout-slider-radio">
            <input type="radio" name="periodType" default>
          </div>
          <div class="layout-slider layout-slider-label">Day</div>
          <div class="layout-slider layout-slider-slider">
            <input id="Slider1" type="slider" name="day" value="2;15" />
          </div>
        </td>
      </tr>
      <tr>
        <td class="first-column">&nbsp;</td>
        <td>
          <div class="layout-slider layout-slider-radio">
            <input type="radio" name="periodType" default>
          </div>
          <div class="layout-slider layout-slider-label">Month</div>
          <div class="layout-slider layout-slider-slider">
            <input id="Slider2" type="slider" name="month" value="2;15" />
          </div>
        </td>
      </tr>
      <tr>
        <td class="first-column">&nbsp;</td>
        <td>
          <div class="layout-slider layout-slider-radio">
            <input type="radio" name="periodType" default>
          </div>
          <div class="layout-slider layout-slider-label">Year</div>
          <div class="layout-slider layout-slider-slider">
            <input id="Slider3" type="slider" name="year" value="2;15" />
          </div>
        </td>
      </tr> 
```

这些行持续了n次......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:48:07.547

is:checked 函数只会检查一次状态。您想要的是在未选中/选中时切换显示，因此您应该像这样使用更改事件：

```
$("input[type=radio][name=foo]").change(function() {
       $("#div").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:00:39.763

你有几个选择。

`data-sliderid`在单选按钮上放置一个属性，在`<div>`包含滑块的 上放置一个 ID，例如：

HTML

```
<td>
    <div class="layout-slider layout-slider-radio">
        <input type="radio" name="periodType" data-sliderid="pSlider1" default>
    </div>
    <div class="layout-slider layout-slider-label">Day</div>
    <div id="pSlider1" class="layout-slider layout-slider-slider">
        <input id="Slider1" type="slider" name="day" value="2;15" />
    </div>
</td> 
```

JavaScript

```
$('input[name="periodType"]').change(function() {
    if(this.checked) {
        $('#' + $(this).data('sliderid')).show();
    }
}); 
```

或者使用 DOM 遍历：

```
$('input[name="periodType"]').change(function() {
    var $sliderDiv = $(this).closest('div').siblings('.layout-slider-slider');
    if(this.checked) {
        $sliderDiv.show();
    }
}); 
```

# javascript - 我如何访问 href 属性以根据要求比较 url？

> ID：11205588
> 
> 赞同：0
> 
> 时间：2012-06-26T10:42:00.677
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:45:35.750

考虑以下：

1.  在`for`循环中使用`i < mainarticle.length`而不是`i <= mainarticle.length`. 您当前`for`定义的循环将使您脱离`mainarticle`.
2.  当我们查看`for`循环时...我建议声明一个要存储的变量，`mainarticle.length`这样您就不会在`length`每次迭代时都查找属性：`for (var i = 0, l = mainarticle.length; i < l; i++)`.
3.  `href`是锚点 DOM 元素的一个属性，所以只需像这样引用它：`current_article.firstChild.attributes.href`而不是`current_article.firstChild.attributes[href]`.
4.  `var theParagraph = getElementsByClassName('catg_list');`抓取具有该类名的*每个*`theParagraph`DOM 元素，因此实际上是三个元素的节点集合。
5.  无论如何，你已经有了你正在寻找的元素。您将其分配给变量`current_article`，因此只需使用`current_article.id = 'aaaa';`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:45:24.007

`current_article.firstChild.attributes[href]`肯定应该是`current_article.firstChild.attributes['href']`或`current_article.firstChild.attributes.href`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-29T01:05:21.787

你需要使用

```
current_article.firstChild.attributes.href.value or
current_article.firstChild.attributes.href.nodeName or
current_article.firstChild.attributes.href.name 
```

（还有更多）

代替

```
current_article.firstChild.attributes.href 
```

只要

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:15:45.147

在您的代码中：

```
> for (var i = 0; i <= mainarticle.length; i++) {
>     var current_article = mainarticle[i];
>     if (url_string == current_article.firstChild.attributes[href]) { 
```

元素的 attributes 属性返回[NamedNodeMap](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1780488922)。这些属性可以通过名称访问，但您必须使用正确的语法。要使用方括号表示法获取名为*href的属性：*

```
 current_article.firstChild.attributes['href']; 
```

要使用点表示法（允许 href 是有效标识符），这可能更方便：

```
 current_article.firstChild.attributes.href; 
```

但这只是返回属性节点。如果你想要实际值：

```
 current_article.firstChild.attributes.href.value; 
```

但这一切似乎需要做很多工作，为什么不直接访问属性来获取值：

```
 current_article.firstChild.href;

>         var theParagraph = getElementsByClassName('catg_list'); 
```

[getElementsByClassName](http://www.w3.org/TR/dom/#dom-document-getelementsbyclassname)是文档和元素接口的一种方法（最初在 HTML5 中标准化，但现在移至 DOM 4 核心），因此：

```
 var theParagraph = document.getElementsByClassName('catg_list'); 
```

.

```
>         theParagraph.setAttribute('id', 'aaaa'); 
```

但是 getElementsByClassName 返回一个实时[HTML 集合](http://www.w3.org/TR/dom/#htmlcollection)（一种[NodeList](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)），并且它们没有*setAttribute*方法。您可以通过索引访问成员。如果您希望只返回一个元素，它将位于索引 0 处，您可以使用以下方法设置其 id 属性：

```
 theParagraph[0].id = 'aaa'; 
```

### 编辑

访问 href 属性：

```
<a href="http://www.google.com" onclick="
   return confirm('Do you really want to go to ' + this.href + '?')
">Google</a> 
```

# jquery - Jquery在aspx普通页面中工作但不在内容页面中

> ID：11205590
> 
> 赞同：0
> 
> 时间：2012-06-26T10:42:02.543
> 
> 标签：jquery, asp.net, .net, jquery-plugins

两个代码都相同，唯一的区别是一个在母版页中，另一个不在。

我只想知道当我们在 jquery 函数调用和嵌入中将页面转换为母版页时我需要对代码进行哪些更改

这里 workign 意味着我可以在页面中看到 css 效果，并且调用 Javascrpt 验证这不起作用（内容页面）

```
<%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Site.Master" CodeBehind="WebForm2.aspx.vb" Inherits="JqueryTest.WebForm2" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
<%--<link rel="stylesheet" href='<%=Page.ResolveUrl("./JQuery/validationEngine.jquery.css")%>' type="text/css" />
<link rel="stylesheet" href='<%=Page.ResolveUrl("./JQuery/template.css")%>' type="text/css") />
<script src='<%=Page.ResolveUrl("./JQuery/jquery-1.6.min.js")%>' type="text/javascript">
    </script>
<script src='<%=Page.ResolveUrl("./JQuery/jquery.validationEngine-en.js")%>' type="text/javascript"
    charset="utf-8">
    </script>
<script src='<%=Page.ResolveUrl("./JQuery/jquery.validationEngine.js")%>' type="text/javascript"
    charset="utf-8">
    </script>--%>

    <link rel="stylesheet" href="./JQuery/validationEngine.jquery.css"
    type="text/css"  />
<link rel="stylesheet" href="./JQuery/template.css" type="text/css" />
<script src="./JQuery/jquery-1.6.min.js" type="text/javascript" >
    </script>
<script src="./JQuery/jquery.validationEngine-en.js" type="text/javascript"
    charset="utf-8" >
    </script>
<script src="./JQuery/jquery.validationEngine.js" type="text/javascript"
    charset="utf-8" >
    </script>

    <script>
        jQuery(document).ready(function () {
            // binds form submission and fields to the validation engine
            jQuery("#formID").validationEngine();
        });

        function checkHELLO(field, rules, i, options) {
            if (field.val() != "HELLO") {
                // this allows to use i18 for the error msgs
                return options.allrules.validate2fields.alertText;
            }
        }
    </script>

</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
  <p>
        <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
            onclick="alert(&#39;is the form valid? &#39;+jQuery(&#39;#formID&#39;).validationEngine(&#39;validate&#39;))">
            Evaluate form</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                onclick="jQuery(&#39;#sport&#39;).validationEngine(&#39;validate&#39;)">Validate
                sport1 select field</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                    onclick="jQuery(&#39;#sport&#39;).validationEngine(&#39;hide&#39;)">Close favorite
                    sport 1 prompt</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                        onclick="jQuery(&#39;#formID&#39;).validationEngine(&#39;hide&#39;)">Close all prompts
                        on form</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                            onclick="jQuery(&#39;#formID&#39;).validationEngine(&#39;updatePromptsPosition&#39;)">
                            Update all prompts positions</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                                onclick="jQuery(&#39;#test&#39;).validationEngine(&#39;showPrompt&#39;, &#39;This is an example&#39;, &#39;pass&#39;)">
                                Build a prompt on a div</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                                    onclick="jQuery(&#39;#test&#39;).validationEngine(&#39;hide&#39;)">Close div prompt</a>
        | <a href="http://www.position-relative.net/creation/formValidator/index.html">Back
            to index</a>
    </p>
    <p>
        This demonstration shows the different validators available
        <br>
    </p>
    <div id="test" class="test" style="width: 150px;">
        This is a div element</div>
    <form id="formID" class="formular" method="post">
    <fieldset>
        <legend>Required! </legend>
        <label>
            <span>Field is required : </span>
            <input value="" class="validate[required] text-input" type="text" name="req" id="req">
        </label>
        <legend>Placeholder &amp; required </legend>
        <label>
            <span>Field is required : </span>
            <input value="This is a placeholder" data-validation-placeholder="This is a placeholder"
                class="validate[required] text-input" type="text" name="reqplaceholder" id="reqplaceholder">
        </label>
        <label>
            <span>Favorite sport 1:</span>
            <select name="sport" id="sport" class="validate[required]">
                <option value="">Choose a sport</option>
                <option value="option1">Tennis</option>
                <option value="option2">Football</option>
                <option value="option3">Golf</option>
            </select>
        </label>
        <label>
            <span>Favorite sport 2:</span>
            <select name="sport2" id="sport2" multiple="" class="validate[required]">
                <option value="">Choose a sport</option>
                <option value="option1">Tennis</option>
                <option value="option2">Football</option>
                <option value="option3">Golf</option>
            </select>
        </label>
        <br>
        validate[required]
    </fieldset>
    <fieldset>
        <legend>Custom </legend>
        <label>
            <p>
                Comes with many predifined regex (phone, url, ip, email..etc)</p>
            <a href="http://www.position-relative.net/creation/formValidator/demos/demoRegExp.html">
                [DEMO]</a>
            <br>
            <span>Enter a URL : </span>
            <input value="http://" class="validate[required,custom[url]] text-input" type="text"
                name="url" id="url">
            <br>
            validate[required,custom[url]]
        </label>
    </fieldset>

    <fieldset>
        <legend>Function </legend>
        <label>
            <span>Write 'HELLO' : </span>
            <input value="" class="validate[required,funcCall[checkHELLO]] text-input" type="text"
                id="lastname" name="lastname">
            <br>
            validate[required,funcCall[checkHELLO]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Past </legend>
        <label>
            Checks that the value is a date in the past
            <br>
            <span>Please enter a date ealier than 2010/01/01</span>
            <input value="2009/06/30" class="validate[custom[date],past[2010/01/01]] text-input"
                type="text" name="past" id="past">
            <br>
            validate[custom[date],past[2010/01/01]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Future </legend>
        <label>
            Checks that the value is a date in the future
            <br>
            <span>Please enter a date older than today's date</span>
            <input value="2011-01-" class="validate[custom[date],future[NOW]] text-input" type="text"
                name="future" id="future">
            <br>
            validate[custom[date],future[NOW]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Group required </legend>
        <label>
            Checks if at least one of the input is not empty.
            <br>
            <br>
            <span>Please enter a credit card</span>
        </label>
        <input value="" class="validate[groupRequired[payments]] text-input" type="text"
            name="creditcard1" id="creditcard1">
        <label>
            <strong>OR</strong></label><br>
        <label>
            Please enter a paypal acccount</label>
        <input value="" class="validate[groupRequired[payments],custom[email]] text-input"
            type="text" name="paypal" id="paypal">
        <label>
            <strong>OR</strong></label><br>
        <label>
            Please enter a bank account</label>
        <input value="" class="validate[groupRequired[payments],custom[integer]] text-input"
            type="text" name="bank" id="bank">
        <label>
            <strong>OR</strong></label><br>
        <label>
            Please choose from select</label>
        <select class="validate[groupRequired[payments]] text-input" type="text" name="bank2"
            id="bank2">
            <option value="">Choose a payment option</option>
            <option value="Paypal">Paypal</option>
            <option value="Bank">Bank account</option>
        </select>
    </fieldset>
    <fieldset>
        <legend>Date Range<br>
        </legend>
        <label>
            Checks that the start date is before the end date Please enter an end date ealier
            than the start date<br>
            <br>
            <label for="date1">
                Start Date :
            </label>
            <input value="9/1/2009" class="validate[dateRange[grp1]]" type="text" id="date1">
        </label>
        <label>
            <label for="date2">
                End Date :
            </label>
            <input value="3/18/1985" class="validate[dateRange[grp1]]" type="text" id="date2">
            <br>
            validate[dateRange[grp1]]<br>
            Note* Both fields must have the same name
        </label>
    </fieldset>
    <fieldset>
        <legend>Date Time Range<br>
        </legend>
        <label>
            Checks that the start date and time are before the end date and time Please enter
            an end date ealier than the start date<br>
            <br>
            <label for="date1">
                Start Date Time:
            </label>
            <input value="9/1/2009 9:30:00 PM" class="validate[dateTimeRange[grp2]]" type="text"
                id="datetime1">
        </label>
        <label>
            <label for="date2">
                End Date Time:
            </label>
            <input value="9/1/2009 2:30:00 AM" class="validate[dateTimeRange[grp2]]" type="text"
                id="datetime2">
            <br>
            validate[dateTimeRange[grp2]<br>
            Note* Both fields must have the same name
        </label>
    </fieldset>
    <fieldset>
        <legend>Credit Card </legend>
        <label>
            Checks that the credit card number is at least theoretically valid, according the
            to the <a href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn checksum algorithm</a>,
            but not whether the specific card number is active with a bank, etc.
            <br>
            <br>
            Since credit cards are often presented in different formats, spaces and hyphens
            (' ','-') are simply ignored.
            <br>
            <br>
            Examples:<br>
            <ul>
                <li>4111 1111 1111 1111</li>
                <li>3737-321345-610004</li>
            </ul>
            <a href="http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/credit_card_numbers.htm">
                More examples</a>
            <br>
            <input value="" class="validate[required,creditCard] text-input" type="text" name="creditcard2"
                id="creditcard2">
            <br>
            validate[required,creditCard]
        </label>
    </fieldset>
    <fieldset>
        <legend>Checkbox </legend>
        <label>
            Check this <a href="http://www.position-relative.net/creation/formValidator/demos/demoCheckBox.html">
                [DEMO]</a>
        </label>
    </fieldset>
    <fieldset>
        <legend>Ajax </legend>
        <label>
            Check this <a href="http://www.position-relative.net/creation/formValidator/demos/demoAjaxSubmitPHP.html">
                [DEMO]</a>
        </label>
    </fieldset>
    <input class="submit" type="submit" value="Validate &amp; Send the form!"><hr>
    </form>
</asp:Content> 
```

这是工作（正常的 ASPX 页面）

```
<!DOCTYPE html>
<!-- saved from url=(0081)http://www.position-relative.net/creation/formValidator/demos/demoValidators.html -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>JQuery Validation Engine</title>
    <link rel="stylesheet" href="./JQuery Validation Engine_files/validationEngine.jquery.css"
        type="text/css">
    <link rel="stylesheet" href="./JQuery Validation Engine_files/template.css" type="text/css">
    <script src="./JQuery Validation Engine_files/jquery-1.6.min.js" type="text/javascript">
    </script>
    <script src="./JQuery Validation Engine_files/jquery.validationEngine-en.js" type="text/javascript"
        charset="utf-8">
    </script>
    <script src="./JQuery Validation Engine_files/jquery.validationEngine.js" type="text/javascript"
        charset="utf-8">
    </script>
    <script>
        jQuery(document).ready(function () {
            // binds form submission and fields to the validation engine
            jQuery("#formID").validationEngine();
        });

        function checkHELLO(field, rules, i, options) {
            if (field.val() != "HELLO") {
                // this allows to use i18 for the error msgs
                return options.allrules.validate2fields.alertText;
            }
        }
    </script>
</head>
<body>
    <p>
        <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
            onclick="alert(&#39;is the form valid? &#39;+jQuery(&#39;#formID&#39;).validationEngine(&#39;validate&#39;))">
            Evaluate form</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                onclick="jQuery(&#39;#sport&#39;).validationEngine(&#39;validate&#39;)">Validate
                sport1 select field</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                    onclick="jQuery(&#39;#sport&#39;).validationEngine(&#39;hide&#39;)">Close favorite
                    sport 1 prompt</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                        onclick="jQuery(&#39;#formID&#39;).validationEngine(&#39;hide&#39;)">Close all prompts
                        on form</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                            onclick="jQuery(&#39;#formID&#39;).validationEngine(&#39;updatePromptsPosition&#39;)">
                            Update all prompts positions</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                                onclick="jQuery(&#39;#test&#39;).validationEngine(&#39;showPrompt&#39;, &#39;This is an example&#39;, &#39;pass&#39;)">
                                Build a prompt on a div</a> | <a href="http://www.position-relative.net/creation/formValidator/demos/demoValidators.html#"
                                    onclick="jQuery(&#39;#test&#39;).validationEngine(&#39;hide&#39;)">Close div prompt</a>
        | <a href="http://www.position-relative.net/creation/formValidator/index.html">Back
            to index</a>
    </p>
    <p>
        This demonstration shows the different validators available
        <br>
    </p>
    <div id="test" class="test" style="width: 150px;">
        This is a div element</div>
    <form id="formID" class="formular" method="post">
    <fieldset>
        <legend>Required! </legend>
        <label>
            <span>Field is required : </span>
            <input value="" class="validate[required] text-input" type="text" name="req" id="req">
        </label>
        <legend>Placeholder &amp; required </legend>
        <label>
            <span>Field is required : </span>
            <input value="This is a placeholder" data-validation-placeholder="This is a placeholder"
                class="validate[required] text-input" type="text" name="reqplaceholder" id="reqplaceholder">
        </label>
        <label>
            <span>Favorite sport 1:</span>
            <select name="sport" id="sport" class="validate[required]">
                <option value="">Choose a sport</option>
                <option value="option1">Tennis</option>
                <option value="option2">Football</option>
                <option value="option3">Golf</option>
            </select>
        </label>
        <label>
            <span>Favorite sport 2:</span>
            <select name="sport2" id="sport2" multiple="" class="validate[required]">
                <option value="">Choose a sport</option>
                <option value="option1">Tennis</option>
                <option value="option2">Football</option>
                <option value="option3">Golf</option>
            </select>
        </label>
        <br>
        validate[required]
    </fieldset>

    <fieldset>
        <legend>Equals </legend>
        <label>
            <span>Password : </span>
            <input value="karnius" class="validate[required] text-input" type="password" name="password"
                id="password">
        </label>
        <label>
            <span>Confirm password : </span>
            <input value="kaniusBAD" class="validate[required,equals[password]] text-input" type="password"
                name="password2" id="password2">
            <br>
            validate[required,equals[password]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Function </legend>
        <label>
            <span>Write 'HELLO' : </span>
            <input value="" class="validate[required,funcCall[checkHELLO]] text-input" type="text"
                id="lastname" name="lastname">
            <br>
            validate[required,funcCall[checkHELLO]]
        </label>
    </fieldset>
    <fieldset>
        <legend>MinSize </legend>
        <label>
            Minimum field size
            <br>
            <input value="" class="validate[required,minSize[6]] text-input" type="text" name="minsize"
                id="minsize">
            <br>
            validate[required,minSize[6]]
        </label>
    </fieldset>
    <fieldset>
        <legend>MaxSize </legend>
        <label>
            Maximum field size, optional
            <br>
            <input value="0123456789" class="validate[optional,maxSize[6]] text-input" type="text"
                name="maxsize" id="maxsize">
            <br>
            validate[maxSize[6]]<br>
            note that the field is optional - it won't fail if it has no value
        </label>
    </fieldset>
    <fieldset>
        <legend>Min </legend>
        <label>
            integer &gt;= -5
            <br>
            <input value="-7" class="validate[required,custom[integer],min[-5]] text-input" type="text"
                name="min" id="min">
            <br>
            validate[required,custom[integer],min[-5]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Max </legend>
        <label>
            integer ,50]
            <br>
            <input value="55" class="validate[required,custom[integer],max[50]] text-input" type="text"
                name="max" id="max">
            <br>
            validate[required,custom[integer],max[50]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Past </legend>
        <label>
            Checks that the value is a date in the past
            <br>
            <span>Please enter a date ealier than 2010/01/01</span>
            <input value="2009/06/30" class="validate[custom[date],past[2010/01/01]] text-input"
                type="text" name="past" id="past">
            <br>
            validate[custom[date],past[2010/01/01]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Future </legend>
        <label>
            Checks that the value is a date in the future
            <br>
            <span>Please enter a date older than today's date</span>
            <input value="2011-01-" class="validate[custom[date],future[NOW]] text-input" type="text"
                name="future" id="future">
            <br>
            validate[custom[date],future[NOW]]
        </label>
    </fieldset>
    <fieldset>
        <legend>Group required </legend>
        <label>
            Checks if at least one of the input is not empty.
            <br>
            <br>
            <span>Please enter a credit card</span>
        </label>
        <input value="" class="validate[groupRequired[payments]] text-input" type="text"
            name="creditcard1" id="creditcard1">
        <label>
            <strong>OR</strong></label><br>
        <label>
            Please enter a paypal acccount</label>
        <input value="" class="validate[groupRequired[payments],custom[email]] text-input"
            type="text" name="paypal" id="paypal">
        <label>
            <strong>OR</strong></label><br>
        <label>
            Please enter a bank account</label>
        <input value="" class="validate[groupRequired[payments],custom[integer]] text-input"
            type="text" name="bank" id="bank">
        <label>
            <strong>OR</strong></label><br>
        <label>
            Please choose from select</label>
        <select class="validate[groupRequired[payments]] text-input" type="text" name="bank2"
            id="bank2">
            <option value="">Choose a payment option</option>
            <option value="Paypal">Paypal</option>
            <option value="Bank">Bank account</option>
        </select>
    </fieldset>
    <fieldset>
        <legend>Date Range<br>
        </legend>
        <label>
            Checks that the start date is before the end date Please enter an end date ealier
            than the start date<br>
            <br>
            <label for="date1">
                Start Date :
            </label>
            <input value="9/1/2009" class="validate[dateRange[grp1]]" type="text" id="date1">
        </label>
        <label>
            <label for="date2">
                End Date :
            </label>
            <input value="3/18/1985" class="validate[dateRange[grp1]]" type="text" id="date2">
            <br>
            validate[dateRange[grp1]]<br>
            Note* Both fields must have the same name
        </label>
    </fieldset>
    <fieldset>
        <legend>Date Time Range<br>
        </legend>
        <label>
            Checks that the start date and time are before the end date and time Please enter
            an end date ealier than the start date<br>
            <br>
            <label for="date1">
                Start Date Time:
            </label>
            <input value="9/1/2009 9:30:00 PM" class="validate[dateTimeRange[grp2]]" type="text"
                id="datetime1">
        </label>
        <label>
            <label for="date2">
                End Date Time:
            </label>
            <input value="9/1/2009 2:30:00 AM" class="validate[dateTimeRange[grp2]]" type="text"
                id="datetime2">
            <br>
            validate[dateTimeRange[grp2]<br>
            Note* Both fields must have the same name
        </label>
    </fieldset>
    <fieldset>
        <legend>Credit Card </legend>
        <label>
            Checks that the credit card number is at least theoretically valid, according the
            to the <a href="http://en.wikipedia.org/wiki/Luhn_algorithm">Luhn checksum algorithm</a>,
            but not whether the specific card number is active with a bank, etc.
            <br>
            <br>
            Since credit cards are often presented in different formats, spaces and hyphens
            (' ','-') are simply ignored.
            <br>
            <br>
            Examples:<br>
            <ul>
                <li>4111 1111 1111 1111</li>
                <li>3737-321345-610004</li>
            </ul>
            <a href="http://www.paypalobjects.com/en_US/vhelp/paypalmanager_help/credit_card_numbers.htm">
                More examples</a>
            <br>
            <input value="" class="validate[required,creditCard] text-input" type="text" name="creditcard2"
                id="creditcard2">
            <br>
            validate[required,creditCard]
        </label>
    </fieldset>
    <fieldset>
        <legend>Checkbox </legend>
        <label>
            Check this <a href="http://www.position-relative.net/creation/formValidator/demos/demoCheckBox.html">
                [DEMO]</a>
        </label>
    </fieldset>
    <fieldset>
        <legend>Ajax </legend>
        <label>
            Check this <a href="http://www.position-relative.net/creation/formValidator/demos/demoAjaxSubmitPHP.html">
                [DEMO]</a>
        </label>
    </fieldset>
    <input class="submit" type="submit" value="Validate &amp; Send the form!"><hr>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:46:46.160

这只是在不知道您的站点结构的情况下的预感，但`Page.ResolveUrl`需要一个虚拟路径。您需要使您的 URL 根相对。

```
Page.ResolveUrl("~/JQuery/jquery-1.6.min.js") 
```

无论您的页面从何处加载，这都会呈现正确的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T22:56:38.677

这是我只使用 JQuery 或 Google 存储库的另一个原因检查一下：[http ://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)

使用这个进行测试

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

或者

```
<script src="http://code.jquery.com/jquery-latest.js"></script> 
```

祝你好运！

# opencv - 查看 2 张图像是否具有相同的颜色分布

> ID：11205591
> 
> 赞同：0
> 
> 时间：2012-06-26T10:42:05.157
> 
> 标签：opencv, computer-vision

我有两张图片：第一张是模型，第二张是目标。我想看看它们是否具有相同的颜色分布，与亮度无关。我该怎么做？也许有差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:55:11.373

也许您可以在 HSV 等颜色空间中使用[compareHist](http://opencv.itseez.com/modules/imgproc/doc/histograms.html?highlight=comparehist#comparehist)并比较 H（和 S）。[我相信这在这里](http://opencv.itseez.com/doc/tutorials/imgproc/histograms/histogram_comparison/histogram_comparison.html?highlight=histogram)得到了很好的解释。祝你好运

# sed - 基于正则表达式搜索删除多行

> ID：11205594
> 
> 赞同：2
> 
> 时间：2012-06-26T10:42:11.200
> 
> 标签：sed

如何根据正则表达式搜索删除行数？例如：如果我有一个文件：

```
aaa
bbb
ccc
ddd
bbb
eee 
```

我想删除包含“bbb”字符串的行和它之后的行。所以结果应该是这样的：

```
aaa
ddd 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T10:56:10.523

`addr1,+N`将匹配`addr1`和`N`后面的行`addr1`。

```
$ sed '/bbb/,+1d' file.txt 
aaa
ddd 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T10:57:30.117

试试这个，

```
sed '/bbb/{N;d;}' your_file.txt 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T10:57:02.300

```
printf "aaa\nbbb\nccc\nddd\neee" | sed '/bbb/,1+d' 
```

输出

```
aaa
ddd
eee 
```

# android - LinearLayout - 根据第二个子宽度制作第一个子宽度

> ID：11205601
> 
> 赞同：0
> 
> 时间：2012-06-26T10:42:32.183
> 
> 标签：android, layout

我正在尝试以`LinearLayout`编程方式添加水平，确保第二个孩子

占据它需要的所有宽度，第一个孩子将占据剩下的所有空间。

我没有要添加的代码，因为我尝试了很多选项，但还没有任何效果。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:56:07.980

设置`android:layout_weight="0"`为第二个孩子。对于第一个子集`android:layout_weight="1"`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T10:49:30.247

试试这个改变button3的文本

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="1.0" >

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Back" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Read sad s as d" />

</LinearLayout> 
```

# javascript - 在验证错误时将焦点设置为 inputText

> ID：11205604
> 
> 赞同：1
> 
> 时间：2012-06-26T10:42:35.163
> 
> 标签：javascript, validation, jsf, focus

当特定 inputText 出现验证错误时，我想将焦点设置在 JSF 中的 inputText 字段上。我该如何实施？

我认为 inputText 上的 validatorMessage 会立即执行此操作，但似乎不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:30:57.173

没有这样的默认行为。您需要自己实现它或使用 3rd 方库来完成这项工作。基本上，在渲染响应期间，您需要遍历所有[`UIInput`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html)组件的提交表单并找到第一个[`isValid()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIInput.html#isValid%28%29)返回的表单`false`，然后将其客户端 ID 存储在请求映射中，以便您可以将其打印为 JS 变量。

```
form.visitTree(VisitContext.createVisitContext(), new VisitCallback() {

    @Override
    public VisitResult visit(VisitContext context, UIComponent component) {
        if (component instanceof UIInput && !((UIInput) component).isValid()) {
            context.getFacesContext().getExternalContext().getRequestMap()
                .put("focus", component.getClientId(context.getFacesContext()));
            return VisitResult.COMPLETE;
        }

        return VisitResult.ACCEPT;
    }
}); 
```

然后您可以使用以下脚本来设置焦点：

```
<h:outputScript target="body">
    var focus = '#{focus}';

    if (focus) {
        document.getElementById(focus).focus();
    }
</h:outputScript> 
```

JSF 实用程序库[OmniFaces](http://omnifaces.org)有一个可重用的组件，[`<o:highlight>`](http://omnifaces.org/docs/vdldoc/current/o/highlight.html)（源代码[在这里](https://github.com/omnifaces/omnifaces/blob/master/src/org/omnifaces/component/script/Highlight.java)和展示演示[在这里](http://showcase.omnifaces.org/components/highlight)）。此外，它还在无效输入上设置样式类，以便您可以通过 CSS 指定不同的背景颜色。

# python - 从Python中的两个列表合并字典后如何从字典中获取键和值？

> ID：11205605
> 
> 赞同：0
> 
> 时间：2012-06-26T10:42:39.967
> 
> 标签：python, django, django-templates

我有两个清单：

```
list_a = [<User: x>, <User: y>]
list_b = [False, True] 
```

我想通过合并来创建字典。我通过以下代码做到了：

```
 details = dict(zip(list_a,list_b)) 
```

但我无法解决如何在模板中获取值的问题。

在我的模板代码中：

```
{% for x in details %}
   {{  }}
   {{  }}
{ % endfor %} 
```

我在模板中有这两个空标签。我想把它如下：

对于第一次迭代，

```
{{ x }}
{{ False}} 
```

对于第二次迭代，

```
 {{ y }}
 {{ True}} 
```

..等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:47:00.870

```
{% for key, value in details.iteritems %}
    {{ key }}
    {{ value }}
{ % endfor %} 
```

# android - Null 接收 Parcelable

> ID：11205608
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:42:45.757
> 
> 标签：android, parcelable

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:04:00.847

我假设您有一个 CREATOR，如果没有，请创建一个。然后我会这样尝试：

```
ArrayList<MyParcelable> myArrayListOfParcelables = new ArrayList<MyParcelable>();

//...

Intent intent = new Intent(this, ChooseGiftDetailsActivity.class);
intent.putIntExtra(Constants.FOO_COUNT, myArrayListOfParcelables.size());
MyParcelable p;
for (int i = 0; i < myArrayListOfParcelables.size(); i++){
    p = myArrayListOfParcelables.get(i);
    intent.putParcelableExtra(Constants.FOO + "_" + i, p);
}
startActivity(intent); 
```

然后再次像这样阅读它：

```
Intent intent = getIntent();
int cnt = intent.getIntExtra(Constants.FOO_COUNT);
ArrayList<MyParcelable> myArrayListOfParcelables = new ArrayList<MyParcelable>(cnt);
MyParcelable p;
for (int i = 0; i < cnt; i++){
    p = (MyParcelable)intent.getParcelableExtra(Constants.FOO + "_" + i);
    myArrayListOfParcelables.add(p);
} 
```

这样，您就有能力更好地看到引擎盖下发生的事情。您的 Parcelables 数组可能太大而无法被 Parceled。我试过一次通过位图并遇到类似的问题。

# java - Websphere j_security_check struts2 问题

> ID：11205610
> 
> 赞同：0
> 
> 时间：2012-06-26T10:42:51.900
> 
> 标签：java, struts2, websphere-7, j-security-check

我有一个使用基于表单的身份验证在 JBOSS 中运行良好的 Web 项目。但是当我在 websphere 7 中部署相同的内容时，我收到了 HTTP 500 错误。

我的**web.xml**

```
<display-name>Test</display-name>
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>*.action</url-pattern>
</filter-mapping>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
<listener>
    <listener-class>org.apache.tiles.web.startup.TilesListener</listener-class>
</listener>
<context-param>
    <param-name>org.apache.tiles.impl.BasicTilesContainer.DEFINITIONS_CONFIG</param-name>
    <param-value>/WEB-INF/tiles.xml</param-value>
</context-param>
<security-constraint>
    <web-resource-collection>
        <web-resource-name>test_actions</web-resource-name>
        <description></description>
        <url-pattern>*.action</url-pattern>
        <http-method>GET</http-method>
        <http-method>POST</http-method>
    </web-resource-collection>
    <auth-constraint>
        <description></description>
        <role-name>testuser</role-name>
    </auth-constraint>
    <user-data-constraint>
        <transport-guarantee>NONE</transport-guarantee>
    </user-data-constraint>
  </security-constraint>
  <security-role>
    <description></description>
    <role-name>testuser</role-name>
  </security-role>

<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>Default</realm-name>
    <form-login-config>
        <form-login-page>/login_form.jsp</form-login-page>
        <form-error-page>/login_error.jsp</form-error-page>
    </form-login-config>
</login-config> 
```

**索引.html**

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>TEST</title>
</head>
<body onload="document.MainForm.submit();">
    <form action="welcomeAction.action" method="post" id="MainForm" name="MainForm">
</form>
</body>
</html> 
```

我有一个拦截器**AuthorizationInterceptor**，它扩展**了 RolesInterceptor**，这个拦截器实际上检查用户是否存在于我们的 DB请求中。getUserPrincipal **().getName()**用于获取用户 ID。所以当**welcomeAction.action**被调用时，它应该来到 AuthorizationInterceptor，但从不请求到达这里。

在 websphere 中，我启用了全局安全性。Websphere LoginForm 示例工作正常。我应该自己纠正一个**j_security_check**过滤器吗？或 websphere webcontainer 处理这个。（在 LoginForm 中我看到了 LoginFilter 代码）。但我相信 websphere webcontainer 应该处理 j_security_check 的东西，比如 jboss 或 tomcat ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T19:10:23.453

您必须创建一个自定义表单并提交给 j_security_check。默认情况下，WebSphere 不处理此问题。参考：[http ://www.redbooks.ibm.com/abstracts/tips0220.html?Open](http://www.redbooks.ibm.com/abstracts/tips0220.html?Open)

# graphics - 在 gnuplot 中绘制四叉树轮廓

> ID：11205618
> 
> 赞同：0
> 
> 时间：2012-06-26T10:43:30.187
> 
> 标签：graphics, gnuplot, quadtree

我的代码中有一个类似四叉树的结构，我想在 gnuplot 中对其进行可视化。这意味着我想查看矩形细分。我想在 gnuplot 中使用它的原因是因为我想在这个轮廓上绘制一个 2d 函数以显示细分数量和函数值之间的相关性。

有没有人知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T14:00:33.930

我能想到两种解决方案——但它们都涉及到你的大量工作。您基本上需要将每一行放入一个文本文件中。有两种方法可以做到——第一种方法是将每个行段放在数据文件中的一行上并用箭头绘制：

```
#datafile -- Each row represents a line.
x11 y11 x12 y12
x21 y21 x22 y22
... 
```

然后你绘制它：

```
set style arrow 1 nohead
plot 'datafile' u 1:2:($3-$1):($4-$2) w vec 
```

将每个点单独放置的第二种方法，用空格分隔点组：

```
#datafile -- each row represents a point
x11 y11
x12 y12

x21 y21
x22 y22

... 
```

然后你用以下方式绘制这个：

```
plot 'datafile' u 1:2 w l 
```

将您的数据转换成这种形式应该不会太难——只需遍历每个分支，直到到达一个叶子并写出与该叶子相关的 4 行。某些行（或其部分）将被复制，但这可能不会成为太大的问题......

**编辑**

我没有意识到您需要在顶部绘制 2d 函数。在这种情况下，我们将需要使用`splot`来绘制数据：

```
set term push  #save terminal info
set term unknown
set contour
set cntrparam ... #whatever you need to make your contours appear the way you want
set table "junk_temporary_file.dat"
splot f(x,y)  #whatever function you choose goes here.
unset table
unset contour

set term pop  #restore terminal info
set view map
splot 'datafile'                u 1:2:(0.0) w l,\
      'junk_temporary_file.dat' u 1:2:3     w l #optional line specs here. 
```

如果你想要颜色，它会更容易一点（很多）：

```
set view map
splot f(x,y) w pm3d,\
      'datafile' u 1:2:(0.0) w l 
```

# java - 使用 gson 创建 JSONObject 并传递给构造函数

> ID：11205619
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:43:31.900
> 
> 标签：java, json, gson

我想使用 gson 库从文件创建 JSONObject 并将该对象传递给构造函数。

假设我的名为“config.json”的 json 文件如下所示：

```
{"name": "my name"} 
```

然后我想做这样的事情

```
File jsonFile = new File("config.json");
Gson jsonObject = gson.createJson(jsonFile);

OtherClass newInstance = new OtherClass(jsonObject); 
```

在 OtherClass 我可以打电话

```
jsonObject.name; 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:50:01.407

您应该查阅[Gson API](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/Gson.html#fromJson%28java.io.Reader,%20java.lang.Class%29)，它非常全面。您将需要使用 FileReader 来读取输入文件，并且还需要传入要反序列化的类：

```
OtherClass obj = new Gson().fromJson(new FileReader(file), OtherClass.class); 
```

# jquery - 骨干路由器未能遵守 trigger=false 选项

> ID：11205623
> 
> 赞同：4
> 
> 时间：2012-06-26T10:43:40.287
> 
> 标签：jquery, backbone.js, backbone-routing

Backbone.js 为其 Backbone.router 对象提供了一个`navigate(fragment, [options])`方法，该方法执行以下操作（根据文档）：

> 每当您在应用程序中到达要保存为 URL 的点时，调用`navigate`以更新 URL。如果您还想调用路由函数，请将`trigger`选项设置为`true`。要更新 URL 而不在浏览器的历史记录中创建条目，请将`replace`选项设置为`true`。

因此，简单的调用`appRouter.navigate('page');`可能会在`www.myapp.com/page`不触发相应路由的情况下将 URL 更改为。但是，我发现我的路由器重定向到 URL*并触发了 page route*，尽管`trigger=false`默认情况下。

因此，以下代码：

```
$(function(){
var AppRouter = Backbone.Router.extend({

    routes: {
        '': 'home',
        'page': 'page',
    },

    home: function() {
        window.app.navigate('page', {replace: true});        
        console.log('home route');    
    },

    page: function () {
        console.log('page route');
    },

});

window.app = new AppRouter();
Backbone.history.start({pushState: true});
}); 
```

导航到 www.myapp.com 时产生以下控制台输出：

```
> home route
> page route 
```

当预期的控制台输出应该只是：

```
> home route 
```

该方法似乎违反了默认`trigger`选项。这是实现中的错误，还是我误解了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-29T05:13:12.790

更新到 2012 年 6 月 28 日的 Backbone 的最新版本（[https://github.com/documentcloud/backbone](https://github.com/documentcloud/backbone)上的主版本）解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:35:15.343

取下来`pushState: true`，用原来的电话`Backbone.history.start`试试。`navigate`

我在谷歌上搜索了一个解决方案，但我得到的只是关于历史 API`pushState: true`导致主干路由器的导航功能无法正常工作的模糊评论。以我的谷歌搜索为例，[这篇](http://lostechies.com/derickbailey/2011/10/17/tips-for-using-backbone-js-routers-with-html5-pushstate/)被删除的文章是关于我能找到的关于此事的最佳资源。

# jquery - 使用 JQuery for Mobile Version 从导航创建选择/下拉列表

> ID：11205632
> 
> 赞同：2
> 
> 时间：2012-06-26T10:44:13.963
> 
> 标签：jquery, combobox, listbox

我正在开发一个需要响应的网站。我想将导航转换为 `<select>`. 里面可以有任意数量`<nav>`和任意数量。我已经用来计算.`<ul>``<nav>``for loops``<nav> and <ul> inside <nav>`

一个正在生成，另一个没有生成，请帮我解决这个问题。

[这是jsfiddle](http://jsfiddle.net/meetsubhajit/6JsHw/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:58:08.327

它不起作用，因为您正在寻找`.children('ul')`并且这仅包括*直系*后代，但是您的第二`nav`个`div`包裹在`ul`...

您可以更改在任何深度查找后代的`.children`调用`.find`

- 剪这里 -

替代解决方案：

```
$('nav').each(function(navIndex, navElement) {

    $(this).find('ul').each(function(ulIndex, ulElement) {

        var $sel = $('<select name="nav'+navIndex+'-'+ulIndex+'" />');
        $sel.append('<option value="#">Go to...</option>');
        $sel.change(function() { document.location.href = this.value; });

        $(this).find('li>a').each(function(aIndex, aElement) {
            $sel.append('<option value="' + this.href + '">' + $(this).text() + '</option>');
        });

        $(this).after($sel); // place this select after the ul...

    });
}); 
```

# extjs - 如何设置树节点的高度？

> ID：11205646
> 
> 赞同：1
> 
> 时间：2012-06-26T10:45:00.527
> 
> 标签：extjs, gxt

我正在尝试增加树节点的高度。为此，我将默认 gxt CSS 类编辑如下。

```
.x-tree3-el {
   height:25px;
} 
```

它工作正常，但是当树有很多节点时，它会在滚动时显示白色空白。

问题在于`TreepanelView.class`有如下内置方法。

```
protected int getCalculatedRowHeight() {
   return 21;
  } 
```

由于这个静态值，我面临这个问题。那么有什么简单的方法可以增加节点的高度吗？

我正在使用 GXT 2.2.4 库。

# c# - C# 无法使用 ODBC Oracle 运行删除语句

> ID：11205647
> 
> 赞同：0
> 
> 时间：2012-06-26T10:45:00.490
> 
> 标签：c#, asp.net, oracle, odbc

运行任何类型的删除语句会导致 Invalid Statement 异常的非常奇怪的错误。

我的查询是`delete from table where Id = 1`。Id 不是主键。我还需要运行几个不使用主键的删除语句。完全相同的语句在 toad 上运行。

连接字符串：

```
<add name="Oracle_xxxxx" connectionString="Driver={Microsoft ODBC for Oracle};Server=
(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=*host*)(PORT=*port*))(CONNECT_DATA=
(SID=*sid*)));Uid=*uid*;Pwd=*pwd*;" providerName="System.Data.Odbc" /> 
```

查询运行良好。如果可能的话，我真的不想更改连接字符串/驱动程序。

错误信息 ：

```
A first chance exception of type 'System.Data.Odbc.OdbcException' occurred in System.Data.dll
at System.Data.Odbc.OdbcConnection.HandleError(OdbcHandle hrHandle, RetCode retcode)
at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String
method, Boolean needReader, Object[] methodArguments, SQL_API odbcApiMethod)
at System.Data.Odbc.OdbcCommand.ExecuteReaderObject(CommandBehavior behavior, String  
method, Boolean needReader)
at System.Data.Odbc.OdbcCommand.ExecuteReader(CommandBehavior behavior)
at System.Data.Odbc.OdbcCommand.ExecuteReader()
at ClientOnBoarding.COBTrackerDataManager.*function*() in C:\Working\SVN\xx\App_Code\xx.cs:line 928

ERROR [42000] [Microsoft][ODBC driver for Oracle][Oracle]ORA-00900: invalid SQL statement 
```

任何帮助将不胜感激！

编辑：我首先运行 ExecuteNonQuery()，然后测试 ExecuteReader() 并且都给了我同样的错误 - 对上面的误导性错误消息表示歉意。

编辑 2：我已经在 Toad 上多次尝试和测试我的 SQL，没有任何问题。无论有没有尾随分号，我的更新和插入语句都可以正常工作。只有删除给了我一个例外。

编辑 3：

```
OdbcCommand cmd = new OdbcCommand("@delete from table where Id = " + param, conn);
//conn is OdbcConnection object with valid connection I use for all other commands. Conn is open. param is a string (which is a number)
try
{
    //cmd.ExecuteReader();//was testing both
    cmd.ExecuteNonQuery();
}//end try
catch (Exception e)
{
    System.Diagnostics.Debug.WriteLine(e.StackTrace);
    System.Diagnostics.Debug.WriteLine(e.InnerException);
    System.Diagnostics.Debug.WriteLine(e.Message);
}//end catch 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T04:06:14.547

好吧，伙计们觉得自己像个白痴……@符号在引用之后而不是之前……

```
OdbcCommand cmd = new OdbcCommand("@delete from table where Id = " + param, conn); 
```

应该

```
OdbcCommand cmd = new OdbcCommand(@"delete from table where Id = " + param, conn); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:55:03.827

从错误消息看起来这是一个 sql 语句错误，与 .NET 无关。尝试直接在 oracle 中运行此查询。另外，我认为在 Oracle 中你需要“;” 最后`delete from table where Id = 1;`，还要确保 Id 或表名不是关键字

# java - 在代码中使用 JT400 复制 IFS 文件

> ID：11205650
> 
> 赞同：3
> 
> 时间：2012-06-26T10:45:19.047
> 
> 标签：java, jt400, ibm-ifs

我有这段代码可以将文件从 IFS 复制到本地驱动器。我想就如何使它变得更好提出一些建议。

```
public void CopyFile(AS400 system, String source, String destination){
    File destFile = new File(destination);
    IFSFile sourceFile = new IFSFile(system, source);
    if (!destFile.exists()){
        try {
            destFile.createNewFile();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
            IFSFileInputStream in = null;
    OutputStream out = null;
    try {
         in = new IFSFileInputStream(sourceFile);
         out = new FileOutputStream(destFile);

            // Transfer bytes from in to out
            byte[] buf = new byte[1024];
            int len;
            while ((len = in.read(buf)) > 0) {
                out.write(buf, 0, len);
            }
        } catch (AS400SecurityException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if(in != null) {
                    in.close();
                }
                if(out != null) {
                    out.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
        } // end try catch finally

} // end method 
```

在哪里

*   源 = 完整的 IFS 路径 + 文件名和
*   目的地 = 完整的本地路径 + 文件名

我想就以下问题提出一些问题：

*   一个。性能注意事项

    1.  这会对主机 AS400 系统的 CPU 使用率产生重大影响吗？
    2.  这会对要使用的 JVM 产生很大影响吗（就内存使用而言）
    3.  将其包含在 Web 应用程序中会影响应用程序服务器的性能（这是否是一项繁重的任务）？
    4.  使用它来复制多个文件（冗余运行）会对所有相关资源造成很大负担吗？
*   湾。代码质量

    1.  我的 IFSFileInputStream 实现是否足够，或者一个简单的 FileInputStream 对象能很好地完成这项工作？

AFAIK，我只需要 AS400 对象来确保引用的源文件是来自 IFS 的文件。

我是 AS400 和 IFS 的菜鸟，我想向有经验的人征求诚实的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T14:18:26.783

请参阅 IBM 帮助示例代码：

[http://publib.boulder.ibm.com/infocenter/iadthelp/v7r1/index.jsp?topic=/com.ibm.etools.iseries.toolbox.doc/ifscopyfileexample.htm](http://publib.boulder.ibm.com/infocenter/iadthelp/v7r1/index.jsp?topic=/com.ibm.etools.iseries.toolbox.doc/ifscopyfileexample.htm)

问候

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:52:04.927

总而言之，它看起来不错（无需尝试）。它不应该有明显的影响。

*   in.read() 可能返回 0。改为测试 -1。
*   无需手动缓冲，只需使用各自的 BufferedInputStream/BufferedOutputstream 进行换行，一次读取一个字符并测试它是否为 -1。
*   try-catch 很难变得漂亮。这样做可以，但是您稍后会获得更多经验并学习如何做得更好。
*   不要*吞下*异常并打印它们。调用你的代码将不知道它是否顺利。
*   完成 AS400 对象后，使用 as400.disconnectAllServices()。

# assembly - 为什么 VMOV.F64 不允许我加载零？

> ID：11205652
> 
> 赞同：4
> 
> 时间：2012-06-26T10:45:30.380
> 
> 标签：assembly, arm

以下 ARM 汇编：

```
vmov.f64 d16, #0 
```

失败并出现以下错误：

```
/tmp/ccZD4Iex.s:121: Error: immediate out of range -- `vmov.f64 d16,#0' 
```

使用 arm-none-linux-gnueabi-g++ (Sourcery CodeBench Lite 2012.03-57) 4.6.3 编译

如何将 d16 register-double 归零，以便将其用于双精度 VFP 指令？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T12:42:31.640

VMOV 只能接受一[组有限](http://infocenter.arm.com/help/topic/com.arm.doc.dui0489c/CIHGGEEB.html)的浮点立即数，而且令人惊讶的是，0 不是其中之一：

> 任何可以表示为 +/-n * 2 ^(-r)的数字，其中 n 和 r 是整数，16 <= n <= 31, 0 <= r <= 7。

您可以按照 BitBank 的建议进行操作，或者使用整数移动，这也会将寄存器归零。

```
vmov.i64 d16, #0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T12:12:21.740

NEON 指令不允许您将 64 位或 128 位立即数加载到寄存器中。浮点值 0.0 也恰好是 0x0000000000000000，所以另一种实现方法是使用整数运算：

```
 veor.i64 d16,d16,d16 
```

或者您可以从内存中加载值（慢得多）

```
 double zero[] = {0.0};

   vld1.64 d16,[zero] 
```

# java - Xpage 线程 - 无法访问其他类

> ID：11205653
> 
> 赞同：1
> 
> 时间：2012-06-26T10:45:32.930
> 
> 标签：java, multithreading, xpages

我一直在查看 OpenNTF 上发布的示例 - [http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Threads%20and%20Jobs](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Threads%20and%20Jobs)我的问题是我似乎无法参考到创建初始线程的主类之外的另一个类。

这是我尝试使用的代码，基于演示代码（顺便说一句，它工作得很好） - 我尝试了不同的变体，包括尝试从内部类中调用广播类，在这种情况下从外部类调用。在所有情况下，我都会得到一个 ClassNotFoundException - 注意 Broadcast 类与这个 ThreadSample 在同一个包中。

```
public class ThreadSample {

private MyThread myThread;

public  boolean isRunning() {
    return myThread != null;
}

public  void startThread()
throws NotesException {
    if (myThread != null) {
        stopThread();
    }

    try {
        {
            if (myThread == null) {
                myThread = new MyThread();
                myThread.start();
            }
            System.out.println("Thread started");
        }
    } catch (Throwable t) {
        t.printStackTrace();
    }
}

public  void stopThread() {
    if (myThread != null) {
        synchronized (ThreadSample.class) {
            if (myThread != null) {
                myThread.stopRequest = true;
                myThread = null;
                System.out.println("   >> Thread stopping");
            }
        }
    }
}
public void test(){
    System.out.println("HERE in Test");
    Broadcast.test_subscribe();
}

class MyThread extends Thread {
    boolean stopRequest;
    private ThreadSessionExecutor<IStatus> executor;

    MyThread() throws NotesException {

        this.executor = new ThreadSessionExecutor<IStatus>() {
            @Override
            protected IStatus run(Session session) throws NotesException {
                try {
                    System.out.println("   >> Thread running here");
                    ThreadSample.this.test_subscribe();
                    System.out.println("   >> After test call");
                } catch (Throwable ex) {
                    ex.printStackTrace();
                }
                return Status.OK_STATUS;
            }
        };
    }

    public void run() {
        while (!stopRequest) {
            try {
                executor.run();
            } catch (Exception ex) {
            }
        }
        System.out.println("Thread left");
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T14:54:19.830

如果 Job 在 NSF 中，则出于安全原因，它无法访问某些核心 eclipse 类。例如，IStatus 就是这种情况。另一方面，如果您将该类部署为插件的一部分，那么它可能依赖于核心 Eclipse 运行时。ThreadSessionExecutor 中的上下文类加载器还有一个已知问题，它已在 N/D 的下一个版本中修复。在 8.5.3 中，最好将您的作业部署为插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T05:46:13.813

如果您需要线程中的会话访问，您可以使用 SessionCloner。然后你不需要将它部署为插件，因为它不会加载它自己的类加载器。您可能必须更改服务器上的 java.policy 文件（我在测试之前修改了 java.policy，所以我不确定）。

你需要这些进口：

> 导入 com.ibm.domino.xsp.module.nsf.NSFComponentModule；
> 
> 导入 com.ibm.domino.xsp.module.nsf.NotesContext；
> 
> 导入 com.ibm.domino.xsp.module.nsf.SessionCloner；

该类需要两个字段

> 私人 SessionCloner sessionCloner;
> 
> 私有 NSFComponentModule 模块；

在构造函数中：

> // 初始化传递当前会话所需的对象
> 
> this.module = NotesContext.getCurrent().getModule();
> 
> this.sessionCloner = SessionCloner.getSessionCloner();

在 run 方法中（将代码从匿名 ThreadSessionExecutor 类的 run 方法移动到 Thread 类中的 run 方法）：

> 会话会话 = null;
> 
> 尝试 {
> 
> NotesContext 上下文 = 新的 NotesContext(this.module);
> 
> NotesContext.initThread(上下文);
> 
> session = this.sessionCloner.getSession();
> 
> // 你的代码
> 
> } 捕捉（可抛出异常）{
> 
> // 错误记录，打印堆栈跟踪 / 等等
> 
> } 最后 {
> 
> NotesContext.termThread();
> 
> 尝试 {
> 
> ```
>  this.sessionCloner.recycle(); 
> ```
> 
> } 捕捉（NotesException 异常）{}
> 
> }

# ios - CFRunLoopWakeUp 不起作用？

> ID：11205654
> 
> 赞同：3
> 
> 时间：2012-06-26T10:45:34.820
> 
> 标签：ios, multithreading, cfrunloop

我有一个似乎`CFRunLoopWakeUp`不起作用的案例。这是设置：

我有一个“典型的”while循环**不在**等待一些工作完成的主线程上：

```
- (void)someFunc
{
    self.runLoop = CFRunLoopGetCurrent();
    NSLog(@"Pre loop.");
    while (!self.completed)
    {
        NSLog(@"In loop.");
        NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        [pool release];
    }
    NSLog(@"Post loop.");
} 
```

我有一个回调函数等待某些工作完成。这**也不**是从主线程调用的：

```
- (void)callback
{
    NSLog(@"Work completed.");
    self.completed = YES;

    // I've checked that CFRunLoopIsWaiting(self.runLoop) here returns true
    CFRunLoopWakeUp(self.runLoop); // Should wake up the waiting run loop, but doesn't!
} 
```

回调被调用，但由于某种原因，`CFRunLoopWakeUp`似乎没有做任何事情。我错过了一些明显的东西吗？这里有一些深线程问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:06:58.510

首先，我无法重现您的问题。我正在像这样在 GCD 中构建它：

```
int main (int argc, const char *argv[])
{
  @autoreleasepool {
    __block BOOL completed = NO;
    __block CFRunLoopRef runLoop;

    dispatch_queue_t queue1 = dispatch_queue_create("first", 0);
    dispatch_queue_t queue2 = dispatch_queue_create("second", 0);

    dispatch_async(queue1, ^{
      runLoop = CFRunLoopGetCurrent();
      NSLog(@"Pre loop.");
      while (!completed)
      {
        NSLog(@"In loop.");
        @autoreleasepool {
          [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
        }
      }
      NSLog(@"Post loop.");
    });

    double delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, (unsigned)(delayInSeconds * NSEC_PER_SEC));
    dispatch_after(popTime, queue2, ^(void) {
      NSLog(@"Work completed.");
      completed = YES;

      // I've checked that CFRunLoopIsWaiting(self.runLoop) here returns true
      CFRunLoopWakeUp(runLoop); // Should wake up the waiting run loop, but doesn't!

    });

    dispatch_sync(queue1, ^{});
    dispatch_sync(queue2, ^{});
    dispatch_release(queue1);
    dispatch_release(queue2);
  }
  return 0;
} 
```

你能建立一个更简单的程序来演示这个问题吗？

我会尝试的其他事情，主要用于调试目的以缩小问题范围：

*   切换到`CFRunLoopRunInMode()`而不是`runinMode:beforeDate:`. 它们略有不同。
*   切换到`CFRunLoopStop()`而不是`CFRunLoopWakeUp()`.

当然，请确保它`self.runLoop`实际上指向您认为的运行循环！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T18:24:18.067

正如这个人解释的那样，我可以通过添加一个源来使 CFRunLoopWakeUp 工作：http: [//www.cocoabuilder.com/archive/cocoa/112261-cfrunlooptimer-firing-delay.html](http://www.cocoabuilder.com/archive/cocoa/112261-cfrunlooptimer-firing-delay.html)

# javascript - 使用 ECMA 脚本将选定的列表项复制到另一个列表

> ID：11205658
> 
> 赞同：0
> 
> 时间：2012-06-26T10:45:57.573
> 
> 标签：javascript, sharepoint, sharepoint-2010

我需要一个脚本，将我选择的所有列表项复制到另一个（自定义）列表。我找到了很好的文档解决方案：

```
var context = SP.ClientContext.get_current();
var web = context.get_web();
context.load(web);

var _destinationlib = web.get_lists().getByTitle('DestinationLibrary');
context.load(_destinationlib);
var notifyId;
var currentlibid = SP.ListOperation.Selection.getSelectedList();

var currentLib = web.get_lists().getById(currentlibid);

var selectedItems = SP.ListOperation.Selection.getSelectedItems(context);
var count = CountDictionary(selectedItems);

for(var i in selectedItems)
{
 alert('Now copying ' + i);
 var currentItem =    currentLib.getItemById(selectedItems[i].id);
 context.load(currentItem);

var File = currentItem.get_file();
context.load(File);

//Excecuting executeQueryAsync to get the loaded values
context.executeQueryAsync
(
function (sender, args) {
if(File != null) {

var _destinationlibUrl =  web.get_serverRelativeUrl() + _destinationlib.get_title() + '/' +  File.get_name();

File.copyTo(_destinationlibUrl, true);
notifyId = SP.UI.Notify.addNotification('Moving file…' + File.get_serverRelativeUrl() + 'to' + _destinationlibUrl, true);

//Excecuting executeQueryAsync to copy the file
context.executeQueryAsync(
function (sender, args) {
SP.UI.Notify.removeNotification(notifyId);

SP.UI.Notify.addNotification('File copied successfully', false);
},
function (sender, args) {
SP.UI.Notify.addNotification('Error copying file', false);
SP.UI.Notify.removeNotification(notifyId);
showError(args.get_message());
});
}
},
function (sender, args) {
alert('Error occured' + args.get_message());
}
);
} 
```

我不知道我必须改变什么才能让它适用于正常的列表项。我试着交换

```
var File = currentItem.get_file();

context.load(File); 
```

和

```
var title = currentItem.get_Title();
context.load(title);

var number = currentItem.get_item('number');
context.load(number); 
```

但它不起作用。如果有人可以给我提示我必须做什么，那就太好了。

很多谢谢

法布卢斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:18:08.613

看起来您从[这里](http://www.learningsharepoint.com/2011/05/28/sharepoint-2010-ecmascript-copymove-files-to-another-document-library-part-2/)获取了上面的代码。

尽量专心。此代码将选定的文件（不是列表项！）复制到另一个文档库！

为了您的需要，最好尝试编写自己的解决方案。有关详细信息，请参阅[SharePoint JavaScript 类库](http://msdn.microsoft.com/en-us/library/ee538253)。您可以有两种可能的架构：

1.  通过 JavaScript 完成所有工作。第一步是[SP.List 的 addItem 方法](http://msdn.microsoft.com/en-us/library/ee658490)。
2.  在 JavaScript 中处理客户端上的选择并调用您的自定义服务器端组件（可能是应用程序页面）以进行项目复制（在初始列表中已存在项目的新列表中创建副本。）。参见[这个](http://www.codeproject.com/Articles/400720/SharePoint-2010-Export-Selected-Items-to-Excel)例子。

还要小心 context.load。建议在 context.executeQueryAsync 中编写所有后续代码。使用 FF 中的 Firebug 和 Chrome 中的开发人员工具来调试您的代码并找出问题所在。

# c# - 如何使用 xUnit 进行调试？

> ID：11205659
> 
> 赞同：46
> 
> 时间：2012-06-26T10:45:58.657
> 
> 标签：c#, .net, unit-testing, debugging, xunit

我正在学习 xUnit，到目前为止，我发现它是一个最有用的工具。这让我重新思考我对 TDD 的一些编码策略。

但是，我遇到了一个有趣的问题。我的测试用例失败了。那里没有真正的问题，但是我该如何调试呢？

具体来说，我的测试用例由于“超出索引”错误或类似原因而失败。它没有在断言语句中失败。我现在需要的是在 Visual Studio 调试器处于活动状态的情况下运行测试用例的某种方法，以便我可以看到不同变量的状态。

我不打算发布代码，因为这种情况肯定会再次出现。有谁知道如何调试测试用例本身？

差点忘了！我正在使用，

*   Visual Studio 2010 Ultimate（Dreamspark 许可证）
*   xUnit 1.9

我的工作流程涉及使用 xUnit GUI 运行程序来运行测试。

如果我要问的是不可能的，有人可以建议我可以使用的替代测试套件来满足我的需求吗？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2016-05-26T07:42:44.537

在 VS2015 及更高版本中，安装[xunit.runner.visualstudio](https://www.nuget.org/packages/xunit.runner.visualstudio/) NuGet 包。然后调试就像在测试资源管理器窗口中右键单击测试一样简单。（测试-->Windows-->TestExplorer，如果你看不到它）。您也可以右键单击测试代码中的任意位置，然后运行测试和调试测试将出现在上下文菜单中。

[![在此处输入图像描述](../Images/f76f07fe7cbdde29e4f0e1265de4c22e.png)](https://i.stack.imgur.com/55CLI.png)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-26T10:49:15.877

我没有对此进行测试，但您应该能够将 Visual Studio 连接到 xUnit GUI 并从那里进行调试。

从“调试”菜单中选择“附加到进程”，在列表中找到可执行文件的名称，然后单击附加。根据需要在单元测试中设置断点并从 GUI 运行测试。断点应该按预期命中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-01-29T14:11:28.947

我未能实现上述所有内容，但以下内容对我有用：在要调试的行之前添加以下行（然后运行测试）：

```
 System.Diagnostics.Debugger.Launch(); 
```

缺点是它会启动另一个 VS 实例 :)。

干杯!

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-11-28T12:37:17.250

在 Visual Studio 2017 中，确保解决方案配置处于“调试”模式。在“发布”模式下，它不是调试。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-17T10:28:14.167

以下内容适用于 VS.NET 和 SharpDevelop。

打开测试项目的属性并转到调试选项卡：

*   在“启动操作”下，将“启动外部程序”设置为选择的 xUnit 运行程序可执行文件。

*   在“开始选项”下，将“命令行参数”设置为项目调试 DLL 的名称。

*   还将“工作目录”设置为项目的“bin\Debug\”目录。

然后选择 Debug > Run 或按 F5 在调试模式下运行测试。断点将被击中。

以这种方式进行调试的好处是您不必每次都附加到 xUnit GUI，您只需要运行您的测试项目。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-04-12T08:17:24.707

请参阅此问题的答案：[在单元测试中逐步执行和调试代码](https://stackoverflow.com/questions/4103712/stepping-through-and-debugging-code-in-unit-tests)。

本质上：

> ...**转到VS主菜单中的“测试”...，单击子菜单“调试”**。. .'.

它也适用于我使用 VS2017 ;)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-08-06T02:18:09.903

**2020 年更新**：如果您将 Visual Studio Code 与 OmniSharp 结合使用，则可以单击方法上方的“调试测试”文本。

[![使用 OmniSharp 和 xUnit 的 Visual Studio Code](../Images/94c5bd8fbe4ba2a05f3ebb5d2ecb54a6.png)](https://i.stack.imgur.com/5e8vD.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-15T09:51:33.343

如果你有 resharper，安装了 X-unit contrib 扩展（强烈推荐！），右键单击 Visual Studio 中的类，然后单击“调试单元测试”。

简单的！

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-12-26T06:51:08.987

1.  在您的方法内设置一个断点。
2.  从 Visual Studio 菜单栏中，单击测试。
3.  从 Debug 单击 Selected Test 或 All Test。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-01T14:47:35.737

我尝试了以上所有方法，但没有成功。对我有用的东西来自以下帖子： [https ://github.com/OmniSharp/omnisharp-vscode/issues/1630#issuecomment-317797607](https://github.com/OmniSharp/omnisharp-vscode/issues/1630#issuecomment-317797607)

在 .csproj 文件中，在 PropertyGroup 下添加以下内容：可移植

# image - Watir-Webdriver：如何获取网站图像的大小（文件大小）

> ID：11205662
> 
> 赞同：0
> 
> 时间：2012-06-26T10:46:09.343
> 
> 标签：image, watir-webdriver, filesize

我有以下html代码：

我看到 Watir-webdriver 目前不支持“Watir::Image.file_size”方法。我发现“Watir-Classic/Image.rb”有相同的方法，似乎可以使用。

```
# this method returns the filesize of the image, as an int
def file_size
  assert_exists
  @o.invoke("fileSize").to_i
end 
```

我创建了一个应该检索图像大小的方法，但似乎我没有正确初始化对象。这是我的方法代码：

```
img_src="/location/on_the_server/image"
chart_image = Watir::Image.new(:src, img_src)
puts chart_image.file_size 
```

问题是我收到以下错误：

```
"ArgumentError: invalid argument "/location/on_the_server/image"" 
```

我看到初始化对象需要（容器，说明符）。我试图将初始化行更改为“chart_image = Watir::Image.new(img_src, :src)”，但错误不断出现。

谁能告诉我我做错了什么？

是否有另一种方法可以从网站获取图像的文件大小？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:13:11.137

您不应该直接初始化 Watir::Image。相反，您应该使用`image()`浏览器或元素对象的方法。

```
#Assuming that browser = Watir::Browser that is open
img_src="/location/on_the_server/image"
chart_image = browser.image(:src, img_src)
puts chart_image.file_size 
```

**更新 - 下载图像以确定文件大小：**

您可以使用 open-uri （或类似的）下载图像，然后使用 Ruby 的 File 类来确定大小：

```
require 'watir-webdriver'
require "open-uri"

#Specify where to save the image
save_file = 'C:\Users\my_user\Desktop\image.png'

#Get the src of the image you want. In this example getting the first image on Google.
browser = Watir::Browser.new
browser.goto('www.google.ca')
image_location = browser.image.src

#Save the file
File.open(save_file, 'wb') do |fo|
  fo.write open(image_location, :ssl_verify_mode => OpenSSL::SSL::VERIFY_NONE).read
end

#Output the size
puts File.size(save_file).size 
```

# extjs - Extjs：单击升序或降序下拉菜单

> ID：11205665
> 
> 赞同：0
> 
> 时间：2012-06-26T10:46:21.963
> 
> 标签：extjs

Extjs：当我点击升序或降序下拉菜单时，有时它会离开屏幕或只显示一半。如何避免它

![在此处输入图像描述](../Images/3652f7f0ce0348a29a94318a99b1447d.png)

# java - 单例列表有什么用？

> ID：11205666
> 
> 赞同：11
> 
> 时间：2012-06-26T10:46:24.473
> 
> 标签：java, list, collections

我正在寻找一些优雅的解决方案来从列表中删除空值。我遇到了[以下帖子](https://stackoverflow.com/a/1239631/423969)，上面说我可以使用 `list.removeAll(Collections.singletonList(null));`

然而，这会抛出一个`UnsupportedOperationException`，我假设这是因为`removeAll()`试图对不可变的单例集合进行一些变异操作。它是否正确？

如果是这种情况， this 的典型用途是`singletonList`什么？当您确定不想对集合实际执行任何操作时，代表大小为 1 的集合？

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-26T10:48:52.353

它就像一个魅力：

```
List<String> list = new ArrayList<String>();
list.add("abc");
list.add(null);
list.add("def");
list.removeAll(Collections.singletonList(null));
System.out.println(list);  //[abc, def] 
```

Indeed`Collections.singletonList(null)`是不可变的（不幸的是，它隐藏在 Java ^([1])`list`中），但是从您的变量中抛出了异常。显然它也是不可变的，如下例所示：

```
List<String> list = Arrays.asList("abc", null, "def");
list.removeAll(Collections.singletonList(null)); 
```

此代码*将*抛出一个`UnsupportedOperationException`. 如您所见`singletonList()`，在这种情况下很有用。当客户端代码需要一个只读列表（它不会修改它）但您只想在其中传递一个元素时使用它。`singletonList()`是（线程）安全的（由于不变性），快速且紧凑。

^([1])例如，在[scala](/questions/tagged/scala "显示标记为“scala”的问题")中，可变和不可变集合有一个单独的层次结构，API 可以选择是否接受这个或另一个（或两者，因为它们具有通用的基本接口）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:51:01.290

您的列表是否受到保护

```
Collections.unmodifiableList(list) 
```

因为如果您已保护它并稍后尝试修改它，您会收到该错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-16T10:19:11.940

要回答您的实际问题：

> 这个 singletonList 的典型用途是什么？当您确定不想对集合实际执行任何操作时，代表大小为 1 的集合？

典型的用途是如果你有一个元素并想将它传递给一个接受 a 的方法`List`，即

```
public void registerUsers(List<User> users) {...}

User currentUser = Login Manager.getCurrentUser();
registerUsers(Collections.singletonList(currentUser)); 
```

这`removeAll()`是一个特例。

# windows-mobile - Windows Mobile 版本的向后兼容性

> ID：11205667
> 
> 赞同：0
> 
> 时间：2012-06-26T10:46:24.583
> 
> 标签：windows-mobile, windows-mobile-6.5

为 Windows Mobile 6.5 开发的应用程序能否在 Windows Mobile 6.1 设备上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T06:10:01.947

是的，您可以直接在 mobile 6.1 中使用 windows mobile 6.5 代码和应用程​​序。WEH 6.5.3 中只有一些 API 函数不属于 WM6.1。

一个问题可能是在 6.1 和 6.5 之间重新设计了屏幕：开始图标现在位于底部，菜单是由图块构建的。底部菜单区域比 6.1 中的要大。如果应用程序是用硬编码的窗口大小设计的，那将会给屏幕大小带来问题。

SHFullScreen API 在 6.5 中不能像在 6.1 中那样工作（请参阅我的博客 hjgode.de/wp）。

但总的来说，应用程序将毫无问题地运行。

约瑟夫

# maven - 如何使用 Maven 依赖：复制目标？

> ID：11205669
> 
> 赞同：9
> 
> 时间：2012-06-26T10:46:32.260
> 
> 标签：maven, dependencies

我有 2 个工件，我想从本地存储库复制到文件系统中的目录。

我认为 dependency:copy 可以完成这项工作。但是，它需要一个参数 artifactItems。 [http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-artifacts.html](http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-artifacts.html)

任何人都可以帮助我在命令行中使用这个目标。不幸的是，maven 没有在命令行中显示这个目标的用法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-26T15:32:54.650

我不会试图弄清楚如何提供`artifactItem`命令行，而是为依赖插件配置命令行执行。通过指定`default-cli`为执行 ID 来做到这一点。如果您总是想复制相同的依赖项，您可以在工件项中硬编码 GAV 坐标。或者，硬编码在命令之间保持不变的任何值。

要通过命令行复制不同的工件，请使用属性作为元素值并在命令行上指定值。例如，如果`artifactItem`包含的配置，`<artifactId>${copy.artifactId}</artifactId>`则

`mvn dependency:copy -Dcopy.artifactId=myArtifact`

将复制 myArtifact（示例假设其他元素具有硬编码值）。

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.4</version>
    <executions>
    <execution>
    <id>default-cli</id> 
    <configuration>
      <artifactItems>
        <artifactItem>
          <!-- hardcode values, or use properties, depending on what you want to do -->
          <groupId>[ groupId ]</groupId>
          <artifactId>[ artifactId ]</artifactId>
          <version>[ version ]</version>
          <type>[ packaging ]</type>
          <outputDirectory>/the/filesystem/dir</outputDirectory>
        </artifactItem>
      </artifactItems>
      <!-- other configurations here -->
    </configuration>
    </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-25T03:07:39.553

不确定您是想在 Maven 项目中还是没有项目中执行此操作。如果是前者，您可以使用：

```
mvn dependency:copy -Dartifact='group.id:artifact.id:your.version' 
```

如果您在`pom.xml`using 属性中定义工件的版本，您也可以让它使用该版本，如下所示：

```
mvn dependency:copy -Dartifact='group.id:artifact.id:${version.property}' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-22T10:45:45.217

如果您不想在 pom.xml 中编写*artifactItems*，您可以只使用命令：“mvn dependency:copy-dependencies”而不是“mvn dependency:copy”。

# javascript - 如何使用 struts2 框架为 JavaScript 中的 URL 参数分配动态值？

> ID：11205685
> 
> 赞同：1
> 
> 时间：2012-06-26T10:47:01.773
> 
> 标签：javascript, struts2, ognl

在`onchange`下拉列表中的事件上，我调用了一个 JavaScript 方法。在这个 JavaScript 方法中，我使用 URL 标签调用了一个动作类，这个 URL 也通过一个参数来携带值。但是当我这样做时，我总是会为
动作类的 setter/getter 方法得到一个空值。

我的代码是：`setbusiness()`从下拉列表的事件中调用javascript内部的方法`onchange`并将值传递给它。警报消息带有 id 值。但是当`xmlhttp.open("GET",url,true)`调用动作类时，会使用具有空值的 setter 方法调用动作类。我不明白为什么价值没有到来。请帮助我如何为 URL 的参数分配动态值。

```
<script>  
function setbusiness(sourceid) {  
alert(" sourceid "+sourceid);
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
if (xmlhttp.readyState==4 && xmlhttp.status==200)
{
document.getElementById("myDiv1").innerHTML=xmlhttp.responseText;
}
}
var url = "<c:url action="feedajax.action">
<c:param name="sourceid">"%{sid}"</c:param></c:url>";                
xmlhttp.open("GET",url,true);
xmlhttp.send();
} 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:20:14.763

```
var url = "<c:url action="feedajax.action"><c:param name="sourceid">"%{sid}"</c:param></c:url>"; 
```

您在 JSP 中间使用了 OGNL 转义。JSP 对 OGNL 一无所知。您还试图在没有 a`+`的情况下连接两个字符串，因此语法无论如何都会失败。

由于 S2 的请求包装器，您可以使用普通的 JSP EL：

```
var url = "<c:url action="feedajax.action"><c:param name="sourceid">${sid}</c:param></c:url>"; 
```

OGNL 表达式仅在了解 OGNL 的内容（如 S2 标签）中有效。

虽然这不是问题，但 IMO 为您的 JS 字符串和 JSTL 参数使用相同的引号使得阅读源代码变得非常困难——IMO 区分两者更清晰：

```
var url = '<c:url action="feedajax.action"><c:param name="sourceid">${sid}</c:param></c:url>'; 
```

更好的是，不要将这两个操作混为一谈，而是使用`<c:param>`'s`value`属性：

```
<c:url var="feedUrl" action="feedajax.action">
  <c:param name="sourceid" value="${sid}"/>
</c:url>

var url = '${feedUrl}'; 
```

*警告*如果源 ID 是可以由用户传入的东西，它应该是 JS 转义的。

# c# - 如何引用类的属性（不是对象）？

> ID：11205686
> 
> 赞同：1
> 
> 时间：2012-06-26T10:47:06.707
> 
> 标签：c#, reflection, properties

我有一个模块，它遍历对象的公共属性（使用 Type.GetProperties()），并对这些属性执行各种操作。然而，有时应该以不同方式处理某些属性，例如忽略。例如，假设我有以下课程：

```
class TestClass
{
  public int Prop1 { get; set; }
  public int Prop2 { get; set; }
} 
```

现在，我希望能够指定每当我的模块获取类型为 TestClass 的对象时，应该忽略属性 Prop2。理想情况下，我希望能够这样说：

```
ReflectionIterator.AddToIgnoreList(TestClass::Prop2); 
```

但这显然行不通。我知道如果我首先创建一个类的实例，我可以获得一个 PropertyInfo 对象，但是仅仅为了这样做而创建一个人工实例似乎是不正确的。有没有其他方法可以获得 TestClass::Prop2 的 PropertyInfo 对象？

（作为记录，我当前的解决方案使用字符串文字，然后将其与迭代的每个属性进行比较，如下所示：

```
ReflectionIterator.AddToIgnoreList("NamespaceName.TestClass.Prop2"); 
```

然后在遍历属性时：

```
foreach (var propinfo in obj.GetProperties())
{
  if (ignoredProperties.Contains(obj.GetType().FullName + "." + propinfo.Name))
    // Ignore
  // ...
} 
```

但这个解决方案似乎有点凌乱且容易出错......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T10:49:04.757

```
List<PropertyInfo> ignoredList = ...

ignoredList.Add(typeof(TestClass).GetProperty("Prop2")); 
```

应该做的工作......只需检查是否`ignoredList.Contains(propinfo)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:51:56.267

您可以向属性添加属性以定义它们应该如何使用吗？例如

```
class TestClass
{
  public int Prop1 { get; set; }

  [Ignore]
  public int Prop2 { get; set; }
} 
```

# c# - 处理 WPF 用户控件的事件

> ID：11205689
> 
> 赞同：9
> 
> 时间：2012-06-26T10:47:25.627
> 
> 标签：c#, wpf, events, user-controls

我有一个带有几个按钮的用户控件，它们需要根据使用它的类采取不同的操作。

问题是我不知道如何实现这些处理程序，因为在最终应用程序中使用我的用户控件时，我无法直接访问按钮来指定哪个处理程序处理哪些事件。

你会怎么做？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-26T11:12:06.337

另一种方法是通过 UserControl 中的事件公开事件：

```
public partial class UserControl1 : UserControl
{
    public UserControl1()
    {
        InitializeComponent();
    }

    public event RoutedEventHandler Button1Click;

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (Button1Click != null) Button1Click(sender, e);     
    }
} 
```

This gives your usercontrol a `Button1Click` event that hooks up to that button within your control.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T11:05:45.003

我将为每个按钮创建一个命令并为每个“处理程序”委托。比您可以向用户（最终应用程序）公开委托并`Execute()`在命令上的方法内部调用它们。像这样的东西：

```
public class MyControl : UserControl {
        public ICommand FirstButtonCommand {
            get;
            set;
        }
        public ICommand SecondButtonCommand {
            get;
            set;
        }
        public Action OnExecuteFirst {
            get;
            set;
        }
        public Action OnExecuteSecond {
            get;
            set;
        }

        public MyControl() {
            FirstButtonCommand = new MyCommand(OnExecuteFirst);
            FirstButtonCommand = new MyCommand(OnExecuteSecond);
        }
    } 
```

当然，“MyCommand”需要实现 ICommand。您还需要将命令绑定到相应的按钮。希望这可以帮助。

# c# - winForm 加载 PictureBox 中的图片时出现 1 秒白屏

> ID：11205698
> 
> 赞同：0
> 
> 时间：2012-06-26T10:47:50.323
> 
> 标签：c#, .net, winforms

有一个表格。在表单上有一个停靠在所有表单表面的图片框。当应用程序启动时，会显示一个白色表面的表单，然后显示图片。

我怎样才能摆脱那个 1s 白色形式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:57:25.690

您没有说明何时使用图像加载图片框。但我会尝试让您的图片框在您的 Form_Load 事件结束时或在您的 Form_Shown 事件中可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T12:15:39.253

对我来说听起来更像是一个线程问题。我猜你的 UI 线程**做的工作太多**，不能经常更新 UI。

执行以下所有操作：

*   确保加载和处理任何数据（包括图像）不在构造函数中。
*   将该代码移动到适当的 FormLoad() 事件处理程序方法中。
*   实现图像的加载，以便它运行一个单独的线程。

您可以在这篇 MSDN 文章中找到一些建议：[为您的基于 .NET 的应用程序提供具有多线程的快速响应式 UI](http://msdn.microsoft.com/en-us/magazine/cc300429.aspx)

如果您使用的是 .NET 4.x 版本，您还可以使用[任务并行库](http://msdn.microsoft.com/en-us/library/dd460717.aspx)来更轻松地处理多个线程。

即将推出的 .NET 4.5 还提供了更加舒适的 await 和 asyc 关键字：[使用 Async 和 Await 进行异步编程](http://msdn.microsoft.com/en-us/library/hh191443%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T19:25:48.473

听起来你在 form_Shown 事件中做一些耗时的事情。调用 Form 的 Refresh() 方法作为表单显示的第一件事 - 事件，它会先绘制表单，然后做耗时的事情

# php - 使用 mysql_num_rows 显示页码

> ID：11205700
> 
> 赞同：1
> 
> 时间：2012-06-26T10:47:54.677
> 
> 标签：php, mysql, increment

我正在尝试使用 mysql_num_rows 将我的查询结果拆分为页面（通过将结果除以十），但现在无法编写页码前端脚本。

所以我希望它看起来像：1 2 3 4 5 6 等

这将基于：

```
$num = mysql_num_rows($sql);
$pageno = $num/10; // this will give the number of pages 
```

那么我想运行结果，以便它们动态填充

```
<a href="page.php?page=$pageno">$pageno</a> 
```

所以本质上需要自动增加页码。

* * *

我结合了您的答案，发现这对我有用

```
for ($x=0; $x < $division; $x++) {
if($x=0){
$x=1;
}else{
}
echo "<div class='pageno'><a href='viewlist.php?page=$x&$stringVAR' >" . ($x+1) . "</a></div>"; 

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:06:16.047

biziclop 建议您应该使用行数的计数而不是每次都获取所有记录是正确的，但是运行单独的查询来获取计数是无效的：

```
$rows_per_page=30;
$current_page=(integer)$_GET['page'];
$offset=$current_page*$rows_per_page

$qry="SELECT FOUND_ROWS() as totrows, a.* FROM a_table LIMIT $offset,$rows_per_page";
$res=mysql_query($qry);
while ($r=mysql_fetch_assoc($res)) {
     if (!$tot_rows) {
         $tot_rows=r['totrows'];
     }
     // show row data
     print....
}
print "Showing rows " . $offset . " to " . ($offset+$rows_per_page) . " of $tot_rows<br/>\n";
$pages = ceil($tot_rows / $rows_per_page);
for ($x=0; $x<$pages; $x++) {
  print "<a href='$url?page=$x'>" . ($x+1) . "</a>&nbsp;<br />";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:05:47.530

首先你需要总页数

你`$pageno`是总页数

你需要一个页面控制变量：

```
$page=$_GET['page'];
if $page=="" then
   $page=1;
end if 
```

那么您需要使用 LIMIT (http://dev.mysql.com/doc/refman/5.0/es/select.html) 拆分您的 sql 结果

> [LIMIT {[offset,] row_count | row_count OFFSET 偏移量}]

你的 sql 必须是这样的：

```
$sql="select [..] from [...] where [...] LIMIT ".(10*$page-1).",".(10*$page)-1; 
```

对于`$page=1`-> 限制 0,9 对于`$page=2`-> 限制 10,19 ...

把 1 2 3 4 5 ... 现在很容易

```
for($i=1;$i<=$pageno;$i++){
     echo "<a href=\"page_with_results.php?page=".$i·"\">".$i."</a>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:06:47.093

mysql_num_rows() 函数返回编号。以下查询的行数，$pageno=$num/10 只是除以编号。由 10 返回的行数。

有关更多信息，请单击[http://www.w3schools.com/php/func_mysql_num_rows.asp](http://www.w3schools.com/php/func_mysql_num_rows.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:12:55.117

您的分页代码如下所示：

```
 if($numrows!=0)
       {
           if($_REQUEST['rowsperpage'])
           {
                if(!isDigit($_REQUEST['rowsperpage']))
                    $rowsPerPage=10;
                else
                            $rowsPerPage =$_REQUEST['rowsperpage'];
           }
           else
           {
              $rowsPerPage =10;
           }
            $pageNum = 1;
            $mxpg=ceil($numrows/$rowsPerPage);
           if($_REQUEST['pageNum']=='undefined' || $_REQUEST['pageNum']=='' || $_REQUEST['pageNum']==0 || ($_REQUEST['pageNum']>$mxpg) )
            {
                $pageNum=1;
            }
            else
            {
                if(isDigit($_REQUEST['pageNum']))
                    $pageNum=$_REQUEST['pageNum'];
                else
                    $pageNum=1;
            }

            $offset = ($pageNum - 1) * $rowsPerPage;

            $sqlal = $SQL_QUERY." limit $offset,$rowsPerPage;";

            $resal=mysql_query($sqlal);
            if(db_num_rows($resal)==0 && $pageNum > 1)
            {
                    $pageNum = $pageNum - 1;
                    $offset = ($pageNum - 1) * $rowsPerPage;
                   $sqlal = $SQL_QUERY." limit $offset,$rowsPerPage;";
                    $resal=mysql_query($sqlal);
            }

            $maxpage=ceil($numrows/$rowsPerPage);
            $othrparameter="rowsperpage=$rowsPerPage&frmdate=$frmdate&todate=$todate&srchcity=$srchcity"; //serch criteria if any
            $tmpnavi=getnevigationhtml($pageNum,$maxpage,$file,$othrparameter);

            $onlynum='"Numbers"';

            $resultal = mysql_query($sqlal);
       } 
```

在 PHP 表单上显示如下：

```
 <table width='100%'><tr>
<td align='left' >Rows  : <input type='text' name='rowsperpage' id='rowsperpage'  size='5' value='<?php echo $rowsPerPage;?>' onkeypress='return inputLimiter(event,<?php echo$onlynum;?>)' >&nbsp;
Go To Page: <input type='text' name='pageNum' id='pageNum' size='5' value='<?php echo $pageNum;?>' onkeypress='return inputLimiter(event,<?php echo$onlynum;?>)' >&nbsp;

<input type='submit' name='show' id='show' value='Show' >
</td>
<td align='left'><?php echo "Total :".$numrows;?></td>
<td align='right'><?php echo $tmpnavi; ?></td></tr></table> 
```

您的记录获取将如下所示：

```
if($numrows>0){
        while($res_image = mysql_fetch_array($resultal)){
//Your operations
}
} 
```

# php - 无法使用 wordpress 元框将数据保存到数据库

> ID：11205703
> 
> 赞同：0
> 
> 时间：2012-06-26T10:48:09.340
> 
> 标签：php, wordpress

我已经创建了这段代码，它应该使用 wordpress 元框功能在数据库中保存帖子的附加数据。

```
//Price list meta boxes
add_action( 'add_meta_boxes', 'cd_meta_box_add' );
function cd_meta_box_add() {add_meta_box( 'price-list-id', 'Price List', 'cd_meta_box_cb', 'post', 'normal', 'high' );}

function cd_meta_box_cb()
{  
    // $post is already set, and contains an object: the WordPress post
    global $post;
    $values = get_post_custom( $post->ID );

        // 
        $plheading = isset( $values['price_list_heading'] ) ? esc_attr( $values['price_list_heading'][0] ) : '';

        $plcategory1 = isset( $values['price_list_category1'] ) ? esc_attr( $values['price_list_category1'][0] ) : '';
        $plcategoryitems1 = isset( $values['price_list_items_category1'] ) ? esc_attr( $values['price_list_items_category1'][0] ) : '';

        $plcategory2 = isset( $values['price_list_category2'] ) ? esc_attr( $values['price_list_category2'][0] ) : '';
        $plcategoryitems2 = isset( $values['price_list_items_category2'] ) ? esc_attr( $values['price_list_items_category2'][0] ) : '';

        $plcategory3 = isset( $values['price_list_category3'] ) ? esc_attr( $values['price_list_category3'][0] ) : '';
        $plcategoryitems3 = isset( $values['price_list_items_category3'] ) ? esc_attr( $values['price_list_items_category3'][0] ) : '';

    // We'll use this nonce field later on when saving.
    wp_nonce_field( 'my_meta_box_nonce', 'meta_box_nonce' );
    ?>

        <p>
            <label for="price_list_heading">Price list heading:</label>
            <input type="text" name="price_list_heading" id="price_list_heading" value="<?php echo $plheading; ?>" />
        </p>

        <p>
            <label for="price_list_category1">Category1 Title:</label>
            <input type="text" name="price_list_category1" id="price_list_category1" value="<?php echo $plcategory1; ?>" />
            <textarea style="width: 100%;" rows="3" name="price_list_items_category1" id="price_list_items_category1"><?php echo $plcategoryitems1; ?></textarea>
            <span style="display: block; font-weight: bold; text-align: right;">Example: Rhine Riesling1|0,75 l|9,50 &euro;</span>
        </p>

        <p>
            <label for="price_list_category2">Category2 Title:</label>
            <input type="text" name="price_list_category2" id="price_list_category2" value="<?php echo $plcategory2; ?>" />
            <textarea style="width: 100%;" rows="3" name="price_list_items_category2" id="price_list_items_category2"><?php echo $plcategoryitems2; ?></textarea>
            <span style="display: block; font-weight: bold; text-align: right;">Example: Rhine Riesling1|0,75 l|9,50 &euro;</span>
        </p>

        <p>
            <label for="price_list_category3">Category3 Title:</label>
            <input type="text" name="price_list_category3" id="price_list_category3" value="<?php echo $plcategory3; ?>" />
            <textarea style="width: 100%;" rows="3" name="price_list_items_category3" id="price_list_items_category3"><?php echo $plcategoryitems3; ?></textarea>
            <span style="display: block; font-weight: bold; text-align: right;">Example: Rhine Riesling1|0,75 l|9,50 &euro;</span>
        </p>

    <?php
}

//Saving price list
add_action( 'save_post', 'cd_meta_box_save' );  
function cd_meta_box_save( $post_id )  
{  
        // Bail if we're doing an auto save
        if( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return;

        // if our nonce isn't there, or we can't verify it, bail
        if( !isset( $_POST['meta_box_nonce'] ) || !wp_verify_nonce( $_POST['meta_box_nonce'], 'my_meta_box_nonce' ) ) return;

        // if our current user can't edit this post, bail
        if( !current_user_can( 'edit_post' ) ) return;

        // Make sure your data is set before trying to save it
        if( isset( $_POST['price_list_heading'] ) )
            update_post_meta( $post_id, 'price_list_heading', esc_attr( $_POST['price_list_heading'] ) );

        //
        if( isset( $_POST['price_list_category1'] ) )
            update_post_meta( $post_id, 'price_list_category1', esc_attr( $_POST['price_list_category1'] ) );

        if( isset( $_POST['price_list_items_category1'] ) )
            update_post_meta( $post_id, 'price_list_items_category1', esc_attr( $_POST['price_list_items_category1'] ) );

        //
        if( isset( $_POST['price_list_category2'] ) )
            update_post_meta( $post_id, 'price_list_category2', esc_attr( $_POST['price_list_category2'] ) );

        if( isset( $_POST['price_list_items_category2'] ) )
            update_post_meta( $post_id, 'price_list_items_category2', esc_attr( $_POST['price_list_items_category2'] ) );

        //
        if( isset( $_POST['price_list_category3'] ) )
            update_post_meta( $post_id, 'price_list_category3', esc_attr( $_POST['price_list_category3'] ) );

        if( isset( $_POST['price_list_items_category3'] ) )
            update_post_meta( $post_id, 'price_list_items_category3', esc_attr( $_POST['price_list_items_category3'] ) );
} 
```

我没有保存我在文本框和数据库中输入的内容，而是在所有字段中找到“数组”！到底是怎么回事？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:59:48.523

弄清楚了`$plheading = isset( $values['price_list_heading'] ) ? esc_attr( $values['price_list_heading'][0] ) : '';`

我失踪了`[0]`

顺便说一句，在该教程中的某些示例`[0]`中缺少:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:55:37.373

请看一下步骤，看看你是否遗漏了什么，这里是链接 [http://www.farinspace.com/how-to-create-custom-wordpress-meta-box/](http://www.farinspace.com/how-to-create-custom-wordpress-meta-box/)

# android-widget - 我的 UI 组件未正确显示在屏幕中。（即使在屏幕范围内）

> ID：11205705
> 
> 赞同：0
> 
> 时间：2012-06-26T10:48:21.463
> 
> 标签：android-widget

例如，

我的模拟器将 800*480 (w*h) 设置为屏幕尺寸。

纵向案例：我的 UI 的总宽度是 412dp。景观案例：总高度413

以上两种情况都在480以内。但内部组件仍然被切割。

如果有人知道答案，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T01:26:54.247

我从谷歌文档中得到了答案[在此处输入链接描述](http://developer.android.com/guide/practices/screens_support.html)

1 dp 等于 1.5 个物理像素

因为我将我的可绘制图标（例如 410*212 使用实际像素作为单位）放在 res/drawable 文件夹中。

所以我的组件的某些区域将被切割。

为了解决这个问题，我只是将我所有的图标移动到 res/drawable-high 文件夹中。

我从官方网站上截取了以下信息：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp
*   普通屏幕至少为 470dp x 320dp
*   小屏幕至少为 426dp x 320dp

# asp.net - 具有大量数据的 Xtra 报告性能

> ID：11205706
> 
> 赞同：0
> 
> 时间：2012-06-26T10:48:21.917
> 
> 标签：asp.net, devexpress, xtrareport

我在 Devexpress 中有 XtraReports 有 1 条数据（1326 页）.. 但是在 reportviewer 中加载数据需要很多时间.. 每个页面导航也需要相同的时间

减少将数据加载到 reportViewer 的时间的解决方案是什么？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T07:59:53.697

您没有提供足够的信息，因此我无法帮助您将数据加载到报表查看器。
关于页面导航：报表在初始呈现报表、浏览页面和导出期间获取所有数据。如果您希望报表仅在初始报表呈现时获取数据，请使用[报表缓存](http://www.devexpress.com/Support/Center/e/E1946.aspx)。

# facebook - Facebook 网络意图。它们存在吗？

> ID：11205707
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:48:25.910
> 
> 标签：facebook, api

我过去曾研究过几个 API。具体来说，我曾在 Facebook Public API 和 Twitter web intents 上工作过。

现在我正在寻找一种与 Facebook 联系的简单方法：喜欢、评论和分享。

除了 Facebook 之外，有没有类似 Twitter Web Intents 的东西？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:58:01.203

不，他们没有网络意图。与 Facebook 联系以进行点赞、评论和分享的最简单方法是使用许多已知的[核心概念](http://developers.facebook.com/docs/coreconcepts/)。

# java - Java 小程序在 IE9 中的页面加载/重新加载时在 java7 中失败

> ID：11205710
> 
> 赞同：5
> 
> 时间：2012-06-26T10:48:37.767
> 
> 标签：java, applet, internet-explorer-9

我在 Web 应用程序 (ASP.NET) 中运行 Applet，使用[deployJava.js进行](http://www.java.com/js/deployJava.js)[部署](http://docs.oracle.com/javase/tutorial/deployment/applet/deployingApplet.html)。它在 Java 6 u XX 上工作/工作正常。

在 Java 7u5 的最新更新之后，我遇到了一个难以理解的问题。在 IE9 上，Applet 起初工作正常，但在任何重新加载（F5 或回发）之后，Applet 就会冻结。

```
Java Plug-in 10.5.0.05
Using JRE version 1.7.0_05-b05 Java HotSpot(TM) Client VM
User home directory = C:\Users\***

basic: Starting applet teardown
basic: Finished applet teardown
basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@2e749c
plugin2manager.parentwindowDispose 
```

在 Firefox 和 Chrome 上，Applet 运行良好。将 JRE 版本降级到 6 后，所有浏览器（包括 IE-9）都可以正常工作。

我已经阅读了一些具有相同问题的 Java/Oracle/IE9 票证，并尝试了规定的解决方法，但它们没有帮助：

*   [清除 Java 缓存](http://www.java.com/en/download/help/clearcache_upgrade.xml)
*   禁用/启用任何[IE9 设置](http://www.binbert.com/blog/2011/02/java-applet-not-working-blank-in-ie9/)
*   安全、[Java 脚本](http://social.technet.microsoft.com/Forums/en-US/ieitprocurrentver/thread/54025e15-6648-477c-b3e1-7207ac961478)、ActiveX 过滤、兼容模式等）
*   [清除文档类型](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7074440)

顺便说一句：在 IE9 冻结后，我检查了 iexplorer.exe 进程，它占用了 130 - 180 Mb 的 RAM。删除此进程后，iexplorer.exe 会重新加载并正常工作，直到下一次浏览器/小程序重新加载。

如果我不够清楚，请询问更多细节。谢谢。

**谁能帮我解决 IE9&Java7 问题？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T14:02:39.880

我们在 IE9 中遇到了同样的问题，并且能够通过使用“object”-Tag 而不是“applet”来解决这些问题，并通过 HTML 标头中的 X-UA 元标记强制 IE9 进入 IE9-document-mode。这解决了 Java6 和最新 Java7 运行时的稳定性问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-02T14:28:38.213

我们已经在几个 Java 小程序中看到了这种相同的行为。

这个问题实际上是在 Java 7u4 中引入的，并且一直持续到 7u5。

更糟糕的是……罪魁祸首似乎是 Java 插件本身……所以禁用 7u5 并启用 6uXX 不足以解决问题。您必须*卸载*Java 7。

基本上我们看到两个问题：

*   Applet 在第 n 次加载尝试时根本不加载
*   浏览器死锁

我们已针对此问题向 Oracle 提交了一个错误，但尚未收到太多回复。

使用 Oracle 自己的 Java 测试小程序可以轻松重现该问题：

```
http://www.java.com/en/download/testjava.jsp 
```

这是我们输入的错误。你也入了一个吗？

```
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7176027 
```

这对我们的产品/客户来说是一个相当灾难性的问题。

如果/当您向 Oracle 输入错误报告时，请同时参考上面的错误！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T15:12:03.853

我的 Applet 也遇到了所有这些问题——而且只有 IE9 和 Java 7。我在网上找到的建议都没有任何改进。

幸运的是，甲骨文公司一定有人听取了所有的抱怨。Java 7 Update 6 于 2012 年 8 月 22 日成为默认的 JRE 下载，我们的 Applet 现在运行良好——即使没有我放入的所有“修复”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T19:26:44.990

我以前遇到过这个问题。我不明白为什么会发生这种情况，但我通过在每次负载时使用不同的 VM 来解决它：

```
var attributes = {
    code: '...',
    archive: '...',
    width: '...',
    height: '...',
    separate_jvm: true
};
var parameters = {
};
var version = '1.7';
deployJava.runApplet(attributes, parameters, version); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-07T20:47:57.413

我知道这是一个非常古老的问题，但我认为我们这些在旧系统中遇到这个问题的人真的需要一个答案。*在我的情况下，我没有重新加载任何东西，我的小程序是使用 javascript (deploy.js) 注入的，但我认为相同的解决方案可以工作。*因此，在两天内尝试了很多事情之后，这就是我得到的解决方案：

**每次执行后在弹出窗口中加载 Applet 并关闭它**。我认为这是可行的，因为每次弹出 DOM 都被浏览器加载为“新”。

```
var attributes = {
            code: '...Applet.class',
            archive: '...applet.jar',
            codebase: '/context',
            width: 1,
            height: 1,
            separate_jvm: true
        };
var parameters = {
        someCallback: 'opener.appletCallback',
        };

var aPopup = null;
function deployAppletInAPopup() {
    setTimeout(function () {
        aPopup = window.open('', '', 'width=100,height=100');
        aPopup.document.open();
        deployJava.runAppletIntoDocument(aPopup.document, attributes, parameters, "1.6");
        aPopup.document.close();
    }, 10);
}

function appletCallback() {
    setTimeout(function () {
        if (aPopup) {
            aPopup.close();
        }
        aPopup = null;
    }, 10);
}

[...]

<button onclick="deployAppletInAPopup()">Deploy Applet into a Popup</button> 
```

我正在使用 Windows 10、IE11 和 jdk-8u181-windows-i586。*这个问题只在 Java 8*中。

# c# - 打开和关闭电路

> ID：11205715
> 
> 赞同：0
> 
> 时间：2012-06-26T10:48:52.553
> 
> 标签：c#, .net, serial-port

我有一个应用程序，它的一个功能需要控制某些设备的电路（打开和关闭电路）。由于我没有电子方面的背景，我真的不知道从哪里开始。我查看了一些文章，发现我可能需要某种 RS232 中继设备，但我真的不知道这是否是正确的方法。
任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T10:56:53.550

我会假设这是一个低预算的项目——这样的事情会起作用：

[http://www.easydaq.biz/PagesUSB/USBRelayCardProductsFRAME2.htm](http://www.easydaq.biz/PagesUSB/USBRelayCardProductsFRAME2.htm)

中继卡有 USB、PCI 等可供选择。Google 将帮助您找到价格范围内、可在您所在地区交付且具有合适数量的输出的产品。

但是，有 DIY 超便宜的选择。这通常涉及将 LPT 打印机端口用作 DIO 端口。5V 线路可用于激活驱动类似继电器中的线圈的功率晶体管。必须为这种项目自己焊接。LPT 位可以通过非常简单的低级存储器写入来设置。

对于商业或工业应用，价格会上涨（可靠性也会上涨），正确的设备在很大程度上取决于特定的应用和环境。

# database - 如何编写将日期转换为波斯语的 Oracle 函数 (jalali)

> ID：11205716
> 
> 赞同：10
> 
> 时间：2012-06-26T10:48:55.113
> 
> 标签：database, oracle, function

我想在 oracle 数据库中将日期转换为波斯日期 (jalali) 有什么功能吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-09T08:39:10.357

您可以使用以下语句：

```
select to_char(hiredate,'yyyy/mm/dd','nls_calendar=persian') from emp 
```

`hiredate`是一个日期字段，使用此选择`hiredate`以波斯语显示

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-01-24T20:54:00.953

首先，您必须设置`nls_calendar`为波斯语，如下所示：

```
Alter session set nls_calendar=persian; 
```

现在您可以更改日期格式，如下所示：

```
Select to_char(sysdate,'yyyy/mm/dd') from dual; 
```

# ms-access - 如何从 VBA 在 Windows 资源管理器中打开文件夹？

> ID：11205719
> 
> 赞同：47
> 
> 时间：2012-06-26T10:49:04.490
> 
> 标签：ms-access, vba

我想单击访问表单上的一个按钮，该按钮在 Windows 资源管理器中打开一个文件夹。

有没有办法在 VBA 中做到这一点？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-26T10:49:05.317

您可以使用以下代码从 vba 打开文件位置。

```
Dim Foldername As String
Foldername = "\\server\Instructions\"

Shell "C:\WINDOWS\explorer.exe """ & Foldername & "", vbNormalFocus 
```

您可以将此代码用于 Windows 共享和本地驱动器。

如果您想要最大化视图，VbNormalFocus 可以与 VbMaximizedFocus 交换。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-12-08T01:37:07.537

最简单的方法是

```
Application.FollowHyperlink [path] 
```

只需要一条线！

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-09-02T17:05:01.857

感谢 PhilHibbs 的评论（关于 VBwhatnow 的回答），我终于找到了一个既可以重用现有窗口又可以避免在用户面前闪烁 CMD 窗口的解决方案：

```
Dim path As String
path = CurrentProject.path & "\"
Shell "cmd /C start """" /max """ & path & """", vbHide 
```

其中“路径”是您要打开的文件夹。

（在此示例中，我打开保存当前工作簿的文件夹。）

**优点：**

*   避免打开新的资源管理器实例（仅在窗口存在时设置焦点）。
*   由于 vbHide ，cmd 窗口**永远不可见。**
*   比较简单（不需要引用win32库）。

**缺点：**

*   窗口最大化（或最小化）是强制性的。

### 解释：

起初我尝试只使用 vbHide。这很好用......除非已经打开了这样的文件夹，在这种情况下*，现有的文件夹窗口将隐藏并消失！*您现在有一个幽灵窗口在内存中浮动，之后任何打开文件夹的尝试都将重新使用隐藏的窗口 - 似乎没有任何效果。

换句话说，当“开始”命令找到现有窗口时，指定的 vbAppWinStyle 将*同时*应用于CMD 窗口和重用的资源管理器窗口。（幸运的是，我们可以通过使用不同的 vbAppWinStyle 参数再次调用相同的命令来取消隐藏我们的幽灵窗口。）

但是，通过在调用 'start' 时指定 /max 或 /min 标志，它可以防止 CMD 窗口上设置的 vbAppWinStyle 被递归应用。（或者覆盖它？我不知道技术细节是什么，我很想知道这里的事件链到底是什么。）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-05-28T07:19:35.010

这里有一些更酷的知识：

我有一种情况，我需要能够根据记录中的一些标准找到文件夹，然后打开找到的文件夹。在寻找解决方案的工作时，我创建了一个小型数据库，该数据库要求搜索起始文件夹为 4 条标准提供一个位置，然后允许用户进行标准匹配，打开与输入的匹配的 4 个（或更多）可能的文件夹标准。

这是表单上的完整代码：

```
Option Compare Database
Option Explicit

Private Sub cmdChooseFolder_Click()

    Dim inputFileDialog As FileDialog
    Dim folderChosenPath As Variant

    If MsgBox("Clear List?", vbYesNo, "Clear List") = vbYes Then DoCmd.RunSQL "DELETE * FROM tblFileList"
    Me.sfrmFolderList.Requery

    Set inputFileDialog = Application.FileDialog(msoFileDialogFolderPicker)

    With inputFileDialog
        .Title = "Select Folder to Start with"
        .AllowMultiSelect = False
        If .Show = False Then Exit Sub
        folderChosenPath = .SelectedItems(1)
    End With

    Me.txtStartPath = folderChosenPath

    Call subListFolders(Me.txtStartPath, 1)

End Sub
Private Sub cmdFindFolderPiece_Click()

    Dim strCriteria As String
    Dim varCriteria As Variant
    Dim varIndex As Variant
    Dim intIndex As Integer

    varCriteria = Array(Nz(Me.txtSerial, "Null"), Nz(Me.txtCustomerOrder, "Null"), Nz(Me.txtAXProject, "Null"), Nz(Me.txtWorkOrder, "Null"))
    intIndex = 0

    For Each varIndex In varCriteria
        strCriteria = varCriteria(intIndex)
        If strCriteria <> "Null" Then
            Call fnFindFoldersWithCriteria(TrailingSlash(Me.txtStartPath), strCriteria, 1)
        End If
        intIndex = intIndex + 1
    Next varIndex

    Set varIndex = Nothing
    Set varCriteria = Nothing
    strCriteria = ""

End Sub
Private Function fnFindFoldersWithCriteria(ByVal strStartPath As String, ByVal strCriteria As String, intCounter As Integer)

    Dim fso As New FileSystemObject
    Dim fldrStartFolder As Folder
    Dim subfldrInStart As Folder
    Dim subfldrInSubFolder As Folder
    Dim subfldrInSubSubFolder As String
    Dim strActionLog As String

    Set fldrStartFolder = fso.GetFolder(strStartPath)

'    Debug.Print "Criteria: " & Replace(strCriteria, " ", "", 1, , vbTextCompare) & " and Folder Name is " & Replace(fldrStartFolder.Name, " ", "", 1, , vbTextCompare) & " and Path is: " & fldrStartFolder.Path

    If fnCompareCriteriaWithFolderName(fldrStartFolder.Name, strCriteria) Then
'        Debug.Print "Found and Opening: " & fldrStartFolder.Name & "Because of: " & strCriteria
        Shell "EXPLORER.EXE" & " " & Chr(34) & fldrStartFolder.Path & Chr(34), vbNormalFocus
    Else
        For Each subfldrInStart In fldrStartFolder.SubFolders

            intCounter = intCounter + 1

            Debug.Print "Criteria: " & Replace(strCriteria, " ", "", 1, , vbTextCompare) & " and Folder Name is " & Replace(subfldrInStart.Name, " ", "", 1, , vbTextCompare) & " and Path is: " & fldrStartFolder.Path

            If fnCompareCriteriaWithFolderName(subfldrInStart.Name, strCriteria) Then
'                Debug.Print "Found and Opening: " & subfldrInStart.Name & "Because of: " & strCriteria
                Shell "EXPLORER.EXE" & " " & Chr(34) & subfldrInStart.Path & Chr(34), vbNormalFocus
            Else
                Call fnFindFoldersWithCriteria(subfldrInStart, strCriteria, intCounter)
            End If
            Me.txtProcessed = intCounter
            Me.txtProcessed.Requery
        Next
    End If

    Set fldrStartFolder = Nothing
    Set subfldrInStart = Nothing
    Set subfldrInSubFolder = Nothing
    Set fso = Nothing

End Function
Private Function fnCompareCriteriaWithFolderName(strFolderName As String, strCriteria As String) As Boolean

    fnCompareCriteriaWithFolderName = False

    fnCompareCriteriaWithFolderName = InStr(1, Replace(strFolderName, " ", "", 1, , vbTextCompare), Replace(strCriteria, " ", "", 1, , vbTextCompare), vbTextCompare) > 0

End Function

Private Sub subListFolders(ByVal strFolders As String, intCounter As Integer)
    Dim dbs As Database
    Dim fso As New FileSystemObject
    Dim fldFolders As Folder
    Dim fldr As Folder
    Dim subfldr As Folder
    Dim sfldFolders As String
    Dim strSQL As String

    Set fldFolders = fso.GetFolder(TrailingSlash(strFolders))
    Set dbs = CurrentDb

    strSQL = "INSERT INTO tblFileList (FilePath, FileName, FolderSize) VALUES (" & Chr(34) & fldFolders.Path & Chr(34) & ", " & Chr(34) & fldFolders.Name & Chr(34) & ", '" & fldFolders.Size & "')"
    dbs.Execute strSQL

    For Each fldr In fldFolders.SubFolders
        intCounter = intCounter + 1
        strSQL = "INSERT INTO tblFileList (FilePath, FileName, FolderSize) VALUES (" & Chr(34) & fldr.Path & Chr(34) & ", " & Chr(34) & fldr.Name & Chr(34) & ", '" & fldr.Size & "')"
        dbs.Execute strSQL
        For Each subfldr In fldr.SubFolders
            intCounter = intCounter + 1
            sfldFolders = subfldr.Path
            Call subListFolders(sfldFolders, intCounter)
            Me.sfrmFolderList.Requery
        Next
        Me.txtListed = intCounter
        Me.txtListed.Requery
    Next

    Set fldFolders = Nothing
    Set fldr = Nothing
    Set subfldr = Nothing
    Set dbs = Nothing

End Sub

Private Function TrailingSlash(varIn As Variant) As String
    If Len(varIn) > 0& Then
        If Right(varIn, 1&) = "\" Then
            TrailingSlash = varIn
        Else
            TrailingSlash = varIn & "\"
        End If
    End If
End Function 
```

该表单有一个基于表格的子表单，该表单有 4 个用于标准的文本框、2 个通向点击程序的按钮和 1 个用于存储起始文件夹字符串的其他文本框。有 2 个文本框用于显示列出的文件夹数量以及在搜索条件时处理的数量。

如果我有代表，我会张贴一张照片......：/

我还有一些其他的东西想添加到这段代码中，但还没有机会。我想有一种方法来存储在另一个表中工作的那些，或者让用户将它们标记为可以存储。

我不能对所有代码要求完全的功劳，我从周围找到的东西中拼凑了其中的一些，甚至在 stackoverflow 上的其他帖子中也是如此。

我真的很喜欢在这里发布问题然后自己回答的想法，因为正如链接文章所说，它可以很容易地找到答案以供以后参考。

当我完成我想添加的其他部分时，我也会发布代码。:)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-12-20T09:06:43.047

您可以使用命令提示符打开带有路径的资源管理器。

这里带有批处理或命令提示符的示例：

```
start "" explorer.exe (path) 
```

所以在 VBA ms.access 中你可以写：

```
Dim Path
Path="C:\Example"
shell "cmd /c start """" explorer.exe " & Path ,vbHide 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-04T10:56:00.610

由于公司的安全性，我可能不会使用 shell 命令，所以这是我在互联网上找到的最好方法。

```
Sub OpenFileOrFolderOrWebsite() 
'Shows how to open files and / or folders and / or websites / or create    emails using the FollowHyperlink method
Dim strXLSFile As String, strPDFFile As String, strFolder As String, strWebsite As String 
Dim strEmail As String, strSubject As String, strEmailHyperlink As     String 

strFolder = "C:\Test Files\" 
strXLSFile = strFolder & "Test1.xls" 
strPDFFile = strFolder & "Test.pdf" 
strWebsite = "http://www.blalba.com/" 

strEmail = "mailto:YourEmailHere@Website.com" 
strSubject = "?subject=Test" 
strEmailHyperlink = strEmail & strSubject 

 '**************FEEL FREE TO COMMENT ANY OF THESE TO TEST JUST ONE ITEM*********
 'Open Folder
ActiveWorkbook.FollowHyperlink Address:=strFolder, NewWindow:=True 
 'Open excel workbook
ActiveWorkbook.FollowHyperlink Address:=strXLSFile, NewWindow:=True 
 'Open PDF file
ActiveWorkbook.FollowHyperlink Address:=strPDFFile, NewWindow:=True 
 'Open VBAX
ActiveWorkbook.FollowHyperlink Address:=strWebsite, NewWindow:=True 
 'Create New Email
ActiveWorkbook.FollowHyperlink Address:=strEmailHyperlink, NewWindow:=True 
 '******************************************************************************
End Sub 
```

所以实际上它

```
strFolder = "C:\Test Files\" 
```

和

```
ActiveWorkbook.FollowHyperlink Address:=strFolder, NewWindow:=True 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-04-13T16:28:08.610

这就是我所做的。

```
Dim strPath As String
strPath = "\\server\Instructions\"    
Shell "cmd.exe /c start """" """ & strPath & """", vbNormalFocus 
```

**优点：**

*   避免打开新的资源管理器实例（仅在窗口存在时设置焦点）。
*   比较简单（不需要引用win32库）。
*   窗口最大化（或最小化）**不是**强制性的。窗口将以正常大小打开。

**缺点：**

*   cmd 窗口在短时间内可见。

如果没有打开的文件夹，这会始终打开一个窗口，如果该文件夹有一个打开的窗口，则会切换到打开的窗口。

感谢 PhilHibbs 和 AnorZaken 提供的基础。PhilHibbs 评论对我来说不太适用，我需要命令字符串在文件夹名称前有一对双引号。而且我更喜欢让命令提示符窗口出现一段时间，而不是被迫最大化或最小化资源管理器窗口。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-08T14:37:01.663

这是一个给出开始的切换或启动行为的答案，没有命令提示符窗口。它确实有一个缺点，即它可能会被在其他地方打开同名文件夹的资源管理器窗口所欺骗。我可能会通过潜入子窗口并寻找实际路径来解决这个问题，我需要弄清楚如何导航。

用法（需要项目参考中的“Windows 脚本宿主对象模型”）：

```
Dim mShell As wshShell

mDocPath = whatever_path & "\" & lastfoldername
mExplorerPath = mShell.ExpandEnvironmentStrings("%SystemRoot%") & "\Explorer.exe"

If Not SwitchToFolder(lastfoldername) Then
    Shell PathName:=mExplorerPath & " """ & mDocPath & """", WindowStyle:=vbNormalFocus
End If 
```

模块：

```
Private Declare Function FindWindowEx Lib "user32" Alias "FindWindowExA" _
(ByVal hWnd1 As Long, ByVal hWnd2 As Long, ByVal lpsz1 As String, ByVal lpsz2 As String) As Long
Private Declare Function GetClassName Lib "user32" Alias "GetClassNameA" _
(ByVal hWnd As Long, ByVal lpClassName As String, ByVal nMaxCount As Long) As Long
Private Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" _
(ByVal hWnd As Long, ByVal lpString As String, ByVal cch As Long) As Long
Private Declare Function BringWindowToTop Lib "user32" _
(ByVal lngHWnd As Long) As Long

Function SwitchToFolder(pFolder As String) As Boolean

Dim hWnd As Long
Dim mRet As Long
Dim mText As String
Dim mWinClass As String
Dim mWinTitle As String

    SwitchToFolder = False

    hWnd = FindWindowEx(0, 0&, vbNullString, vbNullString)
    While hWnd <> 0 And SwitchToFolder = False
        mText = String(100, Chr(0))
        mRet = GetClassName(hWnd, mText, 100)
        mWinClass = Left(mText, mRet)
        If mWinClass = "CabinetWClass" Then
            mText = String(100, Chr(0))
            mRet = GetWindowText(hWnd, mText, 100)
            If mRet > 0 Then
                mWinTitle = Left(mText, mRet)
                If UCase(mWinTitle) = UCase(pFolder) Or _
                   UCase(Right(mWinTitle, Len(pFolder) + 1)) = "\" & UCase(pFolder) Then
                    BringWindowToTop hWnd
                    SwitchToFolder = True
                End If
            End If
        End If
        hWnd = FindWindowEx(0, hWnd, vbNullString, vbNullString)
    Wend

End Function 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-27T05:54:29.357

私有子 Command0_Click()

Application.FollowHyperlink "D:\1Zsnsn\SusuBarokah\20151008 Inventory.mdb"

结束子

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-04-06T09:56:17.847

我刚刚使用它，它工作正常：

System.Diagnostics.Process.Start("C:/Users/Admin/files");

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-13T14:02:55.740

感谢上面和其他地方的许多答案，这是我对与 OP 类似问题的解决方案。我的问题是在 Word 中创建一个按钮，该按钮要求用户提供网络地址，并在资源管理器窗口中调出 LAN 资源。

原封不动，代码将带您进行`\\10.1.1.1\Test,`您认为合适的编辑。我只是一个键盘上的猴子，在这里，所以欢迎所有的意见和建议。

```
Private Sub CommandButton1_Click()
    Dim ipAddress As Variant
    On Error GoTo ErrorHandler

    ipAddress = InputBox("Please enter the IP address of the network resource:", "Explore a network resource", "\\10.1.1.1")
    If ipAddress <> "" Then
        ThisDocument.FollowHyperlink ipAddress & "\Test"
    End If

    ExitPoint:
        Exit Sub

    ErrorHandler:
        If Err.Number = "4120" Then
            GoTo ExitPoint
        ElseIf Err.Number = "4198" Then
            MsgBox "Destination unavailable"
            GoTo ExitPoint
        End If

        MsgBox "Error " & Err.Number & vbCrLf & Err.Description
        Resume ExitPoint

End Sub 
```

# java - 标签不工作

> ID：11205727
> 
> 赞同：1
> 
> 时间：2012-06-26T10:49:24.413
> 
> 标签：java, struts2

我在使用 Struts 2 `<s:if>`/`<s:else>`标签时遇到问题——条件不匹配。它总是会阻塞。

我的操作中有一个带有 setter 和 getter 的变量 subMenu。我在操作中将变量设置为“1”。

我尝试了以下每种语法：

```
<s:if test="%{#subMenu == \"1\"}">
  This is Submenu 1
 </s:if>

 <s:if test="subMenu == '1'">
   You have selected 1\. 
 </s:if>

 <s:if test="%{#subMenu == '1'}">
   This is Submenu 1
 </s:if>

 <s:if test="%{subMenu == '1'}">
   This is Submenu 1
 </s:if> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:49:50.190

如果`subMenu`是 a`String`如测试所示，使用双引号，否则立即值将被解释为 a `char`(not `String`)，因为它是单引号中的单个字符。

```
<s:if test='%{subMenu == "1"}'>
  This is Submenu 1
</s:if> 
```

请注意，我已经翻转了哪些引号在哪里使用。这就是 OGNL 的工作原理。

替代方案包括使用实际整数，或使用除“1”、“2”、“3”等之外的更易于推理的系统，并使用具有上下文意义的名称而不是让人们思考它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:06:17.607

这可能是解决方案。如果您的操作结果是“plain”并且 subMenu 是“string”类型，这意味着它是一个页面

```
<s:if test="subMenu == '1'">test</s:if> 
```

应该管用。

这是建议。

1.  首先尝试打印“subMenu”以检查变量是否不为空，方法是使用：

    ```
    <s:property value="subMenu"/> 
    ```

2.  检查你的动作类，如果你的结果不是*.jsp，而是*.action，你会丢失你的变量，尝试像这样添加你的变量作为参数：

    ```
    <result name="success">
        <param name="subMenu">${subMenu}</param>
        <param name="location">*.action</param>
        ...
    </result> 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T08:25:36.293

如果比较不起作用，则对于单个字符支柱。简单的解决方案是尝试使用字符串而不是单个字符

# iphone - 不通过实例方法

> ID：11205728
> 
> 赞同：-1
> 
> 时间：2012-06-26T10:49:26.970
> 
> 标签：iphone, ios, ipad

我正在尝试做一个应用程序，但不幸的是它没有通过所有（无效）实例方法（我从另一个项目中复制了方法）......并且也没有显示任何错误......任何人都可以告诉我知道怎么了？？？？我正在构建一个带有下拉表的 textfeild 应用程序

这些是方法：

```
- (void)finishedSearching;
- (void)searchAutocompleteEntriesWithSubstring:(NSString *)substring;
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;

#pragma mark UITextFieldDelegate methods

- (BOOL)textFieldShouldReturn:(UITextField *)textField ;
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string ;

#pragma mark UITableViewDelegate methods

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView ;

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger) section ;
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath ;
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:57:29.823

要正确设置委托，您需要执行以下操作 -

1.  确认委托协议。例如 -

    `YourClass: SomeClass <UITextFieldDelegate>`-> 这是委托确认

2.  设置委托，您将在其中创建控制。例如 -

    `UItextField *myTextField = [[UItextField alloc] init];` `----` `myTextField.delegate = self;`

3.  现在您需要在您的类中提供该委托所需方法的定义。

希望这能清除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T10:58:18.703

。H

```
@interface YourClasss
YourClass : ParentClass < UITextFieldDelegate, UITableViewDelegate, UITableViewDataSource >
@end 
```

.m

```
 yourTableView.delegate = self;
 yourTableView.dataSource = self;
 yourTextField.delegate = self 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:42:08.537

在你的 .h 文件中

```
@interface Class
Class : NSObject < UITextFieldDelegate, UITableViewDelegate, UITableViewDataSource >
@end 
```

在你的 .m 文件中

```
viewDidLoad
{

 tblViewVar.delegate = self;
 tblViewVar.dataSource = self;
 tblViewVar.delegate = self

[super viewDidLoad];
} 
```

# python - 5 节点 Riak 设置：100 ops/sec 吞吐量。我究竟做错了什么？

> ID：11205730
> 
> 赞同：1
> 
> 时间：2012-06-26T10:49:35.347
> 
> 标签：python, erlang, riak

这是我对 Riak 1.1.4 的设置

*   5 个节点
*   ami-a29943cb (EC2 AMI)
*   m1.large（7.5GB 内存，4 个 EC2 计算实例）
*   EBS 存储
*   LevelDB 后端
*   带有 Protobuf 的 Python 客户端（在单独的机器上）

我尝试在设置上运行 basho 基准测试，它显示 100 ops/sec 吞吐量。

在与人或 Riak IRC 交谈后，我意识到我应该得到 1.5K 操作/秒以上的速度。

谁能帮我弄清楚我做错了什么？

谢谢，优素福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T17:59:29.190

EBS 很慢。您是否尝试过对您的 EBS 卷进行 RAID 操作，或者运行短暂的？

[http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-April/003712.html](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-April/003712.html)

# django - 排除和重新定位表单中的字段

> ID：11205735
> 
> 赞同：0
> 
> 时间：2012-06-26T10:49:58.147
> 
> 标签：django

我已经排除了这样的字段以设置它的标签。

```
class ContactsForm(ModelForm):
    marital_status    = forms.ModelChoiceField(label=_(u'Marital Status'), queryset=MaritalStatus.objects.all())

class Meta:
        model = Contact
        exclude = ('marital_status',) 
```

这可行，但婚姻状况现在出现在所有其他元素之后的表格的最后。

有没有办法指定字段的位置？

**或者**，如果我能够在它自己的模型中设置标签，我什至不必首先排除该字段，如下例所示，我在其中设置了标签“出生日”。我似乎无法为models.ForeignKey设置标签，知道吗？

```
marital_status      = models.ForeignKey(MaritalStatus)
birth_date          = models.DateField(_(u"Day Of Birth"), blank=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:11:56.187

完全没有必要排除它。只需像在第一个示例中一样声明它，然后将其排除在`exclude`参数之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:37:53.360

您可以在定义外键时使用“verbose_name”属性，该属性将在表单中显示为标签。

参考：[https ://docs.djangoproject.com/en/dev/topics/db/models/#verbose-field-names](https://docs.djangoproject.com/en/dev/topics/db/models/#verbose-field-names)

```
marital_status = models.ForeignKey(MaritalStatus, verbose_name=_(u'Marital Status')) 
```

# html - 在画布html5中绘制自定义形状

> ID：11205747
> 
> 赞同：1
> 
> 时间：2012-06-26T10:50:53.267
> 
> 标签：html, canvas, shape

![图片](../Images/e63c46d0ad6f068d9f83b82409c34e12.png)

有人可以帮我在画布上画这个形状吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:11:18.487

你可以试试 quadraticCurveTo ( [https://developer.mozilla.org/en/Canvas_tutorial/Drawing_shapes](https://developer.mozilla.org/en/Canvas_tutorial/Drawing_shapes) )

这是一个例子：http: [//jsfiddle.net/V9sVY/](http://jsfiddle.net/V9sVY/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T17:33:13.893

要绘制任何自定义形状，请使用此站点[http://canvimation.github.com/](http://canvimation.github.com/)直接绘制形状并将其导出为画布。查看导出页面的源代码还将向您显示获取它的画布脚本。

对于上述形状，将网格设置更改为 grid on and show 以确保您将绘制一条直线。选择自由形状，单击开始一行，然后在行尾双击。拖动红色控制点以形成所需的形状。控制点不会锁定到网格，但可以帮助您确定放置它们的位置。

以下显示了通过这样做获得的一种可能性。

```
 ctx.beginPath();
           ctx.moveTo(167,196);
           ctx.bezierCurveTo(217,98,418,99,467,196);
           ctx.bezierCurveTo(414,296,218,295,167,196);
           ctx.closePath();
           ctx.stroke(); 
```

# iphone - 如何从 UITextfield 获取价值并将其发送到电子邮件？

> ID：11205750
> 
> 赞同：3
> 
> 时间：2012-06-26T10:50:56.440
> 
> 标签：iphone, ios, xcode, uitextfield

我创建了一个应用程序，其中包含表单并且必须填写适当的文本字段。现在我需要在文本字段中获取所有数据并将其发送到电子邮件中。这是我撰写电子邮件的代码

```
- (IBAction)compose:(id)sender 
{
if (text1.text=@"" && text2.text=@"" && text3.text=@"" && text4.text=@"" && text5.text=@"") {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure" 
                                                    message:@"Please enter all the field details" 
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles: nil];
}
                                                                             else{

if ([MFMailComposeViewController canSendMail])
{
    MFMailComposeViewController *mailer = [[MFMailComposeViewController alloc] init];

    mailer.mailComposeDelegate = self;

    [mailer setSubject:[NSString stringWithFormat:@"Appointment From Mr/Mrs. %@",text1.text]];

    NSArray *toRecipients = [NSArray arrayWithObjects:@"xxx@xxxx.com", nil];
    [mailer setToRecipients:toRecipients];

    NSString *emailBody =[NSString stringWithFormat:@"Name =%@\nDate= %@\nPreferred Time Slot= %@\nE-Mail=%@\nSpecific Requests=",text1.text,text2.text,text3.text,text4.text,text5.text]; 
    [mailer setMessageBody:emailBody isHTML:NO];

    [self presentModalViewController:mailer animated:YES];

    [mailer release];
}
else
{
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Failure" 
                                                    message:@"Your device doesn't support the composer sheet" 
                                                   delegate:nil 
                                          cancelButtonTitle:@"OK" 
                                          otherButtonTitles: nil];
    [alert show];
    [alert release];
}
} 
```

}

如果所有文本字段为空，则必须弹出警报。但我遇到错误？...请指导我..

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-26T10:53:51.620

如果您想知道如何从 textfield 获取文本并将其发送，您将需要使用 textfield.text

```
NSString *emailBody = textField.text;
[mailer setMessageBody:emailBody isHTML:NO]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T10:54:37.267

可以有两种方式——

1.  您可以为您的文本字段创建属性，然后`myTextField.text`在您想要的地方访问。

2.  当文本字段有一些文本时，您可以创建一个`NSString`属性并为此设置值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:54:58.770

```
 //this is one single line which return your textFiledData

 your_text_field.text 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:17:39.657

为您的文本字段创建一个变量，例如 IBOutlet UITextField * textFieldVar; 并将其连接到笔尖中的文本字段，然后使用以下代码您可以从文本字段中获取文本

```
 NSString *emailBody = textFieldVar.text; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T04:23:26.200

您可以通过附加特定格式的字符串来根据需要创建电子邮件正文，例如用户 ID：223984775（来自 textfieldUserID 的值）名称：XYZ（来自 textfieldName 的值）......

您可以通过在用户移动到下一个要输入的文本字段时附加字符串来做到这一点。

使用 Nsstring "stringWithFormat" 方法将数据附加到正文中。使用 \n 和 \t 为电子邮件正文提供表格结构。也使用格式

# printing - IE9 打印预览的 java Applet/图像问题二重奏（似乎是插值）

> ID：11205753
> 
> 赞同：0
> 
> 时间：2012-06-26T10:51:05.770
> 
> 标签：printing, internet-explorer-9, rendering, preview

我目前正在扩展一个财务应用程序，包括一个最初为 ie5 开发的 Html 报告解决方案。现在我用的是ie9。

我在打印预览中呈现图像和 Java 小程序时遇到问题。

如图所示： [Applet 在浏览器中绘制得非常好，](https://dl.dropbox.com/u/1484680/good%20print%20preview.PNG) [但在打印预览中看起来真的很难看](https://dl.dropbox.com/u/1484680/damn%20print%20preview.PNG)

对我来说看起来像是一些fubard插值

你们中有人遇到过类似的问题，甚至有解决这个问题的方法吗？

谢谢！

编辑：我忘了添加小程序代码，让你知道我在处理什么

 `````
<applet name="" code="netcharts4.apps.NFPiechartApp" codebase="<%= request.getContextPath() %>/NetCharts/classes" archive="netcharts4.jar" class="pieChart">
        <param name="NFParamScript" value='
            Background                 = (white,NONE,1,null,TILE,black); 
            PieSquare                  = ON; 
            SliceData                  = <%=ch.getValuesforChart() %>; 
            Pie3DDepth                 = 20; 
            SliceLabelStyle            = EXTERIOR; 
            SliceLabelLine             = (SOLID,1,black); 
            SliceLabelContent          = LABEL; 
            SliceLabelContentDelimiter = "\n"; 
            SliceLabel                 = (ON,black,"Sans Serif",10,0); 
            SliceLabelBox              = (white,NONE,2); 
            SliceBorder                = (SOLID,1,black);
            SliceLabels                = <%=ch.getValuesforChartLegend() %>; 
            ColorTable                 = <%=ch.getColorTableForChart(ch.getDetails().size()) %>;
            AntiAlias                  = ON;'/> 
    </applet> 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-20T11:39:37.977

我发现 ie9 与 java6 根本不相处，java7 显示小程序更好但加载时间太长。ie10 和 11 在 java 安装好并可用时工作（这需要更改 ie 设置）。我最终用一个 java scripled 替换了这个小程序，它生成了一个看起来一样的 svg 元素``

# cocos2d-iphone - 如何回滚（？）CCFadeout、CCScaleby 和 CCBlink？(cocos2d)

> ID：11205755
> 
> 赞同：0
> 
> 时间：2012-06-26T10:51:08.890
> 
> 标签：cocos2d-iphone

我试图首先在我的游戏中使用 CCFadeOut，这是第一个动作

然后我想移动到秤上，然后在没有先前动作的影响的情况下眨眼。

但是当我切换到下一个动作时，上一个动作的效果最后..

例如，如果我在缩放之前使用了淡出，然后更改为缩放，则 ccsprite 会以时刻缩放动作淡出

所以，我想要做的是删除先前动作的效果......

你能给我一些示例代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T03:33:06.970

您是否使用*CCSequence*一个接一个地对操作进行排序？

```
id fadeout = [CCFadeOut actionWithDuration:2]; 
id scale = [CCScaleTo actionWithDuration:2 scale:2];       
id blink = [CCBlink actionWithDuration:2 blinks:5];   

CCSequence* sequence = [CCSequence actions:fadeout, scale, blink, nil]; 
[sprite runAction:sequence]; 
```

# networking - 如何在android中将数据存储在网络或网络上？

> ID：11205756
> 
> 赞同：0
> 
> 时间：2012-06-26T10:51:09.920
> 
> 标签：networking, web, datastore

我很新，将开发简单的应用程序，用户将自己的信息分享给所有注册特定组和网络的人。如何在网络上存储该数据，查看所有信息自己或每个成员来自不同位置的所有信息（不同的地方）通过网络或网络。

那么，请详细说明如何在网络或网络上存储我的数据？每个成员都可以轻松访问这些数据吗？

我已经通过尝试在 Internet 上进行搜索来完成，但是可以在网络上的数据存储背后获得更多的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:55:36.190

最好通过网络将数据存储在数据库中，并让其他用户授予对这些数据库的访问权限以访问信息。

从 android 的远程数据库中存储数据并检索数据非常容易，这可以从[这里](http://fahmirahman.wordpress.com/2011/04/21/connection-between-php-server-and-android-client-using-http-and-json/)的教程中理解。

# selenium - WebDriver Quit方法在关闭时挂起Chrome浏览器

> ID：11205760
> 
> 赞同：1
> 
> 时间：2012-06-26T10:51:33.907
> 
> 标签：selenium, webdriver, selenium-chromedriver

> **可能重复：**
> [在 Grid 上运行时如何关闭 ChromeDriver？](https://stackoverflow.com/questions/11187172/how-to-close-a-chromedriver-when-running-on-grid)

我使用 ChromeDriver 打开 Chrome 浏览器并使用 Quit() 方法关闭 chrome，当时浏览器挂断并给出错误，如本问题所附

```
import org.openqa.selenium.WebDriver; 
import org.openqa.selenium.chrome.ChromeDriver;

    public class test{

            public static void main(String[] args) throws InterruptedException {

System.setProperty("webdriver.chrome.driver", "C:\\chromedriver.exe");      
WebDriver driver = new ChromeDriver();      
driver.get("http://google.com");
driver.quit();

        }

    } 
```

![在此处输入图像描述](../Images/10d4890e86e579fbda6899973b5ad994.png)

Windows 挂起错误上列出的这些错误

```
Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: chromedriver.exe
  Application Version:  0.0.0.0
  Application Timestamp:    4fe36699
  Fault Module Name:    chromedriver.exe
  Fault Module Version: 0.0.0.0
  Fault Module Timestamp:   4fe36699
  Exception Code:   80000003
  Exception Offset: 000143e0
  OS Version:   6.1.7600.2.0.0.768.2
  Locale ID:    16393
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-26T11:26:39.950

您遵循的步骤非常好，但作为一种良好做法，请关闭与驱动程序关联的所有活动浏览器窗口，然后退出驱动程序。

当您在关闭浏览器窗口之前退出驱动程序时，它有时可能会引发异常。

在这种情况下......我会写如下

> Driver.Close();
> 
> Driver.Quit();

请尝试执行以下操作，我希望 chrome 错误应该消失:)

一切顺利。

# entity-framework - 如何使用实体框架从数据库中实现自定义对象物化

> ID：11205766
> 
> 赞同：4
> 
> 时间：2012-06-26T10:51:51.227
> 
> 标签：entity-framework

我对 Entity Framework 相当陌生，并且正在研究将一些遗留数据访问代码转换为使用 EF。我想知道在 EF 中是否可以执行以下操作，如果可以，如何操作。假设我有一个这样的客户表

```
CustomerId | ProductId | StartDate | EndDate
--------------------------------------------
100        | 999       | 01/01/2012| null 
```

假设我还从其他地方（如 XML 文件）加载产品数据作为产品对象的缓存。

```
public class Customer
{
    public int CustomerId {get;set;}
    public int Product {get;set}
    public DateTime StartDate {get;set;}
    public DateTime? EndDate {get;set;}    

}

public class Product
{
    public int ProductId {get;set;}
    public int Description {get;set}
} 
```

目前在 CustomerDal 类中，该方法使用 StoredProc 来获取这样的 Customer 对象

```
Customer GetCustomer(int customerId)
{
    // setup connection, command, parameters for SP, loop over datareader
    Customer customer = new Customer();
    customer.CustomerId = rdr.GetInt32(0);
    int productId = rdr.GetInt32(1);
    // ProductCache is a singleton object that has been initialised before
    customer.Product = ProductCache.Instance.GetProduct(productId);
    customer.StartDate = rdr.GetDateTime(2);
    customer.EndDate = rdr.IsDbNull(3) ? (DateTime?)null : rdr.GetDateTime(3);
    return customer;
} 
```

我的问题是，当它实现 Customer 对象时，这可能使用 EF，它设置 Product 属性不是来自数据库，而是通过另一种方法，在这种情况下来自内存缓存。同样，当保存一个新的客户对象时，它只从 Products 属性中获取 ProductId 并将值保存在 DB 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T22:38:35.527

如果您将产品实例附加到 EF 上下文，则在加载属性时，只要与客户关联的产品已经附加，就会自动从内存中填充属性，而无需查询数据库`Customer`。`Product`

例如，从这些实体开始：

```
public class Customer
{
    public int Id { get; set; }
    public int ProductId { get; set; }
    public string Name { get; set; }
    public Product Product { get; set; }
}

public class Product
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

产品将在全球范围内可用，为简单起见，让我们将其设为静态类：

```
public static class CachedProducts
{
    public static Product[] All
    {
        get
        {
            return new Product[] { new Product { Id = 1, Description = "Foo" } };
        }
    }
} 
```

考虑到这一点，我们只需要确保每个 EF 上下文都以附加到它的所有产品开始：

```
public class CustomerContext : DbContext
{
    public CustomerContext()
    {
        // Attach products to context
        Array.ForEach(CachedProducts.All, p => this.Products.Attach(p));
    }
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Product> Products { get; set; }
} 
```

最后，为了使示例完整且可运行，我们为数据库播种，请求客户并打印相关的产品描述：

```
public class DatabaseInitializer : CreateDatabaseIfNotExists<CustomerContext>
{
    protected override void Seed(CustomerContext context)
    {
        var p = new Product { Id = 1, Description = "Foo" };
        var c = new Customer { Id = 1, Product = p, Name = "John Doe" };

        context.Customers.Add(c);
        context.SaveChanges();
    }
}

class Program
{
    static void Main(string[] args)
    {
        Database.SetInitializer<CustomerContext>(new DatabaseInitializer());

        using (var context = new CustomerContext())
        {
            var customer = context.Customers.Single(c => c.Id == 1);

            Console.WriteLine(customer.Product.Description);
        }
    }
} 
```

如果您将探查器附加到 SQL Server，您会注意到客户是从数据库加载的，但没有执行查询来获取产品，因为它已经附加到上下文中。这适用于加载客户以及保存具有关联产品的新客户时。

*免责声明：*我不是 EF 专家，因此这种方法可能会产生一些我无法考虑的不良副作用。

# django - 什么是 Django 中的“从未来加载 url”

> ID：11205769
> 
> 赞同：20
> 
> 时间：2012-06-26T10:52:01.733
> 
> 标签：django

当我有时阅读 django 代码时，我会在一些模板中看到“从未来加载 url”。我不太确定这是什么，但我知道它与 URL 有关。应该如何以及何时使用来自未来的加载 URL？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T10:57:04.583

这是由于对1.3 中制定的[标签](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)[的更改：`url`](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)

> ## 更改为`url`和`ssi`
> 
> 大多数模板标签将允许您将常量或变量作为参数传递——例如：
> 
> ```
> {% extends "base.html" %} 
> ```
> 
> 允许您将基本模板指定为常量，但如果您有一个`templ`包含值的上下文变量`base.html`：
> 
> ```
> {% extends templ %} 
> ```
> 
> 也是合法的。
> 
> 然而，由于历史的一次偶然性，`url`又有`ssi`所不同。这些标签使用第二种无引号语法，但将参数解释为常量。这意味着不可能使用上下文变量作为 a`url`和`ssi`标记的目标。
> 
> Django 1.3 标志着纠正这一历史性事故的进程的开始。Django 1.3 添加了一个新的模板库——`future`提供了`url`和`ssi`模板标签的替代实现。该`future`库实现了使第一个参数的处理与所有其他变量的处理一致的行为。因此，现有模板包含：
> 
> ```
> {% url sample %} 
> ```
> 
> 应替换为：
> 
> ```
> {% load url from future %}
> {% url 'sample' %} 
> ```
> 
> 实现旧行为的标签已被弃用，在 Django 1.5 中，旧行为将被新行为替换。为确保与 Django 未来版本的兼容性，应修改现有模板以使用新的`future`库和语法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-01T21:58:48.807

由于以下与模板相关的显着异常，我将把它放在一个单独的答案中：

如果您`django.core.urlresolvers.NoReverseMatch`从 django 模板（Django 版本 >1.4）解析器中抛出异常，则可能只是`{% load url from future %}`模板中的使用。

在这种情况下，只需引用传递给[url-tag](https://docs.djangoproject.com/en/dev/releases/1.3/#changes-to-url-and-ssi)的 url 。那就是`{% url someurl %}`应该成为`{% url 'someurl' %}`。感谢*Ignacio VA*为我指明了这个方向。

# c# - 使用 AMO 在维度上添加 SSAS ProcessAdd

> ID：11205776
> 
> 赞同：2
> 
> 时间：2012-06-26T10:52:33.507
> 
> 标签：c#, ssas

有没有人设法让**ProcessAdd**使用 AMO 在 SSAS 维度上工作？

有几个用于处理分区的示例，但据我了解，对于一个维度，我必须声明一个外联数据源视图。

我的维度只有一个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T11:08:16.750

尝试更改 DSV 以使用针对表的视图（只需 'SELECT * FROM Table'），然后根据您的需要配置以下代码（但是您识别新行，成为 WHERE 子句）：

```
QueryBinding queryBinding = (QueryBinding)dimension.Source;
queryBinding.QueryDefinition += " WHERE (AuditKey = " + AuditKey + ")";                    
dimension.Process(ProcessType.ProcessAdd, queryBinding); 
```

请注意，我没有尝试过，我对分区进行了 ProcessAdd，但没有尝试过使用维度，但从 MS AMO 函数定义来看，这应该可以工作。

# java - Java和iText中的PDF页面编号

> ID：11205777
> 
> 赞同：3
> 
> 时间：2012-06-26T10:52:37.907
> 
> 标签：java, pdf, itext, page-numbering

我正在使用 Java 中的 iText 创建一些 PDF 报告。根据要求，我应该按照**page_number/page_numbers_in_total**的格式对页面进行编号。

但是，内存操作给我的项目带来了负担。因此，我不想为了给它们编号而再次浏览所有页面。有什么方法可以实现吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T11:20:31.977

看看[这个例子](https://itextpdf.com/en/resources/examples/itext-7/pdfhtml-header-and-footer-example)，它设置了一个类似的标题（*“Page X of Y”*）：

您会看到该`onEndPage`方法打印了*“Page X of”*，并且该`onCloseDocument`方法通过 PdfTemplate 在所有页面上设置了*“Y” 。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-21T12:14:52.463

标记为正确的答案对我有用。我刚刚花了很多时间重构代码（字体大小、位置）并使其适用于所有现有的 PDF。

请注意，页面的编号在页面的右下角，一些可选文本在左下角。

下面是为此目的使用前面的注释创建的 PageNumeration 类的代码。

```
package demo;

import com.itextpdf.text.BaseColor;
import com.itextpdf.text.Document;
import com.itextpdf.text.DocumentException;
import com.itextpdf.text.Element;
import com.itextpdf.text.ExceptionConverter;
import com.itextpdf.text.Font;
import com.itextpdf.text.Image;
import com.itextpdf.text.Phrase;
import com.itextpdf.text.Rectangle;
import com.itextpdf.text.pdf.BaseFont;
import com.itextpdf.text.pdf.ColumnText;
import com.itextpdf.text.pdf.PdfPCell;
import com.itextpdf.text.pdf.PdfPTable;
import com.itextpdf.text.pdf.PdfPageEventHelper;
import com.itextpdf.text.pdf.PdfTemplate;
import com.itextpdf.text.pdf.PdfWriter;

class PageNumeration extends PdfPageEventHelper {
/** The template with the total number of pages. */
PdfTemplate total;

private Font normal, normalSmall;
private Company company;

public PageNumeration (){
    try{
        this.normal = new Font(BaseFont.createFont(FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED), 8);
        this.normalSmall = new Font(BaseFont.createFont(FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED), 6);
    }
    catch (Exception e) {
        e.printStackTrace();
    }
}

/**
 * Creates the PdfTemplate that will hold the total number of pages.
 * @see com.itextpdf.text.pdf.PdfPageEventHelper#onOpenDocument(
 *      com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)
 */
public void onOpenDocument(PdfWriter writer, Document document) {
    total = writer.getDirectContent().createTemplate(30, 12);
}

/**
 * Adds a header to every page
 * @see com.itextpdf.text.pdf.PdfPageEventHelper#onEndPage(
 *      com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)
 */
public void onEndPage(PdfWriter writer, Document document) {
    PdfPTable table = new PdfPTable(3);
    try {
        table.setWidths(new int[]{24, 24, 2});
        table.getDefaultCell().setFixedHeight(10);
        table.getDefaultCell().setBorder(Rectangle.TOP);
        PdfPCell cell = new PdfPCell();
        cell.setBorder (0);
        cell.setBorderWidthTop (1);
        cell.setHorizontalAlignment(Element.ALIGN_LEFT);
        cell.setPhrase(new Phrase("some text", normalSmall));
        table.addCell(cell);

        cell = new PdfPCell();
        cell.setBorder (0);
        cell.setBorderWidthTop (1);
        cell.setHorizontalAlignment(Element.ALIGN_RIGHT);
        cell.setPhrase(new Phrase(String.format("Page %d of", writer.getPageNumber()), normal));
        table.addCell(cell);

        cell = new PdfPCell(Image.getInstance(total));
        cell.setBorder (0);
        cell.setBorderWidthTop (1);
        table.addCell(cell);
        table.setTotalWidth(document.getPageSize().getWidth()
                - document.leftMargin() - document.rightMargin());
        table.writeSelectedRows(0, -1, document.leftMargin(),
                document.bottomMargin() - 15, writer.getDirectContent());
    }
    catch(DocumentException de) {
        throw new ExceptionConverter(de);
    }
}

/**
 * Fills out the total number of pages before the document is closed.
 * @see com.itextpdf.text.pdf.PdfPageEventHelper#onCloseDocument(
 *      com.itextpdf.text.pdf.PdfWriter, com.itextpdf.text.Document)
 */
public void onCloseDocument(PdfWriter writer, Document document) {
    ColumnText.showTextAligned(total, Element.ALIGN_LEFT,
            new Phrase(String.valueOf(writer.getPageNumber() - 1), normal),
            2, 2, 0);
    }
} 
```

创建此类后，只需在 PDF 类中实例化它，并将事件设置在编写器定义的下方。

```
writer = PdfWriter.getInstance(document, new  FileOutputStream("somepath/somedir/file.pdf"));
PageNumeration event = new PageNumeration(this.company);
writer.setPageEvent(event); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T14:27:27.493

你可以用@page样式表处理页码像这样@page { @top-right { content: "Page " counter(page) " of " counter(pages); } }

当您需要页码/总页数时，请尝试以下操作： counter(page) "/" counter(pages)

# javascript - 为 Google 地图信息框创建自定义关闭按钮

> ID：11205780
> 
> 赞同：1
> 
> 时间：2012-06-26T10:52:56.097
> 
> 标签：javascript, jquery, google-maps-api-3

我想为我的信息框窗口创建一个自定义关闭按钮，**而不**使用内置功能（我有一个不需要关闭按钮的信息框，这就是我需要这个解决方法的原因）。

通常我会做这样的事情来关闭一个标记：

```
google.maps.event.addListener(map, 'click', function(){
    aMarker.close(map, marker);
}); 
```

但是对 InfoBox 中的元素做类似的事情是行不通的，就像这样：

```
var closeInfoBox = document.getElementById("close-button");
google.maps.event.addListener(closeInfoBox, 'click', function(){
    aMarker.close(map, marker);
}); 
```

有没有办法使用 InfoBox 本身中的元素来关闭 InfoBox？

编辑：似乎无法从 InfoBox 中调用任何事件处理程序。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:11:08.023

尝试使用 addDomListener 而不是 addListener。前任：

```
 var closeInfoBox = document.getElementById("close-button");
 google.maps.event.addDomListener(closeInfoBox, 'click', function(){
     aMarker.close(map, marker);
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T11:29:06.647

好的，这是一个很老的问题，但由于它在搜索引擎中很流行，我会尝试回答。

如果要隐藏 InfoBox 标准关闭按钮，只需添加此样式表：

```
.infoBox > img { display: none; } 
```

然后创建一些侦听器以将您当前的 InfoBox 识别为提到的@ManseUk 并调用`close`方法。

# javascript - 这是 JavaScript / JQuery 中的范围问题吗？

> ID：11205783
> 
> 赞同：3
> 
> 时间：2012-06-26T10:53:04.973
> 
> 标签：javascript, jquery

> **可能重复：**
> [是否可以在它之外使用 ajax 响应？](https://stackoverflow.com/questions/10652887/is-it-posible-to-use-ajax-respone-outside-of-it)

我创建了以下 JavaScript 例程，该例程转到 WCF oData 服务并获取一些数据。在成功元素中，我将结果放入结果变量并提醒他们 - 我看到有返回的对象。当我在 ajax 调用之外并在返回结果之前运行第二个警报时，结果变量是“未定义的”。

谁能告诉我哪里出错了？

```
function retrieveJsonpODataSet(baseUrl, query)
{
  var oDataUrl = baseUrl + "?$format=json&$callback=?";
  var results;

  $.ajax(
  {
    url: oDataUrl,
    contentType: 'application/json; charset=utf-8',
    type: 'GET',
    dataType: 'jsonp',
    async: false,
    success: 
      function (data, textStatus, xhr) 
      {
          results = data.d;
          alert(results);  // This shows the results
      },
    error: 
      function (xhr, textStatus, errorThrown) 
      { 
          alert("Query failed.\n\n" + oDataUrl + "\n\n" + errorThrown);
          results = null;
      }
  });
  alert(results);  // This shows "undefined"
  return results;
} 
```

请忽略查询参数 - 我还没有完成例程。

*编辑*

最初我`async:false`在ajax调用中没有。我现在已经添加了，但它不能解决问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T10:59:43.017

`ajax`调用是异步操作。它会触发，并且您的代码不会停止。所以`results`返回的是未定义的。您需要做的是将回调传递给函数。

```
function retrieveJsonpODataSet(baseUrl, query, callback) {
   /* some code */
   $.ajax({
       /* some settings */
       success: function(res) {
           /* some code */
           callback(results);
       }
   });
} 
```

现在你像这样使用它

```
retrieveJsonpODataSet(baseUrl, query, function(res) {
    /* Hurray, I have result now in res variable! */
}); 
```

**不要使用`async: false`选项**！它会阻止**所有**脚本，直到调用完成......如果它根本没有完成怎么办？你将永远被封锁。

**编辑**

我错过了请求是 JSONP。在那种情况下`async: false`甚至不起作用（它不适用于跨域请求和 JSONP）。所以无论如何你都必须使用回调。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T10:57:10.397

*理查德的同胞！*

这不是范围问题，而更多的是执行问题。`success`和选项都是`error`事件处理程序，并且异步运行（因此称为 AJAX）。这实质上意味着`alert(results)`and可以并且很可能会在or事件被触发`return results`之前被执行。`success``error`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T10:56:28.870

您的 ajax 是异步的，因此警报会在 ajax 完成之前执行。您需要将 ajax 调用异步属性设置为 false，以便脚本停止执行，直到发出并处理 ajax 请求。

但是，jQuery 文档说：

async 默认值：true 默认情况下，所有请求都是异步发送的（即默认设置为 true）。如果您需要同步请求，请将此选项设置为 false。跨域请求和 dataType: "jsonp" 请求不支持同步操作。请注意，同步请求可能会暂时锁定浏览器，从而在请求处于活动状态时禁用任何操作。**从 jQuery 1.8 开始，不推荐使用 async: false 。**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T10:58:21.760

发送 AJAX 请求，脚本无需等待响应，这就是 Dave Newton 的意思`A-synchronus`，将警报放在成功回调函数中，您将看到实际响应是什么。

或者，您可以指定`async`属性并将其设置为`false`，以强制您的脚本在继续之前等待响应。

# javascript - three.js - 使用投影仪和射线来选择一个顶点

> ID：11205784
> 
> 赞同：2
> 
> 时间：2012-06-26T10:53:15.707
> 
> 标签：javascript, three.js

我的总体目标是能够加载一个人体的 .obj 文件。允许用户选择两个顶点并用标志突出显示它们。然后从原始 .obj 文件中找到两个顶点的索引，并运行一个 php 脚本来测量两个顶点之间的距离。

我尝试了许多方法，但没有运气，通常是围绕选择两个顶点。我目前的方法使用了 obj 加载器，它工作得很好，但是我无法找到我使用 Projector 和 Ray 点击的顶点。它总是返回一个空数组。

到目前为止，这是我的代码，一旦 intersects 数组不为空，我就会尝试从文件中找到最近的顶点，更改对象的颜色并更改被点击的面。

```
<!doctype html>
<html lang="en">
    <head>
        <title>three.js webgl - loaders - OBJ loader</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <style>
            body {
                font-family: Monospace;
                background-color: white;
                color: #fff;
                margin: 0px;
                overflow: hidden;
            }
            #info {
                color: #fff;
                position: absolute;
                top: 10px;
                width: 100%;
                text-align: center;
                z-index: 100;
                display:block;
            }
            #info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }
        </style>
    </head>

<body>
    <script src="javascripts/Three.js"></script>
    <script src="javascripts/OBJLoader.js"></script>

    <script>

        var container, stats;

        var camera, scene, renderer, model;

        var mouseX = 0, mouseY = 0;

        var windowHalfX = window.innerWidth / 2;
        var windowHalfY = window.innerHeight / 2;

        init();
        animate();

        function init() {

            container = document.createElement( 'div' );
            document.body.appendChild( container );

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 2000 );
            camera.position.z = 1;
            scene.add( camera );
            camera.position.y = -4;

            var ambient = new THREE.AmbientLight( 0x101030 );
            scene.add( ambient );

            var directionalLight = new THREE.DirectionalLight( 0xffeedd );
            directionalLight.position.set( 0, 0, 1 ).normalize();
            scene.add( directionalLight );

            var loader = new THREE.OBJLoader();
            loader.load( "img/originalMeanModel.obj", function ( object ) {
                model = object;
                scene.add( model );
            } );

            // RENDERER
            renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );
            container.appendChild( renderer.domElement );

            document.addEventListener( 'mousemove', onDocumentMouseMove, false );
            document.addEventListener( 'mousedown', onDocumentMouseDown, false );

        }

        function onDocumentMouseDown( event ){

            console.log('Morphable-body-obj: Width '+ window.innerWidth ) ;
            console.log('Morphable-body-obj: Height '+ window.innerHeight) ;

            var vector = new THREE.Vector3 ((event.clientX / window.innerWidth) * 2 - 1, -(event.clientY / window.innerHeight)*2+1, 0.5);
            var projector = new THREE.Projector();
            projector.unprojectVector(vector, camera);
            var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());
            var intersects = ray.intersectObject(scene);
            console.log(intersects);
            if (intersects.length > 0)
              {
                var xhr = new XMLHttpRequest();
                xhr.open('GET', '/img/originalMeanModel.obj', false);
                xhr.send(null);
                var text = xhr.responseText;
                var origText = text; 
                var lines = text.split("\n");
                for (i=0; i<6449; i++){
                  lines[i] = lines[i].split(" ");
                }
                var low = Math.sqrt(
                      (Math.pow((intersects[0].point.x - parseFloat(lines[0][1])), 2))+
                      (Math.pow((intersects[0].point.y - parseFloat(lines[0][2])), 2))+
                      (Math.pow((intersects[0].point.z - parseFloat(lines[0][3])), 2))
                    );

                var c = 0;
                for(i=1; i<6449; i++){
                  var temp = Math.sqrt(
                      (Math.pow((intersects[0].point.x - parseFloat(lines[i][1])), 2))+
                      (Math.pow((intersects[0].point.y - parseFloat(lines[i][2])), 2))+
                      (Math.pow((intersects[0].point.z - parseFloat(lines[i][3])), 2))
                  );
                  if(temp < low){
                    low = temp;
                    c=i;
                  }
                }

                console.log(
                  'Mouse coordinates:' + '\nx = ' + intersects[0].point.x + '\ny = ' + intersects[0].point.y + '\nz = ' + intersects[0].point.z +'\n'+
                  'Nearest Vertex' + '\nx= ' + lines[c][1] + '\ny= ' + lines[c][2] + '\nz =' + lines[c][3] + "\n" +
                  'Difference' + '\nx= ' + (intersects[0].point.x - lines[c][1]) + '\ny= ' + (intersects[0].point.y - lines[c][2]) + '\nz= ' + (intersects[0].point.z - lines[c][3]) 
                );

                intersects[0].object.materials[0].color = new THREE.Color( Math.random() * 0xffffff );

                intersects[0].face.color = new THREE.Color(0xffffff);
                intersects[0].object.geometry.colorsNeedUpdate = true;
                intersects[0].object.geometry.dynamic = true;
               }
            else{
                alert('error');
            }
        }

        function onDocumentMouseMove( event ) {
            mouseX = ( event.clientX - windowHalfX ) / 2;
            mouseY = ( event.clientY - windowHalfY ) / 2;
        }

        function animate() {
            requestAnimationFrame( animate );
            render();
        }

        function render() {
            camera.lookAt( scene.position );
            renderer.render( scene, camera );
        }

    </script>

</body> 
```

有问题的 .obj 文件可以在这里找到[https://dl.dropbox.com/u/23384412/originalMeanModel.obj](https://dl.dropbox.com/u/23384412/originalMeanModel.obj)

如果有人能指出我正确的方向，那将不胜感激。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T13:28:06.227

为了解决这个问题，我使用此代码从 obj 加载器返回的对象创建了一个网格

```
 var loader = new THREE.OBJLoader();
            loader.load( "img/originalMeanModel.obj", function ( object ) {

              object.children[0].geometry.computeFaceNormals();
              var  geometry = object.children[0].geometry;
                      console.log(geometry);
              THREE.GeometryUtils.center(geometry);
              var material = new THREE.MeshLambertMaterial({color: 0xffffff, shading: THREE.FlatShading, vertexColors: THREE.VertexColors });
              mesh = new THREE.Mesh(geometry, material);
              model = mesh;
              // model = object;
               scene.add( model );
            } ); 
```

然后在执行 intersectObject 时，我在模型而不是场景上执行了

```
var intersects = ray.intersectObject(model); 
```

# java - 工作场所与字符串相关的编程问题

> ID：11205791
> 
> 赞同：1
> 
> 时间：2012-06-26T10:53:56.983
> 
> 标签：java

我有一个基于分隔符`"`（双引号）搜索的字符串。

因此，当我输入字符串时`"program"`，它能够根据分隔符搜索字符串的开头和结尾，并返回我放入向量中的字符串程序。

现在，如果我输入一个字符串`"program"123""`，它会返回我的子字符串，如`program`, `123`, `123"`。

现在我想要的结果`program"123"`是根据用例它是一个有效的字符串，但它包含`"`作为字符串的一部分，这是通过分隔符搜索无法区分字符串的开头和结尾的地方。

有人可以帮助一些逻辑吗？

以下是我正在使用的方法。

```
enter code here 
```

public static PVector tokenizeInput(final String sCmd) throws ExceptionOpenQuotedString { if (sCmd == null) { return null; }

```
 PVector rc = new PVector();

    if (sCmd.length() == 0)
    {
        rc.add(StringTable.STRING_EMPTY);
        return rc;
    }

    char chCurrent = '\0';
    boolean bInWhitespace = true;
    boolean bInQuotedToken = false;
    boolean bDelim;
    int start = 0;
    int nLength = sCmd.length();

    for (int i = 0; i < nLength; i++)
    {
        chCurrent = sCmd.charAt(i); // "abcd "ef"" rtns abdc ef ef"
        bDelim = -1 != APIParseConstants.CMD_LINE_DELIMS.indexOf(chCurrent);

        if (bInWhitespace) // true
        {
            // In whitespace
            if (bDelim)
            {
                if ('\"' == chCurrent)
                {
                    start = i + 1;
                    bInQuotedToken = true;
                    bInWhitespace = false;
                } // if ('\"' == chCurrent)
            }
            else
            {
                start = i;
                bInWhitespace = false;
            } // else - if (bDelim)
        }
        else
        {
            // Not in whitespace
            boolean bAtEnd = i + 1 == nLength;
            if (!bDelim)
            {
                continue;
            }
            else
            {
                if ('\"' == chCurrent)
                {
                    if (!bInQuotedToken)
                    {
                        // ending current token due to '"'
                        if (bAtEnd)
                        {
                            // non terminated quoted string at end...
                            throw new ExceptionOpenQuotedString(
                                    sCmd.substring(start));
                        }
                        else
                        {
                            rc.add(sCmd.substring(start, i)); // include quote
                            bInQuotedToken = true;
                            bInWhitespace = false;
                        } // if (bAtEnd)
                    }
                    else
                    {
                        // ending quoted string
                        //if (!bAtEnd)
                        {
                            rc.add(sCmd.substring(start, i)); // don't include quote
                            bInQuotedToken = false;
                            bInWhitespace = true;
                        } // if (bAtEnd)
                    } // else - if (!bInQuotedToken)
                }
                else
                {
                    // got delim (not '"')
                    if (!bAtEnd && !bInQuotedToken)
                    {
                        rc.add(sCmd.substring(start, i));
                        bInWhitespace = true;
                    } // if (bAtEnd)
                } // else - if ('\"' == chCurrent)
            } // else - if (!bDelim)
        } // else - if (bInWhitespace)
    } // for (short i = 0; i < nLength; i++)

    if (!bInWhitespace && start < nLength)
    {
        if (!bInQuotedToken || chCurrent == '"')
        {
            rc.add(sCmd.substring(start));
        }
        else
        {
            throw new ExceptionOpenQuotedString(sCmd.substring(start));
        } // else - if (!bInQuotedToken)
    } // if (!bInWhitespace && start < nLength)
    return rc;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T10:58:55.967

您应该转义内部 "。否则，您可以检查第一个和最后一个 " 字符的位置，并使用这些位置作为分隔符拆分/剪切字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:14:09.033

每当您将一种编码（所有可能的字符串）嵌入到另一种（带引号的字符串）中时，只有一些基本技术可以让您明确地解析它们：

1.  禁止某些输入。例如，不允许使用引号字符。现在您知道它们始终是分隔符。在您的情况下，您可以选择除引号之外的新分隔符，并在您的输入中禁止该分隔符。这很少是可取的，因为您通常最终想要允许您以前认为不需要的输入。

2.  在编码中包含输入的长度。例如，您可以在每个字符串之前加上其中的字符数，而不是引号。

3.  逃跑。有些输入不能直接表示。相反，至少保留一个字符作为转义字符。它表明它后面的任何内容都应该以不同的方式解释。在 Java 字符串中，反斜杠是转义字符。如果您仅出于单一原因需要转义字符，则可能需要遵循某些 SQL 方言的示例并将其加倍。在 SQL 中，引号是字符串的引号字符，因此要在字符串中包含文字引号字符，您需要键入两个引号。

# javascript - 使用 JS 从 Spotify 中以 JSON 格式提取播放列表

> ID：11205806
> 
> 赞同：0
> 
> 时间：2012-06-26T10:55:09.713
> 
> 标签：javascript, api, spotify

是否可以使用 JS 从 Spotify 中提取特定的播放列表并以 JSON/XML 格式返回播放列表？

我查看了 Spotify 开发者门户，但似乎他们所拥有的只是小部件。

是否可以通过 Echonest 或其他服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-16T10:31:16.717

未来更新：有一个网络 API 可以做到这一点：[https ://beta.developer.spotify.com/documentation/web-api/reference/playlists/get-playlist/](https://beta.developer.spotify.com/documentation/web-api/reference/playlists/get-playlist/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-26T11:06:38.723

没有 Web API 可以做到这一点。如果您在 Spotify 应用程序或本机 libSpotify 应用程序中运行，您可以获得播放列表详细信息，然后自己将其转换为 JSON。

# css - 图像放置问题

> ID：11205808
> 
> 赞同：1
> 
> 时间：2012-06-26T10:55:13.823
> 
> 标签：css, image

我正在寻找在两个边界之间移动锯的图​​像，所以它看起来像[这样](http://s1200.photobucket.com/albums/bb328/tobeeornot/?action=view&current=saw-screenshot.png)。

我相信我已经正确地将图像居中，但似乎我没有，如果这不是正确的方式，我讨厌使用填充，因为我希望这对于响应式设计来说尽可能具有语义。我还需要将它放置在两个边界内，一个边界堆叠在前面。大概我需要使用 z-index 来做到这一点，但我还没有那么远。

[提琴手](http://jsfiddle.net/tobeeornot/RJVXE/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:10:21.967

嗨玩定位并尝试根据您推荐的图像要求制作结果。我希望这能帮到您。

**CSS**

```
 #logo-container .saw {
        left: 50%;
        margin: 0 auto;
        position: relative;
        top: 46px;
    }
#tag-container {
    border: 2px solid #00AC9D;
    height: 150px;
    margin-bottom: 5px;
    position: relative;
    width: 1140px;
} 
```

看演示：- [http://jsfiddle.net/RJVXE/16/](http://jsfiddle.net/RJVXE/16/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:10:34.457

您是否正在寻找这样的东西：

**见演示：http:** [//jsfiddle.net/rathoreahsan/Fcn96/](http://jsfiddle.net/rathoreahsan/Fcn96/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:06:01.660

您需要同时使用 z-index 和定位。

```
.line
{
    height:1px;
    width:100%;
    background:#000;
    position:absolute;
    left:0px;
}
.item1
{
    top:5px; 
    z-index:5;
}
.item3
{
    top:25px; 
    z-index:15;
}

<div style="width:100%; position:relative">
    <div class="line item1"></div>
    <div style="position:absolute; top:0px;left:50px;z-index:10">
          <img src="saw.png" />
    </div>
    <div class="line item3"></div>
</div> 
```

（示例同时使用内联和阻塞的 CSS 引用只是为了简洁。远离内联 CSS）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:10:07.567

您可以尝试 AlphaMale 在这里的建议：[如何在 div 中水平和垂直居中图像](https://stackoverflow.com/questions/10296015/how-to-center-div-horizontally-and-vertically)

在您的图像之前包含一个“跨度”标签。然后将此属性添加到“锯”类：

```
#logo-container .saw {
    text-align: center;
    margin-bottom:-50px!important;
} 
```

!important 是覆盖实际拥有的 margin: 0 auto 。

[http://jsfiddle.net/2EKWS/1/](http://jsfiddle.net/2EKWS/1/)

# visual-studio-2010 - 是否可以在 Visual Studio 2010 中编辑报告？

> ID：11205810
> 
> 赞同：0
> 
> 时间：2012-06-26T10:55:20.877
> 
> 标签：visual-studio-2010, report, scrum

我想编辑使用 Visual Studio 2010s scrum 模板生成的速度报告。我该如何编辑它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T13:44:21.673

你也可以参考这个[链接。](https://stackoverflow.com/questions/7307361/tfs-2010-scrum-1-0-template-i-want-to-add-more-reports). 您也可以尝试将报告导入 SSRS 环境并尝试在那里进行更改。

您还可以考虑基于此[链接](http://msdn.microsoft.com/en-us/library/ff730838.aspx)自定义您需要的报告。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:02:18.207

我找到了解决我自己问题的方法。我有兴趣更改为 Scrum 模板报告显示的结果。

1.  在“项目门户”中打开报告（右键单击 Visual Studio 中的团队项目并选择“显示项目门户”。
2.  单击报告，例如速度。
3.  单击顶部的“属性”选项卡。
4.  单击左侧的“参数”选项卡。一些参数在这里是可编辑的，例如在我的例子中是“DoneName”。我将其更改为“已提交”而不是“完成”，以便我可以看到标记为已提交的项目。通过选择“提示用户”复选框，可以从浏览器 ui 中编辑此参数。

# java - 为 ContextMenu 应用自定义标题

> ID：11205812
> 
> 赞同：0
> 
> 时间：2012-06-26T10:55:21.297
> 
> 标签：java, android, android-layout, contextmenu

我正在尝试将自定义标头应用于`ContextMenu`. `ListView`这是代码。

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenu.ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    View header = View.inflate(getSherlockActivity(),
            R.id.context_menu_header, (ViewGroup) v);
    TextView title = (TextView) header
            .findViewById(R.id.context_menu_title);
    title.setText(cursor.getString(1));
    menu.setHeaderView(header);

    android.view.MenuInflater inflater = getActivity().getMenuInflater();
    inflater.inflate(R.menu.context_menu, menu);
} 
```

此代码失败并带有`Resources$NotFoundException: Resource ID #0x7f050038 type #0x12 is not valid`. 在行`View header = View.inflate(getSherlockActivity(), R.id.context_menu_header, (ViewGroup) v);`。我猜可能是因为 param `(ViewGroup) v`。我怎样才能绕过这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:00:59.940

我正在使用`R.id.context_menu_header`而不是 a`R.layout.layout_file`并且我必须为 View.inflate 方法的最后一个参数传递 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:59:33.397

我的第一个问题是您的一个 XML 文件中的错误。一些未正确定义的 ID 或其他东西。如果您发布更多代码（包括 XML 文件）将会很有帮助 :)

# php - drupal file_check_path 返回 false

> ID：11205818
> 
> 赞同：0
> 
> 时间：2012-06-26T10:55:43.673
> 
> 标签：php, file, drupal-6, file-copying

我正在处理drupal中的文件。我将本地 wamp 服务器与 drupal6 一起使用。
我的drupal 路径是`localhost/drupal6`。我在这个路径中有一个文件`<drupal root >\files\images\111.jpg`。

`$image='/drupal6/files/images/111.jpg'`;

我想将此文件复制（或移动）到此路径中的另一个子文件夹，但在 php`copy($image,'anotherdestination')`或`drupal_copy($image,'anotherdestination',FILE_EXISTS_RENAME)`.

当我使用`var_dump(file_check_path($image));`它时，我返回***false***。`files`and文件夹对`iamges`Windows 中的任何用户都具有所有权限。哪里有问题？

***注意：***我在带有路径的自定义模块中的函数中编写了所有这些代码`sites/all/module/mymodule/mymodule.module`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:29:45.567

通过 HTTP 和通过文件系统访问文件的方式有所不同。Over web`/drupal6/files/images/111.jpg`非常好，因为它会被评估为`http://example.com/drupal6/files/images/111.jpg`. `drupal6`但我敢打赌，您的文件系统的根目录中没有目录。

你可能想要这样的东西。

```
copy('c:\drupal6\files\images\111.jpg', 'c:\drupal6\files\other_images\111.jpg'); 
```

我不完全确定 Windows 中的路径，但我认为这应该是正确的。

# python - 让 RabbitMQ 和 Graphite 连接起来

> ID：11205820
> 
> 赞同：0
> 
> 时间：2012-06-26T10:55:55.313
> 
> 标签：python, django, rabbitmq, graphite

我正在尝试使用[https://github.com/somic/graphite-rabbitmq](https://github.com/somic/graphite-rabbitmq)将 RabbitMQ 连接到 Graphite(0.9.9) 但是，我不完全确定应该放置 Graphite 中的哪个目录 Graphite-rabbitmq 文件。

当我跑步时，`carbon-agent-rabbitm1.py`我得到

```
Failed to import the graphite package. Please verify that this package
was properly installed and that your PYTHONPATH environment variable
includes the directory in which it is installed.

For example, you may need to run the following command:

export PYTHONPATH="/home/myusername/lib/python/:$PYTHONPATH" 
```

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T11:14:34.917

除非您有使用该 github 存储库中的脚本的特定原因，否则我不会，因为它们似乎已经有 3 年历史了，并且石墨现在通过 Twisted Python AMQP 库 (txamqp) 支持 RabbitMQ，它使这些脚本完全没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:22:20.437

与 python 模块的约定，您可以将下载的文件放在任意临时目录中，cd 进入该目录，然后运行：

```
python setup.py install 
```

标准`distutils`包将确保一切都到达正确的位置。

您可能还想下载[pip](http://pypi.python.org/pypi/pip/)它将为您管理下载和安装这些软件包的过程，在这种情况下，您只需键入：

```
pip install graphite-web 
```

但除此之外，你真的可以把文件放在任何地方，只要你将目录添加到一个名为 PYTHONPATH 的环境变量中，就像你引用的错误消息所说的那样。

# mysql - ConstraintViolationException 未显示约束名称 MySQL

> ID：11205825
> 
> 赞同：1
> 
> 时间：2012-06-26T10:56:21.080
> 
> 标签：mysql, spring, hibernate

我正在尝试将记录保存在具有多个唯一约束的表中。其中之一称为 UK_ESTABLISHMENT_REGISTERS_003，基于 2 列。

当用户尝试在表中输入重复值时，会引发约束冲突异常，但我无法检索约束名称以显示有意义的错误消息。根错误仅显示：键 4 的重复条目 '2-3' 我需要约束名称而不是键 4。为了获得要解析的约束名称，我需要做什么配置？代码栈如下：

任何帮助将非常感激。我正在使用休眠 3.6、mysql 服务器 5 和 spring 框架 3

`93249 [http-8101-14] ERROR org.hibernate.util.JDBCExceptionReporter - Duplicate entry '2-3' for key 4 93251 [http-8101-14] ERROR org.hibernate.event.def.AbstractFlushingEventListener - Could not synchronize database state with session org.hibernate.exception.ConstraintViolationException: Could not execute JDBC batch update at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:71) at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43) at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:253) at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:92) at org.hibernate.jdbc.AbstractBatcher.prepareStatement(AbstractBatcher.java:87) at org.hibernate.jdbc.AbstractBatcher.prepareBatchStatement(AbstractBatcher.java:222) at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2224) at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2660) at org.hibernate.action.EntityInsertAction.execute(EntityInsertAction.java:56) at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:250) at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:234) at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:141) at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298) at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27) at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000) at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338) at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:106) at bw.co.dcdmc.jddw.dao.HibernateUtil.commit(HibernateUtil.java:115) at bw.co.dcdmc.hrms.dao.EstablishmentRegistersDAO.saveOrUpdate(EstablishmentRegistersDAO.java:65) at bw.co.dcdmc.hrms.services.dwr.EstablishmentRegistersService.saveEstablishmentRegisters(EstablishmentRegistersService.java:32) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.directwebremoting.impl.CreatorModule$1.doFilter(CreatorModule.java:229) at org.directwebremoting.impl.CreatorModule.executeMethod(CreatorModule.java:241) at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:379) at org.directwebremoting.impl.DefaultRemoter.execute(DefaultRemoter.java:332) at org.directwebremoting.dwrp.BaseCallHandler.handle(BaseCallHandler.java:104) at org.directwebremoting.servlet.UrlProcessor.handle(UrlProcessor.java:120) at org.directwebremoting.servlet.DwrServlet.doPost(DwrServlet.java:141) at javax.servlet.http.HttpServlet.service(HttpServlet.java:637) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:312) at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116) at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:95) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:79) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:133) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter.doFilter(DefaultLoginPageGeneratingFilter.java:91) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:324) at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:165) at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237) at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.jasig.cas.client.session.SingleSignOutFilter.doFilter(SingleSignOutFilter.java:110) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454) at java.lang.Thread.run(Thread.java:662)`

`Caused by: java.sql.BatchUpdateException: Duplicate entry '2-3' for key 4 at com.mysql.jdbc.PreparedStatement.executeBatchSerially(PreparedStatement.java:1666) at com.mysql.jdbc.PreparedStatement.executeBatch(PreparedStatement.java:1082) at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48) at org.hibernate.jdbc.AbstractBatcher.executeBatch(AbstractBatcher.java:246)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:01:56.753

您尝试插入的表在其复合主键中已包含 (2-3)

# java - 为什么要使用 ESAPI.validator().getValidFileContent() ？什么是无效或损坏的文件？

> ID：11205826
> 
> 赞同：0
> 
> 时间：2012-06-26T10:56:24.033
> 
> 标签：java, xss, esapi

请告诉我。我正在使用 ESAPI 进行验证，转义所有这些，我有这种困惑。请分享你的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:09:11.283

我在两个企业 Web 应用程序中使用 ESAPI 验证。研究 OWASP ESAPI 站点上的文档，但是该站点非常杂乱无章、不完整，并且经常有断开的链接。

更新：请注意，当未加载 ESAPI.properties 时，org.owasp.esapi.reference.DefaultValidator 会处理 ESAPI.validator().getValidInput()。因此，由于未加载 ESAPI.properties 中的自定义正则表达式，因此您的验证结果将与预期不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T13:54:04.667

您需要使用其默认的验证器`org.owasp.esapi.reference.DefaultValidator`类进行验证。另请参阅[此 API](http://code.google.com/p/owasp-esapi-java/source/browse/trunk/src/org/owasp/esapi/reference/DefaultValidator.java?r=364&spec=svn364)

# android - 如何将一个字符串连接到另一个字符串并向其写入 onclick 操作？

> ID：11205827
> 
> 赞同：0
> 
> 时间：2012-06-26T10:56:26.270
> 
> 标签：android

我正在从 android 的数据库中获取数据。数据不过是一个字符串（str1）。现在，在获得该数据后，我想将 string2(str2) 添加到 str1。添加后，我想为该 str2 放置 onclick 操作。我可以在android中做到这一点吗？如果是这样，我怎样才能完成这项任务？请帮我完成这个任务...

真的会很感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:08:46.267

我假设您正在尝试`String`在`TextView`一个添加`onClick`操作中添加设置。这是一个例子。在您的活动中创建此方法。

```
private void setTextView(TextView t, String str1, String str2) {
    // Add str2 to str1 (append)
    StringBuilder s = new StringBuilder(str1);
    s.append(str2);

    //Set text to textview
    t.setText(s.toString());

    //set onclicklistener.
    t.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // do whatever you want here. If you want
            // to show an image make an AlertDialog.
            // I have given link below.

        }
    });
} 
```

修改 main.xml 以包含一个 TextView：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/string"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

现在在您的 Activty 的 onCreate 中添加：

```
TextView t = (TextView) findViewById(R.id.string);
setTextView( t, str1, str2 ); 
```

带有图像的警报对话框：http: [//eventuallyconsistent.net/2011/07/28/create-an-android-dialog-with-an-image/](http://eventuallyconsistent.net/2011/07/28/create-an-android-dialog-with-an-image/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:09:06.673

用 XML 编写这段代码：

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Click Me"
    android:onClick="onClick"                
    android:clickable="true" /> 
```

在你的活动中，写：

```
 TextView textActivity = (TextView)findViewById(R.id.textView1);
    String2 = String1 + "Some text";
    textActivity.setText(String2);
    textActivity.setOnClickListener(this);
    .....
    .....

    public void onClick(View v) {
        ...
      } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:09:57.653

我不确定您的问题，但我的解决方案可能会对您有所帮助。

创建一个`TextView`& 设置`str2`为`TextView`文本。

```
myView.setText(str2); 
```

现在申请`onClickListener`它。

# c# - 用于测试目的的长期操作建议

> ID：11205828
> 
> 赞同：1
> 
> 时间：2012-06-26T10:56:26.673
> 
> 标签：c#

我可以使用什么操作来模拟一个相对昂贵的过程

```
public void SimulateLongProcess()
{
   //Do Something that takes a few seconds to perform on a quadcode CPU
} 
```

我想避免任何线程等待左右，也不涉及 IO。一些数学运算可以做...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:11:14.643

不确定你到底需要什么。您可以执行以下操作，在我的机器上大约需要 2900 毫秒。这段代码不能保证准确的执行时间，不同机器的执行时间会有所不同。您可能需要根据需要对其进行调整。

```
 Stopwatch stopWatch = new Stopwatch();
        stopWatch.Start();

        for (int i = 0; i < 10000000; i++)
        {
            double test = 1000; 
            test = (test * 100000.00001)/100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;
            test = (test * 100000.00001) / 100000.123123;

        }

        stopWatch.Stop();
        var executionTime = stopWatch.ElapsedMilliseconds; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:01:08.393

作为一个非常愚蠢的事情，你可以只运行一个 for 循环

```
for (int i = 0; i < 1000000000; i++)
{
    var str = "dummy";
} 
```

`Thread.Sleep`会更精确。确保仅将其用于测试

# android - 在 Android 的 VideoView 或 MediaPlayer 上方显示半透明覆盖：

> ID：11205834
> 
> 赞同：3
> 
> 时间：2012-06-26T10:56:44.993
> 
> 标签：android, media-player, overlay, android-videoview, alpha

如何在 Android 的 VideoView 或 MediaPlayer 上方显示半透明覆盖。目前，在我的应用程序中，在 VideoView 或 MediaPlayer 上显示时忽略 alpha 值，在图像视图上显示时同样有效。

请尽快帮我解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-10-27T14:35:17.260

添加另一个布局（*在包含您的 VideoView 的布局旁边*）并为其添加透明背景。

# eclipse - 处理 SVN 和 Eclipse 的正确方法？

> ID：11205835
> 
> 赞同：1
> 
> 时间：2012-06-26T10:56:47.827
> 
> 标签：eclipse, svn, version-control, eclipse-plugin, subclipse

我在我的 SVN 上有这个文件夹： - 分支 - 标签 - 主干

我在想。例如，我应该将整个项目文件夹上传到主干，还是应该上传项目的每个文件？

在 Eclipse 上对项目文件夹进行提交要简单得多，但我不确定使用它的最佳方法是什么。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:03:48.560

我认为您想开始使用 SVN 跟踪现有项目。

第一步，我想说的是，找出哪些文件夹和文件不应该被 SVN 跟踪（通常是所有构建工件，如二进制文件、文档以及一般来说可以随意重新生成的所有内容）并通过设置忽略它们这个`svn:ignore`属性，我很确定你可以用 subclipse 来做（但我不熟悉它，所以不要引用我的话）。

完成设置忽略列表后，您可以一次性提交整个项目。基于每个文件提交绝对没有实际用途。

如果您是统计数据迷，我能想到的唯一预防措施适用：如果您要使用诸如[statsvn](http://statsvn.org/)之类的工具，那么您进行第一次提交的名称将作为更改/添加行最多的开发人员脱颖而出。因此，在这种情况下，为第一次提交使用假名可能是有意义的。

**编辑**

**存储库结构**

SVN 用户通常倾向于拥有一个包含每个项目的大型 repo；不过，这很少是正确的做法。

YMMV，但坚持按项目存储库规则通常要好得多。如果您将来选择这样做的话，它还有一个额外的好处，那就是使向 git 或 Mercurial 等 DVCS 的过渡更加直接。

所以，为了回答你的评论，如果可能的话，我不会费心`MyProject`在树干下创建。只需将其所有内容直接放入行李箱即可。

# mysql - 通过 JDBC 使用 View-over-View DDL 的“用户拒绝任何命令”

> ID：11205843
> 
> 赞同：7
> 
> 时间：2012-06-26T10:57:11.857
> 
> 标签：mysql, jdbc, view

我在这里遇到了一个很奇怪的问题。我们使用 Pentaho Kettle 来管理我们数据库的模式（它又使用 MySQL JDBC mysql-connector-java-5.1.17.jar）。当尝试创建一个包含另一个视图（在本例中为接口）的视图时，我们得到：

```
2012/06/26 11:46:55 - SQL2 - ERROR : Couldn't execute SQL: CREATE OR REPLACE VIEW `test_delete2` as select  * from interfaces
2012/06/26 11:46:55 - SQL2 - ERROR : ANY command denied to user 'ncim'@'xxx.xxx.xxx..xx' for table '/var/mysql/mysql2018/tmp/#sql_4e67_0' 
```

但是，使用相同的语句和用户，但通过 mysql 命令行客户端，可以按预期工作。此外，使用 JDBC 在普通表上创建视图也可以。

这是服务器端 Solaris 10 上的 MariaDB 5.2.10，但我们也遇到了与 Oracle MySQL 相同的问题。

有什么好主意可能导致这种情况吗？

PS：我知道在视图上创建视图并不是最好的主意，但暂时假设在这种情况下无法避免。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-08-23T15:27:19.547

我发现在创建视图之前发布`use database` [声明](https://www.mysqltutorial.org/mysql-select-database/)解决了我的问题。这似乎与 MySql 错误报告[Bug #91122](https://bugs.mysql.com/bug.php?id=91122) “无法创建包含来自子查询的视图（未选择数据库）”有关

基本上，如果您尝试使用`dbname.view_name`语法创建视图，则可能会出现错误。但是，如果您`use database`事先发出声明，那么一切都很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-02T19:58:25.677

我在这里遇到了一个非常相似的问题。鉴于您已经检查了您的授权，请在创建视图之前尝试显式设置正在使用的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-12-12T12:21:56.100

我的问题是由于创建了 VIEW，其中一些列来自另一个数据库，而目标实例中缺少该数据库。似乎如果您没有正确的权限，也会出现这个“有意义的”错误“ANY command denied to user ....”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-04T01:59:44.653

不幸的是，我们从未找到解决方案，因此我们只是采用了调用在 mysql 客户端中执行的外部 sql 脚本的解决方法。

不确定在当前的 Mysql 中是否仍然是一个问题，同时我们迁移到了不同​​的数据库，而且我什至不再在这个团队工作了。

在这里仅提及这一点，因为它似乎仍然是一个经常被查看的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-24T17:44:41.747

`use database`正如史蒂夫麦克所回答的那样，在创建视图之前进行查询绝对具有魅力。我被困在这几个星期了！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T18:19:11.950

我认为您的 GRANT 权限存在缺陷。

当使用 JDBC 远程访问数据库时，您还需要为用户机器创建授予权限。

你有如下的 GRANT 吗？如果不尝试授予如下：

```
grant all on <database>.* to ‘&lt; username >’@'%' identified by '< passwd >'; 
```

# python - python中不区分大小写的字符串替换

> ID：11205844
> 
> 赞同：1
> 
> 时间：2012-06-26T10:57:19.963
> 
> 标签：python, regex

我可以在不区分大小写的方法中使用以下解决方案替换字符串内容中的单词

```
http://code.activestate.com/recipes/552726/ 
import re

class str_cir(str):
        ''' A string with a built-in case-insensitive replacement method '''

        def ireplace(self,old,new,count=0):
        ''' Behaves like S.replace(), but does so in a case-insensitive
        fashion. '''
            pattern = re.compile(re.escape(old),re.I)
            return re.sub(pattern,new,self,count) 
```

我的问题是我需要完全替换我提供的单词

```
para = "Train toy tram dog cat cow plane TOY  Joy   JoyTOY" 
```

我需要用“ham”替换“toy”这个词，我得到了

```
'Train HAM tram dog cat cow plane HAM  Joy   JoyHAM' 
```

我需要的是

```
'Train HAM tram dog cat cow plane HAM  Joy   JoyTOY' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:01:25.813

添加`\b`到关键字的开头和结尾：

```
pattern = re.compile("\\b" + re.escape(old) + "\\b",re.I) 
```

`\b`表示单词边界，它匹配单词开头和结尾的空字符串（由字母数字或下划线字符的序列定义）。（[参考](http://docs.python.org/library/re.html)）

正如@Tim Pietzcker 指出的那样，如果关键字中有非单词（不是字母数字和非下划线）字符，它就不会像您想象的那样起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:00:11.103

放在`\b`正则表达式的开头和结尾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T11:00:20.163

用单词边界 ( ) 将您在正则表达式中使用的单词包裹起来`\b`。

# android - 在 Activity 中检测 PopupWindow 的关闭

> ID：11205845
> 
> 赞同：1
> 
> 时间：2012-06-26T10:57:22.177
> 
> 标签：android, android-activity, popupwindow

我有一个 Activity，我从中调用 PopupWindow。我的问题是这个 Activity 如何知道 PopupWindow 已经关闭并且它（Activity）需要刷新自己？onResume 似乎不起作用。它适用于 Intent，但不适用于 PopupWindow。我在这里错过了显而易见的事情吗？TIA。

-sph

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:06:26.890

您可以在中实现活动的刷新逻辑

> [PopupWindow.OnDismissListener](http://developer.android.com/reference/android/widget/PopupWindow.OnDismissListener.html)

# git - Git 复杂合并（从 svn 迁移后）

> ID：11205846
> 
> 赞同：1
> 
> 时间：2012-06-26T10:57:22.437
> 
> 标签：git, merge, migration

几天后，我必须进行一个复杂的提交，我将尝试详细解释：

我们正在使用 GIT（从 svn 迁移后）并有 3 个工作分支：

*   **主干**- 用于即时更改/修复、开发者游乐场等的分支
*   **preproduction** - 分支，用于客户端测试的所有功能都在这里
*   **生产**- 名称说明了一切，产品的工作分支

所以通常开发人员会按照这样的顺序进行：

新票 -> 本地副本 -> 主干 -> 预生产 -> 生产

很标准，我猜。

现在，对于问题本身：在后备箱中，我们完成了一项艰巨的任务（1000 多个小时），这是在从 svn 迁移之前存在的，所以它不是 git-branched 或类似的东西，它只是一堆提交。我们需要将该任务合并到预生产中，然后相应地进行生产分支。

我不太确定什么是最无痛的方法。我什至不确定分支在迁移后是否有共同的祖先提交。

有没有可以解决问题的通用方法？也许我可以将与此任务相关的提交分组到分支中，然后将此分支与 pre 和 production 合并？

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:16:04.727

如果您需要祖先提交（IMO 总是一个好主意），您可以使用 SVN 找到主干和预生产/生产最后相同的实际分歧点，然后在 git 中的预生产分支上找到相应提交的 SHA1 和做这个：

```
git checkout -b temp trunk // Don't use trunk itself in case it breaks
git rebase <SHA1 goes here> // Rewrite the commits as changes from that SHA1
// Possibly fix some conflicts
// Verify manually that you have the code you expect
git branch -m trunk old_trunk // Move old trunk aside
git branch -m temp trunk // Here's the new trunk! 
```

这将使您的主干分支从预生产中分离出来。您可以重复，以便预生产也脱离生产。

为了干净地合并它们，请打开 git [rerere](http://git-scm.com/2010/03/08/rerere.html)（以便在将预生产合并到生产时记录并自动重用解决任何冲突的方式），然后执行以下操作：

```
git checkout preproduction
git merge --no-ff trunk 
```

这将进行合并提交（非快进），因此您可以看到功能开始和停止的位置，而不是一长串提交。它还将保留主干分支，因此您可以继续提交它以准备合并下一个功能。

我们用来管理这个过程的模型是[git-flow](http://nvie.com/posts/a-successful-git-branching-model/)，这听起来很像你描述的工作流，所以我建议检查一下，以及支持它的[命令行工具。](https://github.com/nvie/gitflow)

此外，如果您希望对提交进行分组，我会探索使用 rebase 将它们从主干流中取出并将它们作为非快进合并放回，这样您就可以看到特定功能的开始和结束位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:04:19.887

我倾向于分支生产，然后与这个新分支合并。然后可以解决任何问题，最后这个分支将成为一个新的预生产，然后可能最终合并回生产，或者根据历史，成为生产 2\. [http://www 上有一系列 Git 教程。 ava.co.uk/git](http://www.ava.co.uk/git)和一个关于合并的。它们可能是你已经知道的东西，在这种情况下我表示歉意，或者它们可能足够清楚，让你对你选择的方法充满信心。高温高压

# c# - 向 xtragrid 添加新行

> ID：11205847
> 
> 赞同：1
> 
> 时间：2012-06-26T10:57:24.427
> 
> 标签：c#, winforms, devexpress

我使用 DevEpress 的网格组件。当我设置`NewItemRowPosition`为`GridOptionsView`“顶部”时，网格中出现了一个新行，但是当我尝试添加新行时，在为新行的每一列输入一个值之后，当焦点离开我刚刚输入的该列值时消失了！我正在尝试允许用户向网格添加新行并将该行添加到网格和数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:41:59.943

错误的可能原因可能是

列的字段名必须与数据源中列的字段名匹配。

请检查 XtraGrid 设计器视图中的 column.FieldName 属性以及您在数据源中提供的属性。

# c++ - Qt XML 序列化增加了额外的字符

> ID：11205856
> 
> 赞同：2
> 
> 时间：2012-06-26T10:58:01.827
> 
> 标签：c++, xml, qt, serialization, newline

我有一个使用 Qt 将自由文本输入序列化到 XML 节点的方法。此文本可能包含换行符。问题是，当我序列化此文本并再次反序列化时，输出流中会插入一些额外的换行符。

这是我的序列化方法：

```
QDomElement textElement = doc.createElement("Sql");
QDomText cdata = doc.createTextNode(m_sql);
textElement.appendChild(cdata); 
```

这是我要序列化的文本：

```
CREATE FUNCTION func(a INT) RETURNS INT
BEGIN
     return 1;
END 
```

这是我在序列化文件中得到的：

> `<Sql>CREATE FUNCTION func(a INT) RETURNS INT&#xd;&#xd;`
> 
> `BEGIN&#xd;&#xd;`
> 
> ```
>  return 1;&#xd;&#xd; 
> ```
> 
> `END&#xd;&#xd;</Sql>`

（我知道这看起来很糟糕，但是之后有新行，`&#xd;&#xd;`并且这个编辑器无法显示它们，因为它们在那里，这就是为什么行之间似乎有一个空行。）

这就是我反序列化后得到的：

```
CREATE FUNCTION func(a INT) RETURNS INT

BEGIN

    return 1;

END 
```

所以你可以看到换行符加倍......任何线索如何解决它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:18:06.150

在打开文件进行读取时尝试使用`QIODevice::Text`标志。来自 QFile 文档：

> `QIODevice::Text`传递给的标志`open()`告诉 Qt 将 Windows 样式的行终止符 (" `\r\n`") 转换为 C++ 样式的终止符 (" `\n`")。默认情况下，QFile 假定为二进制，即它不对存储在文件中的字节执行任何转换。

# android - 在布局中引用视图时出现空指针错误

> ID：11205860
> 
> 赞同：1
> 
> 时间：2012-06-26T10:58:10.573
> 
> 标签：android, android-fragments

真的很简单，但就是不明白。我想通过 ID 引用`Fragments`我膨胀的 XML 文件中的视图。

我宣布观点。

```
TextView nameView; 
```

我正在从布局中获取视图。

```
View view = inflater.inflate(R.layout.trackfrag, group, false);
nameView = (TextView)view.findViewById(R.id.trackName); 
```

当从其活动中调用它时，我在以下方法中遇到问题。

```
 public void setTrackDetails (String name, String description) {
    Log.e("TRACKFRAG", "setTrackDetails Called");
    nameView.setText(name);
    Log.e("TRACKFRAG", "setTrackDetails Finished");
} 
```

任何帮助将非常感激。

**添加的 XML**

```
 <TextView
            android:id="@+id/trackName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_above="@id/anchor"
            android:text="Track Name"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="22sp" /> 
```

如果我不调用此方法，`Fragment`加载并显示正常，但我需要一种更改`Text Views`.

**添加片段创建**

```
public void onTrackSelected(String track) {
    Log.e("FRAGTRANS","History List Pressed");

    Fragment trackFrag = getFragmentManager().findFragmentByTag("historytrack");
    if (trackFrag == null) {
        trackFrag = new TrackFragment();
        Log.e("TRACKSEL","new trackfrag created");
    }

    addFragment(trackFrag, true, HISTORYTAG, FragmentTransaction.TRANSIT_NONE);

    ((TrackFragment) trackFrag).setTrackDetails(track,"testing");
} 
```

**添加片段方法**

```
void addFragment(Fragment fragment, boolean addToBackStack, String tag, int transition) {
        FragmentTransaction ft = getFragmentManager().beginTransaction();
        ft.replace(android.R.id.content, fragment);
        ft.setTransition(transition);
        if (addToBackStack)
            ft.addToBackStack(null);
        ft.commit();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T07:29:40.400

您的问题在于调用 setTrackDetails() 方法。请看[这里](http://developer.android.com/guide/components/fragments.html#Transactions)你可以看到：

> 调用 commit() 不会立即执行事务。相反，一旦线程能够这样做，它就会安排它在活动的 UI 线程（“主”线程）上运行。

因此，在您调用提交之后，您的片段尚未创建或正在创建，并且您的 nameView 尚未设置。最好的解决方案是在创建你的片段之后（可以在设置 nameView 之后，因为片段已经有活动）从接受文本的活动中调用方法：

```
View view = inflater.inflate(R.layout.trackfrag, group, false);
nameView = (TextView)view.findViewById(R.id.trackName);
String str = ((MyActivity)getActivity()).getTextForLabel();
nameView.setText(str); 
```

请阅读有关片段及其生命周期的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:54:28.687

你有没有像这样初始化你的充气机，

```
 inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE); 
```

看一下这个。清理你的项目并运行....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:56:19.940

我也遇到了这个问题。

您上面提到的代码，只需将那部分写`onActivityCreated()`在类的方法中即可`Fragment`。这样我就解决了问题。

# google-sheets - 从 google docs 表单中对电子表格中的列进行排序

> ID：11205864
> 
> 赞同：6
> 
> 时间：2012-06-26T10:58:26.750
> 
> 标签：google-sheets, google-forms

您不能将表格中的列左右移动，因为这样做会破坏表格的结构。这就是谷歌支持和/或帮助页面所说的。

我的问题是，如果我在谷歌文档中创建一个表单。我不小心创建了一个我应该早先创建的问题，然后我将问题移到了表格中。该列不会在电子表格中移动。

所以我的表单电子表格现在看起来很乱。有没有办法解决这个问题而无需再次输入我所有的问题（89）。我的工作表中还没有任何结果。所以我正在寻找一个重新生成工作表选项或类似的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-05-30T14:20:13.657

最简单的选择是将表单与其链接的电子表格取消链接，然后将其重新链接到同一个电子表格。它将在该电子表格中创建一个新工作表，但这次它将处于良好状态。

然后，您可以将旧工作表中的旧答案复制到新工作表中并手动重新排列它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-07T21:41:12.373

如果您在表单中移动问题，问题和答案出现在所谓的表单响应表中的顺序与最初创建表单问题的顺序相同。

但是，您可以重新排列表单响应表中的 questions_and_answers 列，以匹配问题在表单中出现的顺序（是的，会有警告不要这样做，但尽管有警告，我还是安全地完成了）......请参阅我的以下博客文章以获取插图... [http://yogi--anand-consulting.blogspot.com/2011/11/yogimake-column-headers-and-answers_27.html](http://yogi--anand-consulting.blogspot.com/2011/11/yogimake-column-headers-and-answers_27.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T17:21:03.000

解决方案 1。

如果您没有很多复选框等，而只是空白的简短答案，那么：

1.  制作副本（以测试）
2.  删除表格。
3.  移动列
4.  创建表格。（这将默认为您的问题提供简短的空白答案。）

解决方案 2。

1.  制作新工作表
2.  使用数组公式从第一张表中复制结果，将它们放在您想要的位置。
3.  隐藏第一张纸。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-27T16:04:23.307

如果您尚未收集任何答案，最简单的解决方案是复制报告。

按所需顺序完成问题后，单击`File>Make a Copy`。

这份新报告的回复表将按照您提出问题的顺序排列。

# java - Eclipse RCP - 如何从 PreferenceStore 以编程方式检索 RadioGroupFieldEditor 存储的首选项？

> ID：11205872
> 
> 赞同：0
> 
> 时间：2012-06-26T10:58:59.247
> 
> 标签：java, eclipse-rcp, preferences, fieldeditor

我有一个首选项页面，其中一些单选按钮由`RadioGroupFieldEditor`.

```
setPreferenceStore(Activator.getDefault().getPreferenceStore());
....

addField(new RadioGroupFieldEditor("CHOICE",
    "An example of a multiple-choice preference", 1,
    new String[][] { { "&Choice 1", "choice1" },
            { "C&hoice 2", "choice2" } }, getFieldEditorParent())); 
```

**问题：**
如何以编程方式从 PreferenceStore 中检索数据（由 fieldEditor 存储）？存储结构如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T14:58:54.737

RadioGroupFieldEditor 将为您存储一个字符串。它将是与所选组中的单选按钮关联的字符串，并且它将与您给组本身的名称无关。

换句话说，给出你的例子，调用：

```
Activator.getDefault().getPreferenceStore().getString("CHOICE"); 
```

...将返回“choice1”或“choice2”，具体取决于保存首选项时在首选项页面上选择了哪个单选按钮。

# javascript - 如何根据用户区域设置格式化数字和日期？

> ID：11205873
> 
> 赞同：7
> 
> 时间：2012-06-26T10:59:01.223
> 
> 标签：javascript, internationalization, locale

我需要一种根据用户的区域设置自动格式化 Date 和 Number 对象的方法。

到目前为止，我一直在使用`toLocaleString()`日期函数。对于数字，`toLocaleString()`也可以使用，但正如您在我准备的[jsFiddle中看到的那样，不同浏览器的结果差异很大。](http://jsfiddle.net/tgzvq/)在我的 Windows 机器上使用英语（美国）语言环境，我得到这个：

*   IE9：15,000.00
*   火狐：15,000
*   铬：15000

在 Chrome 中，数字似乎`toLocaleString()`根本不起作用。除了这种方法，我还尝试过：

*   要使用 MicrosoftAjax.js 库`localeFormat()`函数，但无论我在 PC 上设置了哪种语言环境（通过使用“区域和语言”对话框），日期和数字仍然都是美国格式。
*   使用像[Globalize](https://github.com/jquery/globalize)这样的库。尽管它们确实提供了格式化功能，但它们无法自动检测用户的语言环境。

因此，总结一下：如何自动格式化数字和日期以尊重以适用于所有主要浏览器（IE、Firefox、Chrome）的方式浏览网页的用户的区域设置？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-26T11:07:52.383

`.toLocaleString()`原生 Javascript 对象上的函数实际上是无用的，因为它不允许您指定语言环境或以其他方式控制它们的行为。

在[ECMAScript i18n API](http://norbertlindenberg.com/2012/02/ecmascript-internationalization-api/index.html)成为现实之前（这在未来可能太远了，现在根本不值得考虑），您唯一实用的选择是使用诸如 Globalize 之类的库，但是正如您所说，您需要检测用户的首选语言环境.

检测语言环境是另一个[用纯 Javascript 不容易解决的问题](https://stackoverflow.com/questions/1043339/javascript-for-detecting-browser-language-preference)。具体来说，在`Accept-Language`恕我直言，标头作为区域设置检测的手段实际上是无用的，因为它对绝大多数 Web 用户不可见。这就是为什么 Web 应用程序通常为用户提供一种自定义机制来选择返回给服务器的区域设置，并且服务器使用此信息来配置此后的每个响应。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-22T08:17:23.047

今天，@Jon 提到的国际化 API 得到了广泛的支持。从您可以使用的原始数字`Number(123456).toLocaleString()`开始，Chrome 现在`"123,456"`按预期返回（对于美国语言环境）。我还没有在 IE11/Edge 上测试过，但根据 caniuse 的支持。

# ios - Cocos2d-x 是一个很好的游戏开发平台吗？

> ID：11205877
> 
> 赞同：0
> 
> 时间：2012-06-26T10:59:06.580
> 
> 标签：ios, cocos2d-iphone, cocos2d-x

我刚刚学习了 Cocos2d，但我不是这方面的专家。但是有朋友叫我学Cocos2d-x。我应该更喜欢 Cocos2d 上的 Cocos2d-x 吗？我听说多平台开发所使用的技术不如原生技术。有人可以在这方面提供帮助吗？任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:05:33.670

Cocos2d-x:

> Cocos2d-X 是一个基于 Cocos2d-iPhone 的游戏引擎框架，由扩展的支持平台组成，有多种编程语言可供选择，共享相同的 API 结构。
> 
> 程序员可以选择使用他们喜欢的语言来实现他们的目标平台 Native 分支，用 C++ 编写，带有一点 Java 和 Objective-C。Lua 和 javascript 绑定为脚本语言。HTML5 分支，也称为 cocos2d-html5，是用 Javascript 编写的，专注于桌面浏览器 XNA 端口，是用 C# 编写的，专注于 Windows Phone 7 和 XNA。

如果你的目标是 iPhone/iPad，你应该坚持使用 Cocos2d。有 OpenGL ES，但学习曲线会让你花很多时间来学习基础知识，然后开始做更复杂的事情。Cocos2d 是在 OpenGL ES 之上的抽象构建，它可以让你开始很快地得到结果。在我看来，Cocos2d 是一个不错的选择。互联网上也有很多比较替代方案和其他方案的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:06:50.770

我认为，任何跨平台框架都有它自己的限制。我认为，如果你已经熟悉objective-c，你应该使用cocos2d-iphone。如果你对c++比较熟悉，可以使用cocos2d-x。

至于我，我尝试了这两个框架，并且可以说 cocos2d-iphone 的开发速度要快得多，因为它使用了许多不能在 c++ 中使用的原生 Objective-c 东西。我并不是说 C++ 是一种糟糕的语言，只是它对我来说太不舒服了。

两个框架结构相同，以后可以自由迁移。您可以在这两个框架中的任何一个上提高您对 cocos2d 的了解

# c# - 我可以在 SQL Server 存储过程中转换字符编码吗？

> ID：11205878
> 
> 赞同：1
> 
> 时间：2012-06-26T10:59:09.683
> 
> 标签：c#, sql-server, stored-procedures, unicode, character-encoding

由于“遗留”原因，我们的许多数据`varchar`与使用的编码一起存储在标准列中。

我正在处理一个批量上传例程，我想在其中将一个 xml 字符串传递给一个存储过程（来自 C#）。xml 字符串将全部采用 unicode 格式，每个元素都具有指示所需目标编码的属性（例如，用于日语的 Shift-JIS）。

SQL Server 中是否有一些内置机制可以在 Transact-SQL 中进行这种转换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:18:59.983

将数据存储为 UNICODE。还将所需的“编码”存储为另一列。在您的应用程序中返回数据 (UNICODE) 和所需的编码。将 Unicode 数据转换为它所属的表示层中所需的编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:03:13.373

```
CAST(field AS varchar) [COLLATE][1] your collision 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-02T15:25:56.853

`NVARCHAR`如果您只是从 XML 中提取数据并将其用作目标数据类型，您应该能够完成此操作。如果在列上正确指定了排序规则（并且它必须是为了让您没有数据丢失），那么它应该转换为正确的代码页：

```
DECLARE @SourceXML XML = N'
<Test>
  <Row>
    <Something Collation="Hebrew_100_CI_AS">בליפ</Something>
  </Row>
  <Row>
    <Something Collation="Japanese_XJIS_100_CI_AS">如抜範浪偃壅國&lt;/Something>
  </Row>
</Test>'; -- the @Collation attribute is not necessary; only there for visual indication

DECLARE @Test TABLE
(
  HebrewCollation VARCHAR(20) COLLATE Hebrew_100_CI_AS,
  Latin1Collation VARCHAR(20) COLLATE Latin1_General_100_CI_AS,
  JapaneseCollation VARCHAR(20) COLLATE Japanese_XJIS_100_CI_AS
);

INSERT INTO @Test ([HebrewCollation], [Latin1Collation], [JapaneseCollation])
  SELECT tab.col.value('(./Something/text())[1]', 'NVARCHAR(100)'),
         tab.col.value('(./Something/text())[1]', 'NVARCHAR(100)'),
         tab.col.value('(./Something/text())[1]', 'NVARCHAR(100)')
  FROM   @SourceXML.nodes(N'/Test/Row') tab(col);

SELECT *,
       DATALENGTH([HebrewCollation]) AS [HebrewColumnBytes],
       DATALENGTH([JapaneseCollation]) AS [JapaneseColumnBytes]
FROM @Test; 
```

回报：

```
HebrewCollation  Latin1Collation  JapaneseCollation  HebrewColumnBytes  JapaneseColumnBytes
בליפ
                 ????             ????               4                   4
???????          ???????          如抜範浪偃壅國       7                  14 
```

^(由于 werbeH 引起的从右到左与从左到右的显示问题，结果第 1 行位于两行；-))

第 1 行的“HebrewColumnBytes”值为 4 是正确的，因为**希伯来语_***排序规则使用代码页 1255，它是一个单字节字符集。同样，第 2 行的“JapaneseColumnBytes”值 14 是正确的，因为**Japanese_***排序规则使用的是双字节字符集的代码页 932。

# c# - 从 UserControl 公开多个命令，每个命令都有不同的 CommandParameters

> ID：11205879
> 
> 赞同：0
> 
> 时间：2012-06-26T10:59:23.517
> 
> 标签：c#, wpf, mvvm, command, commandparameter

我有一个`UserControl`包含多个按钮的按钮，并且对于每个按钮我都有一个`Command` `DependencyProperty`定义。UserControl XAML 是（为简洁起见删除了一些元素）：

```
<UserControl>
   <Grid>
      <Button Command="{Binding CloseCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" ToolTip="Delete">
      <Button Command="{Binding NavigateCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" ToolTip="Launch">
   </Grid>
</UserControl> 
```

UserControl 代码隐藏中的 DepencyProperties 是：

```
public static readonly DependencyProperty CloseCommandProperty = DependencyProperty.Register("CloseCommand", typeof (ICommand), typeof (Tile));

public ICommand CloseCommand
{
    get { return (ICommand)GetValue(CloseCommandProperty); }
    set { SetValue(CloseCommandProperty, value); }
}

public static readonly DependencyProperty NavigateCommandProperty = DependencyProperty.Register("NavigateCommand", typeof (ICommand), typeof (Tile));

public ICommand NavigateCommand
{
    get { return (ICommand) GetValue(NavigateCommandProperty); }
    set { SetValue(NavigateCommandProperty, value); }
} 
```

我正在使用 MVVM Light，并且可以通过`RelayCommands`我的 ViewModel 为包含多个 this 实例的 View绑定到这些命令`UserControl`。我希望能够为`CommandParameters`我的 UserControl 上的每个命令公开个人。这可能吗？

将来，我还希望整个`UserControl`（基本上是直接包含在其中的网格）公开其他事件的命令（单击、拖放和数据删除），同样，每个事件都会公开自己的`CommandParameters`.

我没有找到太多关于多重`Command`和`CommandParameter`配对的信息，所以我想知道我是否采取了错误的方法。会`CustomControl`更合适吗？或者最好使用 a 来解决这个问题`DataTemplate`？将诸如单击和拖动之类的事件作为命令公开似乎也没有太多的覆盖范围 - 是否有更好的容器控件可以满足我的需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:30:11.730

您可以创建`RelayCommand`以接受`CommandParameter`这样的 -

```
closeCommand = new RelayCommand<bool>((flag) => Close(flag));

private void Test(bool flag)
{
    if(flag)
       CloseWindow();
} 
```

即通过使用通用`RelayCommand<T>`实现；

> Execute 方法以 Action 的形式传递给 RelayCommand 的构造函数（如果命令有参数，则为 Action，在这种情况下，您必须使用 RelayCommand 类）。
> 
> [在 Silverlight 3 和 WPF 中使用 RelayCommands](http://blog.galasoft.ch/archive/2009/09/26/using-relaycommands-in-silverlight-and-wpf.aspx)
> 
> 参考。: -[为 MVVM Light V4 提出一个新的 RelayCommand 片段](http://geekswithblogs.net/lbugnion/archive/2011/06/15/proposing-a-new-relaycommand-snippet-for-mvvm-light-v4.aspx)

然后使用`CommandParameter`的属性传递参数`Button`。

```
<Button Command="{Binding CloseCommand }" 
        CommandParameter="{Binding SomeCommandParameter}" ... /> 
```

或者

```
<Button Command="{Binding CloseCommand }" 
        CommandParameter="True" ... /> 
```

# wsdl - 生成 wsdl 时出现 Axis2 错误

> ID：11205881
> 
> 赞同：3
> 
> 时间：2012-06-26T10:59:29.730
> 
> 标签：wsdl, jax-ws, axis2

我正在尝试使用 JAX-WS 和 JAXB 注释开发一个新的 web 服务。当我在axis2中部署.jar并打开浏览器以检索生成的.wsdl时，我收到以下错误：

```
[ERROR] Error occurred generating WSDL file for Web service implementation class {foo.bar.myServiceImpl}
java.lang.NoClassDefFoundError: com/sun/xml/ws/api/server/Container
        at java.lang.Class.getDeclaredMethods0(Native Method)
        at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
        at java.lang.Class.getMethod0(Unknown Source)
        at java.lang.Class.getMethod(Unknown Source)
        at org.apache.axis2.jaxws.description.builder.JAXWSRIWSDLGenerator.generateWsdl(JAXWSRIWSDLGenerator.java:179)
        at org.apache.axis2.jaxws.description.builder.JAXWSRIWSDLGenerator.initialize(JAXWSRIWSDLGenerator.java:390)
        at org.apache.axis2.jaxws.description.builder.JAXWSRIWSDLGenerator.getWSDL(JAXWSRIWSDLGenerator.java:383)
        at org.apache.axis2.description.AxisService.printWSDL(AxisService.java:1394)
        at org.apache.axis2.transport.http.HTTPWorker.service(HTTPWorker.java:154)
        at org.apache.axis2.transport.http.server.AxisHttpService.doService(AxisHttpService.java:281)
        at org.apache.axis2.transport.http.server.AxisHttpService.handleRequest(AxisHttpService.java:187)
        at org.apache.axis2.transport.http.server.HttpServiceProcessor.run(HttpServiceProcessor.java:82)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
        at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: com.sun.xml.ws.api.server.Container
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        ... 15 more 
```

挖掘源代码，我注意到 com.sun.xml.ws.api.server.Container 是 jaxws-rt 实现的一部分，它不是 Axis2 发行版的一部分（在 /lib/ 文件夹中找不到它）。为什么是这样？我在这里错过了一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-10T10:36:22.177

我有同样的问题。我需要向 jaxws-maven-plugin 添加依赖项。没有这些依赖，它会给我带来同样的错误

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jaxws-maven-plugin</artifactId>
            <configuration>
                <wsdlDirectory>src/main/resources/wsdl/</wsdlDirectory>
                <keep>true</keep>
                <sourceDestDir>${project.build.directory}/generated-sources/wsimport</sourceDestDir>
                <sei></sei>
            </configuration>
            <dependencies>
                <dependency>
                    <groupId>com.sun.xml.ws</groupId>
                    <artifactId>jaxws-rt</artifactId>
                    <version>2.1.4</version>
                </dependency>
                <dependency>
                    <groupId>com.sun.xml.ws</groupId>
                    <artifactId>jaxws-tools</artifactId> 
                    <version>2.1.4</version>
                </dependency>
            </dependencies>
            <executions>
                <execution>
                    <id>generate-from-wsdl</id>
                    <goals>
                        <goal>wsimport</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T11:09:49.683

好的，我知道了。我会发布答案以避免其他人将他（或她）的头撞到墙上。

我在我的系统上设置了一个旧的 JAVA_HOME 环境变量。这指向安装程序 JRE，但它需要指向已安装的 JDK。就这样。

# linux - 如何在 minicom 中禁用关于 PPPoE 的重复消息？

> ID：11205884
> 
> 赞同：0
> 
> 时间：2012-06-26T10:59:44.763
> 
> 标签：linux, router, pppoe

我使用 minicom 通过 USB 连接路由器。我发送命令并观察结果。一切都很好。但是每隔几秒 minicome 就会生成消息：

```
Unable to complete PPPoE Discovery                                                                                    
Terminating on signal 15                                                                                              
loading pppoe plugin ...                                                                                              
RP-PPPoE plugin version 3.3 compiled against pppd 2.4.4 
```

如何禁用它？帮助。

**UPD：**我通过执行“killall -9 pppd”停止了消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:04:31.913

那不是minicom。那就是内核。您可以尝试使用以下命令关闭控制台消息：

```
echo "4 1 1 7" > /proc/sys/kernel/printk 
```

但它们只是从控制台中消失。无论如何，日志文件中都会有消息。

# php - php注册错误

> ID：11205888
> 
> 赞同：0
> 
> 时间：2012-06-26T10:59:55.997
> 
> 标签：php, mysql

```
<html>
<body>
<?php include './includes/connect_db.php' // connecting to mysql server  ?>   
<?php include './includes/select_db.php' //  selecting database ?>
<?php
    $username=$_POST["username"];
    $password=$_POST["pass"];
    $email=$_POST["email"];             
$sql="insert into table 'users' values ('$username','$password','$email')";
if(mysql_query($sql,$connect))
{
    echo "query executed";
}
else
{
    echo "query did not run ".mysql_error();
} ?>

<?php include './includes/close_db.php' ; //closing connection ?> 
```

该表由 4 个字段组成，（id、用户名、密码、电子邮件）。“id”是主键并自动递增。一切正常，除了查询和 php 没有显示查询中的错误，尽管 display_error 为 ON 是 .ini 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:06:20.917

那里有几个问题.. 首先，您不需要多次启动和关闭 php 解释器（使用 php 打开和关闭标签作为您的包含）.. 只需打开一次。

您尚未定义 connect - 我建议将其保留在您的 if 语句之外。从我在那里看到的情况来看，它无论如何都不会连接到它所在的位置。但我看不出你是如何定义它的。

首先设置你的数据库连接，然后将你的 $sql 更改为读取；

```
$sql="INSERT INTO 'users' 
values ('{$username}','{$password}','{$email}')"; 
```

那应该对你很好。

祝你好运！

*   伊根

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:04:11.580

试试这个。

```
$sql="INSERT INTO users (username, password, email) VALUES ('$username','$password','$email')";
$link = mysql_query($sql) or die(mysql_error()); 
```

更改`(username, password, email)`为您自己的列值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:04:14.350

您可以回显 $sql 行，然后将其复制并粘贴到 PHPmyadmin 的 SQL 选项卡中。这将告诉您您的 SQL 是否正确。并将字段名称放入您的查询中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T11:10:36.630

请使用下面的sql命令

```
$sql="insert into users values ('".$username."','".$password."','".$email."')"; 
```

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:49:10.523

尝试

```
mysql_query($sql,$connect) or die mysql_error() 
```

得到实际的错误

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-10-18T20:19:21.830

尝试以下操作：

```
$sql = "INSERT INTO users (username, password, email) VALUES('$username','$password','$email')"; 
```

如果您的错误仍然存​​在，请复制以下代码：

```
<?php
  $servername = "localhost";
  $username = "root";
  $password = "pass";
  $dbname = "myDB";

  // Create connection
  $conn = mysqli_connect($servername, $username, $password, $dbname);
  // Check connection
  if (!$conn) {
    die("Connection failed: " . mysqli_connect_error());
  }
  $myusername = mysqli_real_escape_string($conn,$_POST['name']);
  $myusername1 = mysqli_real_escape_string($conn,$_POST['name1']);
  $mylastname = mysqli_real_escape_string($conn,$_POST['lastname']);
  $myemail = mysqli_real_escape_string($conn,$_POST['email']);
  #the if statement is just an example of when you to control the flow of your code
  if($myusername == $myusername1){
    $sql = "INSERT INTO MyGuests (name, lastname, email)
    VALUES ('$myusername', '$mylastname', '$myemail')";
    if (mysqli_query($conn, $sql)) {
      echo "New record created successfully";
    } else {
      echo "Error: " . $sql . "<br>" . mysqli_error($conn);
    }
  }else{
    echo "Error: Check your username!!!";
  }

  mysqli_close($conn);
?> 
```

# r - ggplot2 用一些 x 轴跳汰绘制 3 个因子

> ID：11205889
> 
> 赞同：7
> 
> 时间：2012-06-26T10:59:56.750
> 
> 标签：r, ggplot2

我想用 ggplot2 geom_point 绘制一个点图，其中连续变量由不同的因素分层。

这很复杂，也许我试图在一张图中显示太多，但我有三个不同的因素会影响事物

我想这样展示

```
p <- ggplot(mtcars[,c(1,2,10,11)], aes(factor(cyl), mpg))
p + geom_point(aes(colour = factor(gear), shape=factor(carb))) 
```

![在此处输入图像描述](../Images/619db2948cdee29767639533ab15e739.png)

但是我想将因子（齿轮）分开，即对于x轴上的三个因子（cyl）值中的每一个，我想要x轴上不同因子（齿轮）颜色之间的小距离

即在因子（cyl）== 4内，因子（齿轮）== 3在3.9上，因子（齿轮）== 4在4上，因子（齿轮）== 5在4.1上。这对每个因子（cyl）值重复。

希望这是有道理的

注意这是一个玩具示例。我将使用分类的非数字值而不是分解的数字来做到这一点；我意识到在 3.9/4.1 上有值是令人困惑的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-26T11:52:49.137

以`facet_grid()`和 mtcars 为例：

```
library(ggplot2)
data(mtcars)

p <- ggplot(mtcars, aes(factor(cyl), mpg)) + geom_point(aes(colour=factor(carb)))
p + facet_grid(. ~ gear) 
```

![按齿轮数](../Images/71f6f754b810e17ae51de6eabba71914.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T11:29:00.200

`subset`是做到这一点的一种方法。按 对数据进行子集化`gears`，然后依次为每个子集定位点集。

```
library(ggplot2)

p <- ggplot()
p + geom_point(data = subset(mtcars[,c(1,2,10,11)], gear == 3), aes(x = as.numeric(factor(cyl)) - 0.1, y = mpg, colour = factor(gear), shape=factor(carb))) +
    geom_point(data = subset(mtcars[,c(1,2,10,11)], gear == 4), aes(x = as.numeric(factor(cyl)), y = mpg, colour = factor(gear), shape=factor(carb))) +
    geom_point(data = subset(mtcars[,c(1,2,10,11)], gear == 5), aes(x = as.numeric(factor(cyl)) + .1, y = mpg, colour = factor(gear), shape=factor(carb))) +
   scale_x_continuous("Cylinders", breaks = c(1,2,3), labels = c(4,6,8), expand = c(.2,0)) 
```

![在此处输入图像描述](../Images/6e53a1a9a88257ece3aa5c4ea6378dde.png)

# php - PHP 5.4.4 无法识别 --enable-dbase

> ID：11205890
> 
> 赞同：0
> 
> 时间：2012-06-26T10:59:57.610
> 
> 标签：php, php-extension, dbase

我正在尝试使用 --enable-dbase 选项在 CentOS 6.1 x64 服务器上编译 php 5.4.4，但我收到了这个错误：configure: WARNING: unrecognized options: --enable-dbase

我在 ./ext/ 目录中看到没有 dbase 文件夹，所以我从[http://pecl.php.net/package/dbase](http://pecl.php.net/package/dbase)下载了源代码。仍然，同样的错误。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T12:09:18.993

该`dbase`扩展[已从 5.3 的 PHP 发行版中删除](http://www.php.net/manual/en/migration53.removed-extensions.php)。

在编译 PHP*之后*，[您需要直接从 PECL 安装它。](http://www.php.net/manual/en/install.pecl.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-29T00:19:10.950

测试你使用的是 Linux 发行版 Ubuntu 还是 Debian

```
sudo apt-get install php-pear php5-dev
sudo pecl install dbase 
```

（如果您 p​​hp 版本 > 5.5 并显示错误运行，则可选 -> sudo pecl install -Z dbase ）

创建文件

```
sudo nano /etc/php5/apache2/conf.d/dbase.ini 
```

并在 dbase.ini 中添加这一行`extension=dbase.so`

（在 php.ini 中添加 lib 扩展 dbase.so） `sudo nano /etc/php5/apache2/php.ini`添加行`extension=dbase.so`

```
sudo service apache2 restar 
```

并在 php.ini 中测试您的功能。对我来说它有效，我希望你觉得它有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:25:38.183

我认为您现在必须通过 pecl 或 pear 安装它，而不是在编译 php 源时完成它，也许手册尚未更新

# mysql - MySQL 无效的 TIME 格式

> ID：11205891
> 
> 赞同：0
> 
> 时间：2012-06-26T11:00:08.727
> 
> 标签：mysql, sql

我正在使用 TIME 数据类型来存储员工的额外工作时间，在某些情况下，时间值会像这种格式一样存储

```
9.08:00:00, 
2.16:00:00, 
1.00:00:00, 
-9.05:00:00 
```

这种格式是什么，我怎么知道它的确切值？

请帮忙

提前致谢，

湿婆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T05:41:33.647

9.08:00:00 这里 9 是 9 天，然后 9*24=216 和 0.08 是 8 小时，所以总共 216+5=221 小时

2.16:00:00 同上 2 - 2 天 2*24 和 16 是 16 小时 48+16=64

使用 MySQL 函数查看上述计算

注意：在 Mysql 5.5.18 中，TIME 数据类型列存储时间值，如下所示...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:11:03.973

您需要使用 TIME_FORMAT() 将其转换为字符串。（[http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_time-format](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html#function_time-format)）

```
SELECT TIME_FORMAT(time_field, '%H:%i') FROM table 
```

%H:$i 它的小时:分钟

# java - 将二维数组传递给另一个类：Java

> ID：11205901
> 
> 赞同：0
> 
> 时间：2012-06-26T11:00:46.557
> 
> 标签：java, data-structures

我想在两个不同的类中创建一个可用于两种不同目的的二维数组。假设我有一个二维数组，例如

```
int[][] grid = {{1, 1, 1, 1},
                {1, 1, 1, 1},
                {1, 1, 1, 1},
               {1, 1, 1, 1}}; 
```

我对这个 2D 数组的第一个目的是填充缓冲图像作为 2d 游戏的一部分（缓冲图像表示岩石层。

现在假设我想使用完全相同的二维数组来定义数据结构，这将允许我为 AI 创建一个搜索函数，基本上使用 A* 算法我希望能够为二维数组中的每个位置分配一个“成本” “用于移动。我的目标是创建一个高效的 2D Java 游戏，并且在尝试做某事时不会重新发明轮子。我的问题希望能够在一个类中声明一个二维数组并使用同一个二维数组做两件事，为该数组中的每个元素分配一个数字，这样我就可以计算旅行成本并使用二维数组以在该数组的每个元素上显示相同的图像。

以下是我到目前为止所做的。

```
import java.util.*;

public class Map {

    boolean goal_Position = false;
    boolean start_Position = false;
    List neighbors = new ArrayList();

    public int createGrid(int x, int y) {
        int[][] grid = {{1, 1, 1, 1},
            {1, 1, 1, 1},
            {1, 1, 1, 1},
            {1, 1, 1, 1}};
        return grid[x][y];
    }

}

public class MainMap {

    public void soemthing(){
         Map m = new Map();
       for(int i = 0; i < createGrid[][].length; i++){
           for(int j = 0; j < createGrid[][].length; j++){

           }
       }
    }
    public static void main(String something[]){

        System.out.print(""+soemthing());

    }
} 
```

我希望我的问题不是含糊不清或不连贯，希望有一个可用于不同事物的数组。我知道他们的代码在最后几行不起作用：

```
for(int i = 0; i < createGrid[][].length; i++){
           for(int j = 0; j < createGrid[][].length; j++){

           }
       } 
```

抛出一个类预期错误，我知道尝试在 main 方法中返回它时 void 不起作用。对此提供帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:06:52.270

为什么不返回整个数组，而不是返回数组中的单个元素？像这样：

```
public int[][] createGrid() {
    int[][] grid = {{1, 1, 1, 1},
        {1, 1, 1, 1},
        {1, 1, 1, 1},
        {1, 1, 1, 1}};
    return grid;
} 
```

然后像这样访问它：

```
Map mapInstance = new Map();
int[][] grid = mapInstance.createGrid();
for(int i = 0; i < grid.length; i++){
       for(int j = 0; j < grid[0].length; j++){

       }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T17:12:51.243

```
import java.util.ArrayList;

/**
 * Created by Stefan Ronnkvist on 8/5/2017.
 */

public class SplitStringToArray {

    public String[][] SplitStringToArray(String passedValue) {
        ArrayList<String> fundNames = new ArrayList<String>();
        ArrayList<String> fundValues = new ArrayList<String>();
        ArrayList<String> fundDates = new ArrayList<String>();

        String[] splitString = passedValue.split(",");
        for (String value : splitString) {
            if (value.matches(".*[a-zA-Z]+.*")) {
                fundNames.add(value.trim());
            } else if (value.indexOf("-") >= 0) {
                fundDates.add(value.trim());
            } else if (value.indexOf(".") >= 0) {
                fundValues.add(value.trim());
            } else {
                fundValues.add("0.00000");
            }
        }
        String[] fundDatesArray = new String[fundDates.size()];
        fundDatesArray = fundDates.toArray(fundDatesArray);

        String[] fundNamesArray = new String[fundNames.size()];
        fundNamesArray = fundNames.toArray(fundNamesArray);

        String[] fundValuesArray = new String[fundValues.size()];
        fundValuesArray = fundValues.toArray(fundValuesArray);

        String[][] returnArray = {fundNamesArray, fundDatesArray, fundValuesArray};
        return returnArray;
    }
} 
```

# sql - 在其他列中引用 postgresql 查询列

> ID：11205905
> 
> 赞同：5
> 
> 时间：2012-06-26T11:01:02.710
> 
> 标签：sql, postgresql

鉴于我有一些数据表...我有一个查询，用于检索具有复杂案例子句的数据...

```
 SELECT row_number() over (...) as num, ... as field 1, 
    case ... as field2 
    FROM ... 
```

现在我想添加更复杂的逻辑，比如

```
 SELECT row_number() over (...) as num, ... as field 1, 
    field2 * num as field2 
    FROM ... 
```

基本上，如果我输入`row_num + 1 as field2`Postgres 会返回我

错误：列“row_num”不存在

如何在此查询中引用查询字段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T11:08:57.343

制作一个外部表并在该表中选择字段 2

```
Select *, num+1 as field2
from
(
   SELECT row_number() over (...) as num, ... as field1 FROM ...
) t 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T14:45:51.130

```
SELECT row_number() over (...) as num,
       1 + row_number() over (...) as field2,
       ... as field3,
  FROM ... 
```

# git - 将更改暂存到存储库时 git 损坏了管道

> ID：11205906
> 
> 赞同：1
> 
> 时间：2012-06-26T11:01:05.577
> 
> 标签：git

当我尝试将更改暂存到当前空的存储库时会发生此错误：

```
error writing "file2e7f660": broken pipe
error writing "file2e7f660": broken pipe
    while executing
"puts -nonewline $fd "[encoding convertto utf-8 $path]\0""
    (procedure "write_update_index" line 34)
    invoked from within
"write_update_index file2e7f660 {public/Aanmeegamalar/desktop.ini public/google10c909b6a3b8.html public/hehe.txt public/..." 
```

我使用 Git GUI 来完成这项工作，因为当我使用 git bash 时，即使我添加了目录，它也只会添加一个文件`git add public`。什么可以解决这个问题？我搜索了答案，但`git config http.postBuffer 209715200`没有解决问题。

编辑：我也尝试重新安装 git，但它似乎并没有解决问题。

编辑2：操作系统是windows 7 32bit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-01T09:55:42.337

我通过一次逐个目录暂存几个文件来解决这个问题，而不是尝试一次暂存所有 200 多个文件。

我在大目录清理后尝试暂存大约 200 个文件更改时遇到此错误。

我无法通过以管理员身份运行来解决这个问题。我无法通过检查文件的读取权限来解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-27T16:08:08.117

在这个错误上对我有用的原因是在 Microsoft 中，即使我是管理员，并且拥有管理员权限（与管理员不同的用户名），我仍然没有对所有文件夹的完全权限，???

所以我不得不将我添加到我使用 Git-Gui 的文件夹的安全性中。在我这样做之后，我确保我以管理员身份启动了 Git-Gui，瞧，它成功了！

这当然是在 Windows 机器上。至于Linux，它也会类似......

我希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T17:18:58.187

很容易解决。您会看到此错误，因为您无权在文件夹中写入。

当您尝试创建文件夹的新存储库时 - 尝试在您是所有者并拥有完全写入权限的地方创建它。

如果您已经在尝试推送并收到此错误 - 删除 .git 文件夹，请设置在此文件夹中写入的权限并再次创建 repo。请确保，您可以在文件夹中看到隐藏文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-15T14:16:29.167

我意识到这是一个老问题，但我自己也遇到了这个问题。在我的情况下，我试图暂存的文件之一被锁定。我在 Git GUI 中收到了*损坏的管道*消息，但是当我`git add`从 windows cmd 行尝试时，我收到了一条*权限被拒绝*消息，告诉我哪个文件是问题所在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-07T13:26:09.653

当我不得不在 Git GUI 中分阶段我的不同项目时，我遇到了同样的问题。解决方案：关闭所有使用这些文件的程序可以在 Git UI 中暂存项目。

视窗 10 1909，Git 2.25.1

# c# - File.Move() 在 C# 中自动关闭控制台窗口

> ID：11205907
> 
> 赞同：0
> 
> 时间：2012-06-26T11:01:08.040
> 
> 标签：c#, file, filesystemwatcher

我有一个简单的**C# 控制台**应用程序，我在其中使用**FileSystemWatcher**并在创建文件时将文件从一个目标移动到另一个目标。我的代码如下所示：

```
 public static void WatchForFiles()
    {
        FileSystemWatcher watcher = new FileSystemWatcher();
        //folder path is path to folder
        watcher.Path = folderPath;

        watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite
            | NotifyFilters.FileName | NotifyFilters.DirectoryName;

        //Add event handlers           
        watcher.Created += new FileSystemEventHandler(File_OnChanged);        

        //Begin watching
        watcher.EnableRaisingEvents = true;
    }

    public static void File_OnChanged(object sender, FileSystemEventArgs e)
    {
        //destiantion path is path to folder
        string destiantionFileFullPath = destianationPath + e.Name;
        if (!File.Exists(destiantionFileFullPath))
        {
            File.Move(e.FullPath, destiantionFileFullPath);
        }
    } 
```

当我第一次复制文件时，它会正常移动。但在那之后，或者如果我复制两个或更多文件，我的控制台窗口会自动关闭。我想我应该使用**IAsyncResult**但我不知道如何。我尝试了**任务**，但没有帮助。首先复制文件然后删除也没有帮助。这是什么原因造成的，我该如何预防？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:16:57.847

根据经验，使用 FileWatcher 在文件被转储和（可能）移动时对其进行监控比人们想要管理的麻烦更大。原因很简单，如果在应用程序关闭时文件被转储到目录中，FileWatcher 不会捕获它们。我更喜欢使用定时轮询的计时器，检查目录中是否有文件并移动它们。使用这种方法，如果在应用程序关闭时（例如为了维护）将新文件转储到文件夹中，它们将在应用程序重新启动并且计时器开始轮询时立即移动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:05:24.170

不复制两个文件：当您复制一个文件时，会创建另一个文件，但引发 eventgs 被禁用，因此您不会收到事件通知。

尝试扫描 中的目录`File_OnChanged`，然后您会发现它。

为什么会退出？我认为它引发了一个异常，可能是 writign 过程尚未完成写入并且您已经在访问该文件 - 这可能是不允许的。

# browser - 不同操作系统中的相同网站

> ID：11205910
> 
> 赞同：2
> 
> 时间：2012-06-26T11:01:20.693
> 
> 标签：browser, operating-system, cross-browser

如果我们使用相同的浏览器，我们是否总是从一个操作系统到另一个操作系统得到相同的结果？或者我们应该在每个可能的操作系统中测试可视化组件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:19:49.200

尽管浏览器的行为方式大多相同，但不同操作系统的相同浏览器上存在细微差异。

以下是您必须牢记的事项列表：

*   不同的操作系统意味着不同的字体，抗锯齿在每个操作系统上的工作方式也不相同。例如，这可能会导致某些字体
    在 Windows FF 上看起来平滑流畅，但在 Ubuntu FF 上却相当像素化。
*   UI 元素是基于操作系统的，因此例如您的组合框将根据操作系统具有不同的外观。[您可以在此处](http://designerstoolbox.com/designresources/elements/)查看完整列表。

作为结论，从设计师的角度来看，强烈建议在所有浏览器/操作系统组合上检查您的网站的外观。

# xslt - 从 XSL 创建 XSL

> ID：11205911
> 
> 赞同：4
> 
> 时间：2012-06-26T11:01:22.370
> 
> 标签：xslt, xslt-2.0

我正在尝试从 XSLT 样式表动态生成 XSLT 文档。当然，原则上这是可行的，但我没有让命名空间正常工作。我希望生成的 XSLT 元素带有“xsl”前缀：

```
<xsl:stylesheet ...> 
```

而不是

```
<stylesheet xmlns="http://www.w3.org/1999/XSL/Transform"> 
```

我玩过 xsl:element 的 namespace="" 和 xsl:namespace 但我没有让它工作（xslt2/saxon 可用）

有什么提示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:22:23.677

如果您想使用 XSLT 创建 XSLT 代码，那么使用[http://www.w3.org/TR/xslt20/#element-namespace-alias](http://www.w3.org/TR/xslt20/#element-namespace-alias)会有所帮助，例如

```
<xsl:stylesheet
  version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:fo="http://www.w3.org/1999/XSL/Format"
  xmlns:axsl="file://namespace.alias">

<xsl:namespace-alias stylesheet-prefix="axsl" result-prefix="xsl"/>

<xsl:template match="/">
  <axsl:stylesheet version="2.0">
    <xsl:apply-templates/>
  </axsl:stylesheet>
</xsl:template>

<xsl:template match="elements">
  <axsl:template match="/">
     <axsl:comment select="system-property('xsl:version')"/>
     <axsl:apply-templates/>
  </axsl:template>
</xsl:template>

<xsl:template match="block">
  <axsl:template match="{.}">
     <fo:block><axsl:apply-templates/></fo:block>
  </axsl:template>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:27:26.247

我找到了解决方案：

```
<xsl:element name="xsl:stylesheet">
</xsl:element> 
```

做这项工作！（即，避免使用 namespace="" 但明确列出命名空间前缀）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T12:09:19.000

该[`xsl:namespace-alias`](http://www.w3.org/TR/xslt20/#element-namespace-alias)说明的设计正是考虑到了这个用例——只需开始在您的工作中使用它。

这是一个真实的例子：

[http://dnovatchev.wordpress.com/2006/10/21/a-stylesheet-to-write-xslt-code/](http://dnovatchev.wordpress.com/2006/10/21/a-stylesheet-to-write-xslt-code/)

# ios - 如何增加 SMS iPhone 应用的 UITextView 大小和 UIToolBar 高度？

> ID：11205912
> 
> 赞同：2
> 
> 时间：2012-06-26T11:01:24.460
> 
> 标签：ios, iphone, sms, uitextview

我正在使用 SMS 消息撰写 iPhone 应用程序。我想设计像`iPhone Message screen`. 我想放置`UITextView and UIButton on Keyboard accessory view`. 当用户输入文本时`accessory view and UITextView size should be changed`。谁能给一些指导来做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:06:27.717

您可以参考来自[github](https://github.com/brandonhamilton/inputtoolbar)的代码。

# c++ - 快速一：Struct成员的GetProcAddress？

> ID：11205919
> 
> 赞同：1
> 
> 时间：2012-06-26T11:01:40.270
> 
> 标签：c++, getprocaddress

假设我在 DLL 中有以下结构定义：

```
typedef struct {
    double varOne;
    double varTwo;
} structOne;

structOne myStruct; 
```

然后*可以*从加载 DLL 的主应用程序执行以下操作：

```
structOne * sPtr = (structOne *)GetProcAddress(libraryHandle, "myStruct"); 
```

我的问题是*是否*有可能做一些类似的事情：

```
double * dPtr = (double *)GetProcAddress(libraryHandle, "myStruct.varOne"); 
```

*   如果你明白我想要什么并且这是可能的；语法是什么？
*   如果不可能；为什么？
*   如果你不明白我的问题；在评论中这么说！

问候并希望得到答案！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T11:05:21.250

不，这是不可能的。`GetProcAddress`只能访问动态链接器信息。有关类/结构布局的信息是编译器信息的一部分。编译器将此信息放入 PDB 文件中。它不直接存在于二进制模块中。`GetProcAddress`只能访问存储在 EXE/DLL 文件中的信息。PDB 文件主要由调试器使用，只有少数例外，例如`StackWalk`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:18:45.710

如其他答案所述，这是不可能的。

为了解决您的问题，您可以从 DLL 中导出结构定义，导出一个返回全局变量地址的全局函数。从 exe 中导入此函数并调用此函数以获取指向 dll 中定义的全局结构对象的指针。代码如下...

添加一个 structOne.h 文件并将结构定义移动到该文件。修改定义为

```
#ifdef TESTDLL_EXPORTS
#define TESTDLL_API __declspec(dllexport)
#else
#define TESTDLL_API __declspec(dllimport)
#endif

struct TESTDLL_API structOne{
    double varOne;
    double varTwo;
} ; 
```

将 C++ 预处理器宏 TESTDLL_EXPORTS 添加到您的 DLL。

在 structOne.cpp 文件中定义一个像这样的全局函数并将其导出。

```
structOne myStruct; // your global variable

TESTDLL_API structOne* getStruct(){return &myStruct;} 
```

然后构建DLL。

在 .exe 中，使用以下代码调用该方法。另外，包括 structOne.h 头文件

```
typedef structOne* (*getStruct)();

HMODULE libraryHandle = ::LoadLibraryA("TestDLL.dll");
getStruct fn = (getStruct)::GetProcAddress(libraryHandle, "getStruct");
structOne* s = (*fn)(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T11:07:48.800

事实上这是不可能的，因为使用 GetProcAddress 可访问的函数（符号）只是[导出地址表](http://msdn.microsoft.com/en-us/magazine/cc301808.aspx)导出的函数（符号） ！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T12:22:50.347

偏移量本身 (0) 隐含在 DLL 中，但对应于偏移量 ( ) 的*符号*`".varOne"`不存在。

解决方法：

```
struct member_t { char const* type; char const* member; size_t offset };
#define MEMBER(T, M) {#T, #M, offset_of(T, M) }
member_t exports[] = {
  MEMBER(myStruct, varOne)
}; 
```

# iphone - 在 iOs 中使用 UIView 和背景进行屏幕截图

> ID：11205923
> 
> 赞同：2
> 
> 时间：2012-06-26T11:01:59.553
> 
> 标签：iphone, screenshot, cgimage, eaglview

在我的 iPhone 应用程序中，我正在捕获设备的屏幕截图。在屏幕截图视图中，我有不同的视图与层层次结构，在底部是一个空白背景视图，然后在背景上是一个图像视图，在图像视图上是一个 EAGLView。我想用 EAGLView 的帧大小捕获设备的屏幕截图，它应该包括图像视图和背景视图。这是我的代码：

```
- (IBAction)captureScreen:(id)sender{

    UIGraphicsBeginImageContext(self.view.bounds.size);

    [self.cameraAppView.layer renderInContext:UIGraphicsGetCurrentContext()]; // cameraAppView is the EAGLView

    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    CGImageRef imageRef = CGImageCreateWithImageInRect([viewImage CGImage], cameraAppView.frame);

    UIImage *img = [UIImage imageWithCGImage:imageRef];

    CGImageRelease(imageRef);
} 
```

但现在我只获取 EAGLView 的屏幕截图，我想通过 EAGLView 帧大小获取设备的屏幕截图。我怎样才能做到这一点？

**编辑**

对不起，我错过了我的问题的一点。同一屏幕中还有一些其他子视图。但它们都是 EAGLView 的顶部。我想在 EAGLView 下方捕获视图的图像，包括 EAGLView 内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:52:29.690

终于自己找到了答案。这是一个棘手的问题，我不确定是否还有其他适当的方法可以做到这一点。对于我的需要，它运行良好。我所做的是，只需隐藏不应包含在屏幕截图图像中的子视图，并在捕获图像后取消隐藏子视图。

如果有人发现任何人找到了正确的方法，请分享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:10:43.757

指定要捕获的视图，而不是

```
[self.cameraAppView.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

采用

```
[self.cameraAppView.superView.superView.layer renderInContext:UIGraphicsGetCurrentContext()]; 
```

如果您的 EAGLView 是您的 imageView 的子视图，这是您要捕获的视图的子视图，这将起作用

# c# - 以下两种数组的主要区别是什么？

> ID：11205924
> 
> 赞同：-1
> 
> 时间：2012-06-26T11:02:01.917
> 
> 标签：c#

> **可能重复：**
> [C# 中的多维数组和数组数组有什么区别？](https://stackoverflow.com/questions/597720/what-is-differences-between-multidimensional-array-and-array-of-arrays-in-c)
> [数组数组和多维数组有什么区别？](https://stackoverflow.com/questions/11177615/whats-the-difference-between-arrays-of-arrays-and-multidimensional-arrays)

```
TYPE [,] ARRAY_NAME;
TYPE [][] ARRAY_NAME; 
```

我不能区分它们，第一种类型声明一个二维数组，第二种也和我想的一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T11:07:15.493

*   类型 [,] ARRAY_NAME; [是一个多维数组](http://msdn.microsoft.com/en-us/library/2yd9wwz4)
*   类型 [][] 数组名；[是一个锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T11:11:56.890

[,] 是多维数组

[][] 是锯齿状数组

[http://www.dotnetperls.com/jagged-array](http://www.dotnetperls.com/jagged-array)

# windows-installer - AppFabric 安装失败，因为安装程序 MSI 返回错误代码：1603

> ID：11205927
> 
> 赞同：63
> 
> 时间：2012-06-26T11:02:07.223
> 
> 标签：windows-installer, appfabric

当我重新安装[AppFabric 1.1](http://www.microsoft.com/en-us/download/details.aspx?id=27115)时，为什么我收到此错误**“AppFabric 安装失败，因为安装程序 MSI 返回错误代码：1603”**。？

我确实以管理权限运行它。

下面是错误日志。

```
 2012-06-26 18:20:07, Information           Setup  ===== Logging started: 2012-06-26 18:20:07+08:00 =====
2012-06-26 18:20:07, Information           Setup  File:             c:\a0ddcd54d09ca070ef\setup.exe
2012-06-26 18:20:07, Information           Setup  InternalName:     Setup.exe
2012-06-26 18:20:07, Information           Setup  OriginalFilename: Setup.exe
2012-06-26 18:20:07, Information           Setup  FileVersion:      1.1.2106.32
2012-06-26 18:20:07, Information           Setup  FileDescription:  Setup.exe
2012-06-26 18:20:07, Information           Setup  Product:          Microsoft(R) Windows(R) Server AppFabric
2012-06-26 18:20:07, Information           Setup  ProductVersion:   1.1.2106.32
2012-06-26 18:20:07, Information           Setup  Debug:            False
2012-06-26 18:20:07, Information           Setup  Patched:          False
2012-06-26 18:20:07, Information           Setup  PreRelease:       False
2012-06-26 18:20:07, Information           Setup  PrivateBuild:     False
2012-06-26 18:20:07, Information           Setup  SpecialBuild:     False
2012-06-26 18:20:07, Information           Setup  Language:         Language Neutral
2012-06-26 18:20:07, Information           Setup  
2012-06-26 18:20:07, Information           Setup  OS Name:                   Windows 7 Ultimate
2012-06-26 18:20:07, Information           Setup  OS Edition:                Ultimate
2012-06-26 18:20:07, Information           Setup  OSVersion:                 Microsoft Windows NT 6.1.7601 Service Pack 1
2012-06-26 18:20:07, Information           Setup  CurrentCulture:            en-US
2012-06-26 18:20:07, Information           Setup  Processor Architecture:    x86
2012-06-26 18:20:07, Information           Setup  Event Registration Source :    AppFabric_Setup
2012-06-26 18:20:07, Information           Setup  
2012-06-26 18:20:07, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : Initiating V1.0 Upgrade module.
2012-06-26 18:20:07, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : V1.0 is not installed.
2012-06-26 18:20:33, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : Initiating V1 Upgrade pre-install.
2012-06-26 18:20:33, Information           Setup  Microsoft.ApplicationServer.Setup.Upgrade.V1UpgradeSetupModule : V1.0 is not installed, not taking backup.
2012-06-26 18:20:33, Information           Setup  Enumerating Windows features
2012-06-26 18:20:36, Information           Setup  Executing c:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe with commandline -iru.
2012-06-26 18:20:46, Information           Setup  Return code from aspnet_regiis.exe is 0
2012-06-26 18:20:46, Information           Setup  Windows features successfully enabled.
2012-06-26 18:20:46, Information           Setup  Process.Start: C:\Windows\system32\msiexec.exe /quiet /norestart /i "c:\a0ddcd54d09ca070ef\Packages\AppFabric-1.1-for-Windows-Server-32.msi" ADDDEFAULT=Worker,WorkerAdmin,CacheClient,Setup /l*vx "C:\Users\COMPUTER-Name\AppData\Local\Temp\AppServerSetup1_1(2012-06-26 18-20-46).log" LOGFILE="C:\Users\COMPUTER-Name\AppData\Local\Temp\AppServerSetup1_1_CustomActions(2012-06-26 18-20-46).log" INSTALLDIR="C:\Program Files\AppFabric 1.1 for Windows Server" LANGID=en-US
2012-06-26 18:21:46, Information           Setup  Process.ExitCode: 0x00000643
2012-06-26 18:21:46, Error                 Setup  AppFabric installation failed because installer MSI returned with error code : 1603
2012-06-26 18:21:46, Error                 Setup  
2012-06-26 18:21:46, Error                 Setup  AppFabric installation failed because installer MSI returned with error code : 1603
2012-06-26 18:21:46, Error                 Setup  
2012-06-26 18:21:46, Information           Setup  Microsoft.ApplicationServer.Setup.Core.SetupException: AppFabric installation failed because installer MSI returned with error code : 1603
2012-06-26 18:21:46, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.WindowsInstallerProxy.GenerateAndThrowSetupException(Int32 exitCode, LogEventSource logEventSource)
2012-06-26 18:21:46, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.WindowsInstallerProxy.Invoke(LogEventSource logEventSource, InstallMode installMode, String packageIdentity, List`1 updateList, List`1 customArguments)
2012-06-26 18:21:46, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.MsiInstaller.InstallSelectedFeatures()
2012-06-26 18:21:46, Information           Setup     at Microsoft.ApplicationServer.Setup.Installer.MsiInstaller.Install()
2012-06-26 18:21:46, Information           Setup     at Microsoft.ApplicationServer.Setup.Client.SetupWorkflow.StartActionPhase()
2012-06-26 18:21:46, Information           Setup     at Microsoft.ApplicationServer.Setup.Client.ProgressPage.StartAction()
2012-06-26 18:21:46, Information           Setup  
2012-06-26 18:21:46, Information           Setup  === Summary of Actions ===
2012-06-26 18:21:46, Information           Setup  Required Windows components   :  Completed Successfully
2012-06-26 18:21:46, Information           Setup  Microsoft .NET Framework 3.5.1            :  Completed Successfully
2012-06-26 18:21:46, Information           Setup  Windows Communication Foundation Non-HTTP Activation          :  Completed Successfully
2012-06-26 18:21:46, Information           Setup  IIS Management Console            :  Completed Successfully
2012-06-26 18:21:46, Information           Setup  AppFabric 1.1 for Windows Server  :  Failed
2012-06-26 18:21:46, Information           Setup  Hosting Services          :  Failed
2012-06-26 18:21:46, Information           Setup  Cache Client          :  Failed
2012-06-26 18:21:46, Information           Setup  Hosting Administration            :  Failed
2012-06-26 18:21:46, Information           Setup  Microsoft Update  :  Skipped
2012-06-26 18:21:46, Information           Setup  Microsoft Update          :  Skipped
2012-06-26 18:21:46, Information           Setup  
2012-06-26 18:21:46, Information           Setup  ===== Logging stopped: 2012-06-26 18:21:46+08:00 ===== 

```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-20T05:35:09.797

我有一个类似的问题

`9/21/2012 11:28:01 AM EXEPATH=powershell.exe PARAMS=-command "$str = [System.Environment]::GetEnvironmentVariable(\"PSModulePath\", [System.EnvironmentVariableTarget]::Machine); $str = $str+\";c:\Program Files\AppFabric 1.1 for Windows Server\PowershellModules\"; c:\Windows\system32\setx.exe /M PSModulePath \"$str\"" LOGFILE=C:\Users\XXXXXXX\AppData\Local\Temp\AppServerSetup1_1_CustomActions(2012-09-21 11-27-26).log Error: ERROR: Invalid syntax. Default option is not allowed more than '2' time(s). Error: Type "SETX /?" for usage.`

我的问题是 PSModulePath 中包含不正确的 "

它是：

C:\Windows\system32\WindowsPowerShell\v1.0\Modules\;C:\Program Files (x86)\Microsoft SQL Server\110\Tools\PowerShell\Modules"

去除多余的“纠正了这个问题

要更改此设置，请转到**控制面板**->**系统**->**高级系统设置**-> 在**高级选项卡**上选择**环境变量**-> 在**系统变量**下有一个名为**PSModulePath**的变量，选择它 -> 单击**编辑**-> 删除尾随“

![系统属性](../Images/4c85ab9f77342668c8364d0f9778482d.png)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-11T16:12:29.073

我在部署中修复了这个错误。如果我之前运行过一次安装程序，它只会发生在我身上。启动安装程序后，它将创建一个临时文件夹。复制该文件夹并用其他名称保存。现在取消该安装。

打开 Regedit 并搜索 (CTRL+F) 以查找“AppFabric”。您应该在 HKEY_CLASSES_ROOT\Installer\Products{SomeStringOfCharacters} 下找到一个条目。在该检查 SourceList 下，它将有一个名为 LastUsedSource 的键。更新其中的文件夹路径以匹配我们刚刚保存的临时文件夹。还要检查 SourceList/Net。它可能有多个带有数字名称的键。确保它们的数据值也与您的临时文件夹路径匹配。

现在进入您的临时文件夹并运行 Setup.exe。现在应该完成了。我已经看到其他安装程序首先将文件提取到临时文件夹的行为。重新运行安装程序主要从新的临时文件夹工作，但它的某些方面会保留注册表中的旧临时文件夹并尝试从旧位置加载某些内容。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-16T10:28:43.500

我试图在运行 Windows 8 的开发计算机上重新安装 AppFabric 1.1，但出现此错误。我发现[here](http://thitos.blogspot.fr/2012/09/appfabric-installation-failed-because.html)添加了这个：

```
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\ 
```

到**PSModulePath**（系统属性 -> 环境变量 -> 系统变量）解决了我的问题。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-07-09T19:04:46.717

看起来我遇到了该安装的所有可能问题。

故障排除：查看实际日志文件（在安装程序提供的日志中查找 LOGFILE=...）：

```
Process.Start: C:\Windows\system32\msiexec.exe /quiet /norestart /i "c:\2964b29c3cd7dcb37c9e\Packages\AppFabric-1.1-for-Windows-Server-64.msi" ADDDEFAULT=Worker,WorkerAdmin,CacheService,CacheClient,CacheAdmin,Setup /l*vx "c:\Temp\AppServerSetup1_1(2014-07-09 11-58-09).log" LOGFILE="c:\Temp\AppServerSetup1_1_CustomActions(2014-07-09 11-58-09).log" INSTALLDIR="C:\Program Files\AppFabric 1.1 for Windows Server" LANGID=en-US 
```

找到实际的日志文件后，检查错误。我不得不：

1.  创建 AS_Observer 失败：
    *   执行：c:\Windows\system32\net.exe 本地组 AS_Observers /delete
2.  在 config 文件夹上设置 ACL 失败：
    *   执行： md C:\Windows\SysWOW64\inetsrv\config
3.  COM 未注册：
    *   为 .NET 3.5（HTTP 和非 HTTP）安装激活服务功能并为 .NET 4.5 启用 HTTP 激活

完毕。希望有帮助。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-08-06T18:22:00.057

在我的情况下，它是一个本地组，它已经通过以前的安装存在。删除 localgroup (AS_Observers) 解决了我的问题。

网络本地组 AS_Observers /删除

希望这可以帮助某人。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-08-30T14:07:31.787

我也遇到了这个错误……</p>

**安装 msi 将尝试在 Windows 任务计划程序中创建一个新任务，**以提醒您给客户反馈。无论您是否单击复选框参与客户反馈，都会执行此安装步骤。在许多公司环境（包括我的）中，除了域管理员之外，所有人都拒绝创建新的 Windows 任务。结果，以本地管理员身份运行是不够的，当添加任务返回“访问被拒绝”时，整个安装都会失败。这在安装日志中显示为 1603。

我们能找到的唯一解决方法是手动将所有文件从 msi 中拉出，从安装脚本中删除“添加计划任务”，然后创建一个新的 msi。在那一行更改之后，它工作正常。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-13T13:02:14.153

我也有类似的问题。原因是 AppFabric 生成了一个计划任务，并且在卸载时留下了它。

日志中的错误消息：

> "/create /tn "\Microsoft\Windows\AppFabric\Customer Experience Improvement Program\Consolidator" /xml "C:\Program Files\AppFabric 1.1 for Windows Server\Consolidator.xml" 错误：错误：当该文件无法创建时已经存在。”

它无法创建任务，因为它已经存在。

删除此任务。

*   转到：%SYSTEM32%\Tasks\Microsoft\Windows。
*   删除 AppFabric 文件夹。

然后尝试重新安装它。

注意：您也可以尝试从任务计划程序 GUI 中删除它，但在我的情况下，它没有显示在那里。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-10-16T05:38:05.763

尽管许多链接都在谈论删除环境变量中的尾随空格，但这不适用于我的案例，因为我的案例中没有尾随空格。

[https://serverfault.com/a/593339/270420](https://serverfault.com/a/593339/270420)

这是最终帮助我的答案。我必须删除之前安装尝试期间创建的`AS_Observers`和`AS_Administrators`组，然后重新安装。

这样做解决了问题，我可以成功安装 AppFabric。由于声誉不足，无法在服务器故障站点中将此作为答案发布。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-23T15:08:48.860

最后但同样重要的是，我找到了这个页面。是比较完整的原因和进一步的解释。

## [已解决：错误 1306 AppFabric + Windows Server 2012](http://jefferytay.wordpress.com/2013/12/11/installing-appfabric-on-windows-server-2012/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-08-21T18:37:59.067

我有同样的错误。只需安装 IIS，一切正常。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-19T11:23:05.650

在我的情况下是： - 我的系统帐户包含两个词 - 姓名和姓氏，如“Vasya Pupkin”，因此网络平台安装程序只看到第一个“Vasya”，因此您需要将系统用户重命名为“VasyaPupkin”，不带空格符号，或安装在不同的帐户下。- 另外我注意到 PowerShell env 路径中有错误，因此请检查系统变量 PSModulePath，并删除不必要的 - 符号 (")（SQL 服务器路径包含错误，\PowerShell\Modules"）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-08T13:53:39.663

我的问题是任务计划程序“\Microsoft\Windows\AppFabric\Customer Experience Improvement Program\Consolidator”中已经有客户体验改善计划的任务。我删除了该任务，然后安装成功。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-17T14:33:43.843

感谢所有的帮助。

日志错误实际上告诉您该怎么做。它正在抱怨，因为该文件已经存在于下面。

从以下位置删除“Consolidator”文件：

C:\Windows\System32\Tasks\Microsoft\Windows\AppFabric\客户体验改善计划

由 MCT 的 Charles Babcock 提供

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-20T14:30:32.173

我今天遇到了同样的问题。我找到了这个链接，您可以在其中尝试 3 种解决方案。第一个解决方案对我有帮助。

[**微软对此问题的回答**](https://blogs.technet.microsoft.com/praveenh/2013/02/21/sharepoint-2013-prerequisites-fails-with-msi-installer-error-code-1603-while-installing-appfabric-1-1/)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-11-17T22:34:58.790

所以，我遇到了同样的问题。我安装 Appfabric 的主要原因是创建一个 SharePoint 2013 开发服务器。
什么没有奏效：

*   更新环境变量 PSModulePath - 不起作用。再次运行安装程序后仍然收到 1603 错误。
*   试图找到注册表项。找不到他们。

对我来说安装 Appfrabic 的方法是通过 powershell 从安装文件安装。呜呼！它对我有用！这是我从中检索命令的链接：[Installing AppFabric 1.1 with PowerShell DSC results in modal dialog error](https://stackoverflow.com/questions/26026901/installing-appfabric-1-1-with-powershell-dsc-results-in-modal-dialog-error)

```
 Start-Process -FilePath 'c:\temp\SharePoint\pre\appfabric\setup.exe' -ArgumentList '/i cacheclient","cachingService","CacheAdmin /gac /l c:\temp\appfabric.log' -Wait | Write-verbose
        Start-Process -FilePath 'c:\temp\SharePoint\pre\AppFabric1.1-RTM-KB2671763-x64-ENU.exe' -ArgumentList '/quiet' -Wait | Write-verbose 
```

我希望这可以帮助其他有同样问题的人。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-08-31T07:45:53.747

我终于成功了。我能够为 Win Server 2012 R2 安装 AppFabric。我不确定是什么确切的变化使它起作用。我从各种网站上看到并尝试了许多解决方案，但以上对注册表进行更改的解决方案 - 'HKEY_CLASSES_ROOT' 有效（在生产环境中对注册表进行更改之前请三思而后行 - 这是我的演示环境，所以我继续进行）；我更改了临时文件夹路径，但第一次没有用。然后我删除了注册表项，然后从控制面板卸载了 AppFabric 1.1 预装实例。然后我尝试了安装，它起作用了。这也恢复了注册表项。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-04-14T19:56:04.260

可能是我真的迟到了，说真的，这个错误解决需要几个小时，我尝试了所有可能的解决方案。

1.  安装 IIS
2.  从环境变量更改 Power Shell。
3.  删除本地组

虽然，解决方案真的很简单。如果您仔细查看环境变量 PSModulePath 值的末尾会有逗号，只需删除它们并享受

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-05-15T17:57:34.947

对我来说，以下方法有效，首先确保 Windows 更新服务正在从 services.msc 运行，或者您可以在管理员命令提示符中运行此命令 -

```
net start wuauserv 
```

接下来编辑以下注册表`regedit`-> `HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\InetStp`-> `MajorVersion`-> 将此值从 10 更改为 9。

然后尝试安装 AppFabric，它应该可以工作。注意：- 恢复为您所做的注册表值更改，以确保将来没有问题（如果有）。

# ruby-on-rails - Cap Deploy 在新客户端机器上失败

> ID：11205929
> 
> 赞同：0
> 
> 时间：2012-06-26T11:02:10.427
> 
> 标签：ruby-on-rails, ubuntu, capistrano

我有一个 Ruby On Rails 应用程序已经运行了大约 9 个月。生产环境是使用 Apache 和 Passenger 的 Ubuntu 服务器。我使用 Capistrano 进行部署，并且使用我的 Git 存储库运行良好。我刚刚更改了开发机器，现在当我尝试部署时出现超时错误。我不确定错误在哪里，但我觉得这可能是某种安全性。我的开发机器是 ubuntu 12.04 桌面。'cap deploy' 的终端输出如下：

```
 * executing `deploy`
 * executing `deploy:update`
** transaction: start
* executing `deploy:update_code`
updating the cached checkout on all servers
executing locally: "git ls-remote git@github.com:nicko777/Tata.git HEAD"
command finished in 4260ms
* executing "if [ -d /home/passenger/Tata/shared/cached-copy ]; then cd /home/passenger/Tata/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 34350075132fff5c0bd8a831667680f6c912ef23 && git clean -q -d -x -f; else git clone -q git@github.com:nicko777/Tata.git /home/passenger/Tata/shared/cached-copy && cd /home/passenger/Tata/shared/cached-copy && git checkout -q -b deploy 34350075132fff5c0bd8a831667680f6c912ef23; fi"
servers: ["10.1.1.21"]
Password: 
[10.1.1.21] executing command
 ** [10.1.1.21 :: out] Write failed: Broken pipe
 ** fatal: The remote end hung up unexpectedly
command finished in 1033137ms
*** [deploy:update_code] rolling back
* executing "rm -rf /home/passenger/Tata/releases/20120626103643; true"
servers: ["10.1.1.21"]
[10.1.1.21] executing command
command finished in 16ms
failed: "sh -c 'if [ -d /home/passenger/Tata/shared/cached-copy ]; then cd /home/passenger/Tata/shared/cached-copy && git fetch -q origin && git fetch --tags -q origin && git reset -q --hard 34350075132fff5c0bd8a831667680f6c912ef23 && git clean -q -d -x -f; else git clone -q git@github.com:nicko777/Tata.git /home/passenger/Tata/shared/cached-copy && cd /home/passenger/Tata/shared/cached-copy && git checkout -q -b deploy 34350075132fff5c0bd8a831667680f6c912ef23; fi'" on 10.1.1.21 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T15:23:53.297

弄清楚这有什么问题。当我创建新机器时，它将 Capistrano 升级到版本 2.12.0，我检查了服务器，它的版本是 2.9.0。我将新机器上的版本降级为 2.9.0，现在 cap deploy 工作正常。

# java - 用手中的手机可以模拟的最大 g 力值是多少？

> ID：11205930
> 
> 赞同：2
> 
> 时间：2012-06-26T11:02:11.073
> 
> 标签：java, android, android-sensors, sensormanager

我正在使用加速度计为 android 编写一个简单的 f1 g 测力计。一切看起来都很好，但唯一的问题是我可以模拟的最大值是 2.85。可能我做错了什么，因为“制造”例如 2.5 克很简单，但我用尽我的力量却无法获得 3 克。

这就是我计算 g 值的方式：

```
double x = event.values[0];
double y = event.values[1];
double a = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));
double currentG = (a/ SensorManager.STANDARD_GRAVITY); 
```

任何帮助将不胜感激！如果您需要，我可以添加更多代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-26T11:08:39.293

以下是一些建议：

*   多锻炼。锻炼那些手臂肌肉。

*   将一根结实的绳子系在您的手机上，然后快速旋转。（并且不要放手……如果周围有小孩或宠物。或宽屏电视。）

*   建造类似土豆炮的东西。（抱孩子和宠物。）

*   将手机从相当高的高度掉落到坚硬的表面上。

但严重的是，许多/大多数涉及大加速度的场景都有毁坏手机的重大风险......而且它们可能会使您的保修失效。 **不要怪我！！**

* * *

您的手机的加速度计也可能只能测量达到一定水平的加速度。例如，如果它涉及测量弹簧杠杆的偏转，那么杠杆很可能有一个物理限制器来保护它免受损坏。

提示：您是否尝试过阅读手机的技术规格？拖网制造商的网站？

# c# - 在 Windows 应用程序中导入 excel 工作表后 DataGridView 显示额外的数字

> ID：11205931
> 
> 赞同：2
> 
> 时间：2012-06-26T11:02:11.520
> 
> 标签：c#, excel, datagridview

Excel 单元格仅包含 248.40 美元，并设置为货币格式。但它在 DataGridView 中显示 284.3899。

你能帮我如何显示，因为它是 DataGridView 中包含的 Excel 工作表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:15:50.320

转到 DataGridView`Columns`属性。选择`Column(Cell)`要格式化的。在`Appearances`部分中，浏览 的按钮`DefaultCellStyle`。将打开一个对话框。在这里，您可以在`Format`属性中设置单元格的格式。

在此处设置十进制格式属性`'#.##'`。这将在设计时设置属性。如果您想在运行时设置属性而不是查看 Vok 的答案。

有关数字格式的更多信息，请阅读[MSDN](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:13:13.957

电子表格中的基础值可能包含更多数字。

您需要将格式应用于您的 datagridview

```
DataGridView.Columns[0].DefaultCellStyle.Format = "#.##" 
```

# php - 使用 WordPress $wpdb 将数据插入到 WordPress 数据库中的表中

> ID：11205932
> 
> 赞同：14
> 
> 时间：2012-06-26T11:02:11.917
> 
> 标签：php, wordpress, forms

我正在开始插件开发，并按照 WordPress Codex 网站上的教程进行操作。我现在卡住了 - 我有一个名为“wp_imlisteningto”的数据库，其中`wp_`插入了：

```
$table_name = $wpdb->prefix . "imlisteningto"; 
```

当插件被激活时。

数据库本身有三列，在激活插件时设置：

```
$sql = "CREATE TABLE $table_name (
id mediumint(9) AUTO_INCREMENT,
album VARCHAR(50),
artist VARCHAR(50),
PRIMARY  KEY (id)
);"; 
```

我正在尝试从 php 表单将数据（通过创建新行）插入到该数据库中。

在 WordPress 管理员中，我创建了一个具有非常简单形式的新页面：

```
<form action="/wp-content/plugins/listeningto/formhtml.php" method="post">
Album: <input type="text" name="album" />
Artist: <input type="text" name="artist" />
<input type="submit">
</form> 
```

正如你所看到`formhtml.php`的，它是：

```
<?php
global $wpdb;

$wpdb->insert( $table_name, array( 'album' => $_POST['album'], 'artist' => $_POST['artist'] ), array( '$s', '$s' ) );
?> 
```

当我提交表单时，我`Error 500.0`在 Worpdress 上运行插件时得到一个`IIS7.0`，`"Page Not Found"`在另一个运行的 Web 服务器上运行时得到一个`apache`。

如果我`formhtml.php`改为：

```
<?php

echo $_POST['album'];
echo $_POST['artist'];

?> 
```

工作正常 - 我得到了我在表格中输入的专辑和艺术家。显然，将数据（在新行中）插入数据库时​​我做错了。

关于那可能是什么的任何想法？

更新

好的，所以如果我`formhtml.php`用这个更新：

```
<?php
require_once('../../../wp-config.php');
$table_name = $wpdb->prefix . "imlisteningto";
$wpdb->insert( $table_name, array( 'album' => $_POST['album'], 'artist' => $_POST['artist'] ), array( '$s', '$s' ) );
?> 
```

我不再收到错误消息，但数据仍然没有放入数据库。

**更新 2**

**这对我有用：**

```
<?php
require_once('../../../wp-config.php');
global $wpdb;
$table_name = $wpdb->prefix . "imlisteningto";
$wpdb->insert( $table_name, array( 'album' => $_POST['album'], 'artist' => $_POST['artist'] ) );
?> 
```

就像这样：

```
<?php
require_once('../../../wp-load.php');
global $wpdb;
$table_name = $wpdb->prefix . "imlisteningto";
$wpdb->insert( $table_name, array( 'album' => $_POST['album'], 'artist' => $_POST['artist'] ) );
?> 
```

所以，由于某种原因`$wpdb`，除非我需要`wp-config`或`wp-load.php`. 如果 include `wp-load.php`，`$wpdb`获取值，一切都很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T07:21:33.873

包含

```
require_once('../../../wp-config.php'); 
```

为我工作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-26T13:32:42.460

尝试这个..

```
<?php
global $wpdb;

$wpdb->insert( $table_name, array( 'album' => "$_POST['album']", 'artist' => "$_POST['artist']" ) );
?> 
```

前任 ：

```
<?php
global $wpdb;

$wpdb->insert($table_name , array('chart_name' => "Line Chart" ,'chart_type' => "trends",'status' => 0));

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T10:42:47.250

您现在可能已经想到了这一点，但没有人在这里解决它。您的示例代码在第三个参数（第二个数组）中有“$s”，但这应该是“%s”，因为它用于值格式。WP Codex 说 [ [http://codex.wordpress.org/Class_Reference/wpdb]](http://codex.wordpress.org/Class_Reference/wpdb])这个格式参数 $wpdb->insert() 是可选的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-19T11:37:18.533

根据 DB 表创建数组。然后使用 WP insert 。

```
 global $wpdb;
 $order = [
            'product_id' =>'1',
            'discount' => '1',
            'total' => '1',
            'status' => '1',
            'payment_method' => '1',
            'payment_reference' => '1',
            'sold_by' => '1'
        ];

$wpdb->insert('DB_TABLE_NAME', $order ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-19T07:47:01.707

```
 $global $wpdb;      
  $table_name1 = $wpdb->prefix.'php_crud';  

  $data_insert= array(                      
                    'uname1' => $uname1,
                    'uemail1' => $uemail1,
                    'upass1' => $upass1,
                    'language1' => $language1,
                    'gender1' => $gender1,
                    'ustate1' => $ustate1,
                    'file1' => $finalimg
                    );
 $form_insert1=$wpdb->insert($table_name1,$data_insert);
 if($form_insert1)
 {
    echo "<div class='container' style{ color:red;} >Form 
    Submitted Successfully<div>";   
}
else
{
    echo "ERROR";
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-09-18T12:51:02.033

我认为您的 sql 字符串中有 2 个错误。

认为它应该是`$table_name`应该连接的变量

```
$sql = "CREATE TABLE" . $table_name . "(
id mediumint(9) AUTO_INCREMENT,
album VARCHAR(50),
artist VARCHAR(50),
PRIMARY  KEY (id)
)"; 
```

并在最后一行删除`;`。

# griffon - 如何在 Griffon 中访问配置

> ID：11205933
> 
> 赞同：1
> 
> 时间：2012-06-26T11:02:26.603
> 
> 标签：griffon

我对 Griffon 完全陌生，有一个简单的问题，我很惊讶我找不到答案......

如何访问我`Config.groovy`在服务中定义的每个环境设置。

```
environments {
    development {
        awserver.url = "http://localhost:8080/app"
    }

    production {
        awserver.url = "xxx"
    }
} 
```

我尝试注入`griffonApplication`（类似于 grails）并使用 griffonApplication.config，但似乎没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:30:06.913

环境设置会自动合并到应用程序的配置中。服务（与任何其他 GriffonArtifact 一样）具有名称为“app”的 GriffonApplication 属性，因此以下内容应该有效

```
class SampleService {
    def serviceMethod() {
        URL url = app.config.awserver.url.toURL()
        // do something with url
    }
} 
```

# c# - 多个连接，会话状态

> ID：11205934
> 
> 赞同：1
> 
> 时间：2012-06-26T11:02:43.037
> 
> 标签：c#, .net, oracle

我的目标是：

*   1 个持久的数据库连接和事务，用于插入/更新数据，并且可以在所有工作完成后提交或回滚

*   “随意”打开不相关的连接，这些连接不与持久连接共享会话状态——这意味着它们“看到”旧数据。这些连接只需要读，不需要写。

我尝试打开一个全新的连接，但它看到了持久连接所做的更改。这有可能实现吗？

注意：我对所有连接使用相同的 Oracle 用户名/密码。

注意 2：Toad（Oracle DB 软件）在提交之前不会“看到”持久连接所做的更改。如果它们被回滚，它们不会出现在数据库中，当它们被提交时，它们会出现。这部分工作正常，只是从我的应用程序打开的其他连接在提交之前看到它们。

这是我的连接的代码，它看到了它不应该看到的变化：

```
using (OracleConnection readConnection = new 
       OracleConnection(Settings.OracleConnectionString))
{
    readConnection.Open();

    using (OracleCommand command = new OracleCommand(lastOracleRowQuery, 
                                                     readConnection))
    {
        using (OracleDataReader reader = command.ExecuteReader())
        {
            if (reader.Read())
            {
                for (int i = 0; i < reader.FieldCount; i++)
                    compareValues.Add(reader.IsDBNull(i) ? 
                        null : 
                        reader.GetValue(i));
            }
        }
    }
} 
```

当有另一个 OracleConnection 打开并且使用该连接的事务时会发生这种情况。但是， readConnection 不应该完全不相关吗？

此读取的结果给出了在 Toad 中同时使用相同查询时不会出现的结果。

**解决了**

显然，**即使创建表失败，Oracle 也会在“CREATE TABLE”上提交会话，什么也不做并抛出异常**。我没想到这种行为，所以这让我感到困惑。当我把所有的表格创建放在开始时，一切都开始工作了。在我的测试过程中实际上没有创建任何表，所以我认为这不是问题，但是当我清理代码并将它们移到开始时，一切都自行修复了。

不过，我仍然不明白蟾蜍发生了什么。我可能弄错了什么。或者还有更多我不知道的错误。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:44:32.607

如果您使用 System.Transaction.TransactionScope，则在范围内创建的所有连接都将被视为单个事务，因此由持久连接创建的数据将对读取连接可见。

您应该在当前范围内创建一个新的 TransactionScope，其范围选项为 TransactionScopeOption.Suppress，在该范围内创建读取连接并在该新范围内执行您的读取操作。您的代码将如下所示。

```
//Outer Transaction        
using (TransactionScope t = new TransactionScope())
{
        //Create persistence connection and command
        // Execute persistence commands
        //Inner scope to suppress the outer transaction
    using (TransactionScope t1 = new TransactionScope(TransactionScopeOption.Suppress))
    {
        //create read connection
        // Execute read operation
    }
    //continue with write operation
} 
```

# localhost - DotNetNuke 6 - 将托管站点移动到本地 PC 后出现登录 404 错误

> ID：11205935
> 
> 赞同：1
> 
> 时间：2012-06-26T11:02:51.100
> 
> 标签：localhost, dotnetnuke, transfer

全部，

我已将托管的 dnn 6 站点移至本地 PC。在本地它可以很好地拉起并显示主页，我可以使用菜单链接并很好地过渡到各个页面。但是，当我单击登录时，找不到 404 页面。我正在使用自定义登录页面，无法弄清楚如何在本地解决此问题。基本上，我在托管站点上设置了一个自定义登录页面以确保安全，因此我可以通过 https 安全登录。我在自定义登录页面上将 is secure 设置为 true 并将帐户登录控制在其上。我认为这可能与我在本地主机上遇到的 404 错误有关，但无法弄清楚。

有人能给我一些关于如何让这个自定义安全登录页面在我的电脑上本地工作的建议吗？我正在运行 Windows 7 和 iis 7.5。我的 localhost/MySite 别名工作正常 - 我可以打开主页、单击本地链接等。这只是自定义登录页面在本地给我一个 404 错误。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T00:27:03.977

想象一下，问题是您的登录页面正在通过端口 443 访问您的本地 Web 服务器以进行 SSL，并且您的网站未配置为响应该 https 请求。

您可以在本地做的一件事就是设置一个自签名证书。

只需 Google 创建一个自签名 SSL 证书 IIS 7.5，您就会发现很多示例。

# ios5 - 目标c问题

> ID：11205947
> 
> 赞同：0
> 
> 时间：2012-06-26T11:04:01.860
> 
> 标签：ios5

我收到此错误“没有设置方法'setOrgin：'用于分配给属性”

```
Rectangle *r =[[Rectangle alloc]init];
XYpoint *p =[[XYpoint alloc]init];
[p setXY : 100 : 300];
[r setWH: 6 : 8];
r.orgin =p;
NSLog(@"Width and height is %i and %i", r.width, r.height);
NSLog(@"Origin is at %i and %i", r.orgin.x, r.orgin.y);
NSLog(@"Area and Peri are %i and %i", [r area], [r perimeter]); 
```

请在这件事上给予我帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:08:09.590

这可能是一个错字。你有'orgin'而不是'origin' [缺少'i']（我相信这是你`Rectangle`班级的一个属性）。还要注意，像这样的方法`setXY::`（尽管它们是有效的）在 Objective-C 世界中被认为是糟糕的编程风格。这种方法签名的更常见模式是：

```
setX:andY: 
```

但实际上这是你的电话...

# python - 在python中，如何序列化包含函数对象的对象并返回？

> ID：11205949
> 
> 赞同：1
> 
> 时间：2012-06-26T11:04:10.433
> 
> 标签：python, function, object, serialization

假设我有一个字典，其中包含对函数和其他一些元素的引用，例如：

```
mydict={'a':1.0,'b':7.89,'c':<function mylib.sum>} 
```

有没有办法序列化这个，即转换成一个可以保存在某个地方的字符串，然后转换回一个字典，正确地包括函数引用？

我尝试使用 cPickle，但它明确不允许函数对象。如果我这样做，它会起作用

```
eval(str(mydict).replace('<function mylib.sum>','mylib.sum')) 
```

但我不确定如何概括这一点。

谢谢

# shell - 如何在shell中逐行读取变量时验证行以数字开头

> ID：11205954
> 
> 赞同：0
> 
> 时间：2012-06-26T11:04:19.590
> 
> 标签：shell

我在一个包含多行的变量中获得了两个字符串之间的内容。我想检查每一行是否以数字开头，如果是，我将增加一个计数器，并且在该数字之后和下一个数字之前还需要字符串。假设我有一个变量 $line ，其中包含：

```
1\. Create
    create a volume.
2\. destroy 
      destroy a volume. 
```

等等。我想计算 var1 中的 10 个操作，var2 中的数字后的字符串和 var3 中的创建、销毁（依此类推）后的文本。如何在 shell 脚本中处理。提前致谢

添加代码：

```
line=$(sed -n '/Description/,/properties/p'    readme.txt)
echo "$line"

sed -n -e '/^[0-9]/{s/\([0-9]*\).*/\1/;h;n;s/^ *//;H;x;s/\n/ /p;d;}' <<< "$line"
operations=0
while read -r n str ;
do
    let operations+=1
    printf '%d, %d, %s\n' "$operations" "$n" "$str"
done < <(sed -n -e '/^[0-9]/{s/\([0-9]*\).*/\1/;h;n;s/^ *//;H;x;s/\n/ /;p;d;}'  <<<"$line")

printf "Opertions = %d\n' "$operations"
done 
```

其中 $line 包含 Description 和我必须执行所需操作的属性之间的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T11:27:20.260

如果我对您的理解正确，那么您想要这样的东西（请注意，我假设您正在使用`bash`以下某些东西，如果不是这种情况，则必须对其进行一些修改）。

首先，获取项目符号编号加上下一行的字符串。一点点`sed`就可以了。

```
sed -n -e '/^[0-9]/{s/\([0-9]*\).*/\1/;h;n;s/^ *//;H;x;s/\n/ /p;d;}' <<<"$line" 
```

接下来我们只需要读取行数，计算行数并将它们存储在变量中。

```
operations=0
while read -r n str ; do
    let operations+=1
    printf '%d, %d, %s\n' "$operations" "$n" "$str"
done < <(sed -n -e '/^[0-9]/{s/\([0-9]*\).*/\1/;h;n;s/^ *//;H;x;s/\n/ /;p;d;}' <<<"$line")

printf 'Opertions = %d\n' "$operations" 
```

在每个循环`n`中是来自项目符号的数字，`str`是来自下一行的字符串。

# javascript - jQuery复选框的更改和单击事件之间的区别

> ID：11205957
> 
> 赞同：31
> 
> 时间：2012-06-26T11:04:29.013
> 
> 标签：javascript, jquery, checkbox, onchange

正如标题所示，我想知道复选框的事件`change`和`click`事件之间的区别（在 jQuery 中）

我已经阅读了这个答案[.click 和 .change on a checkbox 有什么区别](https://stackoverflow.com/questions/5575338/what-the-difference-between-click-and-change-on-a-checkbox)

但是，它对我不起作用。`change`即使我在没有失去焦点的情况下击中空间也会触发。

这是一个[小提琴演示](http://jsfiddle.net/8RFGn/)

两者似乎都在工作。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-06-28T19:24:01.247

根据 W3C，该`onclick`事件由键盘触发以实现可访问性目的：

[**SCR35：通过使用锚点和按钮的 onclick 事件使操作键盘可访问**](http://www.w3.org/TR/WCAG20-TECHS/SCR35)

为了给不使用鼠标的用户提供更好的用户体验，已经开发了浏览器来触发`onclick`事件，即使*点击*是通过键盘发生的。

因此，`click`即使使用键盘的空格键*单击复选框，jQuery 的事件也会触发。*`change`显然，每次复选框的状态更改时都会触发。

复选框恰好是`change`和`click`可互换的特殊情况，因为您不能在不触发的`change`情况下触发事件`click`。

当然，这条规则的例外是如果您要使用 javascript 手动更改复选框，例如：

```
/* this would check the checkbox without firing either 'change' or 'click' */
$('#someCheckbox').prop('checked',true);

/* this would fire 'change', but not 'click'. Note, however, that this
   does not change the checkbox, as 'change()' is only the function that
   is fired when the checkbox changes, it is not the function that
   does the changing  */
$('#someCheckbox').trigger('change');

/* this would fire 'click', which by default change state of checkbox and automatically triggers 'change' */
$('#someCheckbox').trigger('click'); 
```

以下是这些不同操作的演示：http: [//jsfiddle.net/jackwanders/MPTxk/1/](http://jsfiddle.net/jackwanders/MPTxk/1/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-03T20:44:58.137

主要区别：当您首先单击/点击焦点复选框上的空格时，`click`事件触发，没有任何变化。此时，您仍然可以阻止默认操作（使用`event.preventDefault()`）来切换该`checked`复选框的状态，并触发`change`事件（没有默认操作）。

在某些浏览器中，更改事件只会`blur`在`click`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-26T11:08:59.050

我猜想当复选框更改时会触发更改（即使您没有单击它）。例如，如果您通过其他功能更改复选框的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:22:58.060

我经历的不同是：

```
var $check = $(':checkbox');
$checkbox.checked = true;
$checkbox.click( function() {
    alert(this.checked); // true
}).change( function() {
    alert(this.checked); // false
}); 
```

所以点击状态还没有改变，改变它已经......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T11:09:53.193

您可以在不单击的情况下选中或取消选中复选框，使用键盘（制表符和空格键）这将更改语句但不单击。恕我直言

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-26T11:13:40.780

如果这没有帮助，请告诉我，我将删除我的帖子：

`Change`：[http](http://api.jquery.com/change/)`state` ://api.jquery.com/change/ - 我认为当元素的 更改（即未单击但更改）时会触发更改事件。**复选框**有选中和未选中状态。

`Click`：单击事件是当您单击元素时，复选框的状态无关紧要。

就像在伪代码中

```
if checkbox state is checked

    alert(Hulk is awesome);

if checkbox is click every time

    alert(Ironman is alright); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-03T13:24:51.700

当复选框状态发生更改时，将触发更改事件，无论是通过在复选框聚焦时按下空格，还是触发更改事件或单击而发生的任何事件，因为单击事件仅在我们通过鼠标单击单击复选框时才被触发，但在如果已指定更改事件，则在单击之前的那个时间它也会运行，然后执行单击事件。

在这里您可以看到已在垃圾箱上完成了清晰的脚本：http: [//codebins.com/codes/home/4ldqpbu](http://codebins.com/codes/home/4ldqpbu)

# azure - Windows Azure 中的 Daytona 即服务？

> ID：11205958
> 
> 赞同：2
> 
> 时间：2012-06-26T11:04:29.887
> 
> 标签：azure

Windows Azure 服务是否包含供客户端使用 MapReduce 的服务？例如，已经安装了客户可以购买使用的 MapReduce 框架 (Daytona) 的云服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:38:36.317

是的，Windows Azure 当前允许您在 Hadoop 中使用 MapReduce，但目前这是一个私人开发人员预览版。如果您有兴趣，可以随时尝试在这里注册：

[https://www.hadooponazure.com/](https://www.hadooponazure.com/)

Benjamin 写了一篇博文，描述了他如何使用开发者预览版分析超过 1TB 的 IIS 日志。阅读此博客文章以查看 Azure 上的 Hadoop，即使您无权访问预览版：[Analyzing 1 TB of IIS logs with Hadoop Map/Reduce on Azure with JavaScript](http://blogs.msdn.com/b/benjguin/archive/2012/02/09/analyzing-1-tb-of-iis-logs-with-hadoop-map-reduce-on-azure-with-javascript-analyse-d-1-to-de-journaux-iis-avec-hadoop-map-reduce-en-javascript.aspx)

# c - 在 C 下的 Linux ubuntu 中以类似“Jun 19 10:08”的格式打印文件的详细信息

> ID：11205961
> 
> 赞同：1
> 
> 时间：2012-06-26T11:04:54.050
> 
> 标签：c, linux, file, ubuntu, io

我正在尝试展示`Ubuntu`using下的任何文件的详细信息`C`。

例如，如果我正在寻找一个名为 的文件/文件夹`12`，我会得到：

```
a@ubuntu:~/Desktop$ ./exer4 . 12
drwxrwxr-x 3 1000 1000 4096 2012-06-19 10:08 
drwxrwxr-x 3 1000 1000 4096 2012-06-16 14:09 
```

但我想这样显示它：

```
a@ubuntu:~/Desktop$ find . -name 12 -exec ls \-lnd {} \; | sort
drwxrwxr-x 3 1000 1000 4096 Jun 16 14:09 
drwxrwxr-x 3 1000 1000 4096 Jun 19 10:08 
```

意思是，我想把这个：改成`2012-06-19 10:08`那个`Jun 19 10:08`，或者这个

`2012-06-16 14:09`到那个 `Jun 16 14:09`。

我正在使用以下方法来呈现任何文件的详细信息：

```
void displayFileProperties(struct stat* file,char*  outputProperties)
{

    char partOfOutput[BUFFER];
    mode_t mode = file->st_mode;
    struct tm* time;
    int month, day, hour, min;

    // First take care of the file details , e.g permission

    // this is a regular file
    if (S_ISREG(mode)) strcat(outputProperties,"-");

    // the is a pipe file
    else if (S_ISFIFO(mode)) strcat(outputProperties,"p");

    // for a link file
    else if (S_ISLNK(mode)) strcat(outputProperties,"l");

    // for a directory file
    else if (S_ISDIR(mode)) strcat(outputProperties,"d");

    // this is for a socket file
    else if (S_ISSOCK(mode)) strcat(outputProperties,"s");

    // for a block device file
    else if (S_ISBLK(mode)) strcat(outputProperties,"b");

    // and this is one for a character device file
    else if (S_ISCHR(mode)) strcat(outputProperties,"c");

    // Permissions

    (mode & S_IRUSR)? strcat(outputProperties,"r"): strcat(outputProperties,"-");
    (mode & S_IWUSR)? strcat(outputProperties,"w"): strcat(outputProperties,"-");
    (mode & S_IXUSR)? strcat(outputProperties,"x"): strcat(outputProperties,"-");

    // Group permission

    (mode & S_IRGRP) ?strcat(outputProperties,"r"):strcat(outputProperties,"-");
    (mode & S_IWGRP) ?strcat(outputProperties,"w"):strcat(outputProperties,"-");
    (mode & S_IXGRP) ?strcat(outputProperties,"x"):strcat(outputProperties,"-");

    (mode & S_IROTH)? strcat(outputProperties,"r"):strcat(outputProperties,"-");
    (mode & S_IWOTH) ?strcat(outputProperties,"w"):strcat(outputProperties,"-");
    (mode & S_IXOTH) ?strcat(outputProperties,"x"):strcat(outputProperties,"-");

    //print other information

    //print num of hard link
    sprintf(partOfOutput," %d ",file->st_nlink);
    strcat(outputProperties,partOfOutput);

    //print num of hard link
    sprintf(partOfOutput,"%d ",file->st_uid);
    strcat(outputProperties,partOfOutput);

    //print num of hard link
    sprintf(partOfOutput,"%d ",file->st_gid);
    strcat(outputProperties,partOfOutput);

    //print num of hard link
    sprintf(partOfOutput,"%d ",(int) file->st_size);
    strcat(outputProperties,partOfOutput);

    // From here take care of the time properties

    time = localtime(&file->st_mtim);

    month = time->tm_mon + 1;
    day = time->tm_mday;
    hour = time->tm_hour;
    min = time->tm_min;

    sprintf(partOfOutput,"%d-",time->tm_year + 1900);
    strcat(outputProperties,partOfOutput);

    if(month < 10)
        strcat(outputProperties,"0");

    sprintf(partOfOutput,"%d-",month);
    strcat(outputProperties,partOfOutput);

    if(day < 10)
        strcat(outputProperties,"0");

    sprintf(partOfOutput,"%d ",day);
    strcat(outputProperties,partOfOutput);

    if(hour < 10)
        strcat(outputProperties,"0");

    sprintf(partOfOutput,"%d:",hour);
    strcat(outputProperties,partOfOutput);

    if(min < 10)
      strcat(outputProperties,"0");

    sprintf(partOfOutput,"%d ",min);
    strcat(outputProperties,partOfOutput);

} 
```

我怎样才能做到这一点 ？我几乎可以肯定它需要一些小的更改，但是我在网上搜索过，但没有发现任何可以澄清这一点的东西。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:10:12.630

该`strftime()`功能在日期格式方面非常灵活。[http://linux.die.net/man/3/strftime](http://linux.die.net/man/3/strftime)

```
strftime(partOfOutput, BUFFER, "%b %d %H:%M", time); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-26T11:13:25.047

你可以使用`strftime`：

```
time = localtime(&file->st_mtim);
strftime(partOfOutput, BUFFER, "%b %d %H:%M", time); 
```

检查[文档以获取`strftime`](http://linux.die.net/man/3/strftime). 它可用于解决日期和时间格式的大多数问题。

# jquery - 如何在ajax中访问json数组元素

> ID：11205964
> 
> 赞同：0
> 
> 时间：2012-06-26T11:05:12.477
> 
> 标签：jquery, ajax, arrays

我在访问 json 数组元素时遇到问题。以下是我在 ajax 中使用 POST 方法发送数据时的响应。我如何只能访问中间名，来自响应。请帮我

```
{
"class": "MyF",
 "result": {
 "authToken": "abcd",
 "authTokens": [
 {
   "name": "ABC",
    "class": "AuthToken"
 }
],
"class": "User",
"middlename": "xyz",
"lastname": "abc",
},
"result": "1234"
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T11:07:00.447

如果你使用 jQuery，你可以这样做

```
var obj = jQuery.parseJSON('jsonstring'); 
```

然后你可以通过

```
obj.middlename 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:08:37.420

使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)

在你的情况下

```
var obj = jQuery.parseJSON('{
"class": "MyF",
 "result": {
 "authToken": "abcd",
 "authTokens": [
 {
   "name": "ABC",
    "class": "AuthToken"
 }
],
"class": "User",
"middlename": "xyz",
"lastname": "abc",
},
"result": "1234"
}'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T11:09:46.250

```
$.post('ajax/test.html', function(data) {
    var parsedData = $.parseJSON(data);
}); 
```

这将创建对象 JSON，您可以在他身上遍历。

# ruby-on-rails - 当表单上的字段不可用时，仍然可以编辑模型值吗？

> ID：11205965
> 
> 赞同：3
> 
> 时间：2012-06-26T11:05:19.807
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我不熟悉表单的工作方式。

**示例场景**

假设用户可以创建调查，但创建后无法编辑它们，只能向它们添加问题。这是通过使用调查上的编辑操作来完成的。

```
class Survey < ActiveRecord::Base
  has_many :questions
  accepts_nested_attributes_for :questions
end

class Question < ActiveRecord::Base
  belongs_to :survey
  belongs_to :user
end

# QuestionsController

def edit
  @survey = Survey.find(params[:id])
  @survey.questions.build
end

def update
  @survey = Survey.find(params[:id])
  @survey.update_attributes(params[:survey])
  redirect_to ...
end 
```

那么表格应该是：

```
<%= form_for @survey do |f| %>
  # No surveys fields on this form!

  <% f.fields_for :questions do |builder| %>
    <%= render "question_fields", :f => builder %>
  <% end %>

  <%= f.submit "Submit" %>
<% end %> 
```

现在，即使我希望调查的字段在创建后无法使用，这是否会使调查的值易受攻击或容易被黑客入侵？

一般来说呢？模型值不在表单上时是否仍可编辑？这背后的逻辑是什么，我怎么知道他们不能？

谢谢，刚入门的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:18:31.057

是的，这些属性仍然可以通过将它们作为参数提交到表单来进行编辑，即使您没有为它们提供字段。

为了防止这种情况，您可以[显式地保护属性](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_protected)（在以后的 Rails 版本中，这是默认设置）。在您的`Survey`模型中，添加

```
attr_protected :name # or whatever other attributes that model has 
```

这可以防止对这些属性进行批量分配，无论是创建还是更新。要允许创建，您必须在`create`您的操作中明确分配这些属性`SurveyController`：

```
def create
  @survey = Survey.new # instead of Survey.new(params[:survey])
  @survey.name = params[:survey][:name]
  @survey.save 
  # etc
end 
```

编辑：

正如 blackbird07 指出的那样，更好的方法是将您希望允许对其进行批量分配的那些属性列入白名单，而不是此处描述的黑名单方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T11:19:37.027

简而言之：是的，可以使用 curl 之类的工具或通过使用浏览器开发人员工具编辑 HTML 表单，通过精心设计的 POST 请求来编辑它们。原因是您`update_attributes`用于进行更新，这将更新 params 参数中提供的所有属性。这称为批量分配。

建议您将要编辑的属性列入白名单：http: [//guides.rubyonrails.org/security.html#mass-assignment](http://guides.rubyonrails.org/security.html#mass-assignment)

此外，强烈建议您阅读这篇关于[“强参数：在控制器而不是模型中处理质量分配”的文章](http://weblog.rubyonrails.org/2012/3/21/strong-parameters/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T04:32:59.070

您还可以通过放置来防止批量分配

```
config.active_record.whitelist_attributes = true 
```

在你的 config/application.rb

现在所有的属性都必须明确标记为可访问。它通过为您的应用程序中的所有模型创建一个空的属性白名单来实现这一点。

# ios - 如何创建具有多个键的 NSDictionary？

> ID：11205974
> 
> 赞同：8
> 
> 时间：2012-06-26T11:05:57.733
> 
> 标签：ios, objective-c, json, key, nsdictionary

我不确定我要问的是否实际上是`NSDictionary`具有多个键的，但是可以。

我想要做的是`NSDictionary`为我的数据创建一个键和值，然后将其转换为`JSON`格式。`JSON`格式看起来完全像这样：

```
{
    "eventData": {
        "eventDate": "Jun 13, 2012 12:00:00 AM",
        "eventLocation": {
            "latitude": 43.93838383,
            "longitude": -3.46
        },
        "text": "hjhj",
        "imageData": "raw data",
        "imageFormat": "JPEG",
        "expirationTime": 1339538400000
    },
    "type": "ELDIARIOMONTANES",
    "title": "accIDENTE"
} 
```

我只用过`NSDictionaries`这样的：

```
NSArray *keys = [NSArray arrayWithObjects:@"eventDate", @"eventLocation", @"latitude"  nil];
NSArray *objects = [NSArray arrayWithObjects:@"object1", @"object2", @"object3", nil]; 
dictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

但是上面的格式不全是key-value。所以我的问题是如何`NSDictionary`适应`JSON`格式？感谢您阅读我的帖子，如有任何困惑，请见谅。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-26T11:15:52.137

你可以有一个`NSDictionary`内部另一个`NSDictonary`：

```
NSDictionary *eventLocation = [NSDictionary dictionaryWithObjectsAndKeys:@"43.93838383",@"latitude",@"-3.46",@"latitude", nil];

NSMutableDictionary *eventData = [NSDictionary dictionaryWithObjectsAndKeys:eventLocation,@"eventLocation", nil];
[eventData setObject:@"Jun 13, 2012 12:00:00 AM" forKey:@"eventDate"];
[eventData setObject:@"hjhj" forKey:@"text"];
.
.
.
NSMutableDictionary *finalDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:eventData,@"eventData", nil];
[finalDictionary setObject:@"ELDIARIOMONTANES" forKey:@"type"];
[finalDictionary setObject:@"accIDENTE" forKey:@"title"]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-09-15T14:08:53.800

现在有了 Objective-C 文字，就有了一种更好、更简单、更简洁的方法来实现这一点。这是您使用这种新语法的确切字典：

```
NSDictionary *dictionary = @{
    @"eventData": @{
        @"eventDate": @"Jun 13, 2012 12:00:00 AM",
        @"eventLocation": @{
            @"latitude": @43.93838383,
            @"longitude": @-3.46
        },
        @"text": @"hjhj",
        @"imageData": @"raw data",
        @"imageFormat": @"JPEG",
        @"expirationTime": @1339538400000
    },
    @"type": @"ELDIARIOMONTANES",
    @"title": @"accIDENTE"
};

// Prints: "43.93838383"
NSLog(@"%@", dictionary[@"eventData"][@"eventLocation"][@"latitude"]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-09-02T10:20:17.957

**如何使用 NSDictionary 创建 NSArray 并访问对象？**

**... 创建 NSArray**

```
NSArray *studentkeys = [NSArray arrayWithObjects:@"studentName", @"studentBirthDate", @"studentCity", @"studentMobile"  nil];

NSArray *objects = [NSArray arrayWithObjects:@"Pravin", @"27/08/1990", @"Bhavnagar",@"7878007531", nil]; 
```

**...使用 NSDictionary 访问 NSArray 对象**

```
NSDictionary *dictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T11:13:36.800

这是结构：
您的根对象是`NSMutableDictionary`
`eventData`-`NSMutableDictionary`具有键和对象的对象的键：
->键`eventDate`对象`NSString`
->具有键和`eventLocation`对象`NSMutableDictionary`的键对象：
---->键`latitude`对象`NSNumber`
---->键`longitude`对象`NSNumber`
->键`text`对象`NSString`
- > key `imageData`object`NSString`后来转换为`NSData`
-> key `imageFormat`object `NSString`
-> key `expirationTime`object `NSNumber`
`type`key for object `NSString`
`title`key for object`NSString`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-28T04:03:31.660

如果你想要多个类别，你可以遵循这个格式

```
NSDictionary *jsonObject = @{
                           @"data1":@[
                              @{
                                @"title":@"A"

                                @"subData" : @[
                                @{
                                  @"title":@"aa"
                                 }]
                                }

                             ]
                         }; 
```

# uinavigationcontroller - IOS：CADisplay / UIScrollview 和导航控制器

> ID：11205978
> 
> 赞同：1
> 
> 时间：2012-06-26T11:06:08.247
> 
> 标签：uinavigationcontroller, uiscrollview, glkit, cadisplaylink

所以我已经设法让我可爱的 ​​GLKit 3D 菜单与 UIScrollview 一起工作，并且生活很好，直到我推到另一个视图控制器并回来。

所以完全平滑的运动，移动到下一个控制器并回来。UIScrollview 不能很好地反弹或流动？

每次滚动视图移动和停止时，CADisplay Link 都会初始化并且为零，这似乎工作正常，直到我推送到另一个控制器并返回。

随机地，如果我单击一个导致滚动视图移动并触发所有代码的项目，它就会重新启动。可悲的是，如果我尝试在视图上触发它确实出现它不会做同样的事情。

```
- (void)startDisplayLinkIfNeeded
{
    if (!self.displayLink) 
    {
        self.displayLink = [CADisplayLink displayLinkWithTarget:self.view selector:@selector(display)];
        [self.displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];
    }
}

- (void)stopDisplayLink
{
    if (self.displayLink)
    {
         [self.displayLink removeFromRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];

        [self.displayLink invalidate];
        self.displayLink = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T15:56:04.477

因此，经过一整天的尝试解决这个问题，它归结为

```
self.preferredFramesPerSecond = 60` 
```

如果我根据我所做的动态将其更改为 15 到 20 左右，那么整个问题就会消失。

# c#-4.0 - 在 C#.net 中将字符串转换为日期时间时出错

> ID：11205981
> 
> 赞同：0
> 
> 时间：2012-06-26T11:06:13.127
> 
> 标签：c#-4.0, datetime, date-format

在 C# 中将字符串转换为日期时出现错误。错误是：
`string is not valid datetime.`
下面是我用来将字符串转换为日期时间的代码。

```
string[] DateFormat = { "dd-MM-yyyy", "dd/MM/yyyy", "MM-dd-yyyy", "MM/dd/yyyy" ,"dd-MMM-yy"};
            VendorSinceDate = DateTime.ParseExact(dtresult.Rows[0]["VendorSinceDate"].ToString(),DateFormat,System.Globalization.CultureInfo.InvariantCulture,System.Globalization.DateTimeStyles.None);

//dtresult.Rows[0]["VendorSinceDate"].ToString()="06-Jun-12 12:00:00 AM"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:17:53.337

您可能的 DateFormats 都不包含时间，但您尝试转换的字符串包含时间。

您需要添加一个匹配的 DateFormat，例如`dd-MMM-yy hh:mm:ss tt`

# android - 你好 MapView，移动一个标记

> ID：11205987
> 
> 赞同：1
> 
> 时间：2012-06-26T11:06:22.437
> 
> 标签：android, overlay, android-mapview

我一直在这个[链接](https://developers.google.com/maps/documentation/android/hello-mapview)上查看**Hello MapView**，但它已经关闭了几天，所以我会在这里问我的问题：

我添加了一个看起来像标记的覆盖项。我想根据我更新的位置移动标记。有什么方法可以定位现有标记并更新位置，还是我需要删除它并重新绘制它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:28:54.560

您可以在函数中删除和重绘`onLocationChanged()`，但更有效的方法是使用`MyLocationOverlay`如本[例](http://www.vogella.com/articles/AndroidLocationAPI/article.html#maps_mylocation)所示。

# ios - IOS游戏中心成就上传

> ID：11205998
> 
> 赞同：17
> 
> 时间：2012-06-26T11:06:53.280
> 
> 标签：ios, app-store-connect, game-center, achievements

有人知道在 iTunes Connect 中将所有成就上传到游戏中心的方法吗？

我在 10 种语言中取得了大约 30 项成就。要从我的源文件中获取数据到 iTunesConnect 中，需要进行大量的点击、剪切和粘贴操作。我注意到有一个新功能可以在应用购买中上传。成就有类似的东西吗？理想情况下会有一个不错的 XML 上传。我在做梦吗？

谢谢，

院长。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-04T12:34:47.323

有一个名为“iTunes Connect Transporter”或“Transporter”的命令行工具可以做到这一点。要开始登录 iTunes Connect，请转到“管理您的应用程序”，底部有几个链接。在“交付您的应用程序”下，您需要 PDF 文件“ **Transporter 用户指南**”（下载 Transporter 的链接在此 PDF 中）和“**应用程序元数据规范**”。使用 Transporter，您可以管理 Game-Center 排行榜和成就，以及各种应用内购买。

为了让您开始尝试`iTMSTransporter -m lookupMetadata ...`（查看指南）下载现有的 IAP、排行榜和成就，并查看您必须编辑的 XML 文件的结构（您使用 Xcode 编辑器编辑它）。所有内容都将下载到一个 .itmsp 文件中，该文件只是一个包（iTunes 包）。您可以通过 ctrl 单击文件并选择“显示包的内容”来进入此包。然后你可以在上传之前添加、编辑这个包的所有内容。

另外，我建议您运行`iTMSTransporter -m diagnostic`以查看您是否打开了所需的端口。

我用过它，效果很好。第一次配置一个脚本来创建 XML 文件需要很多时间，但从长远来看，您可以节省很多时间（而且可能您犯的错误也更少）。

**更新：** 自 2013 年 6 月以来，iTMSTrasporter 添加了上传**应用元数据**（本地化标题、描述、新增内容、关键字和屏幕截图，以及领土权利、定价和可用性）、**应用内购买**信息和屏幕截图的功能，**托管内容**（我没有使用过）和**间隔定价**（针对应用程序本身和 IAP 产品）。这使得 iTMSTrasporter 更加强大。

顺便说一句，当您介绍**关键字**时，您只能使用 100 个字符，并且您可以通过不使用空格来节省几个字符。因此，您可以输入“keyword1,keyword2,keyword3,...”而不是：“keyword1,keyword2,keyword3,...”并且它可以工作。

最后，我遇到的一个小问题，如果你通过iTunes Connect手动创建一些Achievements或Leaderboards，然后尝试用iTMSTransporter重新加载或更新一些Achievements，它会报错。但是，如果您使用 iTMSTransporter 创建它们，那么您可以根据需要多次更新它们而不会出现任何问题。

我希望它有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-27T16:14:14.653

要批量上传或验证排行榜和成就，您必须使用安装在您的 Xcode 包中的命令行工具 iTMSTransporter：

```
/Applications/Xcode.app/Contents/Applications/Application Loader.app/Contents/MacOS/itms/ bin 
```

您必须转到 Terminal 中安装 Transporter 的目录并分别使用各种命令。要使用 Transporter，您必须拥有一个具有管理员或技术角色的 iTunes Connect 帐户。

警告！您必须在 Apple 指南中未提及的命令之前使用“./”，例如：

```
./iTMSTransporter ... 
```

下载 .itmsp 包后，使用“显示包内容”打开它并找到 metadata.xml 文件，您可以对其进行编辑并上传回来。

如果您有较早的成就或排行榜，您必须离开，因为它们只是附加与先前帖子相反的新成就！

诀窍来自图片。如果您有图片，则必须将它们附加到元数据文件旁边的 itms 包中，但您必须在元数据文件中包含名称等。最好在 iTunes Connect 上手动制作一项成就或排行榜，然后再次下载 itms 包并复制这些数据。注意不要更改原始数据中的任何内容，只需附加新信息即可。

它运行良好，但您必须等到服务器传播新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-03T04:24:04.070

我也在处理同样的问题，找了一会儿，似乎没有什么好的解决方案，除了让自己无聊到死剪切和粘贴。随着应用内购买的修复，我想这个问题的修复很快就会出现。