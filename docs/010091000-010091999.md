# StackOverflow 问答 10091000-10091999

# c# - C# 使用字符串来识别/使用文本框？

> ID：10091004
> 
> 赞同：0
> 
> 时间：2012-04-10T14:49:27.253
> 
> 标签：c#, textbox

我在 6 行中有 6 个文本框，总共 36 个。第一行，第一框称为 L1N1，第一行，第二框称为 L1N2 等。我想使用字符串为这些文本框动态分配值...这可以在 C# 中完成吗？例如

```
 private void Generate_Click(object sender, EventArgs e)
    {
        int[,] numbers = new int[6, 6];
        int lin = 0;
        while (lin < 6)
        {
            lin++;
            int num = 0;
            while (num < 6)
            {
                num++;
                Random random = new Random();
                int randomNum = random.Next(1, 45);
                "L" + lin + "N" + num /* <--here is my string (L1N1) i want to 
                                          set my textbox(L1N1).text to a value
                                          randomNum!*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:55:53.473

当然，WebPage 为您提供了一个不错的 FindControl：

```
TextBox tx = FindControl("L" + lin + "N" + num) as TextBox; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:57:07.720

```
List<TextBox> listOfTextBoxes = new List<TextBox>();
...initialization of list.... 
foreach(TextBox tb in listOfTextBoxes)
{
Random r = new Random();
tb.Text = r.Next(1,45).ToString();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T14:58:48.157

您不能使用 FindControl API 并设置 .text 属性吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:00:46.967

```
private void formMain_Load(object sender, EventArgs e)
{
     this.Controls.Find("Your Concatenated ID of control ex: L1N2", true);
} 
```

或者

```
foreach(var cont in form.Controls)
{
     if(cont is TextBox) dosmth;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:04:21.023

Form.Controls 有一个 FindByName 方法，因此您可以构建控件名称并使用它。虽然它并不聪明。

就我个人而言，我要么从 TextBox[6,6] 以编程方式创建控件，要么将它们的引用从 Form.Controls 推送到数组 [6,6] 中作为一次性的。

一旦你有了这个数组，你就可以找到它的各种用途。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T15:02:20.073

如果是webform：（只需找出表单索引）

> ```
>  protected void Generate_Click(object sender, EventArgs e)
>     {
>         foreach(Control item in Page.Controls[3].Controls)
>         {
>             if(item.GetType().ToString().ToLower().Contains("textbox"))
>             {
>                 Random rnd = new Random();
>                 TextBox txt = (TextBox)item;
>                 System.Threading.Thread.Sleep(20);
>                 txt.Text = rnd.Next(1, 45).ToString();
>             }
>         }
>     } 
> ```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-04-10T15:00:04.893

我赞同 Jon Skeet 的观点。如果您希望能够通过某些行/列系统定位控件，最简单的方法是将控件本身放入一个集合中，以便以类似的方式对它们进行索引：

```
var textboxes = new TextBox[6][];
textboxes[0] = new TextBox[]{txtL1N1, txtL1N2, txtL1N3, txtL1N4, txtL1N5, txtL1N6};
//create the rest of the "lines" of TextBoxes similarly.

//now you can reference the TextBox at Line X, number Y like this:
textboxes[X-1][Y-1].Text = randomNum.ToString(); 
```

现在，如果您真的想通过某个字符串值访问这些文本框，您可以使用 Tag 属性，这是大多数控件的通用属性。您还可以根据某些系统命名所有文本框。然后，一点 Linq 就可以得到你想要的文本框：

```
this.Controls.OfType<TextBox>()
   .Single(t=>t.Tag.ToString() == "L1N1").Text = randomNum.ToString(); 
```

但是，理解这将非常缓慢；每次需要时，您都会搜索表单上存在的所有控件的完整集合。索引会快得多。

# java - Spring WebFlow 不会在状态转换时触发评估表达式

> ID：10091014
> 
> 赞同：0
> 
> 时间：2012-04-10T14:50:04.547
> 
> 标签：java, spring, viewstate, evaluate, spring-webflow-2

我正在使用 Spring 3.x 和 WebFlow 2.0。我正在尝试使用新的事件 ID 提交表单。

```
<view-state id="projectSearch"   view="project.projectSearch" model="searchCommand">

    <transition on="search" to="projectSearch" bind="true"  >
    <evaluate expression="formAction.findProjects(flowRequestContext, searchCommand)"/>
    </transition>

 </view-state>

and 

public Event findProjects(RequestContext context, SearchCommand command) throws Exception
{
   return success();
} 
```

在提交表单时，我将事件键设置为搜索。使用上述配置，我没有收到任何对 findProject() 方法的请求。但是，如果我从视图状态中删除 model="" 属性，我会收到该方法收到的请求。在这种情况下，我没有得到表单值。

任何人都可以请指导我正确的路径。

谢谢， 维沙尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T17:00:41.287

似乎是 jQuery for submit 导致了问题。如果我评论 jQuery 提交，它就可以工作。我更改了几行并删除了表单提交的 javascript 需求。

# java - 如何将 Swing GUI 中的数据合并到 XML 模板文件？

> ID：10091015
> 
> 赞同：-4
> 
> 时间：2012-04-10T14:50:05.903
> 
> 标签：java, xml, eclipse, swing, templates

我编写了一个 Swing GUI，它是一个基于文本区域的 GUI。当用户将数据输入 GUI 时，它应该能够在适当的位置将这些数据合并到单独的 XML 模板文件中。我怎样才能做到这一点？

请让我知道步骤以及用于执行此操作的开源工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:18:18.970

I used javax.xml to build a class to generate the XML from a `Document`.

```
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.OutputStreamWriter;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.TransformerFactoryConfigurationError;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Document;
import org.w3c.dom.Element;

import com.ggl.mapping.model.WorkMap;

public class GenerateXML {

    public static final String DISPLAY_DEGREES = "display_degrees";

    WorkMap workMap;

    public GenerateXML(WorkMap workMap) {
        this.workMap = workMap;
    }

    public void execute() throws ParserConfigurationException,
            TransformerConfigurationException, TransformerException,
            TransformerFactoryConfigurationError, UnsupportedEncodingException, 
            FileNotFoundException {
        DocumentBuilderFactory dbInstance = DocumentBuilderFactory
                .newInstance();
        DocumentBuilder builder = dbInstance.newDocumentBuilder();
        Document document = builder.newDocument();

        Element layout = document.createElement("layout");
        layout.setAttribute(DISPLAY_DEGREES,
                new Boolean(workMap.isDisplayDegrees()).toString());
        document.appendChild(layout);

        workMap.toXMLString(document, layout);

        TransformerFactory tfInstance = TransformerFactory.newInstance();
        Transformer transformer = tfInstance.newTransformer();
        DOMSource source = new DOMSource(document);
        String fileName = workMap.getFullSaveFileName();
        StreamResult result = new StreamResult(new OutputStreamWriter(
                new FileOutputStream(fileName), "UTF-8"));
        transformer.setOutputProperty(OutputKeys.STANDALONE, "yes");
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        transformer.setOutputProperty(
                "{http://xml.apache.org/xslt}indent-amount", "4");
        transformer.transform(source, result);
    }

} 
```

Then, in each of my model classes, I had a `toXMLString` method.

```
public void toXMLString(Document document, Element layout) {
    for (EarthCoordinate earthCoordinate : earthCoordinateList) {
        Element coordinate = earthCoordinate.toXMLString(document);
        layout.appendChild(coordinate);
    }
} 
```

.

```
public Element toXMLString(Document document) {
    Element coordinateElement = document.createElement(COORDINATE);
    coordinateElement.setAttribute(LATITUDE, 
            getValueDegrees(getLatitude()));
    coordinateElement.setAttribute(LONGITUDE,
            getValueDegrees(getLongitude()));
    coordinateElement.setAttribute(TRACK_COORDINATE, new Boolean(
            isTrackCoordinate()).toString());

    if (!getDescription().equals("")) {
        Element descriptionElement = document.createElement(DESCRIPTION);
        descriptionElement.setTextContent(getDescription());
        coordinateElement.appendChild(descriptionElement);
    }

    return coordinateElement;
} 
```

# r - data.frame 中的字符串转换向量元素

> ID：10091019
> 
> 赞同：1
> 
> 时间：2012-04-10T14:50:28.717
> 
> 标签：r, dataframe

我有一个巨大的数据框`df`，在一列中有一个“年月”值，如下所示：“YYYYMM”。目前数据类型是数字。快照：

```
> df[[1]][1:10]
[1] 201001 201001 201001 201001 201001 201001 201001 201001 201001 201001
> str(df)
'data.frame':   2982393 obs. of  11 variables:
 $ YearMonth    : int  201001 201001 201001 201001 201001 201001 201001 201001 201001 201001 ...
 $ ... 
```

我想要的是将此值转换为“YYYY-MM”形式的字符串（最终转换为一个因子），以便能够将其与其他数据帧进行比较。

我正在努力寻找一种简单的方法来改变价值。

我尝试使用`as.Date`和`format`功能。但是由于这些值没有任何日期，因此它不适用于字符串。使用 Numerics（与数据框列相同）我什至遇到了其他问题。

```
> as.Date("201001", format = "%Y%m")
 [1] NA

> as.Date(201001, format = "%Y%m")
 Error in as.Date.numeric(201001, format = "%Y%m") : 
    'origin' must be supplied
> as.Date(df[[1]], format = "%Y%m")
 Error in as.Date.numeric(df[[1]], format = "%Y%m") : 
    'origin' must be supplied 
```

我只能转换一个值，使用`subset`和连接字符串。我写了下面的公式来处理一个元素：

```
transformString <- function( x ) { # x = value
    return ( paste(cbind(substring(x, 1, 4),"-",substring(x,5,6)), collapse = '') )
} 
```

问题：除了遍历所有元素之外，我没有找到一种简单的方法将该函数应用于 data.frame 的整个列：

```
transformStringVector <- function( x ) { # x = vector
    for(i in 1:length(x)) {
       x[i]<-transformString(x[i])
    }
    return ( x )
} 
```

这远非优雅且不利于性能。我尝试使用`apply`（见下文）和类似的东西，但遇到了错误......（我承认我并没有真正得到这个`apply`功能）

```
> temp <- apply(df[[1]], 1, transformString )
Error in apply(df[[1]], 1, transformString ) : 
  dim(X) must have a positive length 
```

在巨大的 data.frame 中，是否有人可以替代这种转换？或更笼统地说；将类似字符串的转换应用于 data.frame 中的元素的简单方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:05:41.040

如果您只是想将列值转换为指定格式的字符串并且不关心`date`格式，`substr()`并且`paste()`都将向量作为参数：

```
xx<-c(201011,201003,201002,201010,201009,201005,201001,201001,201001,201001)

paste(substr(xx,1,4),substr(xx,5,6),sep="-")
# [1] "2010-11" "2010-03" "2010-02" "2010-10" "2010-09" "2010-05" "2010-01"
# [8] "2010-01" "2010-01" "2010-01" 
```

这样，您不必使用`apply()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T14:58:02.520

之所以

```
> as.Date("201001", format = "%Y%m")
 [1] NA 
```

不起作用，是 R 日期需要一个日期组件。由于您的日期没有提供，因此您会得到一个缺失值。为了避免这种情况，只需添加一个 day 组件：

```
R> x = c("201001","201102")
R> x = paste(x, "01", sep="") 
```

所以我把所有的日期都定在了每月的第一天：

```
R> y = as.Date(x, "%Y%m%d")
[1] "2010-01-01" "2011-02-01" 
```

然后，您可以使用`format`来获得您想要的：

```
R> format(y, "%Y-%m")
[1] "2010-01" "2011-02" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T15:11:28.117

要回答有关将其专门应用于 data.frame 的问题，您可以使用`$`运算符访问该列。所以你可以使用这里提供的任何一个函数（我会使用 substr 变体）来做到这一点。如果您打算转换为因子，我会先这样做。

```
> df <- data.frame(a=1:5,b=5:1,d=200101:200105)
> df
  a b      d
1 1 5 200101
2 2 4 200102
3 3 3 200103
4 4 2 200104
5 5 1 200105
> #Convert to a factor now for performance reasons.
> df$d <- as.factor(df$d)
> df$d <- paste(substr(df$d, 1, 4), "-", substr(df$d, 5,6), sep="")
> df
  a b       d
1 1 5 2001-01
2 2 4 2001-02
3 3 3 2001-03
4 4 2 2001-04
5 5 1 2001-05

> typeof(df$d)
[1] "character"
> df$d <- as.factor(df$d)
> df
  a b       d
1 1 5 2001-01
2 2 4 2001-02
3 3 3 2001-03
4 4 2 2001-04
5 5 1 2001-05
> typeof(df$d)
[1] "integer" 
```

请注意，根据您的 data.frame 的“巨大”程度，您可以通过先转换为因子，然后将级别转换为连字符日期来获得更好的性能。

```
> df <- data.frame(a=rep(1:5,1000000),b=rep(5:1,1000000),d=rep(200101:200105, 1000000))
> nrow(df)
 [1] 5000000
> # Hyphenate first
> system.time(df$d <- paste(substr(df$d, 1, 4), "-", substr(df$d, 5,6), sep="")) + system.time(df$d <- as.factor(df$d))
  user  system elapsed 
  9.65    0.61   10.31 
>
> #Factor first
> system.time(df$d <- as.factor(df$d)) + system.time(levels(df$d) <- paste(substr(levels(df$d), 1, 4), "-", substr(levels(df$d), 5,6), sep=""))
 user  system elapsed 
 0.68    0.25    0.93 
```

因此，根据 data.frame 的属性，您可以通过先进行因式分解将性能提高 10 倍。

PS如果你*真的*关心性能，你可以通过使用[hash-backed factor](https://stackoverflow.com/questions/9793317/hash-or-list-backed-levels-of-a-factor)获得更好的因式分解代码（快速解决方案中最慢的部分）的属性。

# java - 如何使用串行事件侦听器接收 JSON 对象？

> ID：10091023
> 
> 赞同：1
> 
> 时间：2012-04-10T14:50:41.650
> 
> 标签：java, json, serial-port

我通过 USB 串行连接从 Arduino 板向我的 PC 上的 java 应用程序发送 JSON 对象。Java 应用程序在串行事件侦听器中从串行端口接收“块”。

这是听者的主体：

```
public synchronized void serialEvent(SerialPortEvent oEvent) {
    if (oEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
        try {
            int available = input.available();
            byte chunk[] = new byte[available];
            input.read(chunk, 0, available);

            // buffering of bytes must happen here to 
            // ultimately de-serialize into JSON object
        } catch (Exception e) {
            System.err.println(e.toString());
        }
    }
} 
```

我遇到的问题是不清楚何时收到 JSON 对象的结尾。根据我的研究，需要某种事件导致尝试从串行端口读取返回-1。问题是，在这个模型中，我只有在有数据可供读取时才进入监听器。

我添加了一些代码来检查对 input.read 的调用的返回值，它似乎返回与可用字节数相同的值，并且我还测试了其他事件，但似乎没有其他事件发生。

除非有一种简单的方法可以修改它以检测串行传输的结束，否则我认为这种串行输入模型不适用于接收 JSON 对象之类的东西。

我是否应该转向创建一个单独线程的设计，该线程具有对串行端口的阻塞“readline”调用？

我难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:55:07.577

由于 JSON 中允许使用空格（请参阅 json.org），因此您可以在 JSON 字符串的最后一个字符之后放置一个换行符。确保不要在 JSON 字符串的其他任何地方使用换行符。一旦遇到换行符，这就是您收到整个字符串的信号。

我以前用串行流 JSON 做过这个。在我的情况下，有一个设备不断地流式传输 JSON 字符串。JSON 字符串中的数据值会有所不同（它是温度和湿度等环境数据）。因此，我通过查找标识符来找到字符串的开头（在我的情况下，它是`{"environment data":`并且我通过查找换行符（在字符串中的其他任何地方都没有使用）来找到结尾。

# coffeescript - 在 Mocha 中定义测试窗口

> ID：10091025
> 
> 赞同：4
> 
> 时间：2012-04-10T14:50:53.483
> 
> 标签：coffeescript, mocha.js, zombie.js

我正在尝试将一些测试集成到我当前的 Backbone/CoffeeScript 应用程序中。

我已经为我的应用程序创建了一个模块，烘焙到 window 对象中，但是运行任何 mocha 测试都会失败，因为 window 是未定义的。

```
 module = (name) ->
   window[name] = window[name] or {}
 module 'Cart' 
```

关于如何为摩卡定义窗口的任何方向？

我确实尝试过使用 jsdom 并以这种方式创建一个窗口，但它仍然抛出了同样的错误。提前致谢。

编辑：

使用zombie.js 让我比使用jsdom 更进一步。

```
zombie = require 'zombie'
browser = new zombie.Browser
browser.window.location = 'http://local.cart' 
```

我试图找出一种访问 DOMWindow 并将变量设置为其值之一的方法。

如果 browser.window 与在 Chrome 控制台中访问窗口返回的对象相同，那将是理想的，但事实并非如此。

我可以访问我正在寻找的东西

```
zombie.visit 'http://local.cart', (err, browser) ->
  throw err if err
  browser.window.Cart 
```

有没有办法让我将返回的内容设置为我可以在所有规范中使用的全局变量？

似乎无法得到我想要的尝试 beforeEach 或将前一个块设置为方法并将变量设置为该方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:27:39.570

我认为您肯定会想要模拟窗口，而不是尝试在应用程序的节点端传递一个真实的 DOM 窗口对象（mocha）。

试试我刚刚创建的这个模式（有点符合我读过的 mocha 教程，并使用`this`在浏览器（窗口）与在节点上运行（导出）时发生变化的上下文：

```
/**
 * My namespace is 'AV'
 */
(function(root) {
    /**
     * @namespace root namespace object
     */
    root['AV'] = root['AV'] || {};
    var AV = root['AV'];

    AV.CoolThing = {
        //...
    };

    // this will give you
    // your "window" object
    // which is actually
    // module.exports
    return root;

})(this); 
```

然后，测试可能看起来像这样（我的也在 coffeescript 中）：

```
chai = require 'chai'
chai.should()

# exports / "window"
{ AV } = require '../src/AV.js'

describe 'Sample test with namespace', ->
    it 'should be an object', ->
        AV.should.be.an 'object' 
```

# c# - C#在默认浏览器中打开网页并发布数据

> ID：10091031
> 
> 赞同：9
> 
> 时间：2012-04-10T14:51:11.257
> 
> 标签：c#, http-post

我确信这之前一定已经回答过，但我找不到解决方案，所以我认为我可能会误解其他人的解决方案或试图做一些愚蠢的事情，但我们开始吧。

我正在用 C# 为 Outlook 2010 编写一个加载项，用户可以在其中单击功能区中的按钮并将电子邮件内容提交到网站。当他们单击按钮时，网站应在默认浏览器中打开，从而允许他们查看刚刚提交的内容并在网站上与之交互。我可以使用 URL 中的查询字符串执行此操作：

```
System.Diagnostics.Process.Start("http://www.test.com?something=value"); 
```

但是可以提交的数据量的限制和凌乱的 URL 使我无法遵循这种方法。我想为此使用 HTTP POST，因为它显然更合适。但是，我发现执行此操作的方法似乎在提交帖子数据后无法在浏览器中打开页面：

[http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx)

总结；用户需要能够单击 Outlook 功能区中的按钮，打开 Web 浏览器并显示通过 POST 提交的电子邮件的内容。

**编辑：**

是的，我找到了一种方法，它非常丑陋，但它有效！只需创建一个临时 .html 文件（然后按上述方式启动），其中包含一个包含所有数据隐藏字段的表单，并在使用 JavaScript 加载页面时提交它。

我不太喜欢这个解决方案，因为它依赖于 JavaScript（我有一个`<noscript>`提交按钮以防万一）而且看起来有点笨拙，所以我仍然真的希望这里有人能想出更好的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-12-07T10:34:12.617

Dropbox 客户端的操作方式与您在 EDIT 中提到的方式相同。但它也做了一些混淆，即它用通过 URL 提交的散列对数据进行异或。

以下是 Dropbox 的操作步骤：

1.  应用内：创建可用于在 dropbox.com 上进行授权的令牌。
2.  应用内：将令牌转换为十六进制字符串 (A)。
3.  应用内：创建一个相同长度的安全随机十六进制字符串 (B)。
4.  应用内：计算 C = A XOr B。
5.  应用内：创建具有以下功能的临时 HTML 文件：
6.  包含值 B 的隐藏输入字段。
7.  提交表单，其中包含登录 dropbox.com 所需的隐藏输入字段。
8.  一个 JS 函数，它从 URI 读取哈希，与 B 进行异或并将结果写入提交表单的隐藏字段。
9.  从 URI 中删除哈希。
10.  提交表格。
11.  应用内：使用标准浏览器打开临时 HTML 文件，并将 C 作为哈希添加到 URI 的末尾。

现在，如果您的浏览器打开 HTML 文件，它会根据隐藏的输入字段和 URI 中的哈希计算身份验证令牌并打开 dropbox.com。由于第 5.4 点。您无法点击浏览器中的后退按钮再次登录，因为哈希已消失。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-29T15:21:14.467

这已经晚了八年，但这里有一些代码很好地说明了这个过程：

```
string tempHTMLLocation = "some_arbitrary_location" + "/temp.html";
string url = https://your_desired_url.com";

    // create the temporary html file
    using (FileStream fs = new FileStream(tempHTMLLocation, FileMode.Create)) { 
        using (StreamWriter w = new StreamWriter(fs, Encoding.UTF8)) { 
            w.WriteLine("<body onload=\"goToLink()\">");
            w.WriteLine("<form id=\"form\" method=\"POST\" action=\"" + url + "\">");
            w.WriteLine("<input type=\"hidden\" name=\"post1\" value=\"" + post_data1 + "\">");
            w.WriteLine("<input type=\"hidden\" name=\"post2\" value=\"" + post_data2 + "\">");
            w.WriteLine("</form>");
            w.WriteLine("<script> function goToLink() { document.getElementById(\"form\").submit(); } </script>");
                        w.WriteLine("</body>");
        } 
    }

    // launch the temp html file
    var launchProcess = new ProcessStartInfo {
        FileName = tempHTMLLocation,
        UseShellExecute = true
    };
    Process.Start(launchProcess);

    // delete temp file but add delay so that Process has time to open file
    Task.Delay(1500).ContinueWith(t=> File.Delete(tempHTMLLocation)); 
```

打开页面后，onload() JS 脚本立即提交表单，该表单将数据发布到 url 并在默认浏览器中打开。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T12:05:27.333

我不确定我是否会以这种方式构建解决方案。相反，我会将所有数据发布到 Web 服务（使用 HttpWebRequest，如 @Loci 所述，或者仅使用 Visual Studio 导入服务），该服务会将数据存储在数据库中（可能处于待处理状态）。然后将用户（使用您的 Process.Start 方法）引导到一个页面，该页面将显示待处理的帮助票，这将允许他们批准或放弃该票。

这听起来像是更多的工作，但它应该清理你正在尝试做的架构。另外，您还有一个额外的好处，那就是不必担心如何从客户端触发表单发布。

**编辑：**

一个[普通的 ASMX Web 服务](http://msdn.microsoft.com/en-us/library/ms972326.aspx)至少应该让你开始。您可以右键单击您的项目并选择添加服务引用以生成用于调用服务的代理代码。

# wcf - 哪个工具检查 WCF tcp 传输是否真的加密

> ID：10091035
> 
> 赞同：2
> 
> 时间：2012-04-10T14:51:31.273
> 
> 标签：wcf, nettcpbinding, packet-sniffers

我想说服自己，NetTcpBinding 的默认设置是传输，因此我发送的数据是加密的，而不是明文。

你会推荐哪个工具来检查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:57:29.323

线鲨！[http://www.wireshark.org/](http://www.wireshark.org/)（它有效，它是免费的（这是我唯一能记住名字的））

# java - 在 url 中保留 www 以匹配仅 tomcat 环境中的证书域

> ID：10091036
> 
> 赞同：0
> 
> 时间：2012-04-10T14:51:32.427
> 
> 标签：java, url, tomcat, dns

我的根服务器上有一个 Thawte 证书，并且只有一个在 tomcat 上运行的 java (wicket) 应用程序。该证书是一个标准的网络服务器证书，它是为 www.somedomain.com 签名的。事实上，它在 somedomain.com (without www) 下不受信任。使用正确的 A 条目和 www 的 cname 设置 DNS 区域。我需要使用 www 前缀对我的域进行某种 dns 转发。

有什么解决方案可以在只有 tomcat 的环境中没有 apache 网络服务器来解决这个问题？我不想做一个肮脏的解决方法，只有干净、用户和搜索引擎友好的解决方案

更新

虽然我宁愿让tomcat保持独立，但解决这个问题的唯一方法是使用http代理（在我的例子中是nginx），它通过虚拟主机侦听域名并将url重写为其www.*版本并传递所有请求这个新的 tomcat 网址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:09:53.753

您可能需要更改 DNS，使其具有正确的 A 条目（您拥有它对吗？）。或者返回 Thawte 并要求他们提供另一个使用 *.somedomain.com 标识您的服务器的证书，然后它可以用于 www.somedomain.com 和 somedomain.com。

否则，这可能对您有用：

[http://www.tukey.org/urlrewrite/](http://www.tuckey.org/urlrewrite/)

# c++ - 前向声明一个内部类类型，可以吗？

> ID：10091037
> 
> 赞同：2
> 
> 时间：2012-04-10T14:51:34.987
> 
> 标签：c++, templates

好的，情况就是这样。

```
//foo.h
struct A1{ 
 struct A2{};
};

//bar.h
#include "MyString.h"
class A2; //note, not including foo.h
TEMPLATE_INSTIANTIATE_MAP_OF_TYPE(String,A2*); //assume compiler doesn't do this 
```

是否有可能使上述情况起作用？我尝试创建一个`MyMap<String,A1::A2*> m;`但编译器抛出未定义的引用错误。是否可以在没有 bar.h import foo.h 的情况下完成上述工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:56:31.120

可悲的是，事实并非如此。嵌套类只能在类定义中声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:13:41.230

这是一种在类定义之外声明嵌套类的方法。class Logic 是外部类。LogicImp 是前向声明的结构。

```
class Logic
{
public:

    Logic();
    ~Logic();

private:
    struct LogicImp;
    std::unique_ptr<LogicImp> limp_;
};

struct Logic::LogicImp
{
    int nLogical_;
};

Logic::Logic():limp_(new LogicImp())
{
}

Logic::~Logic()
{
} 
```

# .net - WCF 数据服务 - 客户端代理压缩

> ID：10091045
> 
> 赞同：2
> 
> 时间：2012-04-10T14:52:00.380
> 
> 标签：.net, http-headers, compression, wcf-data-services, http-compression

我有一个 WCF 数据服务，我正在尝试启用对 IIS 压缩的支持。到目前为止，我得到的最好的结果是当我尝试以下操作时：

```
static ServiceReference1.myTestEntities GetEntities()
{
    var content = new ServiceReference1.myTestEntities(new Uri(SERVICE_URL);
    content.IgnoreMissingProperties = true;
    content.SendingRequest += new EventHandler<System.Data.Services.Client.SendingRequestEventArgs>(content_SendingRequest);
    content.Credentials = System.Net.CredentialCache.DefaultCredentials;
    return content;
}

static void content_SendingRequest(object sender, System.Data.Services.Client.SendingRequestEventArgs e)
{
    foreach (var key in e.RequestHeaders.AllKeys)
    {
        if (string.Equals(key, "Accept-Encoding", StringComparison.InvariantCultureIgnoreCase))
        {
            return;
        }
    }
    e.RequestHeaders.Add("Accept-Encoding", "gzip,deflate,sdch");
} 
```

问题是，虽然它确实添加了接受编码标头，但客户端并未解压缩回复，因此它会抱怨诸如“十六进制值 0x1F 是无效字符。第 1 行，位置 1”之类的错误。这基本上意味着客户端没有解压缩返回的流。

我的 ServiceReference1 是在 Visual Studio 2010 中使用“添加服务引用”创建的。压缩正在我的服务器上工作，使用浏览器测试相同的请求 url 并使用 Wireshark 进行检查。

我找不到客户端代理上的任何设置。因此，我的问题是，如何为客户端代理启用 WCF 数据服务压缩？

编辑：理想情况下，我正在寻找这样的东西[（](http://blogs.msdn.com/b/astoriateam/archive/2011/10/04/odata-compression-in-windows-phone-7-5-mango.aspx)适用于 Windows Phone 7.5），但我希望它用于普通的桌面应用程序。

# vb.net - 如何从查询 vb.net 返回多个值

> ID：10091059
> 
> 赞同：0
> 
> 时间：2012-04-10T14:53:01.213
> 
> 标签：vb.net, postgresql

一个问题如何将多个查询结果值存储或返回到多个变量中.. 我正在使用一个返回 4 列的查询，但是如何.. 将这些结果单独存储到 4 个单独的变量中.. 这是我的代码

Private Sub FrmAlumnos_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) 处理 MyBase.Load txtCurrentUser.Text = Login.txtUser.Text

```
 Dim strsql As String
    strsql = "SELECT ""Agregar"", ""Modificar"", ""Eliminar"", ""Imprimir"" FROM ""Seguridad"".""GrupoPantallas"" WHERE ""IdGrupo"" = (SELECT ""IdGrupo"" FROM ""Seguridad"".""Users"" WHERE ""IdUsers"" = '" _
        + Me.txtCurrentUser.Text + "') AND ""IdPantalla"" = '" + Me.Name + "'"
    Try
        Using conexion As New Devart.Data.PostgreSql.PgSqlConnection(My.Settings.CNX_Principal)
            Dim comando As New Devart.Data.PostgreSql.PgSqlCommand(strsql, conexion)
            conexion.Open()
            Dim registro As Devart.Data.PostgreSql.PgSqlDataReader = comando.ExecuteReader
            If comando.ExecuteReader.Item(0) = 0 Then
                btnNew.Visible = False
            End If
            If comando.ExecuteReader.Item(1) = 0 Then
                btnEdit.Visible = False
            End If
            If comando.ExecuteReader.Item(2) = 0 Then
                btnDelete.Visible = False
            End If
            If comando.ExecuteReader.Item(3) = 0 Then
                btnPrint.Visible = False
            End If
        End Using

    Catch ex As Exception

    End Try
End Sub 
```

我使用 PostgreSQL 只是为了让你知道......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:14:56.057

我认为您可能会发现 DataSet 在这里很有用。就像是：

```
Dim ds As New DataSet
Dim com As New SqlCommand
com.Connection = <yourconnectionstring>
com.CommandType = CommandType.Text
com.CommandText = "YOURSQLSTUFF"
Dim da As New DataAdapter
da.SelectCommand = com

da.Fill(ds)
ds.Tables(0).TableName = "FirstTable"
ds.Tables(0).PrimaryKey = New DataColumn() {ds.Tables(0).Columns("primaryKeyOfFirstTable")
ds.Tables(1).TableName = "SecondTable"
ds.Tables(1).PrimaryKey = New DataColumn() {ds.Tables(1).Columns("primaryKeyOfSecondTable") 
```

希望有帮助！

-sf

编辑：经过更多搜索，我找到[了这个](http://www.codeproject.com/Articles/30989/Using-PostgreSQL-in-your-C-NET-application-An-intr)链接，这可能会对你有所帮助！它是特定于 postgreSQL 的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T14:04:32.747

您需要使用 DataReader 的 Read 方法：

```
Dim strsql As String
strsql = "SELECT ""Agregar"", ""Modificar"", ""Eliminar"", ""Imprimir"" FROM ""Seguridad"".""GrupoPantallas"" WHERE ""IdGrupo"" = (SELECT ""IdGrupo"" FROM ""Seguridad"".""Users"" WHERE ""IdUsers"" = '" _
    + Me.txtCurrentUser.Text + "') AND ""IdPantalla"" = '" + Me.Name + "'"
Try
    Using conexion As New Devart.Data.PostgreSql.PgSqlConnection(My.Settings.CNX_Principal)
        Dim comando As New Devart.Data.PostgreSql.PgSqlCommand(strsql, conexion)
        conexion.Open()
        Using registro As Devart.Data.PostgreSql.PgSqlDataReader = comando.ExecuteReader()
            //Assuming that there is only a single row returned
            If registro.Read()
                btnNew.Visible = registro.GetBoolean(0)
                btnEdit.Visible = registro.GetBoolean(1)
                btnDelete.Visible = registro.GetBoolean(2)
                btnPrint.Visible = registro.GetBoolean(3)
            End While
        End Using
    End Using
Catch ex As Exception

End Try 
```

您还应该考虑使用参数。它会使代码比使用连接字符串更简洁，并且会阻止 sql 注入攻击。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T16:56:32.310

```
Dim strsql As String
strsql = "SELECT ""Agregar"", ""Modificar"", ""Eliminar"", ""Imprimir"" FROM ""Seguridad"".""GrupoPantallas"" WHERE ""IdGrupo"" = (SELECT ""IdGrupo"" FROM ""Seguridad"".""Users"" WHERE ""IdUsers"" = '" _
    + Me.txtCurrentUser.Text + "') AND ""IdPantalla"" = '" + Me.Name + "'"
Try
    Using conexion As New Devart.Data.PostgreSql.PgSqlConnection(My.Settings.CNX_Principal)
        Dim comando As New Devart.Data.PostgreSql.PgSqlCommand(strsql, conexion)
        conexion.Open()
        Dim registro As Devart.Data.PostgreSql.PgSqlDataReader = comando.ExecuteReader
        //This is the loop that you missed
        While registro.Read()
            If comando.ExecuteReader.Item(0) = 0 Then
                btnNew.Visible = False
            End If
            If comando.ExecuteReader.Item(1) = 0 Then
                btnEdit.Visible = False
            End If
            If comando.ExecuteReader.Item(2) = 0 Then
                btnDelete.Visible = False
            End If
            If comando.ExecuteReader.Item(3) = 0 Then
                btnPrint.Visible = False
            End If
        End While
    End Using

Catch ex As Exception

End Try 
```

我不确定这是否是你想要做的，但你所要做的就是循环遍历 DataReader，如上所示。

# jquery - 在 jQuery 中显示/滚动到页面顶部

> ID：10091064
> 
> 赞同：0
> 
> 时间：2012-04-10T14:53:11.647
> 
> 标签：jquery

我正在开发一个具有多部分形式的应用程序*（*第 1 步、第 2 步等...）

我正在做的是将其分离到 div 中，并让提交按钮隐藏当前 div，并显示下一个。

在隐藏/显示下一部分时，我希望页面滚动到顶部（就像回发一样）：

```
$('#my_submit_button').click(function (){
    $('#div_one').hide();
    $('#div_two').show();

    //now it should scroll to top of window...
    $(window).scrollTop(100);
}); 
```

但是，这并没有按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:16:22.343

```
 $('body').animate({scrollTop : 0},'slow'); 
```

最后一部分使用这个。

也使用`.hide("fast");`和`.show("fast")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:16:31.563

您可以通过执行以下操作滚动到 div 的顶部：

```
$('#my_submit_button').click(function (){
    $('#div_one').hide();
    $('#div_two').show();

    window.location.href = '#div_two';
}); 
```

# jquery - JQuery $.ajax 输出数据格式

> ID：10091073
> 
> 赞同：0
> 
> 时间：2012-04-10T14:53:45.597
> 
> 标签：jquery

我有以下代码用于连接到供应商。运行时，我返回状态码 0。使用 Wireshark 进行评估时，我发现请求失败，原因如下：

**错误：传入消息具有意外的消息格式“原始”。该操作的预期消息格式为“Xml”、“Json”。**

我从文档中看到 dataType 设置仅定义传入数据。如何将输出设置为 JSON？

（请原谅粗略的编码，目前这只是一个外壳）

```
 var key         = "xxxxxx";
        $.ajax({
            type        : "POST",
            dataType    : "JSON", 
            url         : "http://url",
            data        : {
                            "CityName":cty,
                            "FirmOrRecipient":name,
                            "LicenseKey":key,
                            "PrimaryAddressLine":s1,
                            "SecondaryAddressLine":s2,
                            "State":st,
                            "ZipCode":zip
            },
            success     : function (data, status, xhr) {
                var pretty = JSON.stringify(data, null, 4).replace( / /g, '&nbsp;').replace( /\n/g, '<br />');
                $('div#results').html(pretty);
            },
            error       : function(jqXHR, textStatus, errorThrown){
                if (jqXHR.status === 0) {
                    alert('ERROR: \n Failed to connect to PAV.\n Verify Network.');
                } else if (jqXHR.status == 404) {
                    alert('ERROR: \n Requested page not found. [404]');
                } else if (jqXHR.status == 500) {
                    alert('ERROR: \n Internal Server Error [500].');
                } else if (exception === 'parsererror') {
                    alert('ERROR: \n Requested JSON parse failed.');
                } else if (exception === 'timeout') {
                    alert('ERROR: \n Time out error.');
                } else if (exception === 'abort') {
                    alert('ERROR: \n Ajax request aborted.');
                } else {
                    alert('ERROR: \n Uncaught Error.\n' + jqXHR.responseText);
                }                    
            },
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:01:20.680

尝试设置您的内容类型。

```
$.ajax({
        type        : "POST",
        dataType    : "JSON", 
        contentType: 'application/json', 
```

我还会确保您发送有效的 json 数据 ( [jsonlint.com](http://jsonlint.com/) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T05:37:50.580

您的服务器应该返回 JSON 格式的输出

**如果您使用的是 spring 框架，那么您可以在返回类型之前将方法注释为**

```
@ResponseBody 
```

所以那个spring会将它作为JSON格式返回。

但是，如果您使用任何其他框架。请使用 json jar 文件并尝试构造 JSON 输出格式并返回相同。只有这样您的 ajax 模块才能读取和处理

# android - 为什么没有嵌套时，Android lint 会显示“嵌套权重对性能不利”？

> ID：10091081
> 
> 赞同：1
> 
> 时间：2012-04-10T14:53:56.570
> 
> 标签：android, android-lint

此布局中最后一个 TextView 中的 layout_weight 属性被 lint 突出显示为导致性能不佳。我怀疑 lint 警告的名称是错误的，因为没有嵌套权重。有几个拉伸视图，我怀疑这意味着依赖加权视图。

构建此布局并避免此 lint 警告并提高性能的解决方案是什么？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:gravity="center_horizontal"
          android:background="@drawable/background_gradient"
    >
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/image4"
        android:layout_margin="6dp"
        android:contentDescription="@string/PLACEHOLDER_TEXT"
        />
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        >
    <Button
            style="@style/dashboard_button"
            android:id="@+id/home_management"
            android:text="@string/ICON_MANAGEMENT"
            />
    <Button
            style="@style/dashboard_button"
            android:id="@+id/home_calculators"
            android:text="@string/ICON_CALCULATORS"
            />
</LinearLayout>
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        >
    <Button
            style="@style/dashboard_button"
            android:id="@+id/home_guidelines"
            android:text="@string/ICON_GUIDELINES"
            />
    <Button
            style="@style/dashboard_button"
            android:id="@+id/home_faq"
            android:text="@string/ICON_FAQ"
            />
</LinearLayout>
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:orientation="horizontal"
        >
    <Button
            style="@style/dashboard_button"
            android:id="@+id/home_refs"
            android:text="@string/ICON_REFERENCES"
            />
    <Button
            style="@style/dashboard_button"
            android:text=""
            android:visibility="invisible"
            />
</LinearLayout>
<LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center_vertical"
        android:layout_margin="6dp"
        >
    <TextView
            android:text="@string/HOMEPAGE_CONTENT"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="center_horizontal"
            android:textStyle="bold"
            android:textColor="#FFFFFF"
            />
    <View
            android:layout_width="8dp"
            android:layout_height="1dp"
            />
    <ImageView
            android:id="@+id/home_logo"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:src="@drawable/image7"
            android:contentDescription="@string/PLACEHOLDER_TEXT"
            />
</LinearLayout>
<Button
        android:id="@+id/home_web_site"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/HOMEPAGE_FOOTER"
        android:paddingLeft="4dp"
        android:paddingRight="4dp"
        android:paddingTop="8dp"
        android:paddingBottom="8dp"
        android:textSize="12sp"
        android:background="@drawable/button_red"
        android:layout_margin="6dp"
        android:textColor="#FFFFFF"
        />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:09:17.277

但是，您不必担心这一点，尤其是如果您确实需要权重，并且这是正确声明布局的唯一方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:04:04.063

您所在区域的`TextView`and嵌套在它们的父级中并分配了权重。我怀疑这些是你的问题，特别是因为父母是，所以理论上不应该有任何空间供子元素伸展。`ImageView``@string/HOMEPAGE_CONTENT``LinearLayout``wrap_content`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-04T17:17:50.227

关于这部分代码。

> ```
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:layout_weight="1"
>     android:orientation="horizontal"
> 
> <Button
>         style="@style/dashboard_button"
>         android:id="@+id/home_management"
>         android:text="@string/ICON_MANAGEMENT"
>         />
> <Button
>         style="@style/dashboard_button"
>         android:id="@+id/home_calculators"
>         android:text="@string/ICON_CALCULATORS"
>         /> 
> ```

您的 LinearLayout 包含“layout_weight”属性，如果样式“dashboard_button”也包含属性“layout_weight”，那么您会得到几个具有“layout_weight”属性的嵌套视图，尽管 lint 现在没有警告我关于“layout_weight”在样式里面。我的解决方案是用 RelativLayout 替换一个（或两个）LinearLayouts，并以编程方式调整大小和位置。

# c++ - 即使使用智能指针，C++ 也会在异常情况下泄漏

> ID：10091082
> 
> 赞同：9
> 
> 时间：2012-04-10T14:53:57.757
> 
> 标签：c++, memory-leaks, smart-pointers

我是智能指针世界的新手。我已经阅读了所有内容，他们都表示即使程序在遇到异常后退出，智能指针也会避免内存泄漏。

我写了一个简单的程序来试试这个，但[Valgrind](http://en.wikipedia.org/wiki/Valgrind)告诉我我的程序正在泄漏内存（三个分配，只有一个空闲）。

这是源代码：

```
#include <iostream>
#include <memory>

using namespace std;

int main()
{
    auto_ptr<int> ptr_int(new int(5));

    throw std::bad_alloc();

    cout << *ptr_int;
} 
```

而这个 Valgrind 报告：

```
==27862== Memcheck, a memory error detector
==27862== Copyright (C) 2002-2010, and GNU GPL'd, by Julian Seward et al.
==27862== Using Valgrind-3.6.0.SVN-Debian and LibVEX; rerun with -h for copyright info
==27862== Command: ./smart_pointers
==27862== Parent PID: 5388
==27862==
==27862==
==27862== HEAP SUMMARY:
==27862==     in use at exit: 104 bytes in 2 blocks
==27862==   total heap usage: 3 allocs, 1 frees, 120 bytes allocated
==27862==
==27862== 4 bytes in 1 blocks are still reachable in loss record 1 of 2
==27862==    at 0x4026351: operator new(unsigned int) (vg_replace_malloc.c:255)
==27862==    by 0x804878A: main (smart_pointers.cpp:8)
==27862==
==27862== 100 bytes in 1 blocks are possibly lost in loss record 2 of 2
==27862==    at 0x4025BD3: malloc (vg_replace_malloc.c:236)
==27862==    by 0x40E861A: __cxa_allocate_exception (in /usr/lib/libstdc++.so.6.0.14)
==27862==    by 0x80487AE: main (smart_pointers.cpp:10)
==27862==
==27862== LEAK SUMMARY:
==27862==    definitely lost: 0 bytes in 0 blocks
==27862==    indirectly lost: 0 bytes in 0 blocks
==27862==      possibly lost: 100 bytes in 1 blocks
==27862==    still reachable: 4 bytes in 1 blocks
==27862==         suppressed: 0 bytes in 0 blocks
==27862==
==27862== For counts of detected and suppressed errors, rerun with: -v
==27862== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 19 from 8) 
```

使用智能指针是否保证即使出现异常也会销毁分配的资源？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T14:59:21.710

如果未处理异常，则在调用之前是否解开堆栈由实现定义`std::terminate`。

如果您处理异常，则智能指针将按预期工作。

参考：

C++11 15.5.1`std::terminate()`函数

> 1 在某些情况下，必须放弃异常处理以使用不太微妙的错误处理技术。这些情况是：
> 
> ...........
> 
> — 当异常处理机制找不到抛出异常的处理程序时，或
> 
> ...........
> 
> 2 在这种情况下`std::terminate()`被调用。**在没有找到匹配处理程序的情况下，在调用****之前是否展开堆栈是实现定义的`std::terminate()`**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T14:59:49.213

当[`std::terminate()`](http://gcc.gnu.org/onlinedocs/libstdc++/manual/termination.html)被调用时（就像未捕获的异常的情况一样），不会运行正常的清理（至少对于 的堆栈帧`main()`），因此您在该堆栈帧中分配的内存泄漏，即使它应该是管理的通过智能指针。当您赶上并正常返回`std::bad_alloc`时`main()`，智能指针将尽其所能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T15:03:57.207

如果未捕获到异常，则堆栈展开是特定于实现的。因此，在您的情况下，它不会释放内存。

此外，不再推荐使用 auto_ptr。

使用 std::unique_ptr ：

```
unique_ptr<int> ptr_int(new int(5)); 
```

# html - 如何使用css在列上设置自动最小宽度？

> ID：10091084
> 
> 赞同：5
> 
> 时间：2012-04-10T14:54:26.877
> 
> 标签：html, css, html-table, width

我正在尝试创建表，其中两列是包含内容所需的最小宽度，第三列将尽可能宽。我确实知道这两列的宽度，它们不会有太大的变化，但我宁愿尽可能少的硬编码宽度。

这是我得到的：

```
​&lt;table width="100%">
    <tr>
        <td align="left" style="width:auto;">
            123 123 123 123 123
        </td>
        <td align="center">
            bla bla
        </td>
        <td align="right" style="width:auto;">
            hello
        </td>
    </tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

第一列和最后一列占用的空间比需要的多，导致中间列看起来不居中。有没有办法做到这一点，或者我应该硬编码宽度？

编辑：答案很简单。这是完整的答案，以防它对其他人有所帮助：

```
​&lt;table width="100%">
    <tr>
        <td align="left" style="white-space:nowrap;">
            123 123 123 123 123
        </td>
        <td align="center" width="100%">
            bla bla
        </td>
        <td align="right">
            hello
        </td>
    </tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T14:57:10.577

好吧，您的表格设置为 100% 宽度.. 它必须扩展一些东西:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:02:56.950

为什么不使用百分比作为宽度？宽度 100% 扩展列，如果列没有设置宽度，它会按比例添加剩余的列与其余列的数量。

# java - 每次都生成实例标题不同的bimaps？

> ID：10091089
> 
> 赞同：0
> 
> 时间：2012-04-10T14:54:46.970
> 
> 标签：java, android, variables, platform

我需要生成的实例名称每次都不同，例如 blocktitle1、blocktitle2、blocktitle3 等等。我已经放置了一些代码来更改字符串变量“title”，但只是将“Title”这个词放在我制作新位图的位置将使名为“Title”的实例而不是“blocktitle2”。

我会非常乐意帮助任何人。

```
 List<Block> blocks = new LinkedList<Block>();
 Random rnd = new Random(System.currentTimeMillis());

 int randomx = 400;
 public Block block;
 int blocknum = 10;
 String Title = "blocktitle" + blocknum;

public void generateBlocks(){

          if(blocknum > 0){

              int offset = rnd.nextInt(400) + 100; //500 is the maximum offset, this is a constant
              x += offset;                         //ofset will be between 100 and 400

              // i need the word below "block" to be recognised as a String variable "String Title"
             block = new Block(BitmapFactory.decodeResource(getResources(), R.drawable.block), randomx, 200);
              blocknum -= 1;

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:22:35.213

尝试这个：

```
private static final String titlePrefix = "blocknum";
private static int titleNo = 0;
public String getNextTitle() {
    return titlePrefix + titleNo++;
} 
```

# sql - 将 EXEC 语句作为参数传递给 APPLY

> ID：10091094
> 
> 赞同：0
> 
> 时间：2012-04-10T14:54:54.447
> 
> 标签：sql, sql-server-2008, tsql

我需要从具有相同架构的表的多个数据库中获取数据。为此，我在其中一个数据库中为该表创建了同义词。数据库的数量会随着时间的推移而增长。因此，抓取数据的过程应该是灵活的。我写了下面的代码片段来解决这个问题：

```
WHILE @i < @count
BEGIN
    SELECT @synonymName = [Name]
    FROM Synonyms
    WHERE [ID] = @i
        SELECT @sql = 'SELECT TOP (1) * 
                FROM [dbo].[synonym' + @synonymName + '] as syn
                WHERE [syn].[Id] = tr.[Id]
                ORDER BY [syn].[System.ChangedDate] DESC'

        INSERT INTO @tmp
        SELECT  col1, col2
        FROM
        (
            SELECT * FROM TableThatHasRelatedDataFromAllTheSynonyms
            WHERE [Date] > @dateFrom 
        ) AS tr         
        OUTER APPLY (EXEC(@sql)) result 

    SET @i = @i + 1
END 
```

我也感谢有关如何简化解决方案的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:11:24.717

实际上，最好将所有表中的数据导入到一个表中（可能为源表名称添加额外的列）并使用它。可以通过 SP 或 SSIS 包进行导入。

关于最初的问题 - 您可以通过 exec 语句的 TVF 包装器来实现它（其中包含 exec .. into ）。

**UPD：**正如评论中所指出的，exec 在 TVF 中不起作用。所以，如果你真的不想改变数据库结构并且你需要使用很多表，我建议：

1.  或者从同义词***表中选择所有数据到变量中（我看到你只选择了一行）并使用它们
2.  或者为完整的语句（使用插入等）准备动态 SQL，并在此处使用临时表而不是表变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:12:04.187

我的解决方案很简单。只是将所有查询放入字符串并执行它。不幸的是，它比复制/粘贴所有同义词的代码慢 3 倍。

```
WHILE @i < @count
BEGIN
    SELECT @synonymName = [Name]
    FROM Synonyms
    WHERE [ID] = @i
        SELECT @sql = 'SELECT  col1, col2
        FROM
        (
            SELECT * FROM TableThatHasRelatedDataFromAllTheSynonyms
            WHERE [Date] > ''' + @dateFrom + '''
        ) AS tr         
        OUTER APPLY (SELECT TOP (1) * 
                FROM [dbo].[synonym' + @synonymName + '] as syn
                WHERE [syn].[Id] = tr.[Id]
                ORDER BY [syn].[System.ChangedDate] DESC) result'

        INSERT INTO @tmp
        EXEC(@sql)

    SET @i = @i + 1
END 
```

# postgresql - Postgres：变量说明我从哪个模式中选择

> ID：10091095
> 
> 赞同：1
> 
> 时间：2012-04-10T14:55:00.073
> 
> 标签：postgresql, select

我创建了一个 SQL SELECT 来获取架构中的所有枚举及其值：

```
SELECT 
    t.typname, array_agg(e.enumlabel) 
FROM pg_type t
JOIN pg_enum e ON t.oid = e.enumtypid
JOIN pg_namespace n ON t.typnamespace = n.oid
WHERE t.typtype = 'e' AND n.nspname = 'public'
GROUP BY typname 
```

我已将选择放入视图中，因此每次我想调用它时都不必编写它。唯一困扰我的是，如果我重命名架构或在另一个架构中使用它，我必须手动重写架构的名称，请检查代码的第 6 行：

```
 WHERE t.typtype = 'e' AND n.nspname = 'public' 
```

公众在那里是硬排版的。在 postgres 中选择时，是否有一个“全局”变量说明您从哪个模式中选择？我找不到任何东西。

谢谢

PS：我使用postgres 8.4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T14:57:20.277

可以使用函数检索当前模式`current_schema()`

[http://www.postgresql.org/docs/current/static/functions-info.html](http://www.postgresql.org/docs/current/static/functions-info.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T22:13:10.440

除了连接模式或使用 current_schema() 查找它，您也可以按模式对视图进行分组，然后在视图上进行选择。

```
create or replace view enum_vw as
SELECT 
    n.nspname, t.typname, array_agg(e.enumlabel) 
FROM pg_type t
JOIN pg_enum e ON t.oid = e.enumtypid
JOIN pg_namespace n ON t.typnamespace = n.oid
WHERE t.typtype = 'e'
GROUP BY n.nspname, t.typname;

select * from enum_vw where nspname = 'public'; 
```

# c# - C# 类组织/结构 - 概括执行循环线性插值的类

> ID：10091098
> 
> 赞同：1
> 
> 时间：2012-04-10T14:55:10.997
> 
> 标签：c#, oop, parameters, xna

我正在开发一个 C# XNA 游戏，并且有以下代码根据线性插值的结果更新 Sprite 的 alpha 级别：

```
class AlphaProcess : GameProcess {

    Sprite sprite;
    public Sprite Sprite {
        get { return sprite; }
        set { sprite = value; }
    }

    float start;
    public float Start {
        get { return start; }
        set { start = value;}
    }

 ...<snip>...

    public override void Update(float elapsed) {
        if (FirstUpdate) {
            Start = sprite.Alpha;
            FirstUpdate = false;
        }

        Time += elapsed;
        if (Time >= Duration)
            Finished = true;

        sprite.Alpha = MathHelper.Lerp(start,end,Time/Duration);
    }
} 
```

'Start' (float), 'FirstUpdate' (bool), 'Time' (float), 'Duration' (float) 都是 AlphaProcess 类的字段。“Sprite”是一个包含诸如比例、位置、方向、旋转等细节的类。

'Update' 方法每秒调用 60 次，计算指定时间段内精灵的新 alpha 值。完成后，GameProcess 将从队列中移除。

这段代码工作正常，但它非常具体。我拥有的 Sprite 类包含许多属性，可以在固定的时间段内轻松处理（旋转、位置（用于缓入和缓出））。其中许多变量也是浮点数。创建多个“GameProcess”扩展类做几乎相同的事情似乎很愚蠢，只是在不同的变量上。但是，我想不出如何最好地重构它，这样我就可以有一个指向被修改的浮点值的指针，而不是特定的精灵，它是 alpha/rotation/scale/任何值。

我已经完成了关于 SO 的 C# 引用/值/参数传递问题，并且知道在 C# 中您不能将引用存储为字段。调用 Update 的“GameProcessQueue”对正在更新的“GameProcess”的内部结构一无所知。**有没有更聪明的方法来做这件事，所以我可以概括/抽象类来更新另一个类的字段（就像这里，'Sprite'的'Alpha'字段）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:23:38.753

基本上，您将回调函数传递给 Update 类——在 C# 术语中，您使用委托函数。向您的类添加一个看起来像的属性

```
public delegate SetThis(float value) { get; set; } 
```

要设置它，在客户端代码中，您可以执行类似的操作

```
myAlphaProcess.SetThis = ( x => sprite.Alpha = x; ) 
```

在 Update() 函数中，你有

```
SetThis(MathHelper.Lerp(start,end,Time/Duration)); 
```

这个答案中的语法是*近似*的，因为我在这台计算机上没有编译器，但这就是你的做法。好的谷歌搜索将是“lambda C#”或“delegate C#”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T14:23:58.063

您的主要问题是您的 AlphaProcess 类的内聚力较低。它具有三个主要角色，Tweening、Lerping 和获取/设置 Sprite Alpha 值。为了改进您的设计，您需要将它们拆分为单独的解耦类。

**目标：**将您的 AlphaProcess 变成 TweenProcess。

与其传递一个精灵，不如传递一个接口，它可以通过该接口获取和设置它希望操作的浮点数。而不是直接调用 Lerp，而是将其传递给接口或委托给 Tween 函数。 *（我使用了接口而不是委托，因为我发现委托经常会产生垃圾，这会导致您的游戏卡顿。）*

**补间类是：**

```
interface IFloatPropertySource
{
    float FloatProperty { get; set; }
}

interface ITweenFunction
{
    float Tween(float start, float end, float t);
}

class TweenProcess : GameProcess 
{
    float start;
    IFloatPropertySource floatSource;
    ITweenFunction tweenFunction;

    public TweenProcess(IFloatPropertySource floatSource, ITweenFunction tweenFunction)
    {
        this.floatSource = floatSource;
        this.tweenFunction = tweenFunction;
    }

    public override void Update(float elapsed) {
        if (FirstUpdate) {
            start = floatSource.FloatProperty;
            FirstUpdate = false;
        }

        Time += elapsed;
        if (Time >= Duration)
            Finished = true;

        floatSource.FloatProperty = tweenFunction.Tween(start, end, Time / Duration);
    }
} 
```

**获取/设置 alpha 的类是：**

```
class SpriteAlphaSource : IFloatPropertySource
{
    Sprite sprite;

    public SpriteAlphaSource(Sprite sprite)
    {
        this.sprite = sprite;
    }

    public float FloatProperty
    {
        get
        {
            return sprite.Alpha;
        }
        set
        {
            sprite.Alpha = value;
        }
    }
} 
```

我知道你有点想避免上这门课。但是围绕它的所有方法，比如通过反射，都非常昂贵。在具有更多可渲染对象而不仅仅是 sprite 的项目中，您可能希望将其与 sprite 分离，并使其在像 IRenderable 这样的基本接口上运行。

**lerping 机制是：**

```
class Lerp : ITweenFunction
{
    public float Tween(float start, float end, float t)
    {
        return MathHelper.Lerp(start, end, t);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:12:44.830

这可能是解决这个问题的通用方法......也许你应该做一个 TweenManager 并将 Tweenables 添加到集合中以仅更新活动的 Tweenables......

这应该是对的，但我没有检查过......也许泛型会出现任何问题......使用计算，但应该避免使用泛型委托...... :)

```
Tweenable<float> Alpha = new Tweenable(defaultvalue);

public class Tweenable<T>
{
     public T  Value {
           get { return Function(elapsed, source, target-source, duration);} 
           private set { source = value; elapsed = 0;}
     }

     public TweeningFunction<T> Function;

     float elapsed, duration;
     T source, target;

     public void Update(float Elapsed)
     {
          if (elapsed<duration) 
          {
              elapsed+= Elapsed;
              if (elapsed > duration) elapsed = duration;
          }
     }

     public void Start(T Source, T Target, float Duration)
     {
         ...
     }
}

 public delegate T TweeningFunction( float timeElapsed, 
                                           T start, 
                                           T change, 
                                           float duration );

public static partial class Tweening {    
        public static class Quartic {
            public static float EaseIn( float t, float b, float c, float d ) {
                return c * (t /= d) * t * t * t + b;
            }
            public static float EaseOut( float t, float b, float c, float d ) {
                return -c * ((t = t / d - 1) * t * t * t - 1) + b;
            }
            public static float EaseInOut( float t, float b, float c, float d ) {
                if ( (t /= d / 2) < 1 ) {
                    return c / 2 * t * t * t * t + b;
                }
                return -c / 2 * ((t -= 2) * t * t * t - 2) + b;
            }
        }
    } 
```

# visual-studio-2010 - Publishing MVC3 app to IIS error - Web 服务器配置为不列出此目录的内容

> ID：10091103
> 
> 赞同：3
> 
> 时间：2012-04-10T14:55:32.600
> 
> 标签：visual-studio-2010, iis, iis-6, publishing-site

我将我的网站发布到“C:\inetpub\wwwroot\Sem_App”并创建了一个物理路径为“C:\inetpub\wwwroot\Sem_App”和端口 84 的网站。当我浏览该网站时，`http://localhost:84/`出现以下错误。

```
HTTP Error 403.14 - Forbidden
The Web server is configured to not list the contents of this directory. 
```

无论如何，我不想列出目录的内容，我想运行用于在 VS 2010 的调试模式下运行的默认页面。有人知道发生了什么吗？

我尝试运行此命令并重新启动 iis 但它不起作用 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-12T08:48:05.027

去 cmd 输入这个，你很好去 %windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_regiis.exe -ir

windir 通常是 C:\Windows

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:34:04.113

您可能需要在 IIS中启用[**目录浏览选项。**](http://www.hosting.com/support/iis6/enable-directory-browsing-in-iis-6)查看下面的链接，了解将 ASP.NET MVC 部署到 IIS 6。（*对于 .Net 4.0*）

[http://www.codefrenzy.net/2011/10/19/deploying-asp-net-mvc-3-to-iis-6/](http://www.codefrenzy.net/2011/10/19/deploying-asp-net-mvc-3-to-iis-6/)

# android - 如何在意图之间传递套接字值

> ID：10091104
> 
> 赞同：0
> 
> 时间：2012-04-10T14:55:39.747
> 
> 标签：android

我有一个应用程序，它有登录页面，即我的第一个意图，我有一个第二个意图，它有一些按钮和编辑文本，但是一旦我的应用程序进入第二个意图，第一个意图将结束关闭客户端和服务器之间的连接。请帮助我找到如何不结束 b/w 客户端和服务器的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T14:59:36.567

听起来好像您想要`Service`管理连接。一个`Service`人的寿命通常比一个人的寿命长`Activity`。

您可以将每个`Activity`绑定到`Service`创建时，并从`Service`退出时断开连接。

# java - 按下按钮时Java重绘

> ID：10091105
> 
> 赞同：0
> 
> 时间：2012-04-10T14:55:40.143
> 
> 标签：java, swing, repaint, graphics2d

我碰壁（在我的大脑中）试图在按钮按下时更新我的​​板。我是否认为 GameBoard 类是需要重新绘制（）的类？

*游戏板.java*

```
public class GameBoard extends Panel {

static Compass compass = new Compass();
private static final long serialVersionUID = 1;
Graphics2D g2d;

static final Dimension WINDOW_SIZE = new Dimension(1150, 800);

public void boardMaker() throws Exception {
    JFrame frame = new JFrame("Display image");

    JPanel panel = new JPanel();
    /* unimportant stuff

    .....

    */

    //

    DieRoll roll = new DieRoll("Roll Dies");
    roll.setC(compass);
    roll.setG2D(g2d);
    //
    Button button = new Button("new");
    button.setGameBoard(this);
    JPanel buttonPanel = new JPanel();
    buttonPanel.add(button);
    buttonPanel.add(roll);
    buttonPanel.setPreferredSize(new Dimension(200,100));

    frame.getContentPane().add(buttonPanel, BorderLayout.NORTH);
    //
    frame.getContentPane().add(panel);
    frame.setVisible(true);
}

public void paint(Graphics g) {
// not important I think
}
} 
```

*按钮.java*

```
public class Button extends JButton implements ActionListener {
private static final long serialVersionUID = 1L;
JPanel panel = new JPanel();
JFrame frame = new JFrame();
Compass c = new Compass();

GameBoard gb = new GameBoard();

Button(String text) {
    this.setText(text);
    this.addActionListener(this);
}

void setGameBoard(GameBoard gb) {
    this.gb = gb;
}

@Override
public void actionPerformed(ActionEvent e) {
    gb.g2d.setColor(Color.black);
    gb.g2d.fillRect(100, 100, 100, 200);
    gb.repaint();
}
} 
```

这给出了一个空指针异常。那么知道如何重新粉刷我的游戏板吗？如果我因为愚蠢而不得不重写所有内容，我不会生气！;)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T14:59:07.077

你对如何用 Java 绘图有错误的想法。像面板这样的组件会自己绘制，所有的绘制都发生在 UI 线程上。

查看本教程：[docs.oracle.com/javase/tutorial/2d/index.html](http://docs.oracle.com/javase/tutorial/2d/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T18:21:51.053

文章[*在 AWT 和 Swing 中绘制*](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)可能会提供一些关于应用程序触发绘制的观点。下面的例子说明了这个原理。请注意，自动`setForeground()`调用`repaint()`是因为前景色是一个[绑定属性](http://en.wikipedia.org/wiki/Bound_property)，但您始终可以自己调用它。

```
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import javax.swing.*;

public class SwingPaint {

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame();
                final GamePanel gp = new GamePanel();
                f.add(gp);
                f.add(new JButton(new AbstractAction("Update") {

                    @Override
                    public void actionPerformed(ActionEvent e) {
                        gp.update();
                    }
                }), BorderLayout.SOUTH);
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.pack();
                f.setLocationRelativeTo(null);
                f.setVisible(true);
            }
        });
    }

    private static class GamePanel extends JPanel {

        private static final Random r = new Random();

        public GamePanel() {
            this.setForeground(new Color(r.nextInt()));
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(320, 240);
        }

        public void update() {
            this.setForeground(new Color(r.nextInt()));
        }

        @Override
        public void paintComponent(Graphics g) {
            super.paintComponent(g);
            Dimension size = this.getSize();
            int d = Math.min(size.width, size.height) - 10;
            int x = (size.width - d) / 2;
            int y = (size.height - d) / 2;
            g.fillOval(x, y, d, d);
            g.setColor(Color.blue);
            g.drawOval(x, y, d, d);
        }
    }
} 
```

# python - 通知用户 SQL 表更新的最佳方式？

> ID：10091108
> 
> 赞同：0
> 
> 时间：2012-04-10T14:55:52.137
> 
> 标签：python, mysql, notifications

我有一个桌面 python 应用程序，其数据后端是 MySQL 数据库，但其以前的数据库是网络访问的 xml 文件。当它由 xml 驱动时，我在应用程序启动时产生了一个线程，该线程将简单地检查 xml 文件的更改，并且每当修改日期发生更改时（由于任何用户更新它），应用程序都会自行刷新，以便多个用户可以在他们开展业务时使用并查看应用程序的变化。

现在该程序已经成熟，并且正在尝试在线展示，因此它可以在任何地方使用。Xml 不在窗口中，我使用 MySQL 和 SQLAlchemy 作为数据库访问方法。然而，情节变厚了，因为信息不再存储在一个 xml 文件中，而是被拆分为 SQL 数据库中的多个表。这使某种“最后修改”表值或结构的想法复杂化。因此，问题是，您如何通知用户数据已更改并且应用程序需要刷新？以下是我的一些想法：

1.  每个表都需要一个最后修改的列（这似乎是有史以来最糟糕的选择）
2.  一个单独的表，包含一些最后修改的列？
3.  通过服务器的某种推送通知？
4.  应该提到的是，我有能力在托管 SQL db 的同一服务器上运行一个非常小的 python 脚本，也许应用程序可以连接到并且（通过套接字？）它可以向所有连接的客户端传递信息和从所有连接的客户端传递信息？

一些额外的信息：

*   来回传递的信息将是相当低的带宽。主要是具有某些图像潜力的文本（很少超过 50k）。
*   目前的客户数量很少，在几十个。但该项目可能会被一些客户数量可能达到数百家的大公司接手。即使在可预见的未来，带宽也不应该成为问题。

无论如何，对我来说有点新的领域，所以你会*怎么*做？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:19:30.107

As I understand this is not a client-server application, but rather an application that has a common remote storage.
One idea would be to change to web services (this would solve most of your problems on the long run).
Another idea (if you don't want to switch to web) is to refresh periodically the data in your interface by using a timer.
Another way (and more complicated) would be to have a server that receives all the updates, stores them in the database and then pushes the changes to the other connected clients.
The first 2 ideas you mentioned will have maintenance, scalability and design uglyness issues.
The last 2 are a lot better in my opinion, but I still stick to web services as being the best.

# java - 使用 Collections.sort 对自定义类数组列表字符串进行排序

> ID：10091110
> 
> 赞同：3
> 
> 时间：2012-04-10T14:55:54.833
> 
> 标签：java, android, sorting, collections, arraylist

我正在尝试通过声明我自己的匿名比较器来使用 Collections.sort 对我的自定义类数组列表进行排序。但是排序没有按预期工作。

我的代码是

```
Collections.sort(arrlstContacts, new Comparator<Contacts>() {

        public int compare(Contacts lhs, Contacts rhs) {

            int result = lhs.Name.compareTo(rhs.Name);

            if(result > 0)
            {
                return 1;

            }
            else if (result < 0)
            {
                return -1;
            }
            else
            {
                return 0;
            }
        }
    }); 
```

结果未按排序顺序。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T15:36:20.147

就像亚当说的，简单地做：

```
Collections.sort(
  arrlstContacts, 
  new Comparator<Contacts>() 
  {
    public int compare(Contacts lhs, Contacts rhs) 
    {
      return lhs.Name.compareTo(rhs.Name);
    }
  }
); 
```

该方法[`String.compareTo`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)执行您的原始代码否定的字典比较。例如字符串`number1`和`number123`比较时会分别产生 -2 和 2。

通过简单地返回 1、0 或 -1 有一个机会（就像你正在发生的那样）合并排序使用的`Collections.sort`方法的合并部分无法充分区分列表中的字符串，从而导致列表未按字母顺序排序.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-10T15:12:13.170

正如亚当所指出的，您可以使用`return (lhs.Name.compareTo(rhs.Name));`likeso：

```
Collections.sort(arrlstContacts, new Comparator<Contacts>() {
     public int compare(Contacts lhs, Contacts rhs) {
         return (lhs.Name.compareTo(rhs.Name));
     }
}); 
```

# xaml - 基于 MVVM 模式的 XAML 中的数据绑定

> ID：10091111
> 
> 赞同：0
> 
> 时间：2012-04-10T14:55:59.130
> 
> 标签：xaml

当数据网格列是 ComboBox 时如何填充数据网格。在下面的代码中，我的列没有被填满......但是组合框包含一些项目。

示例代码。

```
<Window x:Class="ComboBox_Test.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <DataGrid ItemsSource="{Binding First}" AutoGenerateColumns="False" Height="200" HorizontalAlignment="Left" Margin="177,60,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="200">
        <DataGrid.Columns>
         <DataGridTemplateColumn Header="WH Code" Width="70">
                <DataGridTemplateColumn.CellEditingTemplate>
                    <DataTemplate>
                        <ComboBox Height="22" ItemsSource="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type DataGrid}}, Path=DataContext.Last}"/>
                    </DataTemplate>
                </DataGridTemplateColumn.CellEditingTemplate>
    </DataGridTemplateColumn>`  </DataGrid.Columns>
    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:04:04.773

```
<ComboBox ItemsSource="..." SelectedItem="{Binding WHCode, Mode=TwoWay}" /> 
```

This will select the combobox-item (if found) that corresponds to the `WHCode` property of the current data-item. It will also allow for the combobox to update the model value as the user updates the selection.

I don't understand why you want to bind the combobox to the same collection as the datagrid. I would probably create a `WHCodes` property on the view-model, and use `Path=DataContext.WHCodes` (or something similar), to make it populate the combobox from a set of "WH Codes".

# c - 使用全局变量控制单独线程中的 while 循环

> ID：10091112
> 
> 赞同：0
> 
> 时间：2012-04-10T14:56:04.847
> 
> 标签：c, pthreads

gcc (GCC) 4.6.3 c89 valgrind-3.6.1

你好，

更新的代码片段 +++++++++++++++++++++++++++++++++++++

```
void *thread_recv_fd()
{
    pthread_mutex_lock(&mutex_queue);
    while(start_receiving) {
        pthread_mutex_unlock(&mutex_queue);

        pthread_mutex_lock(&mutex_queue);
        queue_remove();
        pthread_mutex_unlock(&mutex_queue);

        usleep(500);
    }

    pthread_exit(NULL);
} 
```

使用上面的锁现在看起来很丑。而且我在阅读`start_receiving`. 我也宣布它为易变的。+++++++++++++++++++++++++++++++++++++++++

我在每 1/2 秒轮询一次的工作线程中运行一个 while 循环。在用户输入 ctrl-c 后，我使用全局变量 start_receiving 来控制它，它会将值更改为 false。

拥有这样的全球是一种好习惯吗？

我在运行 hlgrind 时遇到这两个错误时询问的原因：

```
==6814== Possible data race during write of size 4 at 0x601958 by thread #1
==6814==    at 0x401131: main (driver.c:78) 
==6814==  This conflicts with a previous read of size 4 by thread #2
==6814==    at 0x4012A7: thread_recv_fd (driver.c:127) 
```

这是代码行：

```
driver.c:78 is this line of code start_receiving = FALSE;
driver.c:127 is this line of code while(start_receiving) in the while loop 
```

源代码，只是重要的片段：

```
static int start_receiving = FALSE;

int main(void)
{
    pthread_t thread_recv_id;
    pthread_attr_t thread_attr;

    /* Start polling as soon as thread has been created */
    start_receiving = TRUE;

    do {
        /* Start thread that will send a message */
        if(pthread_create(&thread_recv_id, &thread_attr, thread_recv_fd, NULL) == -1) {
            fprintf(stderr, "Failed to create thread, reason [ %s ]",
                    strerror(errno));
            break;
        }
    }
    while(0);

    /* Wait for ctrl-c */
    pause(); 

    /* Stop polling - exit while loop */
    start_receiving = FALSE;

    /* Clean up threading properties */
    pthread_join(thread_recv_id, NULL);

    pthread_exit(NULL);
}

void *thread_recv_fd()
{
    while(start_receiving) {
        pthread_mutex_lock(&mutex_queue);
        queue_remove();
        pthread_mutex_unlock(&mutex_queue);

        usleep(500);
    }

    pthread_exit(NULL);
} 
```

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T14:58:40.823

不，这是非常糟糕的做法。

至少，变量应该`volatile`避免被优化掉。

不过，您确实应该考虑为此使用一些真正的多线程原语，例如互斥锁（以保护共享状态，以便两个线程不会同时访问它）和原子变量（以确保状态是防螺纹的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T06:42:38.713

您可以使用原子，但这里最简单的解决方案就是在控制变量周围使用锁定。例如：

```
static int start_receiving = FALSE;
static pthread_mutex_t start_receiving_lock = PTHREAD_MUTEX_INITIALIZER;

int is_receiving(void)
{
    int r;

    pthread_mutex_lock(&start_receiving_lock);
    r = start_receiving;
    pthread_mutex_unlock(&start_receiving_lock);

    return r;
} 
```

然后在线程函数中：

```
void *thread_recv_fd()
{
    while(is_receiving()) {
        pthread_mutex_lock(&mutex_queue);
        queue_remove();
        pthread_mutex_unlock(&mutex_queue);

        usleep(500);
    }

    pthread_exit(NULL);
} 
```

..在主要功能中：

```
pthread_mutex_lock(&start_receiving_lock);
start_receiving = 1;
pthread_mutex_unlock(&start_receiving_lock); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:20:46.850

Polling isn't a right way. I suggest you to read about [conditional variables](https://computing.llnl.gov/tutorials/pthreads/#ConditionVariables)

# javascript - Firefox 中的淡入淡出过渡

> ID：10091114
> 
> 赞同：0
> 
> 时间：2012-04-10T14:56:07.537
> 
> 标签：javascript, jquery

我遇到了 Firefox 褪色和滑动效果的大问题。请查看链接并尝试单击左右按钮。您会注意到幻灯片无法正常运行：http: [//jsfiddle.net/marb315/7JFLf/](http://jsfiddle.net/marb315/7JFLf/) 这仅在 Firefox 中发生...有人可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:37:15.383

好吧，如果你保持

```
initialized : true, 
```

在配置中，它至少在 Firefox 中可以工作，总比完全不工作要好......但是仍然存在一些问题......

在里面

```
$('#slider-two').movingBoxes 
```

# msbuild - 我真的需要 cmake 来构建自动化吗？

> ID：10091119
> 
> 赞同：5
> 
> 时间：2012-04-10T14:56:43.427
> 
> 标签：msbuild, cmake, build-automation

我目前正在研究 cmake 以允许在 Win32 平台上自动构建。对于我想要构建的所有运行时和库，Visual Studio (2008/2010) 项目确实已经存在。

我遇到过 cmake，但我不确定我是否真的需要它。正如文档所说，cmake 生成 VS 项目，然后可以使用 MSBuild 构建它们。

由于项目本身已经存在（并通过 IDE 或 cmd 行上的 MSBuild 很好地构建），我需要什么并使用 cmake 做什么？只是为了目录/项目文件夹遍历？构建失败报告？

问候，保罗

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T17:25:41.557

好吧，严格来说你**不需要**它。但是，它确实为您提供了一些优势：

1.  使用 CMake 的惯用方式迫使您使用源外构建。有争议，但我个人相信这些可以让你的源代码库非常干净。

2.  您可以支持多个 Visual Studio 版本（使用源外构建）。也许将您的项目移植到其他编译器（从 MinGW -> Linux GCC）会更容易一些。

3.  借助 find_package 和 config.cmake 文件以及大量可用的 findXXX 模块，CMake 可以更轻松地将第三方库“导入”到您的构建链中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T15:10:56.010

你不需要它。Cmake 仅在您试图保持相同的源代码能够在多个平台和编译器中构建时才有用。如果您只是使用 microsoft stack 进行构建，则不需要它。

# php - 使用 Symfony 表单 / Silex 和 Twig 时出错

> ID：10091122
> 
> 赞同：10
> 
> 时间：2012-04-10T14:57:03.613
> 
> 标签：php, twig, silex

我正在尝试在 Silex 应用程序中使用 twig 呈现 Symfony 表单。我正在使用 Symfony 2 表单库、Symfony Bridge Twig Forms Extension 和 Twig。

这是我的引导文件：

```
require_once __DIR__ . '/../app/silex.phar';
$app = new Silex\Application();

$app['debug'] = true;

// Set up the autoloader
require_once __DIR__ . '/../app/vendor/.composer/autoload.php';

// Load Configuration into container
$parser = new Symfony\Component\Yaml\Parser();
$config = $parser->parse(file_get_contents(__DIR__ . '/../app/config/config.yml'));
$app['config'] = $config;

// Set up Symfony bridge (nice twig functions)
$app->register(new Silex\Provider\SymfonyBridgesServiceProvider(), array(
'symfony_bridges.class_path' => __DIR__ . '/vendor/symfony/twig-bridge',
));

// Set Up Templating
$app->register(new Silex\Provider\TwigServiceProvider(), array(
'twig.path' => __DIR__ . '/../app/views',
'twig.class_path' => __DIR__ . '/../app/vendor/twig/twig/lib',
));

 // Set Up Database
 $app->register(new Silex\Provider\DoctrineServiceProvider(), array(
'db.options' => array(
    'driver' => $app['config']['db']['driver'],
    'host' => $app['config']['db']['host'],
    'user' => $app['config']['db']['user'],
    'password' => $app['config']['db']['password'],
    'dbname' => $app['config']['db']['dbname']
),
'db.dbal.class_path' => __DIR__ . '/vendor/doctrine/doctrine-dbal/lib',
'db.common.class_path' => __DIR__ . '/vendor/doctrine/doctrine-common/lib',
));

 // Set up the Symfony forms component
$app->register(new Silex\Provider\FormServiceProvider());

// Routes
$app->get('/', function() use($app)
{
    return $app['twig']->render('index.twig', array());
});

$app->get('/info', function() use($app)
{
    return $app['twig']->render('info.twig', array());
});

$app->get('/register', function() use($app)
{

    $builder = $app['form.factory']->createBuilder(new MppInt\Form\Type\RegisterType() )
    ->add('id', 'text')
    ->add('firstName', 'text')
    ->add('lastName', 'text')
    ->add('email', 'password')
    ->add('password', 'text');
    $form = $builder->getForm();
    return $app['twig']->render('register.twig', array('form' => $form->createView()));
});

$app->run(); 
```

我收到以下错误：

Twig_Error_Runtime：变量“已禁用”不存在。

堆栈跟踪非常大，但这里是前两个条目：

> 1.  在 /nfs/personaldev/bwaine/mpp-audit/app/vendor/twig/twig/lib/Twig/Template.php 第 303 行
>     
>     
> 2.  在 Twig_Template->getContext(array('value' => '', 'attr' => array(), 'form' => object(FormView), 'id' => 'register_firstName', 'name' => ' firstName', 'full_name' => 'register[firstName]', 'errors' => array(), 'read_only' => false, 'required' => true, 'max_length' => null, 'pattern' => null, 'size' => null, 'label' => 'Firstname', 'multipart' => false, 'types' => array('field', 'text'), 'type' => 'text') , '禁用') 在 /nfs/personaldev/bwaine/mpp-audit/app/vendor/twig/twig/lib/Twig/Environment.php(314) : eval()'d 代码行 986

有没有人知道发生了什么？

编辑 -

我认为“禁用”变量在默认模板中。

来自供应商/symfony/twig-bridge/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig

```
{% block widget_attributes %}
{% spaceless %}
id="{{ id }}" name="{{ full_name }}"{% if read_only %} readonly="readonly"{% endif %}{%     if disabled %} disabled="disabled"{% endif %}{% if required %} required="required"{% endif     %}{% if max_length %} maxlength="{{ max_length }}"{% endif %}{% if pattern %} pattern="{{     pattern }}"{% endif %}
    {% for attrname,attrvalue in attr %}{{attrname}}="{{attrvalue}}" {% endfor %}
{% endspaceless %}
{% endblock widget_attributes %} 
```

根据要求 - register.twig

寄存器.twig

```
{% extends "base.twig" %}

{% block title %}Welcome to Nuts.co.uk{% endblock %}
{% block head %}
{{ parent() }}
{% endblock %}
{% block content %}

<div class="row">
<div class="span12">
    <h2>Register</h2>
    <p>
        Register for Nuts.co.uk and we'll give you free access to cool stuff
        in addition you can subscribe to our premium content.
    </p>

    <form  action="/contact" method="post">
        <fieldset >
            <legend>Contact</legend>

              {{ form_errors(form) }}
              {{ form_row(form.firstName) }}
              {{ form_row(form.lastName) }}
              {{ form_row(form.email) }}
              {{ form_row(form.password) }}

            <button type="submit" class="btn btn-info">Send</button>

        </fieldset>
    </form>
</div>
</div>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:15:38.540

您似乎在您的树枝模板中使用了一个禁用的变量（如 {{ disabled }} 或可能在 if 语句中），您没有传递给模板。在上面粘贴的代码中，我没有看到任何名为“禁用”的变量正在传递给 twig ...

# perl - 将 SOAP 响应存储为哈希

> ID：10091124
> 
> 赞同：2
> 
> 时间：2012-04-10T14:57:04.597
> 
> 标签：perl, soap, hash

我正在尝试将来自 Perl (v5.12.4) SOAP 调用（SQL 查询）的响应存储为哈希值，以便在保持数据结构的同时进行进一步处理。列会有所不同，因此我希望能够动态构建列键。以下是回复的示例：

```
$VAR1 = {
      'row' => [
               #0
               {
                 'column1' => '',
                 'column2' => 'f',
                 'column3' => '0',
                 'column4' => '',
                 'column5' => 'f',
                 'column6' => '0',
                 'column7' => 'f',
               },
            ]
       }; 
```

我对列名和值感兴趣。我已经做了一些（滑稽的）尝试来处理这个问题，例如：

```
unless ($res->fault) {
  $Data::Dumper::Indent = 3;
  my (%reply) = $res->paramsall();
  foreach my $keys (keys %reply) {
    print "$keys\n";
  }
} 
```

这会得到一个“在 script.pl 行中找到偶数大小列表的参考...”。非常感谢这里正确方向的任何一点。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:22:58.033

这 ：

```
$res->paramsall() 
```

几乎可以肯定会返回一个 hashref。

所以你正在做的是将 hashref 分配给 %reply 的第一个键。

```
my %reply = %{ $res->paramsall() }; 
```

可能会工作。

您应该查看[perlreftut](http://perldoc.perl.org/perlreftut.html)以了解一些使用参考结构的方法。

使用我的 %hash = %{ } 取消引用哈希会复制引用的哈希。
您可以像这样直接使用 hashrefs：

```
my $reply = $res->paramsall(); 

foreach my $key1 (keys %$reply) { 
  foreach my $key2 (keys %{ $reply->{$key1} }) { 
    print " $key2: " . $reply->{$key1}{$key2} . "\n"; 
  } 
} 
```

在您回复的第一个代码示例中，这是：

```
$reply{$key2}->{$key2} 
```

应该读 ：

```
$reply{$key1}{$key2} 
```

因为所有内容都已取消引用。

# c# - 将文本描述绑定到文本框

> ID：10091136
> 
> 赞同：0
> 
> 时间：2012-04-10T14:57:38.623
> 
> 标签：c#, wpfdatagrid

我在使用 C# 和 WPF 将文本绑定到网格中的文本框时遇到问题。绑定实际上有效，只是在我双击 TextBox 进行编辑之前它不会显示在 UI 上。然后填充文本。我正在使用 DataGridTemplateColumn.CellEditingTemplate。我注意到如果我只使用 CellTemplate，数据会填充（但显然我无法更改它）。谁能告诉我必须有什么不同？如果需要，我会发布代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:39:43.963

如果您只是想绑定一个文本列，那么您可以这样做。

```
<DataGridTextColumn Header="Name" Binding="{Binding Name}"/> 
```

如果您对 DataGridTemplateColumn 有更复杂的想法，那么您可能需要指定一个 CellTemplate 和一个 CellEditingTemplate。您需要描述您尝试执行的操作，并显示 Xaml。

# java - 如何编写一个在 3 个不同的文本视图中显示 3 列同一行的 Android 方法？

> ID：10091138
> 
> 赞同：1
> 
> 时间：2012-04-10T14:57:39.043
> 
> 标签：java, android, database

我是安卓新手。我正在尝试编写一个方法，该方法将在 3 个不同的文本视图中显示来自数据库同一行的 3 个不同列。现在，我有 3 个相同的方法，每个方法显示同一行的不同列：

```
 Display part of Method #1:
if (cursor != null){
        cursor.moveToFirst();
        result = result
        + cursor.getString(0);
        return result;
    }
    return null;

    Display part of Method #2:
if (cursor != null){
        cursor.moveToFirst();
        result = result
        + cursor.getString(1);
        return result;
    }
    return null;

    Display part of Method #3:
if (cursor != null){
        cursor.moveToFirst();
        result = result
        + cursor.getString(2);
        return result;
    }
    return null; 
```

所以我的问题是：有没有办法编写一个方法，其结果类似于“对于单个 DB 行，cursor.getString(0)；在 TextView #1 中显示，cursor.getString(1)；在TextView #2, cursor.getString(2); 在 TextView #3 中显示？”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:01:16.063

```
if (cursor != null){
    cursor.moveToFirst();
    String string1 = cursor.getString(0);
    .... string2 = cursor.getString(1);
    .... string3 = cursor.getString(2);
    textView1.setText(string1);
    textView2.setText(string2);
    textView3.setText(string3);
} 
```

对于数据库适配器，您可以做一件事

```
if (cursor != null){
    cursor.moveToFirst();
    String strings[] = new String[3];
    strings[0] = cursor.getString(0);
    strings[1] = cursor.getString(1);
    strings[2] = cursor.getString(2);
    return strings; 
```

在调用活动中，您可以轻松地将这些返回的数组元素设置为文本视图。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:00:48.210

在 TextView 中使用字符串生成器和“\n”字符。或者只有 3 个 TextView。

# jquery - jquery mouseover 和 mouseenter 调用 no.of 次 - 如何解决这个问题？

> ID：10091140
> 
> 赞同：1
> 
> 时间：2012-04-10T14:57:45.223
> 
> 标签：jquery

嗨，有一个 onmouseenter 和 leave 功能，但我没有得到正确的结果。一旦我进入'ul'它会正确显示，但是当我离开'ul'时它会再次调用。如何解决这个问题？我正在使用此功能来实现“下拉​​”目的。

我的功能：

```
$('ul.select').bind("mouseenter mouseleave",function(){
        $('ul.select ul').stop(1,1).slideToggle('250');
    })

    $('ul.select ul li').on('click', function(){
        var qData = $(this).attr('data-qid');
        var html = $(this).text();
        $('ul.select>li').text(html).attr('data-qid',qData);
        $(this).hide().siblings().show();
        $('ul.select').mouseleave();
    }) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:16:33.153

```
$('ul.select').on("mouseenter mouseleave",function( e ){
     if(e.type === 'mouseenter'){   
        $(this).find('ul').stop(1).slideDown('250');  
    }else{      // if is mouseleave  // DO SOMETHING          
        $(this).find('ul').stop(1).slideUp('250');
    }
}); 
```

[演示](http://jsbin.com/oteluj/2/edit)

# php - 在使用白名单执行之前清理包含文件

> ID：10091143
> 
> 赞同：1
> 
> 时间：2012-04-10T14:57:53.130
> 
> 标签：php, include, sanitization, whitelist

是否可以在执行之前对包含进行清理以确保它存在于服务器上？

我想避免攻击者使用某种白名单破坏文件路径，这可能吗？

我的包含看起来像这样：

```
require_once('../includes/front/header.php'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:06:23.207

路径怎么可能被破坏？（除非您`require_once`包含用户输入 - 避免这种情况！）

您可以使用以下命令检查文件是否存在`file_exists`：

例如。

```
if(file_exists('../includes/front/header.php')) {
  require_once('../includes/front/headers.php');
} 
```

如果您确实想要一个白名单，尽管您可以创建一个**允许**`array`的路径/文件名，然后仅用于检查其有效性。**`in_array`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:03:29.157

应该可以使用 PHP 的[file_exists](http://php.net/manual/en/function.file-exists.php)函数和您的白名单：

```
$allowed_files = array('../includes/front/header.php','../includes/front/footer.php');
$include_file = <string with file/path>; //EG '../includes/front/header.php'

if (in_array($include_file,$allowed_files && file_exists($include_file)) {
    require_once($include_file);
} 
```

如果您的路径被硬编码到 PHP 脚本中并且不接受用户输入的文件名，那么您不需要清理自己的文件名/路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:05:20.597

您可以编写自己的包含，它可以针对“允许”路径列表进行验证。

即使用上述方法，但将其包装在一个函数中。**

# sql - 影响连接的 Where 子句

> ID：10091144
> 
> 赞同：5
> 
> 时间：2012-04-10T14:57:55.207
> 
> 标签：sql, oracle, oracle10g

愚蠢的提问时间。甲骨文 10g。

where 子句是否可能影响连接？

我有以下形式的查询：

```
select * from
(select product, product_name from products p
join product_serial ps on product.id = ps.id
join product_data pd on pd.product_value = to_number(p.product_value)) product_result
where product_name like '%prototype%'; 
```

显然，这是一个人为的例子。没有必要显示表格结构，因为它都是虚构的。不幸的是，我无法显示真正的表结构或查询。在这种情况下，p.product_value 是一个 VARCHAR2 字段，在某些行中存储了 ID 而不是文本。（是的，糟糕的设计——但我继承了一些东西，无法改变）

问题在于连接。如果我省略 where 子句，则查询有效并返回行。但是，如果我添加 where 子句，我会在 pd.product_value = to_number(p.product_value) 连接条件上收到“无效数字”错误。

显然，当连接 p.product_value 字段中包含非数字的行时，会发生“无效数字”错误。但是，我的问题是如何选择这些行？如果在没有外部 where 子句的情况下连接成功，那么外部 where 子句不应该只从连接结果中选择行吗？似乎正在发生的事情是 where 子句正在影响连接的行，尽管连接在内部查询中。

我的问题有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:07:02.253

它会影响生成的计划。

表连接（和过滤）的实际顺序不是由您编写查询的顺序决定的，而是由表上的统计信息决定的。

在一个版本中，偶然生成的计划意味着“坏”行永远不会得到处理；因为前面的连接将结果集过滤到它们从未加入的点。

该`WHERE`子句的引入意味着 ORACLE 现在认为不同的连接顺序更好（因为按产品名称过滤需要一定的索引，或者因为它会缩小数据范围等）。

这个新顺序意味着“坏”行在过滤掉它们的连接之前得到处理。

在查询数据之前，我会努力清理数据。可能通过创建一个派生列，其中值已经转换为一个数字，或者如果不可能这样做，则保留为 NULL。

您还可以使用 EXPLAIN PLAN 查看从查询中生成的不同计划。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:12:22.267

简短的回答：是的。

长答案：查询引擎可以随意重写您的查询，只要它返回相同的结果。所有查询都可供它使用，以产生最有效的查询。

在这种情况下，我猜有一个索引涵盖了您想要的内容，但它不涵盖产品名称，当您将其添加到 where 子句时，不使用索引，而是扫描 where两个条件同时测试，因此您的错误。

这确实是您的连接条件中的一个错误，除非您确定它是一个数字，否则您不应该使用 to_number。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:22:40.923

有关更多背景信息（以及非常好的阅读内容），我建议阅读 Jonathan Gennick 的[Subquery Madness](http://gennick.com/madness.html)。

基本上，问题在于 Oracle 可以自由地以任何顺序评估谓词。因此可以自由地将`product_name`谓词推送（或不推送）到您的子查询中。可以按任何顺序自由评估连接条件。因此，如果 Oracle 碰巧选择了一个查询计划，在它应用之前过滤掉了非数字`product_value`行`to_number`，那么查询将成功。如果它碰巧`to_number`在过滤掉非数字`product_value`行之前选择了一个应用它的计划，你会得到一个错误。当然，也有可能它会成功返回前 N 行，然后当您尝试获取第 N+1 行时会出现错误，因为第 N+1 行是它第一次尝试将`to_number`谓词应用于非数字数据。

除了修复数据模型之外，您可能会在查询中添加一些提示，以强制 Oracle 评估谓词，以确保在应用谓词之前过滤掉所有非数字数据`to_number`。但总的来说，以强制优化器始终以“正确”顺序评估事物的方式完全提示查询有点挑战性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:04:49.590

我猜你`to_number(p.product_value)`只适用于有效的行`product_name`。

发生的情况是您的`join`被应用在您的`where`子句之前导致`to_number`功能失败。

您需要做的是包含您的`product_name like '%prototype%'`as`JOIN`子句，如下所示：

```
select * from
(select product, product_name from products p
join product_serial ps on product.id = ps.id
join product_data pd on product_name like '%prototype%' AND
     pd.product_value = to_number(p.product_value)); 
```

# jquery - Jquery高度问题

> ID：10091151
> 
> 赞同：0
> 
> 时间：2012-04-10T14:58:32.153
> 
> 标签：jquery

第一次加载时我有一个页面，我想添加一个高度为 450px 的 div。该页面有 3 个提交按钮，当有人单击这 3 个按钮中的任何一个时，我需要将高度设置为 0px。

这就是我所做的。

```
 <style type="text/css">

    .DivHeight
    {
        height:450px;
    }
    .DivNoHeight
    {
        height:0px;
    }

   </style>

                   <script type="text/javascript">
          $(document).ready(function () {

           document.getElementById("divHeight").className = "DivHeight";

          $("#btnSubmit").click(function () {

            document.getElementById("#divHeight").className = "DivNoHeight";
            alert("Test");

        });
    });
      </script> 
```

但是当我在页面加载上有上面的代码时它显示正常但是当我点击提交按钮时结果在 450px 之后出现:(

我错过了什么？

更新：

仅当我在 div 中手动添加类时，我才能获得 450 PX 高度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:07:46.637

就绪事件正在覆盖提交。每次提交ready事件都会在页面加载后触发，因此总是450。

找到更好的事件来更新高度。我确信 JQuery 有一些类似 beforeSubmit 或 complete 的东西。或者尝试摆脱准备好的文档并最初在 div 上使用该样式类，然后尝试仅使用 submit\onclick 事件。

另外，请听 Matthew Van Andel。这就是 JQuery 的编码方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:08:22.860

```
//On ready... (shorthand)
$(function(){

    //Load the div element.
    var myDiv = $("#divHeight");

    //Assign the height class to the div element
    myDiv.addClass("DivHeight");

    //Set a click event for the submit button
    $("#btnSubmit").click(function () {
            //Remove height class from div element, set noheight class...
        myDiv.removeClass('DivHeight').addClass('DivNoHeight');
    });

}); 
```

您可能要考虑使用 jQuery 的 .hide() 方法而不是杂耍类。像这样...

```
myDiv.hide(); 
```

这真的取决于你要做什么。如果你想变得非常花哨，你也可以使用 fadeOut() 而不是 hide() ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:17:11.810

您可以简单地使用

```
$(document).ready( function() {
  $("#divHeight").addClass("DivHeight");
  $("#btnSubmit").click(function () {
    $("#divHeight").addClass("DivNoHeight");
    alert("Test");
  });
}); 
```

**[这](http://jsfiddle.net/Hwu7F/)**是小提琴现场演示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:23:10.407

您声明您有三个提交按钮，但引用了带有 id ( `#btnSubmit`) 的提交按钮。据我所知，您只能拥有一个具有一个 id 的元素。将每个按钮上的类设置为，`class="btnSubmit"`并通过“.btnSubmit”引用它们。

当您使用 jQuery 时，我建议您使用它而不是普通的旧 docuemt.getElementById，因为 jQuery 是独立于浏览器的。

我可能会这样做：

```
$(document).ready(function() {
    $("#divHeight").addClass("DivHeight");
    $(".btnSubmit").click(function() {
        $("#divHeight").removeClass("DivHeight");
        $("#divHeight").addClass("DivNoHeight");
    });
}); 
```

祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:49:17.960

我建议使用以下 jQuery：

```
var div = $('#divHeight');
div.addClass('DivHeight');

$('button[type="submit"],input[type="submit"]').click(
    function(e) {
        e.preventDefault(); // prevents actual submission
        div.toggleClass('DivHeight DivNoHeight');
        console.log(div.height());
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/EpsFb/1/)。

使用此 HTML 的演示（当然要适应您的需要）：

```
<div id="divHeight">
</div>
<!-- ...other html... -->
<input type="submit" />
<button type="submit">Submit</button>​ 
```

而这个（或*类似的*）CSS：

```
.DivHeight {
    background-color: #f90; // just for testing purposes
    height: 450px;
}

.DivNoHeight {
    background-color: #ffa; // just for testing purposes
    height: 0;
}​ 
```

这个 jQuery 基于以下假设：

1.  您正在尝试处理具有`id`等于的元素`divHeight`，
2.  你希望分配给它的类`div`来控制高度，
3.  您有多个按钮或输入`type="submit"`，
4.  您不想`form`在单击按钮时提交（或其他），而是为了响应另一个事件（例如验证成功）。

* * *

参考：

*   [`addClass()`](http://api.jquery.com/addClass/).
*   [`event.preventDefault()`](http://api.jquery.com/event.preventDefault/).
*   [`toggleClass()`](http://api.jquery.com/toggleClass/).

# php - PHP AJAX 文件上传

> ID：10091154
> 
> 赞同：1
> 
> 时间：2012-04-10T14:58:41.087
> 
> 标签：php, javascript, ajax, upload

我已经查看了 stackoverflow 和一般互联网，但我找不到简单的 AJAX 文件上传器（只是表单提交）。我发现的那些不够灵活，不符合我的目的。如果我可以将此脚本调整为文件上传，那就太好了：

```
<script type="text/javascript">
 function upload(str)
 {
 if (str.length==0)
 { 
document.getElementById("txtHint").innerHTML="";
 return;
  }
 if (window.XMLHttpRequest)
    {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
 else
   {// code for IE6, IE5
   xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
   }
 xmlhttp.onreadystatechange=function()
   {
   if (xmlhttp.readyState==4 && xmlhttp.status==200)
     {
     document.getElementById("hint").innerHTML=xmlhttp.responseText;
     }
   }
 xmlhttp.open("GET","ajax/link.php?q="+str,true);
 xmlhttp.send();
 } 
```

在 HTML 中我会有

```
<input type='file' onblur='upload(this.value)'> 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T15:01:32.253

这是一个简单的ajax文件上传器

**[上传](http://www.uploadify.com/)**

如果你不想要闪光灯，你可以使用这个；

**[斧头上传器](http://www.albanx.com)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:03:51.380

那并没那么简单。您不能直接使用ajax 来上传文件。想想会导致的安全问题？如果我在您的 str 字段中输入“/%USER%/Desktop/CreditCardsAndPasswords.txt”怎么办？简而言之，您需要找到并使用您所说的那些“非灵活”上传器，并且必须根据您的需要对其进行编辑。要么这样，要么自己写一个来满足你的目的。

大多数“ajax”上传器的工作方式是动态创建 Html 输入文件元素，并将表单的*子集*（只是文件元素）提交到网站上的 php 脚本，然后将文件保存到任何临时目录。然后，当您提交表单的其余部分时，您可以“赶上”脚本的其余部分并处理上传文件所需的任何处理。

那里有许多 ajax '上传者'。只需搜索并找到一个，我无法相信所有这些都不够好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-29T15:39:08.567

```
var data = new FormData();
data.append("image_upload",jQuery("#file_upload_input")[0].files[0]);
jQuery.ajax({
    url: 'url',
    type: 'POST',
    data: data,
    cache: false,
    processData: false, // Don't process the files
    contentType: false, // Set content type to false as jQuery will tell the server its a query string request
    success: function(data, textStatus, jqXHR)
    {
        console.log(data, textStatus, jqXHR);
    },
    error: function(jqXHR, textStatus, errorThrown)
    {

        console.log(jqXHR, textStatus, errorThrown);

    }
}); 
```

请同时检查 post_max_size ini 变量，您将使用 echo phpinfo();

您必须设置要上传的最大文件大小。默认情况下，我认为它是 5mb。并检查增加发布数据大小所需的其他 ini 变量。

# ruby - 当没有花括号时，为什么字符串插值在 Ruby 中起作用？

> ID：10091156
> 
> 赞同：94
> 
> 时间：2012-04-10T14:58:47.220
> 
> 标签：ruby, string-interpolation

在 Ruby 中使用字符串插值的正确方法如下：

```
name = "Ned Stark"
puts "Hello there, #{name}" #=> "Hello there, Ned Stark" 
```

这就是我打算始终使用它的方式。

但是，我注意到 Ruby 的字符串插值有些**奇怪**。我注意到字符串插值在 Ruby 中可以在没有花括号的情况下使用实例变量。例如：

```
@name = "Ned Stark"
puts "Hello there, #@name" #=> "Hello there, Ned Stark" 
```

并且尝试与非实例变量相同的事情是行不通的。

```
name = "Ned Stark"
puts "Hello, there, #name" #=> "Hello there, #name" 
```

我在 1.9.2 和 1.8.7 中都成功地尝试过。

为什么这行得通？口译员在这里做什么？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-10T15:35:45.870

根据Flanagan 和 Matsumoto*的 The Ruby Programming Language*：

> 当要插入到字符串文字中的表达式只是对全局、实例或类变量的引用时，可以省略花括号。

所以以下应该都可以工作：

```
@var = "Hi"
puts "#@var there!"  #=> "Hi there!"

@@var = "Hi"
puts "#@@var there!" #=> "Hi there!"

$var = "Hi"
puts "#$var there!"  #=> "Hi there!" 
```

# c - 打包两个 8 位值

> ID：10091157
> 
> 赞同：2
> 
> 时间：2012-04-10T14:58:48.280
> 
> 标签：c, bytearray, type-conversion

我被一个简单的问题困住了。这是代码：

```
int main(int argc, char **argv)
{
  char buf[2] = {0xd, 0x1f};
  unsigned int a;

  a = ((buf[1] << 8) & 0xFF00) | buf[0];
  printf("%d\n",a);

  return 0;
} 
```

`a`我需要的值是，`0x1FD(509)`但是当我运行上述程序时，输出`a`是`0x1F0D(7949)`.

我怎样才能做到这一点？

编辑：好的，让我澄清一下。我正在做一个项目，我收到的数据如代码片段所示。为了简化，我已将它们声明为 local 。主要是我希望将数据解释为`0x1FD(509)`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:05:33.020

该程序执行您要求它执行的操作。您混淆的根源在于`0xd`常数，实际上是`0x0d`，因为`char`是八位。将它与您一样打包在一起`0x1f`应该会产生`0x1f0d`，并且确实如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:03:12.020

你需要

```
char buf[2] = {0xfd, 0x01}; 
```

也就是说，您需要从右到左“打包”这些位。

如果你用零填充所需的值，这会更清楚，所以它被写成一串完整的字节：

`0x1FD`= `0x01FD`=`(0x01 << 8) | 0xFD`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T15:04:12.660

一个 char 是 8 位，因此它由两个十六进制*数字表示*。

如果你想`0x1FD`在你的变量中，那么你应该用and`a`初始化数组。`0xfd``0x01`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T15:04:50.843

您需要删除空位：

```
unsigned pack(char bytes[2])
{
    char shift = 8;
    if (bytes[0] < 32)
        shift = 4;

    return (unsigned) ((bytes[1] << shift) | bytes[0]);
} 
```

# python - 使用适用于 Windows 的 Python 阻止/取消阻止端口 可能吗？如何？

> ID：10091159
> 
> 赞同：4
> 
> 时间：2012-04-10T14:58:50.030
> 
> 标签：python

我想创建一个非常小的防火墙。我只是希望能够使用它来阻止/取消阻止 IP 和端口（所以它可能不是真正的防火墙，而是它的一小部分）。我想使用 python for windows 创建这个模块。可能吗？如果是，我该如何进行？哪些图书馆？我是否必须以某种方式将 Windows 防火墙链接到 python，或者是否存在直接方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:47:34.987

您可以使用此 API 控制 Windows 防火墙：http: [//msdn.microsoft.com/en-us/library/aa366418%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa366418%28v=vs.85%29.aspx)

我从来没有使用过它，也不需要对 Windows 库进行任意调用，所以我不确定这是否对你真正有用。

# c++ - g++/gcc 找不到名为 String.hpp 的头文件

> ID：10091160
> 
> 赞同：-1
> 
> 时间：2012-04-10T14:58:50.337
> 
> 标签：c++, string, gcc, g++

我创建了自己的字符串类并将其命名为“String.hpp”，并将该文件包含在我的“String.cpp”中。但是，g++/gcc 说无论我尝试什么都找不到“String.hpp”。此外，它也找不到名为“String”的类。

我认为 C++ 中的字符串是小写的“字符串”。'String' 是 C++ 中的保留类还是单词？

编辑：

我似乎通过重做代码体解决了这个问题。名字都保持不变。我想下次发生这种情况时，我会查看自己的代码并尝试在那里找到问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:12:11.520

在 C++ 中，字符串是标准定义的类型，而不是关键字。并且是这样使用的

```
#include <string>

//elsewhere 

std::string str("hi"); 
```

如果您的编译器找不到您的字符串标头，那么无论发生什么，它都不会知道您的类。

您应该像这样包含自己的标题。注意引号，而不是尖括号。尖括号意味着编译器应该搜索包含目录而不是当前目录。

```
#include "String.hpp"
//else where
yournamepsace::String str //etc... 
```

这不会与标准版本冲突，但是您应该确保它是命名空间的，因为您无疑会处理非常相似的名称。

如果编译器仍然看不到，那么您需要确保该文件与您的源文件位于同一目录中。

最后，如果这是某种编程实践，那么继续进行，但如果这是生产代码，请考虑使用 std::string，世界不需要另一个字符串。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:15:15.493

我怀疑你正在做一个

```
#include <String.hpp> 
```

这会从编译器搜索文件的位置排除当前目录。如果是这种情况，你想做

```
#include "String.hpp" 
```

在这种情况下，编译器也会搜索当前目录。

# php - PayPal自适应支付成功功能

> ID：10091162
> 
> 赞同：0
> 
> 时间：2012-04-10T14:59:06.380
> 
> 标签：php, paypal, paypal-sandbox

我是沙盒和贝宝支付网关的新手。我正在使用贝宝自适应付款一次向两个人支付金额。我当前的代码完美运行。我正在使用贝宝生成的代码。我只想知道，当付款成功后，我是否可以将该条目输入我的数据库。我有我的 php 代码，但我需要在哪里写这个？

提前致谢（请不要投反对票）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:05:50.303

您应该等待包含有关付款状态的详细信息的 IPN 消息

[https://www.paypal.com/ipn](https://www.paypal.com/ipn)

您需要定义在您的贝宝帐户中侦听这些消息的 php 脚本的 url。有一些关于如何实现它的php示例。

# c# - 绘制图表的最佳方法是什么？

> ID：10091165
> 
> 赞同：1
> 
> 时间：2012-04-10T14:59:11.617
> 
> 标签：c#, algorithm, math, drawing

我正在开发一个图形计算器应用程序，当然，该应用程序的主要功能是显示图形。

现在，这就是我的绘图算法的工作原理：我将绘图画布按`N`间隔划分（其中`N`定义了应用程序的设置，默认值约为 700）。对于每个间隔，我评估两端的函数，并在两点之间绘制一条线段。

以下是我发现这种方法的缺点：

*   图的精度不是很好（例如函数`sin(tan(x))`）
*   对于更多的间隔，渲染会变慢（例如 N 大于 1000）。此外，缩放和导航控制也会受到影响。

那么有没有更好的方法来绘制图表？

我正在用 C# (WPF) 编程，但我认为这无关紧要，因为我正在寻找一种算法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:16:30.487

如果您要绘制一些任意函数，则无需编写自己的算法。使用相关库中的图形控件，请参阅[此处](https://stackoverflow.com/questions/2612431/plot-a-graph-using-net)并提供必要的数据（x、y 坐标）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:22:02.853

我希望我可以帮助您使用几年前使用为 mingw 编译器移植的原始 graphics.h 制作的 C++ 程序片段。变量名非常清楚。

```
void func_gen(char expr[100],float precision,int color)
{
     float x=-(xres/2)/(float)zoom_factor;
     float max_range=-x;
     while(x<=max_range)
     {
        float y;
        y = evalu(expr,x);          //user defined function which i used to evaluate ann expression
        float xcord=xby2+zoom_factor*x+xshift;
        float ycord=yby2-zoom_factor*y+yshift;
        if(xcord<=xres && xcord>=0 && ycord>=0 && ycord<=yres)
            putpixel(xcord,ycord,color);
            x=x+precision;
     }
} 
```

当我降低精度值时，这种方法会变得非常慢（这实际上会增加绘图的精度：p，对不起菜鸟）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T17:45:39.027

更好的方法是使用*自适应*间隔大小。也就是说，从相对粗略的间隔开始，比如 20。对于每个间隔，计算间隔结束和中间的函数。如果中间点靠近连接两个端点的线，画一条线，你就完成了这个间隔。如果不是，则将间隔分成两部分，然后用两个较小的间隔重复。

如果间隔变得太小而没有收敛到一条线，您可能已经发现了不连续性，不应连接间隔端点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:39:42.223

我认为您应该使用[DrawPath](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawpath.aspx)。该方法使用一个辅助结构（一个[GraphicsPath](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.graphicspath.aspx)），仅针对您编码时的某种任务进行了优化。**编辑**一个小的优化可能是在段的左侧评估函数，并在最后一段的关闭点进行评估。

# ruby - Ruby初始化和自我

> ID：10091171
> 
> 赞同：0
> 
> 时间：2012-04-10T14:59:21.870
> 
> 标签：ruby, metaprogramming

我发现了一个有趣的问题：[http ://rubeque.com/problems/fixing-bad-code-the-wrong-way/solutions](http://rubeque.com/problems/fixing-bad-code-the-wrong-way/solutions)

通常我们有一个简单的类（注意我们`attr_accessor`这里没有）：

```
class Foo
  def itnialize(name)
    self.foo = name
  end

  def set_bar 
    self.bar = 'it will fail..'
  end
end 
```

我认为当我调用 ruby​​ 时不会引发任何方法错误，`Foo.new`但它通过时没有任何问题。我尝试时代码将失败`Foo.new.bar`

这怎么可能以及如何访问`Foo.new.foo`变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:02:16.923

你有一个错字并且拼写错误`initialize`，`itnialize`所以它不会被调用 - 所以没有错误。

看起来您正在尝试创建一个实例变量 - 为此，您需要在某处使用`@`前缀定义它。所以你可能会这样做：

```
def initialize(name)
  @foo = name
end 
```

这意味着您可以`@foo`在课堂内访问。

`self.foo`只能引用一个*方法* `foo`，因此如果要调用它，则需要定义该方法，无论是显式地还是使用其中一个`attr`变体。

但是，在这种情况下，您可以这样做

```
def set_bar
  @bar = 'it will succeed!'
end 
```

# lucene - 如何在 Lucene 中的字段上使用前缀查询？

> ID：10091176
> 
> 赞同：0
> 
> 时间：2012-04-10T14:59:35.160
> 
> 标签：lucene

我正在尝试在 Lucene 中使用 PrefixQuery 来实现自动完成。我对我认为应该起作用的方法进行了简单的测试，但事实并非如此。我正在索引一些简单的字符串并使用 KeywordAnalyzer 来确保它们没有被标记，但我的搜索仍然不匹配任何内容。我应该如何索引和搜索字段以获得前缀匹配？

这是我用来测试的单元测试。除了 autocomplete 和 singleTerm 方法之外，一切都通过了。

```
package com.sample.index;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;
import java.util.HashMap;

import static junit.framework.Assert.assertEquals;
import static junit.framework.Assert.assertFalse;
import static junit.framework.Assert.assertTrue;

public class TestIndexStuff {
    public static final String FIELD_AUTOCOMPLETE = "autocomplete";
    public static final String FIELD_NORMAL = "normal";
    private IndexSearcher searcher;
    private PerFieldAnalyzerWrapper analyzer;

    @Before
    public void init() throws IOException {
        RAMDirectory idx = new RAMDirectory();

        HashMap<String, Analyzer> fieldAnalyzers = new HashMap<String, Analyzer>();
        fieldAnalyzers.put(FIELD_AUTOCOMPLETE, new KeywordAnalyzer());
        analyzer = new PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_35), fieldAnalyzers);
        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);

        IndexWriter writer = new IndexWriter(idx, config);
        addDocs(writer);
        writer.close();

        searcher = new IndexSearcher(IndexReader.open(idx));
    }

    private void addDocs(IndexWriter writer) throws IOException {
        for (String text : new String[]{"Fred Rogers", "Toni Reed Preckwinkle", "Randy Savage", "Kathryn Janeway", "Madonna", "Fred Savage"}) {
            Document doc = new Document();
            doc.add(new Field(FIELD_NORMAL, text, Field.Store.YES, Field.Index.ANALYZED));
            doc.add(new Field(FIELD_AUTOCOMPLETE, text, Field.Store.YES, Field.Index.NOT_ANALYZED));
            writer.addDocument(doc);
        }

    }

    @Test
    public void prefixParser() throws ParseException {
        Query prefixQuery = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Fre*");
        assertTrue(prefixQuery instanceof PrefixQuery);

        Query normalQuery = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Fred");
        assertFalse(normalQuery instanceof PrefixQuery);
    }

    @Test
    public void normal() throws ParseException, IOException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_NORMAL, analyzer).parse("Fred");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(2, topDocs.totalHits);
    }

    @Test
    public void autocomplete() throws IOException, ParseException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Fre*");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(2, topDocs.totalHits);
    }

    @Test
    public void singleTerm() throws ParseException, IOException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Mado*");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(1, topDocs.totalHits);
    }
} 
```

* * *

编辑：感谢@jpountz，为稍后阅读此内容的人添加修改后的代码以显示更改后的完整测试。不过，我没有将它们保留为混合大小写，而是选择将它们索引为小写。我还添加了一个单元测试，以确保不会匹配中间的术语，因为这应该只匹配以搜索词开头的内容。

```
package com.sample.index;

import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.KeywordAnalyzer;
import org.apache.lucene.analysis.PerFieldAnalyzerWrapper;
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.PrefixQuery;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.TopDocs;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;
import org.junit.Before;
import org.junit.Test;

import java.io.IOException;
import java.util.HashMap;

import static junit.framework.Assert.assertEquals;
import static junit.framework.Assert.assertFalse;
import static junit.framework.Assert.assertTrue;

public class TestIndexStuff {
    public static final String FIELD_AUTOCOMPLETE = "autocomplete";
    public static final String FIELD_NORMAL = "normal";
    private IndexSearcher searcher;
    private PerFieldAnalyzerWrapper analyzer;

    @Before
    public void init() throws IOException {
        RAMDirectory idx = new RAMDirectory();

        HashMap<String, Analyzer> fieldAnalyzers = new HashMap<String, Analyzer>();
        fieldAnalyzers.put(FIELD_AUTOCOMPLETE, new KeywordAnalyzer());
        analyzer = new PerFieldAnalyzerWrapper(new StandardAnalyzer(Version.LUCENE_35), fieldAnalyzers);
        IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);

        IndexWriter writer = new IndexWriter(idx, config);
        addDocs(writer);
        writer.close();

        searcher = new IndexSearcher(IndexReader.open(idx));
    }

    private void addDocs(IndexWriter writer) throws IOException {
        for (String text : new String[]{"Fred Rogers", "Toni Reed Preckwinkle", "Randy Savage", "Kathryn Janeway", "Madonna", "Fred Savage"}) {
            Document doc = new Document();
            doc.add(new Field(FIELD_NORMAL, text, Field.Store.YES, Field.Index.ANALYZED));
            doc.add(new Field(FIELD_AUTOCOMPLETE, text.toLowerCase(), Field.Store.YES, Field.Index.NOT_ANALYZED));
            writer.addDocument(doc);
        }

    }

    @Test
    public void prefixParser() throws ParseException {
        Query prefixQuery = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Fre*");
        assertTrue(prefixQuery instanceof PrefixQuery);

        Query normalQuery = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Fred");
        assertFalse(normalQuery instanceof PrefixQuery);
    }

    @Test
    public void normal() throws ParseException, IOException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_NORMAL, analyzer).parse("Fred");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(2, topDocs.totalHits);
    }

    @Test
    public void autocomplete() throws IOException, ParseException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Fre*");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(2, topDocs.totalHits);
    }

    @Test
    public void beginningOnly() throws ParseException, IOException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("R*");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(1, topDocs.totalHits);
    }

    @Test
    public void singleTerm() throws ParseException, IOException {
        Query query = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Mado*");
        TopDocs topDocs = searcher.search(query, 10);
        assertEquals(1, topDocs.totalHits);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:30:17.763

默认情况下，QueryParser 将特殊查询（特别是前缀查询）的术语小写。要禁用此功能，请参阅[QueryParser.setLowercaseExpandedTerms](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/queryParser/QueryParser.html#setLowercaseExpandedTerms%28boolean%29)。

代替

```
Query query = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer).parse("Mado*"); 
```

和

```
 QueryParser qp = new QueryParser(Version.LUCENE_35, FIELD_AUTOCOMPLETE, analyzer);
    qp.setLowercaseExpandedTerms(false);
    Query query = qp.parse("Mado*"); 
```

修复你的测试。

# hibernate - 使用 JPA 和 PostgreSQL 9.0 分组

> ID：10091178
> 
> 赞同：3
> 
> 时间：2012-04-10T14:59:41.460
> 
> 标签：hibernate, postgresql, jpa, group-by

我正在尝试在 JPA 查询中使用 group by。假设我有一个 class`Teacher`和一个 class `Student`。A`Teacher`可以有多个`Student`s，而 a`Student`可以只有一个`Teacher`（一对多）。

以下 JPA 查询：

```
Query q = this.em.createQuery(  "SELECT teacher, COUNT(student)" +
                                " FROM StudentJpa student" +
                                " JOIN student.teacher teacher" +
                                " GROUP BY teacher" +
                                " ORDER BY COUNT(student) DESC"); 
```

生成以下 SQL 查询：

```
select
        teacherjpa1_.teacher_id as col_0_0_,
        count(studentjpa0_.id) as col_1_0_,
        teacherjpa1_.teacher_id as teacher1_0_,
        teacherjpa1_.name as name0_ 
    from
        student studentjpa0_ 
    inner join
        teacher teacherjpa1_ 
            on studentjpa0_.teacher_id=teacherjpa1_.teacher_id 
    group by
        teacherjpa1_.teacher_id 
    order by
        count(studentjpa0_.id) DESC 
```

在 PostgreSQL 9.0 上，我收到以下错误：

> org.postgresql.util.PSQLException：错误：列“teacherjpa1_.name”必须出现在 GROUP BY 子句中或在聚合函数中使用

PostgreSQL 9.1 中没有出现相同的错误。

谁能解释我为什么？似乎 JPA 以错误的方式生成 group by：它应该包括所有`Teacher`属性，而不仅仅是 id。

这是我的 JPA/Hibernate/DB 配置，如有必要：

```
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd http://www.springframework.org/schema/tx  http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">
    <context:property-placeholder location="/WEB-INF/jdbc.properties" />

    <bean id="dataSource" class="org.springframework.jdbc.datasource.TransactionAwareDataSourceProxy">
        <constructor-arg>
            <bean class="org.springframework.jdbc.datasource.DriverManagerDataSource">
                <property name="driverClassName" value="org.postgresql.Driver" />
                <property name="url" value="${db.url}" />
                <property name="username" value="${db.username}" />
                <property name="password" value="${db.password}" />
            </bean>
        </constructor-arg>
    </bean>

    <bean id="jpaAdapter" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="databasePlatform" value="org.hibernate.dialect.PostgreSQLDialect" />
        <property name="showSql" value="${db.showSql}" />
        <property name="generateDdl" value="${db.generateDdl}" />
    </bean>

    <!-- enabling annotation driven configuration /-->
    <context:annotation-config />
    <context:component-scan base-package="my.package" />

    <!-- Instructs the container to look for beans with @Transactional and decorate them -->
    <tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true" />

    <!-- FactoryBean that creates the EntityManagerFactory  -->
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="jpaVendorAdapter" ref="jpaAdapter" />
        <property name="jpaProperties">
            <props>
                <prop key="hibernate.format_sql">true</prop>
                <prop key="hibernate.hbm2ddl.auto">update</prop>
            </props>
        </property>
        <property name="dataSource" ref="dataSource" />
    </bean>

    <!-- A transaction manager for working with JPA EntityManagerFactories -->
    <bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>
</beans> 
```

谢谢！

**更新**- 一种解决方案是指定`GROUP BY teacher.id, teacher.name`而不是`GROUP BY teacher`，但这并不方便。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T15:26:19.140

该查询在 PostgreSQL 版本 9.1 中变得有效。您似乎在本地使用 PostgreSQL 版本 9.1，而 Heroku 使用的是更早的版本。

请参阅 9.1 发行说明：

[http://www.postgresql.org/docs/9.1/interactive/release-9-1.html](http://www.postgresql.org/docs/9.1/interactive/release-9-1.html)

在该页面的“查询”部分下，它说：

> 当在 GROUP BY 子句中指定主键时，允许查询目标列表中的非 GROUP BY 列 (Peter Eisentraut)
> 
> SQL 标准允许这种行为，并且由于主键，结果是明确的。

要使其在早期版本的 PostgreSQL 下工作，请将选择列表中不使用聚合函数的*所有表达式添加到 GROUP BY 子句。*

# javascript - 设置元素高度等于身体高度减去 170px

> ID：10091179
> 
> 赞同：1
> 
> 时间：2012-04-10T14:59:45.453
> 
> 标签：javascript, jquery, math

我有一个绝对位于页面右下角的 div。问题是如果 div 包含太多内容，那么内容的顶部会消失在页面顶部下方。我想要做的是将div的最大高度设置为等于身体高度减去170px。

我在网上尝试了几个教程，但没有走得太远：

到目前为止，我得到的是：

```
<script>
var x, y, z;
y = 170;
function getDocHeight() {
    var x = document;
    return Math.max(
        Math.max(x.body.scrollHeight, x.documentElement.scrollHeight),
        Math.max(x.body.offsetHeight, x.documentElement.offsetHeight),
        Math.max(x.body.clientHeight, x.documentElement.clientHeight)
    );
};
z = x-y;//document height minus 170\. this is the height we need for the info div
document.write (z);
document.write (y);
document.write (x);
</script> 
```

上面的输出是**NaN170undefined**所以我什至没有尝试设置 div id="info" 的高度

非常感谢所有帮助。

肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:12:34.327

如果您使用的是 JQuery，则可以执行以下操作：

```
z = $("body").height() - 170; 
```

# android - Android相机空指针

> ID：10091180
> 
> 赞同：1
> 
> 时间：2012-04-10T14:59:47.380
> 
> 标签：android, camera, nullpointerexception

我正在尝试设置我的相机视图，但我的应用程序给了我一个错误。我认为这里的问题在于相机 ID，我不清楚如何获取相机 ID。

```
04-10 16:59:03.374: E/AndroidRuntime(19562): FATAL EXCEPTION: main
04-10 16:59:03.374: E/AndroidRuntime(19562): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.petkovski.mk/com.petkovski.mk.TransparentSmsActivity}: java.lang.NullPointerException
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1768)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1784)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:939)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.os.Looper.loop(Looper.java:130)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.ActivityThread.main(ActivityThread.java:3835)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at java.lang.reflect.Method.invokeNative(Native Method)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at java.lang.reflect.Method.invoke(Method.java:507)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:847)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:605)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at dalvik.system.NativeStart.main(Native Method)
04-10 16:59:03.374: E/AndroidRuntime(19562): Caused by: java.lang.NullPointerException
04-10 16:59:03.374: E/AndroidRuntime(19562):    at com.petkovski.mk.TransparentSmsActivity.setCameraDisplayOrientation(TransparentSmsActivity.java:78)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at com.petkovski.mk.TransparentSmsActivity.onCreate(TransparentSmsActivity.java:52)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 16:59:03.374: E/AndroidRuntime(19562):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1722)
04-10 16:59:03.374: E/AndroidRuntime(19562):    ... 11 more 
```

错误告诉我错误在这个方法中

```
public static void setCameraDisplayOrientation(Activity activity,
             int cameraId, android.hardware.Camera camera) {
         android.hardware.Camera.CameraInfo info =
                 new android.hardware.Camera.CameraInfo();
         android.hardware.Camera.getCameraInfo(cameraId, info);
         int rotation = activity.getWindowManager().getDefaultDisplay()
                 .getRotation();
         int degrees = 0;
         switch (rotation) {
             case Surface.ROTATION_0: degrees = 0; break;
             case Surface.ROTATION_90: degrees = 90; break;
             case Surface.ROTATION_180: degrees = 180; break;
             case Surface.ROTATION_270: degrees = 270; break;
         }

         int result;
         if (info.facing == Camera.CameraInfo.CAMERA_FACING_FRONT) {
             result = (info.orientation + degrees) % 360;
             result = (360 - result) % 360;  // compensate the mirror
         } else {  // back-facing
             result = (info.orientation - degrees + 360) % 360;
         }
         camera.setDisplayOrientation(result);  //here is the error
     } 
```

我这样称呼这个方法：

```
setCameraDisplayOrientation(this,cameraInfo.CAMERA_FACING_BACK, camera); 
```

谁能告诉我有什么问题？

# android - 如何在 Sqlite 数据库中使用 CONTAINS 关键字

> ID：10091181
> 
> 赞同：2
> 
> 时间：2012-04-10T14:59:47.597
> 
> 标签：android, sqlite, search

我想要使​​用的是，我想每次从我的 LocationByCity 表中的 sqlite 数据库中选择城市当用户在搜索框中输入搜索词时，例如，如果用户输入 F 我想要所有从 F 开始的 CityNames，那么如何我这样做？

提前谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:05:50.523

我必须检查一下，但我相信你想使用 LIKE 关键字。

语法类似于：

```
Select Fieldname From Tablename where fieldname LIKE ('%$myvar%'); 
```

其中 % 符号是通配符。

不确定 sqlite 是否具有全文索引，因此您应该注意，根据表中有多少行，它可能会变得非常慢。

# f# - 管道、合成和咖喱

> ID：10091185
> 
> 赞同：19
> 
> 时间：2012-04-10T15:00:12.740
> 
> 标签：f#, functional-programming

在我看来，所有这些都是相关的。有什么区别？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-10T15:54:07.647

*   管道用于对某个值执行一系列操作（就像 Unix 中的管道）。每个函数的输入是前一个函数的输出。显然，这要求每个函数都采用一个 arg。

*   组合 ( `<<`/ `>>`) 的相似之处在于它按顺序调用两个函数（即第一个函数的输出是第二个函数的输入），但它返回一个函数而不是立即调用序列。

*   Currying 通过将 1 到*N* -1 args 应用于 N args 的函数来*创建*一个新函数

因此，组合和柯里化用于创建函数，而管道用于调用。组合和柯里化在创建新函数的方式上有所不同（通过应用 args 与链接）。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-10T21:04:19.643

除了 Daniel 所写的之外，管道（`|>`and`<|`运算符）和函数组合（`>>`and`<<`运算符）之间存在非常密切的对应关系。

当您使用管道将一些数据传递给一系列函数时：

```
nums |> Seq.filter isOdd
     |> Seq.map square
     |> Seq.sum 
```

...那么这相当于将输入传递给使用函数组合获得的函数：

```
let composed = 
     Seq.filter isOdd
  >> Seq.map square
  >> Seq.sum

composed nums 
```

在实践中，这通常意味着您可以将在参数上使用管道的函数声明替换为函数的组合（并利用函数可以用作值的事实）。这是一个例子：

```
// Explicit function declaration
foo (fun x -> x |> bar |> goo)

// Equivalent using function composition
foo (bar >> goo) 
```

# python - 用于以不同格式提取日期 (d,m,y) 的通用 Python 正则表达式

> ID：10091189
> 
> 赞同：1
> 
> 时间：2012-04-10T15:00:34.273
> 
> 标签：python, regex, date, text-mining

我正在寻找一种从文本中提取日期（日、月、年）的方法。也就是说，我想在人工编写的字符串中找到所有日期（或者更确切地说 - 尽可能多）。

是否有一个 Python 正则表达式涵盖尽可能多的格式？

评论：

```
from dateutil.parser import parse
parse(s, fuzzy = True) 
```

工作正常，但它被限制为每个字符串一个日期。

例子：

> 项目将于 2013 年 1 月 21 日至 2013 年 2 月 15 日举行。资助申请将被接受至 2012 年 4 月 15 日。接受通知：8 月 1 日或之后。提前付款到期：15.10.12。等迟到：12 年 11 月 20 日。

通常（但并非总是）约定对于单个条目或多或少是一致的。

在少数情况下创建正则表达式很容易，我可以做到。问题是是否已经有一个收集许多不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:08:39.610

如果您想自己动手，可以从[Regexp::Common](http://search.cpan.org/perldoc?Regexp%3a%3aCommon)的[时间](http://search.cpan.org/~roode/Regexp-Common-time-0.01/time.pm)模块以及那里的时间和日期模式中获取灵感。

请注意：[代码（直接链接到它）并非微不足道。](http://cpansearch.perl.org/src/ROODE/Regexp-Common-time-0.01/time.pm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:39:52.610

我对这个模块很幸运[`parsedatetime`](http://code.google.com/p/parsedatetime/)：

```
from parsedatetime import parsedatetime, parsedatetime_consts

pdt = parsedatetime.Calendar(parsedatetime_consts.Constants())
parsed, code = pdt.parse('''Your string''') 
```

# php - 从基数解析浮点数

> ID：10091191
> 
> 赞同：0
> 
> 时间：2012-04-10T15:00:41.603
> 
> 标签：php, javascript, arrays, integer, floating-point

我正在尝试转换当您没有小数时php返回的基数（$num = 02092；返回 16 而不是 02092）和在 js 中：（var num = 02092；返回 2092 而不是 02092）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:02:45.753

在 JavaScript 中，您可以使用 parseInt 来获取您想要的数字，假设它是字符串格式：

```
var num = '0123';
parseInt( num, 10 ); // 123 
```

指定 10 作为基数将强制它以 10 为底。

如果它已经是整数格式，并且您知道它是以 8 为基数的，您可以使用以下命令进行转换：

```
var num = 0123;
num = ~~num.toString( 8 ); 
```

似乎有更好的方法可以做到这一点，但这是我想到的第一件事。

此外，由于它不直观，这`~~`只是我用来强制某个整数为整数的快捷方式。

# html - CSS 下拉菜单 相对于表格中的 TD

> ID：10091195
> 
> 赞同：2
> 
> 时间：2012-04-10T15:00:50.773
> 
> 标签：html, css, html-table, position

我有一个记录表，可以很好地显示在 HTML 表中。当悬停该行时，该表的最后一列会显示一个图标。当用户悬停图标时，会出现一个下拉菜单，显示与该行相关的所有操作。

目前，我将 Icon 所在的 td 设置为`Position:absolute`，并且下拉菜单的 div 也设置为 Position Absolute。

这意味着我可以对齐下拉菜单 Div 以很好地与它相关的行对齐。

首先，我不完全确定为什么会这样。我原以为我需要将 TD 作为绝对值，将菜单 Div 作为相对值，但事实并非如此。

我目前遇到的实际问题（就像我在所有浏览器中工作的方式一样）是当行扩展为其他列中文本高度的两倍时。应用绝对定位的 TD 不会扩展到 TR 的 100% 高度。这在尝试悬停 tr 时会导致问题，并且您移动到最后一个应该扩展到行高的 TD 的位置，并将其注册为悬停在 TR 上。

有什么想法可以解决这个问题吗？将图标放在相对的 div 中的问题是我需要 div 为 td 的 100% 高度/宽度才能使菜单与行正确对齐！

**编辑：** 根据要求一些 Html ......这是一个小胡子模板。即使您从未使用过它也不应该很难理解

```
<table>
            <thead>
                <tr>
                    <th style="width:15px"><input type="checkbox" class="GridSelectAll" onclick="GridSelectAll(this);" /></th>
                    <th class="tar" style="width:30px">
                        <a href="javascript:SortGrid('EmployeeId')" id="headerEmployeeId">
                            <%= GetTranslation("EmployeeId") %><span class="sortArrow ui-icon"></span>
                        </a>                        
                    </th>
                    <th style="width:120px">
                        <a href="javascript:SortGrid('FirstName')" id="headerFirstName">
                            <%= GetTranslation("FirstName") %><span class="sortArrow ui-icon"></span>
                        </a>
                    </th>
                    <th style="width:120px">
                        <a href="javascript:SortGrid('LastName')" id="headerLastName">
                            <%= GetTranslation("LastName") %><span class="sortArrow ui-icon"></span>
                        </a>
                    </th>
                    <th>
                        <a href="javascript:SortGrid('CompanyName')" id="headerCompanyName">
                            <%= GetTranslation("PrimayCompanyName") %><span class="sortArrow ui-icon" ></span>
                        </a>
                    </th>
                    <th style="width:55px">
                        <a href="javascript:SortGrid('EmployeeRowStatus')" id="headerEmployeeRowStatus">
                            <%= GetTranslation("EmployeeRowStatus") %><span class="sortArrow ui-icon"></span>
                        </a>
                    </th>
                    <th style="width:60px">
                        <a href="javascript:SortGrid('IsLocked')" id="headerIsLocked">
                            <%= GetTranslation("IsLocked") %><span class="sortArrow ui-icon"></span>
                        </a>
                    </th>
                    <th style="width:15px"></th>
                </tr>
            </thead>
            <tbody>
                {{#EmployeeSummaries}}
                <tr>
                    <td><input type="checkbox" class="chkRowId" value="{{EmployeeId}}"  /></td>
                    <td class="tar">{{EmployeeId}}</td>
                    <td>{{FirstName}}</td>
                    <td>{{LastName}}</td>
                    <td>{{PrimaryCompanyName}}</td>
                    <td>{{EmployeeRowStatus}}</td>
                    <td>{{IsLocked}}</td>
                    <td style="position:absolute;">
                        <a class="optlink"><span class="ui-icon ui-icon-triangle-1-s"></span></a>
                        <div class="optmenu">
                            <ul>
                                <li><a onclick="UpdateEmployee_LoadDialog({{EmployeeId}});"><%= GetTranslation("ManageEmployee")%></a></li>
                                <li><a onclick="showLoading();" href="../Core/AuditItem.aspx?{{ItemTypeItemIdQuerystring}}"><%= GetTranslation("ViewHistory")%></a></li>
                                <li><a onclick="showLoading();" href="UserGroupsEvo.aspx#/?PageIndex=0&Filter=EmployeeId~EqualTo~{{EmployeeId}}"><%= GetTranslation("ViewUserGroups")%></a></li>
                                <li><a onclick="showLoading();" href="UserGroup_Employees.aspx?{{EmployeeIdQuerystring}}"><%= GetTranslation("ManageUserGroups")%></a></li>
                                <li><a onclick="showLoading();" href="../Employee/EmployeePreferences.aspx?{{EmployeeIdQuerystring}}"><%= GetTranslation("ManagePreferences")%></a></li>
                                <li><a onclick="ResetPasswords_LoadDialog({{EmployeeId}});"><%= GetTranslation("ResetPassword")%></a></li>
                                <li><a onclick="SendWelcomeEmails_LoadDialog({{EmployeeId}});"><%= GetTranslation("SendWelcomeEmail")%></a></li>
                                <li><a onclick="AddEmployee_Company_LoadDialog({{EmployeeId}}, {{PrimaryCompanyId}});"><%= GetTranslation("AddToCompany")%></a></li>
                                <li><a onclick="LoginAsUser({{EmployeeId}});"><%= GetTranslation("LoginAsUser") %></a></li>
                                {{#HasOtherCompanies}}
                                <li class="subheader"><%= GetTranslation("ManageOtherCompanies") %></li>
                                {{/HasOtherCompanies}}
                                {{#Companies}}
                                <li>
                                    <span style="vertical-align:top;" class="hh ui-icon ui-icon-circle-close" onclick='RemoveEmployeeFromCompany_LoadDialog(this, {{EmployeeId}}, {{CompanyId}}, "{{CompanyName}}");return false;' title="<%= GetTranslation("Remove") %>"></span>
                                    <a onclick="ManageEmployee_Company_LoadDialog({{EmployeeId}}, {{CompanyId}});">
                                        {{CompanyName}}
                                    </a>                                    
                                </li>
                                {{/Companies}}
                            </ul>
                        </div>    
                    </td>
                </tr>
                {{/EmployeeSummaries}}
            </tbody>

        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:08:15.297

我会一起摆脱桌子。然后我会使用带有表格行为的 div。这将使您能够更好地控制每个元素的工作方式、每一行和每一列。这个链接很好地解释了这个概念：http: [//snook.ca/archives/html_and_css/getting_your_di](http://snook.ca/archives/html_and_css/getting_your_di)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T16:22:30.030

你可以试试这个::

```
<!DOCTYPE html>
<html>
<head>
<style>
body{font-family:arial;}
table{font-size:80%;background:black}
a{color:black;text-decoration:none;font:bold}
a:hover{color:#606060}
td.menu{background:lightblue}
table.menu
{
font-size:100%;
position:absolute;
visibility:hidden;
}
</style>
<script>
function showmenu(elmnt)
{
document.getElementById(elmnt).style.visibility="visible";
}
function hidemenu(elmnt)
{
document.getElementById(elmnt).style.visibility="hidden";
}
</script>
</head>

<body>
<h3>Drop down menu</h3>
<table width="100%">
 <tr bgcolor="#FF8080">
  <td onmouseover="showmenu('tutorials')" onmouseout="hidemenu('tutorials')">
   <a href="/default.asp">Tutorials</a><br>
   <table class="menu" id="tutorials" width="120">
   <tr><td class="menu"><a href="/html/default.asp">HTML</a></td></tr>
   <tr><td class="menu"><a href="/css/default.asp">CSS</a></td></tr>
   <tr><td class="menu"><a href="/xml/default.asp">XML</a></td></tr>
   <tr><td class="menu"><a href="/xsl/default.asp">XSL</a></td></tr>
   </table>
  </td>
  <td onmouseover="showmenu('scripting')" onmouseout="hidemenu('scripting')">
   <a href="/default.asp">Scripting</a><br>
   <table class="menu" id="scripting" width="120">
   <tr><td class="menu"><a href="/js/default.asp">JavaScript</a></td></tr>
   <tr><td class="menu"><a href="/vbscript/default.asp">VBScript</a></td></tr>
   <tr><td class="menu"><a href="default.asp">DHTML</a></td></tr>
   <tr><td class="menu"><a href="/asp/default.asp">ASP</a></td></tr>
   <tr><td class="menu"><a href="/ado/default.asp">ADO</a></td></tr>
   </table>
  </td>
  <td onmouseover="showmenu('validation')" onmouseout="hidemenu('validation')">
   <a href="/site/site_validate.asp">Validation</a><br>
   <table class="menu" id="validation" width="120">
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate HTML</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate XHTML</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate CSS</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate XML</a></td></tr>
   <tr><td class="menu"><a href="/web/web_validate.asp">Validate WML</a></td></tr>
   </table>
  </td>
 </tr>
</table>
<p>Mouse over these options to see the drop down menus</p>
</body>

</html> 
```

# gnuplot - Gnuplot：绘制两个矩阵之间的差异

> ID：10091196
> 
> 赞同：3
> 
> 时间：2012-04-10T15:00:52.307
> 
> 标签：gnuplot

我有两个文件`file1.dat`，`file2.dat`每个文件都包含一个尺寸一致的矩阵（例如，分别为 F1 和 F2）（即它们都是`m x n`矩阵）。我知道如何使用 gnuplot 来绘制它们中的任何一个（`splot "file1.dat" matrix`例如），但是如何指示 gnuplot 绘制 F1-F2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T01:20:59.827

不幸的是，（据我所知）没有办法使用 gnuplot 从多个文件中绘制信息。解决方案是编写一个简单的脚本（用您喜欢的语言），将两个文件作为输入并将差异写入输出......然后你可以这样做：

```
splot "<myscript file1.dat file2.dat" matrix ... 
```

我敢肯定，通过足够的哄骗、使用`set table`和 shell 魔法，我可以想出一个技巧来做你想做的事（让 gnuplot 输出多个数据文件，发出 shell 命令将数据文件粘贴在一起......），但最后，编写自己的脚本将是一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:45:07.103

这是一个在 gnuplot 中使用 awk 的工作示例。

```
set terminal postscript enhanced colour
set output 'matrixdiff.eps'

unset key 
splot "<awk 'NR==FNR{for(i=1;i<=NF;++i)a[FNR,i]=$i;next}{for(i=1;i<=NF;++i)$i=a[FNR,i]-$i;print}' mat1 mat2" matrix 
```

`mat1`并且`mat2`是您要绘制的矩阵文件。awk 脚本来自[这里](http://www.tek-tips.com/viewthread.cfm?qid=1085892)。

# c# - 如何在不使用存储库模式的情况下对 ASP.NET MVC 控制器进行单元测试

> ID：10091198
> 
> 赞同：7
> 
> 时间：2012-04-10T15:00:57.063
> 
> 标签：c#, asp.net-mvc, unit-testing, code-first

我只是想知道是否有一种方法可以在不使用存储库模式的情况下在 MVC 中对我的一些控制器操作进行单元测试。我已经开发了一个 ASP.NET MVC 站点，但在初始阶段没有进行单元测试。现在我想向我的导师演示一些单元测试，在我的控制器中使用可能是两个或多个动作。我的大部分动作逻辑都从数据库中获取数据，而一个控制器从不同的表中获取数据，即一个控制器中的动作从不同的表中读取。我认为可以使用通用存储库模式进行测试。作为一个初学者，我发现我只能对不是来自数据库的代码进行单元测试，但不幸的是，我的控制器 Actions 中的大部分代码都来自数据库。我正在为我的数据库使用 Visual Studio 中的默认测试工具和 EF 代码优先方法。
例如，我只想对以下操作进行单元测试，而不必对同一控制器中的其他操作进行单元测试。

```
public ActionResult Index()
    {
        var model = _db.PhotoGallery;
        return View(model);
    } 
```

这仅用于演示目的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:07:13.860

根据定义，单元测试应该只影响它调用的方法。如果您可以找到一种方法来模拟您的 _db 对象，以便您实际上不会导致数据库往返，那么您可以对依赖它的这个方法进行单元测试。否则，没有。

您的`_db`字段类型是接口吗？它是通过注射提供的吗？如果是这样，您很可能可以对该方法进行单元测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-10T15:08:05.513

如果不删除控制器方法中对数据库的直接依赖关系，您将无法对这些方法进行单元测试。

这样做的总体推荐方法是结合使用 IOC 容器（例如[Ninject](http://www.ninject.org/)）和 MVC，它允许您将所需的数据传递给控制器​​的构造函数。该“数据对象”不得与数据库绑定，通常它只是一个 POCO 对象或作为接口传递。

在您的单元测试中，您可以使用仅为您的单元测试构建的内存数据对象替换这些依赖项，通常使用模拟框架（例如 Rhino Mocks 或[Moq](http://code.google.com/p/moq/)）“模拟”。

使用这种方法，您不仅可以使您的控制器可单元测试，而且最终会得到非常松散耦合的代码，这可能会为以后的开发带来回报。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T15:12:45.113

这就是所谓的`testable`代码:) 当您执行单元测试时，您需要确定，测试失败的唯一原因是在 SUT（被测系统或被测类）实现中发生变化。当然，当依赖 API 改变时它可能会被破坏（没关系，你应该修改 SUT 以使用新的 API），但如果依赖实现改变，它永远不会失败。这就是使用模拟和存根的原因。

但是如果你想模拟依赖，你不应该在 SUT 中创建它。它应该被注入SUT（构造函数，参数注入的属性）。

所以，回到你的情况：

*   如果您想拥有可测试的类，则必须注入依赖项（db）
*   依赖应该被嘲笑
*   您不必被迫使用存储库模式。如果您可以模拟您的数据库类，只需模拟它。或使用任何其他数据访问抽象

# c# - 在 SQL 中使用带或不带 try/catch 的唯一键作为验证数据完整性的有效方法

> ID：10091199
> 
> 赞同：2
> 
> 时间：2012-04-10T15:00:56.750
> 
> 标签：c#, sql-server, try-catch

我有一个包含一些列的表，并且我在其中 3 个列上设置了唯一键，以确保表中没有重复项。现在我想知道是否使用 try / catch 来吞下重复项上的异常并继续更新插入下一行`foreach`是一个好方法吗？

```
 try {
                sqlWrite.ExecuteNonQuery();
            } catch (SqlException sqlException) {
                if (!sqlException.ToString().Contains("Violation of UNIQUE KEY constraint")) {
                    MessageBox.Show("Error - " + Environment.NewLine + sqlException.ToString(), "Error SQL");
                }
            } catch (Exception exception) {
                MessageBox.Show("Error - " + Environment.NewLine + exception.ToString(), "Error SQL");
            } 
```

或者我应该在插入查询中执行 SELECT 以检查行是否存在以及是否跳过插入？我已经读到使用异常作为数据验证的一部分是不好的，但有些东西应该像那样使用（例如[如何在 C# 中检查文件锁定？](https://stackoverflow.com/questions/1304/how-to-check-for-file-lock-in-c)应该与 try/catch 一起使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:06:05.983

如果您有其他方法可以做到这一点，则永远不应该抛出和捕获异常。而你现在拥有它。用它！

您可以创建单个 sql 脚本或存储过程来检查和插入`IF NOT EXISTS(SELECT ...)`. 进行两个查询比较慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:09:00.707

我一般会说主键关系应该是数据验证的绝对最后和后备位置。如果你的程序已经走到了这一步，并且试图插入一个唯一键失败的行，那么就出了很大的问题。

在最简单的情况下，它并不算太糟糕。对于插入单行，没有任何其他依赖项，您可以提出一个参数，即尝试插入记录并引发捕获的错误可能比执行选择以查看 ID 是否已存在更有效。

现在，考虑一个事务，您可能一次插入/更新 10 行甚至数百行。每一行都有一个唯一的键，其中任何一行都可能引发错误。然后，当捕获到错误时，数据库必须回滚整个事务。当然 C# 具有事务模式，但是您必须回滚数据库并回滚在插入记录时可能已更新的任何对象。它变得非常复杂非常快。

# android - DDMS 屏幕截图不起作用

> ID：10091202
> 
> 赞同：3
> 
> 时间：2012-04-10T15:01:12.910
> 
> 标签：android, ddms, screen-capture

我无法让“设备”屏幕截图（如 DDMS 透视图所示）与我的爱可视 A80 一起使用（它与三星 Galaxy 一起使用）。[我尝试了Eclipse 中 Android 屏幕捕获问题中](https://stackoverflow.com/questions/5433554/android-screen-capture-problem-in-eclipse)提到的建议。当按照那里的建议独立运行 DDMS 时，我在 Windows 控制台中看到：W/ddms：无法获取帧缓冲区：超时。我已经在 DDMS 选项中将超时设置为 35000 无济于事。还有其他建议吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-25T22:19:28.477

我有同样的问题。在我禁用“使用主机 GPU”后，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:59:09.053

我还在您链接的问题中交叉发布了这个答案：这对我有用，当 Logcat 停止工作时也是如此：当我禁用并重新启用设备上的调试模式时，一切都恢复正常了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-10T15:07:21.490

我认为你应该在 eclipse 上试试这个

```
Go to Window -> show view -> other -> android -> devices, then click **OK** 
```

现在选择您要截屏的设备，然后单击**设备**屏幕右侧的**捕获屏幕**按钮。

# c# - ButtonX.Visible = false; 挂起浏览器

> ID：10091205
> 
> 赞同：0
> 
> 时间：2012-04-10T15:01:28.870
> 
> 标签：c#, asp.net

Asp.Net C# web 应用程序我有一个`Button X`，
在服务器端 C# `(ButtonX.Visible = false;)`按钮消失（很好），但在下一篇文章中，页面永远不会呈现。我调试一切正常，调试器返回控制，但页面永远不会呈现。如果我注释掉
`(ButtonX.Visible = false;)`所有工作正常，除了`buttonX`在浏览器中可见

那是怎么回事？任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:53:39.650

如果你想在客户端隐藏按钮。不要`ButtonX.Visible = false` 像@southshoreAK 建议的那样制作，而是在 javascript 中隐藏或显示：-

```
document.getElementById('<%=ButtonX.ClientID%>').style.visibility = 'visible';//to show

document.getElementById('<%=ButtonX.ClientID%>').style.visibility = 'hidden';//to hide 
```

# java - 突然奇怪的 Eclipse 行为

> ID：10091211
> 
> 赞同：0
> 
> 时间：2012-04-10T15:01:53.553
> 
> 标签：java, eclipse, debugging

我的 Eclipse 开始显示奇怪的调试行为。每当我设置一个断点时，编译器就会在那个正常的特定语句处中断，现在奇怪的部分开始于我按 F8 转到下一条语句时，编译器不会中断并在下一条语句处停止，而是执行整个程序就像我选择了简历一样。有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:03:22.833

那是因为 F8 是恢复。下一条语句的键盘快捷键是 F6。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-13T16:49:12.753

F5：步入（进入方法调用）
F6：跳过（转到下一个语句 - 这就是你想要的）
F7：退出（离开方法调用）
F8：继续（将在下一个断点处停止 - 这就是你想要的你在做）

来源：[http ://www.shortcutworld.com/en/win/Eclipse.html#link_11](http://www.shortcutworld.com/en/win/Eclipse.html#link_11)

# wpf - 在应用程序级样式资源中指定绑定？

> ID：10091219
> 
> 赞同：0
> 
> 时间：2012-04-10T15:02:27.560
> 
> 标签：wpf

我对 WPF 相当陌生，并创建了一种样式来改变按钮控件的外观。该样式包含一个数据触发器，用于根据数据上下文中的布尔属性更改按钮背景（除其他外），例如：-

```
<Style x:Key="IndicatorButton" TargetType="Button">
   <DataTrigger Binding="{Binding Path=ValveIsOpen}" Value="True">
      <Setter Property="Background" Value="#00FF00"/>
      ..etc.. 
```

目前该样式仅由单个按钮使用，因此数据触发器绑定使用名为“ValveIsOpen”的属性进行硬编码。我现在想在我的应用程序中重复使用这种风格，不同的按钮绑定到不同的属性。如何更改应用样式的每个按钮上的数据触发器绑定？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:08:52.780

您需要定义基本样式和派生样式，例如

```
<Style x:Key="IndicatorButton" TargetType="Button">
   <Setter Property="Foreground" .../>
   ...

<Style x:Key="ValveIndicatorButton" TargetType="Button" BasedOn={StaticResource IndicatorButton}>
   <DataTrigger Binding="{Binding Path=ValveIsOpen}" Value="True">
      <Setter Property="Background" Value="#00FF00"/>
      ..etc.. 
```

# c# - 加载插件 DLL 文件，“动态程序集中不支持调用的成员。”

> ID：10091221
> 
> 赞同：28
> 
> 时间：2012-04-10T15:02:39.793
> 
> 标签：c#, .net-4.0, .net-2.0, .net-assembly, dynamic-assemblies

我们有自定义 DLL，它们不包含在我们的初始设置文件中。它们在运行时加载。此过程在使用 .NET 2.0 时运行良好，但由于我们正在使用 .NET 4.0，我们收到“动态程序集中不支持调用的成员”错误消息。

```
try
{
    assem = Assembly.LoadFrom(fi.FullName); //fi is FileSystemInfo
}
catch (FileLoadException) {}
catch (BadImageFormatException) {}
catch (System.Security.SecurityException) {}
catch (ArgumentException) {}
catch (PathTooLongException) {} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2017-04-28T08:42:49.280

发生此错误是因为`Assembly.Load`无法调用动态程序集。您必须先过滤掉动态程序集，然后才能使用它们。

`var assemblies = AppDomain.CurrentDomain.GetAssemblies().Where(p => !p.IsDynamic);`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2014-04-14T02:50:50.733

对我来说，这个问题没有嵌入 Aspose dll 的许可证：[http ://www.aspose.com/community/forums/thread/423874/initializing-the-license-file.aspx](http://www.aspose.com/community/forums/thread/423874/initializing-the-license-file.aspx)

他们的代码在未检测到许可证时注入动态程序集，导致他们的 DLL 失败，以及一堆与动态程序集不兼容的其他代码。

不确定这是否是确保注册使用 3rd 方 dll 的常见许可/激活方法，所以如果是，我将在此处发布给谷歌。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T23:23:12.320

这在 app.config 文件中允许来自远程源的“插件”dll。

```
<configuration>
   <runtime>
      <loadFromRemoteSources enabled="true"/>
   </runtime>
</configuration> 
```

[http://msdn.microsoft.com/en-us/library/dd409252.aspx](http://msdn.microsoft.com/en-us/library/dd409252.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-23T18:21:26.667

我遇到了同样的错误。我们的代码库中有一个方法可以遍历当前 AppDomain 中加载的程序集，并按名称查找给定的资源。

```
 Assembly[] allAssemblies = AppDomain.CurrentDomain.GetAssemblies();

        foreach (Assembly tempAssembly in allAssemblies)
        {
            Stream resourceStream = tempAssembly.GetManifestResourceStream(resourceName);
            // ...

        } 
```

如果碰巧我们偶然发现了动态程序集，则对 GetManifestResourceStream 的调用将失败，并出现“动态程序集不支持调用的成员”错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-16T12:14:32.450

我花了很多时间来解决这个问题。

我们正在加载`DLL`另一个`Class Library`项目，该项目又在飞行中创建实例。所以下面为我工作。

**解决方案：**

`DLL`添加对主项目的引用。

# java - 使用 Maven 时在 Eclipse 中更改 Android R.java 的输出文件夹

> ID：10091226
> 
> 赞同：5
> 
> 时间：2012-04-10T15:03:00.590
> 
> 标签：java, android, maven, m2eclipse, android-maven-plugin

我有一个使用 maven-android 插件的 android 项目设置。该插件遵循 maven 输出文件夹的`R.java`文件位置（即`target/generated-sources/r`）。

但是，在 Eclipse 中使用此项目时，我无法将 aapt 配置为依赖该文件夹。

即使我手动进入项目属性并手动设置文件夹，ADT 插件也会进入并仅*重置*一些设置（即将`/gen`文件夹添加回源文件夹，并将输出文件夹恢复为`/bin/classes`而不是`/target/classes`），而离开 maven`/target/generated-sources/r`文件夹并破坏项目的构建。

我想在 Eclipse ADT 中使用默认的 Maven 文件夹结构。关于如何做到这一点的任何想法？

谢谢

* * *

回复评论：

*   是的，我正在使用 m2e-android 插件。
*   由于 ADT 仍在生成 R.java ，如果由于重复的类定义而`/gen`仍然存在 R.java ，则 Eclipse 将无法编译。`target/generated-sources/r`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:40:56.467

不幸的是，[用于 M2E 的 Android 连接器](http://rgladwell.github.com/m2e-android)不支持将生成的文件夹（如 ADT gen 文件夹）移动到其他目录。这是 ADT 的一个限制，尽管有一张票可以探索绕过这个限制的方法：

[https://github.com/rgladwell/m2e-android/issues/68](https://github.com/rgladwell/m2e-android/issues/68)

如果您想保持更新，请在此票上发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:59:59.943

这似乎对我有用：

让 ADT 将 gen 保留为源文件夹，但将该源文件夹的输出文件夹更改为`/target/classes`.

我可以在 eclipse 中构建，也可以从命令行使用 maven，在这两种情况下我都不会遇到重复的 R 类问题。本质上，Eclipse 在 中生成`R.java`文件`/gen`，而 maven 在中生成文件`/target/generated-sources/r`，但两种构建都将`R.class`文件放在 /target/classes 下。

注意：有一次我在using中添加`/gen`了一个额外的源目录，我不得不删除它。`pom.xml``build-helper-maven-plugin`

# java - 关于如何在eclipse（java）中使用外部库

> ID：10091227
> 
> 赞同：0
> 
> 时间：2012-04-10T15:03:00.400
> 
> 标签：java, eclipse

我是一个使用 eclipse 的 Java 初学者，甚至在安装了那些**正确**的外部库之后，（我将它们安装到我的构建路径中，它们进入我的引用库部分）这将使我的工作变得容易，我不能使用它们一些原因。

```
import acm.*; 
```

我用它来导入这个库的所有类，当我试图在我的程序中使用这些类时，由于某种原因它不起作用。如果我尝试使用 print() 方法，它会给我以下错误该库的 IOconsole 类的方法。

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
The method print(String) is undefined for the type ShortPrint

at ShortPrint.main(ShortPrint.java:5) 
```

我不知道我是否错过了任何步骤，但我很确定我已经正确安装了库，只是无法使用它们。

编辑1：这是我的程序。

```
 import acm.*;

public class ShortPrint {
    public static void main(String []args) {
        print ("hello");

   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:05:55.027

我相信您应该将导入更改为：

```
import static acm.IOConsole.* 
```

由于该`print()`方法似乎`static`在`IOConsole`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:11:51.603

你需要有一个 ShortPrint 的对象，像这样

```
ShortPrnt sp = new ShortPrint();
sp.print("Hello"); 
```

我猜你正试图这样打电话`print`：

```
ShortPrint.print("Hello"); 
```

唯一有效的`print`是`ShortPrint`

另一种可能性是您没有继承`ShortPrint`自`IOConsole`，这`IOConsole.print`是无法访问的`ShortPrint`

更新：在 OP 添加使用代码后，建议添加导入

```
import acm.io.*; 
```

因为`IOConsole`类驻留在`acm.io`包中。然后将呼叫更改为

```
IOConsole cons = new IOConsole();
cons.print("hello"); 
```

as`print()`不是的静态成员`IOConsole`

# php - JSON对象作为php字符串

> ID：10091228
> 
> 赞同：2
> 
> 时间：2012-04-10T15:03:06.137
> 
> 标签：php, string, json, object

> **可能重复：**
> [将 JSON 转换为 UTF-8 字符串](https://stackoverflow.com/questions/4409039/convert-a-json-into-a-utf-8-string)

我正在缓存一些 twitter 提要以供长期使用。我的搜索结果产生以下类型的数据结构：

```
"results": [
{
  "created_at": "Sun, 08 Apr 2012 18:31:04 +0000",
  "entities": {
    "hashtags": [
      {
        "text": "cheeringfor",
        "indices": [
          54,
          66
        ]
      }
    ],
    "urls": [

    ],
    "user_mentions": [
      {
        "screen_name": "BenSpies11",
        "name": "Ben Spies",
        "id": 32124771,
        "id_str": "32124771",
        "indices": [
          0,
          11
        ]
      }
    ]
  },... 
```

我正在尝试将此输出的主题标签部分包含在我的数据库表中，但我正在尝试将其保存为纯字符串。

我尝试将其转换为字符串 i:e`(string)$result->hashtags`但我得到**无法转换为字符串**错误。我还尝试了**serialize()**函数，该函数有效，但是当我尝试取消序列化并取回对象时出现 php 错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T15:10:51.113

首先，查找php的json_decode函数。它将您的 JSON 字符串转换为数据结构，然后您应该能够查找主题标签，例如：

```
$data = json_decode($jsonstring, true);
$hashtags = $data['results'][0]['entities']['hashtags']; // this will be an array 
```

我没有测试过，但我认为这是正确的。如果不完全正确，您可以在此处阅读有关 json_decode() 的信息：http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:24:30.967

根据您的语法，对于打印主题标签字符串，您应该编写：

```
$result = json_decode($your_json);
echo $result->results[0]->entities->hashtags[0]->text; 
```

# windows - 是否有可能以编程方式防止游戏在其窗口失去焦点时暂停？

> ID：10091229
> 
> 赞同：6
> 
> 时间：2012-04-10T15:03:08.637
> 
> 标签：windows, directx

我在窗口模式下玩天际，我正在尝试为这个游戏创建一个机器人供个人使用。我想让机器人在后台玩游戏，而我做其他事情时，唯一的问题是游戏窗口在失去焦点时会暂停。有没有办法让天际进程认为它仍然有焦点，所以当我在另一个窗口上做其他事情时它会继续运行？我不是 Windows 编程专家，但如果我能以某种方式截取对进程说未集中或最小化的消息，从而让进程认为它仍然集中，这可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T15:20:49.437

It's possible. You need to find the mechanism through which the game checks whether it's in the foreground then trick it into thinking the switch has not occurred. This will require a certain amount of reverse engineering on your part. There are many different ways that this checking can actually be done by the game.

You can try to play with hooking one of the following messages/functions: [WM_KILLFOCUS](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646282%28v=vs.85%29.aspx), [WM_ACTIVATE](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646274%28v=vs.85%29.aspx), [GetForegroundWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633505%28v=vs.85%29.aspx). On the other hand, the game might be doing something funky with DirectX. I don't have much experience there.

To re-iterate, to do this properly you are really going to have to find out exactly how the game does the checking (and then subvert that).

# sql-server-2008 - 为 sql server express 数据库设置 dsn

> ID：10091232
> 
> 赞同：5
> 
> 时间：2012-04-10T15:03:20.243
> 
> 标签：sql-server-2008, odbc, dsn

如何为安装在本地计算机上的 64 位 sql server express 2008 R2 设置系统 dsn？

我去添加一个系统 dsn 并选择 sql server native client 10 并按照向导进行操作。但是，在询问要连接哪个 sql 服务器的下拉列表中，我没有看到本地计算机的任何选项。有什么我需要启用的吗？

谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T15:12:08.607

忽略下拉菜单并尝试输入`(local)\SQLEXPRESS`并查看是否有效？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:10:25.497

您可以连接通知 IP、本地主机或机器名称。如果使用该名称，则必须运行 SQL Server 浏览器

# php - 使用 POST URL 的 PHP 图像显示

> ID：10091235
> 
> 赞同：1
> 
> 时间：2012-04-10T15:03:27.467
> 
> 标签：php, mysql, post, imgur

流行的图片托管网站 Imgur 很棒，我是 PHP 新手。我只是想知道他们如何在输入 URL 时设法让图像显示在页面中，例如：

[http://imgur.com/gallery/yjg8v](http://imgur.com/gallery/yjg8v)

脚本如何知道显示某个图像`yjg8v`？他们在使用`$_SERVER['HTTP_HOST']`吗？

这里的新手，不想被勺子喂食，愿意阅读和学习，只是在互联网上找不到太多帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:07:12.300

像 imgur.com 这样的网站通常“干净的 URL”，而不是带有参数的传统 URL。

在清理 URL 之前，您会看到如下内容：

```
imgur.com/image.php?id=yjg8v 
```

在您的脚本中，您可以通过以下方式访问参数

```
$_GET['id']; 
```

要生成干净的 URL，您可以使用 Apache 中的 mod_rewrite（或您选择的 Web 服务器中的类似技术）将“/gallery/yjg8v”映射到“/image.php?id=yjg8v”。

[您可以在此处](http://www.sitepoint.com/apache-mod_rewrite-examples/)找到其他 mod_rewrite 信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:06:26.140

`yjg8v`是传递给名为 的脚本的参数`gallery`。它看起来不像一个普通的查询字符串，因为有多种编码网站的方法，普通的查询字符串 cab 看起来像一个目录结构，但实际上是通过前端控制器或 mod_rewrite 运行以从URL 类似于查询字符串。

这篇[SitePoint 文章有点旧](http://www.sitepoint.com/guide-url-rewriting/)，但演示了它如何与 mod_rewrite 完美配合。

您也可以使用[Apache 的 ForceType 纯粹通过 PHP 来完成此操作](http://www.websitepublisher.net/article/search_engine_friendly_urls/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:07:20.260

为了方便你，这称为url重写，所以真正的url是这样的： http://imgur.com/gallery/view.php?image= [yjg8v](http://imgur.com/gallery/view.php?image=yjg8v)

然后使用 $_GET['image']

# delphi - _vararrayput 中的 VarStringToOleStr。为什么？

> ID：10091244
> 
> 赞同：3
> 
> 时间：2012-04-10T15:04:04.710
> 
> 标签：delphi, delphi-7, variant

为什么在单元 Variants 的过程 _vararrayput 中调用过程 VarStringToOleStr。当将 Variant 类型的变量分配给变量数组的元素时，将调用此方法。事实是，在 Delphi <= 7 字符串类型中使用 for blob。而这种方式用在ODAC的组件中。

# selenium - 在 Selenium 中自动化循环的最佳方法

> ID：10091245
> 
> 赞同：1
> 
> 时间：2012-04-10T15:04:06.780
> 
> 标签：selenium, webdriver

我想自动化一些重复的任务——比如多次提交一些表单。我在页面加载问题上磕磕绊绊，所以我想让你问你是怎么做的。比如说，我想向我们的表单提交十个不同的条目。所以我可以做这样的事情：

```
for (int i =0; i<10; i++){
  String name = getNextName();
  String surname = getNextSurname();
  Webelement newUserButton = driver.findElement(By.id("newUser")));
  newUserButton.click();
  WebElement name = driver.findElement(By.id("name")));
  name.sendKeys(name);
  WebElement surname = driver.findElement(By.id("surname")));
  surname.sendKeys(surname);
  WebElement submit = driver.findElement(By.id("submit")));
  submit.click();
} 
```

但是我发现如果我的测试环境比较慢，上面的循环可能会崩溃。我尝试`Thread.sleep()`在代码中添加一些内容，但如果我想提交，比如说，200 个条目，编写脚本可能真的很长。

是否有任何功能只能等待表格准备就绪的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:49:10.137

听起来您需要添加显式等待 - 请参阅 Webdriver 页面[Advanced Usage - Explicit and Implicit Waits](http://seleniumhq.org/docs/04_webdriver_advanced.html)

通过显式等待，您可以告诉 webdriver 等到表单处于就绪状态 - 通常某个字段可见或重置（取决于单击提交时表单发生的情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T07:01:34.320

如果您使用的是 Selenium 2.0，您可以通过在代码中创建 WebDrivewWait 对象使 WebDriver 等到某些操作发生。您可以查看此链接以获取更多信息 - [http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/index.html)

# facebook - 如何按名称查找 Facebook 群组 ID

> ID：10091248
> 
> 赞同：6
> 
> 时间：2012-04-10T15:04:14.697
> 
> 标签：facebook, facebook-graph-api

我有一个 Facebook 应用程序，我希望能够阅读 facebook 群组供稿。我有一个用户输入的提要网址，如下所示： http: [//www.facebook.com/groups/music.sharing/](http://www.facebook.com/groups/music.sharing/)

不过，要访问提要，我只能使用它的 ID，如下所示：[http](http://graph.facebook.com/[id) ://graph.facebook.com/[id of group]/feed

我在参考中找不到任何内容，FQL 不允许按名称查询，所以.. 我被卡住了。有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T02:35:45.390

我们当前的项目也面临同样的问题。这不是使用 API 的优雅解决方案，但现在我们将通过抓取组登录页面的 HTML 来使用解决方法。组 ID 号通过链接在 html 中的此页面上出现四次。搜索 ID 最可靠的方法是搜索“cid=”，因为它在页面上只出现一次（无论如何现在）（cid= 后面是数字 ID）。当您检查组页面的 html 时，您会明白我的意思。

如果您找到了更有效的解决方案，如果您分享，我将不胜感激:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:13:34.287

现在不可能，有多个打开的[“错误”](http://developers.facebook.com/bugs/266531183435138?browse=search_4f844f6fd3ae99293930119)和[另一个](http://developers.facebook.com/bugs/297825100284329?browse=search_4f844feb330db9317125361)说明问题......

我尝试过的所有方法都失败了......例如（以下适用于页面）

```
fql?q=select id from profile where username='music.sharing' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T18:08:45.937

在错误解决之前，一个可能的替代方法是：如果您向用户请求权限，那么您可以请求额外的权限，`user_groups`然后查询 graph api `http://graph.facebook.com/[id of user]/groups`。返回的数据有组名、id、版本、bookmark_order。

# java - Java getPeerCertificates() 性能

> ID：10091250
> 
> 赞同：0
> 
> 时间：2012-04-10T15:04:14.797
> 
> 标签：java, ssl

我有一个服务器应用程序，只有一行

```
Certificate[] certs = sslSocket.getSession().getPeerCertificates(); 
```

这需要大约 5 秒才能完成。有没有办法让工作更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:07:32.543

如果套接字上没有进行任何 I/O，getSession() 将启动 SSL 握手，这可能需要很长时间。您正在与对等方进行通信。如果 I/O 已经在套接字上完成，它会工作得更快，但是当然成本只是转移到第一个 I/O 调用上。

# c# - 从 SQL Server 创建对象（不使用 ORM 框架）

> ID：10091253
> 
> 赞同：1
> 
> 时间：2012-04-10T15:04:22.347
> 
> 标签：c#, sql-server, design-patterns, orm

我很想从 SQL 服务器加载对象（出于性能原因，我回避了 orm 框架）

我的想法是有一个工厂类从服务器检索记录并创建适当类型的对象。

所有对象都将继承自一个抽象类：aDefinition。尽管从 aDefintion 派生的具体对象都具有一些相似的属性，但它们在基类之上还具有自己的独特属性。

由于我对编程还很陌生，所以我只是想了解一下我是否走在正确的轨道上。

我有几个问题：

*   在这种情况下使用抽象类是否有意义？

*   将定义集合存储在 DefinitionCreator 类中`List<aDefinition>`并为其提供访问对象的方法是一个好主意，还是为不同的对象类型创建不同的具体集合是一个更好的主意？

```
public class DefinitionTemplate
{
    public int DefinitionId { get; set; }
    public string Name { get; set; }
    public DefintionType DefinitionType { get; set; }
    public string Definition { get; set; }
    public string Parameters { get; set; }

    public DefinitionTemplate()
    {
    }
}

//abstract base class that my concrete classes will inherit from.
public abstract class aDefinition
{
    public int DefinitionId { get; protected set; }
    public string Name { get; protected set; }
    public DefintionType DefinitionType { get; protected set; }

    //abstract methods
    public abstract bool LoadDefinition(DefinitionTemplate template);
    public abstract bool SaveDefinition();
}

//concrete class representing a report-type definition.
public class ReportDefinition : aDefinition
{
    public string Definition { get; private set; }
    public string Parameters { get; private set; }

    public override bool LoadDefinition(DefinitionTemplate template)
    {
        this.DefinitionId = template.DefinitionId;
        this.Name = template.Name;
        this.DefinitionType = template.DefinitionType;
        this.Definition = template.Definition;
        this.Parameters = template.Parameters;
        return true;
    }

    public override bool SaveDefinition()
    {
        throw new NotImplementedException();
    }
}

//concrete class representing a configuration-type definition.
public class ConfigDefinition : aDefinition
{
    public string Parameters { get; private set; }

    public override bool LoadDefinition(DefinitionTemplate template)
    {
        this.DefinitionId = template.DefinitionId;
        this.Name = template.Name;
        this.DefinitionType = template.DefinitionType;
        this.Parameters = template.Parameters;
        return true;
    }

    public override bool SaveDefinition()
    {
        throw new NotImplementedException();
    }
}

//creator class that retreives the definitions from the server and creates the approprite object
public static class DefinitionCreator
{
    public void RetreiveDefinitions()
    {
        //sql statment to retreive definitions
        using(SqlCommand cmd = new SqlCommand("select * from definitions", new SqlConnection()))
        {
            using(SqlDataReader reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    switch (reader["DefinitionType"].ToString())
                    {
                        case "ReportDefinition":
                            //create a report definition object
                            break;
                        case "ConfigDefinition":
                            //create a config definition object
                            break;
                    }
                }
            }
        } 
    }
} 
```

# iphone - 模态视图重新出现 + 崩溃：“在转换过程中尝试转换”

> ID：10091256
> 
> 赞同：4
> 
> 时间：2012-04-10T15:04:34.977
> 
> 标签：iphone, ios, ios4, modalviewcontroller

让我提供一些背景信息：我正在构建一个选项卡式应用程序，它允许用户查找和查看托管在我们服务器上的一些视频。每个选项卡都有以不同方式分组的视频，导航栏中有一个分段控件，用户可以使用该控件更精确地对列表进行排序（按标题、日期等）。在分段控件中点击“排序”后，会显示一个模态视图控制器，其中包含特定选项卡上可用的选项。选择一个选项并将该选项转发回父视图控制器，该控制器在服务器上调用排序列表。

现在问题来了：在我们想要支持的 iOS 4.2 上，模式视图要么在选择排序选项后崩溃，要么在关闭后立即再次出现。如果它再次出现，它只会出现一次并且不会无限循环。我知道这与过渡和视图的生命周期有关，但我似乎无法做到这一点。

**代码：**

*父视图*

```
-(void) segmentAction:(id)sender{
    //create a sort view and pass it a value that indicates what the options should be
    ModalSortViewController *sortView = [[ModalSortViewController alloc]    
                                        initWithNibName:nil bundle:nil sortByView:0];
    [sortView setDelegate:self];
    [sortView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
    [sortView setModalPresentationStyle:UIModalPresentationFormSheet];
    [self presentModalViewController:sortView animated:YES];
}

-(void) refresh:(id)sender{
    [self fetchEntries];
}

//Delegate protocol for all tabbed table views
//Receives buttonIndex from the modal sort view
-(void)sortByButtonIndex:(int)buttonIndex{

    if(buttonIndex==1){
        //If sorting by title
        fetchURL = @"fakeURL.com/?method=iGetCategories&sortBy=category&sortByOrder=ASC";
        [self fetchEntries];
    }
    else if (buttonIndex==2){
        //If sorting by number of items
        fetchURL = @"fakeURL.com/?method=iGetCategories&sortBy=count&sortByOrder=DESC";
        [self fetchEntries];
    }
    else if(buttonIndex==0){
        //Resets sort selection to nothing
        segmentedControl.selectedSegmentIndex = -1;
    }
    [self dismissModalViewControllerAnimated:YES];
} 
```

*模态视图*

```
@synthesize delegate, option1, option2;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil sortByView:(int)_viewInt
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
        sortChosen = 0;
        viewInt = _viewInt;
    }
    return self;
}

//This method is called whenever a selection on the modal view has been made.
//The button tags have been set in IB and are sent to the parent table view controller
//where a switch statement is in place to sort its data by the selection.
-(IBAction)madeSelection:(id)sender{
    sortChosen = [sender tag];
    [self.delegate sortByButtonIndex:sortChosen];
}

-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated];//Added after Felix pointed out that the super was not called
    switch (viewInt) {
        case CAT_FOLDERS:
            [self.option1 setTitle:@"By Category Name" forState:UIControlStateNormal];
            [self.option2 setTitle:@"By Number of Items" forState:UIControlStateNormal];
            break;

        case PRES_FOLDERS:
            [self.option1 setTitle:@"By Presenter Name" forState:UIControlStateNormal];
            [self.option2 setTitle:@"By Number of Items" forState:UIControlStateNormal];
            break;

        case MEDIA:
            [self.option1 setTitle:@"By Media Title" forState:UIControlStateNormal];
            [self.option2 setTitle:@"By Release Date" forState:UIControlStateNormal];
            break;

        default:
            break;
    }
} 
```

**崩溃结果：**

```
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException',
reason: 'Attempting to begin a modal transition from <UINavigationController: 
0x139160> to <ModalSortViewController: 0x172810> while a transition is already in
progress. Wait for viewDidAppear/viewDidDisappear to know the current transition has completed' 
```

对不起，长度。我想尽可能清晰和彻底。先感谢您！

编辑：我应该提到崩溃/重复出现似乎取决于调用 sortByButtonIndex: 的位置以及视图被关闭的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:22:40.817

数字我会在我发布赏金后的几个小时内解决！

问题是我没有发布的 fetchEntries 方法，因为我认为它不是罪魁祸首，当它完成对服务器的调用时，将我的分段控件的选定索引设置为 -1。如果将 EventValueChanged 更改为 -1，则似乎较新版本的 iOS 会忽略它。我只是设置了一个条件来忽略 segmentAction: 方法中分段控件上的 -1 索引，它就可以工作。

```
-(void) segmentAction:(id)sender{

    if(segmentedControl.selectedIndex != -1){
        //create a sort view and pass it a value that indicates what the options should be
        ModalSortViewController *sortView = [[ModalSortViewController alloc]    
                                        initWithNibName:nil bundle:nil sortByView:0];
        [sortView setDelegate:self];
        [sortView setModalTransitionStyle:UIModalTransitionStylePartialCurl];
        [sortView setModalPresentationStyle:UIModalPresentationFormSheet];
        [self presentModalViewController:sortView animated:YES];
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:14:46.557

你不是`super`从内部调用`-(void)viewWillAppear:(BOOL)animated`。

尝试在顶部添加以下行：

```
[super viewWillAppear:animated]; 
```

这可能意味着您的 ViewController 的超级实现没有正确设置其出现标志。

# php - 使用带有 LAST_INSERT_ID() 的 PHP 插入多个表

> ID：10091259
> 
> 赞同：0
> 
> 时间：2012-04-10T15:04:48.293
> 
> 标签：php, mysql, sql

下面是我尝试过的代码，但我似乎无法做出正确的调整来让脚本正常运行。

```
$sql = 'INSERT INTO clients (first_name, last_name, email) VALUES('.$_POST['first_name'].', '.$_POST['last_name'].', '.$_POST['email'].')
INSERT INTO client_data (client_id, phone, zip, note) VALUES(LAST_INSERT_ID(), '.$_POST['phone'].', '.$_POST['zip'].', '.$_POST['message'].')';

mysql_query($sql) or die (mysql_error()); 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:06:51.490

您不能执行两个 sql 语句`mysql_query();`

使用这样的东西：

```
$sql = 'INSERT INTO clients (first_name, last_name, email) VALUES('.$_POST['first_name'].', '.$_POST['last_name'].', '.$_POST['email'].')';
mysql_query($sql);

$clientId = mysql_insert_id();

$sql = 'INSERT INTO client_data (client_id, phone, zip, note) VALUES('.$clientId.', '.$_POST['phone'].', '.$_POST['zip'].', '.$_POST['message'].')';

mysql_query($sql) or die (mysql_error()); 
```

但是*请*阅读 SQL 注入以及如何防止它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:07:58.353

您应该将其分成两个单独`mysql_query`的调用并使用该`mysql_insert_id`函数：

```
$firstName = mysql_real_escape_string($_POST["first_name"]);
$lastName = mysql_real_escape_string($_POST["last_name"]);
$email = mysql_real_escape_string($_POST["email"]);
$phone = mysql_real_escape_string($_POST["phone"]);
$zip = mysql_real_escape_string($_POST["zip"]);
$message = mysql_real_escape_string($_POST["message"]);

mysql_query("INSERT INTO clients (first_name, last_name, email) VALUES ('{$firstName}', '{$lastName}', '{$email}')") or die(mysql_error());
mysql_query("INSERT INTO client_data (client_id, phone, zip, note) VALUES ('". mysql_insert_id() ."', '{$phone}', '{$zip}', '{$message}')") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:10:24.967

只需进行 2 个查询：

```
$sql_insert_clients = "INSERT INTO clients (first_name, last_name, email) VALUES(".$_POST['first_name'].", ".$_POST['last_name'].", ".$_POST['email'].")";
mysql_query($sql_insert_clients) or die (mysql_error());

$sql_insert_client_data = "INSERT INTO client_data (client_id, phone, zip, note) VALUES(".mysql_insert_id().", ".$_POST['phone'].", ".$_POST['zip'].", ".$_POST['message'].")";
mysql_query($sql_insert_client_data) or die (mysql_error()); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-10T15:18:20.127

Your just missing the semi-colon to split the Insert's

```
$sql = 'INSERT INTO clients (first_name, last_name, email) 
        VALUES('.$_POST['first_name'].', '.$_POST['last_name'].', '.$_POST['email'].')'."; ".' INSERT INTO client_data (client_id, phone, zip, note) VALUES(LAST_INSERT_ID(), '.$_POST['phone'].', '.$_POST['zip'].', '.$_POST['message'].')';

mysqli_multi_query($sql) or die (mysql_error()); 
```

the SQL query it should be running (with dummy content) is

```
INSERT INTO clients (first_name, last_name, email) VALUES('test', 'surname', email); INSERT INTO client_data (client_id, phone, zip, note) VALUES(LAST_INSERT_ID(), 'phone', 'zip', 'message'); 
```

# java - 启动tomcat的cargo java api；容器没有出现

> ID：10091262
> 
> 赞同：1
> 
> 时间：2012-04-10T15:04:51.130
> 
> 标签：java, tomcat, cargo

我正在尝试使用 cargo api 启动 tomcat。从日志看一切都很好，但是当我点击 url(http://localhost:8079/) 时，tomcat 管理页面没有出现。

更新：我尝试从 eclipse 启动 tomcat。日志说的完全相同，但我看不到管理控制台。所以这肯定不是货物的问题。当我从 eclipse 启动服务器时，我得到一个 404 。

代码是这样的

```
LocalConfiguration configuration = (LocalConfiguration) new DefaultConfigurationFactory().createConfiguration(
        "tomcat6x", ContainerType.INSTALLED, ConfigurationType.STANDALONE);
    InstalledLocalContainer container =
        (InstalledLocalContainer) new DefaultContainerFactory().createContainer(
            "tomcat6x", ContainerType.INSTALLED, configuration);
    //container.setHome(installer.getHome());
    //container.setHome("C:\\Users\\Kriss\\AppData\\Local\\Temp\\cargo\\installs\\apache-tomcat-7.0.25\\apache-tomcat-7.0.25");

    container.setHome("C:\\TOSCA\\apache-tomcat-7.0.25-windows-x86\\apache-tomcat-7.0.25\\");
    container.setOutput("C:\\TOSCA\\output.log");
    //getting cargo related logging
    container.setLogger(fileLogger);
    //changing the log settings of the container
  //  configuration.setProperty(GeneralPropertySet.LOGGING, LoggingLevel.HIGH.getLevel());

    configuration.setProperty("cargo.servlet.port", "8079");

    logger.info(container.getOutput());
    container.setAppend(false);

    logger.info("gethome value is" + container.getHome());

 // (3) Statically deploy some WAR (optional)
  //  configuration.addDeployable(new WAR("cargo.war"));
 // (4) Start the container
    container.start();
    logger.info("Container is started");
    Thread.sleep(26000);
    container.stop();
    logger.info("Container is stopped"); 
```

日志看起来不错（至少对我来说：P）

```
Apr 10, 2012 4:27:54 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [C:\Users\Kriss\AppData\Local\Temp\cargo\conf\common\classes], exists: [false], isDirectory: [false], canRead: [false]
Apr 10, 2012 4:27:54 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [C:\Users\Kriss\AppData\Local\Temp\cargo\conf\common\lib], exists: [false], isDirectory: [false], canRead: [false]
Apr 10, 2012 4:27:54 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [C:\Users\Kriss\AppData\Local\Temp\cargo\conf\shared\classes], exists: [false], isDirectory: [false], canRead: [false]
Apr 10, 2012 4:27:54 PM org.apache.catalina.startup.ClassLoaderFactory validateFile
WARNING: Problem with directory [C:\Users\Kriss\AppData\Local\Temp\cargo\conf\shared\lib], exists: [false], isDirectory: [false], canRead: [false]
Apr 10, 2012 4:27:55 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files/Java/jre7/bin/client;C:/Program Files/Java/jre7/bin;C:/Program Files/Java/jre7/lib/i386;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files\Broadcom\Broadcom 802.11 Network Adapter\Driver;C:\Program Files\Java\jdk1.7.0_01\bin;C:\Program Files\QuickTime\QTSystem\;C:\Program Files\TortoiseSVN\bin;.
Apr 10, 2012 4:27:55 PM org.apache.catalina.startup.SetAllPropertiesRule begin
WARNING: [SetAllPropertiesRule]{Server/Service/Connector} Setting property 'emptySessionPath' to 'true' did not find a matching property.
Apr 10, 2012 4:27:55 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8079"]
Apr 10, 2012 4:27:55 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 10, 2012 4:27:55 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 674 ms
Apr 10, 2012 4:27:55 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 10, 2012 4:27:55 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.25
Apr 10, 2012 4:27:55 PM org.apache.catalina.startup.HostConfig deployDescriptor
INFO: Deploying configuration descriptor C:\Users\Kriss\AppData\Local\Temp\cargo\conf\conf\Catalina\localhost\manager.xml
Apr 10, 2012 4:27:56 PM org.apache.catalina.startup.HostConfig deployWAR
INFO: Deploying web application archive C:\Users\Kriss\AppData\Local\Temp\cargo\conf\webapps\cargocpc.war
Apr 10, 2012 4:27:56 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\Users\Kriss\AppData\Local\Temp\cargo\conf\webapps\host-manager
Apr 10, 2012 4:27:56 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8079"]
Apr 10, 2012 4:27:56 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8009"]
Apr 10, 2012 4:27:56 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 610 ms

Minor detail: when i tried to start, bootstrap was missing some classes which were part of tomcat-juli.jar. so i unjarred that and put the classes inside bootstrap.jar. I just thought i should mention that as a side comment though i dont think it is causing some problem.. 

Also here is the log when i start tomcat using command prompt:

Apr 09, 2012 1:55:36 PM org.apache.catalina.core.AprLifecycleListener init
INFO: Loaded APR based Apache Tomcat Native library 1.1.22.
Apr 09, 2012 1:55:36 PM org.apache.catalina.core.AprLifecycleListener init
INFO: APR capabilities: IPv6 [false], sendfile [true], accept filters [false], r
andom [true].
Apr 09, 2012 1:55:37 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-apr-8080"]
Apr 09, 2012 1:55:37 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-apr-8009"]
Apr 09, 2012 1:55:37 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1944 ms
Apr 09, 2012 1:55:37 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 09, 2012 1:55:37 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.25
Apr 09, 2012 1:55:37 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\TOSCA\apache-tomcat-7.0.25-windows-
x86\apache-tomcat-7.0.25\webapps\docs
Apr 09, 2012 1:55:38 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\TOSCA\apache-tomcat-7.0.25-windows-
x86\apache-tomcat-7.0.25\webapps\examples
Apr 09, 2012 1:55:38 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\TOSCA\apache-tomcat-7.0.25-windows-
x86\apache-tomcat-7.0.25\webapps\host-manager
Apr 09, 2012 1:55:38 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\TOSCA\apache-tomcat-7.0.25-windows-
x86\apache-tomcat-7.0.25\webapps\manager
Apr 09, 2012 1:55:38 PM org.apache.catalina.startup.HostConfig deployDirectory
INFO: Deploying web application directory C:\TOSCA\apache-tomcat-7.0.25-windows-
x86\apache-tomcat-7.0.25\webapps\ROOT
Apr 09, 2012 1:55:38 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-apr-8080"]
Apr 09, 2012 1:55:38 PM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-apr-8009"]
Apr 09, 2012 1:55:38 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 927 ms 
```

# java - Java中的图像、绘图和操作框架？

> ID：10091263
> 
> 赞同：1
> 
> 时间：2012-04-10T15:04:57.990
> 
> 标签：java, image-processing, drawing, javafx-2

我想创建一个小型 Java 应用程序，它能够进行简单的图像操作（图层等）和绘图（简单的形状、填充等）。

什么框架最适合用于此？我正在研究 JavaFX 2.0，它似乎非常适合这个，但是它没有导出图像的功能（这是一个必须具备的功能）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:16:35.837

JavaFX 2 将为您工作。

导出图像可以通过[将 ScatterChart 的图像复制到 JavaFX 2.0 中的系统剪贴板中描述的解决方法来完成](https://stackoverflow.com/questions/8496977/copying-the-image-of-a-scatterchart-to-system-clipboard-in-javafx-2-0)

# android - 如何覆盖Android Listview的行

> ID：10091267
> 
> 赞同：0
> 
> 时间：2012-04-10T15:05:12.983
> 
> 标签：android, listview, android-listview

我正在尝试实现以下 Android ListView。每个黄色框代表一行 ListView。如果您看到这些行，则每行都与上一行和下一行重叠。我搜索了谷歌，但我找不到任何合适的解决方案。如果有人有线索，请告诉我。

提前致谢。

![在此处输入图像描述](../Images/a1d30288da8b34d65b36dfd17e74ad91.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:26:21.187

创造性思考。想象一下这个列表没有行重叠，但只有对角线。在您的代码中，将 Listview 的分隔线高度设置为 0：

```
ListView listView = (ListView)findViewById(R.id.your_listview);
listView.setDivider(null);
listView.setDividerHeight(0); 
```

然后为行创建两个可绘制对象 - 一个用于奇数行，另一个用于偶数行：

![在此处输入图像描述](../Images/24f2e069e9c726db0689bb2175229402.png) 和 ![在此处输入图像描述](../Images/87ce46a236e696325e1579905c461248.png)

（不要使用这两个图像，因为它们的大小不正确/均匀，但要为您的特定列表创建这些图像）。

然后为您的列表视图创建一个适配器 - 并在其`getView`方法中为您的元素设置相应的背景：

```
@override
public void getView(int position, View convertView, ViewGroup parent) {
    MyView row;

    if(convertView == null) {
        row = (MyView)convertView;
    }
    else {
        row = ... //create your view - inflate or create in code
    }

    row.setBackgroundResource(position%2==1 ? R.drawable.row_odd : R.drawable.row_even);

    ...  //populate the rest of the row with whatever you need

    return row;
} 
```

瞧！你得到你需要的效果（注意，在这个示意图上，黑线代表行之间的边界 - 这些仅用于示意性目的 - 在你的最终结果中你不会有它们）：

![在此处输入图像描述](../Images/8c53277a74a8199ced89d202582c67d9.png)

最后，请注意，如果您想在选择项目时突出显示“行”，则必须实现自定义状态更改侦听器，这将更改被选中单元格的背景以及其上方和下方的背景以创造适当的视觉效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-21T19:32:19.430

我遇到了同样的问题，但我设法找到了解决方案

在 xml 的 ListView 中，您可以设置一个负的 dividerHeight，它对我有用。

```
<ListView
...
android:dividerHeight="-5dp" /> 
```

我希望它可以帮助某人:)

# python - 如何在不使用任何库的情况下使用 Python 实现简单的 Web 服务器？

> ID：10091271
> 
> 赞同：8
> 
> 时间：2012-04-10T15:05:20.690
> 
> 标签：python, http, sockets, webserver, websocket

我需要在 Python 中实现一个非常简单的类似 Web 服务器的应用程序，它将执行基本的 HTTP 请求和响应，并在网页上显示非常基本的输出。我不太关心在 Python 中实际编码它，但我不知道从哪里开始？如何设置？一个文件？多个文件？我想我不知道如何处理这是一个“服务器”这一事实 - 所以我不熟悉如何处理 HTTP 请求/套接字/处理请求等。有什么建议吗？资源？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T15:09:25.153

您应该查看[SimpleHttpServer](https://docs.python.org/2/library/simplehttpserver.html) (py3: [http.server](https://docs.python.org/3/library/http.server.html) ) 模块。

根据您要执行的操作，您可以直接使用它，也可以查看模块的源代码（[py2](http://hg.python.org/cpython/file/2.7/Lib/SimpleHTTPServer.py)、[py3](https://hg.python.org/cpython/file/3.5/Lib/http/server.py)）以获取想法。

如果你想获得更底层的，SimpleHttpServer 扩展[BaseHttpServer](https://docs.python.org/2/library/basehttpserver.html) ( [source](http://hg.python.org/cpython/file/2.7/Lib/BaseHTTPServer.py) ) 使其正常工作。

如果您想获得*更*底层的信息，请查看[SocketServer](http://docs.python.org/library/socketserver.html)（来源：[py2](http://hg.python.org/cpython/file/2.7/Lib/SocketServer.py)，[py3](https://hg.python.org/cpython/file/3.5/Lib/socketserver.py)）。

如果他们只想共享一个目录，人们通常会像`python -m SimpleHttpServer`（或）一样运行 python：它是一个功能齐全且......简单的服务器。`python3 -m http.server`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T00:22:08.897

您可以为此目的使用[套接字编程。](http://docs.python.org/howto/sockets.html)以下代码段创建一个 tcp 套接字并在端口 9000 上侦听 http 请求：

```
from socket import *

def createServer():
    serversocket = socket(AF_INET, SOCK_STREAM)
    serversocket.bind(('localhost',9000))
    serversocket.listen(5)
    while(1):
        (clientsocket, address) = serversocket.accept()
        clientsocket.send("HTTP/1.1 200 OK\n"
         +"Content-Type: text/html\n"
         +"\n" # Important!
         +"<html><body>Hello World</body></html>\n")
        clientsocket.shutdown(SHUT_WR)
        clientsocket.close()

    serversocket.close()

createServer() 
```

启动服务器，`$ python server.py`. `http://localhost:9000/`在您的网络浏览器（充当客户端）中打开。然后在浏览器窗口中，您可以看到文本“Hello World”（http 响应）。

编辑**之前的代码只在chrome上测试过，正如你们对其他浏览器的建议，代码被修改为：

1.  要使响应类似于 http，您可以发送带有 http 版本 1.1、状态代码 200 OK 和内容类型 text/html 的普通标头。
2.  提交响应后，客户端套接字需要关闭，因为它是 TCP 套接字。
3.  要正确关闭客户端套接字，`shutdown()`需要调用[socket.shutdown vs socket.close](https://stackoverflow.com/questions/409783/socket-shutdown-vs-socket-close)

然后在 chrome、firefox ( [http://localhost:9000/](http://localhost:9000/) ) 和终端中的简单 curl (curl [http://localhost:9000](http://localhost:9000) ) 上测试代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-05T15:10:31.417

我决定在 Python 3 中完成这项工作，并让它在 Chrome 中用作我正在开发的在线课程的示例。Python 3 当然需要`encode()`并且`decode()`在正确的地方。Chrome - 真的想在获取数据之前发送它的**GET**请求。我还添加了一些错误检查，以便在您中止服务器或崩溃时清理其套接字：

```
def createServer():
    serversocket = socket(AF_INET, SOCK_STREAM)
    try :
        serversocket.bind(('localhost',9000))
        serversocket.listen(5)
        while(1):
            (clientsocket, address) = serversocket.accept()

            rd = clientsocket.recv(5000).decode()
            pieces = rd.split("\n")
            if ( len(pieces) > 0 ) : print(pieces[0])

            data = "HTTP/1.1 200 OK\r\n"
            data += "Content-Type: text/html; charset=utf-8\r\n"
            data += "\r\n"
            data += "<html><body>Hello World</body></html>\r\n\r\n"
            clientsocket.sendall(data.encode())
            clientsocket.shutdown(SHUT_WR)

    except KeyboardInterrupt :
        print("\nShutting down...\n");
    except Exception as exc :
        print("Error:\n");
        print(exc)

    serversocket.close()

print('Access http://localhost:9000')
createServer() 
```

服务器还打印出传入的 HTTP 请求。不管请求如何，代码当然只发送 text/html - 即使浏览器正在请求 favicon：

```
$ python3 server.py
Access http://localhost:9000
GET / HTTP/1.1
GET /favicon.ico HTTP/1.1
^C
Shutting down... 
```

但这是一个很好的例子，它主要说明了为什么要使用像 Flask 或 DJango 这样的框架，而不是自己编写。感谢您的初始代码。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-01-26T20:25:33.527

上面提到了一个非常简单的解决方案，但是上面的解决方案不起作用。该解决方案在 chrome 上进行了测试，并且可以正常工作。这是 python 3，尽管它可能适用于 python 2，因为我从未测试过它。

```
from socket import *

def createServer():
    serversocket = socket(AF_INET, SOCK_STREAM)
    serversocket.bind(('localhost',9000))
    serversocket.listen(5)
    while(1):
        (clientsocket, address) = serversocket.accept()
        clientsocket.send(bytes("HTTP/1.1 200 OK\n"
         +"Content-Type: text/html\n"
         +"\n" # Important!
         +"<html><body>Hello World</body></html>\n",'utf-8'))
        clientsocket.shutdown(SHUT_WR)
        clientsocket.close()

    serversocket.close()

createServer() 
```

这比接受的答案有所改进，但我会发布这个，以便未来的用户可以轻松使用它。

# c# - 如何在没有 Multiline = "true" 或增加字体大小的情况下增加文本框的高度？

> ID：10091284
> 
> 赞同：8
> 
> 时间：2012-04-10T15:05:54.777
> 
> 标签：c#, winforms, textbox

我需要调整文本框的高度，使其适合触摸屏。

我理解人们推荐`Multiline = "true"`，但如果我这样做，框内的文本与顶部对齐，这在我的应用程序中是不合适的。

我试图调整字体大小，但大小应该非常大，以适应我需要的高度。

有没有其他方法可以增加文本框的高度？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T15:08:05.047

试试这个：

```
textBox1.AutoSize = false; 
```

它不会出现在智能感知中，但它会起作用。

要让它与设计器一起工作，您必须制作自己的 TextBox：

```
public class TextBoxEx : TextBox {
  public TextBoxEx() {
    this.AutoSize = false;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T08:37:48.353

技巧步骤：

1.  设置多行=true
2.  无需更改字体大小。
3.  更改最大长度。所以它不应该进入下一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-28T16:58:33.353

对于我想使用标签而不是使用标签来做的事情，`BorderStyle=Fixed3D`并且`AutoSize=False`成功了。

# html - 是否可以使用 Tumblr 构建日历？

> ID：10091287
> 
> 赞同：0
> 
> 时间：2012-04-10T15:06:03.583
> 
> 标签：html, calendar, tumblr

正如问题所问的那样，是否可以构建一个自定义 tumblr 主题，其中包括一个带有日期列表的日历，突出显示有帖子的日期？

我知道不可编辑的存档页面具有类似的功能，但理想情况下，我想在侧边栏中的主题中包含一个小日历。我没有看到任何可以帮助组装的 tumblr 模板标签，我也无法搜索到任何此类示例。

# ios - MPMoviePlayerController 在全屏模式后使 App 的方向不正确

> ID：10091290
> 
> 赞同：2
> 
> 时间：2012-04-10T15:06:10.317
> 
> 标签：ios, ipad, mpmovieplayercontroller, uiinterfaceorientation

所以我们构建了一个只支持横向的 iPad App。这是通过在 plist 中设置`Supported interface orientations (iPad)`to 来强制执行的。`Landscape (left/right home button)`所有的`UIViewControllers`都实现`shouldAutorotateToInterfaceOrientation:`如下：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

这工作正常，应用程序被锁定为横向。现在我们有一个`MPMoviePlayerController`嵌入我们的视图。当用户全屏观看这部电影时，他可以旋转到纵向。电影播放器​​似乎绕过了我们所有的横向设置。这对我来说很好，但是当用户`done`仍然在纵向时点击 - 按钮时，我们所有的`UIViewControllers`人也都是纵向的并且看起来很糟糕！

用户必须将 iPad 旋转到横向以使事物再次看起来不错，然后将无法按预期旋转回纵向。

那么为什么即使所有人都`shouldAutorotateToInterfaceOrientation`告诉iOS不要旋转到纵向，我的视图也会旋转到纵向呢？以及如何确保电影播放器​​不会旋转我的视图？

如果您的解决方案还将电影播放器​​本身锁定为横向，那对我来说很好。只要我的观点不旋转，我就很高兴！:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-20T15:33:53.073

> 那么，即使所有 shouldAutorotateToInterfaceOrientation 都告诉 iOS 不要旋转到纵向，为什么我的视图会旋转到纵向？以及如何确保电影播放器​​不会旋转我的视图？
> 
> 如果您的解决方案还将电影播放器​​本身锁定为横向，那对我来说很好。只要我的观点不旋转，我就没事！:)

使用此视图层次结构时，我遇到了这个确切的问题：

```
 +------------------------+  +-------------------+
       |                        |  |                   |
       | UINavigationController +->| Some Intermediate |
       |                        |  | View Controllers  |
       +------------------------+  |                   |
                                   +---------------+---+
                                                   |
                                                   v
                                          +--------------------------+
                                          |  MPMoviePlayerController |
                                          |       (embed)            |
                                          +--------------------------+ 
```

所有中间视图控制器都被锁定为横向，因此应用程序永远不会处于纵向，除非 MPMoviePlayerController 处于全屏状态（导致与 OP 完全相同的问题）。

**解决方案是通过创建一个覆盖 UINavigationController 的子类来将UINavigationController**锁定为横向`shouldAutorotateToInterfaceOrientation`。这样 MPMoviePlayerController 不再旋转到纵向。我怀疑进入全屏时它会将自己添加到主窗口的 rootViewController，在我的例子中是 UINavigationController（或者更确切地说是我的子类）。

希望这可以帮助！

# django - 数据仓库和 Django

> ID：10091291
> 
> 赞同：5
> 
> 时间：2012-04-10T15:06:12.473
> 
> 标签：django, postgresql, data-warehouse

这更像是一个架构问题，而不是技术问题。

我目前正在构建一个需要存储大量数据并使用该数据进行分析（消费者行为）的商业网站/社交网络。

我正在使用 Django 和 PostgreSQL 数据库。

现在我的问题是：我想扩展这个架构以包含一个数据仓库。理想情况是：操作数据库是当前的 Django PostgreSQL 数据库，而数据仓库是额外的，最好是多维模型。

我们仍处于非常早期的阶段，我们将使用 50 个用户进行测试，因此对于初学者来说，诸如单列表之类的原始内容就足够了。

我想知道是否有人在这种情况下有经验，这可以向我推荐一个创建数据仓库的框架，同时使用 Django 模型维护操作数据库以方便使用（如果可能的话）。

先感谢您！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T19:10:56.960

以下是我最近使用的一些很酷的开源工具：

*   [Kettle](http://kettle.pentaho.com/) - 很棒的 ETL 工具，您可以使用它来将操作数据库中的数据提取到您的仓库中。支持任何带有 JDBC 驱动程序的数据库，并使其非常容易构建，例如星型模式。
*   [Saiku - 基于](http://analytical-labs.com/)[Pentaho Mondrian](http://mondrian.pentaho.com/)（MDX 实现）构建的漂亮 Web 2.0 前端。这使您的用户可以轻松地构建复杂的聚合查询（想想 Excel 中的数据透视表），并且 Mondrian 层提供缓存等以使事情快速进行。在此处尝试[演示](http://demo.analytical-labs.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:34:57.233

我的回答不一定适用于数据仓库。在您的情况下，我看到了在OLTP 关系存储（在本例中是 PostgreSQL）旁边实现[NoSQL数据库解决方案的可能性。](http://en.wikipedia.org/wiki/NoSQL)

为什么要考虑*NoSQL*？除了明显的可扩展性优势之外，NoSQL 还提供了许多*可能*适用于您的场景的优势。例如，具有不同字段集的记录和基于键的访问的灵活性。

由于您仍处于“试用”阶段，您可能会发现根据您的托管服务提供商决定使用 NoSQL 数据库解决方案更容易。例如[AWS](http://aws.amazon.com/)有[SimpleDB](http://aws.amazon.com/simpledb/)，[谷歌 App Engine](https://developers.google.com/appengine/)提供他们自己的[DataStore](https://developers.google.com/appengine/docs/python/datastore/)等等。但是还有很多其他的 NoSQL 解决方案可以使用，它们有很好的 Python 绑定。

# android - 如何从 Python 获取 android 设备目录？在 Windows 中

> ID：10091302
> 
> 赞同：0
> 
> 时间：2012-04-10T15:06:41.160
> 
> 标签：android, python, windows, device

我正在制作一个脚本来将一些文件从我的电脑同步到我的安卓。

如何列出（通过 USB）连接到我的计算机的所有 androids 目录？

我尝试使用此[http://gallery.technet.microsoft.com/scriptcenter/488836b0-84e9-4c0c-b2cf-dd19f6e70f74](http://gallery.technet.microsoft.com/scriptcenter/488836b0-84e9-4c0c-b2cf-dd19f6e70f74)但我在所有这些 Windows 依赖项方面遇到了太多麻烦。也尝试使用 ctypes 中的 windll.kernel32，但发现它使用起来太混乱了（缺少示例无济于事）。

有什么方法可以在不安装 Android SDK 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T05:28:22.670

如果您的意思是检测哪个可移动媒体是 Android 存储，您可以扫描所有可移动驱动器以查找 Android/ 或 .android_secure/ 文件夹，这表明该设备是 Android。[此处](http://docs.python.org/library/filesys.html)的文档可能有用。

# exception-handling - 在 pl sql 中的所有异常情况下无论如何都要做些什么吗？

> ID：10091309
> 
> 赞同：2
> 
> 时间：2012-04-10T15:07:15.827
> 
> 标签：exception-handling, plsql

我想在发生异常时为变量赋值。

```
exception
  when excep1 then
    var = true;
  when excep2 then
    var = true;
end; 
```

我想做类似的事情，这可能吗？

```
exception
   var = true;
   when excep1 then
    -- do something
   when excep2 then
    -- do something
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T19:25:40.533

按照 Odi 的建议再加注肯定会奏效。通过做一些不同的事情，你会得到同样的效果。

```
begin
  var := true;

  ... your code that can cause exceptions...

  var := false; --var set to false unless an exception was encountered
exception
  when exception1 then
    ...
  when exception2 then
    ...
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:09:48.200

您可以使用子块执行此操作，首先设置值，然后重新引发异常以处理它：

```
 begin
    begin
    -- do something
    exception
      when others then
        var = true;
        raise; -- re-raise the current exception for further exception handling
    end;
  exception
    when excep1 then
      -- do something
    when excep2 then
      -- do something
  end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T02:09:50.460

另一种方法是将其放在另一个过程中，例如：

```
declare
  procedure common_exception_routine is
  begin
    var = true;
  end common_exception_routine;
begin
  ...
exception
  when excep1 then
    common_exception_routine;
  when excep2 then
    common_exception_routine;
end; 
```

# ruby - Rails gsub 无法显示 \u20B9 的符号（卢比符号）

> ID：10091312
> 
> 赞同：0
> 
> 时间：2012-04-10T15:07:20.817
> 
> 标签：ruby, ruby-on-rails-3

NumberHelper 中的 Rails gsub 方法显示符号直到 unicode '\u20B8'，但未能显示任何符号 '\u20B9'。

导轨 - 3.0.5 红宝石 - 1.9.2-p0

在 Rails 控制台中，执行以下命令：

```
ruby-1.9.2-p0 > value = "123.45"
 => "123.45" 
ruby-1.9.2-p0 > unit = "\u20B9"
 => "\u20B9" 
ruby-1.9.2-p0 > puts unit
₹
 => nil 
ruby-1.9.2-p0 > format = "%u %n"
 => "%u %n" 
ruby-1.9.2-p0 > format.gsub(/%n/, value).gsub(/%u/, rup)
 => "\u20B9 123.45" 
ruby-1.9.2-p0 > format.gsub(/%n/, value).gsub(/%u/, "\u20B8")
 => "₸ 123.45" 
ruby-1.9.2-p0 > 
```

请建议为什么 gsub 会出现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:16:30.347

我不明白问题是什么。它完全按照您的预期进行。IRB 正在向您显示`#inspect`输出，它会生成带有引号和 unicode 转义序列的字符串。只是`puts`为了实际看到它呈现：

```
>> unit = "\u20B9"
=> "₹"
>> value = "123.45"
=> "123.45"
>> format = "%u %n"
=> "%u %n"
>> puts format.gsub(/%n/, value).gsub(/%u/, unit)
₹ 123.45
=> nil 
```

以上内容直接来自撬动会议。

编辑 | 另请注意，您的使用`#gsub`很奇怪。您可以对正在执行的操作使用格式字符串：

```
>> puts "%s %.2f" % [unit, value]
=> ₹ 123.45 
```

# ruby-on-rails - Rails 是否将其自己的操作报告为已弃用？

> ID：10091315
> 
> 赞同：0
> 
> 时间：2012-04-10T15:07:27.603
> 
> 标签：ruby-on-rails, ruby-on-rails-plugins, attachment-fu

对不起，如果这是一个愚蠢的问题，但这个问题很简单。如果我做，

```
$ rails new testproj
$ cd testporj
$ rails plugin install git://github.com/technoweenie/attachment_fu.git 
```

应该只创建一个空项目并在其中安装 attachment_fu 。但是，尝试启动它：

```
$ rails s
=> Booting WEBrick
=> Rails 3.2.2 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed
in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and conf
ig/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/01/04/rails
-3-2-0-rc2-has-been-released. (called from <top (required)> at c:/Users/fgadotti/rails/apps/blobtest/testproj/confi
g/environment.rb:5)
Exiting 
```

见鬼？我错过了什么？它是我安装的 Windows 上的 rails 3.2.2。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:43:21.537

`plugin install`将在 Rails 4 中弃用。

现在首选 Gem，它们被添加到`Gemfile`应用程序的根目录并安装`bundle install`

rails 3 对 attachment_fu 的支持不是很好，我会改用carrierwave。您可以使用 Rmagick 的[to_blob](http://studio.imagemagick.org/RMagick/doc/image3.html#to_blob)方法将图像存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:11:20.987

就像错误表明需要一个新的rails版本一样：

确保将 gemfile 添加到最新版本并运行

```
rake rails:update 
```

这也是一件事，警告建议您需要将依赖项移出供应商并将它们放入您的 gemfile 然后运行：

```
bundle install 
```

# r - read.csv 使用日期值附加/修改列标题

> ID：10091319
> 
> 赞同：4
> 
> 时间：2012-04-10T15:07:51.660
> 
> 标签：r, csv, dataframe

我正在尝试将 csv 文件读入 R 中，该文件在某些​​列标题中具有日期值。

例如，数据文件如下所示：

```
ID  Type   1/1/2001  2/1/2001  3/1/2001  4/1/2011
A   Supply       25        35        45        55  
B   Demand       26        35        41        22
C   Supply       25        35        44        85  
D   Supply       24        39        45        75  
D   Demand       26        35        41        22 
```

...我的 read.csv 逻辑看起来像这样

```
dat10 <- read.csv("c:\data.csv",header=TRUE, sep=",",as.is=TRUE) 
```

read.csv 工作正常，只是它修改了带有日期的列的名称，如下所示：

```
x1.1.2001  x2.1.2001  x3.1.2001  x4.1.2001 
```

有没有办法防止这种情况，或者事后更正的简单方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T15:13:06.387

设置`check.names=FALSE`。但请注意，`1/1/2001`et al 在语法上是无效的名称，因此它们可能会让您有些头疼。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:13:20.813

您始终可以使用该`colnames`函数更改列名。例如，

```
colnames(dat10) = gsub("\\.", "/", colnames(dat10)) 
```

但是，在列名中使用斜杠并不是一个特别好的主意。您始终可以在打印表格之前或创建图表时更改它们。

# c# - tsql 条件与 c# 条件性能

> ID：10091320
> 
> 赞同：1
> 
> 时间：2012-04-10T15:07:58.290
> 
> 标签：c#, performance, tsql, switch-statement, conditional-statements

我想知道在这样的 tsql 查询中什么执行得更快以及它更可取的条件是：

`select case 'color' when 'red' then 1 when 'blue' then 2 else 3 end`

还是在从数据库中获取值后在 c# 代码中执行相同的切换？

```
switch(color):
{
   case "red":
      return 1;
   case "blue":
      return 2;
   default:
      return 3;
} 
```

为了在我的特定情况下添加更多数据，我们有一个 sql 查询，在某些情况下返回 5800 多条记录（日期过滤器等），然后我们将这些结果连接到 c#（每条记录一个 txt 行）并生成一个 txt。

我们有一台服务器，即 sql server + webserver(asp.net)，生成它需要 10 分钟或更长时间......所以我们考虑在 sql 端执行所有条件，也许将字段连接为一个在 sql 级别也与使用带有 StringBuilder 的 c# 循环？

现在 sql 需要 1 秒来执行，并且在连接循环中所花费的所有时间，有 5873 条记录，每条记录有 11 个字段

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:16:57.960

我认为您过早地进行了优化。“让它发挥作用，让它正确，然后让它快速。”

我知道这个声明（以及其他类似的声明）会引起很多争论，但我认为你应该把这个逻辑放在最合适的层中，比如重复最少、可重用性最高、最简单的层维护等。如果您此时遇到性能问题，您可以在您的环境中使用自己的负载进行实际测量。

作为一个例子，而不是像这样的一些裸开关（必须维护），也许这应该在数据库中的查找表中并通过连接带回来，或者它可能更好地暴露为基于某个类的属性枚举。这些可能是更好的模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:13:18.320

在处理器上所有条件相同的情况下，您的性​​能可能将更多地取决于工作负载和带宽。

您会通过用整数替换字符串还是简单地添加整数列来节省带宽？是否会对行进行任何过滤，从而导致通过网络传输的数据显着减少？

如果您有 2 台 Web 服务器和 1 台 sql 服务器，处理器工作将通过在 Web 服务器上进行分配。如果您有数千个富客户端和 1 个 sql server，则处理器工作将完全分布在客户端上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:15:17.757

这真的不能说，因为有太多未知的因素。

例如，这取决于您从数据库返回多少数据、如何处理返回的数据以及数据库服务器或应用程序服务器是否满负荷。

`switch`本身会比 快，但是这`select`很容易被从数据库中返回数字而不是字符串在代码中处理速度更快的事实所抵消。

# php - 为什么我的特定页面 tpl.php 没有被使用？

> ID：10091322
> 
> 赞同：3
> 
> 时间：2012-04-10T15:08:02.080
> 
> 标签：php, drupal, drupal-7, drupal-theming

我似乎无法`page--xxxxxxx.tpl.php`为特定页面使用唯一的。

我创建了一个“页面”内容，填充它，并给它一个路径别名。比方说：“ `mypage/mycontent`”。然后我`page--mypage--mycontent.tpl.php`在主题的根目录中创建了一个文件。而不是使用它，我`page.tpl.php`正在使用它。

我的印象是 Drupal 7 会自动使用 的格式搜索模板建议`page--path.tpl.php`，这是不正确的吗？我需要先在我的 template.php 文件中包含特定代码吗？我确实尝试清除主题缓存，顺便说一句，这并没有什么不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T07:49:39.500

如果它只是一个节点，请尝试将您的模板文件重命名为**page--node--NID.tpl.php**然后刷新缓存，也不要忘记将**NID**替换为该节点的 nid 类似于**page- -node--11.tpl.php** :)

希望这行得通……穆罕默德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T09:25:03.767

您的印象是正确的，并且`page--mypage--mycontent.tpl.php`（即您已经尝试过的那个）是用于覆盖`page.tpl.php`具有该特定路径“ `mypage/mycontent`”的页面的正确文件名。您无需更改任何其他内容。

但是，除了清除 Drupal 的缓存之外，*还*需要清除浏览器的缓存。在大多数浏览器（包括 Firefox 和 MSIE）中，您可以通过在重新加载页面时按住 SHIFT 键来执行此操作。如果不清除浏览器的缓存，您将无法在浏览器中查看您的模板建议。

# perl - Perl 奇怪的行为，在脚本中声明的变量和 获取变量差异

> ID：10091323
> 
> 赞同：1
> 
> 时间：2012-04-10T15:08:02.767
> 
> 标签：perl

我有这个脚本，工作正常：

```
#!/usr/bin/perl

$key = pack("H*","3cb37efae7f4f376ebbd76cd");

$str = "&4\=80CHB'";
$dec = decode($str);
print "Decoded string value: $dec\n";

sub decode{ #Sub to decode
    @subvar=@_;
    my $sqlstr = $subvar[0];
    $cipher = unpack("u", $sqlstr);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

如果我改变它以从 STDIN 获取 $str 变量，它会弄乱所有结果：

```
#!/usr/bin/perl

$key = pack("H*","3cb37efae7f4f376ebbd76cd");

print "Enter string to decode: ";
$str=<STDIN>;chomp $str;
$dec = decode($str);
print "Decoded string value: $dec\n";

sub decode{ #Sub to decode
    @subvar=@_;
    my $sqlstr = $subvar[0];
    $cipher = unpack("u", $sqlstr);
    $plain = $cipher^$key;
    return substr($plain, 0, length($cipher));
} 
```

第一个脚本没问题，结果是：

> 解码字符串值：mentos

第二个脚本不好：

> 解码字符串值：ot&¸ÝÖóvë½vÍ

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:20:59.627

你的原始代码有

```
$str = "&4\=80CHB'"; 
```

由于某种原因，其中包含一个转义的等号。它与

```
$str = "&4=80CHB'"; 
```

所以你需要输入`&4=80CHB'`你修改后的代码。

# mysql - 使用另一个表中的 SUM 更新表

> ID：10091336
> 
> 赞同：14
> 
> 时间：2012-04-10T15:08:40.427
> 
> 标签：mysql, sum

我正在尝试使用另一个表的总和对表进行简单的更新，但由于某种原因，它只更新了一行。以下是表格中的相关信息：

**游戏**

```
gameplayer|points
----------------
John      |5
Jim       |3
John      |3
Jim       |4 
```

**球员生涯**

```
playercareername|playercareerpoints
-----------------------------------
John            |0
Jim             |0 
```

现在最终，我希望最后一个表在运行更新后看起来像这样：

**球员生涯**

```
playercareername|playercareerpoints
-----------------------------------
John            |8
Jim             |7 
```

这是我尝试的仅更新第一行的查询：

```
UPDATE playercareer
SET playercareer.playercareerpoints = 
    (
SELECT 
    SUM(games.points) 
FROM games
    WHERE
     playercareer.playercareername=games.gameplayer
    ) 
```

我似乎找不到这个问题的答案。提前感谢您的时间和建议！

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-04-10T20:08:07.797

```
UPDATE playercareer c
INNER JOIN (
  SELECT gameplayer, SUM(points) as total
  FROM games
  GROUP BY gameplayer
) x ON c.playercareername = x.gameplayer
SET c.playercareerpoints = x.total 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-12T18:26:43.670

表名不同，但这对我有用

```
update e
set e.Absence_Hours = a.hours
from [Thomas_Test].[dbo].Employee e
inner join (select empnum
                 , sum(hours) as hours
            FROM [Thomas_Test].[dbo].[Employee_Absence_Report]
            group by empnum) a 
        on a.empnum = e.emp_no; 
```

# javascript - 扩展 DIV 元素时如何制作多个元素？

> ID：10091337
> 
> 赞同：3
> 
> 时间：2012-04-10T15:08:46.370
> 
> 标签：javascript, oop

我正在尝试通过使用新创建的 div 作为我的对象的原型来通过 Javascript“扩展”一个 DIV。

据我了解Javascript，在通过“new”创建我的对象的新实例时，原型对象被复制，分配给“this”，然后执行该函数（作为构造函数）。

一切似乎都有效，除了每当我创建另一个对象并将其添加到 DOM 时，它都会“替换”原始 div。更准确地说：构造函数总是更改相同的 div。

使用`MyTest.prototype = document.createElement("div");`给了我所描述的行为，在我的代码示例中之后的两条注释行也是我尝试过的，但无济于事。

我知道尝试扩展 DOM 是不受欢迎的，但我想了解这种行为，因为我认为我知道原型是如何工作的，而这根本不符合我的想法。

这是我正在尝试做的一个最小示例：

```
<!DOCTYPE html>
<html>
<head>
<title>Div-Prototype-Test</title>
<script type="text/javascript">

var height = 20;
var top = 0;

function MyTest() {
    var r = Math.floor(Math.random() * 256);
    var g = Math.floor(Math.random() * 256);
    var b = Math.floor(Math.random() * 256);

    this.style.backgroundColor = "rgb("+ r +","+ g +","+ b +")";
    this.style.position        = "absolute";
    this.style.width           = "500px";
    this.style.height          = height + "px";
    this.style.top             = top + "px";

    top += height;

    document.getElementsByTagName("body")[0].appendChild(this);
}

MyTest.prototype = document.createElement("div");
// MyTest.prototype = document.createElement("div").cloneNode(true);
// MyTest.prototype = new Element();

window.addEventListener(
    "load", 
    function() {
        var a = new MyTest();
        var b = new MyTest();
        var c = new MyTest();
        var d = new MyTest();
    }
);

</script>
</head>
<body>
</body>
</html> 
```

PS：由于某个 Javascript 框架，我搜索任何改变 Javascript 原型的东西总是导致数百个与我的问题无关的结果 - 如果我错过了一个已经讨论过这个问题的问题，请告诉我。

编辑：

为了让我的问题更清楚：

这是一个我使用对象作为原型的示例 - 它的属性被复制。

```
function A() {
}

A.prototype = { property: 4 };

A.prototype.set = function(num) {
    this.property = num;
}

window.addEventListener(
    "load", 
    function() {
        var message = "";

        var x1 = new A();
        message += "A1 : "+ x1.property +"\n";

        x1.set(15);
        message += "A1 : "+ x1.property +"\n";

        var x2 = new A();
        message += "A2 : "+ x2.property +"\n";

        alert(message);
    }
); 
```

然后警报说：

```
A1 : 4
A1 : 15
A2 : 4 
```

然而，我的第一个示例中的 Div 似乎没有被复制，它的行为类似于 Singleton 或 Monostate。不应该这样吗？

1.  Protype 对象被复制到一个新对象中
2.  新对象被分配给“this”
3.  这是给构造函数的
4.  this 由构造函数返回（如果没有指定 return 语句）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:34:58.403

```
MyTest.prototype = document.createElement("div"); 
```

这一行只执行**一次**。它创建了一个`MyTest.prototype`对象，它也是一个 DOM 元素`<div>`。**每个** `MyTest`对象都将收到**相同的原型**。因此，您创建的每个`MyTest`对象都将与`<div>`您创建的单个对象关联一次。您必须为**每个** .`<div>``MyTest`

试试这个模式：

```
MyTest = function() {
    var myDiv = document.createElement("div");

    var r = Math.floor(Math.random() * 256);
    var g = Math.floor(Math.random() * 256);
    var b = Math.floor(Math.random() * 256);

    myDiv.style.backgroundColor = "rgb("+ r +","+ g +","+ b +")";
    myDiv.style.position        = "absolute";
    myDiv.style.width           = "500px";
    myDiv.style.height          = height + "px";
    myDiv.style.top             = top + "px";

    top += height;

    document.getElementsByTagName("body")[0].appendChild(myDiv);

    return myDiv;
} 
```

`<div>`此函数使用调用创建一个新的`createElement()`。然后，它会在新的`<div>`. 最后，它返回您的新`<div>`. 因此，您可以将其称为

```
var myNewDiv = MyTest();
var myNewDiv = new MyTest(); 
```

这两种选择都行得通。在第二种情况下，`new`关键字创建了一个虚拟的新对象，但这并不重要，因为`<div>`实际上返回了函数内部创建的新对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:23:14.793

你正在混合各种东西。首先，检查我对[这个 SO question](https://stackoverflow.com/questions/6150684/what-does-the-prototype-belongs-to-the-class-not-the-instance-mean-in-javascri/)的回答。其次，`Element`可以扩展对象，但并非所有浏览器都支持。检查[这个 SO 问题](https://stackoverflow.com/questions/592815/is-there-really-no-way-to-expose-the-prototype-of-a-html-element-in-ie-8)。

在我看来，您正计划以`document`某种标准化的方式添加元素。您的代码可以重写为（我对其进行了一些修改）：

```
function appendElement(content,id) {
    var rgb = 'rgb('+ [Math.floor(Math.random() * 256),
               Math.floor(Math.random() * 256),
               Math.floor(Math.random() * 256)].join(',') +')';
    var top  = Math.floor( Math.random() * 300 + 20 );
    var left = Math.floor( Math.random() * 100 + 10 );

    this.style.backgroundColor = rgb;
    this.style.position        = "absolute";
    this.style.width           = "500px";
    this.style.height          = "200px";
    this.style.left            = left+"px";
    this.style.top             = top+"px";
    this.innerHTML             = content || '';
    this.id                    = id || Math.Random*10000+1
    document.getElementsByTagName("body")[0].appendChild(this);
} 
```

现在您可以使用它来将任何元素附加到`document`using `appendElement ，如下所示：

```
appendElement.call(document.createElement('div'),'empty div');
appendElement.call(document.createElement('span'),'new empty span','span1'); 
```

这会是你的目标吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:26:04.023

我找到了一种解决方法，它基本上可以反过来工作——原型是一个空白对象，我将新对象数据复制到构造函数中的 div 中：

```
var height = 20;
var top = 0;

function deepCopy(fromObject, toObject, depth) {
    if(typeof(fromObject) != "object" || typeof(toObject) != "object") {
        // throw "deepCopy only copies objects"
        return;
    }

    if (typeof(depth) == "undefined") {
        depth = 0;
    } else if (depth > 100) {
        // Recursion depth too high. Abort.
        // throw "deepCopy recursion depth cap hit"
        return;
    }

    for (var key in fromObject) {
        if (typeof(fromObject[key]) == "object" && fromObject[key] != null) {
            if (typeof(fromObject[key].nodeType) != "undefined") {
                toObject[key] = fromObject[key].cloneNode(true);
            } else {
                if (typeof(toObject[key]) != "object") {
                    toObject[key] = {};
                }
                deepCopy(fromObject[key], toObject[key], depth + 1);
            }           

        }
        toObject[key] = fromObject[key];
    }
}    

function MyTest() {
    // This is ugly...
    var self = document.createElement("div");
    deepCopy(MyTest.prototype, self);

    var r = Math.floor(Math.random() * 256);
    var g = Math.floor(Math.random() * 256);
    var b = Math.floor(Math.random() * 256);

    self.style.backgroundColor = "rgb("+ r +","+ g +","+ b +")";
    self.style.position        = "absolute";
    self.style.width           = "500px";
    self.style.height          = height + "px";
    self.style.top             = top + "px";

    top += height;

    document.getElementsByTagName("body")[0].appendChild(self);

    return self;
}

MyTest.prototype = {};
// MyTest.prototype = document.createElement("div").cloneNode(true);
// MyTest.prototype = new Element();

window.addEventListener(
    "load", 
    function() {
        var a = new MyTest();
        var b = new MyTest();
        var c = new MyTest();
        var d = new MyTest();
    }
); 
```

虽然我觉得我的 deepCopy 函数是一种相当不优雅（并且可能非常错误）的方式来执行任务，但反过来使用 cloneNode() 却不起作用。

**我最初的问题来自于此：当原型被复制时，所有的标量值都被复制，而所有的对象都被简单地引用（就像复制指针一样，指针值被复制，而不是它指向的数据）。**

希望这可以帮助某人。

# php - Propel：测试现有对象是否符合条件

> ID：10091338
> 
> 赞同：1
> 
> 时间：2012-04-10T15:08:52.437
> 
> 标签：php, orm, criteria, propel

让 Propel 检查现有对象（检索的或新创建的）是否符合某些条件的最佳方法是什么。我想知道 Propel 是否具有执行此操作的本机能力 :-) 我在询问简单的方法，因为以复杂的方式执行此操作很容易。理想情况下是这样的：

```
 $fruit = FruitPeer::doSelectOne( new Criteria ); // get whatever fruit

    $crit1 = new Criteria;
    $crit1->add(FruitPeer::REF_COLOR, 'green');      // criteria for green fruits

    if ($fruit->matches($crit1)) {                   // check if my fruit is green
        echo 'My fruit is green';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:35:22.350

这是不可能的，因为 Criteria 对象仅用于生成 SQL 查询而不用于匹配对象。但是，您可以再次查询数据库。当 Propel 的实例池检测到查询对象的实例已经存在时，它应该避免再次检索所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-29T09:59:33.517

可能你能做的最简单的事情就是在你的主键上添加一个条件，然后发出一个计数。

如果您有一个查询（`ModelCriteria`实例而不是普通`Criteria`实例），您可以在一行中执行此操作：

```
if($critQuery1->filterByPrimaryKey($fruit->getPrimaryKey())->count() > 0) {…} 
```

# android - Dalvik VM 在使用 org.apache.commons.collections.CollectionUtils 时出错

> ID：10091343
> 
> 赞同：0
> 
> 时间：2012-04-10T15:09:04.967
> 
> 标签：android

我正在尝试通过以下代码在android中使用 org.apache.commons.collections.CollectionUtils

```
import java.util.ArrayList;

import org.apache.commons.collections.CollectionUtils;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class CheckCommonsActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    String email1 = "xyz@gmail.com";
    String email2 = "abc@gmail.com";
    String email3 = "mnp@gmail.com";
    String email4 = null;       

    ArrayList<String> emailList1 = new ArrayList<String>();
    emailList1.add(email4);
    emailList1.add(email1);
    emailList1.add(email2);
    emailList1.add(email3);

    ArrayList<String> emailList2 = new ArrayList<String>();
    emailList2.add(email3);
    emailList2.add(email2);
    emailList2.add(email1);

    boolean isEqual = CollectionUtils.isEqualCollection(emailList1,
           emailList2);
    TextView text = (TextView) findViewById(R.id.text);
    text.setText(String.valueOf(isEqual));
    }
 } 
```

我在 Console **Conversion to Dalvik format failed with error 1**中收到以下错误消息。完整的消息线索[在此处](http://www.mediafire.com/view/?mumsijp7kbauidm)上传。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:32:20.930

你的代码没问题。这似乎是一个 jar 文件冲突。看看[这里](https://stackoverflow.com/a/3389640/924149)。引发该错误的原因可能有多种……其中一种解决方案也可能对您有所帮助

编辑：假设您的问题[在这里](https://stackoverflow.com/questions/10089989/android-runtime-error-java-lang-noclassdeffounderror-org-apache-commons-collec)：您从 /libs 文件夹中添加了 lib，正如我在那里描述的那样，但是您忘记在构建路径中删除对外部库的“旧”引用。所以你可能两次包含同一个库。从构建路径中删除外部 jar 的引用

# ruby-on-rails - 为什么 put custom action 在 rails 3.1 中不起作用？

> ID：10091345
> 
> 赞同：0
> 
> 时间：2012-04-10T15:09:17.257
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

一个 put 自定义操作批准被添加到我们的 rails 3.1.3 应用程序的采购控制器中，用于更新 3 个参数。在 routes.rb 中添加了自定义路由，并使用 :method => :put 调用了 link_to。但是，“批准”不会重置参数。

这是采购 index.html.erb 中的 link_to：

```
<% @sourcings.each do |src| %>
...
<%= link_to 'Approve', approve_project_sourcing_path(@project, src), :method => :put if need_approve?(src) %>
<% end > 
```

需要批准？是在采购控制器中定义的一种方法，用于查看是否需要批准采购。

这是批准的 rake 路由输出：

```
approve_project_sourcing PUT    /projects/:project_id/sourcings/:id/approve(.:format)                                      {:action=>"approve", :controller=>"sourcings"} 
```

这是采购控制器的批准：

```
 def approve

    @project = Project.find(params[:project_id])
    @sourcing = @project.sourcings.find(params[:id]) 
    if vp_eng?
        @sourcing.update_attributes!(:approved_by_vp_eng => true, :approve_vp_eng_id => session[:user_id],
                                    :approve_date_vp_eng => Time.now, :as => :role_update)

      elsif ceo?
        @sourcing.update_attributes(:approved_by_ceo => true, :approve_ceo_id => session[:user_id],
                                    :approve_date_ceo => Time.now, :as => :role_update) 
    end
    redirect_to project_sourcing_path(@project, @sourcing)   

  end 
```

我们在上面的代码中遗漏了什么吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T18:20:03.427

问题在于调用 update_attributes 的方式。使用哈希参数，正确的语法是：

```
@sourcing.update_attributes({:approved_by_vp_eng => true, :approve_vp_eng_id => session[:user_id],:approve_date_vp_eng => Time.now}, :as => :role_update) 
```

散列参数需要大括号。

# javascript - Dojo 中的 Ajax 与 Perl

> ID：10091349
> 
> 赞同：1
> 
> 时间：2012-04-10T15:09:26.590
> 
> 标签：javascript, ajax, perl, post, dojo

谁能告诉我我做错了什么？我正在创建一个简单的系统来让人们进出用户组，为此我正在使用 Dojo 和 Perl。（如果我能以我的方式拥有它，那就是 PHP，但我不是老板。）

目前我只使用三个文件，一个用于 Perl，一个用于 JavaScript，一个用于 CSS 样式。

CGI 脚本的开头路由到不同的函数，如下所示：

```
if ($search = $cgi->param('psearch')) {
  dbConnect();
  jsonSearchPersons($search);
  dbDisconnect();
} elsif ($user_id = $cgi->param('person')){
  dbConnect();  
  create_form($user_id);
 dbDisconnect();
} elsif ($user_id = $cgi->param('saveuser')) {
  save_user();
} else {
  mainPage();
};
...
sub save_user {
  print $cgi->header(-type=>'text/plain',-charset=>'utf-8');
  print("success");
} 
```

我现在遇到的问题是，当我想通过 Ajax 调用（对这个 URL 的调用：）为用户保存新组时`users.cgi?saveuser=xx`。这应该（在我看来）是一个 POST 调用，所以我做了这个并尝试将生成的 HTML/文本附加到 a`<div>`但它不起作用：

```
dojo.xhr.post({
  url: "/cgi-bin/users.cgi?saveuser="+user_id,
  content: {
    new_groups: group_ids.toString()
  },
  load: function(html_content){
    var element = document.getElementById("test_area");
    element.innerHTML = html_content;
  },
  error: function(){
    alert("An error has occured during the save of new user groups.");
  }
}); 
```

当我使用`dojo.xhr.get();`它时工作正常，但是当我使用**POST**时，它就像它跳过了 if 语句的那一部分并只是附加了`mainPage()`函数。Dojo 和 Perl 之间有什么我不理解的基本内容吗？我是否必须设置页面才能接受 POST 调用？或者我做错了什么？

注意：这是我通过 Dojo 和 Perl 制作的第一个“系统”。（我通常是一个 PHP/jQuery 类型的人，他手工制作所有 UI，所以我对它有点陌生。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:38:15.607

尝试将 - 参数添加`saveuser`到`content`-object 中，`dojo.xhrPost`而不是在 url 中传递它。

您正在尝试将 saveuser 参数作为 GET 传递，另一个作为 POST 传递，这可能会使您的服务器端部分感到困惑。

试试这样：

```
dojo.xhr.post({
  url: "/cgi-bin/users.cgi",
  content: {
   new_groups: group_ids.toString(),
   saveuser: user_id
  },
  load: function(html_content){
    var element = document.getElementById("test_area");
    element.innerHTML = html_content;
  },
  error: function(){
    alert("An error has occured during the save of new user groups.");
  }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T00:24:40.003

CGI.pm 的第 675 行：

```
 # Some people want to have their cake and eat it too!
  # Uncomment this line to have the contents of the query string
  # APPENDED to the POST data.
  # $query_string .= (length($query_string) ? '&' : '') . $ENV{'QUERY_STRING'} if defined $ENV{'QUERY_STRING'}; 
```

让我笑了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:26:23.620

找到了解决方案。

问题是我的javascript。发布到 perl 脚本时，您使用 $cgi=new CGI; 以及所有这些。这需要 GET 和 POST 变量并验证它们。在我的 javascript/dojo 代码中，我使用了带有 GET 变量的 url，然后也进行了 POST。这意味着 perl 无法找出（或正在混合）这两种变量类型。因此，当我更改我的 ajax 代码（如下所示）时，它起作用了，因为 $cgi->param('saveuser') 都获取“saveuser”的 GET 和 POST（不需要更改 perl）：

```
dojo.xhr.post({
  url: "/cgi-bin/users.cgi",
  content: {
    saveuser: user_id,
    new_groups: group_ids.toString()
  },
  load: function(html_content){
    var element = document.getElementById("test_area");
    element.innerHTML = html_content;
  },
  error: function(){
    alert("An error has occured during the save of new user groups.");
  }
}); 
```

有点古怪的错误，但我很高兴，因为它现在很好用：D

# javascript - 如何检测禁止的文件下载？

> ID：10091352
> 
> 赞同：3
> 
> 时间：2012-04-10T15:09:44.530
> 
> 标签：javascript, internet-explorer, httpwebrequest, http-headers

Internet Explorer 有一个安全设置，允许启用/禁用文件下载。`window.open`在我们的应用程序中有一个按钮，可以使用("fileurl")打开文件（例如 .xls ）。是否可以在 javascript 中检测到下载被阻止（例如显示一些解释）？或者更复杂的是，是否有可能从请求标头中检测到它？

**编辑：**
我已经按照建议尝试了ajax来测试下载但没有成功。我想保存或打开文件被阻止而不是实际下载。

```
var xhr = new XMLHttpRequest();
xhr.open("GET", docurl, false);
xhr.send(null);
var data = new VBArray(xhr.responseBody).toArray();//IE9 only 
```

它成功并返回一个相同长度的数组，无论下载是否禁用。
[使用 XMLHttpRequest 获取和发送二进制文件](http://hublog.hubmed.org/archives/001941.html)
[如何在 IE 中从 Javascript 访问 XHR responseBody（用于二进制数据）？](https://stackoverflow.com/a/4330882/669527)

**编辑2：**
我的第二次尝试：

```
var wnd = window.open()
wnd.load=tst;
wnd.location.href= docurl 
```

我试图在加载时评估窗口（tst），但我没有发现是否禁止下载的区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:13:57.803

这是一个想法：有一个 ajax 请求来下载一个类似于被阻止的“测试文件”，如果可能的话，具有相同的 mime 类型和一个真正的空文件类型（但很小，可能 2KB）。然后，如果此类下载失败，...您还可以检查它是如何失败的（默默地，带有错误消息，...）..这将为您提供有关如何解决该问题的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T14:41:46.757

现在有大约一个月的答案，所以我得出结论，没有解决方案。

# c# - 拖动时突出显示矩形区域

> ID：10091356
> 
> 赞同：3
> 
> 时间：2012-04-10T15:10:00.100
> 
> 标签：c#, gdi

我正在创建一个图像查看器类型的应用程序。我在 Windows 上并使用 .Net

在我的应用程序中，我试图在拖动时突出显示特定区域。我创建了一个矩形。

```
Rectangle areaRect = new Rectangle(100,100, 300, 300);
Point ptOld = new Point(0, 0);
Pen rectPen = new Pen(Brushes.White, 3);

protected override void OnPaint(PaintEventArgs e)
{
  Graphics dcPaint = e.Graphics;
  dcPaint.DrawRectangle(rectPen, areaRect);
} 
```

现在我正在拖动这个矩形区域以及我的鼠标移动。

```
protected override void OnMouseMove(MouseEventArgs e)
{
 Point ptNew = new Point(e.X, e.Y);
 int dx = ptNew.X - ptOld.X;
 int dy = ptNew.Y - ptOld.Y;
 areaRect.Offset(dx, dy);
 MoveRect(ptNew);
 ptOld = ptNew;
} 
```

在这里，我试图将这个矩形与我的鼠标一起移动

```
void MoveRect(Point point)
{
 Graphics grfxClient = CreateGraphics();
 Rectangle tempRectangle = new Rectangle(areaRect.Left, areaRect.Top, areaRect.Width,   areaRect.Height);
 grfxClient.DrawRectangle(rectPen, tempRectangle);
 this.Invalidate();
 grfxClient.Dispose();
} 
```

到目前为止，我的代码运行良好。现在我想使反向拖动区域变暗（拖动区域之外的区域），我的意思是这个矩形内的区域应该在拖动时突出显示。

任何想法如何进行。

谢谢。

-潘卡伊

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:40:02.487

我想您可以通过创建一个`Region`覆盖矩形外部的对象并用半透明填充它`SolidBrush`以使其看起来变暗来做到这一点。

您也不必创建图形并在`OnMouseMove`事件中绘制，而只需移动矩形并使您正在绘制的控件的表面无效。

我使用的代码看起来或多或少是这样的：

```
Rectangle areaRect = new Rectangle(100,100, 300, 300);
Point ptOld = new Point(0, 0);
Pen rectPen = new Pen(Brushes.White, 3);

//A new field with a semi-transparent brush to paint the outside of the rectangle
Brush dimmingBrush = new SolidBrush(Color.FromArgb(128, 0, 0, 0));

protected override void OnPaint(PaintEventArgs e)
{
    Region outsideRegion = new System.Drawing.Region(e.ClipRectangle);
    outsideRegion.Exclude(areaRect);
    Graphics dcPaint = e.Graphics;
    dcPaint.FillRegion(dimmingBrush, outsideRegion);
    dcPaint.DrawRectangle(rectPen, areaRect);
}

protected override void OnMouseMove(MouseEventArgs e)
{
    Point ptNew = new Point(e.X, e.Y);
    int dx = ptNew.X - ptOld.X;
    int dy = ptNew.Y - ptOld.Y;
    areaRect.Offset(dx, dy);
    ptOld = ptNew;
    this.Invalidate();
} 
```

`MoveRect`不需要命名的方法。

它现在似乎可以按您的意愿工作。

**建议**

我也有一些建议。您不必使用它们，也许它们会对您有所帮助。

你还没有写出你要使用什么样的控件来绘制（或覆盖`Form`方法并直接在上面绘制），但我建议你使用一个`PictureBox`控件，创建一个从它派生的自定义控件并覆盖它的事件。这应该使绘画过程顺利并防止闪烁。这样做：

*   通过选择*Add* and *User Control...*创建一个新的用户控件并命名一个新控件，即`MyPictureBox`
*   更改控件的父类，因此它现在应该包含以下行：

    ```
    public partial class MyPictureBox : PictureBox 
    ```

*   打开文件*MyPictureBox.Designer.cs*并注释掉这些行：

    ```
    //this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
    //this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font; 
    ```

*   复制我在此答案中发布的代码并添加行`base.OnPaint(e);`和`OnPaint`方法的开头

*   编译项目

*   现在您应该能够打开主窗体的设计器，`MyPictureBox`从工具箱中拖动控件并使用它，而无需额外的代码

您还可以考虑更改突出显示区域的行为，使鼠标光标位于其中心。我想这对用户来说会更直观。

如果您对代码有任何问题，只需将其写在评论中，我会尽力提供帮助:)。

# javascript - JavaScript 表单验证无法正常工作

> ID：10091357
> 
> 赞同：-4
> 
> 时间：2012-04-10T15:10:02.537
> 
> 标签：javascript, forms

这是我的 HTML/Javascript 代码。我将填写的表单提交给 Servlet。表单验证似乎存在一些问题。我不知道为什么。如果我在 textbox2 中输入 0 并从下拉列表框中选择 Divide，它应该会提示我输入一个新值。但事实并非如此，并且表单在没有任何提示的情况下提交给由于被零除而引发异常的 servlet。

```
<html>
<head>
<title>A simple calculator</title>
<script language="text/javascript">
function validate(b,op)
{
    var newval=b;           
    if(b=="0"&&op=="/")
           newval=prompt("Enter a non-zero value for B:",1);
    document.CalculatorForm.textbox2.value=newval;  
}
</script>
</head>
<body>
<form name="CalculatorForm" method="get" action="http://localhost:8080/hello/CalculatorServlet" onsubmit="validate(this.textbox2.value,this.dropdown.options[this.dropdown.selectedIndex].value);">
A:<input type="text" name="textbox1" id="T1" /><br>
B:<input type="text" name="textbox2" id="T2" /><br>
Operation<br>
<select name="dropdown" id="dd">
<option value="+">Add</option>
<option value="-">Subtract</option>
<option value="*">Multiply</option>
<option value="/">Divide</option>
</select>
<br>
<input type="submit" value="compute"/>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:16:07.727

将函数更改为：

```
function validate()
{
    var b = document.getElementById('T2').value;
    var op = document.getElementById('dd')
    var opValue = op.options[op.selectedIndex].value; 
    if(b=='0' && op=='/')
         //do something  
    else
      // submit
} 
```

# htmlunit - 如何在忽略 JavaScript 和 CSS 的情况下在 HTMLUnit 中获取页面的纯原始 HTML？

> ID：10091359
> 
> 赞同：7
> 
> 时间：2012-04-10T15:10:07.510
> 
> 标签：htmlunit

我只想要页面的文本内容，并且我希望获取尽可能轻量级。我可以关闭 HTMLUnit 开箱即用的 JavaScript、CSS 和其他外部内容的所有解析和额外加载吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T16:21:13.000

我认为最接近您正在寻找的东西是：

```
WebClient webClient = new WebClient();
webClient.setCssEnabled(false);
webClient.setAppletEnabled(false);
webClient.setJavaScriptEnabled(false); 
```

对于 HtmlUnit 2.13 及更高版本，请使用`webclient.getOptions()`.

这个[问题](https://stackoverflow.com/questions/7200886/extremely-simple-code-not-working-in-htmlunit-2-9-stable)和答案也可能有用。它确实让我的事情变得更快，但我不得不重新编译 HtmlUnit ......

最后，为了获取页面的原始内容（而不是 的输出`asXml()`），请尝试以下操作：

```
WebClient webClient = new WebClient();
HtmlPage page = webClient.getPage("http://www.yourpage.com");
String originalHtml = page.getWebResponse().getContentAsString(); 
```

# postgresql - PostgreSQL 行到字符串

> ID：10091360
> 
> 赞同：3
> 
> 时间：2012-04-10T15:10:13.077
> 
> 标签：postgresql, types, casting, null, row

我有如下查询的结果，它没有固定数量的列

```
ID  COL1    COL2    COL3    COL4
-------------------------------------
1   VAL11   VAL12   VAL13   VAL14
2   VAL21   VAL22   VAL23   VAL24 
```

现在我希望结果是这样的。

```
RESULT
-----------------------------------------------------
ID:1, COL1:VAL11, COL2:VAL12, COL3:VAL13, COL4:VAL14
ID:2, COL1:VAL21, COL2:VAL22, COL3:VAL23, COL4:VAL24 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:36:10.387

快速而肮脏的方式，但没有列名并包括 NULL 值：

```
SELECT tbl::text
FROM   tbl; 
```

缓慢而可靠的方式：

```
SELECT array_to_string(ARRAY[
          'ID:'   || id
         ,'COL1:' || col1
         ,'COL2:' || col2
        ], ', ')  AS result
FROM    tbl; 
```

如果一列包含一个`NULL`值，它将在结果中丢失。我不只是连接，因为`NULL`值会使整行无效。
[`array_to_string()`](http://www.postgresql.org/docs/current/interactive/functions-array.html#ARRAY-FUNCTIONS-TABLE)确保仅在需要的地方插入逗号。

* * *

PostgreSQL **9.1**引入了新函数[**`concat_ws()`**](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)（很像 MySQL 中的函数），我们可以进一步简化：

```
SELECT concat_ws(', '
          'ID:'   || id
         ,'COL1:' || col1
         ,'COL2:' || col2
        ) AS result
FROM    tbl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T19:19:31.727

```
SELECT
            'ID:'  ||coalesce(id::text,   '<null>')
    ||', '||'COL1:'||coalesce(col1::text, '<null>')
    ||', '||'COL2:'||coalesce(col2::text, '<null>')
FROM tbl; 
```

您可以使用此 SQL 为您生成第一个（如果有很多列）：

```
SELECT E'SELECT \n'||string_agg(trim(stmt), E' \n')||E'\n  FROM tbl;'
  FROM (SELECT
    CASE WHEN a.attnum > 1 THEN $$||', '||$$ ELSE '' END ||
    $$'$$||upper(a.attname)||$$:'||coalesce($$||quote_ident(a.attname)||
    $$::text, '<null>')$$ AS stmt
  FROM pg_attribute a, pg_class t
 WHERE t.relkind='r' AND t.relname = 'tbl' AND a.attrelid = t.oid
   AND NOT a.attisdropped AND a.attnum > 0) AS s; 
```

# objective-c - 运行时 xml/json 生成目录内容

> ID：10091361
> 
> 赞同：0
> 
> 时间：2012-04-10T15:10:13.753
> 
> 标签：objective-c, ios, xml, json, web-services

对于我尝试开发的 ios 应用程序，我需要获取在线目录的内容列表。（我的应用程序适用于本地目录，但我正在尝试对其进行编辑，以便它适用于在线目录）

我一直在研究这个问题，但我无法找到最好的解决方案。（我了解到您无法使用objective-c 读取在线目录和子目录的内容并将它们打印到数组中以在例如tableview 中显示它们）。

我确实学习了如何创建连接并输出某个页面（或 xml 文件）的 html。这就是我想知道的原因......有没有办法（webservice？）生成一个打印目录内容的xml/JSON/html文件（如果可能还有子目录）？此 xml/JSON/html 的生成必须在运行时完成，即我的应用程序请求文件的那一刻，因为人们将能够通过 FTP 将文件（pdf、视频...）添加到目录中。（每次都编辑 xml/JSON 文件不是一种选择）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T21:32:11.437

您可以通过多种方式创建简单的 Web 服务。例如，使用 PHP，您可以编写如下内容：

```
<?php
$dir    = '/myDir';
$files = scandir($dir);
echo json_encode($files);
?> 
```

然后只需将您的应用程序指向该页面的内容并解析 JSON。

扫描目录：http : [//php.net/manual/en/function.scandir.php](http://php.net/manual/en/function.scandir.php)

json_encode：[http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

# apache - 将所有请求重定向到“站点离线”页面

> ID：10091363
> 
> 赞同：0
> 
> 时间：2012-04-10T15:10:19.567
> 
> 标签：apache, mod-rewrite, joomla

我需要为我的[Joomla](https://www.joomla.org/)站点进行复杂的版本升级——因为数据库也将被删除并重新创建，我无法使用内置的“站点脱机”选项。我宁愿需要将所有到我网站的流量重定向到一个offline.html 页面。

我正在我的本地备份上对此进行测试：

```
RewriteEngine on
RewriteCond %{http_host} ^127.0.0.1:81/joomla [NC,OR]
RewriteRule ^(.*)$ http://127.0.0.1:81/joomla/offline.html [R=301,NC,L] 
```

但是它似乎不起作用：例如，如果我要求

`http://127.0.0.1/joomla/administrator/`

然后它变成：

`http://127.0.0.1/offline.htmljoomla/administrator/`

有什么帮助吗？非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:14:32.890

尝试这个：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !/joomla/offline.html$ 

RewriteRule $ /joomla/offline.html [R=302,L] 
```

# c++ - 为什么不从线程调用重载成员？

> ID：10091366
> 
> 赞同：0
> 
> 时间：2012-04-10T15:10:39.540
> 
> 标签：c++, multithreading, pure-virtual

我有一个稍微修改过的线程类版本，它是从我用来创建线程基类的[Linux 自助站点上复制的：](http://www.linuxselfhelp.com/HOWTO/C++Programming-HOWTO-18.html)

```
class Thread
{
public:
static void *entry (void *pvArg) { Thread *pobjThread = static_cast<Thread *> (pvArg); pobjThread->run (); }
virtual void run (void) = 0;
}; 
```

我有 2 个线程类：

```
class Item : public Thread 
```

和

```
class Product : public Thread 
```

`class Item`从函数的构造函数启动线程，该类进入 pthread 库以创建线程调用`entry`，`this`因为`pvArg`while`class Product`稍后在程序执行期间创建它的线程。

现在的事情是，`class Item`工作正常。该`run`函数被调用并正确处理。但是，当`class Product`稍后调用相同的函数时，我得到：

```
pure virtual method called 
```

两个类都具有相同的实现，都重载了`run`方法，但是一个被调用而另一个未被调用。

为什么我会突然得到一个`pure virtual method called`例外？

谢谢。

更新： `class Item`是不同的，`class Product`因为在 cpp 文件中`Item`被声明为 a`static Item item;`并且只有一个。`class Product`像普通对象一样使用。如果我对它做同样的事情，`class Product`它就可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:32:11.617

不要从构造函数或析构函数调用虚函数——代码在其中运行时继承链是不完整的，因此，调用虚函数没有意义。有关另一个答案，请参阅[来自构造函数和析构函数的纯虚拟调用。](https://stackoverflow.com/questions/8651895/pure-virtual-invocation-from-constructor-and-destructor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:35:00.053

Item 和 Product 是： public Thread 意味着您将在构造函数中调用（本身的）虚函数。在构造函数内部，vtable 尚未完全设置（因为它取决于正在初始化的每个基类），因此您将获得未定义的行为。

最佳实践：不要从构造函数/析构函数内部调用虚函数。保持构造函数/析构函数非常简单，在 init() 函数或类似函数中完成其余工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:36:59.480

感谢 modelnine 所指出的，我们发现有问题的代码是在线程有机会运行之前创建一个对象、启动线程然后销毁该对象。正如modelnine 所指出的，这删除了vtable，这导致了问题。

感谢问题评论中的modelnine。

# ruby-on-rails-3 - ThinkingSphinx 在控制台中返回空结果

> ID：10091367
> 
> 赞同：0
> 
> 时间：2012-04-10T15:10:43.170
> 
> 标签：ruby-on-rails-3, thinking-sphinx

我遇到了与这里提出的相同的问题：

[思考狮身人面像和控制台](https://stackoverflow.com/q/6804776/833675)

（试图在那个线程上问一个问题，但不能......）

基本上，在控制台中完成的任何搜索都会返回一个空结果。但是，如果我通过该站点进行搜索，它可以正常工作。

但是在我的本地机器上处于开发模式。(OS X)

例子：

```
> Article.search 'eating'
[] 
```

在浏览器中进行相同的搜索会返回预期的结果。

我已经多次重建索引。杀死 ThinkingSphinx 并重建它，等等。控制台中似乎没有任何改变。

这是 Rails 3 和 Ruby 1.9.2-p180

任何见解都会很棒。

谢谢。

# ember.js - 从商店中取出物品时如何检测脏污？

> ID：10091369
> 
> 赞同：2
> 
> 时间：2012-04-10T15:10:45.997
> 
> 标签：ember.js, ember-data

我有一个商店，里面有从服务器检索到的物品。我想检测更改以相应地更改 UI。

我能够检测到脏记录（新的、更新的），但我不知道如何检测删除，我还需要处理...

我的问题的一个例子：http: [//jsfiddle.net/MikeAski/bBUB2/](http://jsfiddle.net/MikeAski/bBUB2/)

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:20:24.607

There are two things you need to do:

1.  Keep track of what posts were originally there so you can mark it as dirty if one is deleted.
2.  Keep track of new posts, and if they are deleted then mark that part as clean.

Because of your call to each post's `isDirty` function, you are only checking if the current posts have been updated or created. You basically need a snapshot of what posts exist when it is clean, and then you can compare if any of those have been deleted.

You can also keep a record of newly added posts. That way when one is deleted you can check if it was added(add a `isNew` flag or something similar). Then when it is deleted you can check if it `isNew` and mark it clean again otherwise it makes it a dirty delete.

To do these things, you will need a function that checks for deletes as the first dirty check and then check the posts like you currently are.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:38:53.300

我终于找到了出路：http: [//jsfiddle.net/MikeAski/bBUB2/7/](http://jsfiddle.net/MikeAski/bBUB2/7/)

与 jsworkman 建议的解决方案相比，此解决方案对模型的干扰较小。不完全令人满意，但按预期工作......：-/

仍然对更好的实施而不是变通方法感兴趣的解决方案感兴趣！

# python - 使用 Selenium 和 Python 遍历手风琴块中的每个项目

> ID：10091375
> 
> 赞同：1
> 
> 时间：2012-04-10T15:11:00.070
> 
> 标签：python, selenium, boto

我有一个手风琴块，我想单击每个项目并截取屏幕截图。每个项目共享一个类，所以我认为 for 循环可以工作，但我无法让它选择项目。

HTML结构：

```
<div class="accordionContainer">
    <div class="accordion">
      <h3>Click This</h3>
      <div class="accordionContent" style="display:none">
      </div>
    <div>
    <div class="accordion">
      <h3>Click This</h3>
      <div class="accordionContent" style="display:none">
      </div>
    <div>
</div> 
```

Python：

```
detailsAccordion = browser.find_elements_by_class_name('accordion')
index = 1
for option in detailsAccordion:
    option.click()
    try:
        element = ui.WebDriverWait(ff, 10).until(lambda driver : driver.find_element_by_xpath("//div[@class='accordion'][" + str(index) + "]/div[@class='accordionContent']").text != "" )
    except:
        print "Can't do it"
        browser.quit()
    index = index + 1
    n = nextNumber(n)
    browser.save_screenshot('{0}\{1}.png'.format(imagesPath, n))
    option.click() 
```

这导致超时并出现以下错误。我查看了这个错误，人们在互联网选项/代理设置方面遇到了问题——我没有代理，所以不知道为什么会这样；

```
 [exec] Can't do it
 [exec] Traceback (most recent call last):
 [exec]   File "viewEmployeeUseCase.py", line 82, in <module>
 [exec]     ff.save_screenshot('{0}\{1}.png'.format(imagesPath, n))
 [exec]   File "C:\Python26\lib\site-packages\selenium-2.20.0-py2.6.egg\selenium\webdriver\firefox\webdriver.py", line 75, in save_screenshot
 [exec]     png = RemoteWebDriver.execute(self, Command.SCREENSHOT)['value']

 [exec]   File "C:\Python26\lib\site-packages\selenium-2.20.0-py2.6.egg\selenium\webdriver\remote\webdriver.py", line 151, in execute
 [exec]     response = self.command_executor.execute(driver_command, params)

 [exec]   File "C:\Python26\lib\site-packages\selenium-2.20.0-py2.6.egg\selenium\webdriver\remote\remote_connection.py", line 280, in execute
 [exec]     return self._request(url, method=command_info[0], data=data)
 [exec]   File "C:\Python26\lib\site-packages\selenium-2.20.0-py2.6.egg\selenium\webdriver\remote\remote_connection.py", line 321, in _request
 [exec]     response = opener.open(request)
 [exec]   File "C:\Python26\lib\urllib2.py", line 391, in open
 [exec]     response = self._open(req, data)
 [exec]   File "C:\Python26\lib\urllib2.py", line 409, in _open
 [exec]     '_open', req)
 [exec]   File "C:\Python26\lib\urllib2.py", line 369, in _call_chain
 [exec]     result = func(*args)
 [exec]   File "C:\Python26\lib\urllib2.py", line 1170, in http_open
 [exec]     return self.do_open(httplib.HTTPConnection, req)
 [exec]   File "C:\Python26\lib\urllib2.py", line 1145, in do_open
 [exec]     raise URLError(err)
 [exec] urllib2.URLError: <urlopen error [Errno 10061] No connection could be made because the target machine actively refused it> 
```

让事情变得简单而不是等待内容填充工作正常&我想要的都是以下内容；

```
for option in detailsAccordion:
    #print option
    option.click()
    WebDriverWait(ff, 2)
    n = nextNumber(n)
    ff.save_screenshot('{0}\{1}.png'.format(imagesPath, n))
    option.click() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:14:31.093

我不认为隐式等待是你想要的，我不相信它在你的代码中做任何事情。“隐式等待是告诉WebDriver在尝试查找一个或多个元素时轮询DOM一段时间，如果它们不是立即可用的。默认设置为0。一旦设置，隐式等待就会设置为生命WebDriver 对象实例。” -[网络驱动程序](http://seleniumhq.org/docs/04_webdriver_advanced.html#implicit-waits)

您真正想要的是[显式等待](http://seleniumhq.org/docs/04_webdriver_advanced.html#explicit-waits)，等待手风琴内容出现然后截取屏幕截图。

抱歉，不是 Python 程序员，所以我猜的是确切的代码。但我认为你想要这样的东西：

```
detailsAccordion = browser.find_elements_by_class_name('accordion')
for option in detailsAccordion:
    option.click() # open div
    #Wait until the accordionContent div has text
    try:
        element = WebDriverWait(browser, 10).until(lambda option : option.find_element_by_class_name("accordionContent").text != "" )
    finally:
        #Throw error cause the div didn't populate
        browser.quit
    n = nextNumber(n)
    browser.save_screenshot('{0}\{1}.png'.format(imagesPath, n))
    option.click() #close div 
```

**更新：**对不起，我认为我最初建议的解决方案存在两个主要问题。（1）它应该`except:`而不是`finally:`因为`finally:`总是执行而不是仅仅在出现超时错误时。(2) 与 Watir-Webdriver 不同，Selenium-Webdriver 似乎不允许检查`accordionContent`当前`accordion`元素的 。最初提出的解决方案总是检查`accordionContent`页面上的第一个（坏的）。我可以找到相对于另一个元素的元素的唯一方法是使用 xpath（或 css-selector）。

以下内容已使用这两个概念进行了更新：

```
detailsAccordion = browser.find_elements_by_class_name('accordion')
index = 1
for option in detailsAccordion:
    print option
    option.click()
    try:
        element = ui.WebDriverWait(browser, 10).until(lambda driver : driver.find_element_by_xpath("//div[@class='accordion'][" + str(index) + "]/div[@class='accordionContent']").text != "" )
    except:
        # Error if div didn't populate
        print "Can't do it"
        browser.quit()
    index = index + 1
    n = nextNumber(n)
    browser.save_screenshot('{0}\{1}.png'.format(imagesPath, n))
    option.click() 
```

# android - ScheduledExecutorService 计划不起作用

> ID：10091376
> 
> 赞同：3
> 
> 时间：2012-04-10T15:11:01.127
> 
> 标签：android

我有运行下一个代码的服务：

```
ScheduledExecutorService timer ;
timer = Executors.newScheduledThreadPool(1);
timer.schedule(new MyTimerTask(), 15*60, TimeUnit.SECONDS);
But from some reason it is not working. 
```

有人有什么主意吗？非常感谢，凯伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T17:25:43.273

注意确保您没有在执行之前销毁 ScheduledExecutorService 引用持有者对象

# android - 在 API 7 及更低版本中运行应用程序时缺少自定义 ImageView

> ID：10091389
> 
> 赞同：1
> 
> 时间：2012-04-10T15:11:39.897
> 
> 标签：android, api, imageview

我有一个奇怪的问题。我的 Android 应用程序适用于我的手机（Android 版本 2.3.5，API 9），我的一些模拟器（Android 版本 >= 2.2，API >= 8，在 API 8、13、15 上测试）而不是我的其他模拟器（Android 版本 < 2.2，API < 8，在 API 4、7 上测试）。该应用程序不会在 API < 8 的模拟器上崩溃，但我的一些自定义 ImageViews 在屏幕上消失了。否则一切正常。

我已经使用最新版本的工具*lint*来确定我是否使用了 API < 8 不支持的任何方法，但我唯一确定的是我使用了一种需要 API 4 的方法，在设置 android 时没有关于 API 的错误消息:minSdkVersion=4, android:targetSdkVersion=4 并将目标构建为 4。

我也看过[这里，](http://developer.android.com/sdk/android-2.2.html)因为错误似乎发生在 API 7 和 8 之间的某个地方，但找不到任何东西。我还对照开发人员文档检查了自定义 ImageView 中的所有方法，以查看是否有任何方法需要 API > 7。

有没有人对问题可能有任何其他建议？

**编辑：**

这是我的主要 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:orientation="vertical"
  android:id="@+id/gameLayoutID"
  >  

<fragment
    android:id="@+id/groundMenuID"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    class="com.foo.bar.someClass"/>

<fragment
    android:id="@+id/topLeftMenuID"
    android:layout_width="@dimen/TopLeftRightMenu_width"
    android:layout_height="@dimen/TopMenu_height"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    class="com.foo.bar.someClass"/>

<fragment
    android:id="@+id/topRightMenuID"
    android:layout_width="@dimen/TopLeftRightMenu_width"
    android:layout_height="@dimen/TopMenu_height"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    class="com.foo.bar.someClass"/>

<fragment
    android:id="@+id/leftMenuID"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_above="@id/groundMenuID"
    android:layout_below="@id/topLeftMenuID"
    class="com.foo.bar.someClass"/>

<fragment
    android:id="@+id/rightMenuID"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:layout_above="@id/groundMenuID"
    android:layout_below="@id/topRightMenuID"
    class="com.foo.bar.someClass"/> 

<fragment
    android:id="@+id/topMenuID"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/TopMenu_height"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@id/topLeftMenuID"
    android:layout_toLeftOf="@id/topRightMenuID"
    class="com.foo.bar.someClass"/>

<com.foo.bar.CustomImageViewLayout
    android:id="@+id/wheelMenuID"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"   
    android:layout_toRightOf="@id/leftMenuID"
    android:layout_toLeftOf="@id/rightMenuID"
    android:layout_below="@id/topMenuID"
    android:layout_above="@id/groundMenuID"/> 

<fragment
    android:id="@+id/figurePassageID"
    android:layout_width="fill_parent"
    android:layout_height="@dimen/figurePassage_height"
    android:layout_above="@id/groundMenuID"
    class="com.foo.bar.someClass"/>

</RelativeLayout> 
```

Fragment 通过标准 Fragment 类的 onCreateView 方法进行膨胀，无论使用何种 API，它们都可以正常工作。至于自定义的 ImageView 类......它有很多代码，我不确定我是否想将它粘贴到开放中（这有点像我的主要知识产权）。我很确定错误不存在，但我会再次验证它。如果没有，我会尝试粘贴一些代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:06:41.887

尝试更改您对`match_parent`to的所有用法`fill_parent`。

# android - android editText 键盘在 setText() 后更改

> ID：10091390
> 
> 赞同：0
> 
> 时间：2012-04-10T15:11:51.110
> 
> 标签：android, keyboard, android-edittext

如果我想在 editText 中输入消息，我输入一些数字，我的键盘如下所示：

![在此处输入图像描述](../Images/ad0a641b5435bfc94404a4c2f1073044.png)

但是在我通过单击按钮 ( `et.setText(et.getText().toString() + " " + "abc")`) 从代码中添加一些文本后，键盘更改为： ![在此处输入图像描述](../Images/e742af44bf5bc604cfe3ff27be41cad0.png)

有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T07:16:30.533

我使用了 editable.append 而不是 et.setText() 并且这行得通

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:40:47.243

您应该在 EditText 中设置输入类型（例如，在包含布局的 xml 文件中使用“android:inputType”）。

请参阅：http: [//developer.android.com/reference/android/widget/TextView.html#attr_android :inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

# c# - 如何在没有事务的情况下执行 sproc？

> ID：10091393
> 
> 赞同：0
> 
> 时间：2012-04-10T15:11:54.857
> 
> 标签：c#, sql-server, performance, tsql, delete-row

我有一个清理过程，每天需要删除表中大约 800 万行（有时更多）。此过程是用 C# 编写的，并使用 SMO 查询表索引的架构，在执行批量删除 500K 行的存储过程之前禁用它们。

我的问题是整个操作都存在于事务中。sproc 在配置了 TransactionScopeOption.Suppress 的 TransactionScope 内执行（这与其他事物一起运行，每个都启动一个新的 TransactionScope），我认为这不允许事务，并且在 sproc 中有明确的提交点。

该过程的 C# 部分可以总结为：

```
 try {
            DisableIndexes(table);
            CleanTable(table);
        }
        finally {
            RebuildIndexes(table);
        } 
```

sproc 内部有一个循环，基本上是：

```
DECLARE @rowCount bigint = 1

SET TRANSACTION ISOLATION LEVEL READ UNCOMMITTED

WHILE @rowCount <> 0 BEGIN
    DELETE TOP (@rowsPerBatch) Table 
    WHERE
        ID <= @maxID 

    SET @rowCount = @@rowcount
END 
```

昨晚这个过程在开始半小时后超时，回滚半小时，索引重建又半小时......零工作的停机时间太长......=（

**更新：**我已经在一个小样本数据库上运行了这个过程（并且有一个小的超时），这并不像我想的那样。显然，该过程正在正确删除行并按照我的意愿取得进展。尽管如此，日志仍在消耗。由于我处于 SIMPLE 数据库模式，在这种情况下日志不应该不会增长吗？还是删除存储过程如此“快”，以至于我没有给实际删除行的过程提供保持日志清洁所需的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:41:15.917

根据您的情况，您可以使用分区视图而不是分区表。就像是：

```
create table A
(
    X int,
    Y int,
    Z varchar(300),
    primary key (X,Y),
    check (X = 1)
)

create table B
(
    X int,
    Y int,
    Z varchar(300),
    primary key (X,Y),
    check (X = 2)
)

create table C
(
    X int,
    Y int,
    Z varchar(300),
    primary key (X,Y),
    check (X = 3)
)

go

create view ABC
as
select * from A
union all
select * from B
union all
select * from C

go

insert abc (x,y,z)
values (1,4,'test')

insert abc (x,y,z)
values (2,99,'test'), (3,123,'test')

insert abc (x,y,z)
values (3,15125,'test')

select * from abc

truncate table c

select * from abc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T06:36:36.960

如果我正确理解您的问题，您想要的是[自动滑动窗口](http://msdn.microsoft.com/en-us/library/aa964122%28v=sql.90%29.aspx)和分区表。

# sql - SAS 宏：在 proc sql 中使用宏

> ID：10091397
> 
> 赞同：1
> 
> 时间：2012-04-10T15:11:59.160
> 
> 标签：sql, sas, sas-macro

如何在 SQL 中使用宏？（对于每一件事，这是被选中的）

我的意思是这样的：

`&VarTable`是一个表，它有两个变量：（例如）`Lib`和`Table`

中的每个观察`&VarTable`都是表的名称：`Lib.Table`

我想为每张桌子做一些事情：

1）存在吗？

2）排序

最后一个条件：每个表（如果存在）都有一个变量`&VarField`。

```
 %macro mSortedTable(vLib,vTab,vVar);
        %if %sysfunc(exist(&vLib..&vTab)) %then %do;
             proc sort data = &vLib..&vTab;
                 by &vVar; 
             run;
             &vLib..&vTab
        %end; 
        %else %do; "" %end;
   %mend mSortedTable;

   proc sql noprint;
          select %mSortedTable(vLib=Lib,vTab=Table,vVar=&VarField)
              into: AccumVar separated by " "
          from &VarTable;
   quit; 
```

如何用 sql 和宏来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T20:36:24.247

你必须使用sql和宏吗？一个简单的数据步骤，`call execute`可以在这里做你需要的。

下面是一个示例，它采用具有要处理的表列表的数据集，检查表是否存在，如果存在，则按 &VarField 对其进行排序。如果需要，这可以很容易地扩展为通过一组自定义变量对每个表进行排序。

如果该表不存在，则会生成一条警告消息。

```
/* create fake data */
data testdat;
length lib $8 table $32;
input lib $ table $;
datalines;
work test1
work test2
work test3
work doesnotexist
;
run;
/* create 3 data sets */
data work.test1 work.test2 work.test3;
input var1 var2 var3;
datalines;
1 34 8
2 54 5
12 5 6
;
run;
/* end create data */

%let VarTable=work.testdat;
%let VarField=var2 var3;

data _null_;
  set &VarTable;
  dsname=catx('.',lib,table);
  if exist(dsname) then do;
    call execute("proc sort data=" || strip(dsname) || "; by &VarField; run;");
  end;
  else do;
    put "WARNING: The data set does not exist: " lib= table=;
  end;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T14:37:21.887

调用执行是一个很好的解决方案，但是如果“执行”的数据步骤代码很复杂（在这个例子中不是这样），我发现很难调试。

另一种方法是将所有变量放入宏变量中，然后在宏do-loop中循环遍历它们；

（基于@cmjohns 数据）

```
/* create fake data */
data testdat;
 length lib $8 table $32;
 input lib $ table $;
 datalines;
 work test1
 work test2
 work test3
 work doesnotexist
 ;
run;

/* create 3 data sets */
data work.test1 work.test2 work.test3;
 input var1 var2 var3;
 datalines;
 1 34 8
 2 54 5
 12 5 6
 ;
run;
/* end create data */

%let VarTable=work.testdat;
%let VarField=var2 var3;

proc sql noprint;
 select count(lib)
 into :cnt
 from &vartable;

 %Let cnt=&cnt;

 select strip(lib), strip(table)
 into :lib1 - :lib&cnt, :table1 - :table&cnt
 from &vartable;
quit;

%Macro test;
 %Do i = 1 %to &cnt;

  %Let lib=&&lib&i;
  %Let table=&&table&i;
  %Let dsn=&lib..&table;

  %if %sysfunc(exist(&dsn)) %then %do;
   Proc sort data=&dsn;
    by &varfield;
   run;
  %end;
  %else %do;
   %put WARNING: The data set does not exist: &dsn;
  %end;

 %end;
%Mend;
%test 
```

# c++ - 协议缓冲区：没有固定大小缓冲区的符号？

> ID：10091398
> 
> 赞同：9
> 
> 时间：2012-04-10T15:12:01.550
> 
> 标签：c++, protocol-buffers, file-format

由于我没有得到关于[这个](https://stackoverflow.com/questions/10031911/google-protocol-buffers-backward-reposition-io-head-in-the-stream-objects-provi)问题的答案，我必须制作原型并检查自己，因为我的数据集标题需要固定大小，所以我需要固定大小的字符串。那么，是否可以在协议缓冲区中指定固定大小的字符串或字节数组？这在这里并不明显，我对将固定大小的字符串强制放入标题消息感到有点难过。——即，`std::string('\0', 128)`;

如果不是，我宁愿使用`#pragma pack(1) struct header {...};`'

**编辑**

[问题在这里](https://stackoverflow.com/questions/10031911/google-protocol-buffers-backward-reposition-io-head-in-the-stream-objects-provi)间接回答。会回答，除了

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T16:04:49.627

protobuf 在协议中没有这样的概念，在 .proto 模式语言中也没有。*在字符串和 blob 中，数据在技术上*始终是使用长度前缀的可变长度（其本身使用 varint 编码，因此即使长度也是可变长度）。

当然，如果您只存储特定长度的数据，那么它会排成一行。另请注意，由于 protobuf 中的字符串是使用 UTF-8 编码的 unicode，因此编码数据的长度*并不*像字符数那么简单（除非您只使用 ASCII 字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T23:47:45.810

这是对先前答案的轻微澄清。Protocol Buffers 不**将**字符串编码为 UTF-8，而是将它们编码为常规字节。在线格式将是消耗的字节数，后跟实际字节数。请参阅[https://developers.google.com/protocol-buffers/docs/encoding/](https://developers.google.com/protocol-buffers/docs/encoding/)。

虽然在线格式始终相同，但协议缓冲区提供了两个接口供开发人员使用，字符串和字节，主要区别在于前者通常会尝试向开发人员提供字符串类型，而后者会尝试提供提供字节类型（即Java会为字符串提供String，为字节提供ByteArray）。

# wpf - WPF 控件将任何溢出的文本淡出为透明，而不是剪切或换行？

> ID：10091407
> 
> 赞同：0
> 
> 时间：2012-04-10T15:12:30.877
> 
> 标签：wpf, wpf-controls

如何创建一个 WPF 控件（类似于 TextBlock），以便任何溢出的文本都淡出为透明而不是简单地剪切或换行？

我需要保持我的控件固定宽度，因此扩展控件的宽度以适应文本不是一种选择。我也不想让文本字体变小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:44:11.957

不太确定您要达到的目标，但您可以执行以下操作：

```
 <TextBlock Text="Some long text here that should fade out">
        <TextBlock.Foreground>
            <LinearGradientBrush>
                <GradientStop Offset="0" Color="Black"/>
                <GradientStop Offset="0.7" Color="Black"/>
                <GradientStop Offset="1" Color="Transparent"/>
            </LinearGradientBrush>
        </TextBlock.Foreground>
    </TextBlock> 
```

但是您的控件仍然需要足够宽以容纳所有文本才能显示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:53:18.163

```
<TextBlock Text="fgdfgfdgfddgfdgdfgfdgfdgd" Width="129" TextWrapping="NoWrap">
        <TextBlock.Foreground>
            <LinearGradientBrush EndPoint="0.661,0.399" StartPoint="0.008,0.496">
                <GradientStop Color="Black" Offset="0"/>                    
                <GradientStop Color="#7F000000" Offset="0.803"/>
                <GradientStop Color="#4C0A0909" Offset="0.95"/>
                <GradientStop Color="#BF000000" Offset="0.729"/>
                <GradientStop Color="#F8000000" Offset="0.699"/>
            </LinearGradientBrush>
        </TextBlock.Foreground>
    </TextBlock> 
```

渐变的技巧是，即使所有颜色都基于黑色，淡化是通过使用 RGBA 的一部分通过每个渐变的不透明度来实现的，伪代码：

```
GradientStop Color="Black" A=100%               
GradientStop Color="Black" A=97%  Offset="0.803"
GradientStop Color="Black" A=75%  Offset="0.95"
GradientStop Color="Black" A=80%  Offset="0.729"
GradientStop Color="Black" A=30%  Offset="0.699" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:55:08.567

谢谢大家，但我在[MSDN](http://social.msdn.microsoft.com/Forums/en/wpf/thread/f8142d77-134c-4ebf-8ab4-f6c17955b218)上找到了我需要的答案。

# java - 如何使用 Java（无 DB）更快地删除文件中的重复/聚合行

> ID：10091408
> 
> 赞同：2
> 
> 时间：2012-04-10T15:12:32.687
> 
> 标签：java, performance, collections, file-io

我有一个 2GB 的大文本文件，它有 5 列由制表符分隔。**仅当 5 列中有 4 列匹配时，**才会将行称为重复行。

 **现在，我正在做 dduping，首先将每个列加载到单独的 List 中，然后遍历列表，删除遇到的重复行并聚合。

**问题：处理一个文件需要 20 多个小时。** 我有 25 个这样的文件要处理。

**任何人都可以分享他们的经验，他们将如何进行这种重复？**

这个 dduping 将是一个丢弃的代码。所以，我一直在寻找一些快速/肮脏的解决方案，以尽快完成工作。

这是我的伪代码（大致）

```
Iterate over the rows
  i=current_row_no.    
    Iterate over the row no. i+1 to last_row
                    if(col1 matches  //find duplicate
                        && col2 matches
                        && col3 matches  
                        && col4 matches)
                        { 
                           col5List.set(i,get col5); //aggregate 
                        } 
```

重复的例子

A 和 B 将重复 A=(1,1,1,1,1), B=(1,1,1,1,2), C=(2,1,1,1,1) 并且输出将be A=(1,1,1,1,1+2) C=(2,1,1,1,1) 【注意B已经被踢出】

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:45:31.847

HashMap 将是您最好的选择。在单个恒定时间操作中，您可以检查重复并获取适当的聚合结构（我的代码中的 Set）。这意味着您可以在 O(n) 中遍历整个文件。这是一些示例代码：

```
public void aggregate() throws Exception
  {
    BufferedReader bigFile = new BufferedReader(new FileReader("path/to/file.csv"));

    // Notice the paramter for initial capacity. Use something that is large enough to prevent rehashings.
    Map<String, HashSet<String>> map = new HashMap<String, HashSet<String>>(500000);

    while (bigFile.ready())
    {
      String line = bigFile.readLine();
      int lastTab = line.lastIndexOf('\t');
      String firstFourColumns = line.substring(0, lastTab);

      // See if the map already contains an entry for the first 4 columns
      HashSet<String> set = map.get(firstFourColumns);

      // If set is null, then the map hasn't seen these columns before
      if (set==null)
      {
        // Make a new Set (for aggregation), and add it to the map
        set = new HashSet<String>();
        map.put(firstFourColumns, set);
      }

      // At this point we either found set or created it ourselves
      String lastColumn = line.substring(lastTab+1);
      set.add(lastColumn);
    }
    bigFile.close();

    // A demo that shows how to iterate over the map and set structures
    for (Map.Entry<String, HashSet<String>> entry : map.entrySet())
    {
      String firstFourColumns = entry.getKey();
      System.out.print(firstFourColumns + "=");

      HashSet<String> aggregatedLastColumns = entry.getValue();
      for (String column : aggregatedLastColumns)
      {
        System.out.print(column + ",");
      }
      System.out.println("");
    }
  } 
```

几点：

*   HashMap 的 initialCapaticy 参数很重要。如果条目的数量大于容量，则结构会被重新散列，这非常慢。默认初始容量为 16，这将导致您多次重新散列。选择一个您知道大于前四列的唯一集数的值。
*   如果聚合中的有序输出很重要，您可以将 HashSet 切换为 TreeSet。
*   此实现将使用大量内存。如果您的文本文件是 2GB，那么您可能需要 jvm 中的大量 RAM。您可以添加 jvm 参数`-Xmx4096m`以将最大堆大小增加到 4GB。如果您没有至少 4GB，这可能不适合您。
*   这也是一个可并行化的问题，所以如果你不顾一切，你可以线程化它。不过，对于一次性代码来说，这将是一个很大的努力。[编辑：正如评论中指出的那样，这一点可能不正确]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:31:35.323

我会在前四列对整个列表进行排序，然后遍历列表，知道所有重复项都在一起。这将为您提供 O(NlogN) 的排序和 O(N) 的遍历，而不是 O(N^2) 的嵌套循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:42:58.350

我会使用记录的 HashSet。这可能导致 O(n) 时间而不是 O(n^2)。您可以创建一个类，该类具有每个字段，每行一个实例。

你需要有相当数量的内存，但现在 16 到 32 GB 相当便宜。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:58:28.050

我会做一些与 Eric 的解决方案类似的事情，但不是将实际字符串存储在 HashMap 中，而是存储行号。因此，对于特定的四列散列，您将存储散列到该值的行号列表。然后在通过数据的第二条路径上，您可以删除这些行号处的重复项/根据需要添加 +x。

这样，您的内存需求将小很多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T17:25:58.990

如果您有足够的（免费）RAM，已经发布的解决方案很好。由于 Java 倾向于“仍然工作”，即使它进行大量交换，如果您认为 RAM 可能是限制因素，请确保您没有太多的交换活动。

如果您的 RAM 真的太少，一个简单的“一次性”解决方案是首先将文件划分为多个文件，具体取决于前四列中的数据（例如，如果第三列值或多或少均匀分布，则按该列的最后两位数字）。只需检查一次文件，并在读取记录时将它们写入 100 个不同的文件，具体取决于分区值。这将需要最少的 RAM，然后您可以使用更少的内存来处理剩余的文件（如果分区值分布良好，则每个文件只有大约 20MB），然后再次连接结果。

明确一点：如果你有足够的 RAM（不要忘记操作系统也希望有一些用于磁盘缓存和后台活动），这个解决方案会更慢（甚至可能是 2 倍，因为两倍的数量数据需要被读取和写入），但如果你被交换到死，它可能会快很多`:-)`**

# php - 删除没有 $_POST php 检查的项目

> ID：10091411
> 
> 赞同：0
> 
> 时间：2012-04-10T15:12:41.220
> 
> 标签：php, session, post, checkbox

我遇到了以下问题：我有一个带有文本的表格，每个表格旁边都有一个复选框。我还有一个类似按钮的链接“删除选定的”。我想要的是让用户能够通过复选框选择许多文本并一起删除选定的文本。问题是我不想使用表单，所以我不能使用 $_POST，所以我想我必须使用 $_SESSION。我以前使用过会话，但我不知道如何将它们与复选框结合使用..

如果你能给我一些提示或例子，我将非常感激..

我的部分代码给你一个线索..

view_texts.php

```
<?php 

        $sql="SELECT * FROM texts";
        $res=mysql_query($sql) or die(mysql_error());
        $i=1;
        while($row=mysql_fetch_array($res))
            {
     ?>

        <tr>
            <td><input type="checkbox" name="check[]" value="<?php echo $row['id']?>"/></td>
            <td><?php echo $i; ?></td>
            <td><?php echo $row['title']; ?></td>
            <td><?php echo substr($row['description'],0,20); ?></td>
            <td><?php echo $row['page_id']; ?></td>

            <td><a href="edit_text.php?id=<?php echo $row['id'];?>"><img src="images/user_edit.png" alt="" title="" border="0" />                   </a></td>
            <td><a href="delete_text.php?id=<?php echo $row['id'];?>" class="ask"><img src="images/trash.png" alt="" 
            title="" border="0" /></a></td>
        </tr>
      <?php
       $i++;
            }
      ?> 
<a href="delete_selected_texts.php" class="bt_red"><span class="bt_red_lft"></span><strong>Διαγραφή επιλεγμένων</strong><span class="bt_red_r"></span></a> 
```

delete_selected_texts.php

```
<?php
        if (isset($_POST['check']))
        {
            foreach ($_POST['check'] as $value)
                {
                    $sql = "DELETE FROM texts WHERE id =".$value;
                    mysql_query ($sql);

                }

        }  
?> 
```

这是我用于表单标签内的文本框的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:55:14.440

如果您坚持不使用表单，无论出于何种原因，您正在考虑使用 javascript 并在 POST 上发送 AJAX 请求。我推荐使用 jQuery，因为它极大地简化了选择要定位的元素的过程。

它看起来像这样......

```
$(document).function(){
    $(":checkbox").click(function(e){
              var deleteItem = $("input:id").val();
              $.ajax({
                      type: "POST";
                      data: deleteItem;
                      url: "path/to/a/file.php";
                      success: function(data){
                              if (data="success"){
                                  $(this).css("backgroundcolor", "blue");
                              } else {
                                  alert("failed to find item");
                              }
                          }
          });
} 
```

然后，您需要有一个 Ajax 请求将数据发送到的文件，该文件将构建一个项目列表以删除/从该列表中删除项目，当调用 delete_selected_texts.php 时将存储和调用该列表以删除.

注意：上面的 jQuery 没有经过检查。那里很有可能出现几个错误。

# c# - 如何从 sql server 刷新 aspx 页面

> ID：10091415
> 
> 赞同：2
> 
> 时间：2012-04-10T15:12:56.347
> 
> 标签：c#, asp.net

如何从 sql server 刷新 aspx 页面。我正在使用 asp.net、C-Sharp 和 SQL Server 2008。我的意思是我有表，比如**Table1 。如果对****Table1**执行任何 DML 操作（更新、插入等），然后我的页面，比如**Page1.aspx**应该自动刷新。我不能使用**计时器**来刷新页面。我需要从数据库触发刷新。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T16:16:54.000

即使在数据更改时可能会通知服务器，但真正的挑战是将这些更改实时传达给客户端，而不需要计时器或用户交互。

你有几个选择：

1.  最好的办法是使用[WebSocket](http://en.wikipedia.org/wiki/WebSocket)，它可以实现客户端和服务器之间的双向通信。这是我会选择的解决方案。

    以下是一些使用示例`WebSockets`：

    *   [使用 IIS、ASP.NET 和 WCF 使用 WebSocket 构建实时 Web 应用程序](http://channel9.msdn.com/Events/BUILD/BUILD2011/SAC-807T)
    *   [HTML5 C# WebSockets 服务器和 ASP.NET 客户端实现](http://www.undisciplinedbytes.com/2010/06/html-5-c-web-sockets-server-and-asp-net-client-implementation/)
    *   [C# WebSocket 服务器](https://stackoverflow.com/questions/2211898/c-sharp-web-socket-server)
    *   [ASP.NET 4.5 中的 WebSocket](http://www.techbubbles.com/aspnet/websockets-in-asp-net-4-5/)
    *   [ASP.NET 中的 WebHooks 和 WebSockets](http://www.entechsolutions.com/hooks-and-sockets-for-web-apps)

    周围也有一些很好的库可以处理大部分的腿部工作。要检查的一对是[WebSync](http://www.frozenmountain.com/websync/downloads#server)和[PokeIn](http://www.pokein.com/Products/Downloads.aspx)。这两种产品都提供了不错的文档和社区版本，您可以免费下载。

    以下是一些要检查的教程：

    *   [WebSync 教程](http://www.frozenmountain.com/websync/support/tutorials/v3)
    *   [PokeIn 基础教程](http://www.pokein.com/Help/BasicTutorial.aspx)/ [PokeIn 高级教程](http://www.pokein.com/Help/AdvancedTutorial.aspx)

2.  `X`使用 AJAX 每隔几秒轮询一次更改。如果检测到更改重新加载页面，否则什么也不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:16:27.773

您可能想要查看[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)对象。该对象将实时通知您指定数据库查询的更改。当您的应用程序收到来自数据库的消息时，您只需在代码隐藏中刷新页面即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:43:06.950

我想知道您是否可以调整 SignalR 向客户端发送消息以提示刷新？

[本教程](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)可以帮助您入门。

# c++ - 将 UTC 转换为本地

> ID：10091419
> 
> 赞同：0
> 
> 时间：2012-04-10T15:13:11.377
> 
> 标签：c++, visual-c++, time, utc

我的时区是美国东部标准时间，比 UTC 晚 5 小时。鉴于：

```
struct tm t = { 0, 30, 15, 10, 3, 112, 0, 0, -1 };
time_t utc_in_timet = _mkgmtime(&t);

struct tm tt = { 0 };
localtime_s(&tt, &utc_in_timet); 
```

当 localtime_s 返回时，tt 关闭一小时。我那里是 11:30 而不是 10:30。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:31:38.510

我认为这与夏令时有关。您确定您当前的时区是 EST (-5) 吗？因为您的系统似乎应该使用 EDT (-4) ？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:53:21.627

验证您的本地时区。英格兰（例如伦敦）和美国东海岸目前都处于夏令时，所以这看起来是个问题（正如有人已经提到的那样）。对于美国东海岸 EDT 将有 4 小时的不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:54:25.723

我已经在我的机器上尝试了你的代码并且它工作正常（我的时区是 GMT+2）。由于您告诉系统检查夏令时本身（`tm`is的最后一个参数`-1`），因此它实际上正在使用 EDT，因此为您提供 GMT-4。

您可以尝试将月份 ( `3`)替换为`2`，以便日期为 3 月 10 日，就在夏令时更改之前；我敢打赌，在这种情况下，你会得到预期的 10:30。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:48:07.943

以为问题是月份是三月： struct tm t = { 0, 30, 15, 10, **3** , 112, 0, 0, -1 }; 然后，这是夏令时问题。但正如 Gorpik 所指出的，“月份从 0 到 11，所以 4 月确实是 3”。

所以，我检查了 - 它显示海法的 18:30 是正确的 +2UTC。

# php - 表单发布后打开新的 TCPDF

> ID：10091421
> 
> 赞同：0
> 
> 时间：2012-04-10T15:13:20.870
> 
> 标签：php, post, tcpdf

我有一个表单 test.html（使用 dhtmlx 在 JS 中创建，不重要），我想提交给 PHP 脚本 generateReport.php

generateReport.php 使用从 test.html 发布的信息使用 TCPDF 库创建一个 PDF。

如何从 test.html 发布变量，并将页面重定向到填写的 PDF？我宁愿不存储它，但如果我暂时存储它真的不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:28:23.537

尝试使用表单操作将表单发布到 generateReport.php。

只需使用 [$_POST](http://www.w3schools.com/php/php_post.asp) ['form_field_name']获取所有表单值

我认为这将帮助您获得所有表单值。

# php - Curl 无法正确识别 cookie 中的过期值

> ID：10091423
> 
> 赞同：4
> 
> 时间：2012-04-10T15:13:24.130
> 
> 标签：php, cookies, curl

我正在尝试使用 curl 在 pinterest.com 上进行登录。我得到了以下请求响应流程：

1.  GET-请求登录表单并抓取隐藏字段（csrftoken）
2.  POST-请求登录凭据（邮件和密码）和抓取的 csrftoken
3.  接收 Session Cookie 进行登录

使用 Curl，我可以看到正在发送和接收的以下标头：

```
 GET /login/?next=%2F HTTP/1.1
 User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0.2) Gecko/20100101 Firefox/10.0.2
 Host: pinterest.com
 Referer:
 Accept: text/html,application/xhtml+xml,application/xml,*/*
 Accept-Language: de-de,en-us
 Connection: keep-alive

 HTTP/1.1 200 OK
 Content-Type: text/html; charset=utf-8
 Date: Tue, 10 Apr 2012 15:03:24 GMT
 ETag: "45d6a85f0ede46f13f4fc751842ce5b7"
 Server: nginx/0.8.54
 Set-Cookie: csrftoken=dec6cb66064f318790c6d51e3f3a9612; Max-Age=31449600; Path=/
 Set-Cookie: _pinterest_sess="eJyryMwNcTXOdtI3zXcKNq0qznIxyXVxK/KqSsy3tY8vycxNtfUN8a3yc3E09nXxLPdztLVVK04tLs5MsfXNAopVpVf6VnlW+Qba2gIAuqgZIg=="; Domain=pinterest.com; HttpOnly; expires=Tue, 17-Apr-2012 15:03:24 GMT; Max-Age=1334675004; Path=/
 Vary: Cookie, Accept-Encoding
 Content-Length: 4496
 Connection: keep-alive 
```

所以在第 1 步之后，设置了两个 cookie csrftoken 和 _pinterest_sess。但是查看 cookiejar 文件（我使用 CURLOPT_COOKIEFILE 和 CURLOPT_COOKIEJAR 让 curl 处理 cookie 处理）显示以下内容：

```
 # Netscape HTTP Cookie File
   # http://curl.haxx.se/rfc/cookie_spec.html
   # This file was generated by libcurl! Edit at your own risk.

   pinterest.com        FALSE        /        FALSE        1365519805        csrftoken        dec6cb66064f318790c6d51e3f3a9612
   #HttpOnly_.pinterest.com        TRUE        /        FALSE        -1626222087        _pinterest_sess        "eJyryMwNcTXOdtI3zXcKNq0qznIxyXVxK/KqSsy3tY8vycxNtfUN8a3yc3E09nXxLPdztLVVK04tLs5MsfXNAopVpVf6VnlW+Qba2gIAuqgZIg==" 
```

首先要注意的是 _pinterest_sess cookie 行之前的 #HttpOnly_。我只是假设 curl 处理得很好。但进一步看，可以看到将负值设置为到期日期：-1626222087

我不知道这是从哪里来的，因为 cookie 设置为“expires=Tue，2012 年 4 月 17 日 15:03:24 GMT”（大约 7 天后，从今天开始计算）。

在下一个请求中，curl 不会设置 _pinterest_sess cookie：

```
 POST /login/?next=%2F HTTP/1.1
 User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:10.0.2) Gecko/20100101 Firefox/10.0.2
 Host: pinterest.com
 Referer: https://pinterest.com/login/?next=%2F
 Cookie: csrftoken=dec6cb66064f318790c6d51e3f3a9612
 Accept: text/html,application/xhtml+xml,application/xml,*/*
 Accept-Language: de-de,en-us
 Connection: keep-alive
 Content-Length: 123
 Content-Type: application/x-www-form-urlencoded

 HTTP/1.1 302 FOUND
 Content-Type: text/html; charset=utf-8
 Date: Tue, 10 Apr 2012 15:05:26 GMT
 ETag: "d41d8cd98f00b204e9800998ecf8427e"
 Location: http://pinterest.com/
 Server: nginx/0.8.54
 Set-Cookie: _pinterest_sess="eJzLcssPCy4NTclIjvAOrjQzyywoCChISgvLDi+2tY9PrSjILEottvUN8a3yc4k09gtxrfRLt7VVK04tLs5MAYonV/qGeFb4ZkWW+4LES4tTi+KBEv4u6UZ+WYEmvlm+QOxZ6R/iWOEbEmgLAKNfJps="; Domain=pinterest.com; HttpOnly; expires=Tue, 17-Apr-2012 15:05:26 GMT; Max-Age=1334675126; Path=/
 Vary: Cookie
 Content-Length: 0
 Connection: keep-alive 
```

在响应中，设置了另一个 _pinterest_sess cookie，因为 curl 没有发送最后一个。

目前，我不知道我是否做错了什么，或者 curl 是否无法正确解析 cookie 中的过期值。

任何帮助将不胜感激 ：）

// 编辑还有一件事：根据[http://opensource.apple.com/source/curl/curl-57/curl/lib/cookie.c](http://opensource.apple.com/source/curl/curl-57/curl/lib/cookie.c)函数 curl_getdate() 用于提取日期。该函数的文档列出了一些示例（[http://curl.haxx.se/libcurl/c/curl_getdate.html](http://curl.haxx.se/libcurl/c/curl_getdate.html)）：

*   1994 年 11 月 6 日星期日 08:49:37 GMT
*   格林威治标准时间 94 年 11 月 6 日星期日 08:49:37
*   1994 年 11 月 6 日星期日 08:49:37
*   格林威治标准时间 1994 年 11 月 6 日 08:49:37
*   格林威治标准时间 94 年 11 月 6 日 08:49:37
*   1994 年 11 月 6 日 08:49:37
*   1994 年 11 月 6 日 08:49:37
*   94 年 11 月 6 日 08:49:37
*   格林威治标准时间 1994 年 11 月 6 日 08:49:37
*   08:49:37 94 年 11 月 6 日
*   94 年 11 月 6 日星期日 08:49:37
*   1994 年 11 月 6 日
*   94 年 11 月 6 日
*   94 年 11 月 6 日星期日
*   1994.11.6
*   太阳/十一月/6/94/格林威治标准时间
*   1994 年 11 月 6 日星期日 08:49:37 CET
*   美国东部时间 1994 年 11 月 6 日 08:49:37
*   2004 年 9 月 12 日星期日 15:05:58 -0700
*   2004 年 9 月 11 日星期六 21:32:11 +0200
*   20040912 15:05:58 -0700
*   20040911 +0200

它们都不符合上述到期日期“Tue, 17-Apr-2012 15:03:24 GMT”，因为所有带有连字符的示例仅使用 2 位数年份。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:58:05.790

由于 32 位有符号整数值的限制，您的计算机遇到问题。

服务器在未来设置一个*Max-Age*为 1334675004 秒的 cookie。

```
Max-Age=1334675004 
```

您在@ 2012-04-10 15:13:24Z 在这里发布了您的问题。这是 1334070804 的 UNIX 时间戳。如果将 1334675004 添加到其中，并且在进行整数往返时考虑 2147483647 的 32 位整数限制，您将得到：-1626221485：

```
 1334070804
+ 1334675004
------------
 -1626221485 
```

如数字所示，看起来服务器确实误解了 Max-Age 属性，如果将每个值相互减去，则大约 7 天（以秒为单位）的增量（604200 = ~6.99 天，差异是因为 cookie在您在这里发布问题之前设置）。但是 Max-Age 是秒的增量，而不是绝对的 UNIX 时间戳。

尝试`PHP_INT_MAX`使用您的 PHP 版本进行提升，或针对 64 位进行编译，这应该可以防止出现负数。但是，服务器的 max-age 计算仍然中断。您可能想联系 pinterest.com 并报告问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:58:57.687

看起来`pinterest.com`使用`Max-age`不正确，这就是 curl 删除此 cookie 的原因。

从您的示例中，`Max-age`包含时间戳`Tue, 17-Apr-2012 15:03:24 GMT`，而它应该包含从请求时间到此日期的秒数 - `604800`（从请求时间 - 标头判断`Date`）

curl 所做的是将`Max-age`值添加到当前时间戳并将其保存为带符号的 32 位整数，因此`-1626222087`.

至于解决方案 - 您可以尝试联系 pinterest 并报告错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-15T08:46:16.630

实际上，您不需要联系 pinterest 站点，因为不需要将 cookie 最大年龄发送回服务器（如果您将在短时间内使用 cookie，或者您可以自己计算正确的最大年龄）。只需翻转减号，它就会起作用，这意味着它将被发送回服务器。这还不是你要做的全部。有时根据显示的登录页面，您还必须分配隐藏字段（CSRF 令牌所在的位置，并且必须与 cookie 中的相同令牌值匹配）。此外，有时需要更改 cookie（重置 cookie 值）。因此，使用自动登录工具和进行屏幕抓取的 pinterest 网站越来越难登录。最近，他们改变了网站的运作方式。因此，上述所有要点现在都不起作用。实际上你并不知道他们什么时候会改变登录的工作方式。当变化发生时，你必须尝试和“猜测”。实际上，这种态度应该不是针对开发人员，而是针对那些对系统安全构成威胁的人（入侵者）。您还必须考虑上述几点的合法性问题。Pinterest 有 API（虽然它现在已经关闭），所以它是使用该 API 的最佳和最正确的方法（请参阅[https://github.com/kellan/pinterest.api.php](https://github.com/kellan/pinterest.api.php)）。您正在以 json 格式交换消息。使用 m.pinterest.com 的最后一个选项，它适用于移动设备，并且可以直接使用类似 parce one login html 的隐藏输入字段并重新提交具有正确值的表单（使用它，您也会再次面临合法性问题）。在使用 curl 之类的工具之前，请咨询 pinterest 网站，或者等到 pinterest api 启动。是的，系统中有一些改进，例如获取 json 响应，从而结束屏幕抓取，但这并不意味着全新的 api。同样，现在他们（似乎）实现了 Web 服务、restful、api 和接受 ajax 请求，这又是朝着积极改进迈出的一步。网上有很多关于这个问题的讨论，所以请参考他们以获取详细信息。

# java - java中Connection对象的使用

> ID：10091425
> 
> 赞同：1
> 
> 时间：2012-04-10T15:13:33.823
> 
> 标签：java

我有一个要求，我需要调用大约 30 -40 个单独的函数来容纳 sql 查询和更新和/或插入。在这种情况下，我如何获取连接对象。我是想在一个地方创建并将连接对象传递给所有 30 个函数，还是在函数本身中创建连接对象。这些查询在不同的函数中发生了许多更新，时间至关重要。那么我如何创建连接对象并一遍又一遍地使用相同的连接对象而不创建新对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:25:19.967

通过使用 Apache Commons 提供的数据库连接池库，您可以省去很多麻烦（和痛苦）：http: [//commons.apache.org/dbcp/](http://commons.apache.org/dbcp/)

PS：您过去似乎已经问过这个问题 - 请参阅[为 sybase 设置 jdbc 连接池](https://stackoverflow.com/questions/9170922/setting-up-a-jdbc-connection-pool-for-sybase)- 您是否遵循那里给出的建议？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:16:25.583

在函数中指定额外的类型参数，`Connection`并在调用函数时将现有连接传递给函数。

# asp.net-mvc-3 - 如何使用复杂对象在多个与“实体框架4.1”相关的表中插入数据

> ID：10091432
> 
> 赞同：0
> 
> 时间：2012-04-10T15:13:55.633
> 
> 标签：asp.net-mvc-3, razor, entity-framework-4.1

我想知道是否有任何方法可以使用复杂类型在多个表中插入数据如果我有一个父对象有一组子对象并且我也需要在父对象及其子对象中插入数据示例：这是父对象“视频”及其子视频数据图 ![在此处输入图像描述](../Images/6d17ada2f694a6091d0b17ecc7f9ed8e.png)

请指教

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:39:42.157

EF 将自动更新所有修改的实体/属性。因此，如果您创建一个新的 VideoData，设置它的语言，并将其附加到 Video 实例的 VideoDatas 集合中，然后调用

```
context.SaveChanges(); 
```

EF 会将 VideoData 添加到数据库中，设置语言，然后更新视频记录。它在图形上上下移动以保存任何更改。您只需要确保您首先使用`context`的是获取实体，以便 EF 可以跟踪它。

# c# - 我可以在 .NET 中验证 XMLDSIG 签名而不需要安装根证书吗？

> ID：10091434
> 
> 赞同：1
> 
> 时间：2012-04-10T15:13:58.177
> 
> 标签：c#, x509certificate, xml-dsig

我想使用 XMLDSIG 来验证 .config 文件是否未被篡改。我还希望能够[验证签名链](https://stackoverflow.com/questions/9161835/verify-xmldsig-chain-in-net)，以便我可以信任签名。

我在链中获得了三个证书：

```
Root CA -> Intermediate Signing CA -> Signing Key 
```

我检查该文件是否使用中间 CA 颁发的密钥进行签名。

我想这样做而不在用户的 Windows 证书存储中安装任何证书。这些是自签名证书，所以不是每个用户都希望我将它们安装在他们的根存储中。*在我的*根存储中安装它们没有问题。

我有原始的 .CER 文件——它们包含在签名块中，我可以将它们与验证码一起包含。我可以使用`X509ChainPolicy.ExtraStore`.

如果证书未安装在根存储中，并且我验证了链，则`X509Chain.Build`返回`false`，并且链中有 a `X509ChainStatusFlags.UntrustedRoot`。

我可以仅在此操作期间添加受信任的证书吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:20:22.027

假设您在信任链中拥有所有签名证书的公钥的物理副本，那么这可以通过使用 OpenSSL 命令行工具来实现。

[http://www.madboa.com/geek/openssl/#verify-standard](http://www.madboa.com/geek/openssl/#verify-standard)

一开始它的学习曲线有点陡峭，但它是一个非常强大的实用程序。

如果您没有签名证书，那么您将无法验证任何内容。这与在没有看到原始签名的情况下尝试验证人类签名相同。你没有什么可比的，那你怎么验证真伪呢？

**更新**

这里有一些东西也许可以帮助你：

[http://social.msdn.microsoft.com/Forums/eu/clr/thread/1966a6e8-b6f4-44d1-9102-ec3a26426789](http://social.msdn.microsoft.com/Forums/eu/clr/thread/1966a6e8-b6f4-44d1-9102-ec3a26426789)

# jquery - 关于 jQuery 的奇怪输出

> ID：10091436
> 
> 赞同：1
> 
> 时间：2012-04-10T15:13:58.617
> 
> 标签：jquery

* * *

```
var message = 'Spoon!';
$('#foo').bind('click', function() {
alert(message);
});

message = 'Not in the face!';
$('#bar').bind('click', function() {
alert(message);
}); 
```

* * *

为什么两个输出信息是一样的：“Not in the face！”；'foo' 的闭包中的第一条消息不是指的是 'Spoon!' 吗？为什么不？请有人解释。我不明白教程的解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-10T15:17:08.880

这是因为事件处理程序是异步启动的。虽然您设置的消息值是在第一个线程中完成的。

所以基本上你的程序会读取你的整个代码，将值设置为`'Spoon!'`，然后设置为你设置的最后一个`'Not in the face!'`。然后，当您单击任一按钮时，它会提醒 message 的值`'Not in the face!'`。

尝试将消息放入函数中，然后您会看到每个消息都不同。这将按您的预期工作，因为您也异步设置了值。

```
$('#foo').bind('click', function() {
  var message = 'Spoon!';
  alert(message);
});

$('#bar').bind('click', function() {
  var message = 'Not in the face!';
  alert(message);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:16:41.060

单击时`foo`，会提示 的最后一个值`message`，即“不在脸上！” 因为这行代码在页面加载时已经执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:19:01.683

只有函数的绑定发生。代码的实际执行发生在点击事件发生时。当点击事件发生时，消息变量将其最后一个值，即“不在脸”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:20:57.220

```
// below you are estblishing the "variable" message and setting it to the String "Spoon!"
var message = 'Spoon!';
// Here you use the jquery method to tell a button with the ID "foo" 
//    to alert the variable "message"
$('#foo').bind('click', function() {
    alert(message);    //    the alert
});

//  Here's where you're getting confused
//Below you are "re-asigning the variable "message" to be the String "Not in the face!"
message = 'Not in the face!';
// below is another click bind to a button, but this time the id name is "bar"
// so both buttons (foo and bar) are committing the same action, 
// but your variable has been changed to "Not in the face!" and therefor
//  will never display "Spoon!"
$('#bar').bind('click', function() {
    alert(message);
}); 
```

# c# - 通过 Emgucv 调用 opencv

> ID：10091437
> 
> 赞同：0
> 
> 时间：2012-04-10T15:14:01.517
> 
> 标签：c#, c++, opencv, emgucv, camera-calibration

我正在尝试在 c# 中使用 Emgucv 将投影矩阵分解为旋转矩阵、平移矩阵和相机矩阵。我可以使用 RQ-Factorization 轻松做到这一点，但通过检查 Emgucv API 参考我找不到它。

由于 Emgucv 是一个 opencv 包装器，因此我搜索了 opencv 函数，发现了以下 c++ 函数：

```
void cvDecomposeProjectionMatrix(const CvMat *projMatrix, CvMat *cameraMatrix, 
     CvMat *rotMatrix, CvMat *transVect, CvMat *rotMatrX=NULL, CvMat *rotMatrY=NULL, 
     CvMat *rotMatrZ=NULL, CvPoint3D64f *eulerAngles=NULL)

void RQDecomp3x3(const Mat& M, Mat& R, Mat& Q) 
```

问题是：有什么方法可以在 Emgucv 中使用这些功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T00:35:56.017

EmguCV 是一个 opencv 包装器，但现在您要使用的功能仍未包装。你有两个选择：

1.  自己包装一下，看看 CvInvokeCalib3d.cs（或者可能是 emgucv PInvoke 文件夹中的另一个类）如何定义 opencv 函数 PInvoking
2.  请在 emgu 论坛上为您将其添加到 emgucv svn

# html - 如何在html页面中显示html内容

> ID：10091442
> 
> 赞同：0
> 
> 时间：2012-04-10T15:14:39.253
> 
> 标签：html, iframe

我知道我可以在 html 页面中有 iframe，比如 parent.htm，我可以有这样的东西

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title></title>
    </head>
    <body>
        <img alt="http://localhost/images/header.png" src="http://localhost/images/header.png" width=700px height=100px />
        <iframe src="Child.htm"></iframe>
    </body>
</html> 
```

但是我可以将 html 直接放入 iframe 而不是将其指向文件（child.htm）。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:18:12.907

不，你不能只有不支持框架的浏览器才会显示内容

> 要内联插入的信息由该元素的 src 属性指定。另一方面，IFRAME 元素的内容只能由不支持框架或配置为不显示框架的用户代理显示。

[来自 W3C](http://www.w3.org/TR/html4/present/frames.html#h-16.5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:17:15.713

使用 div，在其中创建 html。然后为 div 设置大小并使用 overflow:auto 创建滚动条（如 iframe）

# asp.net - 加载整个 ASP.Net 页面时调用 Java 脚本警报函数

> ID：10091445
> 
> 赞同：0
> 
> 时间：2012-04-10T15:14:47.880
> 
> 标签：asp.net, c#-4.0

**我在内容页面**文件后面的 ASP.net4.0 代码中使用了 JavaScipt Alert 功能

 **```
public void Show(string message)
 {

  Page.RegisterClientScript(this.GetType(), "Alert", "<script type=text/javascript>alert('+message+')</script>");         
 } 
```

当我单击按钮以获取此脚本调用时，警报消息出现在空白屏幕上，然后同一屏幕被完全加载。

我希望在加载整个页面后显示此消息（消息将显示在带有后退控件的同一页面上），然后显示消息。使用母版页和内容页..

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:20:24.070

If you want to show it when the document is loaded, use [`RegisterStartupScript`](http://msdn.microsoft.com/en-us/library/z9h4dk8y.aspx):

```
 public void Show(string message)
 {
     ClientScriptManager cs = Page.ClientScript;
     Type myType = this.GetType();
     // Check to see if the startup script is already registered.
     if (!cs.IsStartupScriptRegistered(myType, "AlertScript"))
     {
         String script = "alert('" + cleanMessage + "')";
         cs.RegisterStartupScript(myType, "AlertScript", script, true);
     }
 } 
```

`RegisterStartupScript` will render your script after all the elements in the page, this will ensure that it runs after the other DOM elements are loaded.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T05:38:11.150

设置允许页面中所有控件加载的超时时间也可能有效。请参阅下面对我有用的代码。

`private void MessageBox(string Msg) { ClientScript.RegisterStartupScript(this.GetType(), "AlertMsg", "<script language='javascript'> setTimeout(function () { alert('" + Msg + "') }, 500); </script>"); }`

PS：请根据您的要求更改超时时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:23:55.417

**代码隐藏**：

```
 System.Web.UI.ScriptManager.RegisterClientScriptBlock(Page, GetType(Page), "Script", "showMessage();", True) 
```

**JS**：

```
<script type="text/javascript" charset="utf-8">
 $(document).ready(function () {
 function showMessage() {
 alert("Hello!");
 }
 });
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T05:56:27.727

渲染块！

```
 <html>
         <head>
              // <%= GetScripts() %>        here!
         </head>
         <body>
              // <%= GetScripts() %>        or here!
         </body>
    </html> 
```

在.cs

```
 public string GetScripts()   
     {
          string exit="<script type='text/javascript' language='javascript'> $( function(){";
          exit+= ""; //here!
          return exit + "});</script>";
     } 
```**

# html - 改进了从大量员工中进行选择的设计

> ID：10091447
> 
> 赞同：0
> 
> 时间：2012-04-10T15:14:49.987
> 
> 标签：html, asp.net-mvc

目前我们有“决斗”选择列表，您可以从`Available Employees`选择框中选择多个员工并转移到`Assigned`选择框。

大部分时间一切正常，但一位客户抱怨渲染页面需要 20 秒。经检查，他们有 3000 名员工，因此选择框中有 3000 个选项，这是加载时间长的主要原因。

有什么更好的设计想法吗？我考虑过按字母分页，但宽度为 200 像素，下面的字母可能看起来很奇怪。

有现成的解决方案吗？建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:20:58.660

我会使用字母索引来选择出现在“可用”列表中的员工列表。在这种情况下，这应该足以缩小范围以加快速度。通过 AJAX 获取结果列表。

这个问题与代码本身无关，因此它确实属于：[https ://ux.stackexchange.com/](https://ux.stackexchange.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:09:36.737

我会使用[自动完成](http://jqueryui.com/demos/autocomplete/)文本框，比如 jQuery 文本框。当他们选择员工姓名时，您可以将其添加到“已分配”框中。

# php - php - 从数据库中下拉

> ID：10091449
> 
> 赞同：-1
> 
> 时间：2012-04-10T15:14:55.597
> 
> 标签：php, drop-down-menu

[我是一个新手 ih php。我试图使用这个](http://forums.devarticles.com/mysql-development-50/drop-down-menu-populated-from-a-mysql-database-1811.html)来显示数据库中的下拉列表值，但数据没有显示出来。也没有错误。需要一些专家的建议。

代码

```
 <?php

include('connectdb.php');     
$sql="SELECT id,name FROM companydetailstbl";
$result=mysql_query($sql);    
$options="";    
while ($row=mysql_fetch_array($result)) {    
    $id=$row["id"];
    //echo $id;
    $thing=$row["name"];
    $options.="<OPTION VALUE=\"$id\">".$thing;
}
?>
        <table width="900" border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td width="22%">Company Name </td>
            <td width="3%">:</td>
            <td width="75%"><SELECT NAME="thing">
<OPTION VALUE=0>Choose
<?=$options?>
</SELECT></td>
          </tr>
          <tr>
            <td>Installation Date </td>
            <td>:</td>
            <td><input type="text" name="ins_dt" />
            (ddmmyyyy)</td>
          </tr>
          <tr>
            <td>Expiry Date </td>
            <td>:</td>
            <td><input type="text" name="ex_dt" />
            (ddmmyyyy)</td>
          </tr>
          <tr>
            <td>Status</td>
            <td>:</td>
            <td> </td>
          </tr>
          <tr>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
            <td><input type="submit" name="Submit" value="Update" />
            <input type="submit" name="Submit2" value="Reset" /></td>
          </tr>
        </table> 
```

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:18:45.853

我不知道您当前使用的是什么 DTD，但根据[HTML 4.0 规范](http://www.w3.org/TR/html401/interact/forms.html#edef-OPTION)，您需要关闭`option`标签。

```
$options .= '<option value="' . $id . '">' . $thing . '</option>'; 
```

还有那里，

```
<select name="thing">
    <option value="0">Choose</option>
    <?php echo $options; ?>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:21:25.630

请尝试关闭标签

```
 $options.="<OPTION VALUE=\"$id\">".$thing."</OPTION>"; 
```

也编辑

```
<SELECT NAME="thing">
<OPTION VALUE=0>Choose</OPTION>
<?=$options?>
</SELECT> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:28:27.110

```
<?php

include('connectdb.php');     
$sql="SELECT id,name FROM companydetailstbl";
$result=mysql_query($sql);

?>

<table width="900" border="0" cellspacing="0" cellpadding="0">
    <tr>
        <td width="22%">Company Name </td>
        <td width="3%">:</td>
        <td width="75%">
            <select name="thing">
            <?php
                while($row = mysql_fetch_object($result)){
            ?>
                    <option value="<?=$row["id"]; ?>"><?=$row["name"]; ?></option>
            <?php
                }
                ?>
            </select>
        </td>
    </tr>
    <tr>
        <td>Installation Date </td>
        <td>:</td>
        <td><input type="text" name="ins_dt" />(ddmmyyyy)</td>
    </tr>
    <tr>
        <td>Expiry Date </td>
        <td>:</td>
        <td><input type="text" name="ex_dt" />(ddmmyyyy)</td>
    </tr>
    <tr>
        <td>Status</td>
        <td>:</td>
        <td> </td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>
            <input type="submit" name="Submit" value="Update" />
            <input type="submit" name="Submit2" value="Reset" />
        </td>
    </tr>
</table> 
```

希望能帮助到你

# c# - EF：一对多映射代码优先

> ID：10091453
> 
> 赞同：0
> 
> 时间：2012-04-10T15:15:11.410
> 
> 标签：c#, entity-framework, ef-code-first

我有几个实体。每个实体都包含许多在继承的 BaseEntity 中定义的可选文档。

```
public class Address : BaseEntity
{

    public virtual Address Parent { get; set; }

    public string Name1 { get; set; }
    public string Name2 { get; set; }
    public string Additional { get; set; }

    public string Street { get; set; }
    public string HousNr { get; set; }
    public string ZipCode { get; set; }
    public string City { get; set; }

    public virtual Document Image { get; set; }

    public virtual ICollection<AddressContact> AddressContacts { get; set; }
    public virtual ICollection<Address> AddressPersons { get; set; }
}

public abstract class BaseEntity
{

    public Guid Id { get; set; }

    public bool IsDeleted { get; set; }
    public bool IsSystem { get; set; }
    public bool IsActive { get; set; }

    public virtual ICollection<Document> Documents { get; set; }

    public DateTime CreatedTime { get; set; }
    public string CreatedUser { get; set; }

    public DateTime? LastModifiedTime { get; set; }
    public string LastModifiedUser { get; set; }

} 
```

和我的文档实体：

```
public class Document : BaseEntity
{

    public string Filename { get; set; }

    public string MIMEType { get; set; }
    public int? Length { get; set; }

    public byte[] Content { get; set; }

} 
```

这是我的基本映射：

```
public abstract class  BaseEntityConfiguration<TEntity> : EntityTypeConfiguration<TEntity> where TEntity : BaseEntity
{

    public abstract string TableName { get; }
    public virtual bool HasDocument { get {return false;} }

    public BaseEntityConfiguration()
    {
        HasKey(x => x.Id);

        Property(x => x.CreatedUser).IsRequired().HasMaxLength(100);

        if (HasDocument)
        {

            //TODO: general-Mapping for Documents??

        }
        else
        {
            Ignore(x => x.Documents);
        }

        ToTable(TableName);

    }

} 
```

我如何定义我的代码优先映射，以便最终只存在一个用于所有 comming 实体的通用文档表？

# c# - 调试 BinaryFormatter 序列化

> ID：10091457
> 
> 赞同：1
> 
> 时间：2012-04-10T15:15:24.480
> 
> 标签：c#

我正在使用 BinaryFormatter 序列化具有不同其他对象的对象。序列化导致这些对象之一的无限循环，经过数小时查看它们，我找不到该循环导致的位置。是否有可能在 VisualStudio 中逐步调试序列化过程，或者是否有其他工具可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:24:47.007

您可以尝试的一件事是`[NonSerialized]`向类成员添加属性，直到序列化成功。它不完全是调试，但可能会很快找到导致问题的成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-02T18:17:44.583

您可以尝试使用`OnSerializing`或使用`OnSerialized`允许您挂钩到序列化过程的属性。（见[ref1](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.onserializedattribute%28v=vs.110%29.aspx)和[ref2）](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.onserializingattribute%28v=vs.110%29.aspx)

它更不意味着具有以下定义

```
[Serializable]
public class Foo{

   [OnSerializing]
   public void DebugHook(StreamingContext context){
     //here goes magic stuff...
   }
} 
```

方法内的断点将被visual studio捕获。

# java - 建模客户端 - 线程交错 Java

> ID：10091458
> 
> 赞同：0
> 
> 时间：2012-04-10T15:15:26.133
> 
> 标签：java, multithreading, concurrency, client-server, emulation

我试图通过模拟连接到服务器的多个客户端来对客户端/服务器系统进行压力测试。每个客户端都有一个线程。但是，当我运行以下代码（ClientStartEmulator() 代表客户端）时，线程按顺序运行而不是同时运行。（尽管在每个模拟客户端中有多个线程产量和睡眠）。有什么想法有什么问题吗？

另一种方法是对每个 jar 进行系统调用，但这会很烦人（此处未显示），我对返回的数组进行了一些处理。

谢谢！

```
ClientStartEmulator emu = new ClientStartEmulator();
    emu.start(7777, "localhost", "examplestore", "foobar", "signFiles", "foobar", true, time, max_length); 
    ArrayList results = new ArrayList() ; 
    for (int i = 0 ; i<nb_clients ; i++ ) {
        Thread client = new Thread() {
            public void run() {
                ClientStartEmulator emul = new ClientStartEmulator();
                try {
                    emul.start(7777, "localhost", "examplestore", "foobar",     "signFiles", "foobar", false, time, max_length);

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
            }
        };
        client.run(); 

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:16:32.937

您应该调用`client.start()`which 在后台启动线程。通过调用`client.run()`，您正在调用线程中执行 run 方法。不是你想要的我假设。

从`Thread`代码：

```
/**
 * Causes this thread to begin execution; the Java Virtual Machine 
 * calls the <code>run</code> method of this thread. 
 * <p>
 * The result is that two threads are running concurrently: the 
 * current thread (which returns from the call to the 
 * <code>start</code> method) and the other thread (which executes its 
 * <code>run</code> method). 
 * ...
 */
public synchronized void start() {
   ... 
```

该`start()`方法创建本机线程并在新线程调用该`Thread.run()`方法时返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:36:24.143

`start`调用`run`所以而不是`client.run()`替换 `client.start()`为新线程移动到可运行或运行状态

# ios - 在 OpenGL 中绘制二维图块的最有效方法

> ID：10091459
> 
> 赞同：1
> 
> 时间：2012-04-10T15:15:30.280
> 
> 标签：ios, ipad, opengl-es, 2d, tiling

我正在编写一个 2D iPad 应用程序，其中屏幕的主要部分将使用 16x16 像素图块填充，因此总共 3600 个。显示器不必特别顺利地更新（并且只在需要时更新），但我希望绘图尽可能高效以将电池使用量降至最低。

在 OpenGL 中执行此操作的最有效方法是什么？看到每个 16x16 瓷砖都有自己的纹理，我猜大三角形条或类似的东西是不可能的。我是否甚至需要担心效率，或者绘制约 10000 个无阴影三角形对于 GPU 来说是小菜一碟，我真的不需要担心？

# android - 清理列表视图的数据

> ID：10091463
> 
> 赞同：0
> 
> 时间：2012-04-10T15:15:43.150
> 
> 标签：android

我有一个 ListView，一个 ArrayList。从活动 1 中，我传递了一些数据，例如价格和公司名称。此数据将存储在 Hashmaps 的 ArrayList 中。当我第一次将一些数据传递给包含 ListView 的第二个活动时，将在此列表中找到数据，但是当我返回第一个活动并再次传递一些信息时，旧数据仍将在列表中。有什么可能的方法可以防止这种情况发生吗？例如，当我从 activity2 返回到 activity1 时，ListView 将被擦除。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:37:25.207

您需要做的：在包含 listView 的活动上 - 覆盖 onResume() 方法：

```
@Override
protected void onResume() {
    super.onResume();

    mArrayList.clear();
    mAdapter.notifyDataSetChanged();
} 
```

如果清除数组列表对您不利，则可以执行以下操作：

```
@Override
protected void onResume() {
    super.onResume();

    mListView.removeAllViews();
} 
```

# python - 更改文件的内容 - Python

> ID：10091464
> 
> 赞同：1
> 
> 时间：2012-04-10T15:15:48.103
> 
> 标签：python

所以我有一个运行的程序。这是代码的一部分：

```
FileName = 'Numberdata.dat'
NumberFile = open(FileName, 'r')
for Line in NumberFile:
  if Line == '4':
    print('1')
  else:
    print('9')
NumberFile.close() 
```

是的，这是一件毫无意义的事情，但我这样做只是为了增强我的理解。但是，此代码不起作用。文件保持原样，4 没有被 1 替换，其他所有内容都没有被 9 替换，它们只是保持不变。我哪里错了？

Numberdata.dat 是`"444666444666444888111000444"`

就是现在：

```
FileName = 'Binarydata.dat'
BinaryFile = open(FileName, 'w')
for character in BinaryFile:
  if charcter == '0':
    NumberFile.write('')
  else:
    NumberFile.write('@')
BinaryFile.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:19:40.637

因为您还需要写入文件。

```
with open(FileName, 'w') as f:
    f.write(...) 
```

现在你只是在读取和操作数据，而不是写回它们。

最后，您需要以写入模式重新打开文件并对其进行写入。

如果您正在寻找参考资料，请查看[`open()`文档](http://docs.python.org/py3k/library/functions.html#open)以及[Python 教程的](http://docs.python.org/py3k/tutorial/index.html)[读取和写入文件](http://docs.python.org/py3k/tutorial/inputoutput.html#reading-and-writing-files)部分。

**编辑：**您不应该同时从同一个文件读取和写入。您可以写入临时文件并在结束调用时写入[`shutil.move()`](http://docs.python.org/py3k/library/shutil.html#shutil.move)，或者加载和操作您的数据，然后以写入模式**重新打开原始文件并将它们写回。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:20:42.730

首先，`Line`将永远不会相等`4`，因为从文件中读取的每一行末尾都包含换行符。试试`if Line.strip() == '4'.`这将删除行首和行尾的所有空格。

编辑：我刚刚看到您的编辑...自然，如果您将所有数字都放在一行中，则该行永远不会等于 4。您可能希望一次读取文件一个字符，而不是一次读取一行。

其次，您没有写入任何文件，因此文件自然不会被更改。在读取文件时更改文件会遇到困难（因为您必须弄清楚如何备份到刚刚读取的同一位置），因此通常的做法是从一个文件读取并写入另一个文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:21:27.997

您需要构建一个字符串并将其写入文件。

```
FileName = 'Numberdata.dat'
NumberFileHandle = open(FileName, 'r')
newFileString = ""
for Line in NumberFileHandle:
  for char in line: # this will work for any number of lines.
      if char == '4':
        newFileString += "1"
      elif char == '\n':
        newFileString += char
      else:
        newFileString += "9"
NumberFileHandle.close()

NumberFileHandle = open(FileName, 'w')
NumberFileHandle.write(newFileString)
NumberFileHandle.close() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:19:48.763

一些东西：

*   指示模式的`r`标志。这显然不会让您写入文件。`open``read-only`

*   `print()`将东西输出到屏幕上。您真正想要做的是输出到文件。你[读过 Python 文件 I/O 教程吗？](http://docs.python.org/tutorial/inputoutput.html)

*   `for line in file_handle:`一次循环遍历文件一行。因此，`if line == '4'`仅当该行由单个字符组成时，才会为真`4`，全部单独。

    如果要遍历字符串中的字符，请执行类似`for character in line:`.

*   “就地”修改文件的某些部分比您想象的要困难一些。

    这是因为如果您将数据插入文件的中间，则其余数据必须重新排列以腾出空间——这真的很慢，因为插入后的所有内容都必须重写。

    理论上，一个字节替换一个字节可以很快完成，但一般人们不想逐字节替换，所以这是一个高级功能。（请参阅`seek()`。）通常的方法是写出一个全新的文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:21:02.777

您没有向数据发送任何输出，您只是在打印并且`1`通常是终端或解释器。`9``stdout`

如果要写入文件，则必须`open`再次使用`w`. 例如。

```
out = open(FileName, 'w') 
```

你也可以使用

```
print >>out, '1' 
```

然后你可以打电话`out.write('1')`给例如。

此外，如果您想覆盖并在之后写入，最好先读取文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T15:21:24.540

根据您的评论：

> Numberdata 只是一行中的一组数字。也许这就是我要去错的地方？它是“444666444666444888111000444”

我可以告诉你，`for`循环迭代**行**而不是**chars**。存在逻辑错误。

此外，正如 Rik Poggi 所说，您必须编写文件（只需记住以写入模式打开它）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-10T15:26:13.617

因为 print 不会写入您的文件。您必须打开文件并阅读它，修改您获得的字符串创建一个新字符串，再次打开文件并再次写入。

```
FileName = 'Numberdata.dat'
NumberFile = open(FileName, 'r')
data = NumberFile.read()
NumberFile.close()
dl = data.split('\n')
for i in range(len(dl)):
    if dl[i] =='4':
        dl[i] = '1'
    else:
        dl[i] = '9'
NumberFile = open(FileName, 'w')
NumberFile.write('\n'.join(dl))
NumberFile.close() 
```

以这种方式尝试。肯定有不同的方法，但这对我来说似乎是最“线性”的=）

# c# - 在密码框的某些事件上显示密码字符

> ID：10091466
> 
> 赞同：6
> 
> 时间：2012-04-10T15:15:56.503
> 
> 标签：c#, windows-phone-7, xaml, user-interface, passwords

我正在开发一个 Windows 手机应用程序。我要求用户登录。

在登录页面上，用户必须输入密码。

现在我想要的是，我给用户一个复选框，后者应该显示密码的字符。

我没有在密码框中看到任何显示密码字符的属性。

请提出一些方法来做到这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-10T16:35:15.813

不要认为 PasswordBox 是可能的......只是一个想法，但您可以使用隐藏的 TextBox 完成相同的结果，当用户单击 CheckBox 时，您只需隐藏 PasswordBox 并显示 TextBox；如果他再次单击，您将再次切换其可见性状态，依此类推...

**编辑**

这就是方法！

只需添加一个页面，将 ContentPanel 更改为 StackPanel 并添加以下 XAML 代码：

```
<PasswordBox x:Name="MyPasswordBox" Password="{Binding Text, Mode=TwoWay, ElementName=MyTextBox}"/>
<TextBox x:Name="MyTextBox" Text="{Binding Password, Mode=TwoWay, ElementName=MyPasswordBox}" Visibility="Collapsed" />
<CheckBox x:Name="ShowPasswordCharsCheckBox" Content="Show password" Checked="ShowPasswordCharsCheckBox_Checked" Unchecked="ShowPasswordCharsCheckBox_Unchecked" /> 
```

接下来，在页面代码上，添加以下内容：

```
private void ShowPasswordCharsCheckBox_Checked(object sender, RoutedEventArgs e)
{
    MyPasswordBox.Visibility = System.Windows.Visibility.Collapsed;
    MyTextBox.Visibility = System.Windows.Visibility.Visible;

    MyTextBox.Focus();
}

private void ShowPasswordCharsCheckBox_Unchecked(object sender, RoutedEventArgs e)
{
    MyPasswordBox.Visibility = System.Windows.Visibility.Visible;
    MyTextBox.Visibility = System.Windows.Visibility.Collapsed;

    MyPasswordBox.Focus();
} 
```

这工作得很好，但是再做一些工作，你就可以做到完全 MVVM 了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:23:31.547

使用默认密码框无法实现您想要的功能。

您可以在这里找到更多信息：http: [//social.msdn.microsoft.com/Forums/en/wpf/thread/98d0d4d4-1463-481f-b8b1-711119a6ba99](http://social.msdn.microsoft.com/Forums/en/wpf/thread/98d0d4d4-1463-481f-b8b1-711119a6ba99)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-01T09:36:58.480

我创建了一个 MVVM 示例，我也在现实生活中使用它。请注意 PasswordBox.Password 不是依赖属性，因此不能直接绑定。出于安全原因，它是这样设计的，有关详细信息，请参阅：[How to bind to a PasswordBox in MVVM](https://stackoverflow.com/questions/1483892/how-to-bind-to-a-passwordbox-in-mvvm#answer-1493330)

无论如何，如果你想这样做，你必须使用后面的代码来建立你的视图模型的桥梁。我不提供转换器，因为您可能正在使用自己的一组转换器。如果没有，请向谷歌询问合适的实现。

**EnterPasswordWindow.xaml**

```
<Window x:Class="MyDemoApp.Controls.EnterPasswordWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MyDemoApp.Controls"
        mc:Ignorable="d" d:DataContext="{d:DesignInstance local:EnterPasswordViewModel}"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize" SizeToContent="WidthAndHeight"
        Title="Enter Password">
    <StackPanel Margin="4">
        <TextBlock Margin="4">Please enter a password:</TextBlock>
        <TextBox Margin="4" Text="{Binding Password, UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding ShowPassword, Converter={StaticResource BoolToVisibleConverter}}"/>
        <PasswordBox Margin="4" Name="PasswordBox" Visibility="{Binding ShowPassword, Converter={StaticResource BoolToCollapsedConverter}}" PasswordChanged="PasswordBox_PasswordChanged"/>
        <CheckBox Margin="4" IsChecked="{Binding ShowPassword}">Show password</CheckBox>
        <DockPanel>
            <Button Margin="4" Width="150" Height="30" IsDefault="True" IsEnabled="{Binding Password, Converter={StaticResource StringIsNotNullOrEmptyConverter}}" Click="Button_Click">OK</Button>
            <Button Margin="4" Width="150" Height="30" IsCancel="True" HorizontalAlignment="Right">Cancel</Button>
        </DockPanel>
    </StackPanel>
</Window> 
```

**EnterPasswordWindow.xaml.cs**

```
using System.ComponentModel;
using System.Windows;
using System.Windows.Controls;

namespace MyDemoApp.Controls
{
    /// <summary>
    /// Interaction logic for EnterPasswordWindow.xaml
    /// </summary>
    public partial class EnterPasswordWindow : Window
    {
        public EnterPasswordWindow()
        {
            InitializeComponent();
            DataContext = ViewModel = new EnterPasswordViewModel();
            ViewModel.PropertyChanged += ViewModel_PropertyChanged;
        }

        public EnterPasswordViewModel ViewModel { get; set; }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            DialogResult = true;
            Close();
        }

        private void ViewModel_PropertyChanged(object sender, PropertyChangedEventArgs e)
        {
            if (!mSuppressPropertyChangedEvent && e.PropertyName == nameof(ViewModel.Password))
            {
                PasswordBox.Password = ViewModel.Password;
            }
        }
        private bool mSuppressPropertyChangedEvent;
        private void PasswordBox_PasswordChanged(object sender, RoutedEventArgs e)
        {
            mSuppressPropertyChangedEvent = true;
            ViewModel.Password = ((PasswordBox)sender).Password;
            mSuppressPropertyChangedEvent = false;
        }
    }
} 
```

**EnterPasswordViewModel.cs**

```
using System.ComponentModel;
using System.Runtime.CompilerServices;

namespace MyDemoApp.Controls
{
    public class EnterPasswordViewModel : INotifyPropertyChanged
    {
        public string Password
        {
            get => mPassword;
            set
            {
                if (mPassword != value)
                {
                    mPassword = value;
                    NotifyPropertyChanged();
                }
            }
        }
        private string mPassword;

        public bool ShowPassword
        {
            get => mShowPassword;
            set
            {
                if (mShowPassword != value)
                {
                    mShowPassword = value;
                    NotifyPropertyChanged();
                }
            }
        }
        private bool mShowPassword;

        public event PropertyChangedEventHandler PropertyChanged;
        private void NotifyPropertyChanged([CallerMemberName]string propertyName = null)
        {
            if (string.IsNullOrEmpty(propertyName))
            {
                return;
            }
            PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T16:35:50.990

您可以创建自己的控件，该控件继承自文本框，但是在每个字符之后将其替换为 *，将真实值存储在页面上的私有变量中。然后，您可以使用复选框切换文本框中的值是显示真值还是 * 值。

这不是一个优雅的解决方案，也不是最佳实践，但我认为如果你愿意接受它，它仍然是一种选择。

# c++ - 如何在 C++ 中打印对象的地址？

> ID：10091468
> 
> 赞同：0
> 
> 时间：2012-04-10T15:16:01.767
> 
> 标签：c++

如果我有以下基本 C++ 程序：

```
#include <iostream>
using namespace std;

class CRectangle {
    int x, y;
  public:
    void set_values (int,int);
    int area () {return (x*y);}
};

void CRectangle::set_values (int a, int b) {
  x = a;
  y = b;
}

int main () {
  CRectangle rect;
  rect.set_values (3,4);
  cout << "area: " << rect.area() <<endl;
  cout <<&rect<<endl;
  cin.get();
  return 0;
} 
```

最后一个打印语句是打印变量 rect 的地址还是对象的地址？他们是一样的吗？还是一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:17:10.390

他们是一样的。它正在打印与对象地址相同的 rect 的地址。矩形在堆栈上，因此整个对象也是如此。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:29:20.213

如果这就是您的意思，那么没有类的地址之类的东西？&CRectangle 不存在，仅存在类 (&rect) 实例的地址。类定义本身不占用任何内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:18:23.853

变量`rect`是 的对象`CRectablge`，所以在这种情况下变量的地址和对象没有区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:30:07.233

`rect`只是堆栈中对象的标识符。在这种情况下，一个`CRectangle`.

通过调用`&rect`，您将获得对象所在堆栈中的地址。

# javascript - Javascript，你能检查我的语法吗？

> ID：10091470
> 
> 赞同：-2
> 
> 时间：2012-04-10T15:16:10.627
> 
> 标签：javascript, syntax

```
javascript:If(document.getElementById('troop_confirm_go') != null){
    alert('true');
    return true;
  } else{
    alert('false');
    return false;
  } 
```

这种语法有什么问题吗？我正在尝试在页面上运行它，但它没有显示任何一个警报，即使我尝试使用不同按钮等的不同页面所以我想要运行它的页面没有问题。（我正在通过浏览器的 URL 栏对此进行测试，并尝试了 chrome 和 firefox，两者都产生了相同的结果）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T15:20:05.787

JavaScript 区分大小写，使用`if`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:22:22.647

这是可行的，您可以从以下开始：

```
<!DOCTYPE HTML>
<html>
    <head>
        <script>
            function btnOnclick() {
                if(document.getElementById('troop_confirm_go') != null) {
                    alert('true');
                    return true;
                } else {
                    alert('false');
                    return false;
                }
            }
        </script>
    </head>
    <body>
        <input type="button" onclick="btnOnclick()" value="button"/>
    </body>
</html> 
```

# c# - IIS 中的 index.html

> ID：10091483
> 
> 赞同：-1
> 
> 时间：2012-04-10T15:16:49.937
> 
> 标签：c#, asp.net, iis

在我的代码中，我要感谢良好的路径，在我的 IIS 服务器中打开文件 Index.html。

我实际上正在使用这个：

```
 string path = "C://inetpub//wwwroot//Files//Wireframes//" + ((LinkButton)sender).ID;
        System.IO.DirectoryInfo di = new System.IO.DirectoryInfo(path);
        System.IO.FileInfo[] fiArr = di.GetFiles("*", SearchOption.TopDirectoryOnly);

        foreach (System.IO.FileInfo thefile in fiArr)
        {
            if (thefile.Name == "index.html")
            {
                System.Diagnostics.Process.Start(path + "/index.html");
            }

        }
    } 
```

我想知道为什么它在本地工作，但是当我把我的项目放在我的服务器上时，这没有做任何事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:20:58.390

因为：

1.  您的网站位于不同的文件夹中
2.  您没有为`.html`扩展分配默认应用程序
3.  您的 Web 应用程序在无法与桌面交互的帐户下运行（即 NETWORK）

此外，而不是搜索`*`search for `index.html`in `GetFiles`。

确保您了解您是在托管您的网站的机器上创建一个新进程，而*不是*在运行您的浏览器的机器上。您希望能够从机器 A 导航到托管在机器 B 上的页面，并从机器 B 在机器 A 上打开一个新的浏览器*窗口*。

# reporting - X++ 在 Fetch 方法中从 QueryRun 中出来

> ID：10091489
> 
> 赞同：1
> 
> 时间：2012-04-10T15:17:10.203
> 
> 标签：reporting, x++, axapta

我似乎无法找到解决方案。我在报告中修改了 Fetch 方法，因此如果更改了 queryRun 并获取了新 ID，则 while 循环重新开始，出现一个新页面并执行 2 个元素。这部分工作正常，下一部分没有，在每个 ID 中有几条记录，我正在使用 Element.Execute(); 和 element.Send(); 来处理。发生的情况是，选择了第一个 ID，执行报告的元素（正文）并按预期发送元素，但是 while 循环没有进入下一个 ID？

这是代码；

```
public boolean fetch()
{
    APMPriorityId           oldVanId, newVanId;
    LogisticsControlTable   lLogisticsControlTable;
    int64                   cnt, counter;
    ;

    queryRun = new QueryRun(this);

    if (!queryRun.prompt() || !element.prompt())
    {
        return false;
    }

    while (queryRun.next())
    {
        if (queryRun.changed(tableNum(LogisticsControlTable)))
        {
            lLogisticsControlTable = queryRun.get(tableNum(LogisticsControlTable));
            if (lLogisticsControlTable)
            {
                info(lLogisticsControlTable.APMPriorityId);
                cnt      = 0;
                oldVanId =  newVanId;
                newVanId =  lLogisticsControlTable.APMPriorityId;

                if(newVanId)
                {
                    element.newPage();
                    element.execute(1);
                    element.execute(2);
                }
            }

            if (lLogisticsControlTable.APMPriorityId)

            select count(recId) from lLogisticsControlTable where lLogisticsControlTable.APMPriorityId == newVanId;
            counter = lLogisticsControlTable.RecId;

            while select lLogisticsControlTable where lLogisticsControlTable.APMPriorityId == newVanId
            {
                cnt++;

                if(lLogisticsControlTable.APMPriorityId == newVanId && cnt <= counter)
                {
                    element.execute(3);
                    element.send(lLogisticsControlTable);
                }
            }
        }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:26:06.883

您正在`lLogisticsControlTable`用作 a`queryRun.get()`和 a的目标`while select`。然而，这两种用途相互干扰；有两个 SQL 游标要控制。

使用两个不同的记录变量。

# c - 打印值数组的十六进制表示

> ID：10091494
> 
> 赞同：4
> 
> 时间：2012-04-10T15:17:26.037
> 
> 标签：c, arrays, hex, type-conversion, printf

我正在阅读 C 中的程序（服务器/客户端通信的实现），我看到了这个：

```
for (i = 0; i < len; i++)
 sprintf(nickmsg+i*2, "%02X", buf[i] & 0xFF); 
```

这条线有什么作用？我特别不明白这一点：`nickmsg+i*2`。 `nickmsg`是一个字符表并且`i`是一个整数。如果只是`nickmsg`，好的，我会理解，但是这条线的目的是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:20:13.840

从指向的地址开始，`nickmsg`然后`i * 2 * CHAR_BIT / 8`在内存中增加一个字节。从那里，写入 的十六进制表示`buf[i] & 0xFF`，它将占用`2 * CHAR_BIT / 8`字节。对每个重复`i`。

假设`buf`看起来像

```
buf[0] = 20
buf[1] = 12 
```

那么 指向的内存`nickmsg`将如下所示：

```
nickmsg
|
|
|
+ + + + +
0 2 4 6 8
140C\ 
```

这是我对最后写入 `\`的空终止符的命名法。`sprintf`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:18:54.823

它将数组中的值转换为`buf`十六进制表示并将它们存储在`nickmsg`数组中。

当它逐步遍历 中的每个值时`buf`，它通过执行按位`AND`with提取最右边的 8 位`0xFF`，这是二进制的`1111 1111`。

然后它使用格式字符串`"%02X"`将每个值打印为 2 个十六进制数字。

它将每对十六进制数字存储在`nickmsg`数组中，然后通过使用索引前进过去`i*2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:19:09.207

`nickmsg+i*2`将 nickmsg 变量视为指向 C 字符串表的指针，然后在每个循环中单步执行 2 个条目。

# objective-c - 计算上周一的日期时关闭 NSDate

> ID：10091495
> 
> 赞同：0
> 
> 时间：2012-04-10T15:17:34.090
> 
> 标签：objective-c, nsdate

我的函数有问题，该函数应该检索本周的星期一日期。

有时是休息日：

```
+(NSDate *) lastMondayBeforeDate:(NSDate*)timeStamp {
    NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *comps = 
    [gregorian components:NSWeekdayCalendarUnit fromDate:timeStamp];
    NSInteger weekday = [comps weekday];
    weekday = weekday==1 ? 6 : weekday-2; 
    NSTimeInterval secondsSinceMondayMidnight =  
    (NSUInteger) [timeStamp timeIntervalSince1970] % 60*60*24 + 
    weekday * 60*60*24;

    NSLog(@"MONDAY's DATE-----------%@", [timeStamp dateByAddingTimeInterval:-secondsSinceMondayMidnight]);
    return [timeStamp dateByAddingTimeInterval:-secondsSinceMondayMidnight];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:29:32.333

苹果有[代码演示如何做到这一点](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/DatesAndTimes/Articles/dtCalendricalCalculations.html#//apple_ref/doc/uid/TP40007836-SW12)。他们的目标是一周中的星期日而不是星期一，但您只需在适当的位置添加 1 即可进行调整。

你绝对不想做一些事情，比如`60*60*24`计算秒数来调整。例如，由于夏令时的变化，天数可能多于或少于 24 小时。

# java - 如何在使用 Java 的 Eclipse 中使用 Web 服务（JAX - RS）从数据库中检索数据

> ID：10091499
> 
> 赞同：5
> 
> 时间：2012-04-10T15:17:58.880
> 
> 标签：java, mysql, eclipse, jersey, jax-rs

我已经在数据库中插入了一条记录，但我不知道如何检索它。我的代码是： **Account.java：**

```
package com.fetch;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Id;

public class Account implements Serializable 
{   
  @Id
  private long id;

  @Column(name="NAME")  
  private String name;

  public Account()  
  {

  }

  public Account(int id, String name)   
  {     
     this.id = id;      
     this.name = name;  
  }

  public long getId() 
  {     
     return id; 
  }

  public void setId(long id) 
  {     
     this.id = id;  
  }

  public String getName() 
  {     
     return name;   
  }

  public void setName(String name)
  {     
     this.name = name;  
  }
} 
```

**我的帐户.java：**

```
package com.fetch;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.util.ArrayList;
import java.util.Collection;
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.persistence.Entity;
import javax.persistence.NamedQuery;
import javax.persistence.Table;
import javax.ws.rs.FormParam;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;

@WebService()
@Entity
@Table(name = "CUSTOMER")
@Path("/user")
@NamedQuery(name="loginquery", query="select ID,NAME from CUSTOMER")
public class MyAccount 
{   
   private Account ac;  
   public MyAccount()   
   {    
     // TODO Auto-generated constructor stub      
     ac = new Account();    
   }    

   @POST    
   @Path("/fetch")  
   @WebMethod(operationName = "insert") 
   public String insert(@FormParam("name") String name) 
   {     
      try   
      {     
         Class.forName("com.mysql.jdbc.Driver");        
         Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/studentinfo", "root", "root");

         String query = "insert into CUSTOMER"+"(NAME) VALUES"+"(?)";
     PreparedStatement st = con.prepareStatement(query);    
         st.setString(1,name);  
     st.executeUpdate();
      }     
      catch (Exception e)   
      {     
         System.out.println(e.getMessage());    
      } 
      return"Record inserted successfully";
   }    
  public Account getAc() 
  {     
     return ac; 
  } 
  public void setAc(Account ac) 
  {     
     this.ac = ac;  
  }
} 
```

**插入.html：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert</title>
</head>
<body>
    <form action="rest/user/fetch" method="POST">
        <p>
            Name : <input id="name" name="name" />
        </p>
        <input type="submit" value="Add" />
            <input type="submit" value="Retrive" />
    </form>
</body>
</html> 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
   <display-name>FetchAndInsert</display-name>
   <servlet>
      <servlet-name>REST Servlet</servlet-name>
      <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
      <init-param>
         <param-name>com.sun.jersey.config.property.packages</param-name>
         <param-value>com.fetch</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
   </servlet>
   <servlet-mapping>
      <servlet-name>REST Servlet</servlet-name>
      <url-pattern>/rest/*</url-pattern>
   </servlet-mapping>
</web-app> 
```

当用户单击检索按钮时，如何从数据库中检索数据，并在另一个 HTML 表单中显示所有记录？请就如何做到这一点提出建议。

在我的应用程序中，当用户单击检索按钮时，它正在执行插入操作。但我想要的是，当用户单击时，它应该转到另一个页面并显示数据库中表中的数据。

任何人都可以说出我所做的错误，并提出建议以找到解决方案以及当用户单击检索按钮时如何在其他页面中显示动态表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T11:46:26.900

最后我已经完成了，现在我可以使用 jersey(JAX - RS) webservices 执行插入和检索数据库中的数据，并能够在 html 页面中显示它。

**帐户.java：**

```
package com.fetch;

import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Id;

public class Account implements Serializable 
{
    @Id
    private long id;

    @Column(name = "NAME")
    private String name;

    public Account(int id, String name)
    {
        this.id = id;
        this.name = name;
    }
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
} 
```

**我的帐户.java：**

```
package com.fetch;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.persistence.Entity;
import javax.ws.rs.FormParam;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@WebService()
@Entity
@Path("/user")
public class MyAccount
{
    @POST
    @Path("/fetch")
    @WebMethod(operationName = "insert")
    public String insert(@FormParam("name") String name) 
    {
        try 
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/studentinfo", "root", "root");
            String query = "insert into CUSTOMER"+"(NAME) VALUES"+"(?)";

            PreparedStatement st = con.prepareStatement(query);
            st.setString(1,name);
            st.executeUpdate();     
        } 
        catch (Exception e) 
        {
            System.out.println(e.getMessage());
        }
        return"Record inserted successfully";
    }

    @GET
    @Path("/retrive")
    @Produces("text/html")
    @WebMethod(operationName = "retrive")
    public String retrive() 
    {
        ResultSet rs = null;
        String details = ""; 
        try 
        {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/studentinfo", "root", "root");

            String query = "select ID,NAME from CUSTOMER";

            PreparedStatement st = con.prepareStatement(query);
            rs = st.executeQuery();

            details = "<html><body>"; 
            details = details + "<table border=1>";
            details = details + "<tr><td><Strong>Id </Strong></td>" +
                                    "<td><Strong>Name </Strong></td>" + "</tr>";
            while (rs.next()) 
            {
                details = details + "<tr><td>" + rs.getInt("ID") + "</td>" +
                                        "<td>" + rs.getString("NAME") + "</td></tr>";
            }
            details += "</table></body></html>"; 
        } 
        catch (Exception e) 
        {
            System.out.println(e.getMessage());
        }   
        return details;
    }
} 
```

**插入.html：**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Insert</title>
</head>
<body>
    <form action="rest/user/fetch" method="POST">
        <p>
            Name : <input id="name" name="name" />
        </p>
        <input type="submit" value="Add" />
    </form>
    <form action="rest/user/retrive" method="GET">
        <input type="submit" value="Retrive" />
    </form>
</body>
</html> 
```

我的**web.xml**是：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>FetchAndInsert</display-name>
    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>
    <servlet>
        <servlet-name>REST Servlet</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.fetch</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>REST Servlet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:19:17.433

Jersey 不提供任何类型的 HTML 模板。您需要将响应转发到 jsp 页面或使用 Ajax 获取数据并将其放置在页面上。

# debugging - IDEA 挂在远程调试端口

> ID：10091500
> 
> 赞同：2
> 
> 时间：2012-04-10T15:17:59.067
> 
> 标签：debugging, tomcat, jvm, intellij-idea, remote-debugging

我正在另一台服务器上远程调试tomcat。Tomcat 使用以下参数（以及其他参数）启动：

```
-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5556 
```

tomcat启动后，远程端口出现：

```
itadmin@srv-app02:~$ netstat -tulpen | grep java
tcp        0      0 0.0.0.0:5556            0.0.0.0:*               LISTEN      1000       2005708     30667/java      
tcp6       0      0 127.0.0.1:8005          :::*                    LISTEN      1000       2006491     30667/java 
.... 
```

连接 IDEA 后调试器似乎挂起。我没有收到有关成功连接到远程 JVM 的消息。

目前我不知道是什么导致了这个问题。有什么提示吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T15:44:00.927

此类问题的常见情况是方法断点，它[在 FAQ 中有所提及](http://devnet.jetbrains.net/docs/DOC-23)。

你说它是由行断点引起的，这很奇怪，以前从未见过这样的问题，但理论上IDE中的源代码和服务器上的编译类可能不同步，IDE可以向目标VM发送停止指令断点位于 VM 执行并挂起的错误位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T20:46:29.750

我在这里遇到了类似的问题，这让我疯狂了一段时间。我发现最近安装的插件**La Clojure**搞砸了我的 Tomcat 环境。我知道您以不同的方式解决了这个问题，但我在这里回答是因为它对其他人有用。

尝试卸载最近安装的插件，或重新安装 IntelliJ IDEA。

# c# - Linq-To-SQL GroupBy: How to calculate percentage column

> ID：10091504
> 
> 赞同：2
> 
> 时间：2012-04-10T15:18:13.197
> 
> 标签：c#, linq, linq-to-sql, group-by

I have a database table of events. Each event has a category and a date/time.

(actually events have sub-categories which are contained in categories and various other properties, left out in this simplified example)

I want to generate a list with an entry for each hour and category, listing the number of events and their percentage.

```
date            | category | number of events | percentage
----------------------------------------------------------
2012-01-01 1:00 | cat-1    | 10               | 50%
2012-01-01 1:00 | cat-2    | 10               | 50%
2012-01-01 2:00 | cat-1    | 1                | 10%
2012-01-01 2:00 | cat-2    | 9                | 90%
2012-01-01 3:00 | cat-1    | 3                | 100%
... 
```

I am having trouble calculating the percentage efficiently. Here is what I have so far:

```
var results = datacontext.events.
  groupBy(e=>new   
  {  // group by category and hour
     category = e.category,
     datetime = new DateTime (
       e.datetime.Year, e.datetime.Month, e.datetime.Day, 
       e.datetime.Hour, 0, 0 ) 
     // use date+hour for grouping, ignore minutes/seconds
  }).
  select(group => new 
  {
     category = group.Key.category,
     datetime = group.Key.datetime,
     numberOfEvents = group.count(),
     percentage = group.count() / ["total number of events for this hour"] * 100.0
  } 
```

How can I get the value for [total number of events for this hour], ideally in an elegant and efficient way?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:34:36.573

这是我想出的：

```
 var results = from events in datacontext.events
                      let date = new DateTime(
                             events.datetime.Year, events.datetime.Month, events.datetime.Day,
                             events.datetime.Hour, 0, 0)
                      let total = datacontext.events.Where(x => x.datetime.Date == date.Date && x.datetime.Hour == date.Hour).Count()
                      group events by new
                      {  // group by category and hour
                          category = events.category,
                          datetime = date,
                          total = total
                      } into e
                      select new
                      {
                          category = e.Key.category,
                          day = e.Key.datetime.Day,
                          numberOfEvents = e.Count(),
                          percentage = (float)e.Count() / (float)e.Key.total
                      }; 
```

两个重点：

1.  使用浮点数表示百分比
2.  用于`let`计算总数`Date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:31:20.767

您必须先按天分组，然后从那里选择总数……例如：

```
var resultsPerDay = datacontext.events.groupBy(e=>new {
    datetime = new DateTime (
        e.datetime.Year, e.datetime.Month, e.datetime.Day, 
        e.datetime.Hour, 0, 0 )
    }
}).select(group=>new {
    datetime = group.Key.datetime,
    totalForADay = group.Key.count()
});

var results = datacontext.events.
  groupBy(e=>new   
  {  // group by category and hour
     category = e.category,
     datetime = new DateTime (
       e.datetime.Year, e.datetime.Month, e.datetime.Day, 
       e.datetime.Hour, 0, 0 ) 
     // use date+hour for grouping, ignore minutes/seconds
  }).
  select(group => new 
  {
     category = group.Key.category,
     datetime = group.Key.datetime,
     numberOfEvents = group.count(),
     percentage = 100 * group.count() / resultsPerDay.where(p=>p.datetime == group.Key.datetime).select(p=>p.totalForADay).SingleOrDefault()
  } 
```

不过，不确定这是否是最有效的方法。另外，由于我没有通过编译器将其放入，因此不确定语法是否良好，但您明白了。

# java - Why is Java deserialization CPU-bound?

> ID：10091505
> 
> 赞同：5
> 
> 时间：2012-04-10T15:18:17.440
> 
> 标签：java, performance, serialization, deserialization

I have a Java program which prepares data into a fairly complex and big data structure in memory (several GB) and serializes it to disk, and another program which reads back the serialized data structure in memory. I was surprised to notice that the deserialization step is pretty slow, and that it is CPU-bound. (100% CPU usage in `top` but only 3 to 5 MB/s read with `iotop`, which is very low for what should be sequential reads on a hard drive). The CPU is fairly recent (Core i7-3820), the structure fits in memory, no swap space is configured.

Why is this so? Is there an alternative way to serialize objects in Java which does not have the CPU as bottleneck?

Here is the deserialization code, in case it matters:

```
FileInputStream f = new FileInputStream(path);
ObjectInputStream of = new ObjectInputStream(f);
Object obj = of.readObject(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:34:55.907

反序列化非常昂贵。如果您使用通用反序列化，它将使用大量反射和创建对象。

有很多更快的替代方案，并且大多数使用生成的代码而不是反射。

[http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking](http://code.google.com/p/thrift-protobuf-compare/wiki/Benchmarking)

您会注意到最快的方法之一是使用 Externalizable，这可能是您的一个选择。这意味着为对象的序列化和反序列化添加自定义方法。

我已经编写了最快的方法，但这避免了通过回收它们或就地使用文件中的数据来创建任何对象（即不需要反序列化它们）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:35:50.740

如果不使用分析器查看此内容或对对象结构的实际层次结构了解很多，很难说，但我假设如果它“相当复杂”并且大约为“几 GB”，那么你可能处理数以千计的单个对象。

我最好的猜测是你的性能被 Java 反射杀死了。反射用于从您的流中构造对象，已知它比直接在代码中调用构造函数慢至少两个数量级。因此，如果您的对象有大量“小”对象，反射将花费大量时间来重建它们。

您可以尝试的一件事（如果您还没有尝试的话）是在每个类的顶部声明以下行`Serializable`：

```
private static final long serialVersionUID = [some number]L; 
```

如果您不声明此 ID，Java 将不得不计算它，因此您通过声明它确实节省了一些 CPU 周期。

供进一步参考：

[http://oreilly.com/catalog/javarmi/chapter/ch10.html](http://oreilly.com/catalog/javarmi/chapter/ch10.html)

# sql - Get range of records from SQL query Oracle

> ID：10091506
> 
> 赞同：3
> 
> 时间：2012-04-10T15:18:18.580
> 
> 标签：sql, oracle, oracle10g, oracle11g

I want to use this SQL query to get only the records between 8 and 10:

```
select *
from(
SELECT a.*,rownum rn 
FROM ACTIVESESSIONSLOG  a
ORDER BY USERID ASC)
WHERE rn  >= 8 and rn <= 10 
```

When I implement this SQL query into pagination I get every time 1 row on the second page no matter how many rows I have configured to be displayed into the pages. Is this SQL query valid?

This is the table structure:

```
-- TABLE ACTIVESESSIONSLOG

CREATE TABLE ACTIVESESSIONSLOG(
  ASESSIONID VARCHAR2(30 ) NOT NULL,
  USERID VARCHAR2(30 ),
  ACTIVITYSTART TIMESTAMP(6),
  ACTIVITYEND TIMESTAMP(6),
  ACTIVITY CLOB
)
/ 
```

Best wishes

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:35:27.030

`rownum`在 the 之前应用，`ORDER BY`因此您的查询几乎可以肯定没有达到您的预期。您的查询本质上是要求任意 3 行，并且`ORDER BY`没有做任何有用的事情。

您可以改用分析函数`row_number`，即

```
SELECT *
  FROM (SELECT a.*,
               row_number() over (order by userid asc) rn
          FROM activeSessionsLog a)
 WHERE rn BETWEEN 8 AND 10 
```

这将翻阅结果

```
SQL> ed
Wrote file afiedt.buf

  1  select empno, ename, job
  2    from (select e.*,
  3                 row_number() over (order by empno) rn
  4            from emp e)
  5*  where rn between 1 and 3
SQL> /

     EMPNO ENAME      JOB
---------- ---------- ---------
      7369 SMITH      CLERK
      7499 ALLEN      SALESMAN
      7521 WARD       SALESMAN

SQL> ed
Wrote file afiedt.buf

  1  select empno, ename, job
  2    from (select e.*,
  3                 row_number() over (order by empno) rn
  4            from emp e)
  5*  where rn between 4 and 8
SQL> /

     EMPNO ENAME      JOB
---------- ---------- ---------
      7566 JONES      MANAGER
      7654 MARTIN     SALESMAN
      7698 BLAKE      MANAGER
      7782 CLARK      MANAGER
      7788 SCOTT      ANALYST

SQL> ed
Wrote file afiedt.buf

  1  select empno, ename, job
  2    from (select e.*,
  3                 row_number() over (order by empno) rn
  4            from emp e)
  5*  where rn between 9 and 11
SQL> /

     EMPNO ENAME      JOB
---------- ---------- ---------
      7839 KING       PRESIDENT
      7844 TURNER     SALESMAN
      7876 ADAMS      CLERK 
```

然而，执行这样的操作可能更有效，Oracle 可以使用内部`rownum <= 10`谓词知道一旦识别出前 10 行就可以停止对数据进行排序。

```
SELECT c.*
  FROM (SELECT b.*, rownum rn
          FROM (SELECT a.*
                  FROM activeSessionsLog a
                 ORDER BY userid asc) b
         WHERE rownum <= 10) c
 WHERE rn >= 8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-18T09:27:50.263

从 Oracle 12c 开始，您现在可以使用 offset/fetch 子句。

您现在可以编写如下查询：

```
SELECT *
FROM user_objects
ORDER object_name
OFFSET 10 ROWS FETCH NEXT 10 ROWS ONLY 
```

请查看此[新功能](http://docs.oracle.com/javadb/10.8.3.0/ref/rrefsqljoffsetfetch.html)并考虑执行计划中的改进。

# unit-testing - reusing business logic in a test class to save time

> ID：10091514
> 
> 赞同：1
> 
> 时间：2012-04-10T15:18:40.217
> 
> 标签：unit-testing

Just having a conversation with someone in the office about using a business logic class to build up some data in order to test another class.

Basically, he has class A which takes a complex type as a parameter and then generates a collection of a different complex type as a result. He's written tests around this class already. Now he's moved on to testing another class (class B) which takes the result of class A then performs some logic on it.

He's asked the question, "should I use class A to build up a scenario to test class B with".

At first I said yes as class A has tests around it. But then I figured well what if there's some bugs in class A that we haven't found yet... so I guess there must be a better way to address this scenario.

**Does anyone have any thoughts on this? Is it OK to use existing logic to save time writing other tests?**

Regards,

James

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:23:05.543

对此的立场可能会有所不同。通常，如果代码经过测试并且您*认为它可以工作*，那么您可以自由使用它。[在使用已经测试过的方法来帮助测试其他方法](https://stackoverflow.com/a/9018501/343266)（在单个类/单元内）时尤其如此。但是，由于这种情况发生在单个单元中，因此与您的情况有些不同。

现在，在处理 2 个单独的类时，我会说你应该避免这种方法。纯粹是因为**这两个类可能没有以明显的方式相关，**或者它们的上下文/使用范围可能有很大不同。例如，有人可能会在不知道 B 类存在的情况下更改 A 类。即使没有对 B 代码进行任何更改，B 类测试也会突然中断。这会带来不必要的混乱，并且是您通常不想陷入的情况。

相反，我建议在经过测试的 B 类文件中创建辅助方法。使用 stubs/fakes 和[AutoFixture 之](http://autofixture.codeplex.com/)类的工具，您应该能够轻松地重现 A 类使用的生成逻辑，并在 B 类测试中包含您自己的“副本”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:29:54.473

为了测试 B 类，从 A 类返回的结果应该在测试中的某处复制。如果 A 类返回人员列表，则您的测试中将有一个辅助函数返回一个假`List<Person>`的以用于您的测试。因为您只测试 B 类，所以不应在测试中使用 A 类。

NUnit 提供内置功能以便为您的测试提供数据，请查看： [http ://www.nunit.org/index.php?p=testCaseSource&r=2.5](http://www.nunit.org/index.php?p=testCaseSource&r=2.5)

或者您可以简单地创建一个 DataFactory 类，其方法返回您将在测试中使用的数据（简单对象、集合等）。

# symfony - Symfony2: URLs with trailing slash and an optional parameter

> ID：10091518
> 
> 赞同：7
> 
> 时间：2012-04-10T15:18:48.550
> 
> 标签：symfony, routing

I want all URLs in my application to have a trailing slash. I have the following route in my route.yml:

```
foo_route:
    pattern:  /foo/{page}/
    defaults: { _controller: FooBundle:Foo:list, page: 1 }
    requirements:
      page:  \d+ 
```

Requests to '/foo/1/' work fine, however requests to '/foo/' are not matched because of the trailing slash in the URL pattern.

How can I define routes with trailing slashes and an optional parameter? I am aware I can define 2 different routes for the two cases, but I want to avoid that.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T07:28:38.090

在一个单独但相关的情况下，您可以匹配以下三种模式：

```
/foo
/foo/
/foo/page/1 
```

通过消除路由中的尾部反斜杠并放宽正则表达式以匹配 0 个或多个字符 (*)，而不是 1 个或多个 (+)：

```
foo_route:
    pattern:  /foo/{page}
    defaults: { _controller: FooBundle:Foo:list, page: 1 }
    requirements:
      page:  \d* 
```

但是，这将不匹配 /foo/page/1/

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T18:31:11.570

在注解上定义控制器可能更容易。

在**route.yml**：

```
MineTestBundle:
    resource: "@MineTestBundle/Controller/"
    type:     annotation 
```

然后你可以直接在你的控制器中定义路由。

```
/**
 * @Route("/foo")
 */
class FooController extends Controller {
    /**
     * @Route("/", name="_foo_index")
     * @Template()
     */
    public function indexAction() {
        return array();
    }

    /**
     * @Route("/{page}/", name="_foo_page")
     * @Template()
     */
    public function pageAction($page) {
        return array('page' => $page);
    }
} 
```

现在，当您尝试访问时，`/foo`您会来到**indexAction**，当您访问时，`/foo/1/`您会来到**pageAction**。

**编辑：**

很抱歉对于这个误会。我试图重现你的问题。最简单的方法是在您的配置中定义 2 个路由，如下所示：

```
foo_route:
    pattern:  /foo/{page}/
    defaults: { _controller: AcmeDemoBundle:Foo:list }
    requirements:
        name: ".+"  

foo_route_foo:
    pattern:  /foo
    defaults: { _controller: AcmeDemoBundle:Foo:list, page: 1 }
    requirements:
        name: ".+" 
```

在没有参数**{page}**的 Route 中，您可以将页面默认设置为**1**。

但是在Cookbook中有一章[如何在路由参数中允许“/”字符，](http://symfony.com/doc/current/cookbook/routing/slash_in_parameter.html)因此可以在路由中允许**/**，因此后面的所有内容都`/foo/123/234/`在变量中`$page`，您可以在函数中自己拆分它们。

# c++ - Why 2 NULL pointers do not evaluate to false?

> ID：10091522
> 
> 赞同：0
> 
> 时间：2012-04-10T15:18:57.317
> 
> 标签：c++, pointers, null, boolean

I have a relatively simple algorithm that walks an std::vector looking for two neighbouring tuples. Once the tuples left and right of the X value are found I can interpolate between them. Somehow this works:

```
 std::vector<LutTuple*>::iterator tuple_it;
  LutTuple* left = NULL;
  LutTuple* right = NULL;
  bool found = 0;

  // Only iterate as long as the points are not found
  for(tuple_it = lut.begin(); (tuple_it != lut.end() && !found); tuple_it++) {
    // If the tuple is less than r2 we found the first element
    if((*tuple_it)->r < r) {
        left = *tuple_it;
    }
    if ((*tuple_it)->r > r) {
        right = *tuple_it;
    }
    if(left && right) {
        found = 1;
    }
  } 
```

while this:

```
 std::vector<LutTuple*>::iterator tuple_it;
  LutTuple* left = NULL;
  LutTuple* right = NULL;

  // Only iterate as long as the points are not found
  for(tuple_it = lut.begin(); tuple_it != lut.end() && !left && !right; tuple_it++) {
    // If the tuple is less than r2 we found the first element
    if((*tuple_it)->r < r) {
        left = *tuple_it;
    }
    if ((*tuple_it)->r > r) {
        right = *tuple_it;
    }
  } 
```

does not. Why is that? I'd expect two NULL ptrs like this to evaluate to true together when negated.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T15:21:40.547

一旦找到任何一个，第二个循环就会终止。将条件更改为：

```
tuple_it != lut.end() && !(left && right) 
```

或者

```
tuple_it != lut.end() && (!left || !right) 
```

继续，直到找到两者。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T15:23:26.160

有一个逻辑问题。

在您拥有的第一个片段中（基本上）`!(left && right)`。

在第二个片段中，您有：`!left && !right`.

这些是不等价的。

如果你建立真值表，你会发现它`!(left && right)`等价于`(!left || !right)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:22:13.317

> 我希望两个像这样的 NULL ptr 在被否定时一起评估为真。

这根本不符合逻辑。不要“否定”指针并期望它们在强制进入布尔表达式时会评估什么。相反，我建议明确地将它们与 NULL 进行比较。

此外，将用于继续循环的复杂布尔表达式移动到单独的行中，否则很难在逻辑上遵循代码。

# java - Java get Session Cookies

> ID：10091523
> 
> 赞同：0
> 
> 时间：2012-04-10T15:18:58.550
> 
> 标签：java, session, cookies, session-cookies

[Getting header fields from a URLConnection](https://stackoverflow.com/questions/5921056/how-to-get-cookies-with-java) doesn't get session cookies for me.

When I use `CookieManager` I can get session cookies from a URL:

```
CookieManager manager = new CookieManager();
manager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
CookieHandler.setDefault(manager);

URLConnection con = url.openConnection();
con.getContent();

CookieStore cookieJar = manager.getCookieStore();
List<HttpCookie> cookies = cookieJar.getCookies(); 
```

This is fine, but I need to send a POST request. So I am writing to the URLConnection's output stream. My question is how to get the session cookies after sending the POST request.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:28:04.957

尝试使用 URLConnection 对您的第一个和后续请求使用相同的 CookieManager 对象。

# javascript - Knockout.js how do i bind to a sub property

> ID：10091530
> 
> 赞同：18
> 
> 时间：2012-04-10T15:19:15.320
> 
> 标签：javascript, knockout.js

I know how to bind to a property, but how do i bind to a property like: Parent.Child

Using the hello world example on Knockout JS.com: Html:

```
<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2>
<h2>ChildProperty: <span data-bind="text: parentProperty.childProperty"> </span>!</h2> 
```

Javascript:

```
var ViewModel = function(first, last) {
this.firstName = ko.observable(first);
this.lastName = ko.observable(last);
this.parentProperty = ko.observable(
    {
        childProperty: "I am a child Property"
    });

this.fullName = ko.computed(function() {
    // Knockout tracks dependencies automatically. It knows that fullName depends on firstName      and lastName, because these get called when evaluating fullName.
        return this.firstName() + " " + this.lastName();
    }, this);
};

ko.applyBindings(new ViewModel("Planet", "Earth")); 
```

I would like to create a binding to the childProperty.

I created a [jsfiddle here](http://jsfiddle.net/szk2e/1/)

Thanks

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-10T15:20:59.517

So so very close!

You want

```
<span data-bind="text: parentProperty().childProperty"> </span> 
```

Your updated fiddle [http://jsfiddle.net/szk2e/2/](http://jsfiddle.net/szk2e/2/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-09-01T20:02:25.347

在此处添加答案，因为这最适合我的特定情况...

有一种情况是蒂姆的回答不起作用。这时候父属性就可以了`undefined`。

例如，如果您使用*itemsSource*和*selectedItem*的通用模式（用户从列表中选择单个项目），则*selectedItem*将在第一次评估时**未定义**，并且无论何时用户撤消他们的选择。使用绑定`text:selectedItem().SomeProperty`将“打破”淘汰赛，防止绑定被评估。`visible`请注意，尝试使用绑定（例如， ）将其短路是`text:selectedItem().SomeProperty, visible:selectedItem`行不通的。

在这种情况下，您必须使用**绑定****将`with`**绑定上下文切换到属性的值。所以，使用OP的例子......

```
<p>First name: <input data-bind="value: firstName" /></p>
<p>Last name: <input data-bind="value: lastName" /></p>
<h2>Hello, <span data-bind="text: fullName"> </span>!</h2>
<h2 data-bind="with:parentProperty">ChildProperty: 
    <span data-bind="text: childProperty"></span>!
</h2> 
```

请注意，此绑定的行为是（来自文档）

> with 绑定将根据关联值是否为空/未定义来动态添加或删除后代元素

如果你还需要根据属性是否未定义来隐藏容器，那么你应该使用`<!-- ko -->`虚拟元素来包围容器。 [更多信息可以在这里找到。](http://knockoutjs.com/documentation/with-binding.html)

# iphone - 获取具有多个谓词的请求？

> ID：10091536
> 
> 赞同：0
> 
> 时间：2012-04-10T15:19:38.380
> 
> 标签：iphone, objective-c, ios, core-data

我有一个实体`Tags`，我想执行一次提取以获取所有`Tags`内容并将其分配给`NSFetchedResultsController`. 但是，我希望获取结果中的第一个对象是`Tag`with`tagName`属性等于`"All"`，然后其余的按字母顺序排序。目前我正在这样做，它只是按字母顺序返回所有标签，但我希望命名的标签`"All"`总是第一个，然后按字母顺序排列。

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription 
                                   entityForName:@"Tag" inManagedObjectContext:appDelegate.managedObjectContext];

[fetchRequest setEntity:entity];
NSSortDescriptor *lastDescriptor =
[[[NSSortDescriptor alloc] initWithKey:@"tagName"ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)] autorelease];      

[fetchRequest setSortDescriptors:[NSArray arrayWithObject:lastDescriptor]]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:37:02.780

您需要使用您创建的比较器，而不是一个默认值，因此您可以执行以下操作：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription 
                               entityForName:@"Tag" inManagedObjectContext:appDelegate.managedObjectContext];

[fetchRequest setEntity:entity];
NSSortDescriptor *lastDescriptor =
[[[NSSortDescriptor alloc] initWithKey:@"tagName" ascending:YES comparator:^NSComparisonResult(NSString* tag1, NSString* tag2) {

    if ([tag1 isEqualToString:@"All"]) return NSOrderedAscending;
    if ([tag2 isEqualToString:@"All"]) return NSOrderedDescending;

    return [tag1 compare:tag2];
}] autorelease];      

[fetchRequest setSortDescriptors:[NSArray arrayWithObject:lastDescriptor]]; 
```

**编辑**

就像@Andrew Madsen 告诉您可以使用比较器一样，我没有看到他已经回答了您的问题。

您也可以使用选择器，只需要在您的模型中实现一个方法来进行比较，我犯了一个错误并相信这就是您正在做的，来自苹果文档：

> *选择器*
> 
> 比较对象属性时使用的方法，例如 caseInsensitiveCompare: 或 localizedCompare:。选择器必须指定由 keyPath 标识的属性值实现的方法。用于比较的选择器传递了一个参数，即要与自身进行比较的对象，并且必须返回适当的 NSComparisonResult 常量。选择器必须具有与以下相同的方法签名： - (NSComparisonResult)localizedCompare:(NSString *)aString

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:27:17.080

您可以使用自定义比较方法对 NSSortDescriptor 本身执行此操作。但是，您也可以在取回 fetch 请求的结果后对其进行排序。NSArray 有一个名为的方法`-sortedArrayUsingComparator:`，允许您使用块对数组进行排序，从而使像这样的自定义排序行为非常容易。请参阅下面的示例：

```
NSArray *sortedResults = [results sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSString *tag1 = [obj1 tagName];
    NSString *tag2 = [obj2 tagName];

    BOOL tag1IsAll = [tag1 isEqualToString:@"All"];
    BOOL tag2IsAll = [tag2 isEqualToString:@"All"];
    if (tag1IsAll && !tag2IsAll) return NSOrderedAscending;
    if (tag2IsAll && !tag1IsAll) return NSOrderedDescending;

    return [tag1 compare:tag2];
}]; 
```

# macos - Ant任务构建Mac OS X Package

> ID：10091549
> 
> 赞同：1
> 
> 时间：2012-04-10T15:20:18.113
> 
> 标签：macos, ant, installation

我正在寻找 Ant 任务，它将从我的应用程序文件中组装 Mac OS X PKG 文件。谷歌搜索。没有结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T19:06:50.070

[我建议您从这篇旧邮件](http://hints.macworld.com/article.php?story=20030619213002144)中获得灵感，并使用 Ant 任务`copy`, `chmod`, `chown`, `tar`，`gzip`而不是来自 shell 的命令......仍然可以`/usr/bin/package`使用`exec`. 也许这个小的 Perl 脚本[packagelint](http://gnufoo.org/macosx/macosx.html)也可能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T09:14:41.140

所以，我没有发现特殊的蚂蚁任务。但我学会了如何从 ant 内部使用 PackageMaker 创建 Mac OS X 包。首先，您必须手动创建 PackageMaker 项目。在 PackageMaker 中创建一个包，然后将其另存为“testpkg”。现在您需要在您的 ant 脚本中添加以下代码。

```
<exec executable="/Developer/Applications/Utilities/PackageMaker.app/Contents/MacOS/PackageMaker">
                <arg value="--doc"/>
                <arg value="./Installer/testpkg.pmdoc/"/>
                <arg value="--out"/>
                <arg value="${build.dir}/../test.pkg"/>
</exec> 
```

当然，您需要更改路径的一些参数。

这种方法很简单，就像您手动创建包然后自动重新组装它一样。但是奖章还有另一面：每次您对文件进行更改（例如，新文件必须包含在包中）时，您都必须手动更改您的包项目。

还有另一种创建 pkg 的方法（**打包工具和****PackageMaker**本身的各种命令行开关）。我选择简单的方式。

# windows - How can we get time statistics about our printing in windows?

> ID：10091554
> 
> 赞同：1
> 
> 时间：2012-04-10T15:20:28.533
> 
> 标签：windows, printing

I am trying to implement a project which will have printing option. When a user wants to print a pdf or doc he will be able to print it. So that I want to know timings about printing times. Can you please tell me how to get timing statistics for that in Windows with a code ? For example I want to have this statistics : For 5 pages : 2 sc For 4 pages : 1 sc etc...

Thank you all in advance

# silverlight - 在微软的 Toolkit DataForm 中，是否有任何功能提示用户在离开页面时保存

> ID：10091558
> 
> 赞同：0
> 
> 时间：2012-04-10T15:20:46.380
> 
> 标签：silverlight, silverlight-4.0, ria, silverlight-toolkit, silverlight-5.0

在 Microsoft 的 Toolkit DataForm 中

用户正在尝试通过单击添加图标在 Toolkit Dataform 中添加新项目。在中间，如果他选择任何其他菜单选项卡，那么他将丢失所有输入的信息。

我想在离开页面时向用户显示提示以保存。在离开页面之前警告用户未保存的更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T15:28:20.557

经过一番研究，我找到了解决方案。

Silverlight 页面中有一个名为 OnNavigatingFrom 的方法。在页面不再是框架中的活动页面之前调用该方法。

因此，您可以在该方法中添加任何警报或确认消息。

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
        {
            if (DataForm.IsEditMode)
            {
                System.Windows.Browser.HtmlPage.Window.Alert("Please Save or Cancel changes before switching the page"); 
                e.Cancel = true;
            }
            base.OnNavigatingFrom(e);
        } 
```

当您想从当前页面编辑或添加模式移动到其他页面时，将调用它。

# push-notification - Push Notification Second Tile

> ID：10091564
> 
> 赞同：1
> 
> 时间：2012-04-10T15:20:58.393
> 
> 标签：push-notification, windows-phone-7.1, mpns

I can handle the second tile with a notification of wp7? I can only do it on first.

Do you have any idea to offer me?

Surely management is possible using the raw notifications within the application and will handle me the tile, but are still forced to enter into the application to update.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:31:56.417

通过帮助，这是我必须格式化 xml 以发送通知的方式，我错过了标签 ID

```
<?xml version="1.0" encoding="utf-8"?>
 <wp:Notification xmlns:wp=WPNotification>
  <wp:Tile ID="Navigation URI of the tile to update">
   <wp:BackgroundImage><string></wp:BackgroundImage>
   <wp:Count><string></wp:Count>
   <wp:Title><string></wp:Title>
   <wp:BackBackgroundImage><string></wp:BackBackgroundImage>
   <wp:BackTitle><string></wp:BackTitle>
   <wp:BackContent><string></wp:BackContent>
  </wp:Tile>
 </wp:Notification> 
```

谢谢托马斯麦吉尼斯

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T10:29:41.673

MSDN 文档涵盖辅助磁贴

[http://msdn.microsoft.com/en-us/library/hh202945(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh202945%28v=vs.92%29.aspx)

这些参数是您用来更新辅助磁贴的参数：

```
<wp:BackBackgroundImage>
<wp:BackTitle>
<wp:BackContent> 
```

在您的推送 XML 中填充这三个元素，这将更新背面图块。

# css - CSS3 浏览器兼容性

> ID：10091572
> 
> 赞同：-2
> 
> 时间：2012-04-10T15:21:13.573
> 
> 标签：css

[此页面](http://www.siteripe.com)上的 CSS3 过渡效果在除 IE 之外的所有其他浏览器上都运行良好。它还在缩略图的顶部和左侧添加了一个边框。我已经尝试将所有元素的边框设为 0，但它仍然没有帮助。css如下图所示。

```
.slide-up-boxes .showbox a {
    display: block;
    margin: 0 0 20px;
    height: 157px;
    overflow: hidden;
    width: 315px;
    float: left;
    border:none;
    padding: 0px;
    background: transparent;
        }

        .slide-up-boxes .showbox img { 
            color: #333; 
            text-align: center;
            margin-right: 15px;
            width: 315px;
            float: left;
            height: 157px; 
            font: italic 18px/65px Georgia, Serif;    /* Vertically center text by making line height equal to height */
            zoom: 1;
            filter: alpha(opacity=45);
            opacity: 0.5;
             -webkit-transition: all 0.2s linear; 
             -moz-transition: all 0.2s linear; 
             -o-transition: all 0.2s linear;
        }

    .showbox a:hover img { 
            margin-top: -155px; 
            opacity: 0; 
            height: 157px; 
            width: 315px;

        }

        .showbox object {
    color: white;
    background: #393838;
    font: 12px/15px Georgia, Serif;
    opacity: 0;
    -webkit-transform: rotate(6deg);
    -webkit-transition: all 0.4s linear;
    -moz-transform: rotate(6deg);
    -moz-transition: all 0.4s linear;
    -o-transform: rotate(6deg);
    -o-transition: all 0.4s linear;
    width: 314px;
    float: left;
    height: 154px;
    border: none;
    padding: 0px;
    margin: 0px 15px 0px 0px;
        }
        .slide-up-boxes .showbox a:hover object { 
            opacity: 1; 
            width: 314px;
            border: none;
            -webkit-transform: rotate(0); 
            -moz-transform: rotate(0); 
            -o-transform: rotate(0); 
            zoom: 1;
        }
    .slide-up-boxes .showbox#show1 object { 
    background: url(images/huethumb.jpg) ; 
    padding-top: 110px; zoom: 1;
    border: none;

    }
    .slide-up-boxes .showbox#show2 object { 
    background: url(images/pizzathumb.jpg) ; 
    padding-top: 110px; zoom: 1;
    border: none;

    }
    .slide-up-boxes .showbox#show3 object { 
    background: url(images/rickolthumb.jpg) ; 
    padding-top: 110px;
    border: none;

    }
    .slide-up-boxes .showbox#show4 object { 
    background:url(images/bernie-thumber.jpg) ; 
    padding-top: 110px; zoom: 1;
    background-repeat: no-repeat;
    border: none;

    }
    .slide-up-boxes .showbox#show5 object { 
    background: url(images/nollythumb.png) ; 
    padding-top: 110px; zoom: 1;
    border: none;

    }
    .slide-up-boxes .showbox#show6 object { 
    background:url(images/photothumg.jpg) ; 
    padding-top: 110px; zoom: 1;
    border: none;

    }
    .slide-up-boxes .showbox#show7 object { 
    background:url(images/tradersthumb.png) ; 
    padding-top: 110px; zoom: 1;
    border: none;

    }
    .slide-up-boxes .showbox#show8 object { 
    background:url(images/wpbathumb.jpg);
    padding-top: 110px; zoom: 1;
    border: none;

    }
    .slide-up-boxes .showbox#show9 object  { 
    background:url(images/peterthumb.png);
    padding-top: 110px;
    zoom: 1;
    border: none;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:33:29.057

您对 -webkit 或 -moz 所做的任何事情都不适用于 IE，它们是特定于浏览器引擎的 css 样式。ms-transform 应该可以在 IE9 中使用，但是没有过渡样式。有关更多详细信息 ，请参阅这篇关于[CSS 兼容性和 Internet Explorer的 MSDN 文章。](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx)

# css - CSS - change link color on rollover of the div that contains it

> ID：10091580
> 
> 赞同：0
> 
> 时间：2012-04-10T15:21:31.637
> 
> 标签：css

```
<div class="positions">
<div class="main" style="clear: both;">
<div class="mainC">
<a class="news" href="#"><img src="salad.jpg" width="105" alt="salad"/></a>
</div>
</div>
<div class="foot" style="clear: both;">
<h1 class="news"><a href="#">Salad</a></h1>
</div>
</div> 
```

Is it possible to change the color of the "Salad" link, when the parent "positions" div is rolled over? Thanks in advance for any help.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:24:15.393

使用[Css 伪类`:hover`](http://www.w3schools.com/Css/css_pseudo_classes.asp)：

```
.positions:hover h1.news a
{
  color:red;
} 
```

[**-- 见示例 --**](http://jsfiddle.net/Curt/4Jx3p/)

# c# - 在自动生成的类中引用自定义类？

> ID：10091582
> 
> 赞同：0
> 
> 时间：2012-04-10T15:21:34.403
> 
> 标签：c#, codedom, system-codedom-compiler

我有两个类，我正在尝试使用 CodeDom 生成代码。头等舱（StudentModel），非常直接，我可以使用 CodeDom 生成。

在第二节课，即学生课中，我正在尝试参考 StudentModel 课。StudentModel 类将在生成 Student 类之前生成。

但是是否可以使用 CodeDom 生成第二类（学生）？？？

```
public class StudentModel
{
  public string Name { get; set; }
}

public class Student
{

    void AddStudent(StudentModel model);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:13:43.580

我认为您只需要使用第一种类型的名称来生成方法：

```
CodeTypeDeclaration studentModelClass = …;

var addStudentMethod =
    new CodeMemberMethod
    {
        Name = "AddStudent",
        Parameters =
        {
            new CodeParameterDeclarationExpression(studentClass.Name, "student")
        }
    }; 
```

# android - android - 从服务或通知返回到应用程序

> ID：10091587
> 
> 赞同：0
> 
> 时间：2012-04-10T15:22:10.077
> 
> 标签：android, service, android-activity, android-intent, notifications

我正在处理的应用程序的流程存在一些问题。基本上，我有一个服务，它总是持有一个通知，按下通知应该返回到应用程序的最新活动，而不重新打开它（意味着它将恢复）。此外，在特定活动（可能还有其他活动）上，我需要单击后退按钮会退出应用程序（和服务），因此下次最终用户通过启动器或长按主页按钮启动它时，它将回到第一个活动。

简而言之，要求是：

*   服务通知单击 -> 恢复当前活动，不创建新活动。
*   返回单击特定活动-> 完全关闭应用程序（清除所有应用程序的堆栈）。

因此，例如，如果我有调用活动 B 的活动 A（这是特殊活动）：如果最终用户单击主页，然后通过通知返回到应用程序（或通过启动器/长按主页按钮启动) ，它将返回到他离开它的活动 B 的确切状态。此外，如果最终用户在活动 B 上按下了后退按钮，则应用程序将关闭（并且服务和通知将消失），下次他打开应用程序（无论如何），他将返回活动 A 。

我尝试在活动 B 上使用“singleInstance”，但它总是会回到活动 B，因为它在自己的任务中，无论我使用哪个标志（我已经尝试过 FLAG_ACTIVITY_REORDER_TO_FRONT 和其他一些标志）。如果不使用它，通知将打开一个新的活动 B 实例。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:42:19.443

jelly bean (android 4.1) 现在为这个确切的问题引入了一个新的 API：

[http://www.youtube.com/watch?feature=player_embedded&v=Yc8YrVc47TI#t=830s](http://www.youtube.com/watch?feature=player_embedded&v=Yc8YrVc47TI#t=830s)

但是，我不确定我是否了解如何使用它以及它是如何工作的。它是否有可能重新创建整个活动堆栈？这不是很成问题吗，因为它们可能包含以前不存在的数据（因为它们已刷新）？

这听起来也有问题，因为这意味着我需要监视所有操作以便稍后恢复它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:52:05.037

另一种方法是将通知的意图设置为启动一个新的虚假活动，该活动将在创建后立即关闭。意图也将具有“FLAG_ACTIVITY_NEW_TASK”标志。

希望这种方法对每个人都有效。太糟糕了，这个解决方案似乎更像是一种解决方法，而不是真正的解决方案。

另一种选择是这个链接： [Change notification intent in Android](https://stackoverflow.com/questions/10955484/android-change-notification-intent)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:57:03.780

好的，尽管这不是完全正确的答案，但就我而言，我对活动 B 使用了“singleTop”，并选择在移动到活动 B 时关闭活动 A。

# ios - “未找到包含任何钥匙串签名证书的未过期配置文件”

> ID：10091590
> 
> 赞同：43
> 
> 时间：2012-04-10T15:22:14.260
> 
> 标签：ios, xcode, keychain, provisioning-profile

我已经看到了一些解决这个主题的其他问题，但没有一个像我的那样。昨天我无意中在设备列表中添加了一个设备。

**问题：**

我的印象是，添加设备后，它现在将链接到配置文件。但是，我相信它与我的分发配置文件之一无关。所以我开始编辑配置文件，点击设备旁边的复选标记，然后点击提交。这就是问题开始的地方。

我注意到两件事：我最近在大约一周前更新了我的证书/配置文件。现在，它认为我昨天更新了我的配置文件（或者至少在组织者中是这样说的）。

此外，当我尝试构建任何项目时，我得到可怕的“没有找到包含任何钥匙串签名证书的未过期配置文件”。在构建设置中，我的签名身份显示在没有配置文件的身份下。我读过关于人们不得不拆除一切并重建的恐怖故事，我希望我不必在这里这样做..

> 相关问题：
> [代码签名错误：未找到包含任何钥匙串签名证书的未过期配置文件](https://stackoverflow.com/questions/9982788/code-sign-error-no-unexpired-provisioning-profiles-found-that-contain-any-of-th)

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-07-03T12:34:26.967

iOS 发行版真是让人头疼！这对我有用（按照此顺序执行步骤）：

1) 在 xcode 组织者中：

*   删除所有配置文件

2) 在 mac os x 钥匙串中：

*   删除所有 iOS 开发者证书

3) 访问 developer.apple.com

*   登录会员中心
*   撤销所有证书（**编辑：**一些redditors指出，如果您在一个更大的团队中工作，这不是一个好主意。如果是这种情况，请尝试删除过期的证书。）

4）回到xcode管理器：

*   单击配置文件选项卡下的刷新（右下角）并登录
*   项目清单

在弹出窗口上单击积极按钮

5) 在您的 xcode 项目中，转到“构建设置”选项卡

*   在代码签名下选择开发人员。和分配。身份
*   如果它们不存在或无效，请转到 developer.apple.com 并导航到“配置”如果它们无效，只需单击修改并再次保存它们

6）回到xcode管理器：

*   再次点击刷新（右下）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-11T10:53:53.460

今天我已经安装了`Xcode 4.3.2`，立即遇到了同样的问题！首先尝试归档分发，然后在一个干净的新项目中，尝试在设备上运行。我解决了这两个问题。

**1.** 为了成功分发，我已经从 iOS 配置门户下载并安装了我的分发证书，之后在 Xcode 中我已经`Code Signing Identity`正确设置。这解决了我的存档问题。

**2.**我在创建新项目并尝试在设备上运行时遇到了同样的问题。再次在配置门户中，`certificates`我删除了我的开发证书。我还删除了所有开发配置文件。还从组织者中删除了它们。然后我再次添加了设备。希望这可以帮助！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-07T08:46:12.160

对我来说，只需点击右下角的“刷新按钮”就是答案！

希望我能帮助别人。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-13T00:21:30.050

当我的应用程序包标识符与我尝试使用的配置文件不匹配时，我收到此错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-25T21:26:35.180

我有 Xcode 5.1，我解决了这样的问题

Xcode -> 首选项 -> 帐户 -> 查看详细信息 -> 刷新按钮（左下角）

刷新后我点击完成，错误消失了:)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-07T04:43:38.703

我今天遇到了这个。事实证明，在我清理了我的设备列表（删除了一些我不再进行开发的）之后，它使我的一些开发证书无效。我从配置文件中删除了它们并重新生成了它们。

# drupal - Drupal 的 chrome 中奇怪的输出

> ID：10091597
> 
> 赞同：0
> 
> 时间：2012-04-10T15:22:43.107
> 
> 标签：drupal, google-chrome, drupal-7

请访问[http://www.iamvishal.com/dev/property/p2135](http://www.iamvishal.com/dev/property/p2135)：如果您在 Internet Explorer 和 Firefox 中看到它，内容将显示，但在 Google Chrome 中整个屏幕变黑。页面正在加载，但出现了问题。

我搜索并试图找到错误，但我似乎无法找到问题所在。请检查并建议可能出现的问题。

# dotcms - dotCMS 编辑菜单

> ID：10091600
> 
> 赞同：1
> 
> 时间：2012-04-10T15:23:08.797
> 
> 标签：dotcms

我不知道如何在 dotCMS 中编辑菜单。我被分配了从菜单中删除项目的任务。如果我登录 dotCMS 并导航到 URL，它将显示与 CMS 集成的页面。它显示了一个用于调整菜单项顺序的上下箭头框。但是，我找不到如何添加/删除/重命名这些项目。如果我单击向上/向下箭头，它会将我转发到菜单重新排序页面。它没有提供任何链接以从那里进一步管理菜单。我在网站 > 链接中进行了一些搜索，但没有任何运气。

![页面截图](../Images/61abb0db58659f490b526df7424445ad.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T22:51:44.623

如果选中了“在菜单上显示”选项，则页面或目录将包含在菜单中。您可以通过转到 cms 中的网站选项卡并右键单击 te 页面或要排除的目录来取消选中它。单击上下文菜单中的属性，然后在新页面中取消选中“在菜单上显示”复选框。该复选框可能在第二个选项卡上，只需在那里查找它，您就会很容易找到它。希望这可以帮助。

# oracle - 甲骨文本地时区

> ID：10091603
> 
> 赞同：1
> 
> 时间：2012-04-10T15:23:20.480
> 
> 标签：oracle, oracle10g

我正在使用此表达式将 UTC 的日期转换为其等效的美国/东部时间：

```
CAST((FROM_TZ(CAST(date_field AS TIMESTAMP),'+00:00') AT TIME ZONE 'US/Eastern') AS DATE) DATE_FIELD_ET 
```

我希望使用更通用的表达式将值转换为当地时间：

```
CAST((FROM_TZ(CAST(note_time AS TIMESTAMP),'+00:00') AT LOCAL TIME ZONE) AS DATE) DATE_FIELD_LOCAL 
```

但是这种语法不起作用。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:27:40.067

你可以使用[`DBTIMEZONE`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions041.htm).

```
CAST((FROM_TZ(CAST(date_field AS TIMESTAMP),'+00:00') AT TIME ZONE DBTIMEZONE) AS DATE) DATE_FIELD_ET 
```

# html - 哪里有错误？

> ID：10091606
> 
> 赞同：-4
> 
> 时间：2012-04-10T15:23:38.957
> 
> 标签：html, css, positioning

我希望 div 1 和 div 2 适合[这里的 bigbox](http://jsfiddle.net/pmRsQ/2/)

帮我找出错误

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-10T15:24:36.613

在 #box div 上，添加 rule `overflow:auto;`。

**[jsFiddle 示例](http://jsfiddle.net/j08691/pmRsQ/1/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:25:44.477

在关闭第二个 div 后添加以下行

```
<div style="clear:both"></div> 
```

所以整个代码将是：

```
<html>
<head>
    <title>ДОСИТЬ ЦЕ ТЕРПІТИ!!!</title>
    <meta http-equiv="content-type" content="text/html" charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">

    </script>
</head>
<body>
    <div id="box">
        <div id="title">bigbox</div>
        <div id="one">
            <div class="who">div 1</div>
        </div>
        <div id="two">
            <div class="who">div 2</div>
        </div>
        <div style="clear:both"></div>
    </div>
</body>
</html>​ 
```

# java - 在 Java 中使用 SOAP

> ID：10091607
> 
> 赞同：-1
> 
> 时间：2012-04-10T15:23:48.783
> 
> 标签：java, soap

我使用 SOAPUI 调用 Web 服务并生成 axis2 java 代码。我的问题是我将如何编译和运行这个应用程序，因为当我尝试编译它时出现一个又一个错误。我必须手动添加很多外部库。我将如何让我的程序运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:41:00.943

编译时收到什么错误消息？需要更多信息来解决它，我遇到了使用 JAX-WS 的 SOAP 问题，结果证明是网络配置。你是在本地运行还是远程运行？-本

# c# - 寻找一个简单的.net 动画库

> ID：10091609
> 
> 赞同：2
> 
> 时间：2012-04-10T15:23:57.787
> 
> 标签：c#, .net, winforms, animation

我想创建一个 WinForms 应用程序，使用户能够创建非常简单的 2D 动画。这些基于关键帧的动画可以包含简单的对象，主要是一些按照用户定义逐帧移动的圆圈。我还想让它能够将帧导出为图像或将整个动画导出为视频文件。

我是一位经验丰富的 c# .net 开发人员，但我从未创建过这样的应用程序。我环顾四周，大多数开发人员使用一些 XNA、WPF、DirectX 或 opengl 来创建动画。就我而言，我觉得它们都“矫枉过正”，它们对于像我这样简单的任务来说太复杂了。

所以，我想请你推荐一个非常简单的开源 .net 库，它可以创建非常简单的基于关键帧的 2D 动画。

或者我应该通过计时器从头开始......？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T22:21:48.987

我自己没有尝试过，但我听说这个很好：

[http://code.google.com/p/dot-net-transitions/](http://code.google.com/p/dot-net-transitions/)

# c# - FileSystemWatcher 引发 Changed 事件的确切时间是什么时候

> ID：10091612
> 
> 赞同：0
> 
> 时间：2012-04-10T15:24:20.763
> 
> 标签：c#, file, events, filesystemwatcher

我想了解以下内容： FileSystemWatcher 在我打开文件并更改文件时引发 Changed 事件，或者只是在我更改文件后保存文件时引发 Changed 事件？

如果我使用 FileStream 更改事件只会在我这样做时引发：fs.Close();

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-10T17:53:37.720

就文件系统而言，文件在保存之前不会“更改”。如果您在文字处理器（从记事本到 Word）中打开一个文本文件并开始输入，该文件实际上还没有“更改”；只有特定于文字处理器的文件在内存中的表示发生了变化。

# sql - Powershell 在 SQL 服务器中查找主体/镜像

> ID：10091613
> 
> 赞同：0
> 
> 时间：2012-04-10T15:24:21.863
> 
> 标签：sql, tsql, powershell

我想知道是否可以通过运行任何 sql 查询来知道 sql server 的实例是否在镜像/主体中？其次，我想每天凌晨 4 点自动在 60-80 个实例上运行它吗？我想用powershell以前用过，从经验上用起来挺容易的。Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:08:25.560

有可能的。您将需要使用 SMO 对象。

```
$server = "dwhtest-new"
$srv = New-Object Microsoft.SqlServer.Management.Smo.Server $server
$db = New-Object Microsoft.SqlServer.Management.Smo.Database
$dbs = $srv.Databases
    foreach ($db1 in $dbs)
            {
                $db = New-Object Microsoft.SqlServer.Management.Smo.Database 
                $db = $db1
                $DatabaseName = $db.Name
                Write-Host $DatabaseName
                Write-Host "MirroringStatus:" $db.MirroringStatus
                Write-Host "DBState:"  $db.Status
                Write-Host
            } 
```

如果您的数据库的镜像仍然完好无损，您将收到 MirroringStatus 的“已同步”，它的主数据库会显示状态为“正常”，如果是故障转移，它将显示“正在恢复”。不幸的是，据我所知，没有办法仅仅拉出“镜像”或“原则”的状态。您将不得不构建逻辑来检查这两个值。恢复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T03:19:30.210

这取决于您将如何设置工作？

如果您想从收集所有信息的中央服务器运行它，那么 SMO 将是使用 PowerShell 的方式。[KickerCost](https://stackoverflow.com/a/10254217/847990)提供的答案可以工作，但需要更多工作才能为多台服务器运行它。最好以他的示例为例，将其转换为允许通过管道输入服务器名称的工作函数。

如果您只想在每台服务器上本地运行一个作业（计划任务或 SQL 代理作业），该作业可能指向网络共享上的脚本，那么可能将该信息输出到一个文件（如 servername_instance.log）中，您可以使用使用 SQLPS 的单线：

```
 dir SQLSERVER:\SQL\KRINGER\Default\Databases | Select Name, MirroringStatus 
```

KRINGER 是我的服务器名称，具有默认实例。如果您已命名实例，则将“默认”替换为实例名称。此命令的输出将与此类似：

```
 Name                     MirroringStatus
----                     ---------------
AdventureWorks           None
AdventureWorksDW         None 
```

显然我没有涉及镜像的任何数据库。

# android - 我的 Android 应用程序意外停止

> ID：10091615
> 
> 赞同：0
> 
> 时间：2012-04-10T15:24:24.833
> 
> 标签：android, logcat

当我尝试在模拟器上运行我的应用程序时，我的应用程序会出现一条错误消息，说

> 应用程序意外停止。请再试一次。”

我该如何解决？

这是我的代码：

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.DOLEnterprises.GTA5Guide"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="4" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application 
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >

        <activity 
           android:name= "com.google.ads.AdActivity"
           android:configChanges= "keyboard|keyboardHidden|orientation" 
        ></activity>

        <activity
            android:name=".GTA5GuideActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

“Appname”Activity.java：

```
package com.DOLEnterprises.GTA5Guide;

import android.app.Activity;
import android.os.Bundle;

public class GTA5GuideActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    }
} 
```

主要.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads= "http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:scaleType="center"
        android:src="@drawable/gtaapp" />

    <com.google.ads.AdView android:id= "@+id/ad"
        android:layout_width="wrap_content"
        android:layout_height= "wrap_content"
        ads:adUnitId= "soon"
        ads:loadAdOnCreate= "a14f8315a6c11bf"
        ads:adSize="BANNER"
    />
</LinearLayout> 
```

Logcat 的事情：

```
04-10 08:23:55.424: D/dalvikvm(224): GC freed 510 objects / 46816 bytes in 75ms
04-10 08:23:55.534: D/AndroidRuntime(224): Shutting down VM
04-10 08:23:55.534: W/dalvikvm(224): threadid=3: thread exiting with uncaught exception          (group=0x4001b188)
04-10 08:23:55.534: E/AndroidRuntime(224): Uncaught handler: thread main exiting due to uncaught exception
04-10 08:23:55.554: E/AndroidRuntime(224): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.DOLEnterprises.GTA5Guide/com.DOLEnterprises.GTA5Guide.GTA5GuideActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.AdView
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.os.Looper.loop(Looper.java:123)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-10 08:23:55.554: E/AndroidRuntime(224):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 08:23:55.554: E/AndroidRuntime(224):  at java.lang.reflect.Method.invoke(Method.java:521)
04-10 08:23:55.554: E/AndroidRuntime(224):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-10 08:23:55.554: E/AndroidRuntime(224):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-10 08:23:55.554: E/AndroidRuntime(224):  at dalvik.system.NativeStart.main(Native Method)
04-10 08:23:55.554: E/AndroidRuntime(224): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.AdView
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-10 08:23:55.554: E/AndroidRuntime(224):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.Activity.setContentView(Activity.java:1622)
04-10 08:23:55.554: E/AndroidRuntime(224):  at com.DOLEnterprises.GTA5Guide.GTA5GuideActivity.onCreate(GTA5GuideActivity.java:11)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-10 08:23:55.554: E/AndroidRuntime(224):  ... 11 more
04-10 08:23:55.554: E/AndroidRuntime(224): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader@44e8ca48
04-10 08:23:55.554: E/AndroidRuntime(224):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-10 08:23:55.554: E/AndroidRuntime(224):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-10 08:23:55.554: E/AndroidRuntime(224):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
04-10 08:23:55.554: E/AndroidRuntime(224):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
04-10 08:23:55.554: E/AndroidRuntime(224):  ... 20 more
04-10 08:23:55.584: I/dalvikvm(224): threadid=7: reacting to signal 3
04-10 08:23:55.584: E/dalvikvm(224): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
04-10 08:24:22.804: D/dalvikvm(231): GC freed 537 objects / 47832 bytes in 68ms
04-10 08:24:22.913: D/AndroidRuntime(231): Shutting down VM
04-10 08:24:22.913: W/dalvikvm(231): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-10 08:24:22.913: E/AndroidRuntime(231): Uncaught handler: thread main exiting due to uncaught exception
04-10 08:24:22.933: E/AndroidRuntime(231): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.DOLEnterprises.GTA5Guide/com.DOLEnterprises.GTA5Guide.GTA5GuideActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.AdView
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.os.Looper.loop(Looper.java:123)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-10 08:24:22.933: E/AndroidRuntime(231):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 08:24:22.933: E/AndroidRuntime(231):  at java.lang.reflect.Method.invoke(Method.java:521)
04-10 08:24:22.933: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-10 08:24:22.933: E/AndroidRuntime(231):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-10 08:24:22.933: E/AndroidRuntime(231):  at dalvik.system.NativeStart.main(Native Method)
04-10 08:24:22.933: E/AndroidRuntime(231): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.AdView
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-10 08:24:22.933: E/AndroidRuntime(231):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.Activity.setContentView(Activity.java:1622)
04-10 08:24:22.933: E/AndroidRuntime(231):  at com.DOLEnterprises.GTA5Guide.GTA5GuideActivity.onCreate(GTA5GuideActivity.java:11)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-10 08:24:22.933: E/AndroidRuntime(231):  ... 11 more
04-10 08:24:22.933: E/AndroidRuntime(231): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader@44e8ca28
04-10 08:24:22.933: E/AndroidRuntime(231):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-10 08:24:22.933: E/AndroidRuntime(231):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-10 08:24:22.933: E/AndroidRuntime(231):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
04-10 08:24:22.933: E/AndroidRuntime(231):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
04-10 08:24:22.933: E/AndroidRuntime(231):  ... 20 more
04-10 08:24:22.953: I/dalvikvm(231): threadid=7: reacting to signal 3
04-10 08:24:22.953: E/dalvikvm(231): Unable to open stack trace file '/data/anr/traces.txt': Permission denied
04-10 08:24:31.884: D/dalvikvm(237): GC freed 564 objects / 48880 bytes in 92ms
04-10 08:24:31.993: D/AndroidRuntime(237): Shutting down VM
04-10 08:24:31.993: W/dalvikvm(237): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
04-10 08:24:32.003: E/AndroidRuntime(237): Uncaught handler: thread main exiting due to uncaught exception
04-10 08:24:32.023: E/AndroidRuntime(237): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.DOLEnterprises.GTA5Guide/com.DOLEnterprises.GTA5Guide.GTA5GuideActivity}: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.AdView
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.os.Looper.loop(Looper.java:123)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-10 08:24:32.023: E/AndroidRuntime(237):  at java.lang.reflect.Method.invokeNative(Native Method)
04-10 08:24:32.023: E/AndroidRuntime(237):  at java.lang.reflect.Method.invoke(Method.java:521)
04-10 08:24:32.023: E/AndroidRuntime(237):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-10 08:24:32.023: E/AndroidRuntime(237):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-10 08:24:32.023: E/AndroidRuntime(237):  at dalvik.system.NativeStart.main(Native Method)
04-10 08:24:32.023: E/AndroidRuntime(237): Caused by: android.view.InflateException: Binary XML file line #16: Error inflating class com.google.ads.AdView
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-10 08:24:32.023: E/AndroidRuntime(237):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.Activity.setContentView(Activity.java:1622)
04-10 08:24:32.023: E/AndroidRuntime(237):  at com.DOLEnterprises.GTA5Guide.GTA5GuideActivity.onCreate(GTA5GuideActivity.java:11)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
04-10 08:24:32.023: E/AndroidRuntime(237):  ... 11 more
04-10 08:24:32.023: E/AndroidRuntime(237): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader@44e8ca28
04-10 08:24:32.023: E/AndroidRuntime(237):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-10 08:24:32.023: E/AndroidRuntime(237):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-10 08:24:32.023: E/AndroidRuntime(237):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
04-10 08:24:32.023: E/AndroidRuntime(237):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
04-10 08:24:32.023: E/AndroidRuntime(237):  ... 20 more
04-10 08:24:32.043: I/dalvikvm(237): threadid=7: reacting to signal 3
04-10 08:24:32.043: E/dalvikvm(237): Unable to open stack trace file '/data/anr/traces.txt': Permission denied 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:32:47.123

- -编辑 - -

您确定您已下载“广告”库并将其包含在您的项目中吗？未找到类表明您尚未将其成功链接到您的项目。也尝试按照以下步骤重建您的项目。

* * *

尝试清理您的项目... 项目 > 清理 > 选择您的项目 > 确定
重新运行您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:30:35.870

似乎错误是由于 Typos 或 cast ... 仔细检查 Typos 和 cast .... 检查库文件夹名称 ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:42:15.573

看看这个

`android:configChanges`需要所有参数才能在应用程序中显示广告

更改`SDK version`您`14`的应用程序的

`AndroidManifest.xml`在你的文件中提到它

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="14"/>

<activity android:name="com.google.ads.AdActivity" android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

# javascript - 谷歌地图 v3 边界高亮显示

> ID：10091618
> 
> 赞同：-1
> 
> 时间：2012-04-10T15:24:30.953
> 
> 标签：javascript, google-maps-api-3, overlay

我有问题。在谷歌地图研究中，当您搜索一个省/地区时，结果会以省边界突出显示。但是当我们在我的代码中进行相同的本地化时，我有相同的结果除了！[在此处输入图像描述][1] 没有突出显示边界。我尝试了 maptype 和 mapstyle，但没有什么比在谷歌地图上搜索更有效。

有人能帮我吗？谢谢埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:34:45.377

据我所知，此功能并未公开。

这是另一个问题，它解释了如何自己完成此任务。 [在 Google Map API 3 中突出显示美国各州和城市的边界](https://stackoverflow.com/questions/6388590/highlighting-borders-of-state-and-cities-of-us-in-google-map-api-3)

# java - Android Json HTTP Post，无法解析数据

> ID：10091620
> 
> 赞同：0
> 
> 时间：2012-04-10T15:24:32.177
> 
> 标签：java, android

很抱歉打扰您，因为我是 Android 编程的新手，并且在尝试检索我的发送并从我的本地主机服务器接收响应时遇到了以下问题。

当我一开始尝试启动该程序时，它似乎会自动关闭。但实施后

```
StrictMode.ThreadPolicy policy = new StrictMode.
ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

该程序能够运行，但是，无法解析数据。

我在我的 android Manifest 脚本中允许了 Internet 权限。

我的安卓代码

```
package kx.practice;

import android.app.Activity;
import android.os.Bundle;
import android.os.StrictMode;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.widget.TextView;

public class JsonHttpPractice2Activity extends Activity {

TextView tv;
String text;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

StrictMode.ThreadPolicy policy = new StrictMode.
ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy);

tv  = (TextView)findViewById(R.id.textView1);
text    = "";

try {
postData();
} catch (JSONException e) {
// TODO Auto-generated catch block
System.out.println("Error in JSON Exception 1");
e.printStackTrace();
}
}

public void postData() throws JSONException{ 
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://localhost/phpWebservice/AndroidTest.php");
JSONObject json = new JSONObject();

try {
// JSON data:
json.put("name", "Fahmi Rahman");
json.put("position", "sysdev");

JSONArray postjson=new JSONArray();
postjson.put(json);

// Post the data:
httppost.setHeader("json",json.toString());
httppost.getParams().setParameter("jsonpost",postjson);

// Execute HTTP Post Request
System.out.print(json);
HttpResponse response = httpclient.execute(httppost);

// for JSON:
if(response != null)
{
InputStream is = response.getEntity().getContent();

BufferedReader reader = new BufferedReader(new InputStreamReader(is));
StringBuilder sb = new StringBuilder();

String line = null;
try {
while ((line = reader.readLine()) != null) {
sb.append(line + "\n");
}
} catch (IOException e) {
e.printStackTrace();
} finally {
try {
is.close();
} catch (IOException e) {
e.printStackTrace();
}
}
text = sb.toString();
System.out.println("This is my text" +text);
}

tv.setText(text);

}catch (ClientProtocolException e) {
System.out.println("Error in JSON Exception 2");
// TODO Auto-generated catch block
} catch (IOException e) {
System.out.println("Error in JSON Exception 3");
// TODO Auto-generated catch block
}
}
} 
```

最后，我的 PHP 代码

```
<?php
$json = $_SERVER['HTTP_JSON'];
echo "JSON: \n";
echo "--------------\n";
var_dump($json);
echo "\n\n";

$data = json_decode($json);
echo "Array: \n";
echo "--------------\n";
var_dump($data);
echo "\n\n";

$name = $data->name;
$pos = $data->position;
echo "Result: \n";
echo "--------------\n";
echo "Name     : ".$name."\n Position : ".$pos;
?> 
```

顺便说一句，我从一个在线网站获得了这些代码。但是，如果这些代码能够工作，我应该能够将它实施到我的项目中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:30:12.077

您正在尝试访问主线程上的网络。这是一个[**非常糟糕的主意**](http://developer.android.com/resources/articles/painless-threading.html)。您需要在单独的线程中进行网络访问。链接的文章为此提供了一些指导方针。

如果您在将网络访问权限移至其他线程后仍有问题，请随时回来提出更多问题。

（您的应用程序被杀死的原因是因为 Android 系统注意到它有一段时间没有响应，因为它正在等待网络流量。）

# api - 用于更新对象图的 REST API 设计

> ID：10091623
> 
> 赞同：13
> 
> 时间：2012-04-10T15:24:36.287
> 
> 标签：api, rest, object-graph

我正在设计一个 REST API，并正在寻找更新对象图的推荐最佳实践。我的问题最好用一个例子来解释，所以假设我有一个 GET 资源，如下所示：

URI：/人/123

这个 URI 返回一个像这样的对象图：

```
{
    "name":"Johnny",
    "country":{"id":100,"name":"Canada"},
    "likes":[
        {"id":5,"name":"Fruit"},
        {"id":100,"name":"Sports"}
    ]
} 
```

当允许 API 使用者更新此资源时，您希望如何通过 PUT 或 PATCH 更新对象？更新“name”属性非常简单，但我不确定“country”或“likes”，因为消费者只能更改与其他对象的关系而不能创建新对象。

这是请求更新的一种方法：

```
{
    "name":"Bob",
    "countryId":200
    "likeIds":[3,10,22]
} 
```

此更新会将资源更改为以下内容：

```
{
    "name":"Bob",
    "country":{"id":200,"name":"United States of America"},
    "likes":[
        {"id":3,"name":"Cars"},
        {"id":10,"name":"Planes"},
        {"id":22,"name":"Real Estate"}
    ]
} 
```

这种设计明确而明确地要求消费者只更新“Person”的“ID”，但我担心 PUT/PATCH 的对象图看起来与 GET 不同，这使得 API 难以学习和记忆。所以另一种选择是请求 PUT/PATCH 如下：

```
{
    "name":"Bob",
    "country":{"id":100},
    "likes":[
        {"id":3},
        {"id":10},
        {"id":22}
    ]
} 
```

这将产生与先前更新相同的更改，并且不会更改对象图。但是，API 使用者并没有明确说明只能更新“ID”。

在这种情况下，推荐哪种方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T15:50:07.523

在我看来，对于 GET 和 PUT 请求，您应该保持相同的结构。为什么？因为将 JSON/XML 数据映射到对象是很常见的，如果 JSON 模式始终相同，大多数（如果不是全部）执行实际映射的软件效果最好。

所以你的网络服务应该*接受*以下 JSON 代码：

```
{
    "name":"Joe",
    "country":{"id":200,"name":"United States of America"},
    "likes":[
        {"id":5,"name":"Fruit"}
    ]
} 
```

但是，它不必考虑国家名称，*可能*只关注国家 ID。

# sql - 如何对两个复杂的 SQL 查询执行 OUTER JOIN？

> ID：10091632
> 
> 赞同：0
> 
> 时间：2012-04-10T15:25:19.310
> 
> 标签：sql, sql-server-2005, outer-join

我有两个相对复杂的查询，我试图将它们合并到一个结果集中。

结果集 1：

```
SELECT  sq.question_id,     
    COUNT(ra.question_option_id) AS TotalAnswers

FROM    dbo.survey_question sq
    LEFT OUTER JOIN dbo.question_option qo
        ON sq.question_id = qo.question_id
    LEFT OUTER JOIN dbo.form_response_answers ra
        ON qo.question_option_id = ra.question_option_id
GROUP BY sq.question_id 
```

结果集 2：

```
SELECT  p.program_id, 
    p.pre_survey_form_id, 
    p.post_survey_form_id, 
    fq.form_id, 
    sq.question_id, 
    sq.question_text, 
    qo.question_option_id, 
    qo.option_text, 
    G.Total

FROM    dbo.program p
    LEFT OUTER JOIN dbo.form_question fq
        ON p.pre_survey_form_id = fq.form_id OR p.post_survey_form_id = fq.form_id
    LEFT OUTER JOIN dbo.survey_question sq
        ON fq.question_id = sq.question_id
    LEFT OUTER JOIN dbo.question_option qo 
        ON sq.question_id = qo.question_id
    LEFT OUTER JOIN (
        SELECT ra.question_id, ra.question_option_id, COUNT(*) AS Total
        FROM dbo.form_response_answers ra
        GROUP BY ra.question_option_id, ra.question_id 
    ) G
        ON G.question_id = sq.question_id AND G.question_option_id = qo.question_option_id

ORDER BY p.program_id, fq.form_id, sq.question_id, qo.question_option_id 
```

我需要将它们加入 question_id 匹配的行。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:32:37.787

第二个查询中缺少的第一个查询中唯一的附加信息是

```
COUNT(ra.question_option_id) AS TotalAnswers 
```

在`dbo.form_response_answers ra`桌子上。

因此，只需将此计数添加到您的选择中：

```
 (select count(*) from dbo.form_response_answers ra
         where qo.question_option_id = ra.question_option_id) as AS TotalAnswers 
```

如：

```
SELECT  p.program_id, 
        p.pre_survey_form_id, 
        p.post_survey_form_id, 
        fq.form_id, 
        sq.question_id, 
        sq.question_text, 
        qo.question_option_id, 
        qo.option_text, 
        G.Total,
        (select count(*) from dbo.form_response_answers ra
         where qo.question_option_id = ra.question_option_id) as AS TotalAnswers

FROM    dbo.program p
    LEFT OUTER JOIN dbo.form_question fq
    ON p.pre_survey_form_id = fq.form_id OR p.post_survey_form_id = fq.form_id
LEFT OUTER JOIN dbo.survey_question sq
    ON fq.question_id = sq.question_id
LEFT OUTER JOIN dbo.question_option qo 
    ON sq.question_id = qo.question_id
LEFT OUTER JOIN (
    SELECT ra.question_id, ra.question_option_id, COUNT(*) AS Total
    FROM dbo.form_response_answers ra
    GROUP BY ra.question_option_id, ra.question_id 
) G
    ON G.question_id = sq.question_id AND G.question_option_id = qo.question_option_id

ORDER BY p.program_id, fq.form_id, sq.question_id, qo.question_option_id 
```

* * *

编辑：您想要每个 sq.question_id 的总答案数。

所以，我应该插入：

```
(select count(ra2.question_option_id) 
   from dbo.question_option qo2
   LEFT OUTER JOIN dbo.form_response_answers ra2
       ON qo2.question_option_id = ra2.question_option_id
   where qo2.question_id = sq.question_id) as TotalAnswers 
```

现在，当然，这将重复多次，因为 Query 2 中的行数比 Query 1 多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:08:55.570

我不是专家，但不会：

```
SELECT  sq.question_id,     
    COUNT(ra.question_option_id) AS TotalAnswers INTO [#temp_table1]
...

SELECT  p.program_id, 
    p.pre_survey_form_id, 
    p.post_survey_form_id, 
    fq.form_id, 
    sq.question_id, 
    sq.question_text, 
    qo.question_option_id, 
    qo.option_text, 
    G.Total
INTO [#temp_table2]
... 
```

然后：

```
SELECT * FROM [#temp_table1] JOIN ON [#temp_table1].question_id = [#temp_table2].question_id 
```

把事做好？

# parser-generator - 使用 JFlex 和 CUP 的形式化需求规范语言的编译器构造

> ID：10091636
> 
> 赞同：1
> 
> 时间：2012-04-10T15:26:00.257
> 
> 标签：parser-generator, jflex, cup

我计划为需求规范语言构建编译器。我想出了使用 JFlex 作为词法分析器和 CUP 作为解析器的想法。

谁能让我知道可以将 JFlex 和 CUP 用于正式规范语言吗？所有文档和教程仅与编程语言有关。

任何可用于构建形式语言编译器的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:34:26.763

词法分析器和解析器生成器不关心您的语言是否是“传统计算机语言”，只关心您的语言具有它们可以处理的语法规范。

您获得这样一个语法规范的方式通常是为您的正式系统获取一个规范，并根据您选择的解析器生成器的约束对其进行弯曲。这种弯曲过程充其量是不方便的，最坏的情况是非常困难，这取决于解析器生成器的能力与您的正式语言规范所说的内容之间的差距。

我建议您检查您的“需求规范语言”形式语法，并据此决定您要使用哪个解析器生成器，以尽量减少您必须做的弯曲量。

# android - Sinatra + omniauth + Android，寻求建议

> ID：10091637
> 
> 赞同：1
> 
> 时间：2012-04-10T15:26:06.673
> 
> 标签：android, sinatra, omniauth

我正在开发一个我想使用 OmniAuth 的 Sinatra 应用程序。到目前为止，对于网络应用程序，我有类似的东西：

[http://codebiff.com/omniauth-with-sinatra](http://codebiff.com/omniauth-with-sinatra)

我希望网络应用程序可以通过使用 API 的 Android 手机使用，通过令牌进行身份验证。API 的开发似乎在这里很好地涵盖了：

[Sinatra - API - 身份验证](https://stackoverflow.com/questions/3479737/sinatra-api-authentication)

不清楚的是现在我可能会安排登录程序。大概是这样的：

1.  用户通过 Android 设备上的应用内按钮选择要使用的服务，例如 Twitter、FaceBook 等。
2.  Android 应用程序打开一个 web 视图以登录到 Web 应用程序。
3.  令牌以某种方式创建，存储在 Web 应用程序的数据库中，然后返回给 Android 应用程序，以便可以存储它并用于后续的 API 请求。

我不太清楚如何管理第 3 点 - 有人有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T15:16:57.893

由于似乎没有人有任何建议，这就是我到目前为止提出的建议。不过，我认为这不是很好。

我已向用户模型添加了一个 API 密钥，该密钥是在用户首次通过身份验证时创建的：

```
class User
  include DataMapper::Resource
  property :id,         Serial, :key => true
  property :uid,        String
  property :name,       String
  property :nickname,   String
  property :created_at, DateTime
  property :api_key,    String, :key => true
end

....

get '/auth/:name/callback' do
  auth = request.env["omniauth.auth"]
  user = User.first_or_create({ :uid => auth["uid"]}, 
                              { :uid => auth["uid"], 
                                :nickname => auth["info"]["nickname"], 
                                :name => auth["info"]["name"],
                                :api_key => SecureRandom.hex(20),
                                :created_at => Time.now })
  session[:user_id] = user.id
  session[:api_key] = user.api_key
  flash[:info] = "Welcome, #{user.name}"
  redirect "/success/#{user.id}/#{user.api_key}"
end 
```

如果授权有效，则将 api_key 提供给 Android 应用程序，该应用程序可能会将其存储在设备上的某个位置：

```
get '/success/:id/:api_key', :check => :valid_key? do
  user = User.get(params[:id],params[:api_key])
  if user.api_key == params[:api_key]
    {'api_key' => user.api_key}.to_json 
  else
    error 401
  end
end 
```

所有 API 调用都受到保护，如我原始帖子中的链接所示：

```
register do
  def check (name)
    condition do
      error 401 unless send(name) == true
    end
  end
end

helpers do
  def valid_key?
    user = User.first(:api_key => params[:api_key])
    if !user.nil?
      return true
    end
    return false
  end
end 
```

对于公共用途，我只允许 SSL 连接到服务器。欢迎任何改进建议。

# html-table - FindRow 与 span 属性内的文本值

> ID：10091641
> 
> 赞同：1
> 
> 时间：2012-04-10T15:26:17.033
> 
> 标签：html-table, watin

我正在使用 Watin 在 jQuery 表中查找行。然而，jQuery 将它的一些文本设置在 span 类的单元格中。Watin 在这些情况下不起作用。

```
WebBrowser.Current.Table("grid").FindRow("Liza", columnNum) 
```

上面的代码适用于：

```
<td>Liza</td> 
```

但不适用于：

```
<td><span>Liza</span></td> 
```

有什么线索可以调整 Watin 代码以使用 span 类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T04:38:57.577

您可能想尝试使用 Text 属性来识别

```
WebBrowser.Current.Table("grid").FindRowInOwnTableRows(t => t.Text.Trim()== rowidentifier, columnNum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:38:50.067

我有一些类似的问题，我的建议是创建一个可用于所有规范的帮助程序类，然后在其中添加帮助程序功能，例如 removeHtml、等待异步请求等。这些方法是一个很好的起点[http://www.dotnetperls.com/remove-html-tags](http://www.dotnetperls.com/remove-html-tags)

所以在你的测试中你可以做类似的事情

```
// where .NoHTML() is a extension method in your helper class
WebBrowser.Current.Table("grid").FindRow(value.NoHTML(), columnNum) 
```

这可能不是确切的答案，但我希望它有所帮助

# postgresql - 如何在 PostgreSQL 中存储一组查询，以便我可以轻松地再次运行它？

> ID：10091644
> 
> 赞同：4
> 
> 时间：2012-04-10T15:26:21.557
> 
> 标签：postgresql, pgadmin

我想将一组查询（多个 SQL 更新）保存为可以使用 pgAdmin3（PostgreSQL 9.1）执行的单个元素。

我知道我可以将单个 SELECTS 保存为视图，但是多个 UPDATE 查询呢？

例子：

```
BEGIN;
UPDATE ...;
UPDATE ...;
COMMIT; 
```

更新：我正在寻找的是使用 GUI 添加存储过程的分步指南，而不是运行创建它的 SQL 查询。

到目前为止，我遇到了两个问题`"New function..."`：返回类型是必需的，发现NULL是不可接受的，所以尝试了`integer`。另外，将类型设置为，`SQL`但我不知道在 SQL 选项卡中究竟要写什么，无论我尝试什么，确定按钮仍然被禁用，状态栏显示：请输入函数源代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:27:50.917

你知道或者你尝试过存储过程（嗯，类似存储过程的函数）？

[http://www.postgresql.org/docs/9.1/interactive/plpgsql-structure.html](http://www.postgresql.org/docs/9.1/interactive/plpgsql-structure.html)

调用它

```
select <name of function>(<param1>, <param2>) as result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:33:26.480

这是基本 SQL 存储过程的缺失指南，它确实返回 1。

*   右键单击函数并选择**新建函数...**
*   完整`name`的 as `my_procedure`, `return type`as `integer`, `language`as`sql`
*   选择**定义**选项卡并写入`SELECT 1;`
*   完毕

很高兴知道您是否可以创建不返回任何内容的查询。

# iphone - 使用参数而不保留它？

> ID：10091645
> 
> 赞同：0
> 
> 时间：2012-04-10T15:26:23.713
> 
> 标签：iphone, objective-c, retain

在这段代码中，如果`collection`在调用 的类中释放`init...`，会发生`self.title`什么`self.managedObjectContext`？难道我们不需要调用`.itemName`而`currentCollection`不是调用`collection`自身吗？

```
- (id)initWithCollection:(AACollection *)collection {
    if( (self = [super initWithNibName:@"AACollectionViewController" 
                                bundle:nil]) ) {
        currentCollection = [collection retain];
        self.title = collection.itemName;
        self.managedObjectContext = collection.managedObjectContext;
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:31:31.387

> self.title 或 self.managedObjectContext 会发生什么？

你在保留`collection`，所以不会发生任何不好的事情。也就是说，给你的字符串属性`copy`语义通常是一个好主意。例如，假设`title`是一个字符串属性，如果`collection.itemName`碰巧给了你一个可变字符串，你真的想制作一个不可变的副本，这样它就不会在你的眼皮子底下被改变（如果你只是引用可变字符串就可能发生这种情况细绳）。使用`copy`将为您做到这一点。

> 难道我们不必在 currentCollection 上调用 .itemName 而不是在集合本身上吗？

不会，`currentCollection`并且`collection`会指向同一个对象。保留的是*对象*，而不是指针。有些人可能会认为使用它`currentCollection`的风格更好，但无论哪种方式，它实际上都是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:31:38.543

一旦你做`currentCollection = [collection retain];`这两个`currentCollection`并且`collection`指向同一个对象。`.itemName`因此，在那一行之后，您使用哪个来访问该属性并不重要。

# wpf - 将 TranslateTransform.Y 动画到控件的高度（目的是将元素滑出视线）

> ID：10091649
> 
> 赞同：4
> 
> 时间：2012-04-10T15:26:37.890
> 
> 标签：wpf, xaml, blend, vsm

给定：控制 (x:Name="border1") 带有`VisualStateManager`. 控件的`RenderTransform`设置为`TransformGroup`包含 a 的 a `TranslateTransform`。

在`VisualState`“NotShown”中，应将`TranslateTransform`s`Y`属性设置`Value`为（至少）正在翻译的控件的高度（有效地使其不可见 -`ClipToBounds`设置为 true）。

这是 Blend 生成的代码：

```
<VisualState x:Name="NotShown">
    <Storyboard>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.Y)" Storyboard.TargetName="border1">
            <EasingDoubleKeyFrame KeyTime="0" Value="{Binding ActualHeight, ElementName=border1}"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>
</VisualState> 
```

编辑（2）：`{Binding ActualHeight, ElementName=border1}`根本不起作用。从 VS 而不是 Blend 运行时，有一个提示：

> 找不到目标元素的管理 FrameworkElement 或 FrameworkContentElement。绑定表达式：路径=实际高度；数据项=空；目标元素是“EasingDoubleKeyFrame”（HashCode=57957548）；目标属性是“值”（类型“双”）

为了这个动画的目的，我该如何正确设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T07:30:05.813

1.  您在 ControlTemplate 中，因此您必须使用`TemplateBinding`而不是`Binding`.
2.  `Binding`/仅在(是 a ，而不是 a )`TemplateBinding`上“起作用” 。所以你必须在代码隐藏中做你的动画。`FrameworkElement``EasingDoubleKeyFrame``DependencyObject``FrameworkElement`

# java - 为缓存创建全局（JVM）最大权重的简单方法？

> ID：10091654
> 
> 赞同：1
> 
> 时间：2012-04-10T15:26:58.810
> 
> 标签：java, guava

我想在我的应用程序中有几个 Cache 对象，我希望它们共享最大权重。因此，给定一些总权重 X，我希望所有缓存中的缓存项的权重总和不超过 X。我不知道预先需要多少缓存，也不需要缓存“公平”——如果一个被大量使用而其他人没有被大量使用，它应该能够占据全球最大值的最大份额。我不希望缓存丢失，因为它被认为已满，而其他缓存大多未使用，并且该空间可以由大量使用的缓存分配。这些将阻止我返回磁盘获取数据，因此低未命中率很重要。

我考虑过使用一个静态变量来保持总缓存权重的 Weigher 实现。然后 Weigher 将返回对象的重量，如果该重量小于总剩余空间，我将按原样返回重量。如果它超过剩余的总重量，我可以返回 Long.MAX_VALUE，这样该项目就不会被缓存。每个缓存都有一个很高的最大权重，可能是 Long.MAX_VALUE-1 ，这样只要我们可以为它计算/分配一个权重，就可以始终插入一个元素。

问题是我看不到任何方法可以知道缓存对象的总重量。我可以减少带有驱逐侦听器的总权重，但是当某些内容插入缓存时，我无法看到收到通知，缓存统计信息也不会在其数据中反映这一点。

是否有任何解决方法或我可以采取的方法来实现此功能？我有一个处理全局权重的自定义缓存实现，但缺少 Guava 缓存提供的许多功能，所以我想尽可能避免重新实现东西。虽然我不介意尝试将它连接到 Guava Cache，如果你能指出我的大致方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:54:20.420

Guava 缓存根本不相互交互——没有“全局”交互——但`softValues()`它是制作“内存敏感”缓存的传统方式，因为软引用由 GC 收集（通常在全局最近-used order），但仅在内存紧张时。

我什至不相信 Guava 缓存在*内部*会跟踪它们的总重量——我相信它们会在每个段的基础上跟踪总重量，但是跟踪总重量需要太多的锁定。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T02:34:11.707

我只看到一个解决方案：您可以将它们与某种复合键组合成一个缓存吗？

# ghostscript - Ghostscript PDF to PNG：输出始终为 595x842 (A4)

> ID：10091655
> 
> 赞同：5
> 
> 时间：2012-04-10T15:27:08.233
> 
> 标签：ghostscript

我尝试将 PDF 转换为 PNG，但输出图像始终为 A4，但源 PDF 非常大。这是我的命令：

```
-dNOPAUSE ^
-dBATCH ^
-dSAFER ^
-sDEVICE=png16m ^
-dFirstPage=1 ^
-sOutputFile="D:\PDF.png" ^
 "D:\PDF.pdf" ^
-sPAPERSIZE=a1 
```

我尝试了几个选项（-r、-g、-sDEFAULTPAPERSIZE），但都没有奏效。

如何强制输出图像尺寸？

PS：我的[PDF文件](http://www.ionline.pt/sites/default/files/ijornal_0917_10abr12_0.pdf)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T16:25:33.733

您链接到的 PDF 文件只有 1 页。这意味着您的命令行参数`-dFirstPage=1`没有任何影响。

此外，您的`-sPAPERSIZE=a1`参数不应该是最后一个（它在这里没有任何影响——因此 Ghostscript 从输入 PDF 的页面大小中获取默认大小，即 A4）。相反，它应该出现在`"D:\PDF.pdf"`（必须是最后一个）之前的某个地方。

看起来您想要一个大小为 A1 的 PNG，并且您的操作系统是 Windows（从您提供的部分命令行猜测）？

试试这个（它添加到命令行并将参数按正确的顺序排列，同时还使用技巧`-dPDFFitPage=true`将其缩短一点）：`-o`

```
gswin32c.exe ^
  -o "D:\PDF.png ^
  -sDEVICE=png16m ^
  -sPAPERSIZE=a1 ^
  -dPDFFitPage=true ^
   "D:\PDF.pdf" 
```

这应该会为您提供大小为 1684x2384 像素、72dpi 的 PNG（这是所有 Ghostscript 图像输出的内置默认值，如果未指定其他分辨率则使用）。对于分辨率和页面大小的不同组合，请添加`-rXXX`和`-gNNNxMMM`（而不是`-sPAPERSIZE=a1`）的变体，但一定要保留`-dPDFFitPage=true`....

如果您只想要不同的分辨率，您也可以保留`-sPAPERSIZE=a1`并添加`-r100`或`-r36`或。`-r200`请注意，与默认输出的 72dpi 相比，增加分辨率可能不会提高图像质量。这取决于嵌入在 PDF 页面中的图像的分辨率。但它肯定会增加文件大小......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-25T18:42:12.707

```
function pdf2png-mutool() {
    #: "mutool draw [options] file [pages]"
    # pages:  Comma separated list of page numbers and ranges (for example: 1,5,10-15,20-N), where
    #               the character N denotes the last page.  If no pages are specified, then all pages
    #               will be included.

    local i="$1"
    local out="${pdf2png_o:-${i:r}_%03d.png}"
    [[ "$out" == *.png ]] || out+='.png'

    command mutool draw -o "$out" -F png "$i" "${@[2,-1]}"
    #: '`-r 300` to set dpi'
} 
```

# database - 从报表中的多行收集插入的文本值

> ID：10091657
> 
> 赞同：0
> 
> 时间：2012-04-10T15:27:09.973
> 
> 标签：database, oracle-apex

我目前正在努力使用 Oracle Apex。我正在尝试创建一个使客户能够下订单的应用程序。因此，我创建了一个列出可用产品的报告。`'0' as "Quantity"`此外，报告包含一个显示文本框的列（对此的 SQL 查询很简单）。在这个文本男孩中，客户应该能够插入所需的数量。

我创建了一个屏幕截图，以便更容易关注我： ![在此处输入图像描述](../Images/7a5f140beb2946881f452150c791e46a.png)

客户填写表格后，“下订单”按钮将购买想要的物品。

我现在的问题是，如何读出用户在哪些文本框中填写了数字以及它属于哪个产品！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:33:44.663

一个更简单的解决方案是重新创建区域，但选择表单区域，然后选择表格表单区域，然后向导将帮助您处理 DML。但是您需要使用特定的表列才能使其工作。

为了更直接地回答您的问题 - 发布到服务器的报告中定义的输入项可以在 PL/SQL 中作为一组“全局数组”访问。这些在包 apex_application 中定义为 PL/SQL 表，名称为 g_f01 到 g_f50。

要确定将这些数组中的哪一个用于数量文本框，您可以查看页面的 html 以获取输入标记的 name 属性。如果是 f01，那么您将能够通过访问 apex_application.g_f01 中的每个位置或元素来处理结果。

要将输入与表格链接起来，您需要某种键。如果您使用向导来构建表格表单，那么所有这些令人头疼的问题都会为您解决。

# eclipse - ant scp 身份验证后挂起

> ID：10091660
> 
> 赞同：0
> 
> 时间：2012-04-10T15:27:18.780
> 
> 标签：eclipse, ant, scp, eclipse-indigo, jsch

我想使用 scp 将文件复制到远程服务器。我正在使用与 Eclipse Indigo 捆绑在一起的 Ant 1.8.2。此外，我尝试了各种 jsch-*.jar 文件（从 0.1.29 到 0.1.46）。在 0.1.30 之前，我收到一个错误，抱怨缺少 Logger。从 0.1.30 及更高版本开始，它没有显示任何错误，但在消息“身份验证成功（密码）。”之后挂起。

这就是定义：

```
<scp verbose="true"  
    remoteTodir="user@myserver.local:/mydir/"
    trust="true"
    password="mypwd"            
>       
    <fileset dir="${dist}">
    <include name="myfile/>
    </fileset> 
</scp> 
```

这是任务的输出：

```
 Buildfile: C:\workspace\build.xml uploadtostaging:
      [echo] Uploading to staging server via FTP ...
      [scp] Connecting to com.myserver.local:22
      [scp] Connecting to com.myserver.local port 22
      [scp] Connection established
      [scp] Remote version string: SSH-2.0-xlightftpd_release_3.7.1
      [scp] Local version string: SSH-2.0-JSCH-0.1.30
      [scp] SSH_MSG_KEXINIT received
      [scp] SSH_MSG_KEXINIT sent
      [scp] kex: server->client 3des-cbc hmac-sha1 none
      [scp] kex: client->server 3des-cbc hmac-sha1 none
      [scp] SSH_MSG_KEXDH_INIT sent
      [scp] expecting SSH_MSG_KEXDH_REPLY
      [scp] ssh_rsa_verify: signature true
      [scp] Permanently added 'com.myserver.local' (RSA) to the list of known hosts.
      [scp] SSH_MSG_NEWKEYS sent
      [scp] SSH_MSG_NEWKEYS received
      [scp] SSH_MSG_SERVICE_REQUEST sent
      [scp] SSH_MSG_SERVICE_ACCEPT received
      [scp] Authentications that can continue: password
      [scp] Next authentication method: password
      [scp] Authentication succeeded (password).

      (...) hangs virtually forever (> 10mins) 
```

# max-flow - 如果每个边缘容量增 加，最大流量的变化

> ID：10091661
> 
> 赞同：4
> 
> 时间：2012-04-10T15:27:25.427
> 
> 标签：max-flow

我需要找到一个线性算法（O（|V| + |E|），它可以在原始最大流量已知但每条边的容量增加 1 的图上找到最大流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:32:33.677

如果你知道 mincut 是什么，我想你可以为每个切割边缘添加一个到最大流量。

# javascript - 你如何在表单中做一个强制性的复选框？

> ID：10091662
> 
> 赞同：1
> 
> 时间：2012-04-10T15:27:28.233
> 
> 标签：javascript, jquery, html

我需要一个复选框，您可以在单击该框后从一个页面移动到另一个页面。鉴于您已阅读旁边的条款和条件链接，该复选框应该是必需的。

我只是半信半疑如何做到这一点，是这样的：

```
<input type="checkbox" value="confirm_prepay_terms" name="confirm_prepay_terms" align="middle" /> 
```

使用jQuery：

```
<script type="text/javascript" language="javascript">
$(document).ready(function() {
        if ($('form#prepay input:checkbox', 'confirm_prepay_terms').is(':checked') {
                return true;
        } else {
            $('#confirm_terms_hint').text('Please try again - you need to check the box to move on');
            $('#confirm_terms_hint').css('font-weight', 'strong');
            return false;
        }
}
</script> 
```

但目前，我根本无法查看页面上的复选框，所以也许我的 HTML 不正确？

希望你能帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:31:51.370

您的 HTML 很好 - 将显示一个复选框 - 但没有任何文本。您可以使用此标记添加一些：

```
<input type="checkbox" value="confirm_prepay_terms" name="confirm_prepay_terms" align="middle" >​Text here</input>​​​​​​​​​​​​​​​​​​​​​​​ 
```

在您的 JavaScript 中，您缺少结束语`)`：

```
if ($('form#prepay input:checkbox', 'confirm_prepay_terms').is(':checked') { 
```

应该

```
if ($('form#prepay input:checkbox', 'confirm_prepay_terms').is(':checked')) { 
```

和`)`最后一行：

```
}
</script> 
```

应该

```
})
</script> 
```

并且您的选择器不正确

```
$('form#prepay input:checkbox', 'confirm_prepay_terms') 
```

应该

```
$('form#prepay input:checkbox[name=confirm_prepay_terms]') 
```

这使用了[多属性选择器](http://api.jquery.com/multiple-attribute-selector/)

和

```
$('#confirm_terms_hint').css('font-weight', 'strong'); 
```

应该

```
$('#confirm_terms_hint').css('font-weight', 'bold'); 
```

`font-weight`没有`strong`价值（[见这里](https://developer.mozilla.org/en/CSS/font-weight)）...`bold`改用

在您的脚本中，您正在返回`true`，或者`false`代码没有被任何东西调用 - 一旦页面完成加载，它就会执行。如果要执行表单验证，请查看 jQuery 中的[.submit()方法。](http://api.jquery.com/submit/)一个例子是这样的：

```
$(document).ready(function() {
    $('#prepay').submit(function() {
        if ($('form#prepay input:checkbox[name=confirm_prepay_terms]')) {
                return true;
        } else {
            $('#confirm_terms_hint').text('Please try again - you need to check the box to move on');
            $('#confirm_terms_hint').css('font-weight', 'bold');
            return false;
        }
    });
}); 
```

这将阻止现在提交表单 - 当您返回`false`提交事件时。

[完整的工作示例在这里](http://jsfiddle.net/wvhpy/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T16:34:38.747

我认为您无需提供 CheckBox，只要他们在使用服务之前必须接受此条款和条件即可。

您可以自己做以下并减轻压力。

```
 - Provide a link to the terms and conditions for reading

   - Notify them that they have automatically accept this terms while proceeding. 
```

# java - 使用 RhinoScriptEngine，如何更改 javascript 关键字“this”所指的内容？

> ID：10091663
> 
> 赞同：0
> 
> 时间：2012-04-10T15:27:35.643
> 
> 标签：java, javascript, rhino

我正在 RhinoScriptEngine 中执行第三方 javascript 文件。该文件包含对“this”中方法的引用。即this.getField。编写该文件时期望“this”是 js Window 对象以外的某个对象。所以现在当我运行脚本时，我收到了这个错误：

在对象 [对象全局] 中找不到函数 getField

使用 Java ScriptEngine (Rhino)，如何更改“this”所指的对象？谢谢！

一般来说，我可以调用类似 scriptEngine.eval(script) 的东西。只要没有对某些全局“this”对象的引用，这就会很好。我想做类似的事情，但我可以在哪里定义“这个”是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-13T04:01:51.983

我知道这个答案是 3 年后的事了，但是如果有人找到他们的方式到这个页面寻找解决方案，那么以下代码对我有用：

```
ScriptEngineManager factory = new ScriptEngineManager();
ScriptEngine engine = factory.getEngineByName("JavaScript"); //Your Engine Name
engine.put("this", theObject); 
```

现在引用`this`将访问所需的对象。

# delphi - 如何从 TWebBrowser 获取 HTML 源代码

> ID：10091666
> 
> 赞同：13
> 
> 时间：2012-04-10T15:27:46.250
> 
> 标签：delphi, delphi-7, twebbrowser

如何从 WebBrowser 组件中获取源代码？

我想在 WebBrowser 组件上获取活动页面的源代码并将其写入备忘录组件。

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-10T15:40:38.960

您可以使用[`IPersistStreamInit`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682273%28v=vs.85%29.aspx)Interface 和[save](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694439%28v=vs.85%29.aspx)方法将 Webbrowser 的内容存储在 Stream 中。

```
Uses 
  ActiveX;

function GetWebBrowserHTML(const WebBrowser: TWebBrowser): String;
var
  LStream: TStringStream;
  Stream : IStream;
  LPersistStreamInit : IPersistStreamInit;
begin
  if not Assigned(WebBrowser.Document) then exit;
  LStream := TStringStream.Create('');
  try
    LPersistStreamInit := WebBrowser.Document as IPersistStreamInit;
    Stream := TStreamAdapter.Create(LStream,soReference);
    LPersistStreamInit.Save(Stream,true);
    result := LStream.DataString;
  finally
    LStream.Free();
  end;
end; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-18T19:25:00.617

这也很好用：

```
 uses MSHTML;

    function GetHTML(w: TWebBrowser): String;
    Var
      e: IHTMLElement;
    begin
      Result := '';
      if Assigned(w.Document) then
      begin
         e := (w.Document as IHTMLDocument2).body;

         while e.parentElement <> nil do
         begin
           e := e.parentElement;
         end;

         Result := e.outerHTML;
      end;
    end; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T15:40:25.607

这在 Embarcadero 论坛中已被多次询问和回答，并发布了大量代码示例。搜索档案。

它的要点是您`Navigate()`到所需的 URL 并等待`OnDocumentComplete`事件触发，然后是接口`QueryInterface()`的`Document`属性`IPersistStreamInit`并调用其`save()`方法。创建一个`TStream`对象实例，比如 a `TMemoryStream`，将其包装在一个`TStreamAdapter`对象中，然后将适配器传递给`save()`. 然后，您可以根据需要将其加载`TStream`到 中`TMemo`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-06T14:48:31.220

为什么不快速和肮脏：

```
OnNavigateComplete2()

Form1.RichEdit1.Text:=(WebBrowser1.OleObject.Document.documentElement.outerhtml); 
```

# java - Android：使用片段展开动画

> ID：10091667
> 
> 赞同：3
> 
> 时间：2012-04-10T15:27:49.390
> 
> 标签：java, android

我正在为我的项目使用这个示例
[https://github.com/Udinic/SmallExamples/tree/master/ExpandAnimationExample](https://github.com/Udinic/SmallExamples/tree/master/ExpandAnimationExample)
但是当我点击任何项目时，我崩溃了！
我的代码：

```
public class AccountContents extends Fragment {
private AccountItem[] rootContents;
private ListView ls1;
private CArrayAdapter adapter;
private Context context;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {

    final View V = inflater.inflate(R.layout.account_contents, container,
    false);
    context = getActivity().getApplicationContext();
    rootContents = fourshared.rootContents;
    adapter = new CArrayAdapter(context, rootContents);
    ls1 = (ListView) V.findViewById(R.id.AC_listView);
    ls1.setAdapter(adapter);
    ls1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, final View view,
            int position, long id) {

            View toolbar = V.findViewById(R.id.toolbar);
            ExpandAnimation expandAni = new ExpandAnimation(toolbar, 500);
            toolbar.startAnimation(expandAni);
        }
    });
    return V;
    }
} 
```

展开动画.java：

```
public class ExpandAnimation extends Animation {
private View mAnimatedView;
private LayoutParams mViewLayoutParams;
private int mMarginStart, mMarginEnd;
private boolean mIsVisibleAfter = false;
private boolean mWasEndedAlready = false;

  /**
* Initialize the animation
* @param view The layout we want to animate
* @param duration The duration of the animation, in ms
*/
public ExpandAnimation(View view, int duration) {

    setDuration(duration);
    mAnimatedView = view;
    mViewLayoutParams = (LayoutParams) view.getLayoutParams();

    // if the bottom margin is 0,
    // then after the animation will end it'll be negative, and invisible.
    mIsVisibleAfter = (mViewLayoutParams.bottomMargin == 0);

    mMarginStart = mViewLayoutParams.bottomMargin;
    mMarginEnd = (mMarginStart == 0 ? (0- view.getHeight()) : 0);

    view.setVisibility(View.VISIBLE);
}

@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    super.applyTransformation(interpolatedTime, t);

    if (interpolatedTime < 1.0f) {

        // Calculating the new bottom margin, and setting it
        mViewLayoutParams.bottomMargin = mMarginStart
                + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

        // Invalidating the layout, making us seeing the changes we made
        mAnimatedView.requestLayout();

    // Making sure we didn't run the ending before (it happens!)
    } else if (!mWasEndedAlready) {
        mViewLayoutParams.bottomMargin = mMarginEnd;
        mAnimatedView.requestLayout();

        if (mIsVisibleAfter) {
            mAnimatedView.setVisibility(View.GONE);
        }
        mWasEndedAlready = true;
    }
}
} 
```

对不起我的英语不好 ：（ 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:04:56.057

试试这个代码

获取上下文的第一个错误

```
context = V.getContext(); 
```

列表点击事件中的第二个

```
View toolbar =view.findViewById(R.id.toolbar); 
```

您更新的代码

```
public class AccountContents extends Fragment {
private AccountItem[] rootContents;
private ListView ls1;
private CArrayAdapter adapter;
private Context context;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) {

    final View V = inflater.inflate(R.layout.account_contents, container,
    false);
    context = V.getContext();
    rootContents = fourshared.rootContents;
    adapter = new CArrayAdapter(context, rootContents);
    ls1 = (ListView) V.findViewById(R.id.AC_listView);
    ls1.setAdapter(adapter);
    ls1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, final View view,
            int position, long id) {

            View toolbar = view.findViewById(R.id.toolbar);
            ExpandAnimation expandAni = new ExpandAnimation(toolbar, 500);
            toolbar.startAnimation(expandAni);
        }
    });
    return V;
    }
} 
```

# ruby - 为什么在安装 Ruby 1.9.3 时出现配置错误？

> ID：10091675
> 
> 赞同：1
> 
> 时间：2012-04-10T15:28:18.997
> 
> 标签：ruby

任何人都知道这个错误意味着什么？我正在尝试安装 Ruby 1.9.3

```
Error running ' ./configure --prefix=/Users/coreycallahan/.rvm/rubies/ruby-1.9.3-p125 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/coreycallahan/.rvm/usr ', please read /Users/coreycallahan/.rvm/log/ruby-1.9.3-p125/configure.log
There has been an error while running configure. Halting the installation.

$ cat /Users/coreycallahan/.rvm/log/ruby-1.9.3-p125/configure.log

[2012-04-10 11:10:33]  ./configure --prefix=/Users/coreycallahan/.rvm/rubies/ruby-1.9.3-p125 --enable-shared --disable-install-doc --with-libyaml --with-opt-dir=/Users/coreycallahan/.rvm/usr 
configure: WARNING: unrecognized options: --with-libyaml
checking build system type... i386-apple-darwin11.3.0
checking host system type... i386-apple-darwin11.3.0
checking target system type... i386-apple-darwin11.3.0
checking whether the C compiler works... no
configure: error: in `/Users/coreycallahan/.rvm/src/ruby-1.9.3-p125':
configure: error: C compiler cannot create executables
See `config.log' for more details 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:10:17.200

```
configure: error: C compiler cannot create executables 
```

您是否有权在您正在编译的目录中写入？

# css - CSS 在高对比度模式下到底发生了什么？

> ID：10091676
> 
> 赞同：14
> 
> 时间：2012-04-10T15:28:19.060
> 
> 标签：css, accessibility, high-contrast

谁能解释高对比度模式下 CSS 会发生什么？

[http://hardlikesoftware.com/weblog/2009/11/04/css-sprites-vs-high-contrast-mode/](http://hardlikesoftware.com/weblog/2009/11/04/css-sprites-vs-high-contrast-mode/)

> 在高对比度模式下，所有背景图像和颜色都将被忽略——替换为高对比度颜色，例如黑底白字或白底黑字。另一个问题是背景图像并不总是被打印出来。

**还有什么比这更多的吗？**

![高对比度模式下的登录表单](../Images/4a41b8d00f65bf2b4c6c02db6167d89d.png)

我的登录表单看起来不太理想，我正在尝试调查。

直到最近还有[https://www.google.com/search?q=axs+aol+accesibility+library](https://www.google.com/search?q=axs+aol+accesibility+library)但它似乎不再存在。

通常我看到有两种方法：

1.  检测 HCM（高对比度模式）并相应调整 CSS
2.  使 CSS 更通用，让它在每种模式下都能正常工作

无论哪种情况，我都非常想知道在**高对比度模式下**CSS 的变化会发生什么。

![各种浏览器中的 Google.com](../Images/46a6a048d42523c3063cdcec84bbdd47.png)

如您所见，行为会有所不同，因此您的专业知识将受到赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-01-19T16:09:05.267

```
@media screen and (-ms-high-contrast: active) {
    /* put your styling rules here */
} 
```

适用于 IE 和 MS Edge。在 Windows 10 中测试。

Chrome 不知道 Windows 10 是否处于高对比度模式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T10:12:25.527

您是否为表单元素定义了文本和背景的颜色？

以下是参考列表 Accessiweb 2.1 中的相关标准：[在每个网页上，是否正确使用了元素背景和字体颜色的 CSS 声明？](http://www.braillenet.org/accessibilite/referentiel-aw21-en/index.php#crit-10-5)（银级等于 WCAG 2.0 AA）
相关的 WCAG 2.0 失败技术是[F24：指定前景色而不指定背景色，反之亦然](http://www.w3.org/TR/WCAG20-TECHS/F24.html)

最近一篇关于对比模式的 WebAIM 帖子：[http ://webaim.org/blog/high-contrast/](http://webaim.org/blog/high-contrast/)

关于谷歌主页：谷歌以浏览器嗅探和大量修改页面而闻名，这取决于浏览器、是否登录他们的服务、是否激活了 JS。它甚至会使用 SPDY 协议而不是 HTTP（尽管这不会改变浏览器*本身*接收到的内容）。
我不会考虑这家公司的页面来比较浏览器；）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-06-27T13:22:01.900

如果您在 Web 应用程序中实现高对比度，请使用以下代码块进行黑白和黑白对比度选择。这将在 IE 中正常工作。

```
@media screen and (-ms-high-contrast: black-on-white) {
                /*
                Put your styling code.............
                */

            }
 @media screen and (-ms-high-contrast: white-on-black) {
                /*
                Put your styling code.............
                */

            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-10T08:14:28.943

我为我的笔记本电脑打开了高对比度模式。它会删除所有背景颜色和文本颜色，包括任何背景图像。边框和边框颜色不会被忽略。因此，如果您有一个绿色边框、蓝色背景、黄色文本 div，那么它将显示为：绿色边框、黑色背景、白色文本 div。

# tsql - TSQL DateTime 到 DateKey Int

> ID：10091680
> 
> 赞同：5
> 
> 时间：2012-04-10T15:28:24.490
> 
> 标签：tsql, sql-server-2008-r2, data-warehouse

在[Scaling Up Your Data Warehouse with SQL Server 2008 R2](http://msdn.microsoft.com/en-us/library/gg567300.aspx)中，作者建议使用 YYYYMMDD 格式的整数日期键作为事实表的聚集索引，以帮助优化查询速度。

将关键日期字段转换为日期键的最佳方法是什么？我觉得以下方法会起作用，但有点草率：

```
select Replace(CONVERT(varchar,GETDATE(),102),'.','') 
```

显然，我没有使用 getdate，而是表中将在我的聚合中使用的日期列。

首先，您建议如何进行这种转换？我的想法可以接受吗？

其次，有没有人使用日期键作为聚集索引取得了很大的成功？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T15:33:49.497

ISO long (112) 可以解决问题：

```
SELECT CONVERT(INT, CONVERT(VARCHAR(8), GETDATE(), 112)) 
```

出于某种原因，使用 ISO 112 将 getdate() 直接转换为 int 会得到 41008，但通过 VARCHAR 似乎可行 - 如果我想到更快的转换，我会更新。

**编辑**：关于仅 int 与 varchar 的辩论，这是我的发现（可在我的测试台和生产服务器上重复） Varchar 方法使用更少的 cpu 时间来进行 50 万次投射，但总体速度要慢一点 - 可以忽略不计，除非你处理数十亿行

**编辑 2**：修改测试用例以清除缓存和不同的日期

```
DBCC FREEPROCCACHE;
DBCC DROPCLEANBUFFERS;
SET STATISTICS TIME ON;
WITH    RawDates ( [Date] )
          AS ( SELECT TOP 500000
                        DATEADD(DAY, N, GETDATE())
               FROM     TALLY
             )
    SELECT  YEAR([Date]) * 10000 + MONTH([Date]) * 100 + DAY([Date])
    FROM    RawDates
SET STATISTICS TIME OFF 

(500000 row(s) affected)

 SQL Server Execution Times:
   CPU time = 218 ms,  elapsed time = 255ms.    
DBCC FREEPROCCACHE;
DBCC DROPCLEANBUFFERS;
SET STATISTICS TIME ON;
WITH    RawDates ( [Date] )
          AS ( SELECT TOP 500000
                        DATEADD(DAY, N, GETDATE())
               FROM     TALLY
             )
    SELECT  CONVERT(INT, CONVERT(VARCHAR(8), [Date], 112))
    FROM    RawDates
SET STATISTICS TIME OFF 

(500000 row(s) affected)

 SQL Server Execution Times:
   CPU time = 266 ms,  elapsed time = 602ms 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T15:56:35.267

转换为字符串然后再转换回来可能会非常慢。相反，您可以完全处理整数，如下所示：

```
Select Year(GetDate()) * 10000 + Month(GetDate()) * 100 + Day(GetDate()) 
```

在我的简短测试中，这比转换为字符串然后转换为 int 稍快。年月日函数各返回一个整数，所以性能稍好一些。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T16:15:04.063

除了使用 YYYYMMDD 格式创建 DateKey 之外，您还可以使用[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)函数来获取 0（即“由 0 表示的日期”）和您为其创建 DateKey 的日期之间的天数。

```
SELECT DATEDIFF(day,0,GETDATE()) 
```

缺点是您不能轻松查看值并确定日期，但您可以使用[DATEADD](http://msdn.microsoft.com/en-us/library/ms186819.aspx)函数来计算原始日期（我还看到这个技巧用于截断日期时间的时间部分）。

```
SELECT DATEADD(day, 41007, 0) 
```

*（注意：41007 是我在 2012 年 4 月 10 日运行时上面 DATEDIFF 函数的结果。）*

# jsf - 运行几天后，Tomcat 莫名其妙地丢失了应用程序范围的对象

> ID：10091683
> 
> 赞同：2
> 
> 时间：2012-04-10T15:28:34.840
> 
> 标签：jsf, tomcat, scope

我有一个非常奇怪的问题，我自己无法解决。我有一个正在开发的 JSF 应用程序，它部署在客户端站点的 Tomcat 服务器上。它工作得很好。但是，几天后，它开始表现得很奇怪，并且我在日志中收到了很多异常，例如以下内容：

```
SEVERE: Error Rendering View[/index.xhtml]
com.sun.facelets.tag.TagAttributeException: /menu.xhtml @21,53 test="${!empty bean.menuItems}" /menu.xhtml @21,53 test="${!empty bean.menuItems}": Error reading 'menuItems' on type com.blabla.bean.ApplicationBean
    at com.sun.facelets.tag.TagAttribute.getObject(TagAttribute.java:235)
    at com.sun.facelets.tag.TagAttribute.getBoolean(TagAttribute.java:79)
    at com.sun.facelets.tag.jstl.core.IfHandler.apply(IfHandler.java:49)
    at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
        ..... 
```

请注意，bean 指的`com.blabla.bean.ApplicationBean`是一个应用程序范围的 bean 类型的对象。上面的 xhtml 代码在**c:if**内，这就是我使用**$**表示法的原因。如前所述，应用程序在前 2-3 天运行良好，仅在几天后日志中才会出现这些异常，并且它们仅与应用程序范围内的唯一 bean 相关。通常，当我遇到此类异常时，我会检查 'menuItems' 字段的 getter 是否在 bean 中，但它存在，如果不存在，则应用程序将根本无法运行，并且在 2 天内无法正常运行，然后碰撞。

我还遇到了与我的应用程序中的自定义资源包相关的异常：

```
Caused by: javax.faces.FacesException: Could not load resource bundle for name 'messages': Can't find bundle for base name com.blabla.messages.CustomResourceBundle, locale de 
```

同样，捆绑包是在应用程序生命周期的前 2-3 天加载的，但随后突然发生此异常。

有没有人遇到过类似的情况？谁能指出我在哪里寻找问题的正确方向，因为我在这里完全没有想法。

先感谢您。

# cocos2d-x - 错误：未在此范围内声明“ccc4”

> ID：10091685
> 
> 赞同：1
> 
> 时间：2012-04-10T15:28:43.927
> 
> 标签：cocos2d-x

我按照教程“第 2 章 - 如何添加精灵”

并得到：帮助！错误：未在此范围内声明“ccc4”

没有这个字符串：“CC_BREAK_IF(!CCLayerColor::initWithColor(ccc4(255, 255, 255, 255)));" 效果很好

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:50:02.647

你应该试试这个：

```
CC_BREAK_IF(! CCLayerColor::initWithColor( ccc4f(255, 255, 255, 255) ) ); 
```

# streaming - 从网络服务器流式传输数据，尝试使用 vb.net 和 cgi

> ID：10091686
> 
> 赞同：0
> 
> 时间：2012-04-10T15:29:07.470
> 
> 标签：streaming

我需要将数据从 Web 服务器流式传输到客户端。数据是收集并存储在服务器上的位置数据。客户端将单击 html 页面上的按钮以“选择加入”以开始接收数据。此数据永无止境，并且至少有一个客户端需要 24-7 接收数据，并尽可能少地中断。流式传输的数据将是特定于客户端的，因为每个客户端都不会收到完全相同的数据。

我已经通过套接字完成了几个多线程 tcp 服务器，而 websockets 是我想攻击它的方式，但要求是它必须在 ie9 中工作。

最初的要求是这是一个 vb.net cgi 可执行文件 - 但在测试期间，我无法“使用”来自 vb.net 可执行文件的流，直到应用程序完成 - 就像它甚至无法刷新标准输出一样虽然我专门使用了 console.out.flush()。因此，如果这不是一个可行的选择，并且我可以用事实来支持这一点，那么我可以改变这个要求。

我还阅读了很多关于使用第三方服务器流式传输数据的信息，例如 Orbit 和 APE，我认为是其中的几个，但要求是 1 个服务器 - 网络服务器。不需要其他硬件。

根据我的发现，我很确定 vb.net CGI 不是理想的解决方案，但它是可行的还是我需要放弃该解决方案并转向更新的技术 ISAPI？任何想法或建议，即使它们只是为我指明了正确的方向，也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:29:37.930

你可能会走几条路。

如果您会使用 C# .Net，那么您可能会研究 Silverlight 解决方案。但它需要在浏览器中安装插件（如 Flash）。这里的好处是，您可以通过普通套接字从服务器纯实时发送数据。同时 Silverlight 使用 .Net，因此它可以共享一些代码。这有助于开发过程。它在不同浏览器中的工作方式也是相同的。

您可能会看到使用带有 Java 后端的 Java Applet 的类似解决方案（甚至可以是 .Net，但同样，当两者使用相同的语言时更容易开发）。

另一种选择是在前端使用 WebSockets，但正如您所知，IE9 及以下版本不支持它（IE10 承诺支持），Opera 也不支持它。后端可以按照您喜欢的方式完成。但是请记住，WebSockets 使用帧，对于恒定但很小的数据包效率不高，因为如果您发送 10 个字节，那么它将创建 2-12 个字节的帧，以及平均 40 个字节的 TCP 数据包头。

要支持较旧的浏览器，您可以查看长轮询，但它不如 websockets 可靠。

同样重要的是计算将使用您的系统的数据量和用户的大致数量。根据计算，您将获得关于它的真实程度以及需要处理什么服务器的大致信息。

# javascript - JS：图像 onLoad 调整大小...如何？

> ID：10091687
> 
> 赞同：1
> 
> 时间：2012-04-10T15:29:10.607
> 
> 标签：javascript, html

JavaScript。我想创建一个简单的脚本，它将使用 css 宽度和高度调整加载图像的大小。这是代码示例：

```
 <img style="width:200px; height:200px" 
src="http://doc.jsfiddle.net/_downloads/jsfiddle-desktop-1440x900-a.png" onLoad="    
    //need resize code here
    "/>​ 
```

我正在尝试以原始大小比例调整图像大小。但我无法访问原始大小。当我想通过它选择原始尺寸时，`this.height`它会给我 css 尺寸。在哪里可以找到原始价值？以及如何改变大小？`this.style.height = '200px'`？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:36:39.530

看看[这个小提琴](http://jsfiddle.net/frMjh/)。唯一的问题是`naturalWidth/Height`Opera 和 IE < 版本 9（根据[dottoro](http://help.dottoro.com/ljavxihg.php)）不支持这些属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:40:57.010

在 CSS 中使用`max-width`and怎么样？`max-height`

```
<img style="max-width:200px; max-height:200px" src="http://doc.jsfiddle.net/_downloads/jsfiddle-desktop-1440x900-a.png"/>​ 
```

[jsFiddle 示例](http://jsfiddle.net/6KfWB/1/)

# ios - NSArray中的内存泄漏，长时间跟踪

> ID：10091690
> 
> 赞同：0
> 
> 时间：2012-04-10T15:29:30.963
> 
> 标签：ios

下面 self.listOfCustDetail 和 self.listOfCustomer 存在内存泄漏

```
-(void) calCustList {
    NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString  *documentsDirectory = [paths objectAtIndex:0];  
    NSString  *plistPath = [NSString stringWithFormat:@"%@/%@", documentsDirectory,@"customer.plist"];

    self.listOfCustDetail = [[[NSMutableArray alloc] init] autorelease];
    self.listOfCustomer = [[[NSMutableArray alloc] init] autorelease];
    self.customers =  [[[NSMutableDictionary alloc] initWithContentsOfFile:plistPath] autorelease];

    [self.listOfCustomer removeAllObjects];
    [self.listOfCustDetail removeAllObjects];

    [self.listOfCustomer addObject:@"新紀錄"];
    [self.listOfCustDetail addObject:@""];

    for (id key in self.customers) {
        NSString *s = [NSString stringWithFormat:@"%@,%@,%@,%@", [[self.customers objectForKey:key] objectAtIndex:0], [[self.customers objectForKey:key] objectAtIndex:1], [[self.customers objectForKey:key] objectAtIndex:2], [[self.customers objectForKey:key] objectAtIndex:3]];
        [self.listOfCustomer addObject:key];
        [self.listOfCustDetail addObject:s];
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:48:29.540

您的属性是如何定义的？他们保留吗？如果他们确实保留了，那么您所显示的代码段中就没有实际错误。

该方法多久调用一次？如果经常调用它，您可以使用自定义`NSAutoreleasePool`.

在新初始化的数组上也不需要以下两行：

```
[self.listOfCustomer removeAllObjects];
[self.listOfCustDetail removeAllObjects]; 
```

您是否显示实际的源代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T12:06:45.137

我想建议，在 Project 中启用 ARC（自动引用计数），因为您不需要释放数组

# asp.net - SQL Windows 身份验证

> ID：10091694
> 
> 赞同：1
> 
> 时间：2012-04-10T15:29:35.223
> 
> 标签：asp.net, sql, security, login, windows-authentication

我有一个使用 IIS 设置的本地测试环境。我正在使用下面的连接字符串在 ASPX 页面的代码隐藏中使用我的 windows auth 连接 c#。我收到 [PCNAME]/ASPNET 登录失败的错误。为什么当我指定我的连接字符串以使用我的登录时，用户名 ASPNET 试图登录？

```
user id=[UID];password=[PASS];server=[LOCALSERVER];database=db_specialOps;Trusted_Connection=yes 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:36:10.680

受信任的身份验证使用正在执行该过程的用户的凭据。如果指定为 yes，则连接字符串中的用户名和密码将被忽略。

在这种情况下，ASPNET 用户帐户是运行该进程的用户，因此这是用于连接到 SQL Server 的帐户。

检查，另一个 SO question 解决了这个问题。

[使用 Trusted_Connection=true 和 SQL Server 身份验证时，这会影响性能吗？](https://stackoverflow.com/questions/1642483/sql-server-connection-string-trusted-connection-true-issue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:40:46.587

删除`Trusted_Connection=yes`连接字符串的一部分。它告诉 sql 客户端库使用 Windows 身份验证以当前进程的 Windows 身份连接到 sql 服务器。在 ASP.NET 的情况下，即`[PCNAME]/ASPNET`. 这就是您看到该错误消息的原因。

如果您想使用 sql auth，只需像您一样提供用户名和密码 - 不包括该`Trusted_Connection=yes`部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:11:48.483

Windows 身份验证的连接字符串：

```
connectionString="Server=MyServer;Database=MyDb;Trusted_Connection=Yes" 
```

或者

```
connectionString="Initial Catalog=MyDb;Data Source=MyServer;Integrated Security=SSPI;" 
```

无用户/通行证

* * *

使用用户/密码进行 SQL 身份验证的连接字符串

```
connectionString="Server=MyServer; Database=pubs; User Id=MyUser; password= P@ssw0rd"
        providerName="System.Data.SqlClient" 
```

另请参阅此问题，可能对您有所帮助： [Connect to SQL Server using windows authentication and specific account](https://stackoverflow.com/questions/5065972/connect-to-sql-server-using-windows-authentication-and-specific-account)

# android - Android 布局：在 Action Bar 下适合 View

> ID：10091695
> 
> 赞同：4
> 
> 时间：2012-04-10T15:29:44.290
> 
> 标签：android, android-layout

我将操作栏用作半透明叠加层（如 Google 地球应用程序），使用：

```
<item name="android:windowActionBarOverlay">true</item> 
```

我所有的全屏高度视图现在都延伸到操作栏下方，但我只希望其中一个这样做。所以我的问题是，有没有办法自动适应视图，使它们不会在操作栏覆盖层下方延伸？我宁愿不必使用自定义 dp 设置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T12:44:50.297

由于操作栏处于覆盖模式，因此无法自动适应视图。您需要将操作栏高度设置为视图的 marginTop。[您可以在此处](https://developer.android.com/training/basics/actionbar/overlaying.html#TopMargin)参考 android 文档

# asp.net-mvc-3 - mvc3 async controller

> ID：10091696
> 
> 赞同：0
> 
> 时间：2012-04-10T15:29:50.493
> 
> 标签：asp.net-mvc-3, asynccontroller

I have a view which has one textbox and one submit button. I want untill the user completes the textbox and presses the submit button to execute some queries somehow async.

How can i achive this? with AsyncController?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T18:24:47.607

No, you do not need an async contoller for this, a normal controller should do. What you will need to do is make an AJAX request from the page to the normal controller.

Async controllers are really for advanced thread management on the server, not on the client / web browser. An async controller allows server threads to be freed up during long-running tasks, such as network or disk intensive activity.

# coldfusion-8 - Coldfusion中的xml属性计数问题

> ID：10091706
> 
> 赞同：0
> 
> 时间：2012-04-10T15:30:39.550
> 
> 标签：coldfusion-8

我的代码是

```
<cfxml variable="str">
  <root>
<T id="1" name="jaggu"></T>
<T id="2" name="jaggu2"></T>
</root>
</cfxml>

<cfset MyXMLDoc = xmlParse(str)>
<cfset packages = xmlSearch(MyXMLDoc, '/root/T')>

    <cfoutput>
        #structcount(packages[1])#
    </cfoutput> 
```

我得到 0 但标签 T 中有 2 个属性

有什么方法可以计算 xmlattributes

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:35:48.313

问题是你在询问错误的信息。您要的是第一个匹配中的结构数，实际上是 0。如果您想要 T 标签上的属性数，则需要获取`xmlAttributes`节点的计数，如下所示：

```
#structcount(packages[1].xmlAttributes)# 
```

# postgresql - 带有选择的插入不明确的plpgsql查询错误

> ID：10091707
> 
> 赞同：0
> 
> 时间：2012-04-10T15:30:49.677
> 
> 标签：postgresql, plpgsql

所以我得到了这个错误，我把别名放在`num_documento`(codigo "a.num_documento") 但 Postgres 说不`num_documento`存在。

```
ERROR: la referencia a la columna �num_documento� es ambigua 
Where: PL/pgSQL function "insertar_carga_giros"           
line 145 at sentencia SQ??? 
```

--查询函数insertar_carga_giros

```
insert into bdsinc."codigo"(num_documento,id_tip_dcto,id_deudor) 
select distincta.num_documento,b.id_tip_dcto,b.id_deudor 
from bdsinc."carga" a
left join bdsinc."tb_deudor" b 
on a.num_documento=b.num_dcto 
and a.id_tip_dcto=b.id_tip_dcto
where b.id_deudor is not null and validacion=1; 
```

如何在 PostgreSQL 中使用 select join 进行插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:51:16.723

这个`INSERT`说法看起来不错。您可能`num_documento`在函数中定义了一个与列名冲突的变量名。也许是一个`IN`参数？
尝试重命名该变量。

假设你实际上有：

```
select distinct a.num_documento,b.id_tip_dcto,b.id_deud; 
```

# css - IE中DIV随机截断

> ID：10091708
> 
> 赞同：0
> 
> 时间：2012-04-10T15:30:56.203
> 
> 标签：css, internet-explorer, html

我在 Internet Explorer 中随机切断背景 div 时遇到问题...

这是它的外观，取自 webkit/chromium 浏览器。 ![它应该是什么样子（Webkit/Chromium 浏览器）](../Images/da6fab3aac3461e300c4e761e2ea8cc1.png)

这是 Internet Explorer 认为它应该看起来的样子...... ![网站目前在 Internet Explorer 浏览器中的外观](../Images/e6dc6096f7c410bf0da8ef7d0a8e9592.png)

该网页可在[http://beta.surrealholidays.com](http://beta.surrealholidays.com)找到。任何有关如何解决此问题的反馈将不胜感激。

HTML 源代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link href="/css/alt.css" rel="stylesheet" type="text/css">
<meta name="robots" content="all">
<meta name="author" content="surrealholidays.com">
<meta name="robots" content="index,follow">
<meta name="SKYPE_TOOLBAR" content ="SKYPE_TOOLBAR_PARSER_COMPATIBLE"/>
<link rel="shortcut icon" href="http://www.surrealholidays.com/images/logo.ico">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="/js/prototype.js"></script>
<script type="text/javascript" src="/js/scriptaculous.js?load=effects,builder"></script>
<script type="text/javascript" src="/js/lightbox.js"></script>
<script src="/js/flash.js" type="text/javascript"></script>
<link rel="stylesheet" href="/css/lightbox.css" type="text/css" media="screen" />

<title>Welcome to Surreal Holidays</title>
</head>
<body class="oneColFixCtr">
<div id="bannerph">
<div id="bannerint">
  <div id="logoph" align="left">
    <p><img src="/images/logos/newlogo.png" width="204" height="99" alt="Site Logo"></p>
  </div>
  <div id="callus" align="right">
    <p><br>
      Call Us:</p>
    <h1>0845 003 5043</h1></div>
  <p>&nbsp;</p>
</div>
</div>
<div id="page">
<div id="links">
<a href="/">Homepage</a> &nbsp; &nbsp;<a href="/destinations">Luxury Destinations</a>&nbsp; &nbsp;<a href="/tours">Private Tours</a>&nbsp; &nbsp;<a href="/terms/">Terms & Conditions</a>&nbsp; &nbsp;<a href="/enquire">Enquire</a>&nbsp; &nbsp;<a href="/news">News</a>&nbsp; &nbsp;<a href="/contact">Contact Us</a></div>
<div id="ct">

<div id="navig">
  <div class="c2 c1" id="navi_direc">
    <div align="left">Homepage &gt;</div>
  </div>
  <div id="navi_newsl"> <a href="/newsletter/index.html">Subscribe</a> to our Latest Offers</div>
</div>
<div id="img">
  <p><img src="/images/mainstory.jpg" width="995" height="400">&nbsp;</p>
</div>
<div id="content">
<div id="hp_welcome">
<h2 align="left">Private Luxury Escorted Tours in Thailand </h2>
<p align="left">&nbsp;</p>
<p align="left" class="c2"><strong>At Surreal Holidays, you can really feel the passion for Thailand. From the first moment you contact our experienced team, you will be amazed by the in-depth local knowledge and deep love of the country and its people that you encounter. Not surprising! Some of us were born and raised in Thailand before moving to the UK. You will find we have a unique ability to understand how travellers from the UK can experience the best Thailand has to offer. No ordinary travel company, Surreal Holidays can tailor a holiday especially for you. Along the way, your experience will be enhanced by our high levels of customer service and thoughtful personal touches.</strong></p>
<p class="c2">&nbsp;</p>
<h2 align="left" class="c3"><strong>Bespoke Holidays to Thailand</strong></h2>
<p align="left" class="c2"></p>
<p align="left" class="c2"><strong>Our founder's inspiration: "..like you, when I travel, I use all my senses to enhance the experience. This often leads to a "surreal" feeling, as though the holiday is a dream like state where the strange and bizarre juxtaposition with the calm and beautiful. Nowhere epitomises this more than Thailand, my homeland. Whether you are looking for an inspirational island hopping itinerary or romantic wedding and honeymoon locations, soft adventure activities or cultural experiences, you need look no further. Thailand offers much more than just a place to relax on a beach. You can discover unique flora and fauna, stunning marine parks, and breathtaking scenery at every turn. Indeed, there really is something for everyone in our Amazing Thailand."... Runci Weeden</strong></p>
<p align="left" class="c2">&nbsp;</p>
<h2 align="left" class="c3"><strong>Unique Holidays to Thailand</strong></h2>
<p align="left" class="c2"></p>
<p align="left" class="c2"><strong>To find out more information on our Escorted Tour Holidays, including Nature Tours, Cultural Tours or Adventure Tours to Thailand, call 0845 003 5043 and speak to our friendly team.</strong></p>
<p align="left" class="c2">&nbsp;</p>
</div>
<div id="col2">
<div id="hp_ftcol2off">
<h3 align="center"><strong>Our Latest Offers</strong></h3>
<p align="center">&nbsp;</p>
<p align="center">
<h3>Offers Coming Soon!</h3>
</p>
<p align="center">&nbsp;</p>
<h3 align="center">Layana Resort and Spa<br>
  From £89 pppn
</h3>
<p>&nbsp;</p>
</div>
<div id="hp_ftcol2foll">
  <h3>Follow Us</h3>
  <p align="center" class="c2"><a href="https://www.facebook.com/SurrealHolidays"><img src="/images/social_icons/facebook.png" alt="Find us on Facebook" width="64" height="64" border="0"></a><a href="https://twitter.com/#!/surrealholidays"><img src="/images/social_icons/twitter.png" alt="Follow us on Twitter" width="64" height="64" border="0"></a><a href="https://plus.google.com/u/0/115488031855843811543/posts"><img src="/images/social_icons/google.png" alt="Find us on Google Plus" width="64" height="64" border="0"></a><a href="http://www.youtube.com/surrealholidays"><img src="/images/social_icons/youtube.png" alt="Watch us on Youtube" width="64" height="64" border="0"></a><a href="http://vimeo.com/surrealholidays"><img src="/images/social_icons/vimeo.png" alt="Watch us on Vimeo" width="64" height="64" border="0"></a><br>
    <br>
  </p>
</div>
<div id="hp_ftcol2news">
<h3><strong>Latest News</strong></h3>
<h3>20 March 2012</h3>
  <h3><u><strong>Welcome To Our New Website!</strong></u>
    <br>
    We have now launched our brand new website, for an improved compatability for Tablet Devices, as well as a much faster loading speed for a enhanced browsing experience. For more information about this update, <br>
    <u>Click Here</u>.</h3>
<p>&nbsp;</p>
<p align="center" class="c2"><br>
  <br>
</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="f_tr">
<br>
Tel: 0845 003 5043 (Local Rates from a BT Landline) , 01628 685 550<br>
<strong>&copy; Surreal Holidays Ltd. 2009-2012 All Rights Reserved.</strong><br>
<div id="f_php">
  <div id="f_ph1"><img src="/images/logos/logo-amazing.png" width="145" height="45" alt="Thailand"></div>
<div id="f_ph2">
  <p>Surreal Holidays is the Trading Name of Surreal Holidays Ltd. Company Number: 06690344<br>
    <a href="/disclaimer">Disclaimer</a> | <a href="/privacypolicy">Privacy Policy</a> | <a href="/copyright">Copyright</a></p>
</div>
<div id="f_ph3">
<img src="/images/logos/logo-atol.png" width="45" height="45" alt="A"><img src="/images/logos/logo-atta.png" width="45" height="45" alt="** PLEASE DESCRIBE THIS IMAGE **"></div>
</div>
</div>
</div> <!-- Closing Tags For #Footer -->
</div>
</body>
</html> 
```

这是样式表：

```
@charset "utf-8";
/* CSS Document */
a:link {
    color: #fff;
    text-decoration: none;
}
a:visited {
    text-decoration: none;
    color: #fff;
}
a:hover {
    text-decoration: underline;
    color: #fff;
}
a:active {
    text-decoration: none;
    color: #fff;
}

body {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    margin: 0;
    padding: 0;
    text-align: center;
    background: url(/images/background.jpg) no-repeat center center fixed;
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
}

#page {
    width:995px;
    margin: 0 auto;
    padding: 0px;

}

#ct {
    background-image:url(/images/bg.png);
    overflow:visible;
}

#bannerph {
    width: 100%;
    background-image:url(/images/banner.png)    
}
#bannerint {
    width: 995px;
    height: 140px;
    padding: 10px;
    margin: 0 auto;

}
#logoph {
    width: 300px;
    float: left;
    padding: 10px;
}

#callus {
    width: 500px;
    float: right;

}
#links {
    background-image: url(/images/logos/li.jpg);
    background-repeat: repeat-x;
    color: #fff;
    vertical-align: middle;
    padding: 10px;
    margin-bottom: -2px;
    }

#linkblock{
    padding: 10px;
}

#navig {
    height: 30px;
    width: 995px;
    padding: 10px;
}

#navi_direc{
    float:left;
    width: 500px;
    font-size: 12px;
    padding-left: 10px;
    padding-right: 10px;
}

#navi_direc a {
    color: #000
}

#navi_newsl{
    float: right;
    width: 449px;
    font-size: 12px;
}

#content {
    height: auto;
    background-image: url(/images/mainbggrad.jpg)
    font-size: 12px;
    overflow:hidden;
}
#content h2 {
    font-size: 18px;
    color: #7d6543;
    font-weight: bold;
    line-height: 22px;
    margin-top: 10px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 5px;
}
#content h3 {
    font-size: 14px;
    font-weight: normal;
    color: #fff;
    line-height: normal;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 5px;
    margin-left: 0px;
}
#content h4 {
    font-size: 13px;
    font-weight: normal;
    line-height: normal;
    color: #8A5D3C;
    margin-top: 5px;
    margin-right: 0px;
    margin-bottom: 5px;
    margin-left: 0px;
}
#content h5 {
margin: 0px;
font-size: 12px;
font-weight: normal;
line-height: normal;
color: #8A5D3C;
padding-left: 10px;
padding-right: 10px;
}
#col2 {
    line-height: normal;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 5px;
    margin-left: 5px;
    font-size: 12px;
    color: #FFF;
}
#content p {
    line-height: normal;
    margin-top: 0px;
    margin-right: 10px;
    margin-bottom: 5px;
    margin-left: 5px;
    font-size: 12px;
    color: #000;
}
#hp_welcome{
    width: 550px;
    float:left;
    padding: 10 px;
    color: #7d6543;
}
#hp_ftcol2off {
    width:380px;
    float:right;
    margin: 10px 10px 0 10px;
    background-image: url(/images/logos/news.jpg);
    background-repeat: repeat-y;
    border-radius: 10px;
}
#hp_ftcol2news {
    width:380px;
    float:right;
    margin: 10px 10px 10px 10px;
    background-image: url(/images/logos/news.jpg);
    background-repeat: repeat-y;
    border-radius: 10px;
    color: #FFF;
}

#hp_ftcol2foll {
    width:380px;
    float:right;
    margin: 10px 10px 10px 10px;
    background-image: url(/images/logos/news.jpg);
    background-repeat: repeat-y;
    border-radius: 10px;
    color: #FFF;
}
#hp_ftcol2off table tr td {
    font-family: Trebuchet MS, Arial, Helvetica, sans-serif;
}
#container_hp{
    width: 995px;
    height: auto;
    overflow:auto;
}
#f_tr{
    height:auto;
}
#f_php{
    width: 995px;
    height: 60px;
}
#f_ph1{
    width:325px;
    float:left;
}
#f_ph2{
    width:340px;
    float:left;
    }
#f_ph3{
    width:325px;
    float:left;
}
#footer {
    font-size: 12px;
    color: #fff;
    background-image: url(/images/logos/ftr.jpg);
    background-repeat: repeat-x;
    height: 150px;
    padding-bottom: -5px;
}

#callus {
    padding-right: 30px;
}

#navi_newsl a:link {
    color: #000;
    text-decoration: none;
}
#navi_newsl a:visited {
    text-decoration: none;
    color: #000;
}
#navi_newsl a:hover {
    text-decoration: underline;
    color: #000;
}
#navi_newsl a:active {
    text-decoration: none;
    color: #000;
}
.oneColFixCtr #bannerint #callus h1 {
    color: #7d6543;
}
.oneColFixCtr #bannerint #callus p {
    color: #7d6543;
}
#warning {
    background-image:url(/images/warning%20bar.png);
    height: 50px;
    background-repeat:no-repeat;
}
#intwarn {
    margin: 13px;
}

#intwarn p {
    color: #fff
}
#warning #intwarn p {
    font-size: 20px;
}
.oneColFixCtr #page #content table {
    text-align: left;
    font-size: 12px;
}
.oneColFixCtr #page #content #col2 #hp_ftcol2news {
    color: #FFF;
}
.oneColFixCtr #page #content #col2 #hp_ftcol2news p b {
    color: #FFF;
    text-decoration: underline;
} 
```

如果有人对我如何阻止这些 div 过早切断（bannerph 和 ct）提出建议，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:10:59.017

了解显示此问题的 ie 浏览器的确切版本会有所帮助。我在 ie 7 和 firefox 中测试了该站点，但无法复制该问题。在 ie7 中，div 没有被切断，但你也没有不透明度。我建议稍微详细说明一下细节，因为这可能是您遇到的许多兼容性问题。到目前为止，所有评论和答案都是猜测，因为我们没有确定根本原因所需的所有信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:42:43.890

div 溢出的默认值是可见的，因此在 CSS 中声明它不会有任何效果，除非您从其他地方覆盖它。

尝试使用溢出：隐藏；在 #ct 和 #col2 上，因为这应该清除右侧的浮动列。

# dependency-injection - 如何使用 Ninject 在子类中创建实例？

> ID：10091709
> 
> 赞同：3
> 
> 时间：2012-04-10T15:30:56.560
> 
> 标签：dependency-injection, inversion-of-control, ninject

我正在学习如何将 nInject 用于我正在开发的新应用程序，并且我创建了以下示例代码，可以将其复制/粘贴到一个简单的控制台应用程序中。它成功返回了 IFoo 的一个实例，但我对此有疑问。

我将如何修改代码以让 FooManager 类创建 Foo 对象的实例而不执行“新建”。内核是否也必须注入？但是，如果内核被注入并且我将行更改为 read `var foo = _kernel.Get<IFoo>()`，那不是引入了服务定位器反模式吗？

```
namespace IOCTest
{
    class Program
    {
        static void Main(string[] args)
        {
            using (IKernel kernel = new StandardKernel(new StandardModule()))
            {
                // do something with the kernal
                var mgr = kernel.Get<IFooManager>();
                var foo = mgr.GetById(1);
            }
        }
    }

    public class StandardModule : Ninject.Modules.NinjectModule
    {
        public override void Load()
        {
            Bind<IDatabase>()
                .To<Database>()
                .InTransientScope();

            Bind<IFooManager>()
                .To<FooManager>()
                .InTransientScope();
        }
    }

    //******************************************************

    public interface IDatabase
    {
        object[] GetScalar(int id);
    }

    public class Database : IDatabase
    {
        public object[] GetScalar(int id)
        {
            return new object[] { "RowName" };
        }
    }

    //******************************************************

    public interface IFooManager
    {
        IFoo GetById(int id);
    }

    public class FooManager : IFooManager
    {
        private IDatabase _db;

        public FooManager(IDatabase db) { _db = db; }

        public IFoo GetById(int id)
        {
            var results = _db.GetScalar(id);
            var foo = new Foo();   // <-- HOW DO I ELIMINATE THIS DEPENDENCY?
            foo.Name = results[0].ToString();
            return foo;
        }
    }

    //******************************************************

    public interface IFoo
    {
        string Name { get; set; }
    }

    public class Foo : IFoo
    {
        public string Name { get; set; }
    }

    //******************************************************
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T18:49:08.147

首先你必须考虑 Foo 的目的。这是某种数据容器还是某种服务？

在第一种情况下，您的代码就像它一样完美。数据容器没有依赖关系，不应由 IoC 容器创建。

在第二种情况下，阅读有关 Ninject.Extensions.Factory 的信息。

[http://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/](http://www.planetgeek.ch/2011/12/31/ninject-extensions-factory-introduction/)

[https://github.com/ninject/ninject.extensions.factory/wiki](https://github.com/ninject/ninject.extensions.factory/wiki)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:42:52.327

有几种方法可以消除这种依赖。您可以执行与数据库依赖项相同的操作并使用构造函数注入。您可以进行属性注入（[https://github.com/ninject/ninject/wiki/Injection-Patterns](https://github.com/ninject/ninject/wiki/Injection-Patterns)）。另一种方式，也许是您正在寻找的，将是服务位置。为此，您可以更新 FooManager ctor 以要求 IKernel。这将自动解决，然后您可以使用传入的内核来获取 Foo.

```
public class FooManager : IFooManager
{
    private IDatabase _db;
    private IKernel _kernel;

    public FooManager(IDatabase db, IKernel kernel) { _db = db; _kernel = kernel;}

    public IFoo GetById(int id)
    {
        var results = _db.GetScalar(id);
        // var foo = new Foo();   // <-- HOW DO I ELIMINATE THIS DEPENDENCY?
        var foo = kernel.Get<IFoo>(); // Like this perhaps
        foo.Name = results[0].ToString();
        return foo;
    }
} 
```

# asp.net - 编辑模式下的 GridView BoundField 长字符串

> ID：10091710
> 
> 赞同：1
> 
> 时间：2012-04-10T15:30:57.047
> 
> 标签：asp.net, gridview

我的 GridView 中的一个 BoundField 有一个很长的字符串，没有空格。我想正确显示它。根据类似的[问题。](https://stackoverflow.com/questions/8587538/gridview-boundfield-break-long-string) 我使用了代码

```
<asp:TemplateField HeaderText="ICD9" ItemStyle-Width="75px" SortExpression="ICD9" >
                        <ItemTemplate>
                            <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
                                <%# Eval("ICD9")%>
                                </div>
                        </ItemTemplate>
                    </asp:TemplateField> 
```

虽然它可以工作，但是当我切换到编辑模式时。该列无法编辑。文本框不显示。

谢谢。 ![图片](../Images/f5e321e1dd1e8cdbe0fb815c697b25e3.png)

请看第二列，它可能有一个长字符串。（现在它是“None”）。它不能被编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:40:17.213

在你的内部`<TemplateField>`，你还需要一个`<EditItemTemplate>`：

```
<asp:TemplateField HeaderText="ICD9" ItemStyle-Width="75px" SortExpression="ICD9" >
    <ItemTemplate>
        <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
            <%# Eval("ICD9")%>
        </div>
    </ItemTemplate>
    <EditItemTemplate>
        <div style="width: 75px; overflow: hidden; white-space: nowrap; word-wrap: break-word;">
            <asp:TextBox ID="TextBox1" runat="server"
            Text='<%# Bind("ICD9") %>'></asp:TextBox>
        </div>
    </EditItemTemplate>
</asp:TemplateField> 
```

这样，当您`GridView`进入编辑模式时，它就知道要为该字段呈现什么。

如果无法看到您的其他字段，它们可能正在工作，因为它们只是`<BoundField>`s，默认情况下会具有这种行为（在 TemplateField 中，您必须明确定义编辑和非编辑模式）。

您可以查看这个（有点旧的）教程以获取有关 TemplateFields 的更多信息：[在 GridView 控件中使用 TemplateFields](http://www.asp.net/web-forms/tutorials/data-access/custom-formatting/using-templatefields-in-the-gridview-control-cs)

# vbscript - 如何将带有空格和引号的命令作为单个参数传递给 CScript？

> ID：10091711
> 
> 赞同：5
> 
> 时间：2012-04-10T15:30:59.120
> 
> 标签：vbscript, wsh

我正在使用 CScript 运行 VBScript 文件，我需要将命令行传递给脚本，其中参数包含空格和引号。整个命令需要作为一个参数传递给脚本。例如：

```
C:\> CScript myscript.vbs //Nologo "cmd.exe /c "dir && del /q *.txt"" 
```

请注意，上面的特定命令行只是一个示例，但它确实触及了我正在尝试做的事情（即传递一个涉及运行 cmd.exe 的命令行）。但是，我正在尝试解决一般情况。

问题是 CScript 似乎在试图确定引号在哪里打开和关闭时感到困惑。至少有时。

以下脚本可能有助于解释。它只是输出传入的参数，因为它看到它们：

```
Dim count
For count = 0 To WScript.Arguments.Count-1
    WScript.Echo CStr(count) & " = " & WScript.Arguments.Item(count)
Next 
```

通常，它按预期工作：

```
C:\> cscript myscript.vbs //Nologo "1 2 3"
0 = 1 2 3 
```

但是当引用参数中有引号时，情况会发生变化：

```
C:\> cscript myscript.vbs //Nologo "1 "2 3""
0 = 1 2
1 = 3 
```

我知道在上面的示例中，关于每个引号是打开还是关闭参数存在引入歧义，所以接下来我尝试转义内部引号，以便命令处理器将它们视为文字字符串：

```
C:\> cscript myscript.vbs //Nologo "1 ^"2 3^""
0 = 1 ^2
1 = 3 
```

嗯，看起来只有当 shell 为你做 globbing 等时才有效。我怀疑 cscript`^`是否像 cmd.exe 那样理解为转义字符。

在双引号命令中使用单引号（例如“cmd.exe /c 'dir && cd \'”）可以正确解析为单个参数，但由于使用 /c 参数调用 cmd.exe 的情况下不起作用, 单引号是不够的。例如：

```
C:\> cmd /c 'dir && cd \'
''dir' is not recognized as an internal or external command,
operable program or batch file. 
```

我想我可以遍历脚本中的所有参数并将它们连接回一个长字符串，但我会丢失它们提供的内部引号和上下文。或者，也许我确实在双引号参数中使用了单引号，并将它们映射回脚本中的双引号。但是，如果意图*是*我不考虑的某些未来案例的单引号怎么办？由于我正在尝试解决一般情况，因此我无法做出决定。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:41:09.277

您似乎正在尝试在参数中描述值。我建议使用引号以外的东西并加回引号。例如使用波浪号：

```
Dim count
For count = 0 To WScript.Arguments.Count-1
    WScript.Echo CStr(count) & " = " & replace(WScript.Arguments.Item(count),"~",chr(34))
Next 
```

通过：

```
cscript myscript.vbs //Nologo "1 ~2 3~"
0 = 1 "2 3" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T23:05:24.780

你有两个选择。

第一个很简单——使用克拉 (^) 转义引号。

```
C:\> CScript myscript.vbs //Nologo "cmd.exe /c ^"dir && del /q *.txt^"" 
```

The second option is to use a different delimiter. In a command like this, the shell uses a space as a delimeter between parameters. But the shell allows others like semicolons, commas, equal signs, and tabs. By implementing one of these, you wouldn't need to surround parameters with quotes because spaces would no longer break your command line.

# c++ - 命名管道阻塞

> ID：10091713
> 
> 赞同：2
> 
> 时间：2012-04-10T15:31:06.023
> 
> 标签：c++, named-pipes

我目前正在学习命名管道，并且正在尝试围绕这个概念开设一个课程。这是我的主要测试：

```
NamedPipe first("firstpipe"); // Stores the pipe name
NamedPipe second("secondpipe");
first.createPipe(); // Creates the pipe: mkfifo(mPipeName.c_str(), S_IRUSR | S_IWUSR)

second.createPipe();
pid = fork();
if (pid == 0)
{
    first.openPipeOut(); // my class open with O_WRONLY 
    first << "first : test of send first " << "Hello !"; // write to the file descriptor
    // My problem is here 
    std::string stringtest;
    second.openPipeIn(); // this is opening with O_RDONLY   
    second >> stringtest; // overload to read
    std::cout << stringtest << std::endl; // showing result
}
else
{
    std::string stringtest;
    first.openPipeIn(); //opening with O_RDONLY
    first >> stringtest; // overload to read
    std::cout << stringtest << std::endl; // showing result

    // my problem is here :
    second.openPipeOut(); // opening with O_WRONLY
    second << "Second test" << " Hi !"; // overload to write
} 
```

当我不添加此测试时，测试效果很好：

```
std::string stringtest;
second.openPipeIn();   //this is opening with O_RDONLY   
second >> stringtest;   // overload to read
std::cout << stringtest << std::endl; // showing result 
```

和这个

```
second.openPipeOut(); // opening with O_WRONLY
second << "Second test" << " Hi !"; // overload to write 
```

如果这样做，我的程序将被阻止，甚至不会显示第一个链结果。有什么我错过的吗？

# javascript - 在加载之前动态更改 html 文本 - 可能吗？

> ID：10091721
> 
> 赞同：0
> 
> 时间：2012-04-10T15:31:35.900
> 
> 标签：javascript, jquery, html

我有很多流程图，点击流程图的每个块必须打开一个问题。基本上，问题页面具有相同的模板，只是标题发生了变化。现在我认为为每个问题创建一个 html 文件是荒谬的，因为模板将保持完全相同。一旦用户点击流程图的一个块，有没有办法改变问题页面的标题然后加载它？

我想用jquery来做，我只是jquery的初学者。我知道如何在页面显示或加载后通过附加/替换元素来更改文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:42:33.860

您可以每次即时更换它：

```
var template = "{header}<p>Some text</p>";
$('#output').append(template.replace('{header}', 'Some header'));
$('#output').append(template.replace('{header}', 'New header')); 
```

你可以在这里试试：http: [//jsfiddle.net/ykmtF/](http://jsfiddle.net/ykmtF/)

# jquery - Jquery对话框在一定时间后显示关闭按钮

> ID：10091725
> 
> 赞同：0
> 
> 时间：2012-04-10T15:31:50.923
> 
> 标签：jquery

如何在某些时间过去后显示关闭按钮，我尝试了 settimeout 但它不起作用。有人可以提供一个基本示例以在一定时间后显示关闭按钮。

谢谢

**编辑：**
这就是我做自定义按钮的方式，因为有人问我这个

```
 var myButtons = {
                'Close': function () {
             },
             'Do not show this again': function () {
                    $.ajax({
                        type: "POST",
                        url: pagename,
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (response) {
                            if (response.d == true) {
                            }
                        }
                    });
                }
             };

$("#div").html("").dialog({ modal: true, resizable: false, width: 830, height: 580, show: 'slow', title: '', open: function (event, ui) { $(".ui-dialog-titlebar", $("#div").parent()).hide(); }, buttons: myButtons }); 
```

这就是我做自定义按钮的方式。我有 mybuttons 变量的原因是因为我使用条件语句并基于此我在对话框打开时显示不同的按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:39:25.997

试试下面的东西，

[**演示**](http://jsfiddle.net/skram/BU2TM/1/)

```
var $dialog = $('Your Dialog Div'); // Your Dialog Div

//Get Dialogs Parent and find the close button. 
//jQuery assigns .ui-dialog-titlebar-close class to the close X (a tag)
var $dialogCloseBtn = $dialog.parent().find('.ui-dialog-titlebar-close'); 

//hide the close button
$dialogCloseBtn.hide();

//show the close button after 10 seconds
setTimeout(function () {
    $dialogCloseBtn.fadeIn(100);
}, 10000); 
```

**假设：**上面的代码假设您想要隐藏/显示您在对话框标题中看到的 jQuery 默认关闭按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:36:25.377

如果对话框有一个带有 的关闭按钮，请`id=close_dialog_button`给它一个`display:none`样式，然后使用以下代码：

```
$( "#dialog_div" ).dialog({
   open: function(event, ui) {
    setInterval(function() {
        $("#close_dialog_button").show();
    }, 10000);
 }
}); 
```

# java - 将许多有界整数打包成一个大整数

> ID：10091727
> 
> 赞同：0
> 
> 时间：2012-04-10T15:31:57.437
> 
> 标签：java, integer, decode, encode, pack

我必须在数据库中存储数百万个条目。每个条目由一组唯一的整数标识符标识。例如，一个值可以由一组 10 个整数标识符来标识，每个标识符都小于 1 亿。

为了减小数据库的大小，我想到了使用单个 32 位整数值进行以下编码。

```
标识符 1：0 - 100,000,000
标识符 2：100,000,001 - 200,000,000
.
.
.
标识符 10：900,000,001 - 1,000,000,000

```

我正在使用 Java。我可以编写一个简单的方法来编码/解码。用户代码不必知道我在获取/存储期间正在编码/解码。

我想知道的是：实现这种编码/解码的最有效（最快）和推荐的方法是什么。一个简单的实现将执行大量的乘法/减法。

是否可以使用移位（或按位运算）并选择不同的分区大小（每个段的大小仍然必须接近1亿）？

我愿意接受任何建议、想法，甚至是完全不同的方案。我想利用整数标识符必然会大幅减少存储大小而不会显着影响性能这一事实。

编辑：我只是想补充一点，我浏览了这个论坛上发布的一些答案。一个常见的解决方案是拆分每个标识符的位。如果我为每个标识符使用 2 位，总共 10 个标识符，那么我的标识符范围就会受到严重限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:37:58.540

您可以将分段大小设为 27 位，从而为您提供 32 * 128 M 段。而不是 42 * 100 M

```
int value = 
int high = value >>> 27;
int low = value & ((1L << 27) -1); 
```

与使用数据库的成本相比，这种计算可能微不足道，这毫无价值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:38:52.363

目前尚不清楚您实际想要做什么，但*听起来*您想要一个整数值，每个位表示具有特定属性，并应用[位掩码](http://en.wikipedia.org/wiki/Mask_%28computing%29)。

一个 32 位整数可以保存 32 个不同的属性，64 位 64 等。要拥有更多，您需要多个整数列。

如果不是这样，我不知道您所说的“编码”是什么意思。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:45:24.717

听起来您想将 0...100m 的多个整数值打包成一个 32 位整数？除非您省略了可以更有效地存储这些 0...100m 值的重要信息，否则根本没有办法做到这一点。

ceil(log2(100m)) = 27bit，这意味着您只有 5 个“备用位”。

# jquery - JQuery Textarea val - 创建动态

> ID：10091728
> 
> 赞同：0
> 
> 时间：2012-04-10T15:32:00.173
> 
> 标签：jquery

我正在创建一个这样的文本区域：

```
var visit_detailSpan = $("<span class='visit'>Visits: (optional)</span>");             
var visit = $("<textarea rows='4' cols='40' class='visit' id='visit'></textarea>"); 
```

现在，我正在尝试获取上述文本区域的值：当用户单击提交按钮时：但我得到`undefined`

```
var submitVisit = function(){  

            $.getJSON(
                options.ServiceUrl,
                {                    
                   ......,
                   ......,
                   visit: $('#visit').val()   //<<<<<<
                },
               function (response) { ... }                      

             );

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:40:18.217

如果访问 =

```
var visit = $("<textarea rows='4' cols='40' class='visit' id='visit'></textarea>") 
```

或者即使是

```
var visit = $("<textarea />").attr({ id: 'visit', rows: 4, cols: 40 }).addClass("visit") 
```

无论哪种方式，您已经将变量`visit`设置为 HTML Textarea 元素的 jQuery 对象，因此获取召回值就像

```
visit.val(); 
```

每当您将元素作为 jquery 对象分配给变量时，您不需要调用该元素 id，如果您确实通过 id 调用它并获得未定义，那么您实际上并没有将动态 html 发布到 dom但是或者没有正确建立id。

如果在您建立变量之后，快速浏览一下`console.log(visit)`应该会在您的控制台中产生类似以下内容：

```
[<textarea id=​"visit" rows=​"4" cols="40" class="visit" >​&lt;/textarea>​] 
```

如您所见，`visit`是您的元素，所以我再次重申，此时无需通过 id 调用该元素。

# c# - 从脚本文件创建本地数据库？

> ID：10091730
> 
> 赞同：0
> 
> 时间：2012-04-10T15:32:09.377
> 
> 标签：c#, sql, visual-studio-2010

我是整个数据库的新手。我想知道如何使用下面的这两个文件将信息导入 C# 中的本地数据库。

**如果有人可以创建数据库并将其通过电子邮件发送给我，我将非常感激！**

mssql.create.sql

```
if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Requests_Tb_Consumer]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Requests] DROP CONSTRAINT FK_Tb_Requests_Tb_Consumer
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Transactions_Tb_Consumer]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Transactions] DROP CONSTRAINT FK_Tb_Transactions_Tb_Consumer
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_TB_Offers_Tb_Product]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[TB_Offers] DROP CONSTRAINT FK_TB_Offers_Tb_Product
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Requests_Tb_Product]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Requests] DROP CONSTRAINT FK_Tb_Requests_Tb_Product
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Transactions_Tb_Product]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Transactions] DROP CONSTRAINT FK_Tb_Transactions_Tb_Product
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_TB_Offers_Tb_Supplier]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[TB_Offers] DROP CONSTRAINT FK_TB_Offers_Tb_Supplier
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Transactions_Tb_Supplier]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Transactions] DROP CONSTRAINT FK_Tb_Transactions_Tb_Supplier
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[TB_Offers]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[TB_Offers]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Consumer]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Consumer]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Product]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Product]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Requests]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Requests]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Supplier]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Supplier]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Transactions]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Transactions]
GO

CREATE TABLE [dbo].[TB_Offers] (
    [Supp_ID] [int] NOT NULL ,
    [Prod_ID] [int] NOT NULL ,
    [Price] [money] NULL ,
    [Quantity] [float] NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Consumer] (
    [Con_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Name] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [City] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Product] (
    [Prod_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Name] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [MU] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Requests] (
    [Con_ID] [int] NOT NULL ,
    [Prod_ID] [int] NOT NULL ,
    [Price] [money] NULL ,
    [Quantity] [float] NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Supplier] (
    [Supp_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Name] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [City] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Transactions] (
    [Tran_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Supp_ID] [int] NOT NULL ,
    [Con_ID] [int] NOT NULL ,
    [Prod_ID] [int] NOT NULL ,
    [Price] [money] NULL ,
    [Quantity] [float] NULL 
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[TB_Offers] WITH NOCHECK ADD 
    CONSTRAINT [PK_TB_Offers] PRIMARY KEY  CLUSTERED 
    (
        [Supp_ID],
        [Prod_ID]
    )  ON [PRIMARY] ,
    CONSTRAINT [CK_TB_Offers] CHECK ([Price] > 0.00),
    CONSTRAINT [CK_TB_Offers_1] CHECK ([Quantity] >= 0)
GO

ALTER TABLE [dbo].[Tb_Consumer] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Consumer] PRIMARY KEY  CLUSTERED 
    (
        [Con_ID]
    )  ON [PRIMARY] 
GO

ALTER TABLE [dbo].[Tb_Product] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Product] PRIMARY KEY  CLUSTERED 
    (
        [Prod_ID]
    )  ON [PRIMARY] 
GO

ALTER TABLE [dbo].[Tb_Requests] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Requests] PRIMARY KEY  CLUSTERED 
    (
        [Con_ID],
        [Prod_ID]
    )  ON [PRIMARY] ,
    CONSTRAINT [CK_Tb_Requests] CHECK ([Price] > 0.00),
    CONSTRAINT [CK_Tb_Requests_1] CHECK ([Quantity] >= 0)
GO

ALTER TABLE [dbo].[Tb_Supplier] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Supplier] PRIMARY KEY  CLUSTERED 
    (
        [Supp_ID]
    )  ON [PRIMARY] 
GO

ALTER TABLE [dbo].[Tb_Transactions] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Transactions] PRIMARY KEY  CLUSTERED 
    (
        [Tran_ID]
    )  ON [PRIMARY] ,
    CONSTRAINT [CK_Tb_Transactions] CHECK ([Price] > 0.00),
    CONSTRAINT [CK_Tb_Transactions_1] CHECK ([Quantity] > 0)
GO

ALTER TABLE [dbo].[TB_Offers] ADD 
    CONSTRAINT [FK_TB_Offers_Tb_Product] FOREIGN KEY 
    (
        [Prod_ID]
    ) REFERENCES [dbo].[Tb_Product] (
        [Prod_ID]
    ),
    CONSTRAINT [FK_TB_Offers_Tb_Supplier] FOREIGN KEY 
    (
        [Supp_ID]
    ) REFERENCES [dbo].[Tb_Supplier] (
        [Supp_ID]
    )
GO

ALTER TABLE [dbo].[Tb_Requests] ADD 
    CONSTRAINT [FK_Tb_Requests_Tb_Consumer] FOREIGN KEY 
    (
        [Con_ID]
    ) REFERENCES [dbo].[Tb_Consumer] (
        [Con_ID]
    ),
    CONSTRAINT [FK_Tb_Requests_Tb_Product] FOREIGN KEY 
    (
        [Prod_ID]
    ) REFERENCES [dbo].[Tb_Product] (
        [Prod_ID]
    )
GO

ALTER TABLE [dbo].[Tb_Transactions] ADD 
    CONSTRAINT [FK_Tb_Transactions_Tb_Consumer] FOREIGN KEY 
    (
        [Con_ID]
    ) REFERENCES [dbo].[Tb_Consumer] (
        [Con_ID]
    ),
    CONSTRAINT [FK_Tb_Transactions_Tb_Product] FOREIGN KEY 
    (
        [Prod_ID]
    ) REFERENCES [dbo].[Tb_Product] (
        [Prod_ID]
    ),
    CONSTRAINT [FK_Tb_Transactions_Tb_Supplier] FOREIGN KEY 
    (
        [Supp_ID]
    ) REFERENCES [dbo].[Tb_Supplier] (
        [Supp_ID]
    )
GO 
```

mssql.insert.sql

```
DELETE FROM TB_TRANSACTIONS;
DELETE FROM TB_OFFERS;
DELETE FROM TB_REQUESTS;
DELETE FROM TB_PRODUCT;
DELETE FROM TB_CONSUMER;
DELETE FROM TB_SUPPLIER;

--Suppliers
INSERT INTO TB_SUPPLIER VALUES('Joe','Madison')
INSERT INTO TB_SUPPLIER VALUES('Herman','Madison')
INSERT INTO TB_SUPPLIER VALUES('Bernstein','Madison')
INSERT INTO TB_SUPPLIER VALUES('Smith','Madison')

INSERT INTO TB_SUPPLIER VALUES('Redfield','Wausau')
INSERT INTO TB_SUPPLIER VALUES('Godman','Wausau')
INSERT INTO TB_SUPPLIER VALUES('James','Wausau')
INSERT INTO TB_SUPPLIER VALUES('Wells','Wausau')
INSERT INTO TB_SUPPLIER VALUES('Wolf','Wausau')

INSERT INTO TB_SUPPLIER VALUES('Thomas','Chicago')
INSERT INTO TB_SUPPLIER VALUES('Traiger','Chicago')

INSERT INTO TB_SUPPLIER VALUES('Strong','Stevens Point')
INSERT INTO TB_SUPPLIER VALUES('Deitel','Stevens Point')
INSERT INTO TB_SUPPLIER VALUES('Troelsen','Stevens Point')

INSERT INTO TB_SUPPLIER VALUES('Stronger','London')
INSERT INTO TB_SUPPLIER VALUES('Wolfgang','London')

INSERT INTO TB_SUPPLIER VALUES('Jones','Madison')
INSERT INTO TB_SUPPLIER VALUES('Jaques','Paris')

--Consumers
INSERT INTO TB_CONSUMER VALUES('Steel','New York')
INSERT INTO TB_CONSUMER VALUES('Hammer','New York')
INSERT INTO TB_CONSUMER VALUES('Iron','New York')

INSERT INTO TB_CONSUMER VALUES('Hoffer','Wausau')
INSERT INTO TB_CONSUMER VALUES('Gray','Wausau')
INSERT INTO TB_CONSUMER VALUES('Fisher','Wausau')
INSERT INTO TB_CONSUMER VALUES('Franklin','Wausau')
INSERT INTO TB_CONSUMER VALUES('Smith','Wausau')
INSERT INTO TB_CONSUMER VALUES('Schafer','Wausau')
INSERT INTO TB_CONSUMER VALUES('Johnson','Wausau')

INSERT INTO TB_CONSUMER VALUES('Jacob','Chicago')
INSERT INTO TB_CONSUMER VALUES('Metzker','Chicago')
INSERT INTO TB_CONSUMER VALUES('Boggs','Chicago')

--Products
INSERT INTO TB_PRODUCT VALUES('Computer','Pieces')
INSERT INTO TB_PRODUCT VALUES('Auto','Pieces')
INSERT INTO TB_PRODUCT VALUES('TV','Pieces')
INSERT INTO TB_PRODUCT VALUES('Milk','Gallon')
INSERT INTO TB_PRODUCT VALUES('Oil','Gallon')
INSERT INTO TB_PRODUCT VALUES('Orange','Lb')
INSERT INTO TB_PRODUCT VALUES('Truck','Pieces')
INSERT INTO TB_PRODUCT VALUES('Airplane','Pieces')

--Offers
INSERT INTO TB_OFFERS VALUES(1,1,799.99,100)
INSERT INTO TB_OFFERS VALUES(1,2,7899.99,10)
INSERT INTO TB_OFFERS VALUES(1,3,199.99,1000)
INSERT INTO TB_OFFERS VALUES(1,4,1.99,10000)
INSERT INTO TB_OFFERS VALUES(1,5,1.09,100000)
INSERT INTO TB_OFFERS VALUES(1,6,0.99,100)

INSERT INTO TB_OFFERS VALUES(2,1,795.99,100)
INSERT INTO TB_OFFERS VALUES(2,2,7897.99,10)
INSERT INTO TB_OFFERS VALUES(2,3,191.99,1000)
INSERT INTO TB_OFFERS VALUES(2,4,1.89,10000)
INSERT INTO TB_OFFERS VALUES(2,5,1.09,100000)
INSERT INTO TB_OFFERS VALUES(2,6,0.99,100)
INSERT INTO TB_OFFERS VALUES(2,7,11.09,100000)
INSERT INTO TB_OFFERS VALUES(2,8,100.99,100)

INSERT INTO TB_OFFERS VALUES(3,1,789.99,100)
INSERT INTO TB_OFFERS VALUES(3,6,0.99,100)

INSERT INTO TB_OFFERS VALUES(4,1,769.99,100)
INSERT INTO TB_OFFERS VALUES(4,2,7899.99,10)
INSERT INTO TB_OFFERS VALUES(4,3,199.99,1000)
INSERT INTO TB_OFFERS VALUES(4,6,0.99,100)

INSERT INTO TB_OFFERS VALUES(5,1,799.99,100)
INSERT INTO TB_OFFERS VALUES(5,2,7899.99,10)
INSERT INTO TB_OFFERS VALUES(5,4,1.99,10000)
INSERT INTO TB_OFFERS VALUES(5,5,1.09,100000)
INSERT INTO TB_OFFERS VALUES(5,6,0.99,100)
INSERT INTO TB_OFFERS VALUES(5,7,11.09,100000)
INSERT INTO TB_OFFERS VALUES(5,8,100.99,100)

INSERT INTO TB_OFFERS VALUES(9,1,799.99,100)
INSERT INTO TB_OFFERS VALUES(9,2,7809.99,10)
INSERT INTO TB_OFFERS VALUES(9,3,189.99,1000)
INSERT INTO TB_OFFERS VALUES(9,4,1.99,10000)
INSERT INTO TB_OFFERS VALUES(9,5,1.19,100000)
INSERT INTO TB_OFFERS VALUES(9,6,0.90,100)
INSERT INTO TB_OFFERS VALUES(9,7,11.09,100000)
INSERT INTO TB_OFFERS VALUES(9,8,100.99,100)

INSERT INTO TB_OFFERS VALUES(8,1,799.99,100)
INSERT INTO TB_OFFERS VALUES(10,1,7809.99,10)
INSERT INTO TB_OFFERS VALUES(11,1,189.99,1000)
INSERT INTO TB_OFFERS VALUES(12,1,1.99,10000)
INSERT INTO TB_OFFERS VALUES(14,1,1.09,100000)
INSERT INTO TB_OFFERS VALUES(15,1,0.89,100)

INSERT INTO TB_OFFERS VALUES(8,7,37990.99,100)
INSERT INTO TB_OFFERS VALUES(10,7,80900.99,10)
INSERT INTO TB_OFFERS VALUES(12,7,100000.99,10000)

INSERT INTO TB_OFFERS VALUES(11,8,18.99,1000)
INSERT INTO TB_OFFERS VALUES(12,8,1.99,10000)
INSERT INTO TB_OFFERS VALUES(14,8,1.09,100000)

--Requests
INSERT INTO TB_REQUESTS VALUES(1,1,798.99,100)
INSERT INTO TB_REQUESTS VALUES(1,2,7897.99,10)
INSERT INTO TB_REQUESTS VALUES(1,3,196.99,1000)
INSERT INTO TB_REQUESTS VALUES(1,4,1.90,10000)
INSERT INTO TB_REQUESTS VALUES(1,5,1.00,100000)
INSERT INTO TB_REQUESTS VALUES(1,6,0.90,100)
INSERT INTO TB_REQUESTS VALUES(1,7,1.00,100000)
INSERT INTO TB_REQUESTS VALUES(1,8,89.90,100)

INSERT INTO TB_REQUESTS VALUES(2,1,790.99,100)
INSERT INTO TB_REQUESTS VALUES(2,2,7890.99,10)
INSERT INTO TB_REQUESTS VALUES(2,3,190.99,1000)
INSERT INTO TB_REQUESTS VALUES(2,5,1.09,100000)
INSERT INTO TB_REQUESTS VALUES(2,6,0.99,100)

INSERT INTO TB_REQUESTS VALUES(4,1,760.99,100)
INSERT INTO TB_REQUESTS VALUES(4,3,190.99,1000)
INSERT INTO TB_REQUESTS VALUES(4,6,0.8,100)

INSERT INTO TB_REQUESTS VALUES(5,1,798.99,100)
INSERT INTO TB_REQUESTS VALUES(5,2,788.99,10)
INSERT INTO TB_REQUESTS VALUES(5,4,1.8,10000)
INSERT INTO TB_REQUESTS VALUES(5,5,1.00,100000)
INSERT INTO TB_REQUESTS VALUES(5,6,0.95,100)

INSERT INTO TB_REQUESTS VALUES(6,1,790.99,100)
INSERT INTO TB_REQUESTS VALUES(6,2,7809.99,10)
INSERT INTO TB_REQUESTS VALUES(6,3,186.99,1000)
INSERT INTO TB_REQUESTS VALUES(6,4,1.99,10000)
INSERT INTO TB_REQUESTS VALUES(6,5,1.09,100000)
INSERT INTO TB_REQUESTS VALUES(6,6,0.90,100)

INSERT INTO TB_REQUESTS VALUES(7,1,799.99,100)
INSERT INTO TB_REQUESTS VALUES(7,2,7809.99,10)
INSERT INTO TB_REQUESTS VALUES(7,3,189.99,1000)
INSERT INTO TB_REQUESTS VALUES(7,4,1.99,10000)
INSERT INTO TB_REQUESTS VALUES(7,5,1.09,100000)
INSERT INTO TB_REQUESTS VALUES(7,6,0.89,100)

--Transactions
INSERT INTO TB_TRANSACTIONS VALUES(1,1,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,4,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,6,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(1,1,8,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(1,2,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,2,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(1,2,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(1,2,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(1,2,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(1,4,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,4,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(1,4,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(1,5,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,6,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(1,7,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(1,1,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,2,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(1,3,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(1,4,4,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(1,5,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(1,6,6,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,7,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(1,8,8,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(1,9,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(1,10,8,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(2,1,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,4,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,6,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(2,1,8,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(2,1,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,2,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(2,3,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(2,4,4,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(2,5,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(2,6,6,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,7,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(2,8,8,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,9,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(2,10,8,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(2,2,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,2,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(2,2,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(2,4,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,4,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(2,4,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(2,5,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(2,5,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(2,5,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,1,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,1,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,1,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,1,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,1,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,1,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,1,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,1,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,1,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,2,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,2,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,2,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,2,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,2,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,2,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,2,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,2,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,2,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,3,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,3,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,3,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,3,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,3,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,3,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,3,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,3,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,3,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,4,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,4,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,4,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,4,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,4,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,4,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,4,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,4,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,4,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,4,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,5,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,5,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,5,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,5,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,5,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,5,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,5,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,6,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,6,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,6,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,6,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,6,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,6,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,6,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,6,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,6,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,7,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,7,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,7,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,7,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,7,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,7,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,7,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,7,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(3,1,8,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,2,8,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(3,3,8,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(3,4,8,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(3,5,8,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,6,8,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,7,8,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,8,8,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(3,9,8,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(3,10,8,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(9,4,4,1.90,10000)
INSERT INTO TB_TRANSACTIONS VALUES(9,5,5,1.00,100000)
INSERT INTO TB_TRANSACTIONS VALUES(9,6,5,0.90,100)
INSERT INTO TB_TRANSACTIONS VALUES(9,7,2,798.99,100)

INSERT INTO TB_TRANSACTIONS VALUES(9,2,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(9,2,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(9,4,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(9,4,3,196.99,1000)
INSERT INTO TB_TRANSACTIONS VALUES(9,4,6,0.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(9,5,1,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(9,5,2,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(9,5,6,99.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(11,1,2,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(11,5,4,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(11,7,6,99.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(13,2,2,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(13,5,4,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(13,8,7,99.90,100)

INSERT INTO TB_TRANSACTIONS VALUES(15,2,2,798.99,100)
INSERT INTO TB_TRANSACTIONS VALUES(15,5,4,7897.99,10)
INSERT INTO TB_TRANSACTIONS VALUES(15,8,7,99.90,100) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:34:50.820

这些文件是 SQL 脚本。他们所做的只是创建一组表并填充它们。一旦创建，它们中就没有任何东西可以访问数据库中的数据。

它们旨在在 SQL 数据库上执行，很可能是 SQL Server。

这通常通过使用[SQL Server Management Studio](http://www.microsoft.com/download/en/details.aspx?id=7593)来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:41:39.647

这是一个快速而肮脏的代码，但你可以用它来获得你需要的东西

```
using System;
using System.Data.SqlClient;
using System.Windows.Forms;

namespace Test {
    internal class Class1 {
        public const string sqlDataConnectionDetails = "Data Source=SQL_SERVER;Initial Catalog=DATABASE_NAME;Persist Security Info=True;User ID=USERNAME;Password=PASSWORD";
        private void TestWrite() {
            const string preparedCommand =
                @"

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Requests_Tb_Consumer]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Requests] DROP CONSTRAINT FK_Tb_Requests_Tb_Consumer
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Transactions_Tb_Consumer]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Transactions] DROP CONSTRAINT FK_Tb_Transactions_Tb_Consumer
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_TB_Offers_Tb_Product]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[TB_Offers] DROP CONSTRAINT FK_TB_Offers_Tb_Product
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Requests_Tb_Product]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Requests] DROP CONSTRAINT FK_Tb_Requests_Tb_Product
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Transactions_Tb_Product]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Transactions] DROP CONSTRAINT FK_Tb_Transactions_Tb_Product
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_TB_Offers_Tb_Supplier]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[TB_Offers] DROP CONSTRAINT FK_TB_Offers_Tb_Supplier
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[FK_Tb_Transactions_Tb_Supplier]') and OBJECTPROPERTY(id, N'IsForeignKey') = 1)
ALTER TABLE [dbo].[Tb_Transactions] DROP CONSTRAINT FK_Tb_Transactions_Tb_Supplier
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[TB_Offers]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[TB_Offers]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Consumer]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Consumer]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Product]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Product]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Requests]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Requests]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Supplier]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Supplier]
GO

if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[Tb_Transactions]') and OBJECTPROPERTY(id, N'IsUserTable') = 1)
drop table [dbo].[Tb_Transactions]
GO

CREATE TABLE [dbo].[TB_Offers] (
    [Supp_ID] [int] NOT NULL ,
    [Prod_ID] [int] NOT NULL ,
    [Price] [money] NULL ,
    [Quantity] [float] NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Consumer] (
    [Con_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Name] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [City] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Product] (
    [Prod_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Name] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [MU] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Requests] (
    [Con_ID] [int] NOT NULL ,
    [Prod_ID] [int] NOT NULL ,
    [Price] [money] NULL ,
    [Quantity] [float] NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Supplier] (
    [Supp_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Name] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL ,
    [City] [varchar] (30) COLLATE SQL_Latin1_General_CP1_CI_AS NULL 
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Tb_Transactions] (
    [Tran_ID] [int] IDENTITY (1, 1) NOT NULL ,
    [Supp_ID] [int] NOT NULL ,
    [Con_ID] [int] NOT NULL ,
    [Prod_ID] [int] NOT NULL ,
    [Price] [money] NULL ,
    [Quantity] [float] NULL 
) ON [PRIMARY]
GO

ALTER TABLE [dbo].[TB_Offers] WITH NOCHECK ADD 
    CONSTRAINT [PK_TB_Offers] PRIMARY KEY  CLUSTERED 
    (
        [Supp_ID],
        [Prod_ID]
    )  ON [PRIMARY] ,
    CONSTRAINT [CK_TB_Offers] CHECK ([Price] > 0.00),
    CONSTRAINT [CK_TB_Offers_1] CHECK ([Quantity] >= 0)
GO

ALTER TABLE [dbo].[Tb_Consumer] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Consumer] PRIMARY KEY  CLUSTERED 
    (
        [Con_ID]
    )  ON [PRIMARY] 
GO

ALTER TABLE [dbo].[Tb_Product] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Product] PRIMARY KEY  CLUSTERED 
    (
        [Prod_ID]
    )  ON [PRIMARY] 
GO

ALTER TABLE [dbo].[Tb_Requests] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Requests] PRIMARY KEY  CLUSTERED 
    (
        [Con_ID],
        [Prod_ID]
    )  ON [PRIMARY] ,
    CONSTRAINT [CK_Tb_Requests] CHECK ([Price] > 0.00),
    CONSTRAINT [CK_Tb_Requests_1] CHECK ([Quantity] >= 0)
GO

ALTER TABLE [dbo].[Tb_Supplier] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Supplier] PRIMARY KEY  CLUSTERED 
    (
        [Supp_ID]
    )  ON [PRIMARY] 
GO

ALTER TABLE [dbo].[Tb_Transactions] WITH NOCHECK ADD 
    CONSTRAINT [PK_Tb_Transactions] PRIMARY KEY  CLUSTERED 
    (
        [Tran_ID]
    )  ON [PRIMARY] ,
    CONSTRAINT [CK_Tb_Transactions] CHECK ([Price] > 0.00),
    CONSTRAINT [CK_Tb_Transactions_1] CHECK ([Quantity] > 0)
GO

ALTER TABLE [dbo].[TB_Offers] ADD 
    CONSTRAINT [FK_TB_Offers_Tb_Product] FOREIGN KEY 
    (
        [Prod_ID]
    ) REFERENCES [dbo].[Tb_Product] (
        [Prod_ID]
    ),
    CONSTRAINT [FK_TB_Offers_Tb_Supplier] FOREIGN KEY 
    (
        [Supp_ID]
    ) REFERENCES [dbo].[Tb_Supplier] (
        [Supp_ID]
    )
GO

ALTER TABLE [dbo].[Tb_Requests] ADD 
    CONSTRAINT [FK_Tb_Requests_Tb_Consumer] FOREIGN KEY 
    (
        [Con_ID]
    ) REFERENCES [dbo].[Tb_Consumer] (
        [Con_ID]
    ),
    CONSTRAINT [FK_Tb_Requests_Tb_Product] FOREIGN KEY 
    (
        [Prod_ID]
    ) REFERENCES [dbo].[Tb_Product] (
        [Prod_ID]
    )
GO

ALTER TABLE [dbo].[Tb_Transactions] ADD 
    CONSTRAINT [FK_Tb_Transactions_Tb_Consumer] FOREIGN KEY 
    (
        [Con_ID]
    ) REFERENCES [dbo].[Tb_Consumer] (
        [Con_ID]
    ),
    CONSTRAINT [FK_Tb_Transactions_Tb_Product] FOREIGN KEY 
    (
        [Prod_ID]
    ) REFERENCES [dbo].[Tb_Product] (
        [Prod_ID]
    ),
    CONSTRAINT [FK_Tb_Transactions_Tb_Supplier] FOREIGN KEY 
    (
        [Supp_ID]
    ) REFERENCES [dbo].[Tb_Supplier] (
        [Supp_ID]
    )
GO
";
            using (SqlConnection varConnection = sqlConnectOneTime(sqlDataConnectionDetails)) {
                using (var sqlWrite = new SqlCommand(preparedCommand, varConnection)) {
                    sqlWrite.ExecuteNonQuery();
                }
            }
        }
        private static SqlConnection sqlConnectOneTime(string varSqlConnectionDetails) {
            var sqlConnection = new SqlConnection(varSqlConnectionDetails);
            try {
                sqlConnection.Open();
            } catch {
                DialogResult result = MessageBox.Show(new Form {
                                                                   TopMost = true
                                                               }, "Error connecting to database", "Error (000001)", MessageBoxButtons.YesNo, MessageBoxIcon.Stop);
                if (result == DialogResult.No) {
                    if (Application.MessageLoop) {
                        Application.Exit(); // Use this since we are a WinForms app
                    } else {
                        Environment.Exit(1); // Use this since we are a console app// Use this since we are a console app
                    }
                } else {
                    sqlConnection = sqlConnectOneTime(varSqlConnectionDetails);
                }
            }
            return sqlConnection;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:34:59.727

这些是包含 SQL Server 的 SQL 方言 T-SQL 的 SQL 文件，因此您需要一个 SQL Server 实例来运行它们 - 与 C# 无关。如果您没有 SQL Server，那么您可以查看下载和安装 express 版本。一旦你安装了这个，你就会有一个名为 SQL Server Management Studio 的应用程序，你可以用它打开然后执行这两个文件。

我建议你买一本关于 SQL Server 的书并阅读前几章以熟悉它。

# python - Django网站加载缓慢，托管在apache上，使用mod_wsgi，有什么办法让它更快？

> ID：10091732
> 
> 赞同：0
> 
> 时间：2012-04-10T15:32:12.133
> 
> 标签：python, django, apache, webserver, mod-wsgi

我在 AWS 微实例上的 apache 上建立了一个 django 网站。我有一个静态网页，使用托管在 apache 的 /var/www 上的 Twitters 引导程序设计。当我将该页面移植到 django 时，我发现 apache 需要更长的时间来提供该页面。我正在使用 mod_wsgi 来托管应用程序并使用 apache 来提供静态文件（css、图像等）。有没有其他方法可以让网站加载更快，或者有没有其他更适合 Django Web 应用程序的服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:36:58.370

通常，任何需要执行/解释代码的东西都会比完全静态的页面慢。

需要考虑的一些事情：

*   你有这个页面的数据库后端吗？如果是这样，您应该确保所有内容都正确编入索引。

*   是否有很多 python 代码正在执行？你在做任何可以优化的事情吗？

如果您只是渲染模板，它仍然会很昂贵，因为模板必须通过 Django 渲染引擎运行。我的建议是尽可能缓存任何静态资产。像这样的库可能会有所帮助：[https ://github.com/peterbe/django-static](https://github.com/peterbe/django-static)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:39:06.370

我最近回答了与此类似的问题，请查看此堆栈 over flow 链接

[找出托管时 web 应用程序运行缓慢的原因](https://stackoverflow.com/questions/9938246/finding-out-why-a-webapp-is-slow-when-hosted/9939584#9939584)

# python - 名称中带有 unicode 的标签和 lxml

> ID：10091737
> 
> 赞同：2
> 
> 时间：2012-04-10T15:32:42.803
> 
> 标签：python, unicode, lxml

假设我有一个在标签名称中使用 Unicode 的文档，例如`<año>2012</año>`.

当我使用 lxml 中的 etree 来解析这样的文档时，我没有问题，树是正确构建的。但是当（出于调试目的）我尝试打印一些元素时，我得到一个关于尝试将一些 unicode char 编码为 ASCII 失败的异常。

不是终端配置或文件编码错误的问题，因为我可以毫无问题地打印`.tag`包含相同 unicode 字符的节点 ( ) 的名称。显然问题是由 Element 对象的“字符串化”引起的，它假定标签名称是纯 ascii。

以下代码显示了问题（也表明它不是文件/终端/编码问题）。

```
# coding: utf-8
from lxml import etree
doc = """<?xml version="1.0" encoding="utf-8"?>
<año>2012</año>
"""
x = etree.fromstring(doc)   # No problem
print x.tag                 # No problem
print x                     # Exception 
```

在具有正确定义的 LC_CTYPE 的终端中运行上述脚本，会产生以下输出：

```
año
Traceback (most recent call last):
  File "procesar.py", line 8, in <module>
    print x
UnicodeEncodeError: 'ascii' codec can't encode character u'\xf1' in position 10: ordinal not in range(128) 
```

注意如何`print x.tag`正确输出`año`。不应该`print x`产生类似的东西`<Element año at b7d26eb4>`吗？

这是一个已知问题吗？关于解决方法的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T16:03:30.467

您必须在输出之前将 unicode 字符串转换为字节字符串

尝试：

```
print unicode(x).encode('utf8') 
```

引用[unicode 函数](http://docs.python.org/library/functions.html#unicode)：

> 对于提供 __unicode__() 方法的对象，它将不带参数调用此方法来创建 Unicode 字符串。对于所有其他对象，请求 8 位字符串版本或表示，然后使用“严格”模式下的默认编码的编解码器将其转换为 Unicode 字符串。

# android - 如何将值从android发送到webview中的html页面

> ID：10091740
> 
> 赞同：0
> 
> 时间：2012-04-10T15:32:45.130
> 
> 标签：android

我需要将一个值从 java 传递给 android 中的 html。我有一个列表视图，我从中选择一个特定项目，所选项目应该出现在 web 视图中的 html 页面上是否有任何方法可以在 android 中做到这一点，请帮助我，我已经搜索了很多网站，但所有得不偿失，

谢谢并恭祝安康

拉杰什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:38:29.043

的[`loadData (String data, String mimeType, String encoding)`](http://goo.gl/R4iaH)方法`WebView`允许您将 HTML 源代码直接发送到`WebView`. 因此，当您的项目被选中时，从项目的数据中生成适当的 HTML，然后直接发送。

# ruby - MSSQL-Server/ruby-gem 续集：如何读取 UTF-8 值？

> ID：10091742
> 
> 赞同：2
> 
> 时间：2012-04-10T15:32:47.710
> 
> 标签：ruby, sql-server, sql-server-2005, encoding, sequel

我使用[ruby​​-gem sequel](http://rubygems.org/gems/sequel)从 MSSQL-Server 表中读取 utf-8 编码的数据。表的字段定义为`nvarchar`，它们在 Microsoft Server Management Studio 中看起来是正确的（西里尔文是西里尔文，中文看起来是中文）。

我将我的数据库连接到

```
 db = Sequel.connect(
    :adapter=>'ado', 
    :host     =>connectiondata[:server], 
    :database=>connectiondata[:dsn], 
    #Login via SSO
  )

  sel = db[:TEXTE].filter(:language=> 'EN') 
  sel.each{|data| 
    data.each{|key, val|
      puts "#{val.encoding}: #{val.inspect}"  #-> CP850: ....
      puts val.encode('utf-8')
    }
  } 
```

这适用于英语，德语也返回一个可用的结果：

```
CP850: "(2 St\x81ck) f\x81r
(2 Stück) für ... 
```

但转换成的结果`CP850`，却不是原来的`UTF-8`。

西里尔文（我用保加利亚语测试过）和中文只产生“？” （合理，因为`CP850`不包括中文和保加利亚字符）。

我还通过 odbc-connection 进行了连接：

```
 db = Sequel.odbc(odbckey,
      :db_type => 'mssql',  #necessary
      #:encoding => 'utf-8',  #Only MySQL-Adapter
    ) 
```

结果是`ASCII-8BIT`，我必须将数据转换`force_encoding`为 CP1252（不是 CP850！）。但是西里尔文和中文仍然是不可能的。

我已经尝试过的：

*   MySQL 适配器似乎有一个编码选项，我检测到 MSSQL 没有效果。
*   我用 sqlite 和 sequel 做了类似的测试，我对 unicode 没有问题。
*   我安装`SQLNCLI10.dll`并使用它作为提供者。但我得到一个*无效的连接字符串属性*-error（与 相同`sqlncli`）。

所以我的最后一个问题是：如何通过 ruby​​ 和 sequel 读取 MS-SQL 中的 UTF-8 数据？

我的环境：

客户：

*   Windows 7的
*   红宝石 1.9.2
*   续集 3.33.0

数据库：

*   SQL 服务器 2005
*   数据库有排序规则 Latin1_General_CI_AS

准备好我的问题后，我找到了解决方案。我会将其发布为答案。但我仍然希望，有更好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:38:43.787

如果你可以避免它，你真的不想使用 ado 适配器（对于只读工作负载没问题，但我不建议将它用于其他工作负载）。我会尝试 tinytds 适配器，因为我相信它会正确处理编码，并且默认为 UTF-8。

Sequel 本身不进行任何转码，它将编码的处理留给较低级别​​的驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:34:14.293

在准备好我的问题后，我自己找到了解决方案。

当我添加一个

```
Encoding.default_external='utf-8' 
```

对于我的代码，我得到了正确的结果。

作为副作用，每个`File.open`人现在还期望 UTF-8 编码的文件（这可以被 中的附加参数覆盖`File.open`）。

作为替代方案，这也适用：

```
Encoding.default_internal='utf-8' 
```

正如我在问题中提到的，我不喜欢更改全局设置，只是为了更改一个界面的行为。

所以我仍然希望有更好的解决方案。

# c++ - 动态规划：硬币变化

> ID：10091743
> 
> 赞同：1
> 
> 时间：2012-04-10T15:32:49.190
> 
> 标签：c++, coin-change

我有一个输入：

1.  测试用例的数量
2.  一笔钱

作为输出我需要：

1.  我们拥有的不同硬币的数量和每枚硬币的价值。

程序应该确定是否有解决方案，因此输出应该是“是”或“否”。

我使用动态编程编写程序，但它仅在我一次输入一个测试用例时才有效如果我一次编写 200 个测试用例，输出并不总是正确的。

我假设我在测试用例之间存在错误保存状态的问题。我的问题是，我该如何解决这个问题？我只是寻求一些建议。

这是我的代码：

```
#include<iostream>
#include<stdio.h>
#include<string>

#define max_muenzwert 1000

  using namespace std;

  int coin[10];//max. 10 coins
  int d[max_muenzwert][10];//max value of a coin und max. number of coins

  int tabelle(int s,int k)//computes table
  {   
    if(d[s][k]!=-1) return d[s][k];
    d[s][k]=0; 

    for(int i=k;i<=9&&s>=coin[i];i++)
      d[s][k]+=tabelle(s-coin[i],i);

    return d[s][k];
 }

 int main()

 {
    int t;
    for(cin>>t;t>0;t--)//number of testcases

     {        

                int n;   //value we are searching   
           scanf("%d",&n)==1;             
          int n1;              

    cin>>n1;//how many coins

    for (int n2=0; n2<n1; n2++)
    {
        cin>>coin[n2];//value of coins
        }

    memset(d,-1,sizeof(d));//set table to -1

    for(int i=0;i<=9;i++)
    {
             d[0][i]=1;//set only first row to 1 
             }

      if(tabelle(n,0)>0) //if there's a solution
      {
                    cout<<"yes"<<endl;

                    }
      else //no solution
      {
           cout<<"no"<<endl;

      }

      }
      //system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T17:42:27.400

如您所见，您有可变数量的硬币，您正在使用以下行输入`cin>>n1;//how many coins`：但是在`tabelle`方法中你总是循环通过`0 - 9`，这是错误的。你应该只循环通过`0 - n1`. 试试这个测试用例：

```
2
10
2
2 5

10
1
9

```

对于第二个测试集，你的答案应该是`no`，但你的程序会说`yes`，因为它会在你的硬币数组的第二个元素中找到 5。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:16:47.803

```
for(int i=k;i<=9&&s>=coin[i];i++)
  d[s][k]+=tabelle(s-coin[i],i); 
```

在这里，如果`coin[i] < s`，则整个循环将中断，而您只需要跳过这个硬币。

PS请用正确的代码格式来打扰自己。

# php - 在 mysql 中获取具有不同列类型的列的最新详细信息

> ID：10091744
> 
> 赞同：0
> 
> 时间：2012-04-10T15:32:51.010
> 
> 标签：php, mysql

我有一个表，其中包含多个用户的相同记录类型的数据

```
examscoreid | examscorenum | examresult | userid | examtype
55                 89             P        7760       1 
54                 78             P        7760       3 
53                 90             P        7760       5 
52                 89             P        7760       4
41                 80             P        7666       2
44                 80             P        7666       2 
```

我需要不同examtype 的examscorenum 和examtype 分组的最新examscoreid

结果应该像

```
 examscoreid | examscorenum | examresult |     userid | examtype
    55                 89             P        7760       1 
    54                 78             P        7760       3 
    53                 90             P        7760       5 
    44                 80             P        7666       2 
```

看到用户 ID 7666 有两行具有相同的考试类型，但要求的结果应该包含最新的考试 scoreid（44 采取而不是 41）

同样，我需要整个用户数据

示例查询

```
SELECT examscorenum  FROM `exams` WHERE userid in (7760,7666) group by examtype,userid order by examscoreid desc 
```

我得到了数据，但是对于用户 ID 7666，我得到的结果是examscoreid 41 而不是 44

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:46:48.170

以下内容如何：

```
create table #exams
(
    examscoreid int,
    examscorenum int,
    examresult varchar(1),
    userid int,
    examtype int
)

insert into #exams values(55, 89, 'P', 7760, 1)
insert into #exams values(54, 78, 'P', 7760, 3)
insert into #exams values(53, 90, 'P', 7760, 5)
insert into #exams values(52, 89, 'P', 7760, 4)
insert into #exams values(41, 80, 'P', 7666, 2)
insert into #exams values(44, 80, 'P', 7666, 2)

SELECT distinct t1.examscoreid, t1.examscorenum, t1.examresult, t1.userid, t1.examtype 
FROM #exams t1
JOIN 
(
    select userid, max(examscoreid) as maxscoreid, examtype
    from #exams 
    group by userid, examtype
) t2
    on t1.userid = t2.userid
WHERE t1.userid in (7760,7666) 
    AND t1.examscoreid = t2.maxscoreid
order by t1.examscoreid desc

drop table #exams 
```

# vb.net - Exchange Web 服务附件加载缓慢

> ID：10091745
> 
> 赞同：2
> 
> 时间：2012-04-10T15:33:17.023
> 
> 标签：vb.net, exchange-server, attachment, exchangewebservices

我正在编写一些代码来下载和处理电子邮件的附件，然后处理它们。该代码在某些情况下可以按要求工作，但仍然存在一些主要问题。

每当代码将附件加载到本地磁盘上的文件中时，都会花费很长时间，并且由于下载速度慢而经常超时，并出现以下异常：

```
A first chance exception of type 'Microsoft.Exchange.WebServices.Data.ServiceRequestException' occurred in Microsoft.Exchange.WebServices.dll 
```

我可能错了，但是如果有问题的交换服务器与运行代码的服务器位于同一个千兆网络上，并且 Outlook 可以快速访问电子邮件、附件等，那么附件的下载速度应该比它们快得多，而且更加一致。以下是下载/加载时间的一些示例：

*   800KB 压缩 - 1m 4s
*   840KB 邮编 - 6m 18s
*   1.33MB 邮编 - 11m 23s
*   2.78MB 拉链 - 17m 3s

我尝试将 EWS 连接超时设置设置为 300000 毫秒，而不是默认的 100000 毫秒，以便为附件提供更多下载时间，并且异常数量略有减少，但现在等待时间太长了。

代码确实在线程中运行，一次不超过 8 个（我相信 10 个是 EWS 的节流限制），但我无法想象这会产生很大的不同。（当我一次测试单个电子邮件时，它还没有完成）。

这是下载附件的线程代码（为简单起见，删除了一些不相关的位）：

```
 Dim strMessageFolder As String

        ' Prepare the directory where this emails attachments will be stored
        strMessageFolder = g_strFolder_Temp & strMessageID & "\"

        ' Create a folder to store the attachments for this email
        Call FileSystem_CreateFolder(strMessageFolder, True)

        ' Process the emails attachments
        For Each emailAttachment In emailMessage.Attachments
            Dim fileattach As FileAttachment
            'Dim fileattachStream As FileStream
            Dim strAttachmentFile As String

            ' Prepare for the downloading of the attachment
            fileattach = emailAttachment
            blnTryFailed = False
            intAttempts = 0
            strAttachmentFile = strMessageFolder & fileattach.Name

            ' Handle up to 3 download attempts
            Do
                Try
                    ' Try to download the attachment - Method 1
                    fileattach.Load(strAttachmentFile)

                    ' Try to download the attachment - Method 2
                    'fileattachStream = New FileStream(strAttachmentFile, FileMode.OpenOrCreate, FileAccess.ReadWrite)
                    'fileattach.Load(fileattachStream)
                    'fileattachStream.Close()
                    'fileattachStream.Dispose()

                    blnTryFailed = False

                Catch ex As Exception
                    blnTryFailed = True

                    ' Ensure the failed download is deleted
                    Call FileSystem_DeleteFile(strAttachmentFile)

                    intAttempts += 1

                End Try

            Loop While blnTryFailed And intAttempts < 3

            ' If the attachment download was unsuccessful then we cannot process the current email
            If blnTryFailed = True Then
                emailMessage.IsRead = False
                'message.Subject = message.Subject & " - Attachment download failed, skipped"
                Try
                    emailMessage.Update(ConflictResolutionMode.AutoResolve)
                Catch ex As Exception
                    Call Logging_Add("Unable to mark email as skipped", strMessageID, "Debug")
                End Try
                Exit Sub
            End If 
```

如前所述，我知道 Exchange 限制，但找不到与下载附件速度相关的任何内容。所以我的问题是什么可能导致下载速度如此缓慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-19T11:33:28.460

我的应用程序也有同样的问题。该问题是由默认 EWS 设置引起的，该设置将 EWS 和应用程序之间的所有 HttpRequest 和 HttpResponse 消息写入控制台。关闭 TraceFlags 是一件好事。我在 C# 中的代码：

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2010_SP2);
service.TraceFlags = TraceFlags.None; 
```

# exchange-server - Exchange 2010 - 在邮件接收上运行命令

> ID：10091746
> 
> 赞同：1
> 
> 时间：2012-04-10T15:33:17.057
> 
> 标签：exchange-server

有谁知道有没有办法让 Exchange server 2010 在收到某些邮箱的邮件时执行某些程序？

例如：

我有邮件 test1@example.com 和 test2@example.com

我想在邮件到达 test1@example.com 时执行 program1.exe 并在邮件到达 test2@example.com 时执行 program2.exe

我查看了 Exchange 管理控制台中的所有选项，但没有找到类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-01T04:51:24.343

我使用 EWS 和 powershell 做了类似的事情。[您可以在此处](http://www.microsoft.com/en-us/download/details.aspx?id=35371)下载 EWS

然后您可以在 powershell 中创建一个使用 Exchange Web 服务的脚本

这是我的脚本示例：

```
$MailboxName = "mail@domain.com"
$dllpath = "C:\Program Files\Microsoft\Exchange\Web Services\2.0\Microsoft.Exchange.WebServices.dll"
[void][Reflection.Assembly]::LoadFile($dllpath)
$service = New-Object Microsoft.Exchange.WebServices.Data.ExchangeService([Microsoft.Exchange.WebServices.Data.ExchangeVersion]::Exchange2010_SP1)
$service.TraceEnabled = $false

$service.Credentials = New-Object System.Net.NetworkCredential("name","password", "domain")
$service.Url="https://mail.yourdomain.com.au/ews/exchange.asmx"

try{
$fldArray = new-object Microsoft.Exchange.WebServices.Data.FolderId[] 1
$Inboxid = new-object Microsoft.Exchange.WebServices.Data.FolderId([Microsoft.Exchange.WebServices.Data.WellKnownFolderName]::Inbox,$MailboxName)
$fldArray[0] = $Inboxid
$stmsubscription = $service.SubscribeToStreamingNotifications($fldArray, [Microsoft.Exchange.WebServices.Data.EventType]::NewMail)
$stmConnection = new-object Microsoft.Exchange.WebServices.Data.StreamingSubscriptionConnection($service, 30);
$stmConnection.AddSubscription($stmsubscription)
Register-ObjectEvent -inputObject $stmConnection -eventName "OnNotificationEvent" -Action {

    foreach($notEvent in $event.SourceEventArgs.Events){    
        [String]$itmId = $notEvent.ItemId.UniqueId.ToString()
        $message = [Microsoft.Exchange.WebServices.Data.EmailMessage]::Bind($event.MessageData,$itmId)
        IF ($message.Subject -eq "execprocess"){
            Start-Process  "mybat.bat" 
        }            
    }    

} -MessageData $service

}catch [Exception] {
                Get-Date  | Out-File C:\logs\logError.txt -Append
                "Error : "+  $_.Exception.Message  
                }
Register-ObjectEvent -inputObject $stmConnection -eventName "OnDisconnect" -Action {$event.MessageData.Open()} -MessageData $stmConnection
$stmConnection.Open() 
```

然后，为您需要监控的每个帐户运行 2 个脚本。

请参阅此处的原始示例--> [Source](http://gsexdev.blogspot.com.au/2011/09/using-ews-streaming-notifications-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:23:03.567

Exchange 没有开箱即用的方法来执行此操作。您可能希望查看在外部服务中使用 Exchange Web 服务 (EWS) 订阅来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:56:14.637

我完成此操作的一种方法是使用 Outlook com 对象编写一个 powershell 脚本来扫描收件箱中的某些条件，并根据它找到的内容执行一个进程。

# php - php如何动态考勤系统

> ID：10091751
> 
> 赞同：1
> 
> 时间：2012-04-10T15:33:48.550
> 
> 标签：php, mysql

伙计们

我正在创建一个 php web 应用程序，它允许管理员勾选谁已经上课。

我在数据库上有以下数据

学期开始日期、学期结束日期、上课日期和时间

例如，

`5 March 2012`,`9th April 2012` `Monday{9,12},Thursday{14,17}`

我可以获得基于开始和结束日期的总周数。现在的问题在于我如何获得课程应该是的日期，比如星期一，它应该是 9 日，但是星期四？动态的。

是否有任何 php 类或任何方法？

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:40:29.290

不要自己实现日期函数，处理日期时有很多陷阱。您可以使用[strtotime](http://www.php.net/strtotime)通过使用以下字符串来遍历日期：`strtotime("next Thursday", yourdate)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:56:34.280

不确定此时是否易于更改数据格式，但我建议构建数据库的方式（这将大大简化查询您询问的信息类型）将是这样的：

```
CREATE TABLE `student_attendance` (
  `student` INT(11) NOT NULL,
  `class` DATETIME NOT NULL,
  `attended` BOOLEAN NOT NULL,
  PRIMARY KEY (`student`,`class`)
) 
```

然后，要查询学生参加了多少天，您可以：

```
SELECT COUNT(*) 
FROM `student_attendance` 
WHERE `student` = '1'
AND `attended` = TRUE; 
```

当然，如果不知道更多关于你究竟想要完成什么，我不能确定这是否完全合适。尽管您用来存储数据的格式似乎会让您的生活变得不必要地困难（您将不同的数据点组合到一个列中；这是一个禁忌），所以我认为这是一种改进。

编辑：更准确地说，保存日期和期间（而不是日期和时间）；例如：

```
CREATE TABLE `student_attendance` (
  `student` INT(11) NOT NULL,
  `class_date` DATE NOT NULL,
  `class_period` TINYINT(4) NOT NULL,
  `attended` BOOLEAN NOT NULL,
  PRIMARY KEY (`student`,`class_date`,`class_period`)
) 
```

# javascript - 具有表格生成功能的任何标记语言的编辑器

> ID：10091753
> 
> 赞同：0
> 
> 时间：2012-04-10T15:33:52.707
> 
> 标签：javascript, php, editor, markup

对于任何可以为我的用户提供简单的表格生成和文本编辑的标记语言，我都需要一些编辑器工具。类似于 stackoverflows markdown 编辑器，但支持表格生成。我可以使用什么样的标记语言和编辑器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:39:00.613

您可能对名为 CKEditor 的 WYSIWYG 文本编辑器感兴趣。它是 web 的 api，您可以使用 html + javascript 将其嵌入到您的 web 应用程序中。它支持大多数主流浏览器，并且高度可定制。它最后生成纯html。并且拥有广泛的工具，尤其是您正在寻找的工具：表格。

查看演示：[http ://ckeditor.com/demo](http://ckeditor.com/demo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:46:18.473

我个人喜欢 TinyMCE，但我可能有偏见，因为它是我日常工作中所有项目的默认编辑器 :) 你可以在这里查看：[http](http://www.tinymce.com/tryit/full.php) ://www.tinymce.com/tryit/full.php但请注意，演示中的设置启用了许多功能过度杀伤。它是高度可定制的，所以你可以让它做你想做的事，而且也很容易。

# c# - c# 存储过程

> ID：10091764
> 
> 赞同：-5
> 
> 时间：2012-04-10T15:34:45.267
> 
> 标签：c#, .net, stored-procedures

我正在尝试创建一个通用方法来调用存储过程

我想通过数组传入参数

目前我无法将参数添加到 SqlCommand

这就是我到目前为止所拥有的

任何人都可以建议

谢谢

西蒙

调用方法

```
string[] paramNames = new string[1];
paramNames[0] = "@date = 2012-1-1";
string err="";

WriteToDatabase("exec LoadData", CommandType.StoredProcedure, paramNames, out err); 
```

方法

```
public static bool WriteToDatabase(
        string sql,
        CommandType commandType,
        string[] paramNames,
        out string errorText)
    {
        bool success = false;
        errorText = "";
        try
        {
            using (SqlConnection connection = new SqlConnection(ConnectionString))
            {
               connection.Open(); 
                List<SqlParameter> parameters = new List<SqlParameter>();

                foreach (string paramName in paramNames)
                {
                    parameters.Add(new SqlParameter() { ParameterName = paramName });
                }

                using (SqlCommand command = new SqlCommand()
                {
                    Connection = connection,
                    CommandText = sql,
                    CommandType = commandType,
                    Parameters = parameters

                })
                 command.ExecuteNonQuery();  

                 connection.Close();
            }

        }
        catch (SqlException sex)
        {
            log.Error("QueryDatabase SQLexception:" + sex.Message);
        }
        catch (Exception ex)
        {
            log.Error("QueryDatabase exception:" + ex.Message);
        }
        return success;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:46:42.797

这是我不久前开设的一堂课。它很容易使用：

```
using System;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Web;
using System.Xml;
using System.Collections;
using System.Collections.Specialized;
using System.Collections.Generic;
using System.Text;

namespace NESCTC.Data
{   
    public class DataAccess : IDisposable
    {
        #region declarations

        private SqlCommand _cmd;
        private string _SqlConnString;

        #endregion

        #region constructors

        public DataAccess(string ConnectionString)
        {
            _cmd = new SqlCommand();
            _cmd.CommandTimeout = 240;
            _SqlConnString = ConnectionString;
        }

        #endregion

        #region IDisposable implementation

        ~DataAccess()
        {
            Dispose(false);
        }

        public void Dispose()
        {
            Dispose(true);            
        }

        protected virtual void Dispose(bool disposing)
        {
            if (disposing)
            {
                _cmd.Connection.Dispose();
                _cmd.Dispose();
            }
        }

        #endregion

        #region data retrieval methods

        public DataTable ExecReturnDataTable()
        {
            using (var conn = new SqlConnection(this.ConnectionString))
            {
                try
                {
                    PrepareCommandForExecution(conn);
                    using (SqlDataAdapter adap = new SqlDataAdapter(_cmd))
                    {
                        DataTable dt = new DataTable();
                        adap.Fill(dt);
                        return dt;
                    }
                }
                finally
                {
                    _cmd.Connection.Close();
                }
            }
        }                

        public object ExecScalar()
        {
            using (var conn = new SqlConnection(this.ConnectionString))
            {
                try
                {
                    PrepareCommandForExecution(conn);
                    return _cmd.ExecuteScalar();
                }
                finally
                {
                    _cmd.Connection.Close();
                }
            }
        }    

        #endregion

        #region data insert and update methods

        public void ExecNonQuery()
        {
            using (var conn = new SqlConnection(this.ConnectionString))
            {
                try
                {
                    PrepareCommandForExecution(conn);
                    _cmd.ExecuteNonQuery();
                }
                finally
                {
                    _cmd.Connection.Close();
                }
            }
        }

        #endregion

        #region helper methods

        public void AddParm(string ParameterName, SqlDbType ParameterType, object Value)
        { _cmd.Parameters.Add(ParameterName, ParameterType).Value = Value; }

        private SqlCommand PrepareCommandForExecution(SqlConnection conn)
        {
            try
            {
                _cmd.Connection = conn;
                _cmd.CommandType = CommandType.StoredProcedure;
                _cmd.CommandTimeout = this.CommandTimeout;
                _cmd.Connection.Open();

                return _cmd;
            }
            finally
            {
                _cmd.Connection.Close();
            }
        }

        #endregion

        #region properties

        public int CommandTimeout
        {
            get { return _cmd.CommandTimeout; }
            set { _cmd.CommandTimeout = value; }
        }

        public string ProcedureName
        {
            get { return _cmd.CommandText; }
            set { _cmd.CommandText = value; }
        }

        public string ConnectionString
        {
            get { return _SqlConnString; }
            set { _SqlConnString = value; }
        }

        #endregion
    }
} 
```

以下是如何使用它的示例：

```
public void UpdateWorkOrder(int workOrderID, int paymentTermTypeID, string acceptedBy, string lastIssuedBy)
{
    using (var data = new DataAccess(this.ConnectionString))
    {
        data.ProcedureName = "UpdateWorkOrderDetails";
        data.AddParm("@WorkOrderID", SqlDbType.Int, workOrderID);
        data.AddParm("@PaymentTermTypeID", SqlDbType.Int, paymentTermTypeID);
        data.AddParm("@AcceptedBy", SqlDbType.VarChar, acceptedBy);
        data.AddParm("@LastIssuedBy", SqlDbType.VarChar, lastIssuedBy);
        data.ExecNonQuery();
    }
}

public DataTable GetWorkOrder(int workOrderID)
{
    using (var data = new DataAccess(this.ConnectionString))
    {
        data.ProcedureName = "GetWorkOrder";
        data.AddParm("@WorkOrderID", SqlDbType.Int, workOrderID);
        return data.ExecReturnDataTable();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:47:57.103

您必须分别指定参数的名称和值。你有不同的选择来做到这一点。参数集合有一个方法

```
public SqlParameter AddWithValue(string parameterName, object value) 
```

如果你想使用它，你必须将它们都提供给你的方法

```
public static bool WriteToDatabase(
    string sql,
    CommandType commandType, 
    string[] paramNames,    
    object[] paramValues,    
    out string errorText)    
{
    ...
    for (int i = 0; i < paramNames.Length; i++) {
        command.Parameters.AddWithValue(paramNames[i], paramValues[i]);
    }
    ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T23:19:02.790

这个页面很有帮助[http://csharp-station.com/Tutorial/AdoDotNet/Lesson01](http://csharp-station.com/Tutorial/AdoDotNet/Lesson01) 看看，很多例子！

# facebook - 带有 asp.net 的 Facebook 兴趣字段

> ID：10091767
> 
> 赞同：-3
> 
> 时间：2012-04-10T15:34:55.647
> 
> 标签：facebook, facebook-c#-sdk

我正在使用 facebookClient 从 Facebook 获取用户的兴趣数据

我能够得到看起来像的数据

{"data":[{"name":"Lean Startup","category":"Product/service","id":"387431575880","created_time":"2012-04-10T10:00:38+0000 "},{"name":"Enterpreneur","category":"Interest","id":"376510765740","created_time":"2012-04-10T10:00:38+0000"},{"name ":"Aquariums","category":"Interest","id":"111987498819971","created_time":"2012-04-10T10:00:37+0000"},{"name":"创建网站" ,"类别":"社会/文化","id":"153238868040287","created_time":"2012-04-10T10:00:37+0000"}],"paging":{"next":"https ://graph.facebook。com/me?fields=interests,email&access_token=AAAtnZB65tZB7tsBAMr3M4ZAaUHypodxgIR9kSop3g6SfbaaKZBBB5K8MLLdT0bzJhwh1PPtK7ZCFJWOZB5vVV36haGkpxV2CoAcUlIl13ZBWOwZDZD&limit=5000&offset=5000&__after_id=153238868040287"}}

我如何将其转换为键值对。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T20:54:13.693

```
dynamic result = fb.Get("me/interests");
var jsonArray= ((Facebook.JsonArray)result.data);
var nvDict = new Dictionary<string,string>();
foreach(dynamic obj in jsonArray)
{
    nvDict.Add(obj.id, obj.name);
} 
```

Could you just keep the object as a Facebook.JsonObject rather than converting it into a Dictionary?

# objective-c - UILabel 可以滚动吗？

> ID：10091771
> 
> 赞同：0
> 
> 时间：2012-04-10T15:34:58.833
> 
> 标签：objective-c

我有一个带有一堆文本的 UILabel，但文本在 xx 行之后停止。我的问题：我可以将滚动连接到 UILabel 还是可以将其连接到 textview？

显示大文本的最佳方式是什么（文本 = 来自 JSON 提要）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:38:11.287

UITextView 是可滚动的，如果您希望它更像一个标签，您可以关闭编辑。

# sql - Delphi：如何将列表作为参数传递给 SQL 查询？

> ID：10091777
> 
> 赞同：13
> 
> 时间：2012-04-10T15:35:17.617
> 
> 标签：sql, sql-server, delphi, delphi-7

我有一个整数或字符串列表，需要将它作为 Delphi DataSet 的参数传递。怎么做？

这是一个例子。MyQuery 类似于：

```
select * from myTable where intKey in :listParam 
```

我将参数设置为列表或数组或其他内容：

```
MyQuery.ParamByName('listParam').AsSomething := [1,2,3]; 
```

它会导致这个查询被发送到 sql server：

```
select * from myTable where intKey in (1, 2, 3) 
```

如果该解决方案也适用于字符串，那就更好了，进行以下查询：

```
select * from myTable where stringKey in :listParam 
```

变得：

```
select * from myTable where stringKey in ('a', 'b', 'c') 
```

我相信这是一个简单的问题，但“IN”不是搜索网络的好关键字。

请回答我应该如何在IDE中配置参数，查询以及如何传递参数。

我正在使用德尔福 7。

**编辑**：我正在考虑答案是“*不可能直接做*”。如果有人给我一个非骇人听闻的答案，那么接受的答案将会改变。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T15:40:03.517

AFAIK，这是不可能的直接。

您必须将列表转换为纯文本形式的 SQL 列表。

例如：

```
function ListToText(const Args: array of string): string; overload;
var i: integer;
begin
  result := '(';
  for i := 0 to high(Args) do 
    result := result+QuotedStr(Args[i])+',';
  result[length(result)] := ')';
end;

function ListToText(const Args: array of integer): string; overload;
var i: integer;
begin
  result := '(';
  for i := 0 to high(Args) do 
    result := result+IntToStr(Args[i])+',';
  result[length(result)] := ')';
end; 
```

要这样使用：

```
SQL.Text := 'select * from myTable where intKey in '+ListToText([1,2,3]);
SQL.Text := 'select * from myTable where stringKey in '+ListToText(['a','b','c']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T18:38:59.930

SQL 仅接受单个值作为参数，因此您无法创建带有一个参数的语句，该参数可以映射到可变数量的值，例如您给出的示例。

但是，在这种情况下，您仍然可以使用参数化 SQL。解决方案是遍历您拥有的值列表，将参数标记添加到 SQL 中，并将参数添加到每个值的参数列表中。

使用位置参数而不是命名参数最容易做到这一点，但也可以适应命名参数（您可能需要调整此代码，因为我没有可用的 Delphi 并且不记得参数创建语法）：

```
 //AValues is an array of variant values
 //SQLCommand is some TDataSet component with Parameters.
 for I := Low(AValues) to High(AValues) do
 begin

    if ParamString = '' then
       ParamString = '?'
    else
      ParamString = ParamString + ', ?';

    SQLCommand.Parameters.Add(AValues[I]);

  end

  SQLCommand.CommandText = 
     'SELECT * FROM MyTable WHERE KeyValue IN (' + ParamString + ')'; 
```

这将产生一个注入安全的参数化查询。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T19:08:50.053

您有多种选择，但基本上您需要将您的值放入表格中。我会为此建议一个表变量。

这是一个解压 int 列表的版本。

```
declare @IDs varchar(max)
set @IDs = :listParam

set @IDs = @IDs+','

declare @T table(ID int primary key)

while len(@IDs) > 1
begin
  insert into @T(ID) values (left(@IDs, charindex(',', @IDs)-1))
  set @IDs = stuff(@IDs, 1, charindex(',', @IDs), '')
end

select *
from myTable
where intKey in (select ID from @T) 
```

可以进行多语句查询。参数`:listParam`应该是一个字符串：

```
MyQuery.ParamByName('listParam').AsString := '1,2,3'; 
```

您可以对字符串使用相同的技术。您只需要将数据类型更改`ID`为 例如`varchar(10)`。

您可以使用[split 函数，而不是使用 while 循环解包](https://stackoverflow.com/a/314917/569436)

```
declare @T table(ID varchar(10))

insert into @T 
select s
from dbo.Split(',', :listParam)

select *
from myTable
where  charKey in (select ID from @T) 
```

字符串参数可能如下所示：

```
MyQuery.ParamByName('listParam').AsString := 'Adam,Bertil,Caesar'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T18:19:47.400

创建一个临时表并在其中插入您的值。然后将该表用作子查询的一部分。

例如，在您的数据库中创建 MyListTable。将您的值插入 MyListTable。然后做

```
select * from myTable where keyvalue in (select keyvalue from MyListTable) 
```

这避免了 SQL 注入攻击。但它并不优雅，对性能不友好，因为您必须在运行查询之前插入记录，并且可能导致并发问题。

不是我处理您的情况的首选，但它解决了您对 sql 注入的担忧。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-02T19:03:15.660

如果有人仍然有同样的问题，如果你使用 fireac，你可以使用这样的宏：

查询 ->`"select * from myTable where intKey in (&listParam)"`

设置宏->`MyQuery.MacroByName('listParam').AsRaw := '1, 2, 3';`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T18:25:04.813

我使用一些“IN”替换。这是我使用的查询：

```
SELECT * FROM MyTable WHERE CHARINDEX(','+cast(intKey as varchar(10))+',', :listParam) > 0 
```

发送参数的代码：

```
MyQuery.ParamByName('listParam').AsString := ',1,2,3,'; 
```

数组项值可以部分匹配其他一些值。例如，“1”可以是“100”的一部分。为了防止它，我使用逗号作为分隔符

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T07:20:16.100

为什么不做动态sql：

又快又脏，但仍在使用参数。检查 10 个元素。我不知道这个规模如何。

```
 MyQuerySQL.Text:='SELECT * FROM myTable WHERE intKey in (:listParam0'
    for i := 1 to 9 do begin
      MyQuerySQL.Text := MyQuerySQL.Text + ',:listParam'+IntToStr(i)
    end;
    MyQuerySQL.Text := MyQuerySQL.Text+')';
    for i:=0 to 9 do begin
      MyQuery.ParamByName('listParam'+IntToStr(i)).AsInteger := ArrayofInt[0];
    end; 
```

# php - wincachegrind 中的列名是什么？

> ID：10091779
> 
> 赞同：11
> 
> 时间：2012-04-10T15:35:22.457
> 
> 标签：php, xdebug, kcachegrind

经过大量的努力和教程，我启动并运行了 xdebug/wincachegrind，但大多数教程都以“现在一切正常，享受”结尾。

一切正常，但我没有在统计数据中得到列命名：

*   什么意思 自我（平均自我）？
*   暨是什么意思？
*   与“平均自我”相反的“完全自我”是什么？
*   与平均精液相反的总精液是什么？

我有点困惑，我没有找到合适的答案，如果这是一个愚蠢的问题，很抱歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T15:45:27.073

*   Self = 在该函数本身的代码中花费的时间。
*   暨。= 在函数中花费的时间 Self 调用它的自身时间（Cumulative 的缩写）。
*   Avg vs. Total：Average 是每次通话的平均时间，Total 是所有通话花费的总时间。

# php - 使用 PHP 和 MySQL 一次查询 #fixnum 个项目的分页表

> ID：10091781
> 
> 赞同：-2
> 
> 时间：2012-04-10T15:35:33.533
> 
> 标签：php, mysql, pagination

所以我试图找到一种方法来从查询中返回一个非常大的结果集，并将其显示为网页上的分页表。

例如，如果我试图从我的数据库中返回 1,000 个项目，我想将它们显示在一个分页表中，一次 100 个，并且只查询这 100 个项目。

当用户在搜索框中输入要查询的名称时，我希望他们能够单击表分页，其中每个分页仅查询 100 个项目，因此 'page' 1 显示项目 1-100，'page ' 2 显示项目 101-200 等...

我想这样做是因为查询一个非常大的结果集然后只对显示进行分页非常慢。

有人对如何使用 PHP 和 MySQL 执行此操作有任何建议吗？

我的分页工作正常，我只是不知道如何运行我的查询。

这是我现在的查询：

```
 mysql_query("SELECT name, age, address FROM users  WHERE name='$name' AND domain_name='$age' LIMIT 100", $localDB); 
```

如何使用此查询仅返回结果集 101-200、201-300 等...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:43:44.327

尝试在查询中使用“ [LIMIT](http://dev.mysql.com/doc/refman/5.0/en/select.html) ”

例如：

```
$query. "LIMIT 0,100" 
```

这将帮助您限制查询结果。您可以根据自己的要求进行限制，而不是获取所有行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:44:35.717

如果您已经知道分页的数量（数字），那么只需`limit`在您的 SQL 中添加一个。

使用 PDO 的示例：

```
//url passed has a token of &page=[digit]
//Do prior error checking to verify $_GET/POST has a page variable, and it is a digit.

if ($page < 1) { $page = 1;}

$offset=$limit*($page-1); // Will give an offset of 100 on page 1, or 200 on page 2, etc

$sql = "SELECT `items` FROM items_db WHERE itemno=:itemno LIMIT :offset, 100";

$sql_query = $conn->prepare($sql); // Existing connection
$sql_query->bindParam(':itemno',$itemno, PDO::PARAM_INT);
$sql_query->bindParam(':offset', $offset, PDO::PARAM_INT);

$sql_query->execute(); 
```

# git - .xcodeproj 未使用 git add 添加。命令

> ID：10091785
> 
> 赞同：0
> 
> 时间：2012-04-10T15:35:56.000
> 
> 标签：git, xcode4

我对这个 git 真的很陌生，并试图让它与 xcode4 一起工作。我有一个现有的 xcode 项目，这就是我所做的。

1.  导航到项目目录
2.  混帐初始化
3.  混帐添加。
4.  git commit -m "...."

但我在我的 git 状态中看不到 project_name.xcodeproj。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:15:29.253

我会将@Alex 的答案放在这里，以防有人从中受益。如果您的项目的某些文件未使用 git add 命令添加，请在 git 存储库的根目录中查找您的**.gitignore**文件，在我的情况下，它的[**全局 .gitignore**](http://help.github.com/ignore-files/)会导致问题。

# ios - IOS：在配置文件中添加设备

> ID：10091786
> 
> 赞同：0
> 
> 时间：2012-04-10T15:35:58.507
> 
> 标签：ios, xcode, device

我不明白为什么如果我在 xcode 中打开一个项目，我可以使用我的设备进行调试；如果我打开另一个项目，我在调试中看不到它，我不能使用它......为什么？在同一个mac中；自然地，我在配置门户中添加设备，并在管理器中更新配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:25:35.310

它要么是 mydogisbox[建议](http://developer.apple.com/library/ios/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TNTAG7)的配置文件，要么是设备不符合最低 iOS 应用程序目标设置。你的硬件是什么，它运行的是什么 iOS 版本？新项目的 iOS Application Target 设置需要什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:30:26.917

扩展 mydogisbox 评论：您是否为新项目设置了开发人员身份？

-- 进入你的项目文件

-- 转到构建设置选项卡

-- 搜索“代码签名”

-- 你会看到“代码签名身份”下拉

-- 在调试单元格中，确保您拥有 iPhone 开发人员配置文件。

# mysql - SQL 更新会在更新运行期间影响其子查询吗？

> ID：10091788
> 
> 赞同：10
> 
> 时间：2012-04-10T15:36:00.960
> 
> 标签：mysql, sql, database, oracle, postgresql

我只是在编写一个看起来或多或少像这样的复杂更新查询：

```
update table join
    (select y, min(x) as MinX 
     from table
     group by y) as t1
    using (y)
set x = x - MinX 
```

这意味着该变量`x`是基于子查询更新的，该子查询也处理变量`x`——但是**这不能`x`被运行的更新命令修改**吗？这不是问题吗？我的意思是，在正常的编程中，你通常必须明确地处理这个问题，即将新值从旧值存储到其他地方，工作完成后，用新值替换旧值......但是**SQL 数据库将如何做到这一点？**

我对单一的观察或实验不感兴趣。我想有一个来自 docs 或 sql 标准的片段，它会说明在这种情况下定义的行为是什么。我正在使用 MySQL，但对其他 PostgresQL、Oracle 等也有效的答案，特别是**对于一般的 SQL 标准，**我们表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T16:47:29.007

****已编辑****

**从目标表中选择**

从[13.2.9.8 开始。FROM 子句中的子查询](http://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html)：

> FROM 子句中的子查询可以返回标量、列、行或表。FROM 子句中的子查询不能是相关子查询，除非在 JOIN 操作的 ON 子句中使用。

所以，是的，您可以执行上述查询。

**问题**

这里确实有两个问题。有并发性，或者确保没有其他人从我们脚下更改数据。这是通过锁定处理的。处理新旧值的实际修改是通过派生表处理的。

**锁定**

在上述查询的情况下，使用 InnoDB，MySQL 首先执行 SELECT，并分别获取表中每一行的读取（共享）锁。如果您在 SELECT 语句中有 WHERE 子句，那么只有您选择的记录会被锁定，而范围也会导致任何间隙被锁定。

[读锁](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)可防止任何其他查询获取写锁，因此当记录被读锁定时，无法从其他地方更新记录。

然后，MySQL 分别在表中的每条记录上获取一个写（排他）锁。如果您的 UPDATE 语句中有 WHERE 子句，那么只有特定记录将被写锁定，同样，如果 WHERE 子句选择了一个范围，那么您将锁定一个范围。

任何从前一个 SELECT 获得读锁的记录都会自动升级为写锁。

[写锁](http://dev.mysql.com/doc/refman/5.0/en/internal-locking.html)可防止其他查询获得读锁或写锁。

您可以使用[Innotop](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDgQFjAA&url=http://code.google.com/p/innotop/&ei=Lp-ET9a9N4_6ggfUypDfBw&usg=AFQjCNFokDHQXNb8OTM_d62fCB5N0UmkWQ&sig2=O6-gRmP-64PyEZkgiqNN2w)通过在 Lock 模式下运行它来查看这一点，启动事务，执行查询（但不要提交），您将在 Innotop 中看到锁。此外，您可以在没有 Innotop 的情况下使用`SHOW ENGINE INNODB STATUS`.

**死锁**

如果同时运行两个实例，您的查询很容易出现死锁。如果查询 A 获得了读锁，然后查询 B 获得了读锁，则查询 A 必须等待查询 B 的读锁释放才能获得写锁。但是，查询 B 直到完成后才会释放读锁，除非它可以获取写锁，否则它不会完成。查询 A 和查询 B 陷入僵局，因此陷入僵局。

因此，您可能希望执行显式表锁，既可以避免大量记录锁（这会占用内存并影响性能），也可以避免死锁。

另一种方法是在您的内部 SELECT 上使用 SELECT ... FOR UPDATE。这从所有行上的写锁开始，而不是从读取和升级它们开始。

**派生表**

对于内部 SELECT，MySQL 创建一个[派生的临时表](http://dev.mysql.com/doc/refman/5.0/en/from-clause-subqueries.html)。派生表是存在于由 MySQL 自动创建的临时表中的数据的实际非索引副本（与您显式创建并可以添加索引的临时表相反）。

由于 MySQL 使用派生表，因此这是您在问题中引用的临时旧值。换句话说，这里没有魔法。MySQL 做它就像你在其他任何地方做的一样，有一个临时值。

您可以通过对您的 UPDATE 语句（在 MySQL 5.6+ 中支持）执行 EXPLAIN 来查看派生表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T14:43:06.403

A proper RDBMS uses `statement level read consistency`, which ensures the statement sees (selects) the data as it was at the time the statement began. So the scenario you are afraid of, won't occur.

Regards,
Rob.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T13:29:48.643

Oracle 在 11.2[文档中有这个](http://docs.oracle.com/cd/E11882_01/server.112/e25789/consist.htm#BABHFAIJ)

> 为每个查询提供一致的结果集，保证数据的一致性，无需用户进行任何操作。隐式查询（例如 UPDATE 语句中的 WHERE 子句隐含的查询）保证了一组一致的结果。但是，隐式查询中的每个语句都不会看到 DML 语句本身所做的更改，而是看到更改之前存在的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T18:02:41.680

尽管已经注意到您不应该根据自己的数据对表进行更新，但您应该能够调整 MySQL 语法以允许通过

```
update Table1, 
       (select T2.y, MIN( T2.x ) as MinX from Table1 T2 group by T2.y ) PreQuery
  set Table1.x = Table1.x - PreQuery.MinX
  where Table1.y = PreQuery.y 
```

我不知道语法是否使用 JOIN 与逗号列表版本走不同的路线，但通过完整的预查询，您必须首先应用其结果完成一次，并加入（通过 WHERE）实际执行更新。

# java - 为什么 Java 没有在 javadoc 中包含每个函数的时间/空间复杂度？

> ID：10091790
> 
> 赞同：15
> 
> 时间：2012-04-10T15:36:03.207
> 
> 标签：java, string, complexity-theory, javadoc, replaceall

嗨，我想知道 String 类的“replaceAll”函数的时间复杂度是多少，但我找不到任何信息。（[http://docs.oracle.com/javase/6/docs/api/ java/lang/String.html](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html) )

Java 将复杂性包含在 Javadoc 中不是更好吗？我相信有人知道这是一件非常重要的事情。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T15:40:27.883

大多数函数具有相当直接的时间复杂度。AFAIK，replaceAll 是 O(n)

恕我直言。没有什么比自己凭经验测试更好的了，例如使用分析器，因为您使用的 99% 的方法很可能对应用程序的性能几乎没有影响。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:40:16.247

如果有保证，可以记录复杂性。例如，一些集合类记录了复杂性保证。例如，来自[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)：

> 此实现为基本操作（get 和 put）提供恒定时间性能......

但是，有时复杂性是：

*   不保证，并且可以通过修改实现来自由更改。
*   显然 O(1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:41:05.107

Java API 的 javadocs 指定了每个方法必须做*什么*的一般合同，而不是*如何*。API 的每个实现者（例如，OpenJDK、Oracle 的 JDK 等）对于如何实现每个合约都有一定的自由度，这种自由度可能包括进行优化，甚至牺牲性能。因此，javadocs 通常不会指定功能的时间/复杂性等细节，除非方法绝对有必要满足某些性能要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-10T15:45:36.293

如果您使用基本操作的空间/时间复杂性来驱动设计决策，那么您几乎可以肯定做错了。

首先构建一个正确的应用程序，然后对其进行分析。然后优化分析过程揭示的瓶颈。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:58:18.870

一般的答案是复杂性通常取决于难以分析的因素。这当然适用于`String.replaceAll`，其中有效复杂性严重取决于`regex`字符串。（设计不佳的正则表达式会使匹配变得非常缓慢。）

# iphone - 过多使用 NSUserDefaults

> ID：10091791
> 
> 赞同：3
> 
> 时间：2012-04-10T15:36:03.380
> 
> 标签：iphone, objective-c, ios, nsuserdefaults

我非常广泛地使用 NSUserDefaults。我在 NSUserDefaults 中保存了许多关于用户的信息数组，并稍后在另一个视图中使用它们。

我的问题是，这是错误的方法吗？或者这可能是发送到 AppStore 的问题？

谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:48:03.763

关于可以在 NSUserDefaults 中存储什么或多少信息没有硬性规定（除非你永远不应该存储安全数据）。除非您滥用 NSUserDefaults 导致崩溃，否则您肯定不会被 App Store 拒绝。

不过，我对您关于在另一个视图中使用的说法感到困惑。NSUserDefaults 旨在跨会话保存少量数据，而不是在应用程序中的对象之间传输数据。如果您将它用于后者，您应该重新审视您的应用程序架构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:47:18.057

是的，这是一种错误的方法，但我认为当您将其发送到 AppStore 时，这不会对您造成问题。

您可能需要做的是添加一些配置文件并进行管理，或者在您的项目中使用核心数据，以便仅在了解您的项目时为您提供更准确的答案。

此致。

**编辑以在使用 NSUserDefaults 时添加更好的解释**

您只想使用 NSUserDefaults 来存储配置，这将是用户的默认设置，例如用户最喜欢的背景颜色。

你不想在 NSUserDefaults 中存储密码、临时信息，如果你在做游戏，你就不会在那里存储你的排名之类的东西。

来自[苹果文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsuserdefaults_Class/Reference/Reference.html)

> NSUserDefaults 类提供了一个与默认系统交互的编程接口。默认系统允许应用程序自定义其行为以匹配用户的偏好。例如，您可以允许用户确定应用程序显示的测量单位或自动保存文档的频率。应用程序通过将值分配给用户默认数据库中的一组参数来记录这些偏好。这些参数被称为默认值，因为它们通常用于确定应用程序在启动时的默认状态或其默认行为方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T16:10:54.850

你不会被 App Store 拒绝，但这**并不是一个很好的做法**。考虑使用“核心数据”来存储结果和值。`NSNotifications`并且很少`NSUserDefaults`用于视图控制器之间的通信。

如果您`NSUserDefaults`主要用于不同 VC 之间的通信，我建议使用`Delegates`（消息传递（或）回调）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T15:48:27.217

最好不要在 userdefaults 中保存太多数据。相反，您可以使用 plist 或 Core Data 来存储您的数据（[这是一个很好的 Core Data 教程](http://www.raywenderlich.com/934/core-data-tutorial-getting-started)）。而且 NSUSerDefaults 也很难更改和删除对象，所以尽量使用它来存储用户名和密码等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-12T14:48:55.277

这是一个有用的[线程](https://www.reddit.com/r/swift/comments/2x3cbl/how_many_objects_is_too_much_for_nsuserdefaults/)。本质上，转到您的项目文件夹并查看 pList 文件大小。

我发现有帮助的回复是转到您的项目文件并查看 plist 文件大小：

> 5个对象几乎没有。你会没事的！

* * *

> 在我的机器上，我的用户默认值中有大约 28 兆的数据。这根本不会引起任何问题。

* * *

> 根据数组的一般编程经验，我猜当您达到 1000 个时，性能开始迅速下降，具体取决于元素大小。因此，在一个程序中，我不会有存储几百个元素的问题。这就是说，如果我是你，我可能会尽快开始使用 sqlite3 数据库或 coredata。

# python - wxPython 错误消息 - 单击按钮以在我的框架内的画布上显示一个小图像

> ID：10091797
> 
> 赞同：1
> 
> 时间：2012-04-10T15:36:23.707
> 
> 标签：python, user-interface, button, wxpython

好的，所以我几乎完成了我的项目程序，但我无法让 BUTTON_EVT 工作，如果我老实说这应该是最简单的事情。我的程序上有代表硬件的按钮，我创建了一个 def 函数，让它们出现在 OGL 画布上。

*   问题已解决...与问题相关的代码在下面的答案中找到

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T17:00:59.030

**Edited from your last comment**. Use this (using your own images):

```
def OnClickRouter(self, event):
    image=wx.Image('cat.jpg', wx.BITMAP_TYPE_JPEG)
    self.frame = bucky(None, image)
    self.frame.Show() 
```

If you call bucky() this way you must also fix the class signature:

```
class bucky(wx.Frame):      
  # Creating the outer window/frame
  def __init__(self, parent, image=None):
    wx.Frame.__init__(self, parent, -1,'Karls Network Tool', size=(900,700))

    my_image = image if image else wx.Image("myself.bmp", wx.BITMAP_TYPE_BMP) 

    ''''''''''''''''''''''''''''''''
    # Button images
    buttonOneRouter = my_image.ConvertToBitmap()
    self.buttonOneRouter = wx.BitmapButton(panel, -1, buttonOneRouter, pos=(20,340))
    self.buttonOneRouter.Bind(wx.EVT_BUTTON, self.OnClickRouter)
    '''''''''''''''''''''''''''''''' 
```

Then you can see that after clicking the buttonOnerouter what actually you are doing is opening a new frame. The left figure is what I get when I run the program, the right one is after I click and enter again my name (I simplified a bit your code. Thats why you only see one button at the bottom instead of 4):

![enter image description here](../Images/cee7c9f6fb089f768c7f29e86f4fc245.png)

If you want to put my cat in the canvas instead of in the button there is still some work to do. I recommend to you to give a look at the wxPython demo. In the miscellaneous group of examples you have one called OGL that shows how to do that.

**Edit:** You can download the wxPython docs and demos package [from here](http://www.wxpython.org/download.php#stable)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:36:35.570

我不知道这是否正确，但我建议您采用这种方法，看看它是否有效。

将您的框架类修改为：

```
def __init(self,parent,id,img=None)

def onClickRouter(self,event):
    image=wx.Image('router.jpg', wx.BITMAP_TYPE_JPEG)
    temp = image.ConvertToBitmap()
    self.bmp = wx.StaticBitmap(parent=self, bitmap=temp)
    self.frame=bucky(self.bmp) 
```

请告知结果。

# java - 从线程执行时更改的相对路径

> ID：10091800
> 
> 赞同：1
> 
> 时间：2012-04-10T15:36:25.217
> 
> 标签：java, eclipse, exec, relative-path

我正在制作一个 Web 应用程序，它在某个时刻启动一个新线程，并且该线程从命令行执行一个 jar 文件。从应用程序外部调用命令行 jar 时工作正常，但是当我从线程调用它时，相对路径变为 C:\eclipse\（我正在从 Eclipse 运行应用程序）而不是它存储的目录，这很混乱更新其配置，因为它在错误的位置查找文件。

jar 会创建一个日志文件，每当我尝试调用它时，我都会在日志中写入这一行：“10/04/2012 17:09:03 - java.io.FileNotFoundException: C:\eclipse\descriptors\analysis_engine\AggregateAE .xml" jar 不在 C:\eclipse 中。当我从提示符调用它时我没有问题，但是当它从一个新的衍生线程调用时我有这个错误。我已经在生产环境中尝试过，我遇到了同样的问题（这次基本路径是服务器的）

考虑到我无法修改所有路径，有什么办法可以解决这个问题？

编辑：这是调用 jar 的线程类

```
public class UimaThread extends Thread {
private int mode=0;
private String path;

public UimaThread(int mode, String path){
    this.mode=mode;
    this.path=path;
}

public void run() {
    Runtime run = Runtime.getRuntime();
    try {
        Properties config = ConfigLoader.getConfig();

        String uimaPath=config.getProperty("uimaPath")+ControlPanelUtils.getDelimiter(config.getProperty("uimaPath"));
//uimaPath is the absolute path to the jar file, mode and path are just arguments passed to the jar
        run.exec("java -jar "+uimaPath+"uimachainfull.jar "+mode+" "+path); 

    }

} 
```

运行它的代码是：

```
public void startUima() throws IOException, ServletException {
    Properties config = ConfigLoader.getConfig();
    UimaThread uimaThread = new UimaThread(2, config.getProperty("docPath"));
    uimaThread.start();
} 
```

我需要在服务器外部异步执行此操作，我在stackoverflow中询问了如何执行此操作，并且有人告诉我这样做：[Calling an application from a web server asynchronously](https://stackoverflow.com/questions/9973339/calling-an-application-from-a-web-server-asynchronously/9973480#9973480)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:42:01.250

我发现了如何做到这一点，而不是使用 exec(String command) 我不得不使用 exec(String command, String[] envp, File dir) 并且最后一个参数 (dir) 是可以作为传递的工作目录新论点

# android - 显示虚拟键盘时如何覆盖后退按钮？

> ID：10091807
> 
> 赞同：-1
> 
> 时间：2012-04-10T15:36:48.137
> 
> 标签：android, android-button, android-virtual-keyboard

在我的应用程序中，当虚拟键盘出现时，它会从底部向上推我的菜单，它不是很好，而且它还覆盖了一些内容，所以我只是在虚拟键盘出现时隐藏它。

但是当我按回隐藏键盘时，我想再次显示我的菜单，但没有任何反应，除了虚拟键盘像默认一样消失。

我试过了：

```
 @Override
        public void onBackPressed() 
        {
            LinearLayout menuLayout = (LinearLayout)findViewById(R.id.menuLayout);
            menuLayout.setVisibility(View.VISIBLE);

            super.onBackPressed();
        } 
```

也试过没有：

```
super.onBackPressed(); 
```

他们都没有工作。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-09T11:18:16.163

You should not override `onBackPressed` method. See [here](https://stackoverflow.com/questions/4312319/howto-capture-the-virtual-keyboard-show-hide-event-in-android) how to resolve your problem

# c - 收到的 UDP 数据包是否在 LwIP 堆栈中排队？

> ID：10091809
> 
> 赞同：2
> 
> 时间：2012-04-10T15:36:54.063
> 
> 标签：c, lwip

我正在使用**LwIP**和**FreeRTOS为嵌入式设备编写****C**程序，微控制器是 Atmel AVR32。

 ****在*LwIP*中，通过设置*udp*接收回调函数后`udp_recv()`，我知道一旦接收到*UDP*数据报就会调用回调函数。`process_udp_packet()`然后我可以在回调函数内部做一些事情。但是，如果在回调函数完成之前收到另一个*UDP数据包，这第二个数据包会在缓冲区中排队吗？*还是立即再次调用回调函数，连第一个回调函数都没有完成？

非常感谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T17:08:37.503

回调是在 LwIP 本身的上下文中调用的。因此，在您退出回调之前，LwIP 将被阻止。它根本不会处理任何新数据包。如果有新数据到达，接口驱动程序不应从接口（如调制解调器）读取它或将其保存在自己的缓冲区中，直到 LwIP 被解除阻塞。

因此，回调应尽快退出，以免干扰正常的 LwIP 工作流程。编写此类回调函数的最佳方法是将新数据包读入应用程序队列并立即从回调中返回。然后应用程序在它自己的上下文中可以处理新数据。

但是，如果数据处理速度非常快，您可以在回调函数中完成。****

# ios - NSFileSystemFreeSize：将结果转换为用户友好的 mb/gb 显示？

> ID：10091816
> 
> 赞同：2
> 
> 时间：2012-04-10T15:37:08.557
> 
> 标签：ios, ios5

有没有人有例程将 NSFileSystemFreeSize 的结果转换为用户友好的可用 mb/gb 字符串。我以为我掌握了它的要点，但我得到了奇怪的结果。

```
- (NSString*)getFreeSpace
{
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,     NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSDictionary* fileAttributes = [[NSFileManager defaultManager] attributesOfFileSystemForPath:documentsDirectory error:NULL];
unsigned long long freeSpaceInBytes = [[fileAttributes objectForKey:NSFileSystemFreeSize] unsignedLongLongValue];

NSString * space = [NSString stringWithFormat:@"Free Space: %fll", freeSpaceInBytes /1024\. / 1024\. /1024.]; 

NSLog(@"freeSpaceInBytes %llull %fll", freeSpaceInBytes, freeSpaceInBytes /1024\. / 1024\. /1024.);

return space;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-10T21:34:26.497

```
static NSString* prettyBytes(uint64_t numBytes)
{
    uint64_t const scale = 1024;
    char const * abbrevs[] = { "EB", "PB", "TB", "GB", "MB", "KB", "Bytes" };
    size_t numAbbrevs = sizeof(abbrevs) / sizeof(abbrevs[0]);
    uint64_t maximum = powl(scale, numAbbrevs-1);
    for (size_t i = 0; i < numAbbrevs-1; ++i) {
        if (numBytes > maximum) {
            return [NSString stringWithFormat:@"%.4f %s", numBytes / (double)maximum, abbrevs[i]];
        }
        maximum /= scale;
    }
    return [NSString stringWithFormat:@"%u Bytes", (unsigned)numBytes];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-24T10:50:10.373

直接相当于 Swift 中的 Jody Hagins 回答：

```
static func prettyBytes(_ numBytes: UInt64) -> String {
    let scale: UInt64 = 1_024
    let abbrevs = [ "EB", "PB", "TB", "GB", "MB", "KB", "Bytes" ]
    var maximum = UInt64(powl(Double(scale), Double(abbrevs.count - 1)))
    for abbrev in abbrevs {
        if numBytes > maximum {
            return String(format: "%.4f %@", Double(numBytes) / Double(maximum), abbrev)
        }
        maximum /= scale
    }
    return String(format: "%u Bytes", numBytes)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-24T11:07:38.923

改进了 Swift 中的 Jody Hagins 答案，以在值为 1 时区分“字节”和“字节”。

```
static func prettyBytes(_ numBytes: UInt64) -> String {
    let scale: UInt64 = 1_024
    let abbrevs = [ "EB", "PB", "TB", "GB", "MB", "KB", "" ]
    var maximum = UInt64(powl(Double(scale), Double(abbrevs.count - 1)))
    var i = 0
    while maximum > 1, numBytes <= maximum {
        maximum /= scale
        i += 1
    }
    if maximum > 1 {
        return String(format: "%.4f %@", Double(numBytes) / Double(maximum), abbrevs[i])
    } else if numBytes != 1 {
        return String(format: "%u Bytes", numBytes)
    } else {
        return String(format: "%u Byte", numBytes)
    }
} 
```

# javascript - 如何测量 Google Docs 中的单词/插入符号位置？

> ID：10091819
> 
> 赞同：2
> 
> 时间：2012-04-10T15:37:23.967
> 
> 标签：javascript, google-docs, html, caret, cursor-position

对于那些没有使用过 Google Docs 编辑器的人，这里简要解释一下它的工作原理：

*   Google Docs 没有可见的可编辑 textarea 或 contentEditable 元素。
*   Google Docs 在单独的 iFrame 中侦听 keydown/press/up，它们将 OS 光标放置在其中以进行事件侦听。
*   当 iFrame 捕获事件时，Google 通过对可见文档执行等效操作来处理它。
*   Google Docs 中的“插入符号”是一个 DIV，其样式和脚本看起来和行为都像 OS 光标。

顺便说一句，这是我的要求：

我正在开发一个与 Google Doc 交互的插件，我需要能够做两件事：

*   使用不透明的叠加 DIV 突出显示单词。
*   确定单词内的光标位置。

关于如何处理这个问题，我已经用尽了很多想法，但到目前为止，我只设法为后一个问题找到了一个错误的解决方案（我执行退格，确定文本更改的位置并撤消退格）。

我正在寻找你能想出的所有最好的想法来解决这些问题。它们不需要是跨浏览器，但它们确实需要能够变成强大的东西，也可以处理诸如字体大小更改中线之类的事情。

一些额外的信息解释了 Google Doc 在 HTML 中的样子：

```
<wrapper> // Simplified wrapper containing margins, pagination and similar
  <div class="kix-paragraphrenderer"> // single DIV per page wrapping all content
    // Multiple paragraphs separated by linebreak created by Enter key:
    <div class="kix-paragraphrendeder">...</div>
    <div class="kix-paragraphrendeder">...</div>
    <div class="kix-paragraphrendeder">
      // Multiple wrapper divs created by Google's word wrapping:
      <div class="kix-lineview">...</div>
      <div class="kix-lineview">...</div>
      <div class="kix-lineview">
        // Single inner wrapper, still full width of first wrapper paragraph:
        <div class="kix-lineview-content">
          // Single wrapper SPAN containing full text of the line, but not display:block
          <span class="kix-lineview-text-block">
            // Multiple spans, one per new font change such as normal/bold text,
              // change in font size, indentation and similar:
            <span>This is normal text</span>
            <span style="font-size:40px; padding-left:4px;">This larger text.</span>
            <span style="font-weight:bold; padding-left:10px;">This is bold text</span>
            <span style="padding-left:4px;">More normal text</span>
          </span>
        </div>
      </div>
    </div>
  </div>
</wrapper> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T08:23:57.197

经过更多的修补后，我得出的结论是，尝试以编程方式确定光标位置相对于 a 中的字母是非常麻烦的（如果不是不可能的话）`<span>`，仅仅是因为`<span>`是可测量的最小元素（如果我错了，请纠正我）。

那么如何解决问题呢？这就是我最终做的事情：

*   我创建了一个屏幕外定位`<div>`
*   我得到了当前段落的文本 ( `<div class="kix-paragraphrenderer">`) - 我可以得到整个文本，但想限制计算负载。
*   我通过以下方式循环遍历其子级来提取段落的每个单个字符：
    *   循环遍历段落的 linveviews ( `<div class="kix-lineview">`)
    *   获取 lineview 内容 ( `<div class="kix-lineview-content">`)
    *   循环浏览 lineview 内容的文本块 ( `<span class="kix-lineview-text-block">`)
    *   循环遍历`<span>`文本块
    *   循环 `innerText`通过`<span>`
    *   我在屏幕外`<div>` *添加了从当前应用中提取的当前应用样式的`style.cssText`每个字符`<span>`*
    *   对于附加的每个字符，我测量它的宽度`<div>`并将其保存在一个数组中。我现在有每个角色的位置。
*   我测量光标相对于我的宽度的位置，瞧——我知道光标在文本中的位置。

这显然有点简单（我省略了有关不同元素的边距和填充的细节），但它涵盖了如何获得光标位置的想法。

它工作得很好，但有很多陷阱和需要大量的测量。最重要的是，如果您想将其用于任何内容，还需要对文本进行后解析，因为制表符、空格和换行符并不总是包含在`innerText`其中（取决于这些在文本中的位置，Google 可能会或可能不会他们通过新元素的定位）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T23:56:42.580

两年前我制作了类似 Kix 的 Google Docs。对于任何 HTML 设计，是的，也适用于 IE6 :-) 怎么样？我们只需要计算字母的绝对位置。如何？用没有布局的内联元素替换 textNode，这很重要，然后使用 Element.getClientRects 我记得我还需要只包装字母并通过快速可靠的[https://developer.mozilla.org/en-US/docs/Web计算其位置/API/Element.getBoundingClientRect](https://developer.mozilla.org/en-US/docs/Web/API/Element.getBoundingClientRect)

如何检测 home 键和 end 键的行和换行的技巧是基于一些垂直的启发式字母位置变化。就像基线不同，而不是停止插入符号行走。它非常快，有任何标记，没有任何缓存。圣杯:)

唯一无法解决的问题是合理的文本，因为字母是随机分布的，它们之间的空格是不可计算的。

那个项目现在已经死了[http://webeena.com](http://webeena.com)。糟糕的管理杀死了它（我几乎也是）。

# android - 在 toat 消息上创建一个线程

> ID：10091821
> 
> 赞同：0
> 
> 时间：2012-04-10T15:37:28.163
> 
> 标签：android, toast, telephonymanager

我有以下代码：

```
String state= bundle.getString(TelephonyManager.EXTRA_STATE);
if (state.equalsIgnoreCase(TelephonyManager.EXTRA_INCOMING_NUMBER)
{
Toast toast= new Toast(context);
toast.setGravity(Gravity.TOP,0,0);
toast.setDuration(Toast.Length_LONG);
toast.makeText(..).show();
toast.show();
} 
```

我需要继续敬酒，直到对方接电话。怎么做？我知道我必须在收到号码时创建并启动一个线程，并在对方回答时停止该线程。如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:53:21.483

试试这样。。

```
 Toast.Length_LONG gives toast for only 3.5 seconds.. 
```

所以..像这样创建一个 3.5 秒的倒数计时器..在你的活动的 onCreate

```
 String state= bundle.getString(TelephonyManager.EXTRA_STATE);
 MyCount counter;
counter=new MyCount(3500,1000);
counter.start(); 
```

MyCount 类..

```
 public class MyCount extends CountDownTimer{
 public MyCount(long millisInFuture, long countDownInterval) {
super(millisInFuture, countDownInterval);
}
 @Override
public void onFinish() {
 if (state.equalsIgnoreCase(TelephonyManager.EXTRA_INCOMING_NUMBER){
  Toast toast= new Toast(youractivity.this);
toast.setGravity(Gravity.TOP,0,0);
toast.setDuration(Toast.Length_LONG);
toast.makeText(..).show();
toast.show();
  counter= new MyCount(3500,1000);
 counter.start();
    }

}
 @Override
public void onTick(long millisUntilFinished) {
    }
}
} 
```

这会持续显示敬酒，直到您接听电话..或您的来电因超时而结束..

# c - 常量指针与常量值上的指针

> ID：10091825
> 
> 赞同：152
> 
> 时间：2012-04-10T15:37:35.207
> 
> 标签：c, pointers, constants

以下声明有什么区别？

```
char * const a;
const char * a; 
```

为了理解区别我写了这个小程序：

```
#include <stdio.h>
#include <stdlib.h>

int main (int argc, char **argv)
{
    char a = 'x';
    char b = 'y';

    char * const pc1 = &a;
    const char * pc2 = &a;

    printf ("Before\n");
    printf ("pc1=%p\n", pc1);
    printf ("*pc1=%c\n", *pc1);
    printf ("pc2=%p\n", pc2);
    printf ("*pc2=%c\n", *pc2);

    *pc1 = b;
/*     pc1 = &b; */

/*     *pc2 = b; */
    pc2 = &b;

    printf ("\n\n");

    printf ("After\n");
    printf ("pc1=%p\n", pc1);
    printf ("*pc1=%c\n", *pc1);
    printf ("pc2=%p\n", pc2);
    printf ("*pc2=%c\n", *pc2);

    return EXIT_SUCCESS;
} 
```

我编译了程序（使用 gcc 3.4）并运行了它。输出很好地突出了差异：

```
Before
pc1=ffbfd7e7
*pc1=x
pc2=ffbfd7e7
*pc2=x

After
pc1=ffbfd7e7
*pc1=y
pc2=ffbfd7e6
*pc2=x 
```

但是，我必须编写小程序才能得到答案。如果我不在机器旁（例如在面试时），我将无法回答这个问题。

有人可以通过评论上面的例子来解释`const`关键字是如何运作的吗？

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2012-04-10T15:39:53.797

```
char * const a; 
```

意味着指针是常量和不可变的，但指向的数据不是。
在这种情况下，您可以使用`const_cast`（在 C++ 中）或 c 样式强制转换来抛弃常量，因为数据本身不是常量。

```
const char * a; 
```

表示无法使用指针 a 写入指向的数据。在这种情况下，使用`const_cast`(C++) 或 c 风格的强制转换来抛弃 const 会导致**Undefined Behavior**。

* * *

## 回答 #2

> 赞同：104
> 
> 时间：2014-05-20T09:11:11.037

要解析复杂的类型，您从变量开始，向左走，然后向外盘旋。如果没有任何数组或函数需要担心（因为它们位于变量名的右侧），这将成为从右到左读取的情况。

所以`char *const a;`你有`a`，它是一个指向 a 的`const`指针 ( `*`) `char`。换句话说，您可以更改`a`指向的字符，但不能`a`指出任何不同的地方。

`const char* b;`与你相反，它是指向 a which `b`is 的指针 ( `*`) 。您可以指出任何您喜欢的字符，但不能使用 更改该字符的值。`char``const``b``*b = ...;`

当然，您也可以同时拥有两种 const-ness 风格：`const char *const c;`.

* * *

## 回答 #3

> 赞同：65
> 
> 时间：2012-04-10T16:01:52.107

```
char * const a; 
```

`*a`是可写的，但`a`不是；换句话说，您可以修改*指向*的值`a`，但不能修改`a`自身。 `a`是一个指向 的*常量指针`char`*。

```
const char * a; 
```

`a`是可写的，但`*a`不是；换句话说，你可以修改`a`（指向一个新的位置），但是你不能修改.*指向*的值`a`。

请注意，这与

```
char const * a; 
```

在这种情况下，`a`是指向 a 的*指针`const char`*。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2014-07-05T07:38:08.587

`char * const a`现在您知道和之间的区别了`const char * a`。很多时候，如果它是常量指针还是指向常量变量的指针，我们会感到困惑。

怎么读？按照下面的简单步骤来识别上两者。

让我们看看如何阅读下面的声明

```
char * const a; 
```

从右到左读

现在开始`a`，

1\. 旁边`a`有`const`。

字符 * `(const a)`;

--->`a`一个`constant` `(????)`.

2\. 现在继续你得到`*`

字符`(* (const a))`;

---> `a`一个`constant` `pointer`to也是如此`(????)`。

3\. 走过去就有`char`

`(char (* (const a)))`;

--->`a`是`constant` `pointer`一个`character`变量

```
a is constant pointer to character variable. 
```

不是很容易阅读吗？

同样对于第二次声明

```
const char * a; 
```

现在再次开始`a`，

1\. 旁边`a`有`*`

--->`a`一个`pointer`to (????)

2\. 现在有`char`

---> 原来`a`如此`pointer` `character`，

好吧，这没有任何意义！！！所以洗牌`pointer`和`character`

--->所以`a`是`character` `pointer``(?????)`

3\. 现在你有`constant`

---> 所以`a`是可变`character` `pointer`的`constant`

但是，尽管您可以弄清楚声明的含义，但让它听起来更明智。

```
a is pointer to constant character variable 
```

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2014-08-13T09:54:54.733

理解差异的最简单方法是考虑不同的可能性。有两个对象需要考虑，指针和指向的对象（在这种情况下，'a' 是指针的名称，指向的对象是未命名的，类型为 char）。可能性是：

1.  没有什么是常量
2.  指针是常量
3.  指向的对象是 const
4.  指针和指向的对象都是 const。

这些不同的可能性可以用 C 表示如下：

1.  字符 * a;
2.  字符 * 常量一个；
3.  常量字符 * a;
4.  常量字符 * 常量 a;

我希望这说明了可能的差异

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-04-10T15:39:57.120

第一个是指向 char 的常量指针，第二个是指向常量 char 的指针。您没有触及代码中的所有案例：

```
char * const pc1 = &a; /* You can't make pc1 point to anything else */
const char * pc2 = &a; /* You can't dereference pc2 to write. */

*pc1 = 'c' /* Legal. */
*pc2 = 'c' /* Illegal. */

pc1 = &b; /* Illegal, pc1 is a constant pointer. */
pc2 = &b; /* Legal, pc2 itself is not constant. */ 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-08-03T12:14:06.203

我先口头解释一下，然后举个例子：

指针对象可以声明为 const 指针或指向 const 对象的指针（或两者）：

**const 指针**不能重新分配以指向与最初分配的 对象不同的对象，但它可用于修改它指向的对象（称为“指针对象”）。
因此，引用变量是常量指针的另一种语法。

**另一方面，指向 const object**的指针可以重新分配以指向另一个相同类型或可转换类型的对象，但它不能用于修改任何对象。

**指向 const 对象**的 const 指针也可以声明，既不能用于修改指针对象，也不能重新分配以指向另一个对象。

例子：

```
void Foo( int * ptr,
         int const * ptrToConst,
         int * const constPtr,
         int const * const constPtrToConst ) 
{ 
    *ptr = 0; // OK: modifies the "pointee" data 
    ptr = 0; // OK: modifies the pointer 

    *ptrToConst = 0; // Error! Cannot modify the "pointee" data
     ptrToConst = 0; // OK: modifies the pointer 

    *constPtr = 0; // OK: modifies the "pointee" data 
    constPtr = 0; // Error! Cannot modify the pointer 

    *constPtrToConst = 0; // Error! Cannot modify the "pointee" data 
    constPtrToConst = 0; // Error! Cannot modify the pointer 
} 
```

乐意效劳！祝你好运！

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-12-25T15:08:20.963

以上是很好的答案。这是记住这一点的简单方法：

a 是一个指针

*a 是值

现在，如果你说“const a”，那么指针就是 const。(即 char * const a;)

如果你说“const *a”，那么值就是 const。(即 const char * a;)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-02-03T14:54:24.950

您可以使用 cdecl 实用程序或其在线版本，例如[https://cdecl.org/](https://cdecl.org/)

例如：

`void (* x)(int (*[])());` 是一个 `declare x as pointer to function (array of pointer to function returning int) returning void`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-02-07T08:24:34.370

尝试以简单的方式回答：

```
char * const a;  => a is (const) constant (*) pointer of type char {L <- R}. =>( Constant Pointer )
const char * a;  => a is (*) pointer to char constant             {L <- R}. =>( Pointer to Constant) 
```

常量指针：

指针是不变的！！即，它所持有的地址不能更改。它将存储在只读存储器中。

让我们尝试更改指针的地址以了解更多信息：

```
char * const a = &b; 
char c;
a = &c; // illegal , you can't change the address. `a` is const at L-value, so can't change. `a` is read-only variable. 
```

这意味着一旦常量指针指向某个东西，它就永远存在。

`a`只有指针指向`b`。

但是，您可以更改`b`例如的值：

```
char b='a';
char * const a =&b;

printf("\n print a  : [%c]\n",*a);
*a = 'c';
printf("\n now print a  : [%c]\n",*a); 
```

指向常量的指针：

指针指向的值不能改变。

```
const char *a;
char b = 'b';
const char * a =&b;
char c;
a=&c; //legal

*a = 'c'; // illegal , *a is pointer to constant can't change!. 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-03-31T08:04:36.773

```
const char * a; 
```

这表明指向常量字符的指针。例如。

```
char b='s';
const char *a = &b; 
```

这里`a` 指向一个常量 char('s', 在这种情况下)。你不能`a`用来改变那个值。但是这个声明并不意味着它指向的值**真的是一个常量**，它只是意味着这个值是一个就相关而言是恒定`a`的。您可以`b`通过更改 的值直接更改 的值`b`，但不能通过`a`指针间接更改值。

`*a='t'; //INVALID b='t' ; //VALID`

```
char * const a=&b 
```

这声明了一个指向 char 的常量指针。它限制`a`仅指向，`b`但它允许您更改`b`.

希望能帮助到你！！！:)

# sql - 如何检查我在 SQL Server 中的数据是否有回车和换行？

> ID：10091827
> 
> 赞同：13
> 
> 时间：2012-04-10T15:37:40.303
> 
> 标签：sql, sql-server

面对一个问题，我的SQL Server中存储的数据好像没有正确存储，简单来说，如何验证一个varchar数据中是否有回车换行呢？我尝试将它们打印出来，不显示特殊字符。谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-10T15:42:11.237

您可以使用 SQL Server 的`char(n)`和函数来匹配子句`contains()`中的字段内容。`WHERE`

```
回车：char(13)
换行：char(10)

```

以下 SQL 将查找`some_table`的值`some_field`包含换行符和/或回车符的所有行：

```
SELECT * FROM some_table 
WHERE CONTAINS(some_field, char(13)) OR CONTAINS(some_field, char(10)) 
```

要删除值中的回车符，`some_field`您可以使用`replace()`函数 long with `char()`and `contains()`。SQL 看起来像：

```
UPDATE some_table 
SET some_field = REPLACE(some_field, char(13), '')
WHERE CONTAINS(some_field, char(13)) 
```

要删除新行，您可以使用该更新的 char(10) 版本跟进最后一条语句。你如何做这一切取决于你的文本包含什么类型的换行符。但是，根据从新行插入/粘贴文本的位置，可能是 \r\n 或 \n 因此对 \r 和 \n 字符运行更新比假设您获得一个版本的换行符或另一个。

请注意，如果换行符被删除并且您想保留它们，那么您必须在入口处解决问题。您无法替换或修复已删除的内容，因此您应该将原始文本数据保存在包含原始未修改文本的新列中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-10T15:43:52.843

补充其他人所说的；当我需要在 T-SQL 中嵌入换行符时，我倾向于这样做；

```
DECLARE @nl CHAR(2) = CHAR(13) + CHAR(10); 
```

..然后`@nl`根据需要使用。这自然是针对 Windows 行尾的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T15:40:08.603

看一下`Char`功能。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/ms187323.aspx)。这将有助于查找特殊字符。

# c# - 会话状态变量和单例类

> ID：10091831
> 
> 赞同：0
> 
> 时间：2012-04-10T15:37:51.743
> 
> 标签：c#, asp.net, .net, singleton, session-state

我有一种情况，我需要从执行近半分钟的查询中检索数据并将其带到网页。（没有办法减少这个时间，因为已经对其进行了最大程度的优化）我为我的应用程序使用了一个四层架构以及实体框架（EF、数据访问层、业务逻辑层、UI）。我正在尝试在创建**DAL**的实例时使用单例方法（DAL 反过来从数据库中检索数据），以便我能够重新使用该实例，因此不会*在同一个实例中创建其他实例会话*。如何设置会话状态并检查状态服务器中实例的可用性？

```
public static Singleton getInstance() {
     if (**instance == null**)
       instance = new Singleton();
     return instance;
   } 
```

块内应该有什么`if`？`if`我应该在区块中检查什么条件？我真的不确定我必须做什么。

PS：此会话必须有 5 分钟的超时。我听说这可以在*Web.config*文件中指定。是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:35:26.593

在我看来，您有一个定义明确的架构，适合依赖注入。使用 DI，您可以让您的 IOC 容器返回一个单例对象或瞬态对象。但是，在 Web 环境中使用单例时要非常小心，因为它们通常会带来比其价值更多的麻烦。

如果您正在运行的查询包含用户特定的数据，那么我可能会将该查询的结果放入构成应用程序 UI 部分的代码中的会话中，如果您使用的是控制器或 MVP 中的 MVC 之类的模式主持人。

如果没有使用这些模式，那么您可以考虑将信息放入业务层内的会话中，但前提是您包装会话并将该依赖项注入您的业务对象，例如“IUserSession”之类的东西。业务项目不应包含对“system.Web”或类似内容的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T17:23:18.110

老实说，您应该使用实体框架上下文并在每次需要访问数据库时创建它，即在每个方法中。它被优化为以这种方式使用。连接池将确保每次重新创建 EF 上下文时不会受到惩罚。这是最佳实践。

但是您的 DAL 可能不仅仅是简单的数据库访问。如果您想将它作为每个会话单独的单例，您必须在第一个请求时创建实例，将其存储到 Session 中并在使用前检查它是否存在。使用线程安全，代码可能如下所示：

```
class DALClass
{
    private static object instanceLock = new object();

    public static DALClass Instance
    {
        get
        {
            if (Session["DALInstance"] == null)
            {
                lock (instanceLock)
                {
                    if (Session["DALInstance"] == null)
                    {
                        Session["DALInstance"] = new DALClass();
                    }
                }
            }

            return (DALClass)Session["DALInstance"];
        }
    }
} 
```

# html - 如何在 StackOverflow 中实现代码显示样式？

> ID：10091832
> 
> 赞同：1
> 
> 时间：2012-04-10T15:37:55.843
> 
> 标签：html, css

```
aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa 
```

我有一行代码（要在一行中显示很长）要在一行中显示在网页上，就像上面一样。

我不想被包裹成两行。

我只能使用 css 来完成这个吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:48:57.247

当您使用的单词之间有空格`overflow:auto`是不够的时，要真正做到这一点，您还需要`text-overflow: nowrap`.

[http://jsfiddle.net/kZV3j/](http://jsfiddle.net/kZV3j/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:42:02.813

以下是 SO 的代码块的外观：

```
<pre>
  <code>
    <span>...</span>
  </code>
</pre> 
```

和CSS：

```
pre {
  overflow: auto;
} 
```

**演示：http: [//jsfiddle.net/TfeLm/](http://jsfiddle.net/TfeLm/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T15:42:27.213

我想你正在寻找`overflow:auto`：

```
<div style="overflow:auto; width:200px;">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T15:43:14.123

创建一个包含元素（例如 div），然后在其上设置一些基本的 CSS 属性来定义宽度，并处理溢出。像这样：

HTML

```
<div class="short">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div>​ 
```

CSS：

```
.short {
    width:400px;
    padding: 10px;
    overflow-x:scroll;
}​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/6qJYr/)**。适用于所有现代浏览器和 IE8。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T15:44:05.137

我认为您正在寻找[`overflow`](http://www.w3.org/TR/CSS2/visufx.html#overflow)具有`auto`价值的财产：

```
<style>pre { width: 200px; overflow: auto; }</style>
<pre><code>&lt;p&gt;Some tooooo long text on one line&lt;/&gt;</code></pre> 
```

现场示例：http: [//jsbin.com/uhuveg/](http://jsbin.com/uhuveg/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-10T17:42:13.210

我相信你应该使用下面的 CSS

```
#id {
    width: 400px;
    padding: 5px;
    background: #C3C3C3;
    overflow-x: scroll
}​ 
```

看这个活生生的[例子](http://jsfiddle.net/jackdent/hDJqB/)

# django - Django admin change_list 视图获取 ChangeList 查询集 - 比我的猴子补丁更好的解决方案

> ID：10091833
> 
> 赞同：10
> 
> 时间：2012-04-10T15:37:57.250
> 
> 标签：django, django-admin

我需要在 django admin 中获取更改列表视图查询集。目前，我有这个猴子补丁，它会进行 4 个额外的查询，所以我正在寻找更好的解决方案。

我的观点是：我想将一些额外的值传递给我从创建查询中获得的 django admin change_list.html 模板。对于这些查询，我需要在 django admin 更改列表视图中使用的查询集，并应用了请求过滤器。这是我看到过滤、排序等的相同数据。我想根据这些数据制作图表。

你了解我吗？谢谢

```
#admin.py
from django.contrib.admin.views.main import ChangeList

class TicketAdmin(admin.ModelAdmin):

    def changelist_view(self, request, extra_context=None):

        cl = ChangeList(request, 
                        self.model, 
                        self.list_display, 
                        self.list_display_links, 
                        self.list_filter, 
                        self.date_hierarchy, 
                        self.search_fields, 
                        self.list_select_related, 
                        self.list_per_page,
                        self.list_max_show_all, 
                        self.list_editable, 
                        self) # 3 extra queries
        filtered_query_set = cl.get_query_set(request) # 1 extra query

        currencies_count = filtered_query_set.values('bookmaker__currency').distinct().count()

        extra_context = {
            'currencies_count': currencies_count,
        }
        return super(TicketAdmin, self).changelist_view(request, extra_context=extra_context) 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-30T01:20:25.487

我不知道这是否回答了您的问题，但是该类`ChangeList`有一个名为`query_set`（您可以在此处找到代码`https://github.com/django/django/blob/master/django/contrib/admin/views/main.py`）的属性，该属性已经包含查询集。

顺便说一句，`changelist_view()`函数 (source at `https://github.com/django/django/blob/master/django/contrib/admin/options.py`) 返回一个`TemplateResponse` (source at [https://github.com/django/django/blob/master/django/template/response.py](https://github.com/django/django/blob/master/django/template/response.py)`context_data` )，它有一个指向上下文的变量。您可以尝试扩展此变量的内容。

下面是未经测试的代码

```
class TicketAdmin(admin.ModelAdmin):

    def changelist_view(self, request, extra_context=None):
        response = super(TicketAdmin, self).changelist_view(request, extra_context)
        filtered_query_set = response.context_data["cl"].queryset

        currencies_count = filtered_query_set.values('bookmaker__currency').distinct().count()
        extra_context = {
             'currencies_count': currencies_count,
        }
        response.context_data.update(extra_context)

        return response 
```

# c++ - 如何计算 ANSI C 代码性能？

> ID：10091837
> 
> 赞同：0
> 
> 时间：2012-04-10T14:49:01.110
> 
> 标签：c++, c, profiling

我已经用 ANSI C 编写了一个简单的代码，现在想要执行一些测量。

我测量了执行时间（`clock()`在 Windows 操作系统和 Linux 操作系统下使用函数`clock_gettime()`）。

现在我想计算一下，在运行我的这段代码时，我的 CPU 执行了多少 IPS（每秒指令）。（是的，我知道 MIPS 是一个可怜的参数，但即使这样，我也想计算一下）

也很高兴看到执行例如添加 3 个元素和我执行的其他操作需要多少 CPI（每条指令周期）。谷歌说如何使用计算器计算 MIPS 的数量，关于我的 CPU 的一些知识（它的时钟速度），简单的数学和一堆其他参数（如 CPI），但没有说如何获得这些！

我还没有找到任何 C/C++ 函数可以返回执行例如访问局部变量所需的时钟周期数。查找 Intel/AMD 的现代 CPU 参考手册也是一个问题，其中包含有关操作码和其他信息的信息。

我手动计算过，我的 ANSI C 代码需要 37 次操作，但这些是 ANSI C 操作，而不是 CPU 指令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:38:36.080

在 Windows 上获得高精度计时的最简单方法是 PerformanceCounter，请参阅 [如何使用 QueryPerformanceCounter？](https://stackoverflow.com/questions/1739259/how-to-use-queryperformancecounter)
然后你只需要一些函数来执行你对计时感兴趣的操作。您必须小心缓存等，因此多次运行计算并查看时间分布

# android - Android 应用在模拟器上运行但在手机上运行（连接问题）

> ID：10091838
> 
> 赞同：1
> 
> 时间：2012-04-10T15:38:15.170
> 
> 标签：android, android-emulator, connection

我有一个应用程序通过从 php API 获取信息从谷歌日历获取信息，问题是该应用程序可以在模拟器上运行，但是当我尝试在手机上使用它时，只有一个没有信息的常规黑屏。这似乎是一个连接问题（不像我的第一个想法）。模拟器 android 版本是 2.3.3 和我的手机一样。

这是我的代码：

```
 public class AgendaActivity extends Activity {
    /** Called when the activity is first created. */
  public static final String CAL= "http://192.168.1.58/calendar.php";
  ListView vue;
  @Override
  public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
  vue = (ListView) findViewById(R.id.listView1);
      List<HashMap<String, String>> liste = new ArrayList<HashMap<String,String>>();       
      HashMap<String, String> element;
    String result = getServerData(CAL);
    String[] chaine = result.split(";");
    for(int i=1;i<chaine.length-1;i++)
    {
                String[] event = chaine[i].split(":");
                element = new HashMap<String, String>();
                element.put("titre", event[1]);
                element.put("date",event[3]+":"+event[4] );
                liste.add(element);
    }
      ListAdapter adapter = new SimpleAdapter(this,  
            liste,
            android.R.layout.simple_list_item_2,
            new String[] {"titre", "date"}, 
            new int[] {android.R.id.text1, android.R.id.text2 });
      vue.setAdapter(adapter);      
}
private String getServerData(String returnString)  {    
    InputStream is = null;
    String result = "";
    File file = new File("sdcard/event.txt");
    FileWriter fw;
    FileReader fr;
    ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("contact",""));
    HttpResponse response=null;
    try{
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(returnString);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
         response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();   
    }catch(Exception e){
        Log.e("log_tag", "Error in http connection " + e.toString());
        String str = "";
        int i = 0;  
        try {
            fr =new FileReader(file);
            while((i = fr.read()) != -1)
                str += (char)i;
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        returnString=str;
        return returnString;    
    }
    try{
        BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result=sb.toString();
    }catch(Exception e){
        Log.e("log_tag", "Error converting result " + e.toString());
    }
    try{
        JSONArray jArray = new JSONArray(result);   
        for(int i=0;i<jArray.length();i++)
        {
            JSONObject json_data = jArray.getJSONObject(i);
            returnString = ""+ json_data;
        }
        }catch(JSONException e)
    {  
        returnString=e.toString();
    }
    try {
            fw = new FileWriter(file);
        fw.write(returnString);
        fw.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return returnString; }      
 } 
```

模拟器上的应用程序运行良好，但是当我启动应用程序时，我在错误部分进入 logcat：

> ```
> 04-10 15:03:56.493: E/Zygote(33): setreuid() failed. errno: 2
> 04-10 15:04:09.523: E/Zygote(33): setreuid() failed. errno: 17
> 04-10 15:04:12.363: E/BatteryService(72): usbOnlinePath not found
> 04-10 15:04:12.363: E/BatteryService(72): batteryVoltagePath not found
> 04-10 15:04:12.363: E/BatteryService(72): batteryTemperaturePath not found
> 04-10 15:04:12.393: E/SurfaceFlinger(72): Couldn't open /sys/power/wait_for_fb_sleep or /sys/power/wait_for_fb_wake
> 04-10 15:04:12.723: E/SensorService(72): couldn't open device for module sensors (Invalid argument)
> 04-10 15:04:20.463: E/EventHub(72): could not get driver version for /dev/input/mouse0, Not a typewriter
> 04-10 15:04:20.463: E/EventHub(72): could not get driver version for /dev/input/mice, Not a typewriter
> 04-10 15:04:20.493: E/System(72): Failure starting core service
> 04-10 15:04:20.493: E/System(72): java.lang.SecurityException
> 04-10 15:04:20.493: E/System(72):   at android.os.BinderProxy.transact(Native Method)
> 04-10 15:04:20.493: E/System(72):   at  android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
> 04-10 15:04:20.493: E/System(72):   at android.os.ServiceManager.addService(ServiceManager.java:72)
> 04-10 15:04:20.493: E/System(72):   at com.android.server.ServerThread.run(SystemServer.java:206)
> 04-10 15:04:21.153: E/SoundPool(72): error loading /system/media/audio/ui/Effect_Tick.ogg
> 04-10 15:04:21.153: E/SoundPool(72): error loading /system/media/audio/ui/KeypressStandard.ogg
> 04-10 15:04:21.163: E/SoundPool(72): error loading /system/media/audio/ui/KeypressSpacebar.ogg
> 04-10 15:04:21.163: E/SoundPool(72): error loading /system/media/audio/ui/KeypressDelete.ogg
> 04-10 15:04:21.163: E/SoundPool(72): error loading /system/media/audio/ui/KeypressReturn.ogg
> 04-10 15:04:21.245: E/UsbObserver(72): java.lang.NullPointerException
> 04-10 15:04:21.245: E/UsbObserver(72):  at com.android.server.UsbObserver.init(UsbObserver.java:131)
> 04-10 15:04:21.245: E/UsbObserver(72):  at com.android.server.UsbObserver.<init>(UsbObserver.java:65)
> 04-10 15:04:21.245: E/UsbObserver(72):  at com.android.server.ServerThread.run(SystemServer.java:402)
> 04-10 15:04:22.623: E/ThrottleService(72): Could not open GPS configuration file /etc/gps.conf
> 04-10 15:04:26.083: E/logwrapper(173): executing /system/bin/tc failed: No such file or directory
> 04-10 15:04:26.123: E/logwrapper(174): executing /system/bin/tc failed: No such file or directory
> 04-10 15:04:26.239: E/logwrapper(175): executing /system/bin/tc failed: No such file or directory
> 04-10 15:17:37.467: E/InputDispatcher(72): channel '407739a0 com.android.agenda/com.android.agenda.AgendaActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x8
> 04-10 15:17:37.467: E/InputDispatcher(72): channel '407739a0 com.android.agenda/com.android.agenda.AgendaActivity (server)' ~ Channel is unrecoverably broken and will be disposed! 
> ```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:13:03.393

我终于找到问题出在哪里了。我没有更改我的 xampp 的设置以允许从我只在本地工作的 oustide 进行连接。

# combobox - 如何在 WiX 对话框中更新或刷新 ComboBox 的内容？

> ID：10091840
> 
> 赞同：1
> 
> 时间：2012-04-10T15:38:16.933
> 
> 标签：combobox, wix

我想实现一个众所周知的场景，即 WiX 对话框中 ComboBox 的内容取决于用户输入的先前 TextBox 值的内容。这将允许我驱动需要运行 SQL 脚本的组件的安装。

首先，用户指定数据库服务器的名称。

其次，我希望 ComboBox 显示所述服务器上可用数据库的列表。

这似乎是一个足够简单的请求，据我所知，Windows Installer / WiX 不容易支持。但是，我想解决并尽可能接近地实现此行为。

最接近的实现可能是什么？

我尝试了一个触发自定义操作的显式按钮。我尝试了一个重复的相同对话框，该对话框被导航到，但我似乎无法将两种行为结合起来——CA 执行和对话框导航。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T06:48:11.383

一般的做法是这样的：

*   创建一个包含编辑框控件的自定义对话框
*   创建一个包含组合框控件的不同对话框
*   在第一个对话框的 Next 按钮上执行自定义操作，该操作填充第二个对话框上的组合框

这不能使用单个对话框来完成。

此外，您需要编写自定义代码来填充组合框。您可以在此处找到一些示例 VBScript 代码：http: [//www.advancedinstaller.com/user-guide/tutorial-combobox-listbox.html#combolist-examples](http://www.advancedinstaller.com/user-guide/tutorial-combobox-listbox.html#combolist-examples)

这是高级安装程序的示例，但示例 .VBS 自定义操作可用于任何安装工具。

# ruby-on-rails-3 - 在rails中用不同的格式用文字构建时间版本的最佳方法是什么

> ID：10091842
> 
> 赞同：0
> 
> 时间：2012-04-10T15:38:20.927
> 
> 标签：ruby-on-rails-3

我需要构建一个可以本地化的版本，我需要不同版本的文本。

这些功能的最佳位置在哪里，以便可以从我的视图代码中访问它们？

我在哪里可以找到原始代码的来源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:30:59.740

放在哪里：`ApplicationHelper`（app/helpers/application_helper.rb）可能是最好的地方。

原始代码：`time_ago_in_words`位于`DateHelper`( [http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html) )，基于`distance_of_time_in_words`. 这是 Github 的链接：[https ://github.com/rails/rails/blob/bd8a9701c27b4261e9d8dd84aebbde6ba784ed83/actionpack/lib/action_view/helpers/date_helper.rb#L67](https://github.com/rails/rails/blob/bd8a9701c27b4261e9d8dd84aebbde6ba784ed83/actionpack/lib/action_view/helpers/date_helper.rb#L67)

也就是说......在我看来，DateHelper 已经与 i18n 接口。您应该确保确实需要复制此功能。

# php - 用德语格式化缩减日期

> ID：10091844
> 
> 赞同：0
> 
> 时间：2012-04-10T15:38:33.600
> 
> 标签：php, date, internationalization

我有一个定义为“今天 - 30 天”的 $start_date。尝试将其转换为德语表示法时，日期打印为 01.Januar 1970（而不是 10\. March 2012）我理解这意味着 Unix 将结果解释为“0”，但我不知道我做错了什么。

```
$start_date = date("Y-m-d", strtotime("-30 days"));   
setlocale(LC_TIME, 'de_DE');
$start_date_DE = strftime('%d. %B %Y',$start_date); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:47:48.853

问题是[`strftime`](http://php.net/strftime)需要一个时间戳作为第二个参数，但是您将一个字符串传递给它（格式为“Ymd”）。所以它返回了 UNIX 纪元（1/1/1970）。

试试这个：

```
$start_date = strtotime("-30 days");   
setlocale(LC_TIME, 'de_DE');
$start_date_DE = strftime('%d. %B %Y',$start_date); 
```

[http://codepad.org/pK9J07Wm](http://codepad.org/pK9J07Wm)

# jquery - 来自Phonegap的Facebook Apprequest

> ID：10091845
> 
> 赞同：1
> 
> 时间：2012-04-10T15:38:39.587
> 
> 标签：jquery, facebook, mobile, apprequests

我已经构建了一个在移动网络上运行良好的 jQuery Mobile 项目。我们已将它加载到 Phonegap 中，**除了**使用 JavaScript SDK的 Facebook **apprequests功能外，一切正常。**

似乎它永远不会到达**//connect.facebook.net/en_US/all.js#xfbml=1&appId=placeholder**（添加占位符以隐藏我们的应用程序 ID），因为一切都是相对/本地的。

如果我们在 URL 前面加上**http:**我们会访问 Facebook，但会收到错误：

**应用程序配置不允许给定 URL。**

我怀疑问题在于 Phonegap 开发在本地运行。有没有办法在不使用 Phonegap Facebook 插件的情况下解决这个问题？

# sql - SQL Server 2005 数据库邮件失败

> ID：10091846
> 
> 赞同：0
> 
> 时间：2012-04-10T15:38:40.600
> 
> 标签：sql, sql-server, sql-server-2005, sqlmail

我在 SQL 2005 机器上运行数据库邮件。有时邮件无法发送，通过查询 msdb.dbo.sysmail_mailitems 表我可以看到有已发送状态为“2”的项目，这是失败的。我可以查询**sysmail_faileditems**表来列出所有失败的邮件。

无论如何我可以处理/重新发送这些失败的邮件吗？

每天创建一个作业来查询这个表是否合理，通过使用**CURSOR**来一个一个地重新发送邮件，然后将它们从表中一个一个地删除。

如果您有更好的建议/想法，请告诉我。

非常感谢卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:56:17.270

首先，我建议您查询 faileditems 以确定您失败的主要原因：

```
SELECT  items.subject ,
        items.last_mod_date ,
        l.description
FROM    dbo.sysmail_faileditems AS items
        INNER JOIN dbo.sysmail_event_log AS l ON items.mailitem_id = l.mailitem_id 
```

如果没有什么可以轻松修复，您可以通过循环遍历 sysmail_mailitems 表并根据 faileditems 日志中的故障类型（超时等）重新发送它们 - 此博客建议中的一些很好的示例：[http://justgeeks.blogspot.co.uk/2007/05/resending-sysmail-emails.html](http://justgeeks.blogspot.co.uk/2007/05/resending-sysmail-emails.html)

我个人最喜欢的：

```
CREATE PROCEDURE sysmail_resend_timeout
AS 
    BEGIN
        SET NOCOUNT ON

        DECLARE SYSMAIL_LOG_RESEND_CURSOR CURSOR READ_ONLY
        FOR
            SELECT DISTINCT
                    l.mailitem_id ,
                    p.name ,
                    m.recipients ,
                    m.subject ,
                    m.body_format ,
                    m.body
            FROM    msdb.dbo.sysmail_log l WITH ( NOLOCK )
                    JOIN msdb.dbo.sysmail_mailitems m WITH ( NOLOCK ) ON m.mailitem_id = l.mailitem_id
                    JOIN msdb.dbo.sysmail_profile p WITH ( NOLOCK ) ON p.profile_id = m.profile_id
            WHERE   l.event_type = 3
                    AND m.sent_status = 2
                    AND l.description LIKE '%The operation has timed out%'
            ORDER BY l.mailitem_id

        OPEN SYSMAIL_LOG_RESEND_CURSOR

        WHILE ( 1 = 1 ) 
            BEGIN
                DECLARE @mailitem_id INT ,
                    @profile_name NVARCHAR(128) ,
                    @recipients VARCHAR(MAX) ,
                    @subject NVARCHAR(255) ,
                    @body_format VARCHAR(20) ,
                    @body NVARCHAR(MAX)
                FETCH NEXT FROM SYSMAIL_LOG_RESEND_CURSOR INTO @mailitem_id, @profile_name, @recipients, @subject, @body_format, @body
                IF NOT @@FETCH_STATUS = 0 
                    BEGIN
                        BREAK
                    END

                PRINT CONVERT(VARCHAR, GETDATE(), 121) + CHAR(9) + CONVERT(VARCHAR, @mailitem_id) + CHAR(9) + @recipients

                EXEC msdb.dbo.sp_send_dbmail 
                    @profile_name = @profile_name ,
                    @recipients = @recipients ,
                    @subject = @subject ,
                    @body_format = @body_format ,
                    @body = @body

                UPDATE  msdb.dbo.sysmail_mailitems
                SET     sent_status = 3
                WHERE   mailitem_id = @mailitem_id

            END

        CLOSE SYSMAIL_LOG_RESEND_CURSOR

        DEALLOCATE SYSMAIL_LOG_RESEND_CURSOR

    END
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:02:03.927

我知道这并不是您真正想听到的答案，但我总是尝试将邮件功能解耦。如果需要及时发送邮件，我可能会使用触发器来生成外部进程，但我让外部脚本完成发送邮件的实际工作。这样，MTA 会处理瞬时连接错误，我不必担心特殊的簿记算法。

# asp.net - 如何在不重新加载页面的情况下清除gridview

> ID：10091847
> 
> 赞同：1
> 
> 时间：2012-04-10T15:38:44.123
> 
> 标签：asp.net, vb.net, gridview, data-binding

我的asp.net 页面(vb.net) 上有一个gridview 控件。我还有一个“取消”按钮，当按下它时，应该清除它当前内容的网格视图。

但是，每当按下取消按钮时，它只会重新加载页面，并且 gridview 仍然存在，其中包含我想要清除的相同数据。

根据我在 stackoverflow 上找到的建议，我将数据源设置为空，但这不起作用。

这是我的取消按钮代码：

```
 Private Sub btnCancel_Click(sender As Object, e As System.EventArgs) Handles btnCancel.Click
    gvQuizReport.DataSource = Nothing
    gvQuizReport.DataBind()
End Sub 
```

欢迎大家提出意见！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:51:31.217

你可以试试：

```
gvQuizReport.Columns.Clear() 
```

尽管正如@Leniel Macaferi 所说，隐藏gridview 也是一种可能的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T16:24:56.463

如果您真的想在不重新加载页面的情况下清除，您可以使用客户端脚本来隐藏网格对象。

[jQuery隐藏](http://jqueryui.com/demos/hide/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-10T19:14:50.047

由于您对更新面板表现出一定的兴趣，这里有一些入门代码，以防您不熟悉：

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Always">
        <ContentTemplate>
            <asp:GridView ID="GridView1" runat="server">
            </asp:GridView>
        </ContentTemplate>
</asp:UpdatePanel> 
```

如果您的页面上已有一个`scriptmanager`，则无需添加另一个（您将收到错误消息）。如果您在实施更新面板时遇到任何问题，请随时发布另一个问题，有很多人可以帮助您

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-10T15:45:29.303

您显示的代码应该“清除”结果，但如果您不想显示任何内容，您可以使用`gvQuizReport.Visible = False`;隐藏 gridview

# java - 打印时 JTable 显示为框

> ID：10091850
> 
> 赞同：1
> 
> 时间：2012-04-10T15:38:59.943
> 
> 标签：java, swing, jtable

我有以下方法，它创建一个 JTable，然后通过显示为矩形而不是带有页眉和页脚的页面将其打印出来。

```
public void printModules(){
    MessageFormat header = new MessageFormat("Modules " + new Date());
    MessageFormat footer = new MessageFormat("Created by Assignments Database");
    try {
        JTable jtModules = new JTable(new ModulesTableModel(Controller.getInstance().getModules()));
        jtModules.setShowHorizontalLines(true);
        jtModules.setShowVerticalLines(true);
        jtModules.setShowGrid(true);

        boolean complete = jtModules.print(JTable.PrintMode.NORMAL, header, footer, true, null, false, null);

        if(complete){
            System.out.println("Printed");
        } else{
            System.out.println("Printing Cancelled");
        }
    } catch (PrinterException e) {
        e.printStackTrace();
    }
} 
```

还有什么问题？表中有数据，因为其中一个面板中显示了从相同数据创建的数据。

在我的抽象表模型中，我实现了以下方法：

*   构造函数
*   获取行数
*   获取列数
*   获取值
*   获取列名

还有其他需要创建的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T16:32:05.357

您需要显示表格才能打印它，因此将其添加到 a `JFrame`，`frame.setVisible(true);`然后`frame.setVisible(false);`
这将使其打印。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T15:53:03.960

`JTable`[对打印的支持](https://stackoverflow.com/questions/6144775/messageformat-header-footerformat-how-to-change-font-for-jtable-printing)非常少，关于[JTable (inc. code example)](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#printing)和[Printing](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)的教程中有一些关于打印的描述

# javascript - Adobe Air 和 Canvas 不工作

> ID：10091852
> 
> 赞同：1
> 
> 时间：2012-04-10T15:39:01.783
> 
> 标签：javascript, html, air

这应该是一个简单的Air App。我正在使用 Dreamweaver CS5.5 并创建一个 Air 应用程序。我无法让 Canvas 在功能上加载图像。我可以让图像加载 onLoad。目标是让图像在画布上绘制，然后调整大小并将 toDataURL 调整为 img 标签。我究竟做错了什么？这是代码：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script>
function getImage(url){
var canvas = document.getElementById("canvas");
var context = canvas.getContext("2d");
var img = new Image();
img.src=url;
img.onload = function(){
context.drawImage(img, 0,0,width,height);

var dataurl = canvas.toDataURL();
document.getElementById('image').src = dataurl;
};

var MAX_WIDTH = 140;
var MAX_HEIGHT = 200;
var width = img.width;
var height = img.height;

if (width > height) {
  if (width > MAX_WIDTH) {
    height *= MAX_WIDTH / width;
    width = MAX_WIDTH;
  }
} else {
  if (height > MAX_HEIGHT) {
    width *= MAX_HEIGHT / height;
    height = MAX_HEIGHT;
  }
}

canvas.width = width;
canvas.height = height;

}

</script>
</head>

<body>
<canvas id="canvas"></canvas>
<img id="image" src="" />
<button onClick="javascript:getImage('https://www.google.com/images/srpr/logo3w.png');">Get Image</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T07:24:47.113

我认为那条线给你带来了问题：

```
<button onClick="javascript:getImage('https://www.google.com/images/srpr/logo3w.png');">Get Image</button> 
```

使用 javascript: URL 方案的链接中定义的代码在应用程序沙箱中被忽略。不会生成不安全的 JavaScript 错误。

# android - Ajax 请求不适用于特定的 Android SDK

> ID：10091853
> 
> 赞同：0
> 
> 时间：2012-04-10T15:39:04.563
> 
> 标签：android, jquery-mobile, cordova

我有一个 Phonegap/Jquery 移动应用程序，我正在尝试为 Android 打包，但我使用的目标 SDK 不允许 Ajax/跨域请求。简而言之，这些请求适用于最新的 Android 4.0.3 (API 15)，但不适用于 Android 2.3.3 (API 10)，这是我需要与 Galaxy 平板电脑兼容的。我很难调试这个，因为我看不到实际的错误，因为我被包裹在 phonegap 中并且无法使用 Firebug/Chrome 网络工具。而且我在 developer.android.com 上没有任何运气。我已经尝试了位于[http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)的步骤，包括 $.mobile.allowCrossDomainPages = true; $.support.cors = 真。

这也不起作用。谁能帮帮我，我不知道还有什么可以尝试的。谢谢！

这是代码的快速示例。请注意，它返回 success = true 但遇到“响应不是 XML 元素”错误：

```
 return $.soapRequest({
        url: url,
        namespace: 'testns',
        returnJson: false,
        shortMethod: 'methodname',
        method: 'longmethodname',
        params: params || {},
        success: function(data) {
          if (data && data.documentElement) {
            // hits this on Android SDK 15
            if (successFn) {
              return successFn(data.documentElement);
            }
          }
          else {
            // hits this on Android SDK 10
            return fail("Response is not an XML element!");
          }
        },
        error: function(str) {
          return fail(str);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T03:13:54.380

尝试使用 phonegap 插件编写 httpConnection。它发现了 CrossDomain

httpPlugin.java

```
package com.android.test;

import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.apache.cordova.api.PluginResult.Status;
import org.json.JSONArray;
import org.json.JSONException;

import android.util.Log;

import com.android.connection.HTTPConnect;

public class HttpPlugin extends Plugin {
    public final String ACTION_SEND_MESSAGE = "SendCommand";
    private HTTPConnect httpConnect;

    public HttpPlugin() {
        // TODO Auto-generated constructor stub
        httpConnect = new HTTPConnect();
    }

    @Override
    public PluginResult execute(String action, JSONArray arg1, String callbackId) {
        PluginResult result = new PluginResult(Status.INVALID_ACTION);
        if (action.equals(ACTION_SEND_MESSAGE)) {
            try {
                String message = arg1.getString(0);
                String receiveString  = httpConnect.setURL(message);
                if(receiveString == null){
                    //show error result
                    result = new PluginResult(Status.ERROR,"kakaka");
                }else{
                    Log.v("MAN", "data received");
                    result = new PluginResult(Status.OK);
                }
                result = new PluginResult(Status.OK);
            } catch (JSONException ex) {
                // TODO Auto-generated catch block
                result = new PluginResult(Status.JSON_EXCEPTION, ex.getMessage());
            }
        }
        return result;
    }
} 
```

plugin.xml 文件

Httpplugin .js

```
var Httpplugin = function () {};

Httpplugin.prototype.post = function (message, successCallback, failureCallback) {  
//  navigator.notification.alert("OMG");
    return cordova.exec(successCallback, failureCallback, 'Httpplugin', 'SendCommand', [message]);
};

PhoneGap.addConstructor(function() {
    PhoneGap.addPlugin("http", new Httpplugin());
}); 
```

# mysql - 在 mySQL 中比较不同年份的日期

> ID：10091855
> 
> 赞同：0
> 
> 时间：2012-04-10T15:39:23.177
> 
> 标签：mysql, date, comparison

执行此查询时，我得到了一个奇怪的返回：

```
SELECT * FROM rrp
WHERE end > "2012-12-31" 
```

没有返回任何内容，尽管我在此表上有一行“结束”列大于`"2012-12-31"`：

**rrp**

```
id_r  |  id__b  |    start    |    end     | quantity
27         29     2012-01-01    2012-05-05      1
31         29     2012-11-01    2013-01-01      1 
```

编辑：`start`并且`end`是`date`字段

编辑：我为我的测试使用了错误的数据库=>错误的结果问题来自 Zend_Date 将一天添加到日期时：

$start = "2012-12-31"; $nStart = new Zend_Date($start, "YYYY-MM-dd"); $end = new Zend_Date($nStart); $end->addDay(1);

当我回应 $end 时：`echo $end->get("YYYY-MM-dd");`

它输出`2013-12-31`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:44:14.120

很可能是日期格式的问题

这应该有助于
[http://dev.mysql.com/doc/refman/5.0/en/using-date.html](http://dev.mysql.com/doc/refman/5.0/en/using-date.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T16:03:32.303

如果`end`是 DATE 列，它应该按预期工作：

```
SELECT
    STR_TO_DATE('2013-01-01', '%Y-%m-%d') < "2012-12-31",
    STR_TO_DATE('2012-05-05', '%Y-%m-%d') < "2012-12-31" 
```

... 回到`0, 1`我的盒子里。

我能想到的唯一可能的缺陷是您系统的默认日期格式不是`%Y-%m-%d`：

```
SELECT @@DATE_FORMAT 
```

在这种情况下，您需要每次指定格式：

```
SELECT *
FROM rrp
WHERE end > STR_TO_DATE('2012-12-31', '%Y-%m-%d') 
```

# jakarta-ee - 使用 JPA，是否还需要使用 EJB 会话 bean？

> ID：10091856
> 
> 赞同：0
> 
> 时间：2012-04-10T15:39:23.953
> 
> 标签：jakarta-ee, ejb-3.0

使用会话 bean 有哪些用例？当请求需要“粘性”时，我个人更喜欢在网络轮胎中保持会话状态。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T07:01:56.687

请注意，一些 JPA 概念与其他 JavaEE 概念以及在某些情况下与 EJB 相关联。具体来说，容器管理的 EntityManagers 通过注入`@PersistenceContext`

*   `@PersistenceContext(type = EXTENDED) EntityManager em;`
    *   EntityManager 链接到会话 bean 并且只能由`@Stateful`会话 bean使用
*   `@PersistenceContext(type = TRANSACTION) EntityManager em;`
    *   EntityManager 链接到当前运行的 JTA 事务，并且只能在当前运行的 JTA 事务范围内使用

在第一种情况下，需要 EJB。在第二种情况下，EJB 很适合自动处理事务管道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T16:43:20.097

会话 bean 提供的所有服务（声明性事务、声明性安全性、异步方法、计时器等）。如果您不需要任何这些服务，那么您就不需要会话 bean。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T14:46:04.760

主要用例是避免编写 JPA 所需的繁琐冗长的事务管理代码。

使用 EJB，这几乎总是不可见的，并且最多是一个额外的注释。

# git - 两个文件夹之间的 Git 合并，而不是分支

> ID：10091858
> 
> 赞同：19
> 
> 时间：2012-04-10T15:39:27.807
> 
> 标签：git, merge

假设以下场景：

我有一个 git 项目，它有一个名为`project`. 在这个目录中，我做了一些提交。然后，`cp -r`我将此目录复制到一个名为 的目录`project-with-feature-b`，即我手动创建了一个分支。

现在我想合并这两个文件夹，就像它们是两个分支一样，有没有办法使用 git 来做到这一点？

更具体地解决我的问题。我有一个 svn 存储库，我使用 git-svn 工具来克隆它。而且我不能使用 -T/-b/-t 选项，但我想进行合并。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-05-03T09:32:28.490

这个问题很老了，我最近才加入。

我正在使用 ubuntu，并使用 meld 来解决合并问题。

所以如果我有同一个应用程序的 2 个文件夹，可能会有细微的变化。

我将在终端执行此操作

```
meld ./app_branch_master ./app_branch_dev 
```

这将打开两个文件夹，Meld 需要时间来比较两个文件夹。它会告诉你左边有什么，右边有什么。您还可以从那里移动少量代码。

我就是这样做的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-10T15:47:04.950

是的，你可以在技术上做到这一点，但这只是因为现在纠正你的错误还为时不晚。您需要及时返回并以正确的方式执行此操作：

1.  将您的`project-with-feature-b`文件夹移到您的 git 存储库之外：

    ```
    $ mv project-with-feature-b .. 
    ```

2.  在创建目录之前返回`git log`并找到最后一次提交的提交 ID 。`project-with-feature-b`如果您尚未在`project-with-feature-b`目录“内部”进行任何提交，则可以跳过此步骤。

3.  创建一个`feature-b`基于该提交 ID 调用的新分支。如果您跳过了第 2 步，请省略`<commit-id-from-step-2>`

    ```
    $ git branch feature-b <commit-id-from-step-2>
    $ git checkout feature-b 
    ```

4.  在`feature-b`分支中，将`project`文件夹替换为您的备份`project-with-feauture-b`

    ```
    $ rm -rf project
    $ mv ../project-with-feature-b project
    $ git add project
    $ git commit -m "Add feature-b" 
    ```

5.  回到你的 master 分支并将你的`feature-b`分支合并到 master

    ```
    $ git merge --no-ff feature-b 
    ```

将来，您应该在开始工作*之前使用上述分支。*学习正确使用工具，而不是你*认为*它们应该如何工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T15:56:07.613

看看[Detach subdirectory into separate Git repository](https://stackoverflow.com/questions/359424/detach-subdirectory-into-separate-git-repository)，一旦你拆分了两个目录的历史记录，你就可以分支、合并或做任何你想做的事情。

# ruby-on-rails - 为什么 Heroku 返回 'devise/sessions.js 未预编译'？

> ID：10091862
> 
> 赞同：9
> 
> 时间：2012-04-10T15:39:45.217
> 
> 标签：ruby-on-rails, heroku, asset-pipeline

我正在将 Rails 3.2 应用程序部署到 Heroku。我正在根据[https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)在本地预编译资产。

但我越来越

```
ActionView::Template::Error (devise/sessions.js isn't precompiled): 
```

有人遇到过这种情况么？

确保预编译设计 JavaScript 的正确方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T01:56:23.497

感谢您的所有建议。经过一番思考，我意识到问题在于如何将应用程序配置为调用特定于控制器的 javascript。万一其他人遇到这个问题，这就是我所做的。

我一直在通过布局文件中的以下标记加载特定于控制器的 .js。

```
<%= javascript_include_tag "application", params[:controller] %> 
```

问题是，如果特定的 cotroller.js 文件不存在，这将失败。就我而言，登录页面失败，因为我没有创建 devise/sessions.js 文件。

我本可以创建这个文件，但我觉得这是一种混乱的方法。我不喜欢周围有很多空文件的想法。

相反，我从视图中显式调用特定于控制器的 javascript

```
<% javascript 'controller.js' %> 
```

在 application_helpers 中使用以下帮助程序

```
def javascript(*files)
    content_for(:head) { javascript_include_tag(*files) }
end 
```

到目前为止似乎工作正常。

再次感谢您的建议。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-17T04:03:29.363

我的解决方案：

```
<%= javascript_include_tag "application", controller_name if controller_name != "sessions" %> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-10T16:10:16.887

尝试运行`rake assets:precompile`。

* * *

尝试将此添加到您的 config/environments/production.rb ：

```
config.assets.precompile += %w( *.css *.js ) 
```

或指定您的文件。

# jquery - 在 MVC2 中进行 Ajax 发布时控制 JqGrid 参数

> ID：10091863
> 
> 赞同：0
> 
> 时间：2012-04-10T15:39:45.823
> 
> 标签：jquery, asp.net-mvc, jqgrid

我对在 MVC2 中处理 ajax 发布请求的指南感到困惑我如何知道网格作为请求参数传递的数据是什么？以什么顺序和什么数据类型？因为知道这一点后，只有一个人可以设计服务器端的post方法。我已经看到许多具有不同函数原型作为服务器端方法处理程序的示例。

这怎么可能？我的意思是它与做 ajax 发布的 jqgrid 相同。对于同一个 jqgrid，如何有不同类型的函数原型作为服务器端操作？

**编辑**

我的要求是，当 JqGrid 进行 ajax 调用时，我想发送一些额外的数据，例如下拉列表选择值。但是 MVC 只接受 JqGrid 参数。尽管我通过“paramData”添加了额外的数据并且我能够在控制器请求处理程序中接收它，但我有一个解决方法。问题是我们使用了一个 Grid 类来反序列化 Grid 参数，而这个类对应用程序来说是全局的。所以为每一页修改它是不行的。

我需要的是这不起作用，仅填充第一个参数：-

```
public void Jgrid(Jgrid grid,object hdnupdpg,string p_roleid)
{
} 
```

但是我如何让 Jgrid.ajax 调用发送这些其他参数？仅使用“ **paramsData** ”选项？

这是我遇到的服务器端功能原型：

```
public void JGridData(JGrid grid)
{

} 
```

这是网格类

```
 public class JGrid
    {
        private bool IsSearch;
        public string sidx { get; set; }
        public string sord { get; set; }
        public int page { get; set; }
        public int rows { get; set; }

        public bool _search
        {
            get
            {
                string strSearch = HttpContext.Current.Request["_search"];
                if (!string.IsNullOrEmpty(strSearch))
                    return Convert.ToBoolean(strSearch);
                else
                    return IsSearch;
            }
            set { IsSearch = value; }
        }

        public string searchOper { get; set; }
        public string filters { get; set; }
        public int totalRecords { get; set; }
        public string procName { get; set; }
        public string SearchValue { get; set; }
        public string SearchField { get; set; }

        public string defaultFilter { get; set; }

        public string SortExpression
        {
            get { return sidx + " " + sord; }
        }

        public string FilterExpression
        {
            get
            {
                string filter = BuildFilter();
                if (!string.IsNullOrEmpty(defaultFilter) && !string.IsNullOrEmpty(filter))
                    return defaultFilter
                           + " AND (" + filter + ")";
                else if (!string.IsNullOrEmpty(defaultFilter))
                    return defaultFilter;
                return filter;
            }
        }

        public string BuildFilter()
        {
         ....
        }
} 
```

**编辑**

```
Here is my Script for JqGrid

    jQuery('#jgrid').jqGrid({
        autowidth: true,
        altRows: true,
        altclass: 'grdAltRwClr',
        datatype: 'local',
        forceFit: true,
        gridview: true,
        height: 290,
        mtype: 'post',
        rowList: [10, 20, 30],
        rowNum: 10,
        pager: '#pager',
        pagerpos: 'right',
        recordpos: 'left',
        rownumbers: false,
        scrollrows: false,
        sortname: 'roledtlid',
        toolbar: [true, "top"],
        url: rootPath + 'RoleDetail/JGridData',
        postData: { extraparams: function() { return escape(jQuery('#hdnupdpg').val()); },
        parentid: function() { return escape(jQuery('#p_roleid').val()); }
         },
        beforeSelectRow: function(rowid, e) { return false; },
        gridComplete: function() { GridComplete() },
        colModel: [
              { name: 'act', label: 'View', resizable: false, search: false, sortable: false, title: false, width: 6, index: 'act' }
            , { name: 'roleid', label: 'Role id', width: 10, index: 'roleid' }
            , { name: 'rolename', label: 'Role Name', width: 25, index: 'rolename' }
            , { name: 'pgname', label: 'Page Name', width: 30, index: 'pgname' }
            , { name: 'canedit', label: 'Edit', width: 10, index: 'canedit' }
            , { name: 'canview', label: 'View', width: 10, index: 'canview' }
             ]
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T23:18:36.697

将发送到服务器的参数列表取决于您使用的选项。您没有发布您使用的**JavaScript**代码。[您可以根据 jqGrid 的prmNames](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)选项重新定义的任何参数的名称。以下参数将始终发送到用于填充网格的 URL

*   *page* - 请求的页面 - 默认值`page`，
*   *rows* - 请求的行数 - 默认值`rows`，
*   *sort* - 排序列 - 默认值`sidx`，
*   *order* - 排序顺序默认值`sord`，
*   *search* - 搜索指标 - 默认值`_search`

如果您使用带参数的[高级搜索对话框](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching)或[过滤器工具](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching)`stringResult: true`，则有关过滤器的信息将以[此处](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)`filters`描述的格式在附加参数中发送。

例如，如果您`Cache-Control: private, max-age=0`在服务器响应的标头中设置（参见[此处](https://stackoverflow.com/a/9269567/315935)或[此处](https://stackoverflow.com/a/3885956/315935)）或使用服务器响应的其他`Cache-Control`参数控制缓存，您可以删除`nd`包含时间戳的参数：

```
prmNames: { nd: null } 
```

如果您想将`_search`参数重命名`isSearch`为例如，您可以使用

```
prmNames: { search: 'isSearch' } 
```

您当然可以组合您需要的所有设置：

```
prmNames: { nd: null, search: 'isSearch' } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T19:12:24.297

不清楚你对jqgrid的哪种方法感兴趣。但让我试试

一般来说——你感兴趣的请求参数可以使用 Firebug for Firefox 查看

*   在 Firefox 中安装 Firebug 插件
*   打开带有 jqgrid 的页面/或打开[jqgrid 演示](http://www.trirand.com/blog/jqgrid/jqgrid.html)页面（如果您还没有的话）
*   从 Firefox 的右上角激活 Firebug 控制台
*   在 Firebug 的 Net 选项卡中观察请求响应
*   如果您展开请求，它将显示在该特定请求中发送的所有参数和标头信息

# asp.net - Convertemptystringtonull 在gridview中不起作用

> ID：10091868
> 
> 赞同：0
> 
> 时间：2012-04-10T15:39:52.813
> 
> 标签：asp.net, vb.net, gridview

在我的 gridview 中编辑表格时，我试图将空字符串转换为 null。我已经尝试了几次迭代和方法，但都没有成功。我怀疑问题出在我身上，`ObjectDataSource`但不知道我需要的正确语法。

```
<asp:GridView 
    ID="grdMyDistributors"
    DataSourceID = "srcGetMyDistributors" 
    CssClass="GridViewStyle"
    DataKeyNames = "ID_Distributor"
    AutoGenerateColumns = "false" AutoGenerateEditButton = "true"
    GridLines="None"
    runat="server" >
    <Columns>
    <asp:BoundField
        DataField="DistributorName"
        HeaderText="Distributor" 
        convertemptystringtonull="true"
        ReadOnly = "True" />
    <asp:BoundField
        DataField="Distributor_Email_1"
        HeaderText="Distributor Email 1"
        convertemptystringtonull="true" >
        <ItemStyle BackColor="#f6f17c"/>
    </asp:BoundField>
    <asp:BoundField
        DataField="Distributor_Email_2"
        HeaderText="Distributor Email 2"
        convertemptystringtonull="true" >
        <ItemStyle BackColor="#f6f17c"/>
    </asp:BoundField>
    <asp:BoundField
        DataField="Minimum_Purchase_Amount"
        HeaderText="Minimum Purchase Amount"
        dataformatstring="{0:c}"
        convertemptystringtonull="true" >
        <ItemStyle BackColor="#f6f17c" />
    </asp:BoundField>
    </Columns> 
</asp:GridView> 
```

这是我的`ObjectDataSource`：

```
 <asp:ObjectDataSource 
        ID="srcGetMyDistributors" 
        TypeName = "AAA.Distributors"
        SelectMethod = "GetDistributorsPagingFiltered"
        UpdateMethod = "UpdateDistributors"
        EnableCaching="false"
        ConvertNulltoDBNull = "true"
        runat="server" >
        <SelectParameters>
            <asp:ProfileParameter Name="ID_Account" PropertyName="ID_Account" />
        </SelectParameters>
        <UpdateParameters>
            <asp:ControlParameter ControlID="grdMyDistributors" Name="ID_Distributor" PropertyName="SelectedValue" Type="Int32" />
        </UpdateParameters>
    </asp:ObjectDataSource> 
```

这是我的更新方法

```
 Public Shared Sub UpdateDistributors(ByVal ID_Distributor As Integer, ByVal Distributor_Email_1 As String, ByVal Distributor_Email_2 As String, ByVal Minimum_Purchase_Amount As Decimal)
        ' Initialize command
        Dim con As New SqlConnection(_connectionString)
        Dim cmd As New SqlCommand("UpdateDistributors", con)
        cmd.CommandType = CommandType.StoredProcedure
        cmd.Connection = con

        ' Initialize parameters
        cmd.Parameters.AddWithValue("@ID_Distributor", A2AID_Restaurant_To_Distributor)
        cmd.Parameters.AddWithValue("@Distributor_Email_1", Distributor_Email_1)
        cmd.Parameters.AddWithValue("@Distributor_Email_2", Distributor_Email_2)
        cmd.Parameters.AddWithValue("@Minimum_Purchase_Amount", Minimum_Purchase_Amount)

        ' Execute command
        Using (con)
            con.Open()
            cmd.ExecuteNonQuery()
        End Using

    End Sub 
```

当我按原样运行代码时，我收到一条错误消息，提示“'System.DBNull' 类型的对象无法转换为'System.String' 类型。” 当它试图发送到 Update 方法并期待一个字符串时，它很可能会出错。如果我从 ObjectDataSource 中取出“ConvertNulltoDBNull =”true”，它会抱怨 SQL 语句需要一个值（意味着它没有发送 Null）。我已经尝试了很多变体，但在类库。任何帮助将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T17:15:25.993

为您的 gridview 列使用 eval()

```
<%# Eval("DistributorName") == DBNull.Value ? "" : value.ToString()%> 
```

> （它在 C# 中）

```
 <asp:GridView 
ID="grdMyDistributors"
DataSourceID = "srcGetMyDistributors" 
CssClass="GridViewStyle"
DataKeyNames = "ID_Distributor"
AutoGenerateColumns = "false"
AutoGenerateEditButton = "true"
GridLines="None"
runat="server" >
 <Columns>
    <asp:TemplateField HeaderText="Seniority">
        <ItemTemplate>
           <%# Eval("DistributorName") == DBNull.Value ? "" :Eval("DistributorName").ToString()%>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

# c# - 我应该在哪里存储 Logger 代码以减少依赖关系？

> ID：10091870
> 
> 赞同：2
> 
> 时间：2012-04-10T15:39:55.267
> 
> 标签：c#, oop, dependencies, log4net

我正在使用 Log4Net 来处理我的 WPF 应用程序中的日志记录。

目前，记录器配置了其余的前端代码。如果我希望能够在这些层中使用记录器，我必须传递对服务层和存储库层的引用（我实际上将为此使用 StructureMap）。这意味着后端依赖于前端，我不喜欢这样。

我想知道如何最好地处理这个问题？我应该在存储库层中配置记录器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:47:24.027

log4net [LogManager.GetLogger(string name)](http://logging.apache.org/log4net/release/sdk/log4net.LogManager.GetLogger_overload_1.html)将返回一个现有的记录器实例，如果它已经被创建（例如，在另一层），所以不需要传递记录器对象。

您确实需要注意多个线程/进程试图同时写入同一个日志文件。您可以使用 log4net MinimalLock，或尝试[此](http://www.codeproject.com/Articles/26579/Logging-into-single-file-from-multi-process)第三方解决方案。两者都不是理想的（代码项目效率低下并且仍然遇到并发问题）。我最终写了自己的（不幸的是没有公开）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:51:28.877

日志记录是一个常见的横切关注点，我见过它以几种不同的方式处理。最简单的方法是创建一个静态类，该类位于一个由所有层共享的公共程序集中。

但是，由于您将 StructureMap 用于 IoC，因此更好的解决方案是配置 StructureMap 以将您的记录器类（根据您的需要可能配置为单例）注入到创建的每个实例中。我个人更喜欢这种横切关注类的属性注入，这样构造函数就不会变得混乱，但这是一个偏好问题。

# yii - 在 Yii 框架中我应该将带有角色的代码放在哪里？

> ID：10091873
> 
> 赞同：2
> 
> 时间：2012-04-10T15:39:59.147
> 
> 标签：yii, authorization

这是我在 Yii 框架手册中找到的代码：

```
$auth=Yii::app()->authManager;

$auth->createOperation('createPost','create a post');
$auth->createOperation('readPost','read a post');
$auth->createOperation('updatePost','update a post');
$auth->createOperation('deletePost','delete a post');

$bizRule='return Yii::app()->user->id==$params["post"]->authID;';
$task=$auth->createTask('updateOwnPost','update a post by author himself',$bizRule);
$task->addChild('updatePost');

$role=$auth->createRole('reader');
$role->addChild('readPost');

$role=$auth->createRole('author');
$role->addChild('reader');
$role->addChild('createPost');
$role->addChild('updateOwnPost'); 
```

等等。问题是我应该在哪里放置用于创建角色、任务等的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T19:51:43.070

您应该在**protected/controllers/RbacController.php中使用此代码**

修改**protected/config/main.php后**

```
return array(
'components'=>array(
    'db'=>array(
        'class'=>'CDbConnection',
        'connectionString'=>'sqlite:path/to/file.db',
    ),
    'authManager'=>array(
        'class'=>'CDbAuthManager',
        'connectionID'=>'db',
    ),
),
); 
```

这是官方文档：

[http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#using-default-roles](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#using-default-roles)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T22:39:22.227

这花了我一段时间才理解，所以让我在了解 yii 的工作原理后回答您的问题。

您将首先按照 framework/web/auth 中的 sql 代码创建适当的表

您可以使用 phpmyadmin 填充数据库

您还可以创建一个控制器，您将在其中运行上述所有代码。运行一次，因为您只是在填充数据库

该控制器可以称为 myInitController.php 并与您的其他控制器一起存储。控制器可以很简单

```
<?php

class myInitController extends Controller
{
    public function actionRun()
    {    
        $auth=Yii::app()->authManager;
        $auth->createOperation('createPost','create a post');

        echo "this is it";
    }
} 
```

然后，您将通过访问 www.yourwebsite.com/myInit/Run 来运行它 验证写入数据库的内容。不要将此控制器投入生产。您不希望其他人运行该命令。

所以你的选择是

1.  通过 phpmyadmin 之类的方式手动输入数据
2.  创建一个可以存储所有 php 命令并执行的客户控制器
3.  使用 gii 创建模型和 CRUD 函数（注意复合主键）

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:51:22.053

这段代码将在数据库中创建项目。你必须执行它。

您可以在其中一个控制器中创建一个操作，然后运行它。

> 本地主机/myAppName/myController/myAction

或者您也可以创建一个 php 文件。然后将您的代码粘贴到里面并运行它。

# haskell - Haskell：为什么没有类型不匹配（为什么会编译）？

> ID：10091874
> 
> 赞同：11
> 
> 时间：2012-04-10T15:40:01.910
> 
> 标签：haskell, types, ghc, typeclass, ghci

我太困了，我写了以下代码（修改以显示混乱）：

```
fac s = take 10 [s, s `mod` 1 ..]

maxFactor x = if (s == [])
              then x
              else head    <-- this should be 'head x' instead of just 'head'
  where s = fac x 
```

但是，这个加载到 ghci（和编译）中就好了。当我执行`maxFactor 1`时，它会抱怨（当然）：

```
<interactive>:0:1:
    No instance for (Integral ([a0] -> a0))
      arising from a use of `maxFactor'
    Possible fix:
      add an instance declaration for (Integral ([a0] -> a0))
    In the expression: maxFactor 1
    In an equation for `it': it = maxFactor 1

<interactive>:0:11:
    No instance for (Num ([a0] -> a0))
      arising from the literal `1'
    Possible fix: add an instance declaration for (Num ([a0] -> a0))
    In the first argument of `maxFactor', namely `1'
    In the expression: maxFactor 1
    In an equation for `it': it = maxFactor 1 
```

但是，我不明白这种行为：

`fac`的类型是：

```
fac :: Integral a => a -> [a] 
```

while`maxFactor`的类型是：

```
maxFactor :: Integral ([a] -> a) => ([a] -> a) -> [a] -> a 
```

这是否意味着以下内容：

1.  的第一个输入`fac`必须是类型类`Integral`（例如，`fac 10`）；
2.  因为在 的定义中`maxFactor`有`fac x`， x 也必须是 typeclass `Integral`，因此，`maxFactor`的类型将以`maxFactor :: (Integral a) => a ->`... 开头，然后是其他的？但是，如果是这样的话，那么为什么这段代码会编译，因为`maxFactor`can be `x`or的返回`head`，当遵循这条推理时，它不具有相同的类型？

我在这里想念什么？

感谢您提前提供任何输入！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-10T16:19:07.507

正如您正确注意到的那样，在`fac`内部使用函数`maxFactor`会增加`Integral a`对`x`. 所以`x`需要是 type `Integral a => a`。

此外，编译器会看到`maxFactor`返回`head`类型为`[a]->a`或`x`的。因此`x`必须有更具体的类型`Integral ([a]->a) => ([a]->a)`，所以`maxFactor`有类型

```
maxFactor :: Integral ([a] -> a) => ([a] -> a) -> ([a] -> a) 
```

这正是你得到的。到目前为止，这个定义没有任何“错误”。如果您设法编写`Integral`类型的实例，则可以毫无问题`([a]->a)`地调用。`maxFactor`（显然`maxFactor`不会按预期工作。）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-10T15:54:49.623

在`maxFactor`编译器中推断出函数参数必须具有与（在您的子句中）`x`相同的类型。由于您还调用on （反过来调用）它推断这也是某种类类型。因此，编译器推断类型`head``if``fac``x``mod``x``Integral`

```
maxFactor :: Integral ([a] -> a) => ([a] -> a) -> [a] -> a 
```

这需要一些`head`类似和整数的参数......这不太可能是真实的。

~~我认为您可以将该代码加载到 GHCi 中这一事实更像是解释器的一个怪癖。如果你只是编译上面的代码，它会失败。~~

编辑：我想问题是类型检查器可以理解您的代码，但是可能没有任何明智的方式来使用它。

# java - 如何锁定，打开文本文件以供阅读？

> ID：10091875
> 
> 赞同：0
> 
> 时间：2012-04-10T15:40:01.910
> 
> 标签：java, file, bufferedreader, fileinputstream, filelock

我想在我的程序中锁定我的输入文本文件，所以如果下一次出现的程序在同一个文件上运行，它会崩溃（抛出异常）。我知道我可以使用“java.nio.channels.FileLock”锁定文件，但只有在打开文件以供写入并且我只为读取而打开文本文件时才有可能。我不想使用“RandomAccessFile”来读取文件，因为速度太慢而且我的文件很大（10gb）。现在我用这个 wy 来读取我的文件：

```
FileInputStream fstream = new FileInputStream(this.inputFileName);  
DataInputStream in = new DataInputStream(fstream);
BufferedReader br = new BufferedReader(new InputStreamReader(in)); 
```

我认为这是读取文本文件的快速方法。如何锁定我的文本输入文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:46:42.643

> 我知道我可以使用“java.nio.channels.FileLock”锁定文件，但只有在文件打开写入时才有可能，

AFAIK，这是不正确的。

您可以在已打开以供阅读的文件或文件区域上获取 FileLock。问题是，这只能保证防止另一个 Java 应用程序获取重叠的 FileLock。如果其他应用程序不尝试获取锁，那么它*可能*仍然能够读取文件。（确切的语义是特定于平台的。）

# iphone - 将 UIView/UIWindow 中的特定触摸事件传递给下一个响应者（sendEvent:/hitTest: 不起作用）

> ID：10091876
> 
> 赞同：2
> 
> 时间：2012-04-10T15:40:02.907
> 
> 标签：iphone, objective-c, ios, keyboard, touch

我试图在不破坏其功能的情况下捕获 UIKeyboard 中的所有触摸事件。我试过了：

*   命中测试：
*   UIGestureRecognizer
*   在顶部添加一个 UIWindow 并将事件传递给下一个响应者

然而，这些都没有奏效。

而且似乎我们不允许对 UIKeyboard 进行子类化。

你能想到任何可行的方法吗？

谢谢，

顶峰

**更新：**

让我们简化问题：如何添加将特定触摸事件传递给下一个响应者的 UIView 或 UIWindow（就像将*userInteractionEnabled*设置为 NO 一样）？

这是我的代码（当然不能工作......）：

```
 - (void)sendEvent:(UIEvent *)event {
    NSLog(@"%@",event);
    //if ([self eventIsNoteworthy:event]) [self extraEventHandling:event];
    [super sendEvent:event];  // Apple says you must always call this!
}

-(UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    CGPoint hitPoint = [underneathButton convertPoint:point fromView:self];
    if ([underneathButton pointInside:hitPoint withEvent:event]) return underneathButton;
    NSLog(@"Called");
    return [super hitTest:point withEvent:event];
    //return mainWindow;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    NSLog(@"Start");

    [self.nextResponder touchesBegan:touches withEvent:event];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T23:50:18.880

我不确定这是否可能。我想到了几件事。一种是重新创造`UIKeyboard`自己，然后以这种方式捕捉触摸。[Apple Docs](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/InputViews/InputViews.html)说明这是可能的。

另一种方法是重新查看您是如何在键盘上方添加 UIWindow 的。据我了解，键盘视图在您的应用程序上以某种方式分层，因此您可能没有 UIWindow 超出键盘[(ref)](http://www.iphonedevsdk.com/forum/iphone-sdk-tutorials/7350-adding-subviews-custimize-keyboard.html)。该链接提供了一个解决方案，用于获取对键盘实际 UIView 的引用，从那里您希望将 UIWindow 放置到键盘视图的父级上。

为了提供帮助，这里有一个脚本，您可以使用它来转储所有视图以查看它们是如何分层的：

```
static void dumpViews(UIView* view, NSString *text, NSString *indent) 
{
    Class cl = [view class];
    NSString *classDescription = [cl description];
    while ([cl superclass]) 
    {
        cl = [cl superclass];
        classDescription = [classDescription stringByAppendingFormat:@":%@", [cl description]];
    }

    if ([text compare:@""] == NSOrderedSame)
        NSLog(@"%@ %@", classDescription, NSStringFromCGRect(view.frame));
    else
        NSLog(@"%@ %@ %@", text, classDescription, NSStringFromCGRect(view.frame));

    for (NSUInteger i = 0; i < [view.subviews count]; i++)
    {
        UIView *subView = [view.subviews objectAtIndex:i];
        NSString *newIndent = [[NSString alloc] initWithFormat:@"  %@", indent];
        NSString *msg = [[NSString alloc] initWithFormat:@"%@%d:", newIndent, i];
        dumpViews(subView, msg, newIndent);
        [msg release];
        [newIndent release];
    }
} 
```

像这样称呼它：`dumpViews([[UIApplication sharedApplication] keyWindow], @"", @"");`

希望能有所帮助！:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T00:32:14.287

看看[这个](https://stackoverflow.com/questions/6457239/ios-how-to-access-the-uikeyboard)关于访问（包含）UIKeyboard 的私有视图层次结构的答案。注意，iOS 不支持此功能，Apple 拒绝执行此操作的应用程序。（干扰 UIKit 内部的私有视图层次结构无异于使用私有 API。）

# android - android从另一个输入中减去一个输入

> ID：10091880
> 
> 赞同：0
> 
> 时间：2012-04-10T15:40:17.353
> 
> 标签：android, textview, user-input

我有 2 个对象

```
obj.targetWeight = targetWeight.getText().toString();
obj.currentWeight = currentWeight.getText().toString(); 
```

我想从另一个中减去一个。

我试过这个没有运气。

```
if (obj != null){
    outputEditText.setText("Your target weight is " + obj.targetWeight + 
                            "\n Your current weight is " + obj.currentWeight + "\n" 
                        + (obj.currentWeight - obj.targetWeight));
} 
```

我很确定这不是应该做的，但是我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:44:45.827

您必须先将它们转换为整数。

```
if (obj != null) {
    int targetWeight = Integer.parseInt(obj.targetWeight.getText().toString());
    int currentWeight = Integer.parseInt(obj.currentWeight.getText().toString());
    outputEditText.setText(
        "Your target weight is " + obj.targetWeight + "\n" + 
        "Your current weight is " + obj.currentWeight + "\n" +
        "Difference is " + (currentWeight - targetWeight));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:11:02.687

感谢 kailon，我有一个答案。

```
if (obj != null) {
        int targetWeight = Integer.parseInt(obj.targetWeight);
        int currentWeight = Integer.parseInt(obj.currentWeight);
        outputEditText.setText(
            "Your target weight is " + obj.targetWeight + "\n" + 
            "Your current weight is " + obj.currentWeight + "\n" +
            "Difference is " + (targetWeight - currentWeight ));
        } 
```

# jquery - 如何从加载 ajax 的子 php 填充父 html/php 中的 div

> ID：10091888
> 
> 赞同：0
> 
> 时间：2012-04-10T15:40:31.440
> 
> 标签：jquery, ajax, post, html, parent

假设我有一个 index.php，其中包含 html，如下所示：

```
<div id="navigation">
  <ul>
     <li id="registerLink"><a href="#">Register</a></li>
  </ul>
</div>
<div id="mainContent">
</div> 
```

我有执行此操作的 jquery：

```
$('#registerLink').click(function() {
   $('#mainContent').load("register.php");
}); 
```

有了这个，我顺利地将我在 register.php 文件中编码的表单加载到 mainContent div 中。现在，当我填写表格并使用在 register.php 文件中编码的 ajax 发布它时，我希望在原始 index.php 文件中的 mainContent div 中使用 jquery ajax 显示结果。

有什么建议么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T15:45:21.500

```
$('#mainContent form').submit(function(){
  var form = $(this);

  $.post(form.attr('action'), form.serialize(), function(result){
    $('#mainContent').html(result);
  });

  return false;
}); 
```

此代码必须在您的 .load(..., [right here] ) 中作为回调运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:46:30.147

我建议为此使用[jQuery 表单插件](http://jquery.malsup.com/form/)。

# objective-c - 尝试打印时的 EXC_BAD_ACCESS

> ID：10091892
> 
> 赞同：1
> 
> 时间：2012-04-10T15:40:34.030
> 
> 标签：objective-c, cocoa, printing, nsprintoperation

所以，我正在尝试测试**打印功能**，但我一直收到一个`EXC_BAD_ACCESS`错误，指向我的这部分代码：

```
[op runOperationModalForWindow:(NSWindow*)[core window]
                      delegate:self
                didRunSelector:
 @selector(printOperationDidRun:success:contextInfo:)
                   contextInfo:NULL]; 
```

上面的代码直接来自 Apple 的开发人员文档。

我在这个代码块之前放了一个断点，看起来它`[core window]`绝对不是`NULL`并且分配的。

**那么，怎么了？有任何想法吗？**

* * *

**更新 ：**

试过这个：

```
[self setPrintView:[[[NSTextView alloc] initWithFrame:NSMakeRect(0,0,200,200)]
  retain]];

[[self printView] setString:[[[[core editor] currentDocument] editorView] string]];
[[self printView] setHidden:NO];

NSPrintOperation *op = [NSPrintOperation
                        printOperationWithView:[[self printView] retain]
                        printInfo:nil];

[op setCanSpawnSeparateThread:YES];
[op setShowsPrintPanel:NO];
[op runOperation]; 
```

我现在得到：

```
*** -[NSStorage insertElement:atIndex:]: message sent to deallocated instance 0x121267ff0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:06:29.500

**我刚刚找到它：**

诀窍是`release`我`NSTextView`在打印功能的末尾。

```
 ...
       [printView release];
} 
```

# c# - asp.net SqlDataSource FilterExpression 空字符串逻辑

> ID：10091893
> 
> 赞同：1
> 
> 时间：2012-04-10T15:40:35.340
> 
> 标签：c#, asp.net, sqldatasource

这是我要执行的逻辑。

当文本框为空时，我希望数据网格不显示任何记录。
当文本框不为空时，数据网格将过滤数据。

现在，当文本框为空时，它会显示所有记录。

我该如何解决？提前致谢！

这是代码块：

```
<asp:SqlDataSource ID="dsGridview" runat="server" ConnectionString="<%$ ConnectionStrings:MyConnectionString %>"
    SelectCommand="SELECT UserName, gender, age FROM users"
    FilterExpression="UserName like '%{0}%'">
    <FilterParameters>
        <asp:ControlParameter Name="UserName" ControlID="txtSearch" PropertyName="Text" />
    </FilterParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:44:40.537

```
<asp:SqlDataSource ID="dsGridview" runat="server" ConnectionString="<%$ ConnectionStrings:MyConnectionString %>"
    SelectCommand="SELECT UserName, gender, age FROM users
                   UserName like '%' +@UserName + '%' and @UserName is not null">
    <SelectParameters>
        <asp:ControlParameter Name="UserName" ControlID="txtSearch" PropertyName="Text" />
    </SelectParameters>
</asp:SqlDataSource> 
```

我注意到 FilterExpression 的行为有点不同（它用括号包裹参数名称或值，实际上它执行 SQL 转义），因此要检查 @UserName 是否为空，它适用于 SelectParameters。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:45:32.423

只需在服务器端使用 a`RequiredFieldValidator`或`txtSearch`在适当的情况下使用以下检查。当您不希望返回任何数据时，无需运行查询：

```
if(String.IsNullOrEmpty(txtSearch.Text))
{
    //don't databind and use validation to tell the user to enter data
} 
```

# android - 如何让服务获取静态变量的更新值而不是默认值

> ID：10091897
> 
> 赞同：0
> 
> 时间：2012-04-10T15:40:46.887
> 
> 标签：android

我有一个服务，它从一个名为“蓝牙”的活动中获取一个值的值，但是这个活动只有在用户点击一个按钮后才会启动。在“蓝牙”类中，我有一个静态变量，当用户单击按钮时，它的值会更新。但是该服务是在启动应用程序时启动的。因此，它采用默认值 (0) 。我希望服务继续感知静态变量的值并在静态变量更改时更新其行为。请帮忙.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:04:08.267

```
 .......
   bool tr=true;
  new Thread(new Runnable() {
          public void run() {

            while (tr) {
                //check your static variable here

              try {
                Thread.sleep(1000);<-----(1)
              } catch (InterruptedException e) {
                e.printStackTrace();
              }

            }
          }}
           }).start(); 
```

把它放在你的服务onCreate..它将每1秒检查一次..你可以通过改变标记线来改变频率（1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T16:06:18.997

如果可以，请使用[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern#Example)。基本上，创建一个更新变量的方法，并确保仅通过该方法更新变量。然后在该方法中，通过更新侦听器调用需要通知更新的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:57:38.717

也许有这样的事情：

```
...
startChecking();
...

void startChecking(){

   Handler mhandler = new Handler ();
   mhandler.postDelayed( new Runnable(){

      void run(){
        checkStaticValueHere;
        startChecking();
      }
   }, 500);  
} 
```

# c# - List.Where 传入不同类型的对象（谓词）

> ID：10091899
> 
> 赞同：1
> 
> 时间：2012-04-10T15:40:53.363
> 
> 标签：c#, linq, list, where, predicate

我有一个类型的对象列表`A`。每个对象都有一个`Name`属性。我有一个类型的对象，`B`它也有一个`Name`属性，我想用它`B.Name`来匹配`List<A>`具有相同名称的对象。

这可以`List.Where`与自定义谓词一起使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T15:43:27.057

是的，除非我遗漏了您要求的一个微妙点：

```
var filtered = listOfAs.Where(a => a.Name == b.Name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:44:20.003

当然：

```
myListOfAs.Where(a=>a.Name == myB.Name); 
```

这将返回与特定 B 实例 myB 同名的 myListOfAs 的零个或多个元素的 IEnumerable。

您还可以使用 Join() 将第二个列表中的多个 B 与 As 列表中具有匹配名称的元素进行匹配，但这听起来不像您想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:44:48.697

如果我明白你在问什么，我想你只是想加入。使用查询语法最容易做到这一点：

```
var results = from a in ListA
              join b in ListB on a.Name equals b.Name
              select { whatever you need from a and b }; 
```

# lucene - 是 Lucene 查询语言的 hack 证明吗

> ID：10091909
> 
> 赞同：3
> 
> 时间：2012-04-10T15:41:14.390
> 
> 标签：lucene

显然，它不能用于破坏索引或破解卡号、密码等（除非有人愚蠢到将卡号或密码放入索引中）。

是否可以通过过于复杂的搜索来关闭服务器？

我想我真正需要知道的是，我是否可以将用户输入的 Lucene 查询直接传递给搜索引擎而不进行清理，并且可以免受恶意攻击。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T16:16:18.663

从查询解析器的输入中修改索引是不可能的。但是，有几件事可能会损害运行 Lucene 的搜索服务器：

*   要收集的顶级结果数量的高值

Lucene 将命中放入优先级队列中以对其进行排序（这是使用优先级队列大小的后备数组实现的）。因此，运行从偏移量 99 999 900 到偏移量 100 000 000 获取结果的请求将使服务器为此优先级队列分配几百兆字节。并行运行多个此类查询可能会导致服务器内存不足。

*   对任意字段进行排序

对字段进行排序需要加载该字段的字段缓存。除了花费大量时间之外，此操作还将使用大量内存（尤其是在具有大量不同值的文本字段上），并且在已为其加载此缓存的索引读取器被加载之前，不会回收此内存不再使用。

*   术语字典密集型查询

有些查询比其他查询更昂贵。为了防止查询执行时间过长，Lucene 已经对过于复杂的查询进行了一些防范：默认情况下，一个[BooleanQuery 不能超过 1024 个子句](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/core/org/apache/lucene/search/BooleanQuery.html#getMaxClauseCount%28%29)。

通配符查询和模糊查询等其他查询也非常昂贵。

为防止您的用户损害您的搜索服务，您应该决定他们可以做什么和不可以做什么。例如，Twitter（使用 Lucene 作为其搜索后端）曾经将查询限制在几个子句中，以确保在合理的时间内提供响应。（这个问题[Twitter api - search too complex?](https://stackoverflow.com/questions/4976547/twitter-api-search-too-complex)谈论这个限制）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T15:59:48.113

据我所知，您无需担心任何重大漏洞。根据您使用的查询解析器，您可能需要进行一些简单的清理。

*   限制查询字符串的长度
*   检查您不想支持的字符。例如，+、-、[、]、*
*   如果您让用户选择返回的结果数（例如 10、20、50），那么请确保他们不能使用非常大的值。

# android - GridView 布局类似于 Android 4.0 Gallery

> ID：10091913
> 
> 赞同：0
> 
> 时间：2012-04-10T15:41:32.437
> 
> 标签：android, gallery, android-4.0-ice-cream-sandwich

我正在尝试使用 GridView 创建一个类似于 Ice Cream Sandwhich 画廊应用程序的图片库索引：

[http://www.techdron.com/wp-content/uploads/2011/10/sw_albums.jpg](http://www.techdron.com/wp-content/uploads/2011/10/sw_albums.jpg)

（对不起，我还不能使用 img 标签）

我查看了所有常见的教程（例如[http://developer.android.com/resources/tutorials/views/hello-gridview.html](http://developer.android.com/resources/tutorials/views/hello-gridview.html)），但没有一个真正给我我想要的东西。

现在我有以下内容：

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/gridview"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:columnWidth="100dp"
android:numColumns="auto_fit"
android:verticalSpacing="2dp"
android:horizontalSpacing="2dp"
android:stretchMode="none"
android:gravity="center"
android:layout_weight="1"
android:background="#000000"/> 
```

我正在适配器中创建我的视图，如下所示：

```
imageView = new ImageView(mContext);
imageView.setLayoutParams(new GridView.LayoutParams(148,148));
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP); 
```

它很接近，但感觉真的不一样，我不确定它是否能在所有设备上很好地扩展。有谁知道这样使用 GridView 的方法？或者我应该考虑使用另一个小部件，例如[GridLayout](http://developer.android.com/reference/android/widget/GridLayout.html)。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T01:01:31.893

正如您所提到的，您从[GridView 示例](http://developer.android.com/resources/tutorials/views/hello-gridview.html)中获取了 ImageAdapter 。

在这里，我建议您创建一个自定义适配器类，请按照以下步骤操作：

1.  使用所需的小部件为 GridView 中的一项定义行 XML 布局。例如，ImageView 和 ImageView 底角的一个 TextView（如 ICS 中的图库视图中所示）

2.  现在，定义一个自定义适配器类，例如 MyAdapter 并扩展 BaseAdapter 类。

3.  在扩展 BaseAdapter 类之后，您已经覆盖了一些方法，在 getView() 方法中，您必须扩展行 XML 布局（步骤 1）并执行显示类型的操作，例如在 TextView 中设置文本等。

4.  现在将此适配器设置为您的 GridView。完毕！！

查找示例，搜索“Android GridView 示例”并滚动到我的博客链接，您会得到它。这里我不能贴。

# javascript - IE8中的jsTree显示缺陷

> ID：10091914
> 
> 赞同：3
> 
> 时间：2012-04-10T15:41:35.517
> 
> 标签：javascript, internet-explorer-8, jstree

我一直在使用 jsTree 并在 IE8 中遇到问题。所有数据都正确显示在树中，但是当我尝试折叠树的一个分支时，它无法正确显示。也就是说，平滑的折叠动画发生了，但是数据在不应该出现的时候再次可见。

相同的代码在 Firefox 3.6.27 和 Chrome 18.0.1025.151 上运行良好。知道为什么 IE8 的行为会有所不同吗？

这是网页的代码：

```
<html>
<head>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="jstree/jquery.jstree.js"></script>
</head>
<body style="margin:0px">
    <script type="text/javascript">
        $(function() {
            $("#equipment_tree")
                .jstree({ "plugins" : ["themes","html_data","ui"] });
        });
    </script>
    <div id="equipment_tree" style="width:185px; float:left; height:100%; overflow:auto;">
        <ul>
            <li class="jstree-open"><a href="#">Root node 1</a>
                <ul>
                    <li><a href="#">Child node 1</a></li>
                    <li><a href="#">Child node 2</a></li>
                    <li><a href="#">Child node 3</a></li>
                    <li><a href="#">Child node 4</a></li>
                </ul></li>
            <li><a href="#">Root node 2</a></li>
        </ul>
    </div>
</body>
</html> 
```

还有一张错误行为的图片： ![IE8 中 jsTree 的错误行为](../Images/f08b2ee2f53a6eee3b60e7af837caf3f.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T03:23:17.210

您缺少`!DOCTYPE`声明。将以下内容添加到页面顶部，这应该可以解决问题...

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

[在此处](http://msdn.microsoft.com/en-us/library/ie/cc288325%28v=vs.85%29.aspx)阅读有关 IE 的 !DOCTYPE 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T05:19:02.717

太棒了。

```
<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

# c# - 从给定位置开始重新排序列表

> ID：10091917
> 
> 赞同：0
> 
> 时间：2012-04-10T15:41:47.700
> 
> 标签：c#, list

列表：

```
List<int> list1 = new List<int>(){ 0, 1, 2, 3, 4, 5, 6 }; 
```

假设我们要重新排序。开头应该是数字“2”

```
// 2,3,4,5,6,0,1 
```

或在 5 号

```
// 5,6,0,1,2,3,4 
```

**你如何用 C# 做到这一点？**

原因：假设您在 List 中有一个给定数字的索引（数字 3，索引 3）。你想得到右边的第二个数字 - 它将是 5。

不幸的是，如果起始数字**在列表的末尾**（数字 5 和 6） - 将抛出超出范围的异常，**因为没有 7 和 8！**

这个想法是重新排序列表！

*   我们输入 Nr。5 - 我们得到 0 (5,6,0)。
*   我们输入 Nr。6 - 我们得到 1 (6,0,1) 等。

或者也许还有其他（阅读 - 更好的）方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-10T15:47:38.690

更好的方法是使用 mod 运算符 %。当您将一个 int 除以另一个 int 时，这将为您提供余数。它的工作方式是这样的：

```
int nextIndex = (currentIndex + offset) % length; 
```

所以，如果你当前的索引是 5，你的偏移量是 2，你的长度是 6，那么：

```
5 + 2 = 7
7 / 6 = 1 remainder 1 (or 7 mod 6 = 1)
therefore nextIndex = 1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:47:46.430

一个小的 Linq 可以很容易地做到这一点：

```
List<int> list1 = new List<int>(new[] { 0, 1, 2, 3, 4, 5, 6 });

var numToStart = 4;

//reorderedList will be {4,5,6,0,1,2,3}
var reorderedList = list1.Skip(numToStart).Concat(list1.Take(numToStart)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-10T15:48:44.217

您无需重新排序列表。您可以使用以下函数获取号码：

```
int GetNumber(List<int> list, int fromValue, int index) 
{
    return list[(list.IndexOf(fromValue) + index) % list.Count()];
} 
```

你可以这样调用函数：

```
List<int> list1 = new List<int>(new[] { 0, 1, 2, 3, 4, 5, 6 });
int number = GetNumber(list1, 5, 2); // number = 0 
```

# c++ - 是否可以将内存地址保存到字符串中？

> ID：10091918
> 
> 赞同：10
> 
> 时间：2012-04-10T15:41:48.447
> 
> 标签：c++

说我有一个对象

```
MyObj stuff; 
```

要获取东西的地址，我会打印

```
cout << &stuff << endl; 0x22ff68 
```

我想将 0x22ff68 保存在一个字符串中。我知道你不能这样做：

```
string cheeseburger = (string) &stuff; 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-10T15:44:12.923

您可以使用[std::ostringstream](http://www.cplusplus.com/reference/iostream/ostringstream/)。另请参阅[此问题](https://stackoverflow.com/questions/8287188/stdostringstream-printing-the-address-of-the-c-string-instead-of-its-content)。

但是不要指望你必须的地址真的很有意义。使用相同数据的同一程序的一次运行到下一次运行可能会有所不同（因为[地址空间布局随机化](http://en.wikipedia.org/wiki/Address_space_layout_randomization)等）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-02-10T21:19:03.840

这是一种将指针的地址保存为字符串，然后将地址转换回指针的方法。我这样做是为了证明`const`没有真正提供任何保护的概念，但我认为它很好地回答了这个问题。

```
#include <iostream>
#include <string>
#include <sstream>

using namespace std;

int main()
{
    // create pointer to int on heap
    const int *x = new int(5);
        // *x = 3; - this fails because it's constant

    // save address as a string 
    // ======== this part directly answers your question =========
    ostringstream get_the_address; 
    get_the_address << x;
    string address =  get_the_address.str(); 

    // convert address to base 16
    int hex_address = stoi(address, 0, 16);

    // make a new pointer 
    int * new_pointer = (int *) hex_address;

    // can now change value of x 
    *new_pointer = 3;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-10T15:48:21.173

您可以尝试使用字符串格式

字符 strAddress[] = "0x00000000"; // 注意：你应该分配正确的大小，这里我假设你使用的是 32 位地址

sprintf(strAddress, "0x%x", &stuff);

然后你使用普通的字符串构造函数从这个 char 数组创建你的字符串

# tomcat - 是否可以在新的密钥库中安装现有的私钥和 ssl 证书？

> ID：10091928
> 
> 赞同：4
> 
> 时间：2012-04-10T15:42:22.843
> 
> 标签：tomcat, ssl, keystore

我们丢失了用于在服务器故障期间生成 CSR 的原始密钥库。我们有私钥（.key 文件）和原始 CSR（.csr 文件）的备份。是否可以用这些重建密钥库？由于创建证书链的所有说明都需要原始密钥库。

这适用于 Tomcat 7.0.27。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T16:18:24.017

是的，这应该是可能的。但除了私钥之外，您还需要 CA 返回的证书（不是 csr）。步骤可以在[这里找到](http://www.agentbob.info/agentbob/79-AB.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-10T20:05:47.207

如果您只有 CSR 文件和丢失的证书，由 CA（Thawte 等）签名，您可以再次将此 CSR 发送给 CA 进行签名。

这意味着您拥有由 CA 签名的 PEM 格式的密钥和证书。

将证书和密钥转换为 PKCS#12 容器：

```
openssl pkcs12 -export -in newcert.pem -inkey newkey.pem -out server.p12 -name test_server -caname root_ca -chain -CAfile cacert.pem 
```

`caname`，`chain`并且`CAfile`是可选参数，它们将 CA 链添加到容器中。

Tomcat 支持 PKCS#12 证书，但如果你想要 JKS，可以通过 keytool 从 PKCS#12 完成（从 Java 6 开始）：

```
keytool -importkeystore -deststorepass mypass -destkeypass mypass -destkeystore keystore.jks -srckeystore server.p12 -srcstoretype PKCS12 -srcstorepass p12pass -srcalias test_server -destalias test_server 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-14T13:29:36.613

我遇到了与“证书链长度”相同的问题为“1”，我刚刚开始失去所有希望，尝试了很多方法，但通过安装和使用 APR 设法解决：

[https://stackoverflow.com/a/22391211/2802916](https://stackoverflow.com/a/22391211/2802916)

现在 server.xml 中的连接器如下所示：

```
<Connector port="443"
    SSLEnabled="true"
    maxThreads="150"
    scheme="https"
    secure="true"
    clientAuth="false"
    SSLCertificateFile="thecertificate.cer"
    SSLCertificateKeyFile="privatekey.key"
    SSLCACertificateFile="intermediate.crt"
    SSLPassword="thePassForPrivateKey"
/> 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-11T12:24:02.810

似乎我们让它正常工作的唯一方法是撤销我们现有的证书并用新的 CSR 更新它。

# node.js - 使用 node.js 构建具有照片上传可能性的网站

> ID：10091935
> 
> 赞同：0
> 
> 时间：2012-04-10T15:42:47.963
> 
> 标签：node.js, mongodb, module

我是 Node.js 的新手，我的目的是构建一个与 Imgur 类似（但不太复杂）的网站，通过将照片从桌面拖到浏览器可以上传图像。

为此，我想使用 Node.js 和 MongoDB。

我一直在四处寻找，发现很多教程（其中许多已经过时）用于设置数据库，但没有用于文件上传。Node.js 及其所有模块就像丛林，要知道在哪种类型的上下文中使用哪些模块确实不容易。

所以，我真正可以在这里使用的是一些可能适合此目的的教程和/或模块建议的帮助。开始这个最简单和最好的方法是什么？

这是我需要做的一个学校项目（我自己选择了 Node.js 作为服务器端，不知道它到底有多复杂，现在改变已经太晚了），所以我非常感谢你的帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T16:30:52.477

除了 mongodb 驱动程序之外，您无需使用大多数 node.js 模块即可摆脱困境。Express 是一个流行的 Web 应用程序框架，但在这里它甚至可能有点矫枉过正。实际上，您只需要使用拖放代码提供一些 HTML，然后就可以接收和提供图像。在实际的 node.js 中，加上你拥有的任何前端代码，它可能不到 50 行代码。

查看本教程，了解使用 express 的 node.js 端的图像上传部分： [https ://github.com/visionmedia/express/blob/master/examples/multipart/app.js](https://github.com/visionmedia/express/blob/master/examples/multipart/app.js)

这是前端拖放功能的教程： [http ://www.thebuzzmedia.com/html5-drag-and-drop-and-file-api-tutorial/](http://www.thebuzzmedia.com/html5-drag-and-drop-and-file-api-tutorial/)

**更新**您也可以考虑[http://mongoosejs.com/](http://mongoosejs.com/)，这使得 mongodb 交互更容易一些——但本机驱动程序本身使用起来也不错。

# c# - 使用 C# Web 浏览器从只读输入中获取值

> ID：10091938
> 
> 赞同：-1
> 
> 时间：2012-04-10T15:43:12.003
> 
> 标签：c#, winforms, browser

我有网络浏览器控件 c# Win Forms。我无法从它返回 null "" 的只读输入元素中获取值

请告诉我如何在这个只读元素中获取文本

它在 innerHml 中返回：

```
"<LABEL>დასახელება ან სახელი, გვარი&lt;/LABEL> <INPUT id=ctl00_ContentPlaceHolder1_txtBuyerName class=inactive_input title=\"მაქსიმალური სიმბოლოების რაოდენობა 90\" name=ctl00$ContentPlaceHolder1$txtBuyerName readOnly value=\"ცოტნე მემანიშვილი\"> " 
```

我想得到这个`"ცოტნე მემანიშვილი"`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:50:25.090

您是否尝试过此文本输入：

```
txtCompanyName.Text = txtBuyerName.Text; 
```

或者这个隐藏输入：

```
txtCompanyName.Text = txtBuyerName.Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:12:48.457

你可以使用这个，使用`GetElementsByTagName`那个返回`HtmlElementCollection`，然后像这样取第一个孩子：

```
HtmlElementCollection elmnt = browser.Document.GetElementById("ctl00_ContentPlaceHolder1_txtBuyerName").GetElementsByTagName("value");

txtCompanyName.Text = elmnt[0].InnerText; 
```

# c++ - ffmpeg 将 YUV420P 转为 JPEG

> ID：10091941
> 
> 赞同：0
> 
> 时间：2012-04-10T15:43:25.090
> 
> 标签：c++, ffmpeg, jpeg, yuv

我的任务：通过 ffmpeg 将 YUV 帧数据转换为 jpeg 图像。我所拥有的：每个平面的数据和每个平面的线尺寸；

我试图创建空的 AVFrame 并用这些信息填充它的数据和行大小，但是在使用 CODEC_ID_MJPEG 编解码器将其编码为图像并将其保存到文件之后，没有得到正确的 jpeg。

获取图像我必须做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:49:40.690

也许你应该使用 jpeglib 来做到这一点。这是我的代码

```
FILE *outfile = fopen(path, "wb+");

if (!outfile)
    return 1;
h &= ~15;

struct jpeg_compress_struct cinfo;
struct jpeg_error_mgr jerr;

cinfo.err = jpeg_std_error(&jerr);
jpeg_create_compress(&cinfo);
jpeg_stdio_dest(&cinfo, outfile);

cinfo.image_width = w; 
cinfo.image_height = h;
cinfo.input_components = 3;        
cinfo.in_color_space = JCS_YCbCr;

jpeg_set_defaults(&cinfo);
jpeg_set_quality(&cinfo, 90, TRUE);
cinfo.dct_method = JDCT_FASTEST; 

cinfo.raw_data_in = TRUE;
cinfo.comp_info[0].h_samp_factor = 2; 
cinfo.comp_info[0].v_samp_factor = 2; 
cinfo.comp_info[1].h_samp_factor = 1; 
cinfo.comp_info[1].v_samp_factor = 1; 
cinfo.comp_info[2].h_samp_factor = 1; 
cinfo.comp_info[2].v_samp_factor = 1; 

int i, j;
JSAMPROW y[16], cb[16], cr[16];
JSAMPARRAY p[3];

jpeg_start_compress(&cinfo, TRUE);
p[0] = y;
p[2] = cb;
p[1] = cr;

for (j = 0; j < cinfo.image_height; j += 16) {
    for (i = 0; i < 16; i++) {
        y[i] = data[0] + line[0]*(i+j);
        cr[i/2] = data[1] + line[1]*((i+j)/2);
        cb[i/2] = data[2] + line[2]*((i+j)/2);
    }
    jpeg_write_raw_data(&cinfo, p, 16);
}

jpeg_finish_compress(&cinfo);
fclose(outfile);
jpeg_destroy_compress(&cinfo); 
```

其中`data`是 YUV 平面数据，`line`是线尺寸。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-10T16:32:48.627

您需要使用 `libswscale. 我的[答案](https://stackoverflow.com/questions/6094738/converting-yuv420sp-to-yuv420p/7711768#7711768)之一可以帮助你。选择适当的**PIXEL FORMAT**。

# visual-c++ - 如何在 C++ 中将 hashmap 添加到 ArrayList 中？

> ID：10091954
> 
> 赞同：1
> 
> 时间：2012-04-10T15:44:17.137
> 
> 标签：visual-c++, arraylist, c++-cli, hashmap

我想将我的哈希图添加到 vc++ 08 中的 ArrayList 中。我的代码如下。

```
 typedef std::tr1::unordered_map< std::wstring, std::wstring > hashmap;    
          hashmap numbers;
        ArrayList^ myAL = gcnew ArrayList;

myAL->Add(numbers); // gives error... 
```

但它给出的错误是

```
error C2664: 'System::Collections::ArrayList::Add' : cannot convert parameter 1 from 'hashmap' to 'System::Object ^'
1>        No user-defined-conversion operator available, or
1>        No user-defined-conversion operator available that can perform this conversion, or the operator cannot be called 
```

我尝试使用对象进行投射，但没有成功。任何人都可以帮我**在 arraylist 中添加 hashmap**吗？

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T21:24:41.833

您在上面尝试的操作不起作用，因为托管类型和本机类型不会以这种方式直接互操作。

我建议 Kenny Kerr 的经典 C++/CLI 文章[Best Practices for Writing Efficient and Reliable Code with C++/CLI](http://msdn.microsoft.com/en-us/library/aa730837%28v=vs.80%29.aspx)来更详细地找出您的特定互操作场景，但我认为您想要做的是将指向您的本机对象的指针嵌入一个托管对象，您可以将其添加到列表结构中。如果您使用 Mr. Kerr 的[AutoPtr 类](http://weblogs.asp.net/kennykerr/archive/2007/03/26/AutoPtr.aspx)（在上面的文章中描述并在[此处](http://weblogs.asp.net/kennykerr/archive/2007/03/26/AutoPtr.aspx)更新），您应该能够创建一个包含 AutoPtr 作为成员的托管类，您可以将其添加到您的 ArrayList。

# python - 获取父类名称？

> ID：10091957
> 
> 赞同：63
> 
> 时间：2012-04-10T15:44:24.047
> 
> 标签：python, oop

```
class A(object):
    def get_class(self):
        return self.__class__

class B(A):
    def __init__(self):
        A.__init__(self)

b = B()
print b.get_class() 
```

此代码将打印`<class '__main__.B'>`.

如何获取已定义方法的类名（即`A`）？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-10T15:57:47.530

来自文档：[https ://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy](https://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)

类对象有一个`__name__`属性。通过派生类的属性内省基类可能更清晰`__bases__`（例如，如果代码要存在于派生类中）。

```
>>> class Base(object):
...     pass
...
>>> class Derived(Base):
...     def print_base(self):
...         for base in self.__class__.__bases__:
...             print base.__name__
...
>>> foo = Derived()
>>> foo.print_base()
Base 
```

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-04-10T16:17:24.920

> [`inspect.getmro(cls)`](https://docs.python.org/2/library/inspect.html#inspect.getmro)
> 
> *按方法解析顺序返回类 cls 的基类的元组，包括 cls。在这个元组中没有一个类不止一次出现。请注意，方法解析顺序取决于 cls 的类型。除非正在使用非常特殊的用户定义元类型，否则 cls 将是元组的第一个元素。*

```
import inspect
inspect.getmro(B) 
```

结果将是：

```
(<class '__main__.B'>, <class '__main__.A'>, <type 'object'>) 
```

第一个元素是类本身，第二个元素始终是父母的第一个。在那之后，事情可能会变得更复杂一些。

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-04-10T15:53:12.980

你可以改变

```
return self.__class__

return A().__class__ 
```

由于没有其他可用的 A() 实例...

# ruby-on-rails - Rails：如何将日期时间字符串解析为特定时区

> ID：10091959
> 
> 赞同：47
> 
> 时间：2012-04-10T15:44:24.720
> 
> 标签：ruby-on-rails, date, timezone

我在 Debian 上使用 Rails 3.2 和 ruby​​ 1.9.3。我有一个应用程序，它通过 HTML 表单以字符串的形式收集日期、时间和时区。像这样的东西：

```
start_date: "04-15-2010",
start_time: "10:00:00",
timezone: "Central Time (US & Canada)" 
```

我想要做的是将这 3 个元素解析为一个日期，该日期作为 UTC 保存到我的数据库中，在这种情况下，一旦它处于 UTC 时区，它将增加 7 小时的开始时间。因此，一旦它作为 UTC 在数据库中存储的时间将是 17:00，而不是接收到的中央时间。

我尝试过这样的事情来解析日期：

```
ActiveSupport::TimeZone[timezone].at DateTime.strptime("{ 2012-04-09 20:00:00 }", "{ %Y-%m-%d %H:%M:%S }").to_i 
```

但是，我无法使用 %Z 将时区合并到结果时间中。它要么不解析，要么时间被解释为 UTC 而不是中央时间。所以我的问题是，如何在不更改存储的实际日期/时间值的情况下将日期字符串强制转换为某个时区。我希望能够将字符串解析为包含正确时区的日期/时间对象，*以便*将来的时区转换是准确的。我已经看遍了，找不到办法做到这一点。这很奇怪，因为这似乎与从 HTML 表单输入的日期一样常见。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-04-03T09:53:54.687

试试这个：

```
zone = "Central Time (US & Canada)"  

ActiveSupport::TimeZone[zone].parse("2013-04-03 17:47:00") 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-08-10T19:56:47.123

## 使用[`String#in_time_zone`](https://www.rubydoc.info/docs/rails/4.1.7/String:in_time_zone)(Rails 4+)

我个人更喜欢使用`String#in_time_zone`：

```
>> '22.09.1986 10:30'.in_time_zone('Central Time (US & Canada)')
# => Mon, 22 Sep 1986 10:30:00 CDT -05:00 
```

这会将字符串中的日期和时间解析为提供的时区。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-04-10T16:20:01.093

`%Z`是指定时区名称的正确方法。您是否尝试过以下操作？

```
date_and_time = '%m-%d-%Y %H:%M:%S %Z'
DateTime.strptime("04-15-2010 10:00:00 Central Time (US & Canada)",date_and_time) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-22T01:14:36.687

这是我想出的方法。不是最漂亮的，但它有效。允许使用指定的格式解析字符串，然后将其转换为我知道`Time.zone.parse`需要的格式。

```
class ActiveSupport::TimeZone
  def strptime(time, format='%m/%d/%Y')
    formatted = Time.strptime(time, format).strftime('%Y-%m-%d %T')
    parse(formatted)
  end
end 
```

然后你可以做一些类似另一个问题中提到的事情，但使用指定的格式：

```
zone = "Central Time (US & Canada)"  
ActiveSupport::TimeZone[zone].strptime('2013-04-03', '%Y-%m-%d') 
```

或者，如果您已经设置了时区：

```
Time.zone = "Central Time (US & Canada)" 
Time.zone.strptime('01/13/2006') 
```

我使用了默认格式，`%m/%d/%Y`因为这是我的用户输入的大部分时间。您可以根据自己的需要自定义它，或者使用默认格式`DateTime`，相信是 iso8601 ( `%FT%T%z`)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-09T11:42:05.470

我终于找到了肮脏但明确的方法来做到这一点。

首先，使用普通的 Ruby Time.strptime 解析字符串，如下所示：

```
time = Time.strptime('12 : 00 : PM', '%I : %M : %p') 
```

这样你就得到了解析的时间，但还没有在正确的时区。为了解决这个问题，让我们将时间转换为字符串形式并使用标准的 ActiveSupport::TimeZone#parse 解析它

```
Time.zone.parse(time.to_s) 
```

结果是 ActiveSupport::TimeWithZone 将我们的时间解析为正确的时区。

我们之所以必须这样做，是因为 ActiveSupport::TimeZone 和 ActiveSupport::TimeWithZone 都不支持 strptime 方法。因此，我们必须使用没有时区信息的核心 Ruby strptime 解析时间，将其转换为 ActiveSupport 对象中可接受的格式，然后再次解析它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-11-13T22:33:38.917

要让 DateTime 获取日期字符串并附加 UTC 以外的时区而不更改日期字符串的值，请使用它，它很简单，不会在闰日中断:)

```
xx = DateTime.strptime("9/1/15 #{object.time_zone}", "%m/%d/%Y %Z") 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-02-13T10:46:11.773

转换 UTC 中的特定日期格式。

```
ActiveSupport::TimeZone['UTC'].parse(Time.strptime('01/24/2019T16:10:16', "%m/%d/%YT%H:%M:%S").asctime) 
```

# c# - 为 C# 创建一个可保存的“项目”

> ID：10091966
> 
> 赞同：0
> 
> 时间：2012-04-10T15:44:47.400
> 
> 标签：c#, database, system.data.sqlite

我正在开发一个可视化大型专业数据集的项目。

“项目”由两个大型数据集（从 XLS 或 CSV 导入）和几个其他设置和较小的表组成。我们计划将这些表存储在 SQLite 中（以便于访问）。

我们希望允许用户保存“项目”，这样他们就不需要再次加载 CSV 和 XLS 文件。我们还想防止以后获取项目文件的用户篡改数据。我们希望经理能够创建一个“项目”文件并将其传递给其他员工（这样他们就可以在演示文稿中使用可视化数据，但他们不能修改它）。该程序已经内置了访问控制。

人们对创建这种类型的“项目”文件有什么建议，最好是基于 SQLite 数据库。

**注意：**我在这里寻求建议，因为谷歌不可能找到 C# 和 Project。您将获得 Visual Studio 操作方法结果。

**澄清：**想象一下，如果您打开 Microsoft Word（或 OpenOffice Write，如果您愿意）。您可以创建打开并保存一个“项目”。您可以将“项目”发送给拥有该程序的其他人。我希望“项目”文件不能在不同的 SQLite 客户端中使用（为了数据安全）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:56:48.010

我不会说这些东西有*任何*类型的模板或*通用*结构。你的结构本身已经很好了。您可能不仅有数据信息，还可能有`meta-information`内部数据库文件，指定（例如）*用户名*、*上次更改的数据*、*评论*等任何使您`project/doc file`更全面和完整的信息，不断关注*内存占用*，因为它会非常很高兴有可能通过*密钥驱动器*将该文件传递给某人或通过*电子邮件发送*。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:47:34.170

您能否创建一个具有一系列 BLOB 数据类型（用于文档）和一个只读布尔字段的表。如果您不知道会有多少个文档，您需要输入另一个名为 document 的表，该表链接到项目表！

# api - 使用 Google Search API 根据关键字获取网站类别

> ID：10091968
> 
> 赞同：1
> 
> 时间：2012-04-10T15:44:48.787
> 
> 标签：api, search

正如问题所暗示的那样，Google 自定义搜索 API 是否具有根据输入关键字返回类别（音乐、娱乐、新闻、游戏等）的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-07T16:54:31.303

您可以使用 Adwords 关键字规划器工具或展示规划器工具来获取关键字的相关想法。

# jquery - jquery colorbox - 在弹出窗口上打开弹出窗口

> ID：10091978
> 
> 赞同：0
> 
> 时间：2012-04-10T15:45:26.480
> 
> 标签：jquery, colorbox

我将 jquery colorbox 1.3.18 与 jquery 1.7.2 一起使用。

我的要求是打开一个弹出窗口并从该弹出窗口打开另一个弹出窗口，并且应该禁用前一个弹出窗口，直到我关闭最后一个弹出窗口。这在当前版本中可以实现吗？

# android - android：是否可以在listview项目中放置多个布局

> ID：10091986
> 
> 赞同：0
> 
> 时间：2012-04-10T15:46:05.530
> 
> 标签：android, android-layout, android-listview

嗨，我想使用列表视图（可能）是否可以用两个按钮和两个文本区域填充每个条目，并用真实或线性布局进行布局？

我目前使用带有布局充气器的滚动视图来实现这一点，但我认为 listview 可能会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T15:49:46.243

是的你可以。您需要为此使用自定义列表视图。通过在其中添加一个列表视图然后使用 AAdapter 将另一个 xml 引用到该列表视图来创建一个活动，以便列表视图的每个元素都具有第二个 xml 文件的布局。本[教程](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)应该可以帮助您理解这个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:53:10.423

是的，您可以为列表视图的特定列表项放置任何小部件。

要定义这种 ListView，您必须定义一个**自定义适配器**，请按照以下步骤操作：

1.  为列表项定义一个单行文件，例如，带有 2-3 个 TextView 的 RelativeLayout。
2.  通过扩展定义一个类`BaseAdapter`。
3.  `getView()`在该类的方法中对 XML 进行膨胀并进行显示操作。
4.  将此适配器设置为 ListView。

# ios - ASIHTTPRequest 加载数据时如何使用 UIActivityIndi catorView？

> ID：10091991
> 
> 赞同：0
> 
> 时间：2012-04-10T15:46:21.333
> 
> 标签：ios, uiactivityindicatorview

我正在使用 ASIHTTPRequest 加载 JSON 数据。当用户触摸按钮时，我正在请求大量数据（这里我正在加载另一个将请求 JSON 数据的视图）。大约需要 15 秒。装载。一旦用户触摸按钮直到数据加载，我如何使用 UIActivityIndi​​catiorView。

任何人之前都这样做过或有任何提高用户性能的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:09:04.707

```
 -(void) startRequest:(NSString*)username password:(NSString*)password
{
   ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:mainUrl];    
    [request setDelegate:self]; 
    [request setDidFailSelector:@selector(requestFailed:)];
    [request startAsynchronous];
    [self.addSubview:self.indicator];
    [indicator startAnimating]; 
```

}

```
 -(void) requestFinished: (ASIHTTPRequest *) request {

    [self.indicator stopAnimating];
    [self.indicator removeFromSuperview]; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T17:23:00.567

这是使用 ASIHTTPRequest 和 UIActivityIndi​​cator 的示例

```
-(void) loadImageFromURL:(NSURL *) url withActivityIndicator:(BOOL) yesOrNo {        
__block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];

UIActivityIndicatorView *activityIndicator = nil;

if (yesOrNo == YES) {
    activityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle: UIActivityIndicatorViewStyleGray];
    [activityIndicator setCenter: self.center];
    [activityIndicator startAnimating];
    [self addSubview: activityIndicator];
}

[request setCompletionBlock: ^{
    self.image = [UIImage imageWithData: [request responseData]];
    [activityIndicator removeFromSuperview];
    [activityIndicator release];
}];

[request setFailedBlock: ^{
    [activityIndicator removeFromSuperview];
    [activityIndicator release];
}];

[request startAsynchronous];
}

@end 
```

# objective-c - Objective-C综合导致错误？

> ID：10091993
> 
> 赞同：1
> 
> 时间：2012-04-10T15:46:41.253
> 
> 标签：objective-c, ios, gnustep

我对objective-c很陌生，我自己尝试了一些例子。这是我的示例代码

```
#import <objc/objc.h>
#import <Foundation/Foundation.h>

@interface Test:NSObject
{
  int noOfWheels;
  int total;
}

   @property int noOfWheels;
   @property int total;
   -(void) print;
@end

@implementation Test
@synthesize  noOfWheels, total;
-(void) print
{
  NSLog (@" noofWheels is %i, total %i ", noOfWheels, total);
}

@end

int main ( int argc, char ** argv)
{
  Test *t = [Test alloc];
  t = [t init];
  [t setnoOfWheels: 10];
  [t settotal: 300];
  [t print];
} 
```

并且它编译没有错误，但是当我运行程序时出现以下错误。

```
Uncaught exception NSInvalidArgumentException, reason: -[Test setnoOfWheels:]: unrecognized selector sent to instance 0x87aef48 
```

我在我的代码中做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T15:49:32.200

默认情况下，iVar 的第一个字母在 setter 方法名称中大写。所以正确的调用将是：

```
[t setNoOfWheels: 10]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-10T15:50:14.233

```
[t setnoOfWheels: 10]; 
```

应该

```
[t setNoOfWheels: 10]; 
```

甚至更好，因为您要声明一个属性：

```
t.noOfWheels = 10; 
```

# python - 通过 Google Search API for Shopping 访问 Google Affiliate Network 产品提要

> ID：10091996
> 
> 赞同：0
> 
> 时间：2012-04-10T15:46:53.497
> 
> 标签：python, google-api, google-shopping-api, google-api-python-client

我想通过 Google 搜索 API 访问我的 Google Affiliate Network 产品供稿以进行购物。我想从我正在开发的后端 Python 库中执行此操作。有没有人做过这样的事情？

我有以下内容：

*   一个谷歌帐户
*   在 Google API 控制台中启用 Search API for Shopping 并获得 API 密钥（用于服务器应用程序）和客户端 ID + 客户端密码（用于已安装的应用程序）。
*   一个 GAN 帐户并获得了 pid。
*   几个批准我的广告商，所以我的产品提要中有可用的产品。

**OAuth2 Python 代码：**

```
from apiclient.discovery import build
from oauth2client.client import OAuth2WebServerFlow
from oauth2client.tools import run
from oauth2client.django_orm import Storage
from models import CredentialsModel 

storage = Storage(CredentialsModel, 'name', 'GAN Reporting', 'credentials')
credentials = storage.get()

if credentials is None or credentials.invalid == True:
    flow = OAuth2WebServerFlow(
        client_id=MyClientID,
        client_secret=MyClientSecret,
        scope='https://www.googleapis.com/auth/shoppingapi',
        user_agent='cleverblocks/1.0',
        access_type='offline')
    credentials = run(flow, storage)

http = httplib2.Http()
credentials.authorize(http)
client = build('shopping', 'v1', http=http,
    developerKey=MyAPIKey)
resource = client.products()
request = resource.list(source='gan:MyGANPid', country='US')
return request.execute() 
```

运行这个我得到以下错误（HttpError 412）：

> 没有为给定发布商注册广告商

我用来验证的用户列在 GAN->settings->users 部分。

我一直在从各个方向进行黑客攻击，直到我现在开始认为这个 API 被破坏了。有没有人设法通过 Search API for Shopping 访问 GAN 产品提要？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T13:53:47.110

终于让上面的 oAuth 代码工作了。

缺少的步骤是在 GAN 控制台中的 Subscriptions->Product Feed 下，为所有广告商设置 FTP 订阅。我使用了虚拟 FTP 凭据。

如果没有这一步，您将收到上述错误。

# jquery - jQuery 验证插件 - 不显示必需的消息

> ID：10091998
> 
> 赞同：2
> 
> 时间：2012-04-10T15:46:54.433
> 
> 标签：jquery, jquery-validate

我在我的页面上使用[jQuery Validation Plugin](http://docs.jquery.com/Plugins/Validation)并具有以下代码`errorPlacement`：

```
errorPlacement: function(err, el) {
  err.insertAfter(el);
} 
```

按预期工作，但对于必填字段，我不希望默认消息显示为必填规则。因此，如果电子邮件具有 and 的规则`required`，`email`我只想显示错误消息是否适用于`email`规则，而不是`required`规则。有没有办法只禁用所需的消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-10T15:53:26.253

```
$('#myForm').validate({
    rules: {
       myField: {
            required: true,
            email: true
       }
    },
    messages: {
       myField: {
            required: "",
            email: "my email rule error message"
       }
    },

    //  my other options & configuration parameters
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T15:54:55.893

只需`required`从规则中删除并离开`email`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:39:38.433

我将所需的消息设置`''`为 Sparky672 建议的，并在插入错误元素之前添加了一个空标签检查。

```
errorPlacement: function(err, el) {
  if(err.text() !== '') err.insertAfter(el);
} 
```