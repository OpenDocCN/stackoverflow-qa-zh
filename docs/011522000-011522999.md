# StackOverflow 问答 11522000-11522999

# c# - 如何在 DateTime 中创建表示日期的 XElement 类型为 xs:Date

> ID：11522002
> 
> 赞同：11
> 
> 时间：2012-07-17T11:58:24.897
> 
> 标签：c#, xml, xsd

我正在使用 XDocument 创建一个 XML 文件，如下所示：

```
var d = DateTime.Now;

var xDocument = new XDocument(new XElement("ThisIsADate", d)); 
```

但是，生成的 XML 使用 xs:datetime 格式（例如“2012-05-11T00:00:00”）表示日期 d。即，它包括时间信息。

但是，我的 XML 旨在匹配我的 XML 模式，它将元素定义为“xs:date”类型。因此，由于额外的时间信息，文件在针对模式进行验证时被拒绝。

我怎样才能解决这个问题？我知道我可以自己使用 ToString() 格式化日期，但这肯定不是“正确”的方法。不能指望我知道如何将日期格式化为有效的 XML 日期——这是框架中与 XML 相关的部分的工作。

* * *

**编辑**：请注意，我*确实*知道如何使用 ToString() 格式化日期，而且我也知道什么格式的字符串会给我正确的结果。这不是我要找的答案。我正在寻找一个函数/方法/类，它了解 xs:date （等）是什么，并且支持这些类型的编码。

需要明确的是，我不是要“完成它”，而是要“把它做好”。在我的书中，重新发明 XML 轮子并不是“做对了”。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-13T19:40:36.323

正如已经指出的那样，LINQ to XML 无法`DateTime`使用该`xs:date`格式生成值。使用`DateTime`该格式的 LINQ to XML 往返行程`xs:dateTime`和 .NET 不具有仅日期类型，因此 LINQ to XML 的设计者决定仅使用该格式`xs:dateTime`来不使 API 复杂化也就不足为奇了。

唯一的选择是将日期格式化为字符串，让您完全控制格式。要正确使用`xs:date`格式，您需要`DateTime`使用以下代码将 转换为字符串：

```
d.ToString("yyyy-MM-dd", CultureInfo.InvariantCulture) 
```

使用`ToShortDateString`和/或不指定 a`CultureInfo`不会产生预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-09T14:55:34.760

我使用以下 DateElements 类解决了这个问题

```
private class XDateElement : XElement
{
   public XDateElement(XName name, DateTime Date) : 
     base(name, Date.ToString("yyyy-MM-dd", CultureInfo.InvariantCulture))
   { }
} 
```

使用这样的类的优点是，您只能在一个地方进行特定的日期转换。

```
var d = DateTime.Now;
var xDocument = new XDocument(new XDateElement("ThisIsADate", d)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:15:16.530

似乎有一些混淆 XML 或因此 XElement 将值存储为字符串。存储的更多的是 Xml Schema Validator 的工作。

因此，当您必须表示时，您必须`Date`传入 Date 部分的字符串版本，您可以`ToShortDateString()`使用`ToString()`.

当您传递 DateTime 实例时，它只是调用包含 Time 组件的 ToString() 。

希望这对您有所帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-17T15:57:19.340

A`DateTime` *总是*同时具有日期和时间分量。所以诀窍是告诉`DateTime`它只输出它的日期组件。当您在接收端重构日期时，时间将默认为午夜。

```
var XDocument = new XDocument(new XElement("ThisIsADate", DateTime.Now.ToShortDateString())); 
```

默认形式是`M/d/yyyy`，但它仍然可能不是正确的格式！我不知道您的架构期望什么。

所以使用`ToString("yourFormatStringHere")`

```
var XDocument = new XDocument(new XElement("ThisIsADate", DateTime.Now.ToString("M-dd-yyyy"))); 
```

如果您想真正花哨，即编写健壮的代码...从您的模式文档中提取格式字符串并在`ToString()`方法中引用它，而不是使用显式但冗余的格式字符串。

# svn - 从单个转储文件加载多个 svn 存储库

> ID：11522005
> 
> 赞同：0
> 
> 时间：2012-07-17T11:58:33.903
> 
> 标签：svn, import

我有一个来自旧服务器的 svn 转储文件。此文件包含多个存储库。如何将此转储文件导入新的 svn 服务器？

我接下来尝试了：

```
svnadmin create test
svnadmin load test < dumpfile 
```

发生下一个错误：svnadmin:E140001: Malformed dumpfile header 'Audio_Tester.dmp'

认为问题的发生是因为一个转储文件中有多个存储库

谢谢。威廉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:32:40.813

您不能导入包含多个存储库的转储文件。您应该将每个存储库转储到它自己的文件中，然后一个一个地加载它们。

# ios - UIScrollView 内的 UIWebView

> ID：11522007
> 
> 赞同：8
> 
> 时间：2012-07-17T11:58:39.567
> 
> 标签：ios, uiwebview, uiscrollview

我的应用程序在 UIScrollView 中有几个 UIWebView 视图。有时我有 html 内容，所以我使用 UIWebView loadHTMLString:baseURL: 方法加载 UIWebView。这似乎不会导致问题。最近我开始使用 loadRequest: 方法加载一些带有 url 的 UIWebView 实例。一旦我开始这样做，每当我滚动时，我都会收到以下错误：

***由于未捕获的异常“CALayerInvalidGeometry”而终止应用程序，原因：“CALayer 位置包含 NaN：[nan nan]”

使用以下堆栈跟踪：

```
Thread 1, Queue : (null)
#0  0x01dd5caa in objc_exception_throw ()
#1  0x01f5da48 in +[NSException raise:format:arguments:] ()
#2  0x01f5d9b9 in +[NSException raise:format:] ()
#3  0x007e8c0d in CA::Layer::set_position(CA::Vec2<double> const&, bool) ()
#4  0x007def55 in -[CALayer setPosition:] ()
#5  0x037b07d3 in -[WebFixedPositionContent scrollOrZoomChanged:] ()
#6  0x00a5bfae in -[UIWebDocumentView _updateFixedPositionContent] ()
#7  0x00c66ff3 in -[UIWebBrowserView _updateFixedPositionContent] ()
#8  0x00a5b07e in -[UIWebDocumentView _didScroll] ()
#9  0x01fb6dea in -[NSObject performSelector:] ()
#10 0x01f207f1 in -[NSArray makeObjectsPerformSelector:] ()
#11 0x0091627d in -[UIScrollView(Static) _notifyDidScroll] ()
#12 0x009029ae in -[UIScrollView setContentOffset:] ()
#13 0x00909ac8 in -[UIScrollView _updatePanGesture] ()
#14 0x0090d3c0 in -[UIScrollView handlePan:] ()
#15 0x00b84e29 in _UIGestureRecognizerSendActions ()
#16 0x00b84133 in -[UIGestureRecognizer _updateGestureWithEvent:] ()
#17 0x00b853bf in -[UIGestureRecognizer _delayedUpdateGesture] ()
#18 0x00b87a21 in ___UIGestureRecognizerUpdate_block_invoke_0541 ()
#19 0x00b8797c in _UIGestureRecognizerApplyBlocksToArray ()
#20 0x00b803d7 in _UIGestureRecognizerUpdate ()
#21 0x008e51a2 in -[UIWindow _sendGesturesForEvent:] ()
#22 0x008e5532 in -[UIWindow sendEvent:] () 
```

我查看了许多关于此的问题和答案，并意识到苹果不鼓励这样做，但我还没有看到任何提供替代方案的答案。

**我的第一个问题：有没有其他方法可以达到同样的效果？**

下面是我如何创建 UIWebView 的片段

```
- (void) createWebView:(NSString*)url{
NSInteger requestedHeight = 480;
NSInteger requestedWidth = 640;

self.webContent = [[UIWebView alloc] initWithFrame: CGRectMake(0, self.frame.size.height, requestedWidth, requestedHeight)];
self.webContent.scrollView.userInteractionEnabled = NO;
self.webContent.scrollView.scrollEnabled = NO; 
self.webContent.scrollView.bounces = NO;

NSURLRequest *urlRequest = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
[self.webContent loadRequest:urlRequest];

[self addSubview:self.webContent];

NSInteger calculatedHeight = self.webContent.frame.origin.y + self.webContent.frame.size.height;
NSInteger calculatedWidth = self.webContent.frame.origin.x + self.webContent.frame.size.width;
if (calculatedHeight > self.frame.size.height || calculatedWidth > self.frame.size.width){
    self.frame = CGRectMake(self.frame.origin.x, self.frame.origin.y, MAX(self.frame.size.width, calculatedWidth), MAX(self.frame.size.height, calculatedHeight + 5));
}    
} 
```

如您所见，我禁用了 UIWebView 的滚动和用户输入。

**我的第二个问题：当我明确禁用该功能时，为什么 UIWebView（或者至少是它的一个或多个子视图）处理滚动？**

**我的第三个问题：由于它似乎无论如何都在处理滚动，有没有其他方法可以拦截或禁用发送到 UIWebView 的滚动通知？**

如您所见，我并不打算让用户与 UIWebView 的内容进行交互 - 只是让他们看到内容。

**在这种情况下，可能的替代方法是以某种方式在用户不可见的 UIScrollView 之外创建一个 UIWebView，将其内容捕获到图像中，然后在 UIImageView 中显示内容？如果是这样，我将如何将 UIWebView 的内容捕获到图像中？**

编辑：我找到了一个非常简单的解决方案。基本上加载您的 UIWebView 但不要将其添加为子视图。当 UIWebView 完成加载后，使用以下代码创建图像：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView{
UIGraphicsBeginImageContext(self.webContent.bounds.size);
[self.webContent.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[self.imageContent setImage:image];
} 
```

我仍然有兴趣听到问题 1 到 3 的答案。将来，如果我们决定支持交互式 UIWebView，则此解决方案将不起作用。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T20:10:55.547

您是否在 iOS 模拟器或实际设备上测试过此代码？

我最近在模拟器中测试 iOS 5.1 时遇到了同样的崩溃，但在运行 5.1 的 iPad/iPhone 上没有遇到同样的崩溃。

iOS 6 在设备和模拟器上运行良好。

我相信这是由于 iOS 6 中的 UIWebView 更改，UIWebView 现在已更改为异步绘制其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T00:02:56.660

如果没有可以使用的示例项目，很难调试它。所以我不确定是什么原因造成的。我会仔细检查你的框架计算。如果您的父 UIScrollView 在界面构建器中，我会尝试关闭自动布局以查看是否有所不同（因为 contentSize 的工作方式不同）。

您还可以尝试其他几件事：

```
[webview.scrollView.panGestureRecognizer requireGestureRecognizerToFail:myScrollView.panGestureRecognizer]; 
```

这将确保您的父滚动视图将始终取代 web 视图。所以也许这会阻止错误发生。

根据您使用 Web 视图的方式，有一些情景替代方案：

*   在 UIWebView 上调用 renderInContext 以获取屏幕截图并简单地使用 UIImage。处理 UIWebView 后，您实际上会使用更少的内存。

*   [DTCoreText](https://github.com/Cocoanetics/DTCoreText)允许您使用 CoreText 呈现某些 HTML 内容。

*   `UIMarkupTextPrintFormatter`允许您“打印” HTML 内容。它可以用来获取图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-13T17:37:38.573

尝试设置属性时检查 NaN 值：

```
BOOL isNaN = isnan(your_Value); 
```

所以你可以正确处理这些值，一旦你有了这个并且你可以运行代码，最好首先找出为什么会发生这种情况（我猜想在获取你试图设置的值时会进行一些狡猾的计算）

此外，这里是 NaN 解释：[http ://en.wikipedia.org/wiki/NaN](http://en.wikipedia.org/wiki/NaN)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T08:57:34.990

下面的代码可以禁用 webView 中的滚动。

```
webView.userInteractionEnabled = NO; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T15:13:48.550

实际上，我只能建议尝试编写自己的“webview”类，该类将包含自定义 NSURLConnection 和 NSURLRequest 在后台，并使用 loadHTMLString 启动 WebView。我在应用程序中使用 WebView 时遇到了很多问题。所以 UIWebView loadRequest 调用可能没有解决方案。

# python - Scrapy 没有从响应中下载标签

> ID：11522010
> 
> 赞同：0
> 
> 时间：2012-07-17T11:58:49.910
> 
> 标签：python, request, response, scrapy

我目前正在研究scrapy，下面是我的spider.py代码

```
class ExampleSpider(BaseSpider):
    name = "example"
    allowed_domains = {"careers-preftherapy.icims.com"}

    start_urls = [
        "https://careers-preftherapy.icims.com/jobs/search"
    ]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        pageCount = hxs.select('//td[@class = "iCIMS_JobsTablePaging"]/table/tr/td[2]/text()').extract()[0].rstrip().lstrip()[-2:].strip()
        for i in range(1,int(pageCount)+1):
            yield Request("https://careers-preftherapy.icims.com/jobs/search?pr=%d"%i, callback=self.parsePage)

    def parsePage(self, response):
        hxs = HtmlXPathSelector(response)
        urls_list_odd_id = hxs.select('//table[@class="iCIMS_JobsTable"]/tr/td[@class="iCIMS_JobsTableOdd iCIMS_JobsTableField_1"]/a/@href').extract()
        print urls_list_odd_id,">>>>>>>odddddd>>>>>>>>>>>>>>>>"
        urls_list_even_id = hxs.select('//table[@class="iCIMS_JobsTable"]/tr/td[@class="iCIMS_JobsTableEven iCIMS_JobsTableField_1"]/a/@href').extract()
        print urls_list_odd_id,">>>>>>>Evennnn>>>>>>>>>>>>>>>>"
        urls_list = []
        urls_list.extend(urls_list_odd_id)
        urls_list.extend(urls_list_even_id)
        for i in urls_list:
            yield Request(i.encode('utf-8'), callback=self.parseJob)

    def parseJob(self, response):
        pass 
```

打开页面后，我在这里实现了分页

```
https://careers-preftherapy.icims.com/jobs/search?pr=1
 https://careers-preftherapy.icims.com/jobs/search?pr=2 
```

...........很快

我为每个 url 产生了请求（假设这里有 6 个页面）。当 scrapy 到达第一个 url 时，我试图从第一个 url 收集所有 href 标签 `(https://careers-preftherapy.icims.com/jobs/search?pr=1)` ，当它到达第二个 url 时同样收集所有 href 标签。

现在在我的代码中，如您所见，每个页面中共有 20 个 href 标签，其中 10 个 href 标签在`td[@class="iCIMS_JobsTableOdd iCIMS_JobsTableField_1"]` \ 下，其余的在`td[@class="iCIMS_JobsTableEven iCIMS_JobsTableField_1"]`.

问题出在哪里，有时会下载标签，有时则不知道发生了什么，我的意思是当我们运行蜘蛛文件两次它正在下载时，另一次它返回一个空列表，如下所示

**第一次运行：**

```
2012-07-17 17:05:20+0530 [Preferredtherapy] DEBUG: Crawled (200) <GET https://careers-preftherapy.icims.com/jobs/search?pr=2> (referer: https://careers-preftherapy.icims.com/jobs/search)
[] >>>>>>>odddddd>>>>>>>>>>>>>>>>
[] >>>>>>>Evennnn>>>>>>>>>>>>>>>> 
```

**第二次跑**

```
2012-07-17 17:05:20+0530 [Preferredtherapy] DEBUG: Crawled (200) <GET https://careers-preftherapy.icims.com/jobs/search?pr=2> (referer: https://careers-preftherapy.icims.com/jobs/search)
[u'https://careers-preftherapy.icims.com/jobs/1836/job', u'https://careers-preftherapy.icims.com/jobs/1813/job', u'https://careers-preftherapy.icims.com/jobs/1763/job']>>>>>>>odddddd>>>>>>>>>>>>>>>>
[preftherapy.icims.com/jobs/1811/job', u'https://careers-preftherapy.icims.com/jobs/1787/job']>>>>>>>Evennnn>>>>>>>>>>>>>>>> 
```

我的问题是为什么它有时会下载有时不会，请尝试回复我这对我真的很有帮助。

提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:54:02.710

> 问题出在哪里，有时会下载标签，有时不会，我不知道发生了什么

要了解正在发生的事情，您应该进行调试。我的猜测是您的 xpath 查询返回一个空列表，因为您有一个意外的页面。

执行以下操作：

```
def parsePage(self, response):
    hxs = HtmlXPathSelector(response)
    urls_list_odd_id = hxs.select('//table[@class="iCIMS_JobsTable"]/tr/td[@class="iCIMS_JobsTableOdd iCIMS_JobsTableField_1"]/a/@href').extract()
    print urls_list_odd_id,">>>>>>>odddddd>>>>>>>>>>>>>>>>"
    urls_list_even_id = hxs.select('//table[@class="iCIMS_JobsTable"]/tr/td[@class="iCIMS_JobsTableEven iCIMS_JobsTableField_1"]/a/@href').extract()
    print urls_list_odd_id,">>>>>>>Evennnn>>>>>>>>>>>>>>>>"

    if not urls_list_odd_id or not urls_list_odd_id:
        from scrapy.shell import inspect_response
        inspect_response(response)

    urls_list = []
    urls_list.extend(urls_list_odd_id)
    urls_list.extend(urls_list_even_id)
    for i in urls_list:
        yield Request(i.encode('utf-8'), callback=self.parseJob) 
```

当您使用 shell 类型`view(response)`在浏览器中查看下载的页面时（例如在 Firefox 中），您将能够测试您的 xpath 查询并找出它们为什么不返回任何内容。 [这](http://doc.scrapy.org/en/latest/topics/shell.html#invoking-the-shell-from-spiders-to-inspect-responses)是有关scrapy shell的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T16:03:32.940

您可以使用`open_in_browser()`在浏览器中打开响应：

```
def parsePage(self, response):
    from scrapy.utils.response import open_in_browser
    open_in_browser(response) 
```

# android - 如何在同一部手机上使用不同的地图视图

> ID：11522012
> 
> 赞同：0
> 
> 时间：2012-07-17T11:58:53.107
> 
> 标签：android, google-maps

我的应用程序是国际化的，所以在某些国家有 Fortress 手机，它没有 google Mapview，它不使用 mapactivity，所以我无法将我的应用程序安装到 Fortress 手机上。所以我的问题：

1.  如果我可以将常用的map.jar添加到我的应用程序中，那么我可以使用该jar来完成我的应用程序地图效果，而不关心堡垒手机中的mapview。我不知道 目前是否存在看似常见的**map.jar**

2.  如果有其他方法可以满足我的需要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:18:47.843

如果我正确理解了这个问题，您想在运行时确定设备上是否存在 GOogle Maps，如果不存在，则采用替代路径。

1.  您必须使用 Google Maps API 构建您的应用，但在清单中将所需标志设置为“false”

`<uses-library android:name="com.google.android.maps" android:required="false" />`

1.  使用这样的代码来确定设备上是否存在库

> 尝试 {
> 
> ```
>  mContext.getClassLoader().loadClass("com.google.android.maps.MapView");
> 
>    // You have Google Maps
> 
> }
> 
> catch (ClassNotFoundException e)
> 
> {   
> 
>  // No Google Maps
> 
> } 
> ```

# javascript - 页面加载方式不同，window.location vs href：

> ID：11522015
> 
> 赞同：1
> 
> 时间：2012-07-17T11:59:06.197
> 
> 标签：javascript, jquery, html, jquery-mobile

嘿，JS/CSS/HTML 还是新手，基本上是 web 开发。我有一个页面，我正在动态加载大部分内容。如果我通过`window.location="mapmode.jsp"`Then 进入它，它不会正确加载，但如果我做一个`<a href>`标签，它会很好地加载。

此外，如果我在精细页面上执行 pagerefresh，它会再次严重加载。可能是 jquerymobile 的东西，但我只是不确定..

我初始化动态内容的方式也可能是相关的，所以这里是：

```
$(document).on("pageinit", "#mapmode", function(event) {
    initPageHeader();
}); 
```

任何帮助，将不胜感激。

编辑：mapmode.jsp：

```
<%-- 
    Document   : mapMode
    Created on : Jul 12, 2012, 10:36:22 AM
    Author     : ame
--%>

<!DOCTYPE html> 
<html>
    <head> 
        <title>Map</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="js/jquery.mobile-1.1.0.css" />
    </head> 
    <body> 
        <!-- Start of first page -->
        <div data-role="page" id="mapmode" name="mapmode">

            <div data-role="header" id="header" name="header">

                                <p>TEEEST</p>
            </div><!-- /header -->

            <div data-role="content" id="mapmodePageContent" name="mapmodePageContent"> 
                <p>I'm the first page in mapMode!.</p>      

            </div><!-- /content -->
        </div><!-- /page -->

        <script type="text/javascript" src="js/jquery-1.7.2.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.1.0.js"></script>
        <script type="text/javascript" src="js/cordova-1.9.0.js"></script>
        <script type="text/javascript" src="js/LocalAction.js"></script>
        <script type="text/javascript" src="js/firstPage.js"></script>
        <script type="text/javascript" src="js/MenuLoader.js"></script>
        <script type="text/javascript" src="js/PageHeader.js"></script>
        <script type="text/javascript" src="js/Mapmode.js"></script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:04:22.403

jQuery Mobile 回避了您的浏览器链接和历史记录。它会自动将其连接到链接 ( `<a href>`)。但是对于 JavaScript 你需要使用他们的[`changePage`方法](http://jquerymobile.com/test/docs/api/methods.html)。

例如：

```
$.mobile.changePage('pagename.jsp'); 
```

使用`changePage`.

# svn - SVN - 处理正在提交的文件

> ID：11522016
> 
> 赞同：0
> 
> 时间：2012-07-17T11:59:17.470
> 
> 标签：svn

可以在 svn 提交期间处理正在签入的文件吗？有时我会在 IDE 中看到“Svn 锁定目录”，但并非总是如此。据我了解，svn 创建了要提交的文件的副本，因此如果我继续处理要提交的文件，那不会有问题吗？是的，等到办理登机手续完成并没有错；只是想知道。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:04:04.307

这取决于您使用的 SVN，但据我所知，它会一一提交，所以如果您继续处理一个，在提交之前，这些更改也会被提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:37:27.937

只是查看了 SVN 1.7 代码。在提交之前锁定 wc.db（在 WC_LOCK 表中创建一条记录）。然后是在您的本地文件和原始文件（来自 .svn/pristine，即更改前的文件内容）之间发送增量，注意关键字和 eols 回译。毕竟它解锁了 wc.db（我跳过了提交过程中不感兴趣的部分）。

所以

*   “Svn 锁定目录”可以通过 WC_LOCK 记录来解释（您的 IDE 在对工作副本进行每次写入操作之前都会对其进行检查）。而且您无法修改本地文件。
*   提交时您不能修改文件，因为 SVN 使用它们来创建提交而不是保存在某处。

# bigdata - 在基于 Web 的应用程序中处理大量数据

> ID：11522024
> 
> 赞同：4
> 
> 时间：2012-07-17T12:00:01.923
> 
> 标签：bigdata, data-management

为基于 Web 的应用程序存储大量数据的最佳方式是什么？

每条记录只有 3 个字段，但每天将有大约 1.44 亿条记录 - 存储一个月 - 总共 4,464,000,000 条记录。让我们四舍五入到 50 亿。

数据必须可在关键字上搜索并尽快将结果返回给最终用户。

*   哪种编程语言？
*   JSON / XML / 一些我从未听说过的数据库系统？
*   什么样的基础设施？想象一下，这个系统只能同时满足最多 1,000 个用户的需求。

我假设无论您搜索 10 条记录还是 100 亿条记录，代码都是相同的，您只需要提高效率即可。我还假设 mySQL/PHP 没有机会，我们将为托管解决方案支付一大笔钱。

只需要一些关于从哪里开始的指导，真的。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:52:00.337

大数据生态系统中有许多工具（NoSQL 数据库、分布式计算、机器学习、搜索等）可以回答您的问题。由于您的应用程序的写入量很大，因此我会推荐 Apache Cassandra，因为它具有出色的写入性能（尽管它需要比 NoSQL/文档数据库（如 MongoDB）更多的数据建模）。您还需要基于 Solr 或 ElasticSearch 的搜索解决方案，以及用于索引和查询的 Map/Reduce。

编程语言无关紧要，除非您的业务最终用户将针对您的大数据编写查询，在这种情况下，您可以使用非常类似于 SQL 的东西，例如 Hive 或 Pig。为了帮助您入门，以下（最近的）链接可能会让您了解如何根据您的需求选择分析堆栈 - 请注意，每个数据库或分布式计算范例都专门针对某些特定用例：

[我们如何选择我们的分析堆栈](http://blog.markedup.com/2013/02/cassandra-hive-and-hadoop-how-we-picked-our-analytics-stack/ "我们如何选择我们的分析堆栈")

还可以查看各种用例的[高可扩展性](http://highscalability.com/ "高扩展性")，了解公司如何解决可扩展性问题。

# java - public static void main() 访问非静态变量

> ID：11522026
> 
> 赞同：14
> 
> 时间：2012-07-17T12:00:11.523
> 
> 标签：java, variables, static-methods, main, void

它说**非静态变量**不能在静态方法中使用。但是 public static void main 可以。那是怎么回事？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-17T12:01:54.133

不，它没有。

```
public class A {
  int a = 2;
  public static void main(String[] args) {
    System.out.println(a); // won't compile!!
  }
} 
```

但

```
public class A {
  static int a = 2;
  public static void main(String[] args) {
    System.out.println(a); // this works!
  }
} 
```

或者如果你实例化`A`

```
public class A {
  int a = 2;
  public static void main(String[] args) {
    A myA = new A();
    System.out.println(myA.a); // this works too!
  }
} 
```

还

```
public class A {
  public static void main(String[] args) {
    int a = 2;
    System.out.println(a); // this works too!
  }
} 
```

会起作用，因为`a`这里是局部变量，而不是实例变量。在方法执行期间，方法局部变量始终是可访问的，无论该方法是否`static`存在。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-17T12:03:17.770

是的， main 方法可以访问非静态变量，但只能**通过实际实例**间接访问。

例子：

```
public class Main {
    public static void main(String[] args) {
        Example ex = new Example();
        ex.variable = 5;
    }
}

class Example {
    public int variable;
} 
```

当人们说*“非静态变量不能在静态方法中使用”*时，人们的意思是不能直接访问**同一类的非静态成员（例如**[Keppils 的答案](https://stackoverflow.com/a/11522055/276052)所示）。

**相关问题：**

*   [Java中通过main方法访问非静态成员](https://stackoverflow.com/questions/7893755/accessing-non-static-members-through-the-main-method-in-java)

* * *

**更新：**

在谈论非静态变量时，隐含的意思是*成员变量*。（因为无论如何局部变量都不可能有静态修饰符。）

在代码中

```
public class A {
    public static void main(String[] args) {
        int a = 2;
        System.out.println(a); // this works!
    }
} 
```

您正在声明一个*局部*变量（即使它没有静态修饰符，它通常也不称为非静态变量）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T12:02:25.833

main 方法也不能访问非静态成员。

```
final public class Demo
{
   private String instanceVariable;
   private static String staticVariable;

   public String instanceMethod()
   {
      return "instance";
   }

   public static String staticMethod()
   {
      return "static";
   }

   public static void main(String[] args)
   {
      System.out.println(staticVariable); // ok
      System.out.println(Demo.staticMethod()); // ok

      System.out.println(new Demo().instanceMethod()); // ok
      System.out.println(new Demo().instanceVariable); // ok

      System.out.println(Demo.instanceMethod()); // wrong
      System.out.println(instanceVariable);         // wrong 
   }
} 
```

这是因为默认情况下，当您调用方法或变量时，它实际上是在访问`this.method()`或 this.variable。但是在 main() 方法或任何其他静态方法() 中，还没有创建“this”对象。

从这个意义上说，静态方法不是包含它的类的对象实例的一部分。这就是实用程序类背后的想法。

要在静态上下文中调用任何非静态方法或变量，您需要首先使用构造函数或工厂来构造对象，就像在类之外的任何地方一样。

* * *

更多深度：

基本上，这是 Java IMO 设计中的一个缺陷，它允许引用静态成员（方法和字段），就*好像*它们是实例成员一样。这在这样的代码中可能会非常令人困惑：

```
Thread newThread = new Thread(runnable);
newThread.start();
newThread.sleep(1000); 
```

*看起来*它正在让新线程进入睡眠状态，但它*实际上*编译成这样的代码：

```
Thread newThread = new Thread(runnable);
newThread.start();
Thread.sleep(1000); 
```

因为`sleep`是一个静态方法，它只会让*当前*线程休眠。

实际上，甚至没有检查该变量的非空性（不再检查；我相信它曾经是）：

```
Thread t = null;
t.sleep(1000); 
```

一些 IDE 可以配置为对这样的代码发出警告或错误 - 你不应该这样做，因为它会损害可读性。（这是 C# 纠正的缺陷之一......）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-04-01T22:04:59.737

**在这里您可以看到清除静态和非静态方法中静态和非静态数据成员访问的表格。**[![静态非静态表](../Images/cec28177b1cac4ad4345a9b3382c011c.png)](https://i.stack.imgur.com/I069d.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T12:04:40.827

您可以在静态方法中创建非静态引用，例如：

```
static void method() {
   A a = new A();
} 
```

`public static void main(String[] args)`我们在方法的情况下做同样的事情

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-01T02:27:10.870

```
public class XYZ
{
   int i=0;
   public static void increament()
       {
       i++;   
       }
}
public class M
{
    public static void main(String[] args)
    {
    XYZ o1=new XYZ();
    XYZ o2=new XYZ();
    o1.increament(); 
    XYZ.increament(); //system wont be able to know i belongs to which object 
                  //as its increament method(static method)can be called using   class name system 
                  //will be confused changes belongs to which object.
    }
} 
```

# tags - 使用 Android Facebook sdk 在wallpost 中标记朋友

> ID：11522032
> 
> 赞同：0
> 
> 时间：2012-07-17T12:00:31.623
> 
> 标签：tags, facebook-android-sdk

我正在尝试使用 android facebook sdk 在wallpost 中标记一个朋友。但是，应该是标签的东西是空白的，什么都没有。这是我使用的代码：

```
 Bundle params = new Bundle();
            access_token = fb.getAccessToken();

            try {
                params.putString("format", "json");
                params.putString("access_token", access_token);
                String url = "https://graphs.facebook.com/me/friends";
                String response = Util.openUrl(url, "GET", params);
                JSONObject json = Util.parseJson(response);
                JSONArray array = json.optJSONArray("data");

                for(int i = 0; i < array.length(); i++) {
                    String tempName = array.getJSONObject(i).getString("name");
                    String tempID = array.getJSONObject(i).getString("id");

                    //Probably should have some if-tests here

                    if(tempName.contains(*nameOfFriend*)) {
                        Bundle bundle = new Bundle();
                        bundle.putString("message", "App tagging test");
                        //this is where the tagging is supposed to happen
                        bundle.putString("tags", *UserID*);
                        try {
                            fb.request("me/feed", bundle, "POST");
                            Toast.makeText(getApplicationContext(), "Tag-test", Toast.LENGTH_SHORT).show();
                        } catch (MalformedURLException e) {
                            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
                            e.printStackTrace();
                        } catch (IOException e) {
                            Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_SHORT).show();
                            e.printStackTrace();
                        }
                    } else {
                        Toast.makeText(getApplicationContext(), "Couldn't find friend", Toast.LENGTH_SHORT).show();
                    }
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        } 
```

我只授予了“publish_stream”的权限，难道我需要其他权限吗？提前感谢您的帮助，伙计们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-13T04:03:57.363

以下是标记朋友的工作代码此外，您必须向 fb 提交您在 devlepoer facebook 帐户中创建的项目的 Taggable Friends api 功能的评论。在您获得提交批准后，以下代码将标记您的朋友。

```
 Bundle params = new Bundle();
    params.putString(Facebook.TOKEN, facebook.getAccessToken());
    params.putString("method", "photos.upload");
    params.putString("caption", ShareTripActivity.tripNotes); // text to post

    if(ShareTripActivity.arr_facebookID.size()>0)
    {
        String tagFriendListId="";
        for(int i=0;i<ShareTripActivity.arr_facebookID.size();i++)
        {

            tagFriendListId = tagFriendListId+"{'tag_uid':'"+ShareTripActivity.arr_facebookID.get(i)+"'} ,";

        }
        tagFriendListId=tagFriendListId.substring(0, tagFriendListId.length()-1);
         params.putString("tags","["+tagFriendListId+"]");

    }
   AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    mAsyncRunner.request(null, params, "POST", new SampleUploadListener(), null); 
```

//示例上传监听

公共类 SampleUploadListener 扩展 BaseKeyListener 实现 RequestListener {

```
 public void onComplete(final String response, final Object state)
    {
        try
        {
            // process the response here: (executed in background thread)
            Log.d("Facebook-Example", "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);
            final String src = json.getString("src");

            // then post the processed result back to the UI thread
            // if we do not do this, an runtime exception will be generated
            // e.g. "CalledFromWrongThreadException: Only the original
            // thread that created a view hierarchy can touch its views."

        }
        catch (JSONException e)
        {
            Log.w("Facebook-Example", "JSON Error in response");
        }
        catch (FacebookError e)
        {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
    }

    public void onFacebookError(FacebookError e, Object state)
    {
        // TODO Auto-generated method stub

    }

    public Bitmap getInputType(Bitmap img)
    {
        // TODO Auto-generated method stub
        return img;
    }

    public int getInputType()
    {
        // TODO Auto-generated method stub
        return 0;
    }

    public void onIOException(IOException e, Object state)
    {
        // TODO Auto-generated method stub

    }

    public void onFileNotFoundException(FileNotFoundException e, Object state)
    {
        // TODO Auto-generated method stub

    }

    public void onMalformedURLException(MalformedURLException e, Object state)
    {
        // TODO Auto-generated method stub

    }
} 
```

在这个 arr_facebookID 中是包含您要标记的朋友的 facebook_user_id 的数组列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:52:08.183

`place`我在您的代码中看不到任何值，但在通过 API 发布的帖子中标记人员时*需要这样做。*

[https://developers.facebook.com/docs/reference/api/user/#posts](https://developers.facebook.com/docs/reference/api/user/#posts)：

> 标签 [...] 注意：如果不指定地点，则无法指定此字段。

# r - r graphics - 在格图中为非 0 值创建条形图

> ID：11522038
> 
> 赞同：0
> 
> 时间：2012-07-17T12:00:57.863
> 
> 标签：r, bar-chart, lattice

我有数据框

```
df <- data.frame(
  site=rep(c("s1","s2","s3"),3),
  grp=c("a","a","a","b","b","b","c","c","c"),
  total=c(0,1,2,0,4,6,8,0,2)
)

df

 site grp total
1   s1     a     0
2   s2     a     1
3   s3     a     2
4   s1     b     0
5   s2     b     4
6   s3     b     6
7   s1     c     8
8   s2     c     0
9   s3     c     2

#that I use to create the following lattice plot

library(lattice)

median<-with(df,reorder(grp,total,mean))
df$median<-median
df1<-subset(df,total!=0)

barchart(df$site~total|median,data=df, xlim=c(0,10), col="grey", border="NA", 
         par.settings=list(axis.text=list(cex=0.85), fontsize=list(text=10)), 
         par.strip.text=list(cex=0.9), par.strip.col="white", layout = c(3,2), 
         aspect = (0.3),scales=list(y=list(relation="free"))
) 
```

我想均匀地间隔条形，并通过减少 df$grp (iea,b,c) 的每个级别的 df$total 来排列它们。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:10:10.203

```
df$median<-median
df1<-subset(df,total!=0) 
```

然后使用`df1`，但也许我错过了一些东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-27T09:47:02.380

在另一个答案中提供了使用`df1`它，以及一些自定义预面板和面板：

```
barchart(site ~ total | median, data = df1, 
         prepanel = function(x, y, ...) {
           xx <- reorder(droplevels(y), x)
           list(ylim = levels(xx),
                yat = sort(unique(as.numeric(xx))))
         },
         panel = function(x, y, ...) {
           xx <- reorder(droplevels(y), x)
           panel.barchart(x, xx, ...)
         }, scales = list(y = list(relation = "free"))) 
```

![伊姆古尔](../Images/01e45cc6e679c3b8cbcf97f53c44203d.png)

*PS：我还清理了通话中的一些绒毛。*

# maven - 以下错误的原因是什么

> ID：11522039
> 
> 赞同：0
> 
> 时间：2012-07-17T12:01:02.527
> 
> 标签：maven, maven-2

使用 Eclispe m2e 插件时，收到以下错误

无法在项目上执行目标*** *：无法解析项目的依赖关系 ****：在快照 (abc) 中找不到工件 org.apache.httpcomponents:httpclient:jar:4.2.1

abc 是我们的 Maven 私有存储库。

虽然 httpclient.jar 在我的本地存储库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:55:26.200

这：

```
artifact org.apache.httpcomponents:httpclient:jar:4.2.1 in snapshots (abc) 
```

看起来您对 SNAPSHOT/RELEASE 存储库的配置不正确。

您是否通过以下方式检查了是否在命令行上构建：

```
mvn clean package 
```

# java - XMLHttpRequest java javascript

> ID：11522044
> 
> 赞同：0
> 
> 时间：2012-07-17T12:01:15.777
> 
> 标签：java, javascript, xmlhttprequest

我尝试在 javascript 和 java 之间进行通信。我的脚本 javascript 向 java 发送消息，java 发送响应。

javascript部分：

```
 var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange=function()
      {
      if (xmlhttp.readyState==4)
        {
        alert(xmlhttp.responseText);
        }
      }
    var s = "LIGNE \n 2 \n il fait beau \nEND\n";
    xmlhttp.open("POST","http://localhost:6020",true);
    xmlhttp.send(s); 
```

java部分：

```
 try {
        serverSocket = new ServerSocket(6020);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 6020.");
        System.exit(-1);
    }
    serverSocket.accept()
    BufferedReader br = new BufferedReader(
                new InputStreamReader(socket.getInputStream()));
    BufferedWriter bw =  new BufferedWriter(
                new OutputStreamWriter(socket.getOutputStream()));
    String ligne = "";
    while(!(ligne = plec.readLine()).equals("END")){
        System.out.println(ligne);
    }
    bw.write("Il fait beau\n");
    bw.flush();
    bw.close();
    plec.close();
    socket.close(); 
```

输出java：

```
POST / HTTP/1.1
Host: localhost:6020
User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:13.0) Gecko/20100101 Firefox/13.0.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: fr,fr-fr;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive
Referer: http://localhost:8080/test.html
Content-Length: 30
Content-Type: text/plain; charset=UTF-8
Origin: http://localhost:8080
Pragma: no-cache
Cache-Control: no-cache

LIGNE 
 2 
 il fait beau 
```

因此，我正确接收到由 javascript 发送的消息，但警报始终为空。如何回复此消息？我尝试了很多可能性，但它们不起作用。而且我不想使用servlet，这样做太重了。

谢谢。

编辑：

我这样做了：

```
bw.write("HTTP/1.1 200 OK\r\n"+
        "Content-Type: text/html; charset=utf-8\r\n"+
        "Content-Length: 13\r\n\r\n" +
        "il fait beau\n"); 
```

还有这个：

```
String data = "il fait beau \n";

StringBuilder builder = new StringBuilder();

builder.append("HTTP/1.1 200 OK\r\n");
builder.append("Content-Type: text/html; charset=utf-8\r\n");
builder.append("Content-Length:" + data.length() + "\r\n\r\n");
builder.append(data);
bw.write(builder.toString()); 
```

但是警报仍然是空的。也许这是javascript中的一个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:03:31.780

javascript 需要查看完整的 HTTP 响应。仅仅向它发送回字符，就会使其丢弃回复，因为它是无效的 HTTP 响应。

在你的java代码中，发回这样的东西

```
HTTP/1.1 200 OK
Content-Type: text/html; charset=utf-8
Content-Length: <length of data>

---data here--- 
```

[参考](http://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html)

**就像是：**

```
StringBuilder builder = new StringBuilder();
builder.append("HTTP/1.1 200 OK\r\n");
builder.append("Content-Type: text/plain; charset=utf-8\r\n");
builder.append("Content-Length:" + data.length() + "\r\n\r\n);
builder.append(data);
bw.write(builder.toString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:14:39.487

尝试：

```
bw.write("HTTP/1.1 200 OK\r\n"+
            "Content-Type: text/html; charset=utf-8\r\n"+
            "Content-Length: 13\r\n\r\n" +
            "il fait beau\n"); 
```

HTTP 标头由`\r\n`(CRLF) 分隔。标题和正文由`\r\n\r\n`.

请注意，您将长度设置为 13，因为您还必须计算`\n`字符串末尾的 。

编辑：**由于 cross-domain-policy ，它不起作用**。`http://localhost:6020`与执行 JavaScript 的网站的端口不同，因此可能无法传递 xmlhttprequest。

# javascript - 是否可以模拟浏览器点击事件？

> ID：11522052
> 
> 赞同：1
> 
> 时间：2012-07-17T12:01:45.010
> 
> 标签：javascript, internet-explorer, firefox, browser, mouseevent

如何模拟鼠标点击浏览器按钮（例如 Firefox）的确切行为？
当用户使用鼠标单击单击按钮时，将生成一个事件。我可以手动使用或调用该事件吗？

我可以使用 Javascript 来模拟单击按钮，但它不会以与用户真正单击按钮时相同的方式调用相同的事件。

我要求解决方案的原因：用于记录文档级别发生的任何事件的记录引擎在后台工作，我想创建具有自我播放功能的网络应用程序，这意味着当我在浏览器中浏览网络应用程序时，它会自动进行业务流程并且然后引擎将记录事件。

如果我的问题不清楚，请询问，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:07:22.627

这对于像 jQuery 这样的东西是最简单的。

```
//listen for clicks - real or simulated
$('#some_element').on('click', function() { alert('click!'); });

//simulate clicks (two ways)
$('#some_element').click();
$('#some_element').trigger('click'); 
```

从事件回调内部可以知道事件是真实的还是模拟的。几个月前我写了[一篇关于这个的博客文章。](http://www.mitya.co.uk/blog/2012/Apr/Distinguishing-real-events-from-simulated-events-209)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T16:00:34.597

你应该看看[Selenium](http://seleniumhq.org/)。它使用自动化和其他原生 API 以完全按照您希望的方式模拟用户输入。

# windows - Control_RunDLL - 打开顺序窗口？

> ID：11522058
> 
> 赞同：0
> 
> 时间：2012-07-17T12:02:09.627
> 
> 标签：windows, batch-file, tabs, window, command

我不知道这是否可能，但我想我还是会问。

我知道你可以追加`,,tabnumber`到 a 的末尾

```
rundll32.exe shell32.dll,Control_RunDLL 
```

命令在指定选项卡上打开一个窗口，但是有没有办法通过以编程方式选择该选项卡上的一个按钮来打开另一个窗口？

例如，我正在使用

```
rundll32.exe shell32.dll,Control_RunDLL inetcpl.cpl,,4 
```

打开 Windows 的 Internet 属性窗口，但是有没有办法以编程方式从那里打开 LAN 设置窗口，因为 LAN 设置似乎没有自己的进程，我可以直接调用。

（如果有解决方案，我打算将它与 LAN 设置以外的其他东西一起使用，例如“区域和语言”窗口的“管理”选项卡中的“复制设置...”）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T11:30:11.130

`There is no general mechanism for this. You are better off doing whatever you need programmatically instead of trying to drive the UI (which changes from version to version). – Raymond Chen`

# android - Android Activity 生命周期 - 通知服务

> ID：11522060
> 
> 赞同：2
> 
> 时间：2012-07-17T12:02:11.767
> 
> 标签：android, android-service, android-lifecycle

我了解 Android 生命周期的概念以及所涉及的不同事件。我创建了一个通知服务，让用户知道何时轮到他/她。我只希望在用户不再查看应用程序中的一项活动时执行此操作。他/她会在使用该应用程序时知道是否轮到他/她。

问题：

*   如果我在 Main.java 类上设置生命周期事件，当用户导航到不同的类时会发生什么？onPause 事件会触发吗？由于用户可能在单个会话期间离开 10 个或更多活动，系统如何知道要执行哪些 onPause 事件？

*   我目前在 Main.java 类的 onStop 和 onRestart 事件期间启动服务并停止服务。这没有按预期工作。即使我在系统中也会出现通知，这导致系统由于同时调用外部 api 而锁定。（见下文）。

    ```
    public void onRestart() {
    super.onRestart();

    Intent i = new Intent(Main.this, NotifyService.class);
    Main.this.stopService(i); 
    ```

    }

    ```
    public void onStop() {
        super.onStop();

    Intent i = new Intent(Main.this, NotifyService.class);
    i.putExtra("UserId", userId);
    Main.this.startService(i); 
    ```

    }

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:37:13.453

1.  假设您在 Activity-A 中，并且您移动到 ​​Activity-B，然后将调用 Activty-A 的生命周期回调 - 在这种情况下 Activity-A.onPause() 立即，而 Activity-A.onDestroy()*可能*在如果 Activity-A 在那段时间内被破坏，则很短。

2.  用于启动/停止服务的正确方法是 onResume()（而不是您使用的 onRestart()）和 onPause()（而不是您使用的 onStop()）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:21:04.063

您可以设置一个计数器，在 Activity 的 onResume() 中增加它并在 onPause() 中减少它。如果您的计数器为 0，则表示用户不在您的活动中（正在使用其他应用程序）。如果不是 1，那么他/她正在使用您的应用程序。请注意，您的计数器应保持在活动之外，因为它可能会被移除。我继承了 Application 类并将我的全局范围的计数器保留在那里。

# php - 应用内购买（沙盒） - 由于 curl / SSL 收据验证失败

> ID：11522069
> 
> 赞同：1
> 
> 时间：2012-07-17T12:03:06.753
> 
> 标签：php, ios, curl, in-app-purchase, sandbox

我注意到我的服务器端收据验证代码仅在沙箱中失败（商店中我的应用程序的实时版本运行良好，但在我正在测试下一个版本的 Xcode 上，收据验证总是失败）。

我将问题跟踪到`php/curl`我联系 iTunes 服务器 ( `https://sandbox.itunes.apple.com/verifyReceipt`) 的代码中，我从以下位置收到此错误`curl`：

```
SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:func(144):reason(134) 
```

我想知道这是否与俄罗斯人和他的黑客有什么关系......但它只发生在我的沙箱代码中。现场版似乎正在工作......

有什么线索吗？

也许我应该对沙盒和实时使用“实时”iTunes 服务器，如此处详述？ [在应用程序购买中，生产收据验证现在验证沙盒购买？](https://stackoverflow.com/questions/8186778/in-app-purchase-production-receipt-validation-now-validating-sandbox-purchases)

（不知道这个变化。还可以吗？）

**编辑**我修改了我的 sandbox-php 代码以使用 LIVE iTunes 服务器 (URL: `https://buy.itunes.apple.com/verifyReceipt`)，并且测试用户购买/回购现在正在工作。我还是很疑惑……沙盒服务器已经被弃用了吗？*它是否使用与实际环境不同*的 SSL 证书来标识自己，哪个证书已被吊销？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T17:32:24.937

看起来 Apple 最近为 Sandbox 重新提供了 SSL 证书，*并且它使用主题备用名称域 sandbox.itunes.apple.com 正确签名。* ~~但没有使用正确的 URL 对其进行签名（或者只是使用了 Live 中的 URL 并且没有使用 Sandbox）。他们改为使用buy.itunes.apple.com 签署它，这破坏了任何cURL 请求（我们的服务器也有同样的问题）。~~作为目前的解决方法，我们使用了以下选项：

`if ($isSandbox) curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);`

这会关闭 SSL 验证，因此请谨慎使用，因为它可能导致中间人攻击。我认为这对 Sandbox 来说没什么大不了的，因为它是在测试环境中测试用户。

**编辑：**

实际上，Apple 指出在 7.18.0 之前安装默认 cURL 的 CA 证书包已经严重过时。[http://curl.haxx.se/docs/sslcerts.html](http://curl.haxx.se/docs/sslcerts.html)

我们最近可能有一个服务器更新破坏了我们的 cURL 安装，但我不是我们的系统管理员，所以我真的不确定。但是请看一下链接，因为它包括我上面提到的解决方法（#1），以及其他一些选项，包括更新 CA 证书包。

**编辑：**

我想在这里添加另一个旁注。似乎 cURL 版本 7.19.7 中有一个处理主题备用名称的错误修复。

*   libcurl-OpenSSL 无法使用主题备用名称验证某些证书

~~所以这实际上可能部分是Apple，部分是cURL。Apple 使用 SAN 更新证书可能会破坏任何早于 7.19.7 的版本上的任何内容。我们仍在测试我们的服务器上是否是这种情况。~~

**编辑：**

我们发现问题不是我们使用的 cURL 版本，而是我们需要 cURL 指向的 CA cert pem 文件。通过上面的 cURL 链接它是 #2，但在 PHP 中它看起来像这样：

`if ($isSandbox) curl_setopt($ch, CURLOPT_CAINFO, '/etc/ssl/certs/cacert.pem');`

[您可以从http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)获取最新的 CA 证书 pem 文件

# android - Android - 使用 asynctask 创建 json 对象

> ID：11522074
> 
> 赞同：0
> 
> 时间：2012-07-17T12:03:18.863
> 
> 标签：android, json

我有以下代码：（基本上它创建了各种 JSONObjects（受益人）并将它们全部放在另一个 JSONObject（proposta）中。我没有在这里展示它，但我之前创建了游标（ppt，c）

```
 if (ppt.getString(45).equals("0")) {
                int i = 0;

                c.moveToFirst();
                JSONObject ben = new JSONObject();
                try {
                    while (c.isAfterLast() == false) 
                    {
                        i++;
                        ben.put("b_nome" + i, c.getString(1));
                        ben.put("b_telefone" + i, c.getString(2));
                        ben.put("b_nif" + i, c.getString(3));
                        ben.put("b_bi" + i, c.getString(4));
                        ben.put("b_codigopostal" + i, c.getString(5));
                        ben.put("b_localidade" + i, c.getString(6));
                        ben.put("b_morada" + i, c.getString(7));                        
                    }
                } catch (JSONException e) {
                    e.printStackTrace();
                }
                proposta.put("beneficiario" + i, ben);
            } 
```

它给出了一个内存不足的错误，我想那是因为我在主线程上运行它。你能给我一个帮助/一些代码来使用线程或异步任务来做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:15:00.680

`c.moveToNext();`在你的`While`循环中使用。你`Cursor`正在运行无限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:20:18.320

使用类似这样的异步任务：

```
// You must provide types for the three generic parameters before the code will compile.          
// For more details, see http://developer.android.com/reference/android/os/AsyncTask.html 
 private class MoveOutOfUIthread extends AsyncTask<
                Params, // one or more values of this type are passed to doInBackground()
                Progress, // the type of the progress units published during background crunching.
                Result // the type of the result returned by doInBackground()
                > 
 {

         protected Integer doInBackground(Params... p1, p2, p3) {
             // your background task here
             Result result = new Result();
             return result;
         }

         protected void onPostExecute(Result r) {
             // this gets the object returned by doInBackground, and executes on the UI thread
         }
 } 
```

**像这样执行异步任务：**

```
new MoveOutOfUIthread().execute(p1, p2, p3); 
```

传递参数不是代祷，你可以简单地这样做：

```
new MoveOutOfUIthread().execute(); 
```

**注意：**您不能在`doInBackground`. 您必须将代码放入`onPreExecute`或`onPostExecute`更改 UI。

**更新 ：**

这是在后台线程中运行您的代码。根据您的 OutOfMemory 错误，我认为您应该`c.moveToNext();`在您的 while 循环中使用`M Mohsin Naeem`答案。

# objective-c - 如何从 plist 文件中的不同键中检索不同的 mp3 文件？

> ID：11522078
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:03:37.300
> 
> 标签：objective-c

我是 iPhone 的初学者。我已经采用了 plist 文件，我在下面的代码中定义了..

```
<key>Animalsound</key>
    <array>
        <string>africanwilddog.mp3</string>
        <string>anteater.mp3</string>
        <string>baboon.mp3</string>
        <string>bat.mp3</string>
        <string>bear.mp3</string>
        <string>bison.mp3</string>
        <string>blackpanther.mp3</string>
    </array>
 <key>Birdsound</key>
    <array>
        <string>albatross.mp3</string>
        <string>antilleangrackle.mp3</string>
        <string>arcticloon.mp3</string>
        <string>beeeater.mp3</string>
        <string>beltedkingfisher.mp3</string>
        <string>bittern.mp3</string>
</array> 
```

所以，我在下面的代码中使用**了如何从 plist 文件中检索不同的密钥。**

```
-(IBAction)onclicksound:(id)sender
{
        path=[[NSBundle mainBundle]pathForResource:@"Animalfile" ofType:@"plist"];
        dict=[NSDictionary dictionaryWithContentsOfFile:path];
        animalaudio=[pathdata valueForKey:@"Animalsound"];
        NSLog(@"animalaudio:%@",animalaudio);
        selectanimalaudio=[animalaudio objectAtIndex:currentsound];
        NSString *soundpath=[[NSBundle mainBundle]pathForResource:selectanimalaudio ofType:@"mp3"];
        NSLog(@"selectaudio:%@",selectanimalaudio);
        NSLog(@"selectpath:%@",soundpath);
          AVAudioPlayer *audioplayer=[[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:soundpath]  error:NULL];
        self.audiosound=audioplayer;
        [audioplayer release];
         [audiosound play];
        NSLog(@"audioplayer:%@",audioplayer);
} 
```

但是当我运行这段代码时。它给出了运行时错误

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“ *** -[NSURL initFileURLWithPath:]: nil string parameter”和 selectpath:(null)

所以，给我任何对我的应用程序有帮助的建议和来源......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:37:52.110

在这一行

```
NSString *soundpath=[[NSBundle mainBundle]pathForResource:selectanimalaudio ofType:@"mp3"]; 
```

您搜索的是名称为 selectanimalaudio (fe bison.mp3) 和扩展名为“mp3”的文件*，*所以您搜索的是“ **bison.mp3.mp3** ”，但我敢打赌这个文件不存在，它必须返回**nil** , 所以`[NSURL fileURLWithPath:soundpath]`会失败

# java - 寻找一个好的 Java ODE 求解器

> ID：11522079
> 
> 赞同：6
> 
> 时间：2012-07-17T12:03:48.893
> 
> 标签：java, matlab, solver, ode

我正在开发一个项目，使用 ODE 求解器（ode45）为 MATLAB 中的算法创建 GUI。所以我必须将 MATLAB 代码翻译成 Java。问题在于 ode45 求解器。Java 似乎没有准备好使用的求解器，而且 ODE 并不是我的专长。我只是看起来不太好，还是真的没有实现 Java 的 ODE 求解器？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:33:28.033

如果您需要 Java 数学库，市场上有几个可用的，无论是开源的还是商业的。这些是少数。

*   Roguewave 的 JMSL，完全用 Java 编写，我们在工作中成功使用
*   NAG，用 C 语言编写，但文档广泛，因此可以从 Java 中使用
*   Apache commons math，它是开源的，还包含一个 ODE [http://commons.apache.org/math/userguide/ode.html](http://commons.apache.org/math/userguide/ode.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:30:03.253

不完全是您问的问题，但您是否考虑过从 matlab 创建 GUI？除非您正在寻找花哨的 GUI 东西，否则它与基本的 java swing/awt 东西没有什么不同。

[http://www.mathworks.com/help/techdoc/creating_guis/bqz6qcd.html](http://www.mathworks.com/help/techdoc/creating_guis/bqz6qcd.html)

# html - 具有两列和一个页脚的液体布局

> ID：11522083
> 
> 赞同：0
> 
> 时间：2012-07-17T12:04:07.840
> 
> 标签：html, css

我正在尝试构建一个带有两列和底部固定页脚的液体布局。我已经在这里得到了一些帮助，上面有一个例子。

[http://jsfiddle.net/kpDDM/18/](http://jsfiddle.net/kpDDM/18/)

我的例子的问题是它有一个固定的高度。当我在内容 div 上移动到 100% 高度时，内容会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:44:10.230

你需要这样的东西吗：http: [//jsfiddle.net/kpDDM/44/](http://jsfiddle.net/kpDDM/44/)

HTML

```
<div class="all">
    <div class="content">
      <div class="left">&nbsp;</div>  
      <div class="right">&nbsp;</div>
    </div>
    <div class="footer"></div>
</div> 
```

CSS

```
.all {
    position: relative;
    height: 100%;
    width: 100%;
}

body,html{
    height:100%;
}

.content {
    display:inline-block;
    height: 90%;
    width: 100%;
}

.left {
    display: inline-block;
    float: left;
    width: 60%;
    height: 100%;
    background-color: red;
}

.right {
    display:inline-block;
    float: left;
    width: 40%;
    height: 100%;
    background-color: blue;
}

.footer {
    display: inline-block;
    width: 100%;
    height: 10%;
    background-color: green;
} 
```

**解释**

问题是body标签本身并不是100%。你必须将它分配给身体，然后它会起作用。在上面的示例中，我假设内容 + 页脚共享 100% 的高度。90% + 10%

# ios4 - 在 iphone 应用程序中包含简单的声音

> ID：11522087
> 
> 赞同：2
> 
> 时间：2012-07-17T12:04:29.237
> 
> 标签：ios4, core-audio, avaudioplayer, openal

我搜索了很多问题 - 但似乎没有人给出最简单、最统一的方法，因此请不要关闭为重复。

我的要求很简单：我有测验应用程序。

我想包括：

> 1.  持续播放的背景音乐 - 可能不止一种音频。
> 2.  我需要在特定活动中偶尔播放声音——它们的持续时间很短。可能有4-5个。

我使用什么声音格式？[aac 等]

我如何生产它？（可选，从互联网上获取，如果免费的话）

合并它的最佳方法是什么？[音频播放、公开等）

如果这很愚蠢，请原谅我，但我在这里很笼统，似乎找不到它。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:32:41.027

对于声音格式，在 CAF 容器中使用 AAC 或未压缩的 16 位 little endian（避免使用 mp3，因为它很难干净地循环播放）。您可以使用命令行工具“afconvert”进行转换：

压缩：

```
afconvert -f caff -d aac sourcefile.wav destfile.caf 
```

未压缩的 16 位：

```
afconvert -f caff -d LEI16 sourcefile.wav destfile.caf 
```

对于制作，要么自己录制（使用 Audacity 等音频程序），要么让专业人士来做，要么购买免版税的声音/音乐。

要合并它，请使用 AVAudioPlayer 播放音乐，使用 OpenAL 播放声音。OpenAL 很难使用，并且不会自行解码压缩音频，因此您可能需要使用音频库，例如[https://github.com/kstenerud/ObjectAL-for-iPhone](https://github.com/kstenerud/ObjectAL-for-iPhone)

# hadoop - 尝试在 5 节点 hadoop 集群中安装 Hbase 时遇到一些问题，

> ID：11522088
> 
> 赞同：2
> 
> 时间：2012-07-17T12:04:36.723
> 
> 标签：hadoop, hbase

我在尝试在 5 节点 hadoop 集群中安装 Hbase 时遇到了一些问题，Hmaster 和 Hregionservers 没有运行，并且只有 Hquorumpeer 守护程序在所有 5 个节点上运行。我正在使用 hadoop-0.20.2 和 hbase-0.90.4，hadoop 工作正常。这是我的 hbase-site.xml :-

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
  <property>
    <name>hbase.zookeeper.property.clientPort</name>
    <value>2222</value>
    <description>Property from ZooKeeper's config zoo.cfg.
 The port at which the clients will connect.
    </description>
  </property>
  <property>
    <name>hbase.rootdir</name>
    <value>hdfs://master:54310/hbase</value>
  </property>
  <property>
    <name>hbase.cluster.distributed</name>
    <value>true</value>
  </property>
  <property>
    <name>dfs.replication</name>
    <value>3</value>
  </property>
  <property>
    <name>hbase.hregion.max.filesize</name>
    <value>1048576</value>
  </property>
  <property>
    <name>hbase.zookeeper.quorum</name>
    <value>192.168.1.25,192.168.1.26,192.168.1.27,192.168.1.28,192.168.1.29</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.dataDir</name>
    <value>/opt/data/zookeeper</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.initLimit</name>
    <value>100</value>
  </property>
  <property>
    <name>hbase.zookeeper.property.syncLimit</name>
    <value>100</value>
  </property>
  <property>
    <name>zookeeper.session.timeout</name>
    <value>1200000</value>
  </property>
</configuration> 
```

这是我的 /etc/hosts 文件：-

```
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.1.23    adm001
192.168.1.25    master.poc.net  master hbase-master
192.168.1.28    dn2.poc.net     dn2
192.168.1.27    dn1.poc.net     dn1
192.168.1.26    dn3.poc.net     dn3
192.168.1.29    dn4.poc.net     dn4 
```

在我的主日志中运行 Hbase 时出现以下错误

```
 at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
2012-07-17 12:41:06,877 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server dn3.poc.net/192.168.1.26:2222
2012-07-17 12:41:06,878 WARN org.apache.zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:701)
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
2012-07-17 12:41:07,499 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server dn2.poc.net/192.168.1.28:2222
2012-07-17 12:41:07,500 WARN org.apache.zookeeper.ClientCnxn: Session 0x0 for server null, unexpected error, closing socket connection and attempting reconnect
java.net.ConnectException: Connection refused
        at sun.nio.ch.SocketChannelImpl.checkConnect(Native Method)
        at sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:701)
        at org.apache.zookeeper.ClientCnxn$SendThread.run(ClientCnxn.java:1119)
2012-07-17 12:41:08,549 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server dn1.poc.net/192.168.1.27:2222
2012-07-17 12:41:08,550 INFO org.apache.zookeeper.ClientCnxn: Socket connection established to dn1.poc.net/192.168.1.27:2222, initiating session
2012-07-17 12:41:08,554 INFO org.apache.zookeeper.ClientCnxn: Unable to read additional data from server sessionid 0x0, likely server has closed socket, closing socket connection and attempting reconnect
2012-07-17 12:41:08,654 INFO org.apache.zookeeper.ClientCnxn: Opening socket connection to server dn4.poc.net/192.168.1.29:2222
2012-07-17 12:41:08,755 INFO org.apache.zookeeper.ZooKeeper: Session: 0x0 closed
2012-07-17 12:41:08,756 ERROR org.apache.hadoop.hbase.master.HMasterCommandLine: Failed to start master
java.lang.RuntimeException: Failed construction of Master: class org.apache.hadoop.hbase.master.HMaster
        at org.apache.hadoop.hbase.master.HMaster.constructMaster(HMaster.java:1064)
        at org.apache.hadoop.hbase.master.HMasterCommandLine.startMaster(HMasterCommandLine.java:142)
        at org.apache.hadoop.hbase.master.HMasterCommandLine.run(HMasterCommandLine.java:102)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.hadoop.hbase.util.ServerCommandLine.doMain(ServerCommandLine.java:76)
        at org.apache.hadoop.hbase.master.HMaster.main(HMaster.java:1078)
Caused by: org.apache.zookeeper.KeeperException$ConnectionLossException: KeeperErrorCode = ConnectionLoss for /hbase
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:90)
        at org.apache.zookeeper.KeeperException.create(KeeperException.java:42)
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:809)
        at org.apache.zookeeper.ZooKeeper.exists(ZooKeeper.java:837)
        at org.apache.hadoop.hbase.zookeeper.ZKUtil.createAndFailSilent(ZKUtil.java:903)
 at org.apache.hadoop.hbase.zookeeper.ZooKeeperWatcher.<init>(ZooKeeperWatcher.java:133)
        at org.apache.hadoop.hbase.master.HMaster.<init>(HMaster.java:222)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
        at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
        at org.apache.hadoop.hbase.master.HMaster.constructMaster(HMaster.java:1059) 
```

我已经从 hadoop lib 文件夹中复制了 hadoop-core.jar 和其他必要的 jar 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:54:38.503

通过执行以下命令打开端口 2222

```
iptables -A INPUT -p tcp --dport 2222 -j ACCEPT 
```

这应该可以解决您的问题

# asp.net - SignalR 如何处理重复的连接 ID？

> ID：11522090
> 
> 赞同：4
> 
> 时间：2012-07-17T12:04:42.903
> 
> 标签：asp.net, signalr

我已经创建了自己的`IConnectionIdGenerator`实现，为了在我的 webforms 应用程序中简单起见，通过登录的经过身份验证的用户的 EmailAddress.ToLower() 命名客户端连接 ID（如果不可用，则默认返回一个 guid）。从我背后的页面代码调用客户端一切正常。

```
hubContext.Clients[LoggedInUser.EmailAddress.ToLower()].updateProgress(i) 
```

但是，似乎如果我打开另一个具有相同登录用户的浏览器或选项卡，两个窗口上的永远框架连接都会不断给出 301 结果，然后交替出现 200 结果并重复。

我认为分配相同的连接 ID 只会给我一个简单的方法来确保消息正确地发送到系统的正确用户，无论他们连接到哪里。

它们是否总是必须是唯一的，我是否必须构建另一层来管理与登录用户帐户的连接，或者我在这里错过了一个技巧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-23T00:58:08.177

连接 ID 必须是唯一的。如果您不使它们独一无二，那么其中一个将使另一个连接脱机。在内部，我们使用连接 ID 作为连接的唯一标识符，并断开欺骗。

如果您收到重复的 301 响应，很可能是因为您的应用中有一个名为 signalr 的文件夹，并且它与共享连接 ID 没有直接关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T11:19:26.907

我最近尝试做同样的事情并遇到了同样的问题，所以我的结论是连接 id 必须是唯一的，否则一切都开始失败，重复 301 和 200 响应。

我为解决此问题所做的工作是使用默认 GUID 连接 ID，而是在启动连接后将连接添加到由我自己的 ID（在您的情况下为电子邮件地址）标识的组。这样我可以打电话`Clients[emailAddress].doSomething()`，它会广播到这个用户的所有打开的标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T23:36:43.193

是的，这很完美，我得出了一个类似的结论。

我还试图想办法让客户端将消息广播到当前 url 唯一的同一电子邮件地址组（因此一个页面上的进度条也不会更新另一个页面上的进度条）

我要么将组 ID 扩展为类似的东西，`emailAddress + currentURL`所以它只是两个字符串的组合。但是，除非有办法获取组集合并解析电子邮件地址并将消息发送到每个电子邮件地址 + url 组合，否则这将使任何全球站点广播（对所有 url）都难以进行。

如果我只是在某些客户端检查上标记并发送进度条 ID 作为参数，该参数对于要更新的​​页面上的进度条是唯一的，这可能会更好。

# css - 在导航栏上移动文本位置

> ID：11522092
> 
> 赞同：0
> 
> 时间：2012-07-17T12:04:50.797
> 
> 标签：css, wordpress, navigation, position

更新：好的，我更改了#access ul 的边距，尽管现在当我将鼠标悬停在它上面时，它看起来像这样：http: [//imgur.com/NeUzN](http://imgur.com/NeUzN)

也可以改变页面标题之间的间距（抱歉还在学习css！）

我目前正在设计我的 wordpress 主题，并想知道如何将文本向上移动一点以与导航栏居中：http: [//i.imgur.com/BExiy.png](http://i.imgur.com/BExiy.png)

我也在使用自定义字体。这是我的CSS：

```
#access {
background: #252525;
display: block;
float: left;
margin: 0 auto;
height: 40px;
}
#access ul {
list-style: none;
margin: -8px -13px -10px -13px;
padding-left: 0;
color:#000;
text-shadow:1px 1px 1px rgba(14,14,14,0.8);
text-transform:uppercase;
font: 24px Giantypo, Arial, Helvetica, sans-serif;
}
#access li {
float: left;
position: relative;
}
#access a {
display: block;
line-height: 2.5em;
padding: 0 1em;
text-decoration: none;
color:#f3f3f3;
}
#access ul ul {
box-shadow: 0 3px 3px rgba(0,0,0,0.2);
-moz-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
-webkit-box-shadow: 0 3px 3px rgba(0,0,0,0.2);
display: none;
float: left;
position: absolute;
top: 2em;
left: 0;
z-index: 99999;
}
#access ul ul ul {
left: 100%;
top: 0;
}
#access ul ul a {
background: #3e5d8c;
line-height: 1em;
padding: .5em .5em .5em 1em;
width: 10em;
height: auto;
}
#access li:hover > a,
#access ul ul :hover > a {
background: #3e5d8c;
}
#access ul ul a:hover {
background: #3e5d8c;
}
#access ul li:hover > ul {
display: block;
}
} 
```

任何帮助都会很棒！

干杯，

斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:16:56.713

无序列表的上边距必须为负值。例如：

```
margin: -7px 0 0 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:17:22.530

将 设置`line-height`为等于其`height`。On `#access a`，我相信，但如果没有看到 HTML，我无法确定。如果不亲眼看到它，我就无法知道它的高度。

# jquery - 垂直对齐似乎不起作用

> ID：11522094
> 
> 赞同：0
> 
> 时间：2012-07-17T12:04:54.650
> 
> 标签：jquery, css

我正在为包含在 div 中的图像制作动画，该图像从 a 移动`<li>`到其他 div。目标 div 包含一个包含内容的跨度。

我需要的是，当图像 div 附加到目标 div 时，所有内容（跨度文本和附加的 img div）应该垂直居中。

```
var des = $(".destnation").position();   
 var el = $(".toMove");   
 el.css("position", "absolute");   
 el.animate({ top: des.top+"px" ,left :des.left+"px"}, 2000, undefined, function () {  
 el.remove().appendTo(".destnation").css("position", "static");   
 });

.destination {
   height: 4.9em;
   width: 100%;
   overflow: hidden;
   text-align: left;
   vertical-align: middle;
}

.destination span {
   color: #3366CC;
   font: 1.50em georgia, garamond, serif;
   margin-top: 0.625em;
   margin-bottom: 0.625em;
   display: block;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T14:13:49.910

HTML 缩放宽度而不是高度。

当您在 Tables 中使用 vertical-align 时，它会按预期工作。`<td style="vertical-align:middle">`

它并不总是在常规课程中正常工作。

# c# - 扩展空检查的最佳方法是什么？

> ID：11522104
> 
> 赞同：16
> 
> 时间：2012-07-17T12:05:18.987
> 
> 标签：c#, null, extension-methods, isnull

你们都这样做：

```
public void Proc(object parameter)
{
    if (parameter == null)
        throw new ArgumentNullException("parameter");

    // Main code.
} 
```

Jon Skeet 曾经提到他有时会使用扩展来做这个检查，所以你可以这样做：

```
parameter.ThrowIfNull("parameter"); 
```

所以我提出了这个扩展的两个实现，我不知道哪个是最好的。

第一的：

```
internal static void ThrowIfNull<T>(this T o, string paramName) where T : class
{
    if (o == null)
        throw new ArgumentNullException(paramName);
} 
```

第二：

```
internal static void ThrowIfNull(this object o, string paramName)
{
    if (o == null)
        throw new ArgumentNullException(paramName);
} 
```

你怎么看？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-17T12:09:09.483

为此，我倾向于坚持使用无处不在的`Guard`类：

```
static class Guard
{
    public static void AgainstNulls(object parameter, string name = null)
    {
        if (parameter == null) 
            throw new ArgumentNullException(name ?? "guarded argument was null");

        Contract.EndContractBlock(); // If you use Code Contracts.
    }
}

Guard.AgainstNulls(parameter, "parameter"); 
```

并且回避 extends `object`，加上肉眼看来，对`null`对象的方法调用似乎是荒谬的（尽管我知道对扩展方法进行 null 方法调用是完全有效的）。

至于哪个最好，我都不会用。**它们都有无限递归**。我也不会费心保护 message 参数，使其可选地为空。您的第一个解决方案也不支持`Nullable<T>`类型，因为`class`约束会阻止它。

当我们决定启用代码契约时，我们的`Guard`类也有[`Contract.EndContractBlock()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contract.endcontractblock.aspx)它之后的调用，因为它符合所需的“if-then-throw”结构。

这也是[PostSharp 方面](http://badecho.com/2011/11/validating-method-parameters-with-postsharp/)的完美候选者。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T12:16:34.907

我会用`internal static void ThrowIfNull<T>(this T o, string paramName) where T : class`. 我不会使用`internal static void ThrowIfNull(this object o, string paramName)`，因为它可能会进行拳击。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-03T22:07:48.557

我会这样做以避免硬编码参数名称。明天它可能会改变，然后你有更多的工作：

```
public static void ThrowIfNull<T>(this T item) where T : class
{
    var param = typeof(T).GetProperties()[0];
    if (param.GetValue(item, null) == null)
        throw new ArgumentNullException(param.Name);
} 
```

并称之为：

```
public void Proc(object parameter)
{
    new { parameter }.ThrowIfNull(); //you have to call it this way.

    // Main code.
} 
```

性能损失微不足道（在我的平庸计算机上，它在不到 25 毫秒的时间内运行了 100000 次），比通常看到的基于表达式的方法快得多

```
ThrowIfNull(() => resource); 
```

一个这样[的在这里](https://stackoverflow.com/questions/72121/finding-the-variable-name-passed-to-a-function-in-c-sharp)。但是如果你负担不起那么大的打击，肯定不要使用这个。

您还可以将其扩展为对象的属性。

```
new { myClass.MyProperty1 }.ThrowIfNull(); 
```

您可以缓存属性值以进一步提高性能，因为属性名称在运行时不会更改。

另请参阅此问题：[Resolving a parameter name at runtime](https://stackoverflow.com/questions/869610/resolving-a-parameter-name-at-runtime)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-12T16:28:30.093

从 .NET 6 开始，现在我们`ThrowIfNull`在`System.ArgumentNullException`类中拥有了具有以下签名的静态方法：

```
ThrowIfNull(object? argument, string? paramName = null); 
```

因此，而不是写：

```
if (value == null)
{
    throw new System.ArgumentNullException(nameof(value));
} 
```

现在我们可以简单地写：

```
System.ArgumentNullException.ThrowIfNull(value); 
```

文档：[https ://docs.microsoft.com/en-us/dotnet/api/system.argumentnullexception.throwifnull?view=net-6.0](https://docs.microsoft.com/en-us/dotnet/api/system.argumentnullexception.throwifnull?view=net-6.0)

* * *

[这个新方法的实现](https://github.com/stephentoub/runtime/blob/f7d6b314b98b0022de7bed09d98947d7138d1620/src/libraries/System.Private.CoreLib/src/System/ArgumentNullException.cs#L59)利用属性`System.Runtime.CompilerServices.CallerArgumentExpressionAttribute`来进一步简化这一点，不需要开发人员显式地提供被保护的参数的名称。

最终引入这个新 API 的讨论可以在这里找到： [https ://github.com/dotnet/runtime/issues/48573](https://github.com/dotnet/runtime/issues/48573)

在 .NET 6 代码库中引入它的 PR 可以在这里找到： [https ://github.com/dotnet/runtime/pull/55594](https://github.com/dotnet/runtime/pull/55594)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-07T11:10:05.120

使用表达式树怎么样（来自[Visual Studio 杂志](https://visualstudiomagazine.com/articles/2011/04/01/pccsp_expression-trees.aspx)）：

```
using System;
using System.Linq.Expressions;
namespace Validation
{
   public static class Validator
   {
     public static void ThrowIfNull(Expression<Func<object>> expression)
     {
       var body = expression.Body as MemberExpression;
       if( body == null)
       {
         throw new ArgumentException(
           "expected property or field expression.");
       }
       var compiled = expression.Compile();
       var value = compiled();
       if( value == null)
       {
         throw new ArgumentNullException(body.Member.Name);
       }
     }
     public static void ThrowIfNullOrEmpty(Expression<Func<String>> expression)  
     {
        var body = expression.Body as MemberExpression;
        if (body == null)
        {
          throw new ArgumentException(
            "expected property or field expression.");
        }
        var compiled = expression.Compile();
        var value = compiled();
        if (String.IsNullOrEmpty(value))
        {
          throw new ArgumentException(
            "String is null or empty", body.Member.Name);
        }
      }
   } 
```

}

像这样使用：

```
public void Proc(object parameter1, object parameter2, string string1)
{
    Validator.ThrowIfNull(() => parameter1);
    Validator.ThrowIfNull(() => parameter2);
    Validator.ThrowIfNullOrEmpty(() => string1);
    // Main code.
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-11-23T19:29:36.543

基于 C# 10，我使用 ThrowIfNull 扩展方法：

```
public static class CheckNullArgument
{
    public static T ThrowIfNull<T>(this T argument)
    {
        ArgumentNullException.ThrowIfNull(argument);

        return argument;
    }
} 
```

用法：

```
public class UsersController
{
    private readonly IUserService _userService;

    public UsersController(IUserService userService)
    {
        _userService = userService.ThrowIfNull();
    }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-17T12:10:10.370

第二个似乎更优雅的处理方式。在这种情况下，您可以对每个托管对象进行限制。

```
internal static void ThrowIfNull(this object o, string paramName)
{
       if (o == null)
        throw new ArgumentNullException(paramName);
} 
```

# php - 将单选按钮和复选框的值放入数据库 PHP

> ID：11522106
> 
> 赞同：0
> 
> 时间：2012-07-17T12:05:26.223
> 
> 标签：php, mysql, database, checkbox, radio-button

我想尝试将复选框和单选按钮的值插入我的数据库...当我选择复选框选项并选择单选按钮选项时，复选框和单选按钮的值将记录在数据库的同一行中。 ..我有 3 个菜单选择..每个菜单都有 2 个大小选项，即单选按钮..这意味着每个大小选项应该有不同的名称，对吗？？...我的意思是 field1[]....

这是我的代码

**恢复.php**

```
Menu : 
<input type="checkbox" value="Siomay" name="tile[]">Siomay <br>
<input type="radio" name="field1[]" value="4" />Small
<input type="radio" name="field1[]" value="5" />Large<br>
<input type="checkbox" value="Batagor" name="tile[]">Batagor <br>
<input type="radio" name="field2[]" value="4" />Small
<input type="radio" name="field2[]" value="5" />Large<br>
<input type="checkbox" value="Pempek" name="tile[]">Pempek<br>
<input type="radio" name="field3[]" value="4" />Small
<input type="radio" name="field3[]" value="5" />Large<br>

<input name="confirm" type=submit id="confirm" value='Confirm'>

</form> 
```

**菜单2.php**

```
<?php
$con = mysql_connect("localhost","root");
if (!$con) {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("project1", $con);

$Tile = mysql_real_escape_string($_POST['tile']);
$Field = mysql_real_escape_string($_POST['field1']);

if ( !empty($Tile) && !empty($Field) ) {
    $insert="INSERT INTO menu(name, price) VALUES ('$Tile','$Field')";
    if (!mysql_query($insert, $con)) {
        die('Error: ' . mysql_error());
    }
    echo "1 record added";
}
else echo "Please select at least 1 menu.";

mysql_close($con) 
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:11:44.197

第一件事：您不必为单选按钮创建数组。像这样使用：

```
<input type="checkbox" value="Siomay" name="tile[]">Siomay <br>
<input type="radio" name="field1" value="4" />Small
<input type="radio" name="field1" value="5" />Large<br> 
```

第二件事：改变：

```
 $Tile = mysql_real_escape_string($_POST['tile']);
  $Field = mysql_real_escape_string($_POST['field1']); 
```

至

```
 $Tile = mysql_real_escape_string($_POST['tile'])!=""?mysql_real_escape_string($_POST['tile']):0;
      $Field = mysql_real_escape_string($_POST['field1'])!=''?mysql_real_escape_string($_POST['field1']):0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:12:30.453

我们可以选择多个复选框，因此复选框应该具有不同的名称，但我们不能选择多个单选选项，因此它们必须具有相同的名称。

# php - mkdir 写入权限

> ID：11522108
> 
> 赞同：0
> 
> 时间：2012-07-17T12:05:44.413
> 
> 标签：php, codeigniter, mkdir

我有一个小问题。我已经在堆栈溢出中搜索了类似的东西，但它们似乎没有帮助（据我所知）。

我正在使用`mkdir`in `php`，它工作得很好，每个月都会创建一个新目录。但是，我刚刚注意到在月份更改后创建的目录没有写权限。我相信这与使用 0777 来允许最大访问权限有关，但是没有任何变化，我相信这被设置为默认设置。

这是代码：

```
if (!is_dir($this->config->item('rootpath').'/assets/documents/'.$date))
{
  $subDirectory = mkdir($this->config->item('rootpath').'/assets/documents/'.$date, 0777);
}
else
  $subDirectory = $this->config->item('rootpath').'/assets/documents/'.$date; 
```

只有在尝试上传文件后，权限被拒绝，我可以去为生成的文件夹设置写权限，然后重新提交文件上传。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:09:44.713

在旁边添加正确的权限，`mkdir`如下所示：

```
$subDirectory = mkdir( $this->config->item( 'rootpath' ) . '/assets/documents/' . $date, 0777 ); 
```

# eclipse - 创建/运行 playn 1.3.1/1.4 项目的问题

> ID：11522111
> 
> 赞同：0
> 
> 时间：2012-07-17T12:05:55.903
> 
> 标签：eclipse, maven, playn

当我尝试通过 maven 运行展示示例时（使用“mvn test”和“mvn test -Ptest-java”），我得到：

```
[INFO] Scanning for projects...
[ERROR]    
[ERROR] The project com.googlecode.playn:playn-showcase:1.0-SNAPSHOT (E:\Desarrollo\Git\playn-samples\showcase\pom.xml) has 1 error
[ERROR] Non-resolvable parent POM: Could not find artifact com.googlecode.playn:playn-project:pom:1.4-SNAPSHOT and 'parent.relativePath' points at wrong local POM @ line 6, column 11 -> [Help 2]    
[ERROR]    
[ERROR] To see the full stack trace of errors, re-run Maven with the -e switch.   
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles: 
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/ProjectBuildingException
[ERROR] [Help 2] http://cwiki.apache.org/confluence/display/MAVEN/UnresolvableModelException 
```

我可以通过 Maven 创建项目，但是当我尝试通过 Eclipse 创建一个新的 playn 1.3.1 项目时，我得到：

```
'Creating playn-archetype' has encountered a problem.

Unable to create project from archetype
[com.googlecode.playn:playn-archetype:1.3.1]

Details: Unable to create project from archetype [com.googlecode.playn:playn-archetype:1.3.1]
The defined artifact is not an archetype 
```

（playn 1.4 也是如此）

当我尝试将 playn 1.3.1 或 1.4 项目导入 Eclipse（通过 Maven 创建）时，出现下一个错误：

```
'Importing Maven projects' has encountered a problem.
An internal error ocurred during: "Importing Maven projects".

Details: An internal error occurred during: "Importing Maven projects".
com/android/io/StreamException 
```

所以我不能通过 Eclipse 运行任何项目。

我使用 Eclipse Indigo 3.7、maven 3.0.4 和 JDK 7u5；我按照所有显示 playn 开始的步骤进行操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-22T07:13:13.117

我认为它与这个错误有关：[https ://github.com/rgladwell/m2e-android/issues/89](https://github.com/rgladwell/m2e-android/issues/89)

您可以尝试主更新站点 (http://rgladwell.github.com/m2e-android/updates/master/)，直到新版本从 m2e-android 发布。

# list - Sencha Touch 2 列表重新加载

> ID：11522112
> 
> 赞同：0
> 
> 时间：2012-07-17T12:05:57.643
> 
> 标签：list, geolocation, touch, jsonp, sencha-touch-2

我正在尝试创建使用 JSONP 加载列表的视图，但是当用户从选择字段中选择一个值时，我想重新加载列表。我的代码：

```
var distance = 50;

Ext.define('MyApp.view.ListUpdate', {
    extend: 'Ext.Container', //Ext.navigation.View
    xtype: 'listUpdate',
    requires: [
        'Ext.dataview.List',
        'Ext.data.proxy.JsonP',
        'Ext.data.Store',
        'Ext.field.Select'
    ],
    config: {
        style: ' background-color:white;',
        layout: 'vbox',
        items: 
        [
            {
                xtype: 'toolbar',
                docked: 'top',
                title: 'List update',
                minHeight: '60px',
                items: [
                    {
                        ui: 'back',
                        xtype: 'button',
                        id: 'backButton', //taki sam id jak w view.GdzieJestem
                        text: 'Back',
                    },
                    {
                        minHeight: '60px',
                        right: '5px',
                        html: ['<img src="resources/images/myImage.png"/ style="height: 100%; ">',].join(""),
                    },
                ],          
            },
            {
                xtype: 'fieldset',
                title: 'Choose distance',
                items: [
                    {
                        xtype: 'selectfield',
                        id: 'selectField',
                        options: [
                            {text: '50km',  value: 50},
                            {text: '100km', value: 100},
                            {text: '150km',  value: 150},
                            {text: '200km',  value: 200},
                            {text: '250km',  value: 250},
                            {text: '300km',  value: 300},
                            {text: '350km',  value: 350},
                            {text: '400km',  value: 400},
                            {text: '450km',  value: 450},
                            {text: '500km',  value: 500},
                            {text: '550km',  value: 550},
                            {text: '600km',  value: 600},
                        ],
                        listeners: {
                            change: function (select, newValue, oldValue) {
                                // console.log('change', newValue.data.value);
                                console.log(Ext.getCmp('selectField').getValue());
                                distance = Ext.getCmp('selectField').getValue();
                            } // change
                        } // listeners
                    }
                ]
            },

            { 
                xtype: 'list',
                style: ' background-color:white;',
                itemTpl: '<h2>{company}, {firstName} {lastName}</h2><p> <span style="color:blue;">{city}, {street}, tel: {telephoneNumber},&nbsp; </span><span style="color:orange;"> odległość: {distance}km</span></p>',
                flex: 1,
                store: {
                    autoLoad: true,
                    fields : ['company', 'firstName', 'lastName', 'city', 'street', 'telephoneNumber', 'distance'],
                    proxy: {
                        type: 'jsonp',
                        url: 'http://192.168.1.15:8080/MyServer/agents/list?userLat='+lat+'&userLon='+lon+'&distance='+distance+'',
                        reader: {
                            type: 'json',
                            rootProperty: 'agents'
                        }
                    }
                }
            }   
        ]
    }
}); 
```

我的第二个问题是：你知道为什么当应用程序在 Chrome 中运行时地理定位有效，但当它在设备上本地运行时，地理定位不起作用。代码：

```
var lat = 0;
var lon = 0;

        if (navigator.geolocation) {

            navigator.geolocation.getCurrentPosition(
                function (position) {
                    console.log(position.coords.latitude);
                    console.log(position.coords.longitude);
                     lat = position.coords.latitude;
                     lon = position.coords.longitude;
                    //Ext.Viewport.setActiveItem(Ext.create('Proama.view.WyszukajAgenta'));
                },

                function (error)
                {
                    switch(error.code)
                    {
                        case error.TIMEOUT:
                            alert ('Timeout');
                            break;
                        case error.POSITION_UNAVAILABLE:
                            alert ("Postition unavailable");
                            break;
                        case error.PERMISSION_DENIED:
                            alert ('Permission denied');
                            break;
                        case error.UNKNOWN_ERROR:
                            alert ('Unknown error');
                            break;
                    }
                }
            );
        }
        else {
            alert('Problem with device.');
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T19:31:01.537

对于问题 1，我会在选择更改时重新加载列表组件的存储。通过这种设置方式，您将需要通过列表访问列表组件的商店。例如，在更改事件中：

```
change: function(select, newValue, oldValue){
    var items = select.getParent().getParent().getItems(); // access parent's parent's items
    var list = items[1]; // list is the second item in the parent's 
    list.getStore().load(); // reload the list's store

} 
```

理想情况下，您应该抽象存储并在应用程序级别注册它（如果您正在以 MVC 格式开发）。随着商店的抽象，您将能够调用 Ext.getStore('MyStore').load(); 应用程序中的任何位置。

至于问题 2，当您将应用程序包装在本机外壳中时，根据我的经验，HTML5 地理定位不起作用。您需要使用 PhoneGap (http://docs.phonegap.com/en/1.9.0/cordova_geolocation_geolocation.md.html#Geolocation) 之类的工具连接到本地 GPS 呼叫

希望这可以帮助。

# android - TextView 和 EditText 对齐问题

> ID：11522117
> 
> 赞同：0
> 
> 时间：2012-07-17T12:06:44.713
> 
> 标签：android, alignment, android-edittext, textview

我正在向 UI 添加`TextViews`和`EditTexts`，但它们相互重叠。我希望它们彼此相邻出现。我在这段代码中缺少什么？

```
ScrollView sv = new ScrollView(this);
            RelativeLayout ll = new RelativeLayout(this);
            ll.setId(99);
            sv.addView(ll, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
            ll.setBackgroundResource(R.drawable.background);

        for (int i = 0; i < 10 /*Changed the actual value for better Understanding*/; i++) {
            tv = new TextView(this);
            tv.setText("" + (productStr[i]));
            tv.setId(i);
            tv.setTextSize(TypedValue.COMPLEX_UNIT_PX, 18);
            RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, 
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            lay.addRule(RelativeLayout.ALIGN_RIGHT, RelativeLayout.TRUE);

            ll.addView(tv, lay);
            et = new EditText(this);
            et.setInputType(InputType.TYPE_CLASS_NUMBER);
            et.setEms(2);
            allEds.add(et);
            et.setId(i);

             RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, 
                     RelativeLayout.LayoutParams.WRAP_CONTENT);
             p.addRule(RelativeLayout.ALIGN_BOTTOM, tv.getId());
            ll.addView(et, p);

        }
        this.setContentView(sv); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:12:39.983

使用 LinearLayout 而不是 RelativeLayout，并将定位留给布局器。

PS：拼写为“them”而不是“dem”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:30:35.560

只需`LinearLayout`在您的 xml 中使用。像这样的东西会在`TextView`旁边生成一个`EditText`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

            <requestFocus />
        </EditText>
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/editText2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10" >

        </EditText>
    </LinearLayout>

</LinearLayout> 
```

PS：每个人在这个论坛上提问时都遵循一些规范，比如在你的问题中不使用聊天语言。制作简短而甜美的标题，您可以在帖子中写下任意数量的解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T06:05:06.173

无需添加额外的布局，您可以使用`RelativeLayout`. 下面的代码应该像你想要的那样布局`TextView`和：`EditText`

```
 ScrollView sv = new ScrollView(this);
        RelativeLayout ll = new RelativeLayout(this);
        ll.setId(99);
        ll.setBackgroundResource(R.drawable.background);

        sv.addView(ll, new LayoutParams(LayoutParams.FILL_PARENT,
                LayoutParams.FILL_PARENT));
        for (int i = 0; i < 10; i++) {
            tv = new TextView(this);
            tv.setText("" + (productStr[i]));
            tv.setId(1000 + i);
            tv.setTextSize(TypedValue.COMPLEX_UNIT_PX, 18);
            RelativeLayout.LayoutParams lay = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            lay.addRule(RelativeLayout.ALIGN_PARENT_LEFT, RelativeLayout.TRUE);
            if (i != 0) {
                lay.addRule(RelativeLayout.BELOW, 2000 + i - 1);
            }
            ll.addView(tv, lay);
            et = new EditText(this);
            et.setInputType(InputType.TYPE_CLASS_NUMBER);
            et.setEms(2);
            et.setId(2000 + i);
            RelativeLayout.LayoutParams p = new RelativeLayout.LayoutParams(
                    RelativeLayout.LayoutParams.WRAP_CONTENT,
                    RelativeLayout.LayoutParams.WRAP_CONTENT);
            p.addRule(RelativeLayout.RIGHT_OF, tv.getId());
            if (i != 0) {
                p.addRule(RelativeLayout.BELOW, 2000 + i - 1);
            }
            ll.addView(et, p);
        }
        this.setContentView(sv); 
```

# objective-c - 找出一个点是否在 CLLocationCourse 的过程中

> ID：11522118
> 
> 赞同：0
> 
> 时间：2012-07-17T12:06:50.160
> 
> 标签：objective-c, ios, xcode, navigation, coordinates

我有 2 个点，一个静态地图注释和移动的用户设备。对于这两个点，我都有纬度和经度，对于移动设备，我的路线是 N 度数为 0，E 度数为 90，依此类推。我如何确定第二个静态点是否在我的位置的 N、E、W、S 处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:10:45.973

假设您的设备位于 点`(x,y)`，静态点位于`(xs,ys)`。

考虑这两点之间的直角三角形。它有长度为`xs-x`和的导管`ys-y`，所以 x 轴和斜边之间的夹角是`arctan((ys-y)/(xs-x))`。请注意，斜边指向 的方向`(xs,ys)`，因此该角度告诉您该点所在的方向。

如果角度为`0`，则静态点在东方。

如果角度为`pi/2`，则静态点在北方。

如果角度为`pi`，则静态点在西边。

如果角度为`3*pi/2`，则静态点在南方。

如果您希望将此角度转换为 0 度为北，90 度为东等，这只是计算的问题`(360 + 90 - angle * 180/pi) % 360`

# java - Kundera for Cassandra - 按行键删除记录

> ID：11522120
> 
> 赞同：1
> 
> 时间：2012-07-17T12:06:56.147
> 
> 标签：java, cassandra, jpql, cql, kundera

我正在尝试按行键从数据库中删除特定记录。但是当我尝试执行这个查询时：

```
 Query query = em.createQuery(
            "DELETE FROM User u WHERE u.userId = :u");

 query.setParameter("u", userID).executeUpdate(); 
```

我得到了这个例外：“ *Condition = is not suported for query on row key！* ”。

有什么解决方法，还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T12:02:35.220

您可以做的解决方法是：

查找使用：用户 u = em.find(User.class, userId)

然后，em.delete(u);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T13:13:54.803

此外， [http](http://groups.google.com/group/kundera-discuss/subscribe) ://groups.google.com/group/kundera-discuss/subscribe 可以为您提供快速和更好的支持来讨论有关 Kundera 的问题。

-维维克

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-24T21:47:50.787

执行这种删除的一种可能方法（在一个使用 Kundera 的命令中，目前版本 2.2）是使用“本机查询”，例如：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("cassandra_pu");

EntityManager em = emf.createEntityManager();

// "table" is the table name (case sensitive) you name your table in Cassandra
String query = "delete from table where key = 'keyValue'";

// "TablePersistencyEntity" is the Kundera Persistency Entity (Class) for the "table" 
Query q = em.createNativeQuery(query, TablePersistencyEntity.class);
q.getResultList();

em.close(); 
```

# visual-c#-express-2010 - Visual C# 2010 Express 中的“制作单实例应用程序”

> ID：11522133
> 
> 赞同：1
> 
> 时间：2012-07-17T12:08:09.483
> 
> 标签：visual-c#-express-2010

我正在使用 Visual C# 2010 Express，我希望我的应用程序是单实例的。各种消息来源告诉我“项目属性 > 应用程序 > 制作单实例应用程序”会做这样的事情。但是，我在 VC#2010 Express 中找不到这个选项。

Express版本中没有它，还是被移动了，或者它在那里而我真的只是瞎了眼？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T14:19:05.697

我正在寻找同样的东西，可悲的是，C# 中没有这样的东西。

你可能会在这里找到你想要的东西：http: [//www.ai.uga.edu/mc/SingleInstance.html](http://www.ai.uga.edu/mc/SingleInstance.html)

# iphone - 使用自动释放时泄漏？

> ID：11522134
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:08:10.420
> 
> 标签：iphone, memory-leaks

即使我使用自动释放释放结果对象，泄漏工具也显示泄漏仪器中的 100% 泄漏。

```
ResultsViewController *results = [[[ResultsViewController alloc]initWithNibName:
                                @"ResultsViewController1" bundle:nil] autorelease];
[results getscore:(int)score:(int)skippedwords:(int)crtwords];
[self.navigationController pushViewController:results animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:18:40.313

在“ `Instruments`”中，它总是将自动释放的对象显示为“泄漏”

自己做一件事分配/释放“ `results`”。`Autorelease`除非您必须将对象返回给其他类或方法，否则永远不要使用“ ”。

```
ResultsViewController *results = [[ResultsViewController alloc]initWithNibName: @"ResultsViewController1" bundle:nil];

[results getscore:score :skippedwords :crtwords];

[self.navigationController pushViewController:results animated:YES]; 

[results release]; 
```

因为您已经将此控制器推送到导航控制器，所以您不再需要它的实例。快乐编码 ;)

# vbscript - 使用 VBScript 的 Outlook

> ID：11522137
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:08:32.510
> 
> 标签：vbscript, outlook.application

我想知道使用VBScript 阅读电子邮件的时间。谁能帮我解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:30:15.363

假设您在运行脚本的计算机上安装了 Outlook，您可以使用 Outlook 自动化。这是一篇 MS kb 文章，可以帮助您入门：[在 Outlook 2000 中引用项目和文件夹的编程示例](http://support.microsoft.com/kb/208520)

然后查看可能包含您需要的信息的[MailItem对象。](http://msdn.microsoft.com/en-us/library/aa210946%28v=office.11%29.aspx)

# javascript - JavaScript 点击事件在 Android 4.0.4 默认浏览器上的三星 Galaxy SIII 上不起作用

> ID：11522140
> 
> 赞同：4
> 
> 时间：2012-07-17T12:08:45.057
> 
> 标签：javascript, android, jquery, android-4.0-ice-cream-sandwich

我对 Android 4.0.4 上的三星 Galaxy SIII 的默认浏览器有一个最奇怪的问题：

对于以下页面，单击链接不会触发 JavaScript 处理程序。从其中一个 div 的内容中删除单个“a”字母会使它们再次工作......

下面是 JS 控制台的截图：

![在此处输入图像描述](../Images/ef9882b9416e4d20de06c1a1a160d36c.png)

我打开了一个[android bug 报告](http://code.google.com/p/android/issues/detail?id=35078)，如果你有同样的问题，请给它加星，谢谢。

预先感谢您的帮助！

```
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function() {
        alert('attaching click handlers');
        $("#red").click(function(e) {
            alert('red clicked');
            $("body").css("background-color", "#CC0000");
        });
        $("#green").click(function(e) {
            alert('green clicked');
            $("body").css("background-color", "#00CC00");
        });
        $("#blue").click(function(e) {
            alert('blue clicked');
            $("body").css("background-color", "#0000CC");
        });
    });
</script>
</head>
<body>
    <div>
        <p>
            <a id="red" href="#">CHANGE TO RED</a>
        </p>
        <p>
            <a id="green" href="#">CHANGE TO GREEN</a>
        </p>
        <p>
            <a id="blue" href="#">CHANGE TO BLUE</a>
        </p>
    </div>
    <p>Removing one of the a's in the content below will make the JS
        click events work (i.e. trigger background color change), and
        so will changing the 'page' class or id into something else</p>
    <div class="page" id="page">
        <div>aaaaaaaaaaaaaaaaaaa</div>
        <ul>
            <li>
                <div>aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div>
            </li>
        </ul>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T07:48:24.860

实际上至少有一个简单的解决方案：将 DIV 的 id 更改为不包含“页面”子字符串...

与其说是解决方案，不如说是一种解决方法，但是如果浏览器有错误的自定义，还能做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-30T23:50:34.947

我刚刚在三星 Galaxy 上遇到了类似的问题。找到这个线程。变化自：

```
span id="page" 
```

至：

```
span id="pgNow" 
```

解决它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T16:37:34.370

像这样的东西也会起作用：

```
<a href='http://www.google.de' ontouchstart='window.location = this.href'>foo</a>" 
```

# ember.js - 在浏览器 URL 中反映更改的选择

> ID：11522141
> 
> 赞同：0
> 
> 时间：2012-07-17T12:08:48.643
> 
> 标签：ember.js

如果选择更改，则以下控制器会更新表格。这样可行。但是后退按钮会返回到最后一条路线，而不是最后的选择（在这种情况下，这是预期的行为）。

但我更希望后退按钮带我回到最后一个选择。到目前为止，我已经尝试创建一个新路由并从 selectionChanged 调用 transitionTo 并将 this.selection.name 设置为新路由。但这不起作用（不能调用未定义的方法“transitionTo”）。

所以问题是：在浏览器位置反映选择更改的推荐方法是什么？

```
NewApp.GridController = Em.Controller.extend({
    content: [],      // bound to Ember.Select view  
    selection: null,  // bound to Ember.Select view
    tableContent: [],

    selectionChanged: function () {
        var that = this;
        if (this.selection) {
            $.getJSON("api/v1/lists/" + this.selection.name + "/prices", function (content) {
                that.set('tableContent', content);
                NewApp.router.root.prototype.switchRoute();
            });
        }
    }.observes('selection'),

    initController: function () {
        var that = this;
        $.getJSON("api/v1/lists/all", function (content) {
            that.set('content', content);
            that.set('selection', content.get(0));
        });
    }

}); 
```

路由器看起来像这样：

```
NewApp.Router = Ember.Router.extend({
  enableLogging: true,
  location: 'hash',

  root: Em.Route.extend({

    show3: Ember.Route.transitionTo('root.third'),

    switchRoute: Ember.Route.transitionTo('root.listname'),

    index: Em.Route.extend({
      route: '/',
      redirectsTo: 'main'
    }),

    main: Em.Route.extend({

      route: 'app',

      connectOutlets: function (router, context) {
        router.get('helloController').initController();
        return router.get('applicationController').connectOutlet({
          name: 'hello'
        });

      }

    }),

    third: Em.Route.extend({

      route: 'third',

      connectOutlets: function (router, context) {
        router.get('gridController').initController();
        return router.get('applicationController').connectOutlet({
          name: 'grid'
        });

      }

    }),

    listname: Em.Route.extend({
      route: 'routeName' // static, just for testing
    })

  })

}); 
```

# javascript - 典型的 AngularJS 工作流程和项目结构（使用 Python Flask）

> ID：11522151
> 
> 赞同：227
> 
> 时间：2012-07-17T12:10:07.237
> 
> 标签：javascript, python, flask, angularjs

我对整个 MV* 客户端框架的狂热还很陌生。它不一定是 AngularJS，但我选择它是因为我觉得它比 Knockout、Ember 或 Backbone 更自然。无论如何，工作流程是什么样的？人们是否从在 AngularJS 中开发客户端应用程序开始，然后将后端连接到它？

或者反过来，首先在 Django、Flask、Rails 中构建后端，然后将 AngularJS 应用程序附加到它？有没有“正确”的做法，还是最终只是个人喜好？

我也不确定是根据 Flask 还是 AngularJS 来构建我的项目？社区实践。

例如，Flask 的 minitwit 应用程序的结构如下：

```
minitwit
|-- minitwit.py
|-- static
   |-- css, js, images, etc...
`-- templates
   |-- html files and base layout 
```

AngularJS 教程应用的结构如下：

```
angular-phonecat
|-- app
    `-- css
    `-- img
    `-- js
    `-- lib
    `-- partials
    `-- index.html
|-- scripts
 `-- node.js server and test server files 
```

我可以自己想象一个 Flask 应用程序，而且很容易看到像 ToDo List 这样的 AngularJS 应用程序，但是当谈到使用这两种技术时，我不明白它们是如何协同工作的。当您已经拥有 AngularJS 时，似乎我不需要服务器端 Web 框架，一个简单的 Python Web 服务器就足够了。例如，在 AngularJS 待办事项应用程序中，他们使用 MongoLab 使用 Restful API 与数据库通信。后端不需要 Web 框架。

也许我只是非常困惑，AngularJS 只不过是一个花哨的 jQuery 库，所以我应该像在我的 Flask 项目中使用 jQuery 一样使用（假设我将 AngularJS 模板语法更改为与 Jinja2 不冲突的东西）。我希望我的问题有一些意义。我主要在后端工作，这个客户端框架对我来说是一个未知的领域。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-02-28T20:23:33.423

我将首先以标准结构组织 Flask 应用程序，如下所示：

```
app
|-- app.py
|-- static
    |-- css
    |-- img
    |-- js
|-- templates 
```

正如 btford 所提到的，如果你正在做一个 Angular 应用程序，你会希望专注于使用 Angular 客户端模板，而远离服务器端模板。使用 render_template('index.html') 将导致 Flask 将您的 Angular 模板解释为 jinja 模板，因此它们不会正确渲染。相反，您需要执行以下操作：

```
@app.route("/")
def index():
    return send_file('templates/index.html') 
```

请注意，使用 send_file() 意味着文件将被缓存，因此您可能希望使用 make_response() 代替，至少用于开发：

```
 return make_response(open('templates/index.html').read()) 
```

之后，构建应用程序的 AngularJS 部分，修改应用程序结构，使其如下所示：

```
app
|-- app.py
|-- static
    |-- css
    |-- img
    |-- js
        |-- app.js, controllers.js, etc.
    |-- lib
        |-- angular
            |-- angular.js, etc.
    |-- partials
|-- templates
    |-- index.html 
```

确保您的 index.html 包含 AngularJS 以及任何其他文件：

```
<script src="static/lib/angular/angular.js"></script> 
```

此时，您尚未构建 RESTful API，因此您可以让 js 控制器返回预定义的示例数据（只是临时设置）。准备就绪后，实现 RESTful API 并使用 angular-resource.js 将其连接到您的 Angular 应用程序。

编辑：我整理了一个应用程序模板，虽然比我上面描述的要复杂一点，但它说明了如何使用 AngularJS + Flask 构建应用程序，并完成 AngularJS 和简单 Flask API 之间的通信。如果你想检查一下，这里是：[https ://github.com/rxl/angular-flask](https://github.com/rxl/angular-flask)

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-07-17T19:51:54.743

你可以从任一端开始。

没错，您可能不需要带有 AngularJS 的完整服务器端框架。通常最好提供静态 HTML/CSS/JavaScript 文件，并为后端提供 RESTful API 供客户端使用。您可能应该避免的一件事是将服务器端模板与 AngularJS 客户端模板混合。

如果你想使用 Flask 来提供你的文件（可能有点矫枉过正，但你仍然可以使用它），你可以将“angular-phonecat”中的“app”的内容复制到“minitwit”的“static”文件夹中。

AngularJS 更针对类似 AJAX 的应用程序，而 flask 让您能够同时执行旧式 Web 应用程序以及创建 RESTful API。每种方法都有优点和缺点，所以这真的取决于你想做什么。如果您给我一些见解，我也许可以提出进一步的建议。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-02-06T17:56:37.250

这个由 John Lindquist（angular.js 和 jetbrains guru）制作的官方 Jetbrains PyCharm 视频是一个很好的起点，因为它展示了烧瓶中 web 服务、数据库和 angular.js 的相互作用。

他在不到 25 分钟的时间内使用 flask、sqlalchemy、flask-restless 和 angular.js构建了一个**pinterest 克隆。**

享受： [http ://www.youtube.com/watch?v=2geC50roans](http://www.youtube.com/watch?v=2geC50roans)

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-09-02T10:29:38.790

**编辑**：新的[Angular2 风格指南](https://angular.io/docs/ts/latest/guide/style-guide.html)更详细地建议了类似的，如果不是相同的结构。

下面的答案针对大型项目。我花了很多时间思考和试验几种方法，因此我可以将一些服务器端框架（在我的例子中是 Flask 和 App Engine）与客户端框架（如 Angular）结合起来以实现后端功能。这两个答案都非常好，但我想提出一种稍微不同的方法（至少在我看来）以更人性化的方式扩展。

当你在实现一个 TODO 示例时，事情就很简单了。当您开始添加功能和小细节以改善用户体验时，不难迷失在样式、javascript 等的混乱中。

我的应用程序开始变得相当大，所以我不得不退后一步重新考虑。最初，上面建议的方法可以通过将所有样式和所有 JavaScript 放在一起来工作，但它不是模块化的，也不容易维护。

如果我们按功能而不是按文件类型组织客户端代码会怎样：

```
app
|-- server
    |-- controllers
        |-- app.py
    |-- models
        |-- model.py
    |-- templates
        |-- index.html
|-- static
    |-- img
    |-- client
        |-- app.js
        |-- main_style.css
        |-- foo_feature
            |-- controller.js
            |-- directive.js
            |-- service.js
            |-- style.css
            |-- html_file.tpl.html
        |-- bar_feature
            |-- controller.js
            |-- directive.js
            |-- service.js
            |-- style.css
            |-- html_file.tpl.html
    |-- lib
        |-- jquery.js
        |-- angular.js
        |-- ... 
```

等等。

如果我们像这样构建它，我们可以将我们的每个目录包装在一个角度模块中。而且我们以一种很好的方式拆分文件，当我们使用特定功能时，我们不必通过不相关的代码。

像[Grunt](http://gruntjs.com/)这样正确配置的任务运行器将能够毫不费力地查找、连接和编译您的文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-08T03:56:08.330

另一种选择是将两者完全分开。

```
项目
|-- 服务器
|-- 客户

```

与flask 相关的文件位于服务器文件夹下，与angularjs 相关的文件位于客户端文件夹下。这样，更改后端或前端会更容易。例如，您可能希望将来从 Flask 切换到 Django 或从 AngularJS 切换到 ReactJS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-07T23:18:01.270

I think it is important to determine at what end you want to do most of your data processing - front end or back end.
If it's front end, then go with the angular workflow, which means your flask app will function as more of an api where an extension like flask-restful will come end.

But if like me, you are doing most work on the backend, then go with the flask structure and only plug angular ( or in my case vue.js) to build the front end (when neccessary)

# java - 使用 Java 检查新的 IMAP 邮件

> ID：11522157
> 
> 赞同：1
> 
> 时间：2012-07-17T12:10:31.907
> 
> 标签：java, imap, jakarta-mail

我正在尝试使用 JavaMail 实现一个小工具来访问特定文件夹中的 IMAP 电子邮件。然后通知这些文件夹中是否有新电子邮件。我不一定只对了解未读消息感兴趣。由于消息可能已被阅读（在共享邮箱场景中），但对我来说可能仍然是新的。

我正在考虑读取文件夹并存储最新消息的 UID。然后在我下次检查时比较该 UID。但是，我在 Javamail 文档中找不到任何关于如何在不查看整个邮件列表并按日期和/或邮件编号排序的情况下查找最新邮件的信息。

有没有更好的方法来了解新消息？有没有一种简单的方法可以告诉 JavaMail 我只想要文件夹中的最新消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:33:29.690

转换为 an[`IMAPFolder`](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/imap/IMAPFolder.html)并使用`getMessagesByUID(long start, long end)`and `LASTUID`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:49:58.903

JavaMail API 有一些搜索机制。您可以搜索收件箱文件夹，例如：

```
Message messages[] = inbox.search(new FlagTerm(new Flags(Flag.RECENT), true)); 
```

它仅在您的收件箱中提供未读邮件。

# ios - iOS App - 提交到商店，验证问题

> ID：11522158
> 
> 赞同：0
> 
> 时间：2012-07-17T12:10:35.947
> 
> 标签：ios, xcode, validation

我正在尝试将我的应用程序提交到商店，但在存档验证后我收到此错误：

```
Icon found in the Info.plist is not found under top level address wrapper 
```

有人知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:25:56.910

woz 提到的那个链接似乎非常彻底地涵盖了这一点。我能想到的唯一要检查的是图标是否包含在目标中。

# datagridview - Datagridview 不反映数据集更改

> ID：11522160
> 
> 赞同：0
> 
> 时间：2012-07-17T12:10:44.213
> 
> 标签：datagridview, dataset

我创建了一个以数据集为数据源的 datagridview。在某个文本框的 keydown 事件上，我向数据集添加了一个新行，它直接反映在 datagridview 中。但是，如果我碰巧点击了datagridview中的最后一行“左边有星星的那一行”，无论我向数据集中添加了多少行，它们都不会被反映。如果我返回数据集行的计数，我可以看到它们仅被添加，它们不再反映在 datagridview 中。我尝试了 ds.acceptchanges 和 datagridview.refresh 但没有帮助。有什么解决办法吗？

这是我使用的代码：

```
if ds.tables(0).rows(datagridview.rows.count-1).item("Amount")<>0 then
ds.tables(0).rows.add(ds.tables(0).newrow)
end if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T15:48:05.860

好的，首先，您应该使用绑定源。这就是使您的 DataGridView 和 DataTable 合二为一的原因。

首先要做的是：-

```
BindingSource bs = new BindingSource();
bs.DataSource = ds.tables[0]; 
```

现在您需要为您的 DatagridView 设置数据源，这将是您的 BindingSource bs：-

```
DatagridView1.Datasource = bs; 
```

现在，您在 DatagridView 中所做的任何更改都将自动反映在您的 DataSet 表中。这也意味着在 DataTable 中所做的任何更改都会自动反映在您的 GridView 中。

# java - Java `static {}` 关键字本身是什么？

> ID：11522163
> 
> 赞同：4
> 
> 时间：2012-07-17T12:11:02.590
> 
> 标签：java, static

> **可能重复：**
> [Java 中的静态块](https://stackoverflow.com/questions/2943556/static-block-in-java)

我遇到了以下用法，`static`但没有弄清楚它的作用。我知道使用例如`static String hello = "World";`，但我不明白以下内容。

```
static {
   loadFromProperties(new Properties());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T12:12:50.923

它被称为[静态初始化器](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.7)。它是在类初始化时运行的代码块。

相关问题（实际上可能是一个重复）：

*   [Java中的静态块](https://stackoverflow.com/questions/2943556/static-block-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:13:00.657

这称为静态块。这些是在类被加载/初始化但在实例化之前执行的。您可以使用 then 来初始化静态成员/字段。

# search - 如何在 Redis 中为多个资源组织数据以用于自动完成搜索

> ID：11522169
> 
> 赞同：1
> 
> 时间：2012-07-17T12:11:19.683
> 
> 标签：search, autocomplete, redis

我有以下资源（示例）：

*   帐户
*   公司
*   人

这些资源中的每一个都应该可以通过一个搜索`field`：`account.name`、、、`company.name`。`person.name`现在我想通过自动完成中的某个短语从所有这些资源中获取“聚合”数据列表，例如`ta...`等。所以这个列表应该按它的`name`.

**如何`indexing`在 Redis 中实现自动完成功能？**我从[**这里**](http://patshaughnessy.net/2011/11/29/two-ways-of-using-redis-to-build-a-nosql-autocomplete-search-index)采用的灵魂伴侣方法开始（这是那里显示的第二种方法）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:31:33.763

下面提到的链接是第二种方法的实现。我目前正在使用它。它包含在一个应用程序中。

文件描述：filler.py - 将数据源中的数据填充到 redis 中。views.py - 要自动完成的关键字被命中的点。

[https://github.com/dan-boa/lidea/tree/master/suggest](https://github.com/dan-boa/lidea/tree/master/suggest)

# objective-c - 如何用 UIImage 填充 CGContext？

> ID：11522170
> 
> 赞同：1
> 
> 时间：2012-07-17T12:11:22.810
> 
> 标签：objective-c, ios, xcode, cgcontext

我继承`UIView`，我覆盖`-drawRect:`，我画一个图`CGContext`。现在我想用 填充这个数字`UIImage`。知道怎么做吗？

**编辑：**

我的代码来自`-drawRect:`

```
CGContextBeginPath(ctx);
//here I draw my figure
CGContextClosePath(ctx);
CGContextClip(ctx);

//this doesn't work
UIImage * image = [UIImage imageNamed:@"blackbackground.jgp"];
[image drawInRect:rect];

//this neither
CGImageRef cgImage = image.CGImage;
CGContextDrawImage(ctx, rect,  cgImage); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T08:46:28.300

**将图像绘制到的正确方法** `CGContext` **是：**

```
UIImage *_originalImage = // your image

UIGraphicsBeginImageContext(_originalImage.size);
CGContextRef _context = UIGraphicsGetCurrentContext(); // here you don't need this reference for the context but if you want to use in the future for drawing anything else on the context you could get it for it
[_originalImage drawInRect:CGRectMake(0.f, 0.f, _originalImage.size.width, _originalImage.size.height)];

UIImage *_newImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:21:07.957

假设您的意思是要在图形“内部”绘制图像，最简单的方法是创建图形的 cgpath，确保路径已关闭，然后 CGContextClipToPath( context, path)

添加

我刚刚测试了您的代码，正如彼得所说，它应该可以工作。我建议测试您的路径（设置笔触颜色和笔触路径），并尝试不使用蒙版的图像来找出问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:42:19.233

您需要的是使用图形路径剪辑上下文，然后绘制图像。看看这个答案，它解释了如何做第一部分[如何向 UILabel 的文本添加渐变，而不是背景？](https://stackoverflow.com/questions/1266179/how-do-i-add-a-gradient-to-the-text-of-a-uilabel-but-not-the-background)一旦你剪辑了上下文，只需获取 UIImage 并调用其中一个绘图函数，例如 drawInRect ...

# javascript - Google Closure EventTarget 是如何工作的？

> ID：11522174
> 
> 赞同：3
> 
> 时间：2012-07-17T12:11:42.763
> 
> 标签：javascript, events, google-closure-compiler, google-closure, google-closure-library

我在高级编译模式下遇到错误。

```
Uncaught TypeError: Object #<d> has no method 'attachEvent' 
```

经过一些源映射魔术后，我发现这是从`goog.events.listen`调用中抛出的，其中第一个参数是我的自定义对象，继承`goog.events.EventTarget`.

这是在闭包的来源

```
goog.events.EventTarget.prototype.addEventListener = function(
    type, handler, opt_capture, opt_handlerScope) {
  goog.events.listen(this, type, handler, opt_capture, opt_handlerScope);
}; 
```

所以这个函数最终在我的对象的原型上，以及`customEvent_ = true`，然后在`goog.events.listen`

```
// Attach the proxy through the browser's API
if (src.addEventListener) {
  if (src == goog.global || !src.customEvent_) {
    src.addEventListener(type, proxy, capture);
  }
} else {
  // The else above used to be else if (src.attachEvent) and then there was
  // another else statement that threw an exception warning the developer
  // they made a mistake. This resulted in an extra object allocation in IE6
  // due to a wrapper object that had to be implemented around the element
  // and so was removed.
  src.attachEvent(goog.events.getOnString_(type), proxy);
} 
```

（最后一行是抛出的那一行）

这不应该最终导致堆栈溢出吗？`else`如果我的对象继承`addEventListener`自，为什么它会进入分支`EventTarget`？在简单编译模式下，一切正常。这是如何工作的，为什么我只在高级编译模式下收到错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T15:27:00.837

你能添加更多代码吗？您的自定义活动是什么样的？基本上，来自 JS 的默认“addEventListener”被重新编写。IE没有实现addEventListener，只是attachEvent，返回的事件对象不是普通事件，而是[goog.events.BrowserEvent](http://closure-library.googlecode.com/svn/docs/class_goog_events_BrowserEvent.html)。

在高级编译模式下，编译器会展平（缩小）所有对象的属性，包括事件对象。您的自定义事件的属性可能会在高级编译模式下变平（这很可能是这里的情况），因此原型中不存在 attachEvent()。它可能已经变成 aE() 或类似的东西。在任何人能够提出真正有用的建议之前，先添加一些代码。

# c# - 如何在asp.net中区分服务器端的并发进度条请求

> ID：11522178
> 
> 赞同：1
> 
> 时间：2012-07-17T12:11:55.923
> 
> 标签：c#, asp.net

我实现了进度条，以便在后台处理视频时向用户显示完成状态。它在单个实例上运行良好。但是当两个并发视频进程开始时混淆了。

当两个不同的用户同时启动两个视频进程时，两个用户会看到视频进程 1 有时会看到混合进度状态，有时会看到另一个。

服务器端的视频进程使用静态变量启动。

```
public static MediaHandler _mhandler = new MediaHandler(); 
```

进度指示发送到页面通过

```
[WebMethod]
public static string GetProgressStatus()
{
    return Math.Round(_mhandler.vinfo.ProcessingCompleted, 2).ToString();
} 
```

进度条每隔几秒发送一次进度请求。

现在我的问题是如何设置一次只能针对一个实例的媒体处理程序对象。

例如，进度条 01 仅显示视频进程 01 的状态

和

进度条 02 仅显示视频进程 02 的状态

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:18:08.963

小心使用 ASP.NET 和静态 - 静态 whatchagot 在同一 appdomain 内的会话（用户）之间是全局的（根据类型给予或采取一些差异）。

将用户信息保存在会话存储中。或者，有点疯狂，有一个静态媒体处理程序对象使用会话 ID 处理多个会话，并使用会话 ID 查询其进度。虽然这听起来有点臭，但可能是您想要的，除非您希望每个会话都能够产生自己的编码。

请参阅[此答案](https://stackoverflow.com/questions/806210)（有关该主题的众多答案之一）。但是，Microsoft 知识库文章在 imo 中有点太不清楚了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:01:41.720

我建议您`Guid`为每个将用于编码生命周期的新编码请求生成一个。另外我建议`MediaHandler`不要是静态的，并且你的 new() 为每个编码任务增加一个。 `GetProgressStatus()`现在应该有一个 Guid 参数，以便您可以查询每个编码的进度。

您将需要持久性（数据库、静态列表、MSMQ 等）来跟踪您的`MediaHandler`实例和或当前处理编码的进度（如果它是串行完成的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T14:28:28.060

这是一个非常简单的方法：

您是否考虑过使用静态列表？

列表中的每个项目都是运行后台进程的处理程序的实例。您需要识别每个处理程序，最简单的方法是`Guid`为每个处理程序使用一个。

这是一个示例工作代码：

## 输出

![在此处输入图像描述](../Images/c2848919fe39104c831764345d72979a.png)

**如您所见，每个窗口都会触发一个新进程，并且每个窗口都会独立更新**

## ASPX

```
<head runat="server">
    <title></title>
    <script type="text/javascript" src="Scripts/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="Scripts/jquery.timer.js"></script>
    <script type="text/javascript">
        var timer;
        var currentProcess;
        function getProgress() {
            $.ajax({
                url: 'LongTimeOperations.aspx/GetStatus',
                data: '{"processID": "' + currentProcess + '"}',
                contentType: 'application/json; charset=utf-8;',
                dataType: 'json',
                type: "POST",
                async: true,
                cache: false,
                success: function (msg) {
                    $("#res").append("<br/>" + msg.d);
                    var r = msg.d;
                    if (typeof (r) === 'undefined' || r === null) {
                        timer.stop();
                    }
                },
                error: function (hxr) {
                    alert(hxr.responseText);
                }
            });
        }
        $(function () {
            $("#start").click(function () {
                $.ajax({
                    url: 'LongTimeOperations.aspx/StartProcess',
                    data: '{}',
                    contentType: 'application/json; charset=utf-8;',
                    dataType: 'json',
                    type: "POST",
                    async: true,
                    cache: false,
                    success: function (msg) {
                        alert(msg.d);
                        currentProcess = msg.d;
                        timer = $.timer(getProgress, 2000, true);
                    },
                    error: function (hxr) {
                        alert(hxr.responseText);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <input type="button" id="start" value="Start Process" />
        <p>
            <div id="res"></div>
        </p>
    </div>
    </form>
</body> 
```

## 背后的代码

```
 public static List<CurrentProcess> Processes = new List<CurrentProcess>();

    [WebMethod]
    public static Guid StartProcess()
    {
        Mutex mutex = new Mutex();
        mutex.WaitOne();

        var star = Thread.CurrentThread.ManagedThreadId.ToString();
        var p = new CurrentProcess(Guid.NewGuid());
        Processes.Add(p);

        var o = Observable.Start(() =>
        {
            var cap = p;
            for (int i = 0; i < 10; i++)
            {
                Thread.Sleep(2000);
                var cp = Processes.FirstOrDefault(x => x.ID == cap.ID);

                if (cp != null)
                    cp.Status = string.Format("Current Process ID: {0}, Iteration: {1}, Starting thread: {2}, Execution thread: {3}",
                        cp.ID.ToString(),
                        i.ToString(),
                        star,
                        Thread.CurrentThread.ManagedThreadId.ToString()
                        );
            }
            Processes.RemoveAll(x => x.ID == cap.ID);
        }, Scheduler.NewThread);

        mutex.ReleaseMutex();
        mutex.Close();

        return p.ID;
    }

    [WebMethod]
    public static string GetStatus(Guid processID)
    {
        var p = Processes.FirstOrDefault(x => x.ID == processID);

        if (p != null)
            return p.Status;

        return null;
    }
}

public class CurrentProcess
{
    public Guid ID { get; set; }

    public string Status { get; set; }

    public CurrentProcess (Guid id)
    {
        this.ID = id;
    }
} 
```

## 使用的库

*   [https://nuget.org/packages/jQuery](https://nuget.org/packages/jQuery)

*   [https://nuget.org/packages/Rx-Main/1.0.11226](https://nuget.org/packages/Rx-Main/1.0.11226)

*   [http://jchavannes.com/jquery-timer](http://jchavannes.com/jquery-timer)

在这个示例中，我使用 Rx 创建一个新线程，您可以将其更改为使用另一种方法

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T18:09:20.667

感谢您分享想法，但不幸的是，在使用几乎所有用户共享的静态对象的情况下，没有解决方案可以解决并发问题。现在我做了一些调整，解决了我的问题。

我没有使用单个静态对象，而是使用通用列表对象将所有并发进程对象存储在列表中。这是代码。

```
public static List<MediaHandler> _lst = new List<MediaHandler>(); 
```

其中 MediaHandler 是负责处理视频的类名。

以下函数负责启动视频处理

```
public static string EncodeVideo(string Source, string Published)
{   
 MediaHandler _mhandler = new MediaHandler(); 
 ..............
 ..............
 _mhandler.vinfo.ProcessID = Guid.NewGuid().ToString(); 
// unique guid to attach with each process to identify proper object on progress bar and get info request
// add media handler object in concurrent static list
 _lst.Add(_mhandler);
 return _mhandler.vinfo.ProcessID; // retuned unique identifier
} 
```

现在，必须将每个进度条请求进程 ID 发送给函数，以便发送正确视频处理对象的进度状态。

```
[WebMethod]
public static string GetProgressStatus(string ProcessID)
{
    string completed_process = "0";
    if (_lst.Count > 0)
    {
        int i = 0;
        for (i = 0; i <= _lst.Count - 1; i++)
        {
            if (_lst[i].vinfo.ProcessID == ProcessID)
            {
                completed_process = Math.Round(_lst[i].vinfo.ProcessingCompleted, 2).ToString();
            }
        }
    }

    return completed_process;
} 
```

一旦处理完成 100%，只需将所有视频信息存储在对象中并从静态并发列表中删除媒体处理程序对象。

```
if (_lst[i].vinfo.ProcessingCompleted >= 100)
{
    // remove from list of corrent processes if processes reach this point
    // store all information of completed process and remove it from list of concurrent processes
    // e.g
    VideoInfo current_uploaded_video_info = _lst[i].vinfo;
     _lst.Remove(_lst[i]);
} 
```

通过这种方式，无限数量的并发进程和进度条请求成为可能。

# c# - 突出显示 RichEditBox 中的选择

> ID：11522181
> 
> 赞同：1
> 
> 时间：2012-07-17T12:12:18.707
> 
> 标签：c#, microsoft-metro

我想知道是否有人在地铁中使用过 RichEditBox。我正在寻找如何根据搜索突出显示项目的选择。

我注意到有一个作为属性公开的文档对象，但这似乎是只读的，我似乎无法找到您将如何更新选择（我假设它与 SL / WPF 中的流文档相同）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T19:25:04.380

怎么样：

```
 Windows.UI.Text.ITextSelection selection = richEditBox.Document.Selection;
 selection.StartPosition = 0;
 selection.EndPosition = n; 
```

# c# - 存储 FileInfo 实体时 SisoDB 的 StackOverflow 异常

> ID：11522186
> 
> 赞同：1
> 
> 时间：2012-07-17T12:12:40.260
> 
> 标签：c#, nosql, document-database, sisodb

这个问题是指[SisoDB](http://sisodb.com/) - 一个用 C# 编写的基于 SQL-Server 的文档数据库。

我正在尝试将 FileInfo 实体存储到数据库中。为了避免（潜在的）循环引用，我为我需要的字段定义了接口：

```
interface IFileData
{
    Guid Id { get; set; }
    string DirectoryName { get; set; }
    long Length { get; set; }
    string Name { get; set; }
} 
```

然后尝试存储一个 FileInfo 实体：

```
 var db = @"Data Source=C:\Temp\sisotest.sdf".CreateSqlCe4Db();
        db.EnsureNewDatabase();

        var info = new FileInfo(@"c:\config.sys");
        db.UseOnceTo().InsertAs<IFileData>(info); 
```

这会导致 StackOverflow 异常。任何想法为什么会这样，我该如何克服这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T22:32:10.137

SisoDb 依赖于 ServiceStack.Text 的高性能和出色的序列化框架，我的第一个测试是查看它是否可以序列化 a `FileInfo`，而这`StackOverFlowException`似乎是生成的地方。您可以通过使用`SisoDb.Serialization`（ServiceStack.Text 的副本）或直接使用 ServiceStack.Text 来尝试此操作。

```
var json = info.ToJson(); 
```

截至目前`InsertAs<T>`需要`T`是一个接口。`Insert<T>`并且`InsertMany<T>`可以处理接口，但也需要实际的item来实现接口。

所以到目前为止，为了进一步：

**1)**用`IFileData`.

```
public class FileData
{
    public Guid Id { get; set; }
    public string DirectoryName { get; set; }
    public long Length { get; set; }
    public string Name { get; set; }
} 
```

**2）**通常应该没问题，但是由于`FileInfo`无法序列化为JSON，因此您需要：

**a)**告诉 ServiceStack 序列化程序（包含在 SisoDb.Serialization 中）不要包含导致反序列化问题的属性：

```
JsConfig<FileInfo>.ExcludePropertyNames = new[]{"Directory"}; 
```

**b)**或者你可以做`FileData`wrap a`FileInfo`

**c）**或者您可以制作一个自定义包装器`FileInfo2`来包装`FileInfo`.

```
class Program
{
    static void Main(string[] args)
    {
        var db = @"Data Source=D:\Temp\sisotest.sdf".CreateSqlCe4Db();
        db.EnsureNewDatabase();

        var info = new FileInfo2(@"D:\Temp\test.txt");
        db.UseOnceTo().InsertAs<FileData>(info);
    }
}

public class FileInfo2
{
    public FileInfo2(string cConfigSys)
    {
        var f = new FileInfo(cConfigSys);
        DirectoryName = f.DirectoryName;
        Length = f.Length;
        Name = f.Name;
    }

    public string DirectoryName { get; private set; }
    public long Length { get; private set; }
    public string Name { get; private set; }
}

public class FileData
{
    public Guid Id { get; set; }
    public string DirectoryName { get; set; }
    public long Length { get; set; }
    public string Name { get; set; }
} 
```

# forwarding - 主域上的 301 网络转发 - 子域可以指向其他地方吗？

> ID：11522188
> 
> 赞同：0
> 
> 时间：2012-07-17T12:12:51.743
> 
> 标签：forwarding, subdomain

请原谅这个问题的潜在愚蠢，但是当谈到这个领域架构云雀时，我有点菜鸟。如果“域架构”甚至是技术术语。反正我跑题了...

所以，我用谷歌搜索了这个问题，但我看不到我正在寻找的答案（也许它不存在，谁知道！？）情况是我托管了一个 .com 顶级域301 转发到非我托管的网络上的另一个站点。我可以设置一个子域，然后指向其他地方，无论是在我的主机本身上还是在网络上其他地方的某个其他站点上？

本质上，如果我设置了一个子域，它是否也会继承网络转发，如果是这样，我可以直接影响该子域指向的位置吗？

任何答案不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:50:01.730

在我尝试回答你的问题之前，让我有点挑剔:)

首先，您将**两种**不同的协议（[DNS] 和 [HTTP]）混淆并混合在一起，实际上维基百科甚至有一个专门的页面用于 HTTP 301 响应：[http](http://en.wikipedia.org/wiki/HTTP_301) ://en.wikipedia.org/wiki/HTTP_301 （但您应该阅读整个 shebang：（[Wikipedia, search for HTTP] 总是一个好的开始，[RFC 2616] 绝对是必须的，IETF RFC 不容易阅读，但互联网**是建立在它们之上的**）。

DNS 用于将*名称*`www.example.com`转换为*IP 地址*等，`192.168.0.1`以便在 Internet 上定位机器。*因此，DNS 是浏览器解析*URL所采取的第一步：但是一旦“机器名称”被单独的 DNS 服务翻译，并且它已成为 IP 地址，DNS 工作就结束了，并且它不再被使用/参与。

*然后*，当浏览器使用 HTTP 联系位于*该*机器上的 Web 服务器（在本例中为机器，在我们的示例中， `www.example.com`DNS 服务已将其转换为*IP 地址*`192.168.0.1`，因为操作系统只能使用*IP 地址*作为[internet socket] 的参数），并且仅在*那个*时候，Web 服务器而不是提供页面，而是以“错误”代码（实际上是带有不以数字开头的数字代码的“响应标头” “2”）。

只是这个错误代码实际上是用来告诉其他事情的：浏览器应该再次尝试“HTTP请求”，这次连接到*另一*台机器（并且，只要这个重定向是“永久的”而不是“临时的”（[ HTTP_307]），*新*地址应该被浏览器记住，它的缓存和历史）。

所以，如果你可以在第一台机器上设置 [redirection response header]，这意味着在第一台机器上有一个 Web 服务器被编程（给定一个特定的 URL 模式）来吐出一个重定向头，只要你可以控制这些重定向，您也可以将浏览器发送到您想要的任何地方，不仅可以将它们发送到 Internet 上的另一台机器，还可以发送到另一个 URL，甚至在同一个网站上（实际上这是代码 301 的原始预期用途，作为针对 [link rot] 的措施）。

基本上，您可以自由地做任何您想做的事情，或者更好的是，将它们发送到您想要的任何地方。

优点是显而易见的......缺点是您必须控制第一个 Web 服务器，并且访问的浏览器必须执行两个“GET 请求”才能到达预期的页面（这并不可怕，因为它看起来，因为 [RFC 2616] 建议浏览器（他们称之为*用户代理*）缓存并记住重定向（因为它是 *永久*的））。

* * *

**免责声明：**我被禁止发布超链接，但它们基本上都来自维基百科，所以，如果你愿意，你可以在维基百科上查看括号“[...]”中的单词......

# r - 从 r 中的现有变量创建新的变量类别

> ID：11522189
> 
> 赞同：2
> 
> 时间：2012-07-17T12:12:52.227
> 
> 标签：r, categories, categorization

这是数据：

```
var1 <- c("A", "B", "K", "L", "G", "M", "M")
var2  <- c("B", "A", "K", "L", "H", "M", "M")
mydata <- data.frame (var1, var2)
     var1 var2
1    A    B
2    B    A
3    K    K
4    L    L
5    G    H
6    M    M
7    M    M 
```

我想创建新的类别变量，如果任何行的值相等，那将是同一类别。因此逐行比较（所有可能的需要完成）。

例如 mydata[1,] 和 mydata[2,] 相等，因此它们在新变量类别中将具有相同的值，例如 1。在我打算做的事情中，这里有一个重要的观点。var1,var2的顺序可以是任意的，表示[var1,var2]的[A,B]与[B,A]相同

对不起，我无法解决的简单问题。

编辑：预期输出

```
 var1 var2   caterory
1    A    B   1 
2    B    A   1
3    K    K   2
4    L    L   3
5    G    H   4
6    M    M   5
7    M    M   6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:21:44.857

```
mydata$var3<-as.factor(apply(mydata,1,function(x){paste(x[order(x)],collapse='')}))

> mydata
  var1 var2 var3
1    A    B   AB
2    B    A   AB
3    K    K   KK
4    L    L   LL
5    G    H   GH
6    M    M   MM
7    M    M   MM

> str(mydata)
'data.frame':   7 obs. of  3 variables:
 $ var1: Factor w/ 6 levels "A","B","G","K",..: 1 2 4 5 3 6 6
 $ var2: Factor w/ 6 levels "A","B","H","K",..: 2 1 4 5 3 6 6
 $ var3: Factor w/ 5 levels "AB","GH","KK",..: 1 1 3 4 2 5 5 
```

# php - 哪些服务器设置可能导致 Flash 上传器返回错误#2038

> ID：11522192
> 
> 赞同：0
> 
> 时间：2012-07-17T12:13:05.500
> 
> 标签：php, flash, apache, webserver

我有一个 Flash 上传器，多年来一直运行良好，现在它突然返回一个`Error#2038`.

它实际上可以很好地上传前几个文件，然后出现错误，所以我认为我的服务器上发生了一些变化，导致了这个......

有人知道它可能是什么吗？...向任何响应者致敬...

# html5-canvas - 如何获得弹簧形线

> ID：11522194
> 
> 赞同：0
> 
> 时间：2012-07-17T12:13:11.740
> 
> 标签：html5-canvas

我正在尝试制作一个弹簧，但我不知道该怎么做。请指导我，这是我到目前为止所做的代码：http: [//jsfiddle.net/H6eRT/](http://jsfiddle.net/H6eRT/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:42:46.490

看看这个[教程](http://www.html5canvastutorials.com/labs/html5-canvas-harmonic-oscillator/)。它实际上是一个“振荡器”，但提供了一个不错的 2D 弹簧效果。

# jquery - 通过jQuery选择之前的第一个元素

> ID：11522195
> 
> 赞同：0
> 
> 时间：2012-07-17T12:13:25.363
> 
> 标签：jquery

我在选择不在同一标签中的另一个元素之前的第一个元素时遇到问题

例子：

```
<div>
    <p>Hello</p>
</div>

<div>
    <form>
        <input />
    </form>

    <div>
        ...
        <div class="thisone"></div>
    </div> 
```

无论页面的 HTML 结构是什么，我都想选择类“thisone”的 div 之前的第一个输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:21:43.283

你可以试试

```
var firstInput = $(".thisone").parent().prevAll().find("input:eq(0)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:54:08.347

另一种方式：

```
alert($('.thisone').parentsUntil('form').parents().find('input').val()); 
```

# awk - 使用 awk 从文本文件中提取特定字符的数量

> ID：11522196
> 
> 赞同：2
> 
> 时间：2012-07-17T12:13:40.013
> 
> 标签：awk

我有一个看起来像这样的文本文件。我想提取“A”和“E”字符的总数。

```
>pr1
FSVSQNNPAE
>pr2
MAKERAHSQ
>pr3
RRRDKINNWIVQL 
```

我想得到这样的输出

```
>pr1 
Total number of A - 1 
Total number of E - 1   

>pr2
Total number of A – 2
Total number of E - 1

>pr3
Total number of A – 0
Total number of E – 0 
```

我怎样才能用 awk 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:20:51.373

单程。当找到以 开头的行时`>`，读取下一行，将其保存在`str`变量中并计算每个字母的替换次数。

```
awk '
    $1 ~ /^>/ {
        getline str
        num_a = gsub( /A/, "", str )
        num_e = gsub( /E/, "", str )
        printf "%s\nTotal number of A - %d\nTotal number of E - %d\n\n", $0, num_a, num_e
    }
' infile 
```

输出：

```
>pr1                                                                                                                                                                                                                                         
Total number of A - 1                                                                                                                                                                                                                        
Total number of E - 1                                                                                                                                                                                                                        

>pr2                                                                                                                                                                                                                                         
Total number of A - 2                                                                                                                                                                                                                        
Total number of E - 1                                                                                                                                                                                                                        

>pr3                                                                                                                                                                                                                                         
Total number of A - 0                                                                                                                                                                                                                        
Total number of E - 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:48:09.250

**更新**：这将通过动态更改`FS`（[字段分隔符](http://www.staff.science.uu.nl/~oostr102/docs/nawk/nawk_23.html#SEC26)）来工作：

```
{
  if ($0 ~ /^>/)
    printf("\n%s\n", $0);
  else
  {
    FS="A"
    nl = $0;
    $0 = nl;
    print "Total number of A - ", NF-1; 

    FS="E"
    $0 = nl;
    print "Total number of E - ", NF-1;
  }
} 
```

给出：

```
>pr1
Total number of A -  1
Total number of E -  1

>pr2
Total number of A -  2
Total number of E -  1

>pr3
Total number of A -  0
Total number of E -  0 
```

* * *

*以前的解决方案*：

```
{
  if ($1 ~ /^>/)
    printf("\n%s\n", $0)
  else
  {
    print "total number of A - ", gsub(/A/,"A")
    print "total number of E - ", gsub(/E/,"E")
  }
} 
```

类似于@Birei的

# asp.net-mvc - Facebook ASP (MVC) SDK 发生了什么变化？

> ID：11522199
> 
> 赞同：0
> 
> 时间：2012-07-17T12:13:55.767
> 
> 标签：asp.net-mvc, facebook, facebook-c#-sdk

.net SDK 显然正在积极开发中。

那么为什么功能会被如此迅速地删除呢？他们是否被投入到不同的项目中？

曾经有用于 Web 特定功能（处理登录等）和特殊 MVC 功能（身份验证属性）的扩展 DLL，但现在它们无处可寻。

主客户端对象中甚至缺少一些功能，例如查询功能。

所以我的问题是——我应该自己开发这些功能，还是他们只是被转移到某个地方？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:45:56.097

根据维护 Facebook C# SDK 的人之一的说法：

> 6.0 版的总体目标是简单。我们正在减少 API 表面、改进文档并构建更好的示例，以便更轻松地构建适用于 .Net 或任何 Windows 风格的 Facebook 应用程序。

来源： http: [//ntotten.com/2012/02/07/facebook-c-sdk-road-map/](http://ntotten.com/2012/02/07/facebook-c-sdk-road-map/)

尽管 SDK 确实让我们在发出 Facebook 请求方面变得更轻松，但我还没有看到文档有太大的改进。

# perl - 无法超时

> ID：11522202
> 
> 赞同：0
> 
> 时间：2012-07-17T12:14:06.033
> 
> 标签：perl

我正在使用以下代码。我想在 20 秒后超时并关闭连接，尝试了警报但没有任何效果。这是我的代码：

```
my $socket_resp = IO::Socket::INET->new(Blocking => 0, LocalPort => $comm_port, Proto => 'udp', Timeout => 2);
    $socket_resp->setsockopt(SO_RCVTIMEO, SO_RCVTIMEO, 10);
    print "Waiting for Response On Port $comm_port\n";
    while (my $recieved_data = $socket_resp->getline()) {
        chomp($recieved_data);
        print "$recieved_data\n";
        if ($recieved_data =~ m/^done/i) {
            last;
        }
    }

    $socket_resp->close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:09:29.260

[正如另一个问题](https://stackoverflow.com/q/3570440/132382)中所建议的那样，将整个读取循环包装在警报中很可能会满足您的需求。您没有向我们展示代码，因此我们不知道您之前的尝试失败的原因。

也就是说，SO_RCVTIMEO 也可以工作，尽管有点不同。

在这种情况下，您需要一个*阻塞*而不是非阻塞套接字。您还希望`setsockopt`正确，这需要 SOL_SOCKET 和`pack()`ing a [`struct timeval`](http://pubs.opengroup.org/onlinepubs/7908799/xns/setsockopt.html)：

```
my $s = IO::Socket::INET->new(Proto => 'udp', ...);            # N.B.: blocking
$s->setsockopt(SOL_SOCKET, SO_RCVTIMEO, pack('l!l!', 20, 0));  # N.B.: pack()
while (<$s>) {
  ...
} 
```

现在，对于每个对 的底层调用，上述等待 20 秒`read()`，这可能超过返回给您的应用程序的*行数。*也就是说，如果我`"foo\n"`在一个数据报中发送您的应用程序然后什么也没发送，您将在 20 秒后超时。但是，我可能会发送`"f"`，然后等待 19 秒，`"o"`，然后等待 19 秒，`"o"`，然后等待 19 秒，......你明白了。）

# c# - 如何使用 WCF 和 MSMQ 在 C# 中实现单发布者和多订阅者异步消息系统？

> ID：11522206
> 
> 赞同：2
> 
> 时间：2012-07-17T12:14:22.583
> 
> 标签：c#, .net, wcf

我搜索了很多，但我仍然对 WCF 服务的 MSMQ 实现有一些疑问。因此我提出了这个问题。

我想实现单个发布者和多个订阅者的异步消息系统。我决定使用 WCF 服务作为发布者。作为多个订阅者，我在不同的机器上有多个窗口服务实例。

问：我想知道，如何将此模型实现为旧的 MSMQ 方法？

以下类型的对象将在消息中使用

```
[Serializable]
public class Message
{
public string Signal{get;set;}
public Guid Identifier{get;set;}
} 
```

在上述类中，Windows 服务将使用标识符来决定是否为该服务发布消息。

Q. 不同的窗口服务如何读取同一个队列？问：应该在哪里托管队列？问：是否可以将确认从 Window 服务（订阅者）发送到 WCF 服务（发布者）？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:42:19.313

在回答您的问题时：

> 我想知道，如何将此模型实现为旧的 MSMQ 方法？

首先，MSMQ 不支持开箱即用的发布订阅。

> 不同的窗口服务如何读取同一个队列？

所以在发布订阅中，没有一个队列。取而代之的是多个队列，实际上在 pub sub 场景中每个参与者一个。所以每个发布者都有一个队列，每个订阅者都有一个队列。

此配置使订阅者可以向发布者发送订阅/取消订阅消息，并允许发布者在评估订阅后根据需要向订阅者发送消息。

> 队列应该托管在哪里？

这些队列可以在本地托管给每个参与者，也可以一起托管在某个集群位置。

> 是否可以将确认从 Window 服务（订阅者）发送到 WCF 服务（发布者）？

[MSMQ 确实通过响应队列](https://msdn.microsoft.com/en-us/library/ms711345(v=vs.85).aspx)和[相关 ID](https://msdn.microsoft.com/en-us/library/ms707132(v=vs.85).aspx)消息头字段为请求/响应消息传递提供了基本支持，尽管这并不是真正的开箱即用（因为您需要使用这些值并针对这些值进行编程）

如果您不需要使用 WCF，则有一个相当成熟的平台，称为[nservicebus](http://www.nservicebus.com)，它位于 MSMQ 之上，并为您需要的所有消息传递模式提供支持。

# node.js - MongoDB 是否存储相关文档的链接或副本

> ID：11522210
> 
> 赞同：0
> 
> 时间：2012-07-17T12:14:33.933
> 
> 标签：node.js, mongodb, mongoose

使用猫鼬和 NodeJS，假设我有一个“汽车”和一个“车轮”模式。这辆车存储了一系列轮子。

```
var Wheel = new Schema({
    color : { type: String },
    timestamp : { type: Date }
});

var Car = new Schema({
    wheels : [Wheel],
    timestamp : { type: Date }
}); 
```

汽车文档是否包含这些车轮的静态副本，或者车轮是否存储为链接（这将反映车轮在查找时的最新状态，即使车轮在汽车创建后发生了变化）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:10:49.970

这里模式设计的广泛选择是[嵌入与链接](http://www.mongodb.org/display/DOCS/Schema+Design)。这两者都是通过使用约定实现的，在服务器实现意义上并不是真正的“功能”（即 MongoDB 2.0 服务器没有实现任何引用或关系查找功能）。

要明确条款：

*   *嵌入*是在 BSON 文档中嵌套对象和数组。

*   *链接*（又名*[数据库引用](http://docs.mongodb.org/manual/applications/database-references/)*或*DBRefs*）是文档之间的引用。

如果您像原始示例一样*嵌入*，那么您已经创建了一个子文档（或如您所描述的，一个“静态副本”）。与存储在其他地方的信息没有关系。

如果您*链接*，您正在添加一个引用，该引用是另一个集合中文档的主键。如果您想将此引用合并到文档中，则需要额外的数据库查询。根据您使用的客户端驱动程序，可能会有帮助程序自动执行此操作；您也可以手动进行相同的查找。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:43:07.813

我正在以另一种方式做到这一点：

```
var Car = new Schema({
    wheels : [Schema.ObjectId],
    timestamp : { type: Date }
}); 
```

然后假设我有 4 个轮子和一辆汽车，我这样做：

```
car.wheels.push(wheel1._id);
car.wheels.push(wheel2._id);
car.wheels.push(wheel3._id);
car.wheels.push(wheel4._id); 
```

我认为 Wheels 需要先保存，才能拥有 _id 属性。

然后在 MongoDB 中，属性 Car.wheels 是一个 ObjectID 数组（因此是对轮子的引用），我可以在 Javascript 中做到这一点。

```
car.wheels[0].color 
```

我想它会以与您的模式相同的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:54:50.320

我想在你的情况下，它是汽车中的静态车轮。要使用参考，请使用 dbref 作为：

`var Car = new Schema({
wheels : [ { type : Schema.ObjectId, ref : 'Wheel' } ],
timestamp : { type: Date } });`

# sql - 测试 MS ODBC SQLReturn 值

> ID：11522211
> 
> 赞同：0
> 
> 时间：2012-07-17T12:14:38.340
> 
> 标签：sql, winapi, odbc

是否可以使用标准 WinAPI /宏测试这些值（从类似的调用返回`SQLGetConnectAttr`）是否成功/失败，以避免检查单个值？如果没有，这些宏是否有特殊的 SQL 变体？`FAILED``SUCCEEDED`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:11:11.620

我不认为这样的宏存在。`SQLxxx()`函数返回各种值，如果返回值指示成功或失败，则取决于应用程序。这种值的一个例子是`SQL_NO_DATA_FOUND`。是成功还是失败？在我看来，这取决于应用程序和上下文。

# objective-c - 扩展 ObjC 类而不修改其 .m 或 .h ？JS 原型风格？

> ID：11522212
> 
> 赞同：0
> 
> 时间：2012-07-17T12:14:38.157
> 
> 标签：objective-c, class, methods

是否可以在不修改 .h 或 .m 文件的情况下向 ObjC 类添加方法？

例如，在 JavaScript 中，您可以从任何地方向原型添加方法，例如向 Array 原型添加方法：

```
Array.prototype.stackOverflow = function(parameters); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:17:49.750

您可以使用类别。

[Objective-C 编程语言：类别和扩展](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:20:13.097

您可以为此使用 Objective-C 类别。

检查此链接： http: [//macdevelopertips.com/objective-c/objective-c-categories.html](http://macdevelopertips.com/objective-c/objective-c-categories.html)

这是从该链接中获取的示例（注意我没有写这部分）

* * *

例如，下面我定义了一个向 NSString 类添加方法的类别。reverseString 方法为所有 NSString 对象添加了反转字符串中字符的能力。

```
@interface NSString (reverse)
-(NSString *) reverseString;
@end 
```

与@interface 声明一样，@implementation 部分的变化仅在于将类别名称添加到定义中。下面是上面定义的接口的实现。请注意在这两种情况下我如何添加 (reverse) ，这是我分配的类别名称。

```
@implementation NSString (reverse)

-(NSString *) reverseString
{
// SNIP: implementation of reverse string
return reversedStr;
}

@end 
```

# c# - C# Entity LINQ 返回错误和重复的值

> ID：11522214
> 
> 赞同：3
> 
> 时间：2012-07-17T12:14:50.667
> 
> 标签：c#, linq, entity

我使用以下代码：

```
List<vw_GetIMeasurements> Imeasurements = context.vw_GetIMeasurements.Where(f => f.MEMBERID == userID).Distinct().ToList(); 
```

这将返回一个包含 12 个值的列表，但这些值始终相同（即使它们不在数据库中。（即使它们不同也应该解决这个问题）

![问题的视觉](../Images/3adcbbb1f898907d5a2251d7f6643b5f.png)

D B ：

![数据库映像](../Images/acc5f29e2bb6df629d8f142403e95e93.png)

返回的原始值也是错误的。这个问题的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T12:42:39.857

我以前遇到过这个问题 - 原来视图没有唯一`entity keys`集 - 确保由实体框架自动创建的视图的主键确实是唯一的......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T11:18:55.603

I had a similar issue - the database view looked fine in SQL server but when debugging, duplicate rows were appearing where rows shared a particular attribute value.

I found that one of the important unique keys was from a outer join table - therefore had the potential to be null - and the model was not assigning as unique.

I was able to fix this problem by setting this field to ISNULL(field, '') - ensuring that a value is always returned - and upon updating, the model correctly interprets the field as unique and as part of a compound key and the rows returned correctly.

I know that one might argue the view design is at fault (i.e. I should not be using an outer join), but in this instance, there was a specific need for the outer join. The fix works because the compound key is still unique even if "" is returned multiple times.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:25:14.047

也许尝试像这样更简单的语法

```
var measure = from f in context.vw_GetIMeasurements
              where  f.MEMBERID == userID
              select f; 
```

这种事情对我有用..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:15:33.507

这个问题实际上就是理查德所描述的。但是我无法选择正确的“唯一密钥”，所以这导致了更多问题。

我通过创建一个定制的类并在 SQL 中创建它来解决我的问题。我还将我的选择限制为 3 列中的 2 列。

```
List<Measurement> result = (from f in context.vw_GetIMeasurements where f.MEMBERID == userID select new Measurement { Category = f.atcmCATEGORYCODEID, Size = f.imMeasurementNumber }).ToList(); 
```

测量是在自制类的情况下。

# ruby-on-rails - 在模型中使用 attr

> ID：11522217
> 
> 赞同：0
> 
> 时间：2012-07-17T12:14:58.213
> 
> 标签：ruby-on-rails, ruby

嘿，所以我试图在模型中使用模型的 :id 属性，但我无法弄清楚。

```
 require 'zip/zip'
 require 'zip/zipfilesystem'

 class Lesson < ActiveRecord::Base
 attr_accessible :attachment, :course_id, :goal, :title, :assets_attributes
 belongs_to :course
 has_many :assets, :dependent => :destroy
 accepts_nested_attributes_for :assets, :reject_if => lambda { |a| a[:asset_file_name].blank? }

 def bundle
 bundle_filename = 'public/attachments/#{@lesson.id}.zip'

 Zip::ZipFile.open(bundle_filename, Zip::ZipFile::CREATE) {
   |zipfile|
   self.assets.collect {
     |asset|
       zipfile.add( "#{asset.id}", "public/attachments")
     }
 }

File.chmod(0644, bundle_filename)
self.save
end
end 
```

我在 bundle_filename = 'public/attachments/#{@lesson.id}.zip' 中遇到问题

特别是@lesson.id 部分。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:19:14.360

您应该使用双引号来评估字符串中的 ruby​​ 对象`#{}`。

```
bundle_filename = "public/attachments/#{@lesson.id}.zip" 
```

编辑：您应该`@lesson`在某个地方定义或仅使用`self.id`您正在寻找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:38:03.713

@lesson 似乎没有在任何地方设置。也许您的意思是将@lesson 作为您的课程课程的一个实例？如果是这样，那么 @lesson 将是 self 并且您的代码将读取

```
bundle_filename = "public/attachments/#{self.id}.zip" 
```

要不就

```
bundle_filename = "public/attachments/#{id}.zip" 
```

# ruby-on-rails-3 - 使用 rails 记录信息

> ID：11522223
> 
> 赞同：1
> 
> 时间：2012-07-17T12:15:12.113
> 
> 标签：ruby-on-rails-3, logging

从 django/python 开始，我在让 rails logger 记录我想要的所有信息时遇到了一些麻烦。我想知道如何/是否可以实现以下目标：

1.  在日志格式（ter）中包含特定**文件、函数名和**日志语句本身所在的行。本质上相当于`LOG_MSG_FORMAT = '%(asctime)s %(levelname)s %(filename)s:%(funcName)s(%(lineno)d) : %(message)s'`python logger？
2.  能够通过类似于 django [request logging middleware](http://djangosnippets.org/snippets/2624/)的方式记录所有请求。特别是，能够记录每个请求的**用户名**（如果已登录）。

我错过了一些明显的东西吗？还是这需要（很多）自定义代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T16:10:55.487

我刚刚发现这个 railtie gem 可能会有所帮助，尽管我认为将用户名附加到日志需要一些“自定义代码”。请参阅有关记录特定控制器和模型的自述文件部分。

[测井导轨](https://github.com/TwP/logging-rails)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:17:24.053

我不知道如何获取文件、函数和行号，但是从 application_controller 记录很容易：

```
class ApplicationController < ActionController::Base
  before_filter :log_user
  def log_user
    if current_user
      Rails.logger.info "Processing Request for #{current_user.name}"
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-20T22:21:17.593

只是添加一个快速注释，以防这对某人有用：

lograge [gem](https://github.com/roidrage/lograge)使 rails 日志与 django 非常相似，此外还允许非常简洁的自定义，[添加](https://github.com/roidrage/lograge/issues/10)远程 ip 地址、current_user 等参数。

它还减少了渲染布局的冗长，无论如何我发现这对生产来说是不必要的。它还与@lukewendling提到的[logging-rails railtie配合得很好。](https://github.com/TwP/logging-rails)

可悲的是，我仍然找不到任何显示文件/函数/行号的东西，就像你可以用 django 轻松完成的那样，但我想这实在是太难了。

# javascript - 如何使用 Javascript 获取图像的宽度和高度？

> ID：11522227
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:15:30.350
> 
> 标签：javascript, html, dom

我只想根据图像宽度和高度从 HTML DOM 加载某些图像。

我不知道如何使用 JavaScript 访问图像的宽度和高度属性。

这必须在任何浏览器下运行。

我的应用程序是一个小书签，因此所有图像都会在用户启动小书签时加载。所以，我只会扫描 DOM，获取所有 img srv 值，然后使用它们。诀窍是我不想要所有图像，只想要与我想要的尺寸相匹配的图像。

到目前为止，我有这段代码，它从 DOM 获取所有图像：

```
var imgObj = document.getElementsByTagName('img');

for(var i=0;i<imgObj.length;i++)
{
imgsList[i] = imgObj[i].getAttribute('src');
if(consoleLog)console.log(imgsList[i]);
}

return images = imgObj.length; 
```

我的问题在这里得到了解决：[如何使用 JavaScript 获取图像大小（高度和宽度）？](https://stackoverflow.com/questions/623172/how-to-get-image-size-height-width-using-javascript)

但我不知道如何使我的代码适应 img.clientWidth

是 imgsList[i].clientWidth 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:18:44.560

`imgObj[i].clientWidth`,`imgList`仅包含`src`属性列表。

在使用图像的任何宽度和高度时要小心，因为它们会异步加载到浏览器中。这意味着当 DOM 加载时，宽度和高度将为 0。只有在图像本身完成加载后，元素才会有适当的宽度和高度设置。

为了解决这个问题，您可以使用加载处理程序，一旦图像完成加载，就会执行其回调。

同样，虽然有点奇怪的行为是缓存图像的浏览器不会再次调用此加载函数（至少在 jQuery 中不会），因此您需要确保在 DOM 加载回调中对缓存版本进行任何宽度检查。

您可以在标准 javascript 中执行此操作，但是作为示例，由于我前面有一个 jQuery 示例，我之前正在处理它，我将向您展示如何在 jQuery 中完成它。

假设图像有一个`id=imageid`

```
function checkWidths() {
    //do anything you want here

    //jQuery uses the .width and .height functions to get the appropriate attributes of an element, these return a value without the px % etc.  To get the actual css use .css('width') instead.
}

$(document).ready(function() {
    if($('#imageid').width() > 0)
        checkWidths();
});

$('#imageid').load(function() {
    checkWidths();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:20:23.233

要知道图像的尺寸，您需要：

*   加载图像（如果您的脚本在 onload 回调中执行，则 clientWidth 可以）
*   将它们指定为属性 ( `<img src=... width=33>`)。在这种情况下使用 `imgObj[i].getAttribute('width');`

请注意，如果您想重新加载图像并避免所有缓存问题，最简单的方法是更改​​其 URL，例如：

```
var srcbase = imgObj.getAttribute('src').split('?')[0];
imgObj.src = srcbase + '?time='+(new Date()).getTime(); 
```

（这假设图像由路径定义，直到“？”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:44:11.027

伙计们，这就是它，它工作得很好。

```
populateImgsList : function()
    {

    var imgObj = document.getElementsByTagName('img');

    var j = 0;

    for(var i=0;i<imgObj.length;i++)
    {

    if(consoleLog)console.log('w '+imgObj[i].clientWidth+' h: '+imgObj[i].clientHeight);

    if( (imgObj[i].clientWidth>100) && (imgObj[i].clientHeight>100) )
    {

    imgsList[j] = imgObj[i].getAttribute('src');
    if(consoleLog)console.log(imgsList[j]);

    j++;

    }

    }

    return images = imgList;

    }, 
```

# svg - 当图像是另一个 SVG 文件时缩放 SVG 图像元素

> ID：11522228
> 
> 赞同：1
> 
> 时间：2012-07-17T12:15:32.803
> 
> 标签：svg

我正在制作一个工具，我需要将图像添加到现有的 SVG 中。该图像既可以是位图文件，也可以是另一个 SVG 文件。所以我使用元素来做，像这样：

```
<image x="100" y="100" width="200" height="100" preserveAspectRatio="none" xlink:href="image.jpg"> 
```

我需要此图像适合我指定的宽度/高度（我不关心图像的原始大小），这就是我将 preserveAspectRatio 设置为“none”的原因。它适用于位图。但是，当我对另一个 SVG 图像尝试相同的代码时，它不会被缩放。preserverAspectRatio 描述说应该在这个图像元素上设置 viewBox，但是它没有帮助 - 图像没有缩放。

这是据我所知应该可以工作的代码：

```
<image x="100" y="100" width="200" height="100" viewBox="0 0 200 100" preserveAspectRatio="none" xlink:href="clock.svg"> 
```

这是clock.svg的来源：

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Map">
<path d="M8.179,20.115c-0.478,0.277-0.642,0.889-0.365,1.366c0.275,0.479,0.889,0.642,1.365,0.366c0.479-0.275,0.643-0.888,0.367-1.367C9.27,20.004,8.658,19.84,8.179,20.115zM9.18,12.239c-0.479-0.276-1.09-0.112-1.366,0.366s-0.111,1.09,0.365,1.366c0.479,0.276,1.09,0.113,1.367-0.366C9.821,13.126,9.657,12.516,9.18,12.239zM8.625,17.043c-0.001-0.552-0.448-0.999-1.001-1c-0.553,0-1,0.448-1,1c0,0.553,0.449,1,1,1C8.176,18.043,8.624,17.596,8.625,17.043zM16.312,3.957V3.031h1c0.275,0,0.5-0.225,0.5-0.5v-0.5c0-0.275-0.225-0.5-0.5-0.5h-3.625c-0.275,0-0.5,0.225-0.5,0.5v0.5c0,0.275,0.225,0.5,0.5,0.5h1v0.926C7.819,4.381,2.376,10.068,2.374,17.042C2.376,24.291,8.251,30.166,15.5,30.169c7.249-0.003,13.124-5.878,13.125-13.127C28.624,10.067,23.181,4.38,16.312,3.957zM15.5,27.166C9.909,27.157,5.385,22.633,5.375,17.042C5.385,11.451,9.909,6.927,15.5,6.917c5.59,0.01,10.115,4.535,10.124,10.125C25.615,22.633,21.091,27.157,15.5,27.166zM12.062,22.998c-0.478-0.275-1.089-0.111-1.366,0.367c-0.275,0.479-0.111,1.09,0.366,1.365c0.478,0.277,1.091,0.111,1.365-0.365C12.704,23.887,12.54,23.275,12.062,22.998zM12.062,11.088c0.479-0.276,0.642-0.888,0.366-1.366c-0.276-0.478-0.888-0.642-1.366-0.366s-0.642,0.888-0.366,1.366C10.973,11.2,11.584,11.364,12.062,11.088zM22.822,13.971c0.478-0.275,0.643-0.888,0.366-1.366c-0.275-0.478-0.89-0.642-1.366-0.366c-0.479,0.278-0.642,0.89-0.366,1.367C21.732,14.083,22.344,14.247,22.822,13.971zM15.501,23.92c-0.552,0-1,0.447-1,1c0,0.552,0.448,1,1,1s1-0.448,1-1C16.501,24.367,16.053,23.92,15.501,23.92zM19.938,9.355c-0.477-0.276-1.091-0.111-1.365,0.366c-0.275,0.48-0.111,1.091,0.366,1.367s1.089,0.112,1.366-0.366C20.581,10.245,20.418,9.632,19.938,9.355zM23.378,16.042c-0.554,0.002-1.001,0.45-1.001,1c0.001,0.552,0.448,1,1.001,1c0.551,0,1-0.447,1-1C24.378,16.492,23.929,16.042,23.378,16.042zM22.823,20.115c-0.48-0.275-1.092-0.111-1.367,0.365c-0.275,0.479-0.112,1.091,0.367,1.367c0.477,0.275,1.089,0.112,1.365-0.366C23.464,21.004,23.3,20.391,22.823,20.115zM15.501,8.167c-0.552,0-1,0.448-1,1l-0.466,7.343l-3.004,1.96c-0.478,0.277-0.642,0.889-0.365,1.366c0.275,0.479,0.889,0.642,1.365,0.366l3.305-1.676c0.055,0.006,0.109,0.017,0.166,0.017c0.828,0,1.5-0.672,1.5-1.5l-0.5-7.876C16.501,8.614,16.053,8.167,15.501,8.167zM18.939,22.998c-0.479,0.276-0.643,0.888-0.366,1.367c0.275,0.477,0.888,0.642,1.366,0.365c0.478-0.276,0.642-0.889,0.366-1.365C20.028,22.886,19.417,22.723,18.939,22.998zM11.197,3.593c-0.836-1.04-2.103-1.718-3.541-1.718c-2.52,0-4.562,2.042-4.562,4.562c0,0.957,0.297,1.843,0.8,2.576C5.649,6.484,8.206,4.553,11.197,3.593zM27.106,9.014c0.503-0.733,0.8-1.619,0.8-2.576c0-2.52-2.043-4.562-4.562-4.562c-1.438,0-2.704,0.678-3.541,1.717C22.794,4.553,25.351,6.484,27.106,9.014z" fill="#000000" fill-opacity="1" stroke="#DDDDDD" stroke-width="0.5" stroke-opacity="1"/> 
```

我希望这个时钟被缩放并占据所有 200x100 矩形，但事实并非如此。如果有人能提供帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:31:32.640

从SVG 1.1 规范中的[“图像”元素定义：](http://www.w3.org/TR/SVG11/struct.html#ImageElement)

> 评估“preserveAspectRatio”属性时使用的“viewBox”属性值由**引用的内容**定义。对于明确标识 viewBox 的内容（例如，在最外层 svg 元素上具有 'viewBox' 属性的 SVG 文件）应该使用该值。对于大多数光栅内容（PNG、JPEG），应该使用图像的边界（即，'image' 元素有一个隐含的'viewBox' '0 0 raster-image-width raster-image-height'）。**如果没有现成可用的值（例如，最外层 svg 元素上没有“viewBox”属性的 SVG 文件），“preserveAspectRatio”属性将被忽略**，并且只有视口的“x”和“y”属性导致的转换是用于显示内容。

规范告诉你的是引用的 svg（你的clock.svg）应该定义它的坐标系（又名'viewBox'）。

# python - 在python中处理500万个key-value数据。NoSql会解决吗？

> ID：11522232
> 
> 赞同：1
> 
> 时间：2012-07-17T12:15:46.250
> 
> 标签：python, nosql

我想得到关于使用 No-SQL 数据存储来满足我的特定要求的建议。

**让我解释一下：** 我必须处理五个 csv 文件。每个 csv 包含 500 万行，并且每个 csv 中都显示了公共 id 字段。所以，我需要通过迭代 500 万行来合并所有 csv。所以，我使用 python 字典来合并基于公共 id 字段的所有文件。但这里的瓶颈是你不能用 python-dictionary 将 500 万个键存储在内存中（< 1gig）。所以，我决定使用No-Sql。我认为处理500万键值存储可能会有所帮助。但我对此没有明确的想法。

无论如何，我们不能减少迭代，因为我们有五个 csv，每个都必须迭代以更新值。

是否有一个简单的步骤？如果这是这种方式，你能给我 No-Sql 数据存储来处理键值对吗？

**注意：**我们也有列表类型的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:08:14.417

If the CSV is already sorted by id you can use the [merge-join algorithm](http://en.wikipedia.org/wiki/Sort-merge_join). It allows you to iterate over the single lines, so you don't have to keep everything in memory.

Extending the algorithm to multiple tables/CSV files will be a greater challenge, though. (But probably faster than learning something new like Hadoop)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:36:10.243

如果这只是一个一次性过程，您可能只想设置一个内存超过 1G 的 EC2 节点并在那里运行 python 脚本。500 万个项目并不多，Python 字典应该能够处理它。在这种情况下，我认为您不需要 Hadoop。

您还可以尝试通过在多次运行中重新排序项目来优化您的脚本，而不是运行使用迭代器同步的 5 个文件，这样您就不必同时将所有内容保存在内存中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:22:33.877

据我了解，您想从 5 个输入文件中合并大约 500,000 个项目。如果您在一台机器上执行此操作，处理 1g 数据可能需要很长时间。所以我建议检查使用Hadoop的可能性。[Hadoop](http://hadoop.apache.org/)是一个批处理工具。通常 Hadoop 程序是用 Java 编写的，但您也可以用[Python](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)编写它。

我建议检查使用 Hadoop 在集群中处理数据的可行性。您可以使用 HBase（列数据存储）来存储您的数据。这是一个想法，检查它是否适用于您的问题。

如果这没有帮助，请提供有关您要解决的问题的更多详细信息。从技术上讲，您可以使用任何语言或数据存储来解决此问题。但是您需要找到哪个解决方案最好（在时间或资源方面）以及您使用/学习新工具/数据库的意愿。

入门的优秀教程：http: [//developer.yahoo.com/hadoop/tutorial/](http://developer.yahoo.com/hadoop/tutorial/)

# jquery - Jqgrid，添加后不清除某些字段

> ID：11522233
> 
> 赞同：1
> 
> 时间：2012-07-17T12:15:46.560
> 
> 标签：jquery, jqgrid, jqgrid-asp.net

我之前实际上已经问过这个问题，但当时并没有取得成功，但我希望这一次我会更幸运。

我有一个场景，我需要在添加保存操作后保持 jqgrid 模式上的某些字段保持填充状态。（目前所有字段都被清除/重置为默认状态）。它们对用户不可见，因此当我再次尝试保存时，验证会提示我输入日期/经理/班次。我已经尝试过各种尝试来纠正这个问题以取得成功

我知道这是可能的，因为当一个人编辑并单击保存时，表单不会被清除。（我希望我可以在保存后有选择地执行此操作）

我的屏幕是这样的。

**添加时**

![在此处输入图像描述](../Images/83207a230893977d4aab7761605abfe5.png)

**编辑时**

![在此处输入图像描述](../Images/4e601662533a6fdf6bae077a78c6ae5d.png)

这个想法是，当用户捕获时，他们不需要一直更新日期、班次和经理，因为一次性针对这些键集捕获了多条记录，并且不得不重新选择会很烦人每次去的那些价值观。

当添加发生时，表单值通过 beforeShow 钩子更新。（并且编辑它会被忽略，因为我需要使用网格中的值，（以防出错）

**代码片段**

```
 DataGrid.navGrid('#pager', { edit: true, add: true, del: true, search: true },
             editItems,
            {
                width: 600, 
                url: URL_add,
                data: submit_data,
                afterSubmit: function (result) {
                    success:
                    {
                        if (onAfterSubmit != null)
                            onAfterSubmit(result);

                        return Notify("success", result.responseText);
                    }
                    fail: { return Notify("error", result.responseText); }
                },                
                recreateForm: true,
                beforeShowForm: addBeforeShowOptions,
                modal: false,
                overlay: false,
                jqModal: true
            },
...

    var addBeforeShowOptions = function (form) {
        formPattern(form);
        $('#Date', form).val($('#main_Date').val());
        $('#Shift', form).val($('#main_Shift').val());
        $('#ManagerID', form).val($('#main_Manager').val());

        $('#tr_Date', form).hide();
        $('#tr_ManagerID', form).hide();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T11:39:02.423

我找到了另一种解决此问题的方法，而不是在编辑期间将值注入模式中，而是在使用 serializeEditData 钩子提交数据之前更新 postData。

就我而言，它基本上就像

```
function (postData) {
    postData.Date = $('#main_Date').val();
    postData.DateShift = $('#main_Shift').val();
    postData.ManagerID = $('#main_Manager').val();
} 
```

# c# - WPF ListView 项目重复

> ID：11522234
> 
> 赞同：4
> 
> 时间：2012-07-17T12:15:54.050
> 
> 标签：c#, wpf, listview

我的程序遇到了一个独特的问题。让我解释一下这个场景。

我有一个绑定到最初为空的 ObservableCollection 的 ListView。可观察集合从 IAsync 服务获取数据。

加载后，列表视图显示项目的副本。我使用 snoop 检查绑定并确认它绑定到的项目源有 2 个项目，但列表视图创建了 4 个项目。同样有趣的是，重复的条目绑定到正确的项目。

任何人都可以对此事有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:09:43.290

Try turning off virtualization

[VirtualizingStackPanel.IsVirtualizing](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizingstackpanel.isvirtualizing.aspx)

Or you may be able to virtualize but turn off recycling

[VirtualizationMode Enumeration](http://msdn.microsoft.com/en-us/library/system.windows.controls.virtualizationmode.aspx)

# tinymce - 调整标题上tinymce按钮的宽度？

> ID：11522235
> 
> 赞同：1
> 
> 时间：2012-07-17T12:15:55.947
> 
> 标签：tinymce, wysiwyg

我使用下面的代码片段来显示 tinymce 上的不同功能，如前景色、背景色、牛市等

```
 $(function() {
  appendTinyMCE();
 function appendTinyMCE(){
    tinyMCE.init({

        // General options
        mode : "textareas",
        theme : "advanced",
        plugins : "preview",
        // Theme options
        theme_advanced_buttons1 : "forecolor,backcolor,|,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,|,formatselect,fontselect,fontsizeselect,sub,sup,|,bold,italic,underline,strikethrough",
        theme_advanced_buttons2 : "",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true

});} 
```

});

但是当我在浏览器上看到 tinymce 时，大约 25% 的 tinymce 编辑器标题宽度仅由两个按钮占用，即前景色、背景色，看起来很奇怪，尽管我提到了 theme_advanced_toolbar_align ：“左”。这是图像。

![在此处输入图像描述](../Images/5d94d5428bd0a991fd3f13a8a2d46a70.png)

**我们可以调整 tinymce 按钮，使每个按钮的宽度一致吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:23:50.770

您可以使用 tinymce init 配置参数[editor_css](https://www.tinymce.com/docs/configure/content-appearance/)调整 tinymce 工具栏的 css 。

# objective-c - 允许用户在非矩形 UIView 内容之外进行交互

> ID：11522241
> 
> 赞同：1
> 
> 时间：2012-07-17T12:16:21.860
> 
> 标签：objective-c, uiview, uiimageview, cgpath, user-interaction

在显示圆形图像（需要保持交互）的 UIView 上，您将如何防止圆形之外的区域接收任何用户交互，以便该视图下的其他 ui 仍然处于活动状态？

我尝试用 CGPath 掩盖 UIView 但这没有帮助。![在此处输入图像描述](../Images/aef74b2b2625288270f3805828eed3f0.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:44:36.403

由于触摸事件在视图层次结构中冒泡，作为 UIView，您可以检查触摸事件是否与您相关，如果它不只是返回 NO 并且该事件将向下传递到层次结构中的下一个 UIView

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event
{
    for (UIView * view in [self subviews]) {
        if ([view pointInside:[self convertPoint:point toView:view] withEvent:event]) {
            return YES;
        }
    }
    return NO;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:22:42.013

不要将任何接收 UI 事件的元素放在圈外。如果这是不可避免的，那么只要您需要，就禁用圆圈外的所有元素。

# hadoop - 通过分布式缓存hadoop添加jar

> ID：11522242
> 
> 赞同：2
> 
> 时间：2012-07-17T12:16:26.057
> 
> 标签：hadoop

我正在使用分布式缓存将 .jar 文件添加到类路径中：

```
DistributedCache.addFileToClassPath(new Path("binary/tools.jar"), job.getConfiguration()); 
```

我不确定 addFileToClassPath() 是否是用于将 .jar 文件添加到类路径的正确 API。当我尝试从映射器中检索类路径时，我看不到添加的 jar。类路径包含作业的工作目录（jobcache dir），但不包括通过分布式缓存分发的 jar。

```
Properties prop = System.getProperties();
System.out.println("The classpath is: " + prop.getProperty("java.class.path", null)); 
```

我也试过 addArchiveToClassPath() ..它没有工作..

我错过了什么吗？

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T01:00:32.623

问题出在路径上。`addFileToClassPath()`或`addArchiveToClassPath()`仅将绝对路径作为输入。binary/tools.jar 是相对的，因此不起作用。我需要指定路径，因为`/user/<username>/binary/tools.jar..` 现在它工作正常。甚至`hdfs://<hostname>:port/user/..`失败。

谢谢你们..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:52:30.440

您要添加到本地文件系统上的类路径中的 jar 还是 HDFS 中的 jar？

DistributedCache 期望您命名的路径位于 HDFS 中

# c# - 自定义属性调用

> ID：11522243
> 
> 赞同：0
> 
> 时间：2012-07-17T12:16:29.807
> 
> 标签：c#, custom-attributes, invocation

我正在尝试使用调试器在调用方法属性时停止，但我似乎永远不会到达断点。我在这里错过了什么吗？

```
[SecurityImpl("test")]
public void test()
{

}

[AttributeUsage(AttributeTargets.All)]
public class SecurityImplAttribute : Attribute
{
    public SecurityImplAttribute(string test)
    {
        //Break Point Here    
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:20:06.887

属性只是*元数据*。除非您使用反射 ( ) ，否则它们实际上不会被*创建为实例。*`GetCustomAttributes`您不能使用属性来添加任意代码调用，除非您使用 PostSharp 等 AOP 框架，或者正在使用**检查**特定类别属性并显式实例化/调用它们的框架（如 ASP.NET MVC 所做的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:23:44.560

属性只是代码的元数据。它们不会自动执行。如果你想使用一些元数据，你应该手动获取并执行它。在您尝试获取方法自定义属性时，将执行属性的构造函数：

```
object[] attributes = methodInfo.GetCustomAttributes(true); 
```

如果您希望在调用方法时自动执行某些方面，则可以使用一些 AOP 框架，例如[PostSharp](http://www.sharpcrafters.com/)。以下是方面创建的示例，它在方法调用时执行一些操作：

```
[Serializable]
public class SecurityImplAttribute : OnMethodBoundaryAspect
{
   public override void OnEntry(MethodExecutionArgs args) 
   { 
      // this code will be executed on method call
   }   
} 
```

当您将此属性应用于某个方法时，PostSharp 将在编译期间读取方法的元数据，如果找到了方面，PostSharp 会将您的代码直接注入二进制文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:20:18.323

属性只是装饰器，它们不由 .net 框架执行。

# c++ - 有一个重载的 operator<< 编译器找不到它

> ID：11522244
> 
> 赞同：-3
> 
> 时间：2012-07-17T12:16:29.980
> 
> 标签：c++, vector, singleton, operator-overloading

我编写了一个`Dice`模仿真实骰子行为的小类和可以继承的模板`Singleton`类`Dice`。我已经`operator<<`为类写了，`Dice`但不知何故编译器在找到它时遇到了问题。我为 , 重载了`<<`运算符`Dice`，它是从某些方法返回的，拥有它很方便。`Sinlgeton<Dice>``std::vector<int>``Dice`

我在 ubuntu 上使用`Qt creator 2.5`with 。`gcc 4.7`

> /home/USER/programming/cpp_yahtzee/main.cpp:12: 错误: 'std::operator<< >(((* & std::cout), ((const char*) "你好")) << (& Singleton::Instance())->Dice::getLastThrow()'</p>

这是产生此错误的代码：

`std::cout << "hello" << Dice::Instance().getLastThrow();`

**编辑** 然而，这输出了预期的结果，完全没有错误： `std::cout << Dice::Instance()` 也许这是我的编译器的问题`gcc/g++ 4.7`（尝试过`gcc/g++ 4.6.3`并且效果相同）？

我的单人班

```
template <typename T>
class Singleton
{
public:
    static T& Instance();
    Singleton() {}
private:

    //declare them to prevent copies
    Singleton(Singleton const&);
    void operator=(Singleton const&);

};

template<typename T>
T& Singleton<T>::Instance()
{
    static T _instance;
    return _instance;
} 
```

骰子类：

```
 class Dice : public Singleton<Dice>
    {
    private:
        std::vector<int> _lastThrow;
    public:
        Dice();
        std::vector<int> generateThrow();
        friend std::ostream& operator<<(std::ostream& os, const Dice& dice);
        friend std::ostream& operator<<(std::ostream& os, const Singleton<Dice>& dice);
        friend std::ostream& operator<<(std::ostream& os, const std::vector<int>& vect);

        //accessor method - returning last throw
        const std::vector<int>& getLastThrow();

        //rethrowing {1,4} - dice #1 and #4
        std::vector<int> Rethrow(const std::vector<int>& objects);
    };

std::ostream& operator<<(std::ostream& os, const Dice& dice)
{
    for (std::vector<int>::const_iterator it = dice._lastThrow.begin();  it != dice._lastThrow.end(); ++it) {
        os << *it;
    }
    return os;
}
std::ostream& operator<<(std::ostream& os, const Singleton<Dice>& dice)
{
    for (std::vector<int>::const_iterator it = dice.Instance().getLastThrow().begin();  it != dice.Instance().getLastThrow().end(); ++it) {
        os << *it;
    }
    return os;

}

std::ostream& operator<<(std::ostream& os, const std::vector<int>& vect)
{
    for (std::vector<int>::const_iterator it = vect.begin();  it != vect.end(); ++it) {
        os << *it;
    }
    return os;
}

std::vector<int> Dice::generateThrow()
{
    static std::vector<int> v(5);

    for (std::vector<int>::iterator it = v.begin();  it != v.end(); ++it) {
        (*it) = rand()%(DICE_MAX)+1;
    }
    _lastThrow = v;
    return v;
} 
```

现在我不能做这样的事情：

`std::cout << Dice::Instance().generateThrow();`

**编辑** Ilya Lavrenov 的方法有效，尽管这不是我想要的，因为这需要创建一个局部变量。我在课堂上的某个地方有问题`Singleton`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:26:42.027

```
#include <iostream>
#include <vector>

template <typename T>
class Singleton
{
public:
    static T& Instance();
    Singleton() {}
private:

    //declare them to prevent copies
    Singleton(Singleton const&);
    void operator=(Singleton const&);

};

template<typename T>
T& Singleton<T>::Instance()
{
    static T _instance;
    return _instance;
}

class Dice : public Singleton<Dice>
{
private:
    std::vector<int> _lastThrow;
public:
    Dice()
    {
        for (int i = 0; i < 10; ++i)
            _lastThrow.push_back(i);
    }
    std::vector<int> generateThrow();

    //accessor method - returning last throw
    const std::vector<int>& getLastThrow()
    {
        return _lastThrow;
    }

    //rethrowing {1,4} - dice #1 and #4
    std::vector<int> Rethrow(const std::vector<int>& objects);
};

std::ostream& operator<<(std::ostream& os, const Dice& dice)
{
    for (std::vector<int>::const_iterator it = dice.Instance().getLastThrow().begin();  it != dice.Instance().getLastThrow().end(); ++it) {
        os << *it;
    }
    return os;
}
std::ostream& operator<<(std::ostream& os, const Singleton<Dice>& dice)
{
    for (std::vector<int>::const_iterator it = dice.Instance().getLastThrow().begin();  it != dice.Instance().getLastThrow().end(); ++it) {
        os << *it;
    }
    return os;

}

std::ostream& operator<<(std::ostream& os, const std::vector<int>& vect)
{
    for (std::vector<int>::const_iterator it = vect.begin();  it != vect.end(); ++it) {
        os << *it;
    }
    return os;
}

std::vector<int> Dice::generateThrow()
{
    static std::vector<int> v(5);

    for (std::vector<int>::iterator it = v.begin();  it != v.end(); ++it) {
        (*it) = rand()%(354535)+1;
    }
    _lastThrow = v;
    return v;
}

int main()
{
    Singleton<Dice> a;
    std::cout << a << std::endl;

    return 0;
} 
```

对您的代码进行了一些更改，现在它可以很好地编译。运算符 << 也很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:33:43.620

它与错字`Dice::Instane`->有什么关系`Dice::Instance`吗？

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-17T12:24:49.000

有时 IDE 会解释一些 'const' 运算符，例如 eclipse 和 virtual studio。jsut 从参数“const”中删除

```
std::ostream& operator<<(std::ostream& os, std::vector<int>& vect) 
```

我认为它很有用，如果没有，请告诉我您使用的编译器版本和 IDE。

# tfs - TFS 2012 RC - TF237165：由于服务器上的验证错误，Team Foundation 无法更新工作项。这可能是因为

> ID：11522246
> 
> 赞同：7
> 
> 时间：2012-07-17T12:16:35.073
> 
> 标签：tfs

因此，我们使用的是 TFS 2012 RC，并通过添加一些自定义转换状态对常规任务项的工作流程进行了一些修改。

通过 Visual Studio 2012 RC 更新任务时，一切正常。我可以毫无问题地穿越所有州。但是，当通过 TFS 门户更新任务时，无论是通过拖动板上的项目或打开表单并使用下拉更改状态，我都会收到以下错误：“TF237165：Team Foundation 无法更新工作项，因为服务器上的验证错误。这可能是因为工作项类型已被修改或破坏，或者您没有更新工作项的权限。

然而，这只发生在移动到完成状态时，不会发生其他任何事情。所有其他州工作正常。

所以，我不确定这意味着什么，因为它在 Visual Studio 中运行良好。如果我可以在某处看到异常或更多信息会有什么帮助，但我不知道这些验证错误存储在哪里。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T14:21:34.860

问题在于工作流程。转换设置了一个与状态冲突的字段，同时也更改了相同的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T11:52:42.900

就我而言，还有另一个问题。问题是该字段在服务器发送的数据中有一个尾随 \r\n。我相信客户端 javascript OM 正在删除它，即使它是只读的，也会使该字段变脏。解决方法是使字段读写而不是只读。然后我将它设置为只读 - 现在它可以工作了。微软承诺他们可能会在下一个版本中修复它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-23T23:11:42.020

In my case, on TFS 2013 U5 I had changed my TFS Profile DisplayName so that it did not match my ActiveDirectory DisplayName. I could not edit or create anything until I changed the DisplayName back.

# objective-c - UIBarButtonItem 目标操作不调用

> ID：11522247
> 
> 赞同：0
> 
> 时间：2012-07-17T12:16:42.520
> 
> 标签：objective-c, uibutton, uibarbuttonitem, target-action

```
- (void)viewDidLoad
{

    [super viewDidLoad];

    //Load the image   
    UIImage *buttonImage = [UIImage imageNamed:@"1.png"];

    //create the button and assign the image
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:buttonImage forState:UIControlStateNormal];

    //sets the frame of the button to the size of the image
    button.frame = CGRectMake(0, 0, buttonImage.size.width, buttonImage.size.height);

    //creates a UIBarButtonItem with the button as a custom view
    UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    customBarItem.target = self;
    customBarItem.action = @selector(click:);

    self.toolbarItems = [NSArray arrayWithObjects:customBarItem, nil];
}

- (void)click:(id)sender {
    NSLog(@"action");
} 
```

我认为当我按下 barItem 时，我的控制台会打印“动作”。但是“动作”没有打印出来。我错过了什么吗？感谢提前！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:19:10.867

试试这个

```
UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithTitle:@"Click ME!" style:UIBarButtonItemStyleBordered target:self action:@selector(click)];

.
.
.

-(void)click{
    NSLog("hello");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:23:55.623

我相信问题是当你应该简单地传递 a 时，你正在使用 a `UIButton`，该动作可能会转到 the而不是.`[[UIBarButtonItem alloc] initWithCustomView``UIView``UIButton``UIBarButtonItem`

而是这样做：

```
UIImageView *myImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"1.png"];
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:myImageView]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:25:38.657

我认为您正在尝试做更多类似的事情：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:buttonImage forState:UIControlStateNormal];
[button setFrame:CGRectMake(0.0f, 0.0f, 25.0f, 25.0f)];
[button addTarget:self action:@selector(click) forControlEvents:UIControlEventTouchUpInside];
UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:button]; 
```

# jquery - jQuery Masonry 和无限滚动

> ID：11522248
> 
> 赞同：1
> 
> 时间：2012-07-17T12:16:42.827
> 
> 标签：jquery, infinite-scroll

这是我的代码：

```
var $container = jQuery('#hentry-wrapper');
    $container.imagesLoaded( function(){
        $container.masonry({
            itemSelector : '.hentry',
            columnWidth: 454,
            gutterWidth: 30,
            isResizable: true
        });
    });

    $container.infinitescroll({
        navSelector  : '#nav-pagination',
        nextSelector : '#nav-pagination .next',
        itemSelector : '.hentry',
        loading: {
            finishedMsg: 'No more pages to load.',
            img: 'http://i.imgur.com/6RMhx.gif'
        }
    },
    // trigger Masonry as a callback
    function( newElements ) {
        // hide new items while they are loading
        var $newElems = jQuery( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
        $newElems.imagesLoaded(function(){
            // show elems now they're ready
            $newElems.animate({ opacity: 1 });
            $container.masonry( 'appended', $newElems, true ); 
        });
    });

    // kill scroll binding
    jQuery(window).unbind('.infscr');

    // hook up the manual click guy.
    jQuery('#load-more').click(function(){
        $container.infinitescroll('retrieve');
        return false;
    });

    // remove the paginator when we're done.
    jQuery(document).ajaxError(function(e,xhr,opt){
        if (xhr.status == 404) jQuery('#load-more').remove();
    }); 
```

问题是我们完成后#load-more 不会删除。但是这里很好[http://www.infinite-scroll.com/trigger.html](http://www.infinite-scroll.com/trigger.html)有什么问题？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:27:30.720

最后一页不应包含#load-more 元素。

# c# - Microsost Office Interop Word - 在 C# 中启用/禁用跟踪更改

> ID：11522250
> 
> 赞同：4
> 
> 时间：2012-07-17T12:16:55.267
> 
> 标签：c#, ms-word, ms-office

如何在 C# 中启用或禁用 Track Changes 选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T12:23:46.060

我想你正在寻找这个属性

[Document.TrackRevisions](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word._document.trackrevisions)

从 MSDN

> 如果在指定文档中跟踪更改，则此属性返回 True，否则返回 False。将属性值设置为 True 或 False 以启用或禁用该功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:20:52.347

放

```
wordDocument.TrackRevisions = true; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-01T08:36:05.067

启用跟踪更改：

```
wordDocument.TrackRevisions = true; 
```

禁用跟踪更改：

```
wordDocument.TrackRevisions = false; 
```

# php - 向 Ajax 裁剪添加水印

> ID：11522256
> 
> 赞同：0
> 
> 时间：2012-07-17T12:17:17.413
> 
> 标签：php, jquery, image-processing, gd, image-uploading

[我在此处输入链接描述](http://sourceforge.net/projects/ajaxcrop/)中使用 Ajax Crop ，我想在脚本中添加水印。以下是我的脚本。

**水印**

```
$image_path = "watermark.png";

function watermark_image($oldimage_name, $new_image_name){
    global $image_path;
    list($owidth,$oheight) = getimagesize($oldimage_name);
    $width = 500; $height = 100;    
    $im = imagecreatetruecolor($width, $height);
    $img_src = imagecreatefromjpeg($oldimage_name);
    imagecopyresampled($im, $img_src, 0, 0, 0, 0, $width, $height, $owidth, $oheight);
    $watermark = imagecreatefrompng($image_path);
    list($w_width, $w_height) = getimagesize($image_path);        
    $pos_x = $width - $w_width; 
    $pos_y = $height - $w_height;
    imagecopy($im, $watermark, $pos_x, $pos_y, 0, 0, $w_width, $w_height);
    imagejpeg($im, $new_image_name, 100);
    imagedestroy($im);
    unlink($oldimage_name);
    return true;
} 
```

**上传和调整部分**

```
function resizeThumb($arr){

    $date = md5(time());    
    $arr['temp_uploadfile'] = $arr['img_src'];
$arr['new_uploadfile'] = $arr['uploaddir'].strtolower($date).'.jpg';

    asidoImg($arr);
    exit;
} 
```

我尝试添加

> $arr = watermark_image($arr['temp_uploadfile'], $arr['uploaddir'].strtolower($date).'.jpg');

代替

> $arr['new_uploadfile'] = $arr['uploaddir'].strtolower($date).'.jpg';

但这没有用。

有人可以帮助我吗？

下载[文件](http://cleanly.co/tsg/download.zip)并[测试](http://cleanly.co/tsg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:50:08.073

事实证明该脚本使用 ASIDO，并且它具有内置的 WATERMARK TOOL。在 func.php 我做了以下。

```
function asidoImg2($arr){

    include('asido/class.asido.php');
    asido::driver('gd');

    $height     = $arr['height'];
    $width      = $arr['width'];
    $x          = $arr['x'];
    $y          = $arr['y'];                

    // process
    $i1 = asido::image($arr['temp_uploadfile'], $arr['new_uploadfile']);    
    // fit and add white frame                                      
    if($arr['thumb'] === true){
        Asido::Crop($i1, $x, $y, $width, $height);
    asido::watermark($i1, 'watermark.png', ASIDO_WATERMARK_MIDDLE_LEFT, ASIDO_WATERMARK_SCALABLE_ENABLED, 1);

    }
    else{
        Asido::Frame($i1, $width, $height, Asido::Color(255, 255, 255));            
    asido::watermark($i1, 'watermark.png', ASIDO_WATERMARK_MIDDLE_LEFT, ASIDO_WATERMARK_SCALABLE_ENABLED, 1);
    }

    // always convert to jpg    
    Asido::convert($i1, 'image/jpg');

    $i1->Save(ASIDO_OVERWRITE_ENABLED);
        $data = array(
        'photo'=> $arr['new_uploadfile']
      );
        // echo $user_id;
    // delete old file
    echo $data['photo'];    

} 
```

# database-design - 从 H2 数据库移植索引逻辑和连接逻辑，但是关于索引的任何好信息？

> ID：11522257
> 
> 赞同：2
> 
> 时间：2012-07-17T12:17:20.437
> 
> 标签：database-design, h2

因此，我们即将将 H2 代码移植到一个有 noSQL 存储而不是文件系统上，以便我们在大型系统中使用（尽管有数万亿个较小的索引）。

查看 lucene 和 H2 时，乍一看，如果您索引 4 列（例如 A、B、C、D），它们几乎都使用一个 b-tree，而不是 4 个 b-tree。我在那里有点困惑，因为这意味着我需要查询 A 否则会崩溃，对吗？还是我弄错了，实际上有 4 个 b-tree，当我进行连接时，这意味着我可能需要处理 8 个 b-tree 或其他东西。

有没有关于它如何详细工作的好文章？或者有人可以推荐一些关于这个主题的好书吗？

（我在学校是一名电气工程师，所以从来没有上过数据库编程课：（有点遗憾，但不应该太难赶上）。

谢谢，院长

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T15:27:19.373

*我所知道的所有 SQL DBMS 的每个复合*索引只有一个 B-Tree 。我猜任何其他具有“复合索引”概念的系统的行为都是一样的。

在 {A, B, C, D} 上的复合索引的情况下，这棵 B-Tree 将允许您*有效*地搜索...

*   一个 = ...
*   A = ... 和 B = ...
*   A = ... 和 B = ... 和 C = ...
*   A = ... AND B = ... AND C = ... AND D = ...

...以及类似的范围搜索。

对于以下情况，它会*有些*效率：

*   A = ... 和 C = ...
*   A = ... 和 D = ...
*   A = ... 和 C = ... 和 D = ...
*   A = ... 和 B = ... 和 D = ...

并且对于以下情况*效率低下*：

*   乙 = ...
*   B = ... 和 C = ...
*   B = ... 和 D = ...
*   B = ... 和 C = ... 和 D = ...
*   C = ...
*   D = ...
*   ETC...

换句话说，在索引的**前沿**搜索是有效的（尽管某些 DBMS，例如 Oracle，可以使用“跳过扫描”进行非前沿搜索）。

* * *

另一方面，在 {A}、{B}、{C} 和 {D} 上具有单独的（非复合）索引将导致四个 B 树和一组不同的性能特征。

有关数据库索引如何工作的良好介绍，请查看[SQL 索引剖析](http://use-the-index-luke.com/sql/anatomy)。

# paypal - 用于电子支票的 PayPal IPN

> ID：11522261
> 
> 赞同：2
> 
> 时间：2012-07-17T12:17:31.007
> 
> 标签：paypal, paypal-ipn, paypal-sandbox

**paypal 是否会在电子支票交易**清算时向您的回调 url 发送 IPN 通知？

我正在 PayPal Sandbox 中测试电子支票交易。**该应用程序收到了payment_status**为“ **Pending** ”的电子支票交易通知。从 PayPal 帐户手动清除交易后，该应用没有收到任何通知。

我期待第二个 IPN 通知具有相同的 txn_id 和 payment_status 作为“已完成”或“已清除”。不是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T06:38:49.917

当 echecks 清除时，我会收到通知，至少在生产中（不确定沙盒）。

来源：我的网站支付标准（具有增强的定期支付）Paypal IPN 最近的交易历史和我的应用程序日志。

以下是原始 IPN 通知中的一些字段和已清除的字段，在这种情况下，大约 5 天后才出现。它们都具有相同的事务 ID。

原创，待定：

```
txn_type=subscr_payment
payment_date=[initial date]
pending_reason=echeck
payment_type=echeck
payment_status=Pending 
```

清除，完成：

```
txn_type=subscr_payment
payment_date=[initial date]
payment_type=echeck
echeck_time_processed=[process date]
payment_status=Completed 
```

# jquery - 如何在 AppMobi 模拟器中更改 Access-Control-Allow-Origin

> ID：11522266
> 
> 赞同：0
> 
> 时间：2012-07-17T12:17:39.443
> 
> 标签：jquery, cordova, appmobi

我正在尝试从服务器访问文件：

```
$.get('http://server.com/methods.php?m=loadSomething', function(data) {

    console.log(data);

}); 
```

但我得到错误：

```
Origin http://localhost:58888 is not allowed by Access-Control-Allow-Origin. 
```

有什么方法可以更改访问控制设置，以便我可以访问远程服务器并获取数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:03:27.963

在里面`methods.php`只使用`header()`类似的方法

```
header('Access-Control-Allow-Origin: http://localhost:58888') 
```

# javascript - 如何使用 Javascript 检测下载和上传速度

> ID：11522267
> 
> 赞同：1
> 
> 时间：2012-07-17T12:17:41.383
> 
> 标签：javascript, html, performance, connection

我希望创建一个相对简单的连接速度测试，其中用户单击一个按钮，我们让他们下载一些文件，然后一旦完成，我们就开始向我们上传。

我已经看到了很多使用 Javascript、JQuery 等执行此操作的各种答案和方法。实现目标的最佳方法是什么？总的来说，我对 Javascript 和网络编程相当陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:57:40.233

我会使用 LogNormal 的 boomerang.js 版本 - [https://github.com/lognormal/boomerang](https://github.com/lognormal/boomerang)

# java - 检查元素是否存在

> ID：11522269
> 
> 赞同：1
> 
> 时间：2012-07-17T12:17:56.407
> 
> 标签：java, selenium, webdriver

我在 Eclipse 中使用 selenium web-driver。我需要检查表格是否显示在页面上。我使用这样的代码：

```
try {
    Assert.assertTrue(driver.findElement(By.xpath(".//*[@id='flexibleTable']")).isDisplayed());
} catch (AssertionError e) {
    System.err.println("overview not found: " + e.getMessage());
} 
```

如果也阻止

```
if (driver.findElement(By.xpath(".//*[@id='flexibleTable']")).isDisplayed()) {
    ...
} else {
    ...
} 
```

但是如果没有找到这样的元素，测试就会中断。我如何组织检查以便即使元素不在页面上并且阻止 else 将执行，我的测试也会继续？

**编辑** 失败跟踪

```
org.openqa.selenium.NoSuchElementException: Unable to find element with xpath == .//*[@id='flexibleTable'] (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 360 milliseconds
For documentation on this error, please visit: http://seleniumhq.org/exceptions/no_such_element.html
Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:04'
System info: os.name: 'Windows XP', os.arch: 'x86', os.version: '5.1', java.version: '1.7.0_04'
Driver info: driver.version: RemoteWebDriver
Session ID: c57bdd3e-ff76-43f8-9cd5-898248a4546a
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
at  sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:458)
at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:226)
at org.openqa.selenium.remote.RemoteWebDriver.findElementByXPath(RemoteWebDriver.java:311)
at org.openqa.selenium.By$ByXPath.findElement(By.java:343)
at org.openqa.selenium.remote.RemoteWebDriver.findElement(RemoteWebDriver.java:218)
at system.Salutation.testUnit(Salutation.java:104)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我使用硒 2.23.1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T12:36:02.630

我在 2.24.1，异常层次结构可能已经改变，但是当你调用时：

```
driver.findElement(By.xpath(".//*[@id='flexibleTable']")) 
```

如果未找到该元素，将抛出 NoSuchElementException。该异常的父级是 NotFoundException，因此您可以将代码修改为：

```
try {
  WebElement e = driver.findElement(By.xpath(".//*[@id='flexibleTable']"));
  Assert.assertTrue(e.isDisplayed());
} catch(NoSuchElementException nsee) {
   System.out.println("The table was not located.");
} catch(AssertionError ae) {
   System.out.println("The table was located, but not displayed.");
} 
```

这应该允许您的测试继续进行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T12:22:59.397

如果也阻止

```
String expression = ".//*[@id='flexibleTable']";
if (driver.findElement(By.xpath(expression) != null &&
    driver.findElement(By.xpath(expression)).isDisplayed()) {
    ...
}
else {
    ...
} 
```

# powershell - 是否有任何脚本可以在整个本地网络中搜索 UPnP 设备？

> ID：11522270
> 
> 赞同：4
> 
> 时间：2012-07-17T12:17:57.867
> 
> 标签：powershell, upnp

所以，我找到了一些程序，可以从本地网络搜索 UPnP 设备，但我在 Powershell 中找不到相同的实现。也许有人可以告诉，如何使用 UPnP 编写 Powershell 脚本来搜索设备？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T08:29:34.773

对于这个问题，我得到了帮助。所以我的问题有答案，如果有人需要的话。PS中的代码应该是这样的：

```
$finder = New-Object -ComObject UPnP.UPnPDeviceFinder;
$devices = $finder.FindByType("upnp:rootdevice", 0)
foreach($device in $devices)
{
    Write-Host -ForegroundColor Red ---------------------------------------------
    Write-Host -ForegroundColor Green Device Name: $device.FriendlyName
    Write-Host -ForegroundColor Green Unique Device Name: $device.UniqueDeviceName
    Write-Host -ForegroundColor Green Description: $device.Description
    Write-Host -ForegroundColor Green Model Name: $device.ModelName
    Write-Host -ForegroundColor Green Model Number: $device.ModelNumber
    Write-Host -ForegroundColor Green Serial Number: $device.SerialNumber
    Write-Host -ForegroundColor Green Manufacturer Name: $device.ManufacturerName
    Write-Host -ForegroundColor Green Manufacturer URL: $device.ManufacturerURL
    Write-Host -ForegroundColor Green Type: $device.Type
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:20:13.867

您会对 Microsoft UPnP API，特别是[IUPnPDeviceFinder 感兴趣](http://msdn.microsoft.com/en-us/library/windows/desktop/aa381575%28v=vs.85%29.aspx)。我对 Powershell 的了解还不够，无法判断您是否可以直接使用 API，或者您可能需要一些像[这个这样](http://managedupnp.codeplex.com/)的胶水 .NET 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-30T10:46:47.993

```
$finder = New-Object -ComObject UPnP.UPnPDeviceFinder
$finder.FindByType('ssdp:all', 0) 
```

# c# - MVCscaffolding 从数据库生成模型模板

> ID：11522272
> 
> 赞同：0
> 
> 时间：2012-07-17T12:18:08.090
> 
> 标签：c#, database, templates, t4, asp.net-mvc-scaffolding

是否可以在使用 MVCscaffolding 和 t4 模板自动生成包含数据库中所有表数据的模型

例如，我的数据库中有一个名为 Customers 的表，它有 3 个字段：

身份证号码

所以我可以制作一个 t4 模板，它会生成这样的东西：（它可以与所有具有其他名称的表 + 字段一起使用）?????

```
using System;
using Data.EF.Model;
using Data.ViewModels.SlickGrid;

namespace Data.ViewModels.SlickGridDemo
{
    public class CustomerGridViewModel
    {
        public Int Id { get; set; }
        public string Name { get; set; }
        public int? Number { get; set; }  
    }
} 
```

好？任何人？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:16:34.993

是的。它相对简单。查看 T4Toolbox [http://t4toolbox.codeplex.com/](http://t4toolbox.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:29:16.730

好吧，podiluska 的回答没有帮助，所以我设法为这个问题创建了自己的解决方案，只是重新制作了标准的 rezorview 删除模板，这样它就会向我显示我的数据类型和属性，如下所示：

```
 <#
foreach (ModelProperty property in GetModelProperties(Model.ViewDataType, true)) {  
#>
   public <#=property.Type.AsString#> <#=property.Name#> { get; set; }   

<#  
}
#> 
```

就是这样，如果samoone会遇到同样的问题，那么它应该可以正常工作:)

# c# - 为什么我的 .net 图表组件的缩放级别在加载时设置为最大

> ID：11522274
> 
> 赞同：0
> 
> 时间：2012-07-17T12:18:17.333
> 
> 标签：c#, .net, winforms, charts

我对 .Net 图表组件有疑问。当我的表单加载时，我手动设置了图表的缩放级别（它是条形图），但缩放级别设置得非常高。

这个错误是随机发生的。

当我在调试中运行代码时，所有值都已正确设置，但图表未正确显示。

我用这段代码设置了缩放

```
MonitoringChart.ChartAreas[0].AxisX.ScaleView.Zoom(0, ItemToDisplay); 
```

在调试中，ItemToDisplay 设置为 20，但我只看到图表的第一条，放大到最大。

知道如何解决这个问题吗？

谢谢

# bash - 从 mysqldump 输出中删除特定表的插入数据（sed？）

> ID：11522276
> 
> 赞同：5
> 
> 时间：2012-07-17T12:18:37.200
> 
> 标签：bash, sed, grep, mysqldump

我有一个巨大的 mysqldump 输出并且想要排除特定表的插入。

该文件如下所示：

```
--
-- Dumping data for table `big_table`
--

INSERT INTO `big_table` ...
INSERT INTO `big_table` ...

--
-- Table structure for table `next_table`
-- 
```

如何删除“转储表 big_table 的数据”和下一个“表的表结构”之间的插入文件太大而无法放入文本编辑器。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T12:32:15.667

我忽略了所有插入当然都以表名开头的事实。所以我可以简单地使用

```
grep -v "INSERT INTO \`big_table\`" dump.sql > dump_stripped.sql

```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T12:43:09.267

一种使用`sed`. 它搜索文字`-- Dumping data for table 'big_table'`和之间的所有行`-- Table structure for table`。并注释那些不以 . 开头的行`--`。

假设内容`infile`：

```
1
2
3
4
--
-- Dumping data for table `big_table`
--

INSERT INTO `big_table` ...
INSERT INTO `big_table` ...

--
-- Table structure for table `next_table`
--
1
2
3
4
5
6 
```

运行命令：

```
sed -e '
    /-- Dumping data for table `big_table`/,/-- Table structure for table/ { 
        /^--/! s/^/--/ 
    }
' infile 
```

具有以下输出：

```
1
2
3
4
--
-- Dumping data for table `big_table`
--
--
--INSERT INTO `big_table` ...
--INSERT INTO `big_table` ...
--
--
--
-- Table structure for table `next_table`
--
1
2
3
4
5
6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:29:20.250

如何解决方法：

1.  备份您不想更新的表（重命名然后重新创建一个空版本）
2.  运行转储
3.  恢复您的表并**覆盖**转储提供的表

我希望这有帮助。

# node.js - model.save() 的 Backbone.js/express.js 参数

> ID：11522286
> 
> 赞同：6
> 
> 时间：2012-07-17T12:19:09.823
> 
> 标签：node.js, backbone.js, express

我在客户端上使用 Backbone.js，在后端使用 node.js，我在保存“有限”模型时遇到了一些麻烦，如下所述：http: [//backbonejs.org/#Model-节省](http://backbonejs.org/#Model-save)

如示例所示，如果我这样做

```
book.save({author: "Teddy"}); 
```

如何使用 express.js 访问保存的参数，即我只想保存到“作者”字段的事实？我试过以下

```
req.body -> gives ALL parameters of the model being saved, I want only the 'author' field
req.query -> empty 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T12:48:02.413

如[Model.save 文档](http://backbonejs.org/#Model-save)中所述：

> **save** *model.save([attributes], [options])*
> [...] 属性哈希（如集合中的）应该包含您想要更改的属性——未提及的键不会被更改——但是，**资源的完整表示**将被发送到服务器。

但是，您可以覆盖 save 方法并`data`通过将发送到服务器而不是完整模型表示的选项提供属性。例如，这只会保存传递给方法的属性：

```
var M = Backbone.Model.extend({   
    save: function (attrs, options) {
        options || (options = {});

        options.contentType = 'application/json';
        options.data = JSON.stringify(attrs);

        Backbone.Model.prototype.save.call(this, attrs, options);
    }
}); 
```

还有一个小提琴[http://jsfiddle.net/dLFgD/](http://jsfiddle.net/dLFgD/)

* * *

正如@mikebridge 在评论中指出的那样，现在可以通过传递一个`attrs`选项来获得这种行为。所以要么使用

```
book.save(null, {
    attrs: {author: "Teddy"}
}); 
```

或保持覆盖

```
var M = Backbone.Model.extend({
    url: '/echo/json/',

    save: function(attrs, options) {
        options || (options = {});      
        options.attrs = attrs;
        Backbone.Model.prototype.save.call(this, attrs, options);
    }
}); 
```

[http://jsfiddle.net/nikoshr/dLFgD/7/](http://jsfiddle.net/nikoshr/dLFgD/7/)

* * *

如果您使用支持它的 Backbone 版本（> = 0.9.9）并且您的服务器理解该动词，您也可以发送 PATCH 请求，如[@pkyeck 的回答中所述](https://stackoverflow.com/a/21698745/1071630)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-11T10:08:33.187

使用当前版本的 Backbone (1.1.0)，您还可以执行`PATCH`仅将更改的属性发送到服务器的操作。

> 相反，如果您只想将更改后的属性发送到服务器，请调用 `model.save(attrs, {patch: true})`. 您将收到仅包含传入属性的服务器的 HTTP PATCH 请求。

取自这里：[http ://backbonejs.org/#Model-save](http://backbonejs.org/#Model-save)

在你的情况下，这将是：

```
book.save("author", "Teddy", {patch: true}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-21T17:00:29.743

我发现访问 POST 参数的最佳方法是使用 bodyParser 中间件。在这个问题中引用了这一点：[如何检索 POST 查询参数？](https://stackoverflow.com/questions/5710358/how-to-get-post-query-in-express-node-js)

```
/* On startup, register the bodyParser middleware */
app.use(express.bodyParser());

/* Then, during route execution, each parameter can be accessed with req.param */
app.post('/author/:id', function(req, res) {  
  var author = req.param('author', null); // Second parameter is default.
  ...
}); 
```

# windows - 在 Windows 窗体中实现 Outlook 电子邮件发送到自动完成

> ID：11522296
> 
> 赞同：1
> 
> 时间：2012-07-17T12:19:36.197
> 
> 标签：windows, outlook, outlook-addin, autosuggest

我正在尝试开发一个 Outlook 插件，当插件按钮单击它会打开一个 windows 表单。Windows 表单有一个文本字段，在文本字段中输入名称时，它应该显示建议列表，如 Outlook 电子邮件“发送到”字段中一样。我很难找到任何可以阅读的来源。谁能帮忙:)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:23:22.163

**SendTo 列表**是从自动完成列表缓存中提取的，并根据 Outlook 版本进行不同的处理。在 Outlook 2010 中，您可以使用[**Suggested Contacts**文件夹](http://www.windowsitpro.com/article/outlook/outlook-2010-autocomplete-cache-and-suggested-contacts)，而在 Outlook 2007 及以下版本中，它[包含在隐藏的**NK2 文件**](http://support.microsoft.com/kb/287623)中。

请参阅[有关如何管理自动完成缓存的相关链接](http://hosting.intermedia.net/support/kb/default.asp?id=1127)。

# sql-server - 执行查询时有时会出现错误的结果

> ID：11522297
> 
> 赞同：0
> 
> 时间：2012-07-17T12:19:41.520
> 
> 标签：sql-server, database, sql-server-2008-r2

我有下表：

```
photos(objectID UNIQUEIDENTIFIER, photo varbinary(max)) 
```

我有执行以下操作的 ASP.NET WebForms 应用程序。当收到格式正确的查询字符串时：

```
~/script.aspx?identifier=a123-b456789.... 
```

它发出以下查询：

```
SELECT photo FROM photos where objectID='a123-b456789...' 
```

收到二进制对象后，我的应用程序会显示它。问题是相同的查询可能会产生正确的图像，也可能不会。不抛出异常。这可能是什么？我没有使用任何交易。

# php - 在订单中挑选号码

> ID：11522301
> 
> 赞同：2
> 
> 时间：2012-07-17T12:19:56.560
> 
> 标签：php, arrays, sorting

我的任务是使用 jquery slide 而不是动画脚本从 mysql 数据库中滑动图像。幻灯片应该至少显示最近上传的十张图片。我首先写了一个随机查询

```
mysql_query("select * from tblname order by rand() limit 1); 
```

但正如预期的那样，它会随机选择图像，而不管它是什么时候发布的，当然它不是最近的十张。经过一番思考，我现在必须首先运行查询以获取最近的十个

```
mysql_query("select * from tblname order by ID limit 10);
while($row=mysql_fetch_array($sql){
    $slideid=$slideid.",".$row['recordid'];
} 
```

这当然会导致此顺序的变量

```
$var="23,22,24,34,27,78,56,87,98,55"; 
```

我尝试像处理数组一样处理它，但它没有给出任何积极的结果，因此我遇到了如何选择这些数字并将其用于幻灯片的问题

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:21:54.203

```
$myArr=explode(',',$var);
sort($myArr);

for($i=0;$i<count($myArr);$i++)
{
    echo $myArr[$i];
} 
```

编辑：为了提高效率，请使用：

```
$myArr=explode(',',$var);
sort($myArr);

foreach ($myArr as $val)
{
    echo $val;
    // Or do whatever else you want with each one.
} 
```

编辑 2：请参阅下面关于效率、for 循环和意外结果的评论。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:22:04.187

```
$var="23,22,24,34,27,78,56,87,98,55";
$arr = explode(',',$var);
foreach ($arr as $val) {
   // work with $val
} 
```

[`explode`](http://php.net/manual/en/function.explode.php)将字符串拆分为数组

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:01:39.000

根据您的评论，我将提供我的 2p 组合

> 这就是我所做的 $slideid="23,22,24,34,27,78,56,87,98,55"; $arr = explode(',',$slideid); foreach ($arr as $val) { //让我们从表单中获取变量 post $rs = mysql_query("SELECT * FROM tblname WHERE id='$val'") or die(mysql_error()); while($row=mysql_fetch_array($rs)){ echo "<img src='image/$image'>"; 使用 jquery 幻灯片一张一张地显示图像

现在我认为我们正在浪费时间处理爆炸这个变量，因为 mysql 有漂亮的 IN() 函数（可能在其他数据库中，我不知道）

```
$slideid = "23,22,24,34,27,78,56,87,98,55";
$rs = mysql_query("SELECT * FROM tblname WHERE id IN({$slideid})") or die(mysql_error());
while ($row = mysql_fetch_assoc($rs))
{
    echo "<img src='image/{$row['image']}' />";
} 
```

我希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:22:42.330

1）将字符串分解成一个数组，用逗号分割。

2）您没有说是否要将数字重新排序为数字顺序，或者按照它们已经存在的顺序处理它们。如果是前者，请使用`sort($arr);`

3）按顺序循环数组并对每个数字做一些事情

```
$str = '1,2,3,4,5,6';
$arr = explode(',', $str);
foreach($arr as $num) echo $num.'<br />'; 
```

请注意，如果逗号后的空格有任何变化，更好的选择是`preg_split`而不是`explode`，因为它更具动态性。

```
$arr = preg_split('/, ?/', $str); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T12:25:37.790

**[您可以使用 php explode](http://php.net/manual/en/function.explode.php)**函数来实现这一点

$pieces = explode(",", $var);

回声 $pieces[0]; // 块 1

回声 $pieces [1](http://php.net/manual/en/function.explode.php) ; // 块 2

.

.

.

回声 $pieces[n]; // 第 n 块

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T13:28:20.770

我认为你需要在这里得到关于变量顺序的顺序结果

```
$slideid = "23,22,24,34,27,78,56,87,98,55";
$rs = mysql_query("SELECT * FROM tblname WHERE id IN({$slideid}) ORDER BY FIELD(id, {$slideid}) ") or die(mysql_error());
while ($row = mysql_fetch_assoc($rs))
{
    echo "<img src='image/{$row['image']}' />";
} 
```

# git - 合并删除和添加错误的文件

> ID：11522303
> 
> 赞同：1
> 
> 时间：2012-07-17T12:20:06.200
> 
> 标签：git, merge, branch, branching-and-merging, tortoisegit

在你开始使用 git 命令之前，我只使用 Windows 7-64bit 和 TortoiseGit（当前为 v1.7.11.3），因为我是 Git 新手。

我的 DEV 分支比当前的远程 master 旧，我更新了 DEV，并解决了冲突。
DEV 分支已将提交推送到远程 DEV 分支，因此这`rebase`是不可能的——据我所知。

为什么会发生这种行为，我该如何避免？

1.  `Checkout master`（切换到本地主机）
2.  `Pull origin master`（没有冲突）
3.  `Checkout DEV`（切换到开发分支）
4.  `Merge master`（将本地主更改应用到本地 DEV 分支）
5.  修复冲突和`commit`修改文件（自动合并和修复冲突文件）

当我打开`log`然后我看到提交窗口中的“父 1”文件和未显示的“父 2”文件。这是奇怪的部分，现在**添加**了（本地/远程相同）master*删除的文件，并***删除**了新文件。 此外，“父 2”文件没有产生任何冲突，尽管有些**应该**！

 ******新/删除的文件与我预期的相反。这是为什么 ？
如果一个文件是 master 中的新文件并且我合并到 DEV 分支，那么我希望它在合并后存在。
我的猜测是 DEV 分支被认为是主要的，而不是我合并到 DEV 中的分支（主）。

我没有`Revert`用于重新创建已删除文件的选项（那些实际上是 master 中的新文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T20:13:59.863

如我所见，您的合并方向不正确：

你应该做：

```
git checkout master
git pull origin master 
```

这里有两种变体：

1）如果您不想在遥控器上重写开发分支历史记录，那么您必须保持原样但要做

```
git merge dev # will produce merge commit if not fast-forward 
```

2）或者如果你不太关心开发分支历史

```
git checkout dev
git rebase master # now all commits that happened in dev will be "on top" of master, master will be behind
git checkout master
git merge dev # will result in fast-forward merge without merge commit 
```

现在，为了回到错误合并之前的状态，您可以执行以下操作（如果合并是您在 dev 分支中所做的最后一件事）：

```
git checkout dev
git reset --hard HEAD~1 
```

现在您可以正确合并。在第二种情况下，除非您使用 -f 标志，否则大多数时候将 dev 分支推送到远程 dev 将被禁止为非快进。希望有帮助。******

# javascript - 雅虎金融 api 实时报价

> ID：11522306
> 
> 赞同：1
> 
> 时间：2012-07-17T12:20:11.827
> 
> 标签：javascript, cordova, finance, yahoo-finance, stockquotes

我正在使用 phonegap 实现一个移动金融应用程序。为此，我需要一个实时报价。谷歌搜索了一段时间后，我知道雅虎提供实时股票报价。所以我使用[这个](http://billing.finance.yahoo.com/realtime_quotes/signup)链接创建了一个 30 天的试用帐户。现在我不知道如何进一步进行。是否有任何教程或示例代码可以调用 Yahoo 的其余网络服务以使用 phonegap 获取实时股票报价？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:30:31.273

雅虎[！](http://developer.yahoo.com/)[根据2009 年 2 月的这篇帖子，](http://developer.yahoo.com/forum/General-Discussion-at-YDN/Stock-Quote-API-returning-commas-in/1234765072000-6036c128-a7e0-3aa5-9e72-1af1871e1b41)[开发者网络](http://developer.yahoo.com/)，特别是他们的[财务](http://developer.yahoo.com/finance/)部分，似乎是他们唯一官方支持的实时解决方案。但是，这些信息显然已经过时了。

# java - 在 Eclipse 中进行远程 Java 调试之前运行命令

> ID：11522313
> 
> 赞同：0
> 
> 时间：2012-07-17T12:20:37.773
> 
> 标签：java, eclipse, debugging, shell

我想通常在本地调试我的 Java 应用程序，但有时在远程服务器上。我正在考虑`rsync`将类文件和 jar 依赖项添加到偶尔运行的远程服务器（在 ant 脚本中是竖琴），然后通过 ssh 远程运行应用程序并使用 ssh 隧道连接到远程 JVM。

这可以通过将`rsync`部件作为 Builder 运行并将 ssh 隧道作为在调试会话之前运行的外部工具来轻松实现。但是，我想简单地启动远程调试配置并让它运行起来。理想情况下，我想在 Eclipse 尝试连接到远程 JVM 之前执行一些代码片段，并可能使其输出出现在控制台视图中。

*有没有办法通过一些插件来实现这一点（不支持开箱即用）？*我想我可以编写一个 Eclipse 插件的快速 hack，但我不想重新发明轮子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T17:46:31.190

如果安装 CDT 是一个选项，那么您可以使用它的启动组来运行您的外部工具以及正常的启动配置： ![发射组](../Images/7823b89b1ee7e00bae083b0f35b7b14a.png)

或者，您可能想看看[EclipseRunner](http://code.google.com/p/eclipserunnerplugin/)插件。虽然它可以按组组织启动配置，但我不确定是否可以这样启动组。

# xml - 使用经典 ASP 读取 xml 数据

> ID：11522316
> 
> 赞同：7
> 
> 时间：2012-07-17T12:20:51.250
> 
> 标签：xml, asp-classic

我已经编写了一个用于在经典 asp 中读取 xml 数据的代码，如下所示：

```
<%

 Dim objxml
    Set objxml = Server.CreateObject("Microsoft.XMLDOM")
    objxml.async = False
    objxml.load ("/abc.in/xml.xml")

set ElemProperty = objxml.getElementsByTagName("Product")
set ElemEN = objxml.getElementsByTagName("Product/ProductCode")
set Elemtown = objxml.getElementsByTagName("Product/ProductName")
set Elemprovince = objxml.getElementsByTagName("Product/ProductPrice")  

Response.Write(ElemProperty)
Response.Write(ElemEN) 
Response.Write(Elemprovince)
For i=0 To (ElemProperty.length -1) 

    Response.Write " ProductCode = " 
    Response.Write(ElemEN) 
    Response.Write " ProductName = " 
    Response.Write(Elemtown) & "<br>"
    Response.Write " ProductPrice = " 
    Response.Write(Elemprovince) & "<br>"

next

Set objxml = Nothing 
%> 
```

此代码没有给出正确的输出。请帮帮我。

xml是：

```
<Product>
   <ProductCode>abc</ProductCode>
   <ProductName>CC Skye Hinge Bracelet Cuff with Buckle in Black</ProductName>
</Product> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T20:58:40.167

试试这个：

```
<%   

Set objXMLDoc = Server.CreateObject("MSXML2.DOMDocument.3.0")    
objXMLDoc.async = False    
objXMLDoc.load Server.MapPath("/abc.in/xml.xml")

Dim xmlProduct       
For Each xmlProduct In objXMLDoc.documentElement.selectNodes("Product")
     Dim productCode : productCode = xmlProduct.selectSingleNode("ProductCode").text   
     Dim productName : productName = xmlProduct.selectSingleNode("ProductName").text   
     Response.Write Server.HTMLEncode(productCode) & " "
     Response.Write Server.HTMLEncode(productName) & "<br>"   
Next   

%> 
```

笔记：

*   不要使用 Microsoft.XMLDOM 使用显式 MSXML2.DOMDocument.3.0
*   用于`Server.MapPath`解析虚拟路径
*   使用`selectNodes`and`selectSingleNode`而不是`getElementsByTagName`. 扫描所有后代，`getElementsByTagName`因此可以返回意外结果，然后您始终需要对结果进行索引，即使您知道您只需要一个返回值。
*   `Server.HTMLEncode`发送到响应时总是数据。
*   不要把 ( ) 放在奇怪的地方，这是 VBScript 而不是 JScript。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T16:14:20.363

这是一个如何读取数据的示例，假设 xml 是

```
<Products>
  <Product> 
    <ProductCode>abc</ProductCode> 
    <ProductName>CC Skye Hinge Bracelet Cuff with Buckle in Black</ProductName> 
  </Product>
  <Product> 
    <ProductCode>dfg</ProductCode> 
    <ProductName>another product</ProductName></Product>
</Products> 
```

以下脚本

```
<%

Set objXMLDoc = Server.CreateObject("Microsoft.XMLDOM") 
objXMLDoc.async = False 
objXMLDoc.load("xml.xml") 

Set Root = objXMLDoc.documentElement
Set NodeList = Root.getElementsByTagName("Product")

For i = 0 to NodeList.length -1
  Set ProductCode = objXMLDoc.getElementsByTagName("ProductCode")(i)
  Set ProductName = objXMLDoc.getElementsByTagName("ProductName")(i)
  Response.Write ProductCode.text & " " & ProductName.text & "<br>"
Next

Set objXMLDoc = Nothing

%> 
```

给

```
abc CC Skye Hinge Bracelet Cuff with Buckle in Black
dfg another product 
```

# excel - 访问 PageSetup 属性时如何避免运行时错误

> ID：11522319
> 
> 赞同：2
> 
> 时间：2012-07-17T12:20:52.863
> 
> 标签：excel, page-setup, vba

大家好，我有一个小问题。我目前正在开发一个 Excel 程序，该程序将生成报告、格式化并打印它们。我正试图向我的老板展示该程序时，excel 给了我一个错误，说 pagesetup 类不工作（错误 1004）。我花了几分钟才意识到问题出在她的打印机上。第二次我换了她的打印机，它工作得很好。

我的问题是，当我将我的 excel 文件发送到我无法控制他们安装的打印机的公司中时，您将如何确保不会出现运行时错误？

我不介意不能从 excel 打印，但我确实需要为他们在 excel 中对其进行格式化。

非常感谢你们。

# matlab - Matlab中的变量缓冲区

> ID：11522320
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:21:00.710
> 
> 标签：matlab

我是这篇文章的新手。如果我在提问的方式上犯了任何错误，请告诉我。

当人们可以通过这些链接解释我在寻找什么时，我的问题可以清楚地理解。

[https://www.dropbox.com/s/5nhmxqgveytl0ba/Comb%20FIR%20Filter%20Explanation.jpg](https://www.dropbox.com/s/5nhmxqgveytl0ba/Comb%20FIR%20Filter%20Explanation.jpg)

```
 (And) 
```

[https://www.dropbox.com/s/5nhmxqgveytl0ba/Comb%20FIR%20Filter%20Explanation.jpg](https://www.dropbox.com/s/5nhmxqgveytl0ba/Comb%20FIR%20Filter%20Explanation.jpg)

重点将是“我如何创建这样一个取决于输入周期和滤波器采样频率‘Fs’的‘可变 FIFO 缓冲区’？

如果有人对这样的问题有任何想法或想法，那么我将很高兴知道，这将对我在这里的项目有很大帮助。

真诚的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:58:10.033

Maybe I don't fully understand what it is you're looking for here but I think you already have all the information that you need.

```
Fs = 1000; %% or whatever your sampling rate is to begin with.
Order = 3; %% Or whatever order you decide to work with.
Buffer_length = (Order/2)*Fs; % this will be the amount of data in each buffer 
```

If you're looking for someone to give you anything more than this you're going to have to provide additional information and show what you're tried to do so far.

# android - 我可以从我的 android 应用程序中识别新邮件的 gmail 通知吗

> ID：11522321
> 
> 赞同：1
> 
> 时间：2012-07-17T12:21:01.660
> 
> 标签：android, gmail

我可以识别通知并从我的 android 应用程序中获取通知的详细信息吗？如果是这样，任何人都可以帮助我吗...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:27:00.767

您无权访问当前发布的通知。应用程序可以对其他人可能感兴趣的事件进行一些广播，但我怀疑 GMail 应用程序会这样做，所以答案是“不”。

# jquery - 在带有 div 的原始文本换行中查找单词

> ID：11522323
> 
> 赞同：-3
> 
> 时间：2012-07-17T12:21:07.450
> 
> 标签：jquery, regex

我正在尝试找到一个开头的结束词，例如`INFO`and`ENDINFO`并将这两个词中的所有内容包装在一个带有类的 div 中`.INFO`

```
$(document).ready(function() {
var content = $('.content').html();
var regex = /INFO.*ENDINFO/gi;
var info = content.match(regex);

$('.INFO').html(info);
});​ 
```

例如：以前。

```
<div class="project_content"><img src="http://lorempixel.com/g/400/200/">
<br>
INFO
<br>
Hello I'm an info div
<br>
ENDINFO
<br>
Additonal content outside of info div

</div>​ 
```

后：

```
<div class="project_content"><img src="http://lorempixel.com/g/400/200/">
<br>
<div class=".INFO">
<br>
Hello I'm an info div
<br>
</div>
<br>
Additonal content outside of info div

</div>​ 
```

这似乎不起作用。正如您在[jsfiddle](http://jsfiddle.net/JRHse/)中看到的那样。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:37:54.660

从您的示例代码中，您可能想要完善 jquery 的工作方式。您使用的选择器 (`.INFO`和`#content`) 不匹配 HTML 中的任何元素，因此您的代码什么也不做。

为了让您开始，这是实现您所说的一种方法：http: [//jsfiddle.net/JRHse/6/](http://jsfiddle.net/JRHse/6/)

```
$(document).ready(function(){
    var html = $('#project_content').html();
    var new_html = html.replace(/(INFO((.|\s)*?)ENDINFO)/, "<div class='INFO'>$2</div>");
    $('#project_content').html(new_html);        
}); 
```

以下是代码的快速细分：

```
$('#project_content') 
```

这与元素匹配`id='project_content'`。

```
var html = $('#project_content').html(); 
```

我们以该元素为目标并将其 HTML 内容存储在`html`var 中。

```
var new_html = html.replace(/(INFO((.|\s)*?)ENDINFO)/, "<div class='INFO'>$2</div>"); 
```

然后我们执行您想要的替换并将输出存储为`new_html`.

```
$('#project_content').html(new_html); 
```

最后，我们用修改后的版本覆盖 HTML 内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:30:59.323

' `.`' 不会匹配`white-space`字符。试试这个正则表达式：

```
var regex = /INFO(.|\s)*ENDINFO/gi; 
```

[现场演示](http://jsfiddle.net/JRHse/2/)

# android - 位图绘制太慢 - openGL 是解决方案吗？

> ID：11522325
> 
> 赞同：0
> 
> 时间：2012-07-17T12:21:09.393
> 
> 标签：android, opengl-es

我正在为 Android 编写动态壁纸。壁纸包含一些位图处理，对我来说太慢了。它在 Galaxy S3 (GT-I9300) 上运行，因此显示尺寸为 720x1280。当壁纸服务运行时，设备会变慢，启动器也会变慢。我怎样才能获得平滑的壁纸，我应该使用 OpenGL 吗？我搜索了其他论坛等，有些用户说 OpenGL 并不是真的更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:23:34.993

用户不知道位图和OpenGL的区别，开发者知道！是的，您必须使用 OpenGL 才能获得平滑的壁纸。

# c# - TextChanged 事件时更新 XAML 文本框

> ID：11522326
> 
> 赞同：6
> 
> 时间：2012-07-17T12:21:23.050
> 
> 标签：c#, .net, xaml, data-binding

我使用 XAML 和数据绑定 (MVVM)。当我的用户在 TextBox 中写入新的文本字符时，我需要更新标签。

XAML

```
 <Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Height="23" HorizontalAlignment="Left" Margin="12,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="463" Text="{Binding OriginalText}"/>
        <Label Height="28" HorizontalAlignment="Left" Margin="12,41,0,0" Name="label1" VerticalAlignment="Top" Width="463" Content="{Binding ModifiedText}"/>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="400,276,0,0" Name="button1" VerticalAlignment="Top" Width="75" />
    </Grid>
</Window> 
```

视图模型

```
 class MainViewModel : NotifyPropertyChangedBase
    {
        private string _originalText = string.Empty;
        public string OriginalText
        {
            get { return _originalText; }
            set
            {
                _originalText = value;
                NotifyPropertyChanged("OriginalText");
                NotifyPropertyChanged("ModifiedText");
            }
        }

        public string ModifiedText
        {
            get { return _originalText.ToUpper(); }
        }
    } 
```

我在 XAML 中添加了一个按钮。该按钮什么都不做，只是帮助我失去了文本框的焦点。当我失去焦点时，绑定会更新，上面的文本会出现在我的标签中。但是数据绑定只有在文本失去焦点时才会更新。TextChanged 事件不会更新绑定。我想强制更新 TextChanged 事件。我怎样才能做到这一点？我应该使用什么组件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T12:29:26.057

```
 <TextBox Name="textBox1"
      Height="23" Width="463"
      HorizontalAlignment="Left" 
      Margin="12,12,0,0"   
      VerticalAlignment="Top"
      Text="{Binding OriginalText, UpdateSourceTrigger=PropertyChanged}" /> 
```

[MSDN 如何：控制 TextBox 文本何时更新源](http://msdn.microsoft.com/en-us/library/ms754356.aspx)：

> 该`TextBox.Text`属性的默认**UpdateSourceTrigger**值为 **LostFocus**。这意味着如果应用程序有一个带有数据绑定 TextBox.Text 属性的 TextBox，则您在 TextBox 中键入的文本不会更新源，直到 TextBox 失去焦点（例如，当您单击离开 TextBox 时）。
> 
> 如果您希望在**键入**时更新源，请将绑定的 UpdateSourceTrigger 设置为**PropertyChanged**。在以下示例中，TextBox 和 TextBlock 的 Text 属性绑定到相同的源属性。TextBox 绑定的UpdateSourceTrigger 属性设置为PropertyChanged。

# android - 如何从Gallery android刷新当前图片

> ID：11522327
> 
> 赞同：1
> 
> 时间：2012-07-17T12:21:34.963
> 
> 标签：android, refresh, gallery, invalidation

在搜索了一个尝试如何做之后，由于我的失败，我提出了这个问题。

关键是我试图在画廊中展示我从 http 服务器获得的几张图片。问题是当我第一次打开活动时，如果图片不在特定文件夹、本地缓存中，我会显示默认图片，然后我会通过 AsyncTask 启动图片下载。我尝试的是在图片下载并保存在文件夹中后，更新/刷新活动中的图库以显示图片。如果我向左/向右滑动图库，则在刷新图库时会出现图片，但我希望发生这种情况以避免滑动图库。

还要注释基本适配器始终正确引用图片，如果文件夹中不存在文件，则选择默认图片。

```
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView i = new ImageView(mContext);
    i.setImageBitmap(getPicturePath(position + 1));
    i.setLayoutParams(new Gallery.LayoutParams(wHeight / 3, wHeight / 4));
    i.setScaleType(ImageView.ScaleType.FIT_XY);
    i.setBackgroundResource(mGalleryItemBackground);

    return i;
}

private Bitmap getPicturePath(int picture) {
    String picturePath = Environment.getExternalStorageDirectory()
            .getAbsolutePath()
            + "/pictures/" + picture
            + ".jpg";
    File f = new File(picturePath);
    if (f.exists())
        return BitmapFactory.decodeFile(picturePath);
    else
        return BitmapFactory.decodeResource(mContext.getResources(),
                R.drawable.no_image);
} 
```

我尝试在图库中使用 invalidate() 并在适配器 baseadapter 中使用 notifyDataSetChanged()，但它不起作用，屏幕上的图片不会改变。

任何建议如何解决这个问题？

非常感谢。

# asp.net - 在 asp.net 网站上开始打印 gridview1 的程序

> ID：11522333
> 
> 赞同：0
> 
> 时间：2012-07-17T12:21:45.337
> 
> 标签：asp.net, database, vb.net, linq-to-sql

我有一个带有“作者”表的数据库“Pubs”。我通过拖动“作者”从数据库中创建了一个 dbml 文件。

这是“Default.aspx.vb”

```
Public Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim db As New PubsContext
        Dim products = From p In db.authors _
                       Select p

        GridView1.DataSource = author
        GridView1.DataBind()
    End Sub
End Class 
```

这是它的类：“Class1.vb”

```
Partial Public Class PubsContext
    Public Function GetProductsByCategory(ByVal id1 As Integer) As IEnumerable(Of authors)
        Return From p In Me.authors _
               Where p.ProductID = id1 _
               Select p
    End Function
End Class 
```

作者和作者的更正有一个红色下划线。我应该怎么办？

# android - 谷歌地图未在 MapView 上呈现

> ID：11522334
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:21:48.510
> 
> 标签：android, google-maps, android-mapview

我在 Mapview 上渲染谷歌地图时遇到问题，在我的主布局中，我有一个登录屏幕和视图翻转器。在 ViewFlipper 中，我有 2 个布局，第一个布局描述了我的公司，第二个布局有我的 mapview。所以当我从我的第一个 Viewflipper 布局翻转时，会显示 Mapview，但谷歌地图没有在 mpaview 上呈现。

我已经指定了与地图相关的所有权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:52:07.783

您的 Mapkey 肯定不正确，或者您正在使用在其他系统上生成的密钥。

# c# - 在本地计算机上启用或禁用用户

> ID：11522336
> 
> 赞同：3
> 
> 时间：2012-07-17T12:21:59.813
> 
> 标签：c#

要启用或禁用本地计算机上的用户，我使用以下代码段。

```
DirectoryEntry localMachine = new DirectoryEntry("WinNT://" + Environment.MachineName);
DirectoryEntry currentUser = localMachine.Children.Find(user, "Administrators");
currentUser.Invoke("AccountDisabled", new object[] { true });
currentUser.CommitChanges(); 
```

我将用户分配为字符串。我收到“找不到文件路径错误”：Comexception Unhandled。

我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:03:12.827

如果您使用的是 .NET 3.5 及更高版本，则应查看`System.DirectoryServices.AccountManagement`(S.DS.AM) 命名空间。在这里阅读所有相关信息：

*   [在 .NET Framework 3.5 中管理目录安全主体](http://msdn.microsoft.com/en-us/magazine/cc135979.aspx)
*   [System.DirectoryServices.AccountManagement 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)

基本上，您可以定义机器级上下文并在 AD 中轻松找到用户和/或组：

```
// set up domain context
PrincipalContext ctx = new PrincipalContext(ContextType.Machine);

// find a user
UserPrincipal user = UserPrincipal.FindByIdentity(ctx, "SomeUserName");

if(user != null)
{
   user.Enabled = false;
   user.Save();
} 
```

新的 S.DS.AM 使得在 AD 中与用户和组一起玩变得非常容易！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:37:40.227

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.path.aspx)`DirectoryEntry`页面：

> 连接到计算机上的用户。例如，**“ `WinNT://<domain name>/<computer name>/<user name>`”**。如果您要连接到本地计算机，**“ `WinNT://<computer name>/<user name>`”**。

因此，您获取用户的代码应该是：

```
DirectoryEntry currentUser = new DirectoryEntry("WinNT://" + Environment.MachineName + "/" + user); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-02T05:18:05.293

像这样使用

```
 DirectoryEntry local = new DirectoryEntry("WinNT://localhost");
        DirectoryEntry user = local.Children.Find(username);
        user.InvokeSet("AccountDisabled", true);
        user.CommitChanges(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:28:17.657

尝试使用统一命名约定，即像这样使用“\\”：

```
DirectoryEntry localMachine = new DirectoryEntry("WinNT:\\" + Environment.MachineName); 
```

# sql - Rails：如何在 has_many 中使用 JOIN 设置 IF 条件：通过关系

> ID：11522337
> 
> 赞同：0
> 
> 时间：2012-07-17T12:22:02.047
> 
> 标签：sql, ruby-on-rails, join, has-many-through

我有一个应用程序，用户可以在其中自定义日历并用给定的事件池填充它。用户还可以用别名覆盖他自己的日历的标题。所以我有以下 has_many :through 关系：

```
class Calendar < ActiveRecord::Base
    has_many :event_aliases
    has_many :events, :through => :event_aliases
end

class Event < ActiveRecord::Base
    attr_accessible :title

    has_many :event_aliases
    has_many :calendars, :through => :event_aliases
end

class EventAliases < ActiveRecord::Base
    attr_accessible :course_id, :calendar_id, :custom_name

    belongs_to :event
    belongs_to :calendar
end 
```

不，我想提供带有别名的日历。如果事件有别名 ( `custom_name`)，则应该显示它。`title`否则应显示默认事件名称 ( )。

有没有一种方法可以轻松设置一个查询，该查询返回当前日历的所有事件，无论是`custom_name`（如果存在）还是使用默认值`title`？

我当前的解决方案是将 if 条件硬编码到我想避免的查询中。

```
title_column = "case when custom_name IS NOT NULL then custom_name else title end as title"

# assume we are given a calendar_id
Calendar.find(calendar_id).event_aliases.joins(:event).select(title_column, :event_id).each do |event_alias|
    # do further stuff here
end 
```

如果需要，我还可以获取所有`event_aliases`并遍历它们中的每一个以获取默认值`title`。

```
# assume we are given a calendar_id
Calendar.find(calendar_id).event_aliases.each do |event_alias|
    title = event_alias.custom_name
    if title.nil?
        title = Event.find(event_alias.event_id).title
    # do further stuff here
end 
```

但这给我带来了太多的查询。

那么有没有更聪明的方法来完成我想要的？也许使用命名范围或其他花哨的导轨技术？

**更新**

我最终通过 has_many :through 关系进行了“自定义”选择。所以唯一改变的是`Calendar`模型：

```
class Calendar < ActiveRecord::Base
    has_many :event_aliases
    has_many :events, :through => :event_aliases,
             :select => "event_aliases.custom_name as custom_name, events.*"
end 
```

所以访问`custom_name`/ the `title`now 有点像@Doon 建议的那样：

```
Calendar.find(1).courses.each do |course|
    title = course.custom_name || course.title
end 
```

这只会创建 2 个查询而不是 3 个：

```
 Calendar Load (0.6ms)  SELECT `calendars`.* FROM `calendars` WHERE `calendars`.`id` = 1 LIMIT 1
  Event Load (0.7ms)  SELECT event_aliases.custom_name as custom_name, events.* FROM `events` INNER JOIN `event_aliases` ON `events`.`id` = `event_aliases`.`event_id` WHERE `event_aliases`.`calendar_id` = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:52:06.410

`includes`在提取别名的同时使用来获取事件怎么样。

```
 Calendar.find(1).event_aliases.includes(:event).each do  |e| 
     puts  e.custom_name.blank? ? e.event.title : e.custom_name
 end 
```

SQL Rails 生成的将如下所示：

```
 Calendar Load (0.2ms)  SELECT "calendars".* FROM "calendars" WHERE "calendars"."id" = ?      LIMIT 1
 EventAlias Load (0.2ms)  SELECT "event_aliases".* FROM "event_aliases" WHERE "event_aliases"."calendar_id" = 1
 Event Load (0.2ms)  SELECT "events".* FROM "events" WHERE "events"."id" IN (1, 2) 
```

另外，如果您想稍微清理一下，可以向 EventAlias 添加一个虚拟字段

```
class EventAlias < ActiveRecord::Base

  def name
    custom_name || self.event.title
  end

end 
```

只要您使用包含，查询将是相同的。

# python - 带有子进程的 avconv

> ID：11522339
> 
> 赞同：0
> 
> 时间：2012-07-17T12:22:16.467
> 
> 标签：python, ffmpeg, subprocess

似乎我从来没有真正设法将我的头包裹在子流程上。此命令行在 bash 中工作

```
avconv -i "concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts" -vcodec copy -acodec copy /tmp/test1.ts 
```

如果我试试这个：

```
cmdline = ['avconv', '-i "concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts"', '-vcodec copy', '-acodec copy', '/tmp/test1.ts']
subprocess.call(cmdline) 
```

它退出 avconv 并出现以下错误：

```
avconv version 0.8.3-4:0.8.3-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav developers
  built on Jun 12 2012 16:52:09 with gcc 4.6.3
Unrecognized option 'i "concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts"'
Failed to set value '-vcodec copy' for option 'i "concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts"'
1 
```

我尝试了一些变体（包括 shell=True），但我无法找出问题所在。

## 更新

Cjb 给出了一个非常有效的答案。但我的真实代码更复杂。我相信很难从中得到一些东西。但是我把它扔在这里以防万一我错过了一个明显的问题。

```
def run_avconv(output_dir, fnames):
    full_fnames = [os.path.join(output_dir, fname.replace('\n', ''))
                   for fname in fnames]
    concatted_files = '|'.join(full_fnames)
    cmd_line = [AVCONV_CMD,
                '-i',
                '"concat:' + concatted_files + '"',
                '-vcodec',
                'copy',
                '-acodec',
                'copy',
                os.path.join(output_dir, 'out.ts')]
    subprocess.Popen(cmd_line) 
```

full_fnames 变量是：

```
['/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment2.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment3.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment4.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment5.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment6.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment7.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment8.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment9.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment10.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment11.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment12.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment13.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment14.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment15.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment16.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment17.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment18.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment19.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment20.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment21.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment22.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment23.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment24.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment25.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment26.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment27.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment28.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment29.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment30.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment31.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment32.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment33.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment34.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment35.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment36.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment37.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment38.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment39.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment40.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment41.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment42.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment43.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment44.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment45.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment46.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment47.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment48.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment49.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment50.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment51.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment52.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment53.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment54.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment55.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment56.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment57.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment58.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment59.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment60.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment61.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment62.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment63.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment64.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment65.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment66.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment67.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment68.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment69.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment70.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment71.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment72.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment73.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment74.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment75.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment76.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment77.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment78.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment79.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment80.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment81.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment82.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment83.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment84.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment85.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment86.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment87.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment88.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment89.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment90.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment91.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment92.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment93.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment94.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment95.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment96.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment97.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment98.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment99.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment100.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment101.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment102.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment103.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment104.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment105.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment106.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment107.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment108.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment109.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment110.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment111.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment112.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment113.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment114.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment115.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment116.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment117.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment118.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment119.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment120.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment121.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment122.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment123.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment124.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment125.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment126.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment127.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment128.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment129.ts',
 '/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment130.ts'] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:25:39.803

试试这个：

```
cmdline = [
    'avconv',
    '-i',
    'concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts',
    '-vcodec',
    'copy',
    '-acodec',
    'copy',
    '/tmp/test1.ts',
]
subprocess.call(cmdline) 
```

您确实希望将每个单独的部分作为列表中的不同项目传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:39:27.427

@djc 的答案是正确的，但是如果您想通过复制和粘贴字符串来工作，您可以执行以下操作：

```
import shlex
from pprint import pprint

cmd = """avconv -i "concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts" -vcodec copy -acodec copy /tmp/test1.ts"""
for_subprocess = shlex.split(cmd)
pprint(for_subprocess)

['avconv',
 '-i',
 'concat:/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment0.ts|/tmp/BABAR_AND_THE_A-011A-hts-a-v1-cc3651d01841d748_Layer6/6148_Period1/segment1.ts',
 '-vcodec',
 'copy',
 '-acodec',
 'copy',
 '/tmp/test1.ts'] 
```

# android-ndk - Android缓冲区数据和openCV处理函数

> ID：11522353
> 
> 赞同：1
> 
> 时间：2012-07-17T12:23:17.603
> 
> 标签：android-ndk

```
 /* Now allocate the buffer */
int dataBufferSize=(int)(optimalSize.height*optimalSize.width*(ImageFormat.getBitsPerPixel(parameters.getPreviewFormat())/8.0)); 
   mBuffer= new byte[dataBufferSize];
/* The buffer where the current frame will be copied */
   mFrame = new byte[dataBufferSize];
   mCamera.addCallbackBuffer(mBuffer);

 mCamera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() 
{
     private long timestamp=0;
     public synchronized void onPreviewFrame(byte[] data, Camera camera) 
     {
        System.arraycopy(data, 0, mFrame, 0, data.length);
        Log.i("Completed copying date","Ready for processing");
        try{
              camera.addCallbackBuffer(mBuffer);
           }catch (Exception e) 
           {
             Log.e("Camera", "addCallbackBuffer error");
             return;
           }
                return;
    }
});   

void EyeBlink::blink(IplImage* frame)

    {
        CvSeq*  comp = 0;
        CvRect  window, eye;
        int     key, nc, found;
        int     text_delay, stage = STAGE_INIT;
        int     valueBlink =0;

        int delay, i;

        capture = cvCaptureFromCAM(0);
        if (!capture)
            //exit_nicely("Cannot initialize camera!");

        cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_WIDTH,  FRAME_WIDTH);
        cvSetCaptureProperty(capture, CV_CAP_PROP_FRAME_HEIGHT, FRAME_HEIGHT);

        frame = cvQueryFrame(capture);
        if (!frame)
            exit_nicely("cannot query frame!");

        cvInitFont(&font, CV_FONT_HERSHEY_SIMPLEX, 0.4, 0.4, 0, 1, 8);
        cvNamedWindow(wnd_name, 1);

        /*for (delay = 20, i = 0; i < 6; i++, delay = 20)
            while (delay)
            {
                frame = cvQueryFrame(capture);
                if (!frame)
                    exit_nicely("cannot query frame!");
                DRAW_TEXT(frame, msg[i], delay, 0);
                cvShowImage(wnd_name, frame);
                cvWaitKey(30);
            }*/

        storage = cvCreateMemStorage(0);
        if (!storage)
            exit_nicely("cannot allocate memory storage!");

        kernel = cvCreateStructuringElementEx(3, 3, 1, 1, CV_SHAPE_CROSS, NULL);
        gray   = cvCreateImage(cvGetSize(frame), 8, 1);
        prev   = cvCreateImage(cvGetSize(frame), 8, 1);
        diff   = cvCreateImage(cvGetSize(frame), 8, 1);
        tpl    = cvCreateImage(cvSize(TPL_WIDTH, TPL_HEIGHT), 8, 1);

        if (!kernel || !gray || !prev || !diff || !tpl)
            exit_nicely("system error.");

        gray->origin  = frame->origin;
        prev->origin  = frame->origin;
        diff->origin  = frame->origin;

        cvNamedWindow(wnd_debug, 1);
        while (key != 'q')
        {
                   int t=100;
            frame = cvQueryFrame(capture);
            if (!frame)
                exit_nicely("cannot query frame!");
            frame->origin = 0;

            if (stage == STAGE_INIT)
                window = cvRect(0, 0, frame->width, frame->height);

            cvCvtColor(frame, gray, CV_BGR2GRAY);

            nc = get_connected_components(gray, prev, window, &comp);

            if (stage == STAGE_INIT && is_eye_pair(comp, nc, &eye))
            {
                 int i;

                            for (i = 0; i < 5; i++)
                            {
                                  frame = frame1[i];
                                   if (!frame)
                                        exit_nicely("cannot query frame");
                                         cvShowImage(wnd_name, frame);
                                    if (diff)
                                          cvShowImage(wnd_debug, diff);
                                        cvWaitKey(30);
                             }

                cvSetImageROI(gray, eye);
                cvCopy(gray, tpl, NULL);
                cvResetImageROI(gray);

                stage = STAGE_TRACKING;
                text_delay = 10;
            }

            if (stage == STAGE_TRACKING)
            {
                found = locate_eye(gray, tpl, &window, &eye);

                if (!found || key == 'r')
                    stage = STAGE_INIT;

                if (is_blink(comp, nc, window, eye))
                    text_delay = 10;

                DRAW_RECTS(frame, diff, window, eye);
                DRAW_TEXT(frame, "blink!", text_delay, 1);
            }

            cvShowImage(wnd_name, frame);
            cvShowImage(wnd_debug, diff);
            prev = (IplImage*)cvClone(gray);
            key  = cvWaitKey(15);
                    t--;
        }

        exit_nicely(NULL);

    } 
```

我正在研究眨眼检测，但遇到了一些挑战。首先，我在 android 中使用 setPreviewCallbackwithBuffer 方法捕获帧并缓冲它们，但我的问题是如何利用以字节为单位存储的帧。这意味着从上面的代码中消除 cvCameraFromCam 和 cvQueryFrame 函数。

# vb.net - 函数不读取最后一个值

> ID：11522354
> 
> 赞同：0
> 
> 时间：2012-07-17T12:23:17.743
> 
> 标签：vb.net, for-loop, datatable, dataset, dataview

我正在为连锁餐厅开发一个程序，他们通常应该能够通过连接到 dbf 文件的 vb.net 应用程序来计算他们的客人数量和销售额。我的数据集和我的数据表一样正确填写（通过填写 datarowview = 正确数据进行检查）但是后来我遇到了一个问题，在使用我的数据表的所有函数中，数据表跳过了最终值，在这种情况下，它是来自的所有值一个月，所以它要么跳过 31 天，要么跳过第 30 天。尝试了一段时间，尝试了每个，调试了很多（我发现它是最后一个值）。但现在我不知道为什么函数不使用最后一个值

```
 Public Function Getgctakeout(ByVal i_table As DataTable)
       table = i_table
       i = 0
       gctakeout = 0

    For Each row As DataRow In i_table.Rows

        gctakeout = gctakeout + Convert.ToDouble(row(4))

    Next row
        'MessageBox.Show(gctakeout)
    Return gctakeout
    End Function 
```

此函数不使用最后一行的值来计算 gctakeout

以主的名义做错了什么:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:31:12.880

假设您`DataTable`的填写确实正确，您还有另外两个选择来获得总和。

1.  [`DataTable.Compute`](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)使用也适用于 .NET < 2.0的旧方法
2.  使用`Linq-To-DatSet`它是[`Enumerable.Sum`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)

1)

```
Dim Sum = CType(table.Compute("Sum(ColumnName)", Nothing), Double) 
```

2)

```
Dim Sum = table.AsEnumerable().
                Sum(Function(row)row.Field(Of Double)("ColumnName")) 
```

# iphone - 将对象作为方法的参数传递是否会在 ARC 下增加其保留计数器？

> ID：11522356
> 
> 赞同：0
> 
> 时间：2012-07-17T12:23:41.140
> 
> 标签：iphone, objective-c, automatic-ref-counting

> **可能重复：**
> [为什么 ARC 保留方法参数？](https://stackoverflow.com/questions/10310441/why-does-arc-retain-method-arguments)

在ARC下，当我将一个对象作为方法的参数传递时，它是否会使对象的保留计数器在幕后增加？

正如我所看到的，当一个线程创建一个由指针强烈引用的对象并将引用传递给另一个线程以供长期使用时，知道答案可能对多线程编程产生一些重要影响，而在原始线程中，指针是消息发送后不久就被销毁，因此保留计数器减少仅仅是因为`{}`声明指针的范围已经结束，结果对象被释放，因此第二个线程在某事中间意外丢失了对象，这使程序崩溃。但是，如果对象的保留计数器在传递给方法时确实增加了一个，则不会出现这种有问题的情况。

# c# - 如果默认“全部”值应为 -1，则组合框选定项

> ID：11522365
> 
> 赞同：0
> 
> 时间：2012-07-17T12:24:14.000
> 
> 标签：c#, .net, wpf, visual-studio-2008

我有一个包含组合框的 ac# WPF 项目。我在“选择”中有几个项目，如果我选择其中任何一个，那么值是正确的（第一项为 0，第二项为 1，所以第四项）如何将第一项添加为“全部”，如果用户选择“全部”，那么值为“-1”？现在“all”是第一项，因此将其设置为“0”值

感谢任何可以提供帮助的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:29:27.243

-1 值表示未选择任何内容尝试使用 SelectedIndex-1 作为您的值。如果您从 xaml 引用 SelectedIndex，则需要一些绑定[转换器。](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:29:42.927

而不是使用 SelectedIndex 使用 SelectedItem 并检查其是否为“All”值。

例子：

**视图模型**

```
public class MyViewModel
{
   public ObservableCollection<string> TheItems { get; set;}
   public string TheSelectedItem { get; set; }

   public MyViewModel()
   {
       TheItems = new ObservableCollection<string>();
       TheItems.Add("All");
       //Adding all the other value

   }

   public void SomeMethod()
   {
       if(TheSelectedItem=="All")
       {
          //Do whatever needs to be done 
       }
   }
} 
```

**风景**

```
<ListView ItemsSource="{Binding TheItems}" SelectedItem="{Binding TheSelectedItem}"/> 
```

# html - 在 HTML 页面上选择包含两个标签的内容

> ID：11522366
> 
> 赞同：0
> 
> 时间：2012-07-17T12:24:15.023
> 
> 标签：html, parsing, c#-4.0, tags

这是我的需要。我有一个这样的html代码：

```
<html>
<tag1>Title1</tag1>
<tag2>Value</tag2>
<tag3>Dont care</tag3>
<tag1>Title2</tag1>
<tag2>Value2</tag2>
<tag3>Dont care</tag3>
</html> 
```

我希望能够在结果中包含一个字符串列表或类似这样的结果：

line1 : Title1, Value1 line2 : Title2, Value2 等，在设置过滤器标签后（在本例中为 tag1 和 tag2）。

有任何想法吗 ？（在 .NET 4.0 C# 中）

# php - 我自己的php函数有这个错误

> ID：11522378
> 
> 赞同：-3
> 
> 时间：2012-07-17T12:24:50.943
> 
> 标签：php, mysql

我有这个功能：

```
function OUTconf($conf_name){
    $sql = mysql_query("SELECT CONF_VALUE FROM ".prefix."CONFIG WHERE CONF_NAME='".$conf_name."'") or die(mysql_error());
    $rs  = mysql_fetch_assoc($sql);
    $val = $rs['CONF_VALUE'];
    return $val;
} 
```

我有这个 html 表单：

```
<html>
<head>
    <title> <? OUTconf("SITE_TITLE"); ?> </title>
</head>
<body>
<? echo 'hello !!'; ?>
</body>
</html> 
```

但是当我测试代码时，我得到了这个错误：

```
Fatal error: Cannot redeclare outconf() (previously declared in C:\AppServ\www\pv\includes\functions.php:13) in C:\AppServ\www\pv\includes\functions.php on line 18 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:27:47.387

我相信您在多个地方声明了导致该错误的功能。确保您只将“ `function OUTconf($conf_name){`”行放在一个位置，而不是代码文件或您包含的其他文件中的任何其他位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:26:45.203

> 致命错误：无法在第 18 行的 C:\AppServ\www\pv\includes\functions.php 中重新声明 outconf()（之前在 C:\AppServ\www\pv\includes\functions.php:13 中声明）

这意味着functions.php 正在尝试声明函数OUTconf()，而它已经被声明（通过相同的脚本）。

很可能您两次包含functions.php。尝试使用[`include_once`](http://php.net/include_once)而不是[`include`](http://php.net/include).

# web-services - 如何在其他应用程序中从 Liferay 获取所有用户和角色信息？

> ID：11522381
> 
> 赞同：3
> 
> 时间：2012-07-17T12:25:02.580
> 
> 标签：web-services, service, liferay, liferay-6

我正在开发一个 C# 程序，我需要从 Liferay 数据库中显示用户和角色列表。
有什么服务可以帮我获取这些信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:34:04.053

您应该查看 Liferay JSON Web 服务以获取此类信息（无需直接查询数据库）。

如果您访问[http://your-liferay-server-url.com/api/jsonws](http://your-liferay-server-url.com/api/jsonws)，您可以看到 Liferay 提供的所有 Web 服务端点，并且您可以调用这些端点。

但是，如果您想直接查询 Liferay 数据库，请查看下表：

*   groups_roles
*   团体
*   角色_
*   用户_
*   用户角色
*   用户组角色

这应该是您获取信息所需的数据库中的所有表，您甚至可能不需要所有这些表来满足您的需要。

# ajax - 我想使用javascript加载动态页面...

> ID：11522382
> 
> 赞同：0
> 
> 时间：2012-07-17T12:25:05.497
> 
> 标签：ajax

我想通过使用 javascript-ajax 加载动态页面...我有侧面（垂直）标签，就像 facebook 一样（在左侧）和右侧显示该标签的内容（页面）。当我单击任何选项卡时，内容（页面）应该加载在右侧......我并不是说加载整个页面。我的意思是更改右侧的 div....另一个 youtube 主页示例....在左侧的 youtube 中，我们有订阅的频道，当我们单击该选项卡中的任何一个时，会加载该频道的视频..如何做到这一点....任何示例链接？请分享

# .net - 针对工作项签入的 TFS 下载代码

> ID：11522383
> 
> 赞同：1
> 
> 时间：2012-07-17T12:25:08.430
> 
> 标签：.net, tfs, changeset, workitem

在 TFS 上，我今天针对 ID：xxxx 的工作项签入了几个代码文件。因此，TFS 可能已经创建了一个变更集，其变更集 ID 与该签入相关联。有没有办法通过仅知道工作项 ID 来获取针对工作项签入的代码（那些更改的文件）。我想以编程方式（c＃.net）或使用命令行来完成。我是 TFS 的新手，所以如果我在这里遗漏了一些非常简单的东西，请原谅我。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:40:56.070

查看msdn 上的[此](http://msdn.microsoft.com/en-us/library/w51xa47k.aspx)`changeset`文档以获取有关该命令的更多信息以及[该](http://msdn.microsoft.com/en-us/library/yxtbh4yh.aspx)命令的此文档`history`。

例如，要查看更改集详细信息，您可以键入：

```
tf changeset 8675309 /noprompt 
```

**编辑：**

试试这个[链接](http://rstonkus.wordpress.com/2009/06/11/how-to-get-files-associated-to-specified-work-item-from-tfs/)，其中包含获取与工作项关联的文件的 ac# 代码。

# visual-studio-2010 - 使用 stsadm 的部署解决方案

> ID：11522385
> 
> 赞同：1
> 
> 时间：2012-07-17T12:25:13.543
> 
> 标签：visual-studio-2010, sharepoint-2010, stsadm

我有一个包含 4 个项目的解决方案，可以在 Sharepoint 中自动执行一些流程。这些项目是：

*   WebPartProject：创建自定义 Web 部件

*   CreateTemplate：创建2个文档库（带列），一个简单的List（和列）和一个Page，用来放置WebPartProject的webpart以及之前的文档库和简单列表在这个页面中。

*   WorkflowOne：将工作流放在上一个文档库中

*   WorkflowTwo：将另一个工作流放在与以前相同的文档库中。

所以，当我在 VS 中部署这个解决方案时，一切正常......但是当我尝试使用 powershell 部署这个解决方案时，它不起作用。

我使用以下脚本：

*   stsadm -o addsolution -filename CreateTemplateSolution.wsp ------> 操作成功完成

*   stsadm -o deploysolution -name CreateTemplateSolution.wsp -immediate -allowGacDeployment ------> 定时器作业成功创建

当我转到站点操作--> 站点设置--> 站点操作--> 管理站点功能时，我可以找到我的解决方案，我将他的状态设置为已激活，重新启动 IIS...。但是当我打开 Sharepoint 时，我找不到任何东西.... :(。我错过了什么吗？？？？？？

谢谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:03:55.750

您必须强制执行计时器作业：

```
stsadm -o execadmsvcjobs 
```

stsadm 在 SharePoint 2010 中已弃用。

请改用 Powershell。

[这里是一个很好的策略点！](http://www.dotnetmafia.com/blogs/dotnettipoftheday/archive/2009/12/02/adding-and-deploying-solutions-with-powershell-in-sharepoint-2010.aspx)

# c++ - constexpr 使用静态函数初始化静态成员

> ID：11522399
> 
> 赞同：35
> 
> 时间：2012-07-17T12:26:00.113
> 
> 标签：c++, gcc, g++, static-members, constexpr

# 要求

我想要一个从函数`constexpr`计算的值（即编译时常量） 。`constexpr`我希望这两个范围都在一个类的命名空间内，即一个静态方法和一个类的静态成员。

# 第一次尝试

我首先以（对我而言）显而易见的方式写了这个：

```
class C1 {
  constexpr static int foo(int x) { return x + 1; }
  constexpr static int bar = foo(sizeof(int));
}; 
```

`g++-4.5.3 -std=gnu++0x`说：

```
error: ‘static int C1::foo(int)’ cannot appear in a constant-expression
error: a function call cannot appear in a constant-expression 
```

`g++-4.6.3 -std=gnu++0x`抱怨：

```
error: field initializer is not constant 
```

# 第二次尝试

好吧，我想，也许我必须把东西移出课堂。所以我尝试了以下方法：

```
class C2 {
  constexpr static int foo(int x) { return x + 1; }
  constexpr static int bar;
};
constexpr int C2::bar = C2::foo(sizeof(int)); 
```

`g++-4.5.3`将毫无怨言地编译。不幸的是，我的其他代码使用了一些基于范围的`for`循环，所以我必须至少有 4.6。现在我仔细查看[支持列表](http://gcc.gnu.org/projects/cxx0x.html)，似乎`constexpr`也需要 4.6。我`g++-4.6.3`得到

```
3:24: error: constexpr static data member ‘bar’ must have an initializer
5:19: error: redeclaration ‘C2::bar’ differs in ‘constexpr’
3:24: error: from previous declaration ‘C2::bar’
5:19: error: ‘C2::bar’ declared ‘constexpr’ outside its class
5:19: error: declaration of ‘const int C2::bar’ outside of class is not definition [-fpermissive] 
```

这对我来说听起来很奇怪。这里的“不同`constexpr`”有何不同？我不想添加`-fpermissive`，因为我更喜欢严格检查我的其他代码。将`foo`实现移到类主体之外没有明显的效果。

# 预期答案

有人可以解释这里发生了什么吗？我怎样才能实现我正在尝试做的事情？我主要对以下类型的答案感兴趣：

*   在 gcc-4.6 中进行这项工作的一种方法
*   观察到后来的 gcc 版本可以正确处理其中一个版本
*   一个指向规范的指针，根据该规范，我的至少一个构造*应该可以*工作，这样我就可以让 gcc 开发人员真正让它工作
*   根据规范，我想要的信息是不可能的，最好有一些关于这个限制背后的理由的信息

也欢迎其他有用的答案，但可能不会那么容易被接受。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-17T13:06:46.397

该标准要求（第 9.4.2 节）：

> 字面量类型的`static`数据成员可以用说明`constexpr`符在类定义中声明；如果是这样，它的声明应指定一个*大括号或等式初始化器*，其中作为*赋值表达式*的每个*初始化器子句*都是一个常量表达式。

 *在您的“第二次尝试”和 Ilya 答案中的代码中，声明没有*括号或相等初始化器*。

~~您的第一个代码是正确的。不幸的是 gcc 4.6 不接受它，而且我不知道有什么地方可以方便地尝试 4.7.x（例如 ideone.com 仍然停留在 gcc 4.5 上）。~~

这是不可能的，因为不幸的是，标准禁止`constexpr`在类已完成的任何上下文中初始化静态数据成员。*9.2p2 中大括号或等式初始化器*的特殊规则仅适用于**非静态**数据成员，但这是静态的。

最可能的原因是`constexpr`变量必须在成员函数体内作为编译时常量表达式可用，因此变量初始化器在函数体之前完全定义——这意味着函数仍然不完整（未定义）在初始化器的上下文中，然后这个规则开始生效，使表达式不是一个常量表达式：

> 在函数或构造函数的定义之外调用未定义的`constexpr`函数或未定义的构造函数；`constexpr``constexpr``constexpr`

考虑：

```
class C1
{
  constexpr static int foo(int x) { return x + bar; }
  constexpr static int bar = foo(sizeof(int));
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-03T17:06:39.103

1) Ilya 的示例应该是无效代码，因为**静态 constexpr 数据成员 bar**是在外线初始化的，违反了标准中的以下语句：

> 9.4.2 [class.static.data] p3: ... 文字类型的静态数据成员可以在类定义中使用 constexpr 说明符声明；如果是这样，它的声明应指定一个大括号或等式初始化器，其中作为赋值表达式的每个初始化器子句都是一个常量表达式。

2) MvG 问题中的代码：

```
class C1 {
  constexpr static int foo(int x) { return x + 1; }
  constexpr static int bar = foo(sizeof(int));
}; 
```

就我所见是有效的，直觉上人们会期望它可以工作，因为*静态成员 foo(int)*是由*bar*开始的时间处理定义的（假设自上而下处理）。一些事实：

*   我确实同意，尽管*类 C1*在调用 foo 时并不完整（基于 9.2p2）**，但***类 C1*的完整性或不完整性并没有说明就标准而言是否定义了 foo。
*   我确实搜索了成员函数定义的标准，但没有找到任何东西。
*   因此，如果我的逻辑有效，Ben 提到的陈述在这里不适用：

    > 在 constexpr 函数或 constexpr 构造函数的定义之外调用未定义的 constexpr 函数或未定义的 constexpr 构造函数；

3）Ben给出的最后一个例子，简化：

```
class C1
{
  constexpr static int foo() { return bar; }
  constexpr static int bar = foo();
}; 
```

看起来无效，但出于不同的原因，而不仅仅是因为*foo在**bar*的初始化程序中被调用。逻辑如下：

*   *foo()在**静态 constexpr 成员 bar*的初始化程序中被调用，因此它必须是一个常量表达式（由 9.4.2 p3）。
*   因为它是一个 constexpr 函数的调用，所以*函数调用替换*(7.1.5 p5) 开始了。
*   它们不是函数的参数，所以剩下的就是“隐式地将结果返回的表达式或花括号初始化列表转换为函数的返回类型，就像通过复制初始化一样”。(7.1.5 p5)
*   返回表达式只是*bar*，它是一个左值，需要左值到右值的转换。
*   但是通过（5.19 p2）中的第 9 条，哪个*条* **不满足**，因为它尚未初始化：

    > *   左值到右值的转换（4.1），除非它应用于：
    >     *   一个整数或枚举类型的左值，它引用具有前面初始化的非易失性 const 对象，用常量表达式初始化。

*   *因此， bar*的左值到右值转换不会产生不符合 (9.4.2 p3) 要求的常量表达式。

*   因此，通过 (5.19 p2) 中的第 4 条，对*foo()*的调用不是常量表达式：

    > 使用参数调用 constexpr 函数，当被函数调用替换 (7.1.5) 替换时，不会产生常量表达式

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T12:36:17.643

```
#include <iostream>

class C1 
{
public:
    constexpr static int foo(constexpr int x)
    { 
        return x + 1;
    }

    static constexpr int bar;
};

constexpr int C1::bar = C1::foo(sizeof(int));

int main()
{
    std::cout << C1::bar << std::endl;
    return 0;
} 
```

这样的初始化效果很好，但只适用于clang

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-12T08:54:23.487

可能这里的问题与类中声明/定义的顺序有关。众所周知，您甚至可以在类中声明/定义任何成员之前使用它。

当您在类中定义 de constexpr 值时，编译器没有可用的 constexpr 函数，因为它在类中。

也许，[菲利普](https://stackoverflow.com/a/13095136/6578349)回答，与这个想法有关，是理解这个问题的好点。

请注意此代码编译没有问题：

```
constexpr int fooext(int x) { return x + 1; }
struct C1 {
  constexpr static int foo(int x) { return x + 1; }
  constexpr static int bar = fooext(5);
};

constexpr static int barext = C1::foo(5); 
```*

# ruby-on-rails - 无法在 mac Os X 上使用 npm 安装 juggernaut - 版本 10.7.4

> ID：11522400
> 
> 赞同：0
> 
> 时间：2012-07-17T12:26:08.617
> 
> 标签：ruby-on-rails, npm, juggernaut

我按照下面的链接安装 npm

[http://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/](http://shapeshed.com/setting-up-nodejs-and-npm-on-mac-osx/)

Node -v 0.8.2 已正确安装。

然后我使用以下命令安装 npm

```
curl http://npmjs.org/install.sh | sh 
```

但我得到一个错误说 -

```
Failed to get tarball url for npm/1.1 
```

我还从 github 克隆了 npm，然后进行了 make install，但它在下面显示的第三行停止了。

```
npm http GET https://github.com/isaacs/ronnjs/tarball/master
npm http 200 https://github.com/isaacs/ronnjs/tarball/master
npm http GET https://registry.npmjs.org/opts 
```

在尝试了一段时间后，我下载了 install.sh 文件，然后 在所有地方将[https://registry.npmjs.org/](https://registry.npmjs.org/)更改为[http://registry.npmjs.org/](http://registry.npmjs.org/)。

然后以root用户身份运行以下命令

```
bash path_to_install.sh 
```

并安装了 npm -v = 1.1.42

但是当我尝试使用以下命令安装剑圣时

```
npm install -g juggernaut 
```

它卡在下一行，没有任何反应。

```
npm http GET https://registry.npmjs.org/juggernaut 
```

我想问题出在 https url 或我安装 npm 的方式上。

我该如何解决这个问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T10:25:17.680

当我在 npm 中将[https://registry.npmjs.org](https://registry.npmjs.org)替换为[http://registry.npmjs.org时，它起作用了。](http://registry.npmjs.org)

# asp.net - 计算税美国电子商务 asp.net mvc3

> ID：11522408
> 
> 赞同：0
> 
> 时间：2012-07-17T12:26:43.000
> 
> 标签：asp.net, asp.net-mvc-3, e-commerce

我正在开发一个拍卖门户网站，我想根据州和城市生成包含所有运费和适用税的发票。

是否有任何网络服务或 api 用于计算拍卖门户产品的税款？

我不想将所有信息存储在数据库中，我希望它是动态的。

谢谢

# sql - SQL Server 2008 的按级别连接，如 Oracle

> ID：11522410
> 
> 赞同：1
> 
> 时间：2012-07-17T12:26:56.917
> 
> 标签：sql, oracle, sql-server-2008

```
nDays := Round( dEndTime - dStartTime ) + 1; 

For i in 1..7 Loop
 nDay := i + 1;
    if i = 7 Then
      nDay := 1;
    End If;

SELECT To_Date(To_Char((dStartTime+Level-1),'DD.MM.YYYY')||' 00:00','DD.MM.YYYY HH24:MI'),
To_Date(To_Char((dStartTime+Level-1),'DD.MM.YYYY')||' 23:59','DD.MM.YYYY HH24:MI')
FROM DUAL
WHERE To_Char( dStartTime + Level -1 , 'd' ) =  To_Char(nDay)
CONNECT BY Level <= nDays;

End Loop; 
```

输出：

```
22-JUL-12
23-JUL-12
18-JUL-12
19-JUL-12
20-JUL-12
21-JUL-12 
```

我需要将此查询转换为 SQL Server 2008，请帮助找到相同的解决方法......

我已经用 nDay 从 1 到 7 的单个查询尝试了上述输出.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:15:27.277

您可以使用递归 CTE 执行此操作。但是，这种语法可能很难记住，所以当我需要一些项目时，我会执行以下操作：

```
select *
from (select row_number() over (order by (select NULL)) as seqnum
      from information_schema.columns
     ) t
where seqnum < <value> 
```

可以使用任何表。我只是放在INFORMATION_SCHEMA.columns 表中，因为它很简单，一般有几十或几百行。

您的输出与查询不匹配。以下生成两个值之间的所有日期，这些值相当接近，这是一个示例：

```
declare @dstarttime date = '2012-07-11', @dendtime date=  '2012-07-13';
with const as (select @dstarttime as dStartTime, @dendtime as dendTime)
SELECT DATEADD(d, seqnum - 1, dStartTime)
FROM (select *
      from (select row_number() over (order by (select NULL)) as seqnum, const.*
            from information_schema.columns cross join const
           ) t
      where seqnum <= DATEDIFF(d, dStartTime, dendTime) + 1
     ) t 
```

正如我所说，您也可以使用递归 CTE 来执行此操作，或者，如果有的话，可以使用日历表。

# android - ListView 在 Android 中无法正确构建

> ID：11522412
> 
> 赞同：0
> 
> 时间：2012-07-17T12:27:00.423
> 
> 标签：android, listview, android-listview

我正在使用此代码处理简单的列表视图，

```
public class RadioDemoActivity extends Activity {
ArrayList<String> list = new ArrayList<String>();
MyListAdapter mla;
ListView lv;
int position = -1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    lv = (ListView) findViewById(R.id.listView1);

    list.add("one");
    list.add("two");
    list.add("three");
    list.add("four");
    list.add("five");
    list.add("six");
    list.add("seven");
    list.add("eight");
    list.add("nine");
    list.add("ten");
    list.add("eleven");
    list.add("twelve");
    list.add("thirteen");
    list.add("fourteen");
    list.add("fifteen");
    list.add("sixteen");
    list.add("seventeen");
    list.add("eightteen");
    list.add("nineteen");
    list.add("twenty");

    mla = new MyListAdapter(this);
    lv.setAdapter(mla);

}

public class MyListAdapter extends BaseAdapter {
    private LayoutInflater mInflater;

    public MyListAdapter(Context context) {
        mInflater = LayoutInflater.from(context);

    }

    public int getCount() {
        return list.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.cust_list, null);

            TextView tv = (TextView)convertView.findViewById(R.id.txt_title);
            ImageView iv = (ImageView)convertView.findViewById(R.id.imageView1);
            tv.setText(list.get(position));
            Log.v("log_tag","position In"+list.get(position));

        }
        return convertView;
    }
  }
} 
```

但结果就像十一点后的图像中显示的一，一，二。请帮我 ![enter image description here](../Images/c97a8bfa8df1135390a3a1add79c111c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:37:33.603

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
         ListHolder holder = null;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.cust_list, null);
            holder=new ListHolder();
            holder.tv = (TextView)convertView.findViewById(R.id.txt_title);
            holder.iv = (ImageView)convertView.findViewById(R.id.imageView1);
            Log.v("log_tag","position In"+list.get(position));
            convertView.setTag(holder);
        }
         else
        {
        holder=(ListHolder) convertView.getTag();
        }
        holder.tv.setText(list.get(position));
        return convertView;
    }
 static class ListHolder
{
    TextView tv;

    ImageView iv;
} 
```

Always write else condition in holder.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:30:00.620

将您更改`getView()`为：

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.cust_list, null);
    }
    TextView tv = (TextView)convertView.findViewById(R.id.txt_title);
    ImageView iv = (ImageView)convertView.findViewById(R.id.imageView1);
    tv.setText(list.get(position));
    Log.v("log_tag","position In"+list.get(position));

    return convertView;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:32:16.910

不能在“正确”的地方添加评论，但 Niteesh Mehra 上面关于将 LV 放在滚动视图中的建议是错误的。LV 是一个在垂直滚动列表中显示项目的视图，因此没有必要再这样做了。

至于您的问题-您的 getView() 实现是错误的。如果 convertView 不为空，您应该**重用给定的视图，但重用意味着您已经获得了****视图**（布局），但您仍然必须使用该行的内容来填充它。因此，您应该执行以下操作：

```
if( convertView == null ) {
 convertView = <inflate view from XML>;
} 
```

Then you your data in view's elements **unconditionally**.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T09:15:36.963

I changed my getView() like this and problem solved.

```
public View getView(int position, View convertView, ViewGroup parent) {

        convertView = mInflater.inflate(R.layout.cust_list, null);

        TextView tv = (TextView) convertView.findViewById(R.id.txt_title);
        ImageView iv = (ImageView) convertView.findViewById(R.id.imageView1);

        tv.setText(list.get(position));
        tv.setTag(list.get(position));

        if (RadioDemoActivity.this.position==position)
            iv.setImageResource(R.drawable.greenround);

        return convertView;

    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T12:30:14.497

像这样改变`getView`方法

```
if (convertView == null) {
        convertView = mInflater.inflate(R.layout.cust_list, null);
        }
        TextView tv = (TextView)convertView.findViewById(R.id.txt_title);
        ImageView iv = (ImageView)convertView.findViewById(R.id.imageView1);
        tv.setText(list.get(position));
        Log.v("log_tag","position In"+list.get(position)); 
```

# c++ - 使用 unordered_map 移动构造函数

> ID：11522416
> 
> 赞同：5
> 
> 时间：2012-07-17T12:27:11.543
> 
> 标签：c++, linux, gcc, c++11, unordered-map

我有一些代码：

```
Class A{
//...A has a move ctor here.
};

unordered_map<int, A> bla;
A tmp;
//operations on tmp
bla.insert(make_pair<int, A>(1, move(tmp))); 
```

我想调用移动构造函数而不是 A 类的复制 ctor。这段代码正确吗？我认同。奇怪的是它可以编译并适用于 Ubuntu Precise（g++ 显示版本 4.6.3）。但在 CentOS 上，它无法编译。前几行是：

```
 In substitution of ‘template<class _From1, class _To1> static decltype     ((__test_aux<_To1>(declval<_From1>()), std::__sfinae_types::__one()))     std::__is_convertible_helper<_From, _To, false>::__test(int) [with _From1 = _From1; _To1 = _To1; _From = const A&; _To = A] [with _From1 = const A&; _To1 = A]’:
/gcc/x86_64-redhat-linux/4.7.1/../../../../include/c++/4.7.1/type_traits:1258:70:   required from ‘constexpr const bool std::__is_convertible_helper<const A&, A, false>::value’
/gcc/x86_64-redhat-linux/4.7.1/../../../../include/c++/4.7.1/type_traits:1263:12:   required from ‘struct std::is_convertible<const A&, A>’
/gcc/x86_64-redhat-linux/4.7.1/../../../../include/c++/4.7.1/type_traits:116:12:   required from ‘struct std::__and_<std::is_convertible<const int&, int>, std::is_convertible<const A&, A> >’
/gcc/x86_64-redhat-linux/4.7.1/../../../../include/c++/4.7.1/bits/stl_pair.h:113:38:   required from ‘constexpr std::pair<typename std::__decay_and_strip<_T1>::__type, typename std::__decay_and_strip<_T2>::__type> std::make_pair(_T1&&, _T2&&) [with _T1 = int; _T2 = A; typename std::__decay_and_strip<_T2>::__type = A; typename std::__decay_and_strip<_T1>::__type = int]’ 
```

似乎试图调用复制ctor。关于这个错误的任何想法？

好吧，我的 CentOS 没有最新版本的 gcc/libstdc++，所以实际上我自己构建了这些（gcc 4.7.1）并将它们安装在我的主目录中。这有关系吗？这是我编译时的配置：

```
Target: x86_64-redhat-linux
Configured with: ../gcc-4.7.1/configure --prefix=/home/bla/usr/ --with-mpc=/home/bla/usr/ --with-mpfr=/home/bla/usr/ --with-gmp=/home/bla/usr/ --disable-multilib --enable-shared --enable-threads=posix --enable-checking=release --with-system-zlib --enable-__cxa_atexit --disable-libunwind-exceptions --enable-libgcj-multifile --enable-languages=c,c++ --enable-java-awt=gtk --disable-dssi --disable-plugin --with-cpu=generic --build=x86_64-redhat-linux
Thread model: posix
gcc version 4.7.1 (GCC) 
```

**更新**：“移动语义”的使用可能有问题。我尝试使用 STL 字符串“移动”：

```
unordered_map<int, string> bla;
string tmp("hello world");
//operations on tmp
bla.emplace(1, move(tmp)); 
```

没关系，内部字符真的被“移动”了。

但它不适用于我的 A 类......这是 A：

```
class A
{
    public:
        A(){...}
        ~A(){}
        A(A&& other){...}
    private:
        A& operator = (const A& other);
        A& operator = ( A&& other);
        A(const A& other);
}; 
```

**更新**：我得到它的工作，当 A 是：

```
class A
{
    public:
        A(){...}
        ~A(){}
        A(A&& other){...}
        A(const A& other){}
    private:
        A& operator = (const A& other);
        A& operator = ( A&& other);
}; 
```

注意**COPY CTOR**。现在我所有的移动语义都正确，并且在运行时**实际上并没有调用复制ctor 。**我对“移动”有什么误解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T16:24:13.273

**不要**为 指定模板参数`std::make_pair`，因为这会破坏其完美转发机制。即，如果您不能使用`emplace`，则只需`make_pair`按如下方式调用：

```
bla.insert(make_pair(1, move(tmp))); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-26T06:41:44.083

我相信这个问题与这个问题有相同的答案，[并且](https://stackoverflow.com/questions/11488490/vectorpush-back-insists-on-using-copy-constructor-though-a-move-constructor-is)可能是一个重复的问题。

**但是，当使用noexcept**关键字和 move 构造函数时，我仍然没有成功编译它。

# java - 在单线程中多次调用静态方法

> ID：11522417
> 
> 赞同：4
> 
> 时间：2012-07-17T12:27:11.957
> 
> 标签：java, static, synchronisation

请看这个类，静态方法调用和输出。

```
public class OneThreadManyStaticCalls {

public static final Calculator calculator = new Calculator();
    public static void main(String[] args) {
        dummy(0, 1, 1);
        dummy(0, 2, 2);
        dummy(0, 3, 5);
        dummy(0, 4, 44);
        dummy(0, 5, 5);
    }

    public static void dummy(int a, int b, int expected) {

        System.out.print(System.currentTimeMillis() + "\t");
        if (calculator.add(a, b) == expected) {
            System.out.println("OK");
        } else {
            System.err.println("NOK");
        }
    }
} 
```

我得到了运行这个程序的不同（来自 System.out.print 的订单）输出。例子：

```
 NOK
   NOK
   1342527389506    OK
   1342527389506    OK
   1342527389506    1342527389506   1342527389506   OK 
```

你们谁能解释我（详细）为什么？提前致谢。sznury

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T12:29:51.560

System.err 和 System.out 是两个不同的流，它们在您的控制台窗口中交错 - 它们不一定是同步的。~~尝试使用`System.*.flush()`~~（没关系，这似乎不起作用）强制处理输出，或将所有输出打印到同一流。

```
public static void dummy(int a, int b, int expected) {
    System.out.print(System.currentTimeMillis() + "\t");
    if ((a + b) == expected) { // I don't have your Calculator :<
        System.out.println("OK");
    } else {
        System.out.println("NOK");
    }
} 
```

给出这个结果

```
1342528255764   OK
1342528255764   OK
1342528255764   NOK
1342528255764   NOK
1342528255764   OK 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:42:41.073

一个更简单的例子是

```
for (int i = 0; i <= 20; i++)
    (i % 2 == 0 ? System.out : System.err).println(i); 
```

即使它们都进入控制台，也不能保证两个流之间的顺序。

一次运行打印（每次运行更改）

```
1
0
3
2
5
4
7
6
9
8
11
10
13
12
15
14
17
16
19
18
20 
```

注意：在我的 IDE 中，System.err 行显示为红色

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:36:04.583

@Jacob Raihle 正确表明这是将您的 system.err 调用更改为 system.out

```
public static void dummy(int a, int b, int expected) {
    System.out.print(a+" "+b+" = "+expected);
    if((a+b)==expected) 
        System.out.println(" OK");
    else 
        System.out.println(" NOK");

} 
```

# c# - 处理没有参数的委托

> ID：11522418
> 
> 赞同：2
> 
> 时间：2012-07-17T12:27:13.123
> 
> 标签：c#, anonymous-methods

我有一个带有 out 参数的委托和事件：

> public delegate void ExampleDelegate(object sender, EventArgs e, out string value);
> 
> 公共事件 ExampleDelegate 示例；

当我试图处理事件时：

```
 mg.Example += (sender, e, val) =>
 {
    //do stuff
 }; 
```

我收到错误*Parameter 3 must be declared with the 'out' 关键字*

当我像这样输入建议的 out 关键字时：

```
 mg.Example += (sender, e, out val) =>
 {
    //do stuff
 }; 
```

我收到了额外的错误*，找不到命名空间名称“val”的类型..etc*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:32:43.807

好吧，正如它[在这里](https://stackoverflow.com/questions/1990569/write-a-lambda-or-anonymous-function-that-accepts-an-out-parameter)清楚地说明的那样，您需要指定的类型`val`：

```
(sender, e, out string val)=> ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:40:44.723

您的事件处理程序不符合 .net 准则。

如果您必须这样使用它，请使用委托，而不是事件。

如果您有两个事件处理程序修改您的 out 参数，您会遇到麻烦。

参考：[事件教程](http://msdn.microsoft.com/en-us/library/aa645739%28v=vs.71%29.aspx)

> .NET 框架指南
> 
> 尽管 C# 语言允许事件使用任何委托类型，但 .NET Framework 对应该用于事件的委托类型有一些更严格的准则。如果您打算让您的组件与 .NET Framework 一起使用，您可能需要遵循这些准则。
> 
> .NET Framework 指南指出用于事件的委托类型应采用两个参数，一个指示事件源的“对象源”参数，以及一个封装有关事件的任何附加信息的“e”参数。“e”参数的类型应派生自 EventArgs 类。对于不使用任何附加信息的事件，.NET Framework 已经定义了适当的委托类型：EventHandler。

zmbq 已经为您提供了如何纠正错误的答案。

*我添加这个只是为了完整性。*

# .net - .NET 4.0 Cast 通用接口

> ID：11522420
> 
> 赞同：4
> 
> 时间：2012-07-17T12:27:23.810
> 
> 标签：.net, generics, interface, casting

我有两个接口，其中一个是通用接口，只允许从第二个接口派生的类型。它们看起来像这样：

```
public interface IProvider<T> where T : IContent
{
    T getContent(int i);
    void addContent(T content);
}
public interface IContent
{
    string whatIAm();
} 
```

当然，我的真实接口更复杂，但足以说明我的问题是什么。现在我为每个接口都有一个具体的类：

```
public class Provider : IProvider<FileContent> 
{
    public FileContent getContent(int i)
    {
        return null;
    }
    public void addContent(FileContent content)
    {
    }
}

public class FileContent : IContent{
    public string whatIAm(){
        return "FileContent";
    }
} 
```

在我的代码中，我想使用引用类型“IProvider”，但是转换出错了......请看这个例子：

```
 static void Main(string[] args)
    {
        Provider p = new Provider(); //works
        IProvider<FileContent> pp = p as IProvider<FileContent>; //also works
        IProvider<IContent> ppp = pp as IProvider<IContent>; //fails :(
    } 
```

`ppp`始终为空。我必须改变这个演员阵容的工作吗？提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T12:39:57.750

类型参数必须完全匹配。`IProvider<IContent>`是不同的类型`IProvider<FileContent>`，它们之间没有继承。

想象一下，您有一个`IProvider<IContent> ppp`  来自您`IProvider<FileContent>`和一个开发人员的尝试`ppp.addContent(someOtherContentThatIsNoFileContent)`。该声明对 有效`IProvider<IContent>`，但它会破坏类型安全，因此不允许这样的转换是正确的做法。 

[泛型类型参数的协变和逆变](http://msdn.microsoft.com/en-us/library/dd233059)在某些情况下允许这样的事情，但由于您的接口使用类型参数作为输入参数和输出参数，这不适用于它现在声明的方式。

**编辑：**看看`IEnumerable`' 的定义：

```
public interface IEnumerable<out T> 
```

因此，您知道 IEnumerable`T`仅用作输出参数（您不能添加项目，只能枚举它们），并且`out`关键字指定它`T`是协变的。所以你可以做

```
IEnumerable<String> strings = new List<String>();
IEnumerable<Object> objects = strings; 
```

如果要执行此操作，则必须`add`从界面中删除该方法。同样适用于输入参数和`in`泛型类型参数的关键字。 

您的界面将如下所示：

```
public interface IProvider<out T> where T : IContent
{
    T getContent(int i);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:34:27.473

这不是 C# 中泛型工作的方式。泛型 of`IProvider<FileContent>`不是 的子类型`IProvider<IContent>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:46:08.280

你写了

```
Provider p = new Provider(); //works
IProvider<FileContent> pp = p as IProvider<FileContent>; //also works
IProvider<IContent> ppp = pp as IProvider<IContent>; //fails :( 
```

让我们假设所有这三个都有效。那么就可以写出以下内容：

```
ppp.addContent(new NonFileContent()); 
```

where`NonFileContent`是一个实现`IContent`，但不是派生自的类`FileContent`。

现在，想象一下在以下调用中会发生什么：

```
FileContent fc = pp.getContent(0); 
```

应该返回刚刚添加的对象。但是，它是一个`NonFileContent`实例，而不是一个`FileContent`实例。因此，从返回值必须是`FileContent`实例的方法中返回这个对象是不可能的，这就是为什么编译器首先不考虑赋值兼容的`pp`原因。`ppp`

# c++ - 不同类之间非静态函数的C++回调

> ID：11522422
> 
> 赞同：0
> 
> 时间：2012-07-17T12:27:34.213
> 
> 标签：c++, boost, callback, function-pointers

我有一个 A 类，我打算将它放入共享库中，因为它与设备驱动程序交互。

我有一个 B 类，将来可能是 C、D、E...，它将使用共享库使用 A 类。

我想要在 A 类中设置回调函数的能力，以便当特定事件发生时，B、C、D、E 类的非静态成员函数应该由 A 类调用。

我在 google 上搜索了 C++ 中的回调函数，但发现 C 风格的回调定义不支持非静态成员函数。

可以使用函数指针来完成吗？

请为不违反 OOPS 概念的 C++ 回调提供一些建议。

我还发现了一个名为“Boost”的库，它提供了类似的功能，但如果可能的话，我想避免额外库的开销。回调函数推荐使用 Boost 吗？

**编辑：** B、C、D、E 不会共享任何层次结构，它们将是完全独立的类。但是它们都有A类的对象。A类也有一个公共函数来设置回调函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:59:55.247

一个选择，如果你*真的*想避免多态函数包装器几乎不重要的开销，是使这些函数静态并让它们采用“用户数据”`void*`参数，指向函数是成员的类的适当实例的。在静态函数内部，您然后转换回适当的类型：

```
#include <iostream>

struct A{
  typedef void (*callback_type)(void*, int);
  callback_type callback;
  void* user_data;
  void set_callback(callback_type cb, void* ud){
     callback = cb; user_data = ud;
  }
  void invoke(){ callback(user_data, 42); }
};

struct B{
  static void cb_foo(void* vself, int data){
    B* self = static_cast<B*>(vself);
    self->foo(data);
  }
  void foo(int data){ std::cout << data * 2 << "\n"; }
};

struct C{
  static void cb_bar(void* vself, int data){
    C* self = static_cast<C*>(vself);
    self->bar(data);
  }
  void bar(int data){ std::cout << data / 2 << "\n"; }
};

int main(){
  A a;
  B b;
  a.set_callback(&B::cb_foo, &b);
  a.invoke();
  C c;
  a.set_callback(&C::cb_bar, &c);
  a.invoke();
} 
```

[Ideone 上的实时示例。](http://ideone.com/dprhk)

不过，我个人建议使用`std::function`，因为上述内容在可以接受为回调的方面受到严重限制。`std::function`是一个多态函数包装器，这意味着它可以采用普通函数指针、成员函数指针甚至函子（函数对象）并以相同的方式调用它们。与`std::bind`允许您将参数绑定到函数的 一起，您可以轻松地回调成员函数。Boost 也提供了它们（[Boost.Function](http://www.boost.org/libs/function/)，[Boost.Bind](http://www.boost.org/libs/bind/)）。

```
#include <iostream>
#include <functional> // C++11
//#include <boost/function.hpp>
//#include <boost/bind.hpp>

struct A{
  std::function<void(int)> callback;
  void invoke(){ callback(42); }
};

struct B{
  void foo(int data){ std::cout << data * 2 << "\n"; }
};

struct C{
  void bar(int data){ std::cout << data / 2 << "\n"; }
};

int main(){
  using namespace std::placeholders; // namespace for argument placeholders for std::bind
                                     // not needed for Boost.Bind
  A a;
  B b;
  a.callback = std::bind(&B::foo, &b, _1);
  a.invoke();
  C c;
  a.callback = std::bind(&C::bar, &c, _1);
  a.invoke();
}; 
```

[Ideone 上的实时示例。](http://ideone.com/gKkmh)

基本上`std::bind`会自动完成您在第一个版本中必须手动执行的操作，它保存对象指针并调用其上的成员函数。但是，它不是通过`void*`指针来执行此操作的，而是`std::bind`为每个不同的对象指针返回不同的绑定器类型。这就是你需要的原因`std::function`，因为它不在乎你传递了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:36:09.613

假设 {B, C, D, E} 共享一些层次结构，因此您不需要为每个类编写新版本，使回调函数静态但添加一个附加参数，它是对 {B, C, D 的引用, E} 回调中涉及的实例。这样，一旦您在函数的上下文中，您将能够在相关对象上调用非静态函数/操作。

如果 {B, C, D, E} 或将来出现的任何东西的类层次结构不同，并且您找不到共同的起点，您可能需要求助于更通用的东西，例如 void 指针，尽管这使得很难知道可以在对象上调用哪些功能。

# objective-c - 传回数据：未调用委托方法

> ID：11522428
> 
> 赞同：1
> 
> 时间：2012-07-17T12:27:54.480
> 
> 标签：objective-c, delegates, oauth-2.0, tableview, gdata

我正在开发一个使用 oauth 2.0 与谷歌文档连接的应用程序，一旦用户连接，他单击一个按钮，该按钮转到 tableView 以显示所有文档。为此，我正在使用 segue 并向前传递数据。现在我希望用户选择一个文档，勾选它并返回到视图控制器，将数据传回并显示选择了哪个文档。我读到要传回数据，我需要使用协议和委托。我遵循了这个：[在视图控制器之间传递数据，](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)但我的问题是我的委托方法没有被调用。

这是我的故事板，只有 2 个视图，一个视图控制器和一个名为`VistaTableViewController`.

![在此处输入图像描述](../Images/ac33e87c91ae6e4782bc4a77586d2f5c.png)

当用户按下身份验证按钮时，他使用 oauth 连接到谷歌文档。当他按下“Listar”按钮时，VistaTableViewController 就会出现。

这是 VistaTableViewController.h 的代码，其中定义了协议：

```
#import <UIKit/UIKit.h>
#import "GData.h"

@class VistaTableViewController;

@protocol VistaTableViewControllerDelegate <NSObject>
- (void)loqueselecciono:(VistaTableViewController *)controller didSelectDoc:(NSString *)documento;
@end

@interface VistaTableViewController : UITableViewController <UITableViewDataSource>
{
    IBOutlet UITableView *tablalistar;
    GDataFeedDocList *mDocListFeed2;
}

@property (nonatomic, weak) id <VistaTableViewControllerDelegate> delegate;
@property (nonatomic, strong) NSString *documento;
@property (nonatomic, retain) GDataFeedDocList *mDocListFeed2;

@end 
```

这是我调用委托方法的 VistaTableViewController.m 的代码：

```
#import "VistaTableViewController.h"

@implementation VistaTableViewController
{
    NSInteger selectedIndex;
}

@synthesize delegate;
@synthesize documento;
@synthesize mDocListFeed2;

- (void)viewDidLoad
{
    [super viewDidLoad];

    selectedIndex = [[mDocListFeed2 entries] indexOfObject:self.documento];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[mDocListFeed2 entries] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"tablalistar"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"tablalistar"];
    }

    GDataEntrySpreadsheet *doc = [[mDocListFeed2 entries] objectAtIndex:indexPath.row];

    cell.textLabel.text = [[doc title] stringValue];

    if (indexPath.row == selectedIndex)
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
    else
        cell.accessoryType = UITableViewCellAccessoryNone;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    if (selectedIndex != NSNotFound)
    {
        UITableViewCell *cell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:selectedIndex inSection:0]];
        cell.accessoryType = UITableViewCellAccessoryNone;
    }
    selectedIndex = indexPath.row;

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    GDataEntrySpreadsheet *doc = [[mDocListFeed2 entries] objectAtIndex:indexPath.row];

    NSString *theDoc = [[doc title] stringValue];

    [self.delegate loqueselecciono:self didSelectDoc:theDoc];
}

@end 
```

好的，所以现在我只需要告诉 ViewController 导入 VistaTableViewController 并符合它的协议。

这是 ViewController.h 的代码

```
#import <UIKit/UIKit.h>
#import "GTMOAuth2ViewControllerTouch.h"
#import "GData.h"
#import "VistaTableViewController.h"

@interface ViewController : UIViewController <VistaTableViewControllerDelegate>

- (GDataServiceGoogleDocs *)docsService;
- (void)authorize;
- (void) mifetch;
- (IBAction)autenticarse;
- (IBAction)listar:(id)sender;
- (void) ticket: (GDataServiceTicket *) ticket finishedWithFeed: (GDataFeedDocList *) feed error: (NSError *) error;

@property (nonatomic, retain) NSString *accessToken;
@property (nonatomic, retain) GDataFeedDocList *mDocListFeed;
@property (nonatomic, retain) GDataServiceTicket *mDoclistFetchTicket;

@end 
```

然后在 Viewcontroller.m 中，我按如下方式实现委托方法：（我只想显示一个警报，显示所选文档的标题）。

```
- (void)loqueselecciono:(VistaTableViewController *)controller didSelectDoc:(NSString *)documento;
{
    [self.navigationController popViewControllerAnimated:YES];

    UIAlertView *alertView = [ [UIAlertView alloc] initWithTitle:@"doc seleccionado"
                                                         message:[NSString stringWithFormat:@"titulo: %@", documento]
                                                        delegate:self
                                               cancelButtonTitle:@"Dismiss"
                                               otherButtonTitles:nil];

    [alertView show];
} 
```

在 Viewcontroller.m 中，我也写了这个来将 self 分配给委托。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"displaydocs"])
    {
        VistaTableViewController *vistatableview = [[VistaTableViewController alloc] init];

        vistatableview.delegate = self;

        vistatableview = [segue.destinationViewController performSelector:@selector(setMDocListFeed2:) withObject:mDocListFeed];
    }
} 
```

好的，所以我得到 de tableView 显示所有文档，用户可以选择一个显示 de 复选标记但未调用委托方法，因此它不会返回到 viewcontroller 视图并且没有数据传回。

我错过了什么？？谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:57:11.023

当您编写时，`VistaTableViewController *vistatableview = [[VistaTableViewController alloc] init];`您正在创建一个新对象。您真正想要做的是使用`segue.destinationViewController`，它应该是 a`VistaTableViewController`并将**其**委托设置为`self`。

实际上，具有委托的对象不是被推送和处理视图逻辑的对象。

（此外，`setMDocListFeed2`不返回一个对象，所以分配`performSelector`是相当误导。）

# iphone - 智能 CVS 和核心数据

> ID：11522432
> 
> 赞同：0
> 
> 时间：2012-07-17T12:28:07.023
> 
> 标签：iphone, objective-c, ios, xcode, cvs

我的 iMac 上安装了智能 cvs，并且我已经从 cvs 更新了应用程序。然后我对我的代码和核心数据进行了一些更改（核心数据更改是：从核心数据实体中删除一些属性），然后我尝试将更改提交到 cvs，但我收到以下错误：

'xxxxxxx.m' 的最新检查失败，（即 xxxxxxx 是文件名）。命令中止。

您如何看待这个错误？如何解决它，并获得成功的提交？

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:23:50.987

如果您尝试提交服务器上更新的可用更改，这就是 CVS 服务器的常见错误消息。首先执行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:31:49.387

尝试通过按 command-shift-k 或转到 Product->Clean 来运行清理。然后尝试再次构建。如果失败，请尝试将文件的内容复制到其他地方，将其移动到垃圾箱（当您选择删除时，它会说删除引用或移动到垃圾箱，您要移动到垃圾箱），然后再次创建文件并复制代码. 只是一些东西可以尝试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-24T13:21:54.587

尝试更新然后提交，如果这不能解决问题，请将核心数据标记为已删除文件

# selenium-webdriver - 如何使用 Selenium WebDriver 处理登录弹出窗口？

> ID：11522434
> 
> 赞同：38
> 
> 时间：2012-07-17T12:28:10.817
> 
> 标签：selenium-webdriver, popup, alert

如何使用 Selenium Webdriver 处理登录弹出窗口？我在此处附上了示例屏幕。如何在此登录弹出/警报窗口中输入/输入用户名和密码？

感谢和问候， ![在此处输入图像描述](../Images/c549c70e562d977330a4024189cddcf9.png)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-17T12:46:35.677

使用在 URL 请求中发送用户名和密码的方法：

```
http://username:password@the-site.com 
```

所以只是为了让它更清楚。用户名是`username`密码`password`，其余的是测试网站的常用 URL

为我工作，无需任何调整。

示例 Java 代码：

```
public static final String TEST_ENVIRONMENT = "the-site.com";
private WebDriver driver;

public void login(String uname, String pwd){
  String URL = "http://" + uname + ":" + pwd + "@" + TEST_ENVIRONMENT;
  driver.get(URL);
}

@Test
public void testLogin(){
   driver = new FirefoxDriver();
   login("Pavel", "UltraSecretPassword");
   //Assert...
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-06-09T07:41:54.380

这应该适用于 windows server 2012 和 IE。

```
var alert = driver.SwitchTo().Alert();

alert.SetAuthenticationCredentials("username", "password");

alert.Accept(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-08-10T09:38:15.250

这在 WebDriver 3.0 中非常简单（目前它是 Beta 版）。

```
Alert alert = driver.switchTo().alert() ;
alert.authenticateUsing(new UserAndPassword(_user_name,_password));
driver.switchTo().defaultContent() ; 
```

希望这会有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-12-31T06:43:34.883

现在在 2020 年**Selenium 4**支持使用 Basic 和 Digest auth 进行身份验证。它使用 CDP，目前仅支持 chromium 衍生的浏览器

例子 ：

**Java 示例：**

```
 Webdriver driver = new ChromeDriver();

    ((HasAuthentication) driver).register(UsernameAndPassword.of("username", "pass"));

    driver.get("http://sitewithauth"); 
```

**注意**：在 Alpha-7 中有一个错误，它会发送用户名/密码的用户名。需要等待硒版本的下一个版本，因为主干中提供了修复[https://github.com/SeleniumHQ/selenium/commit/4917444886ba16a033a81a2a9676c9267c472894](https://github.com/SeleniumHQ/selenium/commit/4917444886ba16a033a81a2a9676c9267c472894)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-06T05:04:32.830

**解决方案：使用 Thread 和 Robot 的 Windows 活动目录身份验证**

我使用 Java Thread 和 Robot 和 Selenium webdriver 来自动化我们网站的 Windows 活动目录身份验证过程。此逻辑在 Firefox 和 Chrome 中运行良好，但在 IE 中不起作用。出于某种原因，当身份验证窗口弹出时，IE 会终止 Web 驱动程序，而 Chrome 和 Firefox 会阻止 Web 驱动程序被终止。我没有尝试使用其他网络浏览器，例如 Safari。

```
//...
//Note: this logic works in Chrome and Firefox. It did not work in IE and I did not try Safari.
//...

//import relevant packages here

public class TestDemo {

    static WebDriver driver;

    public static void main(String[] args) {

        //setup web driver
        System.setProperty("webdriver.chrome.driver", "path to your chromedriver.exe");
        driver = new ChromeDriver();

        //create new thread for interaction with windows authentication window
        (new Thread(new LoginWindow())).start();                

        //open your url. this will prompt you for windows authentication
        driver.get("your url");

        //add test scripts below ...
        driver.findElement(By.linkText("Home")).click();    
        //.....
        //.....
    }

    //inner class for Login thread    
    public class LoginWindow implements Runnable {

        @Override
        public void run() {
            try {
                login();
            } catch (Exception ex) {
                System.out.println("Error in Login Thread: " + ex.getMessage());
            }
        }

        public void login() throws Exception {

            //wait - increase this wait period if required
            Thread.sleep(5000);

            //create robot for keyboard operations
            Robot rb = new Robot();

            //Enter user name by ctrl-v
            StringSelection username = new StringSelection("username");
            Toolkit.getDefaultToolkit().getSystemClipboard().setContents(username, null);            
            rb.keyPress(KeyEvent.VK_CONTROL);
            rb.keyPress(KeyEvent.VK_V);
            rb.keyRelease(KeyEvent.VK_V);
            rb.keyRelease(KeyEvent.VK_CONTROL);

            //tab to password entry field
            rb.keyPress(KeyEvent.VK_TAB);
            rb.keyRelease(KeyEvent.VK_TAB);
            Thread.sleep(2000);

            //Enter password by ctrl-v
            StringSelection pwd = new StringSelection("password");
            Toolkit.getDefaultToolkit().getSystemClipboard().setContents(pwd, null);
            rb.keyPress(KeyEvent.VK_CONTROL);
            rb.keyPress(KeyEvent.VK_V);
            rb.keyRelease(KeyEvent.VK_V);
            rb.keyRelease(KeyEvent.VK_CONTROL);

            //press enter
            rb.keyPress(KeyEvent.VK_ENTER);
            rb.keyRelease(KeyEvent.VK_ENTER);

            //wait
            Thread.sleep(5000);
        }                        
    }      
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-22T05:40:11.793

处理身份验证弹出窗口的最简单方法是在 Url 本身中输入凭据。例如，我有像`Username: admin`和这样的凭证`Password: admin`：

```
WebDriver driver = new ChromeDriver();
driver.get("https://admin:admin@your website url"); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-03T10:51:24.973

这是基于 Python 的 selenium 的解决方案，经过源代码（[此处](https://github.com/SeleniumHQ/selenium/tree/master/py)）。我发现这 3 个步骤很有用。

```
obj = driver.switch_to.alert
obj.send_keys(keysToSend="username\ue004password")
obj.accept() 
```

这里 \ue004 是 TAB 的值，您可以在源代码的 Keys 类中找到它。

我想同样的方法也可以在 JAVA 中使用，但不确定。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-01-22T21:02:34.640

我的用例是：

1.  导航到 web 应用程序。
2.  Webapp 检测到我没有登录，并重定向到 SSO 站点 - 不同的服务器！
3.  SSO 站点（可能在 Jenkins 上）检测到我未登录 AD，并显示登录弹出窗口。
4.  输入凭据后，您将被重定向回 webapp。

我使用的是 Selenium 3 的更高版本，并且未检测到登录弹出窗口`driver.switchTo().alert();`- 结果为`NoAlertPresentException`.

仅`username:password`在 URL 中提供不会从上面的第 1 步传播到第 2 步。

我的解决方法：

```
import org.apache.http.client.utils.URIBuilder;

driver.get(...webapp_location...);
wait.until(ExpectedConditions.urlContains(...sso_server...));

URIBuilder uri = null;
try {
    uri = new URIBuilder(driver.getCurrentUrl());
} catch (URISyntaxException ex) {
    ex.printStackTrace();
}
uri.setUserInfo(username, password);
driver.navigate().to(uri.toString()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T11:56:55.453

您可以使用此 Autoit 脚本来处理登录弹出窗口：

```
WinWaitActive("Authentication Required","","10")
If WinExists("Authentication Required") Then
Send("username{TAB}")
Send("Password{Enter}")
EndIf' 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-02-08T20:52:21.447

每当我的应用程序打开时，我都会收到 Windows 安全警报。为了解决这个问题，我使用了以下程序

```
import org.openqa.selenium.security.UserAndPassword;
UserAndPassword UP = new UserAndPassword("userName","Password");
driver.switchTo().alert().authenticateUsing(UP); 
```

这解决了我登录应用程序的问题。我希望这可以帮助所有正在寻找身份验证 Windows 安全警报的人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-09-27T09:31:54.603

只需切换到警报并使用`authenticateUsing`设置用户名和密码，然后返回父窗口

```
Alert Windowalert = driver.switchTo().alert() ;
Windowalert.authenticateUsing(new UserAndPassword(_user_name,_password));
driver.switchTo().defaultContent() ; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-15T13:59:15.510

弹出窗口的类型在 webdriver 警报中定义：[https ://www.selenium.dev/documentation/webdriver/browser/alerts/](https://www.selenium.dev/documentation/webdriver/browser/alerts/)

这是另一种类型 - 身份验证弹出窗口 - 例如由 Weblogic 生成而 Selenium 看不到。

作为 HTTPS，用户/密码不能直接放在 URL 中。

解决方案是创建一个浏览器扩展：打包或解包。

这是解包和打包过程的代码：[https ://qatestautomation.com/2019/11/11/handle-authentication-popup-in-chrome-with-selenium-webdriver-using-java/](https://qatestautomation.com/2019/11/11/handle-authentication-popup-in-chrome-with-selenium-webdriver-using-java/)

在 manifest.json 中而不是“https://ReplaceYourCompanyUrl” 中放置“<all_urls>”。解压后可以直接在 Selenium 中使用：

```
#python:
co=webdriver.ChromeOptions()
co.add_argument("load-extension=ExtensionFolder") 
```

<all_urls> 是[匹配模式](https://developer.chrome.com/docs/extensions/mv2/match_patterns/)

请求流程在[https://developer.chrome.com/docs/extensions/reference/webRequest/](https://developer.chrome.com/docs/extensions/reference/webRequest/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-01-09T08:14:12.783

在 C# Selenium Web Driver 中，我设法让它使用以下代码：

```
var alert = TestDriver.SwitchTo().Alert();
alert.SendKeys(CurrentTestingConfiguration.Configuration.BasicAuthUser + Keys.Tab + CurrentTestingConfiguration.Configuration.BasicAuthPassword);
alert.Accept(); 
```

虽然看起来很相似，但以下内容不适用于 Firefox（Keys.Tab 重置所有表单，密码将写入用户字段中）：

```
alert.SendKeys(CurrentTestingConfiguration.Configuration.BasicAuthUser);
alert.SendKeys(Keys.Tab);
alert.SendKeys(CurrentTestingConfiguration.Configuration.BasicAuthPassword); 
```

另外，我尝试了以下导致异常的解决方案：

```
var alert = TestDriver.SwitchTo().Alert();
alert.SetAuthenticationCredentials(
   CurrentTestingConfiguration.Configuration.BasicAuthUser,
   CurrentTestingConfiguration.Configuration.BasicAuthPassword); 
```

> System.NotImplementedException：'POST /session/38146c7c-cd1a-42d8-9aa7-1ac6837e64f6/alert/credentials 与已知命令不匹配'

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-08-02T09:28:33.750

处理此问题的一种方法是您可以使用 url 提供登录详细信息。例如，如果您的 url 是“ [http://localhost:4040](http://localhost:4040) ”并且它在警报提示消息中询问“用户名”和“密码”，那么您可以将 baseurl 作为“ [http://username:password@localhost:4040](http://username:password@localhost:4040) ”传递。希望它有效

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2013-03-27T07:03:28.847

以下 Selenium-Webdriver Java 代码应该可以很好地处理警报/弹出窗口：

```
driver.switchTo().alert();
//Selenium-WebDriver Java Code for entering Username & Password as below:
driver.findElement(By.id("userID")).sendKeys("userName");
driver.findElement(By.id("password")).sendKeys("myPassword");
driver.switchTo().alert().accept();
driver.switchTo().defaultContent(); 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2016-08-24T04:43:25.543

我使用 IE，然后创建这样的代码并在修改几个代码后工作：

```
 public class TestIEBrowser {
                          public static void main(String[] args) throws Exception {
               //Set path of IEDriverServer.exe.
              // Note : IEDriverServer.exe should be In D: drive.
              System.setProperty("webdriver.ie.driver", "path /IEDriverServer.exe");

              // Initialize InternetExplorerDriver Instance.
              WebDriver driver = new InternetExplorerDriver();

              // Load sample calc test URL.
              driver.get("http://...  /");

              //Code to handle Basic Browser Authentication in Selenium.
              Alert aa = driver.switchTo().alert();

              Robot a = new Robot();
              aa.sendKeys("host"+"\\"+"user");  

              a.keyPress(KeyEvent.VK_TAB);
              a.keyRelease(KeyEvent.VK_TAB);
              a.keyRelease(KeyEvent.VK_ADD);                

              setClipboardData("password");

              a.keyPress(KeyEvent.VK_CONTROL);
              a.keyPress(KeyEvent.VK_V);
              a.keyRelease(KeyEvent.VK_V);
              a.keyRelease(KeyEvent.VK_CONTROL);
              //Thread.sleep(5000);
              aa.accept();        

    }

             private static void setClipboardData(String string) {
            // TODO Auto-generated method stub
                        StringSelection stringSelection = new StringSelection(string);                            Toolkit.getDefaultToolkit().getSystemClipboard().setContents(stringSelection, null);
        }
} 
```

# git - 是否可以删除我所有的提交并只维护最后一个

> ID：11522435
> 
> 赞同：1
> 
> 时间：2012-07-17T12:28:13.573
> 
> 标签：git, command-line, github

我试图遵循在其他类似主题中找到的一些建议，尝试重新提交我的提交：

```
git rebase --onto master~5 master~1 master 
```

但我没有得到我想要的（但这可能是由于我的无能）。

现在，我想要的是删除我的所有提交并只维护文件的最后一个版本，就像我删除我的文件并第一次再次发布它一样。

我想删除对一些要点的提交；真的，我只对最后一个版本感兴趣。

真的，我想使用像 pastebin 这样的 gist，不保存修订，只保留最终版本。

我知道我可以删除我的要点并创建另一个要点，但如果可能的话，我更喜欢链接不改变。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:34:05.177

如果您尝试仅丢弃单个文件的所有先前历史记录，并且该文件用于修改其他文件的提交，`rebase`则（可能）是必要的。如果您只想丢弃整个存储库的所有历史记录，这里有两个选项：

将 HEAD 设置为以当前工作目录为树的新的无父提交（git checkout 有一个类似的 --orphan 选项）：

```
$ TREE=$( git show -s --format='%T' HEAD )
$ HEAD=$( echo initial commit | git commit-tree $TREE )
$ git reset $HEAD 
```

完成此操作后，所有先前的提交仍可作为对象访问，但您必须努力获取它们。如果您有引用它们的分支和/或标签，它们将持续存在，但如果它们未被引用，它们最终将被垃圾收集器丢弃。

或者，只是吹掉 git repo 并重新开始：

```
$ cd $( git rev-parse --show-cdup )   # Go to top level directory
$ rm -rf .git
$ git init
$ git add . 
```

# c# - 需要Sharepoint之类的模态弹窗

> ID：11522440
> 
> 赞同：2
> 
> 时间：2012-07-17T12:28:33.417
> 
> 标签：c#, .net, popup, modal-dialog, sharepoint-object-model

单击网格视图中的链接时，我需要像弹出窗口一样显示 Sharepoint 2010。一旦显示模态弹出窗口并且用户选择了保存按钮数据库，应该使用弹出窗口中的给定值进行更新。我怎么能得到这个。任何想法。

截至目前，我正在使用下面的代码来获取它，但不知道如何在单击弹出窗口中的按钮后将值传递给数据库

注意：到目前为止，我没有在此处添加 gridview 代码，因为我想先使用示例 html 来实现它，然后再使用网格视图来实现。

**Java 脚本**

```
function openDialog() {

    var options = {

        html: divModalDialogContent,  // ID of the HTML tag

        // or HTML content to be displayed in modal dialog

        width: 600,

        height: 300,

        title: "My First Modal Dialog",

        dialogReturnValueCallback: dialogCallbackMethod,  // custom callback function

        allowMaximize: true,

        showClose: true

    };

    SP.UI.ModalDialog.showModalDialog(options);

}

//Results displayed if 'OK' or 'Cancel' button is clicked if the html content has 'OK' and 'Cancel' buttons

function onDialogClose(dialogResult, returnValue) {

    if (dialogResult == SP.UI.DialogResult.OK) {

        alert('Ok!');

    }

    if (dialogResult == SP.UI.DialogResult.cancel) {

        alert('Cancel');

    }

}

// Custom callback function after the dialog is closed

function dialogCallbackMethod() {

    alert('Callback method of modal dialog!');

} 
```

**HTML**

```
<div id="divModalDialogContent">

    Hello World!

    <input type="button" value="OK"onclick="SP.UI.ModalDialog.commonModalDialogClose(SP.UI.DialogResult.OK, 'Ok clicked'); return false;"

        class="ms-ButtonHeightWidth" />

    <input type="button" value="Cancel"onclick="SP.UI.ModalDialog.commonModalDialogClose(SP.UI.DialogResult.cancel, 'Cancel clicked'); return false;"

        class="ms-ButtonHeightWidth" />

        <asp:Button runat="server" ID="btnClicked" Text="Clicked" 
        onclick="btnClicked_Click" /> 
```

```
<input type="button" value="Open" onclick="openDialog()" /> 
```

如何在单击弹出窗口中的“单击”按钮时调用 db。我还需要将参数发送到弹出窗口

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T04:59:43.413

如果您需要在与 Sharepoint 列表/库或 sql 数据库交互的弹出屏幕上确定、取消或提交按钮事件，那么您需要在弹出窗口中实现事件。检查以下步骤： -

1.  您的弹出页面应继承应具有此功能的“Microsoft.SharePoint.WebControls.LayoutsPageBase”：-

    ```
    protected void EndOperation(int result, string returnValue)
    {
      string closeModal = String.Format(CultureInfo.InvariantCulture,
      "<script type=\"text/javascript\">window.frameElement.commonModalDialogClose
      ({0}, '{1}');</script>", new object[] { result, returnValue });
      this.Page.ClientScript.RegisterStartupScript(base.GetType(),
      "CreatePopup", closeModal, false);
    } 
    ```

2.  实现一个可以监听弹出操作的事件，比如确定按钮

    ```
    public delegate void AddEventHandlerToSPDialogEvent(object sender, PDialogEventHandler e);
    public class SPDialogEventHandler : EventArgs
    {
      public int dialogResult { get; set; } // 0 or 1
      public string ReturnValues { get; set; } // can be url or any success/error message
      public SPDialogEventHandler(int result, string list)
      {
        ReturnValues = list;
        dialogResult = result;
      }
    } 
    ```

3.  从弹出窗口中的按钮操作调用此事件。例如：

    ```
    public event AddEventHandlerToSPDialogEvent ResultOk;
    protected void CancelBtn_Click(object sender, EventArgs e)
    {
        try
        {
            int dialogResult = 0;
            if (this.ResultOk != null)
            {// Here dialogResult is 0\. that means we have clicked on cancel button
                ResultOk(this, new SPDialogEventHandler(dialogResult,"Action Cancelled"));
            }
        }
        catch (Exception ex) { }
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:32:14.150

您可以使用 Ajax 控件工具包，然后您应该寻找模态弹出扩展器。

像这样，您可以将 .net 控件添加到覆盖/模态覆盖中，并在后面的代码中获取值

有关更多信息，请参见此处 [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

SP Popup [在 Sharepoint 2010 中打开一个模式/弹出窗体，其中包含 asp.net 控件](https://stackoverflow.com/questions/9822935/open-a-modal-pop-up-form-in-sharepoint-2010-with-asp-net-controls-in-it)

# ios - 将 PNG 设计转换为 iOS 应用程序视图

> ID：11522441
> 
> 赞同：0
> 
> 时间：2012-07-17T12:28:48.520
> 
> 标签：ios, ios5

我有 png，它们非常精确地描述了需要为 ios 应用程序创建的视图布局。将它们转换为 ios 视图的最简单或最聪明的方法是什么？或者是否有应该遵循的最佳实践方法来为他们创建视图？我也有可用的组件（按钮、文本字段等）的切片图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:10:34.420

如果没有看到你有什么很难说具体，但如果你有切片图像：

1）使用适当的切片设置按钮的背景图像，

2)`UIImage`用于任何其他装饰或背景艺术品。

希望设计师不要对标签栏和文本字段做任何太疯狂的事情，因为您可能必须：

3) 子类化一些标准 UI 元素以获得你想要的。您可以轻松找到有关如何对 UI 元素进行子类化的详细教程。

当您在 Xcode 中编辑 XIB 时，您可以在屏幕上移动内容以设置内容而无需代码，这很容易。但是，如果您想子类化，则必须编写一些代码。

# python - 使用 Python 连接到远程 Oracle 数据库

> ID：11522443
> 
> 赞同：-4
> 
> 时间：2012-07-17T12:28:52.980
> 
> 标签：python, django, oracle, oracle10g

如何使用 Python 连接到远程 Oracle 数据库？

需要安装哪些包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:31:35.420

从这里开始：[https ://docs.djangoproject.com/en/dev/ref/databases/#oracle-notes](https://docs.djangoproject.com/en/dev/ref/databases/#oracle-notes)

# ios - 页面卷曲转场期间的有线动画

> ID：11522467
> 
> 赞同：2
> 
> 时间：2012-07-17T12:30:25.383
> 
> 标签：ios, ios5, uiviewcontroller

我不敢相信这只是我，但我在任何地方都找不到这个！

我的故事板中有一个 UIViewController 设置，我添加了一个按钮，该按钮调用另一个 UIViewController 的 segue。segue 设置为使用页面卷曲动画。

这一切都按预期工作 - 除了显示动画到位的视图上的 UIButtons 中的文本。文本从每个按钮的右侧开始并延伸以填充按钮。

我还有一个 UISegmentedControl，整个控件从左侧的 0 宽度开始并延伸到设计的宽度。

当页面卷曲动画结束时，控件处于我在情节提要上绘制它们的状态。

我已经在情节提要中尝试了自动调整大小，但没有成功！

? - 谢谢

# ruby-on-rails - ActiveAdmin 集合操作路径

> ID：11522471
> 
> 赞同：0
> 
> 时间：2012-07-17T12:30:39.900
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activeadmin

如何在我的activeAdmin控制器中为collection_action设置activeAdmin自定义页面部分中的“语义表单”标签的url？

我有：

项目.rb

```
ActiveAdmin.register Item, :as => "MyItems" do
  menu :parent => "My", :label => "My Items"

  collection_action :add_me, :method => :post do
    redirect_to "/" # just for testing
  end
end 
```

自定义页面 ActiveAdmin 控制器

```
ActiveAdmin.register_page "MyItemsCustomPage" do
  content do
    @items = Item.all
    render "item", { :items => @items }
  end
end 
```

_item.html.erb（用于自定义页面）

```
<%= semantic_form_for :item_add_me, :url => add_me_admin_items_path do |f| %>
    <%= f.buttons :commit %>
<% end %> 
```

转到自定义页面后，我遇到了错误：

```
undefined local variable or method `add_me_admin_items_path' for #<#<Class:0x00000006c3ff40>:0x00000005f8bd80> 
```

顺便说一句，语义形式适用`admin_items_path`于项目添加操作。

PS。如果我将 url 更改为`/admin/items/add_me`并将其设置`:method`为`:post`，我会收到路由错误：`No route matches [POST] "/admin/items/add_me"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:59:36.413

发现了问题。

`:as => "MyItems"`在 item.rb 中删除后：

```
ActiveAdmin.register Item do 
```

一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T13:57:59.447

这里的问题是`ActiveAdmin.register Item, as: "MyItems"`实际上将所有路由重命名为`my_items`而不是`my_item`所有方法名称。因此，在您的表单中`add_me_admin_items_path`，您可以使用`add_me_admin_my_items_path`.

# internet-explorer - @font-face 无法在 Internet Explorer 移动设备中使用

> ID：11522480
> 
> 赞同：6
> 
> 时间：2012-07-17T12:31:07.193
> 
> 标签：internet-explorer, windows-phone-7, font-face

我一直在构建一个具有响应式布局的网站 ( [http://www.hallometmirel.nl/troep/website](http://www.hallometmirel.nl/troep/website) )，并且一直在我的笔记本电脑和 Galaxy S3 上的几种浏览器和分辨率中测试各种分辨率。

鉴于我无法在 Google Play 上获取 Internet Explorer，我现在正在上班的诺基亚 Lumia 800 上测试该网站。它似乎运行的是 Windows Phone 7.5，由于我找不到显示它是哪个版本的 IE 的按钮，而且智能手机很新，我怀疑它是 IE 9。

到目前为止，@font-face 一直在最新版本的 Opera、Firefox、Chrome（桌面和移动）和 IE 9（桌面）中工作。

我真的不知道为什么它在移动版本中不起作用，即使它是旧版本，旧版本也支持字体，对吧？我尝试通过更改 .eot 类型或包含笑脸来欺骗 IE 来显示字体（显然它做了一些事情）。我找不到关于 IE 移动版的其他主题。

这是 doc 类型，它可能与 IE9 有关：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="nl-NL">
<head xmlns:og="http://ogp.me/ns#"> 
```

这就是我嵌入字体的方式：

```
@font-face {
font-family:'ChaletComprime-CologneEighty';
src:url('fonts/ChaletComprime-CologneEighty.eot');
src:url('fonts/ChaletComprime-CologneEighty.eot?#iefix') format('embedded-opentype'),
        url('fonts/ChaletComprime-CologneEighty.woff') format('woff'),
        url('fonts/ChaletComprime-CologneEighty.ttf') format('truetype'),
        url('fonts/ChaletComprime-CologneEighty.svg#svg/ChaletComprime-CologneEighty') format('svg')
} 
```

并像这样使用它：

```
h1,h2,h3,h4,h5,h6{font-family:ChaletComprime-CologneEighty;color:#ef0f63;text-transform:uppercase} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T12:45:41.900

呵呵，WP还没有完整的IE9。没有字体

官方 (tm)(c)

[http://msdn.microsoft.com/fr-fr/library/ff462082%28v=vs.92%29.aspx](http://msdn.microsoft.com/fr-fr/library/ff462082%28v=vs.92%29.aspx)

> Internet Explorer Mobile 中不支持的功能
> 
> Internet Explorer 9 的桌面版本支持以下功能，而 Internet Explorer Mobile 不支持。
> 
> ...
> 
> 可下载字体，例如 EOT、TTF/OTF 和 WOFF 字体
> 
> ...

与当前问题讨论的其他主题

[http://www.ubelly.com/2011/11/the-differences-between-ie9-on-the-desktop-and-ie9-on-wp7/](http://www.ubelly.com/2011/11/the-differences-between-ie9-on-the-desktop-and-ie9-on-wp7/)

[是否可以使用自定义字体 - 使用字体？](https://stackoverflow.com/questions/8789295/is-it-possible-to-use-custom-fonts-using-font-face)

[http://www.anandtech.com/show/4351/windows-phone-75-mango-mobile-ie-9-browser-explored/2](http://www.anandtech.com/show/4351/windows-phone-75-mango-mobile-ie-9-browser-explored/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-25T04:53:06.853

作为一种变通方法，我成功地使用[Cufón](http://cufon.shoqolate.com/)在 WP 7.5 中的 IE 上显示自定义字体。

# php - 执行 PDO 查询将绑定参数从整数更改为字符串

> ID：11522481
> 
> 赞同：9
> 
> 时间：2012-07-17T12:31:08.463
> 
> 标签：php, sql, pdo

**代码示例**

```
$query = $this->db->prepare( $sql );                  // prepare sql
$query->bindParam( 'start', $start, PDO::PARAM_INT ); // bind start
$query->bindParam( 'end', $end, PDO::PARAM_INT );     // bind end
$query->bindParam( 'language', $this->language );     // bind language
$query->bindValue( 'keyword', "%$keyword%" );         // bind keyword

var_dump( $end );
$query->execute();
var_dump( $end ); 
```

**输出**

```
int 2
string '2' (length=1) 
```

***但是...***如果我切换绑定的顺序...

```
$query = $this->db->prepare( $sql );                  // prepare sql
$query->bindParam( 'language', $this->language );     // bind language
$query->bindValue( 'keyword', "%$keyword%" );         // bind keyword
$query->bindParam( 'start', $start, PDO::PARAM_INT ); // bind start
$query->bindParam( 'end', $end, PDO::PARAM_INT );     // bind end

var_dump( $end );
$query->execute();
var_dump( $end ); 
```

**输出**

```
int 2
int 2 
```

*PHP 版本：Windows 上的 5.3.8*

谁能解释为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-30T17:11:23.650

用 PHP 5.3.13 检查了这个 - 你的代码的两个版本给了我：

```
int 2
string '2' (length=1) 
```

此外，使用 bindValue() 而不是 bindParam() 两个版本的代码给了我：

```
int 2
int 2 
```

ps 我更喜欢使用 bindValue() 而不是将它与 bindParam() 混合使用。使用 bindParam() 不会带来任何性能改进。有些人认为 PHP 中的值传递和指针传递就像在 C/C++ 中一样，但这是错误的想法。使用 bindParam() 可能会导致错误发生时很难找到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T03:39:52.287

尝试转为准备陈述的仿真

`$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-30T13:04:55.473

我知道这已经说过了，但我也会在上面写一个注释，因为我认为记住这一点很重要：

如果您使用 PDO bindParam 使用 LIKE 条件进行搜索，则不能将百分比和引号放入 param placeholder `%:keyword%`。

这是错误的：

```
"SELECT * FROM `users` WHERE `firstname` LIKE '%:keyword%'"; 
```

正确的解决方案是让占位符保持清洁，如下所示：

```
"SELECT * FROM `users` WHERE `firstname` LIKE :keyword";

And then add the percentages to the php variable where you store the keyword:
$keyword = "%".$keyword."%"; 
```

最后，执行查询时 PDO 会自动添加引号，因此您不必担心它们。

所以完整的例子是：

```
<?php
    // Get the keyword from query string
    $keyword = $_GET['keyword'];
    // Prepare the command
    $sth = $dbh->prepare('SELECT * FROM `users` WHERE `firstname` LIKE :keyword');
    // Put the percentage sing on the keyword
    $keyword = "%".$keyword."%";
    // Bind the parameter
    $sth->bindParam(':keyword', $keyword, PDO::PARAM_STR);
?> 
```

# java - 如何使用 Java Swing JOptionPane 确认对话框进行单元测试

> ID：11522483
> 
> 赞同：5
> 
> 时间：2012-07-17T12:31:16.843
> 
> 标签：java, swing, unit-testing, joptionpane

我有一个 java swing 应用程序，它希望用户选择`YES`或`NO`从中选择`JOptionPane.showConfirmDialog`

由于 JOptionPane 停止线程并等待用户输入，因此我的代码无法自动测试。

无论如何我可以以编程方式解决这个问题吗？或模拟是或否？

在我现在的测试中，会出现一个确认对话框，我必须在其中按下是或否按钮。

***更新***

我找到了一个绝妙的选择。

我创建了一个接口，调用`OptionPane`了我需要的所有不同类型的消息。然后我创建了一个默认实现，它只归入 JOptionPane 的静态方法。然后我创建了一个 YesMockOptionPane，它基本上为所有确认消息返回 YES_OPTION，为所有 NO_OPTIONS 返回一个 NoMockOptionPane。

这是代码：

`<<usage>>`

```
class Foo {
  OptionPane optionPane = new DefaultOptionPane();

  public void someMethod() {
    if (optionPane.showConfirmDialog(null, "choose yes or no", "Please confirm", 
                    JOptionPane.YES_NO_OPTION) != JOptionPane.YES_OPTION)
                return;

        //User pressed yes
  }    

  public void setOptionPane(OptionPane o) {
    this.optionPane = o;
  }
}

//Snippet of the interface
public interface OptionPane {

   int showConfirmDialog(Component parentComponent,
          Object message, String title, int optionType);
}

public class DefaultOptionPane implements OptionPane {
  @Override
  public int showConfirmDialog(Component parentComponent,
        Object message, String title, int optionType) {

      return JOptionPane.showConfirmDialog(parentComponent,message,title,optionType);
  }
}

public class YesMockOptionPane extends DefaultOptionPane {
  //MockOptionPane is just an abstract class implementing default methods from OptionPane
  @Override
  public int showConfirmDialog(Component parentComponent, Object message, String title, int optionType) {
      return JOptionPane.YES_OPTION;
   }
} 
```

现在在单元测试中我可以简单地设置适当的 MockOptionPane。

```
dialog.setOptionPane(new YesMockOptionPane()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:43:22.303

优雅的方法是修改代码以期望来自界面的答案，例如

```
public interface UserAnswer {
    boolean yesPressed();
} 
```

然后使用 JOptionPane.showConfirmDialog 为生产代码实现它，并为测试代码硬编码。

如果这不可行，您可以尝试使用 EventQueue.invokeLater 将事件分派线程上的事件发送到 JOptionPane。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T13:04:08.593

这是我想出的解决方案（也在问题中复制）

`<<usage>>`

```
class Foo {
  OptionPane optionPane = new DefaultOptionPane();

  public void someMethod() {
    if (optionPane.showConfirmDialog(null, "choose yes or no", "Please confirm", 
                    JOptionPane.YES_NO_OPTION) != JOptionPane.YES_OPTION)
                return;

        //User pressed yes
  }    

  public void setOptionPane(OptionPane o) {
    this.optionPane = o;
  }
}

//Snippet of the interface
public interface OptionPane {

   int showConfirmDialog(Component parentComponent,
          Object message, String title, int optionType);
}

public class DefaultOptionPane implements OptionPane {
  @Override
  public int showConfirmDialog(Component parentComponent,
        Object message, String title, int optionType) {

      return JOptionPane.showConfirmDialog(parentComponent,message,title,optionType);
  }
}

public class YesMockOptionPane extends MockOptionPane {

  @Override
  public int showConfirmDialog(Component parentComponent, Object message, String title, int optionType) {
      return JOptionPane.YES_OPTION;
   }
} 
```

现在在单元测试中我可以简单地设置适当的 MockOptionPane。

```
dialog.setOptionPane(new YesMockOptionPane()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:44:00.933

我认为对此会有现有的答案，但我找不到任何答案！

我认为您需要在代码和 JOptionPane 之间创建一个抽象层。
这应该是带有方法的接口的形式，无论用户是否选择了“是”或“否”，该方法都将返回您的代码 - 您可以将该方法调用一些有意义的东西，例如“isWantToOverwriteExistingFile”或类似的东西。

该接口的正常实现会像您现在所做的那样调用您的 JOptionPane。
您的测试将使用此接口的不同实现，这将根据您希望测试做出的选择返回是或否（不显示 JOptionPane）。

如果您需要更多详细信息，请告诉我！

# c++ - 为什么标准字符串函数比我的自定义字符串函数更快？

> ID：11522485
> 
> 赞同：22
> 
> 时间：2012-07-17T12:31:18.847
> 
> 标签：c++, c, performance, compare, strcmp

我决定找到 2 个函数的速度：

*   strcmp - string.h 中定义的标准比较函数
*   xstrcmp- 一个具有相同参数并执行相同操作的函数，只是我创建了它。

这是我的 xstrcmp 函数：

```
int xstrlen(char *str)
{
    int i;
    for(i=0;;i++)
    {
        if(str[i]=='\0')
            break;
    }
    return i;
}

int xstrcmp(char *str1, char *str2)
{
    int i, k;
    if(xstrlen(str1)!=xstrlen(str2))
        return -1;
    k=xstrlen(str1)-1;
    for(i=0;i<=k;i++)
    {
        if(str1[i]!=str2[i])
            return -1;
    }
    return 0;
} 
```

我不想依赖 strlen，因为我想要用户定义的所有内容。

所以，我找到了结果。strcmp 每毫秒进行 364 次比较，而我的 xstrcmp 每毫秒只进行 20 次比较（至少在我的计算机上！）

谁能说出为什么会这样？xstrcmp 函数做了什么让自己变得如此之快？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-17T12:34:19.760

```
if(xstrlen(str1)!=xstrlen(str2))    //computing length of str1
    return -1;                      
k=xstrlen(str1)-1;                  //computing length of str1 AGAIN! 
```

您正在计算`str1`TWICE 的长度。这就是你的函数输掉比赛的原因之一。

`xstrcmp`此外，与（大多数）标准库中定义的相比，您的实现非常幼稚。例如，您`xstrcmp`一次比较一个字节，而实际上它可以一次比较多个字节，也可以利用适当的对齐，或者在实际比较之前可以做很少的预处理以对齐内存块。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-07-17T12:47:04.643

strcmp 和其他库例程由经验丰富的工程师以汇编或专门的 C 代码编写，并使用各种技术。

例如，汇编实现可能一次将四个字节加载到一个寄存器中，并将该寄存器（作为 32 位整数）与来自另一个字符串的四个字节进行比较。在某些机器上，汇编实现可能会加载 8 个字节甚至更多。如果比较显示字节相等，则实现继续执行接下来的四个字节。如果比较显示字节不相等，则执行停止。

即使进行了这种简单的优化，也有许多问题需要处理。如果字符串地址不是四个字节的倍数，则处理器可能没有将加载四个字节的指令（许多处理器需要四字节加载才能使用与四个字节的倍数对齐的地址）。根据处理器的不同，实现可能必须使用较慢的未对齐加载或为每个对齐情况编写特殊代码，以执行对齐加载和移位寄存器中的字节以对齐要比较的字节。

当实现一次加载四个字节时，它必须确保它不会加载超出终止空字符的字节，如果这些字节可能导致段错误（错误，因为您试图加载一个不可读的地址）。

如果四个字节确实包含终止空字符，则实现必须检测它并且不继续比较其他字节，即使当前四个字节在两个字符串中相等。

其中许多问题需要详细的汇编指令，而对所使用的确切指令的所需控制在 C 中不可用。所使用的确切技术因处理器模型而异，并且因架构而异。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-17T12:48:17.047

strlen 的更快实现：

```
//Return difference in addresses - 1 as we don't count null terminator in strlen.
int xstrlen(char *str)
{
    char* ptr = str;
    while (*str++);
    return str - ptr - 1;
}

//Pretty nifty strcmp from here:
//http://vijayinterviewquestions.blogspot.com/2007/07/implement-strcmpstr1-str2-function.html
int mystrcmp(const char *s1, const char *s2)
{
    while (*s1==*s2)
    {
        if(*s1=='\0')
            return(0);
        ++s1;
        ++s2;
    }
    return(*s1-*s2);
} 
```

如果我有时间，我稍后会做另一个。您还应该注意，其中大部分是用汇编语言或使用其他优化方法完成的，这比您可以编写的最好的直接 C 实现要快。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-17T12:34:26.927

除了代码中的问题（已经指出）之外，- 至少在 gcc-C-libs 中，`str`- 和`mem`- 函数在大多数情况下**更快，**因为它们的内存访问模式经过高度优化。

已经就 SO的主题进行了一些[讨论。](https://stackoverflow.com/questions/525123/how-does-memchr-work-under-the-hood)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-17T12:50:04.100

试试这个：

```
int xstrlen(const char* s){
  const char* s0 = s;
  while(*s) s++;
  return(s - s0);
}

int xstrcmp(const char* a, const char* b){
  while(*a && *a==*b){a++; b++;}
  return *a - *b;
} 
```

这可能会通过一些循环展开来加速。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-18T12:23:03.967

**1\. 算法**

您的 strcmp 实现可能有更好的算法。根本不需要调用 strlen，每次调用 strlen 都会再次遍历整个字符串长度。你可以在网上找到简单但有效的实现，可能开始的地方是这样的：

```
// Adapted from http://vijayinterviewquestions.blogspot.co.uk
int xstrcmp(const char *s1, const char *s2)
{
  for (;*s1==*s2;++s1,++s2)
  {
    if(*s1=='\0') return(0);
  }
  return(*s1-*s2);
} 
```

这并不能解决所有问题，但应该很简单并且在大多数情况下都可以使用。

**2.编译器优化**

这是一个愚蠢的问题，但请确保在编译时打开了所有优化开关。

**3\. 更复杂的优化**

编写库的人通常会使用更高级的技术，例如一次加载一个 4 字节或 8 字节的 int，然后比较它，如果整个匹配，则只比较单个字节。您需要成为专家才能知道什么适合这种情况，但是您可以找到人们讨论堆栈溢出*最有效的实现（链接？）*

如果编码人员可以知道存在比编译器可以找到的更有效的实现，则某些平台的某些标准库函数可能是用汇编手工编写的。现在这种情况越来越少见，但在某些嵌入式系统上可能很常见。

**4\. 链接器“欺骗”标准库**

使用一些标准库函数，链接器可以让你的程序调用它们的开销比在代码中调用函数要少，因为它旨在更多地了解函数的特定内部结构（链接？）我不知道是否这适用于这种情况，它可能不适用，但这是你必须考虑的事情。

**5\. 好的，好的，我明白了，但是我什么时候应该实现自己的 strcmp？**

在我看来，这样做的唯一原因是：

*   你想学习如何。这是一个很好的理由。
*   您正在为一个没有足够好的标准库的平台编写代码。这是非常不可能的。
*   字符串比较已被测量为代码中的一个重要瓶颈，并且您知道有关字符串的特定信息，这意味着您可以比简单的算法更有效地比较它们。（例如，所有字符串都分配 8 字节对齐，或者所有字符串都有 N 字节前缀。）这是非常非常不可能的。

**6\. 但是……**

好的，为什么要避免依赖 strlen？您是否担心代码大小？关于代码或可执行文件的可移植性？

如果有充分的理由，请打开另一个问题，可能会有更具体的答案。因此，如果我遗漏了一些明显的东西，我很抱歉，但是依赖标准库通常会好得多，除非你想改进一些特定的东西。

# javascript - 悬停事件上的删除按钮

> ID：11522486
> 
> 赞同：7
> 
> 时间：2012-07-17T12:31:22.017
> 
> 标签：javascript, jquery

我在使用 hoverIntent 时遇到了真正的问题。

[http://jsfiddle.net/5fwqL/](http://jsfiddle.net/5fwqL/)

我想要的是：

1.  将鼠标悬停在文本上大约**500 毫秒时**，我希望显示删除文本。
2.  如果我按下删除按钮，我希望删除文本
3.  如果我在不按 deletetext 的情况下退出文本，我希望它隐藏（）

javascript

```
$(document).on({
mouseenter: function () {
    mouse_is_inside = true;
    $(this).next().slideDown();            
},

mouseleave: function () {
    mouse_is_inside = false;
    $(this).next().hide();   
}
}, '.title');

$('.deleteLink').on('click', function() {
   $(this).prev().remove();         
}); 
```

html

```
<div>
   <div class='title'>TitleText</div>
   <div class='delete'><a class='deleteLink' href="#">delete...</a></div>
</div> 
```

**忘了说它必须在IE8中工作，所以我必须使用旧样式！**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T12:43:09.453

看看这个小提琴 [http://jsfiddle.net/joevallender/42Tw8/](http://jsfiddle.net/joevallender/42Tw8/)

您可以使用 CSS 来处理显示和隐藏删除链接。假设您像这样嵌套了 HTML

```
<div class='title'>
    TitleText 1
    <a class='delete' href="#">delete...</a>
</div> 
```

然后你可以像这样使用CSS

```
.delete{
    color: red;
    display: none;
}
.title:hover .delete {
   display:block  
} 
```

实际上，对于删除/编辑链接之类的事情，这是一种很常见的模式。.title **:hover .delete**表示当父**级 .title悬停时****.delete**将具有的 CSS 。您还可以在示例中向您的父级添加一个任意类，如果您想保持相同的 HTML 排列，则可以使用该类。

 **然后使用下面的JS来处理点击

```
$(document).ready(function(){
    $('.delete').click(function(){
        $(this).parent().remove();
        return false;
    });
}); 
```

那有意义吗？它与您的起点略有不同

**编辑**

对于我在评论中提到的淡入/淡出，你可以使用这样的东西

```
.delete{
    color: red;
    opacity:0;
    transition:opacity 0.5s linear;
    -moz-transition: opacity 0.5s linear;
    -webkit-transition: opacity 0.5s linear;
}
.title:hover .delete {
   opacity: 1;
   transition:opacity 2s linear;
   -moz-transition: opacity 2s linear;
   -webkit-transition: opacity 2s linear;
}​ 
```

**编辑2**

更改了上面的代码以使用不同的过渡时间来淡入和淡出

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:53:44.833

```
$(document).ready(function() {        
    $(".title").hover(
        function() {
            $(this).data("mouse_hover", true);
            var self = $(this);
            setTimeout(function() {
                if (self.data("mouse_hover") === true) {
                    self.next(".deleteLink").show();
                }
            }, 500);
        },   
        function() {
            $(this).data("mouse_hover", false).next(".delete").hide();
        }        
    );
    $(".deleteLink").click(function(e) {
        e.preventDefault();
        $(this).text("deleted").prev(".title").slideUp(function() {
            $(this).hide();   
        });
    });
});    ​ 
```**

# node.js - Nodejs依赖奇怪的行为

> ID：11522487
> 
> 赞同：1
> 
> 时间：2012-07-17T12:31:22.263
> 
> 标签：node.js

假设我有一个名为的服务器模块`server.js`和一个名为的 api 模块`api.js`，`server.js`这是我正在运行的主模块。

现在，在服务器中，我有一些函数可以导出有关服务器的一些数据，在 中`api.js`，我想通过添加从服务器导出的函数中获取一些数据：`var api = require('./server.js');`

问题是我让`server.js`代码运行了两次，第一次是我运行它，第二次是`api.js`运行`require('./server.js')`

有什么建议可以绕过这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:42:52.603

你应该反过来做。像这样的东西：

在 server.js 中：

```
api = require('./api.js');
api.exportData({data1: foo, data2: bar}); 
```

在 api.js 中：

```
var data1 = 'defaultvalue1', data2 = 'defaultvalue2';

exports.exportData = function(dataObject) {
    data1 = dataObject.data1;
    data2 = dataObject.data2;
};

// rest of your code 
```

# vim - vim：使用鼠标向上滚动后，不显示文件内容，而是显示xterm终端内容

> ID：11522492
> 
> 赞同：1
> 
> 时间：2012-07-17T12:31:30.157
> 
> 标签：vim

当我向上滚动正在编辑的文件时，我有时会得到这个。

[http://postimage.org/image/ajhrqm3ox/](http://postimage.org/image/ajhrqm3ox/)

如您所见，上面的部分不是im编辑的文件，而是运行vim之前的终端内容..:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:36:30.733

如果您尝试使用鼠标滚轮滚动并且终端正在捕获它并在其自己的缓冲区中回滚，请启用鼠标模式，启用鼠标：

```
set mouse=a 
```

有关`:help mouse`可能的鼠标模式的说明，请参阅 参考资料，并注意这也将允许用鼠标定位 Vim 的光标、进行视觉选择和其他预期的鼠标行为。

# python - python pyplot 连接点

> ID：11522498
> 
> 赞同：4
> 
> 时间：2012-07-17T12:31:41.843
> 
> 标签：python, matplotlib

我正在使用一组点制作一个 pyplot 图：

```
 plt.plot([range(0,10)], [dictionary[key]],'bo') 
```

这正确地绘制了我期望的点，但是我也希望在这些点之间画一条线。我找不到用 pyplot 做到这一点的方法，我认为这很简单。

有人可以解释我该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T14:51:15.883

尝试明确指定所需的属性：

```
plt.plot(range(10),range(10),marker='o',color='b',linestyle='-') 
```

紧凑的风格非常适合交互式的东西，但我发现使用关键字参数可以使代码更具可读性，并且可以循环控制在同一图表上绘制多条曲线时如何循环线属性。

你`dictionary[key]`的代码中有什么？如果它是一个标量，那么它将产生 10 条长度为 1 的单独行。我想你可能真的想做

```
plt.plot(np.arange(10),np.ones(10)*dictionary[key],marker='o',color='b',linestyle='-') 
```

或者

```
plt.plot(range(10),[dictionary[key]]*10,marker='o',color='b',linestyle='-') 
```

取决于您是否使用 numpy。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:11:22.790

在您的情况下`[range(0,10)]`是列表列表。因此，您正在绘制 10 个点而不是一条线。尝试

```
plt.plot(range(0,10), dictionary[key],'bo-') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:34:15.053

是的，只需添加一个“-”：

```
 plt.plot([range(0,10)], [dictionary[key]],'bo-') 
```

这将使蓝色圆形点由一条线连接。

# iphone - 尝试从 nib 加载下一个视图时出错

> ID：11522501
> 
> 赞同：0
> 
> 时间：2012-07-17T12:31:52.140
> 
> 标签：iphone, xcode, uitableview, didselectrowatindexpath

这就是我在 TalbeViewController.m 中尝试做的事情：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
[tableView deselectRowAtIndexPath:indexPath animated:TRUE];
  if(indexPath.row==0) {

      //Initialize the detail view controller and display it.
      OmDetail1ViewController *firstDetailController = [[OmDetail1ViewController alloc] initWithNibName:@"OmDetail1ViewController" bundle:nil];
      [self.navigationController pushViewController:firstDetailController animated:YES];
      [firstDetailController release];
}
else if(indexPath.row==1) {
 //The second DetailView
}
else if(indexPath.row==2) {
 //The third DetailView
}
 } 
```

这就是我在选择第一个单元格时被告知的内容：

2012-07-17 14:17:42.660 TheApp [4635:f803] * * * 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无法在包中加载 NIB：“NSBundle（已加载）”，名称为“OmDetail1ViewController” “ ***第一掷调用堆栈：（0x13d5022 0x1566cd6 0x137da48 0x137d9b9 0x240638 0xe61fc 0xe6779 0xe699b 0xe6d11 0xf88fd 0xf8aef 0xf8dbb 0xf985f 0xf9e06 0xf9a24 0x2f90 0xb05c5 0xb07fa 0x94585d 0x13a9936 0x13a93d7 0x130c790 0x130bd84 0x130bc9b 0x12be7d8 0x12be88a 0x1f626 0x28c2 0x2835）终止叫做抛出异常（LLDB）

除了在 TableViewController.m 中导入“OmDetail1ViewController.h”之外，我没有做任何其他事情来连接视图。在 IB 中，我在实用程序中设置了正确的类，但什么也没做，没有建立任何连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:43:39.747

问题不在于那段代码。而是在您的 OmDetail1ViewController 类中，检查您是否在 IB 中为 ViewController 正确设置了视图，并且名称匹配。

在 IB 中，您的视图应设置为“文件所有者”，如果您选择文件所有者，则在自定义类中它应该有您的 OmDetail1ViewController 类。

# c# - 选择列表选项有一些意想不到的价值

> ID：11522502
> 
> 赞同：0
> 
> 时间：2012-07-17T12:31:54.777
> 
> 标签：c#, javascript, jquery

我正在生成用于设置 stroke-opacity 的选择列表选项，例如：

```
<label for="so">
    Stroke-opacity :</label>
<select id="so">
    @for (double i = 1; i >= 0; i-=0.1)
    {
        <option value="@i">@i</option>
    }
</select> 
```

我的问题是，最后一个选项（应该有值 0）有一些意想不到的值，即：`1.38777878078145E-16`. 谁能告诉我这里发生了什么？

![在此处输入图像描述](../Images/2ccb45dea359c902cc0275feeba4dfcd.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:36:02.303

尝试使用类型 of`decimal`而不是`double`. [由于`double`是浮点数，它可能会丢失精度](http://msdn.microsoft.com/en-us/library/system.double.aspx)。

```
<label for="so">
    Stroke-opacity :</label>
<select id="so">
    @for (decimal i = 1M; i >= 0M; i-=0.1M)
    {
        <option value="@i">@i</option>
    }
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:43:47.673

尝试这个

```
<select id="so">

<option value="1">1</option>
@for (int i = 9; i > 0; i--)
{
    string value = string.Format("0.{0}", i);

    <option value="@value">@value</option>
}
</select> 
```

# iphone - UISlider RGB 颜色更改并保存在 NSUserDefault

> ID：11522519
> 
> 赞同：1
> 
> 时间：2012-07-17T12:33:13.067
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我有一个超级简单的应用程序，带有根视图控制器和模态视图控制器。

乍一看，我只有一个 UIButton - 它动画过渡到模态控制器。在模态视图控制器中，我有 4 个滑块（R、G、B、Alpha），它们正在更改模态视图背景颜色和一个 UIBUtton 以退出模态视图。通过单击此按钮，我的根控制器的背景颜色需要更改为与模态控制器中相同的颜色。我怎样才能做到这一点并使我的模态控制器采取行动来实现这一目标？

我还需要将此首选项保存到 NSUserDefaults。那么最正确的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:36:31.930

您好这里是您可以使用 NSUserDefaults 执行的一些操作的快速参考。您可以使用它来保存 NSUserDefault 中的数据

保存

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// saving an NSString
[prefs setObject:@"TextToSave" forKey:@"keyToLookupString"];

// saving an NSInteger
[prefs setInteger:42 forKey:@"integerKey"];

// saving a Double
[prefs setDouble:3.1415 forKey:@"doubleKey"];

// saving a Float
[prefs setFloat:1.2345678 forKey:@"floatKey"];

// This is suggested to synch prefs, but is not needed (I didn't put it in my tut)
[prefs synchronize]; 
```

检索

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];

// getting an NSString
NSString *myString = [prefs stringForKey:@"keyToLookupString"];

// getting an NSInteger
NSInteger myInt = [prefs integerForKey:@"integerKey"];

// getting an Float
float myFloat = [prefs floatForKey:@"floatKey"]; 
```

您可以使用 CGFloat red = [myColor red]; 等实用程序获取 RGB 值。和 CGFloat Green= [myColor Green]; 明智地用它来拯救他们。

或者您可以检查[从 UIColor 预设中获取 RGB 值](https://stackoverflow.com/questions/4700168/get-rgb-value-from-uicolor-presets)以获得相同的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:37:11.607

阅读委托模式来做你的第一件事；我已经发布了我在下面写的一个小教程。另一个答案看起来应该足够了`NSUserDefaults`

```
Delegates

//In parent .m file:
//assign the delegate
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if([segue.identifier isEqualToString:@"segueName"])
    {
        childController *foo = segue.destinationViewController;
        foo.delegate = self;
    }

}

//implement protocol method(s):
- (void) methodName:(dataType*) dataName
{
    //An example of what you could do if your data was an NSDate
    buttonLabel.titleLabel.text = [[date description] substringToIndex:10];
}

//In parent .h file:
//import child header
#import "ChildName.h"

//indicate conformity with protocol
@interface ParentName : UIViewController <ChildNameDelegate>

//In child .h file
//declare protocol
@protocol ChildNameDelegate
- (void) methodName:(dataType*) dataName;
@end

//declare delegate
@property (unsafe_unretained, nonatomic) id<ChildNameDelegate> delegate;

//In child .m file
//synthesize delegate
@synthesize delegate; 

//use method
- (IBAction)actionName:(id)sender 
{
    [delegate methodName:assignedData];
} 
```

这是另一个[简单的委托示例？](https://stackoverflow.com/questions/1051842/simple-delegate-example)

# algorithm - 选择列表中不存在的号码

> ID：11522523
> 
> 赞同：1
> 
> 时间：2012-07-17T12:33:29.407
> 
> 标签：algorithm, numbers

有没有一种优雅的方法来创建一个给定浮点数列表中**不存在的数字？**如果这个数字不接近数组中的现有值，那就太好了。

例如，在列表中`[-1.5, 1e+38, -1e38, 1e-12]` ，最好选择一个`20`与现有数字“远”的数字，而`0.0`不是不在列表中但非常接近的数字`1e-12`。

我能想出的唯一算法是创建一个随机数并测试它是否不在数组中。如果是这样，请重新生成。有更好的确定性方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:22:50.507

这是一种选择不在列表中的*随机*数的方法，其中概率越高，离现有点越远。

1.  创建一个概率分布函数*f*，如下所示：

    *f(x) = <离x最近的点的绝对距离>*

    这样的函数给出的概率越高，离给定点越远。（注意，它应该被归一化，使函数下方的面积为 1。）

2.  *创建f*的原始函数*F*（即*f*下方到给定点的累积面积）。

**   生成一个介于 0 和 1 之间的均匀随机数*x*（这很容易！:)

    *   *通过将F*的倒数应用于该值来获得最终结果：*F ^(-1) (x)*。* 

 *下图描述了以 1.5、2.2 和 2.9 作为现有数字的情况：

![在此处输入图像描述](../Images/81f9f8f2f07feadcc49e6095e30733b5.png)

**这是它为什么起作用的直觉：**

*   您的概率越高（蓝线越高）红线*越陡。*

*   红线越*陡峭，* *x*在该点击中红线的可能性就越大。

*   **例如：**在给定的点上，蓝线是 0，因此红线是水平的。如果红线是水平的，则*x*命中该点的概率为零。

（如果你想要完整的双打，你可以将 min / max 分别设置为 -Double.MAX_VALUE 和 Double.MAX_VALUE。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:45:18.373

如果您有约束，新值必须介于两者之间，`[min, max]`那么您可以对值进行排序并插入具有最大绝对差的两个相邻值的平均值。

在您的示例案例`[-1e38, -1.5, 1e-12, 1e+38]`中是有序列表。在计算绝对差异时，您会找到这些值的最大差异，`(1e-12, 1e+38)`因此您可以计算出新的值`((n[i+1] - n[i]) / 2) + n[i]`（简单的平均值计算）。

**更新：** 此外，您还可以检查`FLOAT_MAX`or`FLOAT_MIN`值是否会提供好的候选人。只需检查它们的距离`min`，`max`如果结果值大于两个相邻值的最大差值，则选择它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:42:36.050

如果没有上限，只需将所有数字的绝对值相加，或者将它们全部相减。

另一种可能的解决方案是获取列表中的最小数字和最大数字，并选择超出其范围的内容（可能是最大数字的两倍）。

或者可能最好的方法是计算平均值，最小和最大的数字，只要标准偏差。然后，有了所有这些数据，您就知道数字的结构，并可以做出相应的选择（所有都围绕给定的负值聚集？选择一个正值。所有小数字？选择一个大数字。等等）

类似的东西

```
 number := 1
    multiplier := random(1000)+1
    if avg>0
        number:= -number
    if min < 1 and max > 1
        multiplier:= 1 / (random(1000)+1)
    if stdDev > 1000
        number := avg+random(500)-250
        multiplier:= multiplier / (random(1000)+1) 
```

（只是我头脑中的一个例子）

或者另一种可能性是将所有数字异或在一起。应该会产生不错的效果。*

# vb.net - MustInherit 以自己的类型作为参数

> ID：11522525
> 
> 赞同：2
> 
> 时间：2012-07-17T12:33:41.457
> 
> 标签：vb.net

我在一个 3 层项目中有两个库 - 称它们为 BO 和 DAL。几乎 DAL 中的每个类都实现了 Save 方法：

```
Public Function Save(ByVal someObject As BO.SomeType) As Boolean 
```

由于我必须添加缺少的 Save 方法，但我认为创建一个实现“MustInherit Save”功能的接口是个好主意。所以如果我输入：

```
MustOverride Function Save(ByVal someObject As BO.SomeType) As Boolean 
```

这应该够了吧; 但是参数的类型总是不同的。例如，在 DAL.TypeA 类中：

```
Public Function Save(ByVal someObject As BO.SomeTypeA) As Boolean 
```

在 DAL.TypeB 类中：

```
Public Function Save(ByVal someObject As BO.SomeTypeB) As Boolean 
```

有没有办法在接口中处理不同类型的参数？某种通用的？这甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:46:40.697

[泛型](http://msdn.microsoft.com/en-us/library/w256ka79%28v=vs.110%29.aspx)的完美用例。

使用通用接口：

**界面：**

```
Interface ISave(Of T)

    Function Save(someObject As T) As Boolean

End Interface 
```

* * *

**执行：**

```
Class BoClass
    Implements ISave(Of BoClass)

    Public Function Save(someObject As BoClass) As Boolean Implements ISave(Of BoClass).Save
    End Function

End Class

Class DalClass
    Implements ISave(Of DalClass)

    Public Function Save(someObject As DalClass) As Boolean Implements ISave(Of DalClass).Save
    End Function

End Class 
```

* * *

或者，使用通用基类而不是接口

**基类**

```
MustInherit Class BaseClass(Of T)

    MustOverride Function Save(someObject As T) As Boolean

End Class 
```

* * *

**执行**

```
Class BoClass
    Inherits BaseClass(Of BoClass)

    Public Overrides Function Save(someObject As BoClass) As Boolean
    End Function

End Class

Class DalClass
    Inherits BaseClass(Of DalClass)

    Public Overrides Function Save(someObject As DalClass) As Boolean
    End Function

End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:13:07.767

这看起来像是一个实现细节，在这种情况下，您保存的对象应该实现您的 DAL 类将调用的接口。

```
Public Interface ISaveable
  Function Save() As Boolean
End Interface 
```

然后执行实际保存的对象实现它：

```
Public Class BOItem
  Implements ISaveable

  Public Function Save() As Boolean Implements ISaveable.Save
    'do the actual saving here
  End Function
End Class 
```

然后，您的基类将只要求接口：

```
Public MustInherit Class DAL
  MustOverride Function Save(someObject As ISaveable) As Boolean
End Class 
```

然后当您创建 DAL 对象时，您不必担心它是什么类型的对象，您只需调用 save：

```
Public Class DALItem
  Inherits DAL

  Public Overrides Function Save(someObject As ISaveable) As Boolean
    Return someObject.Save()
  End Function
End Class 
```

# javascript - 用于检查全名的正则表达式

> ID：11522529
> 
> 赞同：10
> 
> 时间：2012-07-17T12:33:48.940
> 
> 标签：javascript, regex

我想编写一个正则表达式来检查用户是否插入了至少两个由至少一个空格分隔的单词：

例子：

```
var regexp = new RegExp(/^[a-z,',-]+(\s)[a-z,',-]+$/i);

regexp.test("D'avid Camp-Bel"); // true
regexp.test("John ---"); // true // but it should be false! 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-17T14:02:53.390

对你有用`^[a-z]([-']?[a-z]+)*( [a-z]([-']?[a-z]+)*)+$`吗？

`[a-z]`确保名称始终以字母开头，然后`[-']?[a-z]+`允许使用分隔字符，只要它后跟至少另一个字母即可。`*`允许任意数量的这些部件。

后半部分`( [a-z]([-']?[a-z]+)*)`匹配一个空格，后跟相同模式的另一个名称。`+`确保至少存在一个附加名称，但允许更多。(`{1,2}`如果您只想允许两个或三个部分名称，可以使用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-09-25T17:53:55.640

更简单的版本

```
 /^([\w]{3,})+\s+([\w\s]{3,})+$/i 
```

**([\w]{3,})**名字应该只包含字母并且长度为 3 或更多

**+\s**名字后跟一个空格

**+([\w\s]{3,})+**第二个名字应该只包含长度为 3 或更多的字母，并且后面可以跟其他名字，也可以不跟

**/i**忽略字母的大小写。可以是大写或小写字母

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-13T09:40:30.547

```
/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/g 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-13T12:43:32.257

这个版本允许重音字符，对我来说很好用！

```
^([a-zA-Zà-úÀ-Ú]{2,})+\s+([a-zA-Zà-úÀ-Ú\s]{2,})+$ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-09T14:42:35.343

这个答案也支持 unicode 字符。

```
^[\p{L}]([-']?[\p{L}]+)*( [\p{L}]([-']?[\p{L}]+)*)+$ 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-17T12:38:50.243

几点：

1.  在 JavaScript 中，通常最好使用字面量而不是命名构造函数（因此`/pattern/`而不是`new RegExp()`. （当然，有时您需要构造函数路由）。

2.  如果您确实使用构造函数，则在 RegExp 的情况下，您不需要定界正斜杠

3.  您当前的模式仅匹配第一个单词

4.  `{1,}`可以用修饰符写`+`

尝试

```
/^([a-z']+(-| )?)+$/i 
```

请注意，姓氏允许使用双桶姓氏。

# xml - XStream 转换问题（同一列表中的不同子类）

> ID：11522530
> 
> 赞同：0
> 
> 时间：2012-07-17T12:33:51.897
> 
> 标签：xml, serialization, alias, converter, xstream

我只对反序列化感兴趣。我有一些看起来像这样的数据：

```
 <Data>
        <Class name='ClassA'>
           <Object name='ObjectA'>
              <Relation name='RelationA'>
                  <toObject name='ObjectB'>
                  <toObject name='ObjectC'>
              </Relation>
           </Object>
           <Object name='ObjectB'>
              <Relation name='RelationB'>
                  <toObject name='ObjectA'>
                  <toObject name='ObjectC'>
              </Relation>
           </Object>
        </Class>
        <Class name='ClassB'>
           <Object name='ObjectC'>
              <Relation name='RelationC'>
                  <toObject name='ObjectB'>
              </Relation>
           </Object>
           <NotUsedRelations>
               <Relation name='RelationD'>
                  <toObject name='ObjectA'>
               </Relation>
           </NotUsedRelations>
        </Class>
    </Data> 
```

我想使用 Xstream 来阅读它，但我遇到了 NotUsedRelations 元素的问题：

```
 stream.alias("Data",     Model.class);
    stream.alias("Class",    Model.XMLClass.class);
    stream.alias("Object",   Model.XMLObject.class);
    stream.alias("Relation", Model.XMLRelation.class);
    stream.alias("toObject", Model.XMLObject.class); 
```

Model 中的每个类型都从 XMLElement 抽象类扩展而来，该抽象类定义了一个带有 Name 的构造函数。然后他们都有一个

```
 List<XMLElement> subElements; 
```

私人 var 和他的 getter/setter。

问题是 Class 包含 Object 子元素以及 NotUsedRelations 的隐式集合，但是 Relations 和 Objects 都是扩展 XMLElement，所以我想将它们放在 subElements 列表中

我用 stream.addImplicitCollection() 和 stream.aliasField() 尝试了不同的东西，但编译器总是抱怨

一个问题是一种类型是隐式集合而另一种不是，但 NotUsedRelations 没有真正的映射类，应该单独定义为隐式集合的别名。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T10:27:52.950

看看[这个问题](https://stackoverflow.com/questions/3824362/xstream-alias-of-list-root-elements)。

寻找如下的非注释方式`@XStreamImplicit(itemFieldName = ...)`：

```
@XStreamAlias("coins")
public class Coins {
        @XStreamImplicit(itemFieldName="coin")
        List<String> coins = new ArrayList<String>();
} 
```

还要看看`@XStreamInclude`处理子类问题的非注释方式，如：

```
@XStreamInclude({
        UnionMoveSelectorConfig.class, CartesianProductMoveSelectorConfig.class,
        ChangeMoveSelectorConfig.class, SwapMoveSelectorConfig.class, PillarSwapMoveSelectorConfig.class,
        SubChainChangeMoveSelectorConfig.class, SubChainSwapMoveSelectorConfig.class,
        MoveListFactoryConfig.class, MoveIteratorFactoryConfig.class
})
public abstract class MoveSelectorConfig 
```

# c# - 如何编写 MVVM 属性？

> ID：11522531
> 
> 赞同：1
> 
> 时间：2012-07-17T12:33:52.950
> 
> 标签：c#, .net, mvvm

使用 MVVM，我总是看到这两种属性方法：

```
 private int myProperty;
    public int MyProperty
    {
        get { return myProperty; }
        set
        {
            myProperty = value;
            NotifyPropertyChanged("MyProperty");
        }
    } 
```

和

```
 private int myProperty;
    public int MyProperty
    {
        get { return myProperty; }
        set
        {
            myProperty = value;
            NotifyPropertyChanged(m => m.MyProperty);
        }
    } 
```

第一个对 NotifyPropertyChanged 使用硬编码字符串，第二个对 NotifyPropertyChanged 使用 lambda 表达式。我不想发起辩论来询问什么是更好的解决方案，但我想了解这两种解决方案之间的区别。使用其中一种会有什么后果？

如果我错了，请纠正我，但 lambda 表达式解决方案应该使用更多内存并且应该比硬编码字符串慢，因为基类的 NotifyPropertyChanged 方法使用委托和反射。但是硬编码的字符串解决方案可能会产生愚蠢的错误，因为它是一个字符串，没有什么可以告诉我我正确地写了它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:35:12.963

第二个表达式会在属性名称更改时生成编译器错误，或者会自动更改（通过 VS 或 ReSharper 中的重命名支持）。

所以基本上，您获得了对属性名称的编译器支持。提供给通知的错误名称将意味着数据绑定会中断。使用字符串名称，这种破坏将是无声的。

在我看来，在小型 UI 中选择无关紧要，但在具有沉重 UI 层的大型应用程序中，从长远来看，对错误的额外支持可以带来回报。

性能不会有*问题*地变慢，不要忘记，绑定无论如何都是反射驱动的。与往常一样，性能是相对的。硬编码版本在技术上会更快，因为它不需要从元数据中反映属性名称。快多少，我不确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:05:00.300

而不是为每个属性重复 NotifyPropertyChanged 的​​代码，我觉得下面的代码更干净

在您的 ViewModel Base 中创建一个 Set 方法

```
protected bool Set<T>(Expression<Func<T>> selectorExpression, ref T field, T value)
{
    if (EqualityComparer<T>.Default.Equals(field, value))
       return false;
    field = value;
    RaisePropertyChanged(selectorExpression);
    return true;
} 
```

并将它们用作

```
string title;
public string Title
{
   get { return title; }
   set { Set(() => Title, ref title, value); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T01:05:04.407

我在实现 INotifyPropertyChanged 的​​基类中使用了以下方法，它非常简单方便：

```
public void NotifyPropertyChanged()
    {
        StackTrace stackTrace = new StackTrace();

        MethodBase method = stackTrace.GetFrame(1).GetMethod();

        if (!(method.Name.StartsWith("get_") || method.Name.StartsWith("set_")))
        {
            throw new InvalidOperationException("The NotifyPropertyChanged() method can only be used from inside a property");
        }

        string propertyName = method.Name.Substring(4);

        RaisePropertyChanged(propertyName);
    } 
```

# android - gzip 文件写入

> ID：11522542
> 
> 赞同：0
> 
> 时间：2012-07-17T12:34:39.793
> 
> 标签：android, file-io, gzip, android-file

我有一个带有 gz 文件的 url，我需要下载这个文件并将其保存在手机内存中。如果没有互联网连接，我需要从内存中读取文件

```
public Document getDoc(String url1) throws IOException{
      Document document = null;

      try {
            URL url = new URL(url1);

            InputStream in = url.openStream();
            GZIPInputStream zin;
            try {
                zin = (GZIPInputStream)in;
            } catch (Exception e) {
                zin = new GZIPInputStream(in);
            }

            DocumentBuilderFactory dbf =   DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
             document = db.parse(zin);
            document.getDocumentElement().normalize();
        } catch(Exception e) {
           // Log.v(TAG, "Exception = " + e);
        }
      return document;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T15:29:50.073

您需要将文件下载到您的设备上，保存并稍后在需要时访问它。

这是一个关于如何做到这一点的好教程：[Working with Files](http://www.anddev.org/working_with_files-t115.html)

还有 Android 的文档：[Using the Internal Storage](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)

# tizen - 如何在tizen中设置日历闹钟

> ID：11522544
> 
> 赞同：4
> 
> 时间：2012-07-17T12:34:43.323
> 
> 标签：tizen

我可以在我的日历中设置一个事件。我的代码是

```
var ev = new tizen.CalendarEvent
    ({
        description : document.getElementById('des').value,
        summary : document.getElementById('summ').value,
        startDate : new tizen.TZDate(yy, mm, dd, h, m),
        duration : new tizen.TimeDuration(dur1, "HOURS"),
        location : document.getElementById('loc').value,
    }); 
```

我怎么能为此设置一个 calendarAlarm 事件？即我想为事件启用警报。如果有人知道，请提供代码。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-02T08:47:12.260

终于我得到了答案

```
calendar = tizen.calendar.getDefaultCalendar("EVENT");
var ev = new tizen.CalendarEvent({
description : document.getElementById('description1').value,
summary : document.getElementById('Summary1').value,
startDate : new tizen.TZDate(yy, mm, dd, h, m),
duration : new tizen.TimeDuration(dur1, "HOURS"),
location : document.getElementById('Location1').value,
var alarm = new tizen.CalendarAlarm(new tizen.TimeDuration(1, "MINS"), "SOUND");
ev.alarms = [alarm]; 
calendar.add(ev); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:43:54.550

[我在Tizen 手机](https://www.tizen.org/blogs/bdub/2012/tizen-developer-hardware-now-available)上测试的这段代码，它可以工作：

```
 var mycalendar;
    try{        
        mycalendar = tizen.calendar.getDefaultCalendar("EVENT");
        var calendarItem = new tizen.CalendarEvent();

        calendarItem.description = "Description";
        calendarItem.summary = "Summary";
        calendarItem.location = "StackOverflow";
        calendarItem.startDate = new tizen.TZDate(2012, 8, 7, hour, minute);
        calendarItem.duration = new tizen.TimeDuration(duration, "MINS");

        mycalendar.add(calendarItem);

    }
    catch(add_exception){
        alert("Exceptie adauga : " + add_exception.message);
    } 
```

在您的回答中，代码有错误，您没有关闭`CalendarEvent({`括号和括号，并且行尾有一个逗号`location`。

# javascript - 如何为正在查看的网站动态更改 css 样式表？

> ID：11522545
> 
> 赞同：4
> 
> 时间：2012-07-17T12:34:46.910
> 
> 标签：javascript, ajax, codeigniter

我有一个网站，用户可以在其中使用向导生成自己的 Codeigniter 网站，用户将提供模块、字段和功能详细信息。根据用户输入，将生成一个网站并将其部署在我的网站上，并在用户开始下载之前向他们展示一个演示。一切正常。

现在我计划允许用户在预览时为生成的网站选择不同的样式/主题。如何让用户在不重新加载整个页面的情况下立即看到他们的更改？

我尝试用所选样式替换生成网站上的样式表文件，然后重定向到生成网站上的另一个页面。但是使用相同的样式表文件，因为它已经被浏览器缓存。所以请给我一些选择。如果可以在不重定向用户的情况下做到这一点，那对我来说将是最好的选择。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:55:17.167

为了防止缓存问题，样式表需要有不同的名称。这是一个如何使用 jQuery 实现它的示例：[http ://www.cssnewbie.com/simple-jquery-stylesheet-switcher/](http://www.cssnewbie.com/simple-jquery-stylesheet-switcher/)

**[演示](http://www.cssnewbie.com/example/stylesheet-switcher/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T17:12:38.650

将变量传递给视图，该变量保存样式表文件名的值？至于当用户在同一页面时更改样式文件......请参阅这个问题：[是否有一种简单的方法可以在不重新加载页面的情况下重新加载 css？](https://stackoverflow.com/questions/2024486/is-there-an-easy-way-to-reload-css-without-reloading-the-page)

```
<?php
$data['stylesheet_name'] = 'user1';

$this->load->view('viewname', $data);

/**
 * View File
 **/

<link rel="stylesheet" type="text/css" href="/css/user/<?= $stylesheet_name; ?>.css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:36:55.503

我使用了下面的代码，它无需更改样式表文件名即可工作。

```
function reloadStylesheets() {
    var queryString = '?reload=' + new Date().getTime();
    $('link[rel="stylesheet"]').each(function () {
        this.href = this.href.replace(/\?.*|$/, queryString);
    });
} 
```

这会强制浏览器重新加载文件，因为参数因时间更改而更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-09T22:07:31.060

这对我来说可以替换单个样式表。样式表命名为“themegray”、“themeblue”、“themegreen”等。“t”代表新颜色，例如“blue”。

```
function flipTheme(t) {
    $('link[rel="stylesheet"]').each(function () {
        if (this.href.indexOf(theme)>=0) {
            this.href = this.href.replace(theme, t);
            theme = t;
        }
    });
} 
```

# java - 从侦听器访问对象

> ID：11522546
> 
> 赞同：3
> 
> 时间：2012-07-17T12:34:49.097
> 
> 标签：java, listener

假设我们有一些`Foo`类包含

```
public void setOnSomethingListener(OnSomethingListener listener); 
```

我们注册它：

```
Foo foo = new Foo();
foo.setOnSomethingListener(new OnSomethingListener(){
  public void onSomething(String data) {
    // ...
  }
}); 
```

是否可以从`onSomething`已注册提到的侦听器的方法父对象访问而不访问定义的`foo`值？

我询问它是因为我想将此侦听器分配给某个参数并将其注册到少数对象中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:42:28.187

Yes.

What you are doing here is defining an **anonymous inner class**. You can access attributes and methods of the containing class by doing.

```
MyContainingClass.this.attributeName 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:41:26.830

Try

```
OnSomethingListener.this.* 
```

# loops - 当我循环通过它时，我是否必须从查询中获取 cfqueryparam 或范围值？

> ID：11522551
> 
> 赞同：0
> 
> 时间：2012-07-17T12:35:14.180
> 
> 标签：loops, coldfusion, scope, cfqueryparam

我永远坐在 Coldfusion8 INSERT into MySQL (5.0.88)

数据来自一个名为“q”的查询，如下所示：

```
[Record # 1] 
ILN_KAEUFER: 9900000002985 
ILN_VERKAEUFER: 9900000003005 
```

然后我想做一个这样的插入：

```
<cfloop query="q">
     <cfquery datasource="db">
         INSERT INTO table_a ( 
            iln_kaeufer, 
            iln_verkaeufer
         )
         VALUES(
            "#iln_kaeufer#", 
            "#iln_verkaeufer#"
        )
      </cfquery>
 </cfloop> 
```

这是我让它工作的唯一方法。我首先尝试像这样定义两个值：

```
 "#q.iln_kaeufer#", 
 "#q.iln_verkaeufer#" 
```

在此之前，我也像这样使用 cfqueryparam：

```
 <cfqueryparam value="#q.iln_kaeufer#" cfsqltype="cf_sql_varchar" maxlength="13">
  <cfqueryparam value="#q.iln_verkaeufer#" cfsqltype="cf_sql_varchar" maxlength="13"> 
```

两者都产生了错误。

我想这已经被问过了，但我没有找到一个很好的解释，说明我什么时候可以/应该使用 CFQUERYPARAM，什么时候不使用，什么时候使用 SCOPE，什么时候不使用。

我总是尝试对所有内容进行参数化和范围化，这是我寻找的最后一件事是错误的。

感谢您提供一些见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:45:14.303

因此，您应该始终尽可能地确定范围，因为它节省了 ColdFusion 必须回溯所有范围直到找到您的变量的开销。

在这种情况下，即使您的数据直接来自数据库，您仍应使用 cfqueryparam。防止 SQL 注入只是使用 cfqueryparam 的好处之一；它还有助于提高查询性能：[http ://adamcameroncoldfusion.blogspot.co.uk/2012/07/what-one-can-and-cannot-do-with.html](http://adamcameroncoldfusion.blogspot.co.uk/2012/07/what-one-can-and-cannot-do-with.html)

这应该有效：

```
<cfloop query="q">
     <cfquery datasource="db">
         INSERT INTO table_a ( 
            iln_kaeufer, 
            iln_verkaeufer
         )
         VALUES(
            <cfqueryparam value="#q.iln_kaeufer#" cfsqltype="cf_sql_varchar" maxlength="13">,  // your code didn't have a comma here when using cfqueryparam?
            <cfqueryparam value="#q.iln_verkaeufer#" cfsqltype="cf_sql_varchar" maxlength="13">
        )
      </cfquery>
 </cfloop> 
```

如果不是，我会说检查列类型和大小。如果仍然不是这样，那么在您循环访问另一个查询时，在另一个查询中可能会出现问题。您可以尝试另一种方式来循环它：

```
<cfloop index="i" from="1" to="#q.recordcount#">
  use #q.column[i]#
</cfloop> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:44:28.140

当然，出于多种原因，您应该始终使用显式范围，并使用参数化查询 (cfqueryparam)。

使用 cfqueryparam 可以防止 sql 注入，允许准备好的语句并使世界变得更美好。正确地确定范围可能会给您带来一些性能，但最重要的是，它是更好的做法，可以更快地读取代码，因为您不需要弄清楚哪个变量来自哪里。

使用 cfqueryparam 的 mysql 查询引发了什么错误？

# c - C 上的文件操作：二进制文件

> ID：11522552
> 
> 赞同：0
> 
> 时间：2012-07-17T12:35:15.070
> 
> 标签：c, file, binary

我需要编写一个程序，它有 4 个参数，第一个字符串代表一个二进制文件，分为字节，第二个、第三个和第四个 (x,y,z) 是 3 个整数，它们的总和为 8。每个字节有 x 个左位，后有 y 个位，最后是 z 个位。每组代表一个数字。

我需要打印这些数字。例如 for `x=4, y=3, z=1`and file 有 3 个字节：

**1010 0001 1 0101 011 1 0010 001 1**结果将是 10 0 1 5 3 1 2 1 1。

我希望您对 C 中的文件提供帮助。这就是我写的：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <math.h>

#define  SEEK_SET   0

#define  SEEK_CUR   1

#define  SEEK_END   2

int main(int argc, char** argv) {

    if (argc!=5) {
        printf("enter a file name and 3 integers such that their sum is 8");
        return 0;
    } else {
        FILE* f;
        f=fopen(argv[1], "r");
        if (f==NULL) {
            printf("File %s does not exists \n", argv[1]);
            return 0;
        }

        else {
            int length=0;
            int offset=0;
            fseek(f, 0, SEEK_END);
            length=ftell(f);
            fseek(f, 0, SEEK_SET);

            while (offset < length) {
                int i;
                double sum=0;
                for (i=1; i<= atoi(argv[2]); ++i) {
                    double exponent= atoi(argv[1])- i;
                    sum=getc(f)*pow(2, exponent); 

                }
                printf("%d ", (int)sum);
                sum=0;

                for (i=1; i<= atoi(argv[3]); ++i) {
                    double exponent= atoi(argv[1])- i;
                    sum=fetc(f)*pow(2, exponent);
                }
                printf("%d ", (int)sum);
                sum=0;
                for (i=1; i<= atoi(argv[4]); ++i) {
                    double exponent= atoi(argv[1])- i;
                    sum=getc(f)*pow(2, exponent);
                }
                printf("%d ", (int)sum);
                offset+=8;
            }
            fclose(f);
        }

    }
    return 0;
} 
```

几个问题：

1.  `argc, **argv`我从其他使用文件的程序中复制整个文件。这个可以吗？我的意思是当我输入时`main c:\stackExchange 5 2 1`它会自动给 4`argc` 和一个其他参数的数组作为字符串吗？我认为它确实如此，并写了上面的内容。
2.  我假设`getc(f)`返回了一点，这是正确的吗？

欢迎任何其他更正。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:01:39.267

getc/fgetc 返回一个字节（=8 位），而不是位。

在你的主文件中尝试这个，对于文件中的每个字节：

```
char b = fgetc(f); 
printf("%d %d %d ", b>>(y+z), (b<<x)>>(x+z), b<<(x+y)>>(x+y) ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:45:31.673

关于您的第一个问题，`argc`是`argv`数组中的条目数，即参数数加一。因此，对于您的示例命令行将`argc`是 5，其中`argv`包含：

```
argv[0] : "main"
argv[1] : "c:\\stackExchange"
argv[2] : "5"
argv[3] : "2"
argv[4] : "1"
argv[5] : NULL 
```

关于您的第二个问题，`getc`返回一个整数，如果不是，则`EOF`可以将其解释为字符或字节，具体取决于您读取的是文本数据还是二进制数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:29:04.507

一个额外的（更美观的）建议：在 unix/linux 下，约定是，仅在主程序成功时返回零，但这对于 dos/windows 也不是坏主意。在使用提示的情况下，通常会返回 1，而真正的错误（例如找不到文件）可能会导致退出代码为 2 或更大。这简化了 shell 脚本或批处理中的一致处理。

# javascript - JavaScript 模块模式与其替代方案有什么区别？

> ID：11522556
> 
> 赞同：2
> 
> 时间：2012-07-17T12:35:24.657
> 
> 标签：javascript, namespaces, scope, javascript-namespaces

实际上，以下两种模式之间的区别是什么？

### 一个

```
mySpace = mySpace || {}
mySpace.isObsolete = function() {};
mySpace.hipsterYear = 2006; 
```

用法：

```
var iable = mySpace.isObsolete();
var year = mySpace.hipsterYear; 
```

### B（即模块模式）

```
mySpace = (function(){
  var obj = {};
  var someVar = 2012;
  obj.hipsterYear = 2006;
  obj.isObsolete: function() {};
  return obj;
}()); 
```

用法：

```
var iable = mySpace.isObsolete();
var year = mySpace.hipsterYear; 
```

在 B 中，匿名函数创建了一个范围，其中 someVar 不能从外部访问。我想这样的构造在 A 中是不可能的？因此，A 和 B 在创建范围方面有所不同。

命名空间有什么区别？A和B是等价的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:40:36.550

B is commonly called the 'module pattern' and allows the option to use the object oriented approach of having public and private access to variables and methods, whereas with A everything is public. Douglas Crockford explains it best [here](http://www.crockford.com/javascript/private.html).

This is generally a good idea, as using the approach in A allows everything to be vulnerable to interference from other code/coders. This increases the likelihood of obscure bugs emerging if someone (possibly you) decides to take shortcuts.

# bash - 在 bash 中重用变量

> ID：11522558
> 
> 赞同：3
> 
> 时间：2012-07-17T12:35:29.797
> 
> 标签：bash, shell, sed, awk

我想知道重复使用同一组变量是否会导致 bash 脚本中出现任何不可预见的事件。这通常被认为是一种好习惯吗？

为了让我的查询更清楚一点。

我有一个这样的脚本：

```
max=`cat loc1.c  | wc -l`   
bar=1        

while [ $bar -lt $max ]
do

    f1=`awk -v vr1=$bar 'NR == vr1' loc1.c`
    f2=`awk -v vr1=$bar 'NR == vr1' loc2.c`

    if [[ a random file  exists ]] ; then # use var1 var2 var3 ; fi 
    if [[ a random file2 exists ]] ; then # use var1 var2 var3 ; fi 
    if [[ a random file3 exists ]] ; then # use var1 var2 var3 ; fi 

    ((bar++))
done 
```

文件 loc1 和 loc2 列出了由换行符分隔的文件路径。路径相对于行号转移到变量 f1 和 f2 。循环继续，直到 loc1 中的每个文件（由路径指向）都对 loc2 中指向的文件进行了某种数据操作。

欢迎提出任何建议。

我在下面的代码中重用了变量 var1,var2 ,var3 [..]。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T13:02:54.817

与变量使用无关，但您可以简化文件迭代，假设您不需要`bar`或`max`其他任何东西：

```
while read -r f1 && read -r -u 3 f2; do
    if [[ a random file  exists ]] ; then # use var1 var2 var3 ; fi 
    if [[ a random file2 exists ]] ; then # use var1 var2 var3 ; fi 
    if [[ a random file3 exists ]] ; then # use var1 var2 var3 ; fi
done < loc1.c 3< loc2.c 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:44:13.263

重用变量的唯一问题是它们是否在脚本中使用它们的每个点都进行了适当的初始化。如果每个段落在使用之前总是设置值，那么重用就没有坏处。主要准则应该是代码的清晰性。如果代码清晰，那么就没有问题。

很久以前，有人可能会争辩说变量重用节省了内存。这些天来，我不会理会索赔。

# asp.net - TinyGet 和压力测试

> ID：11522559
> 
> 赞同：0
> 
> 时间：2012-07-17T12:35:29.953
> 
> 标签：asp.net, debugging, stress-testing

我正在尝试使用 TinyGet 对应用程序进行压力测试。我正在运行以下命令：

"C:\Program Files\IIS 资源\TinyGet\tinyget.exe" -srv:localhost -uri:/testwebsite/default.aspx -loop:10

它似乎可以工作，因为没有错误消息。但是，不会出现 ASP.NET 进程。应该出现 ASP.NET 进程吗？

TinyGet 是否有任何文档。

**更新 17/07/2012** 是否有人能够确认线程标志 (http://code.google.com/p/toolsdotnet/wiki/TinyGet) 是指工作线程、IO 线程或两者的数量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:06:47.703

我在装有 IIS 5.1（开发 PC）的 Windows XP PC 上安装了 IIS 工具包。我现在已经将它安装在 Windows 2003 服务器上，它可以按预期工作。

# android - 如何使用 json 库解析嵌套的 JSON 对象？

> ID：11522562
> 
> 赞同：1
> 
> 时间：2012-07-17T12:35:44.007
> 
> 标签：android, json

我想使用 json 库解析 json 对象。

```
 {
    "batters":
        {
            "batter":
                [
                    { "id": "1001", "type": "Regular" },
                    { "id": "1002", "type": "Chocolate" },
                    { "id": "1003", "type": "Blueberry" },
                    { "id": "1004", "type": "Devil's Food" }
                ]
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:43:43.040

使用[JSON](http://www.vogella.com/articles/AndroidJSON/article.html) ..

```
JSONObject object = new JSONObject(yourString);
JSONObject batters = object.getJSONObject("batters");
JSONArray batter = batters.getJSONArray("batter");
for(int i = 0 ; i < batter.length() ; i++) { 
JSONObject object1 = (JSONObject) batter.get(i);
    String id = object1.getString("id");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T06:09:08.840

```
{
"result": "success",
"countryCodeList":
[
  {"countryCode":"00","countryName":"World Wide"},
  {"countryCode":"kr","countryName":"Korea"}
] 
} 
```

下面我正在获取国家/地区详细信息

```
JSONObject json = new JSONObject(jsonstring);
JSONArray nameArray = json.names();
JSONArray valArray = json.toJSONArray(nameArray);

JSONArray valArray1 = valArray.getJSONArray(1);

valArray1.toString().replace("[", "");
valArray1.toString().replace("]", "");

int len = valArray1.length();

for (int i = 0; i < valArray1.length(); i++) {

 Country country = new Country();
 JSONObject arr = valArray1.getJSONObject(i);
 country.setCountryCode(arr.getString("countryCode"));                        
 country.setCountryName(arr.getString("countryName"));
 arrCountries.add(country);
} 
```

# php - 防止 Amazon S3 文件的热链接？

> ID：11522563
> 
> 赞同：13
> 
> 时间：2012-07-17T12:35:45.467
> 
> 标签：php, amazon-s3, amazon-web-services, referrer, hotlinking

我想允许任何人在我的网站上播放位于我的 s3 中的视频作为`src`标签`<video>`，但**不允许**人们`src`在他们的网站上使用它**或**通过在浏览器栏中输入 url 直接播放视频。

我**不**希望人们这样做：

![在此处输入图像描述](../Images/5002bf0a835f22b04f7b7d6c3140e989.png)

**我**不希望以下 HTML 出现在 http://your-site.com 上，而只出现在**http://my-site.com**上：

 **```
<html>
    <video src="https://s3.amazonaws.com/my-bucket/my-video.mp4"></video>
</html> 
```

我已经看到了一些关于此的[SO 链接](https://stackoverflow.com/questions/948823/how-do-i-prevent-hotlinking-on-amazon-s3-without-using-signed-urls)，但我想用代码来谈谈，因为我无法让这些解决方案为我工作。

这是我目前不起作用的存储桶**策略**：

```
{
"Version": "2008-10-17",
"Statement": [
    {
        "Sid": "AllowPublicRead",
        "Effect": "Allow",
        "Principal": {
            "AWS": "*"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::my-bucket/*",
        "Condition": {
            "StringLike": {
                "aws:Referer": [
                    "https://my-site.com/*"
                ]
            }
        }
    }
  } 
```

两个问题：

1.  为了测试我的存储桶策略，我将上面的 HTML 放在本地主机上的测试文件中，果然我可以通过键入来访问视频`http://localhost/test.html`。为什么我的存储桶策略不能阻止这种情况？（我只希望它从 开始工作`http://my-site.com/test.html`）
2.  为了防止人们将 s3 URL 输入浏览器栏，我想我需要一个与存储桶策略不同的解决方案，因为从 AWS 文档中我不清楚如何防止通过浏览器直接访问。我正在考虑散列网址以使其难以猜测。也许有使用 AWS 存储桶策略或其他解决方案的方法？

更清楚地说，我的文件存储在 s3 上，但它们是由亚马逊的 CloudFront 交付的。所以我的 CloudFront url src 目前是 media.my-site.com/my-video.mp4。CNAME 是 media.my-site.com。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T17:41:03.330

鉴于 CloudFront 目前不允许您直接限制访问（据我所知），我会执行以下操作：

```
<video src="/media.php?v=my-video.mp4"></video> 
```

然后你的`media.php`文件看起来像：

```
if (isset($_SERVER['HTTP_REFERER']) && $_SERVER['HTTP_REFERER'] != 'my-site.com')
{
  header('HTTP/1.1 503 Hot Linking Not Permitted');
  // display some message / image / video
  exit;
}

# this base url changes from time to time
$url = 'http://cdn.my-site.com';

header("Location: $url/{$_GET['v']}"); 
```

为了让它不那么明显，您可能需要设置重写以路由`/media/my-video.mp4`到文件中。这样一来，看起来就没有中间 PHP 脚本了。

究竟如何进行推荐人检查取决于您想要的安全级别。有些人禁用引荐来源网址，因此您可能希望允许空引荐来源网址。或者您甚至可以检查会话变量或 cookie 是否存在等。

当然，最终用户将能够嗅出真实的 URL。这就是您可能希望不时更改 CNAME 的原因。

希望此解决方案足以阻止人们滥用您的网站，但绝不是完美的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T15:35:18.890

除了直接链接到您的 S3 文件之外，您是否可以使用 PHP 作为代理，以便最终用户永远看不到实际的 S3 URL，并且您可以更轻松地验证引用者？不过，您可能需要某种数据库，因此您可以将 ID 链接到 S3 文件。例如（不考虑安全措施）：

```
<?php
$file = $_GET['id'];
$referer = $_SERVER['HTTP_REFERER'];

if($referer === 'http://my-site.com/test.html'){
    $s3 = //Query your database of S3 files with the ID provided to get the S3 URL
    header(mime_content_type($s3));
    include($s3);
}
?> 
```

这可以保存为 get_file.php 或任何你想要的，你可以把链接`http://my-site.com/file/get_file.php?id=120381`放在你的 HTML 中。

更进一步，您可以使用 .htaccess 文件将请求路由`http://my-site.com/file/120381.mp4`到`http://my-site.com/file/get_file.php?id=120381`.

我不确定这会如何运作，我提供的 PHP 代码只是帮助传达我的想法的一个示例；它*不是*完美的代码，所以请不要仅仅为此而对我投反对票。**

# ruby-on-rails - Rspec 测试因体面_exposure gem 而失败

> ID：11522567
> 
> 赞同：1
> 
> 时间：2012-07-17T12:35:59.900
> 
> 标签：ruby-on-rails, rspec

我在我的 Rails 应用程序中使用 RSpec 和 decent_exposure gem 时遇到了问题。

我的控制器测试失败，因为体面_曝光两次调用方法“new”（Model.new（params [name]）。一次使用名称（Brand.new（params [“brands”]）返回Brand.new（nil））和第二我期望的（Brand.new（params [“brand”]））。我需要以某种方式跳过我的测试文件中的第一个调用。Brand.should_receive（：new）.with（...）.once.and_return（band）不管用。

我的测试文件：

```
let(:brand) {
  mock_model(Brand).as_null_object
}

before do
  Brand.stub(:new).and_return(brand)
end

describe "with valid parameters" do
  it "should create a new brand" do
    Brand.should_receive(:new).with(
      "name" => "LG",
    ).and_return(brand)

    post :create, :brand => {
      "name" => "LG",
    }
  end
end 
```

那么，你能帮我弄清楚如何通过这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:12:15.483

试试这个：

```
Brand.should_receive(:new).once.with(any_args())
Brand.should_receive(:new).once.with("name" => "LG").and_return(brand) 
```

我建议对控制器用来持久化的任何方法添加期望`brand`。通常这是`save`：

```
brand.should_receive(:save) { true } 
```

# javascript - 歌剧中的执行命令错误

> ID：11522571
> 
> 赞同：1
> 
> 时间：2012-07-17T12:36:06.427
> 
> 标签：javascript, wysiwyg, opera, execcommand

最近我不得不在 Opera 中使用 execCommand()。问题是这样的，当我尝试使用此功能更改背景颜色（或文本颜色）时，一切都按预期工作，但是当我混合的颜色多于一种时，就会出现意外行为。我做了一个测试页来理解我的意思：

```
<html><head>
<script type="text/javascript">
function changecolor(color) {
 document.execCommand ('ForeColor', false, color);
 document.getElementById('source').innerHTML = document.getElementById('content').innerHTML;
}       
</script>
</head>

<body>
    <button onclick="changecolor('red');">Red</button>
    <button onclick="changecolor('blue');">Blue</button>
    <div contenteditable="true" id="content">aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa</div>

    <textarea id="source" style="margin-top:100px;width:800px;height:200px;"></textarea>
</body> 
```

（参见[jsfiddle 的实际操作](http://jsfiddle.net/SBas2/)）

所以，尝试将这两种颜色与最新版本的 Opera 混合，你会明白我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T22:32:12.963

What I'm seeing: When the selection spans more than one color and ends inside the same colour you try to apply, nothing happens. 当它以不同的颜色结束时，一些旧颜色会被移除，但不会应用新颜色。

这听起来类似于 Opera 现有的错误 CORE-24880 “execCommand('bold') 应该使选择变为粗体，即使部分选择是粗体的”。我将跟进此错误并尝试将其推向修复。

# jquery - 用于网格图像的 jQuery Backstretch？

> ID：11522573
> 
> 赞同：0
> 
> 时间：2012-07-17T12:36:07.373
> 
> 标签：jquery, responsive-design, jquery-backstretch

我正在尝试创建一个可作为插件“Backstretch”扩展的图像网格。您可以将插件用于包含他所有图像的多个 div 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T08:10:04.983

backstretch 对此不起作用（据我所知），但您可以使用[https://github.com/danmillar/jquery-anystretch/](https://github.com/danmillar/jquery-anystretch/)来代替您所追求的。

请参阅示例[http://static.elliotjaystocks.com/responsive-background-images/examples/solution.html](http://static.elliotjaystocks.com/responsive-background-images/examples/solution.html)

# c# - WebClient DownloadFileAsync - 如何向用户显示下载速度？

> ID：11522577
> 
> 赞同：6
> 
> 时间：2012-07-17T12:36:11.980
> 
> 标签：c#, webclient

这几乎就是标题中的全部问题。我有一个 WPF C# Windows 应用程序，我为用户下载文件，现在想要显示速度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T12:59:15.997

```
mWebClient.DownloadProgressChanged += (sender, e) => progressChanged(e.BytesReceived);
//...
DateTime lastUpdate;
long lastBytes = 0;

private void progressChanged(long bytes)
{
    if (lastBytes == 0)
    {
        lastUpdate = DateTime.Now;
        lastBytes = bytes;
        return;
    }

    var now = DateTime.Now;
    var timeSpan = now - lastUpdate;
    var bytesChange = bytes - lastBytes;
    var bytesPerSecond = bytesChange / timeSpan.Seconds;

    lastBytes = bytes;
    lastUpdate = now;
} 
```

并使用 bytesPerSecond 变量做任何你需要的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-10T09:48:25.300

我们可以通过确定自下载开始以来已经过去了多少秒来轻松做到这一点。我们可以将 BytesReceived 值从总秒数中除以得到速度。看看下面的代码。

```
DateTime _startedAt;

WebClient webClient = new WebClient();

webClient.DownloadProgressChanged += OnDownloadProgressChanged;

webClient.DownloadFileAsync(new Uri("Download URL"), "Download Path")

private void OnDownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    if (_startedAt == default(DateTime))
    {
        _startedAt = DateTime.Now;
    }
    else
    {
        var timeSpan = DateTime.Now - _startedAt;
        if (timeSpan.TotalSeconds > 0)
        {
            var bytesPerSecond = e.BytesReceived / (long) timeSpan.TotalSeconds;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:54:48.900

使用[DownloadProgressChanged 事件](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloadprogresschanged.aspx)

```
WebClient client = new WebClient ();
Uri uri = new Uri(address);

// Specify that the DownloadFileCallback method gets called
// when the download completes.
client.DownloadFileCompleted += new AsyncCompletedEventHandler (DownloadFileCallback2);
// Specify a progress notification handler.
client.DownloadProgressChanged += new DownloadProgressChangedEventHandler(DownloadProgressCallback);
client.DownloadFileAsync (uri, "serverdata.txt");

private static void DownloadProgressCallback(object sender, DownloadProgressChangedEventArgs e)
{
    // Displays the operation identifier, and the transfer progress.
    Console.WriteLine("{0}    downloaded {1} of {2} bytes. {3} % complete...", 
        (string)e.UserState, 
        e.BytesReceived, 
        e.TotalBytesToReceive,
        e.ProgressPercentage);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:55:13.720

当您连接 WebClient 时，您可以订阅 ProgressChanged 事件，例如

```
_httpClient = new WebClient();
_httpClient.DownloadProgressChanged += DownloadProgressChanged;
_httpClient.DownloadFileCompleted += DownloadFileCompleted;
_httpClient.DownloadFileAsync(new Uri(_internalState.Uri), _downloadFile.FullName); 
```

此处理程序的 EventArgs 为您提供 BytesReceieved 和 TotalBytesToReceive。使用此信息，您应该能够确定下载速度并相应地拍摄进度条。

# cocoa - 我能知道什么叫做 applicationShouldHandleReopen 吗？

> ID：11522582
> 
> 赞同：0
> 
> 时间：2012-07-17T12:36:37.420
> 
> 标签：cocoa

我希望将停靠 clic 与单击 finder 中的应用程序图标区分开来。

我可以知道什么叫 `applicationShouldHandleReopen`或有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T04:01:27.307

`applicationShouldHandleReopen:hasVisibleWindows:`发送给应用程序的委托人。委托消息通常由委托对象发送，在这种情况下，委托对象是应用程序对象。

应用程序对象将该消息发送给它的委托，以便处理重新打开应用程序 Apple 事件。因此，要找到发送者，请为该事件安装您自己的 Apple 事件处理程序并[从事件中获取发送者](http://developer.apple.com/legacy/mac/library/technotes/ic/ic_505.html)。（示例代码在 Pascal 中并使用 Apple 事件管理器，但您可以将其转换为 Objective-C 和 NSAppleEventDescriptor。）

也就是说，从 UI 的角度来看，您正在做的事情非常可疑。无论哪个应用程序重新打开您，重新打开都意味着做同样的事情 - 它不限于 Finder 或 Dock。在常见的情况下，实际上是用户在应用程序已经打开时尝试启动它。

仅在没有打开窗口时才执行“重新打开”行为可能更有意义。Cocoa 内置的基于文档的应用程序支持自动执行此操作；如果您不回复`applicationShouldHandleReopen::`或返回`YES`，应用程序会尝试打开一个新文档。您可以执行相同的检查（它甚至会告诉您是否打开了任何窗口）并在相同的条件下执行您想要的行为。

# c# - Emgu C# MCvRTParams 中的“max_num_of_trees_in_the_forest”参数在哪里？

> ID：11522584
> 
> 赞同：0
> 
> 时间：2012-07-17T12:37:01.143
> 
> 标签：c#, opencv, emgucv

我想训练一个 500 棵树的随机森林。[在 OpenCV 中， CvRTParams](http://docs.opencv.org/modules/ml/doc/random_trees.html#cvrtparams-cvrtparams)下有一个参数叫做：max_num_of_trees_in_the_forest。

我在 Emgu 等效对象中找不到此参数：[MCvRTParams](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/22a7f4f4-5976-c63c-acce-d23817b79e96.htm)。

那么，在托管 Emgu 对象中没有此参数的情况下，如何构建由 500 棵随机树组成的模型呢？

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:00:46.487

请参阅[termCrit 属性](http://www.emgu.com/wiki/files/1.5.0.0/Help/html/bf1566a8-b0a2-e2e7-45a7-92a5546820d7.htm)。例如：

```
MCvRTParams p = new MCvRTParams();
p.termCrit.max_iter = 500; 
```

# perforce - Perforce 推荐的基线

> ID：11522585
> 
> 赞同：1
> 
> 时间：2012-07-17T12:37:01.717
> 
> 标签：perforce, clearcase

我正在从 Clearcase 迁移到 Perforce。

Clearcase 有一个“推荐基线”的概念。Perforce中有类似的概念吗？

此外，我认为在 clearcase 中推荐的基线只是一个“浮动标签”。那是对的吗？如果是这样，Perforce 中是否有浮动标签概念？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:16:38.573

推荐的[基线](http://www-01.ibm.com/support/docview.wss?uid=swg21226431)不是浮动标签。
它指定了一个标签（或基线，它不会浮动），用于使用所述基线重新定位子流。
您可以更改推荐的基线（不触发任何变基），但这不会使其“浮动”。

因此，它是引用基线的标记，可用于初始化或更新任何子流。

[Perforce 目录标准](http://www.perforce.com/sites/default/files/pds_template.zip)（其中包含 ppt的zip 文件）用于建立“由目录结构（非流）或流模型传达的通用元素”。

您会发现“可共享质量”标签的想法，然后可以将其用于初始化另一个流（此处为“补丁”）。
但是我没有发现任何特定的 p4 操作可以将该标签标记为默认使用的标签，就像 ClearCase 中的“推荐基线”一样。

![P4 流示例](../Images/94be0b4b1d5192a60cf5dc85e9208e83.png)

（这是 PDS 文档中生命周期阶段的一个示例，是众多过程中的一个）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T14:32:26.923

我不认为它完全等同，但是 Perforce 为每个产品或组件推广了一个主线分支模型。在正常情况下，推荐的基线只是主分支上的最新基线。工作在达到有用的稳定性点之前不会被提升为主要工作，而发布分支会隔离遗留的错误修复和自定义。

这篇博文是一个很好的起点：

[http://www.perforce.com/blog/100607/perforce-directory-standard-pds](http://www.perforce.com/blog/100607/perforce-directory-standard-pds)

作者很有帮助，以前是ClearCase的管理员，可以给他留点意见。

# javascript - 位置对象 Javascript

> ID：11522587
> 
> 赞同：0
> 
> 时间：2012-07-17T12:37:02.630
> 
> 标签：javascript

我在这个文件夹结构中有一个 php 文件：

网页 -> 脚本 -> gen.php

从这个 gen.php 我想用`location()`Javascript 中的函数重定向到

网页->Index.html

我试着这样做：

```
location = "localhost/Web/index.html" 
```

但我只得到一个`404 error`说法，这条路是无效的。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:38:12.917

`location`，在 JavaScript 中，不是一个函数。它是您可以为其赋值的属性。

任何一个（假设 Web 在 URL 上公开并且不仅仅是一个内部目录）：

*   `http://localhost/Web/index.html`
*   `//localhost/Web/index.html`
*   `/Web/index.html`
*   `index.html`

但是，重定向通常应使用 HTTP 处理，因此您最好使用以下方法：

```
<?php
    header('Location: http://localhost/Web/index.html');
    exit;
?> 
```

（请注意，虽然大多数浏览器将从位置标头中的相对 URI 中恢复，但规范要求使用绝对 URI）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:38:30.997

`location = "http://localhost/Web/index.html"`改为写。你错过了添加`http://`

或者`location = "index.html"`，如果您在同一目录中

# android - 如何获取 AutoCompleteTextView 适配器的正确 ID

> ID：11522592
> 
> 赞同：6
> 
> 时间：2012-07-17T12:37:14.800
> 
> 标签：android, autocompletetextview, android-adapter

我是 Android 开发的新手，遇到了一个难以解决的问题。我试图弄清楚如何`AutoCompleteTextView`正确使用小部件。我想创建一个`AutoCompleteTextView`，使用来自 Web 服务的 XML 数据。我设法让它工作，但我肯定对输出不满意。

我想将`HashMap`带有 id => 名称对放入 AutoCompleteTextView 并获取单击项目的 id。当我单击自动完成过滤集输出时，我想在自动完成框下方填充一个列表，我也设法开始工作。

到目前为止完成：

*   自动完成适用于简单`ArrayList`的所有数据过滤正确
*   `onItemClick`点击后事件正确触发
*   `parent.getItemAtPosition(position)`返回`String` 单击项目的正确表示

该事件的`onItemClick(AdapterView parent, View v, int position, long id)`行为不像我想要的那样。如何找出单击项目的未过滤数组位置？过滤后的位置是我不感兴趣的。

进一步的问题：

*   如何处理`HashMaps`或`Collections`在`AutoCompleteTextView`
*   如何`itemId`在`onItemClick`活动中获得权利

我对这个问题进行了非常广泛的研究，但没有找到任何有价值的信息来回答我的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-15T10:23:18.637

> onItemClick(AdapterView parent, View v, int position, long id) 事件的行为不像我想要的那样。

这是过滤适配器时的正常情况。尽管适配器从它的角度保持对初始未过滤数据的引用，但它有一组数据作为其基础（无论是初始数据还是过滤操作的结果）。但这不应该引起任何问题。使用默认的 sdk 适配器（或使用子类），`onItemClick()`您将获得适配器所基于`position`的**当前列表。**然后，您可以使用它`getItem()`来获取数据项`position`（同样，无论是初始还是过滤都无关紧要）。

```
String data = getItem(position);
int realPosition = list.indexOf(data); // if you want to know the unfiltered position 
```

这将适用于列表和`Maps`（假设您使用`SimpleAdapter`）。对于一个`Maps`您总是可以选择添加一个额外的键来设置初始列表中的未过滤位置。

如果您将自己的适配器与 an 一起使用，则`AutoCompleteTextView`可以使`onItemClick()`您获得正确的权利`id`（但是您无法更改的位置）。

```
public class SpecialAutoComplete extends AutoCompleteTextView {

    public SpecialAutoComplete(Context context) {
        super(context);
    }

    @Override
    public void onFilterComplete(int count) {
        // this will be called when the adapter finished the filter
        // operation and it notifies the AutoCompleteTextView
        long[] realIds = new long[count]; // this will hold the real ids from our maps
        for (int i = 0; i < count; i++) {
            final HashMap<String, String> item = (HashMap<String, String>) getAdapter()
                    .getItem(i);
            realIds[i] = Long.valueOf(item.get("id")); // get the ids from the filtered items
        }
        // update the adapter with the real ids so it has the proper data
        ((SimpleAdapterExtension) getAdapter()).setRealIds(realIds);
        super.onFilterComplete(count);
    }

} 
```

和适配器：

```
public class SimpleAdapterExtension extends SimpleAdapter {

    private List<? extends Map<String, String>> mData;
    private long[] mCurrentIds;

    public SimpleAdapterExtension(Context context,
            List<? extends Map<String, String>> data, int resource,
            String[] from, int[] to) {
        super(context, data, resource, from, to);
        mData = data;
    }

    @Override
    public long getItemId(int position) {       
        // this will be used to get the id provided to the onItemClick callback
        return mCurrentIds[position];
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    public void setRealIds(long[] realIds) {
        mCurrentIds = realIds;
    }

} 
```

如果您还实现了`Filter`适配器的类，那么您可以从那里获取 id 而无需覆盖`AutoCompleTextView`该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T19:55:07.630

使用 Luksprog 方法，我用 ArrayAdapter 做了一些类似的操作。

```
 public class SimpleAutoCompleteAdapter extends ArrayAdapter<String>{
        private String[] mData;
        private int[] mCurrentIds;

        public SimpleAutoCompleteAdapter(Context context, int textViewResourceId,
             String[] objects) {
             super(context, textViewResourceId, objects);
             mData=objects;
        }

        @Override
        public long getItemId(int position) {
            String data = getItem(position);
            int index = Arrays.asList(mData).indexOf(data);
            /*
             * Atention , if your list has more that one same String , you have to improve here  
             */
            // this will be used to get the id provided to the onItemClick callback
            if (index>0)
                return (long)mCurrentIds[index];
            else return 0;
        }

        @Override
        public boolean hasStableIds() {
            return true;
        }

        public void setRealIds(int[] realIds) {
            mCurrentIds = realIds;
        }

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-18T09:15:06.377

为 AutoCompleteTextView 实现 onItemClickListener，然后在列表中使用 indexOf 来查找所选项目的索引。

```
actvCity.setOnItemClickListener(new OnItemClickListener() {

     @Override
     public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
          long arg3) {
          int index = cityNames.indexOf(actvCity.getText().toString());
          // Do Whatever you want to do ;)
     }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-08T09:10:44.923

首先将您的数据添加到自定义数组列表中

```
 // mList used for adding custom data into your model
        private List<OutletListSRModel> mList = new ArrayList<>();
      // listdata used for adding string data for auto completing.
        ArrayList<String> listdata = new ArrayList<String>();
        for (int i = 0; i < JArray.length(); i++) {
           JSONObject responseJson = JArray.getJSONObject(i);
           OutletListSRModel mModel = new OutletListSRModel();
           mModel.setId(responseJson.getString("id"));
           mModel.name(responseJson.getString("outlet_name"));
           listdata.add(responseJson.getString("outlet_name"));
        }

    ArrayAdapter adapter = new
                            ArrayAdapter(getActivity(),
 android.R.layout.simple_list_item_1, listdata);
    searchOutletKey.setAdapter(adapter); 
```

现在从我们上面添加的模型中获取任何值。我们可以这样。

```
searchOutletKey.setOnItemClickListener ( new AdapterView.OnItemClickListener ( ) {
            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                String txtOutletId = mOutletListSRModel.get(position).getId();
            }
        }); 
```

# c++ - 什么是“__cdecl”？

> ID：11522601
> 
> 赞同：5
> 
> 时间：2012-07-17T12:38:06.960
> 
> 标签：c++, visual-c++

我想将 AES 算法与 MPI 一起使用。

我用 Visual C++ 编写代码。当我编译代码时，我得到这个错误：

> 函数 _main 中引用的未解析外部符号“void __cdecl BTM(int,int)”(?BTM@@YAXHH@Z)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T12:40:50.780

[`__cdecl`](http://msdn.microsoft.com/en-us/library/zkwh89ks%28v=vs.100%29.aspx) is a calling convention, but the problem you have is a linker failure. It is stating that a definition for the function called `BTM()` cannot be located.

Ensure you are linking with all the necessary `.lib`s.

# silverlight - 如何在 MVVM Light 中关闭 TabItem

> ID：11522610
> 
> 赞同：1
> 
> 时间：2012-07-17T12:38:49.983
> 
> 标签：silverlight, events, xaml, binding, mvvm

在我看来，我正在添加动态自定义 TabItems (TextseiteTabItem)。通过属性 DataContext，我为每个 TabItem 提供了一个可以使用的模型（填写值）。现在我向自定义 TabItems 添加了一个关闭命令，但它不起作用。我无法将关闭命令发送到视图模型。以上是我的尝试..

我的自定义 TabItem：

```
<sdk:TabItem x:Class="PortfolioCreator.TextseiteTabItem" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
           xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit">

    <sdk:TabItem.Header>
        <StackPanel Orientation="Horizontal">
            <sdk:Label Content="{Binding Seitennummer, StringFormat='Seite {0}', Mode=TwoWay}"/>
            <Button Content="X"
                    Command="{Binding CloseTabCommand, Mode=TwoWay}"
                    DataContext="{Binding ElementName=TemplateTabControl}"
                    CommandParameter="{Binding SelectedItem, ElementName=TemplateTabControl}" />   
        </StackPanel>
    </sdk:TabItem.Header>

    <sdk:TabItem.Content>
        <Grid x:Name="LayoutRoot">
            ...
        </Grid>
    </sdk:TabItem.Content>
</sdk:TabItem> 
```

在我看来：

```
...
<sdk:TabControl toolkit:DockPanel.Dock="Bottom" ItemsSource="{Binding Tabs}" x:Name="TemplateTabControl"/>
... 
```

在我的视图模型中：

```
public class PortfolioViewModel : ViewModelBase
{
    public ObservableCollection<TabItem> Tabs { get; set; }

    public RelayCommand<TabItem> CloseTabCommand
    {
        get;
        private set;
    }

    public PortfolioViewModel()
    {
        CloseTabCommand = new RelayCommand<TabItem>(tab =>
        {
            //never reached
        },
        tab =>
        {
            //never reached
        });

        Tabs = new ObservableCollection<TabItem>();

        AddTextseite();
        AddTextseite();          
    }

    void AddTextseite()
    {
        TabItem item = new TextseiteTabItem();
        item.DataContext = new TextSeiteModel();

        Tabs.Add(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:07:47.303

您正在尝试使用 MVVM，但我看到的奇怪之处是您的视图模型中的 ui 元素（选项卡）集合。正确的方法是创建描述 Tab 项的 ViewModel 并将命令移到那里。然后它会绑定。要从选项卡中删除选项卡，您应该在选项卡视图模型中公开事件并从 PortfolioViewModel 附加到它。

当然，我的更改会导致您的 TextseiteTabItem 不会显示在 TablControl 中。但是可以使用 TabControl.ItemTemplate 和 TabControl.ContentTemplate 轻松修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:44:25.943

首先，您`CloseTabCommand`在当前的代码段中什么都不做：`//never reached`. 执行处理程序应该读取类似`tab.Visibility = Visibility.Collapsed`or的内容`myTabControl.Items.Remove(myTabItem)`。

其次，正如@Rafal 指出的那样，在 ViewModel 中使用 UI 元素并不是实现 MVVM 的正确方法。如果您想要可关闭的选项卡项，正确的方法是派生通用控件或在 UI 层上`CloseableTabItem`编写一个可绑定到ViewModel 上相应实例的可设置表。诚然，这种方法对于您的项目来说可能过于复杂。`ClosableTabItemBehavior``ICommand CloseCommand``ICommand`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:46:47.127

[在这里](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)你可以找到一个带有 wpf 可关闭标签的演示应用程序，也许它也适用于你的 silverlight 版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T16:33:51.103

这是我解决此问题的方法。我承认这不是一个好的解决方案并打破了 mvvm 模式，但正如@herzmeister 所说，其他方法对于我现在的项目来说过于复杂。（但这不会是最终的解决方案;-)）

TabItemViewModel：

```
public delegate void CloseTabItemHandler();

public class TextseiteTabItemViewModel : ViewModelBase
{
    public event CloseTabItemHandler CloseTabItem;
    public RelayCommand CloseTabCommand {get; set;}

    public TextseiteTabItemViewModel()
    {
        CloseTabCommand = new RelayCommand(() =>
        {
            if (CloseTabItem == null) return;
            CloseTabItem();
        });
    }
} 
```

选项卡项视图：

```
<sdk:TabItem x:Class="PortfolioCreator.TextseiteTabItemView" 
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
        xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
        xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit">

    <sdk:TabItem.Header>
        <StackPanel Orientation="Horizontal">
            <Button Content="X" Command="{Binding CloseTabCommand, Mode=TwoWay}" />  
        </StackPanel>
    </sdk:TabItem.Header>

    <sdk:TabItem.Content>
        <Grid x:Name="LayoutRoot">
            ...
        </Grid>
    </sdk:TabItem.Content>
</sdk:TabItem> 
```

父视图模型：

```
public class PortfolioViewModel : ViewModelBase
{
    public ObservableCollection<TabItem> Tabs { get; set; }

    public PortfolioViewModel()
    {
        Tabs = new ObservableCollection<TabItem>();

        AddTextseite();
        AddTextseite();
    }

    void AddTextseite()
    {
        var viewmodel = new TextseiteTabItemViewModel();

        TabItem item = new TextseiteTabItemView();
        item.DataContext = viewmodel;

        viewmodel.CloseTabItem += new CloseTabItemHandler(() => 
        { 
            Tabs.Remove(item);
        });

        Tabs.Add(item);
    }
} 
```

# gwt - 如何在 smartgwt Listgrid 中应用分页

> ID：11522611
> 
> 赞同：1
> 
> 时间：2012-07-17T12:38:50.170
> 
> 标签：gwt, smartgwt, listgrid

**我必须在listgrid**中显示大约 10,000 多条记录。我的代码工作正常，但我面临性能问题，它需要太多时间。我想在**Listgrid**中应用分页，这样我就可以提高我的**listgrid**性能。我找到了以下有关分页的方法文档，但我无法应用它。谁能解释我如何使用这种方法？

```
protected void transformResponse(DSResponse response,
                                 DSRequest request, Object data) 
```

[http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/DataSource.html#transformResponse%28com.smartgwt.client.data.DSResponse,%20com.smartgwt.client.data.DSRequest,% 20java.lang.Object%29](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/DataSource.html#transformResponse%28com.smartgwt.client.data.DSResponse,%20com.smartgwt.client.data.DSRequest,%20java.lang.Object%29)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-10-22T18:41:35.940

通过为 listgrid 使用分页，您可以手动准备分页栏并在单击时放置一些控件来控制 listgrid 加载数据。我正在尝试它的工作，我们确信我们会提高网格性能。

# winforms - 合成图控制图类型 hiloopenclose

> ID：11522615
> 
> 赞同：0
> 
> 时间：2012-07-17T12:39:19.610
> 
> 标签：winforms, charts, syncfusion

我正在使用 Visual Studio 2010 和 Syncfusion Essential Studio 10.2.0.56。

我想在同步融合基本图表中的高低开闭图表类型中将开闭符号的形状从水平线更改为圆形。

有人可以帮助我实现这一目标吗？？？？我想最终得到这种图表

![在此处输入图像描述](../Images/8cadaf15c261f9e40dc55e6dc4ec6d0b.png) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:04:36.233

您可以通过 Hilo 和 Scatter 类型图表的组合来实现此要求。请根据您的要求在 Hilo 和散点图类型中设置所需的符号。请参考下面的代码片段来实现这一点，

```
 [C#]
    // chart series for Hilo.            
        ChartSeries series1 = new ChartSeries("Series 1", ChartSeriesType.HiLo);
         series1.Points.Add(1, new double[] { 8, 3 });
        series1.Points.Add(2, new double[] { 10, 2 });
        series1.Points.Add(3, new double[] { 16, 2 });
        series1.Points.Add(4, new double[] { 7, 3 });
        series1.Points.Add(5, new double[] { 12, 3 });
        this.chartControl1.Series.Add(series1);
        // symbol for Hilo chart type
        series1.Style.Symbol.Shape = ChartSymbolShape.HorizLine;
        series1.Style.Symbol.Color = Color.CadetBlue;
        series1.Style.Interior = new BrushInfo(Color.Black);

          // chart series for scatter.            
        ChartSeries series2 = new ChartSeries("Series 2", ChartSeriesType.Scatter);
        for (int i = 0; i < 5; i++)
            series2.Points.Add(i+1, (series1.Points[i].YValues[0] + series1.Points[i].YValues[1]) / 2);
        this.chartControl1.Series.Add(series2);
          // symbol for scatter chart type
        series2.Style.Interior = new BrushInfo(Color.LightGreen);
        series2.ZOrder = 0;

          // chart series for scatter.            
        ChartSeries series3 = new ChartSeries("Series 3", ChartSeriesType.Scatter);
         for (int i = 0; i < 5; i++)
            series3.Points.Add(i + 1, (series1.Points[i].YValues[1]));
        this.chartControl1.Series.Add(series3);
       // symbol for scatter chart type
        series3.Style.Symbol.Shape = ChartSymbolShape.HorizLine;
        series3.Style.Symbol.Color = Color.Red; 
```

问候，

M·巴拉吉

# java - 现场搭建 jersey webservice + MySQL 数据库

> ID：11522617
> 
> 赞同：1
> 
> 时间：2012-07-17T12:39:26.147
> 
> 标签：java, android, hosting, jersey

在过去的两周里，我一直在开发一个 jersey RESTful web 服务和一个与之通信的 MySql 数据库。现在我的 Android 应用程序已经完成，它从 web 服务获取它的资源。在整个开发过程中，我在本地主机上的 tomcat 服务器上拥有 web 服务。但现在我需要我的服务才能上线。

我什至不知道从哪里开始。我怎样才能让它上线？有哪些托管公司支持这些需求，我从哪里开始？webservice -> 数据库连接在托管部分看起来如何？是tomcat常用来托管吗？

如您所见，我对此几乎一无所知，朝正确的方向眨眼会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:53:56.777

您需要的是支持 Tomcat 和 MySql 的托管服务。

[这](http://www.tomcathostingservice.com/)就是我在谷歌上搜索“tomcat 托管服务”时发现的，但还有更多。

您可能还需要一个域名（如 www.mydomain.com）。一些托管服务也提供了这一点。

我建议你打电话给他们，询问他们是否为你的需要提供支持。

调用远程服务应该是一样的，你所要做的就是改变 url 主机，所以而不是：

```
http://localhost 
```

你将把你的域：

```
http://mydomain.com 
```

# javascript - jQuery 函数无法正常工作

> ID：11522619
> 
> 赞同：0
> 
> 时间：2012-07-17T12:39:26.863
> 
> 标签：javascript, jquery

我的页面保护 JS 文件看起来像这样

```
(function($){
$.fn.disableSelection = function() {
    return this.each(function() {           
        $(this).attr('unselectable', 'on')
               .css({
                   '-moz-user-select':'none',
                   '-webkit-user-select':'none',
                   'user-select':'none',
                   '-ms-user-select':'none'
               })
               .each(function() {
                   this.onselectstart = function() { return false; };
               });
    });
};
})(jQuery);

var message="Bu səhifədən material kopyalamaq qadağandır!"; 

function clickIE4(){
    if (event.button==2){
        alert(message);
        return false;
    }
}
function clickNS4(e){
    if (document.layers||document.getElementById&&!document.all){
        if (e.which==2||e.which==3){
            alert(message);
            return false;
        }
    }
}
if (document.layers){
    document.captureEvents(Event.MOUSEDOWN);
    document.onmousedown=clickNS4;
} else if (document.all&&!document.getElementById){
    document.onmousedown=clickIE4;
}
document.oncontextmenu=new Function("alert(message);return false") 
```

除 $.fn.disableSelection 外，所有功能都运行良好。它必须禁用选择。但我可以选择任何一段文字。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:42:30.357

You only define the function in this code. Execute the function.

# php - 如何使用 XSLT 从 PHP 插入 xml 数据（作为变量）

> ID：11522624
> 
> 赞同：2
> 
> 时间：2012-07-17T12:39:39.717
> 
> 标签：php, xml, xslt

我需要通过集成一些 XML 文件来生成主 XML 文件。如果我们将不同的子 XML 文件存储在磁盘上的某个位置，则可以实现此目的。但在我的例子中，子 XML 文件是动态 XML 数据。它们不存储在任何地方，而是动态生成。那么如何插入这些子 XML 数据以生成主 XML 文件。

我的输入是：

```
<root>
  <element id="1">
  </element>
  <element id="2">
  </element>
</root> 
```

我的输出是：

```
<root>
   <element id="1">
      <section>
         <record>12</record>
      </section>
   </element>
   <element id="2">
      <section>
          <input>menu</input>
      </section>
   </element>
</root> 
```

在上面的输出中，XML data( `<section><record>12</record></section>`) 应该来自 PHP 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T22:12:49.000

这是一个旧线程，但没有给出令人满意的答案；最近我遇到了类似的情况，我相信该解决方案足以适用于此类问题。

本质上：PHP 和 XSLT 处理器通过`DOMNode`对象（参数和返回值）进行通信。因此，可以`DOMNode`使用 PHP 构造一个对象，并根据 XSLT 处理器的请求将其返回。

鉴于上述示例，我们将拥有以下 XSLT：

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:php="http://php.net/xsl">
  <xsl:template match="/root">
    <root>
      <xsl:apply-templates select="element" />
    </root>
  </xsl:template>

  <xsl:template match="element">
    <element>
      <!-- Pass the selected id attributes to a PHP callback,
           then literally include the XML as returned from PHP.
           Alternatively, one could use xsl:apply-templates
           to further transform the result. -->
      <xsl:copy-of select="php:function('xslt_callback', @id)" />
    </element>
  </xsl:template>
</xsl:stylesheet> 
```

并且 PHP 函数（这个函数应该使用`registerPHPFunctions`方法 [[参见 php 手册](http://www.php.net/manual/en/xsltprocessor.registerphpfunctions.php)] 导出）将是：

```
/**
 * @param  DOMAttr[]  $attr_set An array of DOMAttr objects,
 *                              passed by the XSLT processor.
 * @return DOMElement           The XML to be inserted.
 */
function xslt_callback ($attr_set) {
  $id = $attr_set[0]->value;
  return new DOMElement('section', $id); //whatever operation you fancy
} 
```

生成以下 XML：

```
<root>
  <element>
    <section>1</section>
  </element>
  <element>
    <section>2</section>
  </element>
</root> 
```

php 函数`xslt_callback`可以对选定的 id 做任何事情。我们假设在此示例中`$attr_set`始终只包含一个选定的属性。根据具体情况，建议执行一些范围或类型检查；然而，在这里，这只会使示例骨架不必要地复杂化。

注意：简单地从 PHP 返回一个 XML 字符串将导致为每个and插入`&lt;`和标签。`&gt;``<``>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:55:29.937

**您必须将两个“动态”XML 文档作为参数传递给转换**。

每个“动态文档”都应该已经被解析为 XML 文档（在其他 XSLT 处理器 API 中，有一个方法——例如`XmlDocument.LoadXml()`——接受一个字符串并将其解析为 XML 并创建一个（解析的）XML 文档）。

阅读您的 XSLT 处理器文档以了解用于将外部参数传递给转换的 API

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-17T16:30:49.353

我仍然想知道你想从 php 中得到什么我认为你可以重新打印并在循环中抛出类似下面的内容，但我很高兴进一步挖掘到使用动态 xml 生成来制作网站前端的点。在此页面中通过切换值更改 scalors 选项的作用在 php 中是不同的，有很多可以做的，请进一步告诉我你想要什么

```
<?php
$i=1;
$option = "default";
$elemental = 1;
$StrRecord = "12";
$StrInput = "menu";
$domdoc = new DOMDocument();
$domdoc->preserveWhiteSpaces = false;
$domdoc->load(realpath('xmlfile.xml'));
$root = new DOMElement('root');
$element = new DOMElement('element');
$section = new DOMElement('section');
$record = new DOMElement('record', $StrRecord);
$elementi = new DOMElement('element');
$sectioni = new DOMElement('section');
$inputi = new DOMElement('input', $StrInput);
$elementid= new DOMAttr('id', $elemental+1);
$elementidi= new DOMAttr('id', $elemental+1);

$domdoc->appendChild($root);
$root->appendChild($element);
$element->appendChild($section);
$section->appendChild($record);
$root->appendChild($elementi);
$elementi->appendChild($sectioni);
$sectioni->appendChild($inputi);
$sectioni->appendChild($inputi);
$element->appendChild($elementid);
$elementi->appendChild($elementidi);
$domdoc->formatOutput = true;
$domdoc->save('xmlfile.xml');

$xmldoc= new DOMDocument();
$xmldoc->load(realpath('xmlfile.xml'));
$xpath = new DOMXpath($xmldoc);

switch($option){
case "record":
$query = ('/root/element/section/record');
break;
case "input":
$query = ('/root/element/section/input');
break;
case "default":
$query = ('/root/element[@id="'. $i.'"]/');
break;
}
$nodeList = $xpath->query($query);
foreach($nodeList as $node){
echo($node->nodeValue);
}
?> 
```

# codeigniter - 使用 codeigniter 连接到两个以上的数据库

> ID：11522633
> 
> 赞同：0
> 
> 时间：2012-07-17T12:40:02.370
> 
> 标签：codeigniter, multiple-databases

我正在做一个需要连接三个数据库的项目，一个在 MySQL 中，另外两个在 MSSQL 中。我使用 codeigniter 作为框架，我可以成功连接到两个数据库。但是当我尝试使用与连接第二个数据库相同的方法连接到第三个 MSSQL 数据库时，之前的所有连接都消失了。database.php 中的数据库配置数组是正确的。

默认配置适用于 MySQL

我按如下方式连接了第二个数据库。

```
$mssql = $this->load->database('mssql1', TRUE); 
```

第三次如下

```
$mssq2 = $this->load->database('mssql2', TRUE); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T12:35:43.580

我通过更改 codeigniter DB_driver.php 中的 simple_query 函数来修复它。

```
function simple_query($sql)
{
    if ( ! $this->conn_id)
    {
        $this->initialize();
    }
    $this->db_select();

    return $this->_execute($sql);
} 
```

添加了**$this->db_select();** 到这个功能。感谢所有帮助

# xpath - Jackrabbit 是否支持 XPath 联合 (|) 运算符？

> ID：11522634
> 
> 赞同：0
> 
> 时间：2012-07-17T12:40:16.423
> 
> 标签：xpath, jackrabbit

我正在尝试在 2 个不同的节点下搜索特定名称。这有效

```
/jcr:root/db067409/libraries/bd0b868d/_x0030_//*[@name="FIRST"] 
```

但是当我尝试对第二个节点进行 OR 操作时...

```
/jcr:root/db067409/libraries/bd0b868d/_x0030_//*[@name="FIRST"]|/jcr:root/db067409/libraries/_x0033_78d57e4/_x0031_//*[@name="FIRST"] 
```

我不再得到任何搜索结果。请有人指出我做错了什么。

我真正想做的是沿着这些思路；如果我有 /a/b/ID1/VERSION1 和 /a/b/ID2/VERSION2 我想要这样的 xpath /a/b/(ID1/VERSION1 or ID2/VERSION2)//*[@name= “某个名字”]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:56:25.953

答案是否定的。不幸的是，它不会像您期望的那样抛出 UnsupportedOperationException。Jira 中有一个项目，但我猜他们忽略了它，因为 Xpath 现在已弃用。

如果确实需要联合，请使用 JCR_SQL2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:45:59.093

**编辑**

[该线程](http://dev.day.com/discussion-groups/content/lists/cq-google/2010-06/2010-06-24__day_communique_XPath_union_operator_Jacopo_Franzoi.html)表明 Jackrabbit 2.0 中提供了类似联合的功能，但更早版本没有。

> [联接] 无法使用 JCR Xpath 或 JCR-SQL，但使用 JCR 2.0 (JCR-SQL2) 中的新查询模型。自 CQ 5.3 / CRX 2.0 / Jackrabbit 2.0 起支持此功能。请注意，这些连接并没有进行太多优化。

实际上，[XPath 在 JCR 2.0 中已被弃用](http://www.day.com/specs/jcr/2.0/6_Query.html)。

> JCR 1.0 定义了一种不同于JCR-SQL2 的SQL 方言，以及一种XPath 方言。不推荐使用对这些语言的支持。

# php - 将日期和时间转换为日期

> ID：11522637
> 
> 赞同：0
> 
> 时间：2012-07-17T12:40:31.833
> 
> 标签：php, date, time

我需要更改以下内容

```
13/07/2012T15:00:00 
```

到

```
13-7-2012 
```

我尝试过使用`strtotime`，`date`但它们没有用，我想知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:50:48.650

用于[`DateTime`](http://php.net/datetime)为您正确解析。这样，您不必对原始输入进行任何操作，只需将其提供给[`DateTime::createFromFormat()`](http://php.net/datetime.createfromformat)，如下所示：

```
$date = DateTime::createFromFormat( '!d/m/Y+', "13/07/2012T15:00:00", new DateTimeZone( "America/New_York"));
echo $date->format( 'd-n-Y'); 
```

这[将打印](http://viper-7.com/EMZ8yh)：

```
13-7-2012 
```

确保在调用中设置[正确的时区](http://us3.php.net/manual/en/timezones.php)`new DateTimeZone( "...")`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:43:35.753

您输入的字符串[不是](http://www.php.net/manual/en/datetime.formats.date.php)[`strtotime()`](http://php.net/strtotime). 值得注意的`/`是，它不是公认的`dd/m/yyyy`格式分隔符。

只需将 转换为`/`即可`-`解决问题：

```
13-07-2012T15:00:00 
```

然后你可以这样做：

```
echo date('d-n-Y', strtotime('13-07-2012T15:00:00')); 
```

要转换此字符串，您可以进行一些简单的字符串替换。

```
str_replace('/', '-', $input); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:46:49.853

检查这个：

```
date("d-n-Y", strtotime(str_replace('/', '-', "13/07/2012T15:00:00")) ) 
```

[工作中的代码](http://codepad.org/fQWqJyuL)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:51:31.023

因为您只需要获取 `13-7-2012`日期即可在“-”中执行“/”替换以获取日期

```
date('d-n-Y', strtotime(str_replace('/', '-', '13/07/2012T15:00:00')); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-17T12:56:21.780

你可以像这样轻松地做到这一点

```
$today = date("m.d.y"); 
```

有关更多详细信息，请使用这些参考

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# php - 接收由jquery函数发送的php文件数据

> ID：11522644
> 
> 赞同：0
> 
> 时间：2012-07-17T12:40:54.047
> 
> 标签：php, javascript, jquery, forms

当我单击按钮提交表单时，我会调用以下函数：

```
 function dadosFormularios(preenchimentoForm){
    //var path = document.location.pathname;
    //alert(path);
    alert(preenchimentoForm);
    //window.location.href = 'wp-content/themes/template/index.php'; 

    var qstringA = '';
    //dados dos campos
    var nome=document.getElementById("nome").value;
    qstringA = 'nome='+ nome;
    //alert(qstringA);

    if(preenchimentoForm==false){
        alert('Please correct the errors in the Form'); 
    }
    else{
        if(preenchimentoForm==true){
            window.location.href = 'index.php?'+qstringA;
        return false;
        }
    }
} 
```

由于我正在使用这种处理数据的方式，我如何提醒我的页面`index.php`该函数发送的数据到达索引？我不能使用 a`if (isset($_POST['button']..)`因为我是通过函数而不是通过表单的按钮发送信息的，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:47:36.483

`window.location.href = 'index.php?'+qstringA;`
此行只是使用查询字符串**重定向**到 index.php `?nome=nome_value`。
例如。`index.php?nome=nome_value`

所以，在你的`index.php`你可以简单地用`$_GET`.

通过在`print_r($_GET);`那里进行检查。

在`index.php`中，您可以简单地检查

```
if(isset($_GET["nome"])){
    //Nome is set
    //Do something here
} 
```

**PS**虽然，在不知道使用该功能背后的其他情况或原因的情况下，可以说该功能只是在做一个简单`<form action=index.php>`的事情。

**PPS**虽然你`jQuery`在标题中提到并标记了它，但我不确定这个函数是否使用了任何 jQuery 代码。我认为这只是一个简单的`Javascript`功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:43:44.227

如果您使用的是 jQuery，请查看[`.ajax()`](http://api.jquery.com/jQuery.ajax/). 请记住，它是异步的，因此结果可能不是您认为的那样。您不需要重新加载整个页面（这是您`window.location.href = 'index.php?'+qstringA;`会做的）只是为了提交信息。

如果您想`alert`在调用完成时进行某些`ajax`操作，您可以定义一个函数来调用成功的 ajax 调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:44:10.637

使用 ajax() 像：

```
$.ajax({
  type: 'POST',
  url: url,
  data: data,
  success: success,
  dataType: dataType
}); 
```

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# php - 设置最大高度 onResize

> ID：11522646
> 
> 赞同：2
> 
> 时间：2012-07-17T12:40:56.300
> 
> 标签：php, javascript, jquery

我有一个脚本，它使用这个函数来调整图像 onLoad 和 onResize：

```
/**
 * Calculates the display width of an image depending on its display height when it is resized.
 * @param displayHeight the resized height of the image
 * @param originalHeight the original height of the image
 * @param originalWidth the original width of the image
 * @return the display width
 */
function getDisplayWidth(displayHeight, originalHeight, originalWidth){
    var ratio = originalHeight/displayHeight,
        res = Math.round(originalWidth/ratio) || 1000;
    return res;
} 
```

.. 但我不希望图像高度超过 800px，事实上它甚至可以固定为 800×530px 大小。我试图返回一个固定值，`res`但它似乎不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:48:07.203

你只需要在你的函数中添加一个 if 语句......

```
/**
 * Calculates the display width of an image depending on its display height when it is resized.
 * @param displayHeight the resized height of the image
 * @param originalHeight the original height of the image
 * @param originalWidth the original width of the image
 * @return the display width
 */
function getDisplayWidth(displayHeight, originalHeight, originalWidth){
    if (displayHeight > 800) displayHeight = 800;
    var ratio = originalHeight/displayHeight,
        res = Math.round(originalWidth/ratio) || 1000;
    return res;
} 
```

当您设置宽度时，它会自动将高度设置为正确的宽度/高度比值。您还可以通过将变量传递给 getDisplayWidth 来获取高度，然后当函数返回时，该变量将具有由最大高度条件定义的高度。

# sql-server - SSIS Excel 连接管理器错误

> ID：11522649
> 
> 赞同：2
> 
> 时间：2012-07-17T12:41:05.283
> 
> 标签：sql-server, excel, ssis, connection, bids

我正在尝试从具有 19,852 行的 Excel 文件创建 Excel 连接管理器。选择文件和 Excel 工作表并单击确定后，出现以下错误：

```
value does not fall within the expected range 
```

如何修复此错误？如果您需要更多信息，请与我们联系！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T09:05:45.023

尝试应用这篇文章中的提示：[SSIS Excel Import Forcing Incorrect Column Type](https://stackoverflow.com/questions/542497/ssis-excel-import-forcing-incorrect-column-type)

Excel 连接器以缺少正确的数据列类型而闻名。

# linux - Really strange behavior with Linux Shell Scripts

> ID：11522650
> 
> 赞同：0
> 
> 时间：2012-07-17T12:41:15.270
> 
> 标签：linux, shell, debian

i am really wondering why Linux (Debian Squeeze) is acting kind of crazy. I've been trying to execute a simple test.sh script in my webapps directory:

```
/var/www/tomcat7/webapps/ROOT/WEB-INF/bin/ 
```

How to execute a script? Well, that would be done by entering:

**EDIT: ITS NOT ABOUT WRONG (FORGOTTEN) PERMISSIONS:**

```
chmod +x test.sh 

./test.sh 
```

which now gives me the following:

```
-bash: ./test.sh: No permission 
```

test.sh is looking like this:

```
#!/bin/bash

echo "Hello!" 
```

What the hek? Copying/Moving test.sh to my home directory and execute it again, which gives me:

```
Hello! 
```

which is actually the output from my test.sh file. So, it doesnt work in my webapp directory but it works in home?

**My researches:**

Trying to execute the script with sudo rights:

When executing the script with sudo the script simply does nothing. No messages at all.

Trying to execute it via

```
. test.sh 
```

**It works! But why?**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:00:24.307

文件所在的卷已安装`noexec`。您将需要重新安装它`exec`，但首先要考虑/研究为什么要安装它`noexec`。

# mysql - Optimizing MySQL indexes and query execution time

> ID：11522651
> 
> 赞同：0
> 
> 时间：2012-07-17T12:41:14.757
> 
> 标签：mysql, sql, query-optimization

A question about query performance in MySQL. I have a table (the largest I've ever dealt with) of 2.3 million records (and growing). The table is part of a database keeping track of users logging in and scoring points in kind of seperate, quiz-like, sessions. For the query at hand I need the 'highscore table' of all the sessions.

So, the points scored in a session are stored per question in order to analyse the progress of the user better. A session combines the total of a user's points, and a session is connected to a user.

At first the query executiontime ran towards 12 seconds (unacceptable) with the table and query data as follows under 'Original set'. Under 'Improved scores table' there is the altered situation with some optimization in the indexes. This results in a query execution time of about 2 seconds.

My Question is: Is there an additional way to optimize? Like I said, 2.3 million (and counting) is the largest table I've ever seen, so I'm not that experienced at this and optimization sooner results in seconds than tenths of a second improvement.

**Original set**

```
CREATE TABLE `players` (
  `id_players` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_organisations` int(10) unsigned NOT NULL,
  `player_name` varchar(45) NOT NULL,
  `player_comments` text NOT NULL,
  PRIMARY KEY (`id_players`),
  KEY `FK_players_organisation` (`id_organisations`),
  CONSTRAINT `FK_players_organisation` FOREIGN KEY (`id_organisations`) REFERENCES `organisations` (`id_organisations`)
) ENGINE=InnoDB AUTO_INCREMENT=9139 DEFAULT CHARSET=latin1

SELECT COUNT(*) FROM players => 9126

CREATE TABLE `scores` (
  `id_scores` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_sessions` int(10) unsigned NOT NULL,
  `id_levels` int(10) unsigned NOT NULL,
  `id_categories` int(10) unsigned NOT NULL,
  `score_points` int(10) unsigned NOT NULL,
  `score_correct` tinyint(4) NOT NULL,
  `score_submitted` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id_scores`),
  KEY `FK_scores_sessions` (`id_sessions`),
  KEY `FK_scores_levels` (`id_levels`),
  KEY `FK_scores_categories` (`id_categories`),
  KEY `Index_3_points` (`score_points`),
  KEY `Index_4_submitted` (`score_submitted`)
) ENGINE=InnoDB AUTO_INCREMENT=2328510 DEFAULT CHARSET=latin1

SELECT COUNT(*) FROM scores => 2328469

CREATE TABLE `sessions` (
  `id_sessions` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_players` int(10) unsigned NOT NULL,
  `id_classes` int(11) DEFAULT NULL,
  `session_start` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `session_grade` decimal(4,1) NOT NULL,
  `session_ip` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`id_sessions`),
  KEY `FK_sessions_players` (`id_players`),
  KEY `FK_sessions_classes` (`id_classes`)
) ENGINE=InnoDB AUTO_INCREMENT=40800 DEFAULT CHARSET=latin1

SELECT COUNT(*) FROM sessions => 40788 
```

The 'offending' query:

```
SELECT sum( s.score_points ) AS score_points, p.player_name
FROM scores s
INNER JOIN sessions se      ON s.id_sessions      = se.id_sessions
INNER JOIN players p        ON se.id_players      = p.id_players
GROUP BY se.id_sessions
ORDER BY score_points DESC
LIMIT 50; 
```

Above query took about 12 seconds with said scores table. (below the EXPLAIN ouput)

```
id    select_type   table   type   possible_keys                  key                   key_len   ref                      rows     Extra
'1'   'SIMPLE'      'p'     'ALL'  'PRIMARY'                      NULL                  NULL      NULL                     '9326'   'Using temporary; Using filesort'
'1'   'SIMPLE'      'se'    'ref'  'PRIMARY,FK_sessions_players' 'FK_sessions_players'  '4'      'earzsql.p.id_players'    '2'      'Using index'
'1'   'SIMPLE'      's'     'ref'  'FK_scores_sessions'          'FK_scores_sessions'   '4'      'earzsql.se.id_sessions'  '72'     '' 
```

(the apparently infamous Using temporary and Using filesort)

After some 'research' I've changed indexes (Index_3_points) in scores table resulting in a table like:

**Improved scores table**

```
CREATE TABLE `scores` (
  `id_scores` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_sessions` int(10) unsigned NOT NULL,
  `id_levels` int(10) unsigned NOT NULL,
  `id_categories` int(10) unsigned NOT NULL,
  `score_points` int(10) unsigned NOT NULL,
  `score_correct` tinyint(4) NOT NULL,
  `score_submitted` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id_scores`),
  KEY `FK_scores_sessions` (`id_sessions`),
  KEY `FK_scores_levels` (`id_levels`),
  KEY `FK_scores_categories` (`id_categories`),
  KEY `Index_4_submitted` (`score_submitted`),
  KEY `Index_3_points` (`id_sessions`,`score_points`)
) ENGINE=InnoDB AUTO_INCREMENT=2328510 DEFAULT CHARSET=latin1 
```

With above scores table the query execution time drops to about 2 seconds. Explain (below) has not really changed a lot though (at least, the infamous temporary and filesorts are still used)

```
id    select_type   table   type   possible_keys                        key                   key_len   ref                      rows     Extra
'1'   'SIMPLE'      'p'     'ALL'  'PRIMARY'                            NULL                  NULL      NULL                     '9326'  'Using temporary; Using filesort'
'1'   'SIMPLE'      'se'    'ref'  'PRIMARY,FK_sessions_players'        'FK_sessions_players' '4'       'earzsql.p.id_players'   '2'     'Using index'
'1'   'SIMPLE'      's'     'ref'  'FK_scores_sessions,Index_3_points'  'Index_3_points'      '4'       'earzsql.se.id_sessions' '35'    'Using index' 
```

I'd love to hear it if anyone knows further optimization tricks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:18:34.443

大概前 50 名的分数不会经常变化？

因此，将查询运行到 TopScore 表中，并为其编制索引。当用户的分数发生变化时，对照高分表进行检查，如果用户的分数高于第 50 位，则仅更新 TopScore 表。

我还建议向频繁更新的表添加大量索引可能会对该表产生不利的性能影响。

# c# - SkyDrive sign in page cannot be rendered in sl-xna windows phone project

> ID：11522662
> 
> 赞同：1
> 
> 时间：2012-07-17T12:42:30.047
> 
> 标签：c#, silverlight, windows-phone-7, xna, onedrive

I tried to use SignInButton control in my sl-xna project. But when I press the SignInButton, the sign in page does not rendered(If I press the Back button, the SessionChanged callback is called but the session state is still unknown. So the sign in page should have been opened but not be rendered). The code is almost the same as the sample code in SkyDrive SDK for windows phone except that my project is an sl-xna project while the sample is a silverlite project. Is there anything I need to do to render the sign in page?

# java - Convert apache.axis.types.Duration to HH:mm format

> ID：11522664
> 
> 赞同：1
> 
> 时间：2012-07-17T12:42:34.583
> 
> 标签：java, apache, date, date-conversion, datetime-conversion

Please refer below main method:

```
public static void main(String[] args) {
    Duration dur = new Duration();
    dur.setHours(17);
    dur.setMinutes(30);

    SimpleDateFormat simpDate = new SimpleDateFormat("kk:mm");
    System.out.println(simpDate.format(dur.getAsCalendar().getTime()));
} 
```

When i run this i got output 05:30 and expected output is 17:30\. Even i tried with "HH:mm" format but not getting expected output. it converts to 12 hours format rather than 24 hours format.

Please help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T06:50:07.387

为什么不能简单使用

```
System.out.println(dur.getHours()+":"+dur.getMinutes()); 
```

# android - 如何使用 JNI 将 C++ 文件集成到 Android 应用程序中

> ID：11522671
> 
> 赞同：2
> 
> 时间：2012-07-17T12:42:39.527
> 
> 标签：android

我想通过 JNI 在我的 android 应用程序中使用 C++ 文件，但我不知道如何集成 C++ 文件以及如何编译和运行它。

如果有人知道，请帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:47:48.357

您需要进行 NDK 编程。[安卓NDK](http://developer.android.com/tools/sdk/ndk/overview.html)

Android NDK 是一个工具集，可让您在 Android 应用程序中嵌入使用本机代码的组件。

Android 应用程序在 Dalvik 虚拟机中运行。NDK 允许您使用本机代码语言（例如 C 和 C++）来实现部分应用程序。这可以为某些类别的应用程序带来好处，以重用现有代码的形式，在某些情况下提高速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:46:39.753

您可以使用 Android NDK 来满足您的要求。

[安卓-NDK](http://developer.android.com/tools/sdk/ndk/index.html)

**NDK**是一个工具集，可让您使用 C 和 C++ 等原生代码语言实现应用程序的某些部分。对于某些类型的应用程序，这可能会有所帮助，以便您可以重用以这些语言编写的现有代码库并可能提高性能。

教程[进阶 Android：NDK 入门](http://mobile.tutsplus.com/tutorials/android/ndk-tutorial/)

使用 Android NDK 创建您的 C、C++ 文件的共享库，并在运行时从您的 Android 应用程序加载该库。看看我链接的教程。

# ios - 获取 UIViewController 视图的正确边界

> ID：11522672
> 
> 赞同：51
> 
> 时间：2012-07-17T12:42:41.543
> 
> 标签：ios, xcode, uiviewcontroller, rotation, bounds

我有一个 iPad 应用程序。在横向`UIViewController`视图中，实际宽度 =`1024px`和高度 = 768 - 20 (statusBar) - 44 (navigationBar) = `704px`。

所以我想得到这个`[1024 x 704]`尺寸，我正在使用`self.view.bounds`它。它返回`[748 x 1024]`，这是错误的！但是当我旋转屏幕两次（当前 -> 纵向 -> 当前）时，视图的边界是正确的 - `[1024 x 704]`。

视图初始化如下：

```
- (void)loadView {
    self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
    self.view.backgroundColor = [UIColor lightGrayColor];
} 
```

界限是这样的：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSLog(@"bounds = %@", NSStringFromCGRect(self.view.bounds));
}
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    NSLog(@"bounds = %@", NSStringFromCGRect(self.view.bounds));
} 
```

所以问题是..我怎样才能在一开始就获得正确的视图约束？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2017-02-16T13:40:00.860

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-09-05T05:50:35.593

根据其他一些答案，您看到的问题是因为在轮换发生**之前**`viewDidLoad`被调用。因为 iPad 总是以纵向模式初始化，所以如果您在 中获取尺寸值，它们将始终是纵向尺寸 - 这与您配置的任何方向无关。 **`viewDidLoad`**

 **要在定向/旋转发生后获取尺寸，请**在**`viewDidAppear`.

* * *

我不太明白为什么 iOS 不能更好地处理这个问题 - 特别是考虑到您在项目设置中定义了方向，并且在 Xcode Interface Builder 中。但是，我确信这是有充分理由的；-)。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-07-17T13:19:50.540

我一直用：

```
CGSize sizeOfScreen = [[UIScreen mainScreen] bounds].size; 
```

获取屏幕的大小，并且：

```
CGSize sizeOfView = self.view.bounds.size; 
```

得到`view`的大小。我刚刚在 viewDidLoad 上对其进行了测试，它返回了：

```
2012-07-17 10:25:46.562 Project[3904:15203] bounds = {768, 1004} 
```

这是正确的，因为 CGSize 被定义为 {Width, Height}。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T12:59:17.540

这是我在上一个项目中发现的：在 viewDidLoad 之后，self.view 的框架会根据这个屏幕是否有导航栏等进行调整。

因此，也许您想在 viewDidLoad 之后使用该值（可能在 viewWillAppear 或 viewDidAppear 中），或者通过减去条形高度来手动调整它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T20:31:57.557

我遇到了这个问题，发现限制范围`viewDidAppear`可以满足我的需要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-06T05:44:10.683

If you want to get correct bounds of view in `ViewDidLoad` method, you can use Dispatch async with delay for it. See this example below:

```
DispatchQueue.main.asyncAfter(deadline: .now() + 1) {
                // Get your bounds here
            } 
```**

# c# - 强制绑定的 UI 组件刷新

> ID：11522674
> 
> 赞同：1
> 
> 时间：2012-07-17T12:42:45.387
> 
> 标签：c#, wpf

我知道这已被问过几次，但没有一个答案对我有用。

我在 TreeView 中有这个元素列表，单击时会在面板中显示它们的参数（带有 texboxes、标签、组合和其他组件）。我还有一个按钮，允许将数据从组合中选择的一个元素复制到数据面板上当前显示的元素（“从...复制数据”）。

面板中的所有数据都绑定到一个类及其属性，而树视图绑定到这些对象的集合。

问题是，当我按下复制按钮（即将数据从对象 A 复制到当前对象）时，没有反映更改。然而，如果我更改要显示的元素（单击 TreeView 中的另一个对象）然后返回到更改的对象，更改就在那里。所以它实际上是在改变实际数据，而不是刷新数据绑定。

奇怪的是，如果我按两次复制按钮，确实会反映更改。

这可能是造成这种情况的原因，我将如何解决？

这是应该更新的控件的 XAML 示例（我只发布一个，因为有很多，而且它们都不起作用）、复制按钮和树视图：

Copiar datos del protocol: Copiar

```
<TreeView SelectedItemChanged="TvProtocolosSelectedItemChanged" Margin="10,5" Name="tvProtocolos" HorizontalAlignment="Stretch" VerticalAlignment="Top" Width="200" Height="292" MinWidth="0">
                    <TreeView.ItemContainerStyle>
                        <Style TargetType="TreeViewItem">
                            <Setter Property="IsEnabled" Value="{Binding Path=Activo}"/>
                            <Setter Property="IsExpanded" Value="False"/>
                        </Style>
                    </TreeView.ItemContainerStyle>
                    <TreeView.ItemTemplate>
                        <HierarchicalDataTemplate ItemsSource="{Binding Path=Children}">
                            <StackPanel Orientation="Horizontal">
                                <Image Source="imagenes\file_icon.gif" Margin="0,0,5,0" />
                                <TextBlock Text="{Binding Path=Name}" ></TextBlock>
                            </StackPanel>
                        </HierarchicalDataTemplate>
                    </TreeView.ItemTemplate>

                </TreeView> 
```

这是代码隐藏文件：

```
public partial class NewXP2 : Window
    {
        private const int nProtocolos = 100;
        private Experiencia2 _exp2Class = new Experiencia2(nProtocolos);
        private readonly TreeView _tvProtocolos;

        public NewXP2()
        {
InitializeComponent();
_tvProtocolos.ItemsSource = _expClass.Protocolos;
xpControlsPanel.DataContext = _exp2Class.GetProtocolo(0);
            for(int i=0;i<nProtocolos;i++)
                copyFromCombo.Items.Add("Protocolo " + (i+1));
            copyFromCombo.SelectedIndex = 0;
}

        private void CopyfromButtonClick(object sender, RoutedEventArgs e)
        {
            int protIndex = copyFromCombo.SelectedIndex;

            int indiceProtocolo = 0;
            if (_tvProtocolos == null)
                return;

            var g = _tvProtocolos.SelectedItem as Composite;

            _listaData = GetData();
            _tvProtocolos.ItemsSource = _listaData;
            TreeViewItem tvi;
            if (g != null)
            {
                tvi = _tvProtocolos.ItemContainerGenerator.ContainerFromIndex(g.Indice) as TreeViewItem;

                if (tvi != null)
                {
                    tvi.IsSelected = true;
                }
                indiceProtocolo = g.Indice;
            }

            _exp2Class.SetProtocolo(indiceProtocolo, _exp2Class.Protocolos[protIndex]);

        } 
```

这是绑定到面板的类（带有文本框）

```
public class ProtocoloExp2: ISerializable, IDataErrorInfo
    {
 public ProtocoloExp2(int idx)
        {
            IndiceProtocolo = idx;
            IndiceVisual = idx + 1;
        }
        public float TimeToShowTarget { get; set; }

        (...)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:52:38.387

检查[“如何：实现 INotifyPropertyChanged 接口”](http://msdn.microsoft.com/en-us/library/ms229614.aspx)。并考虑将[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)用于您的列表。INotifyPropertyChanged 接口的实现是 wpf 控件视图模型的要求，它基本上允许视图在数据更改时刷新自己。

# android - Android JellyBean 无法识别 AttriubteSet 的 getTextSize

> ID：11522676
> 
> 赞同：8
> 
> 时间：2012-07-17T12:42:48.983
> 
> 标签：android, attributes, android-4.2-jelly-bean

我正在使用我在这里找到的 AutoResizeTextView 类： [https ://stackoverflow.com/a/5535672/371778](https://stackoverflow.com/a/5535672/371778)

这在 JellyBean 之前一直很有效。JellyBean 似乎无法从 textView AttributeSet 中识别 getTextSize()，因为它返回 0.0。

我尝试制作自定义 xml 属性，但我利用样式来使用 AutoResizeTextView 类，并且无法在 styles.xml 中包含自定义命名空间。

有什么想法可以让 JellyBean 识别这种方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-19T09:33:05.680

我遇到了同样的问题，我刚刚通过 AutoResizeTextView 类中的修复解决了它

```
 /**
 * When text changes, set the force resize flag to true and reset the text size.
 */
@Override
protected void onTextChanged(final CharSequence text, final int start, final int before, final int after)
{
    mNeedsResize = true;
    mTextSize = getTextSize(); // I ADDED THIS
    // Since this view may be reused, it is good to reset the text size
    resetTextSize();
} 
```

现在它同样适用于 2.3、4.0 和 4.1。pf

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-24T10:26:07.873

上面的代码有效，但是当 AutoResizeTextView 将被重用时会出现问题。例如在 ListView 中。缩放列表中的一个条目后，下面的一些条目也可能不必要地变小。在这种情况下，onTextChanged 方法应如下所示：

```
@Override
protected void onTextChanged(final CharSequence text, final int start, final int before, final int after)
{
    needsResize = true;
    if (before == after)
        textSize = getTextSize();
    else
        resetTextSize(); // Since this view may be reused, it is good to reset the text size    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T08:49:48.617

我看到了一个关于流媒体的问题。在我尝试使用 fwd 和 bwd 的流媒体视频中，我看到了重新启动。

# bash - 如何让脚本从属性文件中读取值并将其传递给同一个脚本？

> ID：11522677
> 
> 赞同：-2
> 
> 时间：2012-07-17T12:42:50.160
> 
> 标签：bash

我是 linux shell 脚本的新手。我希望我的脚本读取一个属性文件并将值保存在任何变量中，我可以在同一个脚本中传递相同的值.. 因为我写的脚本不符合我的要求：

```
!/bin/bash

. test1

flat

if [ "$1" == test1 ]; then
    flat=$1;  /assign value to var flat
    echo "flat"        
fi 
```

test1 是属性文件，其中包括：

```
la=12

tu=15 
```

现在我想在跑步时：

```
./myscript la 
```

它从属性文件中读取它并将值存储在平面变量中。请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T13:25:40.370

您只需要使用间接引用，但要这样做，您需要先将特殊参数的值存储`$1`在常规参数中。

```
!/bin/bash

. test1

var="$1"

# Only assign to flat if the variable specified in var is defined
if [ -n "${!var:-}" ]; then
    flat="${!var}";  # assign value to var flat
    echo "flat"        
fi 
```

* * *

首先，`${!var}`展开到名称为 in 的变量的值`var`。如果`var`是“foo”，则与`$foo`. 如果`var`是“baz”，则与`$baz`.

`${var:-default}``var`如果它被设置并且具有非空值，则扩展为的值。否则，它会扩展为您在 ':-' 之后的任何内容，在这种情况下为字符串默认值。如果没有字符串，则使用空值。`${var:-}`如果`var`未设置（或已经是空字符串），则将扩展为空字符串。

将两者结合起来，`${!var:-}`获取变量 var，并将其值用作变量名。然后它尝试扩展该变量，如果未设置或为空，则扩展为空字符串。所以如果`var`是`la`，它会扩展为 的值`la`。如果`var`是`re`，并且没有`re`设置变量，则扩展为空字符串。

最后，`-n`运算符测试其参数是否为非零长度。换句话说，它检查尝试扩展名称所在的变量的结果`var`是否不是空字符串。如果这是真的，那么再次展开它（是的，它有点多余）并将其值分配给`flat`.

正如上面写的答案，`flat`如果脚本的参数不是设置在`test1`. 如果您不介意`flat`被设置（例如，`flat=""`），则不需要该`if`语句。您可以只使用一行来设置的值`flat`：

```
#!/bin/bash
. test1
var="$1"
flat="${!var:-}" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T13:07:17.523

如果我理解正确，您希望实现间接变量取消引用（例如，参见[此示例](http://tldp.org/LDP/abs/html/ivr.html)）。

解决方案是使用`eval`：

```
eval flat=\$$1 
```

# javascript - jquery.post 的 Firefox 问题

> ID：11522688
> 
> 赞同：1
> 
> 时间：2012-07-17T12:43:24.473
> 
> 标签：javascript, jquery, post

我有一个从控制器检索 base64 编码图像并在新窗口中显示图像的函数。它在 Chrome 中运行良好，但在 Firefox 中失败，出现错误“格式不正确”和“不支持请求方法 'GET'”。我不明白为什么会出现这种情况，因为我使用的是 post，而不是 get...

相关的代码部分是：

```
function showPicture(label) {
$.post( 'picture-view', { labelname: label }, function(ImageSrc) {
   var img = new Image;
       img.src = "data:image/png;base64," + ImageSrc;
       img.style.position = 'fixed';
       img.style.left = '0';
       img.style.top = '0';
       img.onload = function() {        
       var newWindow = window.open("", label,"scrollbars=0, toolbar=0, width="+myImage.width+", height="+myImage.height);
                            creativeWindow.document.documentElement.innerHTML='';
                            creativeWindow.document.documentElement.appendChild(img);
      }​
});} 
```

*编辑*此外，我们将不胜感激地收到任何有关可访问书籍或网站的建议，以了解有关此材料的更多信息。

*编辑#2*我还应该补充一点，当我尝试将 img.src 写入控制台时，它会以 [objectXMLDocument] 的形式出现。

*编辑#3*我已经将错误跟踪到返回的 ImageSrc 应该是一个字符串但被解释为一个 XML 对象的事实。它包含反斜杠的事实导致了“格式不正确”的错误。我现在的问题是：如何让 $.post 或 $.ajax 在 Firefox 中返回一个字符串（他们已经在 Chrome 中这样做了）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:51:34.507

我可能会尝试`.ajax`改用。它还允许您提供后备内容。

与其使用 post 发送图像，不如将图像托管在您的服务器上并通过 src 加载图像。这将是一种更清洁的方法。

例如

```
$.ajax({

    type: "POST",
    data: "",
    url: yourURL,
    error: function() {
      //The call was unsuccessful
      //Place fallback content/message here
    },
    success: function(data) {
      //The call was successful

      //Open new window
      var newWindow = window.open("", label,"scrollbars=0, toolbar=0, width="+myImage.width+", height="+myImage.height);
      creativeWindow.document.documentElement.innerHTML='';

      //Create the image 
      var image = document.createElement("img");
      image.src = data;

      //Attach image to new window
      creativeWindow.document.documentElement.appendChild(image);

    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:02:25.893

为了不留下未回答的问题...

我最终使用灯箱来显示图像，而不是生成新窗口。

# java - 为每个地图任务生成一个输入文件

> ID：11522689
> 
> 赞同：0
> 
> 时间：2012-07-17T12:43:23.520
> 
> 标签：java, eclipse, hadoop, mapreduce

我是hadoop的新手，我有以下问题。我想控制映射器的数量，我发现最简单的方法是欺骗 hadoop 为每个映射任务生成一个输入文件，就像在 pi estimator 示例中一样。所以我使用了以下代码：

```
 for(int i=0; i < nMaps; ++i) {
    final Path file = new Path(inDir, "part"+i);
    fs.create(file);
    fs.close();
    } 
```

并且在编译时 fs.create 行中有一个错误。有谁知道出了什么问题以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:47:57.123

您应该捕获（或重新抛出）`IOException`可能从[`create`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/fs/FileSystem.html#create%28org.apache.hadoop.fs.Path%29)and抛出的[`close`](http://hadoop.apache.org/common/docs/current/api/org/apache/hadoop/fs/FileSystem.html#close%28%29)。

# javascript - Javascript在变量上返回未定义

> ID：11522696
> 
> 赞同：0
> 
> 时间：2012-07-17T12:43:39.777
> 
> 标签：javascript, variables, undefined

我有这部分代码：

```
for (i = 0; i <= texte.split(';')[1].split(',').length - 1; i++) {
        cell = document.createElement("td");
        cell.setAttribute("width", "10%");
        cell.setAttribute("align", "center");
        if (texte.split(';')[1].split(",")[i] != "")
            cell.onclick = function () { chgnom('1',"'" + texte.split(';')[1].split(",")[i] + "'",''); };
        textnode = document.createElement("span");
        textnode.innerHTML = texte.split(';')[1].split(",")[i];
        cell.appendChild(textnode);
        row.appendChild(cell);
    } 
```

对innerHTML的调用`texte.split(';')[1].split(",")[i]`返回“HELLO”，但函数中的调用返回“未定义”。有人可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:48:32.287

让我们假设`arr=texte.split(';')[1].split(',')`。当您的点击将被执行时，`i`将已经等于`arr.length`。`arr[arr.length]`是`undefined`，这就是你得到的。解决方法可能类似于：

```
if (texte.split(';')[1].split(",")[i] != ""){
    cell.onclick = (function(inner_i){
        return function () { 
            chgnom('1',"'" + texte.split(';')[1].split(",")[inner_i] + "'",''); 
        };
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:49:27.440

你有没有`texte.split(';')[1].split(",")[i]`为每个循环测试你的？试着把它放在变量之前。

# c# - IIS - 在不停机的情况下将绑定从一个站点更改为另一个站点

> ID：11522712
> 
> 赞同：6
> 
> 时间：2012-07-17T12:44:11.743
> 
> 标签：c#, iis, deployment, iis-7

我正在尝试使用 C# 控制台应用程序中的 ServerManager 对 IIS 元数据库进行一些站点更改。

我有一个想要在没有任何停机时间的情况下部署的站点，为此我是：

1.  使用新的 DLL 创建具有自己的应用程序池的新的第二个站点

2.  添加一个可以在本地访问的绑定，这样我就可以将第一个请求发送到第二个站点并且它已经“预热”

3.  我正在从原始站点中删除 www.domain.com 的绑定，然后将其添加到第二个站点，然后调用 CommitChanges()

这就是问题开始的地方，绑定信息已正确更新，但 IIS 已停止第二个站点。有什么方法可以删除原始绑定并将其放置在新站点上而无需两次调用提交更改？

我真的想避免在这种情况下产生 ARR 开销或任何其他负载平衡等，有没有办法在不停机的情况下将绑定从一个站点交换到另一个站点？真的感觉应该有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T13:12:07.200

如果微软不支持 IIS，你会很高兴知道你可以用 nginx 做到这一点：http: [//developer.7digital.com/blog/atomic-mono-deployment-capistrano-and-nginx-under -debian](http://developer.7digital.com/blog/atomic-mono-deployment-capistrano-and-nginx-under-debian)

# java - Java ActionListener 没有响应

> ID：11522717
> 
> 赞同：-4
> 
> 时间：2012-07-17T12:44:33.030
> 
> 标签：java, swing, actionlistener, inner-classes

大家好，多年来一直在使用这个网站作为一个潜伏者，但遇到这个问题并且无法在任何地方找到解决方案......

我在一个内部课程中有一个动作监听器，它只是不会响应......你们有没有机会查看我的初学者编码并看看你的想法？

抱歉，这里有这么多代码，我唯一遇到的问题是“AddPet”类及其内部类“AddEle”和 System.exit 方法。当窗口“选择宠物类型对话框”打开时，这些按钮都不起作用......希望我掌握所有术语，因为我完全自学并且刚刚开始。

谢谢你的时间

涡流

```
package petshopwk1;

import java.awt.Container;
import java.awt.FlowLayout;
import java.awt.event.* ;
import javax.swing.*;
import java.util.Scanner;
import javax.swing.JOptionPane ;
import java.util.ArrayList;
import java.util.Date;
import javax.swing.JList;
import java.awt.event.*;

public class CurrentPet2 extends JFrame {
private JButton setName, setDOB, setSold, getName, getDOB, getSold, addPet, changePre,           changeNext, exit, setCurrentPet, getFeel;
private JLabel cPetLabel ;

private Shop theShop = new Shop("Brighton");

private JButton exitButton, Ele, MF, Pet;
String temp = "temp" ;

Date dob = new Date();
public Pet CurrentPetObj = new Pet("", "", true, dob) ;

int cPetIndex ;

DefaultListModel model = new DefaultListModel();
public JList list = new JList(model);

public CurrentPet2 (String cTitle)
            {
super(cTitle) ; 

Pet Alburt = new Pet("Alburt", " 09 APRIL 2009", true) ;
Pet Eddy = new Pet("Eddy", " 13 JANUARY 1982", false) ;
Pet Paul = new Pet("Paul", " 21 DECEMBER 1956", true) ;
Pet Sian = new Pet("Sian", " 11 SEPTEMBER 1988", true) ;
Pet Morrise = new Pet("Morrise", " 26 MARCH 1996", false) ;
Pet Betty = new Pet("Betty", " 31 JANUARY 1962", false) ;
Elephant Ele = new Elephant ("Ele", "13 JANUARY 1982", true, 12) ;
MF NOW = new MF ("NOW", "8 JULY 2012", false, 11, "Rocking") ;

theShop.addPet(0, Alburt);
theShop.addPet(1, Eddy);
theShop.addPet(2, Paul);
theShop.addPet(3, Sian);
theShop.addPet(4, Morrise);
theShop.addPet(5, Betty); 
theShop.addPet(6, Ele);
theShop.addPet(7, NOW);

Container contentPane ;
contentPane = getContentPane();
contentPane.setLayout(new FlowLayout());

cPetLabel = new JLabel("Current Pet Mode");

setCurrentPet = new JButton("Choose current Pet");
setName = new JButton("Set Name") ;
setDOB = new JButton("Set DOB") ;
setSold = new JButton("Set Sold");
getName = new JButton("Get Name") ;
getDOB = new JButton("Get DOB") ;
getSold = new JButton("Get Sold") ;
addPet = new JButton("Add Pet");
changePre = new JButton("Change to Previous") ;
changeNext = new JButton("Change to Next");
getFeel = new JButton("FEEL?");
exit = new JButton("EXIT");

exit.addActionListener(new ActionListener()
{public void actionPerformed(ActionEvent e )
{System.exit(0); }}
);

setCurrentPet.addActionListener(new ChoosePetName());
setName.addActionListener(new       setPetName()) ;
setDOB.addActionListener(new        setPetDOB());
setSold.addActionListener(new       setIsSold());
getName.addActionListener(new       getPetName()) ;
getDOB.addActionListener(new        getPetDOB());
getSold.addActionListener(new       getIsSold());
addPet.addActionListener(new        addPet());
getFeel.addActionListener(new       printFeel());

list.setListData(Shop.thePets.toArray());

list.validate();

changePre.addActionListener(new     changePetPre());
changeNext.addActionListener(new    changePetNext());

contentPane.add(setCurrentPet);
contentPane.add(addPet);
contentPane.add(setName);
contentPane.add(setDOB);
contentPane.add(setSold);
contentPane.add(getName);
contentPane.add(getDOB);
contentPane.add(getSold);
contentPane.add(getFeel) ;

contentPane.add(changePre);

contentPane.add(changeNext);
contentPane.add(exit);
contentPane.add(new JScrollPane(list));

list.addMouseListener(new MouseAdapter()
{
public void mouseClicked(MouseEvent evt)
{
JList list = (JList) evt.getSource();
if (evt.getClickCount() ==2 )
{
int cPetIndex = list.locationToIndex (evt.getPoint());
CurrentPetObj = Shop.thePets.get(cPetIndex) ;
JOptionPane.showMessageDialog(CurrentPet2.this,               CurrentPetObj + "@ Index " + cPetIndex);
}
}
} 
                                                         );

setLayout(new FlowLayout());
add(exit);

this.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
this.setSize(550, 400);
this.setVisible(true);

}

class ChoosePetName implements ActionListener
{
public void actionPerformed(ActionEvent e)
{

String cPetSearch  = JOptionPane.showInputDialog(null, "Please Eneter Pet to work on...") ;

 CurrentPetObj = Shop.findPet(cPetSearch) ;

 int cPetIndex = Shop.thePets.indexOf(CurrentPetObj);
 list.setSelectedIndex(cPetIndex);

 JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj + "@ Index " + cPetIndex); 

 }
 }

class setPetName implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
String nName = JOptionPane.showInputDialog(null, "Please input new Pet name...");

CurrentPetObj.setName(nName);
JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj) ;

}
}

class setPetDOB implements ActionListener
{
public void actionPerformed(ActionEvent e)
{
String nDOB = JOptionPane.showInputDialog(null, "Please input new Pet DOB... (in format 26 MARCH 1996");
CurrentPetObj.setDOB(nDOB) ;
JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj);
}
}

class setIsSold implements ActionListener
{
public void actionPerformed(ActionEvent e)
{
boolean s = Boolean.parseBoolean(JOptionPane.showInputDialog(null, "Please input if new Pet is sold..."));
CurrentPetObj.setIsSold(s);
JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj.toString());
}
}

class getPetName implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj.getName());

}
}

class getPetDOB implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj.getDOB()) ;
}
}

class getIsSold implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj.getIsSold());
}
}

    -----------------------------------------------------------------------
    its just between this and the following line i have the problem. the actionListener responds fine in the earlier class but just cant get it working with the AddPet class and therefore wont call the system.exit or AddEle... 
```

任何帮助都会很棒:)

```
***class AddPet implements ActionListener
{
public void actionPerformed(ActionEvent e)
{
Container contentPane ;
contentPane = getContentPane();
contentPane.setLayout(new FlowLayout());

JFrame f = new JFrame("Choose pet type dialog");
f.setSize(300, 100);
Container content = f.getContentPane();

Ele = new JButton("Add Elephant");
exitButton = new JButton("EXIT");

exitButton.addActionListener(new ActionListener()
{public void actionPerformed(ActionEvent L )
{System.exit(0); }}
                             );

Ele.addActionListener(new        AddEle());

content.setLayout(new FlowLayout()); 
content.add(new JButton("Add Elephant"));
content.add(new JButton("Add Pet"));
content.add(new JButton("EXIT"));

contentPane.add(Ele);
contentPane.add(exit);

f.setVisible(true);

contentPane.add(MF);
contentPane.add(Pet);
}
}

class AddEle implements ActionListener
{
public void actionPerformed(ActionEvent L )
{

String nName  = JOptionPane.showInputDialog(null, "Please Enter new Pet name...") ;
String nDate  = JOptionPane.showInputDialog(null, "Please input new pet DOB (in format 20 MARCH 2001");

boolean s     = Boolean.parseBoolean(JOptionPane.showInputDialog(null, "Please input if     sold or not? ( true / false"));

int nSize = Integer.parseInt(JOptionPane.showInputDialog(null, "Please input Elephant SIZE..."));

cPetIndex = Integer.parseInt(JOptionPane.showInputDialog(null, "Please input INDEX to place new Pet..."));

Pet CurrentPetObj = new Elephant(nName, nDate, s, nSize) ;
theShop.addPet(cPetIndex, CurrentPetObj) ;
list.setListData(Shop.thePets.toArray());
model.setElementAt(CurrentPetObj, cPetIndex);

JOptionPane.showMessageDialog(CurrentPet2.this, CurrentPetObj + " @ Index " + cPetIndex); 

}

}

}*** 
```

* * *

```
class changePetPre implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
int cPetIndex = Shop.thePets.indexOf(CurrentPetObj);

--cPetIndex;
CurrentPetObj = Shop.thePets.get(cPetIndex);
list.setSelectedIndex(cPetIndex);
JOptionPane.showMessageDialog(CurrentPet2.this, "Current Pet is now == " + CurrentPetObj + "@ Index " + cPetIndex); 

}
}

class changePetNext implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
int cPetIndex = Shop.thePets.indexOf(CurrentPetObj);
++cPetIndex;
CurrentPetObj = Shop.thePets.get(cPetIndex);
list.setSelectedIndex(cPetIndex);

JOptionPane.showMessageDialog(CurrentPet2.this, "Current Pet is now == " + CurrentPetObj   + "@ Index " + cPetIndex); 

}
}

class printFeel implements ActionListener
{
public void actionPerformed(ActionEvent e )
{
JOptionPane.showMessageDialog(CurrentPet2.this, "Current feel is now == " + MF.getFeel()); 
}
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:58:04.977

您正在将动作侦听器添加到未添加到框架中的按钮（您添加的是新实例，并且没有动作侦听器*）*

尝试：

```
content.add(Ele); 
content.add(exitButton); 
```

在`AddPet`

# android - 无法从菜单启动preferenceActivity

> ID：11522720
> 
> 赞同：1
> 
> 时间：2012-07-17T12:44:38.937
> 
> 标签：android, android-intent, android-manifest, android-preferences

我创建了一个名为 Menu 的类。当用户按下菜单按钮时，他们会看到 3 个选项，即。关于，偏好和退出。当他们单击首选项时，应该会打开首选项活动。但是，该应用程序崩溃并且无法打开首选项活动。我已经发布了 ListActivity，我试图在清单和日志文件中打开的活动的活动标签。请帮忙。

```
public class Menu extends ListActivity {
    String[] list = { "StartView", "FunWithText", "Email", "Camera",
            "ActivityStarter" };

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        try {
            Class myClass = Class.forName("com.thenewboston.terry."
                    + list[position]);
            Intent myIntent = new Intent(Menu.this, myClass);
            startActivity(myIntent);

        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }

    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Menu.this,
                android.R.layout.simple_list_item_1, list));

    }

    @Override
    public boolean onCreateOptionsMenu(android.view.Menu menu) {

        super.onCreateOptionsMenu(menu);
        MenuInflater balloon = getMenuInflater();
        balloon.inflate(R.menu.menu, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case (R.id.about):
            Intent myIntent = new Intent(Menu.this, Dialogue.class);
            startActivity(myIntent);
            break;
        case (R.id.preferences):
            Intent prefs = new Intent(Menu.this, Preferences.class);
            startActivity(prefs);
            break;
        case (R.id.exit):
            finish();
            break;

        }
        return false;
    }

} 
```

* * *

**清单.xml：**

```
 <activity
        android:name=".Preferences"
        android:label="Start Activity"
        android:theme="@android:style/Theme.Dialog" >

        <intent-filter>
            <action android:name="com.thenewboston.terry.PREFS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

* * *

**错误日志：**

```
07-18 00:39:07.133: E/AndroidRuntime(738): FATAL EXCEPTION: main
07-18 00:39:07.133: E/AndroidRuntime(738): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.thenewboston.terry/com.thenewboston.terry.Preferences}: android.view.InflateException: Binary XML file line #14: Error inflating class listPreference
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.os.Looper.loop(Looper.java:123)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-18 00:39:07.133: E/AndroidRuntime(738):  at java.lang.reflect.Method.invokeNative(Native Method)
07-18 00:39:07.133: E/AndroidRuntime(738):  at java.lang.reflect.Method.invoke(Method.java:521)
07-18 00:39:07.133: E/AndroidRuntime(738):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-18 00:39:07.133: E/AndroidRuntime(738):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-18 00:39:07.133: E/AndroidRuntime(738):  at dalvik.system.NativeStart.main(Native Method)
07-18 00:39:07.133: E/AndroidRuntime(738): Caused by: android.view.InflateException: Binary XML file line #14: Error inflating class listPreference
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.createItemFromTag(GenericInflater.java:441)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.rInflate(GenericInflater.java:481)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.inflate(GenericInflater.java:326)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.inflate(GenericInflater.java:263)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.PreferenceManager.inflateFromResource(PreferenceManager.java:251)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.PreferenceActivity.addPreferencesFromResource(PreferenceActivity.java:262)
07-18 00:39:07.133: E/AndroidRuntime(738):  at com.thenewboston.terry.Preferences.onCreate(Preferences.java:12)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
07-18 00:39:07.133: E/AndroidRuntime(738):  ... 11 more
07-18 00:39:07.133: E/AndroidRuntime(738): Caused by: java.lang.ClassNotFoundException: android.preference.listPreference in loader dalvik.system.PathClassLoader[/data/app/com.thenewboston.terry-1.apk]
07-18 00:39:07.133: E/AndroidRuntime(738):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
07-18 00:39:07.133: E/AndroidRuntime(738):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
07-18 00:39:07.133: E/AndroidRuntime(738):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.createItem(GenericInflater.java:375)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.onCreateItem(GenericInflater.java:417)
07-18 00:39:07.133: E/AndroidRuntime(738):  at android.preference.GenericInflater.createItemFromTag(GenericInflater.java:428)
07-18 00:39:07.133: E/AndroidRuntime(738):  ... 19 more 
```

> ```
> **Preferences xml:**
> 
> <?xml version="1.0" encoding="utf-8"?>
> <PreferenceScreen
>   xmlns:android="http://schemas.android.com/apk/res/android">
>   <PreferenceCategory android:title="Label">    
>     <EditTextPreference 
>     android:title="EditText"
>     android:key="name"
>     android:summary="Enter your name"/>
> 
>     <CheckBoxPreference
>     android:title="checkBox"
>     android:key="music"
>     android:defaultValue="true"
>     android:summary="music on?"
>     />
>     <listPreference
>     android:title="list"
>     android:key="list"
>     android:summary="Choose somethign"
>     android:entries="@array/list"
>     android:entryValues="@array/values"
>    />
>   </PreferenceCategory>
>  </PreferenceScreen> 
> ```

```
public class Preferences extends PreferenceActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:32:59.557

我认为您的 Preferences.xml 需要如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
  xmlns:android="http://schemas.android.com/apk/res/android">
  <PreferenceCategory android:title="Label">    
    <EditTextPreference 
    android:title="EditText"
    android:key="name"
    android:summary="Enter your name"/>

    <CheckBoxPreference
    android:title="checkBox"
    android:key="music"
    android:defaultValue="true"
    android:summary="music on?"
    />
    <ListPreference
    android:title="list"
    android:key="list"
    android:summary="Choose somethign"
    android:entries="@array/list"
    android:entryValues="@array/values"
   />
  </PreferenceCategory>
 </PreferenceScreen> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:23:51.033

事实证明，应用于 PreferenceActivity 的主题与 PreferenceActivity 对象不兼容。感谢所有试图提供帮助的人。

# icons - 修改 KML 文件中弹出的图标

> ID：11522723
> 
> 赞同：0
> 
> 时间：2012-07-17T12:44:50.813
> 
> 标签：icons, kml, google-earth

我有一个 KML 文件，该文件已导入 Google 地球以供查看。我将图标指定为某种图标和颜色，但是当我将鼠标移到一组图标上时，展开的图标是默认的黄色图钉。有没有办法设置这些扩展图标的颜色和样式？

当前的 KML 图标部分：

```
<IconStyle>
     <color>FF808080</color>
     <Icon>
        <href>http://maps.google.com/mapfiles/kml/shapes/track.png</href>
     </Icon>
</IconStyle> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:49:13.037

尝试使用[StyleMap](https://developers.google.com/kml/documentation/kmlreference#stylemap)并定义高亮图标。

# c - 如何使用共享内存实现命名管道？

> ID：11522725
> 
> 赞同：1
> 
> 时间：2012-07-17T12:44:53.903
> 
> 标签：c, pipe, shared-memory, named-pipes

这是我得到的最艰巨的任务之一：我想（需要）使用共享内存实现命名管道（例如 mkfifo 功能）。

我花了一些时间，但最后我成功实现了`un-named pipe`，现在我需要完成 Named ，如上所述。

根据我的理解，`Named pipe`用途`mkfifo`，意思是在磁盘上创建一个文件，然后进程`A`可以从命名管道读取，并且在读取时，他阻止所有其他进程写入该文件（又名命名管道）....请更正我如果我错了！？

现在，我的问题是如何使用共享内存实现命名管道？

随着`un-named pipe`我打开一个共享内存段，如下所示：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>

#define SHM_SIZE 1024  /* make it a 1K shared memory segment */

int main(int argc, char *argv[])
{
    key_t key;
    int shmid;
    char *data;
    int mode;

    if (argc > 2) {
        fprintf(stderr, "usage: shmdemo [data_to_write]\n");
        exit(1);
    }

    /* make the key: */
    if ((key = ftok("shmdemo.c", 'R')) == -1) {
        perror("ftok");
        exit(1);
    }

    /* connect to (and possibly create) the segment: */
    if ((shmid = shmget(key, SHM_SIZE, 0644 | IPC_CREAT)) == -1) {
        perror("shmget");
        exit(1);
    }

    /* attach to the segment to get a pointer to it: */
    data = shmat(shmid, (void *)0, 0);
    if (data == (char *)(-1)) {
        perror("shmat");
        exit(1);
    }

    /* read or modify the segment, based on the command line: */
    if (argc == 2) {
        printf("writing to segment: \"%s\"\n", argv[1]);
        strncpy(data, argv[1], SHM_SIZE);
    } else
        printf("segment contains: \"%s\"\n", data);

    /* detach from the segment: */
    if (shmdt(data) == -1) {
        perror("shmdt");
        exit(1);
    }

    return 0;
} 
```

并且每次一个进程写入它而另一个进程读取它（反之亦然）。

您能解释一下我要使用的更改和/或功能吗？

请注意，我不允许使用`open/close/read/write`系统调用...

非常感激

# c++ - 删除编译器定义

> ID：11522732
> 
> 赞同：1
> 
> 时间：2012-07-17T12:45:08.967
> 
> 标签：c++, cmake, shared-libraries

在编译链接 boost 和 python 库的共享库时，我收到错误：

> /usr/bin/ld: libboost_python.a(from_python.o): 重定位 R_X86_64_32 对 `.rodata.str1.8' 不能在制作共享对象时使用；使用 -fPIC libboost_python.a 重新编译：无法读取符号：值错误

我使用详细模式来查看编译器定义：

> /usr/bin/c++ -fPIC -g -shared -Wl,-soname,libCore.so -o .../libCore.so Core.cpp.o -lpython2.7 -Wl,-Bstatic -lboost_python -Wl,-动态

就是这样！我必须`-Wl, -Bstatic`从定义中删除，但如何做到这一点？我正在使用 cmake 构建系统，这是生成该共享库的代码的一部分：

```
set(Core_SRC
    Core.cpp
)
add_definitions(-g -fPIC)
add_library(Core SHARED ${Core_SRC})

target_link_libraries(Core
    ${PYTHON_LIBRARIES}
    ${Boost_LIBRARIES}
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:14:01.150

问题是您正在尝试使用 libboost_python 构建一个共享库，该库似乎是以无法链接到共享库的方式构建的。

有3种方法可以解决这个问题。

1.  不要让你的图书馆共享
2.  构建 boost_python 库的共享版本
3.  取消对 boost_python 的引用未解决

# wcf - 如何在 IIS 环境中以编程方式注册 WCF 服务

> ID：11522733
> 
> 赞同：0
> 
> 时间：2012-07-17T12:45:08.217
> 
> 标签：wcf, c#-3.0, iis-7.5

假设我们有 2 个具有以下布局的项目

*   “网络”项目
    *   global.asax （我想到了这个在 eg 内注册的目的地`void Application_Start(System.Object sender, System.EventArgs e`）
    *   网络配置
*   项目“wcf”
    *   演示服务.cs
    *   IDemoService.cs

`web.config`看起来像这样

```
<configuration>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="fooBehavior">
                    <serviceMetadata httpGetEnabled="true" />
                </behavior>
            </serviceBehaviors>
        </behaviors>
        <services>
            <service name="wcf.DemoService"
                     behaviorConfiguration="fooBehavior">
                <endpoint address="mex"
                          binding="mexHttpBinding"
                          contract="IMetadataExchange" />
                <endpoint address=""
                          binding="wsHttpBinding"
                          contract="wcf.IDemoService" />
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

所以......现在......某个地方（如上所述，我想到了`global.asax`）我需要注册，当浏览到*URI* `wcf.DemoService`时得到解决，对于 mex 请求，`wcf.IDemoService`得到解决以读取属性以获取 WSDL。

这通常可以通过创建一个`.svc`文件并将标题放在第一行来完成，例如：

```
<%@ ServiceHost Language="C#" Debug="true" Service="wcf.DemoService" %> 
```

在例如控制台应用程序中

```
var serviceHost = new ServiceHost(typeof (wcf.DemoService));
serviceHost.Open(); 
```

并将其与`host`元素内的`service`元素结合以指定*URI* - 或使用另一个 ctor-overload`ServiceHost`

但我宁愿进行静态注册（或任何`web.config`适用于 IIS 7.5 的注册）——这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T17:50:18.970

WCF 4 (.NET 4.0) 提供基于代码的服务注册和基于配置的服务注册。

基于代码的配置是通过 ASP.NET Routing by new 实现的[`ServiceRoute`](http://msdn.microsoft.com/en-us/library/system.servicemodel.activation.serviceroute.aspx)：

```
RouteTable.Routes.Add(new ServiceRoute("DemoService", 
                          new ServiceHostFactory(), typeof(wcf.DemoService)); 
```

路由通常与 REST 服务一起使用，但它也适用于 SOAP 服务。

在配置中注册服务称为[基于配置的激活](http://msdn.microsoft.com/en-us/library/dd807499.aspx)。您将在 web.config 中定义虚拟 .svc 文件：

```
<serviceHostingEnvironment>
   <serviceActivation>
      <add relativeAddress="DemoService.svc" service="wcf.DemoService" />
   </serviceActivation>
</serviceHostingEnvironment> 
```

In both cases you are defining only relative path to your service because base address is always specified by your web site hosted in IIS.

# javascript - 格式化 WSH 中的日期类型（以及与日期对象的区别）

> ID：11522734
> 
> 赞同：0
> 
> 时间：2012-07-17T12:45:11.673
> 
> 标签：javascript, date, wsh

我正在尝试使用 Javascript 语法在 WSH 中进行一些简单的文件比较。我使用的是 windows XP SP3，脚本是通过 Cscript.exe 运行的

我的问题来自 File 对象的 dateLastModified 属性，它不处理通常的日期操作函数——比如 getDay() 或 getFullYear()

似乎 Microsoft Javascript 有两种类型的日期这是代码示例：

```
var fso = WSH.CreateObject("Scripting.FileSystemObject")
f = fso.getFile('C:\\WINDOWS\\notepad.exe')
WSH.echo(f.Name)
WSH.echo(f.dateLastModified +" |type = "+ typeof(f.dateLastModified))

var d = new Date()
WSH.echo(d +" |type = "+ typeof(d)) 
```

这是我得到的输出

```
Microsoft (R) Windows Script Host Version 5.7
Copyright (C) Microsoft Corporation 1996-2001\. Tous droits réservés.

notepad.exe
Sun Apr 13 19:34:16 UTC+0200 2008 |type = date
Tue Jul 17 14:28:08 UTC+0200 2012 |type = object 
```

当然，如果我尝试：

```
WSH.echo( f.dateLastModified.getFullYear() ) 
```

我收到一个错误，告诉 f.dateLastModified 不是对象

所以，我知道如何操作经典的 Date 对象，但是我如何对 fileSystemObject 给我的这个日期类型做同样的事情呢？

是否可以将一种类型转换为另一种类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T15:19:10.020

您可以通过使用该值作为对象构造函数的参数创建一个新对象来将一个`date`值转换为一个对象。像下面的例子：`Date``Date`

```
var fileDate = new Date( f.dateLastModified );
WSH.echo( fileDate + ' |type = ' + typeof(fileDate) );
WSH.echo( fileDate.getFullYear()); 
```

要将`Date`对象转换为`date`值，请使用以下命令：

```
var dateVal = fileDate.getVarDate();
WSH.echo( dateVal + ' |type = ' + typeof(dateVal) ); 
```

# extjs - Sencha Touch：快速点击按钮将推送两次视图

> ID：11522736
> 
> 赞同：3
> 
> 时间：2012-07-17T12:45:13.960
> 
> 标签：extjs, sencha-touch, sencha-touch-2

假设我有一个按钮可以触发新视图的推送。我注意到，如果我不止一次地点击它，足够快，它会推动同一个视图两次。

您可以使用他们在此页面上的官方文档来模仿这种行为，他们有一个实时示例： [http ://docs.sencha.com/touch/2-0/#!/guide/navigation_view](http://docs.sencha.com/touch/2-0/#!/guide/navigation_view)

明确的问题是，如何预防呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T07:07:26.393

另一种方法是检查活动视图是什么，只有在它与您要推送的视图不同时才推送。我已经对此进行了测试，并且可以正常工作。

例如

```
if (this.getNavigationView().getActiveItem().xtype != "someView") {
    this.getNavigationView().push({ xtype: "someView" });
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-15T13:01:41.933

扩展 jayteejee 的答案，我在自定义导航视图中覆盖了 push 方法，如下所示：

```
Ext.define('BT.navigation.View', {
   extend: 'Ext.navigation.View',
   xtype: 'btnavigationview',

   push: function (view) {
      if(this.getActiveItem().xtype != view.xtype)
         this.callParent(arguments);
      else
         console.warn("Prevented pushing a potentially duplicate view of xtype: " + view.xtype);
   }
}); 
```

我不完全确定`xtype`假设是否足够安全，但我想不出在我当前的应用程序中需要一个视图将另一个相同类型的视图推送到导航堆栈的情况。因此，该解决方案对我有用，而且非常简洁。警告是为了让我以后头疼，可能会拉我的头发试图找出为什么`push`不起作用！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T22:30:42.450

掩蔽成功地防止了双击问题。

在我的代码中，我使用两个函数来屏蔽/取消屏蔽导航容器：

```
/**
 * Mask container with rolling wheel. Usually need if Ajax-request is sent to the server and app waiting for response
 * Best practice is masking the current navigator container, to prevent blocking whole app. Method warns if no container
     * is defined. In some cases warning could be suppress with parameter
     *
     * @param container
     * @param {boolean} [suppressWarning]
     */
    startLoading: function(container, suppressWarning) {
        var loadingComponent = container;

        if (!loadingComponent) {
            // <debug>
            if (!suppressWarning) {
                console.warn('Please define navigator container for non-blocking operation, or define suppressWarning parameter');
            }
            // </debug>
            loadingComponent = Ext.Viewport;
        }

//      var lastMaskedContainer = container;
        this.lastMaskedContainer = container;

        loadingComponent.setMasked({
            xtype: 'loadmask',
            message: 'Loading...'
        });

/*
        Ext.defer(function() {
            lastMaskedContainer.setMasked(false);
        }, Pipedrive.app.maskingTimeout * 1000)
*/
    },

    /**
     *
     * @param {Ext.Container} container
     * @param {boolean} [suppressWarning]
     */
    stopLoading: function(container, suppressWarning) {
        var loadingComponent = container;

        if (!loadingComponent) {
            // <debug>
            if (!suppressWarning) {
                console.warn('Please define either navigator container for non-blocking operation, or define suppressWarning parameter');
            }
            // </debug>
            loadingComponent = Ext.Viewport;
        }

        var alreadyMasked = loadingComponent.getMasked();

        var lastMaskedContainer = this.lastMaskedContainer;
        if (!alreadyMasked && !suppressWarning) {
            // <debug>
            if (lastMaskedContainer != container) {
                console.warn('Found Start/Stop Loading inconsistency. Please revise code'
                    + (container ? '. Container: ' + container.getId() : 'Ext.Viewport')
                    + (lastMaskedContainer ? ', last masked container: ' + lastMaskedContainer.getId() : '')
                );
            }
            // </debug>
            loadingComponent = Ext.Viewport;
        }
        loadingComponent.setMasked(false);
    } 
```

比在水龙头处理程序中：

```
onDealDetailsTap: function(ct) {
    console.log('onDealDetailsTap', ct);
    var form = ct.getReferenceForm(),
        navigatorContainer = this.getNavigatorContainer(form),
        model = form.getRecord();

    UiHelper.startLoading(navigatorContainer);
    Ext.Viewport.fireEvent('detailfields', {
        title: model.get('title'),
        id: model.get('id'),
        store: 'DealFields',
        navigatorContainer: navigatorContainer
    })
}, 
```

清理加载掩码：

```
control : {
    activitiesContainer: {
        push: 'onPushActivitiesContainer'
    },

onPushActivitiesContainer: function(ct) {
    //console.log('onPushActivitiesContainer', ct);
    UiHelper.stopLoading(ct);
}, 
```

特别是等待长时间的ajax请求很酷......

干杯，奥列格

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T22:26:32.207

只需在点击按钮时暂停按钮上的事件，并在按下视图时恢复它们

```
button.suspendEvents();
...
button.resumeEvents(); 
```

我不认为有其他方法。作为开发人员或用户，当您点击一个按钮两次时，您希望事件处理程序被调用两次。

希望这可以帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T12:46:19.183

只需遮盖整个容器，然后将其取消遮盖；为控制器中存在按钮的容器或面板创建一个引用，并在点击集上：

```
ref.setMasked(true) 
```

推送新视图后，只需取消屏蔽

```
ref.setMasked(false) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-06-29T21:18:50.060

另一种方法是在列表项被点击一次后翻转参数，如下所示：

```
{
   onListItemTap: function () {
      if (!this.tapped) {
         this.tapped = true;
         ...
      }
   }
} 
```

当然，这只有在用户一进入另一个屏幕就破坏列表视图时才有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-01T18:38:41.343

我创建了一种检查方法：

```
 ENSURE_NO_DOUBLE_TAP : function(classNameToPush) {
        if (Ext.getClassName(Ext.getCmp('MyViewport').getActiveItem()) == classNameToPush) {
            return false;
        }

        return true;
    } 
```

然后从您的应用程序中处理任何可能被双击的内容：

```
 if (!ENSURE_NO_DOUBLE_TAP('MyApp.view.View')) {
            return;
        } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-26T09:08:53.327

如果您正在使用侦听器收听按钮的点击事件，那么这是我的解决方案：

```
listeners : {   
     release : function(){                                  
          if(this.getDisabled())return false;
          this.setDisabled(true);
          this.fireEvent('tap');
     },
     tap : function() {
         //do what you want
     }
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-03-29T19:15:16.017

扩展 jayteejee 和 Merott 的答案，我添加了一些代码来拦截多个快速推送，不仅可以防止重复，还可以防止在页面转换完成之前推送不同的视图。想象一个用户点击不同的列表项。

还要注意`view.destroy();`else 块中的方法，以防止视图实例在内存中堆积。

```
Ext.define('Overrides.navigation.View', {
    extend: 'Ext.navigation.View',
    xtype: 'ovrnavigationview',

    interceptPush: false,

    push: function (view) {
        var activeItem = this.getActiveItem();

        // Prevent multiple pushes & duplicates
        if (!this.interceptPush && activeItem.xtype !== view.xtype) {

            // Set interceptPush
            this.interceptPush = true;

            // Reset interceptPush after 500 ms
            Ext.defer(function() {
                this.interceptPush = false;
            }, 500, this);

            // Handle push
            this.callParent(arguments);

        } else {

            // Warn developer
            console.warn("Prevented pushing view of xtype: " + view.xtype);

            // Destroy view
            view.destroy();

            return false;
        }
    }
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-01-07T10:28:03.023

您可以只使用“itemsingletap”事件。

如果您也想支持双击，请为“itemdoubletap”创建第二个侦听器并调用相同的函数，两个侦听器一起工作得很好。

# java - 优化我的 Eclipse ini 文件的方法？

> ID：11522738
> 
> 赞同：3
> 
> 时间：2012-07-17T12:45:15.600
> 
> 标签：java, eclipse

这就是我的 Eclipse.ini 目前的样子

```
-startup
plugins\org.eclipse.equinox.launcher_1.0.101.R34x_v20081125.jar
-install
D:\IBM\WID7
--launcher.library
plugins\org.eclipse.equinox.launcher.win32.win32.x86_1.0.101.R34x_v20080731
--launcher.XXMaxPermSize
256m
-vm
jdk\jre\bin\javaw.exe
-vmargs
-Xquickstart
-Xms512m
-Xss2048k
-Xmaxf0.1
-Xminf0.05
-Xmx1800m
-Xmnx64m
-Xgcpolicy:gencon
-Xscmx96m
-Xshareclasses:name=IBMSDP_%u
-XX:MaxPermSize=512M
-Dorg.eclipse.jdt.core.javamodelcache.ratio=0.0625
-Dosgi.requiredJavaVersion=1.5
-Dosgi.bundlefile.limit=100
-Xincgc 
```

我可以进行哪些更改以进一步加速 Eclipse？我仍然看到一些性能问题，尤其是在大型构建上 - 需要很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:43:35.600

至少对于将 osgi 所需的 java 版本更改为 1.6 的 mac 对我有帮助：

```
-Dosgi.requiredJavaVersion=1.6 
```

这个[SO 答案](https://stackoverflow.com/questions/316265/tricks-to-speed-up-eclipse)包含很多提示，请阅读所有评论。

# java - Java（Android）重新排序对象列表

> ID：11522739
> 
> 赞同：3
> 
> 时间：2012-07-17T12:45:16.703
> 
> 标签：java, android, list

我阅读了有关此的文档，但我并不完全清楚。我已经将注意力集中在 set 方法上，我想我会像这样重新排序：

```
list.set(0,myObj);//Move first
list.set(list.indexOf(myObj) - 1, myObj);//Move up
list.set(list.indexOf(myObj) + 1, myObj);//Move down
list.set(list.size() - 1, myObj);//Move last 
```

[http://developer.android.com/reference/java/util/List.html](http://developer.android.com/reference/java/util/List.html)上的文档指出 set 返回被置换的对象。所以这让我认为我必须重新放置那个对象。我对么？因此，在我描述的设置操作之后，我将有两个对列表中对象的引用。这意味着我必须循环列表以适当地放置所有其他对象？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:54:19.450

使用[Collection](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)类的`swap()`它

```
swap(List list, int i, int j) 
```

交换指定列表中指定位置的元素。

**例子：**

```
Collections.swap(arrayList,0,4); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:53:52.813

查看[Collections](http://developer.android.com/reference/java/util/Collections.html)类以进行反向、重新排序、排序等操作。
您可能正在寻找[rotate](http://developer.android.com/reference/java/util/Collections.html#rotate%28java.util.List%3C?%3E,%20int%29)或[swap](http://developer.android.com/reference/java/util/Collections.html#swap%28java.util.List%3C?%3E,%20int,%20int%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T12:49:43.613

听起来您想在列表顶部插入一个对象。不要使用集合。

使用[List.add(0, myObj)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add%28int,%20E%29)

它会将其余部分撞倒。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T12:52:01.123

是的，元素被替换了。它很容易修复：

```
int index = list.indexOf(myObj);
list.set(index, list.set(index - 1, myObj)); //Move up 
```

这将`list(index - 1)`与`list(index)`. 其他操作可以用同样的方式实现。

# android - 关于 Fragments 和 PreferenceFragment 的材料

> ID：11522748
> 
> 赞同：1
> 
> 时间：2012-07-17T12:45:56.267
> 
> 标签：android, android-fragments

我正在开发一个需要大量使用片段和偏好片段的应用程序。但由于这些东西对 Android 来说是新的，除了 developer.android.com 之外，我找不到任何好的资源来研究这些东西。

developer.android.com 提供了很好的见解，但在从那里阅读了preferenceactivity 和preferencefragment 之后，我还是有点迷失了。

所以请分享一些关于这些主题的好参考。（任何好的视频都会非常有帮助）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T13:10:06.297

观看此 YouTube 视频以了解 Fragments：

[Fragments for All：Android Open 2011](http://www.youtube.com/watch?v=sCQ8EcM0HM0)

我希望它能让你理解片段。您还可以查看此视频教程：

[Android 3.0 Activity Fragments 演示](http://www.youtube.com/watch?v=-K7NQiIPVgE)

# java - JSF 2 表单操作导航不起作用

> ID：11522751
> 
> 赞同：2
> 
> 时间：2012-07-17T12:45:59.730
> 
> 标签：java, jsf-2, primefaces

我只是用 Primefaces 测试 JSF 2 并正在设置一个基本的测试表单。目标是提交表单，然后将用户发送到列出所有条目的页面。

但是，如果我单击“添加”按钮，会发生的一切是我的 web 应用程序尝试导航到页面：“//pages/index.xhtml”，但没有找到任何东西......

有任何想法吗？？我已经按照教程进行了很多操作，但是看不到我哪里弄错了。我已将命令按钮映射到 ManagedBean 方法“addUser”。addUser 方法返回“成功”，我已经设置“成功”去success.xhtml ..

我现在已经花了 3 个小时进行调试，我快要发疯了，所以任何帮助都会非常感激......

索引.xhtml：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui">
    <h:head><title>Welcome to OTV_JSF_Spring_Hibernate_Project</title></h:head>
    <h:body>
        <h:form>
          <table>
              <tr>...</tr>
              <tr>
                 <td><p:commandButton id="addUser" value="Add" action="#{userMB.addUser}" ajax="false"/></td>
                 <td><p:commandButton id="reset" value="Reset" action="#{userMB.reset}" ajax="false"/></td>
              </tr>
          </table>
      </h:form>
    </h:body>
</html> 
```

用户MB：

```
@ManagedBean(name = "userMB")
@RequestScoped
public class UserManagedBean implements Serializable {
    private static final String SUCCESS = "success";
    private static final String ERROR = "error";
    /* .... */

    public String addUser() {
        return SUCCESS;
    } 
```

面孔-config.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

<!-- JSF and Spring are integrated -->
<application>
    <el-resolver>
        org.springframework.web.jsf.el.SpringBeanFacesELResolver
    </el-resolver>
</application>

<!-- configuration of navigation rules -->
<navigation-rule>
    <from-view-id>/pages/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>success</from-outcome>
        <to-view-id>/pages/success.xhtml</to-view-id>
    </navigation-case>
    <navigation-case>
        <from-outcome>error</from-outcome>
        <to-view-id>/pages/error.xhtml</to-view-id>
    </navigation-case>
</navigation-rule>

</faces-config> 
```

Web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xmlns="http://java.sun.com/xml/ns/javaee"
     xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     id="WebApp_ID"
     version="2.5">

<display-name>OTV_JSF_PrimeFaces_Spring_Hibernate</display-name>

<!-- Spring Context Configuration' s Path definition -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        /WEB-INF/applicationContext.xml
    </param-value>
</context-param>

<!-- The Bootstrap listener to start up and shut down Spring's root WebApplicationContext. It is registered to Servlet Container -->
<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>
<listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
</listener>

<!-- Project Stage Level -->
<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

<!-- Welcome Page -->
<welcome-file-list>
    <welcome-file>/pages/index.xhtml</welcome-file>
</welcome-file-list>

<!-- JSF Servlet is defined to container -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- Mapping with servlet and url for the http requests. -->
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>
</web-app> 
```

[![生成的 HTML](../Images/78821c760749cfa8a1d31ed4475c9d7a.png)](https://i.stack.imgur.com/6WC2L.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:56:14.967

我认为你必须这样写：

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
        xmlns="http://java.sun.com/xml/ns/javaee"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
            http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
        version="2.0">

    <!-- JSF and Spring are integrated -->
    <application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>

    <!-- configuration of navigation rules -->
    <navigation-rule>
        <from-view-id>pages/index.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>pages/success.xhtml</to-view-id>
        </navigation-case>
        <navigation-case>
            <from-outcome>error</from-outcome>
            <to-view-id>pages/error.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>

</faces-config> 
```

# symfony1 - Symfony 中未显示 403 错误页面

> ID：11522753
> 
> 赞同：1
> 
> 时间：2012-07-17T12:46:08.857
> 
> 标签：symfony1, symfony-1.4

我正在为我的项目使用 Symfony 1.4，并且需要显示自定义 403 错误页面。我在 settings.yml 中给出了以下内容

```
 .actions:
    error_404_module: errors
    error_404_action: error404
    error_500_module: errors
    error_500_action: error500
    error_403_module: errors
    error_403_action: error403 
```

我也有错误模块和相应的错误成功页面。但它没有显示自定义错误页面。在某些情况下，例如： 404 它正在显示调试页面。返回 403 页面，并带有默认的禁止错误消息。我的操作文件如下所示：

```
class errorsActions extends sfActions
{
 /**
  * Executes index action
  *
  * @param sfRequest $request A request object
  */
  public function executeIndex(sfWebRequest $request)
  {
    //$this->forward('default', 'module');
  }

  public function executeError404(sfWebRequest $request)
  {
  }

  public function executeError500(sfWebRequest $request)
  {
  }
  public function executeError403(sfWebRequest $request)
  {
  }
} 
```

编辑：添加 settings.yml 修改

```
 .actions:
    error_404_module: errors
    error_404_action: error404
    error_500_module: errors
    error_500_action: error500
    secure_module: errors
    secure_action: error403 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:07:17.003

在您的情况下， settings.yml 应该是：

```
all:
  .actions:
    # page not found
    error_404_module:       errors     # module "errors"
    error_404_action:       error404   # action "executeError404"

    # 403 credential required
    secure_module:          errors     # module "errors"
    secure_action:          error403   # action "executeError403" 
```

对于 500 错误页面，`error`在你的目录中创建一个目录，`app/appname/config`并在其中放入一个`error.html.php`文件（一个完整的 html 页面）。

关于 404 错误页面，这个页面（和 500 错误页面一样）在`dev`环境中被调试页面覆盖，但在环境中会正确显示`prod`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:56:52.843

这不是覆盖 403 错误页面的正确方法。使用`secure_module`和`secure_action`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T18:02:16.927

您可能需要取消 404 操作的安全性：
请参见此处：[http ://symfony-check.org/permalink/customize-the-oops-page-not-found-page](http://symfony-check.org/permalink/customize-the-oops-page-not-found-page)

# python - Linux 上的 OpenCV（通过 python）：设置帧宽度/高度？

> ID：11522755
> 
> 赞同：13
> 
> 时间：2012-07-17T12:46:14.897
> 
> 标签：python, linux, opencv, webcam, v4l2

我在linux（ubuntu 12.04）上通过python使用openCV，我有一个罗技c920，我想从中获取图像。Cheese 能够抓取非常高分辨率的帧，但每当我尝试使用 openCV 时，我只能得到 640x480 的图像。我努力了：

```
import cv
cam = cv.CaptureFromCAM(-1)
cv.SetCaptureProperty(cam,cv.CV_CAP_PROP_FRAME_WIDTH,1920)
cv.SetCaptureProperty(cam,cv.CV_CAP_PROP_FRAME_WIDTH,1080) 
```

但这会在最后两行中的每一行之后产生“0”的输出，并且当我随后通过以下方式抓取一帧时：

```
image = cv.QueryFrame(cam) 
```

生成的图像仍然是 640x480。

我尝试通过（在python之外）安装似乎相关的工具：

```
sudo apt-get install libv4l-dev v4l-utils qv4l2 v4l2ucp 
```

我确实可以通过以下方式显然操纵相机的设置（同样，在 python 之外）：

```
v4l2-ctl --set-fmt-video=width=1920,height=1080,pixelformat=1
v4l2-ctl --set-parm=30 
```

并观察到：

```
v4l2-ctl -V 
```

确实表明某些事情已经改变：

```
Format Video Capture:
    Width/Height   : 1920/1080
    Pixel Format   : 'H264'
    Field          : None
    Bytes per Line : 3840
    Size Image     : 4147200
    Colorspace     : sRGB 
```

但是当我进入 python shell 时，上面的代码的行为与以前完全相同（在尝试设置属性并获取 640x480 的图像时打印零）。

能够提高捕获的分辨率对我来说是非常关键的任务，所以我非常感谢任何人可以提供的任何指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T08:25:32.847

从[文档](http://opencv.willowgarage.com/documentation/python/reading_and_writing_images_and_video.html#setcaptureproperty)中，

> 函数 cvSetCaptureProperty 设置视频捕获的指定属性。目前该功能仅支持视频文件：CV_CAP_PROP_POS_MSEC、CV_CAP_PROP_POS_FRAMES、CV_CAP_PROP_POS_AVI_RATIO。
> 
> NB 使用 FFMPEG 在 linux 上下载最新的 CVS 时，该函数目前没有任何作用（如果使用并返回 0，则隐藏函数内容）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-10T16:04:27.887

我和你有同样的问题。最终进入 OpenCV 源代码并更改第`modules/highgui/src/cap_v4l.cpp`245-246 行中的默认参数并重建项目。

```
#define DEFAULT_V4L_WIDTH  1920
#define DEFAULT_V4L_HEIGHT 1080 
```

这是针对 OpenCV 2.4.8

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-24T02:19:14.753

它似乎是可变的相机。

AFIK，Logitech 相机对 linux 的支持特别差（尽管它变得更好）他们的大多数问题都与焦点控制等高级功能有关。为了安全起见，我建议坚持使用基本相机（即手动对焦罗技相机）。

我的内置笔记本电脑摄像头没有问题，并以正常分辨率显示。
我的外部罗技专业人士在初始化时遇到问题。

但是，我可以用这两行来克服分辨率问题。

是的，它们与您使用的相同。

```
cv.SetCaptureProperty(self.capture,cv.CV_CAP_PROP_FRAME_WIDTH, 1280)
cv.SetCaptureProperty(self.capture,cv.CV_CAP_PROP_FRAME_HEIGHT, 720) 
```

我的罗技仍然抛出错误，但分辨率很好。

请确保您设置的分辨率是您的相机支持的，否则 v4l 会对您大喊大叫。如果我设置了不受支持的本机分辨率，我的成功率为零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-19T13:32:48.363

```
## Sets up the camera to capture video
cap = cv2.VideoCapture(device)

width = 1280
height = 720

#set the width and height
cap.set(3,width)
cap.set(4,height) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T12:51:41.753

不确定它是否有效，但您可以在实例化相机对象后尝试将参数强制为您的值：

```
import cv
cam = cv.CaptureFromCAM(-1)

os.system("v4l2-ctl --set-fmt-video=width=1920,height=1080,pixelformat=1") 
os.system("v4l2-ctl --set-parm=30")

image = cv.QueryFrame(cam) 
```

这有点hacky，所以期待崩溃。

# solr - Solr、聚类（胡萝卜）和 NoClassDefFoundError

> ID：11522756
> 
> 赞同：0
> 
> 时间：2012-07-17T12:46:31.103
> 
> 标签：solr, cluster-analysis, noclassdeffounderror

我正在运行 Solr 3.4 并想使用 clusteringComponent。按照本教程：[http](http://wiki.apache.org/solr/ClusteringComponent) : //wiki.apache.org/solr/ClusteringComponent 结合 solrconfig.xml 中的默认条目，我有以下配置 @solrconfig.xml

```
 <searchComponent name="clustering" 
                   enable="${solr.clustering.enabled:true}"
                   class="org.apache.solr.handler.clustering.ClusteringComponent" >

    <!-- Declare an engine -->
    <lst name="engine">
      <str name="name">default</str>
      <str name="carrot.algorithm">org.carrot2.clustering.lingo.LingoClusteringAlgorithm</str>
      <str name="LingoClusteringAlgorithm.desiredClusterCountBase">20</str>
    </lst>

    <lst name="engine">
      <str name="name">stc</str>
      <str name="carrot.algorithm">org.carrot2.clustering.stc.STCClusteringAlgorithm</str>
    </lst>
  </searchComponent>

<requestHandler name="/cl" class="solr.SearchHandler" >
  <lst name="defaults">
    <str name="echoParams">explicit</str>

    <bool name="clustering">true</bool>
    <str name="clustering.engine">default</str>
    <bool name="clustering.results">true</bool>

    <!-- Fields to cluster on -->
    <str name="carrot.title">UEBSCHRIFT</str>
    <str name="carrot.snippet">TEXT</str>
  </lst> 
```

因此，如果我尝试使用 requestHandler，`http://server:8080/solr/mycore/cl?q=*:*`我会得到以下 Java 异常：

```
java.lang.NoClassDefFoundError: com.carrotsearch.hppc.ObjectContainer
    at java.lang.J9VMInternals.verifyImpl(Native Method)
    at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
    at org.carrot2.text.preprocessing.pipeline.BasicPreprocessingPipeline.&lt;init&gt;(BasicPreprocessingPipeline.java:106)
    at org.carrot2.text.preprocessing.pipeline.CompletePreprocessingPipeline.&lt;init&gt;(CompletePreprocessingPipeline.java:32)
    at org.carrot2.clustering.lingo.LingoClusteringAlgorithm.&lt;init&gt;(LingoClusteringAlgorithm.java:129)
    at java.lang.J9VMInternals.newInstanceImpl(Native Method)
    at java.lang.Class.newInstance(Class.java:1325)
    at org.carrot2.util.pool.SoftUnboundedPool.borrowObject(SoftUnboundedPool.java:80)
    at org.carrot2.core.PoolingProcessingComponentManager.prepare(PoolingProcessingComponentManager.java:128)
    at org.carrot2.core.Controller.process(Controller.java:333)
    at org.carrot2.core.Controller.process(Controller.java:240)
    at org.apache.solr.handler.clustering.carrot2.CarrotClusteringEngine.cluster(CarrotClusteringEngine.java:136)
    at org.apache.solr.handler.clustering.ClusteringComponent.process(ClusteringComponent.java:91)
    at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:194)
    at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129)
    at org.apache.solr.core.SolrCore.execute(SolrCore.java:1368)
    at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356)
    at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:735)
Caused by: java.lang.ClassNotFoundException: com.carrotsearch.hppc.ObjectContainer
    at java.lang.Throwable.&lt;init&gt;(Throwable.java:80)
    at java.lang.ClassNotFoundException.&lt;init&gt;(ClassNotFoundException.java:76)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:419)
    at java.lang.ClassLoader.loadClass(ClassLoader.java)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:923)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:609)
    ... 31 more 
```

关键是，我不知道这意味着什么。我正在寻找几个小时而没有找到解决方案。

顺便说一句：我正在使用以下选项在tomcat上运行：

```
export CATALINA_OPTS="-Dsolr.clustering.enabled=true" 
```

（这在 Solr 3.4 中仍然需要吗？）

catalina 选项是 java 命令的一部分，如您所见`ps -efa`

> /usr/lib64/jvm/java-1_6_0-ibm-1.6.0/jre//bin/java -Djava.util.logging.config.file=/opt/tomcat6/conf/logging.properties -Xms2048m -Xmx2048m -Djava .util.logging.manager=org.apache.juli.ClassLoaderLogManager -Dsolr.clustering.enabled=true -Djava.endorsed.dirs=/opt/tomcat6/endorsed -classpath /opt/tomcat6/bin/bootstrap.jar -Dcatalina。 base=/opt/tomcat6 -Dcatalina.home=/opt/tomcat6 -Djava.io.tmpdir=/opt/tomcat6/temp org.apache.catalina.startup.Bootstrap start

有谁知道我可以做些什么来解决这个问题？

//更新：如果我添加 hppc-0.3.4-jdk15.jar，我得到以下错误：

```
java.lang.NoClassDefFoundError: org.apache.mahout.math.matrix.DoubleMatrix2D
    at java.lang.J9VMInternals.verifyImpl(Native Method)
    at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
    at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
    at org.carrot2.clustering.lingo.LingoClusteringAlgorithm.&lt;init&gt;(LingoClusteringAlgorithm.java:134)
[...]
Caused by: java.lang.ClassNotFoundException: org.apache.mahout.math.matrix.DoubleMatrix2D
    at java.lang.Throwable.&lt;init&gt;(Throwable.java:80)
    at java.lang.ClassNotFoundException.&lt;init&gt;(ClassNotFoundException.java:76)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:419)
    at java.lang.ClassLoader.loadClass(ClassLoader.java)
    at java.net.FactoryURLClassLoader.loadClass(URLClassLoader.java:923)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:609)
    ... 29 more 
```

看起来，我必须安装一个 mahout 存档，但我认为，所有集群包都包含在 Solr 3.4 中？！看来，我走错路了？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:08:41.423

如果您将 Solr 与 tomcat 作为单独的实例一起使用，则需要复制 jar 以便它们可用于 Solr。

引自[README.txt](http://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_4/solr/example/README.txt)

> 注意：此 Solr 示例服务器在 solrconfig.xml 中为非核心模块引用了此服务器目录之外的某些 Solr jars。如果您复制此示例服务器并希望使用 ExtractingRequestHandler (SolrCell)、DataImportHandler (DIH)、UIMA、集群组件或“contrib”中的其他模块，则需要将所需的 jar 复制到 solr/lib或更新 solrconfig.xml 中 jar 的路径。

检查 solrconfig.xml 中的集群和胡萝卜罐。
可能你不见了`hppc-0.3.4-jdk15.jar`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:33:23.543

您是否添加了 Mahout Math 软件包？

它似乎是一个单独的包。

```
NoClassDefFoundError: org.apache.mahout.math.matrix.DoubleMatrix2D
                      ^^^^^^^^^^^^^^^^^^^^^^ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-19T11:30:49.410

为什么不使用 Solr 的默认包装（这是官方支持的）？它与 Jetty 一起提供，并且会为您省去与类路径相关的麻烦，因为已经配置好了。

回答您的问题，您将需要 Solr 的默认集群扩展文件夹中的所有 JAR；对于 4.0 alpha，这将是：contrib/clustering/lib/*.jar

carrot2-core-3.5.0.jar hppc-0.3.3.jar jackson-core-asl-1.7.4.jar jackson-mapper-asl-1.7.4.jar mahout-collections-0.3.jar mahout-math-0.3 .jar simple-xml-2.4.1.jar

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-21T08:32:01.160

使用 solR 4 将此文件复制到文件夹 conf

[http://svn.apache.org/repos/asf/labs/alike/trunk/demo/solrhome/collection1/conf/solrconfig.xml](http://svn.apache.org/repos/asf/labs/alike/trunk/demo/solrhome/collection1/conf/solrconfig.xml)

# python - 在 Python 中合并不同的字典

> ID：11522758
> 
> 赞同：1
> 
> 时间：2012-07-17T12:46:36.237
> 
> 标签：python, dictionary

这是一个很长的问题，所以请多多包涵。我从 3 个 API 获得的 3 个字典开始。dicts 的结构如下：

```
API1 = {'results':[{'url':'www.site.com','title':'A great site','snippet':'This is a great site'},
{'url':'www.othersite.com','title':'Another site','snippet':'This is another site'},
{'url':'www.wiki.com','title':'A wiki site','snippet':'This is a wiki site'}]}

API2 = {'hits':[{'url':'www.dol.com','title':'The DOL site','snippet':'This is the dol site'},
{'url':'www.othersite.com','title':'Another site','snippet':'This is another site'},
{'url':'www.whatever.com','title':'Whatever site','snippet':'This is a site about whatever'}]}

API3 = {'output':[{'url':'www.dol.com','title':'The DOL site','snippet':'This is the dol site'},
{'url':'www.whatever.com','title':'Whatever site','snippet':'This is a site about whatever'},
{'url':'www.wiki.com','title':'A wiki site','snippet':'This is a wiki site'}]} 
```

我从 API1、API2 和 API3 中提取 URL 密钥以进行一些处理。我这样做是因为有相当多的处理要做，而且只需要 URL。完成后，我有一个删除重复项的 URL 列表和另一个与每个 URL 在列表中的位置相关的分数列表：

```
URLlist = ['www.site.com','www.wiki.com','www.othersite.com','www.dol.com','www.whatever.com']

Results = [1.2, 6.5, 3.5, 2.1, 4.0] 
```

我所做的是使用该`zip()`函数从这两个列表中创建一个新字典。

`ScoredResults = dict(zip(URLlist,Results))`

```
{'www.site.com':1.2,'www.wiki.com':6.5, 'www.othersite.com':3.5, 'www.dol.com':2.1, 'www.whatever.com':4.0} 
```

现在我需要做的是将 URL 与 链接`ScoredResults`起来`API1`，`API2`或者`API3`这样我就有一个像这样的新字典：

```
Full Results = 
{'www.site.com':{'title':'A great site','snippet':'This is a great site','score':1.2},
 'www.othersite.com':{'title':'Another site','snippet':'This is another site','score':3.5},
...} 
```

这对我来说太难了。如果你回顾我的问题历史，我一直在问很多字典问题，但到目前为止还没有实施。如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T13:28:05.937

这样的东西对你有用吗？这是相当基本的，通过循环构建你的最终字典`URLlist`。

```
API1r = API1['results']
API2r = API2['hits']
API3r = API3['output']

FullResults = {}
for (U, R) in zip(URLlist, Results):
    FullResults[U] = {}
    for api in (API1r, API2r, API3r):
        for v in api:
            k = dict()
            k.update(v)
            if (k.pop('url') == U):
                FullResults[U].update((k.items()+[('score', R)])) 
```

请注意，由于`url`您的不同s中可能存在相同`API`但具有不同信息的信息，因此我们需要`FullResults`预先创建相应的条目，因此简化循环可能会有些棘手。LMKHIW。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:00:27.923

快速尝试：

```
from itertools import chain

full_result = {}

for blah in chain.from_iterable(d.itervalues() for d in (API1, API2, API3)):
    for d in blah:
        full_result[d['url']] = {
            'title': d['title'],
            'snippet': d['snippet'],
            'score': ScoredResults[d['url']]
        }

print full_result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:11:49.527

我会将 API 转换为对您更有意义的东西。url 的字典可能更合适：

```
def transform_API(API):
    list_of_dict=API.get('results',API.get('hits',API.get('output')))
    if(list_of_dict is None):
       raise KeyError("results, hits or output not in API")
    d={}
    for dct in list_of_dict:
        d[dct['url']]=dct
        dct.pop('url')
    return d

API1=transform_API(API1)
API2=transform_API(API2)
API3=transform_API(API3)

master={}
for d in (API1,API2,API3):
    master.update(d)

urls=list(master.keys())
scores=get_scores_from_urls(urls)

for k,score in zip(urls,scores):
    master[k]['score']=score 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T12:54:34.930

有了给定的数据……</p>

```
Full_Results = {d['url']: {'title': d['title'], 'snippet': d['snippet'], 'score': ScoredResults[d['url']]} for d in API1['results']+API2['hits']+API3['output']} 
```

导致：

```
{'www.dol.com': {'score': 2.1,
  'snippet': 'This is the dol site',
  'title': 'The DOL site'},
 'www.othersite.com': {'score': 3.5,
  'snippet': 'This is another site',
  'title': 'Another site'},
 'www.site.com': {'score': 1.2,
  'snippet': 'This is a great site',
  'title': 'A great site'},
 'www.whatever.com': {'score': 4.0,
  'snippet': 'This is a site about whatever',
  'title': 'Whatever site'},
 'www.wiki.com': {'score': 6.5,
  'snippet': 'This is a wiki site',
  'title': 'A wiki site'}} 
```

# javascript - 通过淡入 HTML 来浏览图片

> ID：11522762
> 
> 赞同：1
> 
> 时间：2012-07-17T12:46:47.440
> 
> 标签：javascript, html, css, image, fade

我有一些图片，我想通过单击 HTML 中的按钮来浏览它们。我需要在用户点击时产生效果 - 我不想重新加载我的页面。是否有任何 Javascript 或 CSS 可以提供帮助？我的意思是按下“下一个”按钮，下一个图像可以柔和地淡入屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:49:14.867

如果你有`div`这样的：

```
<div id="yourDivId" >
    <img id="image_1_Id" class="" src="image_1.png" />
    <img id="image_2_Id" class="transparent" src="image_2.png" />
</div> 
```

将此代码插入到您的 css 文件中：

```
#yourDivId img.transparent 
{
    opacity:0;
}
#yourDivId img
{
    -webkit-transition: opacity 1s ease-in-out;
    -moz-transition: opacity 1s ease-in-out;
    -o-transition: opacity 1s ease-in-out;
    transition: opacity 1s ease-in-out;
} 
```

并将此脚本添加到您的 javascript 文件或 html 头脚本中：

```
function btnClicked(){
    document.getElementById("image_1_Id").className += "transparent";
    document.getElementById("image_2_Id").className = "";
} 
```

查看此站点[http://css3.bradshawenterprises.com/cfimg/](http://css3.bradshawenterprises.com/cfimg/)以获取更多示例！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:51:24.663

试试 jQuery 循环。它有一堆可用的过渡，您可以使用外部上一个/下一个控件进行设置。

主插件页面：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

使用上一个/下一个链接的演示：http: [//jquery.malsup.com/cycle/int2.html](http://jquery.malsup.com/cycle/int2.html)

# c# - Dns.GetHostEntry(ip).HostName 适用于 Windows 7 而不是 XP

> ID：11522764
> 
> 赞同：1
> 
> 时间：2012-07-17T12:46:51.853
> 
> 标签：c#, networking, windows-7, windows-xp

我正在开发一个在 c# 中扫描本地网络的工具，发现它`Dns.GetHostEntry(ip).HostName`可以完成这项工作：当 IP 未使用时，它会触发异常。它在 Windows 7 上运行良好，但在 Windows XP 上有效 ip 也会触发异常。

你明白我为什么会遇到这种行为吗？

谢谢你的帮助，

# javascript - 使用 javascript 克隆时更改文件集元素的名称

> ID：11522769
> 
> 赞同：0
> 
> 时间：2012-07-17T12:47:05.237
> 
> 标签：javascript, fieldset

我有一个要求，我必须在表单中添加现有字段集的副本。我能够成功地实现克隆过程。但我无法更改文件集元素的名称和 ID。它与第一个字段集相同，但我希望它具有不同的名称和 id 以区分它（即使在末尾添加一个数字也可以）。下面是我的js和fieldset。

```
<div id="placeholder">
<div id="template">
<fieldset id="fieldset">
<legend id="legend">Professional development</legend>
<p>Item                     <input type ="text" size="25"   name="prof_itemDYNID" id ="prof_item_id"/><br /></p>
<p>Duration                 <input type ="text" size="25"   name="prof_durationDYNID"  id="prof_duration_id" /><br /></p>
<p>Enlargement              <label for="enlargement"></label><p></p>
                            <textarea name="textareaDYNID" cols="71" rows="5" id="prof_enlargement">
</textarea></p>
<p><input type="button" value="Add new item" id="add_prof"  onclick="Add();" /></p>
</fieldset>
</div>
</div>

function Add() {

    var oClone = document.getElementById("template").cloneNode(true);
    document.getElementById("placeholder").appendChild(oClone);
} 
```

此外，这只是一个示例字段集，它也会有所不同。我听说这可以使用正则表达式来完成，但不知道该怎么做。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:56:01.200

不确定这可以使用正则表达式来实现，但是下面的代码应该可以工作......

```
var copyNode = original.cloneNode(true);
copyNode.setAttribute("id", modify(original.getAttribute("id")));
document.body.appendChild(el); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T10:51:24.043

这是对上述问题的最佳（根据我的假设）答案。

```
function addMe(a){

    var original = a.parentNode;

        while (original.nodeName.toLowerCase() != 'fieldset')
    {
        original = original.parentNode;
    }
    var duplicate = original.cloneNode(true);

   var changeID= duplicate.id;

   var counter = parseInt(changeID.charAt(changeID.length-1));
     ++counter;
   var afterchangeID = changeID.substring(0,changeID.length-1);
    var newID=afterchangeID + counter;
    duplicate.id = newID;
    var tagNames = ['label', 'input', 'select', 'textarea'];
        for (var i in tagNames)
        {

    var nameChange = duplicate.getElementsByTagName(tagNames[i]);

        for (var j = 0; j < nameChange.length; j++)
    {if (nameChange[j].type != 'hidden'){
        var elementName = nameChange[j].name;

                var afterSplitName = elementName.substring(0,elementName.length-1);

             nameChange[j].name = afterSplitName + counter;

        var elementId = nameChange[j].id;

                var afterSplitId = elementId.substring(0,elementId.length-1);

                    nameChange[j].id = afterSplitId + counter;

    }
        }
}

    insertAfter(duplicate, original);
}

function insertAfter(newElement, targetElement)
{
    var parent = targetElement.parentNode;
    if (parent.lastChild == targetElement)
    {
        parent.appendChild(newElement);
    }
    else
    {
        parent.insertBefore(newElement, targetElement.nextSibling);
    }
} 
```

# svn - 如何使用 TortoiseSVN 获得最后 10 次修改？

> ID：11522770
> 
> 赞同：1
> 
> 时间：2012-07-17T12:47:08.250
> 
> 标签：svn, tortoisesvn

我开始使用 TortoiseSVN，我需要进行最后 10 次修改。我尝试阅读有关如何过滤的手册，但没有运气。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T16:00:54.910

在 TortoiseSVN 中你可以使用*Show log*菜单，它会打开一个新窗口。

在该窗口的底部，单击*Show All*按钮并选择*Show range...*，然后您可以选择要查看其日志的修订范围。

您还可以`svn`像这样使用命令行客户端：

```
svn log https://path/to/your/repo -rHEAD:0 -l 10 
```

在哪里`-l`代表`--limit`

# java - 在文本组件上绘制轮廓边框

> ID：11522774
> 
> 赞同：3
> 
> 时间：2012-07-17T12:47:22.770
> 
> 标签：java, swt

我正在尝试`Text`在 SWT 中绘制边框...
这就是我现在得到的：

公共类 BorderedText 扩展文本 {

```
public BorderedText(Composite parent, int style) {
    super(parent, style);
    addPaintListener(new PaintListener() {

        @Override
        public void paintControl(PaintEvent e) {
            e.gc.setAntialias(SWT.ON);
            if (isFocusControl()) {
                Color color = new Color(getDisplay(), new RGB(82, 168, 236));
                e.gc.setAlpha(200);
                e.gc.setForeground(color);
                Rectangle rect = new Rectangle(0,0, getClientArea().width-1, getClientArea().height-1);

                Transform t = new Transform(getDisplay());
                e.gc.setTransform(t);

                e.gc.drawRoundRectangle(0, 0, rect.width,  rect.height, 4,4);
            } else {
                e.gc.setForeground(SWTResourceManager.getColor(SWT.COLOR_GRAY));
                Rectangle rect = new Rectangle(0,0, getClientArea().width-1, getClientArea().height-1);

                e.gc.drawRectangle(rect);
            }
        }
    }); 
```

当组件获得焦点时，他是这样的 ![在此处输入图像描述](../Images/c605dfefa1770bd196490e349a3afc98.png)

但是当我输入一些东西时，他搞砸了 ![在此处输入图像描述](../Images/9f7287dbca0009b90a03a3d1b008a146.png)

我错过了什么？

**编辑**
我放弃`Text`并完成了`StyledText`

公共类 BorderedText 扩展 StyledText {

```
public BorderedText(Composite parent) {
    super(parent, SWT.WRAP);

    setTabStops(new int[] {0});
    addPaintListener(new PaintListener() {

        @Override
        public void paintControl(PaintEvent e) {
            e.gc.setAntialias(SWT.ON);
            if(isFocusControl()){
                e.gc.setForeground(SWTResourceManager.getColor(SWT.COLOR_LIST_SELECTION));
                e.gc.drawRoundRectangle(0, 0, getClientArea().width-1, getClientArea().height-1, 6,6);
            } else {
                e.gc.setForeground(SWTResourceManager.getColor(SWT.COLOR_GRAY));
                e.gc.drawRoundRectangle(0, 0, getClientArea().width-1, getClientArea().height-1, 6,6);
            }
        }
    });

    addFocusListener(new FocusListener() {

        @Override
        public void focusLost(FocusEvent e) {
            redraw();
        }

        @Override
        public void focusGained(FocusEvent e) {
            redraw();
        }
    });

    addControlListener(new ControlListener() {

        @Override
        public void controlResized(ControlEvent e) {
            redraw();
        }

        @Override
        public void controlMoved(ControlEvent e) {
            redraw();
        }
    });

addKeyListener(new KeyAdapter() {
        @Override
        public void keyPressed(KeyEvent e) {
            if(e.character == SWT.TAB){
                e.doit = false;
                traverse(SWT.TRAVERSE_TAB_NEXT);
            }
        }
    });
}

@Override
protected void checkSubclass() {
    //
}

@Override
protected void checkWidget() {
    //
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:57:18.507

You have two possibilities:

1.  You can create a new Text widget with SWT.BORDER as a style argument. This would give you a nice looking border.

2.  You can use the StyledText widget. The StyledText widget enables you to define margins.

# javascript - jQuery 数据列表

> ID：11522777
> 
> 赞同：10
> 
> 时间：2012-07-17T12:47:27.193
> 
> 标签：javascript, jquery

我有一系列可编辑的列表，只需按一下按钮，就可以将其转换为某种数据结构。当它变成某种数据时，我需要将重复项添加在一起。

例子：

*   200克香蕉
*   100克苹果
*   200克苹果

应该变成某种数据列表，最终应该是这样的：

*   200克香蕉
*   300克苹果

这是我的尝试：

```
//button click event
$(".calculate").bind("click", function(e)
{
    //get the correct parent of the button
    var parent = $(this).closest("#calc");

    //get relevant data
    parent.find(".options").each(function(index, element)
    {
        var opt1 = $(this).children(".opt1").children("input").val(); //weight
        var opt2 = $(this).children(".opt2").children("input").val(); //ingredient
    });
}); 
```

基本上我单击按钮，上面的脚本会找到所有相关数据。

如何将其转换为多维数组或可以在其中搜索重复项的对象列表？

当我尝试创建一个动态对象时，它似乎失败了，当我创建一个多维数组进行搜索时，我被 inArray 无法搜索它们所阻止。

**问题回顾：** 我能够毫无问题地获取用户数据。把它变成一个列表并将重复项加在一起是问题所在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T12:53:15.870

我建议你有一个包含摘要的全局对象，它看起来像这样：

```
$(".calculate").bind("click", function(e)
{
    var fruits = {};

    //get the correct parent of the button
    var parent = $(this).closest("#calc");

    //get relevant data
    parent.find(".options").each(function(index, element)
    {
        var opt1 = $(this).children(".opt1").children("input").val(); //weight
        var opt2 = $(this).children(".opt2").children("input").val(); //ingredient

        // here is my code
        if(fruits[opt2] == undefined) {
            fruits[opt2] = opt1;
        } else {
            // assuming that opt1 is an integer
            fruits[opt2] += opt1;
        }
    });

    // use fruits variable here
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T13:03:02.103

`100g`这是另一个变体，如果您有输入，它也会进行一些简单的解析，而不是`100`. 此外，数据结构每次都会重新初始化，因此每次点击都不会翻倍。

```
$(".calculate").bind("click", function(e)
{
    //get the correct parent of the button
    var parent = $(this).closest("#calc");

    var ingredients = {};

    var extractWeight = function (input) {
        // you can add other logic here
        // to parse stuff like "1kg" or "3mg"

        // this assumes that everything is
        // in grams and returns just the numeric
        // value
        return parseInt(input.substring(0, input.length - 1));
    }

    //get relevant data
    parent.find(".options").each(function(index, element)
    {
        var opt1 = $(this).children(".opt1").children("input").val(); //weight
        var opt2 = $(this).children(".opt2").children("input").val(); //ingredient

        // initialize to 0 if not already initialized
        ingredients[opt2] = ingredients[opt2] ? ingredients[opt2] : 0;
        ingredients[opt2] += extractWeight(opt1);
    });
});​ 
```

以下是一些提示：

*   `{}`称为对象字面量，用于创建新的空对象
*   可以通过`[]`符号动态访问对象成员（即 if `x === "name"`then `o[x] === o.name`）
*   变量在范围内相同级别或更深的函数内部可见 - 就像我`ingredients`在`each`函数中使用的示例一样。
*   JavaScript 中的数组仅支持数字键，因此您不会拥有 PHP 的“关联数组”之类的东西。对象填补了 JS 中的这一空白。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T13:04:01.157

这是一个 jsFiddle，它可以满足您的需求:) [http://jsfiddle.net/LD9TY/](http://jsfiddle.net/LD9TY/)

它有两个输入，一个用于项目名称，另一个用于金额。当您单击添加时，它会检查一个对象以查看该项目是否已添加。如果是这样，它会根据您的输入增加该项目的金额。如果没有，它会将该项目添加到您指定的数量。然后它会用你的“商店”中的所有项目构建一个 ul。

请注意，这是一个快速而肮脏的示例，因此没有进行类型检查或验证:)

# jquery-ui - 如何使 jqueryUI datepicker 以与显示的格式不同的格式提交？

> ID：11522784
> 
> 赞同：46
> 
> 时间：2012-07-17T12:47:49.480
> 
> 标签：jquery-ui, internationalization, jquery-ui-datepicker

我正在使用 jQueryUI 进行一些国际化。我在以法语正常工作的表单上有一个 DatePicker 控件。

当我选择一个日期时，例如 2012 年 8 月 15 日，DatePicker 将显示 15 Aoû, 2012，如我所料。然而，我的问题是，当表单发布时，DatePicker 的值被发布为“15 Aoû, 2012”，现在需要在服务器上进行翻译才能正确保存。

我的问题是，jQueryUI DatePicker 中是否有一种内置方式，以便我可以始终以一致的格式将其发布到服务器，而不管控件以哪种语言显示？如果没有内置的方法，有哪些选择可以实现这一目标？

我意识到我可以将日期格式更改为 08/15/2012 之类的东西，而不是使用文本表示，但这不是我想要做的。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-19T18:04:34.030

有 2 个配置选项：altField 和 altFormat。[http://api.jqueryui.com/datepicker/#option-altField](http://api.jqueryui.com/datepicker/#option-altField) 如果您指定一个 altField，该字段也将被更新，并且将具有 altFormat。通常您会希望将 altField 设置为隐藏字段，因此您可以忽略常规字段并将 altField 发送到 db。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-02T16:52:16.480

您会注意到，提供 dateFormat 对于*新输入的 dates*效果很好，但它不会改变`value`已经提供给日期输入字段的属性。我花了一些时间，我不确定这个解决方案是否理想，但这里解释了我的情况和解决它的代码。将来可能会帮助其他人解决同样的问题。在我的示例中，我将`dd/MM/yyyy`其用作显示格式。

1.  该页面包含任意数量的日期输入字段，这些字段可能已经或可能没有按[W3C 指定](https://www.w3.org/TR/html5/forms.html#date-state-(type=date))`value`的 format 提供的属性。`yyyy-MM-dd`
2.  一些浏览器将有自己的输入控件来处理日期。在撰写本文时，例如 Opera 和 Chrome。这些应该期望*并以上述格式存储*日期，同时根据客户的区域设置呈现它们。您可能不想/不需要在这些浏览器中创建 jqueryui 日期选择器。
3.  没有内置控件来处理日期输入字段的浏览器将需要 jqueryui 日期选择器以及“alt”不可见字段。
4.  具有格式的不可见 alt 输入字段`yyyy-MM-dd`必须具有原始名称和唯一 id 才能使表单逻辑继续工作。
5.  最后，`yyyy-MM-dd`必须解析显示输入字段的值并将其替换为所需的对应项。

所以，这里是代码，使用[Modernizr](http://modernizr.com/)来检测客户端是否能够本地呈现日期输入字段。

```
if (!Modernizr.inputtypes.date) {
    $('input[type=date]').each(function (index, element) {
        /* Create a hidden clone, which will contain the actual value */
        var clone = $(this).clone();
        clone.insertAfter(this);
        clone.hide();

        /* Rename the original field, used to contain the display value */
        $(this).attr('id', $(this).attr('id') + '-display');
        $(this).attr('name', $(this).attr('name') + '-display');

        /* Create the datepicker with the desired display format and alt field */
        $(this).datepicker({ dateFormat: "dd/mm/yy", altField: "#" + clone.attr("id"), altFormat: "yy-mm-dd" });

        /* Finally, parse the value and change it to the display format */
        if ($(this).attr('value')) {
            var date = $.datepicker.parseDate("yy-mm-dd", $(this).attr('value'));
            $(this).attr('value', $.datepicker.formatDate("dd/mm/yy", date));
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:50:28.387

```
<input type="text" name='fieldName' id="datepicker" value="" style="width: 100px;" />
<script type="text/javascript">
    $( "#datepicker" ).datepicker( "option", "dateFormat", 'dd/mm/yy' );
    $( "#datepicker" ).datepicker();
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:00:20.813

似乎其他人在您之前有这个问题或类似的问题。

如果您阅读[此 stackoverflow 答案](https://stackoverflow.com/questions/8511930/parsedate-after-getdate-method-in-jquery-ui-datepicker)，作者试图以一种格式显示日期并以另一种格式将数据传递给 MySQL。

该链接中的先前答案使您可以将所选值作为变量访问。现在您只需将 parseDate 连接到您选择的日期变量。

```
<script type="text/javascript">
    $('#cal').datepicker({
             dateFormat: 'dd M yy',
             onSelect: function(dateText, inst) { 
             var dateAsString = dateText; //the first parameter of this function
             var newDateFormat = $.datepicker.parseDate('dd-mm-yyyy', dateAsString);
           }
    });
</script> 
```

检查[parseDate](http://docs.jquery.com/UI/Datepicker/parseDate)链接的设置和格式。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-19T13:39:53.577

基本上，您不应该***重新***格式化日期。相反，您应该通过[getDate()](http://jqueryui.com/demos/datepicker/#method-getDate)方法从 Datepicker 读取 JavaScript 的 Date 对象。然后，您需要将其传递给服务器。
问题是如何。基本上，您想要的是一些通用格式。如果您使用 JSON，答案很简单，只需输入日期对象，JSON 的 stringify() 函数会自动将其格式化为[ISO8601](http://en.wikipedia.org/wiki/ISO_8601)。

正如您从 Wikipedia 中看到的那样，ISO8601 旨在可靠地交换日期和时间，因此您应该使用它。
了解现代 Web 浏览器支持 Date 对象的`toISOString()`方法可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-17T23:43:01.060

正如@Pawel-Dyda 提到的，有一个

> **getDate()**方法

```
var currentDate = $( ".selector" ).datepicker( "getDate" ); 
```

这是它返回的示例：`Wed Jan 20 2016 00:00:00 GMT+0300.`

您可以使用 Javascript、PHP、SQL 或其他任何方式解析它。

* * *

## MySQL解析示例：

```
select str_to_date('Wed Jan 20 2016 00:00:00 GMT+0300','%a %b %d %Y %H:%i:%s'); 
```

回报：

```
2016-01-20 00:00:00 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-29T13:37:17.333

适用于 ASP.NET 的解决方案

```
@using (Html.BeginForm("ActionName", "ControllerName"))
{
    @Html.HiddenFor(m => m.DateFrom)
    @Html.HiddenFor(m => m.DateTo)

    <div class="form-group">
        @Html.LabelFor(m => m.DateFrom)
        <input id="datepicker-date-from" type="text" class="form-control datepicker" value="@Model.DateFrom.Date.ToString("dd.MM.yyyy")"/>
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.DateTo)
        <input id="datepicker-date-to" type="text" class="form-control datepicker" value="@Model.DateTo.Date.ToString("dd.MM.yyyy")" />
    </div>

    <input type="submit" class="btn btn-sn btn-primary" value="Download" />
}

@section scripts {
    <script type="text/javascript">

        $(function () {
            $("#datepicker-date-from").datepicker(
            {
                dateFormat: "dd.mm.yy",
                altField: @Html.IdFor(m => m.DateFrom),
                altFormat: "yy-mm-dd"
            });

            $("#datepicker-date-to").datepicker(
            {
                dateFormat: "dd.mm.yy",
                altField: @Html.IdFor(m => m.DateTo),
                altFormat: "yy-mm-dd"
            });
        });

    </script>
} 
```

# bash - 使用 bash 脚本修改 CSV 中的值

> ID：11522786
> 
> 赞同：4
> 
> 时间：2012-07-17T12:47:51.763
> 
> 标签：bash, csv, sh, bc

我有以下 CSV 文件：

```
2012-07-12 15:30:09; 353.2
2012-07-12 15:45:08; 347.4
2012-07-12 16:00:08; 197.6
2012-07-12 16:15:08; 308.2
2012-07-12 16:30:09; 352.6 
```

我想要做的是修改第二列中的值......

我已经可以做的是提取值并以这种方式修改它：

```
#!/bin/bash
cut -d ";" -f2 $1 > .tmp.csv
for num in $(cat .tmp.csv)
    do
        (echo "scale=2;$num/5" | bc -l >> .tmp2.csv)
done
rm .tmp.csv
rm .tmp2.csv 
```

但我也需要在该文件中有 column1 ......

我希望你们中的一个能给我一个提示，我只是卡住了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:09:43.230

从您的代码中，这就是我所理解的

**输入**

```
2012-07-12 15:30:09; 353.2 
2012-07-12 15:45:08; 347.4 
2012-07-12 16:00:08; 197.6 
2012-07-12 16:15:08; 308.2 
2012-07-12 16:30:09; 352.6 
```

**awk 代码**

> awk -F ";" '{打印 $1 ";" $2/5}' 输入

**输出**

```
2012-07-12 15:30:09;70.64
2012-07-12 15:45:08;69.48
2012-07-12 16:00:08;39.52
2012-07-12 16:15:08;61.64
2012-07-12 16:30:09;70.52 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T13:10:23.570

一种方法，使用`awk`：

```
awk '{ $NF = $NF/5 }1' file.txt 
```

结果：

```
2012-07-12 15:30:09; 70.64
2012-07-12 15:45:08; 69.48
2012-07-12 16:00:08; 39.52
2012-07-12 16:15:08; 61.64
2012-07-12 16:30:09; 70.52 
```

高温高压

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T13:30:30.790

这是一个几乎纯正的`bash`解决方案，没有临时文件：

```
#!/bin/bash

while IFS=$';' read col1 col2; do
    echo "$col1; $(echo "scale=2;$col2/5" | bc -l)"
done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-17T12:59:43.117

尝试`awk`：

```
awk '
    BEGIN {
        ## Split fields with ";".
        FS = OFS = "; "
    }

    {
        $2 = sprintf( "%.2f", $2/5 )
        print $0
    }
' infile 
```

输出：

```
2012-07-12 15:30:09; 70.64
2012-07-12 15:45:08; 69.48
2012-07-12 16:00:08; 39.52
2012-07-12 16:15:08; 61.64
2012-07-12 16:30:09; 70.52 
```

# ipad - 移动应用程序在 Ipad 上仅旋转 3 个方向

> ID：11522787
> 
> 赞同：0
> 
> 时间：2012-07-17T12:47:56.550
> 
> 标签：ipad, html, mobile, css

当 ipad 是纵向的并且底部的主页按钮和顶部的相机时，应用程序不会旋转。但是所有其他方向完美旋转，风景和其他人像（当相机在底部和主页按钮在顶部时）

我不知道是什么导致了这个问题。

顺便说一下，应用程序是 HTML5/Css3，而 Ipad 是 ipad2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:50:55.423

您是否选择了颠倒方向？

它在项目目标中 - iPhone/iPad 部署信息 - 支持的设备方向

# javascript - 如何将字母与单词联系起来？

> ID：11522790
> 
> 赞同：1
> 
> 时间：2012-07-17T12:47:59.843
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-draggable

我正在创建一个文字游戏，您必须通过从侧面拖动字母来拼写网格中的单词。

此代码从“listOfWords”中随机生成 12 个单词并动态创建一个 6x6 表。这些单词也被分成单个字符**（“m”“a”“t”）**，因此可以放置可拖动的字母来拼写单词......

```
var listOfWords = ["mat", "cat", "dog", "pit", "pot", "fog", "log", "pan", "can", "man", "pin", "gag", "sat", "pat", "tap", "sap", "tag", "gig", "gap", "nag", "sag", "gas", "pig", "dig", "got", "not", "top", "pop", "god", "mog", "cot", "cop", "cap", "cod", "kid", "kit", "get", "pet", "ten", "net", "pen", "peg", "met", "men", "mum", "run", "mug", "cup", "sun", "mud", "rim", "ram", "rat", "rip", "rag", "rug", "rot", "dad", "sad", "dim", "dip", "did", "mam", "map", "nip", "tin", "tan", "nap", "sit", "tip", "pip", "sip", "had", "him", "his", "hot", "hut", "hop", "hum", "hit", "hat", "has", "hug", "but", "big", "bet", "bad", "bad", "bed", "bud", "beg", "bug", "bun", "bus", "bat", "bit", "fit", "fin", "fun", "fig", "fan", "fat", "lap", "lot", "let", "leg", "lit"];

var shuffledWords = listOfWords.slice(0).sort(function () {
return 0.5 - Math.random();
}).slice(0, 12);

var tbl = document.createElement('table');
tbl.className='tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length; i += wordsPerRow) {
var row = document.createElement('tr');

for (var j=i; j < i + wordsPerRow; ++ j) {
    var word = shuffledWords[j];

    for (var k = 0; k < word.length; k++){
        var cell = document.createElement('td');

        cell.textContent = word[k];
        // IF FIREFOX USE cell.textContent = word[j]; INSTEAD
        row.appendChild(cell);
    }
}
tbl.appendChild(row);    
}

 document.body.appendChild(tbl); 
```

这是拖放到网格上以拼写单词的可拖动字母的代码。

```
<div class="squares">

        <div id="drag1" class="drag ui-widget-content box-style2" tabindex="0">
        <p>a</p>
        </div>

        <div id="drag2" class="drag ui-widget-content box-style" tabindex="0">
        <p>b</p>
        </div>

        <div id="drag3" class="drag ui-widget-content box-style" tabindex="0">
        <p>c</p>
        </div>

        <div id="drag4" class="drag ui-widget-content box-style" tabindex="0">
        <p>d</p>
        </div>

        <div id="drag5" class="drag ui-widget-content box-style2" tabindex="0">
        <p>e</p>
        </div>

        <div id="drag6" class="drag ui-widget-content box-style" tabindex="0">
        <p>f</p>
        </div>

        <div id="drag7" class="drag ui-widget-content box-style" tabindex="0">
        <p>g</p>
        </div>

        <div id="drag8" class="drag ui-widget-content box-style" tabindex="0">
        <p>h</p>
        </div>

        <div id="drag9" class="drag ui-widget-content box-style2" tabindex="0">
        <p>i</p>
        </div>

         <div id="drag10" class="drag ui-widget-content box-style" tabindex="0">
        <p>j</p>
        </div>

        <div id="drag11" class="drag ui-widget-content box-style" tabindex="0">
        <p>k</p>
        </div>

        <div id="drag12" class="drag ui-widget-content box-style" tabindex="0">
        <p>l</p>
        </div>

        <div id="drag13" class="drag ui-widget-content box-style" tabindex="0">
        <p>m</p>
        </div>

        <div id="drag14" class="drag ui-widget-content box-style" tabindex="0">
        <p>n</p>
        </div>

        <div id="drag15" class="drag ui-widget-content box-style2" tabindex="0">
        <p>o</p>
        </div>

        <div id="drag16" class="drag ui-widget-content box-style" tabindex="0">
        <p>p</p>
        </div>

        <div id="drag17" class="drag ui-widget-content box-style" tabindex="0">
        <p>r</p>
        </div>

        <div id="drag18" class="drag ui-widget-content box-style" tabindex="0">
        <p>s</p>
        </div>

        <div id="drag19" class="drag ui-widget-content box-style" tabindex="0">
        <p>t</p>
        </div>

        <div id="drag20" class="drag ui-widget-content box-style2" tabindex="0">
        <p>u</p>
        </div> 
```

当单词放在顶部时，如何使单词识别正确的字母？

沿着这些路线的东西......

```
if ("mat" == drag13 + drag1 + drag19) {
            return true;
        }
        else {
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T19:42:36.103

您可以使用 string.indexof(substring) 它返回子字符串在字符串中开始的索引

前任：

```
if ('mat'.indexOf(drag13) != -1) { // -1 means substring is not in the string
  return true;
} else {
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T07:46:21.247

这就是我最后的方式...

```
$(".drop").droppable({
drop: function(event, ui) {
    word = $(this).data('word');

    guesses[word].push($(ui.draggable).attr('data-letter'));
    console.log($(event));
    console.log($(ui.draggable).text());

    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    if ($(this).text() == $(ui.draggable).text().trim()) {

        $(this).addClass('wordglow3');
    } else {
        $(this).addClass('wordglow');
    }
    console.log('CHECKING : ' + $(this).text() + ' against ' + $(ui.draggable).text().trim());

    console.log(guesses);

    if (guesses[word].length == 3) {
        if (guesses[word].join('') == word) {
            $('td[data-word=' + word + ']').addClass("wordglow2");

        } else {
            $('td[data-word=' + word + ']').addClass("wordglow4");

        }
    }

},

activate: function(event, ui) {
    word = $(this).data('word');

    // try to remove the class
    $('td[data-word=' + word + ']').removeClass('wordglow').removeClass('wordglow4').removeClass('wordglow3');
}

}); 
```

# android - 父 Activity 的代码被执行，但结果（动画）未显示

> ID：11522798
> 
> 赞同：0
> 
> 时间：2012-07-17T12:48:11.960
> 
> 标签：android, android-layout, layout-inflater

我希望在整个应用程序中都有一个滑动菜单，我的应用程序中的每个活动都可以访问该菜单。为此，我创建了一个父活动，所有其他活动都按照[此答案中的建议扩展到该活动](https://stackoverflow.com/a/4922740/840669). 因此，只有一个活动将实现该滑动菜单功能，而扩展该活动的所有其他活动都将具有该实现。但我的问题是，当我按下 UP 按钮（应用程序图标）时，滑动抽屉应该显示出来，整个布局应该移到右侧。这适用于 BaseActivity，但对于扩展该类的活动，它不起作用。既没有显示抽屉，也没有向右移动布局。我尝试将 toast 放入 BaseActivity 的适当方法中，显示 Toast 但抽屉未显示。可能是什么问题？

布局xml如下，

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rl_root"
android:layout_width="wrap_content"
android:layout_height="fill_parent" >

<RelativeLayout
    android:id="@+id/ll_lhs_menu"
    android:layout_width="300dip"
    android:layout_height="fill_parent"
    android:background="@color/menu_bg"
    android:orientation="vertical"
    android:visibility="visible" >

    .......
    Sliding drawer goes here.
    .......

</RelativeLayout>

<!-- Following is the actual layout where in the layout for other activities
     will be put in using the java code below. -->
<RelativeLayout
    android:id="@+id/rl_right"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:background="@drawable/capture_port"
    android:scrollbars="none" >

</RelativeLayout>

</RelativeLayout> 
```

重写的`setContentView()`方法如下：

```
 @Override
public void setContentView(int layoutResID) {
    _completeLayout= (RelativeLayout) getLayoutInflater().inflate(R.layout.menu, null);
    _activityLayout= (RelativeLayout) _completeLayout.findViewById(R.id.rl_right);
    getLayoutInflater().inflate(layoutResID, _activityLayout, true);
    setContentView(_completeLayout);
} 
```

单击操作栏上的 UP 按钮时，将执行以下代码`BaseActivity`

```
 @Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:
    _leftLayout.setVisibility(View.VISIBLE);
    int width = _leftLayout.getWidth();
    if (width == 0) {
        width = 300;
    }

    if (!isMenuVisible()) {
        Toast.makeText(this, "Executed successfully...", Toast.LENGTH_LONG).show();
        _leftLayout.setVisibility(View.VISIBLE);

        _rightLayoutParams = new LayoutParams(
            _rightLayout.getWidth(), _rightLayout.getHeight());
        _rightLayoutParams.setMargins(width, 0, -width, 0);
        _rightLayout.setLayoutParams(_rightLayoutParams);

        Animation slideRight = setRightSlidingAnimation();
        _leftLayout.startAnimation(slideRight);
        _rightLayout.startAnimation(slideRight);
    } else {
        Animation slideLeft = setLeftSlidingAnimation();
        _rightLayout.startAnimation(slideLeft);
        _leftLayout.startAnimation(slideLeft);
    }

    setMenuVisible(!isMenuVisible());
    break;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:27:50.413

`onOptionsItemSelected`问题解决了，因为现在正确的布局已经改变，所以只需要再次初始化视图。该方法现在看起来像：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case android.R.id.home:

    _rootLayout = (RelativeLayout) findViewById(R.id.rl_root);
    _leftLayout = (RelativeLayout) findViewById(R.id.ll_lhs_menu);
    _rightLayout = (RelativeLayout) findViewById(R.id.rl_right);

    _leftLayout.setVisibility(View.VISIBLE);
    int width = _leftLayout.getWidth();
    if (width == 0) {
        width = 300;
    }

if (!isMenuVisible()) {
    Toast.makeText(this, "Executed successfully...", Toast.LENGTH_LONG).show();
    _leftLayout.setVisibility(View.VISIBLE);

    _rightLayoutParams = new LayoutParams(
        _rightLayout.getWidth(), _rightLayout.getHeight());
    _rightLayoutParams.setMargins(width, 0, -width, 0);
    _rightLayout.setLayoutParams(_rightLayoutParams);

    Animation slideRight = setRightSlidingAnimation();
    _leftLayout.startAnimation(slideRight);
    _rightLayout.startAnimation(slideRight);
} else {
    Animation slideLeft = setLeftSlidingAnimation();
    _rightLayout.startAnimation(slideLeft);
    _leftLayout.startAnimation(slideLeft);
}

setMenuVisible(!isMenuVisible());
break;
}
return false;
} 
```

# oracle - 如何检查客户端的 NLS_LANG？

> ID：11522800
> 
> 赞同：19
> 
> 时间：2012-07-17T12:48:21.013
> 
> 标签：oracle, character-encoding, nls-lang

我正在使用 Windows 操作系统，我知道此设置存储在注册表中。问题是注册表路径会随着版本的变化而变化，浏览那一堆注册表项绝对不是一个好主意。

我可以`NLS_LANG`使用`SELECT USERENV ('language') FROM DUAL`.

我想将其与客户端设置进行比较，并在它们不匹配时显示警告，就像 Pl/Sql Developer 所做的那样。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T18:50:22.773

这就是我在解决编码问题时所做的。（sqlplus读取的NLS_LANG值）：

```
SQL>/* It's a hack. I don't know why it works. But it does!*/
SQL>@[%NLS_LANG%]
SP2-0310: unable to open file "[NORWEGIAN_NORWAY.WE8MSWIN1252]" 
```

您**必须**从注册表中提取当前 ORACLE_HOME 中的 NLS_LANG 值。所有客户端工具（sqlplus、sqlldr、exp、imp、oci 等）从注册表中读取此值并确定是否应进行任何字符转码。

ORACLE_HOME 和注册表部分：

```
C:\>dir /s/b oracle.key
C:\Oracle10\BIN\oracle.key

C:\>type C:\Oracle10\BIN\oracle.key
SOFTWARE\ORACLE\KEY_OraClient10204_Home 
```

* * *

在这样的时候，我求助于 IPython 来展示一个想法：

**几次查找，你就在那里！**

```
In [36]: OHOMES_INSTALLED = !where oci.dll

In [37]: OHOMES_INSTALLED
Out[37]:
['C:\\Oracle10\\BIN\\oci.dll',
'C:\\oraclexe\\app\\oracle\\product\\11.2.0\\server\\bin\\oci.dll']

In [38]: ORACLE_HOME = os.path.dirname(OHOMES_INSTALLED[0])

In [39]: ORACLE_HOME
Out[39]: 'C:\\Oracle10\\BIN'

In [40]: f = open(os.path.join(ORACLE_HOME, "oracle.key"))

In [41]: SECTION = f.read()

In [42]: SECTION
Out[42]: 'SOFTWARE\\ORACLE\\KEY_OraClient10204_Home\n'

In [43]: from _winreg import *

In [44]: aReg = ConnectRegistry(None,HKEY_LOCAL_MACHINE)

In [46]: aKey = OpenKey(aReg,SECTION.strip())

In [47]: val = QueryValueEx(aKey, "NLS_LANG")

In [48]: print val
(u'NORWEGIAN_NORWAY.WE8MSWIN1252', 1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-04T08:51:51.530

根据 Jocke 的回答（感谢 Jocke），我测试了以下查询：

```
SELECT DISTINCT client_charset FROM v$session_connect_info
WHERE sid = sys_context('USERENV','SID'); 
```

它完美地完成了这项工作，但我不确定是否有任何用户拥有必要的权利。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-01-19T13:47:38.853

我不确定这是否每次都有效，但在 sql*plus 中对我来说：

```
variable n varchar2(200)

execute sys.dbms_system.get_env('NLS_LANG', :n )

print n

AMERICAN_AMERICA.WE8ISO8859P1 
```

只需构建一个函数包装器，将执行权限授予需要它的用户，然后就可以了。

# iphone - 如何从包含字典的 NSArray 中获取最大值？

> ID：11522801
> 
> 赞同：9
> 
> 时间：2012-07-17T12:48:23.003
> 
> 标签：iphone, objective-c, cocoa-touch, nsarray, key-value-coding

你如何从带有字典的 NSArray 中获得最大值？

假设我有 NSArray 包含键为“年龄”、“姓名”等的字典。现在我想获得年龄最高的记录。这可以通过一些 KVC 魔法实现吗？还是我必须迭代并以“手动”方式进行？

我试过类似的东西：

```
int max = [[numbers valueForKeyPath:@"@max.intValue"] intValue]; 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T12:54:35.050

除非“intValue”是您字典中的键，否则键路径不会有多大好处。

如果这是您应该使用`@"@max.age"`（在字典上）获取它的最大年龄。字典中的任何其他键也是如此。

```
[myDictionary valueForKeyPath:@"@max.age"]; 
```

If`numbers`是一个值数组，您可以将`@"@max.self"`其用作获取最大值的关键路径。

```
[myArrayOfNumbers valueForKeyPath:@"@max.self"]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:53:49.333

你快到了，你只需要指定你想要最大值的确切字段：

```
NSInteger max = [[numbers valueForKeyPath:@"@max.age"] integerValue]; 
```

我冒昧地将您`int`的 s 修改为`NSInteger`s，以防万一有人想在 iOS 和 OS X 上使用此代码。

# html - Oracle ApEx Radiogroup 禁用

> ID：11522805
> 
> 赞同：2
> 
> 时间：2012-07-17T12:48:38.933
> 
> 标签：html, oracle-apex, radio-group

我正在使用 Orace Apex，特别是：

```
SELECT
    APEX_ITEM.radiogroup(1,EMP_ACTIVE,'Y',NULL,'disabled'),
    APEX_ITEM.radiogroup(2,CUST_ACTIVE,'Y',NULL,'disabled'),
    APEX_ITEM.radiogroup(3,USER_ACTIVE,'Y',NULL,'disabled')
FROM table A; 
```

问题是，这条语句运行良好，但在屏幕上难以阅读。

是否有另一种方法可以使这个无线电组看起来像一个普通的无线电组，没有禁用的外观，以使用户更容易阅读，但同时不允许用户实际更改无线电组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:24:36.143

另一种方法是创建自己的图标，看起来像单选按钮，并像这样使用它们：

```
SELECT
    '<img src="' || case EMP_ACTIVE when 'Y' then 'myrg_selected.png' 
                                    else 'myrg_notselected.png' end || '"/>',
    '<img src="' || case CUST_ACTIVE when 'Y' then 'myrg_selected.png' 
                                    else 'myrg_notselected.png' end || '"/>',
    '<img src="' || case USER_ACTIVE when 'Y' then 'myrg_selected.png' 
                                    else 'myrg_notselected.png' end || '"/>'
FROM table A; 
```

您可以将逻辑移动到函数中以使报告更简单：

```
SELECT
    mypkg.radio_img(EMP_ACTIVE),
    mypkg.radio_img(CUST_ACTIVE),
    mypkg.radio_img(USER_ACTIVE)
FROM table A; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:27:06.653

您可以有选择地禁用单选按钮。禁用未选中的，并保持选中的“活动”

```
with d as (
select 'N' emp_active, 'N' cust_active, 'Y' user_active
from dual
union all
select 'N', 'Y', 'N'
from dual
union all
select 'Y', 'N', 'N'
from dual
)
SELECT
   APEX_ITEM.radiogroup(1,EMP_ACTIVE,'Y',NULL, CASE EMP_ACTIVE WHEN 'N' THEN 'disabled' END) EMP_ACTIVE,
   APEX_ITEM.radiogroup(2,CUST_ACTIVE,'Y',NULL, CASE CUST_ACTIVE WHEN 'N' THEN 'disabled' END) CUST_ACTIVE,
   APEX_ITEM.radiogroup(3,USER_ACTIVE,'Y',NULL, CASE USER_ACTIVE WHEN 'N' THEN 'disabled' END) USER_ACTIVE
FROM d; 
```

![禁用和启用的无线电](../Images/163ba7f3da23be5fc1a239f193b1ad6d.png)

（如果我认为这是正确的：您的无线电组是垂直的；在一列中只选择了一个？）

（想法取自[为什么单选按钮不能是“只读的”？](https://stackoverflow.com/questions/1953017/why-cant-radio-buttons-be-readonly)）

# extjs4 - 在 extjs mvc 4.0 中打开另一个选项卡后未调用控制器函数

> ID：11522806
> 
> 赞同：1
> 
> 时间：2012-07-17T12:48:43.067
> 
> 标签：extjs4

我在 extjs4.0 MVC 的控制器中有一个函数，它在视图页面中的按钮上调用，但是当我打开另一个选项卡时，这个函数没有在按钮上调用

请在这件事上帮助我 //------------ 代码

```
init: function() {
       var controller = this;
       this.control({
           'leftPanel button[action=reset]': {
                click: this.resetForm
           },'leftPanel button[action=search]' : {
                click: this.searchForm
           }

       })
} 
```

如果在我的网站上打开另一个选项卡，这两个函数将不会再次调用

请在这件事上帮助我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:12:24.493

实际上这些字段在这样的视图页面中

```
buttons: [{
                    text: 'Reset Filter',
                                        name :'btnReset',
                                        id:'btnReset',
                                        action:'reset'
                                    },{
                                         text: 'Perform Search',
                                         name:'btnSearch',
                                         id:'btnSearch',
                                         action:'search'

                                    }
                                   ] 
```

您可以在配置选项中看到定义了在页面控制器中定义的函数“搜索，休息”的名称（正如我在我的问题上发布的那样）。此功能在页面加载时正常工作，并且如果我们没有在调用这些函数的地方执行此页面的任何操作，但是当我打开一个选项卡（通过使用 Ajax 请求）之后，上述未调用的函数不会出现错误消息。

希望你能理解这个问题

# java - 播放框架中的MySql数据库连接问题（未找到驱动程序）

> ID：11522810
> 
> 赞同：0
> 
> 时间：2012-07-17T12:48:54.570
> 
> 标签：java, mysql, playframework

所以我尝试使用股票 Play！2.2 配置MySql数据库连接。不幸的是，在将股票数据库 (h2) 与 MySql 一起使用时，那里的指南没有帮助。所以，我编写了一个单独的模型来处理 MySql 连接。它间歇性地工作，我试图弄清楚为什么它不能一直工作。

这是“连接”功能

```
String sourceSchema = "db";
    String databaseHost = "host";
    String databaseURLSource = "jdbc:mysql://" + databaseHost + "/" + sourceSchema;
    String databaseUserIDSource = "userid";
    String databasePWDSource = "password";

    try {

        Class.forName("com.mysql.jdbc.Driver").newInstance();
        conn = DriverManager.getConnection(databaseURLSource,
                databaseUserIDSource, databasePWDSource);

        return true;

    } catch (InstantiationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SQLException e) {
        Logger.error("SQLException: " + e.getMessage());
    } 
```

我所有的凭据都是正确的（显然它们已更改）接下来，在我的 lib 文件夹中，我有

```
 mysql-connector-java-5.1.21-bin.jar
```

到位。

接下来，在我的 Build.scala 中，我在 appDependencies 下有这个：

```
"mysql" % "mysql-connector-java" % "5.1.21" 
```

当我尝试验证连接时，使用：

```
public boolean isConnected() {
    return conn != null;
} 
```

连接失败（间歇性）然后给我：

```
SQLException: Before start of result set 
```

而有时：

```
SQLException: No Suitable driver found for mysql ... 
```

这就是我的查询的执行方式：

```
String qs = String.format("SELECT * FROM community_hub.alert_journal LIMIT("+ from +","+ to +")");
```

```
 String qscount = String.format("SELECT COUNT(*) AS count FROM community_hub.alert_journal");

try {

        if (isConnected()) {

            Statement stmt = conn.createStatement();

            //obtain count of rows
            ResultSet rs1 = stmt.executeQuery(qscount);
            //returns  the number of pages to draw on index
            int numPages = returnPages(rs1.getInt("count"),rpp);
            NumPages(numPages);
            ResultSet rs = stmt.executeQuery(qs);

            while (rs.next())
            {
                AlertEntry ae = new AlertEntry(
                        rs.getTimestamp("date"),
                        rs.getString("service_url"),
                        rs.getString("type"),
                        rs.getString("offering_id"),
                        rs.getString("observed_property"),
                        rs.getString("detail")
                );

                list.add(ae);
            }

            rs.close();
            disconnect();

        } else {
            System.err.println("Connection was null");
        }
    }
    catch (Exception e)
    {
        e.printStackTrace();
    } 
```

帮助？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:13:12.527

mysql错误告诉你什么吗？

第一个错误“SQLException：在结果集开始之前”看起来不完整。也许错误日志包含完整的消息，或者你可以

第二个“SQLException：没有为 mysql 找到合适的驱动程序”清楚地表明存在类路径问题。

通常，像 c3p0 或 BoneCP 这样的连接池建议使用验证查询来确定连接是否有效（类似于 mysql 的“select 1”）。这可能有助于确保连接正常而不依赖于驱动程序？

# android - 如果内容太大，Android webview如何缩放以适应，但当内容小于屏幕时显示实际大小？

> ID：11522812
> 
> 赞同：1
> 
> 时间：2012-07-17T12:49:01.980
> 
> 标签：android, webview

我正在编写一个应用程序，其中一个功能是显示来自我们网络服务器的图像。来自网络服务器的图像大小不一。它将显示在屏幕中央。当图像大于屏幕尺寸时，它将调整大小以适应屏幕，用户可以捏合进行缩放。当图像小于屏幕尺寸时，它不会被调整大小。

我尝试了什么：我尝试实现自定义 imageView 以允许缩放，但似乎需要进行很多计算。然后我发现很多程序员通过 webview 来做这件事。

现在它可以被缩放，并被放置在屏幕的中心。问题是当图像小于屏幕尺寸时，它也显示适合屏幕。

问题，有什么方法可以获取图像大小的内部宽度，以便我可以用它来确定图像的比例？还是有更好的方法来实现这一目标？

下面是我使用的代码，非常感谢！

```
 final String html = "<body bgcolor=black>"
                + "<table width=100% height=100%><tr><td><center><img src=\""
                + userProfile.getImageUrl()
                + "\"  width=100% /></center></td></tr></table>" + "</body>";

        WebSettings settings = mWebView.getSettings();
        settings.setBuiltInZoomControls(true);
        settings.setSupportZoom(true);
        settings.setUseWideViewPort(true);
        settings.setLightTouchEnabled(true);
        settings.setLoadWithOverviewMode(true); 

        mWebView.loadDataWithBaseURL("fake://not/needed", html, "text/html",
                "utf-8", ""); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:07:25.990

利用

```
 settings.setLayoutAlgorithm(PARAMETER OF YOUR CHOICE); 
```

不确定这是否有帮助，您可以尝试一下

编辑：首先你可以使用

```
 Display display = ((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
    int screenWidth = display.getWidth();
    int screenHeight = display.getHeight(); 
```

找到屏幕宽度和高度，然后你可以使用缩放图像

```
 resizedImage = Bitmap.createScaledBitmap( image, imageWidth, imageHeight, true); 
```

使用这两种方法，您可以在屏幕上显示完整的图像，而无需任何 WebView

# javascript - 使用jquery使用split函数

> ID：11522813
> 
> 赞同：0
> 
> 时间：2012-07-17T12:49:04.880
> 
> 标签：javascript, jquery

我得到 CSS 'left' 属性值。现在它设置为-50。所以我只想得到 50 可以用拆分功能完成，或者有另一种方法可以做到这一点。还有为什么拆分功能在我的功能中不起作用

```
<head>

<script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">

$(document).ready(function() {

$('.box').click(function (){

    var kar=parseInt($(this).css('left'))

var jj= kar.split('')

alert(jj[0])

    })

});
</script>

<style>

.container {

    margin:auto;
    width:500px;
    position:relative

}

.box { background:#FF0000; width:200px; height:200px; position:absolute;left:-50px;}

</style>

</head>

<body>
<div class="container">
<div class="box"></div>

</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:53:25.757

我认为您正在寻找的是[Math.abs 函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/abs)：

```
Math.abs(-50); // 50
Math.abs("-50"); // 50 
```

[split 函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)适用于字符串并返回一个数组，其中字符串的所有部分由给定的分隔符分隔。你给一个空字符串作为分隔符，它在每个字符之后分割你的字符串，如下所示：

```
"-50".split(""); // result is: ["-","5","0"]
var kar = -50;
kar.split(""); // TypeError: kar.split is not a function 
```

如果你得到一个类似的字符串`"-50px"`，那么你可以这样做：

```
var leftAsInt = parseInt("-50px".replace(/[A-Za-z]/g, ""),10);
console.log(Math.abs(leftAsInt)); // 50 
```

另外：这里不涉及 jQuery（除了`.css()`函数），`split`并且`abs`是[JavaScript 的预定义核心对象的](https://developer.mozilla.org/en/JavaScript/Guide/Predefined_Core_Objects) `String`函数和`Math`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T12:53:33.610

使用 Math.abs：

```
var kar = parseInt($(this).css('left')),
    jj = Math.abs(kar); 
```

参考：

*   [`Math.abs`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/abs).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T12:53:34.903

试试这个怎么样

> 警报（数学.abs（kar））

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:54:38.993

是的，您可以使用拆分功能

试试下面的代码..

var jj= kar.split('-')

# c# - 带有 Javascript 的 RadioButton (MVC3)

> ID：11522814
> 
> 赞同：0
> 
> 时间：2012-07-17T12:49:12.290
> 
> 标签：c#, javascript, asp.net-mvc-3, radio-button, maskedinput

我正在使用 C# 和 MVC3

我有一个 RadioButton，根据选择的选项，我需要更改文本框的掩码。我正在为 jQuery 使用屏蔽输入插件。

我怎样才能做到这一点？我必须在 Controller 或 .cshtml 上开发它？

```
 <div class="editor-field">
        @Html.LabelFor(model => model.Type)
        @Html.Label("Test Label")
        @Html.RadioButtonFor(model => model.RbTest, "F", true)

        @Html.Label("Test Label 2")
        @Html.RadioButtonFor(model => model.RbTest, "J")

        @Html.LabelFor(model => model.LabelBla)
        @Html.EditorFor(model => model.NeedMask)
    </div> 
```

如果我选择“F”（第一个单选按钮），我想要一个面具。如果我选择“J”（第二个单选按钮），我想要另一个面具。

我需要屏蔽编辑器：“NeedMask”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:06:44.033

我知道 addClass() 和 removeClass() 有一个 jquery 函数。因此，您可以执行以下操作：

```
$(".f").click(function(){
       this.addClass("NeedMask");
    }); 
```

我实际上在工作 atm 但这应该让你朝着正确的方向开始。我会查看 jQuery 文档以获取有关屏蔽的帮助（您还需要使用`$(".J").removeClass("NeedMask")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:17:57.390

完毕！

```
@Html.RadioButton("RbTest", "F", true, new { @onclick = "Mask1()" })
@Html.RadioButton("RbTest", "J", false, new { @onclick = "Mask2()" }) 
```

# php - 直接看不到图片需要刷新

> ID：11522817
> 
> 赞同：0
> 
> 时间：2012-07-17T12:49:16.483
> 
> 标签：php, zend-framework, amazon-s3

当我使用此功能创建具有指定链接的图像时，它不直接显示刷新后它出现

[http://mysite.local/img/slide-image-321.jpg/369x360](http://mysite.local/img/slide-image-321.jpg/369x360)

是图片的链接

```
private function generate_cache($localpath, $from, $to, $width, $height) {
        $tempFrom = pathinfo($from);
        $tempTo = pathinfo($to);
        $tempPathFrom = $localpath.$tempFrom['basename'];
        $tempPathTo = $localpath.$tempTo['basename'];
        // Amazon S3
        $awsAccessKey =  Zend_Registry::getInstance()->config->amazons3->awsAccessKey;
        $awsSecretKey = Zend_Registry::getInstance()->config->amazons3->awsSecretKey;
        $bucketName = Zend_Registry::getInstance()->config->amazons3->bucketName;
        $s3 = new Zend_Service_Amazon_S3($awsAccessKey, $awsSecretKey);
        // ..
        if(file_get_contents('http://'.$bucketName.'.s3.amazonaws.com/'.$tempFrom['basename'])) {
            $content = file_get_contents('http://'.$bucketName.'.s3.amazonaws.com/'.$tempFrom['basename']);
        }

        if(!file_put_contents($tempPathFrom, $content)){
            echo "Failed to copy the file";
        }

        $resize = $this->_helper->imgResize($tempPathFrom);
        $resize->resizeImage($width, $height);
        $resize->saveImage($tempPathTo, 95);

            if(!$s3->putFile($tempPathTo, $bucketName."/".$tempTo["basename"])){
            echo "failed to put the resized image in s3";
        } else {
            // Deleting the local files
            unlink($tempPathTo);
            unlink($tempPathFrom);

            }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:54:54.517

因为当您的页面加载时，图像不会在服务器上创建。实际上它可能在您刷新之前创建，并在刷新后显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T09:04:36.067

我找到了解决方案，我将最后一次上传到 s3 的部分移到了这里，这是第一次从本地加载，我将它上传到 s3 并删除本地，当它们刷新或第二次从 s3 加载时

```
 if( file_exists($localpath.$tmp["basename"]) ) {
                readfile($localpath.$tmp["basename"]);
                self::upload_aws($localpath.$tmp["basename"], $bucketName."/".$tmp["basename"]);
            } elseif($s3->getObject($bucketName."/".$tmp["basename"])){
                echo $s3->getObject($bucketName."/".$tmp["basename"]);
    }

public function upload_aws(){
     if(!$s3->putFile($tempPathTo, $bucketName."/".$tempTo["basename"])){
                echo "failed to put the resized image in s3";
            } else {
                // Deleting the local files
                unlink($tempPathTo);
                unlink($tempPathFrom);

     }

} 
```

# hibernate - 如何将列表的值存储在不同的文本框中（每个都有不同的 id）

> ID：11522822
> 
> 赞同：0
> 
> 时间：2012-07-17T12:49:29.447
> 
> 标签：hibernate, struts2

我正在使用struts2和hibernate。

我有一个在操作时加载的 jsp 页面。相关的操作类返回一个`list`对象作为存储在数据库中的表的行。

当页面加载时（所有行都存储在列表中），我希望每一行的数据以及列的每个对应值显示在单独的文本框中，每个文本框中都有不同的`id`. 例如，`list`有 15 个对象（作为表的行），每个对象`list`有 10 个属性（作为列），那么我希望`10*15 = 150 textboxes`每个对象都有不同的 id。

我怎样才能做到这一点？和i 只能`<s:iterator>`有`<s:property>`10 个文本框（等于列数，因为我们只能有 10 个`<s:property>`）..？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:14:05.100

```
<s:iterator value="yourList" status="status">
 <s:textfield name="col1" value="%{prop1}" id="col1-%{#status.count}/>
 <s:textfield name="col2" value="%{prop2}" id="col2-%{#status.count}/>
 <s:textfield name="col3" value="%{prop3}" id="col3-%{#status.count}/>
 <s:textfield name="col4" value="%{prop4}" id="col4-%{#status.count}/>
 <s:textfield name="col5" value="%{prop5}" id="col5-%{#status.count}/>
 <s:textfield name="col6" value="%{prop6}" id="col6-%{#status.count}/>
 <s:textfield name="col7" value="%{prop7}" id="col7-%{#status.count}/>
 <s:textfield name="col8" value="%{prop8}" id="col8-%{#status.count}/>
 <s:textfield name="col9" value="%{prop9}" id="col9-%{#status.count}/>
 <s:textfield name="col10" value="%{prop10}" id="col10-%{#status.count}/>
 <br/>
</s:iterator> 
```

虽然，我认为这是一个糟糕的设计。尝试使用[dataTable](http://datatables.net/)甚至是一个简单的表格。

# liferay - 如何在单个 JSP 中使用两个（多个）Liferay UI Search Container 标签

> ID：11522824
> 
> 赞同：5
> 
> 时间：2012-07-17T12:49:38.807
> 
> 标签：liferay, liferay-6

我需要`<liferay-ui:search-container>`在一个 JSP 中使用两个不同的标签。

`<liferay-ui:search-container>`如果我们使用两个标签，分页就会出现问题：

1.  当我点击第一个`<liferay-ui:search-container>`标签的第三页时，第二个`<liferay-ui:search-container>`标签也移动到第三页。

2.  此外，如果对于第一个`<liferay-ui:search-container>`标签，我在第 3 页并且我单击第二个标签的第 2 页，`<liferay-ui:search-container>`则第二个标签转到第 2 页，但第一个标签结果重置为第 1 页。

它们应该相互独立。

环境：Liferay 6.+

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T12:49:38.807

我发现了两种不同的方法来做到这一点：

1.  这可以通过**`curParam`**在标签中使用属性来实现`<liferay-ui:search-container>`，注意到下面的代码中的`curParam="folderCurParam"`和`curParam="fileCurParam"`，我通过liferay的源代码发现了这种`docroot/html/portlet/document_library_display/view.jsp`方式`docroot/html/portlet/document_library_display/view_file_entries.jspf`：

    ```
    <liferay-ui:search-container
            curParam="folderCurParam"
            emptyResultsMessage="no-folders-to-display"  
            iteratorURL="<%= portletURL %>"
            delta="10">

        <liferay-ui:search-container-results
                results="<%=folderResults %>"
                total="<%= folderTotal %>" />

        <liferay-ui:search-container-row
                className="com.liferay.portal.kernel.repository.model.Folder"
                keyProperty="userId"
                modelVar="folder">

            <liferay-ui:search-container-column-jsp align="left"
                    path="/html/documentdisplay/folder_search_results.jsp" />

        </liferay-ui:search-container-row>

        <liferay-ui:search-iterator />

    </liferay-ui:search-container>

    <liferay-ui:search-container
            curParam="fileCurParam"
            emptyResultsMessage="no-files-to-display" 
            iteratorURL="<%= portletURL %>"
            delta="10">
        <liferay-ui:search-container-results
                results="<%=fileResults %>"
                total="<%= fileTotal %>" />

        <liferay-ui:search-container-row
                className="com.liferay.portal.kernel.repository.model.FileEntry"
                keyProperty="userId"
                modelVar="fileEntry">

            <liferay-ui:search-container-column-jsp align="left"
                    path="/html/documentdisplay/files_search_results.jsp" />

        </liferay-ui:search-container-row>

        <liferay-ui:search-iterator />

    </liferay-ui:search-container> 
    ```

2.  我在liferay的源代码中再次找到了这个`docroot/html/portlet/journal/select_document_library.jsp`，它使用**[`SearchContainer`构造函数](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/kernel/dao/search/SearchContainer.html#SearchContainer%28javax.portlet.PortletRequest,%20com.liferay.portal.kernel.dao.search.DisplayTerms,%20com.liferay.portal.kernel.dao.search.DisplayTerms,%20java.lang.String,%20int,%20javax.portlet.PortletURL,%20java.util.List,%20java.lang.String%29)**来设置`curParam`，注意`"cur1"`文件夹和文件的参数是`"cur2"`：

    ```
    // for folders
    SearchContainer searchContainer = new SearchContainer(renderRequest, null, null, "cur1", SearchContainer.DEFAULT_DELTA, portletURL, headerNames, "there-are-no-folders");

    // for files
    searchContainer = new SearchContainer(renderRequest, null, null, "cur2", SearchContainer.DEFAULT_DELTA, portletURL, headerNames, "there-are-no-documents-in-this-folder"); 
    ```

希望这可以帮助某人。

# ruby-on-rails - 根据新的数据库更改更新模型

> ID：11522830
> 
> 赞同：0
> 
> 时间：2012-07-17T12:49:51.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我使用生成脚手架用户命令行创建了一个模型“用户”。接下来，我使用 generate migration 命令行对数据库进行了一些更改，然后使用 rake db:migration 更新了数据库。现在我想让我的模型自动与数据库字段同步。是否可以通过命令行，如果可以，如何？如果没有，还有什么其他选择。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:03:09.537

如果您没有在模型中指定 attr_accessible，您的应用程序会自动找到数据库中的更改。它发出 SQL 请求以查看表中的所有字段。它更慢但更简单。

# algorithm - 确定是否可以使用贪心算法最优地给出解决方案

> ID：11522834
> 
> 赞同：11
> 
> 时间：2012-07-17T12:50:04.523
> 
> 标签：algorithm, greedy

大多数时候，令人困惑的事实是是采用详尽的搜索（动态编程或回溯或蛮力）来解决问题还是采用贪婪的方法。

我不是在谈论使用贪心算法来确定可能的最佳解决方案，而是在谈论使用贪心算法来找到“解决方案”。我正在尝试获得一些标准方法来验证问题是否可以通过贪婪的方法解决。像最优子结构，动态规划的记忆。并且不涉及任何具体问题。

是否有任何归纳证明我可以确定贪婪方法是否总是能产生最佳解决方案？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T23:25:09.470

## 一般来说

为了证明一个优化问题可以使用贪心算法来解决，我们需要证明这个问题有以下几点：

*   **最优子结构性质**：最优全局解包含其所有子问题的最优解。

*   **贪婪选择属性**：通过贪婪地选择*局部*最优选择可以获得*全局最优解。*

 ** * *

## 例子

> 让我们考虑经典的**活动选择问题**。我们有一组*N*个活动，每个活动都有一个开始时间*和*`s[i]`一个结束时间`e[i]`。我们想选择 S 的一个子集，使得选择**最大化非重叠事件的数量**。

[这个问题可以使用贪心算法来解决](https://stackoverflow.com/a/11478733/1146303)，但是我们如何**证明**呢？

我们需要展示它的展品：

*   **最优子结构**

考虑包含在全局最优解 中的一般活动*a*`S = {A', a, A''}`，其中`S`是全局最优解，*a*是我们的小活动，并且`A'`和是查找 a*之前*和*之后*`A''`的活动的两个子问题。

 **如果问题具有最优子结构性质，则子问题**的****最优解必须包含在全局最优解中`A'``A''``S`**。

这是真的，但为什么呢？

假设子问题的最优解`A'`不在`S`. 然后我们可以用最优值代替`A'`，例如`S'`，`A`以获得优于 的新全局最优解`S`。而是`S`全局最优解！矛盾。

*   **贪婪的选择**：

我们需要证明我们的贪心选择（选择最先结束的活动）是正确的。

让`B`成为一个子问题。设*b*是首先结束的子问题的活动`B`，因此*b*是我们的（第一个）贪婪选择。**我们需要证明*b*包含在 的某个最优解中`B`**。

令`X`为子问题的最优解`B`。让*x*成为`X`最先结束的活动。

1.  如果*b* = *x*，则*b*位于`X`的最优解中`B`，并且我们已经证明贪婪选择包含在最优解中。

2.  如果*b* != *x*，我们肯定有那个`end_time[b] < end_time[x]`。

    由于*b*是我们的贪心选择（即首先在子问题 中结束的活动`B`），那么我们可以`x`用*b*代替`X`以获得另一个最优解：`X' = (X \ {x}) U {b}`。`X'`是最优的，因为它具有相同数量的活动`X`，并且`X`是最优的，在这种情况下，*b*是`X'`的最优解`B`。

因此，我们的贪婪选择`b`包含在某种最佳解决方案`B`中。

* * *

## 拟阵

此外，还有一个强大的数学理论，**在某些情况下**可以用来机械地证明一个特定的问题可以用贪婪的方法来解决。

简要地：

*   可以定义一个名为**matroid**的特定组合结构。

*   一些聪明人在过去证明了这些**拟阵具有最优子结构性质和贪婪选择性质**。

*   这意味着您可以对优化问题运行贪心算法，它会找到最佳解决方案。您只需要**验证您的问题是否定义在类似拟阵的结构上**。

可以在[此处](http://math.fau.edu/locke/Greedy.htm)找到有关此的更多信息。***

# jquery - 使用 jquery 延迟的雪球数据

> ID：11522836
> 
> 赞同：0
> 
> 时间：2012-07-17T12:50:11.357
> 
> 标签：jquery, ajax

我想知道这样做最好的方法是什么：

我有两个 ajax 请求，第二个请求需要第一个请求的结果。

我试图找到一种将两个结果都放入`doSomethingWithBothResults`函数的好方法。

```
var getValue1 = function(){ return $.getJSON('/getVal1'); }
var getValue2 = function(result){ return $.getJSON('/getVal2'+ result.data); }
var doSomethingWithBothResults = function(result1, result2) { alert('r1:' + result1.data +   'r2:' + result2.data); }; 

getValue1.pipe(getValue2).then(doSomethingWithBothResults); 
```

所以很明显我只能从第二次调用中得到结果`doSomethingWithBothResults`。有没有办法很好地重写这个以获得两个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T13:20:10.870

下面的代码显示了如何使用*第三个*延迟对象，该对象仅`resolved`在两个查询都完成后才会传递给*两个*.

```
var d = $.Deferred();

$.ajax(...).done(function(data1) {
    // use data1 to initiate the second request
    ...

    $.ajax(...).done(function(data2) {
        d.resolve(data1, data2);
    }).fail(d.reject);

}).fail(d.reject);

d.done(function(data1, data2) {
    // do something with both
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T12:52:22.370

只需将第二个函数定义为第`success`一个函数[`.getJSON`](http://api.jquery.com/jQuery.getJSON/)。

但是，将所有这些数据放在服务器上的单个文件中不是更简单吗？更少的调用意味着更快和更干净的代码（通常）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:01:39.380

**编辑：**

试试这个小提琴。[http://jsfiddle.net/ztH6L/1/](http://jsfiddle.net/ztH6L/1/)

```
var chain = function (opt1, opt2, cb) {
    var r1, r2;
    $.ajax(opt1)
        .done(function (r) { r1 = r;  })
        .pipe(function (r) { opt2.data = {json: JSON.stringify({"v": r})}; return $.ajax(opt2);})
        .done(function (r) { r2 = r;})
        .pipe(function() {cb(r1, r2);});
};

var opt1 = {
    url: '/echo/json/',
    data: {json: JSON.stringify({"v": 1})},
    dataType: 'json',
    type: 'POST'
};

var opt2 = {
    url: '/echo/json/',
    dataType: 'json',
    type: 'POST'
};

chain(opt1, opt2, function(r1, r2) {console.log(r1); console.log(r2);}); 
```

很抱歉弄错了要求，猜测没有正确阅读。

顺便说一句，我更喜欢@Alnitak 的回答，虽然我的也可以:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T12:52:10.630

您也应该将功能放在发布 ajax 调用的控制器中。这是一种更清洁的方式，也是更好的做法。

# ehcache - Ehcache 可以与 SoftValue 或其他基于内存的过期一起使用吗？

> ID：11522837
> 
> 赞同：1
> 
> 时间：2012-07-17T12:50:13.697
> 
> 标签：ehcache

我将 ehcache 用于大量查询繁重的操作，例如，来自数据库的不同数据页面是从不同的查询值存储的。我很担心，因为 maxElements 驱逐似乎对此毫无用处，因为缓存值可能具有完全不同的内存大小，具体取决于查询返回的对象的大小。

我喜欢 softValue 过期缓存的想法，只要内存可用，值就会保存在内存中，否则会被定罪，但我不确定 EhCache 是否提供此功能。但我无法想象这是一个独特的用例，那么我应该看看其他配置吗？

我知道 Guava 提供软值过期缓存，但我不打算切换缓存库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T18:17:22.360

使用 Ehcache，您可以配置缓存可以在本地堆内存中使用多少字节 ( `maxBytesLocalHeap`)。查看官方文档[“如何调整缓存大小”](http://ehcache.org/documentation/configuration/cache-size)。

# matlab - 如何从matlab中删除立方体中的对角线？

> ID：11522838
> 
> 赞同：1
> 
> 时间：2012-07-17T12:50:18.313
> 
> 标签：matlab, cube

我在scatter3图中画了一个立方体，很意外，立方体中有一条对角线，有什么办法可以去掉吗？

绘制立方体的代码如下：

```
vertices = [ ...
-600 -300 -100;
-100 -300 -100;
-100 200 -100;
-600 200 -100;
-600 -300 400;
-100 -300 400;
-100 200 400;
-600 200 400;
];

faces = [ ...
1 2 6 5;
2 3 7 8;
3 4 8 7;
4 1 5 8;
1 2 3 4;
5 6 7 8];

patch('Vertices',vertices,'Faces',faces,'FaceAlpha',0) 
```

![在此处输入图像描述](../Images/043e3e88db55614d5b6ddc423ad0302b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:13:25.720

矩阵中的第二行`faces`应为

```
2 3 7 6; 
```

# fiddler - 提琴手铅笔图标的含义

> ID：11522841
> 
> 赞同：2
> 
> 时间：2012-07-17T12:50:25.927
> 
> 标签：fiddler

Fiddler 的网络会话中请求旁边的以下图标是什么意思（看起来像铅笔在纸上书写）？

![http://i.imgur.com/ecT5h.jpg](../Images/a735ec59e491a63d824af7ef368939d5.png)

它没有在[快速参考](http://www.fiddler2.com/fiddler/help/ui.asp)中列出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:10:16.950

找到答案：

按下`F2`时，当前突出显示的会话变为可编辑，并且图标变为上图。再次按下`F2`将恢复到以前的状态。（通过右键单击 -> Unlock For Editing 达到相同的效果）

# mks - 删除相关开发路径后，如何在 MKS 中删除变体沙箱

> ID：11522844
> 
> 赞同：2
> 
> 时间：2012-07-17T12:50:34.080
> 
> 标签：mks, mks-integrity

我在 MKS 中删除了一个开发路径，现在我想删除/删除我为它创建的沙箱。在 UI 中，如果不先打开沙箱，我就无法放下沙箱，但是一旦删除了他们的开发路径，我就无法打开变体沙箱。在命令行界面“si dropsandbox”也报错与dev路径的存在有关。还有其他建议吗？

更新：这是我尝试打开沙箱时遇到的错误：

> MKS125319：对于子项目 proj1/proj1.pj，无法访问开发路径 proj1_experimental 上的变体子项目，因为它不是当前项目配置的一部分，并且不符合从指定配置访问的条件：MKS125226：开发路径 proj1_experimental 不存在在指定的项目中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T08:21:03.623

删除沙箱的关键是将删除选项设置为“无”。这将阻止 MKS 客户端在服务器上进行任何项目查找。

您可以通过右键单击“我的沙盒”窗口或从命令行从图形客户端中删除：

```
si dropsandbox --delete=none c:\mysandbox\project.pj 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T17:49:02.963

其他选项是直接使用 Windows 资源管理器删除沙箱，而不是 MKS GUI。重要的是删除 .pj 文件，然后 MKS 在其 GUI 中将完全忽略沙箱。

# drupal - 将 phpBB3 用户迁移到 Drupal 7

> ID：11522847
> 
> 赞同：2
> 
> 时间：2012-07-17T12:50:53.003
> 
> 标签：drupal, drupal-7, migration, phpbb, phpbb3

我需要将 phpBB3 用户迁移到 Drupal 7。用户必须能够在 Drupal 中使用他们的 phpBB 用户名/密码组合进行身份验证。

有没有办法将密码“翻译”为 Drupal 7 格式？

我可以访问服务器和数据库。对于导入 Drupal，我目前正在使用 Feeds 模块（CSV 导入），但如果需要，我会考虑使用另一种方法/模块。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T19:48:29.100

自己使用后，我总是推荐[gConverter](http://gconverter.com/)。
这听起来不合理，但他们有很大的支持，它并不昂贵（我不希望他们改变价格，所以我不说它实际上很便宜......），而且它确实有效！

# ruby - 通过执行 API 调用从 aws 获取保留的 DB RDS 实例列表

> ID：11522853
> 
> 赞同：1
> 
> 时间：2012-07-17T12:51:28.797
> 
> 标签：ruby, api, amazon-web-services, cloud, fog

我试图使用存在的 ruby​​ 库从 RDS amazon Web 服务部分获取保留的数据库实例列表并返回此数据，主要是使用雾库。我注意到虽然他们没有返回这些数据，但很遗憾，因此我继续进行调查。

我发现当使用签名版本 4 时，正在返回此数据，在使用 rds cli（AWS 提供的工具）时发现它，而雾库使用签名版本 2 来发出请求。这导致我开始开发一个简单的解决方案，该解决方案将使用 ruby​​ 脚本返回 RDS 保留实例，但由于文档数量很少，我目前被困在这里。此时解决方法是调用 rds cli 脚本，但这是一个不好的选择。

还花了一些时间在谷歌上搜索该案例的现成解决方案（可以是任何语言），但找不到任何解决方案。因此，问题是，是否有人有一个现成的解决方案，最好用 ruby​​ 编写，使用签名版本 4 对 AWS 进行 API 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:23:30.240

一段时间后，我们设法构建了一个具有所有需要功能的类，该类将使用签名版本 4 返回为 aws 保留的 rds 实例以对请求进行签名。这是代码：

```
#!/usr/local/bin/ruby

require 'rubygems'
require 'net/http'
require 'net/https'
require 'time'
require 'hmac'
require 'hmac-sha2'
require 'base64'
require 'cgi'

class AWSGetSignatureV4
 def initialize(aws_key,aws_secretpwd)
  @regions=['ap-northeast-1', 'ap-southeast-1', 'eu-west-1', 'us-east-1', 'us-west-1', 'us-west-2', 'sa-east-1']
  @rds_list={}
  @inst_list={}
  @rds_reserves={}
  @inst_reserves={}
  @aws_key=aws_key
  @aws_secret=aws_secretpwd
  @canonical_uri="/\n"
  @request_type="GET\n"
  @request_version='2012-04-23'
  @request_headers={
   'Host' => ''
  }
 end

 def form_request(requestname, zone)
  canonical_request_full(requestname, zone)
  form_string_to_sign(zone)
  form_signature(requestname, zone)
  form_request_url(requestname, zone)
 end

 def get_data(requestname, zone)
  form_request(requestname, zone)
  http = Net::HTTP.new(@https_addr, "443")
  http.use_ssl = true
  headers = { 'Host' => "#{@https_addr}" }
  @request_data=""
  retval = http.get(@url_to_use, headers) do |chunk|
   @request_data+=chunk
  end
  puts(retval.code)
  puts(@request_data)
 end

 def get_service_type(requestname)
  if requestname == 'DescribeReservedDBInstances'
   @service_type="rds"
  else
   raise "No such request type."
  end
 end

 def form_time_values()
  @timenowz=Time.now.utc.iso8601
  @time_use_now=@timenowz.gsub(/-|:/, '')
  @date_to_use=@time_use_now.gsub(/T.*$/,'')
 end

 def init_param_values(requestname)
  @init_params = {
   'Action' => requestname,
   'Version' => @request_version
  }
 end

 def other_param_values(zone)
  @other_params = {
   'X-Amz-Algorithm' => 'AWS4-HMAC-SHA256',
   'X-Amz-Credential' => @aws_key+"/#{@date_to_use}/#{zone}/#{@service_type}/aws4_request",
   'X-Amz-Date' => @time_use_now,
   'X-Amz-SignedHeaders' => 'Host'
  }
 end

 def form_canonical_query_string(requestname, zone)
  @querystringz = @init_params.sort.collect { |key, value| [CGI.escape(key.to_s), CGI.escape(value.to_s)].join('=') }.join('&')+"&"+@other_params.sort.collect { |key, value| [CGI.escape(key.to_s), CGI.escape(value.to_s)].join('=') }.join('&')
 end

 def modify_request_headers(requestname, zone)
  @request_headers['Host']="#{@service_type}.#{zone}.amazonaws.com"
 end

 def form_headers()
  @queryheaderz = "host:#{@request_headers['Host']}"
  @signed_headerz =@request_headers.sort.collect { |key, value| key.to_s.downcase }.join(';')
  @canonical_headerz =@request_headers.sort.collect { |key, value| [CGI.escape(key.to_s.downcase), CGI.escape(value.to_s)].join(':') }.join("\n")
 end

 def form_payload_data()
  @payload=@init_params.sort.collect { |key, value| [CGI.escape(key.to_s), CGI.escape(value.to_s)].join('=') }.join('&')
  @hex_sign_string=Digest::SHA256.digest("").unpack('H*').first
  if @request_type == "GET\n"
   @hex_sign_string=Digest::SHA256.digest("").unpack('H*').first
  elsif @request_type == "POST\n"
   @hex_sign_string=Digest::SHA256.digest(@payload).unpack('H*').first
  end
 end

 def canonical_request_full(requestname, zone)
  form_time_values()
  get_service_type(requestname)
  init_param_values(requestname)
  other_param_values(zone)
  modify_request_headers(requestname, zone)
  form_canonical_query_string(requestname, zone)
  form_headers()
  form_payload_data()
  @canonical_request=@request_type+@canonical_uri+@querystringz+"\n"+@canonical_headerz+"\n\n"+@signed_headerz+"\n"+@hex_sign_string
 end

 def form_string_to_sign(zone)
  hex_sign_sts=Digest::SHA256.digest(@canonical_request).unpack('H*').first
  @string_to_sign="#{@other_params['X-Amz-Algorithm']}\n#{@other_params['X-Amz-Date']}\n#{@date_to_use}/#{zone}/#{@service_type}/aws4_request\n#{hex_sign_sts}"
 end

 def form_signature(requestname, zone)
  @kdatez    = OpenSSL::HMAC.digest('sha256', "AWS4" + @aws_secret, @date_to_use)
  @kregionz  = OpenSSL::HMAC.digest('sha256', @kdatez, zone)
  @kservicez = OpenSSL::HMAC.digest('sha256', @kregionz, "#{@service_type}")
  @ksigningz = OpenSSL::HMAC.digest('sha256', @kservicez, "aws4_request")
  @signaturez = OpenSSL::HMAC.digest('sha256', @ksigningz, @string_to_sign)
  @other_params['X-Amz-Signature']=@signaturez.unpack('H*').first
 end

 def form_request_url(requestname, zone)
  @url_to_use = @init_params.sort.collect { |key, value| [CGI.escape(key.to_s), CGI.escape(value.to_s)].join('=') }.join('&')+"&"+@other_params.sort.collect { |key, value| [CGI.escape(key.to_s), CGI.escape(value.to_s)].join('=') }.join('&')
  if requestname == 'DescribeReservedDBInstances'
   @url_to_use="/?"+@url_to_use
   @https_addr="#{@service_type}.#{zone}.amazonaws.com"
   @url_to_use_full="https://#{@service_type}.#{zone}.amazonaws.com/?"+@url_to_use
  end
 end

end

billing_obj=AWSGetSignatureV4.new("AWS_KEY","AWS_SECRET")
billing_obj.get_data("DescribeReservedDBInstances", 'us-east-1') 
```

# asp.net - 使用 linq 拆分文本文件并存储到数据表中

> ID：11522857
> 
> 赞同：0
> 
> 时间：2012-07-17T12:51:37.277
> 
> 标签：asp.net

我的要求是我需要拆分一个文本文件并存储到一个数据表中。请参阅以下代码和列分隔符“|” 和行分隔符“^”：

```
var text = streamReader.ReadToEnd();
var lines = text.Split('^');
var rows = lines.Select(l => new {Line = l, Fields = l.Split('|')});
var colCount = rows.Max(r => r.Fields.Length);

var tblRegistration = new DataTable();
for (int i = 1; i <= colCount; i++)
{
    tblRegistration.Columns.Add("Column" + i, typeof (string));
} 
```

如果格式正确，它将正常工作。

但最终用户可能会上传文本文件，如

```
adfafdsafsdfsdfs^fsdf|sfsdf|sdfsfd|dfs...
```

第一行只有一列，但应该有四列。在这种情况下如何验证呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T12:55:19.437

听起来你可能应该有类似的东西：

```
// Call ToList to avoid splitting every time you access
var rows = lines.Select(l => new {Line = l, Fields = l.Split('|')}).ToList();

var expectedColumns = rows[0].Fields.Length;
if (rows.Any(row => row.Fields.Length != expectedColumns))
{
    // There's a broken row. Throw an exception or whatever...
} 
```

当然，这是假设*所有*行都应该具有相同数量的字段。

如果要显示断行，可以将其更改为：

```
var firstBadRow = rows.FirstOrDefault(row => row.Fields.Length != expectedColumns));
if (firstBadRow != null)
{
    // Handle it however you want...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:05:41.330

如果您想要的结果是从左到右填充每一列，这很容易：

```
foreach (var row in rows)
{
    var newRow = tblRegistration.Rows.Add();
    newRow.ItemArray = row.Fields;
} 
```

所以你的示例文件会生成这个`DataTable`：

```
Column1            Column2   Column3    Column4
adfafdsafsdfsdfs            
fsdf               sfsdf     sdfsfd     dfs 
```

如果要抛出异常：

```
foreach (var row in rows)
{
    if(row.Fields.Length != tblRegistration.Columns.Count)
        throw new Exception("Please upload the correct format");

    var newRow = tblRegistration.Rows.Add();
    newRow.ItemArray = row.Fields;
} 
```

# c++ - 使用犰狳进行插值

> ID：11522858
> 
> 赞同：5
> 
> 时间：2012-07-17T12:51:38.090
> 
> 标签：c++, interpolation, armadillo

所以看起来犰狳没有任何插值能力（至少我在文档中找不到它的参考）。我想知道是否有人对如何使用rowvec作为输入和输出最好地实现样条和线性插值有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:44:12.217

由于您已经拥有插值算法的源代码，因此可以想到三种可能的选择：

1.  重构代码以直接使用 Armadillo 类（例如矩阵和向量）而不是其自己的数组。

2.  按原样使用代码，然后设置 Armadillo 矩阵或向量类的实例以使用插值算法生成的数组的内存。请参阅高级[Mat 构造函数](http://arma.sourceforge.net/docs.html#adv_constructors_mat)的文档。

3.  使用 Armadillo 分配的内存/数组稍微修改现有代码。指向犰狳矩阵和向量使用的内存的指针可以通过[.memptr()](http://arma.sourceforge.net/docs.html#memptr)函数轻松获得。

选择 3 可能是与现有代码交互的最简单方法。

# zend-framework - 在 Zend 框架中使用 RAND()

> ID：11522861
> 
> 赞同：1
> 
> 时间：2012-07-17T12:51:42.643
> 
> 标签：zend-framework, frameworks, random

我的客户网站使用 Zendframework。现在他们让我随机选择结果。我使用 RAND() 但不工作。有人可以帮忙吗？

这是代码（底部的 RAND() ）

```
$oPlaceSelect = $oPlaces->select()->setIntegrityCheck(false)
 ->from(array('p' => 'places'),
 array('id', 'place_title' => 'title', 'alias', 'categories_id',                
 => '(SELECT path FROM places_images WHERE places_images.places_id = p.id group by places_id)'))
->order('RAND()'); 
```

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T12:59:28.970

要在 Zend Select 对象中使用 mysql 函数，您需要使用 'Zend_Db_Expr'

```
->order(new Zend_Db_Expr("RAND()")); 
```

# c++ - 错误：'operator<<' 的重载不明确

> ID：11522865
> 
> 赞同：2
> 
> 时间：2012-07-17T12:51:57.143
> 
> 标签：c++, operator-overloading

尝试构建项目时出现此错误：

```
Angle.cpp:466: error: ambiguous overload for 'operator<<' in '(+out)-
>std::basic_ostream<_Elem, _Traits>::operator<< [with _Elem = char, 
_Traits = std::char_traits<char>](((const Angle*)this)->Angle::getDegrees())
<< "\37777777660"' 
```

我已经对其进行了一些研究，看起来我有一个错误的方法头，但我是 cpp 的新手，不知道如何解决这个错误。

这是.h：

```
#include "OutputOps.h"
// End user added include file section

#include <vxWorks.h>
#include <ostream>
class Angle {

public:
// Default constructor/destructor
~Angle();

// User-defined methods
//
// Default Constructor sets Angle to 0.
Angle();
...
// Returns the value of this Angle in degrees.
double getDegrees() const;
....
// Prints the angle to the output stream as "x°" in degrees
void output(std::ostream& out) const;

...
private:
...
double radians;
static const double DEGREES_PER_RADIAN /* = 180.0 / PI */;    
};

#endif // ANGLE_H 
```

这是方法：

```
#include "MathUtility.h"
#include <cmath>
// End user added include file section

#ifndef Angle_H
#include "Angle.h"
#endif

//
// Prints the angle to the output stream as "x°" in degrees
void Angle::output(std::ostream& out) const
{
    out << getDegrees() << "°";
}
//
// Returns the value of this Angle in degrees.
double Angle::getDegrees() const
{
return radians * DEGREES_PER_RADIAN;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:12:42.010

我的猜测是问题出在度数符号上，它不是 ascii 字符。

请尝试：

```
wcout <<  getDegrees() << L"\u00B0"; 
```

# google-app-engine - Google-app-engine 服务器：工作代码出现错误 500 - 部署问题。Java 代码

> ID：11522871
> 
> 赞同：3
> 
> 时间：2012-07-17T12:52:09.353
> 
> 标签：google-app-engine, jsf, jakarta-ee, primefaces, webserver

我有这个网站，一个随机的小网站，我只是在玩 jsf 和 primefaces。

我有自己的域连接到它，并将其托管在 google-app-engine...

到目前为止，它一直是一种魅力。由于假期，我没有在网站上做任何事情，突然网站关闭了？我上次部署时它正在工作，现在当我访问我的站点时，我得到了这个：

错误：服务器错误

服务器遇到错误，无法完成您的请求。如果问题仍然存在，请报告您的问题并提及此错误消息和导致它的查询。

*   它完全没有告诉我，在检查它在本地运行是否正常后，我尝试重新部署我的应用程序。前几次它一直在等待验证。所以我停止了它，这使我学习了如何进行回滚，因为在我第一次停止它后我无法使用相同的版本号重新部署。

我修复了回滚，现在我将我知道的工作代码部署到应用程序引擎，但仍然在导航到我的网站时出现上述错误？:S

我在这里完全一无所知，因为错误并没有真正给我任何东西：S

任何人都有任何想法，如有必要，我可以发布代码等，但有些东西告诉我，看到我的代码在本地运行，并且运行良好：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:09:49.233

You can find the log file for your web application at

[https://appengine.google.com/logs?&app_id=yourappname](https://appengine.google.com/logs?&app_id=yourappname)

or on the Dashboard page in the list on the left side.

* * *

If you deploy a new version, also re-start the browser to clear old session data. (Maybe you still get the 500 error still because of old session data).

# nginx - Nginx MP4-pseudo-streaming + proxy_cache

> ID：11522881
> 
> 赞同：1
> 
> 时间：2012-07-17T12:52:38.127
> 
> 标签：nginx, streaming, mp4, reverse-proxy

我很难让 Nginx 的 MP4 模块的伪流与代理缓存模块一起工作。

我的站点配置中有以下内容：

```
location ~* ^/stream/(\w+)/(\w+).mp4 {

    mp4;
    mp4_buffer_size     1m;
    mp4_max_buffer_size 15m;

    add_header X-Location "$1.$2";

    proxy_cache             cache-key-1;
    proxy_cache_valid       200     1d;
    proxy_cache_key         $2;
    proxy_pass              http://$1.servers.com/storage/$2.mp4;
    break;
} 
```

伪流和代理可以一起工作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:19:52.267

> 伪流和代理可以一起工作吗？

mp4 模块仅适用于本地文件。您应该在后端服务器上进行流式传输。

# asp.net - 带有大数据的 ASP.Net Web API 调用

> ID：11522883
> 
> 赞同：2
> 
> 时间：2012-07-17T12:52:39.500
> 
> 标签：asp.net, iis-7, compression

我们有一个 API 调用，其中在请求中发送了大量数据（平均 16 MB）。请求数据每次都不一样，所以缓存现在很好。由于我们接收数据的客户可能使用其他技术，例如 PHP，因此这些技术的默认大小是不同的。

由于数据大小超过了默认数量（PHP 8MB），我们正在考虑尽可能使用压缩。

这可以做到吗？

从最初的研究（可能不正确）开始，压缩被用于 IIS 使用缓存的网站内容，所以不确定我们的问题是否可以使用压缩来解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T12:59:54.217

您可以使用[动态内容压缩](http://technet.microsoft.com/en-us/library/cc753681%28WS.10%29.aspx)。

压缩与 IIS 上的缓存无关。

虽然这会减小大小，但取决于您的数据（可能是图像或视频），它可能不会将其压缩到 8MB 以下。您应该考虑允许您的客户以块的形式请求数据。

[在 IIS 上启用块传输编码](http://support.microsoft.com/kb/278998)。

您的 php 客户端可以使用支持块编码（如[guzzle）的客户端接收此数据](http://guzzlephp.org/tour/http.html#entity-bodies)

> 请求和响应的实体主体本质上是 Guzzle 中的 PHP 流。请求的主体可以是字符串或 PHP 流，它们使用其工厂方法转换为 Guzzle\Http\EntityBody 对象。使用字符串时，实体主体存储在临时 PHP 流中。使用临时 PHP 流有助于保护您的应用程序在发送或接收消息中的大型实体主体时不会耗尽内存

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:05:54.790

默认为 4MB，增加：

```
<configuration>
    <system.web>
        <httpRuntime maxRequestLength="1048576" />
    </system.web>
</configuration>

 <!--IIS 7-->
 <system.webServer>
   <security>
      <requestFiltering>
         <requestLimits maxAllowedContentLength="1048576" />
      </requestFiltering>
   </security>
 </system.webServer> 
```

# magento - 将新块插入 product.info 不起作用

> ID：11522885
> 
> 赞同：2
> 
> 时间：2012-07-17T12:52:43.227
> 
> 标签：magento, block

我创建了两个新块，应该在这个块之前和之后输出：

```
<block type="catalog/product_view" name="product.info.addtocart" as="addtocart" template="catalog/product/view/addtocart.phtml"/> 
```

为此，我创建了一个新模块，用于更新布局。在引用的 XML 文件中表示：

```
<catalog_product_view>
  <reference name="product.info">
    <block type="disablecartonlogout/output" name="disablecartonlogout.outputbefore" as="whatever" before="product.info.addtocart" template="disablecartonlogout/product-options-bottom-before.phtml" />
    <block type="disablecartonlogout/output" name="disablecartonlogout.outputafter" as="whatever" after="product.info.addtocart" template="disablecartonlogout/product-options-bottom-after.phtml" />
  </reference>
</catalog_product_view> 
```

我没有输出。如果我更改对“内容”的引用，块将被输出，但位置错误。

你能告诉我，我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T14:21:31.240

您需要在您想要的位置显式调用`product.info`块模板（应该是`catalog/product/view.phtml`）中的块。

您要使用的方法仅适用于某些特定块（通常，`core/text_list`或`core/template`进行空调`getChildHtml()`用，情况并非如此`product.info`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T15:04:32.927

```
<catalog_product_view>
    <reference name="product.info.addtocart">
        <block type="disablecartonlogout/output" name="disablecartonlogout.outputbefore" as="whatever1" before="-" template="disablecartonlogout/product-options-bottom-before.phtml" />
        <block type="disablecartonlogout/output" name="disablecartonlogout.outputafter" as="whatever2" after="-" template="disablecartonlogout/product-options-bottom-after.phtml" />
    </reference>
</catalog_product_view> 
```

然后转到：

`app\design\frontend\default\themeName\template\catalog\product\view\addtocart.phtml`

并添加

```
$this->getChildHtml('whatever1', true, true);
$this->getChildHtml('whatever2', true, true); 
```

试试这个，因为它可以帮助你。我尝试过这样的事情

# android - TextWatcher 工作到很晚

> ID：11522887
> 
> 赞同：1
> 
> 时间：2012-07-17T12:52:46.520
> 
> 标签：android, textwatcher

在我按下退格键之后，我的 textwatcher 正在工作，然后该建议出现了。我有一个文本观察器，可以从网络生成书籍列表。我也等着看它是否是一个净问题。但我发现不是因为那个，当我按退格键时它开始顺利工作。请帮忙

```
textWatcher = new TextWatcher() 
    {
        public void afterTextChanged(Editable s) 
        {
             chars = s;
             currentSearch = s;
             startSuggestionsThread(s); 
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before, int count){
        }
    }; 
```

我开始建议线程我正在做 textview.setAdapter(adapter)。但它需要很多时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:57:25.233

也许您正在**TextWatcher**`afterTextChanged`的方法中使用您的逻辑。将您的代码移动到以便在**EditText中更改文本之前运行您的代码****`beforeTextChanged`**

# javascript - 将 div 定位在窗口中心（垂直）

> ID：11522894
> 
> 赞同：0
> 
> 时间：2012-07-17T12:53:20.450
> 
> 标签：javascript, css

我正在使用此 CSS 将 div 水平和垂直放置到窗口，该窗口工作正常，直到您向下滚动页面，然后 div 保持在相同的居中位置，就好像页面没有滚动一样。

```
width:600px;
height:300px;
position:absolute;
left:50%;
top:50%;
margin:-150px 0 0 -300px;
z-index:99; 
```

这可以使用 CSS 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:53:59.403

那是因为你`position`是`absolute`！

您应该尝试`position: fixed;`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T12:58:50.890

看一眼：

[http://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=fixed](http://www.w3schools.com/cssref/playit.asp?filename=playcss_position&preval=fixed)

`position: fixed;`可能是你正在寻找的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T13:01:54.757

试试下面的 CSS：**position:fixed;**

# html - Firefox 无法正确呈现 HTML

> ID：11522907
> 
> 赞同：-1
> 
> 时间：2012-07-17T12:53:51.067
> 
> 标签：html, css, firefox

![在此处输入图像描述](../Images/ebc8972a2bfefeb158242c66e43da033.png)

图片显示了我的网站存在的问题区域。那条小黑线从我的下拉菜单后面伸出，在 Firefox 中，这个词`resources`会出现在下方`home`，但在 IE 和 Chrome 中，菜单看起来应该是这样，除了那条突出的小黑线。我使用的模板是修改后的 Dreamweaver 模板。它以前没有这样做，但我打破了它：/

编辑：全部固定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:04:59.720

你需要清除你的浮动。

如果您将`overflow: hidden`UL 和侧边栏 div 添加到顶部菜单，您会注意到 HR 向下移动。

**编辑**

仅供参考，可能有更好的方法来清除您的浮动，然后添加溢出：隐藏在任何地方，就像我在这个答案中显示的那样。这真的取决于你如何布置页面，我不知道你的计划是什么。因此，下面有一些链接解释什么是浮动，它们是如何工作的，以及如何清除它们，这应该会让你更好地理解。

[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)

# java - java.sql.SQLRecoverableException：没有更多数据可以从套接字读取

> ID：11522919
> 
> 赞同：1
> 
> 时间：2012-07-17T12:54:16.013
> 
> 标签：java, oracle, jdbc

我在 oracle 中有一个数据库表，其中有一列日期类型。如下表所示

表格1

```
ID   PRODUCT_NAME  ITEM_CNT  ENTERED_DATE 
1         prod1      500       2012-07-01
2         prod2      1000      2012-06-30 
```

在我的 java 代码中，我想获取某个日期范围的总 item_cnt。这是代码示例

```
String sql = "select sum(item_cnt) from table1 where entered_date between ? and ?";
Connection conn = null;
PreparedStatement pstmt = null;
ResultSet rset = null;

try{
   conn = getConnection(url, user, passwd);
   pstmt = conn.prepareStatement(sql);
   pstmt.setDate(1, java.sql.Date.valueOf(from_date)); //from_date is a string of "yyyy-mm-dd"
   pstmt.setDate(2, java.sql.Date.valueOf(to_date)); //to_date is a string of "yyyy-mm-dd"
   rset = pstmt.executeQuery();

   ....
}catch(SQLException e){
   //do something
} finally{
   //clean up
} 
```

这段代码运行良好一段时间，直到三天前，我开始在 pstmt.executeQuery(); 行收到以下异常；

```
 java.sql.SQLRecoverableException: No more data to read from socket
at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1157)
at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:290)
at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:192)
at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:531)
at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:207)
at oracle.jdbc.driver.T4CPreparedStatement.executeForDescribe(T4CPreparedStatement.java:884)
at oracle.jdbc.driver.OracleStatement.executeMaybeDescribe(OracleStatement.java:1167)
at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1289)
at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:3584)
at oracle.jdbc.driver.OraclePreparedStatement.executeQuery(OraclePreparedStatement.java:3628)
at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeQuery(OraclePreparedStatementWrapper.java:1493) 
```

我试图寻找答案，但找不到任何能真正解释它的东西。然后我将我的 sql 查询更改为

```
 "select sum(item_cnt) from table1 where entered_date between to_date(?, 'yyyy-mm-dd')  and to_date(?, 'yyyy-mm-dd')"; 
```

而不是设置日期，我将准备好的语句更改为以下

```
 pstmt.setString(1, from_date);
     pstmt.setString(2, to_date); 
```

然后异常消失了。

另一个困惑是，当我填充表格时，我仍在使用以下内容

```
 pstmt.setDate(1, java.sql.Date.valueOf(date)); //date is a string of format "yyyy-mm-dd" 
```

它仍在工作。只有 select 语句给了我例外。

现在一切正常，但我真的很想知道为什么。有谁知道？

我最近确实将我的 java 升级到了 1.7.0_03-b05。我正在使用ojdbc6.jar。预言机是 11g。会不会是司机的问题？ojdbc7 出来了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T08:50:36.083

我在使用 IBM WAS 7.0 处理 JDBC 时遇到了这个异常，我对数据源执行了 JCA 生命周期管理操作。这就像控制数据源的运行时状态。**清除**删除数据源的连接池的内容。但是，在 WAS 中，清除池不会影响正在进行的事务。检查在你身边。

我表演的另一件事是；安装 Oracle 的目录上的磁盘空间已满，我在上面添加了额外的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:02:04.433

作为最佳实践，我在使用 Oracle 处理 Java 中的日期时远离 java.sql.Date 类并使用 to_date() 和 to_char() 函数。

# ruby - 带有 double_bag_ftps 的 Ruby FTPS 错误

> ID：11522921
> 
> 赞同：2
> 
> 时间：2012-07-17T12:54:18.370
> 
> 标签：ruby, ssl, ftps

我正在尝试使用以下代码使用 Ruby gem double_bag_ftps 连接到 FTPS 服务器。

```
require 'double_bag_ftps'
ftps = DoubleBagFTPS.new
ftps.ssl_context = DoubleBagFTPS.create_ssl_context(:verify_mode => OpenSSL::SSL::VERIFY_NONE)
ftps.connect('xx.xx.xx.xx')
ftps.login('user', 'password')
files = ftps.nlst
puts files.length 
```

尝试连接时出现以下错误。

```
/home/indika/.rvm/gems/ruby-1.9.3-p0@global/gems/double-bag-ftps-0.1.0/lib/double_bag_ftps.rb:148:in `connect': Broken pipe - SSL_connect (Errno::EPIPE)
        from /home/msc22/.rvm/gems/ruby-1.9.3-p0@global/gems/double-bag-ftps-0.1.0/lib/double_bag_ftps.rb:148:in `ssl_socket'
        from /home/msc22/.rvm/gems/ruby-1.9.3-p0@global/gems/double-bag-ftps-0.1.0/lib/double_bag_ftps.rb:125:in `transfercmd'
        from /home/msc22/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/ftp.rb:478:in `block (2 levels) in retrlines'
        from /home/msc22/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/ftp.rb:178:in `with_binary'
        from /home/msc22/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/ftp.rb:477:in `block in retrlines'
        from /home/msc22/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
        from /home/msc22/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/ftp.rb:476:in `retrlines'
        from /home/msc22/.rvm/rubies/ruby-1.9.3-p0/lib/ruby/1.9.1/net/ftp.rb:703:in `nlst'
        from backup_collector.rb:8:in `<main>' 
```

非常感谢您对此的任何帮助。

# xml - XSLT 1.0 排序元素

> ID：11522925
> 
> 赞同：5
> 
> 时间：2012-07-17T12:54:27.377
> 
> 标签：xml, xslt, sorting

我有以下 XML 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<objects>
    <object>Clutch</object>
    <object>Gearbox</object>
    <object>Cylinder head</object>
    <object>Starter</object>
    <object>Airbox</object>
    <object>Inlet manifold</object>
</objects> 
```

以及以下 XSLT 文档：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

    <xsl:template match="objects">
        <parts>
            <xsl:apply-templates>
                <xsl:sort select="object"/>
            </xsl:apply-templates>
        </parts>
    </xsl:template>

    <xsl:template match="object">
        <part>
            <xsl:apply-templates/>
        </part>
    </xsl:template>

</xsl:stylesheet> 
```

应用时，我按预期获得以下输出，但未对其进行排序：

```
<?xml version="1.0" encoding="UTF-8"?>
<parts>
    <part>Clutch</part>
    <part>Gearbox</part>
    <part>Cylinder head</part>
    <part>Starter</part>
    <part>Airbox</part>
    <part>Inlet manifold</part>
</parts> 
```

为什么`<xsl:sort select="object"/>`没有被应用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T13:00:51.353

**原因在这里：**

> ```
>  <parts>
>           <xsl:apply-templates>
>               <xsl:sort select="object"/>
>           </xsl:apply-templates>
>       </parts> 
> ```

这会将模板应用于`object`当前节点 ( ) 的子节点 ( ) 并按其第一个子节点`objects`的字符串值对它们进行排序。`object`

然而，在提供的 XML 文档中，`object`没有任何子`object`元素——所以它们都有相同的排序键——空字符串——并且它们的原始顺序不会被排序操作改变。

**解决方案**：

```
 <parts>
            <xsl:apply-templates>
                <xsl:sort select="."/>
            </xsl:apply-templates>
        </parts> 
```

**完整的转换变为**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="objects">
    <parts>
     <xsl:apply-templates>
        <xsl:sort select="."/>
     </xsl:apply-templates>
    </parts>
 </xsl:template>

 <xsl:template match="object">
  <part>
     <xsl:apply-templates/>
  </part>
 </xsl:template>
</xsl:stylesheet> 
```

**当它应用于提供的 XML 文档时：**

```
<objects>
    <object>Clutch</object>
    <object>Gearbox</object>
    <object>Cylinder head</object>
    <object>Starter</object>
    <object>Airbox</object>
    <object>Inlet manifold</object>
</objects> 
```

**产生了想要的正确结果：**

```
<parts>
   <part>Airbox</part>
   <part>Clutch</part>
   <part>Cylinder head</part>
   <part>Gearbox</part>
   <part>Inlet manifold</part>
   <part>Starter</part>
</parts> 
```

# c++ - C++：比较数据文件中的点集

> ID：11522926
> 
> 赞同：1
> 
> 时间：2012-07-17T12:54:28.933
> 
> 标签：c++

我有一个由三列 x、y 和 z 组成的数据文件（这些是数字）。我想做以下事情：

1.  比较数据中的每个 (x, y) 集。
2.  如果两个集合相等，比如 (x1, y1) = (x2, y2)，
3.  然后，比较 z1 和 z2。根据比较，我将编写一个条件，并且我想覆盖其中一个集合，以便它采用通过我所做的某些条件的那个集合的值。

数据包含数千个点，所以我不确定如何有效地进行比较，以及如何覆盖或省略不通过该条件的点。

> 所以有人可以提出一些建议，或者举一个小例子来说明我只有两个点（x1，y1，z1）和（x2，y2，z2）的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:56:19.377

由于您想将所有点与所有其他点进行比较，您可以执行如下算法。假设这样的数据结构：

```
struct Data {
    double x_, y_, z_;
    bool skip;
    const std::pair<double, double> & xy () const {
        return std::pair<double, double>(x, y);
    }
};

std::vector<Data> file;
typedef std::multimap<std::pair<double, double>, unsigned> PointMap;
PointMap xyline; 
```

然后，当您读入文件时，您会搜索`xyline`以查看当前点是否已经存在。如果是这样，请相应地更新当前点和`file`向量（因为您知道所有匹配点的行号，您可以修改所有匹配项或仅修改最新的匹配项，您的选择）。然后插入与当前行关联的当前点，然后迭代到文件中的下一行。

处理完文件后，写出`file`. 然后，如果您愿意，可以使用输出替换现有文件。

```
void update (PointMap::iterator first, PointMap::iterator last, Data &d) {
    //... revisit all matching points and decide which to keep
}

Data d;
std::ifstream ifile;
std::ofstream ofile;
ifile.open("input.dat");
while (ifile >> d.x_ >> d.y_ >> d.z_) {
    PointMap::iterator i = xyline.find(d.xy());
    if (i != xyline.end()) {
        update(i, xyline.upper_bound(d.xy(), d);
    }
    xyline.insert(i, std::pair<d.xy(), file.size());
    file.push_back(d);
}

ofile.open("output.dat");
for (size_t i = 0; i < file.size(); ++i) {
    d = file[i];
    if (!d.skip)
        ofile << d.x_ << " " << d.y_ << " " << d.z_ << "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:25:30.523

```
typedef std::map<float, float> Leafs;
typedef std::map<float, Leafs> Node;

Node root; 
```

以这种方式填充树：假设您要添加 (a,b,c)

```
Leafs l;
l[ b ] = c;
root[ a ] = l; 
```

然后当您添加新值时，使用**find**（检查 std::map::find 方法描述）方法来检查值是否存在。这应该是这个“问题”的足够快的解决方案

# django - 如果应用程序与 Django 一起安装，则调整视图

> ID：11522929
> 
> 赞同：5
> 
> 时间：2012-07-17T12:54:36.653
> 
> 标签：django, django-views, django-apps

我有一个 Web 应用程序，其中有一个单独工作的项目（它是索引、登录 .. 页面）。

如果安装了新应用程序，我需要更改索引页面（例如：添加链接、模板中包含我的应用程序模型的表格......）。让它充满活力。

删除应用程序必须让项目完好无损，只需删除链接即可。

我怎样才能做到这一点？是否可以？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2017-04-03T16:38:56.753

您可以使用 Django 的[应用程序注册表](https://docs.djangoproject.com/en/dev/ref/applications/)：

```
In [1]: from django.apps import apps
In [2]: apps.is_installed("django.contrib.admin")
Out[2]: True 
```

实际上，可以通过使用指向其包或应用程序配置类（首选）的点 Python 路径来[启用应用程序。](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-INSTALLED_APPS)在后一种情况下，简单地检查是否`"app_name"`在`settings.INSTALLED_APPS`中将失败。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T13:03:46.693

```
def my_view(request):
    from django.conf import settings
    app_installed = 'app_name' in settings.INSTALLED_APPS

    return render_to_response(template_name, {'app_installed': app_installed}) 
```

模板：

```
{% if app_installed %}
    ...
{% endif %} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-04-08T16:58:02.537

或者使用自定义上下文处理器。

在`installed_apps.py`

```
from django.conf import settings

def installed_apps(request):
    return {
       'app_installed' : 'app_name' in settings.INSTALLED_APPS
    } 
```

在`settings.py`：

```
TEMPLATE_CONTEXT_PROCESSORS = (
    ...
    'installed_apps.installed_apps'
) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-21T14:34:00.397

`simple_tag`版本：

棘手的部分是，当它在条件中使用时，*您不能将参数传递*给您。`simple_tag`因此，您可以使用`as is_myapp_installed`.

在`templatetags/my_filters.py`：

```
from django import template
register = template.Library()

@register.simple_tag
def is_app_installed(app):
  from django.apps import apps
  return apps.is_installed(app) 
```

在模板中：

```
{% load my_filters %}
   ...
{% is_app_installed "myapp" as is_myapp_installed %}    
{% if is_myapp_installed %}
   ...
{% endif %} 
```

# python - 浮点任意精度是否可用？

> ID：11522933
> 
> 赞同：57
> 
> 时间：2012-07-17T12:54:48.617
> 
> 标签：python, floating-point, floating-accuracy

只是为了好玩，因为它真的很容易，我写了一个小程序来生成[Grafting numbers](http://math.wikia.com/wiki/Grafting_number)，但由于浮点精度问题，它没有找到一些更大的例子。

```
def isGrafting(a):
  for i in xrange(1, int(ceil(log10(a))) + 2):
    if a == floor((sqrt(a) * 10**(i-1)) % 10**int(ceil(log10(a)))):
      return 1

a = 0
while(1):
  if (isGrafting(a)):
    print "%d %.15f" % (a, sqrt(a))
  a += 1 
```

此代码至少缺少一个已知的嫁接编号。`9999999998 => 99999.99998999999999949999999994999999999374999999912...` 乘以 后似乎会降低额外的精度`10**5`。

```
>>> a = 9999999998
>>> sqrt(a)
99999.99999
>>> a == floor((sqrt(a) * 10**(5)) % 10**int(ceil(log10(a))))
False
>>> floor((sqrt(a) * 10**(5)) % 10**int(ceil(log10(a))))
9999999999.0
>>> print "%.15f" % sqrt(a)
99999.999989999996615
>>> print "%.15f" % (sqrt(a) * 10**5)
9999999999.000000000000000 
```

所以我写了一个简短的 C++ 程序，看看是我的 CPU 以某种方式截断了浮点数还是 python。

```
#include <cstdio>
#include <cmath>
#include <stdint.h>

int main()
{
  uint64_t a = 9999999998;
  printf("%ld %.15f %.15f %.15f %.15f\n", a, sqrt((double)a), sqrt((double)a)*1e4, sqrt((double)a)*1e5, sqrt((double)a)*1e6);
  a = 999999999998;
  printf("%ld %.15f %.15f %.15f %.15f\n", a, sqrt((double)a), sqrt((double)a)*1e5, sqrt((double)a)*1e6, sqrt((double)a)*1e7);
  a = 99999999999998;
  printf("%ld %.15f %.15f %.15f %.15f\n", a, sqrt((double)a), sqrt((double)a)*1e6, sqrt((double)a)*1e7, sqrt((double)a)*1e8);
  return 0;
} 
```

哪个输出：

```
9999999998 99999.999989999996615 999999999.899999976158142 9999999999.000000000000000 99999999990.000000000000000
999999999998 999999.999998999992386 99999999999.899993896484375 999999999999.000000000000000 9999999999990.000000000000000
99999999999998 9999999.999999899417162 9999999999999.900390625000000 99999999999999.000000000000000 999999999999990.000000000000000 
```

所以看起来我正在努力克服浮点精度的限制，并且 CPU 正在切断剩余的位，因为它认为剩余的差异是浮点错误。有没有办法在 Python 下解决这个问题？还是我需要转移到 C 并使用 GMP 之类的？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-17T13:05:25.493

在标准库中，该[`decimal`](http://docs.python.org/library/decimal.html#module-decimal)模块可能是您正在寻找的。另外，我发现[mpmath](http://mpmath.org/)很有帮助。该[文档](http://mpmath.org/doc/current/basics.html)也有许多很好的示例（不幸的是我的办公室计算机没有`mpmath`安装；否则我会验证一些示例并发布它们）。

[`decimal`](http://docs.python.org/library/decimal.html#decimal-objects)不过，关于该模块的一个警告。该模块包含几个用于简单数学运算的内置函数（例如`sqrt`），但这些函数的结果可能并不总是与`math`更高精度的模块或其他模块中的相应函数匹配（尽管它们可能更准确）。例如，

```
from decimal import *
import math

getcontext().prec = 30
num = Decimal(1) / Decimal(7)

print("   math.sqrt: {0}".format(Decimal(math.sqrt(num))))
print("decimal.sqrt: {0}".format(num.sqrt())) 
```

在 Python 3.2.3 中，这会输出前两行

```
 math.sqrt: 0.37796447300922719758631274089566431939601898193359375
decimal.sqrt: 0.377964473009227227214516536234
actual value: 0.3779644730092272272145165362341800608157513118689214 
```

如前所述，这并不是您所期望的，您可以看到精度越高，结果匹配越少。请注意，该`decimal`模块在此示例中确实具有更高的准确性，因为它与[实际值](http://www.wolframalpha.com/input/?i=sqrt%281%2F7%29)更接近。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-17T13:24:35.977

对于这个特殊的问题，这`decimal`是一个很好的方法，因为它将十进制数字存储为元组！

```
>>> a = decimal.Decimal(9999999998)
>>> a.as_tuple()
DecimalTuple(sign=0, digits=(9, 9, 9, 9, 9, 9, 9, 9, 9, 8), exponent=0) 
```

由于您正在寻找最自然地以十进制表示的属性，因此使用二进制表示有点愚蠢。您链接到的维基百科页面没有说明在“嫁接数字”开始之前可能出现多少个“非嫁接数字”，因此您可以指定：

```
>>> def isGrafting(dec, max_offset=5):
...     dec_digits = dec.as_tuple().digits
...     sqrt_digits = dec.sqrt().as_tuple().digits
...     windows = [sqrt_digits[o:o + len(dec_digits)] for o in range(max_offset)]
...     return dec_digits in windows
... 
>>> isGrafting(decimal.Decimal(9999999998))
True
>>> isGrafting(decimal.Decimal(77))
True 
```

我认为由于二进制表示和十进制表示之间的转换，结果很有可能`Decimal.sqrt()`会比结果更准确，至少在这一点上。`math.sqrt()`例如，考虑以下内容：

```
>>> num = decimal.Decimal(1) / decimal.Decimal(7)
>>> decimal.Decimal(math.sqrt(num) ** 2) * 7
Decimal('0.9999999999999997501998194593')
>>> decimal.Decimal(num.sqrt() ** 2) * 7
Decimal('1.000000000000000000000000000') 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-07-17T12:57:30.350

您可以尝试使用[Decimal](http://docs.python.org/library/decimal.html#module-decimal)而不是浮点数。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-07-17T13:02:49.457

Python 没有内置的任意精度浮点数，但有使用 GMP 的第 3 方 Python 包： [gmpy](http://pypi.python.org/pypi/gmpy/1.15)和[PyGMP](http://pypi.python.org/pypi/PyGMP/0.9p2)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-09-18T01:29:41.540

使用`decimal`, （这里有一个更清晰的例子）：

```
>>> 2.3-2.2
0.09999999999999964
>>> from decimal import Decimal
>>> Decimal('2.3')-Decimal('2.2')
Decimal('0.1')
>>> float(Decimal('2.3')-Decimal('2.2'))
0.1
>>> 
```

# html - 在一个容器中居中两个不同高度的文本元素

> ID：11522936
> 
> 赞同：0
> 
> 时间：2012-07-17T12:55:11.130
> 
> 标签：html, css, position, center

我有一个**固定高度**和 100% 宽度的容器。它是`display:block`。

里面有**两个包含 text 的相似元素**。它们有不同`font-size`的 s 并且是浮动的——一个在左边，另一个在右边。

![垂直中心草图](../Images/966f0e1190cd040ac115621c10a12130.png)

HTML

```
<header>
    <h1 class="right">Title</h1>
    <h2 class="left">Slogan</h2>
</header> 
```

CSS

```
header{ position:fixed; width:100%; height:5em; }
header h1{ font-size:3em; margin:0; }
header h2{ font-size:2em; margin:0; } 
```

我不想使用`display:table-cell`. 而且我不能用`line-height`，因为我只用`em`和不`px`和`font-size`s的文本元素不同。

**如何垂直居中文本元素？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T12:57:33.790

写**行高**与`height`. 像这样写：

```
header{ position:fixed; width:100%; height:5em;line-height:5em; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:08:35.273

在我的脑海中，我认为这样的事情可能会奏效：

```
header h1 { font-size:3em; margin:0; float:right; top:50%; position:relative; margin-top:-0.5em;}
header h2 { font-size:2em; margin:0; float:left; top:50%; position:relative; margin-top:-0.5em;} 
```

[编辑] 我还没有足够的权限来发表评论，但是 Sandeep 的回复有效，因为`line-height`子元素继承了`line-height`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T12:57:24.733

如果是网站标题和口号，这些元素通常不会经常变化，我会简单地为每个元素设置不同的边距顶部距离，直到它们在视觉上按照你想要的方式排列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:00:56.883

我看到您正在测量 EM 中的字体大小，这使我假设文本可以增长和缩小。您可以使用 JS 解决方案，例如这个 jQuery：

```
$('h1, h2').each(function(){
    var headerHeight = $(this).outerHeight();
    $(this).css('margin-top', '-' + headerHeight / 2 + 'px');
}); 
```

这将伴随一些 CSS，如下所示：

```
h1, h2 {position: absolute; top: 50%;} 
```

# java - Slick 中 getColor() 方法上的 ArrayIndexOutOfBoundsException

> ID：11522945
> 
> 赞同：0
> 
> 时间：2012-07-17T12:55:33.450
> 
> 标签：java, slick2d

我有这段代码来创建一个 ArrayList，其中包含实际存在像素的所有像素位置（alpha！= 0）。

代码如下：

```
public ArrayList<Point> getPixels() {
    ArrayList<Point> output = new ArrayList<Point>();
    Image frameImage = img.getCurrentFrame();
    for (int FIx = 0; FIx <= img.getWidth(); FIx++) {
        for (int FIy = 0; FIy <= img.getHeight(); FIy++) {
            if (frameImage.getColor(FIx, FIy).getAlpha() != 0.00f) {//<-- Error
                output.add(new Point(FIx, FIy));
            }
        }
    }

    return output;
} 
```

该循环可以多次完成，没有任何错误，但在运行的所谓随机时间，它会给出以下错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 32768
    at org.newdawn.slick.Image.getColor(Image.java:1248)
    at com.SourCherry.games.KittySniper.Enemy.Kitten.getPixels(Kitten.java:197) 
```

我已经用注释标记了提到的行 (Kitten.java:197)。

如果需要其他任何东西来帮助解决这个问题，请在评论中提问。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T12:57:38.487

这对我来说似乎是个问题：

```
for (int FIx = 0; FIx <= img.getWidth(); FIx++) {
    for (int FIy = 0; FIy <= img.getHeight(); FIy++) { 
```

您假设它的像素范围*包括* `getWidth`和`getHeight`。我强烈怀疑这些是*排他*的上限：

```
for (int FIx = 0; FIx < img.getWidth(); FIx++) {
    for (int FIy = 0; FIy < img.getHeight(); FIy++) { 
```

因此，例如，宽度为 3 的图像应该具有有效的 X 值 0、1 和 2，*而不是*3。

诚然，这取决于具体是做什么`org.newdawn.slick.Image`的，这是我不熟悉的一门课程——但这是一个合理的起点。（很遗憾，该方法显然没有验证其输入 - 它应该抛出一个不同的异常，但这仍然是您的编程错误。）

# rest - restful api 只使用干净的 url - 没有 url 变量或 post 变量

> ID：11522946
> 
> 赞同：1
> 
> 时间：2012-07-17T12:55:37.640
> 
> 标签：rest, restful-url

一个 restful api 必须使用 get、post、put 或 delete 请求方法。提交的行为和数据完全由 uri 字符串决定。没有查询参数或发布变量。

这是真的 ？

有效的 ：`http://example.com/foo/84`

**无效**：`http://example.com/foo/?value=84`

有效的 ：

```
$.ajax({
  type: 'POST',
  url: "http://example.com/foo/84",
  success: success,
  dataType: dataType
}); 
```

**无效**：

```
$.ajax({
  type: 'POST',
  url: "http://example.com/foo/",
  data: 84,
  success: success,
  dataType: dataType
}); 
```

*编辑* 到目前为止的两个答案，并且相互矛盾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-02T18:58:34.973

这是与其他两个相矛盾的第三个答案。

RESTful URI 几乎是矛盾的。URI 的语义与 REST 无关，唯一对 REST 重要的是一个 URI 只标识一个资源。除此之外，URI 是一个原子标识符，它的语义是无关紧要的。

对于 REST，指向 Joe Doe 的用户资源的 URI 是否为：

```
http://example.com/users/joedoe 
```

或者：

```
http://example.com/users?username=joedoe 
```

或者：

```
http://example.com/jif892mfd02-18f2 
```

甚至：

```
ftp://example.com/users/joedoe.json 
```

没关系！URI 在 RESTful 应用程序中不需要有任何意义。人们花了很多时间为他们的 REST 应用程序设计有意义的 URI，同时他们应该关心他们的媒体类型。当您单击网页上的链接时，您不关心 URI 的语义，您只关心标签。使用 REST API 的客户端也会发生同样的事情。您的媒体类型的文档应通过标签描述可用的链接以及它们的作用，您只需遵循它们即可。

如果您关心 URI 的语义，这表明您的客户端正在从文档中的某个模板构建 URI，而您没有使用 HATEOAS，这意味着您根本没有使用 REST。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T12:58:49.100

POST 变量肯定没问题，否则您将如何提交新资源或更新它？

GET 参数可以很好地指定资源的呈现方式。所以确实`http://example.com/foo/?value=84`是不对的 - URL 不代表资源。

不过，`http://example.com/user/84?fields=first_name,last_name`应该没问题。在这种情况下，您将使用附加查询参数来指定您只需要该资源的名字和姓氏。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-17T13:06:58.003

说这`http://example.com/foo/?value=84`是无效的并不完全正确。我的意思是，只要它是一个有效的 URL，它就可以工作，并且您将能够通过 get 或 post 获取参数。

另一方面，REST 是一种架构，它的一个要求是一个干净的 URL（不包括带有“？”的参数），因此这样的 URL 不被视为类似于 REST 的 URL。

所以如果你打算构建一个基于 REST 的应用程序，你应该只使用干净的 url。

**编辑：**

我从下面的评论中看到你在理解什么是 REST 时遇到了问题，所以我将尝试举一个简单的例子：

1.  为了获取数据，您可能会将`http://example.com/foo/84`其用作获取请求，而其余 FW 知道获取 id 为 84 的资源 foo。
2.  为了发布有关 foo 的数据，您可以调用：`http://example.com/foo/84`作为 POST 请求，现在 Rest FW 知道，由于它是一个 post 请求，它将调用负责处理 post 的方法，而不是处理 get 的方法
3.  要删除，您使用 DELETE 操作调用相同的 URL，我想您知道其余的。

所以，虽然你有相同的 URL，但它是否是 GET/POST/PUT/DELETE 请求真的很重要。

# javascript - 使用 add:true 参数获取集合时重新渲染主干视图

> ID：11522947
> 
> 赞同：0
> 
> 时间：2012-07-17T12:55:46.053
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views

我有骨干集合，在某些情况下，我会通过以下方式将更多模型提取到集合中：

```
collection.fetch({data: {...}, add: true}); 
```

当新成员到达时，我需要重新渲染集合的视图。由于 add:true 参数，“reset”事件没有被触发，因此我看到了两个选项。

1.  将 this.render 函数绑定到集合的“add”事件。这是可行的，但会为从服务器到达的每个新模型调用渲染函数。
2.  传递 silent:true 作为 fetch 参数并在下一行显式调用 this.render() ，但是在下一行数据仍然没有到达，因此使用旧数据调用渲染函数。

我还没有找到任何其他方法来解决这个问题:( 任何建议在这种情况下我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:04:30.393

`success`如果这是您的首选方式，您还可以将回调作为选项传递给 fetch 方法并在成功的 ajax 操作后触发完全重新渲染

```
collection.fetch({data: {...}, add: true, success: function() { ... } }); 
```

// 或对函数的引用 - 你得到了练习

# mfc - WindProc 能为我做什么？

> ID：11522952
> 
> 赞同：0
> 
> 时间：2012-07-17T12:56:05.903
> 
> 标签：mfc, postmessage

我有一个正在开发的多对话框 MFC 客户端应用程序。该客户端可以接收到主对话框的大量消息（>10Hz），主对话框通常执行一些小功能，然后将该消息转发到另一个对话框进行处理。
在我的具体情况下，主对话框接收与车辆位置相关的消息，更新该 GUI 上的几个字段，然后通过 PostMessage 将其传递到显示所有车辆信息的窗口。

所以基本上，我的问题是：发布消息或只是调用 dialog.update （这是我创建的函数）有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:16:25.047

我相信您的应用程序是多线程的，其中一个线程正在接收数据，并且与 GUI 线程不同。您应该`PostMessage`只使用从其他线程到此对话框，而不是`SendMessage`或直接调用。

如果你收到太多消息，你应该缓冲它们——或者通过计数（比如 5000），或者通过一些超时。您可以将消息保存到`vector`，`list`或您喜欢的任何其他集合中。稍后，在发送时，将此集合的地址作为`WPARAM`（或`LPARAM`）发布到对话框。Dialog 会以一堆形式获取它并对其进行处理。这种方法可能不正确，因为我不了解您的应用程序的其他设计观点。

您将需要反复试验的方法，看看您从哪里获得了实际的性能和稳定性优势。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T17:49:44.390

好吧，既然我们不知道你的 dialog.update() 做了什么，我们怎么知道有什么区别呢？

如果你正在做另一个 PostMessage，我不确定那是什么意思。您的程序必须等待消息循环的另一次迭代来检索您新发布的消息，并且可能会在该消息发布之前收到另一条消息。您可以使用 SendMessage 代替 PostMessage，它将消息直接发送到 WndProc，而无需为另一条消息迭代消息循环。

我在想，如果你是多线程的，那么发送或发布消息会更加线程安全，因为 Windows 应该自动切换上下文。如果你是单线程的，那么它可能不重要。

# java - 正则表达式挂起程序（100% CPU 使用率）

> ID：11522954
> 
> 赞同：28
> 
> 时间：2012-07-17T12:56:18.120
> 
> 标签：java, regex

当我使用以下字符串作为正则表达式的输入时，Java 以 100% 的 CPU 使用率挂起。

**使用的正则表达式：**

这是我的应用程序中用于描述字段的正则表达式。

```
^([A-Za-z0-9\\-\\_\\.\\&\\,]+[\\s]*)+ 
```

**用于测试的字符串：**

> 来自 Provider_One 的 SaaS 服务 VLAN
> 与 Didier SPT 的第二次尝试，因为他给我的第一个是错误的 :-(

当我将相同的字符串拆分为不同的组合时，它可以正常工作。就像“Provider_One 的 SaaS 服务 VLAN”、“他给我的第一个是错误的 :-(”等。Java 仅针对上面给定的字符串挂起。

我还尝试如下优化正则表达式。

```
^([\\w\\-\\.\\&\\,]+[\\s]*)+ 
```

即使这样也行不通。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-17T13:11:46.603

另一个[灾难性回溯](http://www.regular-expressions.info/catastrophic.html)的经典案例。

您有嵌套的量词，当正则表达式到达`:`不属于您的字符类的输入字符串时，会检查大量排列（假设您正在使用该`.matches()`方法）。

让我们将问题简化为这个正则表达式：

```
^([^:]+)+$ 
```

这个字符串：

```
1234: 
```

正则表达式引擎需要检查

```
1234    # no repetition of the capturing group
123 4   # first repetition of the group: 123; second repetition: 4
12 34   # etc.
12 3 4 
1 234
1 23 4
1 2 34
1 2 3 4 
```

...这只是四个字符。在您的示例字符串中，RegexBuddy 在 100 万次尝试后中止。Java 会很高兴地继续努力……在最终承认这些组合都不允许以下`:`匹配之前。

你怎么能解决这个问题？

您可以使用[所有格量词](http://www.regular-expressions.info/possessive.html)来禁止正则表达式回溯：

```
^([A-Za-z0-9_.&,-]++\\s*+)+ 
```

将允许正则表达式更快地失败。顺便说一句，我删除了所有那些不必要的反斜杠。

**编辑：**

一些测量：

在 string`"was wrong :-)"`上，它需要 RegexBuddy 862 个步骤来找出不匹配的。
对于`"me was wrong :-)"`，它是 1,742 步。
对于`"gave me was wrong :-)"`, 14,014 步。
对于`"he gave me was wrong :-)"`, 28,046 步。
对于`"one he gave me was wrong :-)"`, 112,222 步。
对于`"first one he gave me was wrong :-)"`, >1,000,000 步。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-17T13:11:18.883

首先，您需要意识到您的正则表达式不能匹配提供的输入字符串。字符串包含许多不是“单词”字符的字符 (`'<' '>' '/' ':'`和)。`')'`

那么为什么需要这么长时间呢？

基本上是“灾难性的回溯”。更具体地说，正则表达式的重复结构为正则表达式回溯算法提供了*指数级的替代方案！*

这是您的正则表达式所说的：

1.  一个或多个单词字符
2.  后跟零个或多个空格字符
3.  根据需要重复前 2 个模式。

问题在于“零个或多个空格字符”部分。第一次，匹配器会将所有内容匹配到第一个意外字符（即`'<'`）。然后它会稍微退后一点，然后用不同的替代方案重试……在最后一个字母之前涉及“零空格”，然后当失败时，它将“零空格”移回一个位置。

问题在于，对于具有`N`非空格字符的字符串，`N`可以匹配“零空格”的不同位置，从而产生`2^N`不同的组合。随着增长，这迅速变成一个巨大的数字`N`，最终结果很难与无限循环区分开来。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-17T15:34:43.523

为什么将空格与其他字符分开匹配？为什么你在开始时锚定比赛，而不是在结束时？如果要确保字符串不以空格开头或结尾，则应执行以下操作：

```
^[A-Za-z0-9_.&,-]+(?:\s+[A-Za-z0-9_.&,-]+)*$ 
```

现在正则表达式引擎只有一个“路径”可以通过字符串。如果它在到达结尾之前用完了匹配的字符`[A-Za-z0-9_.&,-]`，并且下一个字符不匹配`\s`，它会立即失败。如果它在仍然匹配空白字符的情况下到达末尾，则它会失败，因为在每次运行空白之后都需要匹配至少一个非空白字符。

如果您想确保只有一个空格字符分隔非空格的运行，只需从 中删除量词`\s+`：

```
^[A-Za-z0-9_.&,-]+(?:\s[A-Za-z0-9_.&,-]+)*$ 
```

如果您不关心空白与非空白的关系，只需将它们都与相同的字符类匹配：

```
^[A-Za-z0-9_.&,\s-]+$ 
```

我假设您知道由于笑脸中的`:`and而您的正则表达式与给定的输入不匹配`(`，并且您只想知道为什么需要这么长时间才能失败。

当然，由于您正在以 Java 字符串文字的形式创建正则表达式，因此您可以编写：

```
"^[A-Za-z0-9_.&,-]+(?:\\s+[A-Za-z0-9_.&,-]+)*$" 
```

或者

```
"^[A-Za-z0-9_.&,-]+(?:\\s[A-Za-z0-9_.&,-]+)*$" 
```

或者

```
"^[A-Za-z0-9_.&,\\s-]+$" 
```

（我知道您在原始问题中有双反斜杠，但这可能只是为了让它们正确显示，因为您没有使用 SO 出色的代码格式化功能。）

# xml - 在 XSL 中保留树结构

> ID：11522958
> 
> 赞同：1
> 
> 时间：2012-07-17T12:56:45.283
> 
> 标签：xml, xslt, xslt-1.0

我有以下文件：

```
<Doc>
    <If cond="c">
       <Expr>Expr1</Expr>
    </If>
    <Expr>Expr2</Expr>
</Doc> 
```

应该创建这样的输出：

```
If c { Expr1 } Expr2 
```

但是，就我而言，它会创建：

```
Expr1 If c { Expr1 } Expr2 
```

我有以下 XSLT：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="text"/>
    <xsl:template match="/">
       <xsl:element name="Doc">
            <xsl:apply-templates select="*" />
        </xsl:element>
    </xsl:template>

    <xsl:template match="If">
      <xsl:text>if </xsl:text><xsl:value-of select="@cond"/><xsl:text> {</xsl:text>
      <xsl:apply-templates select="Expr"/><xsl:text>}</xsl:text>
    </xsl:template>

    <xsl:template match="Expr">
        <xsl:value-of select="."/>
    </xsl:template>

    <xsl:template match="*">
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:17:43.130

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="If">
     if <xsl:value-of select="@cond"/> <xsl:text/>
     <xsl:apply-templates/>
 </xsl:template>

 <xsl:template match="If/Expr">
  <xsl:value-of select="concat(' { ', ., ' }')"/>
 </xsl:template>

 <xsl:template match="Expr">
  <xsl:value-of select="concat(' ', .)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<Doc>
    <If cond="c">
        <Expr>Expr1</Expr>
    </If>
    <Expr>Expr2</Expr>
</Doc> 
```

**产生想要的正确结果**：

```
 if c { Expr1 } Expr2 
```

**请注意**：

如果您将转换简化为：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
        <xsl:template match="If">
          <xsl:text>if </xsl:text><xsl:value-of select="@cond"/><xsl:text> {</xsl:text>
          <xsl:apply-templates select="Expr"/><xsl:text>}</xsl:text>
        </xsl:template>

        <xsl:template match="Expr">
            <xsl:value-of select="."/>
        </xsl:template>
</xsl:stylesheet> 
```

**然后产生正确的结果**：

```
if c {Expr1}
Expr2 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T13:05:39.200

总是很难准确地理解人们从样式表中要求什么行为，但我认为你要问的是“我如何确保只有`Expr`元素下的`If`元素才能在括号内转换？”

尝试修改`template match="Expr"`为`template match="If/Expr"`- 这告诉转换引擎只有在 Ifs 下的 Exprs 应该匹配。

# ios - IOS：UIView 永远可见

> ID：11522959
> 
> 赞同：0
> 
> 时间：2012-07-17T12:56:50.030
> 
> 标签：ios, uiview, uiviewcontroller

在我的应用程序中，我想设置一个在我的应用程序中可见的 UIView（称为“functionView”），并且当我更改视图控制器时，它应该始终保持在其位置。我给你看一个例子：

![在此处输入图像描述](../Images/5c8c6504c7a68603791e5b3983fe856a.png)

正如你所看到的，视图函数一直在它的位置，它不应该改变它的位置。

我可以从 appDelegate 设置这个视图吗？以及如何控制它？我可以使用一个类（UIView 的子类）吗？

**重要提示：它不应该是标签栏，而是带有动画的视图可以在视图控制器上移动

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T13:04:56.040

您应该使用容器视图控制器，其中包含功能视图，以及用于第一个和第二个视图的视图控制器

您将需要管理此视图控制器内的导航/转换逻辑

这个问题有一个很好的 WWDC 视频的链接和一篇关于这个的博客文章：[Container View Controller Examples](https://stackoverflow.com/questions/7755498/container-view-controller-examples)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T13:00:30.503

您可以将子视图添加到应用程序的主窗口而不是根视图控制器：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
//...
    [window addSubview:functionView];
//... 
```

# silverlight - Pivot control with XNA Assemblies

> ID：11522966
> 
> 赞同：0
> 
> 时间：2012-07-17T12:57:09.253
> 
> 标签：silverlight, windows-phone-7, publish, xna-4.0, marketplace

Recently I developed an application using a Pivot control as a "menu" and other pages with XNA content (2D and 3D).

Now, I discovered that my application won't be certified cause Im using System.XNA.Framework.Game and System.XNA.Framework.Graphics in my app.

This is really upsetting me at the moment, cause it's throwing away hours of work...

I never published something on the marketplace, so I'm asking if it's possible, anyway, to publish an application of this kind or at least, publish it as Beta Testing without "Certification" as they say on few pages..

Any clue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:40:59.133

复合 Silverlight+XNA 应用程序不同于调用 XNA 程序集的全功能 Silverlight 应用程序。限制仍然存在 - 您不能调用**Microsoft.Xna.Framework.Game**或**Microsoft.Xna.Framework.Graphics**。

请注意，仍然允许使用某些 XNA 元素，例如**Microsoft.Xna.Framework.Audio**，它可以让您访问[Microphone](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.audio.microphone.aspx)类，或**Microsoft.Xna.Framework**，它可以让您访问[FrameworkDispatcher](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.frameworkdispatcher.update.aspx)。

# php - 从 iOS 设备到 Web 服务的 Paypal 付款 (PHP)

> ID：11522967
> 
> 赞同：0
> 
> 时间：2012-07-17T12:57:11.083
> 
> 标签：php, ios, web-services, paypal, payment-gateway

我正在尝试从 iOS 应用程序出售积分，当我付款时，我将此信息发送到我的 PHP Web 服务：

```
payment_request_date  -  Tue Jul 17 05:32:19 PDT 2012
return_url  -  http://www.paypal.com
fees_payer  -  EACHRECEIVER
ipn_notification_url  -  http://www.xxxxxx.com/xxx/xxx/xxxxx/xxxx/xxxx/test.php
verify_sign  -  AgYuiYfIN5owxd-SesPtCf2-3s2qAIwGX.FB6cfxxxxxxxxx
test_ipn  -  1
transaction  -  Array
0  -  EUR 69.00
cancel_url  -  http://www.paypal.com
pay_key  -  AP-1MJ8653xxxxxx
action_type  -  PAY
transaction_type  -  Adaptive Payment PAY
status  -  COMPLETED
log_default_shipping_address_in_transaction  -  false
charset  -  windows-1252
sender_useCredentials  -  true
notify_version  -  UNVERSIONED
reverse_all_parallel_payments_on_error  -  false 
```

如果我想检查付款是否正确，下一步该做什么？

我一直在查看贝宝文档，但它非常令人困惑。

提前致谢。

## **编辑 2012-07-18：**

试图验证交易我的交易数组有问题，所以我不得不改变我的脚本，让它像这里的[PHP paypal ipn 监听器交易数组](https://stackoverflow.com/questions/11388139/php-paypal-ipn-listener-transaction-array)一样工作，现在一切正常！！;)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T14:36:44.263

您现在应该验证贝宝的收据，如果成功，解锁用户的信用。在此位置查看 php 的示例代码：

[https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216623)

另请注意，Apple 的 AppStore 审查指南不允许此类购买，并且此类应用程序将被拒绝并且不会发布到 AppStore。

Apple 只允许他们自己的应用内购买。

# .net - 使用 Web 服务时无法加载类型异常

> ID：11522969
> 
> 赞同：0
> 
> 时间：2012-07-17T12:57:15.880
> 
> 标签：.net, sharepoint, reference, wss-3.0

我在我的应用程序和 Sharepoint Web 服务之间编写了一座桥梁，以一种有用的格式将数据返回到我的项目中。但是，当任何行尝试创建此 webServiceBridge 类的新实例时，都会引发此异常。

`Could not load type 'SharepointWeb.ShareList' from assembly 'SharepointWeb, Version=2.6.0.0, Culture=neutral, PublicKeyToken=null'.`

我目前没有引用或使用 Sharepoint.dll 库，因为此应用程序将位于 Sharepoint Server 的外部。为了与 WSS3 兼容，sharepoint 插件项目（我正在编写的应用程序）是 .NET 3.5，但“配置工具项目”是 .NET 4。

我所有的 webFunctions 代码所做的就是获取从 Web 服务返回的 XmlNodes 并将其分类为可用的东西。在大多数情况下，他们会返回`List<MyObject>`

这些是我使用的唯一网络方法。

`permissionService.GetPermissionCollection` `listService.GetList` `listService.GetListItems` `listService.GetListCollection` `siteDataService.GetWeb`

我尝试添加`Microsoft.Sharepoint.dll`作为项目的参考，但这并没有解决问题。但即使它有，我也不明白为什么需要它。

这是 Fuslogvw 不得不说的：（我要指出，在调用异常导致方法并尝试使用 Web 服务*之前*，这个错误出现在 FuslogVw中。除了这个错误之外，它是空的！）

> *** 装配活页夹日志条目 (19/07/2012 @ 14:38:45) ***
> 
> 操作失败。绑定结果：hr = 0x80070002。该系统找不到指定的文件。
> 
> 从以下位置加载的程序集管理器：C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll 在可执行文件 C:\Working\XXXX\Configuration Tool\v2.6.0.3\ConfigurationTool\ConfigurationTool\bin\Debug 下运行
> 
> \ConfigurationTool.vshost.exe --- 详细的错误日志如下。
> 
> === 预绑定状态信息 === LOG: User = YYYY\XXXX LOG: DisplayName = msvcm80, Version=8.0.50727.6195, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a (Fully-specified) LOG: Appbase = file:// /C:/Working/XXXX/Configuration Tool/v2.6.0.3/ConfigurationTool/ConfigurationTool/bin/Debug/ LOG: Initial PrivatePath = NULL LOG: Dynamic Base = NULL LOG: Cache Base = NULL LOG: AppName = ConfigurationTool.vshost .exe 调用程序集：（未知）。=== LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\Working\XXXX\Configuration Tool\v2.6.0.3\ConfigurationTool\ConfigurationTool\bin\Debug
> 
> \ConfigurationTool.vshost.exe.Config LOG：使用主机配置文件： LOG：使用 C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config 中的机器配置文件。日志：策略后参考：msvcm80，版本=8.0.50727.6195，文化=中性，PublicKeyToken=b03f5f7f11d50a3a 日志：GAC 查找不成功。日志：正在尝试下载新的 URL 文件：///C:/Working/XXXX/Configuration
> 
> 工具/v2.6.0.3/ConfigurationTool/ConfigurationTool/bin/Debug/msvcm80.DLL。日志：正在尝试下载新的 URL 文件：///C:/Working/XXXX/Configuration
> 
> 工具/v2.6.0.3/ConfigurationTool/ConfigurationTool/bin/Debug/msvcm80/msvcm80.DLL。日志：正在尝试下载新的 URL 文件：///C:/Working/XXXX/Configuration
> 
> 工具/v2.6.0.3/ConfigurationTool/ConfigurationTool/bin/Debug/msvcm80.EXE。日志：正在尝试下载新的 URL 文件：///C:/Working/XXXX/Configuration
> 
> 工具/v2.6.0.3/ConfigurationTool/ConfigurationTool/bin/Debug/msvcm80/msvcm80.EXE。LOG：所有探测 URL 都已尝试并失败。

编辑：从添加 Msvcm80.dll`%Program Files%\Microsoft Visual Studio 8\VC\redist\x86\Microsoft.VC80.CRT`

FuslogVW 中没有错误，但异常仍然存在。

这是完整的异常文本，不多说了！

> System.TypeLoadException 被捕获 Message=Could not load type 'SharepointWeb.ShareList' from assembly 'SharepointWeb, Version=2.6.0.0, Culture=neutral, PublicKeyToken=null'。
> Source=Sharepoint TypeName=SharepointWeb.ShareList StackTrace: 在 Sharepoint.FolderBrowser.GrowTree(String siteUrl) 在 Sharepoint.FolderBrowser..ctor(String siteURL) InnerException:

我还有其他地方可以查找更多信息来帮助我诊断此问题的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T17:26:21.267

从错误代码

> 0x80070002

看起来您有权限问题。尝试以管理员身份运行您的应用程序。还要检查帐户是否属于与 SP 相关的用户组。

> 我还将 Sharepoint.DLL 卡在我的调试文件夹中，正如之前提到的那样搜索那里的 fuslog

请注意，如果程序集在 GAC 中仍然存在，则 CLR 首先从那里获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T15:19:53.013

引用 Web 服务的项目需要使用强名称密钥进行签名。然后放在Sharepoint 服务器GAC 或Sharepoint web 的`/bin`目录下。

我的没有SNK。

# windows-phone-7 - How can i get the length of a bitmapimage(jpg/png)?

> ID：11522979
> 
> 赞同：0
> 
> 时间：2012-07-17T12:57:40.580
> 
> 标签：windows-phone-7

When i use this function to save image(fetch from net) to IsolatedStorage, i found the file size is larger than that i save from the webbrowse.

```
public static bool CreateImageFile(string filePath, BitmapImage bitmapImage)
{
        //StreamResourceInfo streamResourceInfo = Application.GetResourceStream(new Uri(filePath, UriKind.Relative));

        using (isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            string directoryName = System.IO.Path.GetDirectoryName(filePath);
            if (!string.IsNullOrEmpty(directoryName) && !isolatedStorage.DirectoryExists(directoryName))
            {
                isolatedStorage.CreateDirectory(directoryName);
            }

            if (isolatedStorage.FileExists(filePath))
            {
                isolatedStorage.DeleteFile(filePath);
            }

            //bitmapImage

            using (IsolatedStorageFileStream fileStream = isolatedStorage.OpenFile(filePath, FileMode.Create, FileAccess.Write))
            {
                bitmapImage.CreateOptions = BitmapCreateOptions.None;
                WriteableBitmap wb = new WriteableBitmap(bitmapImage);
                wb.SaveJpeg(fileStream, wb.PixelWidth, wb.PixelHeight, 0, 100);
                fileStream.Close();
            }
        }
        return true;
} 
```

Is that ok to save png images using WriteableBitmap.SaveJpeg(...)? And is there any function to get the length of BitmapImage?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T16:35:32.820

如果它是 PNG，为什么要使用 SaveJpeg 来实际存储它？为什么不简单地使用标准的“数据到文件”方法？如果它已经被编码为 PNG，您需要做的就是存储内容。

在这里阅读更多：

*   [如何：为 Windows Phone 存储文件和文件夹](http://msdn.microsoft.com/en-us/library/ff626519%28v=VS.92%29.aspx)
*   [写入数据 (Windows Phone)](http://msdn.microsoft.com/en-us/library/ff604992.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T13:10:13.120

转换为字节数组

```
byte[] data;
using (MemoryStream ms = new MemoryStream()
{
    bitmapImage.SaveJpeg(ms, LoadedPhoto.PixelWidth, LoadedPhoto.PixelHeight, 0, 95);
    ms.Seek(0, 0);
    data = new byte[ms.Length];
    ms.Read(data, 0, data.Length);
    ms.Close();
} 
```

然后只需获取字节数组的大小并转换为更合理的值（KB，MB ...）

# wiki - How can I link from a dokuwiki wiki article to a mantis ticket?

> ID：11522980
> 
> 赞同：0
> 
> 时间：2012-07-17T12:57:40.193
> 
> 标签：wiki, mantis, dokuwiki

I would like to link from a dokuwiki article to a mantis ticket and an overview of tickets

I have the latest versions of mantisbt, dokuwiki and the mantis plugin for doku wiki. Also I have integrated dokuwiki in mantis.

The dokuwiki config looks at the moment like the following

![doku wiki config](../Images/f3021f104032fea4819b8903fef50526.png)

The address of mantis is: testserver/mantisbt/ The address of dokuwiki is: testserver/dokuwiki

What´s the meaning of "Username for Mantis"? The adminstrator of mantis?

The following descriptions shows the way to link to the tickets and the ticket overview:

[http://www.dokuwiki.org/plugin:mantis#usage](http://www.dokuwiki.org/plugin:mantis#usage)

In my mantis I have the following structure

mantisbt/testproject/ticket

so in an wiki article I linked {{mantisbt>testproject}}, like the descriptions says, to show an overview of tickets. but it does not work

so my questions are:

1.  What do I have to configure?
2.  What do I have to write in an aritcle to show an overview of tickets of the project?
3.  What do I have to write in an article to link to a special ticket?

Thanks Best wishes Christine

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T15:21:17.287

I ment that I see a 404 page. But I solved the problem.

The right config is:

Mantisserver:testserver/mantisbt/api/soap/mantisconnect.php?wsdl

A username for mantis: myMantisName

A password: myMantisPassword

Than I had to override the syntax.php in dokuwiki/lib/plugins/mantis with the syntax.php the integration documentation descipes: -> [dokuwiki mantis integration](http://www.mantisbt.org/wiki/doku.php/mantisbt%3aissue:7075%3aintegration_with_dokuwiki)

Now I can open a wiki article and with the following syntax I can link to the mantis ticket 1:

~~Mantis:1~~

# javascript - How to add more data to HTML5 AJAX FormData object

> ID：11522981
> 
> 赞同：0
> 
> 时间：2012-07-17T12:57:43.987
> 
> 标签：javascript, jquery, ajax, html

I am trying to add the `page_id` and `page_slug` to the loop so that when an image is uploaded the details page id and slug go to.

Normally I would use this: `data: { page_id: page_id, page_slug: page_slug }` But formData is there..

```
(function () {
var input = document.getElementById("images"), 
    formdata = false;
var page_id = $('#page_id').val();
var page_slug = $('#page_slug').val();

function showUploadedItem (source) {
    var list = document.getElementById("image-list"),
        li   = document.createElement("li"),
        img  = document.createElement("img");
    img.src = source;
    li.appendChild(img);
    list.appendChild(li);
}   

if (window.FormData) {
    formdata = new FormData();
    document.getElementById("btn").style.display = "none";
}

input.addEventListener("change", function (evt) {
    document.getElementById("response").innerHTML = "Uploading . . ."
    var i = 0, len = this.files.length, img, reader, file;

    for ( ; i < len; i++ ) {
        file = this.files[i];

        if (!!file.type.match(/image.*/)) {
            if ( window.FileReader ) {
                reader = new FileReader();
                reader.onloadend = function (e) { 
                    showUploadedItem(e.target.result, file.fileName);
                };
                reader.readAsDataURL(file);
            }
            if (formdata) {
                formdata.append("images[]", file);
            }
        }   
    }

    if (formdata) {
        $.ajax({
            url: "admin/pages/upload/",
            type: "POST",
            data: formdata,
            processData: false,
            contentType: false,
            success: function (res) {
                document.getElementById("response").innerHTML = res; 
            }
        });
    }
}, false);
}()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T13:48:49.997

我不认为您可以直接在函数内部[`$.ajax`](http://api.jquery.com/jQuery.ajax/)甚至[`$.ajaxSetup`](http://api.jquery.com/jQuery.ajaxSetup/)函数中操作 FormData 对象，因此在以下代码块中添加两个调用 append 应该包含所需的参数。

```
if (window.FormData) {
  formdata = new FormData();
  formdata.append('page_id', page_id);
  formdata.append('page_slug', page_slug);
  document.getElementById("btn").style.display = "none";
} 
```

`page_id`and值是唯一的`page_slug`，因此不需要在循环中附加；创建 FormData 对象后只需一次。

有关更多示例，另请参阅[使用 FormData 对象](http://api.jquery.com/jQuery.ajaxSetup/)。

# c# - Rest Service in .NET

> ID：11522984
> 
> 赞同：0
> 
> 时间：2012-07-17T12:58:02.793
> 
> 标签：c#, .net, visual-studio-2010, rest

I have a Rest Service in Visual Studio (C#). Initially it was working . But When I add a new Rest method, solution build is successful. But when we try to call the old REST methods in the project (for example POST) it is giving me 500 internal server error.

In firebug this what I found:

> XML Parsing Error: no element found Location: moz-nullprincipal:{73793b55-dcc3-45d3-ae2c-eaeb48dfe0f8} Line Number 1, Column 1:

But if I remove my newly added Rest service method, everything works fine.

Can anyone help me out?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:34:21.127

可能是客户端和服务器之间的接口不匹配。您是否使用新的方法定义重建了客户端和服务器？

# facebook - Facebooks email_hashes empty when querying with FQL

> ID：11522986
> 
> 赞同：0
> 
> 时间：2012-07-17T12:58:09.047
> 
> 标签：facebook, facebook-fql

I have an app which can invite a user's Facebook friends. I need to verify if the friends are already registered with my app. Facebook doesn't give friends' emails, so my idea was to get email hashes. I wanted to do this using FQL and email_hashes column from users table [http://developers.facebook.com/docs/reference/fql/user/](http://developers.facebook.com/docs/reference/fql/user/)

> An array containing a set of confirmed email hashes for the user. Emails are registered via the deprecated connect.registerUsers API call and are only confirmed when the user adds your application. The format of each email hash is the crc32 and md5 hashes of the email address combined with an underscore (_).

But when I test my query:

```
SELECT email_hashes FROM user WHERE uid = some_fb_id 
```

..I get an empty array. Is Facebook not supporting email_hashes any more or am I missing something?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:37:57.863

> 我有一个可以邀请用户的 Facebook 朋友的应用程序。

所以你至少有他们的用户ID？

> 我需要验证朋友是否已经在我的应用中注册。

如果你有他们的 id，你可以只查看字段`installed`（Graph API）的用户对象/表。`is_app_user`(FQL)。

> Facebook 不再支持 email_hashes 还是我遗漏了什么？

我不确定，但我想是的。整个概念似乎已被弃用。

# iphone - 在tableview中延迟加载图像

> ID：11522997
> 
> 赞同：1
> 
> 时间：2012-07-17T12:58:33.437
> 
> 标签：iphone, objective-c, ios

我试图以惰性模式加载我的 uitableviewcells 的图像。

我试图以最简单的方式做到这一点，我看到了很多例子，但它们比我的目的更进一步。

这就是我目前正在做的事情，但它不起作用：

```
// Configure the cell...
    Info *info = [self.Array objectAtIndex:indexPath.row];
    cell.textLabel.text = info.name;
    cell.detailTextLabel.text = info.platform;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    //The image is downloaded in asynchronous 

    NSBlockOperation *downloadingImgBlock = [NSBlockOperation blockOperationWithBlock:^{
        NSString* imageURL = info.imgURL;
        NSData* imageData = [[NSData alloc]initWithContentsOfURL:[NSURL URLWithString:imageURL]];
        cell.imageView.image = [UIImage imageWithData:imageData];
    }];
[self.queue addOperation:downloadingImgBlock]; 
```

为什么它不起作用？它是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T12:59:43.120

伙计，[AsyncImageView](https://github.com/nicklockwood/AsyncImageView/)是你的朋友！只需设置图像 url，一切都会为您处理，下载，缓存。这很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T13:18:24.873

试试下面的代码

```
 ......
  __block UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

  __block UIImage *img;
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        img = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString: imageURL]]];

        dispatch_async(dispatch_get_main_queue(),^{

            cell.imageView.image = img;

            }
        });

    });
  ...... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T13:21:18.613

使用 3rd 方库源代码将是最简单的，但这是您将如何在代码中执行此操作。您将要在您的或您的顶部创建`NSMutableArray`一个属性，如下所示：`.h``.m`

```
@implementation viewController{
     NSMutableArray *picList;
} 
```

并且在`-initWithCoder:`或者，无论你重载什么初始化：

```
picList = [[NSMutableArray alloc] init]; 
```

在`– tableView:cellForRowAtIndexPath:`（fullPicURL 是 URL）：

```
if([self imageExists:fullPicURL]){

    shoePic = [picList objectForKey:fullSmallPicURL];   

} else {

    NSURL *picURL = [NSURL URLWithString:fullPicURL];

    shoePic = [UIImage imageWithData:[NSData dataWithContentsOfURL:picURL]];
    NSDictionary *thisImage = [NSDictionary dictionaryWithObject:shoePic forKey:fullSmallPicURL];
    [cachedImages addEntriesFromDictionary:thisImage];
} 
```

您编写的函数在哪里`-imageExists:`检查 url 的字典。对象是图片本身，关键是url。然后你做`cell.image = showPic;`，或者任何你想调用它，你就完成了缓存。为了异步加载它们，请执行以下操作：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    NSData *data = [NSData dataWithContentsOfURL:shoes];
    [self performSelectorOnMainThread:@selector(fetchedShoeData:) withObject:data waitUntilDone:YES];

}); 
```

并在 fetchedData 结束时：

```
[self.tableView reloadData]; 
```

然后只要确保你编辑`–numberOfSectionsInTableView:`改变自己，如果它必须。可能需要做一些其他事情才能使其 100% 正常工作，请告诉我

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T13:20:29.183

试试这个，我总是使用这个方案**来异步加载图像：**

*（我还没有找到最简单的方法。）*

```
- (void)inAnyMethod {

    // ...

    void (^blockLoadPhoto)() =  ^{
        UIImage *_imageTemporary = [UIImage imageNamed:@"..."];
        if (_imageTemporary) {
            [self performSelectorOnMainThread:@selector(setPhoto:) withObject:_imageTemporary waitUntilDone:true];
        }
    };

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), blockLoadPhoto);

    // ...

}

- (void)setPhoto:(UIImage *)photo {
    // do something with the loaded image
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T16:29:54.050

我终于设法通过以下方式设置图像：

```
– performSelectorOnMainThread:withObject:waitUntilDone: 
```

图片下载后