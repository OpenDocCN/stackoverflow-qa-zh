# StackOverflow 问答 11532000-11532999

# java - 将此Objective-C方法转换为Android的Java的正确方法是什么？

> ID：11532002
> 
> 赞同：0
> 
> 时间：2012-07-17T22:59:58.930
> 
> 标签：java, android, regex

这是我的原始方法：

```
- (BOOL)validateEmail:(NSString *)address 
{
    NSString *emailRegEx = @"[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?";
    NSPredicate *emailTest = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", emailRegEx]; 

    return [emailTest evaluateWithObject:address];
} 
```

这就是我想出的。这个对吗？

```
private boolean Validate(String email) 
{
    Pattern pattern = Pattern.compile("[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?");
    Matcher matcher = pattern.matcher(email);
    if(matcher.matches())
    {
        return true;
    }
    else
    {
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:17:36.877

我觉得它看起来不错，尽管我想指出使用 Java 时应该做出的一些区别。

```
// use a pattern as a constant instead, using the Java naming conventions (all uppercase and underscores)
private static final String MAIL_PATTERN = "[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?";

// lower case method identifier, does not use field so declare static
private static boolean validate(final String email) 
{
    // matches already returns a boolean, you can use matches directly on a string (shorthand notation)
    return email.matches(MAIL_PATTERN);
} 
```

# c - 在fuzzyflakes屏幕保护程序中更改实际的薄片颜色

> ID：11532004
> 
> 赞同：0
> 
> 时间：2012-07-17T23:00:09.337
> 
> 标签：c, linux, x11, screensaver

我一直在尝试破解fuzzyflakes屏幕保护程序，以便在选择特定颜色（颜色#A9D691）时将薄片的颜色更改为白色。我似乎无法确切地弄清楚如何做到这一点（我对这些东西有点菜鸟）。

我查看了[代码](http://xscreensaver.sourcearchive.com/documentation/4.21-3/fuzzyflakes_8c-source.html)，看起来薄片的颜色设置在`FuzzyFlakesInit()`函数末尾附近，就在这里：

```
Flake.ForeColor = FuzzyFlakesColorResource(Flake.Colors.Fore);
Flake.BackColor = FuzzyFlakesColorResource(Flake.Colors.Back);
Flake.BordColor = FuzzyFlakesColorResource(Flake.Colors.Bord);

Flake.GCValues.foreground = Flake.ForeColor;
Flake.GCValues.background = Flake.BackColor; 
```

我要做的是首先检查是否设置了特定颜色，如果设置了`Flake.Colors.Fore`变量，请将变量设置为白色。我试过使用这样的代码：

```
if (flake->Colors.Fore == (char) "#A9D691") {
         flake->ForeColor = FuzzyFlakesColorResource(flake, "white");
          } else {
        flake->ForeColor = FuzzyFlakesColorResource(flake, flake->Colors.Fore);
       } 
flake->BackColor = FuzzyFlakesColorResource(flake, flake->Colors.Back);
flake->BordColor = FuzzyFlakesColorResource(flake, flake->Colors.Bord); 
```

可悲的是，像这样的简单黑客攻击不起作用。所以我不知道我是否必须将“#A9D691”转换为其他东西或什么，因为该`FuzzyFlakesColorHelper()`函数似乎已经设置了这些变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:04:14.160

```
if (flake->Colors.Fore == (char) "#A9D691") 
```

将颜色字符串与指向字符串字面量的指针进行比较`"#A9D691"`，转换为 a `char`，它永远不会返回 true。你想比较字符串的值，所以使用`strcmp`

```
if (strcmp(flake->Colors.Fore, "#A9D691") == 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-15T02:03:52.343

抱歉，有错误的颜色算法。从来没有按预期工作，我应该在提交代码之前对其进行更多调试。您必须将更改放入 FuzzyFlakesColorHelper。如果您更改了行：

```
sprintf(Flake.Colors.Fore, "#%02X%02X%02X", iR0, iG0, iB0); 
```

类似于

```
sprintf(Flake.Colors.Fore, "#%02X%02X%02X", 0xFF, 0xFF, 0xFF); 
```

这将使薄片变成白色或简单地更改 FuzzyFlakesInit 中的 Flake.Colors.Fore。

```
 /*
   * Here we establish our colormap based on what is in
   * Flake.Colors.Back
   */
  if (FuzzyFlakesColorHelper())
    {
       fprintf(stderr, " reverting to random\n");
       if (Flake.Colors.Back)
        free(Flake.Colors.Back);
       Flake.Colors.Back = malloc(sizeof(unsigned char) * 8);
       sprintf(Flake.Colors.Back, "#%X%X%X%X%X%X", random() % 16,
             random() % 16, random() % 16, random() % 16, random() % 16,
             random() % 16);
       FuzzyFlakesColorHelper();
    }

  Flake.BackColor = FuzzyFlakesColorResource(Flake.Colors.Back);
  Flake.BordColor = FuzzyFlakesColorResource(Flake.Colors.Bord); 
```

如果您希望能够以十六进制形式#ffffff 指定颜色，则必须通过 FuzzyFlakesColorResource 传递它。这将从该形式转换为 xscreensaver 和 X11 使用的形式。

它的工作方式是你给它的颜色是背景颜色，然后这个颜色算法应该选择边框颜色 (Flake.Colors.Bord) 和薄片颜色 (Flake.Colors.Fore) 如果你完全绕过 FuzzyFlakeColorHelper并手动设置可以解决问题的颜色（这就是原始版本的工作方式，并且颜色被硬编码到原始版本中，但我认为能够指定一种颜色并为您挑选两种类似的颜色会很整洁。 ) 很高兴人们多年后仍然喜欢我的屏幕保护程序，祝你好运。

# javascript - 当 .show jQuery 命令显示父 div 时，加载隐藏在多个 div 中的图像

> ID：11532009
> 
> 赞同：0
> 
> 时间：2012-07-17T23:00:32.790
> 
> 标签：javascript, jquery

我在ASP网站上运行了一个jQuery脚本，该脚本在选择表单的ID匹配DIV的ID时显示隐藏的DIVS：

```
$(document).ready(function(){
    $('select[name$="_77"]').change(function() {
        $(".select_77").hide();
        $(".select_77[id='" + this.value + "']").show();
    })
}) 
```

对于此示例，表单被截断为只有一个选项：

```
<select name="option____jdfhj387___77">
    <option value="1922">Raisins</option>
</select> 
```

这是许多未隐藏的 div 之一：

```
<div id="select_image">
    <div class="select_77" id="1922" style="display:none;">
        <div class="border">
            <div class="content">
                <img src="photos/option/1922.jpg">
            </div>
        </div>
    </div>
</div> 
```

这些照片是中等大小的，当我有 200 多张这些图像时，页面加载大约需要 20-30 秒。是否只有在父 div 可见时才加载图像，而不必手动将每个图像 url 放入脚本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T03:48:47.850

好的，经过几个小时的研究，我想通了。

我找到并添加了代码，该代码重命名了在表单下选择了匹配 ID 的 img 标记的属性。

```
$(document).ready(function(){
    $('select[name$="_77"]').change(function() {
        $(".select_77").hide();
        $(".select_77[id='" + this.value + "']").show();
        $("img.option[realsrc][id='" + this.value + "']").each(function() {
            var $t = $(this);
                $t
                .attr({
                    src : $t.attr('realsrc') /* Copies realsrc attribute and makes a src attribute*/
                })
                .removeAttr('realsrc'); /* Deletes the realsrc attribute */
    });
    })
}) 
```

然后我添加了 class="option" 和 id="#" 并将 src= 重命名为 realsrc=。

```
<img class="option" id="1922" realsrc="photos/option/1922.jpg"> 
```

现在当有人选择与图片ID匹配的选项时，图片的realsrc会被重命名为src，它就会下载并出现！

# google-app-engine - 为什么断点不能在 PyCharm / Intellij 中使用 Google App Engine 与 Python 一起使用？

> ID：11532012
> 
> 赞同：2
> 
> 时间：2012-07-17T23:00:40.113
> 
> 标签：google-app-engine, intellij-idea, pycharm

使用 Google App Engine 在 PyCharm / Intellij 中调试和断点无法与 Python 一起使用是否有原因？

或者如果他们这样做了，您如何配置它以使其工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:46:32.713

您是否正确设置了 PyCharm？

[http://www.jetbrains.com/pycharm/webhelp/google-app-engine.html](http://www.jetbrains.com/pycharm/webhelp/google-app-engine.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:03:22.967

您不会说它是否是 Google App Engine 的远程实例。可能是设置问题：

[http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration.html](http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration.html)

# settimeout - javascript中的setTimeout函数

> ID：11532014
> 
> 赞同：0
> 
> 时间：2012-07-17T23:00:52.807
> 
> 标签：settimeout, alert, showmodaldialog

这就是我想要做的。

有没有办法我可以抛出一个临时警报，它会在 4 秒内消失，这样用户就知道他已经点击了按钮并且结果正在生成。

为什么这一切：当用户单击一个按钮时，我检索已检查行的 id 并构建一个动态 html 表以在显示模式对话框窗口中显示结果。每个行在单独的 div 中。

为什么我使用 setTimeout：我注意到在构建 html 之前会出现 showmodal 对话框，结果有时会出现空白页面。因此，为了让我的动态 html 有时间构建，我调用 setTimeout 函数来调用另一个函数“setTimeout('CallModFunction()',4000);” 在此我调用 showmodal 对话框，因此 html 在对话框窗口中完美显示。

我的问题是：有没有办法我可以抛出一个临时警报，该警报会在 4 秒内消失，这样用户就知道他已经点击了按钮并且结果正在生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:03:26.393

查看 Noty： http: [//needim.github.com/noty/](http://needim.github.com/noty/)

# ruby-on-rails - 我怎样才能让haml在rails中重新编译？

> ID：11532019
> 
> 赞同：2
> 
> 时间：2012-07-17T23:01:03.523
> 
> 标签：ruby-on-rails, haml

我在我的 haml 文件中添加了一个 div：

```
%section.splunk
  .splunk_results Loading splunk data... 
```

稍后将由 ajax 调用填充。但是，即使我重新启动 rails 并导航到该页面，它也没有显示在我的 html 文件中。我的[研究](http://www.mail-archive.com/haml@googlegroups.com/msg05441.html)表明它应该在我加载页面时自动编译——为什么不是这样？

编辑：

haml 文件位于 myAppName/client/order_details.haml。它应该编译成的 HTML 位于 myAppName/public/templates/order_details.html 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T18:38:33.807

使用资产管道将 HAML 文件解释为 HTML 文件，[这要求您的文件位于 app/assets](http://guides.rubyonrails.org/asset_pipeline.html)中。

此外，控制器操作指定将呈现的文件。查看您的 Rails 日志以查看操作实际呈现的文件。

# php - Magento 的 $_weeeHelper->typeOfDisplay() 方法

> ID：11532023
> 
> 赞同：3
> 
> 时间：2012-07-17T23:01:27.570
> 
> 标签：php, magento

我正在调查 Magento 臭名昭著的价格块/`price.phtml`文件，我遇到了一些看起来像错误和/或废弃代码路径的东西，但我想首先由社区运行它以确保我了解正在发生的事情。

在整个文件中，Magento 将在条件调用中使用以下方法

```
$_weeeHelper->typeOfDisplay($_product, 0)
$_weeeHelper->typeOfDisplay($_product, 1)
$_weeeHelper->typeOfDisplay($_product, 4)
$_weeeHelper->typeOfDisplay($_product, 2) 
```

根据我的代码跟踪收集的信息，此方法（称为）最终将第二个参数与两个配置值之一进行比较。任何一个

```
Tax -> Fixed Product Taxes -> Display Prices On Product View Page
Tax -> Fixed Product Taxes -> Display Prices In Product Lists 
```

取决于当前的上下文。如果我们在产品页面上，它是第一个。否则，它假定一个产品列表页面。（并且“在产品页面上”意味着在 中设置了一个值`Mage::registry('current_product')`）。

**除了**以下调用之外，这一切都很好

```
$_weeeHelper->typeOfDisplay($_product, 4) 
```

这些配置字段的唯一可能值是 0 - 3。没有“4”。

那么，第一个问题：以上是否准确描述了该`typeOfDisplay`方法的行为？（假设`null`为`$zone`参数）

第二个问题：如果是这样，是否存在（或是否存在）Magento 版本，其中值“4”存储在

```
Tax -> Fixed Product Taxes -> Display Prices In Product Lists
Tax -> Fixed Product Taxes -> Display Prices On Product View Page 
```

场地？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T00:52:41.513

好吧，也许这是部分答案...

在 CE 1.3.3.0 中，似乎确实存在`4`.

```
class Mage_Weee_Model_Config_Source_Display
{

    public function toOptionArray()
    {
        return array(
            array('value'=>0, 'label'=>Mage::helper('weee')->__('Including FPT only')),
            array('value'=>1, 'label'=>Mage::helper('weee')->__('Including FPT and FPT description [excl. FPT VAT]')),
            array('value'=>4, 'label'=>Mage::helper('weee')->__('Including FPT and FPT description [incl. FPT VAT]')),
            array('value'=>2, 'label'=>Mage::helper('weee')->__('Excluding FPT, FPT description, final price')),
            array('value'=>3, 'label'=>Mage::helper('weee')->__('Excluding FPT')),
        );
    }

} 
```

# python - 如何将python callable作为“block”类型的参数传递给objc方法

> ID：11532025
> 
> 赞同：1
> 
> 时间：2012-07-17T23:01:28.843
> 
> 标签：python, objective-c, pyobjc

我有一个像这样的 objc 方法；

```
@ implementation of Class1

- (void)execute:(void (^)(Class2* target, NSUInteger idx))block
{
... 

} 
```

我想在 python 中使用这个执行方法，我已经构建了一个 python Objective-c 桥数据，它似乎正确生成为：

```
<class name='Class1'>
<method selector='execute:'>
<arg function_pointer='true' type='@?' index='0'>
    <arg type='@'/>
    <arg type='I' type64='Q'/>
    <retval type='v'/>
</arg>
</method> 
```

但是当我定义这样的函数时：

```
def myFunc (dev, index):
    // do something with dev
    print("Hello") 
```

并尝试将其用作块

```
class1_obj.execute_(myFunc) 
```

Python 抛出错误：

```
objc.BadPrototypeError: Objective-C expects 1 arguments, Python argument has 2 arguments for <unbound selector myFunc at 0x105b3a3f0> 
```

我也试过用 lambda 函数，没用。

我还尝试创建一个可调用类：

```
>>> class myCallable(object):
...     def __init__(self,name):
...             print "Init"
...     def __repr__(self):
...             return "string init"
...     def __call__(self, dev, index):
...             # do something with dev
...             print("hello") 
```

但是python会抛出这样的错误：

```
TypeError: Sorry, cannot create IMP for instances of type myCallable 
```

我想知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T04:09:09.853

感谢乔希的建议。

终于解决了这个问题。看起来系统使用命令行 gen_bridge_metadata 生成的 meta_data 以某种方式未正确读取。它被生成为：

```
<method selector='execute:'>
<arg index='0' type='@?' function_pointer='true'>
<arg type='@'/>
<arg type64='Q' type='I'/>
<retval type='v'/>
</arg>
</method> 
```

但是在我将 function_pointer 更改为 block 之后，它就可以工作了。我通过阅读块的 pyobjc 单元测试得到了这个。

```
<method selector='execute:'>
<arg index='0' type='@?' block='true'>
<arg type='@'/>
<arg type64='Q' type='I'/>
<retval type='v'/>
</arg>
</method> 
```

我不确定是什么原因造成的。Apple Doc 说 if type="@?" 而function_pointer='true'，则视为块。如果类型=“#？” 和 function_pointer="true"，它将被解释为 function_pointer。但是为什么 pyobjc 不能识别呢？这是 pyobjc 中的错误吗？

# java - 如何在 JLabel 中格式化文本

> ID：11532028
> 
> 赞同：4
> 
> 时间：2012-07-17T23:01:46.340
> 
> 标签：java, swing, jlabel

我需要以这种格式显示 JLabel 文本。

```
Hoffenheim  1 : 0  Koeln
    Bayern  2 : 1  HSV 
```

我只是无法完成这件事。我试过`String.format()`没有运气。有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T23:20:31.730

您可以使用 HTML。阅读[如何在 Swing 组件中使用 HTML 以](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)了解详细信息。例如，您可以构建一个表，类似于以下内容：

```
import javax.swing.JLabel;
import javax.swing.JOptionPane;

public class StringDemo {

    public static void main(String arg[]){

        StringBuilder buff = new StringBuilder();
        buff.append("<html><table>");
        buff.append(String.format("<tr><td align='right'>%s</td><td>:</td><td>%s</td></tr>", "Hoffenheim  1", "0  Koeln"));
        buff.append(String.format("<tr><td align='right'>%s</td><td>:</td><td>%s</td></tr>", "Bayern  2", "1  HSV"));
        buff.append("</table></html>");

        JOptionPane.showMessageDialog(null, new JLabel(buff.toString()));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T23:09:15.187

`String.format()`用于将内容插入到特殊格式的字符串中，而不是以不同的方式显示字符串。然而，JLabels 和其他 Swing 组件确实允许使用 HTML，这可能会为您提供所需的内容。

```
new JLabel("<html><pre>         Hoffenheim  1 : 0  Koeln</pre></html>");
new JLabel("<html><pre>             Bayern  2 : 1  HSV</pre></html>"); 
```

也就是说，看起来您要求的是将文本围绕这些冒号居中，而不仅仅是让它们距离边缘有给定数量的空格。这会有点棘手，但仍有可能。为此，您实际上需要将所有内容分成几个标签并将它们排列在一个网格中（我发现[MigLayout](http://www.miglayout.com/)非常适合这样的事情）。

创建六个 JLabel，[左、右或居中对齐](http://www.java2s.com/Code/Java/Swing-JFC/AsimpledemonstrationoftextalignmentinJLabels.htm)它们，然后像​​这样拖放到网格中：

```
| Hoffenheim  1 | : | 0  Koeln |
|     Bayern  2 | : | 1  HSV   | 
```

显然，您可以禁用边框等，这样在用户看来，除了格式良好的文本之外，它不会是任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T23:17:07.073

从 dimo414 答案扩展，您实际上可以使用 HTML 表格

```
StringBuilder sb = new StringBuilder(128);

sb.append("<html>");
sb.append("<table border='0'>");
sb.append("<tr>");
sb.append("<td align='right'>Hoffenheim</td>");
sb.append("<td align='center'>1</td>");
sb.append("<td align='center'>:</td>");
sb.append("<td align='center'>0</td>");
sb.append("<td align='left'>Koeln</td>");
sb.append("</tr>");
sb.append("<tr>");
sb.append("<td align='right'>Bayern</td>");
sb.append("<td align='center'>2</td>");
sb.append("<td align='center'>:</td>");
sb.append("<td align='center'>1</td>");
sb.append("<td align='left'>HSV</td>");
sb.append("</tr>");
sb.append("</table>");
sb.append("</html>");

label.setText(sb.toString()); 
```

虽然这要复杂得多，但它为您提供了更大的格式化灵活性。

# scala - Scala 不使用 heroku 示例

> ID：11532030
> 
> 赞同：1
> 
> 时间：2012-07-17T23:02:03.313
> 
> 标签：scala, heroku

我正在按照教程在此处使用 Heroku 创建 scala Web 应用程序：[https ://devcenter.heroku.com/articles/scala](https://devcenter.heroku.com/articles/scala)

我已经完全复制了那里的例子，但是当我运行时

```
sbt clean compile stage 
```

由于以下错误，它无法编译：

```
[error] /home/ajcrites/dev/dyl/src/main/scala/Web.scala:1: object jboss is not a member of package org
[error] import org.jboss.netty.handler.codec.http.{HttpRequest, HttpResponse}
[error]            ^
[error] /home/ajcrites/dev/dyl/src/main/scala/Web.scala:2: object twitter is not a member of package com
[error] import com.twitter.finagle.builder.ServerBuilder
[error]            ^
[error] /home/ajcrites/dev/dyl/src/main/scala/Web.scala:3: object twitter is not a member of package com
[error] import com.twitter.finagle.http.{Http, Response}
[error]            ^
[error] /home/ajcrites/dev/dyl/src/main/scala/Web.scala:4: object twitter is not a member of package com
[error] import com.twitter.finagle.Service
[error]            ^
[error] /home/ajcrites/dev/dyl/src/main/scala/Web.scala:5: object twitter is not a member of package com
[error] import com.twitter.util.Future
[error]            ^
[error] 5 errors found 
```

基本上，我认为这与我拥有的软件包中不可用或不可用或其他东西有关。但是，我不知道如何安装 finagle，上面的教程和[https://github.com/twitter/finagle都没有说明](https://github.com/twitter/finagle)

我该怎么做才能编译它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:10:13.057

如果将取决于您要使用的 Scala 和 Finagle 的版本，但是要将 Finagle 添加到项目中，只需将以下内容添加到 build.sbt

```
libraryDependencies += "com.twitter" % "finagle-core_2.9.1" % "1.11.0" exclude("org.apache.thrift", "libthrift")

libraryDependencies += "com.twitter" % "finagle-http_2.9.1" % "1.11.0"

libraryDependencies += "com.twitter" % "finagle-serversets_2.9.1" % "1.11.0" excludeAll(
  ExclusionRule(organization = "com.sun.jdmk"),
  ExclusionRule(organization = "com.sun.jmx"),
  ExclusionRule(organization = "javax.jms")
) 
```

这个例子大约有 3 个月的历史，所以我相信你可以获得更新版本的 Finagle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T13:39:19.667

我尝试了代码，它对我有用。也许看看 GitHub 上的源代码是否有效： [https ://github.com/heroku/devcenter-scala](https://github.com/heroku/devcenter-scala)

# asp.net-mvc - 将 .NET 数据库迁移到共享主机

> ID：11532037
> 
> 赞同：0
> 
> 时间：2012-07-17T23:02:27.717
> 
> 标签：asp.net-mvc, database, asp.net-mvc-3, entity-framework, c#-4.0

使用 EF 代码优先数据库在本地构建应用程序 - 不知道如何将其上传到共享托管环境，例如 GoDaddy。这是有道理的，因为在共享主机上你的代码不能只是去创建一个数据库，但另一方面我找不到任何东西来复制 CREATE sql 并像你一样在服务器上创建它MySQL

感觉有点傻，因为我已经使用 .NET 一年多了，但是在工作中，数据库已经设置好了，我们可以完全控制我们的环境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:48:00.607

如果数据库没有您需要保留的数据，最简单的方法就是在新主机上安装应用程序并将连接字符串设置为主机上的新数据库。在第一次尝试加载访问数据库的页面时，将自动创建数据库（请注意，您需要加载访问数据库的页面 - 有时主页是不够的）。这种方法比生成 SQL 然后在生产数据库上执行要简单得多。

如果有需要保留的数据，那么最好的方法是进行备份并将备份安装在主机上。在 SSMS 中，只需右键单击左侧窗格中的数据库，然后单击工具 > 备份... 要在服务器上还原连接到 SSMS 中的服务器，然后右键单击左侧面板中的“数据库”节点并选择“还原数据库”。 ..' 我不确定主机是否提供来自 SSMS 的直接连接，但它们至少应该具有恢复 .bak 文件的机制。

展望未来，您应该确保可以在数据库上执行 SQL，因为部署 EF 迁移的一种非常方便的方法是在开发服务器上生成 SQL 更新脚本，然后通过在生产中执行它来部署它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:00:10.993

根据您的网络主机，您可能能够恢复数据库。如果这是一个选项，只需在本地计算机上备份数据库并通过管理控制台在服务器上恢复它。

您可以使用 SQL Server 管理控制台备份本地数据库。这甚至适用于较大的数据库，因为您可以直接恢复所有数据、架构等。

到目前为止，我已经体验过三个不同的主机，他们都可以选择这个。您通常会在网站的“数据库”选项卡下找到它。剩下的由你决定，因为它通常在不同的主机上是不同的。

# peoplesoft - 有没有人在 PeopleSoft 页面中使用 SmartyStreets 进行地址验证？

> ID：11532039
> 
> 赞同：1
> 
> 时间：2012-07-17T23:02:31.633
> 
> 标签：peoplesoft, smartystreets

我们订阅了 SmartyStreets 并已成功使用 MSSql.Net，但想申请 PeopleSoft 页面以进行地址验证和格式化。任何代码建议会有帮助吗？是否必须通过 PSoft 集成代理？（在 IB 方面不是很有经验）有什么安全问题需要处理吗？我们在 Unix 操作系统上使用 Oracle 数据库。提前感谢您的任何帮助。玛莎

# c# - 如何使用包含查询与 nhibernate 相关的对象

> ID：11532042
> 
> 赞同：2
> 
> 时间：2012-07-17T23:02:55.177
> 
> 标签：c#, linq, nhibernate

我对 NHibernate 比较陌生，所以这个应该很容易：

```
 public IList<Ad> Search(string query)
    {
        return unitOfWork.Session
            .QueryOver<Ad>()
            .JoinQueryOver<AdProperty>(x => x.Properties)
                .Where(ad => ad.Value.Contains(query))
            .List();
    } 
```

当然，我要做的是搜索 Ads，其中 AdProperty 包含某个字符串，然后将相应的 Ad 对象作为结果传回。（我意识到这不会导致最佳查询，但现在就足够了）

**问题**

我不能使用 .Contains，因为它无法识别。那么我如何使用 NHibernate 正确地做到这一点？

我看过[NHibernate 查询寻找相关对象的相关对象](https://stackoverflow.com/questions/2620589/nhibernate-query-looking-for-the-related-objects-related-object)，但我无法让它发挥作用。

**笔记**

我正在使用 NHibernate 3.0+

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:28:06.840

经过更多的摆弄，我得到了这个例子（上面提到的）工作。我将留下我的解决方案以供其他人参考。

```
 public IList<Ad> Search(string query)
    {
        return unitOfWork.Session
            .CreateCriteria<Ad>()
            .CreateAlias("Properties", "props")
            .Add(Expression.InsensitiveLike("props.Value", query, MatchMode.Anywhere))
            .List<Ad>();
    } 
```

希望它可以帮助某人:-)

# jira - 从 TestTrack 迁移到 JIRA

> ID：11532047
> 
> 赞同：0
> 
> 时间：2012-07-17T23:03:18.653
> 
> 标签：jira, jira-plugin, testtrack

从 TestTrack 迁移到 JIRA 涉及哪些步骤？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T17:56:09.207

在过去的 5 年里，我做了一些从 TestTrack 到 JIRA 的迁移。它总是比我预期的要多（几周而不是几天）。我所做的迁移使用了一个自定义迁移应用程序，该应用程序从 TestTrack 数据库（不是最简单的模式）中读取数据，然后使用自定义 SOAP API 将其导入 JIRA。现在我想我可能会采用更专注的方法，并使用单个自定义脚本来创建适合 JIRA CSV 导入器的 CSV。这将为您提供问题字段、评论和附件。链接是独立的东西，但没有问题历史。

JIRA CSV 导入器可以工作，尽管数据的扁平化限制了它可以做的事情。最困难的事情通常是将值从一个系统映射到另一个系统 - 两个系统中的用户 ID*真的*相同吗？

如果您想调查商业迁移，请联系 info@customware.net（我的雇主）

# haskell - 'Const' 应用函子有什么用？

> ID：11532050
> 
> 赞同：30
> 
> 时间：2012-07-17T23:03:26.510
> 
> 标签：haskell, functor, applicative

我刚刚`Const`在 的文档中找到了`Control.Applicative`，但我很难弄清楚这在哪里有用，而不是直接使用`Monoid`。

我错过了什么？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-17T23:32:28.553

与`Traversable`.

```
getConst . traverse Const :: (Monoid a, Traversable f) => f a -> a 
```

这是将一堆东西粘在一起的一般方法。这是让我相信值得`Applicative`从`Monad`. 我需要通用的东西`elem`

```
elem :: Eq x => x -> Term x -> Bool 
```

`Traversable Term`对由自由变量表示的参数进行发生检查。我一直在改变 的表示，`Term`我厌倦了修改无数的遍历函数，其中一些是在做累积，而不是有效的映射。我很高兴找到一个涵盖两者的抽象。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T10:33:15.697

当您拥有适用于所有 ( `Applicative`)`Functor`的函数或数据结构并希望在退化的意义上重用它时，它很有用。它类似于传入`const`或传递`id`给给定任意函数的函数。

[Van Laarhoven 透镜](http://www.twanvl.nl/blog/haskell/cps-functional-references)是根据任意 Functor 定义的，并用于`Const`派生字段访问器（以及派生字段更新器同样微不足道`Identity`）。

[`Traversable`](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.5.1.0/Data-Traversable.html)正如 pigworker 所提到的，类型是另一个例子。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-10T15:07:52.963

正如 dave4420 所提到的，为 Van Laarhoven 镜头实现访问器和更新器涉及`Const`函子。详细说明：

```
{-# LANGUAGE Rank2Types #-}

import Control.Applicative
import Control.Monad.Identity

-- The definition of Van Laarhoven lenses:
type Lens a b = forall f . Functor f => (b -> f b) -> (a -> f a)

-- Getter passes the Const functor to the lens:
get :: Lens a b -> a -> b
get l = getConst . (l Const)

-- Updater passes the Identity functor to the lens:
modify :: Lens a b -> (b -> b) -> (a -> a)
modify l f = runIdentity . l (Identity . f)

set :: Lens a b -> b -> (a -> a)
set l r = modify l (const r)

-- Example: -------------------------------------------

data Person = Person { _name :: String, _age :: Int }
  deriving Show

name :: Lens Person String
name f (Person n a) = fmap (\x -> Person x a) (f n)

age :: Lens Person Int
age f (Person n a) = fmap (\x -> Person n x) (f a)

main :: IO ()
main = do
    let john = Person "John" 34
    print $ get age john
    print $ set name "Pete" john 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-08T07:59:49.740

正如 Gabriel Gonzalez 所指出的，Const 用于为镜头提供 Getter。[http://hackage.haskell.org/package/lens-tutorial-1.0.0/docs/Control-Lens-Tutorial.html](http://hackage.haskell.org/package/lens-tutorial-1.0.0/docs/Control-Lens-Tutorial.html)。在那里你只使用 Const 是一个仿函数。

对于遍历，您需要完整的 Applicative 行为，它成为另一个答案中描述的 pigworker 。

# sql-server - 没有事务的 sp_getapplock

> ID：11532055
> 
> 赞同：8
> 
> 时间：2012-07-17T23:03:56.533
> 
> 标签：sql-server, tsql, locking, sql-server-2008-r2

我正在实现内部没有事务的存储过程。实际上，它会，但仅在特定地点将时间减少到最低限度。存储过程的性质是我一次只想要一个运行。

我尝试使用 sp_getapplock 但很快发现它需要在事务内部。

有没有其他选择可以锁定整个过程但不将其包装到事务中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-17T23:14:42.347

通过 @LockOwner 传入 Session 以获得 Session 范围的锁；获取锁定时，这不需要事务处于活动状态。

例如

```
EXEC @res = sp_getapplock @Resource = 'Lock ID', @LockOwner = 'Session', @LockMode = 'Exclusive';
..
code
..

EXEC @res = sp_releaseapplock @Resource = 'Lock ID'; 
```

# sql - DynamicSQL 使用 sp_executesql 错误

> ID：11532056
> 
> 赞同：2
> 
> 时间：2012-07-17T23:04:06.963
> 
> 标签：sql, sql-server-2008, stored-procedures, dynamic-sql, sp-executesql

我不断收到以下存储过程的错误。我使用 EXEC 让它正常工作，然后我切换到 sp_executesql 并且我无法让它执行。我不断收到以下错误：“@numberOfItems”附近的语法不正确。

```
ALTER PROCEDURE dbo.FetchResourcesToProcess
(
@tableName nvarchar(MAX),
@numberOfItems int
)
AS
    BEGIN
        DECLARE @SQL nvarchar(MAX);
        SET NOCOUNT ON;
        SET @SQL = N'Select TOP @numberOfItems * from ' + @tableName + N' where Active = 1 AND BeingProcessed = 0'
        EXEC sp_executesql @SQL, N'@numberOfItems int', @numberOfItems
    END 
```

表名是一个结构如下的字符串：“[TABLENAME]”。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:07:14.910

您可能需要以与表名相同的方式将项目数放入字符串中 SET @SQL = N'Select TOP ' + Convert(varchar(10),@numberOfItems) + ' * from ' + @tableName + N'其中 Active = 1 AND BeingProcessed = 0'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-18T11:47:02.470

**我认为您只能在允许变量的位置使用 sp_executesql 语句的参数。**

```
use master;
declare @numberOfItems  int;
set @numberOfItems  =   2;
Select TOP @numberOfItems * from dbo.spt_values 
```

> “@numberOfItems”附近的语法不正确。

```
use master;
declare @table  varchar(max);
set @table  =   'dbo.spt_values';
Select * from @table 
```

> 必须声明表变量“@table”。

```
use master;
declare @numberOfItems  int;
set @numberOfItems  =   2;
Select TOP(@numberOfItems) * from dbo.spt_values 
```

> （2 行受影响）

**解决方案1（括号，推荐）：**

```
 SET @SQL = N'Select TOP(@numberOfItems) * from ' + @tableName + N' where Active = 1 AND BeingProcessed = 0' 
```

**解决方案2（串联，一定要防止SQL注入！）：**

```
 SET @SQL = N'Select TOP '+cast(@numberOfItems as nvarchar(MAX))+' * from ' + @tableName + N' where Active = 1 AND BeingProcessed = 0'
        EXEC sp_executesql @SQL 
```

# macros - 减少“for”理解重复

> ID：11532058
> 
> 赞同：2
> 
> 时间：2012-07-17T23:04:17.133
> 
> 标签：macros, clojure, code-duplication, for-comprehension

[在我对Clojure For Comprehension 示例](https://stackoverflow.com/q/11530574/151650)的回答中，我想删除一些重复项：

```
(def all-letters (map char (range 65 90)))
(defn kw [& args] (keyword (apply str args)))
(concat
  (for [l all-letters] (kw l))
  (for [l all-letters l2 all-letters] (kw l l2))
  (for [l all-letters l2 all-letters l3 all-letters] (kw l l2 l3))) 
```

我想删除“for”重复。我写了以下宏：

```
(defmacro combine [times]
 (let [symbols (repeatedly times gensym)
       for-params (vec (interleave symbols (repeat 'all-letters)))]
    `(for ~for-params (kw ~@symbols)))) 
```

适用于：

```
 (concat (combine 1) (combine 2) (combine 3)) 
```

但如果我尝试：

```
 (for [i (range 1 4)] (combine i)) 
```

我得到：

```
CompilerException java.lang.ClassCastException: clojure.lang.Symbol cannot be cast to java.lang.Number, compiling:(NO_SOURCE_PATH:177) 
```

到底是怎么回事？有没有更好的方法来删除重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:13:02.400

您的问题是这`combine`是一个在编译时扩展的宏。当您尝试扩展符号`i`时，它会失败，因为它被设计为采用数字（次）。`i`只是编译时的一个符号，它只在运行时计算为数值。

我建议重写`combine`为一个函数而不是一个宏：你在这里并不需要宏，而且函数通常更方便（就像在这种情况下！）。

这是一个递归组合，它可能大致完成您想要的操作：

```
(defn combine
    ([times] (combine times nil))
    ([times letters]
      (if (<= times 0)
        (keyword (apply str letters))
        (flatten (for [l all-letters] (combine (dec times) (cons l letters))))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T04:28:27.093

您可以修改宏，使其`concat`成为宏的一部分，如下所示。但我同意 Mikera 的观点，最好有一个函数。

```
(defmacro combine [start end]
 `(concat
      ~@(for [i (range start end)]
          (let [symbols (repeatedly i gensym)
             for-params (vec (interleave symbols (repeat 'all-letters)))]
          `(for ~for-params (kw ~@symbols))))))

user=> (combine 1 2)
(:A :B :C :D :E :F :G :H :I :J :K :L :M :N :O :P :Q :R :S :T :U :V :W :X :Y) 
```

# python - 从标准库向 Python 字典添加属性

> ID：11532060
> 
> 赞同：14
> 
> 时间：2012-07-17T23:04:26.463
> 
> 标签：python, dictionary, attributes

我想知道您是否可以向 Python 字典添加属性？

```
class myclass():
    def __init__(): 
     self.mydict = {}  # initialize a regular dict
     self.mydict.newattribute = "A description of what this dictionary will hold"
     >>> AttributeError: 'dict' object has no attribute 'newattribute'
     setattr(self.mydict, "attribute", "A description of what this dictionary will hold"
     >>> AttributeError: 'dict' object has no attribute 'newattribute' 
```

无论如何可以快速添加我的描述属性，而无需复制 dict 类并重载构造函数。我以为这很简单，但我想我错了。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-17T23:06:18.853

只是从`dict`：

```
class MyDict(dict):
    pass 
```

实例的`MyDict`行为类似于 a `dict`，但可以具有自定义属性：

```
>>> d = MyDict()
>>> d.my_attr = "whatever"
>>> d.my_attr
'whatever' 
```

# django - 将使用来自项目中多个应用程序的信息的视图和模板放置在何处？

> ID：11532063
> 
> 赞同：1
> 
> 时间：2012-07-17T23:04:42.087
> 
> 标签：django, django-templates, django-views

我正在尝试找出在具有多个应用程序的 django 项目中安排视图/模板的一般准则，以便这些应用程序保持相当可重用。

具体示例：我有一个 django 项目，其中包含三个主要应用程序：
- `accounts`：管理用户帐户相关内容
- `reports`：生成报告
- `courses`：管理课程内容

我`\templates`在项目中也有一个目录，它下面有三个目录，分别对应三个应用程序。在处理单个应用程序元素的页面上，这种细分对我来说效果很好。

但是，有些视图和页面需要显示从所有三个应用程序收集的信息。例如，我可能想显示一个概述页面，其中包含用户付款状态（帐户）、他过去的报告（报告）和他当前的课程（课程）。

我了解应用程序必须尽可能保持独立。对于不明确属于一个应用程序但从不同应用程序导入的地点视图/模板的指导方针是什么？我应该创建一个特定于项目的应用程序来保存这些视图/模板吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:14:48.050

这取决于制作这些共享模板所需的可重用性。我经常只是将这些模板放入“共享”目录中。有时我会有一个适用于整个项目的“共享”，有时我会有一个在应用程序内共享的。这仅取决于最适合您的方法。

# objective-c - 从未知的字典键名中读取 iOS Plist 值？

> ID：11532068
> 
> 赞同：0
> 
> 时间：2012-07-17T23:05:21.620
> 
> 标签：objective-c, arrays, dictionary, nsmutabledictionary

我有以下 PLIST，需要访问嵌套在字典中的 Assistant Identifier。问题是 Accounts 下的第一个键（以 4FD9E669... 开头）对于每个设备都是唯一的。如何在不知道字典键的情况下返回助手标识符？

这是我的PLIST：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Accounts</key>
    <dict>
        <key>4FD9E669-A5EA-4526-A6D2-0440858221A6</key>
        <dict>
            <key>Assistant Identifier</key>
            <string>05483ADC-23E1-400E-83E8-F7365063F56F</string>
            <key>Last Assistant Data Anchor</key>
            <string>c1e3ad3c51d7fb962b29ca2deb4990c0f6ae8962</string>
            <key>Speech Identifier</key>
            <string>dcaf7c87-c023-456c-a200-7db8bd5e10f1</string>
            <key>Validation Expiration</key>
               <date>2012-07-17T22:37:37Z</date>
        </dict>
    </dict>
    <key>Session Language</key>
    <string>en-US</string>
</dict>
</plist> 
```

如果 A.Identifier 已知，我已经尝试了以下方法......（这没有帮助）

```
NSString* filename = @"/var/mobile/Library/Preferences/com.apple.assistant.plist";
NSMutableDictionary* prefs = [[NSMutableDictionary alloc] initWithContentsOfFile:filename];

NSMutableDictionary* nestedPrefs = (NSMutableDictionary*)[prefs valueForKey:@"Accounts"];

NSMutableDictionary* aPrefs = (NSMutableDictionary*)[nestedPrefs valueForKey:@"4FD9E669-A5EA-4526-A6D2-0440858221A6"];

NSString* assistantPref = (NSString*)[aPrefs valueForKey:@"Assistant Identifier"];

UIAlertView *theAlert = [[UIAlertView alloc] initWithTitle:@"Assistant Identifier" message:assistantPref  delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK", nil];
[theAlert show];
[theAlert release]; 
```

请帮忙！谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:05:46.880

乍一看，您可以遍历所有键，直到找到您想要的键。

```
for (NSString *key in [nestedPrefs allKeys]) {
    // Pick which key is the one you want
} 
```

我不认为你需要这样做。这是跳过找到正确密钥的步骤的逻辑。

```
for (NSMutableDictionary *aPrefs in [nestedPrefs allValues]) {
    NSString* assistantPref = [aPrefs valueForKey:@"Assistant Identifier"];
    if (assistantPref) {
       // Whatever you need.
    }
} 
```

希望有帮助。

# javascript - 在 if 语句中定义 JavaScript 变量

> ID：11532072
> 
> 赞同：58
> 
> 时间：2012-07-17T23:05:39.020
> 
> 标签：javascript, variables, if-statement

在 if 语句中定义 JavaScript 变量是否正确？

```
if(a==1){
    var b = 1;
} else {
    var b = 0;
} 
```

我知道上面的代码会起作用，但是，WebMatrix 会突出显示变量。

我应该在 if 语句之外定义变量吗？还是第一个选项是正确的？还是真的不重要？

```
var b = '';
if(a==1){
    b = 1;
} else {
    b = 0;
} 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-17T23:07:23.263

从 ES2017 规范 (2017-07-08) 的正式发布开始，EcmaScript现在**确实**`let`支持使用or`const`关键字的真正块作用域。

* * *

由于 ECMAscript 没有*块作用域*而是*函数作用域*，因此在函数上下文的顶部声明任何变量是一个非常好的主意。

即使您*可以*在函数上下文中的任何位置进行变量和函数声明，但如果您没有完全意识到后果，它会非常令人困惑并且会带来一些奇怪的头痛。

头痛示例：

```
var foo = 10;

function myfunc() {
    if (foo > 0) {
        var foo = 0;
        alert('foo was greater than 0');
    } else {
        alert('wut?');
    }
} 
```

你猜怎么着，我们得到了一个'wut？在这里打电话时提醒`myfunc`。这是因为 ECMAscript 解释器会自动将任何语句和*函数声明**提升*到上下文的顶部。基本上，在第一个.`var`*`foo``undefined``if statement`*

 *进一步阅读：[JavaScript 作用域和提升](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-18T23:49:12.493

请注意，ECMAscript 6 确实支持使用 'let' 而不是 'var' 关键字的块级变量。虽然使用 'var' 声明的变量无论在何处声明都被提升为函数范围，但使用 'let' 定义的变量仅作用于封闭块。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T23:09:34.773

将 var 放在 if 语句中并不违反语言的“规则”，但这意味着，由于 var 提升，无论 if 语句的条件是否满足，都会定义该 var。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T23:07:44.690

请参阅JavaScript 中变量`four`的[范围是什么？](https://stackoverflow.com/questions/500431/javascript-variable-scope)

截至 2012 年，JavaScript 中没有块级范围。所以你的第一个版本很好：变量是在`if`块外的范围内定义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T23:11:49.400

因为 JavaScript 的变量具有函数级范围，所以您的第一个示例有效地重新声明了您的变量，这可以解释为什么它被突出显示。

在旧版本的 Firefox 上，其严格的 JavaScript 模式用于警告这种重新声明，但其中一位开发人员抱怨说它限制了他的风格，所以警告被关闭了。（当前版本的 Firefox 支持块级变量声明语法。）*

# c# - 如何在不需要输入的情况下退出控制台应用程序

> ID：11532074
> 
> 赞同：2
> 
> 时间：2012-07-17T23:05:53.163
> 
> 标签：c#, console-application

`x`当用户键入而无需按 Enter 键时，退出应用程序的最佳方式是什么。我正在使用的当前代码是这样的：

```
Console.WriteLine("\nType x to exit > ");
string test = Console.ReadLine();
while (test != "x")
{
    Console.WriteLine("\nType x to exit > ");
    test = Console.ReadLine();
} 
```

这将使用户体验更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:08:02.763

您可以改用[Console.ReadKey](http://msdn.microsoft.com/en-us/library/x3h8xffw)。

> 获取用户按下的下一个字符或功能键。按下的键可选地显示在控制台窗口中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:08:56.517

`Console.ReadKey()`让您读取单个按键。`Console.readLine()`正在等待线路终止。这是供参考的文档：

[http://msdn.microsoft.com/en-us/library/471w8d85.aspx](http://msdn.microsoft.com/en-us/library/471w8d85.aspx)

您可以读取第一个字符，然后如果它不是“x”，则读取行输入（并在之前收到的第一个字符前面）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:09:41.873

你可以这样做：

```
do
{
    Console.WriteLine("\nType x to exit > ");
}
while (Console.ReadKey().KeyChar != 'x'); 
```

# java - 如何使用 Java 在图像中搜索特定图像/徽标/标志等？

> ID：11532077
> 
> 赞同：0
> 
> 时间：2012-07-17T23:06:04.293
> 
> 标签：java, image, search, image-recognition

我正在为我的叔叔（他正在竞选某个政治职位）创建一个小游戏，这是一个“查找标志”游戏，用户会看到一张图片，然后他们搜索并点击图片中的标志。例如，向用户展示了建筑物的图片，例如商店或其他东西，他们需要单击已在窗口中张贴的活动标志。有不同种类的标志，但它们都有相同的标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:22:09.823

如果你真的想走图像识别的道路，有一些众所周知的算法。尝试谷歌搜索一些，但你可以看看一些是[SIFT](http://en.wikipedia.org/wiki/Scale-invariant_feature_transform)的[SURF](http://en.wikipedia.org/wiki/SURF)例如。不过，让某些东西工作可能需要相当大的努力——也许你可以寻找一个库实现。

但是，在您的情况下，这似乎有点矫枉过正。如果它像你所说的那样是一个小游戏，我猜你将展示一个不太多的图像。您可以使用您正在寻找的徽标的坐标来注释每个图像，例如用一个简单的矩形，并检查用户是否在该预定区域内单击。这是每个图像的少量手动开销 - 可能不会比您已经手动将每个图像打包到应用程序/数据库中的开销大多少。

例如，一个简单的硬编码地图就可以了。您可能会想到更好的方法。

```
Map<String,Rectangle> mapLogoLocationToImage = new HashMap<String,Rectangle>();
mapLogoLocationToImage.put("post_office.png",new Rectangle(1,1,5,5);
mapLogoLocationToImage.put("office_block.png",new Rectangle(3,7,4,6);
.
. 
```

# image-processing - 如何使用 OpenCV 检测纸上的配准标记？

> ID：11532078
> 
> 赞同：7
> 
> 时间：2012-07-17T23:06:10.613
> 
> 标签：image-processing, opencv, computer-vision

我一直在尝试找到检测纸张上 4 个黑色方块并使用它们将纸张隔离在其自身图像中的最佳方法。

![在此处输入图像描述](../Images/cc269059d16fe5f74e7e5f7a9901d141.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T07:10:43.653

看来您的图像上只有 4 个黑色方块，所以您需要做的是：

1.  将图像转换为灰度
2.  做阈值
3.  查找黑色轮廓（在 OpenCV 中执行此操作之前，您必须反转图像，因为默认情况下 OpenCV 会找到白色轮廓）
4.  循环遍历这些轮廓并找到边界矩形。
5.  做检查：

    A）矩形的面积大于某个常数（在我的解决方案中是**100**）

    B）矩形的宽度/高度接近 1.0（在我看来它是**[0.9, 1.1]**范围）

编码：

```
Mat img = imread("test.jpg"), gray;
vector<Vec4i> hierarchy;
vector<vector<Point2i> > contours;
cvtColor(img, gray, CV_BGR2GRAY);
threshold(gray, gray, 100, 255, THRESH_BINARY);
bitwise_not(gray, gray);

findContours(gray, contours, hierarchy, CV_RETR_EXTERNAL, CV_CHAIN_APPROX_SIMPLE);

for(size_t i=0; i<contours.size(); i++)
{
    Rect rect = boundingRect(contours[i]);
    double k = (rect.height+0.0)/rect.width;
    if (0.9<k && k<1.1 && rect.area()>100)
    {
        drawContours(img, contours, i, Scalar(0,0,255));
    }
}

imshow("result", img);
waitKey(); 
```

结果： ![在此处输入图像描述](../Images/f4d2c2baa9d49ba4d5e96816a59f6ebd.png)

另请阅读[此 SO 讨论](https://stackoverflow.com/questions/8667818/opencv-c-obj-c-detecting-a-sheet-of-paper-square-detection)- 您不需要 4 个方格来检测纸张。

# c# - 在 MVC 视图之间持久化数据的最标准方法是什么？

> ID：11532082
> 
> 赞同：4
> 
> 时间：2012-07-17T23:06:44.287
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, security

我正在创建一个使用 ASP.NET MVC 填写在线工作申请的系统。这实际上只是一个让自己熟悉 MVC 框架的实验。我绝对不是安全专家，所以我只是想在这里得到一些建议，因为这个网络应用程序将处理敏感信息。

该系统有一组类似向导的视图。您从一个视图到下一个视图填写相关信息，直到最后提交。

每个作业应用程序都使用 GUID 主键存储在数据库中。现在，我只是将该 GUID 存储在每个页面视图中的隐藏字段中。这使得更新控制器中的模型变得很容易，如下所示：

```
[HttpPost]
public ActionResult ExampleAction(FormCollection formValues)
{
    Guid appId = new Guid(Request.Form["ModelId"]); // the GUID stored in the hidden field
    ExampleModel example = db.Entities.Single(e => e.ModelId == appId);

    UpdateModel(example, formValues);
    db.SaveChanges();

    return RedirectToAction("ExampleAction2", new { appId = appId.ToString() });
} 
```

我知道这并不安全，因为任何具有任何开发经验的人都知道您可以在任何浏览器的开发人员工具中编辑隐藏字段的值。那么安全获得相同结果的推荐方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:34:26.157

您应该将其存储在 Session 对象中。这样，您可以随时随地调用它，并且它永远不会显示在您的任何视图中。文档：http: [//msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T13:12:51.610

我知道这已经得到了回答，只是为了兴趣，我想留下另一个选择。您如何处理它是将您从第一个视图获得的信息解析为 JSON 字符串，您可以将其存储在 cookie 中，然后在需要时将其序列化。

这是假设信息可以安全地存储在客户端。否则我想它可能是一个加密的cookie。这将解决云计算和负载均衡器等问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:05:02.627

为什么不发布到每个步骤而不是使用 RedirectToAction？这样您就可以创建一个包含每个步骤的模型.. 例如：

```
class JobApplicationViewModel
{
    public Guid ApplicationGuid { get; set; }
    public StepOne Step1 { get; set; }
    public StepTwo Step2 { get; set; }
    public int CurrentStep { get; set; }
} 
```

第 1 步视图可以发布到第 2 步.. 例如：

```
[HttpPost]
public ViewResult StepTwo(JobApplicationViewModel viewModel)
{
    ServiceLayer.Update(viewModel);
    return View(viewModel);
} 
```

然后，StepTwo 视图发布到 StepThree，StepThree 发布到 Step4，等等。这在逻辑上是有道理的，因为您只允许人们通过发布表单进入步骤 1 之外的任何步骤。

# android - Android：缩小位图时的质量损失

> ID：11532084
> 
> 赞同：2
> 
> 时间：2012-07-17T23:06:51.197
> 
> 标签：android, bitmap, scale

我从 SQLiteDatabase 获取图像（.png）并使用此代码将字节数组解码为位图：

```
Options options = new BitmapFactory.Options();
options.inPreferredConfig = Bitmap.Config.ARGB_8888;
options.inDither = true;
options.inScaled = true;
options.inDensity = 240;
options.inTargetDensity = metrics.densityDpi;
Bitmap bmp = BitmapFactory.decodeStream(new ByteArrayInputStream(imageAsBytes), null, options); 
```

如您所见，图像 (3) 应该像 (2)，但事实并非如此。

1) ![原来的](../Images/81211d4c9304e8512b117c3b989b4115.png)= 没有比例的图像 (metrics.densityDpi = 240);

2) ![来自可绘制资源](../Images/f43d2db9504f8612a37420a0be965e5c.png)= 上面相同的 .png，但在 res/drawable 中编译；

3) ![从低档](../Images/0507f78bf7139b9473dea7fe13a9fbde.png)= 缩小比例的图像（metrics.densityDpi = 120）；

我也试过了`options.inDither = false;`，但我看不出有什么区别。

那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:05:11.230

还有一些其他的事情我会尝试：

1.  加载不带比例的 png，当您绘制图像（从 ImageView 中或直接到画布上）时，设置一个[矩阵](http://developer.android.com/reference/android/graphics/Matrix.html)来缩放图像

2.  [或者，以所需的密度加载图像并尝试使用Paint](http://developer.android.com/reference/android/graphics/Paint.html)对象将位图直接绘制到画布上。实例化您的 Paint 后，启用位图过滤（这将提高图像质量）

    ```
    setFilterBitmap(true) 
    ```

3.  最后，您始终可以加载位图（与密度无关）并使用[Bitmap.createScaledBitmap](http://developer.android.com/reference/android/graphics/Bitmap.html#createScaledBitmap%28android.graphics.Bitmap,%20int,%20int,%20boolean%29)手动调整位图的大小，确保将第三个参数设置为 true（这启用了位图过滤以提高质量）。下面是一个缩放位图的示例，其中 100 是所需的大小：

    ```
    Bitmap.createScaledBitmap ( original_bitmap, 100, 100, true); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T01:42:00.687

简而言之，最佳质量缩减算法包括 2 个步骤：

1.  使用***BitmapFactory.Options::inSampleSize->BitmapFactory.decodeResource()***尽可能接近您需要的分辨率但不小于它的分辨率
2.  ***通过使用Canvas::drawBitmap()***缩小一点来获得精确的分辨率

 *以下是 SonyMobile 如何解决此任务的详细说明：http: [//developer.sonymobile.com/2011/06/27/how-to-scale-images-for-your-android-application/](http://developer.sonymobile.com/2011/06/27/how-to-scale-images-for-your-android-application/)

这是 SonyMobile scale utils 的源代码：http: [//developer.sonymobile.com/downloads/code-example-module/image-scaling-code-example-for-android/](http://developer.sonymobile.com/downloads/code-example-module/image-scaling-code-example-for-android/)*

# php - preg_replace 和数组值

> ID：11532088
> 
> 赞同：0
> 
> 时间：2012-07-17T23:07:01.537
> 
> 标签：php, regex, arrays, preg-replace, preg-match

我需要将大括号（'{}'）内的每个数字都转换为超链接。问题是，字符串可以包含多个模式。

```
$text = 'the possible answers are {1}, {5}, and {26}';
preg_match_all( '#{([0-9]+)}#', $text, $matches ); 
```

输出数组是这样的

```
Array ( 
[0] => Array ( [0] => {1} [1] => {5} [2] => {26} ) 
[1] => Array ( [0] => 1 [1] => 5 [2] => 26 ) 
) 
```

这是我当前的代码。

```
$number=0;
return preg_replace('#{([0-9]+)}#','<a href="#$1">>>'.$matches[1][$number].'</a>',$text);
$number++; 
```

但输出就像

```
The possible answers are
<a href="#1">1</a>, <a href="#5">1</a>, and <a href="#26">1</a> 
```

仅获取 '1' ($matches[1][0])。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:45:35.947

如果您需要对 url 进行一些数学、计算、查找等操作，您可以使用[preg_replace_callback](http://www.php.net/preg_replace_callback)。您只需将回调函数指定为替换值，该函数在调用时一次传递每个匹配项，并且该函数的返回值是替换值。

```
<?php
$text = 'the possible answers are {1}, {5}, and {26}';

$text = preg_replace_callback('#\{([0-9]+)\}#',
    function($matches){
        //do some calculations
        $num = $matches[1] * 5;
        return "<a href='#{$matches[1]}'>{$num}</a>";
    }, $text);
var_dump($text);
?> 
```

[http://codepad.viper-7.com/zM7dwm](http://codepad.viper-7.com/zM7dwm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:24:54.790

这有什么问题？

```
return preg_replace('#{([0-9]+)}#','<a href="#$1">$1</a>', $text); 
```

输出这个：

```
<a href="#1">1</a>, <a href="#5">5</a>, and <a href="#26">26</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:20:32.367

```
$text = 'the possible answers are {1}, {5}, and {26}';
$text = preg_replace('/\{(\d+)\}/i', '<a href="#\\1">\\1</a>', $text);
var_dump($text);

string(89) "the possible answers are <a href="#1">1</a>, <a href="#5">5</a>, and <a href="#26">26</a>" 
```

编辑（用数组回答）：

```
$text = 'the possible answers are {1}, {5}, and {26}';
if (($c = preg_match_all('/\{(\d+)\}/i', $text, $matches)) > 0)
{
    for ($i = 0; $i < $c; $i++)
    {
        // calculate here ... and assign to $link
        $text = str_replace($matches[0][$i], '<a href="'.$link.'"'>'.$matches[1][$i].'</a>', $text);
    }
} 
```

# php - JSON 数组到 HTML 表并显示 td 标记内的数据

> ID：11532091
> 
> 赞同：0
> 
> 时间：2012-07-17T23:07:21.567
> 
> 标签：php, javascript, jquery, ajax, json

我有 json 数组返回如下

```
{"id":16,"minutes":146}
{"id":17,"minutes":137}
{"id":18,"minutes":123}
{"id":22,"minutes":84} 
```

我正在尝试在表 tbody td 内渲染上面的 json 数组，其中 json 数组 id 等于 td id，并在 td 标记内显示分钟

例如 json id :16 minute:146 并将其显示在`<td id="16">146</td>`

```
 <table>
      <thead>
        <tr>
          <th>op</th>
          <th>Minutes</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>op1</td>
          <td id="16">0</td>
        </tr>
        <tr>
          <td>op2</td>
          <td id="17">0</td>
        </tr>
        <tr>
          <td>op3</td>
          <td id="18">0</td>
        </tr>
<!--....and goes on -->
      </tbody>
    </table> 
```

js

```
$.ajax({ url: statUrl, type: 'POST',
  data: {
      begin: begin,
      end: end
  },
  success: function(data){

  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:12:08.930

您的 JSON 无效，它应该只代表一个对象，您所拥有的有效版本将是

```
[{"id":16,"minutes":146},
{"id":17,"minutes":137},
{"id":18,"minutes":123},
{"id":22,"minutes":84}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:47:21.160

我在这里创建了一个 jsFiddle：http: [//jsfiddle.net/5pKjW/11/](http://jsfiddle.net/5pKjW/11/) 正如 Musa 所说，您发布的 JSON 无效，它应该是一个包含所有对象的数组。以下代码基本上是您需要在成功回调中执行的操作，只需使用 `data`而不是`result`. 我所做的是创建一个表，为数组的每个元素附加一行，然后将整个表附加到 DOM 的一个元素。

```
var result = [{"id":16,"minutes":146},{"id":17,"minutes":137},{"id":18,"minutes":123},{"id":22,"minutes":84}];
var $table = $('<table><thead><tr><th>op</th><th>Minutes</th></tr></thead>'), 
    $tbody = $('<tbody>').appendTo($table),
    i;
for (i = 0; i < result.length; i++){
    $tbody.append('<tr><td>op' + (i+1) + '</td><td id="' + result[i].id + '">0</td></tr>');
}
$table.appendTo('#container'); 
```

正如 TJ Crowder 评论的那样，有效的 HTML4`id`属性不能以数字开头。如果我是你，我会在它前面加上一个字符串 ( `<td id="prefix' + result[i].id + '">0</td>`)。

MrOBrian 建议使用渲染引擎。也许对于像这样的简单案例，如果您在其他地方不需要渲染引擎，那就有点过头了，但是如果您将来需要更复杂的东西，那绝对是值得考虑的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:13:38.750

如果您的数据 ID 直接对应于现有的 DOM 元素 ID，那么它应该相当简单：

```
for (var i = 0;  i < data.length; i++) {
   $('#' + data[i].id).text(data[i].minutes);
} 
```

这是使用 jQuery ofc。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T01:56:30.613

按照建议将 json 数组固定为

```
{
 "25":72.3833,
 "17":116.3167,
 "16":25.75,
 "34":28.3333,
 "29":136.8831,
 "19":40.9166,
 "32":43.6,
 "22":83.9001
} 
```

和js

```
$.getJSON(statUrl, {begin: begin, end: end}, function(data) {

      $.each(data, function(key, val) {
          $('#op_' + key).text(Math.ceil(val));//also fixed td id
      });
}); 
```

所以得到了预期的结果。谢谢你的时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T23:19:54.013

您可以在 php 中使用**json_decode($json, true)**将 json 转换为数组，然后遍历它的元素并构建您的表。

如果你想在客户端做，我认为你必须手动创建 table、tr 和 td 元素并填充它们。ExtJS 已经为此准备好了网格。

服务器端更容易。

# wordpress - wordpress wpautop 不适用于 wpalchemy 重复字段

> ID：11532093
> 
> 赞同：0
> 
> 时间：2012-07-17T23:07:33.997
> 
> 标签：wordpress

我可以通过第一个示例使其与非重复字段一起使用，但是对于使用重复字段的第二个示例，我无法使 wpauto 函数工作。

```
<?php echo "<strong>Paragraph</strong>".wpautop($meta['paragraph']).""; ?> 
```

这是我得到的最接近的......我知道在 wpautop 打印它之前函数的第一部分，而 wpautop 到目前为止几乎什么也没做。

```
<?php
        global $index_accordian_repeat;                        
        ?>

            <?php if($index_accordian_repeat->have_value('panels')):?>

            <dl class="accordion">                              
                <?php while( $index_accordian_repeat->have_fields('panels') ) : ?>

                       <!--title --><dt><a href=""><?php $index_accordian_repeat->the_value('header'); ?></a></dt>
                       <!--link --><dd><?php $index_accordian_repeat->the_value('link'); ?><br />
                       <!--content --><?php $my_meta = $index_accordian_repeat->the_value('');
                                        echo wpautop($my_meta['content']); ?></dd>

            <?php endwhile; ?>
            </dl>
            <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:44:03.380

这不是最简单的答案吗！？我要求将打印它的 the_value ，然后我以另一种方式询问，它只给了我一个数组。但这就是使它起作用的原因...

```
<?php $content = $index_accordian_repeat->get_the_value('content');?> <?php echo wpautop($content); ?> 
```

我需要返回该值但不打印它，然后获取该值并回显它。呸！

# c# - C# - 每次向下循环浮动

> ID：11532094
> 
> 赞同：5
> 
> 时间：2012-07-17T23:07:41.067
> 
> 标签：c#, rounding

如何每次将浮点数四舍五入到最接近的整数，但只能向下取整。我需要最快的方法。

所以 float 1.2 将是 1，而 1.8 也将是 1。

**1.2f**将是**1.0f**

**1.8f**将是**1.0f**

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-17T23:10:21.347

[Math.Floor()](http://www.dotnetperls.com/math-floor)是你的朋友。

示例代码：

```
using System;
using System.Text;

namespace math
{
    class Program
    {
        static void Main(string[] args)
        {
            //
            // Two values.
            //
            float value1 = 123.456F;
            float value2 = 123.987F;
            //
            // Take floors of these values.
            //
            float floor1 = (float)Math.Floor(value1);
            float floor2 = (float)Math.Floor(value2);

            //
            // Write first value and floor.
            //
            Console.WriteLine(value1);
            Console.WriteLine(floor1);
            //
            // Write second value and floor.
            //
            Console.WriteLine(value2);
            Console.WriteLine(floor2);

            return;        
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T23:12:01.607

通过转换为 int，您将截断小数

```
float f = 1.2;
int rounded = (int)f; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T23:09:55.540

`System.Math.Floor(double)`应该做的伎俩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T23:12:16.557

```
Math.Ceiling(value)
Math.Floor(value); //your answer 
```

# jquery-plugins - 一个 jquery 插件发布工具栏

> ID：11532100
> 
> 赞同：-1
> 
> 时间：2012-07-17T23:08:08.340
> 
> 标签：jquery-plugins

有谁知道 jquery post 的工具栏插件？我有一个论坛，我想为每个帖子附加一个完整的工具栏：回复、删除、通过邮件发送、附加文件......

最好的，迈赫迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:23:22.420

迈赫迪，

我不确定我是否完全理解，但我最近使用了这些 jquery 工具栏，也许它们也可以帮助你。

[http://javan.us/jbar/](http://javan.us/jbar/)

[http://www.jankoatwarpspeed.com/post/2010/05/23/microsoft-office-minibar-jQuery-CSS3.aspx](http://www.jankoatwarpspeed.com/post/2010/05/23/microsoft-office-minibar-jQuery-CSS3.aspx)

# mysql - MySQL/PHP 查询性能如何？

> ID：11532104
> 
> 赞同：0
> 
> 时间：2012-07-17T23:08:31.663
> 
> 标签：mysql, performance

我陷入了困境，其中一种方法最有效。

假设您有一个连接多个表并查询数千条记录的查询。比，你必须得到所有这些结果的总分页。

是不是更快？

1）做一个完整的选择（假设你必须选择50列），计算行数，然后运行另一个有限制的查询？（MySQL 缓存是否会帮助这种情况，已经在第一个用于计数的查询中选择了您需要的所有列？）

2）首先使用 COUNT 函数进行查询，然后进行查询以选择您需要的结果。

3) 不使用 MySQL COUNT 函数，而是选择 ID 的查询并使用 PHP 函数 mysql_num_rows？

*   我认为数字 2 是最好的选择，使用 MySQL 内置的 COUNT 函数，但我知道 MySQL 使用缓存，所以，在第一次查询时选择所有结果会更快吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:14:22.617

看看[Found_Rows()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_found-rows)

> 一个`SELECT`语句可能包含一个`LIMIT`子句来限制服务器返回给客户端的行数。在某些情况下，希望知道在没有 LIMIT 的情况下该语句将返回多少行，但无需再次运行该语句。要获得此行数，`SQL_CALC_FOUND_ROWS`请在语句中包含一个选项`SELECT` ，然后再调用`FOUND_ROWS()`：
> 
> `mysql> SELECT SQL_CALC_FOUND_ROWS * FROM tbl_name WHERE id > 100 LIMIT 10;`
> `mysql> SELECT FOUND_ROWS();`
> 
> 第二个 SELECT 返回一个数字，指示如果没有 LIMIT 子句，第一个 SELECT` 将返回多少行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:13:34.193

我的猜测是 2，但事实是它完全取决于数据大小、表、索引、MySql 版本等。

找到答案的唯一方法是尝试每一个并测量它们需要多长时间。但就像我说的，我的预感是第二位。

# objective-c - NSOperationQueue setSuspended:NO 不开始队列，NSLog 确实

> ID：11532107
> 
> 赞同：1
> 
> 时间：2012-07-17T23:09:08.287
> 
> 标签：objective-c, ios, nsoperation, nsoperationqueue

我有一个非并发的 NSOperation 正在运行，其中有一部分进行了大量的网络调用并处理了结果。这似乎是一个简单的并行化目标，所以我做了以下事情：

```
NSOperationQueue *downloadOperationQueue = [[NSOperationQueue alloc] init];
downloadOperationQueue.maxConcurrentOperationCount = 5;

self.operationThread = [NSThread currentThread];
//prevent the operation queue from starting until we're ready to receive events
[downloadOperationQueue setSuspended:YES];

for (FooInfo *fooInfo in foos)
{
    //FooDownloadOperation is a non-concurrent operation.
    FooDownloadOperation *downloadOp = [[FooDownloadOperation alloc] initWithFoo:fooInfo];
    downloadOp.delegate = self;
    [downloadOperationQueue addOperation:downloadOp];
}
//unsuspend the queue and spin a run loop until the local operation count hits zero
[downloadOperationQueue setSuspended:NO];
while (self.isCancelled == NO && [downloadOperationQueue operationCount] > 0) 
{
    [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:1.0f]];
}
// ... do other things 
```

还有另一种方法 -main 在 FooDownloadOperation 调用，它执行 performSelector:onThread: 跳回 self.operationThread 来处理结果：

```
- (void)downloadOperation:(FooDownloadOperation *)downloadOp didSucceed:(NSArray *)results
{
    if ([[NSThread currentThread] isEqual:self.operationThread] == NO)
    {
        //too many arguments for -performSelector:onThread:withObject:waitUntilDone:
        NSInvocation *inv = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:_cmd]];
        [inv setTarget:self];
        [inv setSelector:_cmd];
        [inv setArgument:&downloadOp atIndex:2];
        [inv setArgument:&results atIndex:3];
        [inv retainArguments];
        [inv performSelector:@selector(invoke) onThread:self.operationThread withObject:nil waitUntilDone:YES];
        return;
    }

    //... process the results
} 
```

没问题。理论上。

事实上，大约 70% 的时间，更糟糕的是，在将设备从睡眠中唤醒并运行操作之后，它只是处于 while 循环中，-runMode:untilDate: 返回 NO。奇怪的是，在 20 秒到 6 分钟之后，FooDownloadOperations 终于开始了。

更奇怪的是，如果我在 while 循环中添加日志记录，它会按预期开始工作。我可以添加一些日志记录，但我真的很想知道为什么这似乎可以解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:51:21.057

可以这么说，您的混合隐喻。如果您的 NSOpeations 不是并发的，您不必担心运行循环 - 您不能在它们运行时向它们发送消息（如果您需要该功能，则需要并发操作，并且应该在 github 上查看有关如何使用这些操作的一些示例）。

所以，你不需要知道当前线程（这是你的主应用程序的当前线程，而不是操作（在你的代码中）。所以你创建一个队列，你挂起它，你添加一大堆操作到运行，然后当你想让队列运行时，你可以等待队列完成，或者你可以轮询它，等等。

# c# - 使用现有框架 ConstraintException 处理数据约束违规

> ID：11532108
> 
> 赞同：2
> 
> 时间：2012-07-17T23:09:09.820
> 
> 标签：c#, exception, system.data

我有一个独立的应用程序，在将平面文件导入 SQL 数据库之前对其进行数据检查。

在这样的情况下，抛出一个有意义`System.Data.ConstraintException`吗？（这个例子是人为的。）

```
if(_keys.ContainsKey(key))
{
    throw new ConstraintException(string.Format("Uniqueness violated! " + 
        "This unique combination of '{0}' already found on line {1}", 
        GetUniquenessColumnList(), _keys[key] ));
} 
```

[ConstraintException 的文档](http://msdn.microsoft.com/en-us/library/system.data.constraintexception.aspx)指出它“表示在尝试违反约束的操作时引发的异常”。

以这种方式使用内置异常有问题吗？有没有更好的使用？我是否应该建立自己的，即使这个例外似乎是根据我的情况量身定制的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:18:52.267

我想你已经回答了你自己的问题

> ...这个例外似乎是为我的情况量身定做的？

为什么要重新发明轮子？

**编辑：**

查看这篇 MSDN 文章：[选择正确的异常类型来抛出](https://msdn.microsoft.com/en-us/library/vstudio/ms229021(v=vs.100).aspx)

> **考虑抛出驻留在系统命名空间中的现有异常，而不是创建自定义异常类型。**
> 
> ...
> 
> **不要为了让你的团队例外而创建和抛出新的例外。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:14:33.500

不，这样做没有问题。如果已经存在合适的例外，则无需创建新例外。

# google-analytics - 谷歌分析：__utma 没有更新

> ID：11532129
> 
> 赞同：0
> 
> 时间：2012-07-17T23:10:55.250
> 
> 标签：google-analytics, session-cookies

我们注意到 Google Analytics 的一些奇怪行为。似乎 __utma 会话时间不再更新。我们从未使用 _setSessionCookieTimeout 将超时设置为远离默认值 30 分钟。

作为一个简单的测试，我们清除了 cookie，登录，然后闲置了 30 分钟——但运气不好，__utma 没有被修改。

任何想法将不胜感激。

一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T23:14:22.603

看起来我们在启动时向 GA 发送垃圾邮件。**新手 javascript 错误**。我推荐 的[GA Debug](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)不够！

```
var statusCodeReporter = 
{
    400: TrackView("Error", "400"),
    401: TrackView("Error", "401"), 
```

可能应该是这样的

```
var statusCodeReporter = 
{
    400: function() { TrackView("Error", "400");},
    401: function() { TrackView("Error", "401");}, 
```

# c++ - 类成员的模板参数

> ID：11532130
> 
> 赞同：1
> 
> 时间：2012-07-17T23:11:08.623
> 
> 标签：c++, templates

使用模板可以实现这样的事情吗？

```
template<class T, int T::M>
int getValue (T const & obj) {
    return obj.M;
}

class NotPlainOldDataType {
public:
    ~NotPlainOldDataType () {}
    int x;
}

int main (int argc, char ** argv) {
    typedef NotPlainOldDataType NPOD;
    NPOD obj;

    int x = getValue<NPOD, NPOD::x>(obj);

    return x;
} 
```

我已经知道如何使用宏来做到这一点

```
#define GET_VALUE(obj, mem) obj.mem

class NotPlainOldDataType {
public:
    ~NotPlainOldDataType () {}
    int x;
}

int main (int argc, char ** argv) {
    NotPlainOldDataType obj;

    int x = GET_VALUE(obj, x);

    return x;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T23:21:22.237

如果我正确理解您的意图，那么以下内容应该有效：

```
#include <iostream>

template<typename T, int (T::*M)>
int getValue(T const& obj)
{
    return obj.*M;
}

class NotPlainOldDataType
{
public:
    explicit NotPlainOldDataType(int xx) : x(xx) { }
    ~NotPlainOldDataType() { }
    int x;
};

int main()
{
    typedef NotPlainOldDataType NPOD;

    NPOD obj(3);
    std::cout << getValue<NPOD, &NPOD::x>(obj) << '\n';
} 
```

[[在线演示](http://ideone.com/wfkUp)]

# python - Python 不运行代码

> ID：11532131
> 
> 赞同：2
> 
> 时间：2012-07-17T23:11:09.907
> 
> 标签：python

我写了一个 python 脚本，它突然停止工作。我不确定为什么会有任何帮助。控制台不显示任何内容。我在底部调用了函数 start 但没有运气。

```
import random

year = 1
our_score = 0
their_score = 0
games_played = 0

#opponent's strategy:
def op_strategy():
    for i in range (0,1):
        rand = random.randint(0,1)
    if rand == 0:
        return "war"
    if rand == 1:
        return "peace"

def start():
    global our_score, their_score, year
    print "====="
    print "Year " + str(year)
    print "Our Score: " + str(our_score)
    print "Their Score: " + str(their_score)
    print ""
    strategy = raw_input("What is your strategy this year? ")
    inputs(strategy)

def inputs(strategy):
    our_score = 0
    global our_score, their_score, year
    if str(strategy) == "peace" or str(strategy) == "war":
        print "You chose: " + str(strategy)
        op_strat = str(op_strategy())
        print "They chose: " + op_strat
    if str(strategy) == "war" and str(op_strat) == "war":
        print ">>> Everyoner to arms!"
        our_score = our_score + 1
        their_score = their_score + 1
        year = year + 1
    elif str(strategy) == "peace" and str(op_strat) == "peace":
        print ">>> Peace for everyone!"
        our_score = our_score + 3
        their_score = their_score + 3
        year = year + 1
    elif str(strategy) == "peace" and str(op_strat) == "war":
        print ">>> They crushed us!"
        our_score = our_score
        their_score = their_score + 5
        year = year + 1
    elif str(strategy) == "war" and str(op_strat) == "peace":
        print ">>> We crushed them!"
        our_score = our_score + 5
        their_score = their_score
        year = year + 1
    if str(year) == "11":
        print "====="
        print "Final"
        print str(our_score)
        print str(their_score)
        if our_score > their_score:
            print ">>>>> We win! <<<<<"
        if their_score > our_score:
            print ">>>>> They win! <<<<<"
        if their_score == our_score:
            print ">>>>> It's a tie! <<<<<"
        play = raw_input("Play again?")
        if play == "y":
            start()
        if play == "n":
            pass
        else:
            play = raw_input('Invalid response. Please enter "y" or "n".')
    if str(strategy) != "peace" and str(strategy) != "war":
        strategy = raw_input('Invalid strategy. Enter "peace" or "war": ')
        inputs(strategy)
    start()
start() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:53:48.887

代码正在执行，但它被困在 raw_input 调用中，直到它完成才打印，当然用户不知道该怎么做，因为没有打印任何内容。
缓冲区不会自动刷新。如果您使用 -u 选项启动 python，缓冲区将使用 raw_input 调用刷新，并且提示将很明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:41:44.730

**在Idle**中加载它，您将看到以下错误：

> SyntaxError: name 'our_score' 在全局声明之前分配（第 1 行）

这些行之一：

```
def inputs(strategy):
our_score = 0
global our_score, their_score, year 
```

如此处详述[：](http://docs.python.org/reference/executionmodel.html#naming)

```
If the global statement occurs within a block, all uses of the name 
specified in the statement refer to the binding of that name in the top-level
namespace... i.e. the namespace of the module containing the code block 
```

您已分配给一个局部变量`our_name`，然后您告诉该函数使用同名的全局变量。修复此问题后应该没有问题。

# jquery - jQuery UI - droppables 可以检测事件期间哪个可拖动对象正在交互吗？

> ID：11532133
> 
> 赞同：0
> 
> 时间：2012-07-17T23:11:36.817
> 
> 标签：jquery, jquery-ui

我有一个带有 over()、out() 和 drop() 函数的 droppable，如果将 A 类的 div 和 B 类的 div 放在它上面，我想表现得不同。假设如果 A 类悬停在它上面，droppable 应该变成黄色，如果 B 类悬停在它上面，它应该变成红色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:14:59.020

, `over`,`out`和`drop`回调都接受参数`(event, ui)`. `ui.draggable`是被拖到 droppable 上的元素。所以你可以这样做：

```
drop: function(event, ui) {
    if (ui.draggable.hasClass('classA') {
    }
} 
```

请务必查看[jQuery UI 文档](http://jqueryui.com/demos/droppable/)

# mongodb - Mongo中的CopyDatabase有限制吗

> ID：11532139
> 
> 赞同：0
> 
> 时间：2012-07-17T23:12:26.737
> 
> 标签：mongodb, copy

我正在使用 Mongo 中的 copyDatabase 将 1 亿条记录（约 97G）数据复制到另一台服务器。两台服务器都有超过 500G 的磁盘空间。但是，我注意到虽然该过程仍在运行，但不再添加实际文件。停在 xxxxx.11 有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:34:05.613

复制数据库将移动集合数据，然后为每个集合建立索引。在 100GB 数据集上构建索引可能会花费大量时间（尤其是使用少量 RAM）。您可能正处于大型索引构建的中间。

您可以通过查看日志并`db.currentOp()`在目标数据库上的 shell 中运行来检查进度。

# visual-studio-2010 - Visual Studio 2010 - Silverlight 4 模板丢失，如何重新下载？

> ID：11532140
> 
> 赞同：0
> 
> 时间：2012-07-17T23:12:29.977
> 
> 标签：visual-studio-2010, templates, silverlight-4.0

我缺少 Visual Studio 2010 的 silverlight 4 模板。devenv /installvstemplate 不起作用，因为缺少实际文件，并且我想要的特定文件（用户控制）没有显示在在线模板列表中。我已经尝试过[Missing Project/Item Templates](https://stackoverflow.com/questions/4780783/visual-studio-2010-missing-project-item-templates)中的解决方案。

C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\ 不包含任何项目模板或项模板。

我已经尝试卸载并重新安装我正在使用的所有 Silverlight 组件和工具。

有没有办法直接下载模板并将它们放在那个文件夹中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:36:22.270

我去了 Windows 控制面板，程序和功能，并重新安装了 Visual Studio（VS 让您无需卸载并丢失所有设置即可执行此操作）。之后，我重新安装了我正在使用的所有 silverlight 组件。这些模板现在可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T17:40:16.030

这对我有帮助： http: [//chiragrdarji.wordpress.com/2008/05/06/missing-templates-in-visual-studio-installed-templates/](http://chiragrdarji.wordpress.com/2008/05/06/missing-templates-in-visual-studio-installed-templates/)

如果关闭 Visual Studio 的所有实例。打开 Visual Studio 命令提示符并键入，

**devenv /installvstemplates**

按回车

# c++ - 如何在 C 或 C++ 中以编程方式检测 OSX 上的 IP 地址更改

> ID：11532144
> 
> 赞同：17
> 
> 时间：2012-07-17T23:12:50.677
> 
> 标签：c++, c, macos

我必须能够检测到我的 Mac 客户端的 IP 地址更改。每次我得到一个新的，当我从wifi转到有线时，我都需要执行一个动作......

有人做过类似的事情吗？我目前每分钟投票一次，我需要将其更改为更多事件驱动。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-17T23:53:34.463

有多种方法可以做到这一点，从 IOKit 通知开始，但最简单的可能是 SystemConfiguration 框架。

第一步是启动 scutil 并使用它来确定您想要通知哪些键：

```
$ scutil
> list
...
> n.add State:/Network/Global/IPv4
> n.watch
... unplug your network cable (or disconnect from WiFi)
notification callback (store address = 0x10e80e3c0).
changed key [0] = State:/Network/Global/IPv4 
```

看看这个，第一次尝试就知道了。:) 但是，如果您想查看特定的 NIC，或者使用 IPv6 而不是 v4 等，显然您需要列表中的不同密钥。请注意，您可以使用正则表达式模式（POSIX 样式，由 定义`man 3 regex`），因此如果您想查看 IPv4 的任何 NIC，您可以使用`State:/Network/Interface/.*/IPv4`，或者如果您想说全局 IPv4 或 IPv6 `State:/Network/Global/IPv.`，等等。

现在您只需使用您想要的密钥调用 SCDynamicStoreSetNotificationKeys。

请注意，SCDynamicStoreSetNotificationKeys 可以采用正则表达式模式（POSIX 样式，由 man 3 正则表达式定义）

由于在 C 中有点痛苦，我将在 Python 中编写它：

```
#!/usr/bin/python

from Foundation import *
from SystemConfiguration import *

def callback(store, keys, info):
  for key in keys:
    print key, SCDynamicStoreCopyValue(store, key)

store = SCDynamicStoreCreate(None, 
                             "global-network-watcher",
                             callback,
                             None)
SCDynamicStoreSetNotificationKeys(store,
                                  None,
                                  ['State:/Network/Global/IPv4'])
CFRunLoopAddSource(CFRunLoopGetCurrent(),
                   SCDynamicStoreCreateRunLoopSource(None, store, 0),
                   kCFRunLoopCommonModes)
CFRunLoopRun() 
```

这在 C 中更痛苦的主要原因是，您需要数十行样板代码来创建包含 CFString 的 CFArray、打印 CFString 值、管理对象的生命周期等。根据 Jeremy Friesner 的评论，有[C++](http://www.lcscanada.com/jaf/osx_ip_change_notify.cpp)如果您宁愿阅读 113 行 C++ 而不是 17 行 Python，则可以使用[示例代码。](http://www.lcscanada.com/jaf/osx_ip_change_notify.cpp)但实际上，这里只有一行对于从未使用过 Python 的人来说应该是陌生的：

```
def callback(store, keys, info):
  for key in keys:
    print key, SCDynamicStoreCopyValue(store, key) 
```

... 相当于 C 定义：

```
void callback(SCDynamicStoreRef store, CFArrayRef keys, void *info) {
  /* iterate over keys, printing something for each one */
} 
```

奇怪的是，我再也找不到关于 SystemConfiguration 的实际参考或指南文档了；SCDynamicStoreSetNotificationKeys 或相关功能的唯一内容是[CFNetwork Programming Guide](https://developer.apple.com/library/ios/#documentation/Networking/Conceptual/CFNetwork/CFStreamTasks/CFStreamTasks.html)的 Navigating Firewalls 部分。但是最初的技术[说明 TN1145：Living in a Dynamic TCP/IP Environment](https://developer.apple.com/library/mac/#technotes/tn1145/_index.html)仍然存在，并且它有足够的背景和示例代码来弄清楚如何自己编写（以及如何在收到通知时检测新的 IP 地址）。

显然，这需要你知道你到底要注意什么。如果你不知道，没有人可以告诉你如何注意它。您最初的问题是如何“检测 IP 地址更改”。

上面的代码将检测您的默认地址何时更改。这是当您将套接字连接到互联网地址而不绑定它时使用的地址，或者将套接字绑定到“0.0.0.0”以充当互联网服务器。如果您没有编写您关心的服务器代码，几乎所有网络客户端都执行前者，而大多数服务器执行后者，除非您另外配置它​​们，所以您可能只关心这些。

现在让我们一一浏览您评论中的示例：

> 如果我想确定网络变化，wifi 到 LAN

没有从 WiFi 到 LAN 的变化。当您连接到 LAN 时，WiFi 仍在工作。当然，您可以在连接到 LAN 之前或之后手动禁用它，但您不必这样做，这是一个单独的步骤，带有单独的通知。

通常，添加 LAN 会将您的默认地址更改为 LAN 的地址，因此`/Network/Global`会通知您。如果操作系统可以判断 LAN 没有真正连接到互联网，或者您更改了一些隐藏设置使其更喜欢 WiFi 而不是 LAN 等，它不会更改默认地址，`/Network/Global`也不会通知您，但你可能不在乎。

如果您确实关心特定接口是否获取、丢失或更改地址，则可以观察该接口。在大多数 Mac 上，内置以太网为 en0，内置 WiFi 为 en1，但当然您可能有第三方 USB WiFi 连接器，或者您可能正在使用系留手机，或者您可能感兴趣与其说是 LAN 的实际 IP 地址，不如说是 LAN 所连接的 VPN 的 VPN 地址等。如果您正在编写一些特殊用途的东西，您可能知道您关心哪个接口，因此您可以观看，例如，`State:/Network/Interface/en0/IPv4`。如果您想在任何界面发生变化时收到通知，请观看`State:/Network/Interface/.*/IPv4`。

> 或热点或其他wifi

从一个 WiFi 网络更改为另一个（热点或其他）将更改 en1，或者，如果您使用的是第三方 WiFi 适配器，则会更改其他接口。如果您当时的默认地址来自 WiFi，它也会更改`Global`，这意味着上面的代码将按原样工作。如果您的默认地址仍然是您的 LAN，`Global`则不会更改，但您可能不在乎。如果您确实关心，请观看`Interface/en1`或`Interface/.*`等，如上所述。

> 对于 IPV4 和 6，我应该注意哪些网络设置

只需将 IPv4 替换为 IPv6，或使用`IPv.`. 但是你真的关心 IPv6 吗？

> 还有什么

你还关心什么？如果您确实想要通知某些东西，那么您大概知道那是什么。

除此之外，如果系统告诉您 bar 界面上的 foo 地址已更改为“ZZ9 Plural Z Alpha”，而您从未听说过 foo 协议，那么您可以用这些信息做什么？但是如果你真的想要它，你可以再次使用正则表达式模式来监视每个接口下的任何内容。

# jquery - 将此代码缩短为单击菜单

> ID：11532146
> 
> 赞同：0
> 
> 时间：2012-07-17T23:13:01.783
> 
> 标签：jquery

感觉这是一个很长的路要走。不认为函数 var 是必需的，但很难让它工作，否则我已经更改了脚本的底部以执行鼠标离开但总是针对错误的元素。

编写查找要单击的 div 的脚本，然后显示 ul 并在鼠标移出时隐藏：

```
$(function() {
    var toggleMenu = function(e) {
        var self = $(this),
            elemType = self[0].tagName.toLowerCase(),
            //get caller
            menu = null;
        if (elemType === 'a') {
            //anchor clicked, nav back to containing ul
            menu = self.parents('ul').not('ul#logo_menu');
        } else if (elemType === 'ul') {
            //mouseleft ul, ergo menu is this.
            menu = self;
        }
        if (menu) {
            menu.hide('medium');
        }
        e.preventDefault();
        return false;
    };
     $(document).ready(function() {
        $('div.logo_menu').click(function(e) {
            $('ul#logo_menu ul').show('medium');
            console.log('div clicked');
            e.preventDefault();
            return false;
        });
        $('ul#logo_menu a').click(toggleMenu);
        $('ul#logo_menu ul').mouseleave(toggleMenu);
    });
}); 
```

当我瞄准一个。被点击是不是更容易写？

```
$(document).ready(function() {
     $('a.drop').click(function(e) {
         $(this).next("div").show('slow');
         console.log('div clicked');
         e.preventDefault();
         return false;
     });
    $('li.mainmenudrop').mouseleave(function() {
        $(this).children("div").hide('slow');
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:20:18.063

我认为这是尽可能短的：

```
$(document).ready(function() {
  $('div.logo_menu').click(function() {
    $('#logo_menu ul').show('medium');
    return false;
  });

  $('#logo_menu a').click(function() {
    $(this).parents('ul').not('#logo_menu').hide('medium');
    return false;
  });

  $('#logo_menu ul').mouseleave(function() {
    $(this).hide('medium');
  });
}); 
```

# emacs - Emacs：使自定义滚动功能跟随鼠标但不改变键盘焦点

> ID：11532149
> 
> 赞同：2
> 
> 时间：2012-07-17T23:13:25.463
> 
> 标签：emacs, elisp

我在 Emacs 中有一些自定义滚动功能，可以帮助我解决单个滚动事件发送两个`<mouse-4>`或`<mouse-5>`操作的错误。我有：

```
(setq scroll-down-this-time t)

(defun my-scroll-down-line ()
    (interactive "@")
    (if scroll-down-this-time
        (progn
          (scroll-down-line)
          (setq scroll-down-this-time nil))
      (setq scroll-down-this-time t)))

(setq scroll-up-this-time t)

(defun my-scroll-up-line ()
    (interactive "@")
    (if scroll-up-this-time
        (progn
          (scroll-up-line)
          (setq scroll-up-this-time nil))
      (setq scroll-up-this-time t)))

(global-set-key (kbd "<mouse-4>") 'my-scroll-down-line)
(global-set-key (kbd "<mouse-5>") 'my-scroll-up-line) 
```

这完美地工作，除了`(interactive "@")`不是我想要的。这会导致鼠标下方的任何缓冲区滚动并获得键盘焦点。我想要一种让它滚动的方法，但不窃取键盘焦点（就像`(setq mouse-wheel-follow-mouse 't)`普通滚动库一样）。我怎样才能做到这一点？

我正在使用 Emacs 的开发版本，所以不要害怕给我任何新功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:27:01.097

您不应该重新定义`<mouse-4>`and `<mouse-5>`，而是：

```
(mouse-wheel-mode 1)

(defvar alternating-scroll-down-next t)
(defvar alternating-scroll-up-next t)

(defun alternating-scroll-down-line (&optional arg)
  (when alternating-scroll-down-next
    (scroll-down-line (or arg 1)))
  (setq alternating-scroll-down-next (not alternating-scroll-down-next)))

(defun alternating-scroll-up-line (&optional arg)
  (when alternating-scroll-up-next
    (scroll-up-line (or arg 1)))
  (setq alternating-scroll-up-next (not alternating-scroll-up-next)))

(setq mwheel-scroll-up-function 'alternating-scroll-up-line)
(setq mwheel-scroll-down-function 'alternating-scroll-down-line) 
```

# fancybox - 无法加载请求的内容。请稍后再试。花式盒

> ID：11532156
> 
> 赞同：0
> 
> 时间：2012-07-17T23:13:57.127
> 
> 标签：fancybox, inline

我正在使用以前使用过数百次的 fancybox，我收到“无法加载请求的内容。请稍后再试”。模态框中的错误。我期待看到“Fancybox！耶！” 反而。

代码如下。有任何想法吗？

```
<script type='text/javascript'>
    function init(){
        $("#upload-new").fancybox({type:'inline'});
    }
</script>

<p><a id="upload-new" href="#image-uploader">Upload new screenshot</a></p>

<div class="hidden">
    <div class="image-uploader">
        Fancybox!! Yay!
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:55:35.437

这

```
href="#image-uploader" 
```

表示您的目标是一个元素，`id="image-uploader"`但您有：

```
<div class="image-uploader"> 
```

....我想应该是：

```
<div id="image-uploader"> 
```

# shell - 删除重复行而不排序

> ID：11532157
> 
> 赞同：135
> 
> 时间：2012-07-17T23:14:11.323
> 
> 标签：shell, scripting, filter, uniq

我在 Python 中有一个实用程序脚本：

```
#!/usr/bin/env python
import sys
unique_lines = []
duplicate_lines = []
for line in sys.stdin:
  if line in unique_lines:
    duplicate_lines.append(line)
  else:
    unique_lines.append(line)
    sys.stdout.write(line)
# optionally do something with duplicate_lines 
```

这个简单的功能（`uniq`不需要先排序，稳定的排序）必须作为一个简单的 UNIX 实用程序提供，不是吗？也许是管道中过滤器的组合？

问的原因：在我无法从任何地方执行 Python 的系统上需要此功能。

* * *

## 回答 #1

> 赞同：325
> 
> 时间：2012-07-17T23:17:57.680

UNIX Bash 脚本博客[建议](http://unstableme.blogspot.com/2008/03/remove-duplicates-without-sorting-file.html)：

```
awk '!x[$0]++' 
```

该命令告诉 awk 要打印哪些行。变量`$0`保存一行的全部内容，方括号是数组访问。因此，对于文件的每一行，`x`如果该节点的内容未 ( `!`) 先前设置，则数组的节点会递增并打印该行。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2013-12-17T16:39:11.537

一个迟到的答案 - 我刚刚遇到了这个的副本 - 但也许值得添加......

@1_CR 的答案背后的原理可以写得更简洁，使用`cat -n`而不是`awk`添加行号：

```
cat -n file_name | sort -uk2 | sort -n | cut -f2- 
```

*   用于`cat -n`添加行号
*   使用`sort -u`删除重复数据（`-k2`说“从字段 2 开始排序键”）
*   用于`sort -n`按前置数字排序
*   用于`cut`删除行号（`-f2-`说“选择字段 2 直到结束”）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-08-22T03:32:34.830

要从 2 个文件中删除重复项：

```
awk '!a[$0]++' file1.csv file2.csv 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-23T16:43:38.393

上面迈克尔霍夫曼的解决方案简短而甜蜜。对于较大的文件，Schwartzian 变换方法涉及使用 awk 添加索引字段，然后进行多轮排序和 uniq 涉及较少的内存开销。以下代码段在 bash 中有效

```
awk '{print(NR"\t"$0)}' file_name | sort -t$'\t' -k2,2 | uniq --skip-fields 1 | sort -k1,1 -t$'\t' | cut -f2 -d$'\t' 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-30T08:45:33.680

现在你可以查看这个用 Rust 编写的小工具：[uq](https://github.com/lostutils/uq)。

它执行唯一性过滤而不必先对输入进行排序，因此可以应用于连续流。

与投票率最高的 awk 解决方案和其他基于 shell 的解决方案相比，此工具有两个优点：

1.  `uq`使用它们的哈希值记住行的出现，因此当行很长时它不会使用太多的内存。
2.  `uq`可以通过设置要存储的条目数量限制来保持内存使用量不变（当达到限制时，有一个标志可以控制覆盖或死亡），而`awk`当存在太多时解决方案可能会遇到OOM线。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-23T18:26:14.093

谢谢 1_CR！我需要一个“uniq -u”（完全删除重复项）而不是 uniq（保留 1 个重复项）。不能真正修改 awk 和 perl 解决方案来做到这一点，你可以！我可能还需要较低的内存使用，因为我将像 100,000,000 行一样 uniq'ing 8-)。以防万一其他人需要它，我只是在命令的 uniq 部分放了一个“-u”：

```
awk '{print(NR"\t"$0)}' file_name | sort -t$'\t' -k2,2 | uniq -u --skip-fields 1 | sort -k1,1 -t$'\t' | cut -f2 -d$'\t' 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-02-05T10:08:41.223

我只是想删除以下行中的所有重复项，而不是文件中的所有位置。所以我用：

```
awk '{
  if ($0 != PREVLINE) print $0;
  PREVLINE=$0;
}' 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-10-06T11:03:21.043

该`uniq`命令甚至可以使用别名[http://man7.org/linux/man-pages/man1/uniq.1.html](http://man7.org/linux/man-pages/man1/uniq.1.html)

# android - 在getView中使用Drawable让ListView变慢

> ID：11532166
> 
> 赞同：0
> 
> 时间：2012-07-17T23:14:49.873
> 
> 标签：android, listview

我有一个`ListView`显示`Drawable`s
这是我的代码：

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            ViewHolder holder;
            if (convertView == null) {
                holder = new ViewHolder();
                convertView = inflater.inflate(
                        R.layout.main_advertisement_list_view_item, null);

                holder.icon = (ImageView) convertView
                        .findViewById(R.id.imageView1);
                holder.name = (TextView) convertView
                        .findViewById(R.id.textView1);

                convertView.setTag(holder);
            } else {
                holder = (ViewHolder) convertView.getTag();
            }
            Log.d("view", holder.name+"");
            Log.d("string",getItem(position)+"");
            holder.name.setText(getItem(position).name);
            holder.icon.setImageResource(
                    categories_icons.getResourceId(position, -1));
            return convertView;
        } 
```

我如何延迟加载`Drawables`？我看到了示例和示例，但是对于本地可绘制对象，由于我的代码使列表视图移动缓慢，我该如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:33:26.067

公共无效 setImageResource (int resId)

自：API 级别 1

将可绘制对象设置为此 ImageView 的内容。

这会在 UI 线程上进行位图读取和解码，**这可能会导致延迟打嗝**。如果这是一个问题，请考虑使用 setImageDrawable

```
Drawable icon = _context.getResources().getDrawable(R.drawable.icon_1);
holder.icon.setImageDrawable(icon); 
```

# java - 错误 403 - 使用 Spring 安全性拒绝访问 - 多对多注释问题？

> ID：11532171
> 
> 赞同：0
> 
> 时间：2012-07-17T23:15:05.950
> 
> 标签：java, spring, hibernate, spring-security, many-to-many

我一直无法弄清楚我在这里做错了什么。我正在尝试访问页面 /user/test.jsp，但出现错误 403 access denied 错误。

我猜这个问题来自 UserEntity 类中的 ManyToMany 注释。我已经尽我所能，但仍然没有成功解决这个问题。

经过进一步研究，似乎 user_security_role 没有从数据库加载。

我知道是这种情况，因为 Assembler 类的 buildUserFromUserEntity 中的以下代码部分返回一个空的 SecurityRoleCollection：

```
for (SecurityRoleEntity role : userEntity.getSecurityRoleCollection()) {
    authorities.add(new GrantedAuthorityImpl(role.getName()));
} 
```

这是我用于表的 SQL（来自教程）：

```
CREATE TABLE IF NOT EXISTS security_role (

    `id` INT(11) NOT NULL AUTO_INCREMENT ,

    `name` VARCHAR(50) NULL DEFAULT NULL ,

    PRIMARY KEY (`id`) )

    ENGINE = InnoDB

    AUTO_INCREMENT = 4

    DEFAULT CHARACTER SET = latin1;

CREATE TABLE IF NOT EXISTS user (

    `id` INT(11) NOT NULL AUTO_INCREMENT ,

    `first_name` VARCHAR(45) NULL DEFAULT NULL ,

    `family_name` VARCHAR(45) NULL DEFAULT NULL ,

    `dob` DATE NULL DEFAULT NULL ,

    `password` VARCHAR(45) NOT NULL ,

    `username` VARCHAR(45) NOT NULL ,

    `confirm_password` VARCHAR(45) NOT NULL ,

    `active` TINYINT(1) NOT NULL ,

    PRIMARY KEY (`id`) ,

    UNIQUE INDEX `username` (`username` ASC) )

    ENGINE = InnoDB

    AUTO_INCREMENT = 9

    DEFAULT CHARACTER SET = latin1;

CREATE TABLE IF NOT EXISTS user_security_role (

    `user_id` INT(11) NOT NULL ,

    `security_role_id` INT(11) NOT NULL ,

    PRIMARY KEY (`user_id`, `security_role_id`) ,

    INDEX `security_role_id` (`security_role_id` ASC) ,

    CONSTRAINT `user_security_role_ibfk_1`

    FOREIGN KEY (`user_id` )

    REFERENCES `user` (`id` ),

    CONSTRAINT `user_security_role_ibfk_2`

    FOREIGN KEY (`security_role_id` )

    REFERENCES `security_role` (`id` ))

    ENGINE = InnoDB

    DEFAULT CHARACTER SET = latin1; 
```

这是我无法开始工作的棘手部分：为私有 Set securityRoleCollection 配置的注释；属性不从数据库加载数据，我不知道我在这里做错了什么。

```
public class UserEntity implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;

    @Column(name = "first_name")
    private String firstName;

    @Column(name = "family_name")
    private String familyName;

    @Column(name = "dob")
    @Temporal(TemporalType.DATE)
    private Date dob;

    @Basic(optional = false)
    @Column(name = "password")
    private String password;

    @Basic(optional = false)
    @Column(name = "username")
    private String username;

    @Basic(optional = false)
    @Column(name = "confirm_password")
    private String confirmPassword;

    @Basic(optional = false)
    @Column(name = "active")
    private boolean active;

    @JoinTable(name = "user_security_role", joinColumns = {

    @JoinColumn(name = "user_id", referencedColumnName = "id") }, inverseJoinColumns = {

    @JoinColumn(name = "security_role_id", referencedColumnName = "id") })
    @ManyToMany
    private Set<SecurityRoleEntity> securityRoleCollection;

    public UserEntity() {

    } 
```

这是我的 UserEntityDAOImpl 类：

```
public class UserEntityDAOImpl implements UserEntityDAO {

    public UserEntity findByName(String username) {
        Session session = HibernateUtil.getSessionFactory().openSession();
        Transaction transaction = null;
        UserEntity user = null;
        try {
            transaction = session.beginTransaction();
            user = (UserEntity)session.createQuery("select u from UserEntity u where u.username = '"
                    + username + "'").uniqueResult();

            transaction.commit();
        } catch (HibernateException e) {
            transaction.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }
        return user;
    } 
```

这是 SecurityRoleEntity 类：

```
@Entity
@Table(name = "security_role", catalog = "userauth", schema = "")
@NamedQueries({

        @NamedQuery(name = "SecurityRoleEntity.findAll", query = "SELECT s FROM SecurityRoleEntity s"),

        @NamedQuery(name = "SecurityRoleEntity.findById", query = "SELECT s FROM SecurityRoleEntity s WHERE s.id = :id"),

        @NamedQuery(name = "SecurityRoleEntity.findByName", query = "SELECT s FROM SecurityRoleEntity s WHERE s.name = :name") })
public class SecurityRoleEntity implements Serializable {

    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Basic(optional = false)
    @Column(name = "id")
    private Integer id;

    @Column(name = "name")
    private String name;

    @ManyToMany(mappedBy = "securityRoleCollection", fetch = FetchType.EAGER)
    private List<UserEntity> userCollection;

    public SecurityRoleEntity() {

    }

        getters and setters... 
```

这是汇编程序类：

```
@Service("assembler")
public class Assembler {

    @Transactional(readOnly = true)
    User buildUserFromUserEntity(UserEntity userEntity) {

        String username = userEntity.getUsername();
        String password = userEntity.getPassword();
        boolean enabled = userEntity.getActive();
        boolean accountNonExpired = userEntity.getActive();
        boolean credentialsNonExpired = userEntity.getActive();
        boolean accountNonLocked = userEntity.getActive();

        Collection<GrantedAuthorityImpl> authorities = new ArrayList<GrantedAuthorityImpl>();

        for (SecurityRoleEntity role : userEntity.getSecurityRoleCollection()) {
            authorities.add(new GrantedAuthorityImpl(role.getName()));
        }

        User user = new User(username, password, enabled,
        accountNonExpired, credentialsNonExpired, accountNonLocked, authorities);

        return user;

    }

} 
```

这是我的 spring-security.xml 的内容：

```
<beans:bean id="userDetailsService" class="service.UserDetailsServiceImpl">
</beans:bean>

<beans:bean id="assembler" class="service.Assembler">
</beans:bean>

<!-- <context:component-scan base-package="org.intan.pedigree" /> -->

<http auto-config='true'>
    <intercept-url pattern="/admin/**" access="ROLE_ADMIN" />
    <intercept-url pattern="/user/**" access="ROLE_User" />
    <!-- <security:intercept-url pattern="/login.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" 
        /> -->
</http>

<beans:bean id="daoAuthenticationProvider"
    class="org.springframework.security.authentication.dao.DaoAuthenticationProvider">
    <beans:property name="userDetailsService" ref="userDetailsService" />
</beans:bean>

<beans:bean id="authenticationManager"
    class="org.springframework.security.authentication.ProviderManager">
    <beans:property name="providers">
        <beans:list>
            <beans:ref local="daoAuthenticationProvider" />
        </beans:list>
    </beans:property>
</beans:bean>

<authentication-manager>
    <authentication-provider user-service-ref="userDetailsService">
        <password-encoder hash="plaintext" />
    </authentication-provider>
</authentication-manager> 
```

这是 UserDetailsS​​erviceImpl：

```
@Service("userDetailsService")
public class UserDetailsServiceImpl implements UserDetailsService {

    @Autowired
    private UserEntityDAO dao;

    @Autowired
    private Assembler assembler;

    @Transactional(readOnly = true)
    public UserDetails loadUserByUsername(String username)

    throws UsernameNotFoundException, DataAccessException {

        UserDetails userDetails = null;

        UserEntity userEntity = dao.findByName(username);

        if (userEntity == null)

            throw new UsernameNotFoundException("user not found");

        return assembler.buildUserFromUserEntity(userEntity);

    }

} 
```

这是我要访问的页面的控制器：

```
public class HowDoesItWorkController implements Controller {

protected final Log logger = LogFactory.getLog(getClass());

@PreAuthorize("hasRole('ROLE_User')")
public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    logger.info("returning contact view");
    return new ModelAndView("/explain");
}

} 
```

我一直在关注本教程： http: [//giannisapi.wordpress.com/2011/09/21/spring-3-spring-security-implementing-custom-userdetails-with-hibernate/](http://giannisapi.wordpress.com/2011/09/21/spring-3-spring-security-implementing-custom-userdetails-with-hibernate/)

其中说要插入这些角色：

```
insert into security_role(name) values ("ROLE_admin");

insert into security_role(name) values ("ROLE_User"); 
```

我认为插入数据库中的角色名称应该与配置文件中配置的名称相同，因此我更改了 xml 文件中的名称以适应数据库中的名称，但它没有改变任何内容。

数据库中的所有其他数据似乎都很好。

我还验证了我尝试访问的页面在 /user 中，情况就是这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:14:06.370

当您调用 UserEntityDAO 时，不会获取您的 UserEntity 的 securityRoleCollection。查找名称（）。您要么需要实现您的 DAO，以便它执行连接提取查询（可能更有效），要么简单的修复是添加：

```
@ManyToMany(fetch = FetchType.EAGER)
private Set<SecurityRoleEntity> securityRoleCollection 
```

我不认为这是你唯一的问题。您仍然需要确保所有角色名称都相同 - 您上面的代码当前具有：

```
ROLE_REGISTERED_USER
ROLE_User 
```

它们需要相同（除非 SecurityRoleEntity 类在两者之间进行映射？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T04:11:52.300

我已经能够解决这个问题。这是我的错误，我没有使用 hibernate.cfg.xml 文件下的好数据库。

此处配置的数据库引用了另一个数据库，其中我也有 3 个表，但是因为它们是空的，所以休眠请求没有选择任何角色。

# desire2learn - 有没有办法告诉使用合作伙伴.desire2learn.com 页面的默认身份验证是什么

> ID：11532172
> 
> 赞同：0
> 
> 时间：2012-07-17T23:15:08.790
> 
> 标签：desire2learn

我正在寻找可以验证合作伙伴.desire2learn.com 站点的身份验证类型的步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T15:18:50.280

没有用于验证身份验证类型的 API 或机制。如果您只需要了解单个站点的情况，有时您可以从登录序列期间访问的 url 中推断出来；但例如 D2L 中的 ldap 登录无法与内部帐户区分开来。

如果您遇到登录问题，我会打开支持票或联系合作伙伴组。

# cluster-analysis - 具有不同维度的聚类

> ID：11532173
> 
> 赞同：0
> 
> 时间：2012-07-17T23:15:15.263
> 
> 标签：cluster-analysis, hierarchical-clustering, online-algorithm

在我的聚类问题中，不仅点可以来去去去，而且特征也可以删除或添加。我的问题是否有任何聚类算法。

具体来说，我正在寻找这类聚类算法的凝聚层次聚类版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:30:19.180

您可以使用层次聚类（除非它的扩展性非常差）或任何其他基于距离的聚类。只是 k-means 有点棘手，因为当值不存在时如何计算平均值？

您只需*要先定义一个合适的***距离函数** 。

 *聚类通常基于相似性进行，因此：首先找出“相似”对您意味着什么。这是非常特定于数据集和用例的，尽管许多人可以使用某种距离函数。没有“一刀切”的解决方案。*

# google-app-engine - 用户！= users.get_current_user()

> ID：11532174
> 
> 赞同：1
> 
> 时间：2012-07-17T23:15:15.777
> 
> 标签：google-app-engine, if-statement, python-2.7

**更新：** 尚未给出的唯一答案是**没有**帮助我。该代码在我的本地系统上按需要运行，但在部署的 Python 应用程序中不起作用。这对我来说是一个系列问题。请认真考虑一下这个问题。

这是一些简化的代码来显示正在发生的事情。将简化代码放入 SDK 的交互式控制台时，它总是打印出来`Hello, schott.brian`，但在部署的应用程序中它就像打印出来一样`no match`。那是怎么回事？

```
user = "schott.brian"
name = "schott.brian"

if user and user == name:
     print "Hello, " + user
else:
     print "no match" 
```

这是我的代码。注意第二次`if`检查`if user and (user == person.user):`

```
user = users.get_current_user()
ID_id = self.request.get("ID", None)
ID_id = ''.join(ID_id.split())
key = db.Key.from_path("PQ", ID_id)
person = PQ.get(key)
if person: #person's ID DOES exist already
     logging.info("6 person %s" % person.user )
     logging.info("6 key %s" % key )
     logging.info("6 ID_id %s" % ID_id )
     logging.info("6 user %s" % user )
     if user and (user == person.user):
          # never get here on gae, but works on sdk
     else:
          # always gets to here by mistake on gae, but works on SDKs
          logging.info("7 user %s" % user )
          logging.info("7 person %s" % person.user ) 
```

这是 gae 上该代码的日志，即使用户存在并且 (user == person.user)，该 if 子句也不成功。你能告诉我为什么吗？两者中的一个是否真的包含 gmail.com 而另一个不包含？

```
2012-07-17 15:39:19.993 6 person schott.brian
I 2012-07-17 15:39:19.993 6 key ag1zfnBhcnRpY2lwb2xschMLEgJQUSILY29kZUJTY2hvdHQM
I 2012-07-17 15:39:19.993 6 ID_id codeBSchott
I 2012-07-17 15:39:19.993 6 user schott.brian
I 2012-07-17 15:39:19.993 7 user schott.brian
I 2012-07-17 15:39:19.994 7 person schott.brian 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T23:26:44.090

`user.get_current_user()`返回一个对象。打印用户将其转换为字符串，因此您可能想要执行以下操作：

```
if user and (str(user) == str(person.user)): 
```

但实际上你最好比较用户 ID，而不是用户对象的字符串表示。

# matlab - Matlab GUI中的无限循环导致关闭GUI时Matlab冻结？

> ID：11532175
> 
> 赞同：2
> 
> 时间：2012-07-17T23:15:27.940
> 
> 标签：matlab, user-interface, infinite-loop, matlab-guide

我正在使用 GUIDE 在 Matlab 中创建 GUI。当用户点击 GUI 中的“开始”按钮时，它会在后台启动以无限循环运行的优化任务。每次迭代它都会向 GUI 输出一些信息。

当我按下该开始按钮然后关闭 GUI 窗口时，Matlab 冻结。当我运行 GUI 但不按“开始”按钮并关闭 GUI 时，它不会冻结。

我怎样才能避免冻结？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:40:49.893

您开始的无限循环不允许处理任何进一步的事件（即窗口关闭事件）。您需要允许[中断](http://www.mathworks.com/help/techdoc/creating_guis/bq61qtj-1.html#bq61uc7)机制发生 - 尽管`'interruptible'`属性默认为`'on'`，但您必须满足另一个要求：

> 如果正在执行回调的对象的 Interruptible 属性为 on，则可以中断回调。但是，只有当它或它触发的函数调用drawow、figure、getframe、pause 或waitfor 时，它才会被中断。在执行其定义的任务之前，这些函数会处理事件队列中的任何事件，包括任何等待回调。如果正在执行的回调或它触发的函数没有调用这些函数，则无论其对象的 Interruptible 属性的值如何，它都不能被中断。

由于您有一个循环，您可以插入一个`pause`or`drawnow`命令以允许 MATLAB 处理其他事件，例如鼠标单击其他按钮（`pause(0)`可能有效 - 尚未测试 - 允许检查中断事件而不会实际导致循环变慢 if没有中断）。

（旁注： ctrl-c 打破循环，所以你总是可以这样做，但......不理想。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-27T16:18:34.280

我还发现，当在 100K 次迭代后无休止地运行时，由于 matlab 中的内存碎片，GUI 可能会变得无响应我释放了所有不必要的临时变量并将结果保存到 .mat 文件，之后指示 gui 强制退出并打开一个新副本从 autohotkey 并从 previous.mat 文件加载所有以前的变量 GUI 现在可以无限循环

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T22:22:18.217

正如[tmpearce](https://stackoverflow.com/users/1214731/tmpearce)在[他的回答](https://stackoverflow.com/a/11534405/311865)中指出的那样，为了中断函数（回调），它必须包含对 drawow、figure、getframe、pause 或 waitfor 的调用。并且`interruptible`必须`on`在按钮 GUI 组件上设置属性。

所以我把暂停放在无限（无尽）循环中。但是它效果不佳：`pause(0.0000000000000001)`确实显着减慢了进度（我确实对其进行了测量，因此它不是主观的）。`pause(0)`没有减慢循环并允许 GUI 更新，但不允许在按下另一个按钮后执行任何其他回调。

我最终`drawnow;`在循环中使用了命令。它并没有显着减慢周期（减慢不到 5%），并且 GUI 按预期工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T09:15:39.197

我了解到，仅`matlabpool`事先使用将使您的 gui 响应。基本上它会自动将您的计算放入工作线程中。

不幸的是，现在找不到参考。但也许你愿意尝试*黑魔法*；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-01T22:49:40.780

matlab guis 有很多对象。当您关闭 GUI 时，这些对象就会消失。

有时，线程会在窗口关闭并且程序继续运行后保留。

为了关闭这个线程，我使用嵌入在我的 gui 中的轴，并确保它在每个循环中仍然存在。

```
h=gca;
for x = 1:WIDTH:(size(image,1)-WIDTH-OVERLAP-1)
    for y = 1:HEIGHT:(size(image,2)-HEIGHT-OVERLAP-1)
        %if the main gui closes, then the axis will change...
        %in that case, you should stop this thread.
        if(h == gca)
            window = image(x:x+WIDTH+OVERLAP,y:y+HEIGHT+OVERLAP);%%account for a 10 pixel overlap
            imshow(window)
            pause(.01);  
        else
            close all;
            return;
        end

    end
end 
```

# javascript - For 循环内的 For 循环内的 For 循环内的 For 循环... = 问题

> ID：11532177
> 
> 赞同：1
> 
> 时间：2012-07-17T23:15:58.317
> 
> 标签：javascript, cryptography, vigenere

所以。我在 JS 中的其他 for 循环中有 4 个 for 循环，并且我的代码出现（FireBug 同意我的观点）我的代码在语法上是合理的，但它拒绝工作。我正在尝试通过使用巧合索引和 Kappa 测试来计算 vigenere 密码中的密钥长度<-如果有帮助的话。

我的主要问题是，当我尝试运行 keylengthfinder() 函数时，由于 Firefox 的内存使用量超过 1GB，CPU 超过 99%，因此该任务的计算量似乎太高，无法运行 Javascript。任何关于如何解决这个问题的想法，即使需要更长的时间来计算，也将不胜感激。这是相同代码的链接 - [http://pastebin.com/uYPBuZZz](http://pastebin.com/uYPBuZZz) - 很抱歉此代码中的任何缩进问题。我在将其正确放置在页面上时遇到问题。

```
function indexofcoincidence(text){
    text = text.split(" ").join("").toUpperCase();
    var textL = text.length;
    var hashtable = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
    var alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    for (d=0; d<=25; d++) {
        for (i=0; i < textL; i++){
            if (text.charAt(i) === alphabet.charAt(d)){
            hashtable[d] = hashtable[d] + 1;
            }
        }
    }

    var aa = hashtable[0]/textL;
    var A = aa*aa;
    var bb = hashtable[1]/textL;
    var B = bb*bb;
    var cc = hashtable[2]/textL;
    var C = cc*cc;
    var dd = hashtable[3]/textL;
    var D = dd*dd;
    var ee = hashtable[4]/textL;
    var E = ee*ee;
    var ff = hashtable[5]/textL;
    var F = ff*ff;
    var gg = hashtable[6]/textL;
    var G = gg*gg;
    var hh = hashtable[7]/textL;
    var H = hh*hh;
    var ii = hashtable[8]/textL;
    var I = ii*ii;
    var jj = hashtable[9]/textL;
    var J = jj*jj;
    var kk = hashtable[10]/textL;
    var K = kk*kk;
    var ll = hashtable[11]/textL;
    var L = ll*ll;
    var mm = hashtable[12]/textL;
    var M = mm*mm;
    var nn = hashtable[13]/textL;
    var N = nn*nn;
    var oo = hashtable[14]/textL;
    var O = oo*oo;
    var pp = hashtable[15]/textL;
    var P = pp*pp;
    var qq = hashtable[16]/textL;
    var Q = qq*qq;
    var rr = hashtable[17]/textL;
    var R = rr*rr;
    var ss = hashtable[18]/textL;
    var S = ss*ss;
    var tt = hashtable[19]/textL;
    var T = tt*tt;
    var uu = hashtable[20]/textL;
    var U = uu*uu;
    var vv = hashtable[21]/textL;
    var V = vv*vv;
    var ww = hashtable[22]/textL;
    var W = ww*ww;
    var xx = hashtable[23]/textL;
    var X = xx*xx;
    var yy = hashtable[24]/textL;
    var Y = yy*yy;
    var zz = hashtable[25]/textL;
    var Z = zz*zz;

    var Kappa = A+B+C+D+E+F+G+H+I+J+K+L+M+N+O+P+Q+R+S+T+U+V+W+X+Y+Z;
    var Top = 0.027*textL;
    var Bottom1 = 0.038*textL + 0.065;
    var Bottom2 = (textL - 1)*Kappa;
    var KeyLength = Top/(Bottom2 - Bottom1) ;

    return Kappa/0.0385;
}

function keylengthfinder(text){
    // Average Function Definition
    Array.prototype.avg = function() {
        var av = 0;
        var cnt = 0;
        var len = this.length;
        for (var i = 0; i < len; i++) {
            var e = +this[i];
            if(!e && this[i] !== 0 && this[i] !== '0') e--;
            if (this[i] == e) {av += e; cnt++;}
    }
        return av/cnt;
    }
    // Begin the Key Length Finding
    var textL = text.length;
    var hashtable = new Array(0,0,0,0,0,0,0,0,0,0,0,0);
        for (a = 0; a <= 12; a++){ // This is the main loop, testing each key length
            var stringtable = [];
            for (z = 0; z <= a; z++){ // This allows each setting, ie. 1st, 4th, 7th AND 2nd, 5th, 8th to be tested
                for (i = z; i < textL; i + a){
                    var string = '';
                    string = string.concat(text.charAt(i)); // Join each letter of the correct place in the string
                    stringtable[z] = indexofcoincidence(string);
                    }
                }
            hashtable[a] = stringtable.avg();
        }
    return hashtable;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:45:48.567

你的问题肯定就在这里

```
for (i = z; i < textL; i + a){
  var string = '';
  string = string.concat(text.charAt(i)); // Join each letter of the correct place in the string
  stringtable[z] = indexofcoincidence(string);
 } 
```

请注意，如果`a=0`i 从未改变，因此您处于无限循环中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:36:36.463

```
Array.prototype.avg = function() {...} 
```

应该只做一次，而不是每次都`keylengthfinder`被调用。

```
var Top = 0.027*textL;
var Bottom1 = 0.038*textL + 0.065;
var Bottom2 = (textL - 1)*Kappa;
var KeyLength = Top/(Bottom2 - Bottom1) ;
return Kappa/0.0385; 
```

如果您根本不使用这些变量，为什么还要计算这些变量？

```
var string = '';
string = string.concat(text.charAt(i)); // Join each letter of the correct place in the string
stringtable[z] = indexofcoincidence(string); 
```

我不知道你想在这里做什么。`string`永远只有一个字符？

```
for (i = z; i < textL; i + a) {
    ...
    stringtable[z] = ...
} 
```

在此循环中，您正在计算`i`from `z`to的值`textL`- 但每次都覆盖相同的数组项。所以计算`stringtable[z]`for就足够了`i=textL-1`- 或者你的算法有缺陷。

该函数的一个更短更简洁的变体`indexofcoincidence`：

```
function indexofcoincidence(text){
    var l = text.replace(/ /g, "").length;
    text = text.toUpperCase().replace(/[^A-Z]/g, "");
    var hashtable = {};
    for (var i=0; i<l; i++) {
        var c = text.charAt(i);
        hashtable[c] = (hashtable[c] || 0) + 1;
    }
    var kappa = 0;
    for (var c in hashtable)
        kappa += hashtable[c] * hashtable[c];
    return kappa/(l*l)/0.0385;
} 
```

* * *

好的。现在我们发现了您的问题（包括`a=0`qw3n 检测到的 case 中的无限循环），让我们重写循环：

```
function keylengthfinder(text) {
    var length = text.length,
        probabilities = []; // probability by key length
        maxkeylen = 13; // it might make more sense to determine this in relation to length

    for (var a = 1; a <= maxkeylen; a++) { // testing each key length
        var stringtable = Array(a); // strings to check with this gap
        // read "a" as stringtable.length
        for (var z = 0; z < a; z++) {
            var string = '';
            for (var i = z; i < textL; i += a) {
                string += text.charAt(i);
            }
            // a string consisting of z, z+a, z+2a, z+3a, ... -th letters
            stringtable[z] = string;
        }
        var sum = 0;
        // summing up the coincidence indizes for current stringtable
        for (var i=0; i<a; i++) {
            sum += indexofcoincidence(stringtable[i]);
        }
        probabilities[a] = sum / a; // average
    }
    return probabilities;
} 
```

每个循环语句都已针对您的原始脚本进行了更改！

*   永远不要忘记将运行变量声明为本地（`var`关键字）
*   `a`需要从零开始 - 密钥的最小长度必须为 1
*   要从 1 运行到 n，请使用`i=1; i<=n; i++`
*   要从 0 运行到 n-1，请使用`i=0; i<n; i++`（几乎所有循环，尤其是在从零开始的数组索引上）。
*   除了这两个之外的其他循环永远不会出现在正常程序中。如果您有从 0 到 n 或从 1 到 n-1 的循环，您应该怀疑...
*   更新表达式需要更新运行变量。`i++`是 的快捷方式`i+=1`是 的快捷方式`i=i+1`。您的表达式`i + a`没有分配新值（除了*问题*`a=0`）！

# java - 读取同一目录中的 XML 文件

> ID：11532179
> 
> 赞同：1
> 
> 时间：2012-07-17T23:16:13.263
> 
> 标签：java, file-io

我知道它以前被问过并回答过，但我就是不能让它工作。

所以，我的文件层次结构是：

```
+ Project
  + build.xml
  + save.xml
  + src
  + build 
```

我有“保存”文件来保存给定瞬间的游戏状态。在游戏中重新加载所有内容应该很容易覆盖和阅读。

我的 save() 是这样的，它似乎正在工作：

```
 public void save(Game game) throws IOException{
    Document doc = DocumentHelper.createDocument();
    doc.add(game.save());
    File save=null;
    save = new File("./save.xml");

    FileWriter writer = new FileWriter(save);
    doc.write( writer);
    writer.close();
} 
```

game.save() 是游戏中的一个方法，它实际上做了我想做的事情。它以递归方式完成，我知道它工作正常，因为我用另一个程序打开了 XML 文件。

所以，我的问题从这里开始。我的 getinfofromxml() 方法是：

```
public Game getinfofromxml() throws IOException{
    Game game;
    SAXReader reader = new SAXReader();
    try{
        URL fileWithData=getClass().getResource("./save.xml");
        Document document = reader.read(fileWithData);
        Element alreadySavedGame= document.getRootElement();
        game= getGameSaved(alreadySavedGame);
    }catch(DocumentException ex){
        throw new IOException();
    }
    return game;
} 
```

我的问题是，当尝试运行它（通过 ant）时，没有测试会通过。我去eclipse，我可以看到当我尝试加载游戏时，它会抛出`Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException`.

我试过把这条线改成`URL fileWithData=getClass().getResource("./save.xml");`和`URL fileWithData=getClass().getResource("save.xml");`之`URL fileWithData=getClass().getResource("../save.xml");`类的东西，但它说的总是一样的。

任何想法？

感谢您阅读

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:34:54.420

因此，如果您使用 getResource() ，它将尝试使用用于加载该类的类加载器来查找您的文件。这可能是（至少稍后）你的应用程序打包的 jar 文件，我不认为你正在尝试从那里加载你的保存游戏:)

我会以与保存文件相同的方式加载文件：

```
URL fileWithData= new File( "save.xml" ).toURI().toURL(); 
```

（您可能需要捕获一个额外的异常）

# php - 使用 PHP_EOL 时输出中没有换行符

> ID：11532182
> 
> 赞同：8
> 
> 时间：2012-07-17T23:16:41.283
> 
> 标签：php

我正在整理一个字符串，我将输出到 .srt 文件：

```
while ($row = mysql_fetch_array($res)) {
    $srt = $srt . $row['line_number'] . PHP_EOL; 
    $srt = $srt . str_replace(".", ",", $row['start']) . " --> " . str_replace(".", ",", $row['end']) .PHP_EOL ;    
    $srt = $srt . br2nl($row['text']) . PHP_EOL; 
    $srt = $srt . PHP_EOL;  
} 
```

但它似乎`PHP_EOL`不起作用，因为我的输出是：

```
100:00:02,107 --> 00:00:05,810you sure 
```

并且没有任何换行符。我试图让我的输出是：

```
1
00:00:02,107 --> 00:00:05,810
you sure 
```

后跟一个换行符。

通过我的计算机上的 localhost 进行测试时，它可以工作。我主机上的 PHP 版本是否缺少对 的支持`PHP_EOL`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T23:32:02.897

PHP 手册说 PHP_EOL 常量自 PHP 4.3.10 和 PHP 5.0.2 起可用

> PHP_EOL (string) 此平台的正确“行尾”符号。自 PHP 4.3.10 和 PHP 5.0.2 起可用 - [http://php.net/manual/en/reserved.constants.php](http://php.net/manual/en/reserved.constants.php)

所以测试它是否存在：

```
var_dump(PHP_EOL); // should output: string(1) " " 
```

或者

```
var_dump(defined("PHP_EOL")); // should output if exists: bool(true) 
```

如果未定义，请根据需要手动定义

```
define("PHP_EOL", "\n"); 
```

或只使用`echo "\n"`或`echo "\r\n"`

另一个可能的原因是当您`$srt`在浏览器中输出变量时，您的输出和 mime 类型是在 HTML 中设置的，因此您将其视为一行，但如果您查看源代码，则它应该跨越多行。

为确保文本输出，`<pre>`如果您想保留 html 或在 php 文件的顶部添加此行以强制文本输出，您可以回显一个标签：

```
header('Content-Type: text/plain', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:33:36.580

> PHP_EOL 此平台的正确“行尾”符号。

所以它在本地主机上工作，因为它的窗口并给出了一个窗口换行符

您的在线网站可能在 linux 上并给出了 linux 换行符

为了获得一致的结果，请使用`"\r\n"`而不是`PHP_EOL`，尽管我认为媒体播放器将能够识别任何样式的换行符。

# sql-server - Entity Framework Power Tools 扩展的源代码是否可用？如果没有，它会永远存在吗？

> ID：11532185
> 
> 赞同：3
> 
> 时间：2012-07-17T23:17:15.083
> 
> 标签：sql-server, visual-studio-2010, performance, entity-framework, entity-framework-5

[在使用EF Power Tools 扩展 beta 2](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)对复杂的数据库进行逆向工程时，我遇到了一些性能问题。我有一些关于如何改进这一点的理论，但找不到任何对已发布来源的参考。

这个扩展会作为开源发布吗？如果是，何时何地？

* * *

顺便说一句，我遇到的问题是逆向工程在我的复杂数据库上花费了很长时间（在此期间 SQL Server 正在工作）并挂起 Visual Studio UI（我使用的是 2010 ）。

在我强大的工作站和完全空闲的 SQL Server 上，这个过程大约需要 10 分钟。我之前在一个更简单的数据库上尝试过它，它在大约 5 秒内完成。

我猜它在数据库上创建了一个非常繁重的模式查询，然后在等待响应时挂起 UI 线程。如果是这种情况，我会尝试拆分查询结果并以块的形式获取数据，并且还可能将生成代码移动到单独的线程中，同时 UI 会提供有关进度的反馈。

一个更简单的解决方案是只创建一个命令行界面来做同样的事情（已经有一个，我错过了吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T10:08:39.647

它可在[此处的实体框架代码库中获得](http://entityframework.codeplex.com/SourceControl/changeset/view/42370a831b55)

![在此处输入图像描述](../Images/c60e8a174816a192ebab21644c7b9a1a.png)

分叉，贡献，做你想做的事。

# ruby-on-rails - 如何与许多父母建立许多自我参照关系？

> ID：11532187
> 
> 赞同：1
> 
> 时间：2012-07-17T23:17:21.780
> 
> 标签：ruby-on-rails, mongodb, database-design, activerecord

我想以最简单的方式模拟以下内容：

一个技能有很多从属技能。

每个技能都应该独立存在，并且一个技能可能有其他作为必备技能的技能。

例如：

```
Skill: Front-End Development Has Dependent Skills -> [HTML, CSS, SCSS]
Skill: Web-Design Has Dependent Skills -> [HTML, CSS]
Skill: HTML 
```

我希望能够做到：

```
@front_end_development.dependent_skills ##or a more semantic mapping 
```

我可能想爬上树，但我想不出最好的名字。也许我想通过 Web 设计所依赖的 HTML 来引用它。

* * *

进行这种自我引用是否有意义，或者这是否会伤害我的大脑是一种代码味道并乞求其他东西是理想的？这一切都归结为取决于其他技能的技能。

使用 mongo 对此进行建模会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:03:45.033

每次您需要检索技能的所有依赖项时，不必遍历树（实际上更像是有向图），您可能只是在向特定技能添加新依赖项时遍历隐含的依赖项并将它们保存到名为“依赖关系”将技能映射到依赖关系，反之亦然。例如（关系可以更好地措辞）：

```
class Skill
    has_many :dependers, class_name: 'Dependency', foreign_key: :dependee_id
    has_many :dependees, class_name: 'Dependency', foreign_key: :depender_id

    has_many :dependencies, through: :dependees
    has_many :depending, through: :dependers

    def add_dependency(skill)
        recurse_dependencies(skill)
    end

    def recurse_dependencies(skill)
        # perform this check to avoid circular and duplicate dependencies
        if !depender_ids.include?(skill.id) && !dependee_ids.include?(skill.id)
            dependee_ids << skill.id
        end

        skill.dependencies.each do |dependency|
            recurse_dependencies(dependency)
        end
    end
end

class Dependency
    belongs_to :dependee
    belongs_to :depender
end 
```

然后，您应该能够执行以下操作：

```
@front_end_development.dependencies
@front_end_development.depending
@front_end_development.add_dependency(@html) 
```

# macos - 如何摆脱 Mac OS X 中 ps 命令中的标题？

> ID：11532188
> 
> 赞同：14
> 
> 时间：2012-07-17T23:17:32.657
> 
> 标签：macos, bash, shell, ps

我使用特定的 ps 命令，即

```
ps -p <pid> -o %cpu, %mem 
```

这给了我一个像

```
 %CPU %MEM
 15.1 10.0 
```

我想要做的只是打印这些数字，如 15.1 和 10.0 没有标题。我尝试使用 'cut' 。但它似乎适用于每一行。

IE

```
echo "$(ps -p 747 -o %cpu,%mem)" | cut -c 1-5 
```

给出类似的东西

```
 %CPU
  8.0 
```

如何获得没有标题的数字？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-18T00:16:46.730

GNU 的 BSD（以及更普遍的 POSIX）等价物`ps --no-headers`有点烦人，但是，从手册页：

> ```
>  -o      Display information associated with the space or comma sepa-
>          rated list of keywords specified.  Multiple keywords may also
>          be given in the form of more than one -o option.  Keywords may
>          be appended with an equals (`=') sign and a string.  This
>          causes the printed header to use the specified string instead
>          of the standard header.  If all keywords have empty header
>          texts, no header line is written. 
> ```

所以：

```
ps -p 747 -o '%cpu=,%mem=' 
```

就是这样。

如果您确实需要从任意命令中删除第一行，tail 可以轻松完成：

```
ps -p 747 -o '%cpu,%mem' | tail +2 
```

或者，如果您想完全便携：

```
ps -p 747 -o '%cpu,%mem' | tail -n +2 
```

该`cut`命令类似于更简单的基于行的命令`head`和基于列的命令`tail`。（如果你真的想削减列，它可以工作......但在这种情况下，你可能不会；首先传递`-o`你想要 ps 的参数比传递额外内容并尝试将它们剪掉要简单得多.)

同时，我不确定为什么您认为需要评估某些东西作为回声的参数，而这与直接运行它具有相同的效果，并且只会使事情变得更加复杂。例如，以下两行是等价的：

```
echo "$(ps -p 747 -o %cpu,%mem)" | cut -c 1-5
ps -p 747 -o %cpu,%mem | cut -c 1-5 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-17T23:22:36.100

使用`awk`：

```
ps -p 747 -o %cpu,%mem | awk 'NR>1' 
```

使用`sed`：

```
ps -p 747 -o %cpu,%mem | sed 1d 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-17T23:45:35.230

使用[`ps --no-headers`](http://ss64.com/bash/ps.html)：

> `--no-headers print no header line at all`

或使用：

```
ps | tail -n +2 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-18T00:20:20.287

已经选择了获胜者。德拉斯...

如果您已经在使用该`-o`参数，则可以通过在名称和列名称后面加上等号来指定要打印的特定列的标题。如果您输入一个空字符串，它将不打印任何标题：

使用标准标题（如您所见）：

```
$ ps -p $pid -o%cpu,%mem
 %CPU %MEM
  0.0  0.0 
```

使用自定义标题（只是为了向您展示它是如何工作的）：

```
$  ps -p $pid -o%cpu=FOO,%mem=BAR
  FOO  BAR
  0.0  0.0 
```

使用空标题（注意它甚至不打印空行）：

```
$ ps -p $pid -o%cpu="",%mem=""
 0.0   0.0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-17T15:02:12.193

您可以使用以下命令，而无需添加 pcpu=""，它对我有用：

ps -Ao pcpu=

# objective-c - 线程1收到信号Sigbart？

> ID：11532192
> 
> 赞同：0
> 
> 时间：2012-07-17T23:17:47.697
> 
> 标签：objective-c, xcode

嗨，我是 Xcode 的新手，我正在制作一个简单的添加应用程序，当我得到这个时，我刚刚完成了它：

> 2012-07-17 19:06:55.478 添加[3526:fe03] *** 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键结果的键值编码。*** First throw call stack: (0x13c7022 0x1558cd6 0x13c6ee1 0x9bf022 0x930f6b 0x930edb 0x94bd50 0x23371a 0x13c8dea 0x13327f1 0x23226e 0xd81fc 0xd8779 0xd899b 0x37401 0x37670 0x37836 0x3e72a 0xf596 0x10274 0x1f183 0x1fc38 0x13634 0x12b1ef5 0x139b195 0x12ffff2 0x12fe8da 0x12fdd84 0x12fdc9b 0xfc65 0x11626 0x1b7d 0x1ae5 0x1) terminate called throwing an exception(lldb)

它自动将我带到 main.m，我将提供以下代码：

```
//
//  main.m
//  Add
//
//  Created by Dominic Kynkor on 7/17/12.
//  Copyright (c) 2012 academy of the holy names. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "AdditionAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AdditionAppDelegate class]));
    }
} 
```

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:13:12.100

这不一定是错误发生的地方，但它只是显示未捕获的异常已回落到的应用程序入口点。看起来好像在您的代码中的其他地方您可能试图`NSDictionary`错误地使用 an 。最好的办法是在调用`setValue`方法的地方设置一个断点，然后单步执行代码，直到它抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:51:45.937

我不是 100% 确定的。但是，当您在 XIB 文件中存在错误连接时，通常会出现此错误。检查您的 XIB 文件，按住 ctrl 并单击文件的所有者，看看那里是否有任何警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T02:22:42.710

您希望调试器做的是在异常发生时捕获异常，因此您可以查看堆栈跟踪并查看 Result 的设置发生在哪里。

要在 Xcode 中启用异常断点，请转到 Breakpoints 选项卡并单击底部的加号，选择添加异常断点。在结果对话框中采用默认值，然后单击完成。

现在您的调试会话将更有效率！

# ruby-on-rails - 使用 Twitter Bootstrap 编写此布局的提示

> ID：11532196
> 
> 赞同：5
> 
> 时间：2012-07-17T23:17:54.560
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, haml, twitter-bootstrap-rails

我正在尝试使用 Twitter Bootstrap（仅框）进行此布局：

![在此处输入图像描述](../Images/f32b01308d7212f1a767589c9ce00804.png)

基本上，它是一个 youtube 嵌入视频和右侧两个相同大小的框。

我现在有这个（haml）：

```
.row
  .span8
    / embedded code
  .span4
    / I need to put two boxes here... how? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:41:16.257

`.span*`您可以将块堆叠在一个`.row-fluid`容器中，然后您可以将其嵌套在另一个`span*`块中以创建您正在寻找的效果。试试这个例如：

**HTML**

```
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span9">
            <div class="big box">
                box
            </div>
        </div>
        <div class="span3">
            <div class="row-fluid">
                <div class="span3">
                    <div class="box">
                        box
                    </div>
                </div>
                <div class="span3">
                    <div class="box">
                        box
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> 
```

`.row-fluid`请注意我是如何将两个侧块嵌套在另一个块内的容器中的一个彼此顶部，以将`.span*`它们堆叠起来。

现在使用一点 CSS，我们可以将堆叠的`.span*`块拉伸到父块的宽度以创建一列：

**CSS**

```
.row-fluid [class*="span"] .row-fluid [class*="span"] {
    margin-left: 0;
    width: 100%;
} 
```

演示：http: [//jsfiddle.net/k27S5/show/](http://jsfiddle.net/k27S5/show/)

不太了解 HAML，但在查看文档后，设置应该如下所示：

**HAML**

```
.container-fluid
  .row-fluid
    .span9
      content
    .span3
      .row-fluid
        .span3
          content
        .span3
          content 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:52:06.453

如果您使用的是固定宽度布局：

```
.row
  .span8
  .span4
    .row
     .span4
    .row
    .span4 
```

如果您使用流体布局：

```
.row-fluid
  .span8
  .span4
    .row-fluid
      .span12
    .row-fluid
      .span12 
```

这假设您不关心匹配两列的高度，这无论如何都不会由 Bootstrap 处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:46:58.800

像大多数基于网格的系统一样，twitter bootstrap 中使用的系统将帮助您按行而不是按列进行布局。

我假设您希望左侧的大盒子与右侧的两个盒子高度相同。如果是这种情况，最简单的方法是使用表格。是的，人们对表格的评价很差，但对于某些布局，这是最简单的解决方案。

```
<table>
  <tr>
    <td>big box on left</td>
    <td>
      <div>small top box on right</div>
      <div>small bottom box on right</div>
    </td>
  </tr>
</table> 
```

然后相应地设置样式

# microcontroller - 微控制器的数据压缩

> ID：11532199
> 
> 赞同：2
> 
> 时间：2012-07-17T23:18:01.167
> 
> 标签：microcontroller, pic, data-compression

我正在用 PIC 微控制器做一个项目。我有一个 ADC 采样并将数据保存到 RAM 存储器，一旦 RAM 被填满，我需要使用 PIC 微控制器通过蓝牙发送它。

我的数据非常冗余，我有大约 10-20 个连续字节，它们是相同的值，然后它会发生变化，并且对于大约 10-20 个连续字节仍然相同。

我想压缩大约 512Kbytes 的数据以通过蓝牙更快地发送，512Kbytes 的数据通过蓝牙以 2Mbps 传输大约需要 2 秒。解压速度很快，因为数据传输到双核 ARM 平台，所以没有问题。

对于 PIC24 或 dsPIC 等 PIC 微控制器，是否有任何算法可以相对快速地压缩数据，速度约为 40MIPS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:20:47.977

根据该描述，听起来[*游程编码*](http://en.wikipedia.org/wiki/Run-length_encoding)对您来说是完美的。这是一个非常简单的算法；它只需要几行代码。

# javascript - 将 ajax 来源的 svg 组添加到现有画布

> ID：11532200
> 
> 赞同：1
> 
> 时间：2012-07-17T23:18:15.787
> 
> 标签：javascript, ajax, svg

我的页面上有一个空白的 svg 画布

```
<svg 
xmlns="http://www.w3.org/2000/svg" 
version="1.1"
width="100%"
height="100%"
id="svg_canvas"
preserveAspectRatio="xMinYMin meet"
viewBox="0 0 250 250">

</svg> 
```

我在外部文件中有另一个 svg，格式如下。

```
 <?xml ...>
    <svg id="external"
    ...>
      <g id="lollipop"
      ...>
        //LOTS OF VECTOR INSTRUCTIONS IN THIS GROUP
      </g>
    </svg> 
```

我想为外部 svg ajax 并将棒棒糖组插入当前画布。我会接受整个 .svg 的 ajax 答案并解析出要插入的组 (id="lollipop")。不过，最好只复制我想要的组并将其保存为可以调用和解析的文本文件。无论哪种方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T18:37:20.547

使用 jQuery，这是您想要的基本概念：

```
 //here I have a hidden div element in my document called "hiddenDiv";
 //I'm loading the SVG into the DOM via AJAX so we can access its elements.
 $("#hiddenDiv").load("/some/path/to/yourfile.svg", function(){

     //grab the content you want and add it to the canvas.
     $("#lollipop").clone().appendTo("#svg_canvas");

     //get rid of the extra unneeded svg
     $("#hiddenDiv").empty();
 } 
```

**编辑**阅读负载后，它有一个漂亮的功能可以轻松地做你想做的事：

```
 $("#svg_canvas").load('/some/path/to/yourfile.svg #lollipop'); 
```

链接到文档：[http](http://api.jquery.com/load/) ://api.jquery.com/load/请参阅“加载页面片段”。

# jquery - 使用 JSON 数据自动完成 jQuery

> ID：11532202
> 
> 赞同：6
> 
> 时间：2012-07-17T23:18:49.037
> 
> 标签：jquery, ajax, json, jquery-ui, jquery-ui-autocomplete

想象一个包含以下数据的 json 文件：

```
[
    {
        color: "red",
        value: "#f00"
    },
    {
        color: "green",
        value: "#0f0"
    },
    {
        color: "blue",
        value: "#00f"
    },
    {
        color: "cyan",
        value: "#0ff"
    }
] 
```

使用 jQuery 的自动完成方法，我希望它能够将*颜色*显示为选项以在输入中选择和插入*值*。

```
<input type="text" name="selector" id="selector" />

<input type="text" name="color" id="color" />
<input type="text" name="value" id="value" /> 
```

以上不需要介绍。用于搜索颜色的选择器，`input.color`带有*颜色*值和`input.value`带有*值*的值。

**编辑：** 我有这个 JSON 数据：

```
[{
    "label": "Sec\u00e7\u00e3o 1",
    "value": "1"
}, {
    "label": "Sec\u00e7\u00e3o 2",
    "value": "2"
}, {
    "label": "Sec\u00e7\u00e3o 3",
    "value": "3"
}, {
    "label": "Sec\u00e7\u00e3o 4",
    "value": "4"
}] 
```

这个HTML：

```
<input type="text" id="name" />
<input type="text" id="value" /> 
```

和这个jQuery：

```
$(document).ready(function(){
    $("#name").autocomplete({
        source: "json.php",
        select: function (event, ui) {
            $("#name").val(ui.label);
            $("#value").val(ui.value);
        }
    });
}); 
```

我按照安德鲁的回答，它提示我选择数据，但如果我警告`ui.label`和`ui.value`变量，它会显示“未定义”。我错过了什么？

**Edit2：** 假设我有这个 HTML：

```
<input type="text" class="name" />
<input type="text" class="value" />

<input type="text" class="name" />
<input type="text" class="value" /> 
```

是否可以使用相同的方法处理多个选择器`.autocomplete()`？喜欢，选择我想要使用的标签，`input.name`然后只更新它`input.value`旁边的标签？

[input.name] [input.value]
^ 我选择 ^ 更新
  它旁边的标签值
[input.name] [input.value]
^ 这保持不变 ^

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-17T23:26:25.627

使用远程数据源：

```
$("#selector").autocomplete({
    source: function (request, response) {
         $.ajax({
             url: "my_server_side_resource.php",
             type: "GET",
             data: request,
             success: function (data) {
                 response($.map(data, function (el) {
                     return {
                         label: el.color,
                         value: el.value
                     };
                 }));
             }
         });
    },
    select: function (event, ui) {
        // Prevent value from being put in the input:
        this.value = ui.item.label;
        // Set the next input's value to the "value" of the item.
        $(this).next("input").val(ui.item.value);
        event.preventDefault();
    }
}); 
```

根据需要调整`$.ajax`呼叫。此示例将生成对您的 PHP 资源的请求，如下所示：

> my_server_side_resource.php?term=xyz

如果您可以控制服务器端代码，则可以将返回的数据更改为如下所示：

```
[
    {
        label: "red",
        value: "#f00"
    }, /* etc */
] 
```

您可以简单地使用一个字符串，您的服务器端资源的名称作为`source`：

```
$("#selector").autocomplete({
     source: "my_server_side_resource.php",
     select: /* same as above */
}); 
```

查看[带有 JSONP 的远程示例](http://jqueryui.com/demos/autocomplete/#remote-jsonp)以获取使用服务器端资源的完整示例。

**编辑：**请参阅此示例以获取使用本地数据的工作演示：http: [//jsfiddle.net/SMxY6/](http://jsfiddle.net/SMxY6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:30:21.980

您需要更改 JSON 对象以使用“标签”属性。从文档：

> 具有标签和值属性的对象数组：[ { label: "Choice1", value: "value1" }, ... ]
> 
> 标签属性显示在建议菜单中。用户从菜单中选择某些内容后，该值将插入到输入元素中。如果只指定了一个属性，它将同时用于这两个属性，例如。如果您仅提供值属性，则该值也将用作标签。

然后，您需要在触发“更改”或“选择”事件时设置其他文本字段的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-09-06T10:07:41.157

```
$(function() {
            $("#subject_name").autocomplete({
                    source: function(request, response) {
                        $.ajax({
                            url: "api/listBasicsubject",
                            dataType: "json",
                            type: "POST",
                            data: {
                                subject_name: request.term,

                            },
                            success: function(data) {
                                response($.map(data.data, function(item) {
                                        return {
                                            label: item.subject_name,
                                            value: item.subject_name

                                        }
                                    });
                                }

                            },
                            autoFocus: true,
                            minLength: 1
                        });
                    });
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-28T08:39:47.093

经过几个小时的工作..终于实现了。事情是我有一个由许多 json 对象组成的 json 数组。每个 json 对象都有银行名称及其 ifsc 代码。用户需要键入银行并从数据库中过滤掉银行详细信息行。选择该银行后...我有 2 个输入字段，一个用于银行，另一个用于 ifsc 代码。我选择银行名称并显示相应的 ifsc 代码。所以我就是这样做的：-

* * *

```
<script type="text/javascript">
$(function() {

    $("#newBeneBankName").autocomplete({

        source: function(request, response) {

            $.ajax({
                url: "getBankDetailsIFSCJson",
                type: "GET",
                data: {
                    term: request.term
                },
                dataType: "json",
                success: function (data) {
                    response($.map(data, function (el) {
                        return {
                            label: el.label,
                            value: el.value
                        };
                    }));
                }
            });
        }, //newBeneBankName addBeneIfscCode
        focus: function (event, ui) {
            event.preventDefault();
            $("#newBeneBankName").val(ui.item.label);
        },
        select: function (event, ui) {
            event.preventDefault();
            $("#addBeneIfscCode").val(ui.item.value);
            $("#newBeneBankName").val(ui.item.label);
        }

});
}); 
```

* * *

我的json数组= [ {标签：“印度国家银行”，价值：“SBIN00076”}，{标签：“ICICI银行”，价值：“ICIC001”}，..]

# jira - 如何配置 JIRA_HOME？

> ID：11532205
> 
> 赞同：1
> 
> 时间：2012-07-17T23:18:55.340
> 
> 标签：jira

如何配置 JIRA_HOME？我收到一个错误：

> 配置的 jira.home '/Users/codedroid/Downloads/atlassian-jira-5.1-standalone' 不能是 webapp servlet 路径的父目录 '/Users/codedroid/Downloads/atlassian-jira-5.1-standalone/atlassian-jira '

改变了它，现在我明白了：

> 配置的 jira.home '/Users/codedroid/Downloads/atlassian-jira-5.1-standalone/atlassian-jira' 不能与 webapp servlet 路径 '/Users/codedroid/Downloads/atlassian-jira-5.1-standalone/ 相同atlassian-jira'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T14:53:46.447

[看看这里](https://confluence.atlassian.com/display/JIRA/Setting+your+JIRA+Home+Directory)，如果您仍然遇到问题，请写下您将 JIRA_HOME 设置为什么以及您在哪里定义它，谢谢。

**编辑**

是的，该文档更多的是“如何”而不是“什么”。关于 JIRA_HOME 应该是什么的更好的解释写在[这里](https://confluence.atlassian.com/display/JIRA/JIRA+Home+Directory)更详细。

无论如何，如果您觉得文档令人困惑或很糟糕，您可以帮大家一个忙，并将其写在页面底部的评论下，以便其他人可以轻松看到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T01:21:15.227

JIRA 文档没有！即使是经验丰富的程序员也要清楚，这个 JIRA_HOME 目录是指数据目录而不是安装目录。如果有任何 JIRA 人员，请在您的文档中解决这个令人发指的误解。JAVA_HOME 指的是你猜到的java的安装位置。如果您想发明其他含义，请将其称为“约定”，请在您的文档中说出来，不要浪费宝贵的开发人员时间来安装您的生产力工具。认为它没有问题？谷歌“不能与 webapp servlet 路径相同”，看看你得到了什么。感谢您浪费了我的下午，毫无疑问，也浪费了许多其他人的时间。

```
 (warning) However, avoid locating the JIRA Home Directory inside the JIRA Installation Directory. 
```

这仅出现在文档点中，并不是人们如上所述的第一个地方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T07:51:08.047

只需创建一个名为 JIRA 的文件夹，然后将环境变量设置`JIRA_HOME`为`D:\JIRA`，以及应用程序属性文件。

```
# jira-application.properties
jira.home = D:\\JIRA 
```

不要混淆了`JAVA_HOME`，`JIRA_HOME`和你从官网下载的压缩包所在的文件夹完全没有关系。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-04T15:06:17.270

JIRA_HOME 是一个空文件夹，JIRA 将在其中创建它在运行时需要的所有内容。它不是您解压的 JIRA 发行版所在的文件夹。

PS 是的，到 2021 年仍然令人困惑

# android - 使用 WAF 的 Android 应用

> ID：11532206
> 
> 赞同：1
> 
> 时间：2012-07-17T23:19:08.067
> 
> 标签：android

我是一名新的 android 应用程序开发人员，我想知道是否可以使用 Web 应用程序框架创建 android 应用程序？

如果是这样，是否有示例链接？

# json - 使用 Sencha Touch 2 从 JSON API 加载单个记录

> ID：11532207
> 
> 赞同：0
> 
> 时间：2012-07-17T23:19:30.923
> 
> 标签：json, touch, extjs, sencha-touch-2

我很难理解 Sencha Touch 2 的架构。我发现即使是我用其他语言和框架做的最基本的事情也非常痛苦。

目前，我只想做一个标准的主/细节视图。我将商店加载到列表视图中，并希望单击每个列表项以在详细视图中滑动。由于我的初始列表视图可以包含很多项目，因此我只在控制器中使用此方法加载了一点数据：

```
viewUserCommand: function(list, record) {
      // console.log(record);
      var profileStore = Ext.getStore("Profiles");
      profileStore.setProxy({
        url: 'http://localhost:8000/profile/' + record.data.user_id
      });
      profileStore.load();

      // console.log(profileStore);

      Ext.Viewport.animateActiveItem(Ext.getCmp('profileview'), this.slideLeftTransition);

    } 
```

首先，修改每个点击事件的 url 属性似乎有点 hacky。有没有办法指定“this.id”或类似的东西，然后将其传递给我的商店？还是需要将整个数据库表加载到一个对象中？

我可以 console.log 从这个方法返回，这正是我想要的。如何填充详细视图？我试过使用 DataView 组件，但它没有显示任何数据。sencha 网站上的示例相当稀少，而且相对没有上下文。这意味着即使复制和粘贴他们的示例也可能会失败。（我尝试使用 Ext.modelMgr.getModel() 的任何示例都失败了。）

我知道部分原因是这个框架是新的，我可能在理解它时遗漏了一个巨大的漏洞，但有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:39:01.650

建议您查看文档，有一个加载单个模型的示例：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model)

```
Ext.define('User', {
    extend: 'Ext.data.Model',

    config: {
        fields: ['id', 'name', 'email'],
        proxy: {
            type: 'rest',
            url : '/users'
        }
    }
});

//get a reference to the User model class
var User = Ext.ModelManager.getModel('User');

//Uses the configured RestProxy to make a GET request to /users/123
User.load(123, {
    success: function(user) {
        console.log(user.getId()); //logs 123
    }
}); 
```

# php - 动态传递表单中的 JQuery 变量

> ID：11532212
> 
> 赞同：2
> 
> 时间：2012-07-17T23:20:17.510
> 
> 标签：php, jquery

我正在尝试通过表单传递一个 jQuery 变量，但我不断收到错误消息。如何正确传递值变量。当我将它传递到下一页时，当我更改滑块时，它会吐出初始化变量并且不会更改。我怎样才能改变这个？

```
 <input id="column" type="hidden" name="column" value="";>

<script>
$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: 0,
        max: 500,
        values: [ 75, 300 ],
        slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
                    $( "#values" ).val(ui.values[ 0 ]);

        }
    });
    $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
        " - $" + $( "#slider-range" ).slider( "values", 1 ) );

    $( "#column" ).val($( "#slider-range" ).slider( "values", 0 ));

});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:22:48.133

您的 id 选择器错误，还请注意您正在设置滑块的值而不是获取，试试这个：

```
<input id="column" type="hidden" name="column" value="";/> 
```

```
$("#column").val($("#slider-range").slider("value")); 
```

或者：

```
$("#slider-range").slider({
   change: function(event, ui) { 
      $("#column").val($("#slider-range").slider("option", "value"));
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:24:23.527

首先，最好在属性的所有值周围加上引号。

`id=myTable --> id="myTable"`

其次，您的选择器错误。该字段的ID`column`不是`values`

```
$( "#column").val($("#slider-range").slider("values", 0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:24:42.937

我没有看到任何 id="values" 的元素，也许您想将值传递给 id="column" 的元素

```
$("#column").val($( "#slider-range" ).slider("value")); 
```

并删除 value=values; HTML 代码的一部分，简单地说`value=""`

# c# - OnPaint 在调整大小时留下痕迹

> ID：11532214
> 
> 赞同：3
> 
> 时间：2012-07-17T23:20:23.333
> 
> 标签：c#, winforms

我正在创建一个带有自定义边框的表单。我想使用 onPaint 覆盖绘制自己的边框。不幸的是，当我只使用下面的代码时，我得到了图像的痕迹。

有谁知道如何解决这一问题？是的，我已将 DoubleBuffered 设置为 true。

```
protected override void OnPaint(PaintEventArgs e)
{
  Graphics g = e.Graphics;

  // Background
  g.FillRectangle(new SolidBrush(ColorTranslator.FromHtml("#EFEFF7")), new Rectangle(0, 0, this.Width - 1, this.Height - 1));

  // Outer Borders
  g.DrawImage(Resources.Resource.OuterBorderTopLeft, new Rectangle(0, 0, 13, 13));
  g.DrawImage(Resources.Resource.OuterBorderTopLeft1, new Rectangle(13, 0, 221, 13));
  g.DrawImage(Resources.Resource.OuterBorderTopLeft2, new Rectangle(0, 13, 13, 221));
  g.DrawImage(Resources.Resource.OuterBorderTopRight, new Rectangle(this.Size.Width - 13, 0, 13, 13));
  g.DrawImage(Resources.Resource.OuterBorderTopRight1, new Rectangle(this.Size.Width - 13, 13, 13, 221));
  g.DrawImage(Resources.Resource.OuterBorderTopRight2, new Rectangle(this.Size.Width - 234, 0, 221, 13));
  g.DrawImage(Resources.Resource.OuterBorderBottomLeft, new Rectangle(0, this.Size.Height - 13, 13, 13));
  g.DrawImage(Resources.Resource.OuterBorderBottomLeft1, new Rectangle(0, this.Size.Height - 234, 13, 221));
  g.DrawImage(Resources.Resource.OuterBorderBottomLeft2, new Rectangle(13, this.Size.Height - 13, 221, 13));
  g.DrawImage(Resources.Resource.OuterBorderBottomRight, new Rectangle(this.Size.Width - 13, this.Size.Height - 13, 13, 13));
  g.DrawImage(Resources.Resource.OuterBorderBottomRight1, new Rectangle(this.Size.Width - 234, this.Size.Height - 13, 221, 13));
  g.DrawImage(Resources.Resource.OuterBorderBottomRight2, new Rectangle(this.Size.Width - 13, this.Size.Height - 234, 13, 221));
  base.OnPaint(e);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T23:24:48.580

也尝试覆盖 resize 方法：

```
protected override void OnResize(EventArgs e) {
  base.OnResize(e);
  this.Invalidate();
} 
```

或者在构造函数中，您可以添加另一个设置：

```
public Form1() {
  InitializeComponent();
  this.DoubleBuffered = true;
  this.ResizeRedraw = true;
} 
```

# android - Android 日期选择器 - 实际日期减去 X 天数

> ID：11532216
> 
> 赞同：1
> 
> 时间：2012-07-17T23:20:29.007
> 
> 标签：android, android-calendar

例如，我可以使用以下代码获取当前日期以显示在 DatePicker 对话框中。

```
 final Calendar c = Calendar.getInstance();
    mYear = c.get(Calendar.YEAR);
    mMonth = c.get(Calendar.MONTH);
    mDay = c.get(Calendar.DAY_OF_MONTH); 
```

如何显示实际日期减去 18 年（或多或少 6570 天）？

从我的“研究”中我需要使用`DAY_OF_YEAR`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:27:12.717

尝试使用：

```
 c.add(Calendar.YEAR, -18); 
```

您不必担心“或多或少”的 6570 天，因为 Calendar 对象处理闰年（以及一个月中的确切天数）。

# javascript - 将 dygraph 图表保存到本地硬盘上的 jpg 图像中

> ID：11532219
> 
> 赞同：3
> 
> 时间：2012-07-17T23:20:35.817
> 
> 标签：javascript, charts, dygraphs

我正在使用 JavasSript Dygraphs 图表。一切都很好，但我需要做的是能够将它作为图像保存在我的本地硬盘上。下面是我的 JavaScript 代码：

```
<script type="text/javascript">
 var img;
  g3 = new Dygraph(
   img = document.getElementById("graphdiv3"),
    "temperatures.csv",
    {
       rollPeriod: 9,
       showRoller: true,  
    }
    );
</script> 
```

这是我的 HTML 代码：

```
 <div>
     <div id='graphdiv3'></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T18:49:01.733

您可以在页面中创建隐藏的图像元素并将图像导出到用户磁盘，但问题是下载的文件将没有任何文件类型。用户可以在任何图像查看器中打开下载的文件。

```
var img = document.getElementById(imgId);
Dygraph.Export.asPNG(graph, img);
window.location.href = img.src.replace('image/png','image/octet-stream'); 
```

这使用来自此链接[http://cavorite.com/labs/js/dygraphs-export/的 dygraph-export 库](http://cavorite.com/labs/js/dygraphs-export/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T18:15:05.110

没有官方的方法可以做到这一点，但是 dygraphs 用户已经按照这些思路做了一些工作： [https ://groups.google.com/d/topic/dygraphs-users/whcMjtBE7s0/discussion](https://groups.google.com/d/topic/dygraphs-users/whcMjtBE7s0/discussion)

# c# - 这个语法在做什么？

> ID：11532222
> 
> 赞同：1
> 
> 时间：2012-07-17T23:21:00.530
> 
> 标签：c#

> **可能重复：**
> [什么是 C# 中的泛型？](https://stackoverflow.com/questions/4560890/what-is-generics-in-c)

```
public class MyNewClassMapper < EntityContainer, ModelContainer > 
   : BaseClassContainerMapper < EntityContainer, ModelContainer >
{

} 
```

我的应用程序中有上述代码。在 MSDN 中找不到解释上述类声明的链接。在每个尖括号周围添加了空白，以使这篇文章可读。请帮忙。史密斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:24:53.777

这是一个`MyNewClassMapper`具有泛型类型参数的泛型类，`EntityContainer`并从具有这些相同参数的泛型类¹`ModelContainer`继承。 ^(`BaseClassContainerMapper`)

*¹也可以是一个接口，尽管在这种情况下它看起来不像，基于名称。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:26:47.833

`MyNewClassMapper<EntityContainer, ModelContainer>`继承自`BaseClassContainerMapper < EntityContainer, ModelContainer >`

是`<EntityContainer, ModelContainer>`类型参数

请阅读更多关于通用类的信息[http://msdn.microsoft.com/en-us/library/sz6zd40f.aspx](http://msdn.microsoft.com/en-us/library/sz6zd40f.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:27:22.973

它定义了一个派生自基类 (BaseClassContainerMapper) 的类 (MyNewMapperClass)。

类本身用于将一种对象类型映射到另一种对象类型。

# ios - 向 UIScrollview 添加/删除 UIView 时的滞后来源？

> ID：11532227
> 
> 赞同：0
> 
> 时间：2012-07-17T23:21:45.170
> 
> 标签：ios, uiview, uiscrollview, lag, addsubview

***问题：***

添加/删除`subviews`到/从`UIScrollView`导致明显的滞后。

***细节：***

我有一个`UIScrollView`（带有 paging `enabled`）将包含几十个“页面”。这个的内容大小`UIScrollview`是页数 * 的宽度`UIScrollView`。

这些页面中的每一个`subview`都是我从某些文件系统访问中构建的。我`UIScrollView`保留了三个页面`subviews`：当前页面及其左/右邻居。当当前页面在屏幕外的一半时发生邻居的加载/驱逐`subviews`，这是磁盘访问和视图层次结构的操作发生的时候。

当我第一次遇到这个问题时，我的直接想法是磁盘访问/构建`subview`是滞后的根源。从那以后，我搬到了这个`NSTimer`，并且仍然遇到同样的滞后。

我开始怀疑滞后是由`addSubview`（添加`subview`到`UIScrollView`）和`removeFromSuperview`（从 中删除`subviews`）引起的`UIScrollView`。

`Subviews`直接添加到`UIScrollView`. 我没有`UIScrollView`将它们添加到其中的“内容视图”。

***问题：***

这是一个常见问题/瓶颈吗？加载这些页面有更好的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:01:52.347

问题最终是设置子视图的图像属性。UIImage 不会立即执行其处理，只是为出现在屏幕上做准备——这就是导致延迟的原因。

这个问题使我走上了正确的道路：

[设置 UIImageView 的图像属性会导致严重滞后](https://stackoverflow.com/questions/10790183/setting-image-property-of-uiimageview-causes-major-lag)

他们的解决方案是使用 Core Graphics 自己解压缩/处理图像，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:57:10.943

`NSTimer`通常在主线程上运行。如果您在主线程上进行同步磁盘访问，那么这将导致卡顿。你是如何阅读你的文件的？

# windows - COM端口是如何在windows上导出和记录的？

> ID：11532228
> 
> 赞同：3
> 
> 时间：2012-07-17T23:22:00.317
> 
> 标签：windows, registry, port

我正在为需要检测新连接的端口并返回其 VID/PID 值的 Windows（XP 和更高版本）编写设备检测功能。但是，我完全不知道 Windows 上的 COM 端口是如何派生和记录的。查看系统注册表，Windows 似乎存储了一些信息，例如 VID、PID 和端口 ID（即 COM1 COM26）。该端口是该设备独有的吗？或者多个条目可以具有相同的端口 ID？

此外，如果有人知道有关 Windows COM 端口的优秀且完整的教程，将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T06:04:08.900

如果您想获取系统上已分配的所有 COM 端口，那么您可以使用 COM Name Arbiter。Windows I/O 子系统将根据注册表中的 COM 名称仲裁器键分配值：

HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\COM 名称仲裁器

此键中的 COMDB 值是 REG_BINARY 类型，包含显示 Windows 已分配哪些 COM 端口的掩码。此列表以小端方式格式化，因此第一个字节代表 COM1 到 COM8，第二个值代表 COM9 到 COM16，依此类推。如果第一个字节是 0x05，二进制是 00000101，那么 COM1 和 COM3 已经被赋值。

听起来您正在使用 USB 到 UART 桥接设备，因此虽然将分配其中一些 COM 端口，但在执行扫描时它们可能未插入系统。因此，您可能需要快速执行 CreateFile()、检查成功、CloseHandle() 序列来检查枚举期间的有效性。

或者，如果您确实在使用 USB 到 UART 桥接器，如果您只想获取特定 VID 和 PID 的 COM 端口，则它可能存储在注册表中的设备特定键下。然而，这将取决于您的硬件供应商的驱动程序和枚举顺序。

# java - log4j 自定义附加程序不产生任何输出

> ID：11532232
> 
> 赞同：1
> 
> 时间：2012-07-17T23:22:43.863
> 
> 标签：java, logging, log4j, composition

我正在 log4j 中编写一个自定义附加程序，它使用组合来包装另一个附加程序（并通过自定义附加程序路由一些附加程序的功能）。基本上，代码看起来类似于：

```
public class CustomAppender extends AppenderSkeleton {
    private Appender target;

    @Override 
    public void activateOptions() {
        super.activateOptions();
        if (target == null) {
            errorHandler.error("Target is null");
        }
    }

    @Override 
    protected void append(LoggingEvent event) {
        if (target == null) {
            errorHandler.error("Target is null");
        } else {
            target.doAppend(this.processEvent(event));
        }
    }

    @Override 
    public void close() {
        if (target != null) target.close();
    }

    public Appender getTarget() {
        return target;
    }

    public void setTarget(Appender target) {
        this.target = target;
    }

    @Override 
    public boolean requiresLayout() {
        return target == null ? false : target.requiresLayout();
    }
} 
```

我尝试在 XML spring 配置中设置记录器，如下所示：

```
...
<prop key="log4j.appender.APPLICATION">CustomAppender</prop>
<prop key="log4j.appender.APPLICATION.Target">org.apache.log4j.DailyRollingFileAppender</prop>
<prop key="log4j.appender.APPLICATION.Target.DatePattern">...</prop>
... 
```

和 log4j的各种其他设置`DailyRollingFileAppender`不会产生任何输出。但是，如果我为`log4j.appender.APPLICATION`a创建类`DailyRollingFileAppender`并从每个键中删除关键字`Target.`，它就可以正常工作。

我的班级设置有问题吗？我对财产分配在这里的工作方式有误解吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:29:51.393

我意识到这个问题要深入得多，实际上与 log4j 的[PropertyConfigurator](http://www.docjar.org/html/api/org/apache/log4j/PropertyConfigurator.java.html)类有关。这就是字符串到类的所有实例化发生的地方，我似乎必须完全重写它，以获得更好的东西。

# php - .htaccess 重定向 url，带有 MVC 应用程序的控制器名称

> ID：11532235
> 
> 赞同：2
> 
> 时间：2012-07-17T23:23:00.440
> 
> 标签：php, .htaccess, mod-rewrite, url-rewriting

我正在尝试构建一个类似 mvc 的应用程序，但我无法找出我需要的正确 .htaccess。

我想要类似的东西：

```
RewriteRule ^(.*)/(.*)/(.*)$ $1.php?action=$2&n=$3 [L] 
```

所以我可以访问包含正确控制器和两个从 url 获取变量的文件。上面的代码不起作用，我已经在这个地方呆了 2 天了，我在任何地方都找不到我需要的东西。发生的情况是 url 需要 3 个变量才能工作，这不是我想要的. 建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:25:19.837

大多数框架使用[Front-Controller](http://en.wikipedia.org/wiki/Front_Controller_pattern)而不是`mod_rewrite`. 该控制器相应地拆分 URL 和*路由*。

虽然不是唯一的解决方案，但它更灵活。考虑您何时拥有 URL`plugin/controller/view/id`或`controller/view/param1/param2`.

如果您想采用 Front-Controller 架构，我建议您使用`FallbackResource`来保持您的**htaccess**文件修剪。

```
FallbackResource /front-controller.php 
```

从那里开始，用[`parse_url()`](http://php.net/parse_url).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:40:08.000

用这个：

```
RewriteRule ^([^\./]*)$ index.php?route=$1 [L,NC,QSA] 
```

然后

```
$route = explode('/', $_GET['route']);
$id = array_pop();
$controller = array_shift($route);
$method = implode('_', $route);

$controller = new $controller;
$controller->$method(); 
```

# ruby-on-rails - 用于 Rails 应用程序的富文本字段，例如 Basecamp

> ID：11532240
> 
> 赞同：1
> 
> 时间：2012-07-17T23:23:58.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, richtextbox, rich-text-editor

我们目前正在使用 ckeditor 在 Rails 应用程序中获取富文本字段。这不是很好，例如，如果您粘贴一些文本，您永远不知道保存后会发生什么。我希望拥有与 basecamp 相同的文本区域。任何想法或指示如何到达那里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T03:14:46.053

看看这个：[https](https://github.com/xing/wysihtml5) ://github.com/xing/wysihtml5 。文档说 Basecamp 正在使用它。

# iphone - 自定义对象的 Setter/Getter 不起作用

> ID：11532241
> 
> 赞同：0
> 
> 时间：2012-07-17T23:24:04.037
> 
> 标签：iphone, objective-c, ios, ipad, properties

我有以下自定义对象：

```
 @interface LoadDescription : NSObject
@property (nonatomic) float start, stop, startMagnitude, stopMagnitude;
@end 
```

我在我的一个控制器中将该对象作为属性：

```
 @property (nonatomic, strong) LoadDescription *editingLoad; 
```

但是当我尝试在editingLoad属性中设置/获取属性时......

```
 float tableValue = [textField.text floatValue]; 
NSLog(@"value in table is %f", tableValue);
self.editingLoad.startMagnitude = tableValue;
NSLog(@"Load magnitude is %i", (int)self.editingLoad.startMagnitude); 
```

...并运行 iOS，控制台输出显示虽然 tableValue 是我输入的任何内容，但 self.editingLoad.startMagnitude 始终为 0.00000000，这让我认为 setter/getter 有问题。

如果相关的话，我正在运行 ARC。

任何帮助表示赞赏，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:37:47.477

是否在属性分配之前分配和初始化了 editingLoad 对象？

如果不是，那可能是您的问题，否则如果您将类型转换为浮点数，则小于 1，我相信它将始终为零。我不知道您对“tableValue”的期望值是什么

当第二个日志打印出 float/double "%f" 时会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T05:28:02.830

在这里，您有以下问题之一：1）您没有在自定义类中定义 init 方法。2）您在“editingLoad”对象中获得 nil 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:18:17.660

确保你使用`@synthesize editingLoad;`了所有的 getter 和 setter 来为你生成。并且不要忘记在分配值之前分配/初始化您的自定义对象：

```
self.editingLoad = [[LoadDescription alloc] init];
self.editingLoad.startMagnitude = tableValue;
... 
```

# c++ - C++ 向量 push_back() 的详细信息

> ID：11532245
> 
> 赞同：7
> 
> 时间：2012-07-17T23:24:25.127
> 
> 标签：c++, vector

我正在尝试调试一个程序，这样做违背了我对 C++ 向量 push_back() 函数的理解。

为了说明我的观点，我编写了以下短程序：

```
#include <iostream>
#include <vector>
#include <cstdlib>

using std::cout;
using std::endl;
using std::vector;

class Test {
private:
  int mTestMember;
public:
  Test(int val);
  Test(const Test&);

  int GetValue() const;
};

Test::Test(int val)
{
  cout << "Constructor\n";
  mTestMember = val;
}

Test::Test(const Test& test)
{
  cout << "Copy Constructor\n";
  mTestMember = test.mTestMember;
  cout << "mTestMember: " << mTestMember << endl;
}

int main(){

  vector<Test> tests;
  tests.push_back(Test(int(5)));
  cout<< endl;
  tests.push_back(Test(int(6)));
  cout << endl;
  tests.push_back(Test(int(7)));

  return(0);
} 
```

如果我编译并运行，我会得到以下输出：

```
Constructor
Copy Constructor
mTestMember: 5

Constructor
Copy Constructor
mTestMember: 6
Copy Constructor
mTestMember: 5

Constructor
Copy Constructor
mTestMember: 7
Copy Constructor
mTestMember: 5
Copy Constructor
mTestMember: 6 
```

看起来，在 push_back() 函数的过程中，执行了作为参数传递给 push_back() 函数（我已经知道）的对象的副本，然后是其余元素存在于预先存在的也被复制到从前面开始的新向量中。

我对这个过程的理解是否正确？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T23:26:02.390

`std::vector`将其元素存储在数组中。数组总是有固定的大小，所以如果你不断地向 a 添加元素`std::vector`，它的底层数组最终会被填满。当数组已满并且您添加另一个元素（通过`push_back`或另一个添加新元素的成员函数）时，它必须：

1.  创建一个新的更大的数组，
2.  将旧数组中的元素复制或移动^((*))到新数组，
3.  将新元素插入到新数组中，然后
4.  销毁旧数组

这个过程称为*重新分配*。的正确实现`std::vector`应该以指数方式调整数组的大小。Visual C++`std::vector`实现使用 1.5 倍的增长因子；其他实现可能使用不同的增长因子。

* * *

^((*) C++11 增加了对*移动*对象的支持。)

# if-statement - 批处理文件以检测文件的存在（确定哪个操作系统并相应地卸载程序）

> ID：11532249
> 
> 赞同：0
> 
> 时间：2012-07-17T23:24:44.523
> 
> 标签：if-statement, batch-file

我试图找出我的批处理文件有什么问题，以确定文件夹是否存在，然后在该机器上为客户端运行正确的卸载。

如果机器是 x64，则客户端在一个文件夹中，如果是 x86，则在另一个文件夹中。我不能基于 cpu 架构或 winver，因为在我的环境中除了 32 位和 64 位 xp 之外，我还有 windows 7 32 位和 64 位。

我尝试了以下方法：

```
if exist C:\Windows\ccmsetup GOTO W64
else
C:\windows\system32\ccmsetup\ccmsetup.exe /uninstall
W64
C:\windows\ccmsetup\ccmsetup.exe /uninstall 
```

或者

```
IF EXIST C:\Windows\ccmsetup GOTO W64
W64
C:\windows\ccmsetup\ccmsetup.exe /uninstall
GOTO NEXT
IF EXIST C:\Windows\ system32\ccmsetup GOTO W32
W32
C:\windows\system32\ccmsetup\ccmsetup.exe /uninstall 
```

或者

```
IF EXIST C:\Windows\ccmsetup GOTO W64
IF NOT EXIST C:\Windows\ccmsetup GOTO W32
W32
C:\windows\system32\ccmsetup\ccmsetup.exe /uninstall
W64
C:\windows\ccmsetup\ccmsetup.exe /uninstall 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:24:41.963

这对你有用吗？

```
IF EXIST C:\Windows\ccmsetup\ccmsetup.exe GOTO W64
IF EXIST C:\windows\system32\ccmsetup\ccmsetup.exe GOTO W32
ECHO Nothing to uninstall
GOTO :EOF
:W32
C:\windows\system32\ccmsetup\ccmsetup.exe /uninstall
GOTO :EOF
:W64
C:\windows\ccmsetup\ccmsetup.exe /uninstall
GOTO :EOF 
```

# android - 使用 SyncAdapter 与 *local* gmail 和 facebook 应用程序数据同步

> ID：11532257
> 
> 赞同：9
> 
> 时间：2012-07-17T23:25:36.240
> 
> 标签：android, facebook, gmail, android-syncadapter

对于我需要开发的应用程序，我需要能够使用 SyncAdapter 与 gmail 和 facebook 数据同步。我希望与本地 facebook 和 gmail 应用程序（如果可用）而不是他们的远程服务器同步。与本地应用同步意味着更少的电池使用、更少的网络使用、更快的同步等。当然，如果需要，我会设置正确的权限。

**我的问题**：

*   如果有任何应用程序（gmail/facebook）可用，是否可以向它们查询数据（消息、事件等）？
*   如果没有，是否可以从他们那里获得身份验证令牌（或任何类型的凭据），这将允许我查询服务器而无需用户再次输入每个人的用户名和密码？
*   如果可能的话，是否也可以在 facebook 或 gmail 应用程序同步后立即自动同步，以便我尽快获得新数据？

如果这些都不可用，我想我需要自己获取数据，所以这与这个问题无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T06:47:18.620

我不能代表 Facebook，但 GMail 应用程序不允许这样做。它以前可以工作，但他们已经保护了它，以便只有 Google 应用程序可以查询电子邮件内容提供商。您能做的最好的事情是使用[标签 API](http://android-developers.blogspot.jp/2012/04/gmail-public-labels-api.html)获取消息的数量。您可以使用标准 Android 获取 Google 服务的身份验证令牌（ClientLogin 或 OAuth2）`AccountManager`。然后，您必须使用它连接到特定的 API 以获取实际数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T01:33:00.823

啊，现在我更好地理解了你的问题。我认为没有任何方法可以直接从应用程序的本地副本中获取您感兴趣的数据。这是一个有趣的想法，并且出于您建议的速度/空间/带宽原因是合理的，但需要当前不可用的应用程序的大力支持。

即使应用程序确实支持共享本地数据，试图避免用户重新输入密码也几乎肯定*是不可能的。*毕竟，GMail 应用程序将如何验证您的应用程序是否应该有权读取其所有数据？大概是通过提示您输入 GMail 用户名和密码。仅仅在同一个设备上绝对不意味着完全信任。

如示例项目中所示，使用 SyncAdapter 并存储身份验证令牌，您应该能够限制用户输入他们的凭据一次，但这是您能做的最好的事情。

* * *

**之前：**

您看过 SDK 中包含的 SampleSyncAdapter 吗？

[这些说明](http://developer.android.com/tools/samples/index.html)快速概述了如何访问示例。

如果您使用的是 Eclipse，那么它实际上比他们建议的更容易。获取示例项目：

1.  选择`File`> `New`>`Other...`
2.  选择`Android`>`Android Sample Project`
3.  选择适用于您的项目的目标/API 级别（可能是最新的）
4.  选择您感兴趣的示例项目，本例中为 SampleSyncAdapter

示例项目是如何使用 SyncAdapters 的一个很好的示例，并且应该很容易适应与 GMail、Facebook 等的连接。

# objective-c - Objective-C：从 NSMutableArray 中检索整数值

> ID：11532262
> 
> 赞同：0
> 
> 时间：2012-07-17T23:26:12.403
> 
> 标签：objective-c, xcode, methods, nsmutablearray, integer

嗨，我正在尝试从一个名为 programStack 的 NSMutableArray 中获取一个整数值，该数组包含所有数字。此方法是一种撤消方法，因此当我点击撤消时，它会擦除​​堆栈上的最后一项并返回上一个选项。当我尝试获取数字时，方法 undoVariable 在返回时具有正确的字符串值，但是在显示之后我得到错误的值。一个例子是在数组上有 2, 3。我擦除 3 并且字符串在 UndoVariable 中显示 2，然后当我使用 self.display.text 显示它时显示 1.57539e-302。这可能是指针地址吗？这是代码。

```
- (IBAction)undoPressed {

NSString* string = self.display.text;

if(userIsInTheMiddleOfEnteringANumber){
    if([self.display.text length])
        string = [string substringToIndex:([string length]-1)];

} else {
    string = [NSString stringWithFormat:@"%g",[self.brain undoVariable]];
    NSLog(@"string is %@", string);
}

    self.display.text = string;
}

-(NSString*) undoVariable{

if(self.programStack)
[self.programStack removeLastObject];
    if(self.programStack){
        NSString* string = @"";
        string = [string stringByAppendingString: [self.programStack lastObject]];
        NSLog(@"string = %@", string);
        NSLog(@"self.display.text = %@", [self.programStack lastObject]);
        return string;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:42:53.420

您的 %g 格式表示将给定值视为浮点数，但`undoVariable`表示它返回一个 NSString。如果你真的想格式化它，你需要 %@。但是，只使用字符串而不是重新格式化它要简单得多，例如：`string = [self.brain undoVariable];`.

# java - SOAP 附件和数据处理程序

> ID：11532263
> 
> 赞同：0
> 
> 时间：2012-07-17T23:26:14.107
> 
> 标签：java, soap, datahandler

如何检索 SOAP 附件？我正在做类似以下的事情：

```
Iterator<AttachmentPart> i = soapMessage.getAttachments();
while(i.hasNext())
{
    AttachmentPart obj = i.next();
    InputStream rawContent = obj.getRawContent();
} 
```

原始内容返回如下内容：

> ------=_Part_2980_1570690085.1342564119748
> 
> 内容类型：图片/png；名称=IMG_0583.png
> 
> 内容传输编码：BASE64
> 
> 内容处置：附件；文件名=IMG_0583.png
> 
> 内容 ID：1
> 
> 内容位置：IMG_0583.png
> 
> 内容长度：11210
> 
> **iVBORw0KGgoAAAANSUhEUgAAARMAAABfCAMAAAD8mtMpAAAC/VBMVEUBIrIZH6qfBSGwAyWSDiTE Aym9DifSCyysGCiQISvJES3eDDLMFinYGDDdFyzkGjbmGzGhMTePNjwsSa3JKDQYTukOZh3iKDKK**
> 
> ------=_Part_2980_1570690085.1342564119748--

如何检索上面以粗体突出显示的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:50:27.783

我认为您想使用该`getContent`方法而不是原始方法：

```
obj.getContent(); 
```

或者该`getBase64Content`方法也作为编码是base64

# sql - 按子查询结果分组

> ID：11532276
> 
> 赞同：1
> 
> 时间：2012-07-17T23:27:40.157
> 
> 标签：sql, tsql, sql-server-2005

我试图在我的 Group By 语句中使用子查询的结果，但发现这是不允许的。我认为使用 CTE 可以做到这一点，但我不确定。我正在为 SQL Server 2005 创建此 SQL 代码。我显然不是专家。这是我写的SQL语句...

```
select
  sum(paxon), 
  (select id from runs as RS where RS.code = RL.runsegment) as port_id,
  date
from
  runlogs as RL
where 
  date BETWEEN '07/09/2012' and '07/16/2012'     
  and account in ('311,312,313')
  and runsegment in (select code from runsegments where org_id = 13)
group by
  date,
  port_id 
```

当我尝试运行它时，我被告知 port_id 是一个无效的列名。我很确定这可以通过创建临时表或 CTE 或可能使用 JOIN 来实现，但我不知道该怎么做。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:41:31.977

这样的事情怎么样？除非我遗漏了什么，否则我认为不需要子查询。

```
SELECT SUM(rl.paxon)
    ,r.id AS port_id
    ,rl.[date]
FROM runlogs rl
    INNER JOIN runs r
        ON r.code = rl.runsegment
    INNER JOIN runsegments rs
        ON rs.code = rl.runsegment
WHERE rl.[date] BETWEEN '20120709' AND '20120716'  
    AND rl.account in ('311','312','313')
    AND rs.org_id = 13
GROUP BY rl.[date], r.id 
```

我不确定`account in ('311,312,313')`正在尝试做什么。在我的回答中，我假设这三个项目中的每一个实际上都是不同`account`的`nvarchar`值。如果是，那么该行应该是： 。`varchar``account``account``int``AND rl.account in (311,312,313)`

我还更改了您的日期以使用首选的[未分隔数字字符串](http://msdn.microsoft.com/en-us/library/ms191307%28SQL.90%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:32:10.690

一种选择如下

```
select sum(sum_paxon), date, port_id from
(
select paxon,

(select id from runs as RS where RS.code = RL.runsegment) as port_id,

date from runlogs as RL

where

date BETWEEN '07/09/2012' and '07/16/2012'

and account in ('311,312,313')

and runsegment in (select code from runsegments where org_id = 13)
 ) Z
group by date, port_id 
```

# c# - XNA 创建地形

> ID：11532280
> 
> 赞同：0
> 
> 时间：2012-07-17T23:28:09.400
> 
> 标签：c#, xna

我对 XNA 很陌生，对……大多数概念有点困惑。任何指向好的方向都会有所帮助！

我有一个行/列格式的数据结构。本质上，它们代表地形的高度值。如何绘制地形？（请注意，我不是从文件中读取此数据）

这是数据的示例表示。实际数据可以多达 100 行 x 1 百万列。

```
3 4 5 6 7 1
2 2 1 4 1 6 
4 5 7 9 0 0
5 3 3 4 5 6
1 2 1 4 1 1 
```

**编辑**：我可以创建一个 3D 纹理对象并用高度数据填充它并渲染它吗？我认为这比创建和网格化三角形更容易，对吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:28:58.423

我建议 Riemer 的教程——他们处理基于高度图的地形渲染。检查[http://riemers.net/](http://riemers.net/)。它们提供了一个良好的开端，一旦您将通过它们搜索四叉树地形渲染 - 这样做是为了优化渲染。

# javascript - 如何在 Chrome 中使用 WebCL？

> ID：11532281
> 
> 赞同：20
> 
> 时间：2012-07-17T23:28:13.043
> 
> 标签：javascript, google-chrome, google-chrome-extension, webcl

我是一名对 HPC 和并行编程感兴趣的年轻开发人员。

正如您在这里看到的那样，[http:](http://www.khronos.org/webcl) //www.khronos.org/webcl 已经“发布”（还没有，是一个工作草案），这个移植用于 OpenCL 的网络。我不知道从哪里开始，因为我看不到该怎么做，因为我想在 Chrome 上做，不幸的是，仍然没有像 Firefox 这样的实验性插件，我知道它会得益于 v8，性能更好。

好吧，没有人对此一无所知吗？我知道我应该使用 idl 文件，但实际上我不知道在哪里或做什么。

* * *

实际上，我认为我最近的问题首先是调试。Firebug 相比 chrome 的调试器是一种痛苦和困惑。Chrome 的 bug 更少，更轻巧，也可以为此提供更好的性能，正如我所说的，轻量级。

我们还应该看看 .idl 是如何为 Firefox 实现的，并对性能、两个引擎的资源处理方式进行一些比较。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2020-01-23T08:51:34.460

（2020 年 1 月）还有其他选项可以在 GPU 上进行 Web 计算：

**WebGL 计算着色器（旧但易于访问）**

[这](https://github.com/9ballsyndrome/WebGL_Compute_shader)很容易在 WebGL 上下文中设置。与 WebCL 相比，缺点很小：

*   WebCL 浮点精度保证更好（对于大多数用途，没关系）
*   WebCL 支持 WebGL Compute 不支持的随机写入，但对于大多数并行问题，这并不重要，因为您将只为当前操作的元素编写结果。
*   缓冲区数据以整数形式返回 CPU，但如果您以正确的方式表示您的值并在 GPU/CPU 上进行相应的编码/解码，则可以解决此问题。我通过在计算着色器中最终确定之前将浮点数乘以某个较大的值（如 1024）来做到这一点，并在 CPU 上获得整数后除以相同的值（请注意，使用 2 的幂意味着您可以非常快速地执行此整数除法通过做`value = buffer[n] >> 10`即1024 = 2 ^ 10）。我没有像某些科学/金融科技应用程序那样担心精度问题。

[您可以在此处](https://www.khronos.org/registry/webgl/specs/latest/2.0-compute/)找到最近更新的规范。

**WebGPU（新标准）**

[这](https://developers.google.com/web/updates/2019/08/get-started-with-gpu-compute-on-the-web)是正在实施的最新标准，也是 WebGL 1.0、2.0 和 WebCL 的后续版本。

`async`您可以直接从 JavaScript 访问 GPU 的计算能力，使用和处理 GPU 标注的延迟`await`。您将需要使用[WHLSL](https://webkit.org/blog/8482/web-high-level-shading-language/)（现为 WSL）编写着色器，这是一种新的高级着色器语言，它紧密基于 Direct3D HLSL。

它抽象了最新的低级 3D 图形 API，例如 Metal、Vulkan 和 Direct3D 12，从而与 Open/WebGL 相比减少了 GPU 开销。

**选择？**

*WebGL 计算着色器*适用于那些打算在 WebGL 渲染中使用计算结果的人，他们无论如何都在他们的应用程序中进行 WebGL 渲染，或者想要在 Web 上进行原型设计然后移植到原生 OpenGL。

*WebGPU*用于计划的跨浏览器，包括在 Apple 设备（其中 GL 长期以来一直得不到很好的支持）、新颖性和速度。也用于图形。

*WebCL*通过 Chrome / Chromium 的扩展，如果您最终希望有机会在 CPU 上运行代码，无需修改，也不需要 GPU 渲染。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-12T04:00:36.557

对于 Chrome 版本，三星（Google Code 上的那个）是正确的。它适用于 Safari：Safari 基于 WebKit，这也是 Chrome 所基于的。然而，使用 Chrome 的渲染器可能会很棘手，因为我相信它是在一个特殊的过程中。不过，我敢打赌 Chrome 开发人员很乐意为此提供帮助，并且我建议与 WebCL 项目成员核实是否有人已经开始关注这个问题。

在功能方面，三星的版本与诺基亚的版本有很大的实际区别：它支持将数据直接从 WebCL 移动到 WebGL。如果您想在不将所有数据从 GPU 中移出的情况下可视化计算（这会降低实时性能），这是一件大事。

祝你好运！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T00:20:51.757

您似乎期望将 Firefox WebCL 扩展端口移植到 Chrome 浏览器所带来的性能提升，我猜是不太可能的：虽然 V8 引擎确实比其他引擎更快地处理 javascript，但根据定义，WebCL 主要在GPU，因此代码的 javascript 组件很可能只占处理时间的一小部分。目前，如果您想尝试使用 WebCL，您将需要坚持使用 Firefox 扩展。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-16T00:05:09.187

带有 WebCL 的 Chrome 现已在 github [Chromium-WebCL](https://github.com/amd/Chromium-WebCL)上可用。源代码、构建指令和二进制文件（适用于 Windows）

# ember.js - 如何使用来自 store.commit() 的响应 json 更新 DS.Model？

> ID：11532282
> 
> 赞同：5
> 
> 时间：2012-07-17T23:28:13.213
> 
> 标签：ember.js, ember-data

给定模型：

```
Blog.Post = DS.Model.extend({
    title: DS.attr('string'),
    tags:  DS.hasMany('Blog.Tag', { embedded: true })
});

Blog.Tag = DS.Model.extend({
    foo: DS.attr('string'),
    bar: DS.attr('string')
}); 
```

和实例：

```
var myPost = Blog.Post.createRecord({ id: 45, title: 'Foo Bar' }) 
```

当我这样做时`myPost.store.commit()`（通过 ember-data 的 DS.RESTAdapter），我的服务器会返回一个自动生成的标签列表，这些标签应该应用于`myPost`. 示例响应 json：

```
{
  posts: [
    {
      id: 45,
      title: 'Foo Bar',
      tags: [
        { id: 1, foo: 'bar1' },
        { id: 2, foo: 'bar2' }
      ]
    }
  ]
} 
```

我希望这`myPost`会以json返回的两个标签结束，但我得到了这个错误：

```
Error: <DS.StateManager:ember448> could not respond to event invokeLifecycleCallbacks in state rootState.loaded.updated.uncommitted. 
```

我在这里做错了什么？

编辑：澄清 json 以包含每个@MikeAski 评论的 id。给出的示例是我实际案例的简化版本——实际案例确实包含标签 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T15:02:12.307

首先，您需要“镜像”模型之间的关系：

```
 Blog.Post = DS.Model.extend({
        title: DS.attr('string'),
        tags:  DS.hasMany('Blog.Tag', { embedded: always })
    });

    Blog.Tag = DS.Model.extend({
        foo: DS.attr('string'),
        bar: DS.attr('string'),
        post: DS.belongsTo('Blog.Post')
    }); 
```

然后您需要将映射添加到您的适配器：

```
Blog.RESTSerializer = DS.RESTSerializer.extend({
  init: function() {
    this._super();

    this.map('Blog.Post',{
      tag:{embedded:'always'},
    });
  }
}); 
```

并将 post_id 添加到 JSON 中的 Tag 中。

# ruby - 创建具有许多关联对象的对象

> ID：11532286
> 
> 赞同：0
> 
> 时间：2012-07-17T23:28:39.850
> 
> 标签：ruby, factory-bot

我在我的 rspec 测试中经常看到这种模式，我已经尝试了几次来清理它，但没有运气。当然，我有一家工厂，`blog`还有一家工厂`post`。博客 has_many 帖子。

我通常为此使用 FactoryGirl，工厂看起来像这样：

```
FactoryGirl.define :blog do |b|
  b.title "my blog"
end

FactoryGirl.define :post do |p|
  p.author "some dude"
  p.content
end 
```

这是我的 rspec 测试中的代码气味：

```
@blog = FactoryGirl.create(:blog)
5.times { FactoryGirl.create(:post, :blog => @blog) } 
```

似乎我应该能够定义一个完全水合的博客文章的新工厂：

```
FactoryGirl.define :blog_with_posts, :parent => :blog do |bwp|
   5.times { bwp.association(:post) }
end 
```

我一直无法找到真正有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:38:24.157

```
FactoryGirl.define do
  factory :post do
    author "dude"
    content { Faker::Lorem.paragraph }
    blog
  end

  factory :blog do
    title "title"
    factory :blog_with_posts do

      ignore do
        posts_count 5
      end

      after(:create) do |blog, evaluator|
        FactoryGirl.create_list(:post, evaluator.posts_count, blog: blog)
      end

    end
  end
end 
```

# avfoundation - AVCaptureVideoPreviewLayer 内容的边界/大小是多少？

> ID：11532293
> 
> 赞同：2
> 
> 时间：2012-07-17T23:29:59.387
> 
> 标签：avfoundation

我有一个 UIView，里面有两层。一种是带有 videoGravity == AVLayerVideoGravityResizeAspect 的 AVCaptureVideoPreviewLayer。另一个是对帧数据的分析。我想以我的分析层的矩形为基础，以适应预览层的内容。

有没有一种简单的方法来获取预览层中实际内容的大小？当我自己计算这个时，感觉就像我错过了一些东西。

我有一些屏幕截图展示了效果，但是太新了，无法在这里发布，如果他们可以帮助澄清我的问题，我会尝试将它们发布到其他地方。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-27T17:41:35.143

即使已经有几个月了，我仍然想回答这个问题，以防其他人有同样的问题。

看来您可以使用：

```
AVCaptureVideoPreviewLayer.Contents.Width
AVCaptureVideoPreviewLayer.Contents.Height 
```

尽管在捕获视频时我无法从中获取正确的内容。

相反，我会使用：

```
AVCaptureVideoPreviewLayer.Bounds 
```

或者

```
AVCaptureVideoPreviewLayer.BorderWidth 
AVCaptureVideoPreviewLayer.BorderHeight 
```

# winforms - WinForms - WebBrowser 控件是否依赖已安装的 Internet Explorer？

> ID：11532294
> 
> 赞同：1
> 
> 时间：2012-07-17T23:30:16.083
> 
> 标签：winforms, internet-explorer, webbrowser-control

我正在开发一个包含 WebBrowser 控件的小应用程序。

根据他安装的 Internet Explorer 版本，客户端计算机上的 HTML 页面是否可能与我的不同？

他在 Internet Explorer 中选择的 Internet 设置是否也会影响 WebBrowser？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T12:44:18.660

回答我自己的问题：

WebBrowser 控件*确实*依赖于客户端计算机上安装的 IE。但是，默认情况下，它会以 IE 7 的方式呈现 HTML 页面，即使您或您的客户拥有更新版本的 IE。这是为了最大限度地提高兼容性。因此，除非您或您的客户拥有 IE6/5.5，否则您是安全的。如果要针对更新版本的 IE，则需要设置注册表项。~~[请参阅此处](http://msdn.microsoft.com/en-en/library/cc817574.aspx "断开的链接")~~（最底部）、[此处](http://wiki.imacros.net/IE9_Nags#What_IE_compatibility_mode_does_the_webbrowser_control_use.3F)和[此处](http://blogs.msdn.com/b/ie/archive/2009/03/10/more-ie8-extensibility-improvements.aspx)的详细信息。

大多数但不是所有 IE 设置都会影响 WebBrowser 控件的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:03:54.993

> WebBrowser 控件是否依赖于已安装的 Internet Explorer？

是的

> 我的 HTML 页面在客户端机器上的外观是否与我的不同，这取决于他安装的 Internet Explorer 的版本？

是的

> 他在 Internet Explorer 中选择的 Internet 设置是否也会影响 WebBrowser？

又是的；）

# c# - RadioButtonList 控件的 SelectedValue 通过 C# ASP .NET 4.0 中的 WebBrowser 控件

> ID：11532297
> 
> 赞同：0
> 
> 时间：2012-07-17T23:30:28.377
> 
> 标签：c#, asp.net, browser, automated-tests, radiobuttonlist

我正在尝试通过 WebBrowser 控件进行非常简单的自动化测试。有两个方面：具有不可触及代码的应用程序端和测试端，我正在生成它以进行点击自动化。

问题是单选按钮是在我试图测试的网页控件后面的代码中创建的 - 它们是 RadioButtonList 控件的一部分（使用 RBL.Items.Insert..）最重要的是，RadioButtonList 有获取 SelectedValue 的事件处理程序 OnSelectedIndexChanged。
我可以通过 WebBrowser 控件找到代码隐藏生成的单选按钮并设置以下内容：

```
HtmlElement subjectRadioButton = browser.Document.GetElementById("...");
if (subjectRadioButton != null)
{
    subjectRadioButton.InvokeMember("click");
} 
```

调试器显示我正在输入代码。此外，如果您不执行任何其他操作，您可以目视检查项目。另一方面，我正在测试的页面，但是，一旦发生回发，它就会进入事件处理程序。事件处理程序具有以下破坏代码：

```
int.Parse(rblSubject.SelectedValue); 
```

rblSubject.SelectedValue 是空字符串，并且永远不会填充，无论我如何尝试调用 subjectRadioButton，它是 RadioButtonList 的一部分。我什至通过javascript尝试并确认checked=true。我认为这与单选按钮本身不与 RadioButtonList 同步有关，因为它是在后面的代码中动态创建的。更奇怪的是，全手动测试工作正常。它只是在做自动化的失败。我还注意到，如果我只是设置 InvokeMember("click")，则不会出现错误（不会发生回发）。它看起来确实检查过。然后当我在页面上的链接或按钮上执行 InvokeMember("click") 时，会发生回发，事件处理程序会触发并且我收到解析错误。提前非常感谢。

这是我正在测试的应用程序端的代码——我无法修改的代码，它初始化了 RadioButtonList rblSubject。

```
rblSubject.Items.Clear();
ListItem item;
if (obj <= 0)
{
    item = new ListItem(GetObject("BillingIssue").ToString(), ((int)SubjectTypeEnum.BillingQuestion).ToString());
    rblSubject.Items.Insert(0, item);
    item = new ListItem(GetObject("ChangeNote").ToString(), ((int)SubjectTypeEnum.ChangeOfInformation).ToString());
    rblSubject.Items.Insert(1, item);
    item = new ListItem(GetObject("OtherAdmin").ToString(), ((int)SubjectTypeEnum.AdminNote).ToString());
    rblSubject.Items.Insert(2, item);
} 
```

# c#-4.0 - c# 是否有必要新建对象

> ID：11532298
> 
> 赞同：1
> 
> 时间：2012-07-17T23:30:37.657
> 
> 标签：c#-4.0

设想：

假设我有一个 Person 类。我在 Helper 类之一上也有 GetPersonDetail 函数。

那么是否有必要新建 Person 类，或者可以按照以下方式进行操作。

```
Person person=null;

person= Helper.GetPersonDetail();

OR

Person person = new Person();
person=Helper.GetPersonDetail(); 
```

两者似乎都有效，只是想知道上面的选项是否有任何意想不到的后果。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:36:19.253

在从方法中获取它之前，您不应该创建一个新对象。你创建的对象只是在你把方法的结果赋值给变量的时候就被扔掉了，所以先创建一个对象只是浪费。

通常，徒劳地创建一个实例不会发生任何有害的事情，但如果它需要在被删除之前进行一些清理（例如处置），那么该实例就不会发生这种情况。

# c# - 如何从文本框中打印预览我的僧伽罗语文本？

> ID：11532300
> 
> 赞同：-1
> 
> 时间：2012-07-17T23:31:06.340
> 
> 标签：c#

我想从文本框中显示我的僧伽罗语文本的打印预览。在这里我使用了打印预览对话框

```
 private void printDocument2_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs ev)
    {
        string strText = this.textBox1.Text; // read string from editor window
        StreamReader myReader = new StreamReader(strText, System.Text.Encoding.ASCII, false);
        int charactersOnPage = 5;
        float linesPerPage = 0;
        float yPosition = 0;
        int count = 0;
        float leftMargin = ev.MarginBounds.Left;
        float topMargin = ev.MarginBounds.Top;
        string line = null;
        Font printFont = this.textBox1.Font;
        SolidBrush myBrush = new SolidBrush(Color.Black);
        // Work out the number of lines per page, using the MarginBounds.
        linesPerPage = ev.MarginBounds.Height / printFont.GetHeight(ev.Graphics);
        // Iterate over the string using the StringReader, printing each line.
        while (count < linesPerPage && ((line = myReader.ReadLine()) != null))
        {
            // calculate the next line position based on the height of the font according to the printing device
            yPosition = topMargin + (count * printFont.GetHeight(ev.Graphics));
            // draw the next line in the rich edit control
            ev.Graphics.DrawString(line, printFont, myBrush, leftMargin, yPosition, new StringFormat());
            count++;
        }
        // If there are more lines, print another page.
        if (line != null)
            ev.HasMorePages = true;
        else
            ev.HasMorePages = false;
        myBrush.Dispose();
    } 
```

这可行，但我的文字是“අම්මා”，但它以这种方式显示අ්මමා“所以请帮助我以正确的方式显示。

我想打印 TextBox 的内容，所以我试图从 TextBox 中制作一个 PrintDocument。但我找不到将简单的 TextBox 转换为 PrintDocument 的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:33:34.527

基于这一大堆代码，我最好的猜测是在流读取器（可能还有其他使用编码的对象）上指定[编码](http://msdn.microsoft.com/en-us/library/ms143456)。

但是，严肃地说，你应该清理你的代码并制作一个更小、更易于理解的示例来重现/演示你的问题。此外，命名为`linkLabel6`、`printDialog1`、或的变量也无济于事。`printDocument2``linkLabel7``textBox1`

# jquery - 在 jQuery mobile 中，如何保留动态带入 DOM 的表单选择？

> ID：11532302
> 
> 赞同：0
> 
> 时间：2012-07-17T23:31:22.937
> 
> 标签：jquery, json, forms, selection, preserve

我正在使用 jquery mobile 的“导航”工具栏来加载不同的选项卡内容。选项卡内容由通过 ajax 引入的 JSON 数据组成。

我能够执行以下过程：在单击某个导航元素时，提取 json 数据并操作 DOM 并在 jquery mobile 中增强它。但是，从随后的导航单击中，不会保留表单选择。我不想保留数据库或 cookie 中的选择，因为它们不在应用程序规范中。所以这让我在客户端缓存一个变量。

任何想法/建议/建议表示赞赏！

# django - Heroku - 没有名为 wsgi 的模块

> ID：11532303
> 
> 赞同：24
> 
> 时间：2012-07-17T23:31:27.260
> 
> 标签：django, heroku, gunicorn

我按照 Heroku 支持中心上的 Django 入门指南进行操作，但是当我尝试在 Heroku 或工头上启动它时出现以下错误：

```
ImportError: No module named wsgi 
```

这是我的过程文件：

```
web: gunicorn testproject.wsgi -b 0.0.0.0:$PORT 
```

这是我的 django 项目设置文件：

```
from datetime import date, timedelta
import os
oneyr = date.today() + timedelta(days=365)
PROJECT_DIR = os.path.dirname(__file__)

DEBUG = os.environ.get('DEBUG')
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

MANAGERS = ADMINS

TIME_ZONE = 'Europe/London'
LANGUAGE_CODE = 'en-gb'
USE_I18N = False
USE_L10N = True

MEDIA_ROOT = os.path.join(PROJECT_DIR, 'static/')
MEDIA_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(PROJECT_DIR, 'static/'),
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)

ROOT_URLCONF = 'testproject.urls'

TEMPLATE_DIRS = (
    os.path.join(PROJECT_DIR, 'templates')
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'gunicorn',
    'storages',
)

STATICFILES_STORAGE = 'storages.backends.s3boto.S3BotoStorage' 
```

有谁知道为什么这个应用程序无法启动？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-25T08:47:55.637

这是一个老问题，但我仍然在回应它，因为我最近遇到了这个确切的问题，而[Intenex](https://stackoverflow.com/users/674794/intenex)的回答虽然有帮助，但无法解决我的问题。

[正如Intenex](https://stackoverflow.com/users/674794/intenex)所指出的，您可能缺少该`wsgi.py`文件。这可能是因为您使用 Django 1.3 或以前的版本创建了项目。使用 Django 1.4 创建项目会自动创建`wsgi.py`类似`manage.py`, `settings.py`.

与[Intenex](https://stackoverflow.com/users/674794/intenex)指出的不同，这是您应该做的。假设您使用的是 Django 1.3 或更早版本，`wsgi.py`请在项目目录（与`manage.py`etc. 相同的目录）中创建文件并将以下内容添加到您的`wsgi.py`文件中：

```
import os
os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

# This application object is used by the development server
# as well as any WSGI server configured to use this file.
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

请注意最后两条语句与 Intenex 的答案的区别。

有了这个，你应该能够`foreman start`在你的 Procfile 中运行以下内容：

`web: gunicorn mysite.wsgi`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T05:16:38.453

看起来您的项目目录中没有 wsgi.py 模块文件。如果您使用 Django 1.3 或更早版本启动项目（使用 django-admin.py startproject 项目），则不会自动创建 wsgi 文件。您需要按照本指南自己创建它：

[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/)

根据指南，将其放入文件中，确保将“mysite”更改为您的项目名称：

```
import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "mysite.settings")

# This application object is used by the development server
# as well as any WSGI server configured to use this file.
from django.core.wsgi import get_wsgi_application
application = get_wsgi_application() 
```

此外，由于我没有在您的设置中看到这一点，您需要确保您的项目目录包含在您的 Python 路径中，按照此处的最后一句：[https ://docs.djangoproject.com/en/dev/如何/部署/wsgi/gunicorn/#running-django-in-gunicorn-as-a-generic-wsgi-application](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/#running-django-in-gunicorn-as-a-generic-wsgi-application)

否则你会遇到和我一样的问题： [Python app import error in Django with WSGI gunicorn](https://stackoverflow.com/questions/11660627/python-app-import-error-in-django-with-wsgi-gunicorn)

在那之后，一切都应该顺利进行。干杯!

旁注：您可能已经能够通过将 Procfile 更改为：

```
web: python manage.py run_gunicorn 
```

根据[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/#using-gunicorn-s-django-integration](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/gunicorn/#using-gunicorn-s-django-integration)，但我自己没有测试过，所以不确定。可能仍然需要 wsgi.py 模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T01:56:43.843

刚遇到这个问题；我突然想到我的 Procfile 有 Windows 格式 EOL 编码；切换到 UNIX EOL - 瞧，工作了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-10T18:23:25.123

刚刚遇到这个错误和上面的问题。

发现设置文件在`ALLOWED_HOSTS`. 上面的描述帮助我指出了那个方向（至少看看设置）。

认为它可能会帮助其他人...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-01T00:33:56.497

我也有这个错误，其他解决方案没有解决它。我的问题的根源是我通过 apt-get 安装了 gunicorn。为了解决，我通过 apt 删除 gunicorn 并运行`pip install gunicorn`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-20T22:10:06.127

我遇到了这个错误，因为我手动将我的项目文件夹从`myproject`to重命名`myproject_django`，但我没有修复设置文件中的所有引用。尤其是，

```
WSGI_APPLICATION = 'myproject.wsgi.application' 
```

需要改为

```
WSGI_APPLICATION = 'myproject_django.wsgi.application' 
```

同样，该文件中有一些引用需要更改。只需进行搜索并仔细地逐一替换即可。

# iphone - 使用对象作为 NSDictionary 的键

> ID：11532306
> 
> 赞同：14
> 
> 时间：2012-07-17T23:31:51.323
> 
> 标签：iphone, objective-c, ios

我有一堆`Lesson`s，而且课程效果很好。有一个视图控制器可以处理这些课程。这个控制器需要知道 a 的上传状态，`lesson`所以我们有一个 NSDictionary，它带有`Lesson`as 键和一个`NSNumber`上传状态的百分比。

这是一个问题，因为在您插入 a 之后，`Lesson`您希望稍后对其进行查找`Lesson`（可能在 中`cellForRowAtIndexPath:`）以获取进度。这不起作用，因为键是在 NSDictionary 中复制的。

使用以下方式保存和获取密钥是否是一种好方法：

```
NSNumber *key = [NSNumber numberWithUnsignedInt:[obj hash]];
[dict setObject:@"... upload progress" forKey:key]; 
```

还是有更好的方法？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-17T23:55:42.193

我过去多次使用过这种技术，并且通过将键对象包装到 NSValue 中取得了巨大的成功：

```
NSValue *myKey = [NSValue valueWithNonretainedObject:anInstance];
id anItem =[myDict objectForKey:myKey]; 
```

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html#//apple_ref/occ/clm/NSValue/valueWithNonretainedObject](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsvalue_Class/Reference/Reference.html#//apple_ref/occ/clm/NSValue/valueWithNonretainedObject)：

（请原谅格式化；我在 iPhone 上。稍后我会格式化 :-)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T23:49:06.650

完全脱离句子：“这不起作用，因为键是在 NSDictionary 中复制的。” 您是否尝试过在您的课程中实施`-isEqual:`和？`-hash`我敢打赌，如果您用于查找的课程和字典中作为键的复制课程在比较时进行评估`-isEqual:`，`YES`那么您会没事的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-11T08:15:41.210

```
UIView *view = [[UIView alloc] init];           
NSMapTable *dict = [NSMapTable weakToStrongObjectsMapTable];
[dict setObject:[NSNumber numberWithInt:1234] forKey:view];
NSNumber *x = [table objectForKey:view]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T23:55:38.910

假设课程有一个唯一的编号（或标识符），则将其作为关键。使用 NSMutableDictionary，您可以稍后更新字典，但写入一个具有更高值（随着 Lession 更新）但具有相同键的新数字。

# c++ - Winsock send() 总是在服务器中返回错误 10057

> ID：11532311
> 
> 赞同：3
> 
> 时间：2012-07-17T23:32:32.283
> 
> 标签：c++, visual-studio-2010, sockets, winsock, winsock2

我正在尝试在连接时自动向客户端发出服务器请求，但我不断收到 10057 的 WSAGetLastError。我已经设置了从客户端到服务器的请求而没有问题，所以我不明白为什么我不能做相反的事情？也许服务器必须等待客户端的第一次“发送”，但我不明白为什么会这样？

> 我正在使用：
> -asynchronous socket -TCP
> -s
> 是一个有效的套接字
> -i'v 循环 RequestInfo 几次，但没有任何变化-select
> () 返回 0
> -datasize 返回 -1，错误码为 10057

谢谢你 ！！！

**服务器：**

```
//first - following the debugger  
FD_ACCEPT  
int acc = accept(s, (struct sockaddr*)&fromm, &fromlenn);  //success
if(acc <= 0)  
{  
    eLOGG << "\nFAIL FD_ACCEPT: " << WSAGetLastError();  
}  
RequestInfo();   

//then
RequestInfo()
{
    stringstream ssConverter;
    ssConverter.clear();    ssConverter.str(string());
    ssConverter << "00aa";      //request signal

    bool blogin = false;

    eLOG << "signal is: *" << ssConverter.str() << "*";

    int bufSize = ssConverter.str().length();

    fd_set writefds;

    struct timeval timeout;
    timeout.tv_sec = 3;
    timeout.tv_usec = 0;

    FD_ZERO(&writefds);
    FD_SET(s, &writefds);

    int sel = select(s, NULL, &writefds, NULL, &timeout);
    if(sel == SOCKET_ERROR) 
    {
        eLOG << "\nselect - read fail: " << WSAGetLastError();
    }
    if(sel == 0)
    {
        eLOG << "\nselect - not connected: " << WSAGetLastError();
    }

    if (FD_ISSET(s, &writefds))
    {
        eLOG << "\n FD_ISSET";
    }
    eLOG << "\nauth socket is: " << s;
    int dataSize = send(s, ssConverter.str().c_str(), bufSize, 0);
    if(dataSize < bufSize)  
    {
        eLOG << "\n FD_ISSET";
    }
    //...etc
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T23:43:25.670

您正在混淆侦听*服务器套接字* `s`和从变量中获得的已*连接套接字。*您无法通过服务器套接字发送或接收数据，因为它没有连接到任何东西。它的唯一目的是接受来自客户端的新连接。毕竟，服务器通常处理多个客户端。`accept()``acc`

顺便说一句，该连接的套接字不会从服务器套接字继承非阻塞状态，因此您需要在每个`accept()`.

# c# - Asp.Net - SqlConnection failed from dll

> ID：11532316
> 
> 赞同：0
> 
> 时间：2012-07-17T23:33:44.563
> 
> 标签：c#, asp.net, sqlconnection

I've already seen some similar question but none of them has received a valid solution.

I've an asp.net web site which reference a dll with some method in order to execute a simple operation on database (CRUD operations). When I need to do some "select * from" I call a method of dll passing it the connection string, but any operation fails with error message like this: System.Data.SqlClient.SqlException: Login failed for user 'DOMAIN\MACHINENAME$'.

It's imposibile whereas my connection is right (user id=sa; password=password) and it is the same connection stirng that I use for all my web site. Idon't use integrated security=true, I'm just using sa account with password.

THE ONLY different between all my web site and this project is just that CRUD operation come from different assembly (my dll).

The code is very simple:

```
// Asp.Net Button Click
MyDll.MyClass DbClass = new MyDll.MyClass();
DbClass.ConnectionString = "Data Source=Source;Integrated Security=false;initial Catalog=NorthWind;user id=sa;password=password;Persist Security Info=true";
DbClass.ExecuteQuery(select * from tableName);
// ExecuteQuery method do other stuff as SqlDataAdapter sda = new....sda.Fill(myDataset).. 
```

..Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:43:58.310

The error message states that you are trying to use Integrated Security and is using your domain account to make a connection with sql server

But your connection string is correct and it might be possible that the dll have its connectionstring that overwrites your given connectionstring

# php - 找出传递给函数的参数

> ID：11532320
> 
> 赞同：1
> 
> 时间：2012-07-17T23:34:03.583
> 
> 标签：php, debugging

我试图找出传递给函数的参数的名称。

为此，我使用 debug_backtrace() 来获取调用该函数的文件和行。

然后打开文件，逐行读取，直到出现我要查找的行。

```
$file = fopen($caller['file'], 'r' );
$line = 0;
while(($row = fgets($file)) !== false){
  $line++; 
  if($line == $caller['line']) break;
}      

fclose($file);

// $row is my line 
```

所以现在我有这样一行：

`my_function ($var1, some_other_function($othervar1, $othervar2));`

我怎样才能从中提取论点？我想得到一个像这样的数组：

```
array('$var1', 'some_other_function($othervar1, $othervar2)'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:43:44.603

这是一个复杂的问题。即使在您的示例中，函数的第二个参数也没有名称，因为它是调用另一个函数的返回值。

您可能会幸运地使用[token_get_all()](http://php.net/token_get_all)为您标记代码，然后您可以遍历结果并尝试获得所需的内容。

```
$tokens = token_get_all('<?php my_function($var1, some_other_function($othervar1, $othervar2)); ?>');

print_r($tokens); 
```

产量：

```
Array
(
    [0] => Array
        (
            [0] => 372
            [1] => <?php 
            [2] => 1
        )

    [1] => Array
        (
            [0] => 307
            [1] => my_function
            [2] => 1
        )

    [2] => (
    [3] => Array
        (
            [0] => 309
            [1] => $var1
            [2] => 1
        )

    [4] => ,
    [5] => Array
        (
            [0] => 375
            [1] =>  
            [2] => 1
        )

    [6] => Array
        (
            [0] => 307
            [1] => some_other_function
            [2] => 1
        )

    [7] => (
    [8] => Array
        (
            [0] => 309
            [1] => $othervar1
            [2] => 1
        )

    [9] => ,
    [10] => Array
        (
            [0] => 375
            [1] =>  
            [2] => 1
        )

    [11] => Array
        (
            [0] => 309
            [1] => $othervar2
            [2] => 1
        )

    [12] => )
    [13] => )
    [14] => ;
    [15] => Array
        (
            [0] => 375
            [1] =>  
            [2] => 1
        )

    [16] => Array
        (
            [0] => 374
            [1] => ?>
            [2] => 1
        )

) 
```

使用[解析器标记列表，](http://www.php.net/manual/en/tokens.php)您可以遍历该数组并找出传递给函数的参数是什么。即便如此，它也可能过于笼统，因为您的调用`my_function`只是`T_STRING`Zend 引擎最终在函数表中查找并调用该函数（如果它存在），或者如果它不存在则抛出一个致命错误的一个标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:39:21.970

我认为您正在寻找 get_func_args：[http ://php.net/manual/en/function.func-get-args.php](http://php.net/manual/en/function.func-get-args.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:39:38.293

看看`func_get_args`。您可以使用它来获取传递给函数的所有值的数组，如下所示：

```
<?php

$args = func_get_args();
var_export($args);

?> 
```

您*无法*检索函数在 PHP 中接受的值的名称。

这背后的原因很简单，您永远不会重新排列输入变量的顺序。想想这个：

```
function foo($var1, $var2, $var3) { 
```

你将你想要的东西`$var1`作为参数 1 传递。你永远不会`$var1`在参数 2 或 3 中传递你想要的东西。

为什么不将函数参数记录在函数本身中？

```
function foo($one, $two) {
    echo '$one: '. $one "\n";
    echo '$two: '. $two "\n";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T23:44:31.170

你可以做：

```
function my_func ($var, $callback) {
   $args = func_get_args();
   call_user_func($callback);
   ...
} 
```

和：

```
my_func('value1', 'some_other_function'); 
```

然后：

$args 将是 ('value', 'some_other_function');

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-17T23:46:34.247

从文件中读取特定行的最简单方法是使用 读取它`file`，但这可能会导致一些性能开销，因为它会一次读取整个文件：

```
function func ($arg1, $arg2) 
{
  list($caller) = debug_backtrace (); 
  $file_lines   = file ($caller['file']);

  echo "function called as: " . $file_lines[$caller['line'] - 1]; 
}

$a = $b = 0;

func ($a,$b); 
```

```
function called as: func ($a,$b); 
```

* * *

但是，做你正在做的事情有一些问题，因为你假设调用发生的地方的内容只跨越一行。如果您对函数有很多参数，则可以将其拆分为几行，如下面的代码片段所示，在这种情况下，您的函数将无法正常运行。

```
func (
  $a, $b,
  $c, $d
); 
```

^(您的函数打印的内容将仅包含`);`)

* * *

*待编辑的完整示例将“始终”工作*

# actionscript-3 - ActionScript 3 文本错误

> ID：11532323
> 
> 赞同：0
> 
> 时间：2012-07-17T23:34:13.473
> 
> 标签：actionscript-3, flash, text, actionscript

我不确定为什么会产生这个错误，因为它在幻灯片 5 之前完美运行。

```
TypeError: Error #2007: Parameter text must be non-null.
    at flash.text::TextField/set text()
    at rlo_fla::Question_15/updateTextFunction()[rlo_fla.Question_15::frame1:17]
    at Main/frame6()[Main::frame6:31]
    at flash.display::MovieClip/gotoAndStop()
    at Main/Answer()[Main::frame5:44]

TypeError: Error #1009: Cannot access a property or method of a null object reference.
    at Main/clickInfoLoopFunction()[/Users/Kristian/Dropbox/University of Westminster/RLO/Project/Main.as:238] 
```

.fla 和 .as 在我的 git 上可用：[https ://github.com/EpicKris/rlo](https://github.com/EpicKris/rlo)

抱歉，我无法提供更多见解，我只是非常不确定问题的性质。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:02:45.060

In the function clickInfoLoopFunction(), you call:

```
infoMC.updateTextFunction(textO['Topic ' + currentTopicI + ' Slide ' + currentSlideI + ' Info']); 
```

The problem is that the value of either currentTopicI or currentSlideI became something unexpected, and tried to access a property that doesn't exist in textO. If you run into this error again, trace the output of currentTopicI and currentSlideI right before this line. Then you'll figure out that, for example, the program was trying to call textO['Topic928Slide-5Info']. Of course, after that you'll have to figure out *why* those values changed unexpectedly, but this is a start.

**EDIT** : There are two main problems

1) You have a number of MovieClips in the FLA with functions in them to update text in a TextField. Right now they try to set the text even if the parameter is null. So prevent that by wrapping the text-setting lines with:

```
if (theParameter != null) { } 
```

2) In Main.as, in the function clickInfoLoopFunction(), infoMC.updateTextFunction(textO['... gets called, but sometimes infoMC itself is null, so only call this function when infoMC exists:

```
if (infoMC) infoMC.updateTextFunction(textO['Topic ' + currentTopicI + ' Slide ' + currentSlideI + ' Info']); 
```

# return - 返回一个 PHP 回显函数

> ID：11532329
> 
> 赞同：0
> 
> 时间：2012-07-17T23:35:20.003
> 
> 标签：return, echo

我正在尝试返回一个本质上是回声的函数。除了在每行前面添加“$output = ...”并返回 $output 或使用像 ob_clean() 这样的输出缓冲区之外，还有其他方法可以使这个函数能够被返回而不是回显吗？这是在 WordPress 中，那么是否有任何 WP 过滤器或操作可以使其工作？

这是函数类型的示例（更长）。

```
<?php function app($args = '') { ?>

    <script type="text/javascript">
        $(document).ready(function() {
            //do some stuff
        });
    </script>

    <div><?php echo $args ?></div>

<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T05:15:51.883

通过为所有内容创建一个类来解决。

# web-services - 哪些语言/工具支持 WSDL 1.1？

> ID：11532330
> 
> 赞同：0
> 
> 时间：2012-07-17T23:35:31.127
> 
> 标签：web-services, wsdl

我正在使用 WCF 开发一个 Web 服务，该服务旨在暴露给多个第三方系统，可能会使用一系列不同的技术。

假设我已经向他们提供了一个指向有效 WSDL 1.1 文件的 URL，那么我可以合理地期望使用什么工具让第三方开发人员能够简单地下载 WSDL、生成他的代码和配置并让它“正常工作”还是不修改？

我做了一些谷歌搜索，但我找不到一个明确的列表。

基本上，我想根据他们使用的技术来衡量我应该提供多少支持来帮助第三方系统与我的 Web 服务集成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:44:01.260

几乎所有主流语言都支持 WSDL 1.1，它是最流行的 WSDL 规范。

与您的服务的“开箱即用”兼容性更多地取决于您的数据类型（简单与结构、集合、映射）的复杂性，以及您是否使用任何其他 Web 服务工件（安全性、事务等）。

SOAP Web 服务是相当主流的，并且有广泛的经验支持它们。

加快消费者采用的一种方法（如果这是一个目标）是创建一个他们可以包含的库，该库已经通过了接口过程并且您已经过测试可以工作。例如，如果您要创建一个 Java 客户端，您可以提供一个 jar，该 jar 已经包含 wsimport 生成的工件，因此您的用户只需添加他们的 jar 并调用您的服务层，而不是直接调用 Web 服务。

# mysql - 将 PHP 条件语句转换为 MySQL if-then 条件语句

> ID：11532331
> 
> 赞同：0
> 
> 时间：2012-07-17T23:35:31.840
> 
> 标签：mysql, if-statement, conditional-statements

我需要将此 PHP 代码转换为等效的 MySQL 查询

```
$name = 'John Doe';
if($citizenship == 'o') {
  if($country == 'US') {
    $status = 'US-INTL';
  }else{
    $status = 'INTL';
  }
} elseif {
  $status = 'US'
} 
```

我在 MySQL 的 if-then 语句上遇到了问题，即使在阅读了他们非常少的[文档](http://dev.mysql.com/doc/refman/5.5/en/if-statement.html)之后也是如此。我尝试了不同的嵌套技术，但它们都失败了，因为我不知道语法。例如：

```
SELECT name, IF citizenship='US' THEN 
  IF country='US' THEN 'US-INTL' AS status
  ELSEIF 'INTL' AS status
ELSE 
  'US' AS status
END IF
FROM people 
```

MySQL 应该返回类似

```
_________________
name     | status
-----------------
John Doe | US-INTL
----------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:40:10.583

```
SELECT name,
       CASE WHEN citizenship = 'US'
            THEN CASE WHEN country='US'
                      THEN 'US-INTL'
                      ELSE 'INTL'
                 END
            ELSE 'US'
       END status 
```

或特定于mysql的方式：

```
SELECT name,
       IF(citizenship = 'US',
          IF(country='US', 'US-INTL', 'INTL'),
          'US') status 
```

# php - 使用 PHP 按周分组和显示 MySQL 条目

> ID：11532332
> 
> 赞同：0
> 
> 时间：2012-07-17T23:35:37.133
> 
> 标签：php, mysql

我想按月份和年份分组显示它们，如下所示：

```
<p>
    <div>August 2009</div>
     <div class="fav">title 1</div>
     <div class="fav">title 5</div>
     <div class="fav">title 6</div> 
    etc...
</p>

 <p>
    <div>July 2009</div>
     <div class="fav">title 3</div>
     <div class="fav">title 8</div>
     <div class="fav">title 9</div> 
    etc...
</p> 
```

这是我的查询...

```
 $fav = mysql_query("SELECT * FROM links WHERE user_id='{$row['id']}' GROUP BY post_id ORDER BY id DESC");
    $TMPL = array (); $skin = new skin('mylinks/my'); $profile = '';

    while($myfav = mysql_fetch_array($fav))
    {
        $favs = mysql_query("SELECT * FROM imdb WHERE id='{$myfav['post_id']}' LIMIT 100");
            while($myfavs = mysql_fetch_array($favs))
            {   
                $TMPL['profiles'] = '<div class="fav"><a href="/movie/'.$myfavs['id'].'"><img src="/'.$myfavs['poster'].'" title="Posted '.$myfavs['date'].'" /></a></div>';
                $profile .= $skin->make();
                }           
            } 
```

我将如何对它们进行分组，然后循环显示如上？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T12:58:44.260

如果我没看错，您可以合并这两个选择并告诉 SQL 让您知道它们属于哪个组。

```
SELECT *, YEAR(`date`) AS dy, MONTH(`date`) AS dm
FROM links
LEFT JOIN imdb WHERE imdb.id = links.post_id
WHERE links.user_id='{$row['id']}'
GROUP BY links.post_id
ORDER BY links.id DESC 
```

之后，您可以构建自己的条目组。

```
$entries = array();

while($entry = mysql_fetch_array($result))
{   
    $entries[$entry['dy']][$entry['dm']] = $entry;
} 
```

这应该给你一个条目的三维数组，按年和月分组。之后，您只需遍历`$entries`并显示分组的数据。

如果你想要别的东西，请告诉我。

# c# - Visual Studio 文件解析器

> ID：11532334
> 
> 赞同：0
> 
> 时间：2012-07-17T23:35:56.330
> 
> 标签：c#, visual-studio-2010

我正在尝试找到一种方法来编写视觉工作室“东西”，或者使用那里的工具，它允许我解析每一行，以便我可以在其他代码周围添加自定义代码，我将使用我自己的算法进行检查。

基本上，我想从 Visual Studio 代码编辑器中获取当前文件的读取文本，然后用我修改后的代码将其替换为新版本。

看着 resharper，宏，想不出办法做到这一点，我不想从文件中复制所有代码，将其粘贴到我要编写的 Windows 应用程序表单中，然后复制粘贴回来。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:44:15.523

我建议使用[Roslyn](http://msdn.microsoft.com/en-us/hh500769)来完成这项任务。它提供了读取解决方案和项目的工具，然后将其中的源文件实现为它们的组成语法或语义树。[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2012/06/05/announcing-microsoft-roslyn-june-2012-ctp.aspx)在他的博客上介绍了 CTP（重点是我的）：

> Roslyn 是一个代码分析 API 库，可用于构建编译器、开发环境、重构引擎等。它支持 C# 和 Visual Basic 的词汇、语法和语义分析。***这太棒了。***

您还可以使用[Roslyn 创建 IDE Extensions](http://msdn.microsoft.com/en-us/hh500769#Toc306015706)，包括创建自己的重构工具：

> 为了扩展 Visual Studio IDE，编辑器服务 API 向现有语言服务功能公开了一组扩展点。其中的一些示例包括完成列表、代码大纲、突出显​​示引用、语法分类器和代码重构。对于这些扩展中的每一个，您都需要创建自己的 MEF 提供程序，并确保至少有一个 Export* 属性来描述有关提供程序的重要详细信息。

在[另一个问题中，我演示](https://stackoverflow.com/a/9625070/7116)了用这个主循环在最少量的代码中替换类型名称（例如`int`with ）：`Int32`

```
var workspace = Workspace.LoadSolution(path);
var solution = workspace.CurrentSolution;
foreach (var project in solution.Projects
    .Where(prj => prj.LanguageServices.Language == "C#"))
{
    foreach (var doc in project.Documents
        .Where(d => d.SourceCodeKind == SourceCodeKind.Regular
                 && d.LanguageServices.Language == "C#"))
    {
        var tree = SyntaxTree.ParseCompilationUnit(
            doc.GetText(),
            doc.DisplayName);

        // Update the syntax tree
        var newTree = UpdatePredefinedTypes(tree);

        solution = solution.UpdateDocument(doc.Id, newTree.Text);
    }
}

workspace.ApplyChanges(workspace.CurrentSolution, solution);
// When you run this on a project open in VS it notices the changes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:44:05.227

您可以查看[Visual Studio 自动化扩展](http://msdn.microsoft.com/en-us/vstudio/vextend.aspx)点

或者您可以对所有文件进行后处理..想想您提到的复制/粘贴解决方案，但不是复制/粘贴，而是从磁盘读取文件并将它们写回。这可能由文件修改或用户交互触发。

# javascript - 如何将数组发送为多个参数？

> ID：11532335
> 
> 赞同：18
> 
> 时间：2012-07-17T23:36:02.743
> 
> 标签：javascript

在 Javascript 中，我有简单的[测试代码](http://jsfiddle.net/MXNbK/)：

```
function x(a, b) {
  alert(a);
  alert(b);
}

var c = [1,2];
x(c); 
```

它将一个参数作为一个参数发送`c`给函数`x()`，分配给`a`并`b`保持未定义：-/

如何将数组作为多个参数发送给函数，而不是作为一个数组？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-17T23:37:52.700

退房[`apply`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)。

在您的情况下（因为您没有`this`在函数中使用），您可以简单地将`window`(or `this`) 作为“this”参数传递：

```
x.apply(this, [1, 2]); 
```

**示例：http:** [//jsfiddle.net/MXNbK/2/](http://jsfiddle.net/MXNbK/2/)

根据您关于`null`作为“this”参数传递的问题，请参阅 MDN 在链接文章中关于“this”参数的评论：

> 请注意，这可能不是方法看到的实际值：**如果方法是非严格模式代码中的函数，则 null 和 undefined 将被替换为全局 object**，原始值将被装箱。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-11T19:56:59.260

或者，在带有 ECMAScript 2015（或带有 Babel 转译器）的浏览器中，您可以使用新的扩展运算符：

```
x(...[1, 2]) 
```

# iphone - isOrientationSupported 在 IOS 中已弃用

> ID：11532337
> 
> 赞同：8
> 
> 时间：2012-07-17T23:36:16.493
> 
> 标签：iphone, objective-c, ios

我收到此错误，我不知道如何解决它..

```
WARNING: -[<AVCaptureVideoPreviewLayer: 0xad482c0> isOrientationSupported] is deprecated.  Please use AVCaptureConnection's -isVideoOrientationSupported 
```

但是，当我查看苹果[文档](https://developer.apple.com/library/mac/#documentation/AVFoundation/Reference/AVCaptureConnection_Class/Reference/Reference.html)时，它说它是 Mac OS 功能.. 不是 IOS ......所以我有点困惑......期待得到一些答案.. 谢谢..

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-01T16:15:06.080

一些示例代码也适用于 6.0 之前的版本：

```
if ([captureVideoPreviewLayer respondsToSelector:@selector(connection)])
{
    if ([captureVideoPreviewLayer.connection isVideoOrientationSupported])
    {
        [captureVideoPreviewLayer.connection setVideoOrientation:self.interfaceOrientation];
    }
}
else
{
    // Deprecated in 6.0; here for backward compatibility
    if ([captureVideoPreviewLayer isOrientationSupported])
    {
        [captureVideoPreviewLayer setOrientation:self.interfaceOrientation];
    }                
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T23:41:54.477

`AVCaptureConnection`也可用于 iOS[此处](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureConnection_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009522)。您可能查看了错误的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-06T10:39:31.847

上面回答的示例代码工作正常。但需要更换自己。interfaceOrientation 与 AVCaptureVideoOrientation。

编辑代码如下。

```
if ([captureVideoPreviewLayer.connection isVideoOrientationSupported])
{
    [captureVideoPreviewLayer.connection setVideoOrientation:AVCaptureVideoOrientationPortrait];
} 
```

根据要求，方向将是纵向或横向。

欢迎编辑和建议。

# jquery - jQuery EasyUI 边框布局 - 移除向西折叠的能力

> ID：11532339
> 
> 赞同：0
> 
> 时间：2012-07-17T23:36:20.067
> 
> 标签：jquery, jquery-plugins

如何删除西面板中的“箭头”图标。我要防止用户向西崩溃？

```
<body class="easyui-layout">
        <div region="west" title="West" split="true" style="width: 200px;">
            <!-- WEST -->
        </div>
        <div region="center" title="center title" style="padding:5px;background:#eee;">
            <!-- CENTER -->
        </div>
    </body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:39:30.300

基本上，您必须删除“title”属性！回答了自己的qn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-30T03:39:29.453

向西布局添加可折叠到假属性

该[文件](http://www.jeasyui.com/documentation/layout.php)说：可折叠 - 定义是否显示可折叠按钮。

```
<body class="easyui-layout">
    <div region="west" title="West" split="true" style="width: 200px;" collapsible="false">
        <!-- WEST -->
    </div>
    <div region="center" title="center title" style="padding:5px;background:#eee;">
        <!-- CENTER -->
    </div>
</body> 
```

# objective-c - 在运行时获取 plist

> ID：11532341
> 
> 赞同：0
> 
> 时间：2012-07-17T23:36:35.513
> 
> 标签：objective-c, ios

我有一个应用程序，我想在 2 个不同的服务器上运行/测试，目前我所做的是编译一对不同的可执行文件。每个都有一个包含服务器信息的不同 plist，但其他方面是相同的。然后我就这样读了它们：

```
NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"data" ofType:@"plist"];
NSDictionary *plistDefaults = [NSDictionary dictionaryWithContentsOfFile:plistPath]; 
```

但是，随着我们更频繁地构建并计划添加更多服务器，这变得很麻烦。有没有办法必须在运行时从文件夹中获取 plist，这样我就不必为每个构建编译多次？提前致谢！

更新：我想改写这个问题的一种方法是：如何从未预编译到应用程序包中的 plist 中读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:02:29.890

如果您在 info.plist 中定义了一个可以存储服务器类型或名称的值，您可能会在每个应用程序的基础上随机分配一个服务器 ( `arc4rand()`)，并在运行时使用正确的地址检索该值。

# xml - 将 XML 转换为不同的布局

> ID：11532343
> 
> 赞同：0
> 
> 时间：2012-07-17T23:36:53.013
> 
> 标签：xml, transform

嗨，谢谢你

鉴于此输入 XML

```
<root>
<part id='74'>
    <title>Belt</title>
    <description>1158J5</description>
    <partno>C00112576</partno>
    <price>10.99</price>
</part>
<category id='6' name='Washer-Dryer'></category>
<category id='2' name='Washing machine'></category>
<make id='6' name='Ariston'></make>
<make id='2' name='Hotpoint'></make>
<make id='33' name='Indesit'></make>
<model catid='2' catname='Washing machine' makeid='6' makename='Ariston' modelid='524'>A1235</model>
<model catid='2' catname='Washing machine' makeid='2' makename='Hotpoint' modelid='413'>SCR37P</model>
<model catid='2' catname='Washing machine' makeid='2' makename='Hotpoint' modelid='35751'>WD440</model>
<model catid='6' catname='Washer-Dryer' makeid='33' makename='Indesit' modelid='2989'>WF000G</model> 
```

我想将其转换为

```
<root>
<part id='74'>
    <title>Belt</title>
    <description>1158J5</description>
    <partno>C00112576</partno>
    <price>10.99</price>
</part>
<category id='6' name='Washer-Dryer'>
    <make id='33' name='Indesit'>
        <model catid='6' catname='Washer-Dryer' makeid='33' makename='Indesit' modelid='2989'>WF000G</model>
    </make>
</category>
<category id='2' name='Washing machine'>
    <make id='6' name='Ariston'>
        <model catid='2' catname='Washing machine' makeid='6' makename='Ariston' modelid='524'>A1235</model>
    </make>
    <make id='2' name='Hotpoint'>
        <model catid='2' catname='Washing machine' makeid='2' makename='Hotpoint' modelid='413'>SCR37P</model>
        <model catid='2' catname='Washing machine' makeid='2' makename='Hotpoint' modelid='35751'>WD440</model>
    </make>
</category> 
```

我从 asp 经典提要中收到此 XML，我可以访问 asp 并且可以在那里执行，一旦收到我在 php 中，然后我发送到 xsl 转换以输出到浏览器

所以我的问题是哪一个是最好的方式，即 asp、php 或 xsl，是否有可能至少让我开始以最好的方式做到这一点

再次感谢蒂姆·道奇森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T22:11:44.613

谷歌搜索和拔头发的好日子，我想出了这个

```
<xsl:template match="root">
    <xsl:for-each select="//make">
        <xsl:variable name="makeid" select="@id" />
        <xsl:variable name="makename" select="@name" />
        <make id="{$makeid}" name="{$makename}">
        <xsl:for-each select="//model[@makeid = $makeid]">
            <model catid="{@catid}" catname="{@catname}" makeid="{@makeid}" makename="{@makename}" modelid="{@modelid}">
                <xsl:value-of select="."/>
            </model>
        </xsl:for-each>
        </make>
    </xsl:for-each> 
</xsl:template> 
```

我知道它一开始并不完全是我想要的，但它可以满足我的需要。只是希望有人能说我是否至少朝着正确的方向前进

非常感谢蒂姆

# php - 关于 PHP 自动加载/spl_autoload

> ID：11532345
> 
> 赞同：1
> 
> 时间：2012-07-17T23:37:03.257
> 
> 标签：php, autoload

我很好奇这些功能是如何工作的。

我注意到在 CodeIgniter 之类的框架中，您可以执行以下操作

`Class New_Model extends CI_Model`

CI 是否使用这些自动加载功能来促进这种行为？

在我当前的设置中，我在每个文件的顶部都有一堆包含以及类实例，用于处理用户、论坛线程/帖子和其他系统变量，如站点名称/基本 URL 等。我的目标是只需要包含一个可用于实例化类的文件。

# php - 去除 PHP 标签 preg_replace

> ID：11532348
> 
> 赞同：0
> 
> 时间：2012-07-17T23:37:27.373
> 
> 标签：php, preg-replace

我想从外部文本中删除所有 php 标签，以便它可以安全地包含在 php 中。

这是示例输入：

```
<?
?>
<html>
<?php ?>
<?= ?>
</html>
<? 
```

或任何其他可能性

和输出：

```
<html>
</html> 
```

最后一个 php 打开标签可能没有结束标签！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:46:31.423

我不认为有一种很好的方法可以完全按照您的意愿进行操作，但是如果可以在输出中发送 PHP 标记（未解析），您可以使用：

```
<?php echo file_get_contents('input.html'); ?> 
```

否则，也许看看 token_get_all 方法：

[http://www.php.net/manual/en/function.token-get-all.php](http://www.php.net/manual/en/function.token-get-all.php)

您可以遍历所有结果并仅返回 T_INLINE_HTML 类型的结果：

```
$toks = token_get_all( file_get_contents( 'input.html' ) );
foreach( $toks as $tok ) {
  if( $tok[0] == T_INLINE_HTML )   {
    print $tok[1];
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:52:49.020

执行此操作的正确方法是不包含它，而是将其作为字符串加载，使用`file_get_contents()`. 这将保留 PHP 标记而不执行它们。但是，以下正则表达式将完全按照您的要求执行：

```
#<\?.*?(\?>|$)#s 
```

以下是该字符串所代表内容的细分：

```
# 标记表达式开头和结尾的分隔符 - 几乎任何事情都可以（最好是正则表达式本身没有的东西）
<\? 找到文本“<?”，它是 PHP 标记的开头。请注意，问号之前需要一个反斜杠，因为问号通常在正则表达式中做一些特殊的事情。
.*? 包括尽可能多的文本（“.*”），但尽可能少（“？”）。
(\?>|$) 在 PHP 结束标记 ("?>") 或文本结尾 ("$") 处停止。这不一定要停在第一个，但由于前一部分是“尽可能少”，所以它会。
# 相同的分隔符，标记表达式的结束
s 一个特殊的标志，表示模式可以跨越多行。没有它，正则表达式会期望在一行中找到整个 PHP 标记（开始和结束）。

```

# iphone - 防止 UIView 阴影在视图下

> ID：11532349
> 
> 赞同：0
> 
> 时间：2012-07-17T23:37:33.857
> 
> 标签：iphone, objective-c, ios, core-graphics, shadow

我正在寻找一个自定义`UIView`子类，其中有一个“洞”，通过它可以看到下面的视图。我已经使用一些 Core Graphics 绘图和剪辑完成了这项工作。好玩的东西。

我也希望这个名为 的视图`WheelDetailView`有一个投影。很容易。我已经通过以下方式实现了这一点：

```
[[self layer] setShadowColor:[[UIColor blackColor] CGColor]];
[[self layer] setShadowRadius:4.0];
[[self layer] setShadowOpacity:1.0];
[[self layer] setShadowOffset:CGSizeMake(0, 2)]; 
```

问题是，这个设置在我视图中创建的“洞”内给了我一个阴影。虽然我意识到这完全有道理，因为您希望在现实生活中看到一个阴影，我宁愿只让阴影出现在我的视野周围。

这是它现在的样子：

![带有自动阴影的孔](../Images/e1234a34f62545cb1b464cd8b73ec895.png "带有自动阴影的孔")

[为了匿名，我故意模糊了方向盘的一部分；你可以忽略它。]

如您所见，阴影存在于视图之外和视图之内。有谁知道消除这种影响的好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:56:29.173

将 WheelView 放在视图上方是否有意义？

或者您可以删除视图的阴影并使用带有阴影的单独视图，然后将其放在所有视图的后面

或阴影图像并将其放在所有视图后面

# android - Android 应用程序不适用于 4.0 + 版本

> ID：11532350
> 
> 赞同：0
> 
> 时间：2012-07-17T23:37:34.670
> 
> 标签：android

我制作了一个可以在 1.6 及更高版本上运行的应用程序，但是一旦我将手机更新到 4.0.4，它就会出现以下错误，不幸的是，测试已经停止并且根本无法运行。有什么理由说明为什么会发生这种情况？也许我需要更改编码以使其在新版本上工作？包 com.droidnova.android；

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.MotionEvent;

public class SplashScreen extends Activity {
  protected boolean _active = true;
  protected int _splashTime = 5000;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    // thread for displaying the SplashScreen
    Thread splashTread = new Thread() {
        @Override
        public void run() {
            try {
                int waited = 0;
                while(_active && (waited < _splashTime)) {
                    sleep(100);
                    if(_active) {
                        waited += 100;
                    }
                }
            } catch(InterruptedException e) {
                // do nothing
            } finally {
                finish();
                startActivity(new Intent("com.droidnova.android.splashscreen.MyApp"));
                stop();
            }
        }
    };
    splashTread.start();
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        _active = false;
    }
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:08:00.950

一个疯狂的猜测是，您在 UI 线程之外的另一个线程中调用了 finish() 和 startActivity()。使用异步任务而不是线程或使用 Activity.runOnUiThread()。是的，logcat 会很有帮助。

# jquery - jQMobile defaultPageTransition 不起作用

> ID：11532353
> 
> 赞同：1
> 
> 时间：2012-07-17T23:37:42.803
> 
> 标签：jquery, html, mobile, default

我正在使用`jQMobile`我的 Web 应用程序。我正在使用最新版本 1.1.1。

我尝试默认设置`$.mobile.defaultPageTransition = "slide";`

但它不起作用，当我将版本更改`jQMobile`为它时，`jquery.mobile-1.0b2`它工作正常。

有什么建议吗？

代码 ：

```
$(document).bind("mobileinit", function(){
  $.mobile.defaultPageTransition = "slide";
}); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T21:56:09.133

将代码移动到它自己的文件中，比如“custom-init.js”。

```
$(document).bind("mobileinit", function() { 
    $.mobile.defaultPageTransition = "slide";
}); 
```

在您的脚本导入中，在您包含 jQuery 之后、但在您包含 jQuery Mobile 之前包含“custom-init.js”：

```
<script src="jquery-1.7.1.min.js"></script>
<script src="custom-init.js"></script>
<script src="jquery.mobile-1.1.1.min.js"></script> 
```

那应该让它为你工作。

# android - 从一个活动中带来一个字符串数组以填充另一个列表视图活动

> ID：11532358
> 
> 赞同：2
> 
> 时间：2012-07-17T23:38:04.093
> 
> 标签：android, android-intent

嘿，伙计们，我已经搜索了几个小时，但我似乎找不到任何东西。我想将用户收藏的报价带入列表视图并为他们保存，但我似乎无法让它进入列表视图活动！非常感谢所有帮助！这是我的代码：

看公共课的最爱是我需要帮助的地方。

```
public class Startme extends Activity {
    Random gen= new Random();
    int num = 0;

    String[] quotes={
            "End of Quotes, hit next",
            "QUOTE2",
            "QUOTE3",
            "QUOTE4",
            "QUOTE5",};

    public void favorite(View F) {
        Intent intent = new Intent(Startme.this, Fav.class);
        intent.putExtra("quotes",num);
    }    

    public void next(View N){
        num++;
        if(num == 5)
            num = 0;

        TextView text = (TextView) findViewById(R.id.Quote);
        text.setText( quotes[num]);

        TextView number = (TextView) findViewById(R.id.Qn);
        number.setText(""+num);
    }

    public void back(View B){
        if(num==0)
            num=4;
        else
            num--;

        TextView text = (TextView) findViewById(R.id.Quote);
        text.setText(quotes[num]);

        TextView number = (TextView) findViewById(R.id.Qn);
        number.setText(""+num);
    }

    public void rand(View G)  {
        num = gen.nextInt(5);
        TextView text = (TextView) findViewById(R.id.Quote);
        text.setText(quotes[num]);
        TextView number = (TextView) findViewById(R.id.Qn);
        number.setText(""+num); 
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.startquotes);

        TextView Dark=(TextView)findViewById(R.id.Quote); 
        Typeface face=Typeface.createFromAsset(getAssets(), "fonts/font1.ttf"); 
        Dark.setTypeface(face); 

        num = gen.nextInt(5);
        TextView text = (TextView) findViewById(R.id.Quote);
        text.setText( quotes[num]);

        TextView number = (TextView) findViewById(R.id.Qn);
        number.setText(""+num);
    }

    public void favs(View F){
        Intent intent = new Intent(this, Fav.class);
        startActivity(intent);
    }
} 
```

这是我用意图制作的列表视图类

```
public class Fav extends Activity {
    public ArrayAdapter<String> lvAdapter;
    public ListView lv;

    String extras2;
    String[] datos = new String[] {extras2};
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.setContentView(R.layout.faves);   

        Bundle extras = getIntent().getExtras();  
        extras2 = extras.getString("quotes");

        lvAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,datos);
        lv = (ListView) findViewById(R.id.list);
        lv.setAdapter(lvAdapter);
    }
} 
```

日志猫

```
07-18 04:10:30.565: E/AndroidRuntime(7370): Uncaught handler: thread main exiting due to uncaught exception
07-18 04:10:30.597: E/AndroidRuntime(7370): java.lang.RuntimeException: Unable to start activity ComponentInfo{me.me.quote/me.me.quote.Fav}: java.lang.NullPointerException
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.os.Handler.dispatchMessage(Handler.java:99)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.os.Looper.loop(Looper.java:123)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.ActivityThread.main(ActivityThread.java:4363)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at java.lang.reflect.Method.invokeNative(Native Method)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at java.lang.reflect.Method.invoke(Method.java:521)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at dalvik.system.NativeStart.main(Native Method)
07-18 04:10:30.597: E/AndroidRuntime(7370): Caused by: java.lang.NullPointerException
07-18 04:10:30.597: E/AndroidRuntime(7370):     at me.me.quote.Fav.onCreate(Fav.java:34)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
07-18 04:10:30.597: E/AndroidRuntime(7370):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
07-18 04:10:30.597: E/AndroidRuntime(7370):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:46:16.460

我猜当您使用 fav() 时它会崩溃，因为您没有传递任何额外内容以在此处接收：

```
Bundle extras = getIntent().getExtras();  
extras2 = extras.getString("quotes"); 
```

检查空值，以免出现空指针异常：

```
Bundle extras = getIntent().getExtras();  
if(extras != null)
    extras2 = extras.getString("quotes"); 
```

**也是** `num`一个`int`，而不是一个字符串：

```
intent.putExtra("quotes count", num); 
```

您必须阅读`int`s：

```
int count = extras.getInt("quotes count", 0); 
```

Using`getString("quotes count")`将返回 null，因为没有带有该键的字符串，只有一个整数。

**最后**你可以像这样传递一个 String[] ：

```
intent.putExtra("quotes", quotes); 
```

并阅读它：

```
String[] quotes = extras.getStringArray("quotes"); 
```

希望有帮助！

**添加**

您的 String 数组`datos`有一个空条目，当您更改时它不会自动更新`extras2`，重写 Fav 如下：

```
public class Fav extends Activity {
    public ArrayAdapter<String> lvAdapter;
    public ListView lv;

    String[] datos;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.faves);   

        // Check if extras is null, depending on implementation may need to check if Intent is null too
        Bundle extras = getIntent().getExtras();
        if(extras != null) 
            datos = extras.getStringArray("quotes");
        else {
            Log.w("Fav", "No string array passed, ListView will be empty!");
            datos = new String[] {""};
        }

        lvAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, datos);
        lv = (ListView) findViewById(R.id.list);
        lv.setAdapter(lvAdapter);
    }
} 
```

当然，您需要`putExtra("quotes", quotes)`在第一个 Activity 中使用 Intent（我发布的）。

# visual-studio-2010 - SVN Merge - 重新集成的源和目标都不能是存储库的根

> ID：11532360
> 
> 赞同：1
> 
> 时间：2012-07-17T23:38:20.460
> 
> 标签：visual-studio-2010, svn, tortoisesvn

我有一个包含多个项目的 VS2010 解决方案。文件夹结构如下所示：

```
C:\Dev\MyProduct
    MyProduct.sln
    UI
        UI.csproj
        SomeFile.cs
    Model
        Model.csproj
        SomeModel.cs 
```

我创建了代码的第一个生产版本的分支。事实证明，我必须在该分支中进行一些修复，现在想将该分支重新集成到主干中。我正在使用 TortoiseSVN 来做到这一点（我也尝试过 AnkhSVN，结果相似）。

如果我选择文件夹

> C:\Dev\MyProduct

右键单击并选择*TortoiseSVN / Merge*我将通过一个向导引导我选择*Reintegrate a branch*，输入我的分支的 URL，然后运行合并。这导致

> 重新集成的源和目标都不能是存储库的根

如果我重复相同的步骤

> C:\开发\我的产品\模型

合并成功。我猜错误消息告诉我我无法在根级别执行此操作。

**问题**

1.  除了选择每个项目的文件夹（示例中的文件夹多于 2 个）并重复该过程，然后对下的每个文件重复该过程之外，我是否有任何选项可以完全合并分支`C:\Dev\MyProduct`？
2.  不建议以这种方式构建SVN吗？如果没有，我应该如何构建事物以便每个产品都有一个存储库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T04:07:09.953

您可能希望以不同的方式构建您的存储库。有两种通用方法可以做到这一点：

```
/project1/trunk
/project1/branches
/project1/tags
/project2/trunk
/project2/branches
/project2/tags
... 
```

和：

```
/trunk/project1
/trunk/project2
/branches
/tags 
```

您选择哪一个取决于您是要分支和合并每个单独的项目（第一个选项），还是将所有项目合并在一起（第二个选项）。

如果您需要将位于存储库根目录中的现有项目文件移动到新的 /trunk 目录中，则需要执行以下操作：

```
cd /path/to/repo
files=`eval "echo *"`
mkdir trunk branches tags
svn add trunk branches tags
svn commit -m "adding the proper subdirectories"
svn mv `echo $files | sed 's/^/^\//g' | sed 's/ / ^\//g'` ^/trunk/ -m "moving project files into trunk"
svn up 
```

如果您手动执行，“svn mv”行将如下所示：

```
svn mv ^/dir1 ^/dir2 ^/file1 ^/file2 ^/trunk/ -m "moving project files into trunk" 
```

# android - 错误膨胀片段

> ID：11532361
> 
> 赞同：1
> 
> 时间：2012-07-17T23:38:21.597
> 
> 标签：android, android-fragments

我只是想按照 android dev 上的示例代码来为活动中的片段充气。我有一个更复杂的项目我正在工作，但我在这里遇到了与这个简单项目相同的错误。谁能指出我正确的方向？

扩展片段的类

```
package com.example.fragtest;

import android.support.v4.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class FragOne extends Fragment {

    @Override
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
    }
    @Override
    public View onCreateView(LayoutInflater inflater,ViewGroup container, Bundle savedInstanceState){
        return inflater.inflate(R.layout.activity_main, container,false);
    }

} 
```

扩展 FragmentActivity 的类

```
package com.example.fragtest;

import android.os.Bundle;
import android.view.Menu;
import android.support.v4.app.FragmentActivity;

public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

片段所在的xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <fragment android:name="com.example.fragtest.FragOne"
       android:id="@+id/frag"
       android:layout_width="match_parent"
       android:layout_height="match_parent" />

</LinearLayout> 
```

设置活动名称的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.fragtest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是logcat的输出

```
07-17 23:45:09.053: E/AndroidRuntime(560): FATAL EXCEPTION: main
07-17 23:45:09.053: E/AndroidRuntime(560): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.fragtest/com.example.fragtest.MainActivity}: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.ActivityThread.access$600(ActivityThread.java:122)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1146)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.os.Looper.loop(Looper.java:137)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.ActivityThread.main(ActivityThread.java:4340)
07-17 23:45:09.053: E/AndroidRuntime(560):  at java.lang.reflect.Method.invokeNative(Native Method)
07-17 23:45:09.053: E/AndroidRuntime(560):  at java.lang.reflect.Method.invoke(Method.java:511)
07-17 23:45:09.053: E/AndroidRuntime(560):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
07-17 23:45:09.053: E/AndroidRuntime(560):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
07-17 23:45:09.053: E/AndroidRuntime(560):  at dalvik.system.NativeStart.main(Native Method)
07-17 23:45:09.053: E/AndroidRuntime(560): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class fragment
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-17 23:45:09.053: E/AndroidRuntime(560):  at com.example.fragtest.FragOne.onCreateView(FragOne.java:18)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:846)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1061)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.support.v4.app.FragmentManagerImpl.addFragment(FragmentManager.java:1160)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
07-17 23:45:09.053: E/AndroidRuntime(560):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.Activity.setContentView(Activity.java:1835)
07-17 23:45:09.053: E/AndroidRuntime(560):  at com.example.fragtest.MainActivity.onCreate(MainActivity.java:12)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.Activity.performCreate(Activity.java:4465)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1919)
07-17 23:45:09.053: E/AndroidRuntime(560):  ... 11 more
07-17 23:45:09.053: E/AndroidRuntime(560): Caused by: java.lang.IllegalArgumentException: Binary XML file line #7: Duplicate id 0x7f080000, tag null, or parent id 0x0 with another fragment for com.example.fragtest.FragOne
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:277)
07-17 23:45:09.053: E/AndroidRuntime(560):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
07-17 23:45:09.053: E/AndroidRuntime(560):  ... 30 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T02:18:53.817

在您的扩展类中，`FragmentActivity`您将视图设置为一个名为`activity_main`. 在`activity_main`您的内部有对您的*片段*代码的引用，`com.example.fragtest.FragOne`. 加载该 XML 时，将执行与之关联的代码`com.example.fragtest.FragOne`。该*Fragment*的代码返回一个*带有*`R.id.activity_main`.

该 XML 文件引用了刚刚实例化它的同一*片段代码。*你看到了难题。

*要解决您的问题实例，请在Fragment*类中创建一个新的 XML 文件（未命名的文件`activity_main`） 。而不是膨胀一个单独的 XML（一个不包含对调用它的代码的引用）。实际上应该是容器，这个新布局（例如）将是 UI 部分。*`activity_main``activity_main``fragment_layout`*

 *我喜欢这样想：尽管有教义，但*Fragment*包含三个部分。容器*Activity*（这可以，并且在您的情况下应该通过 setContentView 膨胀布局 XML 文件），*Fragment*的 java 代码（这可以并且在您的情况下应该膨胀布局...。除了 之外的东西`activity_main`），并且*Fragment*的关联 XML 文件（由您的 Fragment 类膨胀的文件，不包括对其代码的循环引用）。

当然，这些咒语有漏洞，但你明白了吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:53:50.720

> android:id="@+id/frag"

您的 logcat 表明您的片段 id 是另一个的副本。您是否有任何其他具有相同 ID 的 XML 元素？如果没有，您是否尝试过清理您的项目？

```
Project->Clean... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T05:15:26.597

检查您的片段类，它正在膨胀 activity_main xml 文件，这是错误的，它应该膨胀您的片段的 xml 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-15T12:55:31.220

我有同样的问题 。在我的 xml 我创建视图而不是视图

所以需要改变

```
<view
          android:layout_width="match_parent"
          android:layout_height="1dp"
          android:layout_marginTop="20.7dp"
          android:textColor="@color/silver_two"
         /> 
```

到

```
<View
          android:layout_width="match_parent"
          android:layout_height="1dp"
          android:layout_marginTop="20.7dp"
          android:textColor="@color/silver_two"
         /> 
```*

# bash - 在 NAND 闪存上突然创建的硬链接

> ID：11532362
> 
> 赞同：1
> 
> 时间：2012-07-17T23:38:21.037
> 
> 标签：bash, embedded-linux, hardlink

我对在我（作为 usr1）拥有的配置文件和我在操作系统守护程序（每 5 分钟）中创建的临时文件之间突然创建的硬链接感到惊讶，以便从原始配置文件中复制。

复制回原始文件后，我使用 rename(*file2, *file1); 在 C 中，它会杀死对 config.txt.tmp 的任何跟踪

该目录在 mnt /sram 驱动器上是 root 拥有的，并且没有人对嵌入式机器具有 root 访问权限。存储介质是嵌入式 Linux 2.6.10 上的 NAND 闪存 SRAM

`ls -l`节目

```
2 config.txt       699byte date_modify  
2 config.txt.tmp   699byte date_modify 
```

config.txt.tmp 应该被创建，从 config.txt 复制，将配置参数发送到 config.txt，然后在 5-7 个 C 行内自动删除

该目录是 root 拥有的，无法创建硬链接。

有人对低级函数中的“硬链接”创建有解释吗？我会面临竞争状况吗？或者它可能是一些用于通过闪存存储的内核代码？还是Linux中的错误？

我的代码运行了 5 年，100 台机器，最近只有 1 台机器出现了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:18:42.260

通过执行检查文件是否*实际上是硬链接*

```
ls -i 
```

显示 inode。

我的头顶：

*   文件缓冲区在移动之前可能已经脏了？
*   如果涉及分叉，那么脏缓冲区甚至可能在分叉之前就在起作用
*   是否存在闪存“覆盖”文件系统驱动程序？也许它已经改变并包含以前没有
    想到 的优化
    *   工会
    *   奥夫斯
    *   ...？

**编辑**

> FWIW：从你的文字中，我觉得你可能正在做相反的事情：我希望你写一个 .tmp 副本，一旦一切都被刷新和同步，“原子地”（好吧，交叉手指以获得文件系统支持和订购模式）将其重命名到位。（我现在只是猜测，因为大部分图片都太模糊，无法实际继续）

另请参阅：[没有 fsync() 的 rename() 是否安全？](https://stackoverflow.com/questions/7433057/is-rename-without-fsync-safe/7433149#7433149)

# php - php-curl 支持“补丁”吗？

> ID：11532363
> 
> 赞同：3
> 
> 时间：2012-07-17T23:38:30.580
> 
> 标签：php, curl

我正在使用php和curl来测试rest api，特别是'PATCH'。当我运行下面的代码时，我得到输出是：{"code":"InvalidContent","message":"Invalid JSON: Unexpected token \n"}

我错过了什么？我们可以通过 https 进行 curl PATCH 吗？我拥有的访问令牌是有效的，适用于所有其他 api。

我有以下代码：

```
<?php

     $url = 'https://a-q.abc.co/docs/<ean>';

     $ch = curl_init($url);
     curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "PATCH" ); 
     curl_setopt($ch, CURLOPT_HTTPHEADER,  
     array('Authorization: Bearer <access_token>=', 'Accept-Version: ~1','Content-Type: application/json')); 
     curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
     curl_setopt($ch, CURLINFO_HEADER_OUT, true);
     curl_setopt ($ch, CURLOPT_POSTFIELDS,'{"title": "
     script Ran", "authors":[{"firstName":"12344", "lastName":"dddd"}],"description":"Script Document"}');
     $response = curl_exec($ch);
    if(!CURL_ERROR($ch)){
        echo"\n The output is:".$response;
    }else{
        echo "\n Fetch failed ".curl_error($ch);
        exit;
    }

  curl_close($ch);

?> 
```

# javascript - Javascript + Pubnub 聊天通知

> ID：11532364
> 
> 赞同：1
> 
> 时间：2012-07-17T23:38:32.327
> 
> 标签：javascript, chat, pubnub

我试图在用户提交聊天时发出声音，对方也会听到。这是我的代码：

```
Enter Chat and press enter

<div><input id=input placeholder=you-chat-here /></div>
<code>Chat Output</code>
<div id=box></div>
<div id=pubnub pub-key=demo sub-key=demo></div>
<script src=http://cdn.pubnub.com/pubnub-3.1.min.js></script>
<script>(function(){
    var box = PUBNUB.$('box'), input = PUBNUB.$('input'), channel = 'chatlllll';
        PUBNUB.subscribe({
            channel : channel,
            callback : function(text) { 
                box.innerHTML = 
                  (''+text).replace( /[<>]/g, '' ) + '<br>' +      box.innerHTML; 
            }
        });
    PUBNUB.bind( 'keyup', input, function(e) {
       (e.keyCode || e.charCode) === 13 && PUBNUB.publish({
           playsound('http://www.aphpsite.comuv.com/sound/chat.wav')
           channel : channel, 
           message : input.value, 
           x : (input.value='')
       });
   });
})();</script> 
```

这就是我所拥有的。我无法添加声音。这个脚本坏了。所以这些都不起作用。我想如果有人可以修复它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T06:11:21.413

您正在询问有关 PubNub 和聊天消息到达/发送时具有声音效果的示例聊天应用程序。我更新了示例并提供了一个额外的**sound.js** JavaScript HTML5 库来帮助播放音效。请注意，我将您的 Sound **WAV**文件也转换为**OGG**和**MP3**文件格式，以便提供跨浏览器兼容性。接下来，我将粘贴接收消息时带有声音效果的聊天的完整且有效的源代码。在源代码之后，我已经粘贴了您需要的 URL 资源，例如**sound.js**和**音频**文件。

现场**体验！**- [http://pubnub-demo.s3.amazonaws.com/chat-with-sounds/chat.html](http://pubnub-demo.s3.amazonaws.com/chat-with-sounds/chat.html)

见源代码：

```
<div><input id=input placeholder=chat-here></div>
<code>Chat Output</code>
<div id=box></div>
<div id=pubnub pub-key=demo sub-key=demo></div>
<script src=http://cdn.pubnub.com/pubnub-3.1.min.js></script>
<script src=sound.js></script>
<script>(function(){
    var box = PUBNUB.$('box'), input = PUBNUB.$('input'), channel = 'chatlllll';
    PUBNUB.subscribe({
        channel : channel,
        callback : function(text) { 
            // PLAY SOUND HERE
            sounds.play('chat');

            // UPDATE TEXT OUTPUT HERE
            box.innerHTML = 
                (''+text).replace( /[<>]/g, '' ) +
                '<br>' +
                box.innerHTML; 
        }
    });
    PUBNUB.bind( 'keyup', input, function(e) {

       (e.keyCode || e.charCode) === 13 && PUBNUB.publish({
           channel : channel, 
           message : input.value, 
           x       : (input.value='')
       });
   });
})();</script> 
```

**在 GitHub 上下载源代码**

[https://github.com/pubnub/pubnub-api/tree/master/app-showcase/chat-with-sounds](https://github.com/pubnub/pubnub-api/tree/master/app-showcase/chat-with-sounds) - 单击链接访问 PubNub GitHub 存储库，其中包含与声音聊天演示的源代码。

# android - 垂直居中在右侧的RelativeLayout

> ID：11532368
> 
> 赞同：2
> 
> 时间：2012-07-17T23:39:02.940
> 
> 标签：android, android-layout

我怎样才能用RelativeLayout做这个简单的布局？

```
--------------------------------
First line
                           9999
Second line
-------------------------------- 
```

两件事情：

*   “第一行”和“第二行”之间没有空格。
*   数字“9999”右对齐，垂直居中。

我试过这个，但不起作用

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip"
android:gravity="center_vertical">

<TextView  
    android:id="@+id/second_line"
    android:layout_width="wrap_content"
    android:layout_height="26dip" 
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:singleLine="true"
    android:ellipsize="marquee"
    android:layout_gravity="right"
    android:text="Second Line" />

<TextView android:id="@+id/first_line"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_above="@id/second_line"
    android:layout_alignWithParentIfMissing="true"
    android:singleLine="true"
    android:ellipsize="marquee"
    android:text="First line"
    android:gravity="center_vertical" />

<TextView  
    android:id="@+id/number"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" 
    android:layout_alignParentRight="true"
    android:layout_toRightOf="@id/first_line"
    android:text="99999" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T00:58:45.953

关键是`android:layout_centerVertical`因为在 a`RelativeLayout`你不能使用 normal `android:layout_gravity`。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:padding="6dip">

    <TextView 
        android:id="@+id/first_line"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:singleLine="true"
        android:text="First line" />

    <TextView  
        android:id="@+id/second_line"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/first_line"
        android:singleLine="true"
        android:text="Second Line" />

    <TextView  
        android:id="@+id/number"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:text="99999" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:48:04.827

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="?android:attr/listPreferredItemHeight"
android:padding="6dip"
android:gravity="center">

<TextView 
    android:id="@+id/first_line"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:layout_alignWithParentIfMissing="true"
    android:singleLine="true"
    android:text="First line"
     />
<TextView  
    android:id="@+id/number"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent" 
    android:layout_alignParentRight="true"
    android:layout_below="@+id/first_line"
    android:gravity="right"
    android:text="99999" />

<TextView  
    android:id="@+id/second_line"
    android:layout_width="wrap_content"
    android:layout_height="26dip" 
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:singleLine="true"
    android:text="Second Line" />

</RelativeLayout> 
```

![在此处输入图像描述](../Images/f317c9971c7151565de17333b2e81f42.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:47:46.277

您的 9999 文本视图和您的第一行或第二行需要在它们自己的水平布局中。通过分别声明它们，你会让事情变得更难。您可以使用相对布局原生的标签以类似的方式对齐它们，但我发现将它们按组声明更容易。IE 将您想要在水平布局中对齐的两个项目包围起来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T00:13:56.310

基本上在作为 ViewGroup btw 的 RelativeLayout 内部，放置另一个 LinearLayout（带有 id 以便您可以引用它）并使用它来设置布局。将 LinearLayout 视为 RelativeLayout 中的另一个元素。因此，作为一般主体，您可以像使用其他视图项一样使用布局。在活动内部，您甚至可以引用它们 LinearLayout linLayout = (LinearLayout)findViewById(R.id.linearLayoutId);

或将其视为

```
ViewGroup vg = (ViewGroup)findViewById(R.id.linearLayoutId). 
```

布局是一种视图。一个视图组。

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="?android:attr/listPreferredItemHeight"
 android:padding="6dip"
  android:gravity="center_vertical">
 <LinearLayout ..... android:id="@+id/linearLayoutId" android:orientation="vertical">
 <TextView  
android:id="@+id/second_line"
android:layout_width="wrap_content"
android:layout_height="26dip" 
android:layout_alignParentBottom="true"
android:layout_alignParentLeft="true"
android:singleLine="true"
android:ellipsize="marquee"
android:layout_gravity="right"
android:text="Second Line" />

 <TextView android:id="@+id/first_line"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentTop="true"
android:layout_alignParentLeft="true"
android:layout_above="@id/second_line"
android:layout_alignWithParentIfMissing="true"
android:singleLine="true"
android:ellipsize="marquee"
android:text="First line"
android:gravity="center_vertical" />
<LinearLayout>
<TextView  
android:id="@+id/number"
android:layout_width="wrap_content"
android:layout_height="fill_parent" 
android:layout_alignParentRight="true"
android:layout_toRightOf="@id/linearLayoutId"
android:text="99999" />

</RelativeLayout> 
```

然后在右侧的文本视图中进行居中。结帐 center_vertical 等。您还可以将左/右对齐和 centervertical 结合起来。

# perl - perl 系统调用无法识别路径

> ID：11532369
> 
> 赞同：4
> 
> 时间：2012-07-17T23:39:08.557
> 
> 标签：perl, backticks

我正在尝试从 perl 程序执行系统命令。

除非我提供路径，否则它工作正常，当它说“系统找不到指定的路径”时。

我使用 exec()、system() 或反引号得到相同的结果。

我将命令字符串直接作为参数得到相同的结果，或者将其放在单引号或双引号字符串中并将字符串作为参数传递。

如果我从 perl 脚本中复制一个不起作用的命令并将其粘贴到 DOS 框中，它会起作用，反之亦然。

例如，

```
print `cd`; 
```

工作正常，但是

```
print `cd \`; 
```

和

```
print `cd ..`; 
```

给我同样的错误信息。

```
$cmd = 'foo.htm'; $ret=`$cmd` 
```

启动浏览器，但是

```
$cmd = '\foo.htm'; $ret=`$cmd`; 
```

才不是。

有人对问题可能是什么有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:41:09.670

如果您向我们提供您的系统命令是什么以及您得到了什么，那将会很有帮助。很难说你的错误是什么。不过，我猜猜。。

如果您在 Windows 上，并且正在执行`\`，则必须了解反斜杠字符是 Perl 上的特殊*引号字符*。要使用真正的反斜杠，您需要将其加倍：

```
 system ("C:\\Program Files (x86)"\\Microsoft Office\\Word.exe"); 
```

或者，更好的是，使用Perl 附带的[File::Spec模块。](http://perldoc.perl.org/File/Spec.html)这将保证您制作正确的路径结构：

```
use File::Spec::Functions;

my $executable = catfile("C:", "Program Files (X86)",
      "Microsoft Office", "Word.exe");
system ($executable); 
```

当然，你应该尝试捕获`system`命令的输出，看看是否有任何错误：

```
my $error = system($executable);
if ($error) {
      if ($? == -1) {
          print "Program failed to execute\n";
      }
      else {
          my $signal = ($? & 127);
          my $exit_code = ($? >> 8);
          print "Error: Signal = $signal  Exit Code = $exit_code\n";
      }
} 
```

# java - 如果父对象不是单例，那么孩子是单例吗？

> ID：11532371
> 
> 赞同：2
> 
> 时间：2012-07-17T23:39:18.713
> 
> 标签：java, spring, singleton

我有一个不是单例的道，如果其他对象从他那里延伸出来，是否是单例？代码示例

```
<bean id="dao" class="parentDao"
        scope="prototype">

</bean>

<bean id="childrenDao"
        class="some.dao.extends.parentDao"
        parent="parentDao">
</bean> 
```

childrenDao 是单例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:49:26.253

**更新**：通过测试验证，作用域也是继承自父bean，可以被子bean覆盖。所以在这种情况下，childrendDao 将是一个原型。

这是参考文档中所述： http: [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-child-bean-definitions](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-child-bean-definitions)

> 子 bean 定义从父 bean 继承构造函数参数值、属性值和方法覆盖，并可选择添加新值。您指定的任何初始化方法、销毁方法和/或静态工厂方法设置都将覆盖相应的父设置。
> 
> 其余的设置总是取自子定义：依赖、自动装配模式、依赖检查、**单例**、作用域、惰性初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-22T17:42:19.440

```
 <bean id="dao" class="parentDao"

    scope="prototype">

 </bean>

<bean id="childrenDao"

    class="some.dao.extends.parentDao"

    parent="parentDao"> 
```

我这种情况 childrenDao 将是**单例**的。我已经对其进行了测试，因为当我看到一些令人困惑的答案时，我变得好奇。

# postgresql - NPGSQL 选择查询间歇性地不返回任何行

> ID：11532375
> 
> 赞同：2
> 
> 时间：2012-07-17T23:39:35.667
> 
> 标签：postgresql, ado.net, npgsql

因此，我正在运行一个简单的选择查询：

```
Private Function ReturnTableQuery(ByVal SQL As String) As DataTable

    Dim rs As DataTable = New DataTable
    Dim Adapter As NpgsqlDataAdapter = New NpgsqlDataAdapter

    Try
        If conn Is Nothing Then
            ConnectDatabase()
        End If
        If conn.State <> ConnectionState.Open Then
            ConnectDatabase()
        End If
        Adapter.SelectCommand = New NpgsqlCommand(SQL, conn)
        Adapter.SelectCommand.CommandTimeout = 10
        Adapter.Fill(rs)
    Catch ex As Exception
        PreserveStackTrace(ex)
        Throw ex
    End Try

    Return rs

End Function 
```

SQL 命令是：

```
Select id, application, datetimestamp, status, data, attemptcount from queue where application='reportengine' and status=4 and datetimestamp <= now()  order by datetimestamp limit 1 
```

我有时会返回 0 行。

如果我在程序中失败时在 pgAdmin 中运行完全相同的查询，它会按预期返回一行。

如果我关闭并重新打开连接，它可以工作，但我无法事先确定连接是否有任何问题。

我可以每次都重新打开连接，但我不想像我需要的那样频繁地重新创建连接。

我还遇到了间歇性错误，例如“未知的服务器响应”，我正在捕获并重新打开连接。

任何想法为什么连接如此脆弱，是否有一种廉价的方法来检查***实际***连接状态？

谢谢，布拉德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T15:46:31.120

您是否在多个线程之间共享您的连接？Npgsql 和其他数据提供者一样，不是线程安全的。我认为这是您问题的最可能原因。您应该打开一个连接，使用它然后关闭它。这是使用连接池时最具可扩展性的模式。我希望它有所帮助。

# php - 虽然循环多次获得相同的记录

> ID：11532377
> 
> 赞同：0
> 
> 时间：2012-07-17T23:39:41.577
> 
> 标签：php, while-loop

我已经花了几个小时在这上面，但我无法弄清楚。下面我的 while 循环返回相同的记录（小计：）三次。请参阅下图了解我的表结构。此外，这是在 OsCommerce 安装中，因此“tep_.....”功能是 OsCommerce 的东西。我不相信他们是问题，因为我在这里尝试了其他一些非 OsCommerce 解决方案。

```
$ot_query = tep_db_query("select * from " . TABLE_ORDERS_TOTAL . " where orders_id = '" . (int) $order_id . "'");
if (tep_db_num_rows($ot_query)) {
    while ($ot = tep_db_fetch_array($ot_query)) {
        $order_total_sql = tep_db_query("select * from " . TABLE_ORDERS_TOTAL . " where orders_id = '" . (int) $order_id . "'");
        $order_total_result = tep_db_fetch_array($order_total_sql);
        $email_order .= strip_tags($order_total_result['title']) . ' ' . strip_tags($order_total_result['text']) . "\n";
    }
} 
```

表结构...

```
orders_total_id   |   orders_id   |   title   |   text   |   value   |   class   |   sort_order 
```

三个不同的行具有相同的orders_id，但orders_total_id 不同，当然其他数据也不同。

- - 更新 - -

添加

```
echo "<pre>".print_r($ot, 1)."</pre>\n"; 
```

在**while ($ot = tep_db_fetch_array($ot_query)) {**下产生以下...

```
Array
(
    [orders_total_id] => 4149
    [orders_id] => 1280
    [title] => Sub-Total:
    [text] => $49.99
    [value] => 49.9900
    [class] => ot_subtotal
    [sort_order] => 1
)
Array
(
    [orders_total_id] => 4150
    [orders_id] => 1280
    [title] => Gift Certificates (-) :
    [text] => $37.00
    [value] => 37.0000
    [class] => ot_gv
    [sort_order] => 3
)
Array
(
    [orders_total_id] => 4151
    [orders_id] => 1280
    [title] => Total:
    [text] => $12.99
    [value] => 12.9900
    [class] => ot_total
    [sort_order] => 12
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:29:43.613

`while()`这里的问题是在你的- 设置的那一行之后`$order_total_sql`。您只使用一条记录执行 SELECT —— 它不是您`$ot`从前一个 SELECT 中存储的记录。您的输出基于错误的数据。

所以答案是......使用`$ot`而不是进行第二次选择。

```
$ot_query = tep_db_query("select * from " . TABLE_ORDERS_TOTAL . " where orders_id = '" . (int) $order_id . "'");
if (tep_db_num_rows($ot_query)) {
    while ($ot = tep_db_fetch_array($ot_query)) {
        $email_order .= strip_tags($ot['title']) . ' ' . strip_tags($ot['text']) . "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:00:12.850

您没有在主循环内更改 $order_id ，因此您的内部查询永远不会改变 - 您每次总是获取相同的记录。你不应该有类似的东西......

```
while ($ot = tep_db_fetch_array($ot_query)) {
   $order_id = $od['order_id'];
   $order_total_sql = etc...
   etc...
} 
```

当然，这并不能回答为什么您要两次运行相同的查询...您选择的构造与“indside”完全相同...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T14:26:47.150

您正在选择具有相同的记录`orders_id`：

```
$ot_query = tep_db_query("select * from " . TABLE_ORDERS_TOTAL . " where orders_id = '" . (int) $order_id . "'"); 
```

如我所见，`orders_id`是订单的 ID，`orders_total_id`是小计记录的 ID。在您的示例中，您有：

```
Sub-Total: $49.99
Gift Certificates (-) : $37.00 
```

49.99 - 37.00 = 12.99，所以：

```
Total: $12.99 
```

# iphone - XCode 4.3 单例

> ID：11532381
> 
> 赞同：3
> 
> 时间：2012-07-17T23:39:57.520
> 
> 标签：iphone, ios, singleton

所以我刚刚从 xcode 4.2 切换到 4.3，现在我创建/使用单例的旧方法不起作用。所以我对如何设置单例进行了研究，我在这里有这段代码。

GlobalLogin.h

```
@interface GlobalLogin : UIViewController
+(GlobalLogin *)sharedInstance;
@end 
```

GlobalLogin.m

```
@implementation GlobalLogin

#pragma mark -
#pragma mark Singleton Methods

+ (GlobalLogin*)sharedInstance {

static GlobalLogin * sharedInstance;
if(!sharedInstance) {
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        sharedInstance = [[super allocWithZone:nil] init];
    });
}

return sharedInstance;
}

+ (id)allocWithZone:(NSZone *)zone {    

return [self sharedInstance];
}

- (id)copyWithZone:(NSZone *)zone {
return self;    
}

#if (!__has_feature(objc_arc))

- (id)retain {  

return self;    
}

- (unsigned)retainCount {
return UINT_MAX;  //denotes an object that cannot be released
}

- (void)release {
//do nothing
}

- (id)autorelease {

return self;    
 }
#endif

#pragma mark -
#pragma mark Custom Methods 
```

所以我一切都好，但我的问题是我无法在任何地方找到如何在需要使用它的各种视图控制器中访问它的信息。因此，如果有人能指出我正确的方向，那将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:45:50.257

我不知道你为什么要调用`+[super alloc]`，它基本上应该已经被 alloc 本身调用了，但我认为你的意思是`-[super init]`，它甚至本身应该已经被调用了 by `-init`。将初始化程序更改为读取

```
static GlobalLogin * sharedInstance;
if(!sharedInstance) {
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        sharedInstance = [[self alloc] init];
    });
} 
```

然后覆盖`-init`并调用super：

```
-(id)init {
    self = [super init];
    if (self) {
       //initialization code here
    }
    return self;
} 
```

# count - 我如何知道 db2 有多少活动连接？

> ID：11532385
> 
> 赞同：1
> 
> 时间：2012-07-17T23:40:09.183
> 
> 标签：count, db2, database-connection, jmeter

我们有一个使用 d2 作为数据库的应用程序，它是在外部开发的，但我们希望从 jmeter 进行性能测试和监控活动连接数。

我已经四处寻找执行此操作的 sql，但只发现了一个大的连接报告响应。

[http://pic.dhe.ibm.com/infocenter/cicsts/v4r1/index.jsp?topic=%2Fcom.ibm.cics.ts.performance.doc%2Ftopics%2Fdfht3_stats_db2_conn_0stat.html](http://pic.dhe.ibm.com/infocenter/cicsts/v4r1/index.jsp?topic=%2Fcom.ibm.cics.ts.performance.doc%2Ftopics%2Fdfht3_stats_db2_conn_0stat.html)

还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:18:53.910

还有一个命令可以获取当前连接的列表：[LIST APPLICATIONS 命令](http://publib.boulder.ibm.com/infocenter/db2luw/v8/index.jsp?topic=/com.ibm.db2.udb.doc/core/r0001958.htm)

# php - 如何在 Tumblr 主题中包含文件

> ID：11532387
> 
> 赞同：2
> 
> 时间：2012-07-17T23:40:43.143
> 
> 标签：php, html, layout, include, tumblr

我正在为我的设计作品集设计一个新的布局，因为我也想拥有一个博客，所以我只是在 Tumblr 中制作整个东西。我想在页眉和页脚中使用 PHP 或 HTML 之类的内容，这样每当我进行更改时，我就不必编辑 15 页的页眉和页脚，但问题是 Tumblr 不允许 PHP 或 HTML 包含（我都试过了，代码就是不渲染）。我曾想过使用 iframe，但经过一些实验后，它们并不能按照我需要的方式工作。

所以我的问题是——有什么方法可以创建我的页眉和页脚文件，将它们托管在不同的站点上，然后在我的 Tumblr 布局中调用该文件？在过去的几天里，我花了几个小时在互联网上搜索，但没有提出任何建议。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T03:23:00.870

> “我想为页眉和页脚使用 PHP 或 HTML 之类的内容，这样每当我进行更改时，我就不必编辑 15 页的页眉和页脚，”</p>

*Tumblr 主题*系统只**为所有页面提供一个模板**。这就是为什么当您为*一页*编辑标题时，您将为**所有页面编辑它**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:44:36.053

出于安全原因，我不相信 Tumblr 会允许你这样做。自从我使用博客站点已经有一段时间了，但是当我使用它时，它似乎非常有限，因为它无法深入了解 HTML 或任何其他编码。

# php - 在 Aptana 3 上调试 PHP/JS 时出现“套接字连接错误”

> ID：11532388
> 
> 赞同：8
> 
> 时间：2012-07-17T23:41:09.070
> 
> 标签：php, javascript, aptana3

我在通过 Aptana Studio 使用 JS 代码调试 PHP 时遇到问题。尽管有一些人遇到了类似的问题。我仍然无法弄清楚解决方案。

**Aptana Studio 版本为 3，构建 3.1.3.2**

我在我的 Mac 上安装了 MAMP，并且能够从 Aptana 运行（而不是调试）我的 PHP 网站（我需要将服务器更改为“使用基本 URL：*http://localhost* ”才能运行我的网站）

**我在 Firefox 14.0.1 上安装了 Aptana Debugger 1.7.2 和 Firebug 1.10.0**

但是，当我尝试调试我的网站时，我得到一个窗口，上面写着：

*Aptana Firefox 扩展正在启动...请稍候。*

然后（几秒钟后）我收到错误消息：

*“启动 Firefox - 内部服务器”遇到问题。套接字连接错误。请尝试关闭并重新启动您的网络浏览器，然后再次运行“调试”*

我重新启动了我的Firefox，但没有骰子。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:02:48.523

在启动 Aptana 调试器之前删除 Firebug。Aptana 将为您安装 Aptana Debugger 和 Firebug 1.8.3。

要确保 Firebug 不会更新到 1.10，请转到“工具 > 附加组件 > Firebug 1.8.3 > 更多”，然后关闭自动更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-21T22:21:03.247

使用与 Aptana Debugger Firefox 插件不兼容的 Firebug 1.10 时出现同样的错误。

您需要做的：转到 Firefox 附加组件并禁用/卸载 Firebug 1.10，然后启用 Firebug 1.8 和 Aptana 调试器扩展。

在 JIRA 中报告：[https ://jira.appcelerator.org/browse/APSTUD-3734?focusedCommentId=208816#comment-208816](https://jira.appcelerator.org/browse/APSTUD-3734?focusedCommentId=208816#comment-208816)

# statistics - 使用高斯族分布预测 GLM 中的离散量

> ID：11532389
> 
> 赞同：1
> 
> 时间：2012-07-17T23:41:21.583
> 
> 标签：statistics, machine-learning, gaussian, glm, discrete-space

使用具有高斯族分布的广义线性模型来预测离散量是否可以（合法方法），例如通过将高斯 GLM 的输出四舍五入到最接近的整数来预测离散量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T18:05:22.150

您可以这样做，但这可能不是最好的做法。这实际上取决于您尝试建模的数据的性质。泊位回归很可能更适合您的需求。

[http://en.wikipedia.org/wiki/Poisson_regression](http://en.wikipedia.org/wiki/Poisson_regression)

但是，没有什么可以阻止您将线性模型实际拟合到整数值数据，但是在使用模型对数据进行推断时可能会遇到问题。如果您只是试图提供一个模型来预测未来的观察结果，即使理论上不成立，它也可能很好地工作。

显然，鉴于模型的性质，您最终可能会预测到完全荒谬的结果 - 例如，您的响应变量可能仅在有限范围内有意义（例如正整数），但您的模型可以允许预测任意大的值（正和负）。残差检查（正态性和相关性）等模型检查步骤可能无法给出在对连续正态分布响应进行建模时通常会看到的结果类型。

总的来说，我会说根据您的数据，您的方法可以生成有用的预测模型，但通常您应该谨慎行事。

阅读这个问题及其一些答案 - 它讨论了类似的主题[https://stats.stackexchange.com/questions/3024/why-is-poisson-regression-used-for-count-data](https://stats.stackexchange.com/questions/3024/why-is-poisson-regression-used-for-count-data)

为了覆盖更广泛的受众，您可以考虑在[http://stats.stackexchange.com上发布此问题](http://stats.stackexchange.com)

# c# - IronPython 中的自定义类型编组

> ID：11532398
> 
> 赞同：0
> 
> 时间：2012-07-17T23:42:35.103
> 
> 标签：c#, numpy, ironpython, math.net

我正在开发一个基于 Math.NET 在 C# 中运行的数值程序，该程序具有使用 IronPython 的脚本能力。我想让它工作，以便 Math.NET 数组在 C# 和 Python 之间交叉时转换为 NumPy 对象。现在有一个用于 IronPython 的 NumPy 库，我认为它大部分是兼容的。IronPython 是否有注册自定义类型编组的地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:24:08.013

这可能会有所帮助：

[http://ironpythonmathnet.codeplex.com/](http://ironpythonmathnet.codeplex.com/)

这是关于较旧的 Math.NET Iridium 而不是 Math.NET Numerics，但我猜类型编组的工作方式相同

# ajax - Rails 使用选择合并参数

> ID：11532399
> 
> 赞同：0
> 
> 时间：2012-07-17T23:42:42.987
> 
> 标签：ajax, ruby-on-rails-3, railscasts, html-select

我只是在看关于[可排序表列](http://railscasts.com/episodes/228-sortable-table-columns)的 Ryan Bates railscast 教程，在他后来的一个视频（[搜索、排序、使用 AJAX 分页](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax)）中进行了一些修改，该教程变成了 ajaxified。我认为他的解决方案效果很好，很干净而且很容易降解。

一个问题是**他使用表格**来实现排序功能，而**我想使用选择输入来代替**。

目前我设置了两个选择框，一个用于列，另一个用于搜索方向，以及一个用于启动 ajax 请求的链接（请参见下面的屏幕截图）。

![所需功能](../Images/b2bf844a407c86433ebab8a7b9f89610.png)

然而，Ryan Bates 设置了它，所以他为每个可排序的列都有一个单独的链接，而我只会有一个链接。我想知道是否有人知道一种方法来推断他所拥有的并将参数与选择框上的值合并。

这是我迄今为止所拥有的......

```
<table>
        <tr>
            <th>Sort by</th>
            <th>Order</th>
        </tr>
        <tr>
            <td>
                <%= select_tag "sort", options_for_select([["Creation Date", "created_at"], ["File Name", "name"], ["Rating", "rating_average"], ["Downloads", "downloads"]]) %>
            </td>
            <td>
                <%= select_tag "direction", options_for_select([["Descending", "desc"], ["Ascending", "asc"]]) %>
            </td>
            <td>
            <%= link_to "Sort", params.merge(:sort => params[:sort], :direction => params[:direction], :page => nil), :class => "icon" %>           
            </td>
        </tr>
    </table> 
```

如果可能的话，我不想将功能仅限于启用 JavaScript 的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:48:57.553

AFAICS，来自 select-tags 的参数将以与任何其他参数几乎相同的方式通过 - 所以合并它们应该以相同的方式工作。唯一的区别是您需要传入`params[:sort]`选择标签。看看你如何在这里传递当前选定的值：

[http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag](http://apidock.com/rails/ActionView/Helpers/FormTagHelper/select_tag)

和

[http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select](http://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/options_for_select)

这表明了一种格式：

```
<%= select_tag "sort", options_for_select([["Creation Date", "created_at"], ["File Name", "name"], ["Rating", "rating_average"], ["Downloads", "downloads"]], params[:sort]) %> 
```

# html - magento 扩展元素的 DOM 路径

> ID：11532401
> 
> 赞同：0
> 
> 时间：2012-07-17T23:42:48.077
> 
> 标签：html, magento, dom

我们正在尝试配置一个 magento 扩展来工作，这需要“DOM 路径（例如：“.product-shop .add-to-box .btn-cart”）”

由于我们使用的是 magento 模板，这些路径是不同的，我已经查看并尝试了各种组合，但我似乎无法让它们正确并希望有人可以看看。

我们需要它们用于产品页面上的可用性文本和添加到购物车文本。

代码如下，但是查看网页可能更容易（如果我错过了一些代码！）： http: [//foscam-uk.com/indoor-cameras/mjpeg/foscam-fi8916w-白色无线 ip-camera.html](http://foscam-uk.com/indoor-cameras/mjpeg/foscam-fi8916w-white-wireless-ip-camera.html)

```
<div class="product-option">
            <div class="alert-price">

    <p class="availability in-stock">Availability: <span>In stock</span></p>

    <div class="price-box">
                                                            <span class="regular-price" id="product-price-217">
                    <span class="price">£71.99</span>                </span>

        </div>

    <ul class="tier-prices product-pricing">
                    <li>

                                                            Buy 2 for <span class="price">£64.99</span> each                                    

                                    and&nbsp;<strong class="benefit">save&nbsp;10%
            </strong>

                    <span class="msrp-price-hide-message">
                            </span>

        </li>

        </ul>
                            </div>

                            <div class="product-options" id="product-options-wrapper">

    <dl>

<dt><label class="required"><em>*</em>Power Supply</label></dt>
<dd class="last">
    <div class="input-box">
        <ul id="options-21-list" class="options-list"><li><input type="radio" class="radio  validate-one-required-by-name product-custom-option" onclick="opConfig.reloadPrice()" name="options[21]" id="options_21_2" value="41"  price="0" /><span class="label"><label for="options_21_2">United Kingdom (3 Pin Plug) </label></span><script type="text/javascript">$('options_21_2').advaiceContainer = 'options-21-container';$('options_21_2').callbackFunction = 'validateOptionsCallback';</script></li><li><input type="radio" class="radio  validate-one-required-by-name product-custom-option" onclick="opConfig.reloadPrice()" name="options[21]" id="options_21_3" value="42"  price="0" /><span class="label"><label for="options_21_3">Europe (2 Pin Plug) </label></span><script type="text/javascript">$('options_21_3').advaiceContainer = 'options-21-container';$('options_21_3').callbackFunction = 'validateOptionsCallback';</script></li></ul>                                    <span id="options-21-container"></span>
                        </div>
</dd>
        </dl>

            <p class="required">* Required Fields</p>
    </div>
<script type="text/javascript">decorateGeneric($$('#product-options-wrapper dl'), ['last']);</script>
<div class="product-options-bottom">

    <div class="price-box">
                                                            <span class="regular-price" id="product-price-217_clone">
                    <span class="price">£71.99</span>                </span>

        </div>

    <div class="add-to-cart">
                <label for="qty">Qty:</label>
        <input type="text" name="qty" id="qty" maxlength="12" value="0" title="Qty" class="input-text qty" />
                <button type="button" title="Add to Basket" class="button btn-cart" onclick="productAddToCartForm.submit(this)"><span><span>Add to Basket</span></span></button>
            </div>

<ul class="add-to-links">

</ul>
</div>

                    </div> 
```

# ruby-on-rails - 如何将 ajax 合并到 coffescript/backbone.js 脚本中？

> ID：11532409
> 
> 赞同：0
> 
> 时间：2012-07-17T23:43:35.297
> 
> 标签：ruby-on-rails, ajax, backbone.js, coffeescript

我有一段 ajax 将异步加载一些数据：

```
$(document).ready ->
  $.ajax '/splunk/@orderId',
  type: 'GET'
  success: html ->
    $('#splunk_results').append html 
```

我把它放到一个coffeescript/backbone.js 文件中：

```
define dependencies, (template, ...) ->
  OrderDetailsView = Backbone.View.extend
    className: 'expanded_order'

    initialize: ->
      @orderId = @model.get('order_number')
      ... 
```

我不太熟悉咖啡脚本/主干文件的结构，所以我不确定将 ajax 放在哪里。由于它引用了@orderId，我觉得它应该放在类的内部，但它会产生一些非常丑陋的javascript（而且，它现在似乎无法正常工作）。

编辑：请注意，我在链接中使用了@orderId 变量，所以我认为这个调用需要以某种方式在 OrderDetailsView 内（否则它无法知道@orderId 是什么，对吧？）。另外，我希望能够返回任意的 HTML 块——不需要使用结构化模型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:59:08.970

您真的不需要直接进行 ajax 调用。创建一个集合并使用 fetch。Backbone 擅长为您抽象 ajax 调用。

就像是：

```
SplunkCollection = Backbone.Collection.extend 
  url: 'splunk/'

splunkcollection = new SplunkCollection
splunkcollection.fetch()
... 
```

或者只是设置模型的 URL 并获取它：

```
@model.url = '/something' //set this somewhere in your model class
@model.fetch() 
```

[http://documentcloud.github.com/backbone/#Model-fetch](http://documentcloud.github.com/backbone/#Model-fetch)
[http://documentcloud.github.com/backbone/#Collection-fetch](http://documentcloud.github.com/backbone/#Collection-fetch)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T21:18:19.297

在我的情况下，因为我不需要请求的特定结构，所以 AJAX 调用可以放在文件的顶部（它根本不会干扰主干代码）。

# oop - Fortran OOP 循环依赖处理、接口

> ID：11532416
> 
> 赞同：1
> 
> 时间：2012-07-17T23:44:13.097
> 
> 标签：oop, constructor, module, fortran, circular-dependency

编译器：ifort 版本 12.1.5

我正在编写一些 Fortran 代码，我想利用一些 F2003 OOP 功能，但我遇到了一些绊脚石。简化示例，我希望有两个派生类型 A 和 B，每个类型都有一个指向另一个实例的指针。在 Fortran 中，明确禁止模块之间的循环依赖，因此这两种类型必须驻留在同一个模块中。这编译：

```
module testModule
implicit none

type A
 type(B),pointer :: b1
end type A

type B
 type(A),pointer :: a1
end type B

contains
[some possibly type-bound procedures]
end module 
```

现在，我想为这些类型实现一些构造函数，并尝试以下代码：

```
module testModule
implicit none

type A
 type(B),pointer :: b1
end type A

interface A
 module procedure A_ctor
end interface

type B
 type(A),pointer :: a1
end type B

interface B
 module procedure B_ctor
end interface

contains
function A_ctor()
 type(A),target :: A_ctor
end function
function B_ctor()
 type(B),target :: B_ctor
end function
end module 
```

现在，这不编译，抛出一个错误

> 这不是派生类型名称。[乙]

在上面的第 5 行。为什么添加接口会报错？如何在 Fortran 中处理派生类型中的循环依赖关系，就像在 C++ 中使用前向类声明一样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:46:59.843

您的代码是正确的 Fortran 2003。您正在以正确的方式处理循环类型依赖项。编译器出错了。

我已经经历并看到其他人报告了 ifort 12.1.5 和程序员重写结构构造函数的问题（其中有一个具有派生类型结果的函数的通用接口，该接口与派生类型具有相同的名称 - 正如你这里有）。这种情况的解决方法是将构造函数的泛型接口（和后续引用）重命名为与派生类型不同的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:47:30.140

尽管 2003 听起来很久以前，但在大多数编译器中，fortran 2003 的实现仍然是一个持续的过程。在处理新功能时很可能仍然存在遗漏或错误。

如果这是一个已知问题，请与编译器的支持团队联系，如果是，是否有更新的版本可以解决此问题。

作为支持 - 虽然不是决定性的 - 证明此代码符合标准的证据，gfortran 编译它没有错误（只有两个关于不为函数设置返回值的警告）。

# android - 日志猫似乎不适合我

> ID：11532418
> 
> 赞同：1
> 
> 时间：2012-07-17T23:44:22.417
> 
> 标签：android

我已经导入了库。我的屏幕上没有看到任何消息。

```
final String temp = "temp";
int counter =0;
Log.v(temp, "counter is " +counter);
counter =20;
Log.v(temp," counter is " +counter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:53:01.843

一些东西：

1) 在您的 android 清单中设置 debuggable="true"。

首先关闭并打开eclipse。然后在调试模式下运行。

我通常用

```
 Log.debug("classname", "counter is "+counter); 
```

2）尝试在调试模式下运行，看看你得到了什么。

也不需要导入另一个记录器。只需使用 Android 自带的那个。

```
 import android.util.Log; 
```

另一个有用的事情（对于这个其他问题）是打开窗口并转到android sdk的安装目录。从那里你可以运行 adb kill-server 和 adb start-server 等。adb 还有其他有用的东西，比如 adb devices 告诉你调试器是否看到设备。所以把 adb 放在你的路径中。我认为它在bin目录或android sdk下的东西。

# excel - 如何在Excel中对动态范围进行平均？（VBA？）

> ID：11532422
> 
> 赞同：1
> 
> 时间：2012-07-17T23:45:10.097
> 
> 标签：excel, excel-2007, excel-formula, excel-2010

我在 Excel 中有一个列表，基本上有两列：`Date`和`Value`.

```
Col A     |Col B |Col C|Col D     |Col E
----------+------+-----+----------+-----
Date      |Value |     |Date-range|
2012/01/01|    10|     |2012/01/01| 8.33
2012/01/05|     5|     |2012/01/07|
2012/01/07|    10|     |          |
2012/01/13|     1|     |          | 
```

我想返回两个日期之间的平均值，我将在两个单独的单元格中设置。那可能吗？

因此，假设在单元格 D1 中输入“2012/01/01”，在单元格 D2 中输入“2012/01/07”。它应该返回该日期范围内的平均值，在本例中为 (10+5+10)/3 = 8.33

我能够返回`C100`两个日期的单元格（例如），但我不知道如何将它们包含在平均值范围内。还是有更聪明的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:25:16.360

由于您拥有 Excel 2007，因此您可以使用`AVERAGEIFS`. 对于您的情况

`=AVERAGEIFS(B1:B10,A1:A10,">="&D1,A1:A10,"<="&D2)`

其中 D1 是您的最短日期，D2 是您的最长日期，A1:B10 包含您的日期，值范围将返回 8.33

# asp.net - 字符串处理问题

> ID：11532425
> 
> 赞同：0
> 
> 时间：2012-07-17T23:45:17.300
> 
> 标签：asp.net

在我的客户端-服务器系统上，用户可以更改**变量**的值，例如下拉框中的“系统电源”（“ON”、“OFF”、“STANDBY”）。

单击索引时，会向服务器传递一条消息以更改在这种情况下捕获“系统电源”状态的变量。

目前，我的服务器端代码被实现为尝试将客户端消息中的值转换为 Int64。

以下是我对解决方案的想法：

1 - 我的客户端代码中的硬代码逻辑发送正确的 Int64 值。示例：发送消息（系统电源，1）而不是消息（系统电源，关闭）。

2 - 从客户端读取一个 XML 文件，该文件将**Variable**的状态 (ON, OFF) 映射到 Int64 值

3 - 修复服务器端以正确运行。

由于缺乏灵活性，我认为#1 是一个糟糕的选择。#3 是正确的选择，但我的日程安排会花很长时间。

要实现 #2，创建这样的 XML 文件是否有意义：

```
<root>
  <Variables>
    <System Power>
      <element name="ON">1</element>
      <element name="OFF">0</element>
... 
```

然后，在我的客户端代码中，我可以在 XML 文件中执行查找以确定正确的消息（系统电源，0）。

请指教。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:48:32.103

我想说通过[枚举](http://msdn.microsoft.com/en-us/library/sbbt4032%28v=vs.80%29.aspx)实现的#1将是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:00:52.230

这可以在下拉菜单中处理。没有指定客户端类型，但是例如在html中：

```
<select>
  <option value="0">OFF</option>
  <option value="1">ON</option>
  <option value="2">STANDBY</option>
</select> 
```

对于 Windows 下拉菜单也可以这样做。

# c# - jQuery datepicker 在 Modal MVC 3 中不起作用

> ID：11532426
> 
> 赞同：0
> 
> 时间：2012-07-17T23:45:19.220
> 
> 标签：c#, asp.net-mvc-3, jquery-ui-datepicker

DatePicker 在项目周围工作，但不能在模式中工作。模态是部分视图。

这在编辑器模板中。

日期时间.cshtml

```
@model System.DateTime?
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "editor-field" })

    <script type="text/javascript">
        if (typeof (jQuery) == 'function') {
            $(function () {
                if ($.datepicker) {
                    $('#@this.ViewData.TemplateInfo.GetFullHtmlFieldId("")')
                    .datepicker();
                }
            });
        }
    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:04:44.120

在您的编辑器模板上尝试此代码

```
@model System.DateTime?
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue, new { @class = "editor-field picker" }) 
```

并在共享视图上调用这样的脚本

```
 <script type="text/javascript">
        if (typeof (jQuery) == 'function') {
            $(function () {
                if ($.datepicker) {
                    $('input.picker')
                    .datepicker();
                }
            });
        }
    </script> 
```

# c# - C# Linq 从一对多中选择，但如果在多一个中为假，则不返回

> ID：11532430
> 
> 赞同：0
> 
> 时间：2012-07-17T23:45:43.683
> 
> 标签：c#, database, linq

抱歉问我尝试搜索类似的查询，但没有结果，或者我不知道要找什么，所以这里是问题：

两个表 User_Table 主键在 Message_Tabel 作为外键 每条消息都有一个代码，是一个 isReplyed (true, false)

现在我如何检索具有特定代码且没有回复的消息的用户

例子：

```
UserTabel                            
==========            
ID 1                 
ID 2                
ID 3                 
ID 4                 
ID 5                
ID 6                
ID 7                 
ID 7                 

                Message_Tabel             
           =============================================
            ID 1       Code 22X      Replied False   MID 1
            ID 1       Code 20X      Replied False   MID 2
            ID 1       Code 22X      Replied true    MID 3
            ID 1       Code 22X      Replied False   MID 4
            ID 2       Code 22X      Replied False   MID 5
            ID 3       Code 22X      Replied true    MID 6
            ID 2       Code 22X      Replied False   MID 7
            ID 2       Code 22X      Replied False   MID 8 
```

使用对所有用户的查询，代码为 22X 的消息被检索但没有回复：按用户 ID 分组的消息将检索 ID 为 2 而不是 ID 1 或 3 的用户的所有消息，因为已经用该代码回复了一个用户。

我想要它，所以如果任何用户都可以使用特定代码发送尽可能多的消息，但我将使用该代码回复每条消息并忽略其余消息

我希望这一切都有意义

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:24:38.797

像这样的东西可能会奏效（未经测试）：

```
 var users = context.Messages
            .Where(m => m.Code == "22X")
            .GroupBy(m => m.User)
            .Where(m => m.All(x => x.Replied == false))
            .Select(p => p.Key); 
```

这应该会返回满足您期望的用户。如果您愿意，您也可以更改查询以返回消息，以便您可以选择要回复的消息。

# javascript - 谷歌浏览器日期选择器事件

> ID：11532433
> 
> 赞同：3
> 
> 时间：2012-07-17T23:46:07.137
> 
> 标签：javascript, google-chrome

当用户从 Google Chrome 中的本机日期选择器控件中选择新日期时，我需要收到通知。

您需要在 Google Chrome 20+ 上才能查看本机日期选择器控件。

一些用户建议在 iOS5`onBlur`中触发该事件，但 Chrome 似乎并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T07:22:07.527

Chrome 24 会在日期更改时触发 change 事件，即使焦点尚未从文本框中移动。

即使用户手动更改日期，更改事件似乎也会触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T15:49:07.070

我在 Windows 机器上运行 Chrome 20.0.1132.57，该`oninput`事件似乎对此非常有效。我注意到 Jared 评论说此事件在 期间触发`window.onload`，但我无法重现该事件（希望我没有遗漏一些明显的东西）。

为了测试它，我只是设置了一个带有`form`元素和`input`类型的页面，`date`并为此编写了一个内联事件处理程序`oninput`：

```
<form>
  <input type="date" id="theDate" oninput="alert('oninput event fired');" />
</form> 
```

每次我单击日期、今天按钮或清除按钮（并且*仅*当日期随此单击而更改）时，我都会收到事件已触发的警报。使用日期选择器顶部的任何控件更改当前月份时，不会触发此事件。

[这是关于JS Bin](http://jsbin.com/ihisis/2/edit)的工作演示。希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-29T14:07:50.737

好吧，我尝试只使用`addEventListner`：

```
window.onload = function(){
    var d = document.getElementById('date');

    d.addEventListener('input', function(e){
        alert(d.value);
    });
};​ 
```

它就是这样工作的。所以也许你使用了太多相互冲突的函数

# php - 创建许多 Clo udWatch 警报：批处理？

> ID：11532437
> 
> 赞同：1
> 
> 时间：2012-07-17T23:46:40.950
> 
> 标签：php, amazon-web-services, amazon-cloudwatch

有没有人有同时创建多个 CloudWatch 警报的示例代码？

目前我正在这样做：

```
$cloudWatch->put_metric_alarm(...);
$cloudWatch->put_metric_alarm(...);
$cloudWatch->put_metric_alarm(...);
// etc. 
```

在通话之间我正在处理错误，如果有的话。

我注意到 AWS SDK for PHP 中有一些批处理代码，我想知道是否有一种方便的方法可以在一个请求中创建所有这些或在并行 cURL 请求中创建所有警报。

我看到，[`set_alarm_state()`](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonCloudWatch/put_metric_alarm)据我所知，这是批量请求的“旧方法” `returnCurlHandle`。`$opt`

# php - Couchbase PHP SDK：如何检测 couchbase 连接失败？

> ID：11532444
> 
> 赞同：3
> 
> 时间：2012-07-17T23:47:49.890
> 
> 标签：php, couchbase

我正在使用 Couchbase PHP Extension 连接到 Couchbase 并实现一个功能，该功能可以检测 Couchbase 是否没有响应并故障转移到 MySQL。但是，我不知道如何检测 Couchbase 是否已关闭，我在他们的文档中找不到任何内容。

以下是我的代码：

```
$cb = new Couchbase("$host:$port", $admin, $password, $bucket);
if (!$cb) {
    throw Exception('Cannot connect to couchbase!');        
} 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-07T16:25:22.397

我遇到了同样的问题，并以这种方式解决了它：

```
$cb = @new Couchbase($host.":".$port,$username,$password,$bucket,$persistent);
if($cb->getResultCode() != COUCHBASE_SUCCESS){ 
    throw Exception('Cannot connect to couchbase!'); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:55:24.203

我建议将错误计数到一个阈值，然后考虑连接“关闭”并尝试重建它。

请注意，难以确定“关闭”的部分原因是，根据设计，Couchbase 很少会完全失败，即使确实发生了失败的节点，也会自动或手动触发故障转移，使该连接对象重新联机。在这方面，它与与其他数据库的连接不同。

# c# - 如何执行随机扩展？

> ID：11532448
> 
> 赞同：1
> 
> 时间：2012-07-17T23:48:05.167
> 
> 标签：c#, algorithm, random

我试图实现 Random 类的扩展。

但是这个功能会有一个特点，你可以得到一个数字跟随步骤。例如：

```
RandNumb(double min, double max, double step)
RandNumb(1, 10, 2) = 6
RandNumb(100, 1000, 500) = 1000
RandNumb(0.001, 0.1, 0.01) = 0.15 
```

我的第一个想法是获取一个从 min 到 max 的随机数，并比较这是否是一个有效数字（因为 step）。如果没有，请再次生成另一个号码。

但我敢肯定，这不是一个好的表现。你怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T23:50:46.393

只需从`min / step`to生成数字`max / step`并将生成的结果乘以 to `step`。在这种情况下，每个结果都是“有效的”。

你的解决方案有什么不好 - 是有机会永远不会得到按步划分的“有效”数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:30:30.903

根据问题的定义，“RandNumb (1, 10, 2)”的有效值似乎是：1、3、5、7、9。

在这种情况下。代码如下所示：

```
class Program
{
    static void Main(string[] args)
    {
        Random rd = new Random();
        for (int i = 0; i < 10; i++)
        {
            Console.WriteLine("RandNumb(rd, 1, 10, 2)=" + RandNumb(rd, 1, 10, 2));
            Console.WriteLine("RandNumb(rd, 100, 1000, 500)=" + RandNumb(rd, 100, 1000, 500));
            Console.WriteLine("RandNumb(rd, 0.001, 0.1, 0.01) =" + RandNumb(rd, 0.001, 0.1, 0.01)); 
        }
        Console.ReadLine();
    }

    public static double RandNumb(Random rd, double min, double max, double step)
    {
        int range = (int)Math.Floor((max - min) / step);
        int stepCount = rd.Next(0, range + 1);
        return min + (step * stepCount);
    }
} 
```

结果如下所示：

```
RandNumb(rd, 1, 10, 2)=3
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,071
RandNumb(rd, 1, 10, 2)=5
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,041
RandNumb(rd, 1, 10, 2)=3
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,081
RandNumb(rd, 1, 10, 2)=9
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,011
RandNumb(rd, 1, 10, 2)=7
RandNumb(rd, 100, 1000, 500)=100
RandNumb(rd, 0.001, 0.1, 0.01) =0,091
RandNumb(rd, 1, 10, 2)=5
RandNumb(rd, 100, 1000, 500)=100
RandNumb(rd, 0.001, 0.1, 0.01) =0,001
RandNumb(rd, 1, 10, 2)=1
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,071
RandNumb(rd, 1, 10, 2)=1
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,061
RandNumb(rd, 1, 10, 2)=5
RandNumb(rd, 100, 1000, 500)=100
RandNumb(rd, 0.001, 0.1, 0.01) =0,041
RandNumb(rd, 1, 10, 2)=3
RandNumb(rd, 100, 1000, 500)=600
RandNumb(rd, 0.001, 0.1, 0.01) =0,021 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T00:44:55.997

作为解决方案如何：

```
public static class RandomExtensions
{
    public static double RandNumb(
        this Random @this,
        double minimum, double maximum, double step)
    {
        var lowest = System.Math.Ceiling(minimum / step) * step;
        var highest = System.Math.Floor(maximum / step) * step;
        var numbers = (int)(1 + (highest - lowest) / step);
        var index = @this.Next(0, (int)numbers);
        return lowest + index * step;
    }
} 
```

我在 LINQPad 中测试了这段代码，它似乎工作正常。

```
var rnd = new Random();

rnd.RandNumb(1, 10, 2).Dump();
rnd.RandNumb(100, 1000, 500).Dump();
rnd.RandNumb(0.001, 0.1, 0.01).Dump();
rnd.RandNumb(7, 15, 3).Dump(); 
```

这是我的输出示例：

```
4
1000
0.08
12 
```

# javascript - 如何制作类似 Paypal 的星巴克小部件？

> ID：11532458
> 
> 赞同：0
> 
> 时间：2012-07-17T23:49:15.157
> 
> 标签：javascript, forms, webforms, widget, paypal

我想制作一个网站小部件，可以让访问者向开发者的星巴克卡捐款（类似于 PayPal 捐款小部件）。我最初的幼稚实现是将用户带到星巴克的 eGift 页面，然后使用 JavaScript 自动填充大部分表单。但是，这将被视为跨站点脚本。

我是否有一种可接受的方式将数据发送到 Starbucks eGift 表单并完成我想要的？还是有其他可行的方法？一位同事提到了 PayPal API，但我不确定它是否可以用来重新加载星巴克卡。

**要求：**

*   捐赠者应该能够单击小部件，输入他们的姓名/电子邮件地址（可选？）、PayPal 或帐户信息，以及他们想要捐赠的金额，然后卡将被重新加载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T13:00:39.910

您可以使用以下代码执行此操作：

```
<div id="starbucks_container">
    <form action="https://www.starbucks.com/card/reload/one-time" class="AjaxForm required_form payment-method region size2of3" id="OneTimeReload" method="post" novalidate="novalidate">
        <input class="field_large numbers card-number required numeric" id="Card_Number" maxlength="16" name="Card.Number" title="Card Number | This 15- or 16-digit number is on the front of your card. Please enter it without spaces." type="hidden" value="6069262396927591">
        <label for="Reload_Amount">Reload Amount</label>
        <br/>
        <span class="numbers">$</span>
        <input class="field_xxsmall align_right numbers" data-validation-max="100" data-validation-min="10" id="Reload_Amount" maxlength="3" name="Reload.Amount" title="Please enter an amount." type="text" value="10">
        <input id="paymentOptionHidden" name="paymentOptionHidden" type="hidden" value="CreditCard">
        <br/>
        <label for="card-type-paypal">
            <input class="credit-card radio" id="card-type-paypal" name="paymentOption" type="radio" value="PayPal">
            PayPal
        </label>
        <br/>
        <label for="card-type-options">
            <input checked="checked" class="credit-card radio" id="card-type-options" name="paymentOption" type="radio" value="CreditCard">
            Credit/Debit Card
        </label>
        <input type="hidden" name="step" value="1">
        <br/>
        <button type="submit">Reload Card</button>
    </form>
</div> 
```

只需将卡号替换为您自己的卡号即可。

此外，我为此制作了一个 Wordpress 小部件：[http ://wordpress.org/extend/plugins/starbucks-reload/](http://wordpress.org/extend/plugins/starbucks-reload/)

**编辑 - 网址从[https://www.starbucks.com/card/manage/guest-reload](https://www.starbucks.com/card/manage/guest-reload)更改为[https://www.starbucks.com/card/reload/one-time](https://www.starbucks.com/card/reload/one-time)**

# facebook - 单击 Facebook 登录按钮时的事件

> ID：11532459
> 
> 赞同：0
> 
> 时间：2012-07-17T23:49:25.590
> 
> 标签：facebook

单击 Facebook 登录按钮时是否会触发任何事件，但在其他时间不会触发？

我希望用户可以选择退出我的网站，即使在登录 Facebook 时也是如此。我在他们的用户数据中设置了一个“自动登录”字段。

当 AutoLogin 为 False 并单击 Facebook 登录按钮时，我希望用户重新登录。

在相关的说明中，我注意到当用户登录 FB 并单击 Facebook 登录按钮时，会短暂出现一个 Facebook 弹出窗口。有什么办法可以避免这个短暂的弹出？再次，解雇将采取适当行动的Javascipt？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-14T15:57:29.667

我发现这个对“login_event”的订阅只有在身份验证过程顺利进行后才会回来。因此，如果您尝试执行诸如显示带有“等待 Facebook”的加载模式以显示在慢速 2G 连接上的操作，那么这并不能真正帮助您。正如 Dave 所提到的，由于 Facebook 在 iframe 中显示它的按钮，因此您无法为其创建事件侦听器。

但是在文档之外，您会发现 Facebook 正在广泛使用窗口消息总线来与它的 iframe 对话。

```
window.addEventListener("message", receiveMessage, false);

function receiveMessage(event){

    if(event.data.indexOf('_FB_') === 0){// these are facebook messages sent from it's iframes
        if(event.data.indexOf('proxy_ready') > 0){
            console.log('facebook ready');
        }

    }
} 
```

在登录过程中通过控制台记录所有带有时间戳的消息并找出要关闭的消息会很有帮助。例子：

```
2016-12-14 15:13:38.024 app.js:162 FB.init
2016-12-14 15:13:39.257 app.js:1366 _FB_f120116a3bc6178data&logged_in=false&xd_action=proxy_ready
2016-12-14 15:13:43.473 app.js:1366 _FB_f120116a3bc6178type=resize&cb=f291741ffe877f&width=300&height=39
2016-12-14 15:13:47.933 app.js:1366 _FB_f120116a3bc6178xd_action=plugin_ready&name=f66bbdc3fb088&cb=f291741ffe877f&domain=xxx.xxx&origin=https%3A%2F%2Fxxx.xxx%2Ff120116a3bc6178&relation=parent.parent
2016-12-14 15:13:47.934 app.js:1366 _FB_f120116a3bc6178type=resize&width=164&height=39&reposition=false&cb=f291741ffe877f&domain=xxx.xxx&origin=https%3A%2F%2Fxxx.xxx%2Ff120116a3bc6178&relation=parent.parent

clicked button IN FB popup here:
2016-12-14 15:14:24.571 app.js:1366 _FB_f120116a3bc6178type=resize&cb=f291741ffe877f&width=300&height=39
2016-12-14 15:14:29.053 app.js:1366 _FB_f120116a3bc6178xd_action=plugin_ready&name=f66bbdc3fb088&cb=f291741ffe877f&domain=xxx.xxx&origin=https%3A%2F%2Fxxx.xxx%2Ff120116a3bc6178&relation=parent.parent
2016-12-14 15:14:29.055 app.js:1366 _FB_f120116a3bc6178type=refreshLoginStatus&cb=f291741ffe877f&domain=xxx.xxx&origin=https%3A%2F%2Fxxx.xxx%2Ff120116a3bc6178&relation=parent.parent
2016-12-14 15:14:29.071 app.js:1366 _FB_f120116a3bc6178type=resize&width=164&height=39&reposition=false&cb=f291741ffe877f&domain=xxx.xxx&origin=https%3A%2F%2Fxxx.xxx%2Ff120116a3bc6178&relation=parent.parent
2016-12-14 15:14:30.188 app.js:1366 _FB_f120116a3bc6178cb=fbcdc5c882b3bc&domain=xxx.xxx&origin=https%3A%2F%2Fxxx.xxx%2Ff120116a3bc6178&relation=parent&code=AQCl6y6TvwzareonnVCLEFWVglwDApABbs3ATKnbd6iLSZbKZ...mwZDZD&expires_in=6331&base_domain=xxx.xxx&https=1
2016-12-14 15:14:30.193 app.js:171 login_event
2016-12-14 15:14:30.193 app.js:172 connected
2016-12-14 15:14:30.193 app.js:173 Object {authResponse: Object, status: "connected"}
2016-12-14 15:14:30.199 app.js:246 FB.getLoginStatus
2016-12-14 15:14:30.201 app.js:229 connected to FB app
2016-12-14 15:14:30.202 app.js:253 FB.api 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-12T16:54:13.960

您可以订阅登录事件。

```
FB.Event.subscribe('auth.login', function(response)
{
  console.log("login_event");
  console.log(response.status);
  console.log(response);
}
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T05:29:42.133

您可能已经看到了这一点，但请看一下您可以收听的[这些事件。](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# javascript - 跳转到 UIWebview 中下一个突出显示的搜索字符串

> ID：11532462
> 
> 赞同：2
> 
> 时间：2012-07-17T23:49:34.567
> 
> 标签：javascript, uiwebview, uisearchbar

我按照[本网站上](http://zaldzbugz.posterous.com/how-to-search-a-string-inside-uiwebview)的教程使用搜索委托在 uiwebview 上查找突出显示的字符串。我的问题是，我怎样才能让它跳到第一个突出显示的项目，然后是下一个突出显示的项目。

谢谢。

# jquery - 使用 bvalidator 验证下拉选项列表

> ID：11532464
> 
> 赞同：0
> 
> 时间：2012-07-17T23:49:56.040
> 
> 标签：jquery, forms, validation

我在我的本地网站上使用 bValidator 插件，我被表单验证的最后一部分困住了。

我正在尝试验证下拉列表选项，但不知何故它不起作用。可能有一种解决方法可以使其正常工作。我将衷心感谢您的帮助。

[http://jsfiddle.net/2CLZj/](http://jsfiddle.net/2CLZj/)

* * *

```
<br /><br /><br />

<input type="text" data-bvalidator="required" data-bvalidator-msg="message" name="some" id="some" />

<br />

<br />

<select id="branche_select" data-bvalidator="required">
 <option value="selecteer">Select your branche</option>
 <option value="Marketing">Branche A</option>
 <option value="Marketing">Branche B</option>

</select>

<input type="submit" value="submit" name="submit"/> 
```

* * *

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:56:09.330

将默认选项设置`value`为`""`：

```
<select id="branche_select" data-bvalidator="required">
    <option value="">Select your branche</option>
    <option value="Marketing">Branche A</option>
    <option value="Marketing">Branche B</option>
</select> 
```

**示例：http:** [//jsfiddle.net/rEF6h/](http://jsfiddle.net/rEF6h/)

# security - HackerGuardian - Comodo

> ID：11532468
> 
> 赞同：0
> 
> 时间：2012-07-17T23:50:35.973
> 
> 标签：security, credit-card

一位客户来找我说她收到了 Comodo Group 的电子邮件，说他们的 HacketrGuardian PCI 扫描帐户将在 15 天后到期。该网站是很久以前由其他人完成的。

我检查了客户的网站，它有一个部分可以输入您的信用卡详细信息，该部分受 Comodo 的 Instant SSL 保护。我登录了hackerguardian.com，它说hackerguardian 帐户已于6 个月前过期，并且没有报告/历史记录。

我做了一些研究，但仍然对这个hackerguardian感到困惑，有人可以帮助我进一步理解/了解这一点。

1）什么样的网站需要它？2）我如何确定该网站之前是否使用过它？3) 如何更新？4）我需要在网站上实现任何代码吗？还是网站外的东西？（看起来像场外扫描）

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:16:31.847

这与电子商务世界中的PCI（*支付卡行业）合规性有关。*
一个称为 PCI 委员会的组织由五家主要信用卡公司组成。他们提出了一套安全标准，以确保在处理信用卡时始终保持一致性。

为了符合 PCI，网络安全扫描或 PCI 扫描对于收集、处理或传输支付卡帐户信息的所有商家和服务提供商都是强制性的。
如果您是商家或服务提供商并接受信用卡，则必须每年至少确认一次 PCI 合规性。

**TLDR：**它基本上可以通过在您的网站上执行远程安全测试来确保您的企业和客户在在线购买商品时保持安全。

由于它是 COMODO 在云中（远程）完成的付费服务，因此无需实现任何代码。

# ruby-on-rails - 有人可以向我解释电子邮件密码恢复链接和一次性登录或注册链接如何工作吗？

> ID：11532469
> 
> 赞同：1
> 
> 时间：2012-07-17T23:50:35.063
> 
> 标签：ruby-on-rails, devise, cryptography, password-recovery

我一直在 Google 上寻找有关这些系统实际工作方式的一些答案。我非常松散地知道它们涉及使用系统能够识别的某种独特令牌，但我有兴趣了解更多关于这些东西的信息。

作为后续，我需要知道的原因是因为我正在使用 Devise 构建一个 Ruby on Rails 应用程序进行用户身份验证，并且可能需要能够提供只能用于注册一次的链接，并自动将用户注册为特定类型的用户（即出于特定目的邀请人们进入系统）。尽管如此，我还是对理解感兴趣，如果有人能指出一些全面、相关和有用的东西，我会喜欢一些阅读材料。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:36:52.187

例如，从这里开始。

[http://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)
[http://railscasts.com/episodes/250-authentication-from-scratch-revised](http://railscasts.com/episodes/250-authentication-from-scratch-revised)
[http://railscasts.com/?tag_id=25](http://railscasts.com/?tag_id=25)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T00:58:44.010

这里没有太多额外的答案，但我想我弄清楚了这个过程是如何工作的。通常，您真正需要做的就是生成一个长度为 n 的随机令牌。该令牌存储在与用户相关联的数据库中。然后，您向用户发送指向任何 url 或操作处理确认/邀请或其他任何内容的链接，并且您生成的令牌作为 get 变量在 URL 中传递。然后，当用户单击链接时，您的应用程序会从用户那里收到此令牌，并且您只知道他们拥有该特定令牌，这足以将他们识别为他们所说的身份。

# c# - 使用 IEnumerable<> 的 EF 代码优先递归查询？

> ID：11532473
> 
> 赞同：2
> 
> 时间：2012-07-17T23:50:58.100
> 
> 标签：c#, entity-framework, ef-code-first

我有一个“菜单”表，其中有一个 ParentId 列。我的 LINQ 查询就在下面。

```
 public IEnumerable<MenuTableObject> GetMenus ( int? parentId ) {
        var result = ( from m in _db.Menus
                       join ml in _db.MenuLanguages on m.Id equals ml.MenuId
                       join l in _db.Languages on ml.LanguageId equals l.Id
                       where l.Code == Thread.CurrentThread.CurrentCulture.Name
                             && m.ParentId == ( parentId.HasValue ? parentId : null )
                       select new MenuTableObject {
                           Action = m.Action,
                           Controller = m.Controller,
                           Id = m.Id,
                           Title = ml.Title,
                           SubMenus = this.GetMenus( m.Id )
                       } );

        return result;
    } 
```

这是 MenuTableObject 类。

```
public class MenuTableObject {
    public int Id { get; set; }
    public string Title { get; set; }
    public string Controller { get; set; }
    public string Action { get; set; }
    public IEnumerable<MenuTableObject> SubMenus { get; set; }
} 
```

这是我在下面得到的例外。

```
LINQ to Entities does not recognize the method 'System.Collections.Generic.IEnumerable`1[IstanbulHairCenter.Data.Service.MenuTableObject] GetMenus(System.Nullable`1[System.Int32])' method, and this method cannot be translated into a store expression. 
```

我该怎么做才能克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:18:53.547

根据经验，您不能在任何 EF`IQueryable`查询中使用自定义函数（可能存在扩展点，但不确定）。

每个`IQueryable`查询都是一个[表达式树](http://msdn.microsoft.com/en-us/library/bb397951.aspx)，而不是一个函数（请注意，`IQueryable` `Where()`需要一个`Expression<Func<T, bool>>`而不是`Func<T, bool>`）。树被具体实现（在本例中为实体框架）分析并映射为 SQL 字符串。

每个映射必须由实现者显式创建。EF 告诉您它不知道如何处理您的`GetMenus()`方法（即来自`GetMenus()`-> SQL 的映射不存在）。

解决方法是从数据库中提取所有相关数据，然后使用 LINQ to Object 而不是 LINQ to Entities 运行查询。

递归不是真正的原因。您需要在调用第一个递归之前的某个时间在您的实体上使用`ToList()`（或者`AsEnumerable()`- 虽然不确定）`GetMenus()`。或者您可以编写一个 StoredProc 或其他东西并将其从上下文或`DbSet`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:19:49.063

您必须遍历 LINQ 查询之外的结果以进行填充`SubMenus`，因为 EF 无法将`GetMenus`方法转换为 SQL。

```
public IEnumerable<MenuTableObject> GetMenus ( int? parentId ) {
    var result = ( from m in _db.Menus
                   join ml in _db.MenuLanguages on m.Id equals ml.MenuId
                   join l in _db.Languages on ml.LanguageId equals l.Id
                   where l.Code == Thread.CurrentThread.CurrentCulture.Name
                         && m.ParentId == ( parentId.HasValue ? parentId : null )
                   select new MenuTableObject {
                       Action = m.Action,
                       Controller = m.Controller,
                       Id = m.Id,
                       Title = ml.Title
                   } ).ToList();

    foreach(var menu in result)
    {
        menu.SubMenus = this.GetMenus(menu.Id);
    }

    return result;
} 
```

# ios - iOS App Store 提交：缺少图标 (Cordova)

> ID：11532485
> 
> 赞同：3
> 
> 时间：2012-07-17T23:53:00.783
> 
> 标签：ios, cordova, app-store

我正在制作一个 Cordova (PhoneGap) 应用程序并将其提交到 App Store。但是，我收到了一封包含以下消息的电子邮件：

```
Invalid Icon Path - No icon found at the path referenced under key "CFBundleIcons": icon-72@2x.png 
```

现在，对于任何 iOS 编程都非常陌生，并且在 Cordova 中制作了应用程序而不是传统方法，我无法真正弄清楚这一点。我不确定 CFBundleIcons 是什么。这是我的 .plist 文件的样子：

![列表](../Images/317055806792700078f099875da50b79.png)

如果有人可以就如何解决这个问题给我任何建议，那就太好了！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T22:52:35.783

CodaFi 的回答是正确的：

> 右键单击 plist 并选择“显示原始键/值”。然后找到并编辑有问题的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T15:11:34.737

实际上，默认的 Cordova 项目在 plist 文件中包含对图标名称的引用，而不是实际图片。您必须将图片拖放到资源/图标中

# java - 如何配置 Spring-WS 以使用 JAXB Marshaller？

> ID：11532493
> 
> 赞同：7
> 
> 时间：2012-07-17T23:53:56.877
> 
> 标签：java, spring, jaxb, spring-ws, endpoint

到目前为止，感谢您对此的帮助，我正在更新问题，因为我没有显示我需要的所有内容，并显示了建议的更改。肥皂输出仍然不是我想要的。

**servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:sws="http://www.springframework.org/schema/web-services"
    xmlns:oxm="http://www.springframework.org/schema/oxm"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
                        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/web-services
                        http://www.springframework.org/schema/web-services/web-services-2.0.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context-3.0.xsd
                        http://www.springframework.org/schema/oxm 
                        http://www.springframework.org/schema/oxm/spring-oxm-3.0.xsd"
                        >

<!--Enables @Endpoint and related Spring-WS annotations.-->
<sws:annotation-driven marshaller="marshaller" unmarshaller="marshaller"/> 

<bean id="weatherService"
    class="au.test.weather.ws.WeatherServiceImpl" />

<bean id="schema" class="org.springframework.xml.xsd.SimpleXsdSchema" 
    p:xsd = "classpath:au/test/weather/ws/schemas/Temperature.xsd"/>

<oxm:jaxb2-marshaller id="marshaller" >
    <oxm:class-to-be-bound name="au.test.weather.ws.GetTemperaturesResponse"/> 
    <oxm:class-to-be-bound name="au.test.weather.ws.GetTemperaturesRequest"/>
    <oxm:class-to-be-bound name="au.test.weather.ws.schemas.Jaxb2Marshaller"/>  
</oxm:jaxb2-marshaller> 

<bean id="temperatureEndpoint"
    class="au.test.weather.ws.TemperatureMarshallingEndpoint">
    <property name="weatherService" ref="weatherService" />
</bean> 
```

**我的注释类是什么样的**

```
@XmlRootElement(name = "GetTemperaturesRequest")
public class GetTemperaturesRequest {

    @XmlElement(required = true)
    protected String city;
    @XmlElement(required = true)
    @XmlSchemaType(name = "date")
    protected List<XMLGregorianCalendar> date;

    public String getCity() {
        return city;
    }

    public void setCity(String value) {
        this.city = value;
    }

    public List<XMLGregorianCalendar> getDate() {
        if (date == null) {
            date = new ArrayList<XMLGregorianCalendar>();
        }
        return this.date;
    }

    public void setDates(List<XMLGregorianCalendar> dates) {
this.date = dates;  
    }
} 
```

**端点**

```
@Endpoint
public class TemperatureMarshallingEndpoint {

    private static final String namespaceUri = "http://test.au/schema/weather";
    public static final String request_local_name = "GetTemperaturesRequest";
    private WeatherService weatherService;

    public void setWeatherService(WeatherService weatherService) {
        this.weatherService = weatherService;
    }

    @PayloadRoot(localPart = request_local_name, namespace = namespaceUri)
    @ResponsePayload
    public GetTemperaturesResponse getTemperature(@RequestPayload GetTemperaturesRequest request) throws JAXBException {
        List<GetTemperaturesResponse.TemperatureInfo> temperatures = weatherService.getTemperatures(request.getCity(), request.getDate());

        return new GetTemperaturesResponse(temperatures);
    }       
} 
```

**考试**

```
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(locations = {"classpath:servlet.xml"})

public class testOther {

    @Autowired
    private ApplicationContext applicationContext;                                           
    private MockWebServiceClient mockClient;

    @Before
    public void createClient() {
      mockClient = MockWebServiceClient.createClient(applicationContext);                  
    }

    @Test 
    public void TemperatureMarshallingEndpoint() throws Exception {
        Source requestPayload = new StringSource( 
        "<GetTemperaturesRequest xmlns='http://test.au/schema/weather'>" +
        "<city>Houston</city>" +
        "<date>2007-12-01</date>" + 
        "</GetTemperaturesRequest>");      

        Source responsePayload = new StringSource(
        "<GetTemperaturesResponse xmlns='http://test.au/schema/weather'>" +
        "<TemperatureInfo city='Houston' date='2007-12-01'><min>5.0</min><max>10.0</max><average>8.0</average></TemperatureInfo>" +
        "</GetTemperaturesResponse>");

        mockClient.sendRequest(withPayload(requestPayload)).  
        andExpect(payload(responsePayload));  
    }
} 
```

并且这个测试通过了，所以它必须是正确的，但是肥皂输出添加了 NS2 前缀

```
DEBUG: org.springframework.ws.server.MessageTracing.sent - 
Sent response 
[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/><SOAP-ENV:Body>
<ns2:GetTemperaturesResponse xmlns:ns2="http://test.au/schema/weather">
    <ns2:TemperatureInfo city="Houston" date="2007-12-01">
        <ns2:min>5.0</ns2:min>
        <ns2:max>10.0</ns2:max>
        <ns2:average>8.0</ns2:average>
    </ns2:TemperatureInfo>
</ns2:GetTemperaturesResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>] 
for request 
[<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/><SOAP-ENV:Body>
<GetTemperaturesRequest xmlns="http://test.au/schema/weather">
    <city>Houston</city>
    <date>2007-12-01</date></GetTemperaturesRequest>
</SOAP-ENV:Body></SOAP-ENV:Envelope>] 
```

这个命名空间是在哪里添加的？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-22T14:48:39.200

我建议这样做，这基于最新的 Spring-WS 有点标准：

**使用 oxm 命名空间**来定义你的 marhsaller：

```
<oxm:jaxb2-marshaller id="marshaller" >
    <oxm:class-to-be-bound name="...Your XMlRootElements.."/>
    <oxm:class-to-be-bound name="more.."/>  
</oxm:jaxb2-marshaller> 
```

或者指定 contextPath：

```
<oxm:jaxb2-marshaller id="marshaller" contextPath="au.test.weather.ws"/> 
```

**删除对`GenericMarshallingMethodEndpointAdapter`**and的引用`PayloadRootAnnotationMethodEndpointMapping`，将两者都替换为`sws`命名空间：

```
<sws:annotation-driven  /> 
```

或明确指定编组器/解组器：

```
<sws:annotation-driven marshaller="marshaller" unmarshaller="marshaller"/> 
```

如果您的端点是使用 @EndPoint 注释定义的，则使用这些，沿着这些线：

```
@Endpoint
public class MyEndPoint{

    @PayloadRoot(namespace = "myns", localPart = "rootelement")
    @ResponsePayload
    public MyResponse myMethod(@RequestPayload MyRequest request) 
```

它应该可以工作。此外，如果您的 MyRequest 类有一个`@XmlRootElement`注释，您甚至不需要指定编组器，它将使用内置的`MethodArgumentResolver`.

参考：[http ://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#server-endpoints](http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#server-endpoints)

# tomcat - 添加Web应用程序后Tomcat 7自动崩溃

> ID：11532497
> 
> 赞同：0
> 
> 时间：2012-07-17T23:54:20.377
> 
> 标签：tomcat, jvm

我正在尝试使用 ubuntu 11.10 在 tomcat7 下运行我的 Web 应用程序。我使用 authbind 将端口重置为 80。当没有应用程序添加到 /webapps/ 文件夹时，它运行良好。例如，我可以访问 example.com 到 tomcat 默认的起始页面。

然后我尝试将我的 Web 应用程序添加到 webapps/ 文件夹并重新启动服务器。之后，我无法同时访问默认页面或我的网络应用程序。我检查了tomcat进程，发现在我尝试访问页面后服务器停止了一段时间（无论是tomcat默认页面还是我的应用程序）。

有一些关于我的应用程序的详细信息，包大约 70MB，并使用大内存为应用程序初始化许多对象。我猜这是因为 JVM 崩溃，但我不知道如何定位问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T06:47:53.700

原因是我的机器在 RAM 内存（免费轮胎 AWS 服务器）方面非常有限。如果我们继续从中部署和取消部署应用程序，它是不稳定的。现在我转向付费版本，一切似乎都很好。谢谢大家的意见。

# sql - 对实体进行分组和求和

> ID：11532498
> 
> 赞同：4
> 
> 时间：2012-07-17T23:54:52.153
> 
> 标签：sql, linq, linq-to-entities

我有以下 SQL 查询，我尝试将其转换为 LINQ，但没有任何成功：

```
select 
at.financialaccountid,
SUM(creditamount)-SUM(debitamount)
from account_transactions at
where at.financialaccountid = 47
and ledgervisible = 1
GROUP BY at.financialaccountid 
```

![查询结果](../Images/f7c3458b9b21a9ee26b44641599e5ab3.png)

希望有人可以指导我。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T00:03:19.050

以下应该是可比较的 C# LINQ 实现：

```
class AccountTransaction
{
    public int FinancialAccountId { get; set; }
    public bool LedgerVisible { get; set; }
    public decimal CreditAmount { get; set; }
    public decimal DebitAmount { get; set; }
}

var transactions = new List<AccountTransaction>();

var results = from at in transactions
              where at.FinancialAccountId == 4 && at.LedgerVisible == true
              group at by at.FinancialAccountId into g
              select new
              {
                  FinancialAccountId = g.Key,
                  Delta = g.Sum(x => x.CreditAmount) - g.Sum(x => x.DebitAmount)
              }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:06:52.280

```
var query =
    from at in account_transactions
    where at.financialaccountid == 47
    && at.ledgervisible == 1
    group at.financialaccountid into g
    select new
    {
        financialaccountid = g.Key,
        balance = g.Sum(at => at.creditamount) - g.Sum(at => at.debitamount)
    }; 
```

# windows - 视频卡在 Perl 脚本中的系统（1，@commands）上

> ID：11532500
> 
> 赞同：4
> 
> 时间：2012-07-17T23:55:02.513
> 
> 标签：windows, perl, system, media, windows-media-player

我正在尝试编写一个 Perl 脚本，`n`在 Windows Media Player 上一个接一个地运行目录中的视频。

由于某种原因，在第 64 次视频播放时，它卡在`system(1, @commands)`.

现在，该命令`system(1, "C:\\Program Files (x86)\\Windows Media Player\\wmplayer", $path);`位于以下 for 循环中。

```
for (my $i = 0; $i < $n; $i++)
{
    # do stuff

    # Play video
    system(1, "C:\\Program Files (x86)\\Windows Media Player\\wmplayer", $path);

    sleep $duration + 1;

    # do stuff
} 
```

我想知道为什么它一直停在第 64 个视频（我已经运行了多次，并且总是第 64 个。）也许有人可以`system(1, @commands)`向我解释得更好？我所知道的是，在继续程序之前它不会等待`@commands`完成......

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-18T01:14:11.830

您已达到可以同时运行的最大子进程数。收获那些已经完成使用[`waitpid`](http://perldoc.perl.org/functions/waitpid.html).

* * *

或者，如果您不关心进程的退出代码，您可能会有更好的运气

```
system(qq{start /b "" "c:\...\wmplayer" "$path"}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:09:51.217

感谢大家的帮助！

我发现 VLC 播放器比 Windows Media Player 有更多的命令行支持，而且它正是我需要的：

```
vlc --play-and-exit $path 
```

I stopped using `system(1,@commands)` and I'm just using regular old `system(@commands)` and everything seems to be working well so far! =]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:35:51.043

语法是

```
system(command,@args) 
```

或者

```
@args=("command","arg1","arg2"); 
system(@args); 
```

在您的情况下，命令是`1`，不确定它的含义。不如试试

```
system("C:\\Program Files (x86)\\Windows Media Player\\wmplayer.exe", $path); 
```

在这里，命令是`.exe`将视频路径作为参数的（或二进制文件）。

**更新**：基于评论

```
system(1,"C:/Program Files (x86)/Windows Media Player/wmplayer.exe", $path); 
```

应该管用。正常播放第 64 个视频以检查它是否有效，或者重新配置视频序列，看看它是否仍然是第 64 个视频导致问题。

# c# - 为什么枚举不会用 protobufs 反序列化？

> ID：11532501
> 
> 赞同：3
> 
> 时间：2012-07-17T23:55:12.603
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net

我有一个我序列化的类，然后使用 Protobuf-net 版本 r431（可能一岁左右）反序列化。该类包含一个枚举`_type`和一个名为`_band`. 在构造函数中，`_type`设置为 StationType.Other 并`_band`设置为空字符串。

如您所见，我使用数据创建了一个对象，序列化，然后反序列化。枚举`_type`(StationType.Streaming) 的值丢失，而`_band`(FM) 被保留。

我觉得这是一个错误，因为行为不一致。但是，如果我从 1 而不是 0 的值开始枚举，一切都会按预期工作（例如，所有值都被保留）。

我在这里错过了什么吗？请参阅下面的代码和输出：

```
using System;
using System.IO;
using ProtoBuf;

namespace ProtoBufsWithEnums
{
    class Program
    {
        static void Main(string[] args)
        {
            stn1 = new Station{Type = StationType.Streaming, Band = "FM"};

            var ms1 = new MemoryStream();
            Serializer.Serialize(ms1, stn1); // serialize
            byte[] bytes = ms1.ToArray();

            var ms2 = new MemoryStream(bytes);
            Station stn2 = Serializer.Deserialize<Station>(ms2); // deserialize

            Console.WriteLine("Type - Original {0}, New {1}", stn1.Type, stn2.Type);
            Console.WriteLine("Band - Original {0}, New {1}", stn1.Band, stn2.Band);
        }
    }

    [ProtoContract]
    public enum StationType
    {
        [ProtoEnum(Name = "Streaming", Value = 0)]
        Streaming = 0,
        [ProtoEnum(Name = "Terrestrial", Value = 1)]
        Terrestrial = 1,
        [ProtoEnum(Name = "Other", Value = 2)]
        Other = 2,
        [ProtoEnum(Name = "Group", Value = 3)]
        Group = 3
    }

    [ProtoContract]
    public class Station 
    {
        [ProtoMember(9)]
        private StationType _type;
        [ProtoMember(10)]
        private string _band;

        public Station()
        {
            _type = StationType.Other;
            _band = "";
        }

        public StationType Type
        {
            get { return _type; }
            set { _type = value; }
        }

        public string Band
        {
            get { return _band; }
            set { _band = value; }
        }
    }
} 
```

输出：

```
Type - Original Streaming, New Terrestrial
Type - Original FM, New FM 
```

编辑：在 protobuf-net 网站上找到[问题 251](http://code.google.com/p/protobuf-net/issues/detail?id=251&q=enum&sort=-id)，不确定我是否正在查看相同的问题。不太确定它是否已修复。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T07:26:57.460

这是故障：

```
public Station()
{
    _type = StationType.Other;
    _band = "";
} 
```

protobuf-net 对零默认值做了一些隐含的假设。这在很多情况下都很好用，但不是全部。在这里帮助它的最简单方法是**告诉它**您使用的是非零默认值：

```
[ProtoMember(9), DefaultValue(StationType.Other)]
private StationType _type; 
```

另一种选择是告诉它总是序列化它：

```
[ProtoMember(9, IsRequired = true)]
private StationType _type; 
```

如果你有*很多*这样的，另一个选择是禁用“零默认”行为，这可以在自定义模型上完成：

```
var model = TypeModel.Create();
model.UseImplicitZeroDefaults = false; 
```

然后使用`model.Serialize(...)`etc - 但请注意，您应该存储和重新使用这样的模型（不要在每次需要序列化某些内容时重新创建它），因为它包含所有缓存的反射/元编程输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:03:30.250

请用`[EnumMember]`

例如：

```
 [DataContract]
 [ProtoContract]
    public enum StationType
    {
        [EnumMember]
        [ProtoEnum(Name = "Streaming", Value = 0)]
        Streaming = 0,

        [EnumMember]
        [ProtoEnum(Name = "Terrestrial", Value = 1)]
        Terrestrial = 1,

        [EnumMember]
        [ProtoEnum(Name = "Other", Value = 2)]
        Other = 2,

        [EnumMember]
        [ProtoEnum(Name = "Group", Value = 3)]
        Group = 3
    } 
```

# ruby - 如何在 ruby 中仅在内存中创建 zip 文件？

> ID：11532502
> 
> 赞同：3
> 
> 时间：2012-07-17T23:55:20.767
> 
> 标签：ruby, rubygems, zip, rubyzip

我想在给定目录中创建所有 HTML 文件的 zip 文件。zip 将与目录中的其余文件一起作为附件通过电子邮件发送。到目前为止，如果我从小马发送任何附件是 HTML 文件，我尝试的所有电子邮件客户端都无法阅读电子邮件。所以我想我会把它们拉上拉链。

有什么方法可以即时**压缩**HTML**文件，**但实际上**只在内存中**，而不使用**Windows 平台**上的任何临时文件？最好不要使用任何外部程序？

如果我理解正确，两种方法都描述在：

*   [http://info.michael-simons.eu/2008/01/21/using-rubyzip-to-create-zip-files-on-the-fly/](http://info.michael-simons.eu/2008/01/21/using-rubyzip-to-create-zip-files-on-the-fly/)或
*   [http://rubyzip.sourceforge.net/classes/Zip/ZipFile.html](http://rubyzip.sourceforge.net/classes/Zip/ZipFile.html)

正在使用某种临时文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:16:45.467

At first I thought maybe you could use a StringIO object to write to, but it looks like the ZipOutputStream class insists on opening a temporary file.

If you don't mind calling an external program, standard linux zip can be told to send otuput to stdout instead of a file by using "-" instead of a filename. So just collect the output into a variable then do whatever you like with it.

```
zipdata = %x(zip -q - *.html) 
```

I don't think this is going to be an efficiency gain over just using a temporary file, but you'd have to measure it to be sure.

# android - MediaRecorder，我无法在 SD 卡上写入

> ID：11532504
> 
> 赞同：2
> 
> 时间：2012-07-17T23:55:28.167
> 
> 标签：android

我想在android中录制语音，我尝试开发一个小应用程序进行测试，所以当我运行我的应用程序时它告诉我我不能在sdcard上写，所以有我的代码：

```
public class MainActivity extends Activity {

 private static final String LOG_TAG_ENREGISTREUR = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button record_btn = (Button)findViewById(R.id.button1);
        Button stop_btn = (Button)findViewById(R.id.button2);
        File fileRecord = null;
        final MediaRecorder media = new MediaRecorder();
        String state = android.os.Environment.getExternalStorageState();
        if(!state.equals(android.os.Environment.MEDIA_MOUNTED)){

            Log.e(LOG_TAG_ENREGISTREUR,"SDcard not found!");
            return;
        }

        File repertoryStockage = Environment.getExternalStorageDirectory();
        if(!repertoryStockage.canWrite()){

            Log.e(LOG_TAG_ENREGISTREUR,"Impossible , you can't write");

            return;
        }

        try {

            fileRecord = File.createTempFile("RecordingAudio", ".mp4",repertoryStockage);
        } catch (Exception e) {
            Log.e(LOG_TAG_ENREGISTREUR,"Probleme E/S before recording");
            return;
        }
        media.setAudioSource(MediaRecorder.AudioSource.MIC);
        media.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        media.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        media.setOutputFile(fileRecord.getAbsolutePath());

        record_btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                try {
                    media.prepare();
                } catch (IllegalStateException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                media.start();

            }
        });

        stop_btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                media.stop();
                media.release();

            }
        });
    }

} 
```

我在清单中添加权限：

```
<uses-permission android:name="android.permission.RECORD_AUDIO"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

另一件事是我创建了一个 SD 卡，然后通过以下方式将其添加到模拟器：-sdcard "[Path of sdcard]" 那么问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:40:27.047

好吧，这段代码对我有用..所以可能是你在模拟器中配置错误的东西。我使用了 SDK 级别 15 (4.0.3)。

您可以尝试将`try`块替换为与此相关的日志`Impossible, You can't write`：

```
File repertoryStockage = Environment.getExternalStorageDirectory();
File sample = new File(repertoryStockage,"empty.txt"); 
try
{
    sample.createNewFile();
} catch (IOException e) {
    e.printStackTrace();
}
if(!sample.canWrite()){

    Log.e(LOG_TAG_ENREGISTREUR,"Impossible , you can't write");
    return;
}
sample.delete(); 
```

我发现一些地方表明您无法检查目录的写权限。看到这个答案（代码主要来自那个答案）：[在目录中创建文件之前检查目录中的写访问权限](https://stackoverflow.com/questions/1272130/checking-for-write-access-in-a-directory-before-creating-files-inside-it)

但正如我一开始所说，代码对我有用，没有任何变化。

# c# - OpenRasta AsJsonDataContract() 字典

> ID：11532507
> 
> 赞同：0
> 
> 时间：2012-07-17T23:55:57.607
> 
> 标签：c#, json, openrasta

我正在使用 OpenRasta 为我的 .NET 应用程序提供 API。

我在使用字典时生成的 JSON 格式有问题。

我有以下配置：

```
 ResourceSpace.Has.ResourcesOfType<Dictionary<String,String>>()
.AtUri("/test")
.HandledBy<ProductHandler>()
.AsXmlDataContract()
.And.AsJsonDataContract(); 
```

ProductHandler 返回以下字典：

```
 Dictionary<String, String> dict = new Dictionary<string, string>();
        dict.Add("foo1", "bar1");
        dict.Add("foo2", "bar2");
        dict.Add("foo3", "bar3"); 
```

我想要以下 JSON：

```
{
    "foo1": "bar1",
    "foo2": "bar2",
    "foo3": "bar3"
} 
```

但相反，我得到以下信息：

```
[
    {
        "Key": "foo1",
        "Value": "bar1"
    },
    {
        "Key": "foo2",
        "Value": "bar2"
    },
    {
        "Key": "foo3",
        "Value": "bar3"
    }
] 
```

任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T13:00:55.527

看看JsonDictionary，

```
JsonDictionary items = new JsonDictionary();
Items.Add("someName1", "someValue1");
Items.Add("someName2", "someValue2"); 
```

序列化后它出来为

```
{"someName1":"someValue1","someName2":"someValue2"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T03:15:31.863

我最终使用[Newtonsoft.Json](http://json.codeplex.com)库进行序列化，它提供了我想要的格式。

编解码器的代码是：

```
[MediaType("application/json;q=0.3", "json")]
[MediaType("text/html;q=0.3", "html")]
public class NewtonsoftJsonCodec : IMediaTypeReader, IMediaTypeWriter
{
    public object Configuration { get; set; }

    public object ReadFrom(IHttpEntity request, IType destinationType, string destinationName)
    {
        using (var streamReader = new StreamReader(request.Stream))
        {
            var ser = new JsonSerializer();

            return ser.Deserialize(streamReader, destinationType.StaticType);
        }

    }

    public void WriteTo(object entity, IHttpEntity response, string[] parameters)
    {
        if (entity == null)
            return;
        using (var textWriter = new StreamWriter(response.Stream))
        {
            var serializer = new JsonSerializer();
            serializer.NullValueHandling = NullValueHandling.Include;
            serializer.Serialize(textWriter, entity);
        }
    }
} 
```

配置看起来像：

```
ResourceSpace.Uses.UriDecorator<ContentTypeExtensionUriDecorator>();
ResourceSpace.Has.ResourcesOfType<MeasurementDataFile[]>()
    .AtUri("/test")
    .HandledBy<MeasurementHandler>()
    .TranscodedBy<NewtonsoftJsonCodec>()
    .And.AsXmlDataContract(); 
```

# php - 格式化输入字段并打印整数

> ID：11532513
> 
> 赞同：0
> 
> 时间：2012-07-17T23:57:15.437
> 
> 标签：php, rounding

我对 PHP 完全陌生。我试图制作一个简单的计算脚本。我面临的问题是，当有人输入像“98,7”这样的数字时，数字会四舍五入为“99”，脚本会打印出“99”而不是“100”。所以我的问题是如何处理这个问题。

我的脚本：

```
 if($omtrek >=53 && $omtrek <=57) $omtrek=55;
                elseif($omtrek >=58 && $omtrek <=62) $omtrek=60;
                elseif($omtrek >=63 && $omtrek <=67) $omtrek=65;
                elseif($omtrek >=68 && $omtrek <=72) $omtrek=70;
                elseif($omtrek >=73 && $omtrek <=77) $omtrek=75;
                elseif($omtrek >=78 && $omtrek <=82) $omtrek=80;
                elseif($omtrek >=83 && $omtrek <=87) $omtrek=85;
                elseif($omtrek >=88 && $omtrek <=92) $omtrek=90;
                elseif($omtrek >=93 && $omtrek <=97) $omtrek=95;
                elseif($omtrek >=98 && $omtrek <=102) $omtrek=100;
                elseif($omtrek >=103 && $omtrek <=107) $omtrek=105;
                elseif($omtrek >=108 && $omtrek <=112) $omtrek=110;
                elseif($omtrek >=113 && $omtrek <=117) $omtrek=115;
                elseif($omtrek >=118 && $omtrek <=122) $omtrek=120;
                elseif($omtrek >=123 && $omtrek <=127) $omtrek=125;
                elseif($omtrek >=128 && $omtrek <=132) $omtrek=130;
                elseif($omtrek >=133 && $omtrek <=137) $omtrek=135;
                elseif($omtrek >=138 && $omtrek <=142) $omtrek=140; 

                if ($omtrek < 53){
                    print 'Helaas'; 
                }
                elseif ($omtrek > 142){
                    print 'XXL'; 
                }
                elseif ($omtrek = round($omtrek)){
                    print("maat: " . $omtrek . "<br/>");
                } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T16:08:19.287

You're trying to round to the nearest "5" instead of "1". So, we can use that to greatly simplify what you're doing:

```
$omtrek = 5 * round($omtrek / 5); 
```

That replaces your gigantic if statement tree. So your entire code boils down to:

```
if ($omtrek < 53){
    print 'Helaas'; 
} elseif ($omtrek > 142){
    print 'XXL'; 
} else {
    print "maat: " . (5 * round($omtrek / 5)) . "<br/>";
} 
```

Additionally, as for your original point, that should be handled by your if structure, since `98.7` falls within one of the conditions.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T16:07:53.663

Rather than having a long list of `if()` statements, why not just apply a little math?

```
$ cat om.php
#!/usr/local/bin/php
<?php

$omtrek = array( 52, 59, 61, 62, 63, 96.7, 98.7, 150);

foreach ($omtrek as $value) {
  if ($value < 53){
    $output='Helaas'; 
  } elseif ($value > 142){
    $output='XXL'; 
  } else {
    $output = round($value/5)*5;
  }
  printf("%6s => %s\n", $value, $output);
}

$ ./om.php
    52 => Helaas
    59 => 60
    61 => 60
    62 => 60
    63 => 65
  96.7 => 95
  98.7 => 100
   150 => XXL
$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T16:22:29.027

我认为 ghoti 和 ircmaxel 提供的答案比这更好。

然而，因为您是 PHP 新手……您可能不知道如果其中一个`if()`评估为真，那么“else”链中的其余部分甚至都不会被考虑。所以这会起作用：

```
 if ($omtrek < 53) $omtrek="Helaas";
            elseif ($omtrek <= 57) $omtrek=55;
            elseif ($omtrek <= 62) $omtrek=60;
            elseif ($omtrek <= 67) $omtrek=65;
            elseif ($omtrek <= 72) $omtrek=70;
            elseif ($omtrek <= 77) $omtrek=75;
            elseif ($omtrek <= 82) $omtrek=80;
            elseif ($omtrek <= 87) $omtrek=85;
            elseif ($omtrek <= 92) $omtrek=90;
            elseif ($omtrek <= 97) $omtrek=95;
            elseif ($omtrek <= 102) $omtrek=100;
            elseif ($omtrek <= 107) $omtrek=105;
            elseif ($omtrek <= 112) $omtrek=110;
            elseif ($omtrek <= 117) $omtrek=115;
            elseif ($omtrek <= 122) $omtrek=120;
            elseif ($omtrek <= 127) $omtrek=125;
            elseif ($omtrek <= 132) $omtrek=130;
            elseif ($omtrek <= 137) $omtrek=135;
            elseif ($omtrek <= 142) $omtrek=140;
            else $omtrek="XXL";

            print "maat: " . $omtrek . "<br/>"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T00:25:44.510

我认为您正在寻找的功能是**ceil**

```
<?php
 $omtrek = 98.7;

 $omtrek=ceil($omtrek);

  if($omtrek >=53 && $omtrek <=57) $omtrek=55;
  elseif($omtrek >=58 && $omtrek <=62) $omtrek=60;
  .... 
```

然后您可以删除圆形功能，如下所示...

```
if ($omtrek < 53){
    print 'Helaas';
}
elseif ($omtrek > 142){
     print 'XXL';
}
else{
    print("maat: " . $omtrek . "<br/>"); 
```

}

# javascript - 成功：函数（数据）；不使用命名函数

> ID：11532514
> 
> 赞同：0
> 
> 时间：2012-07-17T23:57:23.903
> 
> 标签：javascript, jquery

我目前对 jquery ajax 成功响应使用匿名函数。

```
success: function(data){
  code
}, 
```

尝试使用命名函数时：

```
success: success(data), 
```

它声称未设置变量数据。我想我能做到

```
success: function(data){
  success(data)
}, 
```

但这感觉不像它应该如何完成。为什么它会这样，我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:01:33.620

这是因为 JQuery 期望*引用*一个函数，而不是*函数调用*。

JQuery 需要知道必须调用什么函数。相反，`success(data)`您传递的是函数调用的*结果*`success(data)`（可以是任何东西，也可以是 void - 没有结果），根本不知道要做什么。

引用是指向一个对象的东西，在这种情况下是一个“函数对象”。函数调用可以被认为是一个执行的*动作*，它给出或不给出作为表达式计算的结果。

只需使用：

```
success: success 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:58:47.430

您只需要传递*参考*。你这样做，买只是传递*名字*，比如

```
success: success 
```

* * *

到目前为止，您所做的是`success`通过键入括号来执行函数并分配该函数的返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:59:45.490

该`success`属性采用类型的对象`function`。`function(data) { }`返回一个函数。`success(data)` *调用*该函数并返回它返回的任何内容。如果您的函数被调用`success`，您只需执行以下操作：

```
success: success, 
```

# delphi - 如何在 Delphi XE2 中找到“列表索引越界”错误的位置

> ID：11532515
> 
> 赞同：0
> 
> 时间：2012-07-17T23:57:27.847
> 
> 标签：delphi, error-handling, indexoutofboundsexception

在 Delphi XE2 中，我的程序现在会生成一个“列表索引越界”弹出对话框。

![在此处输入图像描述](../Images/7769577cba5e9e603c48879df92fc0c1.png)

我在（Tools\Debugger Options\Language Exceptions）下打开了“通知语言异常”，但调试时没有显示异常。

以下异常类型设置为忽略。

*   VCL EAbort 异常
*   印地静默例外
*   Microsoft DAO 异常
*   System.Threading.SynchronizationLockException
*   System.Threading.ThreadAbortException

有没有办法在不使用断点反复试验的情况下捕获异常？

**编辑**我试图在调试时出现异常对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:49:39.600

我的一个项目也遇到了同样的问题，Delphi 不会捕捉到异常并让我单击`break`或`continue`按钮。我的问题是我有一些没有调试的 DCU 正在链接，因为 Delphi 在编译/链接时首先找到了它们。

我看到的另一个导致这种情况的原因是，当我使用了一些在没有调试的情况下构建的组件和/或包时，其中发生了异常。一旦我使用调试构建了包和组件，然后重新构建了我的项目，Delphi 就捕获了异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T08:12:48.733

“附加选项”框的值为 -LUDesignIDE。似乎这阻止了 Delphi 捕获异常，一旦删除，事情就会恢复正常。我不知道是否只有此选项会导致此问题，或者输入的其他选项是否会导致相同的问题。

# javascript - javaScript RegExp 第二个索引

> ID：11532517
> 
> 赞同：0
> 
> 时间：2012-07-17T23:57:37.837
> 
> 标签：javascript, regex

我想得到“cat, bat, sat, fat”中的第二个“.at”'index，程序是：

```
var text = "cat, bat, sat, fat";
var pattern = /.at/g;
var matches = pattern.exec(text);
var num = 2;
var i = 0;
while(pattern.test(text)){
  if(++i == num){
    alert(matches.index);
    break;
  }
  matches = pattern.exec(text);
} 
```

正确的索引应该是 5，但是为什么我得到 10？

-_-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:32:50.367

您的问题是因为您对两者都使用相同的正则表达式，`.test()`并且`.exec()`期望状态不会受到影响，但是`lastIndex`由 the 推进，`.test()`因此在下一次`.exec()`发生时它是不正确的。要消除该问题，您可以删除`.test()`然后它可以工作（并且更有效）：

```
var text = "cat, bat, sat, fat";
var pattern = /.at/g;
var num = 2, i = 0, matches;
while(matches = pattern.exec(text)){
  if(++i == num){
    alert(matches.index);
    break;
  }
}​ 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/rbWQj/](http://jsfiddle.net/jfriend00/rbWQj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:52:36.720

当重复调用`exec`或`test`在全局正则表达式模式上时，下一次搜索的起始位置存储在正则表达式对象`lastIndex`属性中。每次调用`test`或调用`exec`该`lastIndex`属性。考虑到这一点，让我们看看您的代码在做什么：

```
var text = "cat, bat, sat, fat";
var pattern = /.at/g;
var matches = pattern.exec(text); //goes over the first match at 0, lastIndex=3
var num = 2;
var i = 0;
while(pattern.test(text)){
  //first iteration: lastIndex=8 not 3, match at 5
  //second iteration: lastIndex=18, match at 15
  if(++i == num){
    //matches still has the match from 10
    alert(matches.index); //returns 10
    break;
  }
  matches = pattern.exec(text);
  //first iteration: lastIndex=13, match at 10
} 
```

所以是的，在代码中同时使用 test 和 exec 会丢弃下一次搜索的起始索引。

# emacs - 如何在 Emacs 中编辑 *compile* 缓冲区

> ID：11532520
> 
> 赞同：1
> 
> 时间：2012-07-17T23:59:00.193
> 
> 标签：emacs, compilation

当我在 emacs 中编译时，它会打开一个名为*compilation*的新缓冲区，并显示错误。有时错误很长且难以阅读，所以我希望能够编辑文本（主要是在相关点选择我自己的换行符）。有没有办法做到这一点并继续使用缓冲区跳转到下一个错误（并保持缓冲区的默认突出显示）？

我可以将整个内容复制粘贴到另一个缓冲区中，但这会产生很多开销，并且当我尝试在粘贴的版本中查找下一个错误的位置时会变得乏味。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T00:21:19.313

您可以`toggle-read-only`通过键入来使用该命令`C-x``C-q`。

然后更改为基本模式`M-x``fundamental-mode``RET`

编辑后，您可以进入编译次要模式 `M-x``compilation-minor-mode``RET`并根据需要来回切换。

# nancy - Nancy 框架示例应用程序

> ID：11532523
> 
> 赞同：7
> 
> 时间：2012-07-17T23:59:15.227
> 
> 标签：nancy

我们正在寻找开发一个新的网络应用程序并遇到了 Nancy fx（实际上我注册了 Pluralsight，他们在那里开设了一门关于 nancy 的新课程）

我想知道一个示例应用程序（一个应用程序或单独的应用程序）显示 Nancy Fx 的一些功能

1.  使用 Web api 进行开发（因为我们有来自 Web api 的数据）。另外我想知道我们是否应该有一个 web api 应用程序或者不需要，这可以由 Nancy Fx 提供，其中一个扩展。
2.  身份验证（具有 RESTful 功能（不需要 cookie 等））
3.  我们是否可以使用第三方控件，例如 Telerik 等。
4.  我们能否为移动/桌面等分配不同的视图，例如在 asp.net 中，我们可以有 order.mobile.cshtml 甚至特定于它的 iphone 或 android 等。

谢谢

库泽马

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-18T07:52:32.960

希望您喜欢 Pluralsight 课程 :-)

明智的示例.. 此处的主要 Github 存储库中有小示例：[https ://github.com/NancyFx/Nancy/tree/master/src](https://github.com/NancyFx/Nancy/tree/master/src)

这里有一个使用 Nancy 和 RavenDb 的 NerdDinner 的“端口”：

*   演示：[http ://dinnerparty.azurewebsites.net/](http://dinnerparty.azurewebsites.net/)
*   来源：[https ://github.com/NancyFx/DinnerParty](https://github.com/NancyFx/DinnerParty)

有一个我还没有机会在这里查看的新示例：

*   演示： http: [//people-1.apphb.com/](http://people-1.apphb.com/)
*   资料来源：[https ://bitbucket.org/woodwardmatt/people](https://bitbucket.org/woodwardmatt/people)

具体回答您的问题：

1.  您可以使用 Nancy 在一个站点中轻松创建网站和 webapi。
2.  支持多种不同类型的身份验证，即将发布的 0.12 版本包括“无状态”身份验证系统。
3.  取决于它们是什么，如果它们专门与 MVC 或 WebForms 相关联，那么不，如果它们是使用 AJAX 的客户端东西，那么可以。
4.  是的，这已经在论坛上讨论了几个选项：[https ://groups.google.com/d/topic/nancy-web-framework/8MsU4zh2pN8/discussion](https://groups.google.com/d/topic/nancy-web-framework/8MsU4zh2pN8/discussion)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T15:34:52.210

您可以看看（又一个）用 NancyFx 构建的博客站点（使用 get/post、viewbag、表单身份验证、测试和其他基本人员）：

*   源代码：[https ://github.com/itmeze/ITmeze.com](https://github.com/itmeze/ITmeze.com)
*   演示：http: [//itmeze.com](http://itmeze.com)

免责声明：我把它作为熟悉 NancyFX 的一种方式 :) 我玩得很开心！

# javascript - 在 js 中有一个 cookie 保存序列化的 svgs

> ID：11532524
> 
> 赞同：0
> 
> 时间：2012-07-17T23:59:21.420
> 
> 标签：javascript, serialization, cookies, svg

所以我用这个网站作为参考[http://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

基本上我使用他们的代码作为在 js 中创建 cookie 的基础。所以基本上我有svg标签，标签中的元素构成了svg。假设 svg 的 id=1 到目前为止我已经成功创建了一个存储 svg 信息的 cookie。所以我有这个 if 语句。如果有 cookie（意味着我之前已经将 svg 保存到 cookie 中），我会在其中反序列化 svg 并执行 document.getElementById(2) = unescape('cookiesvg')。2 是另一个 svg 标签的 id。带有 2 的 svg 标签将是 if 语句的 else 情况。我的问题是当我将信息加载到此标签中时，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:34:03.360

问题是您试图在 DOM 中设置一个元素：

```
document.getElementById(2) = unescape('cookiesvg') 
```

...但这不起作用；它被称为**get** ElementById，而不是setElementById，对吗？:)

您应该做的是设置元素的内容，而不是尝试设置元素本身。换句话说，你想使用类似的东西：

```
document.getElementById(2).innerHTML = unescape('cookiesvg') 
```

但是，我从未使用过 SVG 元素，因此您可能需要做一些其他 SVG 特定的事情。不管怎样，你想要做的是设置内容，而不是元素，一切都应该工作。

# sass - SASS - 设置相对值

> ID：11532525
> 
> 赞同：1
> 
> 时间：2012-07-17T23:59:33.057
> 
> 标签：sass, compass-sass

是否可以为属性设置相对值？可以使以下编译工作的东西：

**SCSS 源文件：**

```
.class {

  font-size: 10pt;

  &.subclass {
    font-size: +2;
  }

} 
```

**CSS结果文件：**

```
.class {
  font-size: 10pt;
}

.class.subclass {
  font-size: 12pt;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:24:52.553

你可以使用一个变量：

```
$size: 10pt;

.class {
  font-size: $size;

  &.subclass {
    font-size: $size + 2pt;
  }
} 
```

# r - 循环回到函数中的上一行

> ID：11532533
> 
> 赞同：2
> 
> 时间：2012-07-18T00:00:48.463
> 
> 标签：r

在下面的函数中，我想控制输入，以便如果输入除前三个选项之外的任何值（任何不等于 1-3 的值），该函数将循环回原始问题。

```
T<-function(){
Load<-readline("
Choose Task 
1 Task 1
2 Task 2
3 Task 3 ")
for(i in 1:10){
    if(Load=="")
    {print.noquote("No Value Entered"); Load<-readline("
Choose Task 
1 Task 1
2 Task 2
3 Task 3 ")
    }else
    if(Load==1)
    {source("/Users/JD/Desktop/R1.R")}
    else
    if(Load==2)
    {source("/Users/JD/Desktop/R2.R",print.eval=TRUE)}
    else
    if(Load==3)
    {source("/Users/JD/Desktop/R3.R",print.eval=TRUE)}
    else
    {print.noquote("Must enter 1-3"); ** loop back to "Choose Task"**}

}} 
```

所以我有 ** 的地方将是一条循环回代码第二行的行。我已经控制了“空白”响应，但我想对不等于 1-3 的任何东西做类似的事情。如果不允许环回，也许有不同的方法可以获得相同的效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:20:03.383

您可以使用`switch`和递归的组合

```
ChooseTask <- function() {
    Load <- readline("Choose Task. 1, 2, or 3: ")
    switch(Load, 
           "1"={cat("1", "\n")},
           "2"={cat("2", "\n")},
           "3"={cat("3", "\n")},
            {
                print.noquote("Must enter 1-3") 
                ChooseTask()
            })
}
> ChooseTask()
Choose Task. 1, 2, or 3: 2
2 
> ChooseTask()
Choose Task. 1, 2, or 3: 5
[1] Must enter 1-3
Choose Task. 1, 2, or 3: 1
1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T17:28:58.100

实际上，我会反对到目前为止提供的答案，并建议您使用方便的`menu`功能，该功能基本上可以满足您的需求。

```
> menu(c("Task1", "Task2", "Task3"), title = "Choose Task")
Choose Task 

1: Task1
2: Task2
3: Task3

Selection: 4
Enter an item from the menu, or 0 to exit
Selection: 1
[1] 1 
```

menu 的结果将是 0、1、2 或 3。

编辑：为了取悦 GSee ...这就是您如何改进它以实际执行用户想要的操作

```
T <- function(){
    choice <- menu(c("Task1", "Task2", "Task3"), title = "Choose Task, or 0 to exit")

    switch(choice,
           source("/Users/JD/Desktop/R1.R"),                    # 1
           source("/Users/JD/Dekstop/R2.R, print.eval = TRUE"), # 2
           source("/Users/JD/Desktop/R3.R, print.eval = TRUE")) # 3
} 
```

如果用户选择 0，则 switch 语句将不会执行任何输入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T17:05:28.020

你可以用一个简单的循环来做到这一点：

```
choice <- 0
while( !( choice %in% 1:3 ) ) {
   choice <- readline('Choose 1, 2, or 3:')
} 
```

# node.js - 流星可以支持和/或作为本地（而不是全局）模块/包/东西工作吗？

> ID：11532535
> 
> 赞同：0
> 
> 时间：2012-07-18T00:00:55.710
> 
> 标签：node.js, mongodb, meteor, node-modules

在最近阅读了关于使用本地模块而不是全局模块的好处的各种帖子之后（例如，[mikeal rogers 的这篇关于节点 0.4.0 中本地模块支持的帖子](http://www.mikealrogers.com/posts/nodemodules-in-git.html)），我想知道是否有可能没有将流星安装为首先是机器范围的应用程序，但只是作为“常规”节点应用程序的一部分。这可能意味着入口点（app.js 或其他）将调用安装在项目目录中的 meteor.js 和朋友（大概在 node_modules 下）。

仍然可以进行机器范围的安装（如果需要/需要），但不包含实际的应用程序代码，它只允许从模板创建新的流星项目。

诚然，这似乎与当前的流星设计相反，其中项目目录在典型情况下只有服务器/客户端/公共，所以也许只是一个更基本的哲学差异，流星有意成为一个全球/机器范围的实体？

我意识到启动/配置 mongodb 是流星运行的一部分，但似乎并不排除使用“本地流星”AFAICT？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:27:35.880

[我认为您可以使用Meteorite](http://possibilities.github.com/meteorite/)实现您想要的。我们将在接下来的几天内发布一个版本，该版本可以正确锁定您使用的流星和流星智能包的版本。

您不会获得将其他人的代码签入您的存储库的“好处”，但是我个人对此不太相信[1]。

PS。我真的不明白为什么他们说您无论如何都不能锁定依赖项的所有依赖项。Bundler 正是为 rails 做到了这一点（我们现在在陨石中做到了）。但是这里不适合讨论这个问题。

[1] 至少可以这么说。

# android - android绑定视图重复数值显示

> ID：11532542
> 
> 赞同：0
> 
> 时间：2012-07-18T00:02:05.493
> 
> 标签：android, android-cursor

我的列表视图的问题是当您到达底部后向上滚动时，数字会不断增加。我希望数字是固定的。在到达列表视图的末尾并且用户向上滚动之后。我正在尝试过滤行数。我会发布一张图片，但我没有所需的积分。

```
public void bindView(View v, Context context, Cursor c) {
    // do your magic inhere :) the cursor will be at the correct row position
    System.out.println("please select a cursor");

    if(name_text != null) {
        String mFinal = answer.replaceAll("<ENTER>", "\n").replaceAll("<ENTER>", "").replaceAll("<COMMA>", ",");
        name_text.setText(String.valueOf(mFinal)); 
        correctanswer.setText(answer);
        questno.setText(String.valueOf(counter)); 
        counter++;
    }

    if(answer.equals(userreal))
    {
        System.out.println("are the two values equal");
        imageView.setImageResource(R.drawable.plus);
        String mFinal = name.replaceAll("<ENTER>", "\n").replaceAll("<ENTER>", "").replaceAll("<COMMA>", ",");
        name_text.setText(String.valueOf(mFinal));
        myanswertext.setText(userreal);  
    }
    else
    {
        imageView.setImageResource(R.drawable.redcross);    
        String mFinal = name.replaceAll("<ENTER>", "\n").replaceAll("<ENTER>", "").replaceAll("<COMMA>", ",");
        name_text.setText(String.valueOf(mFinal));
        myanswertext.setText(userreal);
        System.out.println("are the values not equal"); 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:51:18.040

只需使用光标的位置/索引：

```
questno.setText(c.getPosition() + ""); 
```

# php - 如何在没有“胖”控制器的情况下实现干净的 URL？

> ID：11532548
> 
> 赞同：1
> 
> 时间：2012-07-18T00:02:31.723
> 
> 标签：php, model-view-controller, clean-urls

最近我一直在学习如何在我的应用程序中实现 MVC 结构。我计划在不久的将来使用 PHP 框架，但现在它只是纯 PHP。我了解到控制器应该“瘦”而模型应该“胖”，但似乎无法理解这如何与干净的 URL 齐头并进。

在我实习的公司，我正在开发一个基于 Web 的应用程序来对数据库中的 3 个不同的表执行 CRUD 操作。每个表都有自己的特定字段，这意味着对于这些表中的每一个，都需要 4 个视图（每个 CRUD 操作 1 个）。

我想使用干净的 URL，所以现在我有 1 个（只有一个）控制器（index.php），它将 URL 分成段并分析它们，为每个段调用特定的方法和视图，或者（如果需要） ) 将用户重定向到正确的 URL。

现在控制器包含近 1000 行代码。我总是读到控制器应该“瘦”，并且看到人们在一个应用程序中谈论多个控制器。我似乎无法理解如何结合干净的 URL 来实现它......

任何帮助将非常感激。在我正在实习的公司里只有一个网页设计师，所以我不能问他任何与编程相关的问题......

下面是我的控制器的基本表示（index.php）

```
// Check if user is logged in
if (isset($_SESSION['username']) AND isset($_SESSION['loggedIn'])) {

    // Get URL from $_SERVER
    $url = $_SERVER['REQUEST_URI'];

    // Split URL and assign values to $url
    $url = trim($url, "/");
    $url = explode('/', $url);

    // Remove first url segment (index.php) for convenience
    array_shift($url);

    // Check if 1st URL segment (category) is set
    if (isset($url[1])) {
        $category = $url[1];

        // Check if category is 'apples'
        if ($category == 'apples') {

            // Check if 2nd URL segment (action) is set
            if (isset($url[2])) {
                $action = $url[2];

                // Check if action is 'add'
                if ($action == 'add') {
                    // Calls to Model
                    // Include Presentation (form to add new record to 'apples' category)
                }

                // Check if action is 'view'
                elseif ($action == 'view') {
                    // Calls to Model
                    // Include Presentation (list of all records in the 'apples' table)
                }

                // Check if action is 'edit'
                elseif ($action == 'edit') {

                    // Check if 3d URL segment (id) is set
                    if (isset($url[3])) {
                        $id = $url[3];

                        // Calls to Model
                        // Include Presentation (form to edit record of the 'apples' category);
                    }

                    // If 3d URL segment (id) is not set then redirect
                    else {
                        header('Location: index.php/$category/view');
                    }
                }

                // Check if action is 'delete'
                elseif ($action == 'delete') {

                    // Check if 3d URL segment (id) is set
                    if (isset($url[3])) {
                        $id = $url[3];

                        // Calls to Model
                        // Include Presentation (form to edit record of the 'apples' category);
                    }

                    // If 3d URL segment (id) is not set then redirect
                    else {
                        header('Location: index.php/$category/view');
                    }
                }

                // If 2nd URL segment (action) is invalid then assume user wants to view and redirect
                else {
                    header("Location: index.php/$category/view");   
                }
            } 

            // If 2nd URL segment (category) is not set then assume user wants to view and redirect
            else {
                header("Location: index.php/$category/view");
            }

        }

        // Check if category is 'pineapples'
        elseif ($category == 'pineapples') {
            // same here as in 'apples' code block
        }

        // Check if category is 'pears'
        elseif ($category == 'pears') {
            // same here as in 'apples' code block
        }

        // If 1st URL segment (category) is invalid then redirect to index.php
        else {
            header('Location: index.php')
        }
    }

    // If 1st URL segment (category) is not set then show category overview
    else {
        include 'presentation/category_overview.php';
    }
}

// If user is not logged in then check if login form got submitted
elseif($_POST['formSubmit'] == 'submit') {
    // Calls to Model (form and user credentials validation)
    // Include Presentation (category overview)
}

// If user is not logged in and did not submit login form then include view (login form)
else {
    include 'presentation/login.php';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:36:03.930

我认为对于控制器的实际作用发生了一些误解。

拆分 URL 不是控制器的责任。它通常是由单独的路由机制完成的。有时称为[前端控制器](http://martinfowler.com/eaaCatalog/frontController.html)。通常使用正则表达式来实现（有时，在 APC 的帮助下）。

在受 Web MVC 启发的模式中，您基本上有两种选择：

1.  经典控制器，负责改变模型层和视图的状态；
2.  [页面控制器](http://martinfowler.com/eaaCatalog/pageController.html)，它初始化模型层结构，创建视图，将模型层元素绑定到所述视图，然后渲染它

**PS**至于 MVC 的其余部分，您可能会发现[this](https://stackoverflow.com/a/5864000/727208)和[this](https://stackoverflow.com/a/9685039/727208) comment 很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:49:25.990

除了实现前端控制器模式之外，真正的 MVC 应用程序还应具备良好的面向对象设计的所有品质：模块化、松散耦合、内聚、关注点分离、DRY 等。

所以很明显，你所有的模型、视图和控制器都会有很多共享的功能，应该封装在基础模型/视图/控制器类中。这些基类（以及用于行为、助手、组件等的基类）加上必要的实用程序库（路由引擎、DAL 等）将构成 MVC 框架的基础。

*为每个应用程序*重用的框架库应该与在框架之上为每个单独的应用程序构建的特定于应用程序的代码区分开来。*在“瘦控制器，胖模型”*中提到的是您*的特定于应用程序的模型和控制器*。

 *你的基本控制器必须包含代码来协调应用程序流、实例化模型、触发模型验证、实例化视图、触发回调、在模型和视图之间传递数据、执行会话处理、实现脚手架等。所以自然会有点大。

但是您的应用程序控制器仅通过从基本控制器类继承即可获得所有这些功能，允许它们仅包含定义控制器设置和操作所需的最少代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:35:29.420

这不是 MVC 的实现方式！

*   首先，您必须为每个控制器、模型或视图创建一个类。
*   每个类必须在一个单独的文件中。
*   文件必须根据其类类型分组在不同的目录中。

考虑你有一个订单表，那么你有：

```
/index.php
/controller/order.php
/model/order.php
/view/order/grid.php
/view/order/form.php 
```

在索引中，您必须只路由程序。您必须实例化控制器，调用所需的函数。控制器必须从模型中获取所需的对象并将它们放在视图中并将视图返回给索引。index 将在视图上调用渲染并输出结果。*

# node.js - 是否可以在 Node.js 中分叉一个 javascript 函数？

> ID：11532549
> 
> 赞同：7
> 
> 时间：2012-07-18T00:02:35.817
> 
> 标签：node.js, parallel-processing, fork

我尝试从我的主 javascript 文件中执行一个长期运行的函数。我有 2 个 cpu，所以我怎么能分叉一个函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T00:07:52.680

这是关于节点中的分叉和子进程的 node.js 文档。

[http://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

看起来你可以做这样的事情。

```
var child = require('child_process').fork('child.js');
child.on("message", function(){}); 
```

在这种情况下，您将需要 child.js 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:14:37.683

对于浏览器端的 javascript，您将使用[Web Workers](https://developer.mozilla.org/en/Using_web_workers)来完成这样的任务，该功能已被移植到 NodeJS 此处[Design of Web Workers for](http://blog.std.in/2010/07/08/nodejs-webworker-design/) NodeJS将[child_process](http://nodejs.org/api/child_process.html) API 调用与 Web Workers 的消息传递能力相结合。

# multithreading - Postgres 中的原子更新 .. SELECT

> ID：11532550
> 
> 赞同：56
> 
> 时间：2012-07-18T00:02:45.227
> 
> 标签：multithreading, postgresql, concurrency, race-condition, transaction-isolation

我正在建立一种排队机制。有需要处理的数据行和一个状态标志。我正在使用一个`update .. returning`子句来管理它：

```
UPDATE stuff
SET computed = 'working'
WHERE id = (SELECT id from STUFF WHERE computed IS NULL LIMIT 1)
RETURNING * 
```

嵌套选择部分是否与更新相同，或者我在这里有竞争条件？如果是这样，内部选择是否需要是 a `select for update`？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-19T20:35:34.573

虽然 Erwin 的建议可能是获得正确行为的*最简单*方法（只要您在遇到`SQLSTATE`40001 异常时重试事务），排队应用程序本质上往往更适合请求阻塞以有机会轮到他们与事务的 PostgreSQL 实现相比，队列`SERIALIZABLE`允许更高的并发性，并且对冲突的可能性更加“乐观”。

就目前而言，问题中的示例查询在默认`READ COMMITTED`事务隔离级别中将允许两个（或更多）并发连接从队列中“声明”同一行。会发生什么：

*   T1 开始并一直锁定`UPDATE`阶段中的行。
*   T2 在执行时间上与 T1 重叠，并尝试更新该行。它阻塞待处理的T1`COMMIT`或`ROLLBACK`。
*   T1 提交，已成功“认领”该行。
*   T2 尝试更新该行，发现 T1 已经有，查找该行的新版本，发现它仍然满足选择标准（即`id`匹配），并且还“声明”该行。

可以修改它以使其正常工作（如果您使用的 PostgreSQL 版本允许`FOR UPDATE`子查询中的子句）。只需添加`FOR UPDATE`到选择 id 的子查询的末尾，就会发生这种情况：

*   *T1 启动，现在在选择*id之前锁定行。
*   T2 在执行时间上与 T1 重叠，并在尝试选择一个 id 时阻塞，等待 T1 的`COMMIT`或`ROLLBACK`。
*   T1 提交，已成功“认领”该行。
*   当 T2 能够*读取*行以查看 id 时，它看到它已被认领，因此它找到下一个可用的 id。

在`REPEATABLE READ`或`SERIALIZABLE`事务隔离级别，写入冲突会引发错误，您可以根据 SQLSTATE 捕获并确定是序列化失败，然后重试。

如果您通常需要 SERIALIZABLE 事务，但又想避免在排队区域重试，则可以使用[咨询锁](http://www.postgresql.org/docs/current/interactive/explicit-locking.html#ADVISORY-LOCKS)来实现。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-18T02:49:47.310

如果您是**唯一的用户**，则查询应该没问题。特别是，查询本身（外部查询和子查询之间）没有竞争条件或死锁。[我在这里](https://www.postgresql.org/docs/current/interactive/explicit-locking.html#LOCKING-TABLES)引用手册：

> 但是，事务永远不会与自身发生冲突。

对于**并发使用**，事情可能会更复杂。[`SERIALIZABLE`使用交易模式](https://www.postgresql.org/docs/current/interactive/transaction-iso.html#XACT-SERIALIZABLE)可以确保您的安全：

```
BEGIN ISOLATION LEVEL SERIALIZABLE;
UPDATE stuff
SET    computed = 'working'
WHERE  id = (SELECT id FROM stuff WHERE computed IS NULL LIMIT 1)
RETURNING * 
COMMIT; 
```

您需要为序列化失败做好准备，并在这种情况下重试查询。

但我不完全确定这是否是矫枉过正。我会请@kgrittn 停下来......他是并发和可序列化事务*的专家......*

[他做到了。:)](https://stackoverflow.com/a/11568880/939860)

* * *

### 两全其美

在默认事务模式下运行查询`READ COMMITTED`。

对于 Postgres 9.5 或更高版本，请使用`FOR UPDATE SKIP LOCKED`. 看：

*   [Postgres 更新……限制 1](https://dba.stackexchange.com/questions/69471/postgres-update-limit-1/69497#69497)

对于旧版本`computed IS NULL`，在外部明确重新检查条件`UPDATE`：

```
UPDATE stuff
SET    computed = 'working'
WHERE  id = (SELECT id FROM stuff WHERE computed IS NULL LIMIT 1)
**AND   computed IS NULL**; 
```

正如@kgrittn 在对他的回答的评论中所建议的那样，在（不太可能）它与并发事务交织在一起的情况下，这个查询可能会出现空，而无需执行任何操作。

因此，它的工作方式与事务模式的第一个变体非常相似`SERIALIZABLE`，您必须重试 - 只是没有性能损失。

唯一的问题：虽然冲突不太可能发生，因为机会之窗是如此之小，但它可能在重负载下发生。您无法确定是否最终没有更多行了。

如果这无关紧要（就像您的情况一样），那么您就完成了。
如果确实如此，*绝对可以肯定*的是，在得到一个空结果后，再用[*显式锁定*](https://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FOR-UPDATE-SHARE)启动一个查询。如果这是空的，你就完成了。如果没有，请继续。
在[plpgsql](https://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-CONTROL-STRUCTURES-LOOPS)中它可能看起来像这样：

```
LOOP
   UPDATE stuff
   SET    computed = 'working'
   WHERE  id = (SELECT id FROM stuff WHERE computed IS NULL
                LIMIT 1 **FOR UPDATE SKIP LOCKED**);  -- pg 9.5+
   -- WHERE  id = (SELECT id FROM stuff WHERE computed IS NULL LIMIT 1)
   -- **AND    computed IS NULL**; -- pg 9.4-

   **CONTINUE WHEN FOUND;**  -- continue outside loop, may be a nested loop

   UPDATE stuff
   SET    computed = 'working'
   WHERE  id = (SELECT id FROM stuff WHERE computed IS NULL
                LIMIT 1 **FOR UPDATE**);

   **EXIT WHEN NOT FOUND;**  -- exit function (end)
END LOOP; 
```

这应该给你两全其美：性能*和*可靠性。

# facebook - Codeigniter 2.1.2 和 Facebook-PHP-SDK 3.1.1

> ID：11532551
> 
> 赞同：2
> 
> 时间：2012-07-18T00:02:58.317
> 
> 标签：facebook, codeigniter

我正在通过 Codeigniter 2.1.2 和 Facebook-PHP-SDK 3.1.1 开发一个简单的身份验证，但我不知道为什么它现在可以工作。

我已将 src 文件夹（https://github.com/facebook/facebook-php-sdk/tree/master/src）中的所有文件下载到我的库中。

登录似乎可以正常工作，但是当用户被重定向回我的网站时，Facebook 的 getUser() 函数总是返回 0！

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class Bloompit extends CI_Controller
{
    public $user;

    public function __construct()
    {
        parent::__construct();
        $this->load->helper('url');
        $this->load->library('session');
        $this->load->library('facebook', array(
            'appId' => '149275358530064',
            'secret' => 'xxxxxxxxxxxxxxxxxxxxxxxxx'
        ));
        $this->load->model('bloompit_model');
        $this->user = $this->session->userdata('user');
    }

    public function index()
    {
        $data['title'] = 'Bloompit';
        $data['page'] = 'home';
        $this->load->view('view', $data);
    }

    public function login()
    {
        if ($this->user) {
            redirect(site_url(), 'location');
        } elseif ($this->facebook->getUser()) {
            try {
                $facebook_user = $this->facebook->api('/me');
                $this->session->set_userdata('user', array(
                    'name' => $facebook_user['name']
                ));
            } catch (FacebookApiException $e) {
                log_message('error', $e);
                redirect($this->facebook->getLoginUrl(array(
                    'scope' => 'email',
                    'redirect_uri' => site_url('login')
                )), 'location');
            }
        } else {
            $data['facebook_login_url'] = $this->facebook->getLoginUrl(array(
                'scope' => 'email',
                'redirect_uri' => site_url('login')
            ));
            $data['title'] = 'Entrar';
            $data['page'] = 'login';
            $this->load->view('view', $data);
        }
    }

    public function logout() {
        session_destroy();
        redirect($this->facebook->getLogoutUrl(array(
            'next' => site_url()
        )), 'location');
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T09:21:42.640

Facebook PHP SDK 使用 $_REQUEST 变量，而 CodeIgniter 出于安全原因清除 $_REQUEST 变量。

为了解决这个问题，您可以在调用 getUser() 之前将 $_GET 的内容复制到 $_REQUEST：

```
$_REQUEST += $_GET;
$this->facebook->getUser(); 
```

另一种解决方案是修改 Facebook PHP SDK 以使用 $_GET 而不是 $_REQUEST。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T10:04:50.453

您在 site_url() 函数中仅使用了不正确的函数名称，您必须指定控制器名称。

试试这个：

```
$this->facebook->getLoginUrl(array(
                'scope' => 'email',
                'redirect_uri' => site_url('bloompit/login')
            )); 
```

# objective-c - 我将全局/静态变量显式初始化为 0/NO/nil 有什么好处？

> ID：11532552
> 
> 赞同：2
> 
> 时间：2012-07-18T00:03:05.617
> 
> 标签：objective-c, initialization, static-variables

[Cocoa 的编码指南](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/FrameworkImpl.html#//apple_ref/doc/uid/20001286-1005930)如下：

> 您应该初始化静态变量以确保它们被合并到 __DATA 段的 __data 段，而不是 __bss 段。如果没有明显的值可用于初始化，请使用 0、NULL、0.0 或任何合适的值。

这是否意味着 __bss 在某种意义上比 __DATA 差？但在我的理解中，__bss 有好处，因为它可以生成更小的二进制可执行文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:32:10.087

__bss 存储未初始化的数据，而 __data 存储手动初始化的变量。程序加载时，程序加载器必须初始化 __bss，这需要一些额外的时间，而 __data 中的变量按原样加载。

# objective-c - UIView 什么时候刷新？是否可以强制中间功能刷新？

> ID：11532553
> 
> 赞同：0
> 
> 时间：2012-07-18T00:03:07.053
> 
> 标签：objective-c, xcode, uiview, refresh

我正在使用的应用程序中有一个功能，与其他操作相比，它有时需要相对较长的时间。我希望在函数执行时出现图像，以向用户显示应用程序仍在正常工作。

我认为可以做到的方式是：

```
_checkImpossibleImage.hidden = NO;
bool ratioIsPossible = [PaintGame isPossible:_paintChipRatio:_paintCanRatios];
_checkImpossibleImage.hidden = YES; 
```

本质上，它会将图像设置为可见，执行函数，然后将图像设置为不可见。但是，在执行完本节中的所有代码之前，视图似乎不会更新。以下是整体功能：

```
- (void)alertView:(UIAlertView *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if (buttonIndex == 0){
        // Do nothing (cancel option selected)
    } else {
        if (_buttonKey == @"New") {

            _checkImpossibleImage.hidden = NO;
            bool ratioIsPossible = [PaintGame isPossible:_paintChipRatio:_paintCanRatios];
            _checkImpossibleImage.hidden = YES;

            ...
        }
    ...
    }
} 
```

有没有办法强制更新当前视图，或者有没有更好的方法在函数执行时创建“加载”弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:22:23.573

这样做时你不应该阻塞 UI，我认为如果你只是在单独的线程中调用需要很长时间的方法会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:32:18.973

直到运行循环结束时才会绘制；没有办法让它发生在你的代码中间。您可以将调用延迟到`isPossible::`（顺便说一下，这是一个糟糕的方法名称），直到循环的下一次复飞，方法是将其放在主调度队列中：

```
_checkImpossibleImage.hidden = NO;
dispatch_async(dispatch_get_main_queue(), ^{
        bool ratioIsPossible = [PaintGame isPossible:_paintChipRatio:_paintCanRatios];
        _checkImpossibleImage.hidden = YES;
        // More code to deal with the value of ratioIsPossible
}); 
```

# git - Git：合并前的钩子？

> ID：11532556
> 
> 赞同：2
> 
> 时间：2012-07-18T00:03:30.590
> 
> 标签：git, unit-testing, selenium

我有一个`pre-commit`钩子可以阻止任何直接提交给 master。我希望所有更改都提交到一个单独的分支，然后合并到 master，只有在测试套件通过时才允许合并到 master。

作为一个单独的问题，如果测试失败，在合并和回滚 master 之后运行测试套件是否更合适？

# jquery - Adding comment to lists of comments using Rails + Unobtrusive Javascript

> ID：11532557
> 
> 赞同：2
> 
> 时间：2012-07-18T00:03:33.910
> 
> 标签：jquery, ruby-on-rails-3

I currently have a page with a bunch of lists, where each list has an ability to add a comment.

Here's the `_new.html.haml` partial that's generated and end of every list

```
<div class="comment add-comment row-fluid">
  <div class="avatar">
    <img alt="Admin User1" src="http://localhost:3000/assets/DDDDDD.png">
  </div>
  <div class="message">
    <form accept-charset="UTF-8" action="/suggestions/50057a3160de7d361d000061/comments" class="new_comment" data-remote="true" id="new_comment" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" value="✓" type="hidden"><input name="authenticity_token" value="vVw7kLNGF4AiXmOMjryPDI70Mz5paZnW3usdgzxLsik=" type="hidden"></div>
    <fieldset>
      <div class="control-group">
        <div class="controls">
          <textarea cols="40" id="comment_content" name="comment[content]" placeholder="Add a comment..." required="required" rows="20"></textarea>
        </div>
      </div>
      <input class="btn btn-primary" name="commit" value="Post" type="submit">
    </fieldset>
</form>
  </div>
</div> 
```

I was able to use Unobtrusive JavaScript to create the comment, but when I load `create.js.haml`, I'm not sure what DOM object to attach it to.

In my `comments/create.js.haml`, I have

```
$(".add-comment").before("#{escape_javascript(render partial: "comments/show", locals: { :comment => @comment })}") 
```

Obviously this doesn't work since `add-comment` class is common to all lists. Is there a way that I can append the content of what I just created to the correct list and show a new add comment section?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T02:38:38.703

I finally was able to fix it. Debugging Unobtrusive JavaScript is bit harder than regular JS. Thank goodness to Google Chrome Dev Tool's Network feature.

In my View, I added an `id`

```
<div class="comment add-comment row-fluid" id="500614e960de7d313a000189">
  ...
</div> 
```

Then, within `create.js.haml`, I got the ID from the variable `@commentable`, which is passed in by the controller, converts to a DOM element, and then processes some more JS.

```
var div_id = $('.stream-item').find("##{escape_javascript(@commentable.id.to_s)}")
div_id.find("textarea").val("");
div_id.before("#{escape_javascript(render partial: "comments/show", locals: { :comment => @comment })}") 
```

# r - 在 hist() 函数中将 bar 转换为点

> ID：11532559
> 
> 赞同：1
> 
> 时间：2012-07-18T00:03:54.210
> 
> 标签：r, histogram

`hist()`将生成一个由许多“条”组成的直方图

如何用一个点替换每个条，使多个点看起来像一条连续曲线？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T00:18:11.480

一些虚拟数据

```
x <- rnorm(50)

# create a histogram
.hist <- hist(x)

# look at the structure to see what is created when calling hist
str(.hist)

## List of 7
## $ breaks     : num [1:10] -2.5 -2 -1.5 -1 -0.5 0 0.5 1 1.5 2
## $ counts     : int [1:9] 1 2 5 6 8 10 10 5 3
## $ intensities: num [1:9] 0.04 0.08 0.2 0.24 0.32 0.4 0.4 0.2 0.12
## $ density    : num [1:9] 0.04 0.08 0.2 0.24 0.32 0.4 0.4 0.2 0.12
## $ mids       : num [1:9] -2.25 -1.75 -1.25 -0.75 -0.25 0.25 0.75 1.25 1.75
## $ xname      : chr "x"
## $ equidist   : logi TRUE
## - attr(*, "class")= chr "histogram"

# we could plot the mids (midpoints) against the counts
with(.hist, plot(mids, counts)) 
```

![](../Images/71b6e4d60765ae147f0b5044eb4cdb1f.png)

或者你可以简单地使用`density`

```
plot(density(x)) 
```

![在此处输入图像描述](../Images/cff308aeacac5a1f1388bd216551f889.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:18:22.500

你想要的是直方图的密度图。这是之前的两个答案：第一个显示如何在直方图上叠加密度图。第二个关于如何创建密度图。

[R 直方图和密度图中的轴标记；密度图的多重叠加](https://stackoverflow.com/questions/9246040/axis-labeling-in-r-histogram-and-density-plots-multiple-overlays-of-density-plo)

[如何从频率表中绘制密度](https://stackoverflow.com/questions/10412300/how-to-plot-density-from-frequency-table)

# action - 如何在 ANTLR3 词法分析器规则中更改令牌类型？

> ID：11532562
> 
> 赞同：1
> 
> 时间：2012-07-18T00:04:05.927
> 
> 标签：action, antlr, token, fragment, lexer

我有一个使用一些片段的词法规则（整数）。在解析器规则（解析）中，我想根据生成相关令牌的片段以不同方式重写我的树。我做了一个小语法来展示我正在尝试的内容：

```
grammar subrange;

options {
    output=AST;
}

tokens {
    NumberNode;
    DecimalNode;
    BinaryNode;
    HexNode;
    OctalNode;
}

parse
    : Integer+ -> ^(NumberNode Integer)+
    ;

Integer
    : DECIMAL_LITERAL
    | BINARY_LITERAL
    | HEX_LITERAL
    | OCTAL_LITERAL
    ;

fragment BINARY_LITERAL
    : '2#' ('0' | '1')+
    ;

fragment HEX_LITERAL 
    : ('16#' | '0' ('x'|'X')) HEX_DIGIT+
    ;

fragment HEX_DIGIT
    : (DIGIT|'a'..'f'|'A'..'F')
    ;

fragment DECIMAL_LITERAL 
    : ('0' | '1'..'9' DIGIT*)
    ;

fragment OCTAL_LITERAL 
    : '8#' ('0'..'7')+
    ;

fragment DIGIT
    : '0'..'9'
    ;

SPACE : (' ' | '\t' | '\r' | '\n')+ {skip();}; 
```

我希望*解析*规则在虚构的 DecimalNode 下重写 DECIMAL_LITERAL，但在 BinaryNode 下重写 BINARY_LITERAL（而不是在 NumberNode 下的所有内容）。

我试图通过更改词法规则中的标记类型来做到这一点，以便我可以在解析规则中相应地重写。

我想我应该可以通过一个动作来做到这一点，但我一直无法弄清楚如何找到返回的令牌以更改其类型。[http://www.antlr.org/wiki/display/ANTLR3/Special+symbols+in+actions](http://www.antlr.org/wiki/display/ANTLR3/Special+symbols+in+actions)似乎表明 $tokenref 应该可以工作，但它根本没有被翻译。

还是有另一种方法可以做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T16:09:38.823

It seems a bit odd to me: grouping all such literals under a single `Integer` token, and then, in a parser rule you want to separate them again.

Why not just remove `Integer` and do:

```
integer
    : BINARY_LITERAL // when output=AST, this creates a CommonTree with type 'BINARY_LITERAL'
    | HEX_LITERAL    // ...
    | DECIMAL_LITERAL
    | OCTAL_LITERAL 
    ;

BINARY_LITERAL
    : '2#' ('0' | '1')+
    ;

HEX_LITERAL 
    : ('16#' | '0' ('x'|'X')) HEX_DIGIT+
    ;

DECIMAL_LITERAL 
    : ('0' | '1'..'9' DIGIT*)
    ;

OCTAL_LITERAL 
    : '8#' ('0'..'7')+
    ; 
```

?

Or you could keep the `Int(eger)` rule but set the numerical value of the various int-literals by doing:

```
Int
@init{int skip = 0, base = 10;}
    : ( DECIMAL_LITERAL
      | BINARY_LITERAL  {base = 2;  skip = 2;} 
      | OCTAL_LITERAL   {base = 8;  skip = 2;} 
      | HEX_LITERAL     {base = 16; skip = $text.contains("#") ? 3 : 2;} 
      )
      {
        setText(String.valueOf(Integer.parseInt($text.substring(skip), base)));
      }
    ;

fragment BINARY_LITERAL
    : '2#' ('0' | '1')+
    ;

fragment HEX_LITERAL 
    : ('16#' | '0' ('x'|'X')) HEX_DIGIT+
    ;

fragment DECIMAL_LITERAL 
    : ('0' | '1'..'9' DIGIT*)
    ;

fragment OCTAL_LITERAL 
    : '8#' ('0'..'7')+
    ; 
```

Be careful giving rules a name as some object/class/reserved-word of the target language can have (`Integer` in case of Java).

* * *

## EDIT

Okay. I'll leave my other answer there in case passers-by are wondering why on earth I'm proposing this... :)

Here's what (I think) you're after:

```
grammar T;

options {
  output=AST;
}

tokens {
  BinaryNode;
  OctalNode;
  HexNode;
  DecimalNode;
}

parse
 : integer+
 ;

integer
 : i=Integer -> {$i.text.startsWith("2#")}?         ^(BinaryNode Integer)
             -> {$i.text.startsWith("8#")}?         ^(OctalNode Integer)
             -> {$i.text.matches("(16#|0[xX]).*")}? ^(HexNode Integer)
             ->                                     ^(DecimalNode Integer)
 ;

Integer
 : DECIMAL_LITERAL
 | BINARY_LITERAL
 | HEX_LITERAL
 | OCTAL_LITERAL
 ;

fragment BINARY_LITERAL
 : '2#' ('0' | '1')+
 ;

fragment HEX_LITERAL 
 : ('16#' | '0' ('x'|'X')) HEX_DIGIT+
 ;

fragment HEX_DIGIT
 : (DIGIT|'a'..'f'|'A'..'F')
 ;

fragment DECIMAL_LITERAL 
 : ('0' | '1'..'9' DIGIT*)
 ;

fragment OCTAL_LITERAL 
 : '8#' ('0'..'7')+
 ;

fragment DIGIT
 : '0'..'9'
 ;

SPACE 
 : (' ' | '\t' | '\r' | '\n')+ {skip();}
 ; 
```

Parsing the input `"2#1111 8#77 0xff 16#ff 123"` will result in the following AST:

![enter image description here](../Images/4bb46e5e5473fa8a30a37708f63bf328.png)

Since you've lost the information about what type of `Integer` each literal is, you will have to do this check in the `integer`-rule (the `-> {boolean-expression}? ...` things after the rewrite rules).

# c++ - 指针，将参数传递给 main 和段错误

> ID：11532563
> 
> 赞同：0
> 
> 时间：2012-07-18T00:04:28.237
> 
> 标签：c++, pointers, segmentation-fault, command-line-arguments

标题中提到的三件事对我来说有些新鲜。我在概念上熟悉所有这些，但这是我第一次尝试用 C++ 从头开始​​编写自己的程序，它涉及所有这三件事。这是代码：

```
int main(int argc, char *argv[])
{
FILE *dataFile;
char string [180];
dataFile = fopen(argv[1],"r");
fgets(string,180,dataFile);
fclose(dataFile);
} 
```

它编译得很好，但是当我使用简单的输入文本文件执行时，我遇到了分段错误。我已经搜索了多个教程，但我不知道为什么。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:15:26.980

您的代码中有两个可能的分段错误原因：

*   `argv[1]`不存在，在这种情况下尝试访问它可能会导致段错误。检查`if (argc > 1)`以避免此问题。
*   `fopen`没有成功打开文件，在这种情况下尝试从文件中读取 ( `fgets`) 否则`fclose`会导致分段错误。在调用 fopen 之后，您应该立即检查返回值是否不是`NULL`，例如`if (dataFile == NULL)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:24:15.490

您应该在这里检查几件事。它可能仍然无法达到您的预期，但它会避免您遇到的错误。

```
int main(int argc, char** argv)
{
  if(argc > 1) // FIRST make sure that there are arguments, otherwise no point continuing.
  { 
    FILE* dataFile = NULL; // Initialize your pointers as NULL.
    const unsigned int SIZE = 180; // Try and use constants for buffers. 
                                      Use this variable again later, and if 
                                      something changes - it's only in one place.
    char string[SIZE];
    dataFile = fopen(argv[1], "r");
    if(dataFile) // Make sure your file opened for reading.
    {
      fgets(string, SIZE, dataFile); // Process your file.
      fclose(dataFile); // Close your file.
    }
  }
} 
```

请记住，在此之后，`string`可能仍为 NULL。有关更多信息，请参见[“fgets”。](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)

# ruby-on-rails - 如何自定义 Rails 本地化日期格式？

> ID：11532566
> 
> 赞同：2
> 
> 时间：2012-07-18T00:04:32.847
> 
> 标签：ruby-on-rails, ruby, date, localization

我正在覆盖具有以下代码的 Rails 引擎的视图：

```
<%= l(item.publish_date, :format => :long) %> 
```

其格式变为：

```
July 17, 2012 23:27 
```

我想改变它，使日期看起来更像：

```
July 17th, 2012  # I don't even really want the time 
```

但是，我对 Rails 本地化的工作方式完全陌生，所以我不知道如何找到有关如何自定义此日期格式的文档。我需要做什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T00:23:30.790

有关详细信息，请参阅[此处的指南](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)，但您可以在 yml 中指定格式

```
# config/locales/pirate.yml
pirate:
  time:
    formats:
      short: "arrrround %H'ish" 
```

[goodstrftime](http://www.foragoodstrftime.com/)是一个有帮助的好网站。它将向您显示您指定格式的预览。

例如：

```
%B %d, %Y

July 18, 2012 
```

使用 active 支持[ordinalize 方法](https://stackoverflow.com/questions/165170/in-ruby-on-rails-how-do-i-format-a-date-with-the-th-suffix-as-in-sun-oct-5)来获取 'st'、'rd'、'th' 后缀。

# html - 当鼠标进入/离开链接 FireBug 时如何检查添加/删除的元素？

> ID：11532567
> 
> 赞同：3
> 
> 时间：2012-07-18T00:04:38.877
> 
> 标签：html, css, firefox, twitter-bootstrap, firebug

我有 Bootstrap 工具提示插件，当鼠标进入/离开元素时显示/隐藏`<div>`内部。`<body>``<a>`

`<div>`当我使用元素选择器并传递链接时，我可以看到新添加到正文中。但是当我再次移动鼠标以检查新`<div>`样式时，当然`<div>`会从 DOM 中删除。

我如何选择它来检查计算的样式？我需要这个，因为我的工具提示显示的风格与 Bootstrap 参考工具提示有点不同。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T22:14:11.957

Firebug 1.10 为“Break on..”（`alt`- `ctrl`- `b`）添加了键盘快捷键。这在这种情况下非常方便（因为通常您必须将鼠标移动到 Firebug，这将隐藏您的弹出窗口）。

*   打开 Firebug，转到“脚本”面板。
*   在页面上做你的事情以显示工具提示
*   单击键盘快捷键以激活“Break on next”。
*   将鼠标移离工具提示

在执行页面上的任何 JS（例如隐藏弹出窗口的 JS）之前，Firebug 将暂停，您可以自由检查所有内容。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T05:23:32.183

我使用了一个小技巧：如果在显示工具提示时右键单击链接，然后直接转到萤火虫面板，工具提示不会消失。

或者您可以将触发选项设置为手动并自己显示：`$('#sel').tooltip('show')`。

# javascript - 为什么我的 Rails 应用程序无法正确响应生产环境中的 .js 格式？

> ID：11532570
> 
> 赞同：0
> 
> 时间：2012-07-18T00:05:11.890
> 
> 标签：javascript, ruby-on-rails, jquery, render

我有一个非常简单的 Rails 应用程序，它的某些功能是基于 ajax 的。当我在开发环境中使用它时，一切都按预期运行。但是，在生产环境中发生了一些奇怪的事情：当进行 ajax 调用时，呈现的是 HTML（基于 HAML）布局而不是 js（基于咖啡）。

在比较来自生产和开发的日志时，很明显我在处理响应的方式上做错了，但我一直在摸不着头脑好几个小时了。

假设我的请求是：/software_tags/1/edit.js 在我的开发日志中，我可以看到（输出是正确的，我得到了预期的 javascript 页面）：

```
Started GET "/software_tags/1/edit.js" for 127.0.0.1 at 2012-07-17 16:59:34 -0700
Processing by SoftwareTagsController#edit as JS
  Parameters: {"id"=>"1"}
  Rendered shared/_error_messages.haml (0.1ms)
  Rendered software_tags/_form.haml (4.5ms)
  Rendered software_tags/edit.js.coffee (5.7ms) <---- THIS IS GOOD!
Completed 200 OK in 10ms (Views: 8.1ms | ActiveRecord: 0.4ms) 
```

然而，在我的开发日志中，我看到（输出错误，我得到了 HTML 页面）：

```
Started GET "/software_tags/1/edit.js" for x.x.x.x at 2012-07-18 01:59:54 +0200
Processing by SoftwareTagsController#edit as JS <--- Wouldn't that force the edit.js.coffee to be rendered instead of the edit.haml?
  Parameters: {"id"=>"1"}
  Rendered shared/_error_messages.haml (0.1ms)
  Rendered software_tags/_form.haml (2.8ms)
  Rendered software_tags/edit.haml (3.2ms)      <---- THIS IS WRONG!
Completed 200 OK in 5ms (Views: 3.5ms | ActiveRecord: 0.5ms) 
```

在我的控制器中，编辑操作如下所示：

```
 def edit
    respond_to do |format|
      format.js
      format.html
      format.json { render json: @software_tag }
    end
  end 
```

但是，当我尝试访问 json 数据时，所有环境中的一切都很好，那么 js 输出的错误输出可能是什么问题？

编辑：也许我错过了一些相当简单的东西。我仍然无法从我的生产环境中实现开发中的工作。我正在使用 ruby​​ 1.9.3 和 Rails 3.2.6，以及 jQuery / jQuery-ujs。基本上，我会改进我的问题：当使 link_to remote: true 时，我如何强制服务器用 javascript 文件回答我（并在 respond_to.js 块而不是 html 块上分支）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T14:02:01.340

如果是 :assets 组内的 gem，则此 gem 仅用于资产目录（在 app、vendor、lib 中），而不用于视图。

有三种方法可以正常工作：

1.  将咖啡栏移到资产之外
2.  在 appllication.rb 中取消注释：`# Bundler.require(:default, :assets, Rails.env)`
3.  使用 gem coffee-views [https://github.com/yury/coffee-views](https://github.com/yury/coffee-views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:42:45.740

我终于找到了我的问题的答案。这对我来说听起来像是一个错误，或者我可能错过了一些东西。

我已将调试消息放在我的控制器上，如下所示：

```
def edit
  respond_to do |format|
    format.js { Rails.logger.info "in JS handler" }
    format.html { Rails.logger.info "in HTML handler" }
    format.json { render json: @software_tag }
  end
end 
```

事实上，调用了正确的操作，但文件 edit.haml 被渲染而不是 edit.js.coffe，即使在 format.js 块中也是如此。

我找到的解决方案是将 gem 'coffee-rails' 从我的 gemfile 中移到 :assets 组之外，如下所示： 之前：

```
group :assets do
  gem 'uglifier'
  gem 'sass-rails'
  gem 'coffee-rails'
end 
```

后：

```
gem 'coffee-rails'
group :assets do
  gem 'uglifier'
  gem 'sass-rails'
end 
```

现在，一切都在生产环境中按预期工作。

谢谢你们的帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T05:33:38.650

你有没有尝试过：

```
respond_to :js, :only => :edit 
```

在控制器的顶部？

或者在 format.js 块中指定模板渲染，就像您使用 json 块一样。

# html - 网站搜索和抓取

> ID：11532573
> 
> 赞同：0
> 
> 时间：2012-07-18T00:05:25.833
> 
> 标签：html, search, web-scraping, screen-scraping

我经常出差，经常出差 kayak.com，这让我开始思考 kayak 如何完成对所有这些网站的搜索和抓取。

我可以理解从加载的 HTML 页面中获取数据，但是他们如何在没有最终用户看到 Expedia 网站的情况下完成后端搜索（例如 Expedia.com）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:12:07.370

我已经建立了几十个这样的元搜索。有几个选项：

1.  成为会员：通常网站会给您一个 API，您可以向其提交搜索并快速获得响应。大多数时候，你会因为推荐而得到一点回扣。
2.  抓取目标站点：您可能不想尝试获取航空公司未来的整个行程，因此这里最好的计划是制定一个例程，将用户的搜索、将其提供给站点并获得结果背部。您的前端将需要处理异步结果或计划让用户等待很长时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T13:41:14.223

Actually depending on affiliate marketing channels for your SQL Results is not a good idea. I would find a way to bulk insert the data on your end and build a search engine around the data feed results. Your dependence on others will affect the quality of a site your building.

Also think of it like a CAR, the more options you add to it the more there is to break.

Checkout Avoli.com.

# codeigniter - CodeIgniter - 从内容视图文件的页脚视图中加载脚本

> ID：11532574
> 
> 赞同：1
> 
> 时间：2012-07-18T00:05:34.167
> 
> 标签：codeigniter, buffer, delay

我有一个视图模块，其中包含用于上传文件的 html 和 javascript。我希望将脚本加载到页脚中（仅作为示例）。所以基本上视图文件应该能够改变页脚或页眉的内容。我试图通过首先将页面读入缓冲区然后将内容输出到模板文件来做到这一点。

我的控制器有一个看起来像这样的功能 -

```
public function test()
{
    ob_start();
    $this->load->view('content');  // uploader module
    ob_end_clean();
    $this->load->view('template', array($out1, $out2));  // ideally this will be output into a template file.  right now i'm just trying to echo it
} 
```

我的上传模块看起来像这样 -

```
<div>some div for uploading</div>
<?php $out1 = ob_get_contents(); ?>
<?php ob_clean(); ?>

<script>
Logic for uploading that needs to go in the footer
</script>
<?php $out2 = ob_get_contents(); ?>
<?php ob_clean(); ?> 
```

模板文件看起来像这样 -

```
<html>
<body>
<?php echo $out1; ?>

<scripts>other javascript code and includes</script>
<?php echo $out2; ?>
</body>
</html> 
```

但是我无法保存缓冲区内容并将其传递回控制器（$out1，$out2）。有谁知道我可以如何实现这个？目标基本上是延迟加载 javascript 代码，但将 javascript 代码驻留在内容文件中以使其更易于编码。最好的方法是什么？我需要一个全局数组还是一个新的父控制器？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:18:45.480

您可以像这样在视图之间传递变量：

```
<? ob_start(); ?>
<script type="text/javascript">
  var foo = 66;
  console.log(foo + 16);
</script>
<? $this->load->var('my_script', ob_get_clean()) ?> 
```

如果您在视图（或控制器，就此而言）运行上述代码^^，则缓冲区的内容将在稍后加载为`$my_script`.

# android - 使用处理草图进行 Android 开发

> ID：11532579
> 
> 赞同：1
> 
> 时间：2012-07-18T00:06:38.767
> 
> 标签：android, arduino, processing

我是一名嵌入式系统工程师。我希望使用我的 Android 设备 ( [Galaxy Nexus](http://en.wikipedia.org/wiki/Galaxy_Nexus) ) 控制我的所有电子产品（机器人、四轴飞行器等）。我听说与创建 Android 应用程序的正统方法相比，[处理草图要容易得多。](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)

我的目标是使用处理草图来控制我的机器人，我还想使用我手机的传感器（加速度计、陀螺仪，环境光等）用于控制我的机器人。将处理用于我的目的是一个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T03:57:23.070

*[使用 Processing 使用 Android 控制 Arduino](http://stream.tellart.com/controlling-arduino-with-android/)*可能与您正在寻找的类似。

据我所知，这个库只为您提供处理草图和 Arduino 之间的基本串行通信。我相信它不支持除[ATmega](http://en.wikipedia.org/wiki/Atmel_AVR#Device_overview)之外的芯片，也不支持无线通信，但串行通信是相当标准化的，所以你可能对其他串行设备有好运。

请记住，Processing for Android 并未针对性能进行优化，因为底层`PApplet`类不断调用您的`draw()`方法，因此会旋转 CPU 并可能重绘图形。你会很快耗尽电池寿命。如果您打算将 Android 安装在四轴飞行器上并通过网络进行控制，那么使用专用无线设备（例如[Xbee](http://en.wikipedia.org/wiki/XBee)用于无线部分）会更好。您仍然可以将 Android + Arduino/Whatever + Client Xbee 用于“远程”。最后一个缺点是在 Processing for Arduino 中获取核心 API 访问可能很棘手。标准的处理功能 + 管道已经很好地移植了，但是如果您尝试例如拨打电话或阻止手机进入睡眠状态，您可能会自己结束。

话虽如此，一旦您完成设置，Processing + Android 就是小菜一碟。对于一个普通的应用程序，它肯定比必须经历整个开发链要好，而且您不必编写任何[Swing](http://en.wikipedia.org/wiki/Swing_%28Java%29)等效项。最好的是，它可以让您灵活地通过计算机或 Android 设备控制您的设备。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T23:25:00.927

用于 Android 处理的 Ketai 库将为您提供帮助。Ketai 提供了一个特定的传感器库，可以轻松访问设备的传感器，例如加速度计、倾斜度、GPS 等。

# excel - 将单个 Excel 列拆分为两个单独的列，拆分值？

> ID：11532581
> 
> 赞同：1
> 
> 时间：2012-07-18T00:07:03.613
> 
> 标签：excel, excel-2010

如何拆分其值定义如下的单个 Excel 列：

=HYPERLINK("http://whatever.com","网站标题")

分成两列，一列带有标题（“网站标题”），另一列带有 URL（“http://whatever.com”）

任何人？

（这是针对 Excel 2010 的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:34:11.043

如果您愿意使用 VBA，这将起作用。

```
Option Explicit

Sub SplitHyperLinkFormula()
    Dim r As Range
    For Each r In Selection
        If InStr(1, r.Formula, "=hyperlink", vbTextCompare) = 1 Then
            r.Offset(0, 1).Value = GetHyperlink(r.Formula) 'Split URL
            r.Offset(0, 2).Value = r.Value                 'Split Title
        End If
    Next r
End Sub

Function GetHyperlink(s As String)
    'Requires =HYPERLINK formula, assumes hyperlink has no commas.
    s = Left(s, InStr(s, ",") - 2)
    GetHyperlink = Right(s, Len(s) - 12)
End Function 
```

只需突出显示您需要拆分的任何内容并运行 SplitHyperLinkFormula。它会将您想要的两个值放在单元格右侧的两个单元格中。

警告：如果由于某种原因您的超链接中有逗号，这将只返回逗号之前的 URL 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T14:59:57.660

这是不使用 VBA 的替代方案。

1.  选择范围，使用 Find Replace 将 = 符号更改为其他内容（如 #）。这用字符串替换公式

    '#HYPERLINK("http://whatever.com","网站标题")'

2.  使用文本到列，使用“（双引号）作为分隔符，并丢弃除 URL 和网站标题之外的所有列。

# objective-c - Objective-C NSString 自动释放问题

> ID：11532583
> 
> 赞同：1
> 
> 时间：2012-07-18T00:07:12.443
> 
> 标签：objective-c, cocoa

在过去的两个小时里，我只是用我的前额猛撞我的代码，试图找出它有什么问题。我最终将其缩小到一对线。

```
NSArray *components = [string componentsSeparatedByString:@" "];

if ([components count] > 1){                        
    retainedProperty1 = [header objectAtIndex:0];

    retainedProperty2 = [header objectAtIndex:1];
} 
```

每当我在执行延迟后尝试访问这些字段中的任何一个（我正在使用[CocoaAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket/)，它会在第二次从套接字读取时拉入我需要的该对象的其余数据），它们都会变成僵尸。我只是想知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T00:09:30.557

你在对自己撒谎。您是在说`retainedProperty1 = ...`，但您实际上是在分配给 ivar，而不是属性。除非你使用 ARC（你没有使用或者你不会有这个问题），否则这不会做任何内存管理。它甚至不会释放此 ivar 的先前值。你应该说

```
self.retainedProperty1 = ...
self.retainedProperty2 = ... 
```

# java - 如何跨方法重用受保护的 JMenuItem 变量？

> ID：11532584
> 
> 赞同：2
> 
> 时间：2012-07-18T00:07:13.273
> 
> 标签：java, swing, protected

为什么在类 actionPerformed() 的第一行，我不能使用`protected JMenuItem menuItem;`我在 MainMenuBar() 类顶部声明的变量？

第二行是我注释掉的那一行，它有效。

但是，我希望能够跨类使用一个 JMenuItem 对象名称，而不必重新实例化它。

如何在此处正确重用 menuItem？

谢谢你。

```
package base;

import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import javax.swing.JTextArea;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;

public class MainMenuBar implements ActionListener {
    protected JMenuBar menuBar;
    protected JMenu menu;
    protected JMenuItem menuItem;

    JTextArea output;
    String newline = "\n";

    public JMenuBar getMenuBar() {
        menuBar = new JMenuBar();

        // 1st Menu
        menu = new JMenu("File");
        menu.setMnemonic(KeyEvent.VK_F);

        menuItem = new JMenuItem("New Note");
        menuItem.setMnemonic(KeyEvent.VK_N);

        menu.add(menuItem);
        menu.addSeparator();

        menuItem = new JMenuItem("Exit");
        menuItem.setMnemonic(KeyEvent.VK_X);

        menu.addActionListener(this);
        menu.add(menuItem);

        menuBar.add(menu);

        // 2nd Menu
        menu = new JMenu("Help");
        menu.setMnemonic(KeyEvent.VK_H);

        menuItem = new JMenuItem("About Java Sticky Notes");
        menuItem.setMnemonic(KeyEvent.VK_A);

        menu.addActionListener(this);
        menu.add(menuItem);

        menuBar.add(menu);

        return menuBar;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        menuItem source = new JMenuItem("MainMenuBar.java");
        //JMenuItem source = (JMenuItem) (e.getSource());
        String s = "Action event detected." + newline + "    Event source: "
                + source.getText() + " (an instance of " + getClassName(source)
                + ")";
        output.append(s + newline);
        output.setCaretPosition(output.getDocument().getLength());
    }

    // Returns just the class name -- no package info.
    protected String getClassName(Object o) {
        String classString = o.getClass().getName();
        int dotIndex = classString.lastIndexOf(".");
        return classString.substring(dotIndex + 1);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:10:11.873

你有一个语法错误，编译器假设`menuItem`是一个类，因为它后面跟着`source`. 更改以下内容：

```
menuItem source = new JMenuItem("MainMenuBar.java"); 
```

至：

```
menuItem = new JMenuItem("MainMenuBar.java"); 
```

但是你必须照顾`source`，因为它在以下几行中使用。

# jsf - p:menuItem 动作和动作处理程序上的重定向 - windowId 被附加到重定向 URL 的末尾

> ID：11532586
> 
> 赞同：0
> 
> 时间：2012-07-18T00:07:34.853
> 
> 标签：jsf, redirect, primefaces, prettyfaces

我对 p:menuItem 有这个问题 - 使用 PF 3.3.1、PrettyFaces 3.3.3 和 JSF/Mojarra2.1。

所以我有一组 p:menuItems 需要从当前页面传递一个“ID”参数。但是，我不希望构建以下形式的 URL：/page/targetPage?id=id&faces-redirect=true。我想做的是，在页面操作处理程序上，重定向到有问题的 URL。但是，问题是生成的重定向将 windowId 附加到末尾，我无法访问 targetURL！

在我的小脸上：

```
<p:menuitem action="#{myActions.performAction}" ajax="false" value="navigateToThisAction"/> 
```

在我的支持 bean 中：

```
public String performAction() {
    return navigate("pretty:myAction");
}

protected String navigate(String mappingId) {
    HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance().getExternalContext().getRequest();
    PrettyContext context = PrettyContext.getCurrentInstance(request);
    PrettyURLBuilder builder = new PrettyURLBuilder();

    UrlMapping mapping = context.getConfig().getMappingById(mappingId);
    String targetURL = builder.build(mapping, true, getId());

    try {
        FacesContext.getCurrentInstance().getExternalContext().redirect(targetURL);
    } catch (IOException ioe) {
        System.out.println("Error redirecting..." + ioe.getMessage());
    }
    return null;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T22:12:19.213

我发现问题是在重定向之前我在 URL 前面缺少 request.getContextPath() - 感谢所有回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T17:46:00.887

如果 windowId=xxxxx 正在通过您的调用添加`FacesContext.getCurrentInstance().getExternalContext().redirect(targetURL);`，那么您可能需要检查您的框架以查看添加了什么。PrettyFaces 不会添加 windowId 参数，所以我猜它是其他东西，您正在使用的其他一些库，并且可能有一种方法可以在给定页面上手动禁用它。

# ruby-on-rails-3.2 - 如何接受十进制属性的“$10,000”格式输入？

> ID：11532588
> 
> 赞同：0
> 
> 时间：2012-07-18T00:07:55.307
> 
> 标签：ruby-on-rails-3.2

我的模型有：

```
validates :budget,  :numericality => {:greater_than_or_equal_to => 0.01},
                    :presence => true,
                    :format => { :with => /^[$]?([0-9][0-9]?([,][0-9]{3}){0,4}([.][0-9]{0,4})?)$|^[$]?([0-9]{1,14})?([.][0-9]{1,4})$|^[$]?[0-9]{1,14}$/ } 
```

但是提交带有美元符号或逗号值的表单会导致它设置 :budget 为`0.0`.

接受像`$1,000`这个十进制列这样的值的最好/最干净的方法是什么？*（我在装饰器中将输出格式化为货币，别处）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T06:28:17.370

如果您只想保存原始值，则可以创建自定义设置器：

```
def budget= value
  write_attribute :budget, value.scan(/[0-9]/).join.to_f
end 
```

但是，如果您打算在项目中使用货币做更多事情，我强烈建议您查看[money-rails](https://github.com/RubyMoney/money-rails) gem。它为您提供解析器、验证器、算术运算符等等来处理货币。

# android - 跨 Google App Engine 上的 GET 和 POST 的烧杯会话？

> ID：11532589
> 
> 赞同：2
> 
> 时间：2012-07-18T00:08:08.780
> 
> 标签：android, python, google-app-engine, session, beaker

我在 Google App Engine 上使用 Beaker Session 来管理 HTTP 请求之间的持久数据。

是否可以从 GET 和 POST 请求访问相同的会话？

我试图访问会话对象，但它们不是同一个对象：

```
def get(self):
    session = self.request.environ['test.beaker.session']
    ...

def post(self):
    session = self.request.environ['test.beaker.session']
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T15:41:19.967

看看这篇关于实现类似内容的帖子：[Android: Example for using a cookie from HttpPost for HttpGet](https://stackoverflow.com/questions/3407764/android-example-for-using-a-cookie-from-httppost-for-httpget)

答案是您需要确保会话 cookie 存储在 android 客户端，并且在与服务器的交互过程中可访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:57:42.273

从请求到请求（记住多个服务器），它们不会是相同的对象（对象身份）。但是，通过正确的设置，会话对于用户会话将是一致的。

如果没有自定义后端（appengine 的数据存储或内存缓存），您只能使用基于 cookie 的会话。如果您将某些内容放入会话中，则需要调用`session.save()`或配置它以进行自动保存。你在你的代码中做过这些吗？

您如何确定它们是不同的，对象身份或内容？

您应该提供有关如何设置的更多详细信息。

# c# - 访问 Web 脚本

> ID：11532590
> 
> 赞同：0
> 
> 时间：2012-07-18T00:08:11.080
> 
> 标签：c#, web

我最近一直在尝试使用 C#s 网络浏览器，我的好奇心已经达到顶峰。浏览器实际上是如何访问网页的代码的？我的意思是，html、php、javascript、ajax，你有什么......它如何访问它，谁能给我一个如何自己访问它的编码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:22:18.297

这是一个非常高层次的问题，只能用低层次的答案来回答。在 StackOverflow 回复中回答太多了。

Web 浏览器组件是一个由 Shdocvw.dll 承载的 ActiveX 组件。[请参阅这篇 MSDN 文章，了解 Internet Explorer 的工作原理](http://msdn.microsoft.com/en-us/library/aa741313%28v=vs.85%29.aspx)。

这个问题根本不是 C# 特有的，因为 WebBrowser 控件的作用与它在 IE 中的作用相同——它是相同的控件。

如果您不熟悉浏览器的工作原理、套接字、TCP 或一般网络，那么您可能无法理解它是如何做任何事情的。

另外：PHP 是一种服务器端语言。它在将任何数据传输到客户端之前在服务器上进行处理。

如果您正在寻找有关下载网站内容的 C# 示例，您可以查看 StackOverflow 和 MSDN 上已有的大量示例，即此处：[WebClient Class - MSDN](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)。

# javascript - javascript遍历逻辑连接的元素对

> ID：11532591
> 
> 赞同：1
> 
> 时间：2012-07-18T00:08:16.900
> 
> 标签：javascript

我有一个网站，其中包含一系列用户可以编辑的空文本字段。每个文本字段旁边都有一个复选框，如下所示：

```
<input type="text" id="textfield1" size="60" /><input type="checkbox"> <br />
<input type="text" id="textfield2" size="60" /><input type="checkbox"> <br />
<input type="text" id="textfield3" size="60" /><input type="checkbox"> <br /> 
```

一旦用户点击提交，有没有办法逐行遍历文本输入和复选框对？

例如，是否有可能以某种方式将文本字段和复选框组合在一起，并通过这些组进行迭代 group.textfield.value =？和 group.checkbox.value = ?

我需要一种简单的方法来确定字段的文本以及该特定字段是否选中了它的复选框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:17:00.710

只需遍历`text`输入，并使用`.nextSibling`抓取每个相邻`checkbox`的 .

确保不要在它们之间引入任何空格。

* * *

另一种选择是将它们分组到`fieldset`元素中......

```
<fieldset>
    <input type="text" id="textfield1" size="60" /><input type="checkbox">
</fieldset>
<fieldset>
    <input type="text" id="textfield2" size="60" /><input type="checkbox">
</fieldset>
<fieldset>
    <input type="text" id="textfield3" size="60" /><input type="checkbox">
</fieldset> 
```

...然后迭代`fieldset`元素，并使用`.children[0]`和`.children[1]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:54:56.713

给每个输入一个可以用来关联对的名称（无论如何他们都需要）：

```
<form onsubmit="doStuff(this);">
  <input type="text" id="textfield1" name="textfield1" size="60">
   <input type="checkbox" name="textfield1-cb"> <br>
  <input type="text" id="textfield2" name="textfield2" size="60">
   <input type="checkbox" name="textfield2-cb"> <br>
  <input type="text" id="textfield3" name="textfield3" size="60">
   <input type="checkbox" name="textfield3-cb"> <br>
  <input type="submit">
</form>

<script type="text/javascript">
function doStuff(form) {
  var control, controls = form.elements;
  var pair;

  for (var i=0, iLen=controls.length; i<iLen; i++) {
    control = controls[i];
    pair = form[control.name + '-cb'];

    if (control.type == 'text' && pair) {
      // control is the input and pair is the checkbox
    }
  }
}
</script> 
```

以上仅要求控件按名称关联，而不是按结构关联，这应该使其更加健壮。

# php - php - 如何捕获错误“已超过允许的文件上传的最大数量”

> ID：11532592
> 
> 赞同：4
> 
> 时间：2012-07-18T00:08:30.110
> 
> 标签：php

我似乎无法仅通过使用 PHP 来理解这一点。这就是我所做的：

```
$maxFiles = (int)ini_get('max_file_uploads');

if ($maxFiles < count($_FILES['name'])) {
    echo 'ERROR';  
} 
```

但`count($_FILES['name'])`总是等于`$maxFiles`（如果发生错误）。而且我真的不想将条件更改为`==`......这似乎不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:31:48.073

我不知道用例到底是什么，但从您的问题来看，用户/访问者似乎可以将文件上传字段添加到表单中。

在这种情况下，您可以做的是将 的值放入`$maxFiles`javascript 变量中，并且在达到最大值时简单地不添加新字段。

# iphone - 如何使用 CLLocationManager 主动跟踪距离

> ID：11532594
> 
> 赞同：0
> 
> 时间：2012-07-18T00:08:50.987
> 
> 标签：iphone, objective-c, cllocationmanager

我想知道，如何使用 CLLocationManager 主动（和精确）跟踪用户行进的距离。目前我的代码如下所示：

```
- (void)locationManager:(CLLocationManager*)manager didUpdateToLocation:(CLLocation*)newLocation fromLocation:(CLLocation*)oldLocation {
    totalDistance += [newLocation distanceFrom:oldLocation] / kMilesToMeters;
} 
```

但是，当我用里程表检查时，结果非常不准确。有没有更准确的方法可以在用户移动时主动计算距离？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:51:35.897

GPS非常不准确。有时它可以将你“传送”到其他地方，然后带你回去。所以你要做的第一件事就是过滤掉所有的虚假数据。您可以忽略变化太频繁的位置：例如，GPS 告诉您您在 p1(x,y) 并且在几秒钟后它告诉您您在 p2(x+20m, y+10m) 它告诉您您的位置是 p3(x+2m, y+3m)。所以很明显 p2 可能是错误的位置，你可以忽略它。

另外一个好主意是不要直接使用位置来计算距离，而是逐步逼近这些值（也许最小二乘法对你有好处，或者如果你喜欢硬数学，那么你可以看看 Kalman filter ）。

# css - 当一个 li 元素推动 ul 的高度时，li 元素不会扩展到 ul 元素的高度

> ID：11532595
> 
> 赞同：1
> 
> 时间：2012-07-18T00:08:59.970
> 
> 标签：css, list, navigation, html-lists

我试图让我的所有 li 元素占据包含它们的 ul 元素的整个高度，然后将所有 li 元素内容对齐到底部。

我无法通过第一部分，当我在其中一个 li 元素中有图像时，其他 li 元素不会扩展到相同的高度。

这是我的html

```
<nav id="sliderNav">
<ul id="sliderWrap">
      <li>wow 1</li>
      <li>wow2<br /> cool
      </li>
      <li>
          <img src="blank-trans.png" width="290" height="417" />
      </li>
      <div class="clearfloat"></div>
    </ul>
</nav> 
```

我的简单CSS是

```
#sliderNav{
    text-align:center;
    background-color:#000;
}
#sliderNav ul{
    list-style:none;
    display:inline-block;
    background-color:#0F0;
    height:100%;
}
#sliderNav ul li{
    display:block;
    float:left;
    height:100%;
    background-color:#C3C;
} 
```

我得到的是： ![显示问题的图像](../Images/56fd4a6db387081848fc4ea543052e4e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:02:38.717

几个问题：

*   设置高度：

如果其父元素没有明确设置的高度，则不能将元素的高度设置为 100%。

*   将内容与底部对齐：

将内容与底部对齐的最佳方法是将其放入绝对定位的容器中并将“底部”设置为“0”。这可能会使您当前的标记变得复杂，所以...

我的解决方案：

通过 jQuery（或者您可以使用任何库或普通 javaScript）循环遍历所有 li 并获取最高的高度，并将其存储在变量中：

```
maxHeight = 0;
$("li").each(function() {
     maxHeight = maxHeight > $(this).height() ? maxHeight : $(this).height();
}) 
```

在你得到最高的之后，再次遍历 li 并设置一个顶部填充，它等于 maxHeight (tallest li) - 当前 li 的高度。这不仅会使所有 li 的高度相同，而且还会自动将内容对齐到 li 的底部：

```
$("li").each(function() {
    $(this).css('padding-top', maxHeight - $(this).height() + 'px');
}) 
```

我为你摆弄了这个：

[http://jsfiddle.net/egrBV/2/](http://jsfiddle.net/egrBV/2/)

我为 li 添加了一个右边框，以便您可以看到它们是如何划分的。

希望有帮助

# php - 最佳实践：如何构建数组 - 标准和命名约定

> ID：11532598
> 
> 赞同：13
> 
> 时间：2012-07-18T00:09:29.783
> 
> 标签：php, arrays, naming-conventions

就哪些元素保存迭代器与细节元素而言，多维数组结构的最佳实践是什么？

我的大部分编程经验（我主要是为了好玩）来自谷歌上的以下教程，所以如果这似乎是一个非常愚蠢的问题，我提前道歉——但我确实想开始改进我的代码。

每当我需要创建一个多维数组时，我的命名总是将计数器放在第一个元素中。

例如，如果我有一个如下的一维数组：

```
$myArray['year']=2012;
$myArray['month']='July';
$myArray['measure']=3;
// and so on. 
```

但是，如果我想让同一个数组保留一些历史所有者，我会添加另一个维度并将其格式化如下：

```
$myArray[$owner]['year']=2012;
$myArray[$owner]['month']='July';
$myArray[$owner]['measure']=3; 
```

编辑：为了确保我的示例不会令人反感或朝着正确的方向前进，我基本上遵循以下结构：

```
$myArray[rowOfData][columnOfData] 
```

现在，我的问题是关于公认的约定。我应该改为执行以下操作吗？

```
$myArray['year'][$owner]=2012;
$myArray['month'][$owner]='July';
$myArray['measure'][$owner]=3; 
```

编辑：使用上面的编辑，应该是：

```
$myArray[columnOfData][rowOfData] 
```

我搜索了数组命名约定，但一直在讨论是否将数组命名为复数形式的文章。我命名它们的方式似乎更合乎逻辑，我认为它遵循一个更类似于对象的结构，即`object->secondaryLevel->detail`，但据我所知，我一直在做这件事。随着我越来越喜欢编程，如果我的习惯是错误的，我宁愿改变它们。

是否有一个公认的标准，或者它只是与数组有关吗？如果您正在查看其他人编写的代码，您会期待什么格式？我知道任何有意义/直观的结构都被接受。

同样从迭代的角度来看，以下哪一项更直观？：

```
for($i=0;$i<$someNumber;$i++)
{
    echo $myArray[$i]['year'];
    // OR
    echo $myArray['year'][$owner];
} 
```

编辑：我确实将这篇文章标记为 c# 和 Java，因为我想获得一些 PHP 程序员之外的意见。我认为，由于数组在许多不同的语言中使用，从各种语言的程序员那里获得一些输入会很好。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-20T00:44:31.490

你的问题是主观的，因为每个人对你所说的情况可能有不同的方法，你甚至问这个问题是明智的；如何最好地命名您的变量、类等。遗憾的是，我花费的时间比我愿意承认的要确定有意义且满足要求的最佳变量名称还要多。我的最终目标是编写“[自我记录](http://en.wikipedia.org/wiki/Self-documenting)”的代码。通过编写自文档代码，您会发现添加功能或修复出现的缺陷要容易得多。

多年来，我发现这些做法对我最有效：

**数组：总是复数**

我这样做是为了使循环控制结构更具语义意义，并​​且更易于使用。

```
// With a plural array it's easy to access a single element
foreach ($students as $student) {}

// Makes more sense semantically
do {} (while (count($students) > 0); 
```

**对象数组 > 深度多维数组**

在您的示例中，您的数组开始爆炸为 3 元素深的多维数组，并且与 Robbie 的代码片段一样正确，它展示了迭代多维数组所需的复杂性。相反，我建议创建可以添加到数组中的对象。请注意，以下代码仅用于演示，我总是使用访问器。

```
class Owner
{
    public $year;
    public $measure;
    public $month;
}

// Demonstrative hydration 
for ($i = 1 ; $i <= 3 ; $i++) {

    $owner = new Owner();

    $owner->year = 2012;
    $owner->measure = $i;
    $owner->month = rand(1,12);

    $owners[] = $owner;
} 
```

现在，您只需要遍历一个平面数组即可访问您需要的数据：

```
foreach ($owners as $owner) {
    var_dump(sprintf('%d.%d: %d', $owner->month, $owner->year, $owner->measure));
} 
```

这种对象数组方法的一个很酷的地方是添加增强功能非常容易，如果您想添加所有者名称怎么办？没问题，只需将成员变量添加到您的类并稍微修改您的水合作用：

```
class Owner
{
    public $year;
    public $measure;
    public $month;
    public $name;
}

$names = array('Lars', 'James', 'Kirk', 'Robert');

// Demonstrative hydration 
for ($i = 1 ; $i <= 3 ; $i++) {

    $owner = new Owner();

    $owner->year = 2012;
    $owner->measure = $i;
    $owner->month = rand(1,12);
    $owner->name = array_rand($names);

    $owners[] = $owner;
}

foreach ($owners as $owner) {
    var_dump(sprintf('%s: %d.%d: %d', $owner->name, $owner->month, $owner->year, $owner->measure));
} 
```

您必须记住，上面的代码片段只是建议，如果您更愿意坚持使用深度多维数组，那么您将不得不找出对**您**和您一起工作的人有意义的元素排序安排，如果您认为您六个月后设置会遇到问题，那么最好在有机会的时候实施更好的策略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T03:15:47.983

您想让自己（以及可能的其他用户）更容易理解您的代码在做什么，以及您在编写代码时的想法。想象一下寻求帮助，想象输出调试代码，或者想象在你最后一次接触代码 12 个月后返回修复错误。哪个对您/其他人来说是最好和最快的理解？

如果您的代码要求您“每年显示数据”，那么第一个更合乎逻辑。如果您的想法是“我需要将所有措施收集在一起，然后我将处理这些措施”，然后选择第二个选项。如果您需要按年重新订购，请先购买。

根据您上面的示例，尽管我处理上述问题的方式可能是：

```
$array[$year][$month] = $measure; 
```

您不需要特定的“度量”元素。或者，如果您每个月确实有两个元素：

```
$array[$year][$month] = array('measure' => $measure, 'value'=>$value);

or

$array[$year][$month]['measure'] = $measure;
$array[$year][$month]['value'] = $value; 
```

然后你可以去：

```
for($year = $minYear; $year <= $maxYear; $year++) {  // Or "foreach" if consecutive
    for ($month = 1; $month <= 12; $month++) {
        if (isset($array[$year][$month])) {
             echo $array[$year][$month]['measure'];  // You can also check these exist using isset if required
             echo $array[$year][$month]['value'];
        } else {
             echo 'No value specified'
        }
    }
} 
```

希望对你的思考有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-20T18:52:50.677

你做对了。您必须意识到 PHP 没有真正的多维数组；您正在查看的是一个数组数组，每个数组都是一维的。主要数组存储指针（如您所说的“迭代器”）。因此，行优先是*唯一*合理的方法：

在您的特定示例中，您可以将二维数组视为包含对象的集合，每个对象都具有`'year', 'month',`和`'measure'`（加上主键，`'owner'`）的值。通过填写主索引，您可以像这样引用二维数组的每一行`$myArray[$owner]`：`'year', 'month',`每个这样的值都是一个带有键和的三元素数组`'measure'`。换句话说，它与相同信息的原始一维数据结构相同！您可以将它传递给只处理表格的一行的函数，您可以轻松地对 的行`$myArray`等进行排序。

如果您将索引放在相反的位置，则无法恢复您的个人记录。没有“切片”表示法可以为您提供二维数组的整个“列”。

现在有一个更广泛的视角：

由于您在行和列方面提出了问题，请注意，首先放置“行”索引会使您的数组与矩阵算术兼容。如果您必须使用矩阵进行计算，这是一个巨大的胜利。数据库表示法也将记录放在行中，因此向后执行会使事情变得不必要地复杂化。

C 有真正的二维数组*和*指针数组。指针数组的工作方式与 PHP 中的完全一样（尽管只允许使用数字索引），并且出于相同的原因：主索引从指针数组中选择，而次索引只是指向数组的索引。C 的二维数组的工作方式相同：主索引在左侧，内存中的相邻位置相差一个*次要*（第二个）索引的值（当然，行尾除外）。这使得它们与指针数组兼容，因为可以通过使用单个索引来引用二维数组的一行。例如，`a[0]`是`abcd`：

```
 a[.][0] a[.][1] a[.][2] a[.][3]
a[0]:      a       b       c       d    
a[1]:      e       f       g       . 
a[2]:      .       .       .       .    
a[3]:      .       .       .       . 
```

该系统无缝工作，因为主要（行）索引是第一个。Fortran 具有真正的二维数组，但主索引位于右侧：内存中的相邻位置相差一个*左侧*（第一个）索引的值。我发现这让人头疼，因为没有子表达式可以以相同的方式简化为一维数组。（但我有 C 背景，所以我当然有偏见）。

简而言之：您做对了，这可能不是偶然的，而是因为您通过查看编写良好的代码来学习。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-24T00:55:20.970

从我的角度来看，这不是关于数组命名约定的问题，而是关于如何构建数据的问题。含义：哪些信息属于一起 - 为什么？要回答这个问题，您必须同时考虑可读性和性能。

从 Java 开发人员的角度来看（您也为 Java 标记了这个问题）我不是多维数组的朋友，因为它们往往会在大量嵌套的 for 循环中导致容易出错的索引杂技。为了摆脱数组中的第二个维度，可以创建包含一列信息的附加对象。

现在要做的决定是，哪些数据应该嵌入到这个封闭对象中。在您的情况下，答案很简单：关于一个用户的数据集合是有意义的，对于多个任意用户的一个属性的不相关值列表通常没有意义。

即使您不将数据封装到对象中而是更喜欢使用多维数组，您也应该牢记这些想法，并将数组的最后一维（在本例中为一列）视为与封装对象等效。您的数据结构应该在*所有抽象级别都有*用，这通常意味着您将使用的东西放在一起。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T04:39:08.457

我相信，当您使用旨在作为一个集合保存的数据时，最好将其存储在单个数据集中（例如[关联数组](http://en.wikipedia.org/wiki/Associative_array)或对象）。以下是可用于存储数据集的结构示例。

在 PHP 中，作为关联数组：

```
$owner = array(
    'year' => 2012, 'month' => 'July', 'measure' => 3
); 
```

在 C# 中，作为[哈希表](http://en.wikipedia.org/wiki/Hash_table)：

```
Hashtable owner = new Hashtable();
owner.Add("year", 2012);
owner.Add("month", "July");
owner.Add("measure", 3); 
```

在 Java 中，作为哈希表：

```
Hashtable owner = new Hashtable();
owner.put("year", new Integer(2012));
owner.put("month", new String("July"));
owner.put("measure", new Integer(3)); 
```

在 C#/Java 中，作为对象：

```
public class Owner {
    public int year;
    public string month;
    public int measure;
}

Owner o = new Owner();
o.year = 2012;
o.month = "July";
o.measure = 3; 
```

在 C# 和 Java 中，使用对象而不是哈希表的优点是可以为每个字段/变量声明变量类型（即 int 或 string），这将有助于防止错误并保持数据完整性，因为会抛出错误（或当您尝试将错误类型的数据分配给字段时，将生成警告。

在 PHP 中，我发现在存储数据集合时对象与数组相比没有真正的优势，因为[类型提示不允许使用标量变量](http://php.net/manual/en/language.oop5.typehinting.php)，这意味着需要额外的代码来检查/限制在属性中输入的数据，你有要编写额外的代码来声明类，您可能会通过拼写错误的名称意外地将值分配给错误的属性（与数组相同，因此对数据完整性没有帮助），以及[属性的迭代/操作还需要额外的代码](http://php.net/manual/en/language.oop5.iterations.php)。我还发现在 PHP 中转换为 JSON 时使用关联数组更容易。

根据问题中的代码，当您需要通过其中一个字段或其他一些条件（例如字段的组合或字段将映射到）。

这是哈希表和关联数组对每种语言更有用的地方。例如，如果您想根据年份和月份将所有者组织成组，您可以创建关联数组（或哈希表）来执行此操作。

以下 PHP 示例使用[PDO 和 fetchAll](http://php.net/manual/en/pdostatement.fetchall.php)从数据库中获取信息：

```
$sth = $dbh->prepare("SELECT year, month, measure FROM owners");
$sth->execute();

$rows = $sth->fetchAll(PDO::FETCH_ASSOC);

$data = array();
foreach ($rows as $row) {
    $year = $row['year'];
    $month = $row['month'];

    if (!isset($data[$year])) {
        $data[$year] = array();
    }

    if (!isset($data[$year][$month])) {
        $data[$year][$month] = array();
    }

    array_push($data[$year][$month], $row);
} 
```

该数据可能看起来像代码的一个示例是：

```
$data = array(
    2011 => array(
        'July' => array(
            array('year' => 2011, 'month' => 'July', 'measure' => 1),
            array('year' => 2011, 'month' => 'July', 'measure' => 3)
        ),

        'May' => array(
            array('year' => 2011, 'month' => 'May', 'measure' => 9),
            array('year' => 2011, 'month' => 'May', 'measure' => 4),
            array('year' => 2011, 'month' => 'May', 'measure' => 2)
        )
    ),

    2012 => array(
        'April' => array(
            array('year' => 2012, 'month' => 'April', 'measure' => 7)
        )
    )
); 
```

然后，您可以使用密钥访问数据。

```
$data[2011]['July'];

// array(
//     array('year' => 2011, 'month' => 'July', 'measure' => 1),
//     array('year' => 2011, 'month' => 'July', 'measure' => 3)
// ) 
```

此外，当我创建代表数据集合的对象时，我会尽量保持它们的最小化。如果您将集合存储在对象中，当您开始添加对集合执行操作的函数时，将需要维护更多代码。有时这是必要的，例如，如果您需要限制可以通过[setter存储的值](http://msdn.microsoft.com/en-us/library/x9fsa0sw%28v=vs.80%29.aspx)，但是如果您所做的只是将数据从用户传递到数据库并再次在屏幕上显示，那么通常不需要数据收集中的高级功能，拥有该功能可能更有意义在别处管理。例如，View 类可以处理显示数据，Model 类可以处理提取数据，Check 对象可以验证是否可以保存数据或验证是否可以根据集合中的数据执行操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T09:52:05.173

我很少在 Java 中使用数组，这同样适用于 C#。它们是面向对象的语言，如果您使用类和对象而不是数组等原始构造，从长远来看，您通常会获得更好的灵活性。

您的示例看起来像一种交叉引用或称为关联数组的查找。您将元素放置在哪种方式实际上取决于您将如何使用它。这是特定于问题的设计决策。你需要问自己，你将从什么开始，你想以什么结束？

看起来您想根据要查找的内容检索不同的类型？Month 是 String，year 是 Integer 等。这使得数组或 HashMap 成为一个糟糕的选择，因为调用代码需要再次猜测它正在检索的数据类型。更好的设计是将这些数据包装在一个类型安全的对象中。这就是使用 Java 和 C# 的全部意义所在。

在这种情况下，使用对象可以让您灵活地检查月份是否实际上是一个真实值。例如，您可以创建一个包含月份的枚举，并在 getMonth 方法中返回 this 的一个实例。

另外，我没有足够的代表点发表评论，但我想回复 Dave F 的回答。Hashtable 是 Java 早期的遗留类，因此应避免使用。HashMap 是推荐的替代品，两者都实现了 Map 接口。

在 Java 的早期，集合类被同步以使它们成为线程安全的（Vector、Hashtable 等）。这使得这些基本类不必要地变慢并阻碍了性能。如果你现在需要一个同步的地图，那么有一个 HashMap 的包装器。

```
Map m = Collections.synchronizedMap(new HashMap(...)); 
```

换句话说，除非您碰巧使用遗留代码，否则没有理由再使用 Hashtable。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T12:43:08.880

实际上，如果我们推广到所有编程语言，这不仅仅是一个主观问题。 **如果程序员使用不正确的索引，许多编程语言的数组遍历性能就会受到阻碍，因为编程语言并不总是以相同的方式将它们的数组存储在内存中**。据我所知，大多数语言都是**[row-major 或 column-major](http://en.wikipedia.org/wiki/Row-major_order)**。如果您要编写需要高性能数字运算的程序，您需要知道它是什么。

示例：C 使用行优先，这是通常的做法。当您逐行遍历 N x N 数组时，您可能只会访问内存 N 次，因为每一行都是一起加载的。所以对于第一行的第一个元素，你会去记忆并取回整行。对于第一行的第二个元素，您不需要去记忆，因为该行已经加载。但是，如果您决定逐列查看，则可能存在内存问题。对于第一列的第一个元素，您将加载整行，然后对于第一列的第二个元素，您将加载下一行......等等。一旦缓存中的空间不足，第一个row 可能会被放弃以腾出空间，一旦您开始加载第 2 列中的所有元素，您将不得不重新开始。这不会 在 Fortran 中不是问题；相反，您希望这样做，因为一次加载整个列而不是整行。希望这是有道理的。有关更直观的解释，请参阅我在上面链接的 Wikipedia 文章。

对于大多数程序，开发人员最优先考虑的应该是干净的代码。但是在性能是关键的情况下，了解该语言如何处理内存可能是必不可少的。好问题。

# android - 可以删除 Android 依赖项吗？

> ID：11532600
> 
> 赞同：2
> 
> 时间：2012-07-18T00:10:06.897
> 
> 标签：android

到目前为止，我有一个可以正常工作和编译的应用程序。但是，当我去导出它时，会自动添加 Android 依赖项，这会引发

> 转换为 Dalvik 格式失败，错误 1

我对此进行了研究，我知道这是因为 Android Dependencies 正在添加重复文件。我目前正在尝试清理它，但是有没有办法禁用 Android 依赖项在导出时自动生成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:38:18.637

最后只是通过删除重复的 Jar 文件来解决问题。仍然想知道这是否可能，即使它不是解决我遇到的问题的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:14:02.637

只需通过 Project -> Clean 清理您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:26:40.250

您是否提到过这些其他类似的问题？

1.  [外部 JAR 上的“转换为 Dalvik 格式失败，错误 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar)
2.  [转换为 Dalvik 格式失败，出现错误 1 ​​解决方案？](https://stackoverflow.com/questions/6683955/conversion-to-dalvik-format-failed-with-error-1-solution)
3.  [使用 javax/net/SocketFactory.class 转换为 Dalvik 格式失败，错误 1](https://stackoverflow.com/questions/3284407/conversion-to-dalvik-format-failed-with-error-1-with-javax-net-socketfactory-cla)
4.  [“转换为 Dalvik 格式失败，错误 1”——仅在导出时](https://stackoverflow.com/questions/8161852/conversion-to-dalvik-format-failed-with-error-1-on-export-only)

# azure - 工作者角色在 csrun.exe 中失败，但直接从 VS 运行时工作正常（VS 中的 F5）

> ID：11532610
> 
> 赞同：1
> 
> 时间：2012-07-18T00:11:42.660
> 
> 标签：azure, azure-deployment

我只是将我的项目从 sdk 1.3 升级到 1.7。我使用创建 cspkg 目录的 cspack(copyOnly) 创建了一个构建后事件。当我使用 csrun.exe 将其部署到计算模拟器时，我从工作角色中收到以下错误。

System.BadImageFormatException：无法加载文件或程序集“file:///C:\AzureBookWriter\bin\Release\AzureBookWriter.cspkg\roles\BookWriterWorker\approot\WorkerRole1.dll”或其依赖项之一。此程序集由比当前加载的运行时更新的运行时构建，无法加载。

我在 Azure 上部署服务时也注意到错误。我认为这些错误与我在 csrun 中注意到的错误相同。

但是，当我在 VS 中按 F5 时，应用程序可以很好地部署到模拟器并运行良好。我想知道为什么在部署我的包时看到错误。我需要添加任何其他配置吗？

谢谢，库纳尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T02:10:49.877

想通了。这并不明显。在 csdef 我必须包括

```
 <Runtime>
       <EntryPoint>
         <NetFxEntryPoint assemblyName="WorkerRole1.dll" targetFrameworkVersion="v4.0"/> 
       </EntryPoint> 
     </Runtime>   
     <Imports>
       <Import moduleName="Diagnostics" />
     </Imports> 
```

在工人角色下。

这将在 base\64 中创建一个 WaWorkerHost.exe.config 并且一切正常

# ruby-on-rails - 本地 gem 的 'bundle install' 不能解决依赖关系，而 'gem install' 可以

> ID：11532611
> 
> 赞同：6
> 
> 时间：2012-07-18T00:11:49.830
> 
> 标签：ruby-on-rails, ruby, rubygems, bundler

我在目录“/home/enterprise/pkg”中有一个本地 gem (enterprise-0.0.1.gem)。它依赖于 active_directory gem (v 1.5.5)，这是在它的 enterprise.gemspec 文件中指定的，如下所示：-

```
gem.add_dependency("active_directory") 
```

在我的应用程序的 Gemfile 中，我添加了以下行：-

```
gem 'enterprise', '0.0.1', path => '/home/enterprise/pkg' 
```

当我做

> 捆绑安装

从我的应用程序的源目录中，只安装了企业 gem。因此，我在引用 active_directory gem 时遇到了运行时错误。

但是当我这样做时

> 宝石安装/home/enterprise/pkg/enterprise-0.0.1.gem

依赖关系已解决，我可以在 gem 列表中看到 active_directory gem。

为什么与捆绑器的依赖关系解析存在差异，而不是与 ruby​​gems 存在差异。

如果我需要提供有关环境的更多信息，请告诉我。Ruby：1.9.2，RubyGems：1.8.24，Bundler：1.1.5，rvm：1.9.2。

我的 enterprise.gemspec 文件供参考：-

```
 # -*- encoding: utf-8 -*-
   require File.expand_path('../lib/enterprise/version', __FILE__)

   Gem::Specification.new do |gem|
      gem.authors       = ["example"]
      gem.email         = ["example@example.com"]
      gem.description   = %q{Enterprise Gem: example}
      gem.summary       = %q{Services: Authentication, Access Control}
      gem.homepage      = "http://example.com"  
      gem.files         = %w[
                       README.md
                       Rakefile
                       Gemfile
                       Gemfile.lock
                       enterprise.gemspec
                       lib/enterprise.rb
                       lib/enterprise/auth_service.rb
                       lib/enterprise/version.rb
                       ]
     gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
     gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
     gem.name          = "enterprise"
     gem.require_paths = ["lib"]
     gem.version       = Enterprise::VERSION
     gem.add_dependency("active_directory")
   end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T14:54:00.617

我遇到了同样的问题，最终删除了 Gemfile.lock 来解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:27:34.107

您的 gem 是否有包含以下内容的 Gemfile？

```
source 'https://rubygems.org'

# Specify your gem's dependencies in enterprise.gemspec
gemspec 
```

尝试在您的应用程序 gemspec 中添加一个要求

```
gem 'enterprise', '0.0.1', path => '/home/enterprise/pkg', :require => "active_directory" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-08T07:27:03.757

`gem.add_runtime_dependency`在你的 --not 中使用，无论你`gemspec`是否`add_dependency`将它添加到你的，都应该需要 gem `Gemfile`。

# spring - 是否可以使用 Spring 在控制器级别确定 sessionFactory？

> ID：11532613
> 
> 赞同：0
> 
> 时间：2012-07-18T00:11:59.683
> 
> 标签：spring, hibernate, sessionfactory

我正在使用多个`sessionfactory`主/从数据库连接。
顺便说一句，是否可以通过一些自定义注释来确定我在控制器级别使用的 sessionfactory？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:40:13.200

`@Qualifier`在注射时使用`SessionFactory`以描述您要使用哪一个。`@Repository`基于 setter 的DAO注入示例：

```
protected SessionFactory sessionFactory;

@Autowired
@Qualifier("masterSessionFactory")
public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
} 
```

# android - 防止Android上的进程上下文切换

> ID：11532619
> 
> 赞同：1
> 
> 时间：2012-07-18T00:13:59.797
> 
> 标签：android, c++, process, scheduling, preemption

现在这似乎有点极端。我很好奇是否有办法防止应用程序的进程被 Android 操作系统抢占。我在 C++ 中进行了时间关键测试，结果可能会有所不同，具体取决于操作系统是否将上下文提供给另一个进程，在这种情况下，这些进程是我无法控制的本机进程。

有没有办法保证至少在给定时间段内进行过程控制？（例如专门定义进程时间片）我偶然发现了一些[文档](https://github.com/keesj/gomo/wiki/AndroidScheduling)，这些文档暗示控制后台进程的动态优先级，但我不确定这是否是一种有保证和/或安全的方式，因为我' d 覆盖threads.h中的定义

有任何想法吗？欢迎创造性的解决方案。

# jar - 寻找在动态加载 Jar 文件和在 Java 运行时实例化类时使用 Apache Felix 的基本示例

> ID：11532621
> 
> 赞同：5
> 
> 时间：2012-07-18T00:14:10.343
> 
> 标签：jar, osgi, classloader, apache-felix

我尝试根据一些示例实现我自己的类加载器。但是，我认为它没有按预期工作（无法重新加载 Jar 文件等。我看到很少有推荐使用 OSGI 或 Apache Felix 来处理 Jar 文件加载的参考资料。有没有加载 Jar 的示例，从 Jar 实例化一个类？

有关我要完成的工作的更多详细信息..我有一个基本上连续运行的 Java 命令行应用程序。我希望它能够在运行时动态引用 JAR 文件，并且在运行时实例中这些 jar 中的类。这些 jar 可能包含 1 个或多个支持类。这些 Jars 本质上是定制的工作单元，由持续运行的主应用程序的某些事件条件执行。.. 由于这是一个多客户端，我想让 jar 成为可插入类型的工作单元。

我目前的方向是为“客户端”提供一个代码接口，然后让他们将他们的类打包到一个 jar 文件中。然后应用程序将执行配置的（数据库）jar 路径并从 Jar 运行类。这适用于加载 jar 和类但是，我希望能够基本上热部署这些 jar。

总之，我想要一个包含支持函数的类的 JAR 文件。将在运行时从 Jar（来自主循环应用程序）引用的已定义类。在主应用程序运行时更改 JAR 文件的能力。

如果我要使用第三方库，我最好使用 Apache Felix。

谢谢

我想我是使用 Apache Felix 4 解决的。这是加载 jars/classes 的最佳方式吗？或者有没有更好更有效的方法。到目前为止，我的研究并没有指向一种解决方案。谢谢。

```
 FrameworkFactory ff = new FrameworkFactory ();
     Map<String,Object> config = new HashMap<String,Object>();
      config.put("org.osgi.framework.storage", "c:\\temp\\myclientBundles");
       config.put(Constants.FRAMEWORK_SYSTEMPACKAGES_EXTRA,
   "packages needed,more packages needed");
  config.put(Constants.FRAMEWORK_STORAGE_CLEAN, "true");

  Framework fwk = ff.newFramework(config);
  fwk.start();

  BundleContext bc = fwk.getBundleContext();

  Bundle bundle =   bc.installBundle("file:C:\\my_client.jar");

      bundle.start();
      bundle.update();
      Class clazz = bundle.loadClass("client.work.process");
      Job pc = (Job) clazz.newInstance();
      pc.startWork(someConfigObject);
      bundle.stop();
      fwk.stop(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T09:52:24.297

如果我理解正确，您是在询问如何在 OSGi 中动态加载 jar 的示例，对吗？

在 OSGi 中，动态加载的模块称为捆绑包。因此，基本上解决您的问题的最常用方法是将您的 jar 放入 OSGi 捆绑包中。OSGi 包是一个普通的 Java jar，有一些增强 - 它有一个清单文件（一个 txt 文件），其中声明了对其他 Java 包的依赖关系；以及一个 Activator 类，它在包启动和停止时被调用。这个 Activator 是包的核心部分，它知道如何实例化包的其他部分。

现在，如果您的动态 jar 只是一个库 jar，并且您只想在系统中提供它的 java 包，您甚至可以不使用激活器，只需添加一个简单的清单文件。甚至还有一些工具可以为您自动进行转换——检查[BND](http://bndtools.org/)。

然后，当您准备好捆绑包时，您可以使用 install 命令在任何 OSGi 框架上动态安装它。重新加载是通过调用更新命令等来完成的。生命周期定义得很好，我肯定会推荐使用它而不是重新发明轮子；）

有关一些示例和演示，请参见[此处](http://dz.prosyst.com/pdoc/mBS_SDK/um/runtime/osgi/docs/framework/index.html)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T13:58:38.390

如果现在，简单地说，我拒绝相信你的问题是加载一个类...... :-) 我认为你还有另一个问题，你认为加载一个类可以解决？

在大多数情况下，人们天真地开始加载类，问题在于*可扩展性*。他们有一个系统并希望有选择地使用新功能扩展它，我假设您有类似的问题，因为您想更新提供程序 jar？

如果是这样，请下载 bndtools 并查看 OSGi 服务，它们通常非常符合要求

好的，在你更新之后。如果我很了解您，那么 Apache Felix 和 Apache Felix File Install 将为您提供很好的服务。File Install 监视一个目录并在框架中的该目录中安装任何包。从目录中删除该 jar，将卸载该捆绑包。（我在 12 年前写了文件安装的原型！）

对于你的主要 JAR，让它看起来像：

```
@Component(immediate=true)
public void Main {  
    @Reference
    void setClient( Client client) { ... } // called whenever a client gets started
} 
```

对于每个客户端 JAR：

```
@Component
public void ClientImpl implements Client {
  ... whatever
} 
```

这几乎是您使用 bndtools 时必须编写的全部内容。只需创建一个组件项目，为主代码添加一个 Bundle Descriptor 并为客户端代码示例添加任意数量的描述符，然后 Run As -> OSGi Run。然后，您可以下载 Apache Felix 文件安装，将其添加到运行选项卡，并创建一些其他项目，将 jars（在生成的文件夹中连续制作）放入文件安装文件夹中......瞧。没有比这更简单的了:-)

# java - 使用 JAXB 注释应用复合模式的最佳方法？

> ID：11532623
> 
> 赞同：1
> 
> 时间：2012-07-18T00:14:34.570
> 
> 标签：java, xml, design-patterns, jaxb, marshalling

考虑使用 JAXB 构建这个 xml msg：

```
<msg>
  <database id="111">
     <table name="t1" pkCol="id">
        <row op="update">
            <col name="id" value="12345"/>
            <col name="age" value="30"/>
            <col name="name" value="John"/>
        </row>
        <row ...>
        </row>
     </table>
     <table ...>
       :
     </table>
   </database>
   <database ...>
     <table ...>
     </table>
   </database>
</msg> 
```

我们现有的遗留实现为每个标签都有一个单独的类，即 Msg、Database、Table、Row 和 Column。没有通用的基类。每个类都有一个 List/ArrayList、一个无参数构造函数，以及用于 @XmlAttribute 和 List 添加的其他设置器。

尝试应用复合模式（其他模式建议？），因为所有这些类几乎都是节点（带有子节点），但具有自己的相应属性。提出一个通用的基类

```
class Node<X> extends ArrayList<X> 
```

但不知道如何从子类中将 @XmlElement(name ="depends_on_subclass") 应用于基类。除非在子类中并在虚拟 getSelf() 方法上添加 @XmlElement，例如在 Table 中，

```
class Table extends Node<Row>
{

    @XmlElement(name="row")
    public Table getSelf()
    {
        return this;
    }
:
: 
```

还有其他或更好的建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:02:13.700

我假设您为此使用 xjc，在这种情况下您可以使用 jaxb 插件

我使用了这个插件[http://confluence.highsource.org/display/J2B/Inheritance+plugin](http://confluence.highsource.org/display/J2B/Inheritance+plugin)

然后将这样的内容添加到您的 xml 中。就是这样。他们将扩展给定的基类。

```
<xsd:element name="attributesRequest">
    <xsd:annotation>
        <xsd:appinfo>
            <inheritance:extends>com.work.autofill.common.Filter</inheritance:extends>
        </xsd:appinfo>
    </xsd:annotation> 
```

# java - java.lang.UnsupportedClassVersionError：org/openqa/gr id/selenium/GridLauncher（不支持的major.minor版本50.0）

> ID：11532625
> 
> 赞同：12
> 
> 时间：2012-07-18T00:14:39.307
> 
> 标签：java, selenium, selenium-server

我在我的 Selenium 文件夹中获得了这个 selenium 服务器 jar 文件。当我尝试使用`java - jar selenium-server-standalone-2.0b3.jar`命令执行此操作时，出现此版本差异错误。谁能告诉我我在哪里犯了错误？

```
Exception in thread "main" java.lang.UnsupportedClassVersionError: org/openqa/gr
id/selenium/GridLauncher (Unsupported major.minor version 50.0)
        at java.lang.ClassLoader.defineClass0(Native Method)
        at java.lang.ClassLoader.defineClass(Unknown Source)
        at java.security.SecureClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.defineClass(Unknown Source)
        at java.net.URLClassLoader.access$100(Unknown Source)
        at java.net.URLClassLoader$1.run(Unknown Source)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClass(Unknown Source)
        at java.lang.ClassLoader.loadClassInternal(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T13:44:20.833

该消息（带有 version `50.0`）表明 Selenium 服务器需要 java 6 才能运行，但您正在尝试使用一些较早版本的 java 运行它。

要找出您正在使用的 java 版本，请运行：

```
java -version 
```

如果你安装了 java 6，但它没有被使用，你可能必须给 java 可执行文件的完整路径名，所以如果在 linux 上是这样的：

```
/usr/local/jre6/bin/java -jar selenium.jar 
```

或者如果在 Windows 上像这样：

```
"C:\Program Files (x86)\Java\jre6\bin\java.exe" -jar selenium.jar 
```

（当然，您需要调整该命令以匹配 java 在您的机器上实际存在的位置）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-06T20:17:53.113

我遇到了同样的问题，我使用的是 jre6，我转到项目属性，将 JRE 系统库更改为使用 jre1.8 并且它有效..您可以选择备用 jre 并添加系统上安装的最新 jre。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-02T14:39:02.360

除了 Java 版本，Java*供应商*显然是另一个重要变量。我遇到了 OP 问题的一个变体，其中堆栈跟踪表明需要 Java 8，即使我已经在使用 OpenJDK 8。

> 线程“main”中的异常 java.lang.UnsupportedClassVersionError: org/openqa/grid/selenium/GridLauncherV3 : java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader) 中不受支持的 major.minor 52.0 版.java:800) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:449) at java.net.URLClassLoader.access$100(URLClassLoader.java:71 ) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:361) 在 java.security.AccessController.doPrivileged(Native Method) 在 java.net.URLClassLoader$1.run(URLClassLoader.java:355) 在 java.net. URLClassLoader.findClass(URLClassLoader.java:354) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:425) 在 sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308) 在 java.lang.ClassLoader.loadClass(ClassLoader.java:358) 在 sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:482 )

切换到 Oracle 的 JVM 让我克服了这个问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-12T10:52:44.413

就我而言，当我执行“java -version”时，我得到了这个：

```
Picked up _JAVA_OPTIONS: -Duser.home=C:\Users\xxxx
java version "1.7.0_151"
Java(TM) SE Runtime Environment (build 1.7.0_151-b33)
Java HotSpot(TM) Client VM (build 24.151-b33, mixed mode) 
```

我的 'JAVA_HOME' 与下面提到的不同：

```
C:\Program Files\Java\jdk1.8.0_91 
```

所以我刚刚在我的环境变量下的路径中添加了“jdk1.8.0_91”，如下所示：

前：

```
C:\Program Files (x86)\Java\jre7\bin; 
```

后：

```
C:\Program Files\Java\jdk1.8.0_91\jre\bin; C:\Program Files (x86)\Java\jre7\bin; 
```

之后，我能够成功运行“webdriver-manager”。我希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-24T08:46:07.507

右键单击您的项目文件夹 -> 构建路径 -> 配置构建路径 -> 检查您的 selenium 版本是否与 jre 匹配（对于 selenium 52 jre 8 版本是必需的）如果不匹配然后单击 jre -> 编辑 -> 备用 jre - > 添加 -> 提供所需路径 -> 确定 -> 完成

这对我有用。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-06T15:21:25.800

我遇到了类似的问题。只需安装最新版本的 Nodejs、Protractor 和 JDK。它可以正常工作。

最初我遇到了 JRE 版本不匹配的问题。

我有 Selenium 网络驱动程序 3.0 和 Jre 1.7。我卸载了所有并安装了最新版本。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-26T10:00:58.100

使用安装最新版本的java ie 12

```
brew cask install java 
```

[按照https://www.java.com/en/download/help/mac_uninstall_java.xml](https://www.java.com/en/download/help/mac_uninstall_java.xml)卸载从 Oracle 下载的那个

可能会有很大帮助！

# javascript - 在 $.each 循环中跳过 json 数组值

> ID：11532631
> 
> 赞同：-1
> 
> 时间：2012-07-18T00:15:22.720
> 
> 标签：javascript, ajax, json

我的 json 数组`store`看起来像这样

```
[{
"role": "Executive Director",
"name": "David Z",
...},
{
"role": "Executive Director",
"name": "David Z",
...},
{
"role": "Non Executive Chairman",
"name": "Hersh M",
...},
{
"role": "Non Executive Director",
"name": "Alex C",
...},
{
"role": "Company Secretary",
"name": "Norman G",
...}] 
```

从这个数组中有几个 html 表。

作为ajax成功函数的一部分，我循环`store`到一个draw html表，就像这样

```
var table = '';
table += '<tr><td......</td>';
$.each(store, function(i, data) {
   // draw row...
   // draw row etc...
});
table += '</tr></tbody>';
$("#table_d").append(table); 
```

但是对于其中一个表，我想跳过第二次出现的`David Z`（或任何多次出现的名称）

```
var table = '';
table += '<tr><td......</td>';
$.each(store, function(i, data) {
    if (i > 0, store[i].name != store[i-1].name) { 
       // draw row...
       // draw row etc...
    }
});
table += '</tr></tbody>';
$("#table_d").append(table); 
```

数组总是有序的，所以我可以比较`store[i].name`重复`store[i-1].name`的`name`。

那么我如何正确表达 if `store[i].name != store[i-1].name`run loop 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:22:02.447

如果我正确理解您的问题，我认为您只需要这样做

```
if(i > 0)
{
    if(store[i].name != store[i-1].name)
    {
        //run code here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:40:47.360

在每个循环之外：

```
var names = new Array(); 
```

在你的每个循环内：

```
if(names.indexOf(store[i].name)==-1){
    names.push(store[i].name);
    //code here
} 
```

# informix - 为什么 oninit 会自动降低非并行查询内存的内存？

> ID：11532634
> 
> 赞同：1
> 
> 时间：2012-07-18T00:15:43.607
> 
> 标签：informix

Informix 11.70.TC5DE（Windows Vista 32 位）：

我为 DSS 查询配置了一个具有 512MB 内存和 300MB 磁盘空间的实例。当我指定只有一个用户将提交 DSS 查询时，为什么 oninit 会自动将我的非并行查询的内存更改为只有 94464kb？

![在此处输入图像描述](../Images/9f23985bb9b5f31b378c6a8082dcba4f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T00:24:43.697

DS_NONPDQ_QUERY_MEM（非并行查询内存）的最大大小限制为总 PDQ（也称为 DS 或决策支持）内存的 25%。因此，您需要增加 DS_TOTAL_MEMORY 以获得更大的 DS_NONPDQ_QUERY_MEM 值。另一方面，90 MiB 的非 PDQ 内存相当大。可能不值得担心非 PDQ 内存的确切大小。

我会更担心创建的常驻池的大小（根据屏幕截图为 6580 KiB）。一般来说，将可用内存用于缓冲池。如果，正如我所怀疑的那样，您的数据库总共不到 100 MiB，那么无论如何整个事情都会在内存中。在机器上有 512 MiB 的情况下，我的目标是让 Informix 使用大约 128 MiB 的所有共享内存，剩下的留给操作系统和（其他）程序使用。凭借缓存，这 128 MiB 将在共享内存中拥有 100 MiB 数据库的大部分，因此在读取数据后您不会看到太多磁盘流量——当然，除非您重写大量数据。

[有关DS_NONPDQ_QUERY_MEM](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.adref.doc/ids_adr_0064.htm)的更多信息，请参阅[Informix 11.70 信息中心](http://publib.boulder.ibm.com/infocenter/idshelp/v117)。

# apache - 如何防止 Apache httpd (MAMP) 中的 http 文件缓存

> ID：11532636
> 
> 赞同：148
> 
> 时间：2012-07-18T00:16:02.847
> 
> 标签：apache, .htaccess, http-headers, mamp

我正在 MAMP 中开发单页 Javascript 应用程序。我的 JavaScript 和 HTML 模板文件在请求之间被缓存。

有没有一种简单的方法可以在 MAMP 中指示我想阻止 http 文件缓存？可能有`.htaccess`文件？我在哪里放置`.htaccess`或修改 Mac 上 MAMP 的虚拟主机？

* * *

## 回答 #1

> 赞同：331
> 
> 时间：2012-07-30T15:30:20.743

试过这个？应该同时在 和 a 中工作`.htaccess`（`httpd.conf`如果您从 httpd.conf 中包含它，`VirtualHost`通常放置在其中）`httpd-vhosts.conf`

```
<filesMatch "\.(html|htm|js|css)$">
  FileETag None
  <ifModule mod_headers.c>
     Header unset ETag
     Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
     Header set Pragma "no-cache"
     Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
  </ifModule>
</filesMatch> 
```

> 100% 防止文件被缓存
> 
> 这类似于谷歌广告如何使用标头 Cache-Control: private, x-gzip-ok="" > 来防止代理和客户端缓存广告。

来自[http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html](http://www.askapache.com/htaccess/using-http-headers-with-htaccess.html)

如果您使用的扩展名不是`.html`那些，则可以选择为您正在检索的模板文件添加扩展名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T00:35:31.900

基于此处的示例：http: [//drupal.org/node/550488](http://drupal.org/node/550488)

以下内容可能适用于 .htaccess

```
 <IfModule mod_expires.c>
   # Enable expirations.
   ExpiresActive On

   # Cache all files for 2 weeks after access (A).
   ExpiresDefault A1209600

  <FilesMatch (\.js|\.html)$>
     ExpiresActive Off
  </FilesMatch>
 </IfModule> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-02T20:15:03.723

我有同样的问题，但我在这里找到了一个很好的解决方案： [Stop caching for PHP 5.5.3 in MAMP](https://stackoverflow.com/questions/19073270/stop-caching-for-php-5-5-3-in-mamp)

基本上找到 php.ini 文件并注释掉 OPCache 行。我希望这个替代答案也能帮助其他人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-25T11:59:45.333

**如果没有 mod_expires**，就很难在文件上设置过期标头。对于生成的任何内容，您当然可以在答案上设置一些默认标题，像这样完成 mod_expires 的工作：

```
<?php header('Expires: '.gmdate('D, d M Y H:i:s \G\M\T', time() + 3600)); ?> 
```

（取自：[@brianegge 的 Stack Overflow 答案](https://stackoverflow.com/questions/1036941/setup-http-expires-headers-using-php-and-apache)，其中还解释了 mod_expires 解决方案）

现在这不适用于**静态文件**，例如您的 javascript 文件。至于静态文件，浏览器和源文件之间只有 apache（没有任何过期模块）。为了防止在浏览器上缓存 javascript 文件，您可以在 js url 的末尾使用**随机标记**`?rd=45642111`，例如，因此 url 如下所示：

```
<script type="texte/javascript" src="my/url/myjs.js?rd=4221159546"> 
```

如果页面上的这个 url 是由 PHP 文件生成的，您可以简单地使用 PHP 添加随机部分。这种通过简单地附加随机查询字符串参数来随机化 url 的方式是 ajax jQuery 请求的无缓存设置的基础。浏览器永远不会认为具有不同查询字符串的 2 个 url 是相同的，并且永远不会使用缓存版本。

**编辑**

请注意，您还应该测试**mod_headers**。如果你有 mod_headers 你可以直接使用**Header**关键字设置 Expires 标题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-03T06:26:42.580

```
<FilesMatch "\.(js|css)$">
  ExpiresActive On
  ExpiresDefault A1
  Header append Cache-Control must-revalidate
</FilesMatch> 
```

# r - 在 reddit URL 中输入 5 个字符（数字）ID

> ID：11532637
> 
> 赞同：4
> 
> 时间：2012-07-18T00:16:11.310
> 
> 标签：r, reddit

在reddit URL中，有“5个字符数字”的thing_id部分（例如，“http://redd.it/wplf7”中的“wplf7”）是由base36生成的。

wplf7 是从数字 54941875 生成的 - 这是我到目前为止发现的......我想知道 54941875 是如何生成的。

我正在尝试使用 R 抓取 reddit 特定部分的评论（比如说[http://www.reddit.com/r/leagueoflegends/](http://www.reddit.com/r/leagueoflegends/)），但我被困在这 5 个字符的数字上。

谁能用简单的方式解释一下？不幸的是，Python 不是我的领域，Reddit 网站上列出的 2000 行 Python 代码对我没有多大帮助。

谢谢，

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T22:51:11.770

首先设置一个唯一的用户代理，因为 reddit 喜欢这样

```
options(HTTPUserAgent="My name is BOB") 
```

我假设您想从[http://www.reddit.com/r/leagueoflegends/](http://www.reddit.com/r/leagueoflegends/)获取内容。您需要将 a 附加`.json`到 url：

```
library(RJSONIO)
library(RCurl)
# library(XML)

jdata<-getURL('http://www.reddit.com/r/leagueoflegends/.json')
jdata<-fromJSON(jdata)
# xdata<-getURL('http://www.reddit.com/r/leagueoflegends/.xml')
# xdata<-xmlParse(xdata) 
```

显然内容非常丰富，例如域名、永久链接、作者、帖子标题：

```
Domains<-sapply(jdata[[2]]$children,function(x){x$data$domain})
permalinks<-sapply(jdata[[2]]$children,function(x){x$data$permalink})
authors<-sapply(jdata[[2]]$children,function(x){x$data$author})
titles<-sapply(jdata[[2]]$children,function(x){x$data$title})
ids<-sapply(jdata[[2]]$children,function(x){x$data$id})
created<-as.POSIXct(sapply(jdata[[2]]$children,function(x){x$data$created}),origin="1970/01/01")

> head(titles)
[1] "Pendragon 3-day-banning someone for randoming in ranked, or saying hes going to. Mixed feelings..."
[2] "Dig Kicks L0cust."                                                                                 
[3] "Summoners, y u no communicate??"                                                                   
[4] "Without Even Trying"                                                                               
[5] "Cross Country Tryndamere (Chaox Stream)"                                                           
[6] "Top 5 Flops - Episode 4 ft Dyrus, Phantoml0rd, and HatPerson vs Baron Nashor"                      
> 
```

为了研究这些 id 是如何生成的，我们可以将@Ben Bolker 的`base36ToInteger`函数应用于我们收集的 id 并将它们与它们的创建日期进行比较：

```
createData<-data.frame(created=created,ids=sapply(ids,base36ToInteger))
> dput(createData)
structure(list(created = structure(c(1342658844, 1342657298, 
1342622962, 1342643655, 1342641187, 1342654768, 1342665353, 1342640599, 
1342648272, 1342662822, 1342654185, 1342659591, 1342624350, 1342647907, 
1342637587, 1342591960, 1342625515, 1342642330, 1342651384, 1342668363, 
1342608976, 1342608165, 1342632545, 1342638611, 1342643489), class = c("POSIXct", 
"POSIXt")), ids = c(55047001, 55044612, 55010018, 55025557, 55022809, 
55040754, 55056689, 55022221, 55031424, 55053023, 55039810, 55048123, 
55010880, 55030934, 55019343, 54976515, 55011555, 55024060, 55035670, 
55061120, 54998192, 54997264, 55015528, 55020295, 55025363)), .Names = c("created", 
"ids"), row.names = c("wrujd", "wrsp0", "wr202", "wrdzp", "wrbvd", 
"wrppu", "ws20h", "wrbf1", "wriio", "wrz6n", "wrozm", "wrvej", 
"wr2o0", "wri52", "wr973", "wqc5f", "wr36r", "wrcu4", "wrlsm", 
"ws5fk", "wqsvk", "wqs5s", "wr694", "wr9xj", "wrdub"), class = "data.frame") 
```

![在此处输入图像描述](../Images/be361668080b717cb4e7f329c7464852.png)

这意味着随着新帖子的创建，reddit 会在整个网站上按顺序生成这些数字。

如果没有具体的方向，我会留在这里，但希望你能明白。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T00:56:40.917

我从[Erich Neuwirth 于 2008 年在 r-help 上发布的](http://tolstoy.newcastle.edu.au/R/e5/help/08/09/2571.html)通用基本转换代码开始：这是递归的，所以可能很慢——但我花了合适的时间来开发它！

```
numberInBase <- function(number,base){
    numberInBaseRecur<-function(number,base){
        lastDigit<-function(number,base) number %% base
        if (number == 0) result <- c(0)
        else result <- c(numberInBaseRecur(number %/% base,base),
                         lastDigit(number,base))
        result
    }
    result <- numberInBaseRecur(number,base)
    while (result[1]== 0 && length(result)>1)
        result <- result[-1]
    result
} 
```

快速测试：

```
numberInBase(36^3,36)
## [1] 1 0 0 0 
```

现在我们只需要从十进制转换为基数 36，然后索引适当的字母数字字符串。这是您的示例：

```
b36string <- c(0:9,letters)
paste(b36string[numberInBase(54941875,36)+1],collapse="")
## [1] "wplf7" 
```

如果您需要另辟蹊径， [Jim Holtman 于 2012 年 1 月发表的一篇文章给出了解决方案](http://tolstoy.newcastle.edu.au/R/e17/help/12/01/1793.html)：

```
base36ToInteger <- function (Str) {
    common <- chartr("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"
                     , ":;<=>?@ABCDEFGHIJKLMNOPQRS:;<=>?@ABCDEFGHIJKLMNOPQRS"
                     , Str)
    x <- as.numeric(charToRaw(common)) - 48
    sum(x * 36 ^ rev(seq(length(x)) - 1))
} 

base36ToInteger("wplf7") 
```

（我还没有停下来弄清楚这实际上是如何工作的，但你可以阅读这篇文章......）

# javascript - 简单的node.js，连接到服务器

> ID：11532638
> 
> 赞同：0
> 
> 时间：2012-07-18T00:16:13.027
> 
> 标签：javascript, http, node.js

我正在学习 node.js 并尝试连接到我创建的服务器，但我的浏览器无法连接。我正在实时服务器上进行测试。

我 /public_html 中的 server.js 包含以下内容：

```
var http = require("http"); 

function onRequest(request, response) {
    response.writeHead(200, {"Content-Type": "text/plain"});
    response.write("Hello World");   
    response.end(); 
}

http.createServer(onRequest).listen(8888);
console.log("Server has started"); 
```

我通过节点 server.js 从控制台启动并收到“服务器已启动”消息，但是当我将浏览器指向 myhost.com:8888 时，它无法连接。尝试了很长时间后，我收到错误 101 (net::ERR_CONNECTION_RESET)：连接被重置。我忘记了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:15:45.177

该代码应该在本地主机上工作 - 我测试过。您是否能够访问 IP 地址和端口，例如 23.25.125.87:8888（而不是 myhost.com:8888） - 不确定您是否查看过 DNS 更改（或者如果您已经这样做，它们是否生效）

# sql - SQL 提取 XML Clob 导致 Oracle 10g 数据库冻结

> ID：11532639
> 
> 赞同：0
> 
> 时间：2012-07-18T00:16:13.480
> 
> 标签：sql, xml, oracle, oracle10g

当我执行以下查询时，我需要帮助找出我的数据库服务器崩溃的原因：

```
SELECT T.COLLECTION_ID, T.CYCLE_ID, T.PHASE_ID, EXTRACT(T.XML_DOCUMENT, '/') 
FROM THINGS T
WHERE T.COLLECTION_ID = 1668 AND T.CYCLE_ID = 26601 AND T.DELETED = 0 
ORDER BY T.COLLECTION_ID, T.CYCLE_ID, T.PHASE_ID 
```

额外细节：

*   此记录的上述 XML_DOCUMENT 列中的 CLOB 为 780kb
*   数据库是Oracle 10g
*   CLOB 中的 XML 格式正确

如果上面的 PLSQL 中没有任何明显的内容可以更改以避免冻结数据库，那么是否有人对我如何/是否可以调整我的服务器或数据库以避免这些类型的查询崩溃有任何想法？

任何潜在的解决方案或建议都受到高度重视，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:41:44.780

您（或您的 DBA）需要查看警报日志和跟踪文件以了解正在发生的事情的详细信息。任何灾难性的 Oracle 错误*都应该*为崩溃的进程编写一个跟踪文件。

还要检查所有级别的 NLS 设置/DB 字符集；我曾经遇到过与您的描述有些表面相似的情况，我通过更改数据库字符集解决了这种情况。

如果另一台机器上的另一个用户（操作系统和数据库用户）尝试相同的查询会发生什么？

让 DBA 检查块损坏。转储 DB 块并检查奇数字符。

请让我们知道您的发现；这对我来说很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T00:47:10.353

升级到 Oracle 11g 解决了我们的问题。11g 比 10g 更有效地处理 XML 操作，并且也更好地处理错误。

[Oracle 论坛上的另一个人](https://forums.oracle.com/forums/thread.jspa?threadID=555162)使用不同的 XML 操作得出了类似的结论，因此可以肯定地假设升级是这里的适当解决方案。

# android - 银河 S3 .. 视口元标记不起作用

> ID：11532642
> 
> 赞同：2
> 
> 时间：2012-07-18T00:16:39.507
> 
> 标签：android, viewport, galaxy

我目前正在开发在视口元标记中使用 medium-dpi 的网络应用程序，如下所示。

```
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0,
      width=device-width, user-scalable=no, target-densitydpi=medium-dpi" /> 
```

当我在 Galaxy S3 设备上测试它时，视口似乎无法正常工作。

我在Android 4.0.2中看到了这种东西。在 android 4.0.2 中，我听说 android 操作系统本身存在无法正确应用视口的错误。

有人有什么想法吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T20:00:40.250

我实际上发现了一个重要的线索。

[http://developer.android.com/guide/webapps/targeting.html](http://developer.android.com/guide/webapps/targeting.html)

" 小于（或等于）320 的值导致等于设备宽度的值 "

所以，做“Width=320”，一个从 iPhone 迁移的典型设置，它似乎不起作用。

将其设置为 321，就可以了！

在galaxy s3、playbook、galaxy note上测试

# javascript - 使用 NetSuite SuiteScript 访问自定义列的文本值

> ID：11532644
> 
> 赞同：1
> 
> 时间：2012-07-18T00:16:49.540
> 
> 标签：javascript, netsuite

我正在使用 NetSuite 的服务器端 SuiteScript，需要访问几个自定义事务列字段的显示值。有问题的字段均设置为“列表/记录”类型，并与现有的自定义列表相关联。

在 NetSuite 脚本调试器中工作，我检查了从`nlapiLoadRecord('salesorder', orderInternalId)`. 查看结果对象中的项目（例如`obj.sublists.item.line 1`）我看到其中一些列表/记录自定义字段提供了一个数字（所选列表条目的 ID）和一个字符串（列表条目的显示文本值），但是其他自定义字段没有。

例如，我有两个带有 ID`custcol1`和`custcol2`. 这些都是“列表/记录”类型。加载销售订单时，nlapiLoadRecord 为 提供字段“custcol1”（数字）和“custcol1_display”（字符串）`custcol1`，但仅为 提供“custcol2”（数字）字段`custcol2`。我看不出这两个自定义字段的设置有什么不同，所以不清楚为什么一个提供字符串而另一个不提供。

我需要检索两个字段的字符串值。我需要进行设置更改，以便`custcol2`自动返回“custcol2_display”值吗？或者我可以使用另一个 API 调用从“custcol2”中获取数字值并在底层自定义列表中查找关联的字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:29:28.453

尝试使用`record.getLineItemText('item', 'custcol2', linenum)`

对于调试，我倾向于使用 Firebug——它比 NS 调试器更有效，并且比用于测试的日志语句更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-13T01:14:08.603

我刚刚注意到这是两年前的事，但我认为您可以输入 columnname.id 来获取数据值。它适用于标准列，但不确定自定义列。

我学会使用的一件事是 NetSuite 调试器，我不像标准调试器那样使用它，而是像 javascript 控制台那样使用它。只需将一些代码粘贴到框中，然后对其进行调试，这对于查看 dang 属性值是什么以及其中的数据非常有用，这在 NetSuite 中似乎是一个废话。

# ruby-on-rails - 模块化 ActiveRecord 类

> ID：11532647
> 
> 赞同：0
> 
> 时间：2012-07-18T00:17:29.813
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

如果我有这样的课，

```
class A < ActiveRecord::Base
  include ExampleModule
end

class B < ActiveRecord::Base
  include ExampleModule
end

module ExampleModule
  module ClassMethods
    ...
  end      

  def included(base)
    ...
  end
end 
```

在将这个模块引用到这些类中的任何一个中时，如何在 ExampleModule 中获取对 A 类或 B 类的引用？我问这个问题是因为我想做一些事情，比如通过包含 ExampleModule 来将**has_one :association**或**after_create :do_something**添加到类 A 或 B 中，如下所示。

```
class A < ActiveRecord::Base
  include ExampleModule
end

class B < ActiveRecord::Base
  include ExampleModule
end

module ExampleModule
  has_one :association
  after_create :do_something      

  module ClassMethods
    ...
  end      

  def included(base)
    ...
  end
end 
```

有没有更好的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:22:58.313

如果您扩展[`ActiveSupport::Concern`](http://api.rubyonrails.org/classes/ActiveSupport/Concern.html)，您应该能够在模块为`included`：

```
module ExampleModule

  extend ActiveSupport::Concern

  def do_something
    # ...
  end

  included do
    has_one :association
    after_create :do_something      
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T12:08:03.893

If what you're wanting to do is call `has_one` or `after_create` depending on which class is including the module you can do this

```
module Extender
  def self.included(base)
    if base.name == A.name
       # do stuff for A
       has_one :association
    elsif base.name == B.name
       # do stuff for B
       after_create :do_something
    end
  end
end 
```

# visual-studio-2010 - 如何解决错误 C2061：语法错误：标识符“FormOutOfTime”

> ID：11532649
> 
> 赞同：2
> 
> 时间：2012-07-18T00:17:32.590
> 
> 标签：visual-studio-2010, compiler-errors, c++-cli

我有一个项目我正在 C++/CLI 中的 Visual Studio 2010 Express 中工作（对 CLI 的解释也将不胜感激）并且我遇到以下错误：

```
error C2061: syntax error : identifier 'FormOutOfTime' 
```

这是我的代码：Runner.cpp

```
#include "stdafx.h"
#include "Runner.h"
#include "FormOutOfTime.h"
#include "FormParentalOverride.h"
//Variable Dclaration

Runner::Runner()
{
    // Do stuff if you need to

    this->Go();
}

Runner::~Runner()
{
    // Clear memory if you need to
}

void Runner::Go()
{
    System::Windows::Forms::Form^ formOutOfTime;//*************************Uncomment Me Later!
    formOutOfTime = gcnew FormOutOfTime();
    formOutOfTime->ShowDialog();
} 
```

FormOutOfTime.h （这个文件的 cpp 文件中没有任何内容，我不确定将内容放入头文件和 cpp 文件之间有什么区别）

```
#include "FormParentalOverride.h"
#pragma once

namespace PurpleHealth {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    /// <summary>
    /// Summary for FormOutOfTime
    /// </summary>
    public ref class FormOutOfTime : public System::Windows::Forms::Form
    {
    public:
        FormOutOfTime(void)
        {

            InitializeComponent();

        }

    protected:
        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        ~FormOutOfTime()
        {
            if (components)
            {
                delete components;
            }
        }

    protected: 

    private: System::Windows::Forms::Button^  btnOverride;
    private: System::Windows::Forms::Button^  btnUploadData;

    private: System::Windows::Forms::Button^  btnLogout;
    private: System::Windows::Forms::Label^  lblPurpleHealth;
    private: System::Windows::Forms::Label^  lblTimeLeft;
    private: System::Windows::Forms::OpenFileDialog^  openHeartRateFile;
    private: System::ComponentModel::IContainer^  components;
    private: System::Windows::Forms::Form^ formParentalOverride;

    private:

        /// <summary>
        /// Required designer variable.
        /// </summary>

#pragma region Windows Form Designer generated code
        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        void InitializeComponent(void)
        {
            System::ComponentModel::ComponentResourceManager^  resources = (gcnew System::ComponentModel::ComponentResourceManager(FormOutOfTime::typeid));
            this->btnOverride = (gcnew System::Windows::Forms::Button());
            this->btnUploadData = (gcnew System::Windows::Forms::Button());
            this->btnLogout = (gcnew System::Windows::Forms::Button());
            this->lblPurpleHealth = (gcnew System::Windows::Forms::Label());
            this->lblTimeLeft = (gcnew System::Windows::Forms::Label());
            this->openHeartRateFile = (gcnew System::Windows::Forms::OpenFileDialog());
            this->SuspendLayout();
            // 
            // btnOverride
            // 
            this->btnOverride->BackColor = System::Drawing::Color::White;
            this->btnOverride->Location = System::Drawing::Point(692, 458);
            this->btnOverride->Name = L"btnOverride";
            this->btnOverride->Size = System::Drawing::Size(218, 66);
            this->btnOverride->TabIndex = 5;
            this->btnOverride->Text = L"Parental Override";
            this->btnOverride->UseVisualStyleBackColor = false;
            this->btnOverride->Click += gcnew System::EventHandler(this, &FormOutOfTime::btnOverride_Click);
            // 
            // btnUploadData
            // 
            this->btnUploadData->BackColor = System::Drawing::Color::White;
            this->btnUploadData->Location = System::Drawing::Point(449, 458);
            this->btnUploadData->Name = L"btnUploadData";
            this->btnUploadData->Size = System::Drawing::Size(218, 66);
            this->btnUploadData->TabIndex = 6;
            this->btnUploadData->Text = L"Upload Data";
            this->btnUploadData->UseVisualStyleBackColor = false;
            this->btnUploadData->Click += gcnew System::EventHandler(this, &FormOutOfTime::btnAddTime_Click);
            // 
            // btnLogout
            // 
            this->btnLogout->BackColor = System::Drawing::Color::White;
            this->btnLogout->Location = System::Drawing::Point(933, 458);
            this->btnLogout->Name = L"btnLogout";
            this->btnLogout->Size = System::Drawing::Size(218, 66);
            this->btnLogout->TabIndex = 7;
            this->btnLogout->Text = L"Logout";
            this->btnLogout->UseVisualStyleBackColor = false;
            this->btnLogout->Click += gcnew System::EventHandler(this, &FormOutOfTime::btnLogout_Click);
            // 
            // lblPurpleHealth
            // 
            this->lblPurpleHealth->AutoSize = true;
            this->lblPurpleHealth->BackColor = System::Drawing::Color::White;
            this->lblPurpleHealth->Font = (gcnew System::Drawing::Font(L"Microsoft Sans Serif", 20));
            this->lblPurpleHealth->Location = System::Drawing::Point(699, 377);
            this->lblPurpleHealth->Name = L"lblPurpleHealth";
            this->lblPurpleHealth->Size = System::Drawing::Size(203, 31);
            this->lblPurpleHealth->TabIndex = 8;
            this->lblPurpleHealth->Text = L"Balife Bracelets";
            // 
            // lblTimeLeft
            // 
            this->lblTimeLeft->AutoSize = true;
            this->lblTimeLeft->BackColor = System::Drawing::Color::White;
            this->lblTimeLeft->Location = System::Drawing::Point(576, 427);
            this->lblTimeLeft->Name = L"lblTimeLeft";
            this->lblTimeLeft->Size = System::Drawing::Size(449, 13);
            this->lblTimeLeft->TabIndex = 9;
            this->lblTimeLeft->Text = L"You currently have no time left. Wait until tomorrow, or upload heart rate data t" 
                L"o get more time.";
            this->lblTimeLeft->Click += gcnew System::EventHandler(this, &FormOutOfTime::lblTimeLeft_Click);
            // 
            // openHeartRateFile
            // 
            this->openHeartRateFile->Title = L"Locate the file Containing Heart Rate Data";
            this->openHeartRateFile->FileOk += gcnew System::ComponentModel::CancelEventHandler(this, &FormOutOfTime::openFileDialog1_FileOk);
            // 
            // FormOutOfTime
            // 
            this->AutoScaleDimensions = System::Drawing::SizeF(6, 13);
            this->AutoScaleMode = System::Windows::Forms::AutoScaleMode::Font;
            this->BackgroundImage = (cli::safe_cast<System::Drawing::Image^  >(resources->GetObject(L"$this.BackgroundImage")));
            this->ClientSize = System::Drawing::Size(1600, 900);
            this->Controls->Add(this->lblPurpleHealth);
            this->Controls->Add(this->lblTimeLeft);
            this->Controls->Add(this->btnLogout);
            this->Controls->Add(this->btnUploadData);
            this->Controls->Add(this->btnOverride);
            this->FormBorderStyle = System::Windows::Forms::FormBorderStyle::None;
            this->Name = L"FormOutOfTime";
            this->RightToLeftLayout = true;
            this->Text = L"FormOutOfTime";
            this->TopMost = true;
            this->WindowState = System::Windows::Forms::FormWindowState::Maximized;
            this->Load += gcnew System::EventHandler(this, &FormOutOfTime::FormOutOfTime_Load);
            this->ResumeLayout(false);
            this->PerformLayout();

        }
#pragma endregion

    private: System::Void openFileDialog1_FileOk(System::Object^  sender, System::ComponentModel::CancelEventArgs^  e) {
             }
    private: System::Void FormOutOfTime_Load(System::Object^  sender, System::EventArgs^  e) {
             }
    private: System::Void btnOverride_Click(System::Object^  sender, System::EventArgs^  e) {
                 formParentalOverride = gcnew FormParentalOverride;
                 formParentalOverride->ShowDialog();
             }
    private: System::Void btnLogout_Click(System::Object^  sender, System::EventArgs^  e) {
                 //ExitWindows(0, 0);
             }
    private: void btnAddTime_Click(System::Object ^ sender, System::EventArgs ^ e)
             {
                 openHeartRateFile->ShowDialog();
             }
    private: System::Void lblTimeLeft_Click(System::Object^  sender, System::EventArgs^  e) {
             }
};
} 
```

任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:22:12.213

您忘记定义命名空间。以这种方式使用它：

formOutOfTime = gcnew PurpleHealth::FormOutOfTime();

# python - python multiprocessing RemoteManager下的一个multiprocessing.Process

> ID：11532654
> 
> 赞同：5
> 
> 时间：2012-07-18T00:18:37.067
> 
> 标签：python, queue, multiprocessing

我正在尝试在管理进程下启动数据队列服务器（以便以后可以将其转换为服务），虽然数据队列服务器功能在主进程中工作正常，但在使用创建的进程中不起作用多处理。进程。

dataQueueServer 和 dataQueueClient 代码基于[此处](http://docs.python.org/library/multiprocessing.html#using-a-remote-manager)的多处理模块文档中的代码。

单独运行时，**dataQueueServer**运行良好。但是，当使用 mpqueue 中的 a 运行时`multiprocessing.Process`，`start()`它**不起作用**（在客户端测试时）。我正在使用未更改的**dataQueueClient**来测试这两种情况。

代码在这两种情况下都到达了，所以我认为服务器正在工作，但是在**mpqueue**`serve_forever`情况下，有些东西阻止它与客户端通信。

 **我已将运行该`serve_forever()`部件的循环放在一个线程下，以便它可以停止。

这是代码：

**mpqueue** # 这是试图在子进程中生成服务器的“管理器”进程

```
import time
import multiprocessing
import threading
import dataQueueServer

class Printer():
    def __init__(self):
        self.lock = threading.Lock()
    def tsprint(self, text):
        with self.lock:
            print text

class QueueServer(multiprocessing.Process):
    def __init__(self, name = '', printer = None):
        multiprocessing.Process.__init__(self)
        self.name = name
        self.printer = printer
        self.ml = dataQueueServer.MainLoop(name = 'ml', printer = self.printer)

    def run(self):
        self.printer.tsprint(self.ml)
        self.ml.start()

    def stop(self):
        self.ml.stop()

if __name__ == '__main__':
    printer = Printer()
    qs = QueueServer(name = 'QueueServer', printer =  printer)
    printer.tsprint(qs)
    printer.tsprint('starting')
    qs.start()
    printer.tsprint('started.')
    printer.tsprint('Press Ctrl-C to quit')
    try:
        while True:
            time.sleep(60)
    except KeyboardInterrupt:
        printer.tsprint('\nTrying to exit cleanly...')
        qs.stop()

    printer.tsprint('stopped') 
```

**数据队列服务器**

```
import time
import threading

from multiprocessing.managers import BaseManager
from multiprocessing import Queue

HOST = ''
PORT = 50010
AUTHKEY = 'authkey'

## Define some helper functions for use by the main process loop
class Printer():
    def __init__(self):
        self.lock = threading.Lock()
    def tsprint(self, text):
        with self.lock:
            print text

class QueueManager(BaseManager): 
    pass

class MainLoop(threading.Thread):
    """A thread based loop manager, allowing termination signals to be sent
    to the thread"""
    def __init__(self, name = '', printer = None):
        threading.Thread.__init__(self)
        self._stopEvent = threading.Event()
        self.daemon = True
        self.name = name

        if printer is None:
            self.printer = Printer()
        else:
            self.printer = printer

        ## create the queue
        self.queue = Queue()
        ## Add a function to the handler to return the queue to clients
        self.QM = QueueManager

        self.QM.register('get_queue', callable=lambda:self.queue)
        self.queue_manager = self.QM(address=(HOST, PORT), authkey=AUTHKEY)
        self.queue_server = self.queue_manager.get_server()

    def __del__(self):
        self.printer.tsprint( 'closing...')

    def run(self):
        self.printer.tsprint( '{}: started serving'.format(self.name))
        self.queue_server.serve_forever()

    def stop(self):
        self.printer.tsprint ('{}: stopping'.format(self.name))
        self._stopEvent.set()

    def stopped(self):
        return self._stopEvent.isSet()

def start():
    printer = Printer() 
    ml = MainLoop(name = 'ml', printer = printer)
    ml.start()
    return ml

def stop(ml):
    ml.stop()

if __name__ == '__main__':
    ml = start()
    raw_input("\nhit return to stop")
    stop(ml) 
```

还有一个客户：

**数据队列客户端**

```
import datetime
from multiprocessing.managers import BaseManager

n = 0
N = 10**n

HOST = ''
PORT = 50010
AUTHKEY = 'authkey'

def now():
    return datetime.datetime.now()

def gen(n, func, *args, **kwargs):
    k = 0
    while k < n:
        yield func(*args, **kwargs)
        k += 1

class QueueManager(BaseManager): 
    pass
QueueManager.register('get_queue')
m = QueueManager(address=(HOST, PORT), authkey=AUTHKEY)
m.connect()
queue = m.get_queue()

def load(msg, q):
    return q.put(msg)

def get(q):
    return q.get()

lgen = gen(N, load, msg = 'hello', q = queue)
t0 = now()
while True:
    try:
        lgen.next()
    except StopIteration:
        break
t1 = now()
print 'loaded %d items in ' % N, t1-t0

t0 = now()
while queue.qsize() > 0:
    queue.get()
t1 = now()
print 'got %d items in ' % N, t1-t0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T21:18:24.673

所以看起来解决方案很简单：不要使用`serve_forever()`，`manager.start()`而是使用。

根据[Eli Bendersky](http://eli.thegreenplace.net/2012/01/24/distributed-computing-in-python-with-multiprocessing/)的说法，`BaseManager`（和它的扩展版本`SyncManager`）已经在一个新进程中生成了服务器（并且查看 multiprocessing.managers 代码证实了这一点）。我遇到的问题源于示例中使用的表单，其中服务器是在主进程下启动的。

我仍然不明白为什么当前示例在子进程下运行时不起作用，但这不再是问题。

这是管理多个队列服务器的工作（并且从 OP 大大简化）代码：

**服务器**：

```
from multiprocessing import Queue
from multiprocessing.managers import SyncManager

HOST = ''
PORT0 = 5011
PORT1 = 5012
PORT2 = 5013
AUTHKEY = 'authkey'

name0 = 'qm0'
name1 = 'qm1'
name2 = 'qm2'

description = 'Queue Server'

def CreateQueueServer(HOST, PORT, AUTHKEY, name = None, description = None):
    name = name
    description = description
    q = Queue()

    class QueueManager(SyncManager):
        pass

    QueueManager.register('get_queue', callable = lambda: q)
    QueueManager.register('get_name', callable = name)
    QueueManager.register('get_description', callable = description)
    manager = QueueManager(address = (HOST, PORT), authkey = AUTHKEY)
    manager.start() # This actually starts the server

    return manager

# Start three queue servers
qm0 = CreateQueueServer(HOST, PORT0, AUTHKEY, name0, description)
qm1 = CreateQueueServer(HOST, PORT1, AUTHKEY, name1, description)
qm2 = CreateQueueServer(HOST, PORT2, AUTHKEY, name2, description)

raw_input("return to end") 
```

**客户**：

```
from multiprocessing.managers import SyncManager

HOST = ''
PORT0 = 5011
PORT1 = 5012
PORT2 = 5013
AUTHKEY = 'authkey'

def QueueServerClient(HOST, PORT, AUTHKEY):
    class QueueManager(SyncManager):
        pass
    QueueManager.register('get_queue')
    QueueManager.register('get_name')
    QueueManager.register('get_description')
    manager = QueueManager(address = (HOST, PORT), authkey = AUTHKEY)
    manager.connect() # This starts the connected client
    return manager

# create three connected managers
qc0 = QueueServerClient(HOST, PORT0, AUTHKEY)
qc1 = QueueServerClient(HOST, PORT1, AUTHKEY)
qc2 = QueueServerClient(HOST, PORT2, AUTHKEY)
# Get the queue objects from the clients
q0 = qc0.get_queue()
q1 = qc1.get_queue()
q2 = qc2.get_queue()
# put stuff in the queues
q0.put('some stuff')
q1.put('other stuff')
q2.put({1:123, 2:'abc'})
# check their sizes
print 'q0 size', q0.qsize()
print 'q1 size', q1.qsize()
print 'q2 size', q2.qsize()

# pull some stuff and print it
print q0.get()
print q1.get()
print q2.get() 
```

添加一个额外的服务器来与正在运行的队列服务器的信息共享一个字典，这样消费者就可以很容易地知道什么是可用的，使用该模型很容易。不过，需要注意的一点是，共享字典需要的语法与普通字典略有不同：`dictionary[0] = something`不会起作用。您需要使用`dictionary.update([(key, value), (otherkey, othervalue)])`和`dictionary.get(key)`语法，它会传播到连接到该字典的所有其他客户端。**

# ios - 节省外部资源（大文件）

> ID：11532659
> 
> 赞同：-1
> 
> 时间：2012-07-18T00:19:18.147
> 
> 标签：ios, image

我有1000多个图片和音频文件，总共大约30G。如果我把它们放在 Xcode 资源中，应用程序会非常大。我可以把它们放在哪里？我怎样才能在 Xcode 中获得它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:07:23.380

对于如此大量的媒体，最优化的压缩是您不能忽视的。

一些想法：

*   使用最适合应用程序的最大可接受压缩率的 jpeg
*   削减不必要的分辨率（例如，视网膜设备的最大分辨率为 640x960）
*   尽可能压缩音频（降低采样率，使用不同的格式等）
*   将一些部分存储在网络服务器上，将一些媒体与应用程序捆绑在一起，以便可以快速启动它，然后让用户在后台下载图像/声音，在每个屏幕的基础上......

# java - Eclipse 不接受集合排序

> ID：11532660
> 
> 赞同：4
> 
> 时间：2012-07-18T00:19:26.893
> 
> 标签：java, sorting, collections, comparator

```
 import java.io.BufferedReader;
    import java.util.Collections;
    import java.io.File;
    import java.io.FileNotFoundException;
    import java.io.FileReader;
    import java.io.IOException;
    import java.util.ArrayList;
    import java.util.Comparator;
    import java.util.Date;
    import java.util.List;
    import com.javaranch.common.TextFileIn;

    public class SortNames 
    {
        public static class CelebrityNamesFile
        {
            public String firstName;
            public String lastName;

            public static class CompareLastName implements Comparator< CelebrityNamesFile >
            {
                @Override
                public int compare( CelebrityNamesFile o1,  CelebrityNamesFile o2 )
                {
                    return o2.lastName.compareTo( o1.lastName );
                }
            }

        public static void main( String[ ] args ) throws IOException
        {

            ArrayList< CelebrityNamesFile > myCelebrityList;
            myCelebrityList = new ArrayList< CelebrityNamesFile >();

            TextFileIn celebrityNamesFile = new TextFileIn( "celebrityNamesFile.txt" );
            boolean doneReadingCelebrityNames = false;
            while ( ! doneReadingCelebrityNames )
            {
                 String oneName = celebrityNamesFile.readLine();
                 if ( oneName == null )
                 {
                     doneReadingCelebrityNames = true;
                 } 
```

$ Eclipse 不喜欢后面的 add 语句，也就是说：*ArrayList(SortNames.CelebrityNamesFile) 类型中的方法 add (SortNames.CelebrityNamesFile) 不适用于参数 (String)*

```
 else
                 {
                     myCelebrityList.add( oneName );
                 }
            }
            celebrityNamesFile.close(); 
```

$ 然后它不喜欢我的排序语句，即： *绑定不匹配：集合类型的通用方法 sort(List T) 不适用于参数 (ArrayList (SortNames.CelebrityNamesFile))。推断的类型 SortNames.CelebrityNamesFile 不是有界参数的有效替代品（T extends Comparable(? super T)）*

```
 Collections.sort( myCelebrityList );
            System.out.println( myCelebrityList );

            Collections.sort( myCelebrityList, new CelebrityNamesFile.CompareLastName() );
            System.out.println( myCelebrityList );
}
} 
```

}

我究竟做错了什么？我在这里阅读了很多帖子，阅读了有关比较器的 Java 文档，阅读了有关比较器的 Java 教程。Head First Java，Ivor Horton 开始使用 Java 7。仍然一无所知。

该程序的目的是从 txt 文件中读取名称，将它们添加到 arraylist，以自然顺序打印 arraylist，按姓氏对 arraylist 进行排序，再次打印列表。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T00:24:39.770

对于第一个问题，问题相当简单。`oneName`is a `String`, and `myCelebrityList`is a collection of `CelebrityNamesFile`- 这意味着您只能将对象添加到类型的集合中`CelebrityNamesFile`。

对于第二个问题，您的问题是`CelebrityNamesFile`该类没有实现`Comparable`接口。排序要求为列表元素类型实现排序，例如通过实现`Comparable`类或`Comparator`向`sort`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:25:24.240

对于第一个问题，您正在尝试将 a 添加`String`到`List<CelebrityNamesFile>`实例中。您应该使用 String 创建一个`CelebrityNamesFile`实例并将此实例添加到您的列表中：

```
CelebrityNamesFile celebrityNamesFile = new CelebrityNamesFile();
celebrityNamesFile.lastName = oneName;
myCelebrityList.add( celebrityNamesFile ); 
```

对于第二个问题，尝试

```
Collections.sort(myCelebrityList, new CompareLastName()); 
```

正如@alyu 指出的那样，`CelebrityNamesFile`该类需要实现`Comparable`接口以使用您发布的代码，但您也可以添加一个`Comparator<CelebrityNamesFile>`实例（并且您已经拥有`CompareLastName`实现它的类）。

更多关于这个：

*   [集合#sort](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T00:26:21.680

1.  您正在尝试将 a `String`(the object `oneName`) 添加到 s 列表中`CelebrityNamesFile`。你需要以某种方式创建一个`CelebrityNamesFile`out of this `String`。
2.  `Collections.sort()`仅适用于`Comparable`未明确传递比较器的对象。试试这个：

    `Collections.sort(myCelebrityList, new CelebrityNamesFile.CompareLastName());`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T00:27:11.430

集合`myCelebrityList`是类型的`CelebrityNamesFile`，这意味着它只能接受该类的实例。您需要创建一个实例`CelebrityNamesFile`并将其添加到集合中。不会接受你的`Collections`集合，因为你`CelebrityNamesFile`的类没有实现`Comparator`接口。您需要将比较器实例传递给`Collections.sort()`as 第二个参数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-26T05:54:48.790

类中的`Comparator`实现`CompareLastName`可以放在`SortNames`类外，或者至少放在`CelebrityNamesFile`类外。在将实现 Comparator 的类放在对象类之外之前，我遇到了完全相同的问题。在我这样做之后，该程序运行良好。如果有帮助，这是我的代码示例，其中包含注释。

```
// Comparator interface for my Word Class.
public interface Comparator<Word>
{ 
    int compare(Word first, Word second); 
}

// Word Class, which is my object.
public class Word
{
    private String word;
    public Word(String input)  { word = input; }
    public String get()  { return word; }
    public int wordSize()  { return word.length(); }
}

// Comparator implementation is separate from my Word Class.
public class WordComparator implements Comparator<Word>
{
    public int compare(Word first, Word second)
    {
        if (first.wordSize() < second.wordSize())  { return -1; }
        else if (first.wordSize() > second.wordSize())  { return 1; }
        else  { return first.get().compareTo(second.get()); }
    }
}

// Now run the program to ensure the Word Class objects and the WordComparator
// Class are implemented correctly.
public class WordComparatorDemo
{
    public static void main(String[] args) throws FileNotFoundException
    {
        ArrayList<Word> list = new ArrayList<Word>();
        JFileChooser find = new JFileChooser();
        Scanner read = null;
        if(find.showOpenDialog(null) == JFileChooser.APPROVE_OPTION)
        {
            File selectedFile = find.getSelectedFile();
            read = new Scanner(selectedFile);
            try
            {
                list = inputData(read);
                // Here's the sort implementing the WordComparator.
                Collections.sort(list, new WordComparator());
            }
            finally  { read.close(); }
        }
    }
    public static ArrayList<Word> inputData(Scanner in)
    {
        ArrayList<Word> list = new ArrayList<Word>();
        in.useDelimiter("[^A-Za-z]+");
        while(in.hasNext())
        {
            String word = in.next();
            Word temp = new Word(word);
            list.add(temp);
        }
        return list;
    }
} 
```

注意：我的回答是在原帖发布一年后，但希望它可以帮助任何访问该网站寻求帮助的人。

# unit-testing - 如何增加 Visual Studio 测试的超时时间？

> ID：11532662
> 
> 赞同：5
> 
> 时间：2012-07-18T00:19:47.807
> 
> 标签：unit-testing, visual-studio-2012

我正在为我正在编写的一些代码（在 Visual Studio 2012 中）进行一套相当大的测试。在大多数情况下，运行单元测试没什么大不了的。但我还包括了许多具有更多外部基础架构依赖项的集成测试。测试的数量，加上重新设置测试之间的基础设施依赖关系，导致整个套件的测试运行相当长（目前大约 45 分钟）。

运行测试没什么大不了的。单元测试将在签入时运行，每晚进行集成测试。但是，在尝试分析所有测试的代码覆盖率时，我遇到了一个问题。没有创建代码覆盖结果，输出窗口显示以下内容：

> 发送到 net.pipe://megara/vstest.discoveryengine/14108 的此请求操作在配置的超时 (00:30:00) 内未收到回复。分配给此操作的时间可能是较长超时的一部分。这可能是因为服务仍在处理操作，或者因为服务无法发送回复消息。请考虑增加操作超时（通过将通道/代理转换为 IContextChannel 并设置 OperationTimeout 属性）并确保服务能够连接到客户端。

我不确定它会把我引向这里。我不使用任何`iContextChannel`东西，所有的测试运行都内置在 Visual Studio 中。所以我真的不知道在哪里/如何增加任何类型的超时。有人知道我应该去哪里看吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T01:17:05.250

`.testsettings`尝试更改解决方案文件中的超时值。

如果您没有，您可以使用`right-click on solution -> Add New Item -> TestSettings`菜单将其添加到解决方案中。在那里，您可以对单个测试进行超时（默认为 30 分钟），或为整个测试运行设置超时。

目前尚不清楚这是否是根本原因，但值得排除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-27T01:37:06.340

老话题，但也许有一些新信息：我没有运气尝试使用 Visual Studio 2015 在 .testsettings 文件中设置超时。无论我在测试设置中将其设置为什么，我的测试都会在 30 分钟后停止。

现在有一个`[Timeout(milliseconds)]`属性可以应用于各个测试方法。这甚至比 testsettings 更好，因为您可以微调单个测试以确保它们不会花费比预期更长的时间。

不幸的是，在使用 .testsettings 文件时尝试将其设置为高于 30 分钟时，即使 .testsettings 文件定义了更高的超时时间，我也无法让此属性产生任何影响。低于 30 分钟的值被接受，但更高的值仍然会在 30 分钟处停止，无论测试设置说什么。

删除 .testsettings 文件后，超时属性似乎按预期工作 - 测试将运行到我设置的任何超时。

如果您无法让 timeout 属性正常工作，请尝试删除 .testsettings。

# vector - Box2D 碰撞流形？

> ID：11532667
> 
> 赞同：0
> 
> 时间：2012-07-18T00:20:15.850
> 
> 标签：vector, box2d, collision, chipmunk

我已经看到有一个b2Manifold。我想要完成的是检测碰撞是否在碰撞的对象之一的顶部。

我已经设置了一个 b2ContactListener 并且工作正常。我只想通过设置歧管来检测一个 b2Body 是否位于与之碰撞的另一个 b2Body 之上，从而提供更准确的碰撞。

我该怎么做？

谢谢！

[http://postimage.org/image/kbfr7c5db/](http://postimage.org/image/kbfr7c5db/)

# c++ - c ++ STL按int和string的向量排序

> ID：11532674
> 
> 赞同：0
> 
> 时间：2012-07-18T00:20:52.357
> 
> 标签：c++, algorithm, stl

今天我在解决一个关于 topcoder 的问题，我必须按照奥运会的奖牌对国家进行排序。我有一个 STL 容器里面没有一个国家赢得`vector<pair<vector<int>, string> > v;`的`vector<int>`金、银和铜牌。我必须按照黄金、白银、青铜和国家（字母顺序）的特定顺序对结构进行排序。

我使用了 sort(v.begin(), v.end()) 但这种排序仅按配对中的第一个值，即按金、银和铜牌排序，当 g、s、b 奖牌时，它不按字母顺序对国家进行排序两个国家是一样的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:31:44.340

您必须提供比较功能对象。

```
typedef pair<vector<int>, string> Country;
struct CmpCountry {
    bool operator()(const Country& lhs, const Country& rhs)
    {
        if(lhs.first[0] != rhs.first[0])
            return lhs.first[0] > rhs.first[0];
        if(lhs.first[1] != rhs.first[1])
            return lhs.first[1] > rhs.first[1];
        if(lhs.first[2] != rhs.first[2])
            return lhs.first[2] > rhs.first[2];
        return lhs.second < rhs.second;
    }
};

// then, call sort as following
std::sort(v.begin(), v.end(), CmpCountry()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T01:10:24.320

如果您确实编写了您描述的代码，它将完全按照您的意愿执行：

比较.cpp：

```
#include <vector>
#include <utility>
#include <algorithm>
#include <iostream>

using namespace std;

typedef pair<vector<int>, string> Country;

int main(int, char*[]) {
  vector<Country> v;
  while (cin.good()) {
    string name;
    int g, s, b;
    cin >> name >> g >> s >> b;
    vector<int> c;
    c.push_back(g);
    c.push_back(s);
    c.push_back(b);
    v.push_back(make_pair(c, name));
  }
  sort(v.begin(), v.end());
  for (vector<Country>::const_iterator it = v.begin(); it != v.end(); ++it) {
    cout << it->second << " " << it->first[0]
     << " " << it->first[1] << " " << it->first[2] << "\n";
  }
  return 0;
} 
```

比较.in：

```
US 3 2 1
CA 4 1 3
DE 1 3 5
FR 1 3 5
BE 1 3 5
RU 3 1 2 
```

现在这样做：

```
$ clang++ -o compare compare.cpp
$ ./compare < compare.in
BE 1 3 5
DE 1 3 5
FR 1 3 5
RU 3 1 2
US 3 2 1
CA 4 1 3 
```

请注意，它首先按金牌排序（升序）（首先是BE / DE / FR，然后是RU / US，然后是CA），然后是银牌（RU然后是美国），然后是铜牌（尽管这不是我的输入)，然后是名称（BE，然后是 DE，然后是 FR）。正是你所要求的。

（好吧，实际上您要求按字母顺序排列，这将对 g、s 和 b 进行数字顺序。这可能是您想要的（例如，2 枚金牌大于 11 枚）。如果不是，您'必须编写自己的比较函子，在比较它们之前对整数进行字符串化。）

那么，为什么会这样呢？好吧，如果你看一下 的定义`std::pair`，它会按字典顺序进行比较——也就是说，它比较`lhs.first`vs. ，然后只有当s 相等时才`rhs.first`转到`lhs.second`vs .。如果你看一下 的定义，它也会按字典顺序进行比较——也就是说，它比较vs. ，然后只有当s 相等时才转到vs. ，依此类推。这正是您在这里所追求的比较顺序。`rhs.second``first``std::vector``lhs[0]``rhs[0]``lhs[1]``rhs[1]``[0]`

从您的评论中，听起来您想要反转数值的正常排序顺序，而不是国家名称。为此，您必须定义自己的比较器。但请注意，问题不在于 pair 和 vector 没有按照你想要的方式排序——它们确实如此——而是 int 没有按照你想要的方式排序。

因为如果你理解了这一切都是非常微不足道的，而不是仅仅给出答案，我将一步一步地解释它。

首先，这是默认排序（实际上，不是字面意思）要做的事情：

```
struct CountryComparator {
  bool operator()(const Country& lhs, const Country& rhs) const {
    if (!(lhs.first == rhs.first))
      return (lhs.first < rhs.first);
    return (lhs.second < rhs.second);
  }
}; 
```

（请注意，我将竭尽全力只使用`==`and `<`。这在您的情况下无关紧要，因为您只是在比较整数，但是 STL 的设计理念是，每个算法都应该适用于仅支持这两个运营商，养成好习惯。）

扩展向量比较会使事情变得非常冗长，所以我们不要打扰。如果您确实想反转向量的某些成员而不是其他成员的排序顺序，则必须这样做，但是您正在尝试反转整个向量的排序顺序，这与仅反转排序相同向量本身的顺序。所以，只要定义这个：

```
struct CountryComparator {
  bool operator()(const Country& lhs, const Country& rhs) const {
    if (!(lhs.first == rhs.first))
      return (rhs.first < lhs.first);
    return (lhs.second < rhs.second);
  }
}; 
```

现在，只需将排序行更改为：

```
 sort(v.begin(), v.end(), CountryComparator()); 
```

现在让我们尝试一下：

```
$ ./compare < compare.in
CA 4 1 3
US 3 2 1
RU 3 1 2
BE 1 3 5
DE 1 3 5
FR 1 3 5 
```

CA with 4 golds is ahead of everyone else. Then US and RU, with 3 golds each, are sorted by silvers; US, with 2 silvers, comes first. Then BE, DE, and FR, with 1 gold each, and the same number of silvers, and the same number of bronzes, are sorted alphabetically.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:44:27.593

您需要一个自定义比较器，以便 STL 排序可以比较您的向量。最简单的方法是将向量定义为结构，然后添加一个比较器。

```
struct country {
    vector<int> medals;
    string country_name;
}

struct compare { 
    bool operator()(country const &a, country const &b) { 
        for(int i = 0; i <  3; i++){ // 3 medals, right?
            if(a.medals[i] != b.medals[i]) 
                return a.medals[i] < b.medals[i];
        //else both countries have same number of medals
        return a.country_name < b.country_name;
    }
}; 
```

# java - 检查当前时间是否距离“last_updated”时间超过一个小时

> ID：11532676
> 
> 赞同：3
> 
> 时间：2012-07-18T00:21:03.860
> 
> 标签：java, android, time

在我的 Android 应用程序上，我只想在自上次导入至少 X 小时后重新导入我的数据。

我以这种格式将 last_updated 时间存储在我的 sqlite 数据库中： `2012/07/18 00:01:40`

我怎样才能得到“从那时起的几个小时”或类似的东西？

到目前为止我的代码：

```
package com.sltrib.utilities;

import java.text.SimpleDateFormat;
import java.util.Calendar;

public class DateHelper
{

  public static String now()
  {
      Calendar currentDate = Calendar.getInstance();
      SimpleDateFormat formatter = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
      String dateNow = formatter.format(currentDate.getTime());
      //System.out.println("Now the date is :=>  " + dateNow);
      return dateNow;
  }

  public static int hoursAgo(String datetime)
  {
      //return the number of hours it's been since the given time
      //int hours = ??
      //return hours;
  }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T00:28:48.137

您将要在两个`Calendar`s 或`Date`s 之间进行数学运算。

**注意**：`Date`不推荐使用的方面，请参见下文`Calendar`！

这是一个使用示例`Date`：

```
public static int hoursAgo(String datetime) {
    Date date = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss", Locale.ENGLISH).parse(datetime); // Parse into Date object
    Date now = Calendar.getInstance().getTime(); // Get time now
    long differenceInMillis = now.getTime() - date.getTime();
    long differenceInHours = (differenceInMillis) / 1000L / 60L / 60L; // Divide by millis/sec, secs/min, mins/hr
    return (int)differenceInHours;
} 
```

这里涉及一些`try/catch`块（您可能应该使用 处理`throws`），但这是基本思想。

**编辑**：由于部分`Date`已弃用，这里是使用相同的方法`Calendar`：

```
public static int hoursAgo(String datetime) {
    Calendar date = Calendar.getInstance();
    date.setTime(new SimpleDateFormat("yyyy/MM/dd HH:mm:ss", Locale.ENGLISH).parse(datetime)); // Parse into Date object
    Calendar now = Calendar.getInstance(); // Get time now
    long differenceInMillis = now.getTimeInMillis() - date.getTimeInMillis();
    long differenceInHours = (differenceInMillis) / 1000L / 60L / 60L; // Divide by millis/sec, secs/min, mins/hr
    return (int)differenceInHours;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:35:31.777

您也可以直接在查询中执行此操作。看这个问题，有如何计算两个日期之间差异的例子：

[SQLite：将两个给定日期之间的差异表示为天、小时、分钟](https://stackoverflow.com/questions/8075973/sqlite-express-the-difference-as-days-hours-minutes-between-two-given-dates)

# c++ - 如何使用 enable_if<>::type 返回类型对函数进行原型设计？

> ID：11532681
> 
> 赞同：1
> 
> 时间：2012-07-18T00:21:53.323
> 
> 标签：c++, templates, c++11, sfinae, enable-if

下面我有3个原型。我希望第一个（注释掉）可以工作，但这是唯一一个*不*工作的（请参阅代码中的注释以了解错误）。更令我惊讶的是，以下两种方法中的任何一种都有效，即使两者都存在。

```
/////////////////////////////////////////////////
// Prototypes:
/////////////////////////////////////////////////
//  Causes "ambiguous call to overloaded function" at the call site when when one or both  
//  of the below prototypes is also present. Otherwise causes unresolves external
//template<typename T> void func(); 

//  Okay, can have this one AND/OR the below declaration
template<typename T> typename std::enable_if<std::is_integral<T>::value, void>::type func();

//  Also okay, can have this one AND/OR the above declaration
template<typename T> typename std::enable_if<std::is_integral<T>::value, void>::type func();

int main()
{
    func<int>();
}

/////////////////////////////////////////////////
// Definitions:
/////////////////////////////////////////////////
template<typename T> typename std::enable_if<std::is_integral<T>::value, void>::type func() {}

template<typename T> typename std::enable_if<!std::is_integral<T>::value, void>::type func() {} 
```

哪个是正确的原型，为什么第一个不起作用？我正在使用 VS2010 和 VS2012

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:27:25.547

第一个导致错误，因为它声明了不同的函数模板。简而言之，它是不同的，因为所有的`enable_if`东西都是它签名的一部分，而不仅仅是它解析的最终类型。

您永远不会为第一个模板声明提供定义，这就是如果您不将其他模板声明放入，您会收到“未解决的外部”错误的原因。

如果你把其他人放进去，现在你有其他人之一*加上*这个作为候选人，两者都是可行的，并且没有排序。这就是为什么您会收到“模棱两可的呼叫”错误。

正确的方法是声明您定义的那些，即，确切地说，您现在未注释的内容。

# java - Android 问答游戏 - 每个 qstion 的倒数计时器

> ID：11532684
> 
> 赞同：2
> 
> 时间：2012-07-18T00:22:10.037
> 
> 标签：java, android, timer, countdown

我使用此处的教程为 Android 创建了一个测验应用程序：http: [//automateddeveloper.blogspot.co.uk/2011/06/getting-started-complete-android-app.html](http://automateddeveloper.blogspot.co.uk/2011/06/getting-started-complete-android-app.html)

对于每个问题，用户只有 20 秒的时间来回答它。如果他/她在 20 秒内没有回答，`AlertDialog`则会弹出一个提示，游戏将终止。

为此，我在`OnCreate`方法中添加了一个计数器`QuestionActivity class`：

```
final TextView myCounter = (TextView) findViewById(R.id.countdown);
    new CountDownTimer(20000, 1000) {

        @Override
        public void onFinish() {
            timeUp();
        }

        @Override
        public void onTick(long millisUntilFinished) {
            myCounter.setText("Time left: "
                    + String.valueOf(millisUntilFinished / 1000));
        }

    }.start();

public void timeUp() {

    AlertDialog.Builder builder = new AlertDialog.Builder(
            QuestionActivity.this);
    builder.setTitle("Times up!")
            .setMessage("Game over")
            .setCancelable(false)
            .setNeutralButton(android.R.string.ok,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            QuestionActivity.this.finish();
                        }
                    });
    AlertDialog alert = builder.create();
    alert.show();
} 
```

计数器在屏幕上正常显示和运行。回答完一个问题后，活动转到下一个问题，并且计数器再次将自身重置为 20 秒。

**问题**

测验有 15 个问题，回答 3 或 4 个问题后，应用程序崩溃，我收到以下错误：

```
07-18 00:49:05.530: E/AndroidRuntime(4867): android.view.WindowManager$BadTokenException: Unable to add window -- token android.os.BinderProxy@41533a80 is not valid; is your activity running? 
```

我相信这与`AlertDialog`. 我在 Stackoverflow 上查找了这个错误代码，流行的解决方案是`ActivityName.this`在构建`AlertDialog`.

不幸的是，这并不能解决问题。

我相信计数器为整个活动设置了 20 秒的时间限制。我的要求是每个问题 20 秒。

但是，当用户按下'`Next`按钮并且活动移动到下一个问题时，计数器会重置为 20 秒。

`Next`当用户按下按钮时我应该重置计数器吗？这是按钮的`OnClickListener`代码`Next`

```
if (currentGame.isGameOver()) {
        Intent i = new Intent(this, EndgameActivity.class);
        startActivity(i);
        finish();
    } else {
        Intent i = new Intent(this, QuestionActivity.class);
        startActivity(i);
                    SHOULD I ADD SOMETHING HERE?
        finish(); 
```

**任何人都可以帮我编写解决问题的代码吗？**

这是所有代码`QuestionActivity.class`

```
public class QuestionActivity extends SherlockActivity implements
    OnClickListener {

private Question currentQ;
private GamePlay currentGame;
private Context context;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.question);

    getSupportActionBar().hide();
    /**
     * Configure current game and get question
     */
    currentGame = ((ChuckApplication) getApplication()).getCurrentGame();
    currentQ = currentGame.getNextQuestion();

    Button nextBtn = (Button) findViewById(R.id.nextBtn);
    nextBtn.setOnClickListener(this);

    Button quitBtn = (Button) findViewById(R.id.quitBtn);
    quitBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            finish();
        }
    });

    //Update the question and answer options..
    setQuestions();

    final TextView myCounter = (TextView) findViewById(R.id.countdown);
    new CountDownTimer(20000, 1000) {

        @Override
        public void onFinish() {
            // myCounter.setText("Time up!");
            timeUp(context);
        }

        @Override
        public void onTick(long millisUntilFinished) {
            myCounter.setText("Time left: "
                    + String.valueOf(millisUntilFinished / 1000));
        }
    }.start();
}

public void timeUp(Context context) {

    AlertDialog.Builder builder = new AlertDialog.Builder(
            QuestionActivity.this);
    builder.setTitle("Times up!")
            .setMessage("Game over")
            .setCancelable(false)
            .setNeutralButton(android.R.string.ok,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            QuestionActivity.this.finish();
                        }
                    });
    AlertDialog alert = builder.create();
    alert.show();
}

/**
 * Method to set the text for the question and answers from the current
 * games current question
 */
private void setQuestions() {
    // set the question text from current question
    String question = Utility.capitalise(currentQ.getQuestion()) + "?";
    TextView qText = (TextView) findViewById(R.id.question);
    qText.setText(question);

    // set the available options
    List<String> answers = currentQ.getQuestionOptions();
    TextView option1 = (TextView) findViewById(R.id.answer1);
    option1.setText(Utility.capitalise(answers.get(0)));

    TextView option2 = (TextView) findViewById(R.id.answer2);
    option2.setText(Utility.capitalise(answers.get(1)));

    TextView option3 = (TextView) findViewById(R.id.answer3);
    option3.setText(Utility.capitalise(answers.get(2)));

    TextView option4 = (TextView) findViewById(R.id.answer4);
    option4.setText(Utility.capitalise(answers.get(3)));
}

public void onClick(View arg0) {
    //validate a checkbox has been selected
    if (!checkAnswer())
        return;

    //check if end of game
    if (currentGame.isGameOver()) {
        Intent i = new Intent(this, EndgameActivity.class);
        startActivity(i);
        finish();
    } else {
        Intent i = new Intent(this, QuestionActivity.class);
        startActivity(i);
        finish();
    }
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (keyCode) {
    case KeyEvent.KEYCODE_BACK:
        return true;
    }

    return super.onKeyDown(keyCode, event);
}

/**
 * Check if a checkbox has been selected, and if it has then check if its
 * correct and update gamescore
 */
private boolean checkAnswer() {
    String answer = getSelectedAnswer();
    if (answer == null) {
        // Log.d("Questions", "No Checkbox selection made - returning");
        return false;
    } else {
        // Log.d("Questions",
        // "Valid Checkbox selection made - check if correct");
        if (currentQ.getAnswer().equalsIgnoreCase(answer)) {
            // Log.d("Questions", "Correct Answer!");
            currentGame.incrementRightAnswers();
        } else {
            // Log.d("Questions", "Incorrect Answer!");
            currentGame.incrementWrongAnswers();
        }
        return true;
    }
}

private String getSelectedAnswer() {
    RadioButton c1 = (RadioButton) findViewById(R.id.answer1);
    RadioButton c2 = (RadioButton) findViewById(R.id.answer2);
    RadioButton c3 = (RadioButton) findViewById(R.id.answer3);
    RadioButton c4 = (RadioButton) findViewById(R.id.answer4);
    if (c1.isChecked()) {
        return c1.getText().toString();
    }
    if (c2.isChecked()) {
        return c2.getText().toString();
    }
    if (c3.isChecked()) {
        return c3.getText().toString();
    }
    if (c4.isChecked()) {
        return c4.getText().toString();
    }

    return null;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T08:31:49.200

`CountDownTimer`我认为当您尝试进行对话时（可能在接近尾声时？！？），该活动在某个时刻不再存在。

无论如何，我认为为每个问题完成和开始相同的活动并不是一个好主意，相反，您可以使用当前活动并简单地重新启动计时器。例如：

```
public class QuestionActivity extends SherlockActivity implements
    OnClickListener {

   private CountDownTimer mCountDown;

   @Override
   public void onCreate(Bundle savedInstanceState) {
      // ...
      mCountDown = new CountDownTimer(20000, 1000) {

        @Override
        public void onFinish() {
            // myCounter.setText("Time up!");
            timeUp(context);
        }

        @Override
        public void onTick(long millisUntilFinished) {
            myCounter.setText("Time left: "
                    + String.valueOf(millisUntilFinished / 1000));
        }
      }.start();
      // ... 
```

并在`onClick`回调中设置新问题，停止旧计时器并重新启动新计时器：

```
//check if end of game
if (currentGame.isGameOver()) {
    Intent i = new Intent(this, EndgameActivity.class);
    startActivity(i);
    finish();
} else {
    if (mCountDown != null) { 
       mCountDown.cancel();
    }  
    currentQ = currentGame.getNextQuestion();
    setQuestions();
    mCountDown = new CountDownTimer(20000, 1000) {

        @Override
        public void onFinish() {
            // myCounter.setText("Time up!");
            timeUp(context);
        }

        @Override
        public void onTick(long millisUntilFinished) {
            myCounter.setText("Time left: "
                    + String.valueOf(millisUntilFinished / 1000));
        }
    }.start();  
} 
```

另外，在`Dialog`'s的回调中，`Button`我会`Dialog`在完成之前先关闭`Activity`：

```
((AlertDialog) dialog).dismiss();
QuestionActivity.this.finish(); 
```

# java - Android游戏开发架构

> ID：11532686
> 
> 赞同：2
> 
> 时间：2012-07-18T00:22:22.867
> 
> 标签：java, android, structure

我想在 Android 平台上开发游戏，我有大约一年的 Java 经验，并且还使用了 C++ 中的 OpenGL 库。我还用 Java 编写了 Minesweeper 和 Connect Four。基本上，这是我想要创建的游戏类型：

![游戏布局示例草图](../Images/da37d0683f2aee226394f5e86eaa60ea.png)

按下屏幕会使你的角色在屏幕上上升，释放它会使它下降。我知道已经有这样的游戏了，但这对我来说并不重要，这是我目前的目标。

我编写的两个游戏的结构都很简单，它只是一个 GridLayout。这不适合任何定义的布局。然后，我完全不知道如何测试角色/环境冲突。我还想知道绘制“碰撞”环境的最简单/最快的方法是什么，我认为它会使用 OpenGL，但据我所知，它仍然需要很长时间并且不会那么容易。

我一直在尝试找到有关此的教程，但显然，我没有成功。

PS：我已经知道制作Android应用程序的基础知识，所以您不必担心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T00:28:12.993

考虑一下您要单独实现的目标的每个部分。

首先，您可能会阅读 libgdx：[http](http://code.google.com/p/libgdx/) ://code.google.com/p/libgdx/ 这是一个很棒的安卓游戏引擎，可以为您完成很多工作。

对于玩家来说，如果按下它，则将其视为将玩家的 y 位置增加几个像素，否则将其递减。

对于地图，您可能需要某种基于 2d 多边形的上下碰撞环境的碰撞，libgdx 有一个内置的物理库，但我不确定它如何支持基于多边形的碰撞。最后，只需创建地图并使其比游戏屏幕更宽，然后随着玩家的移动移动相机。

# javascript - OpenLayers手绘多边形没有弹性线到起点

> ID：11532688
> 
> 赞同：0
> 
> 时间：2012-07-18T00:22:27.983
> 
> 标签：javascript, openlayers

使用（精彩的）JavaScript OpenLayers 库有没有一种方法可以允许徒手绘制一个多边形，该多边形的终点并不总是连接到第一个点，而是只有在鼠标向上时，多边形才完成并被填充？

了解我的意思的示例：http: [//openlayers.org/dev/examples/draw-feature.html](http://openlayers.org/dev/examples/draw-feature.html)

选择多边形，然后按住 shift 进行手绘。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T15:40:32.103

有一个类可以处理它：[http ://dev.openlayers.org/docs/files/OpenLayers/Handler/Path-js.html](http://dev.openlayers.org/docs/files/OpenLayers/Handler/Path-js.html)

# php - jquery modal-dialog，按钮，重定向到链接，在 jquery/js 中传递 php 变量

> ID：11532689
> 
> 赞同：0
> 
> 时间：2012-07-18T00:22:47.203
> 
> 标签：php, javascript, jquery, modal-dialog

```
$("#modal_confirmation").dialog({
            autoOpen: false,
            bgiframe: true,
            resizable: true,
            width:500,
            modal: true,
            overlay: {
                backgroundColor: '#000',
                opacity: 0.5
            },
            buttons: {
                             'Delete': function() {
                            //HERE I HAVE TO PUT A LINK TO GO TO A URL*
                                   $(this).dialog('close');
                             },
                            'Cancel': function() {
                    $(this).dialog('close');
                }

            }
        }); 
```

*   该链接必须传递 php 变量。我试过类似的东西：'删除'：

    函数（） { window.location = "delete_content?id=" $idC

并且

```
window.location = "delete_content?id=" <?php echo $idC;?>

 <a  class='btn_no_text btn ui-state-default ui-corner-all tooltip modal_confirmation_link'  title='Eliminar' href=''>
      <span class='ui-icon ui-icon-circle-close'></span>
     </a> 
```

当您单击该链接时，它会打开一个模型对话框以及我在上面显示的按钮。所以总结一下，当你点击删除它应该去一个看起来像这样的链接：

```
delete_content.php?id=SOME NUMBER. 
```

我也尝试访问 html/php 上的 href 属性，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:23:54.310

```
buttons: {
     'Delete': function() {
     **var linkToRedirect = document.getElementById('completeLink').value;
     window.location = linkToRedirect;**
     $(this).dialog('close');
}, 
```

在表格上：

`<input type='hidden' name='completeLink' id='completeLink'` `value='delete_content.php?&id=$idC' />`

# mysql - MYSQL 连接大字符串

> ID：11532691
> 
> 赞同：1
> 
> 时间：2012-07-18T00:23:14.977
> 
> 标签：mysql, database

我有一个网络爬虫，它在爬网时将信息保存到数据库中。在执行此操作时，它还将其操作的日志文件以及遇到的任何错误保存到 mysql 数据库中的日志字段（字段变为 64kb 到 100kb 之间的任何位置。它通过连接（使用 mysql CONCAT 函数）来完成此操作。

这似乎工作正常，但我担心它对 mysql 数据库的 cpu 使用/影响。我注意到网络爬取的执行速度比我实现将日志保存到数据库之前的速度要慢。

我从管理网页查看此日志文件，除了加载缓慢之外，当前的实现似乎工作正常。有什么加快速度的建议或实施建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T14:18:28.040

多次将 100kb 字符串读入内存，然后通过数据库将它们写入磁盘。当然你会经历减速！您所做的每一部分都将用于任务内存、磁盘和 cpu（特别是如果内存使用量达到系统最大值并且您开始交换到磁盘）。让我计算一下您可能会降低整体网站性能的一些方式：

1.  随着存储 100kb 记录的时间增加单个进程保持连接的时间，Sql 连接最大并备份
2.  Webserver 进程会耗尽空闲进程池并达到最大值，并且需要更长的时间才能释放，因为它们必须等待数据库连接才能释放。
3.  Web 服务器进程开始膨胀，每个进程占用更多内存，可能超过系统在不进行交换的情况下可以处理的内存。这通过使用最大值来复杂化。由于#2 导致的进程数量
4.  ...可以写一本书来描述你的情况。

# qt - 如何禁用全选 QTreeView 键绑定

> ID：11532694
> 
> 赞同：1
> 
> 时间：2012-07-18T00:23:49.273
> 
> 标签：qt, key-bindings, maya, qtreeview, qtreewidget

我在 Maya（一个 3D 计算机图形应用程序）的一个小部件中有 QTreeWidget。问题是，我的小部件不仅阻止了本机 CTRL+A 热键，它还在选择我的树中的所有内容。我怎样才能让这个热键冒泡到父应用程序？

我已经在使用事件过滤器进行很多自定义键处理，但树似乎想为我处理这个。我喜欢箭头键功能，所以我不想禁用所有键绑定，但如果必须，我会......如果我知道怎么做

干杯，

PS这里问了类似的问题，但答案忽略了这个问题： [qt：我想禁用为QTreeView自动设置的键绑定](https://stackoverflow.com/questions/4130971/qt-i-would-like-to-disable-the-key-bindings-automatically-set-for-a-qtreeview/4133913#4133913)

* * *

这是QTreeWidget 的 Python 解决方案*。*

我无法确定这是我用 Python 做过的最肮脏的事情，还是只是扩展方法的漂亮 Python 版本！（感觉是前者。）

问题是，我实际上没有 QTreeView 类。它以名称“树”添加到设计器中，所以我从字面上覆盖了该方法，然后从*我*的方法中调用基本功能......

```
def __init__ #...snip...
    self.tree.keyPressEvent = self.onKeyPressEvent # Replace with my method

def onKeyPressEvent(self, event):
    if event.key() == Qt.Key_A and event.modifiers() == Qt.ControlModifier:
        event.ignore()  # Allows fall-through to the parent
        return

    QtGui.QTreeView.keyPressEvent(self.tree, event)  # All other behaviors handled 
```

...所以这对我来说太脏了。我知道必须有解决这种常见情况的方法（没有子类）。我已经在使用事件过滤器，所以我尝试了它并且它有效。关键是知道事件在哪里被处理并使用两者`event.ignore()`以及返回`True`以允许事件冒泡并阻止`KeyPressEvent`CTRL+A。

```
def eventFilter(self, obj, event):
    # Filter out all non-KeyPress events
    if not event.type() == QEvent.KeyPress:
        return False

    if event.key() == Qt.Key_A and event.modifiers() == Qt.ControlModifier:
        event.ignore()  # Allows fall-through to the parent
        return True     # Block the tree's KeyPressEvent

    return False        # Do nothing 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:45:45.460

重新实现`keyPressEvent`，当按下 CTRL+A 时，忽略该事件。

代码应类似于以下内容：

```
MyTreeView::keyPressEvent(QKeyEvent *e)
{
    if(e->key() == Qt::Key_A && e->modifiers() == Qt::ControlModifier)
    {
        e->ignore();
        QWidget::keyPressEvent(e); // Not sure about this. Please try and report!
    }
    else
        QTreeView::keyPressEvent(e);
} 
```

# ruby-on-rails - 推送到 Heroku 后无法连接到 PostgreSQL 数据库

> ID：11532695
> 
> 赞同：1
> 
> 时间：2012-07-18T00:23:53.400
> 
> 标签：ruby-on-rails, postgresql, heroku

我担心这可能是一个愚蠢的问题/容易解决，但已经卡了一段时间。非常感谢您提供的任何反馈。

我的开发和生产数据库都是 Postgres。推送到 Heroku 后，我的开发环境中的 scss 文件出现问题。（尽管有默认的配置设置，但 SCSS 文件的更新并未反映在我的开发环境中。不确定这是否是预编译生产环境的预期结果。）

重新启动系统后，我无法再连接到 Postgres 数据库。我通过命令行（rails s）和pgAdminIII得到了同样的错误，说，“

```
could not connect to server: Connection refused (0x0000274D/10061) Is the
server running on host "127.0.0.1" and accepting TCP/IP connections on port 
5432? 
```

我的文件配置如下，并且符合我发现的与此问题相关的其他帖子中给出的描述。此外，我可以使用我的 SQLite3 项目访问 localhost:3000。对于任何反馈，我们都表示感谢。

我的 postgresql.conf 文件

```
#------------------------------------------------------------------------------
# CONNECTIONS AND AUTHENTICATION
#------------------------------------------------------------------------------
# - Connection Settings -
listen_addresses = '*'
port = 5432
max_connections = 100 
```

我的 pg_hba.conf 文件

```
# TYPE  DATABASE    USER        CIDR-ADDRESS          METHOD
# IPv4 local connections:
host    all         all         127.0.0.1/32          md5
# IPv6 local connections:
host    all         all         ::1/128               md5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T18:14:53.970

我最终完成了完全[卸载](http://forums.enterprisedb.com/posts/list/1437.page)，然后将 postgres 服务配置为[使用我的本地系统帐户](http://support.microsoft.com/kb/314357/EN-US)。现在我可以毫无问题地连接到我的 postgres 服务器。

# php - 基本的 MySQL 帮助？- 提交数据

> ID：11532696
> 
> 赞同：0
> 
> 时间：2012-07-18T00:24:02.900
> 
> 标签：php, mysql, database, mysqli

我在 PHP 方面一直在进步——但我不知道我在使用 MySQL 时在做什么。

我有一个代码

```
<a href="http://www.example.com/test.php?for=abcde&affi=12345&reff=foo"><IMG></a> 
```

我需要抓取“for”、“affi”和“reff”并将它们输入数据库

```
//Start the DB Call
    $mysqli = mysqli_init();

//Log in to the DB
    if (!$mysqli) {
        die('mysqli_init failed');
    }

    if (!$mysqli->options(MYSQLI_INIT_COMMAND, 'SET AUTOCOMMIT = 0')) {
        die('Setting MYSQLI_INIT_COMMAND failed');
    }

    if (!$mysqli->options(MYSQLI_OPT_CONNECT_TIMEOUT, 5)) {
        die('Setting MYSQLI_OPT_CONNECT_TIMEOUT failed');
    }

    if (!$mysqli->real_connect('localhost', 'USERNAME', 'PASSWORD', 'DATABASE')) {
die('Connect Error (' . mysqli_connect_errno() . ') '
        . mysqli_connect_error());
} 
```

这就是我用来创建连接的方法。有用。我还创建了一个表，称为“table”，其中包含“for”、“affi”和“reff”的行。

所以我的问题是......有人被定向到[http://www.example.com/test.php?for=abcde&affi=12345&reff=foo](http://www.example.com/test.php?for=abcde&affi=12345&reff=foo)

现在我已经打开了一个数据库连接 - 在将它们重定向到目标站点之前如何将这些数据发送到数据库？他们点击 - 通过此页面 - 被重定向到目的地。

**BONUS KARMA** - 我还需要一个单独的 PHP 文件，我可以从该数据库创建 PULLS。如果您能指出一些说明或向我展示一个简单的“如何从该表中提取这些行值”，我将不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:48:46.550

如果我理解正确，您将需要使用[$_GET](http://php.net/manual/en/reserved.variables.get.php)来获取 URL 参数。

然后你想用你得到的值在数据库上运行一个[插入查询](http://www.php.net/manual/en/mysqli.query.php)，它应该是这样的：

```
INSERT INTO table VALUES(x, y, z) 
```

然后您需要使用[location header](http://php.net/manual/en/function.header.php)更改页面。

对于额外的问题，您只需要您现在拥有的带有选择查询的代码，例如：

```
SELECT * FROM table WHERE 1; 
```

然后获取[查询结果](http://www.php.net/manual/en/mysqli-result.fetch-array.php)。

如果这不能回答您的问题，请提供一些说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:37:16.167

Mysqli 是已弃用的功能，现在建议使用 PDO 连接数据库。你可以做以下。

```
<?php
  $conn = new PDO('dblib:host=your_hostname;dbname=your_db;charset=UTF-8', $user, $pass);
  $sql = "SELECT * FROM users WHERE username = '$username'";
  $result = $conn->query($sql);
?> 
```

[在这里](http://net.tutsplus.com/tutorials/php/pdo-vs-mysqli-which-should-you-use/)阅读更多。

# javascript - 使用 JavaScript 返回 google 可视化表中的表头值

> ID：11532699
> 
> 赞同：1
> 
> 时间：2012-07-18T00:24:24.707
> 
> 标签：javascript, jquery, html

我正在使用 Google Visualization API 编写一个 JavaScript 应用程序。

```
 /* Define a table */
        var table = new google.visualization.ChartWrapper({
          'chartType': 'Table',
          'containerId': 'chart2',
          'options': {
            'sortColumn': '-1',
            'allowHtml' : 'true',
          },
          'style' : {
                'white-space' : 'nowrap'
          }
        });

 google.visualization.events.addListener(table, 'select',
                function (){
                    var tablewrapper = table.getChart();
                    var tabledata = table.getDataTable();
                    var value = $('.google-visualization-table-tr-head td').html();
                    console.log(value);
                    //var columnId = tablewrapper.getColumnDescriptions();
                    //console.log(tablewrapper);
                    /*var columnIndex = tablewrapper.getViewColumnIndex(); 
                    var selection = tablewrapper.getSelection();
                    for(var i = 0; i < selection.length; i++){
                        var item = selection[i];
                        console.log('{row:' + item.row + ',column:' + item.column + '}');
                        var properties = tabledata.getRowProperties(parseInt(item.row));
                        console.log(properties);
                    }
                    */
                }
        ); 
```

以上是我的听众的定义。我的目标是获得`columnIndex`或返回`table head name`，或`entire column`. 如果我能得到`columnIndex`退货，那就直截了当。但是，如果我有`column header name`，我可以将其映射到哈希表，并检索`columnIndex`. 如果我有整个列，我想返回数组的第一个元素，即 id。但是，我不知道如何完成这两项任务。有人可以帮我吗？使用 Google 的 Visualization API 或`JQuery`

# jquery - 在框中添加新行

> ID：11532700
> 
> 赞同：0
> 
> 时间：2012-07-18T00:24:37.107
> 
> 标签：jquery, jqgrid, row

我是巴西人，请原谅英语

我需要在框中添加一个或多个新行以一次添加多个记录。

我无法开发该功能

我在 5710 zData 文件 jquery.jqgrid.min.js 中创建了它

[http://pastebin.com/QDVjbw3C](http://pastebin.com/QDVjbw3C)

这是列表 list.gsp

[http://pastebin.com/trx96u2k](http://pastebin.com/trx96u2k)

每次单击按钮换行时在此窗口中重新创建相同的字段

网址分隔

http://

img513.imageshack.us/img513/7360/semttuloxuj.jpg

# scala - 用函数替换异步匿名类

> ID：11532704
> 
> 赞同：2
> 
> 时间：2012-07-18T00:24:54.740
> 
> 标签：scala, shapeless

我认为这可能与无形库有关。

我正在使用无形将匿名类转换为闭包。这需要使用`hlisted`from`FnHListerAux`特征。

我想要做的就是摆脱传入的虚拟函数，并在这个函数周围返回一个闭包，它具有与`F`. 如果没有异步执行的匿名类，这将很容易。有没有办法解决这个问题？

```
def async[F, A <: HList, R](
  shell: Shell,
  success: F,
  failure: FunctionTypes.Failure,
  dummy: F)(implicit h: FnHListerAux[F, A => R],
            u: FnUnHListerAux[A => R, F]): F =
{ (args: A) =>

  require(shell != null, "Shell cannot be null")
  require(shell.getDisplay() != null, "The shell must have a display")

  val display = shell.getDisplay()
  display.asyncExec(new Runnable() {
    def run(): Unit = {
      try {
        success.hlisted(args)
      } catch {
        case e: Throwable =>
          failure(e)
      }
    }
  })

  dummy.hlisted(args)
}.unhlisted 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T09:39:47.863

我将从简化一点开始。假设我有一个函数`f`。我事先不知道它是什么，我也不关心它返回什么。我想用一些功能包装它并获得一个具有相同参数类型的函数。我也不关心这个结果函数返回什么，所以我不妨让它 return `Unit`。

您可以编写一堆（嗯，22 个）函数，如下所示：

```
def wrap[A](f: A => Unit): A => Unit = ???
def wrap[A, B](f: (A, B) => Unit): (A, B) => Unit = ???
def wrap[A, B, C](f: (A, B, C) => Unit): (A, B, C) => Unit = ??? 
```

但你不想。

Shapeless 绝对可以帮助您更通用地解决这个问题：

```
def wrap[F, A <: HList](f: F)(
  implicit h: FnHListerAux[F, A => Unit], u: FnUnHListerAux[A => Unit, F]
): F = { (args: A) =>
  println("Before!"); f.hlisted(args); println("After!")
}.unhlisted 
```

这给了我们：

```
scala> def f(i: Int, s: String) { println(s * i) }
f: (i: Int, s: String)Unit

scala> val wf = wrap(f _)
wf: (Int, String) => Unit = <function2>

scala> wf(3, "ab")
Before!
ababab
After! 
```

请注意，它`f`可能会返回除此之外的其他内容，`Unit`并且这仍然有效，因为 Scala 中的所有内容都是 a`Unit`并且`FunctionN`特征在其返回类型中是协变的。

将此方法应用于您的代码，我们得到以下结果：

```
def async[F, A <: HList](
  shell: Shell, success: F, failure: FunctionTypes.Failure
)(
  implicit h: FnHListerAux[F, A => Unit], u: FnUnHListerAux[A => Unit, F]
): F = { (args: A) =>
  require(shell != null, "Shell cannot be null")
  require(shell.getDisplay() != null, "The shell must have a display")

  val display = shell.getDisplay()
  display.asyncExec(new Runnable() {
    def run(): Unit = {
      try {
        success.hlisted(args)
      } catch {
        case e: Throwable =>
          failure(e)
      }
    }
  })
}.unhlisted 
```

不需要`dummy`。

# c# - 如何在我的应用程序中显示上次构建的内部版本号和/或日期时间？

> ID：11532705
> 
> 赞同：20
> 
> 时间：2012-07-18T00:25:15.110
> 
> 标签：c#, winforms, build, version, versioning

我知道我可以这样做来获取应用程序的官方（发布/发布）版本号：

```
string version = Assembly.GetExecutingAssembly().GetName().Version.ToString();  
this.Text = String.Format("Platypi R Us - version {0}", version); 
```

...但这仅显示我的应用程序的“发布版本”*（“1.0.0.0”）。我想显示内部版本号。

*   来自项目 | 属性 | 发布选项卡。

除此之外，或者除此之外，我想显示最后一次构建的日期和时间，以便它显示*“Platypi R Us - 版本 3.14 (7/17/2012 16:22)”*

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-18T21:25:47.787

从返回的值`Assembly.GetExecutingAssembly().GetName().Version`是您项目的 AssemblyInfo.cs 文件中的值：

```
[assembly: AssemblyVersion("1.0.0.0")] 
```

在构建之前修改这些以指定它返回的值。或者，如同一 AssemblyInfo.cs 文件中所述：

```
// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version 
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers 
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")] 
```

# hibernate - ALTER TABLE 添加 ON DELETE CASCADE 语句

> ID：11532711
> 
> 赞同：1
> 
> 时间：2012-07-18T00:25:39.823
> 
> 标签：hibernate, postgresql, cascade, cascading-deletes, postgresql-9.0

我想在 PostgreSQL 中执行以下操作（使用 Hibernate）：

```
 ALTER TABLE fruits ADD CONSTRAINTS id ON DELETE CASCADE; 
```

显然，我上面的代码不起作用，所以我正在寻找正确的语句。

如果我不能这样做，那么以下内容如何：

我的表中有一堆数据`fruits`。`id`in 字段`fruits`被 table 用作外键`grapes`。我需要删除一个特定的行，`fruits`并且我希望删除级联到并删除其中具有指定的`grapes`所有条目。我怎么做？`grapes``id`

```
delete from fruits where id = 1 cascade; 
```

注意：我不想加入并删除`grape`. 这只是一个例子。在实际应用中，大量表依赖于`fruits`.

由于我使用的是 Hibernate，对于我使用 delete 语句的情况，hibernate 可以帮助做到吗？
或者我可以使用 PostgreSQL 中的信息模式或系统目录来执行此操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T16:28:33.950

您描述的是使用该选项的教科书[**外键约束。**](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)`ON DELETE CASCADE`

在**SQL**`grapes`中，您可以在场景中创建表时隐式创建它：

```
CREATE TABLE grapes (
  grape_id int PRIMARY KEY
  fruit_id int **REFERENCES fruits(fruit_id) ON DELETE CASCADE**
  ); 
```

或者您可以稍后添加：

```
ALTER TABLE grapes
ADD CONSTRAINT grapes_fruit_id_fkey FOREIGN KEY (fruit_id)
REFERENCES fruits (fruit_id) ON DELETE CASCADE; 
```

您不会直接为此编辑系统目录 - 您几乎从来没有这样做过！这就是上面的[DDL](http://en.wikipedia.org/wiki/Data_Definition_Language)语句的用途。

请注意，外键约束需要引用列上的唯一索引或主索引（`fruits.fruit_id`在您的情况下）并强制[引用完整性](http://en.wikipedia.org/wiki/Referential_integrity)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:54:09.183

这是一种单向的父子关系，您希望父级的更改向下级联到子级，反之则不行。使用注解，我们可以做到这一点。在`fruits`实体中：

```
@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, 
    org.hibernate.annotations.CascadeType.DELETE_ORPHAN })
@OneToMany(fetch = FetchType.LAZY, mappedBy = "fruit")
public Set<Grape> getGrapes() {
    return grapes;
} 
```

在“葡萄”实体中：

```
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "fruit_id")
public Fruit getFruit() {
    return fruit;
} 
```

当您更新或删除父`fruit`级时，更改将自动级联到`grape`子级。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-23T05:10:47.840

我找到了答案：

```
 //in Fruit object
    @OneToMany(mappedBy = "fruit", orphanRemoval=true)
    private List<Grape> grapes;

   //in Grape object
   @OneToOne
   private Fruit fruit; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-17T15:22:42.777

**动机**

这对我不起作用，我设置了

```
<property name="show_sql">true</property> 
```

并且输出没有说明任何类似的内容`...ON DELETE CASCADE...`。

我找到了另一个对我有用的解决方案：

假设您有一个作者类和一个作者书籍类，并且您希望在删除作者时自动删除所有书籍（通过休眠，sql-query，...），并且您不能（总是）删除的原因是会话.删除（）。

也许：

```
session.createSQLQuery("DELETE FROM author").executeUpdate(); 
```

* * *

**解决方案**

所以你的作者类可能看起来像这样：

```
@Entity
@Table(name = "author")
public class Author {

   @Id
   @GeneratedValue(generator = "increment")
   @GenericGenerator(name = "increment", strategy = "increment")
   @Column(name = "ID")
   private Integer id;

   @Column(name = "NAME")
   private String name;

   @OneToMany(mappedBy = "author")
   private Set<Book> books;
... 
```

课本看起来像这样：

```
@Entity
@Table(name = "book")
public class Book {

   @Id
   @GeneratedValue(generator = "increment")
   @GenericGenerator(name = "increment", strategy = "increment")
   @Column(name = "ID")
   private Integer id;

   @Column(name = "TITLE")
   private String title;

   @ManyToOne
   @JoinColumn(name = "AUTHOR_ID", foreignKey = @ForeignKey(name = "FK_BOOK_author_AUTHOR_ID"))
   private Author author;
... 
```

诀窍是使用自己命名外键约束

```
foreignKey = @ForeignKey(name = "FK_BOOK_author_AUTHOR_ID") 
```

然后添加

```
<property name="hibernate.hbm2ddl.import_files">update.sql</property> 
```

到您的*hibernate.cfg.xml*（不要忘记*hibernate.hbm2ddl.auto*）。update.sql然后包含表约束的更新*：*

```
ALTER TABLE `book` DROP FOREIGN KEY `FK_BOOK_author_AUTHOR_ID`; 
ALTER TABLE `book` ADD CONSTRAINT `FK_BOOK_author_AUTHOR_ID` FOREIGN KEY (`AUTHOR_ID`) REFERENCES `author`(`ID`) ON DELETE CASCADE; 
```

因此，hibernate 总是能够删除/更改约束，因为它知道约束的名称——您还应该检查@Cascade 设置——并且您必须实施一个策略来处理会话中对象的删除！

# algorithm - 如果数组未排序，可以使用哪种搜索技术？

> ID：11532714
> 
> 赞同：2
> 
> 时间：2012-07-18T00:25:55.253
> 
> 标签：algorithm, search, binary-search

二分搜索在 O(log n) 中执行搜索。但是，它只能在数组已排序时使用。

如果数组未排序，哪种搜索技术最好？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T00:30:48.410

如果您只进行几次搜索，那么基本的线性搜索是您能做的最好的。

如果您要经常搜索，通常最好进行排序，然后使用二分搜索（或者，如果内容的分布相当可预测，则使用插值搜索）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-04T12:05:12.940

如果您的数据未排序，您可以使用哈希表在 O(1) 时间内访问您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T11:11:52.297

您可以进行线性搜索。但是线性搜索的问题是它有性能问题，它需要很多时间。所以我建议尽可能对数组进行排序，然后使用二进制搜索。如果您想要更好的延迟，请尝试插值搜索，这是典型二分搜索的优化版本。

# html - 使用边距将两个 div 放在同一行

> ID：11532715
> 
> 赞同：0
> 
> 时间：2012-07-18T00:26:00.973
> 
> 标签：html, css

我正在尝试将 div`div.mes`和`div.vazio`放在同一行。如果我从两个 div (`QuadroPrincipal`和`ul_mes`) 中删除边距，我会得到我想要的结果。

问题是我需要 div`mes`并`vazio`在同一行上保持元素`quadroPrincipal`和`ul_mes`.

看看：http: [//jsfiddle.net/4Zjx8/5/](http://jsfiddle.net/4Zjx8/5/)

我想建立这个例子：

![例子](../Images/ba44d97a7e1a31546b019f16bb7ab6a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:46:34.507

**不让**`.mes`' 的宽度 100% 怎​​么样？此外，您需要指定所需的行为；应该`.vazio`部分显示？应该`.mes`让路，变得不那么宽吗？你真的需要百分比吗？容器是否是固定宽度，因此示例/小提琴中的宽度始终是某个已知值？（例如，如果容器宽度 = 1000 并且`.foo`为 75%，则始终为 750 像素（不包括边距等））。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:30:49.577

首先，给 div#ListaEventosPorMes 一个宽度。

然后 float:left .mes 和 .vazio 并为它们中的每一个赋予一个加起来小于 div 宽度的宽度。

# php - PHP - 计算对象数组中的类属性

> ID：11532716
> 
> 赞同：1
> 
> 时间：2012-07-18T00:26:07.133
> 
> 标签：php, arrays, object, foreach, array-filter

我有这个函数，它遍历对象数组以搜索匹配的键 => 值对。我很好奇是否没有更简单（或更优雅）的方式：

```
function count_class_attr($objects, $obj_key, $obj_val) {
 $count = 0;
 foreach ($objects as $object ) {
   foreach ($object as $key => $value) {
       if ($key == $obj_key && $value == $obj_val){
           $count ++;
       }
   }
 }
 return $count;
} 
```

我认为下面更接近我想要的。我正在循环一个对象数组，而不是一个数组数组——下面的函数会尽可能高效吗？

```
function count_class_attr($objects, $obj_key, $obj_val) {
 $count = 0;
 foreach ($objects as $object ) {
    if (property_exists($object, $obj_key)) {
       if($object->$obj_key == $obj_val) { $count ++; }
    }
 }
 return $count;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:58:14.833

而不是遍历 $object 数组，因为这是一个哈希，一个简单的检查键/值是否存在/匹配应该工作，即：

```
if (array_key_exists($obj_key, $object)) {
    if ($object[$obj_key] == $obj_val) {
       $count++
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:44:11.920

```
if (in_array($obj_key, array_keys($objects, $obj_val))
   $count++; 
```

# c# - 从 MVC C# 发送具有多个来自字段的电子邮件

> ID：11532723
> 
> 赞同：2
> 
> 时间：2012-07-18T00:26:53.543
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, mvcmailer

我正在制作一个在线系统，其中我有多个客户，我的客户有多个联系人。现在我希望我的客户能够向他的联系人发送电子邮件，因此当他的联系人收到电子邮件时，他们会在 From:abc@abc.com & ABC company 字段中看到他的公司名称和电子邮件地址。

我正在使用 MVCMailer 发送电子邮件，它工作得很好，但是当我收到测试电子邮件时，它会显示我在 web.config 文件中配置的电子邮件，而不是我在（TO 和 NAME）中的客户电子邮件地址。如何更改发件人地址，以便我客户的联系人可以看到他的电子邮件地址不是我的？

===========================

```
 <system.net>
     <mailSettings>
      <!-- Method#1: Configure smtp server credentials -->
     <smtp from="xyz@xyz.com">
    <network enableSsl="true" host="smtp.xyz.com" port="587" userName="xyz@xyz.com" password="ABC" />
  </smtp>
  <!-- Method#2: Dump emails to a local directory -->
  <!--
  <smtp from="some-email@gmail.com" deliveryMethod="SpecifiedPickupDirectory">
    <network host="localhost" />
    <specifiedPickupDirectory pickupDirectoryLocation="c:\temp\"/>
  </smtp>
  -->
</mailSettings> 
```

========================================

这是我在 C# 类中使用的代码

```
 var mailMessage = new MailMessage { Subject = eSubject };
        mailMessage.To.Add(Email);
        mailMessage.Bcc.Add("xyz@xyz.com");
        mailMessage.ReplyToList.Add( new MailAddress(From, ContactPerson));
        mailMessage.Sender = new MailAddress("xyz@xyz.com", ContactPerson);

        //mailMessage.To.Add("some-email@example.com");
        //ViewBag.Data = someObject;
        ViewData = new ViewDataDictionary(obj);

        SmtpClient smtp = new SmtpClient("192.168.1.2",25);
        smtp.Credentials = new NetworkCredential("xyz@xyz.com", "test");

        smtp.Send("xyz@xyz.com","xyz@xyz.com","test","test");
        PopulateBody(mailMessage, viewName, null);

        SmtpClient smtp = new SmtpClient("192.168.1.2",25);
        smtp.Credentials = new NetworkCredential("xyz@xyz.com", "test");

        //smtp.Send("xyz@xyz.com","xyz@xyz.com","test","test");
        PopulateBody(mailMessage, viewName, null);

        return mailMessage; 
```

=========================

请告诉我如何解决这个问题，甚至是否可以使用 mvc c#？

里亚萨特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:29:46.390

看看你的代码：

```
mailMessage.Sender = new MailAddress("xyz@xyz.com", ContactPerson);

smtp.Send("xyz@xyz.com","xyz@xyz.com","test","test"); 
```

我认为您在这里的任何地方都告诉 MvcMailer 您的发件人是“xyz@xyz.com”。我认为在这里您应该更改为您的客户电子邮件和姓名。
顺便说一句，检查“smtp.Send”的评论。确保您了解所有参数的含义。

# mysql - mysql选择一个联合，其中一个中的值不出现在另一个中

> ID：11532726
> 
> 赞同：0
> 
> 时间：2012-07-18T00:27:14.053
> 
> 标签：mysql, sql

对不起标题不好的帖子。

假设我有下表：

```
C1 | C2       | c3
1  | foo      | x
2  | bar      | y
2  | blaz     | z
3  | something| y
3  | hello    | z
3  | doctor   | x
4  | name     | y
5  | continue | x
5  | yesterday| z
6  | tomorrow | y 
```

我正在尝试使用执行以下联合的 sql 语句：第一次检索检索所有记录 w/c3 = 'y'

第二次检索检索记录的第一个实例，其中 c3 <> 'y' 并且结果不在前一个联合中

所以，对于结果，我应该看到：

```
C1 | C2   
1  | foo  
2  | bar 
3  | something
4  | name
5  | continue
6  | tomorrow 
```

所以有两个问题：1：我是否完全在我认为可以做到这一点的地方吸烟，以及 2：（假设我可以），我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:43:10.977

试试这个：

```
SELECT   a.C1, a.C2
  FROM   MyTable a
 WHERE   a.C3 = 'y'
    UNION
SELECT   b.C1, b.C2
  FROM   MyTable b
 WHERE   b.C3 <> 'y' AND
         b.C1 not in 
            (
               SELECT c.C1
                 FROM MyTable c
                WHERE c.C3 = 'y'
            ) 
```

**更新 1**

顺便问一下，为什么你想要的结果中只有*一个记录*`5`？实际上，可能有***两个***.

**[观看演示 ​​1](http://sqlfiddle.com/#!6/d56c6/1)**

或者

```
SELECT g.C1, MIN(g.C2) C2
FROM
(SELECT   a.C1, a.C2
  FROM   MyTable a
 WHERE   a.C3 = 'y'
    UNION
SELECT   b.C1, b.C2
  FROM   MyTable b
 WHERE   b.C3 <> 'y' AND
         b.C1 not in 
            (
               SELECT c.C1
                 FROM MyTable c
                WHERE c.C3 = 'y'
            )
) g
GROUP BY g.C1 
```

**[SEE FOR DEMO 2（产生与您想要的结果相同的结果）](http://sqlfiddle.com/#!6/d56c6/5)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:45:26.173

[演示@Sql 小提琴](http://sqlfiddle.com/#!2/7f23e/8)。

```
select *
  from table1
 where c3 = 'y'
 union all
(select table1.*
  from table1
  left join table1 t1
    on table1.c1 = t1.c1
   and t1.c3 = 'y'
 where table1.c3 <> 'y'
   and t1.c1 is null
 -- The meaning of first becomes clear here
 order by table1.c3, table1.c2
 limit 1) 
```

注意： foo 不在列表中，因为它被标记为`x`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T00:50:56.660

试试这个：

```
 SELECT C1, C2
    FROM   Table1
    Where  C3 = 'y'

    UNION

   (
    SELECT  C1, C2
    FROM  Table1
    Where C3 <> 'y' ORDER BY C1 LIMIT 1
   )
 ORDER BY C1 
```

# visual-studio-2010 - 错误：在带有 Fermi GPU 的 Visual Studio 2010 和 cuda 4.2 下未定义标识符“atomicAdd”

> ID：11532728
> 
> 赞同：4
> 
> 时间：2012-07-18T00:28:01.117
> 
> 标签：visual-studio-2010, cuda, atomic, gpu-atomics

我试图在 Visual Studio 2010 下使用 CUDA 4.2 编译一些 CUDA 代码（我使用 Parallel Nsight 2.2 创建了这个 CUDA 项目），但我遇到了一个原子问题“错误：标识符“atomicAdd”未定义”，我仍然不能检查几个论坛后解决。

所以我试图从 CUDA SDK Samples 中获取一些信息。首先，我在 CUDA SDK 中运行了 simpleAtomicIntrinsics 示例，它通过了测试。然后，我将此示例中的所有文件复制到 Visual Studio 2010 中的新 CUDA 4.2 项目并编译它们，结果如下。

```
1>  E:\CUDA exercise Codes\CUDA_EXERCISES\CUDA_EXERCISES\CUDA_EXERCISES>"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include"  -G  --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile  -g    -Xcompiler "/EHsc /nologo /Od /Zi  /MDd  " -o "Debug\simpleAtomicIntrinsics.cu.obj" "E:\CUDA exercise Codes\CUDA_EXERCISES\CUDA_EXERCISES\CUDA_EXERCISES\simpleAtomicIntrinsics.cu" 
1>  simpleAtomicIntrinsics.cu
1>  tmpxft_00007220_00000000-3_simpleAtomicIntrinsics.compute_20.cudafe1.gpu
1>  tmpxft_00007220_00000000-7_simpleAtomicIntrinsics.compute_20.cudafe2.gpu
1>  simpleAtomicIntrinsics.cu
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(33): error : identifier "atomicAdd" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(36): error : identifier "atomicSub" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(39): error : identifier "atomicExch" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(42): error : identifier "atomicMax" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(45): error : identifier "atomicMin" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(48): error : identifier "atomicInc" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(51): error : identifier "atomicDec" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(54): error : identifier "atomicCAS" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(59): error : identifier "atomicAnd" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(62): error : identifier "atomicOr" is undefined
1>  
1>e:\cuda exercise codes\cuda_exercises\cuda_exercises\cuda_exercises\simpleAtomicIntrinsics_kernel.cu(65): error : identifier "atomicXor" is undefined
1>  
1>  11 errors detected in the compilation of "C:/Users/NIEXIA~1/AppData/Local/Temp/tmpxft_00007220_00000000-9_simpleAtomicIntrinsics.compute_10.cpp1.ii".
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): error MSB3721: The command ""C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\bin\nvcc.exe" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_10,code=\"sm_10,compute_10\" --use-local-env --cl-version 2010 -ccbin "c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin"  -I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2\include"  -G  --keep-dir "Debug" -maxrregcount=0  --machine 32 --compile  -g    -Xcompiler "/EHsc /nologo /Od /Zi  /MDd  " -o "Debug\simpleAtomicIntrinsics.cu.obj" "E:\CUDA exercise Codes\CUDA_EXERCISES\CUDA_EXERCISES\CUDA_EXERCISES\simpleAtomicIntrinsics.cu"" exited with code 2.
1>
1>Build FAILED. 
```

顺便说一句，我可以在这个 vs2010 CUDA 项目下运行其他示例，例如时钟、matrixMul 等。（这意味着包含路径设置正确）

我用谷歌搜索并找到以下链接[Some issue with Atomic add in CUDA kernel operation](https://stackoverflow.com/questions/5994859/some-issue-with-atomic-add-in-cuda-kernel-operation)。我根据它更改了项目和.cu文件的属性，但仍然无法解决问题。

有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T00:56:37.047

尝试使用标志编译`-arch sm_20`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T00:48:42.893

Atomics 在计算架构 1.0 下不可用，但您仍在尝试根据构建日志对其进行编译。尝试从您的 CUDA 项目属性中删除引用`compute_10`并`sm_10`仅针对计算架构 2.0（GeForce 400 系列和更新版本）进行编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-15T01:20:44.570

“原子在计算架构 1.0 下不可用，但您仍在尝试根据构建日志对其进行编译。尝试从 CUDA 项目属性中删除对 compute_10 和 sm_10 的引用，并仅针对计算架构 2.0（GeForce 400 系列和更新版本）进行编译)。” 完全正确，顺便说一句，如果你们正在编译rodrigob_doppia的源代码（boosted_learning），您可以在您的机器配置中添加以下行：set（CUDA_NVCC_FLAGS“-arch = sm_20”CACHE STRING“nvcc flags”FORCE）实际上，它是设置将arch标志切换为sm_20，和上面说的一样。

# c# - DNOA 和 MVC4 WebAPI 与委托处理程序的集成

> ID：11532730
> 
> 赞同：1
> 
> 时间：2012-07-18T00:28:25.037
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api, dotnetopenauth

我想探讨将 DNOA 与 MVC4 Web API 集成方面的建议。目前 DNOA 资源服务器实现有以下两个重载，它们以 HttpRequestBase 或 HttpRequestMessageProperty 作为输入，但由于类型不兼容，这些方法不再与新的 MVC 4 WebAPI 消息委托处理程序兼容。委托处理程序围绕 System.Net.Http.HttpRequestMessage。

```
 /// <summary>
    /// Discovers what access the client should have considering the access token in the current request.
    /// </summary>
    public virtual IPrincipal GetPrincipal(HttpRequestBase httpRequestInfo = null, params string[] requiredScopes) 

    /// <summary>
    /// Discovers what access the client should have considering the access token in the current request.
    /// </summary>
    public virtual IPrincipal GetPrincipal(HttpRequestMessageProperty request, Uri requestUri, params string[] requiredScopes) 
```

我可以使用 HTTP 模块启动并运行它，但我想了解 DNOA 与 MVC4 Web API 的预期用途，尤其是与委派处理程序一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:25:21.650

原生支持存在一个[未解决](https://github.com/DotNetOpenAuth/DotNetOpenAuth/pull/194)`HttpRequestMessage`的问题。在此之前，[此邮件列表讨论会](https://groups.google.com/forum/#!msg/dotnetopenid/_azh928Sk0o/Nzqildq4yzcJ)彻底涵盖此问题，包括一些解决方法和[示例](https://github.com/DavidChristiansen/DotNetOpenAuth.WebAPI.40)链接。

# windows - VBScript - 捕捉结束任务信号

> ID：11532731
> 
> 赞同：1
> 
> 时间：2012-07-18T00:28:39.027
> 
> 标签：windows, vbscript, signals, interrupt, taskmanager

我有一个用 VBS 编写的脚本，它每秒检查 LAN 端口是否有连接，如果有，则禁用无线，如果没有 LAN 连接则启用无线。如果您在此脚本运行时关闭计算机，则存在一个不幸的错误，它会导致无线禁用，我想修复它。该脚本在通过 GPO 登录时运行，因此如果从网络登录，它将不会运行。

是否有可能在脚本结束之前捕获 End Task 信号并执行清理操作？我希望在系统关闭时重新启用无线。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:20:58.730

不，我认为这是不可能的，如果是这样，我担心它会不可靠或减慢你的电脑速度。但是就像您可以在登录时运行脚本一样，您也可以在注销时运行脚本，我建议您走这条路。

# objective-c - 使用不同的超类，而不是 NSObject

> ID：11532733
> 
> 赞同：0
> 
> 时间：2012-07-18T00:29:21.370
> 
> 标签：objective-c, class, nsobject, superclass

这可能是一个直截了当的答案，而且我知道在创建新类时不必将 NSObject 设置为超类*。*

但是，例如，我想创建一个包含一组自定义 CABasicAnimations 的类。虽然我可以使用 CABasicAnimation 作为超类，但是否建议我遵循不成文的规则仍然使用 NSObject 或者如果你正在编写这样的类，你会使用 CABasicAnimation 作为超类吗？

我认为只要类只包含与 CABasicAnimation 相关的属性和方法，这并不重要。

在这里你的想法会很有趣！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:33:15.973

规则是对您尝试扩展的任何对象进行子类化。NSObject 用于许多子类，因为它是根对象，但如果我要编写一个与 NSTableView 非常相似的类，那么我会继承 NSTableView。

在您的情况下，如果您正在编写要调用的自定义动画，那么您应该考虑从 CABasicAnimation 继承。另一方面，如果你的动画真的只是预先存在的 CA 动画的集合，那么 NSObject 就可以了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:33:58.683

> 一个包含一组自定义 CABasicAnimations 的类。

在这种情况下，我想使用[**Category**](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)而不是**Subclass**。

# c# - Visual Studio 没有进入相同项目的构造函数

> ID：11532734
> 
> 赞同：0
> 
> 时间：2012-07-18T00:29:46.747
> 
> 标签：c#, visual-studio-2010

我正在尝试调试一些代码，因为一个类在调用时会引发异常。
代码是：

```
 public TrackingStrategy1(string Name, RobotGeometry geometry)
    {
        trackSystem = new TrackSystem(geometry, Name);
    } 
```

它调用（在同一个项目中）：

```
 public TrackSystem(RobotGeometry geometry, string Name)
    {
        finder = new FindModel(geometry);  //breakpoint inserted here fails
        finder.InitModel();

        finder.useGPU = false;
    } 
```

我收到异常'找不到方法：TrackSystem.FindModel..ctor（RobotGeometry）。但是，此时插入的断点不会被命中。如果我注释掉新行，我会在下一行得到相同的异常。

FindModel 在解决方案中包含的另一个项目中被引用，我已经多次重新引用该项目，然后进行了重建。

为什么 Visual Studio 不会在此构造函数中插入的断点处停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:27:59.183

在加载每个类之前，Visual Studio 会检查是否存在所有外部 dll 方法调用。
因为这发生在调用构造函数之前，所以构造函数中的断点永远不会被调用。

在这种情况下，失败的原因是 2 个不同的项目引用了不同版本的 FindModel - 并且在构建中使用了该项目的错误版本。

# perl - 如何在 perl 中创建倒计时 cgi 脚本？

> ID：11532735
> 
> 赞同：1
> 
> 时间：2012-07-18T00:29:48.923
> 
> 标签：perl, cgi

我正在尝试创建一个从 10 倒数到 0 的简单 cgi perl 脚本；但是我似乎无法让它工作。它一直在告诉我`malformed header from script. Bad header=HTTP/1.1 200 OK`。我是 Perl 和 CGI​​ 脚本的新手，所以我确信这非常简单。

```
#!/usr/bin/perl
use warnings;
use strict;

use CGI::Push qw(:standard);

my $startingCountDown = 10;

do_push(-next_page => \&refresh, -last_page=> \&lastPage, -delay => 1 );

sub refresh
{
        my ($cgi, $count) = @_;

        return undef if ($startingCountDown - $count < 0);

        my $num = $startingCountDown - $count;
        my $page = $cgi->start_html();
        $page .= $cgi->p("The count is $num").end_html();
        return $page;
}

sub lastPage
{
     my ($cgi, $count) = @_;
    return start_html()."Blast Off".end_html();
} 
```

如果我从终端（在我的 Macbook 上）运行它，我会收到以下错误：`WARNING: YOUR BROWSER DOESN'T SUPPORT THIS SERVER-PUSH TECHNOLOGY.`. 我试过在 Safari 和 Chrome 中运行这个脚本，但似乎都不起作用。在这种情况下，我将如何编写一个从 10 倒数到 1、每秒更改数字的功能脚本？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:14:35.247

正在使用的“服务器推送”机制`CGI::Push`（特别`multipart/x-mixed-replace`是 ）并未得到广泛支持。您将需要选择一种不同的方式来实现这一点；可能最好的方法是让倒计时发生在 Javascript 中，而不是在服务器端。

# php - jQuery对话框在打开链接之前确认

> ID：11532738
> 
> 赞同：5
> 
> 时间：2012-07-18T00:30:25.037
> 
> 标签：php, jquery, html, jquery-ui, jquery-ui-dialog

我有一个用数据库中的数据填充的表，其中每一行都有一个单元格，里面有一个锚元素。这个锚点会指向同一个页面，但是有一个查询字符串告诉 php 哪一行包含它应该删除的数据。

当用户单击锚点时，我需要打开一个 jQuery 对话框，要求他在加载 url 之前确认他的意图。“取消”按钮应该关闭对话框并且什么都不做。然后“确定”按钮应该让 URL 打开。

非常感谢任何帮助。

// 使用“我尝试过的”进行编辑。这是我第一次弄乱 jQuery，学习的时间已经不多了... =(

```
jQuery(document).ready(function(){
var $dialog = jQuery('<div class='msg_dialog'></div>')
    .html('Are you sure you want to do this?')
    .dialog({
        autoOpen: false,
        title: 'Confirm action',
        buttons: [{
            text: "Cancel",
            click: function(){
                jQuery(this).dialog("close");
            }
        }] // didn't even try the OK button since I couldn't even get the dialog opened
    });

jQuery('#confirm_del').click(function(){
    $dialog.dialog('open');
    return false;
});
}); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-18T00:40:30.510

```
$("a").on("click", function(e) {
    var link = this;

    e.preventDefault();

    $("<div>Are you sure you want to continue?</div>").dialog({
        buttons: {
            "Ok": function() {
                window.location = link.href;
            },
            "Cancel": function() {
                $(this).dialog("close");
            }
        }
    });
}); 
```

**示例：http:** [//jsfiddle.net/uRGJD/](http://jsfiddle.net/uRGJD/)

*（重定向到 Google 不会在 JSFiddle 上工作，但应该在普通页面上工作）*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-18T00:40:29.963

如何使用：

```
<a href="<?php echo 'your_url'.'?query_string='.$query_string ?>" onclick="return confirm('Are your sure?')">
     Go
</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T00:52:48.923

您可以创建一个为您创建按钮的对话框，但我喜欢您自己创建按钮的方法，这样您就可以使用真实链接而不是使用 javascript 进行导航。

**工作演示：http:** [//jsfiddle.net/gilly3/sdzbB/](http://jsfiddle.net/gilly3/sdzbB/)

```
<div id="dialog-confirm">
    <div class="message">Are you sure?</div>
    <div class="buttons">
        <a class="cancel" href="#">Cancel</a>
        <a class="ok" href="#">Ok</a>
    </div>
</div> 
```

```
$("#dialog-confirm").dialog({ autoOpen: false }).find("a.cancel").click(function(e){
    e.preventDefault();
    $("#dialog-confirm").dialog("close");
});
$("a[href]:not(#dialog-confirm a)").click(function(e) {
    e.preventDefault();
    $("#dialog-confirm")
        .dialog("option", "title", $(this).text())
        .dialog("open")
        .find("a.ok").attr({
            href: this.href,
            target: this.target
        });
}); 
```

使用真实链接而不是 , 的好处`location.href = link`是您可以获得各种内置的好东西，例如在新选项卡中打开链接的鼠标快捷方式、将链接拖动到书签栏或桌面的能力、复制的能力剪贴板的链接，通过选项卡访问键盘等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T00:42:45.457

您应该防止链接的默认行为可以像此代码一样完成。

```
$('.tableId tr td a').click(function(event){
    //code to display confirmation dialog  
    event.preventDefault();

  } 
```

您可以使用此 JQuery 插件进行确认对话框。[http://jqueryui.com/demos/dialog/#modal-confirmation](http://jqueryui.com/demos/dialog/#modal-confirmation)

# ios - 如何获取新闻提要应用程序的图像

> ID：11532740
> 
> 赞同：2
> 
> 时间：2012-07-18T00:30:31.490
> 
> 标签：ios, json, image-processing, feed

我正在为 ios 开发一个新闻提要应用程序，并且我正在使用[Feedzilla 新闻 API](http://code.google.com/p/feedzilla-api/wiki/RestApi)。我已经正确实现了新闻提要 api，但 Feedzilla 只返回新闻摘要和其他元数据，而不是新闻文章的任何图像。所以现在我必须想出一种不同的方法来让新闻文章图像显示在我的应用程序中。有谁知道：

1.  一种不同的新闻源服务，它将提供新闻文章图像
2.  一种使用 feedzilla 或
3.  一种从网页中获取图像缩略图的方法

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T16:12:51.767

解析提要后，您是否将文章/新闻的网址作为元数据？

`If yes.`

现在使用这个 URL，你可以读取新闻页面的全部内容，并且使用任何 DOM 解析器，你也可以读取图像 url。

# forms-authentication - MVC 4 Authorize attribute not recognizing forms auth from ASP.Net 3.5

> ID：11532743
> 
> 赞同：3
> 
> 时间：2012-07-18T00:31:12.513
> 
> 标签：forms-authentication, asp.net-mvc-4, asp.net-3.5, authorize-attribute

I am creating a new MVC 4 app for a client that I had previously created ASP.Net 3.5 (VS 2008) apps for. I created a gateway app to launch **several other ASP.Net 3.5 web apps**, with the gateway app handling the login and the forms authentication ticket.

As long as all of the other web apps have the same settings for the forms authentication and machine key sections all other apps were able to use the forms auth objects to see if the user was authenticated.

I am now creating a new MVC 4 app using the same forms authentication settings in VS 2010 on an XP development box using IIS 5.x. (I have to do this) The problem is that the gateway app launches the MVC app fine with no login; however, if I add the Authorize attribute to initial controller the MVC app goes to the login and then the launch page as expected, however the link to the MVC app goes right back to the gateway login page.

Here are the web config sections

```
<authentication mode="Forms">   <forms
        slidingExpiration="true"
        timeout="3"
        loginUrl="http://localhost/MYGateway/Login.aspx"
        path="/"
        name=".PGSA"
        protection="All"
        defaultUrl="http://localhost/MYGateway/home.aspx"
        >   
  </forms> 
```

```
<machineKey   validationKey="C5123C89CB21F4F1422FF158A5B42D0E8DB8CB5CDA1742572A487D9401E3400267682B202B746511891C1BAF47F8D25C07F6C39A104696DB51F17C529AD3CABE" decryptionKey="8A9BE8FD67AF6979E7D29998CFEA50DD3D3799C77AF2B72F"   validation="SHA1"   decryption="3DES"    /> 
```

Any help would be appreciated Thanks, Paul

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:13:35.683

I was finally able to get this solved, thanks to this question's second answer by James H [Upgrading to ASP.NET 4.5/MVC 4 forms authentication fails](https://stackoverflow.com/questions/12021863/upgrading-to-asp-net-4-5-mvc-4-forms-authentication-fails)

The trick is this

```
<system.web>
 <machineKey compatibilityMode="Framework20SP2" /> 
</system.web> 
```

# ruby-on-rails - attr_accessible <-> :as => :admin <-> db:seed <->

> ID：11532745
> 
> 赞同：0
> 
> 时间：2012-07-18T00:31:18.787
> 
> 标签：ruby-on-rails, security

我有点处于catch22的情况。

1.  如果必须保护用户的“角色”属性免受批量分配问题的影响，我必须使用 attr_accessible 并排除它。
2.  但是，如果我必须允许管理员设置它，那么我必须使用 assign_attributes 添加 :as => :admin。
3.  但是如果我必须设置一些默认角色，那么 db:seed 将不起作用。

有没有办法满足这三个需求？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:51:12.670

批量分配有几种方法，但我并不是它们的粉丝。

例如：

```
role = Role.new
role.assign_attributes({...}, :without_protection => true)
role.save 
```

我更喜欢使用我编写的名为[sudo_attributes](https://github.com/beerlington/sudo_attributes)的 gem ，它为您提供“sudo”权限：

```
Role.sudo_create(...) 
```

该 API 与 ActiveRecord 的用于创建和实例化模型的 API 相同。

# mysql - 在 MySQL 中使用复合键更新多行

> ID：11532746
> 
> 赞同：1
> 
> 时间：2012-07-18T00:31:27.160
> 
> 标签：mysql, sql

我正在尝试更新表中的多行，但由于服务器资源有限，我无法在单个 UPDATE 语句中执行此操作。我知道这可以通过使用 CASE 在单个语句中完成，但我无法让它工作，因为需要使用复合键（三列）而不是单个值来更新表。

这个例子有效：

```
UPDATE myTable
    SET newValue = CASE id
        WHEN 1 THEN 'val1'
        WHEN 2 THEN 'val2'
        WHEN 3 THEN 'val3'
    END,
WHERE id IN (1,2,3) 
```

但我需要这样的东西才能工作：

```
UPDATE myTable
    SET newValue = CASE (id,x,y)
        WHEN (1,1,1) THEN 'val1'
        WHEN (1,1,2) THEN 'val2'
        WHEN (1,1,3) THEN 'val3'
    END,
WHERE id IN (1,2,3) 
```

有没有办法在单个 UPDATE 语句中有这样的东西，还是我必须解决有限的服务器资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:41:21.227

从您的示例中略微重构：

```
UPDATE myTable
  SET newValue = CASE
    WHEN id=1 AND x=1 AND y=1 THEN 'val1'
    WHEN id=1 AND x=1 AND y=2 THEN 'val2'
    WHEN id=1 AND x=1 AND y=3 THEN 'val3'
    END
WHERE id IN (1,2,3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T11:47:10.060

你可以使用 MySQL 的["REPLACE"](http://dev.mysql.com/doc/refman/5.5/en/replace.html)：

```
REPLACE INTO myTable (id,x,y,newValue)
  VALUES (1,1,1,'val1'),
         (1,1,2,'val2'),
         (1,1,3,'val3'); 
```

# python - Python suds error creating object

> ID：11532756
> 
> 赞同：1
> 
> 时间：2012-07-18T00:33:15.367
> 
> 标签：python, soap, suds

Trying to work with the echosign SOAP API.

The wsdl is here: [https://secure.echosign.com/services/EchoSignDocumentService14?wsdl](https://secure.echosign.com/services/EchoSignDocumentService14?wsdl)

When I try to create certain objects, it appears to not be able to find the type, even after listing it in `print client`

```
import suds

url = "https://secure.echosign.com/services/EchoSignDocumentService14?wsdl"

client = suds.client.Client(url)
print client

  Service ( EchoSignDocumentService14 ) tns="http://api.echosign"
     Prefixes (10)
        ns0 = "http://api.echosign"
        ns1 = "http://dto.api.echosign"
        ns2 = "http://dto10.api.echosign"
        ns3 = "http://dto11.api.echosign"
        ns4 = "http://dto12.api.echosign"
        ns5 = "http://dto13.api.echosign"
        ns15 = "http://dto14.api.echosign"
        ns16 = "http://dto7.api.echosign"
        ns17 = "http://dto8.api.echosign"
        ns18 = "http://dto9.api.echosign"
     Ports (1):
        (EchoSignDocumentService14HttpPort)
           Methods (45):
                 ...
           Types (146):
              ns1:CallbackInfo
              ns17:WidgetCreationInfo 
```

Trimmed for brevity, but showing the namespaces and the 2 types I'm concerned with right now.

Trying to run `WCI = client.factory.create("ns17:WidgetCreationInfo")` generates this error:

> > > client.factory.create("ns17:WidgetCreationInfo") Traceback (most recent call last): File "", line 1, in File "build/bdist.macosx-10.7-intel/egg/suds/client.py", line 244, in create suds.BuildError: An error occured while building a instance of (ns17:WidgetCreationInfo). As a result the object you requested could not be constructed. It is recommended that you construct the type manually using a Suds object. Please open a ticket with a description of this error. Reason: Type not found: '(CallbackInfo, [http://dto.api.echosign](http://dto.api.echosign), )'

So it doesn't appear to be able to find the CallbackInfo type. Maybe its because its missing the ns there?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T00:53:54.577

Again, figured it out 15 min after posting here.

suds has an option to cross-pollinate all the namespaces so they all import each others schemas. `autoblend` can be set in the constructor or using the `set_options` method.

```
suds.client.Client(url, autoblend=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:46:30.560

Take a look in the WSDL, it seems lots of definitions in http://*.api.echosign that suds cannot fetch.

Either update your /etc/hosts to make these not well-formed domains can be reached, or save the wsdl locally, modify it, then use Client('file://...', ...) to create your suds client.

# php - PHP- if else 语句不起作用？

> ID：11532758
> 
> 赞同：0
> 
> 时间：2012-07-18T00:33:20.530
> 
> 标签：php, mysql

```
$nav_next_id = $page_id + 1;

$sql = "SELECT page FROM plm WHERE id = '$nav_next_id'"; {
$result = mysql_query($sql);
while ($next_page = mysql_fetch_array($result))
{
    if($page_id + 1 > 24) 
    {
    $goto_next_page = 'some_page.php';
    } 
    else
    {
    $goto_next_page = $next_page['page_title'];     
    }
}
} 
```

基本上是一个简单网站上非常直接的下一页按钮。使用 MYSQL 表中的 ID，我可以从当前页面确定下一页。

一切都很好，直到我来到最后一页。这是第 24 页。

所以我把一个`if`循环说如果页面> 24转到some_page.php。

我`$goto_next_page`在我的 html 中回显。

但是，第 24 页没有任何回应，所有其他页面都可以正常工作。这个脚本有什么问题？

---------更新----这就是我的工作方式---------------- --

```
if($cur_page_id == 24) 
{
$goto_next_page = 'some_page.php';  
} 
else
{
$sql = "SELECT page FROM plm WHERE id = '$nav_next_id'"; {
$result = mysql_query($sql);
while ($next_page = mysql_fetch_array($result))
    {
        $goto_next_page = $next_page['page_title'];
    }
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:40:00.307

答案很简单：$page_id 的值在你的循环中没有改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:48:23.777

也许您打算使用[预增量运算符](http://www.php.net/manual/en/language.operators.increment.php)：

```
if(++$page_id > 24) 
```

实际上，这意味着：

```
$page_id = $page_id + 1;

if($page_id > 24) { 
```

该运算符及其兄弟运算符（后自增运算符）都将 1 加到变量中。但是，预增量运算符加一，然后返回新值。另一方面，后增量运算符返回变量的值，然后将其递增 1。

您的代码不起作用的原因是它`$page_id + 1 > 24`不会增加`$page_id`，因此它始终保持不变。这是有道理的，因为如果你这样做了：

```
$a = $page_id + 1; 
```

你不会期望`$page_id`被增加。你会期望`$a`比 1 多`$page_id`，但你会期望`$page_id`是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:43:11.220

```
<?php 
$nav_next_id = $page_id + 1;

$sql = "SELECT page FROM plm WHERE id = '$nav_next_id'"; 
$result = mysql_query($sql);
while ($next_page = mysql_fetch_array($result))
{
    if($page_id + 1 > 24) 
    {
    $goto_next_page = 'some_page.php';
    } 
    else
    {
    $goto_next_page = $next_page['page_title'];     
    }
}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-12T22:28:46.647

老兄，你没有在循环中使用页面的 ID，这就是为什么你总是得到相同的结果，使它看起来像 if else 不起作用：

```
<?php 
     $nav_next_id = $page_id + 1; 
     $sql = "SELECT page FROM plm WHERE id = '$nav_next_id'"; 
     $result = mysql_query($sql);
     while ($pages = mysql_fetch_array($result)){
         if ($pages['id'] > 24) {
             $goto_next_page = 'some_page.php';
         }  
         else {
             $goto_next_page = $pages['page_title'];     
         }
     }
?> 
```

# android - 离线使用 jQuery 手机

> ID：11532760
> 
> 赞同：5
> 
> 时间：2012-07-18T00:33:54.570
> 
> 标签：android, jquery, html, jquery-mobile, javascript-framework

我正在 Android 移动系统上开发，使用 PhoneGap 和 jQuery 移动。我需要我的应用程序在没有互联网连接的情况下工作。[我从HERE](https://stackoverflow.com/questions/9892136/jquery-mobile-test-offline)和[THERE](http://www.raymondcamden.com/index.cfm/2011/3/12/Building-an-offline-capable-mobile-web-site-with-jQuery-Mobile)阅读了两篇文章，试图将有关 jQuery Mobile 的所有必需文件导入到我的 Phonegap 应用程序中。但是没有互联网它仍然无法正常工作。

这是文件结构和清单缓存，我还包括 JavaScript 和 CSS 文件：

![在此处输入图像描述](../Images/785e0d061733beff46d2108afb49e331.png) ![在此处输入图像描述](../Images/5a7f062c3a6c94b8adfe79325dbb8ca3.png) ![在此处输入图像描述](../Images/6776098fcb83bac98328d143a9519c92.png) ![在此处输入图像描述](../Images/ee9a9bef876aa11cf7f1de8a90044993.png)

我错过了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:11:02.943

您是否使用正确的`MIME`类型提供清单文件？清单需要与`text/cache-manifest` `MIME`类型一起发送。

此外，虽然我不能确定您的应用程序为什么不工作，但要记住的一件事是，在`phonegap`应用程序中，初始页面是从文件系统提供的，所以如果您将所有页面捆绑在`phonegap`应用程序中，您不应该使清单文件使其脱机。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T21:01:25.473

我准备了一个 jQuery Mobile 离线示例。[请在此处找到如何操作的详细信息。](https://stackoverflow.com/questions/9892136/jquery-mobile-test-offline/13222844#13222844)

![在此处输入图像描述](../Images/8ed7b566fdb25ceb3ae07da5a1b05b98.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T04:01:14.460

您还需要指定网络和回退（可选），如下所示：

# 开头的行是注释

```
# (*) online whitelist wildcard flag
NETWORK:
*

#This is optional
#FALLBACK:
#/ /offline.php 
```

# ruby-on-rails - Rails3 太阳黑子 has_many 关联

> ID：11532772
> 
> 赞同：0
> 
> 时间：2012-07-18T00:35:35.553
> 
> 标签：ruby-on-rails, sunspot, sunspot-rails

我在搜索太阳黑子宝石时遇到了麻烦。我想在对象租户中搜索用户电子邮件。

租户有很多用户

在租户中，我这样做了：

```
searchable do
  text :name, :notifications_email

  text :users do  
    users.map(&:email)  
  end
end 
```

搜索`name`and`notifications_email`工作正常，但是当我搜索用户的电子邮件时没有找到结果。

我在控制台中这样做了：

```
s = Tenant.solr_search do fulltext "info" end 
```

我得到这个对象：

```
<Sunspot::Search:{:fq=>["type:Tenant"], :q=>"info", :fl=>"* score", :qf=>"name_text   notifications_email_text users_text", :defType=>"dismax", :start=>0, :rows=>30}> 
```

让我感到困惑的是，`users_text`它不是必须是`users_email_text`这样的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:05:49.253

为了更清楚，您应该定义您的可搜索块，如：

```
searchable do
  text :name
  text :notifications_email
  text :users_email do  
    users.map(&:email)
  end  
end 
```

在索引期间，Sunspot 将属性的类型附加到属性名称的末尾。在 的情况下`:users_email`，它变成了`qf=>users_email_text`。似乎您的困惑在于命名约定。我可以将 email 属性定义为我想要的任何东西，只要我定义了它包含在`do`块中的内容。像这样定义它：

```
searchable do
  text :name
  text :notifications_email
  text :emails do  
    users.map(&:email)
  end  
end 
```

会给我相同的功能，只是 Sunspot 会将变量名称转换为`qf=>emails_text`索引时间。

# android - Android BroadcastReceiver 是否需要有 Intent-Filter 标签？

> ID：11532773
> 
> 赞同：2
> 
> 时间：2012-07-18T00:35:37.940
> 
> 标签：android, broadcastreceiver, intentfilter

我已经能够让我的 BroadcastReceiver 运行这个：

```
<receiver
        android:name=".AlarmReceiver"
        android:enabled="true"
        android:exported="false">
</receiver> 
```

如您所见，没有`<intent-filter>`。使用正确的`Intent`附加功能可以正确调用它。但我一直在环顾四周，我很困惑我是否需要一个？我确实有一个`setAction()`在我的 s 上调用的方法，`Intent`但要使它们与其他方法不同，以确保通知的特定问题，而不是实际使用该操作的字符串。但究竟是什么相关性？提前致谢。

```
Intent intent = new Intent(this.getContext(), AlarmReceiver.class);
        intent.setAction("com.something"+System.currentTimeMillis());
        //... extras are here
        PendingIntent pi = PendingIntent.getBroadcast(this.getContext(), 123, intent, PendingIntent.FLAG_CANCEL_CURRENT|Intent.FILL_IN_DATA);
AlarmManager alarm = (AlarmManager)getContext().getSystemService(Activity.ALARM_SERVICE);
        alarm.set(AlarmManager.RTC_WAKEUP, time.getTimeInMillis(), pi); 
```

将它与我在清单文件中的内容一起使用是可行的。

**编辑** 我在 Android Developers 博客上找到了这个，它说明了这一点：

* * *

**隐式意图**仅指定它们应该匹配的“什么”，使用操作、类别、数据、MIME 类型等。他们将找到的确切组件仅在运行时确定，由包管理器将其与当前应用程序进行匹配。

**显式意图**通过 ComponentName 指定他们应该匹配的单个显式“谁”。无论 Intent 中的其他内容如何，​​它只与在其 ComponentName 中给出的确切清单包名称和类名称相关联。

* * *

我仍然对这个解释有些困惑，但这似乎是我应该做的最接近的事情。所以我确信我使用的是隐含的意图。问题是，我可以离开`<intent-filter>`吗？我将它与特定的课程相匹配。可能没有一个实际的动作将它们绑在一起，珀斯，但是这个类就足够了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:00:43.043

`<intent-filter>`当您想使用隐式意图启动接收器时需要它，如果您始终使用显式意图来启动广播接收器，则不需要意图过滤器。

看到[这个 SO Post](https://stackoverflow.com/questions/9060137/android-broadcastreceiver-with-no-intent-filter)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T00:51:47.237

广播接收器的整个工作方式是它涉及使用意图过滤器来捕获在系统内发送的特定广播意图。因此，如果您没有给接收者任何意图过滤器，那么 NOTHING 将被发送给它，并且它的代码将永远不会执行。

请阅读 Intent 的文档并了解 Intent 如何允许 IPC。

**更新**

还有可能在没有任何声明的情况下，它可能会接收所有公共广播以及您的代码处理它的方式。它是否会忽略所有广播，除了它关心的广播。我从来没有做过这种实现，因为我遵循标准。即声明为动态侦听器（程序化）或静态侦听器（XML 声明），其中动态侦听器将在代码中设置其意图过滤器。

# php - 如何使用 MySQL 和整个 LAMP 每天处理 5M 事务？

> ID：11532776
> 
> 赞同：0
> 
> 时间：2012-07-18T00:36:33.163
> 
> 标签：php, mysql

好吧，也许 5M 并没有那么多，但它需要接收基于以下架构的 XML [http://www.sat.gob.mx/sitio_internet/cfd/3/cfdv3.xsd](http://www.sat.gob.mx/sitio_internet/cfd/3/cfdv3.xsd) 因此我需要保存几乎所有的每行的信息。现在法律要求我们将信息保存很长时间，最终这个数据库将非常非常大。

也许每天创建一张桌子？类似_invoices_16_07_2012。

好吧，我迷路了..我不知道该怎么做，但我知道这是可能的。

最重要的是，我需要基于每个 XML 创建一个 PDF 和另外 2 个文件，并将它们保持在 HD 上。您应该能够使用网站快速检索您的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:46:26.227

将大量数据放入一行中的一个字段（不确定您是否正在考虑这样做）。

编写一个脚本来解析 xml 对象并将 xml 中的每个值保存在单独的字段中或以对您有意义的方式保存（因此您必须创建一个包含所有适当字段的表）。您应该能够将数据作为每个 xml 工作表的一行输入。

您还需要对数据库进行分片并将其分布在许多表上的服务器集群中。MySQL 确实支持这一点，但我之前只增强了我自己的分片机制。

不要为每个 XML 工作表创建一个表，因为这太过分了。

现在，你为什么需要 mysql 呢？您是在查询 XML 中的数据吗？如果您只是出于存档目的而存储这些数据，则不需要 mysql，而是可以将文件压缩成 tarball 并将它们直接存储在磁盘上。您的网站可以通过这种方式轻松获取文件。

如果您确实需要一个可以处理 5M 事务的大数据存储，并且数据量与您所说的一样多，那么您可能还需要研究 Hadoop 之类的东西并将数据存储在分布式文件系统中。如果您想更轻松地查询数据，请查看可以在 Hadoop 之上运行的 HBase。

希望这可以帮助。

# image - 物体检测 - 在航拍照片中寻找动物特征

> ID：11532778
> 
> 赞同：0
> 
> 时间：2012-07-18T00:36:55.380
> 
> 标签：image, artificial-intelligence, object-recognition

我有一个小型开发团队，他们的任务是在农田和/或河流环境的一系列航拍照片（来自小型无人机）中识别农场动物。

我知道这是一个开放式问题，但是任何人都可以建议从哪里开始寻找技术/包或尝试此类项目的任何其他建议吗？为此目的的图像检测和/或机器学习..

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:47:08.327

这实际上是一个两部分的问题：

1.  从背景中分离“对象”
2.  将“物体”识别为动物

如果你把这个问题分成两个问题，你可以开始构建问题 1 并在途中找出第二个问题。

问题一是典型的检测问题。显然，这取决于您拥有的图像、这些图像的分辨率以及对象相对于整个图像的大小。但这当然应该是可行的。这是一个相当基本的计算机视觉问题，当然取决于您的具体情况。搜索与其环境显着不同的像素块。然后将这些块分开，将它们用作第二个问题的输入。

第二个实际上也确实取决于问题一的依赖性，但是这些因素在解决第二个问题时影响更大。将真实的动物与站在同一片草地上的水容器正确分开可能是不可能的。但我会尝试以机器学习的方式解决这个问题，可能是使用神经网络。但是你必须先解决 1，并且有足够大的结果集来训练。首先自己将动物与非动物分开，然后训练网络。

不是一个完整的答案，但正如你所说，这是一个开放式问题。这个时候有太多的未知数。

# php - 跨多个 CSV 文件报告

> ID：11532780
> 
> 赞同：0
> 
> 时间：2012-07-18T00:37:01.240
> 
> 标签：php, csv, reporting, data-processing

这可能是一个模糊的问题。我每天都会收到 4 个 CSV 文件，每个文件大约有 500k 行。我需要对它们执行“加入”和“在哪里”等价的 RDMS 操作来创建每日报告。例如，工作流程可能是：

1.  根据具有 ID 的列连接 2 个 CSV 文件
2.  根据日期列向下过滤数据集
3.  根据某些 where 条件将新过滤的数据集与另一个 CSV 文件连接起来
4.  根据更多标准进一步过滤它们
5.  .... // 重复
6.  将最终数据集输出到 CSV 文件中

我正在考虑编写一个 PHP 脚本来：

1.  将每个 CSV 文件加载到 MySQL 等关系数据库中
2.  使用 SQL 执行连接和 where 条件
3.  将结果加载到临时表中
4.  重复 2 和 3
5.  将最终数据加载到表中
6.  将表导出为 CSV 文件。

你认为最好的方法是什么？

# expression-trees - C# 表达式树：使用 TypeAs

> ID：11532786
> 
> 赞同：0
> 
> 时间：2012-07-18T00:38:35.083
> 
> 标签：expression-trees

我第一次尝试在 c# 中编写表达式树并不太顺利:)。这是我要复制的 c# 代码

```
public static object Test<S, D>(S source, Func<D, object> selector )
    where S : class
    where D : class
{
    D derived = source as D;

    object retVal = null;

    if( derived != null ) retVal = selector(derived);

    return retVal;
} 
```

从概念上讲，如果提供的对象属于派生类，这旨在获取一个对象并将选择器应用于它以返回派生类的属性。

这是我到目前为止所得到的：

```
public static object OrderByDerivedProperty<S>( S source, Type derivedType, string fieldName )
{
    ParameterExpression parameter = Expression.Parameter(typeof(S), "source");
    UnaryExpression typeAs = Expression.TypeAs(parameter, derivedType);

    ConstantExpression nullConst = Expression.Constant(null);
    BinaryExpression isNotNull = Expression.NotEqual(typeAs, nullConst);

    ParameterExpression varDest = Expression.Variable(derivedType, "varDest");
    ParameterExpression retVal = Expression.Variable(typeof(object), "retVal");

    BlockExpression block = Expression.Block(
        new[] { varDest, retVal },
        Expression.Assign(varDest, typeAs),
        Expression.Condition(
            isNotNull, 
            Expression.Assign(retVal, Expression.Property(varDest, fieldName)), 
            Expression.Assign(retVal, nullConst)
            ),
        retVal
    );

    LambdaExpression lambda = Expression.Lambda(block, new[] { parameter });

    return lambda.Compile().DynamicInvoke(source);
} 
```

我在这里使用了一组稍微不同的参数来简化我的表达方式。

实际上，当 derivedType 是从 S 派生的 Type 时，代码才有效。但是，如果不是——当我期望代码返回 retVal = null 时——它会在以下行爆炸：

```
Expression.Assign(retVal, Expression.Property(varDest, fieldName)), 
```

抱怨 fieldName 不是 varDest 的属性。在那种情况下这是正确的......但如果测试表达式为假，我期望条件表达式的“如果为真”臂不会被评估。显然不是这样。

我对表达式树的不了解会填满（超过）一本书。但是，如果有人能指出我要在哪里出轨，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T16:54:18.753

不确定你是否得到了这个答案，但这就是你需要的

```
 public static object OrderByDerivedProperty<TSource>(TSource source, Type derivedType, string propertyOrFieldName)
        {
            if (!derivedType.IsClass)
            {
                throw new Exception("Derived type must be a class.");
            }
            ParameterExpression sourceParameter = Expression.Parameter(typeof(object), "source");
            ParameterExpression typeAsVariable = Expression.Variable(derivedType);
            ParameterExpression returnVariable = Expression.Variable(typeof(object));
            BlockExpression block = Expression.Block(
                new[] { typeAsVariable,returnVariable },
                Expression.Assign(
                    typeAsVariable, 
                    Expression.TypeAs(
                        sourceParameter,
                        derivedType
                    )
                ),
                Expression.Condition(
                    Expression.NotEqual(
                        typeAsVariable,
                        Expression.Constant(
                            null, 
                            derivedType
                        )
                    ),
                    Expression.Assign(
                        returnVariable, 
                        Expression.Convert(
                            Expression.PropertyOrField(
                                typeAsVariable, 
                                propertyOrFieldName
                            ),
                            typeof(object)
                        )
                    ),
                    Expression.Assign(
                        returnVariable, 
                        Expression.Constant(
                            null,
                            typeof(object)
                        )
                    )
                ),
                returnVariable
            );
            var lambda = Expression.Lambda<Func<object,object>>(block, new[] { sourceParameter });
            return lambda.Compile().Invoke(source);
        } 
```

# html - 包含多个视频的 HTML5 视频库播放列表

> ID：11532787
> 
> 赞同：0
> 
> 时间：2012-07-18T00:38:36.710
> 
> 标签：html, video, gallery

我有一个客户想要一个视频库，该视频库在左侧有一个缩略图列表，在右侧有一个播放器区域。到目前为止，一切都很好。单击缩略图时，我有一些 html5、jQuery 和 CSS 在右窗格中播放单个视频。

我的问题是，我的客户想要本质上是两个播放列表。例如，进行过手术的个人画廊的左侧会以缩略图形式显示患者的照片，当单击缩略图时，将在右侧开始播放有关患者经历的视频。然后在该视频下会有其他链接，例如手术后 1 周、手术后 2 周等。有点像个人的日记。

要查看我的要求，您可以查看我在[http://www.smartlaserlift.com/video-diaries.html](http://www.smartlaserlift.com/video-diaries.html)上整理的一个正在运行的。这是一个使用一些 ajax 的完全 hackjob，并且确实没有像我想要的那样跨平台工作。

这是我目前正在处理的一些标记，仅用于显示缩略图并在左侧播放视频。我正在寻找关于处理第二个播放列表的建议，或者可能是关于废弃这个的想法，也许是一种更好的方法。

的HTML

```
<div class="video_gallery_container">
<div id="thumbs">
<a class="videoLink" videowidth="680" videoheight="383" videofile="Peggy_Web1" videothumb="peggy-vid-thumb" videocaption="Meet Peggy" videodescription="Meet Peggy as she begins her SmartLaser Lift Journey." ></a> 
```

```
</div>
    <div id="vidContainer">
        <div id="videoPlayer">

        </div>
    </div> 
```

JavaScript

```
$(document).ready(function() {
$('a.videoLink').each(function() {
    var thumbnailFilePath = 'video/' + $(this).attr('videothumb') + '.jpg';
    var videoCaption = $(this).attr('videocaption');
        $(this).css('background-image','url('+thumbnailFilePath+')');
          $(this).html('<div class="caption">' + videoCaption + '</div><img class="play" src="images/play_icon.png" />');
});
$('.videoLink').click(function(){
    var videoFile = $(this).attr('videofile');
    var videoPoster = $(this).attr('videofile');
    var videoCaption = $(this).attr('videocaption');
    var videoWidth = Number($(this).attr('videowidth'));
    var videoHeight = Number($(this).attr('videoheight'));
    var videoDescription = $(this).attr('videoDescription');

        var videoCode = '<video width="'+videoWidth+'" height="'+videoHeight+'" controls autoplay autobuffer><source src="video/'+videoFile+'.ogv" type="video/ogg" /><source src="video/'+videoFile+'.mp4" type="video/mp4" /><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+videoWidth+'" height="'+(videoHeight+40)+'" id="video_player" align="middle"><param name="allowScriptAccess" value="sameDomain"><param name="allowFullScreen" value="true"><param name="movie" value="video_player.swf?videoFile=video/'+videoFile+'.mp4&amp;skinFile=video_skin.swf&amp;videoFileWidth='+videoWidth+'&amp;videoFileHeight='+videoHeight+'"><param name="quality" value="high"><param name="wmode" value="transparent"><param name="scale" value="noscale"><param name="salign" value="lt"><embed src="video_player.swf?videoFile=video/'+videoFile+'.mp4&amp;skinFile=video_skin.swf&amp;videoFileWidth='+videoWidth+'&amp;videoFileHeight='+videoHeight+'" quality="high" width="'+videoWidth+'" height="'+(videoHeight+40)+'" name="video_player" align="middle" allowscriptaccess="sameDomain" type="application/x-shockwave-flash" scale="noscale" salign="lt" wmode="transparent" allowfullscreen="true" pluginspage="http://www.macromedia.com/go/getflashplayer"></embed></object></video>';
        var playerBlock = '<div id="playerBlock"><div id="playerHeader">' + videoCaption + '</div>' + '<div id="player">' + videoCode + '</div><div id="videoDescription">' + videoDescription +'</div></div>';
        $('#videoPlayer').html(playerBlock);
        $('#videoPlayer').css('display', 'block');

        });

});//end document.ready function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T20:22:48.160

我不确定您的链接是否可以正常工作，但我需要一个代码，让我可以在左侧简单地拥有 5 个缩略图，并在点击每个缩略图时播放不同的视频，类似于您使用的，我不是编码专家，我自己无法弄清楚。

# ruby - ruby 中的 curl 请求

> ID：11532792
> 
> 赞同：5
> 
> 时间：2012-07-18T00:39:30.253
> 
> 标签：ruby, http

我将如何在 ruby​​ 中发出以下 curl 请求？

```
curl -k -X GET -H "Content-Type: application/xml" -H "Accept: application/xml" -H "X-OFFERSDB-API-KEY: demo" 'http://testapi.offersdb.com/distribution/beta/offers?radius=10&postal_code=30305' 
```

我对一些标题有困难。

```
require 'net/http'

url = 'http://testapi.offersdb.com/distribution/beta/offers?radius=10&postal_code=30305'
mykey = 'demo'

request = Net::HTTP.new(url)
request.request_head('/', 'X-OFFERSDB-API-KEY' => mykey)

puts request 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T01:11:02.110

我认为您需要创建一个请求对象，而不是 HTTP 对象。然后在上面设置标题。

```
require 'net/http'

url = 'http://testapi.offersdb.com/distribution/beta/offers?radius=10&postal_code=30305'
mykey = 'demo'
uri = URI(url)

request = Net::HTTP::Get.new(uri.path)
request['Content-Type'] = 'application/xml'
request['Accept'] = 'application/xml'
request['X-OFFERSDB-API-KEY'] = mykey

response = Net::HTTP.new(uri.host,uri.port) do |http|
  http.request(request)
end

puts response 
```

来源：[http ://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPHeader.html](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTPHeader.html)

# entity-framework - 实体框架包含无法编译

> ID：11532805
> 
> 赞同：2
> 
> 时间：2012-07-18T00:41:21.090
> 
> 标签：entity-framework, asp.net-web-api

我通过`DbContext`生成器生成了我的实体，并将其添加到使用我的实体上下文模型的 API 控制器中。以下方法无法编译：

```
public IEnumerable<casino> Getcasinos()
    {
        var casinos = db.casinos.Include(c => c.city).Include(c => c.state);
        return casinos.AsEnumerable();
    } 
```

编译器说：

```
Cannot Convert Lambda Expression to Type 'String' Because It Is Not A Delegate Type 
```

有什么想法为什么这么说？我已经`System.Linq`导入了命名空间。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T00:45:13.267

这实际上是由于该`ObjectQuery(T).Include`方法而发生的。这具有函数签名：

```
public ObjectQuery<T> Include(string path); 
```

您看到这种情况的原因可能是因为无论您在哪里调用它都没有可用的`System.Data.Entity`命名空间。从`DbExtensions`元数据中，您可以看到`Include`using 表达式需要`System.Data.Entity`命名空间：

```
namespace System.Data.Entity
{
    [SuppressMessage("Microsoft.Naming", "CA1709:IdentifiersShouldBeCasedCorrectly", Justification = "Casing is intentional")]
    public static class DbExtensions
    {
        public static IQueryable<T> Include<T, TProperty>(this IQueryable<T> source, Expression<Func<T, TProperty>> path) where T : class;
        public static IQueryable<T> Include<T>(this IQueryable<T> source, string path) where T : class;
        public static IQueryable Include(this IQueryable source, string path);
    }
} 
```

如果包含`System.Data.Entity`命名空间，错误将得到解决。

# iphone - viewDidAppear 没有被调用

> ID：11532808
> 
> 赞同：10
> 
> 时间：2012-07-18T00:42:23.780
> 
> 标签：iphone, objective-c, ios, ipad

在我的主 UIViewController 中，我添加了一个主屏幕视图控制器作为子视图：

```
 UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:vc];
        controller.navigationBarHidden = YES;
        controller.view.frame = CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);
        [self addChildViewController:controller];
        [self.view insertSubview:controller.view atIndex:0];
        [controller didMoveToParentViewController:self]; 
```

问题是 viewDidAppear 和 viewWillAppear 只被调用一次，就像 viewDidLoad 一样。为什么是这样？我该如何进行这项工作？

基本上在vc里面我没有得到viewDidAppear也没有viewWillAppear。

我也只是尝试在没有导航控制器的情况下添加 UIViewController，但它仍然无法正常工作：

```
vc.view.frame = CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height);
        [self addChildViewController:vc];
        [self.view insertSubview:vc.view atIndex:0];
        [vc didMoveToParentViewController:self]; 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2016-09-08T14:14:13.940

就我而言，没有调用 viewDidAppear，因为我在 viewWillAppear 方法中犯了不必要的错误。

```
-(void)viewWillAppear:(BOOL)animated {
    [super viewdidAppear:animated]; // this prevented my viewDidAppear method to be called
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-18T04:02:30.367

我可以重现子控制器不接收外观方法的问题的唯一方法是容器视图控制器是否执行以下操作（我确定您没有这样做）：

```
- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers
{
    return NO;
} 
```

也许您可以尝试显式启用此功能：

```
- (BOOL)automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers
{
    return YES;
} 
```

但是我的子视图控制器肯定会`viewWillAppear`接到电话（如果我明确地`automaticallyForwardAppearanceAndRotationMethodsToChildViewControllers`或者我完全忽略了这个。

**更新：**

好的，看看你原来的问题下的评论，问题似乎是有问题的子控制器（B）本身就是一个容器视图控制器（这是完全可以接受的）呈现另一个子控制器（C）。这个控制器 B 自己的子控制器 C 正在被移除，你想知道为什么你没有得到*容器*`viewWillAppear`控制器`viewDidAppear`B应该移除孩子，而不是孩子自己移除，当容器移除孩子时，它不会收到外观方法）。

 *如果我误解了情况，请告诉我。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-10-04T15:37:17.610

@Rob 在 Swift 4 中的回答（这对我添加 a`childViewController`到 a 的情况有所帮助`UITabBarController`）

```
override var shouldAutomaticallyForwardAppearanceMethods: Bool {
    return true
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-07T22:14:16.697

Another case where this will not be called at launch time (yet may be called on when you return to the view) will be is if you have subclassed `UINavigationController` and your subclass overrides

`-(void)viewDidAppear:(BOOL)animated`

but fails to call `[super viewDidAppear:animated];`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-02-16T16:38:30.893

有同样的问题我的容器视图`retain`控制器通过 a 做了一个子视图控制器`property`，**但**没有将子视图控制器添加到它的`childViewControllers` `array`.

我的解决方案是在容器视图控制器中添加这行代码

```
[self addChildViewController: childViewController]; 
```

之后`UIKit`开始按预期将外观方法转发给我的子视图控制器

我还将属性属性从更改`strong`为`weak`只是为了美观

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-04T17:57:19.537

将我的代码更新到 13.0 时，我丢失了 viewDidAppear 调用。

在 Objective-c 中，我的解决方案是将以下覆盖全部添加到父主视图控制器。

这允许再次调用 ViewDidAppear 调用......就像在以前的 IOS（12 和更早版本）中所做的那样。

@implementation MasterViewController

//....一些方法

*   (BOOL) shouldAutomaticallyForwardAppearanceMethods { 返回 YES; }

// ...一些方法

## @结尾

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-04-08T00:57:46.287

我的问题是我正在更改 UITabBarController (selectedIndex = x) 中的选项卡，然后弄乱了该选项卡中的子视图控制器。问题是它需要以相反的方式完成：首先在其他选项卡中弄乱子视图控制器，然后通过设置 selectedIndex 来更改选项卡。在此更改方法 viewWillAppear/viewDidAppear 开始被正确调用之后。

* * *

## 回答 #8

> 赞同：-10
> 
> 时间：2012-07-18T00:53:43.507

使用 presentModalViewController 或 segues 或 pushViewController 呈现视图控制器应该可以修复它。

或者，如果由于某种原因您想在没有内置方法的情况下显示视图，则应该在您自己的代码中手动调用这些方法。像这样的东西：

```
[self addChildViewController:controller];
BOOL animated = NO;
[controller viewWillAppear:animated];
[self.view insertSubview:controller.view atIndex:0];
[controller viewDidAppear:animated];
[controller didMoveToParentViewController:self]; 
```*

# java - 如何在不使用 .getSelectionPath() 选择的情况下从 JTree 中删除元素？

> ID：11532811
> 
> 赞同：0
> 
> 时间：2012-07-18T00:42:47.587
> 
> 标签：java, user-interface, jtree, jdom

我正在尝试为我的撤消功能删除一个元素，但我只想删除添加到 JTree 的最后一个东西。

对于删除，我只是在修改我的 Cut 方法：

```
private void performUndoAction() {        

        if (tree != null) {

            TreePath path = tree.getSelectionPath();
            if (path != null) {

                DefaultMutableTreeNode node = (DefaultMutableTreeNode) path.getLastPathComponent();
                if (node != tree.getModel().getRoot()) {

                    DefaultMutableTreeNode parent = (DefaultMutableTreeNode) node.getParent();
                    if (node.getUserObject() instanceof Attribute) {

                        Attribute at = (Attribute) node.getUserObject();
                        at.getParent().removeAttribute(at);
                        cut = at;
                    }
                    else if (node.getUserObject() instanceof Element) {

                        Element el = (Element) node.getUserObject();
                        el.getParent().removeContent(el);
                        cut = el;
                    } else if (node.getUserObject() instanceof Text) {

                        cut = ((Text) node.getUserObject()).getText();
                        Element el = (Element) parent.getUserObject();
                        el.setText("");
                    }
                    parent.remove(node);
                    tree.updateUI();
                }
            }
        } 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T04:11:46.917

一种快速而肮脏的方法是制作第二棵树并在从主树中删除一个之前将所有节点添加到其中，撤消只需用之前的副本替换主树即可。不是最漂亮的解决方案，但它可能会让你超越这一点。

我实际上已经使用 arraylist 完成了此操作，并且只是从 arraylist 内容构建树。

# ajax - 如何让按钮触发 ATK4 中的数据库更新？

> ID：11532815
> 
> 赞同：0
> 
> 时间：2012-07-18T00:42:59.687
> 
> 标签：ajax, atk4

我正在使用 ATK4 4.1.1 并向页面添加了一个按钮。我希望此按钮在按下时触发对数据库表的更新，因此在页面中创建了这样的代码。

```
 $f=$p->add('Form',null,null,array('form_empty'))->setFormClass('horizontal bottom-padded');

    $b1=$f->add('Button')->set('Finished');
    $b1->js("click")->univ()->ajaxec($this->api->url(null, array("s"=>"D")));

    $b1->js('click', $b1->js()->load(
      $this->api->url(null,array('s'=>'D'))
    ) );

    ..  ..   ..  ..  

   if (isset($_GET['s'])) {            
      $ss=$this->add('Model_SprintStatus')
               ->loadBy(array('member_id'=>$p->api->auth->get('id')));
       $new_status=$_GET['s'];
       $ss->set('status',$new_status);
       $ss->update();
    } 
```

当我访问此页面时，它显示正常，但是当单击按钮时，我收到一条错误消息

```
BaseException

 Method is not defined for this object

 Additional information:

 method: url
 arguments: Array ( [0] => [1] => Array ( [s] => D ) 
```

我使用了以下[agiletoolkit.org](http://agiletoolkit.org/codepad/interaction/reloading#)部分中的一个示例，称为重新加载解剖。当我收到此错误时，我采用了示例并使用与示例相同的代码创建了一个新页面，并且我也从该页面收到了类似的错误。

```
 BaseException

  Method is not defined for this object

  Additional information:

  method: url
  arguments: Array ( [0] => [1] => Array ( [side] => 1 [myajax] => 1 ) ) 
```

除了尝试上面的 ajaxec 行之外，我还尝试了以下

```
 $b1->js('click', $b1->js()->load( $this->api->url(null,array('s'=>'D')))); 
```

和

```
 $b1->js('click', $b1->js()->atk4_load( $this->api->url(null,array('s'=>'D')))); 
```

但他们也回来了同样的错误。

也许我错过了一些东西，或者它可能是 ATK4 4.1.1 和 4.2 之间的变化，但我目前无法升级，因为试图赶上最后期限，所以我必须通过什么方法从在 ATK 4.1.1 中单击按钮

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T11:31:52.560

有一个更简单的方法：

```
if($this->add('Button')->setLabel('Clickme')->isClicked()){

      // ....

      $this->js()->univ()->successMessage('Updated')
           ->page($this->api->getDestinationURL())->execute();

} 
```

这仅在[http://agiletoolkit.org/whatsnew/may2011中简要记录](http://agiletoolkit.org/whatsnew/may2011)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T17:40:15.267

答案是……

```
 // create a form to put the button in with minimal styling
    $f=$p->add('Form',null,null,array('form_empty'))->setFormClass('horizontal bottom-padded');

    // Add the button with a confirm request and do an ajax call
    // passing a new GET parameter called state
    $f->add('Button')->set('Update')
        ->js('click')->univ()->confirm('Confirm ?')
        ->ajaxec($this->api->getDestinationURL(null,array('state'=>'D')));

    // If the parameter is set, this is executed by the ajax callback
    if (isset($_GET['state'])) {             
         //add the model (change name to yours)
         // You can either use load($id) if you already have the primary key
         // or an array of fields and use loadBy to get the records to be updated 
         $ss=$this->add('Model_SprintStatus')->loadBy(array(
                'member_id'=>$p->api->auth->get('id')
                )
              );

          // set some variables to hold the old status from the model 
          // and the new one which was in the GET parameter we passed
          $old_status=$ss->get('status');
          $new_status=$_GET['state'];

          // Set the status column to the new value and execute the update
          $ss->set('status',$new_status);
          $ss->update();

          // and provide some feedback to the user that it worked !
          $this->js()->univ()->successMessage('Updated')
               ->page($this->api->getDestinationURL())->execute();
    } 
```

如果您不希望向用户提供任何反馈，您可以省略按钮定义上的 ->confirm() 以及包含 successMessage 的整行，大概您还可以通过更改 if (isset( $_GET...

# spotify - 带有 cocoalibspotify 的背景音频

> ID：11532819
> 
> 赞同：8
> 
> 时间：2012-07-18T00:43:22.897
> 
> 标签：spotify, cocoalibspotify-2.0

我已经为我的应用程序正确启用了背景音频（在 plist 中）。在当前播放完成后在后台使用 SPPlaybackManager 播放下一首曲目（当手机被锁定/关闭时）不起作用。

当当前曲目结束并且音频停止时，该应用程序将不会开始播放下一首曲目，直到手机解锁并且我的应用程序再次变为活动状态。

我该如何解决？这是我用来开始播放下一首曲目的代码片段。我观察到当前曲目变为 nil，然后开始播放下一首曲目。日志显示下一个当前曲目正在播放管理器对象中设置，但它是无声的。

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {

    if([keyPath isEqualToString:@"spotifyPlaybackManager.currentTrack"]){

        NSLog(@"%@ %@",keyPath,self.spotifyPlaybackManager.currentTrack);

        if(self.spotifyPlaybackManager.currentTrack==nil && self.mode == PlayerModeSpotify){

            NSLog(@"PLAY NEXT");
            [self.spotifyPlaybackManager playTrack:self.nextSPTrack callback:^(NSError *error){
                if(error) TKLog(@"Spotify Playback Error %@",error);
            }];
        }
        [[NSNotificationCenter defaultCenter] postNotificationName:PlayerNowPlayingItemDidChange object:self];
        return;
    }

    [super observeValueForKeyPath:keyPath ofObject:object change:change context:context];
} 
```

安慰：

```
spotifyPlaybackManager.currentTrack (null)
PLAY NEXT
spotifyPlaybackManager.currentTrack <SPTrack: 0x60f8390>: Karaoke 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-24T14:14:34.330

解决方案非常简单，但我花了一年时间才意识到这一点。我的旧解决方案是在上一首曲目结束之前启动后台任务，并保持运行直到下一首曲目播放。那很容易出错。反而：

跟踪您的播放状态（播放或暂停）。每当您过渡到 Playing 时，就启动一个后台任务。永远不要停止它，除非你过渡到暂停。即使在曲目之间也保持播放状态。只要您的 info.plist 中有音频背景模式并且正在播放音频，您的后台任务就会无限超时。

一些伪代码：

```
@interface PlayController
@property BOOL playing;

- (void)playPlaylist:(SPPlaylist*)playlist startingAtRow:(int)row;
@end

@implementation PlayController
- (void)setPlaying:(BOOL)playing
{
    if(playing == _playing) return;
    _playing = playing;

    UIApplication *app = [UIApplication sharedApplication];
    if(playing)
        self.playbackBackgroundTask = [app beginBackgroundTaskWithExpirationHandler:^ {
            NSLog(@"Still playing music but background task expired! :(");
                    [app endBackgroundTask:self.playbackBackgroundTask];
                self.playbackBackgroundTask = UIBackgroundTaskInvalid;
            }];
    else if(!playing && self.playbackBackgroundTask != UIBackgroundTaskInvalid)
        [app endBackgroundTask:self.playbackBackgroundTask];
}
...
@end 
```

编辑：哦，我[终于写了博客](http://overooped.com/post/46426447128/continuously-playing-music-in-the-background-on-ios)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-18T07:21:50.943

CocoaLibSpotify 做了大量工作来开始播放曲目，并且可能会在此过程中产生新的内部线程。我怀疑这在背景的音频风格中是允许的，因此您可能需要启动一个临时的后台任务来更改曲目。

# iphone - xml 解析的图像在 uitableviewcell 中不起作用

> ID：11532820
> 
> 赞同：0
> 
> 时间：2012-07-18T00:43:42.633
> 
> 标签：iphone, xcode, uitableview, rss, nsxmlparser

我已经成功解析了这个名字，它出现在了，`cell.textLabel.text`但另一方面，图像却没有出现。当我输入本地图像的名称作为字符串时，它可以工作，但是当我将它连接到解析的图像字符串时，它不会显示。思考为什么会这样？谢谢。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:MyIdentifier] autorelease];
    }

    // Set up the cell
    int storyIndex = [indexPath indexAtPosition: [indexPath length] - 1];

    [cell setText:[[stories objectAtIndex: storyIndex] objectForKey: @"Name"]];
    cell.textLabel.font = [UIFont fontWithName:@"Arial" size:18];
    NSString * storyLink = [[stories objectAtIndex: storyIndex] objectForKey: @"Image"];

    NSURL *url = [NSURL URLWithString:storyLink];
    NSData *data = [NSData dataWithContentsOfURL:url];
    UIImage *background = [[UIImage alloc] initWithData:data];
    cell.imageView.image = background;
    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic

  }

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

    if ([stories count] == 0) {
        NSString * path = @"http://travisupload.weebly.com/uploads/9/0/0/1/9001440/sports.xml";
        [self parseXMLFileAtURL:path];
    }

    cellSize = CGSizeMake([newsTable bounds].size.width, 60);
}

- (void)viewWillDisappear:(BOOL)animated {
}

- (void)viewDidDisappear:(BOOL)animated {
}

- (void)parserDidStartDocument:(NSXMLParser *)parser{
    NSLog(@"found file and started parsing");

}

- (void)parseXMLFileAtURL:(NSString *)URL
{
    stories = [[NSMutableArray alloc] init];

    //you must then convert the path to a proper NSURL or it won't work
    NSURL *xmlURL = [NSURL URLWithString:URL];

    // here, for some reason you have to use NSClassFromString when trying to alloc NSXMLParser, otherwise you will get an object not found error
    // this may be necessary only for the toolchain
    rssParser = [[NSXMLParser alloc] initWithContentsOfURL:xmlURL];

    // Set self as the delegate of the parser so that it will receive the parser delegate methods callbacks.
    [rssParser setDelegate:self];

    // Depending on the XML document you're parsing, you may want to enable these features of NSXMLParser.
    [rssParser setShouldProcessNamespaces:NO];
    [rssParser setShouldReportNamespacePrefixes:NO];
    [rssParser setShouldResolveExternalEntities:NO];

    [rssParser parse];

}

- (void)parser:(NSXMLParser *)parser parseErrorOccurred:(NSError *)parseError {
    NSString * errorString = [NSString stringWithFormat:@"Unable to download story feed from web site (Error code %i )", [parseError code]];
    NSLog(@"error parsing XML: %@", errorString);

    UIAlertView * errorAlert = [[UIAlertView alloc] initWithTitle:@"Error loading content" message:errorString delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
    [errorAlert show];
}

- (void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    //NSLog(@"found this element: %@", elementName);
    currentElement = [elementName copy];
    if ([elementName isEqualToString:@"Sport"]) {
        // clear out our story item caches...
        item = [[NSMutableDictionary alloc] init];
        currentName = [[NSMutableString alloc] init];
        currentDate = [[NSMutableString alloc] init];
        currentSummary = [[NSMutableString alloc] init];
        currentImage = [[NSMutableString alloc] init];
    }

}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    //NSLog(@"ended element: %@", elementName);
    if ([elementName isEqualToString:@"Sport"]) {
        // save values to an item, then store that item into the array...
        [item setObject:currentName forKey:@"Name"];
        [item setObject:currentImage forKey:@"Image"];
        [item setObject:currentSummary forKey:@"summary"];
        [item setObject:currentDate forKey:@"date"];

        [stories addObject:[item copy]];
        NSLog(@"adding story: %@", currentName);
    }

}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{
    //NSLog(@"found characters: %@", string);
    // save the characters for the current item...
    if ([currentElement isEqualToString:@"Name"]) {
        [currentName appendString:string];
    } else if ([currentElement isEqualToString:@"Image"]) {
        [currentImage appendString:string];
    } else if ([currentElement isEqualToString:@"description"]) {
        [currentSummary appendString:string];
    } else if ([currentElement isEqualToString:@"pubDate"]) {
        [currentDate appendString:string];
    }

}

- (void)parserDidEndDocument:(NSXMLParser *)parser {

    [activityIndicator stopAnimating];
    [activityIndicator removeFromSuperview];

    NSLog(@"all done!");
    NSLog(@"stories array has %d items", [stories count]);
    [newsTable reloadData];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)dealloc {

    [currentElement release];
    [rssParser release];
    [stories release];
    [item release];
    [currentName release];
    [currentDate release];
    [currentSummary release];
    [currentImage release];

    [super dealloc];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:46:36.973

不要在主线程上下载图像。试试[SDWebImage](https://github.com/rs/SDWebImage)，一个带有 UIImageView 类别缓存支持的异步图片下载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:56:51.450

试试这个代码！！

```
NSString *imageStr = [imageURLArray objectAtIndex:indexPath.row];
NSString *trimmedString = [imageStr stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
NSString *string1=[trimmedString stringByReplacingOccurrencesOfString:@"/n" withString:@""];
NSURL *url = [NSURL URLWithString:string1];
NSData *data = [NSData dataWithContentsOfURL:url];
UIImage *newImage = [UIImage imageWithData:data];
cell.imageView.image = newImage; 
```

# ios - 导航控制器子视图中的导航栏初始化到错误的位置（即使它自行修复）

> ID：11532830
> 
> 赞同：2
> 
> 时间：2012-07-18T00:45:34.173
> 
> 标签：ios, uinavigationcontroller, initialization, uinavigationbar, render

我正在使用自定义选项卡视图控制器（通过 UITabBarDelegate 实现）和其中的导航控制器作为子视图。为了让 Navigation Controller 的 Navigation Bar 出现在父 Tab View Controller 中 Navigation Bar 的下方，我通过创建一个从屏幕顶部开始 44 像素的 CGRect 以编程方式初始化 NavigationController。

这可以很好地减去一个小但非常明显的错误。在我的父选项卡视图控制器首次显示后的一瞬间，NavigationController 的导航栏从它应该在的位置下方大约 30 像素开始，在它跳回正确的 44 像素高度之前留下一些讨厌的空白（这正是父标签栏控制器的导航栏结束）。下面的之前/之后的屏幕截图说明了我在说什么。

![糟糕的导航栏向所有人展示其肮脏的初始化洗衣房！](../Images/6cc2d868bba45770b626d4905d71ebfd.png)

我应该在哪里移动 NavigationController 的子视图的初始化和/或视图插入，以隐藏最终用户对导航栏所做的这一点调整？

目前我有这样的导航控制器的初始化发生在标签栏控制器的 init 方法中，如下所示：

```
- (id)initWithCoder:(NSCoder *)aDecoder{
    self = [super initWithCoder:aDecoder];
    if (self) {
        self.tab1vc =[[ContactsListViewController alloc] initWithNibName:@"ContactsViewController" bundle:nil];
        self.nav1 = [[UINavigationController alloc] initWithRootViewController:self.tab1vc];
        [nav1.view setFrame:CGRectMake(0, 44, 320, 370)];
        }
    }
    return self;
} 
```

然后我继续在主选项卡栏控制器的“ViewDidLoad”方法中插入 NavigationController 的实际视图，如下所示：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view insertSubview:nav1.view belowSubview:mainTabBar];
    [mainTabBar setSelectedItem:driverListTabBarItem];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T04:07:43.847

```
 self.nav1 = [[UINavigationController alloc] initWithRootViewController:self.tab1vc];
     [nav1.view setFrame:CGRectMake(0, 44, 320, 370)]; 
```

在你的“self.tab1vc”初始化方法中，你应该在那个 rootViewController 中设置 frame.origin

```
 self.view.frame = CGRectMake(0.0f,0.0f,320,460); 
```

希望这会帮助你。

# c - malloc返回的指针可以改变吗

> ID：11532834
> 
> 赞同：1
> 
> 时间：2012-07-18T00:46:03.707
> 
> 标签：c, malloc, gstring

在为个人项目编程时，我发现当我将指针传递给一个函数时，它的值无法更改。例子：

```
...
GString *buf = NULL;
buf = g_string_sized_new(64);
somefunc(buf, filename);
... 
```

和

```
void somefunc(GString *buf, gchar *filename)
{
    buf = otherfunc(filename); //otherfunc() returns a GString *
} 
```

在查看调试器后，我观察到当缓冲区运行的内存分配时，buf=0x80b720 和 otherfunc() 返回 0x80b750。虽然缓冲区的值没有改变。所以我想问一下是否有人知道为什么会发生这种情况以及这是否是 malloc() 的一般特征。换句话说，如果您将 malloc() 调用返回的指针传递给函数，那么您是否能够在函数体内部或外部更改此值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T00:49:12.800

这与`malloc`.

当您将指针传递给函数时，该函数会收到原始指针的副本。它可以修改自己的指针副本，但不能修改原始指针。

如果您希望它修改原始指针，您需要将原始指针的地址传递给它，它将作为指向指针的指针接收。

```
void somefunc(GString **buf, gchar *filename) { 
    *buf = otherfunc(filename);
} 
```

# jquery - jquery添加onmouseover属性

> ID：11532842
> 
> 赞同：5
> 
> 时间：2012-07-18T00:47:14.003
> 
> 标签：jquery, mouseover

在 jquery 中，如何向元素添加“onmouseover”事件。

例如

```
<tr id=row bgcolor=white> 
```

变成

```
 <tr id=row bgcolor=white onMouseOver="this.bgColor='red'"> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-18T00:48:04.427

您可以使用以下`attr`方法：

```
$('#row').attr("onMouseOver", "this.bgColor='red'") 
```

但由于您使用的是 jQuery，我建议您使用以下`on`方法：

```
$('#row').on('mouseover', function() {
    $(this).css('background-color', 'red');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:49:21.317

如果元素是静态的，试试这个：

```
var $row = $('#row');
$row.mouseover(function(){
    $row.css('background-color','red');
}); 
```

如果元素是动态放置在页面中的，请使用它：

```
var $row = $('#row');
$row.on('mouseover',function(){
    $row.css('background-color','red');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:48:51.660

不要添加属性。使用事件。

```
$('#row').mouseover(function() {
  $(this).css('background','red');
}); 
```

# c# - 以编程方式使用 C# 和 LINQ 进行分组（OnSelecting Maybe？）

> ID：11532843
> 
> 赞同：2
> 
> 时间：2012-07-18T00:47:22.117
> 
> 标签：c#, asp.net, linq, gridview, grouping

我一直在四处寻找并希望得到一些想法 - 我目前有一个网格视图，它从一个 linq 数据源获取它的源，该数据源在 onselecting 命令上获取它的数据。但是我正在尝试实现分组...

关于我应该如何做到这一点的任何伪代码或指针？在我的脑海中，我的代码看起来像这样：

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" DataSourceID="LinqDataSource1" EmptyDataText="There are no data records to display."> 
```

..列设置和一个关闭的gridview标签然后到linqdatasource ...

```
<asp:LinqDataSource ID="LinqDataSource1" runat="server" onselecting="LinqDataSource_Selecting" > 
```

到 .cs 页面！

```
public void LinqDataSource1_Selecting(object sender, LinqDataSourceSelectEventArgs e)
{
var db = new MyDataContext())
var orders = from order in db.tbl_orders 
select new {(order.Id, order.customer, order.state);
e.Result = orders;
} 
```

我试图弄清楚在哪里以及如何在所有这一切中实现组。我见过的大多数示例要么在 linqDataSource 代码中进行分组（这给了我有趣的错误，认为它与 onSelecting 有关）或狡猾地建议我购买 X 产品。我正在尝试按州对订单进行分组-因此最终结果将类似于：

```
California (3 orders)
ID Order
ID Order
ID Order
Montana (1 orders) 
ID Order 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:12:25.217

嗨，这是您如何做到的示例

```
 public void Button_Click()
    {
        List<Order> ods = new List<Order>{new Order(){State="cali",ID=1},
                new Order(){State="cali",ID=2},
                new Order(){State="nali",ID=3},
                new Order(){State="pali",ID=4},
                new Order(){State="pali",ID=5},
        };
        List<Grouping> groups = new List<Grouping>();
        var orders = ods.GroupBy(g => g.State);
        foreach (var order in orders)
        {
            Grouping group = new Grouping() { State = order.Key, Orders = new List<Order>(), IDs = new List<int>() };
            order.ToList().ForEach(o => { group.Orders.Add(o); group.IDs.Add(o.ID); });
            groups.Add(group);
        }

    }
    public class Grouping
    {
        public string State { get; set; }
        public List<Order> Orders { get; set; }
        public List<int> IDs { get; set; }
    }
    public class Order
    {
        public string State
        {
            get;
            set;
        }
        public int ID
        {
            get;
            set;
        }
    } 
```

除了 dataSource 和 classes 不同但逻辑相同之外，这正是您想要的。我希望这能帮助你理解这个想法。

# ruby-on-rails - 如何从rails视图执行ruby脚本

> ID：11532856
> 
> 赞同：1
> 
> 时间：2012-07-18T00:49:43.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我是 ruby​​ on rails 的新手，并试图建立一个内部站点来管理几个 ruby​​ 脚本。我想要完成的事情；创建网页，用户单击链接（执行分析器）以执行 ruby​​ 脚本（在后台运行 - FitAnalyzer.rb）。我无法理解如何在不重定向到另一个网页的情况下路由它。我基本上需要帮助如何将正确的格式添加到 routes.rb。

**分析器.html.erb**

```
<%= link_to "![Execute][1] Analyzer", :controller =>
'fit_anlayzer_controller', :method => 'execute_analyzer'%> 
```

**fit_analyzer_controller.rb**

```
class FitAnalyzerController < ApplicationController
  def analyzer
  end

  def execute_analyzer
    # Delayed::Job.enqueue(AnalyzerJob.new(params[:id]), 3)
    # command = 'ruby ~/ruby_scripts/fit_analyzer/FitAnalyzer.rb'
    @execute_command = system 'ruby
/Users/gsypolt/rubyqa_project/ruby_scripts/fit_analyzer/FitAnalyzer.rb'
    flash[:notice] = "Executing FitNesse Analyzer"
  end
end 
```

访问 mylocalhost/fit_analyzer/analyzer 时收到以下消息

```
No route matches {:controller=>"fit_anlayzer_controller",
:method=>"execute_analyzer", :popup=>true} 
```

我一直在从 lyndia.com 和 book (rails 3 way) 学习 ruby​​ on rails

样机屏幕截图我正在尝试构建的内容

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T01:03:07.527

您需要添加路线

```
# config/routes.rb
match "fit_analyzer/analyzer" => 'fit_analyzer#execute_analyzer' 
```

`fit_analyzer#execute_analyzer`对应于`controller#action`

然后你需要使用ajax调用它。为此，请`:remote => true`在您的`link_to`

# mysql - nodejs/socket.io 与 node-mysql | 安全混乱

> ID：11532857
> 
> 赞同：1
> 
> 时间：2012-07-18T00:49:57.570
> 
> 标签：mysql, security, node.js, socket.io, node-mysql

所以我开始研究 node-mysql，因为我的整个网站都是用 PHP 构建的，但我想使用 node/socket.io 来实现平滑的异步用户端更新。但是，我在 node-mysql 上看到了一个问题，我还没有完全得到答案。mysql服务器的登录信息怎么不是公开信息？

根据文档[https://github.com/felixge/node-mysql](https://github.com/felixge/node-mysql)你像这样连接到数据库

```
var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'me',
  password : 'secret',
});

connection.connect();

connection.query('SELECT 1', function(err, rows, fields) {
  if (err) throw err;

  console.log('Query result: ', rows);
});

connection.end(); 
```

那么是什么阻止用户将服务器文件放入导航栏中并查看 mysql 服务器的登录信息呢？我对此感到非常困惑，有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T00:53:13.243

Node.js 是服务器端 JavaScript。您可以将这些文件放在与您放置 PHP 文件类似的位置，而不是放在可公开访问的位置。

您运行您的 Node 应用程序，它提供您想要的公共 HTML/CSS/JS 文件（或者，序列化数据，例如 JSON 形式的数据）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T00:52:09.607

您的 node.js 文件不应通过浏览器访问。

# javascript - 空数组绑定元素在页面加载时消失

> ID：11532859
> 
> 赞同：1
> 
> 时间：2012-07-18T00:50:20.147
> 
> 标签：javascript, mvvm, knockout.js, knockout-2.0

我有一个简单的集合绑定到一个最初为空的**observableArray**。当页面呈现时，它“有时”会在绑定开始并删除元素之前显示空模板。**如果您看不到它，请刷新页面几次。** 这发生在容器少模板的情况下，但也发生在普通的内联和脚本标签样式模板中。

**看法：**

```
<div>
  <input data-bind="value: address"/>
  <button data-bind="click: search">Search</button>
</div>
<!-- ko if: list().length > 0 -->
<h5 data-bind="text: list().length"></h5>
<!-- /ko -->
<!-- ko foreach: list -->
    <div class="result" data-bind="text: addr"></div>
<!-- /ko -->​ 
```

**Javascript：**

```
$(function() {

  var viewModel = function() {
      var self = this;

      self.address = ko.observable("Portland");

      self.list = ko.observableArray();
      self.hasData = function(){return self.list().length > 0;};

      self.search = function() {
              self.list.push({ addr: "Item01" , index: 1 });
              self.list.push({ addr: "Item02" , index: 2 });
              self.list.push({ addr: "Item03" , index: 3 });      
      };
  };

  var vm = new viewModel();
  ko.applyBindings(vm);
});​ 
```

我似乎在[jsFiddle - http://jsfiddle.net/motowilliams/mx7SM/](http://jsfiddle.net/motowilliams/mx7SM/)或 JSBin 上发生的事情并不多，但在本地和[部署时确实发生了 - http://knockouttest.herokuapp.com/](http://knockouttest.herokuapp.com/)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:16:59.587

我无法在您的示例中看到问题，但您有几个选择是：

*   `script`在标签中使用命名模板。浏览器不会呈现脚本标记中的标记。您似乎确实表明您尝试过它，但您可能想再看看它。

*   否则，您可以将其包装在一个元素中并`display: none`在其上设置并使用`data-bind="visible: true"`。当页面加载时，它将被隐藏，并且 KO 将在绑定发生时将其设置为可见。就像是：

这是一个示例，其中包含我提到的原始选项和两个选项以及应用绑定的两秒延迟：http: [//jsfiddle.net/rniemeyer/mx7SM/2/](http://jsfiddle.net/rniemeyer/mx7SM/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:24:37.790

对我来说，延迟只发生在存在这 2 个 github gist 脚本的情况下——这在生产中可能不会成为问题？在文档准备好之前，您的绑定不会发生，并且它们似乎显着减慢了它的速度。

# php - 计算 Y 中有多少 X 和余数

> ID：11532862
> 
> 赞同：0
> 
> 时间：2012-07-18T00:50:54.717
> 
> 标签：php

有没有更好的方法在 php 中执行此操作 - 我本来是这么认为的，但这就是我能想到的。

```
$x = 4
$y = 32

while ($y > $x) { $y = $y-$x; } 
```

$y 的最终值是我所追求的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T00:51:42.450

使用 mod 运算符：

```
$remainder = $y % $x; 
```

如果你想得到多少，请使用除法并发言：

```
$total = floor( $y / $x); 
```

所以，使用`$y = 35;`and `$x = 4;`，你会得到：

```
$total = 8, $remainder = 3 
```

# xcode - NSForm 单元格显示不正确

> ID：11532864
> 
> 赞同：0
> 
> 时间：2012-07-18T00:50:56.173
> 
> 标签：xcode, macos, nsform

我将 NSForm 添加到 IB 中的 NSTabView 中，一切看起来都很好（上图）。当我启动应用程序并使用 NSForm 转到选项卡时，表单文本字段看起来像底部的图片。我究竟做错了什么？

![在此处输入图像描述](../Images/bea39c1dfc306e92d6dac27e20f83c38.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:01:26.220

所以我只是按照 Nicholas 的建议去做，并使用了文本字段和标签。效果很好！

# jquery - 在选中复选框 Jquery 时更改背景图像？

> ID：11532872
> 
> 赞同：1
> 
> 时间：2012-07-18T00:52:16.503
> 
> 标签：jquery, checkbox, background-image

我正在尝试更改身体上的背景图像，我有透明和纯色图案图像并有以下代码：

```
$('#patterns, #solid').click(function() {           
    var pattern = $(this).val();                    
    if ($('input:checkbox').is(':checked')) {
        $('body').css('background-image', 'url("images/patterns/solid/'+ pattern +'.png")'); 
    } 
    else {
        $('body').css('background-image', 'url("images/patterns/'+ pattern +'.png")');
    }           
}); 
```

我在 html 中选择了透明图案的选项值，还有一个复选框，如果您想使用纯色图案，请选中此复选框。非常感谢。

```
<label for="pattern">Choose Pattern</label>
        <select id="patterns" name="pattern">
            <option value="absurdidad">absurdidad</option>
            <option value="arches">arches</option>
            <option value="argyle">argyle</option>
            <option value="batthern">batthern</option>
        </select>

        <label for="solid">Use only solid patterns</label>
        <input type="checkbox" id="solid" /> 
```

如果我把 css('background-color', 'red'); } else { css('背景色', '黑色') }; 像魅力一样工作，点击立即触发并更改背景颜色，保持透明图案并添加背景颜色，但不添加背景图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:30:32.173

试试这个：

```
$('#patterns').on('change', function() {
    var pattern = $(this).val(),
        url;
    if ($('#solid').is(':checked')) {
        url = "images/patterns/solid/" + pattern + ".png";
    } 
    else {
        url = "images/patterns/" + pattern + ".png";
    }           
    $('body').css('background-image', 'url(' + url + ')');
}).trigger('change');
$('#solid').click(function() {
    $('#patterns').trigger('change');
}); 
```

如果可行，那么它应该简化为：

```
var $patterns = $('#patterns').on('change', function() {
    var str = $solid.is(':checked') ? 'solid/' : '';
    $('body').css('background-image', 'url(images/patterns/' + str + $(this).val() + '.png)');
}).trigger('change');
var $solid = $('#solid').click(function() {
    $patterns.trigger('change');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:32:57.953

**单击复选框更改图像的**工作演示：http:** [//jsfiddle.net/FWNTQ/](http://jsfiddle.net/FWNTQ/)**

 ****代码**

```
$('#checkboxID').click(function() {
    var newImg = new Image;
    newImg.onload = function() {

        $('#myimage').attr('src', this.src).removeClass('loading');
        $('#container .loader').hide();
    }
    $('#container .loader').show();
    $('#myimage').addClass('loading');
    if ($(this).is(':checked')) {
        newImg.src = 'http://images4.wikia.nocookie.net/__cb20111016234902/maditsmadfunny/images/thumb/5/54/Hulk-from-the-movie.jpg/180px-Hulk-from-the-movie.jpg';
    } else {
        newImg.src = 'http://www.hybrideb.com/content/evidence/doubletree.png';
    }

}); 
```

**css**

```
#container .loader{
    position:absolute;
    left:50px;
    top:50px;
    z-index:999;
    display:none;
}
#container{
    position:relative;
}
.loading{
 opacity:.5;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:36:52.663

方法调用`$(this).val()`正在返回复选框的值。从您的 html 片段中，模式应该是组合框中选择的选项的值。

* * *

如果我理解正确，这应该可以完成您正在寻找的内容：

```
// Update the background image on the body tag when:
//   a) A new pattern is selected, or
//   b) The solid checkbox is checked or unchecked
$('#patterns, #solid').change(function() {  
    var pattern,
        isSolid;

    // Get the pattern from the value selected in #patterns.    
    pattern = $('#patterns option:selected').val();

    // Use a solid background if #solid is checked.
    isSolid = $('#solid').is(':checked');

    if (isSolid) {
        $('body').css('background-image', 'url("images/patterns/solid/'+ pattern +'.png")');  
    } else {
        $('body').css('background-image', 'url("images/patterns/'+ pattern +'.png")');
    }
}); 
```**

# javascript - jQuery 检索最接近唯一的选择器

> ID：11532875
> 
> 赞同：2
> 
> 时间：2012-07-18T00:52:36.567
> 
> 标签：javascript, jquery, css-selectors

所以你有一堆元素，你用 jQuery 选择其中一个。

```
($('div > ul > li').length === 1) // this is true 
```

现在，如果您需要将此元素作为字符串传递，您通常会：

```
var el = $('div > ul > lu');
var passid = el.prop('id');

// in case this element doesn't have an id="..." attribute set one
if(typeof(passid)!=='string'){
    // compute an id="..." attribute based on the time
    var elindex = new Date().getTime();
    // make sure the id we're using isn't already in use by a different element
    while($('#el_'+elindex).length)
        elindex++;

    // assign what we've got
    passid = 'el_'+ elindex ;
    el.prop('id', passid);
};
passid = '#'+passid;

// Once we're good to go, pass the resulting selector
// passon(passid);... etc. 
```

jQuery 是否带有更好的（内置）函数（甚至是插件）来方便我将 DOM 节点的引用作为字符串传递？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T20:01:15.340

假设您一次只进行一次状态更新，为什么不能简单地给元素一个临时 id，如“current_el”，然后当 websocket 返回时，您可以简单地访问 id 为“current_el”的元素每次？所以基本上，你设置一个每次都相同的临时 id。这样您甚至根本不必发送选择器，您只需访问临时 id 并在服务器请求返回时将其清除。

但是，如果您需要保留一个参考以供将来使用该元素，您的方法似乎就可以了。我不知道任何旨在实现此目的的 jQuery 函数。希望这可以帮助。

# python - 运行 python unittest 时显示进度？

> ID：11532882
> 
> 赞同：7
> 
> 时间：2012-07-18T00:54:22.050
> 
> 标签：python, unit-testing

我有一个非常大的 TestSuite，可以`TextTestRunner`从 python unittest 框架运行。不幸的是，我不知道在测试运行时已经完成了多少测试。

基本上我想转换这个输出：

```
test_choice (__main__.TestSequenceFunctions) ... ok
test_sample (__main__.TestSequenceFunctions) ... ok
test_shuffle (__main__.TestSequenceFunctions) ... ok

----------------------------------------------------------------------
Ran 3 tests in 0.110s

OK 
```

到

```
[1/3] test_choice (__main__.TestSequenceFunctions) ... ok
[2/3] test_sample (__main__.TestSequenceFunctions) ... ok
[3/3] test_shuffle (__main__.TestSequenceFunctions) ... ok

----------------------------------------------------------------------
Ran 3 tests in 0.110s

OK 
```

我是否必须进行子类化`TextTestRunner`才能实现这一目标，如果是，如何实现？

*注意：我知道鼻子和可用的插件，但它不太适合我的应用程序，我想避免依赖。*

**编辑**为什么我想避免*鼻子*：

我的应用程序基本上是测试的附加框架。它选择正确的测试用例，为它们提供库函数并多次执行测试以进行长期测试。（测试针对外部机器运行）

所以这就是我现在运行测试的方式：

```
# do all sort of preperations
[...]
test_suite = TestSuite()

repeatitions = 100
tests = get_tests()
for i in range(0, repeatitions):
    test_suite.addTests(tests)
TextTestRunner(verbosity=2).run(test_suite) 
```

我对鼻子的问题是，它旨在从文件系统中发现测试，我无法找到一个清晰的文档，如何直接从 python 在特定的 TestSuite 上运行它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-12-07T17:05:59.743

派对迟到了，但希望这能帮助像我一样来到这里寻找同样问题答案的其他人：

这是您可以子类化`TextTestRunner`并`TextTestResult`实现所需结果的一种方法：

```
import unittest
import unittest.runner
import itertools
import collections

class CustomTextTestResult(unittest.runner.TextTestResult):
    """Extension of TextTestResult to support numbering test cases"""

    def __init__(self, stream, descriptions, verbosity):
        """Initializes the test number generator, then calls super impl"""

        self.test_numbers = itertools.count(1)

        return super(CustomTextTestResult, self).__init__(stream, descriptions, verbosity)

    def startTest(self, test):
        """Writes the test number to the stream if showAll is set, then calls super impl"""

        if self.showAll:
            progress = '[{0}/{1}] '.format(next(self.test_numbers), self.test_case_count)
            self.stream.write(progress)

            # Also store the progress in the test itself, so that if it errors,
            # it can be written to the exception information by our overridden
            # _exec_info_to_string method:
            test.progress_index = progress

        return super(CustomTextTestResult, self).startTest(test)

    def _exc_info_to_string(self, err, test):
        """Gets an exception info string from super, and prepends 'Test Number' line"""

        info = super(CustomTextTestResult, self)._exc_info_to_string(err, test)

        if self.showAll:
            info = 'Test number: {index}\n{info}'.format(
                index=test.progress_index,
                info=info
            )

        return info

class CustomTextTestRunner(unittest.runner.TextTestRunner):
    """Extension of TextTestRunner to support numbering test cases"""

    resultclass = CustomTextTestResult

    def run(self, test):
        """Stores the total count of test cases, then calls super impl"""

        self.test_case_count = test.countTestCases()
        return super(CustomTextTestRunner, self).run(test)

    def _makeResult(self):
        """Creates and returns a result instance that knows the count of test cases"""

        result = super(CustomTextTestRunner, self)._makeResult()
        result.test_case_count = self.test_case_count
        return result

class TestSequenceFunctions(unittest.TestCase):
    """Dummy test case to illustrate usage"""

    fail_1 = 0
    fail_2 = 0

    def test_choice(self):
        pass

    def test_sample(self):
        self.fail_1 += 1
        if self.fail_1 == 2:
            raise Exception()

    def test_shuffle(self):
        self.fail_2 += 1
        if self.fail_2 == 3:
            raise Exception()

def get_tests():
    test_funcs = ['test_choice', 'test_sample', 'test_shuffle']
    return [TestSequenceFunctions(func) for func in test_funcs]

if __name__ == '__main__':
    test_suite = unittest.TestSuite()

    repetitions = 3
    tests = get_tests()
    for __ in xrange(0, repetitions):
        test_suite.addTests(tests)

    CustomTextTestRunner(verbosity=2).run(test_suite) 
```

运行上面的代码会产生以下输出：

```
>>> ================================ RESTART ================================
>>> 
[1/9] test_choice (__main__.TestSequenceFunctions) ... ok
[2/9] test_sample (__main__.TestSequenceFunctions) ... ok
[3/9] test_shuffle (__main__.TestSequenceFunctions) ... ok
[4/9] test_choice (__main__.TestSequenceFunctions) ... ok
[5/9] test_sample (__main__.TestSequenceFunctions) ... ERROR
[6/9] test_shuffle (__main__.TestSequenceFunctions) ... ok
[7/9] test_choice (__main__.TestSequenceFunctions) ... ok
[8/9] test_sample (__main__.TestSequenceFunctions) ... ok
[9/9] test_shuffle (__main__.TestSequenceFunctions) ... ERROR

======================================================================
ERROR: test_sample (__main__.TestSequenceFunctions)
----------------------------------------------------------------------
Test number: [5/9] 
Traceback (most recent call last):
  File "stackoverflow.py", line 75, in test_sample
    raise Exception()
Exception

======================================================================
ERROR: test_shuffle (__main__.TestSequenceFunctions)
----------------------------------------------------------------------
Test number: [9/9] 
Traceback (most recent call last):
  File "stackoverflow.py", line 80, in test_shuffle
    raise Exception()
Exception

----------------------------------------------------------------------
Ran 9 tests in 0.042s

FAILED (errors=2)
>>> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:18:57.013

您必须继承 TextTestRunner，但我不知道如何。我强烈建议你重新审视你对使用鼻子的厌恶。这是一个非常强大的工具，可以轻松解决您的问题。

# c++ - 是否有 C 宏来生成重复字符串？

> ID：11532883
> 
> 赞同：5
> 
> 时间：2012-07-18T00:54:34.867
> 
> 标签：c++, c, macros

假设我想生成`------`，只有`-`，是否有一个 C 宏来生成重复的字符串？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-18T01:13:55.853

使用提升，例如

```
#include <stdio.h>
#include <boost/preprocessor/repetition/repeat.hpp>

#define Fold(z, n, text)  text

#define STRREP(str, n) BOOST_PP_REPEAT(n, Fold, str)

int main(){
    printf("%s\n", STRREP("-", 6));
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-18T01:10:30.950

是和不是。这并不简单，通常也不是一个好主意，但您可以为有限的、恒定的大小和恒定的字符执行此操作。使用 C 预处理器有很多方法可以做到这一点。这是一个：

```
#define DUP(n,c) DUP ## n ( c )

#define DUP7(c) c c c c c c c
#define DUP6(c) c c c c c c
#define DUP5(c) c c c c c
#define DUP4(c) c c c c
#define DUP3(c) c c c
#define DUP2(c) c c
#define DUP1(c) c

#include <stdio.h>

int main(int argc, char** argv)
{
  printf("%s\n", DUP(5,"-"));
  printf("%s\n", DUP(7,"-"));
  return 0;
} 
```

它并不漂亮，并且仅在您确实希望将字符串存储为静态（常量）数据时才有用。the`n`和 'c' 参数`DUP`都必须是*常量*（它们*不能*是变量）。[Boost.Preprocessor](http://www.boost.org/doc/libs/1_50_0/libs/preprocessor/doc/index.html)模块有很多关于如何以及何时（ab）像这样使用 C/C++ 预处理器的有用信息。尽管 Boost 是一个 C++ 库，但预处理器信息在很大程度上适用于纯 C。

一般来说，你最好在普通的 C 代码中这样做：

```
/* In C99 (or C++) you could declare this: 
     static inline char* dupchar(int c, int n)
   in the hopes that the compiler will inline. C89 does not support inline
   functions, although many compilers offered (inconsistent) extensions for
   inlining. */
char* dupchar(int c, int n)
{
  int i;
  char* s;

  s = malloc(n + 1); /* need +1 for null character to terminate string */
  if (s != NULL) {
    for(i=0; i < n; i++) s[i] = c;
  }
  return s;
} 
```

或者，`memset`按照@Jack 的建议使用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-18T00:56:08.470

不在 C 标准中。您需要编写自己的实现。

**编辑：**

像这样的东西：

```
#include <stdio.h>
#include <string.h>

#define REPEAT(buf, size, ch) memset(&buf, ch, size)

int main(void)
{

  char str[10] = { 0 };
  REPEAT(str, 9, '-');
  printf("%s\n", str); //---------

  return 0;
} 
```

# php - 简单的 html dom 加载与 url 不同的页面

> ID：11532884
> 
> 赞同：2
> 
> 时间：2012-07-18T00:55:03.247
> 
> 标签：php, simple-html-dom

我正在尝试使用 php 的简单 html dom 解析器拉入一个网页，但我遇到了一个奇怪的问题。我通过连接两个字符串来定义 url 变量。

```
$itemUrl="http://www.example.com/";
$pageUrl="default.asp?pg=DispSingleItem&ItemNumber=1234";
$itemUrl .=$pageUrl;
$html=file_get_html($itemUrl); 
```

当我运行这个脚本时，我最终会进入一个显示“未找到项目”的页面。但是，当我回显 $itemUrl、复制输出并将其粘贴到浏览器中时，我会直接转到我要查找的页面。此外，如果我只是将保存为一个字符串的整个 url 以它开头，则会将我带到正确的网页。

```
$itemUrl="http://www.example.com/default.asp?pg=DispSingleItem&ItemNumber=1234";
$html=file_get_html($itemUrl); 
```

我尝试在连接的字符串上使用 urlencode，但这没有帮助。我真的很难过。当直接复制并粘贴到另一个变量中的相同 url 将我带到正确的页面时，我想不出为什么连接的 url 会将我带到不同的页面。我在这里想念什么？任何帮助都会很棒，谢谢。

编辑：我发现了问题。$pageUrl 的回声显示了这一点：

```
default.asp?pg=DispSingleItem&ItemNumber=1234 
```

实际上，该变量正在保存一个如下所示的字符串：

```
default.asp?pg=DispSingleItem&amp;ItemNumber=1234 
```

我的浏览器会自动翻译 & amp; 简单地 &，这看起来正是我所需要的。但是，每当我运行 file_get_html 时，该字符串都没有被转换，因此脚本试图从具有 & amp; 的 url 中获取它。不只是 ＆。我补充说：

```
$pageUrl=preg_replace("/amp;/", "", $pageUrl); 
```

有谁知道让浏览器准确输出变量的方法，而不像我的问题中发生的那样改变它？将来知道会很有用。

感谢所有的回复。我没想到这么多或这么快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:32:03.317

你的最后一个问题是：

> 有谁知道让浏览器准确输出变量的方法，而不像我的问题中发生的那样改变它？将来知道会很有用。

如果我理解正确，您想知道一种防止浏览器呈现像`www.example.com?p=1&amp;e=2`as之类的 url 字符串的方法`www.example.com?php=1&e=2`。

一种方法是使用`echo htmlentities($url);`而不是仅仅使用`echo $url;`. 这样，`&amp`字符串的一部分将完全由浏览器呈现。

示例代码：

```
<?php
$url = "www.example.com?p=1&amp;e=2";
echo $url;
echo "<br/>";
echo htmlentities($url);
?> 
```

结果浏览器输出：

```
www.example.com?p=1&e=2
www.example.com?p=1&amp;e=2 
```

# objective-c - Objective-C 协议前向声明

> ID：11532888
> 
> 赞同：59
> 
> 时间：2012-07-18T00:56:22.307
> 
> 标签：objective-c, protocols

*对象属性.h*

```
@protocol ObjectProperties <NSObject>

@property (strong, nonatomic) NSString *name;
@property (strong, nonatomic) NSDate *date;
@property (assign, nonatomic) int64_t index;

@end 
```

*类A.h*

```
#import <Foundation/Foundation.h>

@protocol ObjectProperties;

@interface ClassA : NSObject <ObjectProperties>

- (void)specialSauce;

@end; 
```

*托管类A.h*

```
#import <CoreData/CoreData.h>

@protocol ObjectProperties;

@interface ManagedClassA : NSManagedObject <ObjectProperties>

- (void)doSomething;

@end; 
```

从上面的代码示例中，我在 .h 文件中定义了一个协议，用于 Core Data 对象和普通的 ol' vanilla 对象。在其标头中包含符合标准的类#import 协议似乎是“噪音”；如上所示，在实现文件中转发声明协议和导入会更干净。但是，Xcode 在这样做时会抛出警告：

`Cannot find protocol definition for 'ObjectProperties'`

代码可以编译，并且大部分都可以工作。我说主要是因为 Core Data 尝试为标量属性动态创建 getter / setter 时有些奇怪，但我认为这可能是因为我遇到了一个极端情况。

当然，最明显的解决方法是将协议头导入到类头中。

如果我的理解是正确的（并且我的知识是最近获得的，所以我完全有可能是错的），如果我将协议导入我的类头文件并更改协议，那么所有后续文件导入我的类将不得不重新编译。

解决此类问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-07-18T03:17:00.320

您不能转发声明它所遵循的超类或协议。在这些情况下，您必须包含标题。这是因为（在超类的情况下）超类的实例变量和方法成为您的类的一部分；或者（在协议的情况下）协议的方法成为您的类中声明的方法，而无需显式声明它们。（即现在包含您的类头文件的其他人将看到您的类声明了这些方法，就好像您自己声明了它们一样。）唯一可能的方法是如果它们已经在此范围内定义，即它们的头文件被导入.

```
#import <SomeClass.h>
#import <SomeProtocol.h> // these two must be imported

@interface MyClass : SomeClass <SomeProtocol>
@end 
```

前向声明对于仅显示在变量类型（特别是对象指针变量）中的事物很有用。对象指针大小相同，运行时不同类型的对象指针没有区别（对象指针类型的概念只是编译时的东西）。所以没有真正需要确切地知道这些类型的类中有什么。因此它们可以被前向声明。

```
@class SomeClass;
@protocol SomeProtocol; // you can forward-declare these

@interface MyClass {
    SomeClass *var1;
    id<SomeProtocol> var2;
}
@end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-18T01:57:57.943

是的，您是正确的，所有文件都需要重新编译，但这是必要的。导入类头的文件需要知道与其实现的协议相关的方法。如果您将该定义隐藏在 .m 文件中，则它仅对一个文件可见（因为 .m 文件永远不会被导入）。它与前向声明类不同。如果前向声明一个协议，则必须在与前向声明相同的范围内可见的某个地方声明它。我想不出在同一个文件中没有出现这种情况的任何示例。

在 ARC 中这是一个错误，因为 ARC 需要了解已声明方法的内存管理（它们是否返回 +1 实例、内部指针等？）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-18T02:11:02.427

通过在 MyClass.h 中声明您的类，您必须导入其超类的所有头文件以及它在 MyClass.h 文件中采用的协议。Objective-c 中的协议被认为是继承的变体类型。

前向声明通常用于类的成员声明。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T02:15:06.590

由于您声明符合协议，因此您应该 #import 包含协议的标头。

这与 #importing 超类相同，而不是前向声明它：

```
@class Foo;

@interface Bar : Foo
// Will get error: attempting to use the forward class 'Foo' as superclass of 'Bar'
@end; 
```

# linux - 如何检查我的 svn 上添加的新文件？

> ID：11532889
> 
> 赞同：0
> 
> 时间：2012-07-18T00:56:24.587
> 
> 标签：linux, svn

我创建了一个 svn 服务器......所以，我用`svnadmin create mycode`......创建了我的 repo，然后我制作了一个副本`svn checkout`......后来我创建了一些文件夹，然后我做了另一个结帐.. 它工作正常，所以从其他电脑 我结账了，我得到了文件夹，就像它们一样......

问题是当我从我的客户端（另一台计算机）添加文件夹并进行结帐时......它工作正常，如果我从另一台（第三台）计算机结帐，我会得到最后的更改，包括添加的文件夹。

所以，我认为从我的第一个副本，我在服务器上的副本应该能够只使用更新命令来获取所有更改，但是，我得到“。省略”，知道吗？

如果使用命令`svn update`

谢谢

# java - 通过 JSch 在 Java 上运行 Linux 命令

> ID：11532890
> 
> 赞同：5
> 
> 时间：2012-07-18T00:56:24.817
> 
> 标签：java, linux, ssh, command, jsch

我正在通过 Java 上的 JSch 建立 SSH 连接，一切似乎都运行良好，直到我尝试运行这个 .sh 文件。shell 脚本的名字`repoUpdate.sh`很简单：

```
echo  ' ****Repository update****'
echo  ' Location: /home/cissys/repo/'
echo -e ' Command: svn update /home/cissys/repo/2.3.0'

svn update /home/cissys/repo/2.3.0 
```

这是我直接在 linux 控制台上得到的输出，并带有正确的命令响应：

```
[cissys@dsatelnx5 ~]$ repoUpdate.sh
 ****Repository update****
 Location: /home/cissys/repo/
 Command: svn update /home/cissys/repo/2.3.0

At revision 9432. 
```

现在，这是我的方法的 Java 代码，它尝试调用同一个文件的 SSH 连接

```
public void cmremove()
{
    try
    {
        JSch jsch = new JSch();
        Session session = jsch.getSession(user, host, port);
        UserInfo ui = new SUserInfo(pass, null);
        session.setUserInfo(ui);
        session.setPassword(pass);
        session.connect();

        ChannelExec channelExec = (ChannelExec)session.openChannel("exec");

        InputStream in = channelExec.getInputStream();

        channelExec.setCommand("./repoUpdate.sh");
        channelExec.connect();

        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        String line;
        int index = 0;

        while ((line = reader.readLine()) != null)
        {
            System.out.println(++index + " : " + line);
        }

        channelExec.disconnect();
        session.disconnect();

        System.out.println("Done!");
    }
    catch(Exception e)
    {
        System.err.println("Error: " + e);
    }
} 
```

我得到的回应如下：

```
run:
1 :  ****Repository update****
2 :  Location: /home/cissys/repo/
3 :  Command: svn update /home/cissys/repo/2.3.0
Done!
BUILD SUCCESSFUL (total time: 2 seconds) 
```

`svn`在命令 ( `At revision 9432`)上没有任何输出或执行迹象。

我认为它可能会在某个时候关闭会话，而不是让命令正确执行。如果是`updateRepo.sh`` file would've had something like` cp test.txt test_2.txt`，就没有问题了。但我只有这个和其他一些特定的 .sh 文件有这个问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T10:35:23.153

我怀疑你的 shell 命令由于某种原因出错了——也许`svn`不在你的路径上，也许还有其他奇怪的环境影响——但你没有得到错误输出，因为你没有在寻找它。通常，错误是在您从中获取的流上发送的，`channelExec.getErrStream`但在您的代码中，您只能从`getOutputStream`流中读取。

要对此进行诊断，您将需要获取这些错误消息。让 linux 使用一个流同时用于常规输出和错误消息可能比让你的 java 程序同时从两个流中提取更容易，所以我将这一行添加为以下行的顶行`repoUpdate.sh`：

```
exec 2>&1 
```

然后，这将导致脚本的其余部分使用您正在读取的一个流作为输出和错误。

另外，在你调用之前`chanelExec.disconnect`，在你的java程序中你应该记录退出状态，然后改变你的“完成！” 消息基于它是什么：

```
 int exitStatus = channelExec.getExitStatus();
    channelExec.disconnect();
    session.disconnect();

    if (exitStatus < 0) {
        System.out.println("Done, but exit status not set!");
    } else if (exitStatus > 0) {
        System.out.println("Done, but with error!");
    } else {
        System.out.println("Done!");
    } 
```

如果您这样做，您应该会收到错误消息，告诉您为什么您的命令没有按预期工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-18T20:32:02.047

所以这就是我所做的。
我在*repoUpdate.sh*`exec 2>&1`文件的顶部添加了 ，并按照@DanielMartin 的建议添加了这段代码来读取输出错误，结果如下：

 *```
public void cmremove()
{
    try
    {
        JSch jsch = new JSch();
        Session session = jsch.getSession(user, host, port);
        UserInfo ui = new SUserInfo(pass, null);
        session.setUserInfo(ui);
        session.setPassword(pass);
        session.connect();

        ChannelExec channelExec = (ChannelExec)session.openChannel("exec");

        InputStream in = channelExec.getInputStream();

        channelExec.setCommand("./repoUpdate.sh");
        channelExec.connect();

        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        String line;
        int index = 0;

        while ((line = reader.readLine()) != null)
        {
            System.out.println(++index + " : " + line);
        }

        int exitStatus = channelExec.getExitStatus();
        channelExec.disconnect();
        session.disconnect();
        if(exitStatus < 0){
            System.out.println("Done, but exit status not set!");
        }
        else if(exitStatus > 0){
            System.out.println("Done, but with error!");
        }
        else{
            System.out.println("Done!");
        }
    }
    catch(Exception e)
    {
        System.err.println("Error: " + e);
    }
} 
```

所以这实际上有很大帮助。它确认该命令实际上并没有像我想象的那样正确执行。我在我的 java 输出中得到了这个：

```
run:
1 :  ****Repository update****
2 :  Location: /home/cissys/repo/
3 :  Command: svn update /home/cissys/repo/2.3.0
4 : ./repoUpdate.sh[6]: svn: not found [No such file or directory]
Done!
BUILD SUCCESSFUL (total time: 2 seconds) 
```

然后我尝试修改*repoUpdate.sh*文件，添加 svn 命令的绝对路径（谢谢@ymnk）

```
exec 2>&1
echo  ' ****Repository update****'
echo  ' Location: /home/cissys/repo/'
echo -e ' Command: svn update /home/cissys/repo/2.3.0'

/opt/subversion/bin/svn update /home/cissys/repo/2.3.0 
```

对于我的 java，我得到了我正在寻找的东西：

```
run:
1 :  ****Repository update****
2 :  Location: /home/cissys/repo/
3 :  Command: svn update /home/cissys/repo/2.3.0
4 : At revision 9443.
Done!
BUILD SUCCESSFUL (total time: 3 seconds) 
```

我发现`$PATH`我通过 java 从会话中获得的与我直接在 linux 控制台上获得的不同。所以添加 svn 路径实际上起到了作用。非常感谢您的帮助！*

# algorithm - 遗传算法 - 求解具有硬行和软列约束的矩阵

> ID：11532900
> 
> 赞同：0
> 
> 时间：2012-07-18T00:58:02.943
> 
> 标签：algorithm, matrix, genetic-algorithm

我正在写一个 GP，我需要一些关于交叉和变异操作的建议。GP 正在尝试为具有硬行约束和较软列约束的矩阵找到最佳解决方案。

对于总体中的给定解决方案，行包含来自固定集合的对象类型 ID 的随机组合。GP 正在尝试找到一种解决方案，其中，在布置行之后，如果您计算每列中的 id，则每种类型的数量必须在该 id 的推荐范围内。我编写了一个适应度函数，允许我对解决方案与列约束的接近程度进行评分 - 100% 是所有列都符合规范。

我需要一点建议的地方是我的跨界车。父母是从具有较高健康分数的解决方案中选择的。我有一个单点交叉，我从父亲的顶部切割一些行，从母亲的互补的底部行切割以产生后代。我不能按列切片，因为这几乎总是会使解决方案不可行。

这种方法对于交叉似乎合理吗？我担心没有足够好的遗传“材料”代代相传，最终无法实现。对于突变，我只是计划重新随机化一两行并检查解决方案的新适应度分数。

感谢您在我前进时提供的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T17:58:09.237

在任何遗传算法中，应选择适合于解的编码的交叉方法。如果以特定方式穿越会使许多后代无法生存，那么您不应该那样穿越它们。但是，听起来确实像跨行会阻止您彻底探索搜索空间。

您可以使用几种方法来解决此问题：

1.  正如 VSOverflow 所建议的那样，最初使用“课程”适应度函数，它不会像最初那样严厉地惩罚无效解决方案。文献中也没有缺少这种方法——例如，参见[Punch (1996)](http://garage.cse.msu.edu/papers/evca96.pdf)。
2.  将你的人口分成几个初始亚群，除了偶尔之外，不要让他们互动。这将减慢行的收敛速度，从而使有希望的行不太可能被随机机会杀死。
3.  如果更细粒度的选择甚至可以交换单个单元格（以受控方式，以便之后结果仍然有效），那可能是一个好主意。

# sql - SQL 根据另外两列填充一列值

> ID：11532906
> 
> 赞同：0
> 
> 时间：2012-07-18T00:58:47.177
> 
> 标签：sql, select, view, grouping

这个网站多次成为救命稻草。

再次需要你们的帮助。

我正在创建一个查询，将所有用户分组到各自的组 ID。这是我所拥有的：

```
UserID # UserLastName # GroupID # Section #

  01   #    Smith     #  999    #    1

  02   #    Smith     #  999    #    2

  03   #    White     #  999    #    1

  04   #    White     #  1000   #    2

  05   #    White     #  1000   #    3 
```

等等……

我想要做的是自动将史密斯分配给一个组和部分，而不会覆盖我已经拥有的。该组将类似于 999-S（部分现在是姓氏）。由于白棋只属于 999 的一部分，他只会返回 999-W。

我认为视图甚至简单的选择都应该这样做。

不知道从哪里开始。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:11:19.093

我不确定我是否完全理解你的问题，但试试这个：

```
Create View WithGroupName
AS
SELECT UserID, 
       UserLastname, 
       GroupID, 
       Section, 
       GroupID + '-' + SUBSTRING(UserLastName,1,1) As GroupSection
FROM tableName 
```

# symfony - Symfony2 功能测试认证

> ID：11532907
> 
> 赞同：7
> 
> 时间：2012-07-18T00:58:57.093
> 
> 标签：symfony, phpunit

我正在尝试设置我的功能测试，但在获得身份验证时遇到了问题。我已经阅读了本指南：[http](http://symfony.com/doc/current/cookbook/testing/http_authentication.html) ://symfony.com/doc/current/cookbook/testing/http_authentication.html并实现了他们所说的，但我仍然卡在重定向登录上。我确定这是微不足道的，但我不确定是什么。

**测试控制器**

```
namespace HvH\ClientsBundle\Tests\Controller;

use HvH\ClientsBundle\Controller\ClientsController;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;
use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\HttpFoundation\HeaderBag;
use Symfony\Component\HttpFoundation\Session;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

class ClientsControllerTest extends WebTestCase
{

    public function testGetClientsAction()
    {

        $client = static::createClient();

        $client->request(
           '/clients/123456', 
           'GET', 
            array(), /* request params */ 
            array(), /* files */
            array('X-Requested-With' => "XMLHttpRequest", 'PHP_AUTH_USER' => 'testuser', 'PHP_AUTH_PW' => 'testpass')
        );

        print_r($client->getResponse());
        die();
    }
} 
```

**congif_test.yml**

```
security:
    firewalls:
        secured_area:
            http_basic: 
```

**请求的结果**

```
Symfony\Component\HttpFoundation\RedirectResponse Object
(
    [headers] => Symfony\Component\HttpFoundation\ResponseHeaderBag Object
        (
            [computedCacheControl:protected] => Array
                (
                    [no-cache] => 1
                )

            [cookies:protected] => Array
                (
                    [] => Array
                        (
                            [/] => Array
                                (
                                    [PHPSESSID] => Symfony\Component\HttpFoundation\Cookie Object
                                        (
                                            [name:protected] => PHPSESSID
                                            [value:protected] => 7e3ece541918264de0003e2dcd251833
                                            [domain:protected] => 
                                            [expire:protected] => 1342616045
                                            [path:protected] => /
                                            [secure:protected] => 
                                            [httpOnly:protected] => 
                                        )

                                )

                        )

                )

            [headers:protected] => Array
                (
                    [location] => Array
                        (
                            [0] => http://localhost/login
                        )

                    [cache-control] => Array
                        (
                            [0] => no-cache
                        )

                    [date] => Array
                        (
                            [0] => Wed, 18 Jul 2012 00:54:05 GMT
                        )

                    [content-type] => Array
                        (
                            [0] => text/html
                        )

                    [x-debug-token] => Array
                        (
                            [0] => 5006092d43848
                        )

                )

            [cacheControl:protected] => Array
                (
                )

        )

    [content:protected] => <!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta http-equiv="refresh" content="1;url=http://localhost/login" />

        <title>Redirecting to http://localhost/login</title>
    </head>
    <body>
        Redirecting to <a href="http://localhost/login">http://localhost/login</a>.
    </body>
</html>
    [version:protected] => 1.0
    [statusCode:protected] => 302
    [statusText:protected] => Found
    [charset:protected] => UTF-8
) 
```

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T08:22:49.207

要么使用：

```
$crawler = $client->followRedirect(); 
```

或使该客户端始终重定向：

```
$client->followRedirects(); 
```

相关文档：[http ://symfony.com/doc/current/book/testing.html#redirecting](http://symfony.com/doc/current/book/testing.html#redirecting)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-28T14:01:52.427

您应该能够执行以下操作：

1）“浏览”到页面

```
$client = static::createClient();
$crawler = $client->request('GET', '/login'); 
```

2) 通过提交按钮选择表单

```
$buttonCrawlerNode = $crawler->selectButton('submit'); 
```

3) 将登录凭据作为数据传递并提交表单

```
$form = $buttonCrawlerNode->form();
$data = array('username' => 'u@u.com','password' => 'pass');
$client->submit($form,$data); 
```

4）按照重定向

```
$crawler = $client->followRedirect(); 
```

5）此时您应该能够检查响应代码

```
$this->assertEquals(302, $client->getResponse()->getStatusCode()); 
```

或访问安全页面

```
$crawler = $client->request('GET', '/dashboard');
//do other stuff 
```

# javascript - 在 Mac 和 PC 上解析制表符分隔文件

> ID：11532910
> 
> 赞同：0
> 
> 时间：2012-07-18T00:59:43.240
> 
> 标签：javascript

我以前没有做过太多的脚本。我上过一次 Javascript 课，但主要是为了表单验证。我有一个要解析的制表符分隔文件，只取我需要的某些列，而不是全部。我想知道是否有一种很好的通用语言可以在 PC 或 Mac 上运行。我不知道我是否需要担心每个平台如何解释换行符或其他 ASCII 字符。谢谢！

# ruby-on-rails - 如何在 Rails 中组织复杂的回调？

> ID：11532911
> 
> 赞同：6
> 
> 时间：2012-07-18T00:59:46.087
> 
> 标签：ruby-on-rails, callback

我有一个 Rails 应用程序，它使用了很多回调。所以我有很多函数在多个模型中被调用：after_create 和 :after_commit。

我想知道我现在的做法是不是最好的。

基本上我有以下场景：

```
Class Parent < ActiveRecord::Base

has_many :children

after_create :first_function 
after_commit :last_function

    def first_function
        if !self.processed?
            self.children.create(:name => "Richard The Lion Heart")
            self.processed = true
            self.save!
        end
    end

    def last_function
        if self.processed?
            if !self.processing?
                self.process
                                    self.save!
                self.processing = true
                self.save!
            end
        end
    end

end 
```

所以你可以看到整个事情取决于一些奇怪的双重布尔检查，因为否则每次更新模型时都会调用 second_function 并且它可以由函数本身更新，因此函数会被重复调用。

总的来说，它导致我必须为每个回调引入一个新的布尔检查以触发。它有效，但我不认为它很优雅。我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T15:14:21.523

您应该能够重写该代码——像这样？当然，您的真实代码可能有一些额外的复杂性——另外：*此代码未经测试*。

```
Class Parent < ActiveRecord::Base
  has_many :children

  # only called when a new record is created
  after_create :first_function 

  # only called for updates, not new records, should still be inside the current transaction
  after_update :last_function

  private
    def first_function
      self.children.create(:name => "Richard The Lion Heart")
      # don't call save in here, already in a transaction
    end

    def last_function
      self.process
      # don't call save in here, already in a transaction        
    end

    def process
      # doing stuff ....
      self.children[0].update_attribute(:name, "Beowulf")
    end
end 
```

[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)

> 总共有 12 个回调，这为您提供了巨大的能力来为 Active Record 生命周期中的每个状态做出反应和准备。为现有记录调用 Base#save 的顺序类似，除了每个 _create 回调被相应的 _update 回调替换。

用法

```
p = Parent.new(:foo => "bar")
p.save
p.children[0].name
# => "Richard The Lion Heart"

p.update_attributes(:baz => "fud")
p.children[0].name
# => Beowulf 
```

来自 rails 控制台的 ActiveRecord 回调（使用 awesome_print ap）

```
> ap ActiveRecord::Callbacks::CALLBACKS
[
  [ 0] :after_initialize,
  [ 1] :after_find,
  [ 2] :after_touch,
  [ 3] :before_validation,
  [ 4] :after_validation,
  [ 5] :before_save,
  [ 6] :around_save,
  [ 7] :after_save,
  [ 8] :before_create,
  [ 9] :around_create,
  [10] :after_create,
  [11] :before_update,
  [12] :around_update,
  [13] :after_update,
  [14] :before_destroy,
  [15] :around_destroy,
  [16] :after_destroy,
  [17] :after_commit,
  [18] :after_rollback
] 
```

# java - NameNotFoundException 将 JNDI 数据源映射到本地名称

> ID：11532912
> 
> 赞同：2
> 
> 时间：2012-07-18T00:59:59.277
> 
> 标签：java, jndi, weblogic12c

我无法将 Weblogic (12c) 定义的 JNDI 数据源映射到本地 jndi 名称。

我在 weblogic mysql 数据源中有一个数据源定义为“mysqltestds”，我想将 Web 应用程序中的 i 映射到本地名称“localds”

我的 web.xml 属性是

```
<resource-ref>
   <res-ref-name>localds</res-ref-name>
   <res-type>javax.sql.DataSource</res-type>
   <res-auth>Container</res-auth>
</resource-ref> 
```

与 weblogic.xml

```
<weblogic-web-app>
   <resource-description>
      <res-ref-name>localds</res-ref-name>
      <jndi-name>mysqltestds</jndi-name>lls
   </resource-description>
</weblogic-web-app> 
```

当我使用全局名称“mysqltestds”获取数据源时，它可以正常工作。

```
Context initialContext = new InitialContext();
Object resource = initialContext.lookup("mysqltestds");
dataSource = (DataSource) resource; 
```

但是，当我尝试“localds”时，它会因错误而失败：

```
Context initialContext = new InitialContext();
Object resource = initialContext.lookup("localds");
dataSource = (DataSource) resource; 
```

> javax.naming.NameNotFoundException：无法解析“localds”。解决 ''; 剩下的名字'localds'

任何人都可以帮忙。我遵循了这个 stackOverflow 问题[Tomcat vs Weblogic JNDI Lookup](https://stackoverflow.com/questions/47676/tomcat-vs-weblogic-jndi-lookup)中的指示，但我没有取得任何成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:06:05.943

几件事。
首先要检查的是确保您实际将数据源部署到您正在访问的服务器。因为如果你还没有，你会得到那个确切的信息。

如果您在控制台中查看，请转到服务器页面并单击您正在使用的服务器。

然后页面上有一个名为 jndiViewer 之类的链接，您应该能够浏览您的数据源以确认其位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T23:29:52.247

我最终通过反复试验解决了这个问题。

似乎当您使用本地资源引用时，您必须使用“java:comp/env/..”前缀来引用它，所以当我进行以下更改时，我的 java 代码可以工作：

```
Context initialContext = new InitialContext();
Object resource = initialContext.lookup("java:comp/env/localds");
dataSource = (DataSource) resource; 
```

如果其他人遇到类似问题，希望这很有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-18T12:01:13.727

与这个错误相关的话题真的不多，我最近在从旧的 Jboss 版本迁移到 WildFly 10 时遇到了它。

我发现我可以通过**server.log** grep来发现要在`lookup`.

# c++ - 如何应对慢向量 析构函数？

> ID：11532915
> 
> 赞同：8
> 
> 时间：2012-07-18T01:00:26.580
> 
> 标签：c++, string, performance, vector, destructor

以下问题是否有众所周知的解决方案？

*   你有很多字符串的向量

*   你很高兴地用几十万个字符串填充它，而且速度很快

*   您以任意方式操纵字符串；生活很好。

*   你已经完成了向量；vector 超出了范围，现在你必须去拿些咖啡然后坐下来，而每个字符串都被一个接一个地破坏。

### 编辑：问题解决了！

我刚刚在同一台计算机上的 Linux 上运行了下面的代码，这很好，这让我**找到了解决方案。**结果证明是我的系统造成的——这是我很久以前自己造成的，但我已经忘记了。
解决问题后，时间显*着*减少，甚至比使用 GCC 更好！

虽然这是一个很好的谜题，所以我不会发布答案，而是做其他事情：
我现在不允许在这个问题上悬赏，但如果你认为你知道原因，请试一试。如果它是正确的，我会接受它并给你一个不错的赏金。（如果我忘记给你赏金，请提醒我！）
如果没有人知道，那么我会在一段时间后自己发布。

### 示例代码：

我曾经和任何人一样持怀疑态度，但现在我想人们*确实*有理由认为他们的 STL 很慢！
这在我的笔记本电脑上花了 3.95 秒：（洗牌很关键）

```
#include <cmath>
#include <cstdio>
#include <cstdlib>
#include <ctime>
#include <string>
#include <vector>

int main()
{
    using namespace std;
    srand((unsigned)time(NULL));
    clock_t start;
    {
        vector<string> v(400000);
        for (size_t i = 0; i < v.size(); i++)
        {
            v[i].resize(16 + rand() % 32);  // some variation
        }

        // shuffle
        for (size_t i = 0; i < (size_t)pow((double)v.size(), 1.15); i++)
        {
            size_t j = rand() * (RAND_MAX + 1) + rand();
            swap(v[i % v.size()], v[j % v.size()]);
        }

        printf("Going out of scope...\n"); fflush(stdout);
        start = clock();
    }
    clock_t end = clock();
    printf("%u ms\n", (end - start) * 1000 / CLOCKS_PER_SEC);
    return 0;
} 
```

在我看来，这个程序在内部使用了一些 O(n ² ) 算法，无论是在 Visual C++ 中还是在 Windows 中。不知道发生了什么，但很有趣……

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T01:08:47.343

将自定义分配器与解除分配一起使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-27T07:05:09.363

好吧，既然没人知道...

这是因为我的系统中打开了[堆尾检查。](http://msdn.microsoft.com/en-us/library/windows/hardware/ff542921.aspx)一旦我删除它，代码很快就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:40:20.870

为什么不动态创建向量本身，以便可以使用引用计数智能指针对其进行管理。然后，您可以确保最后一次引用它的线程不是 UI 线程，因此当 UI 线程超出范围时，它不是执行处理的线程。

您甚至可以操纵执行处理的线程的优先级，使其较低并且不会严重影响其余线程 - 它会确保 UI 线程被安排在较低优先级线程的前面。

**注意：我从未尝试过，但我不明白为什么它不起作用 - 但花时间在上面，风险自负！:)**

# python - 设置 matplotlib 图的父级

> ID：11532917
> 
> 赞同：2
> 
> 时间：2012-07-18T01:00:32.603
> 
> 标签：python, matplotlib, pyqt

我在设置以下代码生成的图形时遇到问题。当主窗口关闭时它不会关闭。我在主窗口中使用`self.setAttribute(Qt.WA_DeleteonClose)`过。`smd`调用函数时，主窗口对象作为父对象传递。即使我已经明确设置了画布的父级，当主窗口关闭时，生成的图也不会关闭。

```
def smd(self,parent):

    from pylab import *
    import matplotlib

    from matplotlib.backends.backend_qt4agg import FigureCanvasQTAgg as FigureCanvas

    from matplotlib.backends.backend_qt4agg import NavigationToolbar2QTAgg as NavigationToolbar

    from matplotlib.figure import Figure
    import pylab as p

    sm = [1,2,3]
    fig = p.figure()

    ax = fig.add_subplot(111)
    ax.bar(range(len(sm)),sm,align='center')
    ax.set_xticks(range(len(sm)))

    canvas = FigureCanvas(fig)
    canvas.setParent(parent)
    #p.setParent(self)
    canvas.draw()
    fig.setParent(parent)
    print "parent is ", parent, canvas.parent()

    p.show() 
```

# r - R中缺少拟合值的逻辑回归列联表

> ID：11532920
> 
> 赞同：1
> 
> 时间：2012-07-18T01:00:49.060
> 
> 标签：r, regression

在 R 中的 R 逻辑回归中，我试图创建一个列联表，将拟合值与观察值进行比较（即 0 或 1 个实际值与 0 或 1 个拟合值）。但是，我的数据在各种变量的各行中都有缺失值，因此拟合值向量的长度比原始数据集短。这是一个例子：

```
test <- data.frame(male=c(1,0,1,0,0,1,1,0,1,0,0,1), 
                 height=c(58,100,NA,19,20,69,58,24,46,19,97,69))

model <- glm(male~height, family=binomial("logit"),data=test)

check_model <- table(test$male,fitted.values(model)>0.5) 
```

> 表中的错误（test$male，fitted.values（model）> 0.5）：所有参数必须具有相同的长度

有谁知道仅在模型没有的行中输入实际值（test$male）的`fitted.value`方法`NULL`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:14:22.827

如果您查看，`?glm`您会看到它返回`model.frame` （默认情况下）作为`glm`对象的组件

这包含用于拟合模型的数据

因此你可以使用

```
table(model.frame(model)$male, fitted(model) > 0.5) 
```

或者

```
table(model$model$male, fitted(model) > 0.5) 
```

返回您需要的结果

```
##      FALSE TRUE
##   0     4    2
##   1     3    2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T02:34:29.410

```
> table(test$male[complete.cases(test)], fitted(model)>0.5)

    FALSE TRUE
  0     4    2
  1     3    2 
```

# android - 使用溢出自动时，android上的锚链接不起作用

> ID：11532922
> 
> 赞同：1
> 
> 时间：2012-07-18T01:00:52.880
> 
> 标签：android, browser, overflow, anchor, hyperlink

我有一个非常简单的页面，其中包含一个锚链接：

[http://iklimt.com/test/public/life/index2.html](http://iklimt.com/test/public/life/index2.html)

它可以在除 Android 浏览器之外的所有浏览器上正常工作。如果我`overflow:auto`从主目录中删除设置，`<div>`那么它可以工作，但我不希望这样。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:07:10.100

`overflow: auto`并且`overflow:scroll`不受此处所述的 android 浏览器支持：[https](https://code.google.com/p/android/issues/detail?id=2911) ://code.google.com/p/android/issues/detail?id= 2911 如果您需要，您的解决方案是在 javascript 中插入一些自定义滚动库想在任何地方都达到相同的效果...建议[jScrollPane](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

# opencv - OpenCV bitwise_and + 掩码

> ID：11532924
> 
> 赞同：6
> 
> 时间：2012-07-18T01:01:16.033
> 
> 标签：opencv

我有这个面具：

![面具](../Images/112d099b17810a47fa188f5ae1c8510b.png)

假设我想用另一个图像制作一个 bitwise_and 来填充白色，这样可以：

```
cv::bitwise_and(srcImage, mask, dstImage, [mask???]); 
```

现在，生成的图像显示如下：

![图像 + 蒙版](../Images/1a78b612c91c322895c14266923843e1.png)

这很好，花花公子，但我想从结果中减去黑色。我已经看到 bitwise_and 也接受 8 位单通道图像，我不确定它的作用。我想如果它是 0 那么它就让它通过，否则它会忽略它。

那么我将如何使用相同的掩码将其转换为 8 位图像并使用它来去除结果的黑色？我想要相同的图像，但基本上没有黑色边框。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T13:18:04.327

解决方案非常简单。由于我对 openCV 库知之甚少，因此我没有为该任务使用正确的函数。我仍然不确定为什么在将掩码传递给 bitwise_and 方法时应用程序崩溃了。

基本上你所要做的就是：

```
image.copyTo(dst, mask); 
```

这会将图像复制到 dst，甚至处理垫子的细节，使其具有与“图像”相同的属性。只需确保掩码为 8 位单通道图像。这样，当您调用该方法时，只有通过掩码的像素将被复制到 dst。

这是有关更多信息的文档链接：[copyTo](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=copyto#void%20Mat%3a%3acopyTo%28OutputArray%20m%29%20const)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-06T13:22:05.590

只需创建一个比 fox_image 更大的新画布

然后使用“AND”方法

或者，您可以将第一张图像的黑色部分转换为白色：0 ---255

那么问题就解决了。

# php - 如何在 codeigniter 中启用短标签语法？

> ID：11532925
> 
> 赞同：0
> 
> 时间：2012-07-18T01:01:15.697
> 
> 标签：php, codeigniter, syntax, codeigniter-2

我有一个使用

```
<?=$variable?> 
```

语法而不是

```
<?php echo $variable; ?> 
```

我想让它在我的本地主机上工作。我需要在我的 php.ini 文件中启用什么来执行此操作？

请注意，我不是在问如何启用 short_open_tag，而是在问如何在 CodeIgniter 中启用它。

提前致谢..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T01:05:54.923

在 CodeIgniter 中`config.php`：

```
/*
|--------------------------------------------------------------------------
| Rewrite PHP Short Tags
|--------------------------------------------------------------------------
|
| If your PHP installation does not have short tag support enabled CI
| can rewrite the tags on-the-fly, enabling you to utilize that syntax
| in your view files.  Options are TRUE or FALSE (boolean)
|
*/
$config['rewrite_short_tags'] = FALSE; 
```

这也意味着它不依赖于主机。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T01:02:56.070

阅读此内容：[PHP Short Open Tag：方便快捷或更改安全性？](http://perishablepress.com/php-short-open-tag/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T07:05:45.550

1.  在您的 php 安装目录中搜索 php.ini 文件
2.  用任何文本编辑器打开它，然后再次搜索“short_open_tag”，如果你找到像“;short_open_tag = Off”这样的行，然后删除“;” 并重新启动您的 apache 服务器它将工作。但我强烈要求您不要使用 php 短标签，因为并非所有 Web 服务器都接受 php 短标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T01:20:36.723

最好在服务器上启用短格式标签。这将阻止 CodeIgniter 重写您的标签。

在 PHP 安装目录中找到 PHP.ini 文件。搜索“short_open_tag”。您将在“语言选项”下看到它被多次引用。找到未注释的并将其更改为打开。

INI 看起来像这样：

```
;;;;;;;;;;;;;;;;;;;;
; Language Options ;
;;;;;;;;;;;;;;;;;;;;

; Enable the PHP scripting language engine under Apache.
; http://php.net/engine
engine = On

; This directive determines whether or not PHP will recognize code between
; <? and ?> tags as PHP source which should be processed as such. It's been
; recommended for several years that you not use the short tag "short cut" and
; instead to use the full <?php and ?> tag combination. With the wide spread use
; of XML and use of these tags by other languages, the server can become easily
; confused and end up parsing the wrong code in the wrong context. But because
; this short cut has been a feature for such a long time, it's currently still
; supported for backwards compatibility, but we recommend you don't use them.
; Default Value: On
; Development Value: Off
; Production Value: Off
; http://php.net/short-open-tag
;short_open_tag = Off
; XAMPP for Linux is currently old fashioned
 short_open_tag = On 
```

# jquery - JQuery 幻灯片在 IE/Chrome/Safari 中有效，但在 FireFox 中无效

> ID：11532926
> 
> 赞同：1
> 
> 时间：2012-07-18T01:01:15.970
> 
> 标签：jquery, firefox, slideshow

我的页面位于[http://mureka.byethost32.com/test2.html](http://mureka.byethost32.com/test2.html)

您会注意到在 Chrome/IE/Safari 中，横幅每 3 秒更改一次。但是，在 Firefox 13.0.1 中，横幅不会每 3 秒更改一次。

我也试过 Firefox 14.0，还是不行。

jQuery 版本是 1.7.2

jQuery 工具是 1.2.7

我不知道我的 JavaScript 代码哪里出错了。你能给我任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T05:56:47.993

您的 JavaScript 代码永远不会运行，因为您的`<script>`标签是：

```
<script type="text/jscript" language="JavaScript"> 
```

注意不正确的`type`属性。应该是`text/javascript`。

# javascript - 将 Jquery 项目迁移到 Magento

> ID：11532927
> 
> 赞同：5
> 
> 时间：2012-07-18T01:01:18.020
> 
> 标签：javascript, jquery, magento

我最近完成了 Chris Converse 在 Lynda.com 上的一门课程，其中介绍了如何[使用 Jquery 创建交互式地图](http://www.lynda.com/jQuery-1-5-tutorials/Create-an-Interactive-Map-with-jQuery/87636-2.html?srchtrk=index:1%0Alinktypeid:2%0Aq:interactive%20map%0Apage:1%0As:relevance%0Asa:true%0Aproducttypeid:2)。完成后，我留下以下文件：

*   索引.html
*   交互式地图.css
*   交互式地图.js
*   jquery-1.5.min

和图像

现在我想把这个项目放到我的 magento 站点的一个 CMS 页面中。在做了一些研究之后，我收集了以下信息：

1.  转到 /js 并添加一个名为 jquery 的新文件夹，并将 jquery-1.5.min 放在那里
2.  打开这个文件并在最后添加以下代码行：`var $j=jQuery.noConflict();`
3.  转到 interactive_map.js 并将所有 $ 替换为 $j
4.  转到 app/design/frontend/default/mytheme/layout/page.xml 下的我的 page.xml 文件
5.  添加这行代码：

    ```
     <action method="addJs"><script>jquery/jquery-1.5.noConflict.min.js</script></action> 
    ```

另外添加这行代码：

```
<action method="addItem"><type>skin_js</type><name>js/interactive_map.js</name></action> 
```

6.  将interactive_map.css中的信息复制到skin/frontend/default/mytheme/css/styles.css。将地图和点的 css 图像链接更改为 mytheme/images
7.  转到 skin/frontend/default/mytheme/js 并添加 my_interactivemap.js 文件
8.  将所有图像移动到 skin/frontend/default/mytheme/images
9.  创建一个 CMS 页面，并在内容字段中，粘贴 index.html 文件中的代码
10.  在 CMS 页面中，转到设计，然后在更新布局 XML 字段中添加：

    ```
     <reference name="head">
             <action method="addItem">
                <type>skin_js</type><name>js/interactive_map.js</name>
             </action>
           </reference> 
    ```

测试页在[这里](http://www.weknowthegame.com/shop/testpage)。它的一部分工作，比如点击点，它们会改变颜色，但表单不会过滤任何数据，也不会显示任何图像或描述。它可能是 html 内容，但我不能确定。我现在几乎被困住了，希望在安装这个项目方面得到一些帮助。

如果可以的话请帮忙，我真的很难过。

这是javascript：

```
// JavaScript Document

$j(document).ready(function() {
// begin Ready

    //...................................................
    // When the form changes
    $j('#mapForm').change(function() {

        var selectedContinent = $j('#mapForm option:selected').val();
        if (selectedContinent == 'ALL'){
            $j('a.dot').slideDown(1000);
        }else{
            $j('a.dot[continent = "'+selectedContinent+'"]').slideDown(1000);
            $j('a.dot[continent != "'+selectedContinent+'"]').slideUp(1000);
        }

    });

    //...................................................
    // When a dot is clicked
    $j('a.dot').click(function(){

        $j('a.dot').removeClass('selected');
        $j(this).addClass('selected');

        var city = '.city_detail#' + $j(this).attr('city');
        var htmlCode = $j(city).html();

        $j('.detail_container').fadeOut(500, function(){
            $j('.detail_container .city_detail').html(htmlCode);
            $j('.detail_container').fadeIn(500);
        });

    });

// end Ready
}); 
```

这是CSS

```
/*Interactive map*/
.map_container {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 12px;
    color: #000;
    background-image: url("../images/template/map.png");
    background-repeat: no-repeat;
    background-position: 0px 0px;
    float: right;
    height: 325px;
    width: 760px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 0px;
    margin-left: 20px;
    position: relative;
}
.map_container a.dot {
    display: block;
    height: 20px;
    width: 20px;
    background-image: url("../images/template/dots.png");
    background-repeat: no-repeat;
    background-position: 0px 0px;
    cursor: pointer;
    position: absolute;
}
.map_container .form_continent {
    position: absolute;
    left: 30px;
    top: 265px;
}
.map_container .detail_container {
    position: absolute;
    height: 260px;
    width: 240px;
    left: 480px;
    top: 35px;
}
.map_container .city_detail {
    width: 230px;
    padding-top: 10px;
    padding-right: 0px;
    padding-bottom: 0px;
    padding-left: 12px;
    border-top-width: 1px;
    border-left-width: 1px;
    border-top-style: solid;
    border-left-style: solid;
    border-top-color: #A9B5C8;
    border-left-color: #A9B5C8;
    position: absolute;
    top: 0px;
    color: #FFF;
    border-radius: 10px;
    -moz-border-radius: 10px
    -webkit-border-radius: 10px;
}
.map_container .clear_both {
    clear: both;
}
.map_container .city_photo {
    float: left;
    margin-top: 0px;
    margin-right: 15px;
    margin-bottom: 0px;
    margin-left: 0px;
    border: 1px solid #FFF;
    border-radius: 8px;
    -moz-border-radius: 8px;
    -webkit-border-radius: 8px;
    box-shadow: 0px 5px 3px #424274;
    -moz-box-shadow: 0px 5px 3px #424274;
    -webkit-box-shadow: 0px 5px 3px #424274;
}
.map_container .city_info {
    float: left;
    width: 130px;
    color: #FFF;
}
.map_container .city_info h2 {
    font-size: 18px;
    margin: 0px;
}
.map_container .city_info h3 {
    font-size: 12px;
    text-transform: uppercase;
    color: #2C3748;
    letter-spacing: 4px;
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 12px;
    margin-left: 0px;
}
.map_container .city_info p {
    margin-top: 0px;
    margin-right: 0px;
    margin-bottom: 12px;
    margin-left: 0px;
}
.city_detail_container {
    display: none;
}

.map_container a.dot:hover {
    background-position: 0px -20px;
}
.map_container a.dot.selected {
    background-position: 0px -40px;
} 
```

和 html

```
 <div class="map_container"><a class="dot" style="left: 178px; top: 165px;"></a> <a class="dot" style="left: 240px; top: 73px;"></a> <a class="dot" style="left: 427px; top: 180px;"></a> <a class="dot" style="left: 412px; top: 94px;"></a> <a class="dot" style="left: 274px; top: 167px;"></a> <a class="dot" style="top: 99px; left: 113px;"></a> <a class="dot" style="top: 83px; left: 87px;"></a> <a class="dot" style="top: 173px; left: 387px;"></a> <a class="dot" style="top: 102px; left: 271px;"></a> <a class="dot" style="top: 134px; left: 153px;"></a> <a class="dot" style="top: 93px; left: 141px;"></a> <a class="dot" style="top: 115px; left: 375px;"></a> <a class="dot" style="top: 89px; left: 386px;"></a> <a class="dot" style="top: 195px; left: 153px;"></a> <a class="dot" style="top: 96px; left: 320px;"></a> <a class="dot" style="top: 113px; left: 343px;"></a> <a class="dot" style="top: 110px; left: 299px;"></a> <a class="dot" style="top: 84px; left: 257px;"></a> <a class="dot" style="top: 76px; left: 273px;"></a> <form id="mapForm" class="form_continent" method="post"> <select id="continent" name="continent"> <option value="AF">Africa</option> <option value="AS">ASia</option> <option value="AU">Australia</option> <option value="EU">Europe</option> <option value="NA">North America</option> <option value="ME">Middle East</option> <option value="SA">South America</option> <option value="ALL">Show all continents</option> </select> </form> <!--City details     --->
<div class="detail_container">
<div class="city_detail">
<div class="city_info" style="width: 200px;">
<h3>Choose a city...</h3>
<p>Description goes here...</p>
</div>
</div>
</div>
</div>
<div class="city_detail_container"><!-- City -->
<div id="sydney" class="city_detail"><img class="city_photo" src=".../images/cities/sydney.jpg" alt="sydney" width="75" height="75" />
<div class="city_info">
<h2>Sydney</h2>
<h3>Australia</h3>
<p>Pellentesque nibh felis, fddfdflitora torquent per conubia nostra, per inceptos hymenaeos commodo in interdum vitae leo.</p>
</div>
</div>
<!-- City -->
<div id="london" class="city_detail"><img class="city_photo" src="images/cities/london.jpg" alt="sydney" width="75" height="75" />
<div class="city_info">
<h2>London</h2>
<h3>Europe</h3>
<p>Curabitur fringilla. Nunc est ipsum, pretium quis, dapibus sed, varius non, lectus. Proin a quam. Praesent lacinia, eros quis aliquam porttitor, urna lacus volutpat urna, ut fermentum neque mi egestas dolor.</p>
</div>
</div>
<!-- City -->
<div id="riodejaneiro" class="city_detail"><img class="city_photo" src="images/cities/riodejaneiro.jpg" alt="rio de janerio" width="75" height="75" />
<div class="city_info">
<h2>Rio de Janerio</h2>
<h3>South America</h3>
<p>Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper, lectus nunc ullamcorper orci, fermentum bibendum enim nibh eget ipsum.</p>
</div>
</div>
<!-- City -->
<div id="tokyo" class="city_detail"><img class="city_photo" src="images/cities/tokyo.jpg" alt="brazil" width="75" height="75" />
<div class="city_info">
<h2>Tokyo</h2>
<h3>Asia</h3>
<p>Donec porttitor ligula eu dolor. Maecenas vitae nulla nam consectetuer. Lectus nunc ullamcorper orci, fermentum bibendum enim nibh eget ipsum.</p>
</div>
</div>
<!-- City -->
<div id="johannesburg" class="city_detail"><img class="city_photo" src="images/cities/johannesburg.jpg" alt="johannesburg" width="75" height="75" />
<div class="city_info">
<h2>Johannesburg</h2>
<h3>Africa</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="johannesburg" class="city_detail"><img class="city_photo" src="images/cities/johannesburg.jpg" alt="johannesburg" width="75" height="75" />
<div class="city_info">
<h2>Johannesburg</h2>
<h3>Africa</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="dallas" class="city_detail"><img class="city_photo" src="images/cities/dallas.jpg" alt="dallas" width="75" height="75" />
<div class="city_info">
<h2>Dallas</h2>
<h3>North America</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="seattle" class="city_detail"><img class="city_photo" src="images/cities/seattle.jpg" alt="seattle" width="75" height="75" />
<div class="city_info">
<h2>Seattle</h2>
<h3>North America</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="perth" class="city_detail"><img class="city_photo" src="images/cities/perth.jpg" alt="perth" width="75" height="75" />
<div class="city_info">
<h2>Perth</h2>
<h3>Australia</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="tripoli" class="city_detail"><img class="city_photo" src="images/cities/tripoli.jpg" alt="tripoli" width="75" height="75" />
<div class="city_info">
<h2>Tripoli</h2>
<h3>Africa</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="bogota" class="city_detail"><img class="city_photo" src="images/cities/bogota.jpg" alt="bogota" width="75" height="75" />
<div class="city_info">
<h2>Bogot&aacute;</h2>
<h3>South America</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="newyorkcity" class="city_detail"><img class="city_photo" src="images/cities/newyorkcity.jpg" alt="newyorkcity" width="75" height="75" />
<div class="city_info">
<h2>New York City</h2>
<h3>North America</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="phnompenh" class="city_detail"><img class="city_photo" src="images/cities/phnompenh.jpg" alt="phnompenh" width="75" height="75" />
<div class="city_info">
<h2>Phnom Penh</h2>
<h3>Asia</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper pharetra posuere.</p>
</div>
</div>
<!-- City -->
<div id="tianjin" class="city_detail"><img class="city_photo" src="images/cities/tianjin.jpg" alt="tianjin" width="75" height="75" />
<div class="city_info">
<h2>Tianjin</h2>
<h3>Asia</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="puntaarenas" class="city_detail"><img class="city_photo" src="images/cities/puntaarenas.jpg" alt="puntaarenas" width="75" height="75" />
<div class="city_info">
<h2>Punta Arenas</h2>
<h3>South America</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="buxoro" class="city_detail"><img class="city_photo" src="images/cities/buxoro.jpg" alt="buxoro" width="75" height="75" />
<div class="city_info">
<h2>Buxoro</h2>
<h3>Middle East</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="anakapalle" class="city_detail"><img class="city_photo" src="images/cities/anakapalle.jpg" alt="anakapalle" width="75" height="75" />
<div class="city_info">
<h2>Anakapalle</h2>
<h3>Middle East</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="albahr" class="city_detail"><img class="city_photo" src="images/cities/albahr.jpg" alt="albahr" width="75" height="75" />
<div class="city_info">
<h2>Al Bahr</h2>
<h3>Middle East</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="rome" class="city_detail"><img class="city_photo" src="images/cities/rome.jpg" alt="rome" width="75" height="75" />
<div class="city_info">
<h2>Rome</h2>
<h3>Europe</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
<!-- City -->
<div id="warszawa" class="city_detail"><img class="city_photo" src="images/cities/warszawa.jpg" alt="warszawa" width="75" height="75" />
<div class="city_info">
<h2>Warszawa</h2>
<h3>Europe</h3>
<p>Sed quis velit. Nulla facilisi. Nulla libero. Vivamus pharetra posuere sapien. Nam consectetuer. Sed aliquam, nunc eget euismod ullamcorper.</p>
</div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T08:41:37.137

您的测试页面上存在 javascript 错误。

`<script type="text/javascript" src="https://apis.google.com/js/plusone.js">`在另一个`<script>`标签内。

尝试移动`<script type="text/javascript" src="https://apis.google.com/js/plusone.js">`到结束标记 ( `</script>`) 之后，看看它是否有效。

# android - android练习题

> ID：11532928
> 
> 赞同：1
> 
> 时间：2012-07-18T01:01:37.507
> 
> 标签：android, mobile

我一直在网上搜索android练习问题，但找不到任何结果。我正在寻找实践问题，如果有人有一些想法或资源，对他/她表示谦虚的感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:37:45.763

我个人推荐的是做很多“Hello World”类型的教程。正如汤姆所说，你不需要记住。我会看[This Site](http://www.coreservlets.com/android-tutorial/) 这个网站提供教程项目以继续接触 android，但也提供“练习”。这些基本上是测验，而不是回答问题，您设计应用程序或功能以实现所要求的目的。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T03:35:03.020

试试 www.practiceit.com 它会编译和检查您的代码，并使用 Marty Stepp 的 Building Java Programs 中的问题。我推荐它。

# asp.net - asp.net ajax 计时器控件触发两次然后停止

> ID：11532931
> 
> 赞同：2
> 
> 时间：2012-07-18T01:02:12.310
> 
> 标签：asp.net, ajax, vb.net, timer, controls

基本上我只是想实现一个计时器控件，它将为我交换横幅，然后在更新面板中进行更新。然而，计时器只影响我的页面一次，并且似乎触发了两次（我在表单上放置了一个标签，并尝试在每次更新时增加一，然后它跳到 2 然后停止）。

```
 <asp:ContentPlaceHolder ID="cphHead" runat="server">

                    <asp:ScriptManager ID="ScriptManager1" runat="server">
                    </asp:ScriptManager>
                    <asp:Timer ID="Timer1" runat="server" Interval="6000" OnTick="Timer1_Tick">
                    </asp:Timer>
                    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                        <Triggers>
                            <asp:AsyncPostBackTrigger ControlID="Timer1" />
                        </Triggers>
                        <ContentTemplate>
                            <asp:Image ID="Image1" runat="server" ImageUrl="~/images/banner_2.jpg" />

                            <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                        </ContentTemplate>
                    </asp:UpdatePanel>

                </asp:ContentPlaceHolder> 
```

还有我的代码

```
Partial Class ASPTravel
    Inherits System.Web.UI.MasterPage

    Private intnum As Integer = 0
    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    End Sub

    Protected Sub LoginStatus1_LoggingOut(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.LoginCancelEventArgs) Handles LoginStatus1.LoggingOut
        Session.Abandon()
    End Sub

    Protected Sub Timer1_Tick(ByVal sender As Object, ByVal e As System.EventArgs) Handles Timer1.Tick

            intnum = intnum + 1
            Label1.Text = CStr(intnum)
            ' If intnum = 0 Then
            '  Image1.ImageUrl = "~/images/banner_1.jpg"
            '  intnum = 1
            ' Else
            '  Image1.ImageUrl = "~/images/banner_2.jpg"
            'End If
            Dim n As Integer = New Random().Next(1, 2)
            Image1.ImageUrl = "~/images/banner_" + n.ToString() + ".jpg"

    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T05:21:23.757

从后面的代码中删除`Handles Timer1.Tick`它会正常工作。我已经检查过了。像这样。

```
 Protected Sub Timer1_Tick(ByVal sender As Object, ByVal e As System.EventArgs) 
```

参考：[http ://forums.asp.net/t/1642896.aspx/1](http://forums.asp.net/t/1642896.aspx/1)

也是用户视图状态而不是变量。在 asp.net 中的每次回发时都会初始化变量。因此，与其将值保存在变量中，不如`Private intnum As Integer = 0`将其保存在这样的视图状态中

```
ViewState["intnum"] = 0 
```

并在您的计时器点击事件中。

```
ViewState["intnum"]= (int) ViewState["intnum"] + 1
Label1.Text = CStr(ViewState["intnum"]) 
```

# facebook - facebook如何嵌入他人的媒体？

> ID：11532933
> 
> 赞同：0
> 
> 时间：2012-07-18T01:02:25.313
> 
> 标签：facebook, embed, facebook-opengraph

我正在构建一个应用程序，您可以获取 youtube、vimeo、blip.tv 等网站的视频链接，并像 facebook 一样自行嵌入。

当您在 facebook 上发布该网站的链接时，此链接将嵌入时间线/评论中，您无需转到其他页面即可播放此视频。

这是怎么做到的？Facebook 将所有服务分开并单独处理这些服务，还是存在第三方服务对您自己的媒体实施的协议似乎嵌入在 facebook 等网站中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:23:20.257

您的页面必须实现某些**OpenGraph**概念。更多信息可以在这里找到：

[https://developers.facebook.com/docs/opengraph/](https://developers.facebook.com/docs/opengraph/)

这是有关如何将应用程序/页面与 OpenGraph 集成的分步教程：

[https://developers.facebook.com/docs/opengraph/tutorial/](https://developers.facebook.com/docs/opengraph/tutorial/)

如果您想在自己的网页上拥有类似的功能，可以查看[oEmbed](http://www.oembed.com/)和[embed.ly](http://embed.ly/)。

# javascript - 使用 Javascript 将索引添加到 IndexedDB 中预先存在的 ObjectStore

> ID：11532935
> 
> 赞同：11
> 
> 时间：2012-07-18T01:02:49.767
> 
> 标签：javascript, indexeddb

我已经看到了多个 JavaScript 示例，`createIndex`它们在创建 ObjectStore 之后直接定义 ObjectStore 索引，如下所示：

```
var objectStore = ixDb.createObjectStore(osName, { keyPath: pkName, autoIncrement: autoIncrement });

objectStore.createIndex("name", "name", { unique: false }); 
```

谁能告诉我你如何`createIndex`在不打电话的情况下在预先存在的桌子上使用`createObjectStore`？我想这里真正的问题是如何在不使用的情况下获得对 objectStore 的引用`createObjectStore`？

我尝试了以下几种变体，但没有运气：

```
var objectStore = window.IDBTransaction.objectStore(ObjectStoreName);
var index = objectStore.createIndex(ixName, fieldName, { unique: unique, multiEntry: multiEntry }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T15:43:17.533

您在 期间执行此操作`onupgradeneeded`，这应该与您首先创建对象存储的位置相同。在那里，您可以执行升级它所需的任何适当操作，例如创建新索引。[这是一个例子。](http://blogs.microsoft.co.il/blogs/gilf/archive/2012/02/23/updating-an-existing-indexeddb-objectstore.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T20:53:20.537

Chrome 目前不支持 onupgradeneeded 事件。如果您想使用旧的或新的 W3 规范获取对 ObjectStore 的引用，这是一种可能的解决方法，通过使用旧的 setVersion 命令或新的 onupgradeneeded 事件的 onsuccess 事件：

```
var ixDb; 
var ixDbRequest; 
var ixDbVersionTansaction;

//Check to see if we have a browser that supports IndexedDB
if (window.indexedDB) {

ixDbRequest = window.indexedDB.open(dbName, dbVersion);

//For browsers like chrome that support the old set version method
ixDbRequest.onsuccess = function (e) {

    ixDb = ixDbRequest.result || e.result;

    if (typeof ixDb.setVersion === "function") {

        //Put your version checking logic here 

        if (oldVersion < newVersion) {
            var verRequest = ixDb.setVersion(newVersion);

            verRequest.onerror = function (e) {
                //handling error logic here
            }

            verRequest.onsuccess = function (e) {
                //Get a reference to the version transaction 
                //from the old setVersion method.
                ixDbVersionTansaction = verRequest.result;
                //Create database using function provided by the user. 
                UserFunction();
            }
        }
    }
}; 

ixDbRequest.onupgradeneeded = function (e) {
    //FF uses this event to fire the transaction for upgrades.  
    //All browsers will eventually use this method. Per - W3C Working Draft 24 May 2012
    ixDb = ixDbRequest.result || e.currentTarget.result;

    //Get a reference to the version transaction via the onupgradeneeded event (e)
    ixDbVersionTansaction = e.currentTarget.transaction;

    //Create database using function provided by the user. 
    UserFunction();
};

UserFunction(){
    //ObjectStore is accessed via ixDbVersionTansaction variable 
    // in either instance (transaction..objectStore("ObjectStoreName"))
    var ObjectStore = ixDbVersionTansaction.objectStore("ObjectStoreName");
    var index = ObjectStore.createIndex("ixName", "fieldName");
} 
```

# php - 验证 AP WebFeed 请求

> ID：11532938
> 
> 赞同：4
> 
> 时间：2012-07-18T01:03:12.163
> 
> 标签：php, authentication, post

我正在尝试实现一种 PHP 方法来验证对美联社提要的请求。从他们的文档中：

> 为了验证所有提要和内容请求，AP WebFeeds 系统使用 HTTP 基本身份验证，这是目前联合提要的标准。大多数提要阅读器和阅读器组件允许提前配置用户凭据，并将它们传递到标头而不是 URL。
> 
> **重要提示**：直接在 URL 中传递凭据目前被广泛阻止。有关详细信息，请参阅 Microsoft 的安全公告，网址为[http://www.microsoft.com/technet/security/bulletin/MS04-004.mspx](http://www.microsoft.com/technet/security/bulletin/MS04-004.mspx)。
> 
> 您可以配置读取器或组件以创建具有以下格式的名称/值的身份验证标头：
> 
> `("Authorization", "Basic " + {Encoded_username_and_password})`
> 
> 其中`{Encoded_username_and_password}`替换为字符串“用户名：密码”中字节的 Base64 编码。
> 
> 如果您正在编写自己的客户端代码来下载提要，请使用内置于您的编程语言库中的 HTTP 基本身份验证。HTTP 基本身份验证在大多数平台上都可用；例如，Perl、PHP、C 或 Java。

我的尝试是：

```
 /**
 * Begin Transaction
 */

$url = "http://syndication.ap.org/AP.Distro.Feed/GetFeed.aspx?idList=" . implode(',', $idList) . "&idListType=products&maxItems=25";    
$auth = "Authorization=Basic " . base64_encode($user . ":" . $pass);    
$ch = curl_init();  // initialize curl handle   
curl_setopt($ch, CURLOPT_URL, $url); // set url to post to  
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable   
curl_setopt($ch, CURLOPT_POST, 1); // set POST method   
curl_setopt($ch, CURLOPT_POSTFIELDS, $auth); // add POST fields 
$result = curl_exec($ch); // run the whole process  
curl_close($ch);

/**
 * End Transaction
 */

var_dump($result); 
```

这给了我：

```
string(405) "

    Authentication
    FeedServer
    Authentication Failed on GetFeed

    Authentication denied no auth credentials detected

" 
```

在 PHP 中验证此请求的正确方法是什么？

（[另请参阅提供的 ASP.NET 和 Java 示例](http://i.imgur.com/dQ78z.png)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:27:43.680

[授权是 HTTP 标头](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8)而不是 POST 参数。您使用`CURLOPT_POSTFIELDS`which 设置请求的正文。相反，您需要使用它来设置它[`CURLOPT_HTTPHEADER`](http://php.net/manual/en/function.curl-setopt.php#refsect1-function.curl-setopt-parameters)（它的条目在列表中非常靠后）：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Authorization: Basic ' . base64_encode($user . ":" . $pass))); 
```

如果它还不是很明显，你不需要把它作为一个发布请求（除非 API 需要它），所以你可以删除：

```
curl_setopt($ch, CURLOPT_POST, 1); // set POST method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T12:21:33.440

您也可以使用以下代码：

```
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_USERPWD, $user . ':' . $pass); 
```

我刚刚尝试过，效果很好。

希望它有所帮助。问候。

# javascript - 如何解析 URL 进行搜索？

> ID：11532942
> 
> 赞同：1
> 
> 时间：2012-07-18T01:04:13.060
> 
> 标签：javascript

我不确定这是否可以在没有任何服务器的情况下在 javascript 中完成。

基本上，我使用 Google Maps API 在同一页面上生成某些搜索结果，并且我希望能够创建一个共享按钮，以便当用户单击它时，它将生成一个自定义链接，如 www.example。 com/?search=阿纳海姆。然后，当用户或其他用户将该 url 键入地址栏中时，它将产生一个包含这些结果的页面。

现在，我只在一个 html 页面上进行搜索，我不确定如何通过输入链接来更改我的一个 html 页面的默认主页位置？或者，这是不可能的，我应该做点别的吗？

任何建议将不胜感激。谢谢！！

编辑：这可能有点让人难以理解。但基本上，我希望能够以与谷歌地图在您单击链接按钮时生成链接的方式相同的方式生成链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:17:33.480

What you are looking for is to generate 'Deeplinks'

[http://en.wikipedia.org/wiki/Deep_linking](http://en.wikipedia.org/wiki/Deep_linking)

You can do it on the client-side.

I would suggest using a good JS framework that interprets the url correctly and produces the same results.

E.g.

[http://angularjs.org/](http://angularjs.org/)

[http://backbonejs.org/](http://backbonejs.org/)

I dont have enough experience with Google Maps, but your JS Framework should make calls to GoogleMaps(possibly AJAX), and generate the unique URLS

These unique URLs can then be used to trackback to your application. When your framework, interprets the URLs correctly, they should make the same API calls to GoogleMaps, it did the 1st time to generate the URLs.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:33:53.097

[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/) ( [API docs](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html) ) 是我最喜欢的工具来实现这一点。

只需添加一个事件监听器`hashchange`：

```
$(window).bind('hashchange', function(e) {
    var q = $.bbq.getState('q');
    if (q) {
        // do your Google Maps search for `q`
    }
}); 
```

`hashchange`并在页面首次加载时触发。（该事件不会在页面加载时自动触发，只有当 URL 发生更改时——无论是通过编程方式还是由用户摆弄 URL）

```
$(window).trigger('hashchange'); 
```

现在打开*example.com/#q=Anaheim*将搜索 Anaheim。

对于奖励积分：我假设您的页面有一个文本框，当用户按下回车键（和/或单击按钮）时调用一个函数。不要直接调用您的搜索函数，而是使用[`pushState`](http://benalman.com/code/projects/jquery-bbq/docs/files/jquery-ba-bbq-js.html#jQuery.bbq.pushState)将搜索词添加到 URL。（您的页面不会重新加载。）这将使它立即成为书签，因为用户可以将页面添加到他们的书签或从浏览器的地址栏中复制 URL。

```
// on key 13 / search button click:
$.bbq.pushState({ q: $('#searchTerm').val() }); 
```

这就是你所需要的。处理程序从`hashchange`那里接。

# javascript - 检索具有虚构 CSS 属性的元素

> ID：11532950
> 
> 赞同：1
> 
> 时间：2012-07-18T01:05:29.173
> 
> 标签：javascript, jquery, html, dom

> **可能重复：**
> [我可以通过 Javascript 获取非标准 CSS 属性的值吗？](https://stackoverflow.com/questions/249991/can-i-fetch-the-value-of-a-non-standard-css-property-via-javascript)

如何使用 jquery 检索具有虚构或非标准 CSS 属性的所有元素？例如，如果属性是“emotion”并且它的值是“happy”，我如何遍历 dom 并检索具有该属性的元素，如果需要，它的值？

HTML...

```
<div class="book">
</div> 
```

CSS..

```
.book {
emotion:happy;
} 
```

Javascript/jquery 查询通过它具有情感属性来查找书籍。

```
??? 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:09:18.607

无效或未知的 CSS 属性（*不是属性*）将被浏览器忽略，并且无法访问它们，因为它们没有添加到 DOM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:10:12.050

您想在此处使用数据属性：

```
<div class="book" data-emotion="happy"></div> 
```

并使用 jQuery 作为：

```
$('.book[data-emotion="happy"]'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T01:12:39.750

您可以在 DOM 中获取具有任意属性的元素：

```
​&lt;div emotion="happy">:)</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​
...
console.log(​$('div[emotion="happy"]').text()​​​​​​​​​​​​​​​​​​​​​);​
// prints ":)" 
```

...但最好这样做：

```
​&lt;div data-emotion="happy">:)</div>​​​​​​​​​​​​​​​​​​​​​​​​​​​
...
console.log(​$('div[data-emotion="happy"]').text()​​​​​​​​​​​​​​​​​​​​​);​
// prints ":)" 
```

因为[`data-`在 HTML5 中推荐使用用户定义的属性](http://www.w3.org/TR/2011/WD-html5-20110525/elements.html#embedding-custom-non-visible-data-with-the-data-attributes)。

它也不会被解析为 CSS 规则，你为什么要这样？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T01:12:45.287

尽管我认为您可以/不应该基于 css 属性搜索元素：

休息我希望它有助于事业`:)`

请试试这个：

```
var x = $('div').filter(function(){ return this.style.some_prop == 'whatever' });
                                                        ^------- ------ ^ 
```

**注意：如果您想搜索属性，请参见此处**

```
$(parentElement).find('*[someAttributeName]').each(function(index){
    doSomething(this);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T18:33:53.457

有人亲自向我提到的解决方法是使用 CSS 解析器，例如： http: [//glazman.org/JSCSSP/index.html](http://glazman.org/JSCSSP/index.html)

# android - Android Fragment教程强制关闭

> ID：11532954
> 
> 赞同：0
> 
> 时间：2012-07-18T01:06:31.280
> 
> 标签：android, android-fragments, android-fragmentactivity

我找到[了本](http://www.tellittotheblog.com/post/2011/03/25/Super-Simple-Fragments)教程的片段，因为我很难弄清楚它们。应用程序强制关闭并根据 logcat “错误膨胀类片段”。

MainActivity.java

```
package com.example.learn.fragments;

import android.app.Activity;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.View;
import android.view.ViewGroup;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    /* Add a class to handle fragment */
    public static class SSFFragment extends Fragment {
        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {
            // Inflate the layout for this fragment
            View v = inflater.inflate(R.layout.hello_frag, container, false);
            return v;
        }
    }

} 
```

activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

   <fragment class="SSFFragment"
   android:id="@+id/frag"
   android:layout_width="match_parent"
   android:layout_height="match_parent" />
</RelativeLayout> 
```

hello_frag.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:text="@string/hello_world"
/> 
```

任何帮助表示赞赏。我正在寻找一个简单的片段教程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:32:05.000

在`activity_main.xml`您错误地命名片段中。

正确的名称应该是`com.example.learn.fragments.MainActivity$SSFFragment`.

# java - 如何在不映射驱动器的情况下创建表示 Windows 服务器上路径的文件？

> ID：11532955
> 
> 赞同：0
> 
> 时间：2012-07-18T01:06:33.760
> 
> 标签：java, windows, file, remote-server

我试过这个：

```
URI uri = URI.create( "file://servername/e$/somefile" );
File file = new File(uri); 
```

但它抛出：

```
java.lang.IllegalArgumentException: URI has an authority component 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:17:49.210

Use a Windows style path (with a leading triple slash):

```
File file = new File("\\\\\\server\\e$\\somefile"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:31:15.400

使用带有-style URL 的[JCIFS](http://jcifs.samba.org/)`smb://[[[domain;]username[:password]@]server[:port]/[[share]]` ，或者有一天你会醒来，尝试从不同的操作系统运行你的应用程序，并发现“一次编写，随处运行”的概念比你想象的还要有趣。

# javascript - 我的 javascript 代码有什么问题？（外部文件）（简化也很棒）

> ID：11532958
> 
> 赞同：-2
> 
> 时间：2012-07-18T01:07:04.133
> 
> 标签：javascript, arrays, function, external

> **可能重复：**
> [这个 Javascript 有什么问题？购物车](https://stackoverflow.com/questions/11517129/what-is-wrong-with-this-javascript-shopping-cart)

这个javascript中有一些东西根本不允许它工作。简化也会很棒:)

```
var computer = new Array();

computer[0] = "10001, Nvidia Geforce GTX 690, 1200";
computer[1] = "10002, Raedon HD 7950, 450";
computer[2] = "20001, Ivy Bridge i7 3770, 400";
computer[3] = "20002, Ivy Bridge i7 3770k, 420";
computer[4] = "20003, Sandy Bridge i7 2700k, 340";
computer[5] = "20004, Bulldozer FX-8150, 270";
computer[6] = "30001, Antec eleven-hundred, 120";
computer[7] = "30002, Coolermaster HAF-X, 170";
computer[8] = "30003, Antec three-hundred, 50";
computer[9] = "30004, Corsair 550D, 160";
computer[10] = "40001, INTEL-ASrock fatal1ty Z77 Professional Motherboard, 250";
computer[11] = "40002, INTEL-ASrock Z77 extreme9 Motherboard, 350";
computer[12] = "40003, AMD-ASrock fatal1ty 990FX Professional Motherboard, 240";
computer[13] = "40004, AMD-ASUS Sabertooth 990FX Motherboard, 260"; 
```

检查所有复选框功能

```
function check() { 

var leftSide = document.getElementById('table_container_left');
var inputs = leftSide.getElementsByTagName('input');
for (x=0; x<=inputs.length-1; x++)  {
    if(inputs[x].type == 'text')  {
        inputs[x].value = 1;
    } else {
        inputs[x].checked = true;
    }
}
} 
```

取消选中所有复选框功能

```
function uncheck() { 

var leftSide = document.getElementById('table_container_left');
var inputs = leftSide.getElementsByTagName('input');
for (x=0; x<=inputs.length-1; x++)  {
    if(inputs[x].type == 'text')  {
        inputs[x].value = 0;
    } else {
        inputs[x].checked = false;
    }
}
} 
```

将选中的物品添加到购物车

```
function addItems() { 
var leftSide = document.getElementById('table_container_left');
var rightSide = document.getElementById('table_container_right');
var inputs = leftSide.getElementByTagName('input');
var totalPrice = 0;
var basketTable = "<h3>My Basket:</h3><table><thead><tr><th>Item</th><th>Quantity</th><th>price</th><th>Sub-total</th></tr></thead><tbody>";
for (x=0; x<=inputs.length-1; x++)  {
    if(inputs[x].type == 'checkbox' && inputs[x].checked == true)  {
        var quantity = ParseFloat(inputs[x+1).value);
        var itemName = computer[x/2].split(",")[1];
        var itemPrice = parseFloat(computer[x/2].split(",")[2])
        var itemTotal = parseFloat(quantity*itemPrice);
        totalPrice += itemTotal;
        basketTable += "<tr><td>"+itemName+"</td><td>"+quantity+"</td><td>$"+itemPrice+"</td><td>$"+itemTotal+"</td></tr>";
    }
}
basketTable +=" <tr><td> colspan='3'><b>Total:</b></td><td><b>$"+totalPrice+"</b></td></tr></tbody><table>";
rightsSide.innerHTML = basketTable;
} 
```

检查项目时将数量更新为 1

```
function updateQty(id)  {

var targetRow = document.getElementById(id);
var qtyBox = targetRow.getElementsByTagName('input')[1];
if (qtyBox.value == 0)  {
    qtyBox.value = 1;
} else {
    qtyBox.value = 0;
}
} 
```

这是所要求的 HTML

```
 <form name="myForm" action="index.html" method="post">

        <div id="table_container_left">

                    <button onclick="check();">Select All</button>

                    <button onclick="uncheck();">Unselect All</button>

                    <button onclick="addItems();">Add Items</button>

            <table>

                <thead>

                        <th><u>Item Code</u></th>

                        <th><u>Item</u></th>

                        <th><u>Qty</u></th>

                        <th><u>Price</u></th>

                </thead>

                <tbody>

<script type="text/javascript">

for(x=0; x<=computer.length-1; x++) {

document.write("<tr id='"+x+"'><td><label><input type='checkbox' name='item' value='"+x+"'     onclick='updateQty('"+x+"');'/> "+computer[x].split(",")[0]+"</label></td><td>"+computer[x].split    (",")[1]+"</td><td> <input name='qty' id='qty' type='textbox' value='0' onchange='qtychange    ('"+x+"');'/></td><td>$"+computer[x].split(",")[2]+"</td></tr>");

}

</script>

                </tbody>

            </table>

        </div>

        <div id="table_container_right">

            <table id="shoppingBasket">

                    <input name='selectAll' type='button' value='Select All' onclick="itemSelected();"/>

                    <input name='clearAll' type='button' value='Clear All' onclick=""/>

                    <input name='removeItem(s)' type='button' value='Remove Item(s)' />

                    <input name='sortItemCode' type='button' value='Sort by Item Code' disabled='disabled' />

                    <input name='sortPrice' type='button' value='Sort by Price' disabled='disabled' />

                </tbody>

            </table>

        </div>

</div>

</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:16:20.470

A few notes, which may or may not fix the problem if applied:

*   There's a `ParseFloat` instead of a `parseFloat`,
*   You often reference attributes as if they were integers, although they should be strings,
*   There's a `computer[x/2]` which might result in a decimal array index,
*   Variables are repeatedly declared within the for loop,
*   `innerHTML` is used instead of the DOM.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T01:20:04.937

(Not an answer.)

Here's one simplification, with at least two caveats:

1.  Poorly-named function, since it does something other than simply setting checkboxes.
2.  I'd recommend using a JS framework that simplifies DOM manipulation.

```
function check() {
    setChecks(false);
}

function uncheck() {
    setChecks(true);
}

function setChecks(checked) {
    var leftSide = document.getElementById('table_container_left');
    var inputs = leftSide.getElementsByTagName('input');
    var textValue = checked ? "1" : "0";
    var x;

    for (x = 0; x < inputs.length; x++)  {
        if (inputs[x].type == 'text')  {
            inputs[x].value = textValue;
        } else {
            inputs[x].checked = checked;
        }
    }
} 
```

I'd consider using immediate array initialization and objects. Also, the object holding the computers should be called that–`computers`. It's not a `computer`. It's a collection of them; plural.

```
var computers = [
  { id: "10001", name: "Nvidia Geforce GTX 690", price: 1200 },
  { id: "10002", name: "Raedon HD 7950", price: 450 },
  // ...
]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T01:11:52.760

给您使用数组，为什么不全力以赴并真正使用它们呢？

```
computer[0] = [10001, "blah blah blah"];
computer[1] = [10002, "foo bar baz"]; 
```

等等？这就像您购买一个精美的橱柜，然后将其用作镇纸。

# linux - 无法在linux中编译opencv

> ID：11532963
> 
> 赞同：2
> 
> 时间：2012-07-18T01:08:19.243
> 
> 标签：linux, opencv, compilation, g++

我在 linux 中尝试使用 g++ 编译 opencv 的一些示例代码时遇到了麻烦，但是在运行后我收到了以下错误消息：

```
g++ `pkg-config --cflags --libs opencv` hello.cpp -o hello 
```

我得到这个输出：

```
/tmp/ccjvVxLI.o: In function `main':
hello.cpp:(.text+0x45): undefined reference to `cvLoadImage'
hello.cpp:(.text+0x6b): undefined reference to `cvNamedWindow'
hello.cpp:(.text+0x7c): undefined reference to `cvShowImage'
hello.cpp:(.text+0x86): undefined reference to `cvWaitKey'
hello.cpp:(.text+0x90): undefined reference to `cvDestroyWindow'
collect2: ld returned 1 exit status 
```

我在网上查看并检查了我的 OpenCV 安装，我得到了以下的正常输出：

```
pkg-config --cflags opencv 
```

作为：

```
-I/usr/local/include/opencv -I/usr/local/include 
```

但是当我跑的时候：

```
pkg-config --libs opencv 
```

我得到了一个看起来像这样的奇怪列表：

```
/usr/local/lib/libopencv_calib3d.so /usr/local/lib/libopencv_contrib.so     /usr/local/lib/libopencv_core.so /usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so /usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so /usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so /usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so /usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so /usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so /usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so 
```

如果有帮助，我在本网站的帮助下在 ubuntu LTS 12.04 上安装了 Opencv2.4.1：http: [//www.samontab.com/web/2012/06/installing-opencv-2-4-1-ubuntu-12-04 -lts/](http://www.samontab.com/web/2012/06/installing-opencv-2-4-1-ubuntu-12-04-lts/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T02:33:17.783

试试这个：

```
g++ `pkg-config --cflags opencv` -o hello hello.cpp `pkg-config --libs opencv` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-30T10:48:37.680

根据[GCC 手册](https://gcc.gnu.org/onlinedocs/gcc/Link-Options.html#Link-Options)

> 在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，“foo.o -lz bar.o”在文件 foo.o 之后但在 bar.o 之前搜索库“z”。如果 bar.o 引用 'z' 中的函数，则可能不会加载这些函数。

所以`pkg-config --libs opencv`必须在文件名的末尾，否则 gcc 将无法解析符号。

```
g++ hello.cpp -o hello `pkg-config --cflags --libs opencv` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T17:54:15.367

参考这个线程：

[使用 OpenCV 库编译代码](https://stackoverflow.com/questions/4559945/compiling-code-with-opencv-libraries/17443128#17443128)

将这些添加为命令行参数也很有效：

-lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_objdetect

# python - httplib2 socket.sslerror: (-1, 'SSL 异常')

> ID：11532966
> 
> 赞同：0
> 
> 时间：2012-07-18T01:08:55.323
> 
> 标签：python, ssl, jython

尝试使用 httplib2 进行 HTTPS GET 时，出现以下错误。

```
>>> import httplib2
>>> http = httplib2.Http(cache=None, timeout=30)
>>> response, content = http.request('https://www.example.com', 'GET')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/app/jython/2.5.2/Lib/site-packages/httplib2/__init__.py", line 1436, in request
    (response, content) = self._request(conn, authority, uri, request_uri, method, body, headers, redirections, cachekey)
  File "/app/jython/2.5.2/Lib/site-packages/httplib2/__init__.py", line 1188, in _request
    (response, content) = self._conn_request(conn, request_uri, method, body, headers)
  File "/app/jython/2.5.2/Lib/site-packages/httplib2/__init__.py", line 1162, in _conn_request
    conn.connect()
  File "/app/jython/2.5.2/Lib/site-packages/httplib2/__init__.py", line 925, in connect
    raise socket.error, msg
socket.sslerror: (-1, 'SSL exception') 
```

我对 SSL 不太熟悉，也不熟悉 -1 错误代码的含义。我假设 httplib2 不验证 SSL 证书。

常规 wget 失败，但 wget --no-check-cert 有效。

```
$ wget -qO- https://www.example.com --no-check-certificate

Up 
```

通过浏览器访问 URL 似乎也可以正常工作。我在代码中做错了吗？或者 socket.sslerror: (-1, 'SSL exception') 是否意味着其他错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T03:07:01.457

SSL 支持取决于您的底层套接字模块。在这种情况下，您似乎确实有 ssl 支持。你可以禁用它...

```
http = httplib2.Http(cache=None, timeout=30, disable_ssl_certificate_validation=True) 
```

# facebook - 使用现有的 FB 去重处理图形 API 中的重复页面

> ID：11532967
> 
> 赞同：5
> 
> 时间：2012-07-18T01:09:03.943
> 
> 标签：facebook, facebook-graph-api, duplicates

编辑：我正在开发一个应用程序，该应用程序存储用户的教育历史并按他们就读的学校对用户进行分组。拥有同一所学校的两个代表是不可接受的。在下面的示例中，我概述了一个让我感到困惑的特定案例（众多案例之一）。

显然，Facebook 有一种检测重复页面的机制，我正在寻找任何可以利用这一现有功能的解决方案。

* * *

图形 API 表示这两个具有不同 ID 的页面，但在前端它们重定向到单个页面。看一看：

*   [graph.facebook.com/108727889151725](http://graph.facebook.com/108727889151725)
*   [graph.facebook.com/110886578949219](http://graph.facebook.com/110886578949219)

请注意，一个有大约 21,000 个赞，另一个有 250 个。如果我们在浏览器中输入这些页面 ID，看看会发生什么：

*   [facebook.com/108727889151725](http://facebook.com/108727889151725)
*   [facebook.com/110886578949219](http://facebook.com/110886578949219)

分别重定向到：

*   [facebook.com/georgewashingtonuniversity?rf=108727889151725](https://www.facebook.com/georgewashingtonuniversity?rf=108727889151725)
*   [facebook.com/georgewashingtonuniversity?rf=110886578949219&highlight_redirect=yes](https://www.facebook.com/georgewashingtonuniversity?rf=110886578949219&highlight_redirect=yes)

您可能会注意到，这是同一页！所以这是我的问题：

**有什么方法可以在我的应用中使用 Facebook 的重复数据删除功能？**

# playframework - 通过 GET 在 JAVA 中播放 Framework 2.0 多个复选框

> ID：11532968
> 
> 赞同：4
> 
> 时间：2012-07-18T01:09:05.757
> 
> 标签：playframework, playframework-2.0, checkbox

如何通过 GET 处理 Play Framework 2.0 JAVA 中的多个复选框？

该网址类似于：`http://localhost:9000/games?type=platform&type=role`。如何在控制器的“Set”变量中获取两个“type”值？

我的表格如下所示：

```
<input type="checkbox" name="type[]" class="" value="all-types">
<input type="checkbox" name="type[]" class="" value="platform">
<input type="checkbox" name="type[]" class="" value="role"> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T06:11:56.117

看看[http://www.playframework.org/documentation/2.0/ScalaForms](http://www.playframework.org/documentation/2.0/ScalaForms)，“重复值”部分：

1) 将字段命名为`type[0]`, `type[1]`, ....

2) 然后您将在控制器中有一个 List[String]，您必须从中查找已检查的值。

# c++ - 为什么 boost::shared_ptr 使用 gcc 内联汇编来增加 use_count 而不是使用 operator++？

> ID：11532970
> 
> 赞同：2
> 
> 时间：2012-07-18T01:09:24.250
> 
> 标签：c++, boost, thread-safety, shared-ptr, atomic

我正在阅读`boost::shared_ptr`源代码，发现它使用此函数来增加 shared_ptr 的使用计数（引用计数）：

```
inline void atomic_increment( int * pw )
{
    //atomic_exchange_and_add( pw, 1 );

    __asm__
    (
        "lock\n\t"
        "incl %0":
        "=m"( *pw ): // output (%0)
        "m"( *pw ): // input (%1)
        "cc" // clobbers
    );
} 
```

为什么不简单地使用`operator++`来做到这一点？这会带来更好的性能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T01:26:35.687

++ 运算符读取它的操作数的当前值，加 1 并将结果写回。这可以是三个可中断的（即，由另一个线程）步骤。如果两个线程同时执行此操作，则结果可能是错误的。为了防止这一点，必须使用原子操作或锁。这是由上面显示的 asm 代码完成的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T01:32:57.203

C++ 标准不保证 i++ 或 ++i 操作是原子的。因此，取决于编译器，它可能是原子的，也可能不是原子的。此解决方法使用汇编语言来解决此限制。现在，C++ 标准包括 `std::atomic<T>`保证对对象的操作是原子的。

# javascript - nvd3.js-带查看器的折线图：当鼠标悬停时旋转轴标签并显示线值

> ID：11532971
> 
> 赞同：7
> 
> 时间：2012-07-18T01:09:35.087
> 
> 标签：javascript, svg, d3.js, nvd3.js

我是这种论坛的新手，我的英语水平不是最好的，但我会尽力做到最好:)。

[在nvd3 网站上](http://nvd3.com/ghpages/lineWithFocus.html)有一个带有 View Finder 的折线图示例。这是我在过去 2 天内一直在使用的一个（examples\lineWithFocusChart.html，nvd3 zip 包）。我只对示例的格式进行了一项更改：我在 X 轴上使用日期而不是普通数字。

这是我的2个问题：

1- 如何在 x 轴上旋转所有刻度标签？我的日期太长（%x %X，日期和时间），我希望它们轮换以改善观看效果。我只能旋转 2 个刻度（x 轴的最大值和最小值，边缘）。这是我在 nv.d3.js 的“switch (axis.orient())”块中修改的代码：

```
case 'bottom':
      axisLabel.enter().append('text').attr('class', 'axislabel')
          .attr('text-anchor', 'middle')
          .attr('y', 25);
      axisLabel
          .attr('x', scale.range()[1] / 2);
      if (showMaxMin) {
        var axisMaxMin = wrap.selectAll('g.axisMaxMin')
                       .data(scale.domain());
        axisMaxMin.enter().append('g').attr('class', 'axisMaxMin').append('text');
        axisMaxMin.exit().remove();
        axisMaxMin
            .attr('transform', function(d,i) {
              return 'translate(' + scale(d) + ',0)'
            })
          .select('text')

            .attr('dy', '.71em')
            .attr('y', axis.tickPadding())
            .attr('text-anchor', 'middle')
            .text(function(d,i) {
              return ('' + axis.tickFormat()(d)).match('NaN') ? '' : axis.tickFormat()(d)
            })
            .attr('transform', 'rotate(45)')
            ;
        d3.transition(axisMaxMin)
            .attr('transform', function(d,i) {
              return 'translate(' + scale.range()[i] + ',0)'
            });
      }
      break; 
```

如您所见，我已将 .attr('transform', 'rotate(45)') 作为新属性放置，因此旋转了最大和最小刻度（axisMaxMin）。我已经尝试过这种方式（在整个 nv.d3.js 文件中）以及我认为与 x 刻度相关的其他文本元素，但它不起作用。任何想法？为了显示旋转的所有 X 标签，我必须将转换放在哪里？

2- 在示例中，当您将鼠标放在线条上时，不会触发任何事件来显示与该点关联的值 (x,y)。我怎样才能显示这些值？我尝试复制粘贴在显示这些值的其他示例中使用的方法，但它不起作用。任何想法？

感谢您分享您的时间和知识：D。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-03T22:16:07.073

最近对 nvd3 进行了更新，使旋转 x 轴刻度标签变得非常容易。现在有一个名为 rotateLabels(degrees) 的轴模型函数，它采用整数并将 xTick 标签旋转指定的度数。要将所有 xTick 标签向后旋转 45 度，您可以像这样使用它：

```
var chart = nv.models.lineChart();
chart.xAxis.rotateLabels(-45); 
```

# ruby-on-rails - 限制 sunspot/solr any_of 块内每个匹配条件的结果大小

> ID：11532972
> 
> 赞同：2
> 
> 时间：2012-07-18T01:09:56.990
> 
> 标签：ruby-on-rails, search, solr, lucene, sunspot

我正在使用 solr 和 sunspot 在几百万条记录中执行复杂的搜索：（为简洁起见）

```
Model.solr_search do |query|
  query.any_of

    # fairly simple to accomplish with Grouping/Field Collapsing
    with(:age).between(10..20)
    with(:age).between(20..30)

    # trying to limit the number of results I get for the following
    query.all_of do |q|
      q.with(:school_id).any_of(@user.school.id)
      q.with(:graduation_year).between(@user.graduation_year..@user.graduation_year+1)
    end

  end
end 
```

我想做的是获得预定义数量的结果，其中年龄在 10 到 20 之间，年龄在 20 到 30 之间。我还想获得预定数量的匹配，其中 school_id 是 foo毕业年份是酒吧。

**我考虑了几个选项：**

1.  进行多个查询时，如果只有 2 或 3 个组（如上面的示例），则此方法有效，但在实际场景中将有 10 个左右（10 个 solr 查询一个 no bueno）。
2.  使用 Result Grouping/Field Collapsing 这将适用于年龄标准，因为我知道在索引期间，但我认为我无法根据动态参数生成组。
3.  以某种方式标记结果并稍后过滤掉所需的数量（不确定是否可能）。

如果您想知道我正在尝试获得 30 个结果，每组 10 个。使用 SQL 不是一种选择，因为我必须查询数百万行。

# objective-c - 从 UIViewController 获取 Facebook 的全名

> ID：11532978
> 
> 赞同：-3
> 
> 时间：2012-07-18T01:11:09.863
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

你好，所以我刚开始使用 Facebook iOS SDK，我可以轻松登录 Facebook，但我在弄清楚如何获取用户全名并将其显示在 UILabel 中时遇到了问题。我也是从 UIViewController 执行此操作的，到目前为止，我在互联网上看到的所有内容都发生在应用程序委托中，但是，我不希望它从委托中完成，它只是不适合做的地方我希望它在 UIViewController 中，所以当按下按钮时，您可以登录 Facebook。Facebook SDK 现在看起来很复杂，因为它是我第一次使用它。

编辑：好的继承人我的一些代码。这是在视图控制器中：

```
-(void)createfbInstance {

Facebook* fb = [[Facebook alloc] initWithAppId:FB_APP_ID andDelegate:self];
self.facebook = fb;

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
    NSArray* permissions = [[NSArray alloc] initWithObjects:@"user_about_me", nil];
    [facebook authorize:permissions];
} 
} 
```

所以我只是像 Facebook 教程那样设置它然后我尝试使用图形路径发送请求：

```
- (void)fbDidLogin {

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];

FBAppDelegate* appDelegate = (FBAppDelegate*)[[UIApplication sharedApplication] delegate];
[appDelegate.facebook requestWithGraphPath:@"name" andDelegate:self];
} 
```

然后尝试接收请求：

```
 - (void)request:(FBRequest *)request didLoad:(id)result {

 } 
```

抱歉，我很沮丧，并从该方法中删除了代码。然后在委托中我有 Facebook 属性

```
@property (nonatomic, retain) Facebook* Facebook; 
```

文件中还有其他代码，但这似乎是最重要的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:45:14.753

在您需要访问 Facebook API 的任何类中，您都需要包含以下文件（在头文件中）：

```
#import "FBConnect.h"
#import "YOUR_APP_DELEGATE.h" 
```

并让你的班级实现`FBRequestDelegate`委托。

然后为了使用它，您只需执行以下操作：

```
 YOURAPPDELEGATE *appDelegate = (YOURAPPDELEGATE*)[[UIApplication sharedApplication] delegate]; 
```

有了它，您现在可以访问您在委托中拥有的 Facebook 属性，从而允许您访问 API。

现在您需要`- (void)request:(FBRequest *)request didLoad:(id)result`在视图控制器中添加该方法，以便您可以接收响应。

所以现在你可以打电话

```
 [appDelegate.facebook requestWithGraphPath:@"APICALLHERE" andDelegate:self]; 
```

现在您将收到`request:didLoad:`方法中的响应，然后您可以随心所欲地做任何事情。

# php - 使用 curl php 发送帖子

> ID：11532979
> 
> 赞同：0
> 
> 时间：2012-07-18T01:11:12.147
> 
> 标签：php, http, post, curl, request

我正在尝试在网页上发送一些参数以进行身份​​验证，这是代码

```
$url = "http://www.webpage.com/account/submit";
$handler = curl_init();
curl_setopt($handler, CURLOPT_URL, $url);
curl_setopt($handler, CURLOPT_POST,true);
curl_setopt($handler, CURLOPT_POSTFIELDS, "username=user@webmail.com&remember=true&password=123456");
$response = curl_exec ($handler);
curl_close($handler); 
```

当我运行此脚本时，什么都没有显示，我试图将我成功地验证到没有 HTML 表单的网站中。. . 还有另一种方法可以做到这一点？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:13:16.743

当然它什么也没显示。您至少必须[`echo`](http://nl.php.net/manual/en/function.echo.php)做一些事情（并且可能会做一些事情`$response`来实际检查登录结果）。此外，请确保启用[错误报告。](http://php.net/manual/en/function.error-reporting.php)

# python - 在 Python 中重现 Unix cat 命令

> ID：11532980
> 
> 赞同：10
> 
> 时间：2012-07-18T01:11:18.180
> 
> 标签：python, cat

我目前正在复制以下 Unix 命令：

```
cat command.info fort.13 > command.fort.13 
```

在 Python 中使用以下内容：

```
with open('command.fort.13', 'w') as outFile:
  with open('fort.13', 'r') as fort13, open('command.info', 'r') as com:
    for line in com.read().split('\n'):
      if line.strip() != '':
        print >>outFile, line
    for line in fort13.read().split('\n'):
      if line.strip() != '':
        print >>outFile, line 
```

这行得通，但必须有更好的方法。有什么建议么？

编辑（2016）：

时隔四年，这个问题再次受到关注。[我在这里](https://github.com/jbwhit/one-offs/blob/master/notebooks/2016-09-19_jbw_stackoverflow.ipynb)用更长的 Jupyter Notebook 写下了一些想法。

问题的症结在于我的问题与`readlines`. 我想要的答案本来可以更好地提出，而这个问题本来可以更好地回答`read().splitlines()`。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T01:22:00.883

最简单的方法可能是简单地忘记这些行，只需读入整个文件，然后将其写入输出：

```
with open('command.fort.13', 'wb') as outFile:
    with open('command.info', 'rb') as com, open('fort.13', 'rb') as fort13:
        outFile.write(com.read())
        outFile.write(fort13.read()) 
```

正如评论中所指出的，如果任何一个输入很大（因为它首先将整个文件复制到内存中），这可能会导致高内存使用。如果这可能是一个问题，以下内容也可以正常工作（通过以块的形式复制输入文件）：

```
import shutil
with open('command.fort.13', 'wb') as outFile:
    with open('command.info', 'rb') as com, open('fort.13', 'rb') as fort13:
        shutil.copyfileobj(com, outFile)
        shutil.copyfileobj(fort13, outFile) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-18T01:20:37.203

```
def cat(outfilename, *infilenames):
    with open(outfilename, 'w') as outfile:
        for infilename in infilenames:
            with open(infilename) as infile:
                for line in infile:
                    if line.strip():
                        outfile.write(line)

cat('command.fort.13', 'fort.13', 'command.info') 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-19T05:35:57.490

```
#!/usr/bin/env python
import fileinput

for line in fileinput.input():
    print line, 
```

用法：

```
$ python cat.py command.info fort.13 > command.fort.13 
```

或者允许任意大行：

```
#!/usr/bin/env python
import sys
from shutil import copyfileobj as copy

for filename in sys.argv[1:] or ["-"]:
    if filename == "-":
        copy(sys.stdin, sys.stdout)
    else:
        with open(filename, 'rb') as file:
            copy(file, sys.stdout) 
```

用法是一样的。

或者在 Python 3.3 上使用[`os.sendfile()`](http://docs.python.org/dev/library/os.html#os.sendfile)：

```
#!/usr/bin/env python3.3
import os
import sys

output_fd = sys.stdout.buffer.fileno()
for filename in sys.argv[1:]:
    with open(filename, 'rb') as file:
        while os.sendfile(output_fd, file.fileno(), None, 1 << 30) != 0:
            pass 
```

上面的`sendfile()`调用是为 Linux > 2.6.33 编写的。原则上，`sendfile()`它比其他方法使用的读/写组合更有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T01:16:32.953

遍历文件会产生行。

```
for line in infile:
  outfile.write(line) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-18T01:23:23.487

您可以通过以下几种方式进行简化：

```
with open('command.fort.13', 'w') as outFile:
  with open('fort.13', 'r') as fort13, open('command.info', 'r') as com:
    for line in com:
      if line.strip():
        print >>outFile, line
    for line in fort13:
      if line.strip():
        print >>outFile, line 
```

更重要的是，[shutil](http://docs.python.org/library/shutil.html)模块具有 copyfileobj 功能：

```
with open('command.fort.13', 'w') as outFile:
  with open('fort.13', 'r') as fort13:
    shutil.copyfileobj(com, outFile)
  with open('command.info', 'r') as com:
    shutil.copyfileobj(fort13, outFile) 
```

这不会跳过空白行，但 cat 也不会这样做，所以我不确定你是否真的想要。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T00:02:20.447

对于这样的事情，[列表推导很棒：](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)

```
with open('command.fort.13', 'w') as output:
  for f in ['fort.13', 'command.info']:
    output.write(''.join([line for line in open(f).readlines() if line.strip()])) 
```

# jquery - jquery 字母数字验证

> ID：11532982
> 
> 赞同：1
> 
> 时间：2012-07-18T01:11:20.513
> 
> 标签：jquery, validation, alphanumeric

```
$('#reg_submit').click(function () {
  var reg_password1 = $('#reg_password1').val();
  letters = /([a-z])([0-9])/; 
  var errorMessage =  '';

  if ( ! reg_password1.value.match(letters) )   
  {   
    errorMessage = "Password must be alphanumeric";
    $('#msg_regpass1').html(errorMessage).show();
  }
  else {
    $('#msg_regpass1').html('').hide();
  }
}); 
```

我使用上面的 jquery 代码对我的注册页面应用字母数字验证。但是我得到了与 match() 相关的 javascript 错误，这样的匹配是未定义的。任何人都可以提出上述问题的解决方案，或者请提供一些其他代码来获取上述代码的字母数字验证。该字母模式也无法正常用于字母数字验证。任何人都可以建议其他模式

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T01:20:22.787

This one is working for me:

```
var reg_password1 = 'test123#';
var letters = /^[a-zA-Z0-9]+$/;

var result = letters.test(reg_password1);

console.log(result);​ 
```

[DEMO](http://jsfiddle.net/DBEfG/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:14:47.560

正如您所要求的只是一个建议，这是一个开始：您可能想要的正则表达式是`/^[a-z\d]+$/i`. 只有当您的正则表达式在字符串中的任何位置包含单个小写字母或数字时，您现有的正则表达式才会匹配；建议说每个角色都必须是。

或者，您可以对您的正则表达式使用轻微的变化：`/[^a-z\d]/i`它匹配单个非字母数字值。然后调整你的逻辑说：如果我在这里有一个匹配，那么字符串是无效的。

至于`match`未定义，请阅读[JavaScript 中与正则表达式相关的方法](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。有些属于字符串，有些属于`Regexp`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T01:14:32.663

利用

```
reg_password1.match(letters) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T01:14:41.947

您的 jQuery`.val();`方法将返回您的值，因此更改此行

```
if(!reg_password1.value.match(letters)) 
```

至

```
if(!reg_password1.match(letters)) 
```

我猜你也想要一个稍微不同的正则表达式。

如果所有字符都必须是 az 或 0-9（不区分大小写），那么试试这个：

```
/^[a-z0-9]*$/i 
```

但是，这一切都说，如果这真的是一个密码字段，你应该让用户选择像 $,#,!,@,%_,-,(,[,),] 等符号，使他们能够选择一个强密码。;-)

# php - 简单的html dom只解析包含pdf链接的标题和链接

> ID：11532987
> 
> 赞同：1
> 
> 时间：2012-07-18T01:12:07.477
> 
> 标签：php, simple-html-dom

我试图解析一些 html 页面：

```
<div class="gs_r"><h3 class="gs_rt"><span class="gs_ctc">[BOOK]</span> <a href="http://exampleA.com" onmousedown="return scife_clk(this.href,'','res','1')">titleA</a></h3><div class="gs_ggs gs_fl"><a href="http://exampleApdf.pdf" onmousedown="return scife_clk(this.href,'gga','gga','1')">
<div class="gs_r"><h3 class="gs_rt"><span class="gs_ctc">[BOOK]</span> <a href="http://exampleB.com" onmousedown="return scife_clk(this.href,'','res','1')">titleB</a></h3><div class="gs_ggs gs_fl"><a href="http://exampleB.doc" onmousedown="return scife_clk(this.href,'gga','gga','1')"> 
```

从那个html页面，我们可以得到信息：页面链接（http://exampleA.com，http://exampleB.com），标题（titleA，titleB），文档链接（http://exampleApdf.pdf， http://exampleB.doc) 但是，我只想获取具有 pdf 链接的文档的信息。所以从那个例子中，我只想得到：[http://exampleA.com](http://exampleA.com)， titleA ，[http://exampleApdf.pdf](http://exampleApdf.pdf)。我正在尝试，但它给了我空白的结果。我怎么能他们？谢谢你 ！:) 这是代码：

```
<?php

include 'simple_html_dom.php';
$url = 'http://scholar.google.com/scholar?hl=en&q=data+mining&btnG=&as_sdt=1%2C5&as_sdtp=';
$html = file_get_html($url);
foreach($html->find('div[class=gs_ggs gs_fl]')as $pdfLink){
    if (preg_match('/\.pdf$/i', $pdfLink)) {
       $html2->find('span[class=gs_ctc]');
       echo $html2.$pdfLink;
    }
 }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:19:04.753

You cannot determine from the URL what kind of resource will be returned.

Not everyone serves up PDF files with `.pdf` extensions. Not all web services reveal the file names of files on disk. Only the `Content-Type` HTTP response header should be used for determining the type of the resource.

You can get this efficiently by [doing a HEAD request](https://stackoverflow.com/q/1378915/362536) for each URL you find.

# android - Android：使用存储在文件中的公钥解密 RSA 文本

> ID：11532989
> 
> 赞同：18
> 
> 时间：2012-07-18T01:12:21.753
> 
> 标签：android, rsa, encryption

我已经尝试了几天但没有成功。

StackOverflow 中有很多类似的问题，甚至其中两个与我的完全相同，但未得到解答和解决：1）[将 PHP RSA PublicKey 转换为 Android PublicKey](https://stackoverflow.com/questions/7037780/convert-php-rsa-publickey-into-android-publickey) 2）[Android：如何使用 RSA 密钥解密 openssl 加密文件？](https://stackoverflow.com/questions/9823409/android-how-to-decrypt-an-openssl-encrypted-file-with-rsa-key)

我的场景：我有一些使用 RSA 加密的文本（我没有加密）。我的 res/raw 文件夹中有一个“public.key”文件，其中包含解密它所需的公钥（与用于加密消息的私钥相关的公钥），其格式类似于以下示例： ![在此处输入图像描述](../Images/dc9bcd3c666e335a9b6d1a0029eb67c8.png)

我看到很多关于如何解密 RSA 文本的示例，如下所示：

```
public static byte[] decryptRSA( PublicKey key, byte[] text) throws Exception
      { 
          byte[] dectyptedText = null;

          Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1Padding");
          cipher.init(Cipher.DECRYPT_MODE, key);
          dectyptedText = cipher.doFinal(text);
          return dectyptedText;
      } 
```

但我的问题是，如何从文件中获取正确的 PublicKey 实例？没有这方面的例子。

如果我只是尝试：

```
 InputStream is = getResources().openRawResource(R.raw.public);
    DataInputStream dis = new DataInputStream(is);
    byte [] keyBytes = new byte [(int) is.available()];
    dis.readFully(keyBytes);
    dis.close();
    X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);
    KeyFactory keyFactory = KeyFactory.getInstance("RSA");
    return keyFactory.generatePublic(spec); 
```

我在返回语句中得到一个 InvalidKeyException。我需要解码 Hex 或 Base64 吗？公钥文件的第一行和最后一行不是问题吗（带有“----BEGIN PUBLIC KEY----”的那些）？

也许我们可以在 StackOverflow 中第一次正确地得到这个答案:-)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-18T12:30:53.780

终于解决了！！！鼓，喇叭和迷人的交响乐！！！

```
public static byte[] decryptRSA(Context mContext, byte[] message) throws Exception { 

    // reads the public key stored in a file
    InputStream is = mContext.getResources().openRawResource(R.raw.sm_public);
    BufferedReader br = new BufferedReader(new InputStreamReader(is));
    List<String> lines = new ArrayList<String>();
    String line = null;
    while ((line = br.readLine()) != null)
        lines.add(line);

    // removes the first and last lines of the file (comments)
    if (lines.size() > 1 && lines.get(0).startsWith("-----") && lines.get(lines.size()-1).startsWith("-----")) {
        lines.remove(0);
        lines.remove(lines.size()-1);
    }

    // concats the remaining lines to a single String
    StringBuilder sb = new StringBuilder();
    for (String aLine: lines)
        sb.append(aLine);
    String keyString = sb.toString();
    Log.d("log", "keyString:"+keyString);

    // converts the String to a PublicKey instance
    byte[] keyBytes = Base64.decodeBase64(keyString.getBytes("utf-8"));
    X509EncodedKeySpec spec = new X509EncodedKeySpec(keyBytes);
    KeyFactory keyFactory = KeyFactory.getInstance("RSA");
    PublicKey key = keyFactory.generatePublic(spec);

    // decrypts the message
    byte[] dectyptedText = null;
    Cipher cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.DECRYPT_MODE, key);
    dectyptedText = cipher.doFinal(Base64.decodeBase64(message));
    return dectyptedText;
} 
```

解决方案是对从文件中读取的公钥和加密消息本身进行 Base64 解码！

顺便说一句，我按照@Nikolay 建议的方式从文件中读取了公钥（tnx again man）。

非常感谢大家的帮助。StackOverflow 摇滚！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T01:58:31.627

你错过了一个关键点——公钥和私钥是分开的，你不能根据另一个来计算一个。这就是公钥加密的意义所在。除了使用原始 RSA 的问题之外，如果您使用公钥加密了某些内容，则需要使用相应的*私钥*对其进行解密。反之亦然。因此，如果您有公钥文件，则只能从中获取*公钥*。仅当您的数据使用相应的*私钥*加密时才有用。

至于实际的例外：删除开头和结尾的“---”行，使用 Base64.decode() 获取字节数组，并使用它来创建您的`X509EncodedKeySpec`. 一种方法 - 使用类似 a`BufferedReader`逐行读取，忽略“---”行并将其余部分连接成一个大的`String`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T02:11:06.317

公钥只能加密数据。公钥不能解密数据。您只能使用私钥解密数据。关键是您可以将公钥分发给任何人和所有人，他们可以向您发送只有私钥持有者才能看到的加密消息。

您确实需要非常小心地使用加密技术。我担心您只是将私钥分发给您的所有设备，这会削弱您的安全性，因为每个人都将拥有相同的私钥。因此，如果我想破解您的安全性，我只需去 google play 并下载您的应用程序，然后将私钥从您的应用程序中提取出来。中提琴 我可以看到一切。

所以你有你的答案为什么它不起作用，但你现在需要关于设计的建议，我不能告诉你为什么要使用加密。你在隐藏什么？

**更新：**

听起来您正在尝试像 RSA 的工作方式一样执行加密和签名验证，但您对它的实际工作方式感到困惑。为此，您需要两组私钥/公钥。一组用于客户端的密钥和一组用于服务器的密钥。

Web 服务器会将其公钥发送给客户端。客户端可以使用服务器的公钥向服务器发送经过身份验证和加密的消息，然后使用客户端的私钥对该消息进行签名。服务器反之亦然。服务器将使用客户端的公钥加密消息并使用他的私钥对其进行签名以向客户端发送消息。然后客户端可以使用客户端的私钥解密消息并使用服务器的公钥验证签名。

现在您要重新实现 SSL 吗？停下来。使用 SSL。

以下是 SSL 如何实现安全通道。客户端从 Web 服务器接收 PUBLIC 密钥，以及对称加密算法的 1 个或多个名称。它选择一个他们共享的算法，然后生成一个用于所有消息的密钥。它使用 Web 服务器的公钥加密该密钥，并将其与它选择的算法一起发送。Web 服务器使用 PRIVATE 密钥解密以获取共享密钥。之后，所有加密都是使用共享密钥的对称加密，比非对称加密快得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-23T23:12:55.047

从您提供的 PEM 格式生成 RSA 公钥（openssl gen.rsa key）

```
-----BEGIN PUBLIC KEY-----
SOMEDES3UNREADABLETEXT+PADDING==
-----END PUBLIC KEY 
```

并用它来阅读一些用它签名的内容？

- 看看我在类似问题中的回答： [https ://stackoverflow.com/a/12101100/546054](https://stackoverflow.com/a/12101100/546054)

# c# - 如何使用 LINQ 将结果作为字典返回 在 C# 中

> ID：11532991
> 
> 赞同：0
> 
> 时间：2012-07-18T01:12:33.397
> 
> 标签：c#, linq

我是 LINQ 的新手。我想查询文件夹中的文件并将结果作为字典返回。这是我的代码

```
var queryResult = (from d in directoryInfo.GetFiles()
                   where d.Name.EndsWith(suffix)
                   select new Dictionary<string, string>
                   {
                       {d.Name,""},
                   }); 
```

但这似乎不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:17:55.257

[GetFiles()返回一个](http://msdn.microsoft.com/en-us/library/4cyf24ss.aspx)[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)数组。

从您的问题中不清楚您希望将什么作为 Dictionary 键以及您希望将什么作为值。如果你想要名字作为两者，你可以做

```
var queryResult = 
    (from d in directoryInfo.GetFiles()
     where d.Name.EndsWith(suffix) 
     select d).ToDictionary(d=>d.Name, d=>d.Name); 
```

这是一个相当无意义的字典，因为键和值是相同的。

如果您确实想为每个文件保留 FileInfo，您可以这样做（给您一个`Dictionary<string, FileInfo>`）：

```
var queryResult = 
    (from d in directoryInfo.GetFiles()
     where d.Name.EndsWith(suffix) 
     select d).ToDictionary(k=>k.Name, v=>v); 
```

# png - PNG文件结构

> ID：11532992
> 
> 赞同：3
> 
> 时间：2012-07-18T01:12:38.217
> 
> 标签：png, file-format, file-structure

我已经学会了如何根据**BMP 文件结构**（[这里](http://en.wikipedia.org/wiki/BMP_file_format)和[这里](http://www.ue.eti.pg.gda.pl/fpgalab/zadania.spartan3/zad_vga_struktura_pliku_bmp_en.html)）生成 BMP 图像。

现在我正在寻找**PNG文件结构**，但我没有找到任何好的解释。

你知道我在哪里可以找到这个带有方案的解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T01:21:59.997

完整的规范可在此处获得：[http ://www.libpng.org/pub/png/spec/1.2/png-1.2.pdf](http://www.libpng.org/pub/png/spec/1.2/png-1.2.pdf)

请注意，PNG 格式比 BMP 复杂得多，因为它允许压缩等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T01:23:41.690

[维基百科的解释](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Technical_details)呢？好像写得很好，也很容易理解。还有[规范](http://www.libpng.org/pub/png/spec/1.2/png-1.2.pdf)，它涉及到所有内容。

# java - 如何将 Android 应用程序中的地址发送到 Google 地图

> ID：11532993
> 
> 赞同：4
> 
> 时间：2012-07-18T01:12:35.700
> 
> 标签：java, android, maps, street-address

有没有办法在应用程序中设置地址，以便在单击它时自动在谷歌地图中打开它？我最终可能会在我的应用程序中实现地图，但它是一个简单的参考应用程序，只是为了找到地址。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-18T01:25:53.567

您可以通过[Intent](http://developer.android.com/reference/android/content/Intent.html)执行此操作。

您可以使用的各种 URI 格式包括：

```
geo:latitude,longitude
geo:latitude,longitude?z=zoom
geo:0,0?q=my+street+address
geo:0,0?q=business+near+city 
```

有关详细信息，请参阅[http://developer.android.com/guide/appendix/g-app-intents.html 。](http://developer.android.com/guide/appendix/g-app-intents.html)

您构建 URI，并将其传递给意图，如下所示。

```
String uri = "geo:latitude,longitude";
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(uri));
intent.setClassName("com.google.android.apps.maps", "com.google.android.maps.MapsActivity");
startActivity(intent); 
```

您可能还想确保设备上实际安装了 Google Maps 应用程序，如此[处](https://stackoverflow.com/a/7116840/347379)所述，因此您不会与未安装 Google Maps 的设备（Amazon Kindle、Barnes & Noble Nook 等）发生冲突。 ）。

# php - cakephp 1.2 获取 URL 参数

> ID：11532999
> 
> 赞同：2
> 
> 时间：2012-07-18T01:14:18.657
> 
> 标签：php, cakephp, cakephp-1.2

development03/carts/listview/cat_id:5

我想接收 cat_id，即 5。我正在使用 $this->params['catId']) 来获取 cat_id。但是，我在下面收到此错误

注意（8）：未定义索引：catId [APP/controllers/categories_controller.php, line 384]

**控制器**

```
function getCategoryName() {

Debugger::dump($this->params['catId']);

return $this->Category->find('all', array('conditions'=>array('Category.id' => $this->params['catId'] )));
} 
```

**看法**

```
<?php 

$categories = $this->requestAction("/categories/getCategoryName");
foreach ($categories as $category) {
echo $category['Category']['name'];
} ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:17:04.780

我想你正在寻找`$this->params['named']['catId']`

编辑：

显然，在 cakephp 1.2 中，它是`$this->passedArgs['catId']`

从[文档](http://book.cakephp.org/2.0/en/development/routing.html#named-parameters)