# StackOverflow 问答 12495000-12495999

# iphone - 为什么Objective-C中的所有东西都是由*小写创建的？

> ID：12495008
> 
> 赞同：0
> 
> 时间：2012-09-19T12:46:38.197
> 
> 标签：iphone, cocoa, nsstring

我真的很困惑这件事。在任何教程、github 上的代码和文档中，我都看到 BOOL、NSString、NDDictionaries 等都以小写字母开头。例如。NSString *aString 这个有必要吗？如果我在创建 BOOL 等时使用大写字母，是否会毁掉任何东西？我在这里真的很困惑：P 非常感谢任何帮助！

编辑：使用**下划线**然后在 Capitals 中声明变量是个好主意吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T12:47:50.643

这只是风格问题。使用大写字母不会毁掉任何东西，除了你在遵循这种风格的人中的声誉。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T13:56:54.803

**从评论中添加**

它更多的是编码标准。我刚刚参加了 SCJP 考试，他们有一整章是关于编码标准的。由程序员决定他们如何在那里开发代码，但要考虑必须对其进行修改的人。使用大写字母会使阅读更容易还是更难阅读。我的建议是坚持大多数开发人员都理解的编码标准。

同样在编码标准下，您通常会用大写字母和以小写字母开头的变量声明您的类。这样在进行修改时不会让其他开发人员感到困惑，更重要的是不会让您感到困惑。如果您对自己的代码感到困惑，那就不好了。

但标准说它应该是这样的：

```
 NSString *nsString; // Not that you should be having a variable like this. But stops the any confusion.
 [nsString uppercaseString]; 
```

如果你有这个，它会开始变得混乱

```
 // Compile won't actually let you have this just an example of confusion and reserved words. 
 NSString *NSString;
 [NSString uppercaseString]; 
```

在编码标准中，经验丰富的开发人员必须知道，任何以大写字母开头的东西通常都是一个类，而任何以小写字母开头的东西都是一个变量。这几乎适用于所有编程语言。我在学习时确实看到了一些关于编码标准的困惑`prolog`。

[和 Sun一样](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)，Apple 也有编码标准

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T14:01:42.503

它是 Cocoa 中的编码约定之一。

Apple 网站上有一份关于[Cocoa 编码指南的文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html)

遵循这些约定很有用。不仅因为它使您的代码更容易被其他 Cocoa 开发人员阅读，还因为现代 LLVM 编译器有时依赖这些约定，并且您将收到编译器警告，因为您认为是误报而不是因为你的非常规代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T12:50:57.553

这是一个通用标准，可帮助您区分类和类/变量的实例。

不同的语言使用不同的标准，但您应该始终使用您所使用语言的通用样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T12:49:55.913

它被称为camelBack Notation。Ruby 人喜欢 underscore_notation，iOS camelBack。虽然在我看来，它也更容易区分对象（camelBack）和类（大写）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T13:20:49.557

这只是**Objective-C**的**风格或标准**。你也可以像这样声明你的变量 -

 **```
BOOL  MyVariable; 
```

它也可以工作，但会造成混淆 b/wa 类名和变量名，这不是友好的代码。所以我们使用正确`rule`的声明**变量**。**

# asp.net - AJAX ModalPopupExtender 错误未知服务器标记'asp：ModelPopupExtender

> ID：12495010
> 
> 赞同：0
> 
> 时间：2012-09-19T12:46:53.183
> 
> 标签：asp.net, ajax, visual-studio-2010, ajaxcontroltoolkit, modalpopupextender

我在尝试将 AJAx ModalPopupExtender 实施到我的网络应用程序中时遇到问题。

我的应用程序是一个 VS2005 应用程序。作为第一步，我将其转换为 VS2010。目标框架是 4.0。

我下载并安装了 AJAXControlToolkit.Binary.NET4。

在我要放置 ModalPopupExtender 的页面上，我首先放置了一个 ScriptManager。然后我放置了一个面板并添加了一些按钮和列表框。然后我单击面板工具栏上的“添加扩展器”并选择了 ModalPopupExtender。到目前为止，一切都“很好”。但是，当我开始将 popupcontrolid 的属性更改为“panel1”，将 targetcontrolid 的属性更改为“button1”（在我的表单上）...我得到一个带有红色和黑色文本的灰色框，说明：Error Creating Control - Panel1_ModalPopupExtender Undknown server tag 'asp:ModelPopupExtender'。

当我查看页面顶部时，我确实看到了我的注册：

我已经尝试了一切，从更改我的 web.config（根据各种网络文章）到各种其他更改。没运气。

请注意，它似乎“工作”并运行......那是我得到我的弹出窗口。我也可以添加一个非 ModalPopUpExtender ......就像日历到一个文本框......它也会产生一个抱怨标签的错误，但运行。

想法？

我有一个单独的问题处理 ModalPopupExtender 和回发，我将在不同的问题中发布。

# .net - 在实体数据模型中使用 DbContext API 而不是 ObjectContext API

> ID：12495012
> 
> 赞同：1
> 
> 时间：2012-09-19T12:47:00.160
> 
> 标签：.net, entity-framework, ado.net-entity-data-model

> **可能重复：**
> [ObjectContext vs DbContext](https://stackoverflow.com/questions/9176967/objectcontext-vs-dbcontext)

该答案的作者写道[https://stackoverflow.com/a/12494339/1662812](https://stackoverflow.com/a/12494339/1662812) “目前推荐使用 T4 和 DbContext API 的方法来使用 EF”

我仍然想知道在与实体数据模型一起使用时 DbContext API 和 ObjectContext API 之间到底有什么区别，并且我还在寻找有关 DbContext API 的任何参考，这是使用 EF 的推荐方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T12:52:43.510

“DbContext 使用起来比 ObjectContext 简单得多，可以满足最常见的开发需求。如果您需要更多，可以下拉到 ObjectContext 中。

请记住，DbContext 位于 ObjectContext 之上。ObjectContext 总是在后台工作。因此，如果您需要做一些非常精细的事情，DbContext 为其底层 ObjectContext 提供了一个挂钩。”来自[http://thedatafarm.com/blog/data-access/code-first-and-dbcontext-are-now-ldquo-the -entity-framework-rdquo/](http://thedatafarm.com/blog/data-access/code-first-and-dbcontext-are-now-ldquo-the-entity-framework-rdquo/) . 她在 EF 团队，在 Pluralsight 上也有很好的视频。

在我看来，DbContext 更易于使用，并且几乎涵盖了您需要的所有内容。如果我在某处需要它们，我总是制作一个扩展方法来公开对象上下文（来自它的方法）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:52:18.007

我认为朱莉·勒曼是那个来源

[http://msdn.microsoft.com/en-us/magazine/hh781018.aspx](http://msdn.microsoft.com/en-us/magazine/hh781018.aspx)

# makefile - 由于文件名中的特殊字符导致错误退出

> ID：12495014
> 
> 赞同：0
> 
> 时间：2012-09-19T12:47:28.423
> 
> 标签：makefile, aix

我们正在为我们的源文件生成 make 文件，其中一个文件的名称中恰好有一个“#”。make 文件中的依赖语句如下所示：

```
./obj/abc/def#ghi.o: ./src/abc/def#ghi.pli
    ... 
```

导致错误：

```
Zeile 15: make: 1254-055 Abhängigkeitszeilen erfordern einen Doppelpunkt oder doppelten Doppelpunkt als Operator. 
```

我试图转义“#”，但单引号、双引号、一个反斜杠或 2 个反斜杠都不起作用。有没有办法在不重命名文件的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:19:33.437

恐怕您不走运，尤其是使用 AIX 版本的 make。

AIX Make 文档在[此处](http://pic.dhe.ibm.com/infocenter/aix/v6r1/index.jsp?topic=%2Fcom.ibm.aix.cmds%2Fdoc%2Faixcmds3%2Fmake.htm)，并没有提及任何转义`#`字符的方法。

[此处](http://www.gnu.org/software/make/manual/make.html)的 GNU Make 文档提到这是可能的：

> 如果您需要文字#，请使用反斜杠（例如，\#）对其进行转义。注释可能会出现在 makefile 的任何行上，尽管在某些情况下会特别处理它们。

是否有任何理由不能为 AIX 构建 GNU Make 并使用它来代替 AIX make？

# java - Eclipse + hibernate 开发。需要生成 sql 脚本（或创建数据库）的工具

> ID：12495015
> 
> 赞同：0
> 
> 时间：2012-09-19T12:47:29.317
> 
> 标签：java, hibernate

我开发公司应用程序（JSF maven 项目），我们使用 HIbernate。我以前没有使用 Hibernate 的经验。应用程序的创建方式是在从 Eclipse 启动 tomcat 时进行一些自动构建和自动部署。我需要对应用程序进行第一次 http 登录调用（由于 DB 中没有数据，它总是抛出异常）以休眠在服务器上自动创建数据库模式。然后在 MS Sql 服务器查询中手动插入所有数据。是否有某种方式（或eclipse插件）从实体源代码+persistence.xml生成sql创建数据库（所有表）脚本，或者如何在部署应用程序时自动执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:50:33.577

您的休眠配置中的此设置每次都会根据您的休眠实体自动创建架构。其他选项是更新、创建删除和验证。

```
<hibernate-configuration>
    <session-factory>
        <property name="hbm2ddl.auto">create</property> 
```

# android - 自定义列表视图在某些行不显示图像

> ID：12495018
> 
> 赞同：0
> 
> 时间：2012-09-19T12:47:54.387
> 
> 标签：android

我有一个物品清单。其中有名称、价格和产品图片网址。我使用[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader) 这个库从 url 加载 imageview。我面临的问题是 listview 在某些行不显示图像

```
public class BagAdapter extends BaseAdapter {
    int pos;

    Context MyContext;
    public boolean isCloseButtonAvailable;
    Object positionForCheck;
    ViewHolderForBag holder;

    public BagAdapter(Context _MyContext, boolean isavail) {

        MyContext = _MyContext;
        isCloseButtonAvailable = isavail;

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub

        return BagList.getItemCount();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View MyView = convertView;
        pos = position;
        positionForCheck = (Object) pos;
        if (convertView == null) {
            LayoutInflater li = (LayoutInflater) MyContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            MyView = li.inflate(R.layout.shoppingbagrow, null);
            holder = new ViewHolderForBag();
            holder.listitemimageView = (ImageView) MyView
                    .findViewById(R.id.listitemimageView);
            holder.name = (TextView) MyView
                    .findViewById(R.id.DescriptionTextView);
            holder.price = (TextView) MyView.findViewById(R.id.PriceTextView);
            holder.arrowimage = (ImageView) MyView
                    .findViewById(R.id.Arrowimagelistitem);
            holder.editimage = (ImageView) MyView.findViewById(R.id.editimage);
            holder.border = (ImageView) MyView
                    .findViewById(R.id.listitemimageView);

            MyView.setTag(holder);
        } else {
            holder = (ViewHolderForBag) MyView.getTag();
        }

        String producturl="";
        Typeface type= Typeface.createFromAsset(MyContext.getAssets(),"fonts/Helvetica.ttf");

        holder.name.setText("$"
                + BagList.getAllBaglistItems().get(pos).itemName);

        holder.price.setText("$"
                + BagList.getAllBaglistItems().get(pos).itemPrice);
        Double d=Double.parseDouble(BagList.getAllBaglistItems().get(pos).itemPrice.toString());

producturl=String.valueOf(BagList.getAllBaglistItems().get(pos).itemUrl.toString());

    holder.price.setText( String.format("%.2f", d) );
    holder.price.setTypeface(type, Typeface.BOLD);
    holder.name.setTypeface(type, Typeface.BOLD);
        holder.arrowimage.setImageResource(R.drawable.aero);

        ImageLoader imageLoader = ImageLoader.getInstance();
        imageLoader.init(ImageLoaderConfiguration.createDefault(MyContext));
        imageLoader.displayImage(producturl, holder.listitemimageView );

        holder.editimage.setTag(pos);

        if ((position + 1) % 3 == 0)
            holder.border.setVisibility(View.INVISIBLE);
        else
            holder.border.setVisibility(View.VISIBLE);
        if (isCloseButtonAvailable) {
            holder.editimage.setVisibility(View.VISIBLE);
            holder.editimage.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    DatabaseAdapterForBag dbBag = new DatabaseAdapterForBag(
                            MyContext);
                    dbBag.open();

                    int posi = Integer.parseInt(v.getTag().toString());
                    dbBag.deleteFile(BagList.getAllBaglistItems().get(posi).itemSku);
                    dbBag.close();
                    BagList.deleteItem(posi);
                    notifyDataSetChanged();
                }
            });
        } else {
            holder.editimage.setVisibility(View.GONE);
        }
        return MyView;
    }

    public static class ViewHolderForBag {

        // public ImageView listitemimageView;
        public TextView name;
        public TextView price;
        public ImageView border;
        public ImageView arrowimage;
        public ImageView editimage;
        public ImageView listitemimageView;
    }
    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return BagList.getAllBaglistItems().get(position);
    }

    @Override
    public void notifyDataSetChanged() {

        super.notifyDataSetChanged();
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;
    }

} 
```

这是我的适配器类。我在哪里做错了？

# javascript - 如何使用 JavaScript 从 div 标签中过滤掉 HTML 标签

> ID：12495020
> 
> 赞同：1
> 
> 时间：2012-09-19T12:48:00.797
> 
> 标签：javascript, domparser

我有这个 HTML 代码：

```
<div>
    756
    <span></span>
</div> 
```

使用 JavaScript 我想从`div`标签中检索数字 756 并将其递增 1。`<span>`从 div 标签中过滤掉数字的最佳方法是什么，以便我只得到数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:56:49.860

试试这个：

```
var div = document.getElementsByTagName("div")[0],
    content = div.textContent || div.innerText; 
```

`textContent`除 IE8- 外的所有浏览器都`innerText`支持，除 FF4- 外的所有浏览器都支持。所以同时使用两者，你​​应该得到一个稳定的结果。

[http://www.quirksmode.org/dom/w3c_html.html](http://www.quirksmode.org/dom/w3c_html.html)

这两个属性都返回带有去除 HTML 标记的文本内容。

示例： http: [//jsfiddle.net/HnWxk/](http://jsfiddle.net/HnWxk/)（在 chrome/ff/ie7 中测试）

现在，如果您想增加它，只需执行以下操作：

```
content++; 
```

它应该投一个数字：http: [//jsfiddle.net/HnWxk/3/](http://jsfiddle.net/HnWxk/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:52:47.683

你可以使用`.innerText`这样做。

```
var div = document.getElementsByTagName("div")[0];

var inner;
if(div.innerText) {
   inner = div.innerText;
} else {
   inner = div.textContent;
}

var number = parseInt(inner);
number++;
alert(number); 
```

[小提琴](http://jsfiddle.net/fzWXN/1/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:55:50.340

```
<div id="mydiv">
    756
    <span></span>
</div>

<script>
  var textNode = document.getElementById("mydiv").childNodes[0];
  var number = parseInt(textNode.nodeValue);
  textNode.nodeValue= number + 1;
</script>​ 
```

**[演示](http://jsfiddle.net/3jYKa/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-20T10:50:55.213

只是另一种方法可以做到这一点，而无需浏览器不兼容 innerText 和 textContent。在使用正则表达式提取数字后，我使用 innerHTML，此外，建议您在使用 parseInt 时始终定义基数（这将避免我让您发现的一些奇怪的惊喜）并最终增加值。

```
var theNum = parseInt(document.getElementById('someDiv').innerHTML.match(/\d+/), 10);
alert(theNum+=1) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T12:51:51.907

最好的解决方案是将数字包装在自己的`<span>`. 如果这是不可能的（您不创建 HTML 代码），您可以遍历`<div>`. 其中之一将是您要定位的文本节点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T12:56:34.427

```
<div id="number">
    756
    <span></span>
</div>​

d = document.getElementById("number")
n = parseInt(d.innerHTML)+1;
alert(n)​;​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T13:02:05.280

假设这个 html 代码：

```
<div id="someDiv">
  756
  <span></span>
</div> 
```

您可以使用它（使用 jquery）：

```
var div = $("#someDiv");
div.text(parseInt(div.text()) + 1); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-19T13:06:28.340

我在文本上使用 split 来获取数字。
也使用jQuery来获取文本，你可以使用这里人们使用的其他方法。

```
var divText = $('div').text();
var contentArray = divText.split('\n');       
var yay = parseInt(contentArray[1].trim(), 10);
alert(yay);
alert(yay++); 
```

[在这里](http://jsfiddle.net/bldoron/HGtnJ/2/)看小提琴。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-19T13:06:53.633

最好的方法是将数字包装在一个元素中，但您可以解决[此问题](http://codepen.io/anon/pen/qFagm)：

```
var div = document.getElementById('div')
var num = parseInt((div.innerText) ? div.innerText : div.textContent);
div.childNodes[0].nodeValue = num + 1; 
```

# android - 如何从特定的“值”文件夹中获取字符串？

> ID：12495028
> 
> 赞同：0
> 
> 时间：2012-09-19T12:48:35.247
> 
> 标签：android

例如：我有一个多语言应用程序，我想从随机语言中获取一些字符串，用户必须猜测它是什么语言。如何从其他语言获取单个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:24:19.407

[应用程序使用的特定语言字符串取决于在 android 系统 ( Link](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch) )中设置的系统本地。因此，Android 会自动获取正确的值。您不能硬编码要使用的特定（或随机）值。

完成工作的一种方法是以编程方式更改 android 的本地设置：

```
 Locale locale = new Locale("fr");
    Configuration config = new Configuration();
    config.locale = locale;
    getResources().updateConfiguration(config, null);
    getResources().getString(R.string.local_string); 
```

在这种情况下，唯一要做的就是洗牌本地标识符。当然，您应该在更改本地实例之前对其进行保护，以便您可以将其重置为原始状态。祝你好运 ;）

**编辑：**
这是我写的一些脏代码来验证：

```
 Locale orgLocal = getResources().getConfiguration().locale;
    String[] availLocales = { "fr", "de", "en" };
    Locale tempLocale = new Locale(availLocales[new Random().nextInt(availLocales.length)]);
    Configuration config = new Configuration();
    config.locale = tempLocale;
    getResources().updateConfiguration(config, null);
    String randLangString = getResources().getString(R.string.local_string);
    config.locale = orgLocal;
    getResources().updateConfiguration(config, null);
    Toast.makeText(this, randLangString, Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T09:57:35.827

**首先使用此代码更改语言设置**

```
Locale locale = new Locale("kn");
Configuration config = new Configuration();
config.locale = locale;
getResources().updateConfiguration(config, null);
getResources().getString(R.string.local_string); 
```

**然后为支持所有类型的语言使用** **Unicode 字体，例如--“ARIALUNI.TTF”Arial Unicode 字体（复制到资产文件夹）**

```
Typeface font= Typeface.createFromAsset(getAssets(), "ARIALUNI.TTF");  TextView tv1.setTypeface(font);
tv1.setText(R.string.txt); 
```

**从 values-en-for 英语和 values-kn 文件夹中获取 R.string.text 值用于卡纳达语 **

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-11T09:45:58.293

令人惊讶的是，我们只能通过更改配置来启用我们想要的语言。视需要而定

```
Locale locale;
                  locale = new Locale("fr","FR");

        Locale.setDefault(locale);
        Configuration config = new Configuration();
        config.locale = locale;
        this.getActivity().getResources().updateConfiguration(config, this.getActivity().getResources().getDisplayMetrics()); 
```

# android - 使用 AlarmManager.RTC 类型调度的 PendingIntent 仍然在睡眠模式下被调用

> ID：12495040
> 
> 赞同：8
> 
> 时间：2012-09-19T12:49:31.297
> 
> 标签：android, alarmmanager, android-pendingintent

这是我用来为我的小部件设置警报的代码：

```
 private static void setAlarm(Context context) {
    Intent myIntent = new Intent(context, Widget.class);
    myIntent.setAction(AUTO_UPDATE);
    PendingIntent pendingIntent =
            PendingIntent.getBroadcast(context, 0, myIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Service.ALARM_SERVICE);
    Calendar calendar = Calendar.getInstance();
    calendar.setTimeInMillis(System.currentTimeMillis());
    calendar.add(Calendar.SECOND, 8);
    alarmManager.setInexactRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), 8000,
            pendingIntent);
} 
```

但问题是即使在睡眠模式下，`onReceive()`仍然是由意图触发的。

虽然在使用`setInexactRepeating`instead of之后`setRepeating`，在睡眠模式下通话之间的延迟会增加到 1 分钟，但这仍然是耗电的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T23:14:37.720

我相信您将警报设置为在日历时间后 8 秒触发，而您已将其设置为比当前时间提前 8 秒......所以您将警报设置为立即触发。

我看不出你有什么理由在这里需要日历。日历仅用于跟踪未来 8 秒的时间：

```
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(System.currentTimeMillis());
calendar.add(Calendar.SECOND, 8); 
```

在此处创建警报以每 8 秒触发一次：

```
alarmManager.setInexactRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), 8000,
        pendingIntent); 
```

警报继续每八秒触发一次。

我会尝试改变：

```
alarmManager.setInexactRepeating(AlarmManager.RTC, calendar.getTimeInMillis(), 8000,
        pendingIntent); 
```

至：

```
alarmManager.setInexactRepeating(AlarmManager.RTC, System.currentTimeMillis(), 8000,
        pendingIntent); 
```

如果您继续遇到问题，那么间隔可能就是问题所在。尝试更改`setRepeating()`以`set()`查看是否是这种情况。

# java - 如何在 RegEx 中允许空格？

> ID：12495043
> 
> 赞同：0
> 
> 时间：2012-09-19T12:49:34.383
> 
> 标签：java, regex, space

我有以下java代码：

```
public boolean isValidFirstName() {
    return tbFName.getText().trim().matches("^(\\w+)")
            & tbFName.getText().trim() != "";
} 
```

它用给定的验证文本`RegEx`。我想允许用户在`RegEx`. 我是正则表达式的新手。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T12:50:59.273

只需添加空格作为有效字符：

```
public boolean isValidFirstName() {
    return tbFName.getText().trim().matches("^(\\w| )+)")
            & tbFName.getText().trim() != "";
} 
```

在这里，我使用了交替（带有`|`字符）-因此`\w`允许使用 or 空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:55:25.333

```
public boolean isValidFirstName() {
    return tbFName.getText().trim().matches("^[\\w ]+")
            & tbFName.getText().trim() != "";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:57:58.997

要匹配名字（不带 é 或 è 等特殊字符），请使用以下正则表达式：`^[a-zA-Z_ -]+`

# cordova - ChildBrowser 未在 cordova 2.0/phonegap 1.9 中显示网页

> ID：12495044
> 
> 赞同：1
> 
> 时间：2012-09-19T12:49:50.470
> 
> 标签：cordova, phonegap-plugins, cordova-2.0.0, childbrowser

嗨，我试图使用`childbrowser`登录 facebook 并在`cordova 2.0`.

i 安装和配置成功，没有错误。控制台还向我显示消息，例如：“Opening Url *** *”，但不会出现浏览器。

那么我如何在`cordova 2.0`phonegap应用程序中解决这个问题。

任何明显的帮助。Milan Mendpara

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T03:41:40.813

我通过在 Cordova.plist 文件的插件部分下添加“ChildBrowser”作为键/值来解决它，并且还尝试了：

[http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/](http://blog.digitalbackcountry.com/2012/03/installing-the-childbrowser-plugin-for-ios-with-phonegapcordova-1-5/)

# android - Android .rc 文件有什么用

> ID：12495049
> 
> 赞同：6
> 
> 时间：2012-09-19T12:50:01.153
> 
> 标签：android, linux, rc

Android框架中.rc文件有什么用。我看到很多文件有什么目的。我也对 linux 有一点了解，但我看到了类似的命令

```
mkdir /dirName 0777 abc def 
```

这意味着什么。如果我在 GNU-Linux 上运行此命令，它会创建名为 dirName、0777、abc 和 def 的文件夹。我知道这就像在创建目录时授予权限一样，abc 和 def 有点像所有者或 root，但不确定。.rc 文件中的命令在 Linux 普通内核和 Android linux 内核中运行是否不同。是否有任何链接或在线资料可供学习以了解我们如何在 Android 中编写和使用 .rc 文件。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-20T07:01:32.047

谢谢回复。我已经知道 .rc 文件包含编译器的说明以及 .rc 文件的用途。（[.rc 文件的定义](http://linux.about.com/cs/linux101/g/rcfile.htm)）。

我更关心它在 Android 上下文中的使用以及如何使用命令。经过大量搜索，我终于找到了一个解释它的基础知识的链接（[Android INIT Language](https://github.com/aosp-mirror/platform_system_core/blob/master/init/README.md)）。

在我的问题中，我询问了 mkdir 命令用法在 android .rc 文件中有何不同，它在[此链接](https://github.com/aosp-mirror/platform_system_core/blob/master/init/README.md)的自述文件中得到了很好的解释。

再次感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:29:44.120

.rc 文件包含编译器的指令。

这个[来源](http://www.ehow.com/facts_5697167_file-extension-rc_.html)解释得更好。 [Marakana](http://marakana.com/static/courseware/android/internals/index.html)处理了一点 GNU 命令行和类似的东西。我不确定我是否完全按照您的要求回答了您的问题，但希望这会为您指明正确的方向。

# excel - 数组并用于插入大量代码

> ID：12495050
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:50:02.310
> 
> 标签：excel, excel-2010, vba

现在我制作了一个宏，它创建了两个从不同工作表中获取值的图表。我认为现在代码太多了。我想以某种方式减少它。

这是我的代码

```
Sub AddChart(namn As String, UxV As String, UyV As String, AxV As String, AyV As String, ExV As     String, EyV As String, CA As Integer)

With ThisWorkbook.Worksheets("Chart").ChartObjects.Add(200, 200, 600, 400).Chart
    .Parent.Name = namn

    If Not .HasTitle Then
        .HasTitle = True
        .ChartTitle.Text = namn
    End If

    .ChartType = xlXYScatterSmoothNoMarkers
    .Axes(xlValue).CrossesAt = CA
    .Axes(xlCategory).TickLabels.NumberFormat = "YYYY-MM-DD"

    With .SeriesCollection.NewSeries
        .Name = "Us"
        .XValues = UxV
        .Values = UyV
    End With

    With .SeriesCollection.NewSeries
        .Name = "Ai"
        .XValues = AxV
        .Values = AyV
    End With

    With .SeriesCollection.NewSeries
         .Name = "Eu"
         .XValues = ExV
         .Values = EyV
    End With
End With
End Sub
--------------------

Sub calsub()

Dim n As String
Dim CA As Integer
Dim UxT As String
Dim UyT As String
Dim AxT As String
Dim AyT As String
Dim ExT As String
Dim EyT As String

Dim n2 As String
Dim CA2 As Integer
Dim UxP As String
Dim UyP As String
Dim AxP As String
Dim AyP As String
Dim ExP As String
Dim EyP As String

n = "Temperature"
SxT = "=US!A2:A372"
SyT = "=US!C2:C370"
NxT = "=AI!A2:A472"
NyT = "=AI!C2:C472"
FxT = "=EU!A2:A572"
FyT = "=EU!C2:C572"
CA = -20

n2 = "Precipitation"
SxP = "=US!A2:A372"
SyP = "=US!D2:D372"
NxP = "=AI!A2:A371"
NyP = "=AI!D2:D371"
FxP = ""
FyP = ""
CA = -100

Call AddChart(n, UxT, UyT, AxT, AyT, ExT, EyT, CA)
Call AddChart(n2, UxP, UyP, AxP, AyP, ExP, EyP, CA)

End Sub 
```

我正在考虑以某种方式在下面创建它

```
Sub AddChart(namn As String, xV() As String, yV() As String, CA As Integer) <------

With ThisWorkbook.Worksheets("Chart").ChartObjects.Add(200, 200, 600, 400).Chart
    .Parent.Name = namn

    If Not .HasTitle Then
        .HasTitle = True
        .ChartTitle.Text = namn
    End If

    .ChartType = xlXYScatterSmoothNoMarkers
    .Axes(xlValue).CrossesAt = CA
    .Axes(xlCategory).TickLabels.NumberFormat = "YYYY-MM-DD"

for -----------> 

    With .SeriesCollection.NewSeries
        .Name = "Us"
        .XValues = UxV
        .Values = UyV
    End With

next <-----------

End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:13:30.237

好吧，如果你的范围保持不变，你可以使用类似的东西

```
For each wks in activeworkbook.worksheets 
```

或者组成一组相关的工作表来循环遍历。

那么你会有

`.Name = wksArray(i).name`或者`.Name = wks.name`不是 `.Name = "Us"'

您的数组也可以是多维的，因此您可以编写如下代码：

```
 .Name = array(i,1).name
    .XValues = array(i,2)
    .Values = array(i,3) 
```

# python - mongoDB 和流数据 - 如何获得最新结果？

> ID：12495054
> 
> 赞同：1
> 
> 时间：2012-09-19T12:50:11.230
> 
> 标签：python, mongodb

我正在制作一个不断填充日期敏感数据的 mongoDB（使用 pymongo）。我想检索这些数据，但要确保它始终是我得到的最新数据。

有了`.find()`我应该能够做到这一点，对吧？

另外，我应该索引数据库吗？

至于效率，一万并发连接到一个mongodb会是个问题吗？

非常感谢任何小建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:01:11.980

mongo 游标实际上是来自数据库的流，因此您假设这样做：

```
find({}).sort({date: -1}) 
```

将获得最新记录流。这里有超时问题。如果您要将其用作 pubsub 函数，则最好使用可尾游标等。

您应该始终索引该字段。毫无疑问，因为您通过对其应用排序来查询该字段。

> 至于效率，一万并发连接到一个mongodb会是个问题吗？

最后一行是非常主观的。我不确定如何在不知道您的文档、预期索引大小、工作集大小、服务器设置和一大堆其他事情的情况下回答这个问题。

# c# - 谷歌文档列表api

> ID：12495056
> 
> 赞同：1
> 
> 时间：2012-09-19T12:50:14.527
> 
> 标签：c#, .net

我一直按照以下链接使用.net 将我的网络应用程序集成到谷歌文档。

[https://developers.google.com/google-apps/documents-list/](https://developers.google.com/google-apps/documents-list/)

一旦我检索了 docos 列表，我无法打开/查看文档。我已经尝试过他们提供的示例，但它似乎不起作用。

如何做到这一点？理想情况下，单击它应该只在 Web 浏览器中打开文档。

# django - 狮身人面像：“/（10054，''）处的错误”

> ID：12495057
> 
> 赞同：0
> 
> 时间：2012-09-19T12:50:21.153
> 
> 标签：django, postgresql, sphinx

我使用 Django、posgresql、Sphinx 2.0.5

搜索功能：

```
def search(S):
    from sphinxapi import SphinxClient, SPH_MATCH_ANY, SPH_SORT_RELEVANCE
    client = SphinxClient()
    client.SetServer('127.0.0.1', 5432)
    client.SetMatchMode(SPH_MATCH_ANY)
    client.SetSortMode(SPH_SORT_RELEVANCE)
    client.SetFieldWeights({'header': 20, 'text': 10})
    result = client.Query(S, '*') 
```

狮身人面像.conf：

```
source src1
{
    type            = pgsql

    sql_host        = localhost
    sql_user        = blizzard_moz455_1_3
    sql_pass        = <pwd>
    sql_db          = blizzard_moz455_1_3
    sql_port        = 5432

    sql_query       = \
        SELECT id, header, text \
        FROM app_main

    sql_query_info      = SELECT * FROM app_main WHERE id=$id
}

index test1
{
    source          = src1
    path            = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data/test1
    docinfo         = extern
    charset_type        = sbcs
}

index testrt
{
    type            = rt
    rt_mem_limit        = 32M

    path            = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data/testrt
    charset_type        = utf-8

    rt_field        = title
    rt_field        = content
    rt_attr_uint        = gid
}

indexer
{
    mem_limit       = 32M
}

searchd
{
    listen          = 9312
    listen          = 9306:mysql41
    log         = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/log/searchd.log
    query_log       = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/log/query.log
    read_timeout        = 5
    max_children        = 30
    pid_file        = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/log/searchd.pid
    max_matches     = 1000
    seamless_rotate     = 1
    preopen_indexes     = 1
    unlink_old      = 1
    workers         = threads # for RT to work
    binlog_path     = D:/blizzard/Projects/Python/Web/moz455/app/sphinx/data
} 
```

我用命令开始搜索

```
D:/Old/Sphinx/bin/searchd --config D:/Old/Sphinx/bin/sphinx.conf 
```

当我启动 Django 并转到 localhost:8000 页面加载大约半分钟然后出现以下错误：

```
error at /
(10054, '') 
```

追溯：

```
D:\blizzard\Projects\Python\Web\venv\Lib\site-packages\django\core\handlers\base.py in get_response
response = callback(request, *callback_args, **callback_kwargs)

D:\blizzard\Projects\Python\Web\moz455\app\views.py in index
search("style")

D:\blizzard\Projects\Python\Web\moz455\app\views.py in search
result = client.Query(S, '*')

D:\blizzard\Projects\Python\Web\moz455\app\sphinxapi.py in Query
results = self.RunQueries()

D:\blizzard\Projects\Python\Web\moz455\app\sphinxapi.py in RunQueries
sock = self._Connect()

D:\blizzard\Projects\Python\Web\moz455\app\sphinxapi.py in _Connect
v = unpack('>L', sock.recv(4)) 
```

这个错误是什么意思，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:29:00.730

```
 client.SetServer('127.0.0.1', 5432) 
```

您正在尝试连接到端口 5432。但是

```
listen          = 9312
listen          = 9306:mysql41 
```

建议您在端口 9312 上侦听 sphinx。

您应该使用相同的端口！

# eclipse - 通过快捷方式在 Editor 和 Logcat 之间切换无法正常工作

> ID：12495058
> 
> 赞同：5
> 
> 时间：2012-09-19T12:50:30.800
> 
> 标签：eclipse, shortcut, logcat

在 Eclipse 3.7.2 中按 CTRL+F7 会给我一个在视图之间切换的小对话框。（作为系统窗口的 ALT+TAB）

我的大部分视图都停靠为“快速视图”，以保持我的工作空间干净。在包括 logcat 在内的所有视图之间跳转完美，但在 logcat 和编辑器之间跳转，这里什么都没有发生 不推荐使用的 logcat 视图可以正常工作。

单击底部的小图标会显示 logcat，但快捷方式不起作用。

任何人也有这个问题并有解决方案吗？一直用鼠标打开logcat很蛋疼。

感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-23T05:28:02.040

感谢您的快捷方式。在 Windows 上，我可以通过按 ctrl+f7 在“Log Cat”和“Editor”之间切换。

要导航到某个其他窗口透视图，请使用键盘而不抬起 ctrl 按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-06T02:24:22.327

这是一个错误。Logcat 只是在屏幕上闪烁然后离开。您可以使用更改视图快捷方式转到另一个视图，例如控制台或问题，然后您可以从那里正常切换到 logcat。这很烦人，但它比一年中的任何一天一直到达鼠标都要好

# php - 如何在 php 语音标记之间插入 html

> ID：12495063
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:50:39.927
> 
> 标签：php, html

如何在一段 php 代码的“和”之间插入 html。

我想在它说的地方插入 html 代码`hello`- 但它不会让我。

```
 $this->setError($postName, ucfirst($postName)." hello.");
} else if(strlen($postVal) > intval($max)) { 
```

我想在它打招呼的地方插入这段代码。

```
 <div class="alert alert-success">
  <button type="button" class="close" data-dismiss="alert">&times;</button>
          <strong>Thank You!</strong> We hope to get back to you shortly.
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:52:08.410

```
 $str = '<div class="alert alert-success">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <strong>Thank You!</strong> We hope to get back to you shortly.
            </div>';

    $this->setError($postName, ucfirst($postName).$str);
} else if(strlen($postVal) > intval($max)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T12:53:18.050

您只需将该 HTML 代码添加到变量中，然后简单地连接到您想要的位置。

所以类似于：

```
$html = '<div class="alert alert-success">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <strong>Thank You!</strong> We hope to get back to you shortly.
</div>';

    $this->setError($postName, ucfirst($postName).$html);
} else if(strlen($postVal) > intval($max)) { 
```

希望这可以帮助。:) （对不起，如果这属于评论，实际上不能在问题中发表评论。）

# java - 参数的Java模式只有一个需要为非空？

> ID：12495069
> 
> 赞同：2
> 
> 时间：2012-09-19T12:50:57.770
> 
> 标签：java, parameters, null

上次我经常写长函数，有几个参数，但只使用其中一个，功能只是在散布在函数周围的几个关键点上有所不同。因此，拆分函数会创建太多没有目的的小函数。这是好的风格还是有一个好的通用重构模式？为了更清楚，举个例子：

```
public performSearch(DataBase dataBase, List<List<String>> segments) {performSearch(dataBase,null,null,segments);}
public performSearch(DataBaseCache dataBaseCache,List<List<String>> segments) {performSearch(null,dataBaseCache,null,segments);}
public performSearch(DataBase dataBase, List<String> keywords {performSearch(dataBase,null,keywords,null);}
public performSearch(DataBaseCache dataBaseCache,List<String> keywords) {performSearch(null,dataBaseCache,keywords,null);}

/** either dataBase or dataBaseCache may be null, dataBaseCache is used if it is non-null, else dataBase is used (slower). */
private void performSearch(DataBase dataBase, DataBaseCache dataBaseCache, List<String> keywords, List<List<String>> segments)
{
 SearchObject search = new SearchObject();
 search.setFast(true);
 ...
 search.setNumberOfResults(25);

 if(dataBaseCache!=null) {search.setSource(dataBaseCache);}
 else                    {search.setSource(dataBase);}

 ... do some stuff ...
 if(segments==null) 
 {
  // create segments from keywords 
  ....
  segments = ...
  }
} 
```

这种代码风格有效，但我不喜欢所有那些 null 参数以及调用这样错误的方法的可能性（两个参数都为 null，如果两者都是非 null 会发生什么）但我也不想编写 4 个单独的函数...我知道这可能太笼统了，但也许有人对这个问题的原则有一个通用的解决方案:-)

PS：我不喜欢拆分一个长函数，如果除了它很长之外没有其他原因（即如果子函数只按该顺序调用并且仅由这个函数调用），特别是如果它们紧密交织并且需要在它们周围传输大量参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:04:41.630

我认为这是非常糟糕的程序风格。尽量避免这样的编码。由于您已经拥有大量此类代码，因此可能很难重构它，因为每个方法都包含自己的逻辑，与其他方法略有不同。顺便说一句，它很难的事实证明这种风格很糟糕。

我认为您应该使用行为模式，例如

1.  责任链
2.  命令
3.  战略
4.  模板法

这可以帮助您将程序代码更改为面向对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:19:33.083

期望空值是一种反模式，因为它会在您的代码中乱扔 NullPointerExceptions 等待发生。使用构建器模式构建`SearchObject`. 这是你想要的签名，我会让你弄清楚实现：

```
class SearchBuilder {
   SearchObject search = new SearchObject();
   List<String> keywords = new ArrayList<String>();
   List<List<String>> segments = new ArrayList<List<String>>();

   public SearchBuilder(DataBase dataBase) {}
   public SearchBuilder(DataBaseCache dataBaseCache) {}
   public void addKeyword(String keyword) {}
   public void addSegment(String... segment) {}

   public void performSearch();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:01:53.083

你能用这样的东西吗

```
public static <T> T firstNonNull(T...parameters) {
    for (T parameter: parameters) {
        if (parameter != null) {
            return parameter;
        }
    }
    throw new IllegalArgumentException("At least one argument must be non null");
} 
```

它不会检查多个参数是否不为空并且它们必须属于同一类型，但您可以像这样使用它：

```
search.setSource(firstNonNull(dataBaseCache, database)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:21:16.667

我同意亚历克斯所说的。在不知道问题的情况下，我会根据示例中的内容推荐以下结构：

```
public interface SearchEngine {
  public SearchEngineResult findByKeywords(List<String> keywords);
}

public class JDBCSearchEngine {
  private DataSource dataSource;

  public JDBCSearchEngine(DataSource dataSource) {
     this.dataSource = dataSource;
  }

  public SearchEngineResult findByKeywords(List<String> keywords) {
     // Find from JDBC datasource
     // It might be useful to use a DAO instead of datasource, if you have database operations other that searching
  }
}

public class CachingSearchEngine {
  private SearchEngine searchEngine;

  public CachingSearchEngine(SearchEngine searchEngine) {
    this.searchEngine = searchEngine;
  }

  public SearchEngineResult findByKeywords(List<String> keywords) {
    // First check from cache
    ...
    // If not found, then fetch from real search engine
    SearchEngineResult result = searchEngine.findByKeywords(keywords);
    // Then add to cache
    // Return the result
    return result;
  }
} 
```

# c++ - Qt + OpenCV 灰度错误

> ID：12495072
> 
> 赞同：2
> 
> 时间：2012-09-19T12:51:09.017
> 
> 标签：c++, qt, opencv

我一直在尝试为使用 OpenCV 和 C++ 的图像处理任务制作一个简单的界面，并使用 Qt 作为 GUI。我可以通过 GUI 加载图像，但是当我按下 pushbutton_3 时，将图像转换为灰度会导致有关 OpenCV 的错误。我确定我做错了什么。有人可以帮我吗？

请参阅以下文件：

```
//mainwindow.h

#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QFileDialog>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <vector>

#include <QtCore/QCoreApplication>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/core/types_c.h>
#include <opencv2/imgproc/imgproc.hpp>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_pushButton_clicked();

    void on_pushButton_2_clicked();

    void on_pushButton_3_clicked();

private:
    Ui::MainWindow *ui;
    //Images variables
    cv::Mat image_Idl;
    cv::Mat image_Lit;
    cv::Mat image_Idl_G;
    cv::Mat image_Lit_G;
    double threshHold;

};

#endif // MAINWINDOW_H

//mainwindow.cpp
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <iostream>
#include <QtCore/QCoreApplication>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/core/types_c.h>
#include <opencv2/imgproc/imgproc.hpp>
#include <QSpinBox>
#include <QSlider>
#include <stdio.h>
#include <stdlib.h>
#include <vector>

using namespace std;

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    ui->horizontalSlider->setRange(0,255);
    ui->spinBox->setRange(0,255);

    connect(ui->horizontalSlider,SIGNAL(valueChanged(int)),ui->spinBox,SLOT(setValue(int)));
    connect(ui->spinBox,SIGNAL(valueChanged(int)),ui->horizontalSlider,SLOT(setValue(int)));

}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    QString fileName = QFileDialog::getOpenFileName(this,tr("Load Lit Image"),".",tr("Image Files (*.png *.jpg *.jpeg *.bmp)"));
    image_Lit = cv::imread(fileName.toAscii().data());
    cv::namedWindow("Lit Image");
    cv::imshow("Lit Image", image_Lit);
}

void MainWindow::on_pushButton_2_clicked()
{
    QString fileName = QFileDialog::getOpenFileName(this,tr("Load Lit Image"),".",tr("Image Files (*.png *.jpg *.jpeg *.bmp)"));
    image_Idl = cv::imread(fileName.toAscii().data());
    cv::namedWindow("Ideal Lit");
    cv::imshow("Ideal Lit", image_Idl);

}

void MainWindow::on_pushButton_3_clicked()
{
    //Converstions

    //Convert Lit to gray

        cv::cvtColor(image_Lit, image_Lit_G,CV_RGB2GRAY);

    //Convert Ideal gray

        cv::cvtColor(image_Idl, image_Idl_G,CV_RGB2GRAY);

      //Threshold the Images to a designated value
                // Lit

        threshHold = ui->horizontalSlider->value();

          cv::threshold(image_Lit_G,image_Lit_G, threshHold,255,cv::THRESH_BINARY);
          cv::namedWindow("Gray Scaled Image");
          cv::imshow("Gray Scaled Image", image_Lit_G);

} 
```

来自编译器的错误：

传递给 C 运行时函数的参数无效。传递给 C 运行时函数的参数无效。OpenCV Error: Assertion failed (scn == 3 || scn == 4) in cvtColor, file C:\OpenCV\modules\imgproc\src\color.cpp, line 2834 程序意外完成。

弹窗错误：

微软视觉 C++

此应用程序按要求以不寻常的方式终止。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T17:03:44.503

```
#include "iostream"
#include "cv.h"
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>

using namespace cv;
using namespace std;

int main()
{
    Mat image = imread("C:\\lena.jpg");
    cvtColor(image,image,CV_RGB2GRAY);
    imshow("test",image);
    waitKey();
    return 0;
} 
```

上面的代码（Qt 中的控制台应用程序..）正在工作......它显示了一个灰色图像......尝试包含**cv.h**文件......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:40:33.703

在更新了我的 windows7 机器后，我重新编译了上面的程序，结果令人惊讶！它真的很奇怪......我没有对程序进行任何更改（至少我不记得做了任何明显不同的事情）但是在重新安装 comodo firewal 之后它起作用了......谢谢大家，您的帮助。

# google-maps - 有下载 Maps API 风格主题的地方吗？

> ID：12495076
> 
> 赞同：2
> 
> 时间：2012-09-19T12:51:14.880
> 
> 标签：google-maps

我知道有一个地图样式向导，但它从默认的地图样式开始。我在网上看到很多风格地图非常相似，我想从一张已经有风格的地图开始，然后从那里调整它。某处是否有不同风格的地图画廊，我可以将风格复制到我的地图中？

# android - 应用程序意外停止。请再试一次。这是重复错误

> ID：12495078
> 
> 赞同：-5
> 
> 时间：2012-09-19T12:51:17.727
> 
> 标签：android, performance

> 我编写了以下代码，启动应用程序时出现错误。
> 
> **错误是应用程序已意外停止。请再试一次。**

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        PowerManager pm= (PowerManager)getSystemService(Context.POWER_SERVICE);
        PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "my Tag");
        wl.acquire();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:58:25.183

您是否在清单中设置了所需的权限？在你的 mainfest 文件中使用它。

```
<uses-permission android:name="android.permission.WAKE_LOCK" /> 
```

# javascript - 使用锚标记或输入标记在我的计算机上打开特定位置

> ID：12495081
> 
> 赞同：1
> 
> 时间：2012-09-19T12:51:24.230
> 
> 标签：javascript, html

我的要求是创建一个链接或一个按钮，单击它应该在我的计算机上打开一个指定的位置，我不能使用 jquery，但我可以使用 javascript。

我尝试通过如下编码来处理输入标签，但不符合要求。

```
 <html>
 <head>
    ...
    <meta charset="ISO-8859-1">
    <title>Conversion Successful</title>
    <link href="xml.css" type="text/css" rel="Stylesheet">
 </head>
 <body>
    <h1 class=heading_position>Conversion Completed Successfully</h1>
    <div class="box">
       <input readonly="readonly" type="file" value="D:/Office/xmlautomation/">
    </div>
 </body>
 </html> 
```

我是 html 的初学者，仍在弄清楚东西是如何工作的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:02:14.733

假设您不太关心控制文档/位置的打开方式，这在 Internet Explorer（6 和更早版本）中是可能的。

出于安全原因，在 IE 或我知道的任何其他浏览器（Chrome/FF）中不再可能（您是否希望您访问的随机站点能够在您的桌面上启动文件夹/应用程序？）。

为了记录，旧的语法通常是空白的`file://[Host]/D:/Office/xmlautomation/`，`[Host]`所以像......

```
<a href="file:///D:/Office/xmlautomation/">Office Automation</a> 
```

会打开有问题的目录。

注意：如果这些 URL被列在一个没有通过网络检索到的文件中，它们仍然可以工作（例如，如果你*将*一个 html 文件从计算机拖放到浏览器上，这些链接应该可以工作）。这样可以在没有 Web 服务器的情况下打开相互引用的本地 html 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-21T05:36:58.337

您也可以使用 javascript。
刚刚试过，只要`C$`是共享的，它对我来说就很好。

```
<html>
<body>
   <input onclick="CallMe()" value="ABX" />
   <script>
      function CallMe() {
        // alert('test');
        window.open("file://smewara/C$");
      }
   </script>   
</body>
</html> 
```

这应该可以帮助您：[HTML/JS 打开一个 C$ 驱动器的窗口](https://stackoverflow.com/questions/3111489/html-js-open-a-window-to-the-c-drive)

# windows - Windows 驱动程序签名

> ID：12495082
> 
> 赞同：0
> 
> 时间：2012-09-19T12:51:27.320
> 
> 标签：windows, driver, code-signing

我公司正在为我们的硬件开发驱动程序。现在我需要为 32 位和 64 位平台签署我的驱动程序。

请告诉我，现在我需要购买 Authenticode 证书，对吗？

使用什么 CA？

数字证书？全球标志？( [http://www.sslshopper.com/microsoft-authenticode-certificates.html](http://www.sslshopper.com/microsoft-authenticode-certificates.html) ) 赛门铁克？（[http://www.symantec.com/verisign/code-signing/microsoft-authenticode](http://www.symantec.com/verisign/code-signing/microsoft-authenticode)）

这个 CA 提供的有什么区别？

我需要使用 WDK 的工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:29:10.320

您需要一个满足内核模式代码签名策略 (KMCS) 的证书。

这是可能的证书颁发机构的[MSDN 列表](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487315.aspx)。

**但是**，似乎 WHQL（或当前的名称）需要 Verisign 证书才能让您参与 Windows 徽标的 WHQL 程序......所以如果需要 Windows 徽标，我会购买 Verisign 证书未来。

# php - 我怎样才能删除 从变量标记而不使用strip_tags？

> ID：12495084
> 
> 赞同：2
> 
> 时间：2012-09-19T12:51:28.943
> 
> 标签：php, regex, html

这是我的代码

```
$str="<div>this is the variable</div>"; 
```

我想在`<div>`不使用 strip_tags 的情况下删除它的 html 标签。我需要`$str="this is the variable"` 因为我的服务器没有使用 strip_tags。我知道 preg_replace 是可能的。但我不知道正则表达式。所以请给我建议解决方案。

先感谢您。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T13:00:56.857

如果 DIV 标记包含属性，此变体也有效：

```
$str = '<div id="some_id">this is the variable</div>';
$str = preg_replace('/\<[\/]{0,1}div[^\>]*\>/i', '', $str);
echo $str; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T12:55:11.273

```
$s = "<div>this is the variable</div>";
echo preg_replace("/<div>(.*?)<\/div>/", "$1", $s);
// this is the variable 
```

[当然，不要用正则表达式解析 HTML :-)]

**[演示](http://ideone.com/cBloy)**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T13:02:29.930

如果要删除文本周围的标签并保留其他标签，请使用：

```
$node = new DOMDocument();
$str = $node->loadXML($str)->firstChild->textContent; 
```

警告：这只会删除第**一个包装标签**

这会将 HTML 解析为标记，它就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T12:58:47.143

你可以这样做：

```
$str="<div>this is the variable</div>";
$str = preg_replace('/<(.*?)>/i', '', $str); 
```

这将删除所有 html 标签，不仅`<div>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-11T18:48:53.320

利用

```
preg_replace("#<div>(.*?)</div>#s", "$1", $s); 
```

`s`- 一个 DOTALL 修饰符，`.`匹配换行符。

`#`- 与 不同的正则表达式分隔符`/`，并且由于它们，不需要转义`/`.

**解释**

```
--------------------------------------------------------------------------------
  <div>                    '<div>'
--------------------------------------------------------------------------------
  (                        group and capture to \1:
--------------------------------------------------------------------------------
    .*?                      any character (0 or more times, the least amount possible))
--------------------------------------------------------------------------------
  )                        end of \1
--------------------------------------------------------------------------------
  </div>                   '</div>' 
```

这`$1`是对用括号内的第一组捕获的文本的**反向引用。**

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-19T12:55:52.983

如果您只在这样的 div 标签之后，您可以尝试

```
preg_replace("</?div>","",$string); 
```

当然有人可能会提到[不要用正则表达式解析 html](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)

# jquery - 使用 ajax 时 wordpress 插件出现 500 错误

> ID：12495088
> 
> 赞同：0
> 
> 时间：2012-09-19T12:51:39.843
> 
> 标签：jquery, ajax, wordpress

我正在为我的WordPress站点创建一个插件，该插件在更改了选择框时，然后通过调用WordPress数据库来更改以下选择选项。

对于我的生活，我无法让它发挥作用。

这是wordpress编码：

```
function ubl_ug_load_ajax(){
    if(isset($_GET['page']) && $_GET['page'] == 'ubl-unlimited-galleries-image'){

        wp_enqueue_script('ubl-ajax', plugin_dir_url(__FILE__) . 'js/ubl-ajax.js', array('jquery'));

    } else {
        return;
    }
}

add_action('admin_enqueue_scripts','ubl_ug_load_ajax');

function ubl_uimages_page(){

global $wpdb;

    // GET CATEGORIES
    $getcatsforimages = $wpdb->get_results("SELECT id, galleryname FROM ubl_galleries");

    if($getcatsforimages){

        // ADD MODE
        if(!isset($_GET['ublmode'])){

            $ublerrors = array();

            $galleryname = '';
            $gallerycats = '';

            if(isset($_POST['issent'])){

                // do something

            }

            $output = '

                <style>
                h1{padding:0px 0px 10px 0px;margin:0px;}
                h3{padding:40px 0px 10px 0px;margin:0px;}
                .wrap{margin:0px;padding:15px;width:50%;}
                .widget .widget-top, .postbox h3, .stuffbox h3{padding:5px 10px; color:#1e1e1e}
                .widget, #widget-list .widget-top, .postbox, #titlediv, #poststuff .postarea, .stuffbox{
                    background-color:white;
                }
                .postbox .inside, .stuffbox .inside{padding:20px;background-color:whiteSmoke;}
                .red{color:red;}
                .green{color:green;}
                .regular-text{margin-bottom:20px;}
                h4{margin:0px;padding:8px 0px 3px 0px;}
                .inside > p{padding:3px;margin:0px;}
                hr{border-color:white;background-color:white;}
                .stuffbox img{max-width:300px;height:auto;}
                </style>

            ';

            $output .= '<div class="wrap">';

            $output .= '<h1>Add New Gallery</h1>';
            $output .= '<form method="post" action="" enctype="multipart/form-data">';
            $output .= '<input name="issent" type="hidden" value="1" />';
            $output .= '<div class="stuffbox"><h3><label>Gallery Details</label></h3><div class="inside">';
            $output .= '<h4>Gallery Name</h4><p>';
            $output .= '<select name="galleryname" class="galleryname">';
            foreach($getcatsforimages as $getc){
            $output .= '<option value="'.$getc->id.'">'.$getc->galleryname.'</option>';
            }
            $output .= '</select>';
            $output .= '<hr>';
            $output .= '<h4>Gallery Categories &amp Slude</h4><p class="gallerycats"></p>';
            $output .= '<p>Please Choose A Category</p>';
            $output .= '</div></div>';
            $output .= '</form>';
            $output .= '</div>';

            echo $output;

        }

    } else { ?>
    <div class="wrap"><h1>Please Create Galleries First</h1></div>
    <?php }

} 
```

这是ajax文件编码：

```
jQuery(document).ready(function() {

        jQuery(".galleryname").change(function(){

            var ubl_get_results=jQuery(this).val();
            var url = '../wp-content/plugins/ul/ajax.php'

            data = {
                 ajaxid: ubl_get_results,
                };

            jQuery.post(url, data , function (data) {

                //jQuery('.gallerycats').html(response);

                alert(data);

            });

        return false;
        });

}); 
```

然后这里是 ajax 也发布的 php 文件：

```
if(isset($_REQUEST['ajaxid'])){

    echo 'this works';

} else {

    echo 'Could Not Do This';

} 
```

# facebook-graph-api - 如何使用 Tornado 向 Facebook 发布内容

> ID：12495089
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:51:41.750
> 
> 标签：facebook-graph-api, oauth-2.0, tornado, publish-subscribe

[tornado](https://github.com/facebook/tornado)接受*OAuth1、2*和*OpenID*，并从*SO*中搜索：*OpenID*只是*登录*，*OAuth*是告诉其他服务（例如*Facebook*）：**好的，来我的帐户，并使用我给你的使用权限**。

所以正因为如此，如何在我的*Facebook*墙上打印一个简单的“hello world”，因为如果这可行，那么人们将避免在他的应用程序中使用 pubsub，并让 Facebook 显示通知（因为很有可能用户拥有 Facebook 帐户）。

注意：Tornado 附带[的示例是“如何从本地主机查看](https://github.com/facebook/tornado/tree/master/demos/facebook)*我的*通知”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:44:37.983

这里是如何，你需要这个：[Python-Facebook SDK](https://github.com/pythonforfacebook/facebook-sdk)，你将它添加到 facebook 示例中，不知道它是否是非阻塞的，但我看到`self._on_stream`我认为它是一个回调，所以它是非阻塞的？

```
import facebook 

class MainHandler(BaseHandler, tornado.auth.FacebookGraphMixin): 
    @tornado.web.authenticated 
    @tornado.web.asynchronous 
    def get(self): 
        self.facebook_request("/me/home", self._on_stream, access_token=self.current_user["access_token"]) 
    a = self.current_user["access_token"] 
    print a # for debug
    graph = facebook.GraphAPI(a) 
    graph.put_object("me", "feed", message="I am writing on my wall!") 
```

注意：**5分钟内只能发一次消息**

# java - CacheResponseStatus 枚举让我有点困惑

> ID：12495090
> 
> 赞同：1
> 
> 时间：2012-09-19T12:51:48.660
> 
> 标签：java, caching, httpclient

任何人都可以解释为什么**CacheResponseStatus**定义这两个值？

```
CACHE_HIT  A response was generated from the cache with no requests sent upstream.

CACHE_MODULE_RESPONSE The response was generated directly by the caching module. 
```

对我来说，两者都是平等的，因为缓存提供了响应。

[http://hc.apache.org/httpcomponents-client-ga/httpclient-cache/apidocs/org/apache/http/client/cache/CacheResponseStatus.html](http://hc.apache.org/httpcomponents-client-ga/httpclient-cache/apidocs/org/apache/http/client/cache/CacheResponseStatus.html)

# glassfish-3 - glassfish 在哪里保存从网络（管理控制台）部署的战争文件？

> ID：12495094
> 
> 赞同：11
> 
> 时间：2012-09-19T12:52:22.333
> 
> 标签：glassfish-3

我正在从 Web 控制台部署地理服务器，但我找不到战争。从网络部署时，glassfish 所有这些文件在哪里？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-02T19:08:25.770

自提出问题以来已经有一段时间了，但也许这可以帮助正在寻找答案的人。

我在以下位置找到了部署的 WAR 文件：glassfish3/glassfish/domains/domain1/applications/__internal

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-20T08:05:18.103

就我而言，glassfish 不保留原始 WAR 文件。它被“解压缩”到存储在 glassfish\domains\domain1\applications 中的文件夹中。我没有遇到过部署后服务器会保留 WAR 文件的情况。希望我有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-09T12:17:53.697

如果您导航到域下的 glassfish 配置文件夹，然后打开 domain.xml 文件，您会发现一个名为 . 在本节中，您将找到您的 WAR 文件以及一个名为的元素/属性，其值指示部署的 WAR 文件的展开位置。

# grails - Grails：通过与字符串的一对多关联查找

> ID：12495104
> 
> 赞同：8
> 
> 时间：2012-09-19T12:52:59.747
> 
> 标签：grails, grails-orm

我有以下域类：

```
class User {
   static hasMany = [roles:String]
} 
```

我想找到每个有角色的用户`ROLE_ADMIN`。动态查找器有没有可能做到这一点？`user.findAllByRoles('ROLE_ADMIN')`似乎给了我一个错误。

更新：查询关联非常容易，其中 Class`A`有一个类`B`实例列表，并且两者`A`都是`B`域类。但是这里的 class`A`是一个领域类，而 class`B`是一个简单的 Java 字符串。

查询包含另一个域对象列表的关联的代码如下所示：

```
`User.findAll { roles { role_name=='ROLE_ADMIN' } }` 
```

我正在寻找的是一种指定字符串值的方法，例如：

```
`User.findAll { roles {THIS_VALUE=='ROLE_ADMIN' }}` 
```

更新2：据我发现，不可能将标准与原始类型的集合一起使用。但是可以使用 HQL：

```
User.findAll("from User a where :roles in elements(roles)",[roles:'ROLE_ADMIN']) 
```

但是它不如`findAll`or`where`查询有用。我不能链接`findAll`方法，因此定义其他方法，例如：获取`ROLE_ADMIN`用户名如“xxx”的用户需要重写整个`HQL`查询。也许可以`HQL`用表达式的形式表达上述条件`where`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:19:52.317

也许您可以执行以下操作：

如果你已经有一个用户列表（userList）

```
def list = userList.findAll { user -> user.roles =~ 'ROLE_ADMIN' } 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T00:17:32.713

我有同样的问题[如何通过 DetachedCriteria 在关联属性中按值查找记录](https://stackoverflow.com/questions/19026161/how-to-find-records-by-value-in-their-association-property-via-detachedcriteria)

我做了一些调查，我发现这是不可能的。GORM DSL 本身没有任何方法来检查关联中包含的值。它只包含 SQL 中的标准：`AND`, `OR`, `IN`.

但！[您可以在通过 Association Redux 查询的](http://adhockery.blogspot.com/2009/06/querying-by-association-redux.html)条件中将关联作为表加入

# symfony - 坏角色重定向到 403 而不是失败

> ID：12495105
> 
> 赞同：0
> 
> 时间：2012-09-19T12:53:00.883
> 
> 标签：symfony, handler, user-roles

我使用 Symfony2 系统进行用户身份验证，当一个角色不是 ROLE_ADMIN 的用户尝试登录时，他可以登录，但他在 403 页面上被阻止。这是我的安全配置：

```
security:
encoders:
    Me\UserBundle\Entity\User:
        algorithm: sha512
        encode-as-base64: true
        iterations: 10
providers:
    main:
        entity:
            class: Me\UserBundle\Entity\User
            property: username
firewalls:
    secured_area:
        pattern: ^/
        anonymous: ~
        form_login:
            login_path: /login
            check_path: /login_check
            default_target_path: /admin/user/
        logout:
            path: /logout
            target: /login
access_control:
    - { path: ^/admin/, roles: [ROLE_ADMIN] }
    - { path: ^/account, roles: [IS_AUTHENTICATED_FULLY] } 
```

我希望，如果用户尝试使用 ROLE_ADMIN 以外的其他角色登录，他会在登录表单上返回身份验证错误，并且不会在任何地方登录时出现 403 错误。我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:42:45.640

仅通过配置无法获得此行为。由于抛出 AccessDeniedException 是正常行为（用户已通过身份验证，因此需要将她/他重定向到身份验证），因此您必须**处理**AccessDenied。

请参阅解释如何创建和使用**AccessDeniedHandler的**[此答案](https://stackoverflow.com/questions/9166930/using-symfony2s-accessdeniedhandlerinterface)。

# c# - Solrnet 错误消息“System.Collections.ArrayList”类型的对象无法转换为“System.String”类型

> ID：12495106
> 
> 赞同：5
> 
> 时间：2012-09-19T12:53:08.560
> 
> 标签：c#, solrnet

我不确定 solrNet 中是否存在错误，或者我做错了什么。因此，在我进入细节之前，首先要了解高级细节。

**我在做什么：**运行 solr.Query(SearchText) 命令。

**错误：** “System.Collections.ArrayList”类型的对象无法转换为“System.String”类型。

现在详细...

我可以使用 solr.Net 在 Solr 中非常愉快地创建文档，并且可以使用搜索

“http://localhost:8080/solr/select/?”

```
SolrQueryByField sq1 = SolrNet.DSL.Query.Field("flutr_EventMarketURI").Is(sfi.flutr_EventMarketURI);
SolrQuery sq2 = SolrNet.DSL.Query.Simple("flutr_EventMarketURI:\""+ sfi.flutr_EventMarketURI + "\"");
SolrQueryByField sq3 = new SolrQueryByField("flutr_EventMarketURI", sfi.flutr_EventMarketURI);

ISolrQueryResults<SolrFlutrItem> results = solr.Query(sq1); //Tried all three and same result 
```

如您所见，我正在尝试三种方法从索引中获取项目。

在 SolrNet 的幕后，它正在向 solr 发出以下请求

> 2012 年 9 月 19 日下午 1:08:21 org.apache.solr.core.SolrCore 执行信息：[] webapp=/solr path=/select/params={q=flutr_EventMarketURI:"Football/Europe/England/Premier+League /2012/09/22/Swansea+City+-+Everton+FC/"&?=&rows=100000000} hits=1 status=0 QTime=0

这意味着 solr 正在返回数据，但是在执行 solrNet'ty 的过程中，这个错误会冒泡。- IsolrQueryResults 结果 = solr.Query(sq1);

```
[ArgumentException: Object of type 'System.Collections.ArrayList' cannot be converted to type 'System.String'.]
   System.RuntimeType.TryChangeType(Object value, Binder binder, CultureInfo culture, Boolean needsSpecialCast) +4074070
   System.RuntimeType.CheckValue(Object value, Binder binder, CultureInfo culture, BindingFlags invokeAttr) +9636530
   System.Reflection.MethodBase.CheckArguments(Object[] parameters, Binder binder, BindingFlags invokeAttr, CultureInfo culture, Signature sig) +151
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +223
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +28
   System.Reflection.RuntimePropertyInfo.SetValue(Object obj, Object value, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture) +101
   System.Reflection.RuntimePropertyInfo.SetValue(Object obj, Object value, Object[] index) +25
   SolrNet.Impl.DocumentPropertyVisitors.RegularDocumentVisitor.Visit(Object doc, String fieldName, XmlNode field) in c:\prg\SolrNet\svn\SolrNet\Impl\DocumentPropertyVisitors\RegularDocumentVisitor.cs:48
   SolrNet.Impl.DocumentPropertyVisitors.AggregateDocumentVisitor.Visit(Object doc, String fieldName, XmlNode field) in c:\prg\SolrNet\svn\SolrNet\Impl\DocumentPropertyVisitors\AggregateDocumentVisitor.cs:37
   SolrNet.Impl.DocumentPropertyVisitors.DefaultDocumentVisitor.Visit(Object doc, String fieldName, XmlNode field) in c:\prg\SolrNet\svn\SolrNet\Impl\DocumentPropertyVisitors\DefaultDocumentVisitor.cs:39
   SolrNet.Impl.SolrDocumentResponseParser`1.ParseDocument(XmlNode node, ICollection`1 fields) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrDocumentResponseParser.cs:65
   SolrNet.Impl.SolrDocumentResponseParser`1.ParseResults(XmlNode parentNode) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrDocumentResponseParser.cs:50
   SolrNet.Impl.ResponseParsers.ResultsResponseParser`1.Parse(XmlDocument xml, SolrQueryResults`1 results) in c:\prg\SolrNet\svn\SolrNet\Impl\ResponseParsers\ResultsResponseParser.cs:41
   SolrNet.Impl.SolrQueryResultParser`1.Parse(String r) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrQueryResultParser.cs:46
   SolrNet.Impl.SolrQueryExecuter`1.Execute(ISolrQuery q, QueryOptions options) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrQueryExecuter.cs:309
   SolrNet.Impl.SolrBasicServer`1.Query(ISolrQuery query, QueryOptions options) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrBasicServer.cs:83
   SolrNet.Impl.SolrServer`1.Query(ISolrQuery query, QueryOptions options) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrServer.cs:50
   SolrNet.Impl.SolrServer`1.Query(ISolrQuery q) in c:\prg\SolrNet\svn\SolrNet\Impl\SolrServer.cs:87
   flutrClassLibrary.TSGCsolrHelper.GetFlutrItemViaURI(String solrURL, SolrFlutrItem sfi) in D:\Dropbox\aspDevelopment\flutrBetService\flutrClassLibrary\TSGCsolrHelper.cs:89
   ReIndex.btnSendToSolr_Click(Object sender, EventArgs e) in d:\Dropbox\aspDevelopment\flutrBetService\flutrOddsAdmin\ReIndex.aspx.cs:97
   System.Web.UI.WebControls.Button.OnClick(EventArgs e) +118
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +112
   System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) +10
   System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) +13
   System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) +36
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +5563 
```

作为参考，这是 solr 返回的内容

"http://localhost:8080/solr/select/?q=flutr_EventMarketURI:%22Football/Europe/England/Premier+League/2012/09/22/Swansea+City+-+Everton+FC/%22&?=&rows= 100000000"

```
<?xml version="1.0" encoding="UTF-8"?>
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">0</int>
        <lst name="params">
            <str name="q">flutr_EventMarketURI:"Football/Europe/England/Premier League/2012/09/22/Swansea City - Everton FC/"</str>
            <str name="?"/>
            <str name="rows">100000000</str>
        </lst>
    </lst>
    <result name="response" numFound="1" start="0">
        <doc>
            <str name="EventCategory">Football/Europe/England/Premier League</str>
            <date name="EventDate">2012-09-22T11:45:00Z</date>
            <date name="EventLastUpdated">2012-09-19T10:49:31Z</date>
            <str name="EventName">Swansea City - Everton FC</str>
            <str name="ResultsJSON">

{
  "Category_name": "Football/Europe/England/Premier League",
  "Event_name": "Everton FC - Southampton FC",
  "Event_date": "2012-09-29T14:00:00",
  "uri_event": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/",
  "Markets": [
    {
      "Market_name": "Match betting",
      "Outcomes": [
        {
          "Outcome_name": "Everton FC",
          "Odds": [
            {
              "Odds_decimal": "1.45",
              "Last_updated_date": "2012-09-19T09:49:13.9144052Z",
              "uri_odd": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/1/odd/bwin/"
            }
          ],

          "uri_outcome": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/1/"
        },
        {
          "Outcome_name": "Southampton FC",
          "Odds": [
            {
              "Odds_decimal": "6.45",
              "Last_updated_date": "2012-09-19T09:49:13.9144052Z",
              "uri_odd": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/1/odd/bwin/"
            }
          ],

          "uri_outcome": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/1/"
        },
        {
          "Outcome_name": "Draw",
          "Odds": [
            {
              "Odds_decimal": "4",
              "Last_updated_date": "2012-09-19T09:49:13.9144052Z",
              "uri_odd": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/X/odd/bwin/"
            }
          ],
          "uri_outcome": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/X/"
        }
      ],
      "uri_market": "Football/Europe/England/Premier League/2012/09/29/Everton FC - Southampton FC/Match betting/"
    }
  ]
}

</str>
            <str name="flutr_EventMarketURI">Football/Europe/England/Premier League/2012/09/22/Swansea City - Everton FC/</str>
            <str name="flutr_ResultType">EVENT</str>
            <arr name="text">
                <str>Football/Europe/England/Premier League/2012/09/22/Swansea City - Everton FC/</str>
                <str>Football/Europe/England/Premier League</str>
                <str>Swansea City - Everton FC</str>
                <str>Football/Europe/England/Premier League22/09/2012 11:45:00Swansea City - Everton FC1 , X , 2 , Match betting , Football/Europe/England/Premier League/2012/09/22/Swansea City - Everton FC/Match betting/ , </str>
            </arr>
        </doc>
    </result>
</response> 
```

这是我的课

```
 public class SolrFlutrItem : ICloneable
    {
        public SolrFlutrItem() { }

        [SolrUniqueKey("flutr_EventMarketURI")]
        public string flutr_EventMarketURI { get; set; }

        [SolrField("flutr_ResultType")]
        public string flutr_ResultType { get; set; }

        [SolrField("EventCategory")]
        public string EventCategory { get; set; }

        [SolrField("EventDate")]
        public DateTime EventDate { get; set; }

        [SolrField("EventLastUpdated")]
        public DateTime EventLastUpdated { get; set; }

        [SolrField("EventName")]
        public string EventName { get; set; }

        [SolrField("MarketName")]
        public string MarketName { get; set; }

        [SolrField("OutcomeName")]
        public string OutcomeName { get; set; }

        [SolrField("ResultsJSON")]
        public string ResultsJSON { get; set; }

        [SolrField("InternalJSON")]
        public string InternalJSON { get; set; }

        [SolrField("text")]
        public string text { get; set; }

        public object Clone()
        {
            return this.MemberwiseClone();
        }
    } 
```

有任何想法吗？

非常感谢帮助。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T18:29:00.057

您的问题是 SolrFlurItem 类中的文本字段被定义为字符串，但在 solr 中，您已将`text`字段定义为`multiValued="true"`允许 solr 文档中的多个条目并显示在您的 solr 返回值中。错误消息显示此不匹配，因为它无法将字符串数组映射到单个字符串。

因此，您需要将此字段的定义更改为如下所示的集合：

```
[SolrField("text")]
public ICollection<string> text { get; set; } 
```

[您可以在SolrNet Wiki - 映射](http://code.google.com/p/solrnet/wiki/Mapping)部分中查看此示例以及其他使用 SolrNet 将类映射到 Solr 结果的示例。

# mvvm - 在 WinRT 中使用 MVVM 的选定项目

> ID：12495116
> 
> 赞同：10
> 
> 时间：2012-09-19T12:53:35.080
> 
> 标签：mvvm, windows-8, windows-runtime, winrt-xaml

我正在努力寻找一种将 ListView 中的 SelectedItems 属性绑定到视图模型的方法。

以前我使用过这个：[http](http://www.codeproject.com/Articles/412417/Managing-Multiple-selection-in-View-Model-NET-Metr) ://www.codeproject.com/Articles/412417/Managing-Multiple-selection-in-View-Model-NET-Metr ，它不再适用于 RTM 版本。

任何帮助深表感谢！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:02:03.087

您可以查看CodePlex 上[WinRT XAML 工具包中的 ListViewExtensions.BindableSelection。](http://jupitertoolkit.codeplex.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T18:36:47.097

原来绑定到附加属性失败，因为附加属性的类型被视为

*在 Visual Studio 的输出窗口中：*

> 类型（'空'）

经过进一步研究，很明显任何泛型类都无法与这个确切的错误绑定。作为快速修复，我只是将类型更改为“对象”。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-02T13:41:12.823

您可以将所选项目直接绑定到另一个 ui 元素或 mvvm 类中的属性

# jquery - 在 MVC 视图中通过 jquery 更改 img 源单击单选按钮

> ID：12495118
> 
> 赞同：0
> 
> 时间：2012-09-19T12:53:41.000
> 
> 标签：jquery, asp.net-mvc-2

在我看来，我有两个单选按钮：

```
<tr>
                                <td width="125">
                                    <%= Html.RadioButtonFor(m => m.IsAnonymous, false, new { onclick = "toggleAnonymity(false)" })%>
                                    <%= MyResources.AnonymousNo%>
                                </td>
                                <td width="125">
                                    <%= Html.RadioButtonFor(m => m.IsAnonymous, true, new { onclick = "toggleAnonymity(true)" })%>
                                    <%= MyResources.AnonymousYes%>
                                </td>
                            </tr> 
```

'toggleAnonymity' 函数启用/禁用我视图中某些输入的值，具体取决于单击的单选按钮：

```
 <script language="javascript" type="text/javascript">

var firstName = "<%= Model.Name.FirstName %>";
    var middleName = "<%= Model.Name.MiddleName %>";
    var maidenName = "<%= Model.Name.MaidenName %>";
    var lastName = "<%= Model.Name.LastName %>";
    var birthDate = "<%= Model.Birthdate %>";
    var gender = "<%= (int)Model.Gender %>";

    function datePicker_OnLoad() {
        // Wait till the datepicker is loaded, this is after the window is loaded.
        // Do this because otherwise the datepicker cannot be found in the DOM.
        toggleAnonymity('<%= Model.IsAnonymous %>');
    };

    function toggleAnonymity(isAnonymous) {

        if (isAnonymous.toString().toLowerCase() == true.toString()) {

            // Store current values in variables
            // Person info
            lastName = $("#Name_LastName").val();
            maidenName = $("#Name_MaidenName").val();
            middleName = $("#Name_MiddleName").val();
            firstName = $("#Name_FirstName").val();
            birthDate = $("#Birthdate").val();
            gender = $("input:radio[name=Gender]:checked").val();

            // Clear personal info fields
            $("#Name_LastName").val('<%=CommonResources.Anonymous %>').prop('disabled', true);
            $("#Name_MaidenName").val('<%=CommonResources.Anonymous %>').prop('disabled', true);
            $("#Name_MiddleName").val('<%=CommonResources.Anonymous %>').prop('disabled', true);
            $("#Name_FirstName").val('<%=CommonResources.Anonymous %>').prop('disabled', true);
            $("#Birthdate").val('').prop('disabled', true);
            getDatePicker("#Birthdate").disable();
            $("input[name=Gender]").prop('disabled', true);

        }
        else {

            // Restore personal info values
            $("#Name_LastName").val(lastName).prop('disabled', false);
            $("#Name_MaidenName").val(maidenName).prop('disabled', false);
            $("#Name_MiddleName").val(middleName).prop('disabled', false);
            $("#Name_FirstName").val(firstName).prop('disabled', false);
            $("#Birthdate").val(birthDate).prop('disabled', false);
            getDatePicker("#Birthdate").enable();
            $("input:radio[name=Gender]").filter("[value=" + gender + "]").prop('checked', true);
            $("input:radio[name=Gender]").prop('disabled', false);              

        }
    }
</script> 
```

没关系，但我的视图中还有一个 img 字段，显示数据库中的图片。现在我想在单击第一个单选按钮时显示磁盘中的“NoImageAvailable”图像。单击第二个单选按钮时，我想显示数据库中的原始图像。请一些帮助会很棒！

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T11:38:07.983

我通过使用 img 的源属性解决了这个问题：

```
$("#Picture").attr('src', 'Image.png'); 
```

# iphone - 未调用 Setter 方法

> ID：12495119
> 
> 赞同：0
> 
> 时间：2012-09-19T12:53:47.800
> 
> 标签：iphone, objective-c, macos

我创建了一个 setter 模块，当将任何内容存储到 _textColor 变量中但它不起作用时应该调用它，如果我删除新的 setter 模块并让合成器创建默认模块，那么默认模块将起作用。问题在于，当我有一个名为“fillColor”的变量时，我最终可以访问另一个名为 setFillColor 的模块：

我省略了大部分不相关的代码在我的头文件中，我有以下内容：

```
@interface ICADrawingObject : NSObject <NSCoding> {
@private
    NSColor                 *_textColor;
}
@property (nonatomic, retain, readwrite, setter=setObjectTextColor:) NSColor* textColor; 
```

在实施中，我有：

```
@synthesize textColor = _textColor;

-(void)setObjectTextColor:(NSColor *)textColor{
    NSLog(@"Text Old Color: %@",self.textColor);
    NSLog(@"Text New Color: %@",textColor);

    _textColor = textColor;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:58:23.103

它会是这样的：

```
 -(void)setTextColor:(NSColor *)textColor{
    if (_textColor != textColor) {
    [_textColor release];
    _textColor = [textColor retain];

 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:40:00.873

这个怎么样：

```
@interface ICADrawingObject : NSObject {
    NSColor *_textColor;
}
@property (nonatomic, retain, setter=setObjectTextColor:) NSColor *textColor;
@end

@implementation ICADrawingObject
@synthesize textColor = _textColor;

-(void)setObjectTextColor:(NSColor *)aColor{
    NSLog(@"Text Old Color: %@",_textColor);
    NSLog(@"Text New Color: %@",aColor);
    if( _textColor != aColor ) {
        [_textColor release];
        _textColor = [aColor retain];
    }
    _textColor = aColor;
}

@end 
```

此后，如果我们这样做：

```
ICADrawingObject *obj = [ICADrawingObject new];
obj.textColor = [NSColor blackColor]; 
```

那么这应该打印到控制台，作为自定义设置器被调用的证据：

```
2012-09-19 08:37:43.605 test323[67540:303] Text Old Color: (null)
2012-09-19 08:37:43.606 test323[67540:303] Text New Color: NSCalibratedWhiteColorSpace 0 1 
```

顺便说一句，没有必要`@private`在 ivars 上指定。您现在可以通过在实现中声明 ivars 来控制可见性。

# xamarin.ios - 如何从 MPMoviePlayerController 捕获异常：“一个 AVPlayerItem 不能与多个 AVPlayer 实例关联”

> ID：12495127
> 
> 赞同：1
> 
> 时间：2012-09-19T12:54:05.657
> 
> 标签：xamarin.ios, mpmovieplayercontroller

我们有一个应用程序，我们使用 MPMoviePlayerController 从第三方流式传输内容。有时，即使尚未设置流，他们也会将流列为可用。问题是当我们尝试播放这样的流时，我们得到了错误：

“一个 AVPlayerItem 不能与多个 AVPlayer 实例关联”

如果我们播放各种样本流，例如来自 Apple 的样本流，效果会很好： [http ://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8](http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8)

是否有适当的方法来处理来自 MPMoviePlayerController 的这些错误？

Stackoverflow 上还有其他各种关于同一问题的帖子，但各种解决方案只是删除了错误的流。在我们的情况下这是不可能的，我们需要在客户端处理这个......如果可能的话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:13:10.360

当我得到完成的事件时，我设法通过处理 MPMoviePlayerController 来解决这个问题。然后它不再崩溃，所以我希望这是这样做的正确方法......

```
 notification = MPMoviePlayerController.Notifications
            .ObservePlaybackDidFinish((sender, args) => {
                mp.Dispose();
                mp = null;
                if(notification != null)
                {
                    notification.Dispose();
                    notification = null;
                }
        }); 
```

# jquery - JQuery 不在 $(document).change() 上执行

> ID：12495128
> 
> 赞同：9
> 
> 时间：2012-09-19T12:54:18.957
> 
> 标签：jquery, css, asp.net-mvc

当页面/文档发生更改时，我需要执行一些 JQuery - 在这种情况下，当显示具有特定 CSS 类的 div 时。

我有以下 JQuery 代码：

```
 <script>
           $(document).change(function () {
               if ($('.validation_errors').length) {
                   alert("test");
               }
           }
    </script> 
```

但是，它不会执行并显示警报。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T13:00:23.487

更改仅适用于输入、文本区域或选择元素。相反，您需要将函数绑定到`DOMSubtreeModified`突变事件：

```
$(document).bind('DOMSubtreeModified', function () {
   if ($('.validation_errors').length) {
       alert("test");
   }
}); 
```

编辑：如果您的目标浏览器支持它，您应该使用[MutationObserver](https://developer.mozilla.org/en/docs/Web/API/MutationObserver)代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:04:04.093

你不能以这种方式监视 DOM 的变化。引用 jQuery 文档：

> 当元素的值改变时，change 事件被发送到元素。此事件仅限于元素、框和元素。- [http://api.jquery.com/change/](http://api.jquery.com/change/)

如果您希望在 DOM 更改时执行代码，您可能需要设置检查 DOM 的间隔或使用jQuery 论坛上的海报提供的[这种技术。](http://forum.jquery.com/topic/bind-dom-change#14737000000039031)

有`DOMSubtreeModified`事件，但在当前的浏览器中几乎不可用，所以我个人不推荐使用它。有关详细信息，请参阅[此 stackoverflow 答案](https://stackoverflow.com/a/6659678/733347)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T12:59:38.870

哥们，你的语法也错了！如果您要这样做，请在准备好的文档中进行，.change 非常有限，不会在新页面上触发。

```
$(document).ready(function(){
    if($('.classOrId').length){
        //do something if it exists
    };
}); 
```

# asp.net - EntityDataSource 的 CommandText 属性中的查询限制

> ID：12495130
> 
> 赞同：1
> 
> 时间：2012-09-19T12:54:24.873
> 
> 标签：asp.net, sql-server, entity-framework, compatibility, entitydatasource

我`EntityDataSource`在 Visual Studio 2012 下开发的 ASP.NET 应用程序中使用控件。它有一个`CommandText`属性，可以用来选择控件的数据。虽然它被设置为 SQL 查询，但我经常遇到这样的情况：查询在 SSMS 下执行良好，但在`EntityDataSource`. 以下是本周遇到的限制的简短列表：

*   不能使用`SELECT *`，需要明确指定字段
*   嵌套查询的强制性别名
*   无法使用某些系统功能，例如`isnull`

归根结底，我有两个问题：

1.  如何获得此类限制的完整列表？
2.  用什么代替`isnull`函数？

# c++ - c++字符串UTF-8编码

> ID：12495132
> 
> 赞同：1
> 
> 时间：2012-09-19T12:54:28.737
> 
> 标签：c++, windows, string, utf-8

我是c++新手，想写一段很简单的代码，但是结果不对，不知道怎么解决。

代码是：

```
#include <iostream>
#include <string>

using namespace std;

int main() {
    string test_string = "aáeéöôőüűč♥♦♣♠";
    cout << test_string << endl;
    return 0;
} 
```

但结果是：`a├íe├ę├Â├┤┼Ĺ├╝┼▒─ŹÔÖąÔÖŽÔÖúÔÖá`

我在 Windows 上，使用 Code::Blocks。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-30T13:22:46.893

将文件另存为不带 BOM 签名的 UTF-8，并尝试使用 printf()。

```
//Save As UTF8 without BOM signature
#include <stdio.h>
#include <windows.h>

int main() {
    SetConsoleOutputCP(65001);
    char test_string[] = "aáeéöôőüűč♥♦♣♠";
    printf(test_string);
    return 0;
} 
```

结果是：`aáeéöôőüűč♥♦♣♠`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:32:21.120

不幸的是，在 Windows 上使用 UTF-8 非常有问题。

在 Linux 上，您可以简单地`wstring`像这样：

[这段代码是通用的，还是只是我的系统？](https://stackoverflow.com/questions/4324385/does-this-code-work-universaly-or-is-it-just-my-system/4324481)

但不幸的是，Windows 没有 UTF-8 语言环境，因此您只剩下 Windows API。

[http://www.siao2.com/2007/01/03/1392379.aspx](http://www.siao2.com/2007/01/03/1392379.aspx)

# android - 让 ListView Scrollbar 与众不同，更有用

> ID：12495134
> 
> 赞同：2
> 
> 时间：2012-09-19T12:54:33.253
> 
> 标签：android, android-listview, android-scrollbar

我见过很多有一个 ListView 的 Android 应用程序，这些应用程序与我的 ListViews 有一些不同。在他们的 ListView 滚动条中，如下所示：

![在此处输入图像描述](../Images/a20244888400bee0bcf58e779b6b965e.png)

在上图中，当您滚动列表时，将显示滚动条，您可以触摸它并更轻松地滚动。

但在我的应用程序中是这样的：

![在此处输入图像描述](../Images/f57807d7eb9d914150edafa03a7c319c.png)

这是我的布局 xml 代码：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:paddingBottom="4dp"
        android:text="@string/do"
        android:textSize="16dp" />

    <ListView
        android:id="@+id/lv"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@drawable/main_background"

        >
    </ListView>
</LinearLayout> 
```

我用谷歌搜索了很多次，但我没有找到任何技巧。任何人都可以帮助我如何让我的卷轴像第一张图一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:02:39.963

您可以在列表视图中添加这些行。它对我有用。

```
 android:fastScrollEnabled="true"
    android:scrollbars="none 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T12:59:52.573

在列表视图的属性中设置`android:fastScrollEnabled="true"`。此外，如果您希望快速滚动拇指始终可见，请设置 `android:fastScrollAlwaysVisible="true"`

然后，在列表视图的 xml 定义中，您将拥有如下内容：

```
<ListView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:fastScrollAlwaysVisible="true"
    android:fastScrollEnabled="true" >
</ListView> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T13:01:47.307

```
Hi Use This attribute in your ListView which you declare in you layout file.

android:scrollbars="none" 
```

# c# - 如何重构下面的 C# 代码？

> ID：12495140
> 
> 赞同：1
> 
> 时间：2012-09-19T12:55:10.883
> 
> 标签：c#, button, textbox, refactoring

我的 Form1 中有 12 个按钮，每个按钮旁边都有一个文本框。按钮事件调用一个名为 dialogOpen 的方法，该方法处理从 form2 获取对象并将字符串值放入文本框中。

如何根据用户单击的按钮将返回的值放置在文本框中？因此，如果用户单击的是 button1，则返回的文本应放置在 textbox1 中，如果用户单击的是 button2，则返回的文本应放置在 textbox2 中。关键是避免使用字符串名称进行检查，因为按钮都可以称为“浏览”。

现在我下面的代码可以做到这一点，但它是相当重复的，这样做有更好的方法吗？

```
 private void dailogueOpen(String btnName)
    {
        if (listBox1.SelectedItem == null)
        {
            MessageBox.Show("Please Select a form");
        }
        else
        {
            var selectedItem = (FormItems)listBox1.SelectedItem;
            var form2result = new Form2(myDataSet, selectedItem);
            var resulOfForm2 = form2result.ShowDialog();

            if (resulOfForm2 == DialogResult.OK)
            {
                switch (btnName)
                {
                    case "btn1":
                        textBox1.Text = form2result.getValue();
                        break;
                    case "btn2":
                        textBox2.Text = form2result.getValue();
                        break;
                    case "btn3":
                        textBox3.Text = form2result.getValue();
                        break;
                    case "btn4":
                        textBox4.Text = form2result.getValue();
                        break;
                    case "btn5":
                        textBox5.Text = form2result.getValue();
                        break;
                }
            }
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        String name = "btn1";
        dailogueOpen(name);
    }

    private void button2_Click(object sender, EventArgs e)
    {
        String name = "btn2";
        dailogueOpen(name);
    }

    private void button3_Click(object sender, EventArgs e)
    {
        String name = "btn3";
        dailogueOpen(name);
    }

    private void button4_Click(object sender, EventArgs e)
    {
        String name = "btn4";
        dailogueOpen(name);
    }

    private void button5_Click(object sender, EventArgs e)
    {
        String name = "btn5";
        dailogueOpen(name);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:59:30.140

编辑：我刚刚注意到您的事件处理程序。更多的重构随之而来：

就在这里。您需要以某种方式将文本框与按钮相关联。例如，像这样创建一个字典：

```
Dictionary<Button, TextBox> _dict;

_dict[button1] = textBox1;
_dict[button2] = textBox2; 
... 
```

对所有事件使用一个事件处理程序：

```
private void button_click(object sender, EventArgs e)
{
    dialogeOpen((Button)sender);
} 
```

更改`dialogueOpen`为接受 Button 而不是字符串和

```
 _dict[btn].Text = form2Result.getValue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:58:49.200

1 你使用`same delegate`on all`button`

`Nota (Thank's to Marty) :`当您在表单设计器中时，选择所有按钮，然后为所有按钮设置“Generic_Click”，或者您可以使用下面的代码。

```
this.btn1.Click += new System.EventHandler(Generic_Click); //the same delegate
this.btn2.Click += new System.EventHandler(Generic_Click);
this.btn3.Click += new System.EventHandler(Generic_Click);
....

private void Generic_Click(object sender, EventArgs e)
{
     var control = (Button)sender;
     if(  control.Name == "btn1")
     {
        ....
     }
     else if(  control.Name == "btn2")
     {
        ....
     }
     else if(  control.Name == "btn3")
     {
        ....
     }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:59:03.707

将您的事件处理程序替换为

```
private void ButtonClick(object sender, EventArgs e)
{
    var button = sender as Button;
    if (button == null) return;
    String name = button.Text;// Tag, name etc
    dailogueOpen(name);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T13:59:48.847

我会首先为按钮使用一个事件处理程序，它看起来像这样：

```
protected void ButtonClick(object sender, EventArgs e)
{
    Button clickedButton = (Button) sender;
    string selectedId = clickedButton.ID;
    string[] idParameters = selectedId.Split('_');
    string textBoxId = "textbox" + idParameters[1];
    dailogueOpen(textBoxId);
} 
```

我在这里所做的是使用文本框名称的模式，例如，如果您的按钮的 id 如下：button_1、button_2、...、button_n，您可以推断出相应的文本框是什么。

如果你点击button_1，通过拆分它的id，你会知道它对应的文本框就是id为textbox1的文本框。

然后 dialogOpen 函数将如下所示：

```
private void dailogueOpen(string textBoxId)
{
    if (listBox1.SelectedItem == null)
    {
       MessageBox.Show("Please Select a form");
    }
    else
    {
        var selectedItem = (FormItems)listBox1.SelectedItem;
        var form2result = new Form2(myDataSet, selectedItem);
        var resulOfForm2 = form2result.ShowDialog();
        if (resulOfForm2 == DialogResult.OK)
        {
            TextBox textBox = (TextBox)this.Form.FindControl("MainContent").FindControl(textBoxId);
            textBox.Text = resulOfForm2.getValue();
    }
} 
```

MainContent 是文本框所在容器的 id。

总而言之：

*   我会为按钮和 texboxes id 使用模式。
*   根据被点击的按钮，我推断出它对应的 texbox id。
*   然后找到 texbox 并更新它的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T13:01:07.783

您可以在所有按钮单击时使用字典和一种事件方法

```
Dictionary<Button, TextBox> dx = new Dictionary<Button, TextBox>;

private void ButtonClick(object sender, EventArgs e)
{
    var button = sender as Button;
    if (button == null) return;
    dx[button].Text = form2result.getValue();
} 
```

和这样的构造函数：

```
public ClassName()
{
   dx.Add(button1, textBox1);
   dx.Add(button2, textBox2);
   dx.Add(button3, textBox3);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T13:23:56.183

我认为您可以做的第一件事是通过消除对 switch 语句的需要来提高可读性：

```
private void dailogueOpen(TextBox textBox)
{
    if (listBox1.SelectedItem == null)
    {
        MessageBox.Show("Please Select a form");
    }
    else
    {
        var selectedItem = (FormItems)listBox1.SelectedItem;
        var form2result = new Form2(myDataSet, selectedItem);
        var resulOfForm2 = form2result.ShowDialog();

        if (resulOfForm2 == DialogResult.OK)
        {
            textBox.Text = form2result.getValue();
        }
    }
}

private void button1_Click(object sender, EventArgs e)
{
    dailogueOpen(textBox1);
}

private void button2_Click(object sender, EventArgs e)
{
    dailogueOpen(textBox2);
}

private void button3_Click(object sender, EventArgs e)
{
    dailogueOpen(textBox3);
}

private void button4_Click(object sender, EventArgs e)
{
    dailogueOpen(textBox4);
}

private void button5_Click(object sender, EventArgs e)
{
    dailogueOpen(textBox5);
} 
```

然后，这为您提供了一个合理的方法签名来引入字典（由另外两个人建议）以将 Button 映射到 TextBox，这反过来又允许您对所有按钮使用单个事件处理程序（由另外两个人建议）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T13:27:55.130

```
 private void button_Click(object sender, EventArgs e)
        {

            Button button = sender as Button;
            if (button == null) return;
            String name = button.Text;// Tag, name etc

            dailogueOpen(name);
        }

     private void dailogueOpen(String btnName)
        {
            if (listBox1.SelectedItem == null)
            {
                MessageBox.Show("Please Select a form");
            }
            else
            {
                var selectedItem = (FormItems)listBox1.SelectedItem;
                var form2result = new Form2(myDataSet, selectedItem);
                var resulOfForm2 = form2result.ShowDialog();

                if (resulOfForm2 == DialogResult.OK)
                { 
                   SetTxt(btnName,form2result.getValue());
                }
            }
    }

      private void SetTxt(string btnName, string value)
            {
                int lenght = "Button".Length;
                string index = btnName.Substring(lenght); //remove Button
                TextBox t = (TextBox)this.Controls.Find("textBox" + index, true)[0];

                if (t != null)
                    t.Text = value;
            } 
```

# ada - 关于 ADA 中受保护的数据对象

> ID：12495143
> 
> 赞同：3
> 
> 时间：2012-09-19T12:55:25.333
> 
> 标签：ada

我是 Ada 的新手，但一般来说对编程并不陌生。我对受保护的数据对象有疑问。正如我从示例和书籍中了解到的那样，您可以像调用任务一样调用受保护数据对象中的成员。

这是我的代码：

```
procedure ass4 is

   protected type Signal_Object is
      entry Wait;
      procedure Signal;
      function Is_Open return Boolean;
   private
      Open : Boolean := False;
   end Signal_Object;

   protected body Signal_Object is

      entry Wait when Open is
      begin
         Open := False;
      end Wait;

      procedure Signal is
      begin
         Open := True;
      end Signal;

      function Is_Open return Boolean is
      begin
         return Open;
      end Is_Open;

   end Signal_Object;
begin

Signal_Object.Signal;

end; 
```

但是编译器不喜欢这个调用`Signal_Object.Signal;`，我收到以下错误

```
invalid use of subtype mark in expression or call 
```

那么我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:12:49.340

你有一个受保护的类型，而不是一个受保护的对象。要么将声明从

```
protected type Signal_Object is 
```

到

```
protected Signal_Object is 
```

或声明该类型的对象

```
My_Signal_Object : Signal_Object; 
```

然后调用对象

```
My_Signal_Object.Signal 
```

# javascript - 我想从 javascript 打印值

> ID：12495146
> 
> 赞同：-2
> 
> 时间：2012-09-19T12:55:29.510
> 
> 标签：javascript, echo

我在网页中使用这样的javascript。

```
<SCRIPT language="javascript">
        function addRow(tableID) {

            var table = document.getElementById(tableID);

            var rowCount = table.rows.length;
            var row = table.insertRow(rowCount);

            var colCount = table.rows[1].cells.length;

            for(var i=0; i<colCount; i++) {

                var newcell = row.insertCell(i);

                newcell.innerHTML = table.rows[1].cells[i].innerHTML;
                //alert(newcell.childNodes);
                switch(newcell.childNodes[0].type) {
                    case "text":
                            newcell.childNodes[0].value = "";
                            break;
                    case "checkbox":
                            newcell.childNodes[0].checked = false;
                            break;
                    case "select-one":
                            newcell.childNodes[0].selectedIndex = 0;
                            break;
                }
            }
        }
</script> 
```

你可以看到，for循环中使用了'i'。

现在我想在 php 中回显“i”。

回显 $i 的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T12:57:47.160

您可以使用，您将在 firebug 控制台或 chrome 调试器控制台中看到结果

```
console.log(i); 
```

# sql - SQL 过滤组上的行

> ID：12495147
> 
> 赞同：-2
> 
> 时间：2012-09-19T12:55:32.310
> 
> 标签：sql, sql-server, tsql

我有一个说 100 行的 sql 表。结构有点像

```
colectiveNo    colectiveName         p1Number        P1EffectiveFromDate   morecol
--------------------------------------------------------------------------------------
1                  name1             somenumber         somedate            NULL
1                  name1             somenumber         somedate            1234
1                  name1             somenumber         somedate            5432 
```

我们按 , 按 colectiveNo 分组

我想像这样使用条件：

1.  如果带有“morcol”的组中的行为空，并且同一组中有带有某些数字的 morcol 的行，则不显示带有空值的行显示第 2,3 行

2.  否则，如果我只有 morecol 为空的行，则为该组显示它们

.

```
colectiveNo    colectiveName         p1Number        P1EffectiveFromDate   morecol
    ----------------------------------------------------------------------------------
    1                name1           somenumber         somedate            NULL
    1                name1           somenumber         somedate            NULL
    1                name1           somenumber         somedate            NULL 
```

显示第 1,2,3 行

我很难做到这一点，请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:17:14.540

这是你可以做到的一种方法，你说你在colectiveNo上分组，所以我假设你的第二个充满空值的例子是不同的colectiveNo组

```
SELECT *
FROM
    (
        SELECT   colectiveNo
                ,colectiveName
                ,p1Number
                ,p1EffectiveFromDate
                ,morecol
                ,CASE WHEN MAX(morecol) OVER (PARTITION BY colectiveNo) IS NULL  THEN 1 ELSE 0 END AS fldIncNulls 
        FROM tbltest
    )data
WHERE (morecol IS NOT NULL OR fldIncNulls = 1) 
```

# domain-driven-design - CQRS 和 DDD 边界

> ID：12495155
> 
> 赞同：2
> 
> 时间：2012-09-19T12:55:53.677
> 
> 标签：domain-driven-design, cqrs

我有几个问题我没有找到任何确切的答案。我以前使用过 CQRS，但可能我没有正确使用它。

假设域中有 5 个服务：Gateway、Sales、Payments、Credit 和 Warehouse，在用户注册应用的过程中，前端提交了几个命令，同一个前端会，用户注册后，发送一些其他命令来创建订单并申请信用。

现在，我通常做的是创建一个网关，它接收所有公共命令，然后对其进行验证，如果有效，则将其转换为域命令。我只使用事件来存储数据，如果一个服务需要在另一个服务中执行某些操作，那么域命令会直接从一个服务发送到另一个服务。但是我在其他系统中看到事件处理程序不仅仅用于存储数据。所以我的问题是，事件处理程序可以做什么的限制是什么？当特定服务需要其他服务执行操作时在服务之间发送命令是否正确，或者让初始事件引发和事件并让其他服务中的处理程序在事件处理程序中执行该操作更正确。我问这个是因为我见过这样的事件：INeedCreditAproved，

欢迎任何意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T23:52:12.780

您在这里遗漏了一个重要概念 - Sagas（流程管理器）。您有一个长期运行的工作流程，最好集中表达。

Sagas 监听事件并发出命令。因此 OrderAccepted 事件将启动一个 Saga，然后发出 ApproveCredit 和 ReserveStock 命令，分别发送到 Credit 和 Warehouse 服务。然后 Saga 可以监听命令成功/失败事件并适当地进行补偿，比如发出 SendEmail 命令或其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T19:51:08.987

一年前，我正在发送诸如“当特定服务需要其他服务执行操作时**，通过事件处理程序**在服务之间发送命令”之类的命令，但是我做出的一个愚蠢的决定转而使用您所说的“让初始事件引发”和事件，并让其他服务中的处理程序在事件处理程序中执行该操作”，它首先工作。我能做出的最愚蠢的决定。现在我切换回从事件处理程序发送命令。

您可以看到像 Rinat 之类的其他人使用事件端口/接收器做类似的事情，并且它对他们有用，我认为：

[http://abdullin.com/journal/2012/7/22/bounded-context-is-a-team-working-together.html](http://abdullin.com/journal/2012/7/22/bounded-context-is-a-team-working-together.html)

[http://abdullin.com/journal/2012/3/31/anatomy-of-distributed-system-a-la-lokad.html](http://abdullin.com/journal/2012/3/31/anatomy-of-distributed-system-a-la-lokad.html)

祝你好运

# android - ViewFlipper 动画，两个 ImageView 之间的平滑滚动

> ID：12495158
> 
> 赞同：2
> 
> 时间：2012-09-19T12:55:57.503
> 
> 标签：android

我有这段代码可以在两个之间滑动`ImageViews`

```
public class CaseHolder extends MainClass{

// for the next movement
public static Animation inFromLeftAnimation() {
    Animation inFromLeft = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, -1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    inFromLeft.setDuration(350);
    inFromLeft.setInterpolator(new AccelerateInterpolator());
    return inFromLeft;
}
// for the previous movement
public static Animation inFromRightAnimation() {

    Animation inFromRight = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, +1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    inFromRight.setDuration(350);
    inFromRight.setInterpolator(new AccelerateInterpolator());
    return inFromRight;
}
public static Animation outToLeftAnimation() {
    Animation outtoLeft = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, -1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoLeft.setDuration(350);
    outtoLeft.setInterpolator(new AccelerateInterpolator());
    return outtoLeft;
}
public static Animation outToRightAnimation() {
    Animation outtoRight = new TranslateAnimation(
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, +1.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f,
            Animation.RELATIVE_TO_PARENT, 0.0f);
    outtoRight.setDuration(350);
    outtoRight.setInterpolator(new AccelerateInterpolator());
    return outtoRight;
}
TextView pcn;

TextView header;
TextView date;
ImageView right;
TextView status; 

ImageView left;
String dateFromIntent;

String pcnFromIntent;

String statusFromIntent; 

ViewFlipper vf;

float oldTouchValue;

boolean isDown;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    super.setTabBar(R.layout.caseholder);
    overridePendingTransition(R.anim.activityfade, R.anim.activityfadeout);

    vf = (ViewFlipper) findViewById(R.id.viewFlipper01);

    pcn = (TextView) findViewById(R.id.pcn);
    header = (TextView) findViewById(R.id.textView1);
    date = (TextView) findViewById(R.id.date);
    status = (TextView) findViewById(R.id.status);

    right = (ImageView) findViewById(R.id.rightF);
    left = (ImageView) findViewById(R.id.leftF);

    header.setText("Overview");
    pcnFromIntent = getIntent().getExtras().getString("pcn");
    dateFromIntent = getIntent().getExtras().getString("date");
    statusFromIntent = getIntent().getExtras().getString("status");

    date.setText("Date: " + dateFromIntent);
    pcn.setText(pcnFromIntent);
    status.setText("Status: " + statusFromIntent);

    if (getIntent().hasExtra("right")) {
        Bitmap b = BitmapFactory.decodeByteArray(getIntent()
                .getByteArrayExtra("right"), 0, getIntent()
                .getByteArrayExtra("right").length);
        right.setImageBitmap(b);
    }

    if (getIntent().hasExtra("left")) {
        Bitmap b1 = BitmapFactory.decodeByteArray(getIntent()
                .getByteArrayExtra("left"), 0, getIntent()
                .getByteArrayExtra("left").length);

        left.setImageBitmap(b1);
    }

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        Intent j = new Intent(getApplicationContext(), MainClass.class);
        startActivity(j);
          CaseHolder.this.finish();
             overridePendingTransition(R.anim.activityfade, R.anim.activityfadeout);
        return true;
    }
    return super.onKeyDown(keyCode, event);
}

@Override
public boolean onTouchEvent(MotionEvent touchevent) {

    switch (touchevent.getAction()) {
    case MotionEvent.ACTION_DOWN: {
        oldTouchValue = touchevent.getX();
        break;
    }
    case MotionEvent.ACTION_UP: {

        float currentX = touchevent.getX();
        if (oldTouchValue < currentX) {
            vf.setInAnimation(inFromLeftAnimation());
            vf.setOutAnimation(outToRightAnimation());
            vf.showNext();

        }
        if (oldTouchValue > currentX) {
            vf.setInAnimation(inFromRightAnimation());
            vf.setOutAnimation(outToLeftAnimation());
            vf.showPrevious();
        }
        break;
    }
    }
    return false;
} 
```

}

这工作得很好，但我想要更平滑的滚动。现在，用户必须将手指从屏幕上抬起，才能在`Views`. 如何修改此代码，以便用户可以在屏幕上滑动手指，并且`ViewFlipper`将“跟随”手指移动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:12:13.107

只需使用适配器实现 android.support.v4.view.ViewPager，非常简单。这是适配器类的代码。您只需将视图添加到`adapter`并将`ViewPager`'s Adapter 设置为此一个。

```
public class PreferencesViewPagerAdapter extends PagerAdapter
{
    ArrayList<View> preferencesViews;

public PreferencesViewPagerAdapter(ArrayList<View> preferencesViews)
{
    this.preferencesViews = preferencesViews;
}

@Override
public Object instantiateItem(ViewGroup container, int position)
{
    ((ViewPager) container).addView(preferencesViews.get(position));
    return preferencesViews.get(position);
}

@Override
public int getCount()
{
    return preferencesViews.size();
}

@Override
public boolean isViewFromObject(View view, Object object)
{
    return view == object;
}

@Override
public void destroyItem(ViewGroup container, int position, Object view)
{
    ((ViewPager) container).removeView((View) view);
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:01:29.447

> 如何修改此代码以便用户可以在屏幕上滑动手指

我会在某个地方添加一个等效于 Swing 的 MouseDragListener。可能有人会告诉你哪个是事件名称（也许`MotionEvent. ACTION_MOVE)`是。无论如何，这个想法是让你的活动回调。然后当你有 x1，y1，x2，y2 坐标时更容易“跟随”

# javascript - 处理 Javascript/JSP 中的复杂对象列表

> ID：12495162
> 
> 赞同：0
> 
> 时间：2012-09-19T12:56:13.870
> 
> 标签：javascript, jsp, struts

这是我的服务器端类

```
public class DefinitionT implements java.io.Serializable {

private int id;
private String value;
    ..... 
```

这两个字段有 getter 和 setter。在我的 JSP 方面，我有一个声明为

```
 <script type="text/javascript">
    var g_definitions="<s:property value="definitions"/>";
</script> 
```

我的 Struts Action 有一个名为 getDefinitions 的 getter，它被调用并返回一个 DefinitionT 对象列表。
在我的 JS 中，我有以下代码

```
 for( var i = 0; i < 2; i++ ) 
{ 
    $("#definitionsDiv").append(g_definitions[i].value);
} 
```

首先，我试图弄清楚如何获取列表中的对象数量，但 g_definitions.size 是“未定义”如果我尝试访问 g_definitions[0].value 它也是未定义的。如何正确处理此列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:44:03.107

您不能将 java 列表直接分配给 javascript 变量。

您有两个选项
将 java 列表转换为 json 对象。
使用 jstl 或代码片段从变量中获取值

```
<s:iterator value="definitions" var="defination">
       $("#definitionsDiv").append(<s:property value="defination"/>);
</s:iterator> 
```

# jquery - 使用 jquery 将 ph 值从 csv 导入到 html 多个选择框

> ID：12495163
> 
> 赞同：1
> 
> 时间：2012-09-19T12:56:17.130
> 
> 标签：jquery, html, csv

我想将包含电话号码的 csv 文件导入到 html 多选框。是否可以使用 jquery 或 ajax ？请问有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:11:55.153

像这样的东西：

```
//jquery ajax function, calls a file (url), if it succeds, the "success" happens, "data" is the contents of the file
$.ajax({
    url: 'path_to_your_file',
    success: function(data) {
        //splitting the data by commas (i presume that with csv you mean comma seperated values file)
        var splitData=data.split(",");
        //looping through the data
        for(pn in splitData){
            //current phone number is stored in "pn", appending a new option with value of the current phone number to the multiple select box with id "select_id"
            $('#select_id').append("<option value=\""+pn+"\">"+pn+"</option>");
        }
    }
}); 
```

# php - PHP if 语句“如果 X 和/或 Y”

> ID：12495164
> 
> 赞同：0
> 
> 时间：2012-09-19T12:56:20.600
> 
> 标签：php, wordpress, if-statement, wordpress-theming

如果在 Wordpress 主题中有条件，我正在尝试创建一个不那么笨重的版本。我试图弄清楚如何在不打开和关闭样式标签两次的情况下做到这一点：

```
<?php if (get_theme_mod( 'main_color' )) : ?>
  <style>
    #branding {
        background: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
    }
    a:link {
        color: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
    }
  </style>
  <?php endif ?>
  <?php if (get_theme_mod( 'links_color' )) : ?>
  <style>
    #wrapper a:link {
        color: <?php echo get_theme_mod( 'links_color', '#6C84B4' )."\n"; ?>;
    }   
  </style>
  <?php endif ?> 
```

我试图将两者与以下内容结合起来：

```
<?php if (get_theme_mod( 'main_color' || 'links_color' )) : ?>
      <style>
        #branding {
            background: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
        }
        a:link {
            color: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
        }
        #wrapper a:link {
            color: <?php echo get_theme_mod( 'links_color', '#6C84B4' )."\n"; ?>;
        }   
      </style>
      <?php endif ?> 
```

但由于某种原因，这不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T12:58:04.747

尝试：

```
<?php if (get_theme_mod( 'main_color') || get_theme_mod( 'links_color' )) : ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T12:58:09.507

```
<?php if (get_theme_mod( 'main_color' || 'links_color' )) : ?> 
```

应该

```
<?php if (get_theme_mod( 'main_color') || get_theme_mod('links_color') )) : ?> 
```

因为`get_theme_mod()`是一个你传递参数给它的函数。您可以更改该函数以接受多个参数，然后您可以调用该函数：

```
<?php 
function get_theme_mod($main_color, $links_color) {
   // do stuff and return bool
}

if (get_theme_mod( 'main_color', 'links_color' )) : 
?> 
```

这也不是您尝试做的主要问题，但您应该终止`<?php endif; ?>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T12:59:23.437

再次阅读您的帖子后，我想这就是您要实现的目标：

```
<style>
<?php if (get_theme_mod( 'main_color' )) : ?>
    #branding {
        background: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
    }
    a:link {
        color: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
    }
<?php endif ?>
<?php if (get_theme_mod( 'links_color' )) : ?>
    #wrapper a:link {
        color: <?php echo get_theme_mod( 'links_color', '#6C84B4' )."\n"; ?>;
    }   
<?php endif ?>

</style> 
```

这将仅显示所需的 css 代码，具体取决于主题选项，但您将只有一个`<style>`标签打开和关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:15:33.743

```
<?php if (get_theme_mod( 'main_color' ) || get_theme_mod( 'links_color' )) : ?>
<style type="text/css">
<?php endif ?>
<?php if (get_theme_mod( 'main_color' )) : ?>
#branding {
    background: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
}
a:link {
    color: <?php echo get_theme_mod( 'main_color', '#243964' )."\n"; ?>;
}
<?php endif ?>
<?php if (get_theme_mod( 'links_color' )) : ?>
#wrapper a:link {
    color: <?php echo get_theme_mod( 'links_color', '#6C84B4' )."\n"; ?>;
}   
<?php endif ?>

<?php if (get_theme_mod( 'main_color' ) || get_theme_mod( 'links_color' )) : ?>
</style>
<?php endif ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T13:42:09.853

上面的答案很好，但我认为他们遗漏了一些东西。

原始代码将：

*   如果满足条件 A，则添加某些样式。
*   如果满足条件 B，它将添加其他样式。

像这样组合它们：

```
<?php if (get_theme_mod( 'main_color') || get_theme_mod( 'links_color' )) : ?> 
```

修复了 OP 尝试中的错误，但 OP 的尝试并不是他们最初的简单打印目标的精确解决方案`"less style tags"`。这是因为如果满足其中任何一个条件，则将应用两种样式。

（也许这是所需的功能？）

Geralds 的答案更接近，因为它坚持原来的逻辑，但它总是会打印一个`STYLE`标签，不管它是否被满足。鉴于最初的发帖人希望“清理他们的 HTML”，`STYLE`只有在有要打印的样式时才发布标签仍然是一个更好的解决方案。

解决方案是在 PHP 中执行所有逻辑，将 HTML 添加到缓冲区，然后在缓冲区不为空时打印该缓冲区。您可以通过使用实际缓冲区`ob_start()`或仅将字符串保存到变量中来做到这一点。我将使用更直接的“保存到变量”方法。

```
<?php
// initialize the buffer we'll save our style strings too
$buffer = '';
// save the styles to the buffer for main
if (get_theme_mod( 'main_color' )) {
    $buffer .= 
    "#branding {
         background: " . get_theme_mod( 'main_color', '#243964' ) . "\n
    }
    a:link {
         color: " . get_theme_mod( 'main_color', '#243964' ) . "\n
    }\n";
}
// save the styles to the buffer for link colors
if (get_theme_mod( 'links_color' )) {
    $buffer .= 
    "#wrapper a:link {
          color: " . get_theme_mod( 'links_color', '#6C84B4' ) . "\n
    }\n";
}

// verify there's styles to print and print them into a single STYLE tag
if(!$buffer) {
    echo "<style>" . $buffer . "</style>";
} 
```

?>

这会：

1.  在添加其他样式时保持相同的逻辑
2.  只打印一个`STYLE`标签
3.  `STYLE`如果有要打印的样式，则仅打印标签

我希望这会有所帮助！

# mono - Using ActionBarSherlock with monodroid

> ID：12495168
> 
> 赞同：1
> 
> 时间：2012-09-19T12:56:38.560
> 
> 标签：mono, xamarin.android, monodevelop

I have a few problems regarding using ActionBarSherlock example and mono for android.

Monodevelop does not recognize the ’Com’ namespace. I can compile without errors but the IDE does not recognize the namespaces and classes inside it.

![enter image description here](../Images/73ee59b2a85964f60a399cf68f6c7934.png)

Anybody else suffering from this issues?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T19:31:27.433

Are you referencing the DLL, or the Java Binding project? There is a known bug for this: [https://bugzilla.xamarin.com/show_bug.cgi?id=6695](https://bugzilla.xamarin.com/show_bug.cgi?id=6695). It looks like this bug has been fixed, just not released yet.

If you reference the DLL instead of the binding project you should get your Intellisense back.

# struts - 英镑（£）符号替换为struts FormFile中的一些特殊字符

> ID：12495171
> 
> 赞同：1
> 
> 时间：2012-09-19T12:56:55.633
> 
> 标签：struts

我正在使用 struts`FormFile`上传文件，在上传的文件中我指定了 pound(£) 符号并进行上传，但是在操作服务器中读取`FormFile`using `InputStream`or`Byte`时，英镑符号被一些特殊字符替换。

为了解决这个问题，我在我的 jsp 中做了一些更改

```
<%@page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

我的动作课：

```
final FormFile file = form.getUploadFile();
StringWriter stringWriter = new StringWriter();
IOUtils.copy(file.getInputStream(), stringWriter);
final String data = stringWriter.toString();
final byte[] bytes = file.getFileData(); 
final String byteStr = new String(bytes,"UTF-8"); 
```

在字符串字段 和 中，井号符号替换为一些特殊字符。

有人可以帮我解决这个问题吗？

# c# - 我想使用 Texture2d 作为 system.drawing.bitmap

> ID：12495172
> 
> 赞同：2
> 
> 时间：2012-09-19T12:56:59.377
> 
> 标签：c#, xna

[XNA.Texture2D 到 System.Drawing.Bitmap](https://stackoverflow.com/questions/2768840/xna-texture2d-to-system-drawing-bitmap)我确信这回答了我的问题，但它链接了一个外部站点并且不再可用。

我在 xna 游戏中使用 Windows 窗体。我想为我的一个面板使用背景图像。从文件加载很容易，但是当游戏部署到另一个系统时，文件位置显然会有所不同。

```
Bitmap bmp = new Bitmap(@"c:\myImage.png"); 
```

在上面提到的问题中，有人建议使用 Texture2d.saveToPng 然后从内存流中打开位图。这听起来很棒，如果有人可以引导我朝那个方向发展。还有其他想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:23:29.157

这对我有用。如果有问题请告诉我。

```
public static Image Texture2Image(Texture2D texture)
{
   Image img;
   using (MemoryStream MS = new MemoryStream())
   {
       texture.SaveAsPng(MS, texture.Width, texture.Height);
       //Go To the  beginning of the stream.
       MS.Seek(0, SeekOrigin.Begin);
       //Create the image based on the stream.
       img = Bitmap.FromStream(MS);
   }
   return img;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:33:01.757

您可以使用两种方法来创建位图，使用`Texture2D.SaveAsJpeg()`或`Texture2D.SaveAsPng()`。

```
MemoryStream memoryStream = new MemoryStream();
Texture2D texture = Content.Load<Texture2D>( "Images\\test" );
texture.SaveAsJpeg( memoryStream, texture.Width, texture.Height ); //Or SaveAsPng( memoryStream, texture.Width, texture.Height )

System.Drawing.Bitmap bmp = new System.Drawing.Bitmap( memoryStream ); 
```

# node.js - 与 node.js 子进程共享 UDP 套接字/端口

> ID：12495175
> 
> 赞同：2
> 
> 时间：2012-09-19T12:57:08.980
> 
> 标签：node.js

使用 node.js 集群共享 TCP 套接字/端口很容易，但使用 UDP dgram 似乎不可能做到这一点。

有没有办法使用集群，通过在进程之间共享文件描述符或其他方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T23:09:15.943

我对此有很多问题，因为 node.js 并没有真正“分叉”，它“产生”或“分叉/执行”。当我将集群用于 UDP 服务器时，只有一个子进程会接收数据包，最后一个是绑定的。如果您只是“fork()”，操作系统会轮询传入的数据包给每个孩子。如果您“spawn()”遇到文件/套接字句柄的继承权问题，则必须设置选项等，并且底层 node.js udp 服务器可能没有应用这些选项。

我必须编写自己的扩展，简单地调用底层操作系统 fork() 并使其像普通的分叉网络服务器一样工作。

Windows 没有 fork()，所以这种方法行不通，这可能是 node.js 没有普通、普通、花园品种 fork() 的原因。这样做会使它无法移植到 Windows。

1）创建一个目录，我叫我的“util”。

2）将这两个文件放在该目录中。

------------------- 切到这里，命名如下“util.cc” -------

```
#include <v8.h>    //needed for extension infrastructure
#include <node.h>  //needed for extension infrastructure

#include <iostream>  // not part of extension infrastructure, just for the code I'm adding and only while developing to output debugging messages

using namespace node;
using namespace v8;

// The following two functions are examples of the minimum required for a node.js     extension that does anything

static Handle<Value> spoon(const Arguments& args)
{
    pid_t rval = fork();
    if (rval < 0)
    {
        return ThrowException(Exception::Error(String::New("Unable to fork daemon, pid < 0.")));
    }
    Handle<Value> n = v8::Number::New(rval);
    return n;
}

static Handle<Value> pid(const Arguments& args)
{
    pid_t rval = getpid();
    Handle<Value> n = v8::Number::New(rval);
    return n;
}

extern "C" void init(Handle<Object> target)
{
    NODE_SET_METHOD(target, "fork", spoon);
    NODE_SET_METHOD(target, "pid", pid);
} 
```

-------- 剪到这里，命名下面的“wscript” --------

```
def set_options(opt):
  opt.tool_options("compiler_cxx")

def configure(conf):
  conf.check_tool("compiler_cxx")
  conf.check_tool("node_addon")

def build(bld):
  obj = bld.new_task_gen("cxx", "shlib", "node_addon")
  obj.cxxflags = ["-g", "-D_FILE_OFFSET_BITS=64", "-D_LARGEFILE_SOURCE", "-Wall"]
  obj.target = "util"
  obj.source = "util.cc" 
```

--------- 切割结束，给我们留刀------

3) 运行“node-waf 配置”

如果顺利的话，

4）运行“节点waf”

5) 将创建一个名为“build”的新目录，并且将创建您的扩展“build/default/util.node”。将其复制到任何地方并在您的节点程序中使用它，例如：

var util = require("util.node");

var pid = util.fork();

还包括一个 util.pid() 函数，因为 process.pid 在分叉后不能立即工作。它提供父进程的pid。

我是一个初学者节点扩展作家，所以如果这是一种天真的方法，哦，好吧，但到目前为止它对我很有帮助。任何改进，如“简化”，将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:49:23.333

此问题已在 node.js v0.10 中解决

# android - 如何在我的 android 应用程序中集成 AirPush 广告？

> ID：12495177
> 
> 赞同：5
> 
> 时间：2012-09-19T12:57:14.903
> 
> 标签：android, ads

我想在我的 android 应用程序中添加 AirPush 广告。我已经从[http://www.airpush.com/publishers/publishers/downloadsdk/](http://www.airpush.com/publishers/publishers/downloadsdk/)阅读了完整的文档，并且这个 pdf 文件[下载 pdf for airpush sdk](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCAQFjAA&url=http://www.airpush.com/r/sdk_download.php?download=2&ei=nb1ZUKSaFojprAfetoHACg&usg=AFQjCNEQcLy1DWPJcaLLNaM0efcVETjFkA&cad=rja)

现在我有两个查询：

1.  当我们使用 airpush sdk 创建新应用程序时，我们必须提供 android 市场或其他应用程序的 url。那么我们如何在没有airpush集成的情况下提供第一次上传应用程序的url，并获取应用程序的url，然后再次使用airpush集成上传。

2.  第二件事是我们必须在清单中提供该应用程序 ID、应用程序密钥和包名称，并将 jar 文件添加到 lib. 并在我们想要展示这些广告的那个活动中休息一些我在下面显示的代码。我赖吗？？

    公共类 AirTestActivity 扩展 Activity { Airpush airpush;

    ```
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        // create Airpush constructor.
        airpush = new Airpush(this);
        airpush.startSmartWallAd(); //launch smart wall on App start

        // start Dialog Ad
        // airpush.startDialogAd();
        // start AppWall ad
        // airpush.startAppWall();
        // start Landing Page
        // airpush.startLandingPageAd();        

        airpush.startPushNotification(true);
        // start icon ad.
        airpush.startIconAd();      
    }

    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {          
            //use smart wall on app exit. 
        //  airpush.startSmartWallAd();
        }
        return super.onKeyDown(keyCode, event);
    } 
    ```

    }

3.  是否需要在如下布局中添加带有 textview 和 image view 的布局

    ```
    <ImageView
        android:id="@+id/imageView"
        android:layout_width="fill_parent"
        android:layout_height="35dp"
        android:layout_centerHorizontal="true" >
    </ImageView>

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="10dp"
        android:textAppearance="@android:style/TextAppearance.StatusBar.EventContent"
        android:textSize="11dp" /> 
    ```

我们必须为此做的任何其他事情。请指导我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T15:26:15.753

关于#1：您只需要拥有应用程序的包名称即可构建市场 url。例如`com.myapp.pack`。因此，您的应用的市场网址将如下所示：

[https://play.google.com/store/apps/details?id=com.myapp.pack](https://play.google.com/store/apps/details?id=com.myapp.pack)。

如果您更改应用程序的包名称，您可以随时在 Airpush 的编辑应用程序部分进行编辑。

关于#2：是的，这是初始化 Airpush 的正确方法。

关于#3：BannerPush 广告需要 airpush_notify.xml。

最后，带有你的包名的 jar 是正确的实现。`Airpush360.jar`是 Airtest 应用程序提供的示例 jar。如有任何疑问或困惑，请查看下载 sdk 页面上提供的实施文档或发送电子邮件至 support@airpush.com。

# sqlite - 我在我的 sqlite_sequence 表中丢失了一个表名。我该如何重新启用它？

> ID：12495180
> 
> 赞同：2
> 
> 时间：2012-09-19T12:57:32.033
> 
> 标签：sqlite

似乎当我使用 SQLite 管理器下结构页面上的“编辑列”命令修改表中的列定义（不是主键列）时，sqlite3 从其 sqlite_sequence 表中删除了该表名。我尝试手动将其重新添加，但发现 seq 编号不会在添加到丢失的表时更新。

有谁知道如何恢复丢失的表名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:27:16.613

sqlite_sequence[文档](http://www.sqlite.org/fileformat2.html#seqtab)说：

> 如果 AUTOINCREMENT 表的 sqlite_sequence.seq 值手动设置为整数以外的值，并且随后尝试插入或更新 AUTOINCREMENT 表，则行为未定义。

然而：

> 如果在更新 AUTOINCREMENT 表时不存在 AUTOINCREMENT 表的 sqlite_sequence 行，则创建一个新的 sqlite_sequence 行。

所以你不应该向 sqlite_sequence 添加一个“假”条目，但如果它存在，你可以更改它。

# r - 改变 ddply 的输出

> ID：12495181
> 
> 赞同：3
> 
> 时间：2012-09-19T12:57:34.280
> 
> 标签：r, data.table, plyr

是否可以更改 ddply 的输出？我想知道是否可以在 ONE 行上呈现子集的唯一结果，而不是给每个结果一个新行。例如

```
ID   Season  Year
5074 Summer 2008
5074 Summer 2009
5074 Winter 2008
5074 Winter 2009
5074 Winter 2010 
```

进入...

```
ID   Season  Year  
5074 Summer  2008,2009  
5074 Winter  2008,2009,2010 
```

我经常使用 ddply 手动诊断 for 循环等的结果，并且呈现这样的结果会减少输出的长度并使检查速度更快。

干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:04:20.617

首先加载数据

```
dd = read.table(textConnection("ID   Season  Year
5074 Summer 2008
5074 Summer 2009
5074 Winter 2008
5074 Winter 2009
5074 Winter 2010"), header=TRUE) 
```

然后`ddply`照常使用，由`ID`and分割`Season`

```
ddply(dd, .(ID, Season), summarise, Year=paste(Year, collapse=",")) 
```

我们使用`collapse`参数 in`paste`来返回单个字符。由于您想将此用作检查，因此可能值得使用`sort`on `Year`，即

```
paste(sort(Year), collapse=",") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:03:13.770

```
dat <- read.table(text="ID Season Year
 5074 Summer 2008
 5074 Summer 2009
 5074 Winter 2008
 5074 Winter 2009
 5074 Winter 2010", header = TRUE) 
```

可以使用以下方式转换输出`aggregate`：

```
aggregate(Year ~ ID + Season, data = dat, paste)
#    ID Season             Year
#1 5074 Summer       2008, 2009
#2 5074 Winter 2008, 2009, 2010 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-20T00:07:43.493

这非常适合1.8.2 版中新*的漂亮*列表打印`data.table`

```
library(data.table)
DT <- as.data.table(dd)
DT[,list(Year = list(Year)), by = list(ID, Season)]
##     ID Season           Year
## 1: 5074 Summer      2008,2009
## 2: 5074 Winter 2008,2009,2010 
```

这种格式的结果的好处是它只是打印受到影响，您仍然可以访问结果而无需任何字符串拆分

```
DT[(ID==5074)&(Season == 'Summer'), Year]
## [1] 2008 2009
DT[(ID==5074)&(Season == 'Winter'), Year]
## [1] 2008 2009 2010 
```

# paypal - 当 PayPal 订阅被取消或失败时会发生什么？

> ID：12495182
> 
> 赞同：0
> 
> 时间：2012-09-19T12:57:36.983
> 
> 标签：paypal, paypal-subscriptions

我正在考虑使用 PayPal 为网站进行订阅付款，但有一个与取消和付款失败的过程有关的问题。

初始过程：

1.  点击订阅/立即购买按钮
2.  登录 PayPal 或输入卡详细信息
3.  审核，点击确认
4.  完成页面（带有 PDT）

3 个月零 2 天后，用户登录 PayPal 取消订阅（在 PayPal 内而不是使用我的网站）。

对于取消或失败的订阅，该过程或信息如何传递回我的网站？我在 FAQ、Help 或 How to 中没有找到任何内容，并且 Louise 没用。我希望这里有人可以帮助我...

手动，我假设我们应该登录审查历史并相应地更新网站（每两天）。

非常感谢，西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:01:39.557

您将在您的 PayPal 个人资料中设置一个 IPN 侦听器。收取、跳过、暂停或取消订阅或定期付款后，您将在 IPN 侦听器 URL 处收到相应的 IPN 消息。

有关 IPN 示例代码和文档，请查看[https://www.paypal.com/ipn](https://www.paypal.com/ipn)，对于各个 IPN 变量，请查看[https://cms.paypal.com/us/cgi-bin/ ?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables)

# ruby - 直接访问受保护方法和使用 send 之间的区别

> ID：12495183
> 
> 赞同：4
> 
> 时间：2012-09-19T12:57:39.823
> 
> 标签：ruby, class

为什么下面代码中两种调用方法有区别：

```
class Access
    def method_missing name
        print "Method is missing"
    end

    protected
    def protected_method
        print "Calling Protected Method"
    end
end

access = Access.new
access.protected_method #Method is missing
access.send(:protected_method) #Calling Protected Method 
```

`access.protected_method`作品符合预期。但是`send`即使它受到保护，该选项也会尝试调用该方法。我想知道内部发生了什么。

我得到了一个要调用的方法的字符串，所以我想使用`send`但我不想调用受保护的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:13:00.200

这就是`send`工作原理。`public_send`如果您只想调用公共方法，请改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:00:16.243

使用 send 可以绕过一些规则，例如访问对象的受保护或私有方法。

另一件事是 send 允许您动态调用方法。使用 send 您可以决定在程序运行之前不知道调用哪些方法，也就是说，您可以决定在运行时将哪些消息传递给它。

除此之外，据我所知，它们是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:02:23.253

嗯，就是这样`send`工作的。它允许您调用方法而不管其可见性如何。如果您发送一个不存在的名称，`method_missing`则将启动。请参阅：

```
class Access
    def method_missing name
        "Method is missing"
    end

    protected
    def protected_method
        "Calling Protected Method"
    end
end

access = Access.new
access.protected_method # => "Method is missing"
access.send(:protected_method) # => "Calling Protected Method"
access.send(:non_existing_method) # => "Method is missing" 
```

如果您不希望以这种方式调用受保护的方法，那么，我想这对于 dreaded 来说是一个很好的用例`eval`。

```
eval "Access.new.protected_method" # => "Method is missing"
eval "Access.new.non_existing_method" # => "Method is missing" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-19T13:06:21.613

的用途之一`send`是绕过可见性，所以这是一个特性，而不是错误，事实上，如果你不允许这种行为，你可能会打破其他程序员使用你的类的期望。

也就是说，如果你真的需要它，你可以重写`send`并`method_missing`在你的类中实现你想要的行为：

```
class Access
  def foo; puts "foo"; end

  def method_missing(message, *args)
    puts "Method #{message} missing"
  end

  def send(message, *args)
    if self.class.protected_instance_methods.include?(message)
      method_missing(message, *args)
    else
      super
    end
  end

protected

  def bar; puts "bar"; end
end

a = Access.new
a.foo            #=> 'foo'
a.bar            #=> 'Method bar missing'
a.send('bar')    #=> 'Method bar missing' 
```

# matlab - Matlab中的圆度

> ID：12495184
> 
> 赞同：0
> 
> 时间：2012-09-19T12:57:40.503
> 
> 标签：matlab, image, edge-detection

我有这个计算圆度的代码

```
 I = imread('http://energyfanatics.com/wp-content/uploads/2008/05/banana.jpg');
%I = imread('http://www.nyapplecountry.com/images/photosvarieties/redrome04.jpg');
pic = rgb2gray(I);
threshold = graythresh(pic);
bw = im2bw(pic,threshold);
fbw = ones(size(bw))-imfill(ones(size(bw))-bw); 
invImg = ~fbw;
imshow(invImg);
f = bwlabel(invImg);
S = regionprops(f,'Area','Perimeter','centroid');
res = (min(sqrt([S.Area]),[S.Perimeter]/4)./(max(sqrt([S.Area]), [S.Perimeter]/4))).^2; 
```

我的问题是当我使用香蕉的图片时，我的得分有多个值，但是当我使用苹果的另一张图片时，我只得到一个值。问题在于留下的噪音。我试图使用一些边缘检测方法，如 sobel，但我无法将边缘检测与黑白图像结合起来。

所以我的问题是如何检测水果的边缘以便得到整个水果以及如何消除噪音。我只想得到水果的圆润度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:02:01.183

这只是部分答案。最简单的边缘检测器是高通滤波器。用一个过滤你的图片，然后使用某种阈值来确定边缘在哪里。我在 Matlab 中太生疏了，不记得如何做好这件事，但它是这样的：

```
hp_filt = [0 1 0; -1 0 1; 0 -1 0];

filtered_pic = conv2(orig_pic, hp_filt);

edges = (filtered_pic > thresh); 
```

您必须自己计算阈值。

不幸的是，我手头没有 Matlab 来查看这是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:31:40.730

[`fspecial`](https://www.mathworks.com/help/images/ref/fspecial.html)在 Matlab 中预定义了用于边缘检测的[Sobel](http://en.wikipedia.org/wiki/Sobel_filter)和[Prewitt](http://en.wikipedia.org/wiki/Prewitt)滤波器。更简单的是，使用[`edge`](https://www.mathworks.com/help/images/ref/edge.html)函数。当然，它应该在灰度图像上完成。

在检测图像边缘后，您可能还想查看用于圆形检测的[Hough 变换。](http://en.wikipedia.org/wiki/Hough_transform#Hough_transform_of_curves.2C_and_its_generalization_for_analytical_and_non-analytical_shapes)[`hough`](https://www.mathworks.com/help/images/ref/hough.html)似乎只检测直线，所以你必须弄清楚如何将它用于圆形。[或者 Matlab 中心 ( 1](http://www.mathworks.com/matlabcentral/fileexchange/26978-hough-transform-for-circles) , [2](http://www.mathworks.com/matlabcentral/fileexchange/9833) )有现有的解决方案

PS对于您的特定方法，您可能只是`regionprops`根据区域阈值过滤返回的对象，如下所示：`Thr=100; S=S([S.Area]>Thr);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T14:59:58.053

补充[@Nathan Fellman](https://stackoverflow.com/users/1084/nathan-fellman)和[@Victor K](https://stackoverflow.com/users/1108941/victor-k)的答案，您可以使用[Canny Edge Detector](http://en.wikipedia.org/wiki/Canny_edge_detector)。与其他方法相比，这种方法不太可能被噪声愚弄，并且更有可能检测到真正的弱边缘。MATLAB 函数`edge`也有一个实现：

```
BW = edge(I,'canny')
BW = edge(I,'canny',thresh)
BW = edge(I,'canny',thresh,sigma)
[BW,threshold] = edge(I,'canny',...) 
```

# php - 使用 php oop 处理连接表的输出

> ID：12495185
> 
> 赞同：-1
> 
> 时间：2012-09-19T12:57:44.687
> 
> 标签：php, mysql, oop

作为我学习 OOP PHP 的一部分，我制作了一个包含以下方法的数据库对象：

```
public static function find_by_sql($sql="") {
        global $database;
        $result_set = $database->query($sql);
        $object_array = array();
        while ($row = $database->fetch_array($result_set)) {
                $object_array[] = static::instantiate($row);
        }
        return $object_array;
} 
```

我可以使用它来检索和访问单个表中的数据，但是当我尝试将它与连接表一起使用时，该对象只为我提供主表中的数据，例如

```
$sql = "SELECT s.name, m.id, m.firstName, m.lastName, m.dob";  
    $sql .= " FROM members AS m";
    $sql .= " LEFT JOIN mbr_sections AS ms ON m.id = ms.member_id";
    $sql .= " LEFT JOIN sections AS s ON ms.section_id = s.id";
$sql .= " ORDER BY s.organisation ASC, s.name ASC, m.lastName ASC, m.firstName ASC";
$sql .= " LIMIT {$per_page} ";
$sql .= " OFFSET {$pagination->offset()}";
$members = Member::find_by_sql($sql); 
```

使用上述查询，以下代码不会为 s.name 字段输出任何内容，但成员表中的所有字段都已正确列出。我知道 MySQL 查询正在访问数据，因为 ORDER BY 语句正确地对输出进行排序。

```
 <?php foreach($members as $member): ?>
  <tr>
    <td><?php echo $member->name;?></td>
    <td><?php echo $member->full_name();?></td>
    <td><?php echo $member->getAge($member->dob);?></td>
    <td><a href="member_edit.php?id=<?php echo $member->id;?>">Edit</a></td>
    <td><a href="member_delete_confirm.php?id=<?php echo $member->id;?>">Delete</a></td>
  </tr>
  <?php endforeach; ?> 
```

如果我用 print_r($members) 输出 $members 它只包含 members 表中的数据，我如何访问从其他表中检索到的数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:09:07.897

您也需要在此处选择它们：

```
$sql = "SELECT s.name, m.id, m.firstName, m.lastName, m.dob";  
$sql .= " FROM members AS m";
$sql .= " LEFT JOIN mbr_sections AS ms ON m.id = ms.member_id";
$sql .= " LEFT JOIN sections AS s ON ms.section_id = s.id";
$sql .= " ORDER BY s.organisation ASC, s.name ASC, m.lastName ASC, m.firstName ASC";
$sql .= " LIMIT {$per_page} ";
$sql .= " OFFSET {$pagination->offset()}";
$members = Member::find_by_sql($sql); 
```

您只选择了姓名、身份证、名字、姓氏和出生日期。

这是一个例子：

```
$sql = "SELECT s.name, m.id, m.firstName, m.lastName, m.dob, mbr_sections.field_you_want, sections.*"; 
```

# zend-framework - Zend：找不到动作助手

> ID：12495192
> 
> 赞同：0
> 
> 时间：2012-09-19T12:57:58.793
> 
> 标签：zend-framework

我正在尝试创建自己的助手。该`Safecheck`文件夹位于`library`文件夹中并包含一个`Helper`文件夹。该类被称为`Safecheck_Helper_Authority.php`（内部`library/Safecheck/Helper`）。

在`Bootstrap.php`：

```
protected function _initHelper() 
{
    Zend_Controller_Action_HelperBroker::addPrefix('Safecheck_Helper');
} 
```

在`Safecheck_Helper_Authority.php`：

```
class Safecheck_Helper_Authority extends Zend_Controller_Action_Helper_Abstract
{
    public function hasAuthority($userId, array $ids)
    {

    }
} 
```

我想使用这个类中的函数。但我收到由以下代码触发的错误“消息：未找到名称授权的操作助手”：

```
$this->_helper->authority('hasAuthority'); 
```

也许我没有用正确的代码调用它？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:52:28.300

为了以这种方式调用动作助手，`$this->_helper->authority('hasAuthority');`您需要在助手中定义[direct()](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.writingyourown)方法。

```
class Safecheck_Helper_Authority extends Zend_Controller_Action_Helper_Abstract
{
    public function direct($userId, array $ids)
    {
       // do helper stuff here
    }
} 
```

注册帮助程序路径和前缀的一种简单方法是使用 application.ini：

```
resources.frontController.actionhelperpaths.Safecheck_Helper = APPLICATION_PATH "/../library/Safecheck/Helper" 
```

在引导程序中执行此操作（不确定 addPrefix() 是否适用于库名称空间）：

```
protected function _initHelper() 
{
    //addPath(path_to_helper, helper_prefix)
    Zend_Controller_Action_HelperBroker::addPath('/../library/Safecheck/Helper', 'Safecheck_Helper');
} 
```

动作助手的简单示例：

```
class Controller_Action_Helper_Login extends Zend_Controller_Action_Helper_Abstract
{
    //prepares a login form for display
    public function direct()
    {
        $form = new Application_Form_Login();
        $form->setAction('/index/login');

        return $form;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:50:38.537

在你的 application.ini 中有类似的东西

```
resources.frontController.actionhelperpaths.Application_Action_Helper = APPLICATION_PATH "/../classes/Application/Action/Helper" 
```

应更改路径以反映您的文件路径。

# ios5 - 相机捕获图像的形状检测（圆形、正方形、矩形、三角形、椭圆） + i OS 5 + Open CV

> ID：12495200
> 
> 赞同：1
> 
> 时间：2012-09-19T12:58:20.873
> 
> 标签：ios5, opencv, computer-vision

我是 OpenCV 的新手，需要知道 OpenCV 的方法，它在 iPhone 的相机捕获图像中检测不同形状（圆形、正方形、矩形、三角形、椭圆）。

所以，有人可以指导我正确的方向（参考/文章/任何东西）哪些技术更好地完成它。

谢谢..

欧米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:44:12.070

首先，您可能需要查看诸如[Canny](http://docs.opencv.org/modules/imgproc/doc/feature_detection.html?highlight=canny)之类的边缘检测器来将形状提取到二进制图像中。（虽然这对 iPhone 来说可能很贵）

对于圈子，我会看看[HoughCircles](http://opencv.itseez.com/modules/imgproc/doc/feature_detection.html?highlight=hough#houghcircles)。

对于正方形和矩形，您应该在下载 opencv 时查看示例目录中的[findContours](http://docs.opencv.org/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontours#findcontours)方法和示例代码`squares.cpp`。

通过快速的谷歌搜索，我找到了一篇关于[在 C# 中检测形状](http://www.emgu.com/wiki/index.php/Shape_%28Triangle,_Rectangle,_Circle,_Line%29_Detection_in_CSharp)的文章，它大致对应于您在使用 opencv 库时在另一种语言中使用的方法。

我没有在 ios 中使用过 opencv，但我希望这能帮助你入门。

# oracle - 在 Google App Engine (GAE) 上使用 JDBC

> ID：12495203
> 
> 赞同：0
> 
> 时间：2012-09-19T12:58:24.933
> 
> 标签：oracle, google-app-engine, jdbc

GAE 不支持 JDBC，但有办法使用它吗？有没有办法**连接到外部 Oracle 数据库**以使用 RDBMS 模式存储结构化信息？是包装器还是运行时库，可以**使用 JDBC 连接到外部 RDBMS**？

我不想使用 GAE 的内部 MySQL 云破解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T02:45:48.437

您无法在 GAE 上打开套接字，这就是您无法为任何外部 RDBMS 打开 JDBC 连接的原因。

顺便说一句，今天他们在 GAE 上推出了一个可信的套接字测试程序：http: [//googleappengine.blogspot.com.br/2012/09/app-engine-172-released.html](http://googleappengine.blogspot.com.br/2012/09/app-engine-172-released.html)

但我相信这不是他们试图解决的问题

# crystal-reports - 水晶报表自定义图表

> ID：12495204
> 
> 赞同：1
> 
> 时间：2012-09-19T12:58:31.297
> 
> 标签：crystal-reports, crystal-reports-2008, crystal-reports-2010

我想在水晶报表中实现一个看起来像进度条（渐变图像）的图表，并且应该根据百分比放置一个包含标记的圆圈。[如图](http://imgur.com/dfHRO)所示。任何人请帮助我如何实现这一目标

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:13:38.867

Crystal Reports 不支持这种类型的图表。

这是一个近似值：

*   创建条形图像和圆形图像（省略分数）
*   创建一个新报告（它将是一个子报告）
*   在详细信息部分放置两个图像；相互对齐
*   添加三个数字参数：Low、High、Score
*   在条形图像的左边缘添加 Low 参数；将高参数添加到右边缘
*   在圆形图像上方添加分数参数和位置；大小以匹配图像的宽度
*   创建一个名为“位置”的公式（见下文）
*   右键单击圆形图像并选择大小和位置...；将位置公式添加到 X 位置的条件公式中
*   对 Score 参数的 X 位置条件公式执行相同的操作
*   禁止除详细信息以外的所有部分
*   根据需要在其他报告中嵌入子报告

公式文本：

```
//{@Position}
//
// RETURNS: position in inches
// TODO: set properties to match your layout
//
// width of circle image (inches)
Local Numbervar circleDiameter:= 0.5;

// X position of left edge of image (inches)
Local Numbervar barLeftX:=1;

// X position of right edge of image (inches)
Local Numbervar barRightX:=3;

// width of bar image
Local Numbervar barWidth:= barRightX - barLeftX;

// relative position of score in relation to low and high scores
Local Numbervar relativePosition:={?Score} / ({?High} - {?Low});

// calculate position of image's X position (return value in INCHES)
barLeftX + (barWidth * relativePosition) - (circleDiameter/2) 
```

条件公式文本：

```
// 
// convert inches to twips (1440 twips/inch); confusing because UI uses inches
//
{@Position}*1440 
```

~~由于某种原因，Crystal Reports 2008 忽略了条件公式。我会做一些研究并发布结果。~~

否则，请考虑更换图表：

*   [CRChart](http://www.threedgraphics.com/tdg/products/tools/crchart/product_info.php)

# java - JApplet - 添加菜单和绘画组件

> ID：12495207
> 
> 赞同：1
> 
> 时间：2012-09-19T12:58:39.860
> 
> 标签：java, menu, applet, paint, japplet

我正在尝试使用 JApplet 做非常简单的应用程序，在顶部我需要一个菜单​​栏，在该菜单下方，我只使用绘制一些线条或一些字符串或形状的绘制组件。

下面是我的应用程序的示例代码，但是如果您运行此代码，您将看到菜单将被绘制阶段隐藏，除非您单击菜单栏区域。我在谷歌搜索，但我找不到匹配的解决方案。

如果有人能建议我它的正确根源是什么，我将不胜感激。

```
public class MyApplication extends JApplet {

    public void init() {
        setSize(400, 400);
         this.setBackground(new Color(0x646060));

        JMenuBar menubar = new JMenuBar();

        JMenu menuOption = new JMenu("Options");
        JMenuItem Camera01 = new JMenuItem("Camera 01", 1);
        menuOption.add(Camera01);
        menubar.add(menuOption);
        setJMenuBar(menubar);
    }

   public void paint(Graphics g) {
        g.setColor(Color.CYAN);
        g.drawRect(0, 0, 100, 100);
    }
} 
```

# windows-7 - 在 WinXP/7 上与 NDIS 通信

> ID：12495211
> 
> 赞同：0
> 
> 时间：2012-09-19T12:58:59.670
> 
> 标签：windows-7, windows-xp, drivers, ethernet, ndis

有设备通过 1Gbit 以太网连接到 PC。WinXP/7 我想通过以下方式捕获数据：

1.  PC 向设备发送命令（启动数据采集）
2.  设备正在向 PC 发送数据
3.  用户应用程序等待获取
4.  驱动程序将数据保存在内存中
5.  设备发送命令通知已完成采集
6.  驱动程序产生中断，用户应用程序开始从驱动程序读取数据

我不知道如何实现。有网卡驱动。有 NDIS。用户应用程序可以与 NDIS 通信吗？我需要编写额外的驱动程序来与 NDIS 通信吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T23:24:41.110

您的问题实际上有两个部分：

1.  如何向设备发送命令
2.  如何捕获从设备发送的数据

**第一个问题**有两种可能的解决方案，具体取决于您的设备是否接受封装在 IPv4/IPv6 中的命令，或者是否需要其他一些低级协议。如果设备接受封装在 IPv4/IPv6 中的命令，那么只需使用您喜欢的编程语言中[的套接字 API](http://msdn.microsoft.com/en-us/library/b6xa24z5.aspx)。

如果设备需要自己的非 IP 协议，则需要添加 NDIS 协议驱动程序。Windows 驱动程序工具包中包含一个[示例协议驱动程序；](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=4865)该驱动程序实质上打开了一个通道，允许用户模式应用程序发送*任何*类型的数据包。（如果它被广泛部署，这将是一个安全问题，这就是为什么它不是操作系统的内置功能。）您可能需要修改协议驱动程序以选择性地仅侦听来自您的设备的控制消息。

**第二个问题**——数据包捕获——已经解决了。您应该能够将现有软件下架并将其集成到您的解决方案中。 [Microsoft 网络监视器](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=4865)有一个 API，您可以使用它轻松启动/停止数据包捕获，并遍历捕获的结果。或者，有些人使用 WinPcap。

# php - php表单的问题

> ID：12495216
> 
> 赞同：0
> 
> 时间：2012-09-19T12:59:14.300
> 
> 标签：php, forms, methods, get, action

我遇到了表格的麻烦。

事实上，我有一个 php dynbamic 页面，它有 1 个参数（和 id），我正在尝试获取另一个参数，所以我有这个 fom：

```
<form action="index.php?p=employee-monitoring&id=<?php echo $_GET['id'] ; ?>" method="get">
<fieldset>
<legend>CHOISIR UNE DATE</legend>
<label>Date:</label>

<input type="date" name="date" onblur="form.submit()" />

</fieldset>
</form> 
```

但是当我选择一个日期时，它会将我重定向到 index.php 并且日期上没有参数，例如它将我重定向到此页面 /index.php?date=

我不明白我做错了什么。

接受我最大的尊重。

亲切的问候。

SP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:01:03.310

添加隐藏字段并`&id=<?php echo $_GET['id'] ; ?>`从操作属性中删除。

```
<form action="index.php?p=employee-monitoring" method="get">
<fieldset>
<legend>CHOISIR UNE DATE</legend>
<label>Date:</label>

<input type="date" name="date" onblur="form.submit()" />
<input type="hidden" name="id" value="<?php echo $_GET['id'] ; ?>" />

</fieldset>
</form> 
```

* * *

实际上，您应该`p=employee-monitoring`以相同的方式通过：

```
<form action="index.php" method="get">
<fieldset>
<legend>CHOISIR UNE DATE</legend>
<label>Date:</label>

<input type="date" name="date" onblur="form.submit()" />
<input type="hidden" name="id" value="<?php echo $_GET['id'] ; ?>" />
<input type="hidden" name="p" value="employee-monitoring" />

</fieldset>
</form> 
```

# python - 使用用户输入调用函数

> ID：12495218
> 
> 赞同：2
> 
> 时间：2012-09-19T12:59:19.543
> 
> 标签：python

我试图在 Python 中制作一个用户输入命令的“游戏”。但是，我不知道您是否可以将该输入作为函数名称。这是我目前的努力：

```
def move():
    print("Test.")

if __name__ == "__main__":
    input("Press enter to begin.")
    currentEnvironment = getNewEnvironment(environments)
    currentTimeOfDay = getTime(timeTicks, timeOfDay)
    print("You are standing in the {0}. It is {1}.".format(currentEnvironment, currentTimeOfDay))
    command = input("> ")
    command() 
```

在这里，输入是 move，因为我想尝试调用该函数（作为潜在的最终用户可能）。但是，我收到以下错误：

```
Traceback (most recent call last):
  File "D:\Text Adventure.py", line 64, in <module>
    command()
TypeError: 'str' object is not callable 
```

我想知道是否有任何方法可以让用户在游戏中“移动”，程序通过调用“移动”函数来实现。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:01:18.523

看起来您正在使用 python3.x 其中`input`返回一个字符串。要恢复 python2.x 行为，您需要`eval(input())`. 但是，您不应该这样做。这很可能导致糟糕的一天。

* * *

一个更好的主意是将函数放入字典中——

```
def move():
    #...

def jump():
    #...

function_dict = {'move':move, 'jump':jump } 
```

进而：

```
func = input('>')  #raw_input on python2.x
function_dict[func]() 
```

* * *

以下代码适用于我在 python3.2 上。

```
def move():
    print("Test.")

func_dict = {'move':move}
if __name__ == "__main__":
    input("Press enter to begin.")
    currentEnvironment = "room" #getNewEnvironment(environments)
    currentTimeOfDay = "1 A.M." #getTime(timeTicks, timeOfDay)
    print("You are standing in the {0}. It is {1}.".format(currentEnvironment, currentTimeOfDay))
    command = input("> ")
    func_dict[command]() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:01:01.507

看看`cmd`模块。看到[这个](http://docs.python.org/library/cmd.html)。

它通常用于 shell 风格的命令语言，但也可用于创建简单的文本风格的冒险游戏。

您可以通过在子类上创建新方法来创建命令`Cmd`。

例如

```
def do_move(self, args):
    if self.next_room.has_snake():
        print "The next room contains a poisonous snake. It bites you and you die."
    else:
        print "The room is empty" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T13:03:25.420

您可以使用以下方法按名称访问函数：

```
function = globals()[function_name] 
```

如果函数在当前模块中，或者

```
function = getattr(other_module, function_name) 
```

您还应该采取措施禁止调用任意函数，例如，添加前缀：

```
 def cmd_move() # ok to call this
 def cmd_jump() # ok to call this

 def internal_func....

 cmd = raw_input('>') # e.g. "move"
 fun = globals()['cmd_' + cmd]
 fun() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:06:45.507

按照 Hans 的建议，重用代码通常会更好，但如果您想输入命令并手动运行它们，拥有有效命令的字典比直​​接执行用户提供的输入要安全得多。

```
cmd = { 'move': move, 'jump': jump, 'look': look } 
```

# php - PHP输入参数编码

> ID：12495220
> 
> 赞同：0
> 
> 时间：2012-09-19T12:59:25.937
> 
> 标签：php, encoding

一个简单的问题：PHP中输入参数的编码是什么？我的意思是 GET、POST 等。

运行一些测试，我发现它们可能是 UTF-8 编码的。这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:02:33.253

它们在编码浏览器中发送它们。您可以（并且应该）建议浏览器使用一些编码，例如页面元字符集或表单接受字符集，例如：

```
<form action="form_action.php" accept-charset="UTF-8"> 
```

但你不能强迫它。但是，如果您愿意，您也可以过滤掉所有不在您建议的编码中的输入数据。

这不是特定于 PHP 的，而是普遍适用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:01:02.410

这完全取决于 HTTP 请求发送的内容。如果浏览器发送 UTF-8 编码的数据，这就是您将从 PHP 中读取的内容。

# iphone - 如何在按钮上显示从 url 加载的图像？

> ID：12495222
> 
> 赞同：1
> 
> 时间：2012-09-19T12:59:30.977
> 
> 标签：iphone, objective-c, ios, xcode

这是一个示例：在多按钮上显示多图像并在滚动视图上显示

```
 (void)viewDidLoad
  {  
[super viewDidLoad];
 NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
InitData *inData=[[InitData alloc]init];

scrollview.delegate=self;
scrollview.scrollEnabled = YES;
int scrollWidth = 120;
scrollview.contentSize = CGSizeMake(scrollWidth,100);

int xOffset = 0;
//imageView.image = [UIImage imageNamed:[imagesName objectAtIndex:0]];

//Test
NSURL *url=[NSURL URLWithString:@"....."];
NSData *jsonData=[NSData dataWithContentsOfURL:url];

if (jsonData !=nil)
{

        NSError *error=nil;
        id result=[NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];

        if (error ==nil)
        {
                NSLog(@"%@",result);
              //  NSMutableArray *ArImg = nil;
               NSArray* rus=[result objectForKey:@"RespOBJ"];

    for (int index = 0; index < rus.count ; index++)
    {
        NSMutableDictionary* final=[rus  objectAtIndex:index];

        [inData setId:(int)[final objectForKey:@"Id"]];
        [inData setTum:[final objectForKey:@"TumbImage"]];
        [inData setImage:[final objectForKey:@"Image"]];

        UIButton *btn=[UIButton buttonWithType:UIButtonTypeCustom];
        [btn setImage:[UIImage imageNamed:[inData getImage]] forState:(UIControlStateNormal)];
        //[btn setImage:[UIImage imageWithData:jsonData] forState:(UIControlStateNormal)];

        [btn setTag:index];
        btn.bounds = CGRectMake(10, 10, 50, 50);
        btn.frame = CGRectMake(5+xOffset, 0, 160, 70);

        scrollview.contentSize = CGSizeMake(scrollWidth+xOffset,70);

        NSLog(@"%@",[inData getId]);
        NSLog(@"%@",[inData getImage]);
        NSLog(@"%@",[inData getTum]);

        [btn addTarget:self
             action: @selector(btnclick:)
             forControlEvents: UIControlEventTouchDown];

    [scrollview addSubview:btn];

    xOffset += 170; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:42:37.070

您的代码的问题是您没有加载任何内容。我假设您想从 Internet 下载图像，然后将其显示在滚动视图上。为此，您必须使用 a`NSURLRequest`和 a `NSURLConnection`。查看 Apple 的文档[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)和[https://developer.apple.com/library /ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)
您可能还喜欢这个关于如何异步加载数据的问题[Object-c/iOS ：How to use ASynchronous to get a data from URL?](https://stackoverflow.com/questions/4505623/object-c-ios-how-to-use-asynchronous-to-get-a-data-from-url)

# jsf - 构建产生优雅用户体验的 JSF 应用程序时的最佳实践

> ID：12495223
> 
> 赞同：1
> 
> 时间：2012-09-19T12:59:37.590
> 
> 标签：jsf, web-applications, primefaces

我正在为我的 JSF 应用程序使用 PrimaFaces 和 Mojarra 实现。当我将应用程序放在一起时，我使用公司/应用程序徽标和具有 jQuery 外观和感觉的 primefaces 小部件（小部件本身看起来很棒！）。问题是应用程序最终看起来非常相似，具有某种框类型的外观 - 文本框、数据表等，与 html/css 设计器/开发人员的手工编码相比，外观和感觉无处可寻。

当您开发企业 JSF 应用程序时，您使用哪些最佳实践来确保用户友好且美观的 ui？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:18:18.743

我不确定您在寻找什么，但在开发速度和外观之间存在权衡。也就是说，在我们的商店中，我们使用 PrimeFaces 并拥有使页面“工作”的开发人员。然后由 xhtml/css 设计师跟进，他们清理页面和控件的外观。如果您还没有，请查看样式部分。在更改控件的外观方面有很大的灵活性。当然，它们仍然是分层的、预定义的控件。

编辑：您可以使用 css 为控件的各个部分设置样式。所以例如在这里我们改变标题栏的外观：

```
.bottomViewItem .ui-panel-titlebar{ 
    background: none;
    border: none;
    box-shadow: none;
    padding: 5px;
    margin: 0.1em 16px 0.2em 0;
} 
```

在这里我们改变标题的外观：

```
.bottomViewItem .ui-panel-titlebar span.ui-panel-title{
    color: #E27C4C !important;
    font-family: Rockwell, Georgia, Arial !important;
    font-size: 18px !important;
    margin: 0.1em 16px 0.2em 0;
    text-shadow: none;
} 
```

# c++ - 集合中的不可变对象（C++ 和 Qt）

> ID：12495226
> 
> 赞同：2
> 
> 时间：2012-09-19T12:59:48.243
> 
> 标签：c++, qt, operator-overloading, constants, immutability

我坚持使用带有集合的不可变对象。假设我有以下课程：

```
 //in .h
 class Data {
 public:
      Data(const DataObj& data);
      Data(const Data&);
      const DataObj& getDataObj() const;
 private:
      const DataObj _data; //actually several objects or simple type
 }

 inline const DataObj& Data::getDataObj() const {return _data};

 //in .c
 Data(const DataObj& data)  : _data(data){}; 
 Data(const Data& original) : _data(original._data){} 
```

问题是当我想使用集合时，我遇到了错误

```
 in member function Data&Data::operator(const Data&);
   instantiation from 'typename QMap<Key,T>::iterator QMap<Key, T>::insert(const Key&, const T&)[with Key = int, T = Data]'
   instantiation from here
   error : non-static const member 'const DataObj Data::_data', can't use default assignment operator 
```

现在定义一个赋值运算符似乎没有意义，因为它的原型将是

```
 Data& operator=(const Data&); 
```

我该怎么办？为了在集合中使用我的类，我是否被迫删除所有常量限定符？还是使用指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:13:22.380

如果您要像这样实例化您的地图

```
QMap <MyKey, Data> 
```

我想您应该始终为 Data 定义一个赋值运算符（默认或您自己的）。

您应该按照您的建议尝试使用指针，如下所示

```
QMap <Mykey, Data*> 
QMap <Mykey, QSharedPointer<Data>> 
```

如果您查看 QMap 代码[http://code.woboq.org/kde/include/QtCore/qmap.h.html](http://code.woboq.org/kde/include/QtCore/qmap.h.html)，一些运算符/成员返回 < T >，因此需要定义分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:04:42.270

您可以将数据成员设为非 const，但仅向类的用户提供 const 访问权限，赋值运算符除外：

```
class Data {
 public:
      Data(const DataObj& data);
      Data(const Data&);
      Data& operator=(const Data&);
      const DataObj& getDataObj() const;
 private:
      DataObj _data;
 }; 
```

这样，赋值是唯一可以改变现有对象的操作。然后，您必须确保在任何公共接口中提供对这种类型的 const 实例的访问。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T16:48:38.283

使用好的`stl`容器而不是坏的`Qt`：

由于COW，这将无法与`Qt`容器一起使用，但是可以（直到您尝试复制容器）`stl`

```
class C
{
    C operator=(const C&);
};

int main()
{
    std::map<int, C> cc;
    cc.insert(std::make_pair(0, C()));
} 
```

# twitter-bootstrap - 我什么时候应该在 Emberjs 动态添加的 HTML 代码上调用 Twitter Bootstrap 方法？

> ID：12495227
> 
> 赞同：3
> 
> 时间：2012-09-19T12:59:48.803
> 
> 标签：twitter-bootstrap, ember.js, handlebars.js

我正在使用**Emberjs**、**车把**和**Twitter Bootstrap**。在我的`handlebars`模板中，我使用的是 Twitter Boostrap `dropdown`：

```
<ul class="nav nav-pills">
    <li class="dropdown">
        {{#each content}}
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">
                <i class="icon-plus-sign">
            </a>
            <ul class="dropdown-menu" role="menu">
                <li>
                    <a href="#" {{action my_action my_argument}}> My Action </a>
                </li>
            </ul>
        {{/each}}
    </li>
</ul> 
```

由于此 HTML 代码在页面加载时不会立即可用，而是稍后动态加载，在使用 AJAX 请求加载数据并`content`填充变量后，`dropdown`它无法正常工作：`action`单击链接时它没有关闭。

我知道要完成这项工作，我需要在`dropdown`元素位于 DOM 之后执行以下操作：

```
$('.dropdown-toggle').dropdown(); 
```

在**Emberjs中，***在*将数据添加到 DOM之后，是否有回调或可以执行此操作的地方？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:31:43.363

这种调用应该在视图中，在`didInsertElement`函数中使用。见：[http ://emberjs.com/api/classes/Ember.View.html#event_didInsertElement](http://emberjs.com/api/classes/Ember.View.html#event_didInsertElement)

我知道还有其他一些关于这个的问题/答案......但我懒得找你：p

# node.js - node.js fork 函数并将参数传递给子进程

> ID：12495231
> 
> 赞同：11
> 
> 时间：2012-09-19T13:00:02.957
> 
> 标签：node.js

我在创建 chlid 进程时传递参数

```
if (cluster.isMaster) {
    for (var i = 0; i < os.cpus().length; i++) {
        var new_worker_env = {};
        new_worker_env["WORKER_NAME"] = "worker" + i;

        var new_worker = cluster.fork(new_worker_env);
    }
} 
```

然后尝试在孩子中阅读它：

```
if ( process.env["WORKER_NAME"] != undefined ) instance.name = process.env["WORKER_NAME"]; 
```

但是这个变量不存在，为什么？

节点 v0.8.8

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T18:35:38.270

似乎适用于 Windows，Node.js 版本 0.8.8

```
var cluster = require('cluster'),
    os      = require('os');

if (cluster.isMaster) {
    for (var i = 0; i < os.cpus().length; i++) {
        var new_worker_env = {};

        new_worker_env["WORKER_NAME"] = "worker" + i;

        var new_worker = cluster.fork(new_worker_env);
    }
} else {
    console.log(process.env['WORKER_NAME']);
} 
```

输出：

```
worker0
worker1 
```

# vba - Microsoft.Jet.OLEDB.4.0 - 找不到或可能未安装提供程序

> ID：12495232
> 
> 赞同：8
> 
> 时间：2012-09-19T13:00:03.730
> 
> 标签：vba, excel, oledb, jet

我创建了一个 Excel 宏，在其中我使用 Microsoft.Jet.OLEDB.4.0 在 Excel 工作表上触发查询。

它在我的机器上运行完美，但我的客户遇到了问题。（请参阅随附的屏幕打印）

![客户收到此错误](../Images/296c1a20e67acb19edc69b99611fc0d7.png)

![我在程序中添加的参考资料](../Images/e2344aabedaea02b02d16b65b38c367f.png)

以下是我的连接对象的详细信息：

```
Dim cn
Set cn = CreateObject("ADODB.Connection")
With cn
    .Provider = "Microsoft.Jet.OLEDB.4.0"
    .ConnectionString = "Data Source=" & ThisWorkbook.FullName & "; Extended Properties=Excel 8.0"
    .Open
End With 
```

请注意：我必须使代码在“Windows 7”中工作

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T13:11:37.043

提供程序将在 Window 7 Office x64 上失败，因为该平台不支持提供程序。

您需要安装 x64 [Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-gb/download/details.aspx?id=13255)并将连接字符串更改为`Provider=Microsoft.ACE.OLEDB.12.0`

# assembly - 在 DOS 中直接将文本读入堆栈

> ID：12495236
> 
> 赞同：1
> 
> 时间：2012-09-19T13:00:15.430
> 
> 标签：assembly, x86, dos, 16-bit, tasm

我正在学习汇编程序（16 位 DOS 上的 TASM）并尝试使用 0Ah DOS 服务将文本直接读入堆栈。它在 emu8086 中运行良好，而当我使用实际的 TASM 运行它时 - 它不提供任何用户输入（根本没有输入，似乎根本就跳过`INT 21h`）。

这是我使用它的方式：

```
PROC _readNum USES BP AX BX CX DX SI
    PUSH BP
    MOV BP, SP
    SUB SP, 7

    MOV AH, 0Ah ;Buffered input
    MOV [BP-7], 5 ;Max number of characters to read (4 + 1 for enter)
    LEA DX, [BP-7]
    INT 21h ;This interrupt seems to be doing nothing at all
    ... 
```

可能是什么问题？我是否以错误的方式引用堆栈？提前致谢。

这是完整的代码以防万一：

```
ascii_offset EQU 30h
.model small
.stack 100h
.data
    ; add your data here!
    outStrA DB "Input A: $"
    outStrB DB "Input B: $"
    resultStr DB "Result of $"
    plusStr DB "+$"
    equalsStr DB " is $"
    eol DB 13, 10, "$"

    cnt DB 10
    rcnt DB 0
    buf DB 11 dup("$")

PRINT MACRO op1
    MOV AH, 09h
    LEA DX, op1
    INT 21h
ENDM

PRINTLN MACRO op1
    PRINT op1   
    PRINT eol
ENDM

PRINTEOL MACRO
    PRINT eol
ENDM

.code

PROC _printNum USES BP AX BX DX SI
    PUSH BP
    MOV BP, SP
    SUB SP, 6 ;Max number to print is 5 + $ sign    

    MOV AX, [BP+2]
    MOV DX, 0h ;Is required to divide a double pair
    MOV BH, 0h
    MOV BL, 10 ;Divisor

    LEA SI, [BP-1] ;Our string stored in memory (from end)
    MOV byte ptr [SI], "$" ;End of str
    _printNum_loop:
    DIV BX ;Result is in AX:DX
    ADD DL, ascii_offset ;Convert to ASCII
    DEC SI
    MOV [SI], DL    
    MOV DX, 0h ;Reset DX to divide again
    CMP AX, 0h ;If AX is 0
    JNE _printNum_loop

    PRINT [SI]

    MOV SP, BP
    POP BP
    RET 2
ENDP

PROC _readNum USES BP AX BX CX DX SI
    PUSH BP
    MOV BP, SP
    SUB SP, 7

    MOV AH, 0Ah ;Output to screen
    MOV [BP-7], 5 ;Max number of characters to read (4 + 1 for enter)
    LEA DX, [BP-7]
    INT 21h 

    MOV AX, 0h  ;Result
    MOV BX, 0h  ;Temporary result
    MOV CX, 0h  ;Loop counter   
    MOV CL, [BP-6] ;Loop counter
    LEA SI, [BP-5] ;Starting position to read number
    _readNum_strloop:
        MOV DX, 10 ; ;Will multiply AX by DX
        MUL DX ; AX = AX * DX
        MOV BL, [SI]        
        SUB BL, 30h
        ADD AX, BX
        INC SI  
    LOOP _readNum_strloop

    MOV SP, BP
    POP BP
    RET 0
ENDP

start:
; set segment registers:
    MOV AX, @data
    MOV DS, AX
    MOV ES, AX

    PUSH 0ABCDh
    JMP _printNum

    MOV AX, 4c00h ; exit to operating system.
    INT 21h    

END start ; set entry point and stop the assembler. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:52:52.780

可能有一些错误。你能编译这个吗？

```
PROC _printNum USES BP AX BX DX SI
    PUSH BP
    MOV BP, SP
    SUB SP, 6  ; Max number to print is 5 + $ sign 
```

`sp`即使在此过程结束`sp`之前您不使用 for 寻址或 a 作为源，您也可以在此处进行修改，因此该指令是不必要的。`mov sp,bp`

```
 MOV AX, [BP+2] 
```

这不是错误，只是想知道......`ax`现在应该是`0xABCD`，这是正确的吗？

```
 MOV DX, 0h  ; Is required to divide a double pair
    MOV BH, 0h
    MOV BL, 10  ; Divisor

    LEA SI, [BP-1]          ; Our string stored in memory (from end)
    MOV byte ptr [SI], "$"  ; End of str

_printNum_loop:
    DIV BX                  ; Result is in AX:DX 
```

之后的结果`div bx`不在`ax:dx`. 在`ax`你里面会有商，在`dx`你里面会有余数。

那么这里：

```
PROC _readNum USES BP AX BX CX DX SI
    PUSH BP
    MOV BP, SP
    SUB SP, 7 
```

这是为什么`sub sp,7`？首先，你应该保持`sp`与2对齐，其次，如果你在这个过程结束`sp`之前不使用它来寻址或作为源，为什么要在这里修改？`mov sp,bp`

```
MOV AH, 0Ah    ; Output to screen
MOV [BP-7], 5  ; Max number of characters to read (4 + 1 for enter) 
```

在这里您应该定义操作数的大小，例如。`mov byte [bp-7],5`或`mov word [bp-7],5`。或者`ptr`，如果 TASM 需要，我不知道：`mov byte ptr [bp-7],5`或`mov word ptr [bp-7],5`.

```
LEA DX, [BP-7]
INT 21h 
```

这根本不符合逻辑。根据[DOS INT 21h - DOS 功能代码文档](http://spike.scu.edu.au/~barry/interrupts.html#ah0a) `mov ah, 0x0a; int 21`是缓冲输入，并且`ds:dx`应该指向输入缓冲区。可能您的评论“输出到屏幕”不正确？

```
MOV AX, 0h     ; Result
MOV BX, 0h     ; Temporary result
MOV CX, 0h     ; Loop counter   
MOV CL, [BP-6] ; Loop counter
LEA SI, [BP-5] ; Starting position to read number
_readNum_strloop:
    MOV DX, 10 ; Will multiply AX by DX
    MUL DX ; AX = AX * DX
    MOV BL, [SI]        
    SUB BL, 30h
    ADD AX, BX
    INC SI  
LOOP _readNum_strloop 
```

我认为在这个循环中你有溢出的风险。适合任何 16 位寄存器的最大数字`ax`是 2^16-1 == 65535。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:06:39.463

我没有把所有的代码都看一遍，但是一个问题是你的数据和堆栈段是不同的，也就是说，程序以`ds`!=开头`ss`。

因此`LEA DX, [BP-7]`不会为 DOS 输入函数提供正确的地址，因为它是预期的，`ds:dx`但您的缓冲区位于!= 。随后的调用可能会覆盖一些内存并导致挂起或崩溃。`ss:dx``ds``ss``int 21h`

您需要使用正确的地址。

**更新**：一些细节。

这是您的程序的一个稍微修改过的版本（问题中的代码在 TASM 3.2 中对我来说没有很好地组装）：

**UPDATE2**：忘了提到所有更改的行都包含以 . 开头的注释`;;;;`。

```
ascii_offset EQU 30h
.model small, C ;;;; added ", C"
.stack 100h
.data
    ; add your data here!
    outStrA DB "Input A: $"
    outStrB DB "Input B: $"
    resultStr DB "Result of $"
    plusStr DB "+$"
    equalsStr DB " is $"
    eol DB 13, 10, "$"

    cnt DB 10
    rcnt DB 0
    buf DB 11 dup("$")

PRINT MACRO op1
    MOV AH, 09h
    LEA DX, op1
    INT 21h
ENDM

PRINTLN MACRO op1
    PRINT op1   
    PRINT eol
ENDM

PRINTEOL MACRO
    PRINT eol
ENDM

.code

_printNum PROC USES BP AX BX DX SI ;;;; reordered PROC and _printNum
    PUSH BP
    MOV BP, SP
    SUB SP, 6 ;Max number to print is 5 + $ sign    

    MOV AX, [BP+2]
    MOV DX, 0h ;Is required to divide a double pair
    MOV BH, 0h
    MOV BL, 10 ;Divisor

    LEA SI, [BP-1] ;Our string stored in memory (from end)
    MOV byte ptr [SI], "$" ;End of str
    _printNum_loop:
    DIV BX ;Result is in AX:DX
    ADD DL, ascii_offset ;Convert to ASCII
    DEC SI
    MOV [SI], DL    
    MOV DX, 0h ;Reset DX to divide again
    CMP AX, 0h ;If AX is 0
    JNE _printNum_loop

    PRINT [SI]

    MOV SP, BP
    POP BP
    RET 2
ENDP

_readNum PROC USES BP AX BX CX DX SI ;;;; reordered PROC and _readNum
    PUSH BP
    MOV BP, SP
    SUB SP, 7

    MOV AH, 0Ah ;Output to screen
    MOV byte ptr [BP-7], 5 ;Max number of characters to read (4 + 1 for enter) ;;;; added "byte ptr"
    LEA DX, [BP-7]
    INT 21h 

    MOV AX, 0h  ;Result
    MOV BX, 0h  ;Temporary result
    MOV CX, 0h  ;Loop counter   
    MOV CL, [BP-6] ;Loop counter
    LEA SI, [BP-5] ;Starting position to read number
    _readNum_strloop:
        MOV DX, 10 ; ;Will multiply AX by DX
        MUL DX ; AX = AX * DX
        MOV BL, [SI]        
        SUB BL, 30h
        ADD AX, BX
        INC SI  
    LOOP _readNum_strloop

    MOV SP, BP
    POP BP
    RET 0
ENDP

start:
; set segment registers:
    MOV AX, @data
    MOV DS, AX
    MOV ES, AX

    PUSH 0ABCDh
    JMP _printNum

    MOV AX, 4c00h ; exit to operating system.
    INT 21h    

END start ; set entry point and stop the assembler. 
```

组装（使用 TASM 3.2）`tasm stkkbinp.asm`没有错误或警告。

链接（与 TLINK 3.01）`tlink /m /s stkkbinp`没有错误或警告。

链接器生成的映射文件是：

```
 Start  Stop   Length Name               Class

 00000H 00088H 00089H _TEXT              CODE
 00090H 000C5H 00036H _DATA              DATA
 000D0H 001CFH 00100H STACK              STACK

Detailed map of segments

 0000:0000 0089 C=CODE   S=_TEXT          G=(none)  M=STKKBINP.ASM ACBP=48
 0009:0000 0036 C=DATA   S=_DATA          G=DGROUP  M=STKKBINP.ASM ACBP=48
 0009:0040 0100 C=STACK  S=STACK          G=DGROUP  M=STKKBINP.ASM ACBP=74

  Address         Publics by Name

  Address         Publics by Value

Program entry point at 0000:0070 
```

现在在 TD 中打开程序并执行前 3 条指令：

![在此处输入图像描述](../Images/034f104b4a3ea62b3b79bd55db8b640c.png)

你可以清楚地看到屏幕上`ds`的不相等`ss`。它们相隔 4，首先在 0x4caf 处进行`.data`分段，然后`.stack`在 0x4cb3 处进行分段。就段值而言，4 的差异相当于 4*0x10=0x40 字节。

如果您查看上面的地图文件，您会发现，实际上，这就是这些线段之间的距离：

```
 0009:0000 0036 C=DATA   S=_DATA          G=DGROUP  M=STKKBINP.ASM ACBP=48
 0009:0040 0100 C=STACK  S=STACK          G=DGROUP  M=STKKBINP.ASM ACBP=74 
```

我无法解释为什么地图文件为两者显示相同的段 (9)，但链接的可执行文件却使它们不同。但这就是输入无法正常工作的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T15:06:44.197

详细说明 Alexey Frunze 的回答：

您的代码指定了一个 SMALL 模型。该指令告诉汇编器假设除其他外，`DS = SS`它不（不能）强制执行它。

当 DOS 加载一个 EXE 时，它会将 SS:SP 设置为在文件头中找到的位置。它将 DS 设置为[PSP](http://en.wikipedia.org/wiki/Program_Segment_Prefix)的开头，因此您可以获取命令行参数等。

DOS 缓冲读取函数期望缓冲区位于 DS:DX。您已经使用 BP-7（缓冲区的开头）正确加载了 DX，但您还需要在调用函数之前设置 DS ← SP。你可以这样做

```
MOV AX,SS
MOV DS,AX 
```

或者

```
PUSH SS
POP DS 
```

没有 MOV DS,SS 指令。

# c++ - C++：STL multimap.equal_range()

> ID：12495243
> 
> 赞同：13
> 
> 时间：2012-09-19T13:00:34.073
> 
> 标签：c++, stl, multimap

我有这段代码，但我无法理解**equal_range**方法返回迭代器的部分。我知道范围是***对***对象，里面有两个多图对象，但我不明白，为什么会有 `'for (it = range.first; it != range.second; ++it)'`- 这到底是什么意思？

```
// multmap.cpp -- use a multimap
#include <iostream>
#include <string>
#include <map>
#include <algorithm>

typedef int KeyType;
typedef std::pair<const KeyType, std::string> Pair;
typedef std::multimap<KeyType, std::string> MapCode;

int main()
{
using namespace std;
MapCode codes;
codes.insert(Pair(415, "San Francisco"));
codes.insert(Pair(510, "Oakland"));
codes.insert(Pair(718, "Brooklyn"));
 codes.insert(Pair(718, "Staten Island"));
  codes.insert(Pair(415, "San Rafael"));
  codes.insert(Pair(510, "Berkeley"));

  cout << "Number of cities with area code 415: "
    << codes.count(415) << endl;
  cout << "Number of cities with area code 718: "
    << codes.count(718) << endl;
  cout << "Number of cities with area code 510: "
    << codes.count(510) << endl;
  cout << "Area Code City\n";

  MapCode::iterator it;
  for (it = codes.begin(); it != codes.end(); ++it)
  cout << " " << (*it).first << " "
  << (*it).second << endl;

  pair<MapCode::iterator, MapCode::iterator> range
        = codes.equal_range(718);

  cout << "Cities with area code 718:\n";
  for (it = range.first; it != range.second; ++it) //<------------------ here
  cout << (*it).second << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-19T13:04:23.127

的结果`equal_range`，即您的`range`对象，是一*对*两个迭代器`[beginning-of-range, end-of-range)`。所以你想迭代`[range.first, range.second)`：

```
auto range = m.equal_range(4);

+---+---+---+---+---+---+---+---+---+
| 2 | 3 | 3 | 4 | 4 | 4 | 4 | 5 | 6 |    =:   m
+---+---+---+---+---+---+---+---+---+
            ^               ^
            |               |
       range.first    range.second 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-19T13:03:29.087

该对中的迭代器定义项的范围，其键等于您在该方式中搜索的内容`[range.first, range.second)`。

这意味着要在该范围上进行迭代，您从`range.first`迭代器开始并前进，直到它到达`range.second`，这意味着您刚刚离开了相等的范围。从概念上讲，它与迭代 range 时发生的情况相同`[container.begin(), container.end())`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T13:03:58.963

`equal_range`返回一对迭代器`i1, i2`，使得范围内的所有元素`[i1, i2)`都具有相同的键。因此，为了遍历代码为 718 的所有城市，您调用`equal_range`，然后从返回的对迭代到`first`返回的对`second`。

# zend-framework - 德语变音符号未在 Zend 形式中显示

> ID：12495248
> 
> 赞同：0
> 
> 时间：2012-09-19T13:00:45.880
> 
> 标签：zend-framework, listbox, special-characters

我一直面临 Zend Form 的问题，出于某种原因，具有德语特殊字符的单词不会显示在 Dropbox 中。对于我使用此部分代码的表单：

```
 $country_to = new Zend_Form_Element_Select('country_to');
    $country_to->setLabel('Traveling To (Country)')
            ->addMultiOptions($this->country_list); 
```

我从数据库中得到它是这样的：

```
protected $country_list = array();
protected function getCountryValues()
{
    $mapper = new Application_Model_Mapper_Resource();
    $resources = $mapper->fetchAllCountries();

    $this->country_list[''] = '';
    foreach($resources as $resource){
        $this->country_list[$resource->getName()] = $resource->getName();
    }
} 
```

我得到的结果是这样的： ![在此处输入图像描述](../Images/53fd75b88560d7d1fa63e671186d6f09.png)

我转储了 country_list，它实际上包含所有数据，但它没有显示在表单中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:16:55.053

我找到了解决方案，这很简单。我需要禁用zend的默认转义。我只是将它添加到表单的开头并且它起作用了：

```
$this->getView()->setEscape('stripslashes'); 
```

# ios - MagicalRecord 上下文保存不持久数据

> ID：12495250
> 
> 赞同：2
> 
> 时间：2012-09-19T13:00:49.617
> 
> 标签：ios, core-data, nsmanagedobjectcontext, magicalrecord

我有一个应用程序，在第一次运行时，它从后端服务（StackMob，但我认为服务的选择不是这里的一个因素）下载一堆数据，将其缓存到 plist 文件，并从plists 到核心数据存储中。在随后的运行中，它使用相同的类来获取任何新的或更新的数据并将其同步到核心数据存储中。我正在使用 MagicalRecord 而不是 Apple 的核心数据堆栈，并且在 NSOperationQueue 中执行导入/同步。

该队列为 8 个实体中的每一个运行一种方法，其中一种方法看起来像这样......

```
- (void)processAppData
{
    NSString *entityName = kEntityAppData;                                          // customise for entity
    NSString *smidName = kAttribute_appdata_id;                                     // customise for entity
    NSArray *syncData = [MFGlobals cachedDataForName:entityName];
    [[NSFileManager defaultManager] removeItemAtPath:[MFGlobals cachePathForDownloadNamed:entityName]
                                               error:nil];
    if (!syncData) return;

    NSLog(@"%@ items: %i", entityName, [syncData count]);
    NSNumber *lastUpdated = [MFGlobals lastUpdatedEntityNamed:entityName];
    NSLog(@"Last updated %@: %qu", entityName, [lastUpdated unsignedLongLongValue]);

    for (NSDictionary *item in syncData) {
        AppData *object;                                                            // customise for entity
        NSString *smid = [item objectForKey:smidName];
        NSNumber *lastmoddate = [item objectForKey:kAttribute_lastmoddate];
        NSLog(@"%@ item with ID: %@ lastmoddate: %qu", entityName, smid, [lastmoddate unsignedLongLongValue]);

        object = [self dataItemFromEntity:entityName withID:smid inField:smidName];

        if (!object) {
            // we have to create a new item
            object = [NSEntityDescription insertNewObjectForEntityForName:entityName
                                                   inManagedObjectContext:localContext];
            [object setAppdata_id:smid];                                            // customise for entity
        } else {
            // we have an item that _might_ need updating
            if ([object lastmoddate] >= lastmoddate)
                continue;
        }

        [object setLastmoddate:lastmoddate];
        [object setValue:[item objectForKey:kAttribute_value]];
        NSLog(@"new/updated %@ object: %@", entityName, [object description]);

        [localContext saveNestedContexts];
        NSLog(@"%@ object updated.", entityName);

        if ([lastmoddate compare:lastUpdated] == NSOrderedDescending)
            lastUpdated = lastmoddate;
    }

    [MFGlobals setLastUpdated:lastUpdated forEntityNamed:entityName];
    NSLog(@"New last updated %@: %qu", entityName, [lastUpdated unsignedLongLongValue]);
} 
```

如果我使用`[localContext save]`而不是`[localContext saveNestedContexts]`该过程似乎可以正常运行。数据何时以及应该如何出现在我的 UI 中，我可以在我的应用程序中导航，但数据不会持久保存到 sqlite 数据库。

从这里[获得灵感 MagicalRecord - saveinBackground 不持久化数据？](https://stackoverflow.com/questions/12410213/magicalrecord-saveinbackground-not-persisting-data)我切换到使用`[localContext saveNestedContexts]`& 它现在可以正确处理和保留前 6 个实体的数据。但是，在下一个实体的第一条记录中，它会正确保存该记录，然后我的应用程序进入锁定状态。当我再次运行该应用程序时，该实体的下一条（实际上是第一条新）记录也会发生同样的情况。当我拥有该实体中的所有数据时，下一个（& 最后一个实体）的第一个（& 当前唯一）记录也会发生同样的情况。

我在这里描述的方法与我成功使用 Apple 风格的 Core-Data 代码的方法基本相同，只是我`NSManagedObjectContext`在上下文中使用了 MagicalRecord 提供的和 MagicalRecord 保存方法。

我也尝试过使用 MagicalRecord `saveInBackgroundWithBlock`（不使用队列）来执行此操作，但遇到了我所有实体的第一条记录锁定问题。

关于如何使其正常工作的任何线索？

干杯和 TIA，佩德罗

# c# - Convert a html file to PDF (with inline styles)

> ID：12495254
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:01:00.680
> 
> 标签：c#, html, pdf, pdf-generation

I want to convert a static html file to pdf file with the styles as it is. I have only a few fields in html , Like text,select,textarea,button,label ( but all contains inline styles) I have checked itextsharp, which is converting to pdf with no styles.

**Can I generate the pdf as I see the html file in browser**

I am using c# win-form application to do that.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:03:53.707

Generating pdf from html page using [http://www.html-to-pdf.net/](http://www.html-to-pdf.net/) First download dll from site and refer it in ur code...i have written rest of the code below, have a look.

```
 PdfConverter pdfConverter = new PdfConverter();
            //pdfConverter.LicenseKey = "put your license key here";

            pdfConverter.PdfDocumentOptions.EmbedFonts = false;
            pdfConverter.PdfDocumentOptions.ShowFooter = false;
            pdfConverter.PdfDocumentOptions.ShowHeader = false;
            pdfConverter.PdfDocumentOptions.GenerateSelectablePdf = true;
            pdfConverter.ActiveXEnabled = true;
            pdfConverter.AvoidImageBreak = true;
            pdfConverter.NavigationTimeout = 2147483647;

            pdfConverter.ScriptsEnabled = true;
            pdfConverter.PdfDocumentOptions.AutoSizePdfPage = true;
            pdfConverter.SavePdfFromUrlToFile(html file path, output file path filepath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:14:35.483

I use [WKHtmlToPdf](http://code.google.com/p/wkhtmltopdf/) a shell utility which is based on the standard WebKit engine. Give it a try.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T13:15:48.343

[Amyuni WebkitPDF](http://www.amyuni.com/en/server/webkitpdf) is a free library that can be used for HTML to PDF conversion. It comes with sample code in C# and C++ and a sample desktop application that you can use for evaluating the results.

*usual disclaimer applies*

# javascript - 如何防止文本区域中的javascript代码执行

> ID：12495259
> 
> 赞同：-4
> 
> 时间：2012-09-19T13:01:03.683
> 
> 标签：javascript, jquery

当其他用户查看我的页面时，如何防止包含可执行 javascript 的用户内容运行？

例如，如果有人将此添加到页面上的文本框，然后保存表单，当再次查看此内容时，我将如何阻止执行此内容？：

```
<script type="text/javascript">
window.alert("hiiii!")
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:02:25.627

它称为 xss 你还需要检查[XSS Filter Evasion Cheat Sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet)还检查[如何避免跨站点脚本漏洞](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)

# xcode - 在 iOS 中使用网格视图进行缩放

> ID：12495262
> 
> 赞同：1
> 
> 时间：2012-09-19T13:01:11.733
> 
> 标签：xcode, zooming, pinch, aqgridview

我正在创建一个以网格格式加载图像的应用程序。用户将能够看到图像网格并捏合以放大图像区域。

我看过 AQGridView 但我不确定它是否支持捏缩放。

# javascript - 如何使用 UglifyJS 检查未定义的标识符

> ID：12495272
> 
> 赞同：0
> 
> 时间：2012-09-19T13:01:39.463
> 
> 标签：javascript, parsing, uglifyjs

我想使用 UglifyJS 解析器来检查在不能保证定义的情况下是否使用了一段代码中的任何标识符。

例子：

```
// Should raise an error since myfunc and myvar have not been defined, but works
var ast = jsp.parse('myfunc(myvar);'); 
```

我意识到`myfunc`并且`myvar`不一定*是*未定义的（因为它们可能存在于范围内），但我想知道它们何时可能*未定义*。

`echo "myfunc(myvar);" | uglifyjs`愉快地返回`myfunc(myvar);`，我找不到任何选项来检查未定义的变量。

如果我运行 JSLint 并`assume browser, window, node.js, etc` **全部关闭**，那么这就是我想要的结果。我想用 UglifyJS 做类似的事情，假设对环境没有任何影响（没有窗口、控制台、警报等）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T09:13:43.687

您的要求很高，因为您希望确定字符串文字的某些内容是否构成有效代码。字符串文字几乎可以是字面上的（呵呵）任何东西。当然可以（这是一个与“简单”完全不同的概念）指定根据某些规范预期字符串文字有效的确切情况，但如果您需要帮助，您需要表明您已经有了一个可以识别此类文字的算法。

首先，您需要确定此类情况，其次，说明此类文字内容必须遵循的一组规则（形式语法将是一个很好的方法）（请注意，在某些但不是所有情况下，可以用正则表达式来表达这样的语法）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T09:23:29.210

您可以使用“范围链”。这篇文章[http://tore.darell.no/pages/scope_in_javascript](http://tore.darell.no/pages/scope_in_javascript)中描述了变量范围。

使用范围链可能很容易，也可能不...

这是来自文章的一个很好的例子

```
//global
function foo () {
  //global.foo
  function bar () {
    //global.foo.bar
    function baz () {
      //global.foo.bar.baz
    }
  }
} 
```

您可以检查您的函数和/或变量是在此范围链中定义还是在您的范围链中定义到特定级别。（例如 global.foo.bar 中的所有内容都可以）。

也许这就是您解决问题的方法。

# c# - c# 中是否已经有条件 Zip 函数？

> ID：12495273
> 
> 赞同：13
> 
> 时间：2012-09-19T13:01:42.170
> 
> 标签：c#, linq, ienumerable, linq-to-objects, system.reactive

C# 中是否已经有可以执行“条件压缩”的函数？

IE

是否有一个函数允许不同长度的输入并采用一个谓词来确定何时增加较小的源枚举器，以便看到较大源中的所有元素？

作为一个人为的例子，假设我们有一个可枚举的素数和一个可枚举的整数（都按升序排序）。我们想产生一个新的可枚举，它包含自前一个素数以来的素数和所有整数。

```
{2, 3, 5, 7, 11}

{1, 2, 3, 4, 5, 6, 7, 8, 9, 10,}

{2, [1]}, {3,[]}, {5, [4]}, {7, [6]}, {11, [8,9,10]} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:32:43.863

我的解决方案：

```
public static IEnumerable<Tuple<T1, IEnumerable<T2>>> ConditionalZip<T1, T2>(
    this IEnumerable<T1> src1,
    IEnumerable<T2> src2,
    Func<T1, T2, bool> check)
{
    var list = new List<T2>();
    using(var enumerator = src2.GetEnumerator())
    {
        foreach(var item1 in src1)
        {
            while(enumerator.MoveNext())
            {
                var pickedItem = enumerator.Current;
                if(check(item1, pickedItem))
                {
                    list.Add(pickedItem);
                }
                else
                {
                    break;
                }
            }
            var items = list.ToArray();
            list.Clear();
            yield return new Tuple<T1, IEnumerable<T2>>(item1, items);
        }
    }
} 
```

它保证两个枚举都只会枚举一次。

用法：

```
var src1 = new int[] { 2, 3, 5, 7, 11 };
var src2 = Enumerable.Range(1, 11);
Func<int, int, bool> predicate = (i1, i2) => i1 > i2;
var result = src1.ConditionalZip(src2, predicate); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:17:39.313

这是一个不错的。我认为您不会直接在 .net 中找到现成的函数，但如果您想要的操作是数学中的标准操作，我相信某处有一个库可以做到这一点。但是，如果你想自己做，你可以使用 group by。在这种特殊情况下：

```
var primes = new List<int> {2, 3, 5, 7, 11};
var numbers = new List<int> {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

var groups =
    from number in numbers
    group number by primes.First(prime => prime >= number) into gnumber
    select new {
        prime = gnumber.Key,
        numbers = gnumber.Where(n => n != gnumber.Key)
    }; 
```

这似乎是一个足够简单的解决方案。它将创建一个匿名类型的枚举，其中包含两个成员。您可以将其转换为字典：

```
var dict = groups.ToDictionary(g => g.prime, g=> g.numbers); 
```

编辑：必须订购素数才能使其工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:01:06.873

这就是我所采用的（丑陋的实现），但只枚举了一次枚举。

```
/// <summary>
    /// Merges two sequences by using the specified predicate function to determine when to iterate the second enumerbale.
    /// </summary>
    /// 
    /// <returns>
    /// An <see cref="T:System.Collections.Generic.IEnumerable`1"/> that contains merged elements of two input sequences.
    /// </returns>
    /// <param name="larger">The first sequence to merge.</param><param name="smaller">The second sequence to merge.</param>
    /// <param name="resultSelector">A function that specifies how to merge the elements from the two sequences (a flag is passed into the dunction to notify when elements of the second source are exhausted.</param>
    /// <typeparam name="TFirst">The type of the elements of the first input sequence.</typeparam>
    /// <typeparam name="TSecond">The type of the elements of the second input sequence.</typeparam>
    /// <typeparam name="TResult">The type of the elements of the result sequence.</typeparam>
    public static IEnumerable<TResult> ConditionalZip<TFirst, TSecond, TResult>(this IEnumerable<TFirst> larger, IEnumerable<TSecond> smaller, Func<TFirst, TSecond, bool> predicate, Func<TFirst, TSecond, bool, TResult> resultSelector)
    {
        if (larger == null)
            throw new ArgumentNullException("larger");
        if (smaller == null)
            throw new ArgumentNullException("smaller");
        if (resultSelector == null)
            throw new ArgumentNullException("resultSelector");
        else
            return ConditionalZipIterator(larger, smaller, predicate, resultSelector);
    }

    private static IEnumerable<TResult> ConditionalZipIterator<TFirst, TSecond, TResult>(IEnumerable<TFirst> first, IEnumerable<TSecond> second, Func<TFirst, TSecond, bool> predicate, Func<TFirst, TSecond, bool, TResult> resultSelector)
    {
        using (IEnumerator<TFirst> enumerator1 = first.GetEnumerator())
        {
            using (IEnumerator<TSecond> enumerator2 = second.GetEnumerator())
            {
                if (!enumerator2.MoveNext())
                {
                    secondIsFinished = true;
                }
                currentSecond = secondIsFinished ? default(TSecond) : enumerator2.Current;

                while (enumerator1.MoveNext())
                {

                    while (!secondIsFinished && !predicate(enumerator1.Current, currentSecond))
                    {
                        if (!enumerator2.MoveNext())
                        {
                            secondIsFinished = true;
                        }
                        currentSecond = secondIsFinished ? default(TSecond) : enumerator2.Current;
                    }

                    yield return resultSelector(enumerator1.Current, currentSecond, secondIsFinished);
                }
            }
        }
    } 
```

用法

> var primes = new int[] {2, 3, 5, 7, 11}.ThrowIfEnumeratedMoreThan(1); var ints = Enumerable.Range(1, 20).ThrowIfEnumeratedMoreThan(1);

```
 var results = ints.ConditionalZip(primes, (i, prime) => i <= prime, (i, prime, isEmpty) => new {i, prime, wasMatched=!isEmpty})
            .Where(x => x.wasMatched)
            .GroupBy(x => x.prime)
            .Select(x => new {Prime = x.Key, Values = x.Where(n => n.i != n.prime).Select(n=>n.i).ToArray()})
            .ToArray(); 
```

# android - 跨不同应用程序的 Android 共享首选项

> ID：12495275
> 
> 赞同：10
> 
> 时间：2012-09-19T13:01:51.567
> 
> 标签：android, sharedpreferences

我一直在开发一个 Android 应用程序，它通过 sharedpreference 文件与设备上安装的其他应用程序进行交互。

该文件被创建为 MODE.WORLD_READABLE 并且每个已安装的应用程序都有自己的文件，该文件具有共同定义的名称和属性（更改的是该特定属性的值）。

例如，AppA 和 AppB 应该各有一个名为“app_shared_file.xml”的共享文件，其属性为“property_shared_file”。

从我的应用程序中，我想首先访问该文件并读取该属性值，并根据该结果创建/更新我的。

尽管如此，我在实现这一目标时遇到了一些问题。在 Android 文档中，我看到：

> 检索并保存首选项文件“名称”的内容，返回一个 SharedPreferences，您可以通过它检索和修改其值。**仅将 SharedPreferences 对象的一个​​实例返回给具有相同名称的任何调用者**，这意味着他们将在进行编辑后立即看到彼此的编辑。

在阅读了其他应用程序共享首选项文件后，当我尝试创建/更新我的系统而不是编辑我的系统时，我正在使用我之前阅读过的系统。如果相反，我首先更新我的应用程序并稍后阅读另一个应用程序 - 而不是阅读另一个应用程序，正在访问的是我的应用程序。

有什么想法吗？

我用于读取共享首选项的代码是 [其中 packageName 是另一个应用程序 pckg]：

```
Context con = context.createPackageContext(packageName, Context.CONTEXT_IGNORE_SECURITY);
SharedPreferences pref = con.getSharedPreferences(SHARED_PREF_NAME, Context.MODE_WORLD_READABLE);
pref.getBoolean(SHARED_PREF_PROP, false); 
```

我用于在应用程序共享首选项中编写的代码是：

```
SharedPreferences prefs= getSharedPreferences(SHARED_PREF_NAME, context.MODE_WORLD_READABLE);
SharedPreferences.Editor editor = prefs.edit();
editor.putBoolean(SHARED_PREF_PROP, value); 
editor.commit(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:15:06.893

[SharedPreferences 存储在应用程序包名称的本地。](https://stackoverflow.com/questions/6146106/where-are-shared-preferences-stored) 听起来，您有两个完全独立的应用程序，它们具有不同的包名称。这意味着您将创建两个存储在不同文件夹中的同名文件，而不是从一个文件中读取。为了让不同的活动从相同的`SharedPreferences`文件中读取，您必须将它们放在文件定义的相同包名下`AndroidManifest`。

另一个选项，因为您知道其他应用程序的包名称（我假设），是选择将创建并处理它的主应用程序。然后使用直接 URI 直接从文件本身读取。由于您将权限设置为`MODE_WORLD_READABLE`，因此系统应该允许您执行此操作。虽然，它可能会阻止您访问文件夹本身。我个人从未尝试过。

[我相信我已经找到了您正在寻找的答案。](https://stackoverflow.com/questions/6030321/android-retrieving-shared-preferences-of-other-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T22:49:31.737

您可以使用此代码段从其他应用程序中读取首选项。

```
String PACKAGE_NAME = "com.gr.iasi";
String PREFERENCE_NAME = "GlobalPrefsJorge";

try {
        myContext = createPackageContext(PACKAGE_NAME,Context.MODE_WORLD_WRITEABLE);             
          SharedPreferences testPrefs = myContext.getSharedPreferences(PREFERENCE_NAME, Context.MODE_WORLD_READABLE); 

        Map<String, ?> items = testPrefs .getAll();
        for(String s : items.keySet()){
             //Print keys and values;
            Log.i("***" +s.toString(), items.get(s).toString());
          }

        } catch (NameNotFoundException e) {     
            e.printStackTrace();
        } 
```

# javascript - 无法更新 JavaScript

> ID：12495278
> 
> 赞同：0
> 
> 时间：2012-09-19T13:01:56.437
> 
> 标签：javascript, web-applications, web

我的老板抱怨说，当我创建我们网站的新版本时，用户需要按 Ctrl+F5 才能使网站再次正常运行。这似乎是一个 JavaScript 问题（在我修改 JavaScript 时出现）。

该怎么办？我不希望用户按 Ctrl+F5 也不了解 F5 键的作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:05:03.753

向脚本添加版本控制标志包括

```
<script src="myScript.js?v=2"></script> 
```

这样，您可以在脚本更改时更新版本代码，并且您不想从用户的缓存中加载文件。

如果您使用任何服务器端语言，而不是版本号，您可以拥有文件内容的哈希值，以便在文件更改时自动更新。

# wordpress - wordpress 以插件方式打包一个http调用的脚本

> ID：12495279
> 
> 赞同：0
> 
> 时间：2012-09-19T13:01:56.577
> 
> 标签：wordpress

我正在研究执行内部管理任务的 wordpress php 脚本。使用 HTTP 请求调用此脚本。

例如： http: [//mywpinstance.com/myscript.php](http://mywpinstance.com/myscript.php)

我想以插件的方式打包这个脚本。

我怎样才能做到这一点 ？问候。本

# ios - iOS 应用程序在手动启动时崩溃/挂起，否则不会

> ID：12495282
> 
> 赞同：0
> 
> 时间：2012-09-19T13:02:03.440
> 
> 标签：ios, debugging, manual, launching-application

我的应用程序仅在通过点击设备上的应用程序图标手动启动时才会挂起。当 Xcode 在我的设备上启动它以及 Xcode 在模拟器上启动它时，它运行良好。

关于调试这种情况的任何建议？我从来不需要调试手动启动的应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:46:53.167

xcode -> 组织者 -> 设备 -> 展开您的测试设备 -> 控制台

在这里，您将看到来自您的应用程序的所有日志 (NSLog)（在来自设备的所有其他日志中）没有断点等 ofc

# java - 重启设备后获取HashMap

> ID：12495284
> 
> 赞同：0
> 
> 时间：2012-09-19T13:02:05.430
> 
> 标签：java, android, hashmap

我有一个带有 Integer+Object 对的 HashMap，但是一旦设备关闭再打开，列表就消失了，我需要能够在之后检索数据，否则我的 HashMap 毫无意义。我试过 Bundles，用 HashMap 和我放入的对象扩展 Serializable。有谁知道如何做到这一点？我在想最好的方法是 ObjectOutputStream 但我就是不知道该怎么做。任何人都可以指导我看这个教程/示例，或者可以给我一个快速的吗？

非常感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:03:45.957

> 一旦设备关闭和打开，列表就消失了

当您退出或重新启动应用程序时，列表也消失了。为此创建一个数据库。

[看这里](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:09:59.897

Java 对象——即使是那些可以被序列化的对象——只有在你的进程还活着的时候才是活着的，除非你采取措施来实际序列化它们并持久地存储你的数据。为此有几个选项，包括 SQLite 数据库或 SharedPreferences。[阅读本指南](http://developer.android.com/guide/topics/data/data-storage.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:22:30.350

您可以`SharedPreferances`使用以下代码将数据保存到：

```
 Map<Integer, Object> aMap = new HashMap<Integer, Object>();
    aMap.put(String.valueOf(1), object1);
    aMap.put(String.valueOf(2), object2);
    aMap.put(String.valueOf(3), object3);

    SharedPreferences keyValues = getSharedPreferences("Your_Shared_Prefs", Context.MODE_PRIVATE);
    SharedPreferences.Editor keyValuesEditor = keyValues.edit();

    for (Integer s : aMap.keySet()) {
        keyValuesEditor.putString(String.valueOf(s), toString(aMap.get(s)));
    }
    keyValuesEditor.commit(); 
```

从那里`toString()`获取方法：[如何将对象序列化为字符串](https://stackoverflow.com/questions/134492/how-to-serialize-an-object-into-a-string)

然后像这样重新打开应用程序调用smth：

```
 SharedPreferences keyValues = getSharedPreferences("Your_Shared_Prefs", Context.MODE_PRIVATE);
    Map<Integer, Object> map = new HashMap<Integer, Object>();
    for (String key : keyValues.getAll().keySet()) {
        map.put(Integer.valueOf(key), fromString(keyValues.getString(key, null)));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:08:10.063

要将数据存储到手机中，内容提供商是您的最佳选择。它们不是最容易开始的。但是在 android 中提供了一个示例 Notes 应用程序，它实现了一个简单的内容提供程序。

查看 [http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

但更重要的是这个 [http://developer.android.com/guide/topics/providers/content-provider-creating.html](http://developer.android.com/guide/topics/providers/content-provider-creating.html) 有关于记事本示例应用程序的详细信息

或请参阅此问题 [如何存储 hashmap 以便在设备重启后保留它的值？](https://stackoverflow.com/questions/4953466/how-to-store-hashmap-so-that-it-can-be-retained-it-value-after-a-device-reboot)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-19T13:16:50.030

正如萨米尔·曼格罗利亚所说。`Hashmap`当您重新启动手机时，您的所有数据都消失了。考虑使用[SQLite](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)来保存数据。我会将其保存`Integer`为`Primary Key`数据库中的每一列。

# php - HTTP_USER_AGENT 上的 preg_match

> ID：12495286
> 
> 赞同：0
> 
> 时间：2012-09-19T13:02:11.120
> 
> 标签：php, preg-match

我必须记录带有“Mozilla/5.0”用户代理的 IP 地址（之后没有 webkit 等。明确地只是 Mozilla/5.0）或 null。我一直在玩 preg_match 但运气不好。我知道这不是最整洁的代码，但它只是试图完成工作。我需要对 preg_match 进行哪些更改才能使其正常工作？

```
<?php
    $ip = $_SERVER['REMOTE_ADDR']; 
    $agent = $_SERVER['HTTP_USER_AGENT'];                                   
    $date = date("H:i dS F"); 
    $file = "log.html"; 

 if (preg_match("/\bMozilla\/5.0/", $agent))  {
            $open = fopen($file, "a+");
                fwrite($open, $ip . " | ".$agent." | ". $date); 
            fclose($open); 

} elseif (preg_match("/Null/", $agent))  {
            $open = fopen($file, "a+"); 
                fwrite($open, $ip . " | ".$agent." | ". $date);  
            fclose($open); 
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:08:11.387

提示： -如果在我们的字符串中，请
更改**分隔符：查看**[列表](http://php.net/manual/en/regexp.reference.delimiters.php) -未关闭 - 使用`\`
`\b`
[`file_put_contents`](http://php.net/manual/en/function.file-put-contents.php)

> 该函数等同于依次调用 fopen()、fwrite() 和 fclose() 将数据写入文件。
> 如果文件名不存在，则创建文件。除此以外。
> 使用 FILE_APPEND 标志将内容附加到文件末尾，
> 并使用 LOCK_EX 标志防止其他任何人同时写入文件

尝试

```
<?php
    $ip = $_SERVER['REMOTE_ADDR']; 
    $agent = $_SERVER['HTTP_USER_AGENT'];                                   
    $date = date("H:i dS F"); 
    $file = "log.html"; 

 if (preg_match("#\bMozilla/5.0\b#", $agent))
 {
  var_dump($agent);
  //return 'Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0'
  $content  =  " $ip  | $agent | $date ";
  file_put_contents($file, $content, FILE_APPEND | LOCK_EX);
  }
 ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:28:29.237

为什么不直接使用 strpos？正则表达式对此太过分了。

```
if (strpos($agent, 'Mozilla/5.0') !== false)
{
   //
}
else
{
   //
} 
```

如果你真的想使用 preg_match 那么这应该工作：

```
if (preg_match("/^Mozilla\/5\.0/", $agent))  { 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T13:07:51.723

使用此函数从用户代理获取 IP

```
<?php
# validip/getip courtesy of manolete <manolete@myway.com>
# IP Validation
function validip($ip) {
    if (!empty($ip) && $ip==long2ip(ip2long($ip))) {
        # reserved IANA IPv4 addresses
        # http://www.iana.org/assignments/ipv4-address-space
        $reserved_ips = array (
            array('0.0.0.0','2.255.255.255'),
            array('10.0.0.0','10.255.255.255'),
            array('127.0.0.0','127.255.255.255'),
            array('169.254.0.0','169.254.255.255'),
            array('172.16.0.0','172.31.255.255'),
            array('192.0.2.0','192.0.2.255'),
            array('192.168.0.0','192.168.255.255'),
            array('255.255.255.0','255.255.255.255')
        );

        foreach ($reserved_ips as $r)
            if ((ip2long($ip) >= ip2long($r[0])) && (ip2long($ip) <= ip2long($r[1])))
                return false; 
        return true;
    }
    return false;
}

/* Patched function to detect REAL IP address if it's valid */
function getip() {
    if (getenv('HTTP_CLIENT_IP') && long2ip(ip2long(getenv('HTTP_CLIENT_IP')))==getenv('HTTP_CLIENT_IP') && validip(getenv('HTTP_CLIENT_IP')))
        return getenv('HTTP_CLIENT_IP');

    if (getenv('HTTP_X_FORWARDED_FOR') && long2ip(ip2long(getenv('HTTP_X_FORWARDED_FOR')))==getenv('HTTP_X_FORWARDED_FOR') && validip(getenv('HTTP_X_FORWARDED_FOR')))
        return getenv('HTTP_X_FORWARDED_FOR');

    if (getenv('HTTP_X_FORWARDED') && long2ip(ip2long(getenv('HTTP_X_FORWARDED')))==getenv('HTTP_X_FORWARDED') && validip(getenv('HTTP_X_FORWARDED')))
        return getenv('HTTP_X_FORWARDED');

    if (getenv('HTTP_FORWARDED_FOR') && long2ip(ip2long(getenv('HTTP_FORWARDED_FOR')))==getenv('HTTP_FORWARDED_FOR') && validip(getenv('HTTP_FORWARDED_FOR')))
        return getenv('HTTP_FORWARDED_FOR');

    if (getenv('HTTP_FORWARDED') && long2ip(ip2long(getenv('HTTP_FORWARDED')))==getenv('HTTP_FORWARDED') && validip(getenv('HTTP_FORWARDED')))
        return getenv('HTTP_FORWARDED');

    $ip = htmlspecialchars($_SERVER['REMOTE_ADDR']);
    /* Added support for IPv6 connections. otherwise ip returns null */
    if (strpos($ip, '::') === 0) {
        $ip = substr($ip, strrpos($ip, ':')+1);
    }
   return long2ip(ip2long($ip));
}
?> 
```

# linq - ReportViewer - 对象数据源，嵌套对象返回#Error

> ID：12495292
> 
> 赞同：1
> 
> 时间：2012-09-19T13:02:29.867
> 
> 标签：linq, microsoft-reporting

我正在使用来自 LINQ 的数据集，因此在 LINQ 中也表示链接表，尽管我无法仅访问它们的字段 foreignkey.value 我无法像普通 LINQ 一样钻入对象字段。

有谁知道这是否可能。

**例子**

看来我解释得不够多，所以让我试着更好地解释一下。我有一个类 STranline（Stock Tranline），其中一个可用字段是 Stock（另一个类），尽管在报表设计器 Stock is available 时，我无法查看哪些字段在 stock 中可用。例如 Stock.StkCode或 Stock.StkDesc 这些是一些例子，如果它实际上是可能的，希望能澄清我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T10:00:19.820

我找到了为什么我在[wraithnath的嵌套对象上出现错误的解决方案](http://wraithnath.blogspot.com/2011/04/reportviewer-object-datasource-nested.html)

该解决方案表明所有对象都必须是可序列化的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:51:25.990

您需要使用 AsEnumerable 扩展方法来访问行。看到[这个帖子](https://stackoverflow.com/questions/10855/linq-query-on-a-datatable)。另请参阅[MSDN](http://msdn.microsoft.com/en-us/library/system.data.datatableextensions.asenumerable.aspx)页面以供参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-25T16:43:26.150

我为这个问题找到了一个有效的解决方案。

如果您有一个包含大量信息的报告，那么对所有类和子类使用 Serializable 会使渲染过程太慢。

作为使用 Serializable 的替代方法：

只需创建基类的部分类，并使用要显示的嵌套属性创建一个新的字符串属性，并将属性转换为字符串（如果不同）。

例如：

```
public partial class STranline
{
    public string StockCode => Stock.StkCode;
    public string StockDescription => Stock.StkDesc;
} 
```

# javascript - 表单提交上的 JQuery-UI 可排序排序

> ID：12495294
> 
> 赞同：5
> 
> 时间：2012-09-19T13:02:34.600
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-sortable

图像从数据库加载。我想使用可排序的 JQuery-UI 对图像顺序进行排序，并将数据保存在表单提交中。

```
<script type="text/javascript">
    $(function() {
        $( "#sortable" ).sortable({
            placeholder: "ui-state-highlight",
            cursor: 'crosshair'
    });
        $( "#sortable" ).disableSelection();
});
</script> 
```

* * *

```
<form action="" method="post">
<ul id="sortable" style="width: 524px;">
    <li id="00001" class="ui-state-default"><img src="00001.jpg" width="100" height="90" /></li>
    <li id="00002" class="ui-state-default"><img src="00002.jpg" width="100" height="90" /></li>
    <li id="00003" class="ui-state-default"><img src="00003.jpg" width="100" height="90" /></li>
    <li id="00003" class="ui-state-default"><img src="00004.jpg" width="100" height="90" /></li>  
</ul>
<div style="clear:both;"></div>
<input name="Submit" value="RE-ORDER" type="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-19T13:20:07.093

每次排序时，使用`update: function(){}`in sortable 将值更新为隐藏的输入字段。这是我的代码，它会在您每次排序时更新隐藏的输入。提交表单时，值将发送到服务器。

```
<form action="" method="post">
    <input type="hidden" id="image_order" name="image_order" value="" />
<ul id="sortable" style="width: 524px;">
    <li id="00001" class="ui-state-default"><img src="00001.jpg" width="100" height="90" /></li>
    <li id="00002" class="ui-state-default"><img src="00002.jpg" width="100" height="90" /></li>
    <li id="00003" class="ui-state-default"><img src="00003.jpg" width="100" height="90" /></li>
    <li id="00003" class="ui-state-default"><img src="00004.jpg" width="100" height="90" /></li>  
</ul>
<div style="clear:both;"></div>
<input name="Submit" value="RE-ORDER" type="submit" />
</form>​

 $(function() {
        $( "#sortable" ).sortable({
            placeholder: "ui-state-highlight",
            cursor: 'crosshair',
            update: function(event, ui) {
                var order = $("#sortable").sortable("toArray");
                $('#image_order').val(order.join(","));
                alert($('#image_order').val());
            }
    });
        $( "#sortable" ).disableSelection();
});​ 
```

这是[演示](http://jsfiddle.net/muthkum/SsTdg/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:17:36.840

这是根据我的想法的基本解决方案

创建一个隐藏的输入并将其顺序存储到其中。

```
<script type="text/javascript">
    $(function() {
        $( "#sortable" ).sortable({
            placeholder: "ui-state-highlight",
            cursor: 'crosshair',
            update: function(event, ui) {

      var Order = $("#sortable").sortable('toArray').toString();
      $('#order').val(Order);
 }
    });
        $( "#sortable" ).disableSelection();
});
</script>

<form action="" method="post">
<ul id="sortable" style="width: 524px;">
    <li id="00001" class="ui-state-default"><img src="00001.jpg" width="100" height="90" /></li>
    <li id="00002" class="ui-state-default"><img src="00002.jpg" width="100" height="90" /></li>
    <li id="00003" class="ui-state-default"><img src="00003.jpg" width="100" height="90" /></li>
    <li id="00003" class="ui-state-default"><img src="00004.jpg" width="100" height="90" /></li>  
</ul>
<div style="clear:both;"></div>
<input name="order"  type="hidden" />
<input name="Submit" value="RE-ORDER" type="submit" />
</form> 
```

现在您可以从`order`.

# sql-server - 在外键列中设置空值？

> ID：12495297
> 
> 赞同：12
> 
> 时间：2012-09-19T13:02:55.320
> 
> 标签：sql-server, foreign-keys, relational-database, constraints, relationship

我有这张桌子

```
CREATE TABLE [dbo].[CityMaster](
    [CityID] [int] NOT NULL,
    [City] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [BranchId] [varchar](10) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL CONSTRAINT [DF__CityM__Branc__74444068]  DEFAULT ((0)),
    [ExternalBranchId] [varchar](max) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
 CONSTRAINT [PK_CityMaster] PRIMARY KEY CLUSTERED 
(
    [City] ASC,
    [BranchId] ASC
),
 CONSTRAINT [uk_citymaster_cityid_branchid] UNIQUE NONCLUSTERED 
(
    [CityID] ASC,
    [BranchId] ASC
)
) 
```

和另一张桌子

```
CREATE TABLE [dbo].[CustomerMaster](
    [ID] [int] NOT NULL,
    [CustomerCode] [varchar](20) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [CustomerName] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [CustomerAddress] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL,
    [CustomerPhone] [varchar](max) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [CustomerEmailId] [varchar](100) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
    [CustomerPriority] [int] NOT NULL CONSTRAINT [DF_CustomerMaster_CustomerPriority]  DEFAULT ((0)),
    [CustomerRegisterDate] [datetime] NULL,
    [CustomerIsActive] [bit] NULL CONSTRAINT [DF_CustomerMaster_CustomerIsActive]  DEFAULT ((1)),
    [BranchId] [varchar](10) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL CONSTRAINT [DF__CustomerM__Branc__67DE6983]  DEFAULT ((0)),
    [CityId] [int] NULL CONSTRAINT [DF_CustomerMaster_CityId]  DEFAULT ((0)),
 CONSTRAINT [PK_CustomerMaster] PRIMARY KEY CLUSTERED 
(
    [CustomerCode] ASC,
    [BranchId] ASC
)
) ON [PRIMARY]

ALTER TABLE [dbo].[CustomerMaster]  WITH CHECK ADD  CONSTRAINT [fk_cdCityId_CityId] FOREIGN KEY([CityId], [BranchId])
REFERENCES [dbo].[CityMaster] ([CityID], [BranchId])

ALTER TABLE [dbo].[CustomerMaster] CHECK CONSTRAINT [fk_cdCityId_CityId] 
```

如您所见，. 上有一个外键`CityId, BranchId`。我遇到的问题是，如果用户没有输入他的城市（他可以选择不输入，这个字段不是强制性的，那么`CityId`它将是空白的，当我尝试在`CustomerMaster`表中插入这个值时，我得到这个错误说

**INSERT 语句与 FOREIGN KEY 约束“fk_cdCityId_CityId”冲突。冲突发生在数据库“TestDatabase”、表“dbo.CityMaster”中。该语句已终止。**

所以，我想知道一种方法来规避这个。我知道是否将唯一或主键列作为外键引用，它不能为空。但是，我设定的时间 `on delete set null`呢？在这种情况下，如果该行被删除，`CityMaster`它将被设置为`null`in `CustomerMaster`（我的意思是它的所有引用）。那么，如果可能的话，为什么以及如何`null`手动设置此外键中的值？如果这无论如何都不可能，那么规避我描述的情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T13:05:49.490

如果`CityId`设置为`NULL`，则不会检查外键约束，一切都会好起来的。

另一方面， if`CityId`为 0 （例如，因为您已经指定了它...），并且for`DEFAULT ((0))`中没有匹配的行，那么这确实会导致约束检查失败。`CityMaster``0,BranchId`

*仅当涉及的所有*列都是非时，才检查复合键上的外键约束`NULL`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-25T09:44:54.197

在某一方面的变化`insert query @`

```
[CityId] [int] DEFAULT NULL 
```

这将允许您在`Null`声明为默认值时存储值。

# javascript - phonegap 将参数传递给存储 api 调用

> ID：12495298
> 
> 赞同：0
> 
> 时间：2012-09-19T13:02:57.050
> 
> 标签：javascript, android, cordova

根据文档，您可以创建一个数据库并使用以下内容填充它：

```
 // PhoneGap is ready
//
function onDeviceReady() {
    db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
    db.transaction(populateDB, errorCB, successCB);
    //accessToken=new Table('Token','id unique, tokenType, tokenValue');
    ///createTable(accessToken);
}

 // Populate the database

function populateDB(tx) {
     tx.executeSql('DROP TABLE IF EXISTS DEMO');
     tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
     tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
     tx.executeSql(
            'INSERT INTO '+tname+' (id,data) VALUES (?, ?);',
            [id,data],
            function (transaction, resultSet) {
             //success code
             alert('sucessful insertion');
             },
             errorCB
        );
}

// Transaction error callback
//
function errorCB(err) {
    alert("Error processing SQL: "+err);
}

// Transaction success callback
//
function successCB() {
    alert("success!");
} 
```

但是，我可以在 db.transaction(populateDB, errorCB, successCB); 行中将参数传递给 populateDB 回调吗？? 如果是这样，我将如何访问该参数的值？请举个例子。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:17:28.340

您上面的代码示例看起来有点时髦。首先，看起来您在 tx.executeSql 函数中有一个 javascript 函数。这是不可能的。

这是来自 docs.phonegap.com 的示例：

```
function populateDB(tx) {
 tx.executeSql('DROP TABLE IF EXISTS DEMO');
 tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
 tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
 tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
}

function errorCB(err) {
    alert("Error processing SQL: "+err);
}

function querySuccess(tx, results) {
console.log("Returned rows = " + results.rows.length);
// this will be true since it was a select statement and so rowsAffected was 0
if (!resultSet.rowsAffected) {
  console.log('No rows affected!');
  return false;
}

var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
db.transaction(populateDB, errorCB, querySuccess); 
```

回调的结果被传递到回调函数的 tx 和 results 参数中。

对于您问题的第二部分，如何访问回调，这有助于了解回调系统的工作原理。在调用底层设备之前，PG 为调用创建一个标识符并存储对成功和错误回调的引用。然后，当它调用本机系统时，它会传递标识符，**而不是实际的回调**。

如果本地调用成功，cordova.successcallback 将被写入 webview 并传递之前创建的标识符。如果失败，cordova.failurecallback 将被写入并传递相同的标识符。

[我强烈建议在这里](https://github.com/apache/incubator-cordova-js)查看 github 上的 javascript 源代码，更具体地说，查看您所针对的特定平台的 exec.js 文件。它将让您更好地了解回调系统的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:26:31.753

简短的回答是否定的，不像你尝试过的那样直接。

在可以接收参数的 phonegap 应用程序上处理存储时，我使用了许多已定义的函数。我见过的很多例子都调用了很多子函数，对我来说，这是调试的噩梦。

我发现了一些关于 Web SQL 的问题，但阅读规范确实非常有助于澄清我能做什么和不能做什么。（[http://www.w3.org/TR/webdatabase/](http://www.w3.org/TR/webdatabase/)）

看看这段代码：

```
function dbInsert(param1, param2, dbObj) {
    val1 = param1;
    val2 = param2;
    val3 = String(dbObj.item2);

    var sql = "INSERT INTO DEMO (col1, col2, col3) VALUES (?, ?, ?)";
    db.transaction(function(tx) {tx.executeSql(sql, [val1, val2, val3])}, errorCB, successCB);
} 
```

所以这个函数需要两个字符串参数和一个我创建的虚拟对象。然后将这些合并到一个 sql 字符串中，该字符串将传递给 tx.executeSql 以执行！注意我正在使用？为了替代文字，这些是通过 [] 中的参数发送的。我正在事务方法中执行 tx.executeSql，这意味着它可以单独执行并且仍将处理回调。

所以对于你的例子，我会这样做：

```
function dbInsert(param1, param2, dbObj) {
    val1 = param1;
    val2 = param2;
    val3 = String(dbObj.item2);

    var sql = "INSERT INTO DEMO (col1, col2, col3) VALUES (?, ?, ?)";
    db.transaction(function(tx) {tx.executeSql(sql, [val1, val2, val3])}, errorCB, successCB);
}

function populateDB(tx) {
    tx.executeSql('DROP TABLE IF EXISTS DEMO');
    tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
    tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
    dbInsert('AAA', 'BBB', 'CCC');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T19:42:35.897

我们无法在“db.transaction(populateDB(somestuff),successCB,errorCB);”中的 populateDB 中发送任何参数。

交易方法将替换为 tx 变量。在此处查看源代码：[https ://github.com/apache/incubator-cordova-js/blob/master/lib/android/plugin/android/storage.js](https://github.com/apache/incubator-cordova-js/blob/master/lib/android/plugin/android/storage.js)

此链接中提供了解决方案：

[https://stackoverflow.com/a/14988487/905511](https://stackoverflow.com/a/14988487/905511)

# php - PHP shell_exec cp -r

> ID：12495307
> 
> 赞同：1
> 
> 时间：2012-09-19T13:03:31.990
> 
> 标签：php, linux, shellexecute, shell-exec

以下 PHP 代码在“website.com”文件夹内创建了一个名为“example.com”的文件夹。

```
$src = "/home/www/example.com/";

$dest = "/home/www/website.com/";

shell_exec("cp -r $src $dest"); 
```

如何防止它在目标文件夹中创建新文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:07:58.010

添加`*`：

```
$src = "/home/www/example.com/*";
$dest = "/home/www/website.com/";
shell_exec("cp -r $src $dest"); 
```

# jquery - django中的jquery文件上传不上传文件

> ID：12495313
> 
> 赞同：0
> 
> 时间：2012-09-19T13:03:51.550
> 
> 标签：jquery, python, django

我正在为我的 django 应用程序使用[Jquery 文件上传。](http://blueimp.github.com/jQuery-File-Upload/)我已经完全复制了上面链接中的文件。问题是当我选择文件时，它没有在页面上显示缩略图，当我点击上传时，它会在页面上返回以下输出（甚至在我的模板上也没有）。我检查了数据库，每次我点击上传文件时都会创建一条记录。

```
[{"url": "http://localhost:8090/media/pictures/Hydrangeas.jpg", "thumbnail_url":
 "http://localhost:8090/media/pictures/Hydrangeas.jpg", 
 "name": "Hydrangeas.jpg", 
 "delete_type": "DELETE", "delete_url": "/delete/19"}] 
```

我不知道可能是什么问题。有人有同样的问题吗？帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T10:21:28.790

这是因为引导 css 文件。我自己解决了。有太多的 css 文件使其无法正常工作。清洁它们之后。它工作正常。

# ajax - 在 ajax 页面画廊画廊没有正确加载

> ID：12495315
> 
> 赞同：1
> 
> 时间：2012-09-19T13:03:55.843
> 
> 标签：ajax, loading, galleria

[http://www.pad10.com/my_dir/pad10/](http://www.pad10.com/my_dir/pad10/)

当我们在任何子类别（目录、网站....等）上单击它时。我们将获得项目名称。当我们点击项目名称（Diary Collection 2011）时，画廊应该会打开。在第一次单击时，画廊正在正确加载。我的问题是，当我们点击 2nd project Galleria not loading 时。它仅适用于第一次单击。这里子类别列表，项目列表，和画廊加载页面是ajax加载的。我把广场代码放在 index.php 上。如果我们调用单个画廊页面，它可以正常工作。

请帮助我如何解决这个问题。

# java - 等效于其他语言的 Scala IDE 工作表？

> ID：12495318
> 
> 赞同：10
> 
> 时间：2012-09-19T13:04:02.783
> 
> 标签：java, python, ruby, ide

> 工作表是在保存时评估的 Scala 文件，每个表达式的结果显示在程序右侧的列中。工作表就像一个关于类固醇的 REPL 会话，并享受 1 级编辑器支持：完成、超链接、交互式错误、自动格式化等（来源[https://github.com/scala-ide/scala -工作表/wiki/入门](https://github.com/scala-ide/scala-worksheet/wiki/Getting-Started)）

其他语言中是否有类似的东西？我的意思是，我知道其他动态语言中的 REPL，但工作表的作用远不止于此。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-19T13:24:22.283

这不是真正的语言功能，更多的是 IDE 功能。

它看起来像是一个非常简单的`Transcript`窗口克隆，至少从 1980 年代开始，它就一直是 Smalltalk IDE 的标准部分。

*其中一个*Smalltalk IDE 是 IBM VisualAge for Smalltalk（它被称为*Scrapbook*），后来成为 IBM VisualAge for Java，后来成为 IBM VisualAge for Java Micro Edition，后来成为 Eclipse，事实上[Eclipse Java 开发工具*仍然*具有今天的特色](http://Help.Eclipse.Org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/concepts/cscrapbook.htm)。

Lisp 和 Forth IDE 通常也有类似的东西，通常称为*监听器*。

[LINQPad](http://LINQPad.Net/)是一款为 C#、VisualBasic.NET 和 F# 提供类似体验的产品。

[Pry](http://PryREPL.Org/)仍处于起步阶段，但它的目标是转变为一个完整的 Ruby 交互式 IDE。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:09:07.260

[IPython](http://ipython.org/)通过其基于 Web 的工作表功能为 Python 做了一些非常相似的事情。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-20T02:49:17.263

F# 也有这个功能。您可以在 F# 脚本中编写 F# 语句，然后在控制台中进行评估。您还可以引用 F# 源文件或编译的二进制文件。

# javascript - Jquery冲突/只有一个部分在工作

> ID：12495321
> 
> 赞同：1
> 
> 时间：2012-09-19T13:04:05.893
> 
> 标签：javascript, jquery, html

我想在单个 HTML 页面中使用两个 Javascript 效果

1.  滑块。
2.  花哨的盒子。

当我在单个 HTML 页面中调用两个 JS 文件时，只有一个在工作。这是我的代码：

```
<head>

<!--other-->
<script type="text/javascript" src="js/jquery-1.4.2.min.js" ></script>
<script type="text/javascript" src="js/cufon-yui.js"></script>
<script type="text/javascript" src="js/cufon-replace.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_300.font.js"></script>
<script type="text/javascript" src="js/Myriad_Pro_400.font.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<!--other-->

<!--slider-->
<link rel="stylesheet" type="text/css" href="css/slider.css" media="screen" />
<script type="text/javascript" src="js/sliderjs/jquery.core.js"></script>
<script type="text/javascript" src="js/sliderjs/jquery.superfish.js"></script>
<script type="text/javascript" src="js/sliderjs/jquery.jcarousel.pack.js"></script>
<script type="text/javascript" src="js/sliderjs/jquery.easing.js"></script>
<script type="text/javascript" src="js/sliderjs/jquery.scripts.js"></script>
<!--slider-->

 <!--Fancy Box-->
<!-- Add jQuery library --> 
```

```
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="source/jquery.fancybox.js?v=2.1.0"></script>
<link rel="stylesheet" type="text/css" href="source/jquery.fancybox.css?v=2.1.0" media="screen" />

<!-- Add Button helper (this is optional) -->
<link rel="stylesheet" type="text/css" href="source/helpers/jquery.fancybox-buttons.css?v=1.0.3" />
<script type="text/javascript" src="source/helpers/jquery.fancybox-buttons.js?v=1.0.3"></script>

<script type="text/javascript">
    $(document).ready(function() {
        /*
         *  Button helper. Disable animations, hide close button, change title type and content
         */

        $('.fancybox-buttons').fancybox({
            openEffect  : 'none',
            closeEffect : 'none',

            prevEffect : 'none',
            nextEffect : 'none',

            closeBtn  : false,

            helpers : {
                title : {
                    type : 'inside'
                },
                buttons : {}
            },

            afterLoad : function() {
                this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
            }
        });

        /*
         *  Open manually
         */

        $("#fancybox-manual-a").click(function() {
            $.fancybox.open('images/gallary/1_b.jpg');
        });

        $("#fancybox-manual-b").click(function() {
            $.fancybox.open({
                href : 'iframe.html',
                type : 'iframe',
                padding : 5
            });
        });

        $("#fancybox-manual-c").click(function() {
            $.fancybox.open([
                {
                    href : 'images/gallary/1_b.jpg',
                    title : 'My title'
                }, {
                    href : 'images/gallary/2_b.jpg',
                    title : '2nd title'
                }, {
                    href : 'images/gallary/3_b.jpg'
                }
            ], {
                helpers : {
                    thumbs : {
                        width: 75,
                        height: 50
                    }
                }
            });
        });

    });
</script>

</head> 
```

这些都是JS。我认为 JQuery 1.8.min 与滑块冲突。当我阻止这个 JS 时，我的滑块正在工作，当我激活这个 JS 时，我的花哨的盒子不工作。

# jquery - jQuery悬停菜单

> ID：12495324
> 
> 赞同：0
> 
> 时间：2012-09-19T13:04:24.593
> 
> 标签：jquery

当悬停在菜单链接（class="menu1"）上时，我正在使用 jquery hover 来显示子菜单（id="submenu1"）。

我用过这段代码：

```
sp = $('img[class="menu1"]');
pn = $('#submenu1');   
sp.hover(function(){
  pn.show();
},
function(){
  setTimeout(function(){pn.hide();}, 500);
});

pn.hover(function(){
  pn.show();
},
function(){
   pn.hide();
}); 
```

问题是，我希望子菜单保留以防用户将鼠标悬停在其上。有时有效，有时无效。我看过一些例子，但没有一个对我有用。

**编辑：**

子菜单**不在菜单层次结构中**（它是绝对定位的）

```
<!--menu btn to hover above:-->
<img src="menu.gif" alt="menu" />

<!--completly unrelated submenu:-->
<div id="submenu" >
...
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:46:07.847

也许这段代码可以帮助你。

**JS：**

```
$("img[id^='menu']").hover(function(){
  $("div[id^='submenu']").hide();
  $("#sub" + $(this).attr("id")).show();
},
function(){
    var it = this;

    setTimeout(function(){
      var submenu = $("#sub" + $(it).attr("id"));

      if(submenu.length > 0 && !submenu.is(":hover")){
        submenu.hide();
      }
    }, 200);
});

$("div[id^='submenu']").hover(function(){
},
function(){
  $(this).hide();
});

$("div[id^='submenu']").hide(); 
```

**HTML：**

```
<!--menu btn to hover above:-->
<img src="http://www.stackoverflow.com/favicon.ico" alt="menu1" id="menu1" height="30"/>
<img src="http://www.stackoverflow.com/favicon.ico" alt="menu1" id="menu2" height="30"/>
<img src="http://www.stackoverflow.com/favicon.ico" alt="menu1" id="menu3" height="30"/>
<img src="http://www.stackoverflow.com/favicon.ico" alt="menu1" id="menu4" height="30"/>

<!--completly unrelated submenu:-->
<div id="submenu3" >
This is a submenu3
</div>

<div id="submenu2" >
This is a submenu2
</div>

<div id="submenu4" >
This is a submenu4
</div> 
```

使用此代码，您有时可以发现小错误。问题出在 setTimeout 上。如果您太慢，子菜单将被隐藏。困难来自 DOM 组织，但你假设它。

[这里](http://jsfiddle.net/charlesjourdan/QDug3/6/)有一个jsfiddle来测试代码。

# iphone - 如何在加载其视图控制器时设置禁用标签栏

> ID：12495328
> 
> 赞同：0
> 
> 时间：2012-09-19T13:04:35.520
> 
> 标签：iphone, objective-c, ios

我遇到了 uitabbar 的问题。我想在加载该页面时禁用它。怎么做。谁能帮我。我正在使用标签栏并将其添加为工具栏的子视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:51:20.743

您可以通过两种方式进行设置：

1.  如果您以这种方式使用它，您可以在 Interface Bulder 中设置其参数“启用用户交互”
2.  您可以以编程方式设置它：

> ```
> -(void) loadView {
>     [super loadView];
>     tabBar.userInteractionEnabled = NO;
>  } 
> ```

然后设置：

```
-(void) viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
    tabBar.userInteractionEnabled = YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T12:14:29.267

```
viewController.hidesBottomBarWhenPushed = YES;
[self.navigationController pushViewController:viewController animated:YES]; 
```

您必须在要推送到视图中的控制器上设置 hidesBottomBarWhenPushed = YES ......您必须在将其推送到导航控制器之前和初始化行之后执行此操作。

# django - 注销后记住的Django当前时区

> ID：12495330
> 
> 赞同：0
> 
> 时间：2012-09-19T13:04:38.967
> 
> 标签：django, timezone

用户注销后，Django 似乎记得上次激活的时区。

1.  用户发布表单 - 表单上的日期时间解释为 UTC
2.  用户使用澳大利亚/悉尼的首选时区登录
3.  用户发布表单 - 表单上的日期时间解释为澳大利亚/悉尼
4.  用户登出
5.  用户发布表单 - 表单上的日期时间仍被解释为澳大利亚悉尼，即使 TIME_ZONE 设置为 UTC
6.  重新启动服务器，然后用户（仍未登录）发布表单 - 表单上的日期时间解释为 UTC

我有

```
TIME_ZONE = 'UTC'
USE_TZ = True 
```

并作为中间件：

```
class TimezoneMiddleware(object):
    def process_request(self, request):

        tz = request.session.get('django_timezone', '')
        if tz:
            timezone.activate(tz)
        elif request.user.is_authenticated():
            preferredTimezone = request.user.get_profile().preferredTimezone
            timezone.activate(preferredTimezone) 
```

我认为 Django 可能会记住上次激活的时区，如`activate`源中函数的此注释中所示：

```
def activate(timezone):
    """
    Sets the time zone for the current thread.

    The ``timezone`` argument must be an instance of a tzinfo subclass or a
    time zone name. If it is a time zone name, pytz is required.
    """
    if isinstance(timezone, tzinfo):
        _active.value = timezone 
```

有人可以证实这一点吗？解决此问题的最佳方法是在中间件中使用 else 语句调用`deactivate`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:29:13.933

首先，会话！= 身份验证。

可能在第 2 步和第 4 步之间（当用户登录时），您的一个视图（或某种中间件）将用户的会话设置为`request.session['django_timezone'] = ...`

也许您将个人资料信息传输到某个地方的会话，例如：

```
request.session['django_timezone']  = request.user.get_profile().prefferedTimezone 
```

然后，很自然，即使用户注销，会话也会保持“django_timezone”。

如果您不想利用这一点，请首先执行以下操作：

```
if not request.user.is_authenticated():
    timezone.deactivate() 
```

但我认为你应该问自己的真正问题是：
*如果你不想使用会话，为什么要使用 request.session，而纯粹是配置文件？*

# c - 在 Arduino Mega ATmega2560 微控制器中编程 PWM

> ID：12495331
> 
> 赞同：5
> 
> 时间：2012-09-19T13:04:40.777
> 
> 标签：c, arduino, ada, avr, pwm

我正在尝试在[Arduino Mega](http://arduino.cc/en/Main/ArduinoBoardMega2560) ( [ATmega2560 ) 上启用](http://atmel.com/dyn/products/product_card.asp?part_id=3632)[PWM](http://en.wikipedia.org/wiki/Pulse-width_modulation)，但我面临一些问题。

首先，我正在尝试在[Ada](http://en.wikipedia.org/wiki/Ada_%28programming_language%29)中对此进行编程。我希望将三个 Timer3 通道与 FastPWM 一起使用，所以我写了

```
procedure Main is
begin

   -- Nullify Timer3 buffers
   TCCR3A := 0;
   TCCR3B := 0;
   TCCR3C := 0;

   -- Waveform Generation Mode
   --  Fast PW, 8-bit, TOP = 0x00FF, Update OCR3x at BOTTOM, TOV3 Flag Set on TOP
   --  => WGM33|WGM32|WGM31|WGM30 = 0|1|0|1
   TCCR3A := TCCR3A or TCCR3A_WGM30;
   TCCR3B := TCCR3B or TCCR3B_WGM32;

   -- Compare Output Mode:
   --  Fast PWM, non-inverting mode
   --  => COM3A1|COM3A0|COM3B1|COM3B0|COM3C1|COM3C0 = 1|0|1|0|1|0
   TCCR3A := TCCR3A or TCCR3A_COM3A1 or TCCR3A_COM3B1 or TCCR3A_COM3C1;

   -- Clock Select: clk/1024 => CS32|CS31|CS30 = 1|1|1
   TCCR3B := TCCR3B or TCCR3B_CS32 or TCCR3B_CS31 or TCCR3B_CS30;

   -- Set Timer3 pins as output :
   -- Channel A : Digital Pin 5 / Chip Pin 5 (PE3/OC3A/AIN1)
   -- Channel B : Digital Pin 2 / Chip Pin 6 (PE4/OC3B/INT4)
   -- Channel C : Digital Pin 3 / Chip Pin 7 (PE5/OC3C/INT5)
   DDRE := DDRE_DDE3 or DDRE_DDE4 or DDRE_DDE5;

   OCR3AH := 0;
   OCR3AL := 250;

   OCR3BH := 0;
   OCR3BL := 250;

   OCR3CH := 0;
   OCR3CL := 250;

end Main; 
```

硬件连接正常；我在 Arduino IDE 上使用简单的代码对其进行了测试。所以对我来说，很明显代码缺少某些东西或出错了，这应该是由 PWM 初始化中的问题引起的。有人能解释一下我在哪里犯了这样的错误吗？

提前致谢。

**更新**

如果 Ada 很难获得整个逻辑，C 中的等效代码是（您可以使用[AS6](http://www.atmel.com/microsite/atmel_studio6/default.aspx)构建它，结果是相同的，即不生成信号）：

```
int main(void){
    TCCR3A = 0;
    TCCR3B = 0;
    TCCR3C = 0;

    /* Waveform Generation Mode
    Fast PW, 8-bit, TOP = 0x00FF, Update OCR3x at BOTTOM, TOV3 Flag Set on TOP
    => WGM33|WGM32|WGM31|WGM30 = 0|1|0|1 */
    TCCR3A = TCCR3A|(1<<WGM30);
    TCCR3B = TCCR3B|(1<<WGM32);

    /* Compare Output Mode:
    Fast PWM, non-inverting mode
    => COM3A1|COM3A0|COM3B1|COM3B0|COM3C1|COM3C0 = 1|0|1|0|1|0*/
    TCCR3A = TCCR3A|(1<<COM3A1)|(1<<COM3B1)|(1<<COM3C1);

    /* Clock Select: clk/1024 => CS32|CS31|CS30 = 1|1|1 */
    TCCR3B = TCCR3B|(1<<CS32)|(1<<CS31)|(1<<CS30);

    /* Set Timer3 pins as output :
    Channel A : Digital Pin 5 / Chip Pin 5 (PE3/OC3A/AIN1)
    Channel B : Digital Pin 2 / Chip Pin 6 (PE4/OC3B/INT4)
    Channel C : Digital Pin 3 / Chip Pin 7 (PE5/OC3C/INT5)*/
    DDRE = DDRE|(1<<DDE3)|(1<<DDE4)|(1<<DDE5);

    /* Set PWM Duty Cycles */
    OCR3AH = 0;
    OCR3AL = 250;

    OCR3BH = 0;
    OCR3BL = 250;

    OCR3CH = 0;
    OCR3CL = 250;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T16:41:33.973

查看[www.atmel.com/Images/doc2549.pdf](http://www.atmel.com/Images/doc2549.pdf)第 136 页，我看到一条注释：

“必须将第 57 页“PRR1 – 功率降低寄存器 1”中的功率降低定时器 / 计数器 3 位 PRTIM3 写入零以启用定时器 / 计数器 3 模块。

可能是相关的？

我不知道电源管理的默认设置是什么，我也没用过 2560。

其余的对我来说看起来不错，尽管我在 328p 上使用了计时器库 avr-timer0.adb 等，而不是自己滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-03T11:09:14.300

一个观察结果立即出现——几乎可以肯定这是不对的：

```
--  => COM3A1|COM3A0|COM3B1|COM3B0|COM3C1|COM3C0 = 1|0|1|0|1|0
TCCR3A := TCCR3A or TCCR3A_COM3A1 or TCCR3A_COM3B1 or TCCR3A_COM3C1; 
```

为什么？因为命名常量`COM3A0`只是表示位位置（0 到 7）的整数的别名。在 C 中，当我们设置这些时，我们会执行以下操作：

```
REGISTER |= (1<<COM3A0); 
```

并且 COM3A0 = 3，则它变为 (1<<3)，或 8 是 ORed。

在将其**与当前寄存器值进行 OR 运算之前，它将向左移动 1 的位数。** 因此，除非您的 COM3A0 例如已经移位，否则该语句所做的就是对多个 1 和 0 进行 OR 运算并将单个结果分配给 TCCR3A。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-03T09:18:07.137

您需要在 SREG 中设置 SEI 标志以启用中断并在 main 中添加无限循环。Avr 程序在主函数结束后不会终止或挂起，而是重新开始。 [http://www.atmel.com/webdoc/avrassembler/avrassembler.wb_SEI.html](http://www.atmel.com/webdoc/avrassembler/avrassembler.wb_SEI.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-12-19T14:55:55.273

我不确定，但是如果您忘记了 main 函数末尾的无限循环，程序将停止，所有中断都将被禁用，控制器进入一个空循环。

没有中断就没有PWM。

```
int main(void){
....
while (1) {
}
return 0;
} 
```

# bash - 如果大小写匹配，则 Bash 将行追加到最后一行

> ID：12495334
> 
> 赞同：3
> 
> 时间：2012-09-19T13:04:45.170
> 
> 标签：bash, sed, awk

我有这样的输入：

```
ha  lo 
ha
ha  lo
ha
ha
ha  lo 
```

如果第二行中不包含字符串“lo”，我如何将该行附加到最后一行。之后应该是这样的

```
haha
hahaha
ha 
```

我认为这个非常棘手。如果能够使用 sed 或 awk 来完成，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:19:23.113

```
awk '
    $2 == "lo" {if (line) print line; line = ""} 
    {line = line $1} 
    END {print line}
' filename 
```

这有点简单，但你会得到一个领先的空白行

```
awk '$2 == "lo" {print ""} {printf("%s", $1)} END {print ""}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:54:40.017

这是使用 GNU sed 的一种方法：

*解析.sed*

```
/ +lo/! H          # Append to HS if / +lo/ doesn't match
/ +lo/ {           # If it does match
  s/ *lo//         # remove it
  x                # put the rest in HS and contents of HS in PS
  s/\n//g          # Remove all newlines from PS
  /./! t end       # If PS empty jump to end
  p                # otherwise print
  s/.*//           # and empty it
}

$ {                # If last line
  x                # swap PS/HS
  s/\n//g          # remove newlines
  p                # and print PS
}
: end 
```

运行：

```
sed -nr -f parse.sed < infile 
```

输出：

```
haha
hahaha
ha 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:36:42.743

这是另一种方式

其中 file.txt 包含上述条目

```
 i=0;IFS=$'\n'; for line in `cat file.txt`; do ((i++)); if [[ [$line =~ lo ]]; then if [ $i -eq 1 ];then ha=$(echo "$line"|awk '{print $1}'); echo -n $ha; else echo; ha=$(echo "$line"|awk '{print $1}'); echo -n  $ha; fi else echo  -n "$line"; fi done; echo 
```

哈哈哈哈哈哈

# c++ - C++ 在线预处理器

> ID：12495335
> 
> 赞同：19
> 
> 时间：2012-09-19T13:04:46.873
> 
> 标签：c++, c-preprocessor

**我有：**

1.  包含大量复杂宏的 C++ 代码（#define bla bla ...）
2.  以及这些 MACROS 的用法（实例化）

**我需要：**

一个工具（例如在线），它将简单地进行 MACROS（或宏系统）的实例化并显示结果代码。

**例子：**

*输入：*

```
#define AAA(a,b) if ((a) > (b))

AAA(1, f1(10)) 
```

*输出：*

```
if ((1) > (f1(10))) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T13:07:27.647

`gcc`选项将是-E [，](http://gcc.gnu.org/onlinedocs/gcc-4.4.0/gcc/Preprocessor-Options.html#Preprocessor-Options)然后是您的文件名。

对于 MSVC `cl.exe`，解决方案也是[/E](http://msdn.microsoft.com/en-us/library/3xkfswhy.aspx)。

# c - 从 gettimeofday 开始的时间没有按照应有的方式更新

> ID：12495337
> 
> 赞同：3
> 
> 时间：2012-09-19T13:04:50.257
> 
> 标签：c, gettimeofday

```
#include <stdio.h>
#include <sys/time.h>

int main()
{
   float time;
   struct timeval tv;
   gettimeofday( &tv, NULL );
   time = tv.tv_sec + ( tv.tv_usec / 1000000.0 );
   printf( "time: %f\n", time );
   return 0;
} 
```

反复运行此代码生成的二进制文件，我倾向于得到相同的时间值：

```
$ ./a.out
time: 1348059520.000000
$ ./a.out
time: 1348059520.000000
$ ./a.out
time: 1348059520.000000 
```

这种情况一直发生到几秒钟后，我得到一个更新的时间值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:04:50.257

似乎`float`太小而无法包含 的结果`tv.tv_sec + ( tv.tv_usec / 1000000.0 )`。改用`double`：

```
#include <stdio.h>
#include <sys/time.h>

int main()
{
   double time;
   struct timeval tv;
   gettimeofday( &tv, NULL );
   time = tv.tv_sec + ( tv.tv_usec / 1000000.0 );
   printf( "time: %f\n", time );
   return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T15:00:34.127

为什么要使用浮点数？

```
#include <stdio.h>
#include <sys/time.h>

int main (void)
{
   struct timeval tv;
   gettimeofday (&tv, NULL);
   printf ("time: %d.%06d\n", (int)tv.tv_sec, (int)tv.tv_usec);
   return 0;
}

./a.out
time: 1348067289.069908 
```

它*看起来很*飘，但它是*inty* :-) 因为微秒值在 0..999999 范围内，所以您需要做的就是将其零填充到 6 位。不需要 FP 算术。

# android-viewpager - 2.x 设备的 ViewPager 和 setClipChildren(false) 解决方法

> ID：12495344
> 
> 赞同：2
> 
> 时间：2012-09-19T13:05:23.183
> 
> 标签：android-viewpager, android-view

我正在使用 Dave Smith 的[解决方案](https://gist.github.com/8cbe094bb7a783e37ad1)使 ViewPager 表现得像一个图片库。我的问题是 setClipChildren(false) 在 2.x 的设备上不起作用（在 HTC Desire S 和三星 Galaxy S 上都试过，都是 2.3.5）。仅显示一张图像，并且滚动仅在 viewpager 区域内。

搜索，我找到了两种解决方案：

```
setClipChildren(false);
setLayerType(View.LAYER_TYPE_SOFTWARE, null); 
```

设置为 ViewPager 的容器和寻呼机，但 setLayerType 仅适用于 API 11 及更高版本。和：

```
android:hardwareAccelerated="false" 
```

我已经在清单中设置了这个，首先是我的活动，然后是整个应用程序。

这两种解决方案都不适合我。我知道这是一个已知的 Android 错误：[info here](http://code.google.com/p/android/issues/detail?id=36788)。您碰巧知道解决方法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:49:46.440

您应该尝试调用 < setLayerType(View.LAYER_TYPE_SOFTWARE, null); > 在持有视图寻呼机的容器上。来源：[https ://groups.google.com/forum/#!topic/android-developers/RIERxUcGpQg](https://groups.google.com/forum/#!topic/android-developers/RIERxUcGpQg)

# r - 查找重复行的索引

> ID：12495345
> 
> 赞同：78
> 
> 时间：2012-09-19T13:05:34.563
> 
> 标签：r, duplicates, dataframe

R 中重复的函数执行重复行搜索。如果我们想删除重复项，我们只需要写入`df[!duplicated(df),]`，重复项将从数据框中删除。

但是如何找到重复数据的索引呢？如果`duplicated`在某行上返回 TRUE，则表示这是该行在数据框中的第二次出现，并且可以轻松获得其索引。如何获取该行第一次出现的索引？或者，换句话说，一个与重复行相同的索引？

我可以在 data.frame 上做一个循环，但我认为这个问题有一个更优雅的答案。

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-09-19T13:13:23.797

这是一个例子：

```
df <- data.frame(a = c(1,2,3,4,1,5,6,4,2,1))

duplicated(df) | duplicated(df, fromLast = TRUE)
#[1]  TRUE  TRUE FALSE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE 
```

## 这个怎么运作？

该函数`duplicated(df)`确定原始数据中的重复元素。表示“`fromLast = TRUE`应从反面考虑重复”。`|`由于`TRUE`其中至少一个中的 a 表示重复值，因此使用组合两个结果逻辑向量。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-24T00:20:22.343

如果您使用的是*带键*的data.table，那么您可以使用以下优雅的语法

```
library(data.table)
DT <- data.table(A = rep(1:3, each=4), 
                 B = rep(1:4, each=3), 
                 C = rep(1:2, 6), key = "A,B,C")

DT[unique(DT[duplicated(DT)]),which=T] 
```

打开包装

*   `DT[duplicated(DT)]`子集那些重复的行。

*   `unique(...)`仅返回重复行的唯一组合。这处理超过 1 个重复的任何情况（重复重复，例如三次重复等）

*   `DT[..., which = T]` 将重复的行与原始行合并，并`which=T`返回行号（没有`which = T`它只会返回数据）。

你也可以使用

```
 DT[,count := .N,by = list(A,B,C)][count>1, which=T] 
```

# asp.net - ASP.NET 4.5 MVC 4 在 Windows Server 2008 IIS 7 上不起作用

> ID：12495346
> 
> 赞同：54
> 
> 时间：2012-09-19T13:05:34.803
> 
> 标签：asp.net, asp.net-mvc, iis, windows-server-2008

显然我遗漏了一些东西，我无法在 IIS 7 上的 Windows Small Business Server 2008 上部署简单的 ASP.NET MVC 4、.NET 4.5 应用程序。

.NET 框架 4.5 已安装。

我应该在应用程序的应用程序池基本设置中看到该版本（4.5）吗？这个时候，我只有2.0和4.0，因为4.5就像3.5一样，只是在4.0框架之上添加的，我想这是正常的。

当我浏览主页时，出现以下错误：

403 - 禁止：访问被拒绝。您无权使用您提供的凭据查看此目录或页面。

当我请求唯一一个名为 Page /page/index 的控制器时，我得到了 404 not found 页面。就像 ASP.NET 进程永远不会得到 http 请求。

我可以请求一个简单的 HTML 页面。

应用程序池设置为 .NET 4.0 并集成为托管管道模式。

NETWORK SERVICE 对目录具有读/写权限。

当然，该应用程序从 VS2012 完美运行。

我对这里不正确的地方一无所知，搜索引擎查询也没有多大帮助。

有没有人有提示，那将非常感激。谢谢

**编辑**

dll 已经在 bin 文件夹中，例如 System.Web.Mvc、System.Web.Razor 等。

我创建了一个空的 test.aspx 页面，以确保 asp.net 工作进程正在获取请求，是的，页面正常。因此，尽管我的 ASP.NET MVC 3 Web 应用程序在该服务器上运行良好，但 MVC 路由似乎无法正常工作。

.NET 4.5 安装后，我做了一个 aspnet_regiis -iru 以防万一，在应用程序上添加了一个 aspnet_client 文件夹，但这仍然不能解决问题。

匿名身份验证在 IIS 身份验证部分启用，并且授权显示允许所有用户。

ASP.NET MVC 4 已安装，我刚刚进行了修复以确保。

即使安装了 ASP.NET MVC 4，标准 IIS 会返回来自请求 /page/index 操作的 404 错误，而不是标准的 aspnet 错误。所以确实看起来MVC 4框架没有正确安装，我只是仔细检查并进行修复。我在哪里可以继续调查？

@Mystere Man，我已将匿名身份验证更改为使用应用程序池身份，停止，启动应用程序，但仍然出现相同的错误。看起来，如果 ASP.NET MVC 4 没有接受请求。

这是 web.config 的一部分：

```
 <system.webServer>
    <validation validateIntegratedModeConfiguration="false" />
    <handlers>
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" />
      <remove name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" />
      <remove name="ExtensionlessUrlHandler-Integrated-4.0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_32bit" path="*." verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness32" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-ISAPI-4.0_64bit" path="*." verb="*" modules="IsapiModule" scriptProcessor="%windir%\Microsoft.NET\Framework64\v4.0.30319\aspnet_isapi.dll" preCondition="classicMode,runtimeVersionv4.0,bitness64" responseBufferLimit="0" />
      <add name="ExtensionlessUrlHandler-Integrated-4.0" path="*." verb="*" type="System.Web.Handlers.TransferRequestHandler" preCondition="integratedMode,runtimeVersionv4.0" />
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
  </entityFramework> 
```

编辑 2012/09/27

我重新配对了 Microsoft Framework .NET 4.5 并修复了 ASP.NET MVC 4，重新部署了简单的 ASP.NET MVC 4 应用程序，我仍然得到相同的行为。我不确定下一步该怎么做，所以我开始了赏金，希望有人可以帮助我找到问题。

**编辑 2014/01/31**

当我问这个问题时，我将 runAllManagedModulesForAllRequests 标记为已接受的答案，因为它确实解决了问题。但我肯定不会在生产中使用它。我问为什么我必须这样做，但没有任何答案。

比[Martin Hollingsworth](https://stackoverflow.com/a/16577694/316855)的答案确实是我想要的，这是解决此问题的好方法，而不会出现与 runAllManagedModulesForAllRequests 相关的所有性能问题。

我们几乎放弃并购买了新的 Windows 2012 服务器（ASP.NET MVC 应用程序在该服务器上按原样工作）。在尝试了 Martin 的解决方案后，Windows 2008 服务器工作了。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-29T13:54:06.943

尝试使用这个：

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
    ...
</system.webServer> 
```

编辑：

上面的解决方案适用于 .NET 3.5 或更低版本。如果您使用的是 .NET 4.0 或更高版本，您可能需要尝试[安装 IIS7 QFE](http://support.microsoft.com/kb/980368)

此外，[这篇文章](http://blogs.msdn.com/b/tmarq/archive/2010/04/01/asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx)值得一读，以了解这两者之间的区别。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-05-16T01:38:51.870

如果您*无法*[从 kb 980368](http://support.microsoft.com/kb/980368)应用QFE，而不是按照接受的[答案](https://stackoverflow.com/a/12653278/29491)中的建议使用*runAllManagedModulesForAllRequests解决方案，您应该使用下面显示的带有**preCondition=""*的模块配置，以避免对静态内容产生负面影响，如中所述博客文章[asp.NET MVC 路由的工作原理及其对静态请求性能的影响](http://blogs.msdn.com/b/tmarq/archive/2010/04/01/asp-net-4-0-enables-routing-of-extensionless-urls-without-impacting-static-requests.aspx)以及[在使 MVC 路由正常工作时不要使用 runAllManagedModulesForAllRequests="true"](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)以及对答案的一些评论。

 *[Scott Hanselman 关于 runAllManagedModulesForAllRequests 的博客文章](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx)应该为这个论点增加一些分量。[Rick Strahl 的](http://www.west-wind.com/weblog/)帖子[警告与 IIS 7/8](http://www.west-wind.com/weblog/posts/2012/Oct/25/Caveats-with-the-runAllManagedModulesForAllRequests-in-IIS-78)中的 runAllManagedModulesForAllRequests 是我发现的设置之间交互的最佳解释。[关于模块 preCondition 属性](http://www.iis.net/learn/get-started/introduction-to-iis/iis-modules-overview#Precondition)的 IIS 文档也值得一读。

请记住，如果您已应用 QFE，则无需更改此配置，因为此行为已成为默认行为。

```
<system.webServer>
  <modules>
    <remove name="UrlRoutingModule-4.0" />
    <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
  </modules>
</system.webServer> 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-05-02T18:02:44.963

我有一个类似的问题。我尝试了此处描述的许多解决方案（Web.Config system.webServer 配置条目等），但均无济于事。最后，我发现了我的特定安装的问题所在。我将我的网站发布到本地文件系统，然后将这些文件复制到服务器上。事实证明，文件 Global.asax 不是已发布文件的一部分。一旦我复制了该文件，错误就消失了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-01T01:51:07.370

根据[https://stackoverflow.com/a/12521807/695829](https://stackoverflow.com/a/12521807/695829)

我有同样的问题，这个修补程序修复了它：：http: [//support.microsoft.com/kb/980368](http://support.microsoft.com/kb/980368)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-23T18:13:28.507

如 SonicTheLichen 所述，如果您从 Visual Studio 发布，则默认情况下不会复制 gloabal.asax 文件。通过将 global.asax 复制到您的网络服务器应该可以解决问题。感谢 SonicTheLichen 提供解决方案。

问候， 索拉布

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T13:41:00.540

我不知道这是否会解决您的问题，但它解决了我已将 MVC 应用程序部署到 IIS 的问题。

我必须为应用程序的主/虚拟目录添加一个通配符应用程序映射到 aspnet_isapi.dll。您可以通过右键单击网站/虚拟目录并选择主目录/虚拟目录选项卡，单击配置按钮，然后单击通配符应用程序映射部分下的插入按钮来执行此操作。

C:\WINDOWS\microsoft.net\Framework64\v4.0.30319\aspnet_isapi.dll

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-31T05:44:56.347

我有一个类似的问题。我不得不将 .net MVC 站点部署到安装了 Windows 2008 和 IIS 7.5 的新服务器上。当我检查程序和功能时，我看到只安装了 .Net Framework 4.5.1。我手动启用了 .Net 3.5.1 Windows 功能。安装 MVC 4.0 后，路由不起作用。

我的解决方案：
1）卸载 .Net 4.5.1 框架和 MVC 4.0
2）安装 .Net Framework 4.0
3）安装 .Net 框架 4.5.1
4）安装 MVC 4.0

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-02T20:57:06.507

我知道这已经过时了，但是 Windows 更新刚刚浪费了我几个小时：

如果您在 Global.asax 中处理您的异常，这也可以很简单，因为保持 Windows 更新与您的开发环境相同......对我来说，我显然没有这样做，这导致“无法加载......”异常，我的 global.asax 试图处理它，然后又遇到了同样的问题，但隐藏了潜在的问题.....

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-12-01T21:06:47.870

我必须在 IIS 网站属性的处理程序映射部分启用脚本。

[![处理程序映射](../Images/702ab6a474a12d7c851d3d82c79088f1.png)](https://i.stack.imgur.com/zNkfJ.png)

打开 IIS，单击有问题的网站。打开处理程序映射并单击“编辑功能权限”。选中脚本和执行框，然后单击确定。好走！*

# asp.net - 如何创建类别和子类别的“eBay 风格”层次结构？

> ID：12495351
> 
> 赞同：2
> 
> 时间：2012-09-19T13:05:48.930
> 
> 标签：asp.net, sql-server, linq-to-sql, many-to-many, hierarchy

我正在使用 asp.net 网络表单和 linq-to-sql 构建一个分类广告网站。

待售物品需要以分层方式进行分类，但是，单个物品可能在多个子类别中。

例如，看看eBay 上的[这款电池](http://www.ebay.co.uk/itm/170910641593)。注意有两个面包屑：

声音与视觉 > 多用途电池和电源 > 可充电电池
以及：
计算机/平板电脑和网络 > 笔记本电脑和台式机配件 > 笔记本电脑电池

除了属于多个类别的*项目之外，一个**类别*也可能有多个父类别，例如，在浏览类别“声音和视觉 > 电池”或“电子 > 电池”时，应该会看到完全相同的子类别两种情况下的电池（例如可充电或不可充电等）。

我不确定如何开始构建数据库表，更不用说从网站查询它们了，所以任何帮助或指导都会非常有用。

我看过诸如[Storing Hierarchical Data in a Database](http://www.sitepoint.com/hierarchical-data-database-2/)之类的文章，但由于项目和类别的多对多性质，我认为它不适用于我的情况。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:15:47.377

最近我遇到了同样的问题，并将类别存储在这样的高桌子中

```
CATEGORIES
------------------
Id
Text
ParentId 
```

到目前为止它对我有用，但如果有更好的答案，我会很好奇

对于您的示例，您可能希望将父母拆分为单独的表，因为您希望能够建立多对多关系

你可以这样做

```
CATEGORIES
----------------
Id
Text

CATEGORY_PARENTS
----------------
ID
ParentId 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:12:48.230

通常最有效的方法是尽可能将数据分解到最低级别并尽可能避免数据冗余。简而言之，尽可能多地拆分表，同时将相关数据保存在一个组（或此处的表）中，并确保您不会在表中重复任何真实数据（通过在 ID 上创建连接表）。

我不确定您愿意更改数据库架构或当前架构的构建方式，但一种解决方案是您创建一个用于存储所有主要类别的表（我们称之为表 A），另一个表用于第二级类别（表 B）和一个用于最低级别的类别（表 C）。

然后您可以创建一个新表（表 D）来附加表 A 和表 B。所以现在您的主要类别和子类别已连接。

现在为子类别创建子类别有点挑战。您可以通过在表 D 中再添加一个字段来解决此问题，以指示当前项目是否为“子子项目”（我知道，我的命名感觉很糟糕：P）。即如果指标字段为0，则为子目录，否则指标字段值为父子项的id。那是一种自我加入。

对于属于多个类别的项目，再创建一个连接项目表和表 D 的表（表 E）。这里将“itemID”与“subcatID”连接起来。即如果电池 itemID 为 10，可充电电池的 subcatID 为 5，笔记本电池的 subcatID 为 7，那么您在表 E 中制作两行

```
itemID        subcatID
  10             5
  10             7 
```

搜索时，搜索所有 10 个类别，您将拥有所有类别。

同样，这是一种可能的解决方案。您也可以使用星型模式，但它对数据仓库特别有效。如果您的类别级别编号是固定的（即您将只有 3 个级别类别等），那么您可以使用级联样式表（即表 A 是主目录，表 B 是子目录，表 C 是最后一个子目录.)。这将使您的查询有点长，但仍然很简单。我只是从数据库领域开始，所以用数据库标签移动/标记这个问题可能会给你一个更好的答案。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T19:03:26.253

感谢@bhrugesh-patel 和@andrew-walters 尝试回答我的问题。然而，在进一步的研究中，上述层次结构似乎被称为有向无环图（DAG），即几乎是一棵树，但有一个主要区别：您可以通过不同的路径到达同一个节点。

Neo4j 等图形数据库是为存储 DAG 等结构而设计的，但由于我坚持使用关系数据库 (SQL Server)，我将尝试实现本文中提到的解决方案：[表示有向无环图的模型 ( DAG) 在 SQL 数据库上](http://www.codeproject.com/Articles/22824/A-Model-to-Represent-Directed-Acyclic-Graphs-DAG-o)。

[仅供参考：关于 SO](https://stackoverflow.com/questions/765854/have-you-extended-nested-sets-for-hierarchical-data-modeling-involving-multiple)的另一个问题也更详细地讨论了这个话题。

# java - JOptionPane 到 JCombobox 或如果可能的话将它们组合起来。？

> ID：12495354
> 
> 赞同：0
> 
> 时间：2012-09-19T13:05:54.387
> 
> 标签：java, swing, oop, jcombobox, joptionpane

我的朋友创建了一个银行/ATM 交易程序。它允许用户存款、取款和查看余额。但问题是，它不允许用户选择他/她想要进行的交易，它总是要求用户先存款，然后才能提款或再次检查余额。所以我有了一个提供组合框的想法，但我的另一个问题是我不知道该怎么做，因为我只是 Java 编程的初学者。

```
import javax.swing.JOptionPane;

public class atm {
    public static void main (String[] args){
        while(true){
        String intro = "Welcome to ATM Transactions";
        JOptionPane.showMessageDialog(null,intro);
        String number1 = JOptionPane.showInputDialog("Please enter the amount to deposit:");
        String number2 = "The amount deposited is:" + number1;
        JOptionPane.showMessageDialog(null,number2);
        String number3 = JOptionPane.showInputDialog("Please enter the amount to withdraw:");
        int number4 = (Integer.parseInt(number1)) - (Integer.parseInt(number3));
        String answer = "The remaining balance is:" +number4;
        JOptionPane.showMessageDialog(null,answer);
        String[] choices = {"Yes", "No"};
        int response = JOptionPane.showOptionDialog(null,"Do you want another 
transactions?","Question",
        JOptionPane.YES_NO_OPTION,JOptionPane.PLAIN_MESSAGE,null,choices,"No");
        if (response==1)
            System.exit(0);
    }
}
} 
```

所以我的问题是，如何将它变成一个组合框，以便用户可以选择他/她想要执行的交易，并且用户可以在不经过第一步的情况下进行多次存款或取款？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:38:52.577

要`JComboBox`在`JOptionPane`对话框中包含 a，您必须将其视为`message`对话框的属性。根据[文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)，`message`除其他外，可能是 a `Component`，然后显示在对话框中。确认对话框并控制返回到您的代码后，您可以查询下拉列表的选定值。

# erlang - Erlang: ibrowse - 获取重定向的 URL

> ID：12495355
> 
> 赞同：0
> 
> 时间：2012-09-19T13:05:55.543
> 
> 标签：erlang

我正在为 Erlang 使用 ibrowse API。问题是，当我尝试阅读重定向到另一个网页的网页时，它会变成空白。关于如何跟踪到最后一页的任何想法？

这是我目前所拥有的：

```
get_web(Src) ->
    ibrowse:start(),
    {_,_,_,Body} = ibrowse:send_req(Src, [], get),
    Body. 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:45:48.057

`Location`如果响应中的标头具有 301 或 302 状态代码，则应遵循该标头。

```
get_web({url,Src}) ->
  ibrowse:start(),
  {ok, Status, Head, Body} = ibrowse:send_req(Src, [], get),
  if
    Status =:= 200 ->
      Body;
    Status =:= 301 orelse Status =:= 302 ->
      get_web(get_location(Head))
  end.

get_location(Head) ->
  case lists:keyfind("Location", 1, Head) of
    false -> {url, error};
    URL -> {url, URL}
  end. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:11:14.177

如果有人偶然发现这一点，这就是我所做的：

```
get_web({_,error}) ->
    error;

get_web({url,Src}) ->
    ibrowse:start(),
    {_,_,Head,Body} = ibrowse:send_req(Src, [], get),
    if
        length(Body) == 0 ->
            get_web(get_location(Head));
        true ->
            Body
    end.

get_location([]) ->
    {url,error};
get_location([{"Location",URL}|_]) ->
    {url,URL};
get_location([_|T]) ->
    get_location(T). 
```

# c# - Click() 将鼠标位置停留在元素的中间

> ID：12495365
> 
> 赞同：2
> 
> 时间：2012-09-19T13:06:36.163
> 
> 标签：c#, webdriver

因此，我的网页上有一个 bing 地图，用户可以通过单击点并关闭形状来绘制他们想要搜索的区域。

我正在尝试使用 webdriver 自动执行此操作，但是当我调用 click 时，它会在地图中间点击。

[它与这个问题](https://stackoverflow.com/questions/10994285/how-to-click-in-a-specific-part-of-a-button-using-selenium-for-the-list-of-opti)基本相同，但问题在于 c# 驱动程序而不是 java.util.

这是我的代码：

```
RemoteWebDriver driver = ScenarioContext.Current.Get<RemoteWebDriver>();

driver.FindElementById("location").SendKeys("London");
driver.FindElementById("find").Click();
driver.FindElementById("boundry").Click();

IWebElement map = driver.FindElementById("Map");

Actions actions = new Actions(driver);

actions
  .MoveToElement(map, -100, -100)
  .Click()
  .Build()
  .Perform();

actions
  .MoveToElement(map, -100, 100)
  .Click()
  .Build()
  .Perform();

actions
  .MoveToElement(map, 100, -100)
  .Click()
  .Build()
  .Perform();

actions
  .MoveToElement(map, 100, 100)
  .Click()
  .Build()
  .Perform();

actions
  .MoveToElement(map, -100, -100)
  .Click()
  .Build()
  .Perform(); 
```

发生的情况是鼠标移动到正确的位置，然后单击事件将鼠标指针重置到元素的中间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T08:44:49.537

尝试仔细查看**Click**方法。如果它没有帮助 - 请参阅**MouseDown**方法。您可以在此处找到方法说明[http://selenium.googlecode.com/svn/trunk/docs/api/dotnet/index.html](http://selenium.googlecode.com/svn/trunk/docs/api/dotnet/index.html) 您需要*OpenQA.Selenium 命名空间->IMouse 接口->IMouse 方法* 希望对您有所帮助！

# html - 覆盖 IE=EmulateIE7

> ID：12495376
> 
> 赞同：1
> 
> 时间：2012-09-19T13:07:14.847
> 
> 标签：html, internet-explorer, compatibility, meta-tags

我有一个为 Wordpress 购买的主题，它自动将 X-UA-Compatible 设置为 IE=EmulateIE7。这不允许一些更复杂的自定义脚本正常运行。

由于这个购买的主题将在我的公司中使用，我们不想修改任何核心脚本，所以当我们进行更新时，什么都不会恢复。

我可以简单地将 X-UA Compatible 添加到 IE=edge 以覆盖 IE7 仿真，还是这只是一厢情愿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:16:16.183

哈......只需编写第二个元 X-UA 标记并将其设置为 IE-edge 会覆盖任何以前的元标记。

这是一个奇迹！

# ruby-on-rails - 生产模式下的邪恶 PDF 生成错误

> ID：12495378
> 
> 赞同：1
> 
> 时间：2012-09-19T13:07:24.283
> 
> 标签：ruby-on-rails, ruby, pdf-generation, wicked-pdf

我在我的 Rails 应用程序中使用 WickedPDF 来生成 PDF 文件。它在我的本地机器上运行良好。在生产中，我在日志中看到以下错误：

```
Started GET "/financieel/facturen/2.pdf" for 81.205.74.167 at 2012-09-19 14:58:37 +0200
  Processing by InvoicesController#show as PDF
  Parameters: {"id"=>"2"}
***************WICKED***************
Rendered invoices/show.pdf.haml (6.9ms)
Completed 500 Internal Server Error in 38ms

NoMethodError (undefined method `chomp' for nil:NilClass):
  app/controllers/invoices_controller.rb:22:in `block (2 levels) in show'
  app/controllers/invoices_controller.rb:17:in `show' 
```

在 invoices_controller.rb 中没有什么异常：

```
format.pdf do
  render pdf: 'factuur'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:58:31.970

wicked_pdf 试图猜测您的 wkhtmltopdf 二进制文件在哪里的这条线可能会导致您的麻烦：[https ://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf.rb#L207](https://github.com/mileszs/wicked_pdf/blob/master/lib/wicked_pdf.rb#L207)

如果 wkhtmltopdf 实际安装在服务器上，最好的办法可能是在初始化程序中专门设置 wkhtmltopdf 的路径，如下所示：

```
# config/initializers/wicked_pdf.rb
WickedPdf.config = { :exe_path => '/opt/bin/wkthmltopdf' } # or wherever it actually is 
```

# php - 从 Google 云存储获取 JSON 响应而不是 XML

> ID：12495380
> 
> 赞同：1
> 
> 时间：2012-09-19T13:07:32.000
> 
> 标签：php, google-cloud-storage

我正在使用下面给出的代码从谷歌云存储服务获得响应：

[PHP 谷歌云存储](http://code.google.com/p/google-storage-php/source/browse/trunk/GoogleStorage.class.php)

通过使用上面的代码，我得到了一个 XML 响应，但是，我想要一个 JSON 响应。请告诉我该怎么做？

我需要设置任何标题吗？

还是某些参数？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T20:32:55.690

如果您想使用 JSON API，您需要通过 Google 开发者控制台请求访问。目前 JSON API 处于有限的预览版本中。

# c++ - 如何遍历向量并知道元素的索引？

> ID：12495382
> 
> 赞同：39
> 
> 时间：2012-09-19T13:07:43.783
> 
> 标签：c++, algorithm, vector, stl, iteration

我需要访问向量中的每个元素，并且还需要知道该元素所在的索引。

到目前为止，我可以想出两种方法

```
 for (iterator it= aVector.begin(), int index= 0; it!= aVector.end(); ++it, ++index) 
```

留下类型签名。看起来我不能使用自动

```
 for (int index = 0; index < aVector.size(); ++index)
{
    // access using []
} 
```

哪个更有效或有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-19T13:14:23.567

对于向量或其他随机访问容器，它几乎没有什么区别。我可能会选择第二个，因为它更容易阅读，并且可能稍微快一些，因为只有一个循环变量需要更新。另一种选择是：

```
for (auto it = aVector.begin(); it != aVector.end(); ++it) {
    int index = std::distance(aVector.begin(), it);
} 
```

对于非随机访问容器，`[]`不可用，`std::distance`效率低；在这种情况下，如果您需要索引，第一种方法会更好（尽管您需要修复它，因此它不会尝试在 for-initialiser 中声明两个不同类型的变量）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-19T13:10:26.903

答案就在问题中—— *“知道元素所在的索引”。*.

所以 -

```
for (int index = 0; index < aVector.size(); ++index)
{
    // access using []
} 
```

在性能方面它们是相同的（但您始终可以对自己进行描述）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-03-15T11:30:32.230

另一种方式。

```
int count = 0;
for (auto& it : aVector) {
   count++;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T13:35:48.453

这是一个使用`zip_iterator`和`counting_iterator`来自[Boost.Iterator library](http://www.boost.org/doc/libs/release/libs/iterator/doc/)的解决方案。*对于您的用例来说*，这可能有点矫枉过正，但它具有使用任何范围（不仅是向量）的优点，并且可以很好地适应标准算法的基于迭代器的设计，因此我将其发布在这里：

```
#include <boost/iterator/counting_iterator.hpp>
#include <boost/iterator/zip_iterator.hpp>

#include <algorithm>
#include <iostream>
#include <list>

int main()
{
    typedef std::list<int> container;

    typedef boost::tuple<
        container::iterator,
        boost::counting_iterator<container::size_type>
    > tuple_type;

    typedef boost::zip_iterator<tuple_type> it_type;

    container l{1, 2, 3, 4};

    it_type begin(tuple_type(l.begin(), 0));
    it_type const end(tuple_type(l.end(), l.size()));

    // sample use with for loop
    for (it_type it = begin; it != end ; ++it)
    {
        int value = it->get<0>();
        int index = it->get<1>();
        // do whatever you want with value and index
    }

    // sample use with standard algorithm
    auto res = std::find_if(begin, end,
        [](boost::tuple<int, int> const & t)
        { return t.get<0>() > 2; }); // find first element greater than 2

    std::cout << "Value: " << res->get<0>() << '\n' <<
                 "Index: " << res->get<1>() << '\n';
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-19T14:05:55.460

您可以使用 Boost.Range 的适配器，它使用返回当前索引 (duh)`indexed`的方法扩展范围的迭代器。`index`

```
#include <boost/range/adaptor/indexed.hpp>

// ...
auto&& r = vec | boost::adaptors::indexed(0);
for(auto it(begin(r)), ite(end(r)); it != ite; ++it)
  std::cout << it.index() << ": " << *it << "\n"; 
```

可悲的是，由于`index`是迭代器上的方法的一部分，这意味着您不能使用新的基于范围的 for 循环或 even `BOOST_FOREACH`，它只提供元素访问。这是一个具有可疑价值的相当样板式的解决方法：

```
// note: likely contains typos or bugs
#include <boost/range/adaptors.hpp>

template<class IndexIt>
auto pair_index_value(IndexIt it)
    -> std::pair<std::size_t, decltype(*it)>
{
  return std::pair<std::size_t, decltype(*it)>(it.index(), *it);
}

// ...
using namespace boost::adaptors;

auto&& ir = vec | indexed; // because screw you Boost.Range
for(auto&& elem : boost::counting_range(ir.begin(), ir.end()) | transformed(pair_index_value))
  std::cout << elem.first << ": " << elem.second << "\n"; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-19T13:17:30.183

c++11：

```
for (auto i=aVector.begin(); i!=aVector.end(); ++i) {
    cout << "I am at position: " << i-aVector.begin() << endl;
    cout << "contents here is: " << *i << endl;
} 
```

c++老派：

```
for (vector<int>::const_iterator i=aVector.begin(); i!=aVector.end(); ++i) {
    cout << "I am at position: " << i-aVector.begin() << endl;
    cout << "contents here is: " << *i << endl;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-19T13:13:35.693

```
for (iterator it = aVector.begin(), int index= 0; it!= aVector.end(); ++it, ++index) 
```

这不会编译。但这并不重要，因为只要我们在谈论，`std::vector`那么通过索引访问就是一个简单的指针算术和取消引用 - 所以实际上与迭代器一样快。所以你的第2版没问题。

但是，我会进一步优化（如果您真的关心速度）：

```
for (int index = 0, size = aVector.size(); index < size; ++index)
{
    // access using []
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-17T22:36:39.490

有点悬疑，由于逗号运算符的工作方式，OP 的第一条语句无法编译。我确定 OP 只是使用简写`iterator`而不是完整的类型名，但这不是问题：

```
for (iterator it= aVector.begin(), int index= 0; it!= aVector.end(); ++it, ++index) 
```

逗号运算符要么分隔两个表达式（并返回第二个表达式的结果），要么用于分隔声明中的变量。for 参数的第一个参数将采用任何一种形式，因此混淆了它们是不同语法的事实。

```
#include <vector>
#include <iostream>

int main()
{
    std::vector<int> aVector = {1,1,2,3,5,8,13};

    // option 1\. Both loop variables declared outside the for statement, initialized inside the for statement
    int index1 = 0;
    decltype(aVector.begin()) it1;
    for (it1 = aVector.begin(), index1=0; it1!= aVector.end(); ++it1, ++index1)
    {
        std::cout << "[" << index1 << "]=" << *it1 << std::endl;
    }

    // option 2\. The index variable declared and initialized outside, the iterator declared and initialized inside
    int index2=0;
    for (auto it2 = aVector.begin(); it2!= aVector.end(); ++it2, ++index2)
    {
        std::cout << "[" << index2 << "]=" << *it2 << std::endl;
    }

#if 0
    // option3 (the OP's version) won't compile. The comma operator doesn't allow two declarations.
    for (auto it3 = aVector.begin(), int index3=0 ; it3!= aVector.end(); ++it3, ++index3)
    {
        std::cout << "[" << index3 << "]=" << *it3 << std::endl;
    }
#endif
} 
```

# php - 需要 MultiArray 取消设置值帮助

> ID：12495384
> 
> 赞同：1
> 
> 时间：2012-09-19T13:07:52.253
> 
> 标签：php, arrays

我有一个名为的数组`$mark_ary`，其中包含：

```
Array
(
    [0] => 61
    [1] => 62
    [2] => 63
    [3] => 64
    [4] => 65
    [5] => 66
    [6] => 67
    [7] => 68
) 
```

另一个名为`$special_donors_array`的变量包含以下内容：

```
Array
(
    [0] => Array
        (
            [group_id] => 4
            [user_id] => 61
            [group_leader] => 0
            [user_pending] => 0
            [username] => tester_8
            [username_clean] => tester_8
            [user_email] => tester_8@live.com
        )

    [1] => Array
        (
            [group_id] => 5
            [user_id] => 62
            [group_leader] => 0
            [user_pending] => 0
            [username] => tester_9
            [username_clean] => tester_9
            [user_email] => tester_9@live.com
        )

) 
```

我需要`[user_id]`从变量的每个父键（在本例中为 [0] 和 [1]）中获取每个值`$special_donors_array`，并使用这些数字从数组变量中**取消设置它们。**`$mark_ary`

在实现我想要的之后，`$mark_ary`变量将如下所示：

```
Array
(
    [2] => 63
    [3] => 64
    [4] => 65
    [5] => 66
    [6] => 67
    [7] => 68
) 
```

不幸的是，我什至想不出解决方案，我什至无法尝试，因为我不知道如何开始。我仍然需要获得更多与数组相关的知识。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:13:04.433

```
foreach($special_donors_array as $special_donor){
                foreach($mark_ary as $k => $mark){
                    if($mark == $special_donor['user_id']){
                        unset($mark_ary[$k]);
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:11:08.587

```
foreach( $special_donors_array as $k => $v ) {
 if( isset($mark_ary[$k]) && $v['user_id'] === $mark_ary[$k] )
  unset($mark_ary[$k]);
} 
```

# java - 如何在 Eclipse 中从 https 地址的 wsdl 生成 Web 服务客户端？

> ID：12495389
> 
> 赞同：4
> 
> 时间：2012-09-19T13:08:05.187
> 
> 标签：java, eclipse, ssl, keystore

我可以从

```
http://localhost:8080/service?wsdl 
```

很好，但现在我想从

```
https://localhost:8081/service?wsdl 
```

并且 Eclipse 说该位置无效，当 Eclipse 进行尝试时，我的 Jetty 服务器说

javax.net.ssl.SSLException：收到致命警报：certificate_unknown

确认安全异常后，我可以在浏览器中轻松导航到 wsdl，因此它肯定存在。

我已经尝试将 wsdl 下载到我的本地文件系统，但我仍然无法从那里生成它，因为 wsdl 包含对其他 https 位置的引用，例如。

```
<xsd:import namespace="http://my.service.namespace/" schemaLocation="https://localhost:8081/serviceSchema?xsd=1"/> 
```

我已修改 eclipse.ini 以包含以下行：

```
-Djavax.net.ssl.trustStore="/path/to/my/truststore/.keystore"
-Djavax.net.ssl.trustStorePassword="mytruststorepassword"
-Djavax.net.ssl.keyStore="/path/to/my/keystore/.keystore"
-Djavax.net.ssl.keyStorePassword="mykeystorepassword" 
```

无济于事。Eclipse 似乎也没有与此相关的任何首选项设置。有什么方法可以通过 eclipse 做到这一点，还是我必须使用一些外部工具？

编辑：对于其他有同样问题的人，这就是我解决它的方法。

1.  在浏览器中导航到 wsdl，然后将其下载到您的文件系统。
2.  导航到它所依赖的任何东西，并下载它。
3.  使用浏览器打开您刚刚下载的依赖项并复制其新位置，例如。

    file:///path/to/my/schema/service.xsd

4.  将此粘贴到您下载的 wsdl 文件中，其 https 地址所在的位置，对任何其他模式重复，然后保存。
5.  复制您的 wsdl 文件的文件位置，如上
6.  在 Eclipse 中，生成一个 New->Other...->Web Service Client 并将文件位置粘贴到服务定义中，它应该可以工作。感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:13:30.533

将 wsdl 保存到本地文件系统并从那里生成，这似乎是 Eclipse 的一个错误，请检查[此](https://stackoverflow.com/questions/8655329/java-web-service-client-from-https-url)链接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-26T16:51:59.617

我遇到了同样的问题，接受答案的链接对我不起作用，但我使用以下步骤生成了服务：

1.  将 wsdl 保存为本地文件。（如 myService.wsdl）
2.  将 wsdl 文件复制到项目中。
3.  右键单击 wsdl 文件 -> [Web 服务] -> [生成客户端]

# c# - 跨多个跟踪源共享配置

> ID：12495391
> 
> 赞同：2
> 
> 时间：2012-09-19T13:08:10.560
> 
> 标签：c#, debugging, app-config, tracesource

我坚持使用 TraceSource 配置。

我有很多遵循“每个类模式”的 TraceSource，现在我想在 app.config 中配置所有这些。

可能吗 ？

我补充说 TraceSource 在 .dll 中，我想使用 .exe app.config。

谢谢你的帮助。

文森特。

# algorithm - 将穿过原点 (0,0) 的线拟合到数据

> ID：12495396
> 
> 赞同：9
> 
> 时间：2012-09-19T13:08:30.790
> 
> 标签：algorithm, matlab, numerical, curve-fitting, least-squares

我有一组点`(x,y)`，我需要使用 MATLAB 找到穿过原点的最佳拟合线。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T13:17:42.710

**简而言之**：你的函数必须是 的形式`y=ax+0`，这使得`polyfit`无用。但是你可以使用最小二乘法：

```
 a = x(:)\y(:); 
```

* * *

解释：

您有`n`方程式和一个`a`需要找到的变量：

```
 a*x1 = y1;
 a*x2 = y2;
 ...
 a*xn = yn; 
```

运算符`\`找到最小二乘解。

或者，您可以手动找到解决方案：

```
 a = (x'*x) \ (x'*y); 
```

或在伪代码中：

```
 (x1*y1 + x2*y2  + ... xn*yn)
a =  ----------------------------
     (x1*x1 + x2*x2  + ... xn*xn) 
```

如果您不使用 Matlab - 例如在 C 代码中，这将非常有用。

* * *

示例和代码片段：

![在此处输入图像描述](../Images/e83f0ab34ce5deb4bf35cc48fe7cffa5.png)

```
function FindLSSolution()
    a = 2.5;
    x = rand(100,1)*10;
    y = a*x + randn(100,1);
    figure;scatter(x,y);

    A = x(:)\y(:);
    hold on;plot(x, A*x,'g');
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:27:16.583

如果你有“曲线拟合工具箱”，你可以使用

```
f = fit( x, y, 'a*x' ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-02-27T22:28:33.830

通常，最佳拟合线穿过数据的质心（平均 x 和平均 y）。所以找到质心并绘制从原点到质心的线。

# c# - dropDownBox 没有得到绑定的值

> ID：12495397
> 
> 赞同：0
> 
> 时间：2012-09-19T13:08:35.207
> 
> 标签：c#

我有这个代码：

```
<asp:DropDownList ID="Type" runat="server" Enabled="false"  DataValueField="TERMINAL_TYPE_NAME" DataTextField="TERMINAL_TYPE_NAME"></asp:DropDownList> 
```

TERMINAL_TYPE_NAME 是 dataTable 中的一列，它是从服务器端声明的，它只包含一个值我应该怎么做才能给 dropDownlist 从 dataTable 返回值，因为上面的代码在下拉列表中没有显示任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:10:18.813

你应该

1.  相应地设置[`DataSource`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.datasource%28v=vs.100%29.aspx)你的`DataTable`（！）
2.  设置[`DataTextField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datatextfield.aspx)（显示的内容）
3.  设置[`DataValueField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.datavaluefield.aspx)（什么是关键字段）
4.  [`DataBind`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.databind.aspx)（`DropDownList` ！）

例如，在`Page_Load`：

```
if(!IsPostBack) 
{
    DdlType.DataSource = getYourDataTable();
    DdlType.DataValueField = "TERMINAL_TYPE_NAME";
    DdlType.DataTextField  = "TERMINAL_TYPE_NAME";
    DdlType.DataBind();
} 
```

# java - 如何为非 ID 字段使用序列生成器？

> ID：12495399
> 
> 赞同：9
> 
> 时间：2012-09-19T13:08:46.917
> 
> 标签：java, hibernate

```
public class SequenceControlNumber extends SequenceGenerator {

    private static final Logger log =
        LoggerFactory.getLogger(SequenceGenerator.class);

    @Override
    public Serializable generate(SessionImplementor session, Object obj) {
        Connection connection = session.connection();
        try {
            PreparedStatement st = connection.prepareStatement
                   ("SELECT nextval ('sequencecontrolnumber') as nextval");
            try {
                ResultSet rs = st.executeQuery();
                try {
                    rs.next();
                    int currentVall = rs.getInt("sequencecontrolnumber");
                    int result = 0;
                    if(currentVall <255){
                        result = currentVall +1;
                    }
                    if ( log.isDebugEnabled() ) {
                        log.debug("Sequence identifier generated: " + result);
                    }
                    return result;
                }
                finally {
                    rs.close();
                }
            }
            finally {
                session.getBatcher().closeStatement(st);
            }
        }
        catch (SQLException sqle) {
            throw JDBCExceptionHelper.convert(
                    session.getFactory().getSQLExceptionConverter(),
                    sqle,"could not get next sequence value");
        }
    }

} 
```

在我的模型类中，这是我的注释：

```
@GenericGenerator(name="seq_id",
        strategy="br.com.otgmobile.service.dao.SequenceControlNumber")
@GeneratedValue(generator="seq_id")
@Column(name="sequencecontrolnumber",unique=false, nullable=false)
private Integer sequenceControlNumber; 
```

但我不断收到一个属性值异常。

```
javax.persistence.PersistenceException: org.hibernate.PropertyValueException: not-null property references a null or transient value: br.com.otgmobile.model.niagarahw06.ComandoNiagaraHw06.sequenceControlNumber
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1179)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1112)
at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1118)
at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:618)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240)
at $Proxy33.persist(Unknown Source)
at br.com.otgmobile.service.dao.ComandoNiagaraHw06DAO.add(ComandoNiagaraHw06DAO.java:57)
at br.com.otgmobile.service.dao.ComandoNiagaraHw06DAO$$FastClassByCGLIB$$e19cf51d.invoke(<generated>)
at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:149)
at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
at br.com.otgmobile.service.dao.ComandoNiagaraHw06DAO$$EnhancerByCGLIB$$69ccb4e4.add(<generated>)
at br.com.otgmobile.server.NiagaraSocketManager.testPersistComandos(NiagaraSocketManager.java:100)
at br.com.otgmobile.server.NiagaraSocketManager.start(NiagaraSocketManager.java:45)
at br.com.otgmobile.server.NiagaraDaemon.run(NiagaraDaemon.java:25)
at java.lang.Thread.run(Thread.java:722)

Caused by: org.hibernate.PropertyValueException: not-null property references a null or transient value: br.com.otgmobile.model.niagarahw06.ComandoNiagaraHw06.sequenceControlNumber
at org.hibernate.engine.Nullability.checkNullability(Nullability.java:101)
at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:313)
at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:144)
at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:69)
at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:179)
at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:135)
at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:800)
at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:774)
at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:778)
at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:612) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2020-06-10T17:50:53.637

对于非 id 字段的自定义序列生成器，您可以将 @GeneratorType 与 ValueGenerator 类实现一起使用。例如：

1.  实体：

```
 import org.hibernate.annotations.GeneratorType

    @GeneratorType(type = CustomGenerator.class, when = GenerationTime.INSERT)
    @Column(name = "CUSTOM_COLUMN", unique = true, nullable = false, updatable = false, lenght = 64)
    private String custom; 
```

2.  值生成器实现：

```
public class CustomGenerator extends ValueGenerator<String> {
        private static final String TODAY_EXAMPLE_QUERY = "from Example where createDate>:start and createDate<:end order by createDate desc";
        private static final String START_PARAMETER = "start";
        private static final String END_PARAMETER = "end";
        private static final String NEXTVAL_QUERY = "select EXAMPLE_SEQ.nextval from dual";
        private final SimpleDateFormat dataFormat = new SimpleDateFormat("yyyyMMdd");

        @Override
        public String generateValue(Session session, Object owner) {
            Date now = new Date();
            Query<Example> todayQuery = session.createQuery(TODAY_EXAMPLE_QUERY, Example.class);
            todayQuery.setParameter(START_PARAMETER, start(now));
            todayQuery.setParameter(END_PARAMETER, end(now));
            Example todayLastExample = todayQuery.setMaxResult(1).setHibernateFlushMode(COMMIT).uniqueResult();

            NativeQuery nextvalQuery = session.createSQLQuery(NEXTVAL_QUERY);
            Number nextvalValue = nextvalQuery.setFlushMode(COMMIT).uniqueResult();
            return dataFormat.format(now) + someParameter(todayLastExample) + nextvalValue.longValue();
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:53:14.703

`@GeneratedValue`注释不是 Hibernate 将作为列信息的一部分处理的东西。它必须与`@Id`注释一起使用。它只是说明当有 id 时如何生成 id。

你有几个选项来完成你想要的，但没有一个真的像使用你写的注释那样优雅。这些建议各有利弊（数据库可移植性、复杂性、实体管理器与会话等），但一些想法是：

*   实现一个 PreInsertListener 并将其添加到您的`AnnotationConfiguration`. 此侦听器将查找需要此功能的实体类型，并获取/分配下一个序列值
*   制作一个数据库触发器来处理使用序列值填充列。将 Java 代码中的列标记为`insertable = false, updatable = false`
*   将生成逻辑放入实体中的回调方法中，并使用 @PrePersist 注释对其进行标记
*   将该字段作为构造函数的一部分填充（从那时起，您在构造函数中有一个 DB 调用和一些潜在的事务边界歧义而不是首选）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-01T13:30:03.220

这至少在 Postgres 中对我有用

```
@Generated(GenerationTime.INSERT)
@Column(name = "internal_id", columnDefinition = "serial", updatable = false)
private int internalId; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-19T13:55:23.527

检查类`result`中 generate 方法返回的值`SequenceControlNumber`。

顺便说一句，在这个 SO 问题中检查这个响应：[Hibernate JPA Sequence (non-Id)](https://stackoverflow.com/questions/277630/hibernate-jpa-sequence-non-id)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-11T16:22:35.160

我刚刚遇到了一个类似的问题，我需要创建一个序列并将其附加到一个不是主键的字段。

我一直在努力尝试使用`@GeneratedValue`和`@SequenceGenerator`注释，因为正如 Web 上所述：`@GeneratedValue`只能与 Hibernate 实体字段上的 @Id 注释一起使用。这告诉 Hibernate 不要关心该字段是否为空，它将在插入数据库时​​进行管理。但是这里 Hibernate 总是抛出异常，因为 GeneratedValue 在字段上被忽略了。

所以解决方案很简单：只需将此注释替换为`@Generated(GenerationTime.INSERT)`并添加`columnDefinition = "serial"`到您的`@Column(name = "huhu", columnDefinition = "serial", updatable = false, ...)`

通常，如果您首先创建了附加到数据库中字段的正确序列，它现在应该可以工作了。

# java - JTable 中未触发的超链接

> ID：12495401
> 
> 赞同：0
> 
> 时间：2012-09-19T13:08:53.017
> 
> 标签：java, swing

我尝试使用`TableCellRenderer`扩展的自定义`JLabel`- 这正是我想要的。默认情况下`JLabel`“识别”HTML

```
`<html><body><img src='http://www......jpg'><br>Some Text
<a href='http://www.myDomain.com'>Click Here</a>Some More Text</body></html>` 
```

但是`JLabel`没有实现`addHyperlinkListener`，所以点击链接永远不会受到尊重。

如果我然后尝试与`TableCellRenderer`该 extends相同**`JTextPane`**，则不显示“图像”，仅显示默认的“损坏”图像。在这种情况下`JTextPane`，确实实现`addHyperlinkListener`了，但它又不被尊重。（是的，我创建了一个监听器。）

如果我然后尝试与`TableCellRenderer`该 extends相同**`JEditorPane`**，则再次不显示“图像”，仅显示默认的“损坏”图像。在这种情况下`JTextPane`，确实实现`addHyperlinkListener`了，但它又不被尊重。（是的，我创建了一个监听器。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:13:59.157

无论您向 . 返回的组件注册了多少个侦听器`TableCellRenderer`，它们都不会被调用。该组件不包含在表格中，仅用作标记。结果，事件将永远不会到达这些侦听器。这个概念在[Swing 表教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)（在渲染器和编辑器部分）中进行了解释。

您可以查看[Table Button 列](http://tips4java.wordpress.com/2009/07/12/table-button-column/)示例，该示例在`JTable`. 相同的概念可用于在`JTable`.

您可能还会发现以下关于[“在 a 中添加超链接”`JLabel`的](https://stackoverflow.com/questions/527719/how-to-add-hyperlink-in-jlabel)SO 问题很有趣。

# hibernate - 如何在 Hibernate 上映射这些表

> ID：12495402
> 
> 赞同：0
> 
> 时间：2012-09-19T13:08:57.963
> 
> 标签：hibernate, mapping, foreign-keys, many-to-many, composite-primary-key

我有这两张表：

```
CREATE TABLE IF NOT EXISTS `functions` (
`idFunction` int(11) NOT NULL,
`idLanguage` int(11) NOT NULL,
`name` varchar(30) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
`idCategory` int(11) DEFAULT '1',
PRIMARY KEY (`idFunction`,`idLanguage`),
KEY `idCategory` (`idCategory`),
KEY `idLanguage` (`idLanguage`),
CONSTRAINT `FK_functions_categories` FOREIGN KEY (`idCategory`) REFERENCES            
`category_package` (`idCategory`) ON DELETE NO ACTION ON UPDATE CASCADE,
CONSTRAINT `FK_functions_languages` FOREIGN KEY (`idLanguage`) REFERENCES `languages`  (`idLanguage`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `subfunctions` (
`idParent` int(11) NOT NULL,
`idChild` int(11) NOT NULL,
PRIMARY KEY (`idParent`,`idChild`),
KEY `idChild` (`idChild`),
CONSTRAINT `FK_subfunctions_functions` FOREIGN KEY (`idParent`) REFERENCES `functions` (`idFunction`) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `FK_subfunctions_functions_2` FOREIGN KEY (`idChild`) REFERENCES `functions` (`idFunction`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

当我尝试通过 Hibernate 的逆向工程映射这些表时，会发生映射，但是当我尝试执行涉及这两个表的查询时，Hibernate 会抛出这个异常：

```
Foreign key (FKFD0F515B161D5928:subfunctions [idParent])) must have same number of columns as the referenced primary key (functions [idFunction,idLanguage]) 
```

我知道真正的交易是将 idLanguage 作为 PK 也放在子函数表中，但我使用的是旧版数据库，我无法修改它。

有没有办法映射这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:36:53.273

您没有提供很多有关映射的详细信息，因此在这里为您提供帮助并不容易。通常，由于两个表的主键都是复合键，因此可以将其映射到可嵌入类中，如[http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2177中所示](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#d0e2177)

上述类的示例映射可能类似于：

```
@Entity
@Table(name = "functions")
public class Functions {

    @Id
    private FunctionPK functionPK;

    @Column(name="name", nullable=false)
    private String name;

    @Column(name="idCategory", nullable=false)
    @ManyToOne(cascade=CascadeType.SAVE_UPDATE)
    @JoinColumn(name = "idCategory")
    private CategoryPackage idCategory;

...
}

@Embeddable 
  private class FunctionPK implements Serializable
  {

    @Column(name="idFunctions")
    private int idFunctions;

    @Column(name="idLanguage")
    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name = "idLanguage")
    private Language idLanguage;

    //Some getters and setters 
    ...
  }

@Entity
@Table(name = "subfunctions")
public class SubFunctions {

    @Id
    private SubFunctionPK subFunctionPK;

...
}

@Embeddable 
  private class SubFunctionPK implements Serializable
  {

    @Column(name="idParent")
    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name = "idFunction")
    private Functions idParent;

    @Column(name="idChild")
    @ManyToOne(cascade=CascadeType.ALL)
    @JoinColumn(name = "idFunction")
    private Functions idChild;

    //Some getters and setters 
    ...
  } 
```

# c# - 连接字符串时出错时的简写

> ID：12495403
> 
> 赞同：1
> 
> 时间：2012-09-19T13:09:02.423
> 
> 标签：c#, asp.net

```
string separator = " > ";

string retStr = "";

int count = 0;

foreach (string s in retList)
{
     count++;

     if(!string.IsNullOrEmpty(s))
     {
         if (count < retList.Count)
             retStr += s + separator;
         else
             retStr += s;

             //count < retList.Count ? retStr += s + separator : retStr += s;
      }
} 
```

注释掉的行导致错误：`Only assignment, call, increment, decrement, and new object expressions can be used as a statement`。这不应该等同于上面的 if-case 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:13:00.000

使用这个

```
retStr = count < retList.Count ? retStr + s + separator : retStr + s; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:12:38.887

这是错误的：

```
retStr += s + separator 
```

它应该是：

```
someStringbuilder.append(s); someStringbuilder.append(separator); 
```

在您的功能结束时：

```
 return someStringbuilder.ToString(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-19T13:15:30.423

看看[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)

```
return String.Join(separator, retList); 
```

来自 msdn：

> **字符串连接**
> 
> 例如，如果 separator 是“,”，value 的元素是“apple”、“orange”、“grape”和“pear”，则 Join(separator, value) 返回“apple, orange, grape, pear”。
> 
> 如果分隔符为空，则使用空字符串 (String.Empty)。如果 value 中的任何元素为 null，则使用空字符串代替。

如果您不想要 null 或空条目，请执行以下操作：

```
return String.Join(separator, retList.Where(x => !string.IsNullOrEmptyOrWhiteSpace(x)); 
```

# c# - 本地路径是否有类似 Url.Content 的内容？

> ID：12495404
> 
> 赞同：1
> 
> 时间：2012-09-19T13:09:04.247
> 
> 标签：c#, asp.net, asp.net-mvc

我喜欢如何使用 Url.Content 获取文件的 Web 服务器路径，是否有本地路径的等效路径，例如，如果我想保存文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:13:25.617

该`MapPath`方法将指定的相对或虚拟路径映射到服务器上相应的物理目录。 [msdn](http://msdn.microsoft.com/en-us/library/ms524632%28v=vs.90%29.aspx)还要查看[server.mappath(“.”)、server.mappath(“~”)、server.mappath(@“\”)、server.mappath(“/”)。有什么区别？](https://stackoverflow.com/questions/275781/server-mappath-server-mappath-server-mappath-server-mappath)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:12:58.743

枚举有一些您可以使用的`Environment.SpecialFolder`特殊路径，例如，您可以使用类似下面的内容来获取用户应用程序数据路径的路径：

```
string appDataPath =
    Path.Combine(
        Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData),
        "YourCompany\\YourApp"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:14:03.020

我通常使用以下方法完成此操作：

```
Server.MapPath(Url.Content("[...]")); 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:16:11.800

你想得到物理路径吗？

然后尝试：

`string physicalPath = Server.MapPath("/bin");`

# mysql - 跨多个表的 COUNT 问题

> ID：12495409
> 
> 赞同：1
> 
> 时间：2012-09-19T13:09:23.963
> 
> 标签：mysql, join, count

我正在尝试计算 2 个表，但我没有看到我的查询有什么问题，但我得到了错误的结果。用户 2 在 table_two 中不存在，所以零是正确的。

```
SELECT t1.creator_user_id, COUNT(t1.creator_user_id), COUNT(t2.user_id)
FROM table_one AS t1
LEFT JOIN table_two AS t2 ON t2.user_id = t1.creator_user_id
GROUP BY t1.creator_user_id, t2.user_id 
```

**实际结果**

```
1 192 192
2 9 0 
```

**预期结果**

```
1 16 12
2 9 0 
```

结果表明按条件缺少组，但我已经使用了两个字段。
我哪里错了？

另外，我可以总结一下 table_two 中不存在的所有用户 t1 吗？就像用户 3 在 t1 中存在 21 次一样，那么结果将是：

```
1 16 12     (users with > 0 in t2 will need their own row)
2 30 0      (user 2=9 + user 3=21 => 30) 
```

对于 t2 中为 0 的所有用户，用户 ID 对于 t1 的总和是错误的，这是可以的。如果不可能，那么我将只做两个查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:14:39.517

尝试这个：

```
SELECT t1.creator_user_id, 
       Count(*), 
       (SELECT Count(*) 
        FROM   table_two 
        WHERE  table_two.user_id = t1.creator_user_id) 
FROM   table_one AS t1 
GROUP  BY t1.creator_user_id 
```

[**SQL 小提琴演示**](http://sqlfiddle.com/#!2/98d2f/1/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:50:35.563

如果用户在 t2 中有几行，那么 t1 也会为 t2 中的每一行显示。尝试使用（仅）t1.creator_user_id 进行分组

```
SELECT t1.creator_user_id, COUNT(t1.creator_user_id), COUNT(t2.user_id)
FROM table_one AS t1
LEFT JOIN table_two AS t2 ON t2.user_id = t1.creator_user_id
GROUP BY t1.creator_user_id 
```

性能方面，两个不同的查询可能会更好。

# jquery - not() 函数不起作用

> ID：12495412
> 
> 赞同：1
> 
> 时间：2012-09-19T13:09:29.507
> 
> 标签：jquery

我有以下html元素

```
<div id="featured">
...
    <div class="playlist_box" style="display: block; ">
        <ul>
            <li><a href="javascript:void(0)" class="list" fileid="undefined"> element 1</a></li>
            <li><a href="javascript:void(0)" class="list" fileid="undefined"> element 2</a></li> 
            <li><a href="javascript:void(0)" class="list" fileid="undefined"> element 3</a></li>
        </ul>
    </div>
</div> 
```

我想将 onclick 事件处理程序应用于在标有 .playlist_box 的区域时不会触发的特色。我试图取消选择各种元素，非作品，其中一些是：

```
 jQuery("#featured").not('.playlist').click(function()...
  jQuery("#featured").not('li').click(function()... 
```

似乎*not()*不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:14:05.340

为什么不使用这样的东西？

```
$("#featured:not('.playlist')").click(function() {
    //function
}); 
```

[以下是如何使用它。](http://api.jquery.com/not-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:22:11.753

*[`.not()`](http://api.jquery.com/not)从匹配的元素集中删除元素。*
您只选择带有 id 的 div，`#featured`因此`.not()`只会再次返回该 div。此外，类`playlist_box`不是`playlist`。

如果你坚持，`.not()`那么你将不得不做类似的事情

```
$("#featured").children().not(".playlist_box").click(...); 
```

但为什么不只是

```
$("#featured").on("click", "li.list", function(ev) {
    if ($(this).closest("div").hasClass("playlist_box")) {
        // do something
    } else {
        // do something else
    }
}); 
```

一个处理程序来统治他们：D

**编辑：**添加了对父项的检查

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:13:10.477

看起来它工作得很好，看[小提琴](http://jsfiddle.net/48eYM/1/)

另外，请注意，您正在尝试应用`playlist`不存在的应用。你应该在寻找`playlist_box`. 但是，如果您这样做，它将无法使用，`.not()`因为您申请`.not()`的`#featured`是没有该类的，所以它会失败，您需要使用过滤器`:not()` 或以其他方式使用`jQuery("a").not('.list').click(function(){`

您也可以尝试这样做

`jQuery("#featured:not('.playlist')")`

看到这个[小提琴](http://jsfiddle.net/48eYM/)

# cordova - Phonegap .xap 不被接受，得到错误 1034

> ID：12495414
> 
> 赞同：3
> 
> 时间：2012-09-19T13:09:35.283
> 
> 标签：cordova, windows-phone, .net-assembly

我在 build.phonegap.com 上构建了一个应用程序，所以没有使用 sdk。我上传了我的自定义 config.xml 文件，因为我需要 android 的“留在 webview”属性，这些应用程序在 android 中运行良好，但是当我尝试将它上传到 windows phone 商店时，我得到：

> 1034：AppManifest.xml 文件具有无效的条目程序集。更新它然后重试
> 
> 确保在 AppManifest.xaml 的 EntryPointAssembly 字段中指定的程序集名称是 XAP 中存在的真实程序集的名称。重建你的项目应该可以解决这个问题。

我无法访问 appmanifest.xml，我试图在 phonegap 中重建它，但它对我没有用！

我的 config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<widget xmlns="http://www.w3.org/ns/widgets" version="1.0.0" versionCode="10"   id="com.app" xmlns:gap="http://phonegap.com/ns/1.0"> 
<!-- versionCode is optional and Android only -->
<name>Theappname</name> 
<description> The app. </description> 
<author email="email@adress.com" href="https://aurl.com"> Feel free to contact </author> 
<preference name="stay-in-webview" value="true"/> </widget> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T10:31:47.297

我今天在 Phonegap 的帮助中心找到了解决方案。如果您也遇到此问题，请将您应用的 phonegap 版本降级到 1.9.0。

# java - 在java中运行脚本的有效方法

> ID：12495416
> 
> 赞同：0
> 
> 时间：2012-09-19T13:09:44.077
> 
> 标签：java, shell

我想从 Java 类运行 shell 脚本（.sh）。

实现这一目标的**最有效和最快的方法是什么？**

使用groovy直接从Java运行这个脚本更好还是有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:19:01.700

只需使用流程构建器来创建和执行您的脚本：

```
ProcessBuilder processBuilder = new ProcessBuilder("script.sh", "arg1", "arg2"); //Add more arguments as needed
processBuilder.directory(new File("scriptDir")); //Set the working directory, if needed
Process process = processBuilder.start(); 
```

您也可以直接拨打电话`Runtime.exec()`：

```
Process process = Runtime.getRuntime().exec("script.sh"); 
```

就我个人而言，我会采用第一种方法——它可以让你设置参数、工作目录、环境变量等，这种方式比`exec()`调用简单得多。

# html - 如何在 Play Framework 中使用 Groovy 对非转义的 HTML 字符进行子串化

> ID：12495417
> 
> 赞同：2
> 
> 时间：2012-09-19T13:09:46.317
> 
> 标签：html, groovy, playframework, playframework-2.0

取消转义字符的解决方案是：

`#{verbatim} ${mycontent} #{/verbatim}`或者`${_news.content.raw()}`

但是有没有一种简单的方法可以在 Play Framework 中使用 Groovy 对 HTML 字符进行子串化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:23:10.020

我不确定是否理解您的问题，但是：

*   如果你想**转义 HTML 标签**，你可以使用 `${mycontent.escapeHtml()}`或`${mycontent.escape()}`
*   如果您想**清理**字符串`mycontent`以仅获取文本，您可以使用[Jsoup](http://jsoup.org/)库执行您自己的 FastTags，并执行以下操作：

    ```
    package tags;
     ...
    import org.jsoup.Jsoup;
    import org.jsoup.safety.Whitelist;
     ...

    public class MyJavaExtensions extends JavaExtensions {

        public static String cleanString(String s) {
            try {
                return Jsoup.parse(s).text();
            } catch (Exception ex) {
                return null;
            }
        }
    } 
    ```

您可以像这样在 Groovy 模板中使用它：`${mycontent.cleanString()}`

# django - initial_data.json 在测试前未加载

> ID：12495419
> 
> 赞同：1
> 
> 时间：2012-09-19T13:10:00.317
> 
> 标签：django, testing, nose

我`django_nose`用来运行我的测试。我有一个固定装置`initial_data.json`，它是一个应用程序的文件夹：`my_app/fixtures/initial.json`。

夹具在使用时加载正常`python manage.py syncdb`，但在运行测试时根本不加载`python manage.py test my_app`（虽然我猜它应该加载！？）。任何指向可能是错误的指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:21:16.610

我引用[官方文档](https://docs.djangoproject.com/en/1.4/topics/testing/#fixture-loading)：

> 一旦您创建了一个夹具并将其放置在您的一个 INSTALLED_APPS 中的夹具目录中，您就可以通过在 django.test.TestCase 子类上指定一个夹具类属性来在单元测试中使用它：

```
from django.test import TestCase
from myapp.models import Animal

class AnimalTestCase(TestCase):
    fixtures = ['mammals.json', 'birds']

    def setUp(self):
        # Test definitions as before.
        call_setup_methods()

    def testFluffyAnimals(self):
        # A test that uses the fixtures.
        call_some_test_code() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-19T01:10:20.983

我有类似的症状，但有不同的解决方案。我正在运行我的测试，`py.test`而不是`manage.py test`.

在`appname/fixtures`我有`initial_data.json`和`foo.json`。我的测试看起来像这样：

```
from django.test import TestCase

class TestFoo(TestCase):

    fixtures = ['initial_data.json', 'foo.json']

    ... 
```

但是，当我运行测试时，`initial_data.json`并没有加载，而是加载`foo.json`了。

对我来说，解决方案是重命名`initial_data.json`为`base.json`，然后加载夹具。

我不认为这是原始发布者的问题，但发布此问题以便下一个与我有相同问题的人可以找到一些东西。:)

# java - 如何 JUnit 测试这两个列表 以相同的顺序包含相同的元素？

> ID：12495420
> 
> 赞同：84
> 
> 时间：2012-09-19T13:10:08.133
> 
> 标签：java, junit, guava

## 语境

我正在为该类编写一个简单的**[JUnit](http://www.junit.org/ "JUnit：测试驱动开发的资源")**测试。`MyObject`

A`MyObject`可以从采用**[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html "JDK：java.lang.String")**可变参数的静态工厂方法创建。

```
MyObject.ofComponents("Uno", "Dos", "Tres"); 
```

在 存在期间的任何时候，客户端都可以通过该方法以**[List<E>](http://docs.oracle.com/javase/7/docs/api/java/util/List.html "JDK：java.util.List<E>")**`MyObject`的形式检查它创建的参数。`.getComponents()`

```
myObject.ofComponents(); // -> List<String>: { "Uno", "Dos", "Tres" } 
```

换句话说，a`MyObject`既能记住也能公开导致它存在的参数列表。有关此合同的更多详细信息：

*   的顺序`getComponents`将与为对象创建选择的顺序相同
*   允许重复的后续**[字符串](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html "JDK：java.lang.String")**组件并按顺序保留
*   行为`null`未定义（其他代码保证不会`null`进入工厂）
*   对象实例化后无法更改组件列表

我正在编写一个简单的测试，它`MyObject`从**[String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html "JDK：java.lang.String")**列表创建一个，并检查它是否可以通过`.getComponents()`. *我立即执行此操作，但这应该发生在现实代码路径中的远处*。

## 代码

这是我的尝试：

* * *

```
List<String> argumentComponents = Lists.newArrayList("One", "Two", "Three");
List<String> returnedComponents =
    MyObject.ofComponents(
        argumentComponents.toArray(new String[argumentComponents.size()]))
        .getComponents();
assertTrue(Iterables.elementsEqual(argumentComponents, returnedComponents)); 
```

* * *

## 问题

*   Is **[Google Guava](http://code.google.com/p/guava-libraries/ "Guava：用于 Java 的 Google 核心库")** `Iterables.elementsEqual()` the best way, provided I have the library in my build path, to compare those two lists? *this is something I have been agonizing about; should I use this helper method which goes over an [Iterable<E>](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html "JDK：java.lang.Iterable<E>").. check size and then iterate running `.equals()`.. or any other of the methods that an Internet search suggests? what's the canonical way to compare lists for unit tests?*

### Optional insights I would love to get

*   Is the method test designed reasonably? I am not an expert in **[JUnit](http://www.junit.org/ "JUnit：测试驱动开发的资源")**!
*   Is `.toArray()` the best way to convert a **[List<E>](http://docs.oracle.com/javase/7/docs/api/java/util/List.html "JDK：java.util.List<E>")** to a varargs of E?

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-09-19T13:17:12.757

Why not simply use `List#equals`?

```
assertEquals(argumentComponents, imapPathComponents); 
```

[Contract of `List#equals`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#equals%28java.lang.Object%29):

> two lists are defined to be equal if they contain the same elements in the same order.

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-09-19T13:23:53.507

I prefer using Hamcrest because it gives much better output in case of a failure

```
Assert.assertThat(listUnderTest, 
       IsIterableContainingInOrder.contains(expectedList.toArray())); 
```

Instead of reporting

`expected true, got false`

it will report

`expected List containing "1, 2, 3, ..." got list containing "4, 6, 2, ..."`

[IsIterableContainingInOrder.contain](http://hamcrest.org/JavaHamcrest/javadoc/1.3/org/hamcrest/collection/IsIterableContainingInOrder.html#contains%28E...%29)

[Hamcrest](http://hamcrest.org/JavaHamcrest/javadoc/1.3/)

According to the Javadoc:

> Creates a matcher for Iterables that matches when a single pass over the examined Iterable yields a series of items, each logically equal to the corresponding item in the specified items. For a positive match, the examined iterable must be of the same length as the number of specified items

So the `listUnderTest` must have the same number of elements and each element must match the expected values in order.

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-19T13:17:04.810

The equals() method on your List implementation should do elementwise comparison, so

```
assertEquals(argumentComponents, returnedComponents); 
```

is a lot easier.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-19T13:19:36.990

`org.junit.Assert.assertEquals()` and `org.junit.Assert.assertArrayEquals()` do the job.

To avoid next questions: If you want to ignore the order put all elements to set and then compare: `Assert.assertEquals(new HashSet<String>(one), new HashSet<String>(two))`

If however you just want to ignore duplicates but preserve the order wrap you list with `LinkedHashSet`.

Yet another tip. The trick `Assert.assertEquals(new HashSet<String>(one), new HashSet<String>(two))` works fine until the comparison fails. In this case it shows you error message with to string representations of your sets that can be confusing because the order in set is almost not predictable (at least for complex objects). So, the trick I found is to wrap the collection with sorted set instead of `HashSet`. You can use `TreeSet` with custom comparator.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-09-20T08:30:51.373

For excellent code-readability, [Fest Assertions](https://github.com/alexruiz/fest-assert-2.x/wiki) has nice support for [asserting lists](http://fest.easytesting.org/assert/apidocs/org/fest/assertions/Assertions.html#assertThat%28java.util.List%29)

So in this case, something like:

```
Assertions.assertThat(returnedComponents).containsExactly("One", "Two", "Three"); 
```

Or make the expected list to an array, but I prefer the above approach because it's more clear.

```
Assertions.assertThat(returnedComponents).containsExactly(argumentComponents.toArray()); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-08-08T12:37:31.643

**assertTrue()/assertFalse() : to use only to assert boolean result returned**

> assertTrue(Iterables.elementsEqual(argumentComponents, returnedComponents));

You want to use `Assert.assertTrue()` or `Assert.assertFalse()` as the method under test returns a `boolean` value.
As the method returns a specific thing such as a `List` that should contain some expected elements, asserting with `assertTrue()` in this way : `Assert.assertTrue(myActualList.containsAll(myExpectedList)` is an anti pattern.
It makes the assertion easy to write but as the test fails, it also makes it hard to debug because the test runner will only say to you something like :

> expected `true` but actual is `false`

**`Assert.assertEquals(Object, Object)` in JUnit4 or `Assertions.assertIterableEquals(Iterable, Iterable)` in JUnit 5 : to use only as both `equals()` and `toString()` are overrided for the classes (and deeply) of the compared objects**

It matters because the equality test in the assertion relies on `equals()` and the test failure message relies on `toString()` of the compared objects.
As `String` overrides both `equals()` and `toString()`, it is perfectly valid to assert the `List<String>` with `assertEquals(Object,Object)`. And about this matter : you have to override `equals()` in a class because it makes sense in terms of object equality, not only to make assertions easier in a test with JUnit.
To make assertions easier you have other ways (that you can see in the next points of the answer).

**Is Guava a way to perform/build unit test assertions ?**

> Is Google Guava Iterables.elementsEqual() the best way, provided I have the library in my build path, to compare those two lists?

No it is not. Guava is not an library to write unit test assertions.
You don't need it to write most (all I think) of unit tests.

**What's the canonical way to compare lists for unit tests?**

As a good practice I favor assertion/matcher libraries.

I cannot encourage JUnit to perform specific assertions because this provides really too few and limited features : it performs only an assertion with a deep equals.
Sometimes you want to allow any order in the elements, sometimes you want to allow that any elements of the expected match with the actual, and so for...

So using a unit test assertion/matcher library such as Hamcrest or AssertJ is the correct way.
The actual answer provides a Hamcrest solution. Here is a [AssertJ](http://joel-costigliola.github.io/assertj/) solution.

[`org.assertj.core.api.ListAssert.containsExactly()`](http://joel-costigliola.github.io/assertj/core-8/api/org/assertj/core/api/ListAssert.html#containsExactly-ELEMENT...-) is what you need : it verifies that the actual group contains exactly the given values and nothing else, in order as stated :

> Verifies that the actual group contains exactly the given values and nothing else, in order.

Your test could look like :

```
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.Test;

@Test
void ofComponent_AssertJ() throws Exception {
   MyObject myObject = MyObject.ofComponents("One", "Two", "Three");
   Assertions.assertThat(myObject.getComponents())
             .containsExactly("One", "Two", "Three");
} 
```

A AssertJ good point is that declaring a `List` as expected is needless : it makes the assertion straighter and the code more readable :

```
Assertions.assertThat(myObject.getComponents())
         .containsExactly("One", "Two", "Three"); 
```

And if the test fails :

```
// Fail : Three was not expected 
Assertions.assertThat(myObject.getComponents())
          .containsExactly("One", "Two"); 
```

you get a very clear message such as :

> java.lang.AssertionError:
> 
> Expecting:
> 
> <["One", "Two", "Three"]>
> 
> to contain exactly (and in same order):
> 
> <["One", "Two"]>
> 
> but some elements were not expected:
> 
> <["Three"]>

**Assertion/matcher libraries are a must because these will really further**

假设`MyObject`不存储`String`s 而是`Foo`s 实例，例如：

```
public class MyFooObject {

    private List<Foo> values;
    @SafeVarargs
    public static MyFooObject ofComponents(Foo... values) {
        // ...
    }

    public List<Foo> getComponents(){
        return new ArrayList<>(values);
    }
} 
```

这是一个非常普遍的需求。使用 AssertJ，断言仍然很容易编写。更好的是，您可以断言列表内容是相等的，即使元素的类没有覆盖`equals()/hashCode()`，而 JUnit 方式要求：

```
import org.assertj.core.api.Assertions;
import static org.assertj.core.groups.Tuple.tuple;
import org.junit.jupiter.api.Test;

@Test
void ofComponent() throws Exception {
    MyFooObject myObject = MyFooObject.ofComponents(new Foo(1, "One"), new Foo(2, "Two"), new Foo(3, "Three"));

    Assertions.assertThat(myObject.getComponents())
              .extracting(Foo::getId, Foo::getName)
              .containsExactly(tuple(1, "One"),
                               tuple(2, "Two"),
                               tuple(3, "Three"));
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-19T14:00:35.253

*   My answer about whether `Iterables.elementsEqual` is best choice:

`Iterables.elementsEqual` is enough to compare 2 `List`s.

`Iterables.elementsEqual` is used in more general scenarios, It accepts more general types: `Iterable`. That is, you could even compare a `List` with a `Set`. (by iterate order, it is important)

Sure `ArrayList` and `LinkedList` define equals pretty good, you could call equals directly. While when you use a not well defined List, `Iterables.elementsEqual` is the best choice. One thing should be noticed: `Iterables.elementsEqual` does not accept `null`

*   To convert List to array: `Iterables.toArray` is easer.

*   For unit test, I recommend add **empty list** to your test case.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-26T14:10:38.163

一些解决方案是有道理的，我同意他们的看法。但对我来说，我会使用`assertEquals`但我会对这两个列表进行排序。

```
assertEquals(sortedExpectedList, sortedActualList); 
```

它很简单，输出仍然为您提供实际和预期之间的差异。

# sql - 在 SQL Server 2008/2012 中的单个 SQL 语句中返回子记录

> ID：12495424
> 
> 赞同：0
> 
> 时间：2012-09-19T13:10:16.593
> 
> 标签：sql, sql-server, stored-procedures

我目前在存储过程中有以下 SQL 语句；

```
SELECT [Id],
    [Path],
    [Title],
    [Description]
FROM [Configuration].[Pages] p 
WHERE 
    ((p.Id = @Id) OR (@Id IS NULL)) AND
    ((p.Path = @Path) OR (@Path IS NULL)) 
```

这允许我传递页面的路径、页面的 id 或什么都不传递（返回全部）。

我希望对其进行重构以返回相关的子记录（1 到 M），而不是为返回的每条记录返回数据库。子记录的当前 SQL 如下；

```
SELECT     h.Id, h.Description, h.Title, h.[Content]
FROM            [Configuration].[HelpItems] h INNER JOIN
                         [Configuration].[PageHelpItems] ph ON h.Id = ph.HelpId
WHERE        (ph.PageId = @PageId) 
```

目前，我正在遍历每个父记录并为每个记录调用此存储过程，我认为这效率低下，我希望使用 SP 使用一个或多个 SQL 语句来确保为所有父记录返回子记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:25:32.230

尝试使用以下查询：

```
SELECT     h.Id, h.Description, h.Title, h.[Content] 
FROM            [Configuration].[HelpItems] h INNER JOIN 
                     [Configuration].[PageHelpItems] ph ON h.Id = ph.HelpId 
                INNER JOIN [Configuration].[Pages] p ON ph.PageId = p.Id
WHERE     
    ((p.Id = @Id) OR (@Id IS NULL)) AND    
    ((p.Path = @Path) OR (@Path IS NULL)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:45:27.713

所以你想要记录

```
;WITH Rec AS (
    SELECT [Id],
        [Path],
        [Title],
        [Description]
    FROM [Configuration].[Pages] p 
    WHERE 
        ((p.Id = @Id) OR (@Id IS NULL)) AND
        ((p.Path = @Path) OR (@Path IS NULL))
)
SELECT 'Main' Which, * FROM Rec
-- plus the children...
UNION ALL
SELECT 'Related', h.Id, h.Title, h.Description, h.[Content]
FROM   [Configuration].[HelpItems] h
INNER JOIN [Configuration].[PageHelpItems] ph ON h.Id = ph.HelpId
INNER JOIN Rec ON Rec.Id = ph.PageId 
```

# excel - ThisWorkbook vs opens_workbook？

> ID：12495427
> 
> 赞同：0
> 
> 时间：2012-09-19T13:10:24.353
> 
> 标签：excel, vba, macos

`ThisWorkbook`和 和有什么不一样`opened_workbook`？

我只是问，因为我正在查看我的一些旧代码并且我看到两者都在使用，我正在尝试清理其中的一些代码。

据我所知`ThisWorkbook`，将始终指示运行脚本的工作簿，并且`opened_workbook`该工作簿是否处于最前沿？我在这里错了吗？

我不仅想知道我是对还是错，还想知道两者都应该在哪里使用，因为我觉得我应该使用`ThisWorkbook`而不是`opened_workbook`在我的情况下使用。

提前感谢您试图帮助我理解这里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:17:12.020

**ThisWorkbook**是一个表示应用程序对象的变量。

**opens_workbook**必须是一个变量。

# hp-quality-center - HP QC 10 缺陷跟踪 - 编辑描述是一件坏事吗？

> ID：12495431
> 
> 赞同：0
> 
> 时间：2012-09-19T13:10:37.790
> 
> 标签：hp-quality-center, defects

当在 HP QC 中看到用户说“按钮不起作用”的描述时，追赶他们以获取复制步骤、输入它们然后验证它们是浪费时间。

我鼓励我的团队在更清晰的描述可用时*覆盖描述。*如果描述需要修改，因为问题部分清楚，这也是可以接受的。

一旦工作开始，只有关于 QC 的移动、发现的问题、需要澄清的研发评论被输入。但是，如果需要对描述进行更新 - 可能更详细地阐明特定功能，则会修改描述并将其更新包含在研发评论中。

我是在使用还是滥用描述字段？我已与其他组织中的其他用户交谈，他们说禁止编辑此内容。但是，当出现不具体且无用的缺陷时，为了挽救有问题的问题，这是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:11:06.823

根据我在 QC 方面的经验，我们可以编辑描述，但不建议不必要地编辑缺陷状态。

谢谢你，NaveenKumar N For [www.QAInsights.com](http://www.QAInsights.com)

# arrays - 哪种数据结构最适合交换操作？

> ID：12495432
> 
> 赞同：-4
> 
> 时间：2012-09-19T13:10:41.580
> 
> 标签：arrays, data-structures

哪种数据结构最适合存储应该经常交换的元素？链表和数组都被命名为这种操作的最爱，但我想知道其中的原因......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:02:13.827

我认为正确的答案是'好吧，这取决于，但通常一个数组（向量）是要走的路；如果我们谈论链表，它至少应该是一个双向链表。

假设我们有一些[单链表](http://en.wikipedia.org/wiki/Linked_list#Singly_linked_lists)：

```
...->$el1->$el2->$el3->$el4->$el5... 
```

...并且我们引用了 $el2 和 $el4 元素（应该交换）。从技术上讲，我们需要做的是...

```
1) assign the address of `$el4` (or `$el3->next`) to the `$el1->next` pointer
2) assign the address of `$el2` (or cached `$el1->next`) to the `$el3->next` pointer
3) assign the value of `$el4->next` to the `$el2->next` pointer
4) assign the value of `$el2->next` to the (previously cached) `$el4->next` pointer 
```

...就是这样，基本上是 0(1) 效率。容易吧？

这里要注意的是，没有简单的方法 (=0(1)) 可以在此处获取“先前”元素 (`$el1`和`$el3`)。两者`$el4`和仅`$el2`存储它们`nexts`（`$el5`和`$el3`分别）的地址。

当然，您可以改用[双向链表](http://en.wikipedia.org/wiki/Doubly_linked_list)：

```
...$el1<->$el2<->$el3<->$el4<->$el5... 
```

在这里引用`prev`元素将和那些元素一样简单`next`，所以我们需要...

```
1-2) swap values of `$el2->prev->next` and `$el4->prev->next`,
3-4) swap values of `$el4->next`       and `$el2->next` 
```

但是等等，还有更多！我们`prev`现在也必须更新指针：

```
5-6) swap values of `$el4->prev`       and `$el2->prev` 
```

正如您可能已经看到的，这里有 3 个“价值交换”操作。

使用向量，它是一个单一的交换：

```
[$el1][$el2][$el3][$el4][$el5]

1) assign data-value of $el2 to some temp variable;
2) assign data-value of $el4 to $el2;
3) assign data-value of this temp variable to $el4; 
```

当然，理论上这可能比以前的方法慢（如果这个“数据值”太大以至于复制它比复制指向它的指针三次需要更多时间）。但实际上它是指向存储在数组和链表中的如此庞大数据的指针。

# emacs - 如何在 Emacs 中自定义欢迎屏幕

> ID：12495435
> 
> 赞同：11
> 
> 时间：2012-09-19T13:10:59.223
> 
> 标签：emacs, customization

那么我将如何自定义欢迎屏幕呢？我知道`initial-buffer-choice`，但我想自定义原始主题作为主题的一部分（我正在开发 Tron 主题，并希望它的所有部分都完美！）。

我不想更改文本，但我有一个替代设计的标志 :) 这不是真正的替代品，我也不打算换一个*不同*的标志，它只是一个小的翻拍，以配合颜色主题。

**编辑：**以下是我到目前为止所得到的:)

[![整个桌面的缩略图](../Images/180f6aab2b42b9f6733004adafca41f0.png)](http://postimage.org/image/s9atel5uz/)

以及更大的图像：

![在此处输入图像描述](../Images/a22f9ed5749115380fe0db54d9fbe1b6.png)

**编辑**

抱歉让您久等了。我们开始吧：[https](https://code.google.com/p/tron-theme-emacs/) ://code.google.com/p/tron-theme-emacs/如果您发现主题行为异常的语言模式，我会尝试修复它。我想我在文本终端上尝试过一次，而不是 X-window Emacs，但我不记得它是怎么回事。所以，这可能是个问题。此外，某些模式可能带有自己的面孔。我试图设置一些（如欧洲央行），但这些可能不完整/我不知道所有可能的面孔。但是，同样，欢迎提出改进要求。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T14:32:16.327

要更改初始图像，请设置`fancy-splash-image`. 要更改文本和颜色，请设置`fancy-startup-text`和`fancy-about-text`。

# .net - 适用于 Windows 应用商店应用的 XML-RPC 库

> ID：12495436
> 
> 赞同：5
> 
> 时间：2012-09-19T13:11:01.177
> 
> 标签：.net, microsoft-metro, xml-rpc, windows-store-apps

我需要可以与 Windows 应用商店应用程序（又名 Metro）一起使用的 XML-RPC 库。据我所知，.NET 只有一个 XML-RPC.NET 库，它不支持 Windows 应用商店应用程序。

除了手动构造和解析 XML-RPC 请求和响应之外，还有其他方法吗？

# c# - 动态传递对象类型

> ID：12495441
> 
> 赞同：3
> 
> 时间：2012-09-19T13:11:14.137
> 
> 标签：c#

我有这段代码在 using 里面有 [Ent]

```
 public static void Retion()
        {

            using (Ent entitiesContext = new Ent())
                {...}
         { 
```

我需要动态传递 [Ent]，如下所示：

```
 public static void Retion(Type ds)
            {

                using (ds entitiesContext = new ds())
                    {...}
             { 
```

这当然行不通。如何更改它以便我可以动态传递它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:14:07.750

也许通过泛型：

```
public static void Retion<T>() where T : IDisposable, new()
{
    using (T entitiesContext = new T())
    {...} 
```

然后`Retion<Ent>()`

请注意，要对 做任何*有用*的事情`entitiesContext`，您可能还需要一些基类约束，即

```
public static void Retion<T>() where T : DataContext, new()
{
    using (T entitiesContext = new T())
    {...} 
```

当然，这与以下情况并没有太大不同：

```
public static void Retion(Type type)
{
    using (DataContext entitiesContext = 
        (DataContext)Activator.CreateInstance(type))
    {...} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:14:22.563

怎么样

```
 public static void Retion<T>() where T : IDisposable, new()
   { 

            using (T entitiesContext = new T()) 
                {...} 
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:13:50.880

公共静态无效 Retion< T >(T ds) 其中 T :new() {

```
 using (T entitiesContext = new T())
                {...}
         { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:14:02.213

您可以通过反射从类型调用构造函数

# vim - Vim 中的 f 和 t 命令有什么作用？

> ID：12495442
> 
> 赞同：149
> 
> 时间：2012-09-19T13:11:20.993
> 
> 标签：vim

什么`f`和`t`命令在 vim 中做什么以及它们是如何工作的？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2012-09-19T13:17:35.487

遇到此类问题的第一站应该是 vim 的内部帮助，`:h f`以及`:h t`. 但是，在这种情况下，这些条目在没有示例的情况下有点神秘。假设我们有这一行（`^`= 光标位置）：

```
The quick brown fox jumps over the lazy dog.
^ 
```

这些命令查找一行中的字符。所以`fb`将光标放在这里：

```
The quick brown fox jumps over the lazy dog.
          ^ 
```

`t`类似`f`，但将光标放在前一个字符上。所以`tb`会给你：

```
The quick brown fox jumps over the lazy dog.
         ^ 
```

您可以将这些命令记为`f`ind 和`t`ill。此外，您可以在命令前添加一个数字以移动到该字符的第 n 次出现。例如，`3fb`将移动到光标右侧的第三个 b。我的例句虽然只有一个 b，所以光标根本不会移动。

* * *

## 回答 #2

> 赞同：137
> 
> 时间：2014-04-22T15:26:10.403

只是为了补充[迈克尔克里斯托菲克的回答](https://stackoverflow.com/a/12495564/2071807)，没有描述`f`或`t`不完整，也没有提及`;`。

从此[Vim 备忘单](http://www.fprintf.net/vimCheatSheet.html)：

`;`“重复最近的 f、t、F 或 T [count] 次。”

所以，继续@MichaelKristofik 的主题：

```
The quick brown fox jumps over the lazy dog.
^ 
```

键入`fo`以转到第一个“o”：

```
The quick brown fox jumps over the lazy dog.
            ^ 
```

然后`;`转到下一个：

```
The quick brown fox jumps over the lazy dog.
                 ^ 
```

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2012-09-19T13:26:52.060

我发现`f`和与和`t`结合使用非常有用。例如， 将允许您替换从光标到下一个冒号的所有内容，但不能删除冒号。您可以将其记住为“更改为冒号”。`d``c``ct:`

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2012-09-19T13:23:29.280

`fx`跳到*下一个* `x`就行了。

`tx`*跳转到该行下一个* 字符之前的字符`x`。

您可以使用`Fx`and`Tx`来达到*前面* `x`的.

你可以用`2fx`跳到第二个`x`就行了。

因此，`fF`当`tT`您想要快速转到下一组括号 ( `f(`) 或删除从光标到但不包括前一个`=`( `dT=`) 等的所有内容时非常有用……</p>

见[`:h motion.txt`](http://vimdoc.sourceforge.net/htmldoc/motion.html#motion.txt)。它会让你大吃一惊。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2020-10-22T05:42:42.083

由于 LondonRob 提到`;`了 ，我想逗号`,`命令的描述是有序的。它与这些命令非常结合使用（当搜索过冲时）。

`f`使用、或执行搜索后`F`，可以使用以相反方向重复搜索。`t``T``,`

假设我们在这句话的开头，我们想将*elot*更改为*elit*。

 *```
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
^ 
```

我知道我必须替换*o*，所以我立即执行`fo`(find o) 。光标停留在行中的某个早期*o*！点击`;`以在同一方向重复搜索。类型类型类型...我应该只写五次，但假设我超调并键入`;`六次。我在这里结束：

```
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
 ^ 
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
             ^ 
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
               ^ 
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
                            ^ 
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
                                                    ^ 
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
                                                            ^ 
Lorem ipsum dolor sit amet consectetur adipiscing elot sed do eiusmod tempor.
                                                                   ^ 
```

现在，只需执行`,`两次即可在另一个方向重复此搜索。光标将到达elot*中的**o*。

 *```
Lorem ipsum dolor sit amet, consectetur adipiscing elot, sed do eiusmod tempor.
                                                              ^        
Lorem ipsum dolor sit amet, consectetur adipiscing elot, sed do eiusmod tempor.
                                                     ^ 
```

`ri`完成更换。

与大多数移动命令一样，`,`也要数一数：`[count],`。

从手册：

> 以相反的方向重复最近的 f、t、F 或 T [count] 次。**

# mysql - 如何设计数据库以轻松更新和删除形成二进制类型概念的行？

> ID：12495444
> 
> 赞同：3
> 
> 时间：2012-09-19T13:11:31.793
> 
> 标签：mysql, sql, database

我正在实施一些转推类型的概念。现在，可能有数百万条转发（1-2、2-3、3-4、4-5 ...）。

如果我从 2 中删除转推，那么它也应该从 3、4、5 中删除……要删除它，我必须进行很多查询，因为 join 对我没有帮助。如何快速删除如此大量的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T14:04:35.650

看看“[使用 MYSQL 的外键在 CASCADE 上删除/更新](http://www.java2s.com/Tutorial/MySQL/0080__Table/FOREIGNKEYONDELETECASCADEONUPDATECASCADE.htm)”帖子。希望这可以帮助。

# vba - VBA：在 OLE 绑定对象框架中显示特定的 Powerpoint 幻灯片

> ID：12495454
> 
> 赞同：1
> 
> 时间：2012-09-19T13:12:43.207
> 
> 标签：vba, powerpoint, ole

我目前正在 Microsoft Access 2007 中开发一个应用程序。在一个表单中，我想将一个 powerpoint 演示文稿加载到一个 OLE 绑定对象框架中。基本上，这可以通过以下宏在 VBA 中完成：

```
Private Sub cmdPreview_Click()

    MsgBox Location 'Location refers to column name of current selected data row
    olePreview.OLETypeAllowed = acOLELinked
    olePreview.SourceDoc = Location
    olePreview.Action = acOLECreateLink

End Sub 
```

这工作正常。但是，仅描述了 PowerPoint 演示文稿的第一张幻灯片。如何加载此演示文件的第二张或第三张幻灯片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:55:41.840

看看这个来自 Shyam Pillai。它是 VB6 代码，但可能适用于您正在尝试做的事情：

[http://skp.mvps.org/vb/pptvbwnd.htm](http://skp.mvps.org/vb/pptvbwnd.htm)

# python - python popen rsync 与 rsh 选项

> ID：12495455
> 
> 赞同：5
> 
> 时间：2012-09-19T13:12:47.497
> 
> 标签：python, rsync, popen, rsh

我正在尝试通过 subprocess & popen 执行 rsync 命令。一切都很好，直到我没有将 rsh 子命令放在出错的地方。

```
from subprocess import Popen
args = ['-avz', '--rsh="ssh -C -p 22 -i /home/bond/.ssh/test"', 'bond@localhost:/home/bond/Bureau', '/home/bond/data/user/bond/backups/']

p = Popen(['rsync'] + args, shell=False)
print p.wait()

#just printing generated command:
print ' '.join(['rsync']+args) 
```

我试图以多种方式逃避'--rsh="ssh -C -p 22 -i /home/bond/.ssh/test"'，但似乎这不是问题。

我收到错误 rsync: Failed to exec ssh -C -p 22 -i /home/bond/.ssh/test: No such file or directory (2)

如果我复制/粘贴当时输出的相同参数，我将正确执行命令。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:47:02.390

如果你改用会发生什么`'--rsh=ssh -C -p 22 -i /home/bond/.ssh/test'`（我删除了双引号）。

我怀疑这应该可行。当您将行剪切/粘贴到命令行时会发生什么，您的 shell 会看到双引号并删除它们，但使用它们来防止`-C` `-p`等被解释为单独的参数。当您`subprocess.Popen`使用列表调用时，您已经在没有 shell 帮助的情况下对参数进行了分区，因此您不再需要引号来保留应该拆分参数的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-20T16:53:05.823

遇到同样的问题，我用谷歌搜索了这个问题。看来您根本无法使用子进程将参数传递给 ssh。最终，我编写了一个 shell 脚本来运行 rsync 命令，我可以通过 subprocess.call(['rsyncscript', src, dest, sshkey]) 将参数传递给它。shell 脚本是： /usr/bin/rsync -az -e "ssh -i $3" $1 $2

这解决了问题。

# ruby - 如何在heroku上运行phantomjs？

> ID：12495463
> 
> 赞同：12
> 
> 时间：2012-09-19T13:13:01.107
> 
> 标签：ruby, heroku, phantomjs

我正在尝试在 heroku cedar 堆栈上运行 phantomjs。

我正在为 heroku [https://github.com/stomita/heroku-buildpack-phantomjs](https://github.com/stomita/heroku-buildpack-phantomjs)使用 phantomjs buildpack 。但是，我按照说明进行操作，但仍然无法使其正常工作。当我运行命令`heroku run bash`并输入`phantomjs --version`它说`phantomjs: command not found`

我阅读了有关 LD_LIBRARY_PATH 需要设置为“/usr/local/lib:/usr/lib:/lib:/app/vendor/phantomjs/lib”的内容，这就是我所做的，但没有成功。

有什么我想念的吗？buildpack 究竟在哪里安装了 phantomjs 二进制文件？有没有办法知道二进制文件的路径？

我正在使用红宝石 1.9.2

非常感谢你的帮助。

编辑：更准确地说，我想结合 ruby​​ 和 phantomjs，所以我使用这个自定义 buildpack：[https](https://github.com/ddollar/heroku-buildpack-multi) ://github.com/ddollar/heroku-buildpack-multi ，但是当我推送到 heroku 我得到“Heroku push被拒绝，无法编译 Multipack 应用程序”

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-16T04:56:39.403

从 phantomjs.org 下载 64 位 linux 二进制文件[http://phantomjs.org/download.html](http://phantomjs.org/download.html)

如果您还没有 bin/ 目录，请在您的应用程序中创建一个目录并将二进制文件放在那里。然后，您应该能够测试是否可以使用“heroku run 'phantomjs'”或“heroku run 'bin/phantomjs'”运行它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-29T19:38:10.033

# 对于带有 javascript 的 phantomjs

我不知道前面的例子是否真的有必要，因为虽然我正在使用 javascript，但它不应该有所不同。对我来说，我所要做的就是将 phantomjs buildpack 作为您的 master 上已安装 buildpacks 列表中的第一个。

# 检查可用的构建包

*从 app 文件夹打开终端并输入：*

```
heroku buildpacks 
```

这将显示可用的构建包。例如。

```
1.heroku/node.js

2.https://github.com/stomita/heroku-buildpack-phantomjs.git 
```

如您所见，buildpack 在此列表中排名第二。我们需要使它成为列表中的第一个。所以，我所做的是我删除了 phantomjs 构建包，然后再次添加它，但这次确保它在所有可用构建包列表中的第一个。

因此，要删除 buildpack，请键入：

```
heroku buildpacks:remove https://github.com/stomita/heroku-buildpack-phantomjs.git 
```

这将删除 buildpack。您可以通过键入以下内容进行检查：

```
heroku buildpacks 
```

现在，它应该只显示，

```
1.heroku/node.js 
```

太好了，现在我们添加 phantomjs buildack 确保它的第一个 . 所以在终端类型上：

```
heroku buildpacks:add --index 1 https://github.com/stomita/heroku-buildpack-phantomjs.git 
```

您可以通过键入以下内容来检查它是否是第一个：

```
heroku buildpacks 
```

现在，应该是，

```
1.https://github.com/stomita/heroku-buildpack-phantomjs.git
2.heroku/node.js 
```

# 而已！！

现在，在终端上，输入：

```
heroku run bash 
```

进入 bash 后，输入

```
phantomjs --version 
```

phantomjs 的当前版本应该显示在终端上。

```
2.1.1 
```

# c - 如何在不作为联合访问的情况下将 __m128d simd 向量的内容存储为双精度数？

> ID：12495467
> 
> 赞同：6
> 
> 时间：2012-09-19T13:13:04.993
> 
> 标签：c, x86, simd, intrinsics, sse2

我要优化的代码基本上是一个简单但很大的算术公式，自动分析代码以并行计算独立的乘法/加法应该相当简单，但我读到自动向量化仅适用于循环。

我现在已经读过很多次了，应该不惜一切代价避免通过联合或其他方式访问向量中的单个元素，而应该用 _mm_shuffle_pd 代替（我正在处理双精度）...

我似乎不知道如何将 __m128d 向量的内容存储为双精度而不将其作为联合访问。此外，与标量代码相比，这样的操作是否会带来任何性能提升？

```
union {
  __m128d v;
  double d[2];
} vec;
union {
  __m128d v;
double d[2];
} vec2;

vec.v = index1;
vec2.v = index2;
temp1 = _mm_mul_pd(temp1, _mm_set_pd(bvec[vec.d[1]], bvec[vec2[1]])); 
```

另外，这两个工会看起来丑陋可笑，但是在使用时

```
union dvec {
  __m128d v;
  double d[2];
} vec; 
```

试图将 indexX 声明为 dvec，编译器抱怨 dvec 未声明。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:22:25.677

不幸的是，如果您查看 MSDN，它会显示以下内容：

> 您**不应***直接*访问__m128d 字段。*但是，您可以在调试器中查看这些类型。*__m128 类型的变量映射到 XMM[0-7] 寄存器。

我不是 SIMD 方面的专家，但这告诉我你正在做的事情不会起作用，因为它不是设计的。

编辑：

我刚刚[找到这个](http://www.rz.uni-karlsruhe.de/rz/docs/VTune/reference/Intrins_API.htm)，它说：

> 仅在赋值的左侧使用 __m128、__m128d 和 __m128i，作为返回值或参数。不要在“+”和“>>”等其他算术表达式中使用它。

它还说：

> 在聚合中使用 __m128、__m128d 和 __m128i 对象，例如联合（例如，访问浮点元素）和结构。

所以也许你可以使用它们，但只能在工会中使用。然而，这似乎与 MSDN 所说的相矛盾。

**编辑2：**

[这是另一个有趣的资源，它通过示例描述了如何使用这些 SIMD 类型](http://locklessinc.com/articles/interval_arithmetic/)

在上面的链接中，你会发现这一行：

```
#include <math.h>
#include <emmintrin.h>
double in1_min(__m128d x)
{
    return x[0];
} 
```

> 在上面我们使用 gcc 4.6 中的一个新扩展来通过索引访问高和低部分。旧版本的 gcc 需要使用联合并写入两个双精度数组。这很麻烦，并且在关闭优化时会特别慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-01T06:35:28.793

**`_mm_cvtsd_f64`+`_mm_unpackhi_pd`**

对于双打：

```
#include <assert.h>

#include <x86intrin.h>

int main(void) {
    __m128d x = _mm_set_pd(1.5, 2.5);
    /* _mm_cvtsd_f64 + _mm_unpackhi_pd */
    assert(_mm_cvtsd_f64(x) == 2.5);
    assert(_mm_cvtsd_f64(_mm_unpackhi_pd(x, x)) == 1.5);
} 
```

对于浮点数，我在[How to convert a hex float to a float in C/C++ using _mm_extract_ps SSE GCC instrinc 函数中发布了以下示例](https://stackoverflow.com/questions/3130169/how-to-convert-a-hex-float-to-a-float-in-c-c-using-mm-extract-ps-sse-gcc-inst/56404373#56404373)

*   `_mm_cvtss_f32`+`_mm_shuffle_ps`
*   `_MM_EXTRACT_FLOAT`

对于整数，您可以使用`_mm_extract_epi32`：

```
#include <assert.h>

#include <x86intrin.h>

int main(void) {
    __m128i x = _mm_set_epi32(1, 2, 3, 4);
    assert(_mm_extract_epi32(x, 3) == 4);
    assert(_mm_extract_epi32(x, 2) == 3);
    assert(_mm_extract_epi32(x, 1) == 1);
    assert(_mm_extract_epi32(x, 0) == 1);
} 
```

[GitHub 上游](https://github.com/cirosantilli/linux-kernel-module-cheat/blob/277f67892b0eb7517d83cdcff82ccae7b5899254/userland/arch/x86_64/intrinsics/paddq.c).

编译并运行示例：

```
gcc -ggdb3 -O0 -std=c99 -Wall -Wextra -pedantic -o main.out main.c
./main.out 
```

在 Ubuntu 19.04 amd64 上测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T13:35:39.343

在“emmintrin.h”中定义了一个 double _mm_cvtsd_f64 (__m128d a) 函数来访问两个双精度的 sse 向量的低双精度。

从英特尔内部指南：

概要

*   双 _mm_cvtsd_f64 (__m128d a)
*   包括“emmintrin.h”
*   指令：movsd
*   CPUID 功能标志：SSE2

**说明**：将 a 的低位双精度（64 位）浮点元素复制到 dst。

操作 dst[63:0] := a[63:0]

# django - Django - Grappelli、mptt 和排序字段的问题

> ID：12495470
> 
> 赞同：1
> 
> 时间：2012-09-19T13:13:19.180
> 
> 标签：django, django-mptt, mptt, django-grappelli

我正在使用 Grappelli 管理员，因为它具有出色的可排序字段功能。但是，我似乎无法让它与 mptt 一起使用。这是我的代码：

```
class Category(models.Model):
        name = models.CharField(max_length = 100)

        def __unicode__(self):
                return self.name

class Item(models.Model):
        category = models.ForeignKey(category)
        title = models.CharField(max_length=50)
        parent = models.ForeignKey('self',null=True, blank=True,related_name='subitems')
        position = models.PositiveSmallIntegerField("Position")

        class Meta:
                ordering = ['position']

        def __unicode__(self):
                return self.title 
```

这是我的管理员：

```
from content.models import *
from django.contrib import admin

class ItemInline(admin.TabularInline):
    model = Item
    fields = ('title', 'parent', 'position')
    sortable_field_name = "position"

class CategoryAdmin(admin.ModelAdmin):
    model = Category
    inlines = (ItemInline, )

admin.site.register(Category, CategoryAdmin) 
```

最后这是我的模板：

```
<ul>
    {% recursetree nodes %}
        <li>
            {{ node.title }}
            {% if not node.is_leaf_node %}
                <ul class="children">
                    {{ children }}
                </ul>
            {% endif %}
        </li>
    {% endrecursetree %}
</ul> 
```

问题是，如果我`class Item(models.Model):`在我的模型中使用管理功能就好了，可排序和所有，但我的模板失败了，说

> 类型对象“MenuItems”没有属性“_mptt_meta”

当我使用所有东西时，`class MenuItems(MPTTModel):`一切都变了；我的模板工作正常，但我无法在我的管理员中订购字段（“位置”编号更改，但没有别的，它仍然按原始顺序列出项目。

所以，我想知道是否有人知道是否有可能让这两个东西一起工作，还是我只需要尝试找到另一种方法......

谢谢！

# ruby - 在 for i in 0...5 中使用 ruby -debug

> ID：12495474
> 
> 赞同：0
> 
> 时间：2012-09-19T13:13:26.213
> 
> 标签：ruby, debugging

我正在从“Programming ruby​​ 1.9”中学习 ruby​​。我正在学习使用 ruby​​-debug，所以我可以理解下面发生的事情。我使用 ruby​​mine，因为它集成了 ruby​​-debug19 或类似的东西（它说我没有 gem 并安装它）。这是问题，我能够单步执行代码并探索变量和堆栈。但是，当它到达 a 时`for i in 0...5`，调试器会说

> 堆栈帧不可用

我知道 ruby​​ 很少使用 for 循环，但我仍然想知道是否通过 for 循环进行调试。

代码：

```
 raw_text  = %{
The problem breaks down into two parts. First, given some text as a
string, return a list of words. That sounds like an array. Then, build a 
count for each distinct word. That sounds like a use for a hash---we can 
index it with the word and use the corresponding entry to keep a count.}

word_list = words_from_string(raw_text)
counts    = count_frequency(word_list)
sorted    = counts.sort_by {|word, count| count}
top_five  = sorted.last(5)

for i in 0...5            # (this is ugly code--read on
  word = top_five[i][0]   #  for a better version)
  count = top_five[i][1]
  puts "#{word}:  #{count}"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:43:59.393

如果您查看 Ruby 语言规范（第 91 页的第 11.5.2.3.4 条），您会看到

```
for i in 0...5
  word = top_five[i][0]
  count = top_five[i][1]
  puts "#{word}:  #{count}"
end 
```

是语法糖

```
(0...5).each do |i|
  word = top_five[i][0]
  count = top_five[i][1]
  puts "#{word}:  #{count}"
end 
```

*除了*没有为块创建*新的变量范围。*因此，代码 with`for`将被翻译成代码 with`each`并执行，就好像它是这样编写的，除了`for`循环中使用的变量泄漏到周围的范围内。

换句话说：`for`实际执行`each`但*没有为 block 分配新的堆栈帧*。所以，错误信息是完全正确的：有一个块调用，但不知何故没有为该块调用分配堆栈帧。这显然会使调试器感到困惑。

现在，有人可能会争辩说这是一个错误，`for`循环应该在调试器中得到特殊处理。我猜到目前为止，没有人费心修复这个错误，因为没有人使用`for`循环，正是因为它们将变量泄漏到周围的范围中，并且*完全*等同于没有的惯用语`each`。

“泄漏变量”是什么意思？看这里：

```
(1..2).each do |i|
  t = true
end

i
# NameError: undefined local variable or method `i' for main:Object

t
# NameError: undefined local variable or method `t' for main:Object

for i in 1..2
  t = true
end

i
# => 2

t
# => true 
```

# c# - 覆盖外部程序/进程的SaveAs方法

> ID：12495482
> 
> 赞同：2
> 
> 时间：2012-09-19T13:13:51.203
> 
> 标签：c#, overriding

方案理念：

我正在 C-Sharp .NET-4 中开发 WinForm 应用程序，这将允许我将带有文件和子文件夹的文件夹导入 MySQL 数据库，并在类似资源管理器的 Treeview 集中显示这些文件和文件夹和列表显示。通过双击列表视图中的文件名，该文件将使用默认程序打开。

该软件的主要目标是成为多用户项目经理。

问题：

打开文件后，它就在我的程序之外。我无法控制外国程序。

问题：

有没有办法覆盖/控制例如这种外国 Proram 的 SaveAs-Method 以在我的条件下保存文件，例如将它们保存回我的数据库而不是文件系统。

我很感激任何答案。

# mysql - 二进制日志 MySQL

> ID：12495485
> 
> 赞同：0
> 
> 时间：2012-09-19T13:14:01.230
> 
> 标签：mysql, backup, database-backups, binary-log

我有一些来自本地主机的二进制日志文件，但是当我写

```
 mysqlbinlog mysql-bin.000001 > statament.sql 
```

或者它只是返回乱码的文本文件，即

```
 /*!40019 SET @@session.max_insert_delayed_threads=0*/;
    /*!50003 SET @OLD_COMPLETION_TYPE=@@COMPLETION_TYPE,COMPLETION_TYPE=0*/;
    DELIMITER /*!*/;
    # at 4
    #120919 11:08:54 server id 1  end_log_pos 106   Start: binlog v 4, server v 5.1.33-        community-log created 120919 11:08:54 at startup
    ROLLBACK/*!*/;
    BINLOG '
    potZUA8BAAAAZgAAAGoAAAAAAAQANS4xLjMzLWNvbW11bml0eS1sb2cAAAAAAAAAAAAAAAAAAAAA
    AAAAAAAAAAAAAAAAAACmi1lQEzgNAAgAEgAEBAQEEgAAUwAEGggAAAAICAgC
    '/*!*/;
    # at 106
    #120919 11:26:07 server id 1  end_log_pos 125   Stop
    DELIMITER ;
    # End of log file
    ROLLBACK /* added by mysqlbinlog */;
    /*!50003 SET COMPLETION_TYPE=@OLD_COMPLETION_TYPE*/; 
```

所以这主要是困扰......我没有设置奴隶......知道我做错了什么吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-31T16:43:24.900

MySQL二进制日志定义为以二进制形式记录数据操作，以节省处理时间和空间。因此，当您检查它们时，您应该向客户端添加`--base64-output=decode-rows`选项以`mysqlbinlog`解码输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-03T11:16:13.893

你可以使用这个：

```
mysqlbinlog --no-defaults --base64-output=decode-rows -v mysql-bin.000001 > statament.sql 
```

代替 `--no-defaults --base64-output=decode-row -v`

# dom - 带有 jsoup 的 HTML Dom

> ID：12495499
> 
> 赞同：1
> 
> 时间：2012-09-19T13:14:33.720
> 
> 标签：dom, jsoup

我有这个 html 代码（长 html 代码的一部分）：

```
<div class="yt-lockup-content">
<h3 class="yt-lockup-ellipsize">
    <a class="yt-uix-contextlink yt-uix-sessionlink yt-uix-tile-link result-item-translation-title"dir="ltr"title="Rihanna ft. Calvin Harris - We Found Love LYRICS"data-sessionlink="ved=CAoQvxs%3D&amp;ei=CPLZjMDLwbICFUag3wod7Dm-pw%3D%3D"href="***/watch?v=1KzEu5hWmRY***">Rihanna ft. Calvin Harris - We Found Love LYRICS</a></h3><p class="description " dir="ltr">
        <b>bla</b> ft. Calvin Harris - 
        <b>bla</b> 
        bla bla
        <b>bla bla bla</b> 
        <b>...</b>
        </p><div class="yt-lockup-meta">    
        <ul class="single-line-lego-list">
      <li>    <a href="/results?search_type=videos&amp;search_query=rihanna+we+found+love&amp;high_definition=1" class="yt-badge-std">HD
      </a> 
</h3> 
```

我想得到这个文本：href=/watch?v=1KzEu5hWmRY（粗体文本）。我知道如何获得所有线路，但我怎样才能抓住这个文本？谢谢，或者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:07:23.457

这是一个例子：

```
String html = // your html here ...

Document doc = Jsoup.parse(html);

Element element = doc.select("h3[class=yt-lockup-ellipsize] > a").first();
String hrefLink = element.attr("href"); 
```

但是，如果你想解析一个网站，你应该使用`Jsoup.connect("http://link.com").get()`而不是`Jsoup.parse(html)`

# excel - 如何将字符串转换为日期

> ID：12495504
> 
> 赞同：1
> 
> 时间：2012-09-19T13:14:43.740
> 
> 标签：excel, vba

我正在尝试将字符串转换为日期

```
a = Datumo: 16.09.2012.

d = Mid(a, 9, 2) ' 16 - should be the day
m = Mid(a, 12, 2) ' 09 - month
y = Mid(a, 15, 4) ' 2012 - year

Dim dt As Date 
dt = DateValue(d, m, y) ' Error line 
dt = DateAdd("d", 1, dt) ' should be 17.09.2012. 
```

请问我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:23:40.580

那不是正确使用`DateValue`，替换

```
dt = DateValue(d, m, y) ' Error line 
dt = DateAdd("d", 1, dt) ' should be 17.09.2012. 
```

和

```
dt = DateSerial(y, m, d) 
dt = DateAdd("d", 1, dt) 
```

或者

```
dt = 1 + DateAdd("d", 1, dt) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:19:12.747

看`DatePart`功能；）

来自 excel-帮助：

```
Dim Datum1 As Date    ' Variablen deklarieren.
Dim Msg
Datum1 = InputBox("Geben Sie ein Datum ein:")
Msg = "Quartal: " & DatePart("q", Datum1)
MsgBox Msg 
```

还有一些特定的功能可以检索有效日期的部分内容：

```
Day()
Month()
Year() 
```

来自 excel-help 的示例：

```
Dim Datum1, Tag1
Datum1 = #12\. Februar 1969#    ' Datum zuweisen.
Tag1 = Day(Datum1)    ' Tag1 enthält 12. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:50:31.893

VBA/Excel 经常会尝试确定日期并弄错。

例如

```
dt = DateSerial(2012, 14, 42) 'returns #14/03/2013#

dtReal = IsDate("09 / 14 / 2012") 'returns TRUE when we really wanted to test dd/mm/yyyy - there's no 14th month. 
```

我经常使用下面的代码，它是一种更长但万无一失的确定字符串日期是否真实并将其作为日期返回的方法。

```
Option Explicit

    Sub test()
    Dim testDate As Boolean
    Dim dt As Date

    testDate = IsTextDate("05/07/2012", dt, "dd/mm/yyyy") 'Could pass "mm/dd/yyyy" instead
    If testDate = True Then
        Debug.Print "Valid Date " & Format(dt, "dd-mmm-yyyy")
    Else
        Debug.Print "Invalid Date"
    End If
    End Sub

    Function IsTextDate(ByVal str As String, ByRef dt As Date, Optional dtFormat As String = "dd/mm/yyyy") As Boolean
    Dim D As Date
    Dim day As Integer
    Dim month As Integer
    Dim year As Long
    Dim daysinFeb As Integer
    Dim dtArray() As String

    'Test input string mask matches date format
    If Not (str Like "##/##/####") Then
        'Debug.Print "Invalid Date"
        Exit Function
    Else
        'split string on delimiter and extract correct 'dd' and 'mm' based on UK/US format
        dtArray = Split(str, "/")
        year = CInt(dtArray(2))
        If dtFormat = "dd/mm/yyyy" Then
            day = CInt(dtArray(0))
            month = CInt(dtArray(1))
        Else
            day = CInt(dtArray(1))
            month = CInt(dtArray(0))
        End If

        'determine days in Feb for year given.
        If IsDate("2/29/" & year) Then
            daysinFeb = 29
        Else
            daysinFeb = 28
        End If

        'determine if date is valid
        Select Case month
            Case 9, 4, 6, 11
                '30 days
                If day <= 30 Then IsTextDate = True

            Case 1, 3, 5, 7, 8, 10, 12
                '31 days
                If day <= 31 Then IsTextDate = True

            Case 2
                'either 28 or 19 days
                If day <= daysinFeb Then IsTextDate = True

        End Select
        If IsTextDate Then dt = DateSerial(year, month, day)

    End If

    End Function 
```

# c# - 检查 DataGridView 单元格值（字母或数字）

> ID：12495505
> 
> 赞同：0
> 
> 时间：2012-09-19T13:14:44.780
> 
> 标签：c#, winforms, visual-studio-2008, datagridview

如何**检查数据网格视图所选单元格中的值是字母还是数字？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:16:46.433

您可以使用`Regex`

```
 var input = ...;//Your cell content 
  var patternAlphabetic = @"([a-zA-Z])+";
  var patternNumeric = @"([0-9])+";

  var regex = new Regex(patternAlphabetic);
  var match = regex.Match(input);
  if (match.Success) 
  {
       System.Console.WriteLine("Alphabetic");
  }

   ..... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T14:35:32.690

您可以使用 typeof 运算符，如下代码：

```
 if ( typeof (Int32) == dataGridView1.SelectedCells[0].Value.GetType())
        {
            MessageBox.Show( "DataGridView Cell Value is Numeric" );
        }
        else if (typeof(string) == dataGridView1.SelectedCells[0].Value.GetType())
        {
            MessageBox.Show("DataGridView Cell Value is Alphabetic ");
        } 
```

# .htaccess - .htaccess 未屏蔽/强制通配符子域重定向

> ID：12495508
> 
> 赞同：0
> 
> 时间：2012-09-19T13:14:53.143
> 
> 标签：.htaccess, mod-rewrite, redirect, wildcard-subdomain

我想编辑 .htaccess 文件以创建所有子域到主 www 子域的未屏蔽通配符重定向。

即 *.domain.com => www.domain.com

例如 www.example.domain.com => www.domain.com

当人们在浏览器地址栏中键入 www.example.domain.com 时，我希望它重定向未屏蔽，以便 URL 实际上明显更改为 www.domain.com。

我目前的 .htaccess 文件（如下所示）强制所有“无 www”流量的“www”，即`http://domain.com`变为`http://www.domain.com`，但无法弄清楚要用于上述要求的 RewriteCond 等命令。

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^domain.com$
RewriteRule ^(.*)$ "http\:\/\/www\.domain\.com\/$1" [R=301,L] 
```

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:22:32.437

让你的 .htaccess 像这样：

```
RewriteEngine on
RewriteBase /

RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L]

RewriteCond %{HTTP_HOST} ^[^.]+\.[^.]+\.domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:24:14.700

很简单，试试：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.domain\.com$
RewriteRule ^(.*)$ http://www.domain.com/$1 [L,QSA,R=301] 
```

您也不需要添加 www 的规则，因此只需将其删除。

# php - mail(): SMTP server response: 550 The address is not valid error on hmailserver

> ID：12495509
> 
> 赞同：1
> 
> 时间：2012-09-19T13:14:58.667
> 
> 标签：php, smtp, hmail-server

尽管将 php.ini 配置为有效的 send_from 地址，但我收到此错误。我知道它是有效的，因为当我从 squirrel 邮件发送它时它可以工作，但是当用 php 发送邮件时它就不起作用了。无效地址大概是指 send_from 地址。所以我看不出它怎么会认为这是错误的。这是php代码：

```
$email="tobiasvogel1@googlemail.com";
$subject = "Your New Password";
$from="admin@dayshare.local";
$message = "Your new password is as follows:

xxxxxxxxxxxxxxxxxxxxxxxxxxx

This email was automatically generated.";

      if(!mail($email, $subject,$message,$from)){
         echo ("error");
      }else echo "success"; 
```

在 php.ini 中：

```
SMTP = localhost

sendmail_from = admin@dayshare.local 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:38:41.973

> **550 不允许送货到这个地址**
> 
> 此错误表示发件人正在尝试将电子邮件发送到不允许发送到的地址。此消息在 hMailServer 检查 IP 范围设置后生成。例如，默认 IP 范围配置不允许外部用户向其他外部用户发送消息。这是为了防止人们使用您的服务器发送垃圾邮件。因此，如果外部用户尝试向另一个外部用户发送消息，他将收到此消息。

这就是您得到的错误的含义。这来自[hMailServer 文档](http://www.hmailserver.com/documentation/latest/?page=reference_error_messages_smtp)。

您可以尝试以下方法是否有效吗？

```
<?php
mail('tobiasvogel1@googlemail.com','Test Email','This is a test email.',"From: tobiasvogel1@googlemail.com");
?> 
```

如果它不起作用，则可能是由于您的 hMailServer 配置错误，您需要检查您的[hMailServer Logs](http://www.hmailserver.com/documentation/latest/?page=reference_logging)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:24:19.233

[mail()](http://www.php.net/mail)函数的第四个参数不是普通的“来自”。在您的代码中，您只传递没有“发件人：”的电子邮件地址 - 第四个参数用于附加邮件标题，因此您必须将其格式化如下：

```
mail($email, $subject,$message,"From: admin@dayshare.local\r\nX-Mailer: PHP"); 
```

我添加了另一个标题作为示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-19T14:33:05.237

试试这个，对我有用：

```
ini_set("sendmail_from", "info@yourdomain.com"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T13:16:15.417

您需要引号和分号：

```
$email="tobiasvogel1@googlemail.com"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-16T22:06:31.860

# 这是另一个解决方案 - [WAMP 使用 SMTP localhost 发送邮件](https://stackoverflow.com/questions/16830673/wamp-send-mail-using-smtp-localhost)

请记住，每次更改 php.ini 后，

# 你必须重新启动 wamp (! ! !)

ps 在 php.ini 中，我使用过：

```
SMTP = localhost 
smtp_port = 25 
sendmail_from = your_user@gmail.com 
```

或者如果 oyu 无法编辑 php.ini，请尝试在您的 php 脚本中插入这些行。

```
ini_set("SMTP", "localhost");
ini_set("smtp_port", "25");
ini_set("sendmail_from", "your_user@gmail.com"); 
```

# c++ - vptr 是否曾经不在对象的开头？

> ID：12495510
> 
> 赞同：3
> 
> 时间：2012-09-19T13:15:03.800
> 
> 标签：c++, visual-c++, rtti, virtual-functions, dynamic-cast

根据 MSDN，[__RTDynamicCast() 函数](http://msdn.microsoft.com/en-us/library/ff770587.aspx)用于`dynamic_cast`在 Visual C++ 中实现。它的参数之一是`LONG VfDelta`被描述为“对象中虚函数指针的偏移量”。

AFAIK`vptr`始终位于对象的开头，因此偏移量将始终为零。我仔细研究了各种代码片段的反汇编使用`dynamic_cast`，我从来没有见过除了零被传递来代替这个参数的任何东西。

除了对象开始之外，是否`vptr`曾经位于任何地方？这个偏移量可以不为零吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:17:56.097

在多重继承的情况下，有多个继承`vptr`，您需要`offset`. 看看这里：[http ://hacksoflife.blogspot.com/2007/02/c-objects-part-3-multiple-inheritance.html](http://hacksoflife.blogspot.com/2007/02/c-objects-part-3-multiple-inheritance.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:19:33.380

我不知道微软做了什么，但 vtable 指针位于偏移量零处并不总是正确的。可能不是多重继承的一个例子（尤其是在涉及虚拟基类的情况下）。

编辑：

我将通过示例对此进行一些扩展。

如果第一个基类或类没有 vtbl，则派生类在偏移量 0 处将没有 vtbl 指针（这种继承是不好的做法，但语言允许）。

如果有虚基，派生类通常会有一个指向偏移 0 处的虚基的指针，而不是 vtbl 指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:28:09.733

当虚拟继承退出时使用此功能（想想菱形继承图）。这个偏移量是类本身在对象内部的偏移量。

如果 B 和 C 源自 A，而 D 源自两者。

```
 A
 /   \
B     C
 \   /
   D 
```

然后 B 和 C 可以在 D 中按任意顺序排列。这就是偏移量起作用的地方。因此，当您将 A 类型的对象动态转换为 B 类型时，它可能会有所不同，具体取决于实例是 B 类型还是 D 类型。

最后说明一下，这里是不同类的可能布局

```
Class B:  Class C:   class D:
 | A |      | A |     | A |
 | B |      | C |     | C |
                      | B |
                      | D | 
```

在这种情况下，B的虚函数表的偏移量可以是0（B实例情况），也可以是sizeof（A）+sizeof（C）（D实例情况）

# opengl - 三角形是 gpu 限制还是有其他渲染路径？

> ID：12495511
> 
> 赞同：9
> 
> 时间：2012-09-19T13:15:06.107
> 
> 标签：opengl, graphics, directx, driver, gpu

作为这个问题的序言，我对 OpenGL 及其背后的数学有充分的了解，虽然我从未接触过与 DirectX 相关的任何东西，但我想这些概念是相似的。

有很多关于为什么三角形用于 3D 图形的信息（它们必须是平面的，除了分成更小的三角形外，它们是不可分割的，等等）。但是，我想知道三角形是否只是一种存储和操作 3D 数据的便捷方式（关于插值等的更简单的数学运算），或者显卡中是否存在硬件限制，只能实际允许渲染三角形（例如基本上只能应用于三角形的指令）。

在此之后，有没有什么方法可以实现图形渲染的逐像素控制（正如[这个问题](https://stackoverflow.com/questions/4887235/inner-workings-of-c-graphics-libraries "C++ 图形库的内部工作原理")的答案所简要概述的那样）。虽然我很欣赏通过驱动程序对单个像素进行直接控制，但有什么方法可以让我对渲染环境进行这种控制？有没有完全“避免三角形”？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-19T13:22:10.767

是和不是。有点儿。

当前的 GPU 旨在渲染三角形，因为三角形很好用。而且*由于*当前的 GPU 设计用于处理三角形，人们使用三角形，因此 GPU 只需要处理三角形，因此它们被设计为只处理三角形。

正如您所说，三角形只是具有使它们易于使用的优点。*可以*制造（并且*已经*制造） GPU来原生渲染其他基元，但这并不值得。如果你告诉现代 GPU 渲染一个四边形，它会将它分成两个三角形并渲染它们。

不是因为 GPU 无法原生渲染四边形有技术原因，而是因为*不值得在*. 将 GPU 集中在尽可能快地完成三角形上，然后在需要时模拟其他基元会更有用。

所以，是的，现代 GPU 有硬件限制，因此它们不能与四边形一起工作，但并不是因为不可能设计出与四边形一起工作的 GPU。这样做只会降低效率。:)

至于“避免三角形”，当然，这基本上就是片段着色器所做的：它填充一个像素。GPU 只需并行运行几百万次即可填满整个屏幕。您可以绘制两个大三角形，形成一个填充整个屏幕的四边形，然后只需指定一个片段着色器，用您喜欢的内容填充它。

如果您想对过程进行更多控制，请改为在软件中进行：一次将一个像素绘制到内存表面，然后将其作为纹理加载到 GPU 上。但它很慢。:)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-01-27T21:12:58.440

据我所知，每个现代 CAN 渲染四边形甚至 N 边形，但将四边形的渲染时间与 2 个三角形进行比较显示了三角形的优势。这主要是因为 GPU 已针对渲染三角形进行了优化，并且实际硬件具有比其他（例如纹理）更多的“蒸汽处理器”（用于三角形）。GPU 上的其他一些处理器类型可以直接渲染四边形，但通常你会发现几个纹理处理器会产生一千个蒸汽。请注意，让一个纹理单元渲染一个四边形是非常困难的。理论上这是可能的，但没有人将 pricip 用于严重病例。

除非您使用非常接近硬件的操作，否则软件会处理三角形（例如，从四边形自动转换它们）

# php - php yii 在 actionCreate 上向表单发送错误

> ID：12495514
> 
> 赞同：1
> 
> 时间：2012-09-19T13:15:08.213
> 
> 标签：php, forms, error-handling, yii

我有以下用于创建新记录的表格

```
<?php
/* @var $this ComponentsController */
/* @var $model Components */
/* @var $form CActiveForm */
?>

<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'components-form',
    'enableAjaxValidation'=>false,
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'component_id'); ?>
        <?php echo $form->textField($model,'component_id'); ?>
        <?php echo $form->error($model,'component_id'); ?>
    </div>

    <div class="row">
        <label class="required" for="FixedAsset_original_asset_number">
            Asset Number
        </label>
        <input id="Components_original_asset_number" type="text" name="Components[original_asset_number]">
        <?php //echo Chtml::textField('fixed_asset_id', FixedAsset::model()->FindByPk($model2->fixed_asset_id)->fixed_asset_id); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'description'); ?>
        <?php echo $form->textField($model,'description',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'description'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'manufacturer'); ?>
        <?php //echo $form->textField($model,'manufacturer'); ?>
        <?php   $manufacturer = Manufacturers::model()->findAll(array("order"=>"name"));
                $list = CHtml::listData($manufacturer, 'manufacturer_id', 'name');
                echo $form->dropDownList($model,'manufacturer', $list,array()); 
        ?>
        <?php echo $form->error($model,'manufacturer'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'medium'); ?>
        <?php //echo $form->textField($model,'medium'); ?>
        <?php   $medium = Medium::model()->findAll();
                $list = CHtml::listData($medium, 'medium_id', 'type');
                echo $form->dropDownList($model,'medium', $list,array()); 
        ?>
        <?php echo $form->error($model,'medium'); ?>

    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'version'); ?>
        <?php echo $form->textField($model,'version',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'version'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'serial_no'); ?>
        <?php echo $form->textField($model,'serial_no',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'serial_no'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'purchase_date'); ?>
        <?php //echo $form->textField($model,'purchase_date'); ?>
        <?php 
        $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'id'=>'Components_purchase_date',
                'name'=>'Components[purchase_date]',
                //'value'=>CTimestamp::formatDate('d/m/Y',$item->validFrom),
                // additional javascript options for the date picker plugin
                'options'=>array(
                        'showAnim'=>'fold',
                        'dateFormat'=>'yy-mm-dd',

                ),
                'htmlOptions'=>array(
                        'style'=>'height:20px;'
                ),
        ));

        ?>
        <?php echo $form->error($model,'purchase_date'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'disposal_date'); ?>
        <?php //echo $form->textField($model,'disposal_date'); ?>
        <?php 
        $this->widget('zii.widgets.jui.CJuiDatePicker', array(
                'id'=>'Components_disposal_date',
                'name'=>'Components[disposal_date]',
                //'value'=>CTimestamp::formatDate('d/m/Y',$item->validFrom),
                // additional javascript options for the date picker plugin
                'options'=>array(
                        'showAnim'=>'fold',
                        'dateFormat'=>'yy-mm-dd',

                ),
                'htmlOptions'=>array(
                        'style'=>'height:20px;'
                ),
        ));
        ?>
        <?php echo $form->error($model,'disposal_date'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'model'); ?>
        <?php echo $form->textField($model,'model',array('size'=>60,'maxlength'=>255)); ?>
        <?php echo $form->error($model,'model'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'nol'); ?>
        <?php echo $form->textField($model,'nol'); ?>
        <?php echo $form->error($model,'nol'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save'); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form --> 
```

`Components_original_asset_number`我想向表单上的字段发送错误。我将如何实现这一目标。在控制器功能中，我正在检查它是否存在，如果不存在，我想在表单或消息上显示错误。`original asset number`是我在此表单上显示的单独模型的一部分。

```
public function actionCreate()
{
    $model = new Components;
    $model_fixedAsset = new FixedAsset;
    $model_comAsset = new ComAsset;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['Components']))
    {
        $model->attributes=$_POST['Components'];
        $fixedAssetId = null;

        // Check if asset exist and get PK
        if( $_POST['Components']['original_asset_number'] != "" ){
            //print_r($_POST['Components']);
            $criteria = new CDbCriteria;
            $criteria->condition = "(original_asset_number = :original_asset_number)";
            $criteria->params = array(":original_asset_number" =>  $_POST['Components']['original_asset_number'] );
            $fixedAssetRow = FixedAsset::model()->find($criteria);
            //print_r($fixedAssetRow);
            if($fixedAssetRow){
                $fixedAssetId = $fixedAssetRow->fixed_asset_id;
            }
            //echo $fixedAssetId;
        }

        if($fixedAssetId){

        /*if($model->save())
            $this->redirect(array('view','id'=>$model->component_id));*/

        // Create com_asset record

        }else{
            //no asset found return error message to input corect asset number or create asset in navision and run php script to update mysql db
        }
    }

    $this->render('create',array(
        'model'=>$model,
        'model_fixedAsset'=>$model_fixedAsset,
        'model_comAsset'=>$model_comAsset,
    ));
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T03:30:19.727

您应该在模型中添加“original_asset_number”作为变量并设置所需的验证规则。然后您可以使用以下行来设置错误

```
$model->addError('original_asset_number', " no asset found return error message to input corect asset number or create asset in navision and run php script to update mysql  "); 
```

此外，您使用以下方式显示字段和错误。

```
<?php echo $form->errorSummary($model); ?> 
```

或者

```
 <div class="row">
    <?php echo $form->labelEx($model,'original_asset_number'); ?>
    <?php echo $form->textField($model,'original_asset_number',array('size'=>60,'maxlength'=>255)); ?>
    <?php echo $form->error($model,'original_asset_number'); ?>
</div> 
```

# javascript - 将现有 div 移动到 HTML 正文

> ID：12495516
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:15:10.243
> 
> 标签：javascript, jquery, html

我想将另一个内部的现有 div 移动到 HTML 正文。例如我有：

```
<body><div1><div2>blah</div2></div1></body> 
```

我想让它：

```
<body><div1></div1><div2>blah</div2></body> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:19:40.230

```
$('div2').appendTo('body'); 
```

（当然，您必须将 div2 更改为适当的选择器）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:22:08.093

给你的 div 一些 ID：

```
<body>
    <div id="one">
        <div id="two">
        </div>
    </div>
</body> 
```

然后使用 appendTo

```
$('#two').appendTo('body'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:20:37.870

使用 remove 和 append 的某种组合来实现你的输出。

[jQuery 删除方法](http://api.jquery.com/remove/)

[jQuery 追加方法](http://api.jquery.com/append/)

# jquery-mobile - 使用 jQuery Mobile 向 Ajax 页面添加重新加载按钮

> ID：12495517
> 
> 赞同：0
> 
> 时间：2012-09-19T13:15:10.370
> 
> 标签：jquery-mobile

在一个 jQuery Mobile 应用程序中，我使用 Ajax 加载具有动态内容的页面。现在，我想在该页面上添加一个“重新加载”按钮。

考虑`index.html`：

```
<div data-role="page" id="home">
  <div data-role="header"><h1>Home</h1></div>
  <div data-role="content"><a href="time.php">Time</a></div>
</div> 
```

并且`time.php`：

```
<div data-role="page" data-add-back-btn="true" id="time">
  <div data-role="header"><h1>Time</h1></div>
  <div data-role="content">
     <p><?= date(DATE_RFC822)?></p>
     <a href="#" data-role="button" data-icon="refresh">Reload</a>
  </div>
</div> 
```

我现在可以在“主页”和“时间”页面之间来回导航，到达“时间”页面时时间会更新，但我希望“重新加载”按钮重新加载“时间”页面。也就是说：它应该对 进行 Ajax 请求`time.php`，并从响应中重新创建“时间”页面（同时显示“页面加载”指示器）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:40:40.950

在查看了的代码后`changePage`，`loadPage`我想出了一个更简单的解决方案：

```
$('.reload').live('click', function(e) {
  $.mobile.changePage($.mobile.activePage.jqmData('url'), {
    reloadPage: true,
    changeHash: false,
    transition: 'none'
  });
  e.preventDefault();
}); 
```

请注意，JQM 仍然会在旧版本页面和新版本之间转换；最好**不要**使用方向感强的过渡（如“幻灯片”）。

这`preventDefault`似乎不是绝对必要的，但我添加它是为了很好的衡量标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:48:54.010

使用 hijax 样式的链接时，这似乎是不可能的。但是，您可以使用多页 HTML 文档并在`pagebeforechange`事件中自己加载动态页面内容。

所以在 中`index.html`，我已经添加了内容为空的“时间”页面：

```
<div data-role="page" id="home"> 
  <div data-role="header"><h1>Home</h1></div> 
  <div data-role="content"><a href="#time">Time</a></div> 
</div> 

<div data-role="page" data-add-back-btn="true" id="time"> 
  <div data-role="header"> 
    <h1>Time</h1> 
    <a href="#" class="reload ui-btn-right" data-role="button" data-icon="refresh">Reload</a> 
  </div> 
  <div data-role="content"></div> 
</div> 
```

接下来，我拦截`pagebeforechange`事件：如果是“时间”页面，我们将从 URL 加载页面内容`time.php`。

```
$(document).bind('pagebeforechange', function(e, data) {
    if(typeof data.toPage == 'string') {
        var u = $.mobile.path.parseUrl(data.toPage);
        if(u.hash == "#time") {
            loadPageContent($('#time'), 'time.php', data.options);
            e.preventDefault();
        }
    }
}); 
```

由于我想在更改页面之前等待 Ajax 请求返回，因此我阻止了页面更改；`loadPageContent`将不得不这样做。

`loadPageContent`我可以为“重新加载”按钮做类似的事情：

```
$(document).ready(function() {
    $('#time .reload').bind('click', function(e) {
        loadPageContent($('#time'), 'time.php', undefined, $(e.target).closest(".ui-btn"));
    });
}); 
```

这是代码`loadPageContent`：

```
function loadPageContent(page, url, options, button) {
    if(typeof button != "undefined")
        button.addClass($.mobile.activeBtnClass);
    $.mobile.showPageLoadingMsg($.mobile.loadingMessageTheme, $.mobile.loadingMessage, $.mobile.loadingMessageTextVisible);
    var content = page.children(':jqmData(role=content)');
    content.load(url, function(response, status, xhr) {
        if(status == "success") {
            page.page();
            content.trigger('create');
            $.mobile.hidePageLoadingMsg();
            if(typeof button != "undefined")
                button.removeClass($.mobile.activeBtnClass);
            $.mobile.changePage(page, options);
        } else {
            $.mobile.hidePageLoadingMsg();
            $.mobile.showPageLoadingMsg($.mobile.pageLoadErrorMessageTheme, $.mobile.pageLoadErrorMessage, true);
            setTimeout(function() {
                $.mobile.hidePageLoadingMsg();
                if(typeof button != "undefined")
                    button.removeClass($.mobile.activeBtnClass);
            }, 1000);
        }
    });
} 
```

这已经是一个相当精致的版本了：它会显示页面加载消息，并且在请求失败时会显示 1s 的错误消息。在成功请求结束时，它将使用`create`触发器增强内容，并进行页面更改。如果传递了重新加载按钮，它将在操作进行时将此按钮标记为活动。

# c# - 使用c#实现activeX控件以在Windows窗体中查看PowerPoint幻灯片，不显示控件

> ID：12495519
> 
> 赞同：2
> 
> 时间：2012-09-19T13:15:16.407
> 
> 标签：c#, .net, forms, activex, powerpoint

我正在做一个项目，我需要在 Windows 窗体中嵌入一个 PowerPoint 查看器。我正在使用以下 activeX 控件：[http](http://www.daolnwod.com/free-powerpoint-viewer-activex.html) ://www.daolnwod.com/free-powerpoint-viewer-activex.html 。

我激活了要与表单设计器工具箱一起使用的控件并将其拖到我的表单中。然后我将 InitializeComponent() 方法中的代码编辑为以下内容：

```
this.axPowerPointViewer1 = new AxPOWERPOINTVIEWERLib.AxPowerPointViewer();

((System.ComponentModel.ISupportInitialize)(this.axPowerPointViewer1)).BeginInit();
this.axPowerPointViewer1.Enabled = true;
this.axPowerPointViewer1.Location = new System.Drawing.Point(0, 0);
this.axPowerPointViewer1.Name = "axPowerPointViewer1";
this.axPowerPointViewer1.OcxState = ((System.Windows.Forms.AxHost.State)(resources.GetObject("axPowerPointViewer1.OcxState")));
this.axPowerPointViewer1.Size = new System.Drawing.Size(925, 573);
this.axPowerPointViewer1.TabIndex = 5;
//this.axPowerPointViewer1.CreateControl();
this.Controls.Add(this.axPowerPointViewer1);
((System.ComponentModel.ISupportInitialize)(this.axPowerPointViewer1)).EndInit(); 
```

在我的 Forms 构造函数中

```
public Form1()
{
    InitializeComponent();

    axPowerPointViewer1.Show();
    bool loaded = axPowerPointViewer1.LoadFile(@"C:\Debug\test2.ppt"); // loaded = false

    string z = axPowerPointViewer1.GetSlideCount().ToString();
} 
```

但是，当我打开表单时，什么都没有出现。代码可以编译，但我看不到我一直在处理的测试幻灯片。我为“上一张”和“下一张”幻灯片创建了 2 个按钮，但调试每次都会给我一个 0 的幻灯片位置，所以一定有问题，我似乎找不到它。

* * *

**更新**

问题已解决。看来我没有调用 axPowerPointviewer1.InitControl()。它仍然有一些麻烦，有时它不会在启动时显示第一张幻灯片。如果事情继续顺利进行，我会发布这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:48:39.540

问题在于初始化控件。为了使控件充分发挥作用，您需要调用 InitControl() 方法，因此调用以下代码应该可以使程序正常工作：

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.axPowerPointViewer1.InitControl();
    } 
```

# javascript - Hashtag 导致页面滚动到顶部

> ID：12495522
> 
> 赞同：0
> 
> 时间：2012-09-19T13:15:26.133
> 
> 标签：javascript, jquery, html, fancybox, hashtag

我的 fancybox 脚本中包含以下脚本：

```
beforeShow: function () {
    var id = this.element.attr("id")
    if (id) {
        window.location.hash = id;
    }
},                  
beforeClose: function() {
    window.location.hash = "";
} 
```

基本上如果我用fancybox打开一个图像，url会变成/#image，当fancybox窗口关闭时，url会变成/#。但是当这种情况发生时，页面会滚动回顶部。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:19:45.673

您可以存储以前的值：

```
var scroll = $(window).scrollTop();
// change hash to #
$(window).scrollTop(scroll); 
```

# css - Firefox 浮动 div 导致表格浮动到其容器外

> ID：12495524
> 
> 赞同：2
> 
> 时间：2012-09-19T13:15:28.127
> 
> 标签：css, firefox, containers

我在另一个 div（宽度 1000px）内将一个浮动标题 div 设置为 1000px，然后是一个宽度较小的 div。问题是这个 div 中的这个表在标题的左边。如果我在表格上方添加一些字符，就可以了。这是一个错误吗？这在 IE 和 Google Chrome 中运行良好。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
    <style>
        #container
        {
            margin: 0px auto;
            width: 1000px;
        }
        #header
        {
            margin-top: 15px;
            width: 1000px;
            float: left;
        }
    </style>
</head>
<body>
    <div id="container">
        <div id="header">
            aaa
        </div>
        <div style="width: 900px;">
            <table>
                <tr>
                    <td>
                        the wow
                    </td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:34:49.450

问题不清楚。如果您想要在标题下方显示表格，只需取出

> 向左飘浮;

请明确你想要什么。

# ipad - ie7 和 ipad 上的点赞和发送按钮问题

> ID：12495528
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:15:38.910
> 
> 标签：ipad, button, internet-explorer-7, facebook-like, send

我是法国网络开发人员，我有 2 个错误要修复我的网站，希望您能提供帮助...我在我的网站上有点赞按钮、发送按钮和评论。

这两个问题是：

1.  在 IE7 中，facebook like ans send 按钮无法正确显示，它的按钮宽度为 15px。
2.  在 iPad 上，当我单击按钮时，按钮会消失。

我尝试了您提出的所有代码，但没有任何效果。

感谢您的关注和帮助，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T19:57:38.450

给定的示例代码对我有用。只要你添加 // becore connect.facebook

测试页面：http: [//jsbin.com/igikap/1/edit](http://jsbin.com/igikap/1/edit)

IE7 中的结果： [http ://www.webpagetest.org/result/120920_11_JAR/](http://www.webpagetest.org/result/120920_11_JAR/)

# excel - Excel 2010 数据透视表中的移动日期期间筛选器

> ID：12495529
> 
> 赞同：2
> 
> 时间：2012-09-19T13:15:39.130
> 
> 标签：excel, ssas, pivot-table

是否可以为移动日期期间设置某种过滤器？

例如，我试图在我的数据透视表中复制的数据库视图之一有这个过滤器：

DATEDIFF(天, dateColumn, GETDATE()) <= 90

所以基本上我总是想显示多维数据集表中最近 90 天的 whataver 数据。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T10:10:25.440

这个问题的答案在这里：http: [//blogs.socha.com/2010/05/sliding-date-ranges-with-excel-2010.html](http://blogs.socha.com/2010/05/sliding-date-ranges-with-excel-2010.html)

以 30 天搬家为例：

1.  在绑定到多维数据集的数据透视表中选择一个单元格，以便可以使用数据透视表工具
2.  单击数据透视表工具部分下功能区上的选项选项卡：
3.  单击此功能区选项卡的“计算”部分中的“字段、项目和集”下拉菜单
4.  单击下拉菜单中的管理集...
5.  单击新建...，然后单击使用 MDX 创建集...
6.  在集名称文本框中输入此集的名称
7.  输入定义日期范围的 MDX 表达式
8.  点击确定

    ```
    Filter( 
    [Date].[Date].[Date], 
    [Date].[Date].CurrentMember.Member_Value < Now() 
    AND [Date].[Date].CurrentMember.Member_Value >= DateAdd("d", -30, VBA![Date]()) 
    ) 
    ```

# linux - 汇编：从标准输入读取整数，将其递增并打印到标准输出

> ID：12495530
> 
> 赞同：0
> 
> 时间：2012-09-19T13:15:38.907
> 
> 标签：linux, assembly, x86

我为 IA32 编写了以下汇编脚本。它应该从标准输入读取一个数字，将其递增并将其打印到标准输出，但它的行为不像预期的那样，它不打印任何东西（也许从标准输入的读取不会终止或打印有问题？）

```
.section .text
    .globl _start

_start:
    movl $3, %eax       # use syscall 3 (read) to read from stdin
    movl $0, %ebx       # reads from stdin (FD 0)
    movl %edi, %ecx    # store input in register %edi
    movl $4, %edx       # read one byte
    int  $0x80      # invoke system call to read from stdin

    incl %edi          # increment the value we got from stdin

    movl $4, %eax       # use syscall 4 (write) to print to screen
    movl $1, %ebx       # print to stdout (FD 1)
    movl %edi, %ecx    # pointer to text to write out
    movl $4, %edx       # length of text to write out (1 byte)
    int  $0x80          # invoke system call to write to stdout

    movl $1, %eax       # use syscall 1 (exit) to exit
    movl $0, %ebx       # error code = 0
    int  $0x80          # invoke system call 
```

你看到错误了吗？对于任何帮助，我提前感谢您，

一切顺利，西蒙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:30:49.420

```
movl %edi, %ecx    # store input in register %edi
movl $4, %edx       # read one byte 
```

这部分全错了。您不能将读取的结果存储在寄存器中。实际上所做的是将结果存储在 %edi 中包含的地址中，由于您没有设置它，因此可能是您没有业务存储任何内容的地方。您首先需要在内存中腾出空间来存储字符串。您还在读取四个字节而不是一个。

我会用这样的东西代替它

```
subl $4, %esp
movl %esp, %ecx
movl $4, %edx 
```

这将为堆栈上的 4 个字节腾出空间，然后使用堆栈顶部作为存储字符串的地址。您还必须修改 write 系统调用的参数以使用此地址。

您必须处理的另一个问题是 stdin 和 stdout 通常处理文本，因此您正在阅读的内容可能是字符串而不是数字，要将其用作数字，您必须将其转换并然后在你写出来之前把它转换回来。

# list - magento - 获取比较列表中的产品列表

> ID：12495531
> 
> 赞同：4
> 
> 时间：2012-09-19T13:15:41.570
> 
> 标签：list, magento, comparison, product

我需要获取比较列表中的产品列表

我在 phtml 中有这段代码，它什么也没做>

```
$collection = Mage::getModel('catalog/product_compare_list')->getCollection()->load();
                foreach($collection as $product) {
                   echo $product->getId().'<Br />';
                } 
```

任何建议哪里有问题？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:51:58.913

尝试使用`getItems()`比较列表块的方法（Mage_Catalog_Block_Product_Compare_List）：

```
$collection = $this->getLayout()->createBlock('catalog/product_compare_list')->getItems();
foreach($collection as $product) {
    echo $product->getId().'<Br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:21:19.280

使用此代码：

```
$collection = Mage::getModel('catalog/product_compare_list')->getItemCollection();
        foreach($collection as $product) {
           echo $product->getId().'<Br />';
        } 
```

这应该有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:21:56.040

```
$collection = Mage::getModel('catalog/product_compare_list')->getCollection();
            foreach($collection as $product) {
               echo $product->getId().'<Br />';
            } 
```

# c++ - 如何在不挂载设备的情况下以编程方式发现文件系统（如“fdisk -l”）

> ID：12495537
> 
> 赞同：2
> 
> 时间：2012-09-19T13:16:04.820
> 
> 标签：c++, system, call

我需要在 linux 中找到一个**系统调用来发现我的应用程序中连接的 pendrive 的文件系统。**我发现“fdisk -l”可以完成这项工作，但是我现在需要了解这是如何发生的。我无法发现阅读 fdisk 代码，唯一确定的是：

1.  不使用结构 statfs 或 statvfs；
2.  fdisk 不需要挂载设备来查找文件系统；

Obs：我的应用程序是用 C++ 编写的，并且在嵌入式 linux 系统中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:38:14.583

命令 fdisk -l 显示由**系统 ID**字节表示的文件系统。该字节位于主引导记录 (MBR) 内的分区表中。MBR 通常存储在第一个硬盘驱动器的第一个柱面上（尽管任何硬盘驱动器都可以有 MBR）。

我认为您可以简单地使用 open 和 read 系统调用从磁盘读取 MBR 假设运行您的程序的用户具有权限：

```
char buf[446];
int fd = open("/dev/hda", O_RDONLY);
read(fd, buf, 446); 
```

查看[MBR 格式](http://wiki.osdev.org/MBR_%28x86%29)，然后读出分区表以获取系统 ID 字节。这是系统 ID 字节[的类型列表。](http://www.win.tue.nl/~aeb/partitions/partition_types-1.html)

我只知道 Linux 上的 fdisk 是如何工作的，上次我检查它不支持 GPT 或任何其他分区格式。所以这个答案只与经典的 MBR 格式有关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T22:04:50.270

您可以使用[util-linux中的](ftp://ftp.kernel.org/pub/linux/utils/util-linux/)[libblkid](http://www.kernel.org/pub/linux/utils/util-linux/v2.22/libblkid-docs/index.html)来执行此操作。源分发包括一个示例，其中列出了指定设备上的分区，包括文件系统类型。

# vb.net - 通过所有者将相同的图标传递给所有 ShowDialogs

> ID：12495545
> 
> 赞同：0
> 
> 时间：2012-09-19T13:16:25.177
> 
> 标签：vb.net, winforms, icons

所以我有我所有的表格都使用的这个功能。在此功能中，我将当前表单设置为设置某个图标。

这一切都很好。

但我不知道如何将这个图标从“所有者”传递给所有 ShowDialog(Me)。

有没有一种我可以使用的方法来接管所有者图标？或者下次我必须更改 50 个 showdialogs 时有人有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:33:40.880

如果从基类继承对话框，则可以重写 ShowDialog(parent) 方法以将父级的图标分配给对话框。

# c# - 在中继器中访问父类属性

> ID：12495550
> 
> 赞同：0
> 
> 时间：2012-09-19T13:16:49.653
> 
> 标签：c#, javascript

这是交易，我得到了由转发器及其数据绑定生成的文档列表。在我的标记中，我得到了一个用于“li”标签的类，无论是否处于活动状态。

我只需要在选择文档时在我的链接按钮的 Li 父标签上设置 class="active" 。

```
 <asp:Repeater ID="Repeater1" runat="server">
        <HeaderTemplate>
            <ul>
        </HeaderTemplate>
        <ItemTemplate>
            <li>
                <asp:LinkButton ID="lnk" runat="server" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "Id") %>' OnCommand="Get_carte"><%# Container.FindControl("lnk").ClientID %> <%# DataBinder.Eval(Container.DataItem, "Name") %>  - <%# DataBinder.Eval(Container.DataItem, "id") %> - <%# DataBinder.Eval(Container.DataItem, "compteur") %></asp:LinkButton></li>
        </ItemTemplate> 
        <FooterTemplate>
            </ul>
        </FooterTemplate>
    </asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T08:18:30.620

我终于找到了解决我的问题的方法。

@Kapil：您的代码有效，但在重新加载 aspx 页面时遇到问题，然后我无法使用此方法。

@Aghilas：我的解决方案基于您的代码。

事实上，我不能使用 ItemDataBound 事件，因为我只绑定了 1 次中继器，然后我在链接按钮上使用了 OnCommand 事件。这是我的aspx代码：

```
 <asp:Repeater ID="Repeater1" runat="server" OnItemDataBound="Rpt_DataBound">
                <HeaderTemplate>
                    <ul>
                </HeaderTemplate>
                <ItemTemplate>
                    <li runat="server" ID="li">
                        <asp:LinkButton ID="lnk" class="linkButton" runat="server" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "Id") %>' OnCommand="Get_carte"><%# Container.FindControl("lnk").ClientID %> <%# DataBinder.Eval(Container.DataItem, "Name") %>  - <%# DataBinder.Eval(Container.DataItem, "id") %> - <%# DataBinder.Eval(Container.DataItem, "compteur") %></asp:LinkButton></li>
                </ItemTemplate> 
                <FooterTemplate>
                    </ul>
                </FooterTemplate>
            </asp:Repeater> 
```

还有我的 GetCarte 方法：

```
 protected void Get_carte(object sender, CommandEventArgs e)
    {
        LinkButton lnk = (LinkButton)sender;
        ViewState["liactive"] = lnk.UniqueID.ToString().Substring(0, lnk.UniqueID.ToString().Length - 4);
        lbl_carte.Text = lnk.UniqueID + " " + e.CommandArgument.ToString();
        foreach (RepeaterItem rI in Repeater1.Items)
        {
            if (rI.ItemType == ListItemType.Item || rI.ItemType == ListItemType.AlternatingItem)
            {
                string liactiv = "";
                if (ViewState["liactive"] != null)
                    liactiv = ViewState["liactive"].ToString();
                var li = (HtmlControl)rI.FindControl("li");
                if (li.UniqueID.ToString().Substring(0, li.UniqueID.ToString().Length - 3) == liactiv) //Adjust your condition
                    li.Attributes.Add("class", "active");
                else
                    li.Attributes.Remove("class");
            }
        }

    } 
```

谢谢你的帮助。

PS：我将 ID 放在 ViewState 中，以防在我的代码的另一部分中需要该值。我也可以用 lastindexof 方法替换我的子字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:22:21.247

代码背后 - C#：

您可以在您的 li 中添加`runat="server"`和`id=""`，以便在您的代码后面进行修改

```
void Repeater_ItemDataBound(Object Sender, RepeaterItemEventArgs e) 
{
       if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType == ListItemType.AlternatingItem) 
       {
         var li = (HtmlControl)e.Item.FindControl("IdOfYourLI");  
         if(condition) //Adjust your condition
         {
           li.Attributes.Add("class", "active");
         }
       }    
 } 
```

您还可以使用 JavaScript 进行修改：

你添加到`element id`使用`GetElementById`方法

```
youIdOfControlLI.className = 'active'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:44:56.940

使用 jQuery：

**[jsFiddle 工作链接](http://jsfiddle.net/XNfnB/)**

将**class="linkBut​​ton"**设置为您的 LinkBut​​tons。

```
 <asp:LinkButton ID="lnk" class="linkButton" /> 
```

使用以下 jQuery 代码在**li**上设置 Class ：

```
 $(function () {
            $(".linkButton").each(function (index) {
                $(this).on("click", function () {
                      $(".linkButton").each(function (index) {
                         $(this).closest("li").removeClass("active");
                      });
                    $(this).closest("li").addClass("active");
                });
            });
        }); 
```

# javascript - 如何在 ExtJS 中更改组合框的值

> ID：12495553
> 
> 赞同：0
> 
> 时间：2012-09-19T13:16:58.280
> 
> 标签：javascript, asp.net, extjs

我正在使用 ext js 填充我的两个组合框。我希望在组合框 1 中选择一个项目时，组合框 2 的值动态变化。到目前为止，我已经设法在所需格式的 combobox2 中获得了我想要的内容。

例如：

这就是我为此目的所做的事情：

```
 ddlLocation.on('select', function (box, record, index) {

    PageMethods.getAllBanksList(ddlLocation.getValue(), function (banks) {
        ddlBank.banksArray = banks;    //this is the assignment part
                                       //Bank returns the formatted string

    }, GenericErrorHandler);

}); 
```

这是我的 ddlBank 组合框：

```
ddlBank = new Ext.form.ComboBox({
    fieldLabel: 'Bank',
    labelStyle: 'width:130px',
    id: 'ddlBank',
    store: banksArray,
    mode: 'local',
    editable: false,
    triggerAction: 'all',
    value: banksArray[0][0]
}); 
```

它对分配没有任何改变，它也不会刷新甚至清除下拉列表的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:42:41.990

这看起来像您正在寻找的东西。

[http://www.sencha.com/forum/showthread.php?184207-Controlling-one-combobox-by-selection-of-another-combobox](http://www.sencha.com/forum/showthread.php?184207-Controlling-one-combobox-by-selection-of-another-combobox)

# jquery - jcanvas - 元素在页面上随机重新加载，并且元素之间的加载不一致

> ID：12495557
> 
> 赞同：0
> 
> 时间：2012-09-19T13:17:16.413
> 
> 标签：jquery, html, canvas, jcanvas

我正在使用 jcanvas 绘制图像，然后在该图像上显示各种形状（超过 100 个形状）。我遇到了一个问题 - 因为画布图像和画布形状似乎在不同时间加载。画布形状出现，然后在 0-5 秒后出现图像。此外，形状和图像会随机重新加载 - 它们会消失不到一秒钟，然后重新出现。

我还有一个与这些图像中的每一个相关的鼠标悬停事件 - 可能是我的形状太多，鼠标悬停事件太多？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:32:22.260

Figured it out. Turns out Firefox was sometimes loading the the image I was drawing from cache, and sometimes it was not... causing the image to sporadically re-load.

I displayed the image via html, and drew the image using jcanvas via the html elements' id - this has fixed the issue

# android - 片段问题：禁用页面查看器并加载指定的片段

> ID：12495558
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:17:21.527
> 
> 标签：android

嗨，伙计，我有一个与 pageviewer 相关的活动。每个页面都是一个片段，用户可以通过滑动来更改页面。在操作栏中有一个名为“C”的操作项。如果用户单击 C，我想禁用 pageviewer 并加载一个名为“FC”的片段。单击 C 后，用户只能在屏幕上看到片段“FC”。怎么能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:26:31.953

看看这篇博文。我认为他详细描述了您想要的确切功能。

[http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html](http://blog.svpino.com/2011/08/disabling-pagingswiping-on-android.html)

# javascript - 不能在 IE9 中工作；淡入(1000) 淡出(1000) 显示(1000) 隐藏(1000)

> ID：12495562
> 
> 赞同：-2
> 
> 时间：2012-09-19T13:17:30.923
> 
> 标签：javascript, jquery

看看这个页面。

```
 http://103.1.173.226/site/ 
```

在 Firefox 和 chrome 上它可以正常工作，在 IE9（不知道 IE 8 或其他版本）中它直接显示或隐藏图像而不是淡化它。

此外，我编写了一个函数来显示图像的幻灯片，显示一个接一个的图像。现在，如果您在下面的列表中从左向右移动，图像会直接显示（因为它们在页面中的顺序）但是从右向左移动会滞后于下一个图像的显示和当前图像的隐藏。发生这种情况是因为fadeIn 和fadeOut 不起作用。而且我已经尝试过在这里找到的所有解决方案，以使淡入和淡出在 IE 上工作，但没有任何效果，就像有些人建议对 css 等进行更改，我已经尝试了所有这些。请尽快提供帮助，因为我在严格的期限内：S

第二个问题并不重要，fadeIn 和 Out 的工作将解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:40:29.413

跟你的职位有关

```
#home .overview .background{
    position:absolute;
} 
```

在你的`styles.css`

如果我在开发人员模式下取消选中它，它会在 IE9 中淡入淡出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T06:20:49.503

已解决::::我在绑定同一事件的函数中取消绑定 mousemove 事件，在这种情况下几乎无法实现并且 IE 无法很好地处理它。

# actionscript-3 - 在使用 as3 和 flash 制作的正在运行的游戏中移除旧瓷砖

> ID：12495563
> 
> 赞同：0
> 
> 时间：2012-09-19T13:17:34.037
> 
> 标签：actionscript-3, flash, air

我开始为 Android 构建一个跑步游戏应用程序。我选择使用瓷砖和 Adob​​e Air 在 Flash 中制作它。游戏是一个玩家应该自动向右跑，并通过跳跃或沿着地面滑动来避开一些障碍物。

我制作了一个函数，它始终采用数组中的第一层并用作起始层。

```
private function createLevel()
    {
        map_level.levell();                                             

        level = map_level.level1;

        for(var t = 0; t < level.length; t++)
        {
            for(var u = 0; u < level[t].length; u++)
            {
                if(level[t][u] != 0)
                {                                   
                    var new_tile:platform_tile = new platform_tile;     

                    addChild(new_tile);         
                    new_tile.gotoAndStop(level[t][u]);
                    new_tile.x = u * 32;
                    new_tile.y = t * 32;

                    tiles.push(new_tile);                               
                }
            }
        }
        total_tile_width += u;
    } 
```

然后我创建一个函数，该函数在路径数组中采用随机级别。

```
private function random_level () 
```

当玩家沿着轨道到达一定长度时，这个级别会被添加到第一条轨道的末尾，然后轨道似乎是无穷无尽的，然后让相机跟随玩家。

```
private function update_level ()
    {
        random_level();

        for(var t = 0; t < mid_lvl.length; t++)
        {
            for(u = 0; u < mid_lvl[t].length; u++)
            {

                if(mid_lvl[t][u] != 0)
                {                                   
                    var new_tile:platform_tile = new platform_tile;     

                    level[t][u + total_tile_width] = mid_lvl[t][u];

                    addChild(new_tile);         
                    new_tile.gotoAndStop(mid_lvl[t][u]);
                    new_tile.x = (u + total_tile_width) * 32;
                    new_tile.y = t * 32;

                    tiles.push(new_tile);                               
                }
            }

        }
        // Indstiller hvis spilleren skal have en stigende fart
        if( movementspeed < 40)
        {
        movementspeed = movementspeed + 2;
        }
        else
            movementspeed = movementspeed;
        total_tile_width += u;
        trace ("speed: " + movementspeed);
    } 
```

所有这些都可以正常工作，游戏功能作为 PC 也很完美，但手机似乎很快就会超载，因为我不知道如何删除已经玩过的旧关卡，因此会有很多关卡在手机内存中。

我需要像 removeChild("old tiles the left the stage again) 但不知道如何只找到旧的瓷砖而不是所有的瓷砖。

任何人都可以帮助我？顺便说一句，希望你能理解我的问题，因为我不擅长写英语。

莫腾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:48:32.713

您必须使用 2 个 BitmapData 对象。

*   2是屏幕的大小。我们称它们为 screenBuffer1 和 screenBuffer2
*   另一个比屏幕大至少一个图块的宽度。我们称之为地形缓冲区

然后 ：

1.  通过绘制开始屏幕的所有可见图块来初始化terrainBuffer
2.  复制 screenBuffer1 上当前可见的区域
3.  在 screenBuffer1 上绘制精灵
4.  将 screenBuffer1 附加到舞台

现在我们开始滚动

1.  复制screenBuffer2上当前可见区域，按滚动量偏移
2.  在 screenBuffer2 上绘制精灵
3.  将 screenBuffer2 附加到舞台

继续增加偏移量并交替使用 screenBuffer1 和 screenBuffer2 以便在绘制另一个时可见

当偏移量达到瓦片的宽度时：

```
if(offset>tileWidth){
   offset-=tileWidth;
   // Move content of terrainBuffer to the left by tileWidth pixels
   // Draw a new column of tile on the right
} 
```

然后继续循环！

# jquery - jquery .show("slide") 选项

> ID：12495569
> 
> 赞同：1
> 
> 时间：2012-09-19T13:17:49.177
> 
> 标签：jquery, show, slide

这是我的代码。它从左侧滑入。

```
<script>
  $('#goalHS').click(function() {
  $('div[id^="div-detailed-goal"]').show("slide"); 
  }); 
  $("#redline").click(function() {
    $('div[id^="div-detailed-goal"]').fadeOut("slow"); 
     }); 
</script> 
```

我不想从左侧淡入，而是要绘制一条红线，然后让 DIV 从顶部滑入。

我怎样才能让它做以下事情？

1.  水平红线从中心向外延伸。

> ```
>  --- 
> ```

1.  红线结束增长：

> * * *

1.  内容从红线下方滑入。红线上方不显示内容：

> * * *
> 
> C。内容，内容，内容
> 
> d。内容，内容，内容

1.  内容完成滑入。令人敬畏的随之而来！

> * * *
> 
> 一个。内容，内容，内容
> 
> 湾。内容，内容，内容
> 
> C。内容，内容，内容
> 
> d。内容，内容，内容

我尝试了 4 种不同的方法，也尝试过使用其他 js 插件库，但我并没有那么先进来弄清楚它。

# asp.net - 像 url 指向页面选项卡

> ID：12495572
> 
> 赞同：0
> 
> 时间：2012-09-19T13:18:02.480
> 
> 标签：asp.net, facebook, facebook-like, facebook-page

我有一个作为页面标签安装的 FB 应用程序。我正在处理的网站的唯一查看方式是在选项卡中。该网站有“条目”，我希望能够单独喜欢每个条目，指向我的页面选项卡并将条目 ID 作为 app_data 包含在查询字符串中。

当登录页面收到来自页面选项卡的帖子时，我将检查 app_data 的值，并在必要时重定向到相应的详细信息页面。

所以我尝试的是在输出条目时使用like按钮，如下所示：

```
<fb:like  layout="button_count" href="<%= this.GetDetailsUrl() %>"></fb:like> 
```

GetDetailsUrl 只需获取我的应用程序的 url 并将条目 id 附加为 app_data，如下所示：

```
protected string GetDetailsUrl()
{
    return "http://www.facebook.com/mypage/app_myappid?app_data=" + entry.EntryId.ToString(); 
} 
```

现在，发生的事情是like 按钮似乎只指向`http://www.facebook.com/mypage`，当单击like 按钮时会发生这种情况，我可以看到每个条目的like 计数器似乎指向同一个地方，它们都具有相同的计数。

有没有办法让我在尝试做的时候对页面选项卡有一个点赞？任何意见，将不胜感激。谢谢！

**编辑：**根据 CBroe 的建议，我在详细信息页面上使用以下内容：

```
<meta property="og:title" content="Entry Title"/>
<meta property="og:type" content="article"/>
<meta property="og:url" content="http://www.myredirect.com?id=entry_id"/>
<meta property="og:image" content="http://www.mysite/entryimage.jpg"/>
<meta property="og:site_name" content="http://www.mysite.com"/>
<meta property="og:description" content="Entry Description"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:32:20.680

> 有没有办法让我在尝试做的时候对页面选项卡有一个点赞？

你不能喜欢页面标签，只有粉丝页面本身可以收到一个喜欢。

您可以做的是，将您的条目设置为 Open Graph 对象——然后让这些条目分别被点赞。

当用户访问您的 OG URL 时，您可以通过 JavaScript 将它们从那里重定向到您的页面选项卡。

# sql - 当我不知道列集时，如何将一个表内容复制到另一个，忽略 PK 重复

> ID：12495574
> 
> 赞同：0
> 
> 时间：2012-09-19T13:18:02.857
> 
> 标签：sql, tsql

我有 2 个数据库：SRC 和 DST。每个都包含表 DATA 一个在每个数据库 DATA 的列集是相等的，但它是未知的用户（我不知道 PK 的名称，甚至是 PK 身份或单一）。

我已经有以下脚本：

```
insert into DST.dbo.DATA select * from SRC.dbo.DATA 
```

但如果 DST.DATA 包含具有相同 PK 的行，则会引发错误（我使用的是 C#）。这就是为什么我想使用类似的东西

```
on duplicate ignore 
```

来自 mysql

您能否建议我将行从 SRC.dbo.DATA 复制到 DST.dbo.DATA 忽略主键约束的脚本。如果可能的话，外国的限制也是如此

对不起英语不好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:21:36.383

你可以尝试类似的东西

```
insert into DST.dbo.DATA 
select  s.* 
from    SRC.dbo.DATA s LEFT JOIN
        DST.dbo.DATA  d ON  s.Keys1 = d.Keys1
                        AND s.Keys2 = d.Keys2
                        ...
                        AND s.KeysN = d.KeysN
WHERE   d.Keys1 IS NULL 
```

这应该只允许您从 Source 中插入值，而不是在 Destination 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:21:17.260

您可以尝试这样的事情，而不是从中选择`SRC`存在于`DST`.

```
insert into DST.dbo.DATA select * from SRC.dbo.DATA 
WHERE SRC.dbo.DATA.PKColumn NOT IN(SELECT PKColumn FROM DST.dbo.DATA) 
```

# android - 从 sd 卡播放随机 mp3 文件

> ID：12495575
> 
> 赞同：3
> 
> 时间：2012-09-19T13:18:04.390
> 
> 标签：android, media-player

我需要你的帮助。我正在开发一个 android 应用程序，我需要从 sd 卡播放一首随机歌曲。我试过这样：

使用这种方法，我从文件夹中随机选择一首歌曲`sdcard/Music`（该文件夹仅包含 mp3 文件）。

```
 public File chooseSong()
    {
        Random r=new Random();
        File path=new File("/sdcard/Music");
        File[] songsList=path.listFiles();
        int index=(r.nextInt(songsList.length));
        Toast.makeText(Main.this, "Song extract "+songsList[index],Toast.LENGTH_SHORT).show();

        return songsList[index];
    } 
```

然后我使用这种方法播放提取的歌曲：

```
 public void play()
   {
            Toast.makeText(Main.this, "in method play() ", Toast.LENGTH_SHORT).show();
            try
            {
                   File f=chooseSong();
                   String path=f.getPath();
                   mpSong = new MediaPlayer();
                   mpSong.setDataSource(path);
                   mpSong.prepare();   //i think the problem is here, i receive "failed to prepare status 0x1"
                   mpSong.start();
                   Toast.makeText(Main.this, "Playing", Toast.LENGTH_SHORT).show();
            }
            catch(Exception e)
            {
                e.printStackTrace();
                Toast.makeText(Main.this, "error", Toast.LENGTH_SHORT).show();
            }
    } 
```

我想知道如何使用 MediaPlayer 从智能手机的 SD 卡播放歌曲

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:47:48.090

根据 NISHANT[这里](https://stackoverflow.com/questions/10145566/android-mediaplayer-cant-play-web-mediaprepare-failed-status-0x1)：

> 您需要实现流媒体播放器。这是一个[例子](http://davanum.wordpress.com/2007/12/29/android-videomusic-player-sample-from-local-disk-as-well-as-remote-urls/)。希望它会帮助你。

只是为了记录，我在[Google.de](https://www.google.de/search?q=android%20mediaplayer%200x1)上花了大约 30 秒。

# c# - MVC - 重写 URL 以仅显示域

> ID：12495577
> 
> 赞同：1
> 
> 时间：2012-09-19T13:18:09.123
> 
> 标签：c#, asp.net-mvc, url-rewriting

我在 .NET 3.5 框架中使用 MVC 1.0。我有一个客户希望 URL 显示为**www.example.com**而不是**www.example.com/{controller}/{action}/{id}**。

1.  该站点所在的服务器正在使用 IIS 6。
2.  我没有直接访问此服务器的权限。

考虑到这一点，这可以做到吗？

有人建议使用 ISAPI_REWRITE。我找到了一些例子，但没有一个能真正正确地解释需要做什么。

或者，如果这不能在整个站点中完成。可以只在主页上完成吗？

以下是我目前的路线：

```
public static void RegisterRoutes(RouteCollection routes)
{
     routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
     // Catch all route
     routes.MapRoute(
     "Default", // Name
     "{lang}/{controller}" + System.Configuration.ConfigurationManager.AppSettings["extension"] + "/{action}/{*values}",  // URL - ["extension"] being .aspx for IIS 6
     new { lang = "EN", controller = "Content", action = "Index" } // Defaults);
 } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:33:19.420

你应该写

```
public static void RegisterRoutes(RouteCollection routes)
{
     routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

  routes.MapRoute(
         "HomeIndex", // Name
         "",
         new { lang = "EN", controller = "Home", action = "Index" } // Defaults);

     // Catch all route
     routes.MapRoute(
     "Default", // Name
     "{lang}/{controller}" + System.Configuration.ConfigurationManager.AppSettings["extension"] + "/{action}/{*values}",  // URL - ["extension"] being .aspx for IIS 6
     new { lang = "EN", controller = "Content", action = "Index" } // Defaults);
 } 
```

# android - 安装 ADT 的 Eclipse“冲突依赖”错误

> ID：12495578
> 
> 赞同：0
> 
> 时间：2012-09-19T13:18:14.347
> 
> 标签：android, eclipse

我正在使用 ADT 设置 Eclipse。我收到以下错误：

> 由于依赖项冲突，无法完成安装。正在安装的软件：
> Android Hierarchy Viewer 20.0.3.v201208082019-427395 (com.android.ide.eclipse.hierarchyviewer.feature.group 20.0.3.v201208082019-427395)
> 
> 当前安装的软件：
> 面向 SOA 开发人员的 Eclipse IDE 1.3.0.20100617-0520 (epp.package.soa 1.3.0.20100617-0520)
> 
> 一次只能安装以下其中一项：
> Eclipse UI 3.6.1.M20100826-1330 (org.eclipse.ui 3.6.1.M20100826-1330)
> Eclipse UI 3.6.2.M20110203-1100 (org.eclipse.ui 3.6 .2.M20110203-1100)
> Eclipse UI 3.6.0.I20100603-1100 (org.eclipse.ui 3.6.0.I20100603-1100)

谁能告诉我如何解决这个问题，或者我需要使用哪些包的正确版本来避免冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T07:32:48.540

尝试安装到 Eclipse 4.2 的工作安装时遇到了这个问题。我回去并从[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载了 ADT Bundle ，安装完成。

# c# - 在 ASP.Net Web 服务的构造函数中使用带参数的自定义对象

> ID：12495583
> 
> 赞同：0
> 
> 时间：2012-09-19T13:18:37.693
> 
> 标签：c#, asp.net, web-services, asmx

我的 asp.net Web 服务中有一个自定义类型。我有相同类型的参数化构造函数。但是当我尝试在客户端使用相同的类型时，我只能看到没有参数的默认构造函数。这是我的类型。

```
public class Task
{

    public string AssignedTo { get; set; }

    public int CallDuration { get; set; }

    public Task(string assignedTo,int callDuration)
    {
        AssignedTo = assignedTo;
        CallDuration = callDuration;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:30:03.667

如果您在客户端更新服务引用，应该可以正常工作。在传统的 Web 服务中不确定，但在 WCF 中，服务需要运行才能执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:25:32.293

我不相信 SvcUtil（VS 在添加服务引用时使用的东西）会将它与参数化构造函数一起添加。

您可以做的是将类放入共享库中，该库作为对服务器和客户端的正常引用添加。添加服务引用时，重用类型，您可以使用构造函数，因为不会为重用类型创建代理类型。

如果您的类型有您希望在客户端访问的辅助方法，这也很有用。

# c# - 非阻塞书签有什么意义以及如何恢复它？

> ID：12495586
> 
> 赞同：2
> 
> 时间：2012-09-19T13:18:54.203
> 
> 标签：c#, workflow-foundation-4

*   非阻塞书签有什么意义（除了它是非阻塞的并继续流动）？
*   如果在那个书签之后有什么东西破坏了它，我们可以恢复一个非阻塞的工作流程吗？IE。

    //第一个活动 //非阻塞书签创建 //第二个活动，失败并抛出异常

现在我想用新数据从非阻塞书签恢复，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T05:06:47.293

非阻塞书签的一个用例是当您有一个可以安排长时间运行的子活动的活动时。在父活动中设置非阻塞书签会提供一个可以取消子活动的恢复点。

如果子活动在用户希望取消处理工作流之前完成，那么即使没有出现恢复请求，也允许父活动“关闭”。

# excel - 图表根据另一列（Excel 或 SigmaPlot）中的值从一列中选择值

> ID：12495587
> 
> 赞同：1
> 
> 时间：2012-09-19T13:18:54.793
> 
> 标签：excel, charts

有谁知道是否可以在 Excel 或 SigmaPlot 中生成图表或根据另一列中的值选择一列中的值，而无需生成新列来分解数据。

例如，使用下面的数据，我想在 x 轴上连续记录“日期”。在 y 轴上，我想绘制所有 Q 数据。但是，在辅助轴上，我只想绘制与“T-flag”= 1 对应的“T”值。同样，如果可能，我不想创建任何新列，因为我有 ~ 80 列具有不同变量的列，我想为它们创建这种类型的图...

```
日期 QT T 标志
1981 年 1 月 1 日 1.2 2.2 0
1981 年 1 月 2 日 1.3 2.1 0
1981 年 1 月 3 日 1.5 3.1 1
1981 年 1 月 4 日 1.2 2.1 0
1981 年 1 月 5 日 1.5 3.2 1
```

# java - 如何保存复选框状态？- 安卓

> ID：12495588
> 
> 赞同：1
> 
> 时间：2012-09-19T13:18:55.163
> 
> 标签：java, android, checkbox, sharedpreferences

是的，网上有很多关于这些东西的问题和答案，但我只是不知道如何使用 sharedpreference 保存复选框状态。有人只是帮助我完成我无法完成的编码部分。

```
ch = (CheckBox) findViewById(R.id.checkBox1);

    ch.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
        if(ch.isChecked())
                {
            Toast.makeText(getApplicationContext(), "Check", Toast.LENGTH_SHORT).show();
            }
        else
        {
            Toast.makeText(getApplicationContext(), "Uncheck", Toast.LENGTH_SHORT).show();
        }}
    });
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:21:53.843

只需创建 SharedPrefrences 并使用`.putBoolean()`

```
 if(ch.isChecked()){             

    SharedPreferences settings = getSharedPreferences(PREFRENCES_NAME, 0);
    settings.edit().putBoolean("check",true).commit();

} 
```

*   [看这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:21:31.630

我想你已经知道的答案，让我为你扫清道路，

*   在表中创建一个布尔字段
*   选中 CheckBox 时将其值设置为 true，否则设置为 false

下次加载活动时，只需读取字段值并相应地设置复选框的状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:25:02.937

```
if(ch.isChecked())
{
    SharedPreferences preferences = context.getSharedPreferences("prefs_name", Context.MODE_PRIVATE);
    preferences.edit().putBoolean("checked", True).commit();
} 
```

# .net - 将 UserControl 属性绑定到 INotifyPropertyChanged 视图模型

> ID：12495591
> 
> 赞同：2
> 
> 时间：2012-09-19T13:18:59.560
> 
> 标签：.net, wpf

此处给出的示例是我尝试实现的实际 UserControl 的简化，但它说明了结构并遇到了同样的问题。用户控件有一个 DependencyProperty Words，它设置在用户控件 XAML 中定义的文本块的文本。

```
 public partial class MyControl : UserControl
    {
        public static readonly DependencyProperty WordsProperty = DependencyProperty.Register("Words", typeof(string), typeof(MyControl));
        public MyControl()
        {
            InitializeComponent();
        }
        public string Words
        {
            get { return (string)GetValue(WordsProperty); }
            set
            {
                m_TextBlock.Text = value;
                SetValue(WordsProperty, value);
            } 
```

INotifyPropertyChanged ViewModelBase 类派生的 ViewModel 被分配给 mainWindow DataContext。ModelText 属性集调用 OnPropertyChanged。

```
class MainWindow : ViewModelBase
{
    private string m_ModelString;
    public string ModelText
    {
        get { return m_ModelString; }
        set
        {
            m_ModelString = value;
            base.OnPropertyChanged("ModelText");
        }
    }
} 
```

在 MainWindow XAML 中绑定到 UserControl 和 TextBlock

```
 <Window x:Class="Binding.View.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="218" Width="266" xmlns:my="clr-namespace:Binding.View">
    <Grid>
        <my:MyControl Words="{Binding ModelText}" HorizontalAlignment="Left" Margin="39,29,0,0" x:Name="myControl1" VerticalAlignment="Top" Height="69" Width="179" Background="#FF96FF96" />
        <TextBlock Height="21" HorizontalAlignment="Left" Margin="59,116,0,0" Name="textBlock1" Text="{Binding ModelText}" VerticalAlignment="Top" Width="104" Background="Yellow" />
    </Grid>
</Window> 
```

绑定适用于文本块，但不适用于用户控件。为什么 UserControl DependencyProperty 不能和 Control Properties 一样绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:35:29.177

罪魁祸首是：

```
m_TextBlock.Text = value; 
```

WPF 不直接使用由 DP 支持的属性。

如果您想在修改`m_TextBlock.Text`时更新，请`WordsProperty`将该文本块绑定到`Words`，或使用`PropertyChangedCallback`in `UIPropertyMetadata`：

```
 public static readonly DependencyProperty WordsProperty = 
         DependencyProperty.Register("Words", 
                                    typeof(string), 
                                    typeof(MyControl),
                                    new UIPRopertyMetadata(
                 new PropertyChangedCallback(
                     (dpo, dpce) => 
                     {
                         //Probably going to need to first cast dpo to MyControl
                         //And then assign its m_TextBlock property's text.
                         m_TextBlock.Text = dpce.NewValue as string;
                     }))); 
```

考虑`dpo`发送者和`dpce`事件参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:37:17.267

我认为您应该通过绑定而不是通过绑定将文本分配给 UserControl 的文本框`m_TextBlock.Text = value;`。

也许您可以在 UserControl Xaml 中使用这样的绑定：

```
 Text="{Binding Words
, RelativeSource={RelativeSource AncestorType={x:Type UserControl}}}" 
```

# asp.net-mvc - 在控制器中处理 EF 上下文的更好方法

> ID：12495593
> 
> 赞同：1
> 
> 时间：2012-09-19T13:19:01.923
> 
> 标签：asp.net-mvc, entity-framework

我有一个简单的 MagazineRepository 类

```
public class MagazineRepository : IDisposable
{
    //EntityFramewokr context
    private DataBaseContext _context;

    public MagazineRepository() 
    {            
        _context = new DataBaseContext();
    }    

    public void Dispose()
    {
    if (_context != null) 
    { 
        _context.Dispose(); 
    } 
        GC.SuppressFinalize(this);
    }
} 
```

还有一个简单的控制器：

```
public class MagazineController : Controller
{      
    public ActionResult Index()
    {     
        //Should to implement using to dispose
        using(MagazineRepository magazineRepository = new MagazineRepository())
        {
            var magazine = magazineRepository.GetAll().ToList(); //Should use ToList() to avoid "Object has been disposed exception".
            return View(magazine);
        }
    }       
} 
```

如果我不想在每个动作中使用“using”和“ToList()”怎么办？如果我在控制器的析构函数中调用 Dispose() 上下文方法怎么办？像这样的东西：

```
public class MagazineController : Controller
{      
    MagazineRepository _magazineRepository;
    public MagazineController()
    {
        _magazineRepository= new MagazineRepository();
    }
    ~MagazineRepository();   
    {
        if(_magazineRepository!=null)
        {
            _magazineRepository.Dispose();
        }
    }
    public ActionResult Index()
    {              
        var magazine = magazineRepository.GetAll();  
         return View(magazine);              
    }       
} 
```

这段代码有效，但我认为它应该以其他方式编写。在最后一个代码示例中，上下文能够存活太久。那么有没有什么模式可以给我我的数据库记录而无需每次都“使用”和“ToList（）”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T07:39:21.577

有人回答了我的问题，但随后将其删除。想法是重写控制器的 Dispose 方法，因为控制器是在动作执行后处理的。

```
public class MyBaseController : Controller
{        
    protected IMyRepository _repository;       

    public RhotCMSController()
    {
        _repository = new MyRepository();
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (_repository != null)
            {
                _repository.Dispose();
            }               
        }
        base.Dispose(disposing);
    }
}

 public class MyController : MyBaseController
 {  
    public ActionResult Index()
    {              
        var entities = _repository.GetAll();  
        return View(entities);              
    } 
 } 
```

# c# - 将嵌套实体投影到嵌套视图模型中

> ID：12495601
> 
> 赞同：2
> 
> 时间：2012-09-19T13:19:31.660
> 
> 标签：c#, linq, entity-framework

我需要将一些 POCO 实体从 EF 投影到它们的缩减视图模型表示中，以便传递给序列化程序。这种情况下的实体是 Shipment 和 Requisition 并且具有 0..1 关系。如果我不传递视图模型，那么它会在尝试序列化 Requisition 和 Shipment 之间的循环引用时抛出堆栈溢出异常。

```
return db.ShipmentRequisitions
                .Include(c => c.Shipment)
                .Select(r => new ViewModels.Requisition
                {
                    ID = r.ID,
                    ...
                    Shipment = r.Shipment != null ? new ViewModels.Shipment
                    {
                        ID = r.Shipment.ID,
                        ...
                    } : null
                }).AsQueryable(); 
```

如果 Shipment 为空，则在尝试访问 r.Shipment.ID 时出现异常。我如上所述添加了一个空检查，现在得到以下异常。

> 无法创建“Api.ViewModels.Shipment”类型的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

这让我觉得很奇怪，因为在我添加空检查之前创建嵌套的 ViewModels.Shipment 作为选择的一部分非常高兴，所以它一定与此有关。

我可以在调用堆栈中看到一些 EF，所以我在一个快速测试项目中尝试了它，只使用了直接对象来尝试使用纯 LINQ。

```
var user = users.Select(u => new ViewModel.User
                {
                    Id = u.Id,
                    Profile = u.Profile != null ? new ViewModel.Profile
                    {
                        Id = u.Profile.Id
                    } : null
                }).ToList(); 
```

令我惊讶的是工作。我不太清楚这在第一个代码示例中不起作用。

**更新**

我发现，如果作为选择的一部分，我会执行以下操作：

```
.Select(r => new ViewModels.Requisition
                    {
                        ID = r.ID,
                        ShipmentDescription = r.Shipment.Description
                    }) 
```

这有效地将所需的 Shipment 属性扁平化为单个 DTO。在这里，如果在设置 Description 属性时任何记录上的 Shipment 为空，我希望得到一个 NullReferenceExcetion。然而这并没有发生。LINQ 似乎抑制了异常，并且 ShipmentDescription 以 null 的形式出现。它节省了我对每个嵌套属性的 Shipment 进行内联是否为空的检查。不幸的是，当创建一个我没有展平的嵌套对象时，这似乎并没有扩展到同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:06:53.970

*如果类中**的所有属性*都是可空的，您可以在不检查空值的情况下合并`ViewModels.Shipment`对象。不过这有点痛苦，因为现在只有在没有发货的情况下才使用空值创建对象。`ViewModels.Requisition`*`Shipment`*`Shipment`

你也可以把它转过来：选择`Shipment`其中包含集合的模型`Requisitions`。如果它不会过多地弄乱应用程序的其余部分，那么值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:19:35.007

问题是这一行：

`.SingleOrDefault(r => r.ID == id);`

EF 正在尝试将表达式转换`r.ID == id`为 SQL，而不是进行管理。

解决方案是简单地将行更改为： `.ToEnumerable().SingleOrDefault(r => r.ID == id);`

这是有效的，因为只有 IQueryable 被转换为 SQL，而不是 IEnumerable。

# coldfusion - 动态更改“全局”数据源

> ID：12495606
> 
> 赞同：1
> 
> 时间：2012-09-19T13:19:42.567
> 
> 标签：coldfusion, datasource, coldfusion-10, application.cfc

我通常在 Application.cfc 的第一行中设置应用程序范围的数据源名称：

```
<cfscript>THIS.datasource="mydsn";</cfscript> 
```

如果我需要在代码的某些部分更改它怎么办？

具体来说，我的意思是：

*   如果 cgi.server_name 等于 "www.firsturl.com" => this.datasource = "firstdsn"
*   如果 cgi.server_name 等于 "www.secondurl.com" => this.datasource = "seconddsn"

我可以为每个请求都这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:48:19.757

好的，尽管我对您的原始帖子发表了评论-找出这些事情的最佳方法就是*尝试一下*，看看会发生什么，答案是：是的。

Application.cfc 的名字很糟糕，因为它暗示它是一种特定于应用程序的，但实际上整个事物都是在每个请求时实例化的。一些事件处理程序只在给定的情况下运行（onApplicationStart / onSessionStart 等）既不存在也不存在：整个事情运行每个请求。因此，与任何被实例化的 CFC 一样，伪构造函数代码（在其中进行 this 范围的变量声明）也会在每个请求中运行。

这意味着是的，您可以根据特定于请求的信息（请求、CGI、URL、表格等；但不是应用程序或会话）有条件地设置任何这些变量。因此，您基于 CGI 变量的条件可以正常工作。

但不要相信我的话：试试吧！总是尝试这些事情。

[最后，为了稍微插嘴一下，我会在我的博客这篇文章](http://adamcameroncoldfusion.blogspot.co.uk/2012/08/more-on-applicationcfc-when-things-run.html)中深入讨论什么时候在 Application.cfc 中运行。也许可以阅读一下，或者在您在那里的时候查看 Application.cfc 上的其他文章。

# ruby-on-rails - Heroku 和 Rails 文件上传

> ID：12495607
> 
> 赞同：1
> 
> 时间：2012-09-19T13:19:44.033
> 
> 标签：ruby-on-rails, heroku

我在网上阅读了很多关于在 Rails 中上传文件会导致 Web 应用程序挂起的区域，我想知道 Heroku Dyno 是否属于这种情况？如果用户要上传 1 gig 文件，那么如果它托管在单个测功机上，这会导致应用程序的其余部分挂起吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:26:05.950

默认情况下，Rails 不是线程安全的。这意味着每个运行的 Rails 实例一次只能处理一个请求。

在 Heroku 上，您可以在单个测功机上运行 1 个进程。这可能是 Thin、Unicorn、delayed_job 工人等。

由于 Rails 默认情况下不是线程安全的，因此 Thin 一次只能处理 1 个请求（这意味着您的 dyno 一次只能处理 1 个请求）。在这种情况下，当用户上传 1 GB 文件时，Thin 只能处理该请求 = 导致下一个请求挂起。要解决这个问题，您必须缩放测功机的数量。例如运行 4 个 dynos（运行 Thin），一次可以处理 4 个请求。

但是，如果您在 Heroku 测功机上使用 Unicorn，并将 Unicorn worker 数量设置为 4，那么 Rails 一次可以处理 4 个请求。独角兽很聪明。它在单个 Heroku dyno 中生成 4 个进程。这意味着当你上传一个 1 GB 的文件时，Unicorn 会继续处理 3 个请求。这一切都在一个测功机上运行。

查看这篇文章以获取有关 Heroku 和 Unicorn 的更多信息：http: [//michaelvanrooijen.com/articles/2011/06/01-more-concurrency-on-a-single-heroku-dyno-with-the-new-celadon-雪松栈/](http://michaelvanrooijen.com/articles/2011/06/01-more-concurrency-on-a-single-heroku-dyno-with-the-new-celadon-cedar-stack/)

希望这可以帮助。

**更新**

如果您将文件上传到 S3，您实际上可以完全跳过您的测功机并将文件直接上传到 S3。只是一个提示。;-)

# javascript - 何时生成 JavaScript 包？

> ID：12495610
> 
> 赞同：1
> 
> 时间：2012-09-19T13:19:47.513
> 
> 标签：javascript, build-process, bundle, chirpy

目前，我们在本地将各个 JavaScript 文件连接并缩小到一个包中 - 使用 Chirpy - 然后将包签入版本控制（我们使用带有门控签入的 TFS）。

然后我们的安装程序部署这个包。

但这会导致一些问题：

*   是否可以签入与源文件不对应的包。
*   我们的“门控签到”存在合并问题。因为如果签入队列中的两个变更集都包含一个新包，那么第二个将始终与第一个冲突。

我们还有其他一些想法：安装程序可以在部署期间生成捆绑包，或者服务器可以在运行时生成捆绑包作为启动过程。

但这肯定是一个常见问题，最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:33:40.013

“最佳实践”是一个可怕的短语，因为人们经常将它作为一个俱乐部来捍卫自己的个人喜好。

两种解决方案都很好，并且比当前系统更好。哪个最好取决于上下文：

**安装程序可以在部署期间生成包：** 这样做的好处是，部署的 JavaScript 包可以保证是一致的和恒定的，并且可以在不启动整个系统的情况下单独测试。一般来说，我会推荐这个解决方案。

**服务器可以在运行时生成捆绑包作为启动过程：** 这样做的好处是可以直接在部署的系统上替换或调整 JavaScript 代码，而无需经过构建步骤。这使您可以非常快速地修复错误或改进事物。缺点是这种活动会导致实时系统与存储库*不*同步，这使得调试和升级变得痛苦且容易出错。我个人认为允许这样做是很可怕的。

# php - 将 DATE 2012-09-16 转换为 php date("l F jS") (PHP/mySQL)

> ID：12495613
> 
> 赞同：0
> 
> 时间：2012-09-19T13:19:59.630
> 
> 标签：php, mysql, date

我在 mySQL 中有一个日期以 2012-09-16 格式存储为 DATE 格式，我想输出并将日期转换为格式 `date("l F jS")`。

我正在使用 while 循环来查询选择日期的表：

```
while($rowWeek=mysql_fetch_assoc($resultWeek)){
    echo date("l F jS", $rowWeek[dt]); 
} 
```

上面的代码输出：`Wednesday December 31st`. 每一天都告诉我`date()`不喜欢使用的格式`$rowWeek[dt]`

当它应该循环通过当前一周的 7 天。

```
echo $rowWeek[dt]; 
```

输出正确的日期：

```
2012-09-16
2012-09-17
2012-09-18
2012-09-19
2012-09-20
2012-09-21
2012-09-22 
```

如何转换 2012-09-16 的 SELECTED 日期格式并将其转换为更令人愉快的格式`date("l F jS")`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:20:44.937

使用`strtotime()`：

```
echo date("l F jS", strtotime($rowWeek['dt'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T15:29:23.903

如果要在 MySQL 中进行格式化，可以这样做：

```
SELECT dateformat("%W %M %D", mydate) 
```

仅供参考，如果您发现此答案有帮助，我将获得更多价值，而不是我为此获得任何积分。我要做什么，把我的SO分数写在我的简历上？

祝你好运。

# java - 在java中初始化并返回一个字节数组

> ID：12495619
> 
> 赞同：2
> 
> 时间：2012-09-19T13:20:09.427
> 
> 标签：java, bytearray, return

在我的代码中，我必须将一个再见数组 (byte[] temp = null;) 传递给一个在其中分配并填充数据的函数。从函数返回后，它仍然为空。我怎样才能找到解决这个问题的方法。？？？请帮我。

```
 byte[] temp = null;
  ret = foo(temp);

  boolean foo(byte[] temp)
  {
      temp = new byte[];
      //fill array
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T13:26:51.697

你对你的代码不是很清楚，但如果我理解你的话，你有如下内容：

```
byte[] temp = null;
methodThatAllocatesByteArray(temp);
// temp is still null. 
```

如果这是对您所说内容的正确理解，那么问题在于 temp 是对任何内容的引用。将该引用发送给另一个方法会生成该引用的副本（而不是使用相同的引用），因此，更改该引用（分配给参数变量）只会更改本地方法的引用。你需要做的是`byte[]`从这样的方法中返回一个新的：

```
public byte[] methodThatAllocatesByteArray() {
    // create and populate array.
    return array;
} 
```

并这样称呼它：`byte[] temp = methodThatAllocatesByteArray()`. 或者您可以先初始化数组，然后将对该数组的引用传递给另一个方法，如下所示：

```
byte[] temp = new byte[size];
methodThatAllocatesByteArray(temp); 
```

由于在这种情况下，参数 in`methodThatAllocatesByteArray`将指向与 相同的数组`temp`，因此对其进行的任何更改（除了将其重新分配给不同的数组或 null 之外）都可以通过`temp`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:26:33.447

你需要使用这个：

```
 byte[] temp = new byte[some_const];
  ret = foo(temp);

  boolean foo(byte[] temp)
  {
      //fill array
  } 
```

或者

```
 byte[] temp = null;
  temp  = foo(temp);

  byte[] foo(byte[] temp)
  {    temp = new byte[some_const];
      //fill array
      return temp;
  } 
```

# asp.net - 创建虚拟目录时拒绝访问

> ID：12495621
> 
> 赞同：0
> 
> 时间：2012-09-19T13:20:19.167
> 
> 标签：asp.net, vb.net, iis, directoryentry

我收到了这个错误

> 访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）

当我尝试使用带有 asp.net Web 表单的 vb.net 代码和以下我使用的代码创建虚拟目录时..

```
Private Sub CreateVirtualDir(ByVal WebSite As String, ByVal AppName As String, ByVal Path As String)

        Dim IISSchema As New System.DirectoryServices.DirectoryEntry("IIS://" & WebSite & "/Schema/AppIsolated")
        Dim CanCreate As Boolean = Not IISSchema.Properties("Syntax").Value.ToString.ToUpper() = "BOOLEAN"
        IISSchema.Dispose()

        If CanCreate Then
            Dim PathCreated As Boolean

            Try
                Dim IISAdmin As New System.DirectoryServices.DirectoryEntry("IIS://" & WebSite & "/W3SVC/1/Root")

                'make sure folder exists
                If Not System.IO.Directory.Exists(Path) Then
                    System.IO.Directory.CreateDirectory(Path)
                    PathCreated = True
                End If

                'If the virtual directory already exists then delete it
                For Each VD As System.DirectoryServices.DirectoryEntry In IISAdmin.Children
                    If VD.Name = AppName Then
                        IISAdmin.Invoke("Delete", New String() {VD.SchemaClassName, AppName})
                        IISAdmin.CommitChanges()
                        Exit For
                    End If
                Next VD

                'Create and setup new virtual directory
                Dim VDir As System.DirectoryServices.DirectoryEntry = IISAdmin.Children.Add(AppName, "IIsWebVirtualDir")
                VDir.Properties("Path").Item(0) = Path
                VDir.Properties("AppFriendlyName").Item(0) = AppName
                VDir.Properties("EnableDirBrowsing").Item(0) = False
                VDir.Properties("AccessRead").Item(0) = True
                VDir.Properties("AccessExecute").Item(0) = True
                VDir.Properties("AccessWrite").Item(0) = False
                VDir.Properties("AccessScript").Item(0) = True
                VDir.Properties("AuthNTLM").Item(0) = True
                VDir.Properties("AuthBasic").Item(0) = True
                VDir.Properties("AspBufferingOn").Item(0) = True
                VDir.Properties("EnableDefaultDoc").Item(0) = True
                VDir.Properties("DefaultDoc").Item(0) = "default.htm,default.aspx,default.asp"
                VDir.Properties("AspEnableParentPaths").Item(0) = True
                VDir.Properties("AuthAnonymous").Item(0) = True
                VDir.CommitChanges()

                'the following are acceptable params
                'INPROC = 0
                'OUTPROC = 1
                'POOLED = 2
                VDir.Invoke("AppCreate", 1)

            Catch Ex As Exception
                If PathCreated Then
                    System.IO.Directory.Delete(Path)
                End If

            End Try
        End If

    End Sub 
```

任何帮助请>????

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:26:49.320

如果您通过 Visual Studio 运行应用程序，请以**管理员身份启动 Visual Studio**

如果您由 IIS 运行，请将您的用户设置为管理员**或对****应用程序池** 具有所需权限的用户
打开 IIS/转到应用程序池/右键单击您的应用程序池/高级设置/进程模型/加载用户配置文件 = true/
单击**身份**并选择您的帐户

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-26T05:59:31.487

这个解决方案对我有用==>

[http://blogs.msdn.com/b/jpsanders/archive/2009/05/13/iis-7-adsi-error-system-runtime-interopservices-comexception-0x80005000-unknown-error-0x80005000.aspx?CommentPosted=真的#commentmessage](http://blogs.msdn.com/b/jpsanders/archive/2009/05/13/iis-7-adsi-error-system-runtime-interopservices-comexception-0x80005000-unknown-error-0x80005000.aspx?CommentPosted=true#commentmessage) ..

此外，我也这样做了，这解决了我的问题::

我得到的问题==>

```
[System.Runtime.InteropServices.COMException] {"Access is denied.\r\n"}     System.Runtime.InteropServices.COMException

ErrorCode 0x80070005 
```

解决我的问题的解决方案 :: 在 Link 中完成上述所有操作后。

我也必须这样做才能解决访问被拒绝错误 ==> 在管理员批准模式下运行所有​​管理员 ==> 禁用 ..

# android - 查询 MediaStore - SQLiteException

> ID：12495624
> 
> 赞同：0
> 
> 时间：2012-09-19T13:20:29.310
> 
> 标签：android, sqlite, mediastore, android-query

我正在对 mediastore 执行查询，以返回特定 atist 的专辑数量。

查询如下所示：

```
 public String doQuery(String artistName) {

        String[] proj = new String[] { MediaStore.Audio.Artists._ID,
                MediaStore.Audio.Artists.NUMBER_OF_ALBUMS,
                MediaStore.Audio.Artists.ARTIST };

        Uri baseUri = MediaStore.Audio.Artists.EXTERNAL_CONTENT_URI;

        selection = MediaStore.Audio.Artists.ARTIST + " = " + artistName;
        Log.i(TAG, "Selection artistName = " + artistName);

        Cursor mCursor = getContentResolver().query(baseUri, proj, selection,
                null, null);

        mCursor.moveToFirst();

        return

        mCursor.getString(mCursor
                .getColumnIndex(MediaStore.Audio.Artists.NUMBER_OF_ALBUMS));

    } 
```

艺术家名称被传入，并且选择应该将光标缩小到仅该艺术家。我收到以下异常：

```
09-19 23:13:14.855: E/AndroidRuntime(17911): android.database.sqlite.SQLiteException: near "Stone": syntax error (code 1): , while compiling: SELECT _id, number_of_albums, artist FROM artist_info WHERE (artist = Nine Inch Nails) 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:29:01.997

请执行下列操作：

```
selection = MediaStore.Audio.Artists.ARTIST + " =? ";
String[] selectionArgs = new String[]{artistName};
Cursor mCursor = getContentResolver().query(baseUri, proj, selection,
                selectionArgs, null); 
```

这样即使`artistName`包含单引号，它也会执行而不会出错。

# android - HTTP 身份验证在 Android 4.x 中不起作用

> ID：12495626
> 
> 赞同：1
> 
> 时间：2012-09-19T13:20:42.603
> 
> 标签：android, apache, cordova, http-authentication

我有一个phonegap应用程序。我查询需要 HTTP 基本身份验证的 REST Web 服务

这是我的代码：

```
var username = 'test';
var pass = 'test';
var string = username+':'+pass;
var hash = btoa(string);
$.ajax({
    type: 'GET',
    dataType: 'jsonp',
    crossdomain: true,
    //tried this
    beforeSend: function (xhr){ 
        xhr.setRequestHeader('Authorization', make_base_auth(username, pass)); 
    },
    //also this
    username: 'test',
    password: 'test',
    //also this
    data: {username: 'test', password: 'test'},
    //and this
    url: 'http://'+username+':'+pass+'@testserver.local/ProductService/getProductList.json?testQuery&_jsonp=availableProducts',
    error: function (xhr, ajaxOptions, thrownError) {
        console.warn(xhr.status);
        console.warn(thrownError);
        alert(xhr.status);
        alert(thrownError);
    }
    });

function make_base_auth(user, password) {
  var tok = user + ':' + password;
  var hash = btoa(tok);
  alert("HASH: "+hash);
  return "Basic " + hash;
} 
```

我从服务器端所知道的是，当我从 Android 4.x 查询时，apache 说“用户试图在没有凭据的情况下登录”。所以似乎没有数据到达服务器，但为什么呢？

奇怪的是，它适用于 iPhone (iOS 4.1) 和 Android 版本 2.2 和 2.3，但不适用于 4.x（4.0.4 和 4.1）。任何人都有任何提示，这让我发疯。

编辑：我能够查看 apache 访问日志，它在 Android 4.x 的每个请求上返回 401，在 2.2 和 2.3 之前的每个请求上返回 200。我现在将记录所有 HTTP 请求标头以检查到达的内容。

# sql - 从数据库中获取 2 周的数据

> ID：12495629
> 
> 赞同：0
> 
> 时间：2012-09-19T13:20:53.330
> 
> 标签：sql, sql-server-2008

我要返回一份最畅销产品的清单。目前，我的查询带回了过去 7 天的订单总额。

我还需要带回前 7 天的项目数量总和，我想知道我将如何去做？我在想它只是在@startDate 上增加 7 天，在@endDate 上增加 13 天（这已经将日期设置为今天日期之后的 7 天）

当前在**sum(amzOrdersItem.itemQty) AS Orders**行中获取项目数量。这实际上返回了产品订单的计数。

```
ALTER PROCEDURE [dbo].[GetHighestSellingItems]
@startDate datetime, 
@endDate datetime
AS
BEGIN

SET NOCOUNT ON;

SELECT    TOP (20) twProducts.sku, 
          twProducts.title + ' /  ' + LTRIM(CAST(twProducts.strength AS varchar(15))) + '%' AS Title, 
          sum(amzOrdersItem.itemQty) AS Orders, 
          twProducts.stock, aboProducts.asin, aboProducts.amzPrice
FROM      twProducts INNER JOIN
          amzOrdersItem ON twProducts.sku = amzOrdersItem.productSku INNER JOIN
          amzOrders ON amzOrdersItem.amzOrderId = amzOrders.amzOrderId INNER JOIN
          aboProducts ON twProducts.sku = aboProducts.sku
where    (amzOrders.orderDate between @startDate and @endDate) and  amzOrders.cancelled = 0
          group by twProducts.sku, twProducts.title, twProducts.strength, 
          twProducts.stock, aboProducts.asin, aboProducts.amzPrice
ORDER BY sum(amzOrdersItem.itemQty) DESC
END 
```

认为这可能很方便，这是我填充到查询中并获得结果的.net 代码。

```
public List<GetHighSelling> GetHighSellingWeek()
    {
        DateTime? endDate = DateTime.Now.Date;
        DateTime? startDate = DateTime.Now.Date.AddDays(-6).Date;

        using (aboDataDataContext dc = new aboDataDataContext())
        {
            var query = from o in dc.GetHighestSellingItems(startDate, endDate)
                        select new GetHighSelling
                        {
                            sku = o.sku,
                            title = o.Title,
                            itemQty = o.Orders,
                            stock = o.stock,
                            amzPrice = o.amzPrice.ToString(),
                            asin = o.asin
                        };
            return query.ToList();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:38:53.580

将代码更改为

```
 DateTime startDate = DateTime.Now.Date.AddDays(-13).Date; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:24:58.520

你应该减去 7 天。如果添加 7 天，您将要求未来一周内销量最高的产品。

（虽然这将是非常有用的信息，但数据库无法预见未来。;）

您可以从结束日期计算开始日期：

```
DateTime? endDate = DateTime.Today.AddDays(-7);
DateTime? startDate = endDate.AddDays(-6); 
```

# java - 这个 Singleton 是线程安全的吗？

> ID：12495631
> 
> 赞同：4
> 
> 时间：2012-09-19T13:21:02.203
> 
> 标签：java, multithreading, concurrency, singleton, atomic

基于[这个话题](https://stackoverflow.com/questions/12483487/is-this-code-a-thread-safe-one)，我提出了一个有趣的单例模式版本，它的实现是基于 AtomicIntegers 的。

问题是：

*   这个实现是否正确且线程安全，通常是否可以使用原子变量进行线程同步和管理？
*   附加问题：如果这个实现是线程安全的，我真的需要一个`volatile`实例变量的修饰符吗？

```
public class StrangeSingleton
{

    private StrangeSingleton() {};

    private static volatile Object instance;

    private static AtomicInteger initCounter = new AtomicInteger();
    private static AtomicInteger readyCounter = new AtomicInteger();

    static Object getInstance()
    {

        if (initCounter.incrementAndGet() == 1)
        {
            instance = new Object();

            readyCounter.incrementAndGet();

            return instance;
        }
        else if (readyCounter.get() == 1)
        {
            return instance;
        }
        else
        {
            //initialization not complete yet.
            //write here some logic you want:               
            //sleep for 5s and try one more time,
            //or throw Exception, or return null..

            return null;
        }
    }
} 
```

更新：添加了私有构造函数，但这不是重点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T13:28:17.397

> 这个实现是否正确且线程安全，通常可以使用原子变量进行线程同步和管理吗？

它是，但它通常更复杂且 CPU 密集，因为您需要忙于等待以快速响应更改。

> 附加问题：如果这个实现是线程安全的，我真的需要一个 volatile 修饰符作为实例变量吗？

在这种情况下，您不会因为 AtomicInteger 包含 volatile 字段，这将确保正确的发生前/发生后行为。

* * *

当然，您可以只使用线程安全且简单得多的枚举；）

```
enum Singleton {
    INSTANCE;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T13:47:35.607

> 这个实现是否正确且线程安全，通常是否可以使用原子变量进行线程同步和管理？

是的，但是对于`readyCounter`变量，您可能应该使用[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)，如下所示：

```
private static AtomicInteger initCounter = new AtomicInteger();
private static CountDownLatch readyCounter = new CountDownLatch(1);

static Object getInstance()
{

    if (initCounter.incrementAndGet() == 1)
    {
        try {
            instance = new Object();
            return instance;
        } finally {
            readyCounter.countDown();
        }
    }
    else
    {
        readyCounter.await();
        return instance;
    }
} 
```

调用*await()*也解决了初始化竞争条件。（我还添加了一个 try-finally 块以避免在构造函数异常上出现死锁。）

> 附加问题：如果这个实现是线程安全的，我真的需要一个 volatile 修饰符作为实例变量吗？

不，如果您在访问实例变量之前调用相关`AtomicInteger`或`CountDownLatch`函数，则不会。在[文档](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/package-summary.html)中查找*happens-before*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:48:51.040

线程**T1**可能在 上挂起`instance = new Object();`，然后**T2**将遇到`else{}`块，因为`readyCounter`尚未增加。这不太正确，因为初始化**已经**完成，落后的是状态簿记

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:10:37.890

我宁愿在你的方法中做一个`synchronized`块。`getInstance()`这已经足够了。您不需要这些奇怪的计数器，它们也不像@David 注意到的那样安全。

# ios - 插入 nil 的组方法 - 但我知道它不是

> ID：12495634
> 
> 赞同：2
> 
> 时间：2012-09-19T13:21:05.533
> 
> 标签：ios, lua, coronasdk

我正在使用 Corona SDK 编写 iOS 应用程序。该应用程序已完成，但我发现了故事板的错误。打开几个不同的故事板场景并返回到这个场景后，我收到一个错误（见下文）。这似乎是随机的，我可以毫无问题地返回现场 4 或 5 次，但其他时候它可能会在我第一次返回时出现。我只能假设这取决于 Corona 对场景的内部处理，当内存使用量达到一定水平时，它会清除场景。

我收到的错误是：

```
Runtime error
    /Users/**/contact.lua:124: attempt to call method 'insert' (a nil value)
stack traceback:
    [C]: in function 'insert'
    /Users/**/contact.lua:124: in function 'renderPage'
    /Users/**/contact.lua:179: in function </Users/**/contact.lua:166> 
```

产生此错误的代码如下。请注意，此代码在第一次打开时运行良好，并且在出现错误之前需要随机数次场景更改。

```
-----------------------------------------------------------------------------------------
--
-- contact.lua
--
-----------------------------------------------------------------------------------------

local storyboard = require( "storyboard" )
local scene = storyboard.newScene()
local widget = require( "widget" )
local tableView = require( "tableViewXL" )

-----------------------------------------------------------------------------------------
-- BEGINNING OF YOUR IMPLEMENTATION
-- 
-- NOTE: Code outside of listener functions (below) will only be executed once,
--       unless storyboard.removeScene() is called.
-- 
-----------------------------------------------------------------------------------------

-- Called when the scene's view does not exist:
function scene:createScene( event )
    local group = self.view

    local function openMenu()
        transition.to( menu, { x = 0, time=600, transition=easing.outQuad } )
        this_window = 'contact'
        native.cancelWebPopup()
    end

    local openBtn = ui.newButton{
        defaultSrc = 'images/menu.png',
        defaultX = 29,
        defaultY = 29,
        overSrc = 'images/menu.png',
        overX = 29,
        overY = 29,
        overAlpha = .5,
        onEvent = openMenu,
        text = "",
        size = 14,
        textColor = { 138, 173, 189, 255 },
        font = system.nativeFont,
        emboss = false,
        id = "Button",
    }
    openBtn.x = 28; openBtn.y = 28

    -- add background and logout button
    local bg = display.newImageRect( "images/background.png", 320, 480 )
    bg:setReferencePoint( display.TopLeftReferencePoint )
    bg.x = 0; bg.y = 0;

    -- Date
    local date = txt.newEmbossed(os.date("%d/%m/%y"), 10, 60, native.systemFontBold, 12)
    date:setTextColor( 55, 96, 127 )    -- blue
    date:setReferencePoint( display.CenterReferencePoint )
    date.x = 280
    date.y = 84

    -- Title
    local title = txt.new( "Contact", 17, 72, 'Georgia', 20 )
    title:setTextColor( 71, 24, 76 )

    -- Called when the API is able to return user info (fb page, twitter, etc)
    function renderPage( data )

        local textAddress = txt.new( data.address, 17, 120, native.systemFont, 14, display.TopLeftReferencePoint, 300, 200 )
        textAddress:setTextColor( 0, 0, 0 )     

        local phoneBar = display.newImageRect( "images/contact/phoneBar.png", 296, 24 )
        phoneBar.x = (display.contentWidth * 0.5); phoneBar.y = 230
        local phoneText = txt.new( data.phone, 20, 222, native.systemFont, 12, display.TopLeftReferencePoint )
        phoneText:setTextColor( 70, 24, 72 )

        local emailBar = display.newImageRect( "images/contact/emailBar.png", 296, 24 )
        emailBar.x = (display.contentWidth * 0.5); emailBar.y = 260
        local emailText = txt.new( data.email, 20, 252, native.systemFont, 12, display.TopLeftReferencePoint )
        emailText:setTextColor( 70, 24, 72 )

        local twitterBar = display.newImageRect( "images/contact/twitterBar.png", 296, 24 )
        twitterBar.x = (display.contentWidth * 0.5); twitterBar.y = 290
        local twitterText = txt.new( 'Twitter - @'.. data.twitter, 20, 282, native.systemFont, 12, display.TopLeftReferencePoint )
        twitterText:setTextColor( 70, 24, 72 )

        local facebookBar = display.newImageRect( "images/contact/facebookBar.png", 296, 24 )
        facebookBar.x = (display.contentWidth * 0.5); facebookBar.y = 320
        local facebookText = txt.new( 'Facebook', 20, 312, native.systemFont, 12, display.TopLeftReferencePoint )
        facebookText:setTextColor( 70, 24, 72 )

        local function phoneTouch( event )
            if ( event.phase == "ended" ) then
                system.openURL( "tel:".. data.phone )
            end
        end
        local function emailTouch( event )
            if ( event.phase == "ended" ) then
                system.openURL( "mailto:".. data.email )
            end
        end
        local function twitterTouch( event )
            if ( event.phase == "ended" ) then
                system.openURL( "https://twitter.com/intent/user?screen_name=".. data.twitter )
            end
        end
        local function facebookTouch( event )
            if ( event.phase == "ended" ) then
                system.openURL( "fb://profile/".. data.facebook )
            end
        end

        phoneBar:addEventListener( 'touch', phoneTouch )
        phoneText:addEventListener( 'touch', phoneTouch )
        emailBar:addEventListener( 'touch', emailTouch )
        emailText:addEventListener( 'touch', emailTouch )
        twitterBar:addEventListener( 'touch', twitterTouch )
        twitterText:addEventListener( 'touch', twitterTouch )
        facebookBar:addEventListener( 'touch', facebookTouch )
        facebookText:addEventListener( 'touch', facebookTouch )

        print ( textAddress )

        group:insert( textAddress )     
        group:insert( phoneBar )        
        group:insert( phoneText )       
        group:insert( emailBar )        
        group:insert( emailText )       
        group:insert( twitterBar )      
        group:insert( twitterText )     
        group:insert( facebookBar )
        group:insert( facebookText )

        phoneText:toFront()
        emailText:toFront()
        twitterText:toFront()
        facebookText:toFront()

        -- Add the map
        -- Load map template from a file
        local path = system.pathForFile( "map_template.html", system.ResourceDirectory )

        local file = io.open( path, "r" )

        local mapTemplate = file:read( "*a" )
        io.close( file )
        -- Add in our address and write to another file
        address = data.address1
        if(data.address2 == '' and data.address2 ~= '') then address = address .. ', ' .. data.address2 end
        if(data.citytown == '' and data.citytown ~= '') then address = address .. ', ' .. data.citytown end
        if(data.county == '' and data.county ~= '') then address = address .. ', ' .. data.county end
        if(data.postcode == '' and data.postcode ~= '') then address = address .. ', ' .. data.postcode end

        mapTemplate = string.gsub( mapTemplate, "||ADDRESS||", address )
        -- Now save it to a local file
        local path = system.pathForFile( "map.html", system.DocumentsDirectory )
        local file = io.open( path, "w" )
        file:write( mapTemplate )
        io.close( file )

        local options = { hasBackground=false, baseUrl=system.DocumentsDirectory, urlRequest=listener }
        native.showWebPopup( 0, 345, display.contentWidth, 130, "map.html", options )
    end

    function api.networkListener( event )
        native.setActivityIndicator( false )
        if ( event.isError ) then
            native.showAlert( "Error", "Sorry, there was a problem communicating with the server.", {"Ok"} )
        else
            json = require "json"
            local response = json.decode( event.response )
            if(response.error) then
                native.showAlert( "Error", response.error, {"Ok"} )

            else                

                data = response
                renderPage( data )
            end
        end
        return event.response
    end

    native.setActivityIndicator( true )
    api.request( 'users/me', "GET" )

    -- all objects must be added to group (e.g. self.view)
    group:insert( bg )
    group:insert( date )
    group:insert( title )
    group:insert( openBtn )

end

-- Called immediately after scene has moved onscreen:
function scene:enterScene( event )
    local group = self.view

end

-- Called when scene is about to move offscreen:
function scene:exitScene( event )
    local group = self.view

    -- INSERT code here (e.g. stop timers, remove listenets, unload sounds, etc.)
    native.cancelWebPopup()
end

-- If scene's view is removed, scene:destroyScene() will be called just prior to:
function scene:destroyScene( event )
    local group = self.view

    -- INSERT code here (e.g. remove listeners, remove widgets, save state variables, etc.)
    native.cancelWebPopup()

end

-----------------------------------------------------------------------------------------
-- END OF YOUR IMPLEMENTATION
-----------------------------------------------------------------------------------------

-- "createScene" event is dispatched if scene's view does not exist
scene:addEventListener( "createScene", scene )

-- "enterScene" event is dispatched whenever scene transition has finished
scene:addEventListener( "enterScene", scene )

-- "exitScene" event is dispatched whenever before next scene's transition begins
scene:addEventListener( "exitScene", scene )

-- "destroyScene" event is dispatched before view is unloaded, which can be
-- automatically unloaded in low memory situations, or explicitly via a call to
-- storyboard.purgeScene() or storyboard.removeScene().
scene:addEventListener( "destroyScene", scene )

-----------------------------------------------------------------------------------------

return scene 
```

当另一个场景打开时，我尝试清除这个场景。打印时`group`或`textAddress`两者都是表格，正如预期的那样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:58:07.767

我的猜测是在`renderPage`调用之间`group`变量的值（它指向`self.view`第一次调用时的保存对象）发生变化。您提到您正在打印`group`和`textAddress`. 你也可以打印`group.insert`价值吗？

```
 print ( textAddress, group, group.insert )

    group:insert( textAddress ) <-- line 124 
```

以下片段将触发相同的错误：

```
local scene = { view = { insert = function(...) print(...) end }}

function scene:createScene( event )
  local group = self.view

  function renderPage( data )
    group:insert( 'foo ' .. data )     
  end
end

scene:createScene()
renderPage(11)
renderPage(12)

scene.view.insert = nil
renderPage(13) 
```

请注意，`renderPage`每次创建新场景时都会重新创建，并且 new`renderPage`指的`group`是新创建的场景中的变量（可能是也可能不是您想要的）。

# django - django动态表单认为已经发布了

> ID：12495635
> 
> 赞同：1
> 
> 时间：2012-09-19T13:21:10.247
> 
> 标签：django, django-forms

我已经为这个问题摸索了几个小时，所以现在轮到你了：）

我制作了一个在`__init__`. 除此之外它做什么/为什么不是很重要，所以这里有一个非常简化的例子，它仍然表现出同样的问题：

```
class TestForm(forms.Form):
    def __init__(self, variable, *args, **kwargs):
        super(TestForm, self).__init__(args, kwargs)
        for i in range(0, variable):
            self.fields['f_%d' % i] = forms.BooleanField(label="Field %d" % i)

# and in the view:
return render(request, 'survey/form.html', {'f': TestForm(variable=10)}) 
```

而模板只是`{{f.as_p}}`. 该代码有效***，但***它也包含错误消息。每个 BooleanFields 中有 10 个错误表明它们是必需的。但我没有发布任何内容，当然也没有将任何发布数据传递给 TestForm。您在上面看到的是我正在运行的内容（自己尝试一下）。

那么我做错了什么？表格是否正在运行`is_valid()`，如果是，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:28:47.360

你的`__init__`方法应该是：

```
def __init__(self, variable, *args, **kwargs):
    super(TestForm, self).__init__(*args, **kwargs) 
```

我不确定这是您的问题，还是您的问题中的错字。您的示例代码意味着表单将使用`data=args`.

# search - Google+ API 搜索

> ID：12495642
> 
> 赞同：0
> 
> 时间：2012-09-19T13:21:20.713
> 
> 标签：search, google-api, google-plus

请注意，我已经浏览了 google+ 的整个文档。我找不到指定`until`或`since`在搜索查询中的方法。基本上我想在过去 7 天内每天检索 10 个帖子。
有替代方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T19:59:55.127

Google+[活动搜索 API](https://developers.google.com/+/api/latest/activities/search)不支持按日期范围限制结果。

不过，您也许可以通过一些服务器端处理来解决这个问题。您可以使用订单搜索活动，`recent`并在结果中翻页，直到帖子发布 7 天。一旦你有一个本地的帖子存储库，你可以每天任意选择 10 个。

# string - 如何在 Lua 中将字符串转换为“两个”整数？

> ID：12495645
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:21:35.257
> 
> 标签：string, lua, numbers

如何在 Lua 中将字符串转换为“两个”整数？

我有一个这样的字符串：

```
string = "10 45" 
```

我希望将其转换为两个数字，`n1=10`并且`n2=45.`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:24:56.987

试试这个

```
s="10 45"
n1,n2=string.match(s,"(%d+)%s+(%d+)")
n1=tonumber(n1)
n2=tonumber(n2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:27:42.353

您可以使用拆分功能拆分此字符串，如页面上的示例： [Split in lua](http://lua-users.org/wiki/SplitJoin)

并且 Lua 在运行时提供了数字和字符串之间的自动转换，因此将数字写入 n1 和 n2 不是问题。

# java - Java网站到Rails，重现密码加密

> ID：12495649
> 
> 赞同：0
> 
> 时间：2012-09-19T13:22:04.653
> 
> 标签：java, ruby-on-rails, encryption, hash, passwords

前段时间我想玩 Google Appengine，我做了一个 java 网站。现在我需要摆脱它，我想迁移到 Rails，网站本身不是问题，但在 Java 版本中，我使用[BasicPasswordEncryptor](http://www.jasypt.org/api/jasypt/1.8/org/jasypt/util/password/BasicPasswordEncryptor.html)来加密我的密码。

现在我不知道如何在 Ruby 上获得同样的哈希值。文档说它是 md5 加密，但哈希看起来像

> 4+RZ+7Vn/ddlNv4rdJeeg.....

所有的散列都是 32 个字符长，但它看起来不像 MD5 散列。我也不明白盐储存在哪里。

有人有任何信息可以帮助解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T23:05:18.053

BasicPasswordEncryptor 执行以下操作

a) 它将密码转换为字节数组 b) 它创建一个随机的 8 字节盐 c) 它通过 md5 使用盐传递 1000 次输入 d) 它得到 MD5 结果 - 16 个字节 e) 它添加到这个结果中盐 - 8 个字节 f)它 base64 编码 24 个字节（MD5 和 salt），据我了解，最终将是 32 个字节。

您可以在这里查看源代码： http: [//grepcode.com/file/repo1.maven.org/maven2/org.jasypt/jasypt/1.5/org/jasypt/util/password/BasicPasswordEncryptor.java](http://grepcode.com/file/repo1.maven.org/maven2/org.jasypt/jasypt/1.5/org/jasypt/util/password/BasicPasswordEncryptor.java) http:// grepcode.com/file/repo1.maven.org/maven2/org.jasypt/jasypt/1.5/org/jasypt/digest/StandardByteDigester.java#StandardByteDigester.digest%28byte%5B%5D%29

因此，您需要在 Rails 中完成相同的操作（生成新的摘要密码或检查旧的摘要密码）。

无法从摘要中恢复原始密码（这就是摘要的重点）。

# svn - svn 无法从 svn 存储库 OPTIONS 问题中签出

> ID：12495659
> 
> 赞同：0
> 
> 时间：2012-09-19T13:22:35.973
> 
> 标签：svn, vpn, smartsvn, svn-checkout

我正在尝试在 Mac 上使用 Smart svn 查看存储库。我已经成功ping通了服务器。

我也尝试使用命令行 svn checkout 并遇到了同样的问题，所以我相信有些东西配置不正确。

这是我看到的错误

`OPTIONS of 'MY_SERVER + svn path': could not connect to server (MY_SERVER)`

我省略了我的服务器的名称，因为这是一个私人项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:11:54.750

看起来我当时遇到了 VPN 问题，但没有意识到，我已经解决了这个问题。感谢所有观看此内容的人。

# linq - 左连接实体框架

> ID：12495661
> 
> 赞同：1
> 
> 时间：2012-09-19T13:22:37.737
> 
> 标签：linq, entity-framework, c#-4.0

我要丢弃 Entity Framework 5！我花了两天时间从网上寻找解决方案，但一无所获！

我尝试从表格 Artworks 和 EndValidities 进行简单的左连接，输入 IDFondazione 为 2620

```
var query = from art in db.Artworks
  join endVal in db.EndValidities.DefaultIfEmpty() 
  on art.ID_Dtsl equals endVal.IDdtsl 
  where art.ID_Cdgs == IDFondazione
  select new SchedaOpera()
  {
    Cdscheda = art.Cdscheda,
    Confirmed = art.FGconfermata,
    DSimmagine = art.DSimmgine,
    Dtsf = art.Dtsf,
    Dtsi = art.Dtsi,
    Dtsl = endVal != null ? endVal.Dtsl : "",
    Iscr = art.Iscr,
    Misa = art.Misa,
    Ldcn = art.Ldcn,
    Ldcs = art.Ldcs,
    Misd = art.Misd,
    Misl = art.Misl,
    Misn = art.Misn,
    Misp = art.Misp,
    Miss = art.Miss,
    Pvcc = art.Pvcc,
    Pvcp = art.Pvcp,
    Sgtt = art.Sgtt
  }; 
```

奇妙的实体框架持续产出

```
SELECT [Extent1].[ID_Dtsl] AS [ID_Dtsl], [Extent1].[CDscheda] AS [CDscheda], 
[Extent1].[FGconfermata] AS [FGconfermata], 
[Extent1].[DSimmagine] AS [DSimmagine], 
[Extent1].[DS_DTSF] AS [DS_DTSF], 
[Extent1].[DS_DTSI] AS [DS_DTSI], 
CASE WHEN (cast(1 as bit) <> cast(0 as bit)) THEN [Extent2].[DSdtsl] ELSE N'_' END AS [C1], 
[Extent1].[DS_ISCR] AS [DS_ISCR], 
[Extent1].[NR_MISA] AS [NR_MISA], 
[Extent1].[DS_LDCN] AS [DS_LDCN], 
[Extent1].[DS_LDCS] AS [DS_LDCS], 
[Extent1].[NR_MISD] AS [NR_MISD], 
[Extent1].[NR_MISL] AS [NR_MISL], 
[Extent1].[NR_MISN] AS [NR_MISN], 
[Extent1].[NR_MISP] AS [NR_MISP], 
[Extent1].[NR_MISS] AS [NR_MISS], 
[Extent1].[FGpubblicata] AS [FGpubblicata], 
[Extent1].[DS_PVCC] AS [DS_PVCC], 
[Extent1].[DS_PVCP] AS [DS_PVCP], 
[Extent1].[DS_SGTT] AS [DS_SGTT]
FROM  [dbo].[TPD_OPERE] AS [Extent1]
INNER JOIN [dbo].[TSA_DTSL] AS [Extent2] ON [Extent1].[ID_Dtsl] = [Extent2].[IDdtsl]
WHERE [Extent1].[CD_CDGS] = '2620' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T22:29:06.950

`DefaultIfEmpty`在实体框架中仅适用于导航属性。否则，您应该使用[`GroupJoin`](http://msdn.microsoft.com/en-us/library/bb534297.aspx)，它在综合语法中是由`join`...实现的`into`。有关更多详细信息，请参阅[这篇出色的帖子](http://www.progware.org/Blog/post/Left-Outer-Join-in-LINQ-to-Entities-%28for-Entity-Framework-4%29.aspx)。

所以您的查询可能是（GroupJoin）：

```
from art in db.Artworks
join endVal in db.EndValidities on art.ID_Dtsl equals endVal.IDdtsl
into g // can be any name
where art.ID_Cdgs == IDFondazione
... 
```

不同之处在于语句选择`art`对象和`endVal`每个`art`对象的对象集合。所以`Dtsl`属性应该是`Select`on `endVal.Dtsl`，产生一个`Dtsl`值的集合。集合可以为空（零个元素），表示外连接。

或者，如果有导航属性`Artwork.EndValidities`：

```
from art in db.Artworks
from endVal in art.EndValidities.DefaultIfEmpty() 
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T05:45:13.877

我的 Demo，在 linqpad 中测试，你可以左外连接两个表，如下所示：

```
var resultAcctInfo = (
                from p in Focus_Person
                where String.Compare(p.Login, "yourname", true) == 0 && (p.AcctStatusID == 1 || p.AcctStatusID == 2)
                join an in Focus_SecurityAnswer on p.PersonID equals an.PersonID into G
                //from g in G //You can uncommented this line to check the difference.
                join q in Focus_SecurityQuestion on G.FirstOrDefault().QuestionID equals q.QuestionID into Q  //left join question table
                //from q in Q                   
                select new
                {
                    Person = p,
                    Answer = G.FirstOrDefault(),                        
                    //Question = q,
                });
resultAcctInfo.Dump(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:27:13.310

```
from art in db.Artworks
join endValidities in db.EndValidities
on art.ID_Dtsl equals endValidities .IDdtsl into ev
where art.ID_Cdgs == IDFondazione

from endVal in ev.DefaultIfEmpty()
select new SchedaOpera()
     {
          Cdscheda = art.Cdscheda,
          Confirmed = art.FGconfermata,
          DSimmagine = art.DSimmgine,
          Dtsf = art.Dtsf,
          Dtsi = art.Dtsi,
          Dtsl = endVal.Dtsl ?? string.Empty,
          Iscr = art.Iscr,
          Misa = art.Misa,
          Ldcn = art.Ldcn,
          Ldcs = art.Ldcs,
          Misd = art.Misd,
          Misl = art.Misl,
          Misn = art.Misn,
          Misp = art.Misp,
          Miss = art.Miss,
          Pvcc = art.Pvcc,
          Pvcp = art.Pvcp,
          Sgtt = art.Sgtt
     }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T13:44:42.440

我有这个工作代码： -

```
 var res = from et in db.entity_test join en in db.entity_new on et.id equals en.id into ps from en in ps.DefaultIfEmpty() select new {Name = et.name,Email=en.email };

    GridView1.DataSource = res;
    GridView1.DataBind(); 
```

# drupal - drupal 中的 Civicrm 视图

> ID：12495668
> 
> 赞同：1
> 
> 时间：2012-09-19T13:23:05.113
> 
> 标签：drupal, civicrm

我对此进行了很多搜索，去了 irc 频道，但没有运气。我在一个项目中使用 drupal 6 和 civicrm 4.2。我有一个简单的视图来列出具有以下字段的 civicrm 事件： CiviCRM 事件

：标题培训课程
CiviCRM 自定义：详细信息：语言语言
CiviCRM 地址：国家/地区国家
CiviCRM 自定义：详细信息：持续时间持续时间

该视图按预期工作，但是当我尝试向 Country 字段公开过滤器时，操作员不会出现..无论我做什么..我试图在其他视图中公开过滤器并且过滤器工作正常但是在这个视图中它不会出现..

如果问题仅与drupal或仅与civicrm有关，我不知道，所以我希望有人能提供帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T13:43:35.553

CiviCRM 视图集成目前（2012 年 10 月）正在寻找维护者，所以我对某些位在边缘不是 100% 的功能并不感到惊讶。

[在civicrm 论坛](http://forum.civicrm.org)上问这个问题（当你在 IRC 上没有得到答案时）是一个好方法。

答案可能是“您需要最好使用补丁提交问题”。对不起，我不能更有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-11T17:55:34.567

只是一个快速更新，v4.5（当前稳定版本）的 CiviCRM Views 集成得到了很大改进，以上不再是问题。

# r - 使用 MASS:lda() 访问 LDA 中线性判别式观察的分数

> ID：12495676
> 
> 赞同：2
> 
> 时间：2012-09-19T13:23:38.540
> 
> 标签：r, cluster-analysis

```
library(MASS)
example(lda)
plot(z) 
```

如何访问 z 中的所有点？我想知道 LD1 和 LD2 上每个点的值取决于它们的 Sp (c,s,v)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T14:33:10.027

您要查找的内容是作为`predict()`类对象方法的一部分计算的`"lda"`（请参阅 参考资料`?predict.lda`）。它作为`x`生成的对象的组件返回`predict(z)`：

```
## follow example from ?lda
Iris <- data.frame(rbind(iris3[,,1], iris3[,,2], iris3[,,3]),
                   Sp = rep(c("s","c","v"), rep(50,3)))
set.seed(1) ## remove this line if you want it to be pseudo random
train <- sample(1:150, 75)
table(Iris$Sp[train])
## your answer may differ
##  c  s  v
## 22 23 30
z <- lda(Sp ~ ., Iris, prior = c(1,1,1)/3, subset = train)

## get the whole prediction object
pred <- predict(z)
## show first few sample scores on LDs
head(z$x) 
```

最后一行显示了线性判别式上对象分数的前几行

```
> head(pred$x)
          LD1        LD2
40  -8.334664  0.1348578
56   2.462821 -1.5758927
85   2.998319 -0.6648073
134  4.030165 -1.4724530
30  -7.511226 -0.6519301
131  6.779570 -0.8675742 
```

这些分数可以像这样绘制

```
plot(LD2 ~ LD1, data = pred$x) 
```

产生以下图（对于这个训练样本！）

![LDA分数图](../Images/b319307aec5747ba5f7fa82a982c7d19.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:52:19.610

当你调用函数`plot(z)`时，你实际上是在调用函数`plot.lda`——这是一个 S3 方法。基本上，该对象`z`具有类`lda`：

```
class(z) 
```

我们可以查看正在使用的实际功能：

```
getS3method("plot", "lda") 
```

事实证明这是相当复杂的。但关键点是：

```
x = z
Terms <- x$terms
data <- model.frame(x)
X <- model.matrix(delete.response(Terms), data)
g <- model.response(data)
xint <- match("(Intercept)", colnames(X), nomatch = 0L)
X <- X[, -xint, drop = FALSE]
means <- colMeans(x$means)
X <- scale(X, center = means, scale = FALSE) %*% x$scaling 
```

我们不能像以前那样绘制：

```
plot(X[,1], X[,2]) 
```

**附带**条件 很可能有一种更简单的方法可以得到你想要的东西——我只是不知道这个`lda`功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-10T23:25:48.710

[GavinSimpson](https://stackoverflow.com/users/429846/gavin-simpson)的好例子的更多细节

```
## follow example from ?lda
Iris <- data.frame(rbind(iris3[,,1], iris3[,,2], iris3[,,3]),
                   Sp = rep(c("s","c","v"), rep(50,3)))
set.seed(1)
train <- sample(1:150, 75)
z <- lda(Iris[train,-5], grouping = Iris[train,5], prior = c(1,1,1)/3)

## get the whole prediction object
pred <- predict(z) 
```

如果您想了解 的魔力`predict.lda`，可以通过以下方法手动计算（预测）LD 分数矩阵：您所要做的就是使用中心向量将原始数据（或同类新数据）居中（LDA 使用组均值的平均值）原始数据`colMeans(z$means)`，并将每个居中的观测值乘以存储在 中的 LD 载荷（线性系数）`z$scaling`。

**手动预测**

```
pred.self <- scale(Iris[train,-5], center = colMeans(z$means), scale = FALSE) %*% z$scaling 
```

**验证使用`predict.lda()`**

```
> all.equal(pred$x, pred.self) # it's the same!
[1] TRUE 
```

**验证使用`plot.lda()`**

```
plot(z, dimen = 2)
points(pred.self, col = "blue") # corresponds to plot.lda() output 
```

[图像输出](https://i.stack.imgur.com/7sF6w.png)

仔细看看`predict.lda`函数

```
getAnywhere(predict.lda) 
```

揭示了由于输入数据和 LD 分数都没有存储在`lda`对象中，因此该`predict.lda`函数必须在 R 环境中查找输入数据。

```
newdata <- eval.parent(z$call$x)
all.equal(newdata, Iris[train,-5]) # it's the same! 
```

# vba - 如何使用他的姓名和列引用循环 excel 2010 表？

> ID：12495678
> 
> 赞同：16
> 
> 时间：2012-09-19T13:23:40.513
> 
> 标签：vba, excel, excel-2010

自 Excel 2010 以来，我在 Excel 中使用了很多表格。例如，我有一个包含 3 列的表“tabWorkers”：“ID”、“Firstname”、“Lastname”。

我已经发现我可以使用 [] 引用 VBA 中的表。

例如：

```
Dim row As Range
For Each row In [tabWorkers].Rows
    MsgBox (row.Columns(2).Value)
Next 
```

这会给我每行的名字，效果很好。但我想通过使用它的列名称来使其更具动态性，如下所示：

```
Dim row As Range
For Each row In [tabWorkers].Rows
    MsgBox (row.Columns("Firstname").Value)
Next 
```

当然，我可以进行某种查找，将列索引“2”绑定到像 FirstnameIndex 这样的变量，但我想要正确的语法。我确信这是可能的，但只是没有真正记录（比如 [tabWorkers].Rows）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T14:50:06.947

我对引用表格的速记方法不是很熟悉。如果您没有得到答案，您可能会发现这个使用 ListOject 模型的速记方法很有用：

```
Sub ListTableColumnMembers()
Dim lo As Excel.ListObject
Dim ws As Excel.Worksheet
Dim lr As Excel.ListRow

Set ws = ThisWorkbook.Worksheets(2)
Set lo = ws.ListObjects("tabWorkers")

For Each lr In lo.ListRows
Debug.Print Intersect(lr.Range, lo.ListColumns("FirstName").Range).Value
Next lr
End Sub 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-20T15:39:02.597

试试这个：

```
Dim row as Range
For Each row in [tabWorkers[first name]].Rows
     MsgBox row.Value
Next 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-08-07T10:38:48.797

我也思考过这个问题，搜索了又搜索，没有找到一个很好的答案

终于今天一分钱掉了，我找到了一些我想分享的东西，以帮助那些有同样困扰我的问题的人。

简而言之，问题是：如何使用表格各部分的标准名称在 vba 中引用表格的行。事实证明这很容易。您可以引用表的特定行并按其真实名称调用列，而无需重新定义任何其他变量。

构造是这样的： Range("TableName[ColumnName]")(RowNumber)

其中 TableName 和 ColumnName 是 Excelside 中的标准表和列名，RowNumber 是从 1 到 Range("Table1").Rows.Count 的行号的简单整数索引

对于名为 Table1 的两列表，列名为 ID 和 Data，您可以使用此构造循环遍历表元素

```
For Rw = 1 To Range("Table1").Rows.Count
     MsgBox(Range("Table1[ID]")(Rw) & "has value" & Range("Table1[Data]")(Rw)    )
Next Rw 
```

这与 Excel 中使用的结构非常相似，不需要额外的命名。它非常可读！您还可以根据需要在该 (Rw) 部分之后附加适当的范围修饰符，例如 .Text、.Value、.Formula 等。

请注意，如果您有一个单行表（例如用于参数），或者希望引用较大表的第一行，您可以跳过 (Rw) 位并直接使用 Range。因此，可以使用 Range("Params[Colour]") 或 Range("Params[Height]") 等来引用名为 Params 的表，其中包含名为 Colour、Size 和 Height 的列。您不喜欢这样吗？:-)

这个发现真的让我迷上了 Tables。它们现在以可读和兼容的方式为我提供了 vba 和工作表之间的非常整洁的链接。

谢谢微软！

鲍勃·乔丹 B

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-19T14:27:47.710

我通常这样做

```
Dim rng as Range
Set rng = Application.Range("Tablename[Columnname]") 
```

您只需要参考工作簿，因为表名在整个工作簿中是唯一的。但是，如果您在不同的打开工作簿中有相同名称的表，那么这将影响活动工作簿，而不是两者或后台中的一个。为防止发生这种情况，您应该调用表格所在的实际工作表的范围对象。

希望这将表明它可以按照我上面描述的方式完成：

例如，我在 Access 数据库中有一个方法，该方法将条件格式应用于 Excel 文档中的表格，我将使用`CopyFromRecordSet`.

其中有一个签名

```
Private Function HighlightBlankOrZeroColumn(RangeToFormat As Range, HighlightColor As Long) 
```

我这样打电话

```
HighlightBlankOrZeroColumn ApXL.Range("Table1[" & SoucreRst.Fields(intCount).Name & "]"), BlankOrZeroColor 
```

其中`ApXL`是 a`New Excel.Application`并且`SoucreRst`是 ADO 记录集。

到那时，我已经通过调用这两种方法创建了我的 Recordset --> Range 一个表：

```
xlWSh.ListObjects.Add(xlSrcRange, xlWSh.UsedRange, , xlYes).Name = "Table1"
xlWSh.ListObjects("Table1").TableStyle = "TableStyleLight16" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-02-11T15:17:26.487

更简洁，在 Excel 2007 中测试：

```
Dim row As Range
For Each row In [tabWorkers].Rows
    MsgBox Intersect (row,[tabWorkers[FirstName]]).Value
Next 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-20T07:49:41.910

谢谢道格！这有很大帮助。一个工作示例：

```
Dim row As Range
For Each row In [tabWorkers].Rows
    MsgBox (row.Columns(row.ListObject.ListColumns("Firstname").Index).Value)
Next 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-01T00:43:09.667

这也是我的第一篇文章。很久没有问这个问题了，但无论如何我希望它对您有所帮助。

主要思想是保持代码尽可能整洁。

```
Set selrange = Selection.EntireRow

For Each rrow In selrange.Rows
        selrange.Parent.Parent.Names.Add "rrow", rrow
        name = [table1[name] rrow].Text
        age = [table1[age] rrow].Text
        gender = [table1[gender] rrow].Text
Next
selrange.Parent.Parent.Names("rrow").Delete 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-01-29T07:19:22.147

感谢对该线程的所有答案，以及一些额外的研究，下面是我的代码版本。基本上，您在代码的前面定义了列，并在循环遍历行时，为每一行提取已定义列的值。

```
Sub xlTableLoop_namedColumns()
Dim lst As ListObject
Dim rw As ListRow
Dim colSubject As ListColumn
Dim colDate As ListColumn
Set lst = ActiveSheet.ListObjects("mlist")  'the name of Table 
Set colSubject = lst.ListColumns("Subject") 'the name of column 1 in table header 
Set colDate = lst.ListColumns("date")       'the name of column 2 in table header
For Each rw In lst.ListRows                 'loop through all the rows
    Debug.Print colSubject.DataBodyRange.Rows(rw.Index).Value  'get value of column 1
    Debug.Print colDate.DataBodyRange.Rows(rw.Index).Value     'get value of column 2
Next
End Sub 
```

希望它可以帮助某人。

# c# - 理解十六进制值

> ID：12495679
> 
> 赞同：1
> 
> 时间：2012-09-19T13:23:41.340
> 
> 标签：c#, .net, hex

我是一个白手起家的程序员，因此我对位和字节以及十六进制值了解不多。

我使用的库之一从远程服务接收数据作为字节数组。我找到了一种转换此字节数组数据的方法：

```
public string ByteArrayToHexString(byte[] buf)
{
    if (buf == null) return "";

    StringBuilder sb = new StringBuilder(buf.Length * 2 + 2);

    for (int i = 0; i < buf.Length; i++)
    {
        sb.Append(buf[i].ToString("x2"));
    }

    return sb.ToString();
} 
```

使用这种方法，我得到如下字符串：

```
0031 
```

或者

```
0022 
```

或者

```
002d 
```

这些实际值是由服务发送的还是需要进一步转换？我应该怎么做才能获得实际值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:34:42.210

**我不会尝试回答有关您的字节值的含义或它们是否“正确”的问题，因为鉴于此处提供的信息，我们无法知道。相反，我将逐步引导您完成转换，以回答您的问题“这些实际值是由服务发送的吗？”**

A`byte[]`是一个字节数组 - 一个“字节数组”。

数组是一组固定大小的值。

C# 中的`byte`对象是一个介于十进制数 0 和 255 之间的值。

因此，“字节数组”实际上只是一堆数字，按顺序排列，所有这些数字都在 0 到 255 之间。

十六进制值只是可视化字节数组的一种方式。

（为了清楚起见，十六进制是以 16 为底，十进制是以 10 为底。）

下面列中的数字是等效的。

```
decimal    0     5    10    15    16    20     26     255
decimal    0    05    10    15    16    20     26     255  (padded with zero)
hex        0     5     a     f    10    14     1A      FF
hex        0    05    0a    0f    10    14     1A      FF  (padded with zero) 
```

因此，想象一个具有以下十进制值的字节数组：

```
4, 12, 255, 1, 0 
```

这等效于具有以下十六进制值的字节数组：

```
4, c, ff, 1, 0 
```

这也可以写成：

```
04, 0c, ff, 01, 00 
```

或更常见的：

```
0x04, 0x0c, 0xff, 0x01, 0x00 
```

或者：

```
04 0c ff 01 00 
```

或者：

```
040cff0100 
```

`002d`因此，如果您的服务返回一个字节数组并且您看到的值类似于也可以表示为十进制的 45（以 10 为底）。

简短的回答，尽管您没有告诉我们任何事情，**是的，这些十六进制值确实代表了从服务接收到的实际值。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:48:01.153

要将字节数组转换为十六进制字符串，使用内置方法可能会更好[`BitConvertor.ToString(byte[])`](http://msdn.microsoft.com/en-us/library/3a733s97.aspx)。

但是，Web 方法返回的实际值的类型为`byte[]`. 将其转换为十六进制字符串只是表示它的另一种方式。

将其显示为逗号分隔的十进制字节值列表可能更方便。

```
byte[] returnValue = ...
var commaDelimmitedListOfByteValues =
    string.Join(",", returnValue.Select(v => c.ToString())); 
```

这会给你类似的东西`"1,254,23,67,111,23,..."`。

`byte[]`在不知道返回的内容和原因的情况下，我们无法推测 the 的“真实”含义。

* * *

在这种情况下，物有所值

```
 "0031"           //Your Hex String
    "00-31"          //BitConvertor Hex String
    { 0, 49 }        //Array Inline Initializer
    "0,49"           //Comma delimited list of decimal byte values
    49               //Possible conversion to an Int32
    '1'              //Possible conversion to a Char 
```

所有这些都可能是返回值的有效表示。

* * *

会是这样吗？

> “0031”=' **1** '
> 
> "0022" = ' **"** '
> 
> “002d” = ' **-** '

一切都是猜测。

# visual-studio-2012 - AVG Anti-Virus 阻止 TFS 2012 正常运行

> ID：12495681
> 
> 赞同：0
> 
> 时间：2012-09-19T13:23:48.780
> 
> 标签：visual-studio-2012

我正在使用通过工作组连接的 3 个用户的 TFS 2012。问题是每当我暂时禁用 AVG(2012) 时，TFS 2012 将在所有机器上顺利运行。但是当我无法 AVG 并单击获取文件的最新版本时，Visual Studio 挂起并且没有响应。如何配置 AVG 以允许 TFS 工作。VS 2012 将无限挂起，直到我重新启动它。

查看 VS 2012 挂起时的运行情况，

![在此处输入图像描述](../Images/a082c8b8e4c118c6f1dd891c2408ee22.png)

此时查看 ProcMon 的运行情况，

![在此处输入图像描述](../Images/bfc9fdf185d42e0af7974bc448c2ab7e.png)

# visual-studio-2012 - 无法在 Windows Server 2008 上运行 Visual Studio 2012 远程调试器

> ID：12495686
> 
> 赞同：18
> 
> 时间：2012-09-19T13:24:04.023
> 
> 标签：visual-studio-2012, remote-debugging

我正在尝试在 Windows Server 2008 x86（不是 R2）虚拟机上运行 Visual Studio 2012 远程调试器，但我无法通过“远程调试配置”屏幕，因为 Windows Web 服务 API 无法使用以下消息

```
---------------------------
Visual Studio Remote Debugging Monitor
---------------------------
The Windows Web Services installer failed to execute. The installer exited with error 'Data of this type is not supported.'.
---------------------------
OK   
--------------------------- 
```

我唯一要做的就是这两个帖子

*   [http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/5f6f20e5-67a7-43a3-a12f-42e1ef5dfec4#7ed3da49-5ba2-4cce-8ba7-889c5f273294](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/5f6f20e5-67a7-43a3-a12f-42e1ef5dfec4#7ed3da49-5ba2-4cce-8ba7-889c5f273294)
*   [http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/59cd9a67-d549-4169-906b-0bd95030011c](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/59cd9a67-d549-4169-906b-0bd95030011c)

这似乎表明问题只是无法从任何地方下载此更新。我也尝试手动下载这些，但是我发现的唯一来源是[这](http://blogs.msdn.com/b/wndp/archive/2009/10/09/final-version-of-windows-web-services-api-for-windows-xp-vista-server-2003-and-server-2008-is-now-available.aspx)表明我的公司必须首先同意一些条款，这显然是为了让远程调试工作而付出太多努力。

如何在 Windows Server 2008（非 R2）机器上进行远程调试？

**更新：**我在[Microsoft Connect上提出了这个问题](https://connect.microsoft.com/VisualStudio/feedback/details/763521/cannot-run-visual-studio-2012-remote-debugger-on-windows-server-2008-non-r2)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T21:10:27.520

这个问题有一个（有点冗长的）解决方法。

1.  如果尚未安装，请从 Window Update (http://support.microsoft.com/kb/971644?wa=wsignin1.0) 安装“Windows Server 2008 平台更新 (KB971644)”。它将在“控制面板 -> 程序和功能 -> 已安装的更新”中安装 KB971512、KB971513 和 KB960362。

2.  [从http://go.microsoft.com/fwlink/?LinkID=255474](http://go.microsoft.com/fwlink/?LinkID=255474)安装 Windows Live Essentials

Live Essentials 的依赖项将安装所需的 WWS 更新。

希望这能让您畅通无阻，直到问题得到正确解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T11:12:18.907

我在 Windows Vista 上遇到了完全相同的问题。

我发现有人在这里上传了 WWSAPI 安装程序很有帮助： [http ://rw.internals.io/post/fix-remote-debugging-on-windows-vista-requires-wwsapi](http://rw.internals.io/post/fix-remote-debugging-on-windows-vista-requires-wwsapi)

一旦我安装了适当的 WWSAPI，我就可以直接运行 MSVSMON.EXE，而无需安装其他任何东西。诚然，我使用的是 Visual Studio 2015 而不是 VS2012，但我希望早期版本也可以使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-19T13:39:18.230

这是我为在服务器上进行远程调试所做的工作。

使用 VS2010 远程调试器，将安装它的整个文件夹复制到您的服务器。确保用于运行 msvsmon 的用户具有调试代码的正确权限

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T03:17:02.273

正如它所说，VS2010 的远程调试器仅适用于 Studio 2010。对于 VS 2012，您需要安装 VS2012 调试器，该调试器位于安装盘的 \RemoteTools\rtools_setup_x64.exe 下

# javascript - 使用 jQuery 删除多个表格行

> ID：12495696
> 
> 赞同：2
> 
> 时间：2012-09-19T13:24:33.553
> 
> 标签：javascript, jquery, jquery-selectors, tablerow

单击第一行中的链接时，我需要删除表格的三行。

行是使用 jQuery 动态创建的，并预先添加到下表中，如下所示。

```
var ups='';
        ups+='<tr data-file='+file_id+'>';
        ups+='<td width="40%">'+gl_file_name1+'</td><td>'+gl_upload_date1+'</td>';
        ups+='<td>'+gl_upload_desc+'</td>';
        ups+='<td><a href="sym.php?doc_id='+file_id+'" class="view2_fl">VIEW FILE</a> | <a href="javascript:void(0);" data-file='+file_id+' data-job='+job_id+' class="del2_fl">DELETE</a></td></tr>';
        ups+='<tr><td>'+priority+'</td><td>'+price+'</td><td>'+tender+'</td><td>&nbsp;</td></tr>';
        ups+='<tr class="bottom-row"><td colspan="4">'+notes+'</td><tr>';

        $(ups).prependTo('.app_table'); 
```

循环的次数与“文件”的次数一样多。

当按下 DELETE 链接时，我需要删除所有三行。到目前为止，我已经设法使用下面的代码删除了第一行：

```
$(this).closest("tr").remove(); 
```

我曾尝试使用 .next() 但这似乎不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T13:30:10.873

获取带有链接的行，然后您可以从那里获取下一行并添加到 jQuery 对象，然后一次性删除所有三个：

```
var tr = $(this).closest("tr");
tr.add(tr.next()).add(tr.next().next()).remove(); 
```

通过首先获取所有三行，您不会遇到要查找已删除行旁边的行的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:34:37.173

只是另一个想法，您可以使用 gt 之类的选择器。

例如：

```
$('tr:gt(1)').remove() 
```

应该删除第一行之后的行。

```
$('tr:eq(0)').remove() 
```

应该删除第一行

问候

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-19T13:29:07.537

我认为 next() 应该可以工作。尝试保存对最近 tr 的引用并首先删除其他引用，例如

```
var $tr = $(this).closest("tr");
$tr.next("tr").remove();
$tr.next("tr").remove();
$tr.remove(); 
```

演示小提琴：http: [//jsfiddle.net/rupw/tZMgs/](http://jsfiddle.net/rupw/tZMgs/)

# youtube-api - 如何获取 YouTube 内容的文件信息？

> ID：12495698
> 
> 赞同：0
> 
> 时间：2012-09-19T13:24:35.350
> 
> 标签：youtube-api

我通过 YouTube 分享功能（在 android 手机中）获得了内容 URL。

如何仅获取内容 URL 信息的文件信息？（格式、格式/信息、格式配置文件）。

最终目标，我想在 Android 手机中获取 Youtube 内容文件信息。下面获取信息？

例如

```
Format                                   : AVC
Format/Info                              : Advanced Video Codec
Format profile                           : Baseline@L3.0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:35:07.927

这不是任何 YouTube API 都支持的。

请确保您熟悉[YouTube API 服务条款，](https://developers.google.com/youtube/terms)该条款解释了您可以使用 API 做什么以及不允许做什么。

# r - 在 R 包中找不到函数？

> ID：12495699
> 
> 赞同：2
> 
> 时间：2012-09-19T13:24:40.887
> 
> 标签：r, function, package

我一直在使用`minfi`R 包。当我使用另一台计算机时，所有功能都可以正常工作。`minfi`我在自己的笔记本电脑上安装了2 天。大多数功能都可以正常工作，但是当我使用具有功能的命令时，`preprocessSWAN()`出现错误

```
Error: could not find function ¨proprocessSWAN¨ 
```

每次我只使用这个函数，在运行分析的中途，我都会收到这个错误。

我还尝试重新安装`minfi`以查看安装过程中是否出现问题。但即使重新安装后，我也发现同样的问题。此功能在我的 Windows 和其他计算机上都可以正常工作。

谁能告诉我为什么我的 ubuntu 会出现这个问题？我应该怎么做才能让它发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:28:27.360

我建议检查您在每台机器上是否有相同的版本。查看包裹的[新闻](http://bioconductor.org/packages/2.11/bioc/news/minfi/NEWS)，表明这`preprocessSWAN()`是相当新的。所以，看看：

```
library(minfi)
packageVersion("minfi") 
```

在您拥有的每台机器上。我意识到你更新了你的包，但你真的需要检查你所有的生物导体包是否都是最新的。因此，请尝试以下操作：

```
url='http://bioconductor.org/biocLite.R'
source(url)
update.packages(repos=biocinstallRepos()) 
```

另外，您运行的是相同版本的 R 吗？`version`在两台机器上键入。要获得相同的生物导体版本，您将（我认为）需要相同版本的 R。因此您可能需要升级 R。

# php - 将字段集转换为 javascript 变量

> ID：12495700
> 
> 赞同：-2
> 
> 时间：2012-09-19T13:24:44.070
> 
> 标签：php, javascript, fieldset

我在作为客户地址的 PHP 变量中有一些值。它被传递到 html 中的字段集以显示在页面上。

```
<fieldset>
            <address><?php echo $_order->getShippingAddress()->getFormated(true) ?></address>
</fieldset> 
```

我想将集合中的每个值都放入一个 javascript 变量中。我怎样才能做到这一点？

```
<?php $_ad = $_order->getShippingAddress()->getFormated(true);?> 
```

我希望将 $_ad 中的值放入 javascript 变量中。我试过这样做，但我只能得到一个像 $_ad[0] 这样的索引。那只给出一个字母！！！

这是我尝试过的，

```
val =  '<?php echo $_ad[0] ;?>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:31:44.820

您可以尝试从呈现的 HTML 中获取它

```
var addresses = document.getElementsByTagName('address'),
    addresslist = [];
for(var i = 0, len = addresses.length;i<len;i++){
    addresslist.push( addresses[i].innerHTML );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:34:56.320

由于 javascript 在客户端进行评估，而 php 在服务器端进行评估，因此没有直接的方式来交互或交换变量。

您可以公开一个 Web 服务，然后您可以通过 ajax 调用从 javascript 访问该服务。或者您可以只解析页面中的数据，因为您肯定知道其中会有一个带有地址的字段集。使用 jQuery 并尝试这样的事情：

```
var addresses = $("address").map(function() { return [this.innerHTML.split("<br>")]; }); 
```

[jsFiddle 为此](http://jsfiddle.net/PMTCp/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T13:35:43.750

使用[jQuery](http://jquery.com/)：

```
var addresses = [];

$('address').each(function(){
    addresses.push($(this).text());
}); 
```

[试试看](http://jsfiddle.net/PMTCp/)。

# php - 图片无法显示

> ID：12495704
> 
> 赞同：-4
> 
> 时间：2012-09-19T13:24:58.210
> 
> 标签：php

我已经将图像上传到数据库中，但是当我想显示它时，图像无法显示..我不知道为什么它无法显示..我的编码可能有问题..你能帮帮我吗？

上传.php

```
<?php

$id = $_POST['account'];
$code = $_POST['code'];
$price = $_POST['price'];

echo $file = $_FILES['image']['tmp_name'];
if (!isset($file))
  echo "Please select an image.";
else
{
 $image = addslashes (file_get_contents($_FILES['image']['tmp_name']));
 $image_name = addslashes ($_FILES['image']['name']);
 $image_size = getimagesize($_FILES['image']['tmp_name']);

 if($image_size==FALSE)
  echo "That's not an image.";
else
{
if (!$insert = mysql_query("INSERT INTO menu 
    VALUES('$code','$price','$image','$id')"))
echo "Problem uploading images.";
else
{
  $lastid = $code;
  echo "Image uploaded.<p />Your image:<p /><img src=get.php?id=$lastid>";
}

   }
 }
 ?> 
```

获取.php

```
 <?php
 $con = mysql_connect("localhost","root","");
 if (!$con)
 {
 die('Could not connect: ' . mysql_error());
 }

 mysql_select_db("food", $con);

 $id = addslashes($_REQUEST['FoodId']);

 $image = mysql_query("SELECT * FROM menu WHERE FoodId=$id");
 $image = mysql_fetch_assoc($image);
 $image = $image['image'];

 header("Content-type: image/jpeg");

 echo $image;
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:37:15.090

1) 记住[小鲍比桌](http://xkcd.com/327/)；始终清理数据库中的输入。

2）不要使用旧的，它们不安全且折旧（请参见[此处](http://es.php.net/mysql_query)`mysql_* functions`的红框）。相反，看看使用 PDO 或 MySQLi，它们不需要很长时间来学习，而且，恕我直言，在各个方面都好得多，包括一旦你习惯了它们就易于使用。

3) 最好将图像保存在服务器上，并且只将图像 url 存储在数据库中。这是出于多种原因；更重要的是，如果您允许用户上传巨大的图像，当您拥有多个图像时，您的数据库将有数 Gb 大小并且读取速度非常慢，并且更难定期备份。

将文件上传到您的服务器：[如何使用所需名称上传和保存文件](https://stackoverflow.com/questions/3509333/php-how-to-upload-save-files-with-desired-name)

然后，您只需要将文件名存储在数据库中。然后，您可以从数据库中检索文件名，并在您想要显示该图像时将其添加到应用程序中的 img 标记中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:29:02.510

你为什么不关闭你的 img 元素？

最好让你 var 脱离字符串：

```
echo "Image uploaded.<p>Your image:</p><img src=\"get.php?id=$lastid\" />"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:31:13.177

请通过手动查看您的数据库来确认图像已成功存储，并且实际上是可读的？，发布存储图像的内容。

仅供参考，通常最好将图像存储在服务器上的文件夹中，而不是存储在数据库中，然后将图像的路径存储在数据库中。

如果您想存储图像的路径，则可以使用以下方法：

```
<?php

$id = mysql_real_escape_string($_POST['account']);
$code = mysql_real_escape_string($_POST['code']);
$price = mysql_real_escape_string($_POST['price']);

$allowedExts = array("jpg", "jpeg", "gif", "png");
if(!isset($_FILES))
{
    die('No Image Uploaded - Please check form enctype="multipart/form-data".');
}
$fileinfo = pathinfo($_FILES['image']['name']);
$extension = $fileinfo['extension'];
if(!in_array($extension,$allowedExts))
{
    die('Invalid file type.');
}
$file   = '/uploadedimages/' . uniqid() .'.'. $extension;
if(!move_uploaded_file($_FILES['image']['tmp_name'], $_SERVER['DOCUMENT_ROOT'] . $file))
{
    die('Problem Storing Image in folder /uploadedimages/ - Please check folder exists and is writable.');
}

$insert = mysql_query("INSERT INTO menu VALUES('$code','$price','$file','$id')");
if(!$insert)
{
    die('Problem adding to db.');
}
/*
the following two echos demostrate two methods of showing the image, 
the first adds the variable by splitting the string and rejoining it,
the second nests the image inside the variable without the need to edit it.

The difference is the single and double quotes, single quotes take any content 
inside them as litteral, meaning 
    $string = "hello";
    $new_string = '$string Dave.';
    will print $string Dave. Not hello Dave.
Double quotes will accept variables and add the content they hold.
    $string = "hello";
    $new_string = "$string Dave.";
    will print hello Dave.
*/
echo 'Image Uploaded.<p>Your Image</p><img src="' . $file . '" />';

echo "Image Uploaded.<p>Your Image</p><img src=\"$file\" />"; 
```

该文件夹是 /uploadedimages/ 并且需要启用写入 (chmod777)

从另一个文件调用；您可以使用之前使用的查询随时从数据库调用图像；

```
$res = mysql_query("SELECT * FROM menu WHERE FoodId=$id");
$row = mysql_fetch_assoc($res);
$image = $row['image'];
?>
<img src="<?=$image?>" /> 
```

显然 $id 是您已经在 php 页面上定义的东西。

编辑：*其他人对我的帖子所做的编辑是不必要的 - 使用带变量的单引号并没有错，它清楚地显示了您在哪里添加变量。如果您想展示如何使用双引号，您应该同时提供两个选项可用并解释差异。你的编辑很俗气，写得不好，在双引号后加了一个空格。*

# boost-multi-index - 对大数据进行聚合：C++、boost 还是 RDBMS？

> ID：12495705
> 
> 赞同：1
> 
> 时间：2012-09-19T13:24:59.403
> 
> 标签：boost-multi-index

我想在 C++ 中读取一个包含 600M 记录的文件，并根据给定的字段标准（例如`empl.loacation='FL' and empl.dept=3`）执行聚合。

使用 C++ 是一个可行的选择吗？我可以走数据库路线，但想知道，鉴于我的要求是只读的 - 聚合，我可以只使用 C++ 吗？

我看到了[boost 多索引库](http://www.boost.org/doc/libs/1_51_0/libs/multi_index/doc/index.html)。它比普通的 C++ 或 DB 更适合这种操作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:32:53.963

要确定 Boost.MultiIndex 是否符合您的要求，请问自己以下两个问题：

1.  您的目标计算机是否有足够的能力将结构保存在内存中？您大致需要 N*(I*3*p + sizeof(element))，其中 N 是元素的数量（在您的情况下为 600M），I 是索引的数量，p 是指针的大小（4 字节在 32 位架构中，8 在 64 位环境中。）
2.  查询模式的数量是否相对较少且固定？至于什么是查询模式，您提到了示例“location=A and dept=B”。你会有多少这样的？（模数一些优化，每个查询模式都需要一个索引。）

如果这两个问题的答案都是肯定的，Boost.MultiIndex 可以为您提供帮助。

# asp.net - 如何在长请求处理期间保持 ASP.NET 会话？

> ID：12495708
> 
> 赞同：2
> 
> 时间：2012-09-19T13:25:02.883
> 
> 标签：asp.net, iis-7.5, session-state, session-timeout

场景如下：

1.  用户单击以下载需要很长时间才能完成的复杂报告（比会话超时时间长）。
2.  报告完成后，用户单击任何其他链接，但会话已过期。

用户想知道为什么会话在长时间运行的请求期间过期。

如何告诉 ASP.NET 在请求期间不要使会话过期？（在请求完成后开始计算会话超时。）

**更新：**该解决方案应该在没有 JavaScript 的情况下工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:35:36.057

Web 应用程序*应*及时响应请求。我认为实际的问题不是会话超时，而是应该将其卸载到后端时，一个长时间运行的进程正在内联发生。

与其让用户等待报告，不如在服务器上启动一个进程来生成报告并用一个响应来响应用户，表明他们的请求已排队并正在处理中，并且他们的报告将在过程完成。

然后，用户可以继续浏览网站、使用应用程序等。报告完成后，您可以通过多种方式通知用户。应用程序可以向他们发送电子邮件，甚至可能附上报告。或者可能有一些应用程序内通知系统（如 Facebook 通知程序），它们要么具有 AJAX 轮询机制，要么（响应您关于不使用 JavaScript 的更新）可能更被动，只需在他们的首页请求中通知他们以下报告的完成。

无论如何，任何需要这么长时间的过程都不应该在 Web 应用程序中嵌入。

**编辑：**作为建议的设置，您可以执行以下操作：

1.  当用户请求报告时，将记录添加到队列表中，其中包括开始生成报告所需的任何信息。
2.  将应用程序控制权返回给用户。
3.  编写轮询队列表并处理该表中的任何报告的 Windows 服务或计划的控制台应用程序。
4.  在每个报告完成后，更新其在表格中的状态。
5.  还可以选择让服务/应用程序通知用户（电子邮件、将记录添加到驱动网站上应用程序内通知系统的表中，等等）。
6.  用户可以按照通知下载报告，或者只是在网站上查看他们的“报告队列”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:37:38.297

什么需要很长时间，报告的生成或文件的下载？如果操作需要很长时间，您可能会遇到页面超时，您的方法响应时间过长。

如果会话过期是因为用户请求的文件需要很长时间才能下载，那么这是正常行为。用户请求文件并且在下一个请求之前他看起来是非活动的，会话不会刷新并且它会过期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:44:23.827

您可以通过在报告生成期间（可能多次）设置[HttpSessionState.Timeout](http://msdn.microsoft.com/en-us/library/system.web.sessionstate.httpsessionstate.timeout.aspx)值来手动延长特定会话的会话超时。

这似乎有点笨拙，但是，假设您始终能够提前知道将其增加多长时间，并且您需要确保事后将其重新设置，否则您最终会遇到“已经生成了一份报告，与那些没有的人有不同的超时时间

虽然这可能有效，但它肯定不是最好的方法，您确实应该将此作为异步任务运行。

# selenium - 如何通过传递复选框名称来选择复选框 - 使用 Selenium / Webdriver

> ID：12495709
> 
> 赞同：2
> 
> 时间：2012-09-19T13:25:03.477
> 
> 标签：selenium, webdriver, selenium-webdriver

HTML源页面：

//开始：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
    <head>
        <title></title>
    </head>
    <body>
    <div id="ctl00_ContentPlaceHolder1_control1_pnlEdit">

     <h2>
        <span id="ctl00_ContentPlaceHolder1_control1_lblEditHeader">Add New</span></h2>
    <br /><br />

    <div>
        <table class="DetailsView" cellspacing="0" cellpadding="5" rules="all" border="1" id="ctl00_ContentPlaceHolder1_control1" style="height:50px;width:600px;border-collapse:collapse;">
            <tr>
                <td>&nbsp;</td><td>              
                    &nbsp;</td>
            </tr><tr>
                <td>Category</td><td>  
                    <div style="border-style: solid; border-width: 1px; border-color: inherit; overflow:auto; height:200px; width:300px;" >
                        <table id="ctl00_ContentPlaceHolder1_control1_lstCat" class="CheckBoxList" selectionmode="Multiple" border="0">
                    <tr>
                        <td><span style="padding-left:0px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_0" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$0" /><label for="ctl00_ContentPlaceHolder1_control1_lstCat_0">Item 
                            1</label></span></td>
                    </tr><tr>
                        <td><span style="padding-left:15px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_1" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$1" />Item 
                            1-2</span></td>
                    </tr><tr>
                        <td><span style="padding-left:15px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_2" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$2" /><span>Item 
                            1-3</span></span></td>
                    </tr><tr>
                        <td><span style="padding-left:15px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_3" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$3" /><span>Item 
                            1-4</span></span></td>
                    </tr><tr>
                        <td><span style="padding-left:0px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_4" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$4" /><span>Item 
                            2</span></span></td>
                    </tr><tr>
                        <td><span style="padding-left:15px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_5" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$5" /><span>Item 
                            2-1</span></span></td>
                    </tr><tr>
                        <td><span style="padding-left:0px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_6" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$6" /><span>Item 
                            3</span></span></td>
                    </tr><tr>
                        <td><span style="padding-left:15px;"><input id="ctl00_ContentPlaceHolder1_control1_lstCat_7" type="checkbox" name="ctl00$ContentPlaceHolder1$control1$dv$lstCat$7" /><span>Item 
                            3-1</span></span></td>
                    </tr>

                </table>     

                    </div>                                                   
                </td>
            </tr><tr>
                <td>&nbsp;</td><td>&nbsp;</td>
            </tr>
        </table>
    </div>    

</div>
    </body>
</html> 
```

//结尾

**编辑：** [使用 Selenium WebDriver 选择元素后跟文本](https://stackoverflow.com/questions/11406091/selecting-element-followed-by-text-with-selenium-webdriver/11409449#11409449)

我的问题类似于上面的帖子

**结束编辑**

下面是它在运行时呈现的我的页面源代码

例如，我有为每个复选框生成的唯一复选框 ID：

```
ctl00_ContentPlaceHolder1_Control1_stCat_1
ctl00_ContentPlaceHolder1_Control1_stCat_2
ctl00_ContentPlaceHolder1_Control1_stCat_3
..........................................
ctl00_ContentPlaceHolder1_Control1_stCat_8
etc.............. 
```

我的要求是：如果我通过了，`Checkbox Text`那么它应该选择相关的复选框，例如：

如果我通过 Checkbox Text =`Some text present.....`那么 Checkbox Id`ctl00_ContentPlaceHolder1_Control1_stCat_1`应该被选中

PS：`Item 1, Item 2`只是真实数据中的一个例子我有一些随机的名字

下面是我的html代码生成：

```
<tr>
<td>Category</td>
<td>
<div style="border-style: solid; border-width: 1px; border-color: inherit; overflow:auto; height:200px; width:300px;">
<table id="ctl00_ContentPlaceHolder1_AddControl1_lstCat" class="CheckBoxList" border="0" selectionmode="Multiple">
<tbody>
<tr> 
  <td>
    <span style="padding-left:15px;">
    <input id="ctl00_ContentPlaceHolder1_Control1_stCat_1" type="checkbox" name="ctl00$ContentPlaceHolder1$AddControl1$cat$lstCat$1"/>
    <label for="ctl00_ContentPlaceHolder1_AddControl1_lstCat_8">Item 1</label>
    </span>
 </td>
</tr>

<tr> 
  <td>
    <span style="padding-left:15px;">
    <input id="ctl00_ContentPlaceHolder1_Control1_stCat_2" type="checkbox" name="ctl00$ContentPlaceHolder1$AddControl1$cat$lstCat$2"/>
    <label for="ctl00_ContentPlaceHolder1_AddControl1_lstCat_2">Item 2</label>
    </span>
  </td>
</tr>

<tr> 
  <td>
    <span style="padding-left:15px;">
    <input id="ctl00_ContentPlaceHolder1_Control1_stCat_3" type="checkbox" name="ctl00$ContentPlaceHolder1$AddControl1$cat$lstCat$3"/>
    <label for="ctl00_ContentPlaceHolder1_AddControl1_lstCat_3">Item 3</label>
    </span>
  </td>
</tr>

.............
..............
................
.................
more............... 
```

![在此处输入图像描述](../Images/7ccc1a52d5b0ce73a5a4254bd0d1c133.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:51:49.243

```
int i=1;

while(!driver.findElement(By.id("ctl00_ContentPlaceHolder1_Control1_stCat_"+i)).equals(null)){

    if(driver.findElement(By.id("ctl00_ContentPlaceHolder1_Control1_stCat_"+i)).getText()="Item1"){

        driver.findElement(By.id("ctl00_ContentPlaceHolder1_Control1_stCat_"+i)).click();
        break;

        }
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T15:11:04.560

实际上，您可以使用另一种方法。

```
String  cssSelectorChckbox1= "table[id='ctl00_ContentPlaceHolder1_AddControl1_lstCat']" tbody tr td>input[id='ctl00_ContentPlaceHolder1_Control1_stCat_1']";
String cssSelectorChckboxLabel1="table[id='ctl00_ContentPlaceHolder1_AddControl1_lstCat']" tbody tr td>label[for='ctl00_ContentPlaceHolder1_AddControl1_lstCat_8']";

//then you can use 2 js methods: one for click checkbox, second one for validation label text near chckbox:

public void  clickOnTheElement(String cssLocator){
JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();
        stringBuilder.append("var x = $(\'"+cssLocator+"\');");
        stringBuilder.append("x.click();");
        js.executeScript(stringBuilder.toString());

}

public String getTextOfTheElement(String cssLocator)
{ JavascriptExecutor js = (JavascriptExecutor) driver;
        StringBuilder stringBuilder = new StringBuilder();

stringBuilder.append("var x = $(\""+cssLocator+"\");");
        stringBuilder.append("return x.text().toString();")       ;

       String res= (String) js.executeScript(stringBuilder.toString());
       return res;
}

//using first method you are able to click on checkbox. 

clickOnTheElement( cssSelectorChckbox1);
//using second method you are able to verify that label near checkbox is correct:
String actualCheckboxLabel=getTextOfTheElement(cssSelectorChckboxLabel1);
Assert.assertTrue(actualCheckboxLabel.equals("expected text near checkbox")) 
```

希望这对您有所帮助）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T15:33:39.470

您可以使用 XPath 表达式，例如：

```
driver.find_element_by_xpath("//input[normalize-space(../label) = 'Item 1']") 
```

# c - 使用预处理器语法获取 const char

> ID：12495711
> 
> 赞同：3
> 
> 时间：2012-09-19T13:25:07.787
> 
> 标签：c, macros, c-preprocessor, stringification

为了纠正错别字，并添加我忘记提及的问题，这里是宏：

```
#define SUFFIX .new
#define STR(x) #x
#define GENFILE(name,suff) STR(timings/name suff)

GENFILE(test1, SUFFIX) 
```

上面的代码生成`timings/test1 .new`，如果我没有额外的空间，我会得到我想要的，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:31:09.000

更简单：只要说`#define GENFILE(name) STR(timings/name)`.

斜杠分隔预处理器标记，因此`GENFILE(test1)`变成`STR(timings/test1)`了作为一个整体进行字符串化的标记。

（现在你可以说`#include GENFILE(myheader)`。）

* * *

[或者，您可以说 `#define GENFILE(name) STR(timings/) #name`，但这会导致两个连接的字符串 `"timings/" "test1"`。请注意，正如@hvd 正确观察到的那样，字符串连接不能在`#include`指令内部使用。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:31:47.843

没有单一的标记（如果你愿意，可以称之为“单词”）`/test1`。是标识符后面`/test1`的除法运算符，它们不能加在一起。幸运的是，你不需要。如果它们一起出现而没有任何中间空格，并且您对其进行字符串化，则不会插入空格。所以只需删除.`/``test1``##`

还要确保您的宏参数名称与您在定义中使用的名称相匹配。`testname`并且`name`不一样。

```
#define STR(x) #x
#define FILE(testname) STR(timings/testname) 
```

**更新**：

由于您已经编辑了问题，因此以上不再是完整的答案。

您获得了空格，因为您在宏定义中包含了一个空格，并且您需要重写您的宏定义以不包含空格。一种方法是使用这样的额外宏：

```
#define SUFFIX .new
#define STR(x) STR_(x)
#define STR_(x) #x
#define ID(x) x
#define GENFILE(name,suff) STR(timings/ID(name)suff)
GENFILE(test1, SUFFIX) // expands to "timings/test1.new" 
```

请注意，`STR`宏现在还需要一个额外的辅助宏，以便`ID`在将其包含在字符串中之前进行扩展。

# objective-c - 获取 EKRecurrenceRule 中 startDate 和 endDate 之间的出现次数

> ID：12495719
> 
> 赞同：4
> 
> 时间：2012-09-19T13:25:49.797
> 
> 标签：objective-c, ios, xcode, date

前提是存在一个recurrenceRule 实例，它可以保存一组复杂的关于一周、一个月、一年或更长时间内的重复规则。我想找出这些规则产生的出现次数。

### 示例规则：

```
Start date:   19 Sept 2012
End date:     24 Nov 2014
Recurrance:   EKYearlyRecurrence
monthsOfYear: Jan Mars July October
daysOfWeek:   Mon Thur Sat 
```

有可能以简单的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T17:56:18.837

我不认为 EKRecurrenceRule 应该以这种方式使用。EKRecurrenceRule 通常不用于此类计算（您甚至无法更改对象的属性 - 它是不可变的）。它类似于包装器，用于保存有关重复的信息，然后由 EventKit 框架使用。我实际上怀疑是否有一个内置的 API 可以准确地获得您需要的结果。然而，在例如 NSDateComponents 中有一些有用的方法，结合 NSCalendar 可以为您提供一些有用的结果，但您需要编写一些代码。

# windows - Windows 上的 Perl GUI 编程

> ID：12495720
> 
> 赞同：12
> 
> 时间：2012-09-19T13:25:53.353
> 
> 标签：windows, perl, user-interface

我正在寻找用于 Windows 上的 Perl GUI 编程的工具，用于教育/内部开发，主要与科学相关。

我的第一选择是 PerlQt。我的一个朋友正在使用 Qt 和 C++ 进行开发，所以我希望能从他那里得到一些帮助。Qt 也有一个 GUI 创建器，Linux 与 Perl 有很好的集成。不幸的是，我未能使其在 Windows 上运行。我搜索了其他选项，搜索后仍然不清楚。这就是我到目前为止所得到的。

*   Perl/Tk：广泛的用户群、良好的文档、相对较低的学习曲线。但老样子，可能不活跃。然而，一些文章说它现在重新启动并且具有原生外观。
*   wxPerl：原生外观。但学习曲线陡峭。并非所有 wx 库都移植到 Perl。有些人喜欢它，有些人讨厌它。
*   Win32:GUI：原生外观，可以使用所有Windows API。需要强制安装，因为其中一项测试失败。仍然有效，但不确定它是否安装正确。
*   XUL::GUI：使用 FireFox 引擎，CSS 打字。

我可以设法安装它们并成功显示“你好，世界”。然而，我无法决定去哪一个，并且在线信息有时看起来相互矛盾。

你会在人类效率（易于阅读和编写代码）、计算效率和 GUI builder 的可用性方面比较这些工具吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T15:22:54.330

对于真正的跨平台 GUI 编程，我建议[`Prima`](http://p3rl.org/Prima)或[`Tk`](http://p3rl.org/Tk). 看起来都不是很好，但它们有效。

不过，我认为这些天使用 Web 前端比使用真正的 GUI 可能会更好地为您服务（呵呵）；这很容易使用网络框架。我建议[`Mojolicious`](http://mojolicio.us)尽管其他人喜欢[`Dancer`](http://perldancer.org)。我推荐 Mojo 而不是 Dancer 的主要原因是 Mojo 在一个小包中提供了许多功能。话又说回来，这就是其他人会推荐Dancer的原因，所以这是一个折腾。

最后一个考虑因素是 Mojo 带有开箱即用的 WebSockets。这让你的 webapp 很容易感觉更像一个真正的应用程序，与服务器对话并在不重新加载的情况下获得响应。

编辑：我现在有一个使用 Perl/Mojo 后端和 Web 前端编写的桌面应用程序的好例子：Azawawi 的[`Farabi`](http://p3rl.org/Farabi). 它是一个文本编辑器，用于编写 Perl。它的 GUI 是浏览器，使它成为一个简单的跨平台编辑器。我推荐它作为类似任务的起点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-24T09:52:56.053

[我的 perl 模块IUP](http://search.cpan.org/dist/IUP/)的自我宣传：

*   它使用本机小部件（= 您的应用程序将具有本机外观）
*   它也略微跨平台（Win32、GTK、Motif）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T10:05:49.090

以下是对小部件工具包的一个很好的概述——其中许多工具包为流行的编程语言提供了包装：

[http://en.wikipedia.org/wiki/List_of_widget_toolkits](http://en.wikipedia.org/wiki/List_of_widget_toolkits)

我推荐`[wxwidgets][1]`aka`wxwindows`或基于浏览器的解决方案（例如 XULrunner）或纯基于 Javascript+HTML5 的解决方案。目前我正在开发一个只有基本控制台 UI 的跨平台工具，然后使用 websockets 和 HTML5 + SVG 来实现更复杂的 UI 呈现和 UX。为了使网络内容动态化，我使用了一个简单的模板引擎。

（*就个人而言，对于概述问题，我有很好的经验将术语`wikipedia`和`list of`某处放在受信任的搜索引擎的搜索查询中。对勤奋的维基百科社区表示敬意。*）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-19T18:15:46.733

我有使用 PerlTk 和 wxPerl 的经验。wxPerl 是我可以推荐的相当不错的工具包。还有一个 GUI builder 可用[wxGlade](http://wxglade.sourceforge.net/)

我在 Tk 中拥有的几个应用程序教会我全心全意地讨厌那个工具包：

1.  看起来很糟糕
2.  不成比例的编码时间花费在解决各种错误和寻找缺失功能的解决方法上

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T15:10:55.807

perlmonks 上有一个过时的[Perl GUI 常见问题解答。](http://perlmonks.org/?node_id=108708)

[PerlQt](http://www.perlmonks.org/?node_id=982634)密切跟踪 Qt。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-31T05:12:54.340

Hta、HTML 应用程序、mshta.exe... 旧的但工作起来就像一个魅力。优点：基本上可以访问您开发内部可信应用程序所需的一切。缺点：几何变得乏味，perlscript（vs vbscript/javascript）文档/示例基本上不存在

# php - 强制 CakePHP 返回 tinyint 作为 int 而不是 bool

> ID：12495721
> 
> 赞同：0
> 
> 时间：2012-09-19T13:26:04.773
> 
> 标签：php, cakephp

试图让 cakephp 返回`tinyint(1)`as`int`而不是 as `bool`。我不想为小的选择框更改我的整个数据库，只是为了让它适合 CakePHP。

我在以下行找到了`lib/Cake/Model/Datasource/Database/Mysql.php`

```
if (($col === 'tinyint' && $limit == 1) || $col === 'boolean') {
        return 'boolean';
    } 
```

评论这条线没有用。

有人有这个问题的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:50:32.987

不要触摸框架。覆盖相关模型的 afterFind() 方法并将您的字段转换为正确的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:52:37.650

你需要这个来阻止 Cake 将你的输入输入到复选框中吗？

只需`array('type'=>'text')`在`input()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T22:33:04.013

除非您计划贡献更改，否则切勿修改核心。如果您绝对必须覆盖 MySQL 数据源，则可以通过复制文件来修改核心

从

```
/lib/Cake/Model/Datasource/Database/Mysql.php 
```

进入

```
/app/Model/Datasource/Database/Mysql.php 
```

并对副本进行更改。Cake 会自动使用你提供的这个副本，而不是核心中的副本。

仅将此作为最后的手段。您将负责维护自己的 MySQL 驱动程序副本，除非您自己修补它，否则您不会收到它的安全和性能更新。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-08T03:29:10.197

您无需在 Cake 中进行任何更改。只需更新您的 MySQL 表，并将列类型从“tinyint”更改为“int”。它将以相同的方式存储在 MySQL 中，并且 Cake 会自动知道返回 int 值，而不是布尔值 (true/false)。

请记住在更新 MySQL 数据库后删除您的模型缓存文件，以防应用仍在从缓存中读取数据。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-26T17:22:11.527

如果将列长度更改为大于 1 的值，那么 CakePHP 将把列作为字符串而不是布尔值返回。TINYINT 最多可包含 3 个字符，因此您只需在表上运行以下查询，同时保持 TINYINT 格式：

```
ALTER TABLE `your_table_name` MODIFY `your_column_name` TINYINT(3); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-15T09:27:35.803

如果由于某种原因您不想更改列的类型，那么您可以[强制转换](https://www.w3schools.com/sql/func_mysql_cast.asp)并获得所需的值，下面的代码可以作为替代方案。

仅供参考：已注册 = tinyint(1)

```
$this->MODEL_NAME->query("SELECT id,CAST(registered AS SIGNED) as registered FROM users where id = 11223344;"); 
```

# selenium - 在 Selenium WebDriver 的属性中使用 XPath 通配符

> ID：12495723
> 
> 赞同：20
> 
> 时间：2012-09-19T13:26:10.547
> 
> 标签：selenium, xpath

我想在我的属性中使用通配符。例如，这是我的常规 XPath：

```
//input[@id='activation:j_idt84:voId:1']` 
```

我想`j_idt`用通配符替换数字，因为数字是动态的。我正在寻找这样的东西：

```
//input[@id='activation:*:voId:1'] 
```

我不知道如何解决这个问题。我的想法甚至可能吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-19T13:41:07.890

不幸的是，XPath 中没有字符串通配符。但是，您可以使用多个`contains()`and`starts-with()`来过滤这样的内容。

```
//input[starts-with(@id, 'activation:') and contains(@id, ':voId:1')] 
```

此外，这个答案也可能有用：[selenium: Is it possible to use the regexp in selenium locators](https://stackoverflow.com/questions/2007367/selenium-is-it-possible-to-use-the-regexp-in-selenium-locators/2007531#2007531)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:46:05.487

您*可以*`matches`使用XPath 2.0 中提供的函数来使用字符串通配符：

```
//input[matches(@id, 'activation:.*:voId:1')] 
```

# javascript - FusionCharts-安全警告

> ID：12495724
> 
> 赞同：0
> 
> 时间：2012-09-19T13:26:10.980
> 
> 标签：javascript, fusioncharts

大家好，我已经实现了 Fusioncharts，它在我的本地主机上运行良好，但是当我部署到我们的登台服务器进行测试时，当我们运行一个包含图表的页面时，我会收到安全警告：

我使用这样的 Javascript 图表，例如：

```
var myChart = new FusionCharts("../js/FusionCharts/MSColumn3D.swf", "myChartId", "450", "450", "0", "1"); 
```

![在此处输入图像描述](../Images/5a85ac7eabeecf9eaf80a9f967fe92e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:50:14.097

请参考以下链接，

[http://forum.fusioncharts.com/topic/12495-security-warning-using-javascript-charts/page_ *p* _49444_ *hl* _security+warning_ *fromsearch* _1#entry49444](http://forum.fusioncharts.com/topic/12495-security-warning-using-javascript-charts/page__p__49444__hl__security+warning__fromsearch__1#entry49444)

希望这可以帮助！

# c# - 是否可以将网格转换为图像文件，例如位图？

> ID：12495729
> 
> 赞同：0
> 
> 时间：2012-09-19T13:26:22.853
> 
> 标签：c#, wpf

假设我有一个名为“GridA”的网格

我搜索过的所有地方都表明我使用

```
 GridA.DrawToBitmap 
```

但是网格没有那种方法..

然后我变得狡猾，将它包裹在一个堆栈面板中并称为“stackpanel1”

面板也没有这种方法。

那么我应该如何将我的网格保存为 wpf 中的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T21:34:06.363

您可以将任何绘图视觉对象转换为位图。这是我用来从 WPF 绘制的控件添加图标覆盖、将其添加到 UserControl 或重构它的一些代码。有关完整示例，请参见[http://alski.net/post/2012/01/11/WPF-Icon-Overlays.aspx](http://alski.net/post/2012/01/11/WPF-Icon-Overlays.aspx)

```
 protected void InitializeBitmapGeneration()
    {
            LayoutUpdated += (sender, e) => _UpdateImageSource();
    }

    public static readonly DependencyProperty ImageSourceProperty = DependencyProperty.Register(
       "ImageSource",
       typeof(ImageSource),
       typeof(CountControl),
       new PropertyMetadata(null));

    /// <summary>
    /// Gets or sets the ImageSource property.  This dependency property 
    /// indicates ....
    /// </summary>
    public ImageSource ImageSource
    {
        get { return (ImageSource)GetValue(ImageSourceProperty); }
        set { SetValue(ImageSourceProperty, value); }
    }

    private void _UpdateImageSource()
    {
        if (ActualWidth == 0 || ActualHeight == 0)
        {
            return;
        }
        ImageSource = GenerateBitmapSource(this, 16, 16);
    }

    public static BitmapSource GenerateBitmapSource(ImageSource img)
    {
        return GenerateBitmapSource(img, img.Width, img.Height);
    }

    public static BitmapSource GenerateBitmapSource(ImageSource img, double renderWidth, double renderHeight)
    {
        var dv = new DrawingVisual();
        using (DrawingContext dc = dv.RenderOpen())
        {
            dc.DrawImage(img, new Rect(0, 0, renderWidth, renderHeight));
        }
        var bmp = new RenderTargetBitmap((int)renderWidth, (int)renderHeight, 96, 96, PixelFormats.Pbgra32);
        bmp.Render(dv);
        return bmp;
    }

    public static BitmapSource GenerateBitmapSource(Visual visual, double renderWidth, double renderHeight)
    {
        var bmp = new RenderTargetBitmap((int)renderWidth, (int)renderHeight, 96, 96, PixelFormats.Pbgra32);
        var dv = new DrawingVisual();
        using (DrawingContext dc = dv.RenderOpen())
        {
            dc.DrawRectangle(new VisualBrush(visual), null, new Rect(0, 0, renderWidth, renderHeight));
        }
        bmp.Render(dv);
        return bmp;
    }
} 
```

# android - 默认语言 Android 应用程序

> ID：12495734
> 
> 赞同：1
> 
> 时间：2012-09-19T13:26:50.607
> 
> 标签：android, localization

我是安卓新手。我开发了一个应用程序并在 Play 上发布。我的应用程序的默认语言是土耳其语。但是当我发布时，我没有看到土耳其语描述部分。有英语作为默认选择的语言。

我该如何写土耳其语描述？

编辑：这是一个更清晰的屏幕截图。

![语言](../Images/738039d186f20afa1a60e04a9a658a20.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:33:59.420

在 Apps Developer Console 中，您不能添加语言并设置默认语言。只需搜索“添加语言”链接，您必须在此处添加您的土耳其语描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T20:55:01.567

尝试新设计。当您尝试编辑您的应用程序时，页面顶部有一个“添加翻译”按钮。那里有土耳其语选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:36:19.563

你不能用土耳其语翻译你的应用描述。但是你可以用谷歌开发者控制台提供的语言翻译你的描述。

转到您的发布者帐户->语言->添加语言->选择要翻译的语言->检查使用自动翻译填充字段...->确定。

# javascript - Internet Explorer 中的数组 indexOf

> ID：12495737
> 
> 赞同：0
> 
> 时间：2012-09-19T13:26:52.717
> 
> 标签：javascript, arrays

我已经为 Array indexOf 定义了原型（以支持 Internet Explorer 中的数组 indexOf）

```
if(!Array.prototype.indexOf){
    Array.prototype.indexOf = function(obj){
        for(var i=0; i<this.length; i++){
            if(this[i]==obj){
               return i;
            }
         }
         return -1;
     }
} 
```

当我创建具有值 [1,2,3] 的数组时，此 indexOf 代码片段添加到数组中，如下所示

```
["1","2","3",function(obj){for(var i=0;i<this.length;i++){if(this[i]==obj){return i;}}return -1;}] 
```

这个问题只发生在 IE 中。

谁能帮我解决这个问题。提前致谢。

* * *

我没有`for...in`在任何地方使用循环，为此我使用 jQuery sortable toArray 方法 `.sortable("toArray");`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:50:59.730

我假设在某些时候您正在使用`for...in`循环来迭代数组的元素。例如：

```
for (var elem in myArray) {
    //Do stuff...
} 
```

循环将枚举对象的`for...in`所有可枚举属性，包括它从其原型链中的祖先继承的属性。您已向`Array`原型添加了一个方法：

```
Array.prototype.indexOf = function(obj){ //... 
```

此属性是可枚举的（您不能定义不可枚举的属性 - 请参阅[`Object.defineProperty`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)- 在旧版本的 IE 中），因此`for...in`循环将包含此属性。

简单的解决方案是**永远不要使用`for...in`循环来遍历数组**！请改用普通`for`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:49:21.593

您的问题是您的新`indexOf()`方法被标记为“可枚举”。不幸的是，在 IE7 或非标准模式的 IE8 中没有解决此问题的方法。但是您至少可以通过使用一些 ES5 技巧来修补标准模式 IE8 的问题。修改你的代码看起来像这样，如果你处于 IE8 标准模式，它应该去掉额外的元素：

```
(function () {
    var indexOfFn = function(obj){
        for(var i=0; i<this.length; i++){
            if(this[i]==obj){
               return i;
            }
         }
         return -1;
    };

    if(!Array.prototype.indexOf){
        if(typeof Object.defineProperty === "function") {
            Object.defineProperty(Array.prototype, "indexOf", {
                value: indexOfFn,
                enumerable: false
            });
        } else {
            Array.prototype.indexOf = indexOfFn;
        }
    }
}()); 
```

我知道这很罗嗦，所以可能不值得努力。但它也将保护您的 JavaScript 免受其他人的错误编码，他们最终可能会使用带有 for-in 循环的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:41:00.660

很简单，你的数组现在包含4个元素，其中第四个是函数对象，你没有为数组对象定义一个新方法，更不用说所有数组对象了。只需将第一个片段粘贴到脚本的最顶部，然后：

```
 var foo = [1,2,3];
 alert(foo.indexOf(2));//alerts 1 
```

将`Array.prototype`其视为每个数组的模板。每当您尝试访问未定义的数组的某些属性或方法时，而不是抛出错误，JS 将首先检查该`Array.prototype`对象是否不具有该方法/属性。如果是这样，JS 将使用该代码，并将其应用于最初调用它的数组。在上面的例子`foo.indexOf(2)`中可以写成`Array.prototype.indexOf.apply(foo,[2]);`。也就是说：JS 自动将原型的功能应用到`foo`.

您的*“完整”*代码应如下所示：

```
if(!Array.prototype.indexOf)
{
    Array.prototype.indexOf = function(obj)
    {
        for(var i=0; i<this.length; i++)
        {
            if(this[i] === obj)//preferable, use strict comparison
            {
                return i;
            }
        }
        return -1;
    };
}
var yourArray = [1,2,3,4,'4'];
alert(yourArray.indexOf(4));//alerts 3
alert(yourArray.indexOf('4'));//alerts 4 when using strict comparison, if not, alerts 3 
```

**[这是一个小提琴](http://jsfiddle.net/GaAwP/)**，在 IE8 中检查，它工作得很好

只需google*原型继承*和*原型链*或*在JS*等中增加原型，阅读并感到困惑！;)

# c# - 限制加密中使用的字符

> ID：12495746
> 
> 赞同：4
> 
> 时间：2012-09-19T13:27:31.297
> 
> 标签：c#, .net, asp.net-mvc-3, encryption

我有一个非常简单的加密类，它使用tripleDES 来加密我网站上特定页面的查询字符串。我这样做是为了防止人们根据我们的数据库 ID 顺序抓取页面。

反正我用过 [这种加密方式](http://www.deltasblog.co.uk/code-snippets/basic-encryptiondecryption-c/)

但是，它包括`3d%`和其他一些`special characters`不应出现在查询字符串中的内容，并且出于安全目的被 Url Scan 拒绝。`=`在生成的实际加密字符串中有一个。我不想更改 URL 扫描，但我想知道是否有办法限制加密**字符****或**`tripleDES crypto provider`其他东西。我对加密几乎一无所知，而且我实际上只是在混淆查询字符串，所以我对查询字符串加密的其他选项持开放态度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-19T13:38:39.433

您链接的方法使用[Base64 编码](http://en.wikipedia.org/wiki/Base64)将加密的字节数组（其中可能包含各种“不可打印”字节）转换为仅包含`A`- `Z`、`a`- `z`、`0`- `9`、`+`和.`/``=`

但是，最后 3 个不适用于 URL。

您可以对 Base64 字符串做一个简单`String.Replace`的操作，将这些字符替换为 URL 安全字符，例如`+`=> `-`、`/`=>`_`和`=`=> `.`。您甚至可以完全放弃`=`结尾，因为它们只是填充字符。[（ RFC3548 建议进行](https://www.rfc-editor.org/rfc/rfc3548#section-4)`=`前两个替换并删除。）

然后，当您要解密字符串时，只需反转此替换即可。如果你`=`完全删除了，添加`=`直到字符串的长度是 4 的倍数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T13:38:19.753

如果您不知道自己在做什么（即使您知道），也不应该使用加密货币。相反，按原样使用加密，然后对结果进行[UrlEncode](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)。

# ssl - SSL证书的签发速度是什么意思？

> ID：12495747
> 
> 赞同：0
> 
> 时间：2012-09-19T13:27:32.213
> 
> 标签：ssl, ssl-certificate

发行速度如何影响我的网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:34:25.193

它只是一个指标，与您在申请证书后必须等待多长时间才能拿到证书有关。

仅执行电子邮件域检查的基本证书的颁发者可以快速完成，具有扩展验证的证书（“绿条”EV-SSL 证书等）的颁发者在运行额外的身份检查时需要更长的时间。

它不会以任何方式影响您的网站，除非您在续订时没有计划好发行期限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:35:37.503

这是您在请求后可以获得证书的速度。证书提供商在颁发证书之前验证您的业务，这需要时间。它不会影响您网站的用户。

# zsh - Oh My ZSH 主题不匹配颜色

> ID：12495750
> 
> 赞同：3
> 
> 时间：2012-09-19T13:27:41.420
> 
> 标签：zsh

我正在尝试使这个 zsh 主题工作：[https ://gist.github.com/3712874](https://gist.github.com/3712874)

我对其进行了一些小改动，但仍然存在一个问题。似乎直角三角形字形的颜色与文本背景的颜色不同。看这张图片：

![ZSH 主题](../Images/d5b377613cc47bc1cea6e98c444dd0df.png)

任何想法为什么会发生这种情况，以及如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:51:20.700

我让它看起来很不错。我不得不去改变我的颜色的不透明度。我不得不稍微调整一下，而不是 100%，并将它们设置在 76-81% 左右，具体取决于它是什么颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-14T10:11:52.710

我相信我最终切换到 iTerm2 来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T17:44:16.930

**解决方案**

在使用终端的 Linux 上，我必须更改 Profile Preferences->Colors。例如，我想使用主题[dpoggi](https://github.com/robbyrussell/oh-my-zsh/wiki/Themes#dpoggi)。[我下载了主题图像，然后使用滴管工具匹配dpoggi 源代码](https://github.com/robbyrussell/oh-my-zsh/blob/master/themes/dpoggi.zsh-theme)中使用的“红色”“绿色”“青色”和“洋红色” 。

**dpoggi 主题**

[![dpoggi 主题](../Images/81c9fa2588679e42cc50d833d3f17f1a.png)](https://i.stack.imgur.com/4eBJg.png)

**终端配置文件首选项->颜色** [![Linux 配置文件首选项颜色](../Images/ac420dace7f56363d457aeef661e0f72.png)](https://i.stack.imgur.com/rZ4j7.png)

# git - 为什么 git 不允许我安全地删除分支？

> ID：12495756
> 
> 赞同：35
> 
> 时间：2012-09-19T13:28:03.273
> 
> 标签：git, merge, branch

我需要合并两个分支 -`second`进入`first`然后摆脱`second`. 这是我所做的：

*   `git clone`d 获得新副本的项目
*   `git checkout --track origin/second`，进行了一些更改，并提交了
*   `git checkout --track origin/first`，进行了一些更改，并提交了
*   `git merge second`（git说“递归合并”）
*   `git branch -d second`

然后 git 说：

```
$ git branch -d second
warning: not deleting branch 'second' that is not yet merged to
         'refs/remotes/origin/second', even though it is merged to HEAD.
error: The branch 'second' is not fully merged.
If you are sure you want to delete it, run 'git branch -D second'. 
```

为什么会这样？我以前从未在合并后收到此消息。合并工作得很好，没有冲突。如何安全地删除`second`分支？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-20T20:49:49.453

根据我的实验以及@knittl 和@twalberg 的评论，git 似乎只是希望我`second`在删除之前将我的更改推送到分支。

我做了：

```
$ git checkout second
$ git push origin second
$ git checkout first
$ git branch -d second 
```

它在没有警告的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-28T05:52:25.130

基本上，本地“第二”分支与远程“第二”分支不同步，git 不希望你丢失任何工作。

在这种情况下，更新不一定会丢失，因为它已经合并到“HEAD”。如果“HEAD”分支被推送到远程，应该没有问题。但是，如果“HEAD”有问题，您仍然有可能丢失工作

总而言之，它只是一个额外的保证，随意强行删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-09T00:54:41.557

我认为这实际上发生在您合并远程分支（即通过 a `Pull Request`）并删除远程分支时。

在我的实验中，**不**删除远程分支并`-d`在本地使用**FIRST**是解决方案。

# javascript - 如何忽略javascript正则表达式中的换行符？

> ID：12495757
> 
> 赞同：1
> 
> 时间：2012-09-19T13:28:03.980
> 
> 标签：javascript

我有一个简单的例子：

```
data = data.replace(/\/\*(.*?)\*\//g,"") 
```

如何忽略此正则表达式中的换行符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:29:18.407

将`m`（多行）添加到您的正则表达式选项

```
data = data.replace(/\/\*(.*?)\*\//gm,"") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:33:43.850

'。' 不匹配换行符。为了匹配换行符，您需要有字符集 [\s\S]，换句话说，您将有：

```
data = data.replace(/\/\*([\s\S]*?)\*\//g,"") 
```

请参阅[此处](http://jsfiddle.net/Dt4XK/)进行快速演示。

# windows - 有没有 USB 终端

> ID：12495762
> 
> 赞同：1
> 
> 时间：2012-09-19T13:28:17.423
> 
> 标签：windows, usb

我正在寻找一个类似于 Windows 中的 HyperTerminal 或 Putty 的 USB 终端。我正在开发一个控制 USB 设备的 C# 软件。我打算使用 WinUSB，因为我的设备不适合任何设备类。

所以当我调试的时候，我想要一个软件在里面输入 VID 和 PID，然后向设备发送数据和从设备接收数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T07:22:07.560

AFAIK，没有这样的事情。USB通信比标准的终端接口丰富得多。与终端不同，您可以有多个接口、端点和传输方式。有一些工具可以查看总线上发生了什么，例如[USBlyzer](http://www.usblyzer.com/) ...但我不知道有什么工具可以提供注入请求的接口。我认为系统上的其他驱动程序总是在处理设备，这种能力会破坏驱动程序。我相信如今，您可以在用户模式下做很多事情。您可能想签[出 #usblib](http://www.icsharpcode.net/opensource/sharpusblib/)。它可能有一些方便的东西可以让你更接近你想要的东西。

# css - 适用于不同字体大小的 CSS 文本阴影

> ID：12495781
> 
> 赞同：2
> 
> 时间：2012-09-19T13:29:30.233
> 
> 标签：css

我的上有以下 CSS

```
h2 {
    font-family: Arial, Verdana, sans-serif;
    color: #fff;
    text-shadow: 0 6px 0 #E5E5E5
} 
```

问题是这只在某些字体大小上看起来不错，而在其他字体大小上看起来真的很糟糕。如果字体真的很大，阴影几乎看不到，如果字体太小，阴影会使文本不可读。在我的网页中，这个特定元素的字体会动态改变大小。它可以小至 10 像素，大至 200 像素。

由于某种原因，在 % 中设置阴影位置不起作用，人们希望它会占用 font-size 属性的 %。

所以我在这里问是否有任何方法可以使 text-shadow 对仅使用 CSS 改变大小的字体起作用。我希望有一个不使用 javascript 的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:39:57.427

您可以在 中使用`em`而不是并且与字体的实际设置大小相关。`px``text-shadow``em`

*   [w3.org 上的示例](http://www.w3.org/Style/Examples/007/text-shadow.en.html)
*   [理解`em`](http://v1.jontangerine.com/log/2007/09/the-incredible-em-and-elastic-layouts-with-css)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-20T13:23:43.313

看

[http://rcljr.com/rcl/tests/TextShadow%20Supreme/index.html](http://rcljr.com/rcl/tests/TextShadow%20Supreme/index.html)

对于文本阴影格式化程序

# c# - 使用 AsyncController 有什么好处？

> ID：12495783
> 
> 赞同：0
> 
> 时间：2012-09-19T13:29:44.760
> 
> 标签：c#, asp.net, .net, asp.net-mvc, multithreading

我知道 AsyncController 是为多线程目标而创建的。但我没有看到 Controller 类和 AsyncController 类的行为有任何区别。例如 HomeController：

```
public String First()
        {
            Thread.Sleep(5000);
            return "First";
        }

        public String Second()
        {
            return "Second";
        } 
```

我尝试在 Firefox 的第一个选项卡中执行 /Home/First/ 请求，然后我尝试执行 /Home/Second/ 并且我看到第二个动作立即执行，没有任何延迟，也没有等待第一个动作。这意味着在并行线程和 Controller 类中执行的请求具有多线程支持。当我用 AsyncController 替换 Controller 时，我没有注意到这些变化。

**所以我的问题是：使用 AsyncController 有什么好处，在哪些情况下我应该使用该类？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:41:07.387

在某些情况下，用户请求将等待大型 IO 操作，例如从另一个站点下载内容。如果服务这个请求的控制器是同步的，那么线程将等待 IO 操作完成，从而浪费服务器资源。服务器对服务器的线程数量有限，如果多个用户以较大的 IO 开销请求相同的操作，服务器可能会达到其线程限制，应用程序将停止响应进一步的请求。

异步控制器所做的是，它不会让线程等待 IO 操作完成。它触发 IO 操作并释放线程，并在操作完成后将其拉回。在运行过程中，线程是空闲的，可以服务其他用户的请求，不再浪费，应用挂起的可能性也较小。

应该注意的是，异步控制器并不是用来提高代码执行速度的，因为它们不会那样做。

# windows - Windows 和 ctime / st_ctime

> ID：12495784
> 
> 赞同：8
> 
> 时间：2012-09-19T13:29:45.177
> 
> 标签：windows, filesystems, stat

Windows 是否提供类似 POSIX [stat](http://linux.die.net/man/2/stat)的 st_ctime 字段的东西，它给出了最后一次元数据更改的时间戳？

背景：我有一些数据文件，我想检查它们是否自特定时间戳以来被修改过。检查修改后的时间戳 (mtime) 很容易，并且会处理“正常”修改，但如果用户复制旧版本的数据文件，那么修改后的时间戳将显示它们更旧。在 POSIX 系统上，复制旧文件会导致 ctime 更新，即使 mtime 更旧。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T21:49:03.563

据我所知，Windows*确实*提供了“上次更改”字段，但我还没有找到任何用于访问它的 Win32 API，因此您必须使用本机 API。

具体来说：（我实际上还没有尝试过。）

*   调用[NtOpenFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff567011%28v=vs.85%29.aspx)来获取句柄。
*   使用参数 of调用[NtQueryInformationFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff567052%28v=vs.85%29.aspx)以获取结构。`FileInformationClass``FileNetworkOpenInformation``FILE_NETWORK_OPEN_INFORMATION`
*   [FILE_NETWORK_OPEN_INFORMATION](http://msdn.microsoft.com/en-us/library/windows/hardware/ff545822%28v=vs.85%29.aspx)结构的`ChangeTime`成员相当于 POSIX ctime。

使用本机 API 并不完全简单。 [这个问题和答案](https://stackoverflow.com/q/6774967/25507)描述了如何做到这一点。

[Cygwin](http://www.cygwin.com)利用这一点在 Windows 下提供 POSIX 语义，正如[他们的邮件列表中](http://cygwin.com/ml/cygwin/2012-05/msg00183.html)所讨论的那样。我正在从[他们的实施](https://cygwin.com/git/gitweb.cgi?p=newlib-cygwin.git;a=blob;f=winsup/cygwin/fhandler_disk_file.cc;h=b58b8442aa9957743cd7e05cbc2c1d5135436e14;hb=HEAD#l409)中获取我的信息。

虽然它只是切线相关，[但这篇文章](http://www.techrepublic.com/article/build-your-skills-learn-to-manipulate-file-time-stamps-in-windows/)很好地描述了 Windows 确实存在的“创建”时间戳（不幸的是，它被称为 ctime）。如果将文件复制到新位置，则创建的时间戳可以比修改的时间戳更新（因为创建之后是指创建副本的时间，而修改是指上次修改原始文件的时间），否则不会更新元数据已更改。

# asp.net - 从 returnURL ASP .NET MVC 识别控制器和操作

> ID：12495785
> 
> 赞同：1
> 
> 时间：2012-09-19T13:29:47.923
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

现在，当有人注销时，我传递到注销操作 url，他是从哪个页面执行的。但问题是，我无法触发控制器的 url 操作，他按下了退出。

例如，用户在页面上

**site.com/cabinet/home/index**

在这里按下网址，例如：

**site.com/Account/LogOut/?returnURL=/cabinet/home/index**

```
public ActionResult LogOut(string returnURL)
{
    // Need to RedirectToAction(...)
    return Redirect(returnURL);
} 
```

因此，如果我将他重定向到 returnURL- 在我的控制器中不会发生任何事情（即使不是在控制器中，在 View 中，它将为未经授权的用户重绘（对于 auth 和不是 auth 用户的界面不同））。

那么，我是否应该提取控制器、动作、区域（？）、参数，并且仅在此之后进行 RedirectToAction？或者当你只知道 url 时，让控制器被解雇的任何其他方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T11:03:23.440

在你看来：

```
@using (Html.BeginForm("LogOut", "Account", 
    new { returnUrl = HttpContext.Current.Request.Url.LocalPath },
    FormMethod.Post))
{
<input type="submit" name="logout" value="Выход" />
} 
```

在行动：

```
 public ActionResult LogOut(string returnUrl)
    {
        FormsAuthentication.SignOut();
        if (Url.IsLocalUrl(returnUrl))
        {
          //  return RedirectToAction("LogIn", "Account", new { returnUrl = returnUrl });
            return Redirect(returnUrl);
        }
        else
        {

            return Redirect(FormsAuthentication.LoginUrl);
        }
    } 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-19T13:36:23.960

```
 return RedirectToAction(ActionName, ControllerName) 
```

# android - 自动启动Service：向Activity传递数据

> ID：12495789
> 
> 赞同：1
> 
> 时间：2012-09-19T13:29:56.597
> 
> 标签：android, sqlite

我已经被问到这个问题：将[数据从服务传递到活动](https://stackoverflow.com/questions/12492063/pass-data-from-service-to-activity/12494069#comment16813420_12494069)

如何放入`data`SQLite 存储
，然后在我的 Activity 中获取此值？
（数据库已经存在）。

# python - 如何在 Django PuSH 中创建回调 URL

> ID：12495791
> 
> 赞同：2
> 
> 时间：2012-09-19T13:29:58.657
> 
> 标签：python, django, django-views, django-signals, websub

我正在为我的 Blogger 博客使用[Django-PuSH (PubSubHubPub)。](http://django-push.readthedocs.org)

现在，我阅读了文档并可以编写简单的代码。但是，文档中从来没有提到任何地方输入回调 URL！

这是简单的代码。

```
# hubserver.py
@receiver(updated)
def listener(notification, **kwargs):
    e = []
    for entry in notification.entries:
        e.append(entry.title)

    for link in e:
        db = entries( url = link )
        db.save(force_insert=True)

from django.shortcuts import render_to_response
from django_push.subscriber.models import Subscription
from models import mydata

# views
def bloghub (request):
    subscription = Subscription.objects.subscribe("http://myblog.blogspot.in//feeds/posts/default",
                                                  "http://pubsubhubbub.appspot.com")
    db = mydata.objects.all()
    lis = [i.url for i in db]
    context = {"lis" : lis}
    return render_to_response("home.html", context)

  [1]: http://django-push.readthedocs.org

# urls.py
urlpatterns = patterns('',
                       url(r'^$', views.bloghub ),
                       url(r'^subscriber/', include('django_push.subscriber.urls')),

) 
```

# asp.net-mvc-3 - 执行代码优先迁移在发布设置中显示为灰色

> ID：12495792
> 
> 赞同：5
> 
> 时间：2012-09-19T13:30:02.850
> 
> 标签：asp.net-mvc-3, entity-framework, azure

使用 Windows Azure 并尝试发布我的 MVC3 应用程序。Publish Web 应用程序设置面板中的 Execute Code First Migration 复选框显示为灰色。我需要进行哪些更改才能启用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T22:46:18.270

我相信您在尝试发布 MVC 应用程序时会看到以下“执行代码优先迁移”被禁用：

![在此处输入图像描述](../Images/ffcf65842f1907a9f8d6e256dd436c3f.png)

这可能是因为您没有为应用程序中的代码迁移编写完整的代码，以及您的 web.config 中没有或不正确的数据库设置，如此处[所述](http://msdn.microsoft.com/en-us/library/dd394698#efcfmigrations)。

为了启用代码迁移，您必须在 web.config 中配置一个 DB（如果是 Windows Azure，您需要在 web.config 中提供 SQL 数据库信息），并且编写了一个完整的类来说明代码迁移将如何发生取决于你的模型。[这](http://msdn.microsoft.com/en-us/data/jj591621)是有关如何实现它的示例。

[http://msdn.microsoft.com/en-us/library/dd394698#efcfmigrations](http://msdn.microsoft.com/en-us/library/dd394698#efcfmigrations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-23T11:03:10.210

我假设您已经拥有实体框架模型并且已经在您的数据库中（如果没有，那么您需要做一些阅读，@AvkashChauhan 的回答确实是一个很好的起点）。

但是，如果您确实有一个模型和所有配置，例如：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
   modelBuilder.Configurations.Add(new YourEntityMap());
} 
```

以及所有实体映射，例如：

```
public class YourEntityMap : EntityTypeConfiguration<YourEntity>
{
    public YourEntityMap()
    {
        this.HasKey(t => t.Id);
    }
} 
```

并且您仍然没有启用该死的复选框，您可能需要执行以下步骤：

前往`Tools`> `NuGet Package Manager`>`Package Manager Console`

[![在此处输入图像描述](../Images/7f82f03e3d2008e5ea7607816f619570.png)](https://i.stack.imgur.com/8F9Sl.png)

然后在控制台写

`Enable-Migrations -ContextTypeName Company.Models.YourDevContext`

您的数据库上下文在哪里`Company.Models.YourDevContext`（查找继承自的类`DbContext`应该与具有`OnModelCreating`覆盖的类相同）。

运行命令后，你应该得到类似的东西：

[![在此处输入图像描述](../Images/a4e04f71e6df68b412b108c442fb49a7.png)](https://i.stack.imgur.com/9Ofb5.png)

此时，您应该在解决方案中添加[更多关于如何在此处处理迁移](https://msdn.microsoft.com/en-gb/data/jj591621)`Migrations`的文件夹

希望这可以节省您一些时间。

# visual-studio-2010 - 从 VS2010 C# Express 版中读回自己的注册码

> ID：12495798
> 
> 赞同：0
> 
> 时间：2012-09-19T13:30:37.313
> 
> 标签：visual-studio-2010

我安装的原始 VS2010 C# 密钥丢失了，但仍在运行安装中使用。

我试图谷歌它，但我没有找到好的关键字。我尝试使用 VS2010 菜单，但我没有找到那里的钥匙。

密钥存储在哪里，我怎样才能读回来？

# maps - OpenLayers MinZoomLevel

> ID：12495803
> 
> 赞同：1
> 
> 时间：2012-09-19T13:30:45.133
> 
> 标签：maps, openlayers, zooming

我想为带有 Zoomify 图层的 OpenLayers 地图设置 MinZoomLevel。但它不起作用。无论我将它放在地图选项还是图层选项中，它都没有影响。此外，在我看来，它只适用于 FixedZoomLayers，但我需要它与 zoomify-layer。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:08:17.227

在 netzwolf.info/kartografie/openlayers/restrictedzoom2.htm 得到它

有一个补丁可以限制正确 panZoomBar 的最小/最大级别和“hack”之间的缩放。但似乎最后一个不适合 2.12 版。

我已经改变了一点： http: [//pastebin.com/yuVT0tEF](http://pastebin.com/yuVT0tEF)

这是补丁： http: [//pastebin.com/wh9rE3Pv](http://pastebin.com/wh9rE3Pv)

# android - ogg/vorbis 格式的音频 Icecast Android 流式传输（监听）

> ID：12495805
> 
> 赞同：2
> 
> 时间：2012-09-19T13:30:51.277
> 
> 标签：android, audio-streaming, icecast

我需要制作一个可以连接到 Icecast 服务器的应用程序来监听 ogg/vorbis 格式的挂载点。我已经搜索了很多并找到[了这个](https://stackoverflow.com/questions/1963105/listen-to-a-shoutcast-with-android)。

但它并没有为 Icecast 流媒体提供任何方式。

请分享您关于如何做到这一点的想法/示例代码。

谢谢

编辑：如何在 android 中以 ogg/vorbis 格式播放直播？

再次感谢...

# c# - Server.Transfer 不传输某些 url

> ID：12495807
> 
> 赞同：0
> 
> 时间：2012-09-19T13:31:01.700
> 
> 标签：c#, asp.net, server.transfer

我在开始时使用 server.transfer 它运行良好。但后来我在我的网站上添加了另一种语言，我尝试这样做，但新语言失败了

我的代码在下面

```
 if (Request.RawUrl.Contains("/tr/"))
   {
         Server.Transfer("tr/" + dt.Rows[0]["SourceURL"].ToString());

    }
    else if (Request.RawUrl.Contains("/en/"))
    {
        Server.Transfer("en/" + dt.Rows[0]["SourceURL"].ToString());

    } 
```

“tr”传输工作出色，但失败它停留在我的 pagenotfound 上，而不是传输到目标 url。我还检查是否写了整个网址，例如[http://mysite.com/en/test.aspx?k=13](http://mysite.com/en/test.aspx?k=13)它也可以工作，但是当 server.transfer 失败时

谁能说为什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T14:14:15.687

我认为 Response.Redirect 适用于您的网站“www.mysite.com/en/home”

它不会像 Server.Transfer 那样高效，但应该也能正常工作。我不确定为什么它适用于“tr/”，而不是“en/”，这可能是由于相对路径的一些问题。您可以尝试在您的 URL 前添加一个波浪号“~”。

```
 Server.Transfer("~/en/" + dt.Rows[0]["SourceURL"].ToString()); 
```

# php - Eclipse PDT 和 xDebug 中的交互式控制台

> ID：12495812
> 
> 赞同：5
> 
> 时间：2012-09-19T13:31:19.093
> 
> 标签：php, eclipse, xdebug

我注意到我在 Eclipse 的 PHP 调试透视图中有一个交互式控制台，靠近断点、变量和表达式视图。它可以由 xDebug 或 Zend 调试器使用还是仅用于 Java？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T23:34:42.260

交互式控制台视图源自 DLTK，PDT 不使用它，没有任何功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T15:35:45.840

现在您可以使用**[PsySH](http://psysh.org/)**进行交互式调试。

我希望这将与 Eclipse 集成，这将是完美的。

# python - 按多个字段对目录结果进行排序

> ID：12495813
> 
> 赞同：4
> 
> 时间：2012-09-19T13:31:19.593
> 
> 标签：python, plone

我需要按多个字段对目录结果进行排序。

就我而言，首先按年排序，然后按月排序。年和月字段包含在我的自定义内容类型（`item_publication_year`和`item_publication_month`分别）中。

但是，我没有得到我想要的结果。年份和月份根本没有排序。它们应该按降序出现，即 2006、2005、2004 等。

下面是我的代码：

```
def queryItemRepository(self):
    """
    Perform a search returning items matching the criteria
    """

    query = {}

    portal_catalog = getToolByName(self, 'portal_catalog')
    folder_path = '/'.join( self.context.getPhysicalPath() )

    query['portal_type'] = "MyContentType"
    query['path'] = {'query' : folder_path, 'depth' : 2 }

    results = portal_catalog.searchResults(query)

    # convert the results to a python list so we can use the sort function
    results = list(results)  

    results.sort(lambda x, y : cmp((y['item_publication_year'], y['item_publication_year']), 
                                   (x['item_publication_month'], x['item_publication_month'])
                                  ))

    return results 
```

有人愿意帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:35:26.617

更好的选择是使用`key`参数进行排序：

```
results.sort(key=lambda b: (b.item_publication_year, b.item_publication_month)) 
```

您也可以使用[`sorted()`内置函数](http://docs.python.org/library/functions.html#sorted)而不是使用`list()`; 它会为您返回一个排序列表，Python首先调用结果然后排序的工作量相同`list`，因为它只是调用`sorted`：

```
results = portal_catalog.searchResults(query)
results = sorted(results, key=lambda b: (b.item_publication_year, b.item_publication_month)) 
```

自然，`item_publication_year`和都`item_publication_month`需要出现在目录元数据中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T14:04:37.233

[您可以使用高级查询](http://plone.org/documentation/manual/developer-manual/indexing-and-searching/searching-with-advancedquery)直接从目录搜索中获得多个排序，另请参阅[其官方文档](http://www.dieter.handshake.de/pyprojects/zope/AdvancedQuery.html#bct_sec_4)

# shell - Shell 脚本处理命令

> ID：12495815
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:31:21.417
> 
> 标签：shell

我试图找出通过 Shell 脚本创建子进程的方法，但我做不到。我想知道为什么 Shell 脚本命令具有杀死进程但不创建它的命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:36:21.523

shell 有无数种不同的创建进程的方式。shell 脚本所做的大部分工作是执行进程。

```
process
process &
process1 | process2
if process1
then process2
else process3
fi
(process)
x=$(process) 
```

等等，令人作呕。

# c# - 这是什么类型的服务架构？

> ID：12495816
> 
> 赞同：0
> 
> 时间：2012-09-19T13:31:22.617
> 
> 标签：c#, wcf, silverlight-5.0

我是 Silverlight 的新手，我有一个一般性问题。我创建了一个新的 silverlight 项目，并向其中添加了“silverlight 启用的 wcf 服务”。我在 silverlight 项目中创建了服务代理，并且能够毫无错误地访问 .svc 文件。

我的问题是，这是一种什么样的服务架构？？它没有出现在 IIS 中，因此它没有托管在 IIS 中，也不是基于 Windows 的自托管服务。这是如何工作的？

与“自托管 wcf 服务”或“IIS 托管 wcf 服务”相比，这是否有限制？

提前致谢！

以下是我的服务端点配置：

```
<endpoint address="https://localhost/SilverBadger.Web/Services/DataAccessService.svc"
                      binding="customBinding" 
                      bindingConfiguration="CustomBinding_DataAccessService"
                      contract="DataAccessService.DataAccessService" 
                      name="CustomBinding_DataAccessService" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:36:14.173

该服务托管在 Visual Studio 的内置开发服务器 Cassini 中。它刚刚与您的项目一起启动。它可以按原样托管在 IIS 中，也可以修改为作为自托管服务运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:40:56.330

如果你点击 .svc...不是你在 IIS....
svc 扩展意味着 IIS 的服务托管

也许是本地主机

# ruby-on-rails - 在开发 Rails 应用程序时开发 gem 的环境

> ID：12495818
> 
> 赞同：0
> 
> 时间：2012-09-19T13:31:33.260
> 
> 标签：ruby-on-rails, ruby, gem

我正在开发一个使用我也在开发的 gem 的 Rails 应用程序。

我必须在 gem 中进行的每项更改：构建、卸载以前安装的 gem、安装构建的 gem、重新启动 rails 应用程序。

您可以想象，即使对宝石进行微小的更改，也很容易成为一场噩梦。

我尝试手动加载所有配置为由 gem 加载的文件（在 Gemspec），但在加载过程中似乎总是出现问题，找不到库或加载顺序不正确。

有没有办法设置我的环境以更好地使用我的应用程序开发我的 gem？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T13:34:15.570

您可以在 Gemfile 中添加对本地文件系统的文件引用，例如

```
gem 'new_gem', :path => '~/RubyPlayground/DevGems/new_gem/' 
```

这样，您`bundle install`在修改新 gem 后只需要一个新的。

更新

再次阅读您的描述，您可能没有使用 rails 32。我的建议当然至少基于 bundler。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:37:24.507

您始终可以将 gem 代码符号链接到 lib/，然后将其包含在您的自动重载路径 (application.rb IIRC) 中。

# camera - Kinect 作为带有 MS SDK 的网络摄像头

> ID：12495821
> 
> 赞同：7
> 
> 时间：2012-09-19T13:31:39.843
> 
> 标签：camera, driver, webcam, kinect

有没有使用`Kinect`as a 的可能性`WebCam`？我知道我可以使用 来做到这一点`KinectCam.ax`，但它仅适用于`OpenNI libraries`。我使用`Microsoft Kinect SDK`，因为我的项目......我试图在互联网上找到一些东西......没什么有趣的......

我需要`WebCam`一个，当我有`Kinect`o_O时买一个新的是愚蠢的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T12:28:57.807

有人创建驱动程序以在网络摄像头上转换您的 kinect。我对其进行了测试，并在 Skype 中工作。

要将 kinect 安装为网络摄像头，请在此处下载 Compiled 文件夹中的 3 个文件（KinectCam.ax、install.bat、unistall.bat）： [https ://github.com/wildbillcat/KinectCam/](https://github.com/wildbillcat/KinectCam/)

以管理员身份执行 install.bat。就这样。

作者说这甚至在 Windows 8 中也有效。您可以[在 msdn 上获取有关此线程的更多信息。](http://social.msdn.microsoft.com/Forums/en-US/kinectsdk/thread/4ee6e7ca-123d-4838-82b6-e5816bf6529c/)

# javascript - 尝试使用正则表达式获取字符串中的子字符串时无法删除尾随字符

> ID：12495827
> 
> 赞同：1
> 
> 时间：2012-09-19T13:31:56.203
> 
> 标签：javascript, regex

我正在尝试使用正则表达式从“http://domain.com/some-more-path”获取“域”：

`/(.*)(http|https):\/\/(.*)(\/)(.*)/ and then $3`

我的问题不是“域”，而是“域/更多路径”。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:37:10.807

也许这样：

```
/([^:]*):\/\/([^\/]*)(.*)/ 
```

现在 $2 应该只是一个域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:37:27.203

改变

```
/(.*)(http|https):\/\/(.*)(\/)(.*)/ 
```

到

```
/(.*)(http|https):\/\/(.*?)(\/)(.*)/ 
```

问题是`.*`部分。`*`是一个贪婪的量词，会消耗尽可能多的字符。如果您在`?`后面加上 a `*`，则将限定符的行为切换为非贪婪（即它只消耗所需的字符数）。

# delphi - 一些德尔福错误

> ID：12495828
> 
> 赞同：0
> 
> 时间：2012-09-19T13:32:00.883
> 
> 标签：delphi, oop, delphi-7

我尝试制作应该在 Unit 中的 Ball 类，然后我需要使用 using 在表单上绘制 Ball `Canvas`。实际上，我以前从未在 Delphi 中尝试过 OOP（我记得只是在学校里用 Pascal 进行的简单练习），所以我遇到了很多问题。哦。所以，这里是 Ball 类的代码单元

```
unit Unit2;

interface
uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls;

type
  MyPoint = record
    x, y: integer;
  end;

  Ball = class
    Pos:MyPoint;
    Vel:MyPoint;
    Rad:integer;
    Can:TCanvas;
    procedure BallCreate(crd, spd:MyPoint; Sender: TObject);
    procedure BallDraw(Sender: TObject);
    procedure BallMove();
  private
    { Private declarations }
  public
    { Public declarations }
  end;
var
  posX, posY, speedX, speedY, radius:Integer;

implementation
procedure Ball.BallMove;
begin
   if((posX + radius > 700) or (posX - radius  < 0)) then speedX:= (-speedX);
   if((posY + radius > 500) or (posY - radius < 0)) then speedY:= (-speedY);
    posX:=posX+speedX;
    posY:=posY+speedY;
end;

procedure Ball.BallCreate(crd, spd:MyPoint; Sender: TObject);
begin
  Vel.x:=3;
  Vel.y:=3;
  pos.X:=crd.x;
  pos.Y:=crd.y;
  radius:=30;
end;

procedure Ball.BallDraw(Sender: TObject);
begin
with Can do
 begin
  brush.Style:=bsSolid;
  brush.Color:=clRed;
  ellipse((pos.X-radius),(pos.Y-radius),(pos.X+radius),(pos.Y+radius));
 end;
end;

end. 
```

单位与表格

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtCtrls, Unit2;

type
  TForm1 = class(TForm)
    Timer1: TTimer;
    Button1: TButton;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;
  x1,y1,x2,y2,x,y:integer;
  posX, posY, speedX, speedY, radius:Integer;
  f:boolean;
  obj:Ball;
  p:MyPoint;
  s:MyPoint;
implementation

{$R *.dfm}
{procedure TForm1.BallMove;
begin
   if((posX + radius > ClientWidth) or (posX - radius  < 0)) then speedX:= (-speedX);
   if((posY + radius > ClientHeight) or (posY - radius < 0)) then speedY:= (-speedY);
    posX:=posX+speedX;
    posY:=posY+speedY;
end;              }

procedure TForm1.FormCreate(Sender: TObject);
begin
  Timer1.Enabled:=false;
  Timer1.Interval:=5;
  p.x:= Round(ClientWidth/2);
  p.y:= Round(ClientHeight/2);
  s.y:=3;
  s.x:=s.y;
  obj.BallCreate(p,s,Sender);

end;

procedure TForm1.Button1Click(Sender: TObject);
begin
if not f then
 begin
  Timer1.Enabled:=true;
  Button1.Caption:='Ñòîï';
  f:=not f;
 end
else
 begin
  Timer1.Enabled:=false;
  Button1.Caption:='Ïóñê';
  f:=not f;
 end;
end;

procedure TForm1.Timer1Timer(Sender: TObject);
begin
 obj.BallDraw(Sender);
 obj.BallMove;
end;

end. 
```

当我尝试运行它时，它说

```
raised exception class EAccessViolation with message 'Access violation at address 0044DE7B in module Project1.exe. Write of address 000000C' 
```

在代码中，这些笔画以红色突出显示

*Vel.x:=3;* 并且 *可以做*

我不明白出了什么问题以及我应该如何在此处正确声明和使用 Canvas。也许您在 Delphi 的 Canvas 单元中有一些 OOP 的例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:25:08.617

你声明了一个 Can:TCanvas; 变量，但它不是在任何地方创建的。

您可以使用 Main 表单画布，为此您应该在 Ball 构造函数中将其传递给 Ball，例如：

```
TBall = class
...
public
constructor Create(crd, spd:MyPoint; ACanvas:TCanvas);
....
implementation
...
constructor TBall.Create(crd, spd:MyPoint; ACanvas:TCanvas);
begin
  Can := ACavas;
... 
```

Then, you are not properly creating and instance of Ball:

obj.BallCreate(p,s,Sender);

to create an instance you have to call the class constructor like

```
obj := TBall.Create(crd, spd, Self.Canvas); 
```

By the way the "T" before Ball is just a convention to name a class in Delphi

# svn - 无法连接到 SVN - 找不到指定的文件

> ID：12495833
> 
> 赞同：1
> 
> 时间：2012-09-19T13:32:34.633
> 
> 标签：svn, unix, version-control, tortoisesvn

我已经在远程服务器上设置了 svn repo

```
# svn info
Path: .
URL: file:///root/svn/dadilja/trunk
Repository Root: file:///root/svn/dadilja 
```

我正在尝试使用 TortoiseSVN

`svn+ssh://USERNAME@SERVER:PORT/root/svn/dadilja/trunk`

并得到

> “无法连接到 URL 'svn+ssh://USERNAME@SERVER:PORT/root/svn/dadilja/branches/dev' 的存储库无法创建隧道：系统找不到指定的文件。

我不知道该怎么做？`/root/svn/dadilja/trunk`路径实际上并不存在。在`/root/svn/dadilja`我有诸如`db`,`locks`和之类的东西`conf`。但是在同一台机器上结帐可以正常使用

```
svn co file:///path 
```

* * *

**编辑：**省略端口并不能解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:13:11.350

您不能在 svn url 中指定端口，这是不支持的 AFAIK。

我知道在非标准端口上使用 SSH 服务器的唯一方法是通常通过文件设置非标准端口`.subversion/config`。您可以在那里修改 ssh 命令，从而指定端口。

```
[tunnels]
sshtunnel = ssh -p <port> 
```

[http://linuxsysadminblog.com/2009/08/using-svnssh-with-a-non-standard-ssh-port/](http://linuxsysadminblog.com/2009/08/using-svnssh-with-a-non-standard-ssh-port/)

# android - Android：视频文件有黑色缩略图

> ID：12495835
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:32:41.467
> 
> 标签：android, video, thumbnails

我必须编写一个程序，其中所有视频都存储在我的设备中以显示缩略图。我可以将它们全部列出，但其中大多数都带有黑色缩略图，而在画廊应用程序中这些显示完美。

请帮我！我试过的是

```
MediaStore.Video.Thumbnails.getThumbnail(mContex.getContentResolver(), id, MediaStore.Video.Thumbnails.MICRO_KIND, null); 
```

或者

```
ThumbnailUtils.createVideoThumbnail(filePath, MediaStore.Video.Thumbnails.MICRO_KIND) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T14:50:29.693

一些视频文件（例如可以从 YouTube 下载的**mp4**文件）在开始时几乎没有黑框，这就是您将看到的`ThumbnailUtils.createVideoThumbnail()`.

您可以使用[MediaMetadataRetriever](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html)类从时间 = 0 的某个偏移量处从文件中提取帧。为了获得最佳结果，您应该使用[getFrameAtTime(t, OPTION_NEXT_SYNC)](http://developer.android.com/reference/android/media/MediaMetadataRetriever.html#getFrameAtTime%28long,%20int%29)并遍历时间**t**以找到一个重要的缩略图。你可以试试500000（半秒）的步数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:40:33.480

使用此代码。它为我工作。[从](https://stackoverflow.com/questions/1334694/android-is-it-possible-to-display-video-thumbnails)

```
 int id = **"The Video's ID"**
    ImageView iv = (ImageView ) convertView.findViewById(R.id.imagePreview);
    ContentResolver crThumb = getContentResolver();
    BitmapFactory.Options options=new BitmapFactory.Options();
    options.inSampleSize = 1;
    Bitmap curThumb = MediaStore.Video.Thumbnails.getThumbnail(crThumb, id, MediaStore.Video.Thumbnails.MICRO_KIND, options);
    iv.setImageBitmap(curThumb);

If It is not working Use This  

Bitmap bmThumbnail;
        bmThumbnail = ThumbnailUtils.createVideoThumbnail(videoFileList[position], Thumbnails.MICRO_KIND); 
```

# wpf - 更改集合时数据绑定 FluidKit ElementFlow 中的 InvalidOperationException

> ID：12495837
> 
> 赞同：0
> 
> 时间：2012-09-19T13:32:44.600
> 
> 标签：wpf, data-binding, custom-controls

我有 ElementFlowContainer 用户控件，其中包含来自 FluidKit.Showcase 项目的 ElementFlow。

```
<UserControl x:Class="Controls.ElementFlowContainer">
<Grid>
<-- Other controls (cut) -->
<Controls:ElementFlow x:Name="_elementFlow" ItemsSource="{Binding}" ItemTemplate="{DynamicResource TestDataTemplate}" SelectedIndex="3">
<-- Layout, Background, Camera settings (cut) -->
</Controls:ElementFlow>
</Grid>
</UserControl> 
```

我有 ObservableCollection 用作 ElementFlow 的 DataContext ：

```
<Controls:ElementFlowContainer DataContext="{Binding MediaRecords}"/> 
```

MediaRecord 具有我想要显示的图像属性（字节 [] 内容）。这是模板：

```
<DataTemplate x:Key="TestDataTemplate" 
DataType="{x:Type DAL:MediaRecord}">
<Border x:Name="ElementVisual" Background="White" BorderThickness="2" BorderBrush="#ff9e8028">
<Image Source="{Binding Content}" Stretch="Fill" />
</Border>
</DataTemplate> 
```

以上所有内容都在由 IoC 容器创建的 ViewModel 中（初始化期间 MediaRecords 属性为空）。当收藏充满我得到的物品时

```
"InvalidOperationException '[Unknown]' property does not point to a DependencyObject in 
path "(0)[0].(1)[1].(2).(3)[0].(4)." 
```

此错误发生在属性设置器中的 RaisePropertyChanged 中：

```
public const string MediaRecordsPropertyName = "MediaRecords";
public ObservableCollection<MediaRecord> MediaRecords
{
 get { return _mediaRecords; }
 set 
 { if (_mediaRecords == value) { return; } _mediaRecords = value;
   RaisePropertyChanged(MediaRecordsPropertyName); // error here         
 }
} 
```

知道如何解决这个问题吗？
*编辑*
同一个集合绑定到另一个控件，所以我猜这个问题是并发相关的。通过维护集合的第二个副本并绑定到它来快速修复它，但也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T07:30:46.597

单独收集的解决方案有效，现在可能已关闭问题。

# mysql - Mysql 正则表达式在文本中查找两个单词

> ID：12495839
> 
> 赞同：1
> 
> 时间：2012-09-19T13:32:48.207
> 
> 标签：mysql, regex

我有以下查询：

```
SELECT * `library` WHERE 
    ( 
    UCASE(  `text` ) REGEXP  '((^KEYWORD|[[.space.]]KEYWORD)([[.space.]]|[[.comma.]]|[[.period.]]|[[.colon.]]|[[.semicolon.]]|[[.apostrophe.]]|[[.quotation-mark.]]|[[.exclamation-mark.]]|[[.question-mark.]]))((^KEYWORD2|[[.space.]]KEYWORD2)([[.space.]]|[[.comma.]]|[[.period.]]|[[.colon.]]|[[.semicolon.]]|[[.apostrophe.]]|[[.quotation-mark.]]|[[.exclamation-mark.]]|[[.question-mark.]]))'
    ) 
```

** 编辑 **

添加了一个 sql 小提琴：

[http://sqlfiddle.com/#!2/8f822/2/0](http://sqlfiddle.com/#!2/8f822/2/0)

在可读格式中，这是：

```
SELECT * FROM `library` WHERE 
    ( 
    UCASE(  `text` ) REGEXP  '
            (
                (
                ^KEYWORD | [[.space.]]KEYWORD
                )
                (
                [[.space.]] |
                [[.comma.]] | 
                [[.period.]] | 
                [[.colon.]] |
                [[.semicolon.]] |
                [[.apostrophe.]] | 
                [[.quotation-mark.]] | 
                [[.exclamation-mark.]] | 
                [[.question-mark.]]
                )
            ) 

            (
                (
                ^KEYWORD2 | [[.space.]]KEYWORD2
                )
                (
                [[.space.]] |
                [[.comma.]] | 
                [[.period.]] | 
                [[.colon.]] |
                [[.semicolon.]] |
                [[.apostrophe.]] | 
                [[.quotation-mark.]] | 
                [[.exclamation-mark.]] | 
                [[.question-mark.]]
                )
            ) 
        )' 
```

现在我需要查询来执行以下操作，而我在这里碰壁了。

如果关键字出现在文本中，以文本开头或以空格开头，后跟特殊字符之一，则显示结果。

这并不像我需要的那样真正起作用，但是如果两者都出现，我无法在文档中找到如何进行匹配。例如尝试匹配字符串`"keyword,"`，`"keyword "`或`"keyword;"`

然后我需要为关键字 2 匹配相同类型的查询。

那么keyword 和keyword2 的两个表达式都必须为真，我只需要这些结果。

例如文本

```
A lazy brown fox jumped over the fence. 
Then he found a chicken. 
Then he ate the chicken and ran from the farmer. 
```

和

```
A fox found a chicken. 
Then he ate the chicken and ran from the farmer.
Then fox jumped over the fence. 
```

应该带有以下关键字`fence` `chicken`

但这不应该与以下文本匹配

```
A lazy brown fox jumped over the fences. 
Then he found a chicken. 
Then he ate the chicken and ran from the farmer. 
```

**回答**

最后的查询变成了

```
SELECT *
FROM`library`
WHERE
UCASE(`text` ) REGEXP '(^| )FENCE[[.space.][.comma.][.period.][.colon.][.semicolon.][.apostrophe.][.quotation-mark.][.exclamation-mark.][.question-mark.]]'
AND
UCASE(`text` ) REGEXP '(^| )CHICKEN[[.space.][.comma.][.period.][.colon.][.semicolon.][.apostrophe.][.quotation-mark.][.exclamation-mark.][.question-mark.]]' 
```

因为正则表达式不支持随机顺序搜索，而且我不希望*n*以关键字搜索字符串的数量为依据，所以这是最好的解决方案。

谢谢大家收看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:41:57.243

您可以使用正则表达式`(^| )KEYWORD[- ,.:;'"!?]`并将两个 REGEXP 测试放在您的 WHERE 子句中 AND 一起。第一部分`(^| )`是一个正则表达式，它允许我们匹配文本或空格的开头。接下来是必须按原样匹配的关键字，然后是一个字符类，该类`[]`中的单个字符必须匹配。它就像单个字符的 OR，而不是`|`完整的正则表达式。

```
SELECT *
FROM`library`
WHERE
UCASE(`text` ) REGEXP '(^| )KEYWORD[- ,.:;''"!?]'
AND
UCASE(`text` ) REGEXP '(^| )KEYWORD2[- ,.:;''"!?]' 
```

免责声明：我没有测试 SQL 语句，我不记得撇号是否必须在字符串中加倍。

# java - 如何在 java3D 中使用 MouseListener 和 MouseMotionListener 来旋转 3D 对象？

> ID：12495841
> 
> 赞同：1
> 
> 时间：2012-09-19T13:32:59.153
> 
> 标签：java, java-3d

我正在用 java swing 制作桌面应用程序。我使用 PointArray[] 从我的 2D 图像制作了 3D 图像。现在我想使用 MouseListener 和 MouseMotionListener 来旋转图像。我使用 MouseRotate 对象来旋转 myImage，但它并不适用，MouseRotate 用原点（0,0,0）旋转图像。但我想使用图像的中心点旋转图像。表示使用中心点而不是原点旋转图像。那么，我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T19:18:56.410

嗯，没有代码很难说，但我认为你可以设置一个转换矩阵并用它来旋转它。假设图像面向屏幕的正面，您可以尝试以下操作：

```
public void mouseDragged(MouseEvent e)
{
    int dx = e.getX() - x; //x should be a global variable
    int dy = e.getY() - y; //same applies here
    x = e.getX(); //to set x for the next update loop
    y = e.getY();
    double rotation = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));
    Transform3D transform = new Transform3D();
    Matrix3d matrix = new Matrix3d();
    transformG.getTransform(transform); //assuming the TransformGroup your image is in is transformG
    transform.getRotationScale(matrix);
    transform.rotZ(rotation);
    transformG.setTransform(transform);
} 
```

您可以根据需要设置不同的旋转量，但这应该会给您一个想法

# jquery - 使用 jquery css() 的多个 div 的布局问题

> ID：12495845
> 
> 赞同：0
> 
> 时间：2012-09-19T13:33:17.823
> 
> 标签：jquery, css

我有许多我正在尝试布局的 div。当前的布局是完美的，看这个[**小提琴**](http://jsfiddle.net/4HgyB/)。

本质上，我有一个视频播放器，由“此处的视频播放器”表示。除此之外，我还有一些技巧和资源。在视频播放器下，我有一个带按钮的表格。单击一个按钮以查看会发生什么。

通过 jquery 触发的 info 消息`.css()`应该在视频播放器下方，视频播放器和表格之间。

我确定我只是在其中遗漏了一些东西，`.css()`但找不到合适的组合来布置它。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:39:48.203

只需添加到您的CSS：

```
#quote {
 clear:left;   
} 
```

这将使其显示在视频消息下方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:41:49.077

在css中为#quote添加样式

```
#quote
{
float: left;
} 
```

或者在 JS 中，

```
$('#quote').css('float','left'); 
```

# import - 重复主键导入mysql表

> ID：12495851
> 
> 赞同：0
> 
> 时间：2012-09-19T13:33:37.753
> 
> 标签：import, duplicates, mysql

我有一个 mysql 表文件`students_r.sql`，我想使用 phpmyadmin 界面将此表导入我的 mysql 数据库。

但是，当我选择文件并单击导入时，出现以下错误：

```
Dump data for table `students_r` -- INSERT INTO `students_r` (`lastname`, `firstname`, `midname`) VALUES (....

    MySQL said:  
    #1062 - Duplicate entry '' for key 'PRIMARY' 
```

那么有人可以帮助如何导入mysql表而不会出错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:39:03.710

```
INSERT INTO `students_r` (``, `lastname`, `firstname`, `midname`) VALUES ( ``,...) 
```

# javascript - 射线相交对象，用鼠标指针拾取对象

> ID：12495860
> 
> 赞同：1
> 
> 时间：2012-09-19T13:33:53.213
> 
> 标签：javascript, three.js, webgl, raytracing

感谢您的考虑，因为我的问题已经在标题中，我将直接进入重点：

```
UPDATE 2: 
```

问题解决了。我没有把它们变成网格，或者看起来是这样。随着超新星的提示和启用阴影贴图的失败尝试，它变得如此清晰，尽管失去了半天......

```
UPDATE 1: 
```

示例在这里：[JSFiddle](http://jsfiddle.net/zBtgj/4/)

.

.

```
Original problem: 
```

使用鼠标坐标进行对象拾取的射线投射的标准示例，我的意思是这个：

```
var vector = new THREE.Vector3((event.clientX / window.innerWidth ) * 2 - 1, -(event.clientY / window.innerHeight ) * 2 + 1, 1);
projector.unprojectVector(vector, camera);
var ray = new THREE.Ray(camera.position, vector.subSelf(camera.position).normalize());
var intersects = ray.intersectObjects(cubes);

if (intersects.length > 0)
{
    console.log('hit');
} 
```

，根本没用。

在花了一些时间考虑之后，我尝试了这个：

```
// start a ray from your camera to the coordinates on 
// x,y plane you pointed with the mouse:
// *I also draw the actual ray on the screen, it looked perfect! :( but...

var cx = event.clientX;
var cy = event.clientY;

var rx = cx - (SCREEN_WIDTH / 2);
var ry = (SCREEN_HEIGHT / 2) - cy;

var origin = new THREE.Vector3(camera.position.x, camera.position.y, camera.position.z - 200);
var direction = new THREE.Vector3(rx, ry, -20);

var ray = new THREE.Ray(origin, direction);
var intersects = ray.intersectObjects(cubes); 
```

但是“相交”变量仍然是空的。虽然看起来合乎逻辑，因为我的元素如下：

```
for ( i = 0; i < cols; i++)
{
    for ( j = 0; j < rows; j++)
    {
        var cwidth = (SCREEN_WIDTH / cols) / scale;
        var cheight = (SCREEN_HEIGHT / rows) / scale;
        var cdepth = 10;

        var cube = THREE.SceneUtils.createMultiMaterialObject(new THREE.CubeGeometry(cwidth, cheight, cdepth, 1, 1, 1), getMaterials());
        // getMaterials() is a simple function returning an Array of materials
        cube.position.x = cwidth * i - (SCREEN_WIDTH / 2) + cwidth / 2;
        cube.position.x /= scale;
        cube.position.y = cheight * j - (SCREEN_HEIGHT / 2) + cheight / 2;
        cube.position.y /= scale;
        cube.position.z = 0;
        cubes.push(cube);
        scene.add(cube);
    }
} 
```

我的相机是：

```
 camera.position.z = getDistance(window.innerHeight); 
    // or {x: 0, y:0, z: 403.00000000000006} 
```

我正在尝试解决这个问题两个多小时，有人能看到我错过了什么吗？而且我在互联网上搜索无济于事。

PS我希望我没有用“ray”错误地标记这个问题。

# apache-flex - 无法解析 fromState 属性

> ID：12495862
> 
> 赞同：0
> 
> 时间：2012-09-19T13:33:57.120
> 
> 标签：apache-flex

这个过渡有什么问题？？错误是 Flex 无法解析 fromState 属性。

```
<s:transitions>

    <s:Transition fromState="Viewer" toState="Editor">
        <s:Fade target="{viewerProductDetail}" duration="1000"/>
    </s:Transition>

    <s:Transition formState="Editor" toState="Viewer">
        <s:Fade target="{editorProductDetail}" duration="1000"/>
    </s:Transition>

</s:transitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:42:55.510

第二个转换指定“formState”而不是“fromState”。您确定您正确阅读了错误吗？

# triggers - Salesforce Apex 触发器“isAPI”上下文变量

> ID：12495866
> 
> 赞同：6
> 
> 时间：2012-09-19T13:34:06.190
> 
> 标签：triggers, salesforce, apex-code, force.com

有没有办法确定触发器是通过 API 调用还是通过 Salesforce Web 界面执行的？

我想做这样的事情：

```
trigger Update_Last_Modified_By_API on My_Object__c (before update) {

    for (My_Object__c o : Trigger.New) {

        if (isAPI) {
            o.Last_Modified_By_API__c = datetime.now();
        }

    }

} 
```

（目前使用 API 版本 25.0，不过很快会更新到 26.0）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T14:18:02.533

目前没有标准的方法来告诉触发器中实际导致更新或插入发生的原因（API、标准页面布局、VF 页面和控制器、其他一些 Apex 代码等）。[这是触发上下文变量](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_triggers_context_variables.htm)的完整列表。

为此，我建议在对象上创建一个自定义复选框字段，例如`IsAPI__c`（默认值为`false`）。然后，您需要做的就是`true`使用任何 API 调用传入该字段，然后检查触发器中的字段以查找批处理中的每条记录（只要确保您记住在完成后将其重置为 false 后续来自 UI 的调用不被视为 API 调用）。

```
trigger Update_Last_Modified_By_API on My_Object__c (before update) {
    for ( My_Object__c o : Trigger.New ) {
        if ( o.IsAPI__c ) {
            o.Last_Modified_By_API__c = datetime.now();
        }
        o.IsAPI__c = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-07T20:36:40.250

如果您只是想确定是否通过 UI 启动了事务，则使用该`System.URL.getCurrentRequestUrl()`方法可能会给您一个指示。

# python - python: subprocess.Popen() 行为

> ID：12495867
> 
> 赞同：3
> 
> 时间：2012-09-19T13:34:07.627
> 
> 标签：python, subprocess, popen

我正在尝试将 rsync 与 python 一起使用。我读过将参数​​传递给 Popen 的首选方法是使用数组。

我试过的代码：

```
p = Popen(["rsync",
        "\"{source}\"".format(source=latestPath),
        "\"{user}@{host}:{dir}\"".format(user=user, host=host, dir=dir)],
        stdout=PIPE, stderr=PIPE) 
```

结果是 rsync 要求输入密码，即使我已经设置了 SSH 密钥来进行身份验证。

我认为这是执行新进程的环境的问题。我接下来尝试的是：

```
p = Popen(["rsync", 
   "\"{source}\"".format(source=latestPath),
   "\"{user}@{host}:{dir}\"".format(user=user, host=host, dir=dir)],
   stdout=PIPE, stderr=PIPE, shell=True) 
```

这导致 rsync 打印“正确用法”，因此参数被错误地传递给 rsync。我不确定这是否应该工作（传递一个带有 shell=True 的数组）

如果我像这样完全删除数组：

```
p = Popen("rsync \"{source}\" \"{user}@{host}:{dir}\"".format(
        source=latestPath, user=user, host=host, dir=dir),
      stdout=PIPE, stderr=PIPE, shell=True) 
```

该程序运行良好。为了这个脚本，这真的没关系，但我想知道有什么区别？为什么其他两个（主要是第一个）不起作用？

难道只是需要shell环境，第二个不对？

编辑：变量的内容

```
latestPath='/home/tomcat/.jenkins/jobs/MC 4thworld/workspace/target/FourthWorld-0.1-SNAPSHOT.jar'
user='mc'
host='192.168.0.32'
dir='/mc/test/plugins/' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:42:13.350

可能与`cwd`or`env`参数有关吗？也许在第一种语法中，它找不到 SSH 密钥......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:50:55.420

> 我想知道有什么区别？

当 时`shell=True`，整个命令被传递给 shell。引号在那里，因此 shell 可以再次正确地选择命令。特别是通过

`foo "bar baz"`

到 shell 会导致它将命令解析为（Python 语法）`['foo', 'bar baz']`，以便它可以执行`foo`带有参数的命令`bar baz`。

相比之下，当 时`shell=False`，Python 会立即将列表中的参数传递给程序。例如，尝试以下`subprocess`命令：

```
>>> import subprocess
>>> subprocess.call(["echo", '"Hello!"'])
"Hello!"
0
>>> subprocess.call('echo "Hello!"', shell=True)
Hello!
0 
```

请注意，在第一种情况下，程序会向您回显引号`echo`，而在第二种情况下，shell 在执行`echo`.

在您的特定情况下，`rsync`获取引号但不知道应该如何处理它们；毕竟，它本身并不是一个外壳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-20T08:15:45.010

只是一个建议，您可能更容易使用[sh](http://amoffat.github.com/sh)而不是子进程：

```
import sh
sh.rsync(latestPath, user+"@"+host+":"+dir) 
```

# jsp - 如何使用jsp写入ms access数据库

> ID：12495868
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:10.993
> 
> 标签：jsp, servlets, sqlexception

我正在尝试使用 jsp 在 ms access 数据库中**插入一些数据，但它显示 SQLException。****该查询有一个子查询。** 我试图在访问中运行查询并且查询执行得很好。我不确定jsp为什么会抛出异常。我已经一遍又一遍地检查了我的查询 3 个小时，但仍然没有用。有人可以帮忙吗？？

```
 try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver").newInstance();

        //Creating new statement
        Connection conn = DriverManager.getConnection("jdbc:odbc:accdbJava");

        String uName = ((UserInfo) session.getAttribute("userInfo")).getUserName().trim();

        //Creating statement
        PreparedStatement stmt = conn.prepareStatement("INSERT INTO Message (User_ID, Heading, Body, DatePosted) VALUES ('(SELECT ID FROM User WHERE UserName = '" + uName + "')', '" + messageItem1.getSubject() + "', '" + messageItem1.getMessage() + "', '" + messageItem1.getDatePosted() + "');");

        //Executing the update
        stmt.executeUpdate();

        //Closing connection, statement
        stmt.close();
        conn.close();
    }
    catch(Exception e) {
        e.printStackTrace();
    } 
```

例外情况如下：

**java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] 查询表达式 ''(SELECT ID FROM User WHERE UserName = 'hrai')'' 中的语法错误（缺少运算符）。在 sun.jdbc.odbc.JdbcOdbc.createSQLException(Unknown Source) 在 sun.jdbc.odbc.JdbcOdbc.standardError(Unknown Source) 在 sun.jdbc.odbc.JdbcOdbc.SQLPrepare(Unknown Source) 在 sun.jdbc.odbc.JdbcOdbcConnection .prepareStatement(Unknown Source) at sun.jdbc.odbc.JdbcOdbcConnection.prepareStatement(Unknown Source) at PostMessage.addMessageToDatabase(PostMessage.java:118) at PostMessage.doPost(PostMessage.java:55) at javax.servlet.http.HttpServlet org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:03:20.410

尝试以下更改

请注意，这将适用于非 Access 数据库。对于访问，请参阅下面的编辑。

```
String SQLQuery = "INSERT INTO Message (User_ID, Heading, Body, DatePosted) " +
          "VALUES ((SELECT ID FROM USER WHERE username=?), ?, ?, ?)";

PreparedStatement stmt = conn.prepareStatement(SQLQuery);
stmt.setString(1, uName);
stmt.setString(2, messageItem1.getSubject());
stmt.setString(3,messageItem1.getMessage());
stmt.setDate(4,messageItem1.getDatePosted()); 
```

查询结束时不需要分号。通过正确使用[Prepared 语句](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)，您可以简化查询和构建字符串。

附带说明一下，这可能都是在 scriptlet (<%%>) 标记内完成的，这不是一个好习惯。您可能希望将此代码移动到后端 java 类。

**编辑**- 看到您的下一个错误后，我打开 Access 来测试查询。您的原始查询存在以下问题：您的内部选择周围有一组额外的单引号。

```
Values ('(SELECT ID FROM User WHERE UserName = 'foo')'... 
```

选择周围的那组额外的单引号会导致缺少运算符异常。如果您删除这些内容，那么您会从我的查询中得到错误。所以这两个查询几乎相同。

此查询可以与另一个数据库（MySQL、SQL Server 等）一起使用，但 Access 并不遵循所有 SQL 规则，因此有时可能会有点命中或遗漏。

尝试对我的原始答案进行以下修改以执行插入

```
String SQLQuery = "INSERT INTO MESSAGE (User_ID, Heading, Body, DatePosted) " +
    "SELECT ID, ?, ?, ? " + 
    "FROM USER " + 
    "WHERE username=?";

PreparedStatement stmt = conn.prepareStatement(SQLQuery);

stmt.setString(1, messageItem1.getSubject());
stmt.setString(2,messageItem1.getMessage());
stmt.setDate(3,messageItem1.getDatePosted());
stmt.setString(4, uName); 
```

请注意，我在论点周围移动了一些。并且没有使用 VALUES 关键字。此查询在 Access 中对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:38:35.380

我会尝试改变

'（从用户 WHERE 用户名中选择 ID = '" + uName + "')'

到

CSTR（从用户选择 ID WHERE 用户名 = '" + uName + "')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T08:31:59.007

内部查询

从用户那里选择 ID 用户名 = '" + uName + "'

应该只返回一个值，我认为您在 User 表中有多个记录 UserName hrai，这会为您的代码的执行造成问题。

确保此查询仅返回一条记录（仅返回一个值）

**尝试使用Distinct**进行 beloq 查询

 **SELECT Distinct(ID) FROM User WHERE UserName = '" + uName + "'

但它仍然应该只从这个查询返回一个值**

# spring - Spring 未将 @pathVariables 正确映射到正确的变量

> ID：12495869
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:13.073
> 
> 标签：spring, model-view-controller, path-variables, command-objects

我们遇到了一个问题，即我们通过@PathVariable 或在中等负载下通过绑定获取的值被分配给错误的变量。

为了进行这些测试，我们总是访问相同的 URL。每次点击 URL 都会慢慢产生正确的结果。

我们正在使用 Spring 3.0.5.RELEASE 但已经累到 3.1.2.RELEASE 并且仍然存在问题。我们看不到最近发生的任何其他变化，而且我们已经将这些服务投入生产一年多了，而且他们似乎最近才开始推出这些服务。

绑定代码示例：

```
 @RequestMapping(value = "config/selectItem")
public ModelAndView selectItem(@Valid selectItemCommand command, BindingResult bindResults) {
   if (!"test".equals(command.getName())
   {
     //Fails into here
     int i =0;

   }    
} 
```

路径变量的代码示例：

```
@RequestMapping(value = "config/selectItem/{name}",method = RequestMethod.GET)
public ModelAndView selectItem(@PathVariable("name") String name)
{
  if (!"test".equals(name))
  {
    //Fails into here
    int i = 0;
  }
} 
```

我在参数列表中添加了一个 HttpServletRequest 请求，并且它显示的 URL 具有正确的值。

我完全忘记了，但我们大约在一年前就提出了这个问题，当时我已经提交了一张票，当时我认为已经解决了它，但没有解决。 [Spring MVC 正在删除 @PathVariable](https://stackoverflow.com/questions/5649669/spring-mvc-is-dropping-a-pathvariable)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T14:49:54.323

事实证明，我们错误地实现了 StringTrimmerEditor，它不是线程安全的。

# c# - ASP.Net 3.5 ClientID 问题

> ID：12495871
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:17.033
> 
> 标签：c#, asp.net

我有一个简单的输入元素`runat="server"`。该字段嵌套在几层用户控件中，我使用 getter 提取 ID，但给出的 ID 不是完整生成的 ID。

```
//UserControl2.ascx nested inside of UserControl1.ascx
...
<input type="text" runat="server" id="newTextBox" />
...

//UserControl1.ascx.cs nested inside of Page1.aspx
...
public string NewTextBoxId;
protected void UserControl2PlaceHolder_Load(object sender, EventArgs e)
{
    var c = LoadControl("~/Common/Controls/Shared/UserControl2.ascx");
    NewTextBoxId = ((App.Common.Controls.Shared.UserControl2) c).newTextBox.ClientID;
} 
```

问题是 NewTextBoxId 设置为“newTextBox”，而不是完全生成的“ct100_ct100_MainContent_etc._newTextBox”。输入的 ID 在 HTML 中正确呈现，但 NewTextBoxId 设置不正确。更奇怪的是，输入的 ID 在我的本地实例上呈现为“newTextBox”，但是当我部署到我们的登台服务器时，它在 HTML 中呈现为“ct100_ct100..._newTextBox”。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:48:12.030

正如我的评论中所述。LoadedControl`c`必须在调用之前添加到当前控件的 ControlCollection 中`c.ClientID`。添加到 ControlCollection 将导致`c`被初始化。

```
//UserControl2.ascx nested inside of UserControl1.ascx
...
<input type="text" runat="server" id="newTextBox" />
...

//UserControl1.ascx.cs nested inside of Page1.aspx
...
public string NewTextBoxId;
protected void UserControl2PlaceHolder_Load(object sender, EventArgs e) 
{
    var c = LoadControl("~/Common/Controls/Shared/UserControl2.ascx");
    this.Controls.Add(c);
    NewTextBoxId = ((App.Common.Controls.Shared.UserControl2) c).newTextBox.ClientID;
} 
```

# android - Android：如何将图标设置为输入类型密码

> ID：12495872
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:18.670
> 
> 标签：android, types, input, passwords, android-edittext

我有一个编辑文本字段并将他的 inputType 设置为`"textPassword"`. 默认视图显示小点图标。我想增加它们的尺寸。我认为没有`"largeTextPassword"`选项，您应该自己设置。

我制作了一个新的大圆点图标，并希望将其放入而不是常规图标。现在我使用该`setText()`方法将文本插入其中。我如何结合这些值？

我试图增加，`textSize`但填充让我在不同的屏幕尺寸上发疯。我尝试使用该`setCompoundDrawablesWithIntrinsicBounds(R.drawable.dot, 0, 0, 0)`方法，但仍然不确定这是正确的方法。

如果有人可以对此有所了解，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:00:45.710

不要使用`android:inputType="textPassword"`，因为这会将字符替换为默认的点字符。

添加 a `TextWatcher`，并在用户键入时将新字符存储/附加到 a 中/到 a`String`中，并用您自己的 ImageSpan 替换 EditText 中的该字符。

# c# - linq中的动态排序

> ID：12495873
> 
> 赞同：8
> 
> 时间：2012-09-19T13:34:24.507
> 
> 标签：c#, linq, c#-4.0, lambda, expression-trees

请考虑这种情况：

我有一个包含大约 50 个字段的类列表。我想要一个组合框，用户可以根据要排序的字段列表进行选择。例如，如果用户选择“F1”列表根据“F1”排序。

我不想`if-else`对每个字段进行排序。我看到了这个主题：

[对集合或对象列表进行数据绑定时对网格视图进行排序](https://stackoverflow.com/questions/617088/sorting-a-gridview-when-databinding-a-collection-or-list-of-objects)

但我不能使用它的答案。我如何`Expression Tree`用于此目的？

## 谢谢

**编辑1）**：

根据亲爱的@Thom Smith 的回答，我写了这段代码：

```
 using (NorthwindModel1.NorthwindEntities2 ent = new NorthwindModel1.NorthwindEntities2())
    {
        var query = from o in ent.Orders
                    where o.OrderID < 10257
                    select o;

        query.OrderBy("CustomerID", SortDirection.Ascending);

        GridView1.DataSource = query;
        GridView1.DataBind();
    } 
```

但它没有排序。如果我以这种方式编写该代码：

```
GridView1.DataSource = query.OrderBy(o=>o.CustomerID); 
```

它正在排序。哪里有问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-19T13:39:50.413

这是我用于此的方法：

```
private IQueryable<T> OrderQuery<T>(IQueryable<T> query, OrderParameter orderBy)
{
    string orderMethodName = orderBy.Direction == SortDirection.Ascending ? "OrderBy" : "OrderByDescending";
    Type t = typeof(T);

    var param = Expression.Parameter(t, "shipment");
    var property = t.GetProperty(orderBy.Attribute);

    /* We can't just call OrderBy[Descending] with an Expression
     * parameter because the second type argument to OrderBy is not
     * known at compile-time.
     */
    return query.Provider.CreateQuery<T>(
        Expression.Call(
            typeof(Queryable),
            orderMethodName,
            new Type[] { t, property.PropertyType },
            query.Expression,
            Expression.Quote(
                Expression.Lambda(
                    Expression.Property(param, property),
                    param))
        ));
} 
```

`OrderParameter`只是一个具有属性和方向的结构。

编辑：补充说明。

这个方法来自我的`DynamicOrderList`类​​，它是一个`OrderParameter`对象列表。如果您只需要按一个字段排序，那么您可以稍微简化一下：

```
private IQueryable<T> OrderByDynamic<T>(this IQueryable<T> query, string attribute, SortDirection direction)
{
    try
    {
        string orderMethodName = direction == SortDirection.Ascending ? "OrderBy" : "OrderByDescending";
        Type t = typeof(T);

        var param = Expression.Parameter(t);
        var property = t.GetProperty(attribute);

        return query.Provider.CreateQuery<T>(
            Expression.Call(
                typeof(Queryable),
                orderMethodName,
                new Type[] { t, property.PropertyType },
                query.Expression,
                Expression.Quote(
                    Expression.Lambda(
                        Expression.Property(param, property),
                        param))
            ));
    }
    catch (Exception) // Probably invalid input, you can catch specifics if you want
    {
        return query; // Return unsorted query
    }
} 
```

然后像这样使用它：

```
myQuery = myQuery.OrderByDynamic("name", SortDirection.Ascending); 
```

编辑2：

```
public IQueryable<T> OrderBy<T>(this IQueryable<T> query, string attribute, SortDirection direction)
{
    return ApplyOrdering(query, attribute, direction, "OrderBy");
}

public IQueryable<T> ThenBy<T>(this IQueryable<T> query, string attribute, SortDirection direction)
{
    return ApplyOrdering(query, attribute, direction, "ThenBy");
}

private IQueryable<T> ApplyOrdering<T>(IQueryable<T> query, string attribute, SortDirection direction, string orderMethodName)
{
    try
    {
        if (direction == SortDirection.Descending) orderMethodName += "Descending";

        Type t = typeof(T);

        var param = Expression.Parameter(t);
        var property = t.GetProperty(attribute);

        return query.Provider.CreateQuery<T>(
            Expression.Call(
                typeof(Queryable),
                orderMethodName,
                new Type[] { t, property.PropertyType },
                query.Expression,
                Expression.Quote(
                    Expression.Lambda(
                        Expression.Property(param, property),
                        param))
            ));
    }
    catch (Exception) // Probably invalid input, you can catch specifics if you want
    {
        return query; // Return unsorted query
    }
} 
```

和：

```
myQuery=myQuery.OrderBy("name", SortDirection.Ascending).ThenBy("date", SortDirection.Descending); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-22T16:17:35.237

OrderBy 不进行就地排序。它*返回*一个序列，*在评估时*将对其进行排序。这通常是懒惰地完成的，意思是：在它被枚举之前，它**什么也不**做。您当前的代码只是丢弃了这个最重要的返回值。修复很简单：捕获返回值：

```
query = query.OrderBy("CustomerID", SortDirection.Ascending); 
```

注意：同样，应用“Where”不会过滤现有数据：它返回一个*在枚举时*被过滤的序列。因此，如果您进行过滤，您将获得类似的结果：

```
query = query.Where(...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-19T03:18:20.543

这是我的热门话题，使用`Enumerable`+Reflection 而不是查询：

```
list.OrderBy(x => {
                       var prop = x.GetType().GetProperty(sortFieldName);
                       return prop.GetValue(x);
                   });

if (!isSortAsc) list.Reverse(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-22T11:53:50.947

希望它会有所帮助。它对我有用，可以动态过滤 C# 列表

```
string jtSorting = "ContactName";
DashboardModel Sup = new DashboardModel();
List<Applicant> lstSup = Sup.GetonBoard();
lstSup = lstSup.AsQueryable().SortBy(jtSorting).ToList(); 
```

# routing - AngularJS 表单未填写重定向

> ID：12495875
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:25.160
> 
> 标签：routing, angularjs

如何在AngularJS中的重定向上自动填写编辑表单？以下是场景：

我有一个产品清单。当我点击 时`edit product`，我应该被重定向到编辑表单（通过使用 AngularJS 路由），并且包含 2 个字段 - 名称和描述的编辑表单应该由要编辑的数据自动填充。

我成功重定向到编辑表单，但无法用原始数据填写表单。以下是我的代码：

**应用程序.js**

```
 angular.module('productapp', []).
    config(['$routeProvider', function($routeProvider) {
    $routeProvider.
        when('/productapp', {templateUrl: 'partials/productList.html'}).
        when('/productapp/:productid', {templateUrl: 'partials/edit.html'}).
        otherwise({redirectTo: '/productapp'});
}]); 
```

**编辑.html**

```
<div ng-controller="productsCtrl">
        <form method="POST" ng-controller="productsCtrl">
        <label>Add New Product:</label>
            <input type="text" name="keywords" ng-model="rs.name" placeholder="enter name..." value="{{rs.name}}">
            <input type="text" name="desc" ng-model="rs.description" placeholder="enter description..." value="{{rs.description}}">
            <button type="submit" ng-click="save(rs.product_id)">Save</button>
</form>
</div> 
```

**产品.js**

```
function productsCtrl($scope, $http, $element) {
        //~ $scope.url = 'php/search.php'; // The url of our search
        // The function that will be executed on button click (ng-click="search()")
        $http.get('php/products.php').success(function(data){
            alert("hi");
            $scope.products = data;
        });
$scope.fetch = function(id) {
        var elem = angular.element($element);
        var dt = $(elem).serialize();
        //alert(id);
        dt = dt+"&id="+id;
        dt = dt+"&action=fetch";
        console.log($(elem).serialize());
        $http({
            method: 'POST',
            url: 'php/products.php',
            data: dt,
            headers: {'Content-Type': 'application/x-www-form-urlencoded'}
        }).success(function(data, status) {
            //~ $scope.status = status;
            //~ $scope.data = data;
            $scope.rs = data;
            console.log(data); // Show result from server in our <pre></pre> element
        }).error(function(data, status) {
            $scope.data = data || "Request failed";
            $scope.status = status;
        });
    }; 
```

**索引.html**

```
<html ng-app = "productapp">
<head>
<title>Search form with AngualrJS</title>
        <script src="../angular-1.0.1.min.js"></script>
        <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="js/products.js"></script>
        <script src="js/app.js"></script>
</head>
<body>
    <div ng-view></div>
</body>
</html> 
```

**产品列表.html**

```
 <div ng-controller="productsCtrl">
        <form method='POST' ng-controller="productsCtrl">
...

    <td><a href='#/productapp/{{product.product_id}}' ng-click = "fetch(product.product_id)">edit</a></td> 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T20:03:57.270

为编辑页面创建另一个控制器 (EditCtrl)。从 productslist.html 片段中删除 fetch() —— 只需要链接。然后，在您的EditCtrl 中，执行获取功能（即，不要将该功能放入EditCtrl 中的方法中）。

将 $routeParam 注入您的 EditCtrl 以访问 productID：

```
function EditCtrl($scope, $routeParams) {
   alert($routeParams.productid);
   // ... code here to fetch ... 
```

# computer-vision - Weka - Explorer 和 Experimenter 结果之间的差异

> ID：12495877
> 
> 赞同：2
> 
> 时间：2012-09-19T13:34:38.203
> 
> 标签：computer-vision, classification, weka

我只是想知道为什么正确分类的百分比与 Weka 的 Explorer 和 Experimenter 方面不同。我已经检查以确保我正在使用 10 倍折叠验证以及所有其他参数！

有人有想法么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T19:28:14.413

当我在 Weka 邮件列表上通过电子邮件发送给他时，我有 Mark Hall 提供的解决方案。以下是 Explorer 和 Experimenter 之间的区别：

Experimenter 的操作方式与 Explorer 不同。Explorer 在交叉验证的折叠上对评估指标求和 - 例如，通过将测试折叠上所有正确分类的实例相加然后除以实例总数来计算正确百分比。另一方面，Experimenter 计算折叠的平均值。此外，Experimenter 中的默认设置是运行 10 次重复 10 倍交叉验证（因此平均 100 倍）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:39:09.237

不确定，但 Explorer 和 Experimenter 上的随机种子可能不同。如果是这种情况，数据集将不同，从而导致不同的百分比。

# workflow-foundation - 为 Net.Msmq 启用 BufferedReceive 时无法获取 WF 服务元数据

> ID：12495878
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:38.607
> 
> 标签：workflow-foundation, workflowservice

我有一个托管在 AppFabric IIS 7/WAS 中的 WF 服务。它是为 Net.Msmq 配置的——这很好用。客户端很好地使用了服务。如果我将 WorkflowService 更改为允许 BufferedReceive，那么我将无法再导航到 xamlx 以获取元数据。错误如下：

*

> “合同‘IInstructionServices’至少有一个操作用‘ReceiveContextEnabledAttribute’注释，但用于地址‘net.msmq://localhost/private/CSDInstructionProcessing/Instructions.xamlx’的合同端点的绑定不支持所需的绑定属性'IReceiveContextSettings'。请确保用于合约的绑定支持 ReceiveContext 功能"

*任何线索为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T14:22:04.903

我想通了。这是因为队列不是事务性的，并且 ExactlyOnce 设置为 false。

# queue - 实时线程安全缓冲算法

> ID：12495880
> 
> 赞同：0
> 
> 时间：2012-09-19T13:34:45.133
> 
> 标签：queue, real-time

我正在寻找实时线程安全缓冲算法的示例/教程（即无等待队列算法？）。在网上寻找..我发现了一些非常繁重的硕士论文[解决方案](http://www.cse.chalmers.se/~tsigas/papers/Real-Time-Java-queues-RTAS06.pdf)。我需要一些东西（用 21 世纪的英语）来解决我正在处理的实时[应用程序。](https://stackoverflow.com/questions/12462646/purge-the-contents-of-a-data-container-in-real-time)谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T12:28:45.227

《[C++ Concurrency in Action》](https://rads.stackoverflow.com/amzn/click/com/1933988770)这本书有一章专门介绍这种数据结构的实现……而且由于目标 C 可以使用 C++……这行得通。

# iphone - 当用户进行滑动删除手势时，UITableCellView 的子视图会缩小

> ID：12495884
> 
> 赞同：1
> 
> 时间：2012-09-19T13:34:55.080
> 
> 标签：iphone, ios, uitableview

我有一个 UITableView，其单元格中有自定义子视图。当用户在单元格上滑动删除手势时，我的视图会缩小一会儿，同时出现“删除”按钮。

据我了解，这是由于出现“删除”按钮并且我的子视图需要变短时发生的一些系统动画。我将子视图的 contentMode 设置为 UIViewContentModeRedraw ，动画完成*后一切看起来都很好。*

我查看了它在内置邮件应用程序中的工作原理，那里一切都很好。

我怎样才能避免这种缩小？是否可以将此动画更改为“淡出”之类的？或者我可以在这个动画开始时让我的子视图立即变短吗？

**解决方案：**

最后，我通过以下方式子类化 UITableViewCell 并覆盖 layoutSubviews 方法找到了解决方案：

```
- (void)layoutSubviews
{
    [super layoutSubviews];

    UIView *view = [self.contentView viewWithTag:101];
    CATransition *animation = [CATransition animation];
    animation.duration = 0.2f;
    animation.type = kCATransitionFade;
    [view.layer removeAllAnimations];
    [view.layer addAnimation: animation forKey:@"deletingFade"];
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:52:23.527

您可以使用此委托方法：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = (UITableViewCell *)[tableView cellForRowAtIndexPath:indexPath];
    // do what ever you need to change in your cell
    return  YES;
} 
```

（或者）

您可以在 TableViewCell 中使用以下方法：

```
- (void)willTransitionToState:(UITableViewCellStateMask)state
- (void)didTransitionToState:(UITableViewCellStateMask)state

You can change according to state if you are using customCell. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:51:00.657

覆盖派生类`layoutSubviews`中的方法`UITableViewCell`并相应地更新所有子视图`contentView.bounds.size`的位置。

# php - 我可以在 symfony 2 中使用 symfony 1.4 推动表单和表单过滤器以及构建器吗？

> ID：12495888
> 
> 赞同：0
> 
> 时间：2012-09-19T13:35:03.210
> 
> 标签：php, symfony, symfony1, symfony-1.4

我想使用 sf1 表单而不是 sf2，因为我的同事正在使用 sf1 表单和表单过滤器（推进），而我们认为 sf2 表单缺乏我们需要的东西。

有没有什么特别简单的方法让我错过了，而不是尝试将 symfony 1.4 特定代码借用到 symfony 2 捆绑包中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:06:33.550

symfony 1.4 中的过滤器与表单几乎相同，除了：

*   它可以在会话中存储值
*   它可以通过其值构建查询

您可以自己轻松实现它，甚至可以为其他人创建有用的捆绑包。

# python - 没有在python的正则表达式中返回整个模式

> ID：12495890
> 
> 赞同：2
> 
> 时间：2012-09-19T13:35:06.593
> 
> 标签：python, regex

我有以下代码：

```
haystack = "aaa months(3) bbb"
needle = re.compile(r'(months|days)\([\d]*\)')
instances = list(set(needle.findall(haystack)))
print str(instances) 
```

我希望它可以打印`months(3)`，但我只是得到`months`. 这有什么原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-19T13:36:57.907

```
needle = re.compile(r'((?:months|days)\([\d]*\))') 
```

解决您的问题。

您只捕获了几个月|几天的部分。

在这种特定情况下，这个正则表达式要好一些：

```
needle = re.compile(r'((?:months|days)\(\d+\))') 
```

这样你只会得到一个数字的结果，以前的结果就像`months()`工作一样。如果您想忽略月份或日期等选项的大小写，则还要添加`re.IGNORECASE`标志。像这样：

```
re.compile(r'((?:months|days)\(\d+\))', re.IGNORECASE) 
```

**对 OP 的一些解释：**

正则表达式由许多元素组成，其中最主要的是捕获组。" `()`" 但有时我们想组组而不捕获，所以我们使用 " `(?:)`" 组还有很多其他形式，但这些是最常见的。

在这种情况下，我们将整个正则表达式包围在一个捕获组中，因为您通常会尝试捕获所有内容 - 任何正则表达式都会自动被捕获组包围，但在这种情况下，您明确指定了一个，所以它没有用自动捕获组包围您的正则表达式。

现在我们已经用一个捕获组包围了整个正则表达式，我们通过添加到开头将我们拥有的组变成一​​个非捕获组`?:`，如上所示。我们也不能包围整个正则表达式，只将组变成非捕获组，因为如您所见，它会自动将整个正则表达式转换为 non 存在的捕获组。我个人更喜欢显式编码。

关于正则表达式的更多信息可以在这里找到：http: [//docs.python.org/library/re.html](http://docs.python.org/library/re.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:42:02.680

Parens 不仅用于分组，还用于形成捕获组。你想要的是`re.compile(r'(?:months|days)\(\d+\)')`. 这对 or 条件使用了非捕获组，并且不会为您提供一堆您在使用 findall 时似乎不想要的子组匹配项。

# node.js - Mongoose 中的“__v”字段是什么

> ID：12495891
> 
> 赞同：394
> 
> 时间：2012-09-19T13:35:18.657
> 
> 标签：node.js, mongodb, mongoose

我正在使用`Mongoose`版本 3 和`MongoDB`版本 2.2。我注意到一个`__v`字段已开始出现在我的`MongoDB`文档中。它与版本控制有关吗？它是如何使用的？

* * *

## 回答 #1

> 赞同：378
> 
> 时间：2012-09-19T13:37:29.813

从[这里](http://mongoosejs.com/docs/guide.html#versionKey)：

> 这`versionKey`是由 Mongoose 首次创建时在每个文档上设置的属性。此键值包含文档的内部修订。此文档属性的名称是可配置的。默认值为`__v`.
> 
> 如果这与您的应用程序冲突，您可以这样配置：

```
new Schema({..}, { versionKey: '_somethingElse' }) 
```

* * *

## 回答 #2

> 赞同：94
> 
> 时间：2015-08-07T07:47:32.490

好吧，我看不到托尼的解决方案……所以我必须自己处理……

* * *

如果您不需要 version_key，您可以：

```
var UserSchema = new mongoose.Schema({
    nickname: String,
    reg_time: {type: Date, default: Date.now}
}, {
    versionKey: false // You should be aware of the outcome after set to false
}); 
```

将 versionKey 设置为 false 意味着文档不再是版本控制的。

如果文档包含一组子文档，这将是有问题的。可以删除其中一个子文档，从而减小数组的大小。稍后，另一个操作可以访问数组中原始位置的子文档。

由于数组现在变小了，它可能会意外访问数组中的错误子文档。

versionKey 通过将文档与 versionKey 相关联来解决这个问题，mongoose 在内部使用它来确保它访问正确的集合版本。

更多信息请访问：[http ://aaronheckmann.blogspot.com/2012/06/mongoose-v3-part-1-versioning.html](http://aaronheckmann.blogspot.com/2012/06/mongoose-v3-part-1-versioning.html)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2021-02-07T12:36:04.827

对于 NestJS 中的删除，需要向`Schema()`装饰器添加选项

```
@Schema({ versionKey: false }) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2021-05-14T07:22:35.990

如果不需要，可以禁用版本密钥。

看这个例子：

```
var User = new mongoose.Schema({
   FullName:{
       type :String,

   },
   BirthDay:{
       type :String,

   },
   Address:{
       type :String,
   },
   Gender:{
       type:String,
   },
   PhoneNumber:{
       type:Number,
       ref:'Account'
   },
   AccountID:{
        type: Schema.Types.ObjectId,
        ref: 'Account'
   },
   UserName:{
       type:String,
       ref:'Account'
   }
},{collection:'User',
   versionKey: false //here
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-09-08T14:30:10.787

它是版本密钥。每当进行新的更新时，它都会更新。我个人不喜欢禁用它。

如果您想了解更多信息，请阅读此解决方案 [1]：[Mongoose 版本控制：何时禁用它是安全的？](https://stackoverflow.com/questions/17810637/mongoose-versioning-when-is-it-safe-to-disable-it)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-16T08:06:32.183

我们可以在 Schema 定义中使用**versionKey: false**

```
'use strict';

const mongoose = require('mongoose');

export class Account extends mongoose.Schema {

    constructor(manager) {

        var trans = {
            tran_date: Date,
            particulars: String,
            debit: Number,
            credit: Number,
            balance: Number
        }

        super({
            account_number: Number,
            account_name: String,
            ifsc_code: String,
            password: String,
            currency: String,
            balance: Number,
            beneficiaries: Array,
            transaction: [trans]
        }, {
            versionKey: false // set to false then it wont create in mongodb
        });

        this.pre('remove', function(next) {
            manager
                .getModel(BENEFICIARY_MODEL)
                .remove({
                    _id: {
                        $in: this.beneficiaries
                    }
                })
                .exec();
            next();
        });
    }

} 
```

# actionscript-3 - FlashDevelop Profiler 不显示任何内容

> ID：12495892
> 
> 赞同：3
> 
> 时间：2012-09-19T13:35:21.033
> 
> 标签：actionscript-3, profiler, flashdevelop

试图解决内存泄漏问题……我正在使用 Flash Develop ……我在编译代码之前单击了启动分析器……但我仍然看不到任何东西……两天前它工作正常！任何人都可以帮我解决这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:03:20.907

单击顶部工具栏上的时钟图标按钮
确保通过单击时钟图标获得的弹出窗口中的标志为绿色。
运行您的应用程序，它现在应该可以工作了

# xml - 当 RECORD_TYPE='ERROR' 使用 XSLT 时，如何通过 Record_No 获取每个 location_Name 的唯一记录计数

> ID：12495893
> 
> 赞同：0
> 
> 时间：2012-09-19T13:35:23.620
> 
> 标签：xml, xslt, tibco

当 RECORD_TYPE='ERROR' 时，如何通过 Record_No 获取每个 location_Name 的唯一记录数。如果对于 RECORD_NO 有 RECORD_TYPE='ERROR' 的多条记录，则 RECORD_NO 只应计算一条记录，最后所有这些记录应按 LOCATION_NAME 分组，下面是 xml 日期

```
<root>
    <SellOutErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <RECORD_NO>1</RECORD_NO>
            <ERROR_DESC>trx doc type is invalid</ERROR_DESC>
        <LOCATION_NAME>Chen Ken</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>2</RECORD_NO>
            <ERROR_DESC>invoice amount is zero</ERROR_DESC>
        <LOCATION_NAME>Chen Ken</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
    </SellOutErrorRecord>
        <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
            <ERROR_DESC>sales qty is zero</ERROR_DESC>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAMEChen Ken</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>trx currency is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>Chen Ken</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>Chen Ken</LOCATION_NAME>
        <PRODUCT_NUMBER>445860-B21</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>1</RECORD_NO>
        <LOCATION_NAME>Chen Ken</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    </SellOutErrorRecord>
        <SellOutErrorRecord>
        <RECORD_TYPE>WARNING</RECORD_TYPE>
        <RECORD_NO>1</RECORD_NO>
            <ERROR_DESC>trx doc type is invalid</ERROR_DESC>
        <LOCATION_NAME>Cheng Boon</LOCATION_NAME>
        <PRODUCT_NUMBER>336549R-001</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <RECORD_NO>2</RECORD_NO>
            <ERROR_DESC>invoice amount is zero</ERROR_DESC>
        <LOCATION_NAME>Cheng Boon</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
    </SellOutErrorRecord>
        <SellOutErrorRecord>*-
        <RECORD_TYPE>ERROR</RECORD_TYPE>
            <ERROR_DESC>sales qty is zero</ERROR_DESC>
        <RECORD_NO>2</RECORD_NO>
        <LOCATION_NAME>Cheng Boon</LOCATION_NAME>
        <PRODUCT_NUMBER>3X-KN73C-DB</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>trx currency is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>Cheng Boon</LOCATION_NAME>
        <PRODUCT_NUMBER>339112-B25</PRODUCT_NUMBER>
    </SellOutErrorRecord>
    <SellOutErrorRecord>
        <RECORD_TYPE>ERROR</RECORD_TYPE>
        <ERROR_DESC>invoiced net amount is invalid</ERROR_DESC>
        <RECORD_NO>3</RECORD_NO>
        <LOCATION_NAME>Cheng Boon</LOCATION_NAME>
        <PRODUCT_NUMBER>445860-B21</PRODUCT_NUMBER>
    </SellOutErrorRecord>
</root> 
```

预期的输出是：

```
LOCATION_NAME:Chen Ken COUNT:3
LOCATION_NAME:Cheng Boon COUNT:2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T15:15:01.640

This is a pretty awful solution using for-each and a call template, with the same distincting as done [here](https://stackoverflow.com/questions/12462112/unique-record-count-for-a-particular-node-value-with-xslt/12462546#12462546). You might consider asking your upstream data provider to clean up the data - I'm not sure that XSLT is the best place for 'debouncing' data like this. It's XSLT 1.0.

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" indent="no"/>

    <xsl:template match="/root">
        <xsl:for-each select="*[LOCATION_NAME]">
            <xsl:variable name="LocationName" select="LOCATION_NAME/text()" />
            <xsl:if test="not(following::*[LOCATION_NAME/text()=$LocationName])" >
                <xsl:call-template name="CountGroup">
                    <xsl:with-param name="LocationName" select="$LocationName" />
                </xsl:call-template>
            </xsl:if>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="CountGroup">
        <xsl:param name="LocationName"></xsl:param>
        LOCATION_NAME:<xsl:value-of select="$LocationName"/>
        COUNT <xsl:value-of select="count(//*[RECORD_TYPE='ERROR' and LOCATION_NAME=$LocationName 
                                              and not(following::*[RECORD_TYPE='ERROR' and LOCATION_NAME=$LocationName]
                                             /RECORD_NO/text() = RECORD_NO/text())])" />

    </xsl:template>
</xsl:stylesheet> 
```

Returns

```
LOCATION_NAME:Chen Ken COUNT 3
LOCATION_NAME:Cheng Boon COUNT 2 
```

# .htaccess - htaccess 全部重写为 index.html

> ID：12495897
> 
> 赞同：6
> 
> 时间：2012-09-19T13:35:30.430
> 
> 标签：.htaccess, mod-rewrite

我正在尝试编写`.htaccess`文件，以便无论用户请求什么，他都会拥有该页面`index.html`

我写了这个：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule .* index.html [NC] 
```

我知道这将导致：无论传入的请求 URL 是什么，即`www.domain.com/***`（无论斜线后面是什么），结果都将是页面`www.domain.com/index.html`

但是，我收到服务器错误。我错过了什么？

注意：我不希望它是永久重定向，我只是想用那个`index.html`页面“隐藏”我网站的内容几个小时（这表明该网站正在维护中）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T13:44:27.653

如果您想将所有内容重定向到**临时**维护页面，您可以执行以下操作：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/maintenance.html$
RewriteRule .* /maintenance.html [L,R=302] 
```

R=302 标志用于生成临时重定向

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T13:37:55.853

尝试删除`Options +FollowSymlinks`，某些服务器不允许您覆盖 php.ini 设置。

# c# - 从 IList 转换 到非泛型 IList

> ID：12495910
> 
> 赞同：19
> 
> 时间：2012-09-19T13:36:26.457
> 
> 标签：c#, .net, list, generics, c#-2.0

我正在实现`IListSource`需要`GetList()`具有以下签名的方法：

```
IList GetList() 
```

我正在使用 .NET 框架 2，我想返回一个实现 IList 的对象，如下所示：

```
public System.Collections.IList GetList()
{
    return this._mydata; // Implements IList<MyDataRow>            
} 
```

但我得到一个编译错误说：`Cannot implicitly convert type MyData to System.Collections.IList`.

如果我创建一个**新**的 type 列表`List<MyDataRow>`，填充它并返回这个列表对象，那么它就可以工作了。换句话说，这有效：

```
public System.Collections.IList GetList()
{
   List<MyDataRow> list = new List<MyDataRow>();
   foreach (MyDataRow row in this._mydata)
   {
       list.Add(row);
   }
   return list;
} 
```

但是必须重新创建列表才能将其从 type`IList<T>`转换为`IList`. 为什么我可以返回 a `List<MyDataRow>' from 'GetList()`，但不能返回 a `IList<MyDataRow>`？有谁知道我在`IList<MyDataRow>`不重新填充新列表的情况下返回的方法？

更新：

`_mydata`声明成员变量：

```
private MyData _mydata; 
```

并`MyData`声明：

```
public class MyData : IList<MyDataRow>
{
   ....
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-19T13:42:29.810

> 为什么我可以返回 a `List<MyDataRow>`from `GetList()`，但不能返回`IList<MyDataRow>`

这是因为`List<T>`implements不能转换为它们是 2 个独立的接口。所以回答你的问题：`IList``IList<T>``IList`

> 有谁知道我在`IList<MyDataRow>`不重新填充新列表的情况下返回的方法？

如果具体类型实现`IList`（实现`List<T>`），那么您可以显式地转换它，例如

```
return (IList)this.mydata; 
```

**更新**

根据您的更新，您必须更新`MyData`以实现，`IList`否则您别无选择，只能返回一个实现它*的新集合。*

或者，如果`MyData`确实是一个通用列表，那么我建议你让它继承自`List<T>`，这样你就可以获得更多的灵活性和兼容性，例如

```
class MyData : List<MyDataRow>
{
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T13:45:47.823

该类`MyData`需要`IList`与通用版本一起实现`IList<T>`。

```
class MyData : IList<MyDataRow>, IList
{
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-19T13:54:17.193

`IList<T>`不扩展`IList`，因为期望通用版本的每个实现都提供与非通用版本相同的合同是不合理的。如果它确实扩展了`IList`，那么有人可以获取从返回的值`GetList`并合理地期望调用，例如`Add(DateTime.Now)`，或`Add(Thread.CurrentThread)`。这就是`IList`承诺。

这就是将您的列表复制到`List<T>`作品的原因 -`List<T>`实现*两个*`IList`接口，并在使用不适当的参数类型调用其（显式实现的）方法时抛出。

如果您可以避免返回`IEnumerable`，请改为这样做。如果您可以返回`IList<MyDataRow>`，那就这样做。如果您确实需要非泛型`IList`返回，请实现接口并`MyDataRow`适当处理非值。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-19T14:00:34.833

`IList`在您的数据收集类上实现或创建一个适配器，它包装`IList<T>`并实现`IList`：

```
public sealed class NonGenericList<T> : IList
{
    private readonly IList<T> _wrappedList;

    public NonGenericList(IList<T> wrappedList)
    {
        if(wrappedList == null) throw new ArgumentNullException("wrappedList");

        _wrappedList = wrappedList;
    }

    public int Add(object value)
    {
        _wrappedList.Add((T)value);
        return _wrappedList.Count - 1;
    }

    public void Clear()
    {
        _wrappedList.Clear();
    }

    public bool Contains(object value)
    {
        return _wrappedList.Contains((T)value);
    }

    public int IndexOf(object value)
    {
        return _wrappedList.IndexOf((T)value);
    }

    public void Insert(int index, object value)
    {
        _wrappedList.Insert(index, (T)value);
    }

    public bool IsFixedSize
    {
        get { return false; }
    }

    public bool IsReadOnly
    {
        get { return _wrappedList.IsReadOnly; }
    }

    public void Remove(object value)
    {
        _wrappedList.Remove((T)value);
    }

    public void RemoveAt(int index)
    {
        _wrappedList.RemoveAt(index);
    }

    public object this[int index]
    {
        get { return _wrappedList[index]; }
        set { _wrappedList[index] = (T)value; }
    }

    public void CopyTo(Array array, int index)
    {
        _wrappedList.CopyTo((T[])array, index);
    }

    public int Count
    {
        get { return _wrappedList.Count; }
    }

    public bool IsSynchronized
    {
        get { return false; }
    }

    public object SyncRoot
    {
        get { return this; }
    }

    public IEnumerator GetEnumerator()
    {
        return _wrappedList.GetEnumerator();
    }
} 
```

用法：

```
public System.Collections.IList GetList()
{
    return new NonGenericList<MyDataRow>(this._mydata);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-19T13:50:10.537

如果可以直接将 an 转换`IList<T>`为 an `IList`，则可以返回一个列表，该列表可能（例如）通过其方法被非`T`对象“污染”。`Add(object)`

# java - 使用 jquery 的 Json 格式

> ID：12495912
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:36:35.307
> 
> 标签：java, javascript, jquery, html, rest

我想使用 jquery 以以下格式形成 json，但无法达到预期的格式。我的实际结果是只打印最后一个键值对。

来自 ejs 文件的代码片段

```
 var count=0;
    var meta=[];
    $.each(this.metadata, function(key, value){
    <input type="text" id="keyfun" name='meta[count].key' value='<%=key%>' size="40"/>
    <input type="text" id="valfun" name='meta[count].value' value='<%=value%>' size="40"/>
    count++; 
```

元数据对象包含键值对。需要以 json 格式打印键和值。请就此提出建议..

```
Expected Result:
{"meta":
[
{"key":"user ","value":"test1"},
{"key":"test","value":"test2"},
]
} 
```

实际结果

```
{
 "meta": [
         {
          "key": "test1",
          "value": "test"
         }
         ]
} 
```

* * *

我已将元数据对象值添加到数组中，然后尝试从对象数组中进行迭代。1）将元数据值添加到数组 $.each(this.metadata, function(key, metaValue){arr.push({key1: key, value1: metaValue}); }); 2) 迭代数组对象
$.each(arr, function (index, metaValue) { '/> ' size="40"/> });

输出：{“metaValue”：{“key1”：“mobile”，“value1”：“wsmuser”}}

我得到了最后一个键和值对，没有得到完整的键和值对......请就此提出建议。问候，拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:56:01.133

红色关于[$.each 的](http://api.jquery.com/jQuery.each/)工作原理。我会这样做：

```
var meta=[];
$.each(this.metadata, function(index, metaValue){
  <input type="text" id="keyfun" name='metaValue.key' value='<%=metaValue.key%>' size="40"/>
  <input type="text" id="valfun" name='metaValue.value' value='<%=metaValue.value%>' size="40"/>
}); 
```

当然 if`this.metadata`是一个对象数组，每个对象都有键和值。我没有测试它，但它会是这样的:)

# google-apps-script - adressline 中的键值与 Google Script 中的 getId() 值之间的差异

> ID：12495917
> 
> 赞同：0
> 
> 时间：2012-09-19T13:37:08.507
> 
> 标签：google-apps-script

我想问一下地址线中的值和我使用getId（）时得到的id有什么区别。例如，对于一份文档，其`getId()`值为：

```
t8K_TLQPmKzgB72pY4TblUg 
```

而在地址线中，关键是：

```
0Amu7sNvd2IoudDhLX1RMUVBtS3pnQjcycFk0VGJsVWc 
```

到目前为止我发现的是，当您在 base64 中编码 getId 时，您或多或少会得到地址线中密钥的最后一部分

```
 (base64Encode(t8K_TLQPmKzgB72pY4TblUg) = dDhLX1RMUVBtS3pnQjcycFk0VGJsVWc=). 
```

但是我仍然不知道 `0Amu7sNvd2Iou`代表什么，因为我的印象是这部分在旧文档中也有所不同，因此我不能一`0Amu7sNvd2Iou`开始就一直使用组合键

为什么我需要知道这一点：我的脚本使用 getId 方法，但有些用户手动填写他们的 id（他们只是从地址线的密钥中复制粘贴它）。结果是，当我尝试比较它们时，尽管它们引用的是同一个文档，但我无法匹配它们，就像它们完全不同......

非常感谢您为这个问题带来了光明

编辑@taras：我还可以使用密钥和 id 打开文档。一个文档有两种不同的ID，这很奇怪。例如，如果我想比较某人从地址行复制粘贴到文档的值是否与我打开的文件相同，即使它是同一个文件，我也不会得到正确的结果

```
var keyFromHeadline = "0Amu7sNvd2IoudDhLX1RMUVBtS3pnQjcycFk0VGJsVWc"
var id = SpreadsheetApp.getActiveSpreadsheet.getId();
if (keyFromHeadline==id) Browser.msgBox("blabla") 
```

因此，我会对这两个不同值的原因以及如何匹配它们感兴趣

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:51:05.753

只是一个建议：

由于 base64Encode 似乎为您提供了地址 url 的重要部分，您可以使用 a`match`来检查文档是否相同。

就像是 ：

```
 if('manually_entered_key'.match(base64Encode('the_value_obtained_by_getId')==base64Encode('the_value_obtained_by_getId')){
   // consider as the same doc ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:52:04.990

如果您需要唯一的文件 ID，只需将它们标准化。每次用户手动输入 ID 时，只需通过 fileIdNormalize 函数运行它：

```
function fileIdNormalize(id) {
  if (typeof id == 'string' && id.length > 0)
    return DocsList.getFileById(id).getId();
  return '';
} 
```

# c# - System.ComponentModel.TypeConverter 的 WinRT 替换

> ID：12495937
> 
> 赞同：5
> 
> 时间：2012-09-19T13:38:08.287
> 
> 标签：c#, .net, windows-8, windows-runtime

它看起来`TypeConverter`不可用。建议用什么来代替它？

我打算去创建自己的`TypeConverter`类来替换它，但是如果 WinRT 中有新的或更好的方法来做到这一点，我会走那条路。我还需要重新创建许多其他类；像所有默认类型转换器一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T18:11:49.570

WinRT中没有**TypeConverter**类，该团队尚未宣布任何将其包含在未来版本中的计划。你有很多选择。

**选项 1：**如果要作为数据绑定的一部分进行转换，请使用Dennis 提到的**IValueConverter接口。**

**选项 2：**如果您是该类型的创建者，您可以添加自己的显式或隐式运算符来支持强制转换：

[http://msdn.microsoft.com/en-US/library/xhbhezf4(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/xhbhezf4(v=vs.80).aspx)

[http://msdn.microsoft.com/en-US/library/z5z9kes2(v=vs.80).aspx](http://msdn.microsoft.com/en-US/library/z5z9kes2(v=vs.80).aspx)

**选项 3：**您可以创建自己的 TypeConverter 类。

**选项 4：（**如果不是绑定的一部分，我会这样做）您可以添加自己的扩展方法：

```
static public class ConverterExtensions
{
    static public string ToFixedString(this double value)
    {
        return value.ToString("D");
    }
} 
```

这会让你编写这样的代码：

```
double d = 123.45;
string str = d.ToFixedString(); // str now equals "123" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T13:45:41.520

使用[`IValueConverter`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.ivalueconverter.aspx)界面。

# two-factor-authentication - 在婴儿床上添加两个因素身份验证？

> ID：12495938
> 
> 赞同：-1
> 
> 时间：2012-09-19T13:38:11.240
> 
> 标签：two-factor-authentication

一般来说，我知道什么是两因素身份验证 (2FA) 以及它是如何工作的。我也知道它被编码到需要访问的应用程序中。我想知道的是：有没有人遇到或设计过一种将 2FA 用于 COTS（商业现成）程序的方法？

这是一个场景：我有产品 X，为了工作，X 需要打开防火墙上的一个端口，以便它可以访问防火墙内的服务器。X 没有 2FA。但我想使 2FA 生效，以便只有在 2FA 进程认为身份验证有效后，才能使用 X 来寻址防火墙内的服务器。

显然，我不希望某些叛徒用户只是从网上下载 X，安装它，然后运行它并访问服务器。但是由于 X 是一个 COTS 并且我无法访问代码，所以我只是不知道如何将 2FA 添加到它的使用中。

我是在吠叫一棵没有小动物的树，还是有什么我没有想到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T12:22:29.340

有一家名为 TeleSign 的公司专门提供[两因素身份验证](http://www.telesign.com/products-demos/telesign-2fa)解决方案。我认为他们将能够将 2FA 模块添加到您的 COTS 程序中。

# wcf - 如何在 wcf 中结合自定义用户名验证实现授权

> ID：12495939
> 
> 赞同：0
> 
> 时间：2012-09-19T13:38:13.573
> 
> 标签：wcf, validation, authorization

我在 WCF 服务中有自定义用户名/密码验证。我按照[此站点](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/)上的步骤创建此身份验证。

我想根据已经验证的凭据开发某种授权，但不知道在哪里可以找到此类信息。我用谷歌搜索了很多，发现了很多规范授权的方法，但找不到一种方法来将此授权基于自定义用户名验证。

我是 wcf 的新手，对它的所有不同类型的方法感到不知所措。有人可以为我提供一些链接，我可以在其中找到有关此特定主题的信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:37:08.997

我发现[这篇](http://msdn.microsoft.com/en-us/magazine/cc948343.aspx)文章很好地总结了 WCF 为支持授权而必须提供的所有内容。本文从最简单的实现开始，然后讨论复杂性中的每个增量步骤，一直到全面的基于声明的授权。

根据您提供的有关您的具体情况的信息，我建议您创建 IPrincipal 的自定义实现，如我链接的文章的图 3 所示。我也在这里包含了文章中的代码示例。

```
class CustomPrincipal : IPrincipal
{
    IIdentity _identity;
    string[] _roles;
    Cache _cache = HttpRuntime.Cache;

    public CustomPrincipal(IIdentity identity)
    {
        _identity = identity;
    }

    // helper method for easy access (without casting)
    public static CustomPrincipal Current
    {
        get
        {
            return Thread.CurrentPrincipal as CustomPrincipal;
        }
    }

    public IIdentity Identity
    {
        get { return _identity; }
    }

    // return all roles (custom property)
    public string[] Roles
    {
        get
        {
            EnsureRoles();
            return _roles;
        }
    }

    // IPrincipal role check
    public bool IsInRole(string role)
    {
        EnsureRoles();

        return _roles.Contains(role);
    }

    // cache roles for subsequent requests
    protected virtual void EnsureRoles()
    {
        // caching logic omitted – see the sample download
    }
} 
```

在原始帖子中引用的自定义用户名和密码验证器中，您只需填充新 IPrincipal 的实例并将其附加到静态值 Thread.CurrentPrincipal。这将允许您使用 PrincipalPermission 属性简单地装饰您希望控制访问的任何方法，如下所示。此代码示例也是我链接的文章中的图 1。

```
class Service : IService {
  // only 'users' role member can call this method
  [PrincipalPermission(SecurityAction.Demand, Role = 'users')]
  public string[] GetRoles(string username) {
    // only administrators can retrieve the role information for other users
    if (ServiceSecurityContext.Current.PrimaryIdentity.Name != username) {
      if (Thread.CurrentPrincipal.IsInRole('administrators')) {
        ...
      }
      else {
        // access denied
        throw new SecurityException();
      }
    }
  }
} 
```

# objective-c - 手势识别器的正确 MVC 模式

> ID：12495941
> 
> 赞同：2
> 
> 时间：2012-09-19T13:38:25.253
> 
> 标签：objective-c, ios, model-view-controller

我正在创建一个自定义手势识别器，我的目标是在手势持续时间内记录高于某个阈值的移动，然后在手势结束时报告该数据集。我对手势识别器对象所扮演的角色有点模糊。

由于我对 OOP 还是有点陌生​​，所以我想知道使用这个手势识别器的 MVC 的最佳实践。具体来说，手势识别器应该是“愚蠢的”并且只向视图控制器报告移动，并让逻辑和日志记录发生在 VC 中，还是在手势识别器中执行轻逻辑和日志记录一样好，然后让它手势完成后报告，并让 VC 向手势识别器询问数据。

这是我目前正在制作原型的一些示例代码（使用具有逻辑和登录手势识别器的方法）：

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesMoved:touches withEvent:event];
    if (self.state == UIGestureRecognizerStateFailed) return;

    CGPoint nowPoint = [[touches anyObject] locationInView:self.view];
    int xMovement = nowPoint.x - self.previousPoint.x;
    int yMovement = nowPoint.y - self.previousPoint.y;

    if (xMovement >= 0) {
        // positive/no x movement, log points if x or y has movement above threshold
        if (xMovement > MovementThreshold || yMovement > MovementThreshold) {
            NSLog(@"Movement above the threshold!\nx: %f\ty: %f", nowPoint.x, nowPoint.y);
            self.previousPoint = nowPoint;
        }
    } else {
        // negative x movement
        self.state = UIGestureRecognizerStateFailed;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:48:08.367

我认为手势识别是 MVC 视图组件的一部分。但最终，您可能打算让手势对模型数据的显示做一些事情。您可能会考虑使用委托模式来提供与控制器层的交互。

因此，托管手势识别器的自定义视图可以处理与屏幕视图相关的方面，同时通过委托协议将模型含义委托给控制器层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:52:24.590

我会登录手势识别器对象。我是这样看的。

如果我想在其他任何地方使用这个手势识别器进行日志记录，我需要做什么？如果您的日志记录在视图控制器中，那么您必须剪切并粘贴该代码。如果日志记录在手势识别器中，您只需创建手势识别器的新实例。

如果我想从此视图控制器中删除手势识别器，我需要做什么？同样，如果您的日志记录代码在视图控制器中，则工作量会更大。

封装告诉我我想将我的代码保留在手势识别器中。

也就是说，您的手势识别器不必是单个对象。可以是小套装。一种用于手势识别器本身，一种用于记录行为，另一种用于存储数据。这实际上取决于每个任务的复杂程度。如果每个新数据点只是将一个数字添加到数组中，那么将其分开似乎还为时过早，但如果它是您想要独立于手势识别器本身传递的数据，那么打破它可能会更好出来。

如果你决定你做出了错误的选择，那就是重构的目的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T21:50:28.793

感谢您的回答。

我将采用的方法是具有与手势识别器在手势识别器中的工作方式相关的逻辑，并在数据完成后使用委托模式来处理数据。

# sql-injection - 以下查询的 SQL 注入字符串可能是什么？

> ID：12495944
> 
> 赞同：0
> 
> 时间：2012-09-19T13:38:35.167
> 
> 标签：sql-injection

我们使用如下查询：

```
FROM users u INNER JOIN FETCH u.roles where u.password='" + password + "'" + " AND u.username='" + username + "'"; 
```

为了防止 sql 注入，我们使用正则表达式过滤“用户名”，只允许白名单字符，例如“ **^[a-zA-Z0-9]*$** ”，对于“密码”字段，我们使用检查这样作为，

```
 if(password.indexOf("'") != -1) { Sql injection attack } 
```

攻击者有什么方法可以绕过我们用来成功发起 sql-injection 攻击的检查？

我们正在使用 MySql v5.1

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T14:48:33.470

看来版主不赞成我告诉你改进你的代码，答案很简单“是的，上面的代码有缺陷”。

# php - 使用 Google StreetView 面向目标建筑

> ID：12495948
> 
> 赞同：1
> 
> 时间：2012-09-19T13:38:42.857
> 
> 标签：php, google-maps-api-3, google-street-view

我的问题很简单。

我需要`heading`知道如何定位 POV 的值。

`sv.getPanoramaByLocation()`在这种情况下，返回一个`data`包含两个箭头的变量`heading`，您可以朝哪个方向走得更远。

然而，它并没有给我`heading`以哪种方式看待建筑物的价值。*但是*，可以在街景中使用**标记**来定位您的建筑物！[例子](https://maps.google.com/maps?q=Rijksmuseum%20Amsterdam,%20Jan%20Luijkenstraat,%20Amsterdam,%20Nederland&hl=nl&ll=52.360388,4.883573&spn=0.005615,0.016512&sll=52.360321,4.883642&layer=c&cid=15367253546462381445&cbp=13,148.34,,0,2.14&cbll=52.360388,4.883574&hq=Rijksmuseum%20Amsterdam,%20Jan%20Luijkenstraat,%20Amsterdam,%20Nederland&t=h&z=17&iwloc=A&panoid=pxLFLkESEwyPid5qSaJqhw)

谁能帮我这个？我可以做任何你想要的垃圾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T03:07:59.800

对您要“查看”的建筑物的地址进行地理编码。使用[几何库](https://developers.google.com/maps/documentation/javascript/reference#spherical) computeHeading(from:LatLng, to:LatLng) 函数计算街景位置和建筑物之间的航向。

（假设地理编码器返回“屋顶”地理编码）

[示例（自由女神像）](http://www.geocodezip.com/v3_StreetView_lookAtB.html?address=Statue%20Of%20Liberty)

**另一种选择，使用方向服务：**

[相关问题：从 API 请求主干道街景全景图而不是后巷](https://stackoverflow.com/questions/31176327/request-main-road-streetview-panoramas-instead-of-back-alleys-from-api)

使用方向服务获取道路上的位置以用于街景“相机”位置的代码片段（现在可以更好地获取“内部”街景位置返回）：

```
var map;
var berkeley = new google.maps.LatLng(37.869085, -122.254775);
var sv = new google.maps.StreetViewService();
var geocoder = new google.maps.Geocoder();
var directionsService = new google.maps.DirectionsService();
var panorama;
var myLatLng;
var address = "525 Beacon St. Boston, MA";

function initialize() {

  panorama = new google.maps.StreetViewPanorama(document.getElementById("pano"));

  directionsService.route({
    origin: address,
    destination: address,
    travelMode: google.maps.TravelMode.DRIVING
  }, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
      // myLatLng = response.routes[0].legs[0].start_location;
      sv.getPanoramaByLocation(response.routes[0].legs[0].start_location, 50, processSVData);

      var marker = new google.maps.Marker({
      position: response.routes[0].legs[0].start_location,
      map: map,
      title: "Directions"
    });
      map.setCenter(myLatLng);

} else document.getElementById('info').innerHTML += "status:"+status+"<br>";
  });

  geocoder.geocode({
    'address': address
  }, geocoderCallback);

  // Set up the map
  var myOptions = {
    zoom: 15
  };

  map = new google.maps.Map(document.getElementById('map_canvas'),
    myOptions);
}
google.maps.event.addDomListener(window, 'load', initialize);

function processSVData(data, status) {
  if (status == google.maps.StreetViewStatus.OK) {

    panorama.setPano(data.location.pano);
    var camera = new google.maps.Marker({
      position: data.location.latLng,
      map: map,
      draggable: true,
      title: "camera"
    });
    var heading = google.maps.geometry.spherical.computeHeading(data.location.latLng, myLatLng);
    document.getElementById('info').innerHTML += "heading:"+heading+"<br>"
    + "location: "+myLatLng.toUrlValue(6)+"<br>"
    + "camera:"+data.location.latLng.toUrlValue(6)+"<br>";

    // alert(data.location.latLng+":"+myLatLng+":"+heading);
    panorama.setPov({
      heading: heading,
      pitch: 0,
      zoom: 1
    });
    panorama.setVisible(true);
  } else {
    alert("Street View data not found for this location.");
  }
}

function geocoderCallback(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    myLatLng = results[0].geometry.location;
    map.setCenter(myLatLng);
    if (results[0].geometry.viewport) map.fitBounds(results[0].geometry.viewport);
    else if (results[0].geometry.bounds) map.fitBounds(results[0].geometry.bounds);
    else map.setZoom(15);
    var marker = new google.maps.Marker({
      position: myLatLng,
      map: map,
      title: address
    });    

  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
};
```

```
html,
body {
  height: 100%;
  margin: 0;
  padding: 0;
}
#map_canvas {
  height: 100%;
}
```

```
<script src="http://maps.googleapis.com/maps/api/js?libraries=geometry"></script>

<div id="pano" style="width: 425px; height: 400px;float:left"></div>
<div id="info"></div>

<div id="map_canvas" style="width: 425px; height: 400px;float:left"></div>
<div id="map_center"></div>
<div id="streetview_pov"></div>
```

# css - 如何在 panelGrid 中对齐 outputLabel 和 selectOneMenu

> ID：12495953
> 
> 赞同：0
> 
> 时间：2012-09-19T13:39:03.330
> 
> 标签：css, primefaces

我需要像这个基本[示例一样使用](http://www.primefaces.org/showcase-labs/ui/panelGrid.jsf)**p:outputLabel**和**p:selectOneMenu进行简单的对齐**

但是，它只是在我使用 p:inputText 时起作用。

我需要这样的东西：

```
<p:panelGrid columns="2">

    <h:outputLabel for="idName" value="* #{msg.select_name}: " required="true" />
    <p:selectOneMenu id="idSName" value="#{manage.name}">  
            <f:selectItems value="#{manage.listNames}"  />
    </p:selectOneMenu> 

    <h:outputLabel for="idCountry" value="#{msg.select_country}: " required="true" />
    <p:selectOneMenu id="idCountryCustomer" value="#{manage.countrySelected}">  
                    <f:selectItems value="#{manage.listCountryCustomer}"  />  
    </p:selectOneMenu>

</p:panelGrid> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-02T17:52:14.597

你`p:selectOneMenu`应该申请`vertical-align:middle`：

```
<p:selectOneMenu id="idSName" value="#{manage.name}" style="vertical-align:middle;">  
        <f:selectItems value="#{manage.listNames}"  />
</p:selectOneMenu> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T18:34:12.583

您`for="idName"`在您的 中使用过`<h:outputLabel>`，但是 id`<p:selectOneMenu>`是“idSName”。名称必须匹配。

您也可以尝试`<p:outputLabel>`代替`<h:outputLabel>`.

# jquery - 如何在 Mobiscroll 中将明年日期显示为默认日期

> ID：12495955
> 
> 赞同：0
> 
> 时间：2012-09-19T13:39:28.103
> 
> 标签：jquery, mobile, datepicker, mobiscroll

我需要显示一些明年的日期作为控制的默认日期。即当控件打开时；默认情况下，它应该显示明年的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T15:22:56.347

你应该可以这样做：

```
$(function(){
    var now = new Date();
    $('#i').scroller({
        preset: 'date',
        dateFormat: 'mm/dd/yy',
        dateOrder: 'mmddyy'

    }).scroller('setDate',new Date(2013, now.getMonth(), now.getDate(), 0,0,0),true); 
});​ 
```

还有一个 jsFiddle：http: [//jsfiddle.net/kovlex/jnTZc/](http://jsfiddle.net/kovlex/jnTZc/)

# sql-server - 使用 VB.NET 后端编写网站，无需 ASP.NET

> ID：12495958
> 
> 赞同：4
> 
> 时间：2012-09-19T13:39:37.347
> 
> 标签：sql-server, vb.net, iis

我被要求用 VB.NET 服务器端代码创建一个网站，但我不能使用 ASP.NET 或任何客户端脚本。这些页面需要与托管在 Windows 2003 服务器（安装了 IIS 和 .NET 框架）上的 Microsoft SQL Server 数据库进行交互。我一直在搜索示例，但我发现的所有示例似乎都是关于 ASP 的。

我有一些基本的 PHP 经验，并且可以在 VB.NET 中编程，但我以前从未做过这样的事情。谁能给我一个参考或基本示例，我可以使用它来帮助我将 html 网页连接到 SQL 数据库，其中 VB.NET 作为我的服务器端代码，而不使用 ASP.NET？

编辑和澄清：我知道 ASP.NET 是服务器端的——我被明确禁止使用的是任何`<asp:`以`runat=server`. 如果我可以/需要使用 ASP.NET 的其他功能，那很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T13:44:43.910

> 更具体地说，我被告知不能使用任何以“<asp:”开头或包含“runat=server”的标签

您至少可以使用 IIS，以及 IIS 中的 .Net 工具，对吧？您没有完全重新实现 Web 服务器？

只需制作一个处理程序 (*.ashx)，然后对所有内容使用`Response.Write()`、`<%=`和`<%:`。

您还应该研究是否可以使用 ASP.Net MVC（它根本不需要服务器控件）。否则，您基本上又回到了经典 asp 的黑暗时代。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:41:49.637

ASP.NET 不是客户端。

ASP.NET 是一个 Web 开发框架，它使用像 C#/ Vb.NET 这样的服务器端语言。因此，您要创建的将是一个以 VB.NET 作为代码隐藏语言的 ASP.NET 应用程序。

如果您仍然不想使用 ASP.NET Webforms 框架创建网站但仍喜欢使用 Vb.NET 作为语言，您可以考虑使用 VB.NET 创建 WCF 服务并让您的客户端非 asp.net网络应用程序使用它。

**编辑：**看到你的评论后

> 我已被明确禁止使用任何标签开头

考虑**ASP.NET MVC。**没有像您在具有`runat=server`. 您将编写**纯 HTML**代码并根据需要绑定一些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T13:42:38.743

好吧，我想你可以在 VB.net 中编写一个不使用 ASP.net 的 Web 服务器，但为什么呢？

鉴于您对使用 MVC 没有具体限制，我会调查一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:07:12.667

您不一定必须使用控件来使用 ASP.NET 制作网站。使用纯 HTML 并让您的服务器端代码只输出文本。像这样的东西：

```
<table>
<%= tableRow.toString() %>
</table> 
```

您将使用很多字符串构建器，但它应该可以完成您正在寻找的内容。

如果您可以说服他们它实际上并没有执行任何客户端代码，那么 MVC 可能是另一种选择。您将 HTML 视图（以及任何允许您使用的 javascript）与业务逻辑和数据库逻辑分开。

希望对一些人有所帮助。

# php - 这 tag becomes empty on my homepage

I'm having some weird problem with my `<title></code> tag on my homepage (the problem occurs only on this page). The title does appear and after some</h1> <blockquote> <p>ID：12495960</p> <p>赞同：2</p> <p>时间：2012-09-19T13:39:40.850</p> <p>标签：php, symfony1, apache2, symfony-1.4</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：1</p> <p>时间：2012-09-19T14:07:49.500</p> </blockquote> <p>造成这种情况的主要原因是如果您使用的是 HTTP/1.1 并且传输编码被分块。如果<code><title></code>标签不是 中的第一个东西<code><head></code>，分块可能会导致浏览器迷路。</p> <p>尝试将<code><title></code>标签移近<code><head></code>.</p> </body> </html></title>`

# jquery - jquery 弹出框仅键盘访问

> ID：12495961
> 
> 赞同：0
> 
> 时间：2012-09-19T13:39:45.500
> 
> 标签：jquery, popup, focus

嗨，我正在测试一个 mvc3 网站，以便仅使用键盘即可访问它。

我的问题是我有一个带有单击选项的 jquery 弹出框，但访问它们的唯一方法是单击该框，然后您可以使用 keybored。

有没有一种方法可以自动关注弹出窗口而不点击它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:43:47.290

jQuery：

```
$(element).focus(); 
```

这将焦点设置到给定元素

# objective-c - 如何在类文件中创建然后销毁 UIWebView

> ID：12495966
> 
> 赞同：0
> 
> 时间：2012-09-19T13:39:52.640
> 
> 标签：objective-c, ios, xcode, uiwebview, uiwebviewdelegate

我正在尝试在启动应用程序时在类文件中动态创建 UIWebView。

我已经成功地在启动时在该类文件中调用了一个函数，但是当我将创建 webview 的代码添加到该函数时，我收到如下错误：“**试图从一个线程以外的线程获取 web lock主线程或 web 线程。这可能是从辅助线程调用 UIKit 的结果。现在崩溃...** "

我创建 UIWebView 的代码是这样的：

```
UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 16, 16)];
[webView setDelegate:self];
[webView setHidden:YES];
NSURL *url = [NSURL URLWithString:address];
NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
[webView loadRequest:urlRequest]; 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:49:22.120

您正在从后台线程创建 web 视图，这是 Apple 不允许的，并且会使您的应用程序崩溃。
您应该使用 dispatch_async 从主线程创建您的 webview：

```
dispatch_async(dispatch_get_main_queue(), ^{
    UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 16, 16)];
    [webView setDelegate:self];
    [webView setHidden:YES];
    NSURL *url = [NSURL URLWithString:address];
    NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url];
    [webView loadRequest:urlRequest];   
}); 
```

# ruby - Metasploit 利用“没有成功的 nop 生成器”

> ID：12495970
> 
> 赞同：0
> 
> 时间：2012-09-19T13:40:01.603
> 
> 标签：ruby, exploit, metasploit

在运行一些 Metasploit 漏洞利用时，在正确设置所有选项并发出“exploit”命令后，会出现“Nop generators succeeded”错误。

当我尝试使用 msfpayload 自己创建有效负载时，不会发生此错误，我很好奇为什么会发生这种情况。

（其中一个漏洞是 squirrelmail_pgp_plugin）

谁能给我解释一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-14T21:10:27.543

该漏洞利用仅适用于甚至不需要 NOP-s 的有效载荷类型 (CMD)。当您将 'DisableNops'=>true 设置添加到 Payload => {} 结构中时，它会起作用（您必须编辑 ruby​​ 模块文件并重新加载它）。玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:45:28.577

如果您查看[源代码](https://github.com/rapid7/metasploit-framework/blob/master/lib/msf/core/exceptions.rb)（由于应用于 Ruby 的 C/Perl 编码约定，这通常是一种可怕的体验），您将看到有关何时引发此异常的解释：

> 当没有 NOP 生成器成功生成 sled 时会引发此异常。

您尝试将哪个有效负载用于此漏洞利用？还是所有标准有效负载都发生错误？您的自定义有效负载是否成功利用？

# java - compareAndSet 预期时的记忆效果==更新

> ID：12495971
> 
> 赞同：3
> 
> 时间：2012-09-19T13:40:02.637
> 
> 标签：java, concurrency, compare-and-swap

Java 通过其原子类公开 CAS 操作，例如

`AtomicInteger.compareAndSet(expected,update)`

什么时候`expected == update`，这些调用是无操作的还是它们仍然具有易失性读+写的内存一致性效果（就像什么时候一样`expected != update`）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:42:53.300

AFAIK 没有检查`expected == update`也没有改变行为。如果硬件还没有这样做，这样做可能会增加周期，我怀疑它没有。

在任何情况下，我都不会编写依赖于调用 CAS 的副作用的代码。

如果您认为有可能，您当然可以自己添加支票。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:51:19.227

我浏览了本机代码，并且在值相等方面似乎没有任何区别。特别是在这种情况下，因为整数等价不会在引用上这样做。

它将在事件中以相同的内存一致性运行相同的逻辑`expected != update`

需要注意的是，该字段的位置总是至少有一个 volatile 负载，因此您至少会对支持的 int 字段进行 volatile 读取。

# javascript - 变量不同步更新

> ID：12495974
> 
> 赞同：0
> 
> 时间：2012-09-19T13:40:19.043
> 
> 标签：javascript

我一直遇到这个问题。现在它与`Date`对象有关

```
var now = new Date();
var later = new Date();
later.setHours( later.getHours() + 8 );

<Wait for somthing>
now = later;
later.setHours( later.getHours() + 8 );

alert(now == later); //returns True 
```

我认为这可以使用回调来解决：

```
var adjustTime = function(callback){
     now = later;
     callback();
}
adjustTime(function(){
    later.setHours( later.getHours() + 8 );
});

alert(now == later); //returns True 
```

我不明白什么？如何正确更新这些变量？

**编辑：** 好的，我应该更好地解释一下自己。我想要做的是将 now 变量更新为以后的**值**。之后我想增加 8 小时。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-19T13:44:57.857

实例之间的相等比较`Date`只是测试对象引用相等。无论如何，一旦你这样做了：

```
now = later; 
```

那么变量“now”和“later”引用同一个对象。因此，对“稍后”的更新是对“现在”的更新。

`Date`原型上的“setter”方法都是直接修改对象。也就是说，`Date`实例不是不可变的。

*编辑*——我猜你真正想要的是把“现在”和“以后”分开。在这种情况下，您可能想要这样的东西：

```
now = later;
later = new Date(later.getTime());
later.setHours(later.getHours() + 8); 
```

之后，“现在”和“以后”将不再相等，因为您将其设置为*新* `Date`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:44:06.903

在以后`now = later;`的变化之后将反映在现在和反义词中。因为两者都是同一个对象

```
 var now = new Date();
    var later = new Date();
    later.setHours( later.getHours() + 8 );

    <Wait for somthing>
    now = later; //  now and later have refeerence of same object 
    later.setHours( later.getHours() + 8 );

    alert(now == later); //returns True 
```

# jquery - jquery - 颜色框不显示标题

> ID：12495975
> 
> 赞同：1
> 
> 时间：2012-09-19T13:40:23.523
> 
> 标签：jquery, ajax, colorbox

我无法在颜色框中显示链接标题。链接由 ajax response/php echo 插入。

PHP：

```
echo "<a onclick=\"parent.\$.colorbox({ href:'inc/get_movie_details.php?m=". $row->XD_ID ."' , width:800 , maxWidth:800 , innerWidth:760 , opacity:0.7 }); return false;\"
                            href='inc/get_movie_details.php?m= $row->XD_ID' title='$row->FileText'>". squezzestring($row->FileText) ."</a></td>"; 
```

HTML 输出：

```
<a title="ti-t.le" href="inc/get_movie_details.php?m=12172" onclick="parent.$.colorbox({ href:'inc/get_movie_details.php?m=12172' , width:800 , maxWidth:800 , innerWidth:760 , opacity:0.7 }); return false;">ti-t.le</a> 
```

它应该在此处显示链接标题，但如您所见，它是空的。其他一切都按预期工作

HTML

```
<div id="cboxBottomCenter" style="float: left; width: 772px;"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:52:13.553

这是您的工作代码：[jsfiddle.net/Ur5Kb/](http://jsfiddle.net/Ur5Kb/)

但最好使用这个[jsfiddle.net/Ur5Kb/1/](http://jsfiddle.net/Ur5Kb/1/)：

```
$('a').colorbox({ href:'inc/get_movie_details.php?m=12172' , width:800 , maxWidth:800 , innerWidth:760 , opacity:0.7 }); 
```

# c# - 一张张显示图片

> ID：12495980
> 
> 赞同：0
> 
> 时间：2012-09-19T13:40:41.270
> 
> 标签：c#, windows-phone-7, xaml, listbox

我有一个关于列表框或类似问题的问题，可以帮助我。我从 json 中读取了很多图片并将它们显示到列表框中，我制作了图像，因为它可以适合页面并水平滚动它们，这样我就可以将它们显示为相册。

问题是当您在列表框中滚动时，滚动只是继续它不会停止，我想要做的是我每个只能显示一张图片，并且每次显示图片时滚动都会停止。

你知道我该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T14:37:49.117

你看过 Telerik 的[RadSlideView](http://www.telerik.com/help/windows-phone/radslideview-overview.html)吗？

> RadSlideView 是一个独特的控件，它允许您逐个滑动地浏览一系列项目。它仅在数据绑定模式下工作，并通过幻灯片之间的平滑过渡提供卓越的性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T14:43:15.343

它可能不漂亮，但这是一个解决方案 -

```
Add a slider and use it instead of scroll-bar
Have just one image control
Set Slider's Minimum = 0 and Maximum = number of images
Set Slider's TickFrequency="1", IsMoveToPointEnabled="True" and IsSnapToTickEnabled="True"
Change your image when slider's value changes 
```

此外，您可以将滚动事件处理为 ++ 或 -- 滑块的值

# mysql - 将此代码转换为活动记录/sql 查询

> ID：12495994
> 
> 赞同：0
> 
> 时间：2012-09-19T13:41:18.290
> 
> 标签：mysql, ruby-on-rails, activerecord

我有以下代码，并想将请求转换为 mysql 查询。现在，我在数据上使用手动 .select （数组方法）实现了预期的结果。这应该可以通过单个查询来实现（如果我错了，请纠正我）。

**当前代码：**

```
 def self.active_companies(zip_code = nil)
    if !zip_code
      query = Company.locatable.not_deleted
    else
      query = Company.locatable.not_deleted.where("zip_code = ?", zip_code)
    end
    query.select do |company|
      company.company_active?
    end
  end
  # Check if the company can be considered as active
  def company_active?(min_orders = 5, last_order_days_ago = 15)
    if orders.count >= min_orders &&
      orders.last.created_at >= last_order_days_ago.days.ago &&
      active
        return true
    else
      return false
    end
  end 
```

**解释：** 我想知道哪些公司是活跃的。我们有公司模式和订单模式。

**数据：** 公司：

*   积极的
*   订单（关联订单）

订单：

*   created_at

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T13:51:48.040

不知道能不能让company_active？谓词单个 SQL 查询，但我可以提供替代方案：

如果你这样做：

```
 query = Company.locatable.not_deleted.includes(:orders) 
```

所有相关订单将被加载到内存中以供将来处理。

这将消除除 2 之外的所有查询：

一个获取公司，一个获取所有相关订单。

# java - JUnit测试时@Component类的排除过滤器？

> ID：12495999
> 
> 赞同：3
> 
> 时间：2012-09-19T13:41:35.113
> 
> 标签：java, spring, junit, filter, annotations

是否可以排除带`@Component`注释的类？

我想从 JUnit 测试中排除一个特殊的类。

我的项目有一个带有`xEventHandler`注释的类`@Component`，我不希望 spring 在 junit 测试时使用这个类。

我的 ApplicationTestContext.xml 看起来像这样：

```
<context:component-scan base-package="com.company">
...
<context:exclude-filter expression="com\.company\.xyz\.xEventHandler.java " type="regex"/>
...
</context:component-scan> 
```

但是，由于注释而进入了类`@Component`（例如，当我`@Component`从该类中删除时）。

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T15:03:39.863

恕我直言，最好使用配置文件（在 3.1 中引入）来实现这一点：

*   `test`在配置文件中定义这个 bean
*   通过添加注释激活`test`JUnit 测试中的配置文件`@ActiveProfiles("test")`

有关配置文件的更多信息：

*   [http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/](http://blog.springsource.com/2011/02/11/spring-framework-3-1-m1-released/)
*   [http://www.captaindebug.com/2012/08/using-spring-profiles-in-xml-config.html](http://www.captaindebug.com/2012/08/using-spring-profiles-in-xml-config.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T15:00:44.913

我认为应该只是：

```
<context:exclude-filter expression="com\.company\.xyz\.xEventHandler" type="regex"/> 
```