# StackOverflow 问答 12235000-12235999

# c++ - 如何找到大数模100000007的乘法

> ID：12235008
> 
> 赞同：0
> 
> 时间：2012-09-02T09:59:35.760
> 
> 标签：c++, c, math

我们知道 1000000007 是一个很大的素数。我怎样才能找到两个大数模1000000007的乘法

例如，如果我想找到 78627765*67527574 mod 1000000007，我该怎么做。

至少如果有人告诉我我会尝试的程序

注意：请让我知道原始数据类型的解决方案，如 int、long 或 long long 在此先感谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T10:07:28.553

模链与合理的数字一起工作，这些数字正在推动您的数字比较空间的限制：

```
(A * B) % C == ((A % C) * (B % C)) % C. 
```

这一点的证明非常简单，全世界的密码学网站上都有成千上万的例子。一个简单的示例：

(7 * 8) % 5 = 56 % 5 = 1

和

```
((7 % 5) * (8 % 5)) % 5 = (2 * 3) % 5 = 6 % 5 = 1 
```

我希望这有帮助。显然，当 A 和 B 已经被推到你的高端平台限制并且仍然小于 C 时，它变得毫无意义，但是当不是这种情况时它会非常方便（即当 A > C 和/或 B > C ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:05:47.590

由于这看起来像是一个家庭作业或上下文问题，我只会给出提示。

如果你知道 x%m 和 y%m，你怎么能找到 (x+y)%m？如果你知道 x%m，你怎么能找到 (2x)%m？

既然要找(a*b)%m，有没有办法可以分解b，这样就可以使用上面的两个提示了？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T13:58:28.123

你为什么不想使用 64 位算法呢？当然，这仅在被相乘的操作数每个不超过 32 位时才有效（但这也可以固定）。考虑：

```
typedef unsigned long long uint64;
uint64 m = 1000000007UL;
uint64 r = (uint64)a * (uint64)b;
r = r % m; // get the residue 
```

还可以对其进行优化以避免 '%' 这可能很昂贵：

```
double inv = 1.0 / 1000000007UL; // precompute inverse
uint64 r = (uint64)a * (uint64)b;
uint64 rf = (uint64)floor((double)a * (double)b * inv); // floor(a * b / m) 
r = r - rf * m; //  residue 
```

请注意，第二种方法可能需要一些准确的操作。您也可以改用“long double”

# c - 将整数表示为链表

> ID：12235013
> 
> 赞同：0
> 
> 时间：2012-09-02T09:59:59.817
> 
> 标签：c, integer, linked-list

用 C 语言编写一个将整数表示为单链表的函数，负整数的减号不显示。我究竟做错了什么？你能建议算法的任何改进，以及解决它的最快方法吗？这里是菜鸟。

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
    char info;
    struct Node *link;
} Node;

Node* add_front (Node* head, char info)
{
    Node* t = malloc(sizeof(struct Node));
    t->info = info;
    t->link = head;
    return t;
}

void display (Node* head)
{
    while(head != NULL) {
        printf("%d   ", head->info);
        head = head->link;
    }
}

Node* number_list (int n)
{
    int digit, minus = (n < 0 ? 1 : 0);
    Node* list = NULL;

    if (minus) n *= -1;

    do {
        digit = n % 10;
        list = add_front(list, (char)digit);
        n = n / 10;
    } while(n > 0);

    if (minus) add_front(list, '-');

    return list;
}

int main()
{
        int n = -1024;
        Node* l = number_list(n);
        display(l);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:07:48.320

```
if(minus) {
   add_front(list, '-');
} 
```

由于 add_front 返回列表的新头部，您必须这样做

```
if(minus) {
  list =  add_front(list, '-');
} 
```

下一个问题在于您的显示功能，

```
 printf("%d   ", head->info); 
```

将 char 打印为数字，将 char 打印`'-'`为数字不会打印减号，但值 a`-`具有，43 in ascii。

要么改变显示功能做

```
while(head != NULL) {
   if(head->info == '-') {
       putchar('-'); 
   }else {
     printf("%d   ", head->info);
   }
    head = head->link;
} 
```

或者将实际的字符数字存储在您的列表中，并使用`printf("%c", head->info);`. 也就是说，不是将数字存储在列表中，而是存储 可以使用`7`的字符数字`'7'`

```
list = add_front(list, (char)('0'+digit)); 
```

# low-level - 为什么大多数机器不能处理单个位？

> ID：12235015
> 
> 赞同：0
> 
> 时间：2012-09-02T10:00:01.463
> 
> 标签：low-level, bitarray, dma

我正在阅读有关位数组的信息，我想到了这个问题。为什么大多数机器不能处理单个位？是因为 DMA 还是因为为每个位保留地址太昂贵（内存/电路）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:13:15.630

位是内存中最小的存储单位。
字节是内存中最小的*可寻址*存储单元。
使该位可寻址是没有意义的，因为它只能包含一个`1`or `0`ie `true`or`false`信息，这与可以携带有意义信息的字节不同（您可以基于一个字节对字符集进行编码，例如 ASCII）。
这只是一个直观的解释。我认为还有其他技术上的低级原因，例如仅访问 1 位内存没有意义（成本太高），即制作 1 位内存总线而不是 8-16 位或更多位等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:04:30.460

这是因为如果您仅将地址保存为字节，则地址长度会小于 3 位。

# ruby-on-rails - 如何使用 Ruby on Rails 从 Ajax 加载行为网页中检索 HTML 文本？

> ID：12235018
> 
> 赞同：0
> 
> 时间：2012-09-02T10:00:51.757
> 
> 标签：ruby-on-rails, ruby, ajax, jquery

参考这个[答案](https://stackoverflow.com/a/4848850/696088)，我试图从任何 HTML 中获取带有 ruby​​ 语言的 HTML。

对于任何简单的网站都可以使用这些方法。但是当我尝试将这些用于[Coursera Site](https://www.coursera.org/)时，结果还没有所有的数据。似乎他们在[这里](https://www.coursera.org/maestro/api/topic/list?full=1)请求数据源并使用一些 javascript 来操作所有内容。

所以，**我的问题。我是否需要在 Rails（服务器端）上调用一些 jQuery 命令来在数据全部加载完成时提取数据？**

注意：我对 Ruby on Rails 很陌生，任何来自 gitHub 的示例源代码或演示应用程序或其他任何东西都非常有帮助。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:32:11.460

听起来您将需要一个可以在尝试提取 HTML 之前呈现 JS 的工具。可能有很多选择，唯一想到的工具是[PhantomJS](http://phantomjs.org/)，一个支持站点报废的无头 WebKit。查看有关[DOM 操作](http://code.google.com/p/phantomjs/wiki/QuickStart#DOM_Manipulation)的部分，了解有关您可以使用它做什么的一些想法。

来自网站的示例：

以下 useragent.js 示例演示了读取 id 为 myagent 的元素的 innerText 属性：

```
var page = require('webpage').create();
console.log('The default user agent is ' + page.settings.userAgent);
page.settings.userAgent = 'SpecialAgent';
page.open('http://www.httpuseragent.org', function (status) {
    if (status !== 'success') {
        console.log('Unable to access network');
    } else {
        var ua = page.evaluate(function () {
            return document.getElementById('myagent').innerText;
        });
        console.log(ua);
    }
    phantom.exit();
}); 
```

# windows - 如何在登录时立即执行任务

> ID：12235025
> 
> 赞同：0
> 
> 时间：2012-09-02T10:01:48.910
> 
> 标签：windows, winapi, dll

我想知道如何在资源管理器进程启动后直接执行任务。我的目标是在登录 Windows 8 后直接处理一些任务，因为注册表中的“运行”条目不会立即执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:17:34.957

您可以编写一个 shell 扩展，它会立即加载到 Explorer 中。

小小提醒：在所有这样的情况下，都会有一场“但我希望*我的*申请成为第一！”的竞赛。除了每个人都想要同样的东西，所以在谈论像 Windows 这样的平台时，实际上没有通用的解决方案。但是，如果您更具体地说明为什么在其他应用程序之前运行如此重要，那么提供帮助会更容易。例如Skype在启动时运行，启动稍有延迟是没有问题的。当系统尝试同时做 100 件事情时，这是预期的。[这里](http://blogs.msdn.com/b/oldnewthing/archive/2011/03/10/10138969.aspx)解释了类似的场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T02:51:18.773

使用[userinit 注册表键](http://technet.microsoft.com/en-us/library/cc939862.aspx)，它是第一个运行的进程。稍后我会谈到 DLL 部分。

在 Winlogon 为用户获取令牌后（当该用户通过身份验证时），它会按照列出的顺序启动 userinit 键中列出的所有进程。

但请注意：您的进程必须在几秒钟后退出，否则 Windows 会认为您的桌面创建有问题，并将您的桌面替换为默认桌面。要进行测试，请将 userinit 注册表项更改为

```
notepad.exe,userinit.exe 
```

您可以通过让您的流程在首次启动时自行重新启动来绕过此限制。例如，何时`myprocess.exe`运行：

```
If there is no command line
    get the process name and path (with GetModuleFileName, fyi)
    start the process again with /go as a parameter
    exit 
```

现在，您最初的问题提到了加载 DLL，而我所谈论的只是进程。在您的 dll 上调用 rundll32 将加载它并在其上调用一个函数。从您对评论的回答来看，使用流程似乎也可以。

# c# - Metro/Windows 8 + C#/XAML：如何找到存储在文档库中的图片的有效 URI？

> ID：12235026
> 
> 赞同：1
> 
> 时间：2012-09-02T10:02:05.380
> 
> 标签：c#, xaml, file-io, windows-8, microsoft-metro

对于 Windows 8，我创建了一个应用程序，它可以从 Web 下载图片并将它们存储在用户文档库中以编程方式创建的子文件夹中。

我已将所需的功能和声明添加到应用程序清单中：

*   文档库作为一项功能启用
*   添加了 jpg 的文件类型关联，并在声明中标记了“打开是安全的”

启动应用程序时，所有文件夹和文件都已正确创建 - 用户可以从文件系统手动打开它们。

我的挑战如下：当我以编程方式加载所有可用图像并将此图像列表绑定到 XAML 元素时，我需要一个可用于正确设置图像源的 URI“xxx:///yyy/zzz.jpg”。我尝试了各种模式风格，包括。“file:///yyy/zzz.jpg”但没有成功。

有没有办法做到这一点，或者根本没有办法？

当图片存储在应用程序数据中时，XAML 对诸如“ms-appdata:///local/zzz.jpg”之类的 URI 感到满意。但我绝对更愿意将图片存储在用户的库中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:10:48.183

如果要绑定到 Image Source 属性，则无法绑定文件路径。您必须绑定到 BitmapImage 数据类型。如果您直接在代码中设置 Source 属性，它将如下所示：

```
 BitmapImage bitmapImage = new BitmapImage();
            await bitmapImage.SetSourceAsync(fileStream);
            MyImage.Source = bitmapImage; 
```

如果要绑定到对象列表，则对象需要具有返回 BitmapImage 数据类型的属性（简化 - 您也需要支持`INotifyPropertyChanged`）：

```
public class MyDataBoundItem
{
   public BitmapImage MyBindableImage {get;set;}
} 
```

您可以使用如下代码枚举图片文件夹中的文件...

```
var picFolder = Windows.Storage.KnownFolders.PicturesLibrary;
var options = new QueryOptions(CommonFileQuery.DefaultQuery,new List<string> { ".png", ".jpg" }) ;
options.FolderDepth = FolderDepth.Deep;

var query = picFolder.CreateFileQueryWithOptions(options);
var files = await query.GetFilesAsync(); 
```

诀窍是，这取决于您要如何加载数据，是从文件中获取相应的文件到每个数据绑定对象中，以便它可以提供 BitmapImage 属性。这是因为 SetSourceAsync 调用是异步的，所以您需要支持 INotifyPropertyChanged 以便绑定对象可以在图像可用时通知 UI。不难，只是不直观。

# java - GWT Server 端代码独立运行

> ID：12235028
> 
> 赞同：0
> 
> 时间：2012-09-02T10:02:17.823
> 
> 标签：java, gwt, server-side, gwt-rpc

嗨，我正在写一个 GWT 应用程序。应用程序包括获取、存储和显示一些信息。在客户端，我展示了使用 RPC 调用从数据库中获取的信息。接下来，我必须每 10 秒从远程服务器获取 XML 文件，解析它并将数据存储在数据库中。我必须在服务器端执行此操作而不与客户端交互，这样即使没有人浏览应用程序也可以运行。有人对此有解决方案吗？

我试图通过调用该方法来解决这个问题，即每 10 秒从客户端使用计时器获取、解析和存储数据，但这不起作用，因为这只有在有人正在浏览器中查看应用程序时才会起作用，但是如果一个月没有人浏览它，来自远程服务器的数据将不会被提取和存储一个月，这是一个问题......

我真的需要解决方案...提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:15:25.063

如果您使用完整的 Java EE 应用程序服务器，则可以使用 Java EE 中的 Timer 工具（请参阅[Oracle 教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnboy.html)）。
否则，您可以查看您的服务器是否有一些专有解决方案。第三种解决方案是编写一个单独的批处理应用程序并通过 cron 作业触发它或将其作为守护程序运行。

# linux-kernel - 具有最低优先级的内核线程

> ID：12235029
> 
> 赞同：2
> 
> 时间：2012-09-02T10:02:28.887
> 
> 标签：linux-kernel, embedded-linux, power-management

我正在为嵌入式 linux 设备实现电源管理支持。要求是当系统中没有任何东西可以运行并且下一个计时器事件足够远时，执行系统挂起到内存。我打算基于现有的内核 enter_state() 函数
最初我计划从 cpu_idle() 函数（空闲内核线程）调用我的代码，因为它在系统中没有任何东西可以运行时运行。但是我遇到了一个问题，enter_state() 最终调用了 schedule() 函数，然后我收到一条错误消息：“坏：从空闲线程调度！”
所以我得出结论，我必须创建自己的内核线程，但具有最低和静态的优先级。我的问题是如何做到这一点？
还有一个问题：您在这种实施中看到任何潜在的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:17:26.713

您可以创建一个将调度策略设置为 SCHED_BATCH 或 SCHED_IDLE 的内核守护线程。只有当运行队列中没有更多进程可以调度时，它们才会运行。您可以扩展它以在每个 cpu 上创建一个这样的守护线程。挂起设备逻辑可以在线程内部启动。

# android - 具有分组垂直对齐的相对布局

> ID：12235034
> 
> 赞同：0
> 
> 时间：2012-09-02T10:03:50.347
> 
> 标签：android, view, alignment, android-relativelayout, vertical-alignment

我有相对布局。我如何进行分组垂直对齐：

![http://s019.radikal.ru/i610/1209/a2/8dead85f60a3.jpg](../Images/78276609232d0b251660eb592977cff8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T20:50:13.607

谢谢，但我认为你的方式不适合我。我没有在图片中显示，但一些编辑文本可以有不止一个行高。现在我做什么。我迭代所有文本视图，找到最大宽度并为它们设置这个宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:47:13.073

我认为以下代码会有所帮助..

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="fill_parent"
android:layout_height="70dp"
android:orientation="horizontal">

<TextView
    android:id = "@+id/Textview1"
    android:layout_width="wrap_content"
    android:layout_weight="1"
    android:layout_height="wrap_content"
    android:text="@string/hello_world"
    tools:context=".TestActivity" />

<EditText android:id="@+id/Editmessage1"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message" />

     </LinearLayout>

     <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="70dp"
android:layout_alignLeft="@+id/LinearLayout1"
android:layout_below="@+id/LinearLayout1"
android:orientation="horizontal">

<TextView
    android:id = "@+id/Textview2"
    android:layout_width="wrap_content"
    android:layout_weight="1"
    android:layout_height="wrap_content"
    android:text="@string/hello_world"
    tools:context=".TestActivity" />

<EditText android:id="@+id/Editmessage2"
    android:layout_weight="1"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message1" />

</LinearLayout>

      </RelativeLayout> 
```

同样，添加另一个线性布局应该没问题。或者您可以将线性布局的方向垂直对齐，并将它们左右对齐。如果您使用的是 Eclipse Emulator，我认为每次更改 XML 代码时参考图形设计会更容易。

有关对齐的更多信息，请参阅以下链接。

[http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

[http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html)

您可以根据需要改变权重。使 textview 短而编辑文本长，反之亦然。

# objective-c - UIScrollView：每个维度/轴的缩放比例

> ID：12235038
> 
> 赞同：1
> 
> 时间：2012-09-02T10:04:43.073
> 
> 标签：objective-c, ios, uiscrollview

用于`UIScrollView`缩放时，可见内容的纵横比似乎是恒定的。我想独立管理水平和垂直缩放。例如，如果手指水平触摸屏幕，则仅更改水平滚动。我注意到这种类型`UIScrollView.zoomScale`是`float`（对于所有维度）。是否有可能解决这个问题？

**详细信息：** 我正在开发一个基于 OpenGL ES 的应用程序，我想使用 UIKit 的滚动来获得漂亮的外观并节省实施时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:42:18.777

我想在您的情况下，您最好不要使用 a ，而是在要转换的视图上自己`UIScrollView`设置 a 。`UIPinchGestureRecognizer`

GestureRecognizer 将跟踪手指并决定是否（以及多少）在哪个维度上缩放。基于此，您可以设置视图的`transform`属性。例如，将宽度加倍但高度保持不变的变换矩阵将是`CGAffineTransformMakeScale(2.0, 1.0)`.

为了利用 UIScrollView 的滚动，您可以将视图嵌入到 UIScrollView 中，并从 GestureRecognizer 的回调方法中相应地设置`contentSize`和属性。`contentOffset`

# ruby-on-rails-3 - 如何从 ruby 删除亚马逊 S3 中的文件

> ID：12235040
> 
> 赞同：6
> 
> 时间：2012-09-02T10:05:03.340
> 
> 标签：ruby-on-rails-3, amazon-s3

我用 amw S3 制作了一个 ruby​​ on rails 应用程序。

我可以上传照片，但我尝试删除照片，即使照片参考在数据库中被删除，照片仍在 S3 中。

我如何实际从 S3 中删除文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T00:03:16.467

您的问题未正确指定。如果您能提供更多信息，那就太好了。但这里有一些如何在 Amazon S3 上处理文件的选项。

根据[此文档](http://amazon.rubyforge.org/)，您可以使用[Ruby 库中用于 Amazon 的简单存储服务 (S3) REST API 的](https://github.com/marcel/aws-s3)[方法**delete**](https://github.com/marcel/aws-s3/blob/master/lib/aws/s3/object.rb#L220)（请参阅实现） 。

所以应该是这样的：

```
AWS::S3::S3Object.delete('goodbye.txt', 'my-new-bucket') 
```

[这个问题](https://stackoverflow.com/questions/6717321/rails-aws-s3-delete-file-throws-awss3permanentredirect-error-eu-bucket-pro)也很有帮助。

无论如何，我强烈建议您在将文件上传到 Amazon S3 时使用[Paperclip](https://github.com/thoughtbot/paperclip)或[Carrierwave 。](https://github.com/carrierwaveuploader/carrierwave)一些有用的文章：

1.  [为 Amazon S3 存储和 Heroku 配置 Carrierwave](https://gist.github.com/cblunt/1303386)
2.  [RailsCast #383 上传到 Amazon S3](http://railscasts.com/episodes/383-uploading-to-amazon-s3)

# java - Java - Windows 7 读取文件并将它们写入列表

> ID：12235041
> 
> 赞同：0
> 
> 时间：2012-09-02T10:05:07.523
> 
> 标签：java, windows, file, list

基本上，我想做的是从我的 Windows 机器的特定路径读取所有文件，例如“C:\”。将所有文件读取到文件数组后，我在 for 循环中检查文件是否为目录。我也在过滤掉隐藏文件。之后，我对 2 个数组列表中的每一个进行排序，如果当前目录不是根目录，则添加“../”并将所有内容写入最终数组列表。

但问题是——我认为，这个 java 程序向我显示的目录比目录多。因为 "C:\> dir" 的 windows cmd shell 的输出与我的 java 程序的输出不同。

任何想法如何解决这个问题？

**“C:\> 目录”的输出：**

```
{ "PerfLogs", "Program Files", "Program Files(x86)", "Users", "Windows" } 
```

**这个java程序的输出：**

```
{ "Documents and Settings", "Dokumente und Einstellungen", "PerfLogs", "Program Files(x86)", "Program Files", "Users", "Windows", "pagefile.sys" } 
```

* * *

```
private void getFileBrowser(String dirPATH) {
    ITEM_TEMP = new ArrayList<String>();
    PATH_TEMP = new ArrayList<String>();
    ITEM_TEMP.clear();
    PATH_TEMP.clear();

    currentWorkingDirectory = dirPATH;

    File f = new File(dirPATH);
    File[] files = f.listFiles();

    for(int i=0; i < files.length; i++) {
        File file = files[i];

        if(file.isDirectory()) {
            if(!file.isHidden() & !file.getName().startsWith("$")) {
                PATH_TEMP.add(file.getPath());
                ITEM_TEMP.add(file.getName() + "/");
            }
        }
        else {
            if(!file.isHidden()) {
                PATH_TEMP.add(file.getPath());
                ITEM_TEMP.add(file.getName());
            }
        }
    }

    Collections.sort(ITEM_TEMP);
    Collections.sort(PATH_TEMP);

    ITEM.clear();
    PATH.clear();

    if(!dirPATH.equals(rootDirectory)) {
        ITEM.add("../");
        PATH.add(f.getParent());
    }

    for(int i=0; i < ITEM_TEMP.size(); i++) {
        ITEM.add(ITEM_TEMP.get(i));
    }
    for(int i=0; i < PATH_TEMP.size(); i++) {
        PATH.add(PATH_TEMP.get(i));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:14:21.047

看起来您的 Java 代码正在打印出每个文件（默认情况下 pagefile.sys 应该在您的系统上隐藏）。您说要过滤掉隐藏文件。

问题可能出在这一行：

```
 if(!file.isHidden() & !file.getName().startsWith("$")) 
```

& 是按位 AND 运算符，您应该使用 && -逻辑 AND 运算符。

# animation - Ext js 4 动画风格

> ID：12235049
> 
> 赞同：1
> 
> 时间：2012-09-02T10:06:12.797
> 
> 标签：animation, css, extjs, extjs4.1

假设我想将 Ext js 4 面板围绕 Y 轴旋转 180 度。（例如 - 单击[此页面上](http://www.w3schools.com/css3/css3_3dtransforms.asp)标有“3D 旋转”的方块）

我试图使用 Ext.js element.animate 方法并为“to”属性提供了新的 css 属性，但没有成功：

```
button1.animate({
       duration: 2000,
        to:{
            style :{
                '-webkit-transform' : 'rotateY(180deg)'
            }
        }
    }); 
```

我很确定有一个很好的方法。有谁知道我可以看到在 Ext js 4 上使用动画更改样式的示例的资源？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:49:37.023

`AbstractComponent's`animate 方法[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent)（和代码）显示它专门处理 x、y、顶部、左侧、宽度和高度。

# 使用 Ext.util.CSS.updateRule

您可以为您的按钮定义此 CSS 规则：

```
#btn {
    -webkit-transform: rotate(0deg);
}​ 
```

然后执行如下操作：

```
var i = 0;                        
setInterval(function(){
    i++;
    i = i % 360;
    Ext.util.CSS.updateRule('#btn', "-webkit-transform", "rotate(" + i + "deg)" );
 }, 10); 
```

[您可以在此 JsFiddle](http://jsfiddle.net/Izhaki/kxqAq/)中看到类似的工作。

# 应用 css 动画类

通过调用：

```
button1.addCls( 'fadeIn' ); 
```

使用相应的 css（由[compass](http://compass-style.org/)生成）：

```
@-webkit-keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@-moz-keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@-o-keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes fadeIn {
  from { opacity: 0; }  
  to { opacity: 1; }
}

.fadeIn {
  opacity: 0;
  -webkit-animation: fadeIn 0.5s ease-in 1;
  -moz-animation: fadeIn 0.5s ease-in 1;
  -o-animation: fadeIn 0.5s ease-in 1;
  animation: fadeIn 0.5s ease-in 1;
  -webkit-animation-fill-mode: forwards;
  -moz-animation-fill-mode: forwards;
  -o-animation-fill-mode: forwards;
  animation-fill-mode: forwards;
} 
```

# arrays - Perl qx 数组初始化中的执行顺序

> ID：12235050
> 
> 赞同：4
> 
> 时间：2012-09-02T10:06:19.903
> 
> 标签：arrays, perl, system, backticks

假设我有以下内容：

```
my @net = (`echo "HELLO" > file`,
           `less file`); 
```

是否保证执行顺序从 0..N 开始（数组中的第一个元素首先执行，然后是第二个，等等）？

我已经对此进行了测试，这就是真正发生的情况，但是我可以指望它吗？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T10:21:50.870

是的。`()`右侧括号中的每个逗号分隔项都是[*terms*](http://perldoc.perl.org/perlop.html#Terms-and-List-Operators-%28Leftward%29)。这些在 Perl 中具有最高优先级，并且从左到右计算。反[引号是类似引号的运算符](http://perldoc.perl.org/perlop.html#Quote-and-Quote-like-Operators)。

# c++ - 为什么要在 c++ 程序中创建 abc.h 和 abc.cpp 文件？

> ID：12235051
> 
> 赞同：0
> 
> 时间：2012-09-02T10:06:29.300
> 
> 标签：c++, header-files

> **可能重复：**
> [在 C++ 中为什么有头文件和 cpp 文件？](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)

我正在阅读一些关于创建基本等离子小部件和其他 QT 东西的 KDE 教程。我注意到的一件事是几乎所有程序都有一个`.h`和`.cpp`包含在 cpp 文件中的头文件。

我得到的基本信息是最小化文件中的混乱并使代码更具可读性。

我的问题是我应该在 .h 文件和 .cpp 文件中放入哪些内容来编写程序，以及它将如何使我在改进代码方面受益。

例如 - 我创建了 3 个文件，add.h、add.cpp 和 pass.cpp - 现在 add.h 具有该功能，而其他 2 个具有定义。

添加.h

```
#include <iostream>

using namespace std;

int add (int x,int y); 
```

添加.cpp

```
#include "add.h"

int main() {

    add (int x, int y) {

    int z = x+y;

    cout<<"Add is "<<"\t"<<z;

    }
return 0;
} 
```

通过.cpp

```
#include "add.h"

add (3,4); 
```

但是，这不起作用，从这里的答案来看 [Why have header files and .cpp files in C++?](https://stackoverflow.com/questions/333889/in-c-why-have-header-files-and-cpp-files)

add.h 的内容会自动复制，但我得到了几个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:09:43.857

主要原因是您可以包含来自多个 .cpp 文件的 .h 以促进跨模块/类的代码共享。

对于一个非常简单的应用程序（例如“hello world”，这是真的。拆分为 .cpp 和 .h 并没有太多好处）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T10:09:22.867

您经常需要`.cpp`从其他翻译单元访问您在文件中定义的内容 - 其他翻译单元需要知道他们可以访问什么，因此需要在其他翻译单元中*声明这些内容。*将声明放在头文件中意味着您可以将它们包含在另一个翻译单元中，而不是在需要访问声明元素的每个翻译单元中复制它们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T10:11:16.943

将所有函数完全写在你的`".cpp"`文件中，然后首先将它写在你的程序中。在你的`".h"`文件中，只写proptype，即你的函数的声明。`".h"`在程序结束时制作此文件。并且不要忘记在每个函数原型的末尾写一个分号（;）。

这是一种很好的编程实践，它使您可以在这些单独的文件中编写一次代码，并在整个项目或任何其他数量的文件中使用它们的代码。

假设你有一个文件`"myProgram.cpp"`，`myProgram.h`你可以在任何程序的开头包含这一行来使用它的代码。 `#include "myProgram.cpp"`.

当您的文件中有许多函数和声明时，它会很好地工作。如果您有一小段代码，则无需创建这些单独的文件。

# javascript - show hide 仅在 ajax 调用中第一次起作用

> ID：12235052
> 
> 赞同：0
> 
> 时间：2012-09-02T10:06:35.323
> 
> 标签：javascript, jquery, ajax

我有一个 div 在点击时显示/隐藏，这个 div 将通过 ajax 加载从 me.html 加载内容。我正在添加一个添加到此标签的类类，然后当我再次单击添加了类的标签时，它应该隐藏 div。但这不起作用。

```
$(function() {
    $("#nav a").click(function() { 
        $(this).toggleClass('added');
        if($(".o1").length <= 0) { 
            $("body").append('<div class="o1"></div>');
            $(".o1").load("me.html").css("display","block");
        }
        $(".added").click(function() { 
            $(".o1").css("display","none");
        })
    });
}); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:15:22.533

尝试这个。如果对象不存在，这将设置对象。然后，一旦完成，它将切换它以供将来点击。

```
$(function() {
    $("#nav a").click(function() { 
        $(this).toggleClass('added');
        if($(".o1").length <= 0)
        { 
            $("body").append('<div class="o1"></div>');
            $(".o1").load("me.html");
        } else if($(this).hasClass("added"))
            $(".o1").hide();
        } else {
            $(".o1").show();
        }
    });
}); 
```

将`click`处理程序添加到您的代码的所有`.added`链接会产生问题，因为在您的代码中有。

这显示了正在发生的事情的时间线。希望你能跟上。括号中的数字是事件。相同的数字表示它们同时发生。

（1）`#nav a`被点击**然后** `#nav a`得到一个类`added` **然后** `.o1`被添加**然后**任何与`added`类的链接都得到一个点击事件

（2）`#nav a`被点击**然后** `#nav a`删除类`added` **然后** `.o1`已经存在**然后**任何带有`added`类的链接都会获得一个点击事件（但不是这个链接，但它仍然有之前的点击事件，因为它没有被分离）

(2)`.added`也被视为与上述操作同时单击，因为它是在 (1) 期间附加的

（3）`#nav a`被点击**然后** `#nav a`得到一个类`added` **然后** `.o1`已经存在**然后**任何与`added`类的链接都得到一个点击事件

(3)`.added`也被视为与上述操作同时单击，因为它是在 (1) 期间附加的

(4)`#nav a`被点击**然后** `#nav a`得到一个类`added` **然后** `.o1`已经存在**然后**任何与`added`类的链接都得到一个点击事件

(4)`.added`也被认为与上述动作同时被点击，因为它是在 (1) 期间附加的 (4)`.added`也被认为与上述动作同时被点击，因为它是在 (3) 期间附加的

ETC ...

要掌握的关键是你不是分离`click`事件，而是越来越多地附加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:20:16.680

尝试这个...

```
<div class="o1"></div>

$(".o1").hide();

$(function() {

    $("#nav a").click(function() { 

            $(this).toggleClass('added');

            if($(this).hasClass('added') == false){ 

                    $(".o1").load("me.html", function(){$(".o1").show()});

                }

            if($(this).hasClass('added') == true){ 

                    $(".o1").hide();

                })
      });
}); 
```

# xslt - xsl中的分页

> ID：12235060
> 
> 赞同：2
> 
> 时间：2012-09-02T10:07:58.393
> 
> 标签：xslt, pagination, xslt-1.0

我有一个 xml 文件和一个 xsl 文件，我为它编写了一个用于生成 html 的文件。我的 xml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<expert_questions>
    <question Id="10">
        <source_ip>192.168.150.1</source_ip>
        <port>545</port>
        <packet_size>1400</packet_size>
        <more_details>
            <time>13:42</time>
            <count>100</count>
            <comment>more details</comment>
        </more_details>
    </question>
    <question Id="...">
       .
       .
       .
    </question>
</expert_questions> 
```

和我的 xsl 文件：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                    version="1.0">
        <xsl:output omit-xml-declaration="yes" indent="yes" />
        <xsl:template match="/">
            <xsl:for-each select="expert_questions">
                <table border="1" cellspacing="0" cellpadding="0">
                    <tr class ="table-title">
                        <th class="th">source ip</th>
                        <th class="th">port</th>
                        <th class="th">packet size</th>
                        <th class="th">more details</th>
                    </tr>
                    <xsl:for-each select="question">
                        <tr>
                            <xsl:attribute name="id">
                                <xsl:value-of select="@Id" />
                            </xsl:attribute>

                            <td><xsl:value-of select="source_ip"></xsl:value-of></td> 
                            <td><xsl:value-of select="port"></xsl:value-of></td>
                            <td><xsl:value-of select="packet_size"></xsl:value-of></td>
                            <td>   
                                <xsl:for-each select="more_details">
                                        <xsl:attribute name="title">

                                            <xsl:value-of select="concat('Time: ', time, '&#10;')" />
                                            <xsl:value-of select="concat('Count: ', count)" />
                                            <xsl:value-of select="concat('Comment: ', comment)" />
                                        </xsl:attribute>
                                        <xsl:text>more details</xsl:text>
                                    </a>
                                </xsl:for-each>
                            </td>
                        </tr>
                    </xsl:for-each>
                </table>
            </xsl:for-each>
        </xsl:template>

    </xsl:stylesheet> 
```

xml 中的信息太长，应该在某些页面中显示。

我需要使用分页。我搜索并[找到了这个页面](http://www.nibble.be/?p=11)（关于*Xslt Paging 示例*）来帮助我做到这一点。

它没有任何 xml 文件，我无法完全理解该怎么做（我是 xsl 的新手）。

我可以在没有 umbraco 的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T16:11:31.720

**一、这里是一个小例子，展示了如何实现“分页”**

鉴于此源 XML 文档：

```
<nums>
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**并给定页面大小`3`，这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="num[position() mod 3 = 1]">
  <page>
    <xsl:apply-templates mode="inGroup"
      select=".|following-sibling::num[not(position()>2)]"/>
  </page>
 </xsl:template>

 <xsl:template match="num"/>

 <xsl:template match="num" mode="inGroup">
  <xsl:call-template name="identity"/>
 </xsl:template>
</xsl:stylesheet> 
```

**生产**：

```
<nums>
   <page>
      <num>01</num>
      <num>02</num>
      <num>03</num>
   </page>
   <page>
      <num>04</num>
      <num>05</num>
      <num>06</num>
   </page>
   <page>
      <num>07</num>
      <num>08</num>
      <num>09</num>
   </page>
   <page>
      <num>10</num>
   </page>
</nums> 
```

**请注意**：

仅使用纯 XSLT 1.0 通过一次转换生成多个结果文档是不可能的。

您可以使用 XSLT 2.0 及其`xsl:result-document`指令，也可以使用实现 EXSLT`<exsl:document>`扩展元素的 XSLT 1.0 处理器。另一种选择是为每个输出页面启动一个单独的 XSLT 1.0 转换。

* * *

**二、使用 XSLT 2.0 进行分页**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pPageSize" select="3"/>

 <xsl:template match="/*">
  <xsl:for-each-group select="num" group-adjacent="position() idiv $pPageSize">
     <xsl:result-document href="file:///c:/temp/delete/page{current-grouping-key()+1}">
      <html>
        <xsl:apply-templates mode="inGroup" select="current-group()"/>
      </html>
     </xsl:result-document>
    </xsl:for-each-group>
 </xsl:template>

 <xsl:template match="num" mode="inGroup">
  <p><xsl:value-of select="."/></p>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于同一个 XML 文档时（上图）。它成功创建了四个结果文档**。

Saxon 8.7.01 发布了这个问题：

```
Saxon 9.1.0.7J from Saxonica

Java version 1.6.0_17

Stylesheet compilation time: 223 milliseconds

Processing file:/C:\CVS-DDN\fxsl-xslt2\data\numList.xml

Building tree for file:/C:\CVS-DDN\fxsl-xslt2\data\numList.xml using class net.sf.saxon.tinytree.TinyBuilder

Tree built in 2 milliseconds

Tree size: 23 nodes, 20 characters, 0 attributes

Loading net.sf.saxon.event.MessageEmitter

Writing to file:/c:/temp/delete/page1

Writing to file:/c:/temp/delete/page2

Writing to file:/c:/temp/delete/page3

Writing to file:/c:/temp/delete/page4

Execution time: 73 milliseconds

Memory used: 21482856

NamePool contents: 21 entries in 20 chains. 6 prefixes, 7 URIs 
```

# ruby-on-rails - Rails：空嵌套资源包含带有零初始化字段的隐式条目

> ID：12235061
> 
> 赞同：0
> 
> 时间：2012-09-02T10:08:12.680
> 
> 标签：ruby-on-rails

试图将嵌套资源（名为“文件夹”）索引嵌入到父（名为“用户”）“显示”查看器，我发现了一个问题。在进行数据库创建/迁移之后（当尚未对“文件夹”表进行任何显式操作时），我创建了用户条目。创建后，该用户的“显示”方法向我显示了一个包含 NilClass 字段的文件夹。一个条目，无论显示哪个用户，它总是默认包含这个 Nil-ed 条目。我可以添加其他条目，但始终会显示此条目。

还有一件有趣的事情：在rails 控制台中@user.folders 返回空数组，并且它的#each 方法运行良好（即在控制台中所有的东西都正常运行，这个问题不会出现在那里）。

这是嵌套资源的“创建”方法：

```
class FoldersController < ApplicationController
  def create
    @user = User.find params[:user_id]
    @user.folders.create params[:folder]
    redirect_to user_path @user
  end 
```

users/show.html.haml - 父查看器（用户信息输出被切断以使代码更易于阅读）：

```
Add a folder:
=form_for [ @user, @user.folders.build] do |f|
  .field
    =f.label :name
    =f.text_field :name
  .actions
    =f.submit

%br
User's folders:
%table
  %tr
    %th Name
    %th
    %th
  -@user.folders.each do |folder| # Will make at least one iteration even if 
                                  # no entries have been created yet. Works  
                                  # properly in rails console
      %tr
        %td= folder.name.class ## here will be NilClass in that default entry
        %td= link_to 'Show', user_folders_path(@user, folder)
        %td= link_to 'Delete', [@user, folder], :confirm => 'Are you sure?', :method => :delete 
```

我是 Rails 和基于 Web 的应用程序的新手，因此，如果某些内容描述不正确，请随时提出问题，并批评编码错误。

更新： UserController::create 方法：

```
def create
  @user = User.new(params[:user])

  respond_to do |format|
    if @user.save
      format.html { redirect_to @user, notice: 'User was successfully created.' }
      format.json { render json: @user, status: :created, location: @user }
    else
      format.html { render action: "new" }
      format.json { render json: @user.errors, status: :unprocessable_entity }
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-21T23:55:21.540

我刚刚遇到了类似的问题。在您使用的 form_for 标记中

```
@user.folders.build 
```

这是使用适当的 user_id 属性向您的文件夹对象添加一个空文件夹记录。

在您的代码中，您正在遍历相同的文件夹对象，这就是您看到空记录的原因。

如果您只是将表单代码放在文件夹代码表下方，您会看到空记录不再存在（因为它尚未创建！）

# scala - Scala子类型不被接受

> ID：12235062
> 
> 赞同：3
> 
> 时间：2012-09-02T10:08:21.903
> 
> 标签：scala

我在斯卡拉有这门课

```
trait PageComponent {
  protected var page:Page = _
  protected var pageData:PageData = _
  def initialise(page0:Page, pageData0:PageData) {
    page = page0
    pageData = pageData0    
  }
} 
```

PageComponent 的每个子类也都有自己的 Page 和 PageData 子类。当子类调用 page 或 pageData 时，我希望它为此返回它自己的类型。

我试过像

```
trait PageComponent {
  type P <: Page
  protected var page:P = _
  protected var pageData:PageData = _
  def initialise(page0:P, pageData0:PageData) {
    page = page0
    pageData = pageData0    
  }
} 
```

这种工作使得子类可以调用 page 并获取通过实现类型 P 定义的页面类型。

但是，我正在尝试调用 initialise 方法，并且正在传递 Page 类型的对象，它显示了此错误

```
error: type mismatch;
found   : pageInfoToGoTo.page.type (with underlying type com.xxx.gui.Page)
required: pageComponentToGoTo.P
pageComponentToGoTo.initialise(pageInfoToGoTo.page, pageData) 
```

我在这里显然错了，但我认为因为 P“是一个”页面这应该对我有用。

有任何想法吗？

------编辑以获取更多信息-----

我确实有类似的东西

```
class AhoyPage extends Page    

object MyPageComponent extends PageComponent {
  type P = AhoyPage
} 
```

阅读 jwinandy 的答案后，我更改了代码，以便以这种方式调用初始化方法

```
pageComponentToGoTo.initialise(pageInfoToGoTo.page.asInstanceOf[pageComponentToGoTo.P], pageData) 
```

现在它可以工作了。所以我想我的问题得到了回答。谢谢。不过这个演员阵容不是很好。我有一个看起来像这样的 PageInfo 列表

```
PageInfo(page:Page, ...) 
```

选择PageInfo时，我使用该页面查找地图中的页面组件。必须有更好的方法，但如果没有，我对此很满意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:33:50.803

子类化时必须定义 P 。

在您的情况下，您必须：

```
type P = com.xxx.gui.Page 
```

例如，这有效：

```
trait Page
trait PageData

trait PageComponent {
  type P <: Page
  protected var page:P = _
  protected var pageData:PageData = _
  def initialise(page0:P, pageData0:PageData) {
    page = page0
    pageData = pageData0    
  }
}

class AhoyPage extends Page    

object MyPageComponent extends PageComponent {

    type P = AhoyPage
}

object MyApp extends App {
    MyPageComponent.initialise(new AhoyPage, new PageData {})
    // OR
    MyPageComponent.initialise(new MyPageComponent.P, new PageData {})

} 
```

如果您想稍微重构一下以实现更好的可组合性，请发布更多代码。

- 编辑 -

喜欢[https://gist.github.com/3608684](https://gist.github.com/3608684)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T21:16:23.017

好吧，问题是这个假设：

> 我以为因为P“是”页面

你没有声明那`P`是一个`Page`. 这就是你声明的：

```
type P <: Page 
```

这意味着`P`是 的子*类型*。目前还不知道子类型是什么，事实上，除非您在某个时候声明等于*某物*`Page`，否则您将永远无法传递任何东西。`initialise``P`

 *问题是，你真的需要`P <: Page`吗？你不能只说`initialise`take a `Page`，它包括所有`Page`的子类型吗？*

# facebook - 哪个是使用 Facebook 和 Google 登录的最佳开源 Java 库？

> ID：12235064
> 
> 赞同：-3
> 
> 时间：2012-09-02T10:08:30.200
> 
> 标签：facebook, jsf, facebook-graph-api

哪个是将登录与 Facebook、Google 等集成的最佳开源 java 库。

注意：如果您了解对指定库的支持，也希望基于此对它们进行评分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:18:30.910

使用 RestFB，这似乎是非官方的 FB Java Api：

[http://restfb.com/](http://restfb.com/)

# math - 用于绘制图形的工具/应用程序

> ID：12235066
> 
> 赞同：1
> 
> 时间：2012-09-02T10:08:56.007
> 
> 标签：math, graphics

我需要用我的应用程序中的数据绘制一些图表，我正在寻找一些可以帮助我解决这个问题的易于使用的工具。每个图形大约有 1000 个点需要绘制，我可以从我的应用程序中将这些数据导出为两个数组（或者一个，任何格式）。

可以帮助我轻松导入这些数组的东西。也许那里有一些东西也接受循环，这可以让我在应用程序中生成带有 for 循环和里面的函数的样本？但这不是必须的。如果有某种方法可以轻松导入数据，我很高兴。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T02:41:41.043

It depends what you want to do and how you want to do it... Somehow you've got to direct the software into doing what you want.

If you want it all done through spreadsheets and clicking on icons, something like Excel or OpenOffice Calc will work. They can read in many different data formats and generate common graphics.

If you want to do it via programming, then most programming languages have some way to read in the data and plot it. Something like Python (the programming language) and Matplotlib (a good plotting library in Python), would work very well, and has lots of examples and is easy to learn. With this setup you could go from simple to automated to whatever you can imagine pretty easily.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T17:17:39.790

试试 Octave [http://en.wikipedia.org/wiki/GNU_Octave](http://en.wikipedia.org/wiki/GNU_Octave) 。它是开源的，虽然一些功能是高端和高级的，但简单的绘图实用程序的编码非常简单。与 MATLAB 不同，它也是免费的（与 MATLAB 非常相似）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:17:04.677

[Matlab](http://www.mathworks.com/products/matlab/)是处理这类事情的好工具，但价格昂贵。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T10:19:31.293

如果您的图表应该在网络上可用，我建议您查看[Highcharts](http://www.highcharts.com/)。这是一个用于制作自定义图表的 javascript 库。关于如何插入数据有不同的选项，例如通过 JSON 或 CSV。

# c++ - MSDN 站点上调用 AdjustTokenPrivileges() 的示例代码因“无法启用 SE_LOCK_MEMORY_NAME 权限”而失败

> ID：12235068
> 
> 赞同：1
> 
> 时间：2012-09-02T10:09:07.957
> 
> 标签：c++, visual-studio, msdn

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:00:58.390

问题是在 Windows 7 x64 下默认禁用所需的组策略。

**第 1 步：在控制面板中找到与 SE_LOCK_MEMORY 匹配的组策略名称：**

以下页面描述了启用 SE_LOCK_MEMORY_NAME 的进程所需的组策略权限：

*   [MSDN: Authorization Constants](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375728%28v=vs.85%29.aspx)然后跟随链接到[Privilege Constants](http://msdn.microsoft.com/en-us/library/windows/desktop/bb530716%28v=vs.85%29.aspx)。

注意：“SE_LOCK_MEMORY”后的列显示“用户权限：锁定内存中的页面。”。这是我们要在下一步设置的“本地安全策略”的名称。

**第 2 步：设置组策略描述为“Lock pages in memory”：**

以下页面描述了如何通过更改组策略将“SE_LOCK_MEMORY”权限添加到用户名：

*   [MSDN：启用内存中的锁定页面选项 (Windows)](http://msdn.microsoft.com/en-us/library/ms190730.aspx#CommunityContent)
*   [Yahoo：为 SE_LOCK_MEMORY_NAME 启用组策略](http://answers.yahoo.com/question/index?qid=20080909163655AAo09ab)

注意：您必须重新启动此新策略才能生效（MSDN 帮助页面上未提及的内容）。

# javascript - 带有 Twitter boostrap 的日期选择器出现但不更改日期

> ID：12235069
> 
> 赞同：1
> 
> 时间：2012-09-02T10:09:13.787
> 
> 标签：javascript, html, twitter-bootstrap, datepicker

我正在尝试通过以下代码将[datepicker](https://github.com/eternicode/bootstrap-datepicker)与 twitter bootstrap 一起使用，但是当日期选择器日历显示时，当我单击它时它不会更改表单中的日期。

```
<div class="control-group">
    <label class="control-label" for="dp1">Meeting Date</label>
    <div class="controls">
        <div class="input-append date" id="dp1" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
            <input class="span2" size="16" type="text" value="12-02-2012" readonly>
            <span class="add-on"><i class="icon-th"></i></span>
        </div>
    </div>
</div> 
```

我用这些行调用 datepicker ：

```
<link href="css/datepicker.css" rel="stylesheet">
...
<script src="js/bootstrap-datepicker.js"></script>
<script>
    $(function(){
        $('#dp1').datepicker();
    });
</script> 
```

我错过了什么吗？有一个对 jQuery 的调用，但如果我删除它，日历将不再显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:20:03.683

在这里，您选择 a`div`作为日期选择器，这就是它不起作用的原因，您必须选择文本框作为日期选择器

喜欢

```
$('#dp1>input').datepicker(); 
```

# android - Android解析plist字符串和整数

> ID：12235076
> 
> 赞同：1
> 
> 时间：2012-09-02T10:10:11.017
> 
> 标签：android, parsing, plist

嗨，我正在尝试解析 android 中的 plist，我使用的是 KPBirds plist 解析器的修改版本，可在此处找到[http://kpbird.blogspot.co.uk/2011/08/android-plist-parser.html](http://kpbird.blogspot.co.uk/2011/08/android-plist-parser.html)

问题是我的所有设置都没有错误，但是当我运行它时，它会尝试将字符串解析为整数。例如：名称被设置为一个字符串，它来自于说名称不能被解析为一个整数。

关于为什么的任何想法？

继承人我的代码到目前为止它的工作方式是在我的活动中我运行一个函数，该函数获取 plist 的读取，然后对其应用数据模型，然后将其记录在 log cat 中。

这是错误

```
09-02 10:49:44.717: E/AndroidRuntime(1736): Caused by: java.lang.NumberFormatException: unable to parse 'image1' as integer
09-02 10:49:44.717: E/AndroidRuntime(1736):     at java.lang.Integer.parse(Integer.java:383)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at java.lang.Integer.parseInt(Integer.java:372)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at java.lang.Integer.parseInt(Integer.java:332)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at co.uk.luke.ParsePlist.parsePlist(ParsePlist.java:68)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at co.uk.luke.LevelSelect.readPlistContents(LevelSelect.java:63)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at co.uk.luke.LevelSelect.onCreate(LevelSelect.java:91)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
09-02 10:49:44.717: E/AndroidRuntime(1736):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785) 
```

这是我调用函数的活动

```
/// Read plist from Assets
        private String readPlistFromAssets() {
            StringBuffer sb = new StringBuffer();
            BufferedReader br=null;
            try {
                 br = new BufferedReader(new InputStreamReader(getAssets().open("Levels.plist"))); 
                String temp;
                while ((temp = br.readLine()) != null)
                    sb.append(temp);
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                try {
                    br.close(); // stop reading
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
            return sb.toString();
        }

        public void readPlistContents(){
            // Read Plist content
            String xml = readPlistFromAssets();
            // create object of Parser Class
            ParsePlist pp = new ParsePlist();
            // parse Plist and fill in plist array
            ArrayList<DataModel> plist = pp.parsePlist(xml);
            // Print ArrayList
            Iterator<DataModel> i = plist.iterator();
            while(i.hasNext()){
                DataModel d = i.next();
                Log.i("Plist","=========================");
                Log.i("Plist","Levelid = " + d.getLevelid());
                Log.i("Plist","title = " + d.getTitle());
                Log.i("Plist","name = " + d.getName());
                Log.i("Plist","lockStatus = " + d.getLockStatus());
                Log.i("Plist","total = " + d.getTotal());
                Log.i("Plist","totalCompleted = " + d.getTotalCompleted());
                Log.i("Plist","Points = " + d.getPoints());
                Log.i("Plist","Image = " + d.getImage());

            }
            Toast.makeText(this, "Parsing completed please check logcat...", Toast.LENGTH_LONG).show();

        } 
```

这是我的数据模型

```
public class DataModel {

    private String title;
    private String name;
    private String levelid;
    private String lockStatus;
    private int total;
    private int totalCompleted;
    private int Points;
    private String Image;

    public int getTotaCompleted() {
        return totalCompleted;
    }
    public void setTotalCompleted(int totalCompleted) {
        this.totalCompleted = totalCompleted;
    }

    public int getTotal() {
        return total;
    }
    public void setTotal(int total) {
        this.total = total;
    }

    public int getPoints() {
        return Points;
    }
    public void setPoints(int Points) {
        this.Points = Points;
    }

    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }

    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    public String getLevelid() {
        return levelid;
    }
    public void setLevelid(String levelid) {
        this.levelid = levelid;
    }
    public String getLockStatus() {
        return lockStatus;
    }
    public void setLockStatus(String lockStatus) {
        this.lockStatus = lockStatus;
    }

    public String getImage() {
        return Image;
    }
    public void setImage(String Image) {
        this.Image = Image;
    }

} 
```

这是我解析 plist 的代码

```
public class ParsePlist {

    // parse Plist and fill in arraylist
    public ArrayList<DataModel> parsePlist(String xml) {
        final ArrayList<DataModel> dataModels = new ArrayList<DataModel>();
        //Get the xml string from assets

        final Document doc = XMLfromString(xml);

        final NodeList nodes_array = doc.getElementsByTagName("array");

        //Fill in the list items from the XML document
        for ( int index = 0; index < nodes_array.getLength(); index++ ) {

            final Node node = nodes_array.item(index);

            if ( node.getNodeType() == Node.ELEMENT_NODE ) {
                final Element e = (Element)nodes_array.item(index);

                final NodeList nodeKey = e.getElementsByTagName("key");
                final NodeList nodeString = e.getElementsByTagName("string");
                DataModel model = new DataModel();

                for (int i=0; i<nodeString.getLength(); i++) {

                    final Element eleKey = (Element)nodeKey.item(i);
                    final Element eleString = (Element)nodeString.item(i);

                    if ( eleString != null ) {

                        String strValue = getValue(eleString, "string");

                        if(getValue(eleKey, "key").equals("title")) {
                            model = new DataModel();
                            model.setTitle(strValue);

                        } else if(getValue(eleKey, "key").equals("name")) {
                            model.setName(strValue);

                        } else if(getValue(eleKey, "key").equals("levelid")) {
                            model.setLevelid(strValue); 

                        } else if(getValue(eleKey, "key").equals("lockStatus")) {
                            model.setLockStatus(strValue);  

                        } else if(getValue(eleKey, "key").equals("total")) {
                            model.setTotal(Integer.parseInt(strValue));

                        } else if(getValue(eleKey, "key").equals("totalCompleted")) {
                            model.setTotalCompleted(Integer.parseInt(strValue));

                        } else if(getValue(eleKey, "key").equals("Points")) {
                            model.setPoints(Integer.parseInt(strValue));

                        } else if(getValue(eleKey, "key").equals("Image")) {
                            model.setImage(strValue);   

                            dataModels.add(model);
                        }
                    }
                }
            }
        }
        return dataModels;
    }

    // Create xml document object from XML String
    private  Document XMLfromString(String xml) {
        Document doc = null;

        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        try {
            DocumentBuilder db = dbf.newDocumentBuilder();
            InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is);
        } catch (ParserConfigurationException e) {
            System.out.println("XML parse error: " + e.getMessage());
            return null;
        } catch (SAXException e) {
            System.out.println("Wrong XML file structure: " + e.getMessage());
            return null;
        } catch (IOException e) {
            System.out.println("I/O exeption: " + e.getMessage());
            return null;
        }

        return doc;
    }

    // fetch value from Text Node only
    private   String getElementValue(Node elem) {
        Node kid;
        if (elem != null) {
            if (elem.hasChildNodes()) {
                for (kid = elem.getFirstChild(); kid != null; kid = kid.getNextSibling()) {
                    if (kid.getNodeType() == Node.TEXT_NODE) {
                        return kid.getNodeValue();
                    }
                }
            }
        }
        return "";
    }

    /// Fetch value from XML Node
    private   String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);
        return getElementValue(n.item(0));
    }
} 
```

最后是我的 plist

```
<key>title</key>
        <string>ZONE1</string>
        <key>name</key>
        <string>LEVEL 1</string>
        <key>levelid</key>
        <string>1</string>
        <key>lockStatus</key>
        <string>UNLOCKED</string>
        <key>total</key>
        <integer>20</integer>
        <key>totalCompleted</key>
        <integer>0</integer>
        <key>Points</key>
        <integer>0</integer>
        <key>Image</key>
        <string>image1</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:19:17.607

```
 final NodeList nodeKey = e.getElementsByTagName("key");
 final NodeList nodeString = e.getElementsByTagName("string"); 
```

添加后

final NodeList nodeInteger = e.getElementsByTagName("integer");

在第二个 for 循环的行之后添加

```
final Element eleString = (Element)nodeString.item(i);

 final Element eleInteger = (Element)nodeInteger .item(i); 
```

然后检查另一个 if 条件

```
if ( eleInteger != null ) {

 String strValue = getValue(eleInteger, "integer");

} 
```

# php - 根据下拉选择发送电子邮件

> ID：12235077
> 
> 赞同：1
> 
> 时间：2012-09-02T10:10:23.663
> 
> 标签：php, html, forms

我在表中有一个包含三个选项值的列表。“已批准”、“待定”和“未批准”。当用户选择一个选项时，我希望向该人发送不同的电子邮件。我在同一行（下拉框旁边）有另一个字段名称“电子邮件地址”。我在想我可以捕获单元格中的特定电子邮件地址并根据选择发送电子邮件。这是否可以通过对每个选项值使用 If else 语句然后将特定的 mailto 发送到表中的电子邮件地址来实现？或者最好有一个提交按钮，一旦选择了选项就发送电子邮件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:27:19.323

一旦选择了选项，最好有一个提交按钮。这使人们有机会在为他们采取行动之前确定他们的行动。例如，他们可能不小心单击了错误的下拉选项，并想要更改它。最好让下拉菜单作为做出选择的动作，而将提交按钮作为发送电子邮件的动作。这也避免了用户混淆（让用户感到困惑，保证他们再也不想使用您的应用程序）。

但无论如何，如果您想在选择下拉值时发送电子邮件，则需要在 JavaScript 中进行。这是因为您正在处理前端控件，并且执行这样的操作不是选择 HTML 元素的典型行为。

我将向您展示如何使用 AJAX 在 jQuery 中执行此操作，因为它简单明了 ( [http://jquery.com](http://jquery.com) )

```
<script type="text/javascript">
    $('#email-dropdown').on('change', function() {
        $.ajax({
            url: <some_file_that_handles_emailing>,
            type: 'post',
            dataType: 'json',
            data: { 'selected': $(this).val() },
            success: function(response) {
                alert(response.msg);
            }
        });
     );
</script>
<select id="email-dropdown">
    <option value="accepted">Accepted</option>
    <option value="pending">Pending</option>
    <option value="disapproved">Disapproved</option>
</select> 
```

一旦更改了值，这将可以发送电子邮件。另外，我没有指定默认值，因为如果您有默认选择，则该值不会有“更改”事件，并且用户将无法触发电子邮件，除非他单击另一个值首先然后改回来（从而触发两封电子邮件）。

如果您想要一个提交按钮：

```
<form id="email-form" action="<some_file_that_handles_emailing>">
    <select id="email-dropdown" name="email-dropdown">
        <option value="accepted">Accepted</option>
        <option value="pending">Pending</option>
        <option value="disapproved">Disapproved</option>
    </select>
    <input type="submit" value="Send Email" />
</form> 
```

就是这样！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T10:14:56.190

我会推荐一个提交按钮。
如果用户选择了错误的选项怎么办？然后，您将发送两封电子邮件！

此外，如果您没有提交按钮，则必须调用 AJAX 请求才能与 PHP 通信。

# android - 导入操作栏 Sherlock 后的错误

> ID：12235079
> 
> 赞同：0
> 
> 时间：2012-09-02T10:10:26.983
> 
> 标签：android, actionbarsherlock

从现有来源导入 Sherlock Action Bar 库项目后，我当然有错误。然后我按照我应该的方式导入支持库，检查目标 4.0 和 min 2.1。在 1.6 上安装编译器。但是我仍然有没有 com.actionbarsherlock.r 的错误。当然，在 gen 文件夹中没有 R 文件，我不知道如何生成它。没有其他错误。我已经尝试修复项目设置和清理。没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T02:25:05.400

不要只对这个项目执行清理，请尝试：

项目 > 清理 > 清理所有项目

另外，请尝试安装必要的 32 位库：

```
sudo apt-get install ia32-libs 
```

我在类似的问题中找到了这些解决方案：

[使用 ActionBarSherlock 时 R 无法解决错误](https://stackoverflow.com/questions/8787288/r-cannot-be-resolved-error-when-using-actionbarsherlock)

# c++ - Windows 窗体应用程序（在 Visual Studio C++ 中）是否自动 C++/CLI？

> ID：12235080
> 
> 赞同：1
> 
> 时间：2012-09-02T10:10:37.970
> 
> 标签：c++, visual-studio-2010, c++-cli

我想用 C++ 做一个 Windows 窗体应用程序，但是通过制作一个简单的 hello world 程序（http://www.youtube.com/watch?v=9sGms_j3l2M）我遇到了一个常见错误（我想这很常见，因为它一直是问题在这里很多次）

“智能感知：不适用于 C++/CLI”

所以我的问题是，我可以用纯 C++ 做一个 Windows 窗体应用程序吗（我真的想要 IntelliSense 以及其他原因）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:12:26.113

根据定义，Windows 窗体是一种 .NET 技术，这意味着是的，它将是 .NET 技术`C++/CLI`。

如果不使用 .NET 程序集，您将无法编写 Windows 窗体应用程序 - 您*可以*使用互操作来调用 .NET 库，但这将是一个漫长而困难的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T10:14:41.270

是的，它会的，不，你不能用纯 C++ 做一个 Windows 窗体应用程序。您将需要另一个 GUI 框架，MFC 或类似的。

问题是：当您调用一些本机 C++ 代码等时，您通常使用 C++/CLI，您的用例是什么？

如果它是一个从头开始的项目，你能不能只使用 C# for Windows 窗体。

# jquery - 如何从 ajaxStart 函数中获取请求的 url？

> ID：12235084
> 
> 赞同：17
> 
> 时间：2012-09-02T10:11:34.940
> 
> 标签：jquery

我可以从中获取请求的 URL`ajaxStart`吗？我想为所有 ajax 请求执行一个通用操作，接受一些请求。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-01T00:41:36.537

不，在`ajaxStart`您内部，您无权访问该`jqXHR`对象，也无权访问`ajaxOptions`：

```
// Watch for a new set of requests
if ( s.global && jQuery.active++ === 0 ) {
  jQuery.event.trigger( "ajaxStart" );
} 
```

如您所见，没有参数传递给`ajaxStart`. 与此对比`ajaxSend`：

```
// Send global event
if ( fireGlobals ) {
  globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
} 
```

对象`jqXHR`与设置一起作为参数传递的位置：

```
$(document).ajaxSend(function(evt, request, settings) {
  alert("Starting request at " + settings.url + ".");
}); 
```

另请参阅**[此](https://stackoverflow.com/questions/3735877/whats-the-difference-between-1-ajaxstart-and-ajaxsend-and-2-ajaxstop-and)**答案以更好地了解此设计。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-08-19T09:02:37.847

您无法从 ajaxstart 函数获取请求的 url，您只能使用 ajaxsend 函数获取，因为 ajaxsend 函数针对特定请求但 ajaxstart 不是

```
$( document ).ajaxSend(function( event, jqxhr, settings ) {
  if ( settings.url == "ajax/test.html" ) {
    $( ".log" ).text( "Triggered ajaxSend handler." );
  }
}); 
```

# c# - WinRT：使用 GetFileFromApplicationUriAsync() 加载静态数据

> ID：12235085
> 
> 赞同：5
> 
> 时间：2012-09-02T10:11:58.650
> 
> 标签：c#, asynchronous, windows-8, windows-runtime, winrt-xaml

我在我的 Windows 8 应用程序中有一些数据，这些数据应该是附带的，只是一些静态数据。事实上：这是一个应该反序列化的简单 xml 文件。

数据保存在 Assets\data.xml 中（Assets 是空白应用模板中的默认文件夹）。

我正在使用这段代码来访问它：

```
private static async Task<MyObject> Load()
{
    if (Windows.ApplicationModel.DesignMode.DesignModeEnabled)
    {
        return new SampleData();
    }

    var uri = new Uri("ms-appx:///Assets/data.xml");
    Debug.WriteLine("Getting file from Application");
    var file = await StorageFile.GetFileFromApplicationUriAsync(uri);
    Debug.WriteLine("Opening file for reading async");
    var stream = await file.OpenStreamForReadAsync();

    var serializer = new XmlSerializer(typeof(MyObject));

    Debug.WriteLine("Begin deserialization");
    var result = (MyObject)serializer.Deserialize(stream.AsInputStream().AsStreamForRead());

    return result;
} 
```

调用方法：

```
public static MyObject GetMyObject()
{
    if (_myObject == null)
    {
        _myObject = Load().Result;
    }

    return _myObject;
} 
```

关于这一点的“有趣”部分是：

如果我在 处设置断点`var uri = new Uri(...);`并使用 F11 单步执行代码，一切都会按预期工作。我得到了所有的调试行，我的应用程序根据需要显示了静态数据。

如果我不设置断点并且不跳过这段代码，我只会得到 Debug 输出，`Getting a file from Application`而不会发生任何事情。似乎`GetFileFromApplicationUriAsync()`再也回不来了。我等了五分钟多，但仍然没有任何反应。

有人知道吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T05:52:58.720

感谢您发布代码。请尝试更改您的方法`Load`如下：

```
//your code
var file = await StorageFile.GetFileFromApplicationUriAsync(uri).AsTask().ConfigureAwait(false);
//your code
var stream = await file.OpenStreamForReadAsync().ConfigureAwait(false);
//your code 
```

这里的主要区别是**AsTask().ConfigureAwait(false)**

**编辑：**

很高兴听到它正在工作。解释很简单：当您使用`task.Result`或`task.Wait()`在 GUI 线程上与`await`关键字一起使用时，您会导致死锁。发生这种情况是因为在`awaiting`代码在其被调用的同一上下文中恢复之后（在您的情况下 - GUI 线程）。并且由于 GUI 线程当前正在等待任务完成（通过`Result`或`Wait()`）出现死锁，并且`await`永远不会调用关键字之后的代码。`ConfigureAwait(false)`指定可以忽略当前上下文，从而允许您的代码成功完成。更多细节在这里：http: [//blog.stephencleary.com/2012/07/dont-block-on-async-code.html](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)

# c++ - 无法将参数 4 从“void”转换为“const char *”

> ID：12235089
> 
> 赞同：0
> 
> 时间：2012-09-02T10:12:07.410
> 
> 标签：c++, qt, char, int

我正在尝试制作一个简单的程序来计算 2 个数字并在 Qt 中的标签上给出总和。但是我遇到了一个错误，我不知道我做错了什么。

我收到了这个错误：

```
K:\QtSDK\QT_files\les4-build-desktop-Qt_4_8_1_for_Desktop_-  _MSVC2010__Qt_SDK__Debug\..\les4\calcu.cpp:40: error: C2664: 'bool QObject::connect(const     QObject *,const char *,const QObject *,const char *,Qt::ConnectionType)' : cannot convert     parameter 4 from 'void' to 'const char *'
Expressions of type void cannot be converted to other types 
```

所以基本上我会在第一个 textedit 中的值更改时进行连接，它将转到 bereken 函数，这将获得 textedits 的 2 个值并计算它们。

计算器.h

```
#ifndef CALCU_H
#define CALCU_H

#include <QWidget>
#include <QLineEdit>
#include <QLabel>

namespace Ui {
class calcu;
}

class calcu : public QWidget
{
Q_OBJECT

public:
explicit calcu(QWidget *parent = 0);
~calcu();
 public slots:
void bereken(void);

private:
Ui::calcu *ui;
QLineEdit *number1 ;
QLineEdit *number2 ;
QLabel *sum;
};

#endif // CALCU_H 
```

计算.ccp

```
#include "calcu.h"
#include "ui_calcu.h"
#include <QLineEdit>
#include <QLabel>
#include <QHBoxLayout>
#include <QMessageBox>
#include <QString>

calcu::calcu(QWidget *parent) :
QWidget(parent),
ui(new Ui::calcu)
{
ui->setupUi(this);

QGridLayout *grid = new QGridLayout;

number1 = new QLineEdit;
number2 = new QLineEdit;
QLabel *sign = new QLabel("+");
QLabel *equal = new QLabel("=");
sum = new QLabel;

QHBoxLayout *layout = new QHBoxLayout;

layout->addWidget(number1);
layout->addWidget(sign);
layout->addWidget(number2);
layout->addWidget(equal);
layout->addWidget(sum);

   // this->setLayout(layout);
ui->groupBox->setLayout(layout);
ui->groupBox->setTitle("Enter som");

setWindowTitle(tr("Group Boxes"));
   // resize(480, 320);

setLayout(grid);

QObject::connect(number1, SIGNAL(textChanged(QString)),this,bereken());

   // bereken();

}

calcu::~calcu()
{
delete ui;
}

void calcu::bereken(){

int som;
QString number;
number = number1->text();
som = number.toInt();

number = number2->text();
som = som + number.toInt();

sum->setText(QString::number(som));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:20:45.540

我想你想要这条线：

```
QObject::connect(number1, SIGNAL(textChanged(QString)),this,bereken()); 
```

成为：

```
QObject::connect(number1, SIGNAL(textChanged(QString)),this, SLOT(bereken())); 
```

SLOT 宏返回 const char*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:16:35.437

好像 SIGNAL return void，所以这条线

```
QObject::connect(number1, SIGNAL(textChanged(QString)),this,bereken()); 
```

是错误地使用了这个功能。

# ruby-on-rails - Rails：SetTimeout 轮询还是 Pubnub/Pusher？

> ID：12235095
> 
> 赞同：0
> 
> 时间：2012-09-02T10:13:07.717
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

我正在开发一个允许用户发布的 Rails 应用程序，就像 facebook 或 stackoverflow 一样。我想实现一个警报系统，让用户知道何时添加了新帖子（就像在 stackoverflow 上一样）。

现在，我将部署到heroku。这带来了一些问题，例如 heroku 不支持 websockets。如果我想要 websocket 支持，我将不得不通过 Pusher 或 Pubnub 支付费用——昂贵的服务。但是，我不太确定我是否需要这种设置。我可能能够摆脱长轮询（通过一个 ajax 请求，经常使用自调用 setTimeout）。

我的问题是，在什么时候我需要在仅 ajax 间隔调用上使用推送服务，例如 Pubnub/Pusher？或者更好的是，我怎样才能摆脱 ajax 间隔调用（可能每 30 秒或每分钟调用一次）？（无论如何，在乞讨中使用 ajax 是否更聪明，然后如果我被流量淹没，则升级到服务？）

我的更新不一定是实时的，但我希望尽快更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:53:26.557

# 在 Heroku 上使用 Rails 的 PubNub 实时事件通知

您正在询问一种开始使用 PubNub 以将推送更新（如 Stackoverflow）构建到您的 Web 应用程序中的简单方法。您使用**Heroku**并将通过 Ruby 发送更新事件。使用 PubNub 很容易做到这一点。首先，您需要访问**PubNub Ruby Gem**。

```
gem install pubnub 
```

接下来，您需要通过 PubNub JavaScript 接收 Web 应用程序的更新。我有一个起点，我将附上一些链接：

### 在继续之前，请务必注意，以下链接只会为您提供一个起点，用于参考或将演示转变为您需要的内容。复制源代码（在[Stackoverflow 实时更新答案](https://stackoverflow.com/a/11662583/524733 "想使用 PubNub 向用户的网络浏览器发送实时更新")中找到）并阅读参考链接以了解如何开始。此外，如果您需要详细的帮助，您可以随时在 Twitter 上联系[http://twitter.com/pubnub](http://twitter.com/pubnub) @PubNub。

1.  Stackoverflow 链接 -[想使用 PubNub 向用户的网络浏览器发送实时更新](https://stackoverflow.com/a/11662583/524733 "想使用 PubNub 向用户的网络浏览器发送实时更新")
2.  一般博客 -[用于类似 Facebook 的通知和私人内容的 PubNub 设置](http://wootify.com/2012/08/02/pubnub-setup-for-facebook-like-notifications-and-private-content/ "用于类似 Facebook 的通知和私人内容的 PubNub 设置")

这些链接提供了类似 Facebook 的窗口框的示例，该窗口框通过 PubNub 向您的用户通知自定义消息。您可以在他们的手机或浏览器上向您的用户发送更新。这将向您的用户显示通知；任何通知你。接下来，如果您想添加安全性 - 请注意 PubNub 仅为单用户频道提供安全性。组频道基本上是公共广播，目前无法在广播模式下锁定数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-09T10:37:15.613

> 我的问题是，在什么时候我需要在仅 ajax 间隔调用上使用推送服务，例如 Pubnub/Pusher？或者更好的是，我怎样才能摆脱 ajax 间隔调用（可能每 30 秒或每分钟调用一次）？（无论如何，在乞讨中使用 ajax 是否更聪明，然后如果我被流量淹没，则升级到服务？）

通过使用像 Heroku 这样的服务，这意味着您正在减轻网络托管环境的痛苦。这意味着随着您的服务变得流行，它将为您处理扩展。如果您使用任何形式的轮询，您将需要尽快扩展服务的 Heroku 部分，因为轮询请求会用完更多资源。

轮询的效率可能会低得多，但这实际上取决于您的用户看到更新的频率。如果更新相当频繁，因此轮询请求确实返回了数据，而实时并不重要，那么轮询可能是一个可以接受的解决方案。但这确实意味着通知不会是即时的。

您是否应该为应用程序的实时基础架构部分使用托管服务实际上取决于：

1.  如果通知的实时性很重要，并且您想使用 WebSockets，那么您最好的解决方案是使用托管服务。
2.  在查看您将产生的成本时，需要考虑您将拥有的用户数量和更新频率。正如我之前所说，这将影响您需要多长时间将 Heroku Dynos 添加到您的应用程序中。如果您根据应用程序可能的资源使用情况进行一些汇总，您可能会大致了解使用轮询并支付更多 Dynos 或将实时基础架构卸载到托管服务是否更具成本效益。

由于我为 Pusher 工作，我显然相信将实时基础架构卸载到以 WebSocket 为中心的服务的好处是很高的。在权衡利弊时，还应考虑强大社区、良好[开发工具](http://pusher.com/docs/debugging)和[文档的好处。](http://pusher.com/docs)如果成本是个问题，那么我知道[Pusher 支持](http://pusher.com/support)是联系并询问潜在折扣/交易的好地方。

# android - 在两个活动android之间执行进度条

> ID：12235099
> 
> 赞同：0
> 
> 时间：2012-09-02T10:13:34.457
> 
> 标签：android, android-layout, progress-bar, android-progressbar

我的 android 应用程序上有两个活动，在第二个活动中，加载数据需要一段时间，我想使用*进度条*让用户觉得有一个动作正在发生，但我不知道如何设置执行代码块时要运行的进度条的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:30:50.060

通常最好`ProgressDialog`在切换到新活动之前显示，或者在显示新活动之后显示，但数据仍在加载。你可以在这里查看：http: [//developer.android.com/reference/android/app/ProgressDialog.html](http://developer.android.com/reference/android/app/ProgressDialog.html)

# android - 图像优于其他图像 Android

> ID：12235104
> 
> 赞同：4
> 
> 时间：2012-09-02T10:13:59.353
> 
> 标签：android, bitmap, overlay

如何在其他图像上设置图像（半透明）？
我需要创建新的位图然后保存它。

谢谢大家。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T10:32:39.433

```
 Bitmap bitmap1 = null; // define it
    Bitmap bitmap2 = null; // define it

    Bitmap resultBitmap = Bitmap.createBitmap(bitmap1.getWidth(), bitmap1.getHeight(), Bitmap.Config.ARGB_8888);

    Canvas c = new Canvas(resultBitmap);

    c.drawBitmap(bitmap1, 0, 0, null);

    Paint p = new Paint();
    p.setAlpha(127);

    c.drawBitmap(bitmap2, 0, 0, p);

    // Your final bitmap is resultBitmap 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T10:27:28.690

您需要做的就是获取两个位图并设置它们的
边界。然后你需要在画布上绘制它们。如果要将图像设置为半透明，则需要设置图片的 alpha。

这是一个例子：

```
 Bitmap bitmap = null;
    try {

        bitmap = Bitmap.createBitmap(500, 500, Config.ARGB_8888);
        Canvas c = new Canvas(bitmap);
        Resources res = getResources();

        Bitmap bitmap1 = BitmapFactory.decodeResource(res, R.drawable.test1); //blue

        Bitmap bitmap2 = BitmapFactory.decodeResource(res, R.drawable.test2); //green
        Drawable drawable1 = new BitmapDrawable(bitmap1);
        Drawable drawable2 = new BitmapDrawable(bitmap2);

        drawable1.setBounds(100, 100, 400, 400);
        drawable2.setBounds(150, 150, 350, 350);
        drawable1.draw(c);
        drawable2.draw(c);

    } catch (Exception e) {
    }
    return bitmap;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:34:36.653

从底层画布创建一个画布对象。然后将半透明位图绘制到该画布上。原始位图对象现在将在其顶部写入半透明位图。

# jquery - 桌子内的手风琴 - 需要纠正一个错误

> ID：12235107
> 
> 赞同：1
> 
> 时间：2012-09-02T10:14:05.180
> 
> 标签：jquery, html-table, accordion

需要一点帮助。还是 jQuery 的初学者...我有一个产品包比较表。第一列包含函数。如果我单击一个函数，它会打开并以手风琴样式显示该函数的描述，并将函数名称加粗（添加类“活动”）作为活动的手风琴标题。默认情况下，所有手风琴都是关闭的。我只想同时打开 1 个手风琴，所以如果访问者点击另一个手风琴，前一个手风琴会自动关闭。我做了这个工作。当我再次单击 Accordion 头以将其关闭时出现问题，因为它会立即再次打开，但是它会删除活动类。如何关闭打开的 1 手风琴而不立即再次打开（考虑过 if 语句，但不知道如何使其工作......）？

这是html：

```
<tr>
    <td><div class="accordion"><h4><a href="javascript:(void)">Accordion head</a></h4><div class="module-desc">Service description</div></div></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
    <td><img src="assets_wm/images/simeimg.png" alt="pipa" /></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
</tr>
<tr>
    <td><div class="accordion"><h4><a href="javascript:(void)">Accordion head</a></h4><div class="module-desc">Service description</div></div></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
</tr>
<tr>
    <td><div class="accordion"><h4><a href="javascript:(void)">Accordion head</a></h4><div class="module-desc">Service description</div></div></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
    <td><img src="assets_wm/images/someimg.png" alt="pipa" /></td>
</tr> 
```

这是jQuery代码：

```
$(document).ready(function(){
$(".module-desc").hide();
$(".accordion h4").click(function(){ 
        $(".accordion").find(".module-desc").hide("fast"); 
        var thisBlock = $(this).parent().index('.accordion');
        $(".accordion").find(".active").not($(this)).removeClass("active");
        $(this).toggleClass("active").next().slideToggle("fast");
        $(this).parent().toggleClass("activeToggle").siblings()
.removeClass("activeToggle").children(".module-desc").hide("fast");
        return false;       

    });
}); 
```

JsFiddle 链接： http: [//jsfiddle.net/5QT6A/](http://jsfiddle.net/5QT6A/) 只有服务描述应该被隐藏。即使在手风琴关闭后，图像也需要保持可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:43:05.593

刚刚意识到有一种比我以前的答案更简单的方法。首先切换单击的项目活动类并在下一个项目（内容）上进行滑动切换。然后对于不是单击项目的所有其他内容，删除活动类并向上滑动下一个项目（内容）。

```
$(document).ready(function(){
    $(".module-desc").hide();
    $(".accordion h4").click(function(){
        $(this).toggleClass("active").next().slideToggle("fast");
        $(".accordion h4").not($(this)).removeClass("active").next().slideUp("fast");
        return false;
    });
}); 
```

示例：[jsfiddle](http://jsfiddle.net/fSNMN/)

# algorithm - 两个数的除模

> ID：12235110
> 
> 赞同：37
> 
> 时间：2012-09-02T10:14:26.267
> 
> 标签：algorithm, math

我们知道

```
(A + B) % P = (A % P + B % P) % P
(A * B) % P = (A % P * B % P) % P 
```

`P`素数在哪里。

我需要计算`(A / B) % P`哪里`A,B`可以非常大并且可以溢出。

这种模算术公式是否适用于`(A / B) % P`和`(A - B) % P`。

如果不是，请解释正确答案是什么。

即这是真的`(A / B) % P = ((A % P) / (B % P)) % P`吗？

我试图计算 (N*(N^2+5)/6)%P 其中 N 可以大到 10^15

这里 A=n*(n^2+5) 肯定会溢出 n=10^15

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-02T10:39:46.537

是的，但不一样：

```
(a - b) mod p = ((a mod p - b mod p) + p) mod p

(a / b) mod p = ((a mod p) * (b^(-1) mod p)) mod p 
```

mod`b^(-1) mod p`的[模逆](http://en.wikipedia.org/wiki/Modular_multiplicative_inverse)在哪里。对于, .`b``p``p = prime``b^(-1) mod p = b^(p - 2) mod p`

**编辑：**

> (N*(N^2+5)/6)%P

您不需要任何模逆。只需简化分数：`N or N^2+5`将被`2`和整除`3`。所以把它们分开，然后你就有了`(a*b) mod P`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-02-23T23:30:09.687

弗拉德的回答是正确的：

```
(a - b) mod p = ((a mod p - b mod p) + p) mod p
(a / b) mod p = ((a mod p) * (b^(-1) mod p)) mod p 
```

这些和其他一些操作在*等效*部分中进行了[概述。](https://en.wikipedia.org/wiki/Modulo_operation)

 *只是想让您知道，这不仅适用于质数`p`。第一个适用于任何`p`. 第二个将适用于任何定义的`p`, where`b^(-1)`或[模逆](https://en.wikipedia.org/wiki/Modular_multiplicative_inverse)。

模逆可以用[扩展欧几里得算法计算](https://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:19:00.543

无论您的算法是什么，如果输入是 A 和 B 并且如果它们溢出，那么您将无法启动算法。告诉我们这些数字来自哪里很重要。它们是您拥有的其他数字的总和还是乘积？

对于大数，您必须为大数使用特殊的数学库。[如何处理任意大的整数](https://stackoverflow.com/questions/310276/how-to-handle-arbitrarily-large-integers) 有了这样的库，你可以只做 (A/B)%P。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-08T23:09:29.893

以下是对两个数进行模除的另一种方法。

**(A/B)%p = (A*modular_inverse(B))%p**

```
Also , 
int modular_inverse(int n, int p){
    return power(n, p-2, p);
}

int power(ll x, ll i,ll p)
{
int ans = 1;
while(i > 0){
    if(i&1)ans = (ans*x)%p;
     i >>=1;
     x = (x*x)%p;
   }
return ans;
} 
```*

# java - JPA 2.0 和 Spring 3.1 出现“没有名为 manager1 的 EntityManager 的持久性提供程序”错误

> ID：12235112
> 
> 赞同：0
> 
> 时间：2012-09-02T10:14:50.013
> 
> 标签：java, spring, jpa, persistence

我现在正在使用 Spring 3.1 和 JPA 2.0 开发一个项目，我收到一条日志消息错误，告诉我：“**没有名为 manager1 的 EntityManager 的持久性提供程序**”。

这是我的 persistence.xml ：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="DemoSpringCore" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>app.demo.model.Operation</class>
    <properties>
        <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3309/test"/>
        <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
        <property name="hibernate.connection.username" value="root"/>
        <property name="hibernate.connection.password" value="root"/>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
        <property name="hibernate.show_sql" value="true"/>
    </properties>
</persistence-unit> 
```

这是我的托管实体“Operation.java”：package app.demo.model；

```
import java.io.Serializable;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="operation")
public class Operation implements Serializable{

private static final long serialVersionUID = 1L;

@Id
@GeneratedValue(strategy=GenerationType.AUTO)
private int id;

@Column(name="a",length=9)
private int a;

@Column(name="b",length=9)
private int b;

@Column(name="c",length=10)
private int c;

public int getA() {
    return a;
}
public void setA(int a) {
    this.a = a;
}
public int getB() {
    return b;
}
public void setB(int b) {
    this.b = b;
}
public int getC() {
    return c;
}
public void setC(int c) {
    this.c = c;
}
public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
} 
```

这是我的 java 配置文件“AppConfiguration.java”替代 Spring 3.1 中的“ApplicationContext.xml”：

```
package app.demo.config;

import java.util.Properties;
import com.jolbox.bonecp.BoneCPDataSource;
import javax.annotation.Resource;
import javax.sql.DataSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.ImportResource;
import org.springframework.context.annotation.PropertySource;
import org.springframework.core.env.Environment;
import org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean;
import app.demo.dao.OperationDAO;
import app.demo.dao.OperationDAOImpl;
import app.demo.service.OperationServiceImpl;
import app.demo.service.OperationService;
import org.hibernate.ejb.HibernatePersistence;

@Configuration
@PropertySource("/META-INF/application.properties")
public class AppConfiguration {

private static final String PROPERTY_NAME_DATABASE_DRIVER = "db.driver";
private static final String PROPERTY_NAME_DATABASE_PASSWORD = "db.password";
private static final String PROPERTY_NAME_DATABASE_URL = "db.url";
private static final String PROPERTY_NAME_DATABASE_USERNAME = "db.username";

private static final String PROPERTY_NAME_HIBERNATE_DIALECT = "hibernate.dialect";
private static final String PROPERTY_NAME_HIBERNATE_FORMAT_SQL = "hibernate.format_sql";
private static final String PROPERTY_NAME_HIBERNATE_SHOW_SQL = "hibernate.show_sql";
private static final String PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN = "entitymanager.packages.to.scan";
// private static final String PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY =
// "hibernate.ejb.naming_strategy";

@Resource
private Environment environment;

@Bean(name = "operationServiceBean")
public OperationService operationService() {
    return new OperationServiceImpl();
}

@Bean(name = "operationDAOBean")
public OperationDAO operationDAO() {
    return new OperationDAOImpl();
}

@Bean
public DataSource dataSource() {

    BoneCPDataSource dataSource = new BoneCPDataSource();

    dataSource.setDriverClass(environment
            .getRequiredProperty(PROPERTY_NAME_DATABASE_DRIVER));
    dataSource.setJdbcUrl(environment
            .getRequiredProperty(PROPERTY_NAME_DATABASE_URL));
    dataSource.setUsername(environment
            .getRequiredProperty(PROPERTY_NAME_DATABASE_USERNAME));
    dataSource.setPassword(environment
            .getRequiredProperty(PROPERTY_NAME_DATABASE_PASSWORD));

    return (DataSource) dataSource;
}

@Bean
public LocalContainerEntityManagerFactoryBean entityManagerFactoryBean()
        throws ClassNotFoundException {
    LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();

    entityManagerFactoryBean
            .setPersistenceProviderClass(HibernatePersistence.class);

    entityManagerFactoryBean.setDataSource(dataSource());

    Properties jpaProterties = new Properties();
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_DIALECT, environment
            .getRequiredProperty(PROPERTY_NAME_HIBERNATE_DIALECT));
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_FORMAT_SQL, environment
            .getRequiredProperty(PROPERTY_NAME_HIBERNATE_FORMAT_SQL));
    jpaProterties.put(PROPERTY_NAME_HIBERNATE_SHOW_SQL, environment
            .getRequiredProperty(PROPERTY_NAME_HIBERNATE_SHOW_SQL));
    jpaProterties
            .put(PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN,
                    environment
                            .getRequiredProperty(PROPERTY_NAME_ENTITYMANAGER_PACKAGES_TO_SCAN));
    // jpaProterties.put(PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY,
    // environment
    // .getRequiredProperty(PROPERTY_NAME_HIBERNATE_NAMING_STRATEGY));
    entityManagerFactoryBean.setJpaProperties(jpaProterties);

    return entityManagerFactoryBean;
}
} 
```

最后是我放置数据源连接属性的“application.properties”：

```
db.driver=com.mysql.jdbc.Driver
db.url=jdbc:mysql://localhost:3309/test
db.username=root
db.password=root

hibernate.dialect=org.hibernate.dialect.MySQLDialect
hibernate.format_sql=true
hibernate.show_sql=true

entitymanager.packages.to.scan=app.demo.model 
```

PS：我单独使用了“appliaction.properties”和“persistence.xml”这两种方法，并在它们同时使用了两种方法，希望这会起作用，但什么也没发生！此外，我在“AppConfiguration.java”和“persistence.xml”中添加了提供者属性，并验证了所有依赖项 jar 文件的存在！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T01:35:01.130

您必须在 emf 中设置要直接扫描的包，并设置持久性单元名称：

```
entityManagerFactoryBean.setPackagesToScan(...);
entityManagerFactoryBean.setPersistenceUnitName(...); 
```

在此之后，您甚至不再需要persistence.xml。

我还建议（如果您无论如何都摆脱了 persistence.xml）为基本属性使用正确的 jpa 属性：

```
javax.persistence.jdbc.driver
javax.persistence.jdbc.url
javax.persistence.jdbc.user
javax.persistence.jdbc.password 
```

# multithreading - 如何在 OmniThreadLibrary 3 中暂停/恢复线程？

> ID：12235116
> 
> 赞同：1
> 
> 时间：2012-09-02T10:15:21.400
> 
> 标签：multithreading, delphi, delphi-2010, resume, omnithreadlibrary

我希望**主应用程序线程**能够暂停/恢复**其他工作线程**，假设这是可能的，那么最好的方法是什么？

任何适用于 Windows XP（及更高版本）的建议都将受到欢迎！

PS。我正在使用**Delphi 2010**和**OmniThreadLibrary 3**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T15:48:55.473

OmniThreadLibrary 不公开用于挂起线程的命令。挂起线程的API方法是调用`SuspendThread`，该函数只在两个地方被调用，都不能从库外直接使用。

如果你有一个`TOTPWorkerThread`，你可以调用`SuspendThread`它的`Handle`属性。

没有安全的、推荐的从线程自身上下文之外挂起线程的方法。这样做总是会导致问题，因为外部线程在尝试挂起它时无法确切知道另一个线程在做什么。它可能在 I/O 语句的中间，或者它可能持有其他线程正在等待的锁。

挂起线程的安全推荐方法是向它发送某种通知，您希望它自行挂起。在 OmniThreadLibrary 的上下文中，这可能意味着调用`Cancel`工作线程。

暂停线程的更好方法是根本不暂停它。挂起线程的通常情况是此时它没有什么可做的，所以当有东西可用时，你想唤醒它，以便它可以继续处理新的工作。不过，您可以在不暂停的情况下做到这一点。相反，让线程在包含工作项的队列上等待。OmniThreadLibrary 有几种机制。您可以将每个工作单元放入一个单独的任务中，然后将这些任务放入线程池中。您还可以将任务放在一个简单的队列中，然后让一个线程在队列上工作。

# asp.net-mvc - resx 文件中的占位符样式文本

> ID：12235119
> 
> 赞同：0
> 
> 时间：2012-09-02T10:15:29.553
> 
> 标签：asp.net-mvc, model-view-controller, localization

有什么方法可以在 resx 文件中添加文本，例如

```
'{0}' 
```

在本地化字符串中，其目的不是让 {0} 充当占位符，而是作为本地化字符串中的常规文本

（我正在使用 asp.net-mvc）

**编辑**

抱歉，我的问题不正确 - 我实际上得到 {0} 即使不使用 String.Format

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:03:32.770

您应该使用与所有 MVC 相同的技术来按原样输出任何字符串：

```
var a = @Html.Raw(Resources.Admin.Name); 
```

这将输出为

```
var a = '{0}'; 
```

使用

![在此处输入图像描述](../Images/e6038e728f5a4c7affd12722a96d458e.png)

* * *

**`Html.Raw`**将输出您所写的确切字符串，而不对其进行编码。

# python - 简单的数据验证

> ID：12235120
> 
> 赞同：23
> 
> 时间：2012-09-02T10:15:41.223
> 
> 标签：python, python-module, validation

我正在编写一个 python 模块，其中包含一些操作 mongodb 数据库的函数。

在将输入数据保存到数据库之前，如何验证传递给该函数的输入数据？

例如，假设模块中的一个函数`createUser(user)`接受 python 字典作为参数。该字典包含要保存在数据库中的用户信息。我想创建一个自动验证例程来检查字典结构是否与数据库结构匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-10T09:26:09.497

几天前我发布了“pyvaru”（[https://github.com/daveoncode/pyvaru](https://github.com/daveoncode/pyvaru)），它是一个简单、灵活、不显眼的 Python 3（3.4+）数据验证库，基于验证规则的概念.

从文档中引用：

> 给定一个要验证的现有模型，如下所示（但它可以是一个简单的字典或任何数据结构，因为 pyvaru 不对数据格式做出任何假设）：
> 
> ```
> class User:
>     def __init__(self, first_name: str, last_name: str, date_of_birth: datetime, sex: str):
>         self.first_name = first_name
>         self.last_name = last_name
>         self.date_of_birth = date_of_birth
>         self.sex = sex 
> ```
> 
> 我们必须通过实现 get_rules() 方法来定义一个验证器，并且对于我们想要验证的每个字段，我们必须提供一个或多个适当的规则。
> 
> ```
> from pyvaru import Validator
> from pyvaru.rules import TypeRule, FullStringRule, ChoiceRule, PastDateRule
> 
> class UserValidator(Validator):
>     def get_rules(self) -> list:
>         user = self.data # type: User
>         return [
>             TypeRule(apply_to=user,
>                      label='User',
>                      valid_type=User,
>                      error_message='User must be an instance of user model.',
>                      stop_if_invalid=True),
>             FullStringRule(user.first_name, 'First name'),
>             FullStringRule(user.last_name, 'Last name'),
>             ChoiceRule(user.sex, 'Sex', choices=('M', 'F')),
>             PastDateRule(user.date_of_birth, 'Date of birth')
>         ] 
> ```
> 
> 最后，关于如何使用我们的自定义验证器，我们有两种选择：
> 
> 作为上下文处理器：
> 
> ```
> with UserValidator(user):
>     # do whatever you want with your valid model 
> ```
> 
> 在这种情况下，只有在验证成功时才会执行其中的代码，否则会引发 ValidationException（包含带有相应报告的 validation_result 属性）。
> 
> 通过调用 validate() 方法（返回 ValidationResult）
> 
> ```
> validation = UserValidator(user).validate()
> if validation.is_successful():
>     # do whatever you want with your valid model
> else:
>     # you can take a proper action and access validation.errors
>     # in order to provide a useful message to the application user,
>     # write logs or whatever 
> ```
> 
> 假设我们有一个 User 的实例，配置如下：
> 
> ```
> user = User(first_name=' ',
>             last_name=None,
>             date_of_birth=datetime(2020, 1, 1),
>             sex='unknown') 
> ```
> 
> 通过使用之前定义的规则运行验证，我们将获得带有以下错误的 ValidationResult：
> 
> ```
> {
>     'First name': ['String is empty.'],
>     'Last name': ['Not a string.'],
>     'Sex': ['Value not found in available choices.'],
>     'Date of birth': ['Not a past date.']
> } 
> ```

# php - PHP - 提取关联 POST 数据的最佳方法

> ID：12235122
> 
> 赞同：3
> 
> 时间：2012-09-02T10:15:49.243
> 
> 标签：php, arrays, performance

我有这个 $_POST 数组的东西：

```
 'name' => string '' (length=0)
  'limit' => string '100' (length=3)

  'timeframe' => 
    array
      'start' => string '00:00' (length=5)
      'end' => string '23:30' (length=5)

  'person' => 
    array
      'test' => string '' (length=0)
      'title' => 
        array
          0 => string 'value1' (length=2)
          1 => string 'value2' (length=3) 
```

我想为名为 的字段提取数据，`person[title][]`有效执行此操作的最佳方法是什么？

实际上，我将问题范围缩小到这个例子，但是我更普遍地实现了这个，所以我可以为我的代码中的任何数组命名字段提取数据。

提前致谢

* * *

**更新 1**

好的，我想我不清楚，这又是问题：

我有一个这种格式的字段名称：`name_1[name_2]..[name_n][]`并且它的值在`$_POST`关联数组中可用，我需要提取该值（这是一个数组，因为末尾有 []）。

我可以通过运行 a 或某事从原始字段名中提取子名称`preg_match`，然后循环遍历数组，直到使用提取的索引找到值。但我不确定这是否真的是最好和/或有效的方法。

对不起，一开始不清楚^^

* * *

**更新 2**

伙计们，我说我将问题缩小到这个例子，但`person`在我的实际应用程序中没有任何东西。我正在开发一个数据解析器引擎来处理大量数据，而该功能正是它所需要的。希望它；现在很清楚。

谢谢大家，顺便说一句^^

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:20:10.497

我会用`$title = $_POST['perosn']['title']`.

或者甚至更好地将整个人转换为对象。

```
$person = (object)$_POST['person'];
echo $person->name // Call it 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:35:49.507

要非常具体的问题：

> 我想为名为 person[title][] 的字段提取数据，有效执行此操作的最佳方法是什么？

好吧，`<? $person[title][]?>`---我们不能用它来阅读。如果您尝试按照您的方式阅读，PHP 将产生致命错误。我们使用`[]`将新元素推送到给定数组。再次 - 只添加新项目。为了阅读这些，您只能访问所需`key`的数组。

在您的情况下，您可以访问`$_POST['person']['title']`

你问的是最好的方法，但这完全取决于你正在处理的任务。

好吧，如果我们正在谈论，那么我们`$_POST`可能正在处理一个表格。为了保持你的代码干净和可维护，你应该像你一样使用更深的数组。

为什么？

你有`<input type="text" name="name_of_the_current[]">`（看我们正在定义一个数组）不需要让它更深。

**更新**

嘿，我们正在处理简单的表格。为什么 $_POST 太深了？好吧，无论如何这都不是一个好主意，原因如下：

`HTML/PHP`1）维护现有代码有点困难。想象一下，如果您必须更新/修改代码中的某些内容。我想这需要一些时间。

2)`Deep array`也意味着需要更多的时间来迭代它。（大约〜0.0008 ms（在你的情况下），如果我错了，请纠正我）

很抱歉，但我必须建议你一些更合适的东西:)

1）首先，这个人是`PRIMARY AND UNIQUE KEY`，对吧？我想是的。

例如，大多数 php 开发人员通常会这样做：

```
<?php
//suppose we have it from database or from
$persons = array
(
  'john_123' => array('age' = 40, 'gender' =>'M', 'location' => 'somewhere'),
  'linde_22' => array('age' = 30, 'gender' =>'F', 'location' => 'somewhere_else')  
);

//
print $persons['john_123']['age']; //prints 40...
?> 
```

**好处**：

1.  很干净
2.  易于维护
3.  不会太深
4.  快一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T11:09:49.253

[预优化是魔鬼](http://en.wikipedia.org/wiki/Program_optimization#When_to_optimize)- 直到你真的遇到这段代码导致你的软件开发工作出现瓶颈的地方，你真的应该避免任何优化，你的瓶颈更有可能将在数据库中，在您注意到速度下降之前。

首先 - 让它工作。第二 - 改进它。

从您提供的数组中，您可以执行以下操作：

```
foreach ($arr['person']['title'] as $title){
  if ($title == $match_condition) // do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T14:49:56.157

好吧，给你：

```
/**
 * Extracts value from an associative array by fieldname sequence.
 *
 * Example:
 *
 * This string:
 * my_group[my_subgroup][multiselect_field][]
 *
 * Requests the helper to extract the value of: (if exists)
 * $array[my_group][my_subgroup][multiselect_field]
 *
 * @param  string $name  Fieldname string.
 * @param  array  $array Haystack array to dig.
 *
 * @return array  Extracted value or FALSE on failure.
 */
function _extract_value($name, array $array)
{
    // Check if it's a array fieldname, go for brackets
    if (strpos($name, '[') !== FALSE AND preg_match_all('/\[(.*?)\]/', $name, $matches))
    {
        $count  = count($matches[0]);
        $keys[] = current(explode('[', $name));

        // Extract fieldname keys
        for ($i = 0; $i < $count; $i++)
        {
            $matches[1][$i] != '' AND $keys[] = $matches[1][$i];
        }

        return _reduce($array, $keys);
    }

    return FALSE;
}

// --------------------------------------------------------------------

/**
 * Helper: Reduces the array by the passed array of keys which leds to find the value!
 *
 * Traverses a multi-dimensional array until the value of the keys specified
 * in keys array is found. Returns FALSE if not found.
 *
 * @param  array   $array Array to reduce.
 * @param  array   $keys  Array keys sequence. Traverse map in fact.
 * @param  integer $i     $keys array index to start from.
 *
 * @return array          Extracted value or FALSE on failure.
 */
function _reduce($array, $keys, $i = 0)
{
    // Not an array, or a wrong index to start
    if ( ! is_array($array) OR ! isset($keys[$i]))
    {
        return $array;
    }

    // Go deep, find the value
    return isset($array[$keys[$i]])
        ? _reduce($array[$keys[$i]], $keys, $i + 1)
        : FALSE;
}

// --------------------------------------------------------------------

$titles = _extract_value('', $_POST);
var_dump($titles); 
```

*取自 CodeIgniter 的`Form_validation`库。*

# git - Git自动合并失败；修复冲突，然后提交结果。

> ID：12235126
> 
> 赞同：3
> 
> 时间：2012-09-02T10:16:36.340
> 
> 标签：git, github

> **可能重复：**
> [如何修复 Git 中的合并冲突？](https://stackoverflow.com/questions/161813/how-do-i-fix-merge-conflicts-in-git)

我在开发分支中进行了更改并提交了更改。

然后转为掌握并尝试合并。

```
Switched to branch 'master'
root@li494-175:/home/ubuntu/workspace/rtbopsConfig# git merge --no-ff development
Auto-merging rtb_settings/rtb_settings.yaml
CONFLICT (content): Merge conflict in rtb_settings/rtb_settings.yaml
Automatic merge failed; fix conflicts and then commit the result. 
```

我不知道这是什么意思。我厌倦了将 bakc 转换为 master 并收到此错误。

```
root@li494-175:/home/ubuntu/workspace/rtbopsConfig# git checkout development
rtb_settings/rtb_settings.yaml: needs merge
error: you need to resolve your current index first 
```

我根本不明白。我该如何解决？

# paypal - 贝宝嵌入式支付导致当前页面在 iframe 中打开

> ID：12235128
> 
> 赞同：3
> 
> 时间：2012-09-02T10:16:57.780
> 
> 标签：paypal, paypal-adaptive-payments

我在使用 PayPal Adaptive Payments API 时遇到了一些非常烦人的问题。我正在尝试将付款嵌入到灯箱 iframe 中，我已经按照说明实施了所有操作。当我去付款时，点击按钮，灯箱 iframe 打开，我执行付款没有问题。但是，如果我取消付款或通过付款并调用 paymentSuccess，则结帐页面会加载到 iframe 中，而 iframe 不会关闭。paymentCanceled 根本没有被调用，因为应该提醒的*pino没有显示出来。*

我正在向您展示一些代码，但事实是它取自尚未工作的 Wordpress 插件，因此我无法向您展示页面的“工作版本”。无论如何，如果您需要更多详细信息，请询问，我会尽力提供。

贝宝 javascript

```
 <script type="text/javascript" charset="utf-8">
            var dgFlow = new PAYPAL.apps.DGFlow({trigger: 'post_pay_counter_paypal_execute_payment'});

            function MyEmbeddedFlow(embeddedFlow) {
                  this.embeddedPPObj = embeddedFlow;
                  this.paymentSuccess = function () {
                       this.embeddedPPObj.closeFlow();
                       // handle payment success here
                       top.close();
                  };
                  this.paymentCanceled = function () {
                       alert('pippo');
                       this.embeddedPPObj.closeFlow();
                       // handle payment cancellation here
                       top.close();
                  }

            }
            var myEmbeddedPaymentFlow = new MyEmbeddedFlow(dgFlow);
   </script> 
```

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-29T09:47:58.230

我的问题解决了。这是代码：

```
jQuery(document).ready(function($) {
   //Manage the closing of the iframe when payment is executed/canceled
   if (window != top) {
      top.location.replace(document.location);
   }
}

//Initialize PayPal embedded payment flow. Now loading it on document ready so that we only have it if user prepares payment, not just loads the page...
var dgFlow = new PAYPAL.apps.DGFlow({trigger: 'post_pay_counter_paypal_execute_payment'}); 
```

# java - JAVA：返回方法和设置参数

> ID：12235131
> 
> 赞同：0
> 
> 时间：2012-09-02T10:17:09.427
> 
> 标签：java, methods, parameters, return

我是java新手，**返回值如何工作？**我需要返回 a 的宽度`GLabel`，以便在另一种方法中使用它

```
private double createLabel(String text, int locX, int locY){
    double widthOfLabel = labelText.getWidth();
    return widthOfLabel;
} 
```

（我已经删除了 un=important 部分）但这应该返回标签的宽度。

**我如何在另一种方法中使用它？**

```
private void  getWidthofLabel(){
    double name = ?????????
} 
```

我尝试了一些不同的东西，但它们似乎都只是 return `null`。当我得到方法的返回值时还有一件事`createLabel`，我必须设置它的参数`(string,int,int)`吗？我不想那样，但调试器似乎强迫我设置它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:19:49.427

如果你想得到你的结果，`createLabel`你将需要类似的东西：

```
double name = createLabel(text, locX, locY); 
```

您**必须**提供参数，否则无法编译代码。如果你不需要它们，你可以创建一个不带参数的重载：

```
private double createLabel(){
      double widthOfLabel = labelText.getWidth();
      return widthOfLabel;
} 
```

但此时我不确定您的代码中发生了什么。:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T10:21:02.430

返回调用将像这样完成：

```
double name =  createLabel(text, locX, locY); 
```

如果您定义如下方法：

```
private double createLabel(String text, int locX, int locY){
} 
```

你需要通过 a`String`和 two `int`。如果您想要一个不需要传递参数的变体；重载方法，如：

```
private double createLabel(){
} 
```

你可以这样称呼：

```
double name =  createLabel(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T11:59:06.903

你可以这样打电话

```
private void  getWidthofLabel(){
   double name = createLabel("label", 3, 5);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T10:22:21.310

您需要调用该函数：

> ```
> double name = createLabel(text,locX,lockY); 
> ```

其中 text 是一个字符串，locX 和 lockY 是整数。
没有参数就不可能调用一个函数，除非有另一个同名的函数（称为重载方法）。

# wordpress - 如何检索附加在帖子中的图像的纯 URL？

> ID：12235134
> 
> 赞同：0
> 
> 时间：2012-09-02T10:17:23.530
> 
> 标签：wordpress, wordpress-theming

我想在帖子的附件中获取图像的纯 url。当 wp_get_attachment_image 给我这样的代码时`<img src="" ... height="" width="" title="" alt="" />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:01:37.517

您可以改用[wp_get_attachment_image_src](http://codex.wordpress.org/Function_Reference/wp_get_attachment_image_src)。它返回一个包含 src、height 和 width 属性的数组。

# php - 一个点会阻止 PHP 代码正常运行

> ID：12235136
> 
> 赞同：-3
> 
> 时间：2012-09-02T10:17:33.453
> 
> 标签：php, wordpress, shortcode

我使用这个简单的代码向我的 Wordpress 网站添加一个基本的简码：

```
function post_review25() { 
return '<div class="review2-5">Rating:</div>';
 }
add_shortcode('review 2.5', 'post_review25'); 
```

因此，通过添加`[review 2.5]`可视化编辑器，它应该 echo `<div class="review2-5">Rating:</div>`。但是，点中的点`review 2.5`停止了它的运行——它代替了**审查 2**的代码（我也为此设置了一个短代码）。

这意味着超出点的任何内容都无法识别。我怎么可能在那里添加一个点并让它发挥作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:25:18.123

第一个参数`add_shortcode()`应该是类似标签的，但有一些额外的限制：

[http://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

> 短代码名称应该全部小写并使用所有字母，但数字和下划线（不是破折号！）也应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T16:38:37.563

你应该使用类似的东西`[review rating="2.5"]`。评级值作为处理函数的参数传递。

```
function post_review($atts) { 
    $rating = $atts['rating'];
    return '<div class="review'.$rating.'">Rating:</div>';
}
add_shortcode('review', 'post_review'); 
```

希望有帮助。:)

# facebook - 这个 FQL 多查询有什么问题？没有结果

> ID：12235139
> 
> 赞同：3
> 
> 时间：2012-09-02T10:17:51.760
> 
> 标签：facebook, facebook-graph-api, facebook-fql

```
{
        "query1": "SELECT aid, cover_pid, name, created FROM album 
            WHERE owner = 166125753465316  AND name != \'Wall Photos\' ORDER BY created DESC LIMIT 3",

        "query2": "SELECT pid, src, src_small, src_big, caption FROM photo 
            WHERE aid IN (SELECT aid FROM #query1)  ORDER BY created DESC LIMIT 5"
} 
```

在上面的 $queries 中，然后：

```
$param  =   array(
             'method'    => 'fql.multiquery',
             'queries'     => $queries,
             'callback'  => ''
            );
            $fqlResult   =   $facebook->api($param);

            var_dump($fqlResult); 
```

返回一个空数组？我做错了什么？

我想抓取 owner =... 的相册，并从每个相册中获取 5 张照片。

我可以用单个查询来做到这一点，但是页面加载确实需要很长时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:11:47.403

我刚刚尝试了这个，并替换`me()`了您查询中的 ID，它可以工作。当我尝试查找您的 ID 166125753465316 时，它会引发“[不支持的获取请求错误](http://graph.facebook.com/166125753465316)”。这可能是你的问题。

我能够使用您评论中的 PAGE_ID 以及有效的用户或应用访问令牌来获取数据。

其他一些评论：您应该使用`object_id`而不是`aid`and `pid`。这些将被弃用。

其次，此查询将仅返回您返回的三个相册中的 5 张最近的照片。要每人获得 5 张照片，您需要执行以下操作：

```
{
    "albums": "SELECT object_id, cover_object_id, name, created FROM album 
        WHERE owner = me()  AND type != 'wall' ORDER BY created DESC LIMIT 3",

    "album1": "SELECT object_id, src, src_small, src_big, caption FROM photo 
        WHERE album_object_id IN (SELECT object_id FROM #albums LIMIT 1 OFFSET 0)
        ORDER BY created DESC LIMIT 5",

    "album2": "SELECT object_id, src, src_small, src_big, caption FROM photo 
        WHERE album_object_id IN (SELECT object_id FROM #albums LIMIT 1 OFFSET 1)
        ORDER BY created DESC LIMIT 5",

    "album3": "SELECT object_id, src, src_small, src_big, caption FROM photo 
        WHERE album_object_id IN (SELECT object_id FROM #albums LIMIT 1 OFFSET 2)
        ORDER BY created DESC LIMIT 5"

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:49:10.113

你试过这个graph api query -
USER_ID?fields=albums.fields(name,photos.limit(5).fields(id,name),id,cover_photo,created_time)
这来自最近引入的graph api字段扩展功能 - [https://developers.facebook.com/docs/reference/api/field_expansion/](https://developers.facebook.com/docs/reference/api/field_expansion/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T10:27:04.270

在这种情况下，我认为您不需要多查询，您只需像这样更改

```
SELECT pid, src, src_small, src_big, caption FROM photo 
     WHERE aid IN (SELECT aid FROM album  WHERE owner = me()  ORDER BY created DESC )  
     ORDER BY created DESC LIMIT 5 
```

你也可以使用这个 GRAPH API

```
me?fields=albums.fields(cover_photo,created_time,photos.limit(5).fields(link)) 
```

这是链接

[http://developers.facebook.com/tools/explorer?method=GET&path=me%3Ffields%3Dalbums.fields%28cover_photo%2Ccreated_time%2Cphotos.limit%285%29.fields%28link%29%29](http://developers.facebook.com/tools/explorer?method=GET&path=me%3Ffields%3Dalbums.fields%28cover_photo%2Ccreated_time%2Cphotos.limit%285%29.fields%28link%29%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T05:59:06.180

尝试删除查询中的换行符，只需使用空格作为分隔符。

试试这个编辑过的fql

```
{
    "query1": "SELECT aid, cover_pid, name, created FROM album WHERE owner = 166125753465316 AND name != \'Wall Photos\' ORDER BY created DESC LIMIT 3",
    "query2": "SELECT pid, src, src_small, src_big, caption FROM photo WHERE aid IN (SELECT aid FROM #query1)  ORDER BY created DESC LIMIT 5"
} 
```

# asp.net-mvc - 在控制器操作方法中如何获取文件路径？

> ID：12235141
> 
> 赞同：0
> 
> 时间：2012-09-02T10:17:59.460
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我看过以下代码：

```
 protected override void Initialize(RequestContext requestContext)
    {
        base.Initialize(requestContext);
        var filePath = requestContext.HttpContext.Request.FilePath;
    } 
```

但是，有没有更简单的方法可以从 ASP MVC 中的操作方法内部执行此操作？

例如对于 www.test.com/abc 我想得到“/abc”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:27:51.760

它非常简单。

```
public ActionResult Foo()
{
     var filePath = Request.FilePath;

     //other stuff
} 
```

# ms-access - 如何让一个事件条目连续几天重复？

> ID：12235143
> 
> 赞同：0
> 
> 时间：2012-09-02T10:18:04.130
> 
> 标签：ms-access

我是全新的访问并尝试“即时学习”。我用的是2003版本

我有一个记录员工病假的数据库，tbls 是 tblLeaveEvent、tblEmployeeDetails、tblLeaveType。

我有一个表格来记录休假，所有员工详细信息都通过查询填充到表格中。我从日历中选择休假开始日期，从下拉列表中选择休假类型，从列表 0-5 中选择休假持续时间。

我的问题是，如果有人在星期四请病假并说他们将离开 3 个工作日，我的表格将记录为星期四请假 3 天。

我如何让数据库记录周四的 1 天休假、周五的 1 天休假和周一的 1 天休假？

我是否需要更改设计并选择结束日期而不是#days 持续时间？如果我确实从日历中选择了一个结束日期，我该如何忽略 w/ends？

希望有一个非常简单的解决方案来解决我的问题。谢谢，大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:51:20.257

对于几乎所有依赖日期的数据库，您自己的日历表是​​一个方便的补充。它应该包含每个日期的一行和一些额外的字段来指示工作日等。这不仅可以解决周末问题，还可以解决公共假期问题。然后很容易设置3个工作日，只需查找日历表即可。

日历表

```
CalDate     Workday
04/09/2012      -1
05/09/2012      -1
06/09/2012      -1
07/09/2012       0
08/09/2012       0
09/09/2012      -1
10/09/2012      -1 
```

![添加日历日](../Images/434d23695fbf1766a33342ef09eac196.png)

大致

```
Private Sub NoDays_AfterUpdate()
Dim rs As Recordset
Dim db As Database

    Set db = CurrentDb

    If Not IsNull(Me.Start) Then
        dteDate = DateAdd("d", Me.NoDays, Me.Start)
        sSQL = "SELECT TOP 1 c.CalDate FROM Calendar c " _
             & "WHERE c.CalDate >#" _
             & Format(dteDate, "yyyy/mm/dd") _
             & "# And c.WorkDay = True"
        Set rs = db.OpenRecordset(sSQL)

        If rs.EOF() Then
            MsgBox "Please perform calendar maintenance"
        Else
            Me.Return = rs!CalDate
        End If
    Else
        MsgBox "Please enter start date"
    End If

End Sub 
```

# html - 如何在鼠标悬停时修复链接的位置

> ID：12235144
> 
> 赞同：0
> 
> 时间：2012-09-02T10:18:18.943
> 
> 标签：html, css

将鼠标悬停在页面顶部显示深度列表时出现问题，请帮助我

这是html代码

```
<div  id="mymenu" runat="server" >
      <ul class="mainmenu">
      <li><a>WorkFlow</a>
      <ul class="submenu">
      <li><a href="# >Employee Apprisail Report</a></li>
      <li><a href="#">Attendance Amendment Status Report</a></li>
      <li><a href="#">Employee Requisition Report</a></li>
      <li><a href="#">Employee Clearance Report</a></li>
      <li><a href="#">Employee Hiring Status Report</a></li>
      <li><a href="#">Housing Loan Status Report</a></li>
      <li><a href="#">Leave Request Annulal Leave Amendments</a></li>
      <li><a href="#">Leave Request Annulal Leave Cancellation</a></li>
      <li><a href="#">Mobile Allowance Status Report</a></li>
      <li><a href="#">Overtime Status Report</a></li>
      </ul>
      </li>
       <li><a>HR</a>
       <ul class="submenu">
       <li><a href="#">Iqama Report</a></li>
       <li><a href="#>Project Time Attendance System</a></li>
       <li><a href="#”&gt;Vacation Balance Report</a></li>
       <li><a href="#">Electronic Human Resource Mangment System</a></li>
       </ul>
       </li>
        <li><a>Payroll</a>
        <ul class="submenu">
        <li><a href="#">Manual Attendance System/User Register</a></li>
        <li><a href="#">Manual Attendance System Approve/Reject</a></li>
        <li><a href="#">Check Print/Report</a></li>
        <li><a href="#">Head Of Departmens Attendance Amendment</a></li>
        <li><a href=”#">Overtime Payroll Application</a></li>
        <li><a href="#">Salary Increment Status Report</a></li>
        <li><a href="#”&gt;Payroll Reconciliation Report</a></li>
        </ul>
        </li>
      </ul>
    </div> 
```

这是我的CSS（问题）

```
ul.mainmenu:
{
 list-style:none;
}

ul.mainmenu li
 {
    display: inline-block;
}

ul.mainmenu li a {
    text-decoration: none;
    background: #ff005a;
    color: #fff;
    padding: 0.25em;
}

ul.mainmenu li a:hover {
    background: #ff00ff;
}

ul.mainmenu li ul.submenu {
    list-style: none;
    display: none;
}

ul.mainmenu li:hover > ul.submenu {
    position: absolute;
    display: inline-block;
    top: 40px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:25:49.823

任何定位的元素`position: absolute`都相对于它的第一个父元素定位，其`position`属性设置为（默认值）以外`static`的任何值，或者，在没有元素具有非`static`位置的情况下，它将相对于该`body`元素定位。

要解决这个问题，只需分配`position: relative`给父元素，例如`li`：

```
ul.mainmenu li {
    position: relative;
    display: inline-block;
} 
```

并且只需使用`top`和`left`适当地定位“下拉”菜单。

# javascript - 无法使用 $('input[name="rate"]').focus(); 聚焦文本框 方法

> ID：12235153
> 
> 赞同：0
> 
> 时间：2012-09-02T10:19:39.190
> 
> 标签：javascript, jquery, validation

`onblur`朋友我在分配给event on的 javascript 函数中有以下代码`<input type="text" name="rate" />`。`#NewOrder`是一个 div`input[name=quantity]`也是一个`input type="text"`. 这两个输入元素都在`#NewOrder`div 中。

```
function addMaterial() {
    var qnty, rate;
    if (Number($('#NewOrder input[name=quantity]').val()) > 0) {
        qnty = Number($('#NewOrder input[name=quantity]').val())
    }

    else {
        alert('Invalid Quantity');
        $('#NewOrder input[name=quantity]').focus(); // ** Working
        return;
    }
    if ($('#NewOrder input[name=rate]').val().length == 0) {
        rate = 0;
    }
    else {
        if (!Number($('#NewOrder input[name=rate]').val() > 0)) {
            alert('Invaid Rate');     // ** Working
            alert($('#NewOrder input[name="rate"]').val()); // ** Working
            $('#NewOrder input[name="rate"]').focus();      // ** Not Working
            $('#NewOrder input[name="rate"]').trigger('focus'); // Also not Works
            return;
        }
        else
            rate = Number($('#NewOrder input[name=rate]').val());
    }
    var mat = getMaterialFromArray($('#mats').find(':selected').text());
    $('#mats').focus();
} 
```

朋友们我哪里错了..？我错过了什么......？
这让我很恼火。
虽然`alert($('#NewOrder input[name="rate"]').val());`说的是实际值，但表示正在使用 jQuery 选择控件。
但既不工作`$('#NewOrder input[name="rate"]').focus();`也不`$('#NewOrder input[name="rate"]').trigger('focus');`工作。

**添加实时版本链接**
尝试访问[http://a.bobdn.com](http://a.bobdn.com)使用“111”作为投资者编号和“abc”作为密码。然后导航到 Material -> New Order 并请查看那里有什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:10:43.953

这似乎是 Firefox 中的一个**错误**。在 Chrome 中，您的代码可以正常工作。
要获得 Firefox 的支持，您可以创建如下函数：

```
function setFocus(controlSelectorString) {
    setTimeout(function() {
        $(controlSelectorString).focus();
    }, 0);
} 
```

[提琴手](http://jsfiddle.net/jrbK5/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:32:33.410

我认为您在该函数的最后一行调用焦点，并且每次调用该函数时都会调用该焦点，这会覆盖您的文本框焦点。

```
$('#mats').focus(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-02T10:54:55.387

我检查了您的[代码](http://a.bobdn.com/RequestedHTML.txt)并注意到您有两个具有相同名称='Rate' 的文本框。我认为这就是问题所在。请更改名称并尝试一次。

# php - 处理带有单独提交的多个表单

> ID：12235154
> 
> 赞同：0
> 
> 时间：2012-09-02T10:19:44.063
> 
> 标签：php, javascript, jquery, html

我正在尝试设置一个产品页面，包含多个产品等......它是通过一个while循环从mysql数据库中获取数据来完成的，产品显示正常，但我遇到的问题是我希望能够单独处理每个产品，换句话说，我不知道页面上可能出现哪些产品，所以当我尝试通过 php 处理它们时，它需要灵活。它有点难以解释，但这是我当前的代码，希望你能明白我的意思。

这是我的一个单独产品的 html，所有产品都像下面的代码一样输出

```
 <form id="<?php print "$material_id";?>" class="form">    
      <div class="supp_bro_mat_wrap">    
            <input type="hidden" name="supp_bro_mat_id" value="<?php print "$material_id";?>" />        
            <input name="supp_bro_qty_input" class="supp_bro_qty_input" type="text" />              
      </div><!---end supp_bro_input_wrap--->
            <input name="supp_bro_add_to_cart" type="submit" class="supp_bro_add_to_cart" id="<?php print "$material_id";?>" />          
 </form> 
```

这是php代码，我知道很简单，但我只想能够在这个阶段获得值，

```
 if (isset($_POST['supp_bro_add_to_cart'])) {

    $mat_id = $_POST['supp_bro_mat_id'];
    $mat_qty = $_POST['supp_bro_qty_input'];

    var_dump($mat_id);
    var_dump($mat_qty);
} 
```

当我尝试输入第一个产品的数量时，我得到了正确的 var_dumps，但是当我在它下面的所有产品上尝试时，我得到了

```
supplies_browse.php?supp_bro_mat_id=5&supp_bro_qty_input=8768&supp_bro_add_to_cart=Submit 
```

出现在我的浏览器标题中，而不是

```
supplies_browse.php?sid=masonary 
```

应该是这样，并且没有 var_dumps。希望你能明白我的意思，如果你还需要什么，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:01:20.653

很难从您发布的内容中分辨出来，但`<form>`您的 HTML 中似乎在产品列表之前有一个额外的标签。上面有这个附加`<form>`标签`method="POST"`。

因此，在您的产品列表中，`<form>`第一个产品的标签被忽略（不允许嵌套表单元素），因此提交第一个产品执行 POST 提交，因此数据在 HTTP 正文中传输，URL具有您想要的值，并且您的`$_POST`变量会正确填充。

`</form>`然后第一个产品末尾的标签关闭附加，`<form>`第二个产品和后续产品以它们自己的形式创建。这些`<form>`标签没有指定方法属性，因此使用默认方法，即 GET。这将发送有关 URL 的信息，该信息不会填充 $_POST 变量。

解决方案是从页面开头删除附加`<form>`标签，并将`method="POST"`属性（可能还有该标签上的任何其他属性）移动到产品的每个`<form>`标签。

# apache - 从 URL 中删除 .php 扩展名

> ID：12235172
> 
> 赞同：0
> 
> 时间：2012-09-02T10:21:45.410
> 
> 标签：apache, mod-rewrite

我想从 URL 中删除 .php 扩展名，以便像[http://mysite.com/abc.php](http://mysite.com/abc.php)这样的 URL将重定向到[http://mysite.com/abc](http://mysite.com/abc)如何在 apache 中使用 .htaccess

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:27:22.560

```
RewriteEngine on 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME}\.php -f 
RewriteRule ^(.*)$ $1.php 
```

你可以很容易地谷歌它......

# java - 使用 Hadoop Streaming 时通过脚本运行 Java 应用程序：java.lang.NoClassDefFoundError

> ID：12235178
> 
> 赞同：0
> 
> 时间：2012-09-02T10:22:22.347
> 
> 标签：java, shell, hadoop, streaming

我使用 Hadoop Streaming 在 tcsh 中执行脚本文件：

```
-- First copy the jar files to the Hadoop filesystem,
   so that they are next to inputdir and outputdir. --
cp App/* /hadoop/jardir/

-- Run Hadoop --
hadoop jar /usr/lib/hadoop/contrib/streaming/hadoop-streaming-0.20.2-cdh3u4.jar \\
-D mapred.task.timeout=120000000 \\
-input "/hadoop/inputdir/" -output "/hadoop/outputdir/" \\
-mapper script.sh -reducer script.sh -file script.sh \\
-jobconf mapred.map.tasks=1 -jobconf mapred.reduce.tasks=0 >>& log.txt 
```

该脚本文件像这样调用 Java：

```
java -cp /hadoop/jardir/SomeJavaApp.jar:/hadoop/jardir/* some.JavaApplication 
```

即使我明确告诉 Java 类路径，运行它也会失败：

```
Exception in thread "main" java.lang.NoClassDefFoundError: some/JavaApplication
Caused by: java.lang.ClassNotFoundException: some.JavaApplication
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: some.JavaApplication.  Program will exit. 
```

我已经尝试了各种建议，例如设置 Hadoops`-libjars`参数，但这并没有帮助。

使用 Hadoop Streaming 时如何通过脚本运行 Java 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T08:41:13.933

我认为问题在于您的 jar 未复制到分布式缓存中。尝试通过选项将 jar 与 shell 脚本一起发送`-files`。例如：

```
hadoop jar /home/user/hadoop-distrib/lib/hadoop-streaming.jar \
    -files runjava.sh,hadooptest.jar  \
    -D mapreduce.job.reduces=0 \
    -D mapred.job.name=TestJob \
    -input /user/hadoop/test \
    -output /user/hadoop/test/res \
    -mapper 'runjava.sh' 
```

我假设您正在从存储`hadooptest.jar`和的目录运行您的流式传输作业`runjava.sh`。

运行java.sh：

```
java -cp /home/user/test/hadooptest.jar:/home/user/hadoop-distrib/lib/* com.example.hadooptest.StreamTest 
```

流测试.java：

```
...
public class StreamTest {

    public static void main(String[] args) throws Exception {

        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        String s = null;
        while ((s = in.readLine()) != null && s.length() != 0) {
            System.out.println(s);
        }
    }
} 
```

此示例在 0.20-append-r1056497 版本上运行良好。

# javascript - BatmanJS：深度嵌套的路由

> ID：12235182
> 
> 赞同：2
> 
> 时间：2012-09-02T10:22:59.183
> 
> 标签：javascript, coffeescript, url-routing, batman.js

我想知道是否有人有这样的工作：

```
 @resources 'projects', ->
    @resources 'tables', ->
      @resources 'items' 
```

具有相应的视图内容，例如：

```
%a{"data-bind" => "table.name", "data-route" => "routes.projects[project].tables[table]"}
  %div{"data-foreach-item" => "project.table.items"}
    %p{"data-bind" => item.name"}
    %a.btn{"data-route" => "routes.projects[project].tables[table].items[item]"} View details » 
```

这里的问题在于链接标签：

```
Uncaught DevelopmentError: Couldn't find a route for the name items! 
```

但是 p 标签中的项目名称显示正确。我的路线有问题。有人知道 BatmanJS 中的多个嵌套路由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T20:41:19.537

已确认，它的工作深度不超过两层。没有超过两个级别的测试，所以这可能是设计使然。

# c# - 匹配以下正则表达式：#*:*#

> ID：12235185
> 
> 赞同：0
> 
> 时间：2012-09-02T10:23:33.380
> 
> 标签：c#, regex

我想查找一个字符串是否包含一个以哈希 (#) 开头和结尾并包含冒号 (:) 的正则表达式。所有这些都应该在同一行匹配

**示例：**你好 #some:test# 和 George **MATCH**

**示例：** hello to #:# world **NO MATCH**

**示例：** hello to #test:# world **NO MATCH**

**示例：**你好 #:test# world **NO MATCH**

**例子：**

你好[换行符]

到 #some:test# world **NO MATCH**

谢谢， 雅尼斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:26:21.227

这应该这样做：

```
@"\#.+:.+\#" 
```

分解：

```
\#   - Match a # character
.+   - Followed by one or more characters
:    - Followed by a : character
.+   - Followed by one or more characters
\#   - Followed by a # character 
```

请注意，`.`它将匹配*任何*字符，并且可能不是最有效的正则表达式。

* * *

非贪婪版本（更高效）：

```
@"\#[^:]+:[^#]+\#"

\#    - Match a # character
[^:]+ - Followed by one or more characters that are not :
:     - Followed by a : character
[^#]+ - Followed by one or more characters that are not #
\#    - Followed by a # character 
```

# scala - 我如何在 Scala 中分组

> ID：12235186
> 
> 赞同：1
> 
> 时间：2012-09-02T10:23:46.703
> 
> 标签：scala, playframework

建立一个网站（我是 web 和 Scala 和 Playframework 的新手，但有很多编程经验）并尝试打印出我的域模型的一部分。我有一个类别-> 目标-> 任务的域模型。任务知道目标，目标知道类别。现在我想像这样打印出来

```
Category1
    Goal1
        Activity1
    Goal2
        Activity2
        Activity3 
```

我使用 Scala 并做到了这一点：

```
 @tasks.groupBy(_.goal).map { case (goal, tasks) =>
    <ul>
        <li>@goal.name</li>
        <ul>
            @tasks.map { task =>
                <li>@task.name</li>
            }
        </ul>
    </ul>
} 
```

所以现在排序是这样的：

```
Goal1
    Activity1
Goal2
    Activity2
    Activity3 
```

但我也想按类别对 I 进行排序，就像我展示的第一个示例一样。在 Scala 中是否有一种很好的方法可以做到这一点，或者我应该更改我的域模型？

问候，丽娜

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:31:04.297

您可以通过添加另一个来完成此操作`groupBy`：

```
tasks.groupBy(_.goal).groupBy { case (goal, _) => goal.category } 
```

或者，等效地：

```
tasks.groupBy(_.goal).groupBy(_._1.category) 
```

这只是获取您从当前方法中获得的地图，并按其目标键的类别对其进行分组，为您提供一个`Map[Category, Map[Goal, Seq[Task]]]`，您可以像这样使用它：

```
<ul>
  @tasks.groupBy(_.goal).groupBy(_._1.category).map { case (category, goals) =>
    <li>@category.name
      <ul>
        @goals.map { case (goal, tasks) =>
          <li>@goal.name
            <ul>
              @tasks.map { task => <li>@task.name</li> }
            </ul>
          </li>
        }
      </ul>
    </li>
  }
</ul> 
```

请注意，我还稍微调整了您的嵌套。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:30:22.037

我不确定这是最简单的方法，但是：

```
<ul>
    @defining(tasks.map(_.goal.category).distinct) {categories =>
        @categories.map{category =>
            <li>
                @category.name
            </li>
            <ul>
                @tasks.filter(_.goal.category == category).groupBy(_.goal).map{ case (goal, tasks) =>
                    <ul>
                        <li>@goal.name</li>
                        <ul>
                            @tasks.map {task =>
                                <li>@task.name</li>
                            }
                        </ul>
                    </ul>
                }
            </ul>
        }
    }
</ul> 
```

`@defining``categories`借助 method ，您可以定义唯一类别列表的值`distinct`。

# visual-studio-2010 - VS2012 类似于 VS2010 中的多个 web.config 转换

> ID：12235188
> 
> 赞同：1
> 
> 时间：2012-09-02T10:24:19.467
> 
> 标签：visual-studio-2010, visual-studio-2012, web-config-transform

是否可以在 VS2010 项目中使用 VS2012[配置文件特定的 web.config 转换？](http://blogs.msdn.com/b/webdev/archive/2012/08/20/profile-specific-web-config-transforms-and-transform-preview.aspx)

我目前正在从事的项目已经不再使用构建配置。因此，我一直在寻找替代方案，例如[Douglas Rathbone 的“多层”方法](http://dotnet.dzone.com/articles/using-custom-webconfig-0)。

我知道随着 VS2012 的推出，这是一个已解决的问题，但是我还没有升级到 VS2012 的机会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:15:41.160

是的，有可能。

如果您在此处安装`Windows Azure SDK for .NET (VS 2010 SP1)`此 Microsoft 链接：http: [//msdn.microsoft.com/library/jj161045](http://msdn.microsoft.com/library/jj161045)，它将为您提供 2012 包含的更新的 Web 部署功能。

然后，您可以在您的项目中创建一个`Web.<profile_name>.config`文件，并且在应用配置命名的配置文件（如果存在）的任何更改后，它将使用该文件，如本文所述：[http ://www.hanselman.com/blog/ TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx](http://www.hanselman.com/blog/TinyHappyFeatures3PublishingImprovementsChainedConfigTransformsAndDeployingASPNETAppsFromTheCommandLine.aspx)

# c# - 确定异常是否可重新抛出

> ID：12235190
> 
> 赞同：4
> 
> 时间：2012-09-02T10:24:32.570
> 
> 标签：c#, exception-handling

我有 2 个功能：

```
public void WithdrawMoney()
{
    //Take money from bank account
    //Exceptions abort the operation and are printed
    //Rethrow exception if called by TransferMoney()
}

public void TransferMoney()
{
    //Take money from one account and only deposit on another account if no exceptions were caught in WithdrawMoney()
    WithdrawMoney(); 
    DepositMoney();     
} 
```

我想要的是能够重新抛出发生在**WithdrawMoney()**中的异常，只有当它被**TransferMoney()**调用时。如果我只是想从账户中取款，必须处理异常，但不必重新抛出，因为它不是由其他方法调用的。

除了使用布尔值之外，我想到了另一种解决方案。我可以查看堆栈跟踪，看看**TransferMoney()**是否调用了**WithdrawMoney()**，如果确实如此，则只重新抛出异常。或者有没有办法查看方法中是否发生异常？

我只是想知道您是否可以在抛出异常之前检查是否可以在 catch 块中抛出异常。**如果我总是抛出它，当我直接调用WithdrawMoney()**时，异常将不会被处理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T10:41:50.957

一个方法不应该因为一些难以遵循和记录的任意条件而表现不同。

您应该重构出您想要在内部使用的提款方法的一部分，以便您从外部获得一种方法并从内部获得一种方法。

```
private void MakeWithdrawal() {
    //Take money from bank account
    //Exceptions abort the operation
}

public void WithdrawMoney()
{
    MakeWithdrawal();
    //Exceptions are printed
}

public void TransferMoney()
{
    //Take money from one account and only deposit on another account if no exceptions were caught in WithdrawMoney()
    MakeWithdrawal();
    DepositMoney();     
    //Exceptions are printed
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T10:34:37.807

只需添加一个包装器。*单一责任*人也适用于方法。

```
private void WithdrawMoney()
{
    // Take money from bank account

    // _Always_ Rethrow 
}

public void WithdrawMoneyPublic()
{
   // call WithdrawMoney and handle the exceptions
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-02T11:09:26.907

您可以考虑在函数调用中添加可选参数：

```
public void WithdrawMoney(bool throwOnError = false)
{
    //Do stuff
    catch(Exception ex)
    {
        if(throwOnError) throw;
    } 
    //Do stuff
}

public void TransferMoney()
{
    WithdrawMoney(true);
} 
```

但是，这是从“框架设计指南”中删除的，作为您不应该编写的代码示例。这是一本极好的书。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T10:56:47.997

为什么会有例外？

为什么不让（甚至可能两个）方法返回布尔值，表示成功？

听起来你有 bools 的想法，但由于某种原因没有去做。为什么不呢？它是如此的合乎逻辑和简单！

取款处理内部异常并返回 false，TransferMoney 将检查并返回 false。您希望这些操作返回操作是否成功也是非常合乎逻辑的。

```
public bool WithdrawMoney()
{
    //Take money from bank account

    //Exceptions abort the operation and are printed, and return false

    //Flawless run returns true
}

public bool TransferMoney()
{
    //Take money from one account and only deposit
    //    on another account if WidthdrawMoney returned true
    if (WithdrawMoney())
    {
        DepositMoney();     
        return true;
    }

    return false;
} 
```

毕竟——我会说你还需要检查第二个 WithdrawMoney 操作是否失败，以防万一——回滚你对第一个 WithdrawMoney 所做的更改。

# php - 找不到类“Zend_Form_Subform”

> ID：12235193
> 
> 赞同：2
> 
> 时间：2012-09-02T10:25:18.730
> 
> 标签：php, zend-framework, zend-form, fatal-error, zend-form-sub-form

获得的可能原因是什么

```
Fatal error: Class 'Zend_Form_Subform' not found 
in /path/application/forms/formName.php on line 2 
```

当本地工作正常时，在远程服务器上。问题仅在于`Zend_Form_Subform`所有其他表单（没有任何子表单）并且视图工作正常。

我错过了`application.ini`子表单下的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T10:46:18.983

这很可能是大小写错误。请将您的班级名称更新为`Zend_Form_SubForm`（注意大写 F）。

它可能在 localhost 上工作，因为您正在运行不区分大小写的 Windows (?)，但是当您部署时，您可能正在部署在区分大小写的 UNIX (?) 上。

# css - CSS 和 Internet Explorer 8/9

> ID：12235196
> 
> 赞同：-3
> 
> 时间：2012-09-02T10:26:08.247
> 
> 标签：css, internet-explorer, internet-explorer-8, internet-explorer-9

这是我目前正在开发的网站：http: [//www.nightcore.nl/](http://www.nightcore.nl/) 如果您在 ie 8 / 9 中打开它，您会发现布局与 FF/Chrome 有点不同（它在 ie 中效果很好 7) 我已经修复了图像周围的边框，但它并没有解决你所看到的所有问题。我找不到哪里出错了。有人可以快速浏览一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:00:54.283

如果您在构建网站时在 IE 7/8/9/(10) 中遇到很多问题，您应该首先做的事情。您应该检查 W3C 学校的验证器。

[http://validator.w3.org/](http://validator.w3.org/)

上传您的文件或将您的网站链接放入并修复所有错误。大多数情况下，w3c 给您的错误下方的评论显然是在帮助您。

但如果它不在这里是来自 W3C的[常见问题解答。](http://validator.w3.org/docs/help.html)

如果仍然存在问题，那么是时候指定您的问题并发布它了！

# c - 使用调试和分析选项进行编译时，代码在执行时立即崩溃

> ID：12235197
> 
> 赞同：2
> 
> 时间：2012-09-02T10:26:11.730
> 
> 标签：c, crash, profiling

我有一段代码在使用 -pg -ggdb 编译时运行良好，但我现在不知道是什么导致它崩溃。省略这两个选项使它运行得很好。任何线索可能导致它？

这是对 gcc 的调用

```
gcc -std=gnu99  -fopenmp  -pg  -O0  main.c Simulation.c Lattice.c Substrate.c
Adsorbate.c  -I/usr/include/glib-2.0 -I/usr/lib64/glib-2.0/include -L/usr/local/atlas/lib 
-I/usr/local/atlas/include/   -I/usr/local/include -L/usr/local/lib -lgsl -lgslcblas
-lglib-2.0  -lm 
```

例如，对 gcc 的调用提供了运行代码是

```
gcc -std=gnu99  -fopenmp -fexpensive-optimizations -ffast-math -fomit-frame-pointer
-O3 -mmmx -msse -msse2 -msse3 -mfpmath=sse  -march=corei7  -mtune=corei7   main.c
Simulation.c Lattice.c Substrate.c Adsorbate.c  -I/usr/include/glib-2.0 -I/usr/lib6
/glib-2.0/include -L/usr/local/atlas/lib -I/usr/local/atlas/include/   -I/usr/loca
/include -L/usr/local/lib -lgsl -lgslcblas  -lglib-2.0  -lm 
```

这是 main.c 文件的开头：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "Lattice.h"
#include "Substrate.h"
#include "Adsorbate.h"
#include "Simulation.h"
#include <glib.h>
#include <gsl/gsl_math.h>
#include <gsl/gsl_vector.h>
#include <gsl/gsl_matrix.h>
#include <gsl/gsl_blas.h>
#include <assert.h>
#include <omp.h>

/*  Units are:
*   [x] = Angstrom
*   [m] = amu
*   [t] = psec
*   [T] = K
*
*   1[x]/[t] = 100 m/sec    1m/sec = 0.01 [x]/[t]
*   1[E] = 1.03584E-4 eV    1eV = 9654 [E]
*   1[F] = 1.66E-13 N       1N = 602.41E10 [F]
*
*   k = 9036.1446 [F]/[x]
*   Kb = 0.83192 [E]/[T]
*   A = 1303.3[E]
*   b = 0.875 1/[x]
*   R0 = 3.3 [x]

*
*/
int main(int argc, char **argv)
{

    // Start simulation
    int numcores = omp_get_num_procs(); // get number of available processors
    omp_set_num_threads(numcores-1); // leave one core free
    struct Parameters * P;
    struct Lattice * restrict  lfcc ;
    lfcc = (struct Lattice*)malloc(sizeof(struct Lattice));
    P = (struct Parameters*)malloc(sizeof(struct Parameters));
    if (argc<2) {fprintf(stderr,"\n*****\tPlease supply in the command line a Perameters file\t*****\n"); exit(1);}
    char * pfile = argv[1];
    Init_Simulation(lfcc, P, argc, pfile); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:39:02.990

错误出现在以下函数中，该函数接受要由 glib 解析的文件以从用户那里获取一些参数。注释掉的行是错误隐藏的行。由于我不需要它们（它们之前被插入用于测试）我删除了它们并且代码运行良好。

```
void Get_Data_File(char * datafile, struct  Parameters * P)

{
  P->Datafile = g_key_file_new ();
  g_key_file_load_from_file (P->Datafile, datafile, 0, NULL);
//       char ** Groups;
//       size_t * l;
//       Groups = g_key_file_get_groups (P->Datafile, l);
//       int k = 0;
//       char * group = Groups[0];      
} 
```

# django - 如何在 django ModelForm CharField 之后添加“星 *”？

> ID：12235201
> 
> 赞同：6
> 
> 时间：2012-09-02T10:26:39.857
> 
> 标签：django, django-models, modelform, django-forms

我的 django ModelForm 中有一些必要的字段。如何在必填字段后添加红星 (*)？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-02T10:40:01.973

我将假设您希望这自动发生，所以这里有几种不同的方法之一：

```
{% for field in form %}
    <label for="{{ field.auto_id }}">{{ field.label_tag }}
    {% if field.field.required %}
        <span class="required">*</span>
    {% endif %}
    </label>
{% endfor %} 
```

然后，您可以使用 CSS 设置星号样式。

或者，您可以根据需要使用 CSS 添加星号：

```
<style type="text/css">
    span.required:after { content: '*'; }
</style>
{% for field in form %}
    <label for="{{ field.auto_id }}">
    {% if field.field.required %}
        <span class="required">{{ field.label_tag }}</span>
    {% else %}
        {{ field.label_tag }}
    {% endif %}
    </label>
{% endfor %} 
```

如果您还想对必填字段做其他事情，这可能是一个更好的选择。

但是，如果您不会单独访问这些字段（例如使用 {{ form.as_p }}），那么您可以向您的 ModelForm 添加一个属性：

```
class FooForm(forms.ModelForm):
    required_css_class = 'required' 
```

这会将所有需要的字段定义为具有“必需”类（因此，您可以使用我上面提到的 CSS 代码来添加星号（或您想用它做的任何其他事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-13T20:38:53.937

您也可以使用`jQuery`来选择标签或附加到它。

例如，如果你有这个引导表单

```
<form class="form-horizontal">
  <div class="form-group">
    <label for="inputEmail3" class="col-sm-2 control-label">Email</label>
    <div class="col-sm-10">
      <input type="email" class="form-control" id="inputEmail3" required="required">
    </div>
  </div>
  <div class="form-group">
    <label for="inputPassword3" class="col-sm-2 control-label">Password</label>
    <div class="col-sm-10">
      <input type="password" class="form-control" id="inputPassword3">
    </div>
  </div>
</form> 
```

然后，如果您想将星号添加到必填字段。

```
$('input,textarea,select').filter('[required]').parent().parent().find("label").append("*"); 
```

此外，您可能希望为必填字段标签指定一个类，以便将它们设为粗体或其他内容

```
$('input,textarea,select').filter('[required]:visible').parent().parent().find("label").addClass("required_label"); 
```

# php - 为 Youtube 评论投票（外部）

> ID：12235205
> 
> 赞同：4
> 
> 时间：2012-09-02T10:27:04.783
> 
> 标签：php

我正在尝试对 youtube 评论进行投票，

到期发送（在一个会话中）

> session_token=MYSESSIONID

至

> [http://www.youtube.com/comment_voting?a=1&id=COMMENTID&video_id=VIDEOID&old_vote=0](http://www.youtube.com/comment_voting?a=1&id=COMMENTID&video_id=VIDEOID&old_vote=0)

但它失败了，我使用这种形式发送发布请求：

```
<FORM action="http://www.youtube.com/comment_voting?a=1&id=COMMENTID&video_id=VIDEOID&old_vote=0" method="post">
    <P>
              <INPUT type="text" id="session_token">
  <INPUT type="submit" value="Send">
    </P>
 </FORM> 
```

我不确定我是否以良好的方式发送发布请求（单击发送后它发送请求并显示错误）。

如果我的发送方式有任何小错误，对不起我的英语不好，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T23:41:06.737

YouTube 禁用了此功能。您不能在 YouTube 之外投票。我试图寻找一个来源来证明它，但我找不到任何东西。

# c - Double 在递归中返回 0，但在 int 时工作正常

> ID：12235222
> 
> 赞同：0
> 
> 时间：2012-09-02T10:30:02.167
> 
> 标签：c, recursion, double

我不明白为什么如果你把所有的都`double`改成，它工作得很好`int`，

**我的 printf 语句有问题吗？**

**您使用`%f`or`%lf`对`double`吗？**

```
/*
double power(double a, int b) that calculates the power ab. You are allowed to use the
multiplication operator *.
*/
#include <stdio.h>
#include <conio.h>
double power(double a,int b)
{
    double buffer;
    if(b > 1)
    {
        buffer = a * power(a,b-1);
        return buffer;
    }
    else
        return a;
}
int main(void)
{
    double a;
    int b;
    int buffer;
    scanf("%f",&a);
    scanf("%d",&b);
    buffer = power(a,b);
    printf("%f",buffer);
    getch();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:34:50.400

> ```
> int buffer;
> printf("%f",buffer); 
> ```

您在 printf 中使用了错误的说明符，这是一个严重的问题，因为`printf`无法转换参数。使用`%d`或更改`buffer`为双。

* * *

作为第二个问题，您还需要使用`%lf`而不是`%f`in `scanf`，因为`a`是 a `double`，而不是 a `float`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:33:40.297

```
scanf("%f",&a); 
```

你需要阅读你的双倍`%lf`。请参阅[此问题](https://stackoverflow.com/q/210590/912144)，了解为什么需要`%lf`with`scanf`但不需要 with `printf`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:34:02.357

问题是，在您的系统上，`int`它的长度似乎与 `float`但不一样`double`- 当您 scanf() 一个 double 时，您会丢失它的一半（顺便说一下，向 scanf 提供错误的格式说明符是未定义的行为） . 你必须使用`%lf`双打。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T10:34:54.413

你应该`%lf`在 scanf 中使用 for double 查看[这个](https://stackoverflow.com/questions/210590/why-does-scanf-need-lf-for-doubles-when-printf-is-okay-with-just-f)问题。
代替：

```
scanf("%f",&a); 
```

用这个：

```
scanf("%lf",&a); 
```

`double`同样在 main 函数中，缓冲区的类型不应该是`int`.

# php - 如何在表单选择区域的名称中使用符号？

> ID：12235223
> 
> 赞同：0
> 
> 时间：2012-09-02T10:30:45.610
> 
> 标签：php, html, forms, url, symbols

我有一个表格，我需要将 = 和 & 放在 Select 区域的名称中，稍后将显示为 URL 链接。但是，如果我输入 = 或 &，则 URL 显示 = 为 %3D 并且 & 符号显示为 %26

到目前为止我有这个

```
 <form method="get" name="FormFilter">
    <select name="condition=<?php echo $condition; ?>&order" onChange="document.forms['FormFilter'].submit()">
    <option value ="ASC">Newest</option>
    <option value="DESC">Oldest</option>
    </select>
    </form> 
```

并将 URL 显示为

> browse.php?condition%3Difquestions%26order=DESC

Iv 尝试使用`&#61;`，`$amp;`但它们不起作用。我怎样才能让它工作？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:34:15.727

尝试这个：

```
<form method="get" name="FormFilter">
    <select name="order" onChange="document.forms['FormFilter'].submit()">
        <option value="ASC">Newest</option>
        <option value="DESC">Oldest</option>
    </select>
    <input type="hidden" name="condition" value="<?=$condition?>" />
</form> 
```

# magento - Magento 将顶部菜单从标题更改为侧边栏

> ID：12235227
> 
> 赞同：1
> 
> 时间：2012-09-02T10:31:17.267
> 
> 标签：magento, magento-1.7

我最近开始在 magento 上进行开发，这真的很令人困惑。我决定将顶部菜单的位置从 header.phtml 更改为主要布局生命。

所以我`<?php echo $this->getChildHtml('topMenu') ?>`从 header.phtml 移动到`2Columns-right.phtml`现在菜单没有显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:18:05.483

如果您的主题中有 local.xml 文件，您可以在默认处理程序中使用它：

```
<reference name="header">
    <action method="unsetChild"><name>topMenu</name></action>
</reference>
<reference name="right">
    <action method="insert"><blockName>top.menu</blockName></action>
</reference> 
```

如果您没有 local.xml 文件，只需在主题的布局文件夹中创建一个并使用以下内容填充它：

```
<?xml version="1.0"?>
<layout>
    <default>
        <reference name="header">
            <action method="unsetChild"><name>topMenu</name></action>
        </reference>
        <reference name="right">
            <action method="insert"><blockName>top.menu</blockName></action>
        </reference>
    </default>
</layout> 
```

还原 header.phtml 和 2columns-right.phtml 中的更改清除缓存，您就可以开始了。

# cocoa - “修剪”一个 NSString

> ID：12235228
> 
> 赞同：0
> 
> 时间：2012-09-02T10:31:34.290
> 
> 标签：cocoa

我如何“修剪”一个 NSString 以便我可以只用旧字符串的某个部分制作一个新字符串？

例如，我有字符串“9 月 12 日星期一”，如何只挑出“星期一”部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:33:50.593

使用`NSRange`

例子：

```
NSRange range;
    range.location = 0;
    range.length = 6;
    NSString *Secondstring = [Firststring substringWithRange:dayRange]; 
```

如果 'Firststring' 包含“Monday the 12th of September”，打印 'Secondstring' 将只给出 'Monday'

# php - 我如何打破 foreach 语句，回显其他内容然后继续

> ID：12235237
> 
> 赞同：-3
> 
> 时间：2012-09-02T10:33:20.593
> 
> 标签：php, arrays, foreach, break, continue

我从 MSQL 数据库中获取了两个不同的数组数据数组，第一个数组来自我的博客文章表，包含 15 行/项目，第二个数组来自广告表，包含 3 行/项目。我想从博客文章表（第一个数组）中获取前 5 组数据，然后从广告表（第二个数组）中获取 1（一个）并从我在第一个数组中停止的位置继续，另外 5 个项目和一个来自第一个数组，就这样。请帮我想出如何做到这一点的PHP代码。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:19:26.863

该代码假定数组从 开始索引`0`。

```
$i = 0;
foreach ($posts as $post) {
  // Output and/or otherwise process $post
  if (++$i % 5 == 0) {
    $advertisements[$i / 5 - 1] // Output and/or process advertisement
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:15:34.947

使用模数。

你会有一个计数`mssql_num_rows`，然后迭代一个计数器，比如说`$i`

然后在 foreach($rows)..:

```
$i = 0; $count = mssql_num_rows($result);
foreach($rows as $blog) {
    if($i > 0 && $i++ % 5 == 0) {
        $advert = array_shift($adverts_array);
        // process $advert
    }
    // process $blog here
} 
```

# jquery - 不同列中的 WordPress 帖子

> ID：12235240
> 
> 赞同：0
> 
> 时间：2012-09-02T10:33:42.477
> 
> 标签：jquery, wordpress

通常我会尝试自己弄清楚事情，但我被困在这里并且无法在互联网上找到解决方案。我试图弄清楚/知道是否有可能在 wordpress 中有一个选项，我希望在哪个列中发布帖子（它是缩略图）。假设我在索引网站上有 5 个列，我想要某些帖子仅张贴在第 1 栏。

我尝试这样做的原因是为了让缩略图看起来更流畅。我知道同位素是一种选择，但由于我有固定的宽度，这会导致缩略图的顺序混淆，我试图找到一个不同的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:07:39.060

你有几个选择。

1.  [两个循环。](http://codex.wordpress.org/The_Loop#Multiple_Loops_Example_1)第一个循环将填充第 1 列，第二个循环将填充其他位置。

2.  如果这些列是按顺序填充的，您可能会在同一循环中填充第 1 列，然后再填充第 2 列。

    ```
    while (have_posts()) : the_post();
        $column1 = 0
        if ($column1 < 2) {
           //code to populate column 1
        }
        else
           //code to populate column 2
        }
    endwhile 
    ```

# css - 在ie中删除图像周围的边框

> ID：12235246
> 
> 赞同：0
> 
> 时间：2012-09-02T10:34:20.427
> 
> 标签：css, internet-explorer

我尝试了互联网上的许多解决方案。没有任何作用。

```
 <a target="_blank" href="" style="outline : none; text-decoration:none;"><img style="border:none;outline : none;"  alt="" src="/Banners/imve.jpg"  /></a> 
```

我还尝试在两个元素中将边框颜色设置为白色。将边框大小设置为 0px .. 但是没有任何效果，为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:36:54.917

尝试以下操作：

```
<a target="_blank" href="" style="outline : 0; border: 0; text-decoration:none;"><img style="border:0;outline : 0;" border="0"  alt="" src="/Banners/imve.jpg"  /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:39:10.987

你有`outline:none;`你的`a`标签。这应该是`border:none;`

**CSS**

```
a, a img{
border:none;
}
a img{
display: block;
} 
```

# java - playframework 2.0.1：连接数据库总是失败

> ID：12235252
> 
> 赞同：0
> 
> 时间：2012-09-02T10:34:57.540
> 
> 标签：java, mysql, playframework-2.0, ubuntu-12.04

我刚刚将我的操作系统从 Ubuntu 10.04 重新安装到 12.04，并且我在 ubuntu 10.04 上使用 play 2.0.1，在 10.04 上一切正常，但是现在使用相同的 play 2.0.1 事情搞砸了，现在每次我运行命令`play "run 80"`服务器启动，但是当我点击我的应用程序的索引页面时，它给了我以下异常：

```
[error] application - 

! @6bh1b1h5g - Internal server error, for request [GET /] ->

play.api.Configuration$$anon$1: Configuration error [Cannot connect to database [mytestdb]]
    at play.api.Configuration$.play$api$Configuration$$configError(Configuration.scala:71) ~[play_2.9.1.jar:2.0.1]
    at play.api.Configuration.reportError(Configuration.scala:258) ~[play_2.9.1.jar:2.0.1]
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:240) ~[play_2.9.1.jar:2.0.1]
    at play.api.db.BoneCPPlugin$$anonfun$onStart$1.apply(DB.scala:231) ~[play_2.9.1.jar:2.0.1]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194) ~[scala-library.jar:0.11.2]
    at scala.collection.TraversableLike$$anonfun$map$1.apply(TraversableLike.scala:194) ~[scala-library.jar:0.11.2] 
```

在来到这个论坛之前，我仔细检查了：

1.  mysql 正在运行。
2.  用户具有足够的权限（通过登录该用户并在 bash 终端内的该数据库上运行一些选择命令）。
3.  我的项目编译成功。

配置文件有一些小的改动：

```
# This is the main configuration file for the application.
# ~~~~~

# Secret key
# ~~~~~
# The secret key is used to secure cryptographics functions.
# If you deploy your application to several instances be sure to use the same key!
application.secret="*********************************"

# The application languages
# ~~~~~
application.langs="en"

# Global object class
# ~~~~~
# Define the Global object class for this application.
# Default to Global in the root package.
# global=Global

# Database configuration
# ~~~~~ 
# You can declare as many datasources as you want.
# By convention, the default datasource is named `default`
#

db.mytestdb.url="mysql://user1:user1@127.0.0.1:3306/mytestdb"
db.mytestdb.driver=com.mysql.jdbc.Driver
db.mytestdb.user="user1"
db.mytestdb.pass="user1"
db.mytestdb.jndiName=mytestdbDS

jpa.default=TESTmytestdb
jpa.TESTmytestdb=TESTmytestdb

# Logger
# ~~~~~
# You can also configure logback (http://logback.qos.ch/), by providing a logger.xml file in the conf directory .

# Root logger:
logger.root=ERROR

# Logger used by the framework:
logger.play=INFO

# Logger provided to your application:
logger.application=DEBUG 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:24:45.853

我认为这是关于您的 URL 检查其他答案并修复它：

[https://stackoverflow.com/a/10007515/1066240](https://stackoverflow.com/a/10007515/1066240)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:12:04.400

您是否尝试过像这样从 url 中删除用户：密码？

```
db.mytestdb.url="jdbc:mysql://localhost:3306/mytestdb"
db.mytestdb.driver=com.mysql.jdbc.Driver
db.mytestdb.user="user1"
db.mytestdb.pass="user1" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T09:00:08.530

这是没有启动的memcached问题。现在我通过启动 memcached 让它工作了。

# xaml - Windows 8 在 XAML 中使用标题菜单和部分标签进行导航

> ID：12235253
> 
> 赞同：2
> 
> 时间：2012-09-02T10:35:32.533
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

如何在 Windows 8 中使用 XAML 制作带有标题菜单和部分标签的导航菜单，如下图所示？

![标题菜单和部分标签](../Images/29015c7e4f6ea02f4db47eda83ed43f5.png)

图片来自：[Metro 风格应用的导航设计](http://msdn.microsoft.com/en-us/library/windows/apps/hh761500.aspx)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:39:30.337

这是不可能的...

**目前（截至发布预览版）没有开箱即用的解决方案或 SDK 提供的用于在 Windows 8 Metro 应用程序中创建标题菜单的控件。在这篇文章中，我将演示一种快速简便的构建方法。**2012 年 7 月 6 日。

我在 RC 中也找不到任何方法，

...但请查看 Karl Ots 提供的最佳解决方案，其中包含可供下载的完整示例代码[如何在 Windows 8 Metro 风格应用程序中创建标题菜单导航](http://fincooper.azurewebsites.net/2012/07/how-to-create-header-menu-windows/)

*只是玩得开心尝试...*

* * *

**更新**

有一个完整的未完成示例（我希望！）在 XAML 和 CS 文件中进行了评论，以供下载： [NavAppWin8（7-zip 格式）](https://skydrive.live.com/?cid=11E37A277FE30BD1&id=11E37A277FE30BD1!113) 这不是我确定的最漂亮的代码，只是希望它有点帮助。

# java - 在 Jsplitpane 中同时显示两个面板和同一侧

> ID：12235254
> 
> 赞同：0
> 
> 时间：2012-09-02T10:35:34.253
> 
> 标签：java, swing, jpanel, jsplitpane

我正在一个项目中工作，我必须绘制包含箭头和节点的图形！我做了一个扩展`JPanel`箭头和节点的类，我做了一个`JSplitPane` 让菜单在左边，图表在右边！当我添加两个面板时，其中一个是可见的。

箭头面板类：

```
public class ArrowPanel extends JPanel{
int barb;
double phi;
double x1;
double y1;
double x2;
double y2;
double xcentre;
double ycentre;
double x3;
double y3;
double x4;
double y4;

public ArrowPanel(double x1,double y1,double x2, double y2 ,double x3,double y3 ,double x4 ,double y4){
    barb = 30;                   // barb length
    phi = Math.PI/6;             // 30 degrees barb angle
    this.x1=x1;
    this.y1=y1;
    this.x2=x2;
    this.y2=y2;
    this.x3=x3;
    this.y3=y3;
    this.x4=x4;
    this.y4=y4;
    this.setVisible(true);
    this.setOpaque(false)   ;     
        this.setLayout(new GridBagLayout());
        System.out.println(" c est marché");} protected void paintComponent(Graphics g){
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D)g;
    Graphics2D g3 = (Graphics2D)g;
    g2.setStroke(new BasicStroke(7));
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                        RenderingHints.VALUE_ANTIALIAS_ON);
    g3.setStroke(new BasicStroke(7));
    g3.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    int w = getWidth();
    int h = getHeight();
    double theta, x, y;
    double a = 0;
        double b = 0;
        xcentre=(x1 + x2)/2 ;
        ycentre=(y1 + y2)/2 ;
        double z3 = x1;
        double k3 = y1;
        k3=a*z3+b;
        a=(y2-y1)/(x2-x1);
        b=y1-a*x1;
        System.out.println( "a="+ a);
    System.out.println( "b="+ b);
    double a1 = -1/a;
    double b1 = ycentre-a1*xcentre;

    g2.setPaint(Color.RED);
    g3.setPaint(Color.RED);
    g3.draw(new Line2D.Double(x3, y3, x4, y4));
    g2.draw(new Line2D.Double(x1, y1, x2, y2));
    theta = Math.atan2(y2 - y1, x2 - x1);
    double theta2=Math.atan2(y4 - y3, x4 - x3);
    drawArrow(g2, theta, x2, y2);
    drawArrow(g3, theta2, x4, y4);
    g2.setPaint(Color.GREEN);
    g2.draw(new Line2D.Double(xcentre - 5, a*(xcentre - 5)+ b, xcentre+5, a*(xcentre+5)+b));
    g2.drawString("rad1", getX(), getY());
    g2.draw(new Line2D.Double(xcentre - 7, a1*(xcentre - 7)+ b1, xcentre+7, a1*(xcentre+7)+b1));
    xcentre=(x3 + x4)/2 ;
    ycentre=(y3 + y4)/2 ;

         z3 = x3;
         k3 = y3;
        k3=a*z3+b;
        a=(y4-y3)/(x4-x3);
        b=y3-a*x3;
        System.out.println( "a="+ a);
    System.out.println( "b="+ b);
    a1 = -1/a;
    b1 = ycentre-a1*xcentre;
    g3.draw(new Line2D.Double(xcentre - 5, a*(xcentre - 5)+ b, xcentre+5, a*(xcentre+5)+b));
    g3.draw(new Line2D.Double(xcentre - 7, a1*(xcentre - 7)+ b1, xcentre+7, a1*(xcentre+7)+b1));
        System.out.println("bahamas");

}
private void drawArrow(Graphics2D g2, double theta, double x0, double y0)
{
    double x = x0 - barb * Math.cos(theta + phi);
    double y = y0 - barb * Math.sin(theta + phi);
    g2.draw(new Line2D.Double(x0, y0, x, y));
    x = x0 - barb * Math.cos(theta - phi);
    y = y0 - barb * Math.sin(theta - phi);
    g2.draw(new Line2D.Double(x0, y0, x, y));
}}` 
```

这是元素类：

```
public class ElementMenu extends JPanel {private static final long serialVersionUID = 1L;private int largeur;
private Color couleur;
private Color couleurActif;
private Color couleurNormal;
private String texte;
private String Ident;
public ElementMenu(String texte,String Ident, Color couleurNormal, Color couleurActif, int taille) {
    this.couleur=couleurNormal;
    this.couleurNormal=couleurNormal;
    this.couleurActif=couleurActif;
    this.texte=texte;
    this.Ident=Ident ;
    largeur=taille;
    this.setSize(new Dimension(largeur, largeur ));
    this.setOpaque(false);
    this.setLayout(new BorderLayout());
    ajouterListener();
}
private void ajouterListener(){
    addMouseListener(new MouseListener() {public void mouseClicked(MouseEvent e) {}

        public void mouseReleased(MouseEvent e) {}

        public void mousePressed(MouseEvent e) {}

        public void mouseExited(MouseEvent e) {
            couleur=couleurNormal;
            repaint();
        }

        public void mouseEntered(MouseEvent e) {
            couleur=couleurActif;
            setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
            repaint();
        }

    });}public void paint(Graphics arg0) {
    super.paint(arg0);
    Graphics2D g2d = (Graphics2D) arg0;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    g2d.setColor(couleur);
    g2d.setStroke(new BasicStroke(3));
    GradientPaint gradient = new GradientPaint(largeur / 2, 4, couleur, (largeur) / 2, 4 + largeur, new Color(255,255,255,200));
    g2d.setPaint(gradient);
    g2d.fillOval(4, 4, largeur, largeur);
    gradient = new GradientPaint(largeur / 2, 4, Color.RED, largeur / 2, 4 + largeur / 2, new Color(couleur.getRed(), couleur.getGreen(), couleur.getBlue(), 0));
    g2d.setPaint(gradient);
    g2d.fillOval(4+largeur/5, 4, 5*largeur/8, largeur/3);
    g2d.setColor(Color.WHITE);
    g2d.setFont(new Font("Calibri", Font.BOLD, 14));
    FontMetrics fm = g2d.getFontMetrics();
    int x = 10;
    int y = (fm.getAscent() + (this.getHeight() -
            (fm.getAscent() + fm.getDescent())) / 2 );
    int x0 = (this.getWidth() - fm.stringWidth(Ident)) / 4 +25;
    int y0 = (fm.getAscent() + (this.getHeight() -
            (fm.getAscent() + fm.getDescent())) / 2 -55);
    g2d.drawString(texte, x+15, y);
    g2d.drawString(Ident, x0, y0);}}` 
```

这是主要的：

```
public static void main(String[] args) {
    Fenetre splitPaneTest1 = new Fenetre();
    splitPaneTest1.setSize(1000,600);
    splitPaneTest1.show();
    List<ElementMenu> items = new ArrayList<ElementMenu>();
    items.add(new ElementMenu("rad1","ACTION", new Color(19, 73, 140), new Color(162, 198, 232), 150));
    items.add(new ElementMenu("rad2","GOAL",new Color(19, 73, 140), new Color(162, 198, 232), 150));
    items.add(new ElementMenu("rad3","KNOWLEDGE", new Color(19, 73, 140), new Color(162, 198, 232), 150));
    splitPaneTest1.getContentPane().add(jSplitPane1, BorderLayout.CENTER);
    jSplitPane1.setOpaque(false);
    jSplitPane1.add(new MenuCirculaire(Color.blue, 800, 600, 200, 150,items),JSplitPane.RIGHT);
    jSplitPane1.add(new ArrowPanel(363.5,335,460.5,168,540,171,635.5,335),JSplitPane.RIGHT);
    jSplitPane1.add(new MenuGauche(),JSplitPane.LEFT);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T10:57:31.550

`JSplitPane`不能这样工作。它只允许一个组件在每个拆分部分中可见。

您将需要创建另一个面板，其中包含*您*的右侧组件。这看起来像：

```
JPanel rightPanel = new JPanel(new GridLayout(2, 1));
rightPanel.add(monMenuCirculaire); 
rightPanel.add(monArrowPanel);
jSplitPane1.add(rightPanel, JSplitPane.RIGHT); 
```

# php - Codeigniter 表单验证总是返回 false

> ID：12235255
> 
> 赞同：2
> 
> 时间：2012-09-02T10:35:35.077
> 
> 标签：php, forms, codeigniter

我在这个上花了很多时间，我想我已经对代码视而不见了。表单验证在运行时总是返回 FALSE，我不知道原因。

new_map() 函数首先显示表单，在提交表单时（当然，在 map_name 字段中设置值），表单验证运行返回 false 并且表单被重置，但是没有显示错误。我错过了什么？？

控制器：

```
public function new_map()
{
    $data['extra_assets']['js'][] = 'app/admin/maps.js';

    $data['title'] = 'Add Map';

    $this->form_validation->set_rules('map_name', 'Map name', 'required');

    if ($this->form_validation->run() == FALSE)
    {  
        $this->load_admin_view('admin/ae_map', $data);
    }
    else
    {
        $this->load->model('maps_model');
        echo 'inside true';exit;
        // Upload map
        if ($this->maps_model->upload_map())
        {
            redirect(site_url('admin/maps'));
        }
    }
} 
```

模型：

```
public function upload_map()
{
    $config['upload_path'] = root_path() . 'space/maps/';
    $config['allowed_types'] = 'gif|jpg|png';
    $this->load->library('upload', $config);

    $map_name = $this->input->post('map_name');

    if ( ! $this->upload->do_upload('map_file'))
    {
        $error = array('error' => $this->upload->display_errors());

        echo $this->upload->display_errors();exit;
        return FALSE;
    }
    else
    {
        $data = array('upload_data' => $this->upload->data());

        // Insert map into database
        $options = array(
                    'm_file' => $data['upload_data']['file_name'],
                    'm_name' => $map_name
                 );
        $this->insert_map($options);

        // Create a thumbnail of this map
        $this->generate_map_thumb($data['upload_data']['file_name']);
    }

    return TRUE;
} 
```

看法：

```
<div class="modalContent" style="width: 300px; height: 250px;">
<h1><?php echo $title; ?></h1>

<?php echo validation_errors(); ?>

<div id="MAP_FORM" class="formListing">
    <?php echo form_open_multipart('admin/new_map'); ?>

    <ul>
        <li>        
            <div><label>File: </label></div>
            <div><span><input type="file" id="MAP_FILE" name="map_file" /></span></div>
        </li>
        <li>      
            <div><label>Name: </label></div>
            <div><span><input type="text" id="MAP_NAME" name="map_name" value="" /></span></div>
        </li>
    </ul>

    <br />
    <input type="submit" value="Submit" id="SUBMIT_MAP" name="submit_map" />

    <?php echo form_close(); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T14:35:18.820

如果我的回答不是很有帮助，我很抱歉，但我还不允许添加评论。

控制器、模型和库之间的相互作用似乎是颠倒的。请记住，正如 Aniket 所说，所有表单验证都应该在控制器中进行。您所有的数据库交互都应该在模型中进行。

IF 语句失败的原因是它没有完成上传，并且它没有这样做，因为您没有告诉受控者甚至尝试上传。

尝试从这个角度重新设计你的控制器。此外，在运行表单验证时，不应定义 == FALSE。有时它会产生问题。只需使用`if (!$this->form_validation->run())`.

# c++ - Visual C++ CRT 调试

> ID：12235258
> 
> 赞同：1
> 
> 时间：2012-09-02T10:36:08.010
> 
> 标签：c++, mfc, msvcrt

当我开始使用[这里](http://msdn.microsoft.com/en-us/library/x98tx3cf%28v=vs.110%29)讨论的调试时，我遇到了一个非常讨厌的链接器错误。

我设法将其缩小到`new ( _NORMAL_BLOCK , __FILE__ , __LINE__ )`构造。一旦使用了新运算符的重载，我就会得到`error LNK2005: "void __cdecl operator delete(void *,int,char const *,int)" (??3@YAXPEAXHPEBDH@Z) already defined in ...`

如果我从链接过程中排除该目标文件，它只会将我指向另一个。我还没有验证这一点，但我很确定他们所有这些与 MFC 冲突的目标文件都使用调试新版本的操作符。

这让我大吃一惊，因为如果你用谷歌搜索这个错误，所有的证据都会告诉你，你以错误的顺序混合了 CRT 和 MFC 的东西，果然，这就是我正在做的事情。

我检查了我所有的目标文件和库，`dumpbin /directives`并确保链接的顺序是正确的，尽管如此，我从未克服过那个错误。

CRT 调试技术是否天生与 MFC 不兼容，或者对此有解释吗？

我对 MFC 不是很了解，我正试图完全摆脱 MFC，但我想让它工作直到发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T05:13:16.877

MFC 应用程序将在调试模式下为您检测内存泄漏。要获取有关泄漏的更多信息，您可以在每个文件的顶部为 DEBUG_NEW 定义 new ，如下所示：

```
#ifdef _DEBUG
#define new DEBUG_NEW
#undef THIS_FILE
static char THIS_FILE[] = __FILE__;
#endif 
```

有关详细信息，请参阅 MSDN 文章[MFC 中的内存泄漏检测](http://msdn.microsoft.com/en-us/library/c99kz476.aspx "MFC 中的内存泄漏检测")

# php - 使用 Twitter API、PHP 发布直接消息

> ID：12235260
> 
> 赞同：2
> 
> 时间：2012-09-02T10:36:11.393
> 
> 标签：php, twitter

这把我逼上墙了！我正在尝试制作一个简单的小 Twitter 应用程序。我已经尝试了一些在旧问题上看到的相关代码（也许代码已经过时了？）

我建立了与 twitter 的连接，使用凭据进行验证 `$connection = new tmhOAuth(array('consumer_key' =>`，等等，并且能够发布这样的推文：

```
$connection->request('POST',
$connection->url('1/statuses/update'),
array('status' => $tweet_text)); 
```

但是当我尝试直接发送消息时，PHP 脚本似乎挂在这个位置：

我试过这样：

```
$connection->post('1/direct_messages/new', array('text' => 'dm text here', 'FROM_TWITTER_NAME' => 'TO_TWITTER_NAME')); 
```

我也试过这个：

```
$method = 'direct_messages/new';
$receiverScrName = "SCREEN_NAME";
$parameters = array('screen_name' => $receiverScrName, 'text' => 'how are you');
$connection->post($method, $parameters); 
```

大写文本是有效的推特名称。这应该是简单的图片，但我要拔掉我的头发！任何帮助将不胜感激！

谢谢，埃迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:55:07.570

您在使用 Abraham Williams 的 PHP OAuth Twitter 库吗？我会推荐马特哈里斯。

要发布推文：

```
$tweet = "This is my tweet"; 

$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $oauth_token, $oauth_token_secret);
$connection->post('statuses/update', array('status' => $tweet)); 
```

要发布直接消息：

```
$msg = "This is my direct message"; 

$connection = new TwitterOAuth(CONSUMER_KEY, CONSUMER_SECRET, $oauth_token, $oauth_token_secret);
$connection->post('direct_messages/new', array('user_id' => $user->id, 'text' => $msg)); 
```

# c# - 带有替换单引号和验证整数的 SQL 注入

> ID：12235262
> 
> 赞同：2
> 
> 时间：2012-09-02T10:36:29.243
> 
> 标签：c#, sql, sql-server, sql-server-2005, sql-injection

> **可能重复：**
> [我可以通过转义单引号并用单引号包围用户输入来防止 SQL 注入吗？](https://stackoverflow.com/questions/139199/can-i-protect-against-sql-injection-by-escaping-single-quote-and-surrounding-use)

我只是想知道，如果我在用户输入中替换 every`'`并验证数字（确保它们是数字，并且不包含任何其他字符），SQL 注入仍然可能吗？如何？`''``string.Replace("'","''")`

我正在使用动态 SQL 查询，使用`SqlCommand`. 像这样的东西：

```
cmd.CommandText = "SELECT * FROM myTable WHERE ID = " + theID.ToString(); 
```

或者

```
cmd.CommandText = "UPDATE myTable SET title='" + title.Replace("'","''") + "' WHERE ID = " + theID.ToString(); 
```

输入整数在 ASP.NET MVC 中自动验证（检查它们是否为实数）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T11:57:56.977

如果这是一个以这种方式编码的遗留项目，那么虽然不是最佳的，但我目前不知道它有任何可能受到 SQL 注入的影响，只要每个字符串都以这种方式处理并且查询很简单正如你所展示的。

然而，我不能说比这更确定了。如果不使用参数化查询，总是有可能存在一些您尚未考虑的漏洞。

自己手动转义引号很容易出错，并且有时会以难以提前预料的方式失败。例如下表

```
CREATE TABLE myTable(title VARCHAR(100))
INSERT INTO myTable VALUES('Foo') 
```

以及使用通过字符串连接构建的动态 SQL 的存储过程

```
CREATE PROC UpdateMyTable
@newtitle NVARCHAR(100)
AS
/*
Double up any single quotes
*/
SET @newtitle = REPLACE(@newtitle, '''','''''')

DECLARE @UpdateStatement VARCHAR(MAX)

SET @UpdateStatement = 'UPDATE myTable SET title='''  + @newtitle + ''''

EXEC(@UpdateStatement) 
```

您可以尝试以下方法

正常更新

```
EXEC UpdateMyTable N'Foo'
SELECT * FROM myTable /*Returns "Foo"*/ 
```

SQL 注入尝试失败

```
EXEC UpdateMyTable N''';DROP TABLE myTable--'
SELECT * FROM myTable  /*Returns "';DROP TABLE myTable--"*/ 
```

SQL 注入尝试成功并删除表

```
EXEC UpdateMyTable N'ʼ;DROP TABLE myTable--'
SELECT * FROM myTable  /*Returns "Invalid object name 'myTable'."*/ 
```

这里的问题是第三个查询通过[U+02BC](http://www.fileformat.info/info/unicode/char/2bc/index.htm)而不是标准的撇号，然后在`varchar(max)`卫生发生后将字符串分配给 a ，这会默默地将其转换为常规撇号。

在我在这里阅读[答案](https://stackoverflow.com/a/139810/73226)之前，我永远不会想到这个问题。

# jquery - 如何删除 jquery-1.7.min.js

> ID：12235263
> 
> 赞同：-4
> 
> 时间：2012-09-02T10:36:30.187
> 
> 标签：jquery

我的项目使用`jquery-1.7.min.js`. 如何使用`jquery-1.7.min.js.`例如我可以用以下代码做什么来替换代码？

```
$(this._divArrContextMenuItem[i]).bind("mouseover", oContextMenuItem, 
                                       AGContextMenuMouseManager.mouseOverHandler);
$(this._divArrContextMenuItem[i]).bind("mouseout", oContextMenuItem,
                                       AGContextMenuMouseManager.mouseOutHandler); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:48:36.300

如果您不再想使用 jQuery，您可以只使用标准的 Javascript 事件侦听器。

假设`this._divArrContextMenuItem[i]`是一个 DOM 元素：

```
 this._divArrContextMenuItem[i].addEventListener('mouseover', AGContextMenuMouseManager.mouseOverHandler);

 this._divArrContextMenuItem[i].addEventListener('mouseout', AGContextMenuMouseManager.mouseOutHandler); 
```

# javascript - new SharedWorker("whatever.js") 返回错误？

> ID：12235264
> 
> 赞同：1
> 
> 时间：2012-09-02T10:36:39.360
> 
> 标签：javascript, web-worker, referenceerror

使用 new Worker("whatever.js") 生成 WebWorker 工作正常，但 new SharedWorker("whatever.js") 返回错误：ReferenceError: SharedWorker is not defined

它出什么问题了？

到目前为止，我只在 Firefox 中尝试过这个，但是我的应用程序必须在所有主要浏览器上运行，所以如果 SharedWorkers 在其他浏览器中正常工作时不能在 Firefox 中工作，它不会帮助我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:58:35.930

它还没有在 Firefox 中实现。 [https://developer.mozilla.org/en-US/docs/DOM/SharedWorker](https://developer.mozilla.org/en-US/docs/DOM/SharedWorker)

支持列表在这里： [http ://caniuse.com/sharedworkers](http://caniuse.com/sharedworkers)

它将在 Firefox v 16.0 和 IE 10 中可用。

Chrome 和 Safari (Webkit) 已经支持它。

# jquery - 在 v1.8 中删除了 $.support.fixedPosition？

> ID：12235265
> 
> 赞同：1
> 
> 时间：2012-09-02T10:36:53.117
> 
> 标签：jquery

jQuery 1.7 引入了`$.support.fixedPosition`，但它在 1.8 中不知何故消失了。我在更改日志中找不到任何内容。任何提示它已被移动，或者是否已被删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:40:54.360

引用[文档](http://api.jquery.com/jQuery.support/)：

> **由于 jQuery 在内部需要这些测试，因此它们必须在*每次*页面加载时执行。尽管下面记录了其中一些属性，但它们不受长期弃用/删除周期的影响，并且一旦内部 jQuery 代码不再需要它们，它们可能会被删除。**
> 
> [...]
> 
> 对于您自己项目的功能检测需求，我们强烈建议使用诸如 Modernizr 之类的外部库，而不是依赖 jQuery.support 中的属性。

似乎它确实在 v1.7.2 和 v1.8.0 之间的某个时间被[删除了。](https://github.com/jquery/jquery/commit/77536f5cb2ab042ac8be40ba59f36d8f3bd7e4d1#diff-2)

# jquery - Jquery click 事件在文档加载时触发

> ID：12235267
> 
> 赞同：2
> 
> 时间：2012-09-02T10:36:59.033
> 
> 标签：jquery, backbone.js

这是我的代码：

```
<!DOCTYPE html>
<html>

  <head></head>

  <body>
    <div id="someElement">
      <button id="someButton">Click Me</button>
    </div>
    <script src="jquery-1.4.4.min.js"></script>
    <script src="underscore-min.js"></script>
    <script src="backbone-min.js"></script>
    <script>
      MyView = Backbone.View.extend({
        events: {
          "click #someButton": "clicked"
        },
        clicked: function (e) {
          e.preventDefault();
          alert("I was clicked!");
        },
        render: function () {
          var html = "generate some HTML, here";
          $(this.el).html(html);
        }
      });

      $(function () {
        var myView = new MyView();
        myView.render();
        $("#someElement").html(myView.el);
      });
    </script>
  </body>

</html> 
```

[http://jsfiddle.net/LfGtu/](http://jsfiddle.net/LfGtu/)

我的问题是：如何等待点击按钮触发点击事件？

（顺便说一句，代码部分来自[http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/](http://lostechies.com/derickbailey/2011/11/09/backbone-js-object-literals-views-events-jquery-and-el/)）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T14:11:24.737

添加 jQuery click 事件的另一种方法是将 render 方法从 jQuery onReady 事件中移出，并移到代码中已经存在的单击处理程序“clicked”中。您只需在创建视图时将“#someElement”作为“el”属性传递。

在这里做了一个快速的 jsBin 演示：http: [//jsbin.com/ugafod/4](http://jsbin.com/ugafod/4)

这种方法似乎更“骨干”，但两种方式都可以正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T10:49:16.860

什么按钮？您的`render`活动更改`#someElement`内容。您的按钮在被点击之前就消失了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T10:40:39.643

您使用了自调用函数。就是这样 - 浏览器将在加载 html 页面的那部分后立即运行该功能。如果你想推迟它，你需要将它与一个动作相关联，例如：

```
$('my div or button or whatever you like').click(function(){
    // Function to run here.
}); 
```

我为你创建了一个[jsFiddle](http://jsfiddle.net/wigster/ha29r/)。这应该是你所追求的。

# python - 字符串索引超出范围错误

> ID：12235270
> 
> 赞同：1
> 
> 时间：2012-09-02T10:38:01.353
> 
> 标签：python, string, indexing

嘿，我不断收到字符串索引超出范围错误...我已经尝试了一切，请您帮忙，非常感谢。

```
x = 0
y = ""
z = 0
user_input = raw_input("Message? ")

while z < len(user_input):
    y = y + " " + user_input[x]
    x = x +3
    z += 1
    if x > len(user_input):
         print y
         break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:42:44.413

你只有在`if x > len(user_input):`. 但万一`x % 3 == 0`呢？

这意味着输入字符串的长度可以被三除。`x`每次增加三，当输入字符串的长度是三的倍数时，你会得到一个错误。

要修复它，您应该改用它`if x >= len(user_input):`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T10:50:53.943

如果 user_input 是 3 的倍数，则 x 最终将等于 user_input 的长度（并且索引将比实际存在的大一）。

```
user_input = "abc" 
```

如果有人用这个回答你的 user_input，那么你的长度将为 3，但索引只会上升到 2 (user_input[0] == "a", user_input[1] == "b", user_input[ 2] == "c"，user_input[3] 抛出 IndexError）。

相反，将您的 if 语句更改为如下所示：

```
while x >= len(user_input): 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T10:48:23.057

也许你的`if`条件应该读`x >= len(user_input)`？（`user_input[x]`存在`x`可能`len(user_input)`会给你带来麻烦）

# c# - SynchronizationContext 和 ASP.NET Web API 扩展点

> ID：12235273
> 
> 赞同：7
> 
> 时间：2012-09-02T10:38:18.730
> 
> 标签：c#, .net, asynchronous, asp.net-web-api, task-parallel-library

当我们处理 ASP.NET Web API 中的一些扩展点时，我们还处理了 TAP（基于任务的编程模式）。在某些时候，我们希望为 async 方法提供一个延续，`ContinueWith`并且我们在传递给的委托中做一些事情`ContinueWith`。

正如 Brad Wilson[在这里](http://bradwilson.typepad.com/blog/2012/04/tpl-and-servers-pt2.html)深入解释的那样，当我们提供延续时，SynchronizationContext 至关重要。对我来说，我需要回到`SynchronizationContext`ASP.NET Web API 的唯一地方是我需要玩的地方`HttpContext.Current`（这是我在 ASP.NET Web API 应用程序中永远不会做的事情）和地方我需要为基于线程的信息设置一些信息，例如`Thread.CurrentPrincipal`.

`SynchronizationContext`所以问题是：当我们在某些扩展点（例如消息处理程序、过滤器、格式化程序等）中提供延续时，我们是否想要回到过去？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:04:51.953

答案几乎总是*肯定*的。

这并不是说您总是要*使用*同步上下文，但是鉴于消息处理程序、过滤器和格式化程序的性质，您无法预测它们是否需要[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.aspx)使用[`HttpContextBase`](http://msdn.microsoft.com/en-us/library/system.web.httpcontextbase.aspx).

即使使用过滤器，您也传递了一些可以访问的东西`HttpContext`（比如通过[`IActionFilter`实现](http://msdn.microsoft.com/en-us/library/system.web.mvc.iactionfilter%28v=vs.98%29.aspx)），`HttpContext`最终将查看[`CallContext`](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.callcontext.aspx)线程上的当前以提供来自该实例的信息。因为当前线程（运行异步时）在您启动时没有该信息，所以`Task`这些调用将失败。

也就是说，如果您需要`HttpContextBase`与请求关联的一般、不受限制的访问，那么您*绝对*必须绕过`SynchronizationContext`才能访问它。

但是，如果可能的话，您应该从您需要的内容中复制详细信息，然后将其*传递**出去*；如果你正在写一些非常笼统的东西，那么这是不可能的。`HttpContextBase`

# javascript - Javascript 以特定 div 为目标向用户报告错误

> ID：12235275
> 
> 赞同：0
> 
> 时间：2012-09-02T10:38:29.473
> 
> 标签：javascript, css, onkeypress

我有几个输入字段应该只有数字作为有效输入，所以在搜索 SO 之后，我得到了以下 js 代码，只允许将数字输入到运行良好的文本字段中。

```
function onlyNumbers(evt) {
    var theEvent = evt || window.event;
    var key = theEvent.keyCode || theEvent.which;
    key = String.fromCharCode( key );
    var regex = /[0-9]|\./;
    if( !regex.test(key) ) {
        theEvent.returnValue = false;
        if(theEvent.preventDefault) theEvent.preventDefault();

        // the corresponding span to make it visible here
        // What code to put here ?

    }
} 
```

对应的html是

```
<input type="text" id="age1" onkeypress="onlyNumbers(event)" />
<input type="text" id="mobileNo" onkeypress="onlyNumbers(event)" /> 
```

现在，我在每个这样的输入文本之后都有一个隐藏的`span`，我想在输入无效字符后立即显示？因为这样的领域很多

例如age1、age2、mobileNo，每个人都有自己的兄弟跨度。因此，当 age1 输入错误时，应显示相应的错误消息范围。

这是供参考的最小完整html代码

```
<form method="POST" action="action.php">
    ...
<li>Age of person 1 :
    <input type="text" id="age1" onkeypress="onlyNumbers(event)" />
    <span class="error_msg age1"> Only numbers please </span> 
</li>
<li>Age of person 2 :
    <input type="text" id="age2" onkeypress="onlyNumbers(event)" />
    <span class="error_msg age2"> Only numbers please </span> 
</li>
<li>
    <input type="text" id="mobileNo" onkeypress="onlyNumbers(event)" />
    <span class="error_msg mobileNo"> Only numbers please </span> 
</li>
...
</form> 
```

如何获取`onlyNumbers()`调用函数的元素的引用？以及如何使相应的跨度可见？有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:50:31.007

```
 var fld = theEvent.target || theEvent.srcElement; 
```

在这里您可以访问 ID 或兄弟节点

如果您改为或同时通过（this），您将拥有自己的领域

# android - android - 异步任务、进度条和 I/O

> ID：12235277
> 
> 赞同：2
> 
> 时间：2012-09-02T10:38:48.790
> 
> 标签：android, io, android-asynctask, ping, android-progressbar

我很抱歉发布与我之前的问题类似的问题，但我无法弄清楚这一点。

我一直在使用我在[这里](https://stackoverflow.com/questions/9062182/android-icmp-ping)找到的简单“ping”示例，只是想添加 ProgressBar，但没有运气。我真的不明白发生了什么事。

所以，这很好用：

```
 protected void onPreExecute() {
    sb = new StringBuilder();
    mPOut = new PipedOutputStream();
    try {
        mPIn = new PipedInputStream(mPOut);
        mReader = new LineNumberReader(new InputStreamReader(mPIn));
    } catch (IOException e) {
        cancel(true);
    }
    //myBar.setVisibility(View.VISIBLE); -> PROBLEM!!!
}

protected Object doInBackground(Object... arg0) {
    try {
        process = Runtime.getRuntime().exec("ping -c 4 " + ipadd);
        InputStream in = process.getInputStream();
        OutputStream out = process.getOutputStream();
        byte[] buffer = new byte[1024];
        int count;
        while ((count = in.read(buffer)) != -1) {
            mPOut.write(buffer, 0, count);
            String bs= new String(buffer);
            publishProgress(); 
        }
        in.close();
        out.close();
        mPOut.close();
        mPIn.close();
    } catch (IOException e) {
    }
    return null;
}

protected void onPostExecute(Object result) {
            myBar.setVisibility(View.INVISIBLE);
            tv.setText(sb);
            System.out.println(sb);
} 
```

我从 ping 得到输出，myBar 显然没有显示，因为它首先是不可见的。

如果我从我标记为问题的行中删除注释（将进度条可见性设置为可见），我根本不会从 ping 中得到任何输出。我似乎以某种方式弄乱了我的 I/O 或其他东西。ProgressBar 在最后显示和隐藏，但没有输出。

我真的无法弄清楚这一点，所以如果您有任何想法，我将非常感谢您的帮助。

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:51:17.657

尝试在 OnPreExecute() 方法中以编程方式创建 ProgressDialog，并在 onPostExecute() 中的任务完成后将其关闭。这是一个代码：

```
add to onPreExcute:
    super.onPreExecute();
    ProgressDialog pDialog = new ProgressDialog(YourActivity.this);
        pDialog.setMessage("Please wait...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(false);
        pDialog.show();

add to onPostExecute:
   pDialog.dismiss(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T14:32:22.817

您是否覆盖了**onProgressUpdate**？如果没有像下面那样覆盖 onProgressUpdate 并在此方法中更新您想要的任何进度条/文本视图。

```
@Override
protected void onProgressUpdate(String... values) {
    //update your progressbar here
someView.setText(values[0]);    
} 
```

从您的代码可见您已调用 publishProgress 但您没有传递任何值。只需传递您检索的值**bs**，如下所示：

```
publishProgress(bs); 
```

**并用bs**的 balue 更新进度条

# android - Android ListAdapter 与 onClickListner 使用 Array HashMap

> ID：12235285
> 
> 赞同：0
> 
> 时间：2012-09-02T10:39:54.777
> 
> 标签：android, listview, hashmap

我正在考虑`ListView`使用`HashMap`数组创建一个。但是我一直找不到任何使用`HashMap`数组的示例，我理解使用的概念，`ListViews`但我似乎无法使用`HashMap`数组来合并它。有谁知道他们可以指点我的任何例子，有几个关于 SO 的例子，人们只使用 a`HashMap`但没有使用类型数组。

非常感谢您的帮助，这让我连续两个星期都发疯了。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.deals);

    ds = new DealsSQL(DealsUI.this);
    dm = new DealsManage(DealsUI.this);

    //new LoadDeals().execute();

    ArrayList<HashMap<String, String>> inboxList new ArrayList<HashMap<String, String>>();

        ListView listView = (ListView) findViewById(android.R.id.list);
        listView.setAdapter(new HashMapAdapter(inboxList));
        listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {

            }
        });
}

public class HashMapAdapter extends BaseAdapter {

    private ArrayList<HashMap<String, String>> mData = new ArrayList<HashMap<String, String>>();
    private String[] mKeys;
    public HashMapAdapter(ArrayList<HashMap<String, String>> inboxList){
        mData  = inboxList;
        mKeys = mData.keySet().toArray(new String[inboxList.size()]);

    }

    public int getCount() {
        return mData.size();
    }

    public Object getItem(int position) {
        return mData.get(mKeys[position]);
    }

    public long getItemId(int arg0) {
        return arg0;
    }

    public View getView(int pos, View convertView, ViewGroup parent) {
        String key = mKeys[pos];
        String Value = getItem(pos).toString();

        //do your view stuff here

        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:42:07.760

您现在正在做的是在每个列表项上检索一个 HashMap。我假设（根据您的代码）您想要做的是，在您的每一行中`ListView`，获取并显示您的`HashMap<String,String>`. 也就是说，这是一个例子。

用of创建 a`ListView`与其他任何. 在您的-method 中，使用和方法获取当前项目。然后，像往常一样构建您的视图。`ArrayList``HashMap<?,?>``ArrayList``getView(...)``int pos``getItem(int pos)`

有关 ViewHolder 模式（和 convertView）的更多信息，请查看[http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder](http://www.vogella.com/articles/AndroidListView/article.html#adapterperformance_hoder)。

例子：

```
...

/**
 * Return the HashMap that is stored in your ArrayList at position, instead
 * of just the value.
 */
public HashMap<String, String> getItem(int position) {
    return mData.get(position);
}

...

public View getView(int pos, View convertView, ViewGroup parent) {

    HashMap<String, String> item = getItem(pos);
    ViewHolder holder;        

    if(convertView == null) {
        // ConvertView is re-used by ListView. That means we don't have to re-inflate
        // it on every row. Instead, if convertView is already set we just reuse it.
        // To prevent having to call .findViewById( id ) every time, we use the pattern
        // called the `ViewHolder`-pattern.
        convertView = LayoutInflater.from(mContext).inflate(R.layout.list_item);

        holder = new ViewHolder();
        holder.textview1 = convertView.findViewById(R.id.textview1);

        convertView.setTag(holder);

    } else {
        holder = convertView.getTag();
    }

    // now, we have both a populated convertView and a reference to it's individual subviews
    // in the form of holder.

    // manipulate the views in your listitem here
    // I assume you want to display the contents of the HashMap<String,String> here
    // so convert the HashMap to something iterable, like EntrySet
    for(Map.Entry<String, String> entry : map.entrySet()) {
            String key = entry.getKey();
            String value = entry.getValue();
            // notice how we set the TextView attributes by accessing holder.textview1
            holder.textview1.setText( key + " => " + value + "\n");
    }

    return convertView;
}

private class ViewHolder {
    public TextView textview1;
} 
```

.

## 笔记：

如果您只想为每个 HashMap 条目显示一个列表项，我认为最好的办法是将其转换为一个数组，`hashmap.entrySet().toArray()`并在构造函数中将该数组提供给您的 HashMapAdapter，这将为您提供`Map.Entry`一个`mDataset`. 在您的- 方法中，您`getView(...)`无需遍历数据项，而是使用`item.getKey()`and `item.getValue()`。此外，您的`getItem(position)`-method 必须返回 type`Map.Entry`而不是`HashMap<String, String>`.

# c++ - Google 协议缓冲区，如何设置自定义类型的字段？

> ID：12235287
> 
> 赞同：1
> 
> 时间：2012-09-02T10:40:13.717
> 
> 标签：c++, protocol-buffers

我有这样的原型文件：

```
message Control {

    message KeyStatus {
        required bool keyUp = 1;
        required bool keyDown = 2;
        required bool keyLeft = 3;
        required bool keyRight = 4;
    }

    message MouseClick {
        required double x = 1;
        required double y = 2;
        optional bool buttonRight = 3;
    }

    required KeyStatus keyStatus = 1;
    required double angle = 2;
    optional MouseClick mouseClick = 3;
} 
```

在生成的代码中没有方法`set_keystatus`或`set_mouseclick`只有`set_angle`. 那我该如何设置keystatus呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:53:41.557

你读过[文档](https://developers.google.com/protocol-buffers/docs/reference/cpp-generated#fields)吗？例如，尝试该`mutable_keystatus()`方法。

# java - 通过 HTTPConnection 下载大文件 - JAVA Applet

> ID：12235292
> 
> 赞同：2
> 
> 时间：2012-09-02T10:41:02.923
> 
> 标签：java, http, applet, download

这可能是一个经常被问到的问题，但我还没有找到正确的答案。

好吧，我有以下代码：

```
java.net.URL url = new java.net.URL(built);
java.net.HttpURLConnection con = (HttpURLConnection)url.openConnection();

if (con.getResponseCode() != 200) {
    // error handle here!;
    continue;
}

// begin to download the file
int file_size = con.getContentLength();

FileOutputStream stream = new FileOutputStream(m_WorkingDir + "/" + getFilenameWithPath(i));
InputStream remoteStream = con.getInputStream();

int chunks = (int) Math.ceil((float)file_size / (float)CHUNK_SIZE);

// download each chunk
byte[] temp = new byte[CHUNK_SIZE];
for(int a = 0; a < chunks; a++) {
    // calculate chunk size
    int chunk_size = CHUNK_SIZE;

    if(a == chunks-1) {
        // last chunk
        chunk_size = file_size - a * CHUNK_SIZE;
        System.out.println("Download last chunk : " + chunk_size);
    }

    // download chunk
    int bytes = remoteStream.read(temp, 0, chunk_size);
    stream.write(temp, 0 ,chunk_size); // save to local filesystem
}

stream.close();
remoteStream.close();
con.disconnect(); 
```

这段代码“应该”简单地下载分块的文件..但关键是它没有正确执行。我调试了代码，结果发现它最多可以正确读取 10 个块，但是即使它不是最后一个块，它也会读取到 chunk_size 的一半，然后它返回 -1 直到 for(int a...)已完成。

对我来说，InputStream 似乎认为它是 EOF，即使它不是！是的，我通过普通浏览器测试了 HTTP 连接，它工作正常。

它使用 CHUNK_SIZE 的多个设置测试了代码，但结果始终相同。

我要下载的文件大约是 10~Mbyte ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:01:15.307

您假设程序正在下载整个块大小，但情况可能并非如此，因为 java 说：-

> 尝试读取尽可能多的 len(CHUNK_SIZE) 字节，但可能会读取较小的数字，可能为零。

这可能有效：-

```
byte[] temp = new byte[CHUNK_SIZE];
int bytes = 0;
for(int a = 0; a < chunks; a++) {
    bytes =remoteStream.read(temp, 0, CHUNK_SIZE);
    if(bytes == -1) {
      System.out.println("Downloaded last chunk : Terminating ");
      break;
    }
    stream.write(temp, 0 ,bytes);
} 
```

# ios - 在 NSString 中查找俄语字符

> ID：12235294
> 
> 赞同：6
> 
> 时间：2012-09-02T10:41:27.603
> 
> 标签：ios, objective-c, string, nsstring, string-matching

我必须检查 a 中是否存在俄罗斯字符`NSString`。

我为此使用以下代码：

```
NSCharacterSet * set = 
 [[NSCharacterSet characterSetWithCharactersInString:@"БГДЁЖИЙЛПФХЦЧШЩЪЫЭЮЯ"] 
   invertedSet];

BOOL check =  ([nameValue rangeOfCharacterFromSet:set].location == NSNotFound); 

return check; 
```

但它总是在回来`FALSE`。

谁能告诉我我的代码有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T13:34:42.170

我使用`dasblinkenlight`了 's answer，但我包含了完整的俄语字母，包括小写字符：

```
@interface NSString (Russian)
- (BOOL)hasRussianCharacters;
@end
@implementation NSString (Russian)
- (BOOL)hasRussianCharacters{
    NSCharacterSet * set = [NSCharacterSet characterSetWithCharactersInString:@"абвгдеёжзийклмнопрстуфхцчшщъыьэюяАБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ"];
    return [self rangeOfCharacterFromSet:set].location != NSNotFound;
}
@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T11:16:05.253

目前，您的条件检查字符串中是否存在非俄语（技术上是非西里尔文）字符，而不是字符串中是否存在西里尔文字符。您的代码将仅返回完全由西里尔字符组成的字符串，这些字符在拉丁字母¹`YES`中没有等效字符。

要解决此问题，请删除反转，然后反转检查，如下所示：

```
NSCharacterSet * set = [NSCharacterSet characterSetWithCharactersInString:@"БГДЁЖИЙЛПФХЦЧШЩЪЫЬЭЮЯ"];

return [nameValue rangeOfCharacterFromSet:set].location != NSNotFound; 
```

* * *

¹您忘记`Ь`在列表中包含软停止，它看起来像一个小写字母`b`，但它不是同一个字符。

# php - 使用相同的 PHPUnit 测试用例测试多个类

> ID：12235298
> 
> 赞同：3
> 
> 时间：2012-09-02T10:42:04.680
> 
> 标签：php, unit-testing, phpunit

我有非常简单的 php 界面：

```
interface HasFormattableNumber {
    function setNumber();
    function setFormat();
    function formatNumber();
} 
```

接下来，我有许多实现这个接口的类。不幸的是，这些类不能有一个共同的祖先（可能是一个只实现这些方法一次的抽象类）。该类基本上如下所示：

```
class A implements HasFormattableNumber {
    private $_number;
    private $_format;

    public function setNumber($n) {
        $this->_number = $n;
    }
    public function setFormat($f) {
        $this->_format = $f;
    }
    public function formatNumber() {
        return sprintf($this->_format, $this->_number);
    }
} 
```

单元测试看起来像这样：

```
class ATest extends \PHPUnit_Framework_TestCase {
    public function testShouldFormatNumber() {
        $a = new A();
        $a->setNumber(123);
        $a->setFormat("xx-%d");
        $this->assertEquals("xx-123", $a->formatNumber());
    }
} 
```

是否有可能以某种方式为所有接口实现重用这个测试用例？我知道我可以将 testShouldFormatNumber() 复制并粘贴到我的所有单元测试中，但如果可能的话，我更喜欢将它保存在一个地方。

php Traits 会以任何方式提供帮助吗？（但是，我还没有使用 php 5.4）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T10:53:53.927

您可以制作一个看起来像您的 ATest 的基本测试，只是您没有在其中初始化类 A，而是使用您将在所有实现中定义的类变量。您将文件放在一个目录中或使用一个名称，这样 PHPUnit 就不会运行它。然后在您的测试中，您可以从它继承并将对象创建为 setUp() 中的类变量。

# php - 在站点级别定义 cakephp inputDefaults 的方法

> ID：12235301
> 
> 赞同：11
> 
> 时间：2012-09-02T10:42:36.267
> 
> 标签：php, cakephp, cakephp-2.0

有没有办法`options['inputDefaults']`在站点级别定义而不是在每个表单中定义

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T16:02:13.947

**TLDR：**

将下面的 2 块代码粘贴到各自的位置，然后将`$defaultOptions`数组更改为您想要的任何内容 - 瞧。它不会改变 FormHelper 的任何功能，除了将默认值添加到`Form->create`'s`inputDefaults`中。

**说明&代码：**

您可以通过自定义来扩展 FormHelper（比听起来容易）`MyFormHelper`：

```
<?php
//create this file called 'MyFormHelper.php' in your View/Helper folder
App::uses('FormHelper', 'View/Helper');
class MyFormHelper extends FormHelper {

    public function create($model = null, $options = array()) {
        $defaultOptions = array(
            'inputDefaults' => array(
                'div' => false,
                'label' => false
            )
        );      

        if(!empty($options['inputDefaults'])) {
            $options = array_merge($defaultOptions['inputDefaults'], $options['inputDefaults']);
        } else {
            $options = array_merge($defaultOptions, $options);
        }
        return parent::create($model, $options);
    }
} 
```

然后，在您的 AppController 中，按以下方式包含 Form 帮助程序（如果您已经有一个 $helpers 变量，只需添加`'Form' => ...`它）：

```
public $helpers = array(
    'Form' => array(
        'className' => 'MyForm'
    )
); 
```

这使得每当您调用时`$this->Form`，它实际上都会调用您的自定义“MyFormHelper”——它唯一要做的就是设置`inputDefaults`它们是否未指定，然后继续执行在 Cake 的 FormHelper 中找到的正常逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T03:59:53.190

这真的很棒——我确实改变了一点，所以你使用 Hash::merge，而不是数组合并来将它保存到 Cake Api。此外，我将我的命名为“AppFormHelper”——但这只是我自己的命名：命名助手非常松散。谢谢你的提示！

哈希类：[http ://book.cakephp.org/2.0/en/core-utility-libraries/hash.html](http://book.cakephp.org/2.0/en/core-utility-libraries/hash.html)

```
<?php
/**
 * @file AppFormHelper.
 *  This allows you to create defaults for your forms.
 */
App::uses('FormHelper', 'View/Helper');

class AppFormHelper extends FormHelper {

  public function create($model = null, $options = array()) {
    $default = array(
      'inputDefaults' => array(
        'div' => false,
        'class' => 'form-control',
        'autocomplete' => 'off',
      ),
    );
    $options = Hash::merge($default, $options);
    return parent::create($model, $options);
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-27T05:02:17.523

我可以补充一下，上面 Dave 的代码有一个错误。该行：

```
$options = array_merge($defaultOptions['inputDefaults'], $options['inputDefaults']); 
```

当在扩展的 FormHelper 以及表单本身中都指定了 inputDefaults 时，会导致“注意 (8)：数组到字符串的转换 [CORE/Cake/View/Helper.php，第 486 行]”。

kirikintha 的版本中不存在此错误。

# sql - 用于删除所有外键约束和唯一约束的 TSql 脚本？

> ID：12235305
> 
> 赞同：0
> 
> 时间：2012-09-02T10:43:07.123
> 
> 标签：sql, sql-server-2008, tsql

是否有任何 TSQL 脚本用于删除**SQLServer 2008 数据库中的**所有外键约束和唯一约束？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:23:22.170

您可以将系统表用于您的目的：

1.  `sys.foreign_keys`
2.  `sys.key_constraints`
3.  `sys.check_constraints`
4.  `sys.default_constraints`

上面的系统表在您的数据库上具有所有外键、约束和默认列表。

您可以为删除数据库的所有上述对象编写游标。你的光标必须像下面的查询：

```
DECLARE @Name NVARCHAR(250),
        @Command NVARCHAR(1000)

DECLARE cCons CURSOR for
SELECT name 
FROM sys.check_constraints

OPEN cCons
FETCH NEXT FROM cCons INTO @Name
WHILE @@Fetch_Status=0 BEGIN
    SET @Command = 'DROP CONTRACT '+ @Name
    EXEC(@Command)
    FETCH NEXT FROM cCons INTO @Name
End
CLOSE cCons
DEALLOCATE cCons 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:01:42.093

使用以下命令生成脚本。将生成的脚本复制并粘贴到新的查询窗口以删除所有 Fk 和 Unique 约束。

从 INFORMATION_SCHEMA.TABLE_CONSTRAINTS 中选择 'ALTER TABLE' + table_name + 'DROP CONSTRAINT' + CONSTRAINT_NAME 其中 CONSTRAINT_TYPE in ('unique','FOREIGN KEY')

# php - 如何在拍卖广告中添加倒计时？

> ID：12235309
> 
> 赞同：-1
> 
> 时间：2012-09-02T10:43:32.080
> 
> 标签：php, javascript, jquery

> **可能重复：**
> [倒计时到特定日期](https://stackoverflow.com/questions/8567241/countdown-to-a-specific-date)

我们如何添加从广告发布日开始到过期日期结束的 Jquery 反向时间倒计时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:03:51.307

看看这个问题：[倒计时到特定日期](https://stackoverflow.com/questions/8567241/countdown-to-a-specific-date)

或者试试这个插件：[Countdown](http://zackperdue.com/plugins/jquery-countdown-timer) , [**Demo**](http://comingsoon.thisisepic.com/)

# android - 在接收短信时创建警报对话框

> ID：12235310
> 
> 赞同：0
> 
> 时间：2012-09-02T10:43:33.060
> 
> 标签：android, sms, android-alertdialog

我正在为 android 创建一个应用程序，它使用“way2sms.com”、“fullonsms.com”等网关发送短信，我已成功从这些网关发送消息，现在我想采取另一个步骤，即“SMS DELIVERY REPORT”。我对如何做到这一点有一个基本的想法。当我将短信发送到用户选择的号码之后，我将向用户发送一条短信，其中包含一些格式化文本，例如“SMSDELIVERYREPORT”。我想要做的是，当用户收到此类消息而不是我们收到正常短信时收到的正常通知时，应用程序会创建一个警报对话框，显示“消息已成功传递”。请指导我完成这项任务。以及如何确保此消息不会进入用户的正常消息收件箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:51:17.617

当我创建类似的东西时，我使用[了本教程！](http://www.apriorit.com/our-company/dev-blog/227-handle-sms-on-android)

只需跳转到处理收到的短信！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:52:24.127

此代码将涵盖您发送 SMS 的所有可能情况。

```
private void sendSMS(String phoneNumber, String message)
{        
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

    //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    }, new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);        
} 
```

这是一个[很棒的教程](http://mobiforge.com/developing/story/sms-messaging-android)！

# ios - 将 vcxproj 转换为 xcodeproj

> ID：12235311
> 
> 赞同：3
> 
> 时间：2012-09-02T10:43:55.243
> 
> 标签：ios, xcode, file-conversion

无论如何/工具可以直接将 Visual Studio`vcxproj`文件转换为`xcodeproj`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T10:54:50.317

如果我错了，或者完全关闭，请原谅我，但我认为即使使用 VC++ 编译不是 100% 依赖于平台，如果不移植实际源代码，将其移至 Apple IDE 可能是不可行的。我认为没有任何自动化工具可以做到这一点。

# c++ - 如何在 MFC 中更改进度条的颜色

> ID：12235314
> 
> 赞同：1
> 
> 时间：2012-09-02T10:46:15.993
> 
> 标签：c++, mfc, progress-bar

进度条的默认颜色是蓝色（可能），如何改变进度条的颜色？甚至改变mfc控件的bkcolor

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T10:54:46.440

假设您正在使用`CProgressCtrl`named `progressBarCtrl`，请尝试：

```
COLORREF clrBar = RGB(0, 0, 0); // the bar color
progressBarCtrl.SendMessage(PBM_SETBARCOLOR, 0, (LPARAM) clrBar); 
```

背景：

```
COLORREF clrBg = RGB(255, 255, 255); // the background color
progressBarCtrl.SendMessage(PBM_SETBKCOLOR, 0, (LPARAM) clrBg); 
```

[PMB_SETBARCOLOR](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760838.aspx)和[PBM_SETBKCOLOR](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760840.aspx)是用于更改进度条控件颜色设置的 Windows 消息。

顺便说一句，有一种方法可以用于背景颜色[`SetBkColor`](http://msdn.microsoft.com/en-us/library/c4syt4ss.aspx)。`CProgressCtrl`

# git - 可以发送多个拉取请求来拉取 github 提交吗 ？

> ID：12235318
> 
> 赞同：2
> 
> 时间：2012-09-02T10:46:31.523
> 
> 标签：git, github

我分叉了一个项目，编辑了一些文件并向主项目的主人发送了一个拉取请求，并编辑了其他内容并再次发送了一个请求。

但是，对于第三次编辑和提交，发送请求时，消息说：

> 哎呀！已经有`<myname>:master` 尝试其他分支的拉取请求或查看拉取请求？

所以我们可以发送拉取请求两次但不能发送三次？我认为 git 的想法是我们可以增量修复和提交，并为每个修复和提交发送拉取请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:00:58.120

您不会针对特定提交发送拉取请求，而是针对分支发送拉取请求……这就是为什么它在拉取请求页面顶部显示如下内容的原因：

```
 rvanlieshout wants to merge 2 commits into maccman:master  from rvanlieshout:master 
```

此外，如果您对分支进行提交，它们将被添加到拉取请求中。如果您[在 rails/rails 上查看像这样](https://github.com/rails/rails/pull/3023)的大型项目的拉取请求，您会很好地看到这一点。有一堆行说“添加了/一些提交”。

如果要打开多个拉取请求，则必须使用不同的功能分支来执行此操作。

# java - Spring MVC：如何在 Javascript 中访问 modelAndView XML 对象？

> ID：12235319
> 
> 赞同：1
> 
> 时间：2012-09-02T10:46:42.513
> 
> 标签：java, javascript, spring, spring-mvc

我有一个包含 XML 的字符串变量。我使用 modelAndView.addObject(...) 将它添加到我的模型中。现在，我怎样才能在 Javascript 中访问这个对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:39:48.510

假设在你的控制器中你做了类似的事情

`modelAndView.addObject("someValue", someValue)`.

在您的 JSP 中，您可以这样做：

```
<script type="text/javascript">
    var someValue = "${someValue}";
</script> 
```

然后你可以在你的 JS 中使用这个变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:51:50.317

*假设您要访问 Model 属性*
使用 `<c:set>`like

```
<c:set var="myData" value="${myObject.data}" /> 
```

然后你可以在 js 中使用这个 var 使用`${myData}`.
例如在 jQuery 选择器中

```
<script>
    $("#${myData}").val('foo');
</script> 
```

# javascript - 仅在 highcharts 中每 x 步显示标签

> ID：12235322
> 
> 赞同：5
> 
> 时间：2012-09-02T10:47:21.030
> 
> 标签：javascript, charts, highcharts

我有[这个 HighCharts 图表](http://jsfiddle.net/bBahp/1/)，它在 x 轴上有 50 多个值。这对很多人来说都是如此，我只想每 x 步显示一个值。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T10:52:40.103

通过添加更改以下代码`minTickInterval`

```
xAxis: {
    categories: myArray,
    minTickInterval: 5                        
}, 
```

[提琴手](http://jsfiddle.net/bBahp/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T21:38:49.053

xAxis：{类别：myArray，tickInterval：5}

如果缩放太多，minTickInterval 只会阻止显示较小的单位

# java - java通过UDP读取文件

> ID：12235333
> 
> 赞同：0
> 
> 时间：2012-09-02T10:48:56.653
> 
> 标签：java, udpclient

我有一个 UDP 服务器读取图像，包括 UDP 和 TCP。协议格式为：length ID payload

当我尝试读取有效负载或图像本身时，我可以使用 FLAG 来完成，但这是不可取的。如何停止在 UDP 中读取文件（或知道何时没有更多数据）并写入文件？注释代码，但使用 FLAG，我不想使用 FLAG，因为其他客户端可能会连接并且只会传输原始图像文件。

谢谢

```
while (true) {
       socket.receive(receivePacket);
      /* 
       if (receivePacket.getLength() <= 8) {
           cmd = new String(receivePacket.getData(), 0,receivePacket.getLength());
           if (cmd.equals("END_FILE")) {
               System.out.println("UDP ServerThread() Command: " +  cmd);
               break;
           }
       }*/

       fos.write(receivePacket.getData(), 0, receivePacket.getLength());
   } 
```

# c++ - Xcode 在 C++ 中访问资源

> ID：12235363
> 
> 赞同：1
> 
> 时间：2012-09-02T10:54:14.990
> 
> 标签：c++, xcode, macos, sdl

我一直在将我的简单引擎移植到 OSX。它用 C++ 编写并使用 SDL 和 SDL_image。

如果我将图像放在最终的 .app 文件旁边，它可以正常工作，但是如果我将图像构建到 .app 内的资源文件夹中，它将无法工作。我收到一条错误消息，说它无法打开图像。

所以我的问题是，如果您的 .app 中有图像资源，如何在 C++ 中访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T19:06:08.687

出于某种原因，Mac 版本的 SDL 将工作目录设置为包含应用程序包的目录，而不是应用程序包的 Resources 文件夹。将工作目录更改为 Resources 文件夹。打开 SDLMain.m 文件并修改 setupWorkingDirectory: 方法，以便将工作目录设置为 Resources 文件夹。以下代码应该可以工作：

```
NSString *resourcePath = [[NSBundle mainBundle] resourcePath];
[[NSFileManager defaultManager] changeCurrentDirectoryPath:resourcePath]; 
```

# iphone - iOS - UIProgressView 只更新一次

> ID：12235365
> 
> 赞同：3
> 
> 时间：2012-09-02T10:54:29.943
> 
> 标签：iphone, ios, cocoa-touch, uiprogressview

我正在从 API 加载数据，并使用 UIProgressView 来显示加载了多少。

在我的 viewWillAppear 中，我使用 Reachability 来检查是否有 Internet 连接。然后，如果有，则在函数中调用以下行 10 次。

```
[self performSelectorInBackground:@selector(updateProgress) withObject:nil]; 
```

然后运行此方法

```
-(void)updateProgress {
    float currentProgress = myProgressBar.progress;
    NSLog(@"%0.2f", currentProgress);
    [loadingProg setProgress:currentProgress+0.1 animated:YES];
} 
```

浮点数以 0.1 递增，加载视图显示这一点。

当视图被关闭（它是一个模态视图）然后被调用时，该方法运行并且 NSLog 显示 currentProgress 正在递增。但是，进度条仍然是空的。有谁知道这可能是什么原因？

作为参考，我使用的是 ARC。

更新：

这就是我调用 API 的方式

```
NSString *urlString = **url**;
NSURL *JSONURL = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:JSONURL
                        cachePolicy:NSURLRequestReloadIgnoringCacheData 
                        timeoutInterval:10];
if(connectionInProgress) {
    [connectionInProgress cancel];
}
connectionInProgress = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

//This is where I call the update to the progress view 
```

我有这些功能：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    JSONData = [NSMutableData data];
    [JSONData setLength:0];
}

 - (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [JSONData appendData:data];
}

-(void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    //add data to mutable array and other things
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T11:00:53.743

当您处理用户界面 (UI) 组件时，您必须在主线程中执行这些方法。通常，当您编程时，您需要在主线程中设置 UI 操作，并在后台线程中设置繁重、复杂且对性能要求更高的操作 - 这称为多线程（作为附带建议，最好阅读 GCD - Grand Central Dispatch。如果您需要执行更长的操作，[请查看 Ray Wenderlich 的这篇好教程](http://www.raywenderlich.com/4295/multithreading-and-grand-central-dispatch-on-ios-for-beginners-tutorial)。）

为了解决这个问题，您应该调用`[self performSelectorOnMainThread:@selector(updateProgress) withObject:nil];`，然后在该方法中执行以下操作：

```
-(void)updateProgress {
    float currentProgress = myProgressBar.progress;
    NSLog(@"%0.2f", currentProgress);
    dispatch_async(dispatch_get_main_queue(), ^{
    [loadingProg setProgress:currentProgress+0.1 animated:YES];
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:01:50.117

UI 刷新需要在主线程上进行。改变

```
[self performSelectorInBackground:@selector(updateProgress) withObject:nil]; 
```

到

```
[self performSelectorOnMainThread:@selector(updateProgress) withObject:nil waitUntilDone:NO]; 
```

# jquery - jQuery 平滑滚动在 iPad 和 iPhone 上不起作用

> ID：12235366
> 
> 赞同：0
> 
> 时间：2012-09-02T10:54:33.663
> 
> 标签：jquery, iphone, ios, ipad

我使用了 jquery 平滑滚动效果，没什么花哨的……只是 jQuery……它似乎不适用于 iPad 或 iPhone 或任何其他平板电脑……网址在这里：[http ://teothemes.com/wp/viewpoint /](http://teothemes.com/wp/viewpoint/)

这是我用于 jquery 平滑滚动的代码：

```
jQuery(document).ready(function() {
jQuery("a[href*=#]").on('click', function() {
  if(parseInt(jQuery(this.hash).offset().top) !== parseInt(jQuery(window).scrollTop()))
    jQuery('html,body').animate({scrollTop:jQuery(this.hash).offset().top}, 1500);
}); 
```

});

如果有人有任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T14:07:30.193

我读过这是一个 iOS 6.1 问题，它似乎没有在 iOS 7 的最早版本中得到修复。实际上并没有一个可靠且简单的解决方案，所以作为一种解决方法，我在使用[Gentle Anchors](http://www.angelwatt.com/coding/gentle_anchors.php)时检测到 iPhone 和 iPod，如果我发现其他设备需要它，我会更新这篇文章。

```
 $('html, body').stop().animate({
        'scrollTop': $target.offset().top }, 1000);
    if( /iPhone|iPod/i.test(navigator.userAgent) ) {
        Gentle_Anchors.Setup(target);
        //for iPhone & iPod 
    } 
```

不幸的是，除非我告诉页面在检测到其中一个设备时将视口设置为等于 iPhone 的纵向宽度，否则我会看到一些口吃`<head>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T12:12:59.080

```
$(document).ready(function() {

    $('.nav-wrapper ul li a').click(function(e) { 
    $('html,body').animate({ scrollTop: jQuery(this.hash).offset().top-134}, 500);
});
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:02:06.123

您是否尝试过 CSS 属性 -webkit-overflow-scrolling:touch;？

# php - 很多带有“或”的查询

> ID：12235369
> 
> 赞同：0
> 
> 时间：2012-09-02T10:54:54.593
> 
> 标签：php, mysql, mongodb, database

我正在尝试将数据库从 MySQL 转换为 MongoDB，但我遇到了问题。我不知道查询应该如何查找 MongoDB。

```
 $hd='';
   $count = count($args[1]);
   for($i=0;$i<$count-1;$i++){
       $hd.="playerId='" . $args[1][$i] . "' OR ";
   }
   $hd.="playerId='".$args[1][$count-1]."'";
   $h1=mysql_query(sprintf("SELECT * FROM player where ".$hd)); 
```

谁知道怎么修它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:11:45.040

您的问题类似于[Mongo db select where in array of _id?](https://stackoverflow.com/questions/7713363/mongo-db-select-where-in-array-of-id)

我不太熟悉，但是您可以使用语句`MongoDB`而不是使用多个语句应该使您的查询更具可读性：`OR``IN()`

```
$h1 = mysql_query(
    "SELECT * FROM player where playerId IN (" . implode(", ", $args[1]) . ")"
); 
```

至于 MondoDB，我认为这应该可以为您提供所需的结果：

```
$m = new Mongo();
$db = $m->selectDB("database"); // your db
$mc = new MongoCollection($db, 'player');
$mc->find(
    array(
        'playerId' => array(
            '$in' => $args[1]
        )
    )
); 
```

如果你发现一些语法错误，请不要拍我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T22:47:36.263

**[PHP - MongoDB 高级查询](http://coderwall.com/p/aymsvw)**

```
$collection->find([
    'playerId' => ['$in' => [1, 2, 3]]
]); 
```

# bash - 使用带有 curl 的内部字段分隔符

> ID：12235373
> 
> 赞同：1
> 
> 时间：2012-09-02T10:55:47.227
> 
> 标签：bash, unix, ifs

当我做...

```
ls$IFS-l 
```

...我得到了我期望的输出。

当我做...

```
curl$IFShttp://www.google.com 
```

... 我不。

我误解了内部字段分隔符吗？如何在不使用任何空格字符的情况下运行 curl 命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T11:25:14.210

您需要将变量放在大括号内，否则 shell 会查找名为“IFShttp...”的变量：

```
curl${IFS}http://www.google.com 
```

# java - 日期转换：时间错误

> ID：12235375
> 
> 赞同：0
> 
> 时间：2012-09-02T10:55:50.200
> 
> 标签：java, date-format

`E, dd MMM yyyy HH:mm:ss Z`我以时区所在的形式从服务器获得了日期`+0200`

`yyyy-MM-dd HH:mm:ss`我用我自己的格式解析它

```
myFormat.format(serverFormat.parse(dateString)); 
```

我弄错了时间：一小时前。因此，如果我`10:00`进行转换，我会得到`09:00`. 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:11:51.587

我相信这里的问题是 DST - 夏令时。标准是冬令时。现在是夏天，所以你有1小时的差异。`+0200`您正在使用不支持也不能支持夏令时的时区转换语法，因为它取决于国家/地区。

您应该使用特定于语言环境的时区定义语法，例如，`Europe/Amsterdam`而不是`+0100`. 另外看看类的API `TimeZone`：

*   `inDaylightTime(Date date)`
*   `useDaylightTime()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T10:57:23.223

检查返回值的时区，这很可能是问题的原因。

```
DateFormat formatter = new SimpleDateFormat("dd MMM yyyy HH:mm:ss z");    
formatter.setTimeZone(TimeZone.getTimeZone("GMT+2")); 

System.out.println( formatter.format(serverFormat.parse(dateString)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T11:00:00.457

尝试一下

```
formatter = new SimpleDateFormat("E, dd MMM yyyy HH:mm:ss Z"); 
```

# java - 如何创建灵活的 MVC 结构？

> ID：12235377
> 
> 赞同：1
> 
> 时间：2012-09-02T10:55:54.100
> 
> 标签：java, model-view-controller, design-patterns, user-interface, flexibility

作为我目前正在进行的培训计划的一部分，我的任务是开发一个简单的基于命令行的帮助台应用程序。该项目的重点是培养我们使用设计模式、SOLID 原则、MVC 架构等的能力。

我在理解如何保持 MVC 结构的灵活性方面遇到问题。这是我的代码的一部分的示例...

```
public class RegisterController 
{   
    View view;
    RegisterModel registerModel;

    public RegisterController()
    {
        registerModel = new RegisterModel();
    }

    public void processRegistration(String username, String password, Role role)
    {
        if(registerModel.isRegisterable(username, password))
        {
            User newUser = new User(username, password, role);
            registerModel.registerUser(newUser);
            view = new LoginView(new LoginController());
        }
        else
        {
            System.out.println("ERROR during registration.");
            view = new MainView(new MainController());
        }

        view.startView();
    }
} 
```

理想情况下，我希望能够在以后进入并用不同的用户界面（视图类）替换它，例如网页，而无需更改我的模型或控制器。但是，目前您可以看到我正在编写命令行“MainView”和“LoginView”类的具体实现。

我怎样才能使这个控制器代码更灵活，并允许用不同的用户界面替换代码修改最少？当更改为不同的 UI 时，期望控制器代码保持不变是不现实的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:22:55.467

MVC/MVP 设计模式的主要好处之一是它们允许您对演示者进行单元测试，同时模拟视图和模型。

因此，我总是建议使用作为参数传递给构造函数的视图和模型来构造控制器/演示器。如果视图和模型作为接口类型传递，那么它们可以在测试场景中用模拟对象替换。在您当前的设计中，在控制器中选择了具体的实现，这打破了这种范式。

我通常将我的控制器和视图链接到一个中心位置。然而，这假设控制器不会在构建时立即启动昂贵的计算操作。我不确定是否有完美的答案，但我相信您应该调整当前的设计以进行测试。

# jquery-mobile - 缺少最后一项的底部边框

> ID：12235378
> 
> 赞同：1
> 
> 时间：2012-09-02T10:56:13.097
> 
> 标签：jquery-mobile

我有一个带有以下 HTML 的页面并使用 JQuery Mobile UI 框架。我有 2 个查询：

1）为什么最后一个元素的底边框隐藏？如果我删除标题，它就会开始出现。请建议我如何保持标题以使底部边框不会隐藏。

2）为什么加载器在页面加载后仍然可见 - 已解决..我缺少关闭标题

谢谢！

```
<!DOCTYPE html>
<html>
    <head>
        <title>app</title>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head>
    <body>
        <header data-role="header">

            <h1>
                My Application</h1>
        </header>

        <article data-role="content">
            <ul data-role="listview" >
                <li><a href="#">
                        <h1>Heading 1</h1>
                        <img src="http://www.f-secure.com/static/img/labs_global/Icons/98/forum_bubbles_icon.png" alt="cards"/>
                        <p>Select this option to lorum ipsum</p></a>
                </li>
                <li><a href="#">
                        <h1>Heading 2</h1>
                        <img src="http://www.f-secure.com/static/img/labs_global/Icons/98/forum_bubbles_icon.png" alt="cards"/>
                        <p>Select this option to lorum ipsum</p></a>
                </li>
                <li><a href="#">
                        <h1>Heading 3</h1>
                        <img src="http://www.f-secure.com/static/img/labs_global/Icons/98/forum_bubbles_icon.png" alt="cards"/>
                        <p>Select this option to lorum ipsum</p></a>
                </li>
                <li><a href="#">
                        <h1>Heading 4</h1>                
                        <img src="http://www.f-secure.com/static/img/labs_global/Icons/98/forum_bubbles_icon.png" alt="cards"/>
                        <p>Select this option to lorum ipsum</p></a>

                </li>
            </ul>
        </article>

    </body>
</html> 
```

截屏： ![在此处输入图像描述](../Images/1972ec38f28f072dd9edc1ea83f4e0dd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T10:59:08.447

这是身体标签..在打开身体之前先闭上你的头......

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
    </head>
    <body>
       [...]
    </body>
</html> 
```

[在这里](http://jsfiddle.net/bjzpA/)工作 jsfiddle 。

# c# - 从 C# 中的 App.config 文件中读取密钥

> ID：12235380
> 
> 赞同：4
> 
> 时间：2012-09-02T10:56:20.163
> 
> 标签：c#, .net, app-config

我想`App.config`在 C# 中从文件中读取密钥，我该怎么做？

我知道我可以用这个，

`string filetype = ConfigurationSettings.AppSettings("filetype");`

但我不想使用硬编码的密钥。

原因是，在我的项目中，有两个库具有单独的 app.config 文件和单独的键。我只想通过一个类来读取密钥，而不是对它们进行硬编码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T11:02:46.420

您可以在 app.config 中创建强类型部分，这样您就不需要在示例中使用诸如“filetype”之类的“magic string”键。

请参阅：[如何：使用](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)MSDN 上的 ConfigurationSection 创建自定义配置部分。

创建这些部分有些复杂，但是有一个出色的 Visual Studio 插件可以从您的设计中生成所有代码和架构。请参阅： CodePlex 上的[配置部分设计器。](http://csd.codeplex.com/)

**更新**

看来我误解了问题的重点。没有办法使用多个*app.config*文件，或者一个放在类库中的 app.config 文件（据我所知）*。*在运行时，类库剩下的就是它的 DLL；默认情况下，任何 app.config 文件都不会被*msbuild*进程复制到应用程序中。

您可能需要考虑在每个类库中使用自己的 XML 配置文件，并设置其属性：

*   `Build Action`至`Content`
*   `Copy to Output Directory`至`Copy Always`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T08:04:11.603

我通过使用配置对象解决了这个问题，

返回 Instance.GetConfigValue(strLst.AppSettings.Settings.AllKeys.ElementAt(0));

# java - 获取联系人的照片和姓名

> ID：12235381
> 
> 赞同：0
> 
> 时间：2012-09-02T10:56:29.957
> 
> 标签：java, android, contacts, android-contacts, phone-number

我正在制作一个 Android 应用程序（API 2.3.3），它将发送/接收短信。我可以通过使用方法获得收到消息的原始地址，`getOriginatingAddress()`它会在电话+（国家代码）（号码）中给我一个正常的电话号码。（例如：+94713594206 用于斯里兰卡号码）。

问题是，我需要检查用户手机上是否已经存在与这个收到号码的联系人。如果是，请获取对应的名称（显示名称）和与此编号匹配的照片（如果有）。如果没有，只需显示原始数字。

那么任何人都可以在第一个实例中帮助我 - 检查是否已经存在与给定电话号码匹配的联系人，如果确实存在，请获取该匹配联系人的显示名称和照片？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:26:23.477

可能重复：[按电话号码搜索联系人](https://stackoverflow.com/questions/3712112/search-contact-by-phone-number)- 有你需要的一切

对于照片问题：这个：[如何获取联系人照片 URI](https://stackoverflow.com/questions/7738192/how-to-get-contact-photo-uri)解决了这个问题！

# php - 缓存查询重页（PHP/MySQL）

> ID：12235384
> 
> 赞同：0
> 
> 时间：2012-09-02T10:56:51.703
> 
> 标签：php, mysql, performance, caching

几年前，我从头开始创建了我的第一个 PHP 页面（新闻站点）。我正在考虑重做它并开始重新设计，但我的页面速度遇到了问题，所以有几个问题：

1.  我可以使用什么工具来确定 PHP 的瓶颈在哪里？
2.  尽管页面是动态的，但它每隔几个小时才会更改一次。什么是最好的简单工具（我确实有一个 VPS，但它上面有多个站点）可能会加快这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:08:37.867

您可以使用 memcache 进行基于时间的内存存储。
使用 Explain 语句来确定您的 mysql 查询的效率。
如果页面上有大量图像，您可以使用延迟加载技术和
精灵技术。
在 body 标记的末尾包含您的 javascript 文件。
有关更多信息，请查看此链接
[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)
谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:32:49.807

我生活的规则有点;

1.  如果您有大量 javascript，请将它们合并为一个大的。减轻服务器压力，释放客户端空闲请求，为实际有效负载提供图像等。
2.  如果您有大量样式表，请合并非嗅探依赖（media="all" 而不是 'if lte IE7' 等）。与上述相同的好处。这种技术还降低了 gzip 的开销
3.  当您有密集的 mysql 查询时，生成 HTML - 将 .html 文件堆叠在服务器目录中。简单地`include 'cache/pageid.html';`或类似地使用它们。将输出缓冲区放入内存是对内存的巨大消耗。
4.  减少图像的数量 - 以及所有可能合并到工作表中的东西（通常在 CSS 中），这样做。
5.  具体来说，尝试创建一个“static.mydomain.tld”。这应该是一个没有 cookie 的域，带有一个简单的 http-cache-directive；过期。这可能会给您留下 < 120 字节的 pr-request-header，而不是 > 1k。

我的第 4 项确实不需要太多工具来实现该目标。我只是创建了一个类似于

```
 function writePageContents($cachefile) {
    $maxage = time() - 60*60; // one hour
    if($maxage < filemtime($cachefile)) return file_get_contents($cachefile);
    else return createPageFromDb();
  } 
```

因此，制作一个包含所有可缓存脚本和样式表的精简标题，从“cdn”提供它们。将所有的元数据放在右关闭标题下，然后`flush()`.

然后考虑是否需要重新创建缓存 - 如果不需要，只需包含磁盘中的本地存储

# mysql - hasMany 通过表的使用

> ID：12235387
> 
> 赞同：0
> 
> 时间：2012-09-02T10:57:11.847
> 
> 标签：mysql, database

我有用户表，然后是他们的兴趣表。

最好有通过表来管理两者之间的关系，还是最好将 CSV 放入 Users 表中的列之一。

到目前为止，我一直在通过表使用 hasMany，但想知道最好的选择是什么。

我感谢任何有关此数据库管理问题的经验丰富的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:01:18.870

如果我理解正确：您的选择之一是将逗号分隔的值保存在关系数据库的列中？

这几乎是 - 从不 - 一个有效的选项。不要那样做。仅在某些极端情况下，您拥有某种数据仓库……不，我在想什么。永远不要将关系保存为列中的逗号分隔列表。

# java - onStart 在 onCreate 之前完成的原因

> ID：12235388
> 
> 赞同：0
> 
> 时间：2012-09-02T10:57:16.263
> 
> 标签：java, android

在我正在处理的应用程序上，onCreate 使用 startService() 启动服务，随后，相同的活动在其 onStart 中调用 bindService（到相同的服务）。问题是服务直到 onStart 完成后才初始化，这会导致由空服务引起的空指针异常导致致命错误。如果不使用半途而废的解决方案，我不知道如何解决这个问题，而且我不知道 onStart 在 onCreate 之前是如何完成的。

建议？任何帮助深表感谢。

```
public class PNetworkService extends Service {
private final IBinder binder = new NtwkSvcBinder(this);

@Override
public void onCreate() {
    // Creates a HandlerThread to process the network events.
    HandlerThread handlerThread = new HandlerThread("SystemStartService",
            Process.THREAD_PRIORITY_BACKGROUND);
    // Starts the network thread.
    handlerThread.start();
    // Obtains looper so that that the NetworkServiceHandler is bound to that looper.
    serviceLooper = handlerThread.getLooper();
    // Create the Network Service Handler.
    nsh = new NetworkServiceHandler(serviceLooper, this);
    messenger = new Messenger(nsh);
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    Log.i(TAG, "onStartCommand");
    return START_STICKY;
}

@Override
public IBinder onBind(Intent i) {
    Log.i(TAG, "onBind called");
    return binder;
}

public void setExtHandler(Handler extHandler) {
    Log.i(TAG, "setting exthandler");
        nsh.setExtHandler(extHandler);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:14:37.780

我认为主要问题是您假设在 Activity 的 onStart 执行时服务已经在运行，并期望 bindService 立即绑定。但是，通常它不起作用。

这种行为的原因，我认为是Android一个一个实例化组件，认为你不能在Activity的onCreate里面同步创建服务。肯定会创建它，但是在系统队列之后会去创建这个新的服务。

那么，如果您只提供正确的 Connection 处理来绑定服务，它会起作用吗？例如移动以下代码

```
mConnection.getService().setExtHandler(mapActivityHandler); 
```

到里面`onServiceConnected()`？

# sql-server-2005 - 自动填充缺失日期行的值

> ID：12235392
> 
> 赞同：0
> 
> 时间：2012-09-02T10:57:39.073
> 
> 标签：sql-server-2005

我有一个类似于以下的表

```
Date   | qty1 | qty2 | qty3 | qty4 | column6
1 july | 33   | 0    |  0   | 0    | xyz
1 July | 0    | 20   | 0    | 0    | xyz
1 July | 18   | 0    | 0    | 0    | abc
3 July | 0    | 0    | 0    | 11   | abc
3 july | 23   | 0    |  0   | 0    | xyz
4 July | 0    | 40   | 0    | 0    | xyz
4 July | 57   | 0    | 0    | 0    | abc
7 July | 0    | 12   | 0    | 0    | xyz 
```

我正在 sql server 2005 的存储过程中寻找如下输出。

```
 Date   | qty1 | qty2 | qty3 | qty4 
 1 July | 51   | 20   | 0    | 0 
 2 July | 0    | 0    | 0    | 0
 3 July | 23   | 0    | 0    | 11
 4 July | 57   | 40   | 0    | 0
 5 July | 0    | 0    | 0    | 0
 6 July | 0    | 0    | 0    | 0
 7 July | 0    | 12   | 0    | 0 
```

正如您所注意到的，我希望它自动为缺失日期输入 0 值。我想知道这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T10:23:25.010

如果您可以从实际表中默认生成一个月内的所有日期**：1**意味着解决方案将非常简单......就像......

```
 SELECT     date  AS Date ,
            ISNULL(qty1, '') AS qty1,
            ISNULL(qty2, '') AS qty2,
            ISNULL(qty3, '') AS qty3,
            ISNULL(qty4, '') AS qty4,
    FROM    your_table_name where for_all_date 
```

否则你想做一些这样的事情......

```
CREATE PROCEDURE put_null ()
AS 
DECLARE @start_date DATETIME
DECLARE @End_date DATETIME
    BEGIN             
      SELECT TOP 1 @start_date = date FROM your_table_name ORDER BY Date   
      SELECT TOP 1 @End_date = date FROM your_table_name ORDER BY Date  DESC 
        WHILE(@start_Date < = @End_date)
        BEGIN
        SELECT  @start_date AS Date ,
                ISNULL(qty1, 0) AS qty1,
                ISNULL(qty2, 0) AS qty2,
                ISNULL(qty3, 0) AS qty3,
                ISNULL(qty4, 0) AS qty4,
        FROM    your_table_name

        SET @start_date = DATEADD(DAY,1,@start_date)
        END
    END 
```

希望这会解决你的问题....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:07:28.917

您可以在日期列上使用 GETDATE() 来自动获取它（除非您打算缺少日期值）。在另一种情况下，您可以在该列中设置默认值（或 DEFAULT CONSTRAINT），如果这是您的意思，则将默认值设为 0。或者你的意思是你想回到已经插入的行并编辑列？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T08:26:59.567

在存储过程中，您可以将其处理为**isNull(column,0)**它适用于存储过程中的插入或检索查询

# javascript - XML跨域问题

> ID：12235394
> 
> 赞同：0
> 
> 时间：2012-09-02T10:57:53.487
> 
> 标签：javascript, xml, xml-parsing, cross-domain

我正在构建一个 web 应用程序，我需要从几个跨域提要中获取 XML 数据。

令人讨厌的是：它们是跨域的。我目前在“本地”域上使用 proxy-php 脚本，该脚本从另一个域中获取 XML。考虑到许多用户都在使用此应用程序，您可能会看到这是一个**严重**的性能问题。

我想知道是否有可能提供一种方法，以便不需要此代理脚本。我确实可以访问其他域，因此可以选择附加脚本或 w/e，我只是无法使提要在同一域上运行。

# oauth - OpenAuth.RequestAuthentication() 在 VS2012 Web-Forms 模板中抛出 NULL Ref

> ID：12235395
> 
> 赞同：1
> 
> 时间：2012-09-02T10:57:53.457
> 
> 标签：oauth, visual-studio-2012, dotnetopenauth

我正在尝试让 OAuth 与 Visual Studio 2012 Web 表单模板一起使用。我已按照 Scott 视频中的说明进行操作：

[http://www.asp.net/vnext/overview/videos/oauth-in-the-default-aspnet-45-templates](http://www.asp.net/vnext/overview/videos/oauth-in-the-default-aspnet-45-templates)

但它的投入，`NullReferenceException`在`OpenAuthProvider.ascx.cs Page_Load()`这里：

```
OpenAuth.RequestAuthentication(provider, redirectUrl); 
```

当您深入研究细节时，它表明它是从 `DotNetOpenAuth.AspNet.OpenAuthSecurityManager.RequestAuthentication(String returnUrl)`

然而，当我从一个 MVC4 模板开始时，它就像一个梦一样工作。

有没有人遇到过这个？

编辑：这显然是我笔记本电脑上的环境问题，尝试了替代方案并且没有问题。我怀疑这可能取决于我安装 VS2012 Ultimate RC，然后在其上安装 RTM Professional - 尽管重新安装并没有改变任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T00:01:49.377

我也遇到了这个问题，并写了一篇关于如何解决它的短文。

简短版本是`providerName`通过模板作为“Facebook”或“Google”传递。该`AuthenticationClientManager.GetProviderByName()`方法期待`"facebook"`or `"google"`。

[http://wasntnate.com/2012/10/openauth-requestuthentication-nullreference-exception-explained/](http://wasntnate.com/2012/10/openauth-requestuthentication-nullreference-exception-explained/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-15T02:35:14.397

这是针对 Net 4.5 Webforms 稍作修改的**OpenAuthProviders.ascx.cs 模板**，该模板通过插入代码`ProviderName`从`ProviderDisplayName`（而不是执行 ToLower）获取来处理问题。如上所述，它处理`Microsoft` `windowslive` `ProviderDetails`从“Microsoft”到“microsoft”的 ToLower() 将不起作用的情况，因为需要“windowslive”。此更改是健壮的，并且也可以处理上述“谷歌”到“谷歌”的情况。在 VS2012 SP3 旁边安装 VS2013 后，有些东西坏了。VS2013 有一个新的身份模型，所以恕我直言，这个 VS2012 代码已被弃用。

```
protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        var provider = Request.Form["provider"];
        if (provider == null)
        {
            return;
        }

        var redirectUrl = "~/Account/RegisterExternalLogin";
        if (!String.IsNullOrEmpty(ReturnUrl))
        {
            var resolvedReturnUrl = ResolveUrl(ReturnUrl);
            redirectUrl += "?ReturnUrl=" + HttpUtility.UrlEncode(resolvedReturnUrl);
        }

        //  **after install VS2013 alongside of VS2012 SP3, needed to add this:**
        IEnumerable<ProviderDetails> details = OpenAuth.AuthenticationClients.GetAll();
        foreach (var d in details)
        {
            if (d.ProviderDisplayName.Equals(provider, StringComparison.OrdinalIgnoreCase))
            {
                provider = d.ProviderName;
                OpenAuth.RequestAuthentication(provider, redirectUrl);
                break;
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T22:10:36.000

`OpenAuthSecurityManager`当您通过其`OpenAuthSecurityManager(HttpContextBase)`构造函数实例化该类时，或者`OpenAuthSecurityManager(HttpContextBase, IAuthenticationClient, IOpenAuthDataProvider)`如果您`null`作为第二个参数 传入它的构造函数时，似乎会发生这种情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-03T12:19:44.277

下面的代码解决了我的错误..

```
IEnumerable<ProviderDetails> details = OpenAuth.AuthenticationClients.GetAll();

foreach (var d in details)
{
    if (d.ProviderDisplayName.Equals(provider, StringComparison.OrdinalIgnoreCase))
    {
        provider = d.ProviderName;
        OpenAuth.RequestAuthentication(provider, redirectUrl);
        break;
    }
} 
```

# javascript - 如何在同一个端口上使用 ExpressJS 和 Socket.io？

> ID：12235406
> 
> 赞同：31
> 
> 时间：2012-09-02T10:59:35.927
> 
> 标签：javascript, node.js, express, socket.io

在 ExpressJS 的第三个版本中，*express.createServer()*更改为*express()*，此更改使得在同一端口上绑定 socket.io 变得困难。也许有人可以找到稳健的决定。

现在，这不起作用：

```
var express = require('express')
, app = express.createServer()
, io = require('socket.io').listen(app); 
```

我目前的工作流程：[https ://gist.github.com/3596852](https://gist.github.com/3596852)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-02T15:36:30.047

它在[socket.io](https://github.com/LearnBoost/socket.io#express-3x) github页面上进行了描述（正如[@Golo](https://stackoverflow.com/questions/12235406/how-to-use-expressjs-and-socket-io-on-a-same-port#comment16398322_12235406)在您的评论中所述）：

```
var app = express()
  , server = require('http').createServer(app)
  , io = io.listen(server);

server.listen(80); 
```

这行得通，我让它运行。

可能 Golo 忘记的是将 listen 从 更改`app.listen(80)`为`server.listen(80)`. 我也一直在为此苦苦挣扎，直到我意识到我的愚蠢错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T14:41:18.327

```
var app = require('express')()
  , server = require('http').createServer(app)
  , io = require('socket.io').listen(server)

app.start = app.listen = function(){
  return server.listen.apply(server, arguments)
}

app.start(8080) 
```

# grails - Grails多个单向一对多不起作用

> ID：12235408
> 
> 赞同：1
> 
> 时间：2012-09-02T11:00:00.213
> 
> 标签：grails, grails-orm, one-to-many

我的两个域类 (`User`和`Post`) 在它们之间有多个一对多关联。`User`可能喜欢、不喜欢、看到或拥有多个`Post`s。为此，我设置了 hasMany 关系，如下所示：

```
static hasMany = [posts:Post, seen:Post, likes:Post, dislikes:Post] 
```

在我开始使用代码开发自己的一面之后，`seen`我看到`posts`列表中的每个对象也在`seen`,`likes`和`dislikes`. 然后我尝试使用 joinTable 来映射表：

```
static mapping = {
    posts joinTable: [name: 'USER_POSTS',
        column: 'POST_ID',
        key: 'USER_ID']
    seen joinTable: [name: 'USER_SEEN',
        column: 'POST_ID',
        key: 'USER_ID']
    likes joinTable: [name: 'USER_LIKES',
        column: 'POST_ID',
        key: 'USER_ID']
    dislikes joinTable: [name: 'USER_DISLIKES',
        column: 'POST_ID',
        key: 'USER_ID']
} 
```

`posts`但不幸的是，没有任何改变，添加到其他列表的帖子也仍然存在。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:08:07.773

在尝试了很多东西之后`mappedBy`，`mapping`我决定创建单独的域（实际上具有相同的属性）以保持和之间的喜欢、不喜欢和看到的`User`联系`Post`。实际上我的解决方案不是基于关系的，它是一种用户发布活动的日志。

```
class UserLike {
    static belongsTo = [user:User,post:Post]
}
class UserDislike {
    static belongsTo = [user:User,post:Post]
}
class UserSee {
    static belongsTo = [user:User,post:Post]
} 
```

当我想做一些我`post1`喜欢的`user1`事情时：

```
new UserLike(user:user1,post:post1).save() 
```

也许它对其他人来说并不完美，但解决了我的问题

# jquery - 使用编号生成多级 TOC 的 jQuery 插件

> ID：12235409
> 
> 赞同：1
> 
> 时间：2012-09-02T11:00:09.027
> 
> 标签：jquery, tableofcontents

我正在寻找这样的脚本，但找不到。**有很多 TOC 生成器**，但它们都是平面或伪多级 - 例如它们基于 H1、H2 标签中的数字。

我有一个简单的嵌套 HTML 结构，例如：

```
 <div class="toc"><div class="toc_target" id="ch1">Chapter 1</div></div>
 <div class="toc"><div class="toc_target" id="ch2">Chapter 2</div></div>
 <div class="toc"><div class="toc_target" id="ch3">Chapter 3</div>
     <div class="toc"><div class="toc_target" id="ch31">Chapter 31</div>
 </div>
 <div class="toc"><div class="toc_target" id="ch4">Chapter 4</div>
     <div class="toc"><div class="toc_target" id="ch41">Chapter 41</div>
         <div class="toc"><div class="toc_target" id="ch411">Chapter 411</div>
     </div>
 </div> 
```

...并且需要一个带有内部链接的目录，自动编号（HTML 结构可能是扁平的或嵌套的）：

```
1\. 第 1 章
2.第2章
3.第3章
3.1。第31章
4.第4章
4.1。第41章
4.1.1。第411章

```

有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T16:47:05.297

看来我必须一个人去战斗……

```
 function getLastNumberFromTocId(tocId) {
    if (tocId.length==0) return "";
    arr=tocId.split(".");
    return parseInt(arr[arr.length-2]); 
}

/*
Generates TOC.
Attribute "toc_id" is added to each node in content to store its numbering. It is used later to calculate the children's numbering.
First ideas from http://monochromacy.net/Post/Dynamic-Section-Numbers-and-Table-of-Contents-with-jQuery.aspx.
*/
function generateTableOfContents(list) {
var tocHtml = '';
list.each(function() {
        var current = $(this);

        // calculation of actual chapter number ()
        parentElement = current.parents(".toc");
        parentElementTocId = "";

        if (parentElement.size() == 1) parentElementTocId = parentElement.attr("toc_id");
        if (typeof  parentElementTocId === "undefined") parentElementTocId = "";

        previousTocId = "0.";
        previousToc = current.prev(".toc");
        if (previousToc.size() == 1) previousTocId = previousToc.attr("toc_id");

        localNumber = getLastNumberFromTocId(previousTocId) + 1;
        currentTocId = parentElementTocId + localNumber + ".";

        // store the result
        current.attr("toc_id", currentTocId);

        var headerElement = current.find(".toc-title").first();
        // text to be displayed
        headerElement.prepend(currentTocId + " ");
        var tocEntryText = headerElement.text();

        // get the link target
        var tocEntryId = headerElement.attr("id");
        tocHtml += '<span class="toc-entry"><a href="#' + tocEntryId + '">'  + tocEntryText + '</a></span>\n';
    });
return tocHtml; 
```

}

# javascript - 一键发布到两个表单 javascript

> ID：12235418
> 
> 赞同：-2
> 
> 时间：2012-09-02T11:01:04.713
> 
> 标签：javascript, html

```
<script type="text/javascript">  
function Add () {

    document.getElementById("newCart.php").submit();
    document.getElementById("PreviousCarts.php").submit();
}
</script> 
```

**HTML：**

```
<form name="myform" Id="myform" action="POST" method ="POST"  data-ajax="false">
<div class="main-content-wrapper"> 
<div class="image box-right" style="text-align: center"><img src="pic/shoping cart.jpg" border="0" width="150" height="150" 
                    title="go to a new cart!" onclick="if (validateEmail()) { Add ();} else {return false;}">
<span class="style1"><strong><br>New Shop Cart</strong></span>&nbsp; &nbsp; </div>
<div class="image box-left" style="text-align: center"><img src="pic/page_accept .png" border="0" width="150" height="150" 
                    title="go to a your old shopping bag!" onclick="if (validateEmail()) { Add ();} else {return false;}">
<span class="style1"><strong><br>your Previous shopping carts</strong></span></div> 
```

我们想做 post 或 to form name`newcart`或 to form `previouscart`。我们尝试了这段代码，但它不起作用。你有推荐吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:07:26.863

一旦`document.getElementById("newCart.php").submit();` 执行，浏览器就会耗尽以获取下一页。您不能从一个页面发布两个表单（没有 iframe）。

但是，您可以将其中一个放入其中一个表单中并使用/ content`hidden field`设置其值，然后发布此表单。`PreviousCarts``newCart`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:25:11.820

假设其中一个PHP文件只是做一些后台进程和一个显示信息，你可以先通过生成的框架将表单发送到后台进程，稍等片刻，然后提交到主页面：

```
function Add () {
    var oForm = document.getElementById("myform");

    //create hidden frame:
    var oFrame = document.createElement("iframe");
    oFrame.id = "MyHiddenFrame";
    oFrame.name = "MyHiddenFrame";
    oFrame.style.display = "none";
    document.body.appendChild(oFrame);

    //submit to first page via hidden frame:
    oForm.target = "MyHiddenFrame";
    oForm.action = "PreviousCarts.php";
    oForm.submit();

    //submit to second page:
    oForm.target = "";
    oForm.action = "newCart.php";
    oForm.submit();
} 
```

这不是最佳实践，以防万一由于某种原因您无法执行该服务器端。

# android - SD卡中的Android SQLite DB

> ID：12235419
> 
> 赞同：0
> 
> 时间：2012-09-02T11:01:14.257
> 
> 标签：android, sqlite, android-sdcard

**解决方案**

## 我必须在我的自定义 DBHelper 类中覆盖 getReadableDatabase() 和 getWritableDatabase()。

我面临着一种独特的问题。

到目前为止，我编写的 Android 应用程序在手机内存内部使用了一个 SQLite DB，并且运行良好。现在我想添加另一个数据库并将其存储在 SD 卡上。我通过修改我们通常使用的 DatabaseHelper 类来做到这一点。我还编写了一个脚本，将 db 从 assets 文件夹传输到 SD 卡用于一个 DB，并将内部存储器位置用于另一个。

现在我面临的问题是，当我尝试访问外部数据库时，android 在 /data/data/package_name/databases 文件夹中创建了一个内部数据库，因此我最终**没有得到这样的表异常**。

有人可以告诉我为什么会收到此错误！

* * *

**编辑 1** 我的数据库助手类

```
public class DBHelper extends SQLiteOpenHelper {
private Context myContext;
private String DB_PATH;
private String DB_NAME;
private boolean isExternal;
private SQLiteDatabase myDataBase;

private final String TAG = "ERROR";

public DBHelper(Context AppC, String DB_NAME, boolean isExternal,
        int DB_VERSION) {
    super(AppC, DB_NAME + ".sqlite", null, DB_VERSION);
    this.myContext = AppC;
    this.isExternal = isExternal;
    this.DB_NAME = DB_NAME;
    setDbPath();
}

private void setDbPath() {
    if (this.isExternal) {
        try {
            DB_PATH = Environment.getExternalStorageDirectory()
                    + "/myappname/";
        } catch (Exception e) {
            DB_PATH = "/mnt/sdcard/myappname/";
        }
    } else {
        try {
            DB_PATH = Environment.getDataDirectory()
                    + "/data/my.app.package/databases/";
        } catch (Exception e) {
            DB_PATH = "data/data/my.app.package/databases/";
        }
    }
}

/**
 * Creates a empty database on the system and rewrites it with your own
 * database.
 * */
public void createDataBase() throws IOException {
    boolean dbExist = checkDataBase();
    if (!dbExist) {
        try {
            copyDataBase();
        } catch (Exception E) {
            // MRC
        }
    }
}

/**
 * Copies your database from your local assets-folder to the just created
 * empty database in the system folder, from where it can be accessed and
 * handled. This is done by transferring byte streams.
 * */
private void copyDataBase() throws IOException {
    String filePath = DB_PATH + this.DB_NAME + ".sqlite";

    if (this.isExternal) {
        File file = new File(filePath);
        if (!file.exists()) {
            File dir = new File(DB_PATH);
            if (dir.exists() || dir.mkdirs()) {
                transferFromAssets(this.DB_NAME + ".zip", filePath);
            } else {
                Log.d(TAG, "Unable to create dir " + DB_PATH);
            }
        }
    } else {
        // By calling this method and empty database will be created
        // into the default system path of your application so we
        // will be able to overwrite that database with our
        // database.

        SQLiteDatabase db_Read = this.getReadableDatabase();
        db_Read.close();
        transferFromAssets(this.DB_NAME + ".zip", filePath);
    }
}

private void transferFromAssets(String from, String to) throws IOException {
    ZipInputStream myInput = new ZipInputStream(myContext.getAssets().open(
            from));
    myInput.getNextEntry(); // Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(to);
    // transfer bytes from the inputfile to the outputfile
    AndroidUtil.copyStream(myInput, myOutput);
}

/**
 * Check if the database already exist to avoid re-copying the file each
 * time you open the application.
 * 
 * @return true if it exists, false if it doesn't
 */
private boolean checkDataBase() {
    File dbFile = new File(DB_PATH + this.DB_NAME + ".sqlite");
    return dbFile.exists();
}

public void openDataBase() throws SQLException {
    String myPath = DB_PATH + this.DB_NAME + ".sqlite";
    Log.d(TAG, "Opening DB:" + myPath);
    myDataBase = SQLiteDatabase.openDatabase(myPath, null,
            SQLiteDatabase.OPEN_READWRITE);
}

@Override
public synchronized void close() {
    if (myDataBase != null)
        myDataBase.close();
    super.close();
}

public void onCreate(SQLiteDatabase db) {

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

} 
```

**我的内存数据库类的构造函数 **

```
public WordsDB(Context AppC) {
    DBAPI = new DBHelper(AppC, "DB_NAME", false, 11);
    this.AppC = AppC;
    try {
        DBAPI.createDataBase();
        DBAPI.openDataBase();
    } catch (IOException e) {
        CustomToast.Toast(AppC, "", TCategory_E.CRITICAL_ERROR,
                TDuration_E.LONG, TPosition_E.CENTER);
        // MRC
    }
} 
```

** 我的外部数据库类的构造函数 **

```
public BackupDB(Context AppC) {
    DBAPI = new DBHelper(AppC, "/mnt/sdcard/myapp/backup-db",
            true, 11);
    this.AppC = AppC;
    try {
        DBAPI.createDataBase();
        DBAPI.openDataBase();
    } catch (IOException e) {
        CustomToast.Toast(AppC, "", TCategory_E.CRITICAL_ERROR,
                TDuration_E.LONG, TPosition_E.CENTER);
        // MRC
    }
} 
```

**编辑 2**

导致错误的外部数据库助手类中的函数：

```
public void setValue(int No, int Stars) {
    try {
        ContentValues update = new ContentValues();
        update.put(COL_STARRED, Stars);
        String args[] = { No + "" };
        SQLDB = DBAPI.getWritableDatabase();
        SQLDB.acquireReference();
        SQLDB.update(TABLE_NAME, update, COL_ID + "=?", args);
        SQLDB.releaseReference();
        SQLDB.close();
    } catch (Exception E) {
        Log.d(TAG, E.getMessage());
    }
} 
```

如果我尝试将外部数据库用作内部数据库，则没有错误导致我认为我为外部数据库做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:19:16.067

你能提供一些代码吗？

> 我通过修改我们通常使用的 DatabaseHelper 类来做到这一点

Can you please describe what modification did you made? If you are using `SQLiteOpenHelper`, be aware that DB path, that is passed to it's constructor - is relative to /data/data/package/databases/ folder, so you cannot pass SD path there. If you will still need this - I'll suggest using `ContextWrapper` and redefining it's `getDatabasePath` method to point to your SD DB.

# android - 支持安卓多屏

> ID：12235421
> 
> 赞同：-1
> 
> 时间：2012-09-02T11:01:17.450
> 
> 标签：android, design-patterns, android-layout, user-interface

我正在为平板电脑开发 android 应用程序。我的目标是支持 7 英寸到 10.1 英寸的平板电脑。我无法根据我的设计选择合适的布局。

1.  如果我选择线性布局，那么嵌套层次结构会增加。（根据 UI 设计，我们应该避免布局嵌套）。

2.  如果我选择相对布局，则设计与所有表格都不匹配。

请建议哪个是最好的布局？

请帮忙？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:04:53.287

要找出最适合您的方法，我建议您阅读有关此主题的 Android 开发人员页面：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:09:40.637

为了支持多个屏幕，您必须为不同的设备创建不同的布局。

您可以从 android 开发者网站获取更多信息。

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html) http://developer.android.com/training/multiscreen/screensizes.html

# bash - 计算进程数并杀死它们

> ID：12235431
> 
> 赞同：4
> 
> 时间：2012-09-02T11:02:04.070
> 
> 标签：bash, sh

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:05:48.657

For maximum [portability](http://pubs.opengroup.org/onlinepubs/009695399/utilities/ps.html) and reliability, use `-A` (POSIX synonym of `-e`) and a custom format with `-o` rather than `-f`.

Your filtering of the output of `ps` is brittle: it may match other processes. You've had to exclude the grep process, and you may need to exclude your script as well, and there may be other completely innocent processes caught in the fray (such as your script itself) because their command line happens to contain `$process` as a substring. Make your filtering as strict as possible. With `ps -o pid= -o comm=`, you get just two columns (PID and command without arguments) with no header.

You don't need to use a loop to do the killing, `kill` accepts multiple arguments. For the counting, let the shell do it: you have a whitespace-separated list of numbers, to let the shell do the word splitting (with `$(…)` outside quotes) and count the number of resulting words (`$#`).

```
count_and_kill_processes () {
  set -- $(ps -A -o pid= -o comm= |
           awk -v "name=$process" '$2 == name {print $1}')
  count=$#
  if [ $# -ne 0 ]; then kill "$@"; fi
}
count_and_kill_processes foo
# now the number of killed processes is in $count 
```

If your shell is bash or ksh on all machines, you can use an array.

```
pids=($(ps -A -o pid= -o comm= |
           awk -v "name=$process" '$2 == name {print $1}') )
if [[ $# -ne 0 ]]; then kill "$@"; fi
# the number of killed processes is ${#pids} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T21:53:29.833

use xargs:

```
ps aux | grep -ie perl | awk '{print $2}' | xargs kill -9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T11:11:21.117

You can use a loop which should work in both cases:

```
for pid in $(ps -ef | grep -v grep | grep $process | awk '{print $2}'); do
  echo $pid
done 
```

Or count the number of matches:

```
if [ $(ps -ef | grep -v grep | grep $process | awk '{print $2}' | wc -l) -gt 1 ]
then
  # more than one
fi 
```

# mysql - 奇怪的 SQL 结果按日期排序，计数（日期）

> ID：12235434
> 
> 赞同：0
> 
> 时间：2012-09-02T11:03:17.760
> 
> 标签：mysql, sql, count, sql-order-by

我在 sql 请求中看到了一个奇怪的行为。

我的表点日志：

`# Column Type
1 date timestamp 2 uid varchar(30)
3 ssid varchar(40)
4 reason varchar(50)
5 points int(5) No None`

该声明：

```
SELECT date, count(date) as anzahl FROM pointLog WHERE uid = 1 order by date desc 
```

返回以下结果

```
 date                anzahl
2012-09-01 12:21:16     14 
```

但声明：

```
SELECT date FROM pointLog WHERE uid = 1 order by date desc 
```

退货

```
2012-09-02 12:44:08 
```

作为第一个结果。

**所以我的问题**是：为什么我没有`2012-09-02`在包含计数的第一个语句中收到第一个结果？

非常感谢！

**编辑** 作为 anzahl 的计数仅用于验证此示例中的条目是否超过 0。我知道它应该在程序中进行测试。

但我的主要问题是，我无法解释，为什么当它按相同（日期）排序时我会得到 2 个不同的日期。所以唯一的区别是计数属性。但这通常不应该改变排序？

**最终***解决方案

```
SELECT MAX(date) AS maxdate, COUNT(date) AS anzahl FROM pointLog WHERE uid = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:16:46.210

你得到一个结果：日期的计数，前面是任意日期。然后 ORDER BY 语句对其进行排序，这是无操作的，因为只有一行输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:19:47.667

您需要在 SQL 语句中使用 GROUP BY，否则 COUNT() 将不会为每个日期提供单独的总计。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:49:51.917

正如@prosfilaes 回答的那样，您的查询不会返回确定性结果，而是`date`以任意结果返回。

如果你想要最新的日期和计数，你可以使用：

```
SELECT 
    MAX(date) AS maxdate, 
    COUNT(date) AS anzahl 
FROM 
    pointLog 
WHERE 
    uid = 1 ; 
```

# apache - 在apache中优先考虑文件而不是目录

> ID：12235437
> 
> 赞同：1
> 
> 时间：2012-09-02T11:03:44.860
> 
> 标签：apache, .htaccess, mod-rewrite

考虑我在同一个目录中有一个文件'fg'和一个文件夹'fg'。现在当用户访问时，他/她得到的是文件的内容而不是目录的内容。如何使用 .htaccess 执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T15:12:43.417

将以下代码添加到 .htaccess

```
DirectorySlash Off 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:08:14.747

[这个答案](https://stackoverflow.com/questions/2017748/htaccess-proper-rewriting-of-directory-and-file-with-same-name)应该是你所追求的。

如果两者都存在，它正在使用 .htaccess 文件将目录重写为文件。

# svm - SVM 整数特征

> ID：12235439
> 
> 赞同：3
> 
> 时间：2012-09-02T11:03:52.967
> 
> 标签：svm, scikit-learn

我在 Python 的机器学习 scikit-learn 包中使用 SVM 分类器。我的特征是整数。当我调用 fit 函数时，我收到用户警告“Scaler 假定浮点值作为输入，得到 int32”，SVM 返回它的预测，我计算混淆矩阵（我有 2 个类）和预测精度。我试图避免用户警告，所以我将这些功能保存为浮点数。确实，警告消失了，但我得到了一个完全不同的混淆矩阵和预测准确性（令人惊讶的是准确度要低得多）有人知道它为什么会发生吗？更可取的是，我应该将特征作为浮点数还是整数发送？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T18:40:49.890

您应该将它们转换为浮点数，但实现方式取决于整数特征实际表示的内容。

你的整数是什么意思？它们是类别成员指标（例如：1 == 运动、2 == 商业、3 == 媒体、4 == 人......）还是具有顺序关系的数值度量（3 大于 2大于 1)。例如，您不能说“人”大于“媒体”。这是没有意义的，并且会混淆机器学习算法给它这个假设。

因此，应将分类特征转换为将每个特征分解为每个可能类别的几个布尔特征（值为 0.0 或 1.0）。查看 scikit-learn 中的[DictVectorizer 类](http://scikit-learn.org/dev/modules/feature_extraction.html#loading-features-from-dicts)，以更好地理解我所说的分类特征的含义。

如果有数值，只需将它们转换为浮点数，并可能使用 Scaler 将它们松散地置于 [-1, 1] 范围内。如果它们跨越几个数量级（例如单词出现的计数），那么采用计数的对数可能会产生更好的结果。更多关于特征预处理的文档和文档这部分的示例：http: [//scikit-learn.org/stable/modules/preprocessing.html](http://scikit-learn.org/stable/modules/preprocessing.html)

**编辑**：还阅读本指南，其中包含有关特征表示和预处理的更多详细信息：[http ://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf](http://www.csie.ntu.edu.tw/~cjlin/papers/guide/guide.pdf)

# c# - 如何用子窗体更改 mdiparent 窗体的背景图片？

> ID：12235441
> 
> 赞同：0
> 
> 时间：2012-09-02T11:04:27.740
> 
> 标签：c#, .net

我有两个问题：

1.  我无法使用子表单更改主表单背景
2.  当我在 .NET 中设置表单大小时，它没有任何问题，但是当我编译我的应用程序时，大小会发生变化。我上周没有这个问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:19:49.567

Mdi 容器的背景区域是**System.Windows.Forms.MdiClient**类型的控件。您可以从 Mdi 容器的 Controls 集合中获取它，然后将其视为任何其他控件。所以设置 Mdi 容器的背景图片：

```
public Control MdiClient
{
  get
  {
    Control result = null;

    for (int i = 0; i < Controls.Count; i++)
    {
      result = Controls[i];
      if (result.GetType().FullName == "System.Windows.Forms.MdiClient")
        return result;
    }

    return null;
  }
} 
```

然后：

```
MdiClient.BackgroundImage = Image.FromFile("SomeImage.jpg"); 
```

# php - 通过 4000 万个名称创建最适合通配符搜索的索引

> ID：12235443
> 
> 赞同：0
> 
> 时间：2012-09-02T11:04:45.030
> 
> 标签：php, search, lucene, full-text-search, sphinx

**任务**：在具有约 4000 万个名称的数据库中使用通配符搜索名称搜索的最佳匹配结果。例如 query='John' 结果可能是 'John'、'Johnny'、'Smith John'、'ajohn'
**候选人**：MySQL 全文、Sphinx 和 Lucene。
**观察**：我假设它们都使用倒排索引，这可能不是此类短“文档”（名称）的最佳解决方案，并且 trie 可能更合适。

假设这个观察是正确的，这些工具的配置是否更适合我的情况？还有其他可以轻松集成到 PHP 中的工具吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T11:20:27.557

我只能为斯芬克斯说话。它确实有一个专门启用通配符搜索的“min_prefix_len”。

它有两种模式，

1) 单词的每个前缀都是单独存储的（例如，Johnny 与 Johnny、Johnn、John、Joh、Jo、J 一起存储）因此每个前缀都会匹配。真正快速的查找，但以索引大小和索引速度为代价。

和

2）原始单词被实际存储，前缀与这些匹配。更紧凑的索引和快速索引。但是搜索速度不是很好（sphinx 还没有实现优化 - 例如将单词列表存储在 trie 中。因此，在这种模式下，专用解决方案可能会胜过 sphinx。

建议在模式 1 中，sphinx 将友好地执行您的任务 - 并且比 mysql 更好。（但不知道它与 Lucene 相比如何）

# asp.net-mvc-3 - vs12 不再支持 CopyAllFilesToSingleFolderForPackageDependsOn

> ID：12235449
> 
> 赞同：9
> 
> 时间：2012-09-02T11:06:05.170
> 
> 标签：asp.net-mvc-3, msbuild, visual-studio-2012, package, .net-4.5

我正在为网站使用 Visual Studio 2012 包功能，并且我有一个自定义目标，用于在压缩文件夹之前将一些子文件夹收集到包目标中。这在 vs10 中运行良好，但使用新的打包器 vs12 不再关心这些配置中的任何一个，并且它们没有被正确迁移以做类似的事情，所以我的包最终会有这些文件？

这是它曾经在 vs10 中的样子：

```
<PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
    <!-- Begin copy Contracts &Provider directories -->
    <CopyAllFilesToSingleFolderForPackageDependsOn>
      CustomCollectFiles;
      $(CopyAllFilesToSingleFolderForPackageDependsOn);
    </CopyAllFilesToSingleFolderForPackageDependsOn>
    <DesktopBuildPackageLocation>..\Package\Release\projectname.zip</DesktopBuildPackageLocation>
    <DeployIisAppPath>projectname</DeployIisAppPath>
    <!-- End copy Contracts &Provider directories -->
  </PropertyGroup>

  <Target Name="CustomCollectFiles">
    <ItemGroup>
      <_CustomFiles Include="$(OutputPath)\Contracts\**\*" />
      <FilesForPackagingFromProject Include="%(_CustomFiles.Identity)">
        <DestinationRelativePath>bin\Contracts\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup>
    <ItemGroup>
      <_CustomFiles Include="$(OutputPath)\Providers\**\*" />
      <FilesForPackagingFromProject Include="%(_CustomFiles.Identity)">
        <DestinationRelativePath>bin\Providers\%(RecursiveDir)%(Filename)%(Extension)</DestinationRelativePath>
      </FilesForPackagingFromProject>
    </ItemGroup> 
```

这在新项目中完全被忽略了。做类似事情的好方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-04T10:47:28.770

找到了解决方案，只需重命名`CopyAllFilesToSingleFolderForPackageDependsOn`为`CopyAllFilesToSingleFolderForMsdeployDependsOn`，文件应该包含在部署包中。

顺便说一句，这仍然不是最好的解决方案，因为您需要同时维护两者以支持 vs12 和 vs 10

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-13T21:18:01.733

另一种方法也有效并且需要较少的维护..

```
 <Target Name="CustomFolderDeploy" AfterTargets="CopyAllFilesToSingleFolderForPackage" BeforeTargets="MSDeployPublish">
    <PropertyGroup>
      <CustomFolder>$([System.IO.Path]::GetFullPath('$(MSBuildProjectDirectory)\..\..\..\Lib\CustomFolder'))</CustomFolder>
    </PropertyGroup>
    <CreateItem Include="$(CustomFolder)\*.*">
      <Output TaskParameter="Include" ItemName="CustomFiles" />
    </CreateItem>
    <Copy SourceFiles="@(CustomFiles)" DestinationFolder="$(MSBuildProjectDirectory)\obj\$(Configuration)\Package\PackageTmp\bin" SkipUnchangedFiles="True" ContinueOnError="False" />
  </Target> 
```

# xcode - Xcode 文件本地化 - 无法添加超过英语的内容

> ID：12235450
> 
> 赞同：4
> 
> 时间：2012-09-02T11:06:28.543
> 
> 标签：xcode, localization

在 localizable.strings 中，我无法添加比英语更多的语言。`"+"`没有出现。在可本地化的右侧面板上，位置是`"en.lproj/Localizable.strings"`

有任何想法吗？可能与 - 有关系`Info.plist`吗？

在这个文件中，唯一相关的行是`"Localization native development | String | en"`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T12:44:54.530

如果您使用的是 XCode 4.4 或 4.4.1，请考虑文件检查器中的这个区域：

[![](../Images/3cc8013882cc65a0cccb645bd6bb8632.png)](https://i.stack.imgur.com/yRIEO.png)

你会得到这个：

[![](../Images/c12bae8c789afda03a92ab356118ce88.png)](https://i.stack.imgur.com/3fx6L.png)

然后，您可以添加本地化副本：

[![](../Images/9f80cc9ff86ac8b176c31f1b6aaf6513.png)](https://i.stack.imgur.com/Az7Z8.png)

当然，您必须先进入项目设置 > 信息 > 本地化，然后单击左下角的“+”以添加语言。

[![](../Images/9e19a6236e032fedbbec5c393195be65.png)](https://i.stack.imgur.com/ShBKb.png)

然后，您可以本地化您的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:49:13.997

从 XCode 4.0 升级到 XCode 4.4.1 时我也遇到了这个问题。如果我在 XCode 4.4.1 上创建一个新项目，本地化工作正常，第一个字母是“L”而不是“l”。为了使旧项目正常工作，我删除了所有本地化设置并再次添加。确保在删除之前备份所有本地化资源。希望它可以帮助你。

# c# - 将 javascript gettime() 转换为 c# datetime

> ID：12235451
> 
> 赞同：2
> 
> 时间：2012-09-02T11:06:43.780
> 
> 标签：c#, javascript, datetime, datetime-conversion

我使用 Telerik raddatepicker 控件来选择日期。

我从控件中获取日期值，将其转换为 javascript Date 对象，然后使用 getTime 获取总毫秒数：

```
 var FromDate = $find("<%=fromDate.ClientID%>").get_dateInput().get_displayValue();
            var FromDateMill = new Date(FromDate).getTime(); 
```

我选择的日期是 2012 年 6 月 4 日（我们）。当我打印 new Date(FromDate) 的结果时，我得到了我选择的正确日期。

在服务器端，我尝试使用从 javascript 获得的毫秒数获取 datetime 对象，因此我使用以下代码：

```
DateTime seventies = new DateTime(1970, 1, 1);
DateTime fromDate = seventies.AddMilliseconds(Convert.ToDouble(Reader["FromDateMill"])); 
```

但是当我从日期打印时，我得到 6/3/2012 9:00:00 AM（前一天..）。我检查并看到转换 toDouble 返回正确的毫秒数，因为我在 javascript 中得到了。

有谁知道我做错了什么？

谢谢，英巴尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:20:48.397

您从该`getTime`方法获得的值不是来自本地时间，而是来自世界时间。当您将这些毫秒添加到 1970-1-1 时，您将获得通用时间，而不是本地时间。

使用`ToLocal`方法获取本地时间的 DateTime 值：

```
DateTime fromDate =
  seventies.AddMilliseconds(Convert.ToDouble(Reader["FromDateMill"])).ToLocal(); 
```

# java - Swing 客户端如何与 Java EE 后端通信？

> ID：12235452
> 
> 赞同：2
> 
> 时间：2012-09-02T11:07:02.683
> 
> 标签：java, swing, jakarta-ee

我想开发一个使用 Java EE 6 后端的 Swing 客户端应用程序。Swing 客户端如何与服务器通信？我是否必须制作通信通过的网络服务或有其他方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:11:04.623

除了 Web 服务之外，还有其他方法。

一种非常常见的方法是[RMI](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-136424.html)或远程方法调用。它是 Java 平台的本机扩展，允许在客户端代码中直接访问服务器端对象。

![RMI 概述](../Images/e2a2da2bb1e813e23a7713c296f4b98c.png)

如果您没有 RMI 经验，请查看官方的[Java 远程方法调用教程](http://docs.oracle.com/javase/tutorial/rmi/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:11:06.497

我认为[这](http://docs.oracle.com/javaee/5/tutorial/doc/bnaay.html)对您来说可能是一个非常有用的文档，其中包含用于演示架构和通信模式的图表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T11:18:54.857

有很多通信类型：

*   套接字为您提供最大的通信速度。
*   一点通信开销，可以使用 XML/SOAP
*   (plain)webservices too：最快的实现。HTTP GET、POST
*   RMI：我认为已弃用，但其他人正在使用。如果您只想使用 Java 的 Java 后端，则可以使用它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T13:07:16.713

是的，您可以创建 Web 服务（SOAP 或 RESTful），但由于您的客户端是 Java 应用程序，您可以使用 jndi 查找来调用 EJB3 bean，它可以通过 rmi 或 soap 工作，具体取决于您的配置。像[这里](http://java.sun.com/j2ee/tutorial/1_3-fcs/doc/GettingStarted5.html)的东西。

# twitter-bootstrap - 如何使用 simpleform 应用引导单选按钮样式？

> ID：12235459
> 
> 赞同：4
> 
> 时间：2012-09-02T11:08:11.673
> 
> 标签：twitter-bootstrap, radio-button, simple-form

我正在为 twitter bootstrap 使用 simpleform，并且我正在尝试使用 data-toggle 功能设置我的单选按钮的样式，以便我的按钮看起来像这里看到的单选按钮：

[Twitter 引导 javascript](http://twitter.github.com/bootstrap/javascript.html#buttons)

如何修复我的代码：

```
<%= simple_form_for @person , :html => { :class => 'form-horizontal' } do |f| %>
<%= f.input :name %>
<%= f.input :password %>
<%= f.input :country, as: :radio_buttons, :item_wrapper_class => 'btn-group' %>
<%= f.button :submit %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T19:05:56.053

您是否尝试过以下代码片段：

```
<div class="btn-group" data-toggle="buttons-radio">
  <button type="button" class="btn btn-primary">Left</button>
  <button type="button" class="btn btn-primary">Middle</button>
  <button type="button" class="btn btn-primary">Right</button>
</div> 
```

# ejb-3.0 - Java EE 6：使用依赖项控制托管 bean 的启动：CDI、EJB

> ID：12235464
> 
> 赞同：5
> 
> 时间：2012-09-02T11:08:36.357
> 
> 标签：ejb-3.0, java-ee-6, cdi

[我刚刚阅读了关于Java EE 6 @javax.annotation.ManagedBean vs. @javax.inject.Named vs. @javax.faces.ManagedBean](https://stackoverflow.com/questions/11986847/java-ee-6-javax-annotation-managedbean-vs-javax-inject-named-vs-javax-faces)的各种托管 bean 及其关系的非常好的解释，因为我遇到了一个恼人的问题应用程序 我想知道是否可以控制或影响 bean 的启动方式和时间。

在我的 Java EE 应用程序中，我使用 EJB、CDI 和 JSF2 作为视图技术。通过 SPI 启动来自第三方的服务，并配置一个作业执行器来启动作业并处理其他与计时器相关的内容。当作业执行器完成其引导时，会立即执行一项作业。该作业使用 CDI 注入来访问某些 bean，其中一个 bean 使用 EJB。

现在的问题是大多数时间 Java EE 6 服务器 (JBoss 7.1.1) 启动 EJB 仍然不可用，然后作业尝试访问它。抛出异常并且作业失败，并且构建服务以停用该失败的作业。好吧，停用失败的工作似乎还不错。作业重新启动和运行的唯一解决方案是取消部署并再次重新部署。不幸的是，这是一项手动任务，无法以编程方式完成。

而且，让事情变得糟糕：在极少数情况下，这不会发生。

所以，我现在的问题是：我能否以某种方式控制 EJB 和 CDI bean 的初始化和部署，以便我可以确保在初始化 CDI bean 之前初始化所有 EJB bean？

我在 EARs application.xml 中将 initialize-in-order 设置为 true 并设置 EJB 的顺序，以便它们按照我需要的方式进行初始化（EJB 核心，然后是 EJB 业务，然后是 WAR），但是基于 CDI 的服务以 JAR 形式放置在 lib 文件夹中。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-03T13:14:38.503

摘自[Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/gipvi.html)并进行了一些修改：

```
@Singleton
@Startup
public class BeanA { ... }

@Qualifier
@Target({FIELD, PARAMETER})
@Retention(RUNTIME)
public @interface EjbStarted {}

@Singleton
@Startup
@DependsOn("BeanA", "BeanB", "BeanC")
public class LastBean {
    @Inject @EjbStarted Event<String> event;

    @PostConstruct
    public void startService() {
        // At this moment PrimaryBean is ready for use
        event.fire("LastBean");
    }
}

public class CDIService {
    public void start(@Observes @EjbStarted String name) {
        if("LastBean".equals(name)) {
            startService();
        }
    }
} 
```

更新：在考虑这个问题时，我不知何故忘记了你想要 CDI bean 中的初始化顺序，所以答案有点脱离上下文，对此感到抱歉:)

更新 2：添加了如何在 EJB 之后启动 CDI 服务

# xcode - 如何在 XIB 文件中抑制 Xcode“属性不可用”警告？

> ID：12235466
> 
> 赞同：4
> 
> 时间：2012-09-02T11:08:42.510
> 
> 标签：xcode, macos, warnings, xib

我的应用程序的目标是 10.6，所有 .xib 文件的“部署”值都是 10.6，而最近更改为 10.7（我不知道什么时候）。如果我将它改回 10.6，我会从 Xcode 收到以下警告：

```
/Users/andy/Source/.../Preferences.xib:383: Identifier on OS X versions prior to 10.7 
```

这是 .xib 文件的相关部分：

```
381: <string key="NSFrame">{{1, 1}, {116, 104}}</string>
382: <reference key="NSSuperview" ref="14642427"/>
383: <reference key="NSNextKeyView" ref="1001986100"/>
384: <string key="NSReuseIdentifierKey">_NS:11</string> 
```

（事实上​​，当我在 BBEdit 中打开 .xib 以查看警告行然后关闭它并在 Xcode 中清理/构建时，被警告的行似乎发生了变化；它总是 383，但是内容会移动。最后一次警告碰巧是第`NSSuperview`383 行的那条线，至少可以说这很奇怪）。

有时我会收到两个警告。另一个警告是：

```
file://localhost/Users/andy/Source/.../Preferences.xib: warning: Attribute Unavailable: Identifier on OS X versions prior to 10.7 
```

当我单击它时，它会突出显示 .xib 文件中的自定义视图。

谁能告诉我这个警告的含义以及我如何摆脱它？

我正在使用 Xcode 4.4.1 在 10.8 下进行开发，我认为这个警告会在 10.6 下运行时导致问题（在开发期间我无法做到这一点）。我很乐意根据需要提供更多信息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T11:17:01.053

**要删除它：**

1）选择XIB文件（编辑器打开）

2) 按`cmd`+ `opt`+`3`打开相关 XIB 的 Identity Inspector。然后在警告导航器中按下警告——它应该在 NIB 编辑器中选择有问题的对象。

3) 清除 Identity > Identifier 中的值（就在您将指定自定义类的字段下方）

4) 保存并构建。

那应该这样做。

**这是什么意思：**

您正在使用 10.6 不支持的文档功能。

具体来说，这个键/值似乎与`@protocol NSUserInterfaceItemIdentification`：

> NSUserInterfaceItemIdentification 协议用于将唯一标识符与用户界面中的对象相关联。AppKit 接口对象采用该协议来支持窗口恢复，从而保留有关窗口和其他与接口相关的对象的信息，并用于在下一个启动周期恢复应用程序的界面。

在 XIB 中搜索的关键是`userInterfaceItemIdentifier`.

# c# - 获取服务器 IP 地址

> ID：12235473
> 
> 赞同：0
> 
> 时间：2012-09-02T11:09:57.150
> 
> 标签：c#, sharepoint, sharepoint-2010

有没有办法获取 Sharepoint 服务器的 IP 地址？下面的代码只是检索主机名，但我需要知道 IP 地址。

```
string hostName = SPServer.Local.Address; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:24:47.577

SPServer 有一个名为“SPServer.Address”的成员，如果这不是您要查找的值，则可以尝试通过 HttpRequest.UserHostAccess

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:30:44.477

给定主机名，您可以使用命名空间中的[Dns.GetHostEntry](http://msdn.microsoft.com/en-us/library/ms143998%28v=vs.110%29.aspx)`System.Net`获取主机的 IP 地址。

您可以使用以下代码获取主机名的第一个 IPv4 地址：

```
var ipAddress = Dns.GetHostEntry(hostName)
  .AddressList
  .First(ipAddress => ipAddress.AddressFamily == AddressFamily.InterNetwork); 
```

如果主机未知或没有 IPv4 地址，代码将引发异常。

# python - 金字塔遍历从数据库（mongodb）返回数据

> ID：12235476
> 
> 赞同：2
> 
> 时间：2012-09-02T11:10:22.220
> 
> 标签：python, mongodb, pyramid

资源.py：

```
class Root(object):
    __parent__ = __name__ = None

    def __init__(self, request):
        super(Root, self).__init__()
        self.request = request
        self.collection = request.db.post

    def __getitem__(self, key):
        if u'post' in key:
            return Post() 
```

在 Root 资源中，我可以使用 request.db.post 返回数据库中的任何数据，然后我创建了另一个资源：

```
class Post(dict):

    def __init__(self, request):
        super(Post, self).__init__()
        self.__name__ = u'post'
        self.__parent__ = Root
        self.collection = request.db.post 
```

我收到一个错误：`__init__()`正好需要 2 个参数（给定 1 个）

然后我删除

```
self.collection = request.db.post 
```

在 Post 上，并且没有错误返回，但是我无法从 Post 中返回数据库中的任何数据，那么如何从除 Root 之外的其他资源中返回数据库中的任何数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:08:01.680

您创建一个`Post()`没有任何参数的实例，但您的构造函数希望您传入一个`request`参数。传入请求或删除参数要求：

```
return Post(self.request) 
```

或者：

```
class Post(dict):
   def __init__(self):
       # ... 
```

我不知道你是如何正常访问你的数据库的；如果唯一的方法是通过`request.db`然后传递`self.request`给您的`Post()`实例并`self.request.db`在您的`Post`类中访问您的数据库。

# iphone - Twitter MGTwitterEngine 不重定向到 iphone 应用程序

> ID：12235477
> 
> 赞同：0
> 
> 时间：2012-09-02T11:10:24.483
> 
> 标签：iphone, ios, twitter, callback, mgtwitterengine

我已经在我的 iOS 应用程序中集成了 MGTwitterEngine 来发推文。Twitter 一直运行良好，直到上周。我没有对 iOS 代码进行任何更改。但是今天登录后，Twitter 并没有将我重定向到我的 iOS 应用程序。相反，它显示消息“请稍候...”

我怎样才能解决这个问题？

# oracle - Oracle Enterprise Manager 11g 中的 NLS_CHARACTERSET 参数在哪里？

> ID：12235482
> 
> 赞同：3
> 
> 时间：2012-09-02T11:11:04.363
> 
> 标签：oracle

是否通过浏览器登录到 Enterprise Manager 11g。In中有`NLS_TERRITORY`,`NLS_LANGUAGE`和其他`NLS`相关参数`Server->Initialization Parameter->NLS group`。但是找不到`NLS_CHARACTERSET`参数。显式搜索参数给出

> “未找到参数”。

“select * from nls_database_parameters”是查看其值的唯一方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-19T12:22:44.090

@OraNob 的回答给了我

```
ORA-00942: table or view does not exist 
```

然而，这对我有用：

```
select * from v$nls_parameters where parameter in ('NLS_CHARACTERSET'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T08:33:54.440

尝试

```
SELECT value$ FROM sys.props$ WHERE name = 'NLS_CHARACTERSET' 
```

# python - 使用 Python 在 Google AppEngine 上的 GQL 中进行简单的数据存储/检索

> ID：12235488
> 
> 赞同：0
> 
> 时间：2012-09-02T11:12:38.257
> 
> 标签：python, google-app-engine, google-cloud-datastore, gql, gqlquery

我有一个问题，这可能是因为我不了解 GQL 的工作原理（这是我使用它的第一天）。我正在使用 google.appengine.ext.db 数据存储在 Google AppEngine（现在本地）上工作。

我只是创建一个具有特定 ID 的用户，然后尝试通过过滤以仅包含具有此 ID 的记录来检索它。当我尝试这个时，它什么都不返回，但是当我得到所有，迭代并一一比较 ID 时，它会找到记录。我没有看到这里肯定有一些愚蠢的错误。这是代码：

```
def datastore_key():
    return db.Key.from_path('MyUsers', 'all')

class MyUser(db.Model):
    my_id = db.TextProperty()

[...]

 user = MyUser(parent=datastore_key())
 user.my_id = "7wjew1"
 user.put()

 users = MyUser.all()
 users.ancestor(datastore_key())
 users.filter("my_id = ", "7wjew1") # WTF - why isn't this working???
 print users[0] # is None, users list is empty

 # now, let's get all users
 users = MyUser.all()
 users.ancestor(datastore_key())
 # and iterate through the list to check for ids
 for user in users:
     if user.linkedin_id == user_id:
         print "ids are the same"
         # surprise, it prints the "ids are the same" - wtf? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:20:19.453

好吧，我想有时候写一个问题是很好的，这样你就可以自己马上找到答案。我改为`TextProperty`并且`StringProperty`它有效:)

# php - PHP线程评论分页

> ID：12235489
> 
> 赞同：3
> 
> 时间：2012-09-02T11:12:53.990
> 
> 标签：php, mysql, threaded-comments

我正在使用来自[http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/](http://www.jongales.com/blog/2009/01/27/php-class-for-threaded-comments/)的线程评论，但我不知道如何实现分页系统。如果有人能指出我的方向或某事，因为我正在寻找解决方案但没有找到任何东西......

```
public $parents  = array();
public $children = array();

function __construct($comments)
{
    foreach ($comments as $comment)
    {
        if ($comment['parent_id'] === NULL)
        {
            $this->parents[$comment['id']][] = $comment;
        }
        else
        {
            $this->children[$comment['parent_id']][] = $comment;
        }
    }
}

private function format_comment($comment, $depth)
{
     If($depth == 0){
        ?>
        <br /><?php echo $comment['name']; ?><br /><?php echo $comment['datetime']; ?><br /><?php echo $comment['text']; ?></div>
        <a href="javascript:toggleDiv('<?php echo $comment['id']; ?>');">Raspunde</a>
        <div id="<?php echo $comment['id']; ?>" style="display: none;">
        The content in this div will hide and show (toggle) when the toggle is pressed. 
        </div>
        <?php
     }

     If($depth > 0){
        ?>
        <div style="margin-left: 20px;">
        <br /><?php echo $comment['name']; ?><br /><?php echo $comment['datetime']; ?><br /><?php echo $comment['text']; ?></div>
        </div>
        <?php
     }   

}

private function print_parent($comment, $depth = 0)
{
    foreach ($comment as $c)
    {
        $this->format_comment($c, $depth);

        if (isset($this->children[$c['id']]))
        {
            $this->print_parent($this->children[$c['id']], $depth + 1);
        }
    }
}

public function print_comments()
{
    foreach ($this->parents as $c)
    {
        $this->print_parent($c);
    }
}}

$username = "Netra";
$SQL = "SELECT * FROM profile_comments WHERE name = '$username' ORDER BY datetime DESC";
$result = mysql_query($SQL) or die(mysql_error());

while($row = mysql_fetch_assoc($result)) {
    $id = $row['id'];
    $parent_id = $row['parent_id'];
    $name = $row['name'];
    $text = $row['text'];
    $datetime = $row['datetime'];

    $comments[] = array(
        'id' => $id,
        'parent_id' => $parent_id,
        'name' => $name,
        'text' => $text,
        'datetime' => $datetime
    );
}

    $threaded_comments = new Threaded_comments($comments);

    $threaded_comments->print_comments(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:17:43.013

分页只会改变查询中的两件事。它将根据当前页面设置不同的 LIMIT 和 OFFSET。涉及到几个部分，主要是知道偏移量。这很简单，它始终是 (PAGE_NUMBER * NUMBER_PER_PAGE) - NUMBER_PER_PAGE。然后，您可以根据当前页面动态更改您的 sql！

它看起来像这样：

```
<?php 

class Pagination{

    public $total_results;
    public $total_pages;
    public $per_page;
    public $offset;
    public $page;

    public function __construct($per_page=20, $total_results=0, $page=1){
        $this->per_page = $per_page;
        $this->total_results = $total_results;
        $this->page = $page;
        $this->set_total_pages();
        $this->set_offset();
        $this->prepare_displays();
    }

    public function set_total_pages(){
        $this->total_pages = ceil($this->total_results / $this->per_page);
    }

    public function set_offset(){
        $this->offset = ($this->page * $this->per_page) - $this->per_page;
    }

    public function has_next_page(){
        if($this->page < $this->total_pages){
            return true;
        }else{
            return false;
        }
    }

    public function has_previous_page(){
        if($this->total_pages > 1 && $this->page > 1){
            return true;
        }else{
            return false;
        }
    }

    public function check_page_exists(){
        return (($this->total_pages > 0) && ($this->page > $this->total_pages)) || $this->page < 1 ? false : true;
    }

}

?> 
```

# c# - 如何在 windows phone 7 中捕捉过度滚动效果

> ID：12235494
> 
> 赞同：1
> 
> 时间：2012-09-02T11:13:37.700
> 
> 标签：c#, .net, windows-phone-7, windows-phone-7.1, windows-phone

如何在 windows phone 7 中捕捉过度滚动效果？过度滚动效应的例子？当用户过度滚动列表框时，我想添加新的矩形。

过度滚动示例：

![在此处输入图像描述](../Images/c7f7d5dc2668cca96b6342c5d1cfa6d3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:58:08.053

它们是压缩事件。你可以看看这个[博客](http://blogs.msdn.com/b/slmperf/archive/2011/06/30/windows-phone-mango-change-listbox-how-to-detect-compression-end-of-scroll-states.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:29:47.363

尝试为 ScrollViewer 和指定高度内的矩形设置 ScrollViewer 的高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T15:48:39.843

在 Windows Phone 8 中，您可以使用 ScrollViewer 或 Telerik RadDataBoundListBox

# css - 表格中的 Mozilla 边界半径无法始终如一地工作

> ID：12235496
> 
> 赞同：2
> 
> 时间：2012-09-02T11:14:05.890
> 
> 标签：css

把自己逼疯了！

首先，我可以澄清一下，不再需要为边界半径添加前缀，例如使用 -moz-。但是，如果使用旧浏览器，这样做是一种好习惯吗？

其次，我接受在表格内使用边界半径时要求边界折叠不折叠，我也认为边界间距不应该为 0。

下面的 CSS 和 HTML 草案在所有浏览器中创建了很好的圆角表格元素，除了 mozilla，由于某种原因，表格是圆形的，th 是圆形的，但 td 都是方形的。

火灾错误报告应用了半径。事实上，如果我在 td 上放置背景颜色，我可以看到这个背景是四舍五入的。但它仍然将余数显示为正方形。

有什么想法吗 ？？？

```
/* borders */

#booking_Form_Wrapper{
    border: 0px;
    padding: 0px;
    margin: 0px;
}

#booking_Table{
    width: 300px;
    height: 400px;
    background-color: #a5a5a5;
    border-radius: 14px;
    border-spacing: 6px 6px;
}

#booking_Table th{
    border-radius: 10px;
}

#booking_Table td{
    border-radius: 10px;
}

/* other styles */ 
```

HTML

```
<table id="booking_Table"> 
    <thead id="booking_Title">
        <th>
            Booking
        </th>
    </thead>
    <tbody>
        <tr id="booking_Session">
            <td>
                <a>Class - Level</a><br />
                <a>Day and Date</a><br />
                <a>Start Time - End Time</a>
            </td>                   
        </tr>
        <tr id="booking_XXXXXXX">
            <td style="border-radius: 6px;">
                <label>Do you want to XXXXXXXX</label><input type="checkbox"/>
                <label>XXX</label><input type="radio" name="XXX" value="b">
                <label>XXX</label><input type="radio" name="XXX" value="s">
                <label>XXX</label><input type="radio" name="XXX" value="r">
            </td>           
        </tr>
        <tr id="booking_Cancel">
            <td>                
            <P><span>Cancellation Policy</span> - xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</P>
            </td>
        </tr>
        <tr class="form_Footer">
            <td>
                <input class="form_Submit" type="submit" name="submit" value="Make Booking"/>
                <input class="form_Cancel" type="cancel" name="cancel" value="Cancel"/>
            </td>
        </tr> <!-- form footer -->
    </tbody>
</table> <!-- booking table --> 
```

![在此处输入图像描述](../Images/456e1bc1eb29577dc334b4dbb080b5aa.png)

这是第一个正方形 td 的萤火虫计算的样式信息

![在此处输入图像描述](../Images/413e4013752406c9aa9ab78e517247fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T19:39:44.303

我找到了解决方案 - 我可能没有用正确的技术术语说明这一点，但效果是在 FF 中通过给包含元素一个高度引起的。在我的情况下`<tr>`。有趣的是，其他浏览器都没有抱怨这一点，而且`<td>`不管怎样。我认为这与 Mozilla 开发人员注释有关，该注释说无论是否指定了边框，半径都应用于应用半径的元素的背景。`<tr>`不是背景的一部分，因此没有四舍五入。

无论如何，不​​要给容器一个高度，一切都很好。

# ruby-on-rails - Rails3 和 NginX CORS 标头

> ID：12235500
> 
> 赞同：3
> 
> 时间：2012-09-02T11:14:46.690
> 
> 标签：ruby-on-rails, nginx, cors

我有一个通过 NginX 托管的 Rails3 应用程序，它提供了一个支持跨源资源共享 (CORS) 的 JSON API。相关的标头应该通过 NginX 添加，而不是通过 Rails 应用程序。

因此，我在 routes.rb 中添加了一个捕手来获取 OPTIONS 预检请求：

```
match "*options", controller: "application", action: "options", constraints: { method: "OPTIONS" } 
```

我将相应的端点添加到我的应用程序控制器中：

```
def options
  render :text => "", :layout => false
end 
```

作品。现在我想为我的 NginX 提供一个开放的 CORS 配置：

```
 server {
            listen 80;
            server_name localhost;
            passenger_enabled on;
            root /home/deployer/apps/fooapp/current/public;

            location /v1 {
                    if ($request_method = 'OPTIONS') {
                            add_header 'Access-Control-Allow-Origin' '*';
                            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                            add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,X-FooApp-Auth-Token';
                            add_header 'Access-Control-Max-Age' 1728000;
                            add_header 'Content-Type' 'text/plain charset=UTF-8';
                            add_header 'Content-Length' 0;
                            return 200;
                    }
                    if ($request_method = 'POST') {
                            add_header 'Access-Control-Allow-Origin' '*';
                            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                            add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,X-FooApp-Auth-Token';
                    }
                    if ($request_method = 'GET') {
                            add_header 'Access-Control-Allow-Origin' '*';
                            add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                            add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,X-FooApp-Auth-Token';
                    }
            }
    } 
```

太好了，OPTIONS 请求现在在响应中包含所有需要的标头：

```
curl -i -H'Accept: application/json' -H'Content-Type: application/json' -XOPTIONS 'http://api.fooapp.net/v1/api_session' -d'{"user":{"email":"demo@fooapp.net", "password":"somepassword"}}'

HTTP/1.1 200 OK
Server: nginx/1.2.3
Date: Sun, 02 Sep 2012 11:04:28 GMT
Content-Type: application/octet-stream
Content-Length: 0
Connection: keep-alive
Access-Control-Allow-Origin: *
Access-Control-Allow-Methods: GET, POST, OPTIONS
Access-Control-Allow-Headers: DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,X-FooApp-Auth-Token
Access-Control-Max-Age: 1728000
Content-Type: text/plain charset=UTF-8
Content-Length: 0 
```

但是，例如，一个真正的 POST 请求现在失败并出现 404：

```
curl -i -H'Accept: application/json' -H'Content-Type: application/json' -XPOST 'http://api.fooapp.net/v1/api_session' -d'{"user":{"email":"demo@fooapp.net", "password":"somepassword"}}'

HTTP/1.1 404 Not Found
Server: nginx/1.2.3
Date: Sun, 02 Sep 2012 11:06:19 GMT
Content-Type: text/html
Content-Length: 168
Connection: keep-alive

<html>
<head><title>404 Not Found</title></head>
<body bgcolor="white">
<center><h1>404 Not Found</h1></center>
<hr><center>nginx/1.2.3</center>
</body>
</html> 
```

它必须，因为 NginX 日志说：

```
2012/09/02 13:06:19 [error] 2464#0: *3 open() "/home/deployer/apps/fooapp/current/public/v1/api_session" failed (2: No such file or directory), client: 127.0.0.1, server: localhost, request: "POST /v1/api_session HTTP/1.1", host: "api.fooapp.net" 
```

我是 NginX 的新手，我知道这是一个非常开放且非常轻量级的配置。我不明白为什么 NginX 会尝试通过公共路由这些请求，这样就不会请求底层的 Rails 应用程序。我该如何更改配置，以便我的所有请求都像以前一样传递给应用程序，但无论如何都会添加 CORS 标头？

提前谢谢

菲利克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-27T08:18:38.047

这有点晚了，但因为我刚刚遇到同样的问题，它可能会帮助其他人。

您需要在位置块内启用乘客

```
location /{
     ...
     passenger_enabled on;
     ...
 } 
```

我希望这有帮助。

# php - symfony2 图片问题（403 禁止）

> ID：12235501
> 
> 赞同：-1
> 
> 时间：2012-09-02T11:14:54.280
> 
> 标签：php, .htaccess, symfony, assetic

我将 symfony2 项目上传到 servergrove.com，然后使用创建资产

```
php app/console assets:install --symlink web 
```

并且

```
php app/console assetic:dump --env=prod --no-debug 
```

完成这些步骤后，我无法访问`web/bundles`文件夹中的图像，出现“403 禁止”错误。

我网站的 URL 是[http://myserjtankian.com.preview-sg111.servergrove.com/](http://myserjtankian.com.preview-sg111.servergrove.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-28T15:24:07.467

您可以使用此命令行（不带**--symlink web** arg）修复该问题：

```
php app/console assets:install 
```

这会将资产安装为硬拷贝。

希望它有帮助

最良好的问候

# java - 用java读取xml

> ID：12235503
> 
> 赞同：-3
> 
> 时间：2012-09-02T11:15:17.340
> 
> 标签：java, xml

嘿，我想用 java 读写 xml 代码，所以我用谷歌搜索了怎么做，但我发现只有引擎才能读取真正简单的 xml 代码，例如

```
<?xml version="1.0"?>
<company>
    <staff>
        <firstname>yong</firstname>
        <lastname>mook kim</lastname>
        <nickname>mkyong</nickname>
        <salary>100000</salary>
    </staff>
    <staff>
        <firstname>low</firstname>
        <lastname>yin fong</lastname>
        <nickname>fong fong</nickname>
        <salary>200000</salary>
    </staff>
</company> 
```

但我想阅读更高级的内容，例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<package>
    <template name="store_avatars">

        <!-- UI validation for this file -->
        <panel noclick="1" onload="CreateBool('ui_avatars_package_loaded', true);"/>

        <!-- Female Pyromancer -->  
        <instance name="altAvatarPreviewPanel"
            heroEntryID="1"
            id="15"
            product="Hero_Pyromancer.Female"
            definition="/heroes/pyromancer"
            heroName="Hero_Pyromancer"
            hero_icon_path="/heroes/pyromancer/icon.tga"
            hasvoice="true"
            hasmodel="true"
            hastexture="true"
            hassounds="true"
            hasanimations="true"
            haseffects="false"
        />

        <!-- Sexy Moon Queen -->
        <instance name="altAvatarPreviewPanel"
            heroEntryID="2"
            id="16"
            product="Hero_Krixi.Sexy"
            definition="/heroes/krixi"
            heroName="Hero_Krixi"
            hero_icon_path="/heroes/krixi/icons/hero.tga"
            hasvoice="false"
            hasmodel="true"
            hastexture="true"
            hasanimations="true"
            haseffects="false"
        />
    </template>
</package> 
```

所以我继续为此做了我自己的课程，

```
package Lindholm.languages;

import java.util.Vector;

import Lindholm.LLException;
import Lindholm.LLString;
import Lindholm.com.LLProperty;

public class Xml {
    //STATIC variables;

    //Variables;
    private    Tag tag;
    //Setup;

    //Constructor;
    public Xml(String xml) {
        int index1;

        //First removing all the comments so they dont' disturb the decoding;
        index1 = 0;
        while((index1 = xml.indexOf("<!--",index1)) != -1) {
            int index2;

            if((index2 = xml.indexOf("-->",index1)) != -1) {
                String comment = xml.substring(index1,index2+"-->".length());
                xml = LLString.replace(xml,comment,"",1);
            }
            else {
                try {
                    throw new Exception("Invail xml code, missing \"-->\".");
                } catch (Exception e) {
                    new LLException(e);
                }
            }
        }

        //replacing all "/>" cancelings to "</[abc]>";
        index1 = 0;
        while((index1 = xml.indexOf("/>",0)) != -1) {
            int index2;

            String revstr = LLString.reverse(xml.substring(0,index1+"/>".length()));
            index2 = revstr.indexOf("<",0);
            index2 = revstr.length()-index2;
            String name = xml.substring(index2,index1).split("\\s")[0];

            xml = LLString.replace(xml,"/>","></"+name+">",1);
        }

        //Adding index's to all tags which will make the decoding easier.
        index1 = 0;
        int n = 0;
        Vector<Integer> openings = new Vector<Integer>();
        while(true) {
            int index0 = index1;
            int index2;
            n++;

            index1 = xml.indexOf("<",index0);
            index2 = xml.indexOf("</",index0);
            if(index1 != -1) {
                index1 += "<".length();
            }

            if(index1 != -1 && (index1 < index2 || index2 == -1)) {
                xml = xml.substring(0,index1)+n+"-"+xml.substring(index1);
                openings.add(n);
                index1 += (n+"-").length();
            }
            else if(index2 != -1 && (index2 < index1 || index1 == -1)) {
                xml = xml.substring(0,index2+"</".length())+openings.get(openings.size()-1)+"-"+xml.substring(index2+"</".length());
                index1 += (openings.get(openings.size()-1)+"-").length();
                openings.remove(openings.size()-1);
            }
            else {
                break;
            }
        }

        //Now let's decode it!!!
        xml = xml+"</1-?xml>";
        tag = readTag(xml,"1-?xml");
    }
    //Set;

    //Get;
    public Tag getTag() {
        return tag;
    }

    //Add;

    //Remove;

    //Do;

    //Other;
    private Tag readTag(String xmltag,String tagname) {
        int index1 = ("<"+tagname).length(); //subract 1 due the first index is 0!
        int index2;
        String body = xmltag.substring(xmltag.indexOf(">",0)+">".length(),xmltag.indexOf("</"+tagname,0));
        LLProperty properties;
        Vector<Tag> children = new Vector<Tag>();

        index2 = xmltag.indexOf(">",index1);
        String xmlproperties = xmltag.substring(index1,index2);
        properties = readProperties(xmlproperties);

        while((index1 = body.indexOf("<",0)) != -1) {
            index2 = body.indexOf(">",index1);
            String subtagname = body.substring(index1+"<".length(),index2).split("\\s")[0];

            index2 = body.indexOf("</"+subtagname,index1)+"</".length();
            index2 = body.indexOf(">",index2)+">".length();

            String subxmltag = body.substring(index1,index2);
            body = LLString.replace(body,subxmltag,"",1);

            children.add(readTag(subxmltag,subtagname));
        }
        if(children.size() == 0) {
            body = null;
        }
        tagname = tagname.split("-")[1];

        Tag tag = new Tag(tagname,body);
        tag.setProperties(properties);
        tag.setChildren(children);
        return tag;
    }
    private LLProperty readProperties(String xmlproperties) {
        LLProperty properties = new LLProperty();
        int index1 = 0;
        int index2;

        while(xmlproperties.substring(index1).contains("=")) {
            index2 = xmlproperties.indexOf("=",index1);
            String key = LLString.trimAll(xmlproperties.substring(index1,index2));
            key = key.trim();

            index1 = index2+"=".length();
            int squote = xmlproperties.indexOf("'",index1);
            int dquote = xmlproperties.indexOf("\"",index1);
            String quote = "";

            if(squote != -1 && (squote < dquote || dquote == -1)) {
                quote = "'";
            }
            else if(dquote != -1 && (dquote < squote || squote == -1)) {
                quote = "\"";
            }
            else {
                try {
                    throw new Exception("Invail xml code, missing parameters.");
                } catch (Exception e) {
                    new LLException(e);
                }
            }
            index1 = xmlproperties.indexOf(quote,index1)+quote.length();
            index2 = xmlproperties.indexOf(quote,index1);
            String value = xmlproperties.substring(index1,index2);

            properties.setProperty(key,value);
            index1 = index2+quote.length();
        }

        return properties;
    }
    public void print() {
        String xml = "";
        for(int i = 0;i <= tag.getChildren()-1;i++) {
            xml += printTag(tag.getChild(i),"");
        }
        xml =    "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"+
                xml;
        System.out.println(xml);
    }
    private String printTag(Tag tag,String height) {
        String xml =    height+"<"+tag.getTag();

        Object[] keys = tag.getProperties().stringPropertyNames().toArray();
        String prop = " ";
        if(keys.length >= 5) {
            prop = "\n"+height+"    ";
        }

        for(int i = 0;i <= keys.length-1;i++) {
            xml += prop+keys[i]+"=\""+tag.getProperties().getProperty(keys[i].toString())+"\"";
        }
        if(tag.getBody() == null) {
            xml += "/>\n";
        }
        else {
            xml +=    LLString.replace(prop+">\n","    ","",1);
            for(int i = 0;i <= tag.getChildren()-1;i++) {
                xml += printTag(tag.getChild(i),height+"    ");
            }
            xml +=    height+"</"+tag.getTag()+">\n";
        }

        return xml;
    }
    //Implements;

} 
```

并标记

```
package Lindholm.languages;

import java.util.Vector;

import Lindholm.com.LLProperty;

public class Tag {
    //STATIC variables;

    //Variables;
    private    String tag;
    private    String body;
    private    LLProperty properties;
    private    Vector<Tag> children = new Vector<Tag>();

    //Setup;

    //Constructor;
    public Tag(String name,String body) {
        tag = name;
        this.body = body;
    }
    //Set;
    public void setProperties(LLProperty properties) {
        this.properties = properties;
    }
    public void setChildren(Vector<Tag> children) {
        this.children = children;
    }

    //Get;
    public String getTag() {
        return tag;
    }
    public String getBody() {
        return body;
    }
    public LLProperty getProperties() {
        return properties;
    }
    public int getChildren() {
        return children.size();
    }
    public Tag getChild(int index) {
        return children.get(index);
    }
    public Tag getChildByTag(String tagname) {
        for(int i = 0;i <= getChildren()-1;i++) {
            if(getChild(i).getTag().equals(tagname)) {
                return getChild(i);
            }
        }
        return null;
    }
    public Tag getChildByTag(String tagname,int number) {
        for(int i = 0;i <= getChildren()-1;i++) {
            if(getChild(i).getTag().equals(tagname)) {
                if(number == 0) {
                    return getChild(i);
                }
                else {
                    number--;
                }
            }
        }
        return null;
    }

    //Add;
    public void addChild(Tag child) {
        children.add(child);
    }

    //Remove;

    //Do;

    //Other;

    //Implements;

} 
```

现在我的问题是它非常慢，还有其他方法可以完成我想要的吗？或者可能是一种让它更快的方法？，也许我的代码很糟糕？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T11:26:29.063

1.  *在任何情况下都不要*尝试编写自己的 XML 解析器。尽管表面上 XML 看起来很简单，但它实际上是一个非常复杂的标准，您会*错过*其中的一些内容。如果您也在控制 XML 创建，那么您可能会侥幸逃脱。但是，如果您是，为什么还要使用 XML？如果您不是，请准备好创建它的系统/库/供应商突然使用您自制的解析器无法处理的 XML 的高级功能。
2.  有很多可用的开源解析器。现在甚至有一个内置到 JDK 中。您可以选择以 DOM 结构将整个文档读入内存，或者获取事件流 (SAX)。开源库还允许使用其他技术，例如 XML Pull。

看着：

*   Xerces： http: [//xerces.apache.org/](http://xerces.apache.org/) - 它的一个版本与 JDK 捆绑在一起
*   JDOM： http: [//www.jdom.org/](http://www.jdom.org/)
*   伍德斯托克斯：[http ://woodstox.codehaus.org/](http://woodstox.codehaus.org/)
*   XMLPull：[http ://www.xmlpull.org/](http://www.xmlpull.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:30:58.497

您可以使用另一个 XML 解析器。我听说[VTD-XML](http://vtd-xml.sourceforge.net/)非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T13:08:00.390

在 java 中读取 XML 文件可以很容易地完成......

**1.**使用`SAX`解析器

**2.**使用`DOM`解析器

**3.**使用`XML Pull Parsing`

# sql - 在 sql 中解析 JSON 字符串

> ID：12235504
> 
> 赞同：4
> 
> 时间：2012-09-02T11:15:19.503
> 
> 标签：sql, sql-server, json, sql-server-2008

我的表中有一列 JSON 字符串，我使用的是 SQL Server 2008。关于如何解析 JSON 字符串并提取特定值的任何想法？

这是我的 JSON 字符串：

```
{"id":1234,"name":"Lasagne al frono","description":"Placerat nisi turpis, dictumst nasceture ete etiam mus nec cum platea tempori zillest. Nisi niglue, augue adipiscing ete dignissim sed mauris augue, eros!","image":"images/EmptyProduct.jpg","cartImage":"images/ArabianCoffee.jpg","basePrice":54.99,"priceAttribute":"itemPrice","attributes":[{"type":"Addons","label":"Side","attributeName":"Side","display":"Small","lookupId":8},{"type":"Addons","label":"Drink","attributeName":"drink","display":"Small","lookupId":5},{"label":"add note","type":"Text","attributeName":"notes","display":"Wide","lookupId":null}]} 
```

我需要提取“名称”的值，有什么帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T11:47:15.667

由于 sql server 没有内置 JSON 支持，因此您需要手动解析它，这会变得很复杂。

但是，您始终可以使用其他人的[JSON 解析库](http://www.simple-talk.com/sql/t-sql-programming/consuming-json-strings-in-sql-server/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:52:42.383

为了解析 JSON，您可以用 C# 或 VB.NET 编写一个简单的[CLR 函数](http://msdn.microsoft.com/en-us/library/ms189876.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-28T23:54:20.813

现在您可以使用 MS SQL Server 2016

[https://msdn.microsoft.com/en-us/library/dn921897.aspx](https://msdn.microsoft.com/en-us/library/dn921897.aspx)

# javascript - 如何在 XHTML 中添加 jQuery CDN 回退？

> ID：12235507
> 
> 赞同：3
> 
> 时间：2012-09-02T11:15:55.503
> 
> 标签：javascript, jquery, xhtml, cdn, fallback

加载[CDN 托管的 jQuery](http://docs.jquery.com/Downloading_jQuery#CDN_Hosted_jQuery)但[回退到本地文件](http://css-tricks.com/snippets/jquery/fallback-for-cdn-hosted-jquery/)是一种很好的做法。例如 HTML5 Boilerplate 是这样的：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>')</script> 
```

但是如何在 XHTML 中实现相同的功能呢？由于`document.write()`在正确的 XHTML 中不起作用（作为 发送`application/xhtml+xml`），是否有替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:21:03.810

此代码创建一个新`<script/>`元素并将其附加到页面上的第一个元素之前`<script/>`：

```
if (!window.jQuery) {
   var script = document.createElement('script');
   script.type = 'text/javascript';
   script.src = 'js/vendor/jquery-1.8.0.min.js';

   var firstScript = document.getElementsByTagName('script')[0];
   firstScript.parentNode.insertBefore(script, firstScript);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:17:46.783

`createElement`, `setAttribute`,`appendChild`像往常一样更换`document.write`或`innerHTML`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T11:42:23.217

扩展 Maxim Vi. 的回复，我使它更接近最初的想法，将其插入到它被调用的位置：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script type="text/javascript" id="jQuery">
if (!window.jQuery) {
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = '/js/jquery-1.8.0.min.js';
    var jQueryScript = document.getElementById('jQuery');
    jQueryScript.parentNode.insertBefore(script, jQueryScript);
}
</script> 
```

这样，您可以将脚本保留在页脚中（如果页面内有其他脚本，则不会过早插入或插入不同的位置）。

**编辑：**我在使用该解决方案的某些浏览器中遇到问题，但`id="jQuery"`进一步向下移动解决了它。我相应地调整了代码。

# silverlight - Silverlight 中的事件列表？

> ID：12235508
> 
> 赞同：0
> 
> 时间：2012-09-02T11:16:00.610
> 
> 标签：silverlight, silverlight-5.0

我有 3 个控件 - ContractSelection、ContractInfo 和 ContractClips

我有一个额外的类 - ContractStructureService。这包含一个属性 - SelectedContract

合同选择控件在组合框中向用户显示合同列表

当用户选择合同时，服务上的 SelectedContract 会发生变化。

我知道如何做所有这些 - 棘手的一点是我希望在所选合同发生更改时告知 ContractInfo 和 ContractClips

```
public class FlexContractStructureService : IFlexContractStructureService
{

    #region IFlexContractStructureService Members

    private Contract _selectedContract;

    public ViewModels.Contract SelectedContract
    {
        get { return _selectedContract; }
        set
        {
            _selectedContract = value;
            OnSelectedContractChanged(new SelectedContractChangedEventArgs(SelectedContract));
        }
    }

    public event EventHandler SelectedContractChanged;

    protected virtual  void OnSelectedContractChanged(SelectedContractChangedEventArgs e)
    {
        if (SelectedContractChanged != null)
        {
            SelectedContractChanged(this, e);
        }

    } 
```

如何使用 Silverlight 执行此操作？

我假设如果我在 ContractInfo 和 ContractClipInfo 中都有代码，例如

```
service.SelectedContractChanged += ContractChanged 
```

这是否意味着当我调用 OnSelectedContract 更改时，只通知 1 个对象？

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:01:44.410

这里有几个问题合二为一。

对于最后一部分，an`event`意味着多播，即能够通知代表列表。所以，不，不仅通知了 1 个对象。

现在，对于主要问题，在 Silverlight 中，您有几个选项，具体取决于您已经在使用什么：

*   如果您可以获得对相关对象的直接引用，则可以按照您的建议使用事件和委托。这会导致可能不需要的耦合，并且还会带来泄漏/委托垃圾邮件的风险。这意味着：您必须非常小心地取消订阅每个添加到事件的委托。

*   您可以使用非耦合通信模式，例如`Messenger`（MVVM Light）或类似的东西（广播公司/订阅者）。您在这里有一个广播点：`OnSelectedContractChanged`您可以在其中发送通知（再次在 MVVM Light 中：）`Messenger.Default.Send(new SelectedContractChangedNotification(_selectedContract));`。可以在应用程序的任何其他地方（`Messenger.Default.Register<SelectedContractChangedNotification>(this, OnSelectedContractChanged);`）的任何地方接收此通知，并根据需要使用尽可能多的接收器。

# mysql - 如何首先按 A 列排序，返回前 3 个，然后在一个查询中按 B 列排序结果？

> ID：12235509
> 
> 赞同：3
> 
> 时间：2012-09-02T11:16:00.637
> 
> 标签：mysql

（请参阅[SQLFiddle](http://sqlfiddle.com/#!2/c9ff0/4)以获得这篇文章的工作示例）

我有一张包含股票信息的表格，如下所示：

```
sp100_id  _date         bullishness  agreement
----------------------------------------------
1         2011-03-16    1.01          0.33
1         2011-03-17    0.85          1.28
1         2011-03-18    0.89          1.25
1         2011-03-21    1.46          1.21
1         2011-03-22    0.39          2.53
2         2011-03-16    3.07          1.27
2         2011-03-17    2.09          0.80
2         2011-03-18    0.91          0.12
2         2011-03-21    1.50          0.00
2         2011-03-22    2.62          1.10
3         2011-03-16    0.73          1.13
3         2011-03-17    1.13          1.21
3         2011-03-18    1.12          0.45
3         2011-03-21    1.00          1.01
3         2011-03-22    1.00          0.53
4         2011-03-16    0.40          1.10
4         2011-03-17    2.40          0.03
4         2011-03-18    3.16          0.10
4         2011-03-21    0.86          0.50
4         2011-03-22    1.00          0.10 
```

我需要将公司 ( `sp100_id`) 按其平均`bullishness`时间排序为前 3 名：

```
SELECT 
  sp100_id, 
  AVG(bullishness) as bullishness, 
  AVG(agreement) AS agreement 
FROM stocks 
WHERE _date BETWEEN '2011-03-16' AND '2011-03-22' 
GROUP BY sp100_id LIMIT 3 
```

这工作正常，因为结果是

```
SP100_ID    BULLISHNESS AGREEMENT
2           2.038           0.658
4           1.564           0.366
3           0.996           0.866 
```

现在我有了前 3 名，我需要按 升序对前 3 名进行重新排序`AGREEMENT`：

```
SP100_ID    BULLISHNESS AGREEMENT
4           1.564           0.366
2           2.038           0.658
3           0.996           0.866 
```

这可能与一个查询有关吗？我尝试了以下但没有奏效。它仍然只订购`bullishness`

```
SELECT 
  sp100_id, 
  AVG(bullishness) as bullishness, 
  AVG(agreement) AS agreement 
FROM stocks 
WHERE _date BETWEEN '2011-03-16' AND '2011-03-22' 
GROUP BY sp100_id 
ORDER BY bullishness DESC, agreement ASC LIMIT 3 
```

所以要明确：（1）我需要找到平均牛市度最高的前 3 名公司（2）这个前 3 名公司需要从最低到最高协议进行排序。最好用一个查询。你知道如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:53:07.307

它被称为*结构化*查询语言，因为您可以构建查询（也称为虚拟表）嵌套在其他查询中的结构。

获取您的第一个查询，这是正确的，但它需要自己的 ORDER BY 子句，并将其嵌套在另一个中，就像这样。

```
SELECT * 
  FROM (
           SELECT sp100_id,  
                  AVG(bullishness) as bullishness, 
                  AVG(agreement) AS agreement 
             FROM stocks 
            WHERE _date BETWEEN '2011-03-16' AND '2011-03-22' 
         GROUP BY sp100_id
         ORDER BY bullishness DESC
            LIMIT 3
  ) subquery
  ORDER BY agreement ASC 
```

去小提琴：[http ://sqlfiddle.com/#!2/c9ff0/7/0](http://sqlfiddle.com/#!2/c9ff0/7/0)

# sockets - 可以先发送 UDP 消息然后发送 TCP 消息有什么好处吗？

> ID：12235511
> 
> 赞同：0
> 
> 时间：2012-09-02T11:16:07.763
> 
> 标签：sockets, networking, tcp, udp, real-time

我有一个通过 LAN 与其他客户端实时通信的应用程序。该应用程序要求数据包有序且全部到达。它还需要尽可能快的传输，在这件事上我似乎对 TCP 有一些问题。

所以我在想这个，作为一个没有经验的网络程序员，如果我先发送一个 UDP 协议消息，然后用 TCP 发送相同的数据会怎样。如果 UDP 消息到达，我会尽快收到它，否则我仍然有 TCP 消息，以确保我至少会收到数据包。显然，我会通过给每条消息一个 ID 或类似的东西来确保我不会两次读取相同的数据。

**这是什么好方法吗？**我在想也许同时发送 tcpmessage 只会减慢 udp 消息的速度，所以无论如何它都不会产生影响。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:22:09.013

不，这不是一个好方法。

您将网络带宽翻了一番，并显着增加了网络代码的复杂性，但收益却微乎其微。

TCP 和 UDP 具有非常不同的特性。如果您关心数据是否及时到达，如果数据迟到就没有用，那么 TCP 就没有用，因此您应该使用并且只使用 UDP。如果您不关心数据是否及时到达，那么 UDP 就没有用，因为它不可靠。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:25:39.297

不，这根本不是一个好方法。您现在将有两倍的数据被发送。对于实时通信，UDP 是最好的方法。您应该设计您的接收器算法来管理数据到达并对其进行排序以及某些数据的未到达。

发送的数据类型也可能是决定性因素。如果它的交易是金融类的，udp 不是一个好主意。但是你应该在不同的网络上。

如果是视频数据，实时性很重要，损失是可以容忍的。

因此，看看您是否可以使用数据的属性来很好地管理 udp 连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T11:29:03.033

UDP 有非常具体的用例。即说一个发送玩家坐标的在线游戏。您声明需要订单和确认，因此 TCP 似乎是最明智的方法。

尽管只是为了混合在一起，TCP 有时会让您感到惊讶，并且在特定情况下会更好地发挥性能。

TCP 将在通过网络发送数据之前尝试缓冲数据（更有效地使用带宽）。另一方面，UDP 立即将数据包通过网络。

现在想象一下通过网络写入大量小数据包，UDP 可能会导致拥塞，而 TCP 可以更好地控制。

# php - 使用 Fake referer 重定向到另一个页面

> ID：12235513
> 
> 赞同：-5
> 
> 时间：2012-09-02T11:16:13.267
> 
> 标签：php, redirect

> **可能重复：**
> [PHP：使用 header() 更改引用者](https://stackoverflow.com/questions/9616977/php-changing-referer-with-header)

我有一个网站 (www.king370.co.cc)，我想在上面托管一个脚本。该脚本的访问者应该被重定向到 (king370.blogspot.com)。到目前为止，它可以使用 Meta-Refresh 或 php 标头来完成。如果我使用 Meta-Refresh，那么博主的统计数据显示有来自 www.king370.co.cc 的访问，它被称为引荐来源网址。我想在重定向之前更改该引荐来源网址。所以在这里我解释了我的应用程序的完整流程。

用户在 hello.php 文件中访问[http://www.king370.co.cc/hello.php](http://www.king370.co.cc/hello.php) 我写了一个元刷新标签，所以页面重定向到[http://king370.blogspot.com](http://king370.blogspot.com) 在博客统计中，' [http://www.king370.co.cc/hello.php](http://www.king370.co.cc/hello.php) '，显示为推荐 URL。我希望将该推荐 URL 更改为其他域，例如“www.somedomain.com”

任何客户端或服务器端技术的解决方案都是可以接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:42:43.027

我不会使用脚本来做到这一点。您真正想要的是您的博客托管在您的域而不是博客的域上。你可以在这里找到如何做到这一点：http: [//support.google.com/blogger/bin/static.py ?hl=en&ts=1233381&page=ts.cs](http://support.google.com/blogger/bin/static.py?hl=en&ts=1233381&page=ts.cs)

# objective-c - 如何从 NSArray 中的 NSDictionaries 获取值

> ID：12235514
> 
> 赞同：12
> 
> 时间：2012-09-02T11:16:18.347
> 
> 标签：objective-c, ios, nsarray, nsdictionary

我想知道是否可以`NSDictionary`从`NSArray`.

例子：

```
NSArray *array = @[ @{@"title" : @"title 1", @"description" : @"description 1"},
@{@"title" : @"title 2", @"description" : @"description 2"}, 
@{@"title" : @"title 3", @"description" : @"description 3"} ]; 
```

我想`NSMutableArray`在我的`NSArray`. 也许我做错了什么，我的方法完全不好。

我知道我可以创建一个新类并拥有 2 个属性（标题、描述），但是有没有办法不创建一个类或创建一个新的`NSMutableArray`并遍历我的数组？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-02T11:19:39.657

简单的：

```
NSArray *titles = [array valueForKey:@"title"]; 
```

这是有效的，因为`NSArray`' 的实现`valueForKey:`返回一个新数组，其中包含`valueForKey:`每个数组对象的结果。

# c# - ExcelPackage：Office Open XML

> ID：12235515
> 
> 赞同：3
> 
> 时间：2012-09-02T11:16:22.950
> 
> 标签：c#

我是新手`Open Office XML`，我想知道 XLPackage 采用什么文件扩展名。

例如，我假设我只需要输入我正在使用的 CSV 文件的文件位置，但它不起作用，我是否必须将文件转换为`.xlsx`或者是否还有其他`XLPackage`我应该使用的东西？

问题是，一旦开始使用新的 OpenDialog，我就找不到我的文件了。我可能只是错过了一些明显的东西。文件包含损坏的数据，FileFormatException，我假设我需要在使用前转换文件？

我很感激任何反馈。

一些代码：

```
 FileInfo existingFile = new FileInfo(eFilePath);
        using (ExcelPackage xlPackage = new ExcelPackage(existingFile)) // I think the                                       issue is here.
        {
            ExcelWorksheet exeedSheet = xlPackage.Workbook.Worksheets[1];
            //Total rows
            for (int row = 1; row > 0; ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T20:40:43.837

如果您使用的是 CSV，则 ExcelPackage 对您正在做的事情来说太过分了。

CSV：

```
using (var Sr = new StreamReader("\\SomeCoolFile.CSV"))
{
    var text = Sr.ReadToEnd();
    Sr.Close();
    text = text.Replace("\n", string.Empty);
    var lines = text.Split('\r');
    var info = lines.Select(line => line.Split(',')).ToList();
    ......
} 
```

Excel包：

```
using (var fs = new FileStream("\\SomeCoolFile.xlsx", FileMode.Open))
{
    using (var package = new ExcelPackage(fs))
    {
        var workBook = package.Workbook;
        .....
     }
 } 
```

# html - Postgresql -- 清除字符串中间的 HTML 标签

> ID：12235517
> 
> 赞同：1
> 
> 时间：2012-09-02T11:16:36.537
> 
> 标签：html, regex, postgresql

如果我在 Postgresql 9.1 列中有这个：

```
foo foo <th id="ddd"> foo foo <th id="www"> foo 
```

我希望它更新为：

```
foo foo <th> foo foo <th> foo 
```

我试过 regex_replace，但我没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:38:22.587

假设你有一个这样的表：

```
CREATE TABLE table1
(
  a character varying NOT NULL,
  ...
) 
```

您可以使用以下 regexp_replace：

```
update table1 set a = regexp_replace(a, '(.*?)<(\w+)\s+.*?>(.*)', '\1<\2>\3', 'g'); 
```

该`'g'`标志表示替换所有匹配的模式，而不仅仅是第一个。

使用此输入：

```
foo foo <th id="ddd"> foo foo <th id="www"> foo<div id="hey"> 
```

我得到以下输出：

```
foo foo <th> foo foo <th> foo<div> 
```

# perl - perl中如何创建矩阵格式

> ID：12235518
> 
> 赞同：0
> 
> 时间：2012-09-02T11:16:36.127
> 
> 标签：perl

我有一个数组数组，其中每个数组都像：

```
clusterA gene1 1
clusterA gene2 0
clusterB gene1 1
clusterB gene2 0 
```

我想生成一个文件，如：

```
name       gene1    gene2 
clusterA    1         0
clusterB    1         0 
```

当前尝试：

```
if (condition) {

    @array = ($cluster, $genes, "1");
}
elsif (not condition) {

    @array = ($cluster, $genes, "0");
}
push @AoA, [ @array ]; 
```

@A0A 是我的数组数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:38:36.323

该解决方案不提前知道基因的名称。它将为所有看到的基因创建列。而且，它使用散列的散列。我解决了一个类似的问题，并且能够在[此处](http://perlguru.com/gforum.cgi?post=71491;sb=post_latest_reply;so=ASC;forum_view=forum_view_collapsed;guest=5787217)使用解决方案的某些相同部分。

```
#!/usr/bin/perl
use strict;
use warnings;

my @array = map [split], split /\n/, <<EOF;
clusterA gene1 1
clusterA gene2 0
clusterB gene1 1
clusterB gene2 0
clusterC gene3 9
EOF

my %data;
for my $aref (@array) {
    $data{$aref->[0]}{$aref->[1]} = $aref->[2]; 
}

my %seen;
my @genes = sort
            grep ! $seen{$_}++,
            map keys %$_, values %data;

my $format = "%-15s" . "%-10s" x @genes . "\n";

printf $format, 'Cluster', @genes;

for my $name (sort keys %data) {
    my $href = $data{$name};
    printf $format, $name, map defined $_ ? $_ : 'none', @$href{ @genes };
} 
```

这产生了下面的输出。

```
Cluster        gene1     gene2     gene3
clusterA       1         0         none
clusterB       1         0         none
clusterC       none      none      9 
```

**更新：**首先创建哈希散列而不是数组数组可能更容易。喜欢：

```
my %data;
$data{$cluster}{$genes} = condition ? 1 : 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:29:05.303

```
my %HoH;

foreach my $row (@AoA)
{
  $HoH{$row->[0]}{$row->[1]} = $row->[2];
}

print <<EOF;
name       gene1    gene2
clusterA    $HoH{clusterA}{gene1}         $HoH{clusterA}{gene2}
clusterB    $HoH{clusterB}{gene1}         $HoH{clusterB}{gene2}
EOF 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T11:34:41.843

```
use warnings;
use strict;

my @AoA = ( ['a', 'b', 'c'], ['d', 'e', 'f'] );

open my $outf, ">", "output"
    or die();

print $outf join(" ", qw/name gene1 gene2/), "\n";
foreach my $arr (@AoA) {

    my @data = @{$arr};
    print $outf join(" ", @data), "\n";
}
close $outf; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T12:33:28.017

沙克想要总数吗？如果是这样，答案将更像（将所有文件 I/O 排除在外以简化测试）：

```
my @AOA = (
  [ qw(clusterA gene1 1) ],
  [ qw(clusterA gene2 0) ],
  [ qw(clusterB gene1 1) ],
  [ qw(clusterB gene2 0) ],
);

my %clusters;
my @genes = ( 0, 0 );

foreach my $array ( @AOA ) {

    my ( $cluster, $gene, $value ) = @$array;
    if ( $gene =~ /^gene(\d+)$/ ) {

        my $v = $1; 
        $clusters{$cluster} = [ 0, 0 ] 
                   unless ( exists $clusters{$cluster} );
        $clusters{$cluster}->[$v-1] += $value;
    }   
}

my $format = '%-12s %6s %6s'."\n";
printf( $format, qw( name gene1 gene2 ) );

foreach my $cluster ( sort keys %clusters ) {

    printf $format, $cluster, @{ $clusters{$cluster} };
} 
```

# objective-c - NSNumberFormatter 编码

> ID：12235526
> 
> 赞同：0
> 
> 时间：2012-09-02T11:18:08.727
> 
> 标签：objective-c, ios, cocoa

我正在使用 NSNumberFormatter 将数字转换为卢布货币表示。这是我的代码：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle: NSNumberFormatterCurrencyStyle];
[formatter setCurrencyCode:@"RUB"];

NSLog(@"String With Number:%@",[formatter stringFromNumber:sum]); 
```

使用模拟器时一切正常，但在真实设备上，我不断收到编码损坏的字符串。

例子：

我应该得到什么：

卢布99.00

我真正得到的：

99,00¬†—А—Г–±</p>

我该如何解决？为什么会这样？

# google-apps-script - 如何获取文档一部分的链接（标题、段落、部分...）

> ID：12235527
> 
> 赞同：3
> 
> 时间：2012-09-02T11:18:41.403
> 
> 标签：google-apps-script

我正在使用一些标题结构动态创建文档

```
doc = DocumentApp.create("My Document");
doc.appendParagraph("Main").setHeading(DocumentApp.ParagraphHeading.HEADING1);
var section = doc.appendParagraph("Section 1");
section.setHeading(DocumentApp.ParagraphHeading.HEADING2); 
```

我可以在线打开它，插入*目录*，并可以通过 url 直接访问“第 1 节”，例如： *https ://docs.google.com/document/d/1aA...FQ/edit#heading=h.41bpnx2ug57j*

问题是：如何在运行时获得与代码中的“第 1 节”类似的 url/id 并稍后将其用作链接？

如果我不能 - 有没有办法设置锚/书签之类的东西并获取它的网址？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T15:38:59.503

开始深入测试 Google Apps 时，我遇到了与目录管理相关的有限功能的问题。我碰到了您提出的代码，并以此为起点编写了我自己的函数来格式化目录： - 应用适当的标题样式， - 对不同部分进行编号。

我希望这可以帮助你们中的一些人改进 Google 文档模板：

```
/**
* Used to properly format the Table of Content object
*/
function formatToc() {

  //Define variables
  var level1 = 0;
  var level2 = 0;

  // Define custom paragraph styles.
  var style1 = {};
  style1[DocumentApp.Attribute.FONT_FAMILY] = DocumentApp.FontFamily.ARIAL;
  style1[DocumentApp.Attribute.FONT_SIZE] = 18;
  style1[DocumentApp.Attribute.BOLD] = true;
  style1[DocumentApp.Attribute.FOREGROUND_COLOR] = '#ff0000';

  var style2 = {};
  style2[DocumentApp.Attribute.FONT_FAMILY] = DocumentApp.FontFamily.ARIAL;
  style2[DocumentApp.Attribute.FONT_SIZE] = 14;
  style2[DocumentApp.Attribute.BOLD] = true;
  style2[DocumentApp.Attribute.FOREGROUND_COLOR] = '#007cb0';

  // Search document's body for the table of contents (assuming there is one and only one).
  var toc = doc.getBody().findElement(DocumentApp.ElementType.TABLE_OF_CONTENTS).getElement().asTableOfContents();

  //Loop all the table of contents to apply new formating
  for (var i = 0; i < toc.getNumChildren(); i++) {

    //Search document's body for corresponding paragraph & retrieve heading
    var searchText = toc.getChild(i).getText();
    for (var j=0; j<doc.getBody().getNumChildren(); j++) {
      var par = doc.getBody().getChild(j);
      if (par.getType() == DocumentApp.ElementType.LIST_ITEM) {
        var searchcomp = par.getText();
        if (par.getText() == searchText) {
          // Found corresponding paragrapg and update headingtype.
          var heading = par.getHeading();
          var level = par.getNestingLevel();
        }
      }
    }

    //Insert Paragraph number before text
    if (level==0) {
      level1++;
      level2=0;
      toc.getChild(i).editAsText().insertText(0,level1+". ");
    }
    if (level==1) {
      level2++;
      toc.getChild(i).editAsText().insertText(0,level1+"."+level2+". ");
    }

    //Apply style corresponding to heading
    if (heading == DocumentApp.ParagraphHeading.HEADING1) {
      toc.getChild(i).setAttributes(style1);
    }
    if (heading == DocumentApp.ParagraphHeading.HEADING2) {
      toc.getChild(i).setAttributes(style2);
    }

  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-03T08:19:30.567

现在，如果没有 TOC，就不可能获得文档部分（部分、段落等）链接。也没有办法从 GAS 管理书签。问题跟踪器存在[问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=803)。您可以为该问题加注星标以进行宣传。

有一个使用 TOC 的解决方法。以下代码显示了如何从 TOC 获取 URL。它仅在目录存在时才有效，如果删除它，链接将不再有效。

```
function testTOC() {
  var doc = DocumentApp.openById('here is doc id');
  for (var i = 0; i < doc.getNumChildren(); i++) {
    var p = doc.getChild(i);
    if (p.getType() == DocumentApp.ElementType.TABLE_OF_CONTENTS) {
      var toc = p.asTableOfContents();
      for (var ti = 0; ti < toc.getNumChildren(); ti++) {
        var itemToc = toc.getChild(ti).asParagraph().getChild(0).asText();
        var itemText = itemToc.getText();
        var itemUrl = itemToc.getLinkUrl();
      }
      break;
    }
  }
} 
```

该函数迭代所有文档部分，找到第一个 TOC，迭代它和变量`itemText`，并`itemUrl`包含一个 TOC 项目文本和 URL。URL 有`#heading=h.uuj3ymgjhlie`格式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-25T00:24:39.333

自从编写接受的答案以来，就引入了在 Google Apps 脚本代码中管理书签的功能。因此可以获得*类似*的URL，尽管与示例中的 URL 不完全相同。您可以在节标题处手动插入书签，并使用该书签链接到节标题。就问题而言，似乎就足够了。这是一些示例代码（包括对问题代码的轻微修改）：

```
var doc = DocumentApp.getActiveDocument();
var body = doc.getBody();
body.appendParagraph("Main").setHeading(DocumentApp.ParagraphHeading.HEADING1);
var section = body.appendParagraph("Section 1");
section.setHeading(DocumentApp.ParagraphHeading.HEADING2);

// create and position bookmark
var sectionPos = doc.newPosition(section, 0);
var sectionBookmark = doc.addBookmark(sectionPos);

// add a link to the section heading
var paragraph = body.appendParagraph("");
paragraph.appendText("Now we add a ");
paragraph.appendText("link to the section heading").setLinkUrl('#bookmark=' + sectionBookmark.getId());
paragraph.appendText("."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T11:39:00.130

该文档是否必须是原生 Google 文档类型（即 application/vnd.google-apps.document）？

如果您将文档存储为 text/html，您将更好地控制如何组装文档以及如何公开它，例如使用锚点。

# jquery - 添加对象组件而不替换旧组件 - 制作 JSON 数组

> ID：12235529
> 
> 赞同：0
> 
> 时间：2012-09-02T11:18:55.180
> 
> 标签：jquery, html, arrays, json

我想使用 jQuery 制作 JSON 数组，但遇到了一些问题：

```
<html>
    <head>
        <title>Demo - Push Data Object</title>
        <script type="text/javascript" language="javascript" src="js/jquery.js"></script>
        <script>
            var obj = new Object();

            $(document).ready(function() {
                $("#add").click(function() {
                    item('Item 1', '1000');
                    item('Item 2', '2000');
                    console.log(JSON.stringify(obj));
                });
            });

            function item(itemNo, price) {
                obj.itemNo = itemNo;
                obj.price = price;
            };
        </script>
    </head>

    <body>
        <input id="add" type="button" value="Add Object" />
    </body>
</html> 
```

单击按钮时`add`，它将打印： `{"itemNo":"Item 2","price":"2000"}`。

我想要实现的是这样的：

```
{
    {
        "itemNo":"Item 1",
        "price":"1000"
    }, 
    {
        "itemNo":"Item 2",
        "price":"2000"
    }
} 
```

**我应该在上面的代码中更改什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:22:35.333

您想要的输出不是有效的 JSON；因为你有一个项目列表，所以外括号应该是`[ ]`. 以下代码生成（[**Demo**](http://jsfiddle.net/w9sBh/)）：

```
var objs = [];

$(document).ready(function() {
    $("#add").click(function() {
        objs.push(item('Item 1', '1000'));
        objs.push(item('Item 2', '2000'));
        console.log(JSON.stringify(objs));
    });
});

function item(itemNo, price) {
    return { 
        itemNo : itemNo,
        price : price
    };
}; 
```

* * *

输出：

```
[
    {
        "itemNo":"Item 1",
        "price":"1000"
    }, 
    {
        "itemNo":"Item 2",
        "price":"2000"
    }
] 
```

# mysql - 如何删除mysql表中的重复记录？

> ID：12235530
> 
> 赞同：0
> 
> 时间：2012-09-02T11:19:05.020
> 
> 标签：mysql

> **可能重复：**
> [如何从 MySQL 表中删除重复的行](https://stackoverflow.com/questions/5770228/how-to-delete-duplicate-rows-from-a-mysql-table)

我有一个包含重复记录的 mysql 表，我想删除所有重复记录。我怎样才能做到这一点？我的表只有几列，1 列可以有重复的记录。这是关于用户注册的，我不希望电子邮件被注册两次。我无法在输入之前检查电子邮件，因为这会使注册过程复杂化，并且必须尽可能简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:20:29.483

您可以以多表形式执行自联接[`DELETE`](http://dev.mysql.com/doc/en/delete.html)：

```
DELETE u1
FROM   users u1 JOIN users u2 USING (email)
WHERE  u1.timestamp < u2.timestamp 
```

# javascript - 如何区分按下了哪个“Enter”键？

> ID：12235531
> 
> 赞同：1
> 
> 时间：2012-09-02T11:19:04.927
> 
> 标签：javascript, keycode, enter, onkeypress

所以我有这个 textarea 来监听`Enter`按键事件。但我只希望它响应`Enter`数字键盘上按下的键，而不是字母旁边的键。

我可以使用什么方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:24:24.383

两个键使用相同的键码 (13) 触发完全相同的事件。在 JavaScript 中不可能区分它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:26:08.173

正常输入和键盘输入没有不同的keyCode。在这两种情况下都是 13

[http://unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T11:32:54.607

他们实际上做同样的事情并且无法区分

# android - 如何在 ImageView 中找到图像的中心点和边框

> ID：12235544
> 
> 赞同：1
> 
> 时间：2012-09-02T11:21:17.393
> 
> 标签：android, image, imageview

有一个 ImageView，它有一个 Image，它已被缩放和旋转。

看图片：

![在此处输入图像描述](../Images/9cda1fdd034a242f663feb4ec46bb5a6.png)

图像按比例缩放`android.graphics.Matrix`。

你可以看到有一个红色的点是图像的中心点，还有一个蓝色的边框。如何计算它们？

（更新：我想对蓝色边框内的女孩图像进行操作，而不是整张图片，那是背景）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:15:48.813

两者之间存在数学依赖关系。如果有其他可用信息：-假设矩形的所有角都有直角-。

```
center.X = (aCorner.X + oppositeCorner.X)/2;
center.Y = (aCorner.Y + oppositeCorner.Y)/2; 
```

其中 aCorner 是任意角，且对角是 aCorner 的对角。

这是微不足道的，包括计算边界的更多艰苦工作（以及更多信息；中心位置，图片的宽度和高度以及旋转角度）。假设图像的宽度为“w”，高度为“h”，角度为“a”，中心为“cX”和“cY”。第一个角落；

```
length = sqrt(w^2+h^2)/2;
x = (length)*(cos(a)*(-w/length) - (h/length)*sin(a)) + cX;
y = (length)*(sin(a)*(-w/length) + (h/length)*cos(a)) + cY; 
```

第二个角落；

```
x = (length)*(cos(a)*(w/length) + sin(a)*(h/length)) + cX;
y = (length)*(cos(a)*(h/length) - sin(a)*(w/length)) + cY; 
```

第三;

```
x = -(length)*(cos(a)*(-w/length) + (h/length)*sin(a)) + cX;
y = -(length)*(sin(a)*(-w/length) - (h/length)*cos(a)) + cY; 
```

第四;

```
x = -(length)*(cos(a)*(w/length) - sin(a)*(h/length)) + cX;
y = (length)*(cos(a)*(h/length) - sin(a)*(w/length)) + cY; 
```

长度是矩形对角线的一半。cos和sin的内部是三角变换的结果：

```
sin(a+b) = sin(a)*cos(b) + cos(a)*sin(b)
[....] 
```

cX 和 cY 用于将角点从任意坐标系转换到特定坐标系。

我知道，我知道这有点矫枉过正。Matrix 类可能有它自己的这些功能。我相信如果有，其中使用的方法可以分解为我在这里描述的方法。

注意：角度 a - 实际上甚至是 sin(a) 和 cos(a)，这更好 - 可以通过
Matrix.getValues(float[] values)访问

大多数 2D 矩阵使用这种方案：

```
| sin(a) 0       0    |
| 0      -cos(a) 0    |
| 0      0       scale| 
```

我不确定 Android API 的特定实现。

顺便说一句，上面可能有一些签名错误，所以要小心。

# opengl - 如何从 XYZ 生成线性 RGB 贴图以对网格进行着色？

> ID：12235548
> 
> 赞同：0
> 
> 时间：2012-09-02T11:22:11.047
> 
> 标签：opengl, map, rgb, mesh, colorize

我想要的是，我想将颜色线性应用于网格。它可以是从 Vertex[0] 到 Vertex[n] 或从 -Min.x 到 Max.x。Min.x 应该是深红色，然后随着顶点位置的增加，红色应该变成绿色，然后再次增加并以蓝色结束。第二个选项可能是，如果我指定任何随机 Vertex[any] 并从该顶点开始颜色映射，那么颜色映射应该以增量顺序转换为 RGB。您可以将其称为从 XYZ 到 RGB 的颜色图。我怎样才能做到这一点 ？任何的想法 ？首先如何将 XYZ 转换为 RGB，然后如何制作颜色图或渐变或任何你能说的。

附图可以给你一个想法。在该图中，归一化的顶点 X=R、Y=G、Z=B 被渲染为颜色。它只是一个测试。给我一个想法，我怎样才能使它成为完美的线性地图。

![在此处输入图像描述](../Images/a035c953bfb41d241c8cd9cf367e4c42.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T14:12:37.067

首先，您必须选择一个范围来映射颜色值，因为 RGB 分量是有限的，而您可能有一个巨大的网格。考虑使用网格的边界框。给定`p1`和`p2`分别是盒子的最小和最大角，这样的映射可能是：

```
color[i] = 255 * (position[i] - p1) / (p2 - p1); 
```

您可以在顶点着色器中执行此映射，也可以使用 CPU 来获取顶点颜色属性的数组，您可以直接在 OpenGL 中使用平滑插值。请注意，默认情况下应启用平滑插值。对于 OpenGL 2.1，使用`glShadeModel (GL_SMOOTH)`启用它。

如果您的网格是 UV 映射的，并且您希望颜色映射到纹理上，请使用纹理坐标作为位置渲染您的网格，然后使用`glReadPixels()`或[FBO 检索渲染的图像。](http://www.opengl.org/wiki/Framebuffer_Object "OpenGL 帧缓冲对象")

# oop - 类处理程序而不是对象处理程序

> ID：12235550
> 
> 赞同：1
> 
> 时间：2012-09-02T11:22:47.457
> 
> 标签：oop, design-patterns

我被教导并因此被限制为将对象作为处理程序传递。我在我的 Java 和 Objective-C 编程项目中都使用了这种方法，并且它很有效。

然而，我偶然发现了一个框架，它将一个类注册为处理程序，而不是一个对象。我希望该框架是开源的，所以我可以看到它是如何工作的，但它不是：/。

谨防！注册类后，我实现了**非静态**方法来处理事件。如果它们是静态的，那么它的工作原理就很明显了，我真的很讨厌这种方法。

所以，这些是我的问题：

*   类处理程序如何工作以及与*普通*对象处理程序有何不同？
*   你什么时候推荐一个而不是另一个？
*   这种*模式*有名字吗？

* * *

我所说的对象处理程序是什么意思：

**爪哇：**

```
button.addActionListener(handlerObject); 
```

我所说的类处理程序是什么意思：

**爪哇：**

```
object.addCrazyHandler(MyHandler.class); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:02:48.810

Java（不确定 Objective-C）允许您通过[反射 API](http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/reflect/package-summary.html)对对象及其类进行自省，因此对[Class](http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/Class.html)`Object.getClass()`上的方法和所有方法进行自省。您不仅可以找到类的所有构造函数、方法、字段、实现的接口和超类，还可以调用它们（尽管它比直接调用慢）：在构造函数、方法或字段上。例如（省略异常处理程序），通过反射调用无参数构造函数：`newInstance()``invoke()``get()``set()`

```
Object o = SomeClass.class.getConstructor().newInstance(); 
```

许多框架都使用它：例如，[TestNG](http://testng.org/)或[JUnit](http://www.junit.org/)等测试框架使用它来实例化测试类。当您使用 XML 配置时， [Spring](http://www.springsource.org/spring-framework)也是如此。

在您的情况下，我想框架想要控制处理程序的生命周期，如果您为它提供实例，它就无法控制。另一种选择是采用工厂的实例，但这可能过于严格。这也意味着要编写更多样板代码，因为它可以轻松创建对象本身。

# python - Python中的R函数rep（）（复制列表/向量的元素）

> ID：12235552
> 
> 赞同：65
> 
> 时间：2012-09-02T11:23:05.523
> 
> 标签：python

R 函数 rep() 复制向量的每个元素：

```
> rep(c("A","B"), times=2)
[1] "A" "B" "A" "B" 
```

这就像 Python 中的列表乘法：

```
>>> ["A","B"]*2
['A', 'B', 'A', 'B'] 
```

但是使用 rep() R 函数也可以为向量的每个元素指定重复次数：

```
> rep(c("A","B"), times=c(2,3))
[1] "A" "A" "B" "B" "B" 
```

Python中有这样的功能吗？不然怎么定义呢？顺便说一句，我也对这种用于复制数组行的函数感兴趣。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-02T11:34:44.047

使用`numpy`数组和[numpy.repeat](http://docs.scipy.org/doc/numpy/reference/generated/numpy.repeat.html)函数：

```
import numpy as np

x = np.array(["A", "B"])
print np.repeat(x, [2, 3], axis=0)

['A' 'A' 'B' 'B' 'B'] 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-02T11:31:59.617

不确定是否有可用的内置功能，但您可以尝试以下操作：

```
>>> lis = ["A", "B"]
>>> times = (2, 3)
>>> sum(([x]*y for x,y in zip(lis, times)),[])
['A', 'A', 'B', 'B', 'B'] 
```

请注意，`sum()`以二次时间运行。所以，这不是推荐的方式。

```
>>> from itertools import chain, izip, starmap
>>> from operator import mul
>>> list(chain.from_iterable(starmap(mul, izip(lis, times))))
['A', 'A', 'B', 'B', 'B'] 
```

**时序对比：**

```
>>> lis = ["A", "B"] * 1000
>>> times = (2, 3) * 1000
>>> %timeit list(chain.from_iterable(starmap(mul, izip(lis, times))))
1000 loops, best of 3: 713 µs per loop
>>> %timeit sum(([x]*y for x,y in zip(lis, times)),[])
100 loops, best of 3: 15.4 ms per loop 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-02T11:37:02.967

既然你说“数组”并提到 R。你可能无论如何都想使用 numpy 数组，然后使用：

```
import numpy as np
np.repeat(np.array([1,2]), [2,3]) 
```

编辑：既然你提到你也想重复行，我认为你应该使用 numpy. `np.repeat`有一个轴参数来做到这一点。

除此之外，也许：

```
from itertools import izip, chain, repeat
list(chain(*(repeat(a,b) for a, b in izip([1,2], [2,3])))) 
```

因为它没有假设您有一个列表或字符串要相乘。尽管我承认，将所有内容作为参数传递到链中可能并不完美，因此编写自己的迭代器可能会更好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-02T11:33:22.157

```
l = ['A','B']
n = [2, 4] 
```

您的示例使用已经是可迭代的字符串。您可以生成类似于列表的结果字符串。

```
''.join([e * m for e, m in zip(l, n)])
'AABBBB' 
```

更新：这里不需要列表理解：

```
''.join(e * m for e, m in zip(l, n))
'AABBBB' 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-02-01T16:33:43.140

你怎么看这种方式？

重复一个值：

```
>>> repetitions=[]
>>> torep=3
>>> nrep=5
>>> for i in range(nrep):
>>>     i=torep
>>>     repetitions.append(i)
[3, 3, 3, 3, 3] 
```

重复一个序列：

```
>>> repetitions=[]
>>> torep=[1,2,3,4]
>>> nrep= 2
>>> for i in range(nrep):
>>>     repetitions=repetitions+torep
>>> print(repetitions)
[1, 2, 3, 4, 1, 2, 3, 4] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-13T09:00:29.663

以下可能对您有用：

```
>>>[['a','b'],['A','B']]*5

[['a', 'b'], ['A', 'B'], ['a', 'b'], ['A', 'B'], ['a', 'b'], ['A', 'B'], ['a', 'b'], ['A', 'B'], ['a', 'b'], ['A', 'B']] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-13T09:28:48.023

`numpy.repeat`已经提到过，这显然等同于您想要的。但为了完整起见，标准库中也`repeat`有。`itertools`但是，这通常适用于可迭代对象，因此它不允许按索引重复（因为可迭代对象通常没有定义索引）。

我们可以使用那里给出的代码作为粗略的等价物

```
def repeat(object, times=None):
    # repeat(10, 3) --> 10 10 10
    if times is None:
        while True:
            yield object
    else:
        for i in xrange(times):
            yield object 
```

定义我们自己的广义重复：

```
def repeat_generalised(object, times=None):
    # repeat(10, 3) --> 10 10 10
    if times is None:
        while True:
            yield object
    else:
        for reps, elem in zip(times, object):
            for i in xrange(reps): 
                yield elem 
```

问题当然是你必须定义很多可能的边缘情况（如果对象和时间有不同数量的元素会发生什么？），这取决于你个人的用例。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-12-02T17:14:43.180

这是我对克隆的尝试`R` `rep`：

```
def rep(x, times = 1, each = 1, length_out = None):
    if not isinstance(times, list):
        times = [times]

    res = ''.join([str(i) * each for i in x])

    if len(times) > 1:   
        res = ''.join(str(i) * m for i, m in zip(x, times))
    else:
        res = ''.join(res * times[0])

    if length_out is None:
        return res
    else:
        return res[0:length_out] 
```

重现`R`示例：

```
rep(range(4), times = 2)
rep(range(4), each = 2)
rep(range(4), times = [2,2,2,2])
rep(range(4), each = 2, length_out = 4)
rep(range(4), each = 2, times = 3) 
```

除了没有回收较短的向量/列表（imo这是*最糟糕*的功能`R`）。

# java - 如何将一个 PNG 图像用于多个精灵？

> ID：12235553
> 
> 赞同：5
> 
> 时间：2012-09-02T11:23:04.850
> 
> 标签：java, image, png

如何将单个 PNG 图像用于多个精灵？我正在尝试制作一个简单的 2d 游戏，但我不想拥有 20 多个不同的图像文件。我只想将它们放在一个 PNG 文件中。

### 例子

minecraft 中的`terrain.png`(and `items.png`) 上有不同的图块，每个 16x16 像素区域用于块的不同纹理。

有人可以提供一些代码和解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:44:56.840

几年前我写了一个 Java 游戏，希望能给你一些有用的建议和代码示例。

您可以像这样在单个图像中组织您的精灵：

[https://github.com/mikera/tyrant/blob/master/src/main/resources/images/creature32.png](https://github.com/mikera/tyrant/blob/master/src/main/resources/images/creature32.png)

上面的例子使用了 32x32 的精灵，你可以使用任何你喜欢的尺寸，但它有助于保持它们的规则。

然后，当您在游戏中绘制屏幕时，您只需选择相应的精灵并在正确的位置进行绘制。

代码可能如下所示：

```
public void drawImage(Graphics g,double x, double y, int image) {
    int px = (int)((x - scrollx) * TILEWIDTH);
    int py = (int)((y - scrolly) * TILEHEIGHT);
    int sx = (image%20) * TILEWIDTH;
    int sy = TILEHEIGHT * (image/20);
    g.drawImage(sourceImage, px, py, px + TILEWIDTH,
            py + TILEHEIGHT, sx, sy, sx + TILEWIDTH, sy + TILEHEIGHT,
            null);
} 
```

这里`int image`是一个索引到要使用的精灵表上的位置。以 1 为增量向右移动一个精灵，以 20 为增量在精灵表中向下移动一个精灵。

更完整的源代码在：[https ://github.com/mikera/tyrant/blob/master/src/main/java/mikera/tyrant/MapPanel.java](https://github.com/mikera/tyrant/blob/master/src/main/java/mikera/tyrant/MapPanel.java)

# asp.net - 访问服务器上的文件（asp.net、webmatrix）

> ID：12235554
> 
> 赞同：0
> 
> 时间：2012-09-02T11:23:16.460
> 
> 标签：asp.net, file

我想读取 *.txt 文件并编辑此文件。我使用 Webmatrix，它可以在我的计算机上运行。但是在将其发布到服务器（Web 部署）之后，它就不再起作用了。

```
string transmission;
string path;
path = "E:\\Documents\\My Web Sites\\Trackercontrol v2\\backup.txt";

public int insert()
{
    using (StreamReader sr = File.OpenText(path)) 
    {
        while ((transmission = sr.ReadLine()) != null) 
        {
            // etc.
        }
    }
} 
```

我发布了这个，调整了.txt文件的路径，但是try/cath方法告诉我访问路径被拒绝了。我认为读出文件不是问题，但编辑或清除文件会导致这个问题。

我怎样才能解决这个问题？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:36:19.393

您提供了本地驱动器的路径，该路径可能存在或肯定不存在于服务器上。先将文件上传到服务器，然后读取。你可以得到正确的路径

```
 string path;
 path = Server.MapPath("~/filename.txt"); // Considered file is placed at Root of your site 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:36:47.740

检查应用程序池在哪个帐户下运行？确保此帐户对相关文件具有读/写访问权限。

此外，最好使用

```
var path = Server.MapPath(relativePathToFile); 
```

# jquery - 带有 JSON 和寻呼机的 Treegrid（添加、编辑、删除）

> ID：12235557
> 
> 赞同：0
> 
> 时间：2012-09-02T11:24:15.350
> 
> 标签：jquery, json, jqgrid, treegrid

我正在尝试使用**treeGrid: true**和寻呼机选项（添加、删除、编辑、搜索和刷新）创建一个 jQgrid。

我有这个例子： http: [//jsfiddle.net/6Sceb/](http://jsfiddle.net/6Sceb/) 但是寻呼机的选项不是很好。任何想法为什么会发生这种情况？JSON数据有限制吗？

谢谢。

# jquery - :selected 对于在运行时设置了多个属性的 select 元素的选项返回 false

> ID：12235558
> 
> 赞同：1
> 
> 时间：2012-09-02T11:24:17.797
> 
> 标签：jquery, select, multiple-select

考虑以下情况，

我有一个选择元素

```
<select>
    <option>a</option>
    <option selected="selected">b</option>
    <option selected="selected">c</option>
</select> 
```

然后使用 jquery 我设置了多个属性

```
$( 'select' ).attr( 'multiple', true ); 
```

为什么下面的代码返回false？

```
$( 'select' ).children( 'option' ).eq( 1 ).is( ':selected' ) 
```

虽然这返回 true，

```
$( 'select' ).children( 'option' ).eq( 2 ).is( ':selected' ) 
```

但是如果在 HTML 代码中手动设置了 select 元素的 multiple 属性，它们都返回 true。（在 webkit、firefox 和 IE 上试过）

这是我的错误，还是这是预期的行为？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:30:12.803

因为 select 是在没有设置多个属性的情况下呈现的，所以实际上只选择了最后一个选择的选项。允许多个值后，您需要设置选定的选项。

您的两个查询都返回您期望的结果。你错过的是你的**b**选项实际上没有被选中。检查浏览器中呈现的内容。

编辑：此行修复了行为，在多选激活后添加：

```
$('select').html($('select').html()); 
```

# java - 在 Netbeans 中的正确位置自动插入大括号

> ID：12235565
> 
> 赞同：0
> 
> 时间：2012-09-02T11:25:11.933
> 
> 标签：java, netbeans

我使用 eclipse 已经一年多了，我目前正在尝试使用 NetBeans 来查看差异。NetBeans 中似乎缺少的一项功能是自动将花括号放置在正确位置的选项。例如，在 Eclipse 中，您可以在括号内键入花括号，它会自动出现在正确的位置。

```
public static void main (String[] args /* In eclipse you can type your curly brace here*/) {
    } 
```

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-23T05:25:49.393

为此创建一个宏并将其分配给 Ctrl+{ 或您选择的快捷方式。

工具 -> 选项 -> 编辑器 -> 宏

插入符结束行“{”插入中断

# objective-c - 如何在 Objective-C 中创建一个空白的透明 png？

> ID：12235570
> 
> 赞同：52
> 
> 时间：2012-09-02T11:25:52.620
> 
> 标签：objective-c, ios, uiimage

如何以编程方式在Objective C中创建一个空白的png UIImage（比如说36x36 px）？

谢谢 ：）

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-02T11:53:48.807

您可以打开图像上下文，然后立即获取其内容，而无需在其中绘制任何内容。这应该产生一个空白`36x36` `UIImage`：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(36, 36), NO, 0.0);
UIImage *blank = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-20T06:31:09.463

```
let img = UIImage() // size does not matter for a blank transparent image 
```

使用空白透明图像时，它的大小无关紧要，我认为这`imageView.contentMode`可能是任何可缩放的值，`UIView.ContentMode.scaleAspectFit`或者`UIView.ContentMode.scaleAspectFill`如果需要，可以将其设置为或。

# regex - 使用 Perl 在目录中的所有文件中递归替换多个字符串

> ID：12235574
> 
> 赞同：1
> 
> 时间：2012-09-02T11:26:25.527
> 
> 标签：regex, perl

我是 perl 的新手。看到了很多样本​​，但在编写解决方案时遇到了问题 我有一个字符串列表，每个字符串应该替换为不同的字符串 a->a2、b->b34 等。替换列表在某个 csv 文件中。需要对目录中的所有文件递归执行此替换。可能是任何其他语言，只是认为 perl 是最快的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T12:29:24.400

您的问题可以分为三个步骤：

1.  从 CSV 文件中获取搜索和替换字符串，
2.  获取给定目录中所有文本文件的列表，包括。子目录，以及
3.  用它们的替换替换所有出现的搜索字符串。

所以让我们倒计时，看看我们如何做到这一点:)

```
#!/usr/bin/perl
use strict; use warnings; 
```

### 3.搜索和替换

我们将定义一个 sub `searchAndReplace`。它以文件名作为参数并访问外部散列。我们称这个哈希`%replacements`。每个键都是我们要替换的字符串，值就是替换。这“强加”了每个搜索字符串只能有一个替换的限制，但这应该看起来很自然。我将进一步假设每个文件都相当小（即适合 RAM）。

```
sub searchAndReplace {
  my ($filename) = @_;
  my $content = do {
    open my $file, "<", $filename or die "Cant open $filename: $!";
    local $/ = undef; # set slurp mode
    <$file>;
  };
  while(my ($string, $replacement) = each %replacements) {
    $content =~ s/\Q$string\E/$replacement/g;
  }
  open my $file, ">", $filename or die "Can't open $filename: $!";
  print $file $content; # I didn't forget the comma
  close $file;
} 
```

这段代码非常简单，我转义了`$string`正则表达式内部，因此内容不会被视为模式。这种实现的副作用是可能会替换`$content`已经替换的字符串的一部分，但如果这是绝对必要的，可以解决这个问题。

### 2.遍历文件树

我们将定义一个名为`anakinFileWalker`. 它以文件名或目录名和`searchAndReplace`sub 作为参数。如果 filename 参数是一个普通文件，它会执行 `searchAndReplace`，如果它是一个目录，它会打开目录并在每个条目上调用它自己。

```
sub anakinFileWalker {
  my ($filename, $action) = @_;
  if (-d $filename) {
    opendir my $dir, $filename or die "Can't open $filename: $!";
    while (defined(my $entry = readdir $dir)) {
      next if $entry eq '.' or $entry eq '..';
      # come to the dark side of recursion
      anakinFileWalker("$filename/$entry", $action); # be sure to give full path
    }
  } else {
    # Houston, we have a plain file:
    $action->($filename);
  }
} 
```

当然，如果你有循环符号链接，这个 sub 就会爆炸。

### 1\. 设置`%replacements`

有一个不错的模块[`Text::CSV`](http://search.cpan.org/~makamaka/Text-CSV-1.21/lib/Text/CSV.pm)可以帮助您满足所有需求。只要确保`%replacements`满足上面的定义，但这并不难。

### 开始一切

准备好后`%replacements`，我们就做

```
anakinFileWalker($topDirectory, \&searchAndReplace); 
```

它*应该可以*工作。如果没有，这应该让您了解如何解决此类问题。

# azure-sql-database - 无法跨服务器复制数据库（“登录失败”）

> ID：12235580
> 
> 赞同：-1
> 
> 时间：2012-09-02T11:27:15.863
> 
> 标签：azure-sql-database

嗨，我正在尝试将 SQL 实例从我们东欧复制到西欧，但出现下一个错误：

> 消息 40532，第 11 级，状态 1，第 1 行
> 
> 无法打开登录请求的服务器“eastusserver”。登录失败。

我正在使用这个查询：

> 创建数据库 NewDBName 作为 [eastusserver].OldDBName 的副本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:06:32.680

不能在 Azure SQL 数据库 ( [docs](http://msdn.microsoft.com/en-us/library/windowsazure/ff951624) ) 中不同数据中心和子区域的服务器之间复制数据库。而是考虑使用[bacpacs](http://msdn.microsoft.com/en-us/library/windowsazure/hh335292.aspx)、[脚本](http://msdn.microsoft.com/en-us/library/windowsazure/ee621790.aspx)或[SQL 数据同步](http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx)。

# objective-c - 在视网膜显示器上用 Cocoa 进行像素完美的绘图 - 只是做 floor() 将不再起作用

> ID：12235583
> 
> 赞同：3
> 
> 时间：2012-09-02T11:27:28.530
> 
> 标签：objective-c, cocoa

从历史上看，在任何计算之后都简单地进行了一次`floor()`计算，以确保所有坐标、高度和宽度都与像素边界正确对齐。

然而，这显然不再适用于视网膜显示器，因为 0.5 点现在完全有效。

编码人员现在应该如何编码像素完美的东西以使他们的代码正确支持标准和视网膜显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T18:19:12.767

[将 rect 转换为支持对齐的坐标](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSView_Class/Reference/NSView.html#//apple_ref/occ/instm/NSView/convertRectToBacking%3a)。您可能会在视图中执行此操作，但[窗口可以执行此操作](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/convertRectToBacking%3a)，[屏幕也可以执行此](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSScreen_Class/Reference/Reference.html#//apple_ref/occ/instm/NSScreen/convertRectToBacking%3a)操作。

您可能还需要转换回来，因为[发行说明](http://developer.apple.com/library/mac/releasenotes/Cocoa/AppKitOlderNotes.html)建议支持坐标空间以像素为单位，因此这些空间在 Retina 显示器上显然是两倍大。如果我有一个，我会测试它。如果当您在视图空间中使用支持坐标时，一切看起来都大了一倍，这意味着您确实需要将它们转换回视图坐标。

# javascript - 有没有办法在新窗口中打开页面上的所有链接？

> ID：12235585
> 
> 赞同：40
> 
> 时间：2012-09-02T11:28:39.523
> 
> 标签：javascript, html, hyperlink

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-09-02T11:31:50.690

如果您的页面仅包含链接，请考虑[`<base target="_blank">`](https://developer.mozilla.org/en-US/docs/HTML/Element/base). 这会在新窗口中打开每个链接（但也包括表单的目标，除非用`<form target="_self">`.

正如其他人所展示的，在不修改 HTML 源代码的情况下，您可以使用 Javascript[遍历所有`<a>`标签并添加`target`属性](https://stackoverflow.com/a/12235609/427545)或添加[动态设置目标属性的事件侦听器](https://stackoverflow.com/a/12235608/427545)。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-09-02T11:31:16.573

如果你有 jQuery 这很简单

```
$("a").attr("target", "_blank"); 
```

或常规 Javascript

```
var links = document.links;
for (var i = 0; i < links.length; i++) {
     links[i].target = "_blank";
} 
```

根据@Lekensteyn 的建议，没有 Javascript（为完整性而添加）

```
<base target="_blank">. 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-02T11:31:09.380

CSS：否。
JavaScript：委托一个点击事件，它`target="_blank"`在点击链接时添加一个属性。

```
document.body.addEventListener(function(e) {
    if (e.target.nodeName.toUpperCase() === 'A' && e.target.href) {
        e.target.target = '_blank';
    }
}, true); 
```

注意：如果`<a>`元素包含其他元素，您可能需要遍历树以找出是否单击了锚元素：

```
document.body.addEventListener(function(e) {
    var target = e.target;
    do {
        if (target.nodeName.toUpperCase() === 'A' && target.href) {
            target.target = '_blank';
            break;
        }
    } while (target = target.parentElement);
}, true); 
```

或者，如果您是 jQuery 爱好者：

```
$('body').on('click', 'a', function(e) {
    e.target.target = '_blank';
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T11:32:10.960

是的，您可以将带有 JS 的属性添加到 HTML 文档中名为“target”且值为“_blank”的所有链接；）

**您还可以使用this**打开从 url 到 javascript:openInWindow(url) 的所有链接的替换 href ，并在 JS 中编写打开新窗口并将其位置设置为**url**的函数；) Google 将为您提供帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-15T21:28:37.330

只需使用 Javascript 向页面添加一个 html`base`元素：

```
var e = document.createElement("base");
e.target = "_blank";
document.head.appendChild(e); 
```

# android - 通过 sqlite 从 android 中的数据库中检索单个查询

> ID：12235586
> 
> 赞同：0
> 
> 时间：2012-09-02T11:28:43.037
> 
> 标签：android, database, sqlite

我试图从我的数据库中检索一行，`SQLite`但由于某种原因我的程序崩溃了。当我搜索日志时，我得到下一个错误：

> 请求索引 -1，大小为 1

我在网上搜索了解决方案，但看起来我的代码是正确的。我可以使用该参数删除一行，这样我就知道位置是正确的。这可能是我编写查询的方式，但我只是不知道它有什么问题。有人能看出我为什么做错了吗？这是查询的代码：

```
 public static final Uri CONTENT_URI = Uri.parse("content://" + AUTHORITY +   /jokes_table");

    final Uri _URI = Uri.parse(MyContentProvider.CONTENT_URI + "/2");
        String positions = intent.getStringExtra("position_in_db");
        Cursor cur = getBaseContext().getContentResolver().query(_URI, new String[] {"Joke","Author","Date","Status"} , MyContentProvider.ID + " = " + intent.getStringExtra("position_in_db") , null , null ); 
```

我的查询方法：

```
 public Cursor query(Uri uri, String[] projection, String selection,
        String[] selectionArgs, String sortOrder) {
    SQLiteQueryBuilder qb = new SQLiteQueryBuilder();
    String a;
    switch (sUriMatcher.match(uri)) 
    { 
    case COLLECTION_URI_INDICATOR: 
        qb.setTables(TABLE_NAME); 
        qb.setProjectionMap(projectionMap); 
        break; 
    case SINGLE_ITEM_URI_INDICATOR: 
        qb.setTables(TABLE_NAME); 
        qb.setProjectionMap(projectionMap); 
        qb.appendWhere(ID);
        break; 
    default: 
        throw new IllegalArgumentException("Unknown URI " + uri); 
    } 
    SQLiteDatabase db = mOpenHelper.getReadableDatabase(); 
    Cursor c = qb.query(db, projection, selection, selectionArgs, null, null, null); 

    c.setNotificationUri(getContext().getContentResolver(), uri); 
    return c; 

} 
```

当我尝试通过该查询获取所有行时，它工作正常。唯一的问题是我无法检索特定行。我尝试在调用查询之前更改选择`?`并尝试查看字符串，但它不起作用。试图从游标中获取数据

```
 cur.getString(getColumnIndex("Joke")); 
```

结束程序。有人能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:12:01.327

你的`selection`和是什么`selectionArgs`？？

你可以试试这个

```
selection = ROW_ID_COLUMN_NAME + " =? "; // take a note on the "Space" between this statement
selectionArgs = { ROW_ID };

c = qb.query(db, projection, selection, selectionArgs, null, null, null);

// moveToFirst() method may prevent error when accessing 0 row cursor.
if (c.moveToFirst()) {
    c.getString(getColumnIndex("Joke"));
} 
```

# android - 如何将聊天添加到 Android 应用程序？

> ID：12235590
> 
> 赞同：2
> 
> 时间：2012-09-02T11:29:14.380
> 
> 标签：android, sockets, chat

我有一个 android 应用程序，我想让我的用户互相聊天。

google了一下，找到了一个关于[android socket编程](http://www.edumobile.org/android/android-development/socket-programming/)的教程，但是看起来挺复杂的，还需要我自己照顾服务端。

有没有更简单的解决方案，基本上不需要我自己写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:18:28.357

我建议使用像 Scringo ( [www.scringo.com](http://www.scringo.com) ) 这样的免费 SDK 之一。它很容易添加 - 基本上你只需要打电话

```
Scringo.init(this); 
```

在 Activity 的 onCreate() 方法结束时。

根本不需要服务器端编程。

这是 Scringo 的屏幕截图： ![Scringo 在行动](../Images/9adf5a94116f0e1219850d2146330d8d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:09:35.427

另一个可行的解决方案是检查 xmpp 协议和[asmack 库](https://code.google.com/p/asmack/)。不久前我试了一下，并设法使它与 gtalk 一起工作。您也可以使用他们的[openfire](http://www.igniterealtime.org/projects/openfire/index.jsp)服务器自行设置 xmpp服务器。

还是比重新发明轮子好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T11:31:22.387

我建议使用 WebView 并使用 node.js / now.js 聊天！

设置非常简单！

# asp.net - “字段”窗口的详细信息视图“选定字段”列表框不显示字段

> ID：12235592
> 
> 赞同：0
> 
> 时间：2012-09-02T11:29:27.050
> 
> 标签：asp.net, vb.net, properties, field, detailsview

在 Web 表单上，我们将 DetailsView 绑定到数据源。

名为“AutGenerateRows”的属性也设置为 true。

在 Web 浏览器中显示 Web 表单时，将显示来自字段的数据。

我们想改变一些字段的属性。当我们显示“字段”窗口时，我注意到“选定字段”列表框只包含一个命令字段，没有其他字段。

你能告诉我如何设置 DetailsView 以便我们可以更改字段的属性吗？

随附的屏幕截图将显示正在发生的事情。有很多字段，如果可能，我们希望避免输入将字段设置为模板字段所需的所有代码。

这些屏幕截图显示了正在发生的事情：

[![屏幕截图 2012-09-02 上午 7.07.59](../Images/de8ea45d14f8747638ae5a49fccf2306.png)](http://www.flickr.com/photos/53925159@N06/7912638834/ "屏幕截图 2012 年 9 月 2 日上午 7 点 7 月 59 日，efithria2 在 Flickr 上")

[![屏幕截图 2012-09-02 上午 7.01.21](../Images/0e6ce4aa42d3fd8b432883f74b858d85.png)](http://www.flickr.com/photos/53925159@N06/7912589408/ "屏幕截图 2012 年 9 月 2 日上午 7 点 1 月 21 日，efithria2 在 Flickr 上")

更新：感谢您的回复。在您的帮助下，我们现在走上了正确的道路。这是完成的 Web 表单的样子：

[![屏幕截图 2012-09-02 上午 9.01.48](../Images/999a09c22f9c14ed1249aaace10e037a.png)](http://www.flickr.com/photos/53925159@N06/7913195198/ "屏幕截图 2012 年 9 月 2 日上午 9 点 1 月 48 日，efithria2 在 Flickr 上")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:55:51.427

为部门 ID 添加一个模板字段列 从字段窗口中，添加一个模板字段列。然后去aspx源代码放置一个下拉列表。像这样的东西：

```
<asp:TemplateField >
    <ItemTemplate>
        <asp:DropDownList ID="DDL" runat="server" DataTextField='<%# Eval("FieldName") %>' />
    </ItemTemplate>   
</asp:TemplateField> 
```

# menu - Superfish 菜单 - 子菜单 - 让许多项目打破

> ID：12235593
> 
> 赞同：0
> 
> 时间：2012-09-02T11:29:27.403
> 
> 标签：menu, joomla1.5, submenu, superfish

我有一个很长的列表，其中包含属于同一类别的子项目。随着子菜单的增长，我希望子菜单能够在 2 列中列出子菜单项。有没有人知道如何做到这一点的诀窍？

看到这里说明了我的问题：

```
topmenu item
-submenu 1
-submenu 2
-submenu 3
-submenu 4
-submenu 5
-submenu 6
-submenu 7
-submenu 8
-submenu 9
-submenu 10 
```

我需要它是这样的：

```
topmenu item
-submenu 1   -submenu 6
-submenu 2   -submenu 7
-submenu 3   -submenu 8
-submenu 4   -submenu 9
-submenu 5   -submenu 10 
```

来自丹麦的欢呼:-)

珍妮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:55:11.210

您可以使用更改 superfish 菜单的 css 来尝试此操作。

```
.sf-shadow ul {
    background: url("../images/shadow.png") no-repeat scroll right bottom transparent;
    padding: 0 8px 9px 0;
    width:300px;
} 
```

并且在

```
.sf-menu ul li {
    width: 50%;
} 
```

# mysql - mysql中的更新语句

> ID：12235594
> 
> 赞同：0
> 
> 时间：2012-09-02T11:29:30.447
> 
> 标签：mysql, subquery

```
update product 
set qty=100 + (select qty from product p  where p.name='abc' and p.weight='100g')
where name='abc' and weight='100g' 
```

我想将 100 的新数量添加到产品的现有数量中。这给了我这样的错误，

'您不能在 FROM 子句中指定目标表 'product' 进行更新'

怎么解决？？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:31:20.473

你只需要这样做：

```
update product 
set qty= qty + 100
where name='abc' and weight='100g' 
```

# mysql - 在 SQL 列中查找最常见的值

> ID：12235595
> 
> 赞同：146
> 
> 时间：2012-09-02T11:29:46.323
> 
> 标签：mysql, sql

如何在 SQL 表的给定列中找到最常见的值？

例如，对于这个表，它应该返回`two`，因为它是最常见的值：

```
one
two
two
three 
```

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2012-09-02T11:34:06.463

```
SELECT
  <column_name>,
  COUNT(<column_name>) AS `value_occurrence` 

FROM
  <my_table>

GROUP BY 
  <column_name>

ORDER BY 
  `value_occurrence` DESC

LIMIT 1; 
```

替换`<column_name>`和`<my_table>`。`1`如果要查看`N`列的最常见值，请增加。

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2012-09-02T11:33:47.120

尝试类似：

```
SELECT       `column`
    FROM     `your_table`
    GROUP BY `column`
    ORDER BY COUNT(*) DESC
    LIMIT    1; 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-08-03T03:49:06.147

让我们考虑表名 as`tblperson`和列名 as `city`。我想从城市列中检索重复次数最多的城市：

```
 select city,count(*) as nor from tblperson
        group by city
          having count(*) =(select max(nor) from 
            (select city,count(*) as nor from tblperson group by city) tblperson) 
```

这`nor`是一个别名。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-01-29T09:48:58.093

下面的查询在 SQL Server 数据库中似乎对我有用：

```
select column, COUNT(column) AS MOST_FREQUENT
from TABLE_NAME
GROUP BY column
ORDER BY COUNT(column) DESC 
```

结果：

```
column          MOST_FREQUENT
item1           highest count
item2           second highest 
item3           third higest
..
.. 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-26T23:26:24.297

用于 SQL Server。

因为没有限制命令支持。

在这种情况下，哟可以使用 top 1 命令找到特定列中出现的最大值（值）

```
SELECT top1 
    `value`,
    COUNT(`value`) AS `value_occurrence` 
FROM     
    `my_table`
GROUP BY 
    `value`
ORDER BY 
    `value_occurrence` DESC; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-28T07:28:05.690

假设 Table 是 ' `SalesLT.Customer`' 并且您要找出的 Column 是 ' `CompanyName`' 并且`AggCompanyName`是别名。

```
Select CompanyName, Count(CompanyName) as AggCompanyName from SalesLT.Customer
group by CompanyName
Order By Count(CompanyName) Desc; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-24T16:59:39.277

如果您不能使用 LIMIT 或 LIMIT 不是您的查询工具的选项。您可以改用“ROWNUM”，但需要一个子查询：

```
SELECT FIELD_1, ALIAS1
FROM(SELECT FIELD_1, COUNT(FIELD_1) ALIAS1
    FROM TABLENAME
    GROUP BY FIELD_1
    ORDER BY COUNT(FIELD_1) DESC)
WHERE ROWNUM = 1 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-04-01T14:30:24.357

如果您有一个 ID 列，并且您想从另一个列中为每个 ID 查找最重复的类别，那么您可以使用以下查询，

**桌子：**

![表格内容](../Images/a7c8896b0c9e1bd146c1bc2702fa8fa1.png)

询问：

```
SELECT ID, CATEGORY, COUNT(*) AS FREQ
FROM TABLE
GROUP BY 1,2
QUALIFY ROW_NUMBER() OVER(PARTITION BY ID ORDER BY FREQ DESC) = 1; 
```

**结果：**

![查询结果](../Images/793a04e026c0a78c9e9ffa9fcbb8908b.png)

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-05-06T10:14:12.793

我喜欢使用的一种方法是：

选择*，数数（*)作为来自 Table_Name 的 VAR1**

 **通过...分组

 *按 VAR1 desc 排序

限制 1***

# c++ - 混合 std::'s 和 boost::'s ::bind 和 ::function 会导致问题吗？

> ID：12235598
> 
> 赞同：5
> 
> 时间：2012-09-02T11:30:19.473
> 
> 标签：c++, boost, c++11, std

我认为这个问题的答案是否定的，但我只是想确定一下。

如果我`std::function`在函数中有 a 作为参数，那么传入 a 是否有任何问题，`boost::bind`反之亦然？

编辑：

我发现当你包含 boost\bind.h 时，boost::bind 使用的占位符会直接导入到命名空间中，并且它们与 std::bind 不兼容。对于 std::bind，您必须显式引用占位符，例如：std::placeholders::_1，或执行其他一些 typedef 或使用魔法使它们同时可用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-02T11:49:38.897

`std::`不。 (and `boost::`)的全部目的`function`是它们可以接受*任何*可以使用正确签名调用的函数对象——包括 lambda、仿函数和任何类型的绑定的结果。他们不关心你的函数对象来自哪里或它是什么类型。

您甚至可以将它们相互绑定，尽管我不确定您为什么要这样做。

# android - 在水平android中显示数字选择器

> ID：12235600
> 
> 赞同：1
> 
> 时间：2012-09-02T11:30:30.810
> 
> 标签：android, picker

这是我的原始数字选择器，它垂直显示。

![在此处输入图像描述](../Images/2356e0dfa40d7a1ad9c11c724177ce56.png)

我想让它水平显示，它将显示左右按钮而不是上下按钮。但它不起作用。它看起来仍然像垂直的。

这是我的代码。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_picker);

    String[] nums = new String[21];

    for(int i=0; i<nums.length; i++)
       nums[i] = Integer.toString(i*5);

    NumberPicker np = (NumberPicker) findViewById(R.id.np);
    np.setMaxValue(nums.length-1);
    np.setMinValue(0);
    np.setWrapSelectorWheel(false);
    np.setDisplayedValues(nums); 
```

这是我的 np.xml 代码

```
<NumberPicker
    android:id="@+id/np"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:width="100dip" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T14:22:51.400

`NumberPicker`不支持水平方向。为此，您可能需要创建自定义实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-07T14:22:49.477

据我所知，没有办法使 NumberPicker 适应水平方向。您可能应该检查一下：

[水平选择器](https://github.com/blazsolar/HorizontalPicker)

或这个：

[转轮](https://github.com/ai212983/android-spinnerwheel)

尽管这两个库似乎已过时且未维护；在这种情况下，我建议创建一个自定义水平选择器或使用替代品`Input Control`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-08T09:43:21.523

我正在搜索相同的内容，并找到了一个似乎很有帮助的库，请在 github [Number Picker上查看](https://github.com/ShawnLin013/NumberPicker)

# algorithm - 选择可以稳定吗？

> ID：12235602
> 
> 赞同：1
> 
> 时间：2012-09-02T11:30:46.323
> 
> 标签：algorithm, sorting

嗨我正在研究代码稳定选择排序，我已经能够得到正确的结果，但我不确定代码中是否存在极端情况。我正在排序的数据是这样
的 a[0]=new Data (1,'d');
a[1]=新数据(2,'c');
a[2]=新数据(3,'a');
a[3]=新数据(4,'b');
a[4]=新数据(5,'d');
a[5]=新数据(6,'c');
a[6]=新数据(8,'a');
a[7]=新数据(9,'a');
a[8]=新数据(10,'a');

如您所见，它是按数字排序的，我现在应该按字符对其进行排序。

所以我使用的数据对象的逻辑是这样的：

在寻找最小元素的循环中，我们不仅会找到最小的元素，还会找到具有最小 int 的最小元素。这样元素的顺序将保持不变

即使它工作得很好，这里有没有我错过的极端案例？

例如：让我们拿起iTunes，首先我们按歌曲的ID排序，然后我们想按他们的名字排序。我希望它能让一切都清楚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:06:59.237

不，你没有错过任何东西。这是使任何不稳定算法稳定的标准技术：强加总排序！任何关系都由第二个键解决 - 这是输入顺序。我假设您在这里正确实施了字典顺序，从您的描述中并不完全清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:08:26.717

您所描述的是对复合键的排序：键的最重要部分是字符，键的最不重要部分是数字。

这不是我所说的稳定排序。对于稳定排序，其中两条记录具有相同的键值，排序序列中的第一个是原始数据中的第一个，但在您的情况下，第一个是编号最小的记录。

对于稳定排序，如果你给它的数据是数字降序排列的，那么如果两条记录有相同的字母，那么排序数据中两条记录中的第一条记录将是数字最大的记录，因为这是输入数据中的第一条记录。使用您的程序，两者中的第一个记录将是编号最小的记录。

# php - 检查是否设置了 GET，然后发布与 PHP 变量连接的 HTML

> ID：12235603
> 
> 赞同：1
> 
> 时间：2012-09-02T11:30:53.687
> 
> 标签：php, html

好的，所以我从上一页传递了一个 id

```
$_GET['id']; 
```

我想检查是否先设置了id，如果是，则回显以下代码：

编辑：还请查看[http://pastebin.com/P2Jnapnf](http://pastebin.com/P2Jnapnf)

编辑2：

```
 $with = (isset($_GET['with']) && !empty($_GET['with'])) ? '<iframe class="youtube-player"
 type="text/html" width="540" height="385" src="http://www.youtube.com/embed/'.$_GET['with']. 'frameborder="0">
</iframe>' : false; 
```

我试过这个但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:33:41.470

您可以使用以下内容 -`isset`将检查变量是否已设置（因为它存在）并`!empty`确保变量中实际包含数据：

```
if(isset($_GET['id']) && !empty($_GET['id']))
{
    // You code here.
} 
```

编辑：我会做这样的事情：

```
$myID = (isset($_GET['id']) && !empty($_GET['id'])) ? 'http://www.youtube.com/embed/'.$_GET['id'] : false;

echo ($myID) ? $myID : ""; 
```

第一部分将执行三元运算符，如果`(isset($_GET['id']) && !empty($_GET['id']))`计算结果为 true，它将分配`$myID`链接的值和 GET 中的 ID。如果不是，它将分配一个`false`布尔值。

下一行使用另一个三元组，如果`$myID`为假，则输出一个空字符串，否则显示完整链接。

编辑2：试试这个：

```
echo (isset($_GET['with']) && !empty($_GET['with'])) ? '<iframe class="youtube-player" type="text/html" width="540" height="385" src="http://www.youtube.com/embed/'.$_GET['with']. 'frameborder="0"></iframe>' : false; 
```

编辑 3：A deceze 正确指出：`!empty`默认情况下，该函数将`isset`首先调用该函数 - 这意味着如果未设置，它*不能*传递`!empty`除`false`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:49:26.633

检查变量是否设置，如果是则回显代码

```
<?php if(isset($_GET['id'])):?>
    <iframe class="youtube-player" type="text/html" width="540" height="385"
       src="http://www.youtube.com/embed/<?php echo $_GET['id']; ?>" frameborder="0"> 
    </iframe>
<?php endif ?> 
```

# android - TextView 将单词解析为可点击

> ID：12235610
> 
> 赞同：1
> 
> 时间：2012-09-02T11:31:18.580
> 
> 标签：android, textview, onclicklistener

嗨，我有一个句子（TextView），我想点击某个单词，我想在 Toast 中显示这个单词，例如，我想设置 OnClickLister 以便能够抓取一个单词，它被点击了，而不是整个句子

**例如**

句子 TextView --- 我喜欢 stackoverflow

点击“爱”----->举杯“爱”这个词

我只是想出了创建许多 TextViews 的想法，并为每个 TextViews 设置侦听器......这不是很好......你有任何想法如何实现这个吗？

也许有一些我不知道的文字处理库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:37:16.170

[在 TextView/EditText 中点击一个单词](https://stackoverflow.com/questions/8612652/select-a-word-on-a-tap-in-textview-edittext)

见上面的问题。我认为它可以解决你的问题。您不需要为每个单词设置一个文本视图。对整个句子有一个文本视图。然后抓住这个词点击。我认为这是 wat 上面解释的。

请让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-13T02:12:46.173

为每个单词设置 ClickableSpan 的另一种解决方案（正如@LakshmiNarayanan 的答案中建议的那样）是`OnTouchListener`在`TextView`. 然后在`onTouch`方法中你可以像这样得到被触摸的字符的偏移量：

```
Layout layout = this.getLayout();
if (layout != null)
{
    int line = layout.getLineForVertical(motionEvent.getY()); 
    int offset = layout.getOffsetForHorizontal(line, motionEvent.getX());
} 
```

之后，您可以使用[BreakIterator](http://developer.android.com/reference/java/text/BreakIterator.html)或您自己的实现来返回被触摸的单词。

# java - 在 webproject .java 文件中未编译

> ID：12235613
> 
> 赞同：0
> 
> 时间：2012-09-02T11:31:47.670
> 
> 标签：java, jsp, compiler-construction

我正在使用配置了 Tomcat 6 的椭圆 Galileo，但是当我将任何代码更改为我的 .java 文件并尝试使用这些修改后的文件（即在该 .java 文件中新添加的方法）时，我的控制台显示该方法未定义。

我无法弄清楚为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:29:26.147

可能有2个问题

1）您更改的 java 文件没有得到正确编译 2）通过 Eclipse 发布更改时，新的类文件没有部署到 tomcat 目录。您可以手动尝试将类文件复制粘贴到 tomcat 目录中以使其工作。

在 RAD 中，我们使用 J2ee 模块依赖选项来配置我们需要在部署时将哪些 java 项目部署为 jar。同样，eclipse也应该有这个选项。

# objective-c - 带有 NSURLConnection 的 MBProgressHUD

> ID：12235617
> 
> 赞同：3
> 
> 时间：2012-09-02T11:32:03.933
> 
> 标签：objective-c, nsurlconnection, mbprogresshud

我试图将 MBProgressHUD 与 NSURLConnection 一起使用。

MBProgressHUD 的 Demo 项目中的示例报告：

```
- (IBAction)showURL:(id)sender {
    NSURL *URL = [NSURL URLWithString:@"https://github.com/matej/MBProgressHUD/zipball/master"];
    NSURLRequest *request = [NSURLRequest requestWithURL:URL];

    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];
    [connection release];

    HUD = [[MBProgressHUD showHUDAddedTo:self.navigationController.view animated:YES] retain];
    HUD.delegate = self;
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    expectedLength = [response expectedContentLength];
    currentLength = 0;
    HUD.mode = MBProgressHUDModeDeterminate;
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    currentLength += [data length];
    HUD.progress = currentLength / (float)expectedLength;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    HUD.customView = [[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"37x-Checkmark.png"]] autorelease];
    HUD.mode = MBProgressHUDModeCustomView;
    [HUD hide:YES afterDelay:2];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    [HUD hide:YES];
} 
```

运行它，确定模式下的 HUD 旋转良好。

我试图实现这一点，但在这里

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
        currentLength += [data length];
        HUD.progress = currentLength / (float)expectedLength;
    } 
```

圆圈是空的，没有填充。

我不知道这是否取决于请求的 url 的尺寸。

我请求从我的网站下载一个 plist (~80 kb)，但圈子一直是空的并且控制台报告

```
<Error>: void CGPathAddArc(CGPath*, const CGAffineTransform*, CGFloat, CGFloat, CGFloat, CGFloat, CGFloat, bool): invalid value for start or end angle. 
```

我什至尝试这样做：

```
float progress = 0.0f;
    while (progress < 1.0f) {
        progress += 0.01f;
        HUD.progress = progress;
    } 
```

但是现在这个圈子已经完全填满了，没有做任何动画。

我认为这取决于所请求网址的尺寸，但我不太确定，有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T10:02:29.473

我以这种方式解决了这个问题，从`NSURLRequest`to切换`NSMutableURLRequest`并将值设置为编码（以前在 gzip 中）

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:anURL];
[request addValue:@"" forHTTPHeaderField:@"Accept-Encoding"]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-02T14:25:27.060

您应该检查`[response expectedContentLength]`in的值`didReceiveResponse`。

http 服务器可以省略“Content-Length”标头，而使用“Transfer-Encoding: chunked”。在这种情况下，内容长度是先验未知的并`[response expectedContentLength]`返回`NSURLResponseUnknownLength`（即`-1`）`。

我可以想象设置`HUD.progress`为负值会导致`CGPathAddArc`控制台消息。

根据文档，累积值也可能`currentLength`大于预期的响应长度，因此您也应该检查一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-16T00:30:36.210

**在 swift 中，我通过在 url 请求的Accept-Encoding**标头字段中发送空字符串解决了这个问题。预期写入的总字节数现在返回正在下载的文件的实际大小（以字节为单位）。

```
var request = URLRequest(url: url)
request.addValue("", forHTTPHeaderField: "Accept-Encoding") 
```

# php - 多次登录失败后启用验证码 - 如何实现？

> ID：12235619
> 
> 赞同：5
> 
> 时间：2012-09-02T11:32:21.930
> 
> 标签：php, security, login, captcha

我正在使用登录失败的身份验证系统。
如果用户登录失败，数据库中的尝试次数会增加，如果达到定义的限制，PHP 会将会话验证码变量设置为 true。
因此，当用户（或垃圾邮件机器人）再次获得登录页面时，由于 session 变量，将显示验证码表单

但由于垃圾邮件机器人最终可能会删除会话 cookie 并重试，因此这可能无效。

我应该改用数据库解决方案吗？你将如何实现这个（有/或没有数据库）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T11:40:14.043

垃圾邮件机器人可以相当容易地绕过会话限制，因此必须在数据库中完成才能有效。垃圾邮件机器人也可以在每个请求中更改其 IP 地址，尽管这很难实现。

您必须在用户表中放置一个从 0 开始的登录尝试字段，当他们输入密码错误时将其递增，并在成功登录时将其重置为 0。当有人尝试以登录尝试 > 5 的用户身份登录时，您会将他们带到另一个带有验证码的页面，他们必须正确输入验证码（即使密码错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:40:06.107

我会简单地记录用户的会话变量，然后计算为 IP 地址提交表单的次数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:09:57.993

从我的角度来看，如果他/她尝试登录您的 PHP 页面失败，则只需在他/她尝试登录时获取用户名，然后将用户名存储在 Login_attempts 表及其 IP 地址中。增加失败的尝试列并检查它是否大于你的阈值，比如说 5，如果它失败了，那么添加验证码，并并排检查 IP 是否在一定时间间隔内每次尝试都没有变化，比如说 1 分钟如果失败，则 IP 地址应保持不变，然后登录尝试失败。

为了最好`NOSQL or memcache`地从数据库中检索快速数据。

# github - 从 GitHub 中的拉取请求中自动关闭问题

> ID：12235620
> 
> 赞同：45
> 
> 时间：2012-09-02T11:32:31.910
> 
> 标签：github, workflow, pull-request

如何使用 GitHub 上的拉取请求关闭问题？我知道[使用提交消息关闭多个问题](https://stackoverflow.com/questions/3547445/closing-multiple-issues-in-github-with-a-commit-message)，但情况不同。

我想关闭问题不是来自提交，而是来自拉取请求的描述。更像

拉取请求：

```
Name: bla bla
Description ... , _fixes_ #123 
```

并且在合并拉取请求时，`#123`会*自动*关闭。这可能吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-05T06:56:07.237

正如您[在评论中提到的，](https://stackoverflow.com/questions/12235620/automatically-closing-issue-from-pull-request-in-github/15827689#comment20031380_12235620)**来自拉取请求**的合并将导致提交。
您可以在该提交消息上添加“ `close #xx`”以触发问题的关闭。

然而，正如“ [Closing multiple issues in Github with a commit message](https://stackoverflow.com/q/3547445/6309) ”、GitHub 博文“ [Closing Issues via Commit Messages](https://github.com/blog/1386-closing-issues-via-commit-messages) ”（2013 年 1 月）和[当前 GitHub 文档](https://docs.github.com/en/github/managing-your-work-on-github/linking-a-pull-request-to-an-issue#linking-a-pull-request-to-an-issue-using-a-keyword)中所述。

> 现在，当您`Fixes #33`在提交消息中输入“”时，只有在提交合并到您的默认分支（通常**）后，****问题 33 才会关闭`master`**。
> 
> 这非常有用，因为这意味着问题的打开/关闭状态将映射到您的默认分支。
> 如果您的默认分支中未修复该错误，则该问题将保持打开状态。
> 一旦带有修复的提交合并到您的默认分支中，问题将自动关闭。
> 
> 当您使用“”语法在非默认分支中进行提交时`Fixes #33`，将使用工具提示引用该问题：
> 
> ![关闭问题](../Images/776ec650e5ae9f30239bb3a8e25fdf6c.png)
> 
> 您可以使用这些关键字中的任何一个通过提交消息关闭问题：
> 
> ```
> close, closes, closed, fix, fixes, fixed, resolve, resolves, resolved 
> ```

* * *

正如[cosmolev （upvoted）在](https://stackoverflow.com/users/972676/cosmolev)[下面提到](https://stackoverflow.com/a/16846288/6309)的，2013 年 5 月 14 日的博客文章[“通过拉取请求关闭问题”](https://github.com/blog/1506-closing-issues-via-pull-requests)添加拉取请求作为关闭问题的一种方式：

> **有些问题需要比一次提交更多的工作来关闭**。
> 这就是为什么**您现在可以从 Pull Request 关闭问题**。
> 您所要做的就是`fixes #5`在您的拉取请求的正文中包含特殊的关键字语法（例如“”）。
> 
> ![评论拉取请求](../Images/8609110585e2cc14ea370e4ce9d7e431.png)
> 
> 当 PR 合并到默认分支时，引用的问题将自动关闭。
> 它甚至可以跨存储库工作。

正如[John Eikenberry](https://stackoverflow.com/users/127316/john-eikenberry)[在评论中](https://stackoverflow.com/questions/12235620/automatically-closing-issue-from-pull-request-in-github/15827689#comment100305974_15827689)指出的那样，帮助页面“[使用关键字关闭问题](https://help.github.com/en/articles/closing-issues-using-keywords)”确实提到：

> 要关闭*多个*问题，请在每个问题引用前加上上述关键字之一。
> 您必须在您引用的每个问题之前使用关键字才能使关键字起作用。

例如，`This closes #34, closes #23, and closes example_user/example_repo#42`将关闭同一存储库中的问题 #34 和 #23，并在 " `example_user/example_repo`" 存储库中问题 #42。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-30T21:38:16.670

终于有可能了：[https ://github.com/blog/1506-closing-issues-via-pull-requests](https://github.com/blog/1506-closing-issues-via-pull-requests)

只需添加**resolve #18**即可拉取请求消息

其中 18 是问题编号

# c++ - 用于创建静态库的链接库

> ID：12235622
> 
> 赞同：1
> 
> 时间：2012-09-02T11:32:44.727
> 
> 标签：c++, linux, g++, unix-ar

我在 Lib_file.h 和 Lib_file.cpp 中编写了一些代码。我希望将此代码转换为静态库。我能够编译代码（使用命令`g++ -I <necessary include files> -o Lib_file.o Lib_file.cpp`）来获取 Lib_file.o。我还可以使用该`ar rvs Lib_file.a Lib_file.o`命令将其添加到存档中。现在，当我尝试使用 -L 选项在其他代码中使用这个库时，我得到未定义的引用错误。此错误指向我的 Lib_file.o 中的代码。所以我的问题是如何让我的 Lib_file.cpp 中的代码链接到它使用的库。

到目前为止，我已经尝试了以下选项

一、创建Lib_file.o后，我尝试了以下命令 `g++ -L<include path> -l<.a files> Lib_file.o`。在执行此命令时，我收到以下错误

```
/usr/lib/../lib64/crt1.o：在函数“_start”中：
init.c:(.text+0x20): undefined reference to `main'
collect2: ld 返回 1 个退出状态

```

二、我尝试使用 ar 命令将所有必要的 .a 文件与我的 Lib_file.o 一起包含在新存档中。当我尝试将 Lib_file.a 库与我的应用程序一起使用时，仍然出现未定义的引用错误

请帮帮我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T11:41:28.693

首先，所有库通常都被命名为库的名称`libxyz.a`在哪里`xyz`。

其次，您尝试仅使用用于库的目标文件创建程序，并将其与自身链接。这当然行不通，因为库没有`main`正常程序所需的功能。您必须创建另一个程序，并将*该*程序与库链接。

喜欢

```
gcc myotherprogram.c -o myotherprogram -L/some/path -lxyz 
```

正如您在上面的命令行中看到的那样，我将库放在命令行的*最后*。这是必需的，因为链接器以相反的顺序查找依赖项。

**编辑：**将您的静态库与其他库链接：您没有。静态库是完全独立的，如果它需要其他库本身才能工作，那么在编译实际程序时它们必须出现在命令行上。

例如，假设库`xyz`依赖于标准数学库（即`m`库）。创建库时，您不能“链接”它，`xyz`因为您实际上并没有*链接*静态库，您只需将一组目标文件放在一个存档中（`ar`并且`.a`扩展名用于存档）。当您构建需要该`xyz`库的实际应用程序时，您还需要链接到`xyz`所需的任何库：

```
gcc myotherprogram.c -o myotherprogram -L/some/path -lxyz -lm 
```

# css - IE5.x 中的中心 div？

> ID：12235627
> 
> 赞同：1
> 
> 时间：2012-09-02T11:33:28.350
> 
> 标签：css, internet-explorer, html, internet-explorer-6

我有以下 HTML：

```
<div id="container">
    <div id="header"><h1>Sed sollicitudin dignissim justo, sed.</h1></div>
</div> 
```

和以下CSS：

```
div#container
{
    text-align:left;
    width:500px;
    margin:0 auto;
} 
```

这将创建一个`container`跨越整个屏幕的 div 和`header`第一个 div 中的另一个 div `container`，其中第二个 div 具有固定宽度并以第一个 div 为中心。

这在 IE6 中运行良好，但在 IE5.x 中，它似乎没有居中，它与屏幕左侧对齐。

如何在 IE5.x 中居中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-02T11:37:24.010

IE 5.x 使块居中，就好像有内联元素一样。

```
#containers_parent { text-align: center; }
#container { text-align: left; } /* To reset the alignment for the text inside */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:47:21.750

如果您在页面上只有#container，只需`<center>`在顶部添加

# c++ - 单击“最小化”按钮时，代码块中的“OpenGL 项目”模板会使图形驱动程序崩溃

> ID：12235628
> 
> 赞同：0
> 
> 时间：2012-09-02T11:33:29.053
> 
> 标签：c++, opengl, codeblocks

我正在为 Windows 开发 OpenGL/C++ 游戏并使用 Code::Blocks 作为 IDE。我从 Code::Blocks 中的 OpenGL 模板创建了一个项目，以正确设置 OpenGL，但有一个非常烦人的副作用。

当我单击最小化按钮时，我要么屏幕冻结，然后出现一条错误消息，告诉我图形驱动程序已停止工作，要么屏幕死机。

有没有很好的解决方法（这个错误不是由我对代码所做的事情引起的，我仅从模板中得到了相同的错误）？

如果它是由我的硬件引起的，我想我将不得不更改按钮的默认行为，甚至只是禁用它。如果您需要事件处理或 OpenGL 设置的代码示例，请询问，我将编辑帖子。

# c# - 委托中的方法参数

> ID：12235632
> 
> 赞同：2
> 
> 时间：2012-09-02T11:34:06.243
> 
> 标签：c#, parameters, delegates

我有这个方法：

```
public override void respond(params string[] resargs)
{
    foreach (command cmd in pndgcmds)
    {
        cmd(this);
    }

    if (objs[resargs[0]].status)
        objs[resargs[0]].request(resargs);
    else
    {
        pndgcmds.Add(
            (myclass master) =>
            {
                if (master.objs[resargs[0]].status != true) return;
                master.objs[resargs[0]].request(resargs);
                //code to remove the delegate
            });
    }
} 
```

它检查对象是否能够响应，如果能够响应，则使其响应，否则将命令存储在字典中，以便在下次调用响应时检查并调用状态。

我有两个问题。

1.  如何编写代码来删除委托？我不知道该怎么做。

2.  如您所见，委托的大部分内部工作依赖于方法参数。代表将如何表现？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-02T11:41:41.680

匿名方法很难删除，因为 captire-context 的实例仅在创建时可用，因此是必需的。幸运的是，有一个技巧：

```
SomeDelegateType handler = null;
handler = (myclass master) =>
            {
                if (master.objs[resargs[0]].status != true) return;
                master.objs[resargs[0]].request(resargs);
                pndgcmds.Remove(handler);
            };
pndgcmds.Add(handler); 
```

这现在是一个自退订处理程序，它会在调用时自行退订。请注意，要做到这一点，我们需要存储委托实例 ( `handler`)，但我们随后会在该变量上创建一个闭包。初始`=null`是明确分配的要求。

您应该注意该`resargs`变量也被捕获，如果索引零处的值在订阅之后但在调用之前发生更改，这可能会导致混淆。如果您想使用值“now”，则将其关闭：

```
SomeDelegateType handler = null;
string val = resargs[0];
handler = (myclass master) =>
            {
                if (master.objs[val].status != true) return;
                master.objs[val].request(resargs);
                pndgcmds.Remove(handler);
            };
pndgcmds.Add(handler); 
```

# android - Eclipse Android XML 在编辑器周围跳跃

> ID：12235643
> 
> 赞同：17
> 
> 时间：2012-09-02T11:36:13.560
> 
> 标签：android, eclipse, android-xml

一段时间以来，我一直在处理 eclipse (android) 中的一个烦人的“错误”，而今天它让我非常恼火！所以我想知道有没有其他人遇到过它，你找到解决方法了吗？

这很难解释，所以希望这三个屏幕截图会有所帮助：

第一张截图，一切正常。

![屏幕 1 - 一切正常](../Images/007aaafcac7a0d8e00d962703f989435.png)

第二个屏幕截图，在一个简单的点击后，一切都在移动。

![屏幕 2 - 一个简单的点击，注意线条是如何复制和移动的](../Images/6352c04b499dfa3a8ca73dc9b454cd1c.png)

第三个屏幕截图，再次单击，事情再次发生。

![屏幕 3 - 再次点击，事情再次移动](../Images/571d08abda4291f9838f3086ac3a4643.png)

关闭文件再打开接缝解决了一段时间的问题，但真的很烦人！

有没有人遇到过这个，或者解决它？

--**编辑**

忘了说，我在跑：

*   Eclipse 4.2.0 64 位（在 Windows 7 上）
*   ADT 20

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:08:31.990

这是一个已知错误，如果您在可视化编辑器中编辑布局，然后切换回 xml 编辑器，就会发生这种情况。您有时可以通过上下滚动文件或选择所有文本来修复它。否则，从可视化编辑器切换到 xml 编辑器时，只需关闭并重新打开 xml 文件即可。这很烦人，即使在对 ADT 进行了几次更新后仍然会发生在我身上。

**编辑：**

从那以后，我找到了更好的解决方案。在 Eclipse 中，转到 Window->Preferences。然后在 Android->Editors 下取消选中“自动格式化由可视布局编辑器编辑的 XML”。这应该可以解决问题。您始终可以通过按`Ctrl`++`Shift`手动自动格式化代码`F`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:51:36.733

正如一些评论员所提到的，这似乎是重复的（已标记为这样），尽管这是一个难以描述的问题，这不足为奇！我已经尝试了其中一个问题的[答案](https://stackoverflow.com/a/11418891/508401)，它似乎解决了这个问题。虽然这并不能阻止问题！

# ios - 如何从 iOS 上的本机 Facebook 应用程序在 Safari 中打开移动 webapp 链接？

> ID：12235649
> 
> 赞同：8
> 
> 时间：2012-09-02T11:36:58.023
> 
> 标签：ios, facebook, web-applications, uiwebview, safari

我们的 web 应用在 Facebook 原生 iOS 应用中运行良好。但是，我们有一些链接需要在移动 Safari 中打开一个新窗口，而不是在 Facebook（UIWebView？）应用程序中打开。只是一个普通的 HTML`<a href="http://site...." target="_blank">`并不能做到这一点——仍然在 Facebook 应用程序中打开（最新版本）。有什么方法可以让一个普通的链接或 window.open() 切换到 Safari 以进行页面加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T04:45:20.343

我公司的网络团队尝试了这种方法，但失败了。我们最终做的是在我们的原生 iOS 应用程序上使用 Facebook 深度链接来处理这个问题。

您可以在此处找到有关 Facebook 深度链接的更多信息：

[https://developers.facebook.com/docs/ios/link-to-your-native-app-ios-sdk/](https://developers.facebook.com/docs/ios/link-to-your-native-app-ios-sdk/)

如果您已经拥有 iOS 应用程序，这是一个很好的解决方案。

我希望这有帮助。

# c# - 如何从 C# 锁定 DB 文件，使第三方软件无法访问它们

> ID：12235652
> 
> 赞同：7
> 
> 时间：2012-09-02T11:37:16.543
> 
> 标签：c#, locking

我的要求是“锁定我们的数据库文件的方式是允许从我们的应用程序进程中执行的所有操作，仅阻止第三方应用程序/服务访问。” 为了确保第三方软件在我们的应用程序运行后不会锁定我们的任何数据库文件，我们应该明确锁定所有数据库文件以防止这种情况发生。

背景：我正在开发一个桌面应用程序和 sql ce 作为数据库和 N-hibernate。有时，当我们的应用程序运行第三方软件时，例如备份软件，这些软件会经常运行并在那时进行系统备份，它会锁定我们的数据库文件。

所以我对启动我的应用程序的要求我应该锁定我的数据库文件，这样我的应用程序中的任何线程或任何操作都应该执行数据库上的所有操作，但第 3 方操作应该受到限制。

我尝试使用 FileLock 的示例，但是当通过 N 休眠执行某些数据库操作时，这在我的应用程序中失败了。请帮助我，如果可以的话，这真的可以实现，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:54:47.120

用于`File.Open`写操作而不释放它通常会保持对文件的锁定。其他人将无法书写，但他们仍然可以阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:11:30.830

创建一个新帐户/用户。仅覆盖此用户的文件权限。并将您的应用程序模拟给这个新创建的用户。结果其他用户无法使用您的文件。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T06:53:00.083

我不知道 SQLCE 从什么时候开始支持桌面应用程序的。我更喜欢使用[SQLite](http://www.sqlite.org/)。它本机支持锁定数据库文件，仅使用 sqlite 提供程序。检查出。如果您需要更多详细信息，请告诉我。

# c# - 为什么 Point 和 Rectangle 不能作为可选参数？

> ID：12235653
> 
> 赞同：5
> 
> 时间：2012-09-02T11:37:19.923
> 
> 标签：c#, .net, geometry, arguments, optional-parameters

我正在尝试将一个可选参数传递给一个名为 的几何函数，`offset`它可能指定也可能不指定，但 C# 不允许我执行以下任何操作。有没有办法做到这一点？

*   **默认为空**

    错误：“”类型的值不能用作默认参数，因为没有标准转换为“System.Drawing.Point”类型

    ```
    public void LayoutRelative(.... Point offset = null) {} 
    ```

*   **默认为空**

    错误：'offset' 的默认参数值必须是编译时常量

    ```
    public void LayoutRelative(.... Point offset = Point.Empty) {} 
    ```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-02T11:47:20.423

如果您的默认值不需要任何特殊初始化，则不需要使用可为空的类型或创建不同的重载。您可以使用以下`default`关键字：

```
public void LayoutRelative(.... Point offset = default(Point)) {} 
```

如果您想改用可为空的类型：

```
public void LayoutRelative(.... Point? offset = null)
{
    if (offset.HasValue)
    {
        DoSomethingWith(offset.Value);
    }
} 
```

# grails - 如何在运行时从另一个数据库中获取数据

> ID：12235656
> 
> 赞同：1
> 
> 时间：2012-09-02T11:37:36.513
> 
> 标签：grails, runtime, datasource

我需要一种在运行时更改数据库的最佳方法，无论是从休眠还是从 JNDI 或其他。当用户单击特定按钮（更改对事件的依赖关系）时，我需要更改数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:56:35.083

如果您正在运行 Grails 1.3.x，您可以使用 [Burt Beckwith 的 Datasources 插件](http://www.grails.org/plugin/datasources)，在 Grails 2.x[中，该功能已添加到 core](http://grails.org/doc/latest/guide/conf.html#multipleDatasources)中。

然后你可以使用一个参数来传递数据库连接名称

```
def database = params.database
if(!database) database = "default" 
```

并使用[Groovy 动态方法调用](http://groovy.codehaus.org/Dynamic+Groovy)来调用它

```
def zipCode = ZipCode.'${database}'.get(42)
…
zipCode.'${database}'.save() 
```

# php - 在 mysql_query 中使用多个 $_GET

> ID：12235658
> 
> 赞同：0
> 
> 时间：2012-09-02T11:37:58.533
> 
> 标签：php, mysql

我在一个表中有一个链接，它使用以下代码将两个 $_GET 变量发送到另一个页面：

```
echo "<td><a href='somepage.php?del_date=" . $row['del_date'] . "&order_no=" . $row['order_no'] . "'>Details</a></td>"; 
```

这似乎奏效了，因为我能够在另一页上回显这两个。但是，我不确定将它们都放入 mysql_query 所需的语法。我现在有类似的东西：

```
$result = mysql_query("SELECT panel_product_no, del_quantity
FROM deliveryContainsPanelProduct
WHERE del_date = " . $_GET["del_date"]
AND order_no = " . $_GET["order_no"]); 
```

但这不起作用。我通过使用引号等尝试了一堆变体，但大多数时候页面是空白的，或者充其量它显示表格标题但不输出任何结果。我认为问题出在 WHERE 和 AND 子句之间，但我完全陷入困境。

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:43:21.583

```
$result = mysql_query('SELECT panel_product_no, del_quantity FROM deliveryContainsPanelProduct WHERE del_date = "' . mysql_real_escape_string($_GET["del_date"]) . '" AND order_no = "' . mysql_real_escape_string($_GET["order_no"]) . '"'); 
```

这应该有效。

我还对传入的变量进行了转义，以保护您免受 SQL 注入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:44:55.147

```
$result = mysql_query("SELECT panel_product_no, del_quantity
FROM deliveryContainsPanelProduct
WHERE del_date = " . $_GET['del_date']. " AND order_no = " . $_GET['order_no']); 
```

您忘记为 AND order_no 打开双引号...

是的，如果您阅读了评论，您应该使用 mysqli 扩展，即 mysql 扩展进行查询。或者您应该使用`mysql_real_escape_string()`您在查询中使用的每个参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T13:53:07.570

```
$delDate = mysql_real_escape_string($_GET["del_date"]);
$orderNo = mysql_real_escape_string($_GET['order_no']);

$query = "SELECT panel_product_no, del_quantity FROM deliveryContainsPanelProduct";
$query .= " WHERE del_date =" . $delDate;
$query .= " AND order_no=" . $orderNo; 

$result = mysql_query($query) or die("query error"); 
```

# mysql - MySQL 检查约束

> ID：12235659
> 
> 赞同：0
> 
> 时间：2012-09-02T11:38:08.157
> 
> 标签：mysql, constraints, create-table

我有一个像这样的数据库表：

```
-- Table KNOWN_AS
create table `known_as`(
id int not null auto_increment,
person_id int not null,
default_name boolean not null,
first_name varchar(100) not null,
middle_name_1 varchar(100),
middle_name_2 varchar(100),
middle_name_3 varchar(100),
last_name varchar(100),
primary key(id),
foreign key(person_id) references `person`(id)
) engine=innodb; 
```

插入值时，我想检查每个唯一的“person_id”是否有一个真正的“default_name”。

到目前为止，我所做的所有谷歌搜索等都导致页面解释如何保持一个非负值，或如何确保一个值是唯一的——而不是如何检查一个值在多个条目中是唯一的（但不是*ALL*）。

任何帮助/指针非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:45:23.360

1.  > 我想检查每个唯一的“person_id”是否有一个真正的“default_name”

    为什么不`default_name`作为`NOT NULL`列存储在`person`表中？

2.  > 如何检查一个值在多个条目中是唯一的（但不是全部）

    在组合上定义一个`UNIQUE`索引`(person_id, default_name)`：

    ```
     ALTER TABLE known_as ADD UNIQUE INDEX (person_id, default_name); 
    ```

# android - 使用 MonoDroid 有没有办法用按钮做一个 DoClick() 开关/案例语句？

> ID：12235660
> 
> 赞同：0
> 
> 时间：2012-09-02T11:38:09.567
> 
> 标签：android, button, xamarin.android, switch-statement

我只是想将我在原生 Android / Java 中编写的一些代码移植到 MonoDroid - 但是当我单击按钮时出现以下错误：

> java.lang.IllegalStateException：在 id 为“createProfilePicBtn”的视图类 android.widget.Button 上的 onClick 处理程序的活动类 icantalk.android.CreateProfile 中找不到方法 DoClick(View)

```
 public void DoClick(View view)
    {
        switch (view.Id)
        {
            case Resource.Id.createProfilePicBtn:
                {
                    Log.Error("Profile Pic", "Clicked");
                    break;
                }
            case Resource.Id.createProfileSbmtBtn:
                {
                    Log.Error("Save Button", "Clicked");
                    break;
                }
        }
    } 
```

我的布局 xml 的相关部分是：

```
 <Button
      android:id="@+id/createProfilePicBtn"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="10dip"
      android:layout_marginRight="10dip"
      android:layout_marginTop="10dip"
      android:onClick="DoClick"
      android:text="@string/createProfileImgBtnTxt" />

      <Button
      android:id="@+id/createProfileSbmtBtn"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_marginLeft="10dip"
      android:layout_marginRight="10dip"
      android:layout_marginTop="10dip"
      android:onClick="DoClick"
      android:text="@string/createProfileSaveBtnTxt" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:52:18.790

MonoDroid 目前不支持以这种方式注册事件。

您可以使用代码注册事件：

```
public override void OnCreate(Bundle bundle)
{
    base.OnCreate(bundle);
    //Do other oncreate stuff here (including SetContentView etc)

    //Register the event for your first button
    Button btn = FindViewById<Button>(Resource.id.createProfilePicBtn);
    btn.Click += DoClick;

    //Register the event for your second button
    Button btn2 = FindViewById<Button>(Resource.id.createProfileSbmtBtn);
    btn2.Click += DoClick;
}

public void DoClick(object sender, EventArgs e)
{
    View view = (View)sender;
    switch (view.Id)
    {
       case Resource.Id.createProfilePicBtn:
       {
          Log.Error("Profile Pic", "Clicked");
          break;
       }
       case Resource.Id.createProfileSbmtBtn:
       {
           Log.Error("Save Button", "Clicked");
           break;
       }
    }
} 
```

# android - 使用 SimpleCursorAdapter 在 onLoaderFinished 中出现 NullPointerException

> ID：12235663
> 
> 赞同：11
> 
> 时间：2012-09-02T11:38:46.883
> 
> 标签：android, android-listview, nullpointerexception, android-cursorloader

我已经从`ResourceCursorAdapter`我使用的地方`newView`切换`bindView`到`SimpleCursorAdapter`我只使用该`getView`方法的地方。

现在我在`onLoaderFinished`. 尽管它在我的适配器和游标对象`NullPointerException`上都给了我**NOT null**。我将在下面发布我的所有代码。非常感谢任何帮助（没有多少头发可以拔出）。`adapter.swapCursor(cursor)`

 **```
import android.annotation.SuppressLint;
import android.content.Context;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.CursorLoader;
import android.support.v4.content.Loader;
import android.support.v4.widget.ResourceCursorAdapter;
import android.util.Log;
import android.util.SparseBooleanArray;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.view.Window;
import android.widget.CheckBox;
import android.widget.ListView;
import android.widget.TextView;

public class ContactSelect extends FragmentActivity implements LoaderManager.LoaderCallbacks<Cursor> {
private static final int LOADER_ID = 1;
private MyAdapter adapter;
private ListView list;
private View row;
private SparseBooleanArray checkedState = new SparseBooleanArray();

@SuppressLint({ "NewApi", "NewApi" })
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);
    setContentView(R.layout.activity_contact_select);       

    adapter = new MyAdapter(this, R.layout.contacts_select_row, null, null, null, 0);     

    getSupportLoaderManager().initLoader(LOADER_ID, null, this);        

    list = (ListView)findViewById(R.id.list);                 

    list.setAdapter(adapter);
    list.setEmptyView(findViewById(R.id.empty));    

}   

@SuppressLint("NewApi")
public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    final String projection[] = new String[]{ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME};
    final Uri uri = ContactsContract.Contacts.CONTENT_URI;

    final String selection = ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1" + 
    " AND " + ContactsContract.Contacts.IN_VISIBLE_GROUP + " =1";

    final String order = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    final CursorLoader loader = new CursorLoader(this, uri, projection, selection, null, order);

    return loader;      
}

public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
    for(int i=0;i<cursor.getCount();i++){
        checkedState.put(i, false);
    }

    adapter.swapCursor(cursor);                 
}

public void onLoaderReset(Loader<Cursor> loader) {
    adapter.swapCursor(null);       
}

private class MyAdapter extends SimpleCursorAdapter implements OnClickListener{
    private CheckBox markedBox;
    private TextView familyText;
    private Context context;
    private Cursor cursor;

    public MyAdapter(Context context, int layout, Cursor c, String[] from,
            int[] to, int flags) {
        super(context, layout, c, from, to, flags);

        this.context = context;
        this.cursor = getCursor();
    }

    @Override
    public View getView(int position, View view, ViewGroup group) {

        final LayoutInflater li = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        row = li.inflate(R.layout.contacts_select_row, group, false);

        view.setTag(cursor.getPosition());
        view.setOnClickListener(this);

        familyText = (TextView)view.findViewById(R.id.contacts_row_family_name);
        markedBox = (CheckBox)view.findViewById(R.id.contacts_row_check);
        familyText.setText(cursor.getString(cursor.getColumnIndexOrThrow(ContactsContract.Contacts.DISPLAY_NAME)));

        boolean currentlyChecked = checkedState.get(cursor.getPosition());
        markedBox.setChecked(currentlyChecked);     

        setProgressBarIndeterminateVisibility(false);

        return super.getView(position, view, group);
    }

    public void onClick(View view) {
        int rowId = (Integer)view.getTag();
        Log.d("OnClick", String.valueOf(rowId));
        boolean currentlyChecked = checkedState.get(rowId);
        markedBox.setChecked(!currentlyChecked);
        checkedState.put(rowId, !currentlyChecked);
        Log.d("checkedState", "checkedState(" + rowId + ") = " + checkedState.get(rowId));
    }       
      }     
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-08T12:48:29.547

调用该类的`swapCursor`方法`SimpleCursorAdapter`将触发一个函数，该函数将`String`提供给构造函数（第 4 个参数）的数组中的列名映射到表示列索引的整数数组。当您传入表示来自游标的列名的数组`null`的构造函数时，这将在稍后尝试进行映射时抛出（应该出现在方法中，这是使用列名数组的实际方法）。`MyAdapter``String``NullPointerException``swapCursor``NullPointerException``findColumns``String`

解决方案是传递一个有效的`String`数组，您可能还希望对`int`表示放置数据的视图的 id 的数组执行此操作：

```
String[] from = {ContactsContract.Contacts.DISPLAY_NAME};
int[] to = {R.id.contacts_row_family_name, R.id.contacts_row_check};
adapter = new MyAdapter(this, R.layout.contacts_select_row, null, from, to, 0); 
```

我不知道您要做什么，但是您对该`getView`方法的实现并不完全正确：

您为该`getView`方法执行常规操作（创建布局、搜索视图、绑定数据），然后您只需从超类返回视图（？！？），您可能只会看到默认布局，其中没有任何内容。

您编写该`getView`方法的方式不是很有效，您可能需要查看视图回收和视图持有者模式。

`cursor.getPosition()`不会做你想做的事，因为你没有将光标移动到正确的位置。默认情况下，基于光标的适配器将在`getView`方法中为您执行此操作，但是，当您覆盖该方法时，移动光标的位置是您的工作。

您应该离开该`getView` 方法并使用这两种方法`newView`，`bindView`因为它们提供了更好的逻辑分离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T11:51:31.833

适配器 = new MyAdapter(this, R.layout.contacts_select_row, null, null, null, 0);

以及您传递空光标的 MyAdapter 类

```
 public MyAdapter(Context context, int layout, Cursor c, String[] from,
            int[] to, int flags) {
        super(context, layout, c, from, to, flags);

        this.context = context;
        this.cursor = getCursor();
    } 
```**

# php - 如何将 3 个 mysql 查询组合在一起？

> ID：12235664
> 
> 赞同：0
> 
> 时间：2012-09-02T11:38:55.560
> 
> 标签：php, mysql

我有 3 种不同类型的查询来检索同一页面中的数据。我将如何完全结合？以下是查询：

```
<?php
$sql = "SELECT * FROM general WHERE ((day1sql >= now()))";
if($_GET!=""){
$mydate = mysql_real_escape_string($_GET['datepicker']);
if($mydate!=""){    
$sql = "SELECT * FROM general WHERE ((day1 = '$mydate'))";  
}       
}
if($_GET!=""){
$city1 = mysql_real_escape_string($_GET['cityText']);
if($city1!=""){ 
$sql = "SELECT * FROM general WHERE (city = $city1))";  
}       
} 
```

datepicker 是一个日历，用户可以根据日期获取数据。并且有一个下拉菜单，用户可以选择城市名称。前两个查询工作正常。我很困惑如何整合第三个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T11:40:42.740

您可以使用[逻辑`OR`运算符](http://dev.mysql.com/doc/en/logical-operators.html#operator_or)来组合您的过滤条件：

```
SELECT * FROM general WHERE day1sql >= now() OR day1 = '$mydate' OR city = '$city1' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:48:33.753

像这样的东西可能会起作用：

```
sql = "SELECT * FROM general WHERE (day1sql >= now())";

if(isset($_GET['datepicker'])){
    $mydate = mysql_real_escape_string($_GET['datepicker']);
    $sql .= " AND (day1 = '$mydate')";         
}
if(isset($_GET['cityText'])){
    $city1 = mysql_real_escape_string($_GET['cityText']);
    $sql .= " AND (city = $city1)";  
}       

// execute $sql 
```

我们在 sql 后面加上 AND 条件。我相信这就是你想要做的。

# matplotlib - 如何为两条曲线下方的区域着色？

> ID：12235668
> 
> 赞同：2
> 
> 时间：2012-09-02T11:39:21.100
> 
> 标签：matplotlib, area, curve

我有以下图表组合：

```
import pylab as pl
import numpy as np

def gauss2d(x,sigma):
    return (1/np.sqrt(2*np.pi*sigma ))*np.exp(-1/2*(x/sigma)**2 )

def markParameters(m,s,textsigma, textmean):
    p1=gauss2d(s,s)
    p2=gauss2d(0,s)

    pl.annotate("", xy=(m-s, p1), xycoords='data', xytext=(m+s, p1), textcoords='data', arrowprops=dict(arrowstyle="<->", connectionstyle="arc3"),)
    pl.text(m,p1,textsigma,horizontalalignment='center',verticalalignment='top')
    pl.annotate("", xy=(m, p2*1.1), xycoords='data', xytext=(m, p2*1.1), textcoords='data', arrowprops=dict(arrowstyle="->", connectionstyle="arc3"),)
    pl.text(m,p2*1.1,textmean,horizontalalignment='center',verticalalignment='top') # ,rotation=90
    pl.plot(m,p2)
    pl.plot(m,p2, marker="o", markeredgecolor="blue", markersize=5.0, linestyle=" ",color="blue")

def plot_gauss2d():
    x = np.mgrid[100:135:100j]

    m,s=123.24,3.56
    pl.plot(x,gauss2d(x-m,s), 'b-')
    markParameters(m,s, "$\sigma_{1}$","$\omega_{1}$")

    m,s=120.15,4.62
    pl.plot(x,gauss2d(x-m,s), 'b-')
    markParameters(m,s, "$\sigma_{2}$","$\omega_{2}$")

    m,s=109.67,3.85
    pl.plot(x,gauss2d(x-m,s), 'b-')
    markParameters(m,s,"$\sigma_{3}$","$\omega_{3}$")

def main():
    plot_gauss2d()

if __name__ == "__main__":
    main() 
```

结果如下图： ![例子](../Images/18332574446b4510b5d742998ccda589.png)

现在我想要的是为两个函数重叠的空间着色。就像在这张照片中： ![在此处输入图像描述](../Images/00be46cbf308d3568f1253ea00dd5714.png)

作为奖励，我想在该空间的某处插入两个箭头，但不知何故无法完全管理它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T00:11:52.650

这可能不是最优雅的解决方案，但是`fill_between`一旦解决了交叉点，您就可以获得所需的效果：

```
import matplotlib.pyplot as pl
import numpy as np
from scipy.optimize import fsolve

def gauss(x, mu, sig):
    return 1 / np.sqrt(2 * np.pi) / sig * np.exp(-((x - mu) / sig)**2 / 2.)

def mark_parameters(m, s, textsigma, textmean):
    p1 = gauss(m + s, m, s)

    w = 0.0001
    pl.arrow(m, p1, +s, 0, fc='b', ec='b', length_includes_head=True,
             head_width=w*30, head_length=w*3000, width=w)
    pl.arrow(m, p1, -s, 0, fc='b', ec='b', length_includes_head=True,
             head_width=w*30, head_length=w*3000, width=w)

    pl.text(m, p1*0.98, textsigma, horizontalalignment='center',
            verticalalignment='top')

    p2 = gauss(m, m, s)
    pl.text(m, p2*1.05, textmean, horizontalalignment='center',
            verticalalignment='top')
    pl.plot(m, p2, marker="o", markeredgecolor="blue",
            markersize=5.0, linestyle=" ", color="blue")

def plot_gauss():
    x = np.arange(100, 135, 0.01)

    pars = [(123.24, 3.56), (120.15, 4.62), (109.67, 3.85)]
    ipcolor = {(0, 1): 'red', (1, 2): 'green'}

    prev = None
    for i, (m, s) in enumerate(pars):
        pl.plot(x, gauss(x, m, s), 'b-')
        j = i + 1
        mark_parameters(m, s, "$2\sigma_{%d}$" % j, "$\omega_{%d}$" % j)

        if prev:
            ip, (mp, sp) = prev

            # look for intersection
            x0 = 0.5 * (mp + m)  # initial guess for x
            xi = fsolve(lambda x : gauss(x, mp, sp) - gauss(x, m, s), x0)

            # fill between gauss and y = 0, divided at intersection xi
            color = ipcolor[(ip, i)] if (ip, i) in ipcolor else 'none'
            pl.fill_between(x, gauss(x, mp, sp), where=(x <= xi),
                            color=color)
            pl.fill_between(x, gauss(x, m, s), where=(x > xi),
                            color=color)

        prev = (i, (m, s))

def main():
    plot_gauss()
    pl.show()

if __name__ == "__main__":
    main() 
```

# binding - 在 Monotouch 中绑定使用 ac 库 (dns_sd.h) 的项目

> ID：12235669
> 
> 赞同：0
> 
> 时间：2012-09-02T11:39:29.660
> 
> 标签：binding, xamarin.ios

我试图为这个项目编写一个绑定项目： [https ://github.com/tolo/HHServices](https://github.com/tolo/HHServices)

该项目使用较低级别的 C 类：dns_sd.h。我不知道如何将它导入我的绑定项目。

我需要绑定的所有类都很好，除了这个：

```
#import <Foundation/Foundation.h>
#include <dns_sd.h>                       // Note this!

@interface HHServiceSupport : NSObject {
@private
    CFRunLoopRef runLoop;
@protected
    DNSServiceRef sdRef;
}

@property (nonatomic, readonly) DNSServiceRef sdRef;

@property (nonatomic, assign) DNSServiceErrorType lastError;
@property (nonatomic, readonly) BOOL hasFailed;

- (void) doDestroy;
- (void) dnsServiceError:(DNSServiceErrorType)error;

- (void) openConnection;
- (void) closeConnection;

@end 
```

我对此的绑定看起来像：

```
[BaseType (typeof(NSObject))]
interface HHServiceSupport
{

//    @private
//        CFRunLoopRef runLoop;
//    @protected
//        DNSServiceRef sdRef;

//Do I bind the above??!

//@property (nonatomic, readonly) DNSServiceRef sdRef;
[Export("sdRef")]
DNSServiceRef SDRef { get; set; }

//@property (nonatomic, assign) DNSServiceErrorType lastError;
[Export("lastError")]
DNSServiceErrorType LastError { get; set; }

//@property (nonatomic, readonly) BOOL hasFailed;
[Export("hasFailed")]
bool HasFailed { get; set; }

 //- (void) doDestroy;
[Export("doDestroy")]
void  DoDestroy();

//- (void) dnsServiceError:(DNSServiceErrorType)error;
[Export("dnsServiceError:")]
void  DnsServiceError(DNSServiceErrorType error);

//- (void) openConnection;
[Export("openConnection")]
void  OpenConnection();

//- (void) closeConnection;
[Export("closeConnection")]
void  CloseConnection();

} 
```

因为我不知道如何引用 c 库 dns_sd.h，所以我没有对 DNSServiceRef、DNSServiceErrorType 等类的任何引用，所以库不会构建（说这些是未知的）。

我已经浏览了所有关于此的在线文档，但没有找到任何关于如何引用本机 c 库的内容。

我能找到的最接近的类似问题是：[Refering to DNSSDObjects in dns_sd.h and DNSServiceResolve in MonoTouch](https://stackoverflow.com/questions/8779081/referring-to-dnssdobjects-in-dns-sd-h-and-dnsserviceresolve-in-monotouch) which is unanswered.

任何帮助将不胜感激。

ps：我的最终目标是启用点对点Bonjour，这样我就可以在设备之间建立TCP套接字连接，而不是使用GameKit，因为那只是一场灾难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T03:54:33.983

看看我对[引用 dns_sd.h 中的 DNSSDObjects 和 MonoTouch 中的 DNSServiceResolve 的](https://stackoverflow.com/questions/8779081/referring-to-dnssdobjects-in-dns-sd-h-and-dnsserviceresolve-in-monotouch)回答。不确定它是否对您有帮助，因为它是对 dns_sd 的简单调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T08:08:48.767

虽然这不是我的问题的直接答案，但 iOS6 现在允许您在 p2p 网络（蓝牙）上发布 Bonjour，无需包装我自己的 DNSSDObjects。

来自 Apple 的 iOS6 发行说明：

Bonjour 默认情况下，NSNetService 类和 CFNetService API 不包括 P2P 接口。要通过 P2P 接口浏览、注册或解析服务，应用程序需要使用下面提到的 Bonjour DNSService*() API。在以下 API 中将 interfaceIndex 参数设置为 kDNSServiceInterfaceIndexAny，将默认不包含 P2P 接口。要包含 P2P 接口，您现在必须在使用 kDNSServiceInterfaceIndexAny 时设置 kDNSServiceFlagsIncludeP2P 标志，或将 interfaceIndex 设置为 kDNSServiceInterfaceIndexP2P。

# objective-c - 访问 Objective-C 中不同类的变量

> ID：12235671
> 
> 赞同：-4
> 
> 时间：2012-09-02T11:39:49.270
> 
> 标签：objective-c, ios

我需要帮助才能将变量从一个类读取到另一个类。我已经关注了一些关于此的答案，但没有成功。

PP.h：

```
@interface PP : UIViewController
{
@public int fNum;
}

@property (readwrite, nonatomic) int fNum;

- (IBAction)setSomeNum;

@end 
```

米：

```
@synthesize fNum;

- (IBAction)setSomeNum
{
fNum = 69;
NSLog(@"Set Num Activated %d",fNum); //OK
} 
```

TryView.m：

```
#import "TryView.h"
#import "PP.h"

@interface TryView ()

@end

@implementation TryView
- (void)viewDidLoad
{
[super viewDidLoad];

PP *obj ;
int x = obj.fNum;
NSLog(@"Happines %d",x); //Prints 0
}
@end 
```

怎么了，为什么打印 0？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T11:43:24.487

你所做的基本上是未定义的行为，所以很高兴它没有崩溃。

```
PP *obj ;
int x = obj.fNum; 
```

根本上是错误的-您没有创建/初始化对象，因此`obj`悬空指针也是如此，它可以指向任何地方（即垃圾）并在访问时崩溃。即使你创建了对象，你也应该调用它的`setSomeNum`方法——它不会被自动调用（为什么要调用？）。总而言之，你必须这样写：

```
PP *obj = [[PP alloc] init];
[obj setSomeNum];
int x = obj.fNum; 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T11:46:03.123

请，请阅读一些基本参考资料，例如[http://developer.apple.com/library/ios/#documentation/general/conceptual/devpedia-cocoacore/accessormethod.html](http://developer.apple.com/library/ios/#documentation/general/conceptual/devpedia-cocoacore/accessormethod.html)您没有正确使用 KVO，您正在使用IBActions 作为设置器。

您的实际问题是您在没有实际创建对象的情况下声明了它：

```
PP *obj ;

int x = obj.fNum;
NSLog(@"Happines %d",x); //Prints 0 
```

但是，说真的，这不是问题——真正的问题是你对 Objective-C 语言的了解不够透彻，无法知道你在这段代码中做错了什么，而这才是真正需要解决的问题。

# android - Android NDK gdb (ndk-gdb) exit with error readchar: Got EOF when use "info functions"

> ID：12235672
> 
> 赞同：1
> 
> 时间：2012-09-02T11:39:55.347
> 
> 标签：android, windows, android-ndk, gdb, gdbserver

我遇到了 ndk-gdb 非常奇怪的问题。

当我尝试使用以下命令时：break < fun_name >, break < file_name:line >, info functions 我得到错误和 gdb 退出：

```
(gdb) b Java_com_rtsoft_shared_AppRenderer_nativeResize
readchar: Got EOF
Remote side has terminated connection.  GDBserver will reopen the connection.
Listening on Unix socket debug-socket
/cygdrive/c/Programs/android-ndk-r8b/ndk-gdb: line 699:  2876 Segmentation fault      $GDBCLIENT -x `native_path $GDBSETUP` 
```

Tha poroblem 我看到这个 gdb 没有看到我的 src 文件，但是为什么呢？

“info sharedlib”显示我加载的库以及它们所有的调试符号。

```
 No          libwmlscriptcore.so
                        No          libwebcore.so
0x81186590  0x813909a8  Yes         C:/Workspace/Irrlicht/ElementDefence/project/android/obj/local/armeabi/libirrlicht.so
0x80cbb5d8  0x80dcbdcc  Yes         C:/Workspace/Irrlicht/ElementDefence/project/android/obj/local/armeabi/libBullet.so
0x81939240  0x81a49be8  Yes         C:/Workspace/Irrlicht/ElementDefence/project/android/obj/local/armeabi/libelementaldefence.so
                        No          gralloc.msm7k.so
                        No          libGLES_android.so
                        No          libgsl.so 
```

"show dir" 显示所有包含 src 文件 (.c, .cpp) 的有效目录。

```
show dir
Source directories searched: C:/Programs/android-ndk-r8b/platforms/android-8/arch-arm/usr/include;C:/Workspace/Irrlicht/ElementDefence/project/android/jni;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Entity;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/GUI;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Manager;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Math;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Renderer;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Network;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Audio;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Renderer/linearparticle/sources;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Irrlicht;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/Component;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/GameObjects;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/GameObjects/CreepStates;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/GameObjects/TowerStates;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/gs;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/mgr;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/mgr/CursorActions;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/mgr/MagicEffects;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/mgr/MagicEffects/Affectors;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../project/source/utils;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/android;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/util;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Irrlicht/include;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Irrlicht/source/Irrlicht;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Irrlicht/source/Irrlicht/libpng;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Irrlicht/source/Irrlicht/jpeglib;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/ClanLib-2.0/Sources;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/util/boost;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/memory;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Bullet;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/pugixml;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/util/unzip;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/util/zlib;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/util/bzip2;C:/Workspace/Irrlicht/ElementDefence/project/android/jni/../../../shared/Irrlicht/irrBullet;C:/Programs/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/include;C:/Programs/android-ndk-r8b/sources/cxx-stl/gnu-libstdc++/4.6/libs/armeabi/include;$cdir;$cwd 
```

当应用程序崩溃 gdb 停止时，显示堆栈跟踪并对“c”命令做出反应，但不显示任何 src 文件。

当程序在 Java 制动点（在 Eclipce 中）停止时，我在 cygwin shell 中运行以下命令（具有管理员权限）：

`$NDK/ndk-gdb --verbose --force --adb=/cygdrive/c/Programs/android-sdk/platform-tools/adb.exe`

我在设备上调试。尝试使用 android-ndk-r7-crystax-5.beta2 和 android-ndk-r8b。都是一样的错误。有人有这个问题吗？

谢谢。

# iphone - NSMutablearray 定义初始化问题

> ID：12235673
> 
> 赞同：0
> 
> 时间：2012-09-02T11:39:58.717
> 
> 标签：iphone, objective-c, xcode, arrays, nsmutablearray

我有以下代码行

```
NSMutableArray *marray = [[NSArray arrayWithObjects: @"4", @"1", @"9", nil]mutableCopy]; 
```

我想用以下行替换它

```
NSMutableArray  *marray = [[NSMutableArray alloc]initWithArray:garr]; 
```

其中 garr 是来自全局方法的全局数组

问题是代码在调用第一行时运行良好，但在使用第二行时代码崩溃，感谢您的帮助和想法，谢谢，知道第一个是 NSArray 但 garr 变量源是 NSMutable 数组这里是代码加尔

```
 garr = [[NSMutableArray alloc]init];
    for (int x = 0; x < 10; x++) {
        [garr addObject:[NSNumber numberWithInt: arc4random()%200]]; 
```

这是错误消息控制台错误：2012-09-02 14:46:42.976 sort_alg[1561:207] -[NSCFNumber UTF8String]: unrecognized selector sent to instance 0x4b1a170 2012-09-02 14:46:42.978 sort_alg[1561: 207] *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[NSCFNumber UTF8String]：无法识别的选择器发送到实例 0x4b1a170”***第一次抛出调用堆栈：–</p>

这是生成最终值的代码

```
NSString *element; 
NSEnumerator *iterator = [marray objectEnumerator];
while ((element = [iterator nextObject]) != nil)
printf("%s ", [element UTF8String]);
printf("\n");
[marray release];   // array needs to be released! 
[pool release]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:02:26.933

问题在于`printf("%s ", [element UTF8String]);`。

`NSNumber`没有`UTF8String`方法，只有一个`stringValue`. 你也不能`printf`，但你可以`NSLog("%@", [element stringValue])`，或者`NSLog("%d", [element intValue])`如果你知道它是一个 int。

# c# - WPF 应用程序未显示在任务管理器中

> ID：12235674
> 
> 赞同：0
> 
> 时间：2012-09-02T11:40:01.767
> 
> 标签：c#, .net, wpf

我的 WPF 应用程序未显示在 Windows 任务管理器应用程序选项卡中，但它显示在任务栏和任务管理器进程选项卡中。我该如何解决这个问题？或者是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:35:11.353

你设置了`WindowStyle="ToolWindow"`吗？

如果是这样，这就是它没有显示在任务管理器的应用程序选项卡中的原因。

如果您使用该样式以便摆脱最小化/最大化按钮，那么另一种方法是重新设置 Window 模板的样式。

或者您可以使用此处的一些想法来更改 Window 的样式，而无需使用 ToolWindow 样式。

*   [如何从 WPF 中可调整大小的窗口中删除最小化和最大化？](https://stackoverflow.com/questions/339620/how-do-i-remove-minimize-and-maximize-from-a-resizable-window-in-wpf)

# r - R中的粗体箱线图标签

> ID：12235677
> 
> 赞同：5
> 
> 时间：2010-12-04T18:18:59.190
> 
> 标签：r, label, boxplot

有人知道如何在 R 箱线图中加粗`x`和`y`轴标签（“单个样本”和“值轴”）吗？

这就是我的箱线图的样子： ![http://img822.imageshack.us/img822/331/23807704.png](../Images/a417f40881180ffe674ebf1d2f6792ae.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-12-04T18:43:26.597

使用此示例数据：

```
dat <- data.frame(values = c(rnorm(100, mean = 1), rnorm(100, mean = 3),
                             rnorm(100, mean = 4, sd = 3)),
                  groups = factor(rep(c("aaa","bbb","ccc"), each = 100))) 
```

有几种方法。一种是在表达式中使用`?plotmath`功能和`plotmath`“功能” ：`bold()`

```
boxplot(values ~ groups, data = dat,
        ylab = expression(bold(Value~axis)),
        xlab = expression(bold(Single~sample))) 
```

或者，类似地

```
boxplot(values ~ groups, data = dat,
        ylab = expression(bold("Value axis")),
        xlab = expression(bold("Single sample"))) 
```

另一种方法是将标题从绘图中移除，然后`title()`使用粗体字体将它们添加到函数中：

```
boxplot(values ~ groups, data = dat)
title(ylab = "Value axis", xlab = "Single sample", font.lab = 2) 
```

我们需要图形参数`font.lab`，因为这是控制轴标签的参数。阅读中的条目以`?par`获取更多信息。

# struts2 - Struts2 - 表单提交后用更新的数据重新填充页面

> ID：12235682
> 
> 赞同：0
> 
> 时间：2012-09-02T11:40:57.890
> 
> 标签：struts2

我有一个名为 diary.jsp 的 jsp 页面，其中与之关联的操作类称为 DiaryAction，在这个类中，我使用 populate 方法来预填充字段。当我第一次使用 URL 中的 PopulateDiary.action 访问页面时，这按预期工作，即

```
<li><a href="populateDiary.action">Profile</a></li> 
```

但是，作为此页面的一部分，我有一个表单，用户可以在其中添加新的日记条目。在提交此表单时，我调用以下操作：

```
<action name="addDiaryEntry" method="addDiaryEntry"    
    class="spirit.of.community.action.classes.DiaryAction">
    <result name="success">/diary.jsp</result>
</action> 
```

这是调用正确的代码来添加新的日记条目。但是，在此操作方法成功后，我想再次显示相同的页面，即 diary.jsp 和填充的数据（以包括更新的条目）。我已将这一行放在我的 diary.jsp 页面中，希望这能实现我的目标：

```
<s:action name="populateDiary"></s:action> 
```

现在，当 diary.jsp 加载时，我可以看到 populate 方法被调用。但是该页面没有填充我的任何数据。如果它有任何重要性，提交表单时的 URL 是 - “/addDiaryEntry.action”。谁能告诉我如何调用我的 addEvent 方法来添加一个新条目，然后用更新的数据重新加载页面？任何建议表示赞赏！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:02:07.530

你有几种方法可以做到这一点，他们在这里

1.  当您调用`addDiaryEntry`操作添加日记实例时，您可以创建所有条目的列表，并可以使用迭代器按照您的方式显示数据。
2.  另一种方法是`<s:action name="populateDiary" executeResult="true">`.

执行结果告诉是否应该执行/呈现此操作的结果（可能是视图）。

有关更多详细信息，请参阅[执行操作](http://struts.apache.org/2.3.1/docs/action.html)

# data-visualization - 如何在 Gnuplot 中显示堆叠的条形图？

> ID：12235683
> 
> 赞同：16
> 
> 时间：2011-02-23T15:01:40.443
> 
> 标签：data-visualization, gnuplot

我有一个看起来有点像这样的数据文件：

```
A 0.2  0.5
B 0.65 0.8
C 0.4  0.2 
```

即，它包含三列，其中第一列包含标签，另外两列包含浮点值。列由空格分隔。

我想以这样一种方式绘制它，即标签在 x 轴上显示为抽动，而列被绘制为两个不同颜色的条形图。

如何使用 Gnuplot 实现这一目标？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2011-04-25T08:47:06.100

假设您的数据存储在文件中`1.dat`，可能会生成堆叠条形图，如下所示：

```
set style data histograms
set style histogram rowstacked
set boxwidth 1 relative
set style fill solid 1.0 border -1
set yrange [0:1.5]
set datafile separator " "
plot '1.dat' using 2 t "Var 1", '' using 3:xticlabels(1) t "Var 2" 
```

如您所见，条形图与直方图没​​有什么不同（至少在 Gnuplot 中是这样）。更多信息可以在 gnuplot[演示页面](http://gnuplot.sourceforge.net/demo/histograms.html)上找到。

![在此处输入图像描述](../Images/92dc4db95e2764d9bf798a3a845b8ef3.png)

# android - Android 立即检测到蓝牙断开连接

> ID：12235686
> 
> 赞同：8
> 
> 时间：2012-09-02T11:41:11.673
> 
> 标签：android, bluetooth

我正在寻找一种方法来检测蓝牙设备在发生后*立即*断开连接（最多 1 秒），通常是在“设备太远”的情况下。`BroadcastReceiver`目前我可以通过获取 a来检测它`BluetoothDevice.ACTION_ACL_DISCONNECTED`，但大约需要 20 秒才能触发......自己设置超时会更快，但我认为应该有一种方法可以在较低级别进行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T12:15:44.370

为什么不在更高的层次上做呢？蓝牙超时需要一段时间 - 这是射频技术固有的。

每秒发送一次消息怎么样？如果没有回复 ->**断开连接**

# php - 使用类的输出来构造一个新的 if 和 else

> ID：12235687
> 
> 赞同：0
> 
> 时间：2012-09-02T11:41:13.310
> 
> 标签：php

我正在使用 a`user id , friend id , page`并将值传递给一个类，以便它可以检测到登录用户可以根据其他用户的隐私设置查看其他用户的个人资料。例如，在将值传递给类之后，会发生查询内容，并且我正在使用 echo 来判断类的输出是否`allow`或`dont`意味着基于隐私设置的这两个词。现在的问题是我如何使用这个输出在变量中使用？

我像这样将值传递给类

```
$error_result->check_allowed($friend_id,$id,$page); 
```

现在我知道我从该类中获得了允许或不允许的输出。现在我如何进一步使用该输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:57:53.013

在函数`check_allowed()`中，执行查询后，您需要使用`return`语句返回 TRUE/FALSE 值。这可以在调用方使用。

例子：

```
// ---- function definition inside the class
function check_allowed($friend_id,$id,$page)
{
  // do some queries or whatever operation..
  if($query_succeeded)
    return true;
  else
    return false;
}

//----------------- outside the class, we are calling this function..

$result = $error_result->check_allowed($friend_id,$id,$page); 
if($result == true)
{
  echo "Allowed";
}
else
{
  echo "Not allowed";
} 
```

希望这可以帮助。祝你好运 ：）

# jquery - 在对象中调用动态jquery函数

> ID：12235692
> 
> 赞同：0
> 
> 时间：2012-09-02T11:41:59.490
> 
> 标签：jquery, object, dynamic, call

您好，我在stackoverflow上找到了一篇关于如何调用动态函数的文章：

```
function mainfunc(func) {
    this[func].apply(this, Array.prototype.slice.call(arguments, 1));
} 
```

这非常有用。但是我怎样才能在我的对象函数中调用函数呢？

我收到一个错误：

> “TypeError: this[func] is undefined this[func].apply(this, Array.prototype.slice.call(arguments, 1));”

看起来像：

```
var myScript = {
...
add : function() {
...
myScript.ajax('url.php', params, 'myScript.add2List');
},

add2List : function(data) {
console.log(data);
},

ajax : function(url, params, func) {
  $.ajax({
      type: "POST",
      url: url,
      data: params,
      success: function(data) {
        console.log(func);
        mainfunc(func, data);
      }
  });
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:48:12.360

您不需要使用该功能，您可以执行以下操作。

```
var myScript = {
...
add : function() {
  ...
  myScript.ajax('url.php', params,  this.add2List);
},

add2List : function(data) {
  console.log(data);
},

ajax : function(url, params, func) {
  $.ajax({
      type: "POST",
      url: url,
      data: params,
      success: func
  });
 }
} 
```

# git - 如何使用 git filter-branch 从 master 分支中取出一些大文件

> ID：12235699
> 
> 赞同：1
> 
> 时间：2012-09-02T11:43:19.930
> 
> 标签：git, git-filter-branch

我是git的初学者，主要依赖Source Tree之类的GUI工具，请多多包涵！

在我们的 git 存储库中，我们有多个依赖于非常相似的核心代码库的产品。我们通过每个产品都有一个分支来实现这一点。当我们刚开始开发时，我们还没有将其建立为工作流，所以我们的分支历史看起来有点像这样：

```
 master
   |
B  |  C
 \ | /
  \|/
   |
   |  A
   | /
   |/
   2
   |
   |
   1
   |
   | 
```

A、B 和 C 是特定于产品的分支，其中 A 是我们为客户提供的第一个产品。

**问题**

不幸的是，在第 (1) 点左右，我们已经在处理 A，并且已经开始提交大量 .png 文件（价值约 100MB），但还没有考虑将其作为一个单独的项目进行分支。我已经尝试从 B 和 C（以及 master 分支）的 repo 中删除这些大文件，但当然它们仍然在点 (1) 和 (2) 之间的 git 提交历史记录中。

那么，有什么方法可以重写历史记录，以便分支 A 实际上从点 1 开始，并将特定于该产品的所有文件移动到该分支中？值得庆幸的是，过滤掉与产品 A 相关的文件应该很容易，因为它们大多位于单独的目录中。

理论上，master 分支只需要 10MB 左右，因为它主要由代码组成，这意味着人们只能检查特定的产品分支，并且只能从 github 下载他们实际需要的文件。

谢谢！

***编辑***：注意，这是一个类似的问题： [git: Split history of some files into a separate branch](https://stackoverflow.com/questions/4278264/git-split-history-of-some-files-into-a-separate-branch)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:10:50.903

以下应该可以解决问题：

```
git checkout A
git rebase 2 --onto 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-24T13:34:10.707

首先，备份！

然后，这样做：

```
git filter-branch -f --prune-empty --tree-filter 'rm -rf PATH/TO/FILE-OR-FOLDER' HEAD 
```

进而

```
git gc --aggressive 
```

通过[http://www.simplicidade.org/notes/archives/2009/04/merging_two_unr.html](http://www.simplicidade.org/notes/archives/2009/04/merging_two_unr.html)

# javascript - JavaScript 运行时错误 函数不正确 - 最奇怪的错误

> ID：12235705
> 
> 赞同：0
> 
> 时间：2012-09-02T11:44:46.680
> 
> 标签：javascript, windows-8, microsoft-metro

我正在使用 Javascript 编写一个 Windows 8 应用程序。我在使用 Windows 8 模拟器测试我的应用程序时遇到了这个问题。这似乎是 ui.js 的一个错误。

```
Exception was thrown but not handled in user code at line 22600, column 25 in ms-appx://microsoft.winjs.1.0.rc/js/ui.js

0x800a138f - JavaScript runtime error: Unable to get property 'style' of undefined or null reference

If there is a handler for this exception, the program may be safely cont 
```

它指向这条线。

```
that._viewport.style.opacity = 1.0; 
```

控制台日志

```
SCRIPT5007: Exception was thrown but not handled in user code at line 22600, column 25 in ms-appx://microsoft.winjs.1.0.rc/js/ui.js
0x800a138f - JavaScript runtime error: Unable to get property 'style' of undefined or null reference
File: ui.js, line: 22600 column: 25 
```

**更新：** 今天 2012/08/09。当我运行我的应用程序时，它会在 jquery.js 和 ui.js 中生成另一个奇怪的错误。他们怎么了？？？

```
'WWAHost.exe' (Script): Loaded 'Script Code (MSAppHost/1.0)'. 
Exception was thrown at line 5200, column 4 in ms-appx://7034140f-baab-4c76-b27c-2a4c76641550/js/jquery.js
0x800a139e - JavaScript runtime error: SyntaxError
Exception was thrown at line 28908, column 30 in ms-appx://microsoft.winjs.1.0.rc/js/ui.js
0x80004005 - JavaScript runtime error: Incorrect function. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:02:18.483

遗憾的是，这是 Windows 8 RC 版本中 WinJS 中的一个已知错误。好消息是该错误已在 RTM 版本中修复。

# javascript - 在循环中使用 xhr 对象进行 html5 分块上传

> ID：12235709
> 
> 赞同：3
> 
> 时间：2012-09-02T11:45:42.850
> 
> 标签：javascript, ajax, html, xmlhttprequest

专家们，我在循环通过我为可恢复分块上传创建的 BLOB 块时遇到问题。我遵循的方法是：我使用 Blob.slice() 将要上传的文件分块，将所有块推送到队列中并尝试将它们发送到我的服务器。

我面临的问题是关于循环块。第一个块发送成功，我最终在下面提到的上传下一个方法中，从委托给 xhr.onreadystatechange 的函数中。到目前为止一切都很好，但是这段代码在发送前两个块后才停止并且不会循环。

以下代码是我到目前为止所取得的成果：

```
uploadFile: function(item, location, start, isresume) {
        var blob = item.file;

        const BYTES_PER_CHUNK = 1024 * 200 * 10; 
        const SIZE = blob.size;

        var chunkId = 0;
        var end = BYTES_PER_CHUNK;

        while(start < SIZE) {
            var chunkObj = {};
            // Note: blob.slice has changed semantics and been prefixed. See http://goo.gl/U9mE5.
            end = start + BYTES_PER_CHUNK;
            if(end > SIZE){
                end = SIZE;
            }
            if ('mozSlice' in blob) {
                chunkObj["chunk"] = blob.mozSlice(start, end);
                chunkObj["id"] = chunkId;
            } else {
                // var chunk = blob.webkitSlice(start, end);
                chunkObj["chunk"] = blob.slice(start, end);
                chunkObj["start"] = start;
                chunkObj["end"] = end-1;
                chunkObj["id"] = chunkId;
            }
            chunkId++;
            item.chunks.push(chunkObj);

            start = end ;
        }
        this.upload(item, location, SIZE, isresume);
    },

    upload: function(item, location, SIZE, isresume) {
        var xhr = new XMLHttpRequest();
        // Upload the first chunk
        xhr.upload.addEventListener("error", this.onFileUploadError.createDelegate(this, [item, xhr], 0), false);
        xhr.onload = this.getStatus.createDelegate(this, [item, xhr, isresume], 0);
        xhr.onreadystatechange = this.isChunkUploaded.createDelegate(this, [item, item.chunks[0], xhr, 0, SIZE, location, isresume], 0);
        xhr.open("PUT", location, true);
        xhr.setRequestHeader("Content-Range", "bytes " + item.chunks[0].start + "-" + item.chunks[0].end + "/" + SIZE);
        xhr.send(item.chunks[0].chunk);
    },

    uploadNext: function(item, xhr, index, SIZE, location, isresume) {
        if(index > item.chunks.length) {
            return;
        }

        console.log("uploading next chunk");

        xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("error", this.onFileUploadError.createDelegate(this, [item, xhr], 0), false);
        xhr.onload = this.getStatus.createDelegate(this, [item, xhr, isresume], 0);
        xhr.onreadystatechange = this.isChunkUploaded.createDelegate(this, [item, xhr], 0);
        xhr.open("PUT", location, true);
        xhr.setRequestHeader("Content-Range", "bytes " + item.chunks[index].start + "-" + item.chunks[index].end + "/" + SIZE);
        xhr.send(item.chunks[index].chunk);
        //this.uploadNext(item, xhr, index + 1, SIZE, location, isresume);
    },

    isChunkUploaded: function(item, chunkObj, request, index, SIZE, location, isresume, e) {
        if (request.readyState === 4) {
            console.log("chunk " + index + " uploaded");
            this.uploadNext(item, request, index + 1, SIZE, location, isresume);
        }
    }, 
```

PS我不能用jquery做同样的事情（不要问为什么）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T08:25:45.690

没关系，这工作正常。通过发送比预期更少的函数参数作为函数参数，我犯了一个错误。

# objective-c - 如何为子类设置委托

> ID：12235711
> 
> 赞同：0
> 
> 时间：2012-09-02T11:46:06.650
> 
> 标签：objective-c, xcode, cocoa-touch, delegates

我正在编写自己的开关类。我想向它添加一个委托 - 例如，如果我们有 UIImagePickerController，我们将 UIImagePickerControllerDelegate 添加到一些视图控制器的@interface，我们可以设置诸如 imagePickerControllerDidCancel:(UIImagePickerController *)picker 之类的方法...

我想为我的班级做类似的事情 - 它被命名为 HSwitch，所以我想将 HSwitchDelegate 添加到某个视图控制器的@interface。

我想向这个委托添加一个方法 valueWasChanged，我可以在 viewController 中设置它，并且每次滑块更改值时都会调用它。

我怎样才能做到这一点？我还没有这样做，所以...请帮助我:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:07:51.680

如果你的类是一个开关，大概它继承自 UIControl。如果是这种情况，请不要引入委托的复杂性 - 改用 target-action，并像使用任何其他控件一样发送操作/注册目标。有关详细信息，请参阅[UIControl 类参考](http://developer.apple.com/library/ios/documentation/uikit/reference/UIControl_Class/Reference/Reference.html)。`UIControlEventValueChanged`将是适合您需求的活动。

# android - Android：在后台从网络下载

> ID：12235712
> 
> 赞同：0
> 
> 时间：2012-09-02T11:46:14.077
> 
> 标签：android, service, android-activity, background

我需要创建一个简单的应用程序来执行此操作： - 每次运行尝试从网络下载大约 20 个 pdf （每次都从同一个位置，因为服务器每分钟都会保持更新） - 主要活动将只是pdf 列表。将扫描一个目录以查找下载的文件。如果有的话，它们将被列出。

问题是我需要“在后台”下载，而不是“永无止境的服务”。

我正在考虑在应用程序启动时创建启动服务。主要活动扫描目录显示pdf，而服务尝试下载pdf。

如果第一次还没有下载所有的pdf，那不是问题。

我试图这样做，但服务“锁定”了应用程序，所以应用程序没有响应。

我在想该服务运行到一个单独的线程中。是真的吗？

那么：让活动顺利进行但在后台“某事”下载大量文件的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T11:53:52.020

[Android-AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[Android-IntentService](http://developer.android.com/reference/android/app/IntentService.html)最适合您的要求。

如果您打算使用 AsyncTask，您可以在继续下载的同时定期更新您的 Activity UI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:08:38.513

我建议深入检查 Intent Service 概念。[http://developer.android.com/reference/android/app/IntentService.html](http://developer.android.com/reference/android/app/IntentService.html)

从一方面来说，这是一种服务。这意味着当用户从您的应用程序中按“主页”时，系统可能不会终止下载。然而，它不是

> 永无止境的服务

因为它将在下载完成后完成（如果不再启动任务）。

并回答你的问题：

> 我在想该服务运行到一个单独的线程中。是真的吗？

这不是 100% 正确的。如果您只是`startService`在 Service.onCreate() 中使用并执行繁重的任务 - 它会挂起您的应用程序，因为它在 UI 主线程中运行。但是，如果您要扩展 IntentService - 它有一个方便的方法来覆盖`onHandleIntent`（[http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent(android.content.Intent](http://developer.android.com/reference/android/app/IntentService.html#onHandleIntent(android.content.Intent) )），这将是在单独的线程中执行。IntentService 将为您做到这一点。

如果有任何问题，请告诉我。

# html - iframe 有滚动条，但没有滚动条？

> ID：12235713
> 
> 赞同：0
> 
> 时间：2012-09-02T11:46:15.573
> 
> 标签：html, css

我的 iframe 上有一个滚动条，但滚动条不会显示？怎么来的 ？

这是我的代码：

```
<div id="wpr">

        <iframe id="my-iframe"  scrolling="yes" frameborder="0" src="http://kikar.changemakers.com/%D7%94%D7%AA%D7%97%D7%A8%D7%95%D7%AA-%D7%9C%D7%99%D7%96%D7%9E%D7%95%D7%AA-%D7%91%D7%97%D7%99%D7%A0%D7%95%D7%9A"   >

        </iframe>
    </div> 
```

```
#wpr{ 
    width: 953px;    
    height: 500px;    
    overflow: hidden;    
    position: relative; 
    margin: 0 auto; 
    height: 1366px;
}
#my-iframe{
    position: absolute;    
    top: -179px;    
    left: -147px;    
    width: 1262px;    
    height: 1587px; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:46:31.490

```
#wpr{ width    : 953px;    height   : 500px;    overflow : hidden;    position : relative; margin: 0 auto; height:1366px;} 
```

# 我的 iframe {

```
overflow-y:scroll;
overflow-x:hidden;    
position : absolute;    
top      : -179px;    
left     : -147px;    
width    : 1262px;    
height   : 1587px; } 
```

[http://jsfiddle.net/ZZUaa/](http://jsfiddle.net/ZZUaa/)

向彼得·辛科夫斯基致敬！

# android - 下载图像和文本并在我的应用程序中使用它们的最佳方式是什么？

> ID：12235714
> 
> 赞同：0
> 
> 时间：2012-09-02T11:46:38.603
> 
> 标签：android, android-layout, android-intent, android-widget

我创建了一个应用程序，它从服务器加载数据并在 android UI 组件中以特定格式对其进行格式化，例如文本视图和图像视图，但是加载需要很长时间，我想知道减少加载时间和增加加载时间的最佳方法是什么我的应用程序的加载速度和质量，如果您知道书名或博客或维基，请不要犹豫，直到我。如果您想查看我正在谈论的开发和发布的应用程序，请访问android 市场上的[Wasfati应用程序。](https://play.google.com/store/apps/details?id=com.alameenTech.android)

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:21:06.077

要从服务器加载数据，最好`Asynctask`与 ProgressDialog 一起使用。并加载图像延迟加载图像是最好的解决方案。

[在此处阅读 AsyncTask](http://www.vogella.com/articles/AndroidPerformance/article.html)

[fedors 惰性列表示例](https://stackoverflow.com/a/3068012/792232)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:43:33.793

**1.**始终保持`UI`在UI线程上工作，而在Non-UI线程上工作，本来是一种很好的编程方式，但随着android版本`Non-UI`的到来成为了一种规律。`HoneyComb`

**2.**当一个Android App**启动时**，你从线程开始，现在为了保持**UI**`UI`线程响应，我们需要在.**`Non-UI thread`**

 ****3**您可以使用`simple thread`with来执行此操作`Handler`，您可以在线程中执行非 UI 工作，然后使用处理程序在 UI 上显示输出。

**4.**另一种比较好的方法是`AsyncTask`，在android中引入，也称为**Painless Threading**。这会自动`Synchronizes`出现在 UI 和非 UI 线程中。

**5.**现在关于延迟，这有时取决于您的**Internet 连接**......但是是的，使用线程来处理不同的非 UI 工作，然后将其放在 UI 线程上，有助于减少延迟......**

# ruby - 在 Rails 中覆盖“显示”资源路由

> ID：12235718
> 
> 赞同：9
> 
> 时间：2012-09-02T11:47:21.953
> 
> 标签：ruby, ruby-on-rails-3.2

```
resources :some_resource 
```

也就是说，有一条路线`/some_resource/:id`

事实上，`:id`for`some_resource`将始终存储在会话中，所以我想`/some_resource/:id`用`/some_resource/my`. 或者我想用`/some_resource/`GET 覆盖它并删除`/some_resource/`索引操作的路径。

我怎样才能达到这两个目标？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T14:28:14.153

在你的 routes.rb 放：

```
get "some_resource" => "some_resource#show" 
```

**行**前****

 **```
resources :some_resource 
```

然后rails会在找到资源之前拿起你的“get”......从而覆盖get /some_resource

此外，您应该指定：

```
resources :some_resource, :except => :index 
```

虽然，如前所述，rails 不会捡起它，但这是一个很好的做法

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-15T21:10:05.640

[陈的回答](https://stackoverflow.com/a/12236731/514866)很好（我用过这种方法一段时间），但有一种标准化的方法。在[官方 Rails 指南](http://guides.rubyonrails.org/routing.html#adding-collection-routes)中，首选使用**收集路线。**

集合路由存在，因此 Rails 不会假定您正在指定资源`:id`。在我看来，这比在`routes.rb`文件中使用优先级覆盖路由要好。

```
resources :some_resource, :except => :index do
  get 'some_resource', :on => :collection, :action => 'show'
end 
```

如果您需要指定多个收集路线，则首选使用块。

```
resources :some_resource, :except => :index do
  collection do
    get 'some_resource', :action => 'show'
    # more actions...
  end
end 
```**

# java - 自定义 Swing 组件和更新 JScrollPane 滚动条

> ID：12235721
> 
> 赞同：1
> 
> 时间：2012-09-02T11:47:45.170
> 
> 标签：java, swing, custom-controls

我创建了一个自定义 JComponent，它在paintComponent 中绘制文本。将它放在 ScrollPane 中我想在附加文本超出视口时自动显示 scollbars。当我调整整个框架的大小时，滚动条会正确更新。但我想以编程方式进行。我尝试了几个#validate() 和#invalidate() 调用，但无济于事。

如何使用自定义组件作为客户端更新滚动窗格的滚动条？

我创建了一个简化的可运行示例来说明我的意思：

```
package swingscroll;

import java.awt.Color;
import java.awt.Dimension;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.BorderFactory;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class SwingScroll {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        final JFrame frame = new JFrame(SwingScroll.class.getSimpleName());
        final JComponent myComponent = new JComponent() {
            private Dimension preferredSize;

            @Override
            public void setPreferredSize(Dimension preferredSize) {
                super.setPreferredSize(preferredSize);
                this.preferredSize = preferredSize;
            }

            @Override
            public Dimension getPreferredSize() {
                return this.preferredSize;
            }

        };
        myComponent.setPreferredSize(new Dimension(380, 50));

        final JScrollPane scrollPane = new JScrollPane(myComponent);
        frame.getContentPane().add(scrollPane);

        frame.setSize(400, 100);
        frame.setVisible(true);

        // simulate the internal change of preferredSize in myComponent
        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException ex) {
                    Logger.getLogger(SwingScroll.class.getName()).log(Level.SEVERE, null, ex);
                }
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        // this should trigger the scrollbar right?
                        myComponent.setPreferredSize(new Dimension(380, 1000));
                        // TODO insert code to update scrollbars
                    }
                });
            }
        }).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T12:56:29.377

```
// TODO insert code to update scrollbars
myComponent.revalidate(); 
```

刚看到你的评论：

> 当我在我的简单示例中添加重新验证和重新绘制时，滚动条仍然没有更新。

Worksforme - 虽然您的示例的问题是滚动条总是显示，所以看起来什么都没有发生。调整大小以便最初没有垂直滚动条，然后更新到必须显示条的高度就可以了。

顺便说一句：我假设示例中的 setPref 仅用于演示，*而不是*在生产代码中。

# ios - 从自定义键盘控制器访问第一个视图控制器

> ID：12235727
> 
> 赞同：2
> 
> 时间：2012-09-02T11:48:40.470
> 
> 标签：ios

这就是问题所在——我已经实现了一个自定义键盘——它基于它的视图，并关联了我的 keyboard.m 和 keyboard.h 文件。IBAction clickKey 与每个键盘按钮相关联。我从这个例子开始工作

[http://polythinking.wordpress.com/2012/04/02/how-to-add-custom-keyboard-at-ios-development/](http://polythinking.wordpress.com/2012/04/02/how-to-add-custom-keyboard-at-ios-development/)

我的项目中还有一个带有文本字段的第一个视图控制器。使用委托，当单击第一个视图上的这些文本字段时，我成功地让自定义键盘出现。

现在，问题是：

在我的keyboard.m 文件中，我实现了clickKey 方法。但它需要访问第一个视图文本字段。

我的键盘.h：

```
#import <UIKit/UIKit.h>

#define   keyZERO    0
#define   keyONE     1
#define   keyTWO     2
#define   keyTHREE   3
#define   keyFOUR    4
#define   keyFIVE    5
#define   keySIX     6
#define   keySEVEN   7
#define   keyEIGHT   8
#define   keyNINE    9

#define   keyDOT    10
#define   keyBACK   11
#define   keyDONE   12

@class FuelViewController;

@protocol myKeyboardDelegate <NSObject>

-(void) myKeyboardInput : (int) number;

@end

@interface myKeyboardView:UIView{

@private id<myKeyboardDelegate> _delegate;

}

@property (nonatomic,assign) id<myKeyboardDelegate> delegate;

-(IBAction)keyClick:(id)sender ; 

@end 
```

我的键盘视图.m：

```
#import "myKeyboardView.h"

@implementation myKeyboardView

@synthesize delegate;
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return NO;
}

-(IBAction)keyClick:(id)sender{

    int i = [sender tag];

     if ( i == keyDONE) {       }
}

@end 
```

# c# - Windows 进程无法关闭我的应用程序

> ID：12235731
> 
> 赞同：0
> 
> 时间：2012-09-02T11:49:15.870
> 
> 标签：c#, winforms, process, task, shutdown

我有一个 Windows 窗体应用程序，它正在数据库中写入一堆东西。现在前段时间我在询问如何确保在关闭 Windows 窗体之前完成所有请求（写入数据库）的解决方案。

我这样做的原因是因为它将是一个自动关闭的独立应用程序，因此我需要能够完成我所有的数据库写入和读取，并确保在我关闭表单时所有的工作完成。

在我尝试此解决方案之前，由于表单关闭，我在写入数据库时​​遇到了断开连接的问题。

现在的问题是，当我有一个关闭过程时，我的 Windows 窗体应用程序不会关闭，所以过了一段时间它只是切断了我不需要的电力。

这是代码，请告诉我它有什么问题？当程序确定没有任务在后台运行时，我需要关闭表单。

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
{
      // this.Visible = false; // optional
      // this.ShowInTaskbar = false; // optional
      Task db = Task.Factory.StartNew(() => DBUpdate());
      Task.WaitAll(db);
      if (this.shutdownRequested)
            Process.Start("shutdown.exe", "-s");
 }

 protected override void WndProc(ref Message ex)
 {
      if (ex.Msg == WM_QUERYENDSESSION)
      {
           Message MyMsg = new Message() { Msg = WM_CANCELMODE };
           base.WndProc(ref MyMsg);
           this.shutdownRequested = true;
      } else {
           base.WndProc(ref ex);
      }
 } 
```

编辑：

我刚刚意识到，当我单击**X**按钮并开始关闭表单时，这是有效的，但是当 pc 进入关机阶段时，它就不行了。任何的想法？也许我需要更改其他事件而不是**FormClosing**？还有一件事。我已将应用程序进程的优先级保存为实时进程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:24:54.747

如果您的进程花费的时间超过几秒钟，操作系统将在关机期间终止它。您唯一的希望是中止关闭，完成工作并再次调用它。

*你的过程只需要几秒钟，并且依赖于Form的实例，所以这个解决方案不会创建一个新的线程来完成工作。所以你应该`hide`防止使用交互，因为主线程将是在此过程运行时被锁定。*

如果关闭事件试图关闭应用程序。应用程序将中止关机。不过，它需要`administrator`特权才能做到这一点。

```
using System;
using System.Diagnostics;
using System.Threading;
using System.Windows.Forms;
using Timer = System.Windows.Forms.Timer;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        private bool _isClosing;
        private bool _isRunningUpdate;
        private bool _isShutdown;
        private Timer timer;

        public Form1()
        {
            InitializeComponent();
            FormClosing += Form1_FormClosing;
            timer = new Timer();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (e.CloseReason == CloseReason.WindowsShutDown)
            {
                // Abort Shutdown
                Process.Start("shutdown.exe", "-a");
                _isShutdown = true;
            }

            if (!_isRunningUpdate && _isClosing) return;

            // Set isClosing to true
            _isClosing = true;

            if (!_isRunningUpdate)
            {
                _isRunningUpdate = true;
                timer.Tick += DbUpdate;
                timer.Interval = 500;
                timer.Enabled = true; 
                timer.Start();
            }

            // Cancel current close request
            e.Cancel = true;

            // Optional Hide() --- could display message
            // Hide();
        }

        private void DbUpdate(object sender, EventArgs e)
        {
            timer.Stop();
            Thread.Sleep(3000);

            _isRunningUpdate = false;
            if (_isShutdown)
                Process.Start("shutdown.exe", "-s -t 10");
            if (_isClosing)
                Close();
        }
    }
} 
```

# javascript - 在 JavaScript 中使用 AJAX 发布，需要 onreadystatechange 吗？

> ID：12235743
> 
> 赞同：0
> 
> 时间：2012-09-02T11:51:45.320
> 
> 标签：javascript, ajax, post, onreadystatechange

在编写一些 JavaScript 以将 POST（而不是 GET）发送回网络服务器时，我想知道您是否需要定义 XMLHttp.onreadystatechange？到目前为止，我的代码如下所示：

```
XMLHttp.onreadystatechange = function(){};
XMLHttp.open("POST", "http://something.com/receiver.php", true);
XMLHttp.setRequestHeader("Content-type", "text/plain");
XMLHttp.send("blabla"); 
```

因为当 POST 成功时我不需要做任何事情，所以不需要触发任何功能。

问题1：我想让代码尽可能短，我考虑过设置onreadystatechange = null，有人知道这是否可行（在所有浏览器中）？

问题 2：我想完全不定义 onreadystatechange 是不安全的……它可能在某些系统上具有预定义的值……有人知道吗？

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:18:01.233

实际上，`onreadystatechange`您可以不设置为 null 而不是将其设置为空，这样什么都不会发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:56:36.477

您需要它知道请求是否完成。只有在那之后，您才应该轮询 XHR 状态。

因为请求可能会在中间失败（特别是如果它未能到达目的地，你不会知道。如果它超时，那么它就是失败）。

除非您最初的计划是发送请求而忘记它。在这种情况下，您不需要`onreadystatechange`.

编辑：或者你可以使用`false`它的 async 属性。然后`XMLHttpRequest.send()`在您获得状态之前不会返回。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:11:21.513

我知道这不是你问的，但由于你只需要发送一个发布请求并忽略结果，我建议使用一个非常方便的 jQuery 函数。它会为您处理所有 XMLHTTP 事务：

```
$.post("test.php", { name: "John", time: "2pm" } ); 
```

由您发送的 url 和数据组成。

这是进一步的参考：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

如果您的帖子是另一个域，只需在请求中启用 jsonp。

# c# - 在 C# -opengl 中导入 3D 模型

> ID：12235746
> 
> 赞同：5
> 
> 时间：2012-09-02T11:52:31.877
> 
> 标签：c#, opengl, model, 3d, blender

我想知道如何使用 C#.net 将 3d 模型从 Blender 导入 Opengl。Blender 可以以 Collada、.3ds、Stanford(.ply)、.obj、.x3d 和 .fbx 格式导出模型。如何在 C#-opengl 中使用上述任何模型。有图书馆吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T12:19:47.207

我建议你使用[SharpGL](http://www.sharpgl.codeplex.com/)。**SharpGL**库具有内置解析器，可以从其他格式（.obj 和 .3ds）导入模型。它还具有 WPF 和 Windows 窗体控件，用于在 .NET 环境中渲染 3d 模型。我目前正在使用它将**Blender**中设计的 3d 模型导出为 . **Obj并使用****SharpGL**将其导入 WPF 。它对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:16:18.960

OpenGL 不会为您加载模型。选择模型类型，然后使用相应的文件加载器/解析器加载该模型文件，并将提取的数据提供给 OpenGL。例如。您的模型可能是 MD2,3ds。如果您研究过模型的文件格式规范并且熟悉 OpenGL，那么您可以编写自己的解析器。这是 md2 文件格式规范的链接[http://tfc.duke.free.fr/coding/md2-specs-en.html](http://tfc.duke.free.fr/coding/md2-specs-en.html) 这是 3ds 文件格式规范的链接 [http://www.martinreddy.net/gfx/ 3d/3DS.spec](http://www.martinreddy.net/gfx/3d/3DS.spec) 你可以在 google 中找到其他模型文件格式规范。研究它们并编写你自己的解析器。

# javascript - 如何将我的 JavaScript 代码分解为多个文件？

> ID：12235747
> 
> 赞同：0
> 
> 时间：2012-09-02T11:52:37.967
> 
> 标签：javascript, oop, scope

我的应用程序使用这个主要对象，正如您所见，大部分工作都是在此方法中完成的。问题是如果我想把它全部写在一个文件中，这个对象会变得太大。而且代码很难调试。有什么方法可以用来将此对象拆分为多个文件（例如一个文件中的每个函数）？我还希望能够从这些函数中访问和更改 displayArray、userOptions 和查询变量。
任何形式的建议表示赞赏。感谢 ：）

```
application = {
    displayArray : new Array(),
    userOptions : new Array(),
    query : '', 
    status : false,

    initilize : function () {
        //its going to initialize displayArray, userOptions and status.
    },

    loadOptions : function () {
        //this function builds userOptions array
    },

    JSONConverter : function () {
      //this function uses query to builds displayArray  
    },

    display : function () {
       //this function will use displayArray to build HTML elements on page
    },

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T11:58:54.550

例如：

```
 // file: application.js
(function (window, undefined) {
  var application = {
     // ...
  };
  window['application'] = application;
}(window));

// file: application-module1.js
(function (application, window, undefined) {
  var module_foo = {
     // ...
  };
  application['module_foo'] = module_foo;
}(application, window));

// file: application-module2.js
(function (application, window, undefined) {
  var module_bar = {
     // ...
  };
  application['module_bar'] = module_bar;
}(application, window)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T11:59:10.867

抽象.js

```
function abstractClass(construct_options){{

} 
```

someObject.js

```
someObject.prototype = new abstractClass();
someObject.prototype.foo = function(){

} 
```

其他对象.js

```
otherObject.prototype = new abstractClass();
otherObject.prototype.toe = function(){

} 
```

进一步你可以这样做：

```
var a = new someObject();
var b = new otherObject(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:03:55.130

您可以将所有功能移动到单独的文件中，并将它们添加到应用程序的原型中。

**文件初始化.js：**

```
function initialize () {
    this.displayArray =  new Array();
} 
```

**文件初始化.js：**

```
function() Application{
    this.userOptions = new Array();
    this.query = '';
    this.status = false;
    this.initialize();
}

Application.prototype.initialize = initialize; 
```

此解决方案将使用外部文件中的所有函数污染您的全局名称空间。因此，如果它是一个更大的项目，您应该开始使用 AMD 解决方案，例如[requirejs](http://requirejs.org/)：

**文件初始化.js：**

```
define(function () {
    return function () {
        this.displayArray =  new Array();
    }
}) 
```

**文件初始化.js：**

```
define(['initialize'], function (initialize) {
    function() Application{
        this.userOptions = new Array();
        this.query = '';
        this.status = false;
        this.initialize();
    }

    Application.prototype.initialize = initialize;
    return Application;
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-02T12:12:12.530

您可以在一个文件中定义应用程序“类”，然后使用原型将每个函数添加到单独的文件中，例如

```
var application = function () { };

application.prototype.method1 = function (arg1) {
window.alert(arg1);
}

var a = new application();
a.method1('Hello, World!'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T11:58:05.090

你可以！编写几个 .js 脚本，然后将它们嵌入到 html 文件中，如下所示：

```
<head>
    <script type="text/javascript" src="script1.js"></script>
    <script type="text/javascript" src="script2.js"></script>
</head> 
```

[这](http://snap.berkeley.edu/snapsource/snap.html)是如何做到这一点的一个很好的例子。（[来源](http://snap.berkeley.edu/snapsource/)）

# php - 更改网站后单击链接时打开新窗口（包含图层滑块）

> ID：12235751
> 
> 赞同：0
> 
> 时间：2012-09-02T11:53:27.093
> 
> 标签：php, javascript, slider, hyperlink

由于我的网站上包含了图层滑块，我已经介绍了 js 代码。一开始它真的把我的网站搞砸了，使标志被向下移动，网站中的部分有点分开。因此，我删除了 pages.css 和 layout_header.php 上的许多代码行（我的网站主页有 2 个带有 layout_footer_php 的 php 文件）。

这些不是我遇到的唯一问题。现在图层滑块或多或少集成得很好，我想知道我必须做什么才能让我的菜单链接像以前一样恢复工作。当您单击菜单链接时，如果您从主页单击它们，它们会打开一个新窗口，但如果您从其他窗口单击它们则不会。

似乎是一个容易解决的问题，坏消息是我对编码一无所知，我的知识基于尝试和失败。

我的网站是[http://dtraffic.biz](http://dtraffic.biz)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:01:41.110

你在首页的链接是这样的

```
<a href="http://www.dtraffic.biz/surf-ads" target="_blank"> 
```

在其他页面上是这样的

```
<a href="http://www.dtraffic.biz/surf-ads"> 
```

这`target="_blank"`就是将其放在新窗口/标签中的内容，您应该将其删除。[有关此信息，请参阅本页](http://www.tizag.com/htmlT/links.php)的“链接目标”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:05:09.147

**您可以通过将目标删除`_blank`到`_self`**第 1498 行来解决此问题

```
(function($){

        $.fn.setBlank = function(){

            return this.find('a[href*="http:"]').each(function(){
                if(!$(this).attr( 'target' )){
                    **//$(this).attr({ 'target' : '_blank' });**
                }
            }); 
        };
    }) 
```

只需`plugin.js`在图层滑块的文件夹中注释此代码即可。谢谢

# email - 在 Heroku 上接收电子邮件

> ID：12235757
> 
> 赞同：5
> 
> 时间：2012-09-02T11:54:16.493
> 
> 标签：email, heroku, dns

我正在开发一个将替换现有应用程序的 Web 应用程序。现有的在另一台服务器上运行，其域名为`synergy-croatia.com`. 现在，我的新应用程序已经托管在 Heroku ( `synergy-croatia.herokuapp.com`) 上，我现在需要做的就是让域`synergy-croatia.com`指向我的 Heroku 应用程序。但是我还需要实现一件事——你猜对了——接收电子邮件。

我希望能够接收发送到电子邮件地址的电子邮件，例如`info@synergy-croatia.com`. 所以，我做了很多谷歌搜索，我遇到了一些不错的解决方案。但是每个解决方案都意味着我有一个自定义域，我需要为其设置一些 DNS 设置。我的意思是，我确实拥有它（`synergy-croatia.com`），但显然我只能在完成申请**后才能使用它。**

这是否意味着我必须购买一个域才能实现接收电子邮件？我可以以某种方式`MX`直接在 Heroku 子域上设置这些 DNS 设置（es 和其他）吗？还是有其他方法？

更新：

我发现的解决方案之一当然是这个：http: [//nanceskitchen.com/2010/02/21/accept-incoming-emails-into-a-heroku-app-using-sendgrid/](http://nanceskitchen.com/2010/02/21/accept-incoming-emails-into-a-heroku-app-using-sendgrid/)

但它需要一个自定义域。

更新 2：

这很重要，我忘了说。我只希望这些电子邮件地址是虚拟的，以便将电子邮件转发到真实地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T12:39:43.040

[CloudMailin](http://cloudmailin.com)不要求您使用“自定义域”，它会为您提供一个可以转发到的电子邮件地址，使用您自己的域是可选的附加功能。它也可以作为[Heroku 插件](http://addons.heroku.com#cloudmailin)使用。您可以使用它来将您的电子邮件从任何现有的电子邮件服务器转发到 CloudMailin 为您提供的地址。原始电子邮件地址也仍然可以获取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T10:40:19.803

通常，当您移动域 (synergy-croatia.com) 以指向您的 Heroku 应用程序时，您不需要更改现有的邮件设置。您只需将 www 的 CNAME 记录设置为 heroku，并将 MX（控制邮件）留在原处。

如果您没有适当的邮件解决方案，则需要在 Heroku 之外寻找一个。许多域名提供商都包含免费邮件转发，或者您可以使用 gmail、Outlook.com 等。

# android - 在 Android 上使用 Sqlite 时的经验法则：“预烘焙”还是以编程方式生成？

> ID：12235762
> 
> 赞同：0
> 
> 时间：2012-09-02T11:55:05.683
> 
> 标签：android, sqlite

从一个将依赖 sqlite 进行持久性的项目开始，我一直试图更好地理解使用预先支持的数据库与以编程方式生成的数据库的含义。到目前为止，我倾向于根据[这个问题](https://stackoverflow.com/questions/8810119/best-practices-for-creating-a-sqlite-database-on-android)和[iosched](http://code.google.com/p/iosched/) app [db example](http://code.google.com/p/iosched/source/browse/android/src/com/google/android/apps/iosched/provider/ScheduleDatabase.java)编程方法。

这一切都很好，但在这一点上，我不确定我能否简洁地说明为什么这是一种更好的方法，尤其是长期而言。

PS：我排除了 ormlite，因为域类在一个 jar 库中，已经在其他 2 个应用程序中注释了 jpa。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:22:44.053

预烘焙是可以的，但它引入了一些不太理想的过程。首先，您仍然必须创建数据库，大概是在支持表创建、列条目等的 IDE 中。然后您必须将该数据库保存在您的项目中并实现代码以将其实例化为您的应用程序数据库。

对于刚开始并且以后可以通过代码掌握更详细的详细过程的人来说，这是一个很好的第一步。

然而，这个过程提出了许多问题。首先，您已经失去了创建数据库的步骤，除非您保存了 sql 查询来创建表。它们仍然不是您可以调整和重新运行的项目的一部分。

如其他帖子中所述，您有一个重复的数据库消耗空间。数据库在适应更改和更新方面也不太灵活。

如果您喜欢单元测试，那么使用编码解决方案可以查看在数据库生成上运行测试，这可以很好地扩展到您管理数据库迁移的方式。

因此，最初冗长的代码最终更加灵活，可以更容易地进行单元测试，最终更快地采用更复杂的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T14:02:14.323

以我的经验，除了不使用预先创建的数据库之外，几乎没有什么不同之处，可以省去跟踪额外文件并将其包含在 .apk 文件中的麻烦。

鉴于不使用预先创建的数据库的优势仅限于上述情况，仍然存在使用它们值得额外工作的场景。一个很好的例子是预加载大量数据或复杂数据的数据库。

否则我建议不要使用预先创建的数据库。

# jquery-ui - 带有 jqueryUI 的 jqGrid 与 zurb 基础冲突

> ID：12235763
> 
> 赞同：0
> 
> 时间：2012-09-02T11:55:38.510
> 
> 标签：jquery-ui, jqgrid

您好我正在使用具有 jquery UI 主题的 jqgrid。我在网站上的母版页使用 zurb 基础框架作为我们的基本 css 框架。

如果我不包含 zurb 的基础 css，则带有 jqgrid 的网页呈现完美，但如果我包含它...... css 不会为 jqgrid 正确呈现。

我可以看到原因，因为我试图在一个网页中包含两个不同的 css 框架，并且这两个框架有一些相互冲突的通用 css 类。

我需要使用这两个框架，因为我将结合 zurbfoundation 组件 + css 使用许多 jqueryui 组件。

有没有办法处理这些冲突。我想到的一个解决方案是在我有 jqgrid 的网页中使用 iframe ......但这将是我最后的最后一个偏好。

或者有没有一种方法可以在不使用 jqueryUI 的情况下使用 jqgrid？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:20:57.673

我能够修复它。Foundation.css 具有用于表格标记和输入 [文本] 标记的通用类。注释这些类有助于消除冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T15:21:22.920

将此添加到您的样式表以覆盖默认的 Foundation 表格样式：

```
.ui-widget table {
    border: none;
}

.ui-widget table tbody tr:nth-child(even),
.ui-widget table thead, 
.ui-widget table tfoot {
    background-color: transparent;
} 
```

# monodevelop - 使用 MonoDevelop 3.0 中的语句解析或重构

> ID：12235764
> 
> 赞同：3
> 
> 时间：2012-09-02T11:55:45.293
> 
> 标签：monodevelop

我现在从 Visual Studio 切换到 MonoDevelop（用于 MonoTouch）时非常想念的一个功能是当无法识别类型时自动使用语句完成。

正如我从[MonoDevelop 中的 SO 问题“组织导入”中](https://stackoverflow.com/a/2089905/70182)读到的，此功能曾经在 2.2 版中实现。但是，正如我从 SO question [Override/Implement Members in MonoDevelop 中](https://stackoverflow.com/a/12039846/70182)读到的那样，此功能从 3.0 开始退化。

现在，我不得不回退到搜索类型​​的完整命名空间，并手动添加 using 语句。

是否有解决方法或计划重建该功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T15:48:41.893

事实证明，MonoDevelop 确实支持*Resolve*功能，但它不像 Visual Studio 中那样通过下拉菜单显示它。您需要*右键单击 type*，然后在上下文菜单中 Resolve 选项将如下所示：

![显示“解决”菜单选项的类型的上下文菜单](../Images/60ef1e7605b1dde8feeb847035a1788e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T20:44:37.497

我发现使用 Ctrl+Alt+Space 非常有用，它可以让您输入您正在寻找的类的类型名（在引用程序集中），然后如果需要，它将自动添加 using 语句。

# html - 在浏览器中触发密码保存对话框？

> ID：12235769
> 
> 赞同：0
> 
> 时间：2012-09-02T11:56:53.327
> 
> 标签：html, forms, login, passwords

我已经尝试了这两个问题 [的解决方案：为什么浏览器不要求记住密码？](https://stackoverflow.com/questions/2580379/why-isnt-the-browser-asking-to-remember-the-password?rq=1)以及 [浏览器如何知道何时提示用户保存密码？](https://stackoverflow.com/questions/2398763/how-does-browser-know-when-to-prompt-user-to-save-password)，但我无法让浏览器记录本站登录表单的密码：http: //lksonorizacao.com.br/newsite/? [painel](http://lksonorizacao.com.br/newsite/?painel)。表单由 PHP 放置在那里，没有 AJAX 或任何动态的。这是表单的代码：

```
<form action="./?painel" method="post">
    <input type="text" name="username" placeholder="Usuário" autofocus autocomplete /><br />
    <input type="password" name="password" placeholder="Senha" /><br />
    <input type="submit" name="Login" value="Login" />
    <div style="height: 5px;"></div>
</form> 
```

我不知道该怎么做。

# graphics - 对于 Retina 显示器来说，大图标是否足够？

> ID：12235770
> 
> 赞同：0
> 
> 时间：2012-09-02T11:57:32.447
> 
> 标签：graphics, icons, retina-display, high-resolution

我正在开发一个有图标的程序。我一直在想我是否真的需要使用矢量图标（因为它们很难找到），或者我可以只使用更大的图标，例如 256x256 图标（最大 64px 大小）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:02:11.950

好吧，iOS 图标**不是矢量图形**。它们是 PNG 图像，使用以下分辨率：

```
iPhone non-retina: 57 x 57
iPhone retina: 114 x 114
iPad non-retina: 72 x 72
iPad retina: 144 x 144 
```

此外，如果您为 AppStore 开发，则必须包含一个 iTunesArtwork 文件，该文件也是 512 x 512 像素的 PNG（与您的应用程序是否为视网膜这一事实无关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:11:24.593

如果要显示 64 像素的图像，请使用 64 像素的图标。一旦开始缩放，您将失去一些质量（尽管按 2 的幂进行缩放并不像任意缩放因子那样糟糕）

但是，当您的尺寸超过 64 像素时，缩放效果变得越来越不明显，因此您可以开始使用缩放图标而不是依赖于设备的分辨率，而不必担心质量损失。

最主要的是绘制图标的主要特征以匹配您希望支持的最低公分母分辨率。例如，如果您打算在某些设备上使用 32x32 图标，而在其他设备上使用 64x64，则在 32x32 图标中将线条设置为 1 像素粗，这相当于在 64x64 上使用 2 像素粗。这样，64x64 将看起来像 32x32 的“更清晰”版本，而不是线条更细或 32x32 图标“模糊”（例如，由于抗锯齿，64 图像上的细黑线变成更粗的灰线） 32）。

通常，您还应该以高分辨率设计图形（例如，“视网膜”分辨率是一种愚蠢的营销策略，只有真正“视网膜”分辨率的四分之一左右 - 您可以确定屏幕分辨率将再次翻倍，就像 HDTV已经开始被 4K 和 8K 取代）。因此，我建议您对主图像使用 256 或 512 分辨率（但仍将其功能基于 32x32 或 64x64 网格），然后按比例缩小此图像，然后对其进行触摸以在较低分辨率下获得良好的质量。这样，如果（何时）您需要高分辨率的图标，则不必从头开始重新绘制它。（如果可能，将您的图标设计为矢量艺术，然后以您需要的各种像素分辨率重新导出它）

此外，如果您避免高对比度边缘，您的图标将更容易缩放（因为向下缩放高对比度边缘通常会导致模糊的抗锯齿结果，除非边缘与较低分辨率的像素边界完美对齐）。所以一个典型的软渐变苹果或安卓图标将比典型的硬高对比度win8线条图缩小得多）

最后请记住，仅仅因为您今天的设备使用 32x32 和 64x64，并不意味着您不会发现自己在未来 6-12 个月内不会移植到图标大小完全不同的设备（例如 57x57、72x72等）并且重新缩放几乎不会起作用。在这些情况下，源图像越大，缩小它的效果就越好（即，将 512x512 缩小到 72 通常会比将 128x128 缩小到 72 得到更好的结果）。

# java - 将bat文件转换为包含java命令的脚本文件

> ID：12235776
> 
> 赞同：0
> 
> 时间：2012-09-02T11:58:05.980
> 
> 标签：java, shell, jar, batch-file, classpath

我有一个包含 run.bat 文件的 java 应用程序，如下所示：

```
rem set path=D:/Applns/jdk1.5/bin
set classpath=.;lib/derby.jar;lib/mail.jar;lib/activation.jar;lib/commons-codec-1.3.jar
start javaw net.sf.veettukaaran.appclient.ApplicationController 
```

当我`run.bat`在 Windows 中运行它时，应用程序运行良好。但我想在`ubuntu 12.04`. 所以我尝试将其转换`run.bat`为`run.sh`如下：

```
# /bin/sh
java -classpath './lib/derby.jar:lib/mail.jar:lib/activation.jar:lib/commons-codec-1.3.jar' net/sf/veettukaaran/appclient/ApplicationController 
```

当我运行这个脚本时，`./run.sh`它给了我类未找到异常，如下所示：

```
Caused by: java.lang.ClassNotFoundException: net.sf.veettukaaran.appclient.ApplicationController
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: net/sf/veettukaaran/appclient/ApplicationControll.  Program will exit. 
```

有人可以指出我做错了什么吗？我已经检查了指定jar文件`classpath`和类文件的路径，它是正确的。其他一些想法可能出了什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:24:47.443

好吧，我终于可以运行 run.sh 文件了。如下所示：

```
# /bin/sh
java -cp ':./lib/derby.jar:./lib/mail.jar:./lib/activation.jar:./lib/commons-codec-1.3.jar' net.sf.veettukaaran.appclient.ApplicationController 
```

之后我运行这个命令：“ `dos2unix run.sh`”然后我运行`./run.sh`. 这样应用程序就会被执行。

我感谢你们所有人的回应..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:02:02.047

替换以下

```
java -classpath './lib/derby.jar:lib/mail.jar:lib/activation.jar:lib/commons-codec-1.3.jar' net/sf/veettukaaran/appclient/ApplicationController 
```

和

```
java -classpath '.:./lib/derby.jar:lib/mail.jar:lib/activation.jar:lib/commons-codec-1.3.jar' net.sf.veettukaaran.appclient.ApplicationController 
```

请注意，我刚刚将当前目录添加`.`到您的目录中，并通过替换为`classpath`更正了类前面的类包名称`/``.`

# ruby - 获取不是直接消息的最新推文

> ID：12235783
> 
> 赞同：0
> 
> 时间：2012-09-02T11:59:30.853
> 
> 标签：ruby, ruby-on-rails-3, twitter, tweets

我正在使用[sferik 的 Twitter Gem](https://github.com/sferik/twitter)从 Twitter 帐户中获取最新的推文：

```
Twitter.user_timeline("someUserName").first.text 
```

这很好用，但包括直接消息推文。我想展示最新的标准推文（即不是推文@某人）。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:57:09.167

我只是玩了一下lib，似乎即使`@user`文本中有a，`to_user`tweet的属性也是nil。一种可能的方法是简单地在文本中搜索`@user`字符串的出现。例如像这样：

```
tweets.find {|x| x.text.match(/@.*/) == nil } 
```

# rvm - shell 提示中的 path_to_check

> ID：12235784
> 
> 赞同：0
> 
> 时间：2012-09-02T12:00:12.947
> 
> 标签：rvm, octopress

我正在使用 oh-my-zsh 和 RVM，通常我很高兴，直到我发现[Octopress](http://octopress.org/)。先上图： ![在此处输入图像描述](../Images/96179cac69f30a2b2bf9c855c24e395e.png)

我有一个自定义 shell 提示符，显示当前目录、git 状态、git 分支等。似乎 Octopress 代码以某种方式破坏了 RVM。或者，至少，我[在 RVM repo](https://github.com/wayneeseguin/rvm/blob/master/scripts/functions/rvmrc)`path_to_check`的这个文件中找到了 的痕迹。

我的`.rvmrc`包含这个字符串

```
rvm use 1.9.3 
```

但是，如果我清空文件或完全删除它，则没有任何区别。这是我第一次看到这个，我绝对怀疑 Octopress 参与其中。

你知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T19:03:14.647

原来这是 oh-my-zsh 主题中的一些临时故障。当我开始尝试其他主题时，它们运行正常。最后，我的主题也再次开始工作。我不知道是什么原因，或者它是如何解决的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T13:34:27.697

在此提交后尝试[https://github.com/wayneeseguin/rvm/commit/fde2352fd88ebfd82d6021663f34c81f0f020dc0](https://github.com/wayneeseguin/rvm/commit/fde2352fd88ebfd82d6021663f34c81f0f020dc0)它必须与我最后的更改有关......但除了这个修复之外我看不到任何原因。

无论如何，如果仍然给您带来问题，请在 freenode 服务器上的 irc 频道 #rvm 上与我交谈。

# jsf - h：项目在线时消息验证不起作用

> ID：12235785
> 
> 赞同：0
> 
> 时间：2012-09-02T12:00:37.017
> 
> 标签：jsf, web-applications, jsf-2, validation

我正在使用 JSF 2.0 创建 Web 应用程序，并在其中验证全名。

```
<h:inputText value="#{PersonalInformationDataBean.fullName}" size="75" id="fullName" >
     <f:validator validatorId="fullNameValidator" />
</h:inputText>
<font color="red"><br /><h:message for="fullName"/></font> 
```

在下面的java中是我所拥有的

```
public class FullNameValidator implements Validator {

    public void validate(FacesContext context, UIComponent component, Object value)
            throws ValidatorException {

        String enteredName = (String) value;
        // Pattern p = Pattern.compile("([a-zA-Z]+|[a-zA-Z]+\\s[a-zA-Z]+)");
        Pattern p = Pattern.compile("([a-zA-Z\\s]+)");
        Matcher m = p.matcher(enteredName.trim());
        System.out.println("trimmed data is " + enteredName.trim());
        boolean matchFound = m.matches();

        if (enteredName.trim().length() == 0) {
            FacesMessage message = new FacesMessage();
            message.setSummary("Please enter name.");
            throw new ValidatorException(message);
        }

        if (enteredName.trim().length() < 10) {
            FacesMessage message = new FacesMessage();
            message.setSummary("Name should be atleast 10 characters.");
            throw new ValidatorException(message);
        }

        if (!matchFound) {
            FacesMessage message = new FacesMessage();
            message.setSummary("Invalid Name.");
            throw new ValidatorException(message);
        }

//        FacesMessage message = new FacesMessage();
//        message.setSummary("");
//        throw new ValidatorException(message);

    }
} 
```

当我在本地运行项目时，它运行完美。

当我把这个项目放到网上时，我遇到了问题。

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ fullName data as        +   Error Message                      +
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
+ 123343543534545         +   Invalid Name                       +
+ fahim                   +   Full name should be 10 characters  +
+ null (blank)            +   NO MESSAGE, here I was expecting   +
+                         +   result as Please enter name        +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

我不明白当我没有传递任何值时，为什么我没有收到错误消息说请输入名称。知道我在这里缺少什么吗？

**笔记：**

我什至没有`trimmed data is`在`catalina.out`文件中获取我打印的所有消息`System.out.println`

问题是当我当时传递数据时只调用验证。其他验证没有发生。请让我知道我在这里缺少什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T01:48:50.523

您提出问题的原因可能是，如果您想验证空值，您应该更改您`web.xml`的设置，以允许空字段。

```
 <context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>true</param-value>
  </context-param> 
```

但这种方式并不是权威人士建议的。jsf 文档说：

> 为了使验证器完全符合规范的第 2 版及更高版本，它不能对空值或空值进行验证失败，除非它专门用于处理空值或空值。提供了一个应用程序范围，以允许为 JSF 1.2 设计的验证器与 JSF 2 及更高版本一起使用。javax.faces.VALIDATE_EMPTY_FIELDS 必须设置为 false 以启用此向后兼容行为。] [1](https://stackoverflow.com/questions/3933786/jsf-2-bean-validation-validation-failed-empty-values-are-replaced-with-las)

因此，当您使用 jsf2.0 时，验证空值的另一种方法是您可以像这样添加：
`<h:inputText value="#{PersonalInformationDataBean.fullName}" size="75" id="fullName" required="true" requiredMessage="Please enter name." >` 并且还要确保`web.xml`' 设置如下：

```
<context-param>
  <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
  <param-value>true</param-value>
</context-param> 
```

但是这种方式会指责另一个不合理的事情。当您输入名称时会发生一些事情并且此表单对于此sumbit是失败的。并且用户将名称字段的值删除为空白，它会抛出请输入名称消息。但是名称字段在page 仍然是预值（不是空白）。
所以这是一个 JSF 错误。要解决这个问题，您必须更改 HtmlBasicRenderer#getCurrentValue() 的第一部分，请看一下：[JSF 2 - Bean Validation: validation failed -> empty values are replaceed with last valid来自托管 bean 的值](https://stackoverflow.com/questions/3933786/jsf-2-bean-validation-validation-failed-empty-values-are-replaced-with-las)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:12:43.857

我猜您可能会验证 Validator 传递的值是否不为空

```
StringUtils.isNotEmpty(String) 
```

`ValidatorException`并在验证它的大小之前抛出一个。

如果该字段是强制性的，您也可以考虑使用`required="true"`

考虑添加以下代码片段：

```
String enteredName = (String) value;
// checks for null and empty String values
if ( StringUtils.isEmpty(enteredName) ) {
    FacesMessage message = new FacesMessage();
    message.setSummary("Please enter name.");
    throw new ValidatorException(message);
}
// rest of your validation code 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:21:52.217

当没有输入输入值时，不会调用验证器，其想法是没有什么要验证的。这有点不直观，但应该使用 required="true" 属性来检查是否需要一个值。有一个替代方案：

```
<h:inputText label="Username" validatorMessage="The value entered for #{component.label} is invalid">
      <f:validateRegex pattern="[A-Za-z]{10,30}"/>
</h:inputText> 
```

您不需要两个 == 0 和 < 10，只需 < 10。使用属性 requiredMessage 为所需属性添加您自己的消息。

请注意，您不需要使用 StringUtils.isNotEmpty(String)，只需：

```
String s;
if(s.isEmpty() {
... 
```

另请注意，字体标签在 HTML 4.01 中已弃用，试试这个：

```
<h:message for="fullName" style="color: red"/> 
```

# php - 如何通过php脚本登录roundcube？

> ID：12235789
> 
> 赞同：-1
> 
> 时间：2012-09-02T12:01:03.077
> 
> 标签：php, roundcube

如何通过php脚本登录roubdcube？

有一个脚本[http://blog.philippheckel.com/2008/05/16/roundcube-login-via-php-script/](http://blog.philippheckel.com/2008/05/16/roundcube-login-via-php-script/)但它不支持主机（imap服务器）我们需要设置主机（imap服务器）一些东西类似于 login($username, $password,$host)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T10:31:21.967

无法登录到远程主机，因为 Roundcube 必须在客户端的浏览器中设置 cookie 才能保持登录状态。上述脚本将 cookie 传递到浏览器。如果没有 cookie，即使凭据可能正确，用户也不会成功登录。

# sql-server - 视图上的权限没有被复制

> ID：12235796
> 
> 赞同：0
> 
> 时间：2012-09-02T12:02:22.350
> 
> 标签：sql-server, replication

我在其中使用 sql server 2012 和事务复制。我试图复制一个在权限中附加了特定数据库角色的视图。这是我的视图复制脚本

```
:setvar SubscriberDB "ReplicationSubscriberDB"
:setvar SubscriberServerName "HYDHTC0131320D\MSSQLSERVER2"
:setvar PublisherDB "PublisherDB"
:setvar PublisherServerName "HYDHTC0131320D"
:setvar ReplicationAccount "myusername"
:setvar ReplicationAccountPassword "mypassword"

GO
:on error exit
GO

exec sp_addpublication @publication = N'DepartmentsView', @description = N'Transactional publication of database from Publisher ''$(PublisherServerName)''.', @sync_method = N'concurrent', @retention = 0, @allow_push = N'true', @allow_pull = N'true', @allow_anonymous = N'false', @enabled_for_internet = N'false', @snapshot_in_defaultfolder = N'true', @compress_snapshot = N'false',  @allow_subscription_copy = N'false', @add_to_active_directory = N'false', @repl_freq = N'continuous', @status = N'active', @independent_agent = N'true', @immediate_sync = N'true', @allow_sync_tran = N'false', @autogen_sync_procs = N'false', @allow_queued_tran = N'false', @allow_dts = N'false', @replicate_ddl = 1, @allow_initialize_from_backup = N'false', @enabled_for_p2p = N'false', @enabled_for_het_sub = N'false'

GO
exec sp_addpublication_snapshot @publication = N'DepartmentsView', @frequency_type = 1, @frequency_interval = 0, @frequency_relative_interval = 0, @frequency_recurrence_factor = 0, @frequency_subday = 0, @frequency_subday_interval = 0, @active_start_time_of_day = 0, @active_end_time_of_day = 235959, @active_start_date = 0, @active_end_date = 0, @job_login = N'$(ReplicationAccount)', @job_password = '$(ReplicationAccountPassword)', @publisher_security_mode = 1
GO

exec sp_addarticle @publication = N'DepartmentsView', @article = N'vwDepartments', @source_owner = N'dbo', @source_object = N'vwDepartments', @type = N'view schema only', @description = null, @creation_script = null, @pre_creation_cmd = N'drop', @schema_option = 0x48000001, @destination_table = N'vwDepartments', @destination_owner = N'dbo'
GO

EXEC sp_startpublication_snapshot @publication = N'DepartmentsView'
GO

use [$(PublisherDB)]
GO
exec sp_addsubscription @publication = N'DepartmentsView', @subscriber = N'$(SubscriberServerName)', @destination_db = N'$(SubscriberDB)', @subscription_type = N'Push', @sync_type = N'automatic', @article = N'all', @update_mode = N'read only', @subscriber_type = 0
GO

exec sp_addpushsubscription_agent @publication = N'DepartmentsView', @subscriber = N'$(SubscriberServerName)', @subscriber_db = N'$(SubscriberDB)', @job_login = N'$(ReplicationAccount)', @job_password = '$(ReplicationAccountPassword)', @subscriber_security_mode = 1, @frequency_type = 4, @frequency_interval = 1, @frequency_relative_interval = 0, @frequency_recurrence_factor = 0, @frequency_subday = 8, @frequency_subday_interval = 6, @active_start_time_of_day = 0, @active_end_time_of_day = 235959, @active_start_date = 20120607, @active_end_date = 99991231, @enabled_for_syncmgr = N'False', @dts_package_location = N'Distributor'
GO 
```

复制后，将创建视图，但角色未附加到视图的权限。此角色存在于发布者和订阅者数据库中。并且此角色分配给视图中使用的表，并且该表存在于两个数据库中。

我尝试将 schema_option 设置为 0x48000001 这是

1.  生成对象创建脚本（CREATE TABLE、CREATE PROCEDURE 等）。此值是存储过程项目的默认值。
2.  创建订阅服务器上尚不存在的任何模式。
3.  复制权限。

我也浏览了这篇文章，[http](http://social.msdn.microsoft.com/Forums/en-US/sqlreplication/thread/a4fa2d32-00ea-47a7-9276-52764fab72ae/) ://social.msdn.microsoft.com/Forums/en-US/sqlreplication/thread/a4fa2d32-00ea-47a7-9276-52764fab72ae/ 上面说 schema_option 值应该有效。或者我们必须在 sp_addpublication 中使用@post_snapshot_script。

我尝试使用@post_snapshot_script 并且它正在工作，但我不想使用这种方法。

请让我知道如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T18:37:17.843

这是 SQL Server 2012 中的一个已知问题。此问题是由于快照代理中的错误而发生的。在 Microsoft 发布此问题的修复程序之前，目前有一个解决方法： 1\. 打开快照文件夹。2\. 通过添加所需的权限来编辑您的视图的 .sch 文件。

之后订阅者可以获得正确的快照。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-28T21:01:54.267

我遇到了同样的已知错误。结果是在发布的“运行附加脚本 - 应用快照后”属性中指定了权限授予脚本。

# c - 不关闭用open或fopen打开的文件有什么影响

> ID：12235799
> 
> 赞同：1
> 
> 时间：2012-09-02T12:02:27.043
> 
> 标签：c

为了使问题更清楚：

[情况1]

```
#include <stdio.h>
int main ()  {
    FILE* file = fopen("myfile.txt", "r");
    return 0;
} 
```

[案例2]

```
#include <stdio.h>
int main () {
    int fd = open("myfile.txt", O_RDONLY);
    return 0;
} 
```

当两个示例中的文件未正确关闭时会发生什么？缓冲区是否刷新到文件中？我假设文件至少会自动关闭……对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:07:53.967

`fopen`是一个 C 库函数。未指定它是如何实现的。[*更正：* ] 如果您从 中返回`main`，所有打开的文件流都会为您关闭（例如 C11 7.21.3/5），但如果程序以其他方式退出（例如通过信号，例如通过），则不需要发生这种情况`abort`。

当进程终止时，您的底层操作系统实现当然会正确清理所有内容，但这仅涉及系统的全局状态（例如，与您的进程关联的所有虚拟内存都将被释放，所有文件描述符都将关闭， ETC。）。比如说，如果 C 库实现了自己的写入缓冲区，那么就没有理由在每种情况下都会自动刷新（尽管通过 from 返回正常退出`main`是可以的）。

这也解决了您的情况 2：如果您直接使用操作系统功能，例如 Posix`open`调用，那么您确实可以放心，当您的进程退出时，这些文件描述符将被关闭。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T12:07:59.980

是的。所有打开的文件都在程序终止前关闭。

> （C99，7.19.3p5）“如果主函数返回到其原始调用者，或者如果调用了退出函数，则在程序终止之前关闭所有打开的文件（因此刷新所有输出流）。”

# jquery - AJAX 重新加载后重新触发就绪事件

> ID：12235800
> 
> 赞同：8
> 
> 时间：2012-09-02T12:02:28.093
> 
> 标签：jquery

我研究了其他线程，只是感到困惑。

情况：我提供了一个通用的 jQuery 插件，它加载用户通过 AJAX 动态指定的 div。一切正常，但是在例如一个用户的页面上，有一段 JS 没有被调用，因为“就绪”事件没有被重新触发。

通常的情况是用户的其他 jQuery 东西会放在 jQuery(document).ready 之后。

我刚刚测试了调用：

```
$(document).trigger('ready'); 
```

手动 - 它根本没有任何效果，因为我认为“准备好”只被调用一次且只有一次。

处理它的正确方法是什么？（提供尽可能通用的解决方案会很棒）

我很想做类似这个帖子中建议的事情：

[触发 $document.ready （所以我无法修改的 AJAX 代码被执行）](https://stackoverflow.com/questions/2238030/jquery-trigger-document-ready-so-ajax-code-i-cant-modify-is-executed)

但我认为 readyList 现在是私有的，不能再直接操作了？

值得一提的是，我提供的插件为用户提供了回调功能。当然，他可以在其中放置加载后处理 JS 代码。

预先感谢和亲切的问候

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T12:30:08.053

您不应该尝试重新加载整个 DOM 就绪函数。特别有害的是事件的 n+n 特性，例如，如果 DOM 就绪功能被它们反复重新触发，则同一元素上的 2 个单击事件可能会变为 4 个，然后是 8 个等。

您可以通过在完成 ajax 调用后取出需要运行的代码来避免这种情况，并且大概是您希望从您希望重新初始化的事件中受益的元素的数量。

```
$(document).ready(function()
{
    initialise();

    //... Resume with DOM ready
});

function initialise()
{
    // create event here that needs re-initialising
} 
```

因此，当您完成 ajax 调用后，只需`initialise()`再次调用即可。

或者看看使用`.on`和使用它的冒泡功能，这就是我处理这类问题的方式。它避免了您必须考虑“重新初始化”脚本中 DOM 就绪函数的任何部分。

**来自评论的补充**

`.on`允许您将事件绑定到页面上在任何时候都不会更改的低级别元素，同时允许您控制哪些动态元素实际触发该容器中的事件。

```
<div id="container">

    <div id="ajax-content">

        <a href="#" class="created-link">A new link</a>

    </div>

</div> 
```

所以我们知道它`<a>`是在 DOM 就绪事件被触发后由 ajax 函数创建的，因此任何应用到它的直接事件都将不起作用。

相反，我们会将事件绑定到较低级别的未更改元素并冒泡到包含的动态 DOM 元素。

```
$('#container').on('click', '.created-link', function(event)
{
    event.preventDefault();

    // Your normal onclick code
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-23T12:40:12.737

只是为了分享我的发现和解决方案，我遇到了同样的问题，在 AJAX 重新加载 $(document).ready 函数后，这个问题没有被调用，我使用了这两个答案的组合，最后找到了一个非常简单的解决方案

*   [从这个线程大卫巴克的答案](https://stackoverflow.com/a/12235960/2064156)
*   [从另一个线程尼克杨的答案](https://stackoverflow.com/a/17816833/2064156)

我的解决方案看起来像这样

```
<script type="text/javascript">
function initialise(){
    $('.clickableItem').click(function(){
        /* do code here */
        return false;
    });
};
$(document).ready(function(){
    initialise();
});
$(document).ajaxComplete(function () {
    initialise();
});
</script> 
```

希望这可以帮助某人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-17T14:55:38.323

看起来带有 # as href 的链接不起作用。只要照顾好这个。:)

# extjs - 使用 ExtJS 上传 Symfony2 文件

> ID：12235801
> 
> 赞同：0
> 
> 时间：2012-09-02T12:02:36.833
> 
> 标签：extjs, file-upload, symfony

我想用 Symfony2 处理文件上传，但我使用的是 ExtJS (4.0)。用教义处理上传的食谱对我不起作用。当我检查 $form->isValid() 时它总是失败。我有关于使用 Symfony 处理表单的所有“堆栈”，我不知道在哪里可以找到我的错误，所以......我问你一些不同的东西 - 使用纯 PHP 处理文件上传，并仅使用将其保存到数据库文件名，但我想将我的表单数据绑定到 Symfony 的文件类型，以访问猜测扩展名的方法等等。有什么办法可以做到这一点？

更新而不是`$form->isValid()`总是为我返回**FALSE**，我使用了验证器服务：

```
$validator=$this->get('validator');
$errors=$validator->validate($file);
if(count($errors)){
...
} 
```

现在它起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T18:45:55.513

这应该可以帮助您检索一些错误代码：

```
$uploadedFile = $form['the_form_widget_with_file_name']->getData();
$error_code = $uploadedFile->getError(); 
```

`$uploadedFile`将是 Symfony\Component\HttpFoundation\File\UploadedFile 的一个实例。

关于错误代码的一些解释：[http ://www.php.net/manual/en/features.file-upload.errors.php](http://www.php.net/manual/en/features.file-upload.errors.php)

# bnf - BNF 转换为 EBNF

> ID：12235802
> 
> 赞同：1
> 
> 时间：2012-09-02T12:02:46.547
> 
> 标签：bnf, ebnf

我正在将以下语法从 BNF 转换为 EBNF。

```
<race> => go <dir_list> and stop

<dir_list> =>   <dir> 
              | <dir> then <dir_list>
<dir> =>   from <point> to <point>  
         | around <point>   
         | to <point> 
<point> =>   A
           | B
           | C 
```

我做了我的研究，我想出了

```
<race> => go <dir_list> and stop
<dir_list> => <dir> { (then) <dir> }
<dir> => (from | around | to ) { <point> to <point> }
<point> => (A|B|C) 
```

这是正确的，没有人可以为我提供解决方案吗？

# java - 使用 google API 进行高级搜索

> ID：12235804
> 
> 赞同：1
> 
> 时间：2012-09-02T12:02:57.963
> 
> 标签：java

我在这里读过：[https](https://developers.google.com/web-search/docs/?hl=iw-IL#CustomBranding) ://developers.google.com/web-search/docs/?hl=iw-IL#CustomBranding 关于如何在 Java 中使用 Google 搜索。

尽管如此，我还是在网上找不到任何谈论高级搜索的网站。

我只想获得过去 24 小时的结果。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:12:10.660

只需`&as_qdr=d`在 URL 的末尾添加即可。
示例：
搜索“test”：[http](http://www.google.com/search?q=test)
://www.google.com/search?q= test 使用“过去 24 小时”选项搜索“test”： [http ://www.google.com/search?q=测试&as_qdr=d](http://www.google.com/search?q=test&as_qdr=d)

# html - HTML iframe 可以继承 css 和 javascript 数据吗

> ID：12235806
> 
> 赞同：15
> 
> 时间：2012-09-02T12:03:14.380
> 
> 标签：html, css

我想知道 HTML iframe 是否可以从其父级继承 CSS 数据：

主.html

```
<html>
  <head>
   <style>
     .highlight{
       background: #008fcc;
      }
   </style>
  </head>
 <body>
   <iframe src='frame.html'></iframe>
 </body>
</html> 
```

框架.html

```
hello <font class='highlight'> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-02T12:10:36.477

**简短回答：**不，`iframe`s**通常**不能从其父页面继承/访问样式/脚本。

**长答案：**`iframe` *如果*它来自另一个域，您无法更改样式中的任何内容或执行其中的脚本（您甚至无法通过 JavaScript 读取其 DOM 内容）。

另一方面，如果它来自与您的父页面相同的域，您可以通过在您的父页面中执行类似的操作来更改元素的样式或执行脚本（此示例使用 jQuery，但它可以用普通的JavaScript）：

```
$("#iframe_id").contents().find("#some_div").css({color: "rgb(0, 162, 232)"}); //changed style of a div inside the iframe 
```

要执行内部定义的函数`iframe`：

```
$("#iframe_id").contents().document.functionName(functionParams); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T12:24:17.633

您可以使用 iframe 上的 html5**无缝**布尔参数来获取它。

[https://developer.mozilla.org/en-US/docs/HTML/Element/iframe](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe)

但目前它还没有在任何现代浏览器中完全实现。

更简单的解决方案是将所有 CSS 放在一个单独的文件中，并将其包含在主页和 iframed 页面中。

# javascript - YouTube插件的安装是CKEdior

> ID：12235807
> 
> 赞同：0
> 
> 时间：2012-09-02T12:03:16.207
> 
> 标签：javascript, ckeditor

我需要将 YouTube 插件集成到 CKEditor 中。我已经下载了这个插件[http://sourceforge.net/projects/ckeditoryoutube/](http://sourceforge.net/projects/ckeditoryoutube/)现在我试着让它发挥作用。我尝试了这段代码，但它不起作用。

```
 <script type="text/javascript">
//<![CDATA[
    // Replace the <textarea id="editor1"> with a CKEditor
    // instance, using default configuration.
    CKEDITOR.replace( 'text',
        {
            extraPlugins : 'youtube',
            toolbar :
            [
                [ 'Bold', 'Italic', '-', 'NumberedList', 'BulletedList', '-', 'Link', 'Unlink' ],
                [ 'youtube' ]
            ]
        });
//]]>
</script> 
```

你有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:29:22.100

@David Holada：首先，您必须分析 CKEditor 在您的项目中是如何实现的，然后尝试将 youtube 文件夹中的 Plugin.js 添加到项目中的适当位置。

首先尝试通过查看 youtube/dialogs/youtube.js 来分析插件的作用。

其次，你可以通过这个[CKEditor_3.x 教程](http://docs.cksource.com/CKEditor_3.x/Tutorials)。

希望这可以帮助。

# apache - htaccss RewriteRule - 从 URL 中删除 .html 和查询

> ID：12235808
> 
> 赞同：1
> 
> 时间：2012-09-02T12:03:26.393
> 
> 标签：apache, .htaccess, mod-rewrite

我在 Google 缓存和索引中有一些“脏”的 url，它们不断弹出。

我已经努力删除它们，但同时我想使用 htaccess RewriteRule 创建重定向。

我取得了部分成功，但并不完全。

原始网址 [http://www.domain.net/folder/132-article-title](http://www.domain.net/folder/132-article-title) **.html?tmpl=component&type=raw**

重写网址 [http://www.domain.net/folder/132-article-title](http://www.domain.net/folder/132-article-title)

到目前为止我有

```
RewriteRule ^(.*)\.html(.*) http://www\.domain\.net/$1 [L,R=301] 
```

但它所做的只是从 URL中删除**.html 。**

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T14:39:15.100

如果我理解正确，您想完全删除查询字符串。它会自动附加`[R]`重定向，除非您在重写中有一些东西可以替换它。要完全删除它，请附加一个`?`：

```
# Add a ? to replace the whole query string with an empty string
RewriteRule ^(.*)\.html$ http://www\.domain\.net/$1? [L,R=301] 
```

请注意，我添加了一个`$`after`.html`表示字符串在那里结束。查询字符串在 a 的左侧*不*`RewriteRule`匹配，因此您不需要 a `(.*)`。

# android - 使用实际像素在图像上绘制

> ID：12235816
> 
> 赞同：1
> 
> 时间：2012-09-02T12:05:50.900
> 
> 标签：android, image-processing, canvas

我的目标是在资源图像之上绘制。

所以，我从我的资源中加载图像：

```
bm = BitmapFactory.decodeResource(getResources(), R.drawable.image).copy(Bitmap.Config.ARGB_8888, true); 
```

我知道这不是最好的方法，因为它会引起内存问题，但现在这不是我关心的问题......然后，我创建了一个画布并在上面绘图

```
Canvas canv = new Canvas(bm);
canv.drawLine(0, 10, 50, 70, paint); 
```

然后我将位图导出到一个文件。

现在，问题是：

*   我用来画线的坐标不是原始图像的像素
*   如果我在不同的设备上运行应用程序，使用不同的屏幕，生成的图像是不同的（线条的位置和大小不同）

有没有一种方法可以指定原始图像的像素坐标，或者有一种方法可以在不同的设备中获得相同的图像结果？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:26:08.330

您面临的行为是由于 Android 密度概念。这意味着当您从 R.drawable.id 创建位图时，它会根据设备密度缩放图像。机制大致如下：

1.  检查设备密度并为此id选择最合适的drawable：从drawable-hdpi/mdpi/.../default。如果您将图像放入不同的文件夹（hdpi、mdpi 等），这将导致在每台设备上您将拥有不同的大小
2.  如果没有非常合适的可绘制对象（例如，您在 /drawable/ 文件夹中只提供了一个，但在 /drawable-hpi(etc)/ 中没有提供） - 它使用此默认可绘制对象，但会根据设备密度对其进行缩放和“默认密度”。

您可以在此处查看详细信息：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

但是，如果您只需要在所有设备上使用相同的位图分辨率，我可以建议 2 种方法：

1) 将您的图像不要放入 drawable/ 文件夹，而是放入一个：/drawable- **nodpi**。它将阻止它扩展并拒绝 Android 调整它以适应设备密度

2）您可以尝试这种方法：

```
InputStream is = getResources().openRawResource(imageId);
originalBitmap = BitmapFactory.decodeStream(is); 
```

通过这种方式，您可以避免 Android 密度缩放系统，并获得与 /drawable/ 文件夹中资源大小完全相同的位图。

如果需要更多详细信息，请告诉我。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:48:01.093

我相信这可能是因为您将位图放入`res/drawable`文件夹中。根据您运行应用程序的设备，位图的分辨率会发生变化，因此线条不会按需要绘制。

您可以通过将位图放在资产文件夹中并按以下方式加载它来解决此问题：

```
public Bitmap readBitmapFromMemory(String filename) {
        Bitmap defautBitmap = null;
        File filePath = this.getFileStreamPath(filename);
        FileInputStream fi;
        try {
            fi = new FileInputStream(filePath);
            defautBitmap = BitmapFactory.decodeStream(fi);

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        }

        return defautBitmap;

    } 
```

我希望这有帮助。

# php - 如何处理 codeigniter PDF 生成器

> ID：12235821
> 
> 赞同：1
> 
> 时间：2012-09-02T12:06:54.173
> 
> 标签：php, pdf, codeigniter-2

在视图页面“ShowInformation.php”中，我有类似这样的代码，包括省略 css 样式代码和其他内容

```
<?php foreach ($preUser as $value): ?>

Citizen ID : <?php echo $value->cid;?></br>
First Name : <?php echo $value->name;?></br>
...

<?php endforeach; ?> 
```

$preUser 是从控制器及其从数据库传递的变量。

我需要在该页面中添加下载按钮并使用完全相同的 PHP/HTML/CSS 生成 PDF，支持 UTF-8。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T18:00:39.427

哇，我工作了，但我怀疑这是最好的方法吗？

CI 2.1.3

```
public function mostrar()
{       
    require_once(APPPATH.'third_party/html2pdf/html2pdf.class.php');

    //vista template pdf
    $template_pdf = $this->load->view('pdf_mostrar', '', TRUE);

    $html2pdf = new HTML2PDF('P','A4','fr');
    $html2pdf->WriteHTML($template_pdf);
    $html2pdf->Output('exemple.pdf');   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T23:28:31.827

我正在使用 html2pdf 并且 CI 2+ 很好。

我花了一些时间为我的案例找到合适的例子，但我终于成功了。

我是这样做的：

**1- 安装**

获取**html2pdf**：[http ://www.html2pdf.fr/en](http://www.html2pdf.fr/en)

将 html2pdf 文件夹复制到您的 CI/application/third_party/

*（你会得到类似的东西：application/third_party/html2pdf/html2pdf.class.php）*

* * *

**2-处理PDF的控制器功能**

```
 <?php 
    class Somecontroller {

        function dopdf($mydat){

            $this->CI->output->enable_profiler(false);
            $this->CI->load->library('parser');
            require_once(APPPATH.'third_party/html2pdf/html2pdf.class.php');

            // set vars
            $tpl_path = 'path/to/view_tpl.php';
            $thefullpath = '/path/to/file_pdf.pdf';
            $preview = false;
            $previewpath = '/path/to/preview_pdf.pdf';

            // PDFs datas
            $datas = array(
              'first_name' => $mydat->first_name,
              'last_name'  => $mydat->last_name,
              'site_title' => config_item('site_title'),
            );

            // Encode datas to utf8
            $tpl_data = array_map('utf8_encode',$datas);

            // 
            // GENERATE PDF AND SAVE FILE (OR OUTPUT)
            //

            $content = $this->CI->parser->parse($tpl_path, $tpl_data, TRUE);
            $html2pdf = new HTML2PDF('P','A4','fr', true, 'UTF-8',  array(7, 7, 10, 10));
            $html2pdf->pdf->SetAuthor($tpl_data['site_title']);
            $html2pdf->pdf->SetTitle($tpl_data['site_title']);
            $html2pdf->pdf->SetSubject($tpl_data['site_title']);
            $html2pdf->pdf->SetKeywords($tpl_data['site_title']);
            $html2pdf->pdf->SetProtection(array('print'), '');//allow only view/print
            $html2pdf->WriteHTML($content);
            if (!$preview) //save
              $html2pdf->Output($thefullpath, 'F');
            else { //save and load
              $html2pdf->Output($previewpath, 'D');
            }

        }
    } 
```

* * *

**3- 视图文件**

在“application/views/path/to/view_tpl.php”中创建一个类似文件的模板

使用 {myvar} 之类的占位符而不是`<?php echo $myvar ?>`

*记住！不包括：html、head、body 标签！*

```
<!-- do not include: html,head, body tags -->
<style type="text/css">
<!--
P {text-align:justify;font-size: 12pt;}
li {text-align:justify;font-size: 12pt;}
table.page_footer {width: 100%; border: none; border-top: solid 1px #000000; }
-->
</style>

<page backtop="14mm" backbottom="14mm" backleft="10mm" backright="10mm" style="font-size: 12pt">
    <page_footer>
        <table class="page_footer">
            <tr>
                <td style="width: 100%; text-align: right">
                    page [[page_cu]]/[[page_nb]]
                </td>
            </tr>
        </table>
    </page_footer>
<div style="width:100%;border: 1px solid #000000;text-align:center">
    <h1><b>{site_title}</b></h1></div>
    <p>
    Firstname: {first_name}<br>
    lastname: {last_name}<br>
    </p>
    <img src="<?php echo BASE_URL.'assets/img/test.png'; ?>" width="490" height="306">
</page> 
```

* * *

**4\. PDF 文件目标**

pdf可以保存在任何地方。只需在控制器函数中指定一个目的地（参见`$thefullpath`和`$previewpath`）

* * *

希望它可以帮助！

# javascript - 将多个重叠的透明图像保存到单个图像

> ID：12235824
> 
> 赞同：-1
> 
> 时间：2012-09-02T12:07:41.180
> 
> 标签：javascript, transparency, image

我有多个具有透明背景的重叠图像，就像 Photoshop 中的图层一样，每个图层都加载到“img”标签中。我需要更改某些图层的颜色，我使用 javascript 来完成，现在我想合并所有图像并将它们保存到单个图像文件中，就像在 photoshop 中一样。有人对此有任何想法吗？任何人都可以为此建议我任何插件吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:12:43.250

最简单的是有一个[HTML 画布](http://www.html5canvastutorials.com/)，然后

*   在其上绘制图像，根据每个图像所需的透明度[设置 alpha](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-context-2d-globalalpha)

*   [使用toDataURL()](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)将画布保存为 PNG

# java - 在 Java 中分析和避免 Full GC

> ID：12235834
> 
> 赞同：4
> 
> 时间：2012-09-02T12:09:17.323
> 
> 标签：java, performance, garbage-collection

我正在开发一个时间紧迫的应用程序，每次迭代的时间上限为 40 毫秒。如果仅超过一次时间上限，则应用程序终止并结束游戏。应用程序本身保持在 40 毫秒以下没有问题，有时是垃圾收集器超过了限制。

使用对象池与工厂模式相结合，我设法在很大程度上消除了垃圾收集的需要，并且应用程序实现了稳定的 17 毫秒迭代时间，包括小型 GC 运行，除了应用程序启动后的 10 到 20 次迭代仅一次完整 GC发生超过 40 毫秒并终止我的应用程序。

我的问题是，我如何分析究竟是什么导致了这个完整的 GC？我大量使用 jvisualvm 来分析我的运行时和内存占用情况，这对识别我需要缓存的对象很有帮助。但在这种特殊情况下，我不能使用它，因为在我按下 jvisualvm 中的正确按钮之前很久就会发生完整的 GC。**有没有办法以编程方式生成堆转储？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:24:16.093

我会使用像 YourKit 这样的商业内存分析器。您可以从其中大部分获得足够长的免费评估许可证来解决您的问题。;)

我发现 VisualVM 的一个问题是，当您最小化对象创建时，最大的内存生产者是 Memory Profiler 本身。商业分析器没有这个问题，因为它们使用堆外内存。

我想看看你能做些什么来进一步减少你的垃圾。17 毫秒仍然很长，您也可以考虑对 CPU 进行分析。CPU 分析器在大约半毫秒内很有用。低于此值，您需要使用自己的精确时间和一些试验和错误。

我发现有用的是在完成 CPU 配置文件和内存配置文件之后，同时运行它们，你会得到更多关于你可以改进的建议。

如果您减少产生的垃圾量并增加伊甸园的空间，您可能每天只能获得一次次要收集。

[http://vanillajava.blogspot.co.uk/2011/06/how-to-avoid-garbage-collection.html](http://vanillajava.blogspot.co.uk/2011/06/how-to-avoid-garbage-collection.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:28:28.517

JVM 上的垃圾收集在大多数情况下是一个巨大的优势，但主要的缺点（正如您已经确定的那样）是它有时会导致无法预测的 GC 暂停。

标准 JVM 可以用于软实时（当您可以容忍偶尔的暂停时），但不适合硬实时（即，当任何超过给定容差的暂停导致错误/失败时）

一些有用的建议是：

*   如果可以的话，转移到专门的实时 JVM（例如[Zing JVM](http://www.azulsystems.com/products/zing/virtual-machine)）。这是使用 Java 可靠地获得实时行为的最佳方式
*   使用低延迟库，例如[Javolution](http://javolution.org/) - 通过提供具有非常低的对象分配率的数据结构（因此减少 GC 开销），这些库可以提供很大帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:44:03.457

[您可以尝试jprofiler](http://www.ej-technologies.com/products/jprofiler/overview.html)的评估版本，它可以让您让应用程序等待分析器启动。它不影响堆内存，总的来说是一个功能强大的分析器，具有良好的 IDE 集成和一键设置。

但是由于您说您无法控制堆大小或 gc 设置，因此您无能为力。在启动时加载类会产生一些需要收集的垃圾。

我可能会问：这是作业还是只是某种竞赛/挑战？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-02T12:14:54.680

你听说过 HeapDumpOnCtrlBreak; [试试这个链接](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.mat.ui.help/tasks/acquiringheapdump.html)

或替代地使用

```
jmap -dump:format=b,file=<filename.hprof> <pid> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T12:45:49.897

您是否尝试过调整垃圾收集参数？如果您在一台具有足够 RAM 和多个内核的机器上，那么您应该能够利用并行垃圾收集。它[在 Java 1.6 JVMs 上默认启用](http://java.sun.com/performance/reference/whitepapers/6_performance.html#2.2.1)。基本上，如果您确保年轻一代足够大，以至于对象永远不会被提升到老一代（以串行方式收集）。

# javascript - Javascript 电子邮件验证正则表达式包含

> ID：12235836
> 
> 赞同：2
> 
> 时间：2012-09-02T12:09:28.370
> 
> 标签：javascript, regex, syntax-error

我从[这篇文章](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)中得到了 javascript 电子邮件验证码。根据所有答案，RFC2822 正则表达式如下：

```
[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])? 
```

我试图将它包含在 js 中，但它给出了语法错误。

```
var email = this.value;
if(email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/) )
{
    //matched...
} else {
    //not matched..
} 
```

我正在使用 eclipse，一旦我输入此代码，它就会给出错误。这是长列表中的一些错误

```
Multiple markers at this line
- Syntax error on tokens, ArrayLiteralHeader expected instead
- Syntax error on token "?", invalid Expression
- Syntax error on token "Invalid Character", delete this token
- Syntax error on tokens, delete these tokens
- Syntax error, insert ")" to complete Arguments
- Missing semicolon
- Syntax error on token "Invalid Character", delete this token
- Syntax error, insert ")" to complete PrimaryNoNewArray
- Syntax error on tokens, ArrayLiteralHeader expected instead
- Syntax error on token "^", invalid ( 
```

请让我知道如何正确地将电子邮件验证正则表达式包含到代码中？

### 编辑

在浏览器控制台中尝试过。完全相同的语法适用于 chrome js 控制台。这是输出

![网页控制台](../Images/44f408108099937e56a3648d86259a6b.png)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:11:29.563

Javascript 正则表达式文字需要`/`将其括起来。

```
if(email.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/) )
{
    //matched...
} else {
    //not matched..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:11:24.390

在 Javascript 中，您可以使用如下的正则表达式：

```
myString.match(/<regexHere>/) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T12:11:33.277

正则表达式必须用javascript中的“/”封装：

```
 if (/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(subject)) {
        // Successful match
    } else {
        // Match attempt failed
    } 
```

# glassfish - GlassFish：服务器如何知道何时对自动部署文件夹进行了更改

> ID：12235839
> 
> 赞同：0
> 
> 时间：2012-09-02T12:10:17.337
> 
> 标签：glassfish, autodeploy

我是 EJB 的新手。最近我正在通过 GlassFish 测试一个演示 EAR 文件。

对于 EAR 部署，我将该 EAR 文件添加到 GlassFish 的“.autodeploy”目录中。

服务器开始部署。我的问题是，服务器如何知道我们已将新的 EAR 文件添加到自动部署目录？

谢谢，甘扬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T10:02:20.770

在 GLassFish 服务器中，有一个轮询超时选项。您可以在管理控制台-> 服务器选项卡中看到它。

您可以在那里更改超时选项。因此，对于每个指定的时间间隔，它都会通过比较时间戳来查找更改。如果发现更改，则部署内容。

问候，贡扬。

# css - ios 上的 CSS 过渡性能

> ID：12235848
> 
> 赞同：2
> 
> 时间：2012-09-02T12:11:58.520
> 
> 标签：css, ios, performance, css-animations

我的问题是，当动画容器具有更复杂的 HTML 结构时，转换速度真的会变慢。为空容器制作动画非常流畅，但在向其中添加更多数据后，性能真的很糟糕。我知道添加`-webkit-transform: translate3d(0,0,0)`到动画元素的硬件加速，但这似乎对更复杂的 DOM 结构没有帮助。

是否有任何资源可以描述什么会影响 iOS 上 CSS 过渡的性能`translate3d`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:38:22.930

您的容器是在屏幕内还是比屏幕大？

我正在制作一个书本类型的应用程序，其中每一页都是屏幕大小，并包含复杂的 dom 结构。当我在 dom 中放置更多页面时，页面内导航和转换的性能会变慢。但是从 dom 中删除不在屏幕中的页面并仅在页面出现或将要出现时渲染它们大大提高了性能。

因此，请尝试删除元素或使它们`display:none`对用户不可见，这可能会提高您的性能。

这里也是提高性能的非常好的资源 [http://www.mikedellanoce.com/2012/09/10-tips-for-getting-that-native-ios.html](http://www.mikedellanoce.com/2012/09/10-tips-for-getting-that-native-ios.html)

# java - 创建新数组

> ID：12235853
> 
> 赞同：0
> 
> 时间：2012-09-02T12:12:32.827
> 
> 标签：java, android, arrays, string

我的目标很简单。我希望能够从 4 个编辑文本字段中获取用户输入，id 为 et1-4，并将它们放入一个名为`aSummary1[] = {et1, et2, et3, et4};`. 这四个字段是不同的数据类型，两个是单词，一个是数字，一个是密码。这将全部显示在`ListView`. 这部分我可以做。我无法弄清楚的部分是如果我想在 中添加一个新行`ListView`，我想创建一个新的字符串数组，假设`aSummary2[]`具有不同的值，但参数相同：`{word, word, number, password};`，然后`aSummary3[]`等等等等.

怎么做呢？或者，如果有更好的方法，我将如何分配变量和字符串以无限制地列出条目。例如，列表条目 x 带有分配给 x 的变量 wy 和 z，但是带有变量 a 带有 bc 和 e，带有 q 带有 rs 和 t。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T13:04:58.567

我认为您需要一个不断增长的数组.....最好使用`Collections`它的 more `flexible`，并且**与数组不同，您不要在声明时对其进行初始化。**

首先考虑做一个Pojo

```
public class Summary {

    private String str1;
    private String str2;
    private int number;
    private String password;

    public Summary(String str1, String str2, int number, String password) {

        this.str1 = str1;
        this.str2 = str2;
        this.number = number;
        this.password = password;
    }

    public String getStr1() {
        return str1;
    }

    public String getStr2() {
        return str2;
    }

    public int getNumber() {
        return number;
    }

    public String getPassword() {
        return password;
    }

}

 } 
```

现在考虑另一个类，从那里**初始化这个类对象，然后存储在一个** `ArrayList`.

```
public class Test{

public static ArrayList<Summary> arList = new ArrayList<Summary>();
private Summary sObj;

   public void fillMe(String p1, String p2, int p3, String p4){

           arList.add(new sObj(p1, p2, p3, p4));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:35:44.130

正如评论中提到的，更好的解决方案是创建一个包含所有必需字段的类，例如：

```
public class Summary {
    private String field1;
    private String field2;
    private String field3;
    private String field4;
} 
```

然后将此类的对象存储在 ArrayList 中：

```
ArrayList<Summary> summaries = new ArrayList<Summary>(); 
```

当您需要创建另一个这种类型的对象时，只需调用：

```
Summary summary = new Summary();
// initialize fields
summaries.add(summary); 
```

希望这可以帮助。

# ruby-on-rails - Rails 3 资产和 CSS 相对 URL

> ID：12235859
> 
> 赞同：5
> 
> 时间：2012-09-02T12:13:14.827
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, asset-pipeline

我有几个 CSS 文件，它们使用相对路径（如`url( "../img/my_image.jpg" )`.

一切都`development`在`production`环境中工作，因为所有 CSS 文件都打包在一个文件中并且结构丢失了，相关路径也丢失了，并且找不到图像。

### 我的结构细节

我有这样的*资产*结构：

```
/app
  /assets
    /plugins
      /my_plugin
        /img
          my_image.jpg
        /css
          my_css.css 
```

*（`/my_plugin`可以是任何一组插件`css`，`js`以及`images`Twitter Bootstrap 之类的任何其他文件）*

进入`/app/assets/plugins/my_plugin/my_css.css`我有类似的东西：

```
background-image: url("../img/my_image.jpg"); 
```

在`/app/assets/stylesheets/application.css`：

```
*= require css/my_css.css 
```

最后在`head`我的`html`文件中：

```
<%= stylesheet_link_tag "application" %> 
```

我应该怎么做才能解决这个问题？

### 更新

[重现问题的迷你应用程序](https://github.com/fguillen/RailsAssetsTest)，在[README](https://github.com/fguillen/RailsAssetsTest/blob/master/README.md)中有安装和重现问题的说明。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-02T14:16:38.497

我没有看到连接 CSS 文件的问题。而且您不必手动包含深度嵌套的 CSS 文件：默认情况下，application.css 已经在该行中执行此操作`*= require_tree .`

图像会重复你的`app/assets/images`结构。要在开发和生产环境中正确处理它们，您有[各自的指南](http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets)。检查其第*2.2 节 Coding Links to Assets*。有关于图像文件的编码路径的解释：

通过 ERb 的 CSS：

```
 url(<%= asset_path 'image.png' %>) 
```

通过 Sass 的 CSS：

```
 image-url("rails.png") 
```

预编译图像末尾的所有这些奇怪的十六进制字符都将自动得到尊重。

**UPD**

我看到您根本不需要插件的资产管道功能。您的样式/脚本已经缩小。您可以将`plugins`文件夹移动到您的`public`文件夹中（成为`<APP_ROOT>/public/plugins/`）。

然后从您的**删除**以下行`application.css`：

```
*= require bootstrap/css/bootstrap 
```

而是将以下行**添加**到您的模板中`application.html.erb`：

```
 <%= stylesheet_link_tag    "/plugins/bootstrap/css/bootstrap.min.css", :media => "all" %>
  <%= javascript_include_tag "/plugins/bootstrap/js/bootstrap.min.js" %> 
```

现在您必须能够通过替换您`public/plugins/bootstrap`的内容轻松地在您的主题之间切换。

**更新 2**

可能你必须明确告诉*Rails*`precompile`你的插件*资产*：

```
# /config/environments/production.rb
config.assets.precompile += %w( bootstrap/css/bootstrap.css ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T19:40:50.613

我已经能够解决将我的*插件资产*移动到`/app/vendor/assets/plugins`我认为更好的地方的问题，因为它们不是与我的应用程序直接相关的资产，而是事实上的*供应商*资产。

然后我们有：

```
/app
  /vendor
    /assets
      /plugins
        /my_plugin
          /img
            my_image.jpg
          /css
            my_css.css 
```

`css`我们在另一个`stylesheet_link_tag`调用中加载 main ，如下所示：

```
<%= stylesheet_link_tag "my_plugin/css/my_css", :media => "all" %> 
```

此时一切看起来都正常，但*Rails*抱怨`my_css.css`即使我们运行也没有编译`rake assets:precompile`。

解决方案是明确告诉*Rails编译这个文件：*

```
# /config/environments/production.rb
config.assets.precompile += %w( my_plugin/css/my_css.css ) 
```

现在`rake assets:precompile`将编译我们的插件 css 并且`production`环境即使使用*相对 urls*也能正常工作。

检查[已解决问题的差异更改](https://github.com/fguillen/RailsAssetsTest/commit/7330bf9a6ab71d6c7c39f40fecd39fbd5c204f6c)

# android - 我无法使用意图进行下一个活动

> ID：12235861
> 
> 赞同：2
> 
> 时间：2012-09-02T12:13:21.510
> 
> 标签：android, android-layout, android-intent, android-widget

单击每个项目时，我无法启动“新活动”，我正在使用 if-else 之类的条件，

```
if (item.equals("Aerosol")) {
  startActivity(new Intent(Search.this, Aerosol.class));
  startActivity(intent); 
```

我用这个没有错，但我不能去下一堂课。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:28:07.603

为了启动一个意图，在 AndroidManifest 中声明 Intent 如下：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name">
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="com.example.package.EXCLASS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application 
```

where`.MainActivity`是类的名称，`com.example.package`是您的包名称，`EXCLASS`是您想要的任何名称，但请记住您命名它的名称。

对于你想开始的每一个新活动，你应该`<activity> />`在 AndroidManifest 中重新声明一个新的，具有相同的包名，一个新词而不是`EXCLASS`，并且`android:name=".MainActivity"`应该更改为类名的精确副本，并在正面。这应该放在`<application> />`声明之后，所以它看起来像这样：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".StartingActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.package.EXCLASS" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application> 
```

在您的类中，在我的示例中为 MainActivity，您将声明您的包名称`startActivity(new Intent("com.example.package.EXCLASS"));`在哪里，并且是您在 AndroidManifest 中声明的任何内容。`com.example.package``EXCLASS`

最终结果将是：

```
private void select(String item) {
    try {
        if (item.equals("Aerosol")) {
            startActivity(new Intent("com.example.package.CLASSONE"));
        }
        if (item.equals("Aluminium")) {
            startActivity(new Intent("com.example.package.CLASSTWO"));
        } 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:17:59.373

你需要做的是，实例化新的意图，而不是调用意图。

你应该这样做：

```
if (item.equals("Aerosol")) {
    intent = new Intent(Search.this, Aerosol.class);
}else if (item.equals("Aluminium")) {
    intent = new Intent(Search.this, Aluminium.class);
}

startActivity(intent); 
```

# r - 使用 xpath 提取指定的表

> ID：12235862
> 
> 赞同：0
> 
> 时间：2012-09-02T12:13:22.080
> 
> 标签：r, xpath

我想从网络[http://en.wikipedia.org/wiki/Brazil_national_football_team中提取一个表格](http://en.wikipedia.org/wiki/Brazil_national_football_team)

```
library(XML)
baseURL <- "http://en.wikipedia.org/wiki/Brazil_national_football_team"
xmltext <- htmlParse(baseURL)
xmltable <- xpathApply(xmltext, "//table[.//tbody//tr//th//a[@title='CONCACAF Gold Cup']]") 
```

这是 xpath ：`"//table[.//tbody//tr//th//a[@title='CONCACAF Gold Cup']]"`

两者都不

```
xmltable <- xpathApply(xmltext, "//table[.//tbody//tr//th//a[@title='CONCACAF Gold Cup']]") 
```

也不

```
xmltable <- xpathApply(xmltext, "//table[//tbody//tr//th//a[@title='CONCACAF Gold Cup']]") 
```

可以得到指定的表。如何编写 xpath 表达式？
请看附件。 ![在此处输入图像描述](../Images/2e30e9943cd181e7cc346f0089e776b8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:45:30.713

您必须使用`..`来获取 xpath 中的父元素：`//table[@class='wikitable']//th//a[@title='CONCACAF Gold Cup']/../../..`

要获取表格，您可以使用`XML::readHTMLTable`：

```
library(XML)
baseURL <- "http://en.wikipedia.org/wiki/Brazil_national_football_team"
xmltext <- htmlParse(baseURL)

## grep correct table
tableNode <- xpathApply(xmltext, "//table[@class='wikitable']//th//a[@title='CONCACAF Gold Cup']/../../..")[[1]]

## convert XMLNode into data.frame
concacafTable <- readHTMLTable(tableNode, header=FALSE, stringsAsFactors=FALSE)

## format table (remove useless "Gold Cup"-header (row 1) and set right header (row 2)
colnames(concacafTable) <- concacafTable[2, ]
concacafTable <- concacafTable[-c(1,2),]
concacafTable
#   Year       Round GP W D L GF GA
#3  1996  Runners-up  4 3 0 1 10  3
#4  1998 Third Place  5 2 2 1  6  2
#5  2003  Runners-up  5 3 0 2  6  4                                                 
#6 Total        3/11 14 8 2 4 22  9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T22:24:31.290

我也找到了两个解析网络的秘书，

1.tbody 不为人知

```
tableNode <- xpathApply(xmltext, "//tbody") 
```

什么都得不到。网络中有很多tbody元素，没有一个被认为是正式的元素。

2.直接获取表格，不使用父元素的概念

```
tableNode <- xpathApply(xmltext, "//table[@class='wikitable'][./tr/th/a[@title='CONCACAF Gold Cup']]") can work too. 
```

# c++ - 从对象向量访问数据

> ID：12235869
> 
> 赞同：2
> 
> 时间：2012-09-02T12:14:39.937
> 
> 标签：c++

我已从文件中读取数据，并希望将数据存储为对象向量。

```
vector <Thing*> thingVector;
for (int i = 0; i < 10; i++) {
// Read in contents of file
getline(fileName, v1, ',');
cout << v1 << endl;
getline(fileName, v1, ',');
cout << v2 << endl;
getline(fileName, v3, ',');
cout << v3 << endl;
getline(fileName, v4, '\n');
cout << v4 << endl << endl;
// Store
Thing* thingDetails = new Thing(v1, v2, v3, v4);
thingVector.push_back(thingDetails);
delete thingDetails;
}
thingFile.close();
cout << "Size of THING vector is " << thingVector.size() << endl; // Displays 10

cout << thingVector[0].getV1 << endl; // ERROR HERE 
```

如何将每条记录存储在向量中，然后访问数据？

我也尝试这样做：thingVector.push_back(Thing(v1, v2, v3, v4));

当我像这样尝试时，for语句中没有最后一行和倒数第三行，但我无法访问数据，因此放弃了这种方法。

有什么建议么？

东西.H文件

```
#ifndef THING_H
#define THING_H

#include <string>

using namespace std;

class Thing {
public:

Thing(string v1, string v2, string v3, string v4);
string getV1();
string getV2();
string getV3();
string getV4();

private:
string v1;
string v2;
string v3;
string v4;
};

#endif 
```

东西.CPP文件

```
#include "thing.h"

#include <string>

using namespace std;
Thing::Thing(string aV1, string aV2, string aV3, string aV4) {
v1 = aV1;
v2 = aV2;
v3 = aV3;
v4 = aV4;
}

string Thing::getV1(){
return v1;
}

string Thing::getV3(){
return v2;
}

string Thing::getV3){
return v3;
}

string Thing::getV4(){
return v4;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T12:16:51.947

您的问题是您正在存储指向 的指针`Thing`，但正在删除指针。所以向量最终充满了悬空指针。您可以通过简单地使用 的向量来避免所有这些麻烦`Things`：

```
vector <Thing> thingVector;
...
thingVector.push_back(Thing(v1,v2,v3,v4)); 
```

然后你可以像这样访问它：

```
std::string s = thingVector[0].getV1(); 
```

或者

```
cout << thingVector[0].getV1() << endl; 
```

除非绝对必要，否则不应使用指针动态分配的对象，并且在您的代码示例中似乎没有理由这样做。如果这样做，请考虑使用[智能指针](http://en.wikipedia.org/wiki/Smart_pointer)来处理内存管理。

请注意，如果您选择了 a `vector`of`Thing`指针或智能指针，则必须使用`->`运算符调用每个元素的方法：

```
cout << thingVector[0]->getV1() << endl;
                  //   ^ here! 
```

顺便说一句，你真的应该避免`using namespace std;`，特别是在头文件中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T12:19:08.097

您的代码有两个问题：

*   您正在删除指向`Thing`您 push_back 的指针，并且
*   您根本没有阅读`v2`（复制/粘贴错误；您正在将数据读入`v1`两次）。

虽然有一个指针向量是可以的，但这很不方便，因为你必须做很多手动工作来管理对象的内存。您可以在向量中使用`unique_ptr<Thing>`而不是，如下所示：`Thing*`

```
vector <unique_ptr<Thing> > thingVector; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-02T12:18:48.330

你应该使用

```
vector <Thing> thingVector;
...
thingVector.push_back(*thingDetails); 
```

这将传递对象而不是指针。

还

```
cout << thingVector[0].getV1() << endl; // Convert to a function call. 
```

# java - jnlp href 属性中的 url 参数

> ID：12235872
> 
> 赞同：4
> 
> 时间：2012-09-02T12:15:15.943
> 
> 标签：java, jnlp, java-web-start

我一直在使用 url 参数将参数传递给 .jar 应用程序的主方法。在 Windows 7 上更新到最新的 jre 7u7 后，Java-web-start 启动器在启动文件时崩溃。

（JNLP download-servlet 和 jsp-page 解析 url 参数并将它们输入到更下方的参数中）

jsp中有趣的部分

```
<jnlp spec="6.0+" codebase="http://localhost:8080/" href="myfile.jnlp?username=charles">
    ...
    <application-desc main-class="MyMain">
        <argument><%=request.getParameter("username")%></argument>
    </application-desc>
</jnlp> 
```

所以这可能是也可能不是错误，

Q1：我是否以正确的方式使用了 href 属性？

Q2：任何聪明的想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T11:56:45.400

我今天遇到同样的问题。我在网上没有找到任何东西，但我试图替换“？” 带有 HTML 实体 '?' 它有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-09T09:27:36.847

此问题已添加到 Oracle 错误数据库[中](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7192904)：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T10:32:36.890

我一直在寻找这个答案很长一段时间，但从未得到具体的解决方案。所以我在这里最终解决了它。我将在下面提出解决方案。

当前情况：有一个简单的 java 应用程序可以从带有参数的浏览器启动。现有的路线是浏览器-->index.html-->调用我的 jnlp 文件-->调用我的 java 类的主要方法。

需要的情况：现在用户将发送参数说，用户名从浏览器一直发送到java类的主要方法。

解决方案：

*   不要浪费时间尝试仅更改 jnlp 文件。
*   更改 index.html 如下：

    1.  将函数 getUrlParameters() (google it) 添加到 index.html 的 javascript 部分

    2.  通过调用 usernameParam = getUrlParameters("username", "", true) 获取用户名的值

    3.  形成这样的 URL = 'nameOfYourJSPFile.jsp?username='+usernameParam
*   创建一个新的 jsp 文件（这是必须的），例如：

    ```
    <%@ page contentType="application/x-java-jnlp-file" %>   
    <%@ page session="true" %>   
    <%   
    response.setDateHeader ("Expires", 0); //prevents caching at the proxy server 
    // Getting the URL parameters from the request
    final String USERNAME_PARAM = "username";
    String paramUsername = request.getParameter(USERNAME_PARAM);
    %> 
    <?xml version="1.0" encoding="iso-8859-1"?>
    <jnlp spec="1.0+" codebase="http://localhost:8080/" href="<nameOfYourJSPFile>.jsp?    <%=USERNAME_PARAM + "=" + paramUsername%>">
    <information>
    </information>
    <security>
        <all-permissions/>
    </security>

    <resources>
               Your resources...
    </resources>

    <application-desc main-class="Complete.package.yourClassNameContainingMain">
         <argument><%=paramUsername%></argument>
    </application-desc>
    </jnlp> 
    ```

*   一旦这个 URL 形成，你将把它发送到：IFrameDoc.location.replace(URL); 在同一个 index.html

您将在 main 方法的 String[] 参数中获得传递的用户名值。因此，现在您可以检查参数值是否存在，如果存在，则使用 jsp 文件形成 URL 或直接使用旧的 jnlp 文件。

# java - 强制关闭我的应用程序，因为共享偏好

> ID：12235873
> 
> 赞同：-1
> 
> 时间：2012-09-02T12:15:38.117
> 
> 标签：java, android

我的应用程序仍然崩溃我不知道

我认为这是因为共同的偏好

在 A 活动中，我加载了保存在 B 活动中的共享首选项

并且应用程序在首次启动时被强制关闭

这是我的 A 活动：

```
public class DawaaActivity extends Activity implements View.OnClickListener {
/** Called when the activity is first created. */
Button add;
SharedPreferences emportPref = this.getSharedPreferences("dawaaData",MODE_PRIVATE);;
String meDawaa = emportPref.getString("subject", "no data yet");

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Toast.makeText(DawaaActivity.this, meDawaa , Toast.LENGTH_SHORT).show();
    initialaiz();
}

private void initialaiz() {
    // TODO Auto-generated method stub
    add = (Button) findViewById(R.id.button3);
    add.setOnClickListener(this);
}

public void onClick(View v) {
    // TODO Auto-generated method stub
    Intent data = new Intent(DawaaActivity.this,SettingActivity.class);
    startActivity(data);
} 
```

}

这是我的 B 活动：

```
public class SettingActivity extends Activity implements View.OnClickListener {
EditText et;
EditText et1;
Spinner list;
TimePicker startTime;
Button save;
Button cancel;
private SharedPreferences exportPref;
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.setting);
    initialaiz();
}
private void initialaiz() {
    // TODO Auto-generated method stub
    et = (EditText) findViewById(R.id.text);
    et1 = (EditText) findViewById(R.id.text1);
    list = (Spinner) findViewById(R.id.spinner);
    startTime = (TimePicker) findViewById(R.id.timePicker);
    save = (Button) findViewById(R.id.save);
    cancel = (Button) findViewById(R.id.cancel);
    save.setOnClickListener(this);
    cancel.setOnClickListener(this);
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(v.getId()){
    case R.id.save:
        save();
        Intent transferData = new Intent(SettingActivity.this,DawaaActivity.class);
        startActivity(transferData);
        break;
    case R.id.cancel:
        finish();
        break;
    }
}
public void save() {
    // TODO Auto-generated method stub
    exportPref = getSharedPreferences("dawaaData",MODE_PRIVATE);
    SharedPreferences.Editor editor = exportPref.edit();
    editor.putString("subject", et.getText().toString());
    editor.putString("dosesC", et1.getText().toString());
    editor.putString("doses", list.getSelectedItem().toString());
    editor.putInt("hour", startTime.getCurrentHour());
    editor.putInt("minute", startTime.getCurrentMinute());
    editor.putInt("exists", 1);
    editor.commit();
    Toast.makeText(SettingActivity.this,"data has been saved" ,Toast.LENGTH_SHORT).show();
} 
```

}

你可以帮帮我吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:20:56.457

改变：

```
SharedPreferences emportPref = this.getSharedPreferences("dawaaData",MODE_PRIVATE);;
String meDawaa = emportPref.getString("subject", "no data yet"); 
```

到：

```
SharedPreferences emportPref;
String meDawaa; 
```

并将以下内容添加到您的 onCreate() ：

```
emportPref = this.getSharedPreferences("dawaaData",MODE_PRIVATE);
meDawaa = emportPref.getString("subject", "no data yet"); 
```

您收到错误是因为您在 onCreate() 中创建之前尝试使用 Activity 上下文。

# php - Python SimpleHTTPServer 与 PHP

> ID：12235876
> 
> 赞同：67
> 
> 时间：2012-09-02T12:16:22.470
> 
> 标签：php, python

我使用了**python -m SimpleHTTPServer**，但是 PHP 文件没有执行，而是被下载了。

我在一篇旧[帖子](https://stackoverflow.com/questions/9900706/simple-python-server-similar-to-simplehttpserver-but-with-php-support)中听说过[WPHP](http://pythonpaste.org/wphp/)。但我不知道如何使用它。我该如何使用它？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-09-02T12:20:06.867

Python Webserver 将您的 PHP 文件发送到浏览器的原因可能是因为它没有配置或无法处理 PHP 文件。请参阅[https://serverfault.com/questions/338394/how-to-run-php-with-simplehttpserver](https://serverfault.com/questions/338394/how-to-run-php-with-simplehttpserver)

PHP 5.4 有一个[内置的网络服务器](http://php.net/manual/en/features.commandline.webserver.php)。您可以像这样从命令行调用它：

```
php [options] -S <addr>:<port> [-t docroot] 
```

**例子**

```
C:\Users\Gordon>php -S 127.0.0.1:80 -t .
PHP 5.4.0 Development Server started at Sun Sep 02 14:20:28 2012
Listening on 127.0.0.1:80
Document root is C:\Users\Gordon
Press Ctrl-C to quit. 
```

请注意，如果省略`-t`PHP 将使用当前工作目录。

# c# - 如何测量 VirtualizingStackPanel 的性能

> ID：12235894
> 
> 赞同：-1
> 
> 时间：2012-09-02T12:20:22.613
> 
> 标签：c#, wpf, performance

我想测量 VirtualizingStackPanel 的性能。以下是我正在使用的步骤。

*   创建 1000 个项目，如果没有虚拟化，UI 将冻结，这非常简单。
*   我可以使用 Snoop 来显示它只加载可见的项目

现在我想证明当我滚动时，它只加载其他几个项目。有什么事件可以用来证明这一点吗？有没有其他方法可以证明这一点？

请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T15:58:03.697

为什么需要证明这一点？将新属性添加到您的结构中，例如 IsNotInMemory。您可以将其添加到您的 ItemsTemplate：

```
 <CheckBox x:Name="win" IsChecked="{Binding IsNotInMemory, Mode=OneWayToSource}" 
                              Visibility="Collapsed"
                              > 
```

然后，您可以添加另一个禁用了虚拟化的 ListBox，它直接与 IsNotInMemory 绑定。然后，您可以查看哪些项目当前在内存中，哪些不在。当您滚动第一个列表框时，您会看到项目正在被一个一个地加载到内存中（EG TRUE 变为 false。）

或者，您可以将自己挂接到 DataTemplate 的 Loaded&Unloaded 事件中。请注意，如果您使用 VirtualizingMode=Recycling，您可能不会收到任何 Unloaded 事件，因为它们正在被回收。在这种情况下，您还可以将自己挂接到 DataContextChanged 事件中。

# javascript - 悬停后如何动画删除背景？

> ID：12235901
> 
> 赞同：1
> 
> 时间：2012-09-02T12:21:56.647
> 
> 标签：javascript, jquery, jquery-ui

当鼠标悬停在元素上时，我想要正确的方法在设置背景后删除背景，

我试过这些：

```
$("#store_header .right #nav ul li").hover(function() {
    $(this).animate({backgroundColor : '#0097d5'}, 200);}
    ,function() {
        $(this).animate({backgroundColor : ''}, 200);
    }

); 
```

但是第二个功能不起作用，所以请告诉我什么是错误，什么是正确的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:36:21.697

您需要设置要恢复的颜色，检查***[工作演示](http://jsfiddle.net/jNUPU/)***。（注意：包括 jquery-ui）

```
$("#store_header .right #nav ul li").hover(function() {
    $(this).animate({backgroundColor : '#0097d5'}, 200);
    } ,function() {
        $(this).animate({backgroundColor : '#fff'}, 200);
    }
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T12:36:36.773

[**演示**](http://jsfiddle.net/t7WMS/)

```
$("#store_header .right #nav ul li").hover(
    function() {
        $(this).animate({backgroundColor : '#0097d5'}, 200);
    }, function() {
        $(this).animate({backgroundColor : 'transparent'}, 200);
    }
); 
```

# eclipse - 如何在不重启的情况下运行 Google App Engine 服务器？

> ID：12235903
> 
> 赞同：0
> 
> 时间：2012-09-02T12:22:09.530
> 
> 标签：eclipse, google-app-engine

我正在使用带有eclipse的Google App Engine插件来创建一些Web应用程序，每次修改程序并运行它后，修改都不会立即生效。我必须杀死 javaw.exe 进程的一个（有时会错误地杀死 eclipse 程序）并重新运行。有时它会挂在“数据核增强器”上。

我知道这是因为新的 javaw.exe 在与前一个实例相同的端口上运行。但是每次都手动杀死之前的javaw.exe实例是没有意义的，很烦人。

我以为我可以保存源文件，它会自动部署到开发服务器，但事实并非如此。我该怎么做才能不必手动终止该进程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T03:47:11.593

如果您在调试模式下运行您的应用程序——也就是说，通过 Debug As > Web Application（而不是 Run As > Web Application）——它应该反映您对源的更改。（对于某些更改，它可能需要终止并重新启动服务器，在这种情况下它会通知您）。

# ruby-on-rails - 将当前用户添加到模型表

> ID：12235905
> 
> 赞同：0
> 
> 时间：2012-09-02T12:22:36.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

保存用户产品时如何将当前用户添加到 user_product 表。

我在网上查看了一些信息，表明我可以将参数传递给构建方法，但这不起作用。错误消息是“无法批量分配受保护的属性：user_id”

产品控制器：

定义新

```
@product = Product.new

@product.user_products.build(:user_id => current_user)

respond_to do |format|
  format.html # new.html.erb
  format.json { render json: @product }
end 
```

结尾

我的模型是：`Product`, `User`,`User_Product`

类产品 < ActiveRecord::Base

```
 attr_accessible :name, :issn, :category, :user_products_attributes

    validates_presence_of :name, :issn, :category
    validates_numericality_of :issn, :message => "has to be a number"

    has_many :user_products
    has_many :users, :through => :user_products

    accepts_nested_attributes_for :user_products

end

class UserProduct < ActiveRecord::Base

  attr_accessible :price

  validates_presence_of :price
  validates_numericality_of :price, :message => "has to be a number"

  belongs_to :user
  belongs_to :product

end

class user < ActiveRecord::Base

  # devise authentication here

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_many :user_products, :dependent => :destroy
  has_many :products, :through => :user_products

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:46:00.727

我建议如下：

```
Product
  has_many :preferences
  has_many :users, :through => preferences
  has_one :product_photo # if 1 per product

User
  has_many :preferences
  has_many :products, :through => :preferences

Preference
  belongs_to :user
  belongs_to :product

ProductPhoto
  belongs_to :product 
```

不管你做什么，确保你注意大写和复数，因为 rails 对此非常挑剔。如果您没有正确使用 rails 约定，则代码将无法正常工作（更糟糕的是，您将开始编写黑客来解决感知到的“问题”），例如 User_Product 应该是 UserProduct （或我的答案中的 Preference ）而不是 User_Product - 因为类定义模型名称（对它的引用使用小写和下划线）。

# vhdl - VHDL中的elseif和elsif有什么区别

> ID：12235907
> 
> 赞同：3
> 
> 时间：2012-09-02T12:22:39.157
> 
> 标签：vhdl, fpga, digital

目前，我一直在使用 Xilinix 参与 FPGA 设计技术。在解决设计问题时，我反复发现 if-chain 中的`elseif`and`elsif`几乎用于类似的语句。

```
elsif(clk'event and clk='1') then
                 pr_state<=nx_state; 
```

和

```
elseif S1=’0’ and  S0=’1’ then
     Z <= B; 
```

我的问题是——这两种结构有什么区别？它们相似吗？我浏览了 DL Perry 的 VHDL 书籍和其他在线 VHDL 教程网站，但找不到解决方案。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-03T06:45:13.773

正如您在此处看到的那样
[http://tams-www.informatik.uni-hamburg.de/vhdl/tools/grammar/vhdl93-bnf.html](http://tams-www.informatik.uni-hamburg.de/vhdl/tools/grammar/vhdl93-bnf.html)
**elseif**不是 vhdl 中的有效关键字。因此，如果它被认可，那么某些工具供应商想帮您一个忙……我猜您实际上看到**else if**，如上所述

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-02T14:03:22.417

看起来正确的语法是 elsif。在任何 VHDL 参考中都没有提到 elseif。 [http://www.eda.org/rassp/vhdl/guidelines/vhdlqrc.pdf](http://www.eda.org/rassp/vhdl/guidelines/vhdlqrc.pdf)
[http://webdocs.cs.ualberta.ca/~amaral/courses/329/labs/VHDL_Reference.html](http://webdocs.cs.ualberta.ca/~amaral/courses/329/labs/VHDL_Reference.html)
[http://www.lsi .die.upm.es/~angelfh/LCSE/docs/Synario_VHDL_Reference_Manual_1997.pdf](http://www.lsi.die.upm.es/~angelfh/LCSE/docs/Synario_VHDL_Reference_Manual_1997.pdf)

# nuget-package - VS2012 Express for web - FluentMigrator.Tools 1.0.3.0 - migrate.exe 在哪里？

> ID：12235909
> 
> 赞同：1
> 
> 时间：2012-09-02T12:22:44.840
> 
> 标签：nuget-package, fluent-migrator

我正在使用 VS Express for Web。我已将 FluentMigrator.Tools 1.0.3.0 添加到项目中。我应该在哪里看到 Migrate.exe？我一直在 bin/Debug 中寻找它（在我构建项目之后），但它无处可寻。

FluentMigrator.Tools 包中包含的其他 dll-s 也从项目的参考中丢失。

我错过了什么吗？我在哪里可以找到 migrate.exe？

好的，我知道我可以从 Nuget\Cache 获取它，但我怀疑这些工具将附加到我的项目中，构建后我可以在 bin/Debug 或 Release 文件夹中找到它们，我可以将它们发送出去与二进制文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:32:46.983

好的，没关系，我看到这些文件可以在`SolutionRoot\packages\FluentMigrator.Tools.`*版本*`\tools\...`文件夹下找到。

# php - 从 URL 获取路径的正则表达式

> ID：12235911
> 
> 赞同：-3
> 
> 时间：2012-09-02T12:22:53.557
> 
> 标签：php, regex

> **可能重复：**
> [如何获取 url 中的最后一个路径？](https://stackoverflow.com/questions/2273280/how-to-get-the-last-path-in-the-url)

我对正则表达式不是很好，因为我还没有理解它是如何充分发挥作用来获得正确的结果的。我需要一个正则表达式或 php 函数来去除 url 的开头以获取最后一位而没有变量。

**输入：** http://www.site.com/more/more/thepartidneed?part=Idontneed

**其他输入**：www.site.com/more/more/thepartineed?partidontneed

**其他输入**：site.com/more/more/partineed

**剥离后所需的结果**：“thepartineed”

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:33:47.597

首先，您需要检查给定的 URL 是否包含`http(s)://`在开头，如果没有 - 附加它然后执行

```
$parsed_url = parse_url($url);
var_dump($parsed_url); 
```

你会得到这样的东西：

```
array(3) {
  ["scheme"]=>
  string(4) "http"
  ["host"]=>
  string(8) "site.com"
  ["path"]=>
  string(20) "/more/more/partineed"
} 
```

如果你只需要最后一点路径，你可以做

```
echo array_pop(explode('/', $parsed_url['path'])); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:27:00.890

假设输入总是某种 url：

```
.+/([^?]+).* 
```

您的部分应在标识符 1 中

# javascript - Javascript链接使目标空白？

> ID：12235916
> 
> 赞同：2
> 
> 时间：2012-09-02T12:23:59.377
> 
> 标签：javascript

我制作了一个 Javascript 链接生成器...

```
document.write('http://imgur.com'.link('http://www.imgur.com')); 
```

我怎样才能让它在新窗口中打开链接目标，比如`target="blank"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:39:29.023

这是一个新的“链接构建器”，用于覆盖内置链接功能及其用法：

```
function mylink(url) {
  return "<a href=\"" + url + "\" target=\"_blank\">" + this + "</a>"
}

String.prototype.link = mylink
document.write('http://imgur.com'.link('http://www.imgur.com')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T12:37:09.173

您可以使用函数将链接添加到容器。例如：

```
<div id="container"></div> 
```

Javascript是：

```
addLink('value', 'http://jsfiddle.net');

function addLink(text, url){
    var mydiv = document.getElementById("container");
    var a = document.createElement('a');
    a.setAttribute('href',url);
    a.setAttribute('target','_blank');
    a.innerHTML = text;
    mydiv.appendChild(a);
} 
```

这是一个有效的 JSFiddle [JSFiddle](http://jsfiddle.net/tN7Kq/)

# asp.net-mvc - 为什么我的 MC3 Web 应用程序仅使用一种操作方法就可以完成两次操作？

> ID：12235917
> 
> 赞同：0
> 
> 时间：2012-09-02T12:24:06.193
> 
> 标签：asp.net-mvc, asp.net-mvc-3

当我与提琴手核对时，我可以看到以下内容。那立即出现在彼此之后。

```
GET /C01C/Page1?_=1346588295451 HTTP/1.1
GET /C01C/Page1?_=1346588295613 HTTP/1.1 
```

当我逐步调试时，它只会在我的剃刀页面的断点处停止一次。

但是我看到两个请求，并且 URL 后面有数字。有没有人有任何线索。我可以在提琴手和 IE 调试面板的网络选项卡中看到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T05:59:37.293

我现在意识到我正在使用 Ajax get 并且我已经设置了 ().on 事件。其中两个事件挂在同一个 ID 上，所以它被调用了两次。

# javascript - 如何使用 Knockout Mapping 插件映射到来自服务器对象的数组并进行一些计算？

> ID：12235920
> 
> 赞同：0
> 
> 时间：2012-09-02T12:24:15.757
> 
> 标签：javascript, knockout.js, knockout-mapping-plugin, computed-values

在 stackoverflow 中阅读这篇题为“如何使用模板中的 Knockout Mapping 插件映射到来自服务器对象的数组？”的交流。（抱歉，stackoverflow 限制了帖子的链接数量）我尝试使用答案（jsFiddle：http: [//jsfiddle.net/ueGAA/1](http://jsfiddle.net/ueGAA/1)）

所以练习是在 learn.knockoutjs.com 上制作名为“加载和保存数据”的 knockoutjs 教程的待办事项，但使用了敲除映射。

问题在于答案的视图模型声明类型，我喜欢，这里转换为待办事项：

```
var viewModel = 
{
    tasks : ko.mapping.fromJS(data),
    newTaskText: ko.observable(),
    incompleteTasks: ko.computed(function() {     
           return ko.utils.arrayFilter(this.tasks(), function(task) { return !task.isDone() });
    }),
    // Operations
    addTask:  function() {
        alert('Entering add task, count:' + this.tasks().length);
        this.tasks.push(new Task({ title: this.newTaskText() }));
        this.newTaskText("");
    },
    removeTask: function(task) { this.tasks.remove(task) }

} 
```

重点在这里：在 ko.computed() 的声明中，**这**是引用**window**。确实正常。如果我在 vewmodel 变量**之后**声明 ko.computed() ，可以获得正确的行为。

这边走：

```
viewModel.incompleteTasks=ko.computed(function() {
    return ko.utils.arrayFilter(viewModel.tasks(), function(task) { return !task.isDone() });
}); 
```

我不喜欢它，因为它在匿名函数中静态引用对象 viewModel。
问题是：如何在视图模型声明中以优雅的方式直接声明不完整任务？jsFiddle 在这里[http://jsfiddle.net/Yqg8e/](http://jsfiddle.net/Yqg8e/)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:29:00.360

从使用对象字面量切换到 ViewModel 的构造函数。

```
function ViewModel() {
    var self = this;

    self.tasks = ko.mapping.fromJS(data);
    self.newTaskText = ko.observable();
    self.incompleteTasks = ko.computed(function() {       
        return ko.utils.arrayFilter(self.tasks(), function(task) { 
            return !task.isDone()
        });
    });
    self.addTask = function() {
       alert('Entering add task, count:' + self.tasks().length);
       self.tasks.push(new Task({ title: self.newTaskText() }));
       self.newTaskText("");
    };
    self.removeTask = function(task) { self.tasks.remove(task) }
}

ko.applyBindings(new ViewModel());​ 
```

还要注意`var self = this;`which 的使用允许访问`this`上下文，即使在内部匿名函数中也是如此。

这种技术在 Knockout 文档的[Computed Observables](http://knockoutjs.com/documentation/computedObservables.html)部分中进行了描述（跳到标题为“**管理”**的部分）。

这是一个更新的小提琴：http: [//jsfiddle.net/Yqg8e/1/](http://jsfiddle.net/Yqg8e/1/)

# php - 使用带有附加关系交叉的 Sphinx 索引

> ID：12235928
> 
> 赞同：0
> 
> 时间：2012-09-02T12:25:29.297
> 
> 标签：php, mysql, full-text-search, sphinx

我正在通过一个数据库实现搜索，该数据库除了与其他过滤器交叉外，还涉及名称内部的文本搜索。Sphinx 似乎是比 MySQL 全文搜索更好的工具来解决文本搜索功能，但我不确定它是否能够在文本匹配字段之外进行交叉选择。它有这样的选择吗？MySQL Full-text 会更合适吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T11:14:18.173

它不支持这样的连接。因为 sphinx 存在于 mysql 之外 - 它是一个单独的系统。

但是狮身人面像索引本身，可以通过连接来构建，所以在创建索引时，你需要连接所有需要的表，将所有相关数据放入索引中。

基本上，您预先计算一个“无所不能”的索引，并根据需要进行过滤。（我们在技术上有时需要多个索引，但仅在高级情况下）

个人认为狮身人面像非常值得投资。让它运行起来需要一些工作，但它会在性能和灵活性方面得到回报。将能够查询，您现在甚至无法想象。（你能告诉我我是狮身人面像的狂热粉丝吗）

# css - 不同媒体查询中的不同 nth-child 属性

> ID：12235933
> 
> 赞同：1
> 
> 时间：2012-09-02T12:26:43.340
> 
> 标签：css, responsive-design, media-queries, css-selectors

我正在使用响应式设计，并且在我的 css 中有例如三个不同的媒体查询与列表项样式：

```
@media only screen and (min-width : 1350px) {
    li.item:nth-child(n+6) {
        border-top: 1px solid #d9ddd3;
    }
    h1 {
        color: red;
    }
}

@media only screen and (min-width : 1550px) {
    li.item:nth-child(n+7) {
        border-top: 1px solid #d9ddd3;
    }
    h1 {
        color: green;
    }
}

@media only screen and (min-width : 1750px) {
    li.item:nth-child(n+8) {
        border-top: 1px solid #d9ddd3;
    }
    h1 {
        color: blue;
    }
} 
```

所以从第 6/7/8 li 项目开始，我添加了一个顶部边框。问题是：

*   对于 1350 像素，我得到了 n+6
*   对于 1550 像素，我得到了 n+6
*   对于 1750 像素，我得到了 n+6

当我添加另一个较早的 nth-child 属性时，会为该 li 项目的每个即将到来的 nth-child 设置这个较早的属性。

我添加了用于测试更多其他样式，例如绿色、蓝色和红色标题，这些样式正在运行。

有什么问题？

最好的问候塞巴斯蒂安

**=> 解决方案**

好的，现在重置 previos nth-child 属性，如下所示：

```
li.item:nth-child(n+7) {
    border-top: 0;
}
li.item:nth-child(n+8) {
    border-top: 1px solid #d9ddd3;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T13:12:43.463

您只检查最小值，而不是最大值，因此会发生重叠。*（你的问题有点不清楚，不是问题吗？）*如果我对媒体查询的理解是正确的，那么你没有应该级联并替换现有规则的规则，正如我假设你的意图。

请尝试以下条件：

```
@media only screen and (min-width : 1350px) and (max-width : 1549px)
@media only screen and (min-width : 1550px) and (max-width : 1749px)
@media only screen and (min-width : 1750px) 
```

# c# - 将字符串转换为自定义枚举

> ID：12235934
> 
> 赞同：0
> 
> 时间：2012-09-02T12:26:47.957
> 
> 标签：c#, enums, windows-8, microsoft-metro, .net-4.5

我试图通过查看另一个对象中保存的字符串值来在自定义对象上设置自定义枚举属性，但我不断收到错误“无法通过表达式引用类型”。

到目前为止我已经尝试过

```
rec.Course  = (CourseEnum)Enum.Parse(typeof(CourseEnum), rr.course); 
```

其中 rec.Course 需要 CourseEnum 枚举的成员，而 rr.course 是一个字符串。

我还尝试执行一个 switch 语句，其中`rr.course`检查了 的值（它只能是某些值）但得到相同的结果

枚举定义如下：

```
public enum CourseEnum
    {
        [StringValue("Starters")]
        Starters,
        [StringValue("Main Course")]
        MainCourse,
        [StringValue("Desserts")]
        Desserts
    };

public class StringValue : System.Attribute
{
    private string _value;

    public StringValue(string value)
    {
        _value = value;
    }

    public string Value
    {
        get { return _value; }
    }

}

public static class StringEnum
{
    public static string GetStringValue(Enum value)
    {
        string output = null;
        Type type = value.GetType();

        //Check first in our cached results...

        //Look for our 'StringValueAttribute' 

        //in the field's custom attributes

        FieldInfo fi = type.GetRuntimeField(value.ToString());
        StringValue[] attrs =
           fi.GetCustomAttributes(typeof(StringValue),
                                   false) as StringValue[];
        if (attrs.Length > 0)
        {
            output = attrs[0].Value;
        }

        return output;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:13:46.810

我可以在您的代码中看到您`Enum.Parse`与 CourseEnum 一起使用，我认为应该是`recipeCourse`这样。

我在您的示例代码中找不到任何`CourseEnum`定义 4 的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T15:43:54.913

@Hans Kesting 说，答案就在这里：[为什么不能通过表达式引用类型？](https://stackoverflow.com/questions/8048159/why-can-not-reference-a-type-through-an-expression)

问题是使用具有枚举类型本身的枚举类型的字段。

# c# - 使用非法字符将 Web 文件保存到磁盘时进行编码

> ID：12235936
> 
> 赞同：1
> 
> 时间：2012-09-02T12:27:07.807
> 
> 标签：c#, file-io

我正在从网上下载文件并将其保存在磁盘上。这很容易，但是某些 Web 文件中包含在将文件保存到磁盘时不允许使用的字符。最值得注意的是，当我下载诸如**script.js?something=somethingelse之类的文件时**

我已经找到[了](https://stackoverflow.com/questions/146134/how-to-remove-illegal-characters-from-path-and-filenames)处理删除非法字符的帖子，但我不想这样做。我想以某种方式对文件名进行编码，这样当我从磁盘加载文件时，我可以对其进行解码，并且我将再次获得原始名称。

我发现[这个](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx#file_and_directory_names)页面描述了哪些字符是不允许的，但它有点模糊，因为它提到

> 目标文件系统不允许的任何其他字符。

到目前为止我想出的是`HttpUtility.UrlEncode`用于此，它似乎工作正常。我担心它不“正确”，并且在某些情况下会失败。那么有谁知道实现这一目标的“正确”方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:37:01.840

[HttpUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)对于大多数用途来说已经足够好了。您还有[System.Net.WebUtility.UrlEncode](http://msdn.microsoft.com/en-us/library/system.net.webutility.urlencode)和[UrlDecode](http://msdn.microsoft.com/en-us/library/system.net.webutility.urldecode)，它们的优点是不需要引用 System.Web 程序集（例如，不是紧凑框架的一部分），但它仅在 .Net 4.5 中可用。

但是，如果您担心安全性，请考虑 AntiXSS，它是[Microsoft Web Protection Library](http://wpl.codeplex.com/)的一部分。如果涵盖更多情况，例如转义数据以包含在 javascript 字符串中，以及白名单支持。

# c# - MSChart - 每个系列有两个值的堆积列

> ID：12235937
> 
> 赞同：-2
> 
> 时间：2012-09-02T12:27:10.313
> 
> 标签：c#, charts, mschart, stacked

是否可以在多系列柱形图中显示一个系列中的两个值

前任。我每个类别都有产品，每个产品都有两个价值，销售价值和购买价值

因此，如果我们针对 x 轴绘制类别，并将产品绘制为每个类别具有购买和销售价值的多个系列

类别=>产品（一对多）

一个产品可以属于一个或多个类别

这可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T19:11:38.570

一个系列可以有多个 y 值，例如 y1,y2 等

# c# - 侦听、检查和发送数据包 C#

> ID：12235938
> 
> 赞同：0
> 
> 时间：2012-09-02T12:27:13.050
> 
> 标签：c#, .net, sockets

我想制作一个应用程序，当播放器通过浏览器播放时，它会根据收到的数据包制作地图。所以用户需要设置代理127.0.0.1，但是我怎样才能监听并将数据包发送到站点呢？

它应该看起来像这样
Browser -> My app | 检查 | -> 发送到服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:29:49.143

您将需要创建一个侦听适当端口的应用程序，通常是 80 用于 HTTP，443 用于 SSL。你没有说你想对连接做什么或你想做什么级别的检查。您可以使用的最低级别的类是[System.Net.Sockets.Socket](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspx)类，它为您提供了最大的灵活性，但也提供了最多的工作量。

至少，您需要解析 HTTP 请求，进行任何检查，然后将请求路由到适当的服务器。HTTP 协议在[RFC 2616](https://www.rfc-editor.org/rfc/rfc2616)中定义，尽管有无数的扩展和可定制，尤其是在标头周围。

最后，您将浏览器配置为使用本地主机作为代理。

# ubuntu - 在 Ubuntu 上为 Pharo/Seaside 部署设置什么文件权限和所有者

> ID：12235939
> 
> 赞同：1
> 
> 时间：2012-09-02T12:27:28.737
> 
> 标签：ubuntu, deployment, permissions, pharo, seaside

**当我在 Ubuntu 上为VM**、**图像**和包含这些文件的**目录**部署 Pharo/Seaside 应用程序时，我设置了哪些所有者和权限？我还使用 Seaside Book 中描述的对象序列化作为持久性策略。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T23:31:23.467

这取决于您的设置如何。

我喜欢创建一个专门用于运行 Seaside 应用程序的用户（例如命名为“seaside”）。我将 VM 和映像安装在 seaside 主目录中并作为 seaside 运行。所以所有的所有权都是给“海边”用户的。

# google-drive-api - ResourceNotFoundException 但资源存在

> ID：12235941
> 
> 赞同：1
> 
> 时间：2012-09-02T12:28:05.227
> 
> 标签：google-drive-api

使用 api 时在 Google 驱动器文件上随机获取 ResourceNotFoundException。他们工作了好几天，一段时间后就拒绝通过 API 下载。我仍然可以从 UI 访问它们，并且所有权限设置都正常，但是 API 访问被破坏。有任何想法吗？

```
com.google.gdata.util.ResourceNotFoundException: OK
<!DOCTYPE html><html lang="en" ><head><meta name="description" content="Web word processing, presentations and spreadsheets"><link rel="shortcut icon" href="https://ssl.gstatic.com/docs/documents/images/kix-favicon5.ico"><title>Google Docs -- Page Not Found</title><link href="//fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" type="text/css"><style>/* Copyright 2012 Google Inc. All Rights Reserved. */
.goog-inline-block{position:relative;display:-moz-inline-box;display:inline-block}* html .goog-inline-block{display:inline}*:first-child+html .goog-inline-block{display:inline}#drive-logo{color:#91959c;font-family:"Open Sans",Arial,sans-serif;font-size:27px;font-weight:300;position:absolute;text-shadow:0 1px 1px white;white-space:nowrap}#drive-logo img{padding:0 0.4em 0 0;position:relative;top:2px;vertical-align:middle}#drive-logo a{color:#91959c;text-decoration:none}#drive-logo span.goog-inline-block{margin-top:3px;vertical-align:top}</style><style type="text/css">body {background-color: #fff; font-family: Arial,sans-serif; font-size: 13px; margin: 0; padding: 0;}a, a: link, a: visited {color: #112ABB;}</style><style type="text/css">.errorMessage {font-size: 12pt; font-weight: bold; line-height: 150%;}</style></head><body><div style="margin: auto; max-width: 750px;"><div style="margin: 80px 40px 20px 40px; position:relative; "><div style="position: absolute; top: -80px;"><h1 id="drive-logo"><a href="/"><img src="//www.google.com/images/logos/google_logo_41.png" width="116" height="41" alt="Google logo" ><span class="goog-inline-block">Drive</span></a></h1></div><div align="center"><p class="errorMessage" style="padding-top: 50px">Sorry, the page (or document) you have requested does not exist.</p><p>Make sure that you have the correct URL and that the owner of the document hasn&#39;t deleted it.</p><div style="background: #F0F6FF; border: 1px solid black; margin-top: 35px; padding: 10px 125px; width: 300px;"><p><strong>Want to create your own online docs?</strong></p><p>Google Docs makes it easy to create, store and share online documents, spreadsheets and presentations.</p><p>Learn more at <a href="https://docs.google.com">docs.google.com</a>.</p></div></div></div></div></body></html>

    at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:599)
    at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
    at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
    at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
    at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
    at com.google.gdata.client.media.MediaService.getMediaResource(MediaService.java:234)
    at com.google.gdata.client.media.MediaService.getMedia(MediaService.java:286)
    at com.google.gdata.client.media.MediaService.getMedia(MediaService.java:302) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T15:28:23.687

您似乎使用的是旧版 Gdata 库，而不是新版 Drive SDK。这并不是说它不应该工作，只是它不再是首选的 API。文档和工具更好地支持 Drive SDK。

您返回的是 HTML 页面而不是简单的 API 响应，这有点奇怪。你用的是什么网址？

# elasticsearch - GeoDistance 过滤器 ElasticSearch

> ID：12235947
> 
> 赞同：0
> 
> 时间：2012-09-02T12:28:33.527
> 
> 标签：elasticsearch

我正在使用带有[ElasticSearch的](http://www.elasticsearch.org)[地理距离过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/geo-distance-filter.html)。查询工作正常，但我想知道是否可以获得为每个文档计算的距离。例如，如果我将距离阈值设置为 100 公里，我想获取每个文档的距离：

**文档 1**：`24 km`<< 100 公里

**文档 2**：`12 km`<< 100 公里

...

**这可能吗？如何？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:40:13.467

是的，我相信这是可能的，但是当我尝试时，我无法让它工作（我正在使用轮胎，一个 RoR 宝石，所以你可能只使用 ElasticSearch 会有更好的运气）。

看看这个问题：[https ://github.com/karmi/tire/issues/169](https://github.com/karmi/tire/issues/169)

我`niuage`在那里问同样的问题。

首先，我认为你必须按距离排序。那么距离应该在`_score`场上，但由于某种原因，它不适合我。

我查看了文档，发现`track_scores`：

`When sorting on a field, scores are not computed. By setting track_scores to true, scores will still be computed and tracked.`

因此，您可能想尝试设置`track_scores`为 true，然后查看您的`_score`字段。

# c - C FAQ 中引用了哪些书籍？

> ID：12235948
> 
> 赞同：-2
> 
> 时间：2012-09-02T12:28:52.077
> 
> 标签：c

C FAQ 中引用了哪些书籍，例如本页底部的书籍[http://c-faq.com/expr/evalorder2.html](http://c-faq.com/expr/evalorder2.html)

```
K&R1
K&R2
ISO
H&S
CT&P
PCS 
```

我知道 K&R 指的是“Kernighan 和 Ritchie”的“The C Programming Language”。有人可以澄清其余的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T12:30:10.747

*   ANSI - 美国国家标准协会，美国国家信息系统标准--编程语言--C
*   CT&P Andrew Koenig，C 陷阱和陷阱
*   H&S Harbison and Steele, C：参考手册
*   ISO - 国际标准化组织，ISO 9899:1990
*   Knuth - Donald Knuth，计算机编程的艺术
*   PCS - Mark Horton，便携式 C 软件
*   基本原理 - 美国国家标准协会，美国国家信息系统标准的基本原理--编程语言--C

# jenkins - Sonar 异常无法创建 ClassLoader

> ID：12235958
> 
> 赞同：0
> 
> 时间：2012-09-02T12:29:54.867
> 
> 标签：jenkins, sonarqube, jenkins-plugins

我正在使用`Invoke Standalone Sonar Analysis`构建步骤从 Jenkins（Ant 作业，而不是 maven）运行 Sonar。我收到以下错误：

```
 15:46:46.369 INFO  .s.p.s.SquidExecutor - Java AST scan done: 33664 ms
    15:46:46.370 INFO  .s.p.s.SquidExecutor - Java bytecode scan...
    15:46:46.394 DEBUG b.ClassLoaderBuilder - ----- Classpath analyzed by Squid:
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/soap.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axis_1.4.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xerces.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/json_simple.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jdom.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xml-apis.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-fileupload-1.0.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/httpclient-cache-4.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/datedFileAppender-1.0.2.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xmlParserAPIs.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/httpclient-4.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axis_1.2.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jbossweb-2.1.7.GA.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-collections-2.1.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/nekohtml.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/excalibur-i18n-1.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jawc.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jmxremote.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/httpcore-4.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xmlparserv2.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/junit.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-cli-1.0.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axis-ant_1.2.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/rmissl.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/oc4j.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/slf4j-jdk14-1.6.1.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/servlet.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/trove.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-beanutils.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axiom-api-1.2.7.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-net-1.4.0.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/j2ee.jar
    15:46:46.394 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/httpunit.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-collections-2.1.1_LICENSE.txt
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-digester-1.8.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/log4j-1.2.8.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/velocity-1.4.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/wsdl4j.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/.project
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/.classpath
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jettison-1.0.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xercesImpl.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jmxtools.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/struts.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/eclipselink.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/ehcache-core-2.6.0.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/ojdbc6.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xmlplsql.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/snmp4j-1.10.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons_LICENSE.txt
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axis-ant_1.4.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-validator.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-dbcp.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axis2-kernel-1.4.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-discovery.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jgroups.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-services.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jaas.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-common.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xerces_LICENSE.txt
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-minimal.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/concurrent.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/resolver.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/geronimo-stax-api_1.0_spec-1.0.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jdbc2_0-stdext.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/saaj.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-logging.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/runtime12.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-system.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-codec-1.4.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jndi.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/translator.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-jmx.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jms.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jakarta-oro.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-serialization.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jsch-0.1.25.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/quartz-1.5.1_LICENSE.txt
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/castor-1.0.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/quartz-1.5.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/gnu-regexp-1.0.8.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/slf4j-api-1.6.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/axis2-json-1.4.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jmxri.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jglue_8_1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/aqapi.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/log4j-1.2.8_LICENSE.txt
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/quartz-oracle-1.5.1.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-pool.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-digester-1.8_LICENSE.txt
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jta.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/oro-2.0.8.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jaxrpc.jar
    15:46:46.395 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-lang.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-dbutils-1.1.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-common-jdbc-wrapper.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/xalan.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/ejb.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/commons-resources.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jboss-cache.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/nls_charset12.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - /export/home/jenkins/jenkins-ci/jobs/**********/workspace/server/third-party-jars/jmxremote_optional.jar
    15:46:46.396 DEBUG b.ClassLoaderBuilder - -----
    15:46:46.405 DEBUG b.b.JdbcDriverHolder - To prevent a memory leak, the JDBC Driver [oracle.jdbc.OracleDriver] has been forcibly deregistered
    15:46:46.424 DEBUG .b.b.TempDirectories - Delete temporary directory: /tmp/sonar-batch782561628528002755212032328414312003
    Total time: 1:15.256s
    Final Memory: 14M/207M
    Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: java.lang.IllegalStateException: Can not create ClassLoader
        at org.sonar.runner.Runner.delegateExecution(Runner.java:189)
        at org.sonar.runner.Runner.execute(Runner.java:78)
        at org.sonar.runner.Main.main(Main.java:61)
    Caused by: java.lang.IllegalStateException: Can not create ClassLoader
        at org.sonar.java.bytecode.ClassLoaderBuilder.create(ClassLoaderBuilder.java:62)
        at org.sonar.java.bytecode.BytecodeScanner.scan(BytecodeScanner.java:49)
        at org.sonar.plugins.squid.SquidExecutor.scanBytecode(SquidExecutor.java:183)
        at org.sonar.plugins.squid.SquidExecutor.scan(SquidExecutor.java:87)
        at org.sonar.plugins.squid.SquidSensor.analyzeMainSources(SquidSensor.java:82)
        at org.sonar.plugins.squid.SquidSensor.analyse(SquidSensor.java:65)
        at org.sonar.batch.phases.SensorsExecutor.execute(SensorsExecutor.java:64)
        at org.sonar.batch.phases.Phases.execute(Phases.java:93)
        at org.sonar.batch.bootstrap.ProjectModule.doStart(ProjectModule.java:139)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BatchModule.analyze(BatchModule.java:131)
        at org.sonar.batch.bootstrap.BatchModule.doStart(BatchModule.java:121)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.bootstrap.BootstrapModule.doStart(BootstrapModule.java:121)
        at org.sonar.batch.bootstrap.Module.start(Module.java:83)
        at org.sonar.batch.Batch.execute(Batch.java:104)
        at org.sonar.runner.Launcher.executeBatch(Launcher.java:65)
        at org.sonar.runner.Launcher.execute(Launcher.java:58)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.sonar.runner.Runner.delegateExecution(Runner.java:186)
        ... 2 more
    Caused by: java.util.zip.ZipException: error in opening zip file
        at java.util.zip.ZipFile.open(Native Method)
        at java.util.zip.ZipFile.<init>(ZipFile.java:114)
        at java.util.jar.JarFile.<init>(JarFile.java:135)
        at java.util.jar.JarFile.<init>(JarFile.java:99)
        at org.sonar.java.bytecode.loader.JarLoader.<init>(JarLoader.java:46)
        at org.sonar.java.bytecode.loader.SquidClassLoader.<init>(SquidClassLoader.java:48)
        at org.sonar.java.bytecode.ClassLoaderBuilder.create(ClassLoaderBuilder.java:60)
        ... 24 more
    Build step 'Invoke Standalone Sonar Analysis' marked build as failure
    Finished: FAILURE 
```

这并没有给我太多关于这个问题的信息，但它似乎与我通过属性传递给 Sonar 的第三方罐子有关`libraries`。

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T18:56:30.200

构建日志不完整，所以我看不到您使用的是哪个版本的 Sonar 服务器和正在运行的 Sonar....

分析 Java 堆栈跟踪始终是最好的起点。以下消息指出 Sonar 正在尝试读取无效的 zip 文件（BTW Jars 是 zip 档案）

```
Caused by: java.util.zip.ZipException: error in opening zip file 
```

该消息进一步说明了 Sonar 在遇到此问题时正在做什么：

```
Caused by: java.lang.IllegalStateException: Can not create ClassLoader 
```

最后，异常消息的开头指示了哪一行代码引发了异常：

```
Exception in thread "main" org.sonar.batch.bootstrapper.BootstrapException: java.lang.IllegalStateException: Can not create ClassLoader
    at org.sonar.runner.Runner.delegateExecution(Runner.java:189) 
```

这使我们能够深入研究代码：

*   [这里](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.sonar-plugins/sonar-runner/1.3/org/sonar/runner/Runner.java#189)
*   [这里](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.sonar.plugins/sonar-squid-java-plugin/3.1/org/sonar/java/bytecode/ClassLoaderBuilder.java#60)
*   [和这里](http://grepcode.com/file/repo1.maven.org/maven2/org.codehaus.sonar.plugins/sonar-squid-java-plugin/3.1/org/sonar/java/bytecode/loader/SquidClassLoader.java#SquidClassLoader)

在我看来，Sonar 加载的文件之一是无效的，可能只是从 Sonar 服务器下载了部分文件（Sonar 管理它自己的依赖项）。

此诊断与以下调试消息一致：

```
15:46:46.405 DEBUG b.b.JdbcDriverHolder - To prevent a memory leak, the JDBC Driver [oracle.jdbc.OracleDriver] has been forcibly deregistered
15:46:46.424 DEBUG .b.b.TempDirectories - Delete temporary directory: /tmp/sonar-batch782561628528002755212032328414312003 
```

我建议遵循建议并删除此临时目录。我会更进一步，下载 Sonar 通常在本地工作区创建的隐藏“.sonar”目录，迫使 Sonar 下载所有文件的新副本。

然后尝试重新分析，希望问题不再发生。

# search - 如果搜索参数为空或缺失/错误，如何使用 Xpath 函数“contains()”不返回任何内容？

> ID：12235963
> 
> 赞同：6
> 
> 时间：2012-09-02T12:30:25.087
> 
> 标签：search, xpath, include, match, contains

我正在尝试编写可以从“搜索”节点读取信息并使用它执行搜索的 Xpath 语句 (1.0)。

我取得了一些不错的进展，但偶然发现了一个问题，即如果属性（用于搜索中的值）为空或不存在，则会失败。

**编辑代码以简化示例：**

所以这是我的示例 XML：

```
<xml>
    <files>
        <file name="foo" description="" rating="4"/>
        <file name="food" description="" rating="4"/>
        <file name="foobar" description="" rating="3"/>
        <file name="bar" description="" rating="3"/>
        <file name="barter" description="" rating="3"/>
        <file name="barterer" description="" rating="2"/>
    </files>
    <searches>
        <search id="1">
            <exclude>
                <file term="foo"/>
            </exclude>
        </search>
    </searches>
</xml> 
```

和工作 XPATH：

```
//files/file[
            not(contains(@name, //search[@id='1']/exclude/file/@term))
] 
```

它按预期工作......

但是，如果预期的属性丢失或为空，它将无法工作。我认为因为： contains(@attrib, "") 出于某种原因匹配所有内容，因此如果属性为 "" 或不存在，则 not() 将始终不匹配任何内容。

例如，如果我将 XML 的排除片段更改为此它会失败：

```
 <exclude>
                <file term=""/>
            </exclude> 
```

也有这个：

```
 <exclude></exclude> 
```

有没有办法检查空值而不执行选择？或者是否有更好的方式来构建逻辑。请记住，我不能在 Xpath2.0 中使用 Conditionals 或其他函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T16:43:35.610

> 如果 Xpath 函数 contains() 搜索参数为空或缺失，为什么它会返回所有内容？

**因为这就是 XPath 规范所说的[contains()](http://www.w3.org/TR/xpath-functions/#func-contains)函数应该做的事情：**

> 如果 $arg2 的值是零长度字符串，则函数返回 true。

您可以调整您的 XPath 并使用以下内容简化一些条件：

```
//files/file[
            (  
                (
                    not(//search[@id='1']/include/file/@term)
                    or
                    (
                    contains(@name, //search[@id='1']/include/file/@term) 
                    or
                    contains(@description, //search[@id='1']/include/file/@term) 
                    ) 
                )
                or
                contains(@rating, //search[@id='1']/include/file/@rating)   
            )    
            and 
            ( 
                 (
                    not(//search[@id='1']/exclude/file/@term)
                    or
                    (
                    not(contains(@name, //search[@id='1']/exclude/file/@term)) 
                    and
                    not(contains(@description, //search[@id='1']/exclude/file/@term))
                    )
                )
                and
                (
                    not(//search[@id='1']/exclude/file/@rating)
                    or
                    not(contains(@rating, //search[@id='1']/exclude/file/@rating))
                )
            )

            ] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T02:11:11.770

也许你想说类似

```
//files/file[
   not(contains(@name, 
                //search[@id='1']
                /exclude/file/@term))
   or not(
     normalize-string(//search[@id='1']
                      /exclude/file/@term)
   )
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-24T16:43:57.467

所以我在另一篇文章中偶然发现了答案。下面是它工作的一个例子。谢谢大家的建议。

```
//files/file[
    not(
        contains(
            @name,
            concat( //search[@id='1']/exclude/file/@term,
                substring('??', 1 + 2*
                    boolean( substring( //search[@id='1']/exclude/file/@term, 1 ) )
                )
            )
        )
    )
] 
```

我放置“？？”的位置 可能想用无效的字符或其他东西替换。对于使用的每个附加字符，1+ 需要增加。对我来说，我正在检查文件名，所以问号似乎是个好主意。老实说，我可能不会使用这条路线，毕竟我只是渴望解决这个问题。

这是我得到这个想法的地方： [如果 XPATH 中不存在节点，如何返回常量？](https://stackoverflow.com/questions/12249440/how-to-give-back-constant-if-node-does-not-exist-in-xpath)

# matlab - 同时将绘图属性应用于所有 MATLAB 子图

> ID：12235964
> 
> 赞同：8
> 
> 时间：2012-09-02T12:30:34.367
> 
> 标签：matlab, plot, vectorization, subplot

我想创建一个图形，一旦创建了子图，我想同时将属性应用于所有这些，而无需通过 for 循环。事实上，我想在不需要通过 for 循环的情况下执行以下所有操作：

*   创建没有 for 循环的所有子图。（例如，创建一个带有 4x5 子图的图形，而不是使用 for 循环）。
*   将相同的背景颜色应用于每个带有 oa 循环的子图。
*   将相同的轴命令应用于所有这些 w/oa for-loop。（如轴相等，轴紧等）。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-02T13:12:16.673

最方便的方法是创建一个坐标区句柄数组，然后设置属性：

```
for i=1:4,
   axesHandles(i) = subplot(2,2,i);
   plot(...)
end

%# set background to black for all handles in the array
%# note that this needs no loop
set(axesHandles,'color','k') 
```

如果您没有收集坐标区句柄，则需要先收集句柄数组。为此，您可以使用图形窗口的子属性（`gcf`获取当前活动图形的句柄）

```
axesHandles = get(gcf,'children'); 
```

如果您有多个图形的坐标轴，您可以使用它`findall`来收集所有内容：

```
axesHandles = findall(0,'type','axes'); 
```

从那时起，它又是一个单一的呼叫`set`， 或`axis`， 例如

```
set(axesHandles,'color','k','lineWidth',2)
axis(axesHandles,'tight') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-02T12:37:19.287

我不明白为什么你认为那个`for`循环是邪恶的，但无论如何......

这是您问题的第 2 部分和第 3 部分的答案，假设轴句柄保存在数组中：

```
 a(1) = axes();
   a(2) = axes();
   arrayfun( @(x)(set(x,'Color','r')),a);
   arrayfun( @(x)(axis(x,'equal')),a); 
```

`arrayfun`对 .中的每个元素应用一个函数`a`。在这种情况下，匿名函数只是用以下方式编写它的快捷方式：

```
 a(1) = axes();
   a(2) = axes();
   arrayfun( @SetRedColor ,a);
   arrayfun( @SetAxisEqual,a);

   function SetRedColor(x)
       set(x,'Color','r');
   end

   function SetAxisEqual(x)
       axis(x,'equal');
   end 
```

另一种可能的方法是链接轴，并仅设置一个属性：

```
 linkprop(a,'Color');
   set(a(1),'Color','r'); %#Now a(2) color is also red 
```

# java - 如何在每个 Swing 页面上包含相同的 JPanel

> ID：12235965
> 
> 赞同：-4
> 
> 时间：2012-09-02T12:30:43.257
> 
> 标签：java, swing, jpanel, code-reuse

如何在每个使用 Java 的 Java Swing 页面上包含一个标准的按钮面板（例如在每个页面顶部的“打印”、“新建”等）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:44:54.550

使用[`JToolBar`](http://docs.oracle.com/javase/tutorial/uiswing/components/toolbar.html)并向其添加按钮。

```
JToolBar jToolBar = new JToolBar();
JButton jButtonFileOpen = new JButton();
jToolBar.add(jButtonFileOpen); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T12:34:59.703

1.  创建一个扩展 JPanel 的类，将按钮放入其中并声明它们的标准行为。
2.  在您创建的每个“您想要的相似类”中扩展此类。

# c# - "await" 不等待调用完成

> ID：12235967
> 
> 赞同：28
> 
> 时间：2012-09-02T12:31:07.553
> 
> 标签：c#, asynchronous, .net-4.5

我正在构建一个 Metro 应用程序。

在 MainPage.xaml.cs 中，我将 Album 实例化如下：

```
Album album = new Album(2012);  //With the album ID as its parameter.
ListView1.ItemsSource = album.Songs; 
```

在 Album.cs 中，构造函数如下：

```
public Album(int ID)
{
    this.ID = ID;
    Initialize();  //Serves as a wrapper because I have to call httpClient.GetStreamAsync() and "async" doesn't work for the constructor.
} 
```

最后，初始化方法：

```
private async void Initialize()
{
    //...some code...
    HttpClient cli = new HttpClient();
    Stream SourceStream = await HttpClient.GetStreamAsync("http://contoso.com");
    //...some code...
    this.Songs = Parse(SourceStream);
} 
```

问题是当它运行到 GetStreamAsync 时，它会`ListView1.ItemsSource = album.Songs`直接将专辑.Songs 设为 null。

有什么快速解决这个问题的方法吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-02T12:35:27.477

是的。`async`和的全部意义`await`在于你*不会*阻塞。相反，如果您正在“等待”一个尚未完成的操作，则会安排一个延续来执行异步方法的其余部分，并将控制权返回给调用者。

现在因为你的方法有一个类型`void`，你甚至无法知道它什么时候完成 - 如果你返回`Task`（这不需要对方法的主体进行任何更改），你至少能够解决它已经结束。

目前还不清楚您的代码是什么样的，但从根本上说，您应该只在初始化完成`ItemsSource` *后尝试设置。*您可能也应该将`MainPage`代码放在异步方法中，如下所示：

```
Album album = new Album(2012);
ListView1.ItemsSource = await album.GetSongsAsync(); 
```

您的`GetSongs()`电话将是：

```
private async Task<List<Song>> GetSongsAsync()
{
    //...some code...
    HttpClient cli = new HttpClient();
    Stream SourceStream = await HttpClient.GetStreamAsync("http://contoso.com");
    //...some code...
    return Parse(SourceStream);
} 
```

这意味着`Songs`将不再是其`Album`自身的属性，尽管如果您愿意，您可以将其添加到缓存中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-02T12:34:25.127

使`Songs`财产归还`Task<List<Song>>`并等待`ListView1.ItemsSource = await album.Songs;`

# java - 找不到类“com.mchange.v2.c3p0.ComboPooledDataSource”

> ID：12235969
> 
> 赞同：4
> 
> 时间：2012-09-02T12:31:16.023
> 
> 标签：java, spring-mvc, sts-springsourcetoolsuite

当我收到错误消息时，我应该在哪里指示类依赖关系：

*   *找不到类“com.mchange.v2.c3p0.ComboPooledDataSource”*
*   *找不到类“org.springframework.jdbc.datasource.DataSourceTransactionManager”*

**jdbc-context.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:p="http://www.springframework.org/schema/p"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:property-placeholder location="/WEB-INF/spring.properties" />

    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
        destroy-method="close"
        p:driverClass="${jdbc.driverClassName}"
        p:jdbcUrl="${jdbc.url}"
        p:user="${jdbc.username}"
        p:password="${jdbc.password}"
        p:acquireIncrement="5"
        p:idleConnectionTestPeriod="60"
        p:maxPoolSize="100"
        p:maxStatements="50"
        p:minPoolSize="10" />

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager" p:dataSource-ref="dataSource" />
</beans> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T12:55:32.550

首先，我建议使用相同版本的命名空间。在您的情况下，请使用 2.5 或 3.0。甚至是[当前版本](http://www.springframework.org/schema/) 但不要在同一个项目中使用不同的版本。

关于你的第一个问题：

> 找不到类“com.mchange.v2.c3p0.ComboPooledDataSource”

你是否包含在你的类路径'c3p0-0.9.1.2.jar'中？

在第二种情况下，您应该根据您决定使用的 Spring 版本将“spring-jdbc-xxjar”包含到类路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-27T06:21:51.573

```
Class 'com.mchange.v2.c3p0.ComboPooledDataSource' not found 
```

我通过将文件复制到由谷歌搜索创建的`c3p0-0.9.1.2.jar`文件来解决此错误`WEB-INF/lib folder.c3p0-0.9.1.2.jar`

# mysql - sql查询包含或喜欢单个单词的工作和用户配置文件技能

> ID：12235977
> 
> 赞同：0
> 
> 时间：2012-09-02T12:33:43.950
> 
> 标签：mysql, sql

我有两张桌子

`profile_table`和`jobs_table`

**profile_table**

```
---
pid | name | skill

1   | john | .net, ssrs, report

2   | kyle | java, struts

3   | milo | php, apache 
```

**工作表**

```
---
jid | title             | required_skill

11  | java developer    | java, struts, j2ee, hibernate

12  | web developer     | php, mysql, linux, 

13  | .net developer    | .net, wpf

14  | .net lead         | .net, visual studio, C# 
```

现在，我怎样才能将 john 技能与工作 required_skill 相匹配

我曾尝试将 john 技能作为整个字符串并`LIKE`在 mysql 中搜索，但整个结果是一个字符串，所以它只是搜索`skill`并非所有技能`required_skill`

而我想要实现包含任何`skill`in `required_skill`.

我曾尝试使用`explode`和分离代码并将其存储在一个数组中，但我只想在服务器端的数据库中执行以降低速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T13:01:19.350

一种更简洁的方法是规范化您的数据库，这样您就不会在`required_skill`列中存储超过一条信息。

从现有表中删除`skill`和列。`required_skill`

添加一个`skill_table`（我正在使用您的命名约定；我只是称之为`Skill`）：

```
sid | SkillName             

1   | java
2   | struts
3   | J2EE
4   | .net 
5   | hibernate
6   | SSRS
7   | php
8   | apache
9   | report
etc... 
```

然后再创建两个 2 列表 - 一个连接`profiles`到同一个表`skill`，另一个连接`jobs`到同一个`skill`表：

**profile_skill**

```
pid | sid             

1   | 4
1   | 6
1   | 9
2   | 1  
2   | 2
3   | 7  
3   | 8 
```

**工作技能**

```
jid | sid             

11   | 1
11   | 2
11   | 3
11   | 5  
etc... 
```

`

现在您可以编写一个查询来提取匹配项 - 加入`profiles`via`jobs`或`skills`反之亦然。

# javascript - 移动 Safari 通知

> ID：12235982
> 
> 赞同：2
> 
> 时间：2012-09-02T12:34:26.420
> 
> 标签：javascript, html, mobile-safari

我有一个 html5/JavaScript 应用程序。我想在倒数计时器用完时通知用户。

问题是移动Safari。看起来（除非我是本地应用程序）我。

*   无法自行播放声音（显然移动 Safari 需要在用户操作时播放声音（我猜是为了防止不必要的带宽消耗）
*   无法振动手机（window.navigator.mozVibrate(pattern) 似乎不起作用）
*   无法用某些颜色闪烁屏幕，因为屏幕通常会在 30 秒后熄灭（如果它在移动 Safari 中关闭，我也无法告诉屏幕打开）
*   无法向自己发送通知

哎呀，在不强迫用户下载本机应用程序的情况下，我能做些什么吗？看手机的任何类型的提示或指示？

# node.js - 在 ubuntu 上安装 towerjs 时遇到问题

> ID：12235983
> 
> 赞同：1
> 
> 时间：2012-09-02T12:34:41.680
> 
> 标签：node.js, npm, towerjs

当 towerjs 安装后脚本运行时，我不断收到此错误

```
npm ERR! Error: EACCES, open '/home/claire/.npm/e18f6569-thub-com-viatropos-coffeecup-git.lock' 
```

我试过 sudo 和 -g 但我认为这是因为安装后脚本不包含 sudo。我可以自己安装咖啡杯，但塔式安装失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T16:48:59.570

登录以`root`正确完成安装。

对于 Ubuntu：

1.  `root`如果尚未定义，请设置密码：

    ```
    sudo passwd 
    ```

2.  将用户更改为`root`

    ```
    su 
    ```

3.  安装`tower`

    ```
    npm install tower -g 
    ```

这种方式对我有用。

**注意**`root`：如果您将用户更改为with`sudo -s`命令，则不起作用。仅适用于`su`.

# objective-c - XCode 4.4.1 和 iOS 4.2 设备方向问题

> ID：12235990
> 
> 赞同：0
> 
> 时间：2012-09-02T12:35:51.623
> 
> 标签：objective-c, ios, xcode, orientation

我知道这已被问过很多次，但仍然无法正常工作。

我希望我的应用程序仅在横向模式下可用，在我的 XCode 项目的 GUI 部分中，我已取消选择两种纵向模式，并且只有两种横向模式处于活动状态。我检查了我的 plist，在 Supported Orientations 下只有两个横向的。

但是，当我在运行 4.2 固件的 iPod 上运行我的应用程序时，我可以将我的应用程序旋转到纵向模式。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T13:23:40.677

有人发布了一个完全错误的答案：P 现在已被删除，但它确实帮助我找到了正确的答案；我更换了：

```
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown); 
```

在我的 ViewController.m 中：

```
return (interfaceOrientation == UIInterfaceOrientationLandscapeRight || interfaceOrientation == UIInterfaceOrientationLandscapeLeft); 
```

所以感谢删帖的发帖人！它帮助我找到了正确的答案。

# android - 如何将文本视图拆分为多行并将每一行设置为不同的样式

> ID：12235992
> 
> 赞同：-1
> 
> 时间：2012-09-02T12:36:25.563
> 
> 标签：android

是否可以将 textView 拆分为多行并为每一行设置样式？

例如，我想在 textview 中有：

" **Row1** //颜色黑色和粗体

Row2 //不同的字体和颜色"

这是我的布局 xml

```
 <?xml version="1.0" encoding="utf-8"?>
  <LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="horizontal"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#FFFFFF">
  <TextView
    android:id="@+id/name"
    android:text="Name"
    android:paddingLeft="10dip"
    android:layout_weight="0.5"
    android:layout_gravity="center"
    android:layout_width="wrap_content"
      android:layout_height="wrap_content"
    android:textColor="#000000" />
  </LinearLayout> 
```

我正在设置文本视图的文本：

```
 textView.setText("Row1 /n Row2"); 
```

是否可以在 textView 中添加表格并更改每一行的样式？

我怎样才能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T12:43:02.330

您可以使用`Html.fromhtml()`为文本添加不同的颜色和字体，并在 TextView 中添加另一行，只需使用“\n”

例子：`textview.setText("text1"+"\n"+"text2")`

Html.fromhtml() 的示例：`text.setText(Html.fromHtml("<font color='#ff0000'>text</font>"));`

# vbscript - 使用 vbscript 扫描文件夹并仅列出图像文件

> ID：12235993
> 
> 赞同：0
> 
> 时间：2012-09-02T12:36:32.850
> 
> 标签：vbscript

我正在尝试使脚本扫描文件夹并仅列出 jpg、png、gif 等图像文件。这是代码

```
Dim fso, ObjFolder, ObjOutFile, ObjFiles, ObjFile, outputFile, inputFileList
Const ForReading = 1, ForWriting = 2, ForAppending = 8, CreateIfNeeded = true

inputFileList = "list.txt"
outputFile = "C:\Users\Susan\Documents\iMacros\Macros\WindowsFiles.txt"
Set fso = CreateObject("Scripting.FileSystemObject")
Set objTextFile = fso.OpenTextFile(inputFileList, ForReading)

Do Until objTextFile.AtEndOfStream
 sFolderName = objTextFile.Readline
 wscript.Echo "writing contents of " & sFolderName
 writefilenames(sFolderName)
Loop

function writefilenames(sFolderName)
  Set ObjFolder = fso.GetFolder(sFolderName)

  If fso.FileExists(outputFile) Then
    Set ObjOutFile = fso.OpenTextFile(outputFile, ForAppending)
  Else
    Set ObjOutFile = fso.OpenTextFile(outputFile, ForWriting, CreateIfNeeded)
  End If

  Set ObjFiles = ObjFolder.Files

  For Each ObjFile In ObjFiles
    ObjOutFile.WriteLine(ObjFile.Path)
  Next

  ObjOutFile.Close
end function 
```

谁能给我正确的代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T13:08:47.500

`ObjOutFile.WriteLine(ObjFile.Path)`仅当`ObjFile`具有匹配的扩展名时才执行该命令。

```
Set extensions = CreateObject("Scripting.Dictionary")
extensions.CompareMode = 1 ' make lookups case-insensitive
extensions.Add "jpg", True
extensions.Add "png", True
extensions.Add "gif", True

'...

For Each ObjFile In ObjFiles
  If extensions.Exists(fso.GetExtensionName(ObjFile)) Then
    ObjOutFile.WriteLine(ObjFile.Path)
  End If
Next 
```

请不要[传播](http://www.visualbasicscript.com/fb.ashx?m=99277)您的问题。对你寻求帮助的人不是很有礼貌。