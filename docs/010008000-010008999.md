# StackOverflow 问答 10008000-10008999

# asp.net - 将网站移动到新服务器后无法加载视图状态错误

> ID：10008013
> 
> 赞同：0
> 
> 时间：2012-04-04T09:02:07.960
> 
> 标签：asp.net, iis

我真的不知道从哪里开始。我正进入（状态：

```
`Failed to load viewstate.  The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request.  For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request.` 
```

将网站移至新服务器后。完全相同的代码适用于我的另一台服务器。当我提交我的一份表单时会发生这种情况（但并非对所有表单提交都这样做）。

有什么想法会导致这种情况，所以我有地方可以看吗？

使用：ASP.NET 2。

编辑：我在运行时动态地将一些用户控件添加到占位符中，但是相同的代码在我的其他服务器上运行正常。在添加新控件之前，我曾尝试清除占位符中的控件（因为我看到了一篇关于此的帖子），但它没有帮助。

EDIT2：似乎回发只是失败了。它也没有进入按钮的 onClick 代码，所以有些东西肯定很奇怪。特定的错误。

EDIT3：好的，我想我可能对正在发生的事情有所了解。出于某种原因，旧服务器上的表单操作是`default.aspx?action=amend`，但新服务器正在显示`amend.html?action=amend`，所以我认为重写模块在 IIS 中搞砸了。这也可以解释控制添加问题，因为该操作发生了 2 次（我认为）。我将查看 Rewrite 模块，看看是否有任何问题，然后发回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:48:33.087

请看看这些文章：

[http://blog.typps.com/2008/01/failed-to-load-viewstate-typical.html](http://blog.typps.com/2008/01/failed-to-load-viewstate-typical.html)

[http://weblogs.asp.net/guys/archive/2004/12/05/275321.aspx](http://weblogs.asp.net/guys/archive/2004/12/05/275321.aspx)

或者尝试一个简单的临时解决方案 - 禁用此占位符的视图状态。无论哪种方式，我都很困惑为什么它实际上可以在您的第一台服务器上运行。如果其他人能够更多地澄清这个问题，我会很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:35:30.897

事实证明，该服务器上表单的回发网址是错误的（目前不知道为什么，我会在知道时更新）。这导致以意外方式添加动态控件并导致错误。当我设法发布我的表单并且内容没有更新时，我注意到了这一点。我使用 firebug 手动调整了操作 url，一切都很好。

值得一看 walther 关于动态控件和视图状态的答案。

不知道是什么原因造成的，但我现在在页面加载中手动设置表单操作，它似乎已经解决了这个问题。

# windows - 如何在不发生临时中断的情况下扩展我的 Azure 应用程序？

> ID：10008016
> 
> 赞同：2
> 
> 时间：2012-04-04T09:02:10.957
> 
> 标签：windows, api, azure, azure-web-roles

我正在使用 Windows Azure 管理 API 来扩展我的 Azure Web 角色。在某个时候，我有一个实例，并决定要从一个实例转到两个实例。我发送一个 HTTP POST 请求到

```
https://management.core.windows.net:443/<my-subscription-id>/services/hostedservices/<my-service-name>/deployments/<my-deployment-name>/?comp=config 
```

使用 XML 指定与当前部署相同的配置，并且实例计数设置为 2。调用成功，更改开始。现在大约 30 秒，Web 角色将不接受 HTTP 调用 - 调用者将获得

```
10061 connection refused 
```

在浏览器中。这意味着该角色不服务于客户端请求。那是个问题。

如何扩展 Web 角色，使其始终服务于客户端请求？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T10:14:37.600

根据[SLA](http://www.windowsazure.com/en-us/support/sla/)（服务水平协议 - 计算）：

> 我们保证，当您在不同的故障和升级域中部署**两个或更多角色实例**时，您面向 Internet 的角色将在至少 99.95% 的时间内具有外部连接。

这意味着 SLA 不支持拥有一个实例，因此您可能（或将会）有停机时间。如果从 2 或更多缩放，或从更多到 2，则不会出现任何中断。

[这篇博客文章](http://blog.toddysm.com/2010/04/upgrade-domains-and-fault-domains-in-windows-azure.html)概述了关于故障和升级域的一个很好的解释。毕竟，扩展意味着“升级”——您正在更改配置，这种配置更改需要通过所有角色和实例传播。在没有停机时间的情况下（当前）唯一的方法是拥有至少两个实例，每个实例都位于不同的域中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:20:46.470

请注意，当您有 2 个或更多实例时，您在修改服务配置时可能仍会遇到中断（例如使用服务管理 API 更改实例数量）。任何配置更改都会触发您的实例重启。

为防止这种情况发生，您需要在 WebRole.cs/WorkerRole.cs 中实现以下代码（因此，当您更改实例数量时不会出现中断）：

```
public override bool OnStart()
{
    RoleEnvironment.Changing += RoleEnvironmentChanging;
    return base.OnStart();
}

private void RoleEnvironmentChanging(object sender, RoleEnvironmentChangingEventArgs e)
{
    if (e.Changes.Any(change => change is RoleEnvironmentConfigurationSettingChange))
    {
        e.Cancel = false;
    }
} 
```

**编辑：**请参阅下面的 astaykov 评论。

# java - 我将如何以编程方式在 JTable 中存储和应用选择

> ID：10008019
> 
> 赞同：1
> 
> 时间：2012-04-04T09:02:27.673
> 
> 标签：java, jtable

我有一个程序可以创建一个巨大的 jtable 并启用 CellSelection 以复制到剪贴板。我还有一个复制完整表格的操作。

它通过以下方式做到这一点：

```
correspondentTable.selectAll();
// then copy
correspondentTable.clearSelection(); 
```

如果在此操作之后恢复“复杂”选择，那就太好了。

到目前为止，我发现`table.changeselection(row, col, toggle, extend)`但我想知道是否有一种“更优雅”的方式来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:33:39.077

如果您正在寻找单个单元格，您可以遍历表格单元格并使用`isCellSelected`. 实际上，我认为没有比这更“优雅”的解决方案了。

应该可以限制您需要检查的范围：

用于`getSelectedRow()`获取最小索引，`getSelectedRows()`获取所有索引。列也有类似的功能。

您将这些值存储在某处并用于`changeSelection`恢复选择。

编辑：您可以获得存储选择值的列模型 ( `getColumnModel()`) 和选择模型 ( )。`getSelectionModel()`如果您可以复制它们，您可以在之后重新应用这些值。

# c# - 如何从 JS 访问 ViewBag

> ID：10008023
> 
> 赞同：35
> 
> 时间：2012-04-04T09:02:32.627
> 
> 标签：c#, javascript, asp.net, asp.net-mvc-3, viewbag

我尝试的方法。

通过浏览器查看 JS，`@ViewBag.CC`只是空白......（缺失）

```
 var c = "#" + "@ViewBag.CC";
        var d = $("#" + "@ViewBag.CC").value;
        var e = $("#" + "@ViewBag.CC").val();

        var c = "@ViewBag.CC";
        var d = $("@ViewBag.CC").value;
        var e = $("@ViewBag.CC").val(); 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-04-04T09:06:33.983

如果您使用的是剃须刀引擎模板，请执行以下操作

在你看来写：

```
<script> var myJsVariable = '@ViewBag.MyVariable' </script> 
```

**更新：** 更合适的方法是在主布局上定义一组配置，例如基本 url、facebook API 密钥、Amazon S3 基本 URL 等......```

```
<head>
 <script>
   var AppConfig = @Html.Raw(Json.Encode(new {
    baseUrl: Url.Content("~"),
    fbApi: "get it from db",
    awsUrl: "get it from db"
   }));
 </script>
</head> 
```

您可以在 JavaScript 代码中使用它，如下所示：

```
<script>
  myProduct.fullUrl = AppConfig.awsUrl + myProduct.path;
  alert(myProduct.fullUrl);
</script> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-04T09:08:55.540

尝试： `var cc = @Html.Raw(Json.Encode(ViewBag.CC)`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-04T09:06:14.843

```
<script type="text/javascript">
      $(document).ready(function() {
                showWarning('@ViewBag.Message');
      });

</script> 
```

您可以像这样在 javascript 中使用 ViewBag.PropertyName。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-04T09:04:26.243

`ViewBag`是**服务器端**代码。
`Javascript`是**客户端**代码。

你无法**真正**连接它们。

你可以这样做：

```
var x = $('#' + '@(ViewBag.CC)').val(); 
```

但它会在服务器上被解析，所以你并没有真正连接它们。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-01-10T12:10:55.600

您可以通过执行以下操作来实现解决方案：

**JavaScript：**

```
var myValue = document.getElementById("@(ViewBag.CC)").value; 
```

或者如果你想使用`jQuery`，那么：

**jQuery**

```
var myValue = $('#' + '@(ViewBag.CC)').val(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-20T20:37:44.643

现有的解决方案都不适合我。这是我发现确实有效的另一个解决方案：

控制器：

```
TempData["SuccessMessage"] = "your message here"; 
```

看法：

```
let msg = '@TempData["SuccessMessage"]'; 
```

# java - java - 如何从Java中的文本文件中跳过某些行？

> ID：10008026
> 
> 赞同：13
> 
> 时间：2012-04-04T09:02:48.793
> 
> 标签：java, io, out-of-memory

我目前正在学习 Java，我遇到了这个问题，我想加载一个包含大量行的文件（我正在逐行读取文件），我想做的是跳过某些行（伪代码）。

```
the line thats starts with (specific word such as "ABC") 
```

我试过用

```
if(line.startwith("abc")) 
```

但这没有用。我不确定我是否做错了，这就是为什么我在这里寻求帮助，在加载功能的一部分下方：

```
public String loadfile(.........){

//here goes the variables 

try {

        File data= new File(dataFile);
        if (data.exists()) {
            br = new BufferedReader(new FileReader(dataFile));
            while ((thisLine = br.readLine()) != null) {                        
                if (thisLine.length() > 0) {
                    tmpLine = thisLine.toString();
                    tmpLine2 = tmpLine.split(......);
                    [...] 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T09:07:49.560

尝试

```
if (line.toUpperCase().startsWith(­"ABC")){
    //skip line
} else {
    //do something
} 
```

这将`line`使用函数将 转换为所有大写字符，`toUpperCase()` 并检查字符串是否以 . 开头`ABC`。

如果是，`true`那么它将什么也不做（跳过行）并进入该`else`部分。

您还可以使用[Apache Commons](http://commons.apache.org/)`startsWithIgnoreCase`提供的功能。它接受两个字符串参数。

```
public static boolean startsWithIgnoreCase(String str,
                                           String prefix) 
```

此函数返回布尔值。并检查字符串是否以指定的前缀开头。

如果字符串以前缀开头，则返回 true，不区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:17:36.863

如果情况不重要，请尝试使用`StringUtils.startsWithIgnoreCase(String str, String prefix)`Apache [Commons](http://commons.apache.org/)

```
This function return boolean. 
```

[在此处查看 javadoc](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html#startsWithIgnoreCase%28java.lang.String,%20java.lang.String%29)

用法：

```
if (StringUtils.startsWithIgnoreCase(­line, "abc")){
    //skip line
} else {
    //do something
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:46:04.030

如果您有一个大的输入文件，您的代码将创建一个`OutOfMemoryError`. 如果不编辑代码，您将无能为力（如果文件变大，添加更多内存将失败）。

我相信您将选定的行存储在内存中。如果文件变得更大（2GB 左右），您将拥有 4GB 的内存。（旧值`String`和新值）。

你必须使用流来解决这个问题。

创建一个`FileOutpuStream`，并将选定的行写入该 Stream。

你的方法必须改变。对于大输入，您不能返回字符串：

```
public String loadfile(...){ 
```

您可以返回一个`Stream`或一个文件。

```
public MyDeletingLineBufferedReader loadFile(...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:09:34.967

**您可以使用：**

```
BufferedReader br = new BufferedReader(new FileReader("file.txt"));
    String lineString;
    try{
    while((lineString = br.readLine()) != null) {
        if (lineString.toUpperCase().startsWith(­"abc")){
            //skip
            } else {
            //do something
            }
        }
     } 
```

***或者***

`static boolean startsWithIgnoreCase(String str, String prefix)`*org.apache.commons.lang.StringUtils*中的方法，如下所示。

```
BufferedReader br = new BufferedReader(new FileReader("file.txt"));
       String lineString;
        try{
            while((lineString = br.readLine()) != null) {
               if (StringUtils.startsWithIgnoreCase(­lineString, "abc")){
                //skip
                } else {
                //do something
                }
              }
           } 
```

# java - 元素 XMLFileDefinition 在类型为coldfusion.xml.XmlNodeList 的Java 对象中未定义

> ID：10008029
> 
> 赞同：0
> 
> 时间：2012-04-04T09:03:09.300
> 
> 标签：java, xml, coldfusion

这是一个简化的示例，它会创建与我要修复的错误相同的错误。

```
<cfscript>
    private xml function getBaseRequest() {
        // Set up the root xml element
        var xmlReturn = XmlNew(true);
        xmlReturn.xmlRoot = xmlElemNew(xmlReturn,'testbase');

        // Attach a child with generic name
        ArrayAppend(xmlReturn['testbase'].XmlChildren,xmlElemNew(xmlReturn,'thisworks'));

            // Add a child to that
            ArrayAppend(xmlReturn['testbase']['thisworks'].XmlChildren,xmlElemNew(xmlReturn,'attachme'));

        // Now attach a child with node name 'XMLFileDefinition'
        ArrayAppend(xmlReturn['testbase'].XmlChildren,xmlElemNew(xmlReturn,'XMLFileDefinition'));

            // And attempt to add a child to that
            // produces error "Element XMLFileDefinition is undefined in a Java object of type class coldfusion.xml.XmlNodeList"
            ArrayAppend(xmlReturn['testbase']['XMLFileDefinition'].XmlChildren,xmlElemNew(xmlReturn,'thisbreaks'));

        return xmlReturn;
    }
</cfscript> 
```

为了澄清，在标记为错误的行之前转储出的 XML 如下所示

```
<?xml version="1.0" encoding="UTF-8"?>
<testbase>
    <thisworks>
        <attachme/>
    </thisworks>
    <XMLFileDefinition/>
</testbase> 
```

不幸的是，根据第三方提供的模式，此 XML 是必需的，因此我们不能将节点重命名为更适合 ColdFusion 的东西。

**更新**这似乎与节点名称上的“XML”前缀有关。任何以“XML”为前缀的节点似乎都会导致此问题。我添加了我的答案，详细说明了我是如何解决这个问题的，但是希望有人能想出一个更优雅/通用的解决方案，因为我的有一些潜在的陷阱。

CF/Java 版本如下：

*   ColdFusion 版本：9,0,1,274733
*   Java 版本：14.3-b01

我也尝试过更新，这仍然发生在以下版本上

*   ColdFusion 版本：9,0,1,274733（累积修补程序 2）
*   Java版本：1.7.0_03

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:20:32.360

经过进一步调查，我确定此问题是由尝试访问名称与 REGEX 'xml.*' 匹配的 XML 节点引起的（即无论如何都以字母 xml 开头。）尽管我无法确定具体的解释会假设这与 Xml.... 用于引用 XmlAttributes/XmlChildren/XmlText 等的键有关

我最终用来解决这个问题的方法如下（截断示例）

```
var xmlReturn = XmlNew(true);
var nodeBody = xmlElemNew(xmlReturn,'RootElement');
xmlReturn.xmlRoot = nodeBody;

var nodeXMLDefinition = xmlElemNew(xmlReturn,'XMLFileDefinition');
    ArrayAppend(nodeXMLDefinition.XmlChildren, xmlElemNew(xmlReturn,'SomeChildElement'));
ArrayAppend(nodeBody.XmlChildren,nodeXMLDefinition); 
```

# c++ - 根据条件分配数组大小

> ID：10008036
> 
> 赞同：0
> 
> 时间：2012-04-04T09:03:32.563
> 
> 标签：c++, arrays, visual-c++

我正在尝试根据条件分配一个无符号短数组。我遇到的问题如下（根据下面的代码）：

错误 C2057：预期常量表达式
错误 C2466：无法分配具有常量大小 0 的数组
错误 C2133：“数据包”：未知大小

```
unsigned int length=4;
if(...)
{
    length = 8;
}
else if(...)
{
    length = 6;
}
else
{
    length = 4;
}

unsigned short packet[length/2]; 
```

我尝试做一些恶作剧，例如在数组声明之前添加它并将其用于数组大小，但它没有解决问题：

```
const unsigned int halfLength=length/2; 
```

我不能使用向量来替换我的数组。你有什么主意吗 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T09:04:17.600

是的，动态分配的数组：

```
unsigned short* packet = new unsigned short[length/2]; 
```

您不能在运行时指定自动存储分配数组的大小。

您还必须自己释放内存：

```
delete[] packet; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:14:57.600

我会把它带到一个班级以避免内存泄漏：

```
template <class T1> class array
{
public:
  array( size_t size )
    : addr(0)
  {
    if ( size > 0 )
      this->addr = new T1[size];
  };
  ~array( void )
  {
    if ( this->addr != 0 )
    {
      delete [] this->addr;
      this->addr = 0;
    }
  };
  T1 & operator[]( size_t index )
  {
    return this->addr[index];
  };
  bool empty( void ) { return (this->addr != 0); };
private:
  T1 * addr;
};

array<unsigned short> packet(length/2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:18:23.307

C 样式数组中的元素数量必须是 C++ 中的整数常量表达式。（C90 在这里对非常量表达式有一些支持，但我不熟悉它。）显而易见的答案是 `std::vector`，但你说你不能使用它。如果是这种情况，您可能也不能使用动态分配；否则， `new unsigned short[length / 2]`可以使用`delete[]`指针和`std::vector`本地。

如果您的代码提取不是太简化：为什么不保留最大长度，例如：

```
unsigned short packet[8 / 2]; 
```

在您的示例中，最大`length`的是 8，并且始终保留 8 不会导致任何问题。（显然，如果实际`length` 值可能因来自外部函数等的值而变化更大，这可能不是一个现实的解决方案。但如果是......为什么可以做简单的事情却做复杂的事情？）

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-04T09:15:29.690

对于 c 程序员：

```
//length value is dynamically assigned
int length=10;

//runtime allocation
unsigned short * f = (unsigned short *) malloc (length/2 * sizeof(unsigned short));

//use the vector
f[0]=1;

...

//free the memory once the program does not need more
free(f);
f=NULL; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-04-04T09:06:15.417

您不能动态分配数组的大小。您可以使用指针来分配数组的动态大小。

```
int * t = malloc(a * sizeof(int)) 
```

# servicestack - 我必须做什么才能将 Facebook 身份验证与 ServiceStack 结合使用？

> ID：10008045
> 
> 赞同：2
> 
> 时间：2012-04-04T09:04:10.450
> 
> 标签：servicestack

我是 OAuth 和 ServiceStack 的新手，所以我一直在阅读与 FacebookAuthProvider 相关的 ServiceStack 的源代码。似乎在 web.config 中添加 oauth.facebook.AppId 和 oauth.facebook.AppSecret 的密钥应该可以解决问题。

然后我尝试在 /api/auth/facebook 上做一个 GET 并从 facebook 得到一个错误页面。有什么我想念的吗？

# javascript - 验证文本输入并在输入长度为 5 个字符时输出“完成”div

> ID：10008046
> 
> 赞同：0
> 
> 时间：2012-04-04T09:04:14.610
> 
> 标签：javascript, jquery, html

我已经用 javascript 编写了这段代码，但是我必须使用 JQuery 使它工作，我已经包含了 javascript 函数和 jquery 尝试，但是我无法弄清楚我的 jquery 尝试有什么问题，有人可以帮助我吗？

Javascript工作：

```
function done()
{
    var valid = document.getElementById("text2").value.length;
    if (valid > 5)
    {
        document.getElementById('one').innerHTML += "<div class='done rotateone wiggler'></div>";
        document.getElementById('one').className += "grey";
    } 
```

jQuery尝试：

```
$(document).ready(function(){
    //Validates the title field is at least 5 characters long.
    $("#text2").done(function(){
        var value = $(this).val();
        if (value.length >= 5)
        {
            $("#one").append("<div class='done'></div>");
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:08:11.357

您可以使用您的`done()`功能，只需添加小的更改以适应 jQuery

```
function done()
{
    var valid = $("#text2").val().length;
    if (valid > 5)
    {
        $('#one').append("<div class='done'></div>");
        $('#one').addClass("grey");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:29:21.487

看起来您想立即执行您的功能？（查看编辑以了解我添加`.blur()`事件处理程序的原因）好吧，这就是我的做法：

```
$(document).ready(function() {
    $('#text2').blur(function() { // Listen to the "onblur" event on the element
        if (this.value.length > 5) { // No need for jQuery there
            $('#one')
                .append('<div class="done"></div>')
                .addClass('grey')
        }
    })
}) 
```

看看我如何通过在单个元素上链接函数来仅使用对 DOM 的一次调用？这是实用和有效的。

顺便说一句，由于许多原因（包括[性能](http://jsperf.com/fragment-vs-appendchild-vs-innerhtml/6)），innerHTML 不好，更喜欢`.append()`在 jQuery 和`.appendChild()`javascript 中。

编辑：看起来你希望它在`onblur`事件中激活。我编辑了我的代码。

# mongodb - 是否需要从客户端访问 mongodb 主节点？

> ID：10008047
> 
> 赞同：0
> 
> 时间：2012-04-04T09:04:15.293
> 
> 标签：mongodb, replication, master-slave

在 MongoDB 副本集中，是否需要从客户端访问主节点？或者辅助节点会将写入查询重定向到主节点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:20:31.543

您的所有节点都必须可以从客户端访问。这样，如果主服务器出现故障并且辅助服务器升级为主服务器，您的应用程序将继续工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:05:08.697

辅助节点不会将写入请求代理到主节点。要执行写入，您需要直接连接到主节点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T19:23:16.417

上述答案并非 100% 正确。

1）如果您处于分片环境中，则客户端需要能够与 mongos 进程通信，然后该进程与 PRIMARY 节点（和配置服务器）进行通信，可能存在应用程序服务器与 PRIMARY mongodb 分离的情况副本集中的服务器，但它们能够与 mongos 进程通信，然后该进程能够与 PRIMARY mongodb 服务器通信。

2）另一位用户指出，“您的所有节点都必须可以从客户端访问”，但通常情况并非总是如此，在您在单独的数据中心中有延迟辅助节点的情况下，只有副本集的成员需要能够与之通信延迟的次级；但是，应用程序服务器永远不需要与它通信。

# javascript - 从生日获取年龄

> ID：10008050
> 
> 赞同：22
> 
> 时间：2012-04-04T09:04:18.787
> 
> 标签：javascript, jquery, date

> **可能重复：**
> [在 JavaScript 中计算年龄](https://stackoverflow.com/questions/4060004/calculate-age-in-javascript)

在我的 JS 代码的某些点中，我有 jquery 日期对象，它是人的出生日期。我想根据他的出生日期计算一个人的年龄。

任何人都可以提供如何实现这一目标的示例代码。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-04T09:09:00.967

试试这个功能...

```
function calculate_age(birth_month,birth_day,birth_year)
{
    today_date = new Date();
    today_year = today_date.getFullYear();
    today_month = today_date.getMonth();
    today_day = today_date.getDate();
    age = today_year - birth_year;

    if ( today_month < (birth_month - 1))
    {
        age--;
    }
    if (((birth_month - 1) == today_month) && (today_day < birth_day))
    {
        age--;
    }
    return age;
} 
```

或者

```
function getAge(dateString) 
{
    var today = new Date();
    var birthDate = new Date(dateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) 
    {
        age--;
    }
    return age;
} 
```

[**见演示。**][1][1]：http://jsfiddle.net/mkginfo/LXEHp/7/

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-04T09:12:51.203

[提琴手](http://jsfiddle.net/Mikey/xHTPL/)

您可以使用日期进行计算。

```
var birthdate = new Date("1990/1/1");
var cur = new Date();
var diff = cur-birthdate; // This is the difference in milliseconds
var age = Math.floor(diff/31557600000); // Divide by 1000*60*60*24*365.25 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-04T09:19:54.050

```
function getAge(birthday) {
    var today = new Date();
    var thisYear = 0;
    if (today.getMonth() < birthday.getMonth()) {
        thisYear = 1;
    } else if ((today.getMonth() == birthday.getMonth()) && today.getDate() < birthday.getDate()) {
        thisYear = 1;
    }
    var age = today.getFullYear() - birthday.getFullYear() - thisYear;
    return age;
} 
```

[JSFiddle](http://jsfiddle.net/fragmentedreality/MfBdg/)

# android - Android - 滑动手势出现问题

> ID：10008053
> 
> 赞同：5
> 
> 时间：2012-04-04T09:04:25.183
> 
> 标签：android, gesture, swipe, onfling

我正在尝试在我的应用程序中实现滑动手势。我已经编写了几乎所有代码，但它不起作用。

这是我的活动中的代码：

```
// Swipe detector
gestureDetector = new GestureDetector(new SwipeGesture(this));
gestureListener = new OnTouchListener() {
    public boolean onTouch(View v, MotionEvent event)
    {
        Log.e("", "It works");
        return gestureDetector.onTouchEvent(event);
    }
};

LinearLayout root = (LinearLayout) findViewById(R.id.rules_root);
root.setOnTouchListener(gestureListener); 
```

当我触摸屏幕时，logcat 显示`it works`.

这是我的课程代码`SwipeGesture`：

```
public class SwipeGesture extends SimpleOnGestureListener
{
    private static final int SWIPE_MIN_DISTANCE = 120;
    private static final int SWIPE_MAX_OFF_PATH = 250;
    private static final int SWIPE_THRESHOLD_VELOCITY = 200;

    private Activity activity;

    public SwipeGesture(Activity activity)
    {
        super();
        this.activity = activity;
    }

    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
    {
        Log.e("", "Here I am");
        try
        {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH) return false;
            if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
            {
                if ( ((TabActivity) activity.getParent()).getTabHost() != null )
                {
                    TabHost th = ((TabActivity) activity.getParent()).getTabHost();
                    th.setCurrentTab(th.getCurrentTab() - 1);
                }
                else
                {
                    activity.finish();
                }
                Log.e("", "Swipe left");
            }
            else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY)
            {
                if ( ((TabActivity) activity.getParent()).getTabHost() != null )
                {
                    TabHost th = ((TabActivity) activity.getParent()).getTabHost();
                    th.setCurrentTab(th.getCurrentTab() + 1);
                }
                Log.e("", "Swipe right");
            }
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
        return false;
    }
} 
```

该行`Log.e("", "Here I am");`从不显示。所以我认为永远不会调用 onFling 方法。

关于为什么这不起作用的任何想法？

谢谢。

问候。

五。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T09:39:03.210

在您的 SimpleOnGestureListener 中，覆盖 onDown 以注册您的手势。它可以只返回true，但必须像这样定义..

```
@Override
    public boolean onDown(MotionEvent e) {
            return true;
    } 
```

....[查看此链接..以及答案下方的评论..](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T09:37:30.793

你需要改变一些东西，这里有一个例子。

**设置您的 OnTouchListener**：

```
root.setOnTouchListener(new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return false;
                }
                return false;
            }
        }); 
```

**SwipeGesture 类**：

```
class SwipeGesture extends SimpleOnGestureListener {
    @Override
    public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX,
            float velocityY) {

        try {
            if (Math.abs(e1.getY() - e2.getY()) > SWIPE_MAX_OFF_PATH)
                return false;
            if (e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
//Do something

                return true;
            } else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE
                    && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
//Do something
                return true;

            }

        } catch (Exception e) {
            Log.e("Fling", "There was an error processing the Fling event:"
                    + e.getMessage());
        }
        return true;
    }

    // Necessary for the onFling event to register
    @Override
    public boolean onDown(MotionEvent e) {
        return true;
    }
} 
```

看起来你在 之间滑动`Tabs`。使用`Fragments`and`ViewPager`对您的用户来说更容易、更流畅。

# cakephp - CakePHP 1.3 DebugKit - 为特定用户设置调试级别

> ID：10008059
> 
> 赞同：2
> 
> 时间：2012-04-04T09:04:37.387
> 
> 标签：cakephp, cakephp-1.3

我想将特定用户的调试级别设置为 2。如果我使用 app_controller.php 来显示 DebugKit 不会显示，只有当我在 core.php 中设置它但我只想为一个特定的登录时这样做用户。

最好的方法是什么？

* * *

**更新：** 这是我在 app_controller.php 的 beforeFilter 函数中所做的（没有用）：

```
if($this->Auth->user('id') == 1)
        Configure::write('debug', 2); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:25:05.110

你是如何做到这一点的？

通常我会这样做并且`beforeFilter`工作`AppController`正常。

```
if (...) {
    Configure::write('debug', 2);
} 
```

**更新**

```
function beforeFilter() {
    if ($this->Auth->user('id') == 1) {
        Configure::write('debug', 2);
        $this->components[] = 'DebugKit.Toolbar';
    }
} 
```

# regex - 将正则表达式匹配到第一个空格

> ID：10008064
> 
> 赞同：4
> 
> 时间：2012-04-04T09:05:05.683
> 
> 标签：regex

我必须填充商店的图像并获得格式为图像的文件夹，`BRL0368 Side.jpg`例如`5510 Dura Guard Carpet.jpg`.

现在我想做的是把所有这些都砍下来，这样我就可以尝试在 excel 中匹配零件编号，例如`"BRL0368.jpg"`，`"5510.jpg"`

我有一个叫做正则表达式重命名器的东西，它接受一个正则表达式匹配和一个替换值 - 并将通过文件夹等递归并批量重命名。

不幸的是，目前我对正则表达式没有太多经验，所以对我来说有点困惑——我尝试了很多不同的选择，但运气不佳。

我怎么说抓住第一部分（字母和数字）到第一个空格并转储其余部分？

这就是我一直在尝试的`([^\s]+)`- 我也尝试过`\w`等等。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T09:15:58.390

它可能取决于使用的语言，但这应该有效：

```
/^[^\s]+/ 
```

要捕获第一个单词和最后一个单词（扩展名），您可以使用以下表达式：

```
/(^[^\s]+).*?(\.\w+)$/ 
```

这是一个 javascript 演示来清除问题：http: [//jsfiddle.net/eDB2z/1/](http://jsfiddle.net/eDB2z/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:09:23.190

这就是你需要的： `\w*(?= )`

# cookies - cookie 中的每一行代表什么

> ID：10008066
> 
> 赞同：0
> 
> 时间：2012-04-04T09:05:14.123
> 
> 标签：cookies

我花了很多时间试图弄清楚 cookie 中的每一行代表什么，并且在我的一生中，我找不到任何描述客户端上 cookie 物理结构的东西。

鉴于这个例子......

```
nanme
value
localhost/
1024
1985341056
30290189
4263017152
30216763
* 
```

我知道第一行是 cookie 的名称，第二行是相同的值。第三行代表域。

第 4 行似乎通常包含值 1600 或 1024，尽管它确实有其他值。我不知道这实际上代表什么。

第 5 行完全是个谜。

我认为第 6 行是到期日期。

第 7 行，再次，不知道。

我想第 8 行可能是 MAX AGE？

第 9 行显然是分隔符。

请问有大人可以帮我补一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:30:22.520

假设这些是 Internet Explorer cookie，格式如下：

*   姓名
*   价值
*   小路
*   标志（可选）
*   到期时间（低）
*   到期时间（高）
*   创建时间（低）
*   创建时间（高）
*   分隔符（用于分隔单个文件中的多个 cookie 条目）

过期和创建时间采用 FILETIME 格式。[您可以在此处](http://support.microsoft.com/kb/188768)找到有关 FILETIME 格式的信息。最重要的是：

> FILETIME 结构表示自 1601 年 1 月 1 日以来的 100 纳秒间隔数。该结构由两个 32 位值组成，它们组合形成一个 64 位值。

# mysql - 优化mysql中的队列

> ID：10008067
> 
> 赞同：2
> 
> 时间：2012-04-04T09:05:17.387
> 
> 标签：mysql, queue

我正在构建一个遍历 twitterusers 的脚本，分析他们的推文的语言，如果找到正确的语言，所有的朋友和追随者都会被添加到队列中。依次从队列中挑选这些用户，并一次又一次地执行该过程。为了保持数据库快速，我对用户在队列中可以拥有的所有不同状态使用同一个表（“要分析语言”= 1，“要获取”= 2，“进行中”= 9， “完成”= 99 和“阻塞”= -1）。这样我就可以将所有朋友/追随者添加到表中，而不必检查该人是否已经存在于表中（每个 Twitter 用户当然应该只分析一次）。

```
INSERT IGNORE INTO queue (tid,queuetype) VALUES (1,1),(2,1) ... (xxx,1); 
```

这是相当快的。但是随着表的增长（几百万行）从队列中选择下一个用户，它变得越来越慢。

现在，我是这样做的（$uniqueid 实际上是进程号）：

```
UPDATE queue SET k='$uniqueid', queuetype = '9' WHERE k='0' AND queuetype = '1' LIMIT 1 
```

其次是：

```
SELECT tid FROM queue WHERE k='$uniqueid' LIMIT 1 
```

然后我做了所有的魔法，最后将队列类型更改为新的队列类型（完成、阻塞等）。

解决方案能否进一步优化？“SELECT tid”非常慢，需要几秒钟才能运行。如果我给 k 添加一个索引，选择会变得更快，但更新会变得很慢，结果更糟。

如何进一步优化这类队列？我应该考虑不同的设计吗？不同的数据库？欢迎所有解决方案:)

[编辑]

引擎是Myisam

解释队列

```
 tid    int(11) NO  PRI     
 queuetype  tinyint(1)  NO          
 k  mediumint(6) unsigned   NO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:32:03.437

我建议，如果您想要快速`INSERT`的性能并且只想搜索完全匹配的内容，那么您需要一个散列索引。但是仔细阅读[此处](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)的文档，我了解到散列索引仅适用于 NDB 存储引擎。

我对那个存储引擎一无所知，所以会犹豫推荐它，但如果不是太不方便的话，它可能值得一试。

另请参见[此处](http://dev.mysql.com/doc/refman/5.1/en/mysql-cluster.html)。

# xml - 如何使用 XSLT 组合复杂的 XML 元素

> ID：10008069
> 
> 赞同：2
> 
> 时间：2012-04-04T09:05:26.923
> 
> 标签：xml, xslt

我有以下输入 XML：

```
<root age="1">
<description>some text</description>
<section>
    <item name="a">
        <uuid>1</uuid>
    <item>
</section>
<section>
    <item name="b">
        <uuid>2</uuid>
    <item>
</section>
</root> 
```

我想将其转换为以下 XML：

```
<root age="1">
<description>some text</description>
<section>
    <item name="a">
        <uuid>1</uuid>
    <item>
    <item name="b">
        <uuid>2</uuid>
    <item>
</section>
</root> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:59:50.797

**一个更简单和更短的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="section[1]">
   <section>
     <xsl:apply-templates select="../section/node()"/>
   </section>
 </xsl:template>

 <xsl:template match="section[position() > 1]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<root age="1">
    <description>some text</description>
    <section>
        <item name="a">
            <uuid>1</uuid>
        </item>
    </section>
    <section>
        <item name="b">
            <uuid>2</uuid>
        </item>
    </section>
</root> 
```

**产生了想要的正确结果：**

```
<root age="1">
   <description>some text</description>
   <section>
      <item name="a">
         <uuid>1</uuid>
      </item>
      <item name="b">
         <uuid>2</uuid>
      </item>
   </section>
</root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:47:31.077

这是我的 xslt-1.0 尝试：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="*">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="root">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates select="*[name() != 'section']"/>
      <xsl:element name="section">
        <xsl:apply-templates select="section"/>
      </xsl:element>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="section">
    <xsl:apply-templates select="*"/>
  </xsl:template>

</xsl:stylesheet> 
```

# camera - USB 摄像头协议

> ID：10008073
> 
> 赞同：2
> 
> 时间：2012-04-04T09:05:48.703
> 
> 标签：camera, embedded, usb, webcam

我想将 USB 摄像头连接到嵌入式设备。我的设备操作系统是嵌入式 Linux 并支持 USB 主机。我可以轻松地读取和写入 USB 端口，但我不知道如何从相机捕获图像。我可以捕获图像的 USB 相机是否有任何标准协议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:21:55.347

大多数支持此功能的相机都使用[图片传输协议 (PTP)](http://en.wikipedia.org/wiki/Picture_Transfer_Protocol)。在 Linux 中，许多相机都通过[libgphoto2](http://gphoto.org/proj/libgphoto2/support.php)支持这一点。

您可以使用以下方式列出连接的设备：

```
 CameraList      *xlist = NULL;

    ret = gp_list_new (&xlist);
    if (ret < GP_OK) goto out;
    if (!portinfolist) {
        /* Load all the port drivers we have... */
        ret = gp_port_info_list_new (&portinfolist);
        if (ret < GP_OK) goto out;
        ret = gp_port_info_list_load (portinfolist);
        if (ret < 0) goto out;
        ret = gp_port_info_list_count (portinfolist);
        if (ret < 0) goto out;
    }
    /* Load all the camera drivers we have... */
    ret = gp_abilities_list_new (&abilities);
    if (ret < GP_OK) goto out;
    ret = gp_abilities_list_load (abilities, context);
    if (ret < GP_OK) goto out;

    /* ... and autodetect the currently attached cameras. */
    ret = gp_abilities_list_detect (abilities, portinfolist, xlist, context);
    if (ret < GP_OK) goto out;

    /* Filter out the "usb:" entry */
        ret = gp_list_count (xlist);
    if (ret < GP_OK) goto out;
    for (i=0;i<ret;i++) {
        const char *name, *value;

        gp_list_get_name (xlist, i, &name);
        gp_list_get_value (xlist, i, &value);
        if (!strcmp ("usb:",value)) continue;
        gp_list_append (list, name, value);
    }
out:
    gp_list_free (xlist);
    return gp_list_count(list); 
```

（取自 libgphoto2-2.4.11/examples/autodetect.c）

# spring-mvc - 带有@RequestParam 的标头方法

> ID：10008076
> 
> 赞同：0
> 
> 时间：2012-04-04T09:06:07.770
> 
> 标签：spring-mvc

我的简单表格。

```
<form action="<c:url value="/my/url/upload" />" method="post" enctype="multipart/form-data">
    <input type="file" name="fileupload" />
    <input type="submit" value="Subir" />
</form> 
```

如果我有下一个标头方法成功调用该方法。

```
 @PreAuthorize("hasRole('ROLE_USER')")
    @RequestMapping("my/url/upload")
    public String uploadFile(Model model, HttpServletRequest request) {
...
} 
```

但是，如果我有这个头方法，服务器调用返回 400 HTTP 错误。

```
 @PreAuthorize("hasRole('ROLE_USER')")
    @RequestMapping("my/url/upload")
    public String uploadFile(@RequestParam("fileupload") MultipartFile fileupload, Model model, HttpServletRequest request) {
...
} 
```

为什么？，解决方案？

# eclipse - Eclipse 'Git Repository' 透视图与'Team Synchronizing'

> ID：10008080
> 
> 赞同：9
> 
> 时间：2012-04-04T09:06:15.560
> 
> 标签：eclipse, egit

我试图合理化两个似乎相关的观点（或至少提供非常相似的功能）：“Git Repository”观点（我在添加 EGit 后得到）和“团队同步”观点（我认为是EE 分布的一部分）。

据我所知，我能够让**Git 存储库**工作（使用 GitHub），或者至少大多数功能：“Git Staging”窗口工作正常，我可以通过从“未暂存的更改”到“暂存的更改”，然后单击“提交”图标。然后我可以从“Git Repositories”窗口中推送我的更改，方法是右键单击工作区->Remotes->origin->url，然后从菜单中选择推送（这是“正确的”过程吗？）。

从“团队同步”的角度来看，我什至没有运气来设置它。一旦从菜单中选择“同步...”，Git，然后我会看到一个表（它是什么？）。我正在为 Destination 尝试各种值（否则，无法点击 Finish 按钮），但无论我做什么，它都会告诉我所有项目的“没有变化”。

右键单击项目并选择“团队”时，还有许多上下文菜单项。这些是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-14T10:09:16.383

在 CVS 中，团队同步是管理传入和传出更改的唯一合理方法。您可以从这一视图更新/合并传入的更改并提交传出的更改。由于每个提交都是离散的并且是非原子的，因此该视图非常适合此工作流程。

然而，在 EGit 中，您已经有了明确的添加、提交、推送、拉取和合并操作。所以团队同步在很大程度上超出了正常的工作流程。它的行为很像来自补丁的美化同步 - 您选择要比较您的工作目录的分支，它会向您显示差异。然后，您可以整体或单独应用这些更改，但它不会获取上下文，即它不会创建合并点或诸如此类的东西。

所以你应该训练自己不要使用，除非有特殊原因。例如，也许您有两个分支 A 和 B。有人对 B 进行了更改，而您只需要其中的一小部分，因此您可以使用 Team Sync 来显示差异并仅应用您需要的差异。或者，也许您只是想压缩分支 B 上的所有更改并将它们称为 A 中的单个提交。然后，当您无论如何要折腾 B 或其远程分支时，您可能会使用 Team Sync 而不是使用变基.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-20T04:03:14.903

据我了解，“Git 存储库”透视图旨在将文件从工作目录提交到本地 Git 存储库，而“团队同步”透视图用于将本地存储库与远程存储库同步。

起初我也觉得这很令人困惑，因为在使用 SVN 时，“团队同步”透视图用于提交/更新文件。直到我注意到在 EGit 的团队同步透视图中，它没有显示提交/更新按钮，而是有拉/推按钮，用于同步两个 Git 存储库。

对于出现在“团队”上下文菜单下的各种选项，它们对应着一堆 Git 操作。在使用 EGit 之前，我建议先阅读一下 Git 的操作原理。[http://git-scm.com/doc](http://git-scm.com/doc)将是一个好的开始。

# wxwidgets - wxWidgets, wxCheckBox 标签敏感

> ID：10008087
> 
> 赞同：0
> 
> 时间：2012-04-04T09:06:47.230
> 
> 标签：wxwidgets

我试图让 wxCheckBox 像在其他一些工具包中一样具有敏感标签。瞄准小盒子通常过于精致，因此带有标签的整个区域将是更改状态的便捷方式。

但我找不到办法做到这一点。任何帮助将不胜感激。

wxWidgets 2.8，Ubuntu 10.04

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:17:21.500

我可以确认这是 wxWidgets GTK 中用于`wxALIGN_RIGHT`复选框的错误。如果我们快速查看 wxCheckBox 的[源代码](http://trac.wxwidgets.org/browser/wxWidgets/trunk/src/gtk/checkbox.cpp)，我们可以看到右对齐控件被创建为两个单独的部分，一个标签和一个复选框，并且标签永远不会连接以响应单击事件。[如果您在wxWidgets 错误跟踪器](http://trac.wxwidgets.org/)上创建票证，那么我相信有人会修复它。

# php - 如何使用选择查询中的别名

> ID：10008088
> 
> 赞同：0
> 
> 时间：2012-04-04T09:06:53.313
> 
> 标签：php, mysql, variables, time, alias

我有一个问题如何使用选择查询中的别名：

```
$timecheck = $db->query("SELECT DOE <= NOW() AS trigger FROM table WHERE a='$a'");
                if ($trigger != 0){
                    do  something
            } 
```

这是使用别名的正确方法吗？我需要别名触发器来检查时间戳周期的验证。如果该时间段为 0 或更少，则意味着“触发器”将输出 1。在这种情况下，应执行另一个查询。

所以我希望我的问题足够清楚。如果有人可以提供帮助，我将不胜感激。多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:14:46.880

`trigger`是保留关键字，因此您需要将其封装在反引号中。这将起作用：

```
SELECT DOE <= NOW() AS `trigger` FROM table WHERE a='$a'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:15:59.267

我认为“触发器”可能是一个保留字。尝试：

```
$timecheck = $db->query("SELECT (DOE <= NOW()) AS trggr FROM table WHERE a='$a' ");
$trggr = //getting the value
if ($trggr != 0){
    // something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:13:01.250

一个[IF()](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)调用应该可以解决问题：

```
SELECT IF( DOE <= NOW(), 1, 0 ) AS `trigger` FROM ... 
```

**编辑：**添加反引号以触发，如 Kristian 所述。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T09:11:19.353

我相信它应该是这样的......

```
$timecheck = $db->query("SELECT DOE <= NOW() AS trigger FROM table WHERE a='$a'");
while ($timecheck->fetchInto($row, DB_FETCHMODE_ASSOC)) {
    if ($row['trigger'] != 0){
      do something
    }
} 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-04T09:10:55.750

其一般。有时我们也可以这样使用。它取决于服务器。（不使用“AS”）

“SELECT DOE <= NOW() 触发器从表 WHERE a='$a'”

# c# - 丢失在 Global.asax 中声明并在 webrole 的 onstart 事件中初始化的静态变量的值

> ID：10008090
> 
> 赞同：1
> 
> 时间：2012-04-04T09:06:58.710
> 
> 标签：c#, asp.net, azure

我在 Gloabal.asax.cs 中声明了一个静态字符串“drivePath”。在 webrole 的 Onstart 事件中，我为其分配了一个值。我正在我的网页上访问此值，但它显示为好像刚刚声明了该变量。我为我的代码得到的值如下

**全球.asax.cs**

```
public static string drivePath = string.Empty; 
```

**WebRole.cs**

```
public override bool OnStart()
{
    MountAzureDrive();
    Global.drivePath = WebRole.drivePath;
    return base.OnStart();
} 
```

我在“MountAzureDrive()”函数中为 WebRole.drivePath 赋值。

在网页上

在某些功能的网页上，我将 drivePath 作为“Global.drivePath”访问，并且我将值作为 string.Empty。

我的问题是为什么不保留驱动路径的值？如果我想保留 drivepath 的价值并得到它，我该怎么办？

请帮我

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:56:19.023

在 WebRole 中运行的代码与您的 Web 应用程序 (Global.asax.cs) 的进程不同。您可以执行以下操作：

1.  WebRole：挂载驱动器
2.  WebRole：将驱动器号存储为环境变量
3.  Global.asax.cs：从环境变量中读取驱动器号。
4.  ...

![在此处输入图像描述](../Images/97092163e42ad631ced2a252ce84da63.png)

请按照本文获取更多信息： http: [//www.codeproject.com/Articles/81413/Windows-Azure-Drives-Part-1-Configure-and-Mounting](http://www.codeproject.com/Articles/81413/Windows-Azure-Drives-Part-1-Configure-and-Mounting)

桑德里诺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:18:30.683

OnStart（角色）在您的网页（页面，Global.asax ..）之外的另一个进程中。至少在使用[完整 IIS 模式](http://blogs.msdn.com/b/windowsazure/archive/2010/12/02/new-full-iis-capabilities-differences-from-hosted-web-core.aspx)时。

# objective-c - 可可 - controlTextDidEndEditing 问题

> ID：10008093
> 
> 赞同：0
> 
> 时间：2012-04-04T09:07:09.787
> 
> 标签：objective-c, cocoa

我有以下委托方法，它在可编辑字段中的文本更改时进行监听：

-(void)controlTextDidEndEditing:(NSNotification *)aNotification{

说，我声明了两个 NSTextField，我怎样才能找出生成通知的 NSTextField？我想在一个文本字段的文本完成编辑时执行一些代码，而在另一个文本字段的代码完成编辑时执行其他代码。

换句话说，我怎样才能获得发出通知的文本字段的名称？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:35:39.787

[aNotification object] 是发布通知的 NSControl（或 NSControl 子类）对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-07T21:12:51.067

您可以使用标签并获取对象的标签字段，但首先您必须强制将对象从 Any 向下转换为 NSTextField 以便您可以访问标签属性（“任何”的对象没有“标签”属性）像这样：

```
let object = aNotification.object as! NSTextField 
```

然后你可以检查标签：

```
if object.tag == 99 { do something } 
```

这就是我在我现在正在处理的一些代码中解决问题的方式。

# networking - OSPF 区域如何帮助可扩展性

> ID：10008101
> 
> 赞同：0
> 
> 时间：2012-04-04T09:07:47.530
> 
> 标签：networking

我想我了解 OSPF - 它是链路状态路由，域分为不同的区域。

将一个区域作为骨干显然会创建一个层次结构，但我认为层次结构的目的是减少每个单独节点存储的信息量，我不明白 OSPF 是如何做到这一点的。

据我了解（来自计算机网络，一种系统方法），边界上的路由器到骨干区域（ABR）收集有关其外部区域的路由信息​​，然后将其通告给骨干中的路由器（使用简化的成本） ，然后将其转发到所有其他区域。

因此，我们仍然在每个路由器中拥有相同数量的信息（到达其他每个路由器的下一跳），只是我们改变了成本，并强制所有外部区域通信通过骨干网。

这是真的？如果是这样，将其拆分为域有什么意义。如果没有，请您指出我哪里出错了。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:26:38.397

OSPF 区域中的每个路由器都知道其区域的整个拓扑，并运行 SPF 算法以找到最短路径。区域间路由在您的路由器看来都是源自 ABR，因此不必将相邻区域的拓扑添加到 OSPF 数据库并包含在 SPF 算法中。关键不是要使路由表更小，而是要使每个区域中的 OSPF 数据库更简单，从而使 SPF 算法的 CPU 占用更少。

# c++ - 没有 msvcr100d.dll 的来源！__CrtDumpMemoryLeaks()

> ID：10008103
> 
> 赞同：1
> 
> 时间：2012-04-04T09:08:04.447
> 
> 标签：c++, visual-studio, debugging, visual-c++, msvcrt

使用 Visual Studio 2010 调试 C++ 项目时，找不到 crt 的源代码。当我试图进入一个这样的模块时，它显示“没有可用的源”。它也没有提供一个选项，`Browse`以便我可以帮助它找到源位置。

在 Option Solution->Common Properties->Debug Source Files 下，更新 crt 源的正确位置。

由于缺乏 crt 的源代码级调试，我必须通读越来越困难的反汇编。

谁能帮我弄清楚可能出了什么问题？

请注意 ** 我通过 Visual Studio 使用外部构建系统来构建我的 C++ 项目。

**在汉斯的指导下，我如何缩小问题范围。**

当断点仍处于活动状态时，我列出了所有符号加载信息。我意识到`msvcr100d.i386.pdb`与dll不匹配。它实际上一直从微软公共符号存储中获取，其中当然已经剥离了符号。所以这就是我的问题的根本原因。

这是[social.msdn中的类似问题](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/99383962-0969-4ed0-b42c-34611df307ac/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:07:57.347

You can see the cause of the problem by using Debug + Windows + Modules while you have a break active. Right-click msvcr100d.dll and select "Symbol Load Information" to get info about the .pdb that the debugger uses.

For some reason the Microsoft Symbol Server supplies one that has the source info stripped. It is probably intentional, something to do with service and security patches of the DLL getting out of sync with the source code in vc/crt/scr. You can get a real answer instead of a guess by posting to connect.microsoft.com

A workaround of sorts is to compile your code with /MTd instead of /MDd, if that's possible at all. Project + Properties, C/C++, Code Generation, Runtime Library setting. The debugger will then use the .pdb file in vc/lib. Do keep your eyes on the ball, debug your code instead of the CRT's.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:18:18.113

您可以在安装文件夹的子文件夹 VC\CRT\SRC 中找到 CRT 的源代码。

如果它们不存在，您在安装 VS2010 时是否安装了它们？（不确定你是否真的可以选择这个）。

# php - 如何最小化搜索结果中的 url 链接

> ID：10008104
> 
> 赞同：0
> 
> 时间：2012-04-04T09:08:04.927
> 
> 标签：php, search

我有一个类似的搜索结果

> > **1\. 我的标题**
> > 我的简短描述......
> > [http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html](http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html)
> > [http://www.stackoverflow.com/tags/mypage.html? a=123123123&b=2342343](http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html)

我想要这种格式的网址

> > **1\. 我的标题**
> > 我的简短描述......
> > [http://www.stackoverflow.com/tags/......./againandagainthisthat/mypage.html](http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html)
> > [http://www.stackoverflow.com/tags/ mypage.html?a....3123&b=2342343](http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html)

链接中间跳过了一些文本

我试图用谷歌搜索它，但不知道要搜索的确切关键字..

**我的链接是什么，如果该链接的长度超过 70 个字符，假设它有 100 个，则链接最小化为 70 个字符，中间......**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:16:41.880

这有效（对于原始示例）：

```
$url = 'http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html';
$urlBitsArray = explode('/', $url);
$urlBitsCount = count($urlBitsArray);
$newUrl = implode('/', array($urlBitsArray['0'], $urlBitsArray['1'], $urlBitsArray['2'], $urlBitsArray['3'], '.....', $urlBitsArray[$urlBitsCount - 2], $urlBitsArray[$urlBitsCount - 1]));
echo $newUrl; 
```

基本，如果超过 70 个，前 32 个字符，后 32 个字符和 '......' 在中间：

```
$url = 'http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html ';

if (strlen($url) > 70) {
    $url = substr($url, 0, 31).'......'.substr($url, strlen($url) - 33);
}

echo $url; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:21:01.837

```
<?php
$string = "http://www.stackoverflow.com/tags/thisthat/againthisthat/againandagainthisthat/mypage.html";
$maxStringLength = 50;

if(strlen($string) > $maxStringLength)
{
    //remove http://
    if(strpos($string, "http://") === 0)
    {
        $string = substr($string, 7);
    }
    $bits = explode("/", $string);
    if(count($bits) > 2) //greater than www.stackoverflow.com/mypage.html
    {
        $string = implode("/", array($bits[0], $bits[1], '...', $bits[count($bits)-2], $bits[count($bits)-1]));
    }
}

echo $string; 
```

# c# - 用于 C# 的 Aweber API

> ID：10008105
> 
> 赞同：1
> 
> 时间：2012-04-04T09:08:06.303
> 
> 标签：c#, desktop-application, aweber

我想在 C# windows 应用程序中访问我的 Aweber 帐户详细信息和电子邮件列表。那么，请让我知道我怎样才能使它成为可能？

我得到了[http://thecodenode.com/AweberCSharpNetSample.aspx](http://thecodenode.com/AweberCSharpNetSample.aspx)但我仍在等待带有源代码的邮件。

等待回应。

谢谢卡皮尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T18:42:18.360

我确实为他们的 Aweber API 编写了一个完整的 .NET SDK，不幸的是他们不接受它，因此它被锁定了。根据我们的协议，他们拥有它的版权，所以我不能发布它。

他们说他们打算走不同的路线，但是他们的编程人员主要是 PHP 程序员，所以我不知道他们是否会这样做。

我会联系他们，看看是否可以发布。

**更新**

是的，它可以被释放。我已将源代码放在 Codeplex 上：[https ://aweber.codeplex.com/](https://aweber.codeplex.com/)

它包含来自 OAuth 以及与列表、帐户、活动和订阅者通信的所有内容。

唯一的要求是 .NET 4.0，所有 OAuth 和 JSON 代码都是独立的。

把代码拿出来帮助其他人感觉很好，而不是锁在我的电脑上:)

# android - 如何从android中的城市名称获取纬度和经度？

> ID：10008108
> 
> 赞同：1
> 
> 时间：2012-04-04T09:08:21.910
> 
> 标签：android, google-maps, geocoding

在我的应用程序中，我将默认值设置为`latitude`and `longitude`。当我键入时，`cityname in edittext`我需要将该点移动到我需要的地方

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:37:36.287

使用以下代码获取城市名称的经纬度

```
String location=cityName;
String inputLine = "";
String result = ""
location=location.replaceAll(" ", "%20");
String myUrl="http://maps.google.com/maps/geo?q="+location+"&output=csv";
try{
 URL url=new URL(myUrl);
 URLConnection urlConnection=url.openConnection();
 BufferedReader in = new BufferedReader(new 
 InputStreamReader(urlConnection.getInputStream()));
  while ((inputLine = in.readLine()) != null) {
  result=inputLine;
  }
  String lat = result.substring(6, result.lastIndexOf(","));
  String longi = result.substring(result.lastIndexOf(",") + 1);
 }
 catch(Exception e){
 e.printStackTrace();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:26:02.523

我的建议是使用 Google GeoCoding REST API，而不是 Geocoder。

因为我曾经在我的国家中国使用过，所以出现以下错误：

```
"java.io.IOException: Service not Available" 
```

搜索后，似乎

```
"The Geocoder class requires a backend service that is not included in the core android              framework. The Geocoder query methods will return an empty list if there no backend service in the platform. Use the isPresent() method to determine whether a Geocoder implementation    exists." 
```

所以我求助于 Google GeoCoding REST API，这很简单，只需像这样请求：

```
http://maps.googleapis.com/maps/api/geocode/json?address=NewYork&sensor=false 
```

您将获得一个包含地理位置的 json。您还可以通过它从 locaiton 获取地址：

```
http://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&sensor=false 
```

如果你能读中文，我有一个关于这个的博客，看看这个： [http ://wangchao.de/android%E5%88%A9%E7%94%A8google-geocoding-api%E6%9B%BF%E4 %BB%A3地理编码器-%E8%A7%A3%E5%86%B3%E5%9C%B0%E5%9D%80%E8%AF%AD%E8%A8%80%E9%97%AE%E9% A2%98](http://wangchao.de/android%E5%88%A9%E7%94%A8google-geocoding-api%E6%9B%BF%E4%BB%A3geocoder-%E8%A7%A3%E5%86%B3%E5%9C%B0%E5%9D%80%E8%AF%AD%E8%A8%80%E9%97%AE%E9%A2%98)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:02:11.300

尝试获取cityname的GeoPoint

```
GeoPoint startGP = new GeoPoint(
                (int) (Double.parseDouble(cityname.getText()) * 1E6)); 
```

然后您可以使用以下代码从 GeoPoint 获取纬度和经度。

```
 Double.toString((double)startGP.getLatitudeE6() / 1E6),
 Double.toString((double)dest.getLongitudeE6() / 1E6) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:14:12.323

使用地理编码器类。

```
Geocode gc = new Geocoder();
List<Address> ads = gc.getFromLocationName(cityName,maxResults); 
```

从文档：

> 用于处理地理编码和反向地理编码的类。地理编码是将街道地址或位置的其他描述转换为（纬度、经度）坐标的过程。反向地理编码是将（纬度、经度）坐标转换为（部分）地址的过程。反向地理编码位置描述中的详细信息量可能会有所不同，例如，一个可能包含最近建筑物的完整街道地址，而另一个可能仅包含城市名称和邮政编码。Geocoder 类需要一个不包含在核心 android 框架中的后端服务。如果平台中没有后端服务，Geocoder 查询方法将返回一个空列表。使用 isPresent() 方法确定是否存在 Geocoder 实现。

# javascript - 在 jQuery fullcalendar 插件中禁用时间段范围

> ID：10008113
> 
> 赞同：22
> 
> 时间：2012-04-04T09:08:40.507
> 
> 标签：javascript, jquery, fullcalendar

我正在开发一个 webapp 并且正在使用[**jQuery fullcalendar 插件**](http://arshaw.com/fullcalendar/)。

我需要以某种方式禁用某些时间段。

我正在使用的当前方法是为我想要禁用和禁止事件重叠的时隙添加事件。

有一个更好的方法吗？我宁愿不允许事件重叠。

我可以接受上述问题的解决方案：添加黑色时隙并禁止在这些区域添加时隙。

* * *

尽管如此，我还有一个更紧迫的问题。我需要能够在某些时间范围内更改插槽的背景颜色。理想情况下，我会以与 eventSources 相同的方式使用它；只需指向一个 url 并使用 ajax/json 将要着色的范围发送回来。

我即将添加的赏金是针对最后一个问题（彩色插槽范围，以及日视图和周视图）。如果有人可以向我建议另一种解决方案，那么完整的日历可以做到这一点，那也很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-29T16:17:53.803

顺便说一句，你为什么不在`Select`回调中检查它？

```
select: function( start, end, allDay, jsEvent, view ) {
    if( /*start is the disabled time*/ )
        return false;
    else{
        // Proceed with the normal flow of your application
        // You might show a popup to get info from user to create
        // a new event here
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T14:36:19.480

使用 Fullcalender，在我的代码中我有这样的东西：

```
var availablePeriods = [["8:00", "12:00"], ["13:00", "17:00"]]; //these are the time intervals when the slots are OPEN

if (availablePeriods !== undefined) {
  slots = $element.find('.fc-agenda-slots tr');

  /* first add 'closed' class to all slots, and then remove class from 'open' slotts */
  slots.addClass('experdscheduler_closedSlot');
  if (jQuery.isArray(availablePeriods)) {
    /* only in weekview and dayview */
    currentView = plugin.getView();

    if (currentView === 'agendaWeek' || currentView === 'agendaDay') {
      numberOfAvailablePeriods =  availablePeriods.length;

      scheduleStartTime = timeToFloat($element.fullCalendar( 'option', 'minTime'));            
      scheduleSlotSize = $element.fullCalendar( 'option', 'slotMinutes') /60;

      /* function to calculate slotindex for a certain time (e.g. '8:00') */    
      getSlotIndex = function(time) {
        time = timeToFloat(time);            
        return Math.round((time-scheduleStartTime)/scheduleSlotSize);
      }

      /* remove 'closed' class of open slots */                 
      for (i=0; i<numberOfAvailablePeriods; i++) {            
        startOfPeriodSlot = getSlotIndex(timeToFloat(availablePeriods[i][0]));
        endOfPeriodSlot = getSlotIndex(timeToFloat(availablePeriods[i][1]));

        for (j=startOfPeriodSlot; j<endOfPeriodSlot; j++) {
          slots.eq(j).removeClass('experdscheduler_closedSlot');
        }
      }          
    }
  }         
}

/**
 * Helper function: Converts a given time to a float, e.g. '8:15' becomes 8.25
 * @param mixed time A integer, float or a string. Valid strings: '8:15', '20:15', '8:15am', '8:15pm', '8.15', etc.
 * @license http://opensource.org/licenses/gpl-license.php GNU Public License
 * @author Koos van der Kolk <koosvdkolk at gmail dot com>
 * @return float
 **/
function timeToFloat(time) {      
  var returnValue, timeAsArray, separator, i, timeSeparators = [':', '.'], numberOfSeparators;

  /* is time an integer or a float? */
  if (parseInt(time, 10) === time || parseFloat(time) === time) {
    returnValue = time;
  } else {
    /* time will be considered a string, parse it */
    time = time.toString();

    numberOfSeparators = timeSeparators.length;

    for (i = 0; i < numberOfSeparators; i = i + 1) {
      separator = timeSeparators[i];

      if (time.indexOf(separator) > 0) {
        timeAsArray = time.split(separator);

        returnValue = parseInt(timeAsArray[0], 10) + parseInt(timeAsArray[1], 10) / 60;

        /* does string contain 'p' or 'pm'? */
        if (time.indexOf('p') > 0 && returnValue <= 12) {
          returnValue = returnValue + 12;
        }
      }
    }
  }
  return returnValue;
} 
```

上面的代码是我做的一个插件的一部分的汇编，所以它可能不能直接工作。随时联系我。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-13T11:40:28.720

我终于让这个可用的插槽每天工作。

调整 koosvdkolk 的答案以每天有不同的可用插槽：

```
 function adjustWorkHourSlotSize(day_num) {
      $(".day"+day_num+"slot").width($(".fc-col"+day_num).width()-2);

   }

   function addWorkHours2(availablePeriods, calendar_element) {
       if (availablePeriods !== undefined) {
          numberOfAvailablePeriods =  availablePeriods.length;

          //slots.addClass('nySchedule_unavailable_slots'); 
          //iterate trough days and get avail periods for each day of week
          currentView = calendar_element.fullCalendar('getView');
          currentView =  currentView.name;
          if (currentView === 'agendaWeek' || currentView === 'agendaDay') {

            scheduleStartTime = timeToFloat(calendar_element.fullCalendar( 'option', 'minTime'));            
            scheduleSlotSize = calendar_element.fullCalendar( 'option', 'slotMinutes') /60;
            /* function to calculate slotindex for a certain time (e.g. '8:00') */    
            getSlotIndex = function(time) {
              time = timeToFloat(time);            
              return Math.round((time-scheduleStartTime)/scheduleSlotSize);
            }

            slots_content = calendar_element.find('.fc-agenda-slots tr .ui-widget-content div');
            for (var i=0; i!=numberOfAvailablePeriods; i++) {
              if (currentView === 'agendaWeek') {

                slots_content.append("<div class='day"+i+"slot dayslot'></div>");
                $(".day"+i+"slot").addClass('unavailable');
                adjustWorkHourSlotSize(i);
              }

              dayPeriodsLength=availablePeriods[i].length;
              for (var j=0; j!=dayPeriodsLength; j++) {
                start=availablePeriods[i][j][0];
                end=availablePeriods[i][j][1];

                startOfPeriodSlot = getSlotIndex(timeToFloat(start));
                endOfPeriodSlot = getSlotIndex(timeToFloat(end));
                for (k=startOfPeriodSlot; k<endOfPeriodSlot; k++) {
                  $(".day"+i+"slot").eq(k).removeClass("unavailable");
                }
              }                
            }
          }
       }
   } 
```

现在只需调用：

```
var availablePeriods = [ [["8:00", "16:00"],["3:00", "5:00"]], [["9:00", "14:00"]] ];
addWorkHours2(availablePeriods, $("#calendar")); 
```

并且不要忘记 css 类：

```
.dayslot {
  float: left;
  margin-left: 2px;
}

.fc-agenda-slots .unavailable{
  background-color: #e6e6e6;

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-30T07:30:08.293

[谷歌代码中的这个线程](http://code.google.com/p/fullcalendar/issues/detail?id=144)允​​许跟踪此类问题的演变。实际上是关于忙碌时间的颜色，但它是直接相关的

此外[，这个人](https://github.com/elhigu/fullcalendar)已经实现了一种非常方便的方法来管理这个目的，仍然使用带有这种代码的 fullcalendar

```
$('#calendar').fullCalendar({
    ....
    events: [
        {
            title: 'All Day Event',
            start: new Date(y, m, 1)
        }
    ],
    annotations: [{
        start: new Date(y, m, d, 13, 0),
        end: new Date(y, m, d, 15, 30),
        title: 'My 1st annotation', // optional
        cls: 'open', // optional
        color: '#777777', // optional
        background: '#eeeeff' // optional
    }]      
}); 
```

检查[屏幕截图](http://content.screencast.com/users/Mikaelle/folders/Jing/media/85a7bb79-fa01-4602-99e0-b1958a0d37d2/00000002.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-22T11:48:26.640

Fullcalendar 有一个内置功能`businessHours`，它强调日历上的某些时间段。

```
businessHours: [ // specify an array instead
{
    dow: [ 1, 2, 3 ], // Monday, Tuesday, Wednesday
    start: '08:00', // 8am
    end: '18:00' // 6pm
},
{
    dow: [ 4, 5 ], // Thursday, Friday
    start: '10:00', // 10am
    end: '16:00' // 4pm
}
] 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-12T08:25:17.187

我通过使用另一个日历找到了解决方案：jquery-week-calendar ( [https://github.com/themouette/jquery-week-calendar](https://github.com/themouette/jquery-week-calendar) )。

这个日历有一个叫做闲忙的功能。它习惯于有繁忙和空闲的时间段范围，但是通过稍微改变源代码，我可以为时间段范围添加背景颜色。我将方法 freeBusyRender 更改如下：

```
freeBusyRender: function(freeBusy, $freeBusy, calendar) {
    if(freeBusy.free == 't_red') {
        $freeBusy.css("backgroundColor", "red");
    } else if(freeBusy.free == 't_green') {
        $freeBusy.css("backgroundColor", "green");
    } else if(freeBusy.free == 't_blue') {
        $freeBusy.css("backgroundColor", "blue");
    } else if(freeBusy.free == 't_black') {
        $freeBusy.css("backgroundColor", "black");
    }
    $freeBusy.addClass('free-busy-free');
    return $freeBusy;
} 
```

然后，我可以按如下方式初始化日历：

```
(function($) {
    d = new Date();
    d.setDate(d.getDate() - (d.getDay() - 3));
    year = d.getFullYear();
    month = d.getMonth();
    day = d.getDate();
    var eventData2 = {
        options: {
            timeslotsPerHour: 4,
            timeslotHeight: 12,
            defaultFreeBusy: { free: true }
        },
        events: [
            { 'id': 1, 'start': new Date(year, month, day, 12), 'end': new Date(year, month, day, 13, 00), 'title': 'Lunch with Sarah'},
            { 'id': 2, 'start': new Date(year, month, day, 14), 'end': new Date(year, month, day, 14, 40), 'title': 'Team Meeting'},
            { 'id': 3, 'start': new Date(year, month, day + 1, 18), 'end': new Date(year, month, day + 1, 18, 40), 'title': 'Meet with Joe'},
            { 'id': 4, 'start': new Date(year, month, day - 1, 8), 'end': new Date(year, month, day - 1, 9, 20), 'title': 'Coffee with Alison'},
            { 'id': 5, 'start': new Date(year, month, day + 1, 14), 'end': new Date(year, month, day + 1, 15, 00), 'title': 'Product showcase'}
        ],
        freebusys: [
            { 'start': new Date(year, month, day - 1, 8), 'end': new Date(year, month, day - 1, 18), 'free': 't_red'},
            { 'start': new Date(year, month, day, 8), 'end': new Date(year, month, day + 0, 18), 'free': 't_green' },
            { 'start': new Date(year, month, day + 1, 8), 'end': new Date(year, month, day + 1, 18), 'free': 't_blue' },
            { 'start': new Date(year, month, day + 2, 14), 'end': new Date(year, month, day + 2, 18), 'free': 't_black'},
            { 'start': new Date(year, month, day + 3, 8), 'end': new Date(year, month, day + 3, 18), 'free': 't_red' }
        ]
    };
    $(document).ready(function() {
        var $calendar = $('#calendar').weekCalendar({

        allowCalEventOverlap: true,
        overlapEventsSeparate: true,
        totalEventsWidthPercentInOneColumn: 95,

        timeslotsPerHour: 4,
        scrollToHourMillis: 0,
        height: function($calendar) {
            return $(window).height() - $('h1').outerHeight(true);
        },
        eventRender: function(calEvent, $event) {
            if (calEvent.end.getTime() < new Date().getTime()) {
                $event.css('backgroundColor', '#aaa');
                $event.find('.wc-time').css({
                    backgroundColor: '#999',
                    border: '1px solid #888'
                });
            }
        },
        eventNew: function(calEvent, $event, FreeBusyManager, calendar) {
                    calEvent.id = calEvent.userId + '_' + calEvent.start.getTime();
        },
        data: function(start, end, callback) {
                    callback(eventData2);
        },
        displayFreeBusys: true,
        daysToShow: 7,
        switchDisplay: { '1 day': 1, '3 next days': 3, 'work week': 5, 'full week': 7 },
        headerSeparator: ' ',
        useShortDayNames: true
        });
    });
})(jQuery); 
```

这给了我以下结果：

![日历](../Images/6c67c9e7a92805a7fb8fc871e915da9d.png)

我敢打赌这可以改进；我想我这样做破坏了 freeBusy 功能，但我不需要它。

* * *

## 回答 #7

> 赞同：-7
> 
> 时间：2014-11-12T09:52:09.453

来自 dhtmlx 的另一个更加开发和支持的日历类型插件称为调度程序：http: [//dhtmlx.com/docs/products/dhtmlxScheduler/](http://dhtmlx.com/docs/products/dhtmlxScheduler/)

它支持禁用时隙、背景颜色等等。我以前用过它，发现它提供了我需要的一切。

![在此处输入图像描述](../Images/b2b3331d28b06852617723cbaf061ab1.png)

# three20 - 如何将现成的项目添加到 Three20UI

> ID：10008115
> 
> 赞同：0
> 
> 时间：2012-04-04T09:08:51.630
> 
> 标签：three20, xib, nib

我有一个现成的项目（微博），我想将微博项目添加到我另一个集成了 Three20 的项目中。从 - (void)clickActionItem {}; three20UI的函数，调用微博项目。

现在，我可以从我的其他项目中调用微博项目，但无法从我的其他项目的three20UI中调用它。

对于那些代码： self.window.rootViewController = self.sinaWeiBoSDKDemoViewController; [self.window makeKeyAndVisible];

我收到错误：“在非结构或联合的情况下请求成员‘窗口’”

你能告诉我怎么做吗？

谢谢！

# jquery - 用jquery连接asp.net中的字符串

> ID：10008116
> 
> 赞同：1
> 
> 时间：2012-04-04T09:08:54.770
> 
> 标签：jquery, asp.net-mvc

我正在尝试在 jquery 代码块中将 asp.net 块与 jquery 连接起来：

```
 var srcImg = "<%:HelperClass.CheckImageUrlExist(HelperClass.Project.PathBrandImages+ "+ 
 proValByDep.brNam + ")%>"; 
```

proValByDep.brNam 是我的 jquery 中的变量。

谁能帮助我，我怎么能连接这个字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:12:35.583

当前状态下的问题将不起作用。在客户端收到您的 html 之前，您不能让 ASP.NET 运行时尝试解析客户端 javascript 变量。

# arrays - 如何在线性时间内按递增顺序查找 3 个数字并在数组中增加索引

> ID：10008118
> 
> 赞同：22
> 
> 时间：2012-04-04T09:08:59.927
> 
> 标签：arrays, c, algorithm, time-complexity

我在一个网站上遇到了这个问题。正如那里提到的，这是在亚马逊采访中被问到的。在给定的约束下，我无法找到合适的解决方案。

给定一个`n`整数数组，在 O(n) 时间内找到3个**这样**的元素*。*`a[i] < a[j] < a[k]``i < j < k`

 *** * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-04-04T09:40:00.350

因此，这是解决问题的方法。您需要对数组进行三次迭代。在第一次迭代中，将所有大于它们的元素标记在右侧，在第二次迭代中，将所有小于它们的元素标记在左侧。现在你的答案将是一个同时具有这两者的元素：

```
int greater_on_right[SIZE];
int smaller_on_left[SIZE];
memset(greater_on_rigth, -1, sizeof(greater_on_right));
memset(smaller_on_left, -1, sizeof(greater_on_right));

int n; // number of elements;
int a[n]; // actual elements;
int greatest_value_so_far = a[n- 1];
int greatest_index = n- 1;
for (int i = n -2; i >= 0; --i) {
   if (greatest_value_so_far > a[i]) {
     greater_on_right[i] = greatest_index;
   } else {
     greatest_value_so_far = a[i];
     greatest_index = i;
   }
}

// Do the same on the left with smaller values

for (int i =0;i<n;++i) {
  if (greater_on_right[i] != -1 && smaller_on_left[i] != -1) {
    cout << "Indices:" << smaller_on_left[i] << ", " << i << ", " << greater_on_right[i] << endl;
  }
} 
```

该解决方案在整个数组上迭代 3 次，因此是线性的。我没有提供完整的解决方案，所以你可以在左边训练自己，看看你是否明白我的想法。很抱歉没有给出一些提示，但我不知道如何在没有显示实际解决方案的情况下给出提示。

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-29T11:43:34.757

一次性线性时间，具有 O(1) 额外空间（4 个变量）。非常有效（每次迭代只有几个比较/分支，并且没有太多的数据混洗）。

**这*不是*我最初的想法或算法**，我只是整理并[在 ideone fork 中注释了代码](http://ideone.com/UZz45E)。您可以在那里向代码添加新的测试用例并在线运行。[原件](http://ideone.com/QefD9V)由[Kenneth 撰写，发表在 www.geeksforgeeks.org 上一个线程的评论](http://www.geeksforgeeks.org/find-a-sorted-subsequence-of-size-3-in-linear-time/#comment-1573367479)中。很棒的算法，但最初的实现在实际循环之外有一些非常愚蠢的代码。（例如，代替局部变量，让我们在一个类中使用两个成员变量，并将函数实现为`class Solution`......的成员函数并且变量名很糟糕。我选择了非常冗长的。）

Kenneth，如果您想发布您的代码作为答案，请继续。我不是想窃取算法的功劳。（不过，我确实做了一些工作来编写这个解释，并思考它*为什么*有效。）

讨论线程上方的主要文章与 Ivaylo Strandjev 的答案具有相同的解决方案。（主要文章的代码是 Pramod 在 Ivalyo 回答数月后发布的作为对这个问题的回答的内容。这就是我在评论中找到有趣答案的方式。）

* * *

由于您只需要找到*解决*方案，而不是所有解决方案，因此没有您期望的那么多极端案例。事实证明，如果您选择正确的东西作为状态，您不需要跟踪您看到的每个可能的起始值和中间值，甚至根本不需要回溯。

* * *

主要技巧是：

*   单调递减值序列中的最后一个值是您唯一需要考虑的值。这适用于第一（低）和第二（中）候选元素。

*   每当您看到**中间**元素的较小候选者时，您都可以从那里重新开始，只寻找最终元素或更好的中间候选者。

    如果您在小于当前中间候选人的元素之前还没有找到 3 个递增元素的序列，那么 min-so-far 和新的较小中间候选人将尽可能好（宽容、灵活）在您已经检查过的数字中。（请参阅代码中的注释以了解可能更好的表述方式。）

    其他几个答案会在每次看到新的最小或最大元素而不是中间元素时错误地重新开始。您跟踪您看到的当前最小值，但在看到新的中间之前您不会做出反应或使用它。

要找到新的候选中间元素，您检查它们是否小于当前中间候选，并且 != 到目前为止看到的最小元素。

我不确定这个想法是否可以依次扩展到 4 个或更多值。寻找新的候选 3rd 值可能需要将当前候选第二和第三之间的最小值与总最小值分开跟踪。这可能会变得棘手，并且需要更多的条件。但是，如果它可以在恒定大小状态下正确完成并且一次通过而无需回溯，那么它仍然是线性时间。

```
// Original had this great algorithm, but a clumsy and weird implementation (esp. the code outside the loop itself)

#include <iostream>
#include <vector>

using namespace std;

//Find a sorted subsequence of size 3 in one pass, linear time
//returns an empty list on not-found
vector<int> find3IncreasingNumbers(int * arr, int n)
{
    int min_so_far = arr[0];
    int c_low, c_mid;            // candidates
    bool have_candidates = false;

    for(int i = 1; i < n; ++i)  {
        if(arr[i] <= min_so_far)  // less-or-equal prevents values == min from ending up as mid candidates, without a separate else if()continue;
            min_so_far = arr[i];
        else if(!have_candidates || arr[i] <= c_mid) {
            // If any sequence exists with a middle-numbers we've already seen (and that we haven't already finished)
            // then one exists involving these candidates
            c_low = min_so_far;
            c_mid = arr[i];
            have_candidates = true;
        } else {
            // have candidates and arr[i] > c_mid
            return vector<int> ( { c_low, c_mid, arr[i] } );
        }
    }

    return vector<int>();  // not-found
}

int main()
{
    int array_num = 1;

// The code in this macro was in the original I forked.  I just put it in a macro.  Starting from scratch, I might make it a function.
#define TRYFIND(...) do { \
        int arr[] = __VA_ARGS__ ; \
        vector<int> resultTriple = find3IncreasingNumbers(arr, sizeof(arr)/sizeof(arr[0])); \
        if(resultTriple.size()) \
            cout<<"Result of arr" << array_num << ": " <<resultTriple[0]<<" "<<resultTriple[1]<<" "<<resultTriple[2]<<endl; \
        else \
            cout << "Did not find increasing triple in arr" << array_num << "." <<endl; \
        array_num++; \
    }while(0)

    TRYFIND( {12, 11, 10, 5, 6, 2, 30} );
    TRYFIND( {1, 2, 3, 4} );
    TRYFIND( {4, 3, 1, 2} );
    TRYFIND( {12, 1, 11, 10, 5, 4, 3} );
    TRYFIND( {12, 1, 11, 10, 5, 4, 7} );
    TRYFIND( {12, 11, 10, 5, 2, 4, 1, 3} );
    TRYFIND( {12, 11, 10, 5, 2, 4, 1, 6} );
    TRYFIND( {5,13,6,10,3,7,2} );
    TRYFIND( {1, 5, 1, 5, 2, 2, 5} );
    TRYFIND( {1, 5, 1, 5, 2, 1, 5} );
    TRYFIND( {2, 3, 1, 4} );
    TRYFIND( {3, 1, 2, 4} );
    TRYFIND( {2, 4} );

    return 0;
} 
```

制作一个可以将初始值设定项列表作为参数的 CPP 宏是丑陋的：
[是否可以将大括号括起来的初始值设定项作为宏参数传递？](https://stackoverflow.com/questions/20913103/is-it-possible-to-pass-a-brace-enclosed-initializer-as-a-macro-parameter)

能够轻松地添加新的测试用例，而无需在 4 个地方进行编辑`arr4`，这是非常值得的。`arr5`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T20:35:02.883

[我在这里](http://www.geeksforgeeks.org/archives/19879)发布了另一种解决方法。

```
#include<stdio.h>

// A function to fund a sorted subsequence of size 3
void find3Numbers(int arr[], int n)
{
   int max = n-1; //Index of maximum element from right side
   int min = 0; //Index of minimum element from left side
   int i;

   // Create an array that will store index of a smaller
   // element on left side. If there is no smaller element
   // on left side, then smaller[i] will be -1.
   int *smaller = new int[n];
   smaller[0] = -1;  // first entry will always be -1
   for (i = 1; i < n; i++)
   {
       if (arr[i] < arr[min])
       {
          min = i;
          smaller[i] = -1;
       }
       else
          smaller[i] = min;
   }

   // Create another array that will store index of a
   // greater element on right side. If there is no greater
   // element on right side, then greater[i] will be -1.
   int *greater = new int[n];
   greater[n-1] = -1;  // last entry will always be -1
   for (i = n-2; i >= 0; i--)
   {
       if (arr[i] > arr[max])
       {
          max = i;
          greater[i] = -1;
       }
       else
          greater[i] = max;
   }

   // Now find a number which has both a greater number on
   // right side and smaller number on left side
   for (i = 0; i < n; i++)
   {
       if (smaller[i] != -1 && greater[i] != -1)
       {
          printf("%d %d %d", arr[smaller[i]],
                 arr[i], arr[greater[i]]);
          return;
       }
   }

   // If we reach number, then there are no such 3 numbers
   printf("No such triplet found");
   return;
}

// Driver program to test above function
int main()
{
    int arr[] = {12, 11, 10, 5, 6, 2, 30};
    int n = sizeof(arr)/sizeof(arr[0]);
    find3Numbers(arr, n);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-02T21:12:00.927

只是为了好玩：在 JAVA 中：

```
List<Integer> OrderedNumbers(int[] nums){
    List<Integer> res = new LinkedList<>();
    int n = nums.length;
    //if less then 3 elements, return the empty list
    if(n<3) return res;

    //run 1 forloop to determine local min and local max for each index
    int[] lMin = new int[n], lMax = new int[n];
    lMin[0] = nums[0]; lMax[n-1] = nums[n-1];
    for(int i=1; i<n-1; i++){
        lMin[i] = Math.min(lMin[i-1], nums[i]);
        lMax[n-i-1] = Math.max(lMax[n-i],nums[n-i-1]);
    }

    //if a condition is met where min(which always comes before nums[i] and max) < nums[i] < max, add to result set and return;
    for(int i=1; i<n-1; i++){
        if(lMin[i]<nums[i] && nums[i]<lMax[i]){
            res.add(lMin[i]);
            res.add(nums[i]);
            res.add(lMax[i]);
            return res;
        }
    }
    return res;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-26T12:49:26.197

这个问题与计算最长递增子序列非常相似，其约束条件是该子序列的大小必须等于 3。LIS 问题（使用 O(nlog(n)) 解决方案）可以很容易地针对这个特定问题进行修改。该解决方案具有**O(n)**单程复杂度和**O(1)**空间。

此解决方案要求列表中仅出现唯一元素。我们使用[在线解决方案](https://en.wikipedia.org/wiki/Online_algorithm)。当我们遇到任何新元素时，它都有可能扩展当前最优化的子序列或开始一个新的子序列。在这种情况下，由于递增子序列的最大长度为 3，因此当前正在处理的任何新元素都可以将大小为 2 到 3 和 1 到 2 的序列扩展。因此，我们维护包含最优化元素的活动列表。

在这个特定的问题中，我们必须维护的活动列表的最大数量是 2 - 一个大小为 2，另一个大小为 1。一旦我们找到一个大小为 3 的列表，我们就有了答案。我们确保每个活动列表以最小数量终止。有关此想法的更详细说明，请参阅[此](http://www.geeksforgeeks.org/longest-monotonically-increasing-subsequence-size-n-log-n/)。

在在线解决方案中的任何时间点，这两个活动列表将存储列表中最有效的值 - 列表的末尾将是可以放置在那里的最小元素。假设这两个列表是：

大小 2 列表 => [a,b]

大小 1 列表 => [c]

初始列表可以很容易地编写（参考下面的代码）。假设下一个要输入的数字是`d`。那么情况（执行中的级联）如下：

案例一：`d > b`. 在这种情况下，我们有我们的答案，如`a < b < d`。

案例2 `b > d > a`：。在这种情况下，大小为 2 的列表可以通过 end`d`代替来最佳表示，因为在大于`b`之后出现的每个元素也将大于。所以我们将 b 替换为 d。`d``b``d`

案例3 `d < c`：。由于案例 1 和 2 失败，它自动暗示`d < a`. 在这种情况下，它可能会启动一个大小为 1 的新列表。比较大小为 1 的列表以获得最有效的活动列表。如果这种情况属实，我们将替换`c`为`d`。

案例4 `Otherwise`：。这种情况意味着`d < b`和`c < d`。在这种情况下，大小为 2 的列表效率低下。所以我们替换`[a, b]`为`[c, d]`。

```
#include <bits/stdc++.h>
using namespace std;

class Solution {
public:
    int two_size_first;
    int two_size_mid;
    int one_size;
    int end_index;
    vector<int> arr;

    Solution(int size) {
        end_index = two_size_mid = two_size_first = one_size = -1;
        int temp;
        for(int i=0; i<size; i++) {
            cin >> temp;
            arr.push_back(temp);
        }   
    }

    void solve() {
        if (arr.size() < 3)
            return;

        one_size = two_size_first = arr[0];
        two_size_mid = INT_MAX;

        for(int i=1; i<arr.size(); i++) {
            if(arr[i] > two_size_mid) {
                end_index = i;
                return;
            }
            else if (two_size_first < arr[i] && arr[i] < two_size_mid) {
                two_size_mid = arr[i];
            }
            else if (one_size > arr[i]) {
                one_size = arr[i];
            }
            else {
                two_size_first = one_size;
                two_size_mid = arr[i];
            }
        }
    }

    void result() {
        if (end_index != -1) {
            cout << two_size_first << " " << two_size_mid << " " << arr[end_index] << endl; 
        }
        else {
            cout << "No such sequence found" << endl;
        }
    }
};

int main(int argc, char const *argv[])
{
    int size;
    cout << "Enter size" << endl;
    cin >> size;
    cout << "Enter "  << size << " array elements" << endl;
    Solution solution(size);

    solution.solve();
    solution.result();
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-07T09:23:19.300

我的方法 - **O(N) 时间两次通过使用两个变量的 O(1) 空间**

对于我们访问的数组的每个元素，我们保持其左侧的最小值以检查该元素是否可能是中间元素，并记录其左侧的最小中间元素以检查该元素是否可能是候选的第三个元素或者它可能会形成一个中间元素，其值低于目前找到的值。将 min so far 和 middle so far 初始化为 INT_MAX，

因此我们必须检查每个元素：

如果一个特定的数组元素大于到目前为止的中间元素的最小值，那么这个数组元素就是答案，其中 thi 作为第三个元素，最小的中间元素作为中间元素（我们必须在后面搜索第三个元素经过）

否则，如果特定数组元素大于最小值，则该元素可能是候选中间元素，现在我们必须检查候选中间元素是否小于当前中间元素，如果是则更新当前中间元素

ELSE 如果特定数组元素小于迄今为止的最小值，则使用 arr[i] 更新迄今为止的最小值。

因此，对于我们访问的数组的每个元素，我们保持其左侧的最小值以检查该元素是否可能是中间元素，并记录其左侧的最小中间元素以检查该元素是否可能是候选第三个元素，或者它可能形成一个比目前找到的值更低的中间元素。
#include 使用命名空间标准；

```
int main()
{
int i,j,k,n;
cin >> n;
int arr[n];
for(i = 0;i < n;++i)
    cin >> arr[i];
int m = INT_MAX,sm = INT_MAX,smi;// m => minimum so far found to left
for(i = 0;i < n;++i)// sm => smallest middle element found so far to left
{
    if(arr[i]>sm){break;}// This is the answer
    else if(arr[i] < m ){m = arr[i];}
    else if(arr[i] > m){if(arr[i]<sm){sm = arr[i];smi = i;}}
    else {;}
}
if((i < n)&&(arr[i]>sm))
{
    for(j = 0;j < smi;++j){if(arr[j] < sm){cout << arr[j] << " ";break;}}
    cout << sm << " " << arr[i]<< endl;
}
else 
    cout << "Such Pairs Do Not Exist" << endl;
return 0;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-07-09T15:43:35.743

这是我的具有 O(1) 空间复杂度的 O(n) 解决方案：- 只是一个返回由三个值组成的向量的函数（如果 exixts）

```
`vector<int> find3Numbers(vector<int> A, int N)
 {
    int first=INT_MAX,second=INT_MAX,third=INT_MAX,i,temp=-1;
    vector<int> ans;
    for(i=0;i<N;i++)
    {
        if(first!=INT_MAX&&second!=INT_MAX&&third!=INT_MAX)
        {
            ans.push_back(first);
            ans.push_back(second);
            ans.push_back(third);
            return ans;
        }
        if(A[i]<=first)
        {
            if(second!=INT_MAX)
            {
                if(temp==-1)
                {
                    temp=first;
                }
                first=A[i];
            }
            else
            {
                first=A[i];
            }
        }
        else if(A[i]<=second)
        {
            second=A[i];
            temp=-1;
        }
        else
        {
            if(temp!=-1)
            {
                first=temp;
            }
            third=A[i];
        }
    }
    if(first!=INT_MAX&&second!=INT_MAX&&third!=INT_MAX)
    {
        ans.push_back(first);
        ans.push_back(second);
        ans.push_back(third);
        return ans;
    }
    return ans;
}` 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-02T23:25:39.600

这是此问题的 O(n) 时间和 O(1) 空间复杂度解决方案

```
bool increasingTriplet(vector<int>& a) {

    int i,n=a.size(),first=INT_MAX,second=INT_MAX;
    if(n<3)
        return false;

    for(i=0;i<n;i++)
    {
        if(a[i]<=first)
            first = a[i];
        else if(a[i]<=second)
            second = a[i];
        else
            return true;
    }
    return false;
} 
```

如果数组中存在一对按升序排序的 3 个元素，则此函数返回 true。您还可以修改此函数以打印所有 3 个元素或其索引。只需更新它们的索引以及变量 first 和 second。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-03-04T15:01:20.657

我的解决方案如下。

```
public boolean increasingTriplet(int[] nums) {

    int min1 = Integer.MAX_VALUE;
    int min2 = Integer.MAX_VALUE;

    for (int i =0; i<nums.length; i++) {
        if (nums[i]<min1) {
            min1 = nums[i];
        } else if (nums[i]<min2 && nums[i]>min1) {
            min2=nums[i];
        } else if (nums[i]>min2) {
            return true;
        }
    }
    return false;
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-04-04T09:16:59.237

抱歉，我忍不住要解决这个难题……这是我的解决方案。

```
//array indices
int i, j, k = -1;
//values at those indices
int iv, jv, kv = 0;
for(int l=0; l<a.length(); l++){
    //if there is a value greater than the biggest value
    //shift all values from k to i
    if(a[l]>kv || j == -1 || i == -1){
        i = j;
        iv = jv;
        j = k;
        jv = kv
        kv = a[l]
        k = l
    }
    if(iv < jv && jv < kv && i < j && j < k){
        break;
    }    
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-04-04T09:18:56.050

尝试创建两个变量：

```
1\. index_sequence_length_1 = index i such
   a[i] is minimal number
2\. index_sequence_length_2 = index j such
   There is index i < j such that a[i] < a[j] and a[j] is minimal 
```

迭代整个数组并在每次迭代中更新此变量。

如果您遍历大于 a[index_sequence_length_2] 的元素，那么您会找到您的序列。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-04-04T19:16:37.880

迭代一次并完成：

```
public static int[] orderedHash(int[] A){
    int low=0, mid=1, high=2;
    for(int i=3; i<A.length; i++){
        if(A[high]>A[mid] && A[mid]>A[low])
            break;

        if(A[low]>A[i])
            low=mid=high=i;
        else if(low == mid && mid == high)
            mid = high = i;
        else if(mid == high){
            if(A[high]<A[i])
                high = i;
            else
                mid = high = i;
        }
        else if(A[mid]<A[i])
            high = i;
        else if( A[high]<A[i]){
            mid = high;
            high =i;
        }
        else
            mid=high=i;
    }
    return new int[]{A[low],A[mid],A[high]};
}// 
```

然后用 main 测试：

```
public static void main(String[] args) {
    int[][] D = {{1, 5, 5, 3, 2, 10},
        {1, 5, 5, 6, 2, 10},
        {1, 10, 5, 3, 2, 6, 12},
        {1, 10, 5, 6, 8, 12, 1},
        {1, 10, 5, 12, 1, 2, 3, 40},
        {10, 10, 10, 3, 4, 5, 7, 9}};
    for (int[] E : D) {
        System.out.format("%s GIVES %s%n", Arrays.toString(E), Arrays.toString(orderedHash(E)));
    }
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-04-10T20:59:46.033

如果你构建一个最大堆 O(n) 然后提取最大 O(1) 3 次怎么办？

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2015-11-26T18:55:01.443

这是一个只有一次迭代的解决方案。

我正在使用堆栈为每个索引 k 计算是否存在其他两个索引 i 和 j，使得 a[i] < a[j] < a[k]。

```
bool f(vector<int> a) {

    int n = a.size();
    stack<int> s;
    for (int i = 0; i < n; ++i)
    {
        while(!s.empty() and a[s.top()]>=a[i]){
            s.pop();
        }

        if (s.size()>=2) // s.size()>=k-1
        {
            return 1;
        }
        s.push(i);

    }

    return 0;
} 
```

重要的是，在一般情况下，我们可以将这个问题扩展到 M 个这样的索引，而不是 k 个索引。**

# asp.net-mvc-3 - 保存表单以在重定向到其他页面后显示它

> ID：10008119
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:00.393
> 
> 标签：asp.net-mvc-3

我有一个页面，用户可以在其中插入有关客户的一些信息。他可能需要添加一个新联系人（这个联系人有很多信息），所以用户将被重定向到创建联系人操作。

我的问题是如何保存尚未提交的客户的第一个信息并在添加联系人后显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:34:09.543

创建一个模拟客户端或一个临时 ID，然后返回并用真实数据填充它。

# c# - 参数无效 - 使用 C# 通过 TCP 发送位图时出错

> ID：10008124
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:11.503
> 
> 标签：c#, winforms, bitmap, file-transfer

我有一个文件传输程序。程序（客户端）执行以下操作以通过 TCP 套接字发送位图：获取屏幕截图 ->**从内存中获取位图**-> 转换为流 -> 发送

```
 MemoryStream Fs = new MemoryStream();

//////////////11111
        Bitmap bmp = TakeScreen();

///////////////2222
        //Bitmap bmp = new Bitmap(@"C:\temp\001.bmp");

        bmp.Save(Fs, ImageFormat.Bmp);
        Byte[] buffer = Fs.ToArray();

        Fs.Read(buffer, 0, buffer.Length);
        TcpClient socket = new TcpClient("192.168.0.131", 1095);

        NetworkStream nw = socket.GetStream();
        nw.Write(buffer, 0, buffer.Length);
        nw.Close();
        Fs.Dispose();
        socket.Close();
        bmp.Dispose(); 
```

*   如果我选择直接从内存中传输图像 - 没有错误。

*   如果我尝试先从文件加载位图 - 在服务器端出现“参数无效”错误。

这是服务器端：

```
 NetworkStream Nw = new NetworkStream(handlerSocket.Client);
                    int thisRead = 0;
                    int Blocksize = 1024;
                    Byte[] dataByte = new Byte[Blocksize];

                    Bitmap screen = getScreen(Nw, dataByte, thisRead, Blocksize);
                    Nw.Close(); 
```

和

```
 private Bitmap getScreen(NetworkStream Nw, Byte[] dataByte, int thisRead, int Blocksize)
    {
        Bitmap bitmap;
        using (var strm = new MemoryStream())
        {

            while (true)
            {
                thisRead = Nw.Read(dataByte, 0, Blocksize);
                strm.Write(dataByte, 0, thisRead);
                if (thisRead == 0)
                    break;
            }

            bitmap = new Bitmap(strm); // Error here
        }
        Bitmap bm3 = new Bitmap(bitmap);
        bitmap.Dispose();
        return bm3;
    } 
```

**是什么导致了这个错误？**我想这与 MemoryStream 有关。

**编辑：简化问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:59:47.047

您需要先搜索到流的开头，然后才能创建`Bitmap`in `getScreen`。

```
private Bitmap getScreen(NetworkStream Nw, Byte[] dataByte, int thisRead, int Blocksize)
{
    Bitmap bitmap;
    using (var strm = new MemoryStream())
    {
        while (true)
        {
            thisRead = Nw.Read(dataByte, 0, Blocksize);
            strm.Write(dataByte, 0, thisRead);
            if (thisRead == 0)
               break;
        }

        stream.Seek(0, SeekOrigin.Begin; // <-- Go Back to beginning of stream
        bitmap = new Bitmap(strm); // Error here
    }
    Bitmap bm3 = new Bitmap(bitmap);
    bitmap.Dispose();
    return bm3;
} 
```

**EDIT**
详细说明： 将最后一个字节写入流后，流的当前位置是流的结尾。现在从屏幕创建 a`Bitmap`会尝试从流中读取位图，但这不起作用，因为在当前位置（= 流的结尾）之后没有更多数据。

所以你需要做的是告诉流将当前位置设置回流的开头。然后，可以读取位图信息。

# sql-server-2008 - SSRS 报告，我如何在列上进行分组

> ID：10008125
> 
> 赞同：1
> 
> 时间：2012-04-04T09:09:19.447
> 
> 标签：sql-server-2008, reporting-services

在 MS SQL 2008 R2 DB 中，我有一个表：

```
Name, Value, Type
A, 1, T1
B, 2, T1
C, 3, T1
D, 4, T1

A, 10, T2
B, 20, T2
C, 13, T2
D, 45, T2

A, 11, T3
B, 22, T3
C, 33, T3
D, 44, T3 
```

我想做的是得到这个：

```
Name, Type
  T1, T2, T3
A, 1, 10, 11
B, 2, 20, 22
C, 3, 13, 33
D, 4, 45, 44 
```

从查询中，我可以返回：名称、值、类型 A、1、T1 B、2、T1 C、3、T1 D、4、T1

```
A, 10, T2
B, 20, T2
C, 13, T2
D, 45, T2

A, 11, T3
B, 22, T3
C, 33, T3
D, 44, T3 
```

现在我想获取这些数据并在 SSRS 中将其转换为这种形式：

```
Name, Type
      T1, T2, T3
    A, 1, 10, 11
    B, 2, 20, 22
    C, 3, 13, 33
    D, 4, 45, 44 
```

类型可以从一种执行更改为另一种执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T14:58:44.347

在我看来，你有两个选择：

您可以使用 PIVOT 修改查询以将行转换为列

[http://msdn.microsoft.com/en-us/library/ms177410.aspx](http://msdn.microsoft.com/en-us/library/ms177410.aspx)

或者您可以简单地创建一个“矩阵”报告。`Name`您的行值在哪里，您的列值在哪里，`type`并且`value`您的详细信息值在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T15:11:56.007

使用商业智能开发工作室“报表向导”创建一个新报表。它将指导您创建数据集、行组和列组。

一旦熟悉了这些，您可能就不想使用该向导，但对于刚开始使用矩阵的人来说，它非常适合。

# curl - 卷曲探测网络会话

> ID：10008129
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:27.833
> 
> 标签：curl

一种“新手问题”，部分确认/纠正我的理解：我想实现一些自动化的网站探测，包括。登录时，我不想实际提取任何数据。从早期的工作中，我记得 curl 并且仅用于检查 URL 可用性（评估 HTTP 响应代码，例如 200 与否），这很好用。现在该任务也正在登录 - 但我无法让它工作，并且怀疑这是否能按预期工作。在尝试了一段时间并通过 WWW 搜索后，我找不到明确的答案 - 所以我的希望就在这里 :-)

最初我的想法是使用脚本并将 curl POST 命令放入其中，以防万一cookies选项，例如：

```
$ curl -s -w "%{http_code}" -o /tmp/tge-HTML.out -b /tmp/tge-cookies -c /tmp/tge-cookies -F "username=bla&passwd=blub&Submit=Login" http://some.url 
```

（我使用 HTTPfox 来确定 POST 参数，并且我确信它们是正确的）

然后我通过文件 /tmp/tge-HTML.out 搜索它是否包含“注销”作为我已登录的证明（即使没有登录，我在所有测试中总是得到 HTTP 200 与我尝试的各种 URL ）。

在其中一种情况下（后面有 Tomcat）我看到，在 Firefox 中登录后，后续 URL 包含 ...&jsessionid=... 当然，我最初不知道 - 所以我尝试了几个例如，在 shell 脚本中调用 curl（命令！）两次，从第一个获取 sessionID 并将其附加到第二个 URL，例如：

```
 $ curl -s -w "%{http_code}" -o /tmp/tge-HTML.out -b /tmp/tge-cookies -c /tmp/tge-cookies -F "username=bla&passwd=blub&Submit=Login" http://some.url
 ... extract jsessionid from /tmp/tge-HTML.out ...
 $ curl -s -w "%{http_code}" -o /tmp/tge-HTML.out -b /tmp/tge-cookies -c /tmp/tge-cookies 
    http://some.url/...?jsessionid=... 
```

但是无论我尝试了什么，我都没有得到任何地方:-| 现在的问题：

1.  如果我按照上面的示例执行基于 curl 的 POST，我是否（通常？）获得完整的 HTML 页面作为响应，就像我在登录后在常规 Web 浏览器中看到的一样？

    *   在我看来好像是真的，但是应该做一个简单的 POST 并且它应该包含“注销”...
    *   但是，由于我从来没有让这个工作，可能有什么问题？
2.  如果我必须执行多个 HTTP 请求，那么使用 curl 命令这样的概念是否有效？curl退出时会发生什么？套接字关闭并且 Web 服务器可能关闭会话（并且我的 jsessionid 无效）？

    *   如果这种方法不起作用，基于 libcurl 的概念可能会更好吗？例如 phpcurl（刚刚阅读过但从未尝试过），我将会话保存在我的 php 脚本中，因此连接/会话保持打开等...
    *   可能取决于网站是否使用 cookie？
3.  有没有更好的想法如何完成最初的想法？理想情况下，它应该很简单，有一些脚本，但没有庞大的监控套件

很可能有很多“取决于...” :-| 此外，可能问题不是 100% 准确，但任何提示都表示赞赏！:-)

Rgds, tge

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:21:34.810

好的，最后我取得了一些进展 - 也许它可以帮助其他人......首先，基于脚本的方法确实有效，至少在服务器端使用 Joomla 的一个测试用例中（我稍后会尝试其他的） ）。解决方案的关键是： [CURL login by script to a Joomla website](https://stackoverflow.com/questions/2212557/curl-login-by-script-to-a-joomla-website)

与所描述的方式类似，我从第一个 GET 的响应中提取令牌并将其放入第二个的表单参数中：

```
rm -f /tmp/tge-cookies
HTTP_CODE=$(./curl -s -w "%{http_code}\\n" -o /tmp/tge-HTML-out.1 -b /tmp/tge-cookies -c /tmp/tge-cookies -L ${URL})
# Eval HTTP_CODE ...
Token=`awk '{ if(match($1, "<input") && match($3, "name=\"[a-z0-9]+\""))
  {
    gsub("name=\"", "", $3);
    gsub("\"", "", $3);
    if(length($3) == 33)
    {
      print $3;
      exit 0;
    }
  } }' /tmp/tge-HTML-out.1`
HTTP_CODE=$(./curl -L -s -w "%{http_code}\\n" -o /tmp/tge-HTML-out.2 -b /tmp/tge-cookies -c /tmp/tge-cookies -d "username=${User}&passwd=${Pass}&option=login&task=login&${Token}=1&remember=yes&Submit=Login" ${URL})
# Eval HTTP_CODE ...
# Eval /tmp/tge-HTML-out.2 whether containing "Logout" ... 
```

第二个区别是使用“-F”不起作用，但“-d”起作用。相当有趣的是 POST 参数与我在 HTTPfox 中看到的不同。

问候 tge

# naudio - 使用 NAudio 读取 mp3 文件时，目标数组不够长

> ID：10008130
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:29.290
> 
> 标签：naudio

我有这个代码：

```
static void Main(string[] args)
{
    try
    {
        Mp3FileReader reader = new Mp3FileReader(@"C:\testAudio.mp3");
        long count = reader.Length;
        if (count <= int.MaxValue)
        {
             byte[] info = new byte[count];
             reader.Read(info, 0, (int)count);
             Console.WriteLine("Succesfull read");
        }
        else
             Console.WriteLine("Could not read");
     }
     catch(Exception ex)
     {
         Console.WriteLine(ex);
     }
} 
```

打印出以下异常消息：

```
System.ArgumentException: Destination array was not long enough. Check destIndex and length, and the array's lower bounds. 
at System.Array.Copy(Array sourceArray, Int32 sourceIndex, Array destinationArray, Int32 destinationIndex, Int32 length, Boolean reliable) 
at System.Array.Copy(Array sourceArray, Int32 sourceIndex, Array destinationArray, Int32 destinationIndex, Int32 length) 
at NAudio.Wave.AcmMp3FrameDecompressor.DecompressFrame(Mp3Frame frame, Byte[] dest, Int32 destOffset) in C:\NAudio-Source\NAudio\FileFormats\Mp3\Mp3FrameDecompressor.cs:line 50 
at NAudio.Wave.Mp3FileReader.Read(Byte[] sampleBuffer, Int32 offset, Int32 numBytes) in C:\NAudio-Source\NAudio\Wave\WaveStreams\Mp3FileReader.cs:line 338 
at Tester.Program.Main(String[] args) in C:\Tester\Program.cs:line 30 
```

我已经下载了 NAudio 代码并且一直在调试它，但是我找不到错误的原因，正如您在堆栈跟踪中看到的那样，在*NAudio-Source\NAudio\FileFormats\Mp3\Mp3FrameDecompressor.cs ：第 50 行*

难道我做错了什么？顺便说一句，它只发生在几个 mp3 文件中，其他文件读得很好。如果需要，我可以发送一份有冲突的文件。

-------------------------编辑参考NAUDIO CODEPLEX上的线程----- ---------------

在 Codeplex 上查看此问题[Codeplex NAudio上的相同问题](http://naudio.codeplex.com/workitem/16345)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T12:54:39.550

不要试图一键读取整个文件。相反，一次阅读大约一秒钟，然后继续阅读，直到 Read 返回 0。

# hadoop - 我可以在 hadoop 上使用基于用户的推荐吗？

> ID：10008132
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:09:34.987
> 
> 标签：hadoop, mahout, recommendation-engine, mahout-recommender

我正在阅读'Mahout in action'，从这本书中，我注意到我可以设置基于项目的推荐。所以我想知道是否有人设置了基于用户的推荐。而且据我所知 FileDataModel 支持更新文件，这是在单台 PC 上使用的。在hadoop上怎么样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:10:16.523

Hadoop 上没有可用的基于用户的推荐算法。应该可以写了。一般来说，我会引导您采用这种规模的基于项目相似性的方法。不，Hadoop 中没有更新文件的概念，因为它不是必需的。

# android - 单击进入时，它不会立即进入android中的下一个编辑字段

> ID：10008134
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:38.553
> 
> 标签：android, android-edittext

这是我的代码：

```
uam.setOnKeyListener(new OnKeyListener() {

              public boolean onKey(View view, int keyCode, KeyEvent event){
                if (event.getAction() == KeyEvent.ACTION_DOWN){
                  switch (keyCode)
                  {
                    case KeyEvent.KEYCODE_DPAD_CENTER:
                    case KeyEvent.KEYCODE_ENTER:
                      if(((EditText)findViewById(view.getId())) == ((EditText)findViewById(R.id.UamEditTextFm)))
                      {
                          Log.d("setOnKeyListener","Uam To port");
                        ((EditText) findViewById(R.id.PortAdvFm)).requestFocus();

                      }
                      return true;
                    default:
                      break;
                  }
                }
                return false;
              }
            });

        port.setOnKeyListener(new OnKeyListener() {
              public boolean onKey(View view, int keyCode, KeyEvent event){
                if (event.getAction() == KeyEvent.ACTION_DOWN){
                  switch (keyCode)
                  {
                    case KeyEvent.KEYCODE_DPAD_CENTER:
                    case KeyEvent.KEYCODE_ENTER:
                      if(((EditText)findViewById(view.getId())) == ((EditText)findViewById(R.id.PortAdvFm)))
                      {
                          Log.d("setOnKeyListener","Port To ConType");
                          ((EditText) findViewById(R.id.ConTypeAdvFm)).requestFocus();
                      }
                      return true;
                    default:
                      break;
                  }
                }
                return false;
              }
            });

        connectType.setOnKeyListener(new OnKeyListener() {
              public boolean onKey(View view, int keyCode, KeyEvent event){
                if (event.getAction() == KeyEvent.ACTION_DOWN){
                  switch (keyCode)
                  {
                    case KeyEvent.KEYCODE_DPAD_CENTER:
                    case KeyEvent.KEYCODE_ENTER:
                      if(((EditText)findViewById(view.getId())) == ((EditText)findViewById(R.id.ConTypeAdvFm)))
                      {
                          Log.d("setOnKeyListener","ConType To saveBtn ");
                        ((Button) findViewById(R.id.SaveAdvSettingofFm)).requestFocus();
                        ((Button) findViewById(R.id.SaveAdvSettingofFm)).performClick();
                      }
                      return true;
                    default:
                      break;
                  }
                }
                return false;
              }
            }); 
```

**单击 Enter 时，它不关注`port`，但焦点转到该`connectType`字段。** 请帮帮我。xml文件是：

```
<TableLayout android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <TableRow android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="horizontal">
        <TextView android:text="UAM:" />
        <EditText android:id="@+id/UamEditTextFm" android:singleLine="true" android:inputType="textPersonName"
            android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:autoText="true" />
    </TableRow>

    <TableRow android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="horizontal">
        <TextView android:text="Port:" />

        <EditText android:layout_height="wrap_content" android:singleLine="true" android:inputType="textPersonName"
            android:layout_width="fill_parent" 
            android:id="@+id/PortAdvFm" />

    </TableRow>
    <TableRow android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:orientation="horizontal">
        <TextView android:text="ConType:" />

        <EditText android:layout_height="wrap_content" android:singleLine="true" android:inputType="textPersonName"
            android:layout_width="fill_parent" 
            android:id="@+id/ConTypeAdvFm" />

    </TableRow>
</TableLayout>

<Button android:id="@+id/SaveAdvSettingofFm" android:text="Save"
     android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:layout_gravity="right" android:layout_margin="5dp"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:14:21.250

在您的编辑文本 xml 标记中添加此行

```
 android:inputType="textPersonName" 
```

# ruby-on-rails - Rails 3 - default_url_options 基于正在生成的 url

> ID：10008135
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:42.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, routes, rails-routing

在 rails 3 中，是否可以访问在 default_url_options() 内部生成的 URL 的控制器/操作？在 rails 2 中，您收到了即将被传递给 url_for() 的选项的哈希值，您当然可以更改这些选项。

例如 Rails 2 代码：

```
==== config/routes.rb
  map.foo '/foo/:shard/:id', :controller => 'foo', :action => 'show'

==== app/controllers/application.rb
  def default_url_options options = {}
    options = super(options)
    if options[:controller] == 'some_controller' and options[:id]
      options[:shard] = options[:id].to_s[0..2]
    end
    options
  end

==== anywhere
  foo_path(:id => 12345) # => /foo/12/12345 
```

但是，在 rails 3 中，由于 default_url_options 没有传递任何选项哈希，相同的代码失败了，我还没有弄清楚如何测试控制器是什么。

FWIW，上述“分片”是由于当您打开缓存时，如果您的数据库中有大量 foo 行，那么您将在基于 unix 的系统上达到 inode 限制，以获取 1 个文件夹中的文件数在某一点。此处正确的“修复”可能是更改缓存设置以将文件存储在分片路径中，而不是完全分片路由。不过，在编写上述代码时，我的一部分感觉总是将缓存文件与路由保持在相同的结构中是很好的，以防万一您想要使用 rails 之外的东西来服务缓存。

但是，唉，我仍然对上述解决方案感兴趣，纯粹是因为它在吞噬我，我无法弄清楚。

编辑：目前我有以下我必须放弃的，因为你失去了所有其他 named_route 功能。

```
==== config/routes.rb
  match 'foo/:shard/:id' => 'foo#show', :as => 'original_foo'

==== app/controllers/application.rb
  helpers :foo_path

  def foo_path *args
    opts = args.first if opts.is_a?(Array)
    args = opts.merge(:shard => opts[:id].to_s[0..2]) if opts.is_a?(Hash) and opts[:id]
    original_foo_path(args)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:49:16.583

define a helper like

```
# app/helpers/foo_helper.rb
module FooHelper
  def link_to name, options = {}, &block
    options[:shard] = options[:id].to_s[0..1] if options[:id]
    super name, options, &block
  end 
end 
```

and then do the following in your view, seems to work for me

```
<%= link_to("my shard", id: 12345) %> 
```

edit: or customize the `foo_path` as

```
module FooHelper
  def link_to name, options = {}, &block
    options[:shard] = options[:id].to_s[0..1] if options[:id]
    super name, options, &block
  end 

  def foo_path options = {}
    options[:shard] = options[:id].to_s[0..1] if options[:id]
    super options
  end 
end 
```

# perl - 如何在 perl 脚本中导入多个包？

> ID：10008138
> 
> 赞同：-5
> 
> 时间：2012-04-04T09:09:50.427
> 
> 标签：perl, perl-module

> **可能重复：**
> [如何在我们自己的 perl 脚本中导入多个自定义模块？](https://stackoverflow.com/questions/9993478/how-to-import-multiple-custom-modules-in-our-own-perl-script)

我有一些包裹。我想一次全部导入。现在，我正在做

```
use lib 'path to packages';

use package1;

use package2;

......

use packageN; 
```

哪个工作正常。但我想在一个命令中导入所有包。有人可以建议我一个最简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:30:18.103

Audrey Tang 在 CPAN 上有一个相对较新的模块，称为“**[使用](http://search.cpan.org/perldoc?use)**”，它将完全按照您的要求进行。从它的简介：

`use use qw[ strict warnings methods invoker ];`

它还有其他功能，包括指定导入列表等选项的能力，因此请阅读文档。但至少，只需将您自己的模块名称替换为我的示例代码中列举的模块名称。

**更新：** 所以要尽可能清楚地说明它：首先，安装我在此答案顶部链接到的“使用”模块。其次，修改您在问题中发布的代码，使其如下所示：

```
use lib 'path to packages';
use use qw[ package1 package2 package3 package4 ..... ]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T15:36:19.333

好吧，你可以制作一个为你做这件事的模块。例如：

```
use v5.10;

use strict; 
use warnings;

use mro     (); 
use feature ();

sub import {
    warnings->import();
    strict->import(); 
} 

1; 
```

现在，上面的模块不起作用，但你明白了要点。如果您想要一个这样的工作示例，请查看[Modern::Perl 的源代码](http://cpansearch.perl.org/src/CHROMATIC/Modern-Perl-1.20120130/lib/Modern/Perl.pm)。

如果你做这样的事情，你只需要写一行！

希望这可以帮助！

# javascript - 仅当单击两次时，我的 LinkBut ton 才在其 Click 事件中运行代码

> ID：10008139
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:52.127
> 
> 标签：javascript, asp.net, dom-events, asp.net-ajax

```
Protected Sub lnkContractors_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles lnkContractors.Click

    If Context.User.IsInRole("HOD") Then
        lnkContractors.OnClientClick = "PopupCenter('Juniors.aspx', 'myPop1',820,500);"
    ElseIf Context.User.IsInRole("Contractor") Then
        lnkContractors.OnClientClick = "PopupCenter('Contractors.aspx', 'myPop1',820,500);"
    End If

End Sub 
```

我的母版页中有一个链接按钮，链接按钮位于更新面板中。问题是，当我第一次单击链接按钮时，页面只刷新但弹出窗口没有打开。我必须第二次单击才能打开弹出窗口。

```
function PopupCenter(pageURL, title, w, h) {
            var left = (screen.width / 2) - (w / 2);
            var top = (screen.height / 2) - (h / 2);
            var targetWin = window.open(pageURL, title, 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=yes, copyhistory=no, width=' + w + ', height=' + h + ', top=' + top + ', left=' + left);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:41:55.377

您需要`OnClientClick`在页面加载时声明 JavaScript 函数。不在按钮`OnClick`事件中。由于需要在页面加载后立即决定向您的按钮添加客户端功能。

只需将您当前在按钮单击事件中的代码移动到 Page Load 事件，看看会发生什么。

# c# - C# 和 SQL Server：更新存储过程的问题

> ID：10008141
> 
> 赞同：0
> 
> 时间：2012-04-04T09:09:55.663
> 
> 标签：c#, sql-server-2008, stored-procedures, sql-update

使用：

*   微软 SQL 服务器 2008
*   微软视觉工作室 2010
*   C＃
*   .NET 4.0
*   WinForms

好的，这是我的存储过程。振作起来，因为我有 24 小时的最后期限，所以昨天我下班时有人告诉我（是的，我很生气）。

```
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[MyPareto]
    @pgParam varchar(255)
AS
   SELECT i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto

FROM
OPENQUERY(SACBAUTO, 'SELECT dbo.iLines.Part,
                            dbo.iLines.Pg,
                            SUM(dbo.iLines.Qty) as sales6months,
                            dbo.iLines.Prefix 
                     FROM Autopart.dbo.iLines 
                     where prefix = ''i''
                     and [datetime] > dateadd(month, -6, getdate())
                     group by 
                     dbo.ilines.pg,
                     dbo.ilines.part,
                     dbo.ilines.prefix
                     order by sales6months desc') i
RIGHT JOIN
dbo.OldParetoAnalysis
on
i.part collate SQL_Latin1_General_CP1_CI_AS = dbo.OldParetoAnalysis.Part
INNER JOIN
dbo.NewParetoAnalysis
ON
dbo.OldParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS =    dbo.NewParetoAnalysis.Part

LEFT JOIN
OPENQUERY(SACBAUTO, 'SELECT dbo.aLines.Part,
                            dbo.aLines.Pg,
                            SUM(dbo.aLines.Qty) as LostSales6Months,
                            dbo.aLines.Prefix 
                     FROM Autopart.dbo.aLines 
                     where prefix = ''d''
                     and [datetime] > dateadd(month, -6, getdate())
                     group by 
                     dbo.alines.pg,
                     dbo.alines.part,
                     dbo.alines.prefix
                     order by LostSales6Months desc') a
ON
dbo.NewParetoAnalysis.Part collate SQL_Latin1_General_CP1_CI_AS = a.part
/*FULL OUTER JOIN
dbo.NewParetoAnalysis
ON
a.part collate SQL_Latin1_General_CP1_CI_AS = dbo.NewParetoAnalysis.Part*/
WHERE
i.pg = @pgParam
GROUP BY
   i.pg,
   dbo.OldParetoAnalysis.Pareto,
   i.part,
   i.sales6months,
   a.LostSales6Months,
   dbo.NewParetoAnalysis.Pareto
ORDER BY
dbo.OldParetoAnalysis.Pareto asc 
```

程序效果很好，也很快（不知道如何呵呵）。我现在遇到的问题是如何更新。

我只想更新 2 个表：`OldPareto`和`NewPareto`.

数据将仅来自一列，即该`NewPareto`列。这将更新两个表中的列。

通常它只是在代码中使用and的一个简单`UPDATE`调用。`SqlDataAdapter``DataSet`

但是由于我有这个疯狂的存储过程，我对它是如何工作的感到困扰。

您需要的任何 C# 代码都可以告诉我。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:06:53.343

> 一个冗长的方法就是在我的代码中将新的帕累托放入一个新表中，然后使用该表来更新我的 2 个 sql 表

或者在 sql 过程本身。我仍然不明白您的对象及其关系是什么，但这里是执行类似更新的一般方法：

首先在程序开始时声明临时表：

```
declare @tmpTable table 
(
  pg int, 
  oldPareto int, 
  part int, 
  sales6months int, 
  LostSales6Months int,
  newPareto int
) 
```

显然，列类型与您的不匹配，因此您需要正确键入它们。使用您的选择执行插入：

```
insert into @tmpTable 
     (pg, oldPareto, part, sales6months, LostSales6Months, newPareto)
     select ... 
```

然后执行更新：

```
update oldPareto
   set oldPareto = a.oldPareto,
       newPareto = a.newPareto
  from oldPareto
    inner join @tmpTable a
       on ... -- However you join oldPareto table with results of query

update newPareto
   set oldPareto = a.oldPareto,
       newPareto = a.newPareto
  from newPareto
    inner join @tmpTable a
       on ... -- However you join newPareto table with results of query 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:17:58.517

在“dbo.OldParetoAnalysis.Pareto asc”下面写一段PL/SQL代码

例如： UPDATE OldPareto,NewPareto SET OldPareto.NewPareto = 'value' ...

参考这个： -

[http://www.java2s.com/Tutorial/MySQL/0140__Insert-Update-Delete/Updatetwotablesinoneupdatestatement.htm]

# file - 如何使用 smartgwt 从服务器下载文件？

> ID：10008143
> 
> 赞同：0
> 
> 时间：2012-04-04T09:10:03.510
> 
> 标签：file, download, smartgwt

在客户端操作中，会在服务器上创建一个文件，我希望允许客户端下载该文件。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:43:48.833

您始终可以通过 rpc 服务发送对象将数据带回客户端。你还是可以看看[这里](https://stackoverflow.com/questions/3053462/open-save-file-in-smartgwt)

# python - 在 Python 中创建 ICMP 跟踪路由

> ID：10008144
> 
> 赞同：0
> 
> 时间：2012-04-04T09:10:51.623
> 
> 标签：python, sockets, udp, icmp, traceroute

我正在尝试在 Python 中实现基于 ICMP 的 Traceroute。我找到了一个非常有用的指南 ( [https://blogs.oracle.com/ksplice/entry/learning_by_doing_writing_your](https://blogs.oracle.com/ksplice/entry/learning_by_doing_writing_your) )，它允许我创建一个基于 UDP 的 Traceroute，所以只需要修改。但是，我环顾四周，无法更改发送套接字并使其工作。有人可以帮助我吗？

```
 #!/usr/bin/python

import socket

def main(dest_name):
    dest_addr = socket.gethostbyname(dest_name)
    port = 33434
    max_hops = 30
    icmp = socket.getprotobyname('icmp')
    udp = socket.getprotobyname('udp')
    ttl = 1
    while True:
        recv_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, icmp)
        send_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, udp)
        send_socket.setsockopt(socket.SOL_IP, socket.IP_TTL, ttl)
        recv_socket.bind(("", port))
        send_socket.sendto("", (dest_name, port))
        curr_addr = None
        curr_name = None
        try:
            _, curr_addr = recv_socket.recvfrom(512)
            curr_addr = curr_addr[0]
            try:
                curr_name = socket.gethostbyaddr(curr_addr)[0]
            except socket.error:
                curr_name = curr_addr
        except socket.error:
            pass
        finally:
            send_socket.close()
            recv_socket.close()

        if curr_addr is not None:
            curr_host = "%s (%s)" % (curr_name, curr_addr)
        else:
            curr_host = "*"
        print "%d\t%s" % (ttl, curr_host)

        ttl += 1
        if curr_addr == dest_addr or ttl &gt; max_hops:
            break

if __name__ == "__main__":
    main('google.com') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-17T19:34:12.800

不知道你为什么选择 scapy （虽然它是一个不错的模块），因为这当然可以只使用 python。要发送 ICMP 数据包，您只需发送 recv_socket。为了发送这个套接字，您需要首先创建一个 ICMP 数据包。

但是，您似乎想要通过 ICMP 套接字发送 UDP 数据包。这不会像你想象的那样工作。

首先，让我说显然存在一个 Linux 内核补丁，它允许 SOCK_DGRAM 和 IPPROTO_ICMP: [ICMP sockets (linux)](https://stackoverflow.com/questions/8290046/icmp-sockets-linux/20105379#20105379)。我没有测试过这个。

但是，一般来说，这种套接字标志的组合是行不通的。这是因为 ICMP 套接字需要一个 ICMP 标头。如果您要通过 recv_socket 发送一个空字符串，类似于 send_socket，内核将丢弃该数据包。此外，如果您要在 ICMP 标头上叠加 UDP 标头，则接收系统只会对收到的 ICMP 标头做出反应，并将 UDP 标头视为附加到 ICMP 的数据。事实上，在它给你的 ICMP 回复中，远程系统会将你的 UDP 报头简单地包含为你发送给它的数据。

您能够通过 send_socket 发送空字符串的原因是内核已经为您创建了 UDP 标头，您通过该 UDP 套接字发送的内容只是作为数据附加到 UDP 标头。与 ICMP 套接字不同。正如我所写，您需要创建 icmp 标头以在此套接字上发送。

UDP“ping”中发生的实际情况是这样的：UDP数据包通过UDP套接字发送到远程系统，使用（希望）未打开的端口作为目标端口。这会引发来自远程系统的 ICMP 响应（类型 3，代码 3）。此时，您将需要一个 ICMP 注册的套接字来处理 ICMP 回复，这需要 root（或 Windows 上的管理员）权限。

创建 icmp 回显头非常简单：

```
import struct
icmp = struct.pack(">BBHHH", 8, 0, 0, 0, 0)
icmp = struct.pack(">BBHHH", 8, 0, checksum(icmp), 0, 0) 
```

这个标题有几点需要注意。首先，参数四和五是“标识符”和“序列号”字段。通常，标识符设置为进程 ID，而序列号从 1 开始，因此您可以跟踪发送到回复的序列。在这个例子中，我将数字设置为零只是为了说明（尽管如果你不关心它们，保持这种方式是完全正常的）。

其次，看到我提到的 checksum(icmp) 函数了吗？我假设您可以访问执行此操作的代码。它被称为 1 的补码校验和，并在 RFC 1071 下得到批准。校验和至关重要，因为如果没有正确计算，接收系统可能不会将数据包转发到任何 ICMP 套接字处理程序。

第三，如果您想知道为什么我最初创建带有零校验和的标头，那是因为内核在创建实际校验和并将其添加回标头之前基于该字段为零的校验和结果。

因为 struct 模块处理所谓的“打包”二进制数据，所以我建议您熟悉位移位和位运算符。当您进一步进入原始套接字时，您将需要这个，特别是当您需要从可能重叠或可能不重叠的位字段中提取某些位时。例如，以下是 IP 标头：

```
 0                   1                   2                   3   
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 0 |Version|  IHL  |Type of Service|          Total Length         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 4 |         Identification        |Flags|      Fragment Offset    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 8 |  Time to Live |    Protocol   |         Header Checksum       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
12 |                       Source Address                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
16 |                    Destination Address                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
20 |                    Options                    |    Padding    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
```

假设您想在源字段中插入 IP 地址 192.168.1.10，首先您必须注意它的长度，4 个字节。要将其正确插入到结构中（仅此字段，而不是标题的其余部分，例如），您必须：

```
struct.pack(">I", 192 << 24| 168 << 16| 1 << 8| 10) 
```

这样做会为该字段添加正确的整数 3232235786L。

（有些读者可能会指出 struct.pack(">BBBB", 192, 168, 1, 10 可能会得到相同的结果）。虽然这适用于这个用例，但一般来说它是不正确的。在这种情况下, 因为IP地址是面向字节的，所以有效；但是，不面向字节的字段，例如校验和字段，将失败，因为校验和的结果值大于255，也就是说，它是预期的是一个 16 位的值。所以一般不要这样做，即使用协议字段期望的确切位。）

作为学习位移和操作的另一个例子，以IP头的VER字段为例。这是一个半字节大小的字段，即 4 位。为了提取这一点，您将执行以下示例（假设国际人道法为零）：

```
# Assume ip[] already has a full IP header.
ver = struct.unpack("!B", ip[0])[0]

# This produces the integer 4, which is required for sending IPV4
ver >> 4 
```

简而言之，我将一个单字节值右移了 4 位。在此降档中，与旧值相比，新值现在如下所示：

```
# OLD VALUE IN BINARY; value is 64
# 01000000

# NEW VALUE IN BINARY; value is 4
# 00000100 
```

需要注意的是，如果没有这种转变，检查原始二进制值将导致 64，这不是预期的。相反，为了将值 4 “打包”到一个字节的高 4 位中，请执行以下操作：

```
# New value will be 64, or binary 01000000
x = 4 << 4 
```

希望这能为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T04:52:10.143

老问题，但为了清楚起见，我最近不得不这样做。

您可以使用套接字编写本机 Python 版本的 ICMP 跟踪路由。要解决的两个重要问题是：

1.  使用正确的校验和创建 ICMP 标头（如 Eugene 上面所述）
2.  使用 sockopts 设置套接字的 TTL

对于第一个问题，pyping 模块中有一个很好的示例，它可以完美运行；这是我在编写我的 traceroute 实用程序时使用的。

对于第二个，它很简单：

```
current_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, 
                               socket.getprotobyname("icmp"))
current_socket.setsockopt(socket.IPPROTO_IP, socket.IP_TTL, ttl) 
```

其中 'ttl' 是您设置的 TTL 的整数值

然后只需在增加 TTL 的控制结构中进行发送/接收并观察返回数据包中的类型/代码。

我根据 pyping 模块中已经编写的内容建模了我的头文件包/解包；只需查找标头类型 = 11，中间跃点代码为 0，标头类型 = 0 表示您到达目的地时。

Scapy 工作正常，但速度较慢，并且是一个额外的外部依赖项。我能够在一个下午使用 AS-lookup（通过 RADb）和地理定位编写一个健壮的跟踪路由，只使用套接字。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-09T08:51:25.880

最终使用 scapy 编写了我自己的，因为这是不可能的。

# python - 如果我正在使用 Twisted 编写多人游戏服务器，使用哪种协议？

> ID：10008148
> 
> 赞同：3
> 
> 时间：2012-04-04T09:11:06.817
> 
> 标签：python, twisted, multiplayer

我正在使用 Twisted 开发多人游戏服务器。这是一个简单的游戏，在每张地图上都有几个玩家可以互相互动。一开始，我只是想让他们动起来，让别人看到。

我认为我需要来回发送的大多数数据是运动数据，例如方向，速度等。

有没有 Twisted 已经实现的协议我应该使用？`NetstringReceiver`对这个有好处吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T20:00:42.370

使用[AMP](http://amp-protocol.net/)。Twisted 包含[一个非常好的实现](http://twistedmatrix.com/documents/current/api/twisted.protocols.amp.html)。[您可以在启动板上的游戏项目](http://launchpad.net/game)中找到在 2d 游戏中使用 AMP 的示例。

另请参阅这个非常相似的问题，[Basic networking with Pygame](https://stackoverflow.com/questions/9961752/basic-networking-with-pygame)

# c++ - 使用 Boost 从多元正态分布中采样

> ID：10008150
> 
> 赞同：1
> 
> 时间：2012-04-04T09:11:16.150
> 
> 标签：c++, boost, normal-distribution, multivariate-partition

我可以使用 C++ 中的 Boost 从正态分布中采样。

我现在有一个简单的问题：

如何使用 Boost 函数（正态分布、多阵列...）从多元正态分布（n>2）中采样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T20:36:35.700

我认为如果没有一点线性代数，你将无法做到这一点。实际上，如果您有一个协方差矩阵 C，您可以使用[Cholesky 分解](http://en.wikipedia.org/wiki/Cholesky_decomposition)生成一个上三角矩阵 L ，使得 C = L*L^T。该矩阵 L 现在可用于从具有协方差 C 的分布中生成样本，方法是将 L 应用于不相关噪声的向量。

# html - 登录区域的内联宽度，覆盖 CSS 中的默认值

> ID：10008152
> 
> 赞同：0
> 
> 时间：2012-04-04T09:11:18.727
> 
> 标签：html, css, background, width

请问我的表单背景图像显示有问题。它适用于网站上的其他表单，但我想在表单的登录区域应用一些高度和宽度，它实际上显示图像但宽度太大。如果我调整 CSS 宽度，它对其他人来说很好。所以我可以只为登录区域做一种内联宽度吗？

感谢您的时间和耐心，我非常感激。

**CSS**

```
 form {
   background-color: red;
   width: 550px;
   background: url(../images/back.gif)            top right:
   } 
```

**HTML**

```
 <form action="form.php" method     = "post">
    Username: <input type = "text" name      = "username">

    Password: <input type = "password"       name = "password" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:32:07.043

像这样向表单添加一个ID

```
<form id="login-id" action="form.php" method     = "post">
Username: <input type = "text" name  = "username">
Password: <input type = "password" name = "password" > 
```

然后在css文件中：

```
#login-id 
{
width: XXpx;
} 
```

或者您也可以通过为输入提供 id 来修改元素本身

```
<input id="form-user" type = "text" name = "username">

css:
#form-user { width:50px; } 
```

内联：输入类型=“文本”名称=“用户名”样式=“宽度：[某些像素]像素；”

（不让我把它和 < > 放在一起，你必须自己把它放在那里）

# c# - 如何在c#winforms中将pdf转换为bmp图像

> ID：10008156
> 
> 赞同：0
> 
> 时间：2012-04-04T09:11:23.557
> 
> 标签：c#, winforms

如何在 c# windows 窗体中将 pdf 转换为 bmp 图像，是否有任何开源库用于将 pdf 转换为图像.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:18:31.713

看看这个： [http ://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

或者可能是 GhostScript： http: [//www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API](http://www.codeproject.com/Articles/32274/How-To-Convert-PDF-to-Image-Using-Ghostscript-API)

我自己还没有测试过，但根据某些人的说法，它可能是你想要的东西。

# javascript - IE8 - Ajax 请求返回状态 0

> ID：10008158
> 
> 赞同：0
> 
> 时间：2012-04-04T09:11:28.887
> 
> 标签：javascript, jquery, ajax

我正在与仅出现在 IE8 中的状态 0 作斗争。在 Chrome、FF、IE9 等中像魅力一样工作。但首先是代码：

```
$j.ajax({
  url: prodUrl,
  type: "html",
  cache: false,
  success: function(data) {
           do stuff with data
  },
  error: function(jqXHR, textStatus, errorThrown) {
           console.log(jqXHR.status);
           console.log(jqXHR.responseXML);
           console.log(jqXHR.responseText);
           console.log(prodUrl);
  }
}); 
```

prodUrl 是相对的，但也已使用绝对路径进行了测试。我不是在做 X-site 脚本。

```
prodUrl = "/somePage.html"; 
```

问题是：有谁知道beeb IE8的问题是什么，除了它是一个垃圾浏览器；）我的意思是我需要找到一种方法来消除错误，我像疯子一样用谷歌搜索，没有任何运气。因此，如果您对 IE8 为何抛出状态 0 有任何想法，那将非常有帮助。：

我在这里完全迷失了，任何建议都会帮助分配。

# c# - 在 ASP.NET 中将数据导出和导入到 Excel 文件中的问题

> ID：10008159
> 
> 赞同：1
> 
> 时间：2012-04-04T09:11:39.663
> 
> 标签：c#, asp.net

我正在使用以下代码将数据表中的数据导入到 excel 文件中：

```
public void ExportDataTable(DataTable dt)
        {
            string attachment = "attachment; filename=EmployeeList.xls";
            HttpContext.Current.Response.Clear();
            HttpContext.Current.Response.AddHeader("content-disposition", attachment);
            HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
            string sTab = "";
            foreach (DataColumn dc in dt.Columns)
            {
                HttpContext.Current.Response.Write(sTab + dc.ColumnName);
                sTab = "\t";
            }
            HttpContext.Current.Response.Write("\n");

            int i;
            foreach (DataRow dr in dt.Rows)
            {
                sTab = "";
                for (i = 0; i < dt.Columns.Count; i++)
                {
                    HttpContext.Current.Response.Write(sTab + dr[i].ToString());
                    sTab = "\t";
                }
                HttpContext.Current.Response.Write("\n");
            }
            HttpContext.Current.Response.End();
        } 
```

它工作正常。

现在，当我将此 excel 文件导入数据表时，会出现以下错误：

外部表不是预期的格式。

这是我将 excel 文件导出到数据表的代码：

```
 public static DataTable excelToDataTable(string file)
        {
            DataTable dt = new DataTable();
            OleDbConnection oledbcn = new OleDbConnection(@"Provider=Microsoft.Jet.OLEDB.4.0;Data Source= Server.MapPath("EmployeeList.xls").ToString(); Extended Properties='Excel 8.0;HDR=Yes;IMEX=1'");       
            string SheetName = "EmployeeList";
            oledbcn.Open();
            OleDbCommand cmd = new OleDbCommand(@"SELECT * FROM [" + SheetName + "$]", oledbcn);
            OleDbDataAdapter oledbda = new OleDbDataAdapter();
            oledbda.SelectCommand = cmd;
            oledbda.Fill(dt);
            oledbcn.Close();

            return dt;
        } 
```

请以我可以导出和导入 MSOffice 2003 和 2007 excel 文件的方式解决我的问题。

谢谢，拉杰比尔

# java - 用于域的 Google 应用（身份验证）

> ID：10008160
> 
> 赞同：0
> 
> 时间：2012-04-04T09:11:46.407
> 
> 标签：java, eclipse, google-app-engine, google-apps

我正在做一个项目，并决定为 Google Apps 域编写一个 Google App。我对这些东西了解不多，但我愿意学习:-)

我创建了一个新应用程序，为特定谷歌应用程序域的用户设置了身份验证，使用 Eclipse 上传了我的应用程序（我的“应用程序”是一个带有 javascript 的 html 站点），然后我将此应用程序作为服务添加到我的 Google Apps 域,

但它仍然对互联网上的每个人都可见......我知道我应该对用户 Java API 做一些事情，但我不明白这个......（我应该在哪里做，我应该怎么做？）

对不起初学者的问题，但如果有人能提供帮助，我和我的项目将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:16:17.543

如果您想在代码中检查用户身份验证，您只需要使用用户 API。

OTOH，如果您只需要保护一些资源（例如您的 html/js/css 文件，可以是静态或动态的），那么只需[在部署描述符中配置安全访问](https://developers.google.com/appengine/docs/java/config/webxml#Security_and_Authentication)，例如，保护`/static`目录中的所有文件：

```
<security-constraint>
    <web-resource-collection>
        <url-pattern>/static/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>*</role-name>
    </auth-constraint>
</security-constraint> 
```

# iphone - 在 MKMapView 中使用 UIActivityIndi cator

> ID：10008167
> 
> 赞同：1
> 
> 时间：2012-04-04T09:12:24.650
> 
> 标签：iphone, ios, mkmapview, uiactivityindicatorview

在我的应用程序中，我下载了 kml 文件并在地图中显示了它们的数据。如何在下载数据时显示活动指示器（在点击初始化下载过程的 UIButton 并在下载完成并且引脚填充地图时停止它之后）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:19:41.743

您可以简单地在初始部分开始加载活动指示器，就像在整个视图中一样，只有地图在那里

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    //I have use drag and drop method for activity indicator and map it with outlet without fail and then implement it.
    activityIndicator.hidden = TRUE;
}

-(void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    activityIndicator.hidden = FALSE;
    [activityIndicator startAnimating];
} 
```

**加载地图**后将调用以下方法，

```
- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView
{
      [activityIndicator stopAnimating];
      activityIndicator.hidden = TRUE;
} 
```

我认为它会为你工作

# matlab - Matlab rgb2hsv尺寸

> ID：10008169
> 
> 赞同：0
> 
> 时间：2012-04-04T09:12:31.247
> 
> 标签：matlab

我在 matlab 文档中读到 rgb2hsv 将返回一个 m×n×3 图像数组，但是当我调用它时，我得到一个 1×3 向量。我是不是误会了什么？这是一个示例代码：

```
image_hsv = rgb2hsv('filepath') 
```

并作为输出

```
image_hsv =

        0.7108    0.3696   92.0000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:18:58.373

您不能在文件路径上调用 rgb2hsv - 它必须在 MATLAB 图像矩阵上调用。尝试：

```
image_rgb = imread('filepath');  % load the image array to MATLAB workspace
image_hsv = rgb2hsv(image_rgb);  % convert this array to hsv 
```

您可以通过以下方式查看这些矩阵：

```
>> whos image*  % display all variables whose name begins with 'image'
  Name             Size                 Bytes  Class     Attributes

  image_hsv      480x640x3            7372800  double              
  image_rgb      480x640x3             921600  uint8 
```

您的原始代码所做的是将您的文件路径字符串转换为 ascii 数字，将该数组的前三个值作为 RGB 值并将它们转换为 HSV。

注意：这个例子强调了 MATLAB 的弱类型系统的危险，其中数据类型从一种类型静默转换为另一种类型。也可能缺乏对该`rgb2hsv`功能的正确输入检查。

# javascript - 如何减少 jquery.min.js CPU 时间？

> ID：10008170
> 
> 赞同：-3
> 
> 时间：2012-04-04T09:12:32.447
> 
> 标签：javascript, jquery, dom-events, profiling

我注意到几乎所有浏览器的 Javascript CPU 资源都花在了 jquery.min.js 上，特别是从以下位置加载：

```
http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js 
```

是否有任何工具可以最大限度地减少 JavaScript 通常和/或 jQuery 消耗的资源，而无需直接将特定脚本列入黑名单？

我想最明显的方法是动态减少脚本接收的计时器和其他事件的数量。事实上，您可能会停止所有事件到不在前台页面中的脚本，除了您实际希望允许在后台接收事件的特定站点白名单。

只要整体浏览器性能有所提高，我对 Javascript 性能的下降感到非常满意。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:07:25.043

将所有 getElementsByClassName 更改为 getElementsByTagName。这将大大提高性能，因为 getElementsByTagName 更有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:17:14.397

听起来更像是有另一个脚本使用 jquery 来执行特定任务。据我所知，在浏览器中加载后的 jquery 脚本本身在该时间点之后不使用任何额外的资源。

根据我对正在发生的事情的假设，目前您无能为力（特别是因为您没有提供足够的信息来提供帮助）。

# android - Android Listview以编程方式添加项目和子项目

> ID：10008174
> 
> 赞同：3
> 
> 时间：2012-04-04T09:12:43.920
> 
> 标签：android, listview

> **可能重复：**
> [Android - 将子项添加到列表视图](https://stackoverflow.com/questions/4587301/android-adding-subitem-to-a-listview)

我有 2 个数组 - Namearray 和 companyarray。我想在列表视图中显示它。我已设法使用以下代码在列表中显示名称：

```
ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
                android.R.layout.simple_list_item_1, Namearray);
        setListAdapter(adapter); 
```

但是如何将子项目作为公司名称添加到列表中。

在关注 Sai Geetha 的博客之后 - 我出来关注 - 但列表显示为空 - 它显示 2 条黑线，上面没有文字。我的活动背景是蓝色的，我在 custom_row_view 中检查了 textview textcolor 是黑色的。我错过了什么吗？

```
if(cur!=null && cur.getCount()>0)
        {
        List<Map<String, String>> data = new ArrayList<Map<String, String>>();
         Log.w("count=","ct="+cur.getCount() );
        for (int i=1;i<=cur.getCount();i++) {
            Map<String, String> datum = new HashMap<String, String>(2);
            Log.w("name=",cur.getString(0) );
            Log.w("compname=",cur.getString(1) );
            datum.put("Name",cur.getString(0));
            datum.put("Company", cur.getString(1));
            data.add(datum);
            cur.moveToNext();
        }
        SimpleAdapter adapter = new SimpleAdapter(this, data,
                                                 R.layout.custom_row_view,
                                                  new String[] {"Name", "Company"},
                                                  new int[] {android.R.id.text1,
                                                             android.R.id.text2});
        setListAdapter(adapter);
        cur.close();
        } 
```

# ruby-on-rails - 我已经设置了子域，但是如果用户将子域切换到另一个用户的帐户，这是不安全的

> ID：10008178
> 
> 赞同：0
> 
> 时间：2012-04-04T09:12:59.817
> 
> 标签：ruby-on-rails, subdomain

我正在尝试按照 Ryan Bates 的说明为我的应用程序中的不同帐户设置子域：

[http://railscasts.com/episodes/123-subdomains-revised](http://railscasts.com/episodes/123-subdomains-revised)

每个注册的用户都会创建一个帐户，当他通过他的子域登录他的帐户时，他可以输入另一个用户的子域并输入该用户的帐户。

如果有帮助，我可以提供一些代码，请告诉我。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:25:06.017

我有类似的应用程序，您可以查看它我没有对路线使用约束，而是通过控制器进行操作。 [https://github.com/iparam/samay](https://github.com/iparam/samay)

# php - 检查哪个用户点击了哪个链接

> ID：10008180
> 
> 赞同：0
> 
> 时间：2012-04-04T09:13:03.043
> 
> 标签：php, mysql, hyperlink

我的网站上的链接很少，如何将哪个用户单击哪个链接记录到数据库中。我有链接到数据库和用户的记录。我创建了一个表，其中将有用户 ID、链接 ID。但我不确定如何编写这个 php。有任何想法吗？

编辑：

```
<a hef="page.php?id=27">pagename</a> 
```

上面的链接转到计算链接的页面，它会在数据库中查找 url 并重定向到该页面。但我想看看哪个用户点击了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:14:27.607

最简单的方法是将 a`link-identifier`作为 URI 参数传递

一个例子：

```
<a href="page.php?id=27&clicked=pagename">pagename</a> 
```

现在您可以通过检查来获取用户点击的内容`$_GET['clicked']`

* * *

看来我误解了这个问题

你可以在你的`page.php`

```
$id = $_GET['id']; //Get the page id
$userid = $_SESSION['id']; // Get the user id if stored in session

//Do something with the user id

header("location: ..."); //redirect to a different place
exit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:18:32.823

`http://www.google.com/`例如，不要链接到，而是链接到：

`redirect.php?href=http%3A%2F%2Fwww.google.com%2F`

在redirect.php 中，您`INSERT`将记录写入数据库并执行以下操作：

```
 header("Location: ".$_GET['href']); 
```

# android - 使用 jquery mobile 首次加载页面后事件不起作用

> ID：10008186
> 
> 赞同：0
> 
> 时间：2012-04-04T09:13:27.247
> 
> 标签：android, ios, jquery-mobile, cordova

我正在使用 JQM 1.1.0 和 Cordova 1.5.0。

我有这样的代码

```
<!DOCTYPE HTML>
<html>
<head>
<title>Index Page</title>

<!-- Adding viewport -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />    
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Adding Phonegap scripts -->
<script type="text/javascript" charset="utf-8"
src="cordova/cordova-1.5.0.js"></script>

<!-- Adding jQuery mobile and jQuery scripts & CSS -->
<script type="text/javascript" src="jquery/jquery-1.7.1.min.js"></script>
<link rel="stylesheet"
href="jquerymobile/jquery.mobile-1.1.0-rc.1.min.css" />
<script type="text/javascript" src="jquery/jquery.validate.min.js"></script>
<script type="text/javascript"
src="jquerymobile/jquery.mobile-1.1.0-rc.1.min.js"></script>
<link rel="stylesheet" href="css/colors.css">

<script type="text/javascript">

$("#page1").live("pageinit", function(e) {
console.log("pageinit1");
    }

$("#page2").live("pageinit", function(e) {
console.log("pageinit2");
    }
</script>
<body>
<div data-role="page" id="page1">
  <div data-role="header">Page 1</div>
  <div data-role="content"></div>
</div>

<div data-role="page" id="page2">
  <div data-role="header">Page 2</div>
  <div data-role="content"></div>
</div>
</body> 
```

此代码适用于 Android。但是在iOS中，一旦页面加载，page1的pageinit事件就不会被触发，稍后如果我将page更改为page2，那么一切都很好。为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T06:02:49.437

我不太确定，但据我所知，JQ1.7.x 中的 live 函数发生了变化，现在你将不得不使用 on() 函数，它对你的代码编码方式有一些小的改变..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:10:42.353

我只需要在 data-role="page" 之后编写我的 javaScript 函数以使其工作......

# php - 如何使用 jQuery 显示 JSON 数组中的数据

> ID：10008188
> 
> 赞同：0
> 
> 时间：2012-04-04T09:13:36.270
> 
> 标签：php, jquery, html, json

如何从我的 php 脚本发回的 JSON 中获取数组数据？

PHP代码：

```
<?php
//connects to database
include 'connect.php';
$callback = $_GET['callback'];

$query = mysql_query("SELECT * FROM users");
$rows = array();
while($r = mysql_fetch_assoc($query)) {
   $rows[] = $r;
}

$out_string = json_encode($rows);

print $callback.'('.$out_string.');';
?> 
```

上面的 php 代码将用户表的所有行放入一个数组中，并对其进行 JSON 编码。然后将其发送回此脚本：

```
$.getJSON(domain_path + 'generate.php?table=' +  tbname + '&callback=?', function(data) {
}); 
```

如何显示发回的 JSON 数组中的每一行？

例如将发回的数据是：

```
([{"name":"user1","link":"google.com","approve":"true"},{"name":"user2","link":"yahoo.com","approve":"true"},{"name":"user3","link":"wikipedia.com","approve":"true"}]); 
```

我将如何使用 javascript (jQuery) 像这样显示它：

```
名称：User1，链接：google.com，批准：True
名称：User2，链接：yahoo.com，批准：True
名称：User3，链接：wikipedia.com，批准：True

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:20:23.007

完成后`print $callback.'('.$out_string.');';`，您已经破坏了 JSON 格式的字符串。而是发送回数组，然后循环遍历您的行并显示数据。

```
$out_string = json_encode(array('callback' => $callback, 'rows' => $rows)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:16:53.083

你应该做

```
function(data) {
    $.each(data, function(){
        $('#result').append('<p>Name:'+this.name+' Link:'+this.link+' Approve'+this.approve+'</p>');
    });
} 
```

在这里摆弄[http://jsfiddle.net/hUkWK/](http://jsfiddle.net/hUkWK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:19:49.140

```
$.getJSON(domain_path + 'generate.php?table=' +  tbname + '&callback=?', function(data) {
  $.each(data, function(i, item) {
    $("#mycontainer").append("<p>Name: " + item.name + "</p>");
    $("#mycontainer").append("<p>Link: " + item.link + "</p>");
  });
}); 
```

# batch-file - 如何编写批处理文件以递归方式复制目录，然后在源文件夹中为它们创建快捷方式。

> ID：10008191
> 
> 赞同：0
> 
> 时间：2012-04-04T09:13:45.333
> 
> 标签：batch-file, dos

我需要创建一个可以执行以下操作的批处理文件。

1.  将目录和子目录从源文件夹中超过 10 天的复制到目标文件夹。
2.  从源文件夹中删除复制的目录并在源文件夹中为该目录创建快捷方式。

我已经编写了以下批处理文件。但我没有得到我想要的正确结果。

* * *

```
@echo off
@echo copying file to Archive folder
xcopy c:\tempMovetoUDrive U:\Archive /e/d:03/20/2012
pause

@echo creating a shortcut for copied files
set SHORTCUT_NAME=Shortcut to copied files
set SHORTCUT_PATH=C:\tempMovetoUDrive
set PROGRAM=U:\Archive
set WORK_DIRECTORY=C:\tempMovetoUDrive
set ICON_FILE=%SYSTEMROOT%\system32\SHELL32.dll
set ICON=4
set WINDOW_STYLE=1

echo SET oWS = WScript.CreateObject("WScript.Shell") > tempshortcut.vbs
echo sLinkFile = "%SHORTCUT_PATH%\%SHORTCUT_NAME%.lnk" >> tempshortcut.vbs
echo SET oLink = oWS.CreateShortcut(sLinkFile) >> tempshortcut.vbs
echo oLink.TargetPath = "%PROGRAM%" >> tempshortcut.vbs
echo oLink.IconLocation = "%ICON_FILE%, %ICON%" >> tempshortcut.vbs
echo oLink.WindowStyle = "%WINDOW_STYLE%" >> tempshortcut.vbs
echo oLink.WorkingDirectory = "%WORK_DIRECTORY%" >> tempshortcut.vbs
echo oLink.Save >> tempshortcut.vbs

WScript.exe tempshortcut.vbs
rem del tempshortcut.vbs 
```

* * *

感谢您的时间和帮助。

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:52:31.583

对不起，我无法提供评论，因此将其写在答案中。上面的脚本对我有用，你说它不合适，那么你面临的问题到底是什么。

# android - 如何为 Android 应用程序提供仅在支持 NFC 的设备上运行的条件？

> ID：10008194
> 
> 赞同：1
> 
> 时间：2012-04-04T09:14:01.787
> 
> 标签：android, nfc

我开发了一个读取 NFC 标签详细信息的应用程序。在该应用程序中，我想给出仅在 NFC 可用设备中运行的条件。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:53:22.323

如果您在清单中包含此内容，您的应用将只能在具有 NFC 的设备上运行：

```
<uses-feature android:name="android.hardware.nfc" android:required="true" /> 
```

`NfcAdapter.getDefaultAdapter(this)`也可以`null`在具有 NFC 的设备上返回，但在这种情况下，由于某种原因 NFC 功能不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:19:14.280

如果您将其上传到 Play 商店，那么您可以选择哪些设备可以下载该应用程序，因此请记住这一点。

这是您检查设备是否可以使用 NFC 的方法。

```
NfcAdapter mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
        if (mNfcAdapter == null) {
            Toast.makeText(this,"NFC is not available on this device.", LENGTH_LONG).show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:18:08.423

更改您的清单以要求[文档中指定](http://developer.android.com/reference/android/Manifest.permission.html#NFC)的 NFC 权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:22:12.117

将其包含在您的 AndroidManifest.xml 中：

```
<uses-feature android:name="android.hardware.nfc" /> 
```

这样做，应用程序将只提供下载到能够使用 NFC 功能的设备。

更多信息可以在[这里](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)找到。

# ruby - Heroku 错误地将我的 Node 应用程序检测为 Ruby 应用程序

> ID：10008200
> 
> 赞同：12
> 
> 时间：2012-04-04T09:14:31.267
> 
> 标签：ruby, node.js, heroku

我有一个 Node 项目，它使用 Bundler 和 Guard 来处理我的预编译步骤。这意味着我的项目根目录中有一个 Gemfile 以及 package.json 文件。

我的问题是 Heroku 认为我的项目是一个 Ruby 应用程序，只是因为 Gemfile 存在。并抱怨我没有提交我不想提交的 Gemfile.lock。

```
-----> Heroku receiving push
-----> Ruby app detected
 !
 !     Gemfile.lock is required. Please run "bundle install" locally
 !     and commit your Gemfile.lock.
 !
 !     Heroku push rejected, failed to compile Ruby app 
```

有没有办法告诉 Heroku 该应用程序是 Node 应用程序而不是 Ruby 应用程序？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-05T09:24:48.260

在 Heroku Support 的大力帮助下，解决方案是：**使用构建包！**

`BUILDPACK_URL`通过在配置变量中指定自定义构建包来覆盖 Heroku 默认构建包

```
$ heroku config:add BUILDPACK_URL=https://github.com/heroku/heroku-buildpack-nodejs 
```

您还可以在应用创建期间指定构建包

```
$ heroku create -s cedar --buildpack https://github.com/heroku/heroku-buildpack-nodejs 
```

当你知道它时很简单。更多文档可以[在 Heroku 开发中心找到](https://devcenter.heroku.com/articles/buildpacks)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-11-28T03:22:44.097

似乎有一种新方法可以做到这一点，因为`BUILDPACK_URL`现在已弃用，解释[here](https://devcenter.heroku.com/articles/buildpacks#setting-a-buildpack-on-an-application)，但基本上命令是：

`$ heroku buildpacks:set heroku/nodejs`

您还可以在应用创建期间指定 buildpack：

`$ heroku create myapp --buildpack heroku/nodejs`

# wpf - 如何在没有代码隐藏的情况下从 xaml 打开窗口

> ID：10008206
> 
> 赞同：0
> 
> 时间：2012-04-04T09:14:52.893
> 
> 标签：wpf, button

我有 other-window.xaml 文件，并尝试在单击按钮时从 window.xaml 打开它。没有代码隐藏是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:35:52.537

您可以将窗口定义[为非共享](http://msdn.microsoft.com/en-us/library/aa970778.aspx)资源并编写解析资源并调用窗口的方法。然后可以将该操作与on组合使用。[`Interactivity`](http://www.microsoft.com/download/en/details.aspx?id=10801) `TriggerAction``Show``Interactivity` `EventTrigger``Click`

# asp.net - .net 应用程序的数据库更改

> ID：10008209
> 
> 赞同：0
> 
> 时间：2012-04-04T09:15:01.053
> 
> 标签：asp.net, oracle9i

我在不同的环境中有两个数据库，但都有相同的数据。目前我的应用程序连接一个数据库。我需要断开该数据库，我想连接另一个数据库。是否可以连接到另一个数据库？如果可能，那么我必须在应用程序代码中修改哪些内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:24:00.370

> 是否可以连接到另一个数据库？

是的。

> 如果可能，那么我必须在应用程序代码中修改哪些内容。

您需要更改数据提供者 API，尤其是在使用数据库特定 API 时，例如 Ms-Sql 服务器 (SqlClient) 或 ODP.net (oracle)。

进一步，请阅读 -[数据访问应用程序块](http://msdn.microsoft.com/en-us/library/ff648175.aspx)和 . [NET 数据访问架构指南](http://msdn.microsoft.com/en-us/library/ee817654.aspx)。

# common-lisp - 在 CLOS 方法定义中，specializer 可以是类列表而不是单个类吗？

> ID：10008212
> 
> 赞同：1
> 
> 时间：2012-04-04T09:15:12.427
> 
> 标签：common-lisp, clos

虽然它在一般情况下没有多大意义，因为它应该通过超类完成，但我想允许特定参数为“nil”并避免必须定义一个单独的方法。

我正在尝试做类似的事情（伪代码）

```
(defmethod my-method ((obj1 my-class1) (obj2 (or my-class2 null)))
   method-body       ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:42:25.923

这在普通 CLOS 中不受支持。

支持的是：

*   没有课-> T
*   情商
*   一类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-03T00:58:52.223

您可以创建一个没有插槽的 mixin 类，并将其添加到所有感兴趣的类的超类列表中；这是有道理的，因为您所做的意味着列表中的所有类都符合某种类型。

或者不要专门化 - 编写一个适用于感兴趣类型的超集但仅作用于您的子集的方法。这可能更容易做到，但不太干净。

# sql - 将文本框值插入 Access SQL 查询

> ID：10008215
> 
> 赞同：1
> 
> 时间：2012-04-04T09:15:29.603
> 
> 标签：sql, ms-access, vba

作为 Access 和 VBA 的业余爱好者，我遇到了以下问题...

在 MS Access 2007 中，我有以下查询：

```
SELECT .... WHERE format(NZ(l_f_date),'yyyy-mm-dd')<=**'2012-04-03'**); 
```

我当然把它缩短了一点。

该数据库每天需要运行大约 20 个查询。我创建了 4 个宏来以我需要的方式运行查询组。问题是，在每一个查询中，我首先必须更改日期（就像在上面的查询中一样）。我正在寻找使其自动化程度更高的方法。

我有一个创建表单的想法，在上面为每个宏放置一个按钮，并在 2 个文本框上输入我需要的 2 个日期。现在，我需要这些日期出现在粗体部分。当我考虑它时，我有两个选择：

*   在数据库中创建一个临时表来存储这两个日期并在我的查询中提取这两个字段。
*   以某种方式将文本框的值直接插入查询的粗体部分。

我想我可以管理第一个解决方案，但第二个解决方案让我很头疼。

你能帮我吗？

* * *

来自评论的 SQL

```
select proc_desc,count(s) as broj 
into upit3 
from ( select distinct a.case_id as s,
          a.org_case_id,a.act_date as day,d.prod_id,d.prod_desc,
          c.fname,c.dpd,c.due_amount,proc_id,proc_desc 
       from actions_b as a, cases_old_b as c,processes_b as p,
            product_dict_b as d 
       where a.org_case_id=c.[org_ case_id] 
       and a.act_date=Forms!Form!Text10 and d.prod_id=c.product 
       and p.proc_id=c.process and not_lead=1 ) 
group by proc_desc order by proc_desc; 
```

好的，样本数据....

在 x.dates 中，值是这样的：**03.04.2012**
在 a.act_date 中的值是这样的：**01.07.2011 13:53:56**

因此，如果无法按原样使用此值，是否可以在查询中使用 LIKE 语句？伪： `WHERE a.act_date LIKE x.date%`
如果可能的话，如何使用它？我是 sql 和访问查询的新手……我用谷歌搜索，但有时，就像这次一样，我被卡住了。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:33:58.990

这种结构：

```
SELECT .... WHERE format(NZ(l_f_date),'yyyy-mm-dd')<='2012-04-03'); 
```

不是一个好主意。一般规则是尽量坚持等号左侧的字段（列）名称。所以

```
SELECT .... WHERE l_f_date <=#2012-04-03# 
```

不包含空值，我希望您的日期*是*日期而不是字符串。

接下来添加表格：

```
SELECT .... WHERE l_f_date <= Forms!TheNameOfTheForm!TheNameOfTheTextbox 
```

**编辑重新评论**

您正在使用查询设计窗口，是吗？请尝试以下测试查询：

```
SELECT a.case_id, a.act_date
FROM actions_b AS a
WHERE a.act_date=Forms!Form!Text10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T12:36:38.077

好的，所以我决定在我的数据库中创建一个简单的 2 列表，仅用于存储昨天和今天的日期...我在表单中添加了 2 个文本框、1 个按钮并将下一个过程添加到按钮：

```
Private Sub Command25_Click()
CurrentDb.Execute "DELETE * FROM Datumi"
Dim tbl As Recordset
Set tbl = CurrentDb.OpenRecordset("Datumi")
tbl.AddNew
tbl!brojka = "1"
tbl!datum = Text8.Value
tbl.Update
tbl.AddNew
tbl!brojka = "2"
tbl!datum = Text10.Value
tbl.Update
End Sub 
```

如您所见，单击按钮将清除表格并将新值存储到 2 行中...第 1 行是昨天，第 2 行是今天...

之后，我从该表中提取值，如下所示：

```
... where x.brojka=1 and format(a.act_date,'yyyy-mm-dd')=format(x.datum,'yyyy-mm-dd') ... 
```

我敢肯定它可以做得更好，但这对我有用......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-20T17:01:23.967

我解决了这个问题：[软件：MS Access 2013]

```
CurrentDb.Execute "INSERT INTO [Inventory Transactions] ([Product ID], [Order ID])" _
& "VALUES ( " & Me.Product_ID & ", " & Me.Order_ID & ")" 
```

# apache - svn post-commit 名称解析暂时失败

> ID：10008234
> 
> 赞同：1
> 
> 时间：2012-04-04T09:16:11.263
> 
> 标签：apache, svn, post-commit

首先，我将 svn 配置为可通过 apache DAV 访问。

然后我有一个 post-commit 钩子，它通过一个简单的 wget 命令告诉 jenkins 持续集成服务器存储库已更改（并使其构建）：

```
/opt/local/bin/wget (many-options) https://jenkins.domain.tld/subversion/${UUID}/notifyCommit?rev=$REV >> $LOGFILE 
```

该脚本检查 wget 返回码，然后回显错误消息并以 1 退出（因此 svn 客户端知道提交失败）。

失败后的 LOGFILE 包含：

```
--2012-04-04 10:56:54--  https://jenkins.domain.tld/subversion/4d729FFF-FFFF-4fb8-b8b5-be083cf6fe96/notifyCommit?rev=302
Résolution de jenkins.domain.tld (jenkins.domain.tld)... échec: Temporary failure in name resolution.
wget : impossible de résoudre l'adresse de l'hôte «jenkins.domain.tld» 
```

`jenkins.domain.tld`已添加主机`/etc/hosts`以确保解决方案不会失败，但我仍然遇到问题。

当然，我已经检查了 CLI 中的 post-commit 命令，它可以工作。

我已将此行添加到提交后脚本中：

```
/usr/bin/host jenkins.domain.tld >> $LOGFILE 
```

分辨率工作得很好......也许是一个 wget 问题。

刚刚用 curl 等效替换 wget 调用，同样的问题：

```
curl: (6) Couldn't resolve host 'jenkins.domain.tld' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:37:31.740

好的，没有找到问题的根源，但有一个解决方案（非常丑陋）：

> 更新：我同时通过完全停止 apache 来解决它，等待片刻，然后重新启动它。但这并不能解释这种行为的根本原因（因此没有令人满意的解决方案）。所以我把这个打开。

来自：[https ://serverfault.com/questions/129772/php-gethostbyname-suddenly-no-longer-resolves-names-to-ips-when-run-in-apache](https://serverfault.com/questions/129772/php-gethostbyname-suddenly-no-longer-resolves-names-to-ips-when-run-in-apache)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T21:30:09.810

升级到 Ubuntu 14.04 LTS 后，我遇到了同样的问题（不确定升级是否真的相关）。但是，我可以通过在我的 post-commit 挂钩中向 wget 添加显式超时配置来解决它：

```
wget \
   --timeout=10 \
   --dns-timeout=10 \
... 
```

# haskell - 为什么无序容器有自己的 Array 实现

> ID：10008241
> 
> 赞同：1
> 
> 时间：2012-04-04T09:16:37.813
> 
> 标签：haskell, data-structures

我正在阅读 HAMT，并查看了无序容器中的参考实现，但注意到它们有自己的数组实现。为什么是这样？是为了速度吗？还是他们需要的一些自定义 API？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T10:02:43.767

[查看代码](https://github.com/tibbe/unordered-containers/blob/master/Data/HashMap/Array.hs)后，我可以看到一些优化。它不支持大多数 Haskell 数组所具有的“Ix”索引转换。它有专门的原语，例如`insert'`插入到中间并动态调整数组大小，STArray 不支持，以及`delete'`缩小数组。

所以答案是速度和自定义 API。

# c# - 如何获取两个标签之间的字符串

> ID：10008242
> 
> 赞同：-8
> 
> 时间：2012-04-04T09:16:38.707
> 
> 标签：c#, regex, strip

我想知道如何在两个已知标签之间获取一个字符串（或字符串数​​组）。例如我有这个字符串

```
string var1="my first video is [video]http://video.com/aaa[/video] and my second is[video id=\"1\" length=\"3\"]http://video.com/bbb[/video]"; 
```

如何获得这些值`http://video.com/aaa`和`http://video.com/bbb`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:19:54.210

使用这种模式：`@"\[video.*?\](.*?)\[/video\]"`然后获得第一组。我不会发布整个代码，因为我不想为你做你的工作。阅读 C# 正则表达式、模式并尝试使用此模式编写代码。

# php - PregMatch 没有结尾 ')' 找到分隔符

> ID：10008243
> 
> 赞同：0
> 
> 时间：2012-04-04T09:16:38.953
> 
> 标签：php, regex, preg-match, delimiter

运行模式匹配验证时出现以下错误：

```
ErrorException [ Warning ]: preg_match() [function.preg-match]: No ending matching delimiter ')' found 
```

我使用的 PREG 正则表达式取自在线正则表达式库，但我找不到缺少的分隔符在哪里。请问有人能指出来吗？

检查英国邮政编码：

```
(((^[BEGLMNS][1-9]\d?)|(^W[2-9])|(^(A[BL]|B[ABDHLNRST]|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]|F[KY]|G[LUY]|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]|M[EKL]|N[EGNPRW]|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKL-PRSTWY]|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)\d\d?)|(^W1[A-HJKSTUW0-9])|(((^WC[1-2])|(^EC[1-4])|(^SW1))[ABEHMNPRVWXY]))(\s*)?([0-9][ABD-HJLNP-UW-Z]{2}))$|(^GIR\s?0AA$) 
```

如果我使用这种添加验证规则的方法，我会得到错误未知修饰符“$”： `$val->add('post_code', 'post code') ->add_rule('required') ->add_rule('match_pattern', '(((^[BEGLMNS][1-9]\d?)|(^W[2-9])|(^(A[BL]|B[ABDHLNRST]|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]|F[KY]|G[LUY]|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]|M[EKL]|N[EGNPRW]|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKL-PRSTWY]|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)\d\d?)|(^W1[A-HJKSTUW0-9])|(((^WC[1-2])|(^EC[1-4])|(^SW1))[ABEHMNPRVWXY]))(\s*)?([0-9][ABD-HJLNP-UW-Z]{2}))$|(^GIR\s?0AA$)\)');`

我使用它的原始方式是速记版本： `$val->add_field('post_code', 'post code', 'required|match_pattern[(((^[BEGLMNS][1-9]\d?)|(^W[2-9])|(^(A[BL]|B[ABDHLNRST]|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]|F[KY]|G[LUY]|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]|M[EKL]|N[EGNPRW]|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKL-PRSTWY]|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)\d\d?)|(^W1[A-HJKSTUW0-9])|(((^WC[1-2])|(^EC[1-4])|(^SW1))[ABEHMNPRVWXY]))(\s*)?([0-9][ABD-HJLNP-UW-Z]{2}))$|(^GIR\s?0AA$)\)]');`

`$val`是模型的验证实例。如果有任何用处，我正在使用 FuelPHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:44:00.063

```
<?php
$regex = '/(((^[BEGLMNS][1-9]\d?)|(^W[2-9])|(^(A[BL]|B[ABDHLNRST]|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]|F[KY]|G[LUY]|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]|M[EKL]|N[EGNPRW]|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKL-PRSTWY]|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)\d\d?)|(^W1[A-HJKSTUW0-9])|(((^WC[1-2])|(^EC[1-4])|(^SW1))[ABEHMNPRVWXY]))(\s*)?([0-9][ABD-HJLNP-UW-Z]{2}))$|(^GIR\s?0AA$)/';

var_dump( preg_match( $regex, 'M1 1AA' ), preg_match( $regex, 'not valid' ) ); 
```

对我来说就像一个魅力。您需要有分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:19:56.147

您的正则表达式需要一个分隔符，例如`/`

```
/(((^[BEGLMNS][1-9]\d?)|(^W[2-9])|(^(A[BL]|B[ABDHLNRST]|C[ABFHMORTVW]|D[ADEGHLNTY]|E[HNX]|F[KY]|G[LUY]|H[ADGPRSUX]|I[GMPV]|JE|K[ATWY]|L[ADELNSU]|M[EKL]|N[EGNPRW]|O[LX]|P[AEHLOR]|R[GHM]|S[AEGKL-PRSTWY]|T[ADFNQRSW]|UB|W[ADFNRSV]|YO|ZE)\d\d?)|(^W1[A-HJKSTUW0-9])|(((^WC[1-2])|(^EC[1-4])|(^SW1))[ABEHMNPRVWXY]))(\s*)?([0-9][ABD-HJLNP-UW-Z]{2}))$|(^GIR\s?0AA$)/ 
```

此分隔符可以是不同的字符，但在您的正则表达式之前和之后必须相同。你也可以这样做

```
~regex~ 
```

或者

```
#regex# 
```

优点是，使用正则表达式中没有的分隔符。如果您`/`用作分隔符并想要匹配“/”，则必须在正则表达式中对其进行转义`/\//`，如果您更改分隔符，则可以`#/#`匹配“/”

# java - 重绘（）无法工作

> ID：10008253
> 
> 赞同：5
> 
> 时间：2012-04-04T09:17:03.350
> 
> 标签：java, swing, applet, awt, repaint

我想根据从另一个线程收到的数据在面板上绘制图像。我确信数据和随后的像素数组运行良好，但 repaint() 永远不会工作。谁能告诉我这里出了什么问题？

```
import javax.swing.*;
import java.awt.*;
import java.awt.image.*;

/** Create an image from a pixel array. **/
public class PicturePlaza extends JApplet
{
  ImagePanel fImagePanel;
  ReadCom   readComPort;
  Thread readPortThread;

  public void init () {
    // initiate the read port thread so that it can receive data
     readComPort = new ReadCom();
     readPortThread = new Thread(readComPort,"ReadCom");
     readPortThread.start();

     Container content_pane = getContentPane ();
     fImagePanel = new ImagePanel ();
     content_pane.add (fImagePanel);  

  } 

  // Tell the panel to create and display the image, if pixel data is ready.
  public void start () {
      while(true){
          if(readComPort.newPic){
              fImagePanel.go();
          }
          try {
                    Thread.sleep(4000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
      }
  }

/** Create an image from a pixel array. **/
  class ImagePanel extends JPanel{
      Image fImage;
      int fWidth = ReadCom.row, fHeight = ReadCom.col;      

      void go() {         
                    //update the image if newPic flag is set to true                
                    fImage = createImage (new MemoryImageSource (fWidth, fHeight, ReadCom.fpixel, 0, fWidth));
                    repaint();
                    readComPort.newPic = false; //disable the flag, indicating the image pixel has been used                                                            
      } 

      /** Paint the image on the panel. **/
      public void paintComponent (Graphics g) {
        super.paintComponent (g);       
        g.drawImage (fImage, 0, 0, this );  
      } 
  } 
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T01:14:59.437

只是一点点说明`repaint()`。 `repaint()`计划重新绘制屏幕，​​根据我的经验，它不会总是立即执行。我发现最好的解决方案是直接给`paint()`自己打电话。

```
Graphics g;
g = getGraphics();
paint(g); 
```

当我希望它立即绘制时，我把它作为一个新函数在我的代码中调用。此外，这不会删除屏幕上以前的图形，您必须手动执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:37:47.167

Try `repaint();` and then `validate();` in your Applet (`PicturePlaza`).

# mysql - 是否可以在 MySQL 中为 VARCHAR 列设置约束？

> ID：10008255
> 
> 赞同：1
> 
> 时间：2012-04-04T09:17:16.987
> 
> 标签：mysql, constraints, varchar

是否可以在 MySQL 中为 VARCHAR 列设置约束？

我不想允许超过一行的特定值。

```
 ______________
  |    MyTable   |
   --------------
  | pk id   INT  |
  | name VARCHAR | 
```

如果我现在插入两行同名“peter”，我想抛出一个错误。因此，约束应该只检查是否已经存储了一个“peter”。但是多行其他值必须起作用。

```
INSERT INTO MyTable VALUES (1, "peter");
INSERT INTO MyTable VALUES (2, "peter"); // This should fail
INSERT INTO MyTable VALUES (3, "steven"); 
INSERT INTO MyTable VALUES (4, "steven"); // Shall succeed 
```

是否可以在 MySQL 中以某种方式检查指定值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:29:32.730

不，使用约束是不可能的。您可以在上添加[唯一约束](http://dev.mysql.com/doc/refman/5.1/de/constraint-primary-key.html)`name`，但这会阻止所有重复条目，而不仅仅是“peter”。话虽如此，您必须自己进行此额外检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:27:22.970

将列设置为唯一。尝试插入重复值的 MySQL 查询将失败。

插入： `insert into <table> (<columns>,unique(<unique column>));`

更新： `alter table <table> add unique(<unique column>));`

# android - Android 应用搜索数组

> ID：10008256
> 
> 赞同：0
> 
> 时间：2012-04-04T09:17:17.580
> 
> 标签：android, xml, arrays, search

我想重新开始编程 Android。因为我对此了解不多，所以我必须重新学习基础知识。我要创建的是以下内容。

我想创建一个 xml 文档“words.xml”

```
<dictionary>
<word>
    <id>1</id>
    <word>hallo</word>
    <translation>hello</translation>
</word>
…
<word>
    <id>231</id>
    <word>familie</word>
    <translation>family</translation>
</word></dictionary> 
```

然后我想创建一个带有文本输入的界面。因此，如果我输入例如“231”，代码必须在 xml 文件中搜索 id '231' 并说你好 = 你好，类似的东西。

你能给我一些提示，我可以从这个开始吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:25:56.460

我的第一个想法是创建一个存储 ID=>(word,translation); 的地图变量的自定义 xml 解析器。当然，这对于大型词典来说是不可行的。Android 可以使用 SQLite 数据库，但这可能很有用。快速搜索指向[此 SQLite 教程](http://www.vogella.de/articles/AndroidSQLite/article.html "vogella.de Android SQLite 教程")。除此之外，其他人将需要发表评论。

# mysql - 根据自增列插入唯一值

> ID：10008258
> 
> 赞同：1
> 
> 时间：2012-04-04T09:17:25.723
> 
> 标签：mysql

我目前有一个表，其中 id 列正在自动递增，然后有一个 tracking_code 列，它有一个唯一的约束。

目前，tracking_code 由注册人提供，但现在客户希望 tracking_code 自动生成但也可以更改。换句话说，在用户注册的地方，自动生成 tracking_code，但只要它保持唯一，就允许用户将该代码更新为其他任何内容。

是否可以在 MySQL 中执行类似的操作（将字符串附加到仅在插入记录后才存在的自动递增 id）或者在 mysql 中有另一种方法：

插入 mytable (..., tracking_code, ...) 值 (..., 'foo-' + id + '-bar', ...)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:22:00.620

您可以将跟踪 ID 设置为自动递增，它会根据您的需要工作。当您在插入期间未提供跟踪 ID 值时，将自动生成跟踪 ID，并且当您这样做时，将设置提供的值。只是不要忘记添加唯一约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:28:55.543

你可以这样做：

```
INSERT INTO mytable
  (..., tracking_code, ...)
VALUES (
  ...,
  CONCAT(
    'foo-',
    (
        SELECT
            AUTO_INCREMENT
        FROM
            information_schema.TABLES
        WHERE
            TABLE_SCHEMA = 'database'
        AND TABLE_NAME = 'mytable'
    ),
    '-bar'
  ),
  ...
) 
```

或者

```
INSERT INTO mytable
SET tracking_code = CONCAT(
    'foo-',
    (
        SELECT
            AUTO_INCREMENT
        FROM
            information_schema.TABLES
        WHERE
            TABLE_SCHEMA = 'database'
        AND TABLE_NAME = 'mytable'
    ),
    '-bar'
),
... 
```

显然只有当你有一个`AUTO_INCREMENT`专栏时才有效。

# java-me - 在 LWUIT 组件对象中进行克隆的替代方法

> ID：10008264
> 
> 赞同：0
> 
> 时间：2012-04-04T09:18:00.077
> 
> 标签：java-me, lwuit

情况：-

在我的代码中，我必须将 LWUIT 组件对象用于列表视图控件。控件是动态的，因此可以是任意数量。现在，我正在根据控件（以数字表示）创建组件对象，即，对于要首先创建的每个控件，组件对象正在创建。当控件增加时，此过程会减慢列表视图的呈现速度。

解决方案：-

如果我创建 Component 对象并在所有控件的循环中使用它，它将获取对象的引用，因此显示具有相同数据的所有列表视图项（控件）。现在我能够想到克隆我的对象并使用它来创建控件的最后一个选项。

问题：-

但是我在 LWUIT 中找不到任何方法可以实现对象的复制。

LWUIT 中有哪些替代方案可以解决此问题？

PS-列表视图项目是相同类型的，但具有不同的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T05:30:23.990

使用 List 组件和 Renderer 设计模式创建一个“橡皮图章”组件，您可以在其中轻松显示大量元素。[请参阅 Codename One博客](http://codenameone.blogspot.com/2008/08/model-mvc-million-contacts-march.html)中对此的解释。

首先创建这些`class`es：

```
public class ListUtil {

    private Vector data = new Vector();
    private Content[] contents;

    public ListUtil(Vector vData)
    {
        data = vData;
        contents = new Content[vData.size()];
    }

    public List createList(Display display, CListCell renderer, ActionListener listener)
    {
        CList theList;
        for(int i = 0; i < data.size(); i++)
        {
            contents[i] = new Content(String.valueOf(data.elementAt(i)));
        }
        theList = new CList(display, contents, renderer, listener);
        return theList;
    }
}

public class Content
{
    private String  row;

    public Content(String row)
    {
        this.row = row;
    }

    public String getRow()
    {
        return (row);
    }
}

public class CListCell extends Container implements ListCellRenderer {

    private Label focus = new Label("");

    public CListCell()
    {
        super();
        // create and add the components here among the components which will display data
    }
    public Component getListCellRendererComponent(List list, Object value, int index, boolean isSelected)
    {
        Content entry = null;
        if (value instanceof Content)
            entry = (Content)value;
        componentDisplayingDataAddedIntoThisListCellRenderer.setText(entry.getRow());
        return this;
    }
    public Component getListFocusComponent(List arg0)
    {
        return focus;
    }
}

public class CList extends List {
    private Display disp;
    public CList(Display display, Object[] data, CListCell renderer, ActionListener actionListener)
    {
        super(data);
        setListCellRenderer(renderer);
        setIgnoreFocusComponentWhenUnfocused(true);
        addActionListener(actionListener);
        setScrollAnimationSpeed(getScrollAnimationSpeed()/4);
        disp = display;
    }
    public void pointerReleased(int x,int y)
    {
        if (isEnabled() && hasFocus())
            super.pointerReleased(x, y);
    }
    public void keyReleased(int keyCode)
    {
        if (isEnabled() && hasFocus())
        {
            if (disp.getGameAction(keyCode) == Display.GAME_FIRE)
                pointerReleased(getX(),getY());
            else
                super.keyReleased(keyCode);
        }
    }
} 
```

要创建您的`List`并将其添加到`Form`：

```
public class myForm extends Form implements ActionListener
{
    private Vector listSource = // your vector of data
    private CListCell renderer = new CListCell();
    private List theList = (new ListUtil(listSource)).createList(Display.getInstance(),renderer, this);
    ...
    public void actionPerformed(ActionEvent evt)
    {
       if (evt.getSource() == theList)
            doSomething();
    }
} 
```

# json - 提供正确的会话 ID 后，远程传输会话没有响应

> ID：10008268
> 
> 赞同：1
> 
> 时间：2012-04-04T09:18:09.187
> 
> 标签：json, http, node.js, transmission

好吧，这将是一个相当晦涩的话题，但我会尝试一下，也许有人会知道答案。

我正在为传输 BitTorrent 客户端编写一个小的远程 Node.js 客户端。使用 JSON 对象通过 RPC 处理通信。

这是[规范](https://trac.transmissionbt.com/browser/trunk/extras/rpc-spec.txt)。

我的代码（用 CoffeeScript 编写，如果这是一个问题，我也可以提供等效的 JavaScript 代码，只是不想让这个问题太长而无法阅读），重要的部分：

```
runRemoteCommand: (params) ->
  # convert JSON object to string
  params = JSON.stringify params #, null, "  "

  # set request options
  options = 
    host: @config.host
    port: @config.port
    path: @config.rpcPath
    auth: "#{@config.username}:#{@config.password}"
    headers:
      'Content-Type': 'application/json'
      'Content-Length': params.length
    method: 'GET'

  # we don't know the session id yet
  sessionId = false

  # wrapped in a function so it could be run two times, not really a finished solution
  run = () =>
    # If the session id is provided, set the header, as in 2.3.1 of the specs
    if sessionId
      options.headers["X-Transmission-Session-Id"] = sessionId

    # define the request object and a callback for the response
    request = @http.get options, (response) =>
      # log everything for debug purposes
      console.log "STATUS: #{response.statusCode}"
      console.log "HEADERS: #{JSON.stringify response.headers}"
      response.setEncoding 'utf8'
      response.on "data", (data) =>
        console.log "BODY: #{data}"

      # if status code is 409, use provided session id
      if response.statusCode == 409
        sessionId = response.headers["x-transmission-session-id"]
        console.log "sessionId: #{sessionId}"
        # running it immediately sometimes caused the remote server to provide a 501 error, so I gave it a timeout
        setTimeout run, 5000

    # no output here
    request.on "error", (e) =>
      console.log "ERROR: #{e}"

    # actually send the request
    request.write params
    request.end()

  # run our function
  run() 
```

`params`变量定义为：

```
params =
  "arguments":
    "filename": link
  "method": "torrent-add"
  "tag": 6667 
```

在我设置有效的会话 ID 之前，一切正常。在第一次`run`调用该函数时，我得到以下输出（对其进行了一些格式化以更方便眼睛）：

> 状态：409
> 
> 标题：
> 
> ```
> {
>   "server":"Transmission",
>   "x-transmission-session-id":"io4dOLm8Q33aSCEULW0iv74SeewJ3w1tP21L7qkdS4QktIkR",
>   "date":"Wed, 04 Apr 2012 08:37:37 GMT",
>   "content-length":"580",
>   "content-type":"text/html; charset=ISO-8859-1"
> } 
> ```
> 
> sessionId：io4dOLm8Q33aSCEULW0iv74SeewJ3w1tP21L7qkdS4QktIkR
> 
> 身体：
> 
> # 409：冲突
> 
> 您的请求包含无效的会话 ID 标头。
> 
> 要解决此问题，请执行以下步骤：
> 
> 1.  读取响应时，获取其 X-Transmission-Session-Id 标头并记住它
> 2.  将更新后的标头添加到您的传出请求中
> 3.  当您收到此 409 错误消息时，请使用更新的标头重新发送您的请求
> 
> 已添加此要求以帮助防止 CSRF 攻击。
> 
> `X-Transmission-Session-Id: io4dOLm8Q33aSCEULW0iv74SeewJ3w1tP21L7qkdS4QktIkR`

当没有提供会话 ID 时，这正是远程服务器应该返回的内容。但是，在标头中设置会话 ID 后，服务器没有响应。第二次`run`调用被触发并发送请求（通过放置一些有用`console.log`的 s 来确认），但响应回调永远不会被触发。我没有收到来自远程服务器的响应，我的应用程序冻结等待。

我很确定错误在我这边，而不是在服务器上，因为在连接到同一个远程会话时，一个开箱即用的 android 远程客户端可以正常工作。

我是否正确执行了请求？特别是 JSON 部分？

## 编辑：一个小测试

我编写了一个小 php 脚本来测试 JSON 编码的请求是否正常，并将其用作“假”远程传输。这里是：

$headers = apache_request_headers();

```
// Simulate transmission's behavior
if (!isset($headers['X-Transmission-Session-Id'])) {
    header("HTTP/1.0 409 Conflict");
    header("X-Transmission-Session-Id: test");
}

print_r($headers);

// Is there a nicer way to get the raw request?
print_r(file_get_contents('php://input')); 
```

而且，就我个人而言，我认为这次测试输出的数据没有任何问题。返回 409 状态代码后，Node.js 应用程序会为请求正确分配会话 ID。第一个`print_r`打印一个数组：

```
Array
(
    [Content-type] => application/json
    [Content-length] => 152
    [X-Transmission-Session-Id] => test
    [Host] => tp.localhost
    [Connection] => keep-alive
) 
```

第二个打印一个字符串，它是一个格式正确的 JSON 字符串（没有更多内容）：

```
{
  "arguments": {
    "filename": "http://link-to-torrent"
  },
  "method": "torrent-add",
  "tag": 6667
} 
```

我真的看不出我做错了什么。我用同一个远程服务器测试的一些第三方客户端可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:22:33.180

有同样的问题我已经完成了这门课。我正在考虑更好的方法来做一个 getData, 方法。但它有效。

```
http = require "http"
_ = require "underscore"

class Connect
  constructor: (@login, @password, @host='127.0.0.1', @port=9091, @headers={}) ->

  getData: (params)->
    key = "x-transmission-session-id"

    options = {
      host: @host
      port: @port
      path: '/transmission/rpc',
      method: 'POST',
      headers: @headers || {},
      auth: "#{ @login }:#{ @password }"  
    }

    _.extend options, params || {}

    req = http.request(options, (res)=>
      if res.statusCode == 401
        console.log "Auth errror"

      else if res.statusCode == 409
        auth_header={}
        auth_header[key] = res.headers[key]

        _.extend @headers, auth_header
        @getData(params)

      else if res.statusCode == 200
        res.setEncoding 'utf8'
        res.on('data', (chunk)->
          #here should be an emmit of data
          console.log chunk
        )

      else
        console.log "Error #{ res.statusCode }"

    )
    req.write('data\n')
    req.write('data\n')
    req.end()

connector = new Connect "transmission", "password"

connector.getData() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T12:01:49.927

```
#!/bin/bash

#-----------------------------------------------------------------------
#

DEBUG=0
HOST="192.168.1.65"
PORT="8181"
TRURL="http://$HOST:$PORT/transmission/rpc"
USER="admin"
PASSWORD="password1"
XTSID=""

#-------------------------------------
# 
function getSID ()
{
    local S="$1"
    S=${S##*X-Transmission-Session-Id: }
    S=${S%%</code>*}
    echo $S
}

#-------------------------------------
function getData ()
{
    local REQUEST="$1"

    local RET=$(curl --silent -H "X-Transmission-Session-Id: $XTSID" \
        -H "Content-type: application/json" \
        -X POST \
        -d "$REQUEST" \
        --user $USER:$PASSWORD $TRURL)

    ((DEBUG)) && echo $XTSID

    if [[ "$RET" =~ "409: Conflict" ]] 
    then
        XTSID=$(getSID "$RET")

        ((DEBUG)) && echo "XTSID $XTSID"

        RET=$(curl --silent -H "X-Transmission-Session-Id: $XTSID" \
            -H "Content-type: application/json" \
            -X POST \
            -d "$REQUEST" \
            --user $USER:$PASSWORD $TRURL)
    fi

    echo $RET
}

#-------------------------------------

R='{"method":"session-stats"}'
RET=$(getData "$R")
echo $RET 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T14:09:42.133

[好吧，我能够使用mikeal 的 request](https://github.com/mikeal/request)规避 - 但不能解决 - 问题，这也简化了我的代码。最新版本如下所示：

```
runRemoteCommand: (params, callback = false) =>
  options =
    uri: @uri
    method: "POST"
    json: params

  if @sessionId
    options.headers = 
      "X-Transmission-Session-Id": @sessionId

  request options, (error, response, body) =>
    retVal = 
      success: false
    end = true

    if error
      retVal.message = "An error occured: #{error}"
    else
      switch response.statusCode
        when 409
          if response.headers["x-transmission-session-id"]
            @sessionId = response.headers["x-transmission-session-id"]
            end = false
            @.runRemoteCommand params, callback
          else
            retVal.message = "Session id not present"
        when 200
          retVal.success = true
          retVal.response = body
        else retVal.message = "Error, code: #{response.statusCode}"

     callback retVal if end && callback 
```

我暂时不接受这个答案，因为我仍然不知道“原始”版本有什么问题。

# java - Eclipse e4 RCP 访问插件之间的服务

> ID：10008269
> 
> 赞同：2
> 
> 时间：2012-04-04T09:18:12.847
> 
> 标签：java, eclipse-plugin, eclipse-rcp, rcp, e4

我目前正在使用 Eclipse 4.2M6 开发我的第一个 Eclipse e4 RCP 应用程序。我正在开发一个主插件，它具有我的应用程序的核心代码，并将许多服务定义为扩展，以允许其他插件/片段连接到应用程序以添加新功能。

我的主要服务具有其他插件应该使用的方法来注册新功能，并以编程方式添加到主应用程序的模型中。但是，我不确定如何让这些插件在插件启动时查找服务并注册自己。

一个例子：

我在主插件中的服务界面：

```
public interface FeedManager {

    boolean registerFeed(Feed service);

    boolean unregisterFeed(Feed service);

    IObservableList getFeeds();
} 
```

我在第二个插件中想要什么：

```
public class TestFeed {

    ///this method could be in a constructor or @PostConstruct method instead
    @Inject
    public void init(FeedManager manager){    

        Feed feed = new Feed();
        feed.setName("Test feed");

        manager.registerFeed(feed);

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:42:36.523

Eclipse E4 提供片段和处理器来支持模块化。

Lars Vogel 为此提供了一个很好的教程：

[http://www.vogella.com/articles/Eclipse4Modularity/article.html](http://www.vogella.com/articles/Eclipse4Modularity/article.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T21:13:56.570

为@Frank +1 指出正确的教程。在那里，您需要在第二个插件中创建一个处理器。

# c# - $.ajax 'GET' 无法正常工作

> ID：10008276
> 
> 赞同：0
> 
> 时间：2012-04-04T09:18:33.593
> 
> 标签：c#, jquery, ajax, rest

我正在尝试使用 ajax 访问休息服务。
如果我将此链接粘贴到任何网络浏览器上，它会给出如下结果：

```
{"SessionID":"a7f58a4a-f922-47c1-8351-d2035df4968c","SourceIP":"127.0.0.1","UserID":313} 
```

（为安全起见，链接已更改）
[https://thisisjustasample/Rest/Authenticate/Login?username=user&password=pass123&ip=127.0.0.1](https://thisisjustasample/Rest/Authenticate/Login?username=user&password=pass123&ip=127.0.0.1)

但我发现没有运气使用 ajax 访问链接：

来自“查看”部分的调用：

```
getdata('https://thisisjustasample/Rest/Authenticate/Login?username=user&password=pass123&ip=127.0.0.1'); 
```

js文件里面的函数：

```
function getdata(url) {
    $.ajax({
        url: url,
        type: 'GET',
        contentType: 'application/json',
        success: function (data) {
            if (data) {
                showtooltip(data);
            }
        },
        error: function (xhr, ajaxOptions, error) {
            showtooltip(xhr.status + ': ' + error);
        }
    });
} 
```

它始终返回“0”状态。当我检查我的数据库时，数据没有任何变化。代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:26:18.823

我有一种感觉，问题是当您不应该指定 contentType 时，您正在指定 json 的内容类型，并且您的参数应该是数据的一部分。

```
$.ajax({
    url: "https://thisisjustasample/Rest/Authenticate/Login",
    type: 'GET',
    data: "username=user&password=pass123&ip=127.0.0.1",
    success: function (data) {
        if (data) {
            showtooltip(data);
        }
    },
    error: function (xhr, ajaxOptions, error) {
        showtooltip(xhr.status + ': ' + error);
    }
}); 
```

# perl - 在 Perl 中通过 SMTP 发送邮件

> ID：10008277
> 
> 赞同：18
> 
> 时间：2012-04-04T09:18:34.133
> 
> 标签：perl, email, smtp

我正在尝试在 Perl 中通过 SMTP 发送邮件。

我为此写了一个脚本。

```
#!perl
use warnings;
use strict;
use Net::SMTP;

my $smtpserver = 'server';
my $smtpport = 25;
my $smtpuser   = 'username';
my $smtppassword = 'password';

my $smtp = Net::SMTP->new($smtpserver, Port=>$smtpport, Timeout => 10, Debug => 1);
die "Could not connect to server!\n" unless $smtp;

$smtp->auth($smtpuser, $smtppassword);
$smtp->to('mymail@gmail.com');
$smtp->data();
$smtp->datasend("To: mymail\@gmail.com\n");
$smtp->quit; 
```

当我运行这个脚本时，我的输出如下：

```
Net::SMTP>>> Net::SMTP(2.31)
Net::SMTP>>>   Net::Cmd(2.29)
Net::SMTP>>>     Exporter(5.65)
Net::SMTP>>>   IO::Socket::INET(1.31)
Net::SMTP>>>     IO::Socket(1.32)
Net::SMTP>>>       IO::Handle(1.31)
Net::SMTP=GLOB(0x273faf0)<<< 220 server GMX Mailservices E
Net::SMTP=GLOB(0x273faf0)>>> EHLO localhost.localdomain
Net::SMTP=GLOB(0x273faf0)<<< 250-server GMX Mailservices
Net::SMTP=GLOB(0x273faf0)<<< 250-8BITMIME
Net::SMTP=GLOB(0x273faf0)<<< 250-ENHANCEDSTATUSCODES
Net::SMTP=GLOB(0x273faf0)<<< 250-SIZE
Net::SMTP=GLOB(0x273faf0)<<< 250-AUTH=LOGIN PLAIN
Net::SMTP=GLOB(0x273faf0)<<< 250-AUTH LOGIN PLAIN
Net::SMTP=GLOB(0x273faf0)<<< 250 STARTTLS
Net::SMTP=GLOB(0x273faf0)>>> RCPT TO:<mymail@gmail.com>
Net::SMTP=GLOB(0x273faf0)<<< 503 5.5.1 MAIL first {mp-eu001}
Net::SMTP=GLOB(0x273faf0)>>> DATA
Net::SMTP=GLOB(0x273faf0)<<< 503 5.5.1 MAIL first {mp-eu001}
Net::SMTP=GLOB(0x273faf0)>>> To: mymail@gmail.com
Net::SMTP=GLOB(0x273faf0)>>> .
Net::SMTP=GLOB(0x273faf0)<<< 502 5.5.2 Unimplemented {mp-eu001}
Net::SMTP=GLOB(0x273faf0)>>> QUIT
Net::SMTP=GLOB(0x273faf0)<<< 502 5.5.2 Unimplemented {mp-eu001} 
```

我没有足够的关于 Perl 和 SMTP 的信息，所以我无法理解这个错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-04T09:54:51.013

You have to start a SMTP session (after authorization, if necessary) with a MAIL command giving the sender's email address. That's why the responses say "MAIL first" (5xx is an error response). So:

```
$smtp->auth($smtpuser, $smtppassword);
$smtp->mail('sender@example.com');
$smtp->to('mymail@gmail.com'); 
```

But if you're not a SMTP expert, why not use a higher-level module like [Email::Sender](http://search.cpan.org/perldoc?Email::Sender) instead of the low-level [Net::SMTP](http://search.cpan.org/perldoc?Net::SMTP)?

```
use strict;
use warnings;

use Email::Sender::Simple qw(sendmail);
use Email::Sender::Transport::SMTP ();
use Email::Simple ();
use Email::Simple::Creator ();

my $smtpserver = 'server';
my $smtpport = 25;
my $smtpuser   = 'username';
my $smtppassword = 'password';

my $transport = Email::Sender::Transport::SMTP->new({
  host => $smtpserver,
  port => $smtpport,
  sasl_username => $smtpuser,
  sasl_password => $smtppassword,
});

my $email = Email::Simple->create(
  header => [
    To      => 'mymail@gmail.com',
    From    => 'sender@example.com',
    Subject => 'Hi!',
  ],
  body => "This is my message\n",
);

sendmail($email, { transport => $transport }); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-14T13:55:07.303

这是当前使用 STARTTLS 与 Gmail 一起使用的 cjm 脚本的更新版本（未使用其他 SMTP 服务进行测试）它使用 Email::Sender::Transport::SMTPS 而不是 Email::Sender::Transport::SMTP

您的 gmail 帐户必须允许“访问不太安全的应用程序”（“打开”）——其中“不太安全”并不意味着未加密，它似乎意味着不使用 OAuth 2.0

```
use strict;
use warnings;

use Email::Sender::Simple qw(sendmail);
use Email::Sender::Transport::SMTPS;
use Email::Simple ();
use Email::Simple::Creator ();

my $smtpserver = 'smtp.gmail.com';
my $smtpport = 587;
my $smtpuser   = 'user@gmail.com';
my $smtppassword = 'password';

my $transport = Email::Sender::Transport::SMTPS->new({
  host => $smtpserver,
  ssl  => 'starttls',
  port => $smtpport,
  sasl_username => $smtpuser,
  sasl_password => $smtppassword,
  debug => 1,
});

my $email = Email::Simple->create(
  header => [
    To      => 'user@example.com',
    From    => 'whatever@gmail.com',
    Subject => 'Hi!',
  ],
  body => "This is my message\n",
);

sendmail($email, { transport => $transport }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T09:52:08.047

它抱怨缺少`MAIL FROM:`SMTP 命令。~~不看任何文档，我猜它看起来像`$smtp->from('you@example.net')`~~就像@cjm 写的那样，你需要`$smtp->mail('you@example.net');`

诚然，在您刚刚通过身份验证后必须提供用户名似乎有点愚蠢，但从历史和向后兼容性的角度来看，这是有道理的（STARTTLS ESMTP 规范可以简单地说明您需要做什么来进行身份验证，然后会话的其余部分就像身份验证完成后的常规 SMTP 一样发生）。`Net::SMTP`不过，让您免受这些实现细节的影响是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-25T03:14:36.863

可悲的是，在 2014 年末（非常），Net::SMTP::SSL 未能通过 1 次安装测试中的 1 次，因此无法访问 gmail（和任何其他）基于 Web 的服务器。在不安装我自己的邮件服务器的情况下，我能找到从 Perl 发送电子邮件的唯一方法是将 OLE 发送到 Outlook。然后 Outlook 将使用其连接来实现。

我希望有人能证明我错了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T09:05:09.183

顺便说一句 - 虽然有点晚了，但对于未来的读者来说，你真的收到了邮件吗？

附加的输出中没有错误。您已在构造函数中启用调试 (Debug=>1)。一旦将其设置为 0，这些消息就会消失。使用 SMTP 的优点是它包含在库存安装中。无需添加模块。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-08T04:55:35.340

对于使用 STARTTLS 的电子邮件服务，最好使用较新的 NET::SMTPS 模块。试试下面的代码：

```
my $msg = MIME::Lite ->new (  
From => 'from@bellsouth.net',
To => 'to@gmail.com',
Subject => 'Test Message',
Data => 'This is a test',
Type => 'text/html'
);

my $USERNAME = 'from@bellsouth.net';
my $PASSWORD = 'abc123'; 

my $smtps = Net::SMTPS->new("smtp.mail.att.net", Port => 587,  doSSL => 'starttls', SSL_version=>'TLSv1');

$smtps->auth ( $USERNAME, $PASSWORD ) or die("Could not authenticate with bellsouth.\n");

$smtps ->mail('from@bellsouth.net');
$smtps->to('to@gmail.com');
$smtps->data();
$smtps->datasend( $msg->as_string() );  
$smtps->dataend();  
$smtps->quit; 
```

# objective-c - 过滤 NSArray 字符串元素

> ID：10008278
> 
> 赞同：5
> 
> 时间：2012-04-04T09:18:46.253
> 
> 标签：objective-c, cocoa, nsarray

所以，基本上我有一个`NSArray`.

在过滤了那些不以给定前缀开头的内容后，我想获得一个包含初始数组内容的数组。

它认为使用`filteredArrayUsingPredicate:`是最好的方法；但我不确定我该怎么做......

到目前为止，这是我的代码（`NSArray`实际上在一个类别中）：

```
- (NSArray*)filteredByPrefix:(NSString *)pref
{
    NSMutableArray* newArray = [[NSMutableArray alloc] initWithObjects: nil];

    for (NSString* s in self)
    {
        if ([s hasPrefix:pref]) [newArray addObject:s];
    }

    return newArray;
} 
```

它是对 Cocoa 最友好的方法吗？我想要的是尽可能快的东西......

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T09:41:44.400

这是一个更简单的使用方法`filteredArrayUsingPredicate:`：

```
NSArray *filteredArray = [anArray filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@"SELF like  %@", [pref stringByAppendingString:@"*"]]; 
```

这将通过检查它是否匹配由前缀和通配符组成的字符串来过滤数组。

如果要不区分大小写地检查前缀，请`like[c]`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:10:10.303

您也可以使用类`indexOfObjectPassingTest:` 的方法`NSArray`。**在 Mac OS X v10.6 及更高版本中可用**。

```
@implementation NSArray (hasPrefix)

-(NSMutableArray *)filteredByPrefix:(NSString *)pref
{
    NSMutableArray* newArray = [[NSMutableArray alloc] initWithCapacity:0];

    NSUInteger index = [self indexOfObjectPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
        if ([ obj hasPrefix:pref]) {
            [newArray addObject:obj];
            return YES;
        } else
            return NO;
    }];

    return [newArray autorelease];

}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:41:32.700

您可以使用 -indexesOfObjectsPassingTest:。例如：

```
NSIndexSet* indexes = [anArray indexesOfObjectsPassingTest:^(id obj, NSUInteger idx, BOOL *stop) {
    return [obj hasPrefix:pref];
}];
NSArray* newArray = [anArray objectsAtIndexes:indexes]; 
```

# android - MapView - 在他旅行的路上追踪和绘制路线？

> ID：10008279
> 
> 赞同：0
> 
> 时间：2012-04-04T09:18:47.683
> 
> 标签：android

我正在尝试在 mapView 中从当前位置（从 GPS 获取）到他的旅行方式绘制路线。

当用户向特定方向移动时，我能够获取用户的位置，但我无法绘制路径。

当他不断地从一个地方移动到另一个地方时，绘制路线路径的最佳方法是什么？

我希望方法很好（在性能方面）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:12:03.123

您必须跟踪当前位置和以前的位置（例如在全局变量中）才能绘制路径[除了第一次只有当前位置，所以在下一点之前你什么都不做]。

```
 int x1 = -1, y1 = -1, x2 = -1, y2 = -1;
        Paint paint = new Paint();
        paint.setColor(Color.rgb(0x7b, 0x7b, 0xff));
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(5);

                Point prevloc = new Point();
                mv.getProjection().toPixels(new GeoPoint((int (prevlocation.getLatitude()*1.0E6),(int) (prevlocation.getLongitude()*1.0E6)), prevloc);
                Point loc = new Point();
                mv.getProjection().toPixels(new GeoPoint((int (location.getLatitude()*1.0E6),(int) (location.getLongitude()*1.0E6)), loc);
                x2 = prevloc.x;
                y2 = prevloc.y;
                if (first)
                {
                    x2 = loc.x;
                    y2 = loc.y;
                }
                if (!first) {
                    canvas.drawLine(x1, y1, x2, y2, paint);
                }
                x1 = x2;
                y1 = y2; 
```

这将被调用`draw()`，您可以通过在函数中绘制覆盖以某种方式调用此绘制`onLocationChanged()`函数。

注意：canvas 和 mv 是传递给`draw()`函数的参数，first 是一个全局布尔变量，表示这是你得到的第一个点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:46:38.173

```
public void draw(Canvas canvas, MapView mapv, boolean shadow){
    super.draw(canvas, mapv, shadow);
    Projection projection = mapv.getProjection();
    Path p = new Path();
    for (int i = 0; i < geoPointsArray.size(); i++) {
        if (i == geoPointsArray.size() - 1) {
            break;
        }
        Point from = new Point();
        Point to = new Point();
        projection.toPixels(geoPointsArray.get(i), from);
        projection.toPixels(geoPointsArray.get(i + 1), to);
        p.moveTo(from.x, from.y);
        p.lineTo(to.x, to.y);
    }
    Paint mPaint = new Paint();
    mPaint.setStyle(Style.STROKE);
    mPaint.setColor(Color.GREEN);
    mPaint.setAntiAlias(true);
    mPaint.setStrokeWidth(5);
    canvas.drawPath(p, mPaint);
    mapv.invalidate();
    super.draw(canvas, mapv, shadow);
}//draw() 
```

当我们从一个地方移动到另一个地方时，我们可以使用上述方法来绘制路线。`geoPointsArray`是接收到的位置的数组。

# wcf - 使用 LOCALHOST 并使用 2 个 IP 地址时绑定到端口的服务如何影响？

> ID：10008282
> 
> 赞同：0
> 
> 时间：2012-04-04T09:18:53.290
> 
> 标签：wcf, binding, tcp, windows-server-2008

我在 Windows 2008 R2 Standard 虚拟服务器上安装了一堆 WCF 服务。许多端点都绑定到本地主机，请参见下面的示例：

* * *

端点地址="net.tcp://localhost:8738/Services/Service"

* * *

这目前仅在单个本地 IP (192.168.20.10) 绑定到 NIC 时有效。

如果我添加另一个本地 IP 地址（192.168.20.11）：

1) localhost 引用是否意味着服务端口在两个 IP 地址上都发布？

2）如果不是，操作系统如何决定哪个IP？

谢谢斯科特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:38:03.010

`localhost`指环[回地址](http://en.wikipedia.org/wiki/Loopback) `IPv4: 127.0.0.1`或`IPv6 ::1`.

当服务绑定到环回地址时，它仅对该主机可用。一种用例是 Web 服务组件，这些组件仅由 HTTP 守护程序通过代理公开。将 IP 地址添加到接口不会对绑定到`localhost`.

当一项服务打算对网络可用时，绑定通常是`*:portnumber`. 这将侦听所有 IP 地址，因此向接口添加另一个 IP 将导致新 IP 地址上的服务也可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T12:13:19.770

我发现使用类似的东西`net.tcp://localhost:4512`不会像预期的那样绑定到环回地址，而是会监听，`0.0.0.0:4512`从而接受所有 IP 地址上的连接。

# javascript - 使用主干式原型继承时防止无限递归

> ID：10008285
> 
> 赞同：6
> 
> 时间：2012-04-04T09:18:59.813
> 
> 标签：javascript, inheritance, backbone.js, prototypal-inheritance

我正在使用从 Backbone 改编的扩展函数（除了一些更改以符合我的雇主的命名约定外，其他相同）来实现原型继承。在设置了以下结构（下面非常简化）后，我得到了一个无限循环。

```
Graph = function () {};
Graph.extend = myExtendFunction;
Graph.prototype = {
   generateScale: function () {
       //do stuff
   }
}
 // base class defined elsewhere
UsageGraph = Graph.extend({
   generateScale: function () {
       this.constructor._super.generateScale.call(this); // run the parent's method
       //do additional stuff
   }
})

ExcessiveUsageGraph = Graph.extend({
   // some methods, not including generateScale, which is inherited directly from Usage Graph
})

var EUG = new ExcessiveUsageGraph();
EUG.generateScale(); // infinite loop 
```

循环之所以发生，是因为`ExcessiveUsageGraph`原型链向上`UsageGraph`运行该方法，但`this`仍设置为一个实例，`ExcessiveUsageGraph`因此当我使用`this.constructor._super`运行父方法时，它也向上一步`UsageGraph`并再次调用相同的方法。

如何从 Backbone 样式的原型中引用父方法并避免这种循环。如果可能，我还想避免按名称引用父类。

*编辑* [这是一个小提琴，证明这发生在 Backbone](http://jsfiddle.net/wheresrhys/wtsBP/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T13:52:01.053

您遇到了 JavaScript 和原型继承的限制之一`this`，这完全是因为您试图用一种不直接支持它的语言创建类类继承方案。

即使使用 Backbone，由于您概述的限制等等，通常不鼓励您直接使用“super”。

### 解决问题

常见的解决方案是直接调用原型对象，而不是尝试通过使用“超级”引用来掩盖它。

```
 UsageGraph = Graph.extend({
   generateScale: function () {
       Graph.prototype.generateScale.call(this); // run the parent's method
       //do additional stuff
   }
}) 
```

在工作的 JSFiddle：http: [//jsfiddle.net/derickbailey/vjvHP/4/](http://jsfiddle.net/derickbailey/vjvHP/4/)

这工作的原因与 JavaScript 中的“this”有关。当你调用一个函数时，“this”关键字是根据你调用函数的方式设置的，而不是函数的定义位置。

在此代码中调用“generateScale”方法的情况下，调用设置上下文的 generateScale 函数是点符号。换句话说，因为代码读取`prototype.generateScale`，函数调用的上下文（“this”关键字）被设置为`prototype`对象，它恰好是`Graph`构造函数的原型。

由于`Graph.prototype`现在是调用的上下文，因此`generateScale`该函数将以您期望的上下文和行为运行。

### 为什么是 this.constructor。**超级**失败

相反，当您调用 时，由于开头`this.constructor._super.generateScale`的关键字，您允许 JavaScript 以您没有预料到的方式倾斜上下文。`this`

导致“this”问题的是您的层次结构的第 3 级。您正在调用`EUG.generateScale`，它明确设置`this`为`EUG`实例。方法的原型查找`generateScale`回到`Graph`原型调用方法，因为方法不是`EUG`直接在实例上找到的。

但是`this`已经设置了`EUG`实例，并且 JavaScript 的原型查找尊重`this`. 因此，在调用 UsageGraph 原型时`generateScale`，`this`将其设置为`EUG`实例。因此，调用`this.constructor.__super__`将从`EUG`实例中进行评估，并将找到 UsageGraph 原型作为 的值`__super__`，这意味着您将再次使用相同的上下文在同一个对象上调用相同的方法。因此，一个无限循环。

解决方案不是`this`在原型查找中使用。直接使用命名函数和原型，正如我在解决方案和 JSFiddle 中展示的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T15:28:31.010

其他人已经讲过 JavaScript 的“this”的局限性，我不再赘述。但是，在技术上可以定义一个尊重继承链的“_super”。Ember.js 是一个很好的库示例。例如在 Ember.js 中，您可以这样做：

```
var Animal = Ember.Object.extend({
    say: function (thing) {
        console.log(thing + ' animal');
    }
});

var Dog = Animal.extend({
    say: function (thing) {
        this._super(thing + ' dog');
    }
});

var YoungDog = Dog.extend({
    say: function (thing) {
        this._super(thing + ' young');
    }
});

var leo = YoungDog.create({
    say: function () {
        this._super('leo');
    }
});

leo.say(); 
```

leo.say() 将向控制台输出“leo young dog animal”，因为 this._super 指向其父对象的同名方法。要了解 Ember 是如何做到这一点的，您可以在此处查看 Ember 源代码中的 Ember.wrap 函数：

[http://cloud.github.com/downloads/emberjs/ember.js/ember-0.9.6.js](http://cloud.github.com/downloads/emberjs/ember.js/ember-0.9.6.js)

Ember.wrap 是他们包装对象的每个方法的地方，以便 this._super 指向正确的位置。也许你可以从 Ember 那里借用这个想法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:06:02.443

到目前为止，我最好的解决方案是给方法的函数命名，以便能够直接引用它并将其与假定的“父”方法进行比较——这可能是我第一次发现用于给方法一个单独的函数名。欢迎任何意见或改进；

```
Graph = function () {};
Graph.extend = myExtendFunction;
Graph.prototype = {
   generateScale: function GS() {
       //do stuff
   }
}
 // base class defined elsewhere
UsageGraph = Graph.extend({
   generateScale: function GS() {
       var parentMethod = this.constructor._super.generateScale;
       if(parentMethod === GS) {
           parentMethod = this.constructor._super.constructor._super.generateScale;
       }
       parentMethod.call(this); // run the parent's method
       //do additional stuff
   }
})

ExcessiveUsageGraph = Graph.extend({
   // some methods, not including generateScale, which is inherited directly from Usage Graph
})

var EUG = new ExcessiveUsageGraph();
EUG.generateScale(); // infinite loop 
```

# iphone - Core Graphics 没有以正确的宽度画线

> ID：10008286
> 
> 赞同：2
> 
> 时间：2012-04-04T09:19:04.847
> 
> 标签：iphone, objective-c, uiview, uikit, border

我正在尝试将 UIView 上的边框与 drawRect 中绘制的线条结合起来。我使用两个相同的宽度。但问题是，有时绘制的线的宽度对两者来说是相同的，有时是不同的——这甚至会随着设备方向的变化而变化！但即使不改变设备方向，它的宽度通常仍然不一样。

边框是用以下方式绘制的：

```
view.layer.borderColor = [UIColor blackColor].CGColor;
view.layer.borderWidth = 1.0f; 
```

在该视图之上是另一个视图，它是 UIView 的子类。两个视图具有相同的宽度，第二个视图覆盖了上面视图的顶部。覆盖视图使用 drawRect 中的以下代码在左侧绘制一条线，该线应该与其下方的上述视图的边框完美对齐：

```
CGContextRef context = UIGraphicsGetCurrentContext();
CGFloat x = self.bounds.origin.x;
CGFloat y = self.bounds.origin.y;
CGFloat width = self.bounds.size.width;
CGFloat height = self.bounds.size.height;

CGContextSetStrokeColorWithColor(context, [UIColor blackColor].CGColor);
CGContextSetLineWidth(context, 1.0f);

// Left line
CGContextMoveToPoint(context, x, y);
CGContextAddLineToPoint(context, x, height);
CGContextStrokePath(context);

// Right line
CGContextMoveToPoint(context, width - 1.0f, y);
CGContextAddLineToPoint(context, width - 1.0f, height);
CGContextStrokePath(context); 
```

有什么想法可以实现吗？现在，即使宽度始终为 1.0f，如果两条线都以相同的可见宽度绘制，这只是巧合。

目标是最终得到一个看起来像底部圆角但顶部通常边缘的视图。这就是我这样做的原因。第一个视图有圆角，上面的第二个视图在宽度上与之匹配，但覆盖了顶部，因此顶部的圆角不可见。

纵向截图： ![在此处输入图像描述](../Images/c0faae3c75cada20fc6511df0a3c2ea8.png)

横屏截图： ![在此处输入图像描述](../Images/33b42a45f6d54a83037c8d0340f6a195.png)

黄色视图位于白色视图之上。由于 view.layer.borderWidth = 1.0f 绘制了白色视图的黑线。黄色视图左右的黑线是用上面的代码在drawRect中绘制的。方向更改会触发重绘，但绘图代码本身保持不变。两张截图均来自配备 Retina 显示屏的 iPhone（iPhone 4S）。

据我所知，所有值都是“整数”：

```
x: 0.000000, y: 0.000000
width: 264.000000, height: 10.000000
frame.origin.x: 33.000000, frame.origin.y: 38.000000 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T10:12:34.493

我猜你画的线不是像素对齐的。如果我错了，那么请忽略我的切线。但它仍然是有用的信息。

我将从这个 WWDC 2011 视频中借用一些截图：

[《1-29 Session 129 - iOS 开发者实战图》](https://developer.apple.com/videos/wwdc/2011/?id=129)

我建议你看整个事情。相关部分在 20:50 左右开始。

基本上，假设你想画一条从 (1,2) 到 (4,2) 的 1pt 线

![在此处输入图像描述](../Images/e6030b3bfeb2f0fa4a0a930ca696f301.png)

核心图形将尝试将其沿 y 值（即 2.0）居中。这意味着它将尝试绘制顶部边缘在 y=1.5 且底部边缘在 y=2.5 的线：

![在此处输入图像描述](../Images/bc8f61f6845ed9a530bb93d796a00e23.png)

在视网膜显示器上，这可以正常工作，因为 y=1.5 和 y=2.5 是像素对齐的：

![在此处输入图像描述](../Images/5d65efe692b050acb74bcca03a74ff10.png)

然而，在非视网膜显示器上，图形系统将被迫以半强度填充 2 个垂直像素，以获得最接近的匹配：

![在此处输入图像描述](../Images/fa2c8a4c18f8de760b4654b9e6a3132c.png)

请注意，当您处理较小的小数点值时，*仍会在视网膜显示器上看到此效果。*所以这个问题仍然可以在视网膜显示器上看到，具体取决于您的视图框架。

为了解决这个问题，任何时候你有一个奇数的线宽，你需要将你绘制它的点值偏移 0.5。您需要根据情况向上/向下/向左/向右偏移它。

![在此处输入图像描述](../Images/1859566a2915621f109e882422735e50.png)

我希望这有帮助。没有截图很难说你的问题是什么。

# iphone - iPhone 日历日视图

> ID：10008303
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:19:57.127
> 
> 标签：iphone, ios, view, calendar

在跳到我之前，请仔细阅读我的问题：D。我知道这里已经有一些答案，但与实际视图无关。我知道如何使用 UIScrollView 等来实现逻辑。但我的问题是：你建议如何实现 View。（我想将此自定义 UIView 的三个实例添加到 UIScrollView）。我正在考虑在drawRect中绘制线条并在initWithFrame中添加UILabels。或者我应该构建一个包含我的行的不同自定义 UIView，然后将其多次添加到代表我的日历视图的自定义 UIView 中？

现在我只对创建背景视图（时间标签和线条）感兴趣，稍后我会担心这些事件。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-28T11:54:03.647

结帐我使用 Tapku 库[DayView创建了日视图](https://github.com/safecase123/Calender)

我已经在某种程度上进行了定制，就像`iCalender`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:26:31.943

您可以在 iPhone 中将 Tapku 库用于日历视图，以下是 tapku 库的链接，实现它[https://github.com/devinross/tapkulibrary](https://github.com/devinross/tapkulibrary)

**下载库并使用 TKCalendarMonthView**作为日历..

# android - Android 实现一个页面计数器，如主屏幕上的页面计数器

> ID：10008309
> 
> 赞同：4
> 
> 时间：2012-04-04T09:20:26.097
> 
> 标签：android

有谁知道如何像主屏幕上的那样做页面/查看计数器（小点）的示例？

像这个例子：

![在此处输入图像描述](../Images/92be3c5c5a422515f0d58f9ce8accaed.png)

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T09:55:47.617

[PagerTitleStrip](http://developer.android.com/reference/android/support/v4/view/PagerTitleStrip.html)是您`ViewPager`用来指示您所在页面的工具。这是您添加到`XML`.

**布局 XML**：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center" >

    <android.support.v4.view.PagerTitleStrip
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="top" />
</android.support.v4.view.ViewPager>

</LinearLayout> 
```

**在您的 PagerAdapter 中**：

```
@Override
    public CharSequence getPageTitle (int position) {
        return "Your static title";
    } 
```

但是，`PagerTitleStrip`不是很可定制，但[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator)是非常可定制的，包括您正在寻找的虚线指示器。您需要对其进行主题化以在您的 OP 中重新创建图片。

**圆形指示器** `ViewPagerIndicator`：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res/com.viewpagerindicator.sample"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    />
<com.viewpagerindicator.CirclePageIndicator
    android:id="@+id/indicator"
    android:padding="10dip"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    />

</LinearLayout> 
```

**然后在您的代码中**：

```
CirclePageIndicator mIndicator = (CirclePageIndicator)findViewById(R.id.indicator);
        mIndicator.setViewPager(mPager); 
```

[ViewPagerExtensions](https://github.com/astuetz/ViewPagerExtensions)是另一个开源库，可为`ViewPager`您提供可能感兴趣的自定义视图。

# javascript - 检查隐藏是否等于真或假jQuery

> ID：10008312
> 
> 赞同：3
> 
> 时间：2012-04-04T09:20:44.863
> 
> 标签：javascript, jquery, get

我有这个

```
$('#div').attr("hidden", true); 
```

我试过：

```
var a = $('#div').attr("hidden");
var b = $('#div').attr("hidden").val();
var c = $('#div').hidden;
var a = $('#div').disabled; 
```

我只想知道 hidden 是真还是假。有人知道吗？我的研究成果都是关于形式和输入的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T09:22:48.420

属性永远不会是`true`，它只能有字符串。
jQuery 具有`data`字符串以外的对象的功能：

```
$('#div').data("hidden", true);      // set the "hidden" data
var flag = $('#div').data("hidden"); // get the "hidden" data (true) 
```

如果您想隐藏`div`，请使用`.hide()`：

```
$('#div').hide(); 
```

然后你检查 div 是否可见`:visible`\`:hidden`

```
$('#div').is(':visible'); // Or $('#div').is(':hidden') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T09:55:17.303

或者你可以使用

```
$('#div').toggle(showOrHide); 
```

其中 showOrHide 是 true 或 false 的布尔值，用于隐藏或显示。

这和做的一样

```
if ( showOrHide == true ) {
  $('#div').show();
} else if ( showOrHide == false ) {
  $('#div').hide();
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:24:26.950

我认为你的意思是 jquery [可见](http://api.jquery.com/visible-selector/)

```
.is(':visible') 
```

# python - 未定义全局名称“RegistrationForm”

> ID：10008314
> 
> 赞同：0
> 
> 时间：2012-04-04T09:20:59.403
> 
> 标签：python, django

```
def register_page(request):
    if request.method == 'POST':
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.creat_user(
                username=form.clean_data['username'],
                password=form.clean_data['password1'],
                email=form.clean_data['email']
                )
            return HttpResponseRedirect('/accounts/register/success/')
    else:
        form = RegistrationForm()
    variables = RequestContext(request, {'form': form})
    return render_to_response ('registration/register.html',variables) 
```

当我运行服务器时，出现此错误：

```
global name 'RegistrationForm' is not defined
Request Method: GET
Request URL:    http://127.0.0.1:8000/accounts/register/
Django Version: 1.4
Exception Type: NameError
Exception Value:    
global name 'RegistrationForm' is not defined
Exception Location: D:\Python\Scripts\littlesite\messageboard\views.py in register_page, line 31
Python Executable:  D:\Python\python.exe
Python Version: 2.7.2 
```

谁能告诉我它有什么问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:39:55.867

你没有导入`RegistrationForm`. 为了使用它，您需要将它导入到您当前的命名空间中。

如果您使用[django-registration](https://bitbucket.org/ubernostrum/django-registration/)，请使用以下导入：

```
from registration.forms import RegistrationForm 
```

如果它是自定义表单，请从您定义它的位置导入它。

# c - 使用 malloc 声明内存

> ID：10008321
> 
> 赞同：0
> 
> 时间：2012-04-04T09:21:24.583
> 
> 标签：c, malloc

```
gcc (GCC) 4.6.3
c89
apache runtime portable libraries 
```

你好，

只是一个简单的问题，我想我正在尝试创建一个 uuid 值。

我希望我创建它的函数是独立的（黑匣子），所以我可以只传递一个缓冲区，然后该函数将完成其余的工作。

这意味着我必须在该函数的堆上声明内存，因为调用函数并不知道要声明多少。我知道这是个坏主意，因为 callie 必须在完成后释放内存。

有什么办法可以做得更好吗？

当我运行它时，函数返回后，branch_id_buf 始终为空。但是，我已将它传递给函数，因此当函数返回时不应为空，因为它应该指向一些分配的内存。

非常感谢您的任何建议，

```
static void g_get_branch_id(char *branch_id_buf);

int main(void)
{
    char *branch_id_buf = NULL;

    g_get_branch_id(branch_id_buf);

    printf("branch id [ %s ]\n", branch_id_buf);

    free(branch_id_buf);

    return 0;
}

static void g_get_branch_id(char *branch_id_buf)
{
    apr_uuid_t uuid;

#define MAGIC_COOKIE_LENGTH 9

    const char *MAGIC_COOKIE = "z9hG4bk-";
    const int BRANCH_ID_LENGTH = APR_UUID_FORMATTED_LENGTH + MAGIC_COOKIE_LENGTH;

    branch_id_buf = malloc(BRANCH_ID_LENGTH);
    if(branch_id_buf == NULL) {
        return;
    }

    strncpy(branch_id_buf, MAGIC_COOKIE, BRANCH_ID_LENGTH);
    printf("branch id [ %s ]\n", branch_id_buf);
    apr_uuid_get(&uuid);

#define PREFIX_BRANCH_LENGTH 8
    apr_uuid_format(branch_id_buf + PREFIX_BRANCH_LENGTH, &uuid);

    printf("branch id [ %s ]\n", branch_id_buf);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:24:31.040

在发布的代码中，`branch_id_buf`函数是本地的：所做的任何更改对调用者都是不可见的。

你需要通过一个`char**`：

```
char *branch_id_buf = NULL;

g_get_branch_id(&branch_id_buf);

...

void g_get_branch_id(char **branch_id_buf) {

    /* Dereference 'branch_id_buf' within this function. */
    *branch_id_buf = malloc(BRANCH_ID_LENGTH); 
```

编辑：

正如[larsmans](https://stackoverflow.com/users/166749/larsmans)所评论的，考虑返回 a`char*`而不是接受参数：

```
char *branch_id_buf = g_get_branch_id();

char* g_get_branch_id() {

    char* branch_id_buf = malloc(BRANCH_ID_LENGTH);
    ...
    return branch_id_buf;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:29:24.710

这不是一个坏主意。请小心并记住释放该内存。很少有常用技术可以使其更加安全。比如引用计数或释放池。

或者，您可以两次调用“黑匣子”。第一次调用需要多少内存，然后使用指向已分配缓冲区的指针进行第二次调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:49:23.917

通常，在一个模块中分配而在另一个模块中释放是一个非常糟糕的主意。这正是您在程序中创建大量内存泄漏的方式。您的代码特别成问题，因为您不仅将自由留给调用者，而且还有将指针初始化为 NULL 的责任

话虽如此，您似乎只处理编译时常量（？），所以我不明白为什么您甚至需要malloc。你不能这样吗？

```
static const char MAGIC_COOKIE[] = "z9hG4bk-";

#define MAGIC_COOKIE_LENGTH (sizeof(MAGIC_COOKIE)/sizeof(char))

#define BRANCH_ID_LENGTH (APR_UUID_FORMATTED_LENGTH + MAGIC_COOKIE_LENGTH)

static void g_get_branch_id (char branch_id_buf [BRANCH_ID_LENGTH]); 
```

原型中的数组长度向调用者表明他们应该将指针传递给具有该长度的缓冲区。

# symfony - Symfony2/Monolog：日志级别 - 仅显示 app.INFO？

> ID：10008322
> 
> 赞同：7
> 
> 时间：2012-04-04T09:21:24.770
> 
> 标签：symfony, monolog

我正在使用 Symfony2 和 monolog 在定义的日志文件（mylogfile.log）中写入特定日志：

```
#config_dev.yml
monolog:
    handlers:
        main:
           type:  stream
           path:  %kernel.logs_dir%/%kernel.environment%.log
           level: debug
       file:
           type:   stream
           path:   %kernel.logs_dir%/mylogfile.log
           level:  info 
```

我正在通过以下方式访问控制器中的日志文件：

```
 $logger = $this->get('logger'); // Log
    $logger->info('somelogcontent'); 
```

现在我的问题是我的日志文件包含整个信息级别，这意味着它为我提供了所有 app.INFO 日志（这是我想要的）和 request.INFO（我真的不需要）：

```
[2012-04-04 11:13:17] request.INFO: Matched route ... blablabla
[2012-04-04 11:13:17] app.INFO: somelogcontent
... 
```

有没有办法不记录 Request.INFO？

麦克风

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T11:57:25.877

您必须创建一个新的记录器服务，应该在您的课程中使用它。像这样，config.yml：

```
services:
  my_logger:
    class: Monolog\Logger
    arguments: [my_info]
    calls:
        - [pushHandler, [@my_log_handler]]

  my_log_handler:
    class: Monolog\Handler\StreamHandler
    arguments: [%kernel.root_dir%/logs/my_info.log, 100] 
```

用法（`Controller`例如在 中）：

```
$this->get('my_logger')->info('info message'); 
```

[symfony 食谱](http://symfony.com/doc/current/cookbook/logging/monolog.html)中的更多详细信息。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-06T19:03:10.447

使用 MonologBu​​ndle 的 2.4 及更高版本（注意，MonologBu​​ndle 的发布周期不再与 symfony 同步），您现在可以通过配置非常简单地定义新通道，而无需定义服务。

```
monolog:
    channels: ["my_channel"]
    handlers:
       file:
           type:   stream
           path:   %kernel.logs_dir%/mylogfile.log
           level:  info
           channels: my_channel 
```

现在只需在控制器中为新通道自动创建记录器：

```
$logger = $this->get('monolog.logger.my_channel');
$logger->info('somelogcontent'); 
```

* * *

`MonologBundle` `~2.4`我知道老问题，但应该提到这个新功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T11:27:25.897

您可以用户警报级别。文件：类型：流路径：%kernel.logs_dir%/mylogfile.log 级别：警报

```
$logger = $this->get('logger'); // Log
$logger->alert('somelogcontent'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T13:03:13.290

此日志消息来自**router_listener**服务。您可以在服务配置文件中重新定义它。

我在主包 config/services.yml 中所做的事情：

```
services:

    # ...

    router_listener:
        class:  %router_listener.class%
        arguments: ['@router', %request_listener.http_port%, %request_listener.https_port%]
        tags:
            - { name: kernel.event_listener, event: kernel.request, method: onEarlyKernelRequest }
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

它使“匹配的路由...”日志消息不被记录（因为 RouterListener 在其构造函数参数中没有记录器服务）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-18T15:37:34.980

添加你的独白配置，例如如果我使用 handler:test

```
test:
    type: filter
    accepted_levels: [info]
    handler: test_info
test_info:
    type: stream // many possibilities(rotating_file..)
    level: info
    path: // the path where you save file log 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-02-16T08:09:35.103

在您的 config\packages\monolog.yaml 文件中添加“app”特定通道

```
monolog:
    handlers:
        info:
            type:  rotating_file
            path:  '%kernel.logs_dir%/info_%kernel.environment%_info.log'
            level: info
            max_files: 10
            channels: app 
```

我使用 symfony 4（或 5）

# php - 雅虎财经数据查询计数和效率

> ID：10008323
> 
> 赞同：0
> 
> 时间：2012-04-04T09:21:24.950
> 
> 标签：php, objective-c, c, ios5, yahoo-finance

我正在开发一个 Web 应用程序，它将使用来自 yahoo Finance 的财务数据。据我所知，查询有限制（500k）。所以，我正在实现一个自动填充搜索字段，它将从第一个符号开始每次按下键发送请求。据我了解，这种工具会在没有完成大量工作的情况下生成大量查询。

有什么解决方案可以有效地分配查询吗？数据库？

使用此类财务数据源的最佳做法是什么？

现在我正在使用 PHP 编程，我也在 iOS 中开发类似的应用程序，那么您可以建议哪些最佳解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:01:57.013

我的 3D 股票图表应用程序将平面文件中的数据存储（准确地说是缓存）在 tmp 子文件夹中，文件名与成功检索的符号相似。应用程序检查文件上的日期，如果它不够新，那么它会获取新数据。我本可以使用数据库，但是在经历了 3 次服务器移动和几个数据库之后，我不必更新它。它只是工作。

# c# - 通过网络请求上传文件不起作用

> ID：10008327
> 
> 赞同：0
> 
> 时间：2012-04-04T09:21:43.473
> 
> 标签：c#, file-upload, httpwebrequest

我对标题感到抱歉，但目前我没有足够的创造力来获得更好的标题。

我正在尝试将文件上传到 xup.in（在 C# 中提供一个小 API）。但不知何故，该请求不是有效的。xup.in 可以读取它，Wireshark 也可以。Post-Request 有效，但多部分表单数据无效。

请求由以下函数发送：http:
[//pastebin.com/AvwzxCLA](http://pastebin.com/AvwzxCLA)（对不起，我不能使用代码标签）

这就是我创建请求的方式：http: [//pastebin.com/btrg9xiZ](http://pastebin.com/btrg9xiZ)

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:34:29.780

Stab in the dark - 边界字符串需要有一个前导`--`，并且消息的最后一行必须有格式：`--boundarystring--`，否则消息无效。Wikipedia 上的[MIME 条目](http://en.wikipedia.org/wiki/MIME)包含一个很好的示例，说明消息的外观。将请求转储到文件并确保它是有效的多部分消息是一个好的开始。

**编辑**

您应该真正使用[System.Net.WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient%28VS.80%29.aspx)框架，而不是您正在使用的方法。它封装了所有这些功能。

通过改变你的哑剧身体构造，我成功地从脚本上传。请注意，我`Content-Type`从参数中删除了它，因为它不需要，另外我确保正确形成了边界字符串，即传入的字符串`boundaryString`与请求标头中使用的字符串一样，没有前导`--`

我让函数执行双重任务——它仅在 Stream 为`null`.

```
 public static long sendMultiPartReq(Stream req, string boundaryString, object[] files, object[] parameters)
    {
        String CRLF = "\r\n";
        byte[] b;
        long contentLength = 0;

        foreach (string[] file in files)
        {
            b = Encoding.UTF8.GetBytes(
                CRLF + "--" + boundaryString + CRLF +
                String.Format("Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"" + CRLF,
                    file[0], Path.GetFileName(file[1])) +
                "Content-Type: image/png" + CRLF + CRLF);
            contentLength += b.LongLength;
            if (req != null) req.Write(b, 0, b.Length);
            if (File.Exists(file[1]))
            {
                b = File.ReadAllBytes(file[1]);
                contentLength += b.LongLength;
                if (req != null) req.Write(b, 0, b.Length);
            }
            b = Encoding.UTF8.GetBytes(CRLF);
            contentLength += b.LongLength;
            if (req != null) req.Write(b, 0, b.Length);
        }
        foreach (string[] parameter in parameters)
        {
            b = Encoding.UTF8.GetBytes(
                "--" + boundaryString + CRLF +
                String.Format("Content-Disposition: form-data; name=\"{0}\"" + CRLF, parameter[0]) +
                CRLF + parameter[1] + CRLF);
            contentLength += b.LongLength;
            if (req != null) req.Write(b, 0, b.Length);
        }
        b = Encoding.UTF8.GetBytes("--" + boundaryString + "--" + CRLF);
        contentLength += b.LongLength;
        if (req != null) req.Write(b, 0, b.Length);
        return contentLength;
    } 
```

# c# - Twitterizer.net - 更新帖子未经授权，时间戳超出范围

> ID：10008330
> 
> 赞同：0
> 
> 时间：2012-04-04T09:21:57.827
> 
> 标签：c#, .net, twitter, twitterizer

我正在使用 Twitterizer .net 以在 c# 中制作控制台应用程序并从我的 twit 应用程序发布一些 twit 更新。

我在 twitter 中创建了应用程序并设置了所有正确的令牌

在我的程序中，我像这样发送推特状态

```
public static bool Twit(string message)
{
     var options = new StatusUpdateOptions();
     TwitterResponse<TwitterStatus> tweetResponse = TwitterStatus.Update(OathTokenHelper.OathTokens, message, options);
     return tweetResponse.Result == RequestResult.Success;
} 
```

结果我得到一个“时间戳越界”和状态“未经授权”

我检查了我的电脑时间，一切都很好。你知道它可能导致这个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:28:02.660

您的本地 PC 时间不是 GMT？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:47:40.417

注册：状态“未经授权”

确保您的应用程序具有以下访问级别

**访问级别 读取、写入和直接消息**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T11:17:49.387

更多详情：[https ://dev.twitter.com/discussions/299](https://dev.twitter.com/discussions/299)

看看上面页面的这个摘录

“如果您的访问令牌是只读的，那么您很可能在您的应用程序设置为只读状态时对其进行了协商。要重新协商它，最好的方法是首先访问[https://twitter.com/settings /applications](https://twitter.com/settings/applications)并找到应用程序然后撤消它的访问权限。等待大约 5 分钟以确保我们的系统缓存已清除，然后通过 OAuth 或本网站上的“我的访问令牌”功能再次获取您的访问令牌应用程序设置/权限类型如您所愿。”

# jquery - 使用 Jquery 将选项组添加到选项列表

> ID：10008340
> 
> 赞同：3
> 
> 时间：2012-04-04T09:22:37.547
> 
> 标签：jquery, asp.net, html, lotus-domino

我有以下`<\option>`由 Lotus Domino 生成的 HTML 代码（注意没有结束标签）。

```
<select name="Fault" class="textbox">
<option>Single Light Out
<option>Light Dim
<option>Light On In Daytime
<option>Erratic Operating Times
<option>Flashing/Flickering
<option>Causing Tv/Radio Interference
<option>Obscured By Hedge/Tree Branches
<option>Bracket Arm Needs Realigning
<option>Shade/Cover Missing
<option>Column In Poor Condition
<option>Several Lights Out (please state how many)
<option>Column Leaning
<option>Door Missing/Wires Exposed
<option>Column Knocked Down/Traffic Accident
<option>Lantern Or Bracket Broken Off/Hanging On Wires
<option>Shade/Cover Hanging Open
<option>Other
</select> 
```

使用 Jquery，一旦文档加载到此，我想转换此 HTML：- 在第 11 个选项之后添加一个 optgroup 并添加结束`</option>`标记

```
<select name="Fault" class="textbox">
<option>Single Light Out</option>
<option>Light Dim</option>
<option>Light On In Daytime</option>
<option>Erratic Operating Times</option>
<option>Flashing/Flickering</option>
<option>Causing Tv/Radio Interference</option>
<option>Obscured By Hedge/Tree Branches</option>
<option>Bracket Arm Needs Realigning</option>
<option>Shade/Cover Missing</option>
<option>Column In Poor Condition</option>
<option>Several Lights Out (please state how many)</option>
    <optgroup label="Urgent Reasons">
<option>Column Leaning</option>
<option>Door Missing/Wires Exposed</option>
<option>Column Knocked Down/Traffic Accident</option>
<option>Lantern Or Bracket Broken Off/Hanging On Wires</option>
<option>Shade/Cover Hanging Open</option>
<option>Other</option>
    </optgroup>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:31:12.443

`:nth-child(n+7)`选择所有大于索引 7 的孩子。

```
$('option:nth-child(n+7)').wrapAll('<optgroup  label="Urgent Reasons">'); 
```

见[JsFiddle](http://jsfiddle.net/Mikey/ecS4H/)

非关闭`<option>`是无效的 HTML，所以我不确定 jQuery 是如何处理这个的，因为它只是进行有效的 DOM 操作。我建议您在解析 HTML 之前修复此非结束标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:50:28.587

要修复选项标签，如果您可以将 HTML 代码读入允许您运行替换的字符串。类似的东西（这是一个 javascript 示例，因为我们正在谈论 jQuery）

```
raw_code.replace(/(<option>.+)/g, "$1</option>\n"); 
```

# php - 在 Windows 上列出包含 Unicode 字符的目录

> ID：10008341
> 
> 赞同：4
> 
> 时间：2012-04-04T09:22:39.450
> 
> 标签：php, windows, unicode, directory

我正在使用 Windows 2003 编写一些 PHP 代码。我使用 XAMPP Portable（复制到 D:）。问题：

```
$path = 'D:\ebooks';
$all_file = scandir($path);
foreach ($all_file as $file) {
  if (is_dir("$path/$file") && $file != '.' && $file != '..') {
    echo $file . "<br />\n";
  }
} 
```

当我调用脚本（使用浏览器）时，我没有看到任何包含 Unicode 字符的目录（在 D:\ebooks 中）（我用越南语、日语、中文、捷克语进行了测试）。

但如果我删除**`is_dir("$path/$file")`**，目录显示有许多奇怪的字符和许多`???`字符。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T09:32:56.130

不幸的是，有很多与 PHP 访问 Windows 文件系统相关的错误。虽然 Windows 确实将文件名存储为 UTF-16，但 PHP 的内部使用更旧的 ANSI api。所以最好只使用 ascii 范围内的文件名，或者切换到不同的操作系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:31:24.753

这可能对捷克语有帮助，对 CJK 没有帮助（我自己还在寻找那个）。Buggy“基本原理”：UTF-8 是可以的，只要它可以映射到 windows 字符集。

PHP对此非常清楚：

> scandir() 和 readdir() 不支持 Unicode 文件名
> 
> [http://bugs.php.net/bug.php?id=34574](http://bugs.php.net/bug.php?id=34574)
> 
> «PHP 在 PHP6 之前不支持 unicode 操作。»

写于 2005 年 9 月。

您还可以尝试使用 system('dir /X') 获取[等效的 dos 短名称](https://stackoverflow.com/questions/324041/how-does-windows-determine-handle-the-dos-short-name-of-any-given-file)，解析短名称和长名称的结果并从那里开始工作。显示长名称，使用短名称实际访问（当然用于统计、时间戳和文件打开）...

# html - HTML5 视频：全屏字幕

> ID：10008344
> 
> 赞同：1
> 
> 时间：2012-04-04T09:22:49.463
> 
> 标签：html, video, fullscreen, subtitle

是否可以在全屏模式下在 HTML5 视频控件上显示字幕？

我可以在窗口模式下显示它们（例如在 FF 11.0 上），稍微修改版本的[cuepoint.js](http://cuepoint.org/)来显示“实时”字幕：

```
Cuepoint.prototype.addLiveSlide = function(html) {
    var self;
    this.html = html;
    self = this;
    return this.video.addEventListener("timeupdate", function() {
        return self.update(html);
    },
    false);
}; 
```

*但是*，当用户全屏时，字幕不显示......当回到窗口模式时，它们会再次显示。

这种行为是设计使然、错误还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:30:23.703

你能做一些涉及视频和画布的魔术吗？ [http://html5doctor.com/video-canvas-magic/](http://html5doctor.com/video-canvas-magic/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:33:23.047

我建议尝试支持全屏的播放器（显然 - 我自己还没有实际测试过它的那一部分）[。](https://github.com/delphiki/Playr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T08:33:47.347

firefox 的本机全屏模式（使用 fullscreen-api）隐藏除了您请求全屏的元素之外的所有内容，无论 z-index 是什么。不过，解决方案非常简单：在视频和其他内容（例如字幕）周围包裹一个 container-div，然后为该容器请求全屏。

在任何时候都尊重 z-index-values 的 chrome 中不会出现该问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T22:52:42.267

在 Chrome 中开箱即用

*   [http://fguillen.github.com/ChromeVideoSubsStyle/](http://fguillen.github.com/ChromeVideoSubsStyle/)

# clearcase - 由于可见元素被跳过是什么意思？

> ID：10008347
> 
> 赞同：1
> 
> 时间：2012-04-04T09:23:01.807
> 
> 标签：clearcase, clearcase-ucm

在 Clearcase UCM 中，我试图进行项目间交付。

当交付即将结束时，它会显示一些警告。

> 3 个元素被跳过，因为它们不可见。在完成此交付或变基操作之前，您应该确定它们不可见的原因。如果这些元素应该可见，请取消此操作，修复问题，然后重新运行该操作。27 个元素被跳过，因为它们不可见。在完成此交付或变基操作之前，您应该确定它们不可见的原因。如果这些元素应该可见，请取消此操作，修复问题，然后重新运行该操作。

这意味着什么？文件不存在是目标流还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:41:20.517

这是一个非阻塞警告，这意味着在源分支级别：

*   自上次合并以来文件已被修改（因此它是下一次合并的候选者，并将成为 ClearCase 在所述合并期间列出的版本列表的一部分=
*   从那以后它已被删除（rmname'd，从其父目录中未引用）

这意味着它不再从源视图中可见。

有关更多信息，请参阅技术说明“ [Deliver or Rebase 报告元素被跳过，因为它们不可见](http://www-01.ibm.com/support/docview.wss?uid=swg21118911)”：

> 此消息表明`cleartool rmname`在涉及变基或交付操作的父目录的某个版本上执行了 a。

另请参阅“[关于处理不可见的元素](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.hlp.doc/cc_main/about_elements_not_visible.htm)”

# php - stristr 不适用于特定字母

> ID：10008348
> 
> 赞同：0
> 
> 时间：2012-04-04T09:23:02.473
> 
> 标签：php

有没有人需要查找包含 ā、ī ū š、ž 等字母的文本。我的问题是，stristr 认为，ā 和 Ā 不是同一个字母。strtolower 也不适用于这些字母——它将 Ā 保留为 Ā，而不是将其更改为 ā。我真的不想为所有 11 个特定字母写 11 str_replace，但到目前为止还没有找到更好的主意。而且我还没有测试它，但我认为，类似的问题将是其他语言特定的字母。你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:06:23.800

使用[mb_stristr](http://us.php.net/manual/en/function.mb-stristr.php)。这是同一方法的多字节版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:36:07.940

查看[mbstring](http://us.php.net/manual/en/book.mbstring.php)函数。

# java - 通过 Java 监控文件系统更改

> ID：10008351
> 
> 赞同：4
> 
> 时间：2012-04-04T09:23:09.387
> 
> 标签：java, filesystems, java-native-interface, jna

我想通过 java 监视系统上选定目录的更改。**我对 java 7 中的watchservice**有一点了解。但是 watchservice 只返回发生更改事件（修改、删除）的目录名称。*另一方面，我想要有关更改的所有信息，例如进行更改的用户、更改发生的时间等。*

这有点像想阅读 NTFS 文件系统上的更改日志。Java中是否有其他方法可以异步记录此类更改？...

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:30:51.530

如果您使用的是 java7，请查看[java.nio.file.FileSystem](http://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystem.html) 和[WatchService](http://docs.oracle.com/javase/7/docs/api/java/nio/file/WatchService.html)

有关更多信息，请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:27:09.730

不确定您是否有能力将导入库添加到您的项目中，但 commons-io 有一个 FileAlterationObserver 可能适合您的需求：

[http://commons.apache.org/io/api-release/org/apache/commons/io/monitor/FileAlterationObserver.html](http://commons.apache.org/io/api-release/org/apache/commons/io/monitor/FileAlterationObserver.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:03:52.143

如果您只想在发生某些事情时得到通知，您可以使用答案中发布的库之一。

如果您想自己使用一个小示例（并且仅限于 Windows），请查看[有关 Java Native Interface 的这篇文章](http://johannburkard.de/blog/programming/java/Call-native-methods-in-a-DLL-from-Java-without-JNI.html)。使用[ReadDirectoryChanges](http://msdn.microsoft.com/en-us/library/aa365465.aspx)函数，您可以决定接收异步通知。

如果你**真的**需要知道谁做了这些改变，那么......祝你好运！据我所知（仅适用于 Windows），这不是一个简单的主题，因为 Windows 不会保存该信息。您可以通过带有[对象审计](http://technet.microsoft.com/en-us/library/cc776489%28v=ws.10%29.aspx)的 JNI 获得它，但您必须启用它，它会稍微减慢您的系统速度。看看[这篇文章](http://blogs.msdn.com/b/ericfitz/archive/2006/03/07/545726.aspx)了解一些细节。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-12T17:31:19.087

您可能会发现[事件编程示例：Google Guava EventBus 和 Java 7 WatchService](http://codingjunkie.net/eventbus-watchservice/)很有用。我也在尝试进行异步文件监视，并且可能会使用它的一些衍生物。

或者，如果您愿意跳过对 WatchService 的直接管理，请[尝试使用 Camel 文件端点](http://camel.apache.org/file.html)。

# sql-server-2008 - 如何复制具有新名称的存储过程？

> ID：10008354
> 
> 赞同：2
> 
> 时间：2012-04-04T09:23:32.647
> 
> 标签：sql-server-2008, stored-procedures, copy

例如，我将 sp 命名为“myStoredProcedure”。我需要在同一台服务器上复制这个名为“myStoredProcedureNew”的存储过程。最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:43:57.723

一个重要的问题是，为什么要复制程序？

如果是因为你改变了逻辑并想测试它，那么你真的有一个相同程序的新版本。在这种情况下，最好的方法是从源代码管理中获取脚本，更改逻辑并对其进行测试。如果有效，您可以将代码提交到源代码管理，如果无效，您只需恢复到脚本的先前版本。

如果您想使用第一个存储过程作为起点或模板来创建第二个存储过程，那么您确实会有两个单独的过程。在这里，您应该从源代码管理中获取第一个过程，根据需要对其进行编辑以更改过程名称和逻辑，将其保存在单独的脚本文件中，并将第二个脚本添加到源代码管理中。因此，您将在源代码管理中拥有两个脚本，每个过程一个。

如果这不能回答您的问题，请提供更多信息，说明您需要复制该程序的原因。

**编辑：**您解释说您想为 100 个过程执行此操作，并且您希望在数据库中同时使用新旧过程（我假设是为了向后兼容）。听起来您想为同一事物使用两个不同的名称，在这种情况下，同义词可能很有用。

您可以使用引用旧过程的新名称快速创建同义词，因此您可以开始在代码中使用新名称。然后，当（如果？）您准备好物理删除旧程序时，您可以删除同义词并重命名程序。这是否是一个好的替代方案取决于您计划如何管理从旧过程名称到新过程名称的转换，以及您如何在源代码控制中管理 DDL。

如果同义词在您的情况下没有用，那么您始终可以按照我描述的第二个场景中的步骤进行操作。用一个小脚本应该很容易复制和编辑这 100 个文件，当然，只要您使用源代码管理，那么很容易撤消错误。

# tridion - DD4T 和关键字元数据

> ID：10008355
> 
> 赞同：2
> 
> 时间：2012-04-04T09:23:34.363
> 
> 标签：tridion

当前是否在 DD4T 创建的模型中公开了关键字元数据？

我可以看到可以通过 TaxonomyFactory/TaxonomyProvider 检索关键字类型 - 但这只会公开关键字本身的基本属性、Id、Title、ParentKeywords 等。

我们现在是否有自己的机制——扩展 ContentModel.cs 中的 DD4T 关键字并使用我们自己的提供程序？

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T12:09:37.673

关键字元数据当前不通过 DD4T 公开。老实说，这样做甚至没有多大用处。DD4T 的本质是将组件和页面反序列化为比 Tridion 内容代理提供的更有用的对象模型。对于关键字，您想知道的关于它们的所有信息都已经作为元数据存在于代理数据库中！

此外，由于关键字没有“输出”，因此无需反序列化。

代码示例（使用 Tridion.ContentDelivery.Taxonomies 命名空间）：

```
TaxonomyFactory tf = new TaxonomyFactory();
Keyword keyword = tf.GetTaxonomyKeyword("tcm:5-112233-1024");
Console.WriteLine(string.Format(
  "found keyword with name {0}, key {1}, description {2} and custom metadata {3}", 
  keyword.KeywordName, 
  keyword.KeywordKey, 
  keyword.KeywordDescription, 
  keyword.KeywordMeta)); 
```

# c# - 使用 C# 解析 csv 文件并在 HTML 文件中生成图形

> ID：10008359
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:24:01.433
> 
> 标签：c#

我想解析一个 csv 文件并在 html 文件中生成图表/图形。我曾为 Win Form Apps 使用过 Microsoft Charts，但我找到了一种将它们提取/导出为 HTML 文件的方法。任何人都可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:50:33.633

据我所知，Microsoft 图表不允许您将图表导出为 HTML。您可以将它们导出为图像（jpeg 或 gif），然后将其嵌入 HTML 页面中，但仅 HTML 标记无法表示图形生成的图像。

# php - 从php中的mysql同时获取数组中的列名和值

> ID：10008360
> 
> 赞同：0
> 
> 时间：2012-04-04T09:24:01.337
> 
> 标签：php, mysql, arrays

我正在寻找某种短代码，我不应该`column names`在数据库中重复，它应该直接插入相应的`column name`索引到`array value`. 下面我上传了图片以供理解。

![在此处输入图像描述](../Images/e0c310d52a4eec098dbcc9ed16b9a243.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:38:09.047

使用`mysql_fetch_assoc()`而不是`mysql_fetch_row()`，数组将是关联的（使用列名作为键）而不是数字。

```
$query = mysql_query("SELECT * FROM users_table WHERE User_ID = 1");

while ($r1 = mysql_fetch_assoc($query))
{
  echo $r1['User_ID'] . ': ' . $r1['First_Name'] . ' ' . $r1['Last_Name'] . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:30:15.980

检查这个：

```
$query = mysql_query( "SELECT * FROM users_table WHERE user_id=1;" );
$row = mysql_fetch_array( $query );
print_r( $row ); 
```

更多关于php.net 上的[mysql_fetch_array](http://php.net/manual/en/function.mysql-fetch-array.php)

# infragistics - Ultrawebgrid 中的下拉菜单在单击单元格后启用

> ID：10008361
> 
> 赞同：0
> 
> 时间：2012-04-04T09:24:02.507
> 
> 标签：infragistics, ultrawebgrid

我正在将代码隐藏中的数据绑定到 ultrawebgrid，并且数据也正常出现，但下拉列表的单元格将作为文本字段出现，除非我们单击它。单击下拉列表的单元格后，下拉列表将变得可见。我允许单元格编辑以及更新它，即使那时我正面临这个问题。请让我知道如何解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:03:19.743

创建一个下拉列表并将其设置为列编辑器组件。尝试早点定义它；

添加事件`yourgrid_AfterInitializeLayout(blah blah )`句柄`yourgrid.AfterInitializeLayout`

然后`editorComponent`在列级别设置；

`yourgrid.DisplayLayout.Bands(0).Columns("yourColumn").EditorComponent = (your dropdown here)`

您的网格应该以下拉列表的形式加载这些内容。另一个地方可能是当行是

活性。

# php - PHP array_key_exists 错误地返回 FALSE

> ID：10008366
> 
> 赞同：1
> 
> 时间：2012-04-04T09:24:19.137
> 
> 标签：php, array-key-exists

我的数据是从客户的 CMS 中提取的，但结果很奇怪

```
print_r($appliance_data);
foreach ($appliance_data as $adKey => $adValue) {
    print_r($adKey);
    print_r($adValue);
    print_r(array_key_exists($adKey, $appliance_data));
    print_r(isset($appliance_data[$adKey]));
} 
```

带输出

```
Array
(
    [94] => stdClass Object
        (
            [operation] => 0
            [value] => 0
        )

    [102] => stdClass Object
        (
            [operation] => 501
            [value] => 4
        )

    [90] => stdClass Object
        (
            [operation] => 0
            [value] => 0
        )
)
94
stdClass Object
(
    [operation] => 0
    [value] => 0
)
(boolean) FALSE
(boolean) FALSE
102
stdClass Object
(
    [operation] => 501
    [value] => 4
)
(boolean) FALSE
(boolean) FALSE
90
stdClass Object
(
    [operation] => 0
    [value] => 0
)
(boolean) FALSE
(boolean) FALSE 
```

知道是什么原因造成的吗？

编辑：错误是 array_key_exists AND isset**对于通过循环数组获得的键返回 FALSE ！**

```
serialize($appliance_data)

a:7:{s:2:"94";O:8:"stdClass":3:{s:9:"operation";s:3:"514";s:5:"value";s:1:"2";s:9:"frequency";s:1:"0";}s:3:"102";O:8:"stdClass":3:{s:9:"operation";s:3:"511";s:5:"value";s:1:"4";s:9:"frequency";s:1:"1";}s:2:"90";O:8:"stdClass":3:{s:9:"operation";s:1:"0";s:5:"value";s:1:"0";s:9:"frequency";s:1:"0";}s:2:"68";O:8:"stdClass":3:{s:9:"operation";s:3:"501";s:5:"value";s:1:"3";s:9:"frequency";s:1:"2";}s:2:"66";O:8:"stdClass":3:{s:9:"operation";s:1:"0";s:5:"value";s:1:"0";s:9:"frequency";s:1:"0";}s:2:"84";O:8:"stdClass":3:{s:9:"operation";s:1:"0";s:5:"value";s:1:"0";s:9:"frequency";s:1:"0";}s:2:"98";O:8:"stdClass":3:{s:9:"operation";s:1:"0";s:5:"value";s:1:"0";s:9:"frequency";s:1:"0";}} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T09:27:52.443

您使用的是字符串 '94' 而不是 int 94。尝试：

```
print_r(array_key_exists(94, $appliance_data)); 
```

**编辑：**我根本无法在本地重现这个 - 其他人可以吗？

我试图用以下代码复制它：

```
$first = new stdClass();
$first->operation = 0;
$first->value = 0;
$second = new stdClass();
$second->operation = 501;
$second->value = 4;
$third = new stdClass();
$third->operation = 0;
$third->value = 0;

$appliance_data = array(94 => $first, 102 => $second, 90 => $third);
// Same output when using these lines too:
// $appliance_data = array('94' => $first, '102' => $second, '90' => $third);
// $appliance_data = array("94" => $first, "102" => $second, "90" => $third);

print_r($appliance_data);
echo "\n\n";
foreach ($appliance_data as $adKey => $adValue) {
    print_r($adKey);
    echo "\n";
    print_r($adValue);
    print_r(array_key_exists($adKey, $appliance_data));
    echo "\n";
    print_r(isset($appliance_data[$adKey]));
    echo "\n\n";
} 
```

并得到了这个输出：

```
Array
(
    [94] => stdClass Object
        (
            [operation] => 0
            [value] => 0
        )

    [102] => stdClass Object
        (
            [operation] => 501
            [value] => 4
        )

    [90] => stdClass Object
        (
            [operation] => 0
            [value] => 0
        )

)

94
stdClass Object
(
    [operation] => 0
    [value] => 0
)
1
1

102
stdClass Object
(
    [operation] => 501
    [value] => 4
)
1
1

90
stdClass Object
(
    [operation] => 0
    [value] => 0
)
1
1 
```

# c - 我们可以对未命名的管道使用 poll 函数吗？

> ID：10008368
> 
> 赞同：8
> 
> 时间：2012-04-04T09:24:24.050
> 
> 标签：c, linux, pipe

我正在尝试编写一个程序，我需要在其中监视某些事件的未命名管道的末端。我可以使用带有轮询功能的未命名管道吗？

如果是，你能告诉我带有功能描述符的 poll 函数的语法吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:21:23.040

## 民意调查示例

用于`poll`检查是否`readfd`可读或`writefd`可写：

```
int readfd;
int writefd;

// initialize readfd & writefd, ...
// e.g. with: open(2), socket(2), pipe(2), dup(2) syscalls

struct pollfd fdtab[2];

memset (fdtab, 0, sizeof(fdtab)); // not necessary, but I am paranoid

// first slot for readfd polled for input
fdtab[0].fd = readfd;
fdtab[0].events = POLLIN;
fdtab[0].revents = 0;

// second slot with writefd polled for output
fdtab[1].fd = writefd;
fdtab[1].events = POLLOUT;
fdtab[1].revents = 0;

// do the poll(2) syscall with a 100 millisecond timeout
int retpoll = poll(fdtab, 2, 100);

if (retpoll > 0) {
   if (fdtab[0].revents & POLLIN) {
      /* read from readfd, 
         since you can read from it without being blocked */
   }
   if (fdtab[1].revents & POLLOUT) {
      /* write to writefd,
         since you can write to it without being blocked */
   }
}
else if (retpoll == 0) {
   /* the poll has timed out, nothing can be read or written */
}
else {
   /* the poll failed */
   perror("poll failed");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:29:06.090

您不需要名称即可使用该`poll(2)`界面；只需将文件描述符包含在传递给系统调用的数组中`struct pollfd`，就像任何其他套接字一样。

# c# - System.Reflection，如何获取字段和属性位置？

> ID：10008371
> 
> 赞同：0
> 
> 时间：2012-04-04T09:24:28.167
> 
> 标签：c#, reflection, position, propertyinfo, fieldinfo

问题：我使用下面的类将 csv 文件序列化为

> `List<MyCsvFileType>`

然后我 `List<MyCsvFileType>`使用转换为数据表

> 我的转换为

（下面也列出）。现在的问题是，MyConvertTo 改变了列的位置，这意味着所有属性都排在所有公共变量之后。

这导致的问题是，之后我使用 SqlBulkCopy 将 DataTable 复制到数据库表中。不幸的是，SqlBulkCopy 使用列的索引而不是列名来将数据表自动映射到数据库表。

这意味着我会收到很好的错误消息，因为它试图在浮动区域字段中插入字母数字 AP_FL_CADKey（因为我的数据库表与类具有相同的布局）......

有什么方法可以获取 MyConvertTo 中字段和属性的位置吗？所以我不必更改我的数据库表（很多）或编写我自己的 BulkCopy 实现，因为我也不想手动设置数据表和数据库表之间的映射？

在最坏的情况下，通过按字段偏移量排序应该是可能的......

班级：

```
[FileHelpers.IgnoreFirst]
[FileHelpers.IgnoreEmptyLines]
public class MyCsvFileType
{
    public string FL_CADKey;
    public string FL_DWG;
    public string FL_ObjID;

    public string FL_Area;

    public double FL_Area_double
    {
        get
        {
            if (string.IsNullOrEmpty(this.FL_Area))
                return 0.0;
            else
                return System.Convert.ToDouble(this.FL_Area);
        }

    } // End Property PP_Area_double

    public string AP_FL_CADKey;

    public System.Guid UID
    {

        get
        {
            return System.Guid.NewGuid();
        }

    } // End Property UID
} 
```

我的转换：

```
public static DataTable MyConvertTo(dynamic custs)
{
    DataTable dt = MyCreateTable(custs);

    System.Data.DataRow dr = null;
    foreach (dynamic cli in custs)
    {
        Console.WriteLine();

        Type t = cli.GetType();

        dr = dt.NewRow();

        foreach (System.Reflection.FieldInfo fi in t.GetFields())
        {
            dr[fi.Name] = fi.GetValue(cli);
        }

        foreach (System.Reflection.PropertyInfo pi in t.GetProperties())
        {
            dr[pi.Name] = pi.GetValue(cli, null);
        }

        dt.Rows.Add(dr);
    } // Next cli

    return dt;
}

public static DataTable MyCreateTable(dynamic custs)
    {
        DataTable table = new DataTable("Table_1");

        foreach (dynamic cli in custs)
        {
            Console.WriteLine();

            Type t = cli.GetType();

            foreach (System.Reflection.FieldInfo fi in t.GetFields())
            {
                table.Columns.Add(fi.Name, fi.FieldType);
                //Console.WriteLine(fi.Name + ": " + fi.GetValue(cli));
            }

            foreach (System.Reflection.PropertyInfo pi in t.GetProperties())
            {
                table.Columns.Add(pi.Name, pi.PropertyType);
                //Console.WriteLine(pi.Name + ": " + pi.GetValue(cli, null));
            }

            break;
        } // Next cli

        return table;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:33:35.133

你不能只[`ColumnMappings`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.columnmappings.aspx)在`SqlBulkCopy`实例中设置，添加基于列名的身份映射吗？

> 如果数据源和目标表的列数相同，并且数据源中每个源列的序号位置与相应目标列的序号位置匹配，则不需要**ColumnMappings**集合。但是，如果列数不同，或者序号位置不一致，则必须使用**ColumnMappings**确保将数据复制到正确的列中。

例如，当您添加每一列时，只需调用`.Add(ColumnName,ColumnName)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:27:30.103

**不保证**返回字段的顺序相同，尽管通常是定义的顺序。

我建议您使用 Linq 以一致的方式对返回的数组进行排序，然后使用您的转换。

# jms - 基于消息 ID 的接收 ActiveMQ

> ID：10008373
> 
> 赞同：0
> 
> 时间：2012-04-04T09:24:34.657
> 
> 标签：jms, activemq

我正在尝试将 JMS 消息选择器与 ActiveMQ 一起使用。我阅读了 Apache 网站上的文档。但是我无法在创建消费者时获得指定选择条件的位置。

例如：

```
MessageConsumer consumer=session.createConsumer(dest); 
```

要在此消费者上设置选择，我应该编写什么代码？如果任何人都可以提供一个片段或链接到解释这一点的教程，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T13:52:45.973

[`javax.jms.Session`](http://docs.oracle.com/javaee/5/api/javax/jms/Session.html)API 使这一点变得非常简单：

```
MessageConsumer consumer = session.createConsumer(dest, "message selector"); 
```

它只是变体下方的一行`session.createConsumer(dest)`。也许你太快厌倦了？

# java - 无法使用 Spring 进行 JUnit 测试

> ID：10008374
> 
> 赞同：15
> 
> 时间：2012-04-04T09:24:41.147
> 
> 标签：java, spring, junit4, spring-test

我的测试定义如下：

```
package com.mytest;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class SpringTestCase { 

    @Test
    public void testSave_success() {
        fail("Not implemented");
    }
} 
```

我的意图是运行这个测试并失败！

我测试的spring配置文件位于：

```
 /com/mytest/SpringTestCase-context.xml 
```

我的spring配置文件内容如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

</beans> 
```

当我运行测试时，出现以下异常：

```
java.lang.NoClassDefFoundError: org/springframework/core/AttributeAccessorSupport
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.springframework.test.context.TestContextManager.<init>(TestContextManager.java:117)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTestContextManager(SpringJUnit4ClassRunner.java:119)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<init>(SpringJUnit4ClassRunner.java:108)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.lang.ClassNotFoundException: org.springframework.core.AttributeAccessorSupport
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 36 more 
```

我正在使用具有以下春季版本集的 Maven：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.1.1.RELEASE</version>
    <scope>test</scope>
</dependency>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>4.10</version>
    <scope>test</scope>
</dependency> 
```

对于这方面的任何帮助，我将不胜感激。

编辑：

有人建议也添加 spring-core 依赖项。虽然我怀疑它是否会有所作为，但我确实添加了它，这就是异常的样子：

```
java.lang.NoClassDefFoundError: org/springframework/beans/BeanUtils
    at org.springframework.test.context.ContextLoaderUtils.resolveContextLoader(ContextLoaderUtils.java:87)
    at org.springframework.test.context.ContextLoaderUtils.buildMergedContextConfiguration(ContextLoaderUtils.java:298)
    at org.springframework.test.context.TestContext.<init>(TestContext.java:100)
    at org.springframework.test.context.TestContextManager.<init>(TestContextManager.java:117)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTestContextManager(SpringJUnit4ClassRunner.java:119)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.<init>(SpringJUnit4ClassRunner.java:108)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at org.junit.internal.builders.AnnotatedBuilder.buildRunner(AnnotatedBuilder.java:31)
    at org.junit.internal.builders.AnnotatedBuilder.runnerForClass(AnnotatedBuilder.java:24)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.builders.AllDefaultPossibilitiesBuilder.runnerForClass(AllDefaultPossibilitiesBuilder.java:29)
    at org.junit.runners.model.RunnerBuilder.safeRunnerForClass(RunnerBuilder.java:57)
    at org.junit.internal.requests.ClassRequest.getRunner(ClassRequest.java:24)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:51)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:123)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:104)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:164)
    at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:110)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:175)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcessWhenForked(SurefireStarter.java:107)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:68)
Caused by: java.lang.ClassNotFoundException: org.springframework.beans.BeanUtils
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    ... 28 more 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-04T09:41:19.377

那是你的整个pom吗？如果不是，您需要包含 spring-core，因为 spring-test 仅将其作为可选依赖项

```
<dependency>
  <groupId>org.springframework</groupId>
  <artifactId>spring-core</artifactId>
  <version>${project.version}</version>
  <optional>true</optional>
</dependency> 
```

在 Maven 的上下文中可选的含义是什么：

> 指示依赖项对于使用此库是可选的。如果在其他地方使用该库，则依赖关系的版本将被考虑到依赖关系计算中，但它不会被传递。

根据您最终测试的内容，您可能需要包含其他 spring 库。

我能够让您的测试运行，包括以下 Spring 依赖项以及 spring-test：

```
 <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-test</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.1.1.RELEASE</version>
        <scope>test</scope>
    </dependency> 
```

# visual-studio-2010 - Doxygen 与 Visual Studio 2010 的集成

> ID：10008376
> 
> 赞同：2
> 
> 时间：2012-04-04T09:24:50.153
> 
> 标签：visual-studio-2010, integration, doxygen

这里提到 doxygen 和 VS2010 时讨论的大部分问题都是在源代码中集中生成注释。我们已经构建了一些宏来自动获取这些宏。我的问题是针对另一个方向：

我已经看到，当光标在 DirectX 方法上时按 F1 键，Visual Studio 2010 会自动打开联机帮助。有谁知道将本地 doxygen 包含在此帮助中的方法？

在此先感谢埃尔莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T15:40:11.530

它不完全是您正在寻找的内容，但通常您可以创建帮助，然后尝试转换它。请参阅[VisualStudio F1 的附加 CHM？](https://stackoverflow.com/questions/14274032/additional-chm-for-visualstudio-f1)例如（它不是 chm 本身，但您可以尝试查看这些工具以找到方法）。另一种方法可能是使用类似[http://doxygenbrowseraddin.codeplex.com/](http://doxygenbrowseraddin.codeplex.com/)

# java - JavaFX 2 模态窗口

> ID：10008377
> 
> 赞同：3
> 
> 时间：2012-04-04T09:24:53.473
> 
> 标签：java, javafx-2

我正在尝试使用 JavaFX 2 创建一个登录窗口并停止执行，直到用户没有登录。我想要类似下面的东西：

```
showLoginDialog();
showMainWindow(); 
```

`showLoginDialog`负责创建新阶段并将其父级设置为主窗口。它将舞台设置为模态，我尝试了`WINDOW_MODAL`和`APPLICATION_MODAL`，但是一旦显示登录窗口，该`showMainWindow()`行也会被调用。

`close()`是否可以在调用登录阶段或类似的东西之前停止代码运行？是否有任何教程展示了如何实现这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-08T08:05:39.247

正如 Uluk 所说，存在 JIRA 问题。该问题已在 JavaFX 的 2.2 beta 版本中关闭并修复。如果需要停止程序的执行，只需使用以下代码：

```
modalWindowStage.showAndWait(); 
```

`modalWindowStage`用于显示消息框的舞台在哪里。如果需要继续执行，只需使用通常的“show()”方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:53:32.783

[此http://javafx-jira.kenai.com/browse/RT-19783](http://javafx-jira.kenai.com/browse/RT-19783)存在 Jira 问题。
在此之前，您可以调用`showMainWindow();`登录按钮的操作。

# android - 带有页眉和页脚的平铺背景

> ID：10008385
> 
> 赞同：0
> 
> 时间：2012-04-04T09:25:30.400
> 
> 标签：android, android-layout

我有一个带有页眉和页脚部分的平铺背景图形。像这样的东西：

![在此处输入图像描述](../Images/f8c860789cdcd21b073a65eb064f81b6.png)

如何将其用作 android 视图的背景？中间部分应该重复以填充屏幕高度（它不应该像 9-patch 那样拉伸）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:50:22.273

对于背景，您可以尝试：

将 tiled_bg.xml 放在 Drawable 文件夹中，

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

    <item>
<bitmap
            android:src="@drawable/tile_bg"
            android:tileMode="repeat" />
    </item>

</layer-list> 
```

这是我的 tile_bg.png

![tile_bg](../Images/859581a4460bab71f9920fc3ab475b29.png)

对于根布局，您可以使用带有 background=tiled_bg 的 RelativeLayout

牧羊人与`android:layout_alignParentTop="true"`

和fotter：`android:layout_alignParentBottom="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:33:37.020

如果我理解正确，您可能需要将图像转换为[九块](http://developer.android.com/guide/developing/tools/draw9patch.html)图形。

## 编辑：

1.  使用 a[`BitmapRegionDecoder`](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html#decodeRegion%28android.graphics.Rect,%20android.graphics.BitmapFactory.Options%29)获取要作为位图重复的区域。
2.  用. [`BitmapShader`](http://developer.android.com/reference/android/graphics/BitmapShader.html#BitmapShader%28android.graphics.Bitmap,%20android.graphics.Shader.TileMode,%20android.graphics.Shader.TileMode%29)_`TileMode.CLAMP, TileMode.REPEAT`
3.  创建一个 Paint 并[设置位图着色器](http://developer.android.com/reference/android/graphics/Paint.html#setShader%28android.graphics.Shader%29)。
4.  使用 绘制位图`canvas.drawRect()`。
5.  分别绘制页眉和页脚。

# facebook - 分享按钮获取错误的网址

> ID：10008394
> 
> 赞同：0
> 
> 时间：2012-04-04T09:26:24.520
> 
> 标签：facebook, url, share

分享按钮开启

[http://www.wrappz.com/createyourown/devices](http://www.wrappz.com/createyourown/devices)

*   单击时 - 它还显示[http://usa.wrappz.com](http://usa.wrappz.com)以及来自[http://usa.wrappz.com](http://usa.wrappz.com)的内容。

我已经使用 facebook 调试工具检查了 url，但结果相同。即使页面已更改并且整个页面源中没有 usa.wrappz.com （删除该页面上的下拉菜单 - 这是它唯一有单词 usa.wrappz.com 的地方） - 它仍然显示来自美国的内容。 wrappz.com。

任何人都可以帮我解决这个问题，因为 facebook 分享按钮似乎无法正常工作。

非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:37:27.890

facebook 分享按钮（或分享网址）已弃用，您可以在文档中阅读：

> Share 按钮已被弃用，取而代之的是 Like 按钮，并且将不再受支持。请尽可能使用“赞”按钮为您的应用带来最大流量。

（参考：http: [//developers.facebook.com/docs/share/](http://developers.facebook.com/docs/share/)）

> **旧的“分享”按钮怎么了？**
> 
> 当我们启动“赞”按钮时，我们弃用了“分享”按钮，因为“赞”按钮允许用户一键连接，并允许他们查看他们的哪些朋友已经连接，从而提高了点击率。

（参考：http: [//developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)）

您也许可以在这里找到问题所在，但正确的做法是完全停止使用它。

# html - 如何强制两个元素始终保持在同一行

> ID：10008395
> 
> 赞同：42
> 
> 时间：2012-04-04T09:26:27.467
> 
> 标签：html, css

代码非常简单：

```
<table id="tabel_user" style="width: 100%; border: 0; background-color: white;" cellpadding="0" cellspacing="0">
<tr>
    <td style="border: 0; padding: 0; padding-left: 5px;">
        <label for="abcd"><input class="check_useri" id="abcd" name="abcd" type="checkbox" /> abcd </label>
    </td>
</tr>
</table> 
```

它们整齐地保持在同一行，除非标签中的文本变得非常长并且表格需要拉伸以适应它，然后文本有时会被强制低于复选框。我怎样才能阻止它这样做？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-04-04T09:27:42.837

您可以使用 CSS 属性强制内联元素保持在同一行[`white-space`](http://www.w3.org/TR/CSS2/text.html#white-space-prop)：

```
<td style="white-space:nowrap;">
  this content will not be wrapped
</td> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-22T18:05:58.007

此代码工作正常，并且响应迅速：

```
table {
width:100%;
display: inline-block;
}
td, th {
max-width:100%
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:31:08.767

定义 a`white-space`可能是完成它的方法之一，但作为表格数据，如果您修复标签的最大宽度尺寸而不是更好

```
label { width: 100px; display: inline-block; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-02T11:13:47.993

你可以使用这个：`<tr valign="top">` 这将使垂直对齐在顶部。

# php - 使用 PHP 和 Python 的客户端服务器应用程序

> ID：10008396
> 
> 赞同：2
> 
> 时间：2012-04-04T09:26:28.873
> 
> 标签：php, python, client

我正在尝试将数据从 PHP 客户端发送到 Python 服务器。

**客户**

```
<?php

$host = "127.0.0.1";
$port = 2000;

$output="datatatatatatta" ;

$socket1 = socket_create(AF_INET, SOCK_STREAM,0) or die("Could not create socket\n");

socket_connect ($socket1 , $host,$port ) ;

socket_write($socket1, $output, strlen ($output)) or die("Could not write output\n");

socket_close($socket1) ;

?> 
```

**服务器**

```
import socket
import sys
s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)

host= 'VAC01.VACLab.com'
port=int(2000)
s.bind((host,port))
s.listen(1)

conn,addr =s.accept()

print (conn,addr)

data=conn.recv(100000)
data=data.decode("utf-8")

s.close

FILE = open("c:/vinod/vin.txt","w")
FILE.write(str(data))
FILE.close() 
```

在客户端，我收到以下错误，。

```
Warning: socket_connect() [function.socket-connect]: unable to connect [0]: No connection could be made because the target machine actively refused it. in C:\xampp\htdocs\xampp\socket.php on line 10

Warning: socket_write() [function.socket-write]: unable to write to socket [0]: A request to send or receive data was disallowed because the socket is not connected and (when sending on a datagram socket using a sendto call) no address was supplied. in C:\xampp\htdocs\xampp\socket.php on line 12
Could not write output 
```

可以这样连接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:27:37.313

您绑定到一个很可能**无法**解析`127.0.0.1`但连接到的主机`127.0.0.1`。那是行不通的。你有两个选择：

1.  在两边使用`127.0.0.1`（或）`localhost`
2.  `VAC01.VACLab.com`两边都使用主机名

# c# - 通过 SSL 连接到 SQL Server 并获取服务器证书

> ID：10008397
> 
> 赞同：4
> 
> 时间：2012-04-04T09:26:31.947
> 
> 标签：c#, sql-server, ssl

我想在端口 1433 上连接到为 SSL 配置的 SQL Server 并获取其证书。我不需要执行任何 SQL，我只想设置 SSL 连接并获取 SQL Server 的证书。

以下代码可以获取 Web 服务器证书，但无法获取 SQL Server 证书 - 超时时间后连接失败。

```
using (client = new TcpClient())
{
    client.Connect(Hostname, Port);
    var callback = new RemoteCertificateValidationCallback(ValidateServerCertificate);

    using (stream = new SslStream(client.GetStream(), false, callback))
    {
        stream.AuthenticateAsClient(Hostname);
    }
} 
```

SQL Server 客户端是否必须使用一些初始协商来让服务器切换到 SSL？换句话说，SQL Server 是否执行类似于 STARTTLS 与 SMTP 一起工作的方式？

我必须对上述代码做什么才能让 SQL Server 返回其证书？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-01T18:53:30.560

要快速检查您的 SQL Server 上是否配置了 SSL，您可以运行以下命令：

从 sys.dm_exec_connections 中选择 session_id、encrypt_option

您还可以为 SQL Server 强制加密标志。您可以在 SQL Server 配置管理器中执行此操作

祝你好运，让我知道这是否有帮助。

# asp.net-mvc-3 - Mvc3在紧密绑定的下拉框中添加用户角色

> ID：10008399
> 
> 赞同：0
> 
> 时间：2012-04-04T09:26:38.400
> 
> 标签：asp.net-mvc-3

我有一个紧密绑定到寄存器视图的寄存器模型。寄存器模型有一个 selectlistitem 属性。我无法用选择列表项填充下拉框。

```
var users = Roles.GetAllRoles();

model.UserRoles = users.Select(m => new SelectListItem()
{Value = m.ToString(),Text = m.ToString()})

@Html.DropDownListFor(r=>r.ToString(),Model.UserRoles,"Select Role") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:40:49.610

您需要将所选值绑定到模型的属性，如下所示：

（在您的模型中）：

```
public string ActiveRole { get; set; } 
```

...

（在您看来）：

```
@Html.DropDownListFor(m => m.ActiveRole, Model.UserRoles,"Select Role") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:53:56.113

该`DropDownListFor`方法的第一个参数是保存列表值的属性。如果列表中的值将是角色的 id，则必须具有参数`x => x.RoleId`where`x`是您的模型并且`RoleId`是模型中的属性。您正在将下拉列表绑定到视图模型的字符串表示形式，其结果是垃圾。

第二个参数是一个`IEnumerable<SelectListItem>`保存列表选项的参数。此对象具有以下值：`Value`是发送回服务器的值，这应该是标识角色的内容，通常是角色的 id。`Text`是显示在列表中的文本，它是用户看到的。`Selected`是一个布尔值，指示选择了列表中的哪个项目。如果在所有`SelectListItem`s 中都为 false，则选择顶部的，这是标准的 HTML 行为。

在您的情况下，您将`SelectListItem`s 放在模型中，这是不必要的步骤，但应该可以。模型绑定器不会理解第一个参数，所以你需要修复那个。

# asp.net - Asp.Net 中的 JSON.Serialize 错误

> ID：10008400
> 
> 赞同：0
> 
> 时间：2012-04-04T09:26:41.900
> 
> 标签：asp.net, extjs

我正在使用 JSON。当我当时传递数据进行序列化时，我收到下面给出的错误。

**'不能通过实例引用访问；而是用类型名称来限定它'。并抛出了“System.OutOfMemoryException”类型的异常。**

我的代码是

```
List<UserMaster> us = objusers.SelectAll().ToList();
Paging<UserMaster> users = UserMaster.SelectUserFilter(start, limit, query,ref us);
context.Response.Write(string.Format("{{total:{1},'users':{0}}}", JSON.Serialize(users.Data), users.TotalRecords)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:37:43.930

许多 JSON 序列化器不是很健壮，不能处理所有情况。

如果您的 JSON 格式正确，那么 JSON.NET（免费）库肯定可以处理它。[在http://james.newtonking.com/pages/json-net.aspx](http://james.newtonking.com/pages/json-net.aspx)查看。

祝你好运！

# netty - Netty ChannelFuture.operationComplete() 没有在 IOException 上被调用

> ID：10008402
> 
> 赞同：0
> 
> 时间：2012-04-04T09:26:50.713
> 
> 标签：netty

我正在测试连接失败期间的客户端服务器处理。

在客户端，当我从客户端向服务器发送消息时拔下 LAN 电缆时，我的 ChannelFuture（如下）没有被调用。我所期望的是异常会被我的 ChannelFuture 捕获，因此我可以在 operationComplete 中处理它。

相反，它只会被客户端管道中的最后一个上游处理程序捕获。难道我做错了什么？或者这可能是 Netty 3.2.4 的问题？

当我拔下 LAN 电缆时，我在处理程序中遇到的异常：

```
 java.io.IOException: An existing connection was forcibly closed by the remote host
        at sun.nio.ch.SocketDispatcher.read0(Native Method)
        at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:25)
        at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:198)
        at sun.nio.ch.IOUtil.read(IOUtil.java:166)
        at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:243)
        at org.jboss.netty.channel.socket.nio.NioWorker.read(NioWorker.java:321)
        at org.jboss.netty.channel.socket.nio.NioWorker.processSelectedKeys(NioWorker.java:280)
        at org.jboss.netty.channel.socket.nio.NioWorker.run(NioWorker.java:200)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

我的频道未来：

```
 ChannelFuture future = Channels.write(channel, message);
    future.addListener(new ChannelFutureListener() {

           @Override
           public void operationComplete(ChannelFuture future) throws Exception {
               if (!future.isSuccess()) {
                   LOG.error("Client failed to send message", future.getCause());
                   future.getChannel().close();
               }
           }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:35:16.300

从堆栈看来，写入已成功完成。尝试从通道读取时抛出异常。如果您对这种异常感兴趣，您将需要实现自己的 SimpleChannelUpstreamHandler 并覆盖 exceptionCaught(..) 方法。

请务必将处理程序添加到 ChannelPipeline。

# awk - AWK - 使用 getline 将变量传输到系统（）？

> ID：10008407
> 
> 赞同：7
> 
> 时间：2012-04-04T09:27:23.970
> 
> 标签：awk, getline

我有一个理论问题：

1）getline()的系统如何传递一个变量？

```
awk 'BEGIN{var="ls"; var | getline var; system("echo $var")}' 
```

2）如何为输出系统（“ls”）分配一个变量并在awk中打​​印结果？

```
awk 'BEGIN{var="system("ls")"; print '$var'}' 
```

3）你可以在系统中分配一个变量（var =“ls”）并在awk中打​​印结果吗？

```
awk 'BEGIN{system(var="ls"); print "'"$var"'"}' 
```

感谢您的信息。

**编辑：**

**torek**：谢谢你的回复。

我知道在第一个示例中，您可以这样做：

```
awk 'BEGIN { while ("ls -l" | getline var) system("echo " var  );}' 
```

对于此应用程序，您不能从 system() 分配变量输出吗？如本例所示：

```
awk 'BEGIN {var="ls -l"; system(var); print var}' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T09:49:11.657

我想你看错了。awk`system`只接受任何旧字符串，所以给它一个，例如：

```
system("echo " var);  # see side note below 
```

（请记住，在 awk 中，字符串是通过邻接连接的）。此外，`system`只需运行一个命令；要捕获其输出，您需要使用`getline`，类似于您的问题 #1。

如果要读取所有输出，则`ls`需要循环遍历结果`getline`：

```
awk 'BEGIN { while ("ls" | getline var) print "I got: " var; }' 
```

由于这仅定义了一个`BEGIN`动作，`awk`因此将启动、运行`ls`、收集每个输出行并打印它，然后退出。

* * *

旁注：对传递给 shell 的变量要非常小心（这包括调用`system`和左侧的项目`| getline`，以及现代变体中的一些其他情况——`awk`任何运行命令的东西）。反引号、`$(command)`和分号都可以允许用户调用任意命令。例如，在上面的`system("echo " var)`示例中，如果`var`包含`; rm -rf $HOME`命令变为`echo ; rm -rf $HOME`，这几乎肯定不是您想要发生的事情。

您可以检查“坏”字符和任一对象，或引用它们。现代 8 位干净的 shell 应该只需要引用引号本身（为了句法有效性），`$`, `<`, `>`, `|`, 和```. 如果您使用单引号来引用参数（使它们显示为单个“单词”），您只需转义单引号。有关更多详细信息，请参阅[此 unix.stackexchange.com 答案](https://unix.stackexchange.com/a/64218)。

* * *

另一个旁注：我倾向于在我的 awk 脚本中添加“不必要的”分号，使它们在语法上看起来更像 C。几十年前的旧习惯。

# testing - 测试多个用户角色

> ID：10008411
> 
> 赞同：1
> 
> 时间：2012-04-04T09:27:32.180
> 
> 标签：testing, testcase, user-roles, microsoft-test-manager

我的问题可能听起来有点愚蠢。

我的团队必须测试由 3 个不同的 Web 应用程序使用的 Web 应用程序`User Roles`。因此，我们首先根据用户故事编写测试用例。我的问题是我不想为每个用户角色创建 3 个不同的测试用例。我认为在编写测试用例并稍后对其进行测试时，这需要大量时间，因为：

`Total Test Cases Number = User Stories x Test Cases Per User Story x User Roles Number`.

此外，如果将来某个时间会创建新的用户角色，我不想创建新的测试用例，因为它们只是重复的，有一些小的差异。

有没有更好的方法来处理这种情况？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:33:19.620

[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)?

单独编写代码并测试用户对用户故事的访问权限，除非您确实确实根据您的角色获得了完全不同的故事，在这种情况下，它是一个独特的规范并保证其自己的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:00:40.950

不确定在编码方面（取决于情况和代码是如何实现的），但我可以从测试的角度回答（到目前为止，2 年，超过一半的传统瀑布系统迁移到敏捷）。

我测试的 Web 应用程序类似，因为我们有三种用户类型（全局）和三种用户角色（与“项目”相关联，即站点桶，站点作为图像桶，如果好奇，请查找 EyeQ）。因此，9 个可能的组合，其中 8 个可以创建一个站点。当前的回归程序文档有超过 100 个测试用例，其中 20 个左右是编辑/创建/删除站点。总体总计：500 多个测试用例大部分是手动运行的（正在努力使它们自动化，但需要时间，因为我们已经通过 UI 重新启动）。

无论如何，由于 UI 的全面更改，我不得不重写我们的一些手动程序，并试图避免在我之前犯下的作者所犯的错误，例如你所描述的错误（过度重复，也就是重复使用相同的测试 3 次，略有变化）。

我没有坚持他们编写用例的策略，而是使用循环（编码中也适用相同的术语）——也就是说，每次通过使用一个角色类型组合的测试用例。与其为每个角色/类型编写相同的测试用例 3 次以上并分别执行每个测试用例，不如使用该过程一次，但在最后添加几个步骤。

示例测试用例：用户可以创建一个站点（8/9 的类型角色组合可以在我的应用程序中执行此操作）

在我进来之前他们做了什么：测试用例 1- 未绑定到项目的系统管理员可以创建站点（10 个步骤）；测试用例 2- 具有项目角色的系统管理员可以创建站点（相同的 10 个步骤）；测试用例 3- 未绑定到项目的帐户管理员可以创建站点（与第一个案例相同的 10 个步骤）；测试用例 4- 具有 proj 角色的帐户管理员可以创建站点（同上）；测试用例 5... 等等

我做什么：测试用例 1：使用组合 1 以用户身份执行 10 步，第 11 步 - 以该组合注销，使用组合 2 以用户身份登录并重复 1-10，第 12 步 - 以用户身份从第 11 步退出以用户身份使用组合 3 并重复 1-10，...

区别：3+ 测试用例或 30+ 步骤执行（在这种情况下，大约 100）vs 1 测试用例：20 步以下

不过，请谨慎对待，这取决于您的问题类型。如果它确实是重复的（如示例），请尝试尽可能多地循环。

优点是，当您建立一个自动测试框架时，测试用例中的一个简单的 for 循环会使用数组对象或结构作为输入。缺点是，它不会是模块化的（如果出现问题，需要额外的 30 秒才能找到问题原因，但这是我的观点）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-27T14:12:42.657

无需混淆。您只需要制作 Matrix 以获得访问权限 Vs。用户角色。例如： - 原始：用户模块（用户的权利）列：用户角色

只需在 Excel 表中标记哪个用户具有什么类型的权限或访问权限。您还可以下载一些能够生成此类排列和组合的工具。

你可以从这里下载。

[https://testcasegenerator.codeplex.com/](https://testcasegenerator.codeplex.com/)

[下载测试用例生成器](https://testcasegenerator.codeplex.com/)

是准确测量排列组合的好工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-11T06:45:14.343

我们已经为一个大型企业应用程序测试了这些基于角色的测试用例，该应用程序使用思维导图在超过 15-20 个网页上具有近 38 个角色和 100 个可编辑或不可编辑的字段。

由于每个角色都有很多工作流状态，因此需要进行彻底的测试。

添加一个涵盖功能和权限的通用测试用例，并在测试说明中提及，以按照设计的思维导图为每个角色执行测试用例。将思维导图附加到测试用例。

我们将测试用例转换为思维导图： [示例思维导图](https://i.stack.imgur.com/ZWX8h.png)

思维导图有助于将大量数据整合成图形形式，便于理解测试用例并加快执行速度。

# eclipse - Glassfish 3.1 - 找不到 javadb 客户端

> ID：10008417
> 
> 赞同：0
> 
> 时间：2012-04-04T09:28:01.113
> 
> 标签：eclipse, glassfish-3, derby

在 eclipise 中，如何在启动这样的 se 应用程序时消除该警告消息

```
....
Properties p = new Properties();
p.setProperty("java.naming.factory.initial", "com.sun.enterprise.naming.SerialInitContextFactory");
p.setProperty("java.naming.provider.url", "localhost:3700");
Context context = new InitialContext(p);
.... 
```

：

```
04-avr.-2012 11:23:39 com.sun.enterprise.v3.server.CommonClassLoaderServiceImpl findDerbyClient
INFO: Cannot find javadb client jar file, derby jdbc driver will not be available by default. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:22:46.380

“javadb 客户端 jar 文件”名为“derbyclient.jar”，您应该在 javadb 安装中找到它，或者您可以从[http://db.apache.org/derby获取它](http://db.apache.org/derby)

# hibernate - JPQL 中的 Derby 布尔/整数转换

> ID：10008422
> 
> 赞同：0
> 
> 时间：2012-04-04T09:28:46.030
> 
> 标签：hibernate, derby, jpql, javadb

我得到的错误：

```
ERROR 42821: Columns of type 'BOOLEAN' cannot hold values of type 'INTEGER'. 
```

对于 JPQL 查询：

```
SELECT b.id FROM Bar b WHERE b.latest = true 
```

显然是因为 Hibernate 将布尔字段（即“最新”）映射到 JavaDB/Derby 的整数列。但这仅在 JPQL 中访问该列时发生。使用 Criteria API 时的结果相同。

Hibernate 已设置为**org.hibernate.dialect.DerbyDialect**和驱动程序**org.apache.derby.jdbc.EmbeddedDriver**。

其他版本的 JDBC 驱动程序的结果相同。

据推测，解决方法是将列映射到包含“Y”和“N”的单个字符。但我宁愿做得好。

有没有人也遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T11:06:29.963

将 true 作为查询参数传递

```
SELECT b.id FROM Bar b WHERE b.latest = :latest 
```

肯定会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T14:20:02.460

也许您的 Hibernate DerbyDialect 与您的 Derby 版本不完全匹配。Derby 对 BOOLEAN 数据类型的处理改变了几个版本，我认为您必须确保客户端使用与 BOOLEAN 数据类型匹配的正确 JDBC API。较旧的 Derby 版本仅支持 INTEGER，不支持 BOOLEAN。

在您的问题中提供更多详细信息将非常有价值。请注意所涉及的所有软件包的精确版本，包括发生的错误消息的完整堆栈跟踪，并发布程序中出现错误的确切位置的源代码片段。

# python - 我的服务器端 GUI 在哪里？！（使用 pyqt）我应该使用线程吗？

> ID：10008424
> 
> 赞同：0
> 
> 时间：2012-04-04T09:29:00.757
> 
> 标签：python, pyqt

我想使用python套接字编程和PyQt创建一个简单的服务器/客户端应用程序。客户端可以将文件发送到服务器端。它工作。但我看不到我的服务器端GUI！

在接受 Dikei 的建议后，我通过创建一个新线程来处理套接字部分来更改我的服务器端代码。

这是我的服务器端代码：

```
#! /usr/bin/python
import sys
import socket
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtNetwork import *

HOST = '127.0.0.1'
PORT = 9996
SIZEOF_UINT32 = 4

class Form(QDialog):

    def __init__(self, parent=None):
        super(Form, self).__init__(parent)
        self.worker = Worker()
        self.connect(self.worker, SIGNAL("received"), self.updateUi)
        self.connect(self.worker, SIGNAL("finished()"), self.updateUi)
        self.connect(self.worker, SIGNAL("terminated()"), self.updateUi)
        # Create widgets/layout
        self.browser = QTextBrowser()
        self.selectButton = QPushButton('Close server')
        layout = QVBoxLayout()
        layout.addWidget(self.browser)
        layout.addWidget(self.selectButton)
        self.setLayout(layout)
        self.setWindowTitle("Server")

    def updateUi(self, text):
        self.browser.append(text)

class Worker(QThread):

    def __init__(self,parent = None):
        super(Worker, self).__init__(parent) 
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

    def receiveFile(self):
        self.conn, self.addr = self.socket.accept()
        totalData = ''
        while 1:
            data = self.conn.recv(1024)
            if not data: break
            totalData += data
        print totalData
        f = open('/home/jacos/downfrom','w')
        f.write(totalData) 
        f.close()
        self.emit(SIGNAL("received"),"received a file")
        self.conn.close()

    def run(self):
        self.socket.bind((HOST, PORT))
        self.socket.listen(5)
        while 1:
            self.receiveFile() 

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

这是我的客户端代码：

```
#! /usr/bin/python
# -*- coding: utf8 -*-
import sys
import socket
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyQt4.QtNetwork import *

HOST = '127.0.0.1'
PORT = 9996
SIZEOF_UINT32 = 4

class Form(QDialog):

    def __init__(self, parent=None):
        super(Form, self).__init__(parent)

        # Create widgets/layout
        self.browser = QTextBrowser()
        self.selectButton = QPushButton('Send a File')
        self.connectButton = QPushButton("Connect")
        self.connectButton.setEnabled(True)
        layout = QVBoxLayout()
        layout.addWidget(self.browser)
        layout.addWidget(self.selectButton)
        layout.addWidget(self.connectButton)
        self.setLayout(layout)

        # Signals and slots for line edit and connect button
        self.selectButton.clicked.connect(self.sendFile)
        self.connectButton.clicked.connect(self.connectToServer)

        self.setWindowTitle("Client")

    # Update GUI
    def updateUi(self, text):
        self.browser.append(text)

    def sendFile(self):
        filename=QFileDialog.getOpenFileName(self, 'Open File', '.')
        self.socket.sendall(open(filename,'rb').read())
        self.updateUi("Sent a file:" + filename)
        self.socket.close()
        self.connectButton.setEnabled(True)

    def connectToServer(self):
        self.socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        self.socket.connect((HOST, PORT))
        self.connectButton.setEnabled(False)
        self.updateUi("Connected")

app = QApplication(sys.argv)
form = Form()
form.show()
app.exec_() 
```

问题是：

1.  我的服务器端 GUI 根本没有出现！我不明白为什么。我应该使用线程吗？
2.  此外，服务器仅将文件以固定名称存储在固定位置。有什么方法可以指定服务器端的位置并从客户端获取原始文件名？

***编辑***：现在＃1已解决，但线程发出的信号似乎根本没有被捕获，服务器的浏览器根本没有更新。

＃2仍未解决。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:49:17.430

您的程序陷入无限循环

```
while 1:
    self.receiveFile() 
```

`form.show()`永远达不到。您可能应该在不同的线程中执行所有操作并将信号发送回运行 GUI 的主线程。

对于第二个问题，您可以在发送数据之前先发送文件名。当服务器接收到文件名时，工作线程会发出一个信号。这个信号会触发主线程弹出一个 QFileDialog 让你选择一个文件夹。选择文件夹后，主线程会向工作线程发送一个带有文件夹路径的信号，工作线程可以保存文件。

# search - Liferay，搜索和安全模型

> ID：10008427
> 
> 赞同：4
> 
> 时间：2012-04-04T09:29:06.997
> 
> 标签：search, solr, lucene, liferay, liferay-6

有没有人有过在 Liferay 上实现需要（中等复杂）安全模型的搜索的经验？您如何处理并非所有从搜索引擎返回的结果都有权查看内容的事实？Liferay 中的内置搜索功能是否已经做到了这一点？如果是，如何？

因为在返回后过滤潜在的数千个结果可能非常昂贵。如果您没有通过过滤器传递所有结果，您将不知道您的搜索获得了多少总结果（点击）作为登录用户，您可以“查看”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:06:13.197

我认为它首先从 lucene 搜索，然后检查用户是否具有查看权限。如果您有权访问源代码，请查看 BaseIndexer.search。我在下面附上了小片段，向您展示它是如何做到的？

```
PermissionChecker permissionChecker =
                PermissionThreadLocal.getPermissionChecker();

int start = searchContext.getStart();
int end = searchContext.getEnd();

if (isFilterSearch() && (permissionChecker != null)) {
    searchContext.setStart(0);
    searchContext.setEnd(end + INDEX_FILTER_SEARCH_LIMIT);
}

Hits hits = SearchEngineUtil.search(searchContext, fullQuery);

searchContext.setStart(start);
searchContext.setEnd(end);

if (isFilterSearch() && (permissionChecker != null)) {
    hits = filterSearch(hits, permissionChecker, searchContext);
} 
```

# c# - 从 ANTLR 语法创建多维数组

> ID：10008428
> 
> 赞同：2
> 
> 时间：2012-04-04T09:29:15.557
> 
> 标签：c#, antlr, interpreter

我正在使用 C# 编写一个 PLC 语言解释器。我的解释器有自己的类型层次结构：元素类型（整数、布尔值、..）和派生类型（结构、数组、...）。从我的 ANTLR 语法创建多维数组时遇到问题。

这是我的语言声明多维数组（3x2 int 数组）的方式：

```
TYPE 
    MY_ARRAY : ARRAY [0..2, 1..2] OF INT; 
END_TYPE 
```

接下来是我用于解析一维数组声明的 antlr 语法：

```
decl_derivated
    : 'TYPE' NEWLINE* ID ':' NEWLINE* type_decl ';' NEWLINE* 'END_TYPE' NEWLINE* -> ^(TYPEDEF<TypeDefinition>[$ID.text, $type_decl.type])
    ;

type_decl returns [Type type]
    : 'STRUCT' NEWLINE* decl_fields 'END_STRUCT' { $type = new STRUCT($decl_fields.fieldList); }
    | 'ARRAY' '[' range ']' 'OF' type_var { $type = new ARRAY($type_var.type, $range.init, $range.end); }   
    ;

range returns [int init, int end]
    : ini=CTE_INT '..' en=CTE_INT { $init = int.Parse($ini.text); $end = int.Parse($en.text); }
    ;

type_var returns [Type type]
    : 'BOOL'  { $type = new BOOL(); }
    | 'INT'   { $type = new INT(); }
    | 'REAL'  { $type = new REAL(); }
    ;

/* lexer */

ID  :   (LETTER | '_') (LETTER | DIGIT | '_')*
    ;

fragment
DIGIT : '0'..'9'
      ;

fragment
INTEGER : DIGIT ('_'|DIGIT)*
    ;

fragment
EXPONENT : ('e'|'E') ('+'|'-')? INTEGER ;

fragment
CTE_INT
    : ('+'|'-'| ) INTEGER
    ;

fragment
CTE_REAL
    : ('+'|'-'| /*vacio*/ ) INTEGER '.' INTEGER EXPONENT?
    ;

RANGE   : '..' ;

RANGE_OR_INT 
    : ( CTE_INT RANGE ) => CTE_INT  { $type=CTE_INT; }
        | ( CTE_REAL )  => CTE_REAL     { $type=CTE_REAL; }
        | CTE_INT                   { $type=CTE_INT; }
    ;

NEWLINE : '\r'? '\n'
    | '\r'
    ; 
```

我可以解析多维数组，将数组声明中的语法更改为：

```
type_decl returns [Type type]
        : 'ARRAY' '[' range (',' range)* ']' 'OF' type_var 
```

我不知道如何为这个多维数组编写我的构造函数。任何人都可以帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:05:22.247

**解决方案**

最后，我实现了一个更好、更优雅的解决方案。我向我的 ARRAY 数据类型类添加了两种新方法：一种用于添加新维度，另一种用于设置基本类型。

```
public class ARRAY : ANY_DERIVED
    {
        public Type de; // ARRAY type
        public int size;
        public int initIndex;
        public int finalIndex;

    public ARRAY(int initIndex, int finalIndex)
    {   
        this.initIndex = initIndex;
        this.finalIndex = finalIndex;
        size = finalIndex - initIndex + 1;
    }

    public void NewDim(int initIndex, int finalIndex)
    {
        if (de == null)
            de = new ARRAY(initIndex, finalIndex);
        else
            ((ARRAY)de).NewDim(initIndex, finalIndex);
    }

    public void SetBaseType(Type t)
    {
        if (de == null)
            de = t;
        else
            ((ARRAY)de).SetBaseType(t);
    }
   } 
```

ANTLR 语法：

```
decl_type returns [Type type]
    : 'ARRAY' '[' r1=range {$type = new ARRAY($r1.init, $r1.end);} (',' r2=range {((ARRAY)$type).NewDim($r2.init, $r2.end);})* ']' 'OF' type_var { ((ARRAY)$type).SetBaseType($type_var.type); }    
    ; 
```

无论如何，谢谢你的时间；）

# ruby - 按需安装 gem

> ID：10008430
> 
> 赞同：7
> 
> 时间：2012-04-04T09:29:22.117
> 
> 标签：ruby, rubygems, gem

我想在客户端安装一个 gem (JSON)，但前提是尚未安装（一些 1.9 Ruby 发行版捆绑了 JSON）。

我找不到有关如何从`gem help install`. `gem install json`在安装了 Ruby 1.9（捆绑了 JSON）的 Windows 系统上运行会导致

```
 ERROR:  Error installing json:
    The 'json' native gem requires installed build tools. 
```

- 它试图安装它，*而忽略*了 gem 已经存在的事实。

而且我不能做像 grepping`gem list`输出这样的 bash 技巧，因为客户端可能是 Windows。

那么只有当系统中不存在gem时才安装gem的多平台方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:31:03.483

This may work...

```
begin
  require "json"
rescue LoadError
  system("gem install json")
end 
```

If you don't want to require "json", you can remove it from $LOAD_PATH.

Or, put as a one liner:

```
ruby -e 'begin; require "some_gem"; rescue LoadError; system "gem install some_gem"; end' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T05:34:19.833

询问是否安装了 gem：

```
gem list --installed "^json$" 
```

如果需要，要安装 gem：

```
ruby -e '`gem list -i \"^json$\"`.chomp=="true" or `gem install json`' 
```

制作命令行脚本：

```
#!/usr/bin/env ruby
#
# Ruby script to install a gem if it's needed.
# This script first uses gem list to see if the
# gem is already installed, matching the exact name.
#
# If the gem is installed, then exit.
# If the gem is not installed, then install it.
#
# You can this script whatever you like;
# I call mine gem-install-fast because it's
# faster than re-installing a gem each time.
# 
# Example:
#
#    gem-install-fast json
#
name=ARGV[0] and `gem list -i "^#{name}$"`.chomp=="true" or `gem install #{name}` 
```

要使用命令行脚本：

```
gem-install-fast json 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T22:09:05.483

我发现最好的是这个（shell命令）： `$ gem install asciidoctor --conservative`

仅当当前安装的 gem 无法覆盖 gem 规范时，它才会安装。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T12:41:02.427

```
gem update json 
```

只应在必要时安装，在我的 Windows 7 系统上安装

```
C:\Ruby193\bin>gem update json
Updating installed gems
Updating json
Fetching: json-1.6.6.gem (100%)
Temporarily enhancing PATH to include DevKit...
Building native extensions.  This could take a while...
Successfully installed json-1.6.6
Updating multi_json
Fetching: multi_json-1.2.0.gem (100%)
Successfully installed multi_json-1.2.0
Gems updated: json, multi_json
Installing ri documentation for json-1.6.6...
Installing ri documentation for multi_json-1.2.0...
Installing RDoc documentation for json-1.6.6...
Installing RDoc documentation for multi_json-1.2.0...

C:\Ruby193\bin>gem update json
Updating installed gems
Nothing to update

C:\Ruby193\bin> 
```

# jquery - 如何使用 jQuery 获取 div 的第一个 span 元素并更改类

> ID：10008433
> 
> 赞同：13
> 
> 时间：2012-04-04T09:29:28.843
> 
> 标签：jquery

我有一个跨度的 div

```
<div id="div1">
    <span class="">hello</span>
</div> 
```

当我单击 div 时，我想更改 div 的唯一第一个 span 元素的类

```
$('#div1').click(function() {
    // ... check if first span element inside the div .. if there and change the class..    
}); 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T09:30:17.517

```
$('#div1').click(function() {    
   $('span:first', this).prop('class', 'newClassName');
}) 
```

[http://api.jquery.com/first-selector/](http://api.jquery.com/first-selector/)

[http://jsfiddle.net/BUBb9/1/](http://jsfiddle.net/BUBb9/1/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T09:31:49.090

利用

```
 $("div span:first-child") 
```

如下：

```
$('#div1').click(function() {    
   $('span:first', this).prop('class', 'ClassName');
}) 
```

参考[http://api.jquery.com/first-child-selector/](http://api.jquery.com/first-child-selector/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T09:32:09.350

```
$('#div1').click(function(){
    var v = $(this).find('span').text();
}); 
```

这样就可以得到 span 的值。

您也可以使用 .html() 代替 .text() 方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T09:33:37.180

多个答案有效。我的做法：

```
$('#div1').click(function() {    
     $(this).find('span').first().attr('class','newClassName');
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-04T09:35:24.680

```
$('#div1').click(function() {    
   $('#div1 span:first').attr('class', 'newClassName');
}); 
```

# php - 使用 PHP 显示 Mysql 数据给了我一个空白页

> ID：10008437
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:29:38.660
> 
> 标签：php, css

我正在尝试在 php 页面中显示包含来自我的数据库的数据的表。

完全没有问题。

当我尝试使用 css 使表格看起来更好时，浏览器只会给我一个空白页面。这是我的代码...如果我在打开表格标签后删除 id=csstest 部分，一切正常，只要我添加 id=csstest 我得到一个空白页...我做错了什么？

```
 <?php

include 'config.php';

if (!mysql_connect($db_host, $db_user, $db_pwd))
    die("Can't connect to db");

if (!mysql_select_db($database))
    die("Can't select db");

// sending query
$result = mysql_query("SELECT data, cur_timestamp FROM {$table}");
if (!$result) {
    die("Check your SQL query");
}

$fields_num = mysql_num_fields($result);

echo "<h1>Tabella: {$table}</h1>";
echo "<table id="csstest"><tr>";
// printing table headers
for($i=0; $i<$fields_num; $i++)
{
    $field = mysql_fetch_field($result);
    echo "<td>{$field->name}</td>";
}
echo "</tr>\n";
// printing table rows
while($row = mysql_fetch_row($result))
{
    echo "<tr>";

    // $row is array... foreach( .. ) puts every element
    // of $row to $cell variable
    foreach($row as $cell)
        echo "<td>$cell</td>";

    echo "</tr>\n";
}
mysql_free_result($result);
mysql_close($result);
?>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T09:32:16.540

更改以下语句：

```
echo "<table id="csstest"><tr>"; 
```

对此：

```
echo "<table id=\"csstest\"><tr>"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T09:32:23.067

您需要在双引号之前添加斜杠：

```
echo "<table id=\"csstest\"><tr>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:32:59.580

```
echo "<table id="csstest"><tr>"; 
```

上面的代码生成解析错误并且您的错误报告已关闭，因此它只显示空白页面尝试以下方法

```
echo "<table id='csstest'><tr>";
echo '<table id="csstest"><tr>';
echo "<table id=\"csstest\"><tr>"; 
```

# c - 使用损坏的 xml 中存在的 xml 的有效部分

> ID：10008438
> 
> 赞同：0
> 
> 时间：2012-04-04T09:29:44.827
> 
> 标签：c, libxml2

嗨，如何使用损坏的 xml 中存在的 xml 的有效部分

例如：<nodea>
<nodeb>DATA</nodeb
<nodec> DATA </nodec>

在上面，因为 nodea 没有关闭，所以这是一个损坏的 xml，但 nodeb 和 nodec 是 nodea 中存在的有效 Xml。所以我可以检索其中的数据还是不使用 libxml2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:48:30.607

在解析文件之前，您必须通过启发式破解来修复文件。

```
$ cat broken.xml 
<nodea>
<nodeb>DATA</nodeb 
<nodec> DATA </nodec>
$ < broken.xml sed 's%</nodeb[^>]%</nodeb>%'
<nodea>
<nodeb>DATA</nodeb>
<nodec> DATA </nodec> 
```

# xna-4.0 - 无法在 XNA 中将我的游戏时间重置为零

> ID：10008439
> 
> 赞同：0
> 
> 时间：2012-04-04T09:29:48.703
> 
> 标签：xna-4.0

我正在使用 XNA 4.0 创建游戏，但在我的游戏中重置游戏时间时遇到问题，

问题是我正在使用此代码在游戏中添加我的对象：

```
Timespan prevSpawn = timespan.zero;
Timespan objectSpawnTime = timespan.fromsec(5);

if (gameTime.TotalGameTime - prevSpawn> objectSpawnTime)
        {
            prevSpawn = gameTime.TotalGameTime;
            AddObject();
        } 
```

我想将游戏时间重置为零，当重新开始游戏或游戏结束并进入主菜单并再次点击播放时，我想重置游戏时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:24:52.420

正如我从下面的 MSDN 条目中了解到的，GameTime.TotalGameTime 属性将继续“滴答”，直到您结束游戏或整个应用程序。

[http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime.totalgametime.aspx](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.gametime.totalgametime.aspx)

也许使用您自己的对象会更明智，您可以通过任何操作对其进行重置，从而更好地控制时间跨度。然后你仍然可以使用这个属性来计算一个和另一个之间的差异。

即当您重置/重新启动等时，不要参考 TotalGameTime 并尝试使其为零，而是参考您自己的对象的时间跨度，或参考 (TotalGameTime - TimeWhenReset) 其中 TimeWhenReset 是重置时从 TotalGameTime 复制的时间跨度。

这是未经测试的，但我认为如果我理解正确的话它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:45:48.790

对于更准确的计时器，您最好使用时间跨度和 DateTime 变量。当您想启动计时器时，将 DateTime 设置为现在，并在 TimeSpan 中执行以下操作：

```
timer = StartTime - DateTime.Now; 
```

这将为您提供一个可以随时部署的计时器。

# c# - 将字节数组转换为列表 使用 Silverlight 和 C#

> ID：10008440
> 
> 赞同：4
> 
> 时间：2012-04-04T09:29:49.290
> 
> 标签：c#, silverlight, list, bytearray, type-conversion

如何将`byte[]`数组转换为`list<byte>`？

我只使用 Silverlight 框架。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T09:31:13.423

简单地：

```
List<byte> myBytes = new List<Byte>(byteArray); 
```

或使用[LINQ](http://en.wikipedia.org/wiki/Language_Integrated_Query)扩展：

```
List<byte> myBytes = byteArray.ToList(); 
```

# javascript - 复选框总是返回 false

> ID：10008441
> 
> 赞同：1
> 
> 时间：2012-04-04T09:29:51.730
> 
> 标签：javascript, vb.net, asp.net-mvc-3, razor

我读过一些关于复选框总是返回错误状态的文章，但没有发现任何关于我自己的问题的信息。

所以，这里是脚本：

```
<script type="text/javascript">
    function update_contact(id, name) {
        alert("idCont : " + id + "\n nameCKB : " + name + "\n state : "
                + $(this).attr('checked'));
        var a = location.pathname.substring(1).split('/')
        $.ajax({
            url : '@Url.Action("update_contact")',
            type : 'POST',
            data : {
                name : name,
                isChecked : $(this).is(':checked'),
                idOpp : a[2],
                idCont : id
            },
            success : function(result) {
            }
        });
    };
</script> 
```

这是复选框的代码：

```
@If mail = False Then
    @<input type="checkbox" name="mailed" id="mailed" class="mailed" onclick="update_contact(@item.idContact.toString() , 'mailed')" />
Else
    @<input type="checkbox" name="mailed" id="mailed" class="mailed" onclick="update_contact(@item.idContact.toString() , 'mailed')" checked="checked" />
End If 
```

这是服务器生成的代码：

```
<input name="mailed" id="mailed" class="mailed" onclick="update_contact(1 , 'mailed')" type="checkbox"> 
```

一开始，我使用了一个 Html 助手。它是这样返回的：

```
<input id="mailed" name="mailed" onclick="update_contact(1 ,'mailed')" value="true" type="checkbox">
<input name="mailed" value="false" type="hidden"> 
```

我虽然是由于第二个输入，它总是返回一个错误的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:42:29.157

试试这个（在这里工作小提琴：http: [//jsfiddle.net/Ac3kd/](http://jsfiddle.net/Ac3kd/)）：

```
<script type="text/javascript">
    function update_contact(id, name) {
        var source = $('#'+name);
        alert("idCont : " + id + "\n nameCKB : " + name + "\n state : " + source.attr('checked'));
        var a = location.pathname.substring(1).split('/')
        $.ajax({
            url: '@Url.Action("update_contact")',
            type: 'POST',
            data: { 
                    name: name, 
                    isChecked: source.is(':checked'), 
                    idOpp: a[2], 
                    idCont: id
            },
            success: function (result) {}
        });
    };
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:49:25.273

问题可能`this`不是您认为的那样。尝试将单击复选框的引用显式传递给您的函数：

```
@If mail = False Then
      @<input type="checkbox" name="mailed" id="mailed" class="mailed" onclick="update_contact(@item.idContact.toString() , 'mailed', this)" />
Else
      @<input type="checkbox" name="mailed" id="mailed" class="mailed" onclick="update_contact(@item.idContact.toString() , 'mailed', this)" checked="checked" />
End If 
```

接着：

```
 function update_contact(id, name, cb) {
        alert("idCont: " + id + "\n nameCKB: " + name + "\n state: " + cb.checked);
        // you could say $(cb).attr("checked"), but cb.checked is more efficient
        // and easier to read
        var a = location.pathname.substring(1).split('/')
        $.ajax({
            url: '@Url.Action("update_contact")',
            type: 'POST',
            data: { 
                    name: name, 
                    isChecked: cb.checked, 
                    idOpp: a[2], 
                    idCont: id
            },
            success: function (result) {}
        });
    }; 
```

或者使用 jQuery 来分配点击处理程序，它会`this`为您正确设置。您可以将其`@item.idContact.toString()`放入`value`属性中，然后`this.value`在您的处理程序中使用它来访问它：

```
@If mail = False Then
      @<input type="checkbox" name="mailed" id="mailed" class="mailed" value="@item.idContact.toString()" />
Else
      @<input type="checkbox" name="mailed" id="mailed" class="mailed" value="@item.idContact.toString()" checked="checked" />
End If 
```

接着：

```
 $(document).ready(function() {
    $("#mailed").click(function() {
        alert("idCont: " + this.value + "\n nameCKB: " + this.name + "\n state: " + this.checked);
        // you could say $(this).attr("checked"), but this.checked is more efficient
        // and easier to read
        var a = location.pathname.substring(1).split('/')
        $.ajax({
            url: '@Url.Action("update_contact")',
            type: 'POST',
            data: { 
                    name: this.name, 
                    isChecked: this.checked, 
                    idOpp: a[2], 
                    idCont: this.value
            },
            success: function (result) {}
        });
    });
}); 
```

（注意：我实际上并不知道 VB/razor 语法，我只是猜测那部分。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:54:05.107

Mamoo 是正确的：$.ajax 是一个 jQuery 对象，因此`$(this)`不会指向调用 update_contact 函数的元素。我不会像 mamoo 那样创建两个变量（`source`ans ），而是在位之前创建：`a``var data``$.ajax`

```
function update_contact(id,name)
{
    var data = {name: name, 
                isChecked: $(this).is(':checked'), 
                idOpp: location.pathname.substring(1).split('/')[2], 
                idCont: id};
    $.ajax({
            url: '@Url.Action("update_contact")',
            type: 'POST',
            data: data,
            success: function (result) {}
        });
} 
```

**编辑**

为了`$(this)`工作，而不是传递名称和 id 参数 - 这意味着您在某处选择了复选框元素，并且您正在以类似于以下方式调用该函数：

```
update_contact($(elem).attr('id'),$(elem).attr('name')); 
```

只需使用更短、更清洁、更强大的：

```
update_contact.call($(elem)); 
```

或将内联更改`onclick="update_contact()"`为`onclick="update_contact.call(this)"`. 只是这个，没有 $ 符号或括号......

# wpf - 如何在 WPF 中实现时尚的垂直菜单？

> ID：10008449
> 
> 赞同：0
> 
> 时间：2012-04-04T09:30:24.883
> 
> 标签：wpf, user-interface

我是 WPF 的新手，我的任务是创建一个 UI，我被告知它需要“性感”。

我的首要任务是为我需要向用户提供的各种选项创建一个菜单结构。我想做这样的事情，取自[http://www.wpftutorial.net](http://www.wpftutorial.net)：

![在此处输入图像描述](../Images/6018d05e1d06a6f60896eb8c44ccf4ef.png)

不幸的是，我在该站点上没有看到任何示例，说明如何使用具有玻璃外观和感觉的子菜单实现垂直菜单。

我希望达到同样水平的“性感”（<-- 我的老板用语，不是我的），但风格不需要完全相同。

我需要采取哪些步骤来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:47:50.330

您展示的“性感”布局实际上已经过时（光泽度在 2008-2010 年如此......）。
无论如何，如果你不参加第 3 方，这就是：

*   容器是[一个](http://wpftutorial.net/Menus.html)[菜单](http://msdn.microsoft.com/en-us/library/system.windows.controls.menu.aspx)
*   每个项目都是一个[MenuItem](http://msdn.microsoft.com/en-us/library/system.windows.controls.menuitem.aspx)
*   一些 MenuItems 包含他们自己的 MenuItems（这是您看到的水平下拉菜单）
*   Menu 和 MenuItem 似乎有一个自定义模板/样式/ [ControlTemplate](http://msdn.microsoft.com/en-us/library/ms747082%28v=vs.85%29.aspx)

对于刚接触 WPF 的人来说，这确实是一项相当大的工作，但你肯定会学到很多东西，但是在没有经验的情况下，你需要几周的时间才能把它做好。

高温下，

呸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:33:55.380

您可能需要使用 3rd 方控件。DevExpress 和 Telerik 提供了一些非常好的 WPF 控件。

这将为您节省大量时间，因为它们具有内置主题并且非常好看。

从长远来看，自己尝试这样做可能会花费更多。

您甚至可以下载试用版并向您的老板展示该应用程序的演示。

# android - 如何改善 Android App 中的 CountDownTimer 延迟？

> ID：10008453
> 
> 赞同：0
> 
> 时间：2012-04-04T09:30:39.120
> 
> 标签：android, multithreading, timer, delay, countdowntimer

我正在为 android 编写计时器应用程序（就像我们用于烹饪的应用程序一样）。我曾经`CountDownTimer`每秒减少剩余时间。但是，因为我对 Threads 很陌生，所以我不知道计时器有延迟。

例如，考虑使用以下简单代码`CountDownTimer`：

```
CownDownTimer timer = new CountDownTimer(60 * 1000, 1000) {
     public void onTick(long millisUntilFinished) {
         System.out.println(millisUntilFinished);
     }
} 
```

当我运行它时，`onTick()`方法应该运行 60 次，但它没有。相反，它运行了大约 57 次。我发现这是由于延迟。编写计时器应用程序的最准确方法是什么？有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:48:48.233

> ```
> CountDownTimer timer = new CountDownTimer(60*1000, 1000) {
>     public void onTick(long millisUntilFinished) {
>         // TODO Auto-generated method stub
>         Log.e("", "millisUntilFinished"+millisUntilFinished);
>     }
>     @Override
>     public void onFinish() {
>         // TODO Auto-generated method stub
>     }
> };
> timer.start(); 
> ```

我运行这段代码，在 logcat 上我得到 59 个条目，我认为 1 个条目没有得到，因为当你统计计时器时，它也会先等待 1000 英里，然后使用 onTick()，所以代码工作正常

谢谢

# java - 输入流为空

> ID：10008457
> 
> 赞同：4
> 
> 时间：2012-04-04T09:30:48.527
> 
> 标签：java, inputstream

在我正在研究的一个程序中，我有

```
String cwd;
String file_separator;

public ConfigLoader()
{
    cwd = get_cwd();
    file_separator = get_file_separator();

    try
    {
        Properties c = new Properties();

        InputStream in = this.getClass().getClassLoader().getResourceAsStream(cwd + 
            file_separator + "data" + file_separator + "configuration.properties");

        c.load(in);
    }
    except (Exception e) { e.printStackTrace(); }
}

public String get_file_separator()
{
    File f = new File("");
    return f.separator;
}

public String get_cwd()
{
    File cwd = new File("");
    return cwd.getAbsolutePath();
} 
```

但是，由于某种原因，`c.load(in);`会导致`NullPointerException`. 例外来自`in == NULL`真实。我不知道为什么，因为

```
System.out.println(cwd + file_separator + "data" + file_separator +
    "configuration.properties"); 
```

印刷

```
/users/labnet/st10/jjb127/workspace/Brewer-Client/data/configuration.properties 
```

这是我要使用的文件的位置。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T09:32:12.533

`getResourceAsStream`旨在搜索类路径上的文件，而不是访问本地文件系统。您将不得不使用`FileInputStream`这种情况。

```
InputStream in = new FileInputStream(cwd + 
    file_separator + "data" + file_separator + "configuration.properties"); 
```

# c++ - 链表联合

> ID：10008464
> 
> 赞同：0
> 
> 时间：2012-04-04T09:31:11.630
> 
> 标签：c++

在我的“void union”函数中，我不确定如何插入用户分别输入的两个链表“A”和“B”中的数据，因为“AUB”不在 void 函数中。我会说：

```
AUB.insert 
```

但我不确定。有什么建议么？

```
#include "stdafx.h"
#include <iostream>

using namespace std;

class Sets
{
private:struct NODE
        {
            int info;
            NODE *next;
        };
        NODE *list;
public:Sets()
       {
           list=NULL;
       }
       void Insert(int x)
       {
           NODE *p=list, *q=list, *r;
           //create a new node
           r = new (NODE);
           r->info = x;
           r->next = NULL;
           //find the insertion place
           while(p != NULL && p->info < x)
           {
               q=p;
               p=p->next;
           }
           if(p==list)//x is the first info
           {
               list=r;
               r->next=p;
           }
           else if(p==NULL)//x is the last info
           {
               q->next=r;
           }
           else //x is neither forst nor last info
           {
               r->next=p;
               q->next=r;
           }
       }
        void display()
        {
            NODE *p=list;
            while(p != NULL)
            {
                cout << p->info << "-->";
                p=p->next;
            }
            cout << "NULL\n";
        }
        void Union(Sets setA,Sets setB)
        {
            NODE *p=setA.list, *q=setB.list;
            while(p != NULL && q != NULL)
            {
                if(p->info > q-> info)
                {
                    (q->info)
                    q=q->next;
                }
                else if(p->info == q->info)
                {
                    insert(p->info)
                    p=p->next;
                    q=q->next;
                }
                else//P->info < q->info
                {
                    insert(p->info);
                    p=p->next;
                }
            }
            while(p !=NULL)
            {
                insert(p->info);
                p=p->next;
            }
            while(q != NULL)
            {
                insert(q->info);
                q=q->next;
            }
        }
};

int main()
{   
    //create a set of integers
    int x;
    Sets A, B, setAUB;
    cout << "Enter data for setA:\n";
    cout << "Enter a group of positive integer numbers with -1 at the end end: ";
    cin >> x;
    while(x != -1)
    {
        A.Insert(x);
        cin >> x;
    };
    //display setA
    cout << endl << "setA=";
    A.display();

    cout << "Enter data for setB:\n";
    cout << "Enter a group of positive integer numbers with -1 at the end end: ";
    cin >> x;
    while(x != -1)
    {
        B.Insert(x);
        cin >> x;
    };
    //display setB
    cout << endl << "setB=";
    B.display();

    setAUB.Union(A, B);
    //display setAUB
    cout << endl << "setAUB=";
    setAUB.display();

    system ("pause");

    //terminate program
    return 0;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:39:14.260

你定义它：`void Union(Sets setA,Sets setB)`.

你在做什么？都是按值传递的，返回值是`void`——结果到哪里去了？

您当前的对象（`this`在`Union`函数中）是否成为该联合？如果是这样，其中已经存在的数据会发生什么变化？你没有删除它，所以你基本上合并了三个集合，而不是两个......

我建议创建一个**静态** `merge`函数，该函数将采用两个参数并*返回*一个**新**列表，该列表将是两者的合并。

否则，创建一个`merge`只需要 1 个参数的常规函数​​，并将其合并到当前对象中。

顺便说一句 - 为什么`Sets`，当它显然是一个排序的链表时？

# c++ - 将 ascii substr 转换为 int

> ID：10008470
> 
> 赞同：1
> 
> 时间：2012-04-04T09:31:29.077
> 
> 标签：c++

大学一年级在将 ascii 转换为 int 时遇到问题。

问题是这段代码

无符号短 iminutes = ((minutes[3]-48)*10) + (minutes[4]-48);

当我在家中的代码块上运行它时，它返回一个不正确的值，当我再次运行它时，我得到一个不同的不正确值。

当我在大学的 Borlands 上运行它时，屏幕会在我阅读它之前升起并消失，所以我也不能在这里使用系统时钟。

现在是复活节，所以即使我在上大学，我也不能惹恼我的导师，因为他们不是。

```
#include <iostream.h>
#include <conio.h>
#include <string>
//#include <time.h>
//#include <ctype.h>

using namespace std;

int main() {

bool q = false;

do {

// convert hours to minutes ... then total all the minutes
// multiply total minutes by $25.00/hr
// format (hh:mm:ss)

string theTime;

cout << "\t\tPlease enter time  " << endl;
cout <<"\t\t";
cin >> theTime;
cout << "\t\t"<< theTime << "\n\n";

string hours = theTime.substr (0, 2);
cout <<"\t\t"<< hours << endl;
unsigned short ihours = (((hours[0]-48)*10 + (hours[1] -48))*60);
cout << "\t\t"<< ihours << endl;

string minutes = theTime.substr (3, 2);
cout <<"\t\t"<< minutes << endl;
unsigned short iminutes = ((minutes[3]-48)*10) + (minutes[4]-48);
cout << "\t\t" << iminutes << endl;

cout << "\n\n\t\tTotal Minutes  " <<(ihours + iminutes);
cout << "\n\n\t\tTotal Value  " <<(ihours + iminutes)*(25.00/60) << "\n\n";

}

while (!q);

cout << "\t\tPress any key to continue ...";
getch();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:34:55.403

您将分钟设置为 theTime 的子字符串。所以分钟有2个字符。第一个在几分钟内从位置 0 开始。

所以这

```
unsigned short iminutes = ((minutes[3]-48)*10) + (minutes[4]-48); 
```

是错误的，因为它在分钟内访问不存在的字符 3 和 4，因为分钟只有两个字符长。它只有字符作为位置 0 和 1。

应该是这个

```
unsigned short iminutes = ((minutes[0]-48)*10) + (minutes[1]-48); 
```

或者你可以使用这个：

```
unsigned short iminutes = ((theTime[3]-48)*10) + (theTime[4]-48); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:33:59.133

问题是即使您从原始字符串中获取位置 3 和 4 的字符，新字符串也只是两个字符（即只有索引 0 和 1）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:34:06.653

```
istringstream iss(theTime.substr(0, 2));
iss >> ihour; 
```

# coldfusion - 多对多关系cfwheels内部连接

> ID：10008472
> 
> 赞同：0
> 
> 时间：2012-04-04T09:31:48.753
> 
> 标签：coldfusion, relationship, cfc, cfwheels

我对 cfwheels 有几个问题（n:m 关系）

这是我的数据库架构

```
rights        righthaspath           path        
-id -------|  -id                --> -id
-role      -->-rightid (FK)      |   -url
              -pathid  (FK)------| 
```

我的模型 /Models/Right.cfc

```
<cffunction name="init">
    <cfset hasMany(name="righthaspath",shortcut="path")>
    <cfset nestedProperties(associations="righthaspath")>   
</cffunction> 
```

/模型/路径.cfc

```
<cffunction name="init">
    <cfset hasMany(name="righthaspath")>
</cffunction> 
```

/模型/Righthaspath.cfc

```
<cffunction name="init">
    <cfset belongsTo("path")>
    <cfset belongsTo("right")>
</cffunction> 
```

在我的控制器中

```
<cfset tmp= model("right").findall(include="righthaspath")> 
```

所以，来自 cfhweels 的 sql 语句是：

```
SELECT rights.id,rights.Role,righthaspaths.id AS righthaspathid,righthaspaths.pathID,righthaspaths.rightID FROM rights 
LEFT OUTER JOIN righthaspaths ON rights.id = righthaspaths.rightID 
```

但我想要一个像这样的三个表的 sql 语句

```
SELECT 
    *
FROM 
    rights 
    INNER JOIN righthaspaths on rights.id=righthaspaths.rightID
    INNER JOIN paths on righthaspaths.pathID=paths.id 
```

你能帮忙吗？

PS：我不能包括路径，例如

```
<cfset tmp= model("right").findall(include="righthaspath,path")> 
```

因为我有一个错误

```
An association named path could not be found on the right model. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T23:02:51.363

我将代表上面的 Hans Maeier 发布他的答案，以便将其标记为已回答，并在 stackoverflow 上帮助 CFWheels 社区。

> include="righthaspath(path)" 将完成

希望对任何搜索此内容的人有所帮助。

谢谢，迈克尔。

# symfony - Doctrine2 - 如何限制@OneToMany 映射大小？

> ID：10008475
> 
> 赞同：0
> 
> 时间：2012-04-04T09:32:00.763
> 
> 标签：symfony, doctrine-orm, entity-relationship, one-to-many

我想知道是否有任何方法可以对`@OneToMany`Doctrine2 中的关系大小设置约束。

假设我有 2 个课程：`User`和`Toy`：

```
class User{
    ...
    /**
     * @OneToMany(targetEntity="Toy", mappedBy="user")
     */
    public $toys;
    ...
}
class Toy{
    ...
    /**
     * @ManyToOne(targetEntity="User", inversedBy="toys")
     */
    public $user;
    ...
} 
```

我想强制每个用户最多拥有 3 个玩具。你知道是否有办法通过使用任何 Doctrine2 注释来实现这一点？

如果通过注释无法实现，您将如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T09:48:20.263

```
class User {
 [..]
 public function addToy (Toy $toy)
 {
   if(count($this->toys) >= 3 && !$this->toys->contains($toy)) {
     throw new User\ToyLimitExceededException(
       'At most 3 toys are allowed per user, tried to add another!'
     );
   }
   $this->toys->add($toy);
   $toy->setUser($this);
   return $this;
 }
 [..]
} 
```

# sql - 删除 H2 中列的唯一约束

> ID：10008476
> 
> 赞同：8
> 
> 时间：2012-04-04T09:32:01.867
> 
> 标签：sql, database, h2

我尝试删除 h2 中列的唯一约束，之前创建为`info varchar(255) unique`.

我试过了：

```
sql> alter table public_partner drop constraint (select distinct unique_index_name from in
formation_schema.constraints where table_name='PUBLIC_PARTNER' and column_list='INFO'); 
```

但没有成功（如下）：

```
Syntax error in SQL statement "ALTER TABLE PUBLIC_PARTNER DROP CONSTRAINT ([*]SELECT DISTI
NCT UNIQUE_INDEX_NAME FROM INFORMATION_SCHEMA.CONSTRAINTS WHERE TABLE_NAME='PUBLIC_PARTNER
' AND COLUMN_LIST='INFO') "; expected "identifier"; SQL statement:
alter table public_partner drop constraint (select distinct unique_index_name from informa
tion_schema.constraints where table_name='PUBLIC_PARTNER' and column_list='INFO') [42001-1
60] 
```

如何正确删除此约束？

顺便一提：

```
sql> (select unique_index_name from information_schema.constraints where table_name='PUBLI
C_PARTNER' and column_list='INFO');
UNIQUE_INDEX_NAME
CONSTRAINT_F574_INDEX_9
(1 row, 0 ms) 
```

似乎返回正确的输出。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T17:20:45.663

在 SQL 语言中，标识符名称不能是表达式。您需要运行两条语句：

```
select distinct constraint_name from information_schema.constraints 
where table_name='PUBLIC_PARTNER' and column_list='INFO' 
```

然后获取标识符名称，并运行语句

```
ALTER TABLE PUBLIC_PARTNER DROP CONSTRAINT <xxx> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-05T08:05:58.820

您可以使用用户定义的函数来执行动态创建的语句。首先创建`execute`别名（仅一次）：

```
CREATE ALIAS IF NOT EXISTS EXECUTE AS $$ void executeSql(Connection conn, String sql) 
throws SQLException { conn.createStatement().executeUpdate(sql); } $$; 
```

然后调用这个方法：

```
call execute('ALTER TABLE PUBLIC_PARTNER DROP CONSTRAINT ' || 
    (select distinct unique_index_name from in formation_schema.constraints 
    where table_name='PUBLIC_PARTNER' and column_list='INFO')); 
```

...`execute`运行语句的用户定义函数在哪里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-04T07:36:48.657

如果您在**PosgreSQL 模式下**将 H2 与 Spring Boot 一起使用，则查询必须包含架构`public`，并且表可能处于小写模式。（见`application.yml`下文）

检查信息模式表中的字母大小写，并**使用表中所示的大写和小写`information_schema.constraints`**。

### 详细查询集

```
SET @constraint_name = QUOTE_IDENT(
              SELECT DISTINCT constraint_name
              FROM information_schema.constraints
              WHERE table_schema = 'public'
              AND table_name = 'public_partner'
              AND constraint_type = 'UNIQUE'
              AND column_list = 'info');

SET @command = 'ALTER TABLE public.public_partner DROP CONSTRAINT public.' || @constraint_name;

SELECT @command;

EXECUTE IMMEDIATE @command; 
```

解释：

*   SELECT DISTINCT 约束名 [...]

    从架构信息中选择具有唯一约束的列约束名称

*   QUOTE_IDENT([...])

    我不知道为什么需要这样做，它会引用结果字符串

*   SET @constraint_name = [...];

    存储在变量@constraint_name 中

*   SET @command = [...];

    通过串联字符串组成整个命令并存储在变量@command

*   选择@命令；

    在屏幕上显示组合查询，仅用于调试

*   立即执行@command；

    执行@command

Spring Boot中**PostgreSQL 模式下**的典型 H2 配置`application.yml`（摘录）

```
spring:
  # [...]
  jpa:
    database-platform: org.hibernate.dialect.H2Dialect
  # [...]
  datasource:
    url: jdbc:h2:mem:testdb;MODE=PostgreSQL;DATABASE_TO_LOWER=TRUE;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=false
    username: sa
    password: sa
  # [...] 
```

# matlab - 如何从轴内容中获取图像矩阵

> ID：10008482
> 
> 赞同：1
> 
> 时间：2012-04-04T09:32:20.327
> 
> 标签：matlab, matlab-figure

有没有办法将轮廓图的内容作为图像矩阵获取？我只想栅格化整个图形的内容，而不是轴、标签和空白区域。

我的目标是在灰度图像上叠加一个透明的彩色等高线图，我看不到另一种方式，因为 MATLAB 每个图形只有一个颜色图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:48:18.243

尝试[`getframe`](http://www.mathworks.com/help/techdoc/ref/getframe.html) 并[`frame2im`](http://www.mathworks.com/help/techdoc/ref/frame2im.html)

文档中的示例`frame2im`：

```
Create and capture an image using getframe and frame2im:

peaks                      %Make figure
f = getframe;              %Capture screen shot
[im,map] = frame2im(f);    %Return associated image data 
if isempty(map)            %Truecolor system
  rgb = im;
else                       %Indexed system
  rgb = ind2rgb(im,map);   %Convert image data
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:49:21.673

不是对这个问题的直接回答，但这是我认为你可以实现目标的方式：

```
%# load in grayscale image
gray_im =  rgb2gray(imread('peppers.png'));

%# converting n x m grey image to n x m x 3 rgb gray image
rgb_gray_im = cat( 3, gray_im, gray_im, gray_im );

%# displaying this image
imshow( rgb_gray_im );

%# plotting contourf on top with arbitrary colourmap
hold on
h = axes('position', [0.5, 0.5, 0.2, 0.2]);
z = peaks;
contourf(h, z, [min(z(:)), -6 : 8]); 
```

这给出了结果：

![在此处输入图像描述](../Images/3aee5d0a06a6a0f53cffbc438c4610b9.png)

该图的颜色图正在用于轮廓图。背景图像不依赖于颜色图，而是以真彩色显示 - 即每个像素都显示为 rgb_gray_im 中定义的 RGB 值。

还有其他方法可以绕过 MATLAB 颜色图限制：例如，请参阅[此博客文章](http://blogs.mathworks.com/pick/2009/07/24/using-multiple-colormaps-in-a-single-figure/)或[这些答案](http://www.mathworks.co.uk/support/solutions/en/data/1-GNRWEH/index.html)。

# asp.net - 如何使用 ASP.NET 和 HTML 显示来自数据库的数据

> ID：10008489
> 
> 赞同：0
> 
> 时间：2012-04-04T09:32:51.217
> 
> 标签：asp.net, html, sql

我做了一个查询，从数据库中检索项目列表：

```
 CREATE PROCEDURE dbo.GetSubjects(@DayComing varchar(10) , @UserId varchar(3))
    AS
IF EXISTS(
    SELECT        Std_ID
    FROM            Student
    WHERE Std_ID = @UserID) 
    BEGIN

    SELECT        TimeTable.Ttb_Subject 
    FROM            Student INNER JOIN
                       Class ON Student.Std_Class = Class.Cls_ID INNER JOIN
                       TimeTable ON Class.Cls_ID = TimeTable.Ttb_Class
     WHERE        (TimeTable.Ttb_WeekDay = @DayComing) AND (Student.Std_ID = @UserID)

     END
     ELSE BEGIN

     SELECT        TimeTable.Ttb_Subject, TimeTable.Ttb_Class
     FROM            Teacher INNER JOIN
                        TimeTable ON Teacher.Tch_ID = TimeTable.Ttb_Teacher
     WHERE        (TimeTable.Ttb_WeekDay = @DayComing)

     END 
```

现在我想在 asp 页面上显示 m，但我不知道该怎么做。你知道任何可以帮助我的教程吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:36:43.123

您有多种选择，例如 Linq2Sql、Linq2EF、ADO.NET、其他一些框架...

这是关于如何使用 ado.net 完成此任务的 tut： http: [//www.codeproject.com/Articles/15403/Calling-Stored-procedures-in-ADO-NET](http://www.codeproject.com/Articles/15403/Calling-Stored-procedures-in-ADO-NET)

以下是使用 Linq 2 SQL 的方法： [http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures。 aspx](http://weblogs.asp.net/scottgu/archive/2007/08/16/linq-to-sql-part-6-retrieving-data-using-stored-procedures.aspx)

和 Linq 2 实体框架：http: [//msdn.microsoft.com/en-us/data/gg699321](http://msdn.microsoft.com/en-us/data/gg699321)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:38:17.457

你有很多选择。看看下面的来源：

[ASP.NET 数据控件](http://www.asp.net/web-forms/overview/aspnet-data-controls)

此外，您可能更喜欢使用像实体框架这样的 ORM 技术：

[使用数据（实体框架教程）](http://www.asp.net/web-forms/overview/working-with-data-%28entity-framework-tutorial%29)

# java - 组织导入 Eclipse 方法

> ID：10008492
> 
> 赞同：3
> 
> 时间：2012-04-04T09:32:58.003
> 
> 标签：java, eclipse, code-generation

`CTRL`当我按下“ ++ ”（组织导入`SHIFT`）时，我需要知道在 eclipse 中调用了哪个方法`O`，以便在代码生成后调用它。这种方法的名称是什么，我在哪里可以找到它（Package.Interface）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T11:28:03.450

“组织导入”操作由 贡献`org.eclipse.jdt.ui.actions.OrganizeImportsAction`，而后者又调用`org.eclipse.jdt.internal.corext.codemanipulation.OrganizeImportsOperation`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T13:39:10.953

Finaly Managed 使用此代码来完成它（targetSite 是一个 IWorkbench 站点，同时作为 shell 初始化）：

```
@Override
public void postLaunchAction(final IProject project, final IProgressMonitor monitor) throws CoreException {

    super.postLaunchAction(project, monitor);

    Runnable job = new Runnable() {

        @Override
        public void run() {
            OrganizeImportsAction org = new OrganizeImportsAction(SpringServicesAction.this.targetSite);
            try {
                IJavaProject prj = null;
                if (project.hasNature("org.eclipse.jdt.core.javanature")) {
                    prj = JavaCore.create(project);
                }

                IStructuredSelection selection = new StructuredSelection(prj);
                org.run(selection);
            } catch (CoreException ce) {
                ce.printStackTrace();
            }
        }

    };

    this.shell.getDisplay().syncExec(job);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T13:58:13.760

作为参考，我是这样做的：

我在我们项目的代码库中进行了大型自动化重构。由于（我认为是）eclipse中的一个错误，重构静态方法，这些方法静态导入另一个文件，我不得不在每次重构之后调用组织导入（也因为我将每一个动作都自动提交给git）：

```
private void organizeImports(ICompilationUnit cu)
        throws OperationCanceledException, CoreException {

    cu.becomeWorkingCopy(null);
    CompilationUnit unit = cu.reconcile(AST.JLS4, false, null, pm);
    NullProgressMonitor pm = new NullProgressMonitor();

    OrganizeImportsOperation op = new OrganizeImportsOperation(cu, unit,
            true, true, true, null);

    TextEdit edit = op.createTextEdit(pm);
    if (edit == null) {
        return;
    }

    JavaModelUtil.applyEdit(cu, edit, true, pm);
    cu.commitWorkingCopy(true, pm);
    cu.save(pm, true);
} 
```

缺点：不鼓励访问。如果有人想在不创建新的可运行文件和不使用 shell 等的情况下正确调用此操作，请发表评论。

# emacs - 如何从 LispCabinet 错误“服务器目录不安全”中恢复？

> ID：10008493
> 
> 赞同：1
> 
> 时间：2012-04-04T09:33:03.310
> 
> 标签：emacs, lisp

我安装了 LispCabinet，第一次启动后它告诉我：

server-ensure-safe-dir：目录 `c:/Documents and Settings/Administrator/ApplicationData/.emacs.d/server' 不安全

这是什么意思，它是怎么来的，它是否危险，我能做些什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:39:28.137

我正在使用具有管理员权限的 Windows 帐户。emacs.d 中的服务器目录归“Administrators”组所有。我将用户组“Administrators”的所有权更改为由我当前使用的用户名（即“Administrator”）拥有，错误消息消失了。

此解决方案与此答案中给出的解决方案非常相似：[https ://stackoverflow.com/a/2944197/1312456](https://stackoverflow.com/a/2944197/1312456)

# iphone - NSNotificationCenter

> ID：10008497
> 
> 赞同：1
> 
> 时间：2012-04-04T09:33:23.713
> 
> 标签：iphone, objective-c, ios, cocoa-touch

现在我正在尝试编写一个函数来在屏幕上出现键盘时向上移动框架。我开始使用 NSNNotificationCenter。我的代码工作但不正确。当键盘出现时，我的 formView 正在向上移动，但是当我开始在 formView 中编辑下一个 textField 时，formView 再次向上移动。我的代码有什么问题？谢谢。

```
- (void)keyboardWillShow:(NSNotification *) aNotification {
    NSDictionary *userInfo = [aNotification userInfo];

    CGRect frame = self.formView.frame;
    frame.origin.y -= 170;

    NSValue *animationDurationValue = [userInfo objectForKey:UIKeyboardAnimationDurationUserInfoKey];
    NSTimeInterval animationDuration;

    [animationDurationValue getValue:&animationDuration];
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:animationDuration];

    formView.frame = frame;

    [UIView commitAnimations];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:53:59.053

`origin.y`当键盘消失时，您应该再次将 170 像素（或 Mike 建议的任何计算）添加到视图中。当您单击另一个文本字段时，从技术上讲，当前键盘将消失（您的视图不会以任何方式做出反应）并且会出现一个新键盘（您`keyboardWillShow`将再次被调用并且您再次将视图向上移动 170 像素）。

# windows-installer - 安装 (MSI) 无法在旧版本上正确安装

> ID：10008500
> 
> 赞同：2
> 
> 时间：2012-04-04T09:33:29.157
> 
> 标签：windows-installer

我已经查看了[为什么我的新 Windows Installer 文件 (MSI) 不能在旧版本的 MSI 上正确安装？](https://stackoverflow.com/questions/1013475/why-doesnt-my-new-windows-installer-file-msi-install-properly-over-an-older-v) 但这对我没有帮助。

我有一个由安装包 (MSI) 安装的程序（Office 插件）

最初插件和安装项目是在 Visual Studio 2005 中制作的。该解决方案现在移至 Visual Studio 2010。当我制作新的 MSI 并尝试将其安装在旧版本上时，新版本在我进行修复之前将无法工作使用 Add Remove Programs->Modify Installation->Repair 如果我先删除旧版本，新版本安装完美。

对我们来说重要的是新的微星能够顺利移除旧版本并顺利安装新版本，因为它被几个没有计算机经验的用户使用

RemovePreviousVersion 设置为 True。我已将版本从 3.1.1 升级到 4.0.0，并在此过程中接受了新的 ProductCode。在 Orca 中，我将 Reinstallmode 设置为 amus，但似乎没有任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:02:15.420

如果我理解正确，您说如果对新版本进行修复，升级是否有效？当两个包具有共享组件时，可能会出现这种情况，即您的包组件的 GUID 重复。跟踪此问题的最佳方法是创建详细的安装日志，以便我们对其进行分析。

在修复过程中，与旧版本没有冲突，因为它已经被删除并且包中的组件安装正确，这就是插件工作的原因。

你能创建一个详细的日志，以便我们查看它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T07:18:25.640

你应该告诉我们更多。您是否在交换版本号、产品、组件、升级和包代码？你用的是哪个软件？

通常，您在产品中保持升级代码相同。您需要在升级表中指定版本号，包括旧/当前升级代码。

取决于您在哪里安排**RemoveExistingProducts**，如果您保留组件代码，我可能是一些旧组件没有被替换。

我总是在**InstallInitialize**之后安排活动。

检查是否调用了动作**FindRelatedProducts**。

在[这篇文章](https://stackoverflow.com/questions/15829375/why-do-i-need-to-specify-a-new-guid-for-a-version-upgrade-in-wix/15829783#15829783)中，您可以找到使用 WIX 的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T14:11:35.130

我试图从日志中获取更多详细信息，但可以找到很多信息。但是，我找到了另一种方法来检测修复的原因。要获取有关按需安装原因的更多信息，请打开事件查看器（“开始 -> 运行”、“eventvwr.msc”）并在“应用程序”节点下查看“MsiInstaller”形式的日志消息：

> 事件类型：警告事件源：MsiInstaller 事件 ID：1001 描述：检测产品“{000C1109-0000-0000-C000-000000000046}”，在请求组件“{00030829-0000-0000-C000-”期间功能“示例”失败000000000046}'

当然，您的机器上的消息和 GUID 会有所不同。然后，您可以检查项目中的 GUID，以查看哪个组件触发了修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T07:05:31.763

通过使用 Orca Tool 编辑 msi，可能会解决您的问题。

首先，我通过在 InstallExcecuteSequence 选项卡下的 InstallValidate 之后和 InstallInitialize 之前设置 RemoveExistingProducts 的序列号来删除现有产品。

谢谢， 索拉布

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-10T12:29:18.970

奇怪的是，第二个日志没有显示任何可见的问题，因此应该正确安装升级。要获取更多详细信息，我们需要在操作系统触发自动修复时创建详细日志。要创建此日志，您需要激活全局日志记录，如下所述：http: [//support.microsoft.com/kb/2545723](http://support.microsoft.com/kb/2545723)

# php - 关闭浏览器时 Cookie 不会过期

> ID：10008501
> 
> 赞同：2
> 
> 时间：2012-04-04T09:33:31.513
> 
> 标签：php, cookies

我正在尝试设置一个cookie：

```
setcookie($cookie_name, $val, 0); 
```

或者

```
setcookie($cookie_name, $val); 
```

但是当我关闭并重新打开浏览器（firefox、chrome）时，cookie 仍然具有相同的值。访问结束时如何强制删除？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:35:59.563

要删除 cookie，只需将到期日期设置为过去，如下所示：

```
// Set the cookie in the past to ensure it is removed
setcookie($cookie_name, $val, time()-3600); 
```

但是，我认为这不是您的问题，因为您的代码似乎是正确的。

**你是如何测试cookie的？您可能在测试之前再次设置它！**

您还需要确保关闭浏览器而不是选项卡。关闭选项卡，不会结束会话！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:35:44.137

尝试将值设置为 null

```
setcookie($cookie_name, null); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:36:14.883

你应该试试

```
setcookie($cookie_name, $val, time()-3600); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:39:08.070

尝试使用此代码：

```
setcookie ("TestCookie", "", time() - 3600);// set the time to minus to remove the cookie. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T09:34:03.530

我在 Chrome 上遇到过类似的问题。在 Web Developer Tools 中打开 cookie 面板有时会显示 Expires 设置为“Session”的 cookie。关闭浏览器（不仅仅是选项卡）并重新打开浏览器后，此 cookie 仍然存在。解决此问题的可靠方法是清除缓存。这似乎可以解决问题。底线是，如果 cookie 在浏览器工具中显示为“会话”，那么您已正确设置它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-23T12:17:41.440

您可能需要取消设置 cookie，然后将其设置为 null，如下所示：

```
unset($_COOKIE['cookie_name']);
setcookie ( 'cookie_name', null,-1 ); 
```

在第一行中，您将其取消设置，然后将其设置为 null 以防出现任何进一步的问题。

# c++ - `std::function` 是否允许移动其参数？

> ID：10008503
> 
> 赞同：19
> 
> 时间：2012-04-04T09:33:36.770
> 
> 标签：c++, function, c++11, bind

在处理[这个问题](https://stackoverflow.com/q/9944906/20984)时，我注意到 GCC (v4.7) 的实现`std::function`会在参数被取值时移动它的参数。以下代码显示了这种行为：

```
#include <functional>
#include <iostream>

struct CopyableMovable
{
    CopyableMovable()                        { std::cout << "default" << '\n'; }
    CopyableMovable(CopyableMovable const &) { std::cout << "copy" << '\n'; }
    CopyableMovable(CopyableMovable &&)      { std::cout << "move" << '\n'; }
};

void foo(CopyableMovable cm)
{ }

int main()
{
    typedef std::function<void(CopyableMovable)> byValue;

    byValue fooByValue = foo;

    CopyableMovable cm;
    fooByValue(cm);
}
// outputs: default copy move move 
```

我们在这里看到`cm`执行了一个副本（这似乎是合理的，因为`byValue`' 参数是按值获取的），但随后有两个动作。由于`function`是对 的副本进行操作`cm`，因此它移动其参数的事实可以被视为一个不重要的实现细节。[但是，当`function`与 一起使用`bind`](https://stackoverflow.com/q/9944906/20984)时，这种行为会引起一些麻烦：

```
#include <functional>
#include <iostream>

struct MoveTracker
{
    bool hasBeenMovedFrom;

    MoveTracker()
      : hasBeenMovedFrom(false)
    {}
    MoveTracker(MoveTracker const &)
      : hasBeenMovedFrom(false)
    {}
    MoveTracker(MoveTracker && other)
      : hasBeenMovedFrom(false)
    {
        if (other.hasBeenMovedFrom)
        {
            std::cout << "already moved!" << '\n';
        }
        else
        {
            other.hasBeenMovedFrom = true;
        }
    }
};

void foo(MoveTracker, MoveTracker) {}

int main()
{
    using namespace std::placeholders;
    std::function<void(MoveTracker)> func = std::bind(foo, _1, _1);
    MoveTracker obj;
    func(obj); // prints "already moved!"
} 
```

标准是否允许这种行为？是否`std::function`允许移动它的论点？如果是这样，我们可以将返回的包装器转换为按值参数的包装器是否正常`bind`，`std::function`即使这在处理多次出现的占位符时会触发意外行为？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T10:59:26.853

`std::function`指定将提供的参数传递给带有`std::forward`. 例如对于`std::function<void(MoveTracker)>`，函数调用运算符等价于

```
void operator(CopyableMovable a)
{
    f(std::forward<CopyableMovable>(a));
} 
```

由于`std::forward<T>`等效于`std::move`when`T`不是引用类型，因此这说明了您的第一个示例中的一个动作。第二个可能来自必须通过内部的间接层`std::function`。

`std::bind`这也解释了您在使用包装函数时遇到的问题：`std::bind`也**被**指定为转发其参数，在这种情况下，它被传递一个由`std::forward`内部调用产生的右值引用`std::function`。因此，绑定表达式的函数调用运算符将​​右值引用转发给每个参数。不幸的是，由于您重用了占位符，因此在两种情况下它都是对同一对象的右值引用，因此对于可移动类型，无论哪个先构造都会移动值，而第二个参数将获得一个空壳。

# css - 图像在 TD 中未垂直对齐

> ID：10008507
> 
> 赞同：0
> 
> 时间：2012-04-04T09:33:48.213
> 
> 标签：css, html-table, vertical-alignment

我有一个表格，其中每个 TD 都包含具有相同高度的图像（更准确地说是表情符号）。奇怪的是，它们没有正确对齐。一个表情符号在顶部，另一个在中间，另一个在底部。

这是一张图片，可以让解释更容易：

[http://i.imgur.com/ITbBp.png](http://i.imgur.com/ITbBp.png)

我试图将 HTML 结构复制到 jsfiddle，但[它在那里正确对齐](http://jsfiddle.net/uxyjg/)。所以我相信这是一个CSS问题。

但是，我尝试修改所有内容均无济于事。我无法使其正确对齐。我尝试`vertical-align:middle`并尝试设置`padding`，`margin`但我无法使其正确对齐。

有什么帮助吗？

**编辑：**事实证明，这个 CSS 是问题所在：

```
.emotlist {
overflow: auto;
height: 175px;
width: 120px;
} 
```

当我删除 时`overflow: auto`，它会按我想要的方式显示。但是这里的问题是：我需要`overflow:auto`制作滚动条，所以万一有更多的表情添加到表格中，它不会超过定义的高度。

**编辑2：**我想这不是`overflow: auto`导致问题的原因，因为它在小提琴中工作正常（如Sheilender所示）

**免责声明：**我无法更改 HTML 结构（以防有人建议）。我无权访问 HTML 模板，我只能通过 CSS 对其进行样式设置。

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:35:16.257

在我看来，`&nbsp;`每张图片都被分成新的一行，因此出现了问题。

尝试：

```
.emotlist table tr td {
   width: 25px;
} 
```

这应该使单元格足够宽以容纳图像和`&nbsp;`

或者

```
.emotlist table tr td {
    white-space: nowrap;
} 
```

以防止细胞破坏任何线条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:05:40.037

看到我已经根据您的要求对您的 CSS 进行了更改

[http://jsfiddle.net/uxyjg/14/](http://jsfiddle.net/uxyjg/14/)

[您可以阅读有关垂直中心内容的更多信息](http://phrogz.net/css/vertical-align/index.html)

# android - 仅当活动从通知开始时，如果从最近的应用程序中选择应用程序，应用程序将重新启动

> ID：10008509
> 
> 赞同：6
> 
> 时间：2012-04-04T09:33:57.667
> 
> 标签：android, android-notifications

我的应用程序具有如下所示的活动堆栈

*   A：加载活动
*   B：主要活动
*   C：详细活动

清单是这样的

```
<activity A>
  <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity>
<activity B android:launchMode="singleTask"/>
<activity C/> 
```

当我从启动器启动应用程序时，它充当 A -> B -> C 。在活动 C 上按 Home 按钮并从最近的应用程序列表中调用它（长按 Home），显示 C。还行吧。

但是当我从通知启动应用程序时，因为我不想显示加载屏幕，所以启动活动 B。所以，用户可以导航 B -> C。

但是当用户在活动 C 上按 Home 并从最近的应用程序列表中选择应用程序时，B 会重新启动并且不会保留状态。所以C活动总是消失。

我尝试了许多标志选项，但没有找到解决方案。我想要的是应用程序的行为就像用户从启动器启动应用程序时一样。

我为这样的通知创建了待处理的意图。在我的应用程序中，我应该`Intent.FLAG_ACTIVITY_CLEAR_TOP`用于活动 B。

```
Notification notice = new Notification(R.drawable.icon_notification, context.getString(R.string.app_name), System.currentTimeMillis());

Intent intent = new Intent(context, B.class);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK|Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtras(i);

PendingIntent contentIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT); 
```

我认为最近的应用程序列表发送相同的通知意图，所以总是调用活动 B。但是当我从启动器启动应用程序时，它只会将我发送到最后一个活动 C，而不是 B。

请帮助我。:(

## 更新

我已经解决了这个问题，如下所示。

*   添加具有不同任务亲和力的新活动 D。此活动刚开始 B（主要活动）
*   在通知中，开始活动 D
*   在活动 D 中，以一些标志开始活动 B 并自行完成

```
if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY)  != 0 ) {
  i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET | Intent.FLAG_ACTIVITY_NEW_TASK);
} else {
  i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
} 
```

我已经注册了活动 D，如下所示

```
 <activity
            android:name="D"
            android:clearTaskOnLaunch="true"
            android:excludeFromRecents="true"
            android:exported="false"
            android:launchMode="singleInstance"
            android:noHistory="true"
            android:taskAffinity="xxx"
            android:theme="@android:style/Theme.NoDisplay">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
        </intent-filter>
    </activity> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-27T21:56:17.333

由于通知已启动应用程序，因此它现在已成为历史记录的一部分 - 您可能只想在实际点击它时处理它。检查：

```
(getIntent().getFlags() & Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY) != 0 
```

如果为真，则活动是从历史记录中打开的，而不是通知的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:52:00.453

我想由于使用`Intent.FLAG_ACTIVITY_NEW_TASK`. 第一个任务是`A`从启动器启动时创建的，而第二个任务是`B`从通知启动时创建的。如果是这样，那么您应该确保 2 个单独的任务是您真正需要的。

# c# - 在 Asp.NET (MVC) 中使用会话和缓存进行状态管理

> ID：10008512
> 
> 赞同：1
> 
> 时间：2012-04-04T09:34:02.620
> 
> 标签：c#, asp.net, asp.net-mvc

使用 ASP.NET MVC3 创建 Web 应用程序，基本框架包括 NHibernate (Fluent)、Ninject、Razor、Automapper、Jquery、Rhino-Security。

需要决定状态管理策略（会话和缓存级别）。我听说过以下缓存类型，

1.  输出缓存
2.  甜甜圈（孔）缓存
3.  数据缓存

考虑到一般情况，我想了解在请求期间使用的状态管理策略，

**登录**

1.  用户访问站点，仍然未经身份验证，因此通过 FormsAuth 模块重定向到登录页面**（问题 - 由于登录页面不是特定于用户的，绝对是输出缓存的候选者。但是视图是由 MVC 逐字刷新的纯 HTML，所以任何好处通过使用缓存）**

**页面访问**

1.  当我使用 Rhino Security 时，导航取决于分配给单个用户的权限。每个用户**可能**都分配了特定的权限，**但**大多数用户将拥有分配给该用户所属的 UseGroup 的权限。导航创建是一个两步过程 - 为用户获取权限集和生成导航 UI，所以这是我的两个 Q（**问题 1** - 在每个页面访问时都需要当前用户的权限以进行操作授权以及导航创建，所以在哪里存储它 - 会话？**问题 2** - 导航也**可以**为第一次访问的每个用户创建并存储在会话中，但我们知道它对于 UserGroup 中的每个用户都是相同的，除非给定特定的用户。因此，我们可以为特定权限集创建哈希，然后将导航保存到数据缓存**或**使用 VarByCustom 在负责创建导航 UI 的子操作上启用输出缓存）

我看我太啰嗦了。事实上，我确实有更多问题，但让我先看看 smbdy 是否真的费心在这里阅读这么多废话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T15:42:14.883

关于用户权限，鉴于每个用户组的权限相同，我会将它们存储在缓存中，如下所示：

```
if (System.Web.HttpContext.Current.Cache["UserGroup_1_Permissions"] == null)
{
    _Permissions = DAL.getPermissions("UserGroup1") as List<Permissions>;
    System.Web.HttpContext.Current.Cache["UserGroup_1_Permissions"] = _Permissions;
}
else
{
    _Permissions = System.Web.HttpContext.Current.Cache["UserGroup_1_Permissions"] as List<Permissions>;
} 
```

这样，您只需第一次从 DB 中检索它们，因为它将存储在 HttpContext.Current.Cache 中。

# math - Mathjax 渲染问题

> ID：10008515
> 
> 赞同：1
> 
> 时间：2012-04-04T09:34:11.340
> 
> 标签：math, latex, equation, mathjax

对于方程，mathjax 呈现如图所示。请帮我找出问题并解决。在 codecogs 乳胶编辑器中，这是正确呈现的。在 MathType 方程编辑器中，它也显示得很好。

![在此处输入图像描述](../Images/c8ccd67d7b8231632400e929b2f9dadc.png)

实际代码如下。

```
 \begin{align}f(x) &= Sin\: [\pi ]x-Sin[\pi ^{2}]x+Cos[-\pi ^{3}]x \\\\
 [\pi ] &=[3.14]=3\\\\ [\pi ^{2}]&=[9.8596]=9\\\\
 [-\pi ^{3}]&=[-9.8596]=-10 \\\\
 f(\frac{\pi }{6}) &= Sin(3\times \frac{\pi }{6})-Sin(9\times \frac{\pi }
 {6})+Cos(-10\times \frac{\pi }{6})\\\\ 
 &=Sin\frac{\pi }{2}-Sin\frac{3\pi }{2}+Cos(\frac{5\pi }{3})\\\\ 
 &= 1-\left ( -1 \right )+\frac{1}{2}\\\\
 & =2+\frac{1}{2}\\\\ 
 &=\frac{5}{2} \end{align} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:30:48.757

似乎字符 [ 导致 align 环境和 MathJax 出现一些问题。

这似乎对我有用（至少在[JaxEdit](https://jaxedit.googlecode.com/svn/trunk/jaxedit/jaxedit.html)和[http://math.stackexchange.com](http://math.stackexchange.com)上）：

```
\begin{align}
    f(x) & = Sin(\pi)x - Sin(\pi^2)x + Cos(-\pi^3)*x \\
    \left[\pi\right] & = \left[3.14\right] = 3 \\ 
    \left[\pi ^{2}\right] & = \left[9.8596\right]=9 \\
    \left[-\pi ^{3}\right] & = \left[-9.8596\right]=-10 \\
    f(\frac{\pi }{6}) & = Sin(3\times \frac{\pi }{6})-Sin(9\times \frac{\pi}{6})+Cos(-10\times \frac{\pi }{6})\\
    & = Sin\frac{\pi }{2}-Sin\frac{3\pi }{2}+Cos(\frac{5\pi }{3})\\
    & = 1-\left ( -1 \right )+\frac{1}{2}\\
    & = 2+\frac{1}{2}\\
    & = \frac{5}{2}
\end{align} 
```

或者使用与您的 MathJax 解决方案一起安装的软件包之一的等效符号

# java - 由于 XML 文件中的空格，无法读取 XML

> ID：10008516
> 
> 赞同：2
> 
> 时间：2012-04-04T09:34:13.760
> 
> 标签：java, xml, whitespace

由于 xml 文件中的空格，我面临一个问题。我想从 xml 读取数据，但由于节点之间的空间，我面临各种问题。

前任。

`If a node has 4 childs, due to the spaces it shows 9 childs to the node. So when I try to display node values in table, some columns without heading and without data are also created.`

`When I removed these spaces I read my file successfully without any problem.`

那么如何解决这样的问题呢？因为每次我都无法亲自从文件中删除空格，因为我读取了多个 xml 文件。因此，从每个文件中删除空格将是一项繁琐的工作。

```
Document doc;
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
doc = dBuilder.parse(fp);
doc.getDocumentElement().normalize();            
NodeList nList = doc.getElementsByTagName("parameter"); 
nodeName = name; 
for (int temp = 0; temp < nList.getLength();temp++)
{
     Node nNode =  (Node) nList.item(temp);
     Element eElement = (Element) nNode;
     String upname1 = getTagValue("name", eElement);
     System.out.println(nodeName+"   UP:    "+upname1);

     if(upname1.equals(nodeName))
     {  
           NodeList pvalList = eElement.getElementsByTagName("paramvalues");
           for(int l=0; l< pvalList.getLength(); l++)
           {
                 Node pNode = (Node) pvalList.item(l);
                 NodeList valList = pNode.getChildNodes();

                 for(int j=0; j<valList.getLength(); j++)
                 {
                     Node valNode = (Node) valList.item(j);

                     if(valNode.getNodeName().equals("value"))
                     {
                          NamedNodeMap att = valNode.getAttributes();

                          for(int s=0; s<att.getLength(); s++)
                          {
                              Node n1 = att.item(s);
                              System.out.println("len:   "+att.getLength());
                              if(n1.getNodeName().equals("default"))
                                   def = n1.getNodeValue();

                              if(n1.getNodeName().equals("actualvalue"))
                                   aval = n1.getNodeValue();
                           }
                      }
                 }
           }
     }
} 
```

我知道这是一个奇怪的问题，但是在完成我的工作时它变得很烦人。

请帮助..谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:53:43.373

您可以尝试从字符串的左侧和右侧创建一个 TRIM 空格的类，同时解析示例**' John Smith '**的文档变为**'John Smith'** | 来源：[http ://rosettacode.org/wiki/Strip_whitespace_from_a_string/Top_and_tail](http://rosettacode.org/wiki/Strip_whitespace_from_a_string/Top_and_tail)

```
 public class Trims{
   public static String ltrim(String s){
      int i = 0;
      while (i < s.length() && Character.isWhitespace(s.charAt(i))){
         i++;
      }
      return s.substring(i);
   }

   public static String rtrim(String s){
      int i = s.length() - 1;
      while (i > 0 && Character.isWhitespace(s.charAt(i))){
         i--;
      }
      return s.substring(0, i + 1);
   }

   public static void main(String[] args){
      String s = " \t \r \n String with spaces  \t  \r  \n  ";
      System.out.println(ltrim(s));
      System.out.println(rtrim(s));
      System.out.println(s.trim()); //trims both ends
   } 
```

或找到一种不同的方式来处理内容..利用 DOMBuilder ( [http://www.java-tips.org/other-api-tips/jdom/dealing-with-mixed-content-whitespace-comments-text -child-elements-and.html](http://www.java-tips.org/other-api-tips/jdom/dealing-with-mixed-content-whitespace-comments-text-child-elements-and.html) )

```
 // a builder takes a boolean value meaning validation mode:
        DOMBuilder builder = new DOMBuilder(false);

        // simply load the document::
        Document document = builder.build(
                new java.io.File("sample.xml"));

        Element order = document.getRootElement();

        // find an address tag:
        Element address = 
                order.getChild("purchased-by").getChild("address"); 
```

# android - Appwidget 大小计算

> ID：10008521
> 
> 赞同：16
> 
> 时间：2012-04-04T09:34:38.247
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-3.0-honeycomb, android-appwidget, android-2.3-gingerbread

可能是我，但是当我根据 android 页面上给出的公式计算最小应用程序小部件大小时，我没有得到正确的小部件宽度；公式[如下](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#anatomy_determining_size)：

> 宽度(n) = (70 xn) - 30

当我想要一个 5x1 小部件时，正确的宽度是 (5 * 70) - 30 = 320dp。然而，在摩托罗拉 Xoom 上测试它时，它解析为 4x1 小部件。我已经测试了不同的值，400dp 在带有 Honeycomb 的摩托罗拉 xoom 上似乎适合 5x1，但随后我会在带有 Gingerbread 的常规 Galaxy Tab 上对其进行测试，然后它会解析为 6x1（正如人们所期望的那样）。

所以这里有两个问题；

*   我忽略了姜饼和蜂窝有什么区别？
*   因为我知道 ICS 小部件大小不再有小部件之间的填充，所以这里也有一些经验法则吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-18T16:23:04.577

在我的**4x1 小部件**中，我将这些尺寸用于**res/values/dimens.xml**：

```
<!-- size = (74 x n) - 2 -->
<dimen name="appwidget_margin">0dp</dimen>
<dimen name="appwidget_min_width">294dp</dimen>
<dimen name="appwidget_min_height">72dp</dimen> 
```

对于**res/values-v14/dimens.xml**：

```
<!-- size = (70 x n) - 30 -->
<dimen name="appwidget_margin">0dp</dimen>
<dimen name="appwidget_min_width">250dp</dimen>
<dimen name="appwidget_min_height">40dp</dimen> 
```

**我将[小部件模板包](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html#templates)用于背景图像。**

在[官方指南](http://developer.android.com/guide/topics/appwidgets/index.html#AddingMargins)中，res/values/dimens.xml 中的默认边距应为 8dp，但如果我使用 8dp，我的小部件会小于桌面上的标准小部件（谷歌搜索、天气等）。那是因为 v1-v13 的边距是在背景图像中构建的：

![在此处输入图像描述](../Images/2c88a01c8cca936652c4cb016f511fa7.png)

我在 HTC Desire、Nexus S、模拟器 Android 2.2 和模拟器 Android 2.3.3 上对其进行了测试。使用上面的模板包背景和配置，我的小部件的大小与其他标准小部件相同，并且在我测试的所有设备上看起来都不错。

各种发射器也存在问题。我推荐这篇文章阅读：[http ://radleymarx.com/blog/app-widget-padding-margins-in-ics-android/](http://radleymarx.com/blog/app-widget-padding-margins-in-ics-android/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-12T02:46:31.350

没有太多设备完全遵循 Google 的建议公式。您最好使用几个 xml-xxx 文件夹，这些文件夹可以指定更准确的 minWidth 和 minHeight 对应于不同的屏幕和操作系统。

现在我四个完全基于操作系统：

```
xml       // standard
xml-v11   // Honeycomb grid
xml-v14    // ICS's new extra padding
xml-sw552dp-v14  // ICS tablet padding 
```

但是当我微调时，我可能必须为特定的 dpi 或屏幕添加一些新文件夹。

快速更新：

只有一些设备使用自动填充。三星和 HTC 具有使用全角小部件的自定义 UI，因此它们会覆盖启动器上的操作系统填充。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T12:29:08.493

在 ICS 中没有填充，有自动填充。您使用的公式适用于 ICS。对于旧版本，还有另一个公式：

```
num*74 - 2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T12:27:11.723

注意：如果您以 pre-Honeycomb 为目标（或在指定蜂窝之前的 minSdkVersion 时未指定 targetSdkVersion），则蜂窝网格（和 ICS 网格）计算不会生效。这样做的缺点是您错过了较新的操作系统功能，但如果您实际上并不需要它们，那么保留目标 pre-honeycomb 将省去自定义 xml 文件夹的麻烦。

# c# - 进程正在等待完成

> ID：10008522
> 
> 赞同：1
> 
> 时间：2012-04-04T09:34:39.563
> 
> 标签：c#, process

我有一个应用程序，我正在启动多个进程。但看起来我没有在所有进程完成之前捕捉到退出事件。我怎样才能做同样的事情，但不等待所有人完成？

这是我的代码：

```
foreach (var job in JobList.Where(x => x.Status == "Assigned"))
{
    var worker1 = new Process();

    worker1.StartInfo.UseShellExecute = false; 
    worker1.EnableRaisingEvents = true;
    worker1.StartInfo.CreateNoWindow = true;
    worker1.StartInfo.ErrorDialog = true;
    worker1.StartInfo.Arguments = job.BtcFilePath;
    worker1.StartInfo.FileName = job.ExeFilePath;
    worker1.Exited += new EventHandler(Worker1Exited);

    Processors.Add(worker1);

    Processors.Last().Start();
    Processors.Last().PriorityClass = ProcessPriorityClass.BelowNormal;

    job.Status = "Progressing";
    job.StartDate = worker1.StartTime;
    _jobRespository.Save(job);

    _state = State.CollectWorkerInformation;
} 
```

...

```
void Worker1Exited(object sender, EventArgs e)
{
    Interlocked.Increment(ref _readyToDoFinalize);
} 
```

BR

# java - 如何在 Java 中获取操作系统

> ID：10008527
> 
> 赞同：4
> 
> 时间：2012-04-04T09:35:10.613
> 
> 标签：java, operating-system

我知道SO上有这样一个问题，但我找不到。于是又问...

我需要为我的程序设置属性，但我需要让它独立于操作系统 - 在 Windows XP 和 Linux 上运行（未知发行版，未知版本）

更具体地说 - 我需要设置系统在哪里可以找到`chromedriver`二进制文件。我需要这样的伪代码：

```
 if (getOs() == Windows){
    System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, "chromedriver.exe");
   } else{
     System.setProperty(ChromeDriverService.CHROME_DRIVER_EXE_PROPERTY, "chromedriver");
   } 
```

现在我需要获取操作系统的部分。感谢帮助。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-04T09:37:57.540

```
System.getProperty("os.name");
System.getProperty("os.version");
System.getProperty("os.arch"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-09T21:58:42.880

你可以使用我写的实用程序类，你只需要在你的项目中复制以下类

[https://github.com/aurbroszniowski/os-platform-finder/blob/master/src/main/java/org/jsoftbiz/ utils/OS.java](https://github.com/aurbroszniowski/os-platform-finder/blob/master/src/main/java/org/jsoftbiz/utils/OS.java)

然后执行：

```
导入 org.jsoftbiz.utils.OS；

    操作系统 myOS = OS.getOs();

    myOS.getPlatformName()

    myOS.getName()
    myOS.getVersion()
    myOS.getArch()

```

# c# - C#：从代码访问调用层次结构

> ID：10008529
> 
> 赞同：0
> 
> 时间：2012-04-04T09:35:17.660
> 
> 标签：c#, callstack, control-flow-graph

在 Visual Studio 中，您可以显示单个函数的调用层次结构。我正在寻找的是相同的功能，但可以从 C# 代码内部访问。

是否可以通过自写的 Visual Studio 插件使用某些 API？或者我可以直接访问一些库来进行代码分析吗？

我通过一些**静态代码分析**得到程序的CFG就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:27:45.610

Found FxCop 符合我获取调用堆栈的需要。

它随 VS Professional 和 Ultimate 以及 windows SDK 的一部分一起提供。

我仍在寻找完整的控制流图实现，但这是另一个问题。

# sublimetext - 崇高的着色/突出显示文本

> ID：10008530
> 
> 赞同：1
> 
> 时间：2012-04-04T09:35:18.407
> 
> 标签：sublimetext

我通常使用 Sublime 作为**文本编辑器**来保存我的笔记，因为我喜欢 sublime 的感觉。我想知道是否有一种方法可以选择有选择地为我的一些文本（而不是全部内容）着色/突出显示。对于待办事项列表，这种着色可以帮助我轻松区分列表中已处理的项目和待处理的项目。区分重要笔记和非重要笔记等也是如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:43:29.507

我想你可以为它编写自己的语法......看看其他语法。

在你的情况下，它可能只是正则表达式匹配这样的东西：

```
- not done
+ done
~ important
* not important 
```

这很容易管理。

编辑语法的好处是结果在文件中立即可见，因此您可以查看您所做的是否有效。

# python - Python Base64 字符串比 Botan Base64 字符串短

> ID：10008537
> 
> 赞同：0
> 
> 时间：2012-04-04T09:35:42.027
> 
> 标签：python, base64, botan

我设法让 AES/Rijndael [256 位密钥/128 位块大小] 对称加密工作：用 pycrypto 加密并用 C++ 中的 Botan 解密。

但是，当我尝试在 python 中对加密结果进行 base64 编码时，生成的字符串比 Botan 使用 Base64_Encoder 生成的相同字符串短。例子：

Botan Base64：

> zjjxmJf5KPs183I/EvC+JuNbOdmbm4bWyhLsdZI8fuVUnKQAeSj0ivmKIYu7HBjM7gLgLV+xtSKcsCeQD7Gy4w==

Py-3k Base64：

> zjjxmJf5KPs183I/EvC+JuNbOdmbm4bWyhLsdZI8fuVUnKQAeSj0ivmKIYu7HBjM

您可以看到字符串在 64 个字符标记之前完全相同。如果我尝试在 Botan 中解密 Python base64 字符串，它会抱怨“输入不足”。

如何让 Botan 接受 Python base64 字符串？

-- 编辑 -- 在 Python 中解码 Botan base64 编码字符串时：

```
Botan Decoded:[b'\xce8\xf1\x98\x97\xf9(\xfb5\xf3r?\x12\xf0\xbe&\xe3[9\xd9\x9b\x9b\x86\xd6\xca\x12\xecu\x92<~\xe5T\x9c\xa4\x00y(\xf4\x8a\xf9\x8a!\x8b\xbb\x1c\x18\xcc\xee\x02\xe0-_\xb1\xb5"\x9c\xb0\'\x90\x0f\xb1\xb2\xe3']
Botan Encoded:[b'zjjxmJf5KPs183I/EvC+JuNbOdmbm4bWyhLsdZI8fuVUnKQAeSj0ivmKIYu7HBjM7gLgLV+xtSKcsCeQD7Gy4w=='] 
```

因此，Python pycrypto 结果：

```
Encryption result: b'\xce8\xf1\x98\x97\xf9(\xfb5\xf3r?\x12\xf0\xbe&\xe3[9\xd9\x9b\x9b\x86\xd6\xca\x12\xecu\x92<~\xe5T\x9c\xa4\x00y(\xf4\x8a\xf9\x8a!\x8b\xbb\x1c\x18\xcc'

Base64 encoded: b'zjjxmJf5KPs183I/EvC+JuNbOdmbm4bWyhLsdZI8fuVUnKQAeSj0ivmKIYu7HBjM 
```

Python似乎“省略”了一些东西。但是什么？

-- 编辑 2 --

当我尝试对 pycrypto 结果进行 base64decode 和解密时，Botan 抛出这个：

```
Botan exception caught: Buffered_Operation::final - not enough input 
```

所以 pycrypto 没有产生“足够”的输出，以至于它可以被 Botan 解密。

-- 编辑 3 --- 代码示例：

Python：更改了敏感信息。

```
import sys
import base64
import binascii
from Crypto.Cipher import AES

plaintext = "097807897-340284-083-08-8034-0843324890098324948"

hex_key = b'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
key = binascii.unhexlify( hex_key )
hex_iv = b'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
iv = binascii.unhexlify( hex_iv )

aes_enc_bytes = AES.new(key, AES.MODE_CBC, iv).encrypt( plaintext )
aes_enc = base64.encodebytes(aes_enc_bytes )

print( "Encrypted:[{}]".format( aes_enc ) )

aes_dec = AES.new(key, AES.MODE_CBC, iv).decrypt( binascii.a2b_base64( aes_enc ) )
print( "Decrypted:[{}]".format( aes_dec ) ) 
```

C++ (Qt + Botan)

```
void botanDecryptor::decrypt()
{
    Botan::SymmetricKey key( private_key );
    Botan::InitializationVector iv( iv_value );
    try
    {
        // Now decrypt...
        Botan::Pipe dec_pipe(new Base64_Decoder, get_cipher("AES-256/CBC", key, iv, Botan::DECRYPTION));

        dec_pipe.process_msg( ciphertext );

        string decrypted = dec_pipe.read_all_as_string();

        cout << "Decrypted:[" << decrypted << "]" << endl;
    }
    catch(Botan::Exception& e)
    {
        cout << "Botan exception caught: " << e.what() << endl;
        return;
    } 
```

-- 编辑 4 --

我决定尝试在 python 中解密 Botan 加密的、base64 编码的字符串，它可以工作，但它添加了一堆看起来像填充的东西：

```
Decrypted:[b'097807897-340284-083-08-8034-0843324890098324948\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10\x10'] 
```

然后我继续在base64编码之前将该填充添加到我的pycrypto结果中以生成以下内容，Botan拒绝解密;(

```
zjjxmJf5KPs183I/EvC+JuNbOdmbm4bWyhLsdZI8fuVUnKQAeSj0ivmKIYu7HBjMEBAQEBAQEBAQ\nEBAQEBAQEA== 
```

-- ANSWER -- （系统不允许我再过 5 个小时自行回答！）

我终于浏览了所有文档并找到了答案！需要指定要用于该模式的填充方法。我指定了 NoPadding 例如

```
Pipe dec_pipe(new Base64_Decoder, get_cipher("AES-256/CBC/NoPadding", key, iv, Botan::DECRYPTION)); 
```

和中提琴！输出与 pycrypto 完全匹配。供参考：[http://botan.randombit.net/filters.html][1]

[1]：Botan Docs：密码过滤器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:40:19.463

Base64 可以在末尾有一个填充（参见[https://en.wikipedia.org/wiki/Base64#Decoding_Base64_with_padding](https://en.wikipedia.org/wiki/Base64#Decoding_Base64_with_padding)）

显然，Botans 解码器不支持这一点。

也许 binascii 模块可以帮助你；或者，您可以自己添加/删除填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T10:01:55.873

我终于浏览了所有文档并找到了答案！

需要指定要用于该模式的填充方法。我指定了 NoPadding 例如

```
Pipe dec_pipe(new Base64_Decoder, get_cipher("AES-256/CBC/NoPadding", key, iv, Botan::DECRYPTION)); 
```

and voila! The output matches the pycrypto exactly. [Here](http://botan.randombit.net/filters.html)'s the reference.

# jquery - 如何将 URL 从 jQuery 对话框传递到 CKEditor 对话框

> ID：10008540
> 
> 赞同：1
> 
> 时间：2012-04-04T09:35:48.553
> 
> 标签：jquery, ajax, dialog, popup, ckeditor

**我正在尝试将*jQuery 对话框*中的 URL 传递回*CKEditor 对话框***。

CKEditor 和 jQuery 对话框都可以工作。

~~问题是我不知道如何将 CKEditorFuncNum 传递给服务器。~~ *我深入研究了源代码并搜索了“CKEditorFuncNum”并找到了一种访问此变量的方法。*

现在我得到错误：

```
Uncaught TypeError: Cannot call method 'getDialog' of undefined 
```

**这是工作流程：**

*   调用 CKEditor 对话框 [OK]
*   调用发出 ajax 请求的 jQuery 函数 [OK]
*   使用 ajax 请求的内容调用 jQuery 对话框 [OK]
*   关闭 jQuery 对话框并将 url 传递回 CKEditor 对话框（URL 字段）**<-这是问题所在**

*我将浏览按钮更改为调用 jQuery 函数（jQuery Popup）*

```
...
{
   type : 'button',
   id : 'browseInternal',
   label : 'jQuery Popup',
   onClick :function() {
     var funcNum = this.getDialog().getParentEditor()._.filebrowserFn;
     showJQueryPopUp(funcNum);
   }
}
... 
```

*jQuery 函数发出一个 get 请求，传递 CKEditorFuncNum 值。~~**如何访问 CKEditorFuncNum 值？**~~（见下文）*

```
function showJQueryPopUp(funcNum) {
    ajax_url = '../../../site_links?CKEditorFuncNum=' + funcNum;
    $.get(ajax_url, function(data) {
        $('#my_dialog_content').html(data);
        $('#my_dialog').dialog('open');
    });
}; 
```

*ajax 请求返回一个 url 列表和一些 JavaScript 代码：*

```
<a href="#" onclick="modify_link('http://www.google.com'); return false;">
  Google
</a>
<a href="#" onclick="modify_link('http://www.yahoo.com'); return false;">
  Yahoo
</a>
<a href="#" onclick="modify_link('http://www.microsoft.com'); return false;">
  Microsoft
</a>

<script type='text/javascript'>
  function modify_link(url) {
    window.parent.CKEDITOR.tools.callFunction(<%= @funcNum %>, url, '' );
  }
</script> 
```

调用*window.parent.CKEDITOR.tools.callFunction(...);* 导致以下错误：

```
Uncaught TypeError: Cannot call method 'getDialog' of undefined 
```

**我该如何解决这个冲突？**

**范围不正确？**

**如何获得*CKEditor 对话框*？**

**如何使用从 jQuery 对话框中选择的 url 填充 CKEditor 对话框的 URL 字段？**

我会很感激任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T19:58:52.377

好的，这是我解决它的方法：

使用将值传回对话框`window.parent.CKEDITOR.tools.callFunction...);`对我不起作用。所以我寻找另一种方法将一些值传递回 CKEditor 对话框。

`ref`我在调用 jQuery 对话框 () 之前定义了一个回调函数 ( `showJQueryPopUp()`)：

```
...
{
  type : 'button',
  id : 'browseInternal',
  label : 'jQuery Popup',
  onClick :function() {
      var dialog = this.getDialog();
      var selected_url = dialog.getContentElement('info', 'url').getValue();

      var ref = CKEDITOR.tools.addFunction(
          function(url)
          {
              dialog.getContentElement('info','url').setValue(url);
          });

      var funcNum = this.getDialog().getParentEditor()._.filebrowserFn;
      var editor_name = this.getDialog().getParentEditor().name;
      showJQueryPopUp(funcNum, editor_name, ref, selected_url);
  }
}
... 
```

我发出一个 ajax 请求，传递`funcNum`,`ref`和`selected_url`. （`ref`只是一个数字）

```
function showJQueryPopUp(funcNum, editor_name, ref, selected_url) {
    var ajax_url = '../../../site_links?CKEditorFuncNum=' + funcNum + '&ref=' + ref + '&selected_url=' + selected_url;
    $.get(ajax_url, function(data) {
        $('#my_dialog_content').html(data);
        $('#my_dialog').dialog('open');
    });
}; 
```

服务器端脚本提取参数并将其传递给视图（@ref）：

```
<a href="#" onclick="modify_link('http://www.google.com'); return false;">
  Google
</a>
<a href="#" onclick="modify_link('http://www.yahoo.com'); return false;">
  Yahoo
</a>
<a href="#" onclick="modify_link('http://www.microsoft.com'); return false;">
  Microsoft
</a>
<script type='text/javascript'>
  function modify_link(url) {
    CKEDITOR.tools.callFunction(<%= @ref %>, url);
  } 
```

# php - 如何控制哪些外部网站访问我的 Web 服务？

> ID：10008543
> 
> 赞同：1
> 
> 时间：2012-04-04T09:35:56.667
> 
> 标签：php, web-services, security

****我试图找出如何实现“最简单”的身份识别形式，以便我的合作伙伴网站访问我的网络服务以检索信息。****

我想确保只有我的合作伙伴有权检索此信息。没有敏感数据，因为数据将显示在我的合作伙伴网站上。但我不希望其他网站利用我的网络服务并在没有访问权限的情况下检索数据。

我知道我可以使用[HttpRequest 对象](http://www.google.no/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&ved=0CDQQFjAB&url=http://php.net/manual/en/class.httprequest.php&ei=fRR8T-epJvLE4gT8wf2pDg&usg=AFQjCNGqlmFygLjTp017KHbOWrb2T3cKKQ)获取 IP 地址，然后进行反向查找。但并非所有网站都有专用 IP 地址，并且 ISP 可能会为多个网站使用相同的 IP 地址。

我看不出将唯一标识符作为 URL 中的参数传递有何帮助，因为“任何人”都可以捕获该数据并自己使用它。但我会将其用作附加检查。

所以我想出的唯一“安全”方法是识别访问我网站的网站，然后根据我服务器上的列表进行控制。

我将不胜感激有关哪些方法“最安全”的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:51:52.510

最安全的方法是使用 SSL 通道并要求身份验证。如果身份验证通过，那么您可以将某种会话密钥（可以是随机生成的字符串）返回给客户端，并在每次请求时检查它。

如果您的服务不允许使用 SSL，那么您可以尝试为您的合作伙伴添加简单的用户名/密码身份验证，但在这种情况下，如果有人拦截您的通信，他们可以使用相同的凭据访问您的服务。

另一种方法是在每个请求上使用签名。例如，您可以为此目的使用 GPG。您的服务器持有所有合作伙伴的公钥。当合作伙伴想要向您的服务器进行查询时，他只需使用他的私钥签署他的请求，并且在收到您将能够安全地验证此请求是由特定合作伙伴发送的并且它 100% 不是伪造的。

**编辑**

对于 GPG，您需要安装名为[**gnupg**](http://www.php.net/manual/en/book.gnupg.php)的 PECL 模块。这是我们框架中利用 GPG 功能的类。

```
class GPG
{

    /**
     * Encrypt given data to one or more recipients
     * 
     * @param string $string
     * @param string|array $encryptKeyID
     * @param bollean $armour
     * @return string
     */
    public static function encrypt($string, $encryptKeyID, $armour = true){
        $gpg = new Crypt_GPG();

        if(is_array($encryptKeyID)){
            foreach($encryptKeyID as $keyId){
                $gpg->addEncryptKey($keyId);
            }
        }
        else{
            $gpg->addEncryptKey($encryptKeyID);
        }

        return $gpg->encrypt($string, $armour);
    }

    /**
     * Decrypt given data
     *  
     * @param string $string
     * @param string $keyPassword
     * @param string $keyID
     * @return string
     */
    public static function decrypt($string, $keyID, $keyPassword = null){
        $gpg = new Crypt_GPG();

        $gpg->addDecryptKey($keyID, $keyPassword);

        return $gpg->decrypt($string);
    }

    /**
     * Sign given string
     * 
     * @param string $string
     * @param string $keyID
     * @param string $keyPassword
     * @param boolean $mode
     * @param boolean $armor
     * @return string
     */
    public static function sign($string, $keyID, $keyPassword = null, $mode = null, $armor = true){
        $gpg = new Crypt_GPG();

        if($mode === null){
            $mode = Crypt_GPG::SIGN_MODE_CLEAR;
        }

        $gpg->addSignKey($keyID, $keyPassword);

        return $gpg->sign($string, $mode);
    }

    /**
     * Verify signature of given message
     * 
     * @param string $string
     * @return boolean
     */
    public static function verify($string){
        $gpg = new Crypt_GPG();
        $signatures = $gpg->verify($string);

        if ($signatures[0]->isValid()) {
            return true;
        } 
        else{
            return false;
        }
    }

    /**
     * Encrypt and sign given string to one or more recipients
     * 
     * @param string $string
     * @param string|array $encryptKeyID
     * @param string $signkeyID
     * @param string $signkeyPassword
     * @param boolean $mode
     * @param boolean $armor
     * @return string
     */
    public static function encryptAndSign($string, $encryptKeyID, $signkeyID, $signkeyPassword = null, $mode = null, $armor = true){
        $gpg = new Crypt_GPG();

        if($mode === null){
            $mode = Crypt_GPG::SIGN_MODE_CLEAR;
        }

        $gpg->addSignKey($signkeyID, $signkeyPassword);
        if(is_array($encryptKeyID)){
            foreach($encryptKeyID as $keyId){
                $gpg->addEncryptKey($keyId);
            }
        }
        else{
            $gpg->addEncryptKey($encryptKeyID);
        }

        return $gpg->encryptAndSign($string, $armor);
    }

    /**
     * Decrypt and verify given string
     * 
     * @param string $string
     * @param string $keyID
     * @param string $keyPassword
     * @return array|false
     */
    public static function decryptAndVerify($string, $keyID, $keyPassword = null){
        $gpg = new Crypt_GPG();

        $gpg->addDecryptKey($keyID, $keyPassword);

        $result = $gpg->decryptAndVerify($string);

        if(empty($result['data']) and empty($result['signatures'])){
            return false;
        }

        if(isset($result['signatures'][0])){
            $result['signature'] = $result['signatures'][0]->isValid();
            unset($result['signatures']);
        }

        return $result;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:35:46.740

Web 服务中的常见做法是使用公钥/私钥来验证 API 请求。一些使用它们的示例网站：[Google](https://developers.google.com/+/api/)、Twitter、[EventBrite](https://www.eventbrite.com/api/key)、[Last.FM](http://www.last.fm/api/account)、GitHub 等。

这些通过拥有每个人都知道的公共或消费者密钥来工作。然后为每个用户提供一个私钥或密钥以允许身份验证。使用这个很酷的事情是，因为您确切地知道谁在发出请求，所以您有能力跟踪活动并在被滥用时可能会限制请求的数量。

# python - 如何为作业编写测试用例

> ID：10008551
> 
> 赞同：-2
> 
> 时间：2012-04-04T09:36:30.373
> 
> 标签：python, testing

我的部分任务是为每个功能创建测试。这有点长，但我很困惑。我在这个函数下面放了一个链接，这样你就可以看到第一个代码看起来
很长，因为。

```
def load_profiles(profiles_file, person_to_friends, person_to_networks):
    '''(file, dict of {str : list of strs}, dict of {str : list of strs}) -> NoneType
    Update person to friends and person to networks dictionaries to include
    the data in open file.'''

    # for updating person_to_friends dict
    update_p_to_f(profiles_file, person_to_friends)
    update_p_to_n(profiles_file, person_to_networks) 
```

这是整个代码：[http](http://shrib.com/8EF4E8Z3) : //shrib.com/8EF4E8Z3，我通过 mainblock 对其进行了测试，它可以工作。这是我们提供的用于转换它们的文本文件（profiles_file）：http: [//shrib.com/zI61fmNP](http://shrib.com/zI61fmNP)

我如何通过鼻子运行测试用例，有什么样的测试结果？还是我不够具体？

进口鼻子进口a3_functions

def test_load_profiles_

if **name** == ' **main** ': nose.runmodule() 我走了那么远，我不知道我可以为这个函数测试什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:59:38.747

让我们假设您到目前为止编写的代码位于一个名为“mycode”的模块中。

编写一个名为 testmycode 的新模块。（即创建一个名为 testmycode.py 的 python 文件）

在那里，导入要测试的模块（mycode）

编写一个名为 testupdate() 的函数。

在该函数中，首先编写一个您希望有效的文本文件（使用 file.write）。然后让 update_p_to_f 更新它。使用 assert 验证它是否符合您的预期。这是一个读取文本文件的测试。

然后你可以编写第二个函数 testupdate_write()，让你的代码写入一个文件——然后验证它写入的内容是否正确。

要运行测试，请使用（在命令行上）

```
 nosetests -sx testmycode.py 
```

它将加载 testmycode 并运行它在那里找到的所有以 test 开头的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:05:15.820

您可能想要测试程序的整体输出是否正确，以及程序的各个部分是否正确。

*   @j13r 已经介绍了如何测试程序的整体正确性以完全运行。
*   您提到您有四个辅助函数。您可以分别为这些编写测试。

测试较小的代码片段很有帮助，因为与只测试整个代码相比，您可以以更多、更具体的方式测试每一段代码。

[unittest](http://docs.python.org/library/unittest.html)模块是一个执行测试的框架。

# ocaml - 改进 OCaml 为断言生成的 lambda 代码

> ID：10008552
> 
> 赞同：10
> 
> 时间：2012-04-04T09:36:40.047
> 
> 标签：ocaml

我想改进为“断言”OCaml 3.12.1 构造生成的 lambda 代码。这是一个例子：

```
let f x =
    assert (x = 4);
    assert (2 + x = 6);
    assert (x - x = 0);
    exit x 
```

上面的文件 longfilename.ml 代表了我希望改进 lambda 代码生成的大型 OCaml 模块。它编译为：

```
$ ocamlopt -S longfilename.ml
$ cat longfilename.s
...
    .data
    .quad   3072
_camlLongfilename__2:
    .quad   L100007
    .quad   9
    .quad   9
    .quad   2300
L100007: .L100007:
    .ascii  "longfilename.ml"
    .byte   0
    .data
    .quad   3072
_camlLongfilename__3:
    .quad   L100006
    .quad   7
    .quad   9
    .quad   2300
L100006: .L100006:
    .ascii  "longfilename.ml"
    .byte   0
    .data
    .quad   3072
_camlLongfilename__4:
    .quad   L100005
    .quad   5
    .quad   9
    .quad   2300
L100005: .L100005:
    .ascii  "longfilename.ml"
    .byte   0
... 
```

以上是非常多余的。每个断言可能来自的源文件的名称是重复的。罪魁祸首似乎是 bytecomp/translcore.ml：

```
let assert_failed loc =
  (* [Location.get_pos_info] is too expensive *)
  let fname = match loc.Location.loc_start.Lexing.pos_fname with
              | "" -> !Location.input_name
              | x -> x
  in
  let pos = loc.Location.loc_start in
  let line = pos.Lexing.pos_lnum in
  let char = pos.Lexing.pos_cnum - pos.Lexing.pos_bol in
  Lprim(Praise, [Lprim(Pmakeblock(0, Immutable),
          [transl_path Predef.path_assert_failure;
           Lconst(Const_block(0,
              [Const_base(Const_string fname);
               Const_base(Const_int line);
               Const_base(Const_int char)]))])])
;; 
```

`Const_base(Const_string fname)`从表面上看，给 命名，并使用编译时哈希表来存储和重用它似乎就足够了 。对于模块内优化，更改可能是可管理的（只要在每个编译单元处重置哈希表）。

我在这里有点超出我的深度，尤其是“在每个编译单元重置”部分。有什么提示吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T12:27:00.027

OCaml 编译器中已经有一种机制可以共享一些常量：请参阅`asmcomp/compilenv.ml`及其使用，特别是`structured_constants`在`asmcomp/cmmgen.ml`. 我不熟悉此代码，因此不确定为什么不共享您的特定用例，但似乎 lambda 代码中的 ;`Const_base (Const_string foo)`和`Const_immstring foo`; 后者是共享的，而前者可能不是。

我不知道预期的语义是什么`immstring`。编译器似乎在内部使用它来编译方法标签（`bytecomp/translclass.ml`），但不暴露给输入语言。

（我怀疑区别是因为字符串是可变的，所以共享用户可见的字符串将是可观察的并改变程序行为。但是字符串常量已经被 lambda 提升，因此用户已经可以观察到语义上不一致的共享。增加用户可见字符串的共享可能仍会因为兼容性中断而被拒绝。）

看看这些直接字符串是由常量发射代码 ( `asmcomp/cmmgen.ml:emit_constant`) 处理的方式，它们就像通常的字符串一样表示，所以也许你可以只修补编译器以使用`immstring`in`assert_failed`并且事情会起作用。

[由操作编辑]

更改`Const_base (Const_string fname)`为`Const_immstring fname`，虽然有点不兼容，但允许 OCaml 自行编译，编译 Frama-C 并且新的 Frama-C 通过其回归测试。在原始示例中，效果如下，这正是我们想要的结果：

```
$ cat longfilename.s 
...
    .data
    .quad   3072
_camlLongfilename__2:
    .quad   L100005
    .quad   9
    .quad   9
    .data
    .quad   3072
_camlLongfilename__3:
    .quad   L100005
    .quad   7
    .quad   9
    .data
    .quad   3072
_camlLongfilename__4:
    .quad   L100005
    .quad   5
    .quad   9
    .quad   2300
L100005: .L100005:
    .ascii  "longfilename.ml"
    .byte   0 
```

# php - 无法使用 PHP 驱动程序删除 MongoDB 中的文档

> ID：10008555
> 
> 赞同：1
> 
> 时间：2012-04-04T09:36:48.713
> 
> 标签：php, mongodb

我在 MongoDB 中使用整数的 _id 将“文章”保存为波纹管。当我想在php中删除带有_id的文章时，什么也没有发生。我使用的代码是：

```
$result = $db->arcitle->remove(
    array("_id" =>intVal(41)),
    array('safe' => true)
); 
```

我尝试过使用和不使用“安全”选项，但都不起作用。当我回显 $result 时，它是 bool(true)。

任何建议都非常感谢！

```
{ "_id" : 41,
  "when" : Date( 1333318420855 ),
  "publisher" : "5",
  "title" : "10 Steps To The Perfect Portfolio Website",
  "raw" : "",
  "preview" : "",
  "thumbnail" : "",
  "content" : [ 
    "{}" ],
  "tags" : null,
  "votes" : 0,
  "voters" : [],
  "comments" : [] } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:15:54.973

您在集合名称中有拼写错误。

```
$result = $db->arcitle->remove( 
```

应该是：

```
$result = $db->article->remove(array("_id" => 41)); 
```

安全选项不会确认某些内容已被删除，只会确认没有错误。删除不会触发错误删除不存在的内容。

```
> db.foo.remove({_id: "I don't exist"})
> db.getLastError()
null 
```

请注意，您不需要将整数重新转换为整数 - 如果您*确实*需要将输入转换为整数 - 使用 cast 语句：

```
$string = "42";
$int = (int) $string; // $int === 42 
```

# javascript - 使用 ASP 通过表单上传文件

> ID：10008556
> 
> 赞同：0
> 
> 时间：2012-04-04T09:37:17.863
> 
> 标签：javascript, jquery, jquery-plugins, asp-classic, vbscript

我在 .asp 页面中有一个简单的 html 表单。我想添加一个字段，让用户通过我的服务器/ftp 上的表单即时上传文件。请对我如何做到这一点有任何建议吗？

这是我用于 HTML 的代码

```
<form name="formUpload" id="formUpload" method="post" enctype="multipart/form-data" action="">
<table valign="top" align="left" bgcolor="PaleGoldenRod" width="300px" border="0" cellspacing="0" cellpadding="0">
<tr bgcolor="PaleGoldenRod" valign="top">
    <td width="300px">
        <input type="file" size="50" name="file1">
        <input type="submit" name="submit" value="Upload File">
    </td>
</tr></table></form> 
```

我不知道该怎么做，因为我从来没有做过这样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:58:35.877

您可以尝试使用以下 jQuery 插件来处理“即时”上传：

[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

但就像 Symeon 所说，您将需要一个 ASP Classic 组件来处理服务器上的文件上传。我用过[几次 FreeASPUpload](http://www.freeaspupload.net/freeaspupload/viewsource.asp)版本，工作起来很轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:51:05.050

在 ASP 中，您必须编写自己的上传处理程序来获取 http 流并将其写入磁盘 - 网络上有大量示例代码。我有一些，但是在这里发布有点大。

看看[这个](http://www.freeaspupload.net/freeaspupload/viewsource.asp) 或[这个](http://www.motobit.com/help/scptutl/upload.asp)

高温高压

# jquery - 滑动动画，不太完美

> ID：10008564
> 
> 赞同：0
> 
> 时间：2012-04-04T09:37:55.550
> 
> 标签：jquery, animation

[http://jsfiddle.net/UhNHW/](http://jsfiddle.net/UhNHW/)

我试图让一个色块滑入一个小块内的现有内容后面。它有问题，我需要让它在同一页面上的多个实例上工作。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:39:48.130

使用`mouseenter`and`mouseleave`代替`mouseover`and `mouseout`。

`mouseout`当光标进入父 div 的另一个子元素时触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:43:04.963

这是你想要的吗？

[http://jsfiddle.net/UhNHW/20/](http://jsfiddle.net/UhNHW/20/)

我基本上添加了一个检查是否`.box2`正在动画，如果是，则不带任何内容返回。

```
$(function() {
    $('.container').on('mouseenter', function() {
        var box = $(this).find('.box2');
        if(box.is(':animated')) return false;
        box.stop(true, true).animate({
            top: 0
        }, 150);
    });
    $('.container').on('mouseleave', function() {
        var box = $(this).find('.box2');
        if(box.is(':animated')) return false;
        box.stop(true, true).animate({
            top: 40
        }, 150);
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:42:10.623

像这样使用鼠标离开

```
 $('.container')
       .mouseover(function (){
            $('.box2').stop(true, true).animate({top:0}, 150);
       })
       .mouseleave(function (){
            $('.box2').stop(true, true).animate({top:40}, 150);
       })
       ; 
```

对于更多实例，试试这个

```
 $('.container').each(function() {
      var c = $(this);
      var box = c.find('.box2');

      c.          
          mouseover(function (){
            box.stop(true, true).animate({top:0}, 150);
          })
          .mouseleave(function (){
            box.stop(true, true).animate({top:40}, 150);
          });
  }); 
```

# javascript - 输入类型的更改不适用于 Google Chrome 和 Safari 浏览器

> ID：10008569
> 
> 赞同：0
> 
> 时间：2012-04-04T09:38:06.883
> 
> 标签：javascript, jquery, input-type-file

我正在尝试在单击按钮时更改隐藏到输入类型文件中的输入类型。该代码在 mozilla firefox 和 Internet Explorer 上运行良好，但不适用于 Google Chrome 和 Safari 浏览器。以下是我的代码：

```
<script type="text/javascript">
function hide()
{
    $(document).ready(function()
    {
        $('#att').hide();
        $('#change').hide();
        $('#change1').hide();
        document.getElementById('fileatt').type='file';

    })
} 
<input type="text" name="att" value="<?php echo $name; ?>" id="att" disabled="disabled" size="12" style="float:left;">
<input name="fileatt" id="fileatt" type="hidden" size="12" style="float:left;">
<input type="button" name="browse" id="change" value="Browse" style="float:left;">
<input type="button" id="change1" value="Change" onclick="hide()"> 
```

禁用的文本框保存从数据库中获取的先前值。并添加了值为“浏览”的按钮，使其看起来像输入类型的文件。单击更改按钮时，我希望隐藏文本字段和浏览按钮并显示输入类型文件。在 Firefox 和 Internet Explorer 上一切正常。但我面临的问题是，在 Chrome 和 Safari 上，文本框和浏览按钮成功消失，但没有出现输入类型文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:43:48.143

您无法更改 的`type`，`input`因此这是无效代码：

```
document.getElementById('fileatt').type='file'; 
```

使用两个元素，隐藏一个并显示另一个，切换它们。

在此处阅读更多内容：
[使用 jQuery 更改输入字段的类型](https://stackoverflow.com/q/1544317/601179)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:47:09.323

尝试类似：

```
function hide()
    {
        $(document).ready(function()
        {
            $('#att').hide();
            $('#change').hide();
            $('#change1').hide();
            $('#fileatt').attr('type', 'file');                //document.getElementById('fileatt').type='file';

        })
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:49:54.353

试试这个

```
$('#fileatt').attr('type', 'file'); 
```

代替

```
document.getElementById('fileatt').type='file'; 
```

# java - 使用查询时，Hibernate 生成的列别名会破坏 AliasToBeanResultTransformer

> ID：10008572
> 
> 赞同：2
> 
> 时间：2012-04-04T09:38:16.163
> 
> 标签：java, hibernate, alias, nativequery

我想要实现的是在以下列方式定义的查询上设置结果转换器：

```
String hqlQueryString = "select o.id as id, o.name as objectName from MyObject"; 
Class resultClass = MyObject.class;
Query query = session.createQuery(hqlQueryString).setResultTransformer(
        new new AliasToBeanResultTransformer(resultClass));
List result = query.list(); 
```

MyObject 看起来像这样：

```
public class MyObject {
    private int id;
    private String objectName;

    public int getId() {
        return id;
    }
    public void setId(int value) {
        this.id = value;
    }

    public String getObjectName() {
        return objectName;
    }
    public void setobjectName(String value) {
        this.objectName = value;
    }
} 
```

问题是，虽然我已经指定`id`并`objectName`作为我的别名，但正在执行的实际查询使用不同的别名。这会导致 my`AliasToBeanResultTransformer`无法构造`MyObject`，因为别名与属性名称不匹配。

是否可以通过编程方式获取hibernate生成的查询的别名（我可以将它们设置为bean结果转换器的别名）？我尝试使用`query.getReturnAliases()`，但它返回我在 HQL 中定义的别名，而不是 Hibernate 实际使用的别名。

我可以在`createQuery`语句中明确指定别名吗？目前我试图不使用标准来实现这一点，所以我很欣赏一种使用查询对象的方法，如果存在的话。

* * *

**更新**

尽管上述问题对标准 HQL 查询无效（请参阅注释），但在执行本机查询时它是有效的。具体来说 - 本机查询似乎将所有别名视为小写字符串（尽管可能在查询中引入了特定的大写字母）。在大写重要的情况下，这会导致`AliasToBeanResultTransformer`设置属性时失败。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T20:07:19.340

其实不需要实现另一个 `AliasToBeanResultTransformer`，你可以使用[addScalar(String columnAlias, Type type)](http://docs.jboss.org/hibernate/core/3.5/javadoc/org/hibernate/SQLQuery.html#addScalar%28java.lang.String,%20org.hibernate.type.Type%29)为原生 SQL 的列显式别名：

```
String nativeSQL = "select o.id as id, o.name as objectName from MyObject"; 
List<MyObject> resultList = session.createSQLQuery(nativeSQL)
        .addScalar("id" ,StandardBasicTypes.INTEGER)
        .addScalar("objectName",StandardBasicTypes.STRING)
        .setResultTransformer(new AliasToBeanResultTransformer(MyObject.class))
        .list(); 
```

然后，转换器将寻找一个`MyObject`类并期望它具有设置器`setId()`，并将`setObjectName()`返回的值填充到`MyObject` 实例中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T15:55:06.353

至于本机查询，没有涉及简单的解决方案。我不得不研究`AliasToBeanResultTransformer`该类的实现并在那里进行修复。我通过创建类的副本解决了这个问题，`AliasToBeanResultTransformer`并通过以下方式修改了该类的私有`initialize`方法：

```
public class CaseInsensitiveAliasToBeanResultTransformer {
    private void initialize(String[] aliases) {
        this.aliases = new String[ aliases.length ];
        setters = new Setter[aliases.length];
        for ( int i = 0; i < aliases.length; i++ ) {
            String alias = aliases[i];
            if (alias != null) {
                this.aliases[i] = alias;
                setters[i] = CaseInsensitiveSetter.getSetter(resultClass, alias);
            }
        }
        isInitialized = true;
    }
} 
```

这段代码的不同主要在于这一行`CaseInsensitiveSetter.getSetter(resultClass, alias)`，我在这里介绍了一个`CaseInsensitiveSetter`我将在下面描述的类。此类实现 Setter 接口并允许使用不区分大小写的匹配检索类的 setter 方法 - 因此这将允许我将小写查询别名绑定到我的结果类的正确成员。这是自定义设置器的代码（为简洁起见，仅显示重要的行）：

```
public class CaseInsensitiveSetter {

    public static Setter getSetter(Class<?> theClass, String propertyName) {

        Setter setter;

        if (theClass == Object.class || theClass == null) {
            setter = null;
        } else {
            setter = doGetSetter(theClass, propertyName);

            if (setter != null) {
                if (!ReflectHelper.isPublic(theClass, setter.getMethod())) {
                    setter.getMethod().setAccessible(true);
                }
            } else {
                setter = doGetSetter(theClass.getSuperclass(), propertyName);
                if (setter == null) {
                    Class<?>[] interfaces = theClass.getInterfaces();
                    for (int i = 0; setter == null && i < interfaces.length; i++) {
                        setter = doGetSetter( interfaces[i], propertyName);
                    }
                }
            }
            if (setter == null) {
                throw new PropertyNotFoundException( 
                    "Could not find a setter for property " + 
                    propertyName + " in class " + theClass.getName());
            }
        }
        return setter;
    }

    // The actual work is done here
    private static Setter doGetSetter(Class<?> resultClass, String propertyName) {

        Method[] methods = resultClass.getDeclaredMethods();
        for (int i = 0; i < methods.length; i++) {
            // only carry on if the method has 1 parameter
            if ( methods[i].getParameterTypes().length == 1 ) {
                String methodName = methods[i].getName();

                if (methodName.startsWith("set")) {
                    String testStdMethod = methodName.substring(3);
                    if (testStdMethod.equalsIgnoreCase(propertyName)) {
                        Setter result = new CustomSetter(
                            resultClass, methods[i], propertyName);
                        return result;
                    }
                }
            }
        }
        return null;
    }
} 
```

其来源是基于`BaseSetter`Hibernate 自带的类，但改为支持不区分大小写的匹配。尽管如此，这个类，以及 Hibernate 使用的原始类，由于大量使用反射而缺乏性能。

另外，请记住，如果结果类包含名称在不区分大小写的比较中相同的不同属性，则当前代码只会选择其中一个，并且可能无法按预期工作。

# javascript - tr 上的边框颜色不适用于 IE-7

> ID：10008575
> 
> 赞同：0
> 
> 时间：2012-04-04T09:38:21.083
> 
> 标签：javascript, jquery, css

我发现了一个特定于 IE-7 的问题。在 FF、Chrome、IE 8/9 上工作。问题是 IE 7 不支持 tr 上的边框颜色。CSS、Jquery、Javascript 中的任何解决方法都值得赞赏。[http://jsfiddle.net/VW84N/](http://jsfiddle.net/VW84N/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:42:33.077

一个简单的解决方法：http: [//jsfiddle.net/fcalderan/VW84N/4/](http://jsfiddle.net/fcalderan/VW84N/4/)无边界`<tr>`

只需使用这个 CSS

```
table { border-right: 1px red solid; border-left: 1px red solid; }
td { border-bottom: 1px red solid; }
tr:first-child td { border-top: 1px red solid;  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:43:08.893

可悲的是，但事实是：这完全是 IE。

我一直在使用这里描述的解决方法：

[http://csarven.ca/tr-border-trick-for-ie](http://csarven.ca/tr-border-trick-for-ie)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:42:41.453

这是一个众所周知的问题。作为一种解决方法，将边框应用于表格单元格而不是行本身。

例如，一个简单的解决方案是：

```
table { border-collapse: collapse; border-spacing: 0 } /* you have to do this */
table { border: 1px solid red } /* borders around the whole table */
table tr + tr td { border-top: 1px solid red } /* borders between rows */ 
```

**[看到它在行动](http://jsfiddle.net/defacer/txscq/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:44:11.530

你试过了吗

```
<tr style="border-color:yourcolor"><td>....</td></tr> 
```

# java - 命名查询可能性

> ID：10008581
> 
> 赞同：0
> 
> 时间：2012-04-04T09:38:39.240
> 
> 标签：java, jpa

我的客户表中有一个 customerName、MembershipNumber、nationality 和其他一些字段，如果我从上述三个中得到一个值。我只需要编写一个命名查询来从我得到的值中获取 Customer 表中的值。在 jpa 中不使用普通查询的情况下，是否有可能通过命名查询来做到这一点？...

```
 StringBuilder s=new StringBuilder();
 s.append("select c from customerdetail c where )
 if(customerName!=null)
 {
   s.append(" c.customerName = :customerName")
 }
else if(memberShipNumber!=null)
 {
   s.append(" c.memberShipNumber = :memberShipNumber")
 }
else if(nationality!=null)
 {
   s.append(" nationality = :nationality)
 } 
```

在这里，我使用具有三个条件的同一张表。那么是否有可能只编写一个命名查询或任何其他静态查询来满足 jpa 中的所有三个条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:03:31.577

尝试阅读[ObjectDB 的 JPA 查询手册](http://www.objectdb.com/java/jpa/query/jpql/select)。它提供了有关选择 JPA 实体及其自定义字段的不同变体的信息。它具有以 JPQL 表示的查询示例，因此使用 Criteria。是的，您可以使用 JPQL 定义 namedQuery，然后再使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:53:25.587

命名查询是静态的，它们的范围是持久性上下文，它们不能在运行时更改。

下面是使用 Criteria API 根据条件添加参数的示例。

```
CriteriaBuilder cb = em.getCriteriaBuilder();
CriteriaQuery<CustomerDetail> cq = cb.createQuery(CustomerDetail.class);
Metamodel m = em.getMetamodel();
EntityType<CustomerDetail> CustomerDetail_ = m.entity(CustomerDetail.class);
Root<CustomerDetail> detail = cq.from(CustomerDetail.class);

if(customerName != null)
cq.where(cb.equal(detail.get(CustomerDetail_.customerName), customerName));

if(memberShipNumber != null)
cq.where(cb.equal(detail.get(CustomerDetail_.memberShipNumber), memberShipNumber));

if(nationality != null)
cq.where(cb.equal(detail.get(CustomerDetail_.nationality), nationality));

cq.select(detail);
TypedQuery<CustomerDetail> q = em.createQuery(cq);
List<CustomerDetail> customerList= q.getResultList(); 
```

否则，您可以通过附加条件而不是命名查询来构建带有字符串的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:27:38.373

您可以将投影与 NamedQuery 一起使用，如果 MembershipNumber 是唯一的，则此示例将获取单个 customerName 字段，或者每个 customerName 都与 where 条件匹配的 List：

```
@Entity
@NamedQuery(name="getCustomerName", query="SELECT c.customerName FROM Customer c WHERE c.membershipNumber = :memNum")
public class Customer {
...
} 
```

然后你可以调用它：（em是你的EntityManager）

```
String customerName = em.createNamedQuery("getCustomerName")
.setParameter("memNum", myMembershipNumber)
.getSingleResult(); 
```

# javascript - 无法在谷歌浏览器中关闭 iframe

> ID：10008584
> 
> 赞同：1
> 
> 时间：2012-04-04T09:38:43.770
> 
> 标签：javascript, iframe, fancybox

我使用来自 fancybox 插件的 iframe。我可以使用 javascript 顺序关闭每个浏览器中的 iframe，除了 google chrome：

```
parent.$.fancybox.close(); 
```

或者：

```
parent.jQuery.fancybox.close(); 
```

在这种情况下，只是谷歌浏览器拒绝做他的工作。

控制台的错误信息是：

不安全的 JavaScript 尝试从具有 URL 文件:///C:/Users/exampleuser/Desktop/Version42/index.html# 的框架访问具有 URL 文件:///C:/Users/exampleuser/Desktop/index.html 的框架。域、协议和端口必须匹配。pidgin.js:357Uncaught TypeError：无法读取未定义的属性“fancybox”

如果这很重要，我的框架目前是本地的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T16:24:30.773

您的代码没有任何问题，但 Google Chrome 不会让您在本地使用 ajax 或 iframe（和 fancybox）。您需要将文件上传到服务器才能使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:42:16.817

尝试使用`parent.postMessage()`（[在此处描述](http://davidwalsh.name/window-iframe)）并在父级处监听`window.onmessage`以调用`$.fancybox.close()`。

# java - 如何在 NetBeans 中更改 JFrame 和 JLabel 之间的空间？

> ID：10008588
> 
> 赞同：2
> 
> 时间：2012-04-04T09:39:06.423
> 
> 标签：java, swing, user-interface, netbeans

布局是`FreeDesign`

我想在 NetBeans GUI 编辑器之间`JLabel`和中减少空间。`JFrame`但我不能，因为当我改变`JLabel`大小时，它会粘在`JFrame`边框上，所以在这种情况下，它们之间没有任何空间。

![在此处输入图像描述](../Images/c2a3fe45df52887ec6afdc250862196e.png)

当我按住`alt`键并更改`JLabel`大小时，`JFrame`大小会自动增加

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:41:54.207

*   将[EmptyBorders](http://docs.oracle.com/javase/tutorial/uiswing/components/border.html)添加到预期的[JComponent](http://docs.oracle.com/javase/tutorial/uiswing/components/index.html)

*   [顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)没有边框

*   [标准 LayoutManagers](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)并且`Customer LayoutManagers`不会受到与从调色板放置准备好的组件类似的限制，

*   您可以在项目属性中更改 built_in LayoutManager，我假设通过鼠标拖动定位组件的类似限制，使用 built_in GridBagLayout

# c - getaddrinfo()：名称解析暂时失败

> ID：10008592
> 
> 赞同：0
> 
> 时间：2012-04-04T09:39:23.337
> 
> 标签：c, linux, web-crawler

我正在用 C 编写一个 web-spider 程序。现在我得到了一个 url 列表，首先我需要使用 function: 获取服务器 IP 地址`getaddrinfo`，然后发生了荒谬的事情：

在url的列表中大约有400万个url，前6000个url处理得很好，然后突然后面所有的url都失败了！`getaddrinfo`为每个 url 返回“名称解析中的临时失败”。此外，如果我从第一个“坏”网址重新启动程序，它会再次工作。

我真的很困惑，卡了2天，感觉DNS运行良好，但是一些有限的资源已经用完了，谁能给我一些建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T09:46:48.860

您可能在 DNS 服务器中遇到了某种速率限制。与所有网络问题一样，运行 Wireshark：检查失败的 DNS 请求是否真的被发送，如果是，他们会得到什么回复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:47:15.943

你是在调用`[freeaddrinfo()](http://linux.die.net/man/3/getaddrinfo)`返回的地址信息吗？非常基本，但是由于您没有显示代码，因此这是首先想到的理论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:47:23.010

我想知道您的 ISP 是否以您的蜘蛛非常像蠕虫为由杀死了它。

考虑运行一个本地 DNS 递归器，例如[PowerDNS 递归器](http://doc.powerdns.com/built-in-recursor.html)，它可以提供已检索信息的缓存，*并*完全自行执行查找——它不依赖于 ISP 提供的 DNS 服务器，因此不太可能对您的 ISP 的设备会影响您的程序。

# c# - WPF TouchDown 事件延迟

> ID：10008598
> 
> 赞同：1
> 
> 时间：2012-04-04T09:39:35.763
> 
> 标签：c#, .net, wpf, xaml, wpf-4.0

很简单，我在 WPF4 中的 UserControl 上接收 TouchDown 事件时遇到了不可接受的延迟。我对事件堆栈的理解是 PreviewTouchDown 先发送，但仍然需要大约 300ms-500ms。代码如下。

```
<UserControl x:Class="MyButton"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" 
         d:DesignWidth="300" 
         Stylus.IsPressAndHoldEnabled="False"
         PreviewTouchDown="ProcessPreviewTouchDown"
         PreviewTouchUp="ProcessPreviewTouchUp">
</UserControl> 
```

我还在我的窗口代码中添加了以下内容：

```
num = GlobalAddAtom(atom);
if (num == 0L)
{
   return false;
}
if (enable)
{
   return (RemoveProp(hWnd, atom).ToInt64() == 1L);
}
else
{
   int TABLET_DISABLE_PRESSANDHOLD        = 0x00000001;
   int TABLET_DISABLE_PENTAPFEEDBACK      = 0x00000008;
   int TABLET_DISABLE_PENBARRELFEEDBACK   = 0x00000010;
   int TABLET_DISABLE_TOUCHUIFORCEOFF     = 0x00000200;
   int TABLET_DISABLE_FLICKS              = 0x00010000;

   int dwHwndTabletProperty = 0x1010019 |
                    TABLET_DISABLE_PRESSANDHOLD |
                    TABLET_DISABLE_PENTAPFEEDBACK | 
                    TABLET_DISABLE_TOUCHUIFORCEOFF |
                    TABLET_DISABLE_PENBARRELFEEDBACK |
                    TABLET_DISABLE_FLICKS;

   return (SetProp(hWnd, atom, new IntPtr(dwHwndTabletProperty)) == 1);
} 
```

这肯定会删除 UI，但不会导致明显的速度增加（即使 TABLET_DISABLE_PRESSANDHOLD 应该这样做，但我怀疑这与添加`Stylus.IsPressAndHoldEnabled="False"`到 XAML 相同）。

如果有人对如何使这种延迟消失有任何指示，我将不胜感激。

# php - Cronjob 没有运行 php 文档

> ID：10008599
> 
> 赞同：1
> 
> 时间：2012-04-04T09:39:36.553
> 
> 标签：php, shell, cron

我有一个调用 shell 脚本的 cronjob。在那个shell脚本里面，我有这些行：

```
php backup.php
(cat db-backup.sql ; uuencode db-backup.sql db-backup.sql) | mailx -s 'Database Daily Backup' mail@mail.com
rm -f db-backup.sql 
```

当我像这样 ./backup 手动运行这个 shell 脚本时，它会创建一个数据库备份文件，向我发送一封电子邮件并删除该文件。当 cron 调用此脚本时，它向我发送了一封空白电子邮件，并且它没有正确调用/运行 php 文件。这个问题的原因可能是什么？

注意：shell 脚本和 php 文件都有 -rwxr-xr-x 权限。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:43:36.053

`cron`可能没有在您的用户帐户具有写入权限的目录中执行脚本。（在我的系统上，`ls -l /proc/$(pidof cron)/cwd`显示当前工作目录是`/var/spool/cron/`。）

`cd /path/to/writable/directory`在该行之前放置一个明确的`php`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:43:18.067

创建 cron 脚本时使用完整路径。例如：

```
/usr/bin/php-cli backup.php 
```

# iphone - CorePlot：如何在图形中拖动图像

> ID：10008603
> 
> 赞同：0
> 
> 时间：2012-04-04T09:39:55.227
> 
> 标签：iphone, core-plot

在 CPTPlotspace 注释的帮助下，我在图表中添加了一张图像。代码如下

```
UIImage *image=[UIImage imageNamed:@"marker.gif"];
CPTImage *fillimage=[CPTImage imageWithCGImage:image.CGImage];
CPTBorderedLayer *imageLayer = [[CPTBorderedLayer alloc]init];
imageLayer.frame=CGRectMake(0, 0, 10, 10);
imageLayer.fill=[CPTFill fillWithImage:fillimage];  
CPTPlotSpaceAnnotation *imageannotation  = [[CPTPlotSpaceAnnotation alloc] initWithPlotSpace:graph.defaultPlotSpace anchorPlotPoint:anchorPoint];
imageannotation.contentLayer = imageLayer;
[graph.plotAreaFrame.plotArea addAnnotation:imageannotation]; 
```

结果在下面的链接中给出。

[结果](http://i.stack.imgur.com/0tPh2.png)

**现在，问题是如何沿着数据线拖动图像（图表上的黑色标记）？**

# android - 3.0 之前版本的 Android 操作栏批量选择

> ID：10008610
> 
> 赞同：7
> 
> 时间：2012-04-04T09:40:05.690
> 
> 标签：android, listview, android-actionbar, actionbarsherlock

我有一个`ListView`我想启用批量选择的。对于 android 3.0 及更高版本，我添加了一个模态多选`ListView`并设置了多选模式侦听器。

我怎样才能对 3.0 之前的 android 版本（有或没有第三方库）做同样的事情？我查看了 ActionBarSherlock，但我没有在任何示例中找到此功能，也没有在网络上搜索信息。

PS：当用户在我想要执行不同的动作中点击某项时`ListView`，需要长按进行批量选择（或单项选择）。

回到 API 7 的 3.0 之前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T01:39:40.787

这是您正在寻找的类型功能/结果吗？或者你需要单选按钮吗？如果这是您需要的类型，我将使用代码/详细信息编辑此回复。

![在此处输入图像描述](../Images/600332f63e0cd17b9567e88ed6de2658.png)

# joomla - 将 Joomla 1.7 站点移至新服务器。管理员工作正常。没有页面显示

> ID：10008614
> 
> 赞同：3
> 
> 时间：2012-04-04T09:40:21.717
> 
> 标签：joomla, migration

我刚刚将一个 Joomla 1.7 站点移到了新服务器上。

管理后端工作正常。Configuration.php 看起来不错。获取“在此服务器上未找到请求的文档。” 对于除主页以外的每个页面。

必须与数据库对话正常，否则我会收到错误消息。这可能是PHP的问题吗？

谢谢，

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:32:21.270

*   你清除 joomla 缓存了吗？
*   禁用页面和/或模块缓存。
*   禁用任何优化“加载速度”的插件。
*   尝试删除 SEF URL（Joomla! 和任何第 3 方扩展）。
*   如果您使用的是自定义 .htacess，请使用未修改的 joomla 。
*   禁用一些系统插件。
*   禁用主页中的模块。
*   您是否尝试过使用其他模板（网站）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T11:37:50.707

您在 /administrator/ 区域的全局配置设置中启用了搜索引擎友好 URL。您可能已经启用了使用 mod_rewrite 功能的选项，该功能会删除网址的 /index.php/ 部分。

此模式要求您在站点的根目录中放置 .htaccess 文件。您可能在开发服务器上正确配置了此文件，但可能在上线时忘记移动文件。一些 FTP 程序隐藏点文件（文件名中以点开头的文件），因此取决于您传输文件的方式（我猜测是手动使用 FTP 而不是 Akeeba 备份或类似文件）文件可能已丢失。查看 FTP 客户端的选项/首选项以获取显示/隐藏隐藏文件的选项。

如果失败 - 文件可能正确放置 - 但如果您在开发服务器上的子文件夹中进行开发，您会将 RewriteBase 行设置为您的 /sub-folder/

```
RewriteBase /sub-folder/ 
```

现在您已移至实时服务器，此行可能不正确。如果是这种情况，请将文件编辑为 Read

```
RewriteBase / 
```

可能是这些问题之一或其他问题 - 缺少 .htaccess 文件或不正确的 RewriteBase。第三个现在不太可能的选择是您的服务器没有启用 mod_rewrite - 但我认为这会导致服务器 500 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T11:05:16.427

检查您是否正在使用任何正在调用数据库的模块，并且在迁移后您没有更改该模块中的数据库详细信息。如果管理面板工作正常，那么我认为前端使用的某些模块存在问题。您可以通过禁用几个可疑模块来进行调试，并检查您的站点是否工作正常。否则，请提供有关您网站的更多信息，以便我进一步检查。

# android - 控制音频

> ID：10008622
> 
> 赞同：0
> 
> 时间：2012-04-04T09:41:05.127
> 
> 标签：android, audio

我有一个流式传输音频的应用程序。当用户开始流式传输时，我需要拥有音频：如果媒体播放器或收音机正在运行，我需要将其停止。

那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T22:08:09.460

是的，这是可能的。[您必须通过音频管理器](http://developer.android.com/reference/android/media/AudioManager.html "音频管理器")获得焦点。值得注意的是使用`requestAudioFocus()`

# android - Android MediaStore Crop 功能，如何让选择箭头始终可见？

> ID：10008623
> 
> 赞同：3
> 
> 时间：2012-04-04T09:41:10.453
> 
> 标签：android, image, crop, mediastore

我正在开发图片选择/裁剪程序并使用以下代码：

[http://www.androidworks.com/crop_large_photos_with_android/comment-page-1#comment-969](http://www.androidworks.com/crop_large_photos_with_android/comment-page-1#comment-969)

据我所知，我们设置属性时将附加内容添加到我们的意图中，如下面的代码。

为了改变选择区域，我们需要触摸边框，然后箭头变得可见，但我想做的是让它们始终可见，因为这样很难让用户理解。Instagram 的 Android 应用程序就是这样做的，所以我想有办法做到这一点。

谢谢。

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT, null);
                intent.setType("image/*");
                intent.putExtra("crop", "true");
                intent.putExtra("aspectX", aspectX);
                intent.putExtra("aspectY", aspectY);
                intent.putExtra("outputX", outputX);
                intent.putExtra("outputY", outputY);
                intent.putExtra("scale", scale);
                intent.putExtra("return-data", return_data);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri()); 
```

**编辑/解决方案：** 感谢@Renard，我找到了这样的解决方案：

我使用了这个画廊源代码： http: [//gitorious.org/0xdroid/packages_apps_gallery3d/trees/3c02f2877dc2f8f0b5c01d03fa2b487c040e4000](http://gitorious.org/0xdroid/packages_apps_gallery3d/trees/3c02f2877dc2f8f0b5c01d03fa2b487c040e4000)

我也尝试了一些其他画廊资源代码，但这个是最容易维护的。

如果签入 Highlightview.java 类的 draw() 函数，您只需要删除以下内容：

```
if (mMode == ModifyMode.Grow) 
```

当您这样做时，它会起作用，但是箭头在移动时会自行重复，为了避免您需要更改 moveBy() 方法的最后一行，即：

```
mContext.invalidate(invalRect); 
```

有了这个：

```
mContext.invalidate(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:53:54.570

是的，有办法。但这并不容易。

检查图库应用程序的源代码。特别是 HighlightView.java。您将看到负责绘制箭头的方法仅在用户触摸边框时被调用。所以你需要抓取 CropImage 活动的源代码。将它包含在您的应用程序中并修改 HighlightView.java 的 draw() 方法以始终调用 drawResizeDrawables()。

这样做的好处是，您可以确保裁剪意图将在所有设备上运行，即使它们具有不支持裁剪意图的自定义库。

# android - 应用程序在 HTC 上运行，但在 samsung for android 上不运行（与联系人相关）

> ID：10008626
> 
> 赞同：0
> 
> 时间：2012-04-04T09:41:23.450
> 
> 标签：android, android-contacts, contactscontract

我已经为 ContactsContract 创建了一个应用程序......我创建了一个微调器，它可以配置所有帐户，因此用户可以选择联系人类型，比如 gmail(com.google)、phoneBook 等等......

现在，如果我选择电话簿，那么联系人就会完美地添加到电话簿中。当我选择 gmail 选项时，它在我的 htc 手机上完美运行...联系人被添加，同步后，我也可以在我的 gmail 帐户中看到它。

但是，当我在任何三星手机上测试时，同样的事情，它并没有被添加到我的 gmail 的联系人中......

我很困惑...

任何帮助表示赞赏。提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:34:00.320

电话号码存储在自己的表中，需要单独查询。要查询电话号码表，请使用存储在 SDK 变量 ContactsContract.CommonDataKinds.Phone.CONTENT_URI 中的 URI。使用 WHERE 条件获取指定联系人的电话号码。

```
if (Integer.parseInt(cur.getString(
       cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
    Cursor pCur = cr.query(
    ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
    null, 
    ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
    new String[]{id}, null);
    while (pCur.moveToNext()) {
    // Do something with phones
    } 
    pCur.close();
} 
```

对 Android 联系人 SQLite 数据库执行第二次查询。根据存储在 ContactsContract.CommonDataKinds.Phone.CONTENT_URI 中的 URI 查询电话号码。联系人 ID 作为 ContactsContract.CommonDataKinds.Phone.CONTACT_ID 存储在电话表中，并且 WHERE 子句用于限制返回的数据。

电子邮件地址

查询电子邮件地址类似于电话号码。必须执行查询才能从数据库中获取电子邮件地址。查询存储在 ContactsContract.CommonDataKinds.Email.CONTENT_URI 中的 URI 以查询电子邮件地址表。

```
Cursor emailCur = cr.query( 
        ContactsContract.CommonDataKinds.Email.CONTENT_URI, 
        null,
        ContactsContract.CommonDataKinds.Email.CONTACT_ID + " = ?", 
        new String[]{id}, null); 
    while (emailCur.moveToNext()) { 
        // This would allow you get several email addresses
            // if the email addresses were stored in an array
        String email = emailCur.getString(
                      emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));
        String emailType = emailCur.getString(
                      emailCur.getColumnIndex(ContactsContract.CommonDataKinds.Email.TYPE)); 
    } 
    emailCur.close(); 
```

# c# - 强制文件下载头

> ID：10008628
> 
> 赞同：3
> 
> 时间：2012-04-04T09:41:36.973
> 
> 标签：c#, header, http-headers

我们在 ASP.NET 服务器上提供文件时遇到了一个奇怪的问题。

如果用户单击链接，我们希望有一个文件下载对话框。没有为 WMV 打开 WMP，没有为 PDF 打开 Adob​​e，等等。

为了强制执行此操作，我们使用以下 HTTP 处理程序来跳转 WMV、PDF 等。

```
 public void ProcessRequest(HttpContext context)
    {
        // don't allow caching
        context.Response.Cache.SetCacheability(HttpCacheability.NoCache);
        context.Response.Cache.SetNoStore();
        context.Response.Cache.SetExpires(DateTime.MinValue);

        string contentDisposition = string.Format("attachment; filename=\"{0}\"", Path.GetFileName(context.Request.PhysicalPath));
        string contentLength;

        using (FileStream fileStream = File.OpenRead(context.Request.PhysicalPath))
        {
            contentLength = fileStream.Length.ToString(CultureInfo.InvariantCulture);
        }

        context.Response.ContentType = "application/octet-stream";
        context.Response.AddHeader("Content-Disposition", contentDisposition);
        context.Response.AddHeader("Content-Length", contentLength);
        context.Response.AddHeader("Content-Description", "File Transfer");
        context.Response.AddHeader("Content-Transfer-Encoding", "binary");
        context.Response.TransmitFile(context.Request.PhysicalPath);
    } 
```

用提琴手嗅探，这些是发送的实际标头：

```
HTTP/1.1 200 OK
Cache-Control: no-cache, no-store
Pragma: no-cache
Content-Length: 8661299
Content-Type: application/octet-stream
Expires: -1
Server: Microsoft-IIS/7.5
Content-Disposition: attachment; filename="foo.wmv"
Content-Description: File Transfer
Content-Transfer-Encoding: binary
X-Powered-By: ASP.NET
Date: Wed, 04 Apr 2012 09:38:14 GMT 
```

但是，当我们单击 WMV 链接时，这仍然会打开 WMP，对于 Adob​​e Reader 也是如此，它仍然会在 IE 窗口中打开 Adob​​e Reader。

此问题似乎不会在 Firefox 上发生，但它会在 Windows 7（32 位）上的 IE8（32 位）上发生。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T09:47:17.630

代替

```
context.Response.ContentType = "application/octet-stream"; 
```

和

```
context.Response.ContentType = "application/force-download"; 
```

看看它做了什么，但不知道它是否适用于所有浏览器。

# c# - Entity Framework 4 - 如何使用连接器表插入记录 C#

> ID：10008630
> 
> 赞同：4
> 
> 时间：2012-04-04T09:41:37.350
> 
> 标签：c#, entity-framework, c#-4.0, entity-framework-4, linq-to-entities

我一直在编写一个非常大的项目，并且遇到了 EF4 和连接器表操作的问题。

假设我们有以下 SQL 表定义：

```
CREATE TABLE [dbo].[SQLEntity](
    [Id] [bigint] IDENTITY(1,1) NOT NULL,
    [Field1] [nvarchar](128) NOT NULL,
    [Field2] [nvarchar] (256),
    [DateAdded] [datetime] NOT NULL,
    CONSTRAINT [PK_SQLEntity] PRIMARY KEY CLUSTERED ( 
        [Id] ASC 
    ) WITH (
        PAD_INDEX = OFF, 
        STATISTICS_NORECOMPUTE = OFF, 
        IGNORE_DUP_KEY = OFF, 
        ALLOW_ROW_LOCKS = ON, 
        ALLOW_PAGE_LOCKS = ON
    ) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO

CREATE TABLE [dbo].[Util_LookupValues](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Description] [nvarchar](64) NOT NULL,
    CONSTRAINT [PK_Util_LookupValues] PRIMARY KEY CLUSTERED (
        [Id] ASC
    )WITH (
        PAD_INDEX = OFF, 
        STATISTICS_NORECOMPUTE  = OFF, 
        IGNORE_DUP_KEY = OFF, 
        ALLOW_ROW_LOCKS = ON, 
        ALLOW_PAGE_LOCKS  = ON
    ) ON [PRIMARY]
) ON [PRIMARY]
GO

CREATE TABLE [dbo].[Xref_EntityValues](
    [SQLEntityId] [bigint] NOT NULL,
    [LookupId] [int] NOT NULL,
    CONSTRAINT [PK_Xref_PositionBenefits] PRIMARY KEY CLUSTERED (
        [SQLEntityId] ASC,
        [LookupId] ASC
    )WITH (
        PAD_INDEX = OFF, 
        STATISTICS_NORECOMPUTE = OFF, 
        IGNORE_DUP_KEY = OFF, 
        ALLOW_ROW_LOCKS = ON, 
        ALLOW_PAGE_LOCKS = ON
    ) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[Xref_EntityValues] WITH CHECK ADD CONSTRAINT [FK_Xref_EntityValues_Entity] FOREIGN KEY([SQLEntityId])
REFERENCES [dbo].[SQLEntity] ([Id])
GO

ALTER TABLE [dbo].[Xref_EntityValues] CHECK CONSTRAINT [FK_Xref_EntityValues_Entity]
GO

ALTER TABLE [dbo].[Xref_EntityValues]  WITH CHECK ADD  CONSTRAINT [FK_Xref_EntityValues_Util_LookupValues] FOREIGN KEY([LookupId])
REFERENCES [dbo].[Util_LookupValues] ([Id])
GO

ALTER TABLE [dbo].[Xref_EntityValues] CHECK CONSTRAINT [FK_Xref_EntityValues_Util_LookupValues]
GO 
```

一旦基于这些表创建了域模型，您最终会得到两个实体：SqlEntity 和 Util_LookupValues。

此时，Util_LookupValues 是一个表，其值仅用于查找！Xref_EntityValues 是一个连接器表，它将实体对象与查找值联系在一起，允许我们在两者之间建立一对一的关系，保留查找表的“查找”功能。

Util_LookupValues 内容

```
Id   Description
---  ------------
1    Person
2    Car 
```

如果没有向域模型添加任何更改（让我们将此问题称为 DataEntities），则将 SQLEntity 与 PK 为 1 和 2 的 Util_LookupValues 对象绑定如下：

```
IEnumerable<Util_LookupValues> lookupValues = DataEntities.Util_LookupValues.Where( lv => lv.Id == 1 || lv.Id == 2);

SQLEntity entity = new SQLEntity();
entity.Field1 = "some field";
entity.Field2 = "another field";
entity.DateAdded = DateTime.Now;

foreach(Util_LookupValues val in lookupValues)
{
    entity.Util_LookupValues.Add(val);     
}

DataEntities.SQLEntities.Add(entity);
DataEntities.SaveChanges(); 
```

但问题是，该代码不仅向 Xref_EntityValues 添加值，还使用新键向 Util_LookupValues 添加了 1 和 2 的副本！生成的数据库如下：

```
SQL Entity:
Id  Field1       Field2         DateAdded
-- -------      ------         ----------
1   some field  another field  04/04/2012

Xref_EntityValues:
SQLEntityId   LookupId
-----------   ---------
1              3
1              4

and Util_LookupValues:
Id   Description
---  ------------
1    Person
2    Car
3    Person
4    Car 
```

如何使 Util_LookupValues 仅具有 2 条原始记录而 Xref_EntityValues 具有正确的外键？

```
Xref_EntityValues:
SQLEntityId   LookupId
-----------   ---------
1              1
1              2

Util_LookupValues:
Id   Description
---  ------------
1    Person
2    Car 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T13:03:58.643

这条线是...

```
IEnumerable<Util_LookupValues> lookupValues = DataEntities.Util_LookupValues
    .Where( lv => lv.Id == 1 || lv.Id == 2); 
```

……还有这条线……

```
DataEntities.SQLEntities.Add(entity); 
```

...使用*相同*`DataEntities`的上下文实例？您的代码片段表明，但也许它是“伪代码”。

如果实例不同，您会得到实体的重复，是的。

所以，你有三个选择：

*   确保上下文实例相同。
*   将返回`Util_LookupValues`的附加到第二个上下文：

    ```
    foreach(Util_LookupValues val in lookupValues)
    {
        DataEntities.Util_LookupValues.Attach(val);
        entity.Util_LookupValues.Add(val);     
    } 
    ```

*   根本不执行第一个查询。而是创建“存根”实体并附加它们：

    ```
     var val = new Util_LookupValues { Id = 1 };
        DataEntities.Util_LookupValues.Attach(val);
        entity.Util_LookupValues.Add(val);     

        val = new Util_LookupValues { Id = 2 };
        DataEntities.Util_LookupValues.Attach(val);
        entity.Util_LookupValues.Add(val); 
    ```

    这是因为 EF 只需要在将对象附加到上下文以建立新关系时知道主键属性值。

# arrays - 在经典的 ASP FOR EACH 循环中动态分配值

> ID：10008632
> 
> 赞同：2
> 
> 时间：2012-04-04T09:41:46.053
> 
> 标签：arrays, loops, asp-classic, foreach

我正在尝试为 FOR EACH 循环中的一系列变量赋值，但不断收到“类型不匹配”错误。

```
personOrder = "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15" 'order items displayed onscreen

personArray = split(personOrder, ",")

For each i in personArray
    imageArray(i) = objContentXML.selectSingleNode("/page/profile" & i & "/image").text
Next 
```

注意：我已将 var personOrder 设为列表，因为将来项目可能会更改顺序。

我认为在 FOR EACH 循环中分配数组值存在问题。令人讨厌的是，它在 FOR 循环中运行良好，但我正试图在未来证明我的代码。

如果这个问题太愚蠢，请道歉。我在 9 个月的尿布和打嗝后回到代码世界（更少的尿布，更多的打嗝）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:37:55.997

您在哪个语句中收到此错误？我可以执行以下代码而不会出现任何错误消息：

```
personOrder = "1,2,3,4,5,6,7,8,9,10,11,12,13,14,15" 'order items displayed onscreen

personArray = split(personOrder, ",")

dim imageArray
redim imageArray(uBound(personArray) + 1)

For each i in personArray
    imageArray(i) = i
Next 
```

您必须首先创建一个数组并声明要放入其中的项目数（使用 redim 更改维度）。

出于测试目的，我用一个简单的语句替换了您的 objectContentXML。

# httpclient - Jersey - 客户端安全和 Apache HttpClient

> ID：10008637
> 
> 赞同：0
> 
> 时间：2012-04-04T09:42:10.687
> 
> 标签：httpclient, jersey

我正在开发一个球衣休息客户端，我正在构建我的客户端和我的身份验证问题：

```
ClientConfig config = new DefaultClientConfig();
Client client = Client.create(config);
client.addFilter(new HTTPBasicAuthFilter("user", "password")); 
```

那么，当它像我写的那样工作时，为什么每个人，包括球衣文档，都参考 Apache HttpClient 来处理安全性？它似乎没有使用 Apache 框架。那么为什么要使用它呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T19:06:10.387

对，这适用于任何泽西岛客户。有没有人表示它只适用于 apache？在哪里？

# ios - 从 UIActionSheet 访问 UIPopoverController

> ID：10008640
> 
> 赞同：2
> 
> 时间：2012-04-04T09:42:23.340
> 
> 标签：ios, ipad, uipopovercontroller, uiactionsheet

我已经`UIActionSheet`从`UIPopopverController`. 如何`UIPopoverController`从`UIActionSheet`代表处获得`-(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:53:52.960

没有构建/内置方法可以做到这一点。

您可以考虑`popoverController`在委托上添加一个属性并在呈现弹出框之前对其进行设置。

# algorithm - 计算代码计算复杂度的软件/脚本？

> ID：10008645
> 
> 赞同：4
> 
> 时间：2012-04-04T09:42:33.670
> 
> 标签：algorithm

有谁知道任何程序/脚本可以自动计算代码的计算复杂度（例如方法函数）？

如果没有，是否有支持它的好方法（例如设计模式、算法等）？

我一般不会尝试这样做。

在大多数情况下，我知道输入、运行它的算法以及什么构成了暂停。我正在尝试以这种方式比较 2 种或更多算法。

例如

```
algo #1 - 2x^2 + 10x + 5

algo #2 - 5x^2 + 1x + 3 
```

两种算法都是 O(N^2)。但是算法#2 在短期内更好，而算法#1 从长远来看更好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:48:44.760

虽然不可能开发出一种算法来解决您的问题，但您可以编写一个算法来计算一个软件的复杂性，以获取一些示例输入。

我能找到参考的唯一软件叫做[Trend-Profiler](http://trend-prof.tigris.org/)。但是，如果您对算法比结果更感兴趣，这里有一篇论文[描述](http://www.stanford.edu/class/cs295/papers/trend-prof.pdf)了软件及其算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:27:41.177

用不同数量的输入对算法进行采样不是更好吗？通过为每个输入计算的时间，您可以近似复杂度函数，从而确定哪种算法更好以及在哪个阶段。

# linux - 如何设置别名以便更改目录并运行 sh 文件

> ID：10008648
> 
> 赞同：1
> 
> 时间：2012-04-04T09:43:02.710
> 
> 标签：linux, shell, command, alias

我想有一个别名可以做到：

```
>>>cd $MYUSR
>>>bin/start.sh -t 
```

我该如何设置？我使用 bash 外壳。

最好的祝福

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T09:45:03.603

显而易见的有什么问题？

```
alias example='cd $MYUSR ; ./bin/start.sh -t' 
```

要使其永久化，您可以将其添加到 ~/.bashrc

# jquery - 如何使用 jQuery 查找上一个表格单元格？

> ID：10008653
> 
> 赞同：8
> 
> 时间：2012-04-04T09:43:21.033
> 
> 标签：jquery, html-table, cell, selection

我有一个 4 col 表，n 行。

```
<table border="0">
<tr><td><p>Cell 1 text</p> </td><td>chkbox in cell2</td><td><p>Cell 3 text</p></td><td>chkbox in cell4</td>
</tr> 
</table> 
```

我想在单击复选框时查找并更改上一个单元格的 CSS。因此，如果单击任何行中的复选框，单元格 2 我需要对该行的内容采取行动，单元格 1，或者如果任何行，单元格 4 被单击，我需要对该行，单元格 3 采取行动。我已经尝试过`$(this).parents('td:first').find('p').text();` ，但这得到单元格 1 和单元格 3 我真的不想为所有单元格分配 id。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T09:45:35.587

要在标题中直接回答您的问题，您可以使用以下内容：

```
$('checkbox').change(function() {
   var prevCell = $(this).closest('td').prev();

   // do stuff with prevCell
}) 
```

至于您在描述中的问题......无法真正理解它们，您能否发布更详细的描述？

# objective-c - 如何在标签栏控制器视图上创建后退按钮？

> ID：10008654
> 
> 赞同：1
> 
> 时间：2012-04-04T09:43:21.123
> 
> 标签：objective-c, ios, tabs, controller, back-button

我想知道是否有人可以帮助我？我是 iOS 的新手，虽然我一直在搜索各种网站来寻找答案，但恐怕我还没有遇到过，但我觉得这可能只是我对这门语言的天真，所以如果这是一个问题，我深表歉意真的很简单的事情...

我有一个带有 3 个视图的选项卡栏控制器。在我的第一个选项卡上，我有一个按钮，单击该按钮时，我希望它转到第三个选项卡（确实如此）。但是，在第三个选项卡上，我想插入一个返回按钮，以便用户可以选择单击返回以返回到我的应用程序的主菜单。

谁能告诉我我该怎么做？我目前正在使用故事板，因为我对语言还不是很好，但任何帮助将不胜感激。

谢谢肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:53:24.897

您需要在视图中添加一个导航栏，并设置一个带有更改选项卡操作的栏按钮项。

请记住，标签控制器在多个应用程序中是标准的，用户习惯于点击标签来更改视图，而不是在视图中按下按钮。

可能值得您研究 UINavigationController

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-08T07:31:42.940

首先，您正在实现 UITabBarController。您不必创建后退按钮，因为用户可以通过点击标签栏在屏幕之间导航。第二件事，您可以使用 UINavigationController 来管理您的 viewControllers，当您通过方法 pushViewController:animated 推送 ViewController 时，Back 按钮将自动显示：

# grails - 延迟加载枚举类型时，Grails Gorm DDL 在 Postgres 9 中失败

> ID：10008657
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:43:47.550
> 
> 标签：grails, enums, grails-orm, postgresql-9.1

考虑 Grails 中的以下域类：

```
enum MyEnum { One, Two, Three }

class MyClass {
    Collection mys = []
    static hasMany = [
        mys: MyEnum
    ]
    static mapping = {
        mys lazy: true
    }
} 
```

在 Postgres 9.1 数据库上使用“create-drop”运行应用程序时，出现以下错误：

```
Unsuccessful: create table myclass_mys (myclass_id int8, myenum varchar(-1))
ERROR: syntax error at or near "-" 
```

如果我删除延迟映射，错误就会消失。但是，出于其他原因，懒惰是必要的。我目前的解决方法是创建没有延迟映射的数据库，然后更改域类，这在开发环境中非常烦人。

关于如何修复 gorm 映射以使 varchar(-1) 像往常一样成为 varchar(255) 的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T19:53:31.830

请注意，如果您在域类中使用枚举但未指定枚举的映射，则您的表将正常创建。虽然，如果您在映射块中提及您的枚举属性，您会遇到问题。有一种解决方法将这样的映射添加到您的属性：

```
sqlType: "varchar(20)" 
```

所以你可以试试，但我不知道这是否适用于 joinTable。查看这个 jira 问题以获取更多信息：http: [//jira.grails.org/browse/GRAILS-8444](http://jira.grails.org/browse/GRAILS-8444)

# jquery - jquery没有方法错误

> ID：10008659
> 
> 赞同：1
> 
> 时间：2012-04-04T09:43:57.317
> 
> 标签：jquery, jquery-selectors, href, addclass

我正在编写一个 ajax 导航脚本。我发现我可以通过使用将当前部分突出显示到菜单中

```
('a[href=' + document.location.hash + ']').addClass('current'); 
```

但我收到此错误：

```
Object a[href="#home"] has no method 'addClass' 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:47:24.600

缺少一些东西：

```
$('a[href="' + document.location.hash + '"]').addClass('current'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:50:07.390

你忘了`$`牌子？

尝试：

```
$('a[href=' + document.location.hash + ']').addClass('current'); 
```

如果没有`$`，JavaScript 解析器会认为它是一个字符串对象。

# php - 找不到 Codeigniter 2.1 控制器

> ID：10008662
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:44:06.477
> 
> 标签：php, codeigniter, http-status-code-404, codeigniter-2

我有控制器`baner`，当我尝试运行它（运行上传功能`http://localhost/010/baner/upload_img`）时，出现 404 错误：

> 未找到您所请求的页面

这里有什么问题？

控制器：

```
<?php 
if (!defined('BASEPATH'))
exit('No direct script access allowed');

class Upload_Baner extends CI_Controller {

    protected $path_img_upload_folder;
    protected $path_img_thumb_upload_folder;
    protected $path_url_img_upload_folder;
    protected $path_url_img_thumb_upload_folder;

    protected $delete_img_url;

  function __construct() {
        parent::__construct();       

        $this->setPath_img_upload_folder("public/img/promotions/");
        $this->setPath_img_thumb_upload_folder("public/img/promotions/thumbnails/");

        $this->setDelete_img_url(base_url() . 'upload_baner/deleteImage/');

        $this->setPath_url_img_upload_folder(base_url() . "public/img/promotions/");
        $this->setPath_url_img_thumb_upload_folder(base_url() . "public/img/promotions/thumbnails/");
  }

  public function upload_img() {

        //Format the name
        $name = $_FILES['userfile']['name'];
        $name = strtr($name, 'ÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃÃ Ã¡Ã¢Ã£Ã¤Ã¥Ã§Ã¨Ã©ÃªÃ«Ã¬Ã­Ã®Ã¯Ã°Ã²Ã³Ã´ÃµÃ¶Ã¹ÃºÃ»Ã¼Ã½Ã¿', 'AAAAAACEEEEIIIIOOOOOUUUUYaaaaaaceeeeiiiioooooouuuuyy');

        // replace characters other than letters, numbers and . by _
        $name = preg_replace('/([^.a-z0-9]+)/i', '_', $name);

        //Your upload directory, see CI user guide
        $config['upload_path'] = $this->getPath_img_upload_folder();

        $config['allowed_types'] = 'gif|jpg|png|JPG|GIF|PNG';
        $config['max_size'] = '1000';
        $config['file_name'] = $name;

       //Load the upload library
        $this->load->library('upload', $config);

       if ($this->do_upload()) {

            //If you want to resize 
            $config['new_image'] = $this->getPath_img_thumb_upload_folder();
            $config['image_library'] = 'gd2';
            $config['source_image'] = $this->getPath_img_upload_folder() . $name;
            $config['create_thumb'] = FALSE;
            $config['maintain_ratio'] = TRUE;
            $config['width'] = 193;
            $config['height'] = 94;

            $this->load->library('image_lib', $config);

            $this->image_lib->resize();

           $data = $this->upload->data();

            //Get info 
            $info = new stdClass();

            $info->name = $name;
            $info->size = $data['file_size'];
            $info->type = $data['file_type'];
            $info->url = $this->getPath_img_upload_folder() . $name;
            $info->thumbnail_url = $this->getPath_img_thumb_upload_folder() . $name; //I set this to original file since I did not create thumbs.  change to thumbnail directory if you do = $upload_path_url .'/thumbs' .$name
            $info->delete_url = $this->getDelete_img_url() . $name;
            $info->delete_type = 'DELETE';

           //Return JSON data
           if (IS_AJAX) {   //this is why we put this in the constants to pass only json data
                echo json_encode(array($info));
                //this has to be the only the only data returned or you will get an error.
                //if you don't give this a json array it will give you a Empty file upload result error
                //it you set this without the if(IS_AJAX)...else... you get ERROR:TRUE (my experience anyway)
            } else {   // so that this will still work if javascript is not enabled
                $file_data['upload_data'] = $this->upload->data();
                echo json_encode(array($info));
            }
        } else {

           // the display_errors() function wraps error messages in <p> by default and these html chars don't parse in
           // default view on the forum so either set them to blank, or decide how you want them to display.  null is passed.
            $error = array('error' => $this->upload->display_errors('',''));

            echo json_encode(array($error));
        }

       }  

  public function do_upload() {

        if (!$this->upload->do_upload()) {

            return false;
        } else {
            //$data = array('upload_data' => $this->upload->data());

            return true;
        }
     }

//Function Delete image
    public function deleteImage() {

        //Get the name in the url
        $file = $this->uri->segment(3);

        $success = unlink($this->getPath_img_upload_folder() . $file);
        $success_th = unlink($this->getPath_img_thumb_upload_folder() . $file);

        //info to see if it is doing what it is supposed to 
        $info = new stdClass();
        $info->sucess = $success;
        $info->path = $this->getPath_url_img_upload_folder() . $file;
        $info->file = is_file($this->getPath_img_upload_folder() . $file);
        if (IS_AJAX) {//I don't think it matters if this is set but good for error checking in the console/firebug
            echo json_encode(array($info));
        } else {     //here you will need to decide what you want to show for a successful delete
            var_dump($file);
        }
    }

    public function get_files() {

        $this->get_scan_files();
    }

    public function get_scan_files() {

        $file_name = isset($_REQUEST['file']) ?
                basename(stripslashes($_REQUEST['file'])) : null;
        if ($file_name) {
            $info = $this->get_file_object($file_name);
        } else {
            $info = $this->get_file_objects();
        }
        header('Content-type: application/json');
        echo json_encode($info);
    }

    protected function get_file_object($file_name) {
        $file_path = $this->getPath_img_upload_folder() . $file_name;
        if (is_file($file_path) && $file_name[0] !== '.') {

            $file = new stdClass();
            $file->name = $file_name;
            $file->size = filesize($file_path);
            $file->url = $this->getPath_url_img_upload_folder() . rawurlencode($file->name);
            $file->thumbnail_url = $this->getPath_url_img_thumb_upload_folder() . rawurlencode($file->name);
            //File name in the url to delete 
            $file->delete_url = $this->getDelete_img_url() . rawurlencode($file->name);
            $file->delete_type = 'DELETE';

            return $file;
        }
        return null;
    }

       protected function get_file_objects() {
        return array_values(array_filter(array_map(
             array($this, 'get_file_object'), scandir($this->getPath_img_upload_folder())
                   )));
    }

    public function getPath_img_upload_folder() {
        return $this->path_img_upload_folder;
    }

    public function setPath_img_upload_folder($path_img_upload_folder) {
        $this->path_img_upload_folder = $path_img_upload_folder;
    }

    public function getPath_img_thumb_upload_folder() {
        return $this->path_img_thumb_upload_folder;
    }

    public function setPath_img_thumb_upload_folder($path_img_thumb_upload_folder) {
        $this->path_img_thumb_upload_folder = $path_img_thumb_upload_folder;
    }

    public function getPath_url_img_upload_folder() {
        return $this->path_url_img_upload_folder;
    }

    public function setPath_url_img_upload_folder($path_url_img_upload_folder) {
        $this->path_url_img_upload_folder = $path_url_img_upload_folder;
    }

    public function getPath_url_img_thumb_upload_folder() {
        return $this->path_url_img_thumb_upload_folder;
    }

    public function setPath_url_img_thumb_upload_folder($path_url_img_thumb_upload_folder) {
        $this->path_url_img_thumb_upload_folder = $path_url_img_thumb_upload_folder;
    }

    public function getDelete_img_url() {
        return $this->delete_img_url;
    }

    public function setDelete_img_url($delete_img_url) {
        $this->delete_img_url = $delete_img_url;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:47:38.203

您的控制器名为 Upload_Baner，因此除非您定义了将 baner 映射到 upload_Baner 的路由，否则这将不起作用。这个网址有效吗？：

```
http://localhost/010/upload_Baner/upload_img 
```

这就是您当前的控制器在没有路由的情况下将映射到的内容。

# css - MSIE中奇怪的1px偏移：after和:before

> ID：10008666
> 
> 赞同：0
> 
> 时间：2012-04-04T09:44:36.137
> 
> 标签：css

我正在尝试构建一个带有“负边界半径”的标签系统（我缺乏更好的描述）。

我使用`:after`并`:before`在“外部弯曲”处创建了一些人造边框。它运行良好，但在 MSIE 中有一些奇怪的行为。通常我`top:5px`在`:after`and上`:before`，但是在 IE 中我必须添加一个额外的像素（结果在 中`top: 6px`）（在 IE8 中参见：左右的水平线不应该是可见的）

那会是什么？

[http://jsfiddle.net/rhGZw/3/](http://jsfiddle.net/rhGZw/3/)

```
<div class="test"><div>foo</div></div> 
```

* * *

```
body {
    background: gold;
    margin: 10px;
}
.test {
    display: inline-block;
    height: 30px;
    overflow: hidden;
}
.test > div {
    background: white;
    border-top-left-radius: 5px;
    border-top-right-radius : 5px;
    height: 20px;
    padding: 5px;
    display: inline-block;
}
.test:before {
    content: '';
    width: 5px;
    height: 20px;
    position: relative;
    top: 5px;
    margin-right: -5px;
    background: none;
    border-color: white;
    border-style: solid;
    border-width: 0px;
    border-bottom-width:5px;
    border-right-width:5px;
    border-bottom-right-radius: 10px;
    display: inline-block;
    vertical-align: middle;
    z-index: -1;
}

.test:after {
    content: '';
    width: 5px;
    height: 20px;
    position: relative;
    top: 5px;
    margin-left: -5px;
    background: none;
    border-color: white;
    border-style: solid;
    border-width: 0px;
    border-bottom-width:5px;
    border-left-width:5px;
    border-bottom-left-radius: 10px;
    display: inline-block;
    vertical-align: middle;
    z-index: -1;
}

​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T10:05:30.243

我自己设法得到了错误。它是垂直对齐：中间与 :after 和 :before 导致 1px 偏移

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:43:50.473

白色边框在 Firefox 和 Opera 中也可见，而不仅仅是 IE。但是，它们融合到边界半径中。

[在http://jsfiddle.net/CrxQG/](http://jsfiddle.net/CrxQG/)和[http://jsfiddle.net/CrxQG/1/](http://jsfiddle.net/CrxQG/1/)上很容易看到，分别删除了黑色边框颜色和边框半径。

# hibernate - 交易期间版本未增加

> ID：10008668
> 
> 赞同：2
> 
> 时间：2012-04-04T09:44:47.550
> 
> 标签：hibernate, jpa, optimistic-locking

我有以下情况：

1.  交易开始
2.  person.getVersion() --> 返回 0
3.  person.setName("脏");
4.  session.save(人);
5.  person.getVersion() --> 返回 0
6.  session.flush()
7.  person.getVersion() --> 返回 1
8.  事务提交

在不实际强制会话刷新或事务提交的情况下，我该怎么做才能在步骤 4 中获取更新版本？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T14:46:39.393

很简单：做

```
person.getVersion() + 1 
```

你会微笑吗？但这正是 hibernate 对 version 属性所做的事情。

在更新到数据库的那一刻，hibernate 从数据库中重新加载记录，并将版本值与 java 对象的版本值进行比较。如果它们相同，则休眠将版本值加一并将新记录存储到数据库中，否则将引发异常。这个想法是，如果任何其他应用程序同时修改了记录，修改后的值不能被覆盖，我们的应用程序必须重新加载数据并修改新值。

当 java 对象中的任何值被修改时，当然 hibernate 可以在第一次修改版本值。但是每次修改值时，hibernate都必须检查对象是否被修改（新值可以与旧值相同；在这种情况下不需要更新），并且它必须标记版本值是否已经增加与否。如果你没有赢得任何东西，为什么要这样做？

顺便说一句，hibernate 不会在 save() 的时刻更新数据库记录，而是在 flush() 或 commit() 的时刻，因为这允许重新排序数据库语句以获得更好的性能。

# sql - 如何在 RDBMS 中强制执行非重叠范围（事务安全）？

> ID：10008669
> 
> 赞同：2
> 
> 时间：2012-04-04T09:44:52.407
> 
> 标签：sql, transactions, range, rdbms, overlapping

我最近发现了 postgres 排除约束，这完全可以满足我的要求（好吧，至少现在是时间范围，因为数字范围类型还不存在）。

据我了解，oracle 和其他 RDBMS 没有等效的功能来排除约束。所以你唯一的机会让插入这样一个表事务安全是锁定表？还是有其他方法？

编辑：（@ Clodoaldo）当两个事务插入冲突记录时，postgres 确实使用行级锁。我的问题是：如果 RDBMS 不具有排除约束功能，我认为如果您想要不重叠的范围和事务安全性，除了锁定整个表之外别无其他机会 - 对吗？或者有没有我不知道的方法？

在工作中，有几次我不得不设计不重叠范围的表格。我不知道任何事务安全的方式来强制数据库中的数据一致性。当我读到排除约束时，我认为它解决了这个问题，但它是非标准的，所以我的老板不太热衷于使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-19T05:36:56.797

如果您使用 PostgreSQL，它会为它们提供多种时间范围类型和[不重叠的唯一约束](http://www.postgresql.org/docs/9.4/static/rangetypes.html#RANGETYPES-CONSTRAINT)。

# css - div中的垂直对齐图像

> ID：10008670
> 
> 赞同：61
> 
> 时间：2012-04-04T09:44:53.607
> 
> 标签：css, image, vertical-alignment

我在 div 中的图像垂直对齐有问题

```
.img_thumb {
    float: left;
    height: 120px;
    margin-bottom: 5px;
    margin-left: 9px;
    position: relative;
    width: 147px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 3px;
}

.img_thumb img {
    display: block;
    margin-left: auto;
    margin-right: auto;
    vertical-align: middle;
}

<div class="img_thumb">
    <a class="images_class" href="large.jpg" rel="images"><img src="small.jpg" title="img_title" alt="img_alt" /></a>
</div> 
```

据我所知，我需要“显示：块；” 将图像定位在中心并且有效。同样在教程中，我找到了很多答案，但它们并不“有用”，因为我的所有图像都不在同一高度！

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-04-04T10:08:55.293

如果容器中有固定高度，则可以将 line-height 设置为与 height 相同，并且它将垂直居中。然后只需将 text-align 添加到水平居中即可。

这是一个例子：http: [//jsfiddle.net/Cthulhu/QHEnL/1/](http://jsfiddle.net/Cthulhu/QHEnL/1/)

**编辑**

您的代码应如下所示：

```
.img_thumb {
    float: left;
    height: 120px;
    margin-bottom: 5px;
    margin-left: 9px;
    position: relative;
    width: 147px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 3px;
    line-height:120px;
    text-align:center;
}

.img_thumb img {
    vertical-align: middle;
} 
```

无论图像大小如何，图像都将始终水平和垂直居中。这里还有 2 个不同尺寸图像的示例：

[http://jsfiddle.net/Cthulhu/QHEnL/6/](http://jsfiddle.net/Cthulhu/QHEnL/6/)

[http://jsfiddle.net/Cthulhu/QHEnL/7/](http://jsfiddle.net/Cthulhu/QHEnL/7/)

**更新**

现在是 2016 年（未来！），看起来有些事情正在发生变化（终于！！）。

早在 2014 年，[微软就宣布](https://blogs.msdn.microsoft.com/ie/2014/08/07/stay-up-to-date-with-internet-explorer/)将停止在所有版本的 Windows 中支持 IE8，并鼓励所有用户更新到 IE11 或 Edge。好吧，这应该在下周二（1 月 12 日）发生。

为什么这很重要？随着**IE8 的宣布死亡**，我们终于可以开始使用**CSS3**魔法了。

话虽如此，这是一种水平和垂直对齐元素的更新方法：

```
.container {
    position: relative;
}

.container .element {
   position: absolute;
   left: 50%;
   top: 50%;
   transform: translate(-50%, -50%);
} 
```

使用这种`transform: translate();`方法，您甚至不需要在容器中设置固定高度，**它是完全动态的**。你的元素有固定的高度或宽度？你的容器也是？不？没关系，它将始终居中，因为所有居中属性都固定在孩子身上，它独立于父母。谢谢CSS3。

如果只需要在一维上居中，可以使用`translateY`或`translateX`。试一试，你就会知道它是如何工作的。此外，尝试更改 的值`translate`，您会发现它对许多不同的情况很有用。

在这里，有一个新的小提琴：[https ://jsfiddle.net/Cthulhu/1xjbhsr4/](https://jsfiddle.net/Cthulhu/1xjbhsr4/)

有关 的更多信息`transform`，[这里有一个很好的资源](https://css-tricks.com/almanac/properties/t/transform/)。

快乐编码。

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2016-06-12T09:17:35.993

老问题，但**现在** [CSS3](http://www.w3schools.com/css/css3_flexbox.asp)使垂直对齐变得非常**简单！**

只需添加到`<div>`这个 css：

```
display:flex;
align-items:center;
justify-content:center; 
```

* * *

[JSFiddle 演示](https://jsfiddle.net/fm8sr8dz/)

**现场示例：**

```
.img_thumb {
    float: left;
    height: 120px;
    margin-bottom: 5px;
    margin-left: 9px;
    position: relative;
    width: 147px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 3px;
    display:flex;
    align-items:center;
    justify-content:center;
}
```

```
<div class="img_thumb">
    <a class="images_class" href="http://i.imgur.com/2FMLuSn.jpg" rel="images">
       <img src="http://i.imgur.com/2FMLuSn.jpg" title="img_title" alt="img_alt" />
    </a>
</div>
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T10:34:49.523

当您需要为内联和块元素垂直对齐中心时，您不需要定义定位，您可以采用以下想法：-

```
inline-elements :- <img style="vertical-align:middle" ...>
                   <span style="display:inline-block; vertical-align:middle"> foo<br>bar </span>  

block-elements :- <td style="vertical-align:middle"> ... </td>
                  <div style="display:table-cell; vertical-align:middle"> ... </div> 
```

看演示：- [http://jsfiddle.net/Ewfkk/2/](http://jsfiddle.net/Ewfkk/2/)

# c# - 将字符串列表作为参数传递给控制台应用程序

> ID：10008671
> 
> 赞同：2
> 
> 时间：2012-04-04T09:44:58.533
> 
> 标签：c#, windows, parameters, arguments, console-application

我需要将字符串列表作为参数传递给控制台应用程序（使用 C# 开发）。控制台应用程序以 System.Diagnostics.Process.Start 启动，例如：

```
string fname = "testDoc";
List<string> myList;  //initialized elsewhere

Process console = Process.Start("Client.exe", "-filename:"+fname+ " -list:"+myList); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:12:53.703

跑步

```
Process console = Process.Start("Client.exe", "-filename:" + fname + " -list:" + myList) 
```

将执行 myList.ToString() 并将转换为：

```
Client.exe -filename:testDoc -list:System.Collections.Generic.List`1[System.String] 
```

这不是你想要实现的。尝试

```
Process console = Process.Start("Client.exe", "-filename:" + fname + " -list:" + String.Join(",", myList)) 
```

或类似的东西。

**更新**

当然，您可能需要考虑一些更文明的方法将数据传递到该进程。常见的方法包括：

*   数据库
*   文件系统（文件）
*   WCF

**更新**

鉴于评论中提供的上下文，我会选择在服务器上运行一个完全独立的 Windows 服务（不间断，不调用），数据库用于同步：

*   `Tasks`带有带有列的表的数据库`input data`，`output data`以及您可能想要的任何其他内容（例如某些日期或用户 ID）
*   当要处理的数据出现时，在该表中插入行的网页
*   Windows 服务重复（每 x 秒）查询表中未处理的任务并执行任务（如果有）；结果保存在`output data`列中
*   根据用户请求网页查询给定任务并显示其状态，如果存在则显示输出数据

随着用户流量的增长，这更加强大并且可以更好地扩展。理想情况下，服务本身会为单独的任务生成工作线程，以利用多个内核。有了这样的架构，就有很多方法可以优化性能和监控任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:08:31.860

也许您通过以下方式创建列表内容

```
String.Join(";", myList); 
```

并在您的应用程序中重建它

```
String.Split(";", receivedParameter); 
```

另一种可能性是将列表内容写入文件并仅提供文件名作为参数，控制台应用程序必须读取该文件名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:10:05.923

```
string listValues = String.Join(",", myList.Select(s => String.Format("\"{0}\"", s)).ToArray());
Process console = Process.Start("Client.exe", String.Format("-filename:\"{0}\" -list:{1}", fname, listValues)); 
```

# clojure - Frege 是否执行尾调用优化？

> ID：10008673
> 
> 赞同：12
> 
> 时间：2012-04-04T09:45:05.033
> 
> 标签：clojure, functional-programming, jvm, jvm-languages, frege

尾调用是否在 Frege 中进行了优化。我知道 Java 和编译成 JVM 字节码的语言（如 Clojure 和 Scala）都没有 TCO。弗雷格呢？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-05T15:53:57.763

Frege 通过简单地生成 while 循环来进行尾递归优化。

一般尾调用是通过懒惰“顺便”处理的。如果编译器看到对已知（间接）递归的可疑函数的尾调用，则返回惰性结果（thunk）。因此，调用该函数的真正负担在于调用者。这样，可以避免深度取决于数据的堆栈。

话虽如此，静态堆栈深度在功能语言中已经比在 Java 中更深了。因此，一些程序需要获得更大的堆栈（即使用-Xss1m）。

在某些病态的情况下，构建大的 thunk 并且在评估它们时会发生堆栈溢出。一个臭名昭著的例子是 foldl 函数（与 Haskell 中的问题相同）。因此，Frege 中的标准左折叠是 fold，它在累加器中是尾递归和严格的，因此可以在恒定的堆栈空间中工作（如 Haskells foldl'）。

以下程序不应*堆栈*溢出，而是在 2 或 3 秒后打印“false”：

```
module Test
    -- inline (odd) 
  where

even 0 = true
even 1 = false
even n = odd (pred n)

odd n = even (pred n)

main args =  println (even 123_456_789) 
```

其工作原理如下： println 必须有一个要打印的值，因此尝试评估（甚至 n）。但它得到的只是一个 thunk to (odd (pred n))。因此它试图评估这个 thunk，它得到另一个 thunk 到 (even (pred (pred n)))。even 必须评估 (pred (pred n)) 以查看参数是 0 还是 1，然后返回另一个 thunk (odd (pred (n-2)) 其中 n-2 已经被评估。这样，所有调用 (at JVM 级别）是在 println 中完成的。甚至从来没有真正调用过奇数，反之亦然。

如果取消注释 inline 指令，则会得到 even 的尾递归版本，结果的获得速度提高了十倍。

不用说，这种笨拙的算法仅用于演示——通常人们会通过位操作来检查均匀性。

这是另一个版本，这是病态的并且会堆栈溢出：

```
even 0 = true
even 1 = false
even n = not . odd  $ n
odd    = even . pred 
```

问题在这里`not`是尾调用，它的论点很严格（即，要否定某些东西，你必须首先拥有那个东西）。因此，当`even n`计算时，`not`必须完全评估`odd n`哪个，反过来，必须完全评估`even (pred n)`，因此它将占用 2*n 堆栈帧。

不幸的是，这不会改变，即使 JVM 有一天应该有适当的尾调用。原因是严格函数的参数中的递归。

# c# - 如何使用 C#/Asp.Net 开发查询优化工具

> ID：10008675
> 
> 赞同：0
> 
> 时间：2012-04-04T09:45:29.390
> 
> 标签：c#, asp.net

想要开发一个查询优化工具，就像 Google Suggest 一样，这样当我在搜索文本框中输入关键字时，我会得到推荐的选项，即（如果我输入“汽车”，我会得到推荐的选项，如出租汽车、二手车、待售汽车等）想在c#/ASP.Net中开发工具不知道从哪里开始。请给一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:56:56.343

这可以通过使用 javascript 来实现，比如说一些 Web 服务/页面方法。您将用户给您的值发送到 Web 服务。Web 服务翻译文本，发出一些数据库（或其他存储）请求并将结果作为 json（或其他适合您的格式）返回到页面。

如果您需要一些示例代码，请查看这篇文章：http: [//www.dotnetcurry.com/ShowArticle.aspx?ID=515](http://www.dotnetcurry.com/ShowArticle.aspx?ID=515)

顺便说一句，如果您需要更多文章，只需将“asp.net autocomplete”放入Google。那应该会给你很多资源。

# iphone - AppleStore 提交中接受的最低 IOS 版本？

> ID：10008676
> 
> 赞同：0
> 
> 时间：2012-04-04T09:45:34.650
> 
> 标签：iphone, ios, submission

可以肯定的是，我想知道针对 IOS 4.2 的应用程序是否可以提交给苹果审批流程？

因此，该应用程序可以在 iPhone 3G 上下载。

谢谢（你的）信息。

安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:48:17.380

是的，这很好，您可以支持任何您想要的操作系统版本。

最好能够在您支持的每个版本上进行测试

编辑：您需要确保您的项目支持 armv6 和 armv7

# excel - Excel比较两列并突出显示重复项

> ID：10008678
> 
> 赞同：46
> 
> 时间：2012-04-04T09:45:38.470
> 
> 标签：excel, excel-formula

我在 A 列中有一个 10,000 行的 excel 文件，其中一些值是相同的。

例子：

```
A1 - P7767

A2 - P3443

A3 - P7767

A4 - P8746

A5 - P9435 
```

ETC...

然后我有另一列有 100 行，其中有一些在 A 列中找到的值，

```
B1 - P7767

B2 - P8746 
```

ETC...

我需要突出显示 A 列中的所有单元格，其中在 B 列中的任何值中都可以找到该值

所以基本上B列检查它是否可以在A列的任何地方找到相同的值，如果在B列中找不到值时突出显示单元格，则将任何单元格留白

我希望我已经很好地解释了这一点，我做了一些研究，我相信我需要使用条件格式来获得这个结果，但我真的被困在要使用的公式上，似乎无法在网上找到一个例子（也许我没有在搜索正确的术语，因为我不确定这到底是什么）

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-04T10:32:53.533

可能有一个更简单的选项，但您可以使用 VLOOKUP 来检查一个值是否出现在列表中（并且 VLOOKUP 是一个强大的公式，无论如何都可以掌握）。

因此对于 A1，您可以使用以下公式设置条件格式：

```
=NOT(ISNA(VLOOKUP(A1,$B:$B,1,FALSE))) 
```

复制并选择性粘贴 > 格式以将该条件格式复制到 A 列中的其他单元格。

上面的公式在做什么：

*   VLOOKUP 在第一列（即第三个参数，这里是多余的，但通常 VLOOKUP 查找表而不是柱子）。最后一个参数 FALSE 指定匹配必须是精确的，而不仅仅是最接近的匹配。
*   如果未找到匹配项，VLOOKUP 将返回 #ISNA，因此对于在 B 列中匹配的所有单元格，NOT(ISNA(...)) 将返回 true。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-04T10:39:59.490

一个简单的公式是

```
=COUNTIF($B:$B,A1) 
```

指定的公式适用于单元格 A1。只需将特殊格式复制并粘贴到整个 A 列

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-07-14T00:27:52.953

注意：在执行这些步骤之前，您可能希望删除重复的项目（例如同一列中的重复条目）以防止误报。

1.  选择两列
2.  单击条件格式
3.  单击突出显示单元格规则
4.  点击 Duplicate Values（默认值应该没问题）
5.  重复项现在以红色突出显示：

[![在此处输入图像描述](../Images/bcf7f0962252313eb9cfeeff7619e0da.png)](https://i.stack.imgur.com/SkaRW.png)

[![在此处输入图像描述](../Images/801684b1464cc0b491b73adce24ed157.png)](https://i.stack.imgur.com/psdS8.png)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-30T12:12:02.240

至少对我来说，最简单的方法是：

条件格式->添加新规则->设置自己的公式：

```
=ISNA(MATCH(A2;$B:$B;0)) 
```

其中 A2 是 A 列中要比较的第一个元素，B 是要搜索 A 的元素的列。

设置公式并选择格式后，将此规则应用于列中的所有元素。

希望这可以帮助

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-04T09:53:13.343

A1 --> 条件格式 --> 单元格值为 B1 --> 格式：随便你

希望有帮助

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-12T15:58:27.220

假设您要比较同一电子表格中的 A 列和 H 列。

您需要在这 2 列旁边转到另一列并粘贴此公式： =(Sheet1!A:A=Sheet1!H:H) 这将在列中显示 FALSE 或 TRUE。因此，您可以使用此新列使用条件颜色格式功能为不匹配的值着色。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-03T16:48:43.990

我试图比较 AB 列并突出显示相同的文本，但是使用上面的 fomrulas 一些文本根本不匹配。因此，我使用表单（[VBA 宏来比较两列和颜色突出显示单元格差异](https://stackoverflow.com/questions/14204477/vba-macro-to-compare-two-columns-and-color-highlight-cell-differences)）代码，并修改了一些内容以使其适应我的应用程序并找到任何所需的列（只需单击它）。就我而言，我在每一列上使用大量不同数量的行。希望这可以帮助：

子 ABTextCompare()

```
Dim Report As Worksheet
Dim i, j, colNum, vMatch As Integer
Dim lastRowA, lastRowB, lastRow, lastColumn As Integer
Dim ColumnUsage As String
Dim colA, colB, colC As String
Dim A, B, C As Variant

Set Report = Excel.ActiveSheet
vMatch = 1

'Select A and B Columns to compare
On Error Resume Next
 Set A = Application.InputBox(Prompt:="Select column to compare", Title:="Column A", Type:=8)
  If A Is Nothing Then Exit Sub
colA = Split(A(1).Address(1, 0), "$")(0)
 Set B = Application.InputBox(Prompt:="Select column being searched", Title:="Column B", Type:=8)
   If A Is Nothing Then Exit Sub
  colB = Split(B(1).Address(1, 0), "$")(0)
 'Select Column to show results
 Set C = Application.InputBox("Select column  to show results", "Results", Type:=8)
    If C Is Nothing Then Exit Sub
  colC = Split(C(1).Address(1, 0), "$")(0)

'Get Last Row
lastRowA = Report.Cells.Find("", Range(colA & 1), xlFormulas, xlByRows, xlPrevious).Row - 1 ' Last row in column A
lastRowB = Report.Cells.Find("", Range(colB & 1), xlFormulas, xlByRows, xlPrevious).Row - 1 ' Last row in column B

 Application.ScreenUpdating = False
'***************************************************
For i = 2 To lastRowA
      For j = 2 To lastRowB
          If Report.Cells(i, A.Column).Value <> "" Then
              If InStr(1, Report.Cells(j, B.Column).Value, Report.Cells(i, A.Column).Value, vbTextCompare) > 0 Then
                  vMatch = vMatch + 1
                  Report.Cells(i, A.Column).Interior.ColorIndex = 35 'Light green background
                  Range(colC & 1).Value = "Items Found"
                  Report.Cells(i, A.Column).Copy Destination:=Range(colC & vMatch)
                  Exit For
              Else
                  'Do Nothing
              End If
          End If
      Next j
  Next i
If vMatch = 1 Then
    MsgBox Prompt:="No Itmes Found", Buttons:=vbInformation
End If
'***************************************************
Application.ScreenUpdating = True 
```

结束子

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2013-03-19T23:37:17.610

不要做太多工作，伙计们。只需按 Ctr 并选择第一列，然后按 Ctr 并选择第二列。然后单击条件格式 -> 突出显示单元格规则 -> Equel To。

就是这样。你完成了。:)

# javascript - 我的网站页面不工作，但 JS Fiddle 代码可以 - JavaScript 和 HTML 测验

> ID：10008683
> 
> 赞同：3
> 
> 时间：2012-04-04T09:46:02.530
> 
> 标签：javascript, html, jsfiddle

那是代码：

```
function pagechange(frompage, topage) {
    var page = document.getElementById('formpage_' + frompage);
    if (!page) return false;
    page.style.visibility = 'hidden';
    page.style.display = 'none';

    page = document.getElementById('formpage_' + topage);
    if (!page) return false;
    page.style.display = 'block';
    page.style.visibility = 'visible';

    return true;
}

var currentShown = "";

function unhide(rad) {
    var id = "answer" + rad.id.replace("-", "");
    var answer = document.getElementById(id);
    if (answer) {
        var current = document.getElementById(currentShown);
        if (current) current.className = "hidden";
        currentShown = id;
        answer.className = "unhidden";
    }
}

var score = 0;

function scoreIncrement() {
    score++;
    document.getElementById("score").innerHTML = score;
} 
```

[http://jsfiddle.net/NSzxN/](http://jsfiddle.net/NSzxN/)

然后这是我的带有该代码的网站页面：

[http://elearning.easy2dev.com/quiz_template_3.php](http://elearning.easy2dev.com/quiz_template_3.php)

单击 John 时，它应该将分数增加 1，然后在下方显示答案框，没有任何反应，但在 JS Fiddle 中它可以工作。它曾经可以工作，但我似乎以某种方式破坏了它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T09:50:40.917

如果您将 FireFox 与 FireBug 扩展一起使用，您会看到以下错误：

```
illegal character in quiz_t...e_3.php at line 61:
}​
-^ 
```

其中指的是以下代码：

```
function scoreIncrement() {
    score++;
    document.getElementById("score").innerHTML = score;
}​ // <<-- mysterious zero-length character here
</script> 
```

# java - Java（Android）：将 Arraylist 内容与 String 或 Int 进行比较不起作用

> ID：10008684
> 
> 赞同：0
> 
> 时间：2012-04-04T09:46:03.593
> 
> 标签：java, arraylist

我试图在 ArrayList 中保存一组 ID，然后我想将当前值与所述 Arraylist 的内容进行比较，但它似乎对我不起作用。

我的两种方法都不起作用，在代码片段`c.getString(0)`中是从 SQLite 数据库中提取 Numeric ID 列，并且`allProgramIds`包含相同的 ID。

方法1.直接比较（这不匹配，只是忽略）

```
 for(int i=0;i<allProgramIds.size();i++) {
                      Log.w(TAG, "Looping - looking for:" + c.getString(0) + ", Holding:"+allProgramIds);

                        if( allProgramIds.get(i) ==  c.getString(0)) {
                            exist=true;
                            Log.w(TAG, "Found one:" + c.getString(0));
                            break;
                        }

                } 
```

方法 2\. 在比较之前强制转换为 Int（这会导致崩溃）

```
 for(int i=0;i<allProgramIds.size();i++) {
                      Log.w(TAG, "Looping - looking for:" + c.getString(0) + ", Holding:"+allProgramIds);

                        if( Integer.toString((Integer) allProgramIds.get(i)) ==  c.getString(0)) {
                            exist=true;
                            Log.w(TAG, "Found one:" + c.getString(0));
                            break;
                        }

                } 
```

这是一个日志输出

```
 Log.w(TAG, "Looping - looking for:" + c.getString(0) + ", Holding:"+allProgramIds);

04-04 10:43:42.805: W/MainProgram(2045): Looping - looking for:73, Holding:[68, 69, 70, 71, 72, 73, 74, 75, 76, 68, 69, 70, 71, 72] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T09:48:11.667

用于比较，而`equals`不是.`String``==`

```
if(allProgramIds.get(i).equals(c.getString(0)))
// ... 
```

`==`on objects 检查引用相等，而不是内容相等（即，它比较指向存储对象的内存位置的指针）。

# sql - SQL Server 2005 - 变量内容丢失

> ID：10008687
> 
> 赞同：2
> 
> 时间：2012-04-04T09:46:15.490
> 
> 标签：sql, tsql, sql-server-2005, variables, coalesce

我正在使用 SQL Server 2005 并具有以下 T-SQL 语句：

```
DECLARE 
    @MP VARCHAR(500)
SELECT
    @MP = COALESCE(@MP + ',','') + [Name] + ',' + '(' + [Political Party] + ')'
FROM [MPs]
WHERE [MPs].[Region] ='Wales' 

UPDATE myTable
SET [Names and parties] = 
(SELECT @MP
WHERE myTable.[Local Region] ='Wales') 
```

This works fine and will populate myTable with @MP where 'Wales' is present; however if I run the statement again, this time with say 'Scotland', all the previously updated entries for 'Wales' will then become NULL in myTable.

I think I'm missing something here - using a different variable name for @MP for the second search doesn't work.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:58:34.377

我想你可能正在寻找这个：

```
UPDATE myTable
SET [Names and parties] = @MP
WHERE myTable.[Local Region] = 'Wales' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:00:33.990

第二个 WHERE 子句位于错误的位置。它目前适用于 SELECT，而不是 UPDATE，我认为这是您想要的。

```
UPDATE myTable 
SET [Names and parties] =  @MP 
WHERE myTable.[Local Region] ='Wales' 
```

# ios - OpenGL ES 2.0 光线拾取，远点

> ID：10008688
> 
> 赞同：1
> 
> 时间：2012-04-04T09:46:18.320
> 
> 标签：ios, opengl-es-2.0, coordinate-systems, ray-picking

请帮我挑选光线

```
float aspect = fabsf(self.view.bounds.size.width / self.view.bounds.size.height);
GLKMatrix4 projectionMatrix = GLKMatrix4MakePerspective(GLKMathDegreesToRadians(35.0f), aspect, 0.1f, 1000.0f);

GLKMatrix4 modelViewMatrix = _mainmodelViewMatrix;

    // some transformations

_mainmodelViewMatrix = modelViewMatrix;

_modelViewProjectionMatrix = GLKMatrix4Multiply(projectionMatrix, modelViewMatrix);
_normalMatrix = GLKMatrix3InvertAndTranspose(GLKMatrix4GetMatrix3(modelViewMatrix), NULL); 
```

_modelViewProjectionMatrix 和 _normalMatrix 放入着色器

```
glUniformMatrix4fv(uniforms[UNIFORM_MODELVIEWPROJECTION_MATRIX], 1, 0, _modelViewProjectionMatrix.m);
glUniformMatrix3fv(uniforms[UNIFORM_NORMAL_MATRIX], 1, 0, _normalMatrix.m); 
```

并在联系结束

```
GLKVector4 normalisedVector = GLKVector4Make((2 * position.x / self.view.bounds.size.width - 1),
                                             (2 * (self.view.bounds.size.height-position.y) / self.view.bounds.size.height - 1)   ,  //1 - 2 * position.y / self.view.bounds.size.height,
                                               -1,
                                               1);
GLKMatrix4 inversedMatrix = GLKMatrix4Invert(_modelViewProjectionMatrix, nil);

GLKVector4 near_point = GLKMatrix4MultiplyVector4(inversedMatrix, normalisedVector); 
```

我怎样才能得到远点？我的 near_point 是否正确？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T19:28:51.610

看起来你有

```
GLKVector4 normalisedVector = GLKVector4Make((2 * position.x / self.view.bounds.size.width - 1),
   (2 * (self.view.bounds.size.height-position.y) / self.view.bounds.size.height - 1) ,
   -1, 1); 
```

(phew) 计算近点的归一化设备坐标。

要获得远点，只需将`-1`z 坐标换成 a `1`：

```
GLKVector4 normalisedFarVector = GLKVector4Make((2 * position.x / self.view.bounds.size.width - 1),
   (2 * (self.view.bounds.size.height-position.y) / self.view.bounds.size.height - 1) ,
   1, 1); 
```

并对其应用相同的逆变换。这应该够了吧。

背景：在正常情况下，GL接收到的用于将片段转换为像素的最终坐标是所谓的*标准化设备坐标*。它们位于一个角在 (-1,-1,-1_ 和 (1,1,1) 的立方体内。所以屏幕的中心是 (0,0,z)，左上角是 (-1 ,1,z) 以此类推。坐标被转换，使得位于近平面上的点的 z 坐标为 1，而位于远平面上的点的 z 坐标为 -1。这些是用于深度测试，如果你打开它的话。

因此，正如您可能猜到的，当您想将屏幕位置转换回 3D 空间中的一个点时，您实际上有许多点可供选择 - 实际上是一条从近平面延伸到远平面的线。在标准化设备坐标中，这是从 z=-1 延伸到 z=1 的线。所以过程是这样的：

*   将 x 和 y 坐标转换为标准化的设备坐标 x' 和 y'
*   对于 z' = 1 和 z' = -1 中的每一个：
    *   将坐标转换为标准化的设备坐标（请参见[此处的公式](http://docs.knobbits.org/opengl/sdk2/xhtml/gluUnProject.xml)）
    *   应用投影矩阵的逆矩阵
    *   应用模型/视图矩阵的逆矩阵（因为它在任何每个对象转换之前）

结果是您的线在 3D 空间中的两个坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T14:52:08.087

我们可以从**near_point**到**far_point**画线。

```
 GLKVector4 normalisedVector = GLKVector4Make((2 * position.x / self.view.bounds.size.width - 1),
                                                 (2 * (self.view.bounds.size.height-position.y) / self.view.bounds.size.height - 1),  
                                                   -1,
                                                   1);

    GLKMatrix4 inversedMatrix = GLKMatrix4Invert(_modelViewProjectionMatrix, nil);

    GLKVector4 near_point = GLKMatrix4MultiplyVector4(inversedMatrix, normalisedVector);

    near_point.v[3] = 1.0/near_point.v[3];
    near_point = GLKVector4Make(near_point.v[0]*near_point.v[3], near_point.v[1]*near_point.v[3], near_point.v[2]*near_point.v[3], 1);

    normalisedVector.z = 1.0;
    GLKVector4 far_point = GLKMatrix4MultiplyVector4(inversedMatrix, normalisedVector);

    far_point.v[3] = 1.0/far_point.v[3];
    far_point = GLKVector4Make(far_point.v[0]*far_point.v[3], far_point.v[1]*far_point.v[3], far_point.v[2]*far_point.v[3], 1); 
```

# c# - 从代码后面接收数据表到 Javascript 两个 demintion 数组？

> ID：10008690
> 
> 赞同：0
> 
> 时间：2012-04-04T09:46:27.970
> 
> 标签：c#, javascript, asp.net, datatable

我有一个基于谷歌地图的应用程序，其中我需要使用 javascript 矩阵（二维数组）作为地图的参数。

我有一个数据表，其中包含我的代码隐藏文件中的信息：

```
..query code, getting value from the db..
SqlDataAdapter adp = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
adp.Fill(dt); 
```

如何将此数据表值传递到 js 两个教派数组中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:57:33.427

一种简单的方法是在 aspx 页面上在适当的地方设置

```
<script type="text/javascript>
    var mapData = <%=mapData%>
</script> 
```

然后在后面的代码中创建一个名为 mapData 的公共字符串并将其分配为 json 字符串。例如

```
mapData = "{({name:'blah',lat:10.223,long:57.899},{etc})}; 
```

*   显然循环遍历您的数据集以创建字符串。

然后，您可以在页面上的 javascript 中使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:53:46.993

您可以使用 Ajax 从服务器检索作为数组的数据表。

```
public ArrayList ConvertDT(ref DataTable dt)
{
   ArrayList converted = new ArrayList(dt.Rows.Count);
    foreach (DataRow row in dt.Rows)
            converted.Add(row);
    return converted;
    } 
```

然后将数组列表转换为数组并作为响应发送回客户端

[http://www.dreamincode.net/forums/topic/91826-datatable-to-array/](http://www.dreamincode.net/forums/topic/91826-datatable-to-array/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:00:05.180

为什么不使用 Jquery Ajax？使用 Jquery Ajax，您可以将数据从服务器端带到客户端。

# iphone - iPhone中的推送通知

> ID：10008693
> 
> 赞同：0
> 
> 时间：2012-04-04T09:46:55.807
> 
> 标签：iphone, ios4, ios5

我正在开发一个使用推送通知的应用程序。当我使用苹果帐户的开发人员临时文件并在调试模式下工作时，该应用程序可以通过推送通知正常工作。但是，当我在设备中以开发人员身份使用代码签名权利构建应用程序并分发时，它无法正常工作。我使用以下链接创建推送通知

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

但它不起作用。

在下面代码行的链接中，其给出为 developer_identity.cer。我把它作为 distribution_identity.cer

```
$ openssl x509 -in aps_developer_identity.cer -inform der
    -out PushChatCert.pem 
```

# eclipse - Webnoir网站作为Eclipse项目，找不到资源

> ID：10008694
> 
> 赞同：5
> 
> 时间：2012-04-04T09:46:58.827
> 
> 标签：eclipse, clojure, noir

我有这个 webnoir webapp 作为 Eclipse 项目。你可以在这里下载：http: [//dl.dropbox.com/u/3914693/practicum5.zip](http://dl.dropbox.com/u/3914693/practicum5.zip)

当我使用 Eclipse 中的 -main 函数启动它时，似乎找不到资源文件夹（我在 /css/tictactoe.css 上得到 404）。我要改变什么才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:28:23.737

解决方案：我需要将资源目录添加到类路径...

# c# - 从源代码重构 sql 查询

> ID：10008696
> 
> 赞同：0
> 
> 时间：2012-04-04T09:47:13.803
> 
> 标签：c#, .net, sql, refactoring

我有一个方法，它直接在 .CS 文件中包含一个非常大的 sql 查询。推荐的重构方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:49:15.930

您可以将大型复杂 SQL 查询放入 SQL 视图或存储过程中，然后在代码中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:55:25.007

You should use stored procedure

```
string commandText = "SP_Your_Sp_Name";

using (SqlConnection objSqlConnection = Connection)

{

    using (SqlCommand cmd = new SqlCommand(commandText, objSqlConnection))
    {
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add(new SqlParameter("@Parameter_Name", value));
        if (cmd.Connection.State != ConnectionState.Open)
        {
            cmd.Connection.Open();
        }
        result = (string)cmd.ExecuteScalar();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T05:49:15.460

使用存储过程。在这种情况下，当执行计划存储在缓存中时，查询执行会更快。

# iphone - 地图视图返回错误 400

> ID：10008699
> 
> 赞同：0
> 
> 时间：2012-04-04T09:47:17.963
> 
> 标签：iphone, mkmapview

我在我的应用程序中使用 MapKit 并尝试固定坐标（在模拟器中）。

在地图视图中，我可以看到图钉，但地图未加载，并且我在控制台中收到以下错误：

> /SourceCache/ProtocolBuffer_Sim/ProtocolBuffer-91/Runtime/PBRequester.m:687 服务器返回错误：400

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:33:10.200

```
//First in your .h file make an object of mapview
 MKMapView *mymapView; 
```

// 然后在你的 .m 文件的 viewDidLoad 中添加这个

```
mymapView.mapType = MKMapTypeStandard;
mymapView.scrollEnabled = YES;
mymapView.zoomEnabled = YES;
[mymapView setDelegate:self];
mymapView.showsUserLocation = NO;

annotation *ann = [[annotation alloc]init]; //annotation is my custom class of markers
ann.title = @" ";
ann.subtitle = @" ";
ann.coordinate = yourCordinates;
[mymapView addAnnotation:ann];

//Make sure that you have successfuly added the MapKit framework 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T18:50:16.650

地图应用程序中的地图是否正在加载？如果您在谈论谷歌基本地图并且它没有在您的应用程序中加载，但在官方地图应用程序中加载，那么有很多人想知道您是如何做到的，因为没有已知的阻止方法那些瓷砖。

# windows - 查找域名的IP

> ID：10008701
> 
> 赞同：-4
> 
> 时间：2012-04-04T09:47:21.510
> 
> 标签：windows, linux, dns

问这个问题我觉得很傻......有时我有一个我想知道IP的域。例如`google.com`-> `173.194.41.135`。

我通常为此做的是 use `tracert`，它除了进行跟踪路由外，还显示 IP。

但这很愚蠢，因为将域转换为 IP 是 DNS 的全部内容。难道没有一些基本的工具可以做到这一点吗？

我有兴趣了解适用于 Windows 和 Linux 的类似工具。我也很高兴听到任何这样做的 Python 函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:57:45.373

尝试`host google.com`- 解析输出比 nslookup 更容​​易一些。

使用 python（来自[python-dns 的](http://www.dnspython.org/)示例）：

```
import dns.resolver

answers = dns.resolver.query('google.com', 'MX')
for rdata in answers:
    print 'Host', rdata.exchange, 'has preference', rdata.preference 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:52:37.183

有`nslookup`一个命令行实用程序：

[http://en.wikipedia.org/wiki/Nslookup](http://en.wikipedia.org/wiki/Nslookup)

你只需这样做：

```
nslookup google.com 
```

在某些 UNIX 机器上，您可能会发现`dig`：

```
dig google.com 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:54:39.613

`nslookup`将被视为已弃用。使用该`dig`命令获取主机名的 DNS 信息。

话虽如此，`nslookup`通常适用于简单的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T11:08:22.440

实现这一目标的最常见方法是

```
host google.com 
```

或与蟒蛇

```
>>> from socket import gethostbyname
>>> print gethostbyname("google.com") 
```

（注：上表只返回首地址）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T09:54:55.397

`ping google.com`也给你一些线索

# java - 如何在android中将字符串数组一个类发送到另一个类

> ID：10008708
> 
> 赞同：0
> 
> 时间：2012-04-04T09:47:40.113
> 
> 标签：java, android, android-layout

MainMenulist.java 在此类字符串数组中存储所有值 public String[] itemcodes; 我想访问 Main.java 的项目代码

主.java

```
 JSONArray json = jArray.getJSONArray("mainmenu");
        list=(ListView)findViewById(R.id.mainmenulist);
         adapter=new MainMenulist(this, json);
         list.setAdapter(adapter);
           MainMenulist.java
      public class MainMenulist extends BaseAdapter {
protected static Context Context = null;
int i;
public String editnewmainmenu,menuname;
String qrimage;
Bitmap bmp, resizedbitmap;
Bitmap[] bmps;
Activity activity = null;
private LayoutInflater inflater;

private ImageView[] mImages;
String[] itemimage;
TextView[] tv;
String itemname,itemcode;
public String[] itemnames,itemcodes;
HashMap<String, String> map = new HashMap<String, String>();

public MainMenulist(Context context, JSONArray imageArrayJson) {
    Context = context;
    // inflater =
    // (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    // imageLoader=new ImageLoader(activity);
    inflater = LayoutInflater.from(context);
    this.mImages = new ImageView[imageArrayJson.length()];
    this.bmps = new Bitmap[imageArrayJson.length()];
    this.itemnames = new String[imageArrayJson.length()];
    this.itemcodes=new String[imageArrayJson.length()];

    try {

        for (i = 0; i < imageArrayJson.length(); i++) {
            JSONObject image = imageArrayJson.getJSONObject(i);
            qrimage = image.getString("menuimage");
            itemname = image.getString("menuname");
            itemcode=image.getString("menucode");
            itemnames[i] = itemname;
            itemcodes[i]=itemcode;

            byte[] qrimageBytes = Base64.decode(qrimage.getBytes());

            bmp = BitmapFactory.decodeByteArray(qrimageBytes, 0,
                    qrimageBytes.length);
            int width = 100;
            int height = 100;
            resizedbitmap = Bitmap.createScaledBitmap(bmp, width, height,
                    true);
            bmps[i] = bmp;

            mImages[i] = new ImageView(context);
            mImages[i].setImageBitmap(resizedbitmap);

            mImages[i].setScaleType(ImageView.ScaleType.FIT_START);

            // tv[i].setText(itemname);
        }
        System.out.println(itemnames[i]);
        System.out.println(map);

    } catch (Exception e) {
        // TODO: handle exception
    }
}

public int getCount() {
    return mImages.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(final int position, View convertView, ViewGroup parent) {

    View vi = convertView;

    vi = inflater.inflate(R.layout.mainmenulistview, null);

final   TextView text = (TextView) vi.findViewById(R.id.menutext);
    ImageView image = (ImageView) vi.findViewById(R.id.menuimage);

    System.out.println(itemcodes[position]);
    image.setImageBitmap(bmps[position]);

    text.setText(itemnames[position]);
    text.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(itemcodes[position].equals("1"))
            {
                Intent intent = new Intent(Context, FoodMenu.class);
                System.out.println("prakash");

                Context.startActivity(intent);
            }
            else {
                Toast.makeText(Context, "This Feauture is not yet Implemented",4000).show();
            }

        }
    });       

    return vi;

}

    } 
```

MainMenulist.java System.out.println(itemcodes[position]); 在这里我打印所有代码。没有我想在 Main.java 中打印相同的结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:08:38.017

编写一个实现可序列化的bean，为您的数组（项目名称）编写setter和getter方法，如下所示

```
class Bean implements Serializable{
    String itemnames[];

    public Hashtable getItemnames() {
        return itemnames;
    }

    public void setItemnames(String itemnames[]) {
        this.itemnames= itemnames;
    }

} 
```

并在调用活动中编写愚蠢的代码

```
 Bean b = new Bean();
    b.setItemnames(itemnames);

    Intent i=new Intent();
    i.setClass(A.this,B.class);
    i.putExtra("itemnames", b);
    startActivity(i); 
```

并在调用的活动中检索如下

```
Bean obj = (Bean) getIntent().getSerializableExtra("itemnames");// TypeCasting 
String itemname[] = (Hashtable) obj.getItemnames(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:00:27.497

```
There are two ways to do this:

In your code:

    public String[] itemnames,itemcodes; make that arrays as static like below

    public static String[] itemnames,itemcodes; 

And then use `Main.java` file by calling:

    System.out.println(MainMenulist.itemcodes[position]);
    System.out.println(MainMenulist.itemnames[position]);

2) Parse JSON in Main.java which you have pass to MainMenulist.java

    public MainMenulist(Context context, JSONArray imageArrayJson) 
```

# jsf-2 - 在 JSF2 中将过滤器逻辑放在哪里

> ID：10008709
> 
> 赞同：1
> 
> 时间：2012-04-04T09:47:45.773
> 
> 标签：jsf-2, java-ee-6, cdi

我目前正在努力在我的 Java EE 6/JSF 2 webapp 中为一些授权内容放置一个通用逻辑：我有一个要求，即所有带有特定 cookie 的请求都应该重定向到另一个页面。

我考虑了3个解决方案：

**1) 使用 servlet 3.0 过滤器 (@WebFilter)** 这工作，我也可以在那里注入我的托管 bean，但托管 bean 需要访问面 externalContext，在过滤器调用时尚未设置，所以我得到了 NPE调用托管 bean

**2) 使用相位监听** 器这感觉很尴尬，因为相位监听器不能是 CDI 组件，因此不能注入其他组件（通过 el-evaluation 除外）；对我来说，phaseListener 感觉技术将导航逻辑放入其中。

**3) 在 Seam 2.0 中，我可以使用“页面操作”**来处理这样的事情，但似乎这个概念并没有融入 JSF 2.0

在接缝中，这看起来像：

```
<page view-id="/admin/*.jsf">
    <action execute="#{authenticator.checkAccess()}" />
</page> 
```

JSF 2.0 真的没有在呈现页面之前执行“控制器逻辑”的概念吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:29:45.957

在 JSF 2.x 中，您可以像这样监听页面事件：

```
<f:metadata>
   <f:event type="javax.faces.event.PreRenderViewEvent" listener="#authenticator.checkAccess()}" />
</f:metadata> 
```

这或多或少等同于 Seam 2 页面操作（尽管您必须过滤掉回发）。您可以使用[Seam Faces](http://docs.jboss.org/seam/3/faces/latest/reference/en-US/html/)等 CDI 扩展进一步增强默认行为。如果您查看文档并查看适合您的需求，这可能是一个好主意......

# asp.net-mvc-3 - Resx 中的 HtmlTags 显示在 @Html.ValidationMessageFor 中

> ID：10008711
> 
> 赞同：1
> 
> 时间：2012-04-04T09:47:56.957
> 
> 标签：asp.net-mvc-3, razor, resources, mvchtmlstring

我有以下疑问。我正在考虑选择在我的 resx 文本中添加 html 标签以进行本地化。当我直接放置资源时，我可以诉诸：

```
@Html.Raw(@Resources.ResourcesFM.Error_Email) 
```

它按预期工作。问题是当资源被来自 htmlhelper 的验证消息调用时：

```
@Html.ValidationMessageFor(model => model.Email) 
```

从一个属性中得到：

```
[DataType(DataType.EmailAddress,
ErrorMessageResourceType = typeof(ResourcesFM),
ErrorMessageResourceName = "ErrorMailIncorr")] 
```

我正在尝试什么...

```
@Html.Raw(Html.ValidationMessageFor(model => model.Email)) 
```

我不知道如何获得与使用 @html.Raw 时相同的结果，因为帮助程序的输出是 MvcHtmlString ...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T19:24:29.783

尝试这个：

看法：

```
@Html.Raw(Server.HtmlDecode(@Html.ValidationMessageFor(m => m.UserName).ToString())) 
```

控制器动作：

```
ModelState.AddModelError("UserName", "This is a link <a href='http://example.com'>Google Home</a>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T19:28:59.503

对于本地化，您可以使用 String.Format 并为链接选择适当的占位符

```
ModelState.AddModelError("UserName", String.Format("This is a link {0}", "<a href='http://example.com'>Appropriate String From a Resource</a>")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:42:45.957

`Html.ValidationMessageFor`对消息进行 html 编码。但是您应该能够简单地调用`HttpUtility.HtmlDecode()`结果。即使结果包含 html 标记和诸如此类的东西，解码也将简单地对字符串的那部分进行无操作。

所以如果 `Html.ValidationMessageFor(...)' 返回

```
<span>&lt;div&gt;This is in a div&lt;/div<&gt;</span> 
```

然后`HttpUtility.HtmlDecode(Html.ValidationMessageFor(...).ToString())`会给你

```
<span><div>This is in a div</div></span> 
```

它不漂亮，但它有效。您的替代方法是重新创建您自己的验证助手版本，该版本从不编码消息。

# css - CSS - 将多个选择器分组以应用于一个 ID

> ID：10008712
> 
> 赞同：1
> 
> 时间：2012-04-04T09:47:57.267
> 
> 标签：css

我们希望为客户端设置一个移动样式表 - 由于系统设置，我们只能包含一个样式表。

每个页面都有一个 ID，并且由于网站的设计，我们希望能够以稍微不同的方式定位每个页面中的元素。

我知道我们可以通过#home .classname{} 定位类来做到这一点，但想知道是否有任何方法可以将一堆类分组到一个前缀下而不是单独地，例如 -

```
 #home{
  .classname1{}
  .classname2{}
  .classname3{}
 } 
```

我从来没有读过任何关于这个的东西，只是认为它在我们的案例中真的很有用，并且过去可能已经考虑过？

干杯保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:59:17.920

您可以将嵌套样式与[Sass](http://sass-lang.com/)或[Less](http://lesscss.org/)一起使用。在这种情况下，我建议您在 HTML 结构中经常组合使用一个额外的树类，例如当您具有列状结构时。

```
<div class="classname1 combinedclass"></div>
<div class="classname2 combinedclass"></div>
<div class="classname2 combinedclass"></div> 
```

CSS

```
.combinedclass {
    // Styles here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:50:33.087

不，那是不可能的。您可以使用 Less 或 Sass 之类的东西，它们允许您进行这样的嵌套，但它们需要编译为 CSS。

除此之外，您必须使用：

```
#home .classname1{}
#home .classname2{}
#home .classname3{} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:51:43.333

以嵌套样式编写 CSS 不是有效的方法

```
 #home{
  .classname1{}
  .classname2{}
  .classname3{}
 } 
```

您可以将 CSS 编写为以下格式：

```
#home .classname1{}
 #home .classname2{}
 #home .classname3{} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:54:20.200

你可以使用

```
#home .classname1, #home .classname2, #home .classname3
{
} 
```

如果您想将某些东西应用于所有课程或

```
#home .classname1{}
#home .classname2{}
#home .classname3{} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T09:59:48.167

您正在寻找 CSS 扩展库。最受欢迎的两个是：

1.  [较少的](http://lesscss.org/)
2.  [SASS](http://sass-lang.com/)

使用其中任何一种，您都可以通过这种方式组合您的风格

```
#home{
  .classname1;
  .classname2;
  .classname3;
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T10:00:03.700

一个字：[少](http://lesscss.org)。

只需`less.js`在开发中使用并在推送到生产时编译为缩小的 CSS 文件。

# javascript - 任何浏览器都可以打开比屏幕尺寸更大的新窗口吗？

> ID：10008713
> 
> 赞同：1
> 
> 时间：2012-04-04T09:48:01.637
> 
> 标签：javascript, macos, internet-explorer, operating-system, cross-browser

我的应用程序中的一个窗口具有管理员设置的大小。我需要确保窗口不会在屏幕外出现任何边框的情况下打开。`window.open`通过我的实验，当( )中所需的尺寸`resizeTo`较大时，窗口会填满屏幕。但是，任何分辨率和任何浏览器（操作系统）都是如此吗？

**编辑**

不支持`outerWidth`( )时，我可以希望尺寸不能变大吗？`outerHeight`（[在 IE 中获取整个浏览器的宽度/高度？](https://stackoverflow.com/questions/1045050/getting-the-width-height-of-the-entire-browser-in-ie)）

**编辑 2** 我使用 Konqueror 和 Firefox 在 Fedora 16（LXDE、Plasma、Gnome）上进行了测试。我没有成功打开比屏幕更大的窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:54:59.950

@vanH: then you need to provide height and width parameter

```
window.open("", "mywindow1", "status=1,width=2050,height=2150"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-19T14:49:23.683

我没有设法找到一种方法，而且似乎没有有用的建议（大约一个月）。所以我得出结论这是不可能的（或者在主要的操作系统/浏览器上不可能）。

# spring - 请求的 bean 当前正在创建中：是否存在无法解析的循环引用？

> ID：10008714
> 
> 赞同：86
> 
> 时间：2012-04-04T09:48:11.670
> 
> 标签：spring, dependency-injection, autowired

我正在使用 spring 3，并且我有两个视图范围的 bean：

**1-豆1：**

```
@Component("bean1")
@Scope("view")
public class Bean1 {

@Autowired
private Bean2 bean2;

} 
```

**2-豆2：**

```
@Component("bean2")
@Scope("view")
public class Bean2 {

@Autowired
private Bean1 bean1;

} 
```

视图是自定义范围：

```
<bean class="org.springframework.beans.factory.config.CustomScopeConfigurer">
        <property name="scopes">
            <map>
                <entry key="view">
                    <bean class="${project.groupId}.utils.ViewScope" />
                </entry>
            </map>
        </property>
    </bean> 
```

这是自定义视图范围的代码：

```
public class ViewScope implements Scope {

    @SuppressWarnings("rawtypes")
    public Object get(String name, ObjectFactory objectFactory) {
        Map<String, Object> viewMap = FacesContext.getCurrentInstance()
                .getViewRoot().getViewMap();

        if (viewMap.containsKey(name)) {
            return viewMap.get(name);
        } else {
            Object object = objectFactory.getObject();
            viewMap.put(name, object);

            return object;
        }
    }

    public Object remove(String name) {
        return FacesContext.getCurrentInstance().getViewRoot().getViewMap()
                .remove(name);
    }

    public String getConversationId() {
        return null;
    }

    public void registerDestructionCallback(String name, Runnable callback) {
        // Not supported
    }

    public Object resolveContextualObject(String key) {
        return null;
    }
} 
```

打开使用两个 bean 的页面时，出现异常：

```
org.springframework.beans.factory.BeanCurrentlyInCreationException: Error creating bean with name 'agencyBean': Requested bean is currently in creation: Is there an unresolvable circular reference?
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:252)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:329)
    at com.myapp.utils.ViewScope.get(ViewScope.java:20)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:325)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:844)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:786)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:703)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:474)
    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:84)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:282)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1074)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$2.getObject(AbstractBeanFactory.java:329)
    at com.xeno.xecamp.webManagement.utils.ViewScope.get(ViewScope.java:20)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:325)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190)
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075)
    at org.springframework.beans.factory.access.el.SpringBeanELResolver.getValue(SpringBeanELResolver.java:56)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstIdentifier.getValue(AstIdentifier.java:71)
    at org.apache.el.parser.AstValue.getTarget(AstValue.java:94)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:244)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105)
    at com.sun.faces.facelets.tag.jsf.core.DeclarativeSystemEventListener.processEvent(EventHandler.java:128)
    at javax.faces.component.UIComponent$ComponentSystemEventListenerAdapter.processEvent(UIComponent.java:2508)
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2139)
    at com.sun.faces.application.ApplicationImpl.invokeComponentListenersFor(ApplicationImpl.java:2087)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:286)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:244)
    at org.springframework.faces.webflow.Jsf2FlowApplication.publishEvent(Jsf2FlowApplication.java:94)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:108)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:118)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:99)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:60)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:57)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:70)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at com.ocpsoft.pretty.PrettyFilter.doFilter(PrettyFilter.java:110)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:119)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:304)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

请告知如何解决此异常。

**编辑**：我尝试使用此处答案中引用的**设置器注入**

[了解 Spring 上下文初始化顺序](https://stackoverflow.com/questions/5632596/understanding-spring-context-initialization-order)

但它也不起作用。

**1-豆1：**

```
@Component("bean1")
@Scope("view")
public class Bean1 {

private Bean2 bean2;

@Autowired
public void setBean2 (Bean2 bean2) {
    this.bean2= bean2;
}

} 
```

**2-豆2：**

```
@Component("bean2")
@Scope("view")
public class Bean2 {

private Bean1 bean1;

@Autowired
public void setBean1 (Bean1 bean1) {
    this.bean1= bean1;
}

} 
```

但它给了我一个例外：

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.myapp.beans.Bean1] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {} 
```

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2017-05-19T13:12:08.443

我认为你可以使用 Spring 的

> @懒惰的

自动装配字段之一上的注释以打破循环依赖。

*我不确定这在提到的 Spring 版本中是否有效/存在。*

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2012-04-12T22:42:21.253

Spring 使用一种特殊的逻辑来解决这种与单例 bean 的循环依赖关系。但这不适用于其他范围。打破这种循环依赖没有优雅的方法，但一个笨拙的选择可能是这个：

```
@Component("bean1")
@Scope("view")
public class Bean1 {

    @Autowired
    private Bean2 bean2;

    @PostConstruct
    public void init() {
        bean2.setBean1(this);
    }
}

@Component("bean2")
@Scope("view")
public class Bean2 {

    private Bean1 bean1;

    public void setBean1(Bean1 bean1) {
        this.bean1 = bean1;
    }
} 
```

无论如何，循环依赖通常是糟糕设计的征兆。如果有更好的方法来定义你的类依赖，你会再想一想。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-05-10T06:15:34.783

在我的例子中，我定义了一个 bean 并在同一个类文件的构造函数中自动装配它。

```
@SpringBootApplication
public class MyApplication {
    private MyBean myBean;

    public MyApplication(MyBean myBean) {
        this.myBean = myBean;
    }

    @Bean
    public MyBean myBean() {
        return new MyBean();
    }
} 
```

我的解决方案是将 bean 定义移动到另一个类文件。

```
@Configuration
public CustomConfig {
    @Bean
    public MyBean myBean() {
        return new MyBean();
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-30T08:00:01.457

我以非常愚蠢的方式遇到了这个错误

```
@Autowired
// private Bean bean;

public void myMethod() {
  return;
} 
```

发生的事情是我出于某种原因评论了一行并留下了使spring认为该方法需要自动装配的注释

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T12:32:26.260

一般来说，处理循环依赖的方法是使用setter注入。

我尝试了您发布的 setter 注入代码，它对我有用。我想您收到异常的原因是因为 Bean1 和 Bean2 在 com.myapp.beans 包中，并且您没有为该包启用组件扫描。

您需要将以下内容添加到您的弹簧配置中：

```
<context:component-scan base-package="com.bullethq.accounts.web"/> 
```

或将 bean 移动到 Spring 自动扫描的包中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-09-20T14:34:58.503

**1.为测试禁用非测试安全配置**

```
@EnableWebSecurity
@Profile("!test")
public class SecurityConfig extends WebSecurityConfigurerAdapter { ... } 
```

**2.在Test-Folder中添加Test-Security Config**

```
@TestConfiguration
public class TestSecurityConfig extends WebSecurityConfigurerAdapter {
  @Override
  protected void configure(HttpSecurity http) throws Exception {
    http.antMatcher("**/*").anonymous();
  }
} 
```

**3.添加TestConfig到集成测试**

```
@SpringBootTest(webEnvironment = RANDOM_PORT)
@ContextConfiguration(classes = TestSecurityConfig.class)
public class IntegrationTest { ... } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-11T12:13:19.450

我的解决方案是将 bean 定义移动到另一类配置

```
@Configuration
public class EncoderConfig {
    @Bean
    PasswordEncoder passwordEncoder(){
        return new BCryptPasswordEncoder();
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-02-05T02:32:08.500

字段级别的 @Resource 注释也可用于声明运行时查找

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-09-11T15:35:14.987

一般来说，避免这个问题的最合适的方法（也因为 JUnit 中更好的 Mockito 集成）是使用[https://www.baeldung.com/circular-dependencies-in-spring](https://www.baeldung.com/circular-dependencies-in-spring)中描述的 Setter/Field Injection并在[https://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html](https://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html)

```
@Component("bean1")
@Scope("view")
public class Bean1 {
    private Bean2 bean2;

    @Autowired
    public void setBean2(Bean2 bean2) {
        this.bean2 = bean2;
    }
}

@Component("bean2")
@Scope("view")
public class Bean2 {
    private Bean1 bean1;

    @Autowired
    public void setBean1(Bean1 bean1) {
        this.bean1 = bean1;
    }
} 
```

# c++ - C++中的文件处理

> ID：10008720
> 
> 赞同：-1
> 
> 时间：2012-04-04T09:48:20.530
> 
> 标签：c++

我想知道是否有人可以帮助我在 C++ 中解决以下问题：

我有一个文件，其中有时缺少数据，即有两个连续的 TAB，然后我需要将第二个 TAB 转换为“-999999”或“0”。这是文件的样子

```
 i_1   i_2   i_3   i_4   i_5
j_1  12          14          16
j_2        11    17    25  
j_3  44                51    65 
```

我想计算第一行元素的平均值，即（12,14 和 16）为：

```
sum+=tab[i][j];
mean = sum/5; (considering empty spaces =0) 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:05:28.240

```
#include <boost/algorithm/string/split.hpp>
#include <iostream>
#include <fstream>
#include <vector>
#include <list>

bool const compress_tokens = false;
bool const table_width = ...;

std::ifstream inp("filename");

// parsed grid
std::list<std::vector<std::string> > table;

std::string strbuf;
std::vector<std::string> vecbuf;
while(inp.getline(strbuf))
{
    vecbuf.clear();
    boost::split(vecbuf, strbuf, boost::is_any_of("\t"), compress_tokens);
    assert(vecbuf.size() == table_width);
    table.push_back(vecbuf);
} 
```

# git - 错误“远程：致命：坏对象0000000000000000000000000000000000000000”是什么意思？

> ID：10008722
> 
> 赞同：10
> 
> 时间：2012-04-04T09:48:26.520
> 
> 标签：git

推送到 git repo 后，我收到此错误：

```
[trusktr@starlancer bml]$ git push origin trusktr
Password: 
Counting objects: 13, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (7/7), done.
Writing objects: 100% (7/7), 763 bytes, done.
Total 7 (delta 6), reused 0 (delta 0)
remote: fatal: bad object 0000000000000000000000000000000000000000
To ssh://trusktr@buzztard.git.sourceforge.net/gitroot/buzztard/bml
 * [new branch]      trusktr -> trusktr 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T09:54:43.920

开头的任何内容都是`remote:`接收上传的主机打印的内容。在这种情况下，它几乎可以肯定是一个（稍微）损坏的接收后挂钩，它不能正确处理“创建的新分支”。（一个新分支的“旧”sha1 具有 NULL sha1 0{40}。如果钩子尝试将其用作提交 ID，它将失败，因为任何提交都不应该具有该 ID。）

# xaml - Windows 8 中的 wp7 枢轴控制等效项是什么？

> ID：10008730
> 
> 赞同：10
> 
> 时间：2012-04-04T09:48:54.263
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime, pivotviewer

我正在寻找适用于 win 8 应用程序的 wp7 枢轴控制等价物。对于某些选项卡式数据部分的基于 xaml 的 c# 实现。如果可用，请告诉我。

如果不是，还有哪些其他控件接近它？

[以前有人在这里](http://social.msdn.microsoft.com/Forums/en-SG/winappswithcsharp/thread/ce78ea55-7696-4a7d-9549-68c36c2973c4)问过同样的问题。但是还没有好的反应

**编辑**：在 Win 8 消费者预览版的 Microsoft 音乐播放器中，您可以看到一个选项卡式视图。这正是我想要的。我不想为此使用 Fly out 控制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-28T00:19:46.020

我在我的库中实现了一个枢轴控件。请参阅[https://github.com/MyToolkit/MyToolkit/wiki/MtPivot](https://github.com/MyToolkit/MyToolkit/wiki/MtPivot)

![在此处输入图像描述](../Images/a48c1809c3cf3ca7f1e56b77e0828bdd.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T16:47:19.460

我假设您在谈论 Kindle App 中的“Cloud”“Downloaded”选项卡开关和 Finance App 中的“DOW”“S&P500”“NASDAQ”选项卡开关。

我不认为有任何这样的控制。根据我自己的经验，当我切换“选项卡”时，我使用 a`div`假装是一个选项卡并更新主视图（在我的情况下是）。`GridLayout`我认为这也不`FlipView`是您想要的，因为它们本质上不是标签。

如果您仍然保留旧的 Developer Preview 示例，您可以找到 Conference App（即 /Build// App）的源代码。他们的“计划”页面也有类似的“标签”控件。但是我查看了一次源代码，找不到任何有用的东西（那是几个月前的事）。祝你好运。:P

[很难相信他们没有“tab”控件，但我在他们的Control List](http://msdn.microsoft.com/en-us/library/windows/apps/hh465453.aspx)中找不到类似“tab”的东西。尤其是当他们`Pivot Control`在 WP7 中时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T06:17:31.920

我发现了这样的东西。`Pivot`、`Filters`和选项在中心页面中可用`Sort`。`View`

[此博客](http://blog.ilink-systems.com/SitePages/Windows8-and-Metro-UI.aspx)中给出了详细信息。希望它可以帮助某人！:)

# c# - linq to sql 在查询中重复连接

> ID：10008731
> 
> 赞同：0
> 
> 时间：2012-04-04T09:49:00.700
> 
> 标签：c#, visual-studio-2010, linq, sql-server-2008

我有一个产生重复的 linq to sql 查询。我似乎可以弄清楚如何消除这些重复记录。也许这里有人可以提供帮助。这个想法是从表 1 中的日期大于表 2 的日期并且表 2 中的日期大于 2011-01-01 的日期从表 2 中检索“总数”的总和。我已经实现了这一点，但由于**重复，我得到的总和正好是两倍**。非常感谢您的帮助

表结构：

```
table1:  id, date
table2: id, date, total 
```

查询

```
from t1 in table1
                    join t2 in table2 on t1.id equals t2.id into x
                    from y in x
                    where t1.id == "123" && t1.date > y.date && y.date > DateTime.Parse("2011-01-01") 
                    group t1 by new { y.total} into g

                    select g.Sum(t1 => t1.total); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T11:05:03.973

您应该分多个步骤拆分查询：

选择您想要的数据：

```
var data = 
from t1 in table1
join t2 in table2 on t1.Id equals t2.Id
where t1.Id == "123" && t1.Date > t2.Date && t2.Date > DateTime.Parse("2011-01-01")
select new {t1.Id, t2.Date, t2.Total}; 
```

调用 distinct 以避免重复项：

```
var distinct = data.Distinct(); 
```

得到总和：

```
return distinct.GroupBy(x => x.Date)
                .Select(g => g.Sum(item => item.Total)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:05:53.360

您不应该按 Id / Key 将其分组并按总数求和吗？

如在

```
 group t1 by new { y.Id} into g 
```

# c# - 如何从 ASP.net C# 中的字符串中提取 C#/PHP/Code/SQL

> ID：10008743
> 
> 赞同：0
> 
> 时间：2012-04-04T09:49:54.677
> 
> 标签：c#, parsing, sql-injection

假设有文件上传控件允许用户上传文本文件，我们如何读取或提取该用户没有在该文本文件中上传任何恶意代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:55:17.873

If you are not executing these files, the only thing you may need is excluding html tags [How can I strip HTML tags from a string in ASP.NET?](https://stackoverflow.com/questions/785715/how-can-i-strip-html-tags-from-a-string-in-asp-net)

# objective-c - 如何重新创建 iMessage 发送按钮和文本字段布局？

> ID：10008748
> 
> 赞同：7
> 
> 时间：2012-04-04T09:50:10.387
> 
> 标签：objective-c, ios, cocoa-touch, uibutton, uitextfield

我是 XCode 和 Objective-C 的新手，正在尝试重新创建 iMessage 应用程序的底部栏，但我不知道该怎么做。我见过其他应用程序使用完全相同的布局，例如[WhatsApp Messenger](http://itunes.apple.com/us/app/whatsapp-messenger/id310633997?mt=8)，这让我觉得可能有一些简单的方法可以做到这一点。

让 UIButton 看起来像发送按钮似乎是不可能的，让 UITextField 看起来像输入字段似乎同样不可能。真的都是通过使用图像来完成的，还是有一些本机（正确）的方式来做到这一点？如果都是图片，我在哪里可以找到它们，还是我必须自己制作？

另外，当用户输入文本时，如何使文本字段垂直扩展？[这个问题](https://stackoverflow.com/questions/1427818/iphone-sdk-creating-a-big-red-uibutton)至少似乎回答了如何使用图像制作动态宽度按钮，而不是如何制作具有可变高度的文本字段。

这就是我要重新创建的内容：

![空的文本消息形式](../Images/3e3b8b80fa2361e06b954ebf7398006f.png) ![在此处输入图像描述](../Images/b53d0180271441d0f15290c2b3a176ef.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-11T08:54:22.167

没有简单的方法可以做到这一点。棘手的部分是模仿元素的行为和精确位置。我为我开发的应用程序高精度地完成了此操作，并将撰写栏提取到一个独立的项目中，因此任何人都可以轻松获得它。它被称为[PHFComposeBarView](https://github.com/fphilipe/PHFComposeBarView)。这是它的样子：

![PHFComposeBarView](../Images/3b61df3a1eaf02de4c629a29cb7edbd2.png)

总结一下，这些是功能：

*   可以更改主按钮的标题（右侧的那个）
*   可以更改主按钮的色调颜色
*   占位符的标题可以更改
*   占位符作为属性公开以供进一步自定义
*   文本视图作为进一步自定义的属性公开
*   实用程序按钮（左侧的那个）可以通过设置实用程序按钮图像来显示（透明背景上的白色图像效果最佳，边长可达 32pt）
*   指定最大字符数时的可选字符计数器（类似于在 Messages.app 中键入 SMS；不施加最大字符数限制）
*   使用委托来通知按钮按下
*   从文本视图转发委托方法
*   当文本换行和发布通知时自动增长，并在更改前后发送有关框架更改的委托消息，以便您可以调整其他视图以进行框架更改并发送委托方法，以便您可以调整视图
*   默认情况下向上增长，或者向下增长
*   增长的最大高度可以用点或行号来指定

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T16:51:15.633

快速google搜索吧。您必须制作自己的按钮图像，并在点击它时更改它。它是一个文本视图而不是文本字段，您必须使其动态更改大小。它后面有一个图像视图，它也会改变大小。我的建议是更多地使用谷歌。我通过 2 秒的谷歌搜索找到了很多这样的东西。至于酒吧他是链接[http://developer.apple.com/library/ios/#samplecode/KeyboardAccessory/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/KeyboardAccessory/Introduction/Intro.html)

# svg - 使用 JQuery Vector Map 加载 svg 文件

> ID：10008757
> 
> 赞同：0
> 
> 时间：2012-04-04T09:50:59.800
> 
> 标签：svg, jvectormap

我正在使用 JQuery Vector Map 加载 svg 文件，但我得到以下

```
Uncaught TypeError: Cannot read property 'width' of undefined 
```

事实上，问题在于它无法从 svg 文件中读取。有人知道 `$('#africa').vectorMap();`阅读它需要做什么。

```
<html>
            <head>
                    <title>Testing Map</title>
                    <script src="jquery.vector-map/jquery-1.6.min.js" type="text/javascript"></script>
                    <link href="jquery.vector-map/jquery.vector-map.css" media="screen" rel="stylesheet" type="text/css" />
                    <script src="jquery.vector-map/jquery.vector-map.js" type="text/javascript"></script>
                    <script  type="text/javascript">
                            $(function()
                            {
                                    $('#africa').vectorMap();
                            });
                    </script>
            </head>
            <body>
                 <div id="africa">
                    <embed src="africa.svg"/>
                 </div>
            </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T06:15:20.480

您不能只使用 SVG 文件来渲染非洲地图。很快我将发布新的 jVectorMap 站点，其中将提供许多从 GIS 数据转换而来的新地图。我在这里工作[https://github.com/bjornd/jvectormap-site](https://github.com/bjornd/jvectormap-site)。

# web-services - 带有 QName 的 Weblogic 12c

> ID：10008759
> 
> 赞同：0
> 
> 时间：2012-04-04T09:51:37.827
> 
> 标签：web-services, jax-ws, weblogic12c

我正在使用带有 jax-ws 2.2 的 weblogic 12c 来制作 web 服务客户端 ssl。

我的问题是当我创建一个`javax.xml.ws.Service`in 时`javax.xml.namespace.QName`。
`javax.xml.namespace.QName qname = new javax.xml.namespace.QName("prueba1", "prueba1");`
`javax.xml.ws.Service create = javax.xml.ws.Service.create(url,qname);`

当我尝试构建服务时，我得到：

`java.lang.LinkageError: loader constraint violation: when resolving method "javax.xml.ws.Service.create(Ljavax/xml/namespace/QName;)Ljavax/xml/ws/Service;" the class loader (instance of weblogic/utils/classloaders/ChangeAwareClassLoader) of the current class, org/InstanceInterface, and the class loader (instance of <bootloader>) for resolved class, javax/xml/ws/Service, have different Class objects for the type javax/xml/namespace/QName used in the signature`

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T09:44:45.570

错误是因为 jasperreport 和 JRE 有库 QName，如果您在 jasperreport 中排除 xmlapis 错误已经消失。发生此错误是因为我有相同的库具有相同的调用路径并且应用程序不知道我修复了谁的选择，因为我认为最好没有重复库而不标记要使用的库

# django - Tastypie - 配置文件作为嵌套资源

> ID：10008763
> 
> 赞同：0
> 
> 时间：2012-04-04T09:51:51.487
> 
> 标签：django, tastypie

我正在尝试在 UserResource 中添加配置文件数据，但我找不到这样做的方法。

我对[docs](http://django-tastypie.readthedocs.org/en/latest/cookbook.html)上的代码进行了一些调整，如下所示：

```
class UserResource(ModelResource):
    profile = fields.ForeignKey(UserProfile, 'profile', full=True)

    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']

        #authentication = BasicAuthentication()
        authorization = DjangoAuthorization()

    def dispatch(self, request_type, request, **kwargs):

        kwargs['profile'] = request.user.get_profile()
        return super(UserResource, self).dispatch(request_type, request, **kwargs) 
```

但是给了我这个错误：

```
error_message: Cannot resolve keyword 'profile' into field. Choices are: date_joined, email, first_name, groups, id, is_active, is_staff, is_superuser, last_login, last_name, logentry, password... 
```

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:50:19.363

首先，我会确保您使用的是 a`ProfileResource`而不仅仅是模型。第二个`User.profile`解析为配置文件。所以也许是这样的：

```
class UserResource(ModelResource):
    profile = fields.ForeignKey('myapp.api.resources.ProfileResource', 'profile', full=True)

    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']

        #authentication = BasicAuthentication()
        authorization = DjangoAuthorization() 
```

# c# - 让 JQuery UI datepicker 显示在 asp.net mvc 2 c# 中的问题

> ID：10008765
> 
> 赞同：1
> 
> 时间：2012-04-04T09:51:53.480
> 
> 标签：c#, jquery, asp.net-mvc, datepicker

我希望在单击文本框时显示日期选择器，但事实并非如此，我已经进行了一些搜索，但没有任何帮助。

提交时间.aspx

```
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<form action="/Item/Submit" method="post">
    <fieldset>
        <legend>Set time</legend>
        <div class ="editor-label"><label for="expire"><b>End date</b></label></div> 
        <div class ="editor-field"><input id="expire" name="expire" type="text" style="width: 500px; height: 20px"/></div>
        <script type="text/javascript">
            $(function() {
                $('#expire').datepicker({
                    changeMonth: true,
                    changeYear: true,
                    dateFormat: 'dd/mm/yy'
                });
            }); 
        </script>
    <input type="submit" value="Submit" style="width: 72px" />
    </fieldset>
</form>
</asp:Content> 
```

我已将以下代码添加到 Site.Master

```
<link type="text/css" href="css/themename/jquery-ui-1.8.18.custom.css" rel="Stylesheet" />  
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script> 
```

它显示了我的文本框，但当我单击它时没有显示日期选择器，任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:04:02.893

你错过了`$(document).ready()`

所以你的代码应该是这样的：

```
$(document).ready(function(){
    $('#expire').datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'dd/mm/yy'
    });
}); 
```

jsFiddle 示例：http: [//jsfiddle.net/hcBL2/](http://jsfiddle.net/hcBL2/)

# c# - 嵌套复杂类型的显示名称

> ID：10008768
> 
> 赞同：2
> 
> 时间：2012-04-04T09:52:00.120
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我有两个模型类，如下所示，

我想为 Categoy.Name 属性使用不同的标签，如果它是嵌套的，但是如果我使用复杂类型，它没有绑定到 name 属性，对于复杂类型是否有类似 BindTo("Category.Name") 的选项？

```
 public class ProductModel
    {
        public int Id { get; set; }

        [DisplayName("Product Name")]
        public string Name { get; set; }

        [DisplayName("Category Name")]
        [BindTo("Category.Name")]
        public CategoryModel Category { get; set; }
    }

    public class CategoryModel
    {
        public int Id { get; set; }
        [DisplayName("Name")]
        public string Name { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:04:32.063

一种解决方案是使用[MetadataType](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.metadatatypeattribute.aspx)属性。

```
public class ProductModel
{
    public int Id { get; set; }

    [DisplayName("Product Name")]
    public string Name { get; set; }

    public CategoryPropertyModel Category { get; set; }
}

[MetadataType(typeof(ICategoryModelCategoryDisplay))
public class CategoryModel : CategoryBaseModel { }

[MetadataType(typeof(ICategoryModelDisplay))
public class CategoryPropertyModel : CategoryBaseModel { }

public class CategoryBaseModel
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public interface ICategoryModelSimpleDisplay  
{
    [DisplayName("Name")]
    public string Name { get; set; }
}

public interface ICategoryModelCategoryDisplay  
{
    [DisplayName("Category Name")]
    public string Name { get; set; }
} 
```

使用`CategoryModel`时显示名称将是`Name`.

使用`CategoryPropertyModel`时显示名称将是`Category Name`.

# php - 如何截断具有动态长度 url slug 的字符串？

> ID：10008771
> 
> 赞同：0
> 
> 时间：2012-04-04T09:52:14.810
> 
> 标签：php

在我的`slug`专栏中，我设置了限制，`varchar = 100`并且值将像这样存储

```
how-do-i-truncate-a-string-with-dynamic-length-url-slug 
```

我希望 slug 是一个`unique`键，所以我`slug`用最后一个自动增量 id 更新值，新的 slug 值是：

```
how-do-i-truncate-a-string-with-dynamic-length-url-slug-10 
```

所以这里最终`last auto increment`将是一个很大的数字..

```
preg_replace('/\s+?(\S+)?$/', '', substr($slugwithautoincrement, 0, 101)); 
```

有了这个`preg_replace`，它会**删除**我的`auto increment number`

问题 ：

如何在不删除最后一个自动增量编号的情况下将值修复截断为 100 个字符？

所以结果应该是：

```
how-do-i-truncate-a-string-with-[....remove from here...]10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:56:05.700

Truncate first and then append the auto increment value.

Or do something like this:

```
$maxlength = 30;
$number = 1234567;
$string = "how-do-i-truncate-a-string-with-dynamic-length-url-slug";
$slug = substr($string, 0, $maxlength - strlen($number) - 1)."-".$number; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T09:59:17.530

这是一种方法：

```
$slug = "how-do-i-truncate-a-string-with-dynamic-length-url-slug-10"
$maxlen = 100;
if (strlen($slug) > $maxlen) {
    $idlen = strlen($slug) - strrpos($slug, '-'); // how long is the "-10" part?
    $id = substr($slug, -$idlen);
    $slug = substr($slug, 0, $maxlen - $idlen).$id;
}
echo $slug; 
```

`$maxlen`如果碰巧具有特定值，则此代码可能会在 id 之前以两个连字符结尾。不过，这应该不是问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T09:59:52.240

如果在附加自动增量值之前无法截断：

```
$slug = explode('-', $slug);

$value = array_pop($slug);

$slug = substr(implode('-', $slug), 0, 99 - strlen($value)) . '-' . $value; 
```

# java - 如何通过互联网调试 RMI/IIOP？

> ID：10008772
> 
> 赞同：0
> 
> 时间：2012-04-04T09:52:14.677
> 
> 标签：java, networking, rmi, iiop

我有一个客户端/服务器应用程序，它通过 JNDI/RMI/IIOP 在客户端使用一些 Glassfish 客户端代码（未打包为 Glassfish 客户端）和在服务器端使用 Glassfish 实例进行通信。

我有一些 Glassfish 多模式脚本，用于确保我在任何机器上创建的域完全相同且配置正确。

在本地网络上使用该脚本，我已经确保我可以从我机器上的客户端代码访问远程 Glassfish 服务器实例（这是一个非常合理的猜测，但是我倾向于测试所有我不完全确定的东西）。

下一步是让该客户端/服务器应用程序在（我应该说“通过”）互联网上运行：我的客户端代码在我的公司 LAN 中（换句话说，在我的机器上）和我的服务器代码在运行我的 Glassfish 的 Amazon VM 上服务器。由于某些原因，远程 Glassfish 正在 Windows VM 上运行。

显然（当我问这个问题时，你可以放心地猜测通过互联网测试不起作用。你是对的。

因此，为了进行更多猜测，我在我的机器和服务器上都启动了[SmartSniffer 。](http://www.nirsoft.net/utils/smsniff.html)

在我的机器上，我只能看到一个 TCP 数据包发送到该服务器实例（并且没有任何返回）。

在服务器实例上，我可以看到一个数据包进入（客户端查询）和一个数据包退出（服务器应答）。该服务器答案如下所示：

> [4/4/2012 11:47:13 AM:917] GIOP.......(......NameService......._is_a... ................NEO..........（IDL：omg.org/SendingContext/代码库：1.0............n............172.27.63.145.Ô2......¯«Ë............e...... ……………………………………………………………………………………………………………………………………………………………………………… .....&................(IDL:omg.org/CosNaming/NamingContext:1.0.

那个 172.27.63.145 地址是我在本地网络中的 IP。

> [4/4/2012 11:47:13 AM:917] GIOP.......2............NEO...... ...0.......(IDL:omg.org/SendingContext/CodeBase:1.0............ô........46.137.114.## #.'5....¯«Ë........d........................ ………………&…………！……|…… .....$... ...f............10.241.42.###.'6.@...... ..g........g........默认.........g.... ......+IDL:omg.org/CosNaming/NamingContextExt:1.0......¢.......10.241.42.208。 '5...M¯«Ë.... ...d... S1AS-ORB.........RootPOA.... TNameService......... ……………………………………………………………………………………………………………………………………………………………………………… ……&……

那 46.137.114.### 是我的 Amazon VM 的外部 IP，而 10.241.42.### 是它在亚马逊魔法虚拟服务器中的内部 IP。

所以看起来服务器正在回答，不是吗？

但是这个答案永远不会在我的网络中找到我的机器。

那么......我怎样才能检查它在哪里丢失？似乎数据包嗅探器已经完成了它的工作，但我现在能做什么？

**注意**这个问题是对[“如何通过 NAT 将 glassfish 客户端连接到 glassfish 服务器？”的澄清。](https://stackoverflow.com/q/9890597/15619)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:14:07.080

也许是愚蠢的问题，但是您的 Amazon EC2 实例是否配置了所有必需的端口，以便您的通信协议正常工作？您可以在 AWS 控制台中的 EC2->Security Groups 下看到您的实例分配到的安全组中配置的开放端口。

# java - 如何写一个简单的公平锁？

> ID：10008774
> 
> 赞同：0
> 
> 时间：2012-04-04T09:52:18.940
> 
> 标签：java, multithreading

如何编写一个与 new 类似的简单公平锁`ReentrantLock(true)`？

```
 public class Main1 {

    public static void main(String[] args) {
//      Lock lock = new ReentrantLock(true);
        CustomLock lock = new CustomLock();
        new Thread(new Producer(lock)).start();
        new Thread(new Consumer(lock)).start();
    }
}

class Producer implements Runnable {
    private Lock lock;
    private CustomLock customLock;

    public Producer(Lock lock) {
        this.lock = lock;
    }

    public Producer(CustomLock lock) {
        this.customLock = lock;
    }

    @Override
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
//          lock.lock();
            customLock.lock();
            System.out.println("Producer before");
            try {
                TimeUnit.SECONDS.sleep(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("Producer after");
//          lock.unlock();
            customLock.unlock();
        }
    }
}

class Consumer implements Runnable {
    private Lock lock;
    private CustomLock customLock;

    public Consumer(Lock lock) {
        this.lock = lock;
    }

    public Consumer(CustomLock lock) {
        this.customLock = lock;
    }

    @Override
    public void run() {
        while (!Thread.currentThread().isInterrupted()) {
//          lock.lock();
            customLock.lock();
            System.out.println("Consumer before");
            try {
                TimeUnit.SECONDS.sleep(1);
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("Consumer after");
//          lock.unlock();
            customLock.unlock();
        }
    }
}

class CustomLock{
    private boolean isLocked;

    public synchronized void lock(){
        while (isLocked) {
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        isLocked = true;
    }

    public synchronized void unlock(){
        if(isLocked){
            isLocked = false;
            notify();
        }
    }
} 
```

自定义不公平锁（我不确定它是否正确）

```
class CustomLock{
    private boolean isLocked;

    public synchronized void lock(){
        while (isLocked) {
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        isLocked = true;
    }

    public synchronized void unlock(){
        if(isLocked){
            isLocked = false;
            notify();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:48:05.927

如果你想要一个公平的锁，你需要使用一个列表并按照列表顺序通知线程。

# javascript - Javascript。代码的位置会影响性能吗？

> ID：10008775
> 
> 赞同：0
> 
> 时间：2012-04-04T09:52:19.377
> 
> 标签：javascript, performance

我一直在寻找提高我的 javascript 代码性能的方法和技巧。我想知道为了获得最佳性能而使用的最佳实践是什么。

脚本的位置（在标题中、在正文中、在代码中间还是在末尾）会影响性能吗？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:12:27.620

如果JS很多，放在文档末尾。尽管这对加载时间没有影响，但用户会更快地看到页面并且可以在加载 js 时开始阅读它，而不是在下载 JS 之前什么都看不到（当你把它放在头部时会发生这种情况） . 它只是使下载看起来更快。这也将解决上面提到的关于在未完成的文档上执行脚本的问题，尽管为此，更好的解决方案是使用 window.onload()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:54:46.853

I don't think it has performance impact but it can have logic impact. If your javascript is not deferred and it tries to use a dom element declared after the script, the script will not run.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T09:55:39.120

i dont think so that the position of the code will affect the performance because whenever a jsp is loaded its with all its content and script so the complete code is already present in the browser, and it wont matter where your script lies in the code.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:02:55.967

在没有实际测试的情况下说话，对于任何危险的性能讨论，我很难想象它会产生任何重大影响。

一旦代码被解析，那么它的位置肯定是无关紧要的吗？所以它唯一可能影响的是初始化。但是我看不到 HTML 文件中的位置可能很重要，整个文件需要由浏览器解释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-05T12:52:12.343

您可以将 JavaScript 放置在网页中的任何位置。最好的做法是在最后加载 JS

# java - Java：使用套接字从客户端向服务器发送多个图像文件

> ID：10008776
> 
> 赞同：1
> 
> 时间：2012-04-04T09:52:31.103
> 
> 标签：java, sockets, file-io

我想从客户端向服务器发送多个图像文件为此我在我的应用程序中编写代码，但它只会发送一个图像。在客户端应用程序中有一个框架，在服务器应用程序中也有一个框架来启动/停止服务器。

还有一个问题是当客户端应用程序发送图像文件然后这个图像文件显示在服务器计算机上但是当我尝试打开这个图像文件然后什么都没有但是当我关闭服务器应用程序（服务器框架）然后我能够看到图片。

代码：

客户网站：

```
public void sendPhotoToServer(String str){ // str is image location
    try {
        InputStream input = new FileInputStream(str);
        byte[] buffer=new byte[1024];
        int readData;
        while((readData=input.read(buffer))!=-1){
        dos.write(buffer,0,readData); // dos is DataOutputStream
        }
    } catch (FileNotFoundException e) {

    } catch (IOException e) {

    }       
} 
```

在服务器端，此代码正在运行到线程中：

```
public void run() {
while (true) {
            try {
                byte[] buffer = new byte[8192];
                fis = new FileOutputStream("C:\\"+(s1++)+".jpg"); // fis is FileOutputStream
                while ((count = in.read(buffer)) > 0){ //count is a integer and 'in' is InputStream
                fis.write(buffer, 0, count); 
                fis.flush();    
                }
                } catch (Exception e) {}
}
} 
```

**问题：**

1.  只有第一张图像是由客户端发送的复制。
2.  只有当我关闭服务器应用程序时，我才能看到这个图像。

也不例外，我在其他类中连续调用**sendPhotoToServer**方法将所有图像文件发送为：

```
if (photoSourcePath != null) {
                            clientClass.sendPhotoToServer(photoSourcePath+"\\"+rowData.get(5));
                        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:59:14.673

当它的工作完成时，你的服务器端应该停止线程。`while`循环只是永远运行并保持流打开（这就是为什么您在关闭服务器时看到图像，然后线程才停止）。

尝试将服务器端更改为：

```
public void run() {
    boolean processing = true;
    while (processing) {
        try {
            byte[] buffer = new byte[8192];
            fis = new FileOutputStream("C:\\" + (s1++) + ".jpg"); // fis is
                                                                  // FileOutputStream
            while ((count = in.read(buffer)) > 0) { // count is a integer
                                                    // and 'in' is
                                                    // InputStream
                fis.write(buffer, 0, count);
                fis.flush();

            }
            processing = false;
        } catch (Exception e) {
            processing = false;
        }
    }
} 
```

# java - 外键约束导致数据库插入失败

> ID：10008780
> 
> 赞同：2
> 
> 时间：2012-04-04T09:52:59.833
> 
> 标签：java, database, postgresql, jdbc

我正在研究数据库迁移程序，我正在尝试将一个数据库迁移到另一个已经创建表的数据库。更具体地说，我有两个具有几乎相同表的数据库，一个已满，另一个为空。我的问题是迁移表值按字母顺序处理。有些表有外键，如果这些表按字母顺序从外键表中出现，我不能插入值。有什么方法可以禁用 java 或 postgresql 的外键检查。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:57:19.473

参照完整性是一个 DB 属性，而不是 JDBC 属性 - 您需要在运行导入之前显式删除或禁用数据库上的 FK 约束，然后再重新启用它们。

确定数据的层次结构并首先从独立记录开始插入数据，然后在插入期间将相关记录链接到这些记录可能是一个更好的主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:02:39.710

如果我是对的，就不可能在 postgresql 上禁用 fk。正如@mcfinnigan 所说，您可以在开始插入之前删除 fk ，也可以使用 DEFERRABLE 键重新创建约束。请参阅[postgresql CREATE TABLE 文档。](http://www.postgresql.org/docs/8.1/interactive/sql-createtable.html)

DEFFERABLE 意味着，在事务完成之前不会检查 fk。

# javascript - 从下拉列表中选择（浏览器缓存下拉列表）-触发哪个事件？

> ID：10008784
> 
> 赞同：5
> 
> 时间：2012-04-04T09:53:14.177
> 
> 标签：javascript, browser, event-handling, dom-events

**要旨**

当我们从`<input type="text">`.

**详细的**

在一个表单中，我们可以使用多个用户名登录，比如`A`, `B`, `ABC`。并且浏览器缓存所有这些值（wrt password remember）。因此，如果我们尝试使用以下方式登录`A`- 弹出一个下拉菜单，提供多个选项说`A`，`ABC` - 一旦我们选择提供的任何选项，就会触发哪个事件。

`oninput, onchange, onblur` -- 如果我们从浏览器提供的下拉菜单中选择，似乎都不会触发。

帮助，初学者

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:13:50.363

您可以将[这些](http://www.w3schools.com/tags/tag_select.asp)事件与 select 一起使用。缓存与下拉无关。

您需要什么取决于您的用途。

一般`onchange`用于获取值或在值发生变化时调用函数。

`onblur`当下拉损失焦点时会触发一个函数。例如，当您使用`tab`或其他方法时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-09T00:06:53.350

这个问题在这里得到了回答：[在输入更改事件上？](https://stackoverflow.com/questions/6458840/on-input-change-event)

> 在现代浏览器中使用输入事件。当用户在文本字段中键入、粘贴、撤消，基本上任何时候值从一个值更改为另一个值时，都会触发此事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-03T14:03:27.747

轻松使用选择事件

例子：

$('#test')。***select*** (function(){ alert('数据已更改'); });

# c++ - 用于单独访问器/修改器接口的 C++ 设计模式

> ID：10008785
> 
> 赞同：4
> 
> 时间：2012-04-04T09:53:18.003
> 
> 标签：c++, design-patterns, inheritance, interface

我有一个数据结构“人”

```
struct Person
{
  protected:
    string name;
    int age;
    string address;
    ...
} 
```

我想围绕这个结构创建“视图”，以分离出对不同成员变量的访问：

```
class PersonRead: public Person
{
  public:
    string getName() {..}
    int getAge() {...}
    ...
}
class PersonUpdate: public Person
{
  public:
    void setAddress( string address_ ) {...}
    void setAge( int age_ ) {...}
    ...
} 
```

我用它来只公开那些真正需要的方法/变量：

```
int main()
{
...
    writePersonDataToFile ( (PersonRead) personObj );
    updatePersonData ( (PersonUpdate) personObj);
...
} 
```

虽然上面的代码符合我的目的，但有几个问题，包括：

1.  这里的公共继承并不完全是“is-a”关系

2.  我需要从 Person 派生 IndianPerson 以及所有相应的接口。这会导致不良的菱形图案：

    ```
    struct IndianPerson: public Person {};
    class IndianPersonRead: public IndianPerson, public PersonRead {}; //Person Class common, Diamond pattern here! 
    ```

这种设计模式有名字吗？有什么更好的方法来实现这种模式？我有一种感觉政策类可能会有所帮助，但无法弄清楚如何实现这一点

任何例子都会有很大帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:40:08.877

对于您的场景，这可能看起来有点矫枉过正，但是，如果您想要细粒度地控制哪些类可以在您的类上调用不同的方法，那么[c++ 客户律师惯用](http://drdobbs.com/184402053)语可能是合适的。

有关此成语的详细说明，请参见[http://drdobbs.com/184402053](http://drdobbs.com/184402053)

这是一个粗略的示例（注意：虽然它基于我当前使用的生产代码，但尚未编译）：

```
class Person
{
public:
   /// constructor destructor etc:

private:
    string getName() { return name; }

public:
    /// Writer Attourney that access to allows class PersonReader access 
    /// to getXXX functions
    class ReaderAttorney
    {
    private:
        /// Add additional reader member functions...
        static string readName( Person& p )
        { 
            return p.getName();
        }

        // Make any classes that shuold be allowde read access friends of the 
        // attorney here
        friend class PersonReader;
    };

    /// Writer Attourney that access to allows class PersonWriter access 
    /// to setXXX functions
    class WriterAttorney
    {
    private:
        /// Add additiona reader member functions...
        static string setName( Person& p, const string& newName )
        { 
            p.setName( newName );
        }
        friend class PersonWriter;
    };

private:
    string name;
    int age;
    string address;
}; 
```

这可以按如下方式使用：

```
void PersonWriter::setPersonDetails( const string& name, int age .... )
{
   // PersonWriter is a frend of WriterAttorney and is granted access
   Person::WriterAttorney::setName( name );
   Person::WriterAttorney::setName( age );

   // Note this will fail, since PersonWriter is not a friend of 
   // ReaderAttorney, ergo it is not granted read permission:
   Person::ReaderAttorney::readName();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:39:11.600

我认为您的方法根本不正确：`PersonRead`并且`PersonUpdate`不是人。他们读取和修改 Person 数据，但实际上并非如此`Person`。

以同样的方式，`IndianPersonRead`并且`IndianPersonUpdate`不是`IndianPerson`.

我将这种关系分开如下：

*   `PersonRead`利用`Person`
*   `PersonUpdate`利用`Person`
*   `IndianPerson`继承自`Person`：是`Person`
*   `IndianPersonRead`继承自`PersonRead`和使用`IndianPerson`
*   `IndianPersonUpdate`继承自`PersonUpdate` 和使用`IndianPerson`

我展示了我的方法的一个例子：

```
#include <string>
#include <iostream>
using namespace std;

struct Person
{
    string getname() const { return name; }
    string getaddress() const { return address; }
    void setaddress(const string & address_) { address = address_; }
    void setname(const string & name_) { name = name_; }

    protected:
        string name;
        int age;
        string address;
};

class PersonRead
{
    public:
        string getname(const Person & p) { return p.getname(); }
};

class PersonUpdate
{
    public:
        void setAddress(Person & p, const string & address_ ) {p.setaddress(address_); }
        void setname(Person & p, const string & name_ ) {p.setname(name_); }
};

struct IndianPerson : public Person
{
    string gettribe() const { return tribe; }
    void settribe(const string & tribe_) { tribe = tribe_; }
    protected:
    string tribe;
};

struct IndianPersonRead : public PersonRead
{
    public:
        string gettribe(const IndianPerson & p) const { return p.gettribe(); }
};

struct IndianPersonUpdate : public PersonUpdate
{
    public:
    void settribe(IndianPerson & p, const string & t)   { p.settribe(t); }
};

int main(int argc, char **argv)
{
    IndianPerson ip;
    IndianPersonUpdate ipU;
    IndianPersonRead ipR;

    ipU.settribe(ip, "Cheroki");
    ipU.setname(ip, "Charly");
    cout << ipR.getname(ip) << " : " << ipR.gettribe(ip) << endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:52:30.400

首先，我同意 Tio 的观点 PersonUpdate 不是 Person 所以继承使用错误。另外我相信你需要让你的类带有目标来代表现实世界，所以像 PersonUpdate 这样的类是错误的，因为它们代表的是动作而不是对象。

在您的情况下，一种解决方案可能是使用访问者设计模式，因此 Person 可以接受特别设计的 IPersonStream 接口，以便在将实现此接口的类中执行序列化。人员流将接受其上的人员属性，或者人员的纪念品看看纪念品设计模式，并将其序列化为 xml 或您想要的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T11:11:20.170

我没有设计模式名称，但为了解决您的顾虑，我会交换继承关系，**让 Person 从 PersonReader 和 PersonWriter 接口继承**。这样，只能从 Person 读取的对象使用 PersonReader 接口，因此承诺不会更改它。

通过将 Person 的每个成员设为私有，您甚至可以确保不以其他方式访问 Person，但是从 Person 继承的每个类都应该将这些成员设为私有。

# osgi - OSGi：蓝图与 Spring DM

> ID：10008786
> 
> 赞同：36
> 
> 时间：2012-04-04T09:53:19.343
> 
> 标签：osgi, blueprint, spring-dm

我对 Blueprint 和 Spring DM 有点困惑：

从我*认为*是真的：

*   Spring DM 是 Spring Source 定义的框架
*   Blueprint 是 OSGi 联盟定义的框架
*   Blueprint 从 Spring DM 中“汲取”了许多想法

不？

我们能否期望这两个框架在未来合而为一（合并）？如果没有，哪一个将是最有未来感的？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-04T10:04:02.097

> OSGi 4.2 引入了基于 Spring DM (2.x) 是参考实现 (RI) 的 Spring Dynamic Modules 项目的蓝图服务规范。

简而言之：Blueprint 是一个规范，Spring DM 是 Blueprint API 的一个实现

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-05T12:48:56.803

Blueprint 是在 SpringSource/Interface21 的领导下在 OSGi 联盟中开发的。

但是，如果您正在寻找一种利用 OSGi 的方法，请使用带有注释的包（服务）之间的声明式服务 (DS) *。*根据我的经验，当您制作小的内聚包时，您并不真的需要连接 XML。DS 在处理服务方面比 Blueprint/Spring DM 好得多，因为它们倾向于“隐藏”动态性，而 DS 只是让它变得微不足道。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-08-04T12:15:30.053

我的理解是[SpringDM 是一个死项目](http://www.springsource.org/osgi/)。检查 GA 和发布日期。因此，尽管它最终对规范的开发做出了很大贡献，但它对类加载器的处理方式很糟糕。 [Apache-Aries](http://aries.apache.org/)是一个强大的蓝图实现。请注意，使用蓝图并不排除使用弹簧。我建议将[Karaf](http://karaf.apache.org)作为一个健壮的平台，可以使用[Eclipse Equinox](http://www.eclipse.org/equinox/)或[Apache Felix](http://felix.apache.org)对于 OSGI 引擎。如果您在应用程序级别进行开发，您的服务可能被企业内的其他团队或组织使用，或者被您的客户扩展，我喜欢 blueprint 与 DS。我认为蓝图也更适合传统的企业计算环境。但根据您的特定目标环境，DS 或[Ipojo](http://felix.apache.org/site/apache-felix-ipojo.html)可能更合适。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-04T13:41:57.937

除了 Dmytro Pishchukhin 的回答之外，应该指出 Spring DM 项目在某种程度上是一个死项目，因为 DM 2 从未达到“发布”版本。

相反，它被[贡献给了 Eclipse 基金会](http://www.springsource.org/osgi)，在那里它变成了[Gemini Blueprint 项目](http://www.eclipse.org/gemini/blueprint/)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-05T10:08:55.173

在 Gemini Blueprint 文档的介绍中，他们清楚地解释了区别： http: [//www.eclipse.org/gemini/blueprint/documentation/reference/1.0.2.RELEASE/html/index.html](http://www.eclipse.org/gemini/blueprint/documentation/reference/1.0.2.RELEASE/html/index.html)

我在这里复制：

> 第 1 章 Spring 动态模块成为 Eclipse Gemini 蓝图
> 
> 2009 年底，作为 Gemini 项目提案的成员，SpringSource 向 Eclipse 基金会贡献了 Spring Dynamic Modules（也称为 Spring OSGi）项目。Spring DM v2 代码库连同其问题跟踪器和论坛已移至 Eclipse.org。该项目在 Apache 许可和 EPL 下获得双重许可。
> 
> 虽然名称已更改，但代码及其功能保持不变。如迁移指南中所述，现有 Spring DM 应用程序可以轻松迁移到 Eclipse Gemini Blueprint。

# jquery - jquery模板插件的问题

> ID：10008800
> 
> 赞同：0
> 
> 时间：2012-04-04T09:54:11.403
> 
> 标签：jquery, jquery-ui-dialog, jquery-templates

我在页面上有一个网格。当我单击行时 - 项目编辑表单，其中项目数据显示在对话框（jquery 对话框 ui 插件）中。问题是在单击对话框“保存”按钮后，使用新的用户输入从 html 中获取数据项。这是我的代码：

```
$('#OutLookAccountsGrid').on('click', 'span.btnOutlookAccountEdit', function () {

    //getting data from grid row
    var account = $(this).tmplItem().data;
    //populating edit template with data
    var tbl = $('#outlookaccountEditFormTmpl').tmpl(account);

    //displaying edit form inside dialog
    tbl.dialog({
        modal: true,
        width: 400,
        buttons: {
            "Yes": function () {
                var $this = $(this);

                //PROBLEM!!! PROBLEM!!! PROBLEM!!!
                //want to get values from user, but instead getting old values
                //populated from grid row
                var data = $.tmplItem(this).data;

                //...
                //want to send tmplItem with new values throught ajax as data param
                //...

          }
        }
     })//end of dialog

}) 
```

是否可以获得具有新值的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T00:32:41.290

这个问题的答案：jquery模板只能以一种方式将数据与html绑定：从数据到html，因此输入的更改不会对数据产生影响。（有一些名为 jquery.datalink 的插件试图将对象链接到模板，但据我所知，它在当前版本的 teplate 插件中不起作用）所以在用户将值插入输入后获取更改数据的唯一方法是：

```
 $.tmplItem(this).data["UserName"] = $this.find('input.outlusernm').val(); 
```

这将改变数据对象

# ruby-on-rails - Redmine 项目文件来自服务器显示实际的 html 代码而不是网页

> ID：10008806
> 
> 赞同：0
> 
> 时间：2012-04-04T09:54:28.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, redmine, shared-hosting

当我以[http://redmine.mydomain.com](http://redmine.mydomain.com)浏览我的 redmine url 时，它会打开下载对话框并保存该主页而不是重新生成 html

当我执行[http://redmine.mydomain.com/login](http://redmine.mydomain.com/login)时，它会显示登录页面的 html 代码，而不是显示登录页面。

它在 3-4 天之前工作正常。突然怎么了？请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T10:04:41.520

你用apache做代理吗？确保您没有使用某些 AddType 或 Header 指令修改 ContentType 标头。

在 firefox 11 上，您可以打开 Web 控制台 ( **Ctr-Shift-K** )，打开[http://redmine.mydomain.com/login](http://redmine.mydomain.com/login)并查看响应的**Content-Type**。

您应该收到类似的内容：**Content-Type:text/html; 字符集=utf-8**。

如果您使用的是瘦服务器或杂种服务器，您也可以尝试直接向机架服务器发出请求，看看您是否也获得了相同的 Content-Type。

# php - 删除大量文件

> ID：10008807
> 
> 赞同：5
> 
> 时间：2012-04-04T09:54:29.023
> 
> 标签：php, linux

我的 /tmp 中有 800 万个文件，我需要删除它们。该服务器也在运行非常重要的应用程序，我不能超载它。

我正在使用小型 php 脚本：

```
<?php
$dir = "/tmp";
$dh = opendir( $dir);
$i = 0;
while (($file = readdir($dh)) !== false) {
  $file = "$dir/$file";
  if (is_file( $file) && (preg_match("/open/", $file))) {
    unlink( $file);
    #echo $file;
    if (!(++$i % 10000)) {
      echo "$i files removed\n";
    }
  }
}
?> 
```

但这使我的应用程序无法访问，即使使用： $ ionice -c 3 php ./tmp_files_killer.php $ nice -n 20 php ./tmp_files_killer.php

我已经更改了我的脚本，所以它不会一直读取 /tmp 目录：

```
$ ls -1 /tmp > tmp_files_list.txt

<?php
$file = "tmp_files_list.txt"; 
$infile = fopen($file, "r"); 

while ( !feof( $infile ) ) { 
  $line = rtrim( fgets( $infile ), "\n\r" ); 
  if ($line != null){ 
    $file = "$dir/$line";
    unlink( $file);
    if (!(++$i % 10000)) {
      echo "$i files removed\n";
    }
#    echo $line + "\n";
  } 
} 
?> 
```

但运行这个脚本也会减慢我的应用程序。进程不加载 CPU，我有足够的内存。

各位大佬，怎么删除这些文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:01:00.553

您可以让脚本在“块”中运行，然后在每个块之间休眠。

在您的第二个版本中，您可以在回声之后添加一个 sleep()，比如 30 秒。如果您调整已删除文件的数量和休眠时间，它应该保持服务器响应，同时仍能充分执行。

将来，您应该定期从 cron 运行清理作业，以阻止自己到达这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T09:58:23.207

如果你可以直接在linux终端上执行命令那么这将变得非常简单，直接执行这个命令

```
find /tmp -type f -exec rm -v {} \; 
```

此外，如果您想定期执行此过程，那么您可以配置一个 cronjob 在午夜运行，此时您的服务器几乎处于空闲状态

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:01:04.173

我会用另一种方式解决这个问题：一次性销毁整个文件系统。

创建一个新的文件系统——它可以是一个简单的`tmpfs`文件系统，它可以是一个存在于回送挂载的文件中的 ext2 或 ext3 文件系统，它可以是一个新驱动器（USB 记忆棒？），任何东西。

然后`mv`将`/tmp`挂载点指向另一个名称，将新的文件系统挂载到 上`/tmp`，然后在原来`mke2fs`的*分区*`/tmp`上运行，从头开始编写一个全新的干净文件系统。

重新创建旧的 tmp 设备后，您可以再次执行这些步骤 -`mv /tmp /new-tmp`复制应该持久`mount`的数据，重新格式化重新格式化的设备`/tmp,`，然后复制回应该持久的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T15:22:01.263

这可能是删除 /tmp 下所有文件的更快的标准方法：

```
find /tmp -type f -exec rm {} + 
```

使用 Gnu find，这可能会稍微快一些：

```
find /tmp -type f -delete 
```

如果 /tmp 在其自己的文件系统上，只需卸载并 mkfs 即可。如果是 tmpfs，只需重新启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T09:57:28.070

当我想清理画廊的上传目录时，我做了这种事情。它真的很长......所以我决定尝试`exec()` 用命令点赞命令`rm /path/to/clean/*`，它变得非常快。

不是很干净，但至少它对我有用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T10:00:49.653

是否需要使用 php 脚本进行清理？

如果没有，看看这篇[文章](http://linuxgazette.net/issue18/tmp.html)......应该会给你一些想法

# java - 优化将 int 转换为 base36

> ID：10008809
> 
> 赞同：5
> 
> 时间：2012-04-04T09:54:43.240
> 
> 标签：java, string, optimization, base36

我目前做了很多从 int 到 base36 字符串的转换（程序时间的 70%~）。这段代码有什么明显的优化吗？

```
public static final String alphabet = "0123456789abcdefghijklmnopqrstuvwxyz";
public static StringBuilder b = new StringBuilder();
public static String sign = "";

public static String convertToBase36(int number)
{
    if (number == 0)
    {
        return "0";
    }

    b.delete(0, b.length());

    sign = "";
    if (number < 0)
    {
        sign = "-";
        number = -number;
    }

    int i = 0;
    int counter = 10;

    while (number != 0 && counter > 0)
    {
        counter--;
        i = number % 36;
        number = (number - i)/36;
        b.append(alphabet.charAt(i));

    }           

    return sign + b.reverse().toString();
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-04T10:00:26.533

您可以使用：

```
String s = Integer.toString(100, 36);
int i = Integer.parseInt("2s", 36); 
```

更容易维护，并且可能得到了很好的优化。

# jvm-crash - JVM 因 EXCEPTION_ACCESS_VIOLATION 而崩溃

> ID：10008811
> 
> 赞同：1
> 
> 时间：2012-04-04T09:54:44.827
> 
> 标签：jvm-crash

在我的 java 应用程序中，多个线程通过 dll（名为 ProcessDLL.dll）定期获取系统的“进程列表”。当我的应用程序中只有一个线程时，它可以正常工作。但是有多个线程我得到一个**EXCEPTION_ACCESS_VIOLATION**。这是 DLL 实现的问题还是在多个线程试图访问 dll 的 java 应用程序中？有任何想法吗...

以下是我的错误日志：

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_ACCESS_VIOLATION (0xc0000005) at pc=0x7c9108d3, pid=2880, tid=1584
#
# JRE version: 6.0_16-b01
# Java VM: Java HotSpot(TM) Client VM (14.2-b01 mixed mode windows-x86 )
# Problematic frame:
# C  [ntdll.dll+0x108d3]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x0a9c9800):  JavaThread "taskmgr" [_thread_in_native, id=1584, stack(0x0be70000,0x0bec0000)]

siginfo: ExceptionCode=0xc0000005, reading address 0x656c6441

Registers:
EAX=0x656c6441, EBX=0x0b2f0178, ECX=0x656c6449, EDX=0x000001aa
ESP=0x0bebf778, EBP=0x0bebf834, ESI=0x0b3a31b0, EDI=0x0b2f0000
EIP=0x7c9108d3, EFLAGS=0x00010293

Top of Stack: (sp=0x0bebf778)
0x0bebf778:   0b2f21d0 0b3a3860 00000000 00000000
0x0bebf788:   0bebf76c 0b3a31b0 0b2f0178 7403c6dc
0x0bebf798:   0b3b3c50 ffffffff 74005087 74005bec
0x0bebf7a8:   0b3b0ff8 0b6e30b8 656c6441 00000000
0x0bebf7b8:   00000000 0bebf7f0 00000000 0b6e2fa8
0x0bebf7c8:   0b2a1ef8 6a957160 656c6449 000006a8
0x0bebf7d8:   0b6e7740 00000001 0b712c98 00000035
0x0bebf7e8:   0bebf80c 7400605b 0b3b0ff8 74004866 

Instructions: (pc=0x7c9108d3)
0x7c9108c3:   d9 74 16 8d 41 f8 89 85 7c ff ff ff 66 8b 55 e4
0x7c9108d3:   66 3b 10 0f 87 93 fe ff ff 8d 46 08 89 85 64 ff 

Stack: [0x0be70000,0x0bec0000],  sp=0x0bebf778,  free space=317k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [ntdll.dll+0x108d3]
C  [ProcessDLL.dll+0x127a2]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  process.info.NTProcessWin32.jniGetProcessInfosN([Ljava/lang/String;J)[Lprocess/info/NTProcess;+0
j  process.info.NTProcessWin32.getProcessInfos([Ljava/lang/String;J)[Lprocess/info/NTProcess;+9
j  process.info.InstanceController.getAndSetProcesses()V+17
j  process.info.ControllerImpl$UpdateGraphTimer.run()V+7
j  java.util.TimerThread.mainLoop()V+221
j  java.util.TimerThread.run()V+1
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x003a7000 JavaThread "DestroyJavaVM" [_thread_blocked, id=1288, stack(0x00840000,0x00890000)]
=>0x0a9c9800 JavaThread "taskmgr" [_thread_in_native, id=1584, stack(0x0be70000,0x0bec0000)]
  0x0afb8400 JavaThread "notepad" [_thread_blocked, id=3408, stack(0x0be20000,0x0be70000)]
  0x0aee8800 JavaThread "mspaint" [_thread_blocked, id=3188, stack(0x0bdd0000,0x0be20000)]
  0x0aee7400 JavaThread "mmc" [_thread_blocked, id=3196, stack(0x0bd80000,0x0bdd0000)]
  0x0aa5dc00 JavaThread "firefox" [_thread_blocked, id=1224, stack(0x0bd30000,0x0bd80000)]
  0x0b0b7c00 JavaThread "eclipse" [_thread_in_native, id=2628, stack(0x0bc80000,0x0bcd0000)]
  0x0b7e4400 JavaThread "cmd" [_thread_blocked, id=3804, stack(0x0bc30000,0x0bc80000)]
  0x0b7e0800 JavaThread "7zFM" [_thread_blocked, id=296, stack(0x0bbe0000,0x0bc30000)]
  0x0b0b5000 JavaThread "Keep-Alive-Timer" daemon [_thread_blocked, id=3724, stack(0x0b790000,0x0b7e0000)]
  0x0af9cc00 JavaThread "Thread-1" daemon [_thread_blocked, id=244, stack(0x0b0c0000,0x0b110000)]
  0x0aa5a800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=1480, stack(0x0ae20000,0x0ae70000)]
  0x0aa57400 JavaThread "CompilerThread0" daemon [_thread_blocked, id=3656, stack(0x0add0000,0x0ae20000)]
  0x0aa52800 JavaThread "JDWP Command Reader" daemon [_thread_in_native, id=3756, stack(0x0ad80000,0x0add0000)]
  0x0aa47400 JavaThread "JDWP Event Helper Thread" daemon [_thread_blocked, id=3672, stack(0x0ad30000,0x0ad80000)]
  0x0aa44c00 JavaThread "JDWP Transport Listener: dt_socket" daemon [_thread_blocked, id=3500, stack(0x0ace0000,0x0ad30000)]
  0x0aa39c00 JavaThread "Attach Listener" daemon [_thread_blocked, id=3660, stack(0x0abf0000,0x0ac40000)]
  0x0aa38800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=2604, stack(0x0aba0000,0x0abf0000)]
  0x0aa29400 JavaThread "Finalizer" daemon [_thread_blocked, id=1628, stack(0x0ab50000,0x0aba0000)]
  0x0aa24c00 JavaThread "Reference Handler" daemon [_thread_blocked, id=3940, stack(0x0ab00000,0x0ab50000)]

Other Threads:
  0x0aa20800 VMThread [stack: 0x0aab0000,0x0ab00000] [id=3048]
  0x0aa6e000 WatcherThread [stack: 0x0ae70000,0x0aec0000] [id=3232]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 960K, used 733K [0x02910000, 0x02a10000, 0x02df0000)
  eden space 896K,  74% used [0x02910000, 0x029b76a8, 0x029f0000)
  from space 64K,  99% used [0x02a00000, 0x02a0fff8, 0x02a10000)
  to   space 64K,   0% used [0x029f0000, 0x029f0000, 0x02a00000)
 tenured generation   total 4096K, used 3164K [0x02df0000, 0x031f0000, 0x06910000)
   the space 4096K,  77% used [0x02df0000, 0x031073c0, 0x03107400, 0x031f0000)
 compacting perm gen  total 12288K, used 8431K [0x06910000, 0x07510000, 0x0a910000)
   the space 12288K,  68% used [0x06910000, 0x0714bc90, 0x0714be00, 0x07510000)
No shared spaces configured.

Dynamic libraries:
0x00400000 - 0x00424000     C:\Program Files\Java\jdk1.6.0_16\bin\javaw.exe
0x7c900000 - 0x7c9b2000     C:\WINDOWS\system32\ntdll.dll
0x7c800000 - 0x7c8f6000     C:\WINDOWS\system32\kernel32.dll
0x77dd0000 - 0x77e6b000     C:\WINDOWS\system32\ADVAPI32.dll
0x77e70000 - 0x77f03000     C:\WINDOWS\system32\RPCRT4.dll
0x77fe0000 - 0x77ff1000     C:\WINDOWS\system32\Secur32.dll
0x7e410000 - 0x7e4a1000     C:\WINDOWS\system32\USER32.dll
0x77f10000 - 0x77f59000     C:\WINDOWS\system32\GDI32.dll
0x76390000 - 0x763ad000     C:\WINDOWS\system32\IMM32.DLL
0x7c340000 - 0x7c396000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\msvcr71.dll
0x6d8b0000 - 0x6db3b000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\client\jvm.dll
0x76b40000 - 0x76b6d000     C:\WINDOWS\system32\WINMM.dll
0x6d860000 - 0x6d86c000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\verify.dll
0x6d3e0000 - 0x6d3ff000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\java.dll
0x6d340000 - 0x6d348000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\hpi.dll
0x76bf0000 - 0x76bfb000     C:\WINDOWS\system32\PSAPI.DLL
0x6d430000 - 0x6d459000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\jdwp.dll
0x6d750000 - 0x6d756000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\npt.dll
0x6d8a0000 - 0x6d8af000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\zip.dll
0x6d2b0000 - 0x6d2b7000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\dt_socket.dll
0x71ab0000 - 0x71ac7000     C:\WINDOWS\system32\WS2_32.dll
0x77c10000 - 0x77c68000     C:\WINDOWS\system32\msvcrt.dll
0x71aa0000 - 0x71aa8000     C:\WINDOWS\system32\WS2HELP.dll
0x71a50000 - 0x71a8f000     C:\WINDOWS\System32\mswsock.dll
0x76f20000 - 0x76f47000     C:\WINDOWS\system32\DNSAPI.dll
0x76d60000 - 0x76d79000     C:\WINDOWS\system32\iphlpapi.dll
0x76fb0000 - 0x76fb8000     C:\WINDOWS\System32\winrnr.dll
0x76f60000 - 0x76f8c000     C:\WINDOWS\system32\WLDAP32.dll
0x76fc0000 - 0x76fc6000     C:\WINDOWS\system32\rasadhlp.dll
0x662b0000 - 0x66308000     C:\WINDOWS\system32\hnetcfg.dll
0x71a90000 - 0x71a98000     C:\WINDOWS\System32\wshtcpip.dll
0x10000000 - 0x1003b000     C:\DATA\ProcessDLL.dll
0x74000000 - 0x74056000     C:\WINDOWS\system32\pdh.dll
0x763b0000 - 0x763f9000     C:\WINDOWS\system32\comdlg32.dll
0x773d0000 - 0x774d3000     C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.6028_x-ww_61e65202\COMCTL32.dll
0x77f60000 - 0x77fd6000     C:\WINDOWS\system32\SHLWAPI.dll
0x7c9c0000 - 0x7d1d7000     C:\WINDOWS\system32\SHELL32.dll
0x77a80000 - 0x77b15000     C:\WINDOWS\system32\CRYPT32.dll
0x77b20000 - 0x77b32000     C:\WINDOWS\system32\MSASN1.dll
0x74320000 - 0x7435d000     C:\WINDOWS\system32\ODBC32.dll
0x711a0000 - 0x711a6000     C:\WINDOWS\system32\odbcbcp.dll
0x77c00000 - 0x77c08000     C:\WINDOWS\system32\VERSION.dll
0x774e0000 - 0x7761e000     C:\WINDOWS\system32\ole32.dll
0x77120000 - 0x771ab000     C:\WINDOWS\system32\OLEAUT32.dll
0x73000000 - 0x73026000     C:\WINDOWS\system32\WINSPOOL.DRV
0x0b280000 - 0x0b297000     C:\WINDOWS\system32\odbcint.dll
0x5e750000 - 0x5e75d000     C:\WINDOWS\system32\perfproc.dll
0x6d6c0000 - 0x6d6d3000     C:\Program Files\Java\jdk1.6.0_16\jre\bin\net.dll

VM Arguments:
jvm_args: -agentlib:jdwp=transport=dt_socket,suspend=y,address=localhost:1349 -Dfile.encoding=UTF-8 
java_command: process.info.MainClass
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.6.0_16
PATH=C:\Program Files\Java\jdk1.6.0_16\jre\bin;C:/Program Files/Java/jre6/bin/client;C:/Program Files/Java/jre6/bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\Program Files\Java\jdk1.6.0_16\bin;C:\Program Files\Ant\bin;C:\Program Files\TortoiseSVN\bin;C:\Program Files\NSIS;;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\WINDOWS\system32\WindowsPowerShell\v1.0
USERNAME=Administrator
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 42 Stepping 7, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows XP Build 2600 Service Pack 3

CPU:total 2 (1 cores per cpu, 1 threads per core) family 6 model 42 stepping 7, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, sse4.2

Memory: 4k page, physical 2096620k(1088228k free), swap 4036496k(3130120k free)

vm_info: Java HotSpot(TM) Client VM (14.2-b01) for windows-x86 JRE (1.6.0_16-b01), built on Jul 31 2009 11:26:58 by "java_re" with MS VC++ 7.1

time: Wed Apr 04 11:15:02 2012
elapsed time: 30 seconds 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:25:15.633

我认为您 PrecessDLL.dll 不是线程安全的。您必须同步您的代码，每次只能访问一次。或者您必须将 ProcessDLL.dll 修复为多线程安全。

你也可以更新你的 JVM（1.6.16 已经很老了），但我不认为这个版本会导致错误。

**更新**

> # 崩溃发生在 Java 虚拟机之外的本地代码中。

更好的方法（从我的角度来看）是修复 DLL。

# objective-c - NSLocalizableString not found my key

> ID：10008815
> 
> 赞同：0
> 
> 时间：2012-04-04T09:54:51.247
> 
> 标签：objective-c, ios, nslocalizedstring, localizable.strings

I'm developing iPad international application.
I'm using methods `NSLocalizableString` to translate my application.
I have added keyword manually in my `Localizable.strings` in English and in French named "Orders" with value.
When I call my method `NSLocalizableString` with the keyword, it didn't found my keyword and don't apply the translation.
For keyword above and below, it's working perfectly.

Some code parts :

```
**Localizable.strings**
    /* Change datas */
    "ChangeDatas" =  "Modifier les données";
    /* Orders */
    "Orders" =  "Détails de votre commande";
    /* Label */
    "SomeLabel" =  "Label";
**file.m**
    //Work fine
    NSLog(@"My data translation : %@", NSLocalizedString(@"ChangeDatas", @"Change datas"));
    //Don't work
    NSLog(@"My orders translation : %@", NSLocalizedString(@"Orders", @"Orders")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:37:39.037

您确定您的编辑器使用了正确的编码吗？另外，有正确的行尾吗？

使用该[`plutil`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man1/plutil.1.html)命令检查您的 .strings 文件不会有什么坏处。

你确定你已经为你在运行时使用的相同语言/区域编辑了 .strings 文件吗？

# iphone - how to attach files for mailing in xcode

> ID：10008816
> 
> 赞同：0
> 
> 时间：2012-04-04T09:54:52.210
> 
> 标签：iphone, email-attachments

I have a mailcomposer in which i have attached a file through coding(hard-coded)..

I need to have a button so that When i press the button.It should ask which file to attach...

My code is shown below in which i am attaching the file hordcoded...

```
UIImage *img=[UIImage imageNamed:@"Mehmood.jpg"];
NSData *imgData=UIImageJPEGRepresentation(img, 1);
[composer addAttachmentData:imgData mimeType:@"image/jpeg" fileName:@"Mehmood.jpg"]; 
```

Even I need to attach any file which i am selecting after button click(not the specific one like `png/jpeg`)...

Please help... Thanks in advance

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:33:57.410

您无法真正修改标准邮件编辑器窗口来添加您自己的按钮。在展示邮件编辑器之前，您应该询问用户他们想要附加什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:07:33.310

也许这会对你有所帮助。

[iPhone MIME 类型数据库在哪里？](https://stackoverflow.com/questions/2439020/wheres-the-iphone-mime-type-database/2439038#2439038)

# php - Drupal 7 PHP: How to customize the webform module confirmation page?

> ID：10008820
> 
> 赞同：1
> 
> 时间：2012-04-04T09:55:06.063
> 
> 标签：php, drupal-7, drupal-webform

I include the webform in site, now when I submit the form, then I need to give the confirmation to user that your request has been submitted & I need to show the user that, how many request he submitted in the system like "Previous submission" page.

For this, I want to customize the webform-confirmation.tpl.php in webform module, I tried to include webform.report.inc and using webform_results_table($node, 0), displaying table but it will not give the Operation view, edit, delete.

Please help me to find out the solution for this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T06:25:32.563

请将此代码复制到自定义模块 costom_module_menu_alter(&$items) 的 _alter 挂钩中

```
$items['node/%webform_menu/done']= array(
    'page callback' => 'confirmation',// custom method on submission of form
    'type' => MENU_CALLBACK,
    'access callback' => MENU_DEFAULT_LOCAL_TASK,
   );
} 
```

并在确认功能中定义您自己的代码

清除整个缓存

# jquery - How can I re-position jquery appended divs?

> ID：10008821
> 
> 赞同：0
> 
> 时间：2012-04-04T09:55:09.557
> 
> 标签：jquery, soundcloud

Im currently using soundclouds jquery player to add music to my site but I'd like to know how I can move the album covers from their current assigned position which is within the '$player' and move them into a div id called "#inner"?

currently the jquery looks like this

```
 $artworks = $('<ol class="sc-artwork-list"></ol>').appendTo($player),
    $list = $('<ol class="sc-trackslist"></ol>').appendTo($player); 
```

full player script can be found here [http://jsfiddle.net/Y7D2E/](http://jsfiddle.net/Y7D2E/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:34:23.650

专辑封面在 var $artworks 中。如果你想将它们移动到 div id=#inner，只需将行更改为`$artworks = $('<ol class="sc-artwork-list"></ol>').appendTo('#inner')`

# mongodb - 文件夹结构的 NoSQL 模式

> ID：10008825
> 
> 赞同：2
> 
> 时间：2012-04-04T09:55:24.553
> 
> 标签：mongodb, nosql

我有代表文件夹结构的文档。一个文件夹可以包含其他文件夹（嵌套），理论上无限层深，但对于我们的应用程序来说更现实的是 3 或 4 层。我需要能够检索单个项目（一个节点），也许嵌入会使这项任务有点困难？

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T08:38:56.240

[文档](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB)对在 mongodb 中存储分层数据的更流行/常见的方法进行了很好的总结。

[嵌入文档](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB#TreesinMongoDB-FullTreeinSingleDocument)- 有明显的缺点

> *   很难搜索
> *   很难取回部分结果
> *   如果您需要一棵大树，可能会变得笨拙。此外，MongoDB 中的文档大小有限制——v1.8 中为 16MB（未来版本可能会增加限制）。

由于您需要能够检索单个项目 - 这可能*不是*您的用例的最佳选择。

[祖先数组](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB#TreesinMongoDB-ArrayofAncestors)或[物化路径](http://www.mongodb.org/display/DOCS/Trees+in+MongoDB#TreesinMongoDB-MaterializedPaths%28FullPathinEachNode%29)可能更适合您所描述的内容 - 您可以选择使用 _id 的完整文件路径，因为它是唯一的，并且您希望通过更常见的方式查找数据。

# iphone - Configure an app for deployment for as many device as possible

> ID：10008833
> 
> 赞同：0
> 
> 时间：2012-04-04T09:55:56.800
> 
> 标签：iphone, ios

I wanna to deploy a simple Iphone/Ipad application. Wanna to configure the application in Xcode so that I can deploy it and it will work on as many devices (IOS operating systems) possible. How should I configure the app to achieve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:16:29.980

使应用程序通用并将**部署目标**设置为**3.0**，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/8d474b383e4f49ec4c0434e96fe278fc.png)

要添加对**armv6**架构的支持，请转到**Build Settings选项卡并将****Architectures**的值修改为**$(VALID_ARCHS)**，如下面的屏幕截图所示。

![在此处输入图像描述](../Images/2ae004376e2d5eb5c5027eb0c963dcbd.png)

然后从**Info选项卡中的****Required Device Capabilities**中删除**armv7** ，如下面的屏幕截图所示。

 ****![在此处输入图像描述](../Images/a17061ae1ac3a18c99d078867082b7f3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:12:03.787

仅使用 iOS 3.13 及更低版本中可用的功能。****

# iphone - In-App Update ask for purchase it again

> ID：10008836
> 
> 赞同：1
> 
> 时间：2012-04-04T09:56:02.993
> 
> 标签：iphone, objective-c, in-app-purchase, storekit

I am selling apps via In-App within my App, currently what I am doing is, when anyone has already purchased the In-App item, then at the time of update it ask for purchase it again, it doesn't charge any money but it asks each time for log in and password, Is any way to skip this log in progress, I want it should be updated without asking for purchase and log in password.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:09:33.327

您必须以某种方式在磁盘上缓存用户的购买历史记录以防止这种情况发生，否则您必须要求用户至少向 Apple 进行一次身份验证（通过运行交易恢复或重新购买您的产品）。

# html - Forms and ajax uploaded files

> ID：10008837
> 
> 赞同：1
> 
> 时间：2012-04-04T09:56:04.143
> 
> 标签：html, ajax, forms, conventions

If I have form where user can upload files via Ajax (and upload is available only when JavaScript is turned on) and some other text fields etc. What if is user opens a new page for same form. Should that show already uploaded files, or are uploaded files only related to page where files where uploaded? I am asking this because I don't know what is common convention in these kind of situations.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:50:50.337

我不知道有什么约定，但是如果您有一个经过身份验证的用户，并且您知道该用户已经上传了某个表单的文件，我认为在第二个实例上显示已经上传的文件是个好主意表格。

主要好处是通过阻止重复上传来节省时间、空间和带宽。另一个好处是您可以通过消除重新上传文件的需要来帮助用户完成任务。

而且我想不出显示已上传文件的任何缺点。

希望这可以帮助！

# php - 为什么使用 dom 来解析网页而不是正则表达式？

> ID：10008839
> 
> 赞同：5
> 
> 时间：2012-04-04T09:56:09.873
> 
> 标签：php, regex, parsing, dom, search

我一直在寻找有关在页面中查找内容的问题，并且很多答案建议`DOM`在解析网页时使用而不是`REGEX`. 为什么会这样？它会改善处理时间还是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T09:59:23.347

DOM 解析器实际上是在解析页面。

正则表达式是在搜索文本，而不是理解 HTML 的语义。

可以证明 HTML 不是常规语言；因此，**不可能**创建一个正则表达式来解析 HTML 文档中任意元素模式的所有实例，而不匹配一些不是该元素模式实例的文本。

您*可能*能够设计一个适用于您的特定用例的正则表达式，但是准确预见将提供给您的 HTML（以及因此它将如何破坏您的有限用例正则表达式）是非常困难的。

此外，正则表达式比 XPath 表达式更难适应页面内容的变化，而且 XPath（在我看来）更易于阅读，因为它不需要像标签打开和关闭这样的语法零碎。

因此，不要为工作使用错误的工具（用于结构化文档的文本解析工具），而是为工作使用正确的工具（用于解析 HTML 的 HTML 解析器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:32:17.657

我再也听不到“HTML 不是常规语言……”了。正则表达式（如在今天的语言中使用的）也不是正则表达式。

简单的答案是：

**正则表达式不是解析器**，它描述了一个模式并且它将匹配该模式，但它不知道文档结构。您无法使用一个正则表达式解析任何内容。当然，正则表达式可以是解析器的一部分，我不知道，但我假设几乎每个解析器都会在内部使用正则表达式来查找某些子模式。

如果您可以为要在 HTML 中找到的内容构建该模式，那么可以使用它。但是很多时候你不能创建这种模式，因为它实际上不可能覆盖所有的极端情况，或者像找到所有链接这样的依赖关系，但前提是它们是绿色而不是粉红色。

在大多数情况下，使用解析器要容易得多，它可以理解文档的结构，也可以接受很多“损坏”的 HTML。它使您可以轻松访问所有链接或某个表格的所有表格元素，或者...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T09:58:45.403

在我看来，在您无法控制内容的页面上使用 REGEXP 会更安全：HTML 可能没有正确形成，然后 DOM 解析器可能会失败。

编辑：
好吧，考虑到我刚刚读到的内容，只有在需要非常小的东西时才应该使用正则表达式，例如获取文档的所有链接等。

# asp.net - Issue with CompileAssemblyFromSource when called from a WCF app

> ID：10008841
> 
> 赞同：0
> 
> 时间：2012-04-04T09:56:34.340
> 
> 标签：asp.net, wcf, system.reflection

I have a WCF service that exposes a method. When a client calls this method, the following occurs:

1.  the method does some processing
2.  it tries to load an assembly if its already there
3.  if the above dll isn't there, it generates C# code, compiles it using CSharpCodeProvider's CompileAssemblyFromSource api
4.  It then loads the just generated assembly

Now the problem. The first time the method it called, it generates the assembly at point 3), and when it tries to return the assembly reference via CompilerResults.CompiledAssembly it throws a file not found exception. However, I can clearly see that the assembly has been generated at the specified location and I can open it with other applications.

If I call the method again via a client, it is able to load the assembly (it was successfully generated as a result of the previous call) and goes ahead to do the remaining set of tasks. Only when the assembly isnt there and it generates it and goes ahead to load it immediately, I get that exception. Any ideas? I have tried playing around with the web.config, changing impersonation to true/false. I have a seperate app pool to run this web application and I tried changing the identity of the app pool from local service to local system, even gave my windows logon credentials which has admin rights but no luck.

Any help would be much appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:10:47.523

你确定它正在生成程序集吗？我有同样的问题，除了我找不到生成的`.dll`. 我首先怀疑它无法写入文件夹，所以它现在调用`CreateDirectory`并删除一个文本文件以证明该文件夹是可写的。

无论如何，同样的问题，没有成功。真的没有其他人遇到过这个问题吗？

我将远程调试服务器并查看是否可以逐步通过 Microsoft 的 PDB...

- 编辑 -

无需单步执行 Microsoft 的代码。我查看了 CompilerResults 的 Errors 集合，其中有 1 项：“无法打开元数据文件 'c:\Windows\System32\aaclient.dll' -- '试图加载一个程序格式不正确。'"

当我让 Directory.GetCurrentDirectory() 获取其他 DLL 时，它使用的是 Windows System32 目录...

- 编辑 -

通过从执行程序集的文件夹中添加引用解决了这个问题：

```
CompilerParameters compilerParameters = new CompilerParameters
    {
        OutputAssembly = Path.Combine(GeneratedAssembliesFolder, string.Format("{0}.Generated.dll", typeName))
    };
string executingDirectory = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location);
string[] dllFiles = Directory.GetFiles(executingDirectory, "*.dll");
compilerParameters.ReferencedAssemblies.AddRange(dllFiles.Select(f => Path.Combine(executingDirectory, f)).ToArray());
IEnumerable<string> exeFiles =Directory.GetFiles(executingDirectory, "*.exe").Where(f => !f.Contains(".vshost."));
compilerParameters.ReferencedAssemblies.AddRange(exeFiles.Select(f => Path.Combine(executingDirectory, f)).ToArray()); 
```

为了获得更大的健壮性，可以添加对二进制文件是否是有效的托管代码程序集的检查。此代码*也*可以通过在两个 GetFiles 调用之间使用 Linq .Union 来缩短。

要找到合适的文件夹来写入：

```
private static string generatedAssembliesFolder;

private static string GeneratedAssembliesFolder
{
    get
    {
        if (generatedAssembliesFolder == null)
        {
            string[] candidateFolders = new[]
                {
                    Environment.GetEnvironmentVariable("TEMP", EnvironmentVariableTarget.Process),
                    Environment.GetEnvironmentVariable("TMP", EnvironmentVariableTarget.Process),
                    Environment.GetEnvironmentVariable("TEMP", EnvironmentVariableTarget.User),
                    Environment.GetEnvironmentVariable("TMP", EnvironmentVariableTarget.User),
                    Environment.GetEnvironmentVariable("TEMP", EnvironmentVariableTarget.Machine),
                    Environment.GetEnvironmentVariable("TMP", EnvironmentVariableTarget.Machine),
                    Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData),
                    Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData)
                };
            foreach (string candidateFolder in candidateFolders)
            {
                try
                {
                    if (!Directory.Exists(candidateFolder)) Directory.CreateDirectory(candidateFolder);
                    string testFileName = Path.Combine(candidateFolder, Path.GetRandomFileName());
                    File.WriteAllBytes(testFileName, new byte[0]);
                    File.Delete(testFileName);
                }
                catch (Exception ex)
                {
                    continue;
                }
                generatedAssembliesFolder = candidateFolder;

                break;
            }
        }
        return generatedAssembliesFolder;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-24T11:05:06.943

感谢 user1796307 的输入。我已经解决了这个问题，但忘记更新了。分享给大家，让大家受益。这是 .NET Fusion 在起作用。它缓存程序集加载路径，如果之前从同一位置加载的尝试失败，它甚至不会尝试加载程序集。换句话说：

```
if (Assembly.Load("C:\xyz.dll") == null)
 {
    Compile("C:\xyz.dll"); // Now the dll exists
    Assembly.Load("C:\xyz.dll"); // this will still fail
 }

The solution is to change it as:

    if (!File.Exists("C:\xyz.dll")
{
  Compile("C:\xyz.dll"); // Now the dll exists
  Assembly.Load("C:\xyz.dll"); // this will now work

} 
```

# java - JPanel custom paint

> ID：10008842
> 
> 赞同：2
> 
> 时间：2012-04-04T09:56:37.180
> 
> 标签：java, swing, jpanel, paint

I am having an issue painting a JPanel. It paints correctly, however when I resize the parent container, the JPanel gets painted at the top left corner of the window, as well as in the correct position.

The JPanel has a custom paint method, that paints a set of components that don't belong to any JPanel (including it). These are added to the JPanel immediately before their paint method is called, and is removed immediately after:

```
 paintOnto.setIgnoreRepaint(true);
  paintOnto.add(getPaintableComponent());
  getPaintableComponent().paint(g);
  paintOnto.remove(getPaintableComponent());
  paintOnto.setIgnoreRepaint(false); 
```

paintOnto is a reference to the JPanel, getPaintableComponent() returns a JComponent that is to be drawn. g is the Graphics object passed through from the JPanel paint method.

The add/remove code was not required in mac at all, but under windows without it the components didnt paint at all.

This issue is only present in windows and ubuntu, not mac. Other systems are untested.

Any ideas what could be causing it? I have checked the position of the JPanel whenever it is painted, and it never is positioned at the top left corner.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:06:09.867

尝试保存之前`AffineTransform`的`graphics`并在绘画后恢复它。

# video - How to embed a video in an Alfresco blog / wiki?

> ID：10008843
> 
> 赞同：1
> 
> 时间：2012-04-04T09:56:42.943
> 
> 标签：video, embed, alfresco

I just don't know how....

All 'embed' and such tags are removed.

I'd like a simple clean solution .

Allowing all code is not option (modyfing wiki.get.config.xml)

Thanks a lot !!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T15:43:01.963

我确信这不是一个非常优雅的解决方案，但我想您可以嵌入图像（视频的快照），并将其链接到文档库中的实际视频。

# c++ - Reading from .txt

> ID：10008844
> 
> 赞同：0
> 
> 时间：2012-04-04T09:56:45.880
> 
> 标签：c++

I'm trying to solve Problem 13 of project euler, which involves the sum of 100 50 digit numbers. I figured there would be a better way than the paste that whole chunk of numbers into my code. So I searched around and found that you could paste the chunk into a .txt file and read it from there.

So, how would I go about reading from a .txt file in C++ and more importantly getting the 50 digit strings individually from it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:01:29.057

像这样的东西？

```
// reading a text file
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main () {
  string line;
  ifstream myfile ("numbers.txt");
  if (myfile.is_open())
  {
    while ( myfile.good() )
    {
      getline (myfile,line);
      int i = atoi(line.c_str());
      // do here something with 'i'
      cout << i
    }
    myfile.close();
  }

  else cout << "Unable to open file"; 

  return 0;
} 
```

# magento - 税务计算错误。Magento 在订单总计上增加了额外的一分钱

> ID：10008845
> 
> 赞同：1
> 
> 时间：2012-04-04T09:56:47.167
> 
> 标签：magento

我的一个客户最近回复我说，magento 在总订单量中增加了额外的一分钱。

看起来它可能是一个 Magento 税收计算，因为它正在计算产品的实际价值为 33.32 英镑，其中全价为 39.99 英镑，税收为 6.67 英镑。然而，在订单总额上，看起来实际价值为 33.33 英镑，增值税为 6.67 英镑，总计 40 英镑？

我还附上了屏幕截图以使其更清晰。

非常感谢任何帮助。

提前谢谢你的帮助。![在此处输入图像描述](../Images/6d2dc4d0b5f53e43a87753767ab32bc7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:36:31.777

看看

bugtracker 上的问题 [http://www.magentocommerce.com/bug-tracking/issue/?issue=12244](http://www.magentocommerce.com/bug-tracking/issue/?issue=12244)

magentocommerce.com 论坛上的主题 [http://www.magentocommerce.com/boards/viewthread/247201/#t346936](http://www.magentocommerce.com/boards/viewthread/247201/#t346936)

# ajax - 在 Sencha Touch 2 中为模型创建动态参数

> ID：10008847
> 
> 赞同：0
> 
> 时间：2012-04-04T09:56:54.520
> 
> 标签：ajax, extjs, sencha-touch

我是 Sencha Touch 的新手（主要是 MVC），我们有一个 UI 团队成员使用 Sencha Designer 2 创建界面，但目前他创建了很多不同的模型（每个商店一个模型） . 但是它只引用了一个 AJAX 文件，只是参数不同。

那么是否可以根据哪个商店尝试访问它来使参数动态化。即，如果商店用户正在尝试访问模型，它可以放入“ajax.php?store=user”，如果商店 Facebook 尝试访问它可以放入“ajax.php?store=facebook”的模型，等等等等。每个商店只有一个模型对我来说似乎很愚蠢，非常多余。

如果这是一个明显的修复，我很抱歉，就像我说我是 Sench Touch 的新手 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:09:28.403

您的所有商店都可以有一个空模型

```
Ext.define( 'SomeNamespace.model.SomeModel', { extend : 'Ext.data.Model' } ); 
```

并在您的商店中提供[extraParams](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Ajax)

```
Ext.define ('SomeNamespace.store.someStore', {
    extend : 'Ext.data.Store',
    model: 'SomeNamespace.model.SomeModel',
    proxy: {
        type: 'ajax',
        url : '/ajax.php',
        extraParams : {
           store : 'someStore'
        }
    }
}); 
```

# django - 主键自动增量的 Django 和 PostgreSQL 序列

> ID：10008850
> 
> 赞同：1
> 
> 时间：2012-04-04T09:57:12.900
> 
> 标签：django, postgresql

我的 postgresql-8.4 数据库中有以下表格和序列：

```
CREATE TABLE complexobjectpy
(
  id integer NOT NULL,
  the_geom geometry,
  semcat integer,
  CONSTRAINT complexobjectpy_pkey PRIMARY KEY (id),
  CONSTRAINT enforce_dims_the_geom CHECK (st_ndims(the_geom) = 2),
  CONSTRAINT enforce_srid_the_geom CHECK (st_srid(the_geom) = 900913)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE complexobjectpy OWNER TO tss;

CREATE SEQUENCE seq_complexobjectpy
  INCREMENT 1
  MINVALUE 1
  MAXVALUE 9223372036854775807
  START 1
  CACHE 1;
ALTER TABLE seq_complexobjectpy OWNER TO tss; 
```

以下是我的 Django 模型：

```
class Complexobjectpy(models.Model):
    the_geom = models.GeometryField(srid=900913)
    semcat = models.IntegerField()
    objects = models.GeoManager()
    class Meta:
        db_table = u'complexobjectpy' 
```

执行以下查询：

```
myObj = Complexobjectpy(semcat=50, the_geom=geometryMerged.wkt)
myObj.save(using='u1') 
```

我得到错误：

```
IntegrityError: null value in column "id" violates not-null constraint 
```

为什么我会得到这个？阅读文档，我期望使用序列自动选择 id 值...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:05:07.613

实际上，我正在提供这个作为答案。postgres 中的数据类型 serial 是一个自动递增的四字节整数。如果您将 id 从整数更改为串行，这将起作用。

```
 id serial NOT NULL 
```

阅读更多：[http ://www.postgresql.org/docs/8.4/static/datatype.html](http://www.postgresql.org/docs/8.4/static/datatype.html)

# python - Python - 就地替换 - 使用 close() 删除 .bak 备份文件？

> ID：10008851
> 
> 赞同：3
> 
> 时间：2012-04-04T09:57:15.597
> 
> 标签：python

当我运行以下脚本时，文件系统中会留下一个 .bak 备份文件。如何正确关闭（）文件以便删除备份？

```
#!C:\Python27\python.exe
import os
myRelease = os.environ.get("BUILD_STRING")
myVersion = os.environ.get("VERSION_STRING")
import fileinput
import re
files = ["C:\Projects\FileToSub.sbs"]
for line in fileinput.FileInput(files,inplace=1):
   line = re.sub('whatever, thing', line)
   print line, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:11:20.997

你可以调用[close](http://docs.python.org/release/2.5.2/lib/bltin-file-objects.html)方法，例如

我的文件.close()

为什么不使用[os.remove](http://docs.python.org/library/os.html#os.remove)删除文件？你可以这样做：

```
import os

# call this after the end of your script
os.remove("C:\Projects\FileToSub.subs.bak") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:28:56.207

该`fileinput`模块负责删除备份文件。

我不完全确定你测试了什么，但你的 python 代码包含错误。一个“猜测”和“更正”的版本：

```
import fileinput
import re
files = ["FileToSub1.sbs", "FileToSub2.sbs"]
for line in fileinput.FileInput(files, inplace=1):
    line = re.sub('whatever', 'thing', line)
    print line, 
```

在 strace 输出中，您可以看到文件被自动删除：

```
unlink("FileToSub2.sbs.bak")            = -1 ENOENT (No such file or directory)
rename("FileToSub2.sbs", "FileToSub2.sbs.bak") = 0
open("FileToSub2.sbs.bak", O_RDONLY)    = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=30, ...}) = 0
fstat(3, {st_mode=S_IFREG|0644, st_size=30, ...}) = 0
open("FileToSub2.sbs", O_WRONLY|O_CREAT|O_TRUNC, 0100644) = 4
fcntl(4, F_GETFL)                       = 0x8001 (flags O_WRONLY|O_LARGEFILE)
fstat(4, {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fdf3a988000
lseek(4, 0, SEEK_CUR)                   = 0
fstat(4, {st_mode=S_IFREG|0644, st_size=0, ...}) = 0
chmod("FileToSub2.sbs", 0100644)        = 0
fstat(3, {st_mode=S_IFREG|0644, st_size=30, ...}) = 0
mmap(NULL, 4096, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0x7fdf3a987000
read(3, "whatever\nfile\nthing\nline\nwhas\n", 8192) = 30
read(3, "", 4096)                       = 0
read(3, "", 8192)                       = 0
write(4, "thing\nfile\nthing\nline\nwhas\n", 27) = 27
close(4)                                = 0
munmap(0x7fdf3a988000, 4096)            = 0
close(3)                                = 0
munmap(0x7fdf3a987000, 4096)            = 0
unlink("FileToSub2.sbs.bak")            = 0 
```

# javascript - 数组中函数的上下文是什么？

> ID：10008852
> 
> 赞同：7
> 
> 时间：2012-04-04T09:57:16.227
> 
> 标签：javascript

这是我确定我应该知道答案的事情，但要么我只是愚蠢，要么我以前从未遇到过这个......

给定以下数组，在全局范围内声明：

```
var arr = [function() {
    console.dir(this);
}]; 
```

我本来希望`this`引用 Window 对象。但是，在调用函数时：

```
arr[0]();​ //Logs Array 
```

看来，`this`实际上是指数组。然后，当我将对该函数的引用存储在另一个变量中并调用它时，`this` *确实*引用了 Window 对象：

```
var func = arr[0];
func(); //Logs Window 
```

那么，为什么函数的上下文会改变呢？这是一个[演示上述两种情况的小提琴](http://jsfiddle.net/TVtwr/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:04:16.827

当您将函数调用为对象的属性时，例如`obj.func()`， `this`指的是`obj`。
这正是您在这里所做的。`arr`是你的对象，`0`是持有函数的属性。

**注意：**毕竟，数组只是对象，它们的元素是它们属性的值（尽管属性通常是数字字符串（所有属性都是字符串））。

请参阅[MDN -`this`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/this)了解更多信息，在这种情况下：

> 当函数作为`this`对象的方法被调用时，它被设置为调用该方法的对象。

在第二种情况下，您将函数称为“独立”，因此`this`指的是`window`. 如果代码在严格模式下运行，`this`则为`undefined`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:01:44.970

这是因为`this`关键字实际上是一个运算符，它返回对调用它的函数的持有者（或所有者）的引用。因为在第一种情况下，持有者是一个数组（它是一个对象），它返回一个数组。在第二种情况下，持有者是窗口对象。

有关更多详细信息，请参阅[本文](http://www.quirksmode.org/js/this.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:02:13.497

请注意：

**在 JavaScript 中，`this`总是指函数所有者。**

你可以[在 quirksmode](http://www.quirksmode.org/js/this.html)阅读更多关于它的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T10:02:38.073

因为元素是数组的成员，并且`this` *总是*指向所有者对象（除非你玩弄`bind()`//等）`call()`。`apply()`如果您不是对象的一部分，`this`则将是全局对象；这是`window`在浏览器环境中。例外情况是，如果您处于严格模式，`this` [那么`undefined`](http://jsfiddle.net/HXcNM/).

您正在做的实际上与以下内容相同：

```
var ar = {
    '0' : function () {
         console.dir(this);
     }
}

ar[0]();
var func = ar[0];
func(); 
```

...这在概念上可能更有意义。

[http://jsfiddle.net/TVtwr/1/](http://jsfiddle.net/TVtwr/1/)

# java - 2D 布尔数组创建和赋值。编译时错误

> ID：10008854
> 
> 赞同：1
> 
> 时间：2012-04-04T09:57:27.420
> 
> 标签：java, arrays, initialization, boolean, multidimensional-array

```
public class Test {
    boolean[][] expectedResults = new boolean[8][2];
    expectedResults[0] = new boolean[] {false, false}; //00B
} 
```

给我以下编译时间错误：

test.java:3: ']' 预期的
expectedResults[0] = new boolean[] {false, false}; //00B
^
test.java:3: ';' 预期
的预期结果 [0] = 新布尔 [] {false, false}; //00B
^
test.java:3：expectedResults[0] 类型的非法开始 = new boolean[] {false, false}; //00B
^ test.java:3: 预期的expectedResults[0] = new boolean[] {false, false}; //00B
^ test.java:3: ';' 预期的预期结果 [0] = 新布尔 [] {false, false}; //00B
^ test.java:3：expectedResults[0] 类型的非法开始 = new boolean[] {false, false}; //00B
^ test.java:3: 预期的预期结果 [0] = 新布尔 [] {false, false}; //00B
^ test.java:3: ';' 预期的预期结果 [0] = 新布尔 [] {false, false}; //00B
^ test.java:3：expectedResults[0] 类型的非法开始 = new boolean[] {false, false}; //00B
^ test.java:3: 预期的expectedResults[0] = new boolean[] {false, false}; //00B
^ test.java:3: ';' 预期的预期结果 [0] = 新布尔 [] {false, false}; //00B
^ test.java:4: 类、接口或枚举预期
}

## 解决了

必须在一个方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T10:00:14.863

语法是：

```
expectedResults[0] = new boolean[]{false, false}; 
```

此外，请确保在方法或静态初始化块内执行分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:04:55.560

您可以像这样创建一个数组`{false, false}`，只有当您将它与 decleration ( ) 放在同一行时`Array constants can only be used in initializers`：

```
boolean[] expectedResults = {false, false}; // complies 
```

虽然这不会编译：

```
boolean[] expectedResults;
expectedResults = {false, false}; // does not complie 
```

改为使用：

```
boolean[] expectedResults;
expectedResults = new boolean[]{false, false}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-18T21:03:39.020

> 这是 8x2 布尔数组初始化变得容易。

```
 public boolean[][] expectedResults = {
    {false, false},
    {false, false},
    {false, false},
    {false, false},
    {false, false},
    {false, false},
    {false, false},
    {false, false},
  }; 
```

> 这是一个简单的 4x8 布尔数组初始化。

```
 public boolean[][] expectedResults = {
    {false, false, false, false, false, false, false, true},
    {true, false, false, false, false, false, false, true},
    {true, false, false, false, false, true, true, true},
    {false, true, true, true, true, true, true, false}
  }; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-04T09:59:54.470

我认为您必须像这样初始化数组。

```
boolean[][] expectedResults;
 expectedResults = new boolean[8][2]; 
```

# c++ - 为什么计数器会增加？

> ID：10008860
> 
> 赞同：2
> 
> 时间：2012-04-04T09:57:46.530
> 
> 标签：c++, recursion

当我运行此代码时，输​​出为：

```
hello5
hello4
hello3
hello2
hello1
0
1
2
3
4 
```

我明白了，`hello1`但我不知道为什么它会增加。谁可以给我解释一下这个？

```
#include <iostream>
#include <iomanip>
using namespace std;

void myFunction( int counter)
{
    if(counter == 0)
        return;
    else
    {
        cout << "hello" << counter << endl;
        myFunction(--counter);
        cout << counter << endl;
        return;
    }
}

int main()
{
    myFunction(5);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T09:58:52.800

它不是递增的，您只是在递归调用之后打印值：

```
 cout<<"hello"<<counter<<endl;
   myFunction(--counter);
   cout<<counter<<endl; // <--- here 
```

由于参数是按值传递的，所以在递归调用内部不会修改局部变量。即，您正在传递`--counter`. 所以调用之后，不管`counter`里面怎么修改，都会得到ex counter。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T10:02:36.357

你这样走：

```
 m1:Print "hello 5",
        m2:Print "hello 4",
              m3:Print "hello 3",
                   m4:Print "hello 2"
                        m5:Print "hello 1"
                             m6: -- RETURNS
                        m5:Print "0" --  -- FUNCTIONS CONTINUES AND ENDS
                   m4:Print "1" -- FUNCTIONS CONTINUES AND ENDS
              m3:Print "2" -- FUNCTIONS CONTINUES AND ENDS
        m2:Print "3" -- FUNCTIONS CONTINUES AND ENDS
    m1:Print "4" -- FUNCTIONS CONTINUES AND ENDS 
```

那么为什么它打印 0 呢？因为这：

```
 cout<<"hello"<<counter<<endl;
   myFunction(--counter);
   cout<<counter<<endl; 
```

如果 counter = 1，则打印 hello1

然后它递减计数器（--counter = 0），所以 myFunction(--counter); 马上返回。

但是计数器仍然递减，所以当到达 cout<< counter << endl; 时 counter = 0; 即使它开始于 1

# jquery - 结合两个 jQuery 悬停脚本

> ID：10008863
> 
> 赞同：0
> 
> 时间：2012-04-04T09:58:06.260
> 
> 标签：jquery, hover, mouseover

对于一个作品集，我创建了一个带有图片和带有附加潜台词的标题的条目。将鼠标悬停在图像上时，图像会从灰度变为彩色（css 图像替换）。当悬停在标题上时，它会向上滑动并显示一个潜台词。

我想结合这两个功能。当我将鼠标悬停在条目上的任何位置时，我会将图片从灰度更改为彩色，并且将潜文本向上滑动。

我设置了一个 JSfiddle：http: [//jsfiddle.net/blendwerk/q8HtS/](http://jsfiddle.net/blendwerk/q8HtS/)

我怎样才能达到我的目标。我很感激任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:09:59.990

[http://jsfiddle.net/q8HtS/3/](http://jsfiddle.net/q8HtS/3/)

您只需要在整个区域上附加鼠标事件，并带有图片和文本，并且为了重新绑定事件，您可以设置一个命名空间以在将来单独重新绑定它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:18:02.070

尝试只向包装 div 添加一个悬停事件，如下所示

[http://jsfiddle.net/C8yV7/](http://jsfiddle.net/C8yV7/)

请注意，您可能还需要限制 div 的大小，当前为页面宽度的 100%

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:25:50.857

这是想要的效果：

```
$(function() {
    $(".fadeimg").find(".spanimg").hide();
    $(".fadesub").find(".spansub").hide();

    $(".fadeimg").hover(
        function(){
            $(this).find(".spanimg").stop(true, true).fadeIn(1000);
            $(this).next().find(".spansub").stop(true, true).slideDown(500);
        },
        function(){
            $(this).find(".spanimg").stop(true, true).fadeOut(1000);
            $(this).next().find(".spansub").stop(true, true).slideUp(500);
        }
    );
     $(".fadesub").hover(
         function() {
            $(this).find(".spansub").stop(true, true).slideDown(500);
            $(this).prev().find(".spanimg").stop(true, true).fadeIn(1000);
         }, 
         function() {
            $(this).find(".spansub").stop(true, true).slideUp(500);
            $(this).prev().find(".spanimg").stop(true, true).fadeOut(1000);
         }
     );
}); 
```

# android - Android：将大位图放在小位图后面，大位图应形成小位图

> ID：10008865
> 
> 赞同：0
> 
> 时间：2012-04-04T09:58:14.187
> 
> 标签：android, graphics, bitmap, overlay, clipping

好的，必须向图形专家寻求这一点。我有一个矩形位图（大）和一个圆形位图（小）。我想将较大的矩形位图放在较小的圆形位图后面，较大的矩形位图呈现较小圆形位图的形状（即矩形位图应该被剪裁或以其他方式）。较小的圆形位图具有一定的透明度，因此裁剪后的矩形位图将在转换后显示出来。我尝试了以下方法：

```
protected void onDraw(Canvas c) {

int sc = canvas.saveLayer(x, y, x + w, y + h, null,
                              Canvas.MATRIX_SAVE_FLAG |
                              Canvas.CLIP_SAVE_FLAG |
                              Canvas.HAS_ALPHA_LAYER_SAVE_FLAG |
                              Canvas.FULL_COLOR_LAYER_SAVE_FLAG |
                              Canvas.CLIP_TO_LAYER_SAVE_FLAG);

canvas.drawBitmap(bmpSmallCircular, 0, 0, backgroundPaint);
backgroundPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP));
canvas.drawBitmap(bmpLargeRectangular, 0 , 0, backgroundPaint);
backgroundPaint.setXfermode(null);
canvas.restoreToCount(sc);

} 
```

因此，这提供了部分解决方案，但矩形位图绘制在较小的位图上（尽管它确实采用较小的形状）。我可能遗漏了一些明显的东西，并且会很感激一个观点或朝着正确的方向前进。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:12:45.337

先画大位图再画小位图你需要交换一下语句就好了

```
canvas.drawBitmap(bmpLargeRectangular, 0 , 0, backgroundPaint);
canvas.drawBitmap(bmpSmallCircular, 0, 0, backgroundPaint); 
```

# mysql - 为什么 INSERT 性能有这种差异......？

> ID：10008866
> 
> 赞同：2
> 
> 时间：2012-04-04T09:58:18.000
> 
> 标签：mysql, performance, insert

嗨，最近我在两个不同的 ubuntu 服务器上进行了测试。

```
 Here are the results:
    innodb_flush_trx_commit = 1
    Staging Server: 10,000 Inserts ----> 81 seconds  
    innodb_flush_trx_commit = 2 
    Staging Server: 10,000 Inserts ----> 61 seconds  

    Dev     Server: 
    innodb_flush_trx_commit = 1
    10,000 Inserts ----> 5 seconds  
    Dev     Server: 
    innodb_flush_trx_commit = 2
    10,000 Inserts ---->  2 seconds 

    I am clear that performance vary with innodb_flush setting.
    But why there is a huge diff in performance from the server to server ? 
```

这里要考虑什么...？以下是一些考虑的细节，但没有什么值得怀疑的：

```
 staging server: Intel(R) Xeon(R) CPU X5355 @2.66GHz
                    processor 0, 1  
                    mysql 5.1.61
                    innodb_buffer_pool : 8MB
                    RAM: 4GB                        

    dev     server: AMD Opteron(tm) Processor 4130 @2.60ghZ
                    processor 0, 1  
                    mysql 5.0.67
                    innodb_buffer_pool : 8MB
                    RAM: 4GB 
```

请帮助理解导致不同服务器上性能差异巨大的确切原因是什么......？

```
 NOTE: same script used in the same way on noth the servers and not from remote  
        sesrvers. 
```

提前致谢。问候， UDAY

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:09:23.437

有些问题我会经历...

二进制日志记录是否在一个实例而不是另一个实例上打开？

登台服务器是否使用网络驱动器来访问 mysql 数据？

两台服务器（ext3、ext2 等）上的文件系统类型是否相同？

磁盘活动似乎是这里的罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:03:26.963

您的登台服务器是生产服务器吗？在这种情况下，它可能是一个并发问题。如果许多用户在该服务器上工作，插入可能会更慢，尤其是当您插入的表也被其他人使用时。开发服务器的负载可能要少得多，只有少数开发人员同时使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:07:05.260

将硬件差异放在一边（这不是一个简单的假设）。影响查询性能的因素有：

1.  DBMS 引擎的版本
2.  使用的查询计划和数据库统计信息
3.  网络延迟
4.  分配给 DBMS 引擎的内存（包括事务缓冲区日志）
5.  DBMS 引擎的进程/线程优先级

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T10:34:38.120

我还建议检查磁盘利用率。要在运行测试时大致了解磁盘利用率的表现，您可以使用`iostat`（在基于 redhat 的系统上，它位于包中`systat`）

例如，您可以尝试以下操作：

iostat -xd 1

这将导致与此类似的输出：

```
Device:         rrqm/s   wrqm/s     r/s     w/s   rsec/s   wsec/s avgrq-sz avgqu-sz   await  svctm  %util
sda               0.00     0.31    0.00    0.05     0.16     2.89    56.67     0.00    2.99   0.62   0.00 
```

在这里比较`await`两台机器上的时间。此指标显示磁盘需要服务 I/O 请求的平均时间（以毫秒为单位）。它是一种快速检查是否存在重大差异的方法。同样有趣的可能是`%util`指标。该值为您提供向设备发出 I/O 操作时所花费的 cpu 时间百分比，此值越高，设备越接近完全饱和。

对于其他选项检查`man iostat`。

当然，上面描述的只是为您提供了有关磁盘性能的非常基本的概述。因此，请记住这一点，作为对前面提到的操作的附加操作，以便追踪您的问题。

# javascript - 用javascript处理表单

> ID：10008870
> 
> 赞同：2
> 
> 时间：2012-04-04T09:58:30.210
> 
> 标签：javascript, html, forms

有没有办法只使用 javascript & html 来完全处理表单？我需要处理一个学校项目的表格，但只使用 JS 和 HTML，不使用 cgi 脚本、php……我不希望任何人真正为我做作业，只是一个指向正确方向的指针:)

编辑：处理表单我的意思是 onSubmit 操作，通过邮件将信息提交给管理员，将其写入文件，......我已经制作了一个脚本来验证输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:05:28.887

我假设的表单处理至少会将表单数据添加到数据库并进行验证。

您可以使用 jQuery[a js Library][验证](http://docs.jquery.com/Plugins/Validation)

您还可以使用[jQuery Ajax发布表单数据](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:02:39.553

我假设“过程”是指验证。如果允许使用库，请使用 jQuery 及其验证插件

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

除此以外

```
var inputs, index, form;

form = document.getElementById('myFormId'); // or form = document.formName
inputs = form.getElementsByTagName('input');
for (index = 0; index < inputs.length; ++index) {
    // deal with inputs[index] element.
} 
```

我希望那些能让你开始

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:14:26.027

没有任何方法可以使用没有太多或如此严重警告*的客户端*JavaScript（例如“仅 IE 并带有严重的安全警告”或“仅当安装了某些电子邮件客户端”）来制作它们除非在非常特殊的情况下无用。

不过，您可以使用服务器端 JavaScript。[node.js](http://nodejs.org/)是当前流行的选择。

# iphone - 如何在 iphone 应用程序中从我的网站提供注册服务？

> ID：10008872
> 
> 赞同：0
> 
> 时间：2012-04-04T09:58:39.617
> 
> 标签：iphone, in-app-purchase

我已经为我的公司定制了适用于 iPhone 的 VoIP(SIP)Client。我添加了带有我的签名页面 URL 的注册按钮，但苹果拒绝了我的应用程序。

请告诉如何实施App-in Purchase系统。因此用户可以注册我的服务。将通话时间添加到 sip 帐户和其他付款选项。我在我的网站上所做的所有事情。

但是苹果不同意在应用程序中浏览我的网站，比如注册、添加通话时间和其他功能关系。

请帮助我，我将非常感谢你:)

高拉夫·巴斯卡尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:21:22.247

Apple 的[关于应用内购买](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)的文档是一个很好的起点。[这个 stackoverflow 问题](https://stackoverflow.com/questions/4178214/ios-in-app-purchase-sample-code)有一个链接到您可以阅读的具有示例代码的书。

谷歌是你的朋友。

# android - 打算开始活动 - 但不要放在前面

> ID：10008879
> 
> 赞同：32
> 
> 时间：2012-04-04T09:59:12.400
> 
> 标签：android, android-intent, flags

描述：

*   活动**A**可见（或在后台）
*   Intent **I**被广播接收到有价值的 extra，然后将 extra 传递给一个新的 Intent **I2**，该 Intent I2 将用于启动活动**A**。
*   结果：*如果*活动在后台，**则不**要将活动放在前面。

 *代码：

```
Intent I2= new Intent(context, MyActivity.class); 
I2.putExtra(..
I2.setFlags(Intent.FLAG_ACTIVITY_MULTIPLE_TASK); // | Intent.FLAG_ACTIVITY_NEW_TASK); 
context.startActivity(I2); 
```

注意：我没有在清单中添加“android：taskAffinity”..我想你应该知道

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T10:04:36.750

如果您希望您的活动在后台，请在活动的 oncreate 中添加此行

```
moveTaskToBack(true); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T10:09:32.187

您可以在`onCreate()`方法中使用此行：

```
moveTaskToBack(true); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-13T18:41:15.757

您不想`Activity`在后台启动。有更好的方法来做你想做的事。例如，您可以让您的`Activity`寄存器接收广播`Intent`。`onReceive()`即使它在后台，它也会得到调用。您可以通过将变量设置为in和 to in来确定您`Activity`是否在后台。然后在，如果变量是你在后台。`true``onPause()``false``onResume()``onReceive()``true`*

# ruby-on-rails - Scaffold 为我创建了太多文件。我该怎么办？

> ID：10008886
> 
> 赞同：2
> 
> 时间：2012-04-04T09:59:27.653
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我是 Ruby on Rails 世界的新手。在开始构建类似商店的 Web 应用程序之前，我有一些问题需要解决。我正在遵循“使用 Rails 进行敏捷 Web 开发”一书中的说明，所以我决定也使用 sqlite ......

...但我已经通过 ER 图表示了这个场景，现在我不知道如何将它带到轨道上。

在本书的前几章中，它使用了脚手架命令来创建表“Product”。但是这个命令为我想要表示的每个表创建模型、视图、控制器和测试。

这是正确的方法吗？或者有没有办法在我开始创建我需要的 mvc 之前构建我的所有表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:07:51.140

试试 Ruby On Rails 指南：

[http://guides.rubyonrails.org/getting_started.html](http://guides.rubyonrails.org/getting_started.html)

它通常比敏捷书更容易理解（在我看来）。

创建表的最简单方法是使用 Rails 迁移。

使用相关模型、视图和控制器创建迁移的最简单方法是：

```
rails generate scaffold Product 
```

该命令将打印它在做什么。看看那些文件。

如果你有很多表，是的，典型的方法是生成许多脚手架，例如：

```
rails generate scaffold User
rails generate scaffold Product
rails generate scaffold Company
rails generate scaffold Invoice
... 
```

在您的评论中，您询问了 type_of_product 表。对于像这样的表，可以跳过脚手架（例如，因为您不需要控制器）而只生成迁移：

```
rails generate migration TypeOfProduct 
```

注意 Rails 用“类型”这个词做了一些奇怪的事情。当我做这样的表格时，我发现从主要词开始然后使用“种类”这个词更容易，如下所示：

```
rails generate migration ProductKind 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T10:11:25.073

简短的回答：**是**的，这是正确的方法。

更长的答案：通常你想设计一个模型，然后设计下一个，所以*通常*这是正确的方法。如果你创建一个没有模型的表，那么纯粹存在一个表是没有价值的。

如果您只想创建表而不创建模型，则可以创建迁移。只需使用`./script/rails generate migration CreateSomeTable`.

在任何情况下，您都可以忽略现在不需要的已创建文件。只要让他们留在原地，如果你愿意的话，专注于所有的表（迁移）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T14:14:01.760

脚手架为您提供了一个很好的起点来使用资源，例如用户、帖子、文章等。它生成模型、视图和控制器，然后您可以专注于修改它以满足您的需求。

您的实体关系图为您提供了构建系统的绝佳路线图。您不应该担心一次将 20 个表格大量放入应用程序中。相反，您应该一次又一次地构建它们（通过脚手架或其他用于模型和迁移的 rails 生成器）在它们上工作直到它们正确，然后一次构建其他表和关系。

做小事，你会非常有效率。做大工作，你会浪费很多时间来试图找出你在一个巨大的操作中出错的地方。

# emacs - 如何使用 sbcl 在 LispCabinet 中制作粘液？

> ID：10008887
> 
> 赞同：3
> 
> 时间：2012-04-04T09:59:33.893
> 
> 标签：emacs, lisp, slime, sbcl

当我运行它的 clozure-cl 版本时，我发现 LispCabinet 在安装后包含粘液（从第 3 个按钮开始）

[http://img820.imageshack.us/img820/5234/lipscabinet.jpg](http://img820.imageshack.us/img820/5234/lipscabinet.jpg)

但是当我在 sbcl 模式下输入 Mx slime 时（使用第 4 个按钮启动 emacs），我收到一条永无止境的消息：

```
Polling "c:/DOKUME~1/Administrator/LOKALE~1/Temp/slime.2788".. 
(Abort with `M-x slime-abort-connection'.) [38 times] 
```

我是否必须在 LispCabinet（sbcl 版本）中手动安装 slime，还是我安装错误的 LispCabinet？（我在安装过程中没有做任何花哨的事情，而是一个接一个地尝试了不同的选项）

# c++ - 没有参数列表的模板名称的无效使用

> ID：10008889
> 
> 赞同：0
> 
> 时间：2012-04-04T09:59:40.897
> 
> 标签：c++, templates

所以我有一个类名存储库，它只是一个简单的数组。这是该类的一部分：

```
template<class Element>
class repository {
private:
    int size;
    int capacity;
    Element* elements; 
```

我有另一个名为参与者的类。我想要一个参与者存储库并使用一个名为控制器的新类在该存储库上执行操作。但我不知道如何在控制器中声明存储库的类型。

这是课堂参与者的一部分：

```
class participant {
private:
    int position;
    int score; 
```

这是类控制器的一部分：

```
#include "repository.h"
#include "participant.h"
class controller {
private:
    repository repository;
    repository temporary;
    void createCopy();
public:
    controller();
    controller(repository repo); 
```

我得到了错误：

- 在存储库存储库和存储库临时行中，没有参数列表的模板名称“存储库”的使用无效；

- 与控制器（存储库 repo）一致的“repo”之前的预期“）”；

我应该如何在类控制器的声明中声明存储库的类型和临时的，这样我就不会得到任何其他错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T10:00:52.660

Repository 是一个类模板，因此您需要将数据成员声明为

```
private:
    repository<SomeType> repository; // but this hides repository name
    repository<SomeType> temporary;  // repository has another meaning now! 
```

`SomeType`在这种情况下可能在哪里`participant`。`repository`本身并没有命名类型，`repository<int>`等等`repository<std::string>`。接下来，您的数据成员名称不能是`repository`，因为这是 所需的模板名称`temporary`。所以更改数据成员的名称：

```
private:
    repository<SomeType> repo_; 
```

同样，您的构造函数必须采用一个类型：

```
controller(repository<participant> repo); 
```

尽管您可能想`repo`通过 const 引用传递：

```
controller(const repository<participant>& repo); 
```

# c - 初始化 C 结构需要一个表达式

> ID：10008892
> 
> 赞同：0
> 
> 时间：2012-04-04T09:59:47.420
> 
> 标签：c, struct, initialization

我有一个包含大约 17 个成员的 C 结构，`struct settings currentProfile`并希望将其所有成员初始化为零。（我已经尝试过使用超级正确的结构语法和 typedef 语法）

要将所有成员设置为零，我使用`currentProfile = {0}`

在这一行，编译器给出了错误`Expected an expression`

我是否正确初始化？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:03:04.313

您正在执行（无效）分配而不是初始化。

要初始化您的结构对象，并将所有成员设置为`0`：

```
struct settings currentProfile = {0}; 
```

在声明之后将结构对象的所有成员设置为`0`：

```
memset(&currentProfile, 0, sizeof currentProfile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:01:06.277

memset(pointer_to_struct, 0, size_of_struct);

```
#include <string.h>

struct settings currentProfile;
memset(&currentProfile, 0, sizeof(struct settings)); 
```

# windows-phone-7 - 初始化后更改 Pivot 的 HeaderTemplate

> ID：10008894
> 
> 赞同：3
> 
> 时间：2012-04-04T09:59:48.693
> 
> 标签：windows-phone-7

当 PhoneApplicationPage 方向更改以适应不同的屏幕空间时，我正在尝试更改 Pivot 的 HeaderTemplate。我试图实现的最终效果是缩小横向中的 Pivot Header FontSize 以为更多垂直内容腾出空间。

模板在 XAML 中声明为资源；

```
<phone:PhoneApplicationPage.Resources>
    <DataTemplate x:Key="landscapePivotTitleTemplate">
        <TextBlock Text="" Height="0"/>
    </DataTemplate>
    <DataTemplate x:Key="portraitPivotTitleTemplate">
        <TextBlock Text="{Binding}" />
    </DataTemplate>
    <DataTemplate x:Key="portraitPivotHeaderTemplate">
        <TextBlock Text="{Binding}" />
    </DataTemplate>
    <DataTemplate x:Key="landscapePivotHeaderTemplate">
        <TextBlock  Text="{Binding}" FontSize="{StaticResource PhoneFontSizeSmall}" />
    </DataTemplate>
</phone:PhoneApplicationPage.Resources> 
```

我在 OrientationChanged 的​​处理程序中从页面的 FrameworkElement.Resource ResourceDictionary 分配 DataTemplate；

```
void MainPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
{
    if (e.Orientation == PageOrientation.LandscapeLeft || e.Orientation == PageOrientation.LandscapeRight)
    {
        pivot.HeaderTemplate = (DataTemplate)Resources["landscapePivotHeaderTemplate"];
        pivot.TitleTemplate = (DataTemplate)Resources["landscapePivotTitleTemplate"];
    }
    else 
    {
        pivot.HeaderTemplate = (DataTemplate)Resources["portraitPivotHeaderTemplate"];
        pivot.TitleTemplate = (DataTemplate)Resources["portraitPivotTitleTemplate"];
    }            
} 
```

使用上述模板，标题通过分配给 TitleTemplate 被正确隐藏。但是，似乎只能设置一次 Header 模板 - 之后对 HeaderTemplate 的分配只有通过添加新的 PivotItem 才能生效。有没有更好的方法来解决这个问题？

# php - Adsense 横幅淹没页面内容

> ID：10008909
> 
> 赞同：0
> 
> 时间：2012-04-04T10:00:35.467
> 
> 标签：php, javascript, wordpress, adsense

我已经尝试了一切，在网上搜索了两个小时甚至更长时间，但我仍然没有找到任何东西。

问题：
adsense 横幅只是淹没了我的页面内容。看起来javascript的高度约为400-500px，而它必须为90px。`Banner looks good, but the content below the banner is unclickable`. `If you still don't get it`.

你可以看到`www.statyba24.lt` `The theme`我用的是`Esplanade by OneDesigns.`

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:07:25.633

用谷歌浏览器看起来不错。尝试将 height:90px 和 overflow:hidden 放在包装 div 中。

# java - android中的日期比较

> ID：10008911
> 
> 赞同：1
> 
> 时间：2012-04-04T10:00:38.513
> 
> 标签：java, android

我在比较当前日期和从数据库中检索的日期时遇到了一些问题。我只是从数据库中检索日期并存储在这样的日期变量中

```
String due_date_task = cursor.getString(cursor.getColumnIndex(dueDateOfTask));

SimpleDateFormat currentFormater = new SimpleDateFormat("dd/MM/yyyy");
Date date1 = currentFormater.parse(due_date_task); 
```

现在，我想要的是检查从数据库中检索到的日期是否等同于 CurrentDate。

```
Calendar currentDate = Calendar.getInstance();
Date date2 = currentDate.getTime();

if(date1.equals(date2)) 
```

System.out.println("今天的任务");

我只是想这样检查。提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:04:15.047

您可以使用此功能：

```
private boolean compareDates(Calendar objCal1, Calendar objCal2) {

  return ((objCal1.get(Calendar.YEAR) == objCal2.get(Calendar.YEAR))
    && (objCal1.get(Calendar.DAY_OF_YEAR) == objCal2.get(Calendar.DAY_OF_YEAR)));
} 
```

创建日历对象：

```
Calendar objCal1 = new GregorianCalendar().setTime(date);
Calendar objCal2 = new GregorianCalendar().setTime(date1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:04:50.707

对于包括毫秒在内的精确匹配，请使用**getTime**：

```
if(date.getTime() == date1.getTime()){
   //do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T10:12:37.303

试试这种方式来获取当前日期，

```
Calendar calCurr = Calendar.getInstance();
Log.i("Time in mili of Current - Normal", ""+calCurr.getTimeInMillis()); // see what it gives? dont know why?
Date date = new Date();
calCurr.set(date.getYear()+1900, date.getMonth()+1, date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());// so added one month to it
Log.i("Time in mili of Current - after update", ""+calCurr.getTimeInMillis()); // now get correct 
```

现在为数据库值创建日历对象，

```
String due_date_task = cursor.getString(cursor.getColumnIndex(dueDateOfTask));      

SimpleDateFormat currentFormater = new SimpleDateFormat("dd/MM/yyyy");      
Date date = currentFormater.parse(due_date_task);     
Calendar start = Calendar.getInstance();
start.set(date.getYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds()); 
```

现在比较两个日历对象

```
if(calCurr.equals(start)) 
```

# c# - funnelweblog的asp.net web.config文件中如何设置用户名和密码？

> ID：10008917
> 
> 赞同：0
> 
> 时间：2012-04-04T10:01:09.393
> 
> 标签：c#, asp.net, asp.net-mvc, funnelweb

我试图让 funnelweb 博客应用程序在我的机器上运行，我在 web.config 文件中设置了用户名和密码，但是当我尝试登录时，我收到消息“无效的用户名或密码。请重试。”

```
 <authentication mode="Forms" >
    <forms loginUrl="~/admin/login"   timeout="40320" cookieless="UseCookies" defaultUrl="~/" name="FunnelWeb" slidingExpiration="true">
        <credentials passwordFormat="Clear">
            <user  name="admin" password="admin"/>
        </credentials>
    </forms>
</authentication> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T13:50:56.490

在我拥有**2.1.0.644**的版本中，您已经更新了**My.config**文件。如果您更新了其他配置文件，则需要将其删除以避免任何冲突。然后使用您想要的更新用户名和密码的 My.config 文件密钥。

另请注意，根据您使用的是 hte 下载的编译版本还是源代码版本，可能需要更新 My.config 文件名。

1.  编译文件名：My.config.sample - 您需要删除“.sample”
2.  源代码文件名：My.config - 无需更改文件名。

我查看了[FunnelWebHQ](http://www.funnelweblog.com/getting-started)网站，他们的演练没有提到这一点，因为说明似乎与新版本的应用程序不一致。是的，这令人困惑，并且有多个更新安装文档的请求。希望这可以帮助。

# c# - C# 中不保留 C++ 函数中的数组更改

> ID：10008921
> 
> 赞同：2
> 
> 时间：2012-04-04T10:01:14.063
> 
> 标签：c#, c++, pointers, marshalling, dllimport

我有一个调用 C++ 函数的 C# 代码。

C++ 函数应该填充一个用指针传递的缓冲区。但是，数组返回空。

进口声明为：

```
[DllImport("ProjectLogicInterface", EntryPoint = "FillArr", CallingConvention = CallingConvention.Cdecl)]
public static extern UInt32 FillArr(char[] arr); 
```

代码经过简化并输入一些硬编码值后如下所示：

C# 中的代码：

```
char[] arr= new char[10];
ret = LogicInterface.FillArr(arr); 
```

C++ 代码：

```
bool FillArr(char* arr)
{
       int length=10;
       for(int i = 0; i < length; i++) 
       {
              arr[i] = 3; //replaced with some hard coded value
       }
       return true;
} 
```

但是，数组仍然是空的。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:16:44.553

我相信您必须先固定数组，然后再将其传递给您的本机代码。这可以防止 GC 在您在 C++ 中访问托管数组时在内存中移动它。

所以你可以使用：

```
[DllImport("ProjectLogicInterface", EntryPoint = "FillArr", CallingConvention = CallingConvention.Cdecl)]
public static extern UInt32 FillArr( char* arr ); 
```

接着：

```
char[] arr = new char[ 10 ];

fixed (char* pinned = arr )
{
    ret = LogicInterface.FillArr( pinned );
} 
```

请注意，我实际上并没有编译和运行它，但它应该会给你一些关于如何继续的想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T10:22:13.907

只要 C++ 中的代码在返回之前不缓存它，就不需要固定数组。

在您的情况下，您需要通过引用传递数组，以便将其视为输出参数。

```
[DllImport("ProjectLogicInterface", EntryPoint = "FillArr", CallingConvention = CallingConvention.Cdecl)]
public static extern UInt32 FillArr(ref char[] arr);` 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T11:38:45.967

发现此链接非常有用：

[C#：使用 char** 参数调用 C++ DLL](https://stackoverflow.com/questions/1711895/c-calling-c-dll-with-char-argument)

最终代码如下所示：

```
 [DllImport("ProjectLogicInterface", EntryPoint = "FillArr", CallingConvention = CallingConvention.Cdecl)]
    static extern bool FillArr([MarshalAs(UnmanagedType.LPStr, ArraySubType = UnmanagedType.LPStr)] StringBuilder args);

        static void Main(string[] args)
        {
            StringBuilder arr = new StringBuilder(9);
            bool res = FillArr(arr);
        } 
```

# asp.net-mvc-3 - Ninject、存储库和 DAL

> ID：10008923
> 
> 赞同：0
> 
> 时间：2012-04-04T10:01:22.193
> 
> 标签：asp.net-mvc-3, dependency-injection, ninject.web.mvc

我是 MVC、存储库概念和依赖注入的新手。

我的存储库和 DAL 看起来像

```
public interface IRepository<TEntity> where TEntity : class
{
    List<TEntity> FetchAll();
    IQueryable<TEntity> Query { get; }
    void Add(TEntity entity);
    void Delete(TEntity entity);
    void Save();
}

public class Repository<T> : IRepository<T> where T : class
{
    private readonly DataContext _db;

    public Repository(DataContext db)
    {
        _db = db;
    }

    #region IRepository<T> Members

    public IQueryable<T> Query
    {
        get { return _db.GetTable<T>(); }
    }

    public List<T> FetchAll()
    {
        return Query.ToList();
    }

    public void Add(T entity)
    {
        _db.GetTable<T>().InsertOnSubmit(entity);
    }

    public void Delete(T entity)
    {
        _db.GetTable<T>().DeleteOnSubmit(entity);
    }

    public void Save()
    {
        _db.SubmitChanges();
    }

    #endregion
} 
```

在 Global.asax 文件中我有

```
 private void RegisterDependencyResolver()
    {
        var kernel = new StandardKernel();
        kernel.
            Bind(typeof(IRepository<>)).
            To(typeof(Repository<>))
            .WithConstructorArgument("db", new DataContext(ConfigurationManager.ConnectionStrings["ConnectionString"].ToString()));
        DependencyResolver.SetResolver(new NinjectDependencyResolver(kernel));
    } 
```

但是当我尝试访问存储库时，我得到“ `Object reference not set to an instance of an object`”。我是否正确理解存储库和注入应该如何工作？

```
 public class AdminController : Controller
    {

       private readonly IRepository<User> _userRepository;

        public ActionResult Index()
        {
            var a = _userRepository.FetchAll(); //I get exception here
            return View();
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:05:35.017

你得到 nullref 因为你没有设置`_userRepository`. 在 s 构造函数中设置它，`AdminController`Niject 会愉快地注入它：

```
public class AdminController : Controller
{
    private readonly IRepository<User> _userRepository;
    public AdminController(IRepository<User> userRepository)
    {
        _userRepository = userRepository;
    }

    //...
} 
```

你可以在这里阅读更多关于[Ninject 的注入模式](https://github.com/ninject/ninject/wiki/Injection-Patterns)以及[注入是如何工作](https://github.com/ninject/ninject/wiki/How-Injection-Works)的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T10:32:09.907

在网络配置文件中

```
<appSettings>
    <add key="RepoSetting" value="Solution.DAL.OrderRepository"/>
</appSettings> 
```

ninject web 常用类中

```
private static void RegisterServices(Ikernel Kernel)
{
    //kernl.Bind<Irepo>().To<CustRepo>();

    string name = WebConfigurationManager.AppSettings["RepoSetting"];
    Type repoToInject = Assembly.GetExecutingAssembly().GetType(name);

    kernel.Bind<ICustomerRepository>().To(repoToInject
} 
```

# asp.net - 数据表选择方法

> ID：10008931
> 
> 赞同：0
> 
> 时间：2012-04-04T10:02:05.337
> 
> 标签：asp.net, sql-server

我的数据表中有一个行列表。
现在，我希望不根据`DESC`或`ASC`根据我的变量与行值的一些相似性来对行进行优先级排序。

例如，
我有如下列的数据表：

```
Name, Location, Age, Sex, Education.. 
```

而且我已经有一些偏好，即首先查看与我的教育和位置匹配的那些行，而那些不匹配的行可以在第一行之后。

我该如何做到这一点？
我尝试在`SELECT statement`with中设置表达式`OR`，`LIKE clause`但我似乎没有得到正确的答案。

> ```
> DataRow[]  row = ds.Tables[0].Select("Affiliations LIKE '%" + ftr2 + "%'OR Loc_city LIKE '%" + city1 + "%'OR Edu_Hist LIKE '%" + ftr + "%'OR Work_Hist LIKE '%" + ftr1 + "%' OR Priority='true'"); 
> ```

在这里，我不想严格地说我只想要这些值，而是我首先想要这些值的偏好设置，其余的可以在它后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:19:45.523

您可以使用 Union select 语句，首先选择匹配的行，然后选择不匹配的行，如下所示：

```
 string selectQuery="select Affiliations LIKE '%" + ftr2 +
                       "%'OR Loc_city LIKE '%" + city1 + 
                       "%'OR Edu_Hist LIKE '%" + ftr + 
                       "%'OR Work_Hist LIKE '%" + ftr1 + 
                       "%' OR Priority='true' 
                           union select Affiliations not LIKE '%" + ftr2 + 
                       "%'and Loc_city not LIKE '%" + city1 + 
                       "%'and Edu_Hist not LIKE '%" + ftr + 
                       "%'and Work_Hist not LIKE '%" + ftr1 + 
                       "%' and Priority !='true'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:04:44.577

您可以上传一些您已经尝试过的代码示例吗？

试试这样

```
DataTable table = DataSet1.Tables["Orders"];
// Presuming the DataTable has a column named Date.
string expression;
expression = "Date > #1/1/00#";
DataRow[] foundRows;

// Use the Select method to find all rows matching the filter.
foundRows = table.Select(expression); 
```

[http://msdn.microsoft.com/en-us/library/zk13kdh0%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/zk13kdh0%28v=vs.71%29.aspx)

# php - PHP设置整数长度

> ID：10008938
> 
> 赞同：0
> 
> 时间：2012-04-04T10:02:20.040
> 
> 标签：php, int

好简单的问题

我有像这样的积分器

```
5
188
4634 
```

他们都需要被格式化为

```
0000000005
0000000188
0000004634 
```

它可以成为一个无关紧要的字符串。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T10:04:12.923

[`sprintf`](http://php.net/manual/en/function.sprintf.php)是它的功能：

```
$num = sprintf("%010d", $num); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T10:06:35.763

[str_pad](http://php.net/str_pad)

```
echo str_pad($str, 10, "0",STR_PAD_LEFT); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T10:13:44.207

```
<?php
#how many chars will be in the string
$filltotal = 10;
$number = 5;
#with str_pad function the zeros will be added
 echo str_pad($number, $fill, '0', STR_PAD_LEFT); 
```

// 结果：0000000005

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T10:06:26.337

替代方案是 str_pad：

```
echo str_pad($num, 10, "0", STR_PAD_LEFT); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-04T10:05:08.727

你可以通过这个来实现。

```
$val = 12;
for($i=0;$i<(10 - count($val));$i++)
{
    $str .= '0';
}
$final_val = $str.$val; 
```

# javascript - 删除 CoffeeScript 匿名函数调用

> ID：10008941
> 
> 赞同：4
> 
> 时间：2012-04-04T10:02:37.620
> 
> 标签：javascript, coffeescript

```
buildIMG = (src, resize) ->
  html  = '<div class="left"><div class="foods_image">'
  html += '<a onclick="popitup("http://somewhere.com/test" href="javascript:void(0)">'
  html += '   <img src="'+src+'" '+resize+' />'  
  html += '</a>'
  html += '</div></div>'
  html

popitup = (url) ->
  newwindow=window.open(url,'name','height=640,width=640')
  newwindow.focus() if window.focus
    false 
```

我目前有一个小书签，可将 javascript 代码（上述代码）插入网站。我写了上面的咖啡脚本，它生成了这个：

```
(function() {
  var buildIMG, popitup;

  buildIMG = function(src, resize) {
    var html, nbsp;
    html = '<div class="left"><div class="foods_image">';
    html += '<a onclick="popitup(\'http://somewhere.com/test\');" href="javascript:void(0)">';
    html += '   <img src="' + src + '" ' + resize + ' />';
    html += '</a>';
    html += '</div></div>';
    return html;
  };
  popitup = function(url) {
    var newwindow;
    newwindow = window.open(url, 'name', 'height=640,width=640');
    return newwindow.focus()(window.focus ? false : void 0);
  };
}).call(this); 
```

我剪掉了使用 buildIMG 的函数。该函数在站点上创建一个覆盖并显示该覆盖中的所有图像。为每个图像调用 buildIMG 以创建 html。

问题是这`onclick="popitup("http://somewhere.com/test"`部分不起作用。它是未定义的。

我所做的一个解决方案是删除由 CoffeeScript 生成的这个：

```
(function() {

}).call(this); 
```

我一删除它就修复了。如何在我生成的 javascript 中没有将 CoffeeScript 放入这些行中？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-04T10:29:18.037

CoffeeScript 允许在没有这个安全包装器的情况下通过`--bare`选项编译 JavaScript。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T10:25:57.020

> 尽管为了清楚起见在本文档中被隐藏，但所有 CoffeeScript 输出都包装在一个匿名函数中： (function(){ ... })(); 这个安全包装器与 var 关键字的自动生成相结合，使得意外污染全局命名空间变得极其困难。

它来自 CoffeScript 网站。如果要创建全局方法或变量，则需要

```
root = this
localProperty = "111"
root.property = localProperty 
```

然后您将获得全局范围内的属性。

# xml - 用于检索数据的 HL7 消息类型

> ID：10008944
> 
> 赞同：0
> 
> 时间：2012-04-04T10:02:39.643
> 
> 标签：xml, hl7

我正在开发一个 HL7 系统，客户想要一条 HL7 消息来检索血糖仪数据。我将从外部应用程序以 XML 格式提供它。

我应该使用什么类型的 HL7 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T18:02:34.247

有很多变量会影响这个问题的答案。您使用的是 HL7 v2 还是 v3？如果是 v3，答案可能取决于您所在的国家/地区。

例如，在加拿大，使用 HL7 v3，血糖仪读数可能被认为是基本观察，您可能会使用患者基本观察查询 (REPC_IN000054CA) 来访问以前获取的读数。或记录患者基本观察请求消息 (REPC_IN000051CA) 以记录新测量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T16:53:17.903

因为您可能正在使用 HL7 版本 2.xx（与世界其他地区的 99.99% 一样）。您将要使用的消息类型很可能是 ORU（未经请求的观察结果）。不要让“不请自来”欺骗您，这也是用于所有实验室结果、病理学结果、放射学结果等的相同消息类型。

请记住，这是消息类型（MSH 字段 9 组件 1）。对于此类消息，消息事件（MSH 字段 9 组件 2）通常为空白或 R01。

希望这对您有所帮助。

# jakarta-mail - javax.mail.MessagingException：尝试使用 java 邮件 API 访问 gmail 时连接重置

> ID：10008947
> 
> 赞同：3
> 
> 时间：2012-04-04T10:02:42.037
> 
> 标签：jakarta-mail, connection-reset

我试图使用 java 邮件 API 阅读我的 gmail 帐户中的邮件。这是代码：

```
import java.util.*;
import java.io.*;
import java.awt.*;
import javax.mail.*;
import javax.mail.search.FlagTerm; 
import javax.mail.Flags.Flag;
public class MailPharser {
/**
 * @param args
 */
public void mailRead()
{
    Folder inbox; 
    // TODO Auto-generated method stub
     Properties props = System.getProperties();
     props.setProperty("mail.store.protocol", "imaps"); 
     try
     {
         Session session = Session.getDefaultInstance(props, null); 

         Store store = session.getStore("imaps");

         store.connect("imap.gmail.com","<mailid@gmail.com>", "<password>"); 
         inbox = store.getFolder("Inbox"); 
         System.out.println("No of Unread Messages : " + inbox.getUnreadMessageCount());

     }
     catch (Exception ex) 
     { System.out.println("Error caught"); ex.printStackTrace(); }

}

public static void main(String[] args) {
    MailPharser mp = new MailPharser();
    mp.mailRead();
}   

} 
```

运行时，我收到以下错误：

```
javax.mail.MessagingException: Connection reset;
  nested exception is:
java.net.SocketException: Connection reset
at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:670)
at javax.mail.Service.connect(Service.java:295)
at javax.mail.Service.connect(Service.java:176)
at MailPharser.mailRead(MailPharser.java:26)
at MailPharser.main(MailPharser.java:40)
Caused by: java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(Unknown Source)
at com.sun.net.ssl.internal.ssl.InputRecord.readFully(Unknown Source)
at com.sun.net.ssl.internal.ssl.InputRecord.read(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Source)
at com.sun.mail.util.SocketFetcher.configureSSLSocket(SocketFetcher.java:548)
at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:352)
at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:233)
at com.sun.mail.iap.Protocol.<init>(Protocol.java:113)
at com.sun.mail.imap.protocol.IMAPProtocol.<init>(IMAPProtocol.java:111)
at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:637)
... 4 more 
```

我添加了跟踪并看到连接调用失败。我做错什么了吗？任何帮助都可以。提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T19:15:29.930

这可能是与 JavaMail 无关的网络问题，例如，您和 Gmail 之间的代理或防火墙。

如果你想知道是你的代码坏了还是网络坏了，你可以[使用 JavaMail 附带的代码进行测试](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)。如果 JavaMail 代码有效，那么您就知道您的代码有问题，您可以使用 FAQ 中的 JavaMail 代码来改进您的代码。

如果您发现这是网络问题，JavaMail FAQ 也有[进一步调试的提示](http://www.oracle.com/technetwork/java/javamail/faq/index.html#condebug)。

# google-maps - 是否可以使用谷歌地图从坐标中获取地址？

> ID：10008949
> 
> 赞同：22
> 
> 时间：2012-04-04T10:02:44.970
> 
> 标签：google-maps, google-maps-api-3

我只是好奇。也许是为了未来的项目。我想知道是否可以通过 Google API 从给定坐标中检索地址。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-04T10:07:09.397

是的。只需使用 Google Geocoding 和 Places API [https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)和[https://developers.google.com/maps/documentation/places/](https://developers.google.com/maps/documentation/places/)

示例（源自[此处](https://developers.google.com/maps/documentation/javascript/examples/geocoding-reverse)）：

```
var geocoder;

function initialize() {
  geocoder = new google.maps.Geocoder();
}

function codeLatLng(lat, lng) {
  var latlng = new google.maps.LatLng(lat, lng);
  geocoder.geocode({
    'latLng': latlng
  }, function (results, status) {
    if (status === google.maps.GeocoderStatus.OK) {
      if (results[1]) {
        console.log(results[1]);
      } else {
        alert('No results found');
      }
    } else {
      alert('Geocoder failed due to: ' + status);
    }
  });
}

google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-09-24T09:51:31.947

可以通过向地理编码端点发送简单的 GET 请求来访问此信息。

例如点击[https://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&key=API_KEY](https://maps.googleapis.com/maps/api/geocode/json?latlng=40.714224,-73.961452&key=API_KEY)会产生以下响应：

```
{
   "results" : [
      {
         "address_components" : [
            {
               "long_name" : "277",
               "short_name" : "277",
               "types" : [ "street_number" ]
            },
            {
               "long_name" : "Bedford Avenue",
               "short_name" : "Bedford Ave",
               "types" : [ "route" ]
            },
            {
               "long_name" : "Williamsburg",
               "short_name" : "Williamsburg",
               "types" : [ "neighborhood", "political" ]
            },
            {
               "long_name" : "Brooklyn",
               "short_name" : "Brooklyn",
               "types" : [ "sublocality", "political" ]
            },
            {
               "long_name" : "Kings",
               "short_name" : "Kings",
               "types" : [ "administrative_area_level_2", "political" ]
            },
            {
               "long_name" : "New York",
               "short_name" : "NY",
               "types" : [ "administrative_area_level_1", "political" ]
            },
            {
               "long_name" : "United States",
               "short_name" : "US",
               "types" : [ "country", "political" ]
            },
            {
               "long_name" : "11211",
               "short_name" : "11211",
               "types" : [ "postal_code" ]
            }
         ],
         "formatted_address" : "277 Bedford Avenue, Brooklyn, NY 11211, USA",
         "geometry" : {
            "location" : {
               "lat" : 40.714232,
               "lng" : -73.9612889
            },
            "location_type" : "ROOFTOP",
            "viewport" : {
               "northeast" : {
                  "lat" : 40.7155809802915,
                  "lng" : -73.9599399197085
               },
               "southwest" : {
                  "lat" : 40.7128830197085,
                  "lng" : -73.96263788029151
               }
            }
         },
         "place_id" : "ChIJd8BlQ2BZwokRAFUEcm_qrcA",
         "types" : [ "street_address" ]
      },

  ... Additional results[] ... 
```

[https://developers.google.com/maps/documentation/geocoding/intro#reverse-example](https://developers.google.com/maps/documentation/geocoding/intro#reverse-example)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-28T07:50:55.493

[TomTom 地图 API](https://developer.tomtom.com)提供了一个反向地理编码端点，该端点给出了一个结构化的 JSON。

您可以使用[API Explorer](https://developer.tomtom.com/content/search-api-explorer#/Reverse_Geocoding/get_search__versionNumber__reverseGeocode__position___ext_)进行尝试。

例如 ：

```
curl -X GET "https://api.tomtom.com/search/2/reverseGeocode/37.8328,-122.27669.json?key=*****" -H "accept: */*" 
```

会得到你

```
{
  "summary": {
    "queryTime": 6,
    "numResults": 1
  },
  "addresses": [
    {
      "address": {
        "buildingNumber": "1001",
        "streetNumber": "1001",
        "routeNumbers": [],
        "street": "42nd Street",
        "streetName": "42nd Street",
        "streetNameAndNumber": "1001 42nd Street",
        "countryCode": "US",
        "countrySubdivision": "CA",
        "countrySecondarySubdivision": "Alameda",
        "countryTertiarySubdivision": "Oakland",
        "municipality": "Oakland, Emeryville",
        "postalCode": "94608",
        "municipalitySubdivision": "Oakland, Emeryville",
        "country": "United States",
        "countryCodeISO3": "USA",
        "freeformAddress": "1001 42nd Street, Emeryville, CA 94608",
        "boundingBox": {
          "northEast": "37.832893,-122.276230",
          "southWest": "37.832777,-122.277006",
          "entity": "position"
        },
        "countrySubdivisionName": "California",
        "localName": "Emeryville"
      },
      "position": "37.832844,-122.276688"
    }
  ]
} 
```

您可以获得免费的 API KEY（无需信用卡）并尝试我们的[教程](https://developer.tomtom.com/tutorials)！

披露：我受雇于 TomTom。

# ios - Mono Boehm vs SGen GC

> ID：10008953
> 
> 赞同：2
> 
> 时间：2012-04-04T10:02:55.793
> 
> 标签：ios, mono, garbage-collection, xamarin.ios, monodevelop

我在以下环境中开发了一个应用程序（在我的错误中重命名为 MyApplication 以保护隐私）：

*   单点触控 2.1
*   MonoDevelop 2.4.2
*   macOS 10.6.8
*   iOS SDK 4.3

那工作正常。

现在我尝试使用 MonoDevelop 2.8.8.4 迁移到 iOS 5.0/5.1 和 Monotouch 5.2.5。我的应用程序立即崩溃并出现以下错误：

> 堆栈跟踪：

```
at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) <IL 0x0009f, 0xffffffff>
  at MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00042] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29
  at MonoTouch.UIKit.UIApplication.Main (string[]) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:34
  at MyApplication.Application.Main (string[]) [0x00000] in /Users/MyPC/Projects/Test/MyApplication/Main.cs:19
  at (wrapper runtime-invoke) <Module>.runtime_invoke_void_object (object,intptr,intptr,intptr) <IL 0x00050, 0xffffffff> 
```

本机堆栈跟踪：

```
0   MyApplication                            0x000908fc mono_handle_native_sigsegv + 284
1   MyApplication                            0x00005c98 mono_sigsegv_signal_handler + 248
2   libSystem.B.dylib                   0x9138145b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   libobjc.A.dylib                     0x02958753 prepareForMethodLookup + 93
5   libobjc.A.dylib                     0x0294f069 lookUpMethod + 86
6   libobjc.A.dylib                     0x0294f1d6 _class_lookupMethodAndLoadCache + 40
7   libobjc.A.dylib                     0x029620e3 objc_msgSend + 87
8   UIKit                               0x01cba799 -[UIControl sendAction:to:forEvent:] + 67
9   UIKit                               0x01cbcc2b -[UIControl(Internal) _sendActionsForEvents:withEvent:] + 527
10  UIKit                               0x01cbba1c -[UIControl touchesBegan:withEvent:] + 277
11  UIKit                               0x01c4ed41 -[UIWindow _sendTouchesForEvent:] + 395
12  UIKit                               0x01c2fc37 -[UIApplication sendEvent:] + 447
13  UIKit                               0x01c34f2e _UIApplicationHandleEvent + 7576
14  GraphicsServices                    0x03fa5992 PurpleEventCallback + 1550
15  CoreFoundation                      0x00df8944 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 52
16  CoreFoundation                      0x00d58cf7 __CFRunLoopDoSource1 + 215
17  CoreFoundation                      0x00d55f83 __CFRunLoopRun + 979
18  CoreFoundation                      0x00d55840 CFRunLoopRunSpecific + 208
19  CoreFoundation                      0x00d55761 CFRunLoopRunInMode + 97
20  GraphicsServices                    0x03fa41c4 GSEventRunModal + 217
21  GraphicsServices                    0x03fa4289 GSEventRun + 115
22  UIKit                               0x01c38c93 UIApplicationMain + 1160
23  ???                                 0x090a61fc 0x0 + 151675388
24  ???                                 0x090a60c8 0x0 + 151675080
25  ???                                 0x090a59c0 0x0 + 151673280
26  ???                                 0x090a590c 0x0 + 151673100
27  ???                                 0x090a5997 0x0 + 151673239
28  MyApplication                            0x0000a002 mono_jit_runtime_invoke + 722
29  MyApplication                            0x00169efe mono_runtime_invoke + 126
30  MyApplication                            0x0016dfe4 mono_runtime_exec_main + 420
31  MyApplication                            0x00173405 mono_runtime_run_main + 725
32  MyApplication                            0x00067205 mono_jit_exec + 149
33  MyApplication                            0x002116d5 main + 2837
34  MyApplication                            0x00003055 start + 53
35  ???                                 0x00000004 0x0 + 4 
```

> 执行本机代码时获得 SIGSEGV。这通常表示单声道运行时或您的应用程序使用的本机库之一中存在致命错误。

如果我将它部署到 iOS SDK 4.3 也是一样的。我认为这可能是这里提到的新 GC SGen 的问题[http://www.infoq.com/news/2012/02/MonoTouch-SGen](http://www.infoq.com/news/2012/02/MonoTouch-SGen)

更新：实际上错误显示在警报显示为 lv.Message = "Copy...";

> 类句柄：由于对象已被垃圾回收，请求的操作无法完成

我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T11:41:32.317

在 MonoTouch 4 中，GC 执行得更加积极，以尽可能早地捕获某种类型的编程错误：确保本机对象不会被 GC 提前释放。

最常见的模式是在方法中声明变量：

```
void Method ()
{
    var view = new UIView ();
    otherNativeObject.NativeProperty = view;
} 
```

这里发生的情况是托管 GC 看不到 otherNativeObject 对视图的引用，因此当方法完成执行时，GC 将释放视图。稍后 otherNativeObject 将尝试使用该视图，最终您将遇到与您报告的崩溃类似的崩溃（确切的堆栈跟踪和消息将根据访问释放的本机对象的位置而有所不同）。

上述示例的修复很简单，只需将视图设为类变量即可：

```
UIView view;
void Method ()
{
    view = new UIView ();
    otherNativeObject.NativeProperty = view;
} 
```

现在，当方法退出时，GC 将无法释放视图。

请注意，这种崩溃在 MonoTouch 4 中并不新鲜，使 GC 更具攻击性的效果是您会在调试时看到问题，而不是在客户（非常随机地）崩溃时听到它。

# .htaccess - Htaccess 重定向到 www，特定文件除外

> ID：10008956
> 
> 赞同：0
> 
> 时间：2012-04-04T10:02:57.747
> 
> 标签：.htaccess, redirect

我想将非 www 重定向到 www，并排除特定文件（例如 testit.php）。找不到有效的解决方案...

```
RewriteCond %{REQUEST_URI} !^testit.php
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这会重定向所有文件，包括 testit.php（我想排除）。

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:17:57.893

```
RewriteCond %{REQUEST_URI} !^/testit.php
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# facebook - 弃用离线访问权限后在 Facebook 上注销/切换用户

> ID：10008957
> 
> 赞同：3
> 
> 时间：2012-04-04T10:03:04.347
> 
> 标签：facebook, facebook-graph-api, oauth

随着 Facebook在 5 月 1 日[弃用离线访问权限](https://developers.facebook.com/roadmap/offline-access-removal/)，Web 应用程序可以轻松延长 OAuth 访问令牌的持续时间（60 天）。

但是，如果应用程序在 Web 上并且想要提供**“切换用户”**选项，通常是**注销 -> 登录**，那么访问令牌将失效，并且完全无法替代 offline_access。

**问题：**有没有办法保留有效的访问令牌（60 天），但仍然允许注销或多个用户在单个浏览器上登录，或者在请求登录时“强制登录提示”（Facebook 提供 Switch user on the登录页面）？

还是鼓励我们不再提供注销选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T16:59:41.143

我运行了一些测试，看起来无论我如何获取访问令牌、服务器端流或客户端流，即使我有两个令牌（来自两个流），当我调用*FB.logout()*时（我假设这就是您注销用户的方式）所有令牌都将失效。

在我看来，你必须选择你喜欢的功能，切换用户或长期有效的令牌，除非我当然错过了一些东西。

但是，我可以为您提供一个解决方法，它并不理想，因为大多数解决方法，但它可能让您享受两个世界：在您的 UI 中，您可以让用户选择注销以切换用户，只需告诉他手动注销 facebook，然后当他单击您的注销时，只需在不使用*FB.logout*的情况下将他从您的系统中注销。这样，您为该用户拥有的访问令牌不会失效，并且其他用户将能够登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T23:36:36.120

出于安全原因，这可能不起作用，但是您是否尝试过在不指定访问令牌的情况下构建注销 URL？也就是说，例如：

*   如果您使用的是 PHP SDK，请编写您自己的`getLogoutUrl(...)`方法版本，或者只传入一个空的 access_token，例如`$facebook->getLogoutUrl(array('access_token' => ''));`

*   如果您使用的是 JS SDK，您将无法使用`FB.logout()`，这需要访问令牌。相反，您可以提供自己的：

```
FB.provide('UIServer.Methods', {
    'auth.logout': {
        url: 'logout.php',
        transform: function(a) {
            var xdRelation = FB.UIServer.getXdRelation(a.params);
            a.params.next = FB.UIServer._xdResult(a.cb, a.id, xdRelation, true);
            return a;
        }
    }
}); 
```

如果执行上述代码，理论上它应该改变 FB.logout 的行为，不再传递 access_token。公平警告：我自己没有测试过。否则，只需将用户发送到`http://facebook.com/logout.php?next=SOME_URL`并查看它是否在没有 access_token 的情况下工作。

# visual-studio-2010 - 过滤参考装配体

> ID：10008959
> 
> 赞同：0
> 
> 时间：2012-04-04T10:03:20.583
> 
> 标签：visual-studio-2010, windows-phone-7

我们为 Visual Studio .Net 中的所有平台提供自定义控件。我们将程序集添加到 ToolboxControlsInstaller 并在 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework 下的 AssemblyFoldersEx 中注册程序集。当为 Windows Phone 项目使用添加引用（添加程序集 C# 项目）时，它会显示来自 GAC 的所有平台程序集，如 MVC、Windows 和 WPF。是否有可能过滤程序集并仅显示 Windows Phone 项目的电话程序集。请帮我解决问题。提前谢谢![在此处输入图像描述](../Images/cbcfd9a5804439557c28cca4922f01c3.png)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:12:07.050

尝试使用Visual Studio的[生产力工具！](http://visualstudiogallery.msdn.microsoft.com/d0d33361-18e2-46c0-8ff2-4adea1e34fef/)

它将默认的“添加引用”对话框替换为更好的对话框，并且在顶部显示它正在按平台过滤引用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T09:44:41.673

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SDKs\Silverlight for WindowsPhone\v4.0\AssemblyFoldersEx

如果我们在上述注册表位置下创建一个新密钥，则将 Assemblies 位置设置为默认值。然后将我们要添加的程序集放在该位置的“添加引用”选项卡中。它将解决这个问题。

# c# - 我捕获的 AggregateException 没有我期望的异常

> ID：10008964
> 
> 赞同：4
> 
> 时间：2012-04-04T10:03:33.237
> 
> 标签：c#, .net, exception, task-parallel-library

我正在使用任务并行库来设置一系列任务，如下所示，但我得到了一种我不理解的奇怪异常处理体验。

我使用 Parallel.ForEach 并调用一个 Action，其中包括对以下方法的调用。此 Parallel.ForEach 包装在 try...catch(AggregateException) 中，当发生异常时 - 就像在其中一个 Parallel 分支中一样 - SchemaValidation 异常，然后我希望在 AggregateException 中看到它。

但是，我得到的是“任务被取消”-TaskCanceledException。我的 SchemaValidationException 去哪儿了？

```
 private static void ProcessChunk(Task<ISelectedChunk> selectionTask, 
                                     IRepository repository, 
                                     IIdentifiedExtractChunk identifiedExtractChunk, 
                                     IBatchRunConfiguration batchRunConfiguration, 
                                     IBatchRun batchRun, 
                                     ILog log, 
                                     IAuthenticationCertificate authenticationCertificate, 
                                     IFileSystem fileSystem,
                                     long batchRunRid)
    {
        var transformationTask = selectionTask.ContinueWith(TransformationFunction.Transformation(identifiedExtractChunk, batchRunConfiguration, batchRun),
                                                            TaskContinuationOptions.NotOnFaulted);

        var schemaValidationTask = transformationTask.ContinueWith(SchemaValidationFunction.SchemaValidationTask(batchRunConfiguration),
                                                                   TaskContinuationOptions.NotOnFaulted);

        var compressTask = schemaValidationTask.ContinueWith(CompressFunction.CompressTask(identifiedExtractChunk),
                                                             TaskContinuationOptions.NotOnFaulted);

        var encryptTask = compressTask.ContinueWith(EncryptionFunction.EncryptTask(authenticationCertificate),
                                                    TaskContinuationOptions.NotOnFaulted);

        var fileGenerationTask = encryptTask.ContinueWith(FileGenerationFunction.FileGenerationTask(identifiedExtractChunk, batchRunConfiguration, fileSystem),
                                                          TaskContinuationOptions.NotOnFaulted);
        // Take the time before we start the processing
        DateTime startBatchItemProcessing = DateTime.Now;

        // Start with the Selection Task
        selectionTask.Start();

        // And wait on the last task in the chain
        fileGenerationTask.Wait();

        // Take the time at the end of the processing
        DateTime endBatchItemProcessing = DateTime.Now;

        // Record all the relevant information and add it to the collection 
        IBatchChunkProcessed batchChunkProcessed = GetBatchItemProcessed(identifiedExtractChunk, batchRunRid, fileGenerationTask.Result, transformationTask.Result.Item2, startBatchItemProcessing, endBatchItemProcessing);
        BatchItemsProcessed.Add(batchChunkProcessed); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T13:24:42.110

让我们稍微简化一下您的代码：

```
var t1 = Task.Factory.StartNew(a1);
var t2 = t1.ContinueWith(a2, TaskContinuationOptions.NotOnFaulted);
var t3 = t2.ContinueWith(a3, TaskContinuationOptions.NotOnFaulted);

t3.Wait(); 
```

现在假设`a1`抛出异常。发生的情况是`t1`出现故障 ( `t1.Status == TaskStatus.Faulted`)。因此，`t2`无法运行（因为`NotOnFaulted`），因此将被取消。但这可能不是您所期望的：`t2`不会出错，它会被取消（`t2.Status == TaskStatus.Canceled`）。但这意味着它`t3`可以正常运行，并且如果它不抛出，`t3.Wait()`则不会抛出任何异常。

如何解决这个问题？首先，您可能不应该使用`TaskContinuationOptions.NotOnFaulted`，而是使用`TaskContinuationOptions.OnlyOnRanToCompletion`。但这并不能解决“消失”异常的问题。为了解决这个问题，我看到了两种可能性：

1.  在每个延续开始时调用`Wait()`，不要使用任何`TaskContinuationOptions`. 这意味着您可能会收到一些包含在 中的异常`AggregateException`，该异常本身包含在 中`AggregateException`，而该异常又包含在另一个中`AggregateException`，等等。要解决此问题，您可以使用[`Flatten()`](http://msdn.microsoft.com/en-us/library/system.aggregateexception.flatten.aspx)or [`Handle()`](http://msdn.microsoft.com/en-us/library/system.aggregateexception.handle.aspx)。

2.  等待所有任务，使用[`Task.WaitAll()`](http://msdn.microsoft.com/en-us/library/dd270695.aspx). `WaitAll()`将抛出一个`AggregateException`包含原始异常以及`TaskCanceledException`由于第一个异常而被取消的每个任务的异常。

# algorithm - 每个类的 k 最近邻分类器训练样本大小

> ID：10008966
> 
> 赞同：0
> 
> 时间：2012-04-04T10:03:42.503
> 
> 标签：algorithm, machine-learning, data-mining, classification, knn

有人可以告诉我每个班级的训练样本量是否需要相等吗？

我可以接受这种情况吗？

```
 class1   class2  class3
samples    400      500     300 
```

还是应该所有类都具有相同的样本量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-19T03:59:05.493

KNN 结果基本上取决于 3 件事（N 的值除外）：

*   训练数据的密度：每个类的样本数量应该大致相同。不需要精确，但我想说不超过 10% 的差异。否则界限会很模糊。
*   整个训练集的大小：你的训练集中需要有足够多的样本，这样你的模型才能泛化到未知样本。
*   噪声：KNN 天生对噪声非常敏感，因此您希望尽可能避免训练集中的噪声。

考虑以下示例，您尝试在 2D 空间中学习类似甜甜圈的形状。

通过在您的训练数据中具有不同的密度（假设您在甜甜圈内部的训练样本比在外部的多），您的决策边界将如下所示：

![甜甜圈坏](../Images/04106ced4f8133b70d05df0dbaf24eb2.png)

另一方面，如果您的类相对平衡，您将获得更精细的决策边界，该边界将接近甜甜圈的实际形状：

![在此处输入图像描述](../Images/d41582d27f443b9f65a7c39976e37e44.png)

所以基本上，我建议尝试平衡你的数据集（只是以某种方式对其进行标准化），并考虑我上面提到的其他 2 个项目，你应该没问题。

如果您必须处理不平衡的训练数据，您还可以考虑使用 WKNN 算法（只是 KNN 的优化）为元素较少的类分配更强的权重。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-17T11:09:13.130

k 最近邻方法不依赖于样本大小。您可以使用示例样本大小。例如，请参阅[以下](http://www.dtic.mil/cgi-bin/GetTRDoc?AD=ADA465712)关于具有 k-最近邻的 KDD99 数据集的论文。与您的示例数据集相比，[KDD99是非常不平衡的数据集。](http://kdd.ics.uci.edu/databases/kddcup99/kddcup99.html)

# android - 什么类似于 layout_weight in relativeout

> ID：10008967
> 
> 赞同：0
> 
> 时间：2012-04-04T10:03:44.733
> 
> 标签：android, android-layout, android-relativelayout, android-linearlayout

在`LinearLayout`我们可以使用 Layout_Weight 水平填充元素，这使它们占据所有宽度，每个宽度取决于它们的 Layout_Weight 值（或比率）。我的问题是在`RelativeLayout`. 没有像 Layout_Weight 这样的属性。我`RelativeLayout`在我的项目中使用 a ，它包含 4 个按钮，它们需要位于屏幕底部并且必须填满整个宽度。如果我使用硬编码`Layout_Width="20dp"`或类似的东西。当我将方向从纵向更改为横向时，它会产生问题，反之亦然。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <Button
            android:id="@+id/feed_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:text="@string/feed"
            android:textColor="#FF000000" />

        <Button
            android:id="@+id/iwant_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_toRightOf="@id/feed_button"
            android:text="@string/iwant"
            android:textColor="#FF000000" />

        <Button
            android:id="@+id/share_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_toRightOf="@id/iwant_button"
            android:text="@string/share"
            android:textColor="#FF000000" />

        <Button
            android:id="@+id/profile_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_toRightOf="@id/share_button"
            android:text="@string/profile"
            android:textColor="#FF000000" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:07:44.173

用于使相对布局占据全宽

```
android:layout_width="fill_parent" 
```

将其添加到底部

```
android:layout_alignParentBottom="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:09:38.520

我认为没有像`layout_weight`in那样的属性`Relative layout`。但是 android 已经提供了`Linear Layout`. 在那种情况下，你为什么要和`Relative layout`?

我想你知道如何使用`layout_weight`in `Linear Layout`。

```
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom" >

    <Button
        android:id="@+id/feed_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="feed"
        android:textColor="#FF000000" />

    <Button
        android:id="@+id/iwant_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="iwant"
        android:textColor="#FF000000" />

</LinearLayout> 
```

我知道你有强制使用相对布局但是如果你把上面的代码放在你的活动中，它会在显示的底部显示所有按钮，如果想在任何其他布局的下方显示这些按钮布局，那么`android:layout_below attributte`在`<LinearLayout >`标签中使用并将最外面的布局用作相对布局

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T13:33:55.940

确保按钮全部相等的唯一方法是将它们放在一个`LinearLayout`填充您希望按钮覆盖的区域的区域中，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

   <LinearLayout
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:layout_alignParentBottom="true"
      android:orientation="vertical" >
        <Button
            android:id="@+id/feed_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="@string/feed"
            android:textColor="#FF000000" />

        <Button
            android:id="@+id/iwant_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:layout_toRightOf="@id/feed_button"
            android:text="@string/iwant"
            android:textColor="#FF000000" />

        <Button
            android:id="@+id/share_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="@string/share"
            android:textColor="#FF000000" />

        <Button
            android:id="@+id/profile_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:text="@string/profile"
            android:textColor="#FF000000" />
  </LinearLayout>

</RelativeLayout> 
```

将`LinearLayout`填充父布局的整个宽度，并根据它们的重量平均划分按钮。

如果您有两个想要平均划分的布局，则有一个非常巧妙的技巧`RelativeLayout`。创建一个 0x0 像素的“不可见”布局，将其对齐到父视图的中心，然后将两个布局对齐到相对于您想要它们的位置的不可见布局。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-07T05:24:16.727

在相对布局中，我们可以动态地实现这一点。

```
DisplayMetrics metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(metrics);

int height = metrics.heightPixels;
int width = metrics.widthPixels;

Button1.setWidth(width / 2);
Button2.setWidth(width / 2); 
```

# javascript - 检查两个对象是否彼此面对

> ID：10008968
> 
> 赞同：1
> 
> 时间：2012-04-04T10:03:46.420
> 
> 标签：javascript, direction

令人惊讶的是，我已经搜索了所有内容，但找不到这个看似常见问题的答案。我目前面临的问题是检查玩家是否面对敌人，如果是在玩家视野的范围内（可调节），如果在该范围内，则朝最近的安全方向移动。

这是一张图片：D ![例子](../Images/126049849f32e003e566f0abd7c9b9f9.png)

那么，我将如何做到这一点？我有每个船对象的`x`,`y`和`direction`, 。这是我最后一次失败的尝试，试图认为玩家的方向将与敌人相对于玩家的方向正好成 180 度角。

```
var direction=Math.direction(this.x,this.y,player.x,player.y,1),
    playerview=Math.abs(direction)-Math.abs(player.direction-180)
if(Math.abs(playerview)<10) {
    console.log('in view')
    this.xVelocity+=AI.speed*Math.sin(playerview*Math.PI/180)
    this.xVelocity+=AI.speed*Math.cos(playerview*Math.PI/180)
    } 
```

在此示例中，`10`将是范围。当然，我只是设法让船只向右旋转，所以除了探测只工作半圈外，我也无法让敌人向右转。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T11:29:21.820

在您的代码中，您修改 this.xVelocity 两次而不是修改`this.yVelocity`.

我猜，`Math.direction`不在 JavaScript/ECMA 标准中。你确定，你使用正确吗？考虑`Math.atan2`。

此外，您应该提供*“面对面”*的定义。

如果是“看到对方”，那么您的评论“在视图中”具有误导性。

* * *

但主要问题是：

`Math.abs(angleInDegrees)` **修改角度**！

建立角度绝对值的正确方法是：

```
while (angleInDegrees < 0) 
{   
   angleInDegrees += 360;
}

// If necessary, add this too:
while (angleInDegrees >= 360)
{
   angleInDegrees -= 360;
} 
```

-10 和 350 相同，-10 和 10 相隔 20 度。

为了进一步解释，让我们调用上面的代码`normalizeAngle`

（注意：对于巨大的值，循环可能会运行很长时间甚至永远。如果可能出现这样的值，应该检查。）

* * *

以下应该可以解决问题：

```
playerview = normalizeAngle(direction - player.direction - 180)
if (playerview < range || playerview > 360-range) { 
```

顺便说一句：“玩家视野”应该是玩家视野和敌人视野的最小值。

# iphone - 绘制多条线 Quartz 2D

> ID：10008970
> 
> 赞同：-1
> 
> 时间：2012-04-04T10:03:53.547
> 
> 标签：iphone, draw, quartz-2d, lines

我想画 15 条水平线，它们之间有 20 个点的空间。我不明白为什么这段代码不起作用。

```
 - (void)drawRect:(CGRect)rect
 {
  // Drawing code
  CGContextRef context = UIGraphicsGetCurrentContext();
  CGContextSetStrokeColorWithColor(context, [UIColor redColor].CGColor);
  CGContextSetLineWidth(context, 2.0);
  for (int i=20;i+=20;i<=20*15) {
      CGContextBeginPath(context);
      CGContextMoveToPoint(context, 10, i);
      CGContextAddLineToPoint(context, 310, i);
      CGContextStrokePath(context);

   }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:50:04.057

是的，for循环应该是：

```
for (int i=20; i<=20*15; i+=20) {
    ...
} 
```

# java - valueStack 是否在 JSP 页面中暴露给 EL？

> ID：10008975
> 
> 赞同：1
> 
> 时间：2012-04-04T10:04:09.773
> 
> 标签：java, jsp, jakarta-ee, struts2, el

我们可以使用 访问`valueStack`（和其他对象`ActionContext`），`OGNL`但我们可以用`EL`. 我的意思是 Action 类的属性，例如，通过`valueStack`;公开的属性。它们是否可以通过 EL 使用（它们是否设置为请求属性，只有这样我猜它们才会可用）。如果一个类实现了`ModelDriven`，我们可以通过它们的直接名称访问模型对象的属性，而不是`modelObject.propertyName`在使用 OGNL 的 JSP 中使用。我们可以使用 EL 做同样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T14:19:41.873

根据评论提供答案，以便具有相同查询/问题的用户能够得到答案。

JSTL 集成内置于框架中——启用它不需要任何步骤。只需像使用普通 SAF JSP 标记（例如属性标记）一样引用您的 JSTL 表达式。

更多详情请参考官方文档

*   [我们可以使用-jstl-with-the-struts2-framework](http://struts.apache.org/2.3.1/docs/can-we-use-jstl-with-the-framework.html)

# android - android中的着色子布局

> ID：10008977
> 
> 赞同：0
> 
> 时间：2012-04-04T10:04:14.190
> 
> 标签：android, android-layout, animation, fade

我被困在使用淡入淡出动画后无法保持子布局淡出的情况

```
FrameLayout mapLayout = (FrameLayout)findViewById(R.id.mapLayout);

Animation fadeAnim = AnimationUtils.loadAnimation(this, android.R.anim.fade_out);
mapLayout.startAnimation(fadeAnim); 
```

请指导我如何在android中实现这一点。当我单击“暂停”按钮并反转效果时，会出现此动画和阴影效果，我将按下“恢复”按钮（对不起，我在阴影视图中使用“暂停”按钮制作了图像，实际上它是“恢复”）

![在此处输入图像描述](../Images/9c563f66942363b2e0de0a2bc287ce03.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:15:19.973

尝试

```
fadeAnim.fillAfter(true);
fadeAnim.execute(); 
```

[http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter(boolean)](http://developer.android.com/reference/android/view/animation/Animation.html#setFillAfter%28boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T10:22:15.297

hii makki 您可以在 onclick 事件中设置以下代码

```
 AnimationSet set = new AnimationSet(true);

Animation animation = new AlphaAnimation(0.0f, 1.0f);
animation.setDuration(50);
set.addAnimation(animation);

animation = new TranslateAnimation(
Animation.RELATIVE_TO_SELF, 0.0f,Animation.RELATIVE_TO_SELF, 0.0f,
Animation.RELATIVE_TO_SELF, -1.0f,Animation.RELATIVE_TO_SELF, 0.0f
);
animation.setDuration(100);
set.addAnimation(animation);

LayoutAnimationController controller = new LayoutAnimationController(set, 0.5f);
l.setLayoutAnimation(controller); 
```

然后淡出动画

```
 public static Animation runFadeOutAnimationOn(Activity ctx, View target) {
  Animation animation = AnimationUtils.loadAnimation(ctx,android.R.anim.fade_out);
  target.startAnimation(animation);
  return animation;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:10:57.860

以上两个答案都帮助我解决了这个问题，但两个答案都不是我问题的实际解决方案。我提出的解决方案是

我根据需要定义了两个动画

```
Animation fadeOut = new AlphaAnimation(0f,0.5f);
Animation fadeIn = new AlphaAnimation(0.5f,1f);
fadeOut.setFillAfter(true);
fadeIn.setFillAfter(true); 
```

当我单击“暂停”按钮时，我执行了以下行

```
mapLayout.startAnimation(fadeOut); 
```

然后从暂停状态恢复，我执行了以下行

```
mapLayout.startAnimation(fadeIn); 
```

谢谢西蒙和迪帕克！

# php - 从 iOS 上的网页请求 BLOB

> ID：10008979
> 
> 赞同：1
> 
> 时间：2012-04-04T10:04:16.137
> 
> 标签：php, objective-c, ios, cocoa-touch, blob

我有一个存储在 MySQL 数据库中的 BLOB 图像，我想在我的 iOS 应用程序中使用它。我创建了一个 PHP 文件来从数据库中检索 BLOB，但我不确定我需要做什么才能将 BLOB 放入我的应用程序中。

请你能给我一个例子，或者指出我这样做的方向吗？

先谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:22:40.093

使用[ASIIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)从该 PHP 页面请求 BLOB 数据。

使用 BLOB 数据，将其转换为 UIImage。

```
- (void) getBlobData:(NSURL *) url {
    NSURL *url = [NSURL URLWithString:url];
    __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
    [request setCompletionBlock:^{
       NSData *blobData = [request responseData];
       UIImage *blobImage = [UIImage imageWithData:blobData] retain];
       [someImageView performSelectorOnMainThread:@selector(setImage:)
       withObject:blobImage 
       waitUntilDone:YES];
    }];

    [request setFailedBlock:^{
      NSError *error = [request error];
    }];
    [request startAsynchronous];
} 
```

或者，您可以使用 Grand Central Dispatch (GCD) 向网页发送请求以接收 blob：

```
- (void) getBlobData:(NSURL *) url {

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul); 
    dispatch_async(queue, ^{  
        NSData *blobData = [NSData dataWithContentsOfURL:url];       
        UIImage *blobImage = [UIImage imageWithData:blobData];
        dispatch_sync(dispatch_get_main_queue(), ^{
             [someImageView setImage:blobImage];
         });
     }); 
} 
```

# java - 渲染选项列表时出现 Richfaces 异常

> ID：10008981
> 
> 赞同：0
> 
> 时间：2012-04-04T10:04:19.070
> 
> 标签：java, jsf, jakarta-ee, richfaces, jboss5.x

我正在开发一个使用 RichFaces JSF 实现的项目。

我使用 Jboss 5.1 应用服务器和 RichFaces 3.3。

该应用程序在 RichFaces 上运行良好，直到我想使用 pickList 组件。

我得到以下信息：

例外

```
javax.servlet.ServletException
    javax.faces.webapp.FacesServlet.service(FacesServlet.java:277)
    org.ajax4jsf.webapp.BaseXMLFilter.doXmlFilter(BaseXMLFilter.java:206)... 
```

根本原因

```
java.lang.NullPointerException
    org.richfaces.renderkit.ConvertedSelectItem.get(ConvertedSelectItem.java:43)
    org.richfaces.renderkit.PickListRenderer.getConvertedItems(PickListRenderer.java:523)
    org.richfaces.renderkit.html.PickListRendererGen.doEncodeChildren(PickListRendererGen.java:283)
    org.richfaces.renderkit.html.PickListRendererGen.doEncodeChildren(PickListRendererGen.java:264)
    org.ajax4jsf.renderkit.RendererBase.encodeChildren(RendererBase.java:120) 
```

谁能帮我？

（如果需要其他细节，请告诉我）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T11:16:32.100

```
richfaces exception at rendering picklist

Add this code in your picklist.xhtml page

<h:panelGroup>
    <rich:pickList id="rightsList" listsHeight="92px;" 
    tabindex="7" sourceListWidth="340px;"
    value="#{userManagementForm.rightsPickList}"
    targetListWidth="340px;" showButtonsLabel="true"
    style="float:left;">
    <f:selectItems value="#{rightsList}" />
    </rich:pickList>
</h:panelGroup> 
```

# ext.net - Ext.net PageProxy：它是什么以及它是如何工作的？

> ID：10008985
> 
> 赞同：1
> 
> 时间：2012-04-04T10:04:28.807
> 
> 标签：ext.net

我发现PageProxy可以用于从页面获取数据，但我不明白它是什么意思，与HttpProxy有什么区别。尤其：

*   谁/何时开始请求？
*   请求如何与页面生命周期交互？
*   数据来自哪里？PageProxy 上没有 url 属性。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T21:26:18.293

首先看下面的示例 [http://examples1.ext.net/#/GridPanel/Paging_and_Sorting/Page/](http://examples1.ext.net/#/GridPanel/Paging_and_Sorting/Page/)

如果您使用 PageProxy 那么您必须在商店中设置 OnRefreshData 事件处理程序

# java - 用于转换 native2ascii 的库，反之亦然

> ID：10008989
> 
> 赞同：7
> 
> 时间：2012-04-04T10:04:44.513
> 
> 标签：java, ascii

我正在寻找一个库（Apache / BSD / EPL 许可）使用 \u 将本机文本转换为 ASCII 用于 ASCII 中不可用的字符（基本上是 java.util.Properties 所做的）。

我看了看，似乎没有任何现成的库。我发现：

*   JDK、tools.jar、[native2ascii](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/native2ascii.html)
*   Properties.saveConvert() （私有方法）
*   [http://www.koders.com/java/fidD26ED81BEBE41932C405904AD53AEE8459BB8509.aspx](http://www.koders.com/java/fidD26ED81BEBE41932C405904AD53AEE8459BB8509.aspx) (GPL)

有人知道上述许可下的库吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-04T10:45:28.583

您可以使用 CharsetEncoder 执行此操作。您必须使用正确的 unicode 编码阅读“本机”文本。您可以使用“US-ASCII”编码器来检测哪些字符将被转换为 unicode 转义。

```
import java.nio.charset.Charset;
import java.nio.charset.CharsetEncoder;

import org.junit.Test;

public class EncodeToEscapes {

@Test
public void testEncoding() {
    final String src = "Hallo äöü"; // this has to be read with the right encoding
    final CharsetEncoder asciiEncoder = Charset.forName("US-ASCII").newEncoder();
    final StringBuilder result = new StringBuilder();
    for (final Character character : src.toCharArray()) {
        if (asciiEncoder.canEncode(character)) {
            result.append(character);
        } else {
            result.append("\\u");
            result.append(Integer.toHexString(0x10000 | character).substring(1).toUpperCase());
        }
    }
    System.out.println(result);
 }
} 
```

此外 org.apache.commons:commons-lang 包含 StringEscapeUtils.escapeJava() 可以转义和取消转义本机字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-04T11:13:28.083

试试 Apache commons-lang 的这段代码：

```
StringEscapeUtils.escapeJava("ایران زیبای من");
StringEscapeUtils.unescapeJava("\u0627\u06CC\u0631\u0627\u0646 \u0632\u06CC\u0628\u0627\u06CC \u0645\u0646"); 
```

# html - 使用 JSP 在浏览器中打开本地 PDF 文件

> ID：10008992
> 
> 赞同：1
> 
> 时间：2012-04-04T10:04:52.690
> 
> 标签：html, jsp, file-io

我试图从本地磁盘打开一个 PDF 文件。

例如位置是：

```
E:/files/IT/cat1/cat1Notification.pdf 
```

但在运行时链接更改为：

```
http://localhost:8080/Office_Automation/E:/files/IT/cat1/cat1Notification.pdf 
```

如何摆脱`http://localhost:8080/Office_Automation/`链接并打开文件？

我用过

```
<a href="<%=path%>">click here</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T00:02:01.013

要打开本地文件，您需要在 URL中使用[文件方案](http://en.wikipedia.org/wiki/File_URI_scheme)

由于您的路径是[Windows 路径](http://en.wikipedia.org/wiki/File_URI_scheme#Windows) ，因此需要在您的 jsp 变量之前添加`E:/files/IT/cat1/cat1Notification.pdf`链接的 href ，以便浏览器知道它需要在用户机器上打开本地文件。`file:///``<%=path%>`

所以你的链接应该是这样的

```
<a href="file:///<%=path%>">click here</a> 
```

在您的浏览器中将解析为`file:///E:/files/IT/cat1/cat1Notification.pdf`

如果没有文件方案，浏览器会假定您的链接是相对于网页的，并尝试通过向您的 webapp 发出请求来解析链接。这就是为什么你得到`http://localhost:8080/Office_Automation/E:/files/IT/cat1/cat1Notification.pdf`

# java - 无法从 Java 中的服务器读取数据

> ID：10008994
> 
> 赞同：0
> 
> 时间：2012-04-04T10:04:57.057
> 
> 标签：java, sockets, networking

我正在尝试使用 java 程序读取数据并将其写入服务器。我正在使用控制台写入数据。我可以成功地将数据写入服务器，但是当我尝试读取服务器发送的数据时，问题就来了。

```
import java.io.*;
import java.net.*;

public class EMSSocketConnection {

    public static void main(String[] args) throws Exception {

        createSocket();
    }

    private static void sendMessage(DataOutputStream out) throws Exception
    {
        try 
        {

            BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
            String userOutput;
            while ((userOutput = stdIn.readLine()) != null)
            {
                out.writeBytes(userOutput);
                out.write('\n');
            }
            out.flush();

        }
        catch(Exception ex)
        {
            System.out.println(ex.getStackTrace());

        }
        finally
        {
            out.close();
        }
    }

    private static void readResponse(DataInputStream in) throws Exception
    {
        try
        {
            byte[] data = new byte[1024];
            in.readFully(data);
            System.out.println(data);

        }
        catch (Exception ex)
        {
            System.out.println(ex.getMessage());

        }
        finally
        {
            in.close();
        }
    }

    private static void createSocket()
    {

        try
        {
            int port = 2345;
            InetAddress address = InetAddress.getByName("192.100.100.129");
            final Socket client = new Socket(address, port);
            final DataOutputStream out = new DataOutputStream(client.getOutputStream());
            final DataInputStream in = new DataInputStream(client.getInputStream());

            System.out.println("Successfully Connected");

            new Thread() {
                public void run() {
                    synchronized(client)
                    {
                        try {
                            while(true)
                            {
                            sendMessage(out);
                            readResponse(in);
                            }
                        }
                        catch (Exception ex)
                        {
                            System.out.println(ex.getMessage());
                        }
                    }
                }
            }.start();
        }
        catch(Exception ex)
        {
            ex.getStackTrace();
        }
    }

} 
```

谁能告诉我如何成功地从服务器读取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T10:16:19.573

您的服务器是否将 1024 字节写入其输出？如果没有，你的代码

```
byte[] data = new byte[1024];
in.readFully(data); 
```

将无限期地阻塞和等待。

一个更好的习惯用法是这样做：

```
byte [] data = new byte[in.available()];
in.readFully(data); 
```

您不能随便从流中读取数据并假设您将获得预期的数据。流受到 IO 延迟和缓冲的影响，您需要注意这一点，尤其是在处理网络 IO 时。

# activemq - activemq 主题的出列数是其消费者数量的倍数吗？

> ID：10008999
> 
> 赞同：1
> 
> 时间：2012-04-04T10:05:16.017
> 
> 标签：activemq

如果我向有 2 个活动消费者的主题发布 3 条消息，那么在成功消费所有消息后，出队计数是 3 还是 6？从我的 JConsole 中，我认为是 6（它显示 enQ=3 和 deQ=6），但您能确认一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T12:47:49.560

是的，你的假设是正确的。但请记住，它可能并不总是一个精确的倍数，如果其中一个消费者断开连接一段时间然后重新连接，则出队计数将不包括该客户端在断开连接时错过的消息。